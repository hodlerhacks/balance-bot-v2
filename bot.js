const _0xc2993d=_0x5db8;(function(_0x10f736,_0x35a148){const _0x545a6c=_0x5db8,_0x56a8ed=_0x10f736();while(!![]){try{const _0x474ea8=parseInt(_0x545a6c(0x1a3))/0x1+-parseInt(_0x545a6c(0xec))/0x2*(-parseInt(_0x545a6c(0x28f))/0x3)+-parseInt(_0x545a6c(0x273))/0x4+-parseInt(_0x545a6c(0x19d))/0x5+-parseInt(_0x545a6c(0x204))/0x6*(-parseInt(_0x545a6c(0x253))/0x7)+-parseInt(_0x545a6c(0x158))/0x8+parseInt(_0x545a6c(0x156))/0x9;if(_0x474ea8===_0x35a148)break;else _0x56a8ed['push'](_0x56a8ed['shift']());}catch(_0xee249a){_0x56a8ed['push'](_0x56a8ed['shift']());}}}(_0x50ec,0xa999d));const _0x1fdba8=function(){let _0x385f4e=!![];return function(_0x452d7b,_0x5bdaaa){const _0x49e681=_0x385f4e?function(){const _0x929abd=_0x5db8;if(_0x5bdaaa){const _0x232a86=_0x5bdaaa[_0x929abd(0x184)](_0x452d7b,arguments);return _0x5bdaaa=null,_0x232a86;}}:function(){};return _0x385f4e=![],_0x49e681;};}(),_0x3e6718=_0x1fdba8(this,function(){const _0x56612=_0x5db8;return _0x3e6718[_0x56612(0x291)]()[_0x56612(0x27d)](_0x56612(0x138))[_0x56612(0x291)]()[_0x56612(0x14a)](_0x3e6718)[_0x56612(0x27d)]('(((.+)+)+)+$');});_0x3e6718();'use strict';const ccxt=require(_0xc2993d(0x281)),low=require('lowdb'),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require(_0xc2993d(0x1c9)),forge=require(_0xc2993d(0x2a2)),util=require(_0xc2993d(0x20a)),argv=require('yargs/yargs')(process['argv'][_0xc2993d(0xef)](0x2))[_0xc2993d(0x1a0)],path=require(_0xc2993d(0xe6)),axios=require(_0xc2993d(0xff));let exchange,gTicker={},gChange={};const usdBasecoins=[_0xc2993d(0x28d),_0xc2993d(0x274),_0xc2993d(0x123),_0xc2993d(0x140),_0xc2993d(0x27c),_0xc2993d(0x292)],excludedExchanges=[_0xc2993d(0x120)],debugging=argv['d']||![];let pnlGenerationNeeded=argv['r']||![],config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0xc2993d(0x283)]({'LOCKED':0x0,'UNLOCKING':0x1,'UNLOCKED':0x2});let lockOrders=ORDERS['UNLOCKED'],validateOrdersState,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotIntervalShort=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0xc2993d(0x109)+pauseBotInterval/0xea60+'\x20minutes',maxPauseRetries=0x6,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,watchTransactionsInterval=0x3c*0x3e8,schedulerInterval=0x3c*0x3c*0x3e8,retryInterval=0x3e8,maxRetries=0x5,logPageSize=0x14,defaultFee=0.003;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidOrdersInitialTimeout,pidOrdersTimeout,botPaused=![],transactionDetectionOngoing=![],lastCoinsToBalance='',exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x5dc,balanceUpdateRetries=0x5;let enableFiatToggle;const serverversion=require(_0xc2993d(0x1e8))[_0xc2993d(0x271)],environment=require('./version.json')['environment']||_0xc2993d(0x117),botID=process[_0xc2993d(0x1a0)][0x2]||_0xc2993d(0x1c4),pattern=/^[0-9]{3}$/;!pattern[_0xc2993d(0x19e)](botID)&&(console[_0xc2993d(0x225)](_0xc2993d(0x1bb)+botID+_0xc2993d(0x202)),killBot());const userID=process[_0xc2993d(0x1a0)][0x3]||'',configpath=userID?_0xc2993d(0x27a)+userID+'/':_0xc2993d(0x27a),logspath=userID?_0xc2993d(0x15c)+userID+'/':'./logs/',loggerfile=fs['createWriteStream'](logspath+_0xc2993d(0xf2),{'flags':'a'});!fs['existsSync'](configpath)&&fs[_0xc2993d(0x126)](configpath);!fs['existsSync'](logspath)&&fs[_0xc2993d(0x126)](logspath);const configfile=configpath+_0xc2993d(0x2a6)+botID+_0xc2993d(0x233),logfile=configpath+_0xc2993d(0x2a6)+botID+_0xc2993d(0x237),performancefile=configpath+'bot-'+botID+_0xc2993d(0x112),coinresultsfile=configpath+_0xc2993d(0x2a6)+botID+_0xc2993d(0x248),settingsfile=configpath+_0xc2993d(0x218),securefile=configpath+'bb-secure.json',configbackuppath=configpath+_0xc2993d(0x1ca),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs['defaults']({'logs':[],'version':serverversion})[_0xc2993d(0x1ac)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance['defaults']({'data':[],'version':serverversion})[_0xc2993d(0x1ac)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig['defaults']({'bot':[],'version':serverversion})[_0xc2993d(0x1ac)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0xc2993d(0x150)]({'coins':{},'version':serverversion})[_0xc2993d(0x1ac)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0,settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x3100f4=>{const _0x28aa3b=_0xc2993d;console[_0x28aa3b(0x225)](_0x3100f4);},'simple':_0x14e039=>{const _0x2ca3db=_0xc2993d;console['log'](_0x14e039),loggerfile[_0x2ca3db(0x1ac)](util['format'](_0x14e039)+'\x0a');},'full':async(_0x412860,_0x3c952c='')=>{const _0x253f4b=_0xc2993d;let _0x1a5c95;if(config['showname'])_0x1a5c95=getTimeStamp()+':\x20'+config[_0x253f4b(0x289)]+_0x253f4b(0x1d7)+_0x412860;else _0x1a5c95=getTimeStamp()+_0x253f4b(0x26a)+botID+_0x253f4b(0x1d7)+_0x412860;console[_0x253f4b(0x225)](_0x1a5c95),loggerfile['write'](util[_0x253f4b(0x2a8)](_0x1a5c95)+'\x0a'),_0x3c952c&&(console[_0x253f4b(0x225)](_0x3c952c),loggerfile['write'](util[_0x253f4b(0x2a8)](_0x3c952c)+'\x0a'));},'debug':async(_0x4f2bb7,_0x187662='')=>{const _0x3f68da=_0xc2993d;let _0x1dae0b;if(config[_0x3f68da(0x1a2)])_0x1dae0b=getTimeStamp()+':\x20'+config[_0x3f68da(0x289)]+_0x3f68da(0x27b)+_0x4f2bb7;else _0x1dae0b=getTimeStamp()+_0x3f68da(0x26a)+botID+_0x3f68da(0x27b)+_0x4f2bb7;if(debugging)console[_0x3f68da(0x225)](_0x1dae0b);loggerfile['write'](util[_0x3f68da(0x2a8)](_0x1dae0b)+'\x0a');if(_0x187662){if(debugging)console[_0x3f68da(0x225)](_0x187662);loggerfile['write'](util[_0x3f68da(0x2a8)](_0x187662)+'\x0a');}}};process['on'](_0xc2993d(0x1e5),function(_0x2e7f00){const _0x24e702=_0xc2993d;handleError(_0x2e7f00['stack'],_0x24e702(0x1e5));});settings[_0xc2993d(0x211)]!=config[_0xc2993d(0x211)]&&updateTimeshift(settings[_0xc2993d(0x211)]);settings[_0xc2993d(0x17d)]!=config[_0xc2993d(0x17d)]&&updateOnepagemode(settings[_0xc2993d(0x17d)]);(settings[_0xc2993d(0x235)]&&!config[_0xc2993d(0x235)]||!settings['marketcapApi']&&config[_0xc2993d(0x235)])&&updateMarketcapApi(settings[_0xc2993d(0x235)]);process[_0xc2993d(0x13a)]({'started':_0xc2993d(0x1c7)},_0x4696c6=>{}),initializeProcessListeners();function proxyEmit(_0x4f47fd,_0x22aa68=null){process['send']({'function':_0x4f47fd,'args':_0x22aa68},_0x574200=>{});}function initializeProcessListeners(){const _0x3634cd=_0xc2993d;process['on'](_0x3634cd(0x1a9),_0x50bbd0=>{const _0x3f4cf9=_0x3634cd;switch(Object[_0x3f4cf9(0x1fb)](_0x50bbd0)[0x0]){case'timeshift':_0x50bbd0[_0x3f4cf9(0x211)]!=undefined&&(settings[_0x3f4cf9(0x211)]=_0x50bbd0[_0x3f4cf9(0x211)],updateTimeshift(settings[_0x3f4cf9(0x211)]));break;case'onepagemode':_0x50bbd0['onepagemode']!=undefined&&(settings[_0x3f4cf9(0x17d)]=_0x50bbd0[_0x3f4cf9(0x17d)],updateOnepagemode(settings['onepagemode']));break;case _0x3f4cf9(0x235):_0x50bbd0[_0x3f4cf9(0x235)]!=undefined&&(settings['marketcapApi']=_0x50bbd0['marketcapApi'],updateMarketcapApi(settings[_0x3f4cf9(0x235)]));break;case _0x3f4cf9(0x29e):_0x50bbd0[_0x3f4cf9(0x29e)]!=undefined&&(bots=JSON[_0x3f4cf9(0x1b9)](_0x50bbd0[_0x3f4cf9(0x29e)]),proxyEmit(_0x3f4cf9(0x29e),bots));break;case _0x3f4cf9(0x11c):switch(_0x50bbd0[_0x3f4cf9(0x11c)]){case'initclient':initclient();break;case _0x3f4cf9(0x254):toggleBotMode();break;case _0x3f4cf9(0x259):emitHistory(_0x50bbd0['args']);break;case _0x3f4cf9(0x215):deleteHistoryAlerts(_0x50bbd0['args']);break;case'getPortfolio':getPortfolio(_0x50bbd0[_0x3f4cf9(0x1f8)]);break;case'storeConfiguration':storeConfiguration(_0x50bbd0[_0x3f4cf9(0x1f8)]);break;case _0x3f4cf9(0x18f):storeHeadless(_0x50bbd0[_0x3f4cf9(0x1f8)]);break;case _0x3f4cf9(0x299):storeFiat(_0x50bbd0[_0x3f4cf9(0x1f8)]);break;case _0x3f4cf9(0x12a):resetHistory();break;case _0x3f4cf9(0x118):getStartingBalances(getNormalizedPerformance());break;case'placeOrder':placeOrder(_0x50bbd0[_0x3f4cf9(0x1f8)]);break;case _0x3f4cf9(0x13f):cancelLoading();break;case _0x3f4cf9(0x22e):showConfig();break;case _0x3f4cf9(0x160):sendMetricsTelegram();break;case'sendPortfolioTelegram':sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x5b1be1=![]){const _0x186b79=_0xc2993d;logger['debug'](_0x186b79(0x1ff)+(_0x5b1be1?'exchange\x20reload':_0x186b79(0x198))+_0x186b79(0x282)+config[_0x186b79(0x22b)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x5b1be1)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x186b79(0x10d)]!=''&&config[_0x186b79(0x10d)]!=_0x186b79(0x1b0)){loadingProgress=0x0;if(_0x5b1be1){await initExchange();const _0x55ba82=await testAPI();if(!_0x55ba82)return;await loadSymbols(),loadingProgress=0x1,setStableCoins(),proxyEmit(_0x186b79(0x121),emittedConfiguration()),initialPerformanceStored=![];}const _0x1a4e84=await getCoins();[currentCoins,currentCoinsAll]=_0x1a4e84,setBlockTransactionDetection(![]),startScheduler(),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x186b79(0xf8)]('Loading\x20completed'),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x186b79(0x24e)]==0x0&&allOpenOrders[_0x186b79(0x24e)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(pnlGenerationNeeded)await generatePnL();}}async function resumeBot(_0x340f0d=![]){const _0x24d43f=_0xc2993d;logger[_0x24d43f(0xf8)](_0x24d43f(0x189)+(_0x340f0d?_0x24d43f(0x22d):_0x24d43f(0x277))+')\x20|\x20exchange:\x20'+config[_0x24d43f(0x22b)]);if(pidBalances)clearTimeout(pidBalances);if(_0x340f0d){getBalances();return;}coinsLoaded=![];if(config['apiKey']!=''&&config[_0x24d43f(0x10d)]!='***'){loadingProgress=0x1;const _0x417b7c=await getCoins();[currentCoins,currentCoinsAll]=_0x417b7c,setBlockTransactionDetection(![]),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x24d43f(0xf8)]('Loading\x20completed'),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x24d43f(0x24e)]==0x0&&allOpenOrders[_0x24d43f(0x24e)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();}}async function getMarketCap(_0x255577){const _0x50ef1c=_0xc2993d;let _0x382399=![];if(_0x255577)_0x382399=!![];let _0x1122be;_0x382399?_0x1122be=_0x255577[_0x50ef1c(0x11d)](_0x511d37=>_0x511d37[_0x50ef1c(0x213)]):_0x1122be=currentCoinsAll[_0x50ef1c(0x11d)](_0x26d48d=>_0x26d48d['coin']);if(!config['marketcapApi']||!_0x382399&&!config[_0x50ef1c(0x1b3)]||_0x1122be[_0x50ef1c(0x24e)]==0x0)return;let _0x585fc2=null;try{_0x585fc2=await axios[_0x50ef1c(0x192)](_0x50ef1c(0x263),{'headers':{'X-CMC_PRO_API_KEY':settings[_0x50ef1c(0x235)]},'params':{'symbol':_0x1122be['toString']()}});}catch(_0x58613){_0x585fc2=null,_0x58613[_0x50ef1c(0x291)]()['includes'](_0x50ef1c(0x20b))?(config[_0x50ef1c(0x235)]=![],updateConfig(),proxyEmit(_0x50ef1c(0x121),emittedConfiguration()),logHistory('error',_0x50ef1c(0x236))):(logHistory('error',_0x50ef1c(0x175)+schedulerInterval/(0x3c*0x3e8)+_0x50ef1c(0x149)),logger[_0x50ef1c(0xf8)]('Error\x20details:',_0x58613[_0x50ef1c(0x291)]()+'\x20-\x20'+_0x58613[_0x50ef1c(0x22f)]));}if(_0x585fc2){let _0x3bdbaf=0x0;const _0x3bb99f=_0x585fc2[_0x50ef1c(0x232)];_0x1122be[_0x50ef1c(0xe4)](_0x94519b=>{const _0x5bee5c=_0x50ef1c;if(_0x3bb99f[_0x5bee5c(0x232)][_0x94519b][0x0])_0x3bdbaf+=_0x3bb99f[_0x5bee5c(0x232)][_0x94519b][0x0][_0x5bee5c(0x29b)][_0x5bee5c(0x28d)][_0x5bee5c(0xe7)];}),_0x1122be[_0x50ef1c(0xe4)](_0x38fff7=>{const _0x2c6e76=_0x50ef1c,_0x1173fd=_0x3bb99f['data'][_0x38fff7][0x0]?_0x3bb99f[_0x2c6e76(0x232)][_0x38fff7][0x0]['quote']['USD'][_0x2c6e76(0xe7)]:0x0;if(_0x382399){const _0x1c6e72=_0x255577[_0x2c6e76(0x1e1)](_0x2ea98b=>_0x2ea98b[_0x2c6e76(0x213)]==_0x38fff7);_0x1c6e72&&(_0x1c6e72[_0x2c6e76(0x1a8)]=_0x1173fd);}else{const _0x3787b7=currentCoins[_0x2c6e76(0x1e1)](_0x392f60=>_0x392f60[_0x2c6e76(0x213)]==_0x38fff7);_0x3787b7&&(_0x3787b7['marketcap']=_0x1173fd);const _0x277cfc=currentCoinsAll[_0x2c6e76(0x1e1)](_0x11cac4=>_0x11cac4['coin']==_0x38fff7);_0x277cfc&&(_0x277cfc['marketcap']=_0x1173fd);}}),!_0x382399&&updateTargetDistribution();}}function updateTargetDistribution(){const _0x134a3c=_0xc2993d,_0x1a6d77=0x2;let _0x59e8fb=0x0,_0x123d1a=0x0,_0x2c693e=0x0,_0xb008f0=0x0,_0x4e23d1=0x0;config[_0x134a3c(0x28e)]['forEach'](_0x1867cd=>{const _0x19a464=_0x134a3c;if(!_0x1867cd[_0x19a464(0xf1)]){_0x2c693e++,_0x59e8fb+=_0x1867cd[_0x19a464(0xeb)];if(_0x1867cd[_0x19a464(0xeb)]===-0x1){_0x59e8fb++;const _0xe776e4=currentCoinsAll[_0x19a464(0x1e1)](_0x4bfcd7=>_0x4bfcd7['coin']==_0x1867cd['coin']);_0xe776e4&&(_0xb008f0+=_0xe776e4[_0x19a464(0x1a8)],_0x4e23d1+=Math[_0x19a464(0x26c)](_0xe776e4['marketcap']));}if(_0x1867cd['slider']!==-0x1)_0x123d1a++;}});let _0x5476d7;const _0x532ce1=0x64-_0x59e8fb,_0x5586f3=_0x2c693e-_0x123d1a;_0x5476d7=_0x5586f3===0x0?_0x59e8fb:Math[_0x134a3c(0x266)](0x64,_0x59e8fb),config[_0x134a3c(0x28e)][_0x134a3c(0xe4)](_0x34a0c2=>{const _0x4fe50b=_0x134a3c,_0xe4e571=currentCoinsAll[_0x4fe50b(0x1e1)](_0x50f149=>_0x50f149['coin']==_0x34a0c2[_0x4fe50b(0x213)]);_0xe4e571&&(_0x34a0c2['marketcap']=_0xe4e571[_0x4fe50b(0x1a8)]);if(!_0x34a0c2['excluded']){if(_0x5476d7<=0x64){if(_0x34a0c2[_0x4fe50b(0xeb)]===-0x1){if(_0xb008f0!==0x0&&config[_0x4fe50b(0x1b3)]){if(_0xe4e571){if(config['marketcapEnabled']==_0x4fe50b(0x1a8))_0x34a0c2[_0x4fe50b(0x297)]=(_0x532ce1/(_0xb008f0/_0xe4e571[_0x4fe50b(0x1a8)]))['toFixed'](_0x1a6d77);else config[_0x4fe50b(0x1b3)]=='marketcapsqrt'&&(_0x34a0c2[_0x4fe50b(0x297)]=(_0x532ce1/(_0x4e23d1/Math[_0x4fe50b(0x26c)](_0xe4e571[_0x4fe50b(0x1a8)])))[_0x4fe50b(0x206)](_0x1a6d77));}}}}}}),updateConfig();}function updateConfig(){const _0xa51f15=_0xc2993d;let _0xf320f9=dbConfig[_0xa51f15(0x192)](_0xa51f15(0x196))[_0xa51f15(0x1e1)]({'botID':botID})['value']();_0xf320f9&&dbConfig['get'](_0xa51f15(0x196))[_0xa51f15(0x1e1)]({'botID':botID})[_0xa51f15(0x23c)](config)[_0xa51f15(0x1ac)]();}function logMemory(){const _0x4023e7=_0xc2993d;if(environment!='staging')return;const _0x2b34d5=process[_0x4023e7(0x16e)]()[_0x4023e7(0x1a1)]/0x400/0x400;logger[_0x4023e7(0xf8)](_0x4023e7(0x24d)+process[_0x4023e7(0x267)]+_0x4023e7(0x25a)+formatResult(_0x2b34d5,0x1)+_0x4023e7(0x242));}async function startScheduler(){const _0x4db5a4=_0xc2993d,_0x468794=shiftedTime()[_0x4db5a4(0x22c)]();getMarketCap(),loadSymbols(),_0x468794==0x1&&logMemory(),await sleep(schedulerInterval),startScheduler();}async function restartBot(_0x5ae76f=![]){const _0xd2b188=_0xc2993d;logger[_0xd2b188(0xf8)](_0xd2b188(0x18d));if(!_0x5ae76f)while(lockOrders!=ORDERS['UNLOCKED']||coolingDown){await sleep(0x3e8);}process[_0xd2b188(0x13a)]({'stop':_0xd2b188(0xed)},_0x44b059=>{});}async function initExchange(_0x3950c4=config[_0xc2993d(0x22b)],_0x2fe653=config[_0xc2993d(0x10d)],_0x298bc5=config[_0xc2993d(0x1bc)],_0x5634dc=config[_0xc2993d(0x182)]){const _0x1324dd=_0xc2993d;if(exchange){logger[_0x1324dd(0xf8)](_0x1324dd(0xf3));return;}logger[_0x1324dd(0xf8)]('Initializing\x20exchange');!supportedExchanges()[_0x1324dd(0x1e3)](_0x3950c4)&&(logHistory(_0x1324dd(0x1f1),'Balance\x20Bot\x20does\x20not\x20support\x20the\x20'+_0x3950c4+_0x1324dd(0x174)),killBot());const _0xc7fc7=ccxt[_0x1324dd(0x1ec)][_0x3950c4[_0x1324dd(0x226)]()];exchange=new _0xc7fc7({'apiKey':_0x2fe653,'secret':_0x298bc5,'options':{'defaultType':_0x1324dd(0x288)}});if(_0x5634dc)exchange[_0x1324dd(0x191)]=_0x5634dc;}function _0x50ec(){const _0x51eed4=['net-basecoin','argv','heapUsed','showname','377448ttaUOv','\x20portfolio:</b>\x20\x0a\x0a','sells','getMinutes','pnl','marketcap','message','<b>Bot\x20','2\x20-\x20Validate\x20orders:\x20','write','join','Huobi','ExchangeNotAvailable','***','Unfilled\x20order(s)\x20canceled\x20after\x20','target','marketcapEnabled','none','ordertype','valid','Unknown\x20error\x20-\x20check\x20logs','watchOrders()','parse','colorscheme','Error:\x20Invalid\x20argument\x20','apiSecret','sort','BTC','exchanges','configuration-stored','/USDT','************','Bot\x20','001','secret','%)\x0a','running','0\x20-\x20EXECUTION:\x20','date-fns','/backup/','\x20|\x20','ask','filter','\x20rejected\x20your\x20API\x20request\x20(see:\x20hodlerhacks.com/fix/4)','fetchTickers()','ETH','findIndex','performance','event-history','Block\x20transaction\x20detection:\x20','fetchOpenOrders','\x20API\x20key,\x20secret\x20or\x20password\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','\x20>\x20','\x20network\x20error:\x20','InvalidNonce','basecoin','change24h','Exchange','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','\x20attempts','/USD','Order\x20filled:\x20','find','\x20-\x20bot\x20not\x20started','includes','getFullYear','uncaughtException','buys','status','./version.json','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','decode64','page','pro','portfolio1','fetchBalance','change','detectLiquidityChange()','error','getOpenOrders()','Insufficient\x20funds\x20to\x20execute\x20order:\x20','realizedPnL','decrypt','<pre>','eur','args','bid','remove','keys','push','InsufficientFunds','loadMarkets','Reset\x20|\x20','entries','symbol',',\x20must\x20be\x20a\x203\x20digit\x20number','\x20exchange\x20error:\x20','1201380vcvZnZ','RequestTimeout','toFixed','switch-manual','value','stringify','util','status\x20code\x20401','filled','removed','padEnd','match','fiat','timeshift','balances','coin','/EUR','deleteHistoryAlerts','Market\x20order','added','bb-settings.json','\x20has\x20a\x2024h\x20drop\x20of\x20','%\x20(','startsWith','limit-low','\x20|\x20highest\x20fee:\x20','sha256','shift','Limit\x20(high-margin)','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)','liquidity','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','log','toLowerCase','pki','watchTrades()','has','Cryptocom','exchange','getHours','quick','showConfig','code','closed','red_yellow_blue','data','-config.json','emojibuy','marketcapApi','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','-events.json','no\x20open\x20orders','-------------------------------\x0a','UNLOCKED','1\x20-\x20partially\x20FILLED\x20(','assign','price','toUpperCase','balancing\x20resumed','Exchange\x20permission\x20denied\x20-\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','\x20MB','BNB/','watchTradesForSymbols()','success','update-liquidity','cancelOrder','-results.json','fee','recovery','loadSymbols()','RSA-OAEP','process\x20','length','LOCKED','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','timestamp','set','14bTqwMq','toggleBotMode','total','final','DDoSProtection','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','emitHistory','\x20uses\x20','logs','\x20-\x20bot\x20switched\x20to\x20manual\x20mode','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','createOrder','Generating\x20PnL\x20data','splice','replace','2.6.0','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','\x20order:\x20','market','max','pid','coins','customId',':\x20Bot\x20','offset','sqrt','startnumber','unlinkSync','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','getMonth','version','floor','3722400pETFHZ','BUSD','autoliquidity','Generated\x20PnL\x20data','complete','amount','2.6.22','./config/','\x20>\x20[DEBUG]\x20','USDC','search','watchOrders','privateKeyFromPem','sortBy','ccxt','\x20|\x20exchange:\x20','freeze','net-fiat','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','Error\x20details:','balancing\x20resumes\x20when\x20cooldown\x20ends','spot','botname','Error\x20in\x20loadSymbols():\x20','getDate','open','USD','portfolio','3LkFlZy','Updating\x20API\x20key\x20(not\x20saved\x20in\x20config\x20file\x20yet)','toString','USDP','1\x20-\x20FILLED\x20known\x20order:\x20','changes','writeFile','API-key\x20format\x20invalid','distribution','basecoinvalue','storeFiat','Failed\x20to\x20load\x20market\x20data\x20-\x20bot\x20not\x20started','quote','startprice','addDays','bots','\x20metrics:</b>\x20\x0a\x0a','orderstatus','limits','node-forge','isEqual','recent20','Portfolio\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','bot-','existsSync','format','2.3.5','Error\x20occurred:\x20','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','forEach','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','path','market_cap','request-time','abs','substring','slider','2724356EnzxSs','restart','cancelOrders()','slice','last','excluded','/output-000.log','Initializing\x20exchange:\x20already\x20done','usd','pnl-fiat','testAPI()','string','debug','privateKey','Bybit','Portfolio\x20change\x20detected:\x20','initTickers()','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','1\x20-\x20Handle\x20open\x20orders','axios','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','Error\x20in\x20testNewAPI():\x20','Invalid\x20symbol:\x20','Trigger:\x20','Bitget','reverse','</pre>','percentage','\x20API\x20secret\x20is\x20invalid','\x20>\x20pausing\x20bot\x20for\x20','prevnumber','event','min','apiKey','\x20>\x20stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','random','active','-performance.json','Limit\x20(low-margin)','Test\x20new\x20API','side','cooldown','production','getStartingBalances','\x20minutes\x20-\x20','delta','fetchBalance()','function','map','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','canceled','bitmex','configuration','portfolio2','TUSD','PAXG','Invalid\x20API\x20details,\x20please\x20try\x20again\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','mkdirSync','startdate','ongoing','loading-canceled','resetHistory','\x20|\x20lock\x20orders:\x20','headless','PnL\x20','starting-balance-','yyyy/MM/dd','getSeconds','Binance','padStart','warning','type','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','testApi','1\x20-\x20FILLED\x20unknown\x20order:\x20','(((.+)+)+)+$','Waited\x20','send','order','MIN_NOTIONAL','watchTrades','sell','cancelLoading','USDT','remainingSymbols','fromCodePoint','Value\x20','limit-high','token\x20is\x20expired','enabled','Invalid\x20balance\x20for\x20','InvalidOrder','\x20minutes','constructor','number','ExchangeError','time','trade','limit','defaults','2.7.1','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','average','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','15300999JFsfjT','highest','10270840nGNeYM','progress','secure','<b>','./logs/','orderId','Cex','UNLOCKING','sendMetricsTelegram','watchTradesForSymbols','configstate','Order\x20filled','indexOf','pop','1\x20-\x20Validate\x20orders:\x20','getTime','breakeven','EUR','isBefore','cloneDeep','Initializing\x20coin\x20results','cost','memoryUsage','date','split','2.6.23','RateLimitExceeded','Stopped\x20fetching\x20balance\x20after\x20','\x20exchange','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20trying\x20again\x20in\x20','buy','Failed\x20to\x20load\x20coin\x20data\x20for\x20','Cooldown\x20ended\x20-\x20balancing\x20resumed','threshold','amountToPrecision','No\x20more\x20open\x20orders\x20-\x20','Exception\x20thrown\x20in\x20','onepagemode','fetchTickers','Placing\x20order\x20for:\x20','Invalid\x20quantity','Fee\x20discount\x20refund\x20detected:\x20','apiPassword','round','apply','create','Manual\x20balancing\x20required','currency','AuthenticationError','Resuming\x20(','Order\x20amount\x20is\x20invalid:\x20','Error\x20while\x20deleting\x20files:\x20','Network\x20error\x20details:','Initiating\x20bot\x20restart','timeout','storeHeadless','\x0aSymbol(s):\x20','password','get','emojisell','full','initial','bot','enableFiatToggle','no\x20exchange\x20reloaded','Resetting\x20bot\x20history','\x20closed\x20the\x20connection\x20(see:\x20hodlerhacks.com/fix/5)',')\x20unknown\x20order:\x20','.json','4655285EvyKOI','test'];_0x50ec=function(){return _0x51eed4;};return _0x50ec();}function updateExchange(_0x3d6f76,_0x45be69,_0x1a47f6=null){const _0x43ecae=_0xc2993d;exchange['apiKey']=_0x3d6f76,exchange[_0x43ecae(0x1c5)]=_0x45be69,exchange[_0x43ecae(0x191)]=_0x1a47f6,logger[_0x43ecae(0xf8)](_0x43ecae(0x290));}function setStableCoins(){const _0xc82f14=_0xc2993d;let _0x7426a0=config[_0xc82f14(0x1da)]==_0xc82f14(0x1d0)?_0xc82f14(0x1d0):config[_0xc82f14(0x1da)]=='PAXG'?_0xc82f14(0x124):'BTC',_0x28146a=allSymbols[_0xc82f14(0x1e3)](_0x7426a0+_0xc82f14(0x1df))?_0xc82f14(0x28d):allSymbols[_0xc82f14(0x1e3)](_0x7426a0+_0xc82f14(0x1c1))?_0xc82f14(0x140):_0xc82f14(0x169),_0x529f62=allSymbols['includes'](_0x7426a0+_0xc82f14(0x214))?_0xc82f14(0x169):_0x28146a;enableFiatToggle=!![],_0x28146a=='EUR'&&(enableFiatToggle=![],storeFiat(_0xc82f14(0x169))),_0x529f62!=_0xc82f14(0x169)&&(enableFiatToggle=![],storeFiat(_0xc82f14(0x28d))),stablecoins={'eur':{'coin':''+_0x7426a0+_0x529f62,'symbol':_0x7426a0+'/'+_0x529f62},'usd':{'coin':''+_0x7426a0+_0x28146a,'symbol':_0x7426a0+'/'+_0x28146a}};}async function initwsCcxt(){const _0xdc9d79=_0xc2993d;initCycle++;const _0x56ddc8=initCycle;let _0x5839fb=[];config[_0xdc9d79(0x28e)][_0xdc9d79(0xe4)](_0x32a38c=>{const _0x352c55=_0xdc9d79;if(!_0x32a38c[_0x352c55(0xf1)]&&_0x32a38c[_0x352c55(0x213)]!=config['basecoin'])_0x5839fb[_0x352c55(0x1fc)](_0x32a38c[_0x352c55(0x201)]);});if(!_0x5839fb[_0xdc9d79(0x1e3)](stablecoins[_0xdc9d79(0x1f7)][_0xdc9d79(0x201)]))_0x5839fb[_0xdc9d79(0x1fc)](stablecoins['eur'][_0xdc9d79(0x201)]);if(!_0x5839fb[_0xdc9d79(0x1e3)](stablecoins[_0xdc9d79(0xf4)][_0xdc9d79(0x201)]))_0x5839fb['push'](stablecoins[_0xdc9d79(0xf4)][_0xdc9d79(0x201)]);if(config[_0xdc9d79(0x22b)][_0xdc9d79(0x21b)](_0xdc9d79(0x131))&&config[_0xdc9d79(0x1da)]!=_0xdc9d79(0x124)){if(!_0x5839fb[_0xdc9d79(0x1e3)](_0xdc9d79(0x243)+config[_0xdc9d79(0x1da)]))_0x5839fb[_0xdc9d79(0x1fc)](_0xdc9d79(0x243)+config[_0xdc9d79(0x1da)]);}loadCoins(_0x5839fb),_0x5839fb=validateSymbols(_0x5839fb);const _0x540df5=async _0x269f76=>{const _0x291b8f=_0xdc9d79;let _0x16ad8e;try{const _0x2cd0df=await getTickers(_0x269f76);Object[_0x291b8f(0x200)](_0x2cd0df)[_0x291b8f(0xe4)](_0x23a7d1=>{const _0x1b5cae=_0x291b8f;_0x16ad8e=_0x23a7d1[0x1][_0x1b5cae(0x201)],gTicker[noslash(_0x16ad8e)]=_0x23a7d1[0x1][_0x1b5cae(0xf0)],gChange[_0x16ad8e]=_0x23a7d1[0x1]['percentage'];});}catch(_0x2e0072){await handleError(_0x2e0072,_0x291b8f(0xfc),_0x16ad8e);}},_0x18d786=async _0x572f8a=>{const _0x22a02f=_0xdc9d79;while(initCycle==_0x56ddc8){if(!botPaused)try{const _0x3b1531=await exchange[_0x22a02f(0x13d)](_0x572f8a);gTicker[noslash(_0x3b1531[0x0][_0x22a02f(0x201)])]=_0x3b1531[0x0]['price'];}catch(_0x119cd8){if(!exchangeStopped)await handleError(_0x119cd8,_0x22a02f(0x228),_0x572f8a);}else await sleep(0x64);}},_0xdaf146=async _0x1ff58c=>{const _0x998e78=_0xdc9d79;while(initCycle==_0x56ddc8){if(!botPaused)try{const _0x1e0488=await exchange[_0x998e78(0x161)](_0x1ff58c),_0x141646=_0x1e0488[_0x998e78(0x165)]();gTicker[noslash(_0x141646[_0x998e78(0x201)])]=_0x141646[_0x998e78(0x23d)];}catch(_0x22f4cb){if(!exchangeStopped)await handleError(_0x22f4cb,_0x998e78(0x244),_0x1ff58c[_0x998e78(0x291)]());}else await sleep(0x64);}},_0x13f1b8=async _0x2b1769=>{const _0x4d73a8=_0xdc9d79;while(initCycle==_0x56ddc8){if(!botPaused){let _0x55e5c2;try{await sleep(0x3c*0x3e8);const _0x22d920=await getTickers(_0x2b1769);Object[_0x4d73a8(0x200)](_0x22d920)[_0x4d73a8(0xe4)](_0x221b79=>{const _0x53fe7a=_0x4d73a8;_0x55e5c2=_0x221b79[0x1][_0x53fe7a(0x201)],gChange[_0x55e5c2]=_0x221b79[0x1][_0x53fe7a(0x107)];});}catch(_0x3d4945){if(!exchangeStopped)await handleError(_0x3d4945,_0x4d73a8(0x1cf),_0x55e5c2);}}else await sleep(0x64);}},_0x99046c=async _0x4ef6f3=>{const _0x17384c=_0xdc9d79;while(initCycle==_0x56ddc8){if(!botPaused)try{const _0x487c9b=await exchange[_0x17384c(0x27e)](_0x4ef6f3);initCycle==_0x56ddc8&&_0x487c9b[_0x17384c(0xe4)](_0x22e716=>{updateNumberCoinsCcxt(_0x22e716);});}catch(_0x16a59e){if(!exchangeStopped)await handleError(_0x16a59e,_0x17384c(0x1b8));}else await sleep(0x64);}};_0x540df5(_0x5839fb),_0x13f1b8(_0x5839fb),exchange[_0xdc9d79(0x229)][_0xdc9d79(0x161)]&&!(config[_0xdc9d79(0x22b)]==_0xdc9d79(0xfa)&&_0x5839fb[_0xdc9d79(0x24e)]>0xa)?_0xdaf146(_0x5839fb):_0x5839fb[_0xdc9d79(0xe4)](_0x2fa1cf=>{_0x18d786(_0x2fa1cf);}),_0x5839fb[_0xdc9d79(0xe4)](_0x1c3822=>{_0x99046c(_0x1c3822);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x1b7f1c){const _0x17d187=_0xc2993d;let _0x588f59={};try{if(config['exchange']!=_0x17d187(0x22a))_0x588f59=await exchange['fetchTickers'](_0x1b7f1c);else for(const _0x4b382f of _0x1b7f1c){const _0x2b520c=await exchange['fetchTicker'](_0x4b382f);_0x588f59[_0x4b382f]=_0x2b520c;}return _0x588f59;}catch(_0x4c5c66){throw _0x4c5c66;}}function setBlockTransactionDetection(_0xd246af){const _0x225c73=_0xc2993d;blockTransactionDetection=_0xd246af,logger[_0x225c73(0xf8)](_0x225c73(0x1d4)+blockTransactionDetection);}async function detectLiquidityChange(_0x2f57cd=0x0){const _0x3c525b=_0xc2993d;transactionDetectionOngoing=!![];try{const _0x30f557=await getCoins(_0x2f57cd),[_0x79a2aa,_0x36a04f]=_0x30f557;let _0x3e823c=[];currentCoins[_0x3c525b(0xe4)](_0x42af28=>{const _0x2c8eba=_0x3c525b,_0x2ee202=_0x79a2aa['find'](_0x41e583=>_0x41e583[_0x2c8eba(0x213)]==_0x42af28[_0x2c8eba(0x213)]);if(_0x2ee202){if(_0x42af28[_0x2c8eba(0x14b)]!=_0x2ee202[_0x2c8eba(0x14b)]){let _0xf44538;if(_0x42af28[_0x2c8eba(0x213)]!=config[_0x2c8eba(0x1da)]){const _0x2c3799=gTicker[noslash(_0x42af28[_0x2c8eba(0x201)])];_0xf44538=_0x42af28['reverse']?0x1/_0x2c3799:_0x2c3799;}else _0xf44538=0x1;_0x3e823c['push']({'coin':_0x42af28[_0x2c8eba(0x213)],'symbol':_0x42af28[_0x2c8eba(0x201)],'price':_0xf44538,'number':Number(formatResult(_0x2ee202[_0x2c8eba(0x14b)]-_0x42af28[_0x2c8eba(0x14b)],0x8)),'basecoinvalue':_0xf44538*(_0x2ee202[_0x2c8eba(0x14b)]-_0x42af28['number'])});}}});if(_0x3e823c[_0x3c525b(0x24e)]>0x0&&!blockTransactionDetection){for(const _0x452906 of _0x3e823c){if(config[_0x3c525b(0x275)]){logger['debug']('Liquidity\x20change\x20|\x20basecoin\x20value:\x20'+_0x452906[_0x3c525b(0x298)]+_0x3c525b(0x21d)+lastFees[_0x3c525b(0x157)]);if(lastFees[_0x3c525b(0x157)]==0x0||Math['abs'](_0x452906[_0x3c525b(0x298)])>lastFees[_0x3c525b(0x157)]*0x3){if(config[_0x3c525b(0x275)]==_0x3c525b(0x246)){delete _0x452906[_0x3c525b(0x201)],delete _0x452906[_0x3c525b(0x298)];let _0x287655=[],_0x79c8e7=[...config[_0x3c525b(0x223)]]||[],_0x2bf66d=config[_0x3c525b(0x223)];_0x79c8e7[_0x3c525b(0x1bd)]((_0x3ab5b7,_0xa85730)=>_0x3ab5b7[_0x3c525b(0x16f)]>_0xa85730['date']?-0x1:_0xa85730[_0x3c525b(0x16f)]>_0x3ab5b7[_0x3c525b(0x16f)]?0x1:0x0);const _0x4726b7=getDate();if(_0x79c8e7[0x0]){const _0x1af04e=fns[_0x3c525b(0x1b9)](_0x79c8e7[0x0][_0x3c525b(0x16f)],_0x3c525b(0x12f),new Date()),_0x3cffe9=fns['parse'](_0x4726b7,_0x3c525b(0x12f),new Date());if(fns[_0x3c525b(0x2a3)](_0x1af04e,_0x3cffe9)){_0x287655=_0x79c8e7[0x0]['changes'];const _0x352cae=_0x287655[_0x3c525b(0x1e1)](_0x33cf65=>_0x33cf65[_0x3c525b(0x213)]==_0x452906[_0x3c525b(0x213)]);_0x352cae?(_0x352cae[_0x3c525b(0x14b)]+=_0x452906[_0x3c525b(0x14b)],_0x352cae['number']==0x0&&(_0x287655=_0x287655[_0x3c525b(0x1cd)](_0x540233=>{const _0xf20db3=_0x3c525b;return _0x540233[_0xf20db3(0x213)]!=_0x452906['coin'];}))):_0x287655[_0x3c525b(0x1fc)](_0x452906);const _0x50cde6=_0x2bf66d[_0x3c525b(0x1e1)](_0x1682e1=>_0x1682e1[_0x3c525b(0x16f)]==_0x4726b7);_0x50cde6[_0x3c525b(0x294)]=_0x287655;}else _0x2bf66d[_0x3c525b(0x1fc)]({'date':_0x4726b7,'changes':[_0x452906]});}const _0x508be1=_0x2bf66d[_0x3c525b(0x1e1)](_0x34ad71=>_0x34ad71[_0x3c525b(0x16f)]==_0x4726b7);if(_0x508be1){let _0x54ed59=!![];_0x508be1[_0x3c525b(0x294)][_0x3c525b(0xe4)](_0x3456ea=>{if(_0x3456ea['number']!=0x0)_0x54ed59=![];}),_0x54ed59&&(_0x2bf66d=_0x2bf66d[_0x3c525b(0x1cd)](_0x5ce4ba=>{const _0x2f91e0=_0x3c525b;return _0x5ce4ba[_0x2f91e0(0x16f)]!=_0x4726b7;}));}let _0x4e7cc7=dbConfig['get'](_0x3c525b(0x196))['find']({'botID':botID})['value']();_0x4e7cc7&&(dbConfig[_0x3c525b(0x192)](_0x3c525b(0x196))[_0x3c525b(0x1e1)]({'botID':botID})[_0x3c525b(0x23c)]({'liquidity':_0x2bf66d})[_0x3c525b(0x1ac)](),config['liquidity']=_0x2bf66d);logHistory(_0x3c525b(0x245),_0x3c525b(0xfb)+Math[_0x3c525b(0xe9)](_0x452906[_0x3c525b(0x14b)])+'\x20'+_0x452906[_0x3c525b(0x213)]+'\x20'+(_0x452906['number']>0x0?'added':'removed')+_0x3c525b(0x155)),proxyEmit(_0x3c525b(0x121),emittedConfiguration());const _0x1139b2=getNormalizedPerformance();emitPerformance(_0x1139b2),getStartingBalances(_0x1139b2),logger[_0x3c525b(0xf8)](_0x3c525b(0x2a5));}else config['autoliquidity']==_0x3c525b(0x207)&&(config[_0x3c525b(0x12c)]?(await storeHeadless({'headless':![]}),logHistory(_0x3c525b(0x245),'Portfolio\x20change\x20detected:\x20'+Math[_0x3c525b(0xe9)](_0x452906[_0x3c525b(0x14b)])+'\x20'+_0x452906[_0x3c525b(0x213)]+'\x20'+(_0x452906[_0x3c525b(0x14b)]>0x0?_0x3c525b(0x217):_0x3c525b(0x20d))+_0x3c525b(0x25c))):logger[_0x3c525b(0xf8)]('Portfolio\x20change\x20detected:\x20'+Math['abs'](_0x452906[_0x3c525b(0x14b)])+'\x20'+_0x452906[_0x3c525b(0x213)]+'\x20'+(_0x452906[_0x3c525b(0x14b)]>0x0?'added':'removed')+'\x20-\x20bot\x20already\x20running\x20in\x20manual\x20mode'));}else logger[_0x3c525b(0xf8)](_0x3c525b(0x181)+Math[_0x3c525b(0xe9)](_0x452906[_0x3c525b(0x14b)])+'\x20'+_0x452906[_0x3c525b(0x213)]+'\x20'+(_0x452906[_0x3c525b(0x14b)]>0x0?_0x3c525b(0x217):_0x3c525b(0x20d)));}else logger[_0x3c525b(0xf8)](_0x3c525b(0xfb)+Math[_0x3c525b(0xe9)](_0x452906[_0x3c525b(0x14b)])+'\x20'+_0x452906[_0x3c525b(0x213)]+'\x20'+(_0x452906[_0x3c525b(0x14b)]>0x0?_0x3c525b(0x217):_0x3c525b(0x20d))+_0x3c525b(0x285));}currentCoins=_0x79a2aa,currentCoinsAll=_0x36a04f;}}catch(_0x13cb8b){if(!exchangeStopped)await handleError(_0x13cb8b,_0x3c525b(0x1f0));}transactionDetectionOngoing=![];}async function watchTransactions(){await sleep(0x14*0x3e8);while(!![]){!botPaused&&!blockTransactionDetection&&coinsLoaded?(detectLiquidityChange(),await sleep(watchTransactionsInterval)):await sleep(0x3e8);}}async function loadSymbols(){const _0x22b43d=_0xc2993d;try{markets=await exchange[_0x22b43d(0x1fe)](!![]),allSymbols=[],Object['entries'](markets)[_0x22b43d(0xe4)](_0x2d9bf3=>{const _0x5b4ed4=_0x22b43d;_0x2d9bf3[0x1][_0x5b4ed4(0x111)]&&_0x2d9bf3[0x1][_0x5b4ed4(0x288)]&&allSymbols[_0x5b4ed4(0x1fc)](_0x2d9bf3[0x0]);});}catch(_0x2f6ed5){markets?logger[_0x22b43d(0xf8)](_0x22b43d(0x28a)+_0x2f6ed5[_0x22b43d(0x291)]()):(loading['cancel']=!![],emitLoadingProgress(),_0x2f6ed5[_0x22b43d(0x291)]()['toLowerCase']()[_0x22b43d(0x1e3)](_0x22b43d(0x251))||_0x2f6ed5['toString']()[_0x22b43d(0x226)]()['includes'](_0x22b43d(0xe8))?logHistory('error',_0x22b43d(0x222)):handleErrorNoStop(_0x2f6ed5,_0x22b43d(0x24b),!![]),logHistory('error',_0x22b43d(0x29a)),logHistory(_0x22b43d(0x1f1),'Pausing\x20for\x20'+loadCoinsRetryInterval/0xea60+'\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again'),logger[_0x22b43d(0xf8)]('Error\x20details:',_0x2f6ed5),botPaused=!![],await sleep(loadCoinsRetryInterval),restartBot());}}function validateSymbols(_0x246c91){const _0x11169e=_0xc2993d;let _0x50f92d=[];return _0x246c91[_0x11169e(0xe4)](_0x1cf031=>{const _0xcbcff9=_0x11169e;!allSymbols[_0xcbcff9(0x1e3)](_0x1cf031)?logHistory(_0xcbcff9(0x1f1),_0xcbcff9(0x102)+_0x1cf031+'\x20-\x20exclude\x20coin\x20in\x20the\x20configuration'):_0x50f92d[_0xcbcff9(0x1fc)](_0x1cf031);}),_0x50f92d;}async function initclient(){const _0xda113=_0xc2993d;proxyEmit('configuration',emittedConfiguration()),proxyEmit(_0xda113(0x1bf),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0xda113(0x212),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x566959=getNormalizedPerformance();emitPerformance(_0x566959),getStartingBalances(_0x566959);}async function toggleBotMode(){const _0x32cd40=_0xc2993d;let _0x3ddf49=dbConfig[_0x32cd40(0x192)](_0x32cd40(0x196))[_0x32cd40(0x1e1)]({'botID':botID})[_0x32cd40(0x208)]();if(_0x3ddf49){const _0x295d21=!_0x3ddf49[_0x32cd40(0x12c)];dbConfig[_0x32cd40(0x192)](_0x32cd40(0x196))[_0x32cd40(0x1e1)]({'botID':botID})[_0x32cd40(0x23c)]({'headless':_0x295d21})['write'](),config[_0x32cd40(0x12c)]=_0x295d21,proxyEmit(_0x32cd40(0x121),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x36a6f8=_0xc2993d;process[_0x36a6f8(0x13a)]({'updatebotmanager':!![]},_0x1cf717=>{}),logger[_0x36a6f8(0xf8)]('Headless:\x20'+config['headless']);}async function loadCoins(_0x5bac46){const _0x505f57=_0xc2993d;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x44a109,_0x149c33=0x0,_0x3caac2=0x0;_0x5bac46[_0x505f57(0xe4)](_0x2ba9da=>{const _0x2d323b=_0x505f57;loading['remainingSymbols'][_0x2d323b(0x1fc)](_0x2ba9da);}),loadingCanceled=![];let _0x54276a=![];while(_0x44a109!=_0x5bac46[_0x505f57(0x24e)]+maxLoadingProgress){_0x44a109=loadingProgress,_0x5bac46[_0x505f57(0xe4)](_0x4d818d=>{const _0x5b3384=_0x505f57;if(gTicker[noslash(_0x4d818d)]){loading[_0x5b3384(0x141)]=loading[_0x5b3384(0x141)][_0x5b3384(0x1cd)](_0x2504fc=>_0x2504fc!=_0x4d818d);if(!watchedSymbols[_0x5b3384(0x1e3)](_0x4d818d))watchedSymbols['push'](_0x4d818d);_0x44a109++;}}),loading[_0x505f57(0x159)]=Math['round'](_0x44a109/(_0x5bac46[_0x505f57(0x24e)]+maxLoadingProgress)*0x64);loading[_0x505f57(0x159)]!=0x64&&(_0x3caac2>0x1e*0x5&&(loading['timeout']=!![],emitLoadingProgress()),_0x3caac2>0x78*0x5&&!_0x54276a&&(_0x54276a=!![],logHistory(_0x505f57(0x1f1),_0x505f57(0x177)+loading['remainingSymbols'][_0x505f57(0x1ad)](',\x20')+_0x505f57(0x1e2)),logHistory('error','Pausing\x20for\x20'+loadCoinsRetryInterval/0xea60+_0x505f57(0x224)),loadingCanceled=!![],await sleep(loadCoinsRetryInterval),restartBot()));if(loadingCanceled){loading['cancel']=!![],emitLoadingProgress();break;}else _0x149c33!=loading[_0x505f57(0x159)]&&(_0x149c33=loading[_0x505f57(0x159)],emitLoadingProgress()),_0x3caac2++,await sleep(0xc8);}_0x44a109==_0x5bac46[_0x505f57(0x24e)]+maxLoadingProgress&&(coinsLoaded=!![],process[_0x505f57(0x13a)]({'status':'enabled','live':_0x505f57(0x1c7)},_0x92c21c=>{}),_0x54276a&&logHistory(_0x505f57(0x245),'All\x20coin\x20data\x20loaded\x20-\x20bot\x20started'));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x365b69=_0xc2993d;proxyEmit('configuration',{...emittedConfiguration(),'configstate':_0x365b69(0x129)});}function emitLoadingProgress(){proxyEmit('coin-loading-progress',loading);}async function getFiat(){const _0xa2e7f7=_0xc2993d;let _0x309dc2=gTicker[stablecoins[_0xa2e7f7(0x1f7)]['coin']],_0x1b5a30=gTicker[stablecoins[_0xa2e7f7(0xf4)][_0xa2e7f7(0x213)]];return{'eur':Number(_0x309dc2),'usd':Number(_0x1b5a30)};}function capitalize(_0x26327c){const _0x568ef8=_0xc2993d;return _0x26327c[_0x568ef8(0xea)](0x0,0x1)[_0x568ef8(0x23e)]()+_0x26327c[_0x568ef8(0xea)](0x1);}function supportedExchanges(){const _0x4cff2f=_0xc2993d,_0x362b68=['ws',_0x4cff2f(0x17e),'fetchTicker',_0x4cff2f(0x13d),_0x4cff2f(0x27e),_0x4cff2f(0x247),_0x4cff2f(0x25e),_0x4cff2f(0x1d5),_0x4cff2f(0x1ee)];let _0xf7eb68=[],_0x502b72=[],_0x593e5b=ccxt[_0x4cff2f(0x1ec)]['exchanges'];_0x593e5b[_0x4cff2f(0xe4)](_0xcbe50=>{const _0x38e6d9=_0x4cff2f;try{const _0x3b0e9d=new ccxt[(_0x38e6d9(0x1ec))][_0xcbe50]();_0x502b72[_0x38e6d9(0x1fc)](_0x3b0e9d);}catch(_0x54cfc1){}}),_0x502b72[_0x4cff2f(0xe4)](_0x33389b=>{const _0x386c09=_0x4cff2f;let _0x467c59=0x0;_0x362b68[_0x386c09(0xe4)](_0x26f488=>{_0x26f488 in _0x33389b['has']&&_0x33389b['has'][_0x26f488]&&_0x467c59++;}),_0x467c59==_0x362b68[_0x386c09(0x24e)]&&(!excludedExchanges[_0x386c09(0x1e3)](_0x33389b['id'])&&_0xf7eb68[_0x386c09(0x1fc)](capitalize(_0x33389b['id'])));});let _0x4d8ff1=[];return _0x593e5b[_0x4cff2f(0xe4)](_0x9ac2f4=>{const _0x510aa2=_0x4cff2f;_0x9ac2f4=capitalize(_0x9ac2f4);if(!_0xf7eb68['includes'](_0x9ac2f4))_0x4d8ff1[_0x510aa2(0x1fc)](_0x9ac2f4);}),_0xf7eb68;}function setStartDatePerformance(){const _0x1283a9=_0xc2993d;if(config&&config['liquidity'][0x0][_0x1283a9(0x294)]['length']!=0x0){const _0x232091=config[_0x1283a9(0x223)][0x0][_0x1283a9(0x294)];dbPerformance[_0x1283a9(0x192)]('data')[_0x1283a9(0x1e1)]({'date':config[_0x1283a9(0x127)]})[_0x1283a9(0x23c)]({'coins':_0x232091})[_0x1283a9(0x1ac)]();}}function calculatePnL(_0xe648f5,_0x556c05,_0x5da25e,_0x49e7c3,_0x42ce4a,_0x4a81f4){const _0x337178=_0xc2993d;!_0xe648f5[_0x337178(0x1e3)]('/'+config[_0x337178(0x1da)])&&(_0x5da25e=_0x5da25e==_0x337178(0x176)?_0x337178(0x13e):_0x337178(0x176));!_0x4a81f4[_0x556c05]&&(_0x4a81f4[_0x556c05]={'number':0x0,'sells':0x0,'buys':0x0,'breakeven':0x0,'realizedPnL':0x0});let _0x961319=0x0,_0x5b11c3,_0x28920d;if(_0x5da25e==_0x337178(0x176))_0x28920d=_0x4a81f4[_0x556c05][_0x337178(0x14b)]*_0x4a81f4[_0x556c05][_0x337178(0x168)]+_0x42ce4a*_0x49e7c3,_0x4a81f4[_0x556c05][_0x337178(0x14b)]+=_0x49e7c3,_0x4a81f4[_0x556c05][_0x337178(0x168)]=_0x4a81f4[_0x556c05][_0x337178(0x14b)]!=0x0?_0x28920d/_0x4a81f4[_0x556c05][_0x337178(0x14b)]:0x0,_0x4a81f4[_0x556c05][_0x337178(0x1e6)]++;else _0x5da25e==_0x337178(0x13e)&&(_0x5b11c3=Math[_0x337178(0x10c)](_0x4a81f4[_0x556c05][_0x337178(0x14b)],_0x49e7c3),_0x961319=(_0x42ce4a-_0x4a81f4[_0x556c05][_0x337178(0x168)])*_0x5b11c3,_0x28920d=Math[_0x337178(0x266)](_0x4a81f4[_0x556c05][_0x337178(0x14b)]*_0x4a81f4[_0x556c05][_0x337178(0x168)]-_0x5b11c3*_0x4a81f4[_0x556c05][_0x337178(0x168)],0x0),_0x4a81f4[_0x556c05][_0x337178(0x14b)]-=_0x5b11c3,_0x4a81f4[_0x556c05][_0x337178(0x168)]=_0x4a81f4[_0x556c05]['number']!=0x0?_0x28920d/_0x4a81f4[_0x556c05][_0x337178(0x14b)]:0x0,_0x4a81f4[_0x556c05]['realizedPnL']+=_0x961319,_0x4a81f4[_0x556c05][_0x337178(0x1a5)]++);return _0x961319;}async function generatePnL(){const _0x342069=_0xc2993d;pnlGenerationNeeded=![],logger[_0x342069(0xf8)](_0x342069(0x25f));const _0x5d2936=dbLogs['get']('logs')[_0x342069(0x208)]();let _0x585a42={},_0x3c282c=0x0,_0xcaf7f7=0x0,_0xe69899=config[_0x342069(0x127)];const _0x1f0554=fns[_0x342069(0x1b9)](_0xe69899,_0x342069(0x12f),new Date()),_0x588a9d=new Date();let _0x219a28=0x0;for(let _0x3b2889=_0x1f0554;!fns[_0x342069(0x16a)](_0x588a9d,_0x3b2889);_0x3b2889=fns[_0x342069(0x29d)](_0x3b2889,0x1)){const _0x27e653=fns[_0x342069(0x2a8)](_0x3b2889,'yyyy/MM/dd');while(_0x3c282c<_0x5d2936[_0x342069(0x24e)]){const _0x39a1e6=new Date(_0x5d2936[_0x3c282c][_0x342069(0x14d)]);if(fns[_0x342069(0x16a)](_0x39a1e6,_0x3b2889))_0x3c282c++;else{if(_0x5d2936[_0x3c282c][_0x342069(0x14d)][_0x342069(0x1e3)](_0x27e653)){const _0x2e98a3=_0x5d2936[_0x3c282c];if(_0x2e98a3[_0x342069(0x134)]==='order'&&(_0x2e98a3[_0x342069(0x10b)]['includes'](_0x342069(0x163))||_0x2e98a3['event']['includes'](_0x342069(0x216)))){const _0x5623d1=_0x2e98a3[_0x342069(0x10b)][_0x342069(0x20f)](/([A-Z]+\/[A-Z]+) (sell|buy) #([\d.]+) @([\d.]+)/);if(_0x5623d1){const [,_0x4d255c,_0x29c7ca,_0x433426,_0x40f450]=_0x5623d1,_0x3c7dfe=_0x4d255c[_0x342069(0x1e3)]('/'+config[_0x342069(0x1da)])?_0x4d255c[_0x342069(0x170)]('/')[0x0]:_0x4d255c[_0x342069(0x170)]('/')[0x1],_0xa5f31c=calculatePnL(_0x4d255c,_0x3c7dfe,_0x29c7ca,parseFloat(_0x433426),parseFloat(_0x40f450),_0x585a42);_0xcaf7f7+=_0xa5f31c;}}_0x3c282c++;}else break;}}dbPerformance[_0x342069(0x192)](_0x342069(0x232))['find']({'date':_0x27e653})[_0x342069(0x23c)]({'pnl':_0xcaf7f7})[_0x342069(0x1ac)]();}dbCoinResults[_0x342069(0x252)]('coins',_0x585a42)[_0x342069(0x1ac)](),logger['debug'](_0x342069(0x276));const _0x3a1631=getNormalizedPerformance();emitPerformance(_0x3a1631);}async function updatePnL(_0x5eb65a){const _0x1efbad=_0xc2993d,{symbol:_0xb1d900,coin:_0x1b6b50,amount:_0x22c364,price:_0x4f3594,side:_0x20894f,reverse:_0x446408}=_0x5eb65a;let _0x34053e=dbCoinResults[_0x1efbad(0x192)](_0x1efbad(0x268))[_0x1efbad(0x208)]();const _0x34db32=calculatePnL(_0xb1d900,_0x1b6b50,_0x20894f,_0x22c364,_0x4f3594,_0x34053e);dbCoinResults[_0x1efbad(0x252)](_0x1efbad(0x268),_0x34053e)[_0x1efbad(0x1ac)]();const _0x1ae58e=getTimeStamp()[_0x1efbad(0x170)]('\x20')[0x0];let _0x52e155=dbPerformance[_0x1efbad(0x192)](_0x1efbad(0x232))[_0x1efbad(0x1e1)]({'date':_0x1ae58e})['value']();_0x52e155?(_0x52e155['pnl']+=_0x34db32,dbPerformance[_0x1efbad(0x192)]('data')['find']({'date':_0x1ae58e})['assign'](_0x52e155)[_0x1efbad(0x1ac)]()):await storePerformance();const _0x226ade=getNormalizedPerformance();emitPerformance(_0x226ade);}async function validate24hChanges(){const _0x5323da=_0xc2993d;for(const _0x1e3b7f of currentCoins){if(_0x1e3b7f[_0x5323da(0x213)]!=config[_0x5323da(0x1da)]){let _0x4c6bde;_0x1e3b7f['reverse']?_0x4c6bde=formatResult((0x1/(gChange[_0x1e3b7f[_0x5323da(0x201)]]/0x64+0x1)-0x1)*0x64,0x3):_0x4c6bde=gChange[_0x1e3b7f[_0x5323da(0x201)]],_0x4c6bde<config[_0x5323da(0x1db)]&&(logHistory('error',_0x1e3b7f[_0x5323da(0x213)]+_0x5323da(0x219)+_0x4c6bde+'%'),logHistory(_0x5323da(0x1f1),_0x5323da(0x100)),logHistory(_0x5323da(0x1f1),_0x5323da(0x153)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x1bfa6e,_0x15fcef){const _0xfac98f=_0xc2993d;if(!_0x1bfa6e)return!![];const _0x493982=_0x15fcef['split']('.'),_0x58e3ba=_0x1bfa6e[_0xfac98f(0x170)]('.');for(var _0x52537b=0x0;_0x52537b<_0x58e3ba['length'];_0x52537b++){const _0x4f209c=~~_0x58e3ba[_0x52537b],_0x1d33af=~~_0x493982[_0x52537b];if(_0x4f209c<_0x1d33af)return!![];if(_0x4f209c>_0x1d33af)return![];}return![];}async function oneTimeMigration(){const _0x95c4f=_0xc2993d;let _0x12ea5e=dbLogs[_0x95c4f(0x192)](_0x95c4f(0x271))[_0x95c4f(0x208)]();if(isOlderVersion(_0x12ea5e,_0x95c4f(0x2a9))){let _0x163fe3=[];const _0x4297f2=dbLogs[_0x95c4f(0x192)](_0x95c4f(0x25b))[_0x95c4f(0x208)]();_0x4297f2['forEach'](_0x2012d5=>{const _0x2c6e23=_0x95c4f;_0x163fe3[_0x2c6e23(0x1fc)]({'time':_0x2012d5[_0x2c6e23(0x14d)],'type':_0x2012d5[_0x2c6e23(0x134)],'event':_0x2012d5[_0x2c6e23(0x10b)]});}),dbLogs[_0x95c4f(0x192)](_0x95c4f(0x25b))[_0x95c4f(0x23c)](_0x163fe3)[_0x95c4f(0x1ac)]();}let _0x373f48=dbConfig[_0x95c4f(0x192)]('version')[_0x95c4f(0x208)]();if(isOlderVersion(_0x373f48,'2.3.5')){let _0x4424f8=dbConfig[_0x95c4f(0x192)](_0x95c4f(0x196))[_0x95c4f(0x1e1)]({'botID':botID})[_0x95c4f(0x208)]();if(_0x4424f8){let _0x365db7=[];_0x4424f8[_0x95c4f(0x28e)][_0x95c4f(0xe4)](_0x235a2b=>{const _0x46f5c3=_0x95c4f;_0x365db7[_0x46f5c3(0x1fc)]({'coin':_0x235a2b[_0x46f5c3(0x213)],'number':_0x235a2b[_0x46f5c3(0x26d)],'price':_0x235a2b[_0x46f5c3(0x29c)]}),delete _0x235a2b[_0x46f5c3(0x26d)],delete _0x235a2b[_0x46f5c3(0x29c)];});if(_0x365db7['length']!==0x0)fs[_0x95c4f(0x295)](configbackuppath+(_0x95c4f(0x12e)+botID+_0x95c4f(0x19c)),JSON[_0x95c4f(0x209)](_0x365db7,null,0x4),function(_0x32ecfc){if(_0x32ecfc){}});const _0x4981f4=(_0xd15283,_0x4f30d8)=>{let _0x18923a=[];_0x4f30d8['forEach'](_0x4d72de=>{const _0x1f5553=_0x5db8,_0x41f611=_0xd15283[_0x1f5553(0x1e1)](_0x51eac3=>_0x51eac3[_0x1f5553(0x213)]==_0x4d72de['coin']);if(!_0x41f611)_0x18923a[_0x1f5553(0x1fc)](_0x4d72de);});let _0x556cd2=[];return _0xd15283['forEach'](_0x573b0a=>{const _0x4565d3=_0x5db8,_0x2c06c2=_0x4f30d8[_0x4565d3(0x1e1)](_0x50803d=>_0x50803d['coin']==_0x573b0a['coin']);if(!_0x2c06c2||_0x2c06c2[_0x4565d3(0x14b)]==0x0&&_0x573b0a[_0x4565d3(0x14b)]!=0x0)_0x556cd2['push'](_0x573b0a);}),{'missingDay1':_0x18923a,'notInDay2':_0x556cd2};},_0x577352=dbPerformance[_0x95c4f(0x192)](_0x95c4f(0x232))['cloneDeep']()['value']();if(_0x577352[_0x95c4f(0x24e)]>0x1){const {missingDay1:_0x32b148,notInDay2:_0x363e7e}=_0x4981f4(_0x365db7,_0x577352[0x1][_0x95c4f(0x268)]);_0x365db7=[..._0x365db7,..._0x32b148],_0x363e7e[_0x95c4f(0xe4)](_0x2cb225=>{const _0x55e4bf=_0x95c4f;let _0x37b655=_0x365db7[_0x55e4bf(0x1d1)](_0x55fc0b=>_0x55fc0b[_0x55e4bf(0x213)]==_0x2cb225[_0x55e4bf(0x213)]);_0x37b655!=-0x1&&_0x365db7[_0x55e4bf(0x260)](_0x37b655,0x1);});}_0x365db7['sort']((_0x9660ff,_0x4e7726)=>_0x9660ff[_0x95c4f(0x213)]>_0x4e7726[_0x95c4f(0x213)]?0x1:_0x4e7726[_0x95c4f(0x213)]>_0x9660ff['coin']?-0x1:0x0);let _0x5929a7=[{'date':_0x4424f8[_0x95c4f(0x127)],'changes':_0x365db7}];_0x577352['length']>0x2&&_0x577352['forEach']((_0x18d904,_0x101740)=>{const _0x53ac5f=_0x95c4f;if(_0x101740>0x0&&_0x101740<_0x577352['length']-0x1){const {missingDay1:_0x497e14,notInDay2:_0x2cc5e1}=_0x4981f4(_0x577352[_0x101740][_0x53ac5f(0x268)],_0x577352[_0x101740+0x1][_0x53ac5f(0x268)]);_0x365db7=[],(_0x497e14['length']!=0x0||_0x2cc5e1['length']!=0x0)&&(_0x497e14[_0x53ac5f(0x24e)]!=0x0&&_0x365db7['push'](..._0x497e14),_0x2cc5e1[_0x53ac5f(0x24e)]!=0x0&&(_0x2cc5e1['forEach'](_0x2dd92b=>{const _0x4f8bac=_0x53ac5f;_0x2dd92b[_0x4f8bac(0x14b)]=-_0x2dd92b[_0x4f8bac(0x14b)];}),_0x365db7[_0x53ac5f(0x1fc)](..._0x2cc5e1)),_0x365db7[_0x53ac5f(0x1bd)]((_0x341643,_0x2a5fa5)=>_0x341643[_0x53ac5f(0x213)]>_0x2a5fa5[_0x53ac5f(0x213)]?0x1:_0x2a5fa5[_0x53ac5f(0x213)]>_0x341643[_0x53ac5f(0x213)]?-0x1:0x0),_0x5929a7['push']({'date':_0x577352[_0x101740+0x1][_0x53ac5f(0x16f)],'changes':_0x365db7}));}}),dbConfig[_0x95c4f(0x192)]('bot')[_0x95c4f(0x1e1)]({'botID':botID})[_0x95c4f(0x23c)]({..._0x4424f8,'liquidity':_0x5929a7})['write']();}}if(isOlderVersion(_0x373f48,_0x95c4f(0x262))){let _0x502a54=dbConfig[_0x95c4f(0x192)](_0x95c4f(0x196))['find']({'botID':botID})[_0x95c4f(0x208)]();if(_0x502a54){const _0x162755=_0x502a54[_0x95c4f(0x22b)],_0xb9e7eb=_0x162755?capitalize(_0x162755):_0x95c4f(0x131);dbConfig['get'](_0x95c4f(0x196))[_0x95c4f(0x1e1)]({'botID':botID})[_0x95c4f(0x23c)]({'exchange':_0xb9e7eb})[_0x95c4f(0x1ac)]();}}if(isOlderVersion(_0x373f48,_0x95c4f(0x279))){let _0x37f016=dbConfig[_0x95c4f(0x192)]('bot')['find']({'botID':botID})[_0x95c4f(0x208)]();if(_0x37f016){const _0x29bee0=_0x37f016[_0x95c4f(0x1b3)],_0x488eea=_0x29bee0?_0x95c4f(0x1a8):![];dbConfig[_0x95c4f(0x192)](_0x95c4f(0x196))[_0x95c4f(0x1e1)]({'botID':botID})[_0x95c4f(0x23c)]({'marketcapEnabled':_0x488eea})[_0x95c4f(0x1ac)]();}}if(isOlderVersion(_0x373f48,_0x95c4f(0x171))){let _0x4af997=dbConfig[_0x95c4f(0x192)](_0x95c4f(0x196))[_0x95c4f(0x1e1)]({'botID':botID})[_0x95c4f(0x208)]();if(_0x4af997){const _0x3bad5f=_0x4af997[_0x95c4f(0x275)],_0x285435=_0x3bad5f?'update-liquidity':![];dbConfig[_0x95c4f(0x192)](_0x95c4f(0x196))[_0x95c4f(0x1e1)]({'botID':botID})[_0x95c4f(0x23c)]({'autoliquidity':_0x285435})['write']();}}let _0x4bce18=dbPerformance[_0x95c4f(0x192)](_0x95c4f(0x271))[_0x95c4f(0x208)]();isOlderVersion(_0x4bce18,_0x95c4f(0x2a9))&&setStartDatePerformance();let _0x1f156=dbCoinResults[_0x95c4f(0x192)](_0x95c4f(0x271))[_0x95c4f(0x208)]();if(isOlderVersion(_0x1f156,_0x95c4f(0x151))){let _0x3a2ed0=dbCoinResults[_0x95c4f(0x192)](_0x95c4f(0x268))['value']();if(_0x3a2ed0[_0x95c4f(0x24e)]!=0x0)pnlGenerationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x1ba36a=_0xc2993d;dbConfig[_0x1ba36a(0x252)](_0x1ba36a(0x271),serverversion)['write'](),dbPerformance[_0x1ba36a(0x252)]('version',serverversion)[_0x1ba36a(0x1ac)](),dbLogs[_0x1ba36a(0x252)](_0x1ba36a(0x271),serverversion)[_0x1ba36a(0x1ac)](),dbCoinResults[_0x1ba36a(0x252)](_0x1ba36a(0x271),serverversion)[_0x1ba36a(0x1ac)]();}function getConfiguration(_0x437b4e){const _0x5db8b4=_0xc2993d;let _0x484dca=dbConfig[_0x5db8b4(0x192)](_0x5db8b4(0x196))[_0x5db8b4(0x1e1)]({'botID':_0x437b4e})[_0x5db8b4(0x208)]();if(_0x484dca){let _0x45c7f8=![];typeof _0x484dca['threshold']==_0x5db8b4(0xf7)&&(_0x484dca={..._0x484dca,'threshold':Number(_0x484dca[_0x5db8b4(0x179)])},_0x45c7f8=!![]),_0x484dca[_0x5db8b4(0x1db)]==undefined&&(_0x484dca={..._0x484dca,'change24h':-0x14},_0x45c7f8=!![]),_0x484dca[_0x5db8b4(0x210)]==undefined&&(_0x484dca={..._0x484dca,'fiat':_0x5db8b4(0x28d)},_0x45c7f8=!![]),_0x484dca['onepagemode']==undefined&&(_0x484dca={..._0x484dca,'onepagemode':settings[_0x5db8b4(0x17d)]},_0x45c7f8=!![]),_0x484dca[_0x5db8b4(0x1ba)]==undefined&&(_0x484dca={..._0x484dca,'colorscheme':_0x5db8b4(0x231)},_0x45c7f8=!![]),_0x484dca['autoliquidity']==undefined&&(_0x484dca={..._0x484dca,'autoliquidity':_0x5db8b4(0x246)},_0x45c7f8=!![]),_0x484dca['marketcapApi']==undefined&&(_0x484dca={..._0x484dca,'marketcapApi':settings['marketcapApi']?!![]:![]},_0x45c7f8=!![]),_0x484dca[_0x5db8b4(0x1b3)]==undefined&&(_0x484dca={..._0x484dca,'marketcapEnabled':![]},_0x45c7f8=!![]),_0x45c7f8&&(_0x484dca={'botID':_0x484dca['botID'],'exchange':_0x484dca['exchange'],'apiKey':_0x484dca['apiKey'],'apiSecret':_0x484dca[_0x5db8b4(0x1bc)],'apiPassword':_0x484dca[_0x5db8b4(0x182)],'basecoin':_0x484dca[_0x5db8b4(0x1da)],'botname':_0x484dca['botname'],'showname':_0x484dca[_0x5db8b4(0x1a2)],'threshold':_0x484dca[_0x5db8b4(0x179)],'ordertype':_0x484dca[_0x5db8b4(0x1b5)],'timeout':_0x484dca['timeout'],'fiat':_0x484dca[_0x5db8b4(0x210)],'startdate':_0x484dca[_0x5db8b4(0x127)],'recreate':_0x484dca['recreate'],'timeshift':_0x484dca['timeshift'],'onepagemode':_0x484dca[_0x5db8b4(0x17d)],'headless':_0x484dca[_0x5db8b4(0x12c)],'cooldown':_0x484dca[_0x5db8b4(0x116)],'change24h':_0x484dca[_0x5db8b4(0x1db)],'emojibuy':_0x484dca[_0x5db8b4(0x234)],'emojisell':_0x484dca[_0x5db8b4(0x193)],'colorscheme':_0x484dca['colorscheme'],'marketcapApi':_0x484dca[_0x5db8b4(0x235)],'marketcapEnabled':_0x484dca[_0x5db8b4(0x1b3)],'portfolio':_0x484dca['portfolio'],'autoliquidity':_0x484dca[_0x5db8b4(0x275)],'liquidity':_0x484dca[_0x5db8b4(0x223)],'openOrders':_0x484dca['openOrders']},dbConfig[_0x5db8b4(0x192)](_0x5db8b4(0x196))[_0x5db8b4(0x1fa)]()[_0x5db8b4(0x1ac)](),dbConfig[_0x5db8b4(0x192)]('bot')['push'](_0x484dca)[_0x5db8b4(0x1ac)]());}else _0x484dca={'botID':_0x437b4e,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x5db8b4(0x1c3)+_0x437b4e,'showname':![],'threshold':0x3,'ordertype':_0x5db8b4(0x265),'timeout':0x14,'fiat':'USD','startdate':getDate(),'recreate':![],'timeshift':settings['timeshift'],'onepagemode':settings['onepagemode'],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x5db8b4(0x231),'marketcapApi':settings[_0x5db8b4(0x235)]?!![]:![],'marketcapEnabled':![],'portfolio':[],'autoliquidity':_0x5db8b4(0x246),'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x484dca;}function emittedConfiguration(){const _0x4b1a00=_0xc2993d;let _0x575502;if(config[_0x4b1a00(0x10d)]=='')_0x575502={...config,'configstate':_0x4b1a00(0x195)};else config[_0x4b1a00(0x10d)]==_0x4b1a00(0x1b0)?_0x575502={...config,'configstate':_0x4b1a00(0x24a)}:(_0x575502={...config,'apiKey':_0x4b1a00(0x1c2),'apiSecret':_0x4b1a00(0x1c2)},config[_0x4b1a00(0x182)]&&(_0x575502[_0x4b1a00(0x182)]='************'));return _0x575502[_0x4b1a00(0x197)]=enableFiatToggle,_0x575502;}function getSettings(){const _0x1ea8d6=_0xc2993d;return dbSettings[_0x1ea8d6(0x192)]('settings')['value']();}function getSecure(){const _0x4d2602=_0xc2993d;return dbSecure[_0x4d2602(0x192)](_0x4d2602(0x15a))[_0x4d2602(0x208)]()||{};}function updateTimeshift(_0x78efeb){const _0x54a51d=_0xc2993d;let _0x210e7c=dbConfig[_0x54a51d(0x192)](_0x54a51d(0x196))[_0x54a51d(0x1e1)]({'botID':botID})['value']();_0x210e7c&&dbConfig[_0x54a51d(0x192)](_0x54a51d(0x196))['find']({'botID':botID})[_0x54a51d(0x23c)]({'timeshift':_0x78efeb})[_0x54a51d(0x1ac)](),config['timeshift']=_0x78efeb,proxyEmit(_0x54a51d(0x121),emittedConfiguration());}function updateOnepagemode(_0x5ee7ed){const _0x382828=_0xc2993d;let _0x57b7b4=dbConfig['get'](_0x382828(0x196))['find']({'botID':botID})[_0x382828(0x208)]();_0x57b7b4&&dbConfig[_0x382828(0x192)](_0x382828(0x196))[_0x382828(0x1e1)]({'botID':botID})[_0x382828(0x23c)]({'onepagemode':_0x5ee7ed})['write'](),config[_0x382828(0x17d)]=_0x5ee7ed,proxyEmit(_0x382828(0x121),emittedConfiguration());}function updateMarketcapApi(_0x5efd83){const _0x1ef928=_0xc2993d,_0x3f96a1=_0x5efd83?!![]:![];let _0x228c8a=dbConfig['get'](_0x1ef928(0x196))[_0x1ef928(0x1e1)]({'botID':botID})[_0x1ef928(0x208)]();_0x228c8a&&dbConfig[_0x1ef928(0x192)](_0x1ef928(0x196))[_0x1ef928(0x1e1)]({'botID':botID})[_0x1ef928(0x23c)]({'marketcapApi':_0x3f96a1})['write'](),config[_0x1ef928(0x235)]=_0x3f96a1,getMarketCap(),proxyEmit('configuration',emittedConfiguration());}async function storeConfiguration(_0x56bd99){const _0x3327d2=_0xc2993d;logger[_0x3327d2(0xf8)]('Saving\x20configuration');let _0x1ba899=![];_0x56bd99['configstate']&&(_0x56bd99[_0x3327d2(0x162)]==_0x3327d2(0x24a)&&(_0x1ba899=!![]),delete _0x56bd99[_0x3327d2(0x162)]);if(pidBalances)clearTimeout(pidBalances);setBlockTransactionDetection(!![]);let _0x1b88fa=![],_0xa1d9e9=![],_0xd311e9=[];_0x56bd99[_0x3327d2(0x28e)][_0x3327d2(0xe4)](_0x130e28=>{const _0x7bad46=_0x3327d2;if(!_0x130e28[_0x7bad46(0xf1)]&&_0x130e28[_0x7bad46(0x213)]!=_0x56bd99[_0x7bad46(0x1da)])_0xd311e9[_0x7bad46(0x1fc)](_0x130e28['symbol']);}),_0xd311e9[_0x3327d2(0xe4)](_0x4cf227=>{const _0x2e2a37=_0x3327d2,_0x35a4a1=currentCoins[_0x2e2a37(0x1e1)](_0x4caa82=>_0x4caa82['symbol']==_0x4cf227);!_0x35a4a1&&(_0x1b88fa=!![]);}),currentCoins[_0x3327d2(0xe4)](_0x4bc2ca=>{const _0xb62eaf=_0x3327d2;if(_0x4bc2ca[_0xb62eaf(0x213)]!=config[_0xb62eaf(0x1da)]){const _0x137fd8=_0xd311e9[_0xb62eaf(0x1e1)](_0x213ebd=>_0x213ebd==_0x4bc2ca[_0xb62eaf(0x201)]);!_0x137fd8&&(_0x1b88fa=!![]);}}),_0x56bd99['portfolio']['forEach'](_0x35df99=>{const _0x409900=_0x3327d2,_0x244b01=config[_0x409900(0x28e)][_0x409900(0x1e1)](_0x1ea236=>_0x1ea236['coin']==_0x35df99[_0x409900(0x213)]);if(_0x244b01&&_0x35df99['offset']!=_0x244b01['offset'])_0xa1d9e9=!![];});let _0x15345e=dbConfig[_0x3327d2(0x192)]('bot')[_0x3327d2(0x1e1)]({'botID':botID})['value']();_0x56bd99={..._0x56bd99,'apiKey':decryptRSA(secure[_0x3327d2(0xf9)],_0x56bd99[_0x3327d2(0x10d)]),'apiSecret':decryptRSA(secure[_0x3327d2(0xf9)],_0x56bd99[_0x3327d2(0x1bc)])};_0x56bd99[_0x3327d2(0x182)]&&(_0x56bd99['apiPassword']=decryptRSA(secure[_0x3327d2(0xf9)],_0x56bd99[_0x3327d2(0x182)]));let _0x2fb1fe=![];if(_0x15345e){_0x56bd99[_0x3327d2(0x10d)]=='************'?_0x56bd99[_0x3327d2(0x10d)]=config[_0x3327d2(0x10d)]:_0x2fb1fe=!![];_0x56bd99[_0x3327d2(0x1bc)]==_0x3327d2(0x1c2)?_0x56bd99[_0x3327d2(0x1bc)]=config[_0x3327d2(0x1bc)]:_0x2fb1fe=!![];if(_0x56bd99[_0x3327d2(0x182)]==_0x3327d2(0x1c2))_0x56bd99[_0x3327d2(0x182)]=config[_0x3327d2(0x182)];else{if(_0x56bd99[_0x3327d2(0x182)])_0x2fb1fe=!![];}dbConfig[_0x3327d2(0x192)]('bot')[_0x3327d2(0x1e1)]({'botID':botID})[_0x3327d2(0x23c)](_0x56bd99)['write']();}else dbConfig['get'](_0x3327d2(0x196))[_0x3327d2(0x1fc)](_0x56bd99)[_0x3327d2(0x1ac)](),_0x2fb1fe=!![],process[_0x3327d2(0x13a)]({'status':_0x3327d2(0x146),'live':_0x3327d2(0x1c7)},_0x469c64=>{});process[_0x3327d2(0x13a)]({'botname':_0x56bd99['botname']},_0x5eb6a8=>{}),config={..._0x56bd99},updateBotManager(),proxyEmit(_0x3327d2(0x1c0)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x2fb1fe)await reset(!![]);else _0x1b88fa||_0xa1d9e9?await reset(![]):getBalances();setBlockTransactionDetection(![]);}async function storeHeadless(_0x28c2c8){const _0x438c81=_0xc2993d,_0xde5418={...config,'headless':_0x28c2c8[_0x438c81(0x12c)]};let _0x3f18ac=dbConfig[_0x438c81(0x192)](_0x438c81(0x196))['find']({'botID':botID})[_0x438c81(0x208)]();_0x3f18ac&&dbConfig[_0x438c81(0x192)]('bot')[_0x438c81(0x1e1)]({'botID':botID})[_0x438c81(0x23c)](_0xde5418)['write'](),config={..._0xde5418},updateBotManager(),proxyEmit('configuration',emittedConfiguration());}async function storeFiat(_0x14282e){const _0x591260=_0xc2993d,_0x1a19f9={...config,'fiat':_0x14282e};let _0x3f6c32=dbConfig[_0x591260(0x192)](_0x591260(0x196))[_0x591260(0x1e1)]({'botID':botID})['value']();_0x3f6c32&&dbConfig[_0x591260(0x192)](_0x591260(0x196))[_0x591260(0x1e1)]({'botID':botID})[_0x591260(0x23c)](_0x1a19f9)[_0x591260(0x1ac)](),config={..._0x1a19f9},proxyEmit(_0x591260(0x121),emittedConfiguration());}function resetHistory(){const _0x553f1a=_0xc2993d;logger[_0x553f1a(0x194)](_0x553f1a(0x199));try{if(fs[_0x553f1a(0x2a7)](path[_0x553f1a(0x1ad)](configpath,_0x553f1a(0x2a6)+botID+_0x553f1a(0x237))))fs['unlinkSync'](path[_0x553f1a(0x1ad)](configpath,_0x553f1a(0x2a6)+botID+_0x553f1a(0x237)));if(fs[_0x553f1a(0x2a7)](path[_0x553f1a(0x1ad)](configpath,_0x553f1a(0x2a6)+botID+'-performance.json')))fs['unlinkSync'](path[_0x553f1a(0x1ad)](configpath,'bot-'+botID+_0x553f1a(0x112)));if(fs[_0x553f1a(0x2a7)](path['join'](configpath,_0x553f1a(0x2a6)+botID+_0x553f1a(0x248))))fs[_0x553f1a(0x26e)](path[_0x553f1a(0x1ad)](configpath,_0x553f1a(0x2a6)+botID+_0x553f1a(0x248)));}catch(_0x40f064){if(_0x40f064)logger[_0x553f1a(0x194)](_0x553f1a(0x18b),_0x40f064);}const _0x599306=getDate();let _0x5de808=[];currentCoins[_0x553f1a(0xe4)](_0x427f45=>{const _0x55272c=_0x553f1a;_0x5de808[_0x55272c(0x1fc)]({'coin':_0x427f45['coin'],'number':_0x427f45[_0x55272c(0x14b)],'price':_0x427f45[_0x55272c(0xf0)]});});let _0x34a380=dbConfig[_0x553f1a(0x192)](_0x553f1a(0x196))[_0x553f1a(0x1e1)]({'botID':botID})[_0x553f1a(0x208)]();_0x34a380&&(dbConfig[_0x553f1a(0x192)]('bot')[_0x553f1a(0x1e1)]({'botID':botID})[_0x553f1a(0x23c)]({'liquidity':[{'date':_0x599306,'changes':_0x5de808}]})['write'](),config[_0x553f1a(0x223)]=[]),restartBot(!![]);}function noslash(_0x14ce20){return _0x14ce20['replace']('/','');}function updateHighestFee(_0x3d0230){const _0x420367=_0xc2993d;if(_0x3d0230[_0x420367(0x105)]){let _0x4fdd31={'filled':_0x3d0230[_0x420367(0x20c)]*_0x3d0230[_0x420367(0x23d)],'amount':_0x3d0230[_0x420367(0x20c)]*_0x3d0230[_0x420367(0x23d)],'side':_0x3d0230[_0x420367(0x115)]=='sell'?_0x420367(0x176):_0x420367(0x13e),'price':0x1/_0x3d0230['price']};_0x3d0230={..._0x3d0230,..._0x4fdd31};}const _0x5609e0=defaultFee*_0x3d0230['filled']*_0x3d0230['price'];lastFees['recent20']['length']===0x14&&lastFees[_0x420367(0x2a4)][_0x420367(0x21f)](),lastFees[_0x420367(0x2a4)]['push'](_0x5609e0),lastFees[_0x420367(0x157)]=Math[_0x420367(0x266)](...lastFees[_0x420367(0x2a4)]);}async function updateNumberCoinsCcxt(_0x432a3c){const _0x3138e0=_0xc2993d;logger[_0x3138e0(0xf8)](_0x3138e0(0x1c8)+_0x432a3c[_0x3138e0(0x201)]+_0x3138e0(0x1cb)+_0x432a3c[_0x3138e0(0x1e7)]+_0x3138e0(0x1cb)+_0x432a3c[_0x3138e0(0x20c)]+'\x20/\x20'+_0x432a3c['amount']+'\x20|\x20'+_0x432a3c['id']);let _0x2bac21=_0x432a3c[_0x3138e0(0x1e7)],_0x21881b=![];currentCoins['forEach'](_0x5250c2=>{const _0x17bc22=_0x3138e0;_0x5250c2[_0x17bc22(0x201)]==_0x432a3c[_0x17bc22(0x201)]&&(_0x21881b=!![]);});if(!_0x21881b)return;const _0x56ac96=currentCoins[_0x3138e0(0x1e1)](_0x270cf9=>_0x270cf9[_0x3138e0(0x201)]==_0x432a3c[_0x3138e0(0x201)]),_0x4dae62=_0x56ac96['coin'],_0x309931=_0x222ad7=>{const _0x351457=_0x3138e0,_0x7fd882=currentCoins[_0x351457(0x1e1)](_0x4edb9d=>_0x4edb9d[_0x351457(0x201)]==_0x432a3c[_0x351457(0x201)]);if(_0x7fd882)_0x7fd882[_0x351457(0x2a0)]=_0x222ad7;};let _0x4b2c5d=![];for(const _0x43a1a5 of lastOrders){const _0x17d0bb=0x64,_0x48b240=0x1388;let _0x23f19e=0x0;while(!_0x43a1a5[_0x3138e0(0x15d)]&&_0x23f19e*_0x17d0bb<_0x48b240){_0x23f19e++,await sleep(_0x17d0bb);}if(_0x23f19e>0x0)logger['debug'](_0x3138e0(0x139)+_0x23f19e*_0x17d0bb/0x3e8+_0x3138e0(0x1dd));_0x43a1a5['orderId']==_0x432a3c['id']&&(_0x4b2c5d=!![]);}if(_0x2bac21=='open'){_0x309931(_0x3138e0(0x28c));if(_0x432a3c[_0x3138e0(0x20c)]>0x0&&_0x432a3c[_0x3138e0(0x20c)]<_0x432a3c[_0x3138e0(0x278)]){if(_0x4b2c5d){setBlockTransactionDetection(!![]),logger[_0x3138e0(0xf8)](_0x3138e0(0x23b)+_0x432a3c['filled']+')\x20known\x20order:\x20'+_0x432a3c['id']);const _0x24be4f=await getCoins(balanceUpdateDelay,undefined,undefined,_0x4dae62);[currentCoins,currentCoinsAll]=_0x24be4f,setBlockTransactionDetection(![]);}else logger[_0x3138e0(0xf8)](_0x3138e0(0x23b)+_0x432a3c[_0x3138e0(0x20c)]+_0x3138e0(0x19b)+_0x432a3c['id']),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay);}}else{if(_0x2bac21==_0x3138e0(0x11f)){_0x309931(_0x3138e0(0x11f)),lastOrders=lastOrders['filter'](_0x3deb4c=>_0x3deb4c[_0x3138e0(0x201)]!=_0x432a3c[_0x3138e0(0x201)]);const _0x11475e=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x11475e,setBlockTransactionDetection(![]),await getOpenOrders(),handleOpenOrders();}else{if(_0x2bac21==_0x3138e0(0x230)){if(lastOrders)for(const _0x5b09ca of lastOrders){if(_0x5b09ca['orderId']==_0x432a3c['id']){logger[_0x3138e0(0xf8)](_0x3138e0(0x293)+_0x432a3c['id']),_0x4b2c5d=!![];if(_0x5b09ca['filled']==0x0){setBlockTransactionDetection(!![]),logger[_0x3138e0(0xf8)]('2\x20-\x20handling\x20FILLED\x20order:\x20'+_0x432a3c['id']);if(_0x432a3c[_0x3138e0(0x154)])_0x5b09ca[_0x3138e0(0x23d)]=_0x432a3c[_0x3138e0(0x154)];else{if(_0x432a3c[_0x3138e0(0x23d)])_0x5b09ca[_0x3138e0(0x23d)]=_0x432a3c[_0x3138e0(0x23d)];else{}}_0x5b09ca[_0x3138e0(0x20c)]=_0x432a3c[_0x3138e0(0x20c)],updateHighestFee(_0x5b09ca);const _0x3229fc=await getCoins(balanceUpdateDelay,undefined,undefined,_0x4dae62);[currentCoins,currentCoinsAll]=_0x3229fc,setBlockTransactionDetection(![]),await validateOrders(),_0x309931(_0x3138e0(0x20c)),_0x5b09ca['fee']={'currency':_0x432a3c[_0x3138e0(0x249)]?_0x432a3c[_0x3138e0(0x249)][_0x3138e0(0x187)]:null,'cost':_0x432a3c[_0x3138e0(0x249)]?_0x432a3c[_0x3138e0(0x249)]['cost']:0x0},await updatePnL(_0x5b09ca);}}}!_0x4b2c5d&&(logger[_0x3138e0(0xf8)](_0x3138e0(0x137)+_0x432a3c['id']),_0x309931('filled'),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay),await updateOpenOrders(),handleOpenOrders());}}}if(lastBalances){let _0xd040c1=JSON['parse'](lastBalances[_0x3138e0(0x28e)]);const _0x3e21be=_0xd040c1[_0x3138e0(0x1e1)](_0x4377b9=>_0x4377b9['symbol']==_0x432a3c[_0x3138e0(0x201)]);if(_0x3e21be){if(_0x2bac21=='open')_0x3e21be[_0x3138e0(0x2a0)]=_0x3e21be['orderstatus']=='filled'?'filled':_0x3138e0(0x28c);else{if(_0x2bac21==_0x3138e0(0x11f))_0x3e21be[_0x3138e0(0x2a0)]=_0x3e21be[_0x3138e0(0x2a0)]==_0x3138e0(0x20c)?'filled':_0x3138e0(0x11f);else _0x2bac21==_0x3138e0(0x230)&&(_0x3e21be[_0x3138e0(0x2a0)]=_0x3138e0(0x20c));}}lastBalances={...lastBalances,'portfolio':JSON[_0x3138e0(0x209)](_0xd040c1)},proxyEmit(_0x3138e0(0x212),{'serverversion':serverversion,'balances':lastBalances});}}function _0x5db8(_0xff8764,_0x471b11){const _0x2c058a=_0x50ec();return _0x5db8=function(_0x3e6718,_0x1fdba8){_0x3e6718=_0x3e6718-0xe4;let _0x50ec19=_0x2c058a[_0x3e6718];return _0x50ec19;},_0x5db8(_0xff8764,_0x471b11);}async function updateOpenOrders(){const _0x4db022=_0xc2993d;await getOpenOrders();let _0x260d40=![];currentCoins[_0x4db022(0xe4)](_0x3b5902=>{const _0x2e1108=_0x4db022;_0x260d40=allOpenOrders[_0x2e1108(0x1e1)](_0x265553=>_0x265553[_0x2e1108(0x201)]==_0x3b5902[_0x2e1108(0x201)]),_0x3b5902[_0x2e1108(0x2a0)]=_0x260d40?_0x2e1108(0x28c):'none';});}async function fetchBalance(_0x3598f2=!![]){const _0x5dfc7c=_0xc2993d;let _0x43efa7,_0x39954b;try{return _0x43efa7=await exchange[_0x5dfc7c(0x1ee)](),_0x39954b=_0x43efa7[_0x5dfc7c(0x255)],_0x39954b;}catch(_0x23aea2){return!_0x3598f2?handleErrorNoStop(_0x23aea2,_0x5dfc7c(0x11b)):await handleError(_0x23aea2,_0x5dfc7c(0x11b)),![];}}async function getCoins(_0xb0cc06=0x0,_0x2cece0=!![],_0x55aa26=config['basecoin'],_0x331f1f){const _0x2aec62=_0xc2993d;let _0x5e6338=[],_0xb98b8=[],_0x50581c=[],_0x49411f;if(_0xb0cc06)await sleep(_0xb0cc06);if(botPaused)return[currentCoins,currentCoinsAll];let _0x496b95=![],_0x3f9881=0x0,_0x208921,_0x51799d;_0x331f1f&&(_0x208921=currentCoins['find'](_0x649a19=>_0x649a19[_0x2aec62(0x213)]==_0x331f1f),_0x208921&&(_0x51799d=_0x208921['prevnumber'],delete _0x208921[_0x2aec62(0x10a)]));while(!_0x496b95){_0x49411f=await fetchBalance(_0x2cece0);if(_0x49411f){if(_0x331f1f){if(_0x49411f[_0x331f1f]!=_0x51799d)logger[_0x2aec62(0xf8)]('Valid\x20balance\x20for\x20'+_0x331f1f+':\x20'+_0x49411f[_0x331f1f]+'\x20('+_0x51799d+')'),_0x496b95=!![];else{logger[_0x2aec62(0xf8)](_0x2aec62(0x147)+_0x331f1f+':\x20'+_0x49411f[_0x331f1f]+'\x20('+_0x51799d+')'),_0x3f9881++;if(_0x3f9881<balanceUpdateRetries)await sleep(balanceUpdateDelay);else{logger[_0x2aec62(0xf8)](_0x2aec62(0x173)+_0x3f9881+_0x2aec62(0x1de));break;}}}else break;}else return[currentCoins,currentCoinsAll];}for(const [_0x21500b,_0x52e667]of Object['entries'](_0x49411f)){_0x50581c[_0x2aec62(0x1fc)](_0x21500b);}config['portfolio'][_0x2aec62(0xe4)](_0x5cf823=>{const _0x4465a0=_0x2aec62;!_0x50581c[_0x4465a0(0x1e3)](_0x5cf823['coin'])&&(_0x49411f[_0x5cf823[_0x4465a0(0x213)]]=0x0);});if(_0x55aa26=='')for(const [_0x1f3305,_0x5b5e8c]of Object['entries'](_0x49411f)){_0x5b5e8c!=0x0&&_0x5e6338[_0x2aec62(0x1fc)]({'coin':_0x1f3305});}else for(const [_0x3c96cf,_0x3af304]of Object[_0x2aec62(0x200)](_0x49411f)){const _0x593d15=config[_0x2aec62(0x28e)][_0x2aec62(0x1e1)](_0x484c13=>_0x484c13[_0x2aec62(0x213)]==_0x3c96cf),_0x1aaa2c=_0x3c96cf+'/'+_0x55aa26,_0x515318=_0x55aa26+'/'+_0x3c96cf,_0x40be53=currentCoins[_0x2aec62(0x1e1)](_0x231f27=>_0x231f27[_0x2aec62(0x213)]==_0x3c96cf);if((_0x3af304!=0x0||_0x593d15)&&(allSymbols['includes'](_0x1aaa2c)||_0x3c96cf==_0x55aa26))_0x40be53?_0x5e6338[_0x2aec62(0x1fc)]({..._0x40be53,'number':Math['max'](_0x3af304+(_0x593d15&&_0x593d15['offset']||0x0),0x0)}):_0x5e6338[_0x2aec62(0x1fc)]({'coin':_0x3c96cf,'symbol':_0x1aaa2c,'reverse':![],'number':Math[_0x2aec62(0x266)](_0x3af304+(_0x593d15&&_0x593d15[_0x2aec62(0x26b)]||0x0),0x0),'orderstatus':_0x2aec62(0x1b4)});else{if((_0x3af304!=0x0||_0x593d15)&&allSymbols[_0x2aec62(0x1e3)](_0x515318))_0x40be53?_0x5e6338[_0x2aec62(0x1fc)]({..._0x40be53,'number':Math[_0x2aec62(0x266)](_0x3af304+(_0x593d15&&_0x593d15[_0x2aec62(0x26b)]||0x0),0x0)}):_0x5e6338[_0x2aec62(0x1fc)]({'coin':_0x3c96cf,'symbol':_0x515318,'reverse':!![],'number':Math[_0x2aec62(0x266)](_0x3af304+(_0x593d15&&_0x593d15[_0x2aec62(0x26b)]||0x0),0x0),'orderstatus':'none'});else _0x593d15&&_0x5e6338[_0x2aec62(0x1fc)]({'coin':_0x593d15[_0x2aec62(0x213)],'symbol':_0x593d15[_0x2aec62(0x201)],'reverse':_0x593d15[_0x2aec62(0x105)],'number':0x0,'orderstatus':_0x2aec62(0x1b4)});}}return _0x5e6338[_0x2aec62(0x1bd)]((_0xf420a7,_0x93e984)=>_0xf420a7[_0x2aec62(0x11a)]<_0x93e984[_0x2aec62(0x11a)]?0x1:_0x93e984[_0x2aec62(0x11a)]<_0xf420a7[_0x2aec62(0x11a)]?-0x1:0x0),_0xb98b8=cloneDeep(_0x5e6338),_0x5e6338=_0x5e6338[_0x2aec62(0x1cd)](_0x5900bc=>{const _0x313b71=_0x2aec62,_0x51ca76=config[_0x313b71(0x28e)][_0x313b71(0x1e1)](_0x9f1f2e=>_0x9f1f2e['coin']==_0x5900bc[_0x313b71(0x213)]);return _0x51ca76&&!_0x51ca76[_0x313b71(0xf1)];}),[_0x5e6338,_0xb98b8];}async function getOpenOrders(){const _0x50232d=_0xc2993d;let _0x342d44;allOpenOrders=[];try{for(const _0x3f8454 of config[_0x50232d(0x28e)]){!_0x3f8454[_0x50232d(0xf1)]&&_0x3f8454[_0x50232d(0x213)]!=config[_0x50232d(0x1da)]&&(_0x342d44=await exchange['fetchOpenOrders'](_0x3f8454[_0x50232d(0x201)]),_0x342d44[_0x50232d(0x24e)]>0x0&&allOpenOrders[_0x50232d(0x1fc)](_0x342d44[0x0]));}}catch(_0x7da0f0){await handleError(_0x7da0f0,_0x50232d(0x1f2));}}async function handleOpenOrders(_0x55c8b5=0x0){const _0x237816=_0xc2993d;allOpenOrders[_0x237816(0x24e)]==0x0&&lockOrders==ORDERS[_0x237816(0x24f)]&&allOrdersPlaced&&(_0x55c8b5==0x0?(logger[_0x237816(0xf8)](_0x237816(0xfe)),_0x55c8b5++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x237816(0xf8)]('2\x20-\x20Handled\x20open\x20orders'),validateOrders(_0x237816(0x238))));}async function testAPI(){const _0xc709ba=_0xc2993d;try{return await exchange[_0xc709ba(0x1ee)](),!![];}catch(_0x2b0c80){return loading['cancel']=!![],emitLoadingProgress(),handleErrorNoStop(_0x2b0c80,_0xc709ba(0xf6)),logger[_0xc709ba(0xf8)]('Error\x20details:',_0x2b0c80),botPaused=!![],![];}}async function testNewAPI(_0x2c3f37){const _0x173b2d=_0xc2993d;logger[_0x173b2d(0xf8)](_0x173b2d(0x114));const _0x13b7b4=ccxt[_0x173b2d(0x1ec)][_0x2c3f37['exchange'][_0x173b2d(0x226)]()],_0x16401f=new _0x13b7b4({'apiKey':_0x2c3f37[_0x173b2d(0x10d)],'secret':_0x2c3f37[_0x173b2d(0x1bc)],'options':{'defaultType':'spot'}});if(_0x2c3f37[_0x173b2d(0x182)])_0x16401f['password']=_0x2c3f37[_0x173b2d(0x182)];try{await _0x16401f['fetchBalance'](),botPaused=![];}catch(_0x200336){logger['debug'](_0x173b2d(0x101)+_0x200336[_0x173b2d(0x291)]());throw _0x200336;}}function cloneDeep(_0xb6409c){const _0x35dcf2=_0xc2993d;return JSON[_0x35dcf2(0x1b9)](JSON[_0x35dcf2(0x209)](_0xb6409c));}async function getPortfolio(_0x3f5bb3){const _0x217f42=_0xc2993d;let _0x28c0e6=[],_0x5a574a=[],_0x5e3590=[],_0x11f2c6;_0x3f5bb3[_0x217f42(0x10d)]=decryptRSA(secure[_0x217f42(0xf9)],_0x3f5bb3[_0x217f42(0x10d)]),_0x3f5bb3['apiSecret']=decryptRSA(secure[_0x217f42(0xf9)],_0x3f5bb3['apiSecret']);if(_0x3f5bb3[_0x217f42(0x182)])_0x3f5bb3[_0x217f42(0x182)]=decryptRSA(secure[_0x217f42(0xf9)],_0x3f5bb3['apiPassword']);if(_0x3f5bb3['apiKey']!==_0x217f42(0x1c2)||_0x3f5bb3[_0x217f42(0x1bc)]!==_0x217f42(0x1c2)||_0x3f5bb3[_0x217f42(0x182)]&&_0x3f5bb3[_0x217f42(0x182)]!==_0x217f42(0x1c2)){if(config[_0x217f42(0x22b)]){if(_0x3f5bb3[_0x217f42(0x10d)]==_0x217f42(0x1c2))_0x3f5bb3[_0x217f42(0x10d)]=config[_0x217f42(0x10d)];if(_0x3f5bb3[_0x217f42(0x1bc)]==_0x217f42(0x1c2))_0x3f5bb3[_0x217f42(0x1bc)]=config['apiSecret'];if(_0x3f5bb3[_0x217f42(0x182)]=='************')_0x3f5bb3[_0x217f42(0x182)]=config[_0x217f42(0x182)];}try{if(_0x3f5bb3[_0x217f42(0x136)])await testNewAPI(_0x3f5bb3);}catch(_0x5f39ae){if(_0x5f39ae[_0x217f42(0x291)]()['includes']('AuthenticationError')){logHistory('error',_0x217f42(0x125)),logHistory('error','Error\x20details:\x20'+_0x5f39ae['toString']()),proxyEmit(_0x217f42(0x1ed),![]);return;}else{if(_0x5f39ae[_0x217f42(0x291)]()[_0x217f42(0x1e3)]('PermissionDenied')){logHistory(_0x217f42(0x1f1),_0x217f42(0x240)),logHistory(_0x217f42(0x1f1),'Error\x20details:\x20'+_0x5f39ae['toString']()),proxyEmit(_0x217f42(0x1ed),![]);return;}else{logHistory('error',_0x217f42(0x2aa)+_0x5f39ae[_0x217f42(0x291)]()),logger[_0x217f42(0xf8)](_0x217f42(0x286),_0x5f39ae),proxyEmit(_0x217f42(0x1ed),![]);return;}}}exchange?updateExchange(_0x3f5bb3['apiKey'],_0x3f5bb3[_0x217f42(0x1bc)],_0x3f5bb3['apiPassword']):await initExchange(_0x3f5bb3[_0x217f42(0x22b)],_0x3f5bb3[_0x217f42(0x10d)],_0x3f5bb3[_0x217f42(0x1bc)],_0x3f5bb3[_0x217f42(0x182)]);await loadSymbols();const _0x16c0aa=await getCoins(0x0,![],_0x3f5bb3['basecoin']);_0x5e3590=cloneDeep(_0x16c0aa[0x1]);}else{const _0x350174=await getCoins();_0x5e3590=cloneDeep(_0x350174[0x1]);}if(_0x3f5bb3['basecoin']=='')proxyEmit(_0x217f42(0x1ed),!![]),proxyEmit(_0x217f42(0x122),_0x5e3590);else{_0x5e3590[_0x217f42(0xe4)](_0x212877=>{const _0x31eb50=_0x217f42;if(_0x212877[_0x31eb50(0x213)]!=_0x3f5bb3[_0x31eb50(0x1da)]&&allSymbols[_0x31eb50(0x1e3)](_0x212877[_0x31eb50(0x201)]))_0x28c0e6[_0x31eb50(0x1fc)](_0x212877[_0x31eb50(0x201)]);});if(_0x28c0e6[_0x217f42(0x24e)]==0x0)logHistory(_0x217f42(0x1f1),_0x217f42(0x135));else{try{_0x5a574a=await getTickers(_0x28c0e6);}catch(_0xa14136){logHistory(_0x217f42(0x1f1),_0x217f42(0x1b7)),logger[_0x217f42(0xf8)](_0x217f42(0x286),_0xa14136),proxyEmit('portfolio1',![]);return;}_0x5e3590['forEach'](_0x579e93=>{const _0x4bb26b=_0x217f42;_0x579e93[_0x4bb26b(0x213)]!=_0x3f5bb3[_0x4bb26b(0x1da)]?_0x5a574a[_0x579e93['symbol']]?_0x11f2c6=_0x579e93[_0x4bb26b(0x105)]?0x1/_0x5a574a[_0x579e93[_0x4bb26b(0x201)]][_0x4bb26b(0xf0)]:_0x5a574a[_0x579e93['symbol']][_0x4bb26b(0xf0)]:_0x11f2c6=0x0:_0x11f2c6=0x1,_0x579e93['price']=formatResult(_0x11f2c6,0x8);}),await getMarketCap(_0x5e3590),proxyEmit('portfolio1',!![]),proxyEmit(_0x217f42(0x122),_0x5e3590);}}}function truncateTradeAmount(_0x53d641,_0x30ea40){const _0x5ba7f3=_0xc2993d;let _0x3f7fe4=0x0;try{_0x3f7fe4=exchange[_0x5ba7f3(0x17a)](_0x53d641,_0x30ea40);}catch(_0x21df67){}return _0x3f7fe4;}function checkMinimums(_0x2a0cf6){const _0x34a222=_0xc2993d;let _0x3d727d=!![];const _0xe62b28=!_0x2a0cf6[_0x34a222(0x105)]?markets[_0x2a0cf6[_0x34a222(0x201)]]['limits'][_0x34a222(0x278)][_0x34a222(0x10c)]:markets[_0x2a0cf6[_0x34a222(0x201)]][_0x34a222(0x2a1)]['cost'][_0x34a222(0x10c)],_0x414cc0=!_0x2a0cf6[_0x34a222(0x105)]?markets[_0x2a0cf6['symbol']][_0x34a222(0x2a1)][_0x34a222(0x16d)][_0x34a222(0x10c)]:markets[_0x2a0cf6[_0x34a222(0x201)]][_0x34a222(0x2a1)][_0x34a222(0x278)][_0x34a222(0x10c)],_0x444c78=truncateTradeAmount(_0x2a0cf6[_0x34a222(0x201)],_0x2a0cf6[_0x34a222(0x14e)]);_0x2a0cf6['trade']=_0x444c78;if(Math['abs'](_0x444c78)<_0xe62b28)_0x3d727d=![];if(Math['abs'](_0x444c78)*_0x2a0cf6[_0x34a222(0xf0)]<_0x414cc0)_0x3d727d=![];if(_0x2a0cf6[_0x34a222(0x115)]=='sell'){let _0x329c24=config['portfolio'][_0x34a222(0x1e1)](_0x3d864a=>_0x3d864a['coin']==_0x2a0cf6['coin']);if(_0x329c24['offset']>0x0){if(Math[_0x34a222(0xe9)](_0x444c78)>_0x2a0cf6[_0x34a222(0x14b)]-_0x329c24[_0x34a222(0x26b)])_0x3d727d=![];}else{if(Math['abs'](_0x444c78)>_0x2a0cf6[_0x34a222(0x14b)])_0x3d727d=![];}}if(_0x2a0cf6['side']==_0x34a222(0x176)){let _0x13a5c6=config[_0x34a222(0x28e)][_0x34a222(0x1e1)](_0x47b984=>_0x47b984[_0x34a222(0x213)]==config[_0x34a222(0x1da)]),_0x6d4361=currentCoins[_0x34a222(0x1e1)](_0x489d7e=>_0x489d7e[_0x34a222(0x213)]==config['basecoin']);if(_0x13a5c6[_0x34a222(0x26b)]>0x0){if(Math[_0x34a222(0xe9)](_0x444c78)*_0x2a0cf6[_0x34a222(0xf0)]>_0x6d4361[_0x34a222(0x14b)]-_0x13a5c6[_0x34a222(0x26b)])_0x3d727d=![];}else{if(Math[_0x34a222(0xe9)](_0x444c78)*_0x2a0cf6[_0x34a222(0xf0)]>_0x6d4361[_0x34a222(0x14b)])_0x3d727d=![];}}return _0x3d727d;}async function getBalances(_0x143d70=!![]){const _0x32d12c=_0xc2993d;if(botPaused)return;let _0x3d4a18=0x0,_0xf9d4fc;const _0x4d46a3=config[_0x32d12c(0x179)];if(config[_0x32d12c(0x12c)]&&config[_0x32d12c(0x1db)]<0x0)await validate24hChanges();currentCoins[_0x32d12c(0xe4)](_0x55a7f9=>{const _0x2fdf5e=_0x32d12c;if(_0x55a7f9['coin']!=config[_0x2fdf5e(0x1da)]){let _0x227174=gTicker[noslash(_0x55a7f9[_0x2fdf5e(0x201)])];_0xf9d4fc=_0x55a7f9[_0x2fdf5e(0x105)]?0x1/_0x227174:_0x227174;}else _0xf9d4fc=0x1;let _0x314bb1=_0x55a7f9[_0x2fdf5e(0x14b)]*_0xf9d4fc;_0x3d4a18+=_0x314bb1,_0x55a7f9[_0x2fdf5e(0xf0)]=formatResult(Number(_0xf9d4fc),0x8),_0x55a7f9[_0x2fdf5e(0x208)]=_0x314bb1;}),currentCoins[_0x32d12c(0xe4)](_0x4001be=>{const _0x3da418=_0x32d12c;let _0x2f4a6c=config[_0x3da418(0x28e)]['find'](_0xffc3fa=>_0xffc3fa[_0x3da418(0x213)]==_0x4001be['coin']),_0x1742c0=Number(_0x2f4a6c[_0x3da418(0x297)]),_0x4231f6=_0x4001be[_0x3da418(0x208)]/_0x3d4a18*0x64,_0x4e7035=_0x1742c0*_0x3d4a18/0x64/_0x4001be['last']-_0x4001be[_0x3da418(0x14b)];_0x4001be[_0x3da418(0x297)]=formatResult(_0x4231f6,0x3),_0x4001be['target']=formatResult(_0x1742c0,0x3),_0x4001be[_0x3da418(0x14e)]=formatResult(_0x4e7035,0x8),_0x4001be['side']='',_0x4001be[_0x3da418(0x1b6)]=![];if(_0x4001be[_0x3da418(0x213)]!=config[_0x3da418(0x1da)]){if(_0x4001be[_0x3da418(0x297)]>_0x1742c0)_0x4001be[_0x3da418(0x115)]=_0x3da418(0x13e),_0x4001be[_0x3da418(0x1b6)]=checkMinimums(_0x4001be);else _0x4001be[_0x3da418(0x297)]<_0x1742c0&&(_0x4001be[_0x3da418(0x115)]='buy',_0x4001be[_0x3da418(0x1b6)]=checkMinimums(_0x4001be));}_0x4001be['delta']=_0x4001be[_0x3da418(0x297)]/_0x4001be[_0x3da418(0x1b2)]-0x1;if(_0x4001be[_0x3da418(0x2a0)]==_0x3da418(0x20c)||_0x4001be['orderstatus']=='canceled')_0x4001be[_0x3da418(0x2a0)]='none';}),currentCoins['sort']((_0x2a4498,_0x110196)=>_0x2a4498['delta']<_0x110196['delta']?0x1:_0x110196[_0x32d12c(0x11a)]<_0x2a4498[_0x32d12c(0x11a)]?-0x1:0x0);const _0x531b71=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x531b71['eur'],'usd':_0x531b71['usd'],'portfolio':JSON[_0x32d12c(0x209)](currentCoins),'threshold':_0x4d46a3},proxyEmit(_0x32d12c(0x212),{'serverversion':serverversion,'balances':lastBalances});if(_0x143d70){if(config[_0x32d12c(0x12c)])headlessMode({'portfolio':currentCoins,'threshold':_0x4d46a3});else lockOrders==ORDERS[_0x32d12c(0x23a)]&&!coolingDown&&notifyBalance({'portfolio':currentCoins,'threshold':_0x4d46a3});}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x314429=getNormalizedPerformance();getStartingBalances(_0x314429),emitPerformance(_0x314429);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}function getPnL(){const _0xb26e8b=_0xc2993d;let _0xfe356c=dbCoinResults[_0xb26e8b(0x192)]('coins')[_0xb26e8b(0x208)](),_0x3fb3a2=0x0;return Object[_0xb26e8b(0x200)](_0xfe356c)['forEach'](([_0x28a6e1,_0x226d02])=>{const _0x23f33a=_0xb26e8b;_0x3fb3a2+=_0x226d02[_0x23f33a(0x1f4)];}),_0x3fb3a2;}async function storePerformance(){const _0x4e71c2=_0xc2993d;if(!lastBalances)return;let _0x4af7e4=[],_0x254267;const _0x4a9f99=getPnL();let _0x51e4c2=JSON[_0x4e71c2(0x1b9)](lastBalances['portfolio']);_0x51e4c2[_0x4e71c2(0x1bd)]((_0x288c73,_0x2500c2)=>_0x288c73[_0x4e71c2(0x213)]>_0x2500c2[_0x4e71c2(0x213)]?0x1:_0x2500c2[_0x4e71c2(0x213)]>_0x288c73[_0x4e71c2(0x213)]?-0x1:0x0),_0x51e4c2[_0x4e71c2(0xe4)](_0x361aed=>{const _0xf9444b=_0x4e71c2;let _0x48d6cb={'coin':_0x361aed['coin'],'number':_0x361aed[_0xf9444b(0x14b)],'price':_0x361aed[_0xf9444b(0xf0)]};_0x4af7e4[_0xf9444b(0x1fc)](_0x48d6cb);});const _0x47c463=await getFiat(),_0x1956db=getTimeStamp()[_0x4e71c2(0x170)]('\x20')[0x0],_0x56931a=dbPerformance['get']('data')[_0x4e71c2(0x1e1)]({'date':_0x1956db})[_0x4e71c2(0x208)]();_0x254267={'date':_0x1956db,'eur':_0x47c463[_0x4e71c2(0x1f7)],'usd':_0x47c463[_0x4e71c2(0xf4)],'coins':_0x4af7e4,'pnl':_0x4a9f99},_0x56931a?_0x254267[_0x4e71c2(0x16f)]!=config[_0x4e71c2(0x127)]&&dbPerformance['get'](_0x4e71c2(0x232))[_0x4e71c2(0x1e1)]({'date':_0x1956db})['assign'](_0x254267)[_0x4e71c2(0x1ac)]():dbPerformance['get']('data')[_0x4e71c2(0x1fc)](_0x254267)[_0x4e71c2(0x1ac)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x4d2971=_0xc2993d;let _0x542f60=[];if(dbPerformance[_0x4d2971(0x229)](_0x4d2971(0x232))[_0x4d2971(0x208)]()){let _0x5543d6=dbPerformance[_0x4d2971(0x192)](_0x4d2971(0x232))[_0x4d2971(0x16b)]()[_0x4d2971(0x1cd)](_0x124587=>{const _0x480a2a=_0x4d2971;if(_0x124587['coins'][_0x480a2a(0x24e)]==0x0)return![];else return!![];})['sortBy'](_0x4d2971(0x16f))[_0x4d2971(0x208)](),_0x5761ae=[...config[_0x4d2971(0x223)]];_0x5761ae['sort']((_0x5b20aa,_0x1cdaa0)=>_0x5b20aa[_0x4d2971(0x16f)]>_0x1cdaa0['date']?-0x1:_0x1cdaa0[_0x4d2971(0x16f)]>_0x5b20aa[_0x4d2971(0x16f)]?0x1:0x0);let _0x3afa80=0x1,_0x2dbf5f=[],_0x28bd59=0x0;_0x5543d6['slice']()['reverse']()[_0x4d2971(0xe4)]((_0x548b5f,_0xf60e9e)=>{const _0x493dfe=_0x4d2971;if(_0x5761ae[_0x28bd59]){if(_0x5543d6[_0x5543d6[_0x493dfe(0x24e)]-_0xf60e9e]&&_0x5761ae[_0x28bd59][_0x493dfe(0x16f)]==_0x5543d6[_0x5543d6[_0x493dfe(0x24e)]-_0xf60e9e][_0x493dfe(0x16f)]){if(_0xf60e9e<_0x5543d6[_0x493dfe(0x24e)]){let _0x26a4a0=0x0,_0x20c512=0x0;_0x5543d6[_0x5543d6[_0x493dfe(0x24e)]-_0xf60e9e][_0x493dfe(0x268)][_0x493dfe(0xe4)](_0x37f66a=>{const _0x41b1d=_0x493dfe;_0x20c512+=_0x37f66a[_0x41b1d(0x14b)]*_0x37f66a[_0x41b1d(0x23d)];}),_0x5761ae[_0x28bd59][_0x493dfe(0x294)][_0x493dfe(0xe4)](_0x1849b0=>{_0x26a4a0+=_0x1849b0['number']*_0x1849b0['price'];}),_0x3afa80*=_0x26a4a0/(_0x20c512-_0x26a4a0)+0x1;}_0x28bd59++;}}let _0x53569d=0x0;_0x548b5f[_0x493dfe(0x268)][_0x493dfe(0xe4)](_0x56a57b=>{const _0x4d0c76=_0x493dfe;_0x53569d+=_0x56a57b[_0x4d0c76(0x14b)]*_0x56a57b[_0x4d0c76(0x23d)];}),_0x2dbf5f[_0x5543d6[_0x493dfe(0x24e)]-_0xf60e9e-0x1]=_0x53569d*(_0x3afa80-0x1);});let _0x54a3ac=[];_0x5761ae=[...config[_0x4d2971(0x223)]]||[];let _0x29c60c=0x0;_0x28bd59=0x0,_0x5543d6['forEach']((_0x58038f,_0x594a73)=>{const _0x4b77ee=_0x4d2971;if(_0x5761ae[_0x28bd59]){const _0x560bf8=fns[_0x4b77ee(0x1b9)](_0x5761ae[_0x28bd59][_0x4b77ee(0x16f)],_0x4b77ee(0x12f),new Date()),_0x542342=fns[_0x4b77ee(0x1b9)](_0x58038f[_0x4b77ee(0x16f)],_0x4b77ee(0x12f),new Date());if(fns[_0x4b77ee(0x2a3)](_0x560bf8,_0x542342)){let _0x251223=0x0;_0x5761ae[_0x28bd59][_0x4b77ee(0x294)][_0x4b77ee(0xe4)](_0x30b17d=>{const _0x11f6e7=_0x4b77ee;!_0x54a3ac[_0x30b17d['coin']]?_0x54a3ac[_0x30b17d['coin']]=_0x30b17d[_0x11f6e7(0x14b)]:(_0x251223=_0x54a3ac[_0x30b17d[_0x11f6e7(0x213)]],_0x54a3ac[_0x30b17d[_0x11f6e7(0x213)]]+=_0x30b17d[_0x11f6e7(0x14b)]);const _0x597fcb=_0x58038f[_0x11f6e7(0x268)][_0x11f6e7(0x1e1)](_0x538016=>_0x538016[_0x11f6e7(0x213)]==_0x30b17d[_0x11f6e7(0x213)]);(!_0x597fcb||_0x597fcb['number']==0x0)&&(_0x29c60c+=(-_0x30b17d['number']-_0x251223)*_0x30b17d['price']);}),_0x28bd59++;}}_0x58038f['coins']['forEach']((_0x8dd2b7,_0x32cd68)=>{const _0x2181c7=_0x4b77ee;_0x54a3ac[_0x8dd2b7[_0x2181c7(0x213)]]&&(_0x8dd2b7[_0x2181c7(0x195)]=_0x54a3ac[_0x8dd2b7['coin']]);}),_0x542f60['push']({'date':_0x58038f[_0x4b77ee(0x16f)],'eur':_0x58038f[_0x4b77ee(0x1f7)],'usd':_0x58038f[_0x4b77ee(0xf4)],'offset':_0x2dbf5f[_0x594a73],'netoffset':_0x29c60c,'coins':_0x58038f[_0x4b77ee(0x268)],'pnl':_0x58038f[_0x4b77ee(0x1a7)]});});}return _0x542f60;}function emitPerformance(_0x42adce){const _0xc3af46=_0xc2993d;_0x42adce[_0xc3af46(0x24e)]!==0x0?(proxyEmit(_0xc3af46(0x1d2),_0x42adce),lastPerformanceEmitted=getDate()):proxyEmit(_0xc3af46(0x1d2),[]);}function getPerf(_0x16026a,_0x24230f){const _0x5e0c6b=_0xc2993d;let _0x21bb23=0x0,_0x13e517=0x0,_0x5405db=0x0;_0x16026a[_0x5e0c6b(0x268)]['forEach'](_0x143aca=>{const _0x2a9f4d=_0x5e0c6b;_0x21bb23+=_0x143aca[_0x2a9f4d(0x14b)]*_0x143aca['price'];});_0x24230f&&(_0x21bb23+=_0x16026a['offset']);if(config[_0x5e0c6b(0x1da)]===_0x5e0c6b(0x1be)||config[_0x5e0c6b(0x1da)]===_0x5e0c6b(0x1d0)||config[_0x5e0c6b(0x1da)]===_0x5e0c6b(0x124))_0x13e517=_0x21bb23*_0x16026a[_0x5e0c6b(0x1f7)],_0x5405db=_0x21bb23*_0x16026a[_0x5e0c6b(0xf4)];else{if(usdBasecoins[_0x5e0c6b(0x1e3)](config[_0x5e0c6b(0x1da)]))_0x13e517=_0x21bb23*_0x16026a['eur']/_0x16026a[_0x5e0c6b(0xf4)],_0x5405db=_0x21bb23;else config[_0x5e0c6b(0x1da)]===_0x5e0c6b(0x169)&&(_0x13e517=_0x21bb23,_0x5405db=_0x21bb23*_0x16026a[_0x5e0c6b(0xf4)]/_0x16026a['eur']);}return[_0x21bb23,_0x13e517,_0x5405db];}function CurrencyFactor(_0x3b0f9a,_0x46a43a,_0x1a12ca){const _0x5dcc4c=_0xc2993d;let _0x377e8f;if(_0x46a43a===_0x5dcc4c(0x1be)||_0x46a43a==='ETH'||_0x46a43a===_0x5dcc4c(0x124))_0x377e8f=_0x1a12ca===_0x5dcc4c(0x169)?_0x3b0f9a['eur']:_0x3b0f9a[_0x5dcc4c(0xf4)];else{if(usdBasecoins['includes'](_0x46a43a))_0x377e8f=_0x1a12ca===_0x5dcc4c(0x169)?_0x3b0f9a['eur']/_0x3b0f9a[_0x5dcc4c(0xf4)]:0x1;else _0x46a43a===_0x5dcc4c(0x169)&&(_0x377e8f=_0x1a12ca===_0x5dcc4c(0x169)?0x1:_0x3b0f9a[_0x5dcc4c(0xf4)]/_0x3b0f9a[_0x5dcc4c(0x1f7)]);}return _0x377e8f;}function getKPIs(_0x48378c,_0xaaa0ca=_0xc2993d(0x169)){const _0x666062=_0xc2993d,_0x67a814=config['basecoin'],_0xcb48e0=lastBalances,_0x4aa524=currentCoins,_0xf442f9=getNormalizedPerformance(),_0x2e60e6=CurrencyFactor(_0xcb48e0,config[_0x666062(0x1da)],_0xaaa0ca);let _0x5d2feb=0x0;_0x4aa524['forEach'](_0x1a2d2a=>{const _0xfecb11=_0x666062;_0x5d2feb+=_0x1a2d2a['number']*_0x1a2d2a[_0xfecb11(0xf0)];});_0x48378c[_0x666062(0x1e3)](_0x666062(0x210))&&(_0x5d2feb*=_0x2e60e6);let _0x144365;if(_0x5d2feb!==0x0){if(_0x48378c===_0x666062(0x1da)||_0x48378c==='fiat'){if(_0x48378c===_0x666062(0x1da))_0x144365=(_0x5d2feb/startingBalances[_0x666062(0x1da)]-0x1)*0x64;else{if(_0xaaa0ca===_0x666062(0x169))_0x144365=(_0x5d2feb/startingBalances[_0x666062(0x1f7)]-0x1)*0x64;else _0x144365=(_0x5d2feb/startingBalances[_0x666062(0xf4)]-0x1)*0x64;}}if(_0x48378c[_0x666062(0x1e3)]('net')){let _0x5281bc=0x0;if(startingBalances[_0x666062(0x268)])_0x4aa524[_0x666062(0xe4)](_0x25c744=>{const _0x37de35=_0x666062;let _0x1321e5=startingBalances['coins'][_0x37de35(0x1e1)](_0x1057e3=>_0x1057e3[_0x37de35(0x213)]===_0x25c744['coin']);if(_0x1321e5&&_0x1321e5[_0x37de35(0x213)]&&_0x25c744['number']!==0x0)_0x5281bc+=_0x1321e5[_0x37de35(0x14b)]*_0x25c744['last'];});let _0x32227b=0x0;if(_0xf442f9[_0x666062(0x24e)]!==0x0){let _0xae70d3=_0xf442f9[_0xf442f9[_0x666062(0x24e)]-0x1];_0x32227b=_0xae70d3['netoffset'];}_0x5281bc-=_0x32227b;let _0x51dc99;_0x48378c==='net-basecoin'&&(_0x51dc99=startingBalances['basecoin']),_0x48378c==='net-fiat'&&(_0x51dc99=_0xaaa0ca===_0x666062(0x169)?startingBalances['eur']:startingBalances[_0x666062(0xf4)],_0x5281bc*=_0x2e60e6),_0x144365=(_0x5d2feb-_0x5281bc)/_0x51dc99*0x64,_0x5d2feb=_0x5d2feb-_0x5281bc;}if(_0x48378c[_0x666062(0x1e3)](_0x666062(0x1a7))){if(_0xf442f9[_0x666062(0x24e)]!==0x0&&_0x4aa524['length']!==0x0){let _0x101e47,_0x3686cb=_0xf442f9[_0xf442f9[_0x666062(0x24e)]-0x1]['pnl'];_0x48378c['includes'](_0x666062(0x210))?(_0x101e47=_0xaaa0ca===_0x666062(0x169)?startingBalances[_0x666062(0x1f7)]:startingBalances[_0x666062(0xf4)],_0x3686cb*=CurrencyFactor(_0xcb48e0,_0x67a814,_0xaaa0ca)):_0x101e47=startingBalances[_0x666062(0x1da)],_0x144365=_0x3686cb/_0x101e47*0x64,_0x5d2feb=_0x3686cb;}}if(_0x144365){if(_0x144365<0x64)_0x144365=_0x144365[_0x666062(0x206)](0x2);else{if(_0x144365<0x3e8)_0x144365=_0x144365[_0x666062(0x206)](0x1);else _0x144365=_0x144365[_0x666062(0x206)](0x0);}}else _0x144365=Number('0')[_0x666062(0x206)](0x2);if(_0x5d2feb){if(Math[_0x666062(0xe9)](_0x5d2feb)<0.000001)_0x5d2feb=_0x5d2feb[_0x666062(0x206)](0x2);else{if(Math['abs'](_0x5d2feb)<0.1)_0x5d2feb=_0x5d2feb['toFixed'](0x6);else{if(Math['abs'](_0x5d2feb)<0x1)_0x5d2feb=_0x5d2feb[_0x666062(0x206)](0x5);else{if(Math[_0x666062(0xe9)](_0x5d2feb)<0xa)_0x5d2feb=_0x5d2feb[_0x666062(0x206)](0x4);else{if(Math[_0x666062(0xe9)](_0x5d2feb)<0x64)_0x5d2feb=_0x5d2feb[_0x666062(0x206)](0x3);else{if(Math[_0x666062(0xe9)](_0x5d2feb)<0x3e8)_0x5d2feb=_0x5d2feb[_0x666062(0x206)](0x2);else _0x5d2feb=_0x5d2feb[_0x666062(0x206)](0x2);}}}}}}else _0x5d2feb=Number('0')['toFixed'](0x2);}else _0x144365=Number('0')['toFixed'](0x2);if(_0x144365>=0x0)_0x144365='+'+_0x144365;return{'value':_0x5d2feb,'change':_0x144365};}async function getStartingBalances(_0x31818b,_0x1976fd=!![]){const _0x305ab4=_0xc2993d;if(_0x31818b[_0x305ab4(0x24e)]!==0x0){const [_0x3fcd4c,_0x160604,_0x526f25]=getPerf(_0x31818b[0x0],!![]);let _0x303d1e=[];config[_0x305ab4(0x28e)][_0x305ab4(0xe4)](_0x3077f4=>{const _0x484320=_0x305ab4;let _0x464d29=0x0,_0x10b709;config[_0x484320(0x223)][_0x484320(0xe4)](_0x4a38fd=>{const _0x3dbd82=_0x484320;let _0x436b98=_0x4a38fd[_0x3dbd82(0x294)]['find'](_0x2367bf=>_0x2367bf[_0x3dbd82(0x213)]==_0x3077f4['coin']);if(_0x436b98){_0x464d29+=_0x436b98[_0x3dbd82(0x14b)];if(!_0x10b709)_0x10b709=_0x436b98[_0x3dbd82(0x23d)];}}),_0x303d1e[_0x484320(0x1fc)]({'coin':_0x3077f4[_0x484320(0x213)],'number':_0x464d29,'initialprice':_0x10b709});});const _0x12412a={'basecoin':_0x3fcd4c,'eur':_0x160604,'usd':_0x526f25,'coins':_0x303d1e};if(_0x1976fd)proxyEmit('starting-balances',_0x12412a);startingBalances=_0x12412a;}}function headlessMode(_0x393eae){const _0x1ee89d=_0xc2993d;let _0x43f72a=_0x393eae[_0x1ee89d(0x28e)],_0x4781b7=_0x393eae[_0x1ee89d(0x179)],_0x5a8e9f=[];for(let _0x324e43 of _0x43f72a){if(_0x324e43[_0x1ee89d(0x213)]!=config[_0x1ee89d(0x1da)]){if(_0x324e43[_0x1ee89d(0x11a)]>=_0x4781b7/0x64){if(_0x324e43['valid'])_0x5a8e9f['push'](_0x324e43);}else{if(_0x324e43[_0x1ee89d(0x11a)]<=-_0x4781b7/0x64){if(_0x324e43[_0x1ee89d(0x1b6)])_0x5a8e9f[_0x1ee89d(0x1fc)](_0x324e43);}}}}_0x5a8e9f[_0x1ee89d(0x24e)]>0x0&&placeOrder(_0x5a8e9f);}function notifyBalance(_0x306855){const _0x401679=_0xc2993d;let _0x5dc9e9=_0x306855[_0x401679(0x28e)],_0x29056c=_0x306855[_0x401679(0x179)],_0x30c420=[];for(let _0x38c014 of _0x5dc9e9){if(_0x38c014[_0x401679(0x213)]!=config[_0x401679(0x1da)]){if(_0x38c014['delta']>=_0x29056c/0x64){if(_0x38c014[_0x401679(0x1b6)])_0x30c420[_0x401679(0x1fc)](_0x38c014);}else{if(_0x38c014[_0x401679(0x11a)]<=-_0x29056c/0x64){if(_0x38c014[_0x401679(0x1b6)])_0x30c420[_0x401679(0x1fc)](_0x38c014);}}}}if(_0x30c420['length']>0x0){let _0x472252=_0x30c420[_0x401679(0x11d)](_0x120bf0=>_0x120bf0[_0x401679(0x213)]);_0x472252[_0x401679(0x1bd)]();let _0x7a06b3=_0x472252[_0x401679(0x1ad)](',\x20');if(!lastCoinsToBalance)logHistory(_0x401679(0x133),_0x401679(0x186));lastCoinsToBalance=_0x7a06b3;}}function symbolToCoin(_0x4db493){const _0x26d6c5=_0xc2993d;let _0x5f44af;if(_0x4db493[_0x26d6c5(0x1e3)]('/'+config[_0x26d6c5(0x1da)]))_0x5f44af=_0x4db493[_0x26d6c5(0x261)]('/'+config[_0x26d6c5(0x1da)],'');if(_0x4db493[_0x26d6c5(0x1e3)](config[_0x26d6c5(0x1da)]+'/'))_0x5f44af=_0x4db493['replace'](config[_0x26d6c5(0x1da)]+'/','');return _0x5f44af;}function setLockOrders(_0x1b77f6){const _0x19769d=_0xc2993d;lockOrders=_0x1b77f6,logger['debug']('Set\x20lock\x20orders\x20to:\x20'+Object[_0x19769d(0x1fb)](ORDERS)[lockOrders]);}async function unlockOrders(_0x118058=![]){const _0x30700a=_0xc2993d;if(allOrdersPlaced&&lockOrders==ORDERS[_0x30700a(0x24f)]){setLockOrders(ORDERS[_0x30700a(0x15f)]);if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);if(_0x118058){const _0x55c91c=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x55c91c,setBlockTransactionDetection(![]);}validateOrdersState='initial',persistOpenOrders([]),setLockOrders(ORDERS['UNLOCKED']);}}async function validateOrders(_0x5d42e1){const _0x26b0fe=_0xc2993d;if(_0x5d42e1)validateOrdersState=_0x5d42e1;logger['debug'](_0x26b0fe(0x166)+validateOrdersState+_0x26b0fe(0x12b)+Object[_0x26b0fe(0x1fb)](ORDERS)[lockOrders]);let _0x266a79=[],_0x33b0a1=config[_0x26b0fe(0x1b5)]=='market'?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x26b0fe(0x18e)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x26b0fe(0x24f)])return;logger[_0x26b0fe(0xf8)](_0x26b0fe(0x1ab)+validateOrdersState);for(let _0x27a31a=lastOrders[_0x26b0fe(0x24e)]-0x1;_0x27a31a>=0x0;_0x27a31a--){let _0xf3ba09=lastOrders[_0x27a31a],_0x10413b=![];_0xf3ba09[_0x26b0fe(0x20c)]>0x0&&(_0x10413b=!![]),_0x266a79['push'](_0x10413b),_0x10413b&&config[_0x26b0fe(0x1b5)]!=_0x26b0fe(0x265)&&logHistory('order',_0x26b0fe(0x1e0)+_0xf3ba09[_0x26b0fe(0x201)]+'\x20'+_0xf3ba09['side']+'\x20#'+formatResult(_0xf3ba09['filled'],0x8)+'\x20@'+formatResult(_0xf3ba09[_0x26b0fe(0x23d)],0x8)),_0x10413b&&lastOrders[_0x26b0fe(0x260)](_0x27a31a,0x1);}persistOpenOrders(lastOrders);const _0x3053b3=coolingDown?_0x26b0fe(0x287):_0x26b0fe(0x23f);if(validateOrdersState==_0x26b0fe(0x195)){validateOrdersState='ongoing';if(_0x266a79[_0x26b0fe(0x1e3)](![])){}else await unlockOrders();}else{if(validateOrdersState=='ongoing'){if(_0x266a79['includes'](![])){}else await unlockOrders();}else{if(validateOrdersState=='final')_0x266a79[_0x26b0fe(0x1e3)](![])&&(config[_0x26b0fe(0x1b5)]==_0x26b0fe(0x265)?logHistory('success','Order(s)\x20not\x20validated\x20after\x20'+Math['round'](_0x33b0a1*validateOrderInterval/0xea60)+_0x26b0fe(0x119)+_0x3053b3):(await cancelOrders(),logHistory('success',_0x26b0fe(0x1b1)+Math[_0x26b0fe(0x183)](_0x33b0a1*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x3053b3))),await unlockOrders(!![]);else{if(validateOrdersState==_0x26b0fe(0x238)){if(config[_0x26b0fe(0x1b5)]!=_0x26b0fe(0x265))logHistory(_0x26b0fe(0x245),_0x26b0fe(0x17b)+_0x3053b3);await unlockOrders(!![]);}}}}}async function cancelOrders(){const _0x363bc5=_0xc2993d;lastOrders[_0x363bc5(0xe4)](async _0x1bfd38=>{const _0xa339a7=_0x363bc5;try{const _0x4d4149=await exchange['cancelOrder'](_0x1bfd38[_0xa339a7(0x15d)],_0x1bfd38[_0xa339a7(0x201)]);}catch(_0x81c569){if(_0x81c569[_0xa339a7(0x291)]()[_0xa339a7(0x1e3)]('OrderNotFound')){}else await handleError(_0x81c569,_0xa339a7(0xee));}});}async function initCoinResults(_0x23294f){const _0x11f32a=_0xc2993d;_0x23294f?logger[_0x11f32a(0xf8)]('Resetting\x20coin\x20results:\x20'+_0x23294f):logger[_0x11f32a(0xf8)](_0x11f32a(0x16c)),config['portfolio'][_0x11f32a(0xe4)](_0x577893=>{const _0x2991dd=_0x11f32a;if(!_0x577893[_0x2991dd(0xf1)]&&_0x577893[_0x2991dd(0x213)]!=config[_0x2991dd(0x1da)]){const _0x5609b6=currentCoins['find'](_0x5ea9b9=>_0x5ea9b9[_0x2991dd(0x213)]==_0x577893['coin']),_0x43c933=gTicker[noslash(_0x577893[_0x2991dd(0x201)])];let _0x4ec118=_0x5609b6?_0x5609b6[_0x2991dd(0x14b)]:null,_0x56783b=_0x577893[_0x2991dd(0x105)]?0x1/_0x43c933:_0x43c933,_0x408308;config[_0x2991dd(0x223)][_0x2991dd(0xe4)](_0x24b108=>{const _0x491a39=_0x2991dd;!_0x408308&&(_0x408308=_0x24b108[_0x491a39(0x294)]['find'](_0x855785=>_0x855785[_0x491a39(0x213)]==_0x577893[_0x491a39(0x213)]),_0x408308&&(_0x4ec118=_0x408308[_0x491a39(0x14b)],_0x56783b=_0x408308['price']));});let _0x1983a4=dbCoinResults[_0x2991dd(0x192)](_0x2991dd(0x268))[_0x2991dd(0x1e1)]({'coin':_0x577893['coin']})[_0x2991dd(0x208)]();if(!_0x1983a4){const _0x60c45c={'coin':_0x577893[_0x2991dd(0x213)],'number':_0x4ec118,'breakeven':_0x56783b,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get']('coins')[_0x2991dd(0x1fc)](_0x60c45c)[_0x2991dd(0x1ac)]();}else{if(_0x23294f&&_0x577893[_0x2991dd(0x213)]==_0x23294f){const _0x2ec7b9={'coin':_0x577893[_0x2991dd(0x213)],'number':_0x4ec118,'breakeven':_0x56783b,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get'](_0x2991dd(0x268))['find']({'coin':_0x577893[_0x2991dd(0x213)]})['assign'](_0x2ec7b9)[_0x2991dd(0x1ac)]();}}}});}async function placeOrder(_0x4e3ea5){const _0xc3ca86=_0xc2993d,_0x3e943e=config[_0xc3ca86(0x1b5)]=='market'?'market':_0xc3ca86(0x14f);if(lockOrders==ORDERS[_0xc3ca86(0x23a)]&&!coolingDown){setLockOrders(ORDERS[_0xc3ca86(0x24f)]);while(transactionDetectionOngoing){await sleep(0x64);}logger[_0xc3ca86(0xf8)](_0xc3ca86(0x17f)+_0x4e3ea5[_0xc3ca86(0x11d)](_0x31a07b=>_0x31a07b['coin'])[_0xc3ca86(0x1ad)](',\x20')),lastCoinsToBalance='',allOrdersPlaced=![],validateOrdersState=_0xc3ca86(0x195);let _0x251c39=![];lastOrders=[];const _0x210674=config[_0xc3ca86(0x179)];for(const _0x2768b4 of _0x4e3ea5){let _0x17b507,_0x5f5151,_0x456a76,_0x397e41,_0x55f2e4,_0x32f422=_0x2768b4[_0xc3ca86(0x201)];logger[_0xc3ca86(0xf8)](_0xc3ca86(0x103)+_0x2768b4[_0xc3ca86(0x213)]+'\x20'+_0x2768b4[_0xc3ca86(0x14b)]+'\x20'+_0x2768b4[_0xc3ca86(0xf0)]+'\x20'+_0x2768b4[_0xc3ca86(0x297)]+'%\x20'+_0x2768b4[_0xc3ca86(0x1b2)]+'%\x20'+(0x64*_0x2768b4[_0xc3ca86(0x11a)])[_0xc3ca86(0x206)](0x2)+_0xc3ca86(0x21a)+_0x210674['toFixed'](0x2)+'%)');const _0x38d3d0=currentCoins[_0xc3ca86(0x1e1)](_0x1c0eb0=>_0x1c0eb0[_0xc3ca86(0x213)]==_0x2768b4['coin']);_0x38d3d0&&(_0x38d3d0[_0xc3ca86(0x10a)]=_0x2768b4[_0xc3ca86(0x14b)]);try{const _0x176c96=await exchange['fetchTicker'](_0x32f422);_0x17b507=_0x2768b4[_0xc3ca86(0x105)]?0x1/_0x2768b4[_0xc3ca86(0xf0)]:_0x2768b4[_0xc3ca86(0xf0)],_0x5f5151=_0x176c96[_0xc3ca86(0x1f9)],_0x456a76=_0x176c96[_0xc3ca86(0x1cc)];_0x2768b4['reverse']?(_0x397e41=_0x2768b4[_0xc3ca86(0x115)]==_0xc3ca86(0x176)?_0xc3ca86(0x13e):'buy',_0x55f2e4=Math[_0xc3ca86(0xe9)](_0x2768b4[_0xc3ca86(0x14e)])/_0x17b507):(_0x397e41=_0x2768b4['side'],_0x55f2e4=Math[_0xc3ca86(0xe9)](_0x2768b4[_0xc3ca86(0x14e)]));_0x3e943e==_0xc3ca86(0x14f)&&(config[_0xc3ca86(0x1b5)]==_0xc3ca86(0x144)&&(_0x17b507=_0x397e41==_0xc3ca86(0x176)?_0x5f5151:_0x456a76),config['ordertype']==_0xc3ca86(0x21c)&&(_0x17b507=_0x397e41==_0xc3ca86(0x176)?_0x456a76:_0x5f5151));_0x55f2e4=formatResult(_0x55f2e4,0x8),_0x17b507=formatResult(_0x17b507,0x8);const _0x151be4=_0x397e41==_0xc3ca86(0x13e)?config['emojisell']?String[_0xc3ca86(0x142)]('0x'+config['emojisell'])+'\x20':'':config[_0xc3ca86(0x234)]?String['fromCodePoint']('0x'+config[_0xc3ca86(0x234)])+'\x20':'',_0x3415bb=_0x3e943e==_0xc3ca86(0x265)?'Market':config['ordertype']=='limit-high'?_0xc3ca86(0x220):_0xc3ca86(0x113),_0x1a3af2=(Math[_0xc3ca86(0x272)](Math[_0xc3ca86(0x110)]()*0x35a4e900)+0x5f5e100)[_0xc3ca86(0x291)]();lastOrders['push']({'customId':_0x1a3af2,'symbol':_0x32f422,'coin':_0x2768b4['coin'],'amount':_0x55f2e4,'price':_0x17b507,'side':_0x397e41,'reverse':_0x2768b4['reverse'],'filled':0x0});let _0x545cb6;_0x3e943e=='market'?_0x397e41==_0xc3ca86(0x176)&&[_0xc3ca86(0xfa),_0xc3ca86(0x104),_0xc3ca86(0x15e),_0xc3ca86(0x1ae),'Huobipro'][_0xc3ca86(0x1e3)](config['exchange'])?_0x545cb6=await exchange[_0xc3ca86(0x25e)](_0x32f422,_0x3e943e,_0x397e41,_0x55f2e4,_0x17b507):_0x545cb6=await exchange['createOrder'](_0x32f422,_0x3e943e,_0x397e41,_0x55f2e4,undefined):_0x545cb6=await exchange[_0xc3ca86(0x25e)](_0x32f422,_0x3e943e,_0x397e41,_0x55f2e4,_0x17b507);const _0x4e1020=lastOrders[_0xc3ca86(0x24e)]-0x1;if(_0x4e1020>=0x0&&lastOrders[_0x4e1020][_0xc3ca86(0x269)]==_0x1a3af2){lastOrders[_0x4e1020][_0xc3ca86(0x15d)]=_0x545cb6['id'];if(_0x545cb6[_0xc3ca86(0x278)])lastOrders[_0x4e1020][_0xc3ca86(0x278)]=_0x545cb6['amount'];if(_0x545cb6[_0xc3ca86(0x23d)])lastOrders[_0x4e1020]['price']=_0x545cb6[_0xc3ca86(0x23d)];lastOrders[_0x4e1020]['fee']=_0x545cb6[_0xc3ca86(0x249)];}if(_0x545cb6[_0xc3ca86(0x278)])_0x55f2e4=_0x545cb6[_0xc3ca86(0x278)];if(_0x545cb6['price'])_0x17b507=_0x545cb6['price'];if(_0x3e943e==_0xc3ca86(0x265))logHistory(_0xc3ca86(0x13b),''+_0x151be4+_0x3415bb+_0xc3ca86(0x264)+_0x32f422+'\x20'+_0x397e41+'\x20#'+formatResult(_0x55f2e4,0x8)+'\x20@'+formatResult(_0x17b507,0x8));else logHistory(_0xc3ca86(0x13b),''+_0x151be4+_0x3415bb+'\x20order:\x20'+_0x32f422+'\x20'+_0x397e41+'\x20#'+formatResult(_0x55f2e4,0x8)+'\x20@'+formatResult(_0x17b507,0x8));logger['debug']('ID:\x20'+_0x545cb6['id']+'\x20|\x20Custom\x20ID:\x20'+_0x1a3af2);if(config[_0xc3ca86(0x116)]!=0x0){let _0x27bd72=null;if(cooldownTracker['length']==config['cooldown']-0x1)_0x27bd72=cooldownTracker[_0xc3ca86(0x21f)]();const _0x1c5c88=getTimeStamp();cooldownTracker[_0xc3ca86(0x1fc)](_0x1c5c88);if(_0x27bd72){const _0x3675c5=fns['differenceInSeconds'](new Date(_0x1c5c88),new Date(_0x27bd72));if(_0x3675c5<cooldownInterval){logHistory(_0xc3ca86(0x1f1),'Executed\x20'+config[_0xc3ca86(0x116)]+'\x20orders\x20in\x20less\x20than\x20'+cooldownInterval/0x3c+_0xc3ca86(0x25d)+cooldownPeriod/(0xe10*0x3e8)+'\x20hour'),coolingDown=!![];break;}}}}catch(_0x399a80){if(_0x399a80[_0xc3ca86(0x291)]()['includes'](_0xc3ca86(0x13c)))lastOrders=lastOrders[_0xc3ca86(0x1cd)](_0x1ce3c4=>_0x1ce3c4[_0xc3ca86(0x201)]!=_0x32f422),logHistory(_0xc3ca86(0x1f1),_0xc3ca86(0xfd)+_0x32f422),_0x251c39=!![];else{if(_0x399a80[_0xc3ca86(0x291)]()[_0xc3ca86(0x1e3)](_0xc3ca86(0x180)))lastOrders=lastOrders[_0xc3ca86(0x1cd)](_0x5e79a1=>_0x5e79a1['symbol']!=_0x32f422),logHistory(_0xc3ca86(0x1f1),_0xc3ca86(0x18a)+_0x32f422),_0x251c39=!![];else{if(_0x399a80[_0xc3ca86(0x291)]()[_0xc3ca86(0x1e3)](_0xc3ca86(0x148)))lastOrders=lastOrders[_0xc3ca86(0x1cd)](_0x58e17b=>_0x58e17b['symbol']!=_0x32f422),logHistory(_0xc3ca86(0x1f1),'Order\x20is\x20invalid:\x20'+_0x32f422),logger[_0xc3ca86(0xf8)](_0x399a80),_0x251c39=!![];else _0x399a80[_0xc3ca86(0x291)]()[_0xc3ca86(0x1e3)]('must\x20be\x20greater\x20than\x20minimum\x20amount')?(lastOrders=lastOrders[_0xc3ca86(0x1cd)](_0x3325d3=>_0x3325d3[_0xc3ca86(0x201)]!=_0x32f422),logHistory(_0xc3ca86(0x1f1),'Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x32f422),_0x251c39=!![]):(lastOrders=lastOrders[_0xc3ca86(0x1cd)](_0x21805d=>_0x21805d[_0xc3ca86(0x201)]!=_0x32f422),await handleError(_0x399a80,'placeOrder()',_0x32f422));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0xc3ca86(0x24e)]>0x0){const _0x14c5c5=config['ordertype']==_0xc3ca86(0x265)?validateOrderTimeout*0x3c*0x3e8:config[_0xc3ca86(0x18e)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x598ae7=_0xc3ca86;validateOrders(_0x598ae7(0x256));},_0x14c5c5);}else unlockOrders();_0x251c39&&config[_0xc3ca86(0x12c)]&&(logHistory(_0xc3ca86(0x1f1),'Avoiding\x20continuous\x20order\x20attempts'+pauseBotMsg),await pauseBot(pauseBotInterval)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0xc3ca86(0x245),_0xc3ca86(0x178)));}else{if(coolingDown)!config[_0xc3ca86(0x12c)]&&logHistory('error',_0xc3ca86(0x1e9));else lockOrders!=ORDERS[_0xc3ca86(0x23a)]&&(!config[_0xc3ca86(0x12c)]&&(config['ordertype']=='market'?logHistory(_0xc3ca86(0x1f1),_0xc3ca86(0x241)):logHistory('error',_0xc3ca86(0x11e))));}}function persistOpenOrders(_0x28808a){const _0x4c1afa=_0xc2993d,_0x48b188={...config,'openOrders':_0x28808a};let _0x281480=dbConfig[_0x4c1afa(0x192)](_0x4c1afa(0x196))[_0x4c1afa(0x1e1)]({'botID':botID})['value']();_0x281480&&dbConfig[_0x4c1afa(0x192)](_0x4c1afa(0x196))[_0x4c1afa(0x1e1)]({'botID':botID})['assign'](_0x48b188)[_0x4c1afa(0x1ac)]();}function restoreOrders(){const _0x4f997f=_0xc2993d;let _0x561c88;config['openOrders']&&allOpenOrders['forEach'](_0x45bd67=>{const _0x582691=_0x5db8,_0x43994f=config['openOrders'][_0x582691(0x1e1)](_0x4961a0=>_0x4961a0['orderId']==_0x45bd67['id']);_0x43994f&&(lastOrders[_0x582691(0x1fc)](_0x43994f),_0x561c88=_0x45bd67[_0x582691(0x251)]);});if(lastOrders[_0x4f997f(0x24e)]>0x0){setLockOrders(ORDERS[_0x4f997f(0x24f)]),validateOrdersState=_0x4f997f(0x128),allOrdersPlaced=!![];const _0x9fb90b=new Date()[_0x4f997f(0x167)](),_0x479419=config[_0x4f997f(0x1b5)]=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0x4f997f(0x18e)]*0x3c*0x3e8;if(_0x561c88+_0x479419>_0x9fb90b){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x561c88+_0x479419-_0x9fb90b);}else validateOrders(_0x4f997f(0x256));}}async function sendMetricsTelegram(){const _0x17d13a=_0xc2993d;if(!coinsLoaded){process[_0x17d13a(0x13a)]({'telegrammsg':'Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute'},_0x5d5e9f=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x323553='';if(config[_0x17d13a(0x1a2)])_0x323553=_0x17d13a(0x15b)+config[_0x17d13a(0x289)]+_0x17d13a(0x29f);else _0x323553=_0x17d13a(0x1aa)+botID+'\x20metrics:</b>\x20\x0a\x0a';const _0x2cde9e=config['basecoin'],_0x42f7d3=config[_0x17d13a(0x210)],_0x2b2e21=getKPIs(_0x17d13a(0x1da)),_0x52de17=getKPIs(_0x17d13a(0x210),_0x42f7d3),_0x193a75=getKPIs(_0x17d13a(0x19f)),_0x4e6b92=getKPIs(_0x17d13a(0x284),_0x42f7d3),_0x5cad8f=getKPIs('pnl-basecoin'),_0x2e87ae=getKPIs(_0x17d13a(0xf5),_0x42f7d3);_0x2cde9e[_0x17d13a(0x1e3)](_0x42f7d3)?(_0x323553+=_0x17d13a(0x1f6),_0x323553+=_0x17d13a(0x143)+_0x2cde9e+':\x20'+_0x2b2e21[_0x17d13a(0x208)]+'\x20('+_0x2b2e21['change']+_0x17d13a(0x1c6),_0x323553+='Net\x20'+_0x2cde9e+':\x20'+_0x193a75[_0x17d13a(0x208)]+'\x20('+_0x193a75[_0x17d13a(0x1ef)]+_0x17d13a(0x1c6),_0x323553+=_0x17d13a(0x12d)+_0x2cde9e+':\x20'+_0x5cad8f[_0x17d13a(0x208)]+'\x20('+_0x5cad8f[_0x17d13a(0x1ef)]+_0x17d13a(0x1c6),_0x323553+='</pre>'):(_0x323553+=_0x17d13a(0x1f6),_0x323553+=_0x17d13a(0x143)+_0x2cde9e+':\x20'+_0x2b2e21[_0x17d13a(0x208)]+'\x20('+_0x2b2e21[_0x17d13a(0x1ef)]+_0x17d13a(0x1c6),_0x323553+=_0x17d13a(0x143)+_0x42f7d3+':\x20'+_0x52de17[_0x17d13a(0x208)]+'\x20('+_0x52de17[_0x17d13a(0x1ef)]+_0x17d13a(0x1c6),_0x323553+='Net\x20'+_0x2cde9e+':\x20'+_0x193a75[_0x17d13a(0x208)]+'\x20('+_0x193a75[_0x17d13a(0x1ef)]+_0x17d13a(0x1c6),_0x323553+='Net\x20'+_0x42f7d3+':\x20'+_0x4e6b92[_0x17d13a(0x208)]+'\x20('+_0x4e6b92[_0x17d13a(0x1ef)]+_0x17d13a(0x1c6),_0x323553+=_0x17d13a(0x12d)+_0x2cde9e+':\x20'+_0x5cad8f['value']+'\x20('+_0x5cad8f[_0x17d13a(0x1ef)]+_0x17d13a(0x1c6),_0x323553+=_0x17d13a(0x12d)+_0x42f7d3+':\x20'+_0x2e87ae[_0x17d13a(0x208)]+'\x20('+_0x2e87ae[_0x17d13a(0x1ef)]+_0x17d13a(0x1c6),_0x323553+=_0x17d13a(0x106)),process[_0x17d13a(0x13a)]({'telegrammsg':_0x323553},_0x4a784d=>{});}async function sendPortfolioTelegram(){const _0x5e9e4a=_0xc2993d;if(!coinsLoaded||!currentCoins[0x0][_0x5e9e4a(0x297)]){process[_0x5e9e4a(0x13a)]({'telegrammsg':'Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute'},_0xdb7665=>{});return;}let _0x5da9cf='';if(config[_0x5e9e4a(0x1a2)])_0x5da9cf=_0x5e9e4a(0x15b)+config[_0x5e9e4a(0x289)]+'\x20portfolio:</b>\x20\x0a\x0a';else _0x5da9cf='<b>Bot\x20'+botID+_0x5e9e4a(0x1a4);_0x5da9cf+='<pre>',_0x5da9cf+=_0x5e9e4a(0x239),_0x5da9cf+='Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a',_0x5da9cf+=_0x5e9e4a(0x239),currentCoins[_0x5e9e4a(0xe4)](_0x257203=>{const _0xd9549f=_0x5e9e4a;_0x5da9cf+=_0x257203[_0xd9549f(0x213)][_0xd9549f(0x20e)](0x7)+'|\x20'+formatPad(_0x257203[_0xd9549f(0x297)],0x2,0x6)+'|\x20'+formatPad(_0x257203[_0xd9549f(0x1b2)],0x2,0x6)+'|\x20'+formatPad(_0x257203[_0xd9549f(0x11a)]*0x64,0x2,0x6)+'\x0a';}),_0x5da9cf+=_0x5e9e4a(0x106),process['send']({'telegrammsg':_0x5da9cf},_0x5694f6=>{});}function formatPad(_0x592526,_0x4a7f1b,_0x5c8fc9){const _0x376ccc=_0xc2993d,_0x316f24=formatResultString(_0x592526,_0x4a7f1b);return _0x316f24?_0x316f24[_0x376ccc(0x132)](_0x5c8fc9):''[_0x376ccc(0x132)](_0x5c8fc9);}function logHistory(_0x9a3d1f,_0x3f227a,_0x20f091=''){const _0x31a497=_0xc2993d;logger[_0x31a497(0x194)](''+_0x3f227a);let _0x1cb255={'time':getTimeStamp(),'type':_0x9a3d1f,'event':_0x3f227a};dbLogs['get'](_0x31a497(0x25b))[_0x31a497(0x1fc)](_0x1cb255)[_0x31a497(0x1ac)]();if(_0x20f091=='')_0x20f091=_0x3f227a;proxyEmit('event',{'log':_0x1cb255,'summary':_0x20f091}),process['send']({'telegram':{..._0x1cb255,'botname':config[_0x31a497(0x289)],'showname':config[_0x31a497(0x1a2)]}},_0x56ba15=>{});}function emitHistory(_0x5d8de3={}){const _0xa06595=_0xc2993d;Object[_0xa06595(0x1fb)](_0x5d8de3)[_0xa06595(0x24e)]==0x0&&(_0x5d8de3={'type':[_0xa06595(0x13b),_0xa06595(0x10b)],'event':'','page':0x1});if(_0x5d8de3[_0xa06595(0x134)]['includes'](_0xa06595(0x10b)))_0x5d8de3['type'][_0xa06595(0x260)](_0x5d8de3['type']['indexOf'](_0xa06595(0x10b)),0x1,'error',_0xa06595(0x133),_0xa06595(0x245));if(dbLogs[_0xa06595(0x229)]('logs')[_0xa06595(0x208)]()){let _0x378728=dbLogs[_0xa06595(0x192)](_0xa06595(0x25b))[_0xa06595(0x1cd)](_0x4b1776=>{const _0x58ce57=_0xa06595;if(_0x5d8de3[_0x58ce57(0x134)]['length']==0x0)return![];else return _0x5d8de3[_0x58ce57(0x134)][_0x58ce57(0x1e3)](_0x4b1776['type']);})[_0xa06595(0x1cd)](_0x1d29f0=>{const _0x504d13=_0xa06595;if(_0x5d8de3[_0x504d13(0x10b)]=='')return!![];else return _0x1d29f0[_0x504d13(0x10b)]['toLowerCase']()[_0x504d13(0x1e3)](_0x5d8de3[_0x504d13(0x10b)][_0x504d13(0x226)]());})[_0xa06595(0x280)](_0xa06595(0x14d)),_0x41020a=_0x378728[_0xa06595(0x208)]()[_0xa06595(0x24e)];_0x378728=_0x378728[_0xa06595(0x105)]()[_0xa06595(0xef)]((_0x5d8de3[_0xa06595(0x1eb)]-0x1)*logPageSize,_0x5d8de3['page']*logPageSize-0x1)[_0xa06595(0x105)]()[_0xa06595(0x208)](),proxyEmit(_0xa06595(0x1d3),{'logs':_0x378728,'total':_0x41020a});}else proxyEmit('event-history',{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x5c6caf){const _0x1cfcc4=_0xc2993d;if(dbLogs[_0x1cfcc4(0x229)]('logs')[_0x1cfcc4(0x208)]()){const _0x58d6f3=dbLogs[_0x1cfcc4(0x192)](_0x1cfcc4(0x25b))[_0x1cfcc4(0x280)](_0x1cfcc4(0x14d))[_0x1cfcc4(0x1cd)](_0x20700f=>{const _0x4d3e5e=_0x1cfcc4;return _0x20700f[_0x4d3e5e(0x134)]=='order';})[_0x1cfcc4(0x208)]();dbLogs[_0x1cfcc4(0x192)](_0x1cfcc4(0x25b))[_0x1cfcc4(0x1fa)]()[_0x1cfcc4(0x1ac)](),dbLogs[_0x1cfcc4(0x192)]('logs')[_0x1cfcc4(0x23c)](_0x58d6f3)[_0x1cfcc4(0x1ac)](),emitHistory(_0x5c6caf);}}async function pauseBot(_0x3cc6c6=pauseBotIntervalShort,_0x30c2a5,_0x26ddf7,_0x9c03e4=![]){const _0x3cd419=_0xc2993d,_0x1a045c=new Date()[_0x3cd419(0x167)]();if(!lastErrorShown||_0x1a045c-lastErrorShown>=_0x3cc6c6){lastErrorShown=_0x1a045c;if(!lastBotPause)lastBotPause=_0x1a045c,consecutivePauses=0x1;else{if(_0x1a045c-lastBotPause-_0x3cc6c6<0x5a*0x3e8){consecutivePauses++;if(consecutivePauses>maxPauseRetries){if(_0x9c03e4){logHistory('error',_0x30c2a5+_0x3cd419(0x10e)),await killBot();return;}else logHistory(_0x3cd419(0x1f1),_0x30c2a5+pauseBotMsg),_0x3cc6c6=pauseBotInterval;}}else consecutivePauses=0x1;lastBotPause=_0x1a045c;}_0x26ddf7?logger['debug']('('+consecutivePauses+')\x20'+_0x30c2a5+'\x20>\x20details:',_0x26ddf7):logger[_0x3cd419(0xf8)]('('+consecutivePauses+')\x20'+_0x30c2a5);if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);await sleep(_0x3cc6c6),botPaused=![],_0x3cc6c6==pauseBotIntervalShort?resumeBot(!![]):resumeBot(![]);}}}async function killBot(){botPaused=!![],await sleep(0x3e8),process['send']({'stop':'kill'},_0x1ec424=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x15740f,_0x431e43,_0x4efc36=![]){const _0x1e995a=_0xc2993d;if(botPaused)return;let _0x22448c;const _0x2f16d7=config['exchange']||_0x1e995a(0x1dc);if(_0x431e43)logger[_0x1e995a(0xf8)](_0x1e995a(0x17c)+_0x431e43);const _0x2521e5=()=>{const _0x53c287=_0x1e995a;loading[_0x53c287(0x1f1)]=!![],emitLoadingProgress();};if(_0x15740f[_0x1e995a(0x291)]()['includes'](_0x1e995a(0x296)))logHistory(_0x1e995a(0x1f1),_0x2f16d7+_0x1e995a(0x250)),_0x2521e5();else{if(_0x15740f['toString']()[_0x1e995a(0x1e3)](_0x1e995a(0x10f)))logHistory(_0x1e995a(0x1f1),_0x2f16d7+'\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)'),_0x2521e5();else{if(_0x15740f[_0x1e995a(0x291)]()[_0x1e995a(0x1e3)](_0x1e995a(0x188)))config[_0x1e995a(0x182)]?_0x22448c=_0x2f16d7+_0x1e995a(0x1d6):_0x22448c=_0x2f16d7+_0x1e995a(0x26f),logHistory(_0x1e995a(0x1f1),_0x22448c+'\x20(see:\x20hodlerhacks.com/fix/1)'),_0x2521e5();else{if(_0x15740f[_0x1e995a(0x291)]()['includes']('PermissionDenied'))logHistory('error',_0x2f16d7+_0x1e995a(0xe5)),_0x2521e5();else{if(!_0x4efc36)await handleError(_0x15740f,null);}}}}}async function handleError(_0x25af45,_0x4862ad,_0x221176=''){const _0xb20190=_0xc2993d;if(botPaused)return;let _0x514b93;const _0x5ba16b=config[_0xb20190(0x22b)]||_0xb20190(0x1dc);if(_0x4862ad)logger[_0xb20190(0xf8)](_0xb20190(0x17c)+_0x4862ad);if(_0x25af45['toString']()['includes'](_0xb20190(0x257)))_0x514b93=_0x5ba16b+'\x20blocked\x20API\x20(DDoSProtection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading',await pauseBot(undefined,_0x514b93,_0x25af45);else{if(_0x25af45[_0xb20190(0x291)]()['includes'](_0xb20190(0x172)))_0x514b93=_0x5ba16b+'\x20blocked\x20API\x20(RateLimitExceeded)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading',await pauseBot(undefined,_0x514b93,_0x25af45);else{if(_0x25af45[_0xb20190(0x291)]()[_0xb20190(0x1e3)](_0xb20190(0x1af))||_0x25af45[_0xb20190(0x291)]()[_0xb20190(0x1e3)]('OnMaintenance'))_0x514b93=_0x5ba16b+'\x20not\x20available\x20(see:\x20hodlerhacks.com/fix/5)',await pauseBot(undefined,_0x514b93,_0x25af45[_0xb20190(0x291)]());else{if(_0x25af45[_0xb20190(0x291)]()[_0xb20190(0x1e3)](_0xb20190(0x205)))_0x514b93=_0x5ba16b+'\x20not\x20responding\x20(see:\x20hodlerhacks.com/fix/5)',await pauseBot(undefined,_0x514b93,_0x25af45[_0xb20190(0x291)]());else{if(_0x25af45[_0xb20190(0x291)]()['includes'](_0xb20190(0x258)))_0x514b93=_0x5ba16b+_0xb20190(0x19a),await pauseBot(undefined,_0x514b93,_0x25af45[_0xb20190(0x291)]());else{if(_0x25af45[_0xb20190(0x291)]()[_0xb20190(0x226)]()[_0xb20190(0x1e3)](_0xb20190(0x251))||_0x25af45[_0xb20190(0x291)]()['toLowerCase']()['includes'](_0xb20190(0xe8)))_0x514b93=_0xb20190(0x222),await pauseBot(undefined,_0x514b93,_0x25af45[_0xb20190(0x291)]());else{if(_0x25af45[_0xb20190(0x291)]()[_0xb20190(0x1e3)](_0xb20190(0x1d9)))_0x514b93=_0x5ba16b+_0xb20190(0x1ce),await pauseBot(undefined,_0x514b93,_0x25af45[_0xb20190(0x291)]());else{if(_0x25af45 instanceof ccxt['NetworkError'])_0x514b93=_0x5ba16b+_0xb20190(0x1d8)+_0x25af45['toString'](),logger[_0xb20190(0xf8)](_0xb20190(0x18c),_0x25af45),await pauseBot(undefined,_0x514b93,_0x25af45);else{if(_0x25af45[_0xb20190(0x291)]()['includes'](_0xb20190(0x296)))logHistory('error',_0x5ba16b+'\x20API\x20key\x20is\x20invalid'),logHistory(_0xb20190(0x1f1),_0xb20190(0x152)),await killBot();else{if(_0x25af45[_0xb20190(0x291)]()[_0xb20190(0x1e3)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory(_0xb20190(0x1f1),_0x5ba16b+_0xb20190(0x108)),logHistory(_0xb20190(0x1f1),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)'),await killBot();else{if(_0x25af45['toString']()[_0xb20190(0x1e3)](_0xb20190(0x188))&&_0x25af45[_0xb20190(0x291)]()[_0xb20190(0x1e3)](_0xb20190(0x145)))_0x514b93=_0x5ba16b+_0xb20190(0x2ab),await pauseBot(undefined,_0x514b93,_0x25af45,!![]);else{if(_0x25af45[_0xb20190(0x291)]()[_0xb20190(0x1e3)](_0xb20190(0x188)))config[_0xb20190(0x182)]?_0x514b93=_0x5ba16b+_0xb20190(0x1d6):_0x514b93=_0x5ba16b+_0xb20190(0x26f),logHistory(_0xb20190(0x1f1),_0x514b93),logHistory('error',_0xb20190(0x152)),await killBot();else{if(_0x25af45['toString']()['includes']('PermissionDenied'))logHistory(_0xb20190(0x1f1),_0x5ba16b+_0xb20190(0x221)),logHistory('error','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)'),await killBot();else{if(_0x25af45[_0xb20190(0x291)]()[_0xb20190(0x1e3)](_0xb20190(0x1fd)))logHistory('error',_0xb20190(0x1f3)+_0x221176),logger[_0xb20190(0xf8)](_0xb20190(0x286),_0x25af45);else{if(_0x25af45 instanceof ccxt[_0xb20190(0x14c)]){_0x514b93=_0x5ba16b+_0xb20190(0x203)+_0x25af45[_0xb20190(0x291)]();if(_0x221176)_0x514b93+=_0xb20190(0x190)+_0x221176;await pauseBot(undefined,_0x514b93,_0x25af45);}else{_0x514b93='Unknown\x20error:\x20'+_0x25af45[_0xb20190(0x291)]();if(_0x221176)_0x514b93+='\x0aSymbol(s):\x20'+_0x221176;await pauseBot(undefined,_0x514b93);}}}}}}}}}}}}}}}}function decryptRSA(_0x159e7b,_0x1b5e77){const _0x5f2f19=_0xc2993d,_0x5494db=forge[_0x5f2f19(0x227)][_0x5f2f19(0x27f)](_0x159e7b),_0xc7626f=_0x5494db[_0x5f2f19(0x1f5)](forge[_0x5f2f19(0x20a)][_0x5f2f19(0x1ea)](_0x1b5e77),_0x5f2f19(0x24c),{'md':forge['md'][_0x5f2f19(0x21e)][_0x5f2f19(0x185)](),'mgf1':{'md':forge['md'][_0x5f2f19(0x21e)][_0x5f2f19(0x185)]()}});return _0xc7626f;}async function withRetry(_0x43a256,_0x43c7ec){const _0x4180a5=_0xc2993d;let _0x6424c0=![],_0x4c7bff=0x0,_0x2a0573,_0x1ebb72;while(_0x4c7bff<maxRetries){try{_0x2a0573=await _0x43c7ec();break;}catch(_0x204721){_0x1ebb72=_0x204721,!_0x6424c0?(_0x6424c0=!![],logger[_0x4180a5(0xf8)]('RETRY\x20-\x20Error\x20in\x20'+_0x43a256+':',_0x204721['toString']())):await sleep(retryInterval);}_0x4c7bff++;}if(_0x4c7bff==0x0)return _0x2a0573;if(_0x4c7bff>=maxRetries)throw _0x1ebb72;else return logger['debug']('RETRY\x20-\x20Problem\x20resolved\x20after\x20'+_0x4c7bff+_0x4180a5(0x1de)),_0x2a0573;}function formatResult(_0x5dcb4a,_0x32c1fe){const _0x7facd5=_0xc2993d;return parseFloat(_0x5dcb4a[_0x7facd5(0x206)](_0x32c1fe));}function formatResultTruncate(_0x2eecc3,_0x23618c){const _0xaf1598=_0xc2993d;let _0x2f53fe=formatResultString(_0x2eecc3,0xa),_0x5c4300=_0x2f53fe[_0xaf1598(0x164)]('.');return _0x5c4300!=-0x1&&(_0x2f53fe=_0x2f53fe['slice'](0x0,_0x5c4300+_0x23618c+0x1)),Number(_0x2f53fe);}function formatResultString(_0xe5ec96,_0x296279){const _0xc113a4=_0xc2993d;let _0x4bbcf9;if(!(''+_0xe5ec96)[_0xc113a4(0x1e3)]('e'))_0x4bbcf9=+(Math[_0xc113a4(0x183)](_0xe5ec96+'e+'+_0x296279)+'e-'+_0x296279);else{let _0x1f1507=(''+_0xe5ec96)[_0xc113a4(0x170)]('e'),_0x2bd181='';+_0x1f1507[0x1]+_0x296279>0x0&&(_0x2bd181='+'),_0x4bbcf9=+(Math['round'](+_0x1f1507[0x0]+'e'+_0x2bd181+(+_0x1f1507[0x1]+_0x296279))+'e-'+_0x296279);}return Number(_0x4bbcf9)[_0xc113a4(0x206)](_0x296279);}function getServerTime(){const _0x209a8c=_0xc2993d,_0x1a0a99=new Date();return _0x1a0a99[_0x209a8c(0x1e4)]()+'/'+(_0x1a0a99[_0x209a8c(0x270)]()+0x1)[_0x209a8c(0x291)]()[_0x209a8c(0x132)](0x2,'0')+'/'+_0x1a0a99['getDate']()[_0x209a8c(0x291)]()['padStart'](0x2,'0')+'\x20'+_0x1a0a99[_0x209a8c(0x22c)]()[_0x209a8c(0x291)]()[_0x209a8c(0x132)](0x2,'0')+':'+_0x1a0a99['getMinutes']()['toString']()[_0x209a8c(0x132)](0x2,'0')+':'+_0x1a0a99[_0x209a8c(0x130)]()[_0x209a8c(0x291)]()[_0x209a8c(0x132)](0x2,'0');}function getTimeStamp(){const _0x144026=_0xc2993d,_0x9d97d=shiftedTime();return _0x9d97d['getFullYear']()+'/'+(_0x9d97d[_0x144026(0x270)]()+0x1)[_0x144026(0x291)]()[_0x144026(0x132)](0x2,'0')+'/'+_0x9d97d[_0x144026(0x28b)]()[_0x144026(0x291)]()[_0x144026(0x132)](0x2,'0')+'\x20'+_0x9d97d[_0x144026(0x22c)]()[_0x144026(0x291)]()['padStart'](0x2,'0')+':'+_0x9d97d[_0x144026(0x1a6)]()[_0x144026(0x291)]()[_0x144026(0x132)](0x2,'0')+':'+_0x9d97d[_0x144026(0x130)]()[_0x144026(0x291)]()[_0x144026(0x132)](0x2,'0');}function getDate(){const _0x3c9601=_0xc2993d,_0x16a328=shiftedTime();return _0x16a328[_0x3c9601(0x1e4)]()+'/'+(_0x16a328[_0x3c9601(0x270)]()+0x1)[_0x3c9601(0x291)]()['padStart'](0x2,'0')+'/'+_0x16a328[_0x3c9601(0x28b)]()['toString']()[_0x3c9601(0x132)](0x2,'0');}function getHour(){const _0x172799=_0xc2993d,_0x4aeeec=shiftedTime();return _0x4aeeec[_0x172799(0x22c)]()['toString']()[_0x172799(0x132)](0x2,'0');}function sleep(_0x1035ac){return new Promise(_0x2fbf3f=>setTimeout(_0x2fbf3f,_0x1035ac));}function shiftedTime(){const _0x52bcb4=_0xc2993d,_0x22fda7=new Date();let _0x5b8b82=_0x22fda7;if(config&&config[_0x52bcb4(0x211)]!==0x0)_0x5b8b82=fns['add'](_0x22fda7,{'hours':config['timeshift']});return _0x5b8b82;}function timer(_0x442489){const _0x588e6b=_0xc2993d,_0x3d14d0=new Date();!lasttime?console[_0x588e6b(0x225)](getTimeStamp()+':\x20timer\x20>',_0x442489,_0x3d14d0):console[_0x588e6b(0x225)](getTimeStamp()+':\x20timer\x20>',_0x442489,(_0x3d14d0-lasttime)/0x3e8),lasttime=_0x3d14d0;}