const _0x278096=_0x30df;(function(_0x5294e7,_0x44c0b8){const _0x2e975a=_0x30df,_0x1742fe=_0x5294e7();while(!![]){try{const _0x16173f=parseInt(_0x2e975a(0x1ed))/0x1*(parseInt(_0x2e975a(0x24a))/0x2)+parseInt(_0x2e975a(0x20c))/0x3+-parseInt(_0x2e975a(0x2f9))/0x4*(-parseInt(_0x2e975a(0x278))/0x5)+parseInt(_0x2e975a(0x26c))/0x6*(parseInt(_0x2e975a(0x25a))/0x7)+-parseInt(_0x2e975a(0x1fb))/0x8+parseInt(_0x2e975a(0x26e))/0x9*(parseInt(_0x2e975a(0x240))/0xa)+-parseInt(_0x2e975a(0x24b))/0xb;if(_0x16173f===_0x44c0b8)break;else _0x1742fe['push'](_0x1742fe['shift']());}catch(_0x170775){_0x1742fe['push'](_0x1742fe['shift']());}}}(_0x338a,0x76925));const _0x5155a0=function(){let _0x5c62f9=!![];return function(_0x5547d5,_0x1f953a){const _0x33ad01=_0x5c62f9?function(){const _0x495eb2=_0x30df;if(_0x1f953a){const _0x11ca3f=_0x1f953a[_0x495eb2(0x29e)](_0x5547d5,arguments);return _0x1f953a=null,_0x11ca3f;}}:function(){};return _0x5c62f9=![],_0x33ad01;};}(),_0x29fc67=_0x5155a0(this,function(){const _0x2de2b2=_0x30df;return _0x29fc67[_0x2de2b2(0x31d)]()['search'](_0x2de2b2(0x322))[_0x2de2b2(0x31d)]()[_0x2de2b2(0x2a5)](_0x29fc67)[_0x2de2b2(0x222)]('(((.+)+)+)+$');});_0x29fc67();'use strict';const ccxt=require(_0x278096(0x253)),low=require(_0x278096(0x22e)),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require('date-fns'),forge=require(_0x278096(0x2eb)),util=require('util'),argv=require(_0x278096(0x309))(process['argv']['slice'](0x2))['argv'],path=require('path'),axios=require(_0x278096(0x2c0));let exchange,gTicker={},gChange={};const usdBasecoins=[_0x278096(0x17e),'BUSD',_0x278096(0x21e),_0x278096(0x273),'USDC',_0x278096(0x263)],excludedExchanges=['bitmex'],debugging=argv['d']||![];let pnlGenerationNeeded=argv['r']||![],config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x278096(0x238)]({'LOCKED':0x0,'UNLOCKING':0x1,'UNLOCKED':0x2});let lockOrders=ORDERS[_0x278096(0x25b)],validateOrdersState,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotIntervalShort=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg='\x20>\x20pausing\x20bot\x20for\x20'+pauseBotInterval/0xea60+_0x278096(0x2c5),maxPauseRetries=0x6,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,watchTransactionsInterval=0x3c*0x3e8,schedulerInterval=0x3c*0x3c*0x3e8,retryInterval=0x3e8,maxRetries=0x5,logPageSize=0x14,defaultFee=0.003;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidOrdersInitialTimeout,pidOrdersTimeout,botPaused=![],transactionDetectionOngoing=![],lastCoinsToBalance='',exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x5dc,balanceUpdateRetries=0x5;let enableFiatToggle;const serverversion=require('./version.json')['version'],environment=require(_0x278096(0x2cd))[_0x278096(0x15e)]||_0x278096(0x25c),botID=process[_0x278096(0x2b0)][0x2]||'001',pattern=/^[0-9]{3}$/;!pattern[_0x278096(0x1e9)](botID)&&(console[_0x278096(0x320)]('Error:\x20Invalid\x20argument\x20'+botID+_0x278096(0x2dd)),killBot());const userID=process[_0x278096(0x2b0)][0x3]||'',configpath=userID?_0x278096(0x335)+userID+'/':_0x278096(0x335),logspath=userID?'./logs/'+userID+'/':_0x278096(0x297),loggerfile=fs['createWriteStream'](logspath+'/output-000.log',{'flags':'a'});!fs['existsSync'](configpath)&&fs[_0x278096(0x26a)](configpath);!fs[_0x278096(0x1cc)](logspath)&&fs['mkdirSync'](logspath);const configfile=configpath+'bot-'+botID+_0x278096(0x23f),logfile=configpath+_0x278096(0x2fe)+botID+_0x278096(0x2db),performancefile=configpath+'bot-'+botID+'-performance.json',coinresultsfile=configpath+_0x278096(0x2fe)+botID+'-results.json',settingsfile=configpath+'bb-settings.json',securefile=configpath+_0x278096(0x174),configbackuppath=configpath+'/backup/',adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x278096(0x1f0)]({'logs':[],'version':serverversion})['write']();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance['defaults']({'data':[],'version':serverversion})[_0x278096(0x2e7)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x278096(0x1f0)]({'bot':[],'version':serverversion})[_0x278096(0x2e7)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x278096(0x1f0)]({'coins':{},'version':serverversion})[_0x278096(0x2e7)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0,settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x130e92=>{const _0x30f7df=_0x278096;console[_0x30f7df(0x320)](_0x130e92);},'simple':_0x5e446f=>{const _0x28552a=_0x278096;console[_0x28552a(0x320)](_0x5e446f),loggerfile[_0x28552a(0x2e7)](util[_0x28552a(0x167)](_0x5e446f)+'\x0a');},'full':async(_0x5d1f5c,_0x50eb51='')=>{const _0x575ca7=_0x278096;let _0x34db54;if(config['showname'])_0x34db54=getTimeStamp()+':\x20'+config[_0x575ca7(0x179)]+_0x575ca7(0x19a)+_0x5d1f5c;else _0x34db54=getTimeStamp()+':\x20Bot\x20'+botID+_0x575ca7(0x19a)+_0x5d1f5c;console[_0x575ca7(0x320)](_0x34db54),loggerfile[_0x575ca7(0x2e7)](util[_0x575ca7(0x167)](_0x34db54)+'\x0a'),_0x50eb51&&(console[_0x575ca7(0x320)](_0x50eb51),loggerfile[_0x575ca7(0x2e7)](util['format'](_0x50eb51)+'\x0a'));},'debug':async(_0x4be86d,_0x331c33='')=>{const _0x4c7872=_0x278096;let _0x1373fa;if(config[_0x4c7872(0x302)])_0x1373fa=getTimeStamp()+':\x20'+config[_0x4c7872(0x179)]+_0x4c7872(0x200)+_0x4be86d;else _0x1373fa=getTimeStamp()+_0x4c7872(0x29c)+botID+'\x20>\x20[DEBUG]\x20'+_0x4be86d;if(debugging)console[_0x4c7872(0x320)](_0x1373fa);loggerfile[_0x4c7872(0x2e7)](util[_0x4c7872(0x167)](_0x1373fa)+'\x0a');if(_0x331c33){if(debugging)console[_0x4c7872(0x320)](_0x331c33);loggerfile['write'](util[_0x4c7872(0x167)](_0x331c33)+'\x0a');}}};function _0x338a(){const _0xe4053c=['\x20blocked\x20API\x20(DDoSProtection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','coin','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','coin-loading-progress','ETH','MIN_NOTIONAL','abs','RETRY\x20-\x20Problem\x20resolved\x20after\x20','amountToPrecision','number','process\x20','Huobipro','Unfilled\x20order(s)\x20could\x20not\x20be\x20canceled\x20after\x20','valid','Waited\x20','\x20>\x20','0\x20-\x20EXECUTION:\x20','Headless:\x20','Unfilled\x20order(s)\x20canceled\x20after\x20','ordertype','fetchTickers','Avoiding\x20continuous\x20order\x20attempts','Valid\x20balance\x20for\x20','splice','average','pro','round','deleteHistoryAlerts','Will\x20continue\x20to\x20wait\x20for\x20order(s)\x20to\x20be\x20filled\x20and\x20try\x20to\x20cancel\x20again\x20later','closed','loadSymbols()','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','substring','openOrders','getMonth','\x20closed\x20the\x20connection\x20(see:\x20hodlerhacks.com/fix/5)','limit-low','add','\x20network\x20error:\x20','kill','PAXG','parse','</pre>','Net\x20','getMinutes','botID','2.7.1','sqrt','cloneDeep','Error\x20in\x20testNewAPI():\x20','getSeconds','length','change','Manual\x20balancing\x20required','OnMaintenance','Failed\x20to\x20load\x20market\x20data\x20-\x20bot\x20not\x20started','market','Huobi','spot','staging','message','get','amount','getTime','Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)','existsSync','enabled','marketcapApi','coins','page','basecoin','sendPortfolioTelegram','performance','\x20orders\x20in\x20less\x20than\x20','\x20has\x20a\x2024h\x20drop\x20of\x20','canceled','decrypt','\x20minutes\x20-\x20','\x20portfolio:</b>\x20\x0a\x0a','code','currency','split','entries','Unknown\x20error:\x20','pnl','pnl-basecoin','assign','1\x20-\x20FILLED\x20known\x20order:\x20','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','Invalid\x20API\x20details,\x20please\x20try\x20again\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','<pre>','\x20|\x20','ExchangeNotAvailable','getStartingBalances','test','order','\x20order:\x20','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','4334ynkvhe','Portfolio\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','fetchTicker','defaults','netoffset','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','UNLOCKING','has','fiat','quick','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','DDoSProtection','replace','Error\x20while\x20deleting\x20files:\x20','4424440nnVHgL','Loading\x20completed','indexOf','debug',')\x20|\x20exchange:\x20','\x20>\x20[DEBUG]\x20','Limit\x20(low-margin)','restart','fetchOpenOrders','warning','sell','changes','Fee\x20discount\x20refund\x20detected:\x20','Network\x20error\x20details:','function','addDays','\x20blocked\x20API\x20(RateLimitExceeded)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','1266222gIBBxq','Exception\x20thrown\x20in\x20','getPortfolio','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','Initializing\x20coin\x20results','2\x20-\x20handling\x20FILLED\x20order:\x20','Trigger:\x20','uncaughtException','RSA-OAEP','isEqual','InsufficientFunds','data','cost','map','toFixed','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','ongoing','heapUsed','TUSD','args','\x20|\x20Custom\x20ID:\x20','Market\x20order','search','apiKey','Resetting\x20coin\x20results:\x20','Placing\x20order\x20for:\x20','liquidity','filled','settings','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','distribution','usd','active','exchange\x20reload','lowdb','\x20uses\x20','Executed\x20','configuration','portfolio','configuration-stored','setSandboxMode','type','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','slider','freeze','privateKey','loadMarkets','breakeven','\x20metrics:</b>\x20\x0a\x0a','event-history','fetchBalance()','-config.json','151660NjmCAz','pnl-fiat','Portfolio\x20change\x20detected:\x20','random','BTC','final','<b>Bot\x20','marketcapsqrt','%\x20(','push','254JAJfpO','8744813HhLPik','getFullYear','Unknown\x20error\x20-\x20check\x20logs','API-key\x20format\x20invalid','slice','cancel','differenceInSeconds','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','ccxt','-results.json','send','colorscheme','2.6.22','toggleBotMode','cancelOrder','70QJPaNt','UNLOCKED','production','startnumber','\x20attempts','\x20/\x20','exchanges','set','secret','USDP','balancing\x20resumes\x20when\x20cooldown\x20ends','bots','offset','complete','trade','\x20>\x20stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','mkdirSync','watchTradesForSymbols','151932TirANV','min','333giRnqF','PermissionDenied','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','cancelOrders()','Bot\x20','USDT','loading-canceled','\x20|\x20highest\x20fee:\x20','isBefore','toUpperCase','234265oIknKb','forEach','\x20-\x20','1\x20-\x20FILLED\x20unknown\x20order:\x20','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','limits','\x0aSymbol(s):\x20','none','autoliquidity','Cex','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20trying\x20again\x20in\x20','Value\x20','\x20|\x20lock\x20orders:\x20','2\x20-\x20Handled\x20open\x20orders','sandbox',')\x20unknown\x20order:\x20','sort','fromCodePoint','************','watchTrades','keys','limit','side','marketcap','time','\x20API\x20secret\x20is\x20invalid','Order\x20filled','\x20exchange\x20error:\x20','\x20API\x20key,\x20secret\x20or\x20password\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','Resetting\x20bot\x20history','fetchTickers()','./logs/','onepagemode','update-liquidity','no\x20exchange\x20reloaded','ExchangeError',':\x20Bot\x20','Bitget','apply','price','Order\x20amount\x20is\x20invalid:\x20','fee','buy','AuthenticationError','value','constructor','basecoinvalue','watchOrders','cooldown','Generated\x20PnL\x20data','last','timestamp','startdate','Binance','filter','date','argv','startprice','limit-high','timestamp-issue','shift','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','Initiating\x20bot\x20restart','Error\x20in\x20loadSymbols():\x20','Error\x20details:','2.6.23','<b>','Reset\x20|\x20','emojibuy','highest','\x20API\x20key\x20is\x20invalid','orderId','axios','-performance.json','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)','find','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','\x20minutes','event','create','\x20not\x20responding\x20(see:\x20hodlerhacks.com/fix/5)','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','starting-balances','No\x20more\x20open\x20orders\x20-\x20','Order(s)\x20not\x20validated\x20after\x20','./version.json','ask','\x20-\x20bot\x20not\x20started','Pausing\x20for\x20','-------------------------------\x0a','\x20-\x20bot\x20switched\x20to\x20manual\x20mode','floor','recent20','bot','apiPassword','logs','initial','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20for\x20','watchTrades()','-events.json','excluded',',\x20must\x20be\x20a\x203\x20digit\x20number','success','balancing\x20resumed','portfolio1','decode64','emitHistory','reverse','join','full','Saving\x20configuration','write','open','marketcapEnabled','EUR','node-forge','total','/USD','api-issue','.json','fetchBalance','createOrder','portfolio2','2\x20-\x20Validate\x20orders:\x20','Generating\x20PnL\x20data','Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute','toLowerCase','symbol','headless','4hAtymT','Block\x20transaction\x20detection:\x20','must\x20be\x20greater\x20than\x20minimum\x20amount','getHours','getDate','bot-','PnL\x20','util','progress','showname','Cooldown\x20ended\x20-\x20balancing\x20resumed','remove','delta','/USDT','net','removed','yargs/yargs','change24h','Invalid\x20quantity','buys','emojisell','pop','Bybit','orderstatus','quote','initclient','added','version','eur','net-fiat','\x20exchange','password',')\x20known\x20order:\x20','timeshift','error','starting-balance-','toString','Insufficient\x20funds\x20to\x20execute\x20order:\x20','1\x20-\x20partially\x20FILLED\x20(','log','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','(((.+)+)+)+$','cancelLoading','prevnumber','***','Exchange','Invalid\x20balance\x20for\x20','no\x20open\x20orders','sha256','threshold','red_yellow_blue','timeout','balances','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','stringify','testApi','market_cap','running','LOCKED','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','./config/','2.3.5','enableFiatToggle','padEnd','environment','Initializing\x20exchange:\x20already\x20done','pki','testAPI()','unlinkSync','remainingSymbols','apiSecret','OrderNotFound','Market','format','exchange','percentage','Invalid\x20symbol:\x20','\x20not\x20available\x20(see:\x20hodlerhacks.com/fix/5)','placeOrder()','includes','\x20>\x20details:','string','status','\x20MB','target','NetworkError','bb-secure.json','%)\x0a',':\x20timer\x20>','configstate','Limit\x20(high-margin)','botname','\x20(see:\x20hodlerhacks.com/fix/1)','findIndex','initTickers()','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','USD','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','Failed\x20to\x20load\x20coin\x20data\x20for\x20','net-basecoin','realizedPnL','sortBy','2.6.0','max','yyyy/MM/dd','Initializing\x20exchange','padStart','status\x20code\x20401'];_0x338a=function(){return _0xe4053c;};return _0x338a();}process['on'](_0x278096(0x213),function(_0x1f3466){const _0x531144=_0x278096;handleError(_0x1f3466['stack'],_0x531144(0x213));});settings['timeshift']!=config[_0x278096(0x31a)]&&updateTimeshift(settings['timeshift']);settings[_0x278096(0x298)]!=config[_0x278096(0x298)]&&updateOnepagemode(settings[_0x278096(0x298)]);(settings[_0x278096(0x1ce)]&&!config[_0x278096(0x1ce)]||!settings[_0x278096(0x1ce)]&&config[_0x278096(0x1ce)])&&updateMarketcapApi(settings[_0x278096(0x1ce)]);process[_0x278096(0x255)]({'started':_0x278096(0x332)},_0x5456ae=>{}),initializeProcessListeners();function proxyEmit(_0xd844fd,_0x57e12c=null){const _0x3091c7=_0x278096;process[_0x3091c7(0x255)]({'function':_0xd844fd,'args':_0x57e12c},_0xc62221=>{});}function initializeProcessListeners(){const _0x6fd0e3=_0x278096;process['on'](_0x6fd0e3(0x1c7),_0xa7a873=>{const _0x3688d9=_0x6fd0e3;switch(Object[_0x3688d9(0x28c)](_0xa7a873)[0x0]){case _0x3688d9(0x31a):_0xa7a873[_0x3688d9(0x31a)]!=undefined&&(settings[_0x3688d9(0x31a)]=_0xa7a873[_0x3688d9(0x31a)],updateTimeshift(settings[_0x3688d9(0x31a)]));break;case _0x3688d9(0x298):_0xa7a873[_0x3688d9(0x298)]!=undefined&&(settings[_0x3688d9(0x298)]=_0xa7a873[_0x3688d9(0x298)],updateOnepagemode(settings[_0x3688d9(0x298)]));break;case _0x3688d9(0x1ce):_0xa7a873[_0x3688d9(0x1ce)]!=undefined&&(settings[_0x3688d9(0x1ce)]=_0xa7a873[_0x3688d9(0x1ce)],updateMarketcapApi(settings[_0x3688d9(0x1ce)]));break;case _0x3688d9(0x265):_0xa7a873[_0x3688d9(0x265)]!=undefined&&(bots=JSON[_0x3688d9(0x1b4)](_0xa7a873[_0x3688d9(0x265)]),proxyEmit('bots',bots));break;case _0x3688d9(0x209):switch(_0xa7a873[_0x3688d9(0x209)]){case _0x3688d9(0x312):initclient();break;case _0x3688d9(0x258):toggleBotMode();break;case _0x3688d9(0x2e2):emitHistory(_0xa7a873[_0x3688d9(0x21f)]);break;case _0x3688d9(0x1a6):deleteHistoryAlerts(_0xa7a873[_0x3688d9(0x21f)]);break;case _0x3688d9(0x20e):getPortfolio(_0xa7a873[_0x3688d9(0x21f)]);break;case'storeConfiguration':storeConfiguration(_0xa7a873[_0x3688d9(0x21f)]);break;case'storeHeadless':storeHeadless(_0xa7a873['args']);break;case'storeFiat':storeFiat(_0xa7a873['args']);break;case'resetHistory':resetHistory();break;case _0x3688d9(0x1e8):getStartingBalances(getNormalizedPerformance());break;case'placeOrder':placeOrder(_0xa7a873[_0x3688d9(0x21f)]);break;case _0x3688d9(0x323):cancelLoading();break;case'showConfig':showConfig();break;case'sendMetricsTelegram':sendMetricsTelegram();break;case _0x3688d9(0x1d2):sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0xe06e65=![]){const _0x127363=_0x278096;logger[_0x127363(0x1fe)](_0x127363(0x2bb)+(_0xe06e65?_0x127363(0x22d):_0x127363(0x29a))+'\x20|\x20exchange:\x20'+config['exchange']);if(pidBalances)clearTimeout(pidBalances);if(!_0xe06e65)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x127363(0x223)]!=''&&config[_0x127363(0x223)]!=_0x127363(0x325)){loadingProgress=0x0;if(_0xe06e65){await initExchange();const _0x3605c4=await testAPI();if(!_0x3605c4)return;await loadSymbols(),loadingProgress=0x1,setStableCoins(),proxyEmit(_0x127363(0x231),emittedConfiguration()),initialPerformanceStored=![];}const _0x98690e=await getCoins();[currentCoins,currentCoinsAll]=_0x98690e,setBlockTransactionDetection(![]),startScheduler(),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger['debug']('Loading\x20completed'),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x127363(0x1be)]==0x0&&allOpenOrders[_0x127363(0x1be)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(pnlGenerationNeeded)await generatePnL();}}async function resumeBot(_0x137bac=![]){const _0x48115e=_0x278096;logger['debug']('Resuming\x20('+(_0x137bac?_0x48115e(0x1f6):_0x48115e(0x267))+_0x48115e(0x1ff)+config['exchange']);if(pidBalances)clearTimeout(pidBalances);if(_0x137bac){getBalances();return;}coinsLoaded=![];if(config[_0x48115e(0x223)]!=''&&config[_0x48115e(0x223)]!='***'){loadingProgress=0x1;const _0x334816=await getCoins();[currentCoins,currentCoinsAll]=_0x334816,setBlockTransactionDetection(![]),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x48115e(0x1fe)](_0x48115e(0x1fc)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x48115e(0x1be)]==0x0&&allOpenOrders['length']!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();}}async function getMarketCap(_0x10c151){const _0x295581=_0x278096;let _0x42281b=![];if(_0x10c151)_0x42281b=!![];const _0x2b0cc1=_0x42281b?_0x10c151:currentCoins,_0xad8691=_0x2b0cc1[_0x295581(0x219)](_0x8fc8ac=>_0x8fc8ac['coin']);if(!config[_0x295581(0x1ce)]||!_0x42281b&&!config[_0x295581(0x2e9)]||_0xad8691[_0x295581(0x1be)]==0x0)return;let _0x661fe5=null;try{_0x661fe5=await axios[_0x295581(0x1c8)](_0x295581(0x17d),{'headers':{'X-CMC_PRO_API_KEY':settings[_0x295581(0x1ce)]},'params':{'symbol':_0xad8691[_0x295581(0x31d)]()}});}catch(_0x5199dc){_0x661fe5=null,_0x5199dc[_0x295581(0x31d)]()[_0x295581(0x16d)](_0x295581(0x18a))?(config['marketcapApi']=![],updateConfig(),proxyEmit(_0x295581(0x231),emittedConfiguration()),logHistory(_0x295581(0x31b),_0x295581(0x20f))):(logHistory(_0x295581(0x31b),_0x295581(0x282)+schedulerInterval/(0x3c*0x3e8)+'\x20minutes'),logger[_0x295581(0x1fe)]('Error\x20details:',_0x5199dc[_0x295581(0x31d)]()+_0x295581(0x27a)+_0x5199dc[_0x295581(0x1da)]));}let _0x315a0f=!![];if(_0x661fe5){let _0x27527d=0x0;const _0x1f4600=_0x661fe5[_0x295581(0x217)];_0xad8691['forEach'](_0x49779f=>{const _0x4feb2a=_0x295581;if(_0x1f4600[_0x4feb2a(0x217)][_0x49779f][0x0]&&_0x1f4600[_0x4feb2a(0x217)][_0x49779f][0x0]['quote']['USD']['market_cap'])_0x27527d+=_0x1f4600[_0x4feb2a(0x217)][_0x49779f][0x0]['quote']['USD']['market_cap'];else{if(![_0x4feb2a(0x2ea),_0x4feb2a(0x17e)][_0x4feb2a(0x16d)](_0x49779f)){if(_0x42281b)logHistory(_0x4feb2a(0x31b),_0x4feb2a(0x2d9)+_0x49779f+'\x20-\x20go\x20back\x20and\x20try\x20again');else{const _0x2275aa=config['portfolio'][_0x4feb2a(0x2c3)](_0x55bef1=>_0x55bef1['coin']==_0x49779f);_0x2275aa&&!_0x2275aa[_0x4feb2a(0x2dc)]&&_0x2275aa['slider']==-0x1&&(_0x315a0f=![],logHistory(_0x4feb2a(0x31b),'CoinMarketCap\x20data\x20could\x20not\x20be\x20updated\x20-\x20will\x20try\x20again\x20in\x201\x20hour'),logger['debug'](_0x4feb2a(0x2d9)+_0x49779f));}}}});if(!_0x315a0f)return;_0xad8691[_0x295581(0x279)](_0x566154=>{const _0x4a29c8=_0x295581,_0xf546bf=_0x1f4600[_0x4a29c8(0x217)][_0x566154][0x0]?_0x1f4600[_0x4a29c8(0x217)][_0x566154][0x0][_0x4a29c8(0x311)]['USD'][_0x4a29c8(0x331)]:0x0;if(_0x42281b){const _0x15ec0e=_0x10c151[_0x4a29c8(0x2c3)](_0x3005e1=>_0x3005e1[_0x4a29c8(0x18c)]==_0x566154);_0x15ec0e&&(_0x15ec0e['marketcap']=_0xf546bf);}else{const _0x403865=currentCoins['find'](_0x2563ac=>_0x2563ac[_0x4a29c8(0x18c)]==_0x566154);_0x403865&&(_0x403865[_0x4a29c8(0x28f)]=_0xf546bf);const _0xbce9b9=currentCoinsAll[_0x4a29c8(0x2c3)](_0x388b38=>_0x388b38[_0x4a29c8(0x18c)]==_0x566154);_0xbce9b9&&(_0xbce9b9[_0x4a29c8(0x28f)]=_0xf546bf);}}),!_0x42281b&&updateTargetDistribution();}}function updateTargetDistribution(){const _0x54889e=_0x278096,_0x3118ab=0x2;let _0x1c0b50=0x0,_0x3bcd51=0x0,_0x130a35=0x0,_0x116f1c=0x0,_0x4a9599=0x0;config[_0x54889e(0x232)][_0x54889e(0x279)](_0x114e07=>{const _0x444409=_0x54889e;if(!_0x114e07[_0x444409(0x2dc)]){_0x130a35++,_0x1c0b50+=_0x114e07[_0x444409(0x237)];if(_0x114e07['slider']===-0x1){_0x1c0b50++;const _0x1827c9=currentCoinsAll[_0x444409(0x2c3)](_0x34d402=>_0x34d402[_0x444409(0x18c)]==_0x114e07['coin']);_0x1827c9&&(_0x116f1c+=_0x1827c9['marketcap'],_0x4a9599+=Math['sqrt'](_0x1827c9[_0x444409(0x28f)]));}if(_0x114e07[_0x444409(0x237)]!==-0x1)_0x3bcd51++;}});let _0x50d6cc;const _0x39ac9a=0x64-_0x1c0b50,_0x5c364a=_0x130a35-_0x3bcd51;_0x50d6cc=_0x5c364a===0x0?_0x1c0b50:Math['max'](0x64,_0x1c0b50),config[_0x54889e(0x232)][_0x54889e(0x279)](_0x29b909=>{const _0x39dc54=_0x54889e,_0x2e19a6=currentCoinsAll[_0x39dc54(0x2c3)](_0x298489=>_0x298489[_0x39dc54(0x18c)]==_0x29b909[_0x39dc54(0x18c)]);_0x2e19a6&&(_0x29b909[_0x39dc54(0x28f)]=_0x2e19a6[_0x39dc54(0x28f)]);if(!_0x29b909[_0x39dc54(0x2dc)]){if(_0x50d6cc<=0x64){if(_0x29b909['slider']===-0x1){if(_0x116f1c!==0x0&&config[_0x39dc54(0x2e9)]){if(_0x2e19a6){if(config[_0x39dc54(0x2e9)]==_0x39dc54(0x28f))_0x29b909[_0x39dc54(0x22a)]=(_0x39ac9a/(_0x116f1c/_0x2e19a6['marketcap']))[_0x39dc54(0x21a)](_0x3118ab);else config[_0x39dc54(0x2e9)]==_0x39dc54(0x247)&&(_0x29b909['distribution']=(_0x39ac9a/(_0x4a9599/Math[_0x39dc54(0x1ba)](_0x2e19a6[_0x39dc54(0x28f)])))[_0x39dc54(0x21a)](_0x3118ab));}}}}}}),updateConfig();}function updateConfig(){const _0x536fe8=_0x278096;let _0x29fb74=dbConfig['get']('bot')['find']({'botID':botID})[_0x536fe8(0x2a4)]();_0x29fb74&&dbConfig[_0x536fe8(0x1c8)]('bot')[_0x536fe8(0x2c3)]({'botID':botID})[_0x536fe8(0x1e1)](config)[_0x536fe8(0x2e7)]();}function logMemory(){const _0x493618=_0x278096;if(environment!=_0x493618(0x1c6))return;const _0x202021=process['memoryUsage']()[_0x493618(0x21d)]/0x400/0x400;logger[_0x493618(0x1fe)](_0x493618(0x195)+process['pid']+_0x493618(0x22f)+formatResult(_0x202021,0x1)+_0x493618(0x171));}async function startScheduler(){const _0x329946=_0x278096,_0x167971=shiftedTime()[_0x329946(0x2fc)]();getMarketCap(),loadSymbols(),_0x167971==0x1&&logMemory(),await sleep(schedulerInterval),startScheduler();}async function restartBot(_0x531024=![]){const _0x52643a=_0x278096;logger[_0x52643a(0x1fe)](_0x52643a(0x2b6));if(!_0x531024)while(lockOrders!=ORDERS[_0x52643a(0x25b)]||coolingDown){await sleep(0x3e8);}process['send']({'stop':_0x52643a(0x202)},_0x2b9415=>{});}async function initExchange(_0x4f9e2d=config[_0x278096(0x168)],_0x571233=config[_0x278096(0x223)],_0x589e46=config[_0x278096(0x164)],_0x43ff61=config['apiPassword'],_0x461db8=config[_0x278096(0x286)]){const _0x544e2d=_0x278096;if(exchange){logger[_0x544e2d(0x1fe)](_0x544e2d(0x15f));return;}logger['debug'](_0x544e2d(0x188));!supportedExchanges()[_0x544e2d(0x16d)](_0x4f9e2d)&&(logHistory('error','Balance\x20Bot\x20does\x20not\x20support\x20the\x20'+_0x4f9e2d+_0x544e2d(0x317)),killBot());const _0x116899=ccxt[_0x544e2d(0x1a4)][_0x4f9e2d['toLowerCase']()];exchange=new _0x116899({'apiKey':_0x571233,'secret':_0x589e46,'options':{'defaultType':_0x544e2d(0x1c5)}});if(_0x43ff61)exchange['password']=_0x43ff61;if(exchange[_0x544e2d(0x1f4)][_0x544e2d(0x286)])exchange[_0x544e2d(0x234)](_0x461db8);}function updateExchange(_0x2d6b9c,_0x1238be,_0x25d9b1=null){const _0x3bbceb=_0x278096;exchange[_0x3bbceb(0x223)]=_0x2d6b9c,exchange[_0x3bbceb(0x262)]=_0x1238be,exchange['password']=_0x25d9b1,logger[_0x3bbceb(0x1fe)]('Updating\x20API\x20key\x20(not\x20saved\x20in\x20config\x20file\x20yet)');}function setStableCoins(){const _0x41624d=_0x278096;let _0x32bd3d=config[_0x41624d(0x1d1)]==_0x41624d(0x18f)?_0x41624d(0x18f):config['basecoin']==_0x41624d(0x1b3)?_0x41624d(0x1b3):_0x41624d(0x244),_0x5e7e7d=allSymbols[_0x41624d(0x16d)](_0x32bd3d+_0x41624d(0x2ed))?'USD':allSymbols[_0x41624d(0x16d)](_0x32bd3d+_0x41624d(0x306))?'USDT':'EUR',_0x5ad7b1=allSymbols[_0x41624d(0x16d)](_0x32bd3d+'/EUR')?'EUR':_0x5e7e7d;enableFiatToggle=!![],_0x5e7e7d==_0x41624d(0x2ea)&&(enableFiatToggle=![],storeFiat(_0x41624d(0x2ea))),_0x5ad7b1!=_0x41624d(0x2ea)&&(enableFiatToggle=![],storeFiat(_0x41624d(0x17e))),stablecoins={'eur':{'coin':''+_0x32bd3d+_0x5ad7b1,'symbol':_0x32bd3d+'/'+_0x5ad7b1},'usd':{'coin':''+_0x32bd3d+_0x5e7e7d,'symbol':_0x32bd3d+'/'+_0x5e7e7d}};}async function initwsCcxt(){const _0x1eea36=_0x278096;initCycle++;const _0x9a0e42=initCycle;let _0x801d0d=[];config['portfolio']['forEach'](_0x2d51d8=>{const _0x1892b2=_0x30df;if(!_0x2d51d8['excluded']&&_0x2d51d8[_0x1892b2(0x18c)]!=config[_0x1892b2(0x1d1)])_0x801d0d[_0x1892b2(0x249)](_0x2d51d8[_0x1892b2(0x2f7)]);});if(!_0x801d0d[_0x1eea36(0x16d)](stablecoins[_0x1eea36(0x315)][_0x1eea36(0x2f7)]))_0x801d0d[_0x1eea36(0x249)](stablecoins[_0x1eea36(0x315)]['symbol']);if(!_0x801d0d[_0x1eea36(0x16d)](stablecoins[_0x1eea36(0x22b)][_0x1eea36(0x2f7)]))_0x801d0d[_0x1eea36(0x249)](stablecoins['usd']['symbol']);loadCoins(_0x801d0d),_0x801d0d=validateSymbols(_0x801d0d);const _0x5ef538=async _0x262917=>{const _0x5e21f5=_0x1eea36;let _0x1f2374;try{const _0x28b057=await getTickers(_0x262917);Object[_0x5e21f5(0x1dd)](_0x28b057)[_0x5e21f5(0x279)](_0x1c69ea=>{const _0x35b365=_0x5e21f5;_0x1f2374=_0x1c69ea[0x1][_0x35b365(0x2f7)],gTicker[noslash(_0x1f2374)]=_0x1c69ea[0x1][_0x35b365(0x2aa)],gChange[_0x1f2374]=_0x1c69ea[0x1]['percentage'];});}catch(_0x31f021){await handleError(_0x31f021,_0x5e21f5(0x17c),_0x1f2374);}},_0x74d3ee=async _0x8662be=>{const _0x332d12=_0x1eea36;while(initCycle==_0x9a0e42){if(!botPaused)try{const _0x463a92=await exchange[_0x332d12(0x28b)](_0x8662be);gTicker[noslash(_0x463a92[0x0][_0x332d12(0x2f7)])]=_0x463a92[0x0][_0x332d12(0x29f)];}catch(_0x2a336c){if(!exchangeStopped)await handleError(_0x2a336c,_0x332d12(0x2da),_0x8662be);}else await sleep(0x64);}},_0xc2305b=async _0x4442a3=>{const _0x230c9c=_0x1eea36;while(initCycle==_0x9a0e42){if(!botPaused)try{const _0x556e13=await exchange[_0x230c9c(0x26b)](_0x4442a3),_0x19f926=_0x556e13[_0x230c9c(0x30e)]();gTicker[noslash(_0x19f926['symbol'])]=_0x19f926['price'];}catch(_0x431f3f){if(!exchangeStopped)await handleError(_0x431f3f,'watchTradesForSymbols()',_0x4442a3[_0x230c9c(0x31d)]());}else await sleep(0x64);}},_0x47fda7=async _0x414a73=>{const _0x10036d=_0x1eea36;while(initCycle==_0x9a0e42){if(!botPaused){let _0x5e7d72;try{await sleep(0x3c*0x3e8);const _0x608a63=await getTickers(_0x414a73);Object['entries'](_0x608a63)[_0x10036d(0x279)](_0x26f99f=>{const _0x127fd5=_0x10036d;_0x5e7d72=_0x26f99f[0x1]['symbol'],gChange[_0x5e7d72]=_0x26f99f[0x1][_0x127fd5(0x169)];});}catch(_0x123b85){if(!exchangeStopped)await handleError(_0x123b85,_0x10036d(0x296),_0x5e7d72);}}else await sleep(0x64);}},_0x369dd8=async _0x21c940=>{const _0x311211=_0x1eea36;while(initCycle==_0x9a0e42){if(!botPaused)try{const _0x191fe7=await exchange[_0x311211(0x2a7)](_0x21c940);initCycle==_0x9a0e42&&_0x191fe7[_0x311211(0x279)](_0x512f45=>{updateNumberCoinsCcxt(_0x512f45);});}catch(_0x663d40){if(!exchangeStopped)await handleError(_0x663d40,'watchOrders()');}else await sleep(0x64);}};_0x5ef538(_0x801d0d),_0x47fda7(_0x801d0d),exchange['has'][_0x1eea36(0x26b)]&&!(config[_0x1eea36(0x168)]=='Bybit'&&_0x801d0d['length']>0xa)?_0xc2305b(_0x801d0d):_0x801d0d[_0x1eea36(0x279)](_0x4aebf0=>{_0x74d3ee(_0x4aebf0);}),_0x801d0d[_0x1eea36(0x279)](_0x41e470=>{_0x369dd8(_0x41e470);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x1abedb){const _0x99f2a2=_0x278096;let _0x34395c={};try{if(config[_0x99f2a2(0x168)]!='Cryptocom')_0x34395c=await exchange[_0x99f2a2(0x19f)](_0x1abedb);else for(const _0x50d865 of _0x1abedb){const _0x3f8986=await exchange[_0x99f2a2(0x1ef)](_0x50d865);_0x34395c[_0x50d865]=_0x3f8986;}return _0x34395c;}catch(_0x5247a6){throw _0x5247a6;}}function setBlockTransactionDetection(_0x5c5961){const _0x10af3d=_0x278096;blockTransactionDetection=_0x5c5961,logger[_0x10af3d(0x1fe)](_0x10af3d(0x2fa)+blockTransactionDetection);}async function detectLiquidityChange(_0x39b2ab=0x0){const _0x5091a6=_0x278096;transactionDetectionOngoing=!![];try{const _0x31a9f1=await getCoins(_0x39b2ab),[_0xb02a98,_0xcbc493]=_0x31a9f1;let _0x2927b6=[];currentCoins['forEach'](_0x3894c5=>{const _0x2e4b7c=_0x30df,_0x1d32aa=_0xb02a98[_0x2e4b7c(0x2c3)](_0x5defc2=>_0x5defc2[_0x2e4b7c(0x18c)]==_0x3894c5[_0x2e4b7c(0x18c)]);if(_0x1d32aa){if(_0x3894c5[_0x2e4b7c(0x194)]!=_0x1d32aa[_0x2e4b7c(0x194)]){let _0x4e37e3;if(_0x3894c5[_0x2e4b7c(0x18c)]!=config[_0x2e4b7c(0x1d1)]){const _0x3418bc=gTicker[noslash(_0x3894c5[_0x2e4b7c(0x2f7)])];_0x4e37e3=_0x3894c5[_0x2e4b7c(0x2e3)]?0x1/_0x3418bc:_0x3418bc;}else _0x4e37e3=0x1;_0x2927b6['push']({'coin':_0x3894c5[_0x2e4b7c(0x18c)],'symbol':_0x3894c5[_0x2e4b7c(0x2f7)],'price':_0x4e37e3,'number':Number(formatResult(_0x1d32aa[_0x2e4b7c(0x194)]-_0x3894c5[_0x2e4b7c(0x194)],0x8)),'basecoinvalue':_0x4e37e3*(_0x1d32aa[_0x2e4b7c(0x194)]-_0x3894c5['number'])});}}});if(_0x2927b6[_0x5091a6(0x1be)]>0x0&&!blockTransactionDetection){for(const _0x52e80f of _0x2927b6){if(config[_0x5091a6(0x280)]){logger[_0x5091a6(0x1fe)](_0x5091a6(0x17f)+_0x52e80f['basecoinvalue']+_0x5091a6(0x275)+lastFees[_0x5091a6(0x2bd)]);if(lastFees['highest']==0x0||Math['abs'](_0x52e80f[_0x5091a6(0x2a6)])>lastFees['highest']*0x3){if(config[_0x5091a6(0x280)]==_0x5091a6(0x299)){delete _0x52e80f['symbol'],delete _0x52e80f[_0x5091a6(0x2a6)];let _0x43e2e7=[],_0x4ca62b=[...config[_0x5091a6(0x226)]]||[],_0x301a8b=config[_0x5091a6(0x226)];_0x4ca62b[_0x5091a6(0x288)]((_0x2c8fc3,_0x2cdf4e)=>_0x2c8fc3[_0x5091a6(0x2af)]>_0x2cdf4e[_0x5091a6(0x2af)]?-0x1:_0x2cdf4e[_0x5091a6(0x2af)]>_0x2c8fc3[_0x5091a6(0x2af)]?0x1:0x0);const _0x3ffd53=getDate();if(_0x4ca62b[0x0]){const _0x56c71b=fns[_0x5091a6(0x1b4)](_0x4ca62b[0x0]['date'],_0x5091a6(0x187),new Date()),_0x50ad18=fns['parse'](_0x3ffd53,_0x5091a6(0x187),new Date());if(fns[_0x5091a6(0x215)](_0x56c71b,_0x50ad18)){_0x43e2e7=_0x4ca62b[0x0][_0x5091a6(0x206)];const _0x564e48=_0x43e2e7[_0x5091a6(0x2c3)](_0x26a6bb=>_0x26a6bb[_0x5091a6(0x18c)]==_0x52e80f[_0x5091a6(0x18c)]);_0x564e48?(_0x564e48[_0x5091a6(0x194)]+=_0x52e80f[_0x5091a6(0x194)],_0x564e48[_0x5091a6(0x194)]==0x0&&(_0x43e2e7=_0x43e2e7['filter'](_0x300184=>{const _0x535d3d=_0x5091a6;return _0x300184['coin']!=_0x52e80f[_0x535d3d(0x18c)];}))):_0x43e2e7[_0x5091a6(0x249)](_0x52e80f);const _0x421d22=_0x301a8b[_0x5091a6(0x2c3)](_0x1e082b=>_0x1e082b[_0x5091a6(0x2af)]==_0x3ffd53);_0x421d22[_0x5091a6(0x206)]=_0x43e2e7;}else _0x301a8b[_0x5091a6(0x249)]({'date':_0x3ffd53,'changes':[_0x52e80f]});}const _0x427900=_0x301a8b[_0x5091a6(0x2c3)](_0x3d9e07=>_0x3d9e07['date']==_0x3ffd53);if(_0x427900){let _0x4f8629=!![];_0x427900[_0x5091a6(0x206)][_0x5091a6(0x279)](_0x536357=>{const _0x10f795=_0x5091a6;if(_0x536357[_0x10f795(0x194)]!=0x0)_0x4f8629=![];}),_0x4f8629&&(_0x301a8b=_0x301a8b['filter'](_0x11e538=>{const _0x4e8a3f=_0x5091a6;return _0x11e538[_0x4e8a3f(0x2af)]!=_0x3ffd53;}));}let _0x561d5b=dbConfig[_0x5091a6(0x1c8)](_0x5091a6(0x2d5))[_0x5091a6(0x2c3)]({'botID':botID})[_0x5091a6(0x2a4)]();_0x561d5b&&(dbConfig[_0x5091a6(0x1c8)]('bot')[_0x5091a6(0x2c3)]({'botID':botID})[_0x5091a6(0x1e1)]({'liquidity':_0x301a8b})['write'](),config[_0x5091a6(0x226)]=_0x301a8b);logHistory(_0x5091a6(0x2de),_0x5091a6(0x242)+Math[_0x5091a6(0x191)](_0x52e80f[_0x5091a6(0x194)])+'\x20'+_0x52e80f[_0x5091a6(0x18c)]+'\x20'+(_0x52e80f['number']>0x0?_0x5091a6(0x313):'removed')+'\x20-\x20liquidity\x20settings\x20updated\x20accordingly'),proxyEmit(_0x5091a6(0x231),emittedConfiguration());const _0x3664b8=getNormalizedPerformance();emitPerformance(_0x3664b8),getStartingBalances(_0x3664b8),logger[_0x5091a6(0x1fe)](_0x5091a6(0x1ee));}else config['autoliquidity']=='switch-manual'&&(config['headless']?(await storeHeadless({'headless':![]}),logHistory(_0x5091a6(0x2de),'Portfolio\x20change\x20detected:\x20'+Math[_0x5091a6(0x191)](_0x52e80f[_0x5091a6(0x194)])+'\x20'+_0x52e80f[_0x5091a6(0x18c)]+'\x20'+(_0x52e80f[_0x5091a6(0x194)]>0x0?_0x5091a6(0x313):'removed')+_0x5091a6(0x2d2))):logger['debug'](_0x5091a6(0x242)+Math['abs'](_0x52e80f[_0x5091a6(0x194)])+'\x20'+_0x52e80f[_0x5091a6(0x18c)]+'\x20'+(_0x52e80f['number']>0x0?_0x5091a6(0x313):_0x5091a6(0x308))+'\x20-\x20bot\x20already\x20running\x20in\x20manual\x20mode'));}else logger[_0x5091a6(0x1fe)](_0x5091a6(0x207)+Math['abs'](_0x52e80f[_0x5091a6(0x194)])+'\x20'+_0x52e80f[_0x5091a6(0x18c)]+'\x20'+(_0x52e80f[_0x5091a6(0x194)]>0x0?_0x5091a6(0x313):_0x5091a6(0x308)));}else logger[_0x5091a6(0x1fe)](_0x5091a6(0x242)+Math[_0x5091a6(0x191)](_0x52e80f[_0x5091a6(0x194)])+'\x20'+_0x52e80f['coin']+'\x20'+(_0x52e80f[_0x5091a6(0x194)]>0x0?_0x5091a6(0x313):_0x5091a6(0x308))+'\x20-\x20auto\x20adjusting\x20liquidity\x20is\x20disabled');}currentCoins=_0xb02a98,currentCoinsAll=_0xcbc493;}}catch(_0x1a79a2){if(!exchangeStopped)await handleError(_0x1a79a2,'detectLiquidityChange()');}transactionDetectionOngoing=![];}async function watchTransactions(){await sleep(0x14*0x3e8);while(!![]){!botPaused&&!blockTransactionDetection&&coinsLoaded?(detectLiquidityChange(),await sleep(watchTransactionsInterval)):await sleep(0x3e8);}}async function loadSymbols(){const _0x38d8d0=_0x278096;try{markets=await exchange[_0x38d8d0(0x23a)](!![]),allSymbols=[],Object[_0x38d8d0(0x1dd)](markets)[_0x38d8d0(0x279)](_0x37d0f1=>{const _0x1dacf5=_0x38d8d0;_0x37d0f1[0x1][_0x1dacf5(0x22c)]&&_0x37d0f1[0x1][_0x1dacf5(0x1c5)]&&allSymbols[_0x1dacf5(0x249)](_0x37d0f1[0x0]);});}catch(_0x13ce53){markets?logger[_0x38d8d0(0x1fe)](_0x38d8d0(0x2b7)+_0x13ce53[_0x38d8d0(0x31d)]()):(loading[_0x38d8d0(0x250)]=!![],_0x13ce53[_0x38d8d0(0x31d)]()[_0x38d8d0(0x2f6)]()['includes']('timestamp')||_0x13ce53['toString']()[_0x38d8d0(0x2f6)]()[_0x38d8d0(0x16d)]('request-time')?(logHistory('error','Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)'),loading['error']=_0x38d8d0(0x2b3)):handleErrorNoStop(_0x13ce53,_0x38d8d0(0x1a9),!![]),logHistory(_0x38d8d0(0x31b),_0x38d8d0(0x1c2)),logHistory(_0x38d8d0(0x31b),_0x38d8d0(0x2d0)+loadCoinsRetryInterval/0xea60+_0x38d8d0(0x1e3)),logger[_0x38d8d0(0x1fe)](_0x38d8d0(0x2b8),_0x13ce53),emitLoadingProgress(),botPaused=!![],await sleep(loadCoinsRetryInterval),restartBot());}}function validateSymbols(_0x3c0fbc){const _0x15ec83=_0x278096;let _0x4f5449=[];return _0x3c0fbc[_0x15ec83(0x279)](_0x92f0ec=>{const _0x3710e0=_0x15ec83;!allSymbols[_0x3710e0(0x16d)](_0x92f0ec)?(logHistory('error',_0x3710e0(0x16a)+_0x92f0ec+_0x3710e0(0x236)),loading[_0x3710e0(0x32c)]=!![],emitLoadingProgress()):_0x4f5449[_0x3710e0(0x249)](_0x92f0ec);}),_0x4f5449;}async function initclient(){const _0x2a5866=_0x278096;proxyEmit(_0x2a5866(0x231),emittedConfiguration()),proxyEmit(_0x2a5866(0x260),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x5103d8=getNormalizedPerformance();emitPerformance(_0x5103d8),getStartingBalances(_0x5103d8);}async function toggleBotMode(){const _0x255210=_0x278096;let _0x376314=dbConfig[_0x255210(0x1c8)](_0x255210(0x2d5))['find']({'botID':botID})[_0x255210(0x2a4)]();if(_0x376314){const _0x5e60f6=!_0x376314[_0x255210(0x2f8)];dbConfig[_0x255210(0x1c8)](_0x255210(0x2d5))[_0x255210(0x2c3)]({'botID':botID})['assign']({'headless':_0x5e60f6})[_0x255210(0x2e7)](),config[_0x255210(0x2f8)]=_0x5e60f6,proxyEmit(_0x255210(0x231),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x50983a=_0x278096;process[_0x50983a(0x255)]({'updatebotmanager':!![]},_0x12e17b=>{}),logger['debug'](_0x50983a(0x19c)+config[_0x50983a(0x2f8)]);}async function loadCoins(_0xca3f17){const _0xcf380e=_0x278096;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x1507d2,_0x3514b8=0x0,_0x54ddb7=0x0;_0xca3f17['forEach'](_0xfd9e9e=>{const _0x1c8d8a=_0x30df;loading[_0x1c8d8a(0x163)][_0x1c8d8a(0x249)](_0xfd9e9e);}),loadingCanceled=![];let _0x195c5c=![];while(_0x1507d2!=_0xca3f17[_0xcf380e(0x1be)]+maxLoadingProgress){_0x1507d2=loadingProgress,_0xca3f17[_0xcf380e(0x279)](_0x3102e5=>{const _0x362f82=_0xcf380e;if(gTicker[noslash(_0x3102e5)]){loading['remainingSymbols']=loading[_0x362f82(0x163)][_0x362f82(0x2ae)](_0x52a7d2=>_0x52a7d2!=_0x3102e5);if(!watchedSymbols[_0x362f82(0x16d)](_0x3102e5))watchedSymbols[_0x362f82(0x249)](_0x3102e5);_0x1507d2++;}}),loading['progress']=Math[_0xcf380e(0x1a5)](_0x1507d2/(_0xca3f17['length']+maxLoadingProgress)*0x64);loading[_0xcf380e(0x301)]!=0x64&&(_0x54ddb7>0x1e*0x5&&(loading[_0xcf380e(0x32c)]=!![],emitLoadingProgress()),_0x54ddb7>0x78*0x5&&!_0x195c5c&&(_0x195c5c=!![],logHistory(_0xcf380e(0x31b),_0xcf380e(0x181)+loading[_0xcf380e(0x163)][_0xcf380e(0x2e4)](',\x20')+_0xcf380e(0x2cf)),logHistory(_0xcf380e(0x31b),'Pausing\x20for\x20'+loadCoinsRetryInterval/0xea60+_0xcf380e(0x1e3)),loadingCanceled=!![],await sleep(loadCoinsRetryInterval),restartBot()));if(loadingCanceled){loading[_0xcf380e(0x250)]=!![],emitLoadingProgress();break;}else _0x3514b8!=loading[_0xcf380e(0x301)]&&(_0x3514b8=loading[_0xcf380e(0x301)],emitLoadingProgress()),_0x54ddb7++,await sleep(0xc8);}_0x1507d2==_0xca3f17[_0xcf380e(0x1be)]+maxLoadingProgress&&(coinsLoaded=!![],process['send']({'status':_0xcf380e(0x1cd),'live':'running'},_0x5903a1=>{}),_0x195c5c&&logHistory(_0xcf380e(0x2de),_0xcf380e(0x321)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x4e10b3=_0x278096;proxyEmit('configuration',{...emittedConfiguration(),'configstate':_0x4e10b3(0x274)});}function emitLoadingProgress(){const _0x30af28=_0x278096;proxyEmit(_0x30af28(0x18e),loading);}async function getFiat(){const _0x1822bd=_0x278096;let _0x1a2633=gTicker[stablecoins[_0x1822bd(0x315)][_0x1822bd(0x18c)]],_0x5e3e43=gTicker[stablecoins[_0x1822bd(0x22b)][_0x1822bd(0x18c)]];return{'eur':Number(_0x1a2633),'usd':Number(_0x5e3e43)};}function capitalize(_0x235154){const _0x1aa271=_0x278096;return _0x235154['substring'](0x0,0x1)[_0x1aa271(0x277)]()+_0x235154[_0x1aa271(0x1ab)](0x1);}function supportedExchanges(){const _0x1d82eb=_0x278096,_0x41c40b=['ws',_0x1d82eb(0x19f),'fetchTicker','watchTrades',_0x1d82eb(0x2a7),_0x1d82eb(0x259),'createOrder','fetchOpenOrders',_0x1d82eb(0x2f0)];let _0x10ab99=[],_0x4104fa=[],_0x31a60d=ccxt[_0x1d82eb(0x1a4)]['exchanges'];_0x31a60d[_0x1d82eb(0x279)](_0x19686f=>{const _0x2c5919=_0x1d82eb;try{const _0x35cc23=new ccxt['pro'][_0x19686f]();_0x4104fa[_0x2c5919(0x249)](_0x35cc23);}catch(_0x41127f){}}),_0x4104fa['forEach'](_0x1808a9=>{const _0x20f839=_0x1d82eb;let _0x25e2b9=0x0;_0x41c40b[_0x20f839(0x279)](_0x1dab6d=>{const _0x382296=_0x20f839;_0x1dab6d in _0x1808a9[_0x382296(0x1f4)]&&_0x1808a9[_0x382296(0x1f4)][_0x1dab6d]&&_0x25e2b9++;}),_0x25e2b9==_0x41c40b[_0x20f839(0x1be)]&&(!excludedExchanges[_0x20f839(0x16d)](_0x1808a9['id'])&&_0x10ab99['push'](capitalize(_0x1808a9['id'])));});let _0x47b6ba=[];return _0x31a60d[_0x1d82eb(0x279)](_0x33359f=>{const _0x14b15c=_0x1d82eb;_0x33359f=capitalize(_0x33359f);if(!_0x10ab99[_0x14b15c(0x16d)](_0x33359f))_0x47b6ba[_0x14b15c(0x249)](_0x33359f);}),_0x10ab99;}function setStartDatePerformance(){const _0x4f5155=_0x278096;if(config&&config[_0x4f5155(0x226)][0x0]['changes'][_0x4f5155(0x1be)]!=0x0){const _0x4e243c=config['liquidity'][0x0]['changes'];dbPerformance[_0x4f5155(0x1c8)](_0x4f5155(0x217))['find']({'date':config[_0x4f5155(0x2ac)]})[_0x4f5155(0x1e1)]({'coins':_0x4e243c})[_0x4f5155(0x2e7)]();}}function calculatePnL(_0xd2f69a,_0x2b583a,_0x4ea976,_0x161c11,_0x53c17b,_0x4c2bed){const _0x5a1619=_0x278096;!_0xd2f69a['includes']('/'+config[_0x5a1619(0x1d1)])&&(_0x4ea976=_0x4ea976=='buy'?_0x5a1619(0x205):_0x5a1619(0x2a2));!_0x4c2bed[_0x2b583a]&&(_0x4c2bed[_0x2b583a]={'number':0x0,'sells':0x0,'buys':0x0,'breakeven':0x0,'realizedPnL':0x0});let _0x3a8e78=0x0,_0x562486,_0x31d3b4;if(_0x4ea976==_0x5a1619(0x2a2))_0x31d3b4=_0x4c2bed[_0x2b583a][_0x5a1619(0x194)]*_0x4c2bed[_0x2b583a][_0x5a1619(0x23b)]+_0x53c17b*_0x161c11,_0x4c2bed[_0x2b583a][_0x5a1619(0x194)]+=_0x161c11,_0x4c2bed[_0x2b583a]['breakeven']=_0x4c2bed[_0x2b583a]['number']!=0x0?_0x31d3b4/_0x4c2bed[_0x2b583a][_0x5a1619(0x194)]:0x0,_0x4c2bed[_0x2b583a][_0x5a1619(0x30c)]++;else _0x4ea976==_0x5a1619(0x205)&&(_0x562486=Math[_0x5a1619(0x26d)](_0x4c2bed[_0x2b583a][_0x5a1619(0x194)],_0x161c11),_0x3a8e78=(_0x53c17b-_0x4c2bed[_0x2b583a][_0x5a1619(0x23b)])*_0x562486,_0x31d3b4=Math[_0x5a1619(0x186)](_0x4c2bed[_0x2b583a][_0x5a1619(0x194)]*_0x4c2bed[_0x2b583a][_0x5a1619(0x23b)]-_0x562486*_0x4c2bed[_0x2b583a]['breakeven'],0x0),_0x4c2bed[_0x2b583a][_0x5a1619(0x194)]-=_0x562486,_0x4c2bed[_0x2b583a][_0x5a1619(0x23b)]=_0x4c2bed[_0x2b583a][_0x5a1619(0x194)]!=0x0?_0x31d3b4/_0x4c2bed[_0x2b583a]['number']:0x0,_0x4c2bed[_0x2b583a][_0x5a1619(0x183)]+=_0x3a8e78,_0x4c2bed[_0x2b583a]['sells']++);return _0x3a8e78;}async function generatePnL(){const _0x46db0d=_0x278096;pnlGenerationNeeded=![],logger[_0x46db0d(0x1fe)](_0x46db0d(0x2f4));const _0x2f533d=dbLogs[_0x46db0d(0x1c8)]('logs')[_0x46db0d(0x2a4)]();let _0x45cacc={},_0x23c099=0x0,_0x450df7=0x0,_0x59af27=config[_0x46db0d(0x2ac)];const _0x25c2e1=fns[_0x46db0d(0x1b4)](_0x59af27,_0x46db0d(0x187),new Date()),_0x2f50ed=new Date();let _0x3da1af=0x0;for(let _0x16d55a=_0x25c2e1;!fns[_0x46db0d(0x276)](_0x2f50ed,_0x16d55a);_0x16d55a=fns[_0x46db0d(0x20a)](_0x16d55a,0x1)){const _0x118e46=fns[_0x46db0d(0x167)](_0x16d55a,_0x46db0d(0x187));while(_0x23c099<_0x2f533d[_0x46db0d(0x1be)]){const _0x1a9cf8=new Date(_0x2f533d[_0x23c099][_0x46db0d(0x290)]);if(fns[_0x46db0d(0x276)](_0x1a9cf8,_0x16d55a))_0x23c099++;else{if(_0x2f533d[_0x23c099][_0x46db0d(0x290)][_0x46db0d(0x16d)](_0x118e46)){const _0x13281e=_0x2f533d[_0x23c099];if(_0x13281e[_0x46db0d(0x235)]===_0x46db0d(0x1ea)&&(_0x13281e[_0x46db0d(0x2c6)][_0x46db0d(0x16d)](_0x46db0d(0x292))||_0x13281e[_0x46db0d(0x2c6)][_0x46db0d(0x16d)](_0x46db0d(0x221)))){const _0x411bff=_0x13281e['event']['match'](/([A-Z]+\/[A-Z]+) (sell|buy) #([\d.]+) @([\d.]+)/);if(_0x411bff){const [,_0x55e9ed,_0x540192,_0x2df434,_0x252441]=_0x411bff,_0x2b4cb0=_0x55e9ed[_0x46db0d(0x16d)]('/'+config[_0x46db0d(0x1d1)])?_0x55e9ed[_0x46db0d(0x1dc)]('/')[0x0]:_0x55e9ed[_0x46db0d(0x1dc)]('/')[0x1],_0x5e8ef6=calculatePnL(_0x55e9ed,_0x2b4cb0,_0x540192,parseFloat(_0x2df434),parseFloat(_0x252441),_0x45cacc);_0x450df7+=_0x5e8ef6;}}_0x23c099++;}else break;}}dbPerformance[_0x46db0d(0x1c8)]('data')[_0x46db0d(0x2c3)]({'date':_0x118e46})[_0x46db0d(0x1e1)]({'pnl':_0x450df7})[_0x46db0d(0x2e7)]();}dbCoinResults[_0x46db0d(0x261)](_0x46db0d(0x1cf),_0x45cacc)[_0x46db0d(0x2e7)](),logger[_0x46db0d(0x1fe)](_0x46db0d(0x2a9));const _0x2c8585=getNormalizedPerformance();emitPerformance(_0x2c8585);}async function updatePnL(_0x283549){const _0x3c9e7d=_0x278096,{symbol:_0x35c07a,coin:_0x3a6316,amount:_0x34c870,price:_0x1c4f64,side:_0x316b59,reverse:_0x5e8d8e}=_0x283549;let _0x175d52=dbCoinResults[_0x3c9e7d(0x1c8)]('coins')[_0x3c9e7d(0x2a4)]();const _0x2afd73=calculatePnL(_0x35c07a,_0x3a6316,_0x316b59,_0x34c870,_0x1c4f64,_0x175d52);dbCoinResults[_0x3c9e7d(0x261)]('coins',_0x175d52)[_0x3c9e7d(0x2e7)]();const _0x2a646c=getTimeStamp()[_0x3c9e7d(0x1dc)]('\x20')[0x0];let _0x3bfdc9=dbPerformance['get'](_0x3c9e7d(0x217))[_0x3c9e7d(0x2c3)]({'date':_0x2a646c})[_0x3c9e7d(0x2a4)]();_0x3bfdc9?(_0x3bfdc9[_0x3c9e7d(0x1df)]+=_0x2afd73,dbPerformance[_0x3c9e7d(0x1c8)](_0x3c9e7d(0x217))['find']({'date':_0x2a646c})[_0x3c9e7d(0x1e1)](_0x3bfdc9)[_0x3c9e7d(0x2e7)]()):await storePerformance();const _0x5df934=getNormalizedPerformance();emitPerformance(_0x5df934);}async function validate24hChanges(){const _0xc1a0fa=_0x278096;for(const _0x52a2f5 of currentCoins){if(_0x52a2f5[_0xc1a0fa(0x18c)]!=config['basecoin']){let _0x57a558;_0x52a2f5['reverse']?_0x57a558=formatResult((0x1/(gChange[_0x52a2f5[_0xc1a0fa(0x2f7)]]/0x64+0x1)-0x1)*0x64,0x3):_0x57a558=gChange[_0x52a2f5[_0xc1a0fa(0x2f7)]],_0x57a558<config[_0xc1a0fa(0x30a)]&&(logHistory(_0xc1a0fa(0x31b),_0x52a2f5[_0xc1a0fa(0x18c)]+_0xc1a0fa(0x1d5)+_0x57a558+'%'),logHistory('error',_0xc1a0fa(0x229)),logHistory(_0xc1a0fa(0x31b),_0xc1a0fa(0x1f7)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x80b628,_0x425654){const _0x52d61f=_0x278096;if(!_0x80b628)return!![];const _0x3d88c9=_0x425654[_0x52d61f(0x1dc)]('.'),_0x13ee12=_0x80b628[_0x52d61f(0x1dc)]('.');for(var _0x1dc346=0x0;_0x1dc346<_0x13ee12[_0x52d61f(0x1be)];_0x1dc346++){const _0x19911e=~~_0x13ee12[_0x1dc346],_0x1ca3ad=~~_0x3d88c9[_0x1dc346];if(_0x19911e<_0x1ca3ad)return!![];if(_0x19911e>_0x1ca3ad)return![];}return![];}async function oneTimeMigration(){const _0x1df4bd=_0x278096;let _0x354c63=dbLogs[_0x1df4bd(0x1c8)](_0x1df4bd(0x314))[_0x1df4bd(0x2a4)]();if(isOlderVersion(_0x354c63,_0x1df4bd(0x336))){let _0x29c16e=[];const _0x4cd0a0=dbLogs[_0x1df4bd(0x1c8)]('logs')[_0x1df4bd(0x2a4)]();_0x4cd0a0['forEach'](_0x4e8689=>{const _0x11cae5=_0x1df4bd;_0x29c16e[_0x11cae5(0x249)]({'time':_0x4e8689[_0x11cae5(0x290)],'type':_0x4e8689[_0x11cae5(0x235)],'event':_0x4e8689[_0x11cae5(0x2c6)]});}),dbLogs[_0x1df4bd(0x1c8)](_0x1df4bd(0x2d7))[_0x1df4bd(0x1e1)](_0x29c16e)[_0x1df4bd(0x2e7)]();}let _0x19ce06=dbConfig[_0x1df4bd(0x1c8)](_0x1df4bd(0x314))[_0x1df4bd(0x2a4)]();if(isOlderVersion(_0x19ce06,'2.3.5')){let _0x1b960c=dbConfig[_0x1df4bd(0x1c8)](_0x1df4bd(0x2d5))[_0x1df4bd(0x2c3)]({'botID':botID})[_0x1df4bd(0x2a4)]();if(_0x1b960c){let _0x280db0=[];_0x1b960c[_0x1df4bd(0x232)]['forEach'](_0x95bd23=>{const _0x48c41f=_0x1df4bd;_0x280db0['push']({'coin':_0x95bd23[_0x48c41f(0x18c)],'number':_0x95bd23[_0x48c41f(0x25d)],'price':_0x95bd23[_0x48c41f(0x2b1)]}),delete _0x95bd23[_0x48c41f(0x25d)],delete _0x95bd23['startprice'];});if(_0x280db0['length']!==0x0)fs['writeFile'](configbackuppath+(_0x1df4bd(0x31c)+botID+_0x1df4bd(0x2ef)),JSON[_0x1df4bd(0x32f)](_0x280db0,null,0x4),function(_0x220d25){if(_0x220d25){}});const _0x24a1ea=(_0x1e70e7,_0x1e6ab1)=>{const _0x738209=_0x1df4bd;let _0x39d738=[];_0x1e6ab1['forEach'](_0x1d9158=>{const _0x57ea43=_0x30df,_0x5deb1c=_0x1e70e7['find'](_0x25b02=>_0x25b02[_0x57ea43(0x18c)]==_0x1d9158['coin']);if(!_0x5deb1c)_0x39d738[_0x57ea43(0x249)](_0x1d9158);});let _0xedd9b3=[];return _0x1e70e7[_0x738209(0x279)](_0x25d240=>{const _0x399357=_0x738209,_0xdf5a96=_0x1e6ab1[_0x399357(0x2c3)](_0x227cf7=>_0x227cf7[_0x399357(0x18c)]==_0x25d240[_0x399357(0x18c)]);if(!_0xdf5a96||_0xdf5a96[_0x399357(0x194)]==0x0&&_0x25d240['number']!=0x0)_0xedd9b3[_0x399357(0x249)](_0x25d240);}),{'missingDay1':_0x39d738,'notInDay2':_0xedd9b3};},_0x16a53d=dbPerformance[_0x1df4bd(0x1c8)](_0x1df4bd(0x217))[_0x1df4bd(0x1bb)]()['value']();if(_0x16a53d[_0x1df4bd(0x1be)]>0x1){const {missingDay1:_0x1a92b8,notInDay2:_0x2844f0}=_0x24a1ea(_0x280db0,_0x16a53d[0x1][_0x1df4bd(0x1cf)]);_0x280db0=[..._0x280db0,..._0x1a92b8],_0x2844f0[_0x1df4bd(0x279)](_0x4c82e4=>{const _0x2f3264=_0x1df4bd;let _0x1c521d=_0x280db0[_0x2f3264(0x17b)](_0x65e687=>_0x65e687[_0x2f3264(0x18c)]==_0x4c82e4['coin']);_0x1c521d!=-0x1&&_0x280db0['splice'](_0x1c521d,0x1);});}_0x280db0[_0x1df4bd(0x288)]((_0x2f1b80,_0x2cd01a)=>_0x2f1b80['coin']>_0x2cd01a[_0x1df4bd(0x18c)]?0x1:_0x2cd01a['coin']>_0x2f1b80[_0x1df4bd(0x18c)]?-0x1:0x0);let _0x116e09=[{'date':_0x1b960c[_0x1df4bd(0x2ac)],'changes':_0x280db0}];_0x16a53d[_0x1df4bd(0x1be)]>0x2&&_0x16a53d[_0x1df4bd(0x279)]((_0x3a5f08,_0x544e18)=>{const _0x103abf=_0x1df4bd;if(_0x544e18>0x0&&_0x544e18<_0x16a53d[_0x103abf(0x1be)]-0x1){const {missingDay1:_0x2eea4a,notInDay2:_0x35a7de}=_0x24a1ea(_0x16a53d[_0x544e18][_0x103abf(0x1cf)],_0x16a53d[_0x544e18+0x1]['coins']);_0x280db0=[],(_0x2eea4a['length']!=0x0||_0x35a7de[_0x103abf(0x1be)]!=0x0)&&(_0x2eea4a['length']!=0x0&&_0x280db0[_0x103abf(0x249)](..._0x2eea4a),_0x35a7de[_0x103abf(0x1be)]!=0x0&&(_0x35a7de[_0x103abf(0x279)](_0x2a4229=>{const _0x5a42a2=_0x103abf;_0x2a4229[_0x5a42a2(0x194)]=-_0x2a4229[_0x5a42a2(0x194)];}),_0x280db0[_0x103abf(0x249)](..._0x35a7de)),_0x280db0[_0x103abf(0x288)]((_0x3774cc,_0x23ba2b)=>_0x3774cc['coin']>_0x23ba2b[_0x103abf(0x18c)]?0x1:_0x23ba2b[_0x103abf(0x18c)]>_0x3774cc[_0x103abf(0x18c)]?-0x1:0x0),_0x116e09['push']({'date':_0x16a53d[_0x544e18+0x1]['date'],'changes':_0x280db0}));}}),dbConfig[_0x1df4bd(0x1c8)]('bot')[_0x1df4bd(0x2c3)]({'botID':botID})[_0x1df4bd(0x1e1)]({..._0x1b960c,'liquidity':_0x116e09})[_0x1df4bd(0x2e7)]();}}if(isOlderVersion(_0x19ce06,_0x1df4bd(0x185))){let _0x125e8d=dbConfig[_0x1df4bd(0x1c8)]('bot')[_0x1df4bd(0x2c3)]({'botID':botID})[_0x1df4bd(0x2a4)]();if(_0x125e8d){const _0x93b967=_0x125e8d[_0x1df4bd(0x168)],_0x4f04af=_0x93b967?capitalize(_0x93b967):_0x1df4bd(0x2ad);dbConfig[_0x1df4bd(0x1c8)](_0x1df4bd(0x2d5))[_0x1df4bd(0x2c3)]({'botID':botID})['assign']({'exchange':_0x4f04af})[_0x1df4bd(0x2e7)]();}}if(isOlderVersion(_0x19ce06,_0x1df4bd(0x257))){let _0x3fd9da=dbConfig['get']('bot')[_0x1df4bd(0x2c3)]({'botID':botID})[_0x1df4bd(0x2a4)]();if(_0x3fd9da){const _0x19356e=_0x3fd9da[_0x1df4bd(0x2e9)],_0x18e218=_0x19356e?_0x1df4bd(0x28f):![];dbConfig[_0x1df4bd(0x1c8)](_0x1df4bd(0x2d5))[_0x1df4bd(0x2c3)]({'botID':botID})['assign']({'marketcapEnabled':_0x18e218})[_0x1df4bd(0x2e7)]();}}if(isOlderVersion(_0x19ce06,_0x1df4bd(0x2b9))){let _0x50493f=dbConfig[_0x1df4bd(0x1c8)](_0x1df4bd(0x2d5))[_0x1df4bd(0x2c3)]({'botID':botID})[_0x1df4bd(0x2a4)]();if(_0x50493f){const _0x485bbe=_0x50493f['autoliquidity'],_0x4c2567=_0x485bbe?_0x1df4bd(0x299):![];dbConfig[_0x1df4bd(0x1c8)](_0x1df4bd(0x2d5))['find']({'botID':botID})[_0x1df4bd(0x1e1)]({'autoliquidity':_0x4c2567})[_0x1df4bd(0x2e7)]();}}let _0x14a469=dbPerformance[_0x1df4bd(0x1c8)](_0x1df4bd(0x314))[_0x1df4bd(0x2a4)]();isOlderVersion(_0x14a469,_0x1df4bd(0x336))&&setStartDatePerformance();let _0x9500aa=dbCoinResults['get'](_0x1df4bd(0x314))['value']();if(isOlderVersion(_0x9500aa,_0x1df4bd(0x1b9))){let _0x5091c9=dbCoinResults[_0x1df4bd(0x1c8)](_0x1df4bd(0x1cf))[_0x1df4bd(0x2a4)]();if(_0x5091c9[_0x1df4bd(0x1be)]!=0x0)pnlGenerationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x18bf85=_0x278096;dbConfig[_0x18bf85(0x261)](_0x18bf85(0x314),serverversion)[_0x18bf85(0x2e7)](),dbPerformance[_0x18bf85(0x261)]('version',serverversion)[_0x18bf85(0x2e7)](),dbLogs[_0x18bf85(0x261)]('version',serverversion)[_0x18bf85(0x2e7)](),dbCoinResults[_0x18bf85(0x261)](_0x18bf85(0x314),serverversion)[_0x18bf85(0x2e7)]();}function getConfiguration(_0x28eec6){const _0x52228b=_0x278096;let _0x5c48d7=dbConfig['get'](_0x52228b(0x2d5))['find']({'botID':_0x28eec6})[_0x52228b(0x2a4)]();if(_0x5c48d7){let _0x2bd0a5=![];typeof _0x5c48d7[_0x52228b(0x32a)]==_0x52228b(0x16f)&&(_0x5c48d7={..._0x5c48d7,'threshold':Number(_0x5c48d7[_0x52228b(0x32a)])},_0x2bd0a5=!![]),_0x5c48d7[_0x52228b(0x30a)]==undefined&&(_0x5c48d7={..._0x5c48d7,'change24h':-0x14},_0x2bd0a5=!![]),_0x5c48d7[_0x52228b(0x1f5)]==undefined&&(_0x5c48d7={..._0x5c48d7,'fiat':'USD'},_0x2bd0a5=!![]),_0x5c48d7[_0x52228b(0x298)]==undefined&&(_0x5c48d7={..._0x5c48d7,'onepagemode':settings['onepagemode']},_0x2bd0a5=!![]),_0x5c48d7[_0x52228b(0x256)]==undefined&&(_0x5c48d7={..._0x5c48d7,'colorscheme':_0x52228b(0x32b)},_0x2bd0a5=!![]),_0x5c48d7[_0x52228b(0x280)]==undefined&&(_0x5c48d7={..._0x5c48d7,'autoliquidity':'update-liquidity'},_0x2bd0a5=!![]),_0x5c48d7[_0x52228b(0x1ce)]==undefined&&(_0x5c48d7={..._0x5c48d7,'marketcapApi':settings[_0x52228b(0x1ce)]?!![]:![]},_0x2bd0a5=!![]),_0x5c48d7[_0x52228b(0x2e9)]==undefined&&(_0x5c48d7={..._0x5c48d7,'marketcapEnabled':![]},_0x2bd0a5=!![]),_0x5c48d7[_0x52228b(0x286)]==undefined&&(_0x5c48d7={..._0x5c48d7,'sandbox':![]},_0x2bd0a5=!![]),_0x2bd0a5&&(_0x5c48d7={'botID':_0x5c48d7[_0x52228b(0x1b8)],'exchange':_0x5c48d7['exchange'],'apiKey':_0x5c48d7[_0x52228b(0x223)],'apiSecret':_0x5c48d7['apiSecret'],'apiPassword':_0x5c48d7[_0x52228b(0x2d6)],'basecoin':_0x5c48d7['basecoin'],'botname':_0x5c48d7[_0x52228b(0x179)],'showname':_0x5c48d7[_0x52228b(0x302)],'threshold':_0x5c48d7['threshold'],'ordertype':_0x5c48d7[_0x52228b(0x19e)],'timeout':_0x5c48d7[_0x52228b(0x32c)],'fiat':_0x5c48d7['fiat'],'startdate':_0x5c48d7[_0x52228b(0x2ac)],'recreate':_0x5c48d7['recreate'],'timeshift':_0x5c48d7[_0x52228b(0x31a)],'onepagemode':_0x5c48d7[_0x52228b(0x298)],'headless':_0x5c48d7[_0x52228b(0x2f8)],'cooldown':_0x5c48d7[_0x52228b(0x2a8)],'change24h':_0x5c48d7[_0x52228b(0x30a)],'emojibuy':_0x5c48d7[_0x52228b(0x2bc)],'emojisell':_0x5c48d7[_0x52228b(0x30d)],'colorscheme':_0x5c48d7[_0x52228b(0x256)],'marketcapApi':_0x5c48d7[_0x52228b(0x1ce)],'marketcapEnabled':_0x5c48d7['marketcapEnabled'],'sandbox':_0x5c48d7[_0x52228b(0x286)],'portfolio':_0x5c48d7['portfolio'],'autoliquidity':_0x5c48d7['autoliquidity'],'liquidity':_0x5c48d7[_0x52228b(0x226)],'openOrders':_0x5c48d7['openOrders']},dbConfig[_0x52228b(0x1c8)](_0x52228b(0x2d5))[_0x52228b(0x304)]()['write'](),dbConfig[_0x52228b(0x1c8)]('bot')['push'](_0x5c48d7)['write']());}else _0x5c48d7={'botID':_0x28eec6,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x52228b(0x272)+_0x28eec6,'showname':![],'threshold':0x3,'ordertype':_0x52228b(0x1c3),'timeout':0x14,'fiat':'USD','startdate':getDate(),'recreate':![],'timeshift':settings[_0x52228b(0x31a)],'onepagemode':settings[_0x52228b(0x298)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x52228b(0x32b),'marketcapApi':settings['marketcapApi']?!![]:![],'marketcapEnabled':![],'sandbox':![],'portfolio':[],'autoliquidity':'update-liquidity','liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x5c48d7;}function emittedConfiguration(){const _0x3d50ce=_0x278096;let _0x10d3ed;if(config['apiKey']=='')_0x10d3ed={...config,'configstate':_0x3d50ce(0x2d8)};else config[_0x3d50ce(0x223)]==_0x3d50ce(0x325)?_0x10d3ed={...config,'configstate':'recovery'}:(_0x10d3ed={...config,'apiKey':_0x3d50ce(0x28a),'apiSecret':_0x3d50ce(0x28a)},config['apiPassword']&&(_0x10d3ed['apiPassword']=_0x3d50ce(0x28a)));return _0x10d3ed[_0x3d50ce(0x15c)]=enableFiatToggle,_0x10d3ed;}function getSettings(){const _0x165ee9=_0x278096;return dbSettings['get'](_0x165ee9(0x228))[_0x165ee9(0x2a4)]();}function getSecure(){const _0x2bf15c=_0x278096;return dbSecure[_0x2bf15c(0x1c8)]('secure')[_0x2bf15c(0x2a4)]()||{};}function updateTimeshift(_0x4d801f){const _0x2f31bc=_0x278096;let _0x226b27=dbConfig['get']('bot')['find']({'botID':botID})['value']();_0x226b27&&dbConfig[_0x2f31bc(0x1c8)](_0x2f31bc(0x2d5))[_0x2f31bc(0x2c3)]({'botID':botID})[_0x2f31bc(0x1e1)]({'timeshift':_0x4d801f})[_0x2f31bc(0x2e7)](),config['timeshift']=_0x4d801f,proxyEmit(_0x2f31bc(0x231),emittedConfiguration());}function updateOnepagemode(_0x3a62bd){const _0x58ebb4=_0x278096;let _0x1c603c=dbConfig[_0x58ebb4(0x1c8)](_0x58ebb4(0x2d5))[_0x58ebb4(0x2c3)]({'botID':botID})[_0x58ebb4(0x2a4)]();_0x1c603c&&dbConfig[_0x58ebb4(0x1c8)](_0x58ebb4(0x2d5))[_0x58ebb4(0x2c3)]({'botID':botID})[_0x58ebb4(0x1e1)]({'onepagemode':_0x3a62bd})['write'](),config['onepagemode']=_0x3a62bd,proxyEmit(_0x58ebb4(0x231),emittedConfiguration());}function updateMarketcapApi(_0x3b33b4){const _0x4c525a=_0x278096,_0x52bb56=_0x3b33b4?!![]:![];let _0x1c57cc=dbConfig[_0x4c525a(0x1c8)](_0x4c525a(0x2d5))[_0x4c525a(0x2c3)]({'botID':botID})[_0x4c525a(0x2a4)]();_0x1c57cc&&dbConfig[_0x4c525a(0x1c8)](_0x4c525a(0x2d5))['find']({'botID':botID})['assign']({'marketcapApi':_0x52bb56})[_0x4c525a(0x2e7)](),config[_0x4c525a(0x1ce)]=_0x52bb56,getMarketCap(),proxyEmit(_0x4c525a(0x231),emittedConfiguration());}async function storeConfiguration(_0x94fb62){const _0x32724c=_0x278096;logger[_0x32724c(0x1fe)](_0x32724c(0x2e6));_0x94fb62[_0x32724c(0x177)]&&delete _0x94fb62[_0x32724c(0x177)];if(pidBalances)clearTimeout(pidBalances);setBlockTransactionDetection(!![]);let _0x1cf51d=![],_0xee2a06=![],_0xde3286=[];_0x94fb62['portfolio'][_0x32724c(0x279)](_0x172d02=>{const _0x30cef3=_0x32724c;if(!_0x172d02[_0x30cef3(0x2dc)]&&_0x172d02['coin']!=_0x94fb62[_0x30cef3(0x1d1)])_0xde3286['push'](_0x172d02[_0x30cef3(0x2f7)]);}),_0xde3286[_0x32724c(0x279)](_0x389bdc=>{const _0x4a8b94=_0x32724c,_0x3c8977=currentCoins[_0x4a8b94(0x2c3)](_0xb9cf5a=>_0xb9cf5a[_0x4a8b94(0x2f7)]==_0x389bdc);!_0x3c8977&&(_0x1cf51d=!![]);}),currentCoins[_0x32724c(0x279)](_0x456a2d=>{const _0x12c8af=_0x32724c;if(_0x456a2d['coin']!=config['basecoin']){const _0xd5f0bf=_0xde3286[_0x12c8af(0x2c3)](_0x3a2fb6=>_0x3a2fb6==_0x456a2d[_0x12c8af(0x2f7)]);!_0xd5f0bf&&(_0x1cf51d=!![]);}}),_0x94fb62[_0x32724c(0x232)][_0x32724c(0x279)](_0x1151a9=>{const _0x479676=_0x32724c,_0x5d0410=config[_0x479676(0x232)]['find'](_0x273e76=>_0x273e76[_0x479676(0x18c)]==_0x1151a9[_0x479676(0x18c)]);if(_0x5d0410&&_0x1151a9[_0x479676(0x266)]!=_0x5d0410[_0x479676(0x266)])_0xee2a06=!![];});let _0x1c5498=dbConfig['get'](_0x32724c(0x2d5))['find']({'botID':botID})['value']();_0x94fb62={..._0x94fb62,'apiKey':decryptRSA(secure[_0x32724c(0x239)],_0x94fb62[_0x32724c(0x223)]),'apiSecret':decryptRSA(secure[_0x32724c(0x239)],_0x94fb62['apiSecret'])};_0x94fb62[_0x32724c(0x2d6)]&&(_0x94fb62[_0x32724c(0x2d6)]=decryptRSA(secure[_0x32724c(0x239)],_0x94fb62[_0x32724c(0x2d6)]));let _0x1cd526=![];if(_0x1c5498){_0x94fb62[_0x32724c(0x223)]==_0x32724c(0x28a)?_0x94fb62[_0x32724c(0x223)]=config[_0x32724c(0x223)]:_0x1cd526=!![];_0x94fb62['apiSecret']==_0x32724c(0x28a)?_0x94fb62[_0x32724c(0x164)]=config[_0x32724c(0x164)]:_0x1cd526=!![];if(_0x94fb62[_0x32724c(0x2d6)]==_0x32724c(0x28a))_0x94fb62[_0x32724c(0x2d6)]=config[_0x32724c(0x2d6)];else{if(_0x94fb62[_0x32724c(0x2d6)])_0x1cd526=!![];}dbConfig[_0x32724c(0x1c8)](_0x32724c(0x2d5))[_0x32724c(0x2c3)]({'botID':botID})['assign'](_0x94fb62)[_0x32724c(0x2e7)]();}else dbConfig['get'](_0x32724c(0x2d5))[_0x32724c(0x249)](_0x94fb62)[_0x32724c(0x2e7)](),_0x1cd526=!![],process[_0x32724c(0x255)]({'status':_0x32724c(0x1cd),'live':'running'},_0x4528b9=>{});process[_0x32724c(0x255)]({'botname':_0x94fb62[_0x32724c(0x179)]},_0x7b61b9=>{}),config={..._0x94fb62},updateBotManager(),proxyEmit(_0x32724c(0x233)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x1cd526)await reset(!![]);else _0x1cf51d||_0xee2a06?await reset(![]):getBalances();setBlockTransactionDetection(![]);}async function storeHeadless(_0x53b0bb){const _0x3ebc0e=_0x278096,_0x29506c={...config,'headless':_0x53b0bb[_0x3ebc0e(0x2f8)]};let _0x3026da=dbConfig['get']('bot')[_0x3ebc0e(0x2c3)]({'botID':botID})[_0x3ebc0e(0x2a4)]();_0x3026da&&dbConfig[_0x3ebc0e(0x1c8)](_0x3ebc0e(0x2d5))['find']({'botID':botID})['assign'](_0x29506c)['write'](),config={..._0x29506c},updateBotManager(),proxyEmit(_0x3ebc0e(0x231),emittedConfiguration());}async function storeFiat(_0x1613e5){const _0x15f4fb=_0x278096,_0x3f13b2={...config,'fiat':_0x1613e5};let _0x251003=dbConfig['get']('bot')['find']({'botID':botID})[_0x15f4fb(0x2a4)]();_0x251003&&dbConfig['get'](_0x15f4fb(0x2d5))['find']({'botID':botID})[_0x15f4fb(0x1e1)](_0x3f13b2)[_0x15f4fb(0x2e7)](),config={..._0x3f13b2},proxyEmit(_0x15f4fb(0x231),emittedConfiguration());}function resetHistory(){const _0x4d4226=_0x278096;logger['full'](_0x4d4226(0x295));try{if(fs[_0x4d4226(0x1cc)](path[_0x4d4226(0x2e4)](configpath,_0x4d4226(0x2fe)+botID+_0x4d4226(0x2db))))fs['unlinkSync'](path[_0x4d4226(0x2e4)](configpath,_0x4d4226(0x2fe)+botID+_0x4d4226(0x2db)));if(fs[_0x4d4226(0x1cc)](path[_0x4d4226(0x2e4)](configpath,_0x4d4226(0x2fe)+botID+_0x4d4226(0x2c1))))fs[_0x4d4226(0x162)](path[_0x4d4226(0x2e4)](configpath,_0x4d4226(0x2fe)+botID+_0x4d4226(0x2c1)));if(fs[_0x4d4226(0x1cc)](path[_0x4d4226(0x2e4)](configpath,_0x4d4226(0x2fe)+botID+_0x4d4226(0x254))))fs[_0x4d4226(0x162)](path[_0x4d4226(0x2e4)](configpath,'bot-'+botID+'-results.json'));}catch(_0x397ab4){if(_0x397ab4)logger[_0x4d4226(0x2e5)](_0x4d4226(0x1fa),_0x397ab4);}const _0x250cb3=getDate();let _0x45917a=[];currentCoins[_0x4d4226(0x279)](_0x50f263=>{const _0xea6a59=_0x4d4226;_0x45917a[_0xea6a59(0x249)]({'coin':_0x50f263[_0xea6a59(0x18c)],'number':_0x50f263[_0xea6a59(0x194)],'price':_0x50f263['last']});});let _0x724ef8=dbConfig[_0x4d4226(0x1c8)](_0x4d4226(0x2d5))[_0x4d4226(0x2c3)]({'botID':botID})[_0x4d4226(0x2a4)]();_0x724ef8&&(dbConfig[_0x4d4226(0x1c8)]('bot')[_0x4d4226(0x2c3)]({'botID':botID})[_0x4d4226(0x1e1)]({'liquidity':[{'date':_0x250cb3,'changes':_0x45917a}]})[_0x4d4226(0x2e7)](),config[_0x4d4226(0x226)]=[]),restartBot(!![]);}function noslash(_0x21145f){return _0x21145f['replace']('/','');}function updateHighestFee(_0x520553){const _0x3cd671=_0x278096;if(_0x520553['reverse']){let _0x10b860={'filled':_0x520553[_0x3cd671(0x227)]*_0x520553[_0x3cd671(0x29f)],'amount':_0x520553[_0x3cd671(0x227)]*_0x520553[_0x3cd671(0x29f)],'side':_0x520553[_0x3cd671(0x28e)]==_0x3cd671(0x205)?_0x3cd671(0x2a2):_0x3cd671(0x205),'price':0x1/_0x520553[_0x3cd671(0x29f)]};_0x520553={..._0x520553,..._0x10b860};}const _0x3f5c95=defaultFee*_0x520553[_0x3cd671(0x227)]*_0x520553[_0x3cd671(0x29f)];lastFees[_0x3cd671(0x2d4)]['length']===0x14&&lastFees[_0x3cd671(0x2d4)]['shift'](),lastFees[_0x3cd671(0x2d4)]['push'](_0x3f5c95),lastFees[_0x3cd671(0x2bd)]=Math[_0x3cd671(0x186)](...lastFees[_0x3cd671(0x2d4)]);}async function updateNumberCoinsCcxt(_0x15d4af){const _0x496ef3=_0x278096;logger[_0x496ef3(0x1fe)](_0x496ef3(0x19b)+_0x15d4af['symbol']+_0x496ef3(0x1e6)+_0x15d4af[_0x496ef3(0x170)]+_0x496ef3(0x1e6)+_0x15d4af['filled']+_0x496ef3(0x25f)+_0x15d4af['amount']+_0x496ef3(0x1e6)+_0x15d4af['id']);let _0x12a78c=_0x15d4af[_0x496ef3(0x170)],_0x5bddc1=![];currentCoins[_0x496ef3(0x279)](_0x10400d=>{const _0x27d81d=_0x496ef3;_0x10400d[_0x27d81d(0x2f7)]==_0x15d4af[_0x27d81d(0x2f7)]&&(_0x5bddc1=!![]);});if(!_0x5bddc1)return;const _0x5059e2=currentCoins[_0x496ef3(0x2c3)](_0x61b40a=>_0x61b40a['symbol']==_0x15d4af['symbol']),_0x22b765=_0x5059e2[_0x496ef3(0x18c)],_0x40c0ea=_0x78695d=>{const _0x4a42b0=_0x496ef3,_0x24d9cc=currentCoins['find'](_0x5b6520=>_0x5b6520[_0x4a42b0(0x2f7)]==_0x15d4af[_0x4a42b0(0x2f7)]);if(_0x24d9cc)_0x24d9cc[_0x4a42b0(0x310)]=_0x78695d;};let _0x557941=![];for(const _0x3446e5 of lastOrders){const _0x23eb77=0x64,_0x3d8630=0x1388;let _0x1d40ad=0x0;while(!_0x3446e5[_0x496ef3(0x2bf)]&&_0x1d40ad*_0x23eb77<_0x3d8630){_0x1d40ad++,await sleep(_0x23eb77);}if(_0x1d40ad>0x0)logger['debug'](_0x496ef3(0x199)+_0x1d40ad*_0x23eb77/0x3e8+_0x496ef3(0x18d));_0x3446e5[_0x496ef3(0x2bf)]==_0x15d4af['id']&&(_0x557941=!![]);}if(_0x12a78c==_0x496ef3(0x2e8)){_0x40c0ea(_0x496ef3(0x2e8));if(_0x15d4af[_0x496ef3(0x227)]>0x0&&_0x15d4af[_0x496ef3(0x227)]<_0x15d4af[_0x496ef3(0x1c9)]){if(_0x557941){setBlockTransactionDetection(!![]),logger['debug'](_0x496ef3(0x31f)+_0x15d4af['filled']+_0x496ef3(0x319)+_0x15d4af['id']);const _0x26383c=await getCoins(balanceUpdateDelay,undefined,undefined,_0x22b765);[currentCoins,currentCoinsAll]=_0x26383c,setBlockTransactionDetection(![]);}else logger[_0x496ef3(0x1fe)](_0x496ef3(0x31f)+_0x15d4af[_0x496ef3(0x227)]+_0x496ef3(0x287)+_0x15d4af['id']),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay);}}else{if(_0x12a78c==_0x496ef3(0x1d6)){_0x40c0ea('canceled'),lastOrders=lastOrders[_0x496ef3(0x2ae)](_0x23f072=>_0x23f072[_0x496ef3(0x2f7)]!=_0x15d4af[_0x496ef3(0x2f7)]);const _0x58fe73=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x58fe73,setBlockTransactionDetection(![]),await getOpenOrders(),handleOpenOrders();}else{if(_0x12a78c==_0x496ef3(0x1a8)){if(lastOrders)for(const _0x2ba78d of lastOrders){if(_0x2ba78d[_0x496ef3(0x2bf)]==_0x15d4af['id']){logger[_0x496ef3(0x1fe)](_0x496ef3(0x1e2)+_0x15d4af['id']),_0x557941=!![];if(_0x2ba78d[_0x496ef3(0x227)]==0x0){setBlockTransactionDetection(!![]),logger[_0x496ef3(0x1fe)](_0x496ef3(0x211)+_0x15d4af['id']);if(_0x15d4af[_0x496ef3(0x1a3)])_0x2ba78d[_0x496ef3(0x29f)]=_0x15d4af[_0x496ef3(0x1a3)];else{if(_0x15d4af[_0x496ef3(0x29f)])_0x2ba78d[_0x496ef3(0x29f)]=_0x15d4af[_0x496ef3(0x29f)];else{}}_0x2ba78d[_0x496ef3(0x227)]=_0x15d4af['filled'],updateHighestFee(_0x2ba78d);const _0x4af08b=await getCoins(balanceUpdateDelay,undefined,undefined,_0x22b765);[currentCoins,currentCoinsAll]=_0x4af08b,setBlockTransactionDetection(![]),await validateOrders(),_0x40c0ea(_0x496ef3(0x227)),_0x2ba78d['fee']={'currency':_0x15d4af[_0x496ef3(0x2a1)]?_0x15d4af['fee'][_0x496ef3(0x1db)]:null,'cost':_0x15d4af[_0x496ef3(0x2a1)]?_0x15d4af['fee'][_0x496ef3(0x218)]:0x0},await updatePnL(_0x2ba78d);}}}!_0x557941&&(logger[_0x496ef3(0x1fe)](_0x496ef3(0x27b)+_0x15d4af['id']),_0x40c0ea(_0x496ef3(0x227)),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay),await updateOpenOrders(),handleOpenOrders());}}}if(lastBalances){let _0x112935=JSON[_0x496ef3(0x1b4)](lastBalances[_0x496ef3(0x232)]);const _0x42a096=_0x112935[_0x496ef3(0x2c3)](_0x15a002=>_0x15a002['symbol']==_0x15d4af[_0x496ef3(0x2f7)]);if(_0x42a096){if(_0x12a78c==_0x496ef3(0x2e8))_0x42a096[_0x496ef3(0x310)]=_0x42a096[_0x496ef3(0x310)]==_0x496ef3(0x227)?_0x496ef3(0x227):_0x496ef3(0x2e8);else{if(_0x12a78c==_0x496ef3(0x1d6))_0x42a096[_0x496ef3(0x310)]=_0x42a096[_0x496ef3(0x310)]=='filled'?_0x496ef3(0x227):_0x496ef3(0x1d6);else _0x12a78c==_0x496ef3(0x1a8)&&(_0x42a096[_0x496ef3(0x310)]=_0x496ef3(0x227));}}lastBalances={...lastBalances,'portfolio':JSON[_0x496ef3(0x32f)](_0x112935)},proxyEmit(_0x496ef3(0x32d),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){await getOpenOrders();let _0x27a2b5=![];currentCoins['forEach'](_0x2711cc=>{const _0xbf3c23=_0x30df;_0x27a2b5=allOpenOrders['find'](_0x102c97=>_0x102c97['symbol']==_0x2711cc['symbol']),_0x2711cc[_0xbf3c23(0x310)]=_0x27a2b5?_0xbf3c23(0x2e8):_0xbf3c23(0x27f);});}async function fetchBalance(_0x39afd2=!![]){const _0x353b03=_0x278096;let _0x50cb8c,_0x468975,_0x38641e,_0x413374=0x0;while(!_0x468975&&_0x413374<maxRetries){try{return _0x50cb8c=await exchange['fetchBalance'](),_0x468975=_0x50cb8c[_0x353b03(0x2ec)],_0x468975;}catch(_0x3dd979){_0x38641e=_0x3dd979,_0x413374++,await sleep(retryInterval);}}return!_0x39afd2?handleErrorNoStop(_0x38641e,'fetchBalance()'):await handleError(_0x38641e,_0x353b03(0x23e)),![];}async function getCoins(_0x31e48d=0x0,_0xae8434=!![],_0x4ff10c=config[_0x278096(0x1d1)],_0x57f0c7){const _0x5328b4=_0x278096;let _0x93ff83=[],_0x50eff3=[],_0xa0ba3b=[],_0x1445ea;if(_0x31e48d)await sleep(_0x31e48d);if(botPaused)return[currentCoins,currentCoinsAll];let _0x5c99a8=![],_0x507574=0x0,_0x26451e,_0x3bc623;_0x57f0c7&&(_0x26451e=currentCoins['find'](_0x5ae571=>_0x5ae571[_0x5328b4(0x18c)]==_0x57f0c7),_0x26451e&&(_0x3bc623=_0x26451e[_0x5328b4(0x324)],delete _0x26451e[_0x5328b4(0x324)]));while(!_0x5c99a8){_0x1445ea=await fetchBalance(_0xae8434);if(_0x1445ea){if(_0x57f0c7){if(_0x1445ea[_0x57f0c7]!=_0x3bc623)logger[_0x5328b4(0x1fe)](_0x5328b4(0x1a1)+_0x57f0c7+':\x20'+_0x1445ea[_0x57f0c7]+'\x20('+_0x3bc623+')'),_0x5c99a8=!![];else{logger['debug'](_0x5328b4(0x327)+_0x57f0c7+':\x20'+_0x1445ea[_0x57f0c7]+'\x20('+_0x3bc623+')'),_0x507574++;if(_0x507574<balanceUpdateRetries)await sleep(balanceUpdateDelay);else{logger[_0x5328b4(0x1fe)]('Stopped\x20fetching\x20balance\x20after\x20'+_0x507574+_0x5328b4(0x25e));break;}}}else break;}else return[currentCoins,currentCoinsAll];}for(const [_0x23cd0b,_0x31418b]of Object[_0x5328b4(0x1dd)](_0x1445ea)){_0xa0ba3b['push'](_0x23cd0b);}config[_0x5328b4(0x232)]['forEach'](_0x537bd1=>{const _0x3b2244=_0x5328b4;!_0xa0ba3b[_0x3b2244(0x16d)](_0x537bd1[_0x3b2244(0x18c)])&&(_0x1445ea[_0x537bd1['coin']]=0x0);});if(_0x4ff10c=='')for(const [_0x25f46e,_0x2ac51f]of Object[_0x5328b4(0x1dd)](_0x1445ea)){_0x2ac51f!=0x0&&_0x93ff83[_0x5328b4(0x249)]({'coin':_0x25f46e});}else for(const [_0xde6d80,_0x46398c]of Object[_0x5328b4(0x1dd)](_0x1445ea)){const _0x4bc3bb=config[_0x5328b4(0x232)][_0x5328b4(0x2c3)](_0x1c22a4=>_0x1c22a4[_0x5328b4(0x18c)]==_0xde6d80),_0x36284b=_0xde6d80+'/'+_0x4ff10c,_0x4fb90d=_0x4ff10c+'/'+_0xde6d80,_0x760c70=currentCoins[_0x5328b4(0x2c3)](_0x23e311=>_0x23e311['coin']==_0xde6d80);if((_0x46398c!=0x0||_0x4bc3bb)&&(allSymbols['includes'](_0x36284b)||_0xde6d80==_0x4ff10c))_0x760c70?_0x93ff83['push']({..._0x760c70,'number':Math['max'](_0x46398c+(_0x4bc3bb&&_0x4bc3bb[_0x5328b4(0x266)]||0x0),0x0)}):_0x93ff83[_0x5328b4(0x249)]({'coin':_0xde6d80,'symbol':_0x36284b,'reverse':![],'number':Math[_0x5328b4(0x186)](_0x46398c+(_0x4bc3bb&&_0x4bc3bb['offset']||0x0),0x0),'orderstatus':_0x5328b4(0x27f)});else{if((_0x46398c!=0x0||_0x4bc3bb)&&allSymbols[_0x5328b4(0x16d)](_0x4fb90d))_0x760c70?_0x93ff83[_0x5328b4(0x249)]({..._0x760c70,'number':Math[_0x5328b4(0x186)](_0x46398c+(_0x4bc3bb&&_0x4bc3bb[_0x5328b4(0x266)]||0x0),0x0)}):_0x93ff83[_0x5328b4(0x249)]({'coin':_0xde6d80,'symbol':_0x4fb90d,'reverse':!![],'number':Math[_0x5328b4(0x186)](_0x46398c+(_0x4bc3bb&&_0x4bc3bb[_0x5328b4(0x266)]||0x0),0x0),'orderstatus':_0x5328b4(0x27f)});else _0x4bc3bb&&_0x93ff83[_0x5328b4(0x249)]({'coin':_0x4bc3bb[_0x5328b4(0x18c)],'symbol':_0x4bc3bb[_0x5328b4(0x2f7)],'reverse':_0x4bc3bb[_0x5328b4(0x2e3)],'number':0x0,'orderstatus':'none'});}}return _0x93ff83[_0x5328b4(0x288)]((_0xacf641,_0x1134dd)=>_0xacf641[_0x5328b4(0x305)]<_0x1134dd[_0x5328b4(0x305)]?0x1:_0x1134dd[_0x5328b4(0x305)]<_0xacf641['delta']?-0x1:0x0),_0x50eff3=cloneDeep(_0x93ff83),_0x93ff83=_0x93ff83[_0x5328b4(0x2ae)](_0x3496e5=>{const _0x39e0c9=_0x5328b4,_0xb4547f=config[_0x39e0c9(0x232)][_0x39e0c9(0x2c3)](_0x2d752d=>_0x2d752d[_0x39e0c9(0x18c)]==_0x3496e5[_0x39e0c9(0x18c)]);return _0xb4547f&&!_0xb4547f[_0x39e0c9(0x2dc)];}),[_0x93ff83,_0x50eff3];}async function getOpenOrders(){const _0x538a2c=_0x278096;let _0xacb116;allOpenOrders=[];try{for(const _0x42fb00 of config['portfolio']){!_0x42fb00[_0x538a2c(0x2dc)]&&_0x42fb00['coin']!=config[_0x538a2c(0x1d1)]&&(_0xacb116=await exchange[_0x538a2c(0x203)](_0x42fb00['symbol']),_0xacb116['length']>0x0&&allOpenOrders[_0x538a2c(0x249)](_0xacb116[0x0]));}}catch(_0x2e3ce4){await handleError(_0x2e3ce4,'getOpenOrders()');}}async function handleOpenOrders(_0x5bd06e=0x0){const _0x277cc9=_0x278096;allOpenOrders['length']==0x0&&lockOrders==ORDERS[_0x277cc9(0x333)]&&allOrdersPlaced&&(_0x5bd06e==0x0?(logger['debug']('1\x20-\x20Handle\x20open\x20orders'),_0x5bd06e++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x277cc9(0x1fe)](_0x277cc9(0x285)),validateOrders(_0x277cc9(0x328))));}async function testAPI(){const _0x4e8621=_0x278096;try{return await exchange[_0x4e8621(0x2f0)](),!![];}catch(_0x3f26cb){return loading[_0x4e8621(0x250)]=!![],_0x3f26cb[_0x4e8621(0x31d)]()[_0x4e8621(0x2f6)]()[_0x4e8621(0x16d)](_0x4e8621(0x2ab))||_0x3f26cb[_0x4e8621(0x31d)]()[_0x4e8621(0x2f6)]()[_0x4e8621(0x16d)]('request-time')?(logHistory(_0x4e8621(0x31b),_0x4e8621(0x1cb)),loading['error']=_0x4e8621(0x2b3)):(handleErrorNoStop(_0x3f26cb,_0x4e8621(0x161)),logger[_0x4e8621(0x1fe)](_0x4e8621(0x2b8),_0x3f26cb)),emitLoadingProgress(),botPaused=!![],![];}}async function testNewAPI(_0x2e0e3f){const _0x43026b=_0x278096;logger['debug']('Test\x20new\x20API');const _0x175eab=ccxt[_0x43026b(0x1a4)][_0x2e0e3f[_0x43026b(0x168)]['toLowerCase']()],_0x1a52a5=new _0x175eab({'apiKey':_0x2e0e3f[_0x43026b(0x223)],'secret':_0x2e0e3f['apiSecret'],'options':{'defaultType':'spot'}});if(_0x2e0e3f[_0x43026b(0x2d6)])_0x1a52a5[_0x43026b(0x318)]=_0x2e0e3f[_0x43026b(0x2d6)];if(_0x1a52a5[_0x43026b(0x1f4)][_0x43026b(0x286)])_0x1a52a5[_0x43026b(0x234)](_0x2e0e3f[_0x43026b(0x286)]);try{await _0x1a52a5[_0x43026b(0x2f0)](),botPaused=![];}catch(_0x5b2734){logger[_0x43026b(0x1fe)](_0x43026b(0x1bc)+_0x5b2734[_0x43026b(0x31d)]());throw _0x5b2734;}}function cloneDeep(_0x1a3044){const _0x5af025=_0x278096;return JSON['parse'](JSON[_0x5af025(0x32f)](_0x1a3044));}async function getPortfolio(_0x12f771){const _0x344938=_0x278096;let _0x52efff=[],_0x5e5eff=[],_0x25f6c4=[],_0x1c32a8;_0x12f771[_0x344938(0x223)]=decryptRSA(secure[_0x344938(0x239)],_0x12f771[_0x344938(0x223)]),_0x12f771['apiSecret']=decryptRSA(secure[_0x344938(0x239)],_0x12f771[_0x344938(0x164)]);if(_0x12f771[_0x344938(0x2d6)])_0x12f771[_0x344938(0x2d6)]=decryptRSA(secure[_0x344938(0x239)],_0x12f771['apiPassword']);if(_0x12f771[_0x344938(0x223)]!==_0x344938(0x28a)||_0x12f771[_0x344938(0x164)]!==_0x344938(0x28a)||_0x12f771['apiPassword']&&_0x12f771[_0x344938(0x2d6)]!==_0x344938(0x28a)){if(config[_0x344938(0x168)]){if(_0x12f771[_0x344938(0x223)]==_0x344938(0x28a))_0x12f771[_0x344938(0x223)]=config[_0x344938(0x223)];if(_0x12f771[_0x344938(0x164)]==_0x344938(0x28a))_0x12f771['apiSecret']=config[_0x344938(0x164)];if(_0x12f771['apiPassword']==_0x344938(0x28a))_0x12f771['apiPassword']=config[_0x344938(0x2d6)];}try{if(_0x12f771[_0x344938(0x330)])await testNewAPI(_0x12f771);}catch(_0x4961c6){if(_0x4961c6[_0x344938(0x31d)]()[_0x344938(0x16d)]('AuthenticationError')){logHistory(_0x344938(0x31b),_0x344938(0x1e4)),logHistory(_0x344938(0x31b),'Error\x20details:\x20'+_0x4961c6[_0x344938(0x31d)]()),proxyEmit(_0x344938(0x2e0),![]);return;}else{if(_0x4961c6[_0x344938(0x31d)]()[_0x344938(0x16d)](_0x344938(0x26f))){logHistory(_0x344938(0x31b),'Exchange\x20permission\x20denied\x20-\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange'),logHistory('error','Error\x20details:\x20'+_0x4961c6['toString']()),proxyEmit(_0x344938(0x2e0),![]);return;}else{logHistory('error','Error\x20occurred:\x20'+_0x4961c6[_0x344938(0x31d)]()),logger['debug'](_0x344938(0x2b8),_0x4961c6),proxyEmit('portfolio1',![]);return;}}}exchange?updateExchange(_0x12f771[_0x344938(0x223)],_0x12f771[_0x344938(0x164)],_0x12f771[_0x344938(0x2d6)]):await initExchange(_0x12f771[_0x344938(0x168)],_0x12f771['apiKey'],_0x12f771[_0x344938(0x164)],_0x12f771[_0x344938(0x2d6)],_0x12f771[_0x344938(0x286)]);await loadSymbols();const _0x5e7a75=await getCoins(0x0,![],_0x12f771['basecoin']);_0x25f6c4=cloneDeep(_0x5e7a75[0x1]);}else{const _0x137134=await getCoins();_0x25f6c4=cloneDeep(_0x137134[0x1]);}if(_0x12f771[_0x344938(0x1d1)]=='')proxyEmit(_0x344938(0x2e0),!![]),proxyEmit('portfolio2',_0x25f6c4);else{_0x25f6c4['forEach'](_0xb698a8=>{const _0x4fa842=_0x344938;if(_0xb698a8[_0x4fa842(0x18c)]!=_0x12f771['basecoin']&&allSymbols['includes'](_0xb698a8[_0x4fa842(0x2f7)]))_0x52efff[_0x4fa842(0x249)](_0xb698a8[_0x4fa842(0x2f7)]);});if(_0x52efff['length']==0x0)logHistory(_0x344938(0x31b),_0x344938(0x180));else{try{_0x5e5eff=await getTickers(_0x52efff);}catch(_0x4104c5){logHistory(_0x344938(0x31b),_0x344938(0x24d)),logger[_0x344938(0x1fe)](_0x344938(0x2b8),_0x4104c5),proxyEmit(_0x344938(0x2e0),![]);return;}_0x25f6c4['forEach'](_0x4b2733=>{const _0x871c2a=_0x344938;_0x4b2733[_0x871c2a(0x18c)]!=_0x12f771[_0x871c2a(0x1d1)]?_0x5e5eff[_0x4b2733[_0x871c2a(0x2f7)]]?_0x5e5eff[_0x4b2733[_0x871c2a(0x2f7)]][_0x871c2a(0x2aa)]?_0x1c32a8=_0x4b2733['reverse']?0x1/_0x5e5eff[_0x4b2733['symbol']][_0x871c2a(0x2aa)]:_0x5e5eff[_0x4b2733[_0x871c2a(0x2f7)]][_0x871c2a(0x2aa)]:_0x1c32a8=0x0:_0x1c32a8=0x0:_0x1c32a8=0x1,_0x4b2733[_0x871c2a(0x29f)]=formatResult(_0x1c32a8,0x8);}),await getMarketCap(_0x25f6c4),proxyEmit(_0x344938(0x2e0),!![]),proxyEmit(_0x344938(0x2f2),_0x25f6c4);}}}function truncateTradeAmount(_0x20f5b0,_0x2f3403){const _0x29fff7=_0x278096;let _0x51f452=0x0;try{_0x51f452=exchange[_0x29fff7(0x193)](_0x20f5b0,_0x2f3403);}catch(_0x1eff78){}return _0x51f452;}function checkMinimums(_0x2aa190){const _0x48f50e=_0x278096;let _0x30a755=!![];const _0x442a2f=!_0x2aa190[_0x48f50e(0x2e3)]?markets[_0x2aa190[_0x48f50e(0x2f7)]][_0x48f50e(0x27d)][_0x48f50e(0x1c9)][_0x48f50e(0x26d)]:markets[_0x2aa190['symbol']][_0x48f50e(0x27d)][_0x48f50e(0x218)]['min'],_0x533874=!_0x2aa190[_0x48f50e(0x2e3)]?markets[_0x2aa190[_0x48f50e(0x2f7)]][_0x48f50e(0x27d)][_0x48f50e(0x218)]['min']:markets[_0x2aa190[_0x48f50e(0x2f7)]][_0x48f50e(0x27d)][_0x48f50e(0x1c9)][_0x48f50e(0x26d)],_0x55186b=truncateTradeAmount(_0x2aa190[_0x48f50e(0x2f7)],_0x2aa190[_0x48f50e(0x268)]);_0x2aa190[_0x48f50e(0x268)]=_0x55186b;if(Math[_0x48f50e(0x191)](_0x55186b)<_0x442a2f)_0x30a755=![];if(Math[_0x48f50e(0x191)](_0x55186b)*_0x2aa190[_0x48f50e(0x2aa)]<_0x533874)_0x30a755=![];if(_0x2aa190[_0x48f50e(0x28e)]==_0x48f50e(0x205)){let _0x180e7d=config[_0x48f50e(0x232)][_0x48f50e(0x2c3)](_0x20894f=>_0x20894f[_0x48f50e(0x18c)]==_0x2aa190['coin']);if(_0x180e7d[_0x48f50e(0x266)]>0x0){if(Math[_0x48f50e(0x191)](_0x55186b)>_0x2aa190['number']-_0x180e7d['offset'])_0x30a755=![];}else{if(Math[_0x48f50e(0x191)](_0x55186b)>_0x2aa190['number'])_0x30a755=![];}}if(_0x2aa190[_0x48f50e(0x28e)]=='buy'){let _0x13db74=config['portfolio'][_0x48f50e(0x2c3)](_0xd0e889=>_0xd0e889['coin']==config[_0x48f50e(0x1d1)]),_0x130462=currentCoins['find'](_0x51931c=>_0x51931c[_0x48f50e(0x18c)]==config[_0x48f50e(0x1d1)]);if(_0x13db74[_0x48f50e(0x266)]>0x0){if(Math[_0x48f50e(0x191)](_0x55186b)*_0x2aa190[_0x48f50e(0x2aa)]>_0x130462[_0x48f50e(0x194)]-_0x13db74[_0x48f50e(0x266)])_0x30a755=![];}else{if(Math[_0x48f50e(0x191)](_0x55186b)*_0x2aa190[_0x48f50e(0x2aa)]>_0x130462[_0x48f50e(0x194)])_0x30a755=![];}}return _0x30a755;}async function getBalances(_0x4ad0c3=!![]){const _0x5b677f=_0x278096;if(botPaused)return;let _0x1740ff=0x0,_0x265611;const _0x5136d7=config['threshold'];if(config[_0x5b677f(0x2f8)]&&config['change24h']<0x0)await validate24hChanges();currentCoins['forEach'](_0x3aa907=>{const _0x45df9e=_0x5b677f;if(_0x3aa907[_0x45df9e(0x18c)]!=config[_0x45df9e(0x1d1)]){let _0xcdca20=gTicker[noslash(_0x3aa907['symbol'])];_0x265611=_0x3aa907['reverse']?0x1/_0xcdca20:_0xcdca20;}else _0x265611=0x1;let _0x144586=_0x3aa907[_0x45df9e(0x194)]*_0x265611;_0x1740ff+=_0x144586,_0x3aa907[_0x45df9e(0x2aa)]=formatResult(Number(_0x265611),0x8),_0x3aa907['value']=_0x144586;}),currentCoins[_0x5b677f(0x279)](_0x56ccc6=>{const _0x4bee71=_0x5b677f;let _0x4068de=config[_0x4bee71(0x232)]['find'](_0x25fc92=>_0x25fc92[_0x4bee71(0x18c)]==_0x56ccc6['coin']),_0x43ade6=Number(_0x4068de[_0x4bee71(0x22a)]),_0x5079ad=_0x56ccc6[_0x4bee71(0x2a4)]/_0x1740ff*0x64,_0x43f8f6=_0x43ade6*_0x1740ff/0x64/_0x56ccc6[_0x4bee71(0x2aa)]-_0x56ccc6[_0x4bee71(0x194)];_0x56ccc6[_0x4bee71(0x22a)]=formatResult(_0x5079ad,0x3),_0x56ccc6[_0x4bee71(0x172)]=formatResult(_0x43ade6,0x3),_0x56ccc6[_0x4bee71(0x268)]=formatResult(_0x43f8f6,0x8),_0x56ccc6[_0x4bee71(0x28e)]='',_0x56ccc6['valid']=![];if(_0x56ccc6['coin']!=config[_0x4bee71(0x1d1)]){if(_0x56ccc6['distribution']>_0x43ade6)_0x56ccc6['side']=_0x4bee71(0x205),_0x56ccc6[_0x4bee71(0x198)]=checkMinimums(_0x56ccc6);else _0x56ccc6[_0x4bee71(0x22a)]<_0x43ade6&&(_0x56ccc6[_0x4bee71(0x28e)]=_0x4bee71(0x2a2),_0x56ccc6[_0x4bee71(0x198)]=checkMinimums(_0x56ccc6));}_0x56ccc6[_0x4bee71(0x305)]=_0x56ccc6[_0x4bee71(0x22a)]/_0x56ccc6['target']-0x1;if(_0x56ccc6[_0x4bee71(0x310)]==_0x4bee71(0x227)||_0x56ccc6[_0x4bee71(0x310)]==_0x4bee71(0x1d6))_0x56ccc6[_0x4bee71(0x310)]='none';}),currentCoins[_0x5b677f(0x288)]((_0x32ce24,_0x4f3221)=>_0x32ce24[_0x5b677f(0x305)]<_0x4f3221[_0x5b677f(0x305)]?0x1:_0x4f3221[_0x5b677f(0x305)]<_0x32ce24[_0x5b677f(0x305)]?-0x1:0x0);const _0x18f409=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x18f409['eur'],'usd':_0x18f409[_0x5b677f(0x22b)],'portfolio':JSON['stringify'](currentCoins),'threshold':_0x5136d7},proxyEmit(_0x5b677f(0x32d),{'serverversion':serverversion,'balances':lastBalances});if(_0x4ad0c3){if(config['headless'])headlessMode({'portfolio':currentCoins,'threshold':_0x5136d7});else lockOrders==ORDERS[_0x5b677f(0x25b)]&&!coolingDown&&notifyBalance({'portfolio':currentCoins,'threshold':_0x5136d7});}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x5127d0=getNormalizedPerformance();getStartingBalances(_0x5127d0),emitPerformance(_0x5127d0);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}function getPnL(){const _0x52d6ab=_0x278096;let _0x43e1d0=dbCoinResults[_0x52d6ab(0x1c8)](_0x52d6ab(0x1cf))['value'](),_0x45087a=0x0;return Object[_0x52d6ab(0x1dd)](_0x43e1d0)[_0x52d6ab(0x279)](([_0x1f88eb,_0x43042b])=>{const _0x300bce=_0x52d6ab;_0x45087a+=_0x43042b[_0x300bce(0x183)];}),_0x45087a;}async function storePerformance(){const _0x1c5254=_0x278096;if(!lastBalances)return;let _0x2d8d6e=[],_0x2a5fa1;const _0x880de5=getPnL();let _0x32a8b2=JSON['parse'](lastBalances['portfolio']);_0x32a8b2[_0x1c5254(0x288)]((_0x4bd878,_0x31bfc2)=>_0x4bd878[_0x1c5254(0x18c)]>_0x31bfc2['coin']?0x1:_0x31bfc2[_0x1c5254(0x18c)]>_0x4bd878[_0x1c5254(0x18c)]?-0x1:0x0),_0x32a8b2[_0x1c5254(0x279)](_0x2389d6=>{const _0x3ec501=_0x1c5254;let _0x28b559={'coin':_0x2389d6[_0x3ec501(0x18c)],'number':_0x2389d6[_0x3ec501(0x194)],'price':_0x2389d6[_0x3ec501(0x2aa)]};_0x2d8d6e[_0x3ec501(0x249)](_0x28b559);});const _0x524312=await getFiat(),_0x3be1f5=getTimeStamp()[_0x1c5254(0x1dc)]('\x20')[0x0],_0x2b3505=dbPerformance[_0x1c5254(0x1c8)]('data')['find']({'date':_0x3be1f5})[_0x1c5254(0x2a4)]();_0x2a5fa1={'date':_0x3be1f5,'eur':_0x524312[_0x1c5254(0x315)],'usd':_0x524312[_0x1c5254(0x22b)],'coins':_0x2d8d6e,'pnl':_0x880de5},_0x2b3505?_0x2a5fa1['date']!=config[_0x1c5254(0x2ac)]&&dbPerformance[_0x1c5254(0x1c8)]('data')[_0x1c5254(0x2c3)]({'date':_0x3be1f5})[_0x1c5254(0x1e1)](_0x2a5fa1)[_0x1c5254(0x2e7)]():dbPerformance[_0x1c5254(0x1c8)]('data')[_0x1c5254(0x249)](_0x2a5fa1)[_0x1c5254(0x2e7)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x4217d2=_0x278096;let _0x3d63c8=[];if(dbPerformance[_0x4217d2(0x1f4)](_0x4217d2(0x217))[_0x4217d2(0x2a4)]()){let _0x4afd8b=dbPerformance[_0x4217d2(0x1c8)](_0x4217d2(0x217))['cloneDeep']()[_0x4217d2(0x2ae)](_0x480e83=>{const _0x3361f8=_0x4217d2;if(_0x480e83[_0x3361f8(0x1cf)][_0x3361f8(0x1be)]==0x0)return![];else return!![];})['sortBy'](_0x4217d2(0x2af))[_0x4217d2(0x2a4)](),_0x2490ea=[...config[_0x4217d2(0x226)]];_0x2490ea[_0x4217d2(0x288)]((_0x3aae93,_0x19e11c)=>_0x3aae93[_0x4217d2(0x2af)]>_0x19e11c['date']?-0x1:_0x19e11c[_0x4217d2(0x2af)]>_0x3aae93[_0x4217d2(0x2af)]?0x1:0x0);let _0x560d70=0x1,_0x135ffc=[],_0x577fec=0x0;_0x4afd8b[_0x4217d2(0x24f)]()[_0x4217d2(0x2e3)]()[_0x4217d2(0x279)]((_0x32d5d3,_0xe44da7)=>{const _0x173d78=_0x4217d2;if(_0x2490ea[_0x577fec]){if(_0x4afd8b[_0x4afd8b[_0x173d78(0x1be)]-_0xe44da7]&&_0x2490ea[_0x577fec]['date']==_0x4afd8b[_0x4afd8b[_0x173d78(0x1be)]-_0xe44da7][_0x173d78(0x2af)]){if(_0xe44da7<_0x4afd8b[_0x173d78(0x1be)]){let _0x5e4c12=0x0,_0x16979d=0x0;_0x4afd8b[_0x4afd8b[_0x173d78(0x1be)]-_0xe44da7]['coins'][_0x173d78(0x279)](_0x44296d=>{const _0x2ba76a=_0x173d78;_0x16979d+=_0x44296d[_0x2ba76a(0x194)]*_0x44296d['price'];}),_0x2490ea[_0x577fec][_0x173d78(0x206)][_0x173d78(0x279)](_0x5b3456=>{const _0x4a2558=_0x173d78;_0x5e4c12+=_0x5b3456[_0x4a2558(0x194)]*_0x5b3456['price'];}),_0x560d70*=_0x5e4c12/(_0x16979d-_0x5e4c12)+0x1;}_0x577fec++;}}let _0x37df9c=0x0;_0x32d5d3[_0x173d78(0x1cf)][_0x173d78(0x279)](_0x23844b=>{const _0x4388a6=_0x173d78;_0x37df9c+=_0x23844b[_0x4388a6(0x194)]*_0x23844b[_0x4388a6(0x29f)];}),_0x135ffc[_0x4afd8b[_0x173d78(0x1be)]-_0xe44da7-0x1]=_0x37df9c*(_0x560d70-0x1);});let _0x46d47c=[];_0x2490ea=[...config[_0x4217d2(0x226)]]||[];let _0x1701cf=0x0;_0x577fec=0x0,_0x4afd8b['forEach']((_0x1e5285,_0x53b5c)=>{const _0x400b54=_0x4217d2;if(_0x2490ea[_0x577fec]){const _0x2696e0=fns[_0x400b54(0x1b4)](_0x2490ea[_0x577fec]['date'],_0x400b54(0x187),new Date()),_0x31888e=fns[_0x400b54(0x1b4)](_0x1e5285[_0x400b54(0x2af)],_0x400b54(0x187),new Date());if(fns['isEqual'](_0x2696e0,_0x31888e)){let _0x2655c0=0x0;_0x2490ea[_0x577fec][_0x400b54(0x206)][_0x400b54(0x279)](_0x459158=>{const _0x255bae=_0x400b54;!_0x46d47c[_0x459158['coin']]?_0x46d47c[_0x459158[_0x255bae(0x18c)]]=_0x459158[_0x255bae(0x194)]:(_0x2655c0=_0x46d47c[_0x459158[_0x255bae(0x18c)]],_0x46d47c[_0x459158['coin']]+=_0x459158['number']);const _0x2a2ae5=_0x1e5285['coins'][_0x255bae(0x2c3)](_0x3f50bf=>_0x3f50bf[_0x255bae(0x18c)]==_0x459158[_0x255bae(0x18c)]);(!_0x2a2ae5||_0x2a2ae5[_0x255bae(0x194)]==0x0)&&(_0x1701cf+=(-_0x459158[_0x255bae(0x194)]-_0x2655c0)*_0x459158[_0x255bae(0x29f)]);}),_0x577fec++;}}_0x1e5285[_0x400b54(0x1cf)][_0x400b54(0x279)]((_0x4de351,_0x3d8990)=>{const _0x1f9a61=_0x400b54;_0x46d47c[_0x4de351[_0x1f9a61(0x18c)]]&&(_0x4de351[_0x1f9a61(0x2d8)]=_0x46d47c[_0x4de351['coin']]);}),_0x3d63c8[_0x400b54(0x249)]({'date':_0x1e5285[_0x400b54(0x2af)],'eur':_0x1e5285[_0x400b54(0x315)],'usd':_0x1e5285[_0x400b54(0x22b)],'offset':_0x135ffc[_0x53b5c],'netoffset':_0x1701cf,'coins':_0x1e5285['coins'],'pnl':_0x1e5285[_0x400b54(0x1df)]});});}return _0x3d63c8;}function emitPerformance(_0x4ae355){const _0x3f9038=_0x278096;_0x4ae355[_0x3f9038(0x1be)]!==0x0?(proxyEmit(_0x3f9038(0x1d3),_0x4ae355),lastPerformanceEmitted=getDate()):proxyEmit(_0x3f9038(0x1d3),[]);}function getPerf(_0x3eca94,_0x29dade){const _0x135521=_0x278096;let _0x3f6b1f=0x0,_0xb2c282=0x0,_0x3a4b00=0x0;_0x3eca94[_0x135521(0x1cf)][_0x135521(0x279)](_0x544cdc=>{const _0x115809=_0x135521;_0x3f6b1f+=_0x544cdc['number']*_0x544cdc[_0x115809(0x29f)];});_0x29dade&&(_0x3f6b1f+=_0x3eca94[_0x135521(0x266)]);if(config['basecoin']===_0x135521(0x244)||config['basecoin']===_0x135521(0x18f)||config[_0x135521(0x1d1)]===_0x135521(0x1b3))_0xb2c282=_0x3f6b1f*_0x3eca94[_0x135521(0x315)],_0x3a4b00=_0x3f6b1f*_0x3eca94['usd'];else{if(usdBasecoins['includes'](config['basecoin']))_0xb2c282=_0x3f6b1f*_0x3eca94[_0x135521(0x315)]/_0x3eca94[_0x135521(0x22b)],_0x3a4b00=_0x3f6b1f;else config[_0x135521(0x1d1)]===_0x135521(0x2ea)&&(_0xb2c282=_0x3f6b1f,_0x3a4b00=_0x3f6b1f*_0x3eca94[_0x135521(0x22b)]/_0x3eca94[_0x135521(0x315)]);}return[_0x3f6b1f,_0xb2c282,_0x3a4b00];}function CurrencyFactor(_0xe119e1,_0x552235,_0x5bffc4){const _0x2dcc3d=_0x278096;let _0x24cf2f;if(_0x552235===_0x2dcc3d(0x244)||_0x552235==='ETH'||_0x552235===_0x2dcc3d(0x1b3))_0x24cf2f=_0x5bffc4===_0x2dcc3d(0x2ea)?_0xe119e1[_0x2dcc3d(0x315)]:_0xe119e1[_0x2dcc3d(0x22b)];else{if(usdBasecoins[_0x2dcc3d(0x16d)](_0x552235))_0x24cf2f=_0x5bffc4==='EUR'?_0xe119e1[_0x2dcc3d(0x315)]/_0xe119e1[_0x2dcc3d(0x22b)]:0x1;else _0x552235==='EUR'&&(_0x24cf2f=_0x5bffc4===_0x2dcc3d(0x2ea)?0x1:_0xe119e1[_0x2dcc3d(0x22b)]/_0xe119e1[_0x2dcc3d(0x315)]);}return _0x24cf2f;}function getKPIs(_0x261fc5,_0x3b1bb4=_0x278096(0x2ea)){const _0x2e87b6=_0x278096,_0x256f32=config[_0x2e87b6(0x1d1)],_0x5dd136=lastBalances,_0x3ed1d9=currentCoins,_0x14bf4b=getNormalizedPerformance(),_0x58005f=CurrencyFactor(_0x5dd136,config[_0x2e87b6(0x1d1)],_0x3b1bb4);let _0x585cb2=0x0;_0x3ed1d9[_0x2e87b6(0x279)](_0x1b07d4=>{_0x585cb2+=_0x1b07d4['number']*_0x1b07d4['last'];});_0x261fc5[_0x2e87b6(0x16d)](_0x2e87b6(0x1f5))&&(_0x585cb2*=_0x58005f);let _0x5aaed3;if(_0x585cb2!==0x0){if(_0x261fc5===_0x2e87b6(0x1d1)||_0x261fc5===_0x2e87b6(0x1f5)){if(_0x261fc5===_0x2e87b6(0x1d1))_0x5aaed3=(_0x585cb2/startingBalances[_0x2e87b6(0x1d1)]-0x1)*0x64;else{if(_0x3b1bb4===_0x2e87b6(0x2ea))_0x5aaed3=(_0x585cb2/startingBalances['eur']-0x1)*0x64;else _0x5aaed3=(_0x585cb2/startingBalances[_0x2e87b6(0x22b)]-0x1)*0x64;}}if(_0x261fc5['includes'](_0x2e87b6(0x307))){let _0x5d89dd=0x0;if(startingBalances['coins'])_0x3ed1d9['forEach'](_0x519c06=>{const _0x1a9528=_0x2e87b6;let _0x59184b=startingBalances['coins']['find'](_0x5e2bc2=>_0x5e2bc2[_0x1a9528(0x18c)]===_0x519c06[_0x1a9528(0x18c)]);if(_0x59184b&&_0x59184b['coin']&&_0x519c06[_0x1a9528(0x194)]!==0x0)_0x5d89dd+=_0x59184b['number']*_0x519c06['last'];});let _0x5e2e98=0x0;if(_0x14bf4b[_0x2e87b6(0x1be)]!==0x0){let _0x35493d=_0x14bf4b[_0x14bf4b[_0x2e87b6(0x1be)]-0x1];_0x5e2e98=_0x35493d[_0x2e87b6(0x1f1)];}_0x5d89dd-=_0x5e2e98;let _0x1f82bd;_0x261fc5===_0x2e87b6(0x182)&&(_0x1f82bd=startingBalances['basecoin']),_0x261fc5===_0x2e87b6(0x316)&&(_0x1f82bd=_0x3b1bb4===_0x2e87b6(0x2ea)?startingBalances['eur']:startingBalances[_0x2e87b6(0x22b)],_0x5d89dd*=_0x58005f),_0x5aaed3=(_0x585cb2-_0x5d89dd)/_0x1f82bd*0x64,_0x585cb2=_0x585cb2-_0x5d89dd;}if(_0x261fc5[_0x2e87b6(0x16d)](_0x2e87b6(0x1df))){if(_0x14bf4b['length']!==0x0&&_0x3ed1d9[_0x2e87b6(0x1be)]!==0x0){let _0x4571a2,_0x4bff87=_0x14bf4b[_0x14bf4b[_0x2e87b6(0x1be)]-0x1][_0x2e87b6(0x1df)];_0x261fc5[_0x2e87b6(0x16d)](_0x2e87b6(0x1f5))?(_0x4571a2=_0x3b1bb4===_0x2e87b6(0x2ea)?startingBalances[_0x2e87b6(0x315)]:startingBalances[_0x2e87b6(0x22b)],_0x4bff87*=CurrencyFactor(_0x5dd136,_0x256f32,_0x3b1bb4)):_0x4571a2=startingBalances['basecoin'],_0x5aaed3=_0x4bff87/_0x4571a2*0x64,_0x585cb2=_0x4bff87;}}if(_0x5aaed3){if(_0x5aaed3<0x64)_0x5aaed3=_0x5aaed3['toFixed'](0x2);else{if(_0x5aaed3<0x3e8)_0x5aaed3=_0x5aaed3['toFixed'](0x1);else _0x5aaed3=_0x5aaed3[_0x2e87b6(0x21a)](0x0);}}else _0x5aaed3=Number('0')['toFixed'](0x2);if(_0x585cb2){if(Math['abs'](_0x585cb2)<0.000001)_0x585cb2=_0x585cb2[_0x2e87b6(0x21a)](0x2);else{if(Math['abs'](_0x585cb2)<0.1)_0x585cb2=_0x585cb2['toFixed'](0x6);else{if(Math[_0x2e87b6(0x191)](_0x585cb2)<0x1)_0x585cb2=_0x585cb2[_0x2e87b6(0x21a)](0x5);else{if(Math[_0x2e87b6(0x191)](_0x585cb2)<0xa)_0x585cb2=_0x585cb2['toFixed'](0x4);else{if(Math[_0x2e87b6(0x191)](_0x585cb2)<0x64)_0x585cb2=_0x585cb2['toFixed'](0x3);else{if(Math['abs'](_0x585cb2)<0x3e8)_0x585cb2=_0x585cb2[_0x2e87b6(0x21a)](0x2);else _0x585cb2=_0x585cb2[_0x2e87b6(0x21a)](0x2);}}}}}}else _0x585cb2=Number('0')[_0x2e87b6(0x21a)](0x2);}else _0x5aaed3=Number('0')[_0x2e87b6(0x21a)](0x2);if(_0x5aaed3>=0x0)_0x5aaed3='+'+_0x5aaed3;return{'value':_0x585cb2,'change':_0x5aaed3};}async function getStartingBalances(_0x4ac1f2,_0x399c4f=!![]){const _0x57fb3c=_0x278096;if(_0x4ac1f2['length']!==0x0){const [_0x46fd7c,_0x217199,_0x178b8a]=getPerf(_0x4ac1f2[0x0],!![]);let _0x566d94=[];config[_0x57fb3c(0x232)]['forEach'](_0x4737a2=>{const _0x58d0d3=_0x57fb3c;let _0x5d8ae8=0x0,_0x2837db;config['liquidity'][_0x58d0d3(0x279)](_0x50f69a=>{const _0x2f6071=_0x58d0d3;let _0x36b798=_0x50f69a[_0x2f6071(0x206)][_0x2f6071(0x2c3)](_0x522092=>_0x522092[_0x2f6071(0x18c)]==_0x4737a2[_0x2f6071(0x18c)]);if(_0x36b798){_0x5d8ae8+=_0x36b798[_0x2f6071(0x194)];if(!_0x2837db)_0x2837db=_0x36b798[_0x2f6071(0x29f)];}}),_0x566d94[_0x58d0d3(0x249)]({'coin':_0x4737a2['coin'],'number':_0x5d8ae8,'initialprice':_0x2837db});});const _0x48aa32={'basecoin':_0x46fd7c,'eur':_0x217199,'usd':_0x178b8a,'coins':_0x566d94};if(_0x399c4f)proxyEmit(_0x57fb3c(0x2ca),_0x48aa32);startingBalances=_0x48aa32;}}function headlessMode(_0x385165){const _0x917708=_0x278096;let _0x1a1a00=_0x385165[_0x917708(0x232)],_0x5105bc=_0x385165[_0x917708(0x32a)],_0x13bbd1=[];for(let _0x1d03c2 of _0x1a1a00){if(_0x1d03c2[_0x917708(0x18c)]!=config[_0x917708(0x1d1)]){if(_0x1d03c2['delta']>=_0x5105bc/0x64){if(_0x1d03c2[_0x917708(0x198)])_0x13bbd1[_0x917708(0x249)](_0x1d03c2);}else{if(_0x1d03c2[_0x917708(0x305)]<=-_0x5105bc/0x64){if(_0x1d03c2['valid'])_0x13bbd1[_0x917708(0x249)](_0x1d03c2);}}}}_0x13bbd1['length']>0x0&&placeOrder(_0x13bbd1);}function notifyBalance(_0x274506){const _0x2713ef=_0x278096;let _0x1c4715=_0x274506[_0x2713ef(0x232)],_0x2a7d52=_0x274506['threshold'],_0x46e4a5=[];for(let _0x4b05fb of _0x1c4715){if(_0x4b05fb[_0x2713ef(0x18c)]!=config[_0x2713ef(0x1d1)]){if(_0x4b05fb[_0x2713ef(0x305)]>=_0x2a7d52/0x64){if(_0x4b05fb[_0x2713ef(0x198)])_0x46e4a5[_0x2713ef(0x249)](_0x4b05fb);}else{if(_0x4b05fb[_0x2713ef(0x305)]<=-_0x2a7d52/0x64){if(_0x4b05fb[_0x2713ef(0x198)])_0x46e4a5['push'](_0x4b05fb);}}}}if(_0x46e4a5[_0x2713ef(0x1be)]>0x0){let _0x3e4eb5=_0x46e4a5[_0x2713ef(0x219)](_0x48d341=>_0x48d341[_0x2713ef(0x18c)]);_0x3e4eb5['sort']();let _0x4332ff=_0x3e4eb5[_0x2713ef(0x2e4)](',\x20');if(!lastCoinsToBalance)logHistory(_0x2713ef(0x204),_0x2713ef(0x1c0));lastCoinsToBalance=_0x4332ff;}}function symbolToCoin(_0xd9abc0){const _0x3f2643=_0x278096;let _0x318faf;if(_0xd9abc0[_0x3f2643(0x16d)]('/'+config[_0x3f2643(0x1d1)]))_0x318faf=_0xd9abc0['replace']('/'+config[_0x3f2643(0x1d1)],'');if(_0xd9abc0['includes'](config[_0x3f2643(0x1d1)]+'/'))_0x318faf=_0xd9abc0[_0x3f2643(0x1f9)](config[_0x3f2643(0x1d1)]+'/','');return _0x318faf;}function setLockOrders(_0x22021a){const _0x589409=_0x278096;lockOrders=_0x22021a,logger[_0x589409(0x1fe)]('Set\x20lock\x20orders\x20to:\x20'+Object[_0x589409(0x28c)](ORDERS)[lockOrders]);}async function unlockOrders(_0xb920a3=![]){const _0x13bb98=_0x278096;if(allOrdersPlaced&&lockOrders==ORDERS['LOCKED']){setLockOrders(ORDERS[_0x13bb98(0x1f3)]);if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);if(_0xb920a3){const _0x1451f3=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x1451f3,setBlockTransactionDetection(![]);}validateOrdersState=_0x13bb98(0x2d8),persistOpenOrders([]),setLockOrders(ORDERS[_0x13bb98(0x25b)]);}}async function validateOrders(_0x5f056f){const _0xb64685=_0x278096;if(_0x5f056f)validateOrdersState=_0x5f056f;logger[_0xb64685(0x1fe)]('1\x20-\x20Validate\x20orders:\x20'+validateOrdersState+_0xb64685(0x284)+Object['keys'](ORDERS)[lockOrders]);let _0x29e2b6=[],_0x4b49cd=config[_0xb64685(0x19e)]==_0xb64685(0x1c3)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0xb64685(0x32c)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS['LOCKED'])return;logger['debug'](_0xb64685(0x2f3)+validateOrdersState);for(let _0x2ea34c=lastOrders[_0xb64685(0x1be)]-0x1;_0x2ea34c>=0x0;_0x2ea34c--){let _0x57bfe1=lastOrders[_0x2ea34c],_0x12e349=![];_0x57bfe1[_0xb64685(0x227)]>0x0&&(_0x12e349=!![]),_0x29e2b6[_0xb64685(0x249)](_0x12e349),_0x12e349&&config['ordertype']!='market'&&logHistory(_0xb64685(0x1ea),'Order\x20filled:\x20'+_0x57bfe1[_0xb64685(0x2f7)]+'\x20'+_0x57bfe1[_0xb64685(0x28e)]+'\x20#'+formatResult(_0x57bfe1['filled'],0x8)+'\x20@'+formatResult(_0x57bfe1[_0xb64685(0x29f)],0x8)),_0x12e349&&lastOrders[_0xb64685(0x1a2)](_0x2ea34c,0x1);}persistOpenOrders(lastOrders);const _0x4c962e=coolingDown?_0xb64685(0x264):_0xb64685(0x2df);if(validateOrdersState=='initial'){validateOrdersState=_0xb64685(0x21c);if(_0x29e2b6[_0xb64685(0x16d)](![])){}else await unlockOrders();}else{if(validateOrdersState==_0xb64685(0x21c)){if(_0x29e2b6['includes'](![])){}else await unlockOrders();}else{if(validateOrdersState=='final'){let _0x5a67e3=!![];if(_0x29e2b6[_0xb64685(0x16d)](![])){if(config[_0xb64685(0x19e)]==_0xb64685(0x1c3))logHistory(_0xb64685(0x2de),_0xb64685(0x2cc)+Math['round'](_0x4b49cd*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x4c962e),await unlockOrders(!![]);else{_0x5a67e3=await cancelOrders();if(_0x5a67e3)logHistory('success',_0xb64685(0x19d)+Math[_0xb64685(0x1a5)](_0x4b49cd*validateOrderInterval/0xea60)+_0xb64685(0x1d8)+_0x4c962e),await unlockOrders(!![]);else{validateOrdersState='ongoing',logHistory('error',_0xb64685(0x197)+Math[_0xb64685(0x1a5)](_0x4b49cd*validateOrderInterval/0xea60)+_0xb64685(0x1d8)+_0x4c962e),logHistory(_0xb64685(0x31b),_0xb64685(0x1a7));const _0x181d9e=config[_0xb64685(0x19e)]==_0xb64685(0x1c3)?validateOrderTimeout*0x3c*0x3e8:config[_0xb64685(0x32c)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x33529f=_0xb64685;validateOrders(_0x33529f(0x245));},_0x181d9e);}}}else await unlockOrders(!![]);}else{if(validateOrdersState==_0xb64685(0x328)){if(config[_0xb64685(0x19e)]!=_0xb64685(0x1c3))logHistory('success',_0xb64685(0x2cb)+_0x4c962e);await unlockOrders(!![]);}}}}}async function cancelOrders(){const _0xd7d640=_0x278096;let _0x5dba7a=!![],_0x17e569;for(const _0x1c2087 of lastOrders){let _0x379267=![],_0x583fc1=0x0;while(!_0x379267&&_0x583fc1<maxRetries){try{const _0x467cef=await exchange[_0xd7d640(0x259)](_0x1c2087[_0xd7d640(0x2bf)],_0x1c2087[_0xd7d640(0x2f7)]);_0x379267=!![];}catch(_0x1cb3e6){_0x1cb3e6[_0xd7d640(0x31d)]()['includes'](_0xd7d640(0x165))?_0x379267=!![]:(_0x17e569=_0x1cb3e6,_0x379267=![]);}!_0x379267&&(_0x583fc1++,await sleep(retryInterval));}_0x5dba7a=_0x5dba7a&&_0x379267;}return!_0x5dba7a&&await handleError(_0x17e569,_0xd7d640(0x271)),_0x5dba7a;}async function initCoinResults(_0xf905e8){const _0x4a868c=_0x278096;_0xf905e8?logger[_0x4a868c(0x1fe)](_0x4a868c(0x224)+_0xf905e8):logger[_0x4a868c(0x1fe)](_0x4a868c(0x210)),config[_0x4a868c(0x232)][_0x4a868c(0x279)](_0x1d6297=>{const _0x296d4e=_0x4a868c;if(!_0x1d6297[_0x296d4e(0x2dc)]&&_0x1d6297[_0x296d4e(0x18c)]!=config[_0x296d4e(0x1d1)]){const _0x3a77ca=currentCoins[_0x296d4e(0x2c3)](_0x4b7f44=>_0x4b7f44[_0x296d4e(0x18c)]==_0x1d6297['coin']),_0x58c10e=gTicker[noslash(_0x1d6297[_0x296d4e(0x2f7)])];let _0x2a457f=_0x3a77ca?_0x3a77ca[_0x296d4e(0x194)]:null,_0x420a70=_0x1d6297[_0x296d4e(0x2e3)]?0x1/_0x58c10e:_0x58c10e,_0x132130;config[_0x296d4e(0x226)]['forEach'](_0x2e3baa=>{const _0x43854f=_0x296d4e;!_0x132130&&(_0x132130=_0x2e3baa[_0x43854f(0x206)][_0x43854f(0x2c3)](_0x50c15e=>_0x50c15e[_0x43854f(0x18c)]==_0x1d6297[_0x43854f(0x18c)]),_0x132130&&(_0x2a457f=_0x132130['number'],_0x420a70=_0x132130[_0x43854f(0x29f)]));});let _0x117cfd=dbCoinResults[_0x296d4e(0x1c8)](_0x296d4e(0x1cf))[_0x296d4e(0x2c3)]({'coin':_0x1d6297[_0x296d4e(0x18c)]})[_0x296d4e(0x2a4)]();if(!_0x117cfd){const _0x35c7b9={'coin':_0x1d6297[_0x296d4e(0x18c)],'number':_0x2a457f,'breakeven':_0x420a70,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x296d4e(0x1c8)](_0x296d4e(0x1cf))[_0x296d4e(0x249)](_0x35c7b9)[_0x296d4e(0x2e7)]();}else{if(_0xf905e8&&_0x1d6297[_0x296d4e(0x18c)]==_0xf905e8){const _0xe5e3d2={'coin':_0x1d6297[_0x296d4e(0x18c)],'number':_0x2a457f,'breakeven':_0x420a70,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get'](_0x296d4e(0x1cf))[_0x296d4e(0x2c3)]({'coin':_0x1d6297['coin']})[_0x296d4e(0x1e1)](_0xe5e3d2)[_0x296d4e(0x2e7)]();}}}});}async function placeOrder(_0x1cb27a){const _0x178d8f=_0x278096,_0x1c3172=config[_0x178d8f(0x19e)]==_0x178d8f(0x1c3)?_0x178d8f(0x1c3):_0x178d8f(0x28d);if(lockOrders==ORDERS[_0x178d8f(0x25b)]&&!coolingDown){setLockOrders(ORDERS[_0x178d8f(0x333)]);while(transactionDetectionOngoing){await sleep(0x64);}logger[_0x178d8f(0x1fe)](_0x178d8f(0x225)+_0x1cb27a[_0x178d8f(0x219)](_0x228092=>_0x228092[_0x178d8f(0x18c)])['join'](',\x20')),lastCoinsToBalance='',allOrdersPlaced=![],validateOrdersState=_0x178d8f(0x2d8);let _0x59a00b=![];lastOrders=[];const _0x14fb3b=config[_0x178d8f(0x32a)];for(const _0x40aadf of _0x1cb27a){let _0x549793,_0x5f4696,_0x4fbc1a,_0x3aef3e,_0x2bce2a,_0x288489=_0x40aadf[_0x178d8f(0x2f7)];logger['debug'](_0x178d8f(0x212)+_0x40aadf[_0x178d8f(0x18c)]+'\x20'+_0x40aadf[_0x178d8f(0x194)]+'\x20'+_0x40aadf['last']+'\x20'+_0x40aadf[_0x178d8f(0x22a)]+'%\x20'+_0x40aadf[_0x178d8f(0x172)]+'%\x20'+(0x64*_0x40aadf[_0x178d8f(0x305)])['toFixed'](0x2)+_0x178d8f(0x248)+_0x14fb3b[_0x178d8f(0x21a)](0x2)+'%)');const _0x129466=currentCoins[_0x178d8f(0x2c3)](_0x26ce79=>_0x26ce79[_0x178d8f(0x18c)]==_0x40aadf[_0x178d8f(0x18c)]);_0x129466&&(_0x129466[_0x178d8f(0x324)]=_0x40aadf[_0x178d8f(0x194)]);try{const _0x58e9cb=await exchange[_0x178d8f(0x1ef)](_0x288489);_0x549793=_0x40aadf[_0x178d8f(0x2e3)]?0x1/_0x40aadf[_0x178d8f(0x2aa)]:_0x40aadf['last'],_0x5f4696=_0x58e9cb['bid'],_0x4fbc1a=_0x58e9cb[_0x178d8f(0x2ce)];_0x40aadf[_0x178d8f(0x2e3)]?(_0x3aef3e=_0x40aadf[_0x178d8f(0x28e)]==_0x178d8f(0x2a2)?_0x178d8f(0x205):'buy',_0x2bce2a=Math[_0x178d8f(0x191)](_0x40aadf[_0x178d8f(0x268)])/_0x549793):(_0x3aef3e=_0x40aadf['side'],_0x2bce2a=Math[_0x178d8f(0x191)](_0x40aadf[_0x178d8f(0x268)]));_0x1c3172==_0x178d8f(0x28d)&&(config[_0x178d8f(0x19e)]==_0x178d8f(0x2b2)&&(_0x549793=_0x3aef3e==_0x178d8f(0x2a2)?_0x5f4696:_0x4fbc1a),config['ordertype']==_0x178d8f(0x1af)&&(_0x549793=_0x3aef3e==_0x178d8f(0x2a2)?_0x4fbc1a:_0x5f4696));_0x2bce2a=formatResult(_0x2bce2a,0x8),_0x549793=formatResult(_0x549793,0x8);const _0xb88470=_0x3aef3e==_0x178d8f(0x205)?config[_0x178d8f(0x30d)]?String[_0x178d8f(0x289)]('0x'+config[_0x178d8f(0x30d)])+'\x20':'':config[_0x178d8f(0x2bc)]?String['fromCodePoint']('0x'+config[_0x178d8f(0x2bc)])+'\x20':'',_0x534b6f=_0x1c3172==_0x178d8f(0x1c3)?_0x178d8f(0x166):config[_0x178d8f(0x19e)]==_0x178d8f(0x2b2)?_0x178d8f(0x178):_0x178d8f(0x201),_0x2a08a7=(Math[_0x178d8f(0x2d3)](Math[_0x178d8f(0x243)]()*0x35a4e900)+0x5f5e100)[_0x178d8f(0x31d)]();lastOrders[_0x178d8f(0x249)]({'customId':_0x2a08a7,'symbol':_0x288489,'coin':_0x40aadf[_0x178d8f(0x18c)],'amount':_0x2bce2a,'price':_0x549793,'side':_0x3aef3e,'reverse':_0x40aadf[_0x178d8f(0x2e3)],'filled':0x0});let _0x247c25;_0x1c3172=='market'?_0x3aef3e==_0x178d8f(0x2a2)&&[_0x178d8f(0x30f),_0x178d8f(0x29d),_0x178d8f(0x281),_0x178d8f(0x1c4),_0x178d8f(0x196)][_0x178d8f(0x16d)](config[_0x178d8f(0x168)])?_0x247c25=await exchange[_0x178d8f(0x2f1)](_0x288489,_0x1c3172,_0x3aef3e,_0x2bce2a,_0x549793):_0x247c25=await exchange['createOrder'](_0x288489,_0x1c3172,_0x3aef3e,_0x2bce2a,undefined):_0x247c25=await exchange[_0x178d8f(0x2f1)](_0x288489,_0x1c3172,_0x3aef3e,_0x2bce2a,_0x549793);const _0x5d1a92=lastOrders[_0x178d8f(0x1be)]-0x1;if(_0x5d1a92>=0x0&&lastOrders[_0x5d1a92]['customId']==_0x2a08a7){lastOrders[_0x5d1a92]['orderId']=_0x247c25['id'];if(_0x247c25[_0x178d8f(0x1c9)])lastOrders[_0x5d1a92][_0x178d8f(0x1c9)]=_0x247c25[_0x178d8f(0x1c9)];if(_0x247c25[_0x178d8f(0x29f)])lastOrders[_0x5d1a92][_0x178d8f(0x29f)]=_0x247c25[_0x178d8f(0x29f)];lastOrders[_0x5d1a92][_0x178d8f(0x2a1)]=_0x247c25[_0x178d8f(0x2a1)];}if(_0x247c25[_0x178d8f(0x1c9)])_0x2bce2a=_0x247c25[_0x178d8f(0x1c9)];if(_0x247c25[_0x178d8f(0x29f)])_0x549793=_0x247c25[_0x178d8f(0x29f)];if(_0x1c3172==_0x178d8f(0x1c3))logHistory(_0x178d8f(0x1ea),''+_0xb88470+_0x534b6f+_0x178d8f(0x1eb)+_0x288489+'\x20'+_0x3aef3e+'\x20#'+formatResult(_0x2bce2a,0x8)+'\x20@'+formatResult(_0x549793,0x8));else logHistory(_0x178d8f(0x1ea),''+_0xb88470+_0x534b6f+_0x178d8f(0x1eb)+_0x288489+'\x20'+_0x3aef3e+'\x20#'+formatResult(_0x2bce2a,0x8)+'\x20@'+formatResult(_0x549793,0x8));logger['debug']('ID:\x20'+_0x247c25['id']+_0x178d8f(0x220)+_0x2a08a7);if(config[_0x178d8f(0x2a8)]!=0x0){let _0x89277c=null;if(cooldownTracker[_0x178d8f(0x1be)]==config['cooldown']-0x1)_0x89277c=cooldownTracker[_0x178d8f(0x2b4)]();const _0x5d047a=getTimeStamp();cooldownTracker['push'](_0x5d047a);if(_0x89277c){const _0x276646=fns[_0x178d8f(0x251)](new Date(_0x5d047a),new Date(_0x89277c));if(_0x276646<cooldownInterval){logHistory('error',_0x178d8f(0x230)+config[_0x178d8f(0x2a8)]+_0x178d8f(0x1d4)+cooldownInterval/0x3c+_0x178d8f(0x2b5)+cooldownPeriod/(0xe10*0x3e8)+'\x20hour'),coolingDown=!![];break;}}}}catch(_0x21a656){if(_0x21a656[_0x178d8f(0x31d)]()[_0x178d8f(0x16d)](_0x178d8f(0x190)))lastOrders=lastOrders[_0x178d8f(0x2ae)](_0x2c091b=>_0x2c091b['symbol']!=_0x288489),logHistory(_0x178d8f(0x31b),_0x178d8f(0x21b)+_0x288489),_0x59a00b=!![];else{if(_0x21a656['toString']()[_0x178d8f(0x16d)](_0x178d8f(0x30b)))lastOrders=lastOrders['filter'](_0x3f5df8=>_0x3f5df8[_0x178d8f(0x2f7)]!=_0x288489),logHistory(_0x178d8f(0x31b),_0x178d8f(0x2a0)+_0x288489),_0x59a00b=!![];else{if(_0x21a656[_0x178d8f(0x31d)]()[_0x178d8f(0x16d)]('InvalidOrder'))lastOrders=lastOrders[_0x178d8f(0x2ae)](_0xc19c78=>_0xc19c78[_0x178d8f(0x2f7)]!=_0x288489),logHistory(_0x178d8f(0x31b),'Order\x20is\x20invalid:\x20'+_0x288489),logger[_0x178d8f(0x1fe)](_0x21a656),_0x59a00b=!![];else _0x21a656[_0x178d8f(0x31d)]()[_0x178d8f(0x16d)](_0x178d8f(0x2fb))?(lastOrders=lastOrders[_0x178d8f(0x2ae)](_0x4864e4=>_0x4864e4[_0x178d8f(0x2f7)]!=_0x288489),logHistory(_0x178d8f(0x31b),_0x178d8f(0x21b)+_0x288489),_0x59a00b=!![]):(lastOrders=lastOrders[_0x178d8f(0x2ae)](_0x5f0146=>_0x5f0146[_0x178d8f(0x2f7)]!=_0x288489),await handleError(_0x21a656,_0x178d8f(0x16c),_0x288489));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x178d8f(0x1be)]>0x0){const _0x555467=config[_0x178d8f(0x19e)]==_0x178d8f(0x1c3)?validateOrderTimeout*0x3c*0x3e8:config[_0x178d8f(0x32c)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x2bf972=_0x178d8f;validateOrders(_0x2bf972(0x245));},_0x555467);}else unlockOrders();_0x59a00b&&config[_0x178d8f(0x2f8)]&&(logHistory('error',_0x178d8f(0x1a0)+pauseBotMsg),await pauseBot(pauseBotInterval)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x178d8f(0x2de),_0x178d8f(0x303)));}else{if(coolingDown)!config[_0x178d8f(0x2f8)]&&logHistory(_0x178d8f(0x31b),_0x178d8f(0x252));else lockOrders!=ORDERS[_0x178d8f(0x25b)]&&(!config['headless']&&(config[_0x178d8f(0x19e)]==_0x178d8f(0x1c3)?logHistory(_0x178d8f(0x31b),_0x178d8f(0x270)):logHistory(_0x178d8f(0x31b),_0x178d8f(0x334))));}}function persistOpenOrders(_0x591399){const _0x484c36=_0x278096,_0x50841d={...config,'openOrders':_0x591399};let _0x2013a5=dbConfig[_0x484c36(0x1c8)](_0x484c36(0x2d5))[_0x484c36(0x2c3)]({'botID':botID})[_0x484c36(0x2a4)]();_0x2013a5&&dbConfig[_0x484c36(0x1c8)](_0x484c36(0x2d5))[_0x484c36(0x2c3)]({'botID':botID})['assign'](_0x50841d)[_0x484c36(0x2e7)]();}function restoreOrders(){const _0x3fd856=_0x278096;let _0x4c0fdf;config[_0x3fd856(0x1ac)]&&allOpenOrders['forEach'](_0x490603=>{const _0x208caa=_0x3fd856,_0xf48970=config[_0x208caa(0x1ac)][_0x208caa(0x2c3)](_0x3dd8a5=>_0x3dd8a5[_0x208caa(0x2bf)]==_0x490603['id']);_0xf48970&&(lastOrders[_0x208caa(0x249)](_0xf48970),_0x4c0fdf=_0x490603[_0x208caa(0x2ab)]);});if(lastOrders[_0x3fd856(0x1be)]>0x0){setLockOrders(ORDERS[_0x3fd856(0x333)]),validateOrdersState=_0x3fd856(0x21c),allOrdersPlaced=!![];const _0xc3c60e=new Date()[_0x3fd856(0x1ca)](),_0x258103=config[_0x3fd856(0x19e)]==_0x3fd856(0x1c3)?validateOrderTimeout*0x3c*0x3e8:config[_0x3fd856(0x32c)]*0x3c*0x3e8;if(_0x4c0fdf+_0x258103>_0xc3c60e){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x4436aa=_0x3fd856;validateOrders(_0x4436aa(0x245));},_0x4c0fdf+_0x258103-_0xc3c60e);}else validateOrders('final');}}async function sendMetricsTelegram(){const _0x58c954=_0x278096;if(!coinsLoaded){process[_0x58c954(0x255)]({'telegrammsg':_0x58c954(0x2f5)},_0x27f891=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x38b6d7='';if(config[_0x58c954(0x302)])_0x38b6d7=_0x58c954(0x2ba)+config['botname']+_0x58c954(0x23c);else _0x38b6d7=_0x58c954(0x246)+botID+'\x20metrics:</b>\x20\x0a\x0a';const _0x422758=config[_0x58c954(0x1d1)],_0x2f3a71=config['fiat'],_0x2368b8=getKPIs(_0x58c954(0x1d1)),_0x3f9386=getKPIs('fiat',_0x2f3a71),_0xfa58f3=getKPIs('net-basecoin'),_0x10eda3=getKPIs(_0x58c954(0x316),_0x2f3a71),_0x5af470=getKPIs(_0x58c954(0x1e0)),_0x177259=getKPIs(_0x58c954(0x241),_0x2f3a71);_0x422758[_0x58c954(0x16d)](_0x2f3a71)?(_0x38b6d7+=_0x58c954(0x1e5),_0x38b6d7+=_0x58c954(0x283)+_0x422758+':\x20'+_0x2368b8['value']+'\x20('+_0x2368b8[_0x58c954(0x1bf)]+_0x58c954(0x175),_0x38b6d7+=_0x58c954(0x1b6)+_0x422758+':\x20'+_0xfa58f3[_0x58c954(0x2a4)]+'\x20('+_0xfa58f3[_0x58c954(0x1bf)]+'%)\x0a',_0x38b6d7+=_0x58c954(0x2ff)+_0x422758+':\x20'+_0x5af470[_0x58c954(0x2a4)]+'\x20('+_0x5af470[_0x58c954(0x1bf)]+_0x58c954(0x175),_0x38b6d7+=_0x58c954(0x1b5)):(_0x38b6d7+='<pre>',_0x38b6d7+=_0x58c954(0x283)+_0x422758+':\x20'+_0x2368b8[_0x58c954(0x2a4)]+'\x20('+_0x2368b8['change']+_0x58c954(0x175),_0x38b6d7+=_0x58c954(0x283)+_0x2f3a71+':\x20'+_0x3f9386['value']+'\x20('+_0x3f9386[_0x58c954(0x1bf)]+_0x58c954(0x175),_0x38b6d7+='Net\x20'+_0x422758+':\x20'+_0xfa58f3[_0x58c954(0x2a4)]+'\x20('+_0xfa58f3['change']+_0x58c954(0x175),_0x38b6d7+=_0x58c954(0x1b6)+_0x2f3a71+':\x20'+_0x10eda3[_0x58c954(0x2a4)]+'\x20('+_0x10eda3[_0x58c954(0x1bf)]+'%)\x0a',_0x38b6d7+=_0x58c954(0x2ff)+_0x422758+':\x20'+_0x5af470[_0x58c954(0x2a4)]+'\x20('+_0x5af470['change']+_0x58c954(0x175),_0x38b6d7+=_0x58c954(0x2ff)+_0x2f3a71+':\x20'+_0x177259[_0x58c954(0x2a4)]+'\x20('+_0x177259[_0x58c954(0x1bf)]+_0x58c954(0x175),_0x38b6d7+=_0x58c954(0x1b5)),process[_0x58c954(0x255)]({'telegrammsg':_0x38b6d7},_0x13a81f=>{});}async function sendPortfolioTelegram(){const _0x34f1c8=_0x278096;if(!coinsLoaded||!currentCoins[0x0][_0x34f1c8(0x22a)]){process[_0x34f1c8(0x255)]({'telegrammsg':_0x34f1c8(0x2f5)},_0x51e2ae=>{});return;}let _0x5b5f3d='';if(config[_0x34f1c8(0x302)])_0x5b5f3d=_0x34f1c8(0x2ba)+config['botname']+_0x34f1c8(0x1d9);else _0x5b5f3d=_0x34f1c8(0x246)+botID+_0x34f1c8(0x1d9);_0x5b5f3d+=_0x34f1c8(0x1e5),_0x5b5f3d+='-------------------------------\x0a',_0x5b5f3d+=_0x34f1c8(0x32e),_0x5b5f3d+=_0x34f1c8(0x2d1),currentCoins[_0x34f1c8(0x279)](_0x3f5dea=>{const _0x546e6e=_0x34f1c8;_0x5b5f3d+=_0x3f5dea[_0x546e6e(0x18c)][_0x546e6e(0x15d)](0x7)+'|\x20'+formatPad(_0x3f5dea[_0x546e6e(0x22a)],0x2,0x6)+'|\x20'+formatPad(_0x3f5dea[_0x546e6e(0x172)],0x2,0x6)+'|\x20'+formatPad(_0x3f5dea[_0x546e6e(0x305)]*0x64,0x2,0x6)+'\x0a';}),_0x5b5f3d+=_0x34f1c8(0x1b5),process['send']({'telegrammsg':_0x5b5f3d},_0x10d600=>{});}function formatPad(_0x436607,_0x120f38,_0x57c4de){const _0x123d25=_0x278096,_0x4c2111=formatResultString(_0x436607,_0x120f38);return _0x4c2111?_0x4c2111[_0x123d25(0x189)](_0x57c4de):''['padStart'](_0x57c4de);}function logHistory(_0x533307,_0x2bfd02,_0x3205fd=''){const _0x80e72d=_0x278096;logger[_0x80e72d(0x2e5)](''+_0x2bfd02);let _0x38f631={'time':getTimeStamp(),'type':_0x533307,'event':_0x2bfd02};dbLogs[_0x80e72d(0x1c8)]('logs')[_0x80e72d(0x249)](_0x38f631)['write']();if(_0x3205fd=='')_0x3205fd=_0x2bfd02;proxyEmit(_0x80e72d(0x2c6),{'log':_0x38f631,'summary':_0x3205fd}),process[_0x80e72d(0x255)]({'telegram':{..._0x38f631,'botname':config[_0x80e72d(0x179)],'showname':config[_0x80e72d(0x302)]}},_0x4eb767=>{});}function emitHistory(_0x36505b={}){const _0x274665=_0x278096;Object[_0x274665(0x28c)](_0x36505b)[_0x274665(0x1be)]==0x0&&(_0x36505b={'type':[_0x274665(0x1ea),_0x274665(0x2c6)],'event':'','page':0x1});if(_0x36505b['type'][_0x274665(0x16d)]('event'))_0x36505b[_0x274665(0x235)]['splice'](_0x36505b[_0x274665(0x235)]['indexOf'](_0x274665(0x2c6)),0x1,_0x274665(0x31b),_0x274665(0x204),_0x274665(0x2de));if(dbLogs['has'](_0x274665(0x2d7))['value']()){let _0xadcaa3=dbLogs['get'](_0x274665(0x2d7))[_0x274665(0x2ae)](_0xf78d05=>{const _0x105418=_0x274665;if(_0x36505b[_0x105418(0x235)][_0x105418(0x1be)]==0x0)return![];else return _0x36505b['type'][_0x105418(0x16d)](_0xf78d05[_0x105418(0x235)]);})[_0x274665(0x2ae)](_0x2af3a9=>{const _0x1bb46c=_0x274665;if(_0x36505b[_0x1bb46c(0x2c6)]=='')return!![];else return _0x2af3a9[_0x1bb46c(0x2c6)]['toLowerCase']()[_0x1bb46c(0x16d)](_0x36505b[_0x1bb46c(0x2c6)][_0x1bb46c(0x2f6)]());})['sortBy'](_0x274665(0x290)),_0x369563=_0xadcaa3[_0x274665(0x2a4)]()[_0x274665(0x1be)];_0xadcaa3=_0xadcaa3[_0x274665(0x2e3)]()[_0x274665(0x24f)]((_0x36505b[_0x274665(0x1d0)]-0x1)*logPageSize,_0x36505b[_0x274665(0x1d0)]*logPageSize-0x1)[_0x274665(0x2e3)]()['value'](),proxyEmit(_0x274665(0x23d),{'logs':_0xadcaa3,'total':_0x369563});}else proxyEmit(_0x274665(0x23d),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x5c0468){const _0x5d918c=_0x278096;if(dbLogs[_0x5d918c(0x1f4)](_0x5d918c(0x2d7))[_0x5d918c(0x2a4)]()){const _0x21bef9=dbLogs[_0x5d918c(0x1c8)](_0x5d918c(0x2d7))[_0x5d918c(0x184)](_0x5d918c(0x290))[_0x5d918c(0x2ae)](_0x1e02e0=>{const _0x3f88c9=_0x5d918c;return _0x1e02e0['type']==_0x3f88c9(0x1ea);})[_0x5d918c(0x2a4)]();dbLogs[_0x5d918c(0x1c8)](_0x5d918c(0x2d7))[_0x5d918c(0x304)]()['write'](),dbLogs[_0x5d918c(0x1c8)]('logs')[_0x5d918c(0x1e1)](_0x21bef9)[_0x5d918c(0x2e7)](),emitHistory(_0x5c0468);}}async function pauseBot(_0x4c9be8=pauseBotIntervalShort,_0x1eb3c7,_0xb752d1,_0x1530cc=![]){const _0x14a97b=_0x278096,_0x53d707=new Date()[_0x14a97b(0x1ca)]();if(!lastErrorShown||_0x53d707-lastErrorShown>=_0x4c9be8){lastErrorShown=_0x53d707;if(!lastBotPause)lastBotPause=_0x53d707,consecutivePauses=0x1;else{if(_0x53d707-lastBotPause-_0x4c9be8<0x5a*0x3e8){consecutivePauses++;if(consecutivePauses>maxPauseRetries){if(_0x1530cc){logHistory(_0x14a97b(0x31b),_0x1eb3c7+_0x14a97b(0x269)),await killBot();return;}else logHistory(_0x14a97b(0x31b),_0x1eb3c7+pauseBotMsg),_0x4c9be8=pauseBotInterval;}}else consecutivePauses=0x1;lastBotPause=_0x53d707;}_0xb752d1?logger[_0x14a97b(0x1fe)]('('+consecutivePauses+')\x20'+_0x1eb3c7+_0x14a97b(0x16e),_0xb752d1):logger[_0x14a97b(0x1fe)]('('+consecutivePauses+')\x20'+_0x1eb3c7);if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);await sleep(_0x4c9be8),botPaused=![],_0x4c9be8==pauseBotIntervalShort?resumeBot(!![]):resumeBot(![]);}}}async function killBot(){const _0xffeb9c=_0x278096;botPaused=!![],await sleep(0x3e8),process[_0xffeb9c(0x255)]({'stop':_0xffeb9c(0x1b2)},_0x27ef6b=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0xf66c20,_0x2614f2,_0x12b162=![]){const _0x5d79b2=_0x278096;if(botPaused)return;let _0x530761;const _0x92297f=config[_0x5d79b2(0x168)]||_0x5d79b2(0x326);if(_0x2614f2)logger[_0x5d79b2(0x1fe)]('Exception\x20thrown\x20in\x20'+_0x2614f2);const _0x24b8a8=()=>{const _0x227276=_0x5d79b2;loading[_0x227276(0x31b)]=_0x227276(0x2ee),emitLoadingProgress();};if(_0xf66c20[_0x5d79b2(0x31d)]()[_0x5d79b2(0x16d)](_0x5d79b2(0x24e)))logHistory('error',_0x92297f+_0x5d79b2(0x2c4)),_0x24b8a8();else{if(_0xf66c20[_0x5d79b2(0x31d)]()[_0x5d79b2(0x16d)](_0x5d79b2(0x2c9)))logHistory(_0x5d79b2(0x31b),_0x92297f+'\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)'),_0x24b8a8();else{if(_0xf66c20[_0x5d79b2(0x31d)]()[_0x5d79b2(0x16d)]('AuthenticationError'))config['apiPassword']?_0x530761=_0x92297f+_0x5d79b2(0x294):_0x530761=_0x92297f+'\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange',logHistory('error',_0x530761+_0x5d79b2(0x17a)),_0x24b8a8();else{if(_0xf66c20[_0x5d79b2(0x31d)]()[_0x5d79b2(0x16d)](_0x5d79b2(0x26f)))logHistory(_0x5d79b2(0x31b),_0x92297f+_0x5d79b2(0x1f2)),_0x24b8a8();else{if(!_0x12b162)await handleError(_0xf66c20,null);}}}}}async function handleError(_0x1f1c1a,_0x2d142c,_0x367e85=''){const _0x213519=_0x278096;if(botPaused)return;let _0x279c93;const _0x23eec8=config['exchange']||_0x213519(0x326);if(_0x2d142c)logger[_0x213519(0x1fe)](_0x213519(0x20d)+_0x2d142c);if(_0x1f1c1a[_0x213519(0x31d)]()[_0x213519(0x16d)](_0x213519(0x1f8)))_0x279c93=_0x23eec8+_0x213519(0x18b),await pauseBot(undefined,_0x279c93,_0x1f1c1a);else{if(_0x1f1c1a[_0x213519(0x31d)]()['includes']('RateLimitExceeded'))_0x279c93=_0x23eec8+_0x213519(0x20b),await pauseBot(undefined,_0x279c93,_0x1f1c1a);else{if(_0x1f1c1a[_0x213519(0x31d)]()['includes'](_0x213519(0x1e7))||_0x1f1c1a[_0x213519(0x31d)]()['includes'](_0x213519(0x1c1)))_0x279c93=_0x23eec8+_0x213519(0x16b),await pauseBot(undefined,_0x279c93,_0x1f1c1a[_0x213519(0x31d)]());else{if(_0x1f1c1a[_0x213519(0x31d)]()[_0x213519(0x16d)]('RequestTimeout'))_0x279c93=_0x23eec8+_0x213519(0x2c8),await pauseBot(undefined,_0x279c93,_0x1f1c1a[_0x213519(0x31d)]());else{if(_0x1f1c1a['toString']()['includes'](_0x213519(0x1ec)))_0x279c93=_0x23eec8+_0x213519(0x1ae),await pauseBot(undefined,_0x279c93,_0x1f1c1a['toString']());else{if(_0x1f1c1a[_0x213519(0x31d)]()['toLowerCase']()[_0x213519(0x16d)]('timestamp')||_0x1f1c1a[_0x213519(0x31d)]()[_0x213519(0x2f6)]()[_0x213519(0x16d)]('request-time'))_0x279c93=_0x213519(0x1cb),await pauseBot(undefined,_0x279c93,_0x1f1c1a[_0x213519(0x31d)]());else{if(_0x1f1c1a[_0x213519(0x31d)]()[_0x213519(0x16d)]('InvalidNonce'))_0x279c93=_0x23eec8+'\x20rejected\x20your\x20API\x20request\x20(see:\x20hodlerhacks.com/fix/4)',await pauseBot(undefined,_0x279c93,_0x1f1c1a['toString']());else{if(_0x1f1c1a instanceof ccxt[_0x213519(0x173)])_0x279c93=_0x23eec8+_0x213519(0x1b1)+_0x1f1c1a[_0x213519(0x31d)](),logger[_0x213519(0x1fe)](_0x213519(0x208),_0x1f1c1a),await pauseBot(undefined,_0x279c93,_0x1f1c1a);else{if(_0x1f1c1a[_0x213519(0x31d)]()[_0x213519(0x16d)](_0x213519(0x24e)))logHistory('error',_0x23eec8+_0x213519(0x2be)),logHistory(_0x213519(0x31b),_0x213519(0x2c2)),await killBot();else{if(_0x1f1c1a[_0x213519(0x31d)]()[_0x213519(0x16d)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory(_0x213519(0x31b),_0x23eec8+_0x213519(0x291)),logHistory(_0x213519(0x31b),_0x213519(0x2c2)),await killBot();else{if(_0x1f1c1a[_0x213519(0x31d)]()[_0x213519(0x16d)](_0x213519(0x2a3))&&_0x1f1c1a[_0x213519(0x31d)]()['includes']('token\x20is\x20expired'))_0x279c93=_0x23eec8+_0x213519(0x27c),await pauseBot(undefined,_0x279c93,_0x1f1c1a,!![]);else{if(_0x1f1c1a[_0x213519(0x31d)]()[_0x213519(0x16d)](_0x213519(0x2a3)))config[_0x213519(0x2d6)]?_0x279c93=_0x23eec8+'\x20API\x20key,\x20secret\x20or\x20password\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange':_0x279c93=_0x23eec8+_0x213519(0x1aa),logHistory('error',_0x279c93),logHistory(_0x213519(0x31b),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)'),await killBot();else{if(_0x1f1c1a[_0x213519(0x31d)]()[_0x213519(0x16d)](_0x213519(0x26f)))logHistory('error',_0x23eec8+'\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange'),logHistory(_0x213519(0x31b),_0x213519(0x2c2)),await killBot();else{if(_0x1f1c1a[_0x213519(0x31d)]()['includes'](_0x213519(0x216)))logHistory(_0x213519(0x31b),_0x213519(0x31e)+_0x367e85),logger['debug'](_0x213519(0x2b8),_0x1f1c1a);else{if(_0x1f1c1a instanceof ccxt[_0x213519(0x29b)]){_0x279c93=_0x23eec8+_0x213519(0x293)+_0x1f1c1a[_0x213519(0x31d)]();if(_0x367e85)_0x279c93+=_0x213519(0x27e)+_0x367e85;await pauseBot(undefined,_0x279c93,_0x1f1c1a);}else{_0x279c93=_0x213519(0x1de)+_0x1f1c1a[_0x213519(0x31d)]();if(_0x367e85)_0x279c93+=_0x213519(0x27e)+_0x367e85;await pauseBot(undefined,_0x279c93);}}}}}}}}}}}}}}}}function decryptRSA(_0x58225b,_0x54e30c){const _0x20dd01=_0x278096,_0x4dc844=forge[_0x20dd01(0x160)]['privateKeyFromPem'](_0x58225b),_0x56048c=_0x4dc844[_0x20dd01(0x1d7)](forge[_0x20dd01(0x300)][_0x20dd01(0x2e1)](_0x54e30c),_0x20dd01(0x214),{'md':forge['md'][_0x20dd01(0x329)][_0x20dd01(0x2c7)](),'mgf1':{'md':forge['md'][_0x20dd01(0x329)][_0x20dd01(0x2c7)]()}});return _0x56048c;}async function withRetry(_0x1ecccc,_0x511a3d){const _0x26f649=_0x278096;let _0x4f2e16=![],_0x34e681=0x0,_0x15bcef,_0x57956a;while(_0x34e681<maxRetries){try{_0x15bcef=await _0x511a3d();break;}catch(_0x12b2b5){_0x57956a=_0x12b2b5,!_0x4f2e16?(_0x4f2e16=!![],logger[_0x26f649(0x1fe)]('RETRY\x20-\x20Error\x20in\x20'+_0x1ecccc+':',_0x12b2b5[_0x26f649(0x31d)]())):await sleep(retryInterval);}_0x34e681++;}if(_0x34e681==0x0)return _0x15bcef;if(_0x34e681>=maxRetries)throw _0x57956a;else return logger[_0x26f649(0x1fe)](_0x26f649(0x192)+_0x34e681+_0x26f649(0x25e)),_0x15bcef;}function formatResult(_0x4d19ac,_0x5abe25){const _0x22f53f=_0x278096;return parseFloat(_0x4d19ac[_0x22f53f(0x21a)](_0x5abe25));}function formatResultTruncate(_0x23bcb4,_0x576557){const _0x37c004=_0x278096;let _0x2b961d=formatResultString(_0x23bcb4,0xa),_0x409256=_0x2b961d[_0x37c004(0x1fd)]('.');return _0x409256!=-0x1&&(_0x2b961d=_0x2b961d[_0x37c004(0x24f)](0x0,_0x409256+_0x576557+0x1)),Number(_0x2b961d);}function formatResultString(_0x52516b,_0x1cf2c5){const _0x1b31f7=_0x278096;let _0x3c9cfc;if(!(''+_0x52516b)[_0x1b31f7(0x16d)]('e'))_0x3c9cfc=+(Math[_0x1b31f7(0x1a5)](_0x52516b+'e+'+_0x1cf2c5)+'e-'+_0x1cf2c5);else{let _0x2c4160=(''+_0x52516b)[_0x1b31f7(0x1dc)]('e'),_0x500f5c='';+_0x2c4160[0x1]+_0x1cf2c5>0x0&&(_0x500f5c='+'),_0x3c9cfc=+(Math[_0x1b31f7(0x1a5)](+_0x2c4160[0x0]+'e'+_0x500f5c+(+_0x2c4160[0x1]+_0x1cf2c5))+'e-'+_0x1cf2c5);}return Number(_0x3c9cfc)[_0x1b31f7(0x21a)](_0x1cf2c5);}function getServerTime(){const _0x42049b=_0x278096,_0x2aed79=new Date();return _0x2aed79[_0x42049b(0x24c)]()+'/'+(_0x2aed79[_0x42049b(0x1ad)]()+0x1)[_0x42049b(0x31d)]()[_0x42049b(0x189)](0x2,'0')+'/'+_0x2aed79[_0x42049b(0x2fd)]()[_0x42049b(0x31d)]()['padStart'](0x2,'0')+'\x20'+_0x2aed79[_0x42049b(0x2fc)]()[_0x42049b(0x31d)]()[_0x42049b(0x189)](0x2,'0')+':'+_0x2aed79[_0x42049b(0x1b7)]()['toString']()[_0x42049b(0x189)](0x2,'0')+':'+_0x2aed79[_0x42049b(0x1bd)]()[_0x42049b(0x31d)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x535857=_0x278096,_0x29ae44=shiftedTime();return _0x29ae44['getFullYear']()+'/'+(_0x29ae44[_0x535857(0x1ad)]()+0x1)[_0x535857(0x31d)]()['padStart'](0x2,'0')+'/'+_0x29ae44[_0x535857(0x2fd)]()['toString']()[_0x535857(0x189)](0x2,'0')+'\x20'+_0x29ae44['getHours']()[_0x535857(0x31d)]()[_0x535857(0x189)](0x2,'0')+':'+_0x29ae44[_0x535857(0x1b7)]()[_0x535857(0x31d)]()[_0x535857(0x189)](0x2,'0')+':'+_0x29ae44[_0x535857(0x1bd)]()[_0x535857(0x31d)]()['padStart'](0x2,'0');}function getDate(){const _0x3555f0=_0x278096,_0x51b9f2=shiftedTime();return _0x51b9f2[_0x3555f0(0x24c)]()+'/'+(_0x51b9f2['getMonth']()+0x1)[_0x3555f0(0x31d)]()[_0x3555f0(0x189)](0x2,'0')+'/'+_0x51b9f2[_0x3555f0(0x2fd)]()[_0x3555f0(0x31d)]()[_0x3555f0(0x189)](0x2,'0');}function getHour(){const _0x25727b=_0x278096,_0x56d11b=shiftedTime();return _0x56d11b[_0x25727b(0x2fc)]()[_0x25727b(0x31d)]()['padStart'](0x2,'0');}function _0x30df(_0x1e2404,_0x200e7c){const _0x50584c=_0x338a();return _0x30df=function(_0x29fc67,_0x5155a0){_0x29fc67=_0x29fc67-0x15c;let _0x338a04=_0x50584c[_0x29fc67];return _0x338a04;},_0x30df(_0x1e2404,_0x200e7c);}function sleep(_0x573944){return new Promise(_0x188068=>setTimeout(_0x188068,_0x573944));}function shiftedTime(){const _0x3e1399=_0x278096,_0x44c710=new Date();let _0xad1490=_0x44c710;if(config&&config[_0x3e1399(0x31a)]!==0x0)_0xad1490=fns[_0x3e1399(0x1b0)](_0x44c710,{'hours':config['timeshift']});return _0xad1490;}function timer(_0x4ca961){const _0x25fe85=_0x278096,_0x1076fb=new Date();!lasttime?console[_0x25fe85(0x320)](getTimeStamp()+':\x20timer\x20>',_0x4ca961,_0x1076fb):console[_0x25fe85(0x320)](getTimeStamp()+_0x25fe85(0x176),_0x4ca961,(_0x1076fb-lasttime)/0x3e8),lasttime=_0x1076fb;}