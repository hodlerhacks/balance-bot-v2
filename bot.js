const _0x34d5f7=_0x1f5c;(function(_0x613e07,_0x156e3e){const _0x2cc714=_0x1f5c,_0x4c7dbe=_0x613e07();while(!![]){try{const _0x52f63e=-parseInt(_0x2cc714(0x252))/0x1*(parseInt(_0x2cc714(0x231))/0x2)+parseInt(_0x2cc714(0x1d5))/0x3*(parseInt(_0x2cc714(0x1de))/0x4)+-parseInt(_0x2cc714(0x306))/0x5+parseInt(_0x2cc714(0x345))/0x6*(parseInt(_0x2cc714(0x21c))/0x7)+parseInt(_0x2cc714(0x2c8))/0x8*(parseInt(_0x2cc714(0x245))/0x9)+-parseInt(_0x2cc714(0x2dc))/0xa+parseInt(_0x2cc714(0x247))/0xb*(parseInt(_0x2cc714(0x1b6))/0xc);if(_0x52f63e===_0x156e3e)break;else _0x4c7dbe['push'](_0x4c7dbe['shift']());}catch(_0x17712c){_0x4c7dbe['push'](_0x4c7dbe['shift']());}}}(_0x51ed,0x727ce));const _0xf6ff10=function(){let _0x1d43ea=!![];return function(_0x28d2c3,_0x23a651){const _0x1a56be=_0x1d43ea?function(){if(_0x23a651){const _0x250a4d=_0x23a651['apply'](_0x28d2c3,arguments);return _0x23a651=null,_0x250a4d;}}:function(){};return _0x1d43ea=![],_0x1a56be;};}(),_0x15e74e=_0xf6ff10(this,function(){const _0x22ecee=_0x1f5c;return _0x15e74e['toString']()[_0x22ecee(0x20f)]('(((.+)+)+)+$')[_0x22ecee(0x1b4)]()['constructor'](_0x15e74e)['search'](_0x22ecee(0x36a));});_0x15e74e();'use strict';const ccxt=require(_0x34d5f7(0x359)),low=require(_0x34d5f7(0x2a2)),FileSync=require(_0x34d5f7(0x2ef)),fs=require('fs'),fns=require('date-fns'),forge=require('node-forge'),util=require(_0x34d5f7(0x239)),argv=require(_0x34d5f7(0x250))(process['argv']['slice'](0x2))['argv'],path=require('path'),axios=require(_0x34d5f7(0x1e0));let exchange,gTicker={},gChange={};const usdBasecoins=[_0x34d5f7(0x200),_0x34d5f7(0x2e4),_0x34d5f7(0x2e8),_0x34d5f7(0x1f2),_0x34d5f7(0x248),_0x34d5f7(0x1d3)],excludedExchanges=['bitmex'],debugging=argv['d']||![];let pnlGenerationNeeded=argv['r']||![],config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object['freeze']({'LOCKED':0x0,'UNLOCKING':0x1,'UNLOCKED':0x2});let lockOrders=ORDERS[_0x34d5f7(0x1f8)],validateOrdersState,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotIntervalShort=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0x34d5f7(0x30a)+pauseBotInterval/0xea60+_0x34d5f7(0x32c),maxPauseRetries=0x6,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,watchTransactionsInterval=0x3c*0x3e8,schedulerInterval=0x3c*0x3c*0x3e8,retryInterval=0x3e8,maxRetries=0x5,logPageSize=0x14,defaultFee=0.003;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidOrdersInitialTimeout,pidOrdersTimeout,botPaused=![],transactionDetectionOngoing=![],lastCoinsToBalance='',exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x5dc,balanceUpdateRetries=0x5;let enableFiatToggle;const serverversion=require(_0x34d5f7(0x365))[_0x34d5f7(0x1d4)],environment=require(_0x34d5f7(0x365))[_0x34d5f7(0x326)]||_0x34d5f7(0x316),botID=process[_0x34d5f7(0x2fc)][0x2]||'001',pattern=/^[0-9]{3}$/;!pattern[_0x34d5f7(0x29f)](botID)&&(console[_0x34d5f7(0x2d2)]('Error:\x20Invalid\x20argument\x20'+botID+',\x20must\x20be\x20a\x203\x20digit\x20number'),killBot());const userID=process[_0x34d5f7(0x2fc)][0x3]||'',configpath=userID?'./config/'+userID+'/':_0x34d5f7(0x24e),logspath=userID?_0x34d5f7(0x225)+userID+'/':_0x34d5f7(0x225),loggerfile=fs['createWriteStream'](logspath+_0x34d5f7(0x221),{'flags':'a'});!fs[_0x34d5f7(0x28e)](configpath)&&fs[_0x34d5f7(0x2ba)](configpath);!fs[_0x34d5f7(0x28e)](logspath)&&fs[_0x34d5f7(0x2ba)](logspath);const configfile=configpath+_0x34d5f7(0x353)+botID+_0x34d5f7(0x312),logfile=configpath+'bot-'+botID+_0x34d5f7(0x1df),performancefile=configpath+'bot-'+botID+_0x34d5f7(0x26f),coinresultsfile=configpath+_0x34d5f7(0x353)+botID+'-results.json',settingsfile=configpath+_0x34d5f7(0x1ae),securefile=configpath+_0x34d5f7(0x20a),configbackuppath=configpath+_0x34d5f7(0x31f),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x34d5f7(0x220)]({'logs':[],'version':serverversion})[_0x34d5f7(0x25f)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x34d5f7(0x220)]({'data':[],'version':serverversion})['write']();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig['defaults']({'bot':[],'version':serverversion})[_0x34d5f7(0x25f)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x34d5f7(0x220)]({'coins':{},'version':serverversion})[_0x34d5f7(0x25f)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0,settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x15ac46=>{const _0x1615b7=_0x34d5f7;console[_0x1615b7(0x2d2)](_0x15ac46);},'simple':_0x58ee31=>{const _0x266e21=_0x34d5f7;console['log'](_0x58ee31),loggerfile[_0x266e21(0x25f)](util['format'](_0x58ee31)+'\x0a');},'full':async(_0x5af5a1,_0x458dbd='')=>{const _0x244a2b=_0x34d5f7;let _0x1e90ed;if(config[_0x244a2b(0x33d)])_0x1e90ed=getTimeStamp()+':\x20'+config[_0x244a2b(0x1bb)]+'\x20>\x20'+_0x5af5a1;else _0x1e90ed=getTimeStamp()+_0x244a2b(0x2e7)+botID+_0x244a2b(0x2d3)+_0x5af5a1;console[_0x244a2b(0x2d2)](_0x1e90ed),loggerfile[_0x244a2b(0x25f)](util['format'](_0x1e90ed)+'\x0a'),_0x458dbd&&(console[_0x244a2b(0x2d2)](_0x458dbd),loggerfile['write'](util['format'](_0x458dbd)+'\x0a'));},'debug':async(_0xb4168a,_0x2dc6ec='')=>{const _0x16c66a=_0x34d5f7;let _0x275da5;if(config['showname'])_0x275da5=getTimeStamp()+':\x20'+config[_0x16c66a(0x1bb)]+_0x16c66a(0x371)+_0xb4168a;else _0x275da5=getTimeStamp()+_0x16c66a(0x2e7)+botID+'\x20>\x20[DEBUG]\x20'+_0xb4168a;if(debugging)console[_0x16c66a(0x2d2)](_0x275da5);loggerfile[_0x16c66a(0x25f)](util[_0x16c66a(0x28d)](_0x275da5)+'\x0a');if(_0x2dc6ec){if(debugging)console[_0x16c66a(0x2d2)](_0x2dc6ec);loggerfile[_0x16c66a(0x25f)](util[_0x16c66a(0x28d)](_0x2dc6ec)+'\x0a');}}};process['on']('uncaughtException',function(_0x5e91d0){const _0x53f4f8=_0x34d5f7;handleError(_0x5e91d0[_0x53f4f8(0x329)],_0x53f4f8(0x309));});settings[_0x34d5f7(0x234)]!=config[_0x34d5f7(0x234)]&&updateTimeshift(settings[_0x34d5f7(0x234)]);settings['onepagemode']!=config[_0x34d5f7(0x33a)]&&updateOnepagemode(settings[_0x34d5f7(0x33a)]);(settings[_0x34d5f7(0x2db)]&&!config[_0x34d5f7(0x2db)]||!settings[_0x34d5f7(0x2db)]&&config[_0x34d5f7(0x2db)])&&updateMarketcapApi(settings[_0x34d5f7(0x2db)]);process[_0x34d5f7(0x1e3)]({'started':_0x34d5f7(0x1ac)},_0x48267c=>{}),initializeProcessListeners();function proxyEmit(_0x230c0d,_0x3e37e5=null){const _0x3609e3=_0x34d5f7;process[_0x3609e3(0x1e3)]({'function':_0x230c0d,'args':_0x3e37e5},_0x3b3443=>{});}function initializeProcessListeners(){const _0x3a2c96=_0x34d5f7;process['on'](_0x3a2c96(0x300),_0x4b0694=>{const _0x1140c1=_0x3a2c96;switch(Object[_0x1140c1(0x313)](_0x4b0694)[0x0]){case'timeshift':_0x4b0694[_0x1140c1(0x234)]!=undefined&&(settings[_0x1140c1(0x234)]=_0x4b0694[_0x1140c1(0x234)],updateTimeshift(settings[_0x1140c1(0x234)]));break;case _0x1140c1(0x33a):_0x4b0694[_0x1140c1(0x33a)]!=undefined&&(settings[_0x1140c1(0x33a)]=_0x4b0694[_0x1140c1(0x33a)],updateOnepagemode(settings['onepagemode']));break;case _0x1140c1(0x2db):_0x4b0694['marketcapApi']!=undefined&&(settings[_0x1140c1(0x2db)]=_0x4b0694[_0x1140c1(0x2db)],updateMarketcapApi(settings[_0x1140c1(0x2db)]));break;case _0x1140c1(0x289):_0x4b0694[_0x1140c1(0x289)]!=undefined&&(bots=JSON['parse'](_0x4b0694[_0x1140c1(0x289)]),proxyEmit('bots',bots));break;case'function':switch(_0x4b0694[_0x1140c1(0x203)]){case _0x1140c1(0x24b):initclient();break;case _0x1140c1(0x2b3):toggleBotMode();break;case _0x1140c1(0x35e):emitHistory(_0x4b0694[_0x1140c1(0x25e)]);break;case'deleteHistoryAlerts':deleteHistoryAlerts(_0x4b0694[_0x1140c1(0x25e)]);break;case'getPortfolio':getPortfolio(_0x4b0694[_0x1140c1(0x25e)]);break;case _0x1140c1(0x230):storeConfiguration(_0x4b0694[_0x1140c1(0x25e)]);break;case'storeHeadless':storeHeadless(_0x4b0694[_0x1140c1(0x25e)]);break;case _0x1140c1(0x1fa):storeFiat(_0x4b0694[_0x1140c1(0x25e)]);break;case _0x1140c1(0x2b1):resetHistory();break;case _0x1140c1(0x2fa):getStartingBalances(getNormalizedPerformance());break;case _0x1140c1(0x1e7):placeOrder(_0x4b0694[_0x1140c1(0x25e)]);break;case _0x1140c1(0x328):cancelLoading();break;case'showConfig':showConfig();break;case _0x1140c1(0x30e):sendMetricsTelegram();break;case _0x1140c1(0x2b2):sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x12d777=![]){const _0x1563d1=_0x34d5f7;logger[_0x1563d1(0x1f0)](_0x1563d1(0x2af)+(_0x12d777?'exchange\x20reload':_0x1563d1(0x1fb))+_0x1563d1(0x1e8)+config['exchange']);if(pidBalances)clearTimeout(pidBalances);if(!_0x12d777)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x1563d1(0x1d1)]!=''&&config['apiKey']!=_0x1563d1(0x22e)){loadingProgress=0x0;if(_0x12d777){await initExchange();const _0x16545e=await testAPI();if(!_0x16545e)return;await loadSymbols(),loadingProgress=0x1,setStableCoins(),proxyEmit(_0x1563d1(0x1db),emittedConfiguration()),initialPerformanceStored=![];}const _0x589e77=await getCoins();[currentCoins,currentCoinsAll]=_0x589e77,setBlockTransactionDetection(![]),startScheduler(),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x1563d1(0x1f0)]('Loading\x20completed'),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x1563d1(0x282)]==0x0&&allOpenOrders[_0x1563d1(0x282)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(pnlGenerationNeeded)await generatePnL();}}async function resumeBot(_0x3884b4=![]){const _0x6926d4=_0x34d5f7;logger[_0x6926d4(0x1f0)](_0x6926d4(0x277)+(_0x3884b4?_0x6926d4(0x370):_0x6926d4(0x2f3))+_0x6926d4(0x2e6)+config[_0x6926d4(0x304)]);if(pidBalances)clearTimeout(pidBalances);if(_0x3884b4){getBalances();return;}coinsLoaded=![];if(config[_0x6926d4(0x1d1)]!=''&&config[_0x6926d4(0x1d1)]!=_0x6926d4(0x22e)){loadingProgress=0x1;const _0x1f3056=await getCoins();[currentCoins,currentCoinsAll]=_0x1f3056,setBlockTransactionDetection(![]),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger['debug'](_0x6926d4(0x226)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x6926d4(0x282)]==0x0&&allOpenOrders[_0x6926d4(0x282)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();}}async function getMarketCap(_0x1cb158){const _0x2a1c99=_0x34d5f7;let _0x55ecc7=![];if(_0x1cb158)_0x55ecc7=!![];const _0x1c3e19=_0x55ecc7?_0x1cb158:currentCoins,_0x2ad8b7=_0x1c3e19[_0x2a1c99(0x22d)](_0x3851aa=>_0x3851aa[_0x2a1c99(0x201)]);if(!config[_0x2a1c99(0x2db)]||!_0x55ecc7&&!config['marketcapEnabled']||_0x2ad8b7[_0x2a1c99(0x282)]==0x0)return;let _0x112bfe=null;try{_0x112bfe=await axios['get'](_0x2a1c99(0x1bc),{'headers':{'X-CMC_PRO_API_KEY':settings[_0x2a1c99(0x2db)]},'params':{'symbol':_0x2ad8b7[_0x2a1c99(0x1b4)]()}});}catch(_0x166454){_0x112bfe=null,_0x166454['toString']()[_0x2a1c99(0x1f1)](_0x2a1c99(0x358))?(config['marketcapApi']=![],updateConfig(),proxyEmit(_0x2a1c99(0x1db),emittedConfiguration()),logHistory('error','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager')):(logHistory(_0x2a1c99(0x360),_0x2a1c99(0x256)+schedulerInterval/(0x3c*0x3e8)+_0x2a1c99(0x32c)),logger['debug'](_0x2a1c99(0x336),_0x166454[_0x2a1c99(0x1b4)]()+_0x2a1c99(0x1fd)+_0x166454[_0x2a1c99(0x2d4)]));}let _0x3d5628=!![];if(_0x112bfe){let _0x3c0380=0x0;const _0x3960a4=_0x112bfe[_0x2a1c99(0x334)];_0x2ad8b7['forEach'](_0x76b61c=>{const _0xd1ce1c=_0x2a1c99;if(_0x3960a4[_0xd1ce1c(0x334)][_0x76b61c][0x0]&&_0x3960a4[_0xd1ce1c(0x334)][_0x76b61c][0x0][_0xd1ce1c(0x1ef)]['USD'][_0xd1ce1c(0x266)])_0x3c0380+=_0x3960a4[_0xd1ce1c(0x334)][_0x76b61c][0x0][_0xd1ce1c(0x1ef)][_0xd1ce1c(0x200)][_0xd1ce1c(0x266)];else{if(![_0xd1ce1c(0x2b6),_0xd1ce1c(0x200)]['includes'](_0x76b61c)){if(_0x55ecc7)logHistory(_0xd1ce1c(0x360),_0xd1ce1c(0x283)+_0x76b61c+'\x20-\x20go\x20back\x20and\x20try\x20again');else{const _0x4dc492=config[_0xd1ce1c(0x1c6)][_0xd1ce1c(0x224)](_0x144484=>_0x144484['coin']==_0x76b61c);_0x4dc492&&!_0x4dc492['excluded']&&_0x4dc492[_0xd1ce1c(0x1e2)]==-0x1&&(_0x3d5628=![],logHistory(_0xd1ce1c(0x360),'CoinMarketCap\x20data\x20could\x20not\x20be\x20updated\x20-\x20will\x20try\x20again\x20in\x201\x20hour'),logger[_0xd1ce1c(0x1f0)](_0xd1ce1c(0x283)+_0x76b61c));}}}});if(!_0x3d5628)return;_0x2ad8b7[_0x2a1c99(0x2f0)](_0xac50ce=>{const _0x5798ba=_0x2a1c99,_0x49f8e0=_0x3960a4['data'][_0xac50ce][0x0]?_0x3960a4[_0x5798ba(0x334)][_0xac50ce][0x0]['quote']['USD'][_0x5798ba(0x266)]:0x0;if(_0x55ecc7){const _0x2bd33d=_0x1cb158[_0x5798ba(0x224)](_0x4e64b5=>_0x4e64b5[_0x5798ba(0x201)]==_0xac50ce);_0x2bd33d&&(_0x2bd33d[_0x5798ba(0x341)]=_0x49f8e0);}else{const _0x5b70a2=currentCoins[_0x5798ba(0x224)](_0x23662f=>_0x23662f[_0x5798ba(0x201)]==_0xac50ce);_0x5b70a2&&(_0x5b70a2[_0x5798ba(0x341)]=_0x49f8e0);const _0x52d19d=currentCoinsAll[_0x5798ba(0x224)](_0xc34ad6=>_0xc34ad6[_0x5798ba(0x201)]==_0xac50ce);_0x52d19d&&(_0x52d19d[_0x5798ba(0x341)]=_0x49f8e0);}}),!_0x55ecc7&&updateTargetDistribution();}}function updateTargetDistribution(){const _0x545869=_0x34d5f7,_0x112836=0x2;let _0x254c6c=0x0,_0x3cd923=0x0,_0x22a504=0x0,_0x55e8ea=0x0,_0x4aedec=0x0;config[_0x545869(0x1c6)][_0x545869(0x2f0)](_0x16b439=>{const _0x20971e=_0x545869;if(!_0x16b439[_0x20971e(0x367)]){_0x22a504++,_0x254c6c+=_0x16b439['slider'];if(_0x16b439[_0x20971e(0x1e2)]===-0x1){_0x254c6c++;const _0x4ca389=currentCoinsAll[_0x20971e(0x224)](_0x513f3f=>_0x513f3f[_0x20971e(0x201)]==_0x16b439[_0x20971e(0x201)]);_0x4ca389&&(_0x55e8ea+=_0x4ca389[_0x20971e(0x341)],_0x4aedec+=Math[_0x20971e(0x307)](_0x4ca389[_0x20971e(0x341)]));}if(_0x16b439[_0x20971e(0x1e2)]!==-0x1)_0x3cd923++;}});let _0x5eeb52;const _0x500f4c=0x64-_0x254c6c,_0x376f09=_0x22a504-_0x3cd923;_0x5eeb52=_0x376f09===0x0?_0x254c6c:Math[_0x545869(0x302)](0x64,_0x254c6c),config[_0x545869(0x1c6)][_0x545869(0x2f0)](_0x37364c=>{const _0x332b94=_0x545869,_0xe20abf=currentCoinsAll['find'](_0x37a31c=>_0x37a31c['coin']==_0x37364c['coin']);_0xe20abf&&(_0x37364c['marketcap']=_0xe20abf[_0x332b94(0x341)]);if(!_0x37364c['excluded']){if(_0x5eeb52<=0x64){if(_0x37364c[_0x332b94(0x1e2)]===-0x1){if(_0x55e8ea!==0x0&&config[_0x332b94(0x28a)]){if(_0xe20abf){if(config[_0x332b94(0x28a)]==_0x332b94(0x341))_0x37364c[_0x332b94(0x350)]=(_0x500f4c/(_0x55e8ea/_0xe20abf[_0x332b94(0x341)]))[_0x332b94(0x366)](_0x112836);else config['marketcapEnabled']==_0x332b94(0x2fe)&&(_0x37364c[_0x332b94(0x350)]=(_0x500f4c/(_0x4aedec/Math[_0x332b94(0x307)](_0xe20abf['marketcap'])))[_0x332b94(0x366)](_0x112836));}}}}}}),updateConfig();}function updateConfig(){const _0x30d1da=_0x34d5f7;let _0x2b379e=dbConfig[_0x30d1da(0x35a)](_0x30d1da(0x27c))[_0x30d1da(0x224)]({'botID':botID})[_0x30d1da(0x2c9)]();_0x2b379e&&dbConfig[_0x30d1da(0x35a)]('bot')[_0x30d1da(0x224)]({'botID':botID})[_0x30d1da(0x210)](config)[_0x30d1da(0x25f)]();}function logMemory(){const _0x48c097=_0x34d5f7;if(environment!=_0x48c097(0x317))return;const _0x3da865=process['memoryUsage']()['heapUsed']/0x400/0x400;logger[_0x48c097(0x1f0)](_0x48c097(0x323)+process['pid']+'\x20uses\x20'+formatResult(_0x3da865,0x1)+_0x48c097(0x2c1));}async function startScheduler(){const _0x463128=_0x34d5f7,_0x38db39=shiftedTime()[_0x463128(0x2ee)]();getMarketCap(),loadSymbols(),_0x38db39==0x1&&logMemory(),await sleep(schedulerInterval),startScheduler();}async function restartBot(_0x1ed6ff=![]){const _0x3913f1=_0x34d5f7;logger[_0x3913f1(0x1f0)](_0x3913f1(0x212));if(!_0x1ed6ff)while(lockOrders!=ORDERS[_0x3913f1(0x1f8)]||coolingDown){await sleep(0x3e8);}process[_0x3913f1(0x1e3)]({'stop':_0x3913f1(0x1b0)},_0x2e5bce=>{});}async function initExchange(_0xd5df31=config[_0x34d5f7(0x304)],_0x3ab188=config[_0x34d5f7(0x1d1)],_0x4838e8=config[_0x34d5f7(0x2a5)],_0x4d6789=config['apiPassword'],_0x3ec370=config[_0x34d5f7(0x1af)]){const _0x54715e=_0x34d5f7;if(exchange){logger['debug']('Initializing\x20exchange:\x20already\x20done');return;}logger['debug'](_0x54715e(0x253));!supportedExchanges()['includes'](_0xd5df31)&&(logHistory(_0x54715e(0x360),_0x54715e(0x339)+_0xd5df31+'\x20exchange'),killBot());const _0x509aae=ccxt[_0x54715e(0x2b5)][_0xd5df31[_0x54715e(0x24a)]()];exchange=new _0x509aae({'apiKey':_0x3ab188,'secret':_0x4838e8,'options':{'defaultType':_0x54715e(0x32b)}});if(_0x4d6789)exchange[_0x54715e(0x310)]=_0x4d6789;if(exchange[_0x54715e(0x287)][_0x54715e(0x1af)])exchange['setSandboxMode'](_0x3ec370);}function updateExchange(_0x4bbc51,_0x4ccff6,_0x15df2a=null){const _0x12981f=_0x34d5f7;exchange['apiKey']=_0x4bbc51,exchange[_0x12981f(0x284)]=_0x4ccff6,exchange[_0x12981f(0x310)]=_0x15df2a,logger[_0x12981f(0x1f0)](_0x12981f(0x2b9));}function setStableCoins(){const _0x18a4cc=_0x34d5f7;let _0x4cf7da=config['basecoin']=='ETH'?_0x18a4cc(0x20d):config['basecoin']==_0x18a4cc(0x33e)?_0x18a4cc(0x33e):_0x18a4cc(0x20e),_0x15313f=allSymbols[_0x18a4cc(0x1f1)](_0x4cf7da+_0x18a4cc(0x373))?_0x18a4cc(0x200):allSymbols[_0x18a4cc(0x1f1)](_0x4cf7da+_0x18a4cc(0x278))?_0x18a4cc(0x1f2):_0x18a4cc(0x2b6),_0x51c559=allSymbols[_0x18a4cc(0x1f1)](_0x4cf7da+_0x18a4cc(0x2fb))?_0x18a4cc(0x2b6):_0x15313f;enableFiatToggle=!![],_0x15313f=='EUR'&&(enableFiatToggle=![],storeFiat(_0x18a4cc(0x2b6))),_0x51c559!='EUR'&&(enableFiatToggle=![],storeFiat('USD')),stablecoins={'eur':{'coin':''+_0x4cf7da+_0x51c559,'symbol':_0x4cf7da+'/'+_0x51c559},'usd':{'coin':''+_0x4cf7da+_0x15313f,'symbol':_0x4cf7da+'/'+_0x15313f}};}async function initwsCcxt(){const _0x18e2a7=_0x34d5f7;initCycle++;const _0x13b7e4=initCycle;let _0x2f8535=[];config[_0x18e2a7(0x1c6)][_0x18e2a7(0x2f0)](_0x3bb38d=>{const _0x16b4c8=_0x18e2a7;if(!_0x3bb38d[_0x16b4c8(0x367)]&&_0x3bb38d[_0x16b4c8(0x201)]!=config['basecoin'])_0x2f8535['push'](_0x3bb38d[_0x16b4c8(0x21e)]);});if(!_0x2f8535[_0x18e2a7(0x1f1)](stablecoins[_0x18e2a7(0x20c)][_0x18e2a7(0x21e)]))_0x2f8535[_0x18e2a7(0x1d2)](stablecoins['eur'][_0x18e2a7(0x21e)]);if(!_0x2f8535[_0x18e2a7(0x1f1)](stablecoins['usd'][_0x18e2a7(0x21e)]))_0x2f8535[_0x18e2a7(0x1d2)](stablecoins[_0x18e2a7(0x263)][_0x18e2a7(0x21e)]);loadCoins(_0x2f8535),_0x2f8535=validateSymbols(_0x2f8535);const _0x3611d0=async _0x49cbe4=>{const _0x198c22=_0x18e2a7;let _0x2bf004;try{const _0x5afd3d=await getTickers(_0x49cbe4);Object[_0x198c22(0x2a7)](_0x5afd3d)[_0x198c22(0x2f0)](_0x19052a=>{const _0x17c411=_0x198c22;_0x2bf004=_0x19052a[0x1][_0x17c411(0x21e)],gTicker[noslash(_0x2bf004)]=_0x19052a[0x1]['last'],gChange[_0x2bf004]=_0x19052a[0x1]['percentage'];});}catch(_0x1dc473){await handleError(_0x1dc473,_0x198c22(0x280),_0x2bf004);}},_0x41d174=async _0x5eccf6=>{const _0x46164c=_0x18e2a7;while(initCycle==_0x13b7e4){if(!botPaused)try{const _0x34a402=await exchange[_0x46164c(0x291)](_0x5eccf6);gTicker[noslash(_0x34a402[0x0][_0x46164c(0x21e)])]=_0x34a402[0x0][_0x46164c(0x356)];}catch(_0x3900f4){if(!exchangeStopped)await handleError(_0x3900f4,_0x46164c(0x2c4),_0x5eccf6);}else await sleep(0x64);}},_0x1daf76=async _0x3927ec=>{const _0x26f255=_0x18e2a7;while(initCycle==_0x13b7e4){if(!botPaused)try{const _0x58bb79=await exchange[_0x26f255(0x22f)](_0x3927ec),_0x4f6df3=_0x58bb79[_0x26f255(0x1c8)]();gTicker[noslash(_0x4f6df3[_0x26f255(0x21e)])]=_0x4f6df3['price'];}catch(_0x6fc690){if(!exchangeStopped)await handleError(_0x6fc690,'watchTradesForSymbols()',_0x3927ec['toString']());}else await sleep(0x64);}},_0xba76da=async _0x32523b=>{const _0x10dbc4=_0x18e2a7;while(initCycle==_0x13b7e4){if(!botPaused){let _0x4ec6ed;try{await sleep(0x3c*0x3e8);const _0x2fca4f=await getTickers(_0x32523b);Object[_0x10dbc4(0x2a7)](_0x2fca4f)[_0x10dbc4(0x2f0)](_0x33c8ed=>{const _0x297a2a=_0x10dbc4;_0x4ec6ed=_0x33c8ed[0x1][_0x297a2a(0x21e)],gChange[_0x4ec6ed]=_0x33c8ed[0x1][_0x297a2a(0x32f)];});}catch(_0x363b20){if(!exchangeStopped)await handleError(_0x363b20,_0x10dbc4(0x31e),_0x4ec6ed);}}else await sleep(0x64);}},_0x2eac82=async _0x310d85=>{const _0x2ac82e=_0x18e2a7;while(initCycle==_0x13b7e4){if(!botPaused)try{const _0x530175=await exchange[_0x2ac82e(0x35f)](_0x310d85);initCycle==_0x13b7e4&&_0x530175[_0x2ac82e(0x2f0)](_0x4cd80b=>{updateNumberCoinsCcxt(_0x4cd80b);});}catch(_0x2aad79){if(!exchangeStopped)await handleError(_0x2aad79,_0x2ac82e(0x36d));}else await sleep(0x64);}};_0x3611d0(_0x2f8535),_0xba76da(_0x2f8535),exchange[_0x18e2a7(0x287)][_0x18e2a7(0x22f)]&&!(config[_0x18e2a7(0x304)]==_0x18e2a7(0x297)&&_0x2f8535['length']>0xa)?_0x1daf76(_0x2f8535):_0x2f8535['forEach'](_0x19e5d5=>{_0x41d174(_0x19e5d5);}),_0x2f8535[_0x18e2a7(0x2f0)](_0x45cab5=>{_0x2eac82(_0x45cab5);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x30725b){const _0x3036ac=_0x34d5f7;let _0x10e403={};try{if(config[_0x3036ac(0x304)]!=_0x3036ac(0x2e1))_0x10e403=await exchange[_0x3036ac(0x2e2)](_0x30725b);else for(const _0x586d60 of _0x30725b){const _0x3a518b=await exchange[_0x3036ac(0x1c5)](_0x586d60);_0x10e403[_0x586d60]=_0x3a518b;}return _0x10e403;}catch(_0x81bfe4){throw _0x81bfe4;}}function setBlockTransactionDetection(_0x1b770d){const _0x4b1372=_0x34d5f7;blockTransactionDetection=_0x1b770d,logger[_0x4b1372(0x1f0)](_0x4b1372(0x1b2)+blockTransactionDetection);}async function detectLiquidityChange(_0x13e838=0x0){const _0x44ff38=_0x34d5f7;transactionDetectionOngoing=!![];try{const _0x372658=await getCoins(_0x13e838),[_0x598937,_0x304157]=_0x372658;let _0x3599e1=[];currentCoins[_0x44ff38(0x2f0)](_0xe998e5=>{const _0x4e1fe1=_0x44ff38,_0x42a840=_0x598937[_0x4e1fe1(0x224)](_0x3be87d=>_0x3be87d[_0x4e1fe1(0x201)]==_0xe998e5[_0x4e1fe1(0x201)]);if(_0x42a840){if(_0xe998e5[_0x4e1fe1(0x320)]!=_0x42a840[_0x4e1fe1(0x320)]){let _0x978a63;if(_0xe998e5[_0x4e1fe1(0x201)]!=config[_0x4e1fe1(0x377)]){const _0x404853=gTicker[noslash(_0xe998e5[_0x4e1fe1(0x21e)])];_0x978a63=_0xe998e5[_0x4e1fe1(0x24f)]?0x1/_0x404853:_0x404853;}else _0x978a63=0x1;_0x3599e1[_0x4e1fe1(0x1d2)]({'coin':_0xe998e5['coin'],'symbol':_0xe998e5[_0x4e1fe1(0x21e)],'price':_0x978a63,'number':Number(formatResult(_0x42a840[_0x4e1fe1(0x320)]-_0xe998e5[_0x4e1fe1(0x320)],0x8)),'basecoinvalue':_0x978a63*(_0x42a840['number']-_0xe998e5[_0x4e1fe1(0x320)])});}}});if(_0x3599e1[_0x44ff38(0x282)]>0x0&&!blockTransactionDetection){for(const _0x5d238b of _0x3599e1){if(config['autoliquidity']){logger[_0x44ff38(0x1f0)](_0x44ff38(0x301)+_0x5d238b[_0x44ff38(0x1e1)]+'\x20|\x20highest\x20fee:\x20'+lastFees[_0x44ff38(0x235)]);if(lastFees[_0x44ff38(0x235)]==0x0||Math[_0x44ff38(0x269)](_0x5d238b[_0x44ff38(0x1e1)])>lastFees[_0x44ff38(0x235)]*0x3){if(config[_0x44ff38(0x25a)]==_0x44ff38(0x1bd)){delete _0x5d238b[_0x44ff38(0x21e)],delete _0x5d238b['basecoinvalue'];let _0x3c838b=[],_0x15c693=[...config['liquidity']]||[],_0x7b8c21=config[_0x44ff38(0x255)];_0x15c693[_0x44ff38(0x2ff)]((_0x12267f,_0x21ba8a)=>_0x12267f[_0x44ff38(0x26b)]>_0x21ba8a[_0x44ff38(0x26b)]?-0x1:_0x21ba8a[_0x44ff38(0x26b)]>_0x12267f[_0x44ff38(0x26b)]?0x1:0x0);const _0x3d7f9b=getDate();if(_0x15c693[0x0]){const _0x301434=fns[_0x44ff38(0x20b)](_0x15c693[0x0][_0x44ff38(0x26b)],_0x44ff38(0x351),new Date()),_0x255165=fns[_0x44ff38(0x20b)](_0x3d7f9b,_0x44ff38(0x351),new Date());if(fns[_0x44ff38(0x1fe)](_0x301434,_0x255165)){_0x3c838b=_0x15c693[0x0]['changes'];const _0x17f237=_0x3c838b['find'](_0x4d1249=>_0x4d1249['coin']==_0x5d238b[_0x44ff38(0x201)]);_0x17f237?(_0x17f237[_0x44ff38(0x320)]+=_0x5d238b[_0x44ff38(0x320)],_0x17f237[_0x44ff38(0x320)]==0x0&&(_0x3c838b=_0x3c838b['filter'](_0x425c06=>{const _0x5bafbc=_0x44ff38;return _0x425c06[_0x5bafbc(0x201)]!=_0x5d238b[_0x5bafbc(0x201)];}))):_0x3c838b[_0x44ff38(0x1d2)](_0x5d238b);const _0x4034ad=_0x7b8c21[_0x44ff38(0x224)](_0x4ee5ad=>_0x4ee5ad[_0x44ff38(0x26b)]==_0x3d7f9b);_0x4034ad[_0x44ff38(0x1b3)]=_0x3c838b;}else _0x7b8c21[_0x44ff38(0x1d2)]({'date':_0x3d7f9b,'changes':[_0x5d238b]});}const _0x513462=_0x7b8c21[_0x44ff38(0x224)](_0x137226=>_0x137226[_0x44ff38(0x26b)]==_0x3d7f9b);if(_0x513462){let _0x5c7da7=!![];_0x513462[_0x44ff38(0x1b3)][_0x44ff38(0x2f0)](_0x51ef37=>{if(_0x51ef37['number']!=0x0)_0x5c7da7=![];}),_0x5c7da7&&(_0x7b8c21=_0x7b8c21[_0x44ff38(0x24c)](_0x340c0f=>{const _0x416e34=_0x44ff38;return _0x340c0f[_0x416e34(0x26b)]!=_0x3d7f9b;}));}let _0x4c76d4=dbConfig['get'](_0x44ff38(0x27c))[_0x44ff38(0x224)]({'botID':botID})[_0x44ff38(0x2c9)]();_0x4c76d4&&(dbConfig[_0x44ff38(0x35a)]('bot')[_0x44ff38(0x224)]({'botID':botID})[_0x44ff38(0x210)]({'liquidity':_0x7b8c21})[_0x44ff38(0x25f)](),config[_0x44ff38(0x255)]=_0x7b8c21);logHistory(_0x44ff38(0x35d),_0x44ff38(0x241)+Math[_0x44ff38(0x269)](_0x5d238b[_0x44ff38(0x320)])+'\x20'+_0x5d238b['coin']+'\x20'+(_0x5d238b[_0x44ff38(0x320)]>0x0?'added':_0x44ff38(0x369))+_0x44ff38(0x368)),proxyEmit('configuration',emittedConfiguration());const _0xd9d562=getNormalizedPerformance();emitPerformance(_0xd9d562),getStartingBalances(_0xd9d562),logger['debug'](_0x44ff38(0x34b));}else config[_0x44ff38(0x25a)]==_0x44ff38(0x1aa)&&(config['headless']?(await storeHeadless({'headless':![]}),logHistory(_0x44ff38(0x35d),_0x44ff38(0x241)+Math[_0x44ff38(0x269)](_0x5d238b[_0x44ff38(0x320)])+'\x20'+_0x5d238b[_0x44ff38(0x201)]+'\x20'+(_0x5d238b['number']>0x0?_0x44ff38(0x217):_0x44ff38(0x369))+_0x44ff38(0x33b))):logger[_0x44ff38(0x1f0)](_0x44ff38(0x241)+Math['abs'](_0x5d238b[_0x44ff38(0x320)])+'\x20'+_0x5d238b['coin']+'\x20'+(_0x5d238b['number']>0x0?_0x44ff38(0x217):_0x44ff38(0x369))+_0x44ff38(0x26e)));}else logger[_0x44ff38(0x1f0)](_0x44ff38(0x254)+Math[_0x44ff38(0x269)](_0x5d238b['number'])+'\x20'+_0x5d238b[_0x44ff38(0x201)]+'\x20'+(_0x5d238b[_0x44ff38(0x320)]>0x0?'added':_0x44ff38(0x369)));}else logger[_0x44ff38(0x1f0)](_0x44ff38(0x241)+Math[_0x44ff38(0x269)](_0x5d238b['number'])+'\x20'+_0x5d238b[_0x44ff38(0x201)]+'\x20'+(_0x5d238b['number']>0x0?_0x44ff38(0x217):_0x44ff38(0x369))+'\x20-\x20auto\x20adjusting\x20liquidity\x20is\x20disabled');}currentCoins=_0x598937,currentCoinsAll=_0x304157;}}catch(_0x2040b9){if(!exchangeStopped)await handleError(_0x2040b9,_0x44ff38(0x1c9));}transactionDetectionOngoing=![];}async function watchTransactions(){await sleep(0x14*0x3e8);while(!![]){!botPaused&&!blockTransactionDetection&&coinsLoaded?(detectLiquidityChange(),await sleep(watchTransactionsInterval)):await sleep(0x3e8);}}async function loadSymbols(){const _0xbc3370=_0x34d5f7;try{markets=await exchange[_0xbc3370(0x22a)](!![]),allSymbols=[],Object[_0xbc3370(0x2a7)](markets)[_0xbc3370(0x2f0)](_0x5216a9=>{const _0x3c3e86=_0xbc3370;_0x5216a9[0x1]['active']&&_0x5216a9[0x1][_0x3c3e86(0x32b)]&&allSymbols[_0x3c3e86(0x1d2)](_0x5216a9[0x0]);});}catch(_0x398abb){markets?logger['debug']('Error\x20in\x20loadSymbols():\x20'+_0x398abb[_0xbc3370(0x1b4)]()):(loading[_0xbc3370(0x2f5)]=!![],_0x398abb[_0xbc3370(0x1b4)]()['toLowerCase']()[_0xbc3370(0x1f1)](_0xbc3370(0x2d8))||_0x398abb[_0xbc3370(0x1b4)]()[_0xbc3370(0x24a)]()[_0xbc3370(0x1f1)](_0xbc3370(0x344))?(logHistory(_0xbc3370(0x360),_0xbc3370(0x31b)),loading[_0xbc3370(0x360)]=_0xbc3370(0x322)):handleErrorNoStop(_0x398abb,_0xbc3370(0x242),!![]),logHistory('error',_0xbc3370(0x303)),logHistory(_0xbc3370(0x360),_0xbc3370(0x347)+loadCoinsRetryInterval/0xea60+'\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again'),logger['debug'](_0xbc3370(0x336),_0x398abb),emitLoadingProgress(),botPaused=!![],await sleep(loadCoinsRetryInterval),restartBot());}}function validateSymbols(_0x1b2bb0){const _0x4eaf5b=_0x34d5f7;let _0x2eb571=[];return _0x1b2bb0[_0x4eaf5b(0x2f0)](_0x312de5=>{const _0x1c92c7=_0x4eaf5b;!allSymbols[_0x1c92c7(0x1f1)](_0x312de5)?(logHistory(_0x1c92c7(0x360),_0x1c92c7(0x27a)+_0x312de5+_0x1c92c7(0x23d)),loading['timeout']=!![],emitLoadingProgress()):_0x2eb571[_0x1c92c7(0x1d2)](_0x312de5);}),_0x2eb571;}async function initclient(){const _0x5b3ecc=_0x34d5f7;proxyEmit('configuration',emittedConfiguration()),proxyEmit(_0x5b3ecc(0x275),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x5b3ecc(0x285),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x5a47fa=getNormalizedPerformance();emitPerformance(_0x5a47fa),getStartingBalances(_0x5a47fa);}async function toggleBotMode(){const _0x10345a=_0x34d5f7;let _0x1e2983=dbConfig[_0x10345a(0x35a)](_0x10345a(0x27c))[_0x10345a(0x224)]({'botID':botID})['value']();if(_0x1e2983){const _0x24ba45=!_0x1e2983[_0x10345a(0x1f5)];dbConfig[_0x10345a(0x35a)](_0x10345a(0x27c))[_0x10345a(0x224)]({'botID':botID})[_0x10345a(0x210)]({'headless':_0x24ba45})['write'](),config[_0x10345a(0x1f5)]=_0x24ba45,proxyEmit(_0x10345a(0x1db),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x50b4df=_0x34d5f7;process[_0x50b4df(0x1e3)]({'updatebotmanager':!![]},_0x590dc7=>{}),logger[_0x50b4df(0x1f0)]('Headless:\x20'+config[_0x50b4df(0x1f5)]);}async function loadCoins(_0x1a3fc9){const _0x48f42=_0x34d5f7;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x42b7da,_0x234d1b=0x0,_0x28d21f=0x0;_0x1a3fc9[_0x48f42(0x2f0)](_0x3f2531=>{const _0x3cce5a=_0x48f42;loading[_0x3cce5a(0x1cf)]['push'](_0x3f2531);}),loadingCanceled=![];let _0x2c346e=![];while(_0x42b7da!=_0x1a3fc9[_0x48f42(0x282)]+maxLoadingProgress){_0x42b7da=loadingProgress,_0x1a3fc9[_0x48f42(0x2f0)](_0x596fbf=>{const _0x55959e=_0x48f42;if(gTicker[noslash(_0x596fbf)]){loading['remainingSymbols']=loading[_0x55959e(0x1cf)][_0x55959e(0x24c)](_0x55f8a3=>_0x55f8a3!=_0x596fbf);if(!watchedSymbols[_0x55959e(0x1f1)](_0x596fbf))watchedSymbols[_0x55959e(0x1d2)](_0x596fbf);_0x42b7da++;}}),loading[_0x48f42(0x2df)]=Math[_0x48f42(0x346)](_0x42b7da/(_0x1a3fc9['length']+maxLoadingProgress)*0x64);loading['progress']!=0x64&&(_0x28d21f>0x1e*0x5&&(loading[_0x48f42(0x330)]=!![],emitLoadingProgress()),_0x28d21f>0x78*0x5&&!_0x2c346e&&(_0x2c346e=!![],logHistory(_0x48f42(0x360),'Failed\x20to\x20load\x20coin\x20data\x20for\x20'+loading[_0x48f42(0x1cf)][_0x48f42(0x232)](',\x20')+'\x20-\x20bot\x20not\x20started'),logHistory(_0x48f42(0x360),_0x48f42(0x347)+loadCoinsRetryInterval/0xea60+'\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again'),loadingCanceled=!![],await sleep(loadCoinsRetryInterval),restartBot()));if(loadingCanceled){loading['cancel']=!![],emitLoadingProgress();break;}else _0x234d1b!=loading[_0x48f42(0x2df)]&&(_0x234d1b=loading[_0x48f42(0x2df)],emitLoadingProgress()),_0x28d21f++,await sleep(0xc8);}_0x42b7da==_0x1a3fc9[_0x48f42(0x282)]+maxLoadingProgress&&(coinsLoaded=!![],process['send']({'status':_0x48f42(0x1be),'live':_0x48f42(0x1ac)},_0xd9ffcd=>{}),_0x2c346e&&logHistory(_0x48f42(0x35d),'All\x20coin\x20data\x20loaded\x20-\x20bot\x20started'));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x23707a=_0x34d5f7;proxyEmit(_0x23707a(0x1db),{...emittedConfiguration(),'configstate':'loading-canceled'});}function emitLoadingProgress(){const _0x2f157a=_0x34d5f7;proxyEmit(_0x2f157a(0x1eb),loading);}async function getFiat(){const _0x20ddd5=_0x34d5f7;let _0x1c4a53=gTicker[stablecoins[_0x20ddd5(0x20c)][_0x20ddd5(0x201)]],_0x3a4fd2=gTicker[stablecoins['usd'][_0x20ddd5(0x201)]];return{'eur':Number(_0x1c4a53),'usd':Number(_0x3a4fd2)};}function capitalize(_0x21f499){const _0x3cabad=_0x34d5f7;return _0x21f499['substring'](0x0,0x1)[_0x3cabad(0x274)]()+_0x21f499[_0x3cabad(0x1d8)](0x1);}function supportedExchanges(){const _0x52756a=_0x34d5f7,_0x5bff46=['ws',_0x52756a(0x2e2),_0x52756a(0x1c5),_0x52756a(0x291),_0x52756a(0x35f),_0x52756a(0x272),_0x52756a(0x1ce),_0x52756a(0x219),_0x52756a(0x325)];let _0x491c76=[],_0x36f331=[],_0x393301=ccxt[_0x52756a(0x2b5)][_0x52756a(0x275)];_0x393301[_0x52756a(0x2f0)](_0x3181c3=>{const _0x4e7557=_0x52756a;try{const _0x79d941=new ccxt[(_0x4e7557(0x2b5))][_0x3181c3]();_0x36f331['push'](_0x79d941);}catch(_0xff6ad1){}}),_0x36f331[_0x52756a(0x2f0)](_0x44b38a=>{const _0x381db8=_0x52756a;let _0x1d34f0=0x0;_0x5bff46[_0x381db8(0x2f0)](_0x3824a6=>{const _0x1d1af0=_0x381db8;_0x3824a6 in _0x44b38a[_0x1d1af0(0x287)]&&_0x44b38a[_0x1d1af0(0x287)][_0x3824a6]&&_0x1d34f0++;}),_0x1d34f0==_0x5bff46[_0x381db8(0x282)]&&(!excludedExchanges[_0x381db8(0x1f1)](_0x44b38a['id'])&&_0x491c76['push'](capitalize(_0x44b38a['id'])));});let _0x4a14f8=[];return _0x393301[_0x52756a(0x2f0)](_0x125f28=>{const _0xb62c9b=_0x52756a;_0x125f28=capitalize(_0x125f28);if(!_0x491c76[_0xb62c9b(0x1f1)](_0x125f28))_0x4a14f8[_0xb62c9b(0x1d2)](_0x125f28);}),_0x491c76;}function setStartDatePerformance(){const _0x3b7df0=_0x34d5f7;if(config&&config[_0x3b7df0(0x255)][0x0]['changes'][_0x3b7df0(0x282)]!=0x0){const _0x11a8a5=config['liquidity'][0x0][_0x3b7df0(0x1b3)];dbPerformance['get'](_0x3b7df0(0x334))[_0x3b7df0(0x224)]({'date':config[_0x3b7df0(0x33f)]})['assign']({'coins':_0x11a8a5})[_0x3b7df0(0x25f)]();}}function calculatePnL(_0x1324f1,_0x5a685c,_0x3f3dda,_0x48cc9e,_0x542e49,_0x4ac39f){const _0x28c0fc=_0x34d5f7;!_0x1324f1[_0x28c0fc(0x1f1)]('/'+config[_0x28c0fc(0x377)])&&(_0x3f3dda=_0x3f3dda==_0x28c0fc(0x2bd)?_0x28c0fc(0x2cd):_0x28c0fc(0x2bd));!_0x4ac39f[_0x5a685c]&&(_0x4ac39f[_0x5a685c]={'number':0x0,'sells':0x0,'buys':0x0,'breakeven':0x0,'realizedPnL':0x0});let _0x49757e=0x0,_0x31a5e8,_0x4caf2e;if(_0x3f3dda==_0x28c0fc(0x2bd))_0x4caf2e=_0x4ac39f[_0x5a685c][_0x28c0fc(0x320)]*_0x4ac39f[_0x5a685c][_0x28c0fc(0x36b)]+_0x542e49*_0x48cc9e,_0x4ac39f[_0x5a685c]['number']+=_0x48cc9e,_0x4ac39f[_0x5a685c]['breakeven']=_0x4ac39f[_0x5a685c][_0x28c0fc(0x320)]!=0x0?_0x4caf2e/_0x4ac39f[_0x5a685c]['number']:0x0,_0x4ac39f[_0x5a685c][_0x28c0fc(0x354)]++;else _0x3f3dda==_0x28c0fc(0x2cd)&&(_0x31a5e8=Math[_0x28c0fc(0x222)](_0x4ac39f[_0x5a685c]['number'],_0x48cc9e),_0x49757e=(_0x542e49-_0x4ac39f[_0x5a685c][_0x28c0fc(0x36b)])*_0x31a5e8,_0x4caf2e=Math[_0x28c0fc(0x302)](_0x4ac39f[_0x5a685c][_0x28c0fc(0x320)]*_0x4ac39f[_0x5a685c][_0x28c0fc(0x36b)]-_0x31a5e8*_0x4ac39f[_0x5a685c]['breakeven'],0x0),_0x4ac39f[_0x5a685c][_0x28c0fc(0x320)]-=_0x31a5e8,_0x4ac39f[_0x5a685c]['breakeven']=_0x4ac39f[_0x5a685c][_0x28c0fc(0x320)]!=0x0?_0x4caf2e/_0x4ac39f[_0x5a685c]['number']:0x0,_0x4ac39f[_0x5a685c][_0x28c0fc(0x279)]+=_0x49757e,_0x4ac39f[_0x5a685c][_0x28c0fc(0x261)]++);return _0x49757e;}function _0x51ed(){const _0x4de3d5=['limit-high','toUpperCase','exchanges','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','Resuming\x20(','/USDT','realizedPnL','Invalid\x20symbol:\x20','2.6.22','bot','2.3.5','openOrders','RateLimitExceeded','initTickers()','RETRY\x20-\x20Error\x20in\x20','length','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20for\x20','secret','balances','recreate','has','Exception\x20thrown\x20in\x20','bots','marketcapEnabled','colorscheme','\x20metrics:</b>\x20\x0a\x0a','format','existsSync','Exchange\x20permission\x20denied\x20-\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','ongoing','watchTrades','MIN_NOTIONAL','Generated\x20PnL\x20data','portfolio1','api-issue','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','Bybit','recovery','Binance','\x20portfolio:</b>\x20\x0a\x0a','Order\x20filled:\x20','ExchangeError','Order\x20is\x20invalid:\x20','\x20blocked\x20API\x20(RateLimitExceeded)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','test','shift','unlinkSync','lowdb','fetchBalance()','side','apiSecret','2.6.23','entries','match','none','net-fiat','\x20not\x20responding\x20(see:\x20hodlerhacks.com/fix/5)','slice','filled','%)\x0a','Reset\x20|\x20','order','resetHistory','sendPortfolioTelegram','toggleBotMode','Error\x20occurred:\x20','pro','EUR','\x20minutes\x20-\x20','ExchangeNotAvailable','Updating\x20API\x20key\x20(not\x20saved\x20in\x20config\x20file\x20yet)','mkdirSync','Initializing\x20coin\x20results','fee','buy','\x20orders\x20in\x20less\x20than\x20','indexOf','getMonth','\x20MB','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)','PnL\x20','watchTrades()','portfolio2','Bitget','no\x20open\x20orders','16DaVzvg','value','Stopped\x20fetching\x20balance\x20after\x20','emojibuy','getOpenOrders()','sell','configstate','Manual\x20balancing\x20required','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','cooldown','log','\x20>\x20','code','coins','last','ordertype','timestamp','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','startprice','marketcapApi','5639260LCDhTc','change','fromCodePoint','progress','Insufficient\x20funds\x20to\x20execute\x20order:\x20','Cryptocom','fetchTickers','\x20attempts','BUSD','apiPassword',')\x20|\x20exchange:\x20',':\x20Bot\x20','TUSD','\x20/\x20','performance','\x20hour','API-key\x20format\x20invalid','market','getHours','lowdb/adapters/FileSync','forEach','page','orderstatus','complete','Error\x20in\x20testNewAPI():\x20','cancel','red_yellow_blue','\x20exchange\x20error:\x20','type','padStart','getStartingBalances','/EUR','argv','1\x20-\x20FILLED\x20known\x20order:\x20','marketcapsqrt','sort','message','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','max','Failed\x20to\x20load\x20market\x20data\x20-\x20bot\x20not\x20started','exchange','\x20(see:\x20hodlerhacks.com/fix/1)','3039620MChAxc','sqrt','2\x20-\x20handling\x20FILLED\x20order:\x20','uncaughtException','\x20>\x20pausing\x20bot\x20for\x20','Resetting\x20bot\x20history','Invalid\x20balance\x20for\x20','Resetting\x20coin\x20results:\x20','sendMetricsTelegram','\x20network\x20error:\x20','password','\x20has\x20a\x2024h\x20drop\x20of\x20','-config.json','keys','DDoSProtection','Cooldown\x20ended\x20-\x20balancing\x20resumed','production','staging','enableFiatToggle','\x20|\x20','final','Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)','remove','1\x20-\x20Handle\x20open\x20orders','fetchTickers()','/backup/','number','net','timestamp-issue','process\x20','ask','fetchBalance','environment','replace','cancelLoading','stack','cloneDeep','spot','\x20minutes','privateKeyFromPem','Value\x20','percentage','timeout','Order(s)\x20not\x20validated\x20after\x20','event-history','orderId','data','Unknown\x20error\x20-\x20check\x20logs','Error\x20details:','1\x20-\x20partially\x20FILLED\x20(','RequestTimeout','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','onepagemode','\x20-\x20bot\x20switched\x20to\x20manual\x20mode','Invalid\x20API\x20details,\x20please\x20try\x20again\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','showname','PAXG','startdate','event','marketcap','limits','1\x20-\x20FILLED\x20unknown\x20order:\x20','request-time','138UxsVtM','round','Pausing\x20for\x20','testAPI()','<pre>','Saving\x20configuration','Portfolio\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','decrypt','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','Unknown\x20error:\x20','PermissionDenied','distribution','yyyy/MM/dd','setSandboxMode','bot-','buys','startnumber','price','fiat','status\x20code\x20401','ccxt','get','Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute','canceled','success','emitHistory','watchOrders','error','logs','create','limit','LOCKED','./version.json','toFixed','excluded','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','removed','(((.+)+)+)+$','breakeven','Executed\x20','watchOrders()','0\x20-\x20EXECUTION:\x20',':\x20timer\x20>','quick','\x20>\x20[DEBUG]\x20','addDays','/USD','<b>','Generating\x20PnL\x20data','closed','basecoin','warning','recent20','switch-manual',')\x20known\x20order:\x20','running','isBefore','bb-settings.json','sandbox','restart','pnl-fiat','Block\x20transaction\x20detection:\x20','changes','toString','No\x20more\x20open\x20orders\x20-\x20','36fLDgOV','pnl-basecoin','Avoiding\x20continuous\x20order\x20attempts','\x20>\x20details:','netoffset','botname','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','update-liquidity','enabled','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','Huobipro','InsufficientFunds','splice','prevnumber','botID','fetchTicker','portfolio','OrderNotFound','pop','detectLiquidityChange()','%\x20(','kill','Error\x20details:\x20','time','createOrder','remainingSymbols','floor','apiKey','push','USDP','version','186ZblOkO','testApi','getFullYear','substring','writeFile','sortBy','configuration','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','RETRY\x20-\x20Problem\x20resolved\x20after\x20','53252oqcosE','-events.json','axios','basecoinvalue','slider','send','amount','stringify','initial','placeOrder','\x20|\x20exchange:\x20','RSA-OAEP','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','coin-loading-progress','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','sha256','settings','quote','debug','includes','USDT','\x20|\x20lock\x20orders:\x20','set','headless','emojisell','\x20>\x20stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','UNLOCKED','customId','storeFiat','no\x20exchange\x20reloaded','Network\x20error\x20details:','\x20-\x20','isEqual','secure','USD','coin','\x20not\x20available\x20(see:\x20hodlerhacks.com/fix/5)','function','.json','\x20rejected\x20your\x20API\x20request\x20(see:\x20hodlerhacks.com/fix/4)','balancing\x20resumed','Market\x20order','getTime','Trigger:\x20','bb-secure.json','parse','eur','ETH','BTC','search','assign','UNLOCKING','Initiating\x20bot\x20restart','getDate','Order\x20filled','bid','-------------------------------\x0a','added','limit-low','fetchOpenOrders','Unfilled\x20order(s)\x20canceled\x20after\x20','status','31549hnVBCM','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','symbol','getMinutes','defaults','/output-000.log','min','padEnd','find','./logs/','Loading\x20completed','valid','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','delta','loadMarkets','Net\x20','change24h','map','***','watchTradesForSymbols','storeConfiguration','1837102GvLTgB','join','split','timeshift','highest','2\x20-\x20Validate\x20orders:\x20','threshold','</pre>','util','************','\x20API\x20key,\x20secret\x20or\x20password\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','total','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','getSeconds','full','\x20order:\x20','Portfolio\x20change\x20detected:\x20','loadSymbols()','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','amountToPrecision','1222929aNCcsy','AuthenticationError','4981218mViIqd','USDC','Exchange','toLowerCase','initclient','filter','average','./config/','reverse','yargs/yargs','2\x20-\x20Handled\x20open\x20orders','1XwylRR','Initializing\x20exchange','Fee\x20discount\x20refund\x20detected:\x20','liquidity','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20trying\x20again\x20in\x20','Valid\x20balance\x20for\x20','-results.json','starting-balances','autoliquidity','pnl','Will\x20continue\x20to\x20wait\x20for\x20order(s)\x20to\x20be\x20filled\x20and\x20try\x20to\x20cancel\x20again\x20later','add','args','write','decode64','sells','InvalidNonce','usd','\x0aSymbol(s):\x20','Bot\x20','market_cap','offset','target','abs','privateKey','date','string','open','\x20-\x20bot\x20already\x20running\x20in\x20manual\x20mode','-performance.json','trade','cancelOrders()','cancelOrder'];_0x51ed=function(){return _0x4de3d5;};return _0x51ed();}async function generatePnL(){const _0x16226a=_0x34d5f7;pnlGenerationNeeded=![],logger[_0x16226a(0x1f0)](_0x16226a(0x375));const _0x3c8eed=dbLogs[_0x16226a(0x35a)](_0x16226a(0x361))['value']();let _0x430453={},_0x373d2c=0x0,_0x433c7d=0x0,_0x109863=config['startdate'];const _0x4e0fb0=fns[_0x16226a(0x20b)](_0x109863,_0x16226a(0x351),new Date()),_0x46f102=new Date();let _0x196589=0x0;for(let _0x431e07=_0x4e0fb0;!fns[_0x16226a(0x1ad)](_0x46f102,_0x431e07);_0x431e07=fns[_0x16226a(0x372)](_0x431e07,0x1)){const _0x4520eb=fns[_0x16226a(0x28d)](_0x431e07,'yyyy/MM/dd');while(_0x373d2c<_0x3c8eed[_0x16226a(0x282)]){const _0x578349=new Date(_0x3c8eed[_0x373d2c][_0x16226a(0x1cd)]);if(fns[_0x16226a(0x1ad)](_0x578349,_0x431e07))_0x373d2c++;else{if(_0x3c8eed[_0x373d2c][_0x16226a(0x1cd)][_0x16226a(0x1f1)](_0x4520eb)){const _0x250d35=_0x3c8eed[_0x373d2c];if(_0x250d35[_0x16226a(0x2f8)]===_0x16226a(0x2b0)&&(_0x250d35[_0x16226a(0x340)][_0x16226a(0x1f1)](_0x16226a(0x214))||_0x250d35['event']['includes'](_0x16226a(0x207)))){const _0x219429=_0x250d35['event'][_0x16226a(0x2a8)](/([A-Z]+\/[A-Z]+) (sell|buy) #([\d.]+) @([\d.]+)/);if(_0x219429){const [,_0x393a8b,_0x4138be,_0x24a161,_0x883b3]=_0x219429,_0x4d4223=_0x393a8b[_0x16226a(0x1f1)]('/'+config[_0x16226a(0x377)])?_0x393a8b[_0x16226a(0x233)]('/')[0x0]:_0x393a8b['split']('/')[0x1],_0x50c3bd=calculatePnL(_0x393a8b,_0x4d4223,_0x4138be,parseFloat(_0x24a161),parseFloat(_0x883b3),_0x430453);_0x433c7d+=_0x50c3bd;}}_0x373d2c++;}else break;}}dbPerformance[_0x16226a(0x35a)](_0x16226a(0x334))[_0x16226a(0x224)]({'date':_0x4520eb})[_0x16226a(0x210)]({'pnl':_0x433c7d})[_0x16226a(0x25f)]();}dbCoinResults[_0x16226a(0x1f4)]('coins',_0x430453)[_0x16226a(0x25f)](),logger[_0x16226a(0x1f0)](_0x16226a(0x293));const _0x5768cf=getNormalizedPerformance();emitPerformance(_0x5768cf);}async function updatePnL(_0x38cd7a){const _0x39293a=_0x34d5f7,{symbol:_0x27cff5,coin:_0x4698e4,amount:_0x16d42c,price:_0x7b30f2,side:_0x36b7f9,reverse:_0x504504}=_0x38cd7a;let _0x4f3b2e=dbCoinResults[_0x39293a(0x35a)]('coins')[_0x39293a(0x2c9)]();const _0x31716d=calculatePnL(_0x27cff5,_0x4698e4,_0x36b7f9,_0x16d42c,_0x7b30f2,_0x4f3b2e);dbCoinResults[_0x39293a(0x1f4)]('coins',_0x4f3b2e)[_0x39293a(0x25f)]();const _0xccbe59=getTimeStamp()[_0x39293a(0x233)]('\x20')[0x0];let _0x378a2a=dbPerformance[_0x39293a(0x35a)](_0x39293a(0x334))[_0x39293a(0x224)]({'date':_0xccbe59})[_0x39293a(0x2c9)]();_0x378a2a?(_0x378a2a[_0x39293a(0x25b)]+=_0x31716d,dbPerformance[_0x39293a(0x35a)](_0x39293a(0x334))[_0x39293a(0x224)]({'date':_0xccbe59})[_0x39293a(0x210)](_0x378a2a)[_0x39293a(0x25f)]()):await storePerformance();const _0x1d6310=getNormalizedPerformance();emitPerformance(_0x1d6310);}async function validate24hChanges(){const _0x3b6218=_0x34d5f7;for(const _0xffc90d of currentCoins){if(_0xffc90d[_0x3b6218(0x201)]!=config[_0x3b6218(0x377)]){let _0x4b8189;_0xffc90d[_0x3b6218(0x24f)]?_0x4b8189=formatResult((0x1/(gChange[_0xffc90d[_0x3b6218(0x21e)]]/0x64+0x1)-0x1)*0x64,0x3):_0x4b8189=gChange[_0xffc90d[_0x3b6218(0x21e)]],_0x4b8189<config['change24h']&&(logHistory(_0x3b6218(0x360),_0xffc90d['coin']+_0x3b6218(0x311)+_0x4b8189+'%'),logHistory(_0x3b6218(0x360),_0x3b6218(0x276)),logHistory('error','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again'),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x4b6eaa,_0x2ed909){const _0x2b61a4=_0x34d5f7;if(!_0x4b6eaa)return!![];const _0x4d8b87=_0x2ed909[_0x2b61a4(0x233)]('.'),_0x4f8b5e=_0x4b6eaa[_0x2b61a4(0x233)]('.');for(var _0xa88021=0x0;_0xa88021<_0x4f8b5e[_0x2b61a4(0x282)];_0xa88021++){const _0x2969f4=~~_0x4f8b5e[_0xa88021],_0x371b24=~~_0x4d8b87[_0xa88021];if(_0x2969f4<_0x371b24)return!![];if(_0x2969f4>_0x371b24)return![];}return![];}async function oneTimeMigration(){const _0x739b31=_0x34d5f7;let _0x4c2c6a=dbLogs['get'](_0x739b31(0x1d4))['value']();if(isOlderVersion(_0x4c2c6a,'2.3.5')){let _0x11fdd4=[];const _0x1a1988=dbLogs[_0x739b31(0x35a)](_0x739b31(0x361))[_0x739b31(0x2c9)]();_0x1a1988[_0x739b31(0x2f0)](_0x2f0d8a=>{const _0x31cdb9=_0x739b31;_0x11fdd4[_0x31cdb9(0x1d2)]({'time':_0x2f0d8a[_0x31cdb9(0x1cd)],'type':_0x2f0d8a[_0x31cdb9(0x2f8)],'event':_0x2f0d8a[_0x31cdb9(0x340)]});}),dbLogs[_0x739b31(0x35a)](_0x739b31(0x361))[_0x739b31(0x210)](_0x11fdd4)[_0x739b31(0x25f)]();}let _0xd31dcd=dbConfig[_0x739b31(0x35a)](_0x739b31(0x1d4))[_0x739b31(0x2c9)]();if(isOlderVersion(_0xd31dcd,_0x739b31(0x27d))){let _0x4c17da=dbConfig[_0x739b31(0x35a)](_0x739b31(0x27c))['find']({'botID':botID})[_0x739b31(0x2c9)]();if(_0x4c17da){let _0x315fda=[];_0x4c17da[_0x739b31(0x1c6)][_0x739b31(0x2f0)](_0xc6d241=>{const _0x480e84=_0x739b31;_0x315fda[_0x480e84(0x1d2)]({'coin':_0xc6d241['coin'],'number':_0xc6d241['startnumber'],'price':_0xc6d241[_0x480e84(0x2da)]}),delete _0xc6d241[_0x480e84(0x355)],delete _0xc6d241[_0x480e84(0x2da)];});if(_0x315fda[_0x739b31(0x282)]!==0x0)fs[_0x739b31(0x1d9)](configbackuppath+('starting-balance-'+botID+_0x739b31(0x204)),JSON['stringify'](_0x315fda,null,0x4),function(_0x2d9209){if(_0x2d9209){}});const _0x3e2a90=(_0x480baa,_0x1ff87f)=>{const _0x3d8fae=_0x739b31;let _0x213abf=[];_0x1ff87f['forEach'](_0x4d7ca7=>{const _0x39d91f=_0x1f5c,_0x1984b2=_0x480baa[_0x39d91f(0x224)](_0x463b47=>_0x463b47['coin']==_0x4d7ca7[_0x39d91f(0x201)]);if(!_0x1984b2)_0x213abf[_0x39d91f(0x1d2)](_0x4d7ca7);});let _0x178c4d=[];return _0x480baa[_0x3d8fae(0x2f0)](_0x20a729=>{const _0x3c573e=_0x3d8fae,_0x19f966=_0x1ff87f[_0x3c573e(0x224)](_0x1c507d=>_0x1c507d[_0x3c573e(0x201)]==_0x20a729[_0x3c573e(0x201)]);if(!_0x19f966||_0x19f966['number']==0x0&&_0x20a729[_0x3c573e(0x320)]!=0x0)_0x178c4d[_0x3c573e(0x1d2)](_0x20a729);}),{'missingDay1':_0x213abf,'notInDay2':_0x178c4d};},_0x3a0181=dbPerformance[_0x739b31(0x35a)]('data')['cloneDeep']()[_0x739b31(0x2c9)]();if(_0x3a0181[_0x739b31(0x282)]>0x1){const {missingDay1:_0x4d6f95,notInDay2:_0x1745f3}=_0x3e2a90(_0x315fda,_0x3a0181[0x1]['coins']);_0x315fda=[..._0x315fda,..._0x4d6f95],_0x1745f3[_0x739b31(0x2f0)](_0xf16637=>{const _0x539c95=_0x739b31;let _0x48410c=_0x315fda['findIndex'](_0x2e557f=>_0x2e557f[_0x539c95(0x201)]==_0xf16637['coin']);_0x48410c!=-0x1&&_0x315fda[_0x539c95(0x1c2)](_0x48410c,0x1);});}_0x315fda[_0x739b31(0x2ff)]((_0x5af000,_0x11aded)=>_0x5af000[_0x739b31(0x201)]>_0x11aded[_0x739b31(0x201)]?0x1:_0x11aded[_0x739b31(0x201)]>_0x5af000[_0x739b31(0x201)]?-0x1:0x0);let _0x561ce0=[{'date':_0x4c17da[_0x739b31(0x33f)],'changes':_0x315fda}];_0x3a0181[_0x739b31(0x282)]>0x2&&_0x3a0181[_0x739b31(0x2f0)]((_0x1ff941,_0x405506)=>{const _0x4fecfe=_0x739b31;if(_0x405506>0x0&&_0x405506<_0x3a0181[_0x4fecfe(0x282)]-0x1){const {missingDay1:_0x57583a,notInDay2:_0xd54e88}=_0x3e2a90(_0x3a0181[_0x405506][_0x4fecfe(0x2d5)],_0x3a0181[_0x405506+0x1][_0x4fecfe(0x2d5)]);_0x315fda=[],(_0x57583a['length']!=0x0||_0xd54e88[_0x4fecfe(0x282)]!=0x0)&&(_0x57583a[_0x4fecfe(0x282)]!=0x0&&_0x315fda[_0x4fecfe(0x1d2)](..._0x57583a),_0xd54e88[_0x4fecfe(0x282)]!=0x0&&(_0xd54e88[_0x4fecfe(0x2f0)](_0x4ed716=>{const _0x1861c0=_0x4fecfe;_0x4ed716[_0x1861c0(0x320)]=-_0x4ed716[_0x1861c0(0x320)];}),_0x315fda[_0x4fecfe(0x1d2)](..._0xd54e88)),_0x315fda[_0x4fecfe(0x2ff)]((_0x32b989,_0x1b398b)=>_0x32b989[_0x4fecfe(0x201)]>_0x1b398b['coin']?0x1:_0x1b398b[_0x4fecfe(0x201)]>_0x32b989['coin']?-0x1:0x0),_0x561ce0[_0x4fecfe(0x1d2)]({'date':_0x3a0181[_0x405506+0x1]['date'],'changes':_0x315fda}));}}),dbConfig[_0x739b31(0x35a)]('bot')['find']({'botID':botID})[_0x739b31(0x210)]({..._0x4c17da,'liquidity':_0x561ce0})[_0x739b31(0x25f)]();}}if(isOlderVersion(_0xd31dcd,'2.6.0')){let _0x1dec87=dbConfig[_0x739b31(0x35a)](_0x739b31(0x27c))[_0x739b31(0x224)]({'botID':botID})[_0x739b31(0x2c9)]();if(_0x1dec87){const _0x35f0e9=_0x1dec87['exchange'],_0x82398f=_0x35f0e9?capitalize(_0x35f0e9):_0x739b31(0x299);dbConfig['get']('bot')[_0x739b31(0x224)]({'botID':botID})[_0x739b31(0x210)]({'exchange':_0x82398f})[_0x739b31(0x25f)]();}}if(isOlderVersion(_0xd31dcd,_0x739b31(0x27b))){let _0x4689cc=dbConfig['get'](_0x739b31(0x27c))[_0x739b31(0x224)]({'botID':botID})[_0x739b31(0x2c9)]();if(_0x4689cc){const _0x5713f3=_0x4689cc[_0x739b31(0x28a)],_0x3bc1c7=_0x5713f3?_0x739b31(0x341):![];dbConfig['get'](_0x739b31(0x27c))[_0x739b31(0x224)]({'botID':botID})[_0x739b31(0x210)]({'marketcapEnabled':_0x3bc1c7})[_0x739b31(0x25f)]();}}if(isOlderVersion(_0xd31dcd,_0x739b31(0x2a6))){let _0x3ad5dd=dbConfig[_0x739b31(0x35a)](_0x739b31(0x27c))[_0x739b31(0x224)]({'botID':botID})[_0x739b31(0x2c9)]();if(_0x3ad5dd){const _0x2a30e8=_0x3ad5dd['autoliquidity'],_0x7455d9=_0x2a30e8?'update-liquidity':![];dbConfig[_0x739b31(0x35a)](_0x739b31(0x27c))[_0x739b31(0x224)]({'botID':botID})[_0x739b31(0x210)]({'autoliquidity':_0x7455d9})[_0x739b31(0x25f)]();}}let _0x37b08b=dbPerformance[_0x739b31(0x35a)](_0x739b31(0x1d4))[_0x739b31(0x2c9)]();isOlderVersion(_0x37b08b,_0x739b31(0x27d))&&setStartDatePerformance();let _0x39707f=dbCoinResults[_0x739b31(0x35a)](_0x739b31(0x1d4))[_0x739b31(0x2c9)]();if(isOlderVersion(_0x39707f,'2.7.1')){let _0x2df9a5=dbCoinResults[_0x739b31(0x35a)](_0x739b31(0x2d5))[_0x739b31(0x2c9)]();if(_0x2df9a5['length']!=0x0)pnlGenerationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x2c00d0=_0x34d5f7;dbConfig['set'](_0x2c00d0(0x1d4),serverversion)['write'](),dbPerformance['set'](_0x2c00d0(0x1d4),serverversion)[_0x2c00d0(0x25f)](),dbLogs['set']('version',serverversion)[_0x2c00d0(0x25f)](),dbCoinResults[_0x2c00d0(0x1f4)]('version',serverversion)['write']();}function getConfiguration(_0x45898e){const _0x413271=_0x34d5f7;let _0x1f2686=dbConfig[_0x413271(0x35a)](_0x413271(0x27c))[_0x413271(0x224)]({'botID':_0x45898e})[_0x413271(0x2c9)]();if(_0x1f2686){let _0x4ea625=![];typeof _0x1f2686[_0x413271(0x237)]==_0x413271(0x26c)&&(_0x1f2686={..._0x1f2686,'threshold':Number(_0x1f2686['threshold'])},_0x4ea625=!![]),_0x1f2686[_0x413271(0x22c)]==undefined&&(_0x1f2686={..._0x1f2686,'change24h':-0x14},_0x4ea625=!![]),_0x1f2686[_0x413271(0x357)]==undefined&&(_0x1f2686={..._0x1f2686,'fiat':_0x413271(0x200)},_0x4ea625=!![]),_0x1f2686[_0x413271(0x33a)]==undefined&&(_0x1f2686={..._0x1f2686,'onepagemode':settings[_0x413271(0x33a)]},_0x4ea625=!![]),_0x1f2686[_0x413271(0x28b)]==undefined&&(_0x1f2686={..._0x1f2686,'colorscheme':_0x413271(0x2f6)},_0x4ea625=!![]),_0x1f2686['autoliquidity']==undefined&&(_0x1f2686={..._0x1f2686,'autoliquidity':_0x413271(0x1bd)},_0x4ea625=!![]),_0x1f2686[_0x413271(0x2db)]==undefined&&(_0x1f2686={..._0x1f2686,'marketcapApi':settings['marketcapApi']?!![]:![]},_0x4ea625=!![]),_0x1f2686[_0x413271(0x28a)]==undefined&&(_0x1f2686={..._0x1f2686,'marketcapEnabled':![]},_0x4ea625=!![]),_0x1f2686[_0x413271(0x1af)]==undefined&&(_0x1f2686={..._0x1f2686,'sandbox':![]},_0x4ea625=!![]),_0x4ea625&&(_0x1f2686={'botID':_0x1f2686[_0x413271(0x1c4)],'exchange':_0x1f2686['exchange'],'apiKey':_0x1f2686['apiKey'],'apiSecret':_0x1f2686[_0x413271(0x2a5)],'apiPassword':_0x1f2686[_0x413271(0x2e5)],'basecoin':_0x1f2686[_0x413271(0x377)],'botname':_0x1f2686[_0x413271(0x1bb)],'showname':_0x1f2686[_0x413271(0x33d)],'threshold':_0x1f2686[_0x413271(0x237)],'ordertype':_0x1f2686[_0x413271(0x2d7)],'timeout':_0x1f2686[_0x413271(0x330)],'fiat':_0x1f2686[_0x413271(0x357)],'startdate':_0x1f2686[_0x413271(0x33f)],'recreate':_0x1f2686[_0x413271(0x286)],'timeshift':_0x1f2686[_0x413271(0x234)],'onepagemode':_0x1f2686[_0x413271(0x33a)],'headless':_0x1f2686[_0x413271(0x1f5)],'cooldown':_0x1f2686['cooldown'],'change24h':_0x1f2686[_0x413271(0x22c)],'emojibuy':_0x1f2686[_0x413271(0x2cb)],'emojisell':_0x1f2686[_0x413271(0x1f6)],'colorscheme':_0x1f2686['colorscheme'],'marketcapApi':_0x1f2686[_0x413271(0x2db)],'marketcapEnabled':_0x1f2686[_0x413271(0x28a)],'sandbox':_0x1f2686['sandbox'],'portfolio':_0x1f2686[_0x413271(0x1c6)],'autoliquidity':_0x1f2686[_0x413271(0x25a)],'liquidity':_0x1f2686['liquidity'],'openOrders':_0x1f2686[_0x413271(0x27e)]},dbConfig[_0x413271(0x35a)]('bot')[_0x413271(0x31c)]()[_0x413271(0x25f)](),dbConfig[_0x413271(0x35a)](_0x413271(0x27c))[_0x413271(0x1d2)](_0x1f2686)[_0x413271(0x25f)]());}else _0x1f2686={'botID':_0x45898e,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x413271(0x265)+_0x45898e,'showname':![],'threshold':0x3,'ordertype':_0x413271(0x2ed),'timeout':0x14,'fiat':_0x413271(0x200),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x413271(0x234)],'onepagemode':settings[_0x413271(0x33a)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x413271(0x2f6),'marketcapApi':settings[_0x413271(0x2db)]?!![]:![],'marketcapEnabled':![],'sandbox':![],'portfolio':[],'autoliquidity':_0x413271(0x1bd),'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x1f2686;}function emittedConfiguration(){const _0x2762a6=_0x34d5f7;let _0x3c4959;if(config[_0x2762a6(0x1d1)]=='')_0x3c4959={...config,'configstate':_0x2762a6(0x1e6)};else config[_0x2762a6(0x1d1)]=='***'?_0x3c4959={...config,'configstate':_0x2762a6(0x298)}:(_0x3c4959={...config,'apiKey':_0x2762a6(0x23a),'apiSecret':_0x2762a6(0x23a)},config[_0x2762a6(0x2e5)]&&(_0x3c4959[_0x2762a6(0x2e5)]=_0x2762a6(0x23a)));return _0x3c4959[_0x2762a6(0x318)]=enableFiatToggle,_0x3c4959;}function getSettings(){const _0x853456=_0x34d5f7;return dbSettings[_0x853456(0x35a)](_0x853456(0x1ee))[_0x853456(0x2c9)]();}function getSecure(){const _0x86e86c=_0x34d5f7;return dbSecure['get'](_0x86e86c(0x1ff))[_0x86e86c(0x2c9)]()||{};}function updateTimeshift(_0x11fabd){const _0x2af1a1=_0x34d5f7;let _0x547288=dbConfig[_0x2af1a1(0x35a)](_0x2af1a1(0x27c))['find']({'botID':botID})[_0x2af1a1(0x2c9)]();_0x547288&&dbConfig[_0x2af1a1(0x35a)](_0x2af1a1(0x27c))[_0x2af1a1(0x224)]({'botID':botID})[_0x2af1a1(0x210)]({'timeshift':_0x11fabd})[_0x2af1a1(0x25f)](),config[_0x2af1a1(0x234)]=_0x11fabd,proxyEmit(_0x2af1a1(0x1db),emittedConfiguration());}function updateOnepagemode(_0xcc761c){const _0x40e3c1=_0x34d5f7;let _0x5065af=dbConfig[_0x40e3c1(0x35a)](_0x40e3c1(0x27c))[_0x40e3c1(0x224)]({'botID':botID})[_0x40e3c1(0x2c9)]();_0x5065af&&dbConfig[_0x40e3c1(0x35a)](_0x40e3c1(0x27c))['find']({'botID':botID})[_0x40e3c1(0x210)]({'onepagemode':_0xcc761c})[_0x40e3c1(0x25f)](),config[_0x40e3c1(0x33a)]=_0xcc761c,proxyEmit('configuration',emittedConfiguration());}function updateMarketcapApi(_0x382150){const _0x1ca95c=_0x34d5f7,_0x2ca4bf=_0x382150?!![]:![];let _0x365545=dbConfig[_0x1ca95c(0x35a)](_0x1ca95c(0x27c))['find']({'botID':botID})[_0x1ca95c(0x2c9)]();_0x365545&&dbConfig['get'](_0x1ca95c(0x27c))[_0x1ca95c(0x224)]({'botID':botID})['assign']({'marketcapApi':_0x2ca4bf})['write'](),config[_0x1ca95c(0x2db)]=_0x2ca4bf,getMarketCap(),proxyEmit(_0x1ca95c(0x1db),emittedConfiguration());}async function storeConfiguration(_0x35c9c9){const _0x461f45=_0x34d5f7;logger[_0x461f45(0x1f0)](_0x461f45(0x34a));_0x35c9c9[_0x461f45(0x2ce)]&&delete _0x35c9c9[_0x461f45(0x2ce)];if(pidBalances)clearTimeout(pidBalances);setBlockTransactionDetection(!![]);let _0x32078b=![],_0x19bc33=![],_0x3aa2a5=[];_0x35c9c9[_0x461f45(0x1c6)][_0x461f45(0x2f0)](_0x3ee1f7=>{const _0x233255=_0x461f45;if(!_0x3ee1f7[_0x233255(0x367)]&&_0x3ee1f7[_0x233255(0x201)]!=_0x35c9c9[_0x233255(0x377)])_0x3aa2a5[_0x233255(0x1d2)](_0x3ee1f7[_0x233255(0x21e)]);}),_0x3aa2a5[_0x461f45(0x2f0)](_0xf82f0=>{const _0x3150c9=_0x461f45,_0x3d5015=currentCoins['find'](_0x18e235=>_0x18e235[_0x3150c9(0x21e)]==_0xf82f0);!_0x3d5015&&(_0x32078b=!![]);}),currentCoins['forEach'](_0x4bb486=>{const _0x18e92b=_0x461f45;if(_0x4bb486[_0x18e92b(0x201)]!=config['basecoin']){const _0xc5ca97=_0x3aa2a5[_0x18e92b(0x224)](_0x42036f=>_0x42036f==_0x4bb486['symbol']);!_0xc5ca97&&(_0x32078b=!![]);}}),_0x35c9c9['portfolio'][_0x461f45(0x2f0)](_0x5a6434=>{const _0x442f06=_0x461f45,_0x59ac1b=config[_0x442f06(0x1c6)][_0x442f06(0x224)](_0x5c5b90=>_0x5c5b90['coin']==_0x5a6434[_0x442f06(0x201)]);if(_0x59ac1b&&_0x5a6434[_0x442f06(0x267)]!=_0x59ac1b['offset'])_0x19bc33=!![];});let _0x3ebe20=dbConfig[_0x461f45(0x35a)](_0x461f45(0x27c))[_0x461f45(0x224)]({'botID':botID})['value']();_0x35c9c9={..._0x35c9c9,'apiKey':decryptRSA(secure['privateKey'],_0x35c9c9['apiKey']),'apiSecret':decryptRSA(secure[_0x461f45(0x26a)],_0x35c9c9['apiSecret'])};_0x35c9c9['apiPassword']&&(_0x35c9c9[_0x461f45(0x2e5)]=decryptRSA(secure[_0x461f45(0x26a)],_0x35c9c9[_0x461f45(0x2e5)]));let _0x3df636=![];if(_0x3ebe20){_0x35c9c9['apiKey']==_0x461f45(0x23a)?_0x35c9c9[_0x461f45(0x1d1)]=config['apiKey']:_0x3df636=!![];_0x35c9c9[_0x461f45(0x2a5)]==_0x461f45(0x23a)?_0x35c9c9[_0x461f45(0x2a5)]=config['apiSecret']:_0x3df636=!![];if(_0x35c9c9['apiPassword']==_0x461f45(0x23a))_0x35c9c9['apiPassword']=config['apiPassword'];else{if(_0x35c9c9[_0x461f45(0x2e5)])_0x3df636=!![];}dbConfig[_0x461f45(0x35a)]('bot')[_0x461f45(0x224)]({'botID':botID})[_0x461f45(0x210)](_0x35c9c9)[_0x461f45(0x25f)]();}else dbConfig[_0x461f45(0x35a)]('bot')['push'](_0x35c9c9)[_0x461f45(0x25f)](),_0x3df636=!![],process[_0x461f45(0x1e3)]({'status':_0x461f45(0x1be),'live':'running'},_0x590b2d=>{});process[_0x461f45(0x1e3)]({'botname':_0x35c9c9[_0x461f45(0x1bb)]},_0x5f0efb=>{}),config={..._0x35c9c9},updateBotManager(),proxyEmit('configuration-stored'),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x3df636)await reset(!![]);else _0x32078b||_0x19bc33?await reset(![]):getBalances();setBlockTransactionDetection(![]);}async function storeHeadless(_0x13213c){const _0xc05d0c=_0x34d5f7,_0xa7f430={...config,'headless':_0x13213c[_0xc05d0c(0x1f5)]};let _0x50a820=dbConfig['get'](_0xc05d0c(0x27c))[_0xc05d0c(0x224)]({'botID':botID})[_0xc05d0c(0x2c9)]();_0x50a820&&dbConfig[_0xc05d0c(0x35a)]('bot')[_0xc05d0c(0x224)]({'botID':botID})[_0xc05d0c(0x210)](_0xa7f430)[_0xc05d0c(0x25f)](),config={..._0xa7f430},updateBotManager(),proxyEmit(_0xc05d0c(0x1db),emittedConfiguration());}async function storeFiat(_0x3d2386){const _0x4045ac=_0x34d5f7,_0x183722={...config,'fiat':_0x3d2386};let _0x270bc9=dbConfig[_0x4045ac(0x35a)](_0x4045ac(0x27c))['find']({'botID':botID})[_0x4045ac(0x2c9)]();_0x270bc9&&dbConfig['get'](_0x4045ac(0x27c))[_0x4045ac(0x224)]({'botID':botID})[_0x4045ac(0x210)](_0x183722)['write'](),config={..._0x183722},proxyEmit(_0x4045ac(0x1db),emittedConfiguration());}function resetHistory(){const _0x3c3a1d=_0x34d5f7;logger[_0x3c3a1d(0x23f)](_0x3c3a1d(0x30b));try{if(fs[_0x3c3a1d(0x28e)](path[_0x3c3a1d(0x232)](configpath,_0x3c3a1d(0x353)+botID+_0x3c3a1d(0x1df))))fs[_0x3c3a1d(0x2a1)](path[_0x3c3a1d(0x232)](configpath,_0x3c3a1d(0x353)+botID+_0x3c3a1d(0x1df)));if(fs[_0x3c3a1d(0x28e)](path[_0x3c3a1d(0x232)](configpath,_0x3c3a1d(0x353)+botID+'-performance.json')))fs[_0x3c3a1d(0x2a1)](path[_0x3c3a1d(0x232)](configpath,_0x3c3a1d(0x353)+botID+_0x3c3a1d(0x26f)));if(fs['existsSync'](path[_0x3c3a1d(0x232)](configpath,'bot-'+botID+'-results.json')))fs[_0x3c3a1d(0x2a1)](path[_0x3c3a1d(0x232)](configpath,_0x3c3a1d(0x353)+botID+_0x3c3a1d(0x258)));}catch(_0x2221bd){if(_0x2221bd)logger[_0x3c3a1d(0x23f)]('Error\x20while\x20deleting\x20files:\x20',_0x2221bd);}const _0x163ffe=getDate();let _0x3b7ba9=[];currentCoins[_0x3c3a1d(0x2f0)](_0x17bf14=>{const _0x5a941b=_0x3c3a1d;_0x3b7ba9[_0x5a941b(0x1d2)]({'coin':_0x17bf14['coin'],'number':_0x17bf14[_0x5a941b(0x320)],'price':_0x17bf14[_0x5a941b(0x2d6)]});});let _0x2c3d10=dbConfig[_0x3c3a1d(0x35a)]('bot')['find']({'botID':botID})[_0x3c3a1d(0x2c9)]();_0x2c3d10&&(dbConfig[_0x3c3a1d(0x35a)](_0x3c3a1d(0x27c))['find']({'botID':botID})[_0x3c3a1d(0x210)]({'liquidity':[{'date':_0x163ffe,'changes':_0x3b7ba9}]})[_0x3c3a1d(0x25f)](),config[_0x3c3a1d(0x255)]=[]),restartBot(!![]);}function noslash(_0x25998){return _0x25998['replace']('/','');}function updateHighestFee(_0x395e38){const _0x23c1fe=_0x34d5f7;if(_0x395e38[_0x23c1fe(0x24f)]){let _0x595b15={'filled':_0x395e38[_0x23c1fe(0x2ad)]*_0x395e38['price'],'amount':_0x395e38[_0x23c1fe(0x2ad)]*_0x395e38[_0x23c1fe(0x356)],'side':_0x395e38['side']==_0x23c1fe(0x2cd)?_0x23c1fe(0x2bd):_0x23c1fe(0x2cd),'price':0x1/_0x395e38[_0x23c1fe(0x356)]};_0x395e38={..._0x395e38,..._0x595b15};}const _0x1c99fb=defaultFee*_0x395e38[_0x23c1fe(0x2ad)]*_0x395e38['price'];lastFees['recent20']['length']===0x14&&lastFees[_0x23c1fe(0x1a9)][_0x23c1fe(0x2a0)](),lastFees[_0x23c1fe(0x1a9)][_0x23c1fe(0x1d2)](_0x1c99fb),lastFees[_0x23c1fe(0x235)]=Math['max'](...lastFees[_0x23c1fe(0x1a9)]);}async function updateNumberCoinsCcxt(_0xf91e8d){const _0x4ea1a2=_0x34d5f7;logger[_0x4ea1a2(0x1f0)](_0x4ea1a2(0x36e)+_0xf91e8d[_0x4ea1a2(0x21e)]+_0x4ea1a2(0x319)+_0xf91e8d['status']+_0x4ea1a2(0x319)+_0xf91e8d[_0x4ea1a2(0x2ad)]+_0x4ea1a2(0x2e9)+_0xf91e8d['amount']+_0x4ea1a2(0x319)+_0xf91e8d['id']);let _0x1ebfa0=_0xf91e8d[_0x4ea1a2(0x21b)],_0x581319=![];currentCoins['forEach'](_0x69856f=>{const _0x95b1e9=_0x4ea1a2;_0x69856f[_0x95b1e9(0x21e)]==_0xf91e8d[_0x95b1e9(0x21e)]&&(_0x581319=!![]);});if(!_0x581319)return;const _0x1d1fb4=currentCoins['find'](_0x2711a7=>_0x2711a7[_0x4ea1a2(0x21e)]==_0xf91e8d[_0x4ea1a2(0x21e)]),_0x121f80=_0x1d1fb4[_0x4ea1a2(0x201)],_0x47e324=_0x4cce5e=>{const _0xba7797=_0x4ea1a2,_0xdf5b4e=currentCoins['find'](_0x1a73a8=>_0x1a73a8['symbol']==_0xf91e8d[_0xba7797(0x21e)]);if(_0xdf5b4e)_0xdf5b4e[_0xba7797(0x2f2)]=_0x4cce5e;};let _0x3b3d10=![];for(const _0x3cd3ad of lastOrders){const _0x42ddac=0x64,_0x442e01=0x1388;let _0x2df508=0x0;while(!_0x3cd3ad[_0x4ea1a2(0x333)]&&_0x2df508*_0x42ddac<_0x442e01){_0x2df508++,await sleep(_0x42ddac);}if(_0x2df508>0x0)logger[_0x4ea1a2(0x1f0)]('Waited\x20'+_0x2df508*_0x42ddac/0x3e8+'\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed');_0x3cd3ad[_0x4ea1a2(0x333)]==_0xf91e8d['id']&&(_0x3b3d10=!![]);}if(_0x1ebfa0==_0x4ea1a2(0x26d)){_0x47e324(_0x4ea1a2(0x26d));if(_0xf91e8d['filled']>0x0&&_0xf91e8d['filled']<_0xf91e8d[_0x4ea1a2(0x1e4)]){if(_0x3b3d10){setBlockTransactionDetection(!![]),logger[_0x4ea1a2(0x1f0)](_0x4ea1a2(0x337)+_0xf91e8d[_0x4ea1a2(0x2ad)]+_0x4ea1a2(0x1ab)+_0xf91e8d['id']);const _0x35ef36=await getCoins(balanceUpdateDelay,undefined,undefined,_0x121f80);[currentCoins,currentCoinsAll]=_0x35ef36,setBlockTransactionDetection(![]);}else logger[_0x4ea1a2(0x1f0)](_0x4ea1a2(0x337)+_0xf91e8d[_0x4ea1a2(0x2ad)]+')\x20unknown\x20order:\x20'+_0xf91e8d['id']),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay);}}else{if(_0x1ebfa0=='canceled'){_0x47e324(_0x4ea1a2(0x35c)),lastOrders=lastOrders['filter'](_0x1b14d7=>_0x1b14d7[_0x4ea1a2(0x21e)]!=_0xf91e8d[_0x4ea1a2(0x21e)]);const _0x12f4b2=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x12f4b2,setBlockTransactionDetection(![]),await getOpenOrders(),handleOpenOrders();}else{if(_0x1ebfa0==_0x4ea1a2(0x376)){if(lastOrders)for(const _0x5422ef of lastOrders){if(_0x5422ef[_0x4ea1a2(0x333)]==_0xf91e8d['id']){logger[_0x4ea1a2(0x1f0)](_0x4ea1a2(0x2fd)+_0xf91e8d['id']),_0x3b3d10=!![];if(_0x5422ef[_0x4ea1a2(0x2ad)]==0x0){setBlockTransactionDetection(!![]),logger[_0x4ea1a2(0x1f0)](_0x4ea1a2(0x308)+_0xf91e8d['id']);if(_0xf91e8d[_0x4ea1a2(0x24d)])_0x5422ef['price']=_0xf91e8d[_0x4ea1a2(0x24d)];else{if(_0xf91e8d[_0x4ea1a2(0x356)])_0x5422ef[_0x4ea1a2(0x356)]=_0xf91e8d[_0x4ea1a2(0x356)];else{}}_0x5422ef['filled']=_0xf91e8d[_0x4ea1a2(0x2ad)],updateHighestFee(_0x5422ef);const _0x579e15=await getCoins(balanceUpdateDelay,undefined,undefined,_0x121f80);[currentCoins,currentCoinsAll]=_0x579e15,setBlockTransactionDetection(![]),await validateOrders(),_0x47e324(_0x4ea1a2(0x2ad)),_0x5422ef[_0x4ea1a2(0x2bc)]={'currency':_0xf91e8d[_0x4ea1a2(0x2bc)]?_0xf91e8d['fee']['currency']:null,'cost':_0xf91e8d[_0x4ea1a2(0x2bc)]?_0xf91e8d[_0x4ea1a2(0x2bc)]['cost']:0x0},await updatePnL(_0x5422ef);}}}!_0x3b3d10&&(logger['debug'](_0x4ea1a2(0x343)+_0xf91e8d['id']),_0x47e324(_0x4ea1a2(0x2ad)),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay),await updateOpenOrders(),handleOpenOrders());}}}if(lastBalances){let _0x36db9e=JSON[_0x4ea1a2(0x20b)](lastBalances[_0x4ea1a2(0x1c6)]);const _0x54befb=_0x36db9e[_0x4ea1a2(0x224)](_0x5ad60f=>_0x5ad60f[_0x4ea1a2(0x21e)]==_0xf91e8d['symbol']);if(_0x54befb){if(_0x1ebfa0==_0x4ea1a2(0x26d))_0x54befb['orderstatus']=_0x54befb[_0x4ea1a2(0x2f2)]==_0x4ea1a2(0x2ad)?_0x4ea1a2(0x2ad):_0x4ea1a2(0x26d);else{if(_0x1ebfa0==_0x4ea1a2(0x35c))_0x54befb['orderstatus']=_0x54befb['orderstatus']==_0x4ea1a2(0x2ad)?_0x4ea1a2(0x2ad):_0x4ea1a2(0x35c);else _0x1ebfa0=='closed'&&(_0x54befb['orderstatus']=_0x4ea1a2(0x2ad));}}lastBalances={...lastBalances,'portfolio':JSON[_0x4ea1a2(0x1e5)](_0x36db9e)},proxyEmit(_0x4ea1a2(0x285),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){await getOpenOrders();let _0x4b7190=![];currentCoins['forEach'](_0x2f7aa2=>{const _0x217a17=_0x1f5c;_0x4b7190=allOpenOrders[_0x217a17(0x224)](_0x5b75c0=>_0x5b75c0[_0x217a17(0x21e)]==_0x2f7aa2[_0x217a17(0x21e)]),_0x2f7aa2['orderstatus']=_0x4b7190?_0x217a17(0x26d):_0x217a17(0x2a9);});}async function fetchBalance(_0x24b1e4=!![]){const _0xb281a8=_0x34d5f7;let _0x26e782,_0xb5d4d,_0x3f4b65,_0x2f8f9d=0x0;while(!_0xb5d4d&&_0x2f8f9d<maxRetries){try{return _0x26e782=await exchange[_0xb281a8(0x325)](),_0xb5d4d=_0x26e782[_0xb281a8(0x23c)],_0xb5d4d;}catch(_0x5b4957){_0x3f4b65=_0x5b4957,_0x2f8f9d++,await sleep(retryInterval);}}return!_0x24b1e4?handleErrorNoStop(_0x3f4b65,_0xb281a8(0x2a3)):await handleError(_0x3f4b65,_0xb281a8(0x2a3)),![];}async function getCoins(_0x5b6308=0x0,_0x30c961=!![],_0x308513=config[_0x34d5f7(0x377)],_0x585ef1){const _0x21a442=_0x34d5f7;let _0x5ef6ec=[],_0x1aad03=[],_0x403b82=[],_0x5ed0e4;if(_0x5b6308)await sleep(_0x5b6308);if(botPaused)return[currentCoins,currentCoinsAll];let _0x4b0364=![],_0x3beedd=0x0,_0x2bde1c,_0x232f29;_0x585ef1&&(_0x2bde1c=currentCoins['find'](_0x36ec59=>_0x36ec59['coin']==_0x585ef1),_0x2bde1c&&(_0x232f29=_0x2bde1c[_0x21a442(0x1c3)],delete _0x2bde1c[_0x21a442(0x1c3)]));while(!_0x4b0364){_0x5ed0e4=await fetchBalance(_0x30c961);if(_0x5ed0e4){if(_0x585ef1){if(_0x5ed0e4[_0x585ef1]!=_0x232f29)logger[_0x21a442(0x1f0)](_0x21a442(0x257)+_0x585ef1+':\x20'+_0x5ed0e4[_0x585ef1]+'\x20('+_0x232f29+')'),_0x4b0364=!![];else{logger[_0x21a442(0x1f0)](_0x21a442(0x30c)+_0x585ef1+':\x20'+_0x5ed0e4[_0x585ef1]+'\x20('+_0x232f29+')'),_0x3beedd++;if(_0x3beedd<balanceUpdateRetries)await sleep(balanceUpdateDelay);else{logger[_0x21a442(0x1f0)](_0x21a442(0x2ca)+_0x3beedd+_0x21a442(0x2e3));break;}}}else break;}else return[currentCoins,currentCoinsAll];}for(const [_0x24d60a,_0x3e2086]of Object['entries'](_0x5ed0e4)){_0x403b82['push'](_0x24d60a);}config[_0x21a442(0x1c6)][_0x21a442(0x2f0)](_0x1dab8f=>{const _0x45ccd3=_0x21a442;!_0x403b82[_0x45ccd3(0x1f1)](_0x1dab8f[_0x45ccd3(0x201)])&&(_0x5ed0e4[_0x1dab8f[_0x45ccd3(0x201)]]=0x0);});if(_0x308513=='')for(const [_0x43c902,_0x1cfcfd]of Object[_0x21a442(0x2a7)](_0x5ed0e4)){_0x1cfcfd!=0x0&&_0x5ef6ec['push']({'coin':_0x43c902});}else for(const [_0x4f0fb0,_0x1a475b]of Object['entries'](_0x5ed0e4)){const _0x3de3fd=config[_0x21a442(0x1c6)][_0x21a442(0x224)](_0x4079bf=>_0x4079bf[_0x21a442(0x201)]==_0x4f0fb0),_0x52759c=_0x4f0fb0+'/'+_0x308513,_0x3f6519=_0x308513+'/'+_0x4f0fb0,_0x45b837=currentCoins[_0x21a442(0x224)](_0x2d7afc=>_0x2d7afc[_0x21a442(0x201)]==_0x4f0fb0);if((_0x1a475b!=0x0||_0x3de3fd)&&(allSymbols[_0x21a442(0x1f1)](_0x52759c)||_0x4f0fb0==_0x308513))_0x45b837?_0x5ef6ec[_0x21a442(0x1d2)]({..._0x45b837,'number':Math['max'](_0x1a475b+(_0x3de3fd&&_0x3de3fd[_0x21a442(0x267)]||0x0),0x0)}):_0x5ef6ec['push']({'coin':_0x4f0fb0,'symbol':_0x52759c,'reverse':![],'number':Math[_0x21a442(0x302)](_0x1a475b+(_0x3de3fd&&_0x3de3fd[_0x21a442(0x267)]||0x0),0x0),'orderstatus':_0x21a442(0x2a9)});else{if((_0x1a475b!=0x0||_0x3de3fd)&&allSymbols[_0x21a442(0x1f1)](_0x3f6519))_0x45b837?_0x5ef6ec['push']({..._0x45b837,'number':Math['max'](_0x1a475b+(_0x3de3fd&&_0x3de3fd[_0x21a442(0x267)]||0x0),0x0)}):_0x5ef6ec[_0x21a442(0x1d2)]({'coin':_0x4f0fb0,'symbol':_0x3f6519,'reverse':!![],'number':Math[_0x21a442(0x302)](_0x1a475b+(_0x3de3fd&&_0x3de3fd[_0x21a442(0x267)]||0x0),0x0),'orderstatus':_0x21a442(0x2a9)});else _0x3de3fd&&_0x5ef6ec['push']({'coin':_0x3de3fd[_0x21a442(0x201)],'symbol':_0x3de3fd[_0x21a442(0x21e)],'reverse':_0x3de3fd[_0x21a442(0x24f)],'number':0x0,'orderstatus':_0x21a442(0x2a9)});}}return _0x5ef6ec['sort']((_0x534874,_0xcded27)=>_0x534874[_0x21a442(0x229)]<_0xcded27[_0x21a442(0x229)]?0x1:_0xcded27[_0x21a442(0x229)]<_0x534874['delta']?-0x1:0x0),_0x1aad03=cloneDeep(_0x5ef6ec),_0x5ef6ec=_0x5ef6ec[_0x21a442(0x24c)](_0x589b1a=>{const _0x9af769=_0x21a442,_0x4de065=config[_0x9af769(0x1c6)][_0x9af769(0x224)](_0x449a7e=>_0x449a7e[_0x9af769(0x201)]==_0x589b1a[_0x9af769(0x201)]);return _0x4de065&&!_0x4de065['excluded'];}),[_0x5ef6ec,_0x1aad03];}async function getOpenOrders(){const _0x3cf96c=_0x34d5f7;let _0x22e9ae;allOpenOrders=[];try{for(const _0x3247fe of config['portfolio']){!_0x3247fe[_0x3cf96c(0x367)]&&_0x3247fe[_0x3cf96c(0x201)]!=config['basecoin']&&(_0x22e9ae=await exchange['fetchOpenOrders'](_0x3247fe[_0x3cf96c(0x21e)]),_0x22e9ae['length']>0x0&&allOpenOrders['push'](_0x22e9ae[0x0]));}}catch(_0x24ae35){await handleError(_0x24ae35,_0x3cf96c(0x2cc));}}async function handleOpenOrders(_0x11e9c2=0x0){const _0x24f249=_0x34d5f7;allOpenOrders['length']==0x0&&lockOrders==ORDERS[_0x24f249(0x364)]&&allOrdersPlaced&&(_0x11e9c2==0x0?(logger['debug'](_0x24f249(0x31d)),_0x11e9c2++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x24f249(0x1f0)](_0x24f249(0x251)),validateOrders(_0x24f249(0x2c7))));}async function testAPI(){const _0xf9e034=_0x34d5f7;try{return await exchange[_0xf9e034(0x325)](),!![];}catch(_0x1a5540){return loading[_0xf9e034(0x2f5)]=!![],_0x1a5540[_0xf9e034(0x1b4)]()['toLowerCase']()[_0xf9e034(0x1f1)](_0xf9e034(0x2d8))||_0x1a5540[_0xf9e034(0x1b4)]()['toLowerCase']()['includes'](_0xf9e034(0x344))?(logHistory(_0xf9e034(0x360),_0xf9e034(0x31b)),loading[_0xf9e034(0x360)]=_0xf9e034(0x322)):(handleErrorNoStop(_0x1a5540,_0xf9e034(0x348)),logger[_0xf9e034(0x1f0)](_0xf9e034(0x336),_0x1a5540)),emitLoadingProgress(),botPaused=!![],![];}}async function testNewAPI(_0x45fd9e){const _0x24ce81=_0x34d5f7;logger[_0x24ce81(0x1f0)]('Test\x20new\x20API');const _0x17a6a4=ccxt[_0x24ce81(0x2b5)][_0x45fd9e[_0x24ce81(0x304)]['toLowerCase']()],_0xb1067=new _0x17a6a4({'apiKey':_0x45fd9e[_0x24ce81(0x1d1)],'secret':_0x45fd9e[_0x24ce81(0x2a5)],'options':{'defaultType':_0x24ce81(0x32b)}});if(_0x45fd9e[_0x24ce81(0x2e5)])_0xb1067[_0x24ce81(0x310)]=_0x45fd9e[_0x24ce81(0x2e5)];if(_0xb1067['has'][_0x24ce81(0x1af)])_0xb1067[_0x24ce81(0x352)](_0x45fd9e[_0x24ce81(0x1af)]);try{await _0xb1067[_0x24ce81(0x325)](),botPaused=![];}catch(_0x17d102){logger[_0x24ce81(0x1f0)](_0x24ce81(0x2f4)+_0x17d102[_0x24ce81(0x1b4)]());throw _0x17d102;}}function cloneDeep(_0x489d52){const _0xd12a8d=_0x34d5f7;return JSON[_0xd12a8d(0x20b)](JSON[_0xd12a8d(0x1e5)](_0x489d52));}async function getPortfolio(_0x19d6b6){const _0x173f5a=_0x34d5f7;let _0x4eef83=[],_0x575c68=[],_0x25ce15=[],_0x5ac54a;_0x19d6b6[_0x173f5a(0x1d1)]=decryptRSA(secure[_0x173f5a(0x26a)],_0x19d6b6[_0x173f5a(0x1d1)]),_0x19d6b6[_0x173f5a(0x2a5)]=decryptRSA(secure['privateKey'],_0x19d6b6[_0x173f5a(0x2a5)]);if(_0x19d6b6[_0x173f5a(0x2e5)])_0x19d6b6['apiPassword']=decryptRSA(secure[_0x173f5a(0x26a)],_0x19d6b6[_0x173f5a(0x2e5)]);if(_0x19d6b6[_0x173f5a(0x1d1)]!==_0x173f5a(0x23a)||_0x19d6b6[_0x173f5a(0x2a5)]!=='************'||_0x19d6b6[_0x173f5a(0x2e5)]&&_0x19d6b6['apiPassword']!=='************'){if(config[_0x173f5a(0x304)]){if(_0x19d6b6[_0x173f5a(0x1d1)]==_0x173f5a(0x23a))_0x19d6b6[_0x173f5a(0x1d1)]=config['apiKey'];if(_0x19d6b6['apiSecret']==_0x173f5a(0x23a))_0x19d6b6[_0x173f5a(0x2a5)]=config[_0x173f5a(0x2a5)];if(_0x19d6b6[_0x173f5a(0x2e5)]==_0x173f5a(0x23a))_0x19d6b6['apiPassword']=config['apiPassword'];}try{if(_0x19d6b6[_0x173f5a(0x1d6)])await testNewAPI(_0x19d6b6);}catch(_0x355e31){if(_0x355e31['toString']()[_0x173f5a(0x1f1)](_0x173f5a(0x246))){logHistory(_0x173f5a(0x360),_0x173f5a(0x33c)),logHistory(_0x173f5a(0x360),_0x173f5a(0x1cc)+_0x355e31[_0x173f5a(0x1b4)]()),proxyEmit('portfolio1',![]);return;}else{if(_0x355e31[_0x173f5a(0x1b4)]()['includes'](_0x173f5a(0x34f))){logHistory(_0x173f5a(0x360),_0x173f5a(0x28f)),logHistory(_0x173f5a(0x360),_0x173f5a(0x1cc)+_0x355e31[_0x173f5a(0x1b4)]()),proxyEmit('portfolio1',![]);return;}else{logHistory(_0x173f5a(0x360),_0x173f5a(0x2b4)+_0x355e31['toString']()),logger[_0x173f5a(0x1f0)](_0x173f5a(0x336),_0x355e31),proxyEmit(_0x173f5a(0x294),![]);return;}}}exchange?updateExchange(_0x19d6b6[_0x173f5a(0x1d1)],_0x19d6b6[_0x173f5a(0x2a5)],_0x19d6b6[_0x173f5a(0x2e5)]):await initExchange(_0x19d6b6[_0x173f5a(0x304)],_0x19d6b6[_0x173f5a(0x1d1)],_0x19d6b6[_0x173f5a(0x2a5)],_0x19d6b6[_0x173f5a(0x2e5)],_0x19d6b6[_0x173f5a(0x1af)]);await loadSymbols();const _0x17a18f=await getCoins(0x0,![],_0x19d6b6[_0x173f5a(0x377)]);_0x25ce15=cloneDeep(_0x17a18f[0x1]);}else{const _0x31ed7e=await getCoins();_0x25ce15=cloneDeep(_0x31ed7e[0x1]);}if(_0x19d6b6[_0x173f5a(0x377)]=='')proxyEmit('portfolio1',!![]),proxyEmit(_0x173f5a(0x2c5),_0x25ce15);else{_0x25ce15[_0x173f5a(0x2f0)](_0x5ea006=>{const _0x261538=_0x173f5a;if(_0x5ea006['coin']!=_0x19d6b6[_0x261538(0x377)]&&allSymbols[_0x261538(0x1f1)](_0x5ea006[_0x261538(0x21e)]))_0x4eef83[_0x261538(0x1d2)](_0x5ea006[_0x261538(0x21e)]);});if(_0x4eef83[_0x173f5a(0x282)]==0x0)logHistory(_0x173f5a(0x360),'Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot');else{try{_0x575c68=await getTickers(_0x4eef83);}catch(_0x3f0f02){logHistory(_0x173f5a(0x360),_0x173f5a(0x335)),logger['debug'](_0x173f5a(0x336),_0x3f0f02),proxyEmit(_0x173f5a(0x294),![]);return;}_0x25ce15[_0x173f5a(0x2f0)](_0x52a492=>{const _0x495a98=_0x173f5a;_0x52a492['coin']!=_0x19d6b6[_0x495a98(0x377)]?_0x575c68[_0x52a492[_0x495a98(0x21e)]]?_0x575c68[_0x52a492[_0x495a98(0x21e)]][_0x495a98(0x2d6)]?_0x5ac54a=_0x52a492['reverse']?0x1/_0x575c68[_0x52a492[_0x495a98(0x21e)]][_0x495a98(0x2d6)]:_0x575c68[_0x52a492[_0x495a98(0x21e)]][_0x495a98(0x2d6)]:_0x5ac54a=0x0:_0x5ac54a=0x0:_0x5ac54a=0x1,_0x52a492[_0x495a98(0x356)]=formatResult(_0x5ac54a,0x8);}),await getMarketCap(_0x25ce15),proxyEmit(_0x173f5a(0x294),!![]),proxyEmit(_0x173f5a(0x2c5),_0x25ce15);}}}function truncateTradeAmount(_0x3b80c7,_0xfd012a){const _0x510403=_0x34d5f7;let _0x55a37d=0x0;try{_0x55a37d=exchange[_0x510403(0x244)](_0x3b80c7,_0xfd012a);}catch(_0x143839){}return _0x55a37d;}function checkMinimums(_0x3b81b2){const _0xdcd26d=_0x34d5f7;let _0x36e27c=!![];const _0xf82244=!_0x3b81b2[_0xdcd26d(0x24f)]?markets[_0x3b81b2[_0xdcd26d(0x21e)]][_0xdcd26d(0x342)][_0xdcd26d(0x1e4)][_0xdcd26d(0x222)]:markets[_0x3b81b2[_0xdcd26d(0x21e)]][_0xdcd26d(0x342)]['cost'][_0xdcd26d(0x222)],_0x3e2520=!_0x3b81b2[_0xdcd26d(0x24f)]?markets[_0x3b81b2[_0xdcd26d(0x21e)]][_0xdcd26d(0x342)]['cost'][_0xdcd26d(0x222)]:markets[_0x3b81b2['symbol']][_0xdcd26d(0x342)][_0xdcd26d(0x1e4)][_0xdcd26d(0x222)],_0x5b4b6a=truncateTradeAmount(_0x3b81b2[_0xdcd26d(0x21e)],_0x3b81b2[_0xdcd26d(0x270)]);_0x3b81b2[_0xdcd26d(0x270)]=_0x5b4b6a;if(Math['abs'](_0x5b4b6a)<_0xf82244)_0x36e27c=![];if(Math[_0xdcd26d(0x269)](_0x5b4b6a)*_0x3b81b2[_0xdcd26d(0x2d6)]<_0x3e2520)_0x36e27c=![];if(_0x3b81b2[_0xdcd26d(0x2a4)]=='sell'){let _0x44f3d9=config[_0xdcd26d(0x1c6)][_0xdcd26d(0x224)](_0x42fa2b=>_0x42fa2b[_0xdcd26d(0x201)]==_0x3b81b2[_0xdcd26d(0x201)]);if(_0x44f3d9['offset']>0x0){if(Math[_0xdcd26d(0x269)](_0x5b4b6a)>_0x3b81b2[_0xdcd26d(0x320)]-_0x44f3d9[_0xdcd26d(0x267)])_0x36e27c=![];}else{if(Math[_0xdcd26d(0x269)](_0x5b4b6a)>_0x3b81b2[_0xdcd26d(0x320)])_0x36e27c=![];}}if(_0x3b81b2[_0xdcd26d(0x2a4)]=='buy'){let _0x3dfbbf=config['portfolio'][_0xdcd26d(0x224)](_0x57259f=>_0x57259f[_0xdcd26d(0x201)]==config[_0xdcd26d(0x377)]),_0x482582=currentCoins[_0xdcd26d(0x224)](_0x2362a3=>_0x2362a3[_0xdcd26d(0x201)]==config['basecoin']);if(_0x3dfbbf[_0xdcd26d(0x267)]>0x0){if(Math['abs'](_0x5b4b6a)*_0x3b81b2['last']>_0x482582[_0xdcd26d(0x320)]-_0x3dfbbf['offset'])_0x36e27c=![];}else{if(Math[_0xdcd26d(0x269)](_0x5b4b6a)*_0x3b81b2[_0xdcd26d(0x2d6)]>_0x482582['number'])_0x36e27c=![];}}return _0x36e27c;}async function getBalances(_0x1a9549=!![]){const _0x45f980=_0x34d5f7;if(botPaused)return;let _0x264185=0x0,_0x13def1;const _0x3e1e6c=config[_0x45f980(0x237)];if(config[_0x45f980(0x1f5)]&&config[_0x45f980(0x22c)]<0x0)await validate24hChanges();currentCoins[_0x45f980(0x2f0)](_0x1cf985=>{const _0xb72b0e=_0x45f980;if(_0x1cf985['coin']!=config[_0xb72b0e(0x377)]){let _0x2bcb2d=gTicker[noslash(_0x1cf985[_0xb72b0e(0x21e)])];_0x13def1=_0x1cf985[_0xb72b0e(0x24f)]?0x1/_0x2bcb2d:_0x2bcb2d;}else _0x13def1=0x1;let _0x206c7d=_0x1cf985[_0xb72b0e(0x320)]*_0x13def1;_0x264185+=_0x206c7d,_0x1cf985['last']=formatResult(Number(_0x13def1),0x8),_0x1cf985[_0xb72b0e(0x2c9)]=_0x206c7d;}),currentCoins[_0x45f980(0x2f0)](_0x28d16f=>{const _0x511d24=_0x45f980;let _0x393dd5=config[_0x511d24(0x1c6)][_0x511d24(0x224)](_0x16fd2b=>_0x16fd2b[_0x511d24(0x201)]==_0x28d16f[_0x511d24(0x201)]),_0xda3972=Number(_0x393dd5[_0x511d24(0x350)]),_0x2e20ff=_0x28d16f[_0x511d24(0x2c9)]/_0x264185*0x64,_0x24c13b=_0xda3972*_0x264185/0x64/_0x28d16f[_0x511d24(0x2d6)]-_0x28d16f[_0x511d24(0x320)];_0x28d16f[_0x511d24(0x350)]=formatResult(_0x2e20ff,0x3),_0x28d16f[_0x511d24(0x268)]=formatResult(_0xda3972,0x3),_0x28d16f['trade']=formatResult(_0x24c13b,0x8),_0x28d16f[_0x511d24(0x2a4)]='',_0x28d16f['valid']=![];if(_0x28d16f[_0x511d24(0x201)]!=config['basecoin']){if(_0x28d16f[_0x511d24(0x350)]>_0xda3972)_0x28d16f[_0x511d24(0x2a4)]=_0x511d24(0x2cd),_0x28d16f[_0x511d24(0x227)]=checkMinimums(_0x28d16f);else _0x28d16f[_0x511d24(0x350)]<_0xda3972&&(_0x28d16f[_0x511d24(0x2a4)]=_0x511d24(0x2bd),_0x28d16f['valid']=checkMinimums(_0x28d16f));}_0x28d16f['delta']=_0x28d16f[_0x511d24(0x350)]/_0x28d16f['target']-0x1;if(_0x28d16f[_0x511d24(0x2f2)]==_0x511d24(0x2ad)||_0x28d16f[_0x511d24(0x2f2)]==_0x511d24(0x35c))_0x28d16f['orderstatus']=_0x511d24(0x2a9);}),currentCoins[_0x45f980(0x2ff)]((_0x524399,_0xa348f)=>_0x524399[_0x45f980(0x229)]<_0xa348f['delta']?0x1:_0xa348f['delta']<_0x524399[_0x45f980(0x229)]?-0x1:0x0);const _0x5bcf24=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x5bcf24[_0x45f980(0x20c)],'usd':_0x5bcf24['usd'],'portfolio':JSON[_0x45f980(0x1e5)](currentCoins),'threshold':_0x3e1e6c},proxyEmit(_0x45f980(0x285),{'serverversion':serverversion,'balances':lastBalances});if(_0x1a9549){if(config[_0x45f980(0x1f5)])headlessMode({'portfolio':currentCoins,'threshold':_0x3e1e6c});else lockOrders==ORDERS['UNLOCKED']&&!coolingDown&&notifyBalance({'portfolio':currentCoins,'threshold':_0x3e1e6c});}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x5cc1f7=getNormalizedPerformance();getStartingBalances(_0x5cc1f7),emitPerformance(_0x5cc1f7);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}function getPnL(){const _0x4c5064=_0x34d5f7;let _0x1ae890=dbCoinResults['get']('coins')[_0x4c5064(0x2c9)](),_0x15baec=0x0;return Object['entries'](_0x1ae890)['forEach'](([_0x13c8a3,_0x7c10b9])=>{const _0x29f442=_0x4c5064;_0x15baec+=_0x7c10b9[_0x29f442(0x279)];}),_0x15baec;}async function storePerformance(){const _0x431d06=_0x34d5f7;if(!lastBalances)return;let _0x2e93f6=[],_0x382fbb;const _0x556f77=getPnL();let _0x2ec526=JSON['parse'](lastBalances[_0x431d06(0x1c6)]);_0x2ec526[_0x431d06(0x2ff)]((_0x3813a8,_0x52ce6b)=>_0x3813a8['coin']>_0x52ce6b['coin']?0x1:_0x52ce6b[_0x431d06(0x201)]>_0x3813a8[_0x431d06(0x201)]?-0x1:0x0),_0x2ec526['forEach'](_0x15102c=>{const _0x58467f=_0x431d06;let _0x34473b={'coin':_0x15102c[_0x58467f(0x201)],'number':_0x15102c['number'],'price':_0x15102c['last']};_0x2e93f6[_0x58467f(0x1d2)](_0x34473b);});const _0x47ff90=await getFiat(),_0x22d7e7=getTimeStamp()[_0x431d06(0x233)]('\x20')[0x0],_0xad0470=dbPerformance[_0x431d06(0x35a)](_0x431d06(0x334))['find']({'date':_0x22d7e7})[_0x431d06(0x2c9)]();_0x382fbb={'date':_0x22d7e7,'eur':_0x47ff90[_0x431d06(0x20c)],'usd':_0x47ff90['usd'],'coins':_0x2e93f6,'pnl':_0x556f77},_0xad0470?_0x382fbb['date']!=config[_0x431d06(0x33f)]&&dbPerformance[_0x431d06(0x35a)](_0x431d06(0x334))[_0x431d06(0x224)]({'date':_0x22d7e7})[_0x431d06(0x210)](_0x382fbb)[_0x431d06(0x25f)]():dbPerformance[_0x431d06(0x35a)](_0x431d06(0x334))[_0x431d06(0x1d2)](_0x382fbb)['write'](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x23ed50=_0x34d5f7;let _0x57c8ed=[];if(dbPerformance['has'](_0x23ed50(0x334))[_0x23ed50(0x2c9)]()){let _0x5c2049=dbPerformance[_0x23ed50(0x35a)](_0x23ed50(0x334))[_0x23ed50(0x32a)]()['filter'](_0x5cd94f=>{const _0x209550=_0x23ed50;if(_0x5cd94f['coins'][_0x209550(0x282)]==0x0)return![];else return!![];})['sortBy'](_0x23ed50(0x26b))['value'](),_0x37f375=[...config['liquidity']];_0x37f375[_0x23ed50(0x2ff)]((_0x5e14a0,_0xf32d0e)=>_0x5e14a0[_0x23ed50(0x26b)]>_0xf32d0e['date']?-0x1:_0xf32d0e[_0x23ed50(0x26b)]>_0x5e14a0[_0x23ed50(0x26b)]?0x1:0x0);let _0x308c25=0x1,_0x4fdbd9=[],_0x3e999d=0x0;_0x5c2049[_0x23ed50(0x2ac)]()[_0x23ed50(0x24f)]()['forEach']((_0xd26b4a,_0x3794a1)=>{const _0x3603ca=_0x23ed50;if(_0x37f375[_0x3e999d]){if(_0x5c2049[_0x5c2049[_0x3603ca(0x282)]-_0x3794a1]&&_0x37f375[_0x3e999d][_0x3603ca(0x26b)]==_0x5c2049[_0x5c2049['length']-_0x3794a1][_0x3603ca(0x26b)]){if(_0x3794a1<_0x5c2049['length']){let _0x5b3115=0x0,_0x43b276=0x0;_0x5c2049[_0x5c2049[_0x3603ca(0x282)]-_0x3794a1][_0x3603ca(0x2d5)][_0x3603ca(0x2f0)](_0x74b562=>{const _0x237cd5=_0x3603ca;_0x43b276+=_0x74b562['number']*_0x74b562[_0x237cd5(0x356)];}),_0x37f375[_0x3e999d][_0x3603ca(0x1b3)][_0x3603ca(0x2f0)](_0x66c75a=>{const _0x4d3cea=_0x3603ca;_0x5b3115+=_0x66c75a['number']*_0x66c75a[_0x4d3cea(0x356)];}),_0x308c25*=_0x5b3115/(_0x43b276-_0x5b3115)+0x1;}_0x3e999d++;}}let _0x3191b1=0x0;_0xd26b4a[_0x3603ca(0x2d5)][_0x3603ca(0x2f0)](_0x524061=>{_0x3191b1+=_0x524061['number']*_0x524061['price'];}),_0x4fdbd9[_0x5c2049['length']-_0x3794a1-0x1]=_0x3191b1*(_0x308c25-0x1);});let _0x24c420=[];_0x37f375=[...config[_0x23ed50(0x255)]]||[];let _0x285007=0x0;_0x3e999d=0x0,_0x5c2049['forEach']((_0x5f12c4,_0x33e1b9)=>{const _0x157045=_0x23ed50;if(_0x37f375[_0x3e999d]){const _0x22b834=fns[_0x157045(0x20b)](_0x37f375[_0x3e999d][_0x157045(0x26b)],_0x157045(0x351),new Date()),_0x85bf96=fns[_0x157045(0x20b)](_0x5f12c4[_0x157045(0x26b)],'yyyy/MM/dd',new Date());if(fns[_0x157045(0x1fe)](_0x22b834,_0x85bf96)){let _0x2c8685=0x0;_0x37f375[_0x3e999d][_0x157045(0x1b3)][_0x157045(0x2f0)](_0x3fc1e9=>{const _0x1ac608=_0x157045;!_0x24c420[_0x3fc1e9[_0x1ac608(0x201)]]?_0x24c420[_0x3fc1e9[_0x1ac608(0x201)]]=_0x3fc1e9[_0x1ac608(0x320)]:(_0x2c8685=_0x24c420[_0x3fc1e9['coin']],_0x24c420[_0x3fc1e9[_0x1ac608(0x201)]]+=_0x3fc1e9['number']);const _0x13a9a0=_0x5f12c4[_0x1ac608(0x2d5)]['find'](_0x290498=>_0x290498[_0x1ac608(0x201)]==_0x3fc1e9['coin']);(!_0x13a9a0||_0x13a9a0[_0x1ac608(0x320)]==0x0)&&(_0x285007+=(-_0x3fc1e9[_0x1ac608(0x320)]-_0x2c8685)*_0x3fc1e9[_0x1ac608(0x356)]);}),_0x3e999d++;}}_0x5f12c4[_0x157045(0x2d5)][_0x157045(0x2f0)]((_0x3dae99,_0x10baa9)=>{const _0x37ba53=_0x157045;_0x24c420[_0x3dae99[_0x37ba53(0x201)]]&&(_0x3dae99[_0x37ba53(0x1e6)]=_0x24c420[_0x3dae99[_0x37ba53(0x201)]]);}),_0x57c8ed[_0x157045(0x1d2)]({'date':_0x5f12c4['date'],'eur':_0x5f12c4[_0x157045(0x20c)],'usd':_0x5f12c4['usd'],'offset':_0x4fdbd9[_0x33e1b9],'netoffset':_0x285007,'coins':_0x5f12c4[_0x157045(0x2d5)],'pnl':_0x5f12c4[_0x157045(0x25b)]});});}return _0x57c8ed;}function emitPerformance(_0x16b06b){const _0x3f2f0f=_0x34d5f7;_0x16b06b[_0x3f2f0f(0x282)]!==0x0?(proxyEmit(_0x3f2f0f(0x2ea),_0x16b06b),lastPerformanceEmitted=getDate()):proxyEmit(_0x3f2f0f(0x2ea),[]);}function getPerf(_0x509e82,_0x5722a8){const _0x1b3cf1=_0x34d5f7;let _0x292356=0x0,_0x4b2182=0x0,_0x261868=0x0;_0x509e82[_0x1b3cf1(0x2d5)]['forEach'](_0x470f71=>{const _0x1a8246=_0x1b3cf1;_0x292356+=_0x470f71[_0x1a8246(0x320)]*_0x470f71['price'];});_0x5722a8&&(_0x292356+=_0x509e82[_0x1b3cf1(0x267)]);if(config[_0x1b3cf1(0x377)]===_0x1b3cf1(0x20e)||config[_0x1b3cf1(0x377)]===_0x1b3cf1(0x20d)||config[_0x1b3cf1(0x377)]===_0x1b3cf1(0x33e))_0x4b2182=_0x292356*_0x509e82[_0x1b3cf1(0x20c)],_0x261868=_0x292356*_0x509e82[_0x1b3cf1(0x263)];else{if(usdBasecoins[_0x1b3cf1(0x1f1)](config[_0x1b3cf1(0x377)]))_0x4b2182=_0x292356*_0x509e82[_0x1b3cf1(0x20c)]/_0x509e82[_0x1b3cf1(0x263)],_0x261868=_0x292356;else config['basecoin']==='EUR'&&(_0x4b2182=_0x292356,_0x261868=_0x292356*_0x509e82[_0x1b3cf1(0x263)]/_0x509e82['eur']);}return[_0x292356,_0x4b2182,_0x261868];}function CurrencyFactor(_0x1c3d25,_0x581499,_0x37c741){const _0x301191=_0x34d5f7;let _0x42d3e3;if(_0x581499==='BTC'||_0x581499==='ETH'||_0x581499===_0x301191(0x33e))_0x42d3e3=_0x37c741===_0x301191(0x2b6)?_0x1c3d25[_0x301191(0x20c)]:_0x1c3d25[_0x301191(0x263)];else{if(usdBasecoins[_0x301191(0x1f1)](_0x581499))_0x42d3e3=_0x37c741==='EUR'?_0x1c3d25[_0x301191(0x20c)]/_0x1c3d25[_0x301191(0x263)]:0x1;else _0x581499===_0x301191(0x2b6)&&(_0x42d3e3=_0x37c741===_0x301191(0x2b6)?0x1:_0x1c3d25[_0x301191(0x263)]/_0x1c3d25[_0x301191(0x20c)]);}return _0x42d3e3;}function getKPIs(_0x5e53d4,_0x23e858=_0x34d5f7(0x2b6)){const _0x1745f1=_0x34d5f7,_0x556182=config[_0x1745f1(0x377)],_0x25aab0=lastBalances,_0x4b8f66=currentCoins,_0x96d952=getNormalizedPerformance(),_0x210f0a=CurrencyFactor(_0x25aab0,config[_0x1745f1(0x377)],_0x23e858);let _0x4c5ea3=0x0;_0x4b8f66['forEach'](_0x55a6c3=>{const _0x3a88dd=_0x1745f1;_0x4c5ea3+=_0x55a6c3[_0x3a88dd(0x320)]*_0x55a6c3['last'];});_0x5e53d4[_0x1745f1(0x1f1)]('fiat')&&(_0x4c5ea3*=_0x210f0a);let _0x5bfbaa;if(_0x4c5ea3!==0x0){if(_0x5e53d4===_0x1745f1(0x377)||_0x5e53d4===_0x1745f1(0x357)){if(_0x5e53d4===_0x1745f1(0x377))_0x5bfbaa=(_0x4c5ea3/startingBalances[_0x1745f1(0x377)]-0x1)*0x64;else{if(_0x23e858===_0x1745f1(0x2b6))_0x5bfbaa=(_0x4c5ea3/startingBalances['eur']-0x1)*0x64;else _0x5bfbaa=(_0x4c5ea3/startingBalances[_0x1745f1(0x263)]-0x1)*0x64;}}if(_0x5e53d4['includes'](_0x1745f1(0x321))){let _0x28aa72=0x0;if(startingBalances[_0x1745f1(0x2d5)])_0x4b8f66[_0x1745f1(0x2f0)](_0x6b7de6=>{const _0x43acc2=_0x1745f1;let _0x343e4f=startingBalances[_0x43acc2(0x2d5)][_0x43acc2(0x224)](_0x2b588b=>_0x2b588b[_0x43acc2(0x201)]===_0x6b7de6[_0x43acc2(0x201)]);if(_0x343e4f&&_0x343e4f[_0x43acc2(0x201)]&&_0x6b7de6[_0x43acc2(0x320)]!==0x0)_0x28aa72+=_0x343e4f[_0x43acc2(0x320)]*_0x6b7de6[_0x43acc2(0x2d6)];});let _0x420edc=0x0;if(_0x96d952[_0x1745f1(0x282)]!==0x0){let _0x50bd1d=_0x96d952[_0x96d952[_0x1745f1(0x282)]-0x1];_0x420edc=_0x50bd1d[_0x1745f1(0x1ba)];}_0x28aa72-=_0x420edc;let _0x52444d;_0x5e53d4==='net-basecoin'&&(_0x52444d=startingBalances[_0x1745f1(0x377)]),_0x5e53d4==='net-fiat'&&(_0x52444d=_0x23e858===_0x1745f1(0x2b6)?startingBalances['eur']:startingBalances['usd'],_0x28aa72*=_0x210f0a),_0x5bfbaa=(_0x4c5ea3-_0x28aa72)/_0x52444d*0x64,_0x4c5ea3=_0x4c5ea3-_0x28aa72;}if(_0x5e53d4[_0x1745f1(0x1f1)](_0x1745f1(0x25b))){if(_0x96d952['length']!==0x0&&_0x4b8f66['length']!==0x0){let _0x1f4268,_0x19a224=_0x96d952[_0x96d952[_0x1745f1(0x282)]-0x1][_0x1745f1(0x25b)];_0x5e53d4[_0x1745f1(0x1f1)](_0x1745f1(0x357))?(_0x1f4268=_0x23e858==='EUR'?startingBalances[_0x1745f1(0x20c)]:startingBalances[_0x1745f1(0x263)],_0x19a224*=CurrencyFactor(_0x25aab0,_0x556182,_0x23e858)):_0x1f4268=startingBalances[_0x1745f1(0x377)],_0x5bfbaa=_0x19a224/_0x1f4268*0x64,_0x4c5ea3=_0x19a224;}}if(_0x5bfbaa){if(_0x5bfbaa<0x64)_0x5bfbaa=_0x5bfbaa[_0x1745f1(0x366)](0x2);else{if(_0x5bfbaa<0x3e8)_0x5bfbaa=_0x5bfbaa[_0x1745f1(0x366)](0x1);else _0x5bfbaa=_0x5bfbaa['toFixed'](0x0);}}else _0x5bfbaa=Number('0')[_0x1745f1(0x366)](0x2);if(_0x4c5ea3){if(Math[_0x1745f1(0x269)](_0x4c5ea3)<0.000001)_0x4c5ea3=_0x4c5ea3[_0x1745f1(0x366)](0x2);else{if(Math['abs'](_0x4c5ea3)<0.1)_0x4c5ea3=_0x4c5ea3['toFixed'](0x6);else{if(Math[_0x1745f1(0x269)](_0x4c5ea3)<0x1)_0x4c5ea3=_0x4c5ea3[_0x1745f1(0x366)](0x5);else{if(Math[_0x1745f1(0x269)](_0x4c5ea3)<0xa)_0x4c5ea3=_0x4c5ea3[_0x1745f1(0x366)](0x4);else{if(Math[_0x1745f1(0x269)](_0x4c5ea3)<0x64)_0x4c5ea3=_0x4c5ea3['toFixed'](0x3);else{if(Math[_0x1745f1(0x269)](_0x4c5ea3)<0x3e8)_0x4c5ea3=_0x4c5ea3['toFixed'](0x2);else _0x4c5ea3=_0x4c5ea3[_0x1745f1(0x366)](0x2);}}}}}}else _0x4c5ea3=Number('0')[_0x1745f1(0x366)](0x2);}else _0x5bfbaa=Number('0')[_0x1745f1(0x366)](0x2);if(_0x5bfbaa>=0x0)_0x5bfbaa='+'+_0x5bfbaa;return{'value':_0x4c5ea3,'change':_0x5bfbaa};}async function getStartingBalances(_0x59c192,_0x540cd3=!![]){const _0x421c96=_0x34d5f7;if(_0x59c192[_0x421c96(0x282)]!==0x0){const [_0x3c32fc,_0x42321b,_0x406d55]=getPerf(_0x59c192[0x0],!![]);let _0x26d403=[];config[_0x421c96(0x1c6)][_0x421c96(0x2f0)](_0x50cb53=>{const _0x337f81=_0x421c96;let _0x5c4c1b=0x0,_0x1cc230;config[_0x337f81(0x255)]['forEach'](_0x1f50cb=>{const _0x2fa5fe=_0x337f81;let _0x2b2859=_0x1f50cb['changes'][_0x2fa5fe(0x224)](_0x2bb4c5=>_0x2bb4c5[_0x2fa5fe(0x201)]==_0x50cb53[_0x2fa5fe(0x201)]);if(_0x2b2859){_0x5c4c1b+=_0x2b2859[_0x2fa5fe(0x320)];if(!_0x1cc230)_0x1cc230=_0x2b2859[_0x2fa5fe(0x356)];}}),_0x26d403[_0x337f81(0x1d2)]({'coin':_0x50cb53[_0x337f81(0x201)],'number':_0x5c4c1b,'initialprice':_0x1cc230});});const _0x411ca7={'basecoin':_0x3c32fc,'eur':_0x42321b,'usd':_0x406d55,'coins':_0x26d403};if(_0x540cd3)proxyEmit(_0x421c96(0x259),_0x411ca7);startingBalances=_0x411ca7;}}function headlessMode(_0x9b006a){const _0x54d8a2=_0x34d5f7;let _0x482e95=_0x9b006a[_0x54d8a2(0x1c6)],_0x430daa=_0x9b006a[_0x54d8a2(0x237)],_0x2e9a6d=[];for(let _0x128f33 of _0x482e95){if(_0x128f33['coin']!=config[_0x54d8a2(0x377)]){if(_0x128f33[_0x54d8a2(0x229)]>=_0x430daa/0x64){if(_0x128f33['valid'])_0x2e9a6d['push'](_0x128f33);}else{if(_0x128f33['delta']<=-_0x430daa/0x64){if(_0x128f33[_0x54d8a2(0x227)])_0x2e9a6d[_0x54d8a2(0x1d2)](_0x128f33);}}}}_0x2e9a6d['length']>0x0&&placeOrder(_0x2e9a6d);}function notifyBalance(_0x4bdb74){const _0x50c35c=_0x34d5f7;let _0x493124=_0x4bdb74[_0x50c35c(0x1c6)],_0x2f40dd=_0x4bdb74[_0x50c35c(0x237)],_0x2ea809=[];for(let _0x4c34a9 of _0x493124){if(_0x4c34a9[_0x50c35c(0x201)]!=config['basecoin']){if(_0x4c34a9[_0x50c35c(0x229)]>=_0x2f40dd/0x64){if(_0x4c34a9[_0x50c35c(0x227)])_0x2ea809[_0x50c35c(0x1d2)](_0x4c34a9);}else{if(_0x4c34a9['delta']<=-_0x2f40dd/0x64){if(_0x4c34a9['valid'])_0x2ea809[_0x50c35c(0x1d2)](_0x4c34a9);}}}}if(_0x2ea809[_0x50c35c(0x282)]>0x0){let _0x3f9d39=_0x2ea809['map'](_0x1dbec9=>_0x1dbec9[_0x50c35c(0x201)]);_0x3f9d39[_0x50c35c(0x2ff)]();let _0x4385b2=_0x3f9d39[_0x50c35c(0x232)](',\x20');if(!lastCoinsToBalance)logHistory('warning',_0x50c35c(0x2cf));lastCoinsToBalance=_0x4385b2;}}function symbolToCoin(_0x25c5d6){const _0x4a5bfc=_0x34d5f7;let _0x4ddec9;if(_0x25c5d6[_0x4a5bfc(0x1f1)]('/'+config[_0x4a5bfc(0x377)]))_0x4ddec9=_0x25c5d6[_0x4a5bfc(0x327)]('/'+config[_0x4a5bfc(0x377)],'');if(_0x25c5d6[_0x4a5bfc(0x1f1)](config[_0x4a5bfc(0x377)]+'/'))_0x4ddec9=_0x25c5d6['replace'](config[_0x4a5bfc(0x377)]+'/','');return _0x4ddec9;}function setLockOrders(_0xda86a8){const _0x346c61=_0x34d5f7;lockOrders=_0xda86a8,logger[_0x346c61(0x1f0)]('Set\x20lock\x20orders\x20to:\x20'+Object[_0x346c61(0x313)](ORDERS)[lockOrders]);}async function unlockOrders(_0x18a0ee=![]){const _0x267e34=_0x34d5f7;if(allOrdersPlaced&&lockOrders==ORDERS[_0x267e34(0x364)]){setLockOrders(ORDERS[_0x267e34(0x211)]);if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);if(_0x18a0ee){const _0x24d77e=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x24d77e,setBlockTransactionDetection(![]);}validateOrdersState=_0x267e34(0x1e6),persistOpenOrders([]),setLockOrders(ORDERS[_0x267e34(0x1f8)]);}}async function validateOrders(_0x25c843){const _0x21640e=_0x34d5f7;if(_0x25c843)validateOrdersState=_0x25c843;logger[_0x21640e(0x1f0)]('1\x20-\x20Validate\x20orders:\x20'+validateOrdersState+_0x21640e(0x1f3)+Object['keys'](ORDERS)[lockOrders]);let _0x2da7f9=[],_0x315cfa=config['ordertype']==_0x21640e(0x2ed)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x21640e(0x330)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x21640e(0x364)])return;logger[_0x21640e(0x1f0)](_0x21640e(0x236)+validateOrdersState);for(let _0x224bdc=lastOrders['length']-0x1;_0x224bdc>=0x0;_0x224bdc--){let _0xe77bc1=lastOrders[_0x224bdc],_0x393f8e=![];_0xe77bc1[_0x21640e(0x2ad)]>0x0&&(_0x393f8e=!![]),_0x2da7f9[_0x21640e(0x1d2)](_0x393f8e),_0x393f8e&&config['ordertype']!='market'&&logHistory('order',_0x21640e(0x29b)+_0xe77bc1[_0x21640e(0x21e)]+'\x20'+_0xe77bc1['side']+'\x20#'+formatResult(_0xe77bc1[_0x21640e(0x2ad)],0x8)+'\x20@'+formatResult(_0xe77bc1[_0x21640e(0x356)],0x8)),_0x393f8e&&lastOrders['splice'](_0x224bdc,0x1);}persistOpenOrders(lastOrders);const _0x3cf1fc=coolingDown?'balancing\x20resumes\x20when\x20cooldown\x20ends':_0x21640e(0x206);if(validateOrdersState==_0x21640e(0x1e6)){validateOrdersState=_0x21640e(0x290);if(_0x2da7f9[_0x21640e(0x1f1)](![])){}else await unlockOrders();}else{if(validateOrdersState==_0x21640e(0x290)){if(_0x2da7f9['includes'](![])){}else await unlockOrders();}else{if(validateOrdersState==_0x21640e(0x31a)){let _0x1b0fe7=!![];if(_0x2da7f9['includes'](![])){if(config[_0x21640e(0x2d7)]==_0x21640e(0x2ed))logHistory('success',_0x21640e(0x331)+Math['round'](_0x315cfa*validateOrderInterval/0xea60)+_0x21640e(0x2b7)+_0x3cf1fc),await unlockOrders(!![]);else{_0x1b0fe7=await cancelOrders();if(_0x1b0fe7)logHistory('success',_0x21640e(0x21a)+Math[_0x21640e(0x346)](_0x315cfa*validateOrderInterval/0xea60)+_0x21640e(0x2b7)+_0x3cf1fc),await unlockOrders(!![]);else{validateOrdersState='ongoing',logHistory('error','Unfilled\x20order(s)\x20could\x20not\x20be\x20canceled\x20after\x20'+Math[_0x21640e(0x346)](_0x315cfa*validateOrderInterval/0xea60)+_0x21640e(0x2b7)+_0x3cf1fc),logHistory(_0x21640e(0x360),_0x21640e(0x25c));const _0x25245c=config[_0x21640e(0x2d7)]==_0x21640e(0x2ed)?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x25245c);}}}else await unlockOrders(!![]);}else{if(validateOrdersState==_0x21640e(0x2c7)){if(config[_0x21640e(0x2d7)]!=_0x21640e(0x2ed))logHistory(_0x21640e(0x35d),_0x21640e(0x1b5)+_0x3cf1fc);await unlockOrders(!![]);}}}}}async function cancelOrders(){const _0x1270e8=_0x34d5f7;let _0x4da2de=!![],_0x43f4e3;for(const _0x2c90ad of lastOrders){let _0x456e8c=![],_0x3f8a02=0x0;while(!_0x456e8c&&_0x3f8a02<maxRetries){try{const _0x79709f=await exchange['cancelOrder'](_0x2c90ad[_0x1270e8(0x333)],_0x2c90ad[_0x1270e8(0x21e)]);_0x456e8c=!![];}catch(_0x187a49){_0x187a49[_0x1270e8(0x1b4)]()[_0x1270e8(0x1f1)](_0x1270e8(0x1c7))?_0x456e8c=!![]:(_0x43f4e3=_0x187a49,_0x456e8c=![]);}!_0x456e8c&&(_0x3f8a02++,await sleep(retryInterval));}_0x4da2de=_0x4da2de&&_0x456e8c;}return!_0x4da2de&&await handleError(_0x43f4e3,_0x1270e8(0x271)),_0x4da2de;}async function initCoinResults(_0x302562){const _0x497c05=_0x34d5f7;_0x302562?logger['debug'](_0x497c05(0x30d)+_0x302562):logger[_0x497c05(0x1f0)](_0x497c05(0x2bb)),config['portfolio'][_0x497c05(0x2f0)](_0x835e45=>{const _0x5d079c=_0x497c05;if(!_0x835e45[_0x5d079c(0x367)]&&_0x835e45[_0x5d079c(0x201)]!=config['basecoin']){const _0x545fac=currentCoins['find'](_0x29c46e=>_0x29c46e['coin']==_0x835e45[_0x5d079c(0x201)]),_0x286597=gTicker[noslash(_0x835e45[_0x5d079c(0x21e)])];let _0x3aecf0=_0x545fac?_0x545fac[_0x5d079c(0x320)]:null,_0x328973=_0x835e45[_0x5d079c(0x24f)]?0x1/_0x286597:_0x286597,_0x379436;config[_0x5d079c(0x255)][_0x5d079c(0x2f0)](_0x327acb=>{const _0x21d434=_0x5d079c;!_0x379436&&(_0x379436=_0x327acb[_0x21d434(0x1b3)][_0x21d434(0x224)](_0x5e4f3d=>_0x5e4f3d[_0x21d434(0x201)]==_0x835e45[_0x21d434(0x201)]),_0x379436&&(_0x3aecf0=_0x379436[_0x21d434(0x320)],_0x328973=_0x379436[_0x21d434(0x356)]));});let _0x450125=dbCoinResults[_0x5d079c(0x35a)](_0x5d079c(0x2d5))[_0x5d079c(0x224)]({'coin':_0x835e45['coin']})[_0x5d079c(0x2c9)]();if(!_0x450125){const _0x248f71={'coin':_0x835e45[_0x5d079c(0x201)],'number':_0x3aecf0,'breakeven':_0x328973,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get'](_0x5d079c(0x2d5))[_0x5d079c(0x1d2)](_0x248f71)[_0x5d079c(0x25f)]();}else{if(_0x302562&&_0x835e45['coin']==_0x302562){const _0x38ae9c={'coin':_0x835e45[_0x5d079c(0x201)],'number':_0x3aecf0,'breakeven':_0x328973,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x5d079c(0x35a)]('coins')[_0x5d079c(0x224)]({'coin':_0x835e45['coin']})[_0x5d079c(0x210)](_0x38ae9c)['write']();}}}});}async function placeOrder(_0x2cdd55){const _0x43aa65=_0x34d5f7,_0x56e012=config[_0x43aa65(0x2d7)]==_0x43aa65(0x2ed)?_0x43aa65(0x2ed):'limit';if(lockOrders==ORDERS[_0x43aa65(0x1f8)]&&!coolingDown){setLockOrders(ORDERS['LOCKED']);while(transactionDetectionOngoing){await sleep(0x64);}logger['debug']('Placing\x20order\x20for:\x20'+_0x2cdd55[_0x43aa65(0x22d)](_0x376ec5=>_0x376ec5[_0x43aa65(0x201)])[_0x43aa65(0x232)](',\x20')),lastCoinsToBalance='',allOrdersPlaced=![],validateOrdersState=_0x43aa65(0x1e6);let _0x5e648d=![];lastOrders=[];const _0x301f48=config[_0x43aa65(0x237)];for(const _0x2bc96d of _0x2cdd55){let _0x5266ee,_0x42c552,_0x2f77a2,_0x2ed573,_0x5e0aa0,_0x2b7ed2=_0x2bc96d[_0x43aa65(0x21e)];logger[_0x43aa65(0x1f0)](_0x43aa65(0x209)+_0x2bc96d[_0x43aa65(0x201)]+'\x20'+_0x2bc96d[_0x43aa65(0x320)]+'\x20'+_0x2bc96d[_0x43aa65(0x2d6)]+'\x20'+_0x2bc96d[_0x43aa65(0x350)]+'%\x20'+_0x2bc96d[_0x43aa65(0x268)]+'%\x20'+(0x64*_0x2bc96d['delta'])[_0x43aa65(0x366)](0x2)+_0x43aa65(0x1ca)+_0x301f48['toFixed'](0x2)+'%)');const _0x24f30f=currentCoins[_0x43aa65(0x224)](_0x6d5898=>_0x6d5898[_0x43aa65(0x201)]==_0x2bc96d[_0x43aa65(0x201)]);_0x24f30f&&(_0x24f30f[_0x43aa65(0x1c3)]=_0x2bc96d[_0x43aa65(0x320)]);try{const _0x26deb1=await exchange[_0x43aa65(0x1c5)](_0x2b7ed2);_0x5266ee=_0x2bc96d[_0x43aa65(0x24f)]?0x1/_0x2bc96d['last']:_0x2bc96d[_0x43aa65(0x2d6)],_0x42c552=_0x26deb1[_0x43aa65(0x215)],_0x2f77a2=_0x26deb1[_0x43aa65(0x324)];_0x2bc96d[_0x43aa65(0x24f)]?(_0x2ed573=_0x2bc96d[_0x43aa65(0x2a4)]==_0x43aa65(0x2bd)?_0x43aa65(0x2cd):_0x43aa65(0x2bd),_0x5e0aa0=Math[_0x43aa65(0x269)](_0x2bc96d['trade'])/_0x5266ee):(_0x2ed573=_0x2bc96d[_0x43aa65(0x2a4)],_0x5e0aa0=Math['abs'](_0x2bc96d[_0x43aa65(0x270)]));_0x56e012==_0x43aa65(0x363)&&(config[_0x43aa65(0x2d7)]==_0x43aa65(0x273)&&(_0x5266ee=_0x2ed573==_0x43aa65(0x2bd)?_0x42c552:_0x2f77a2),config[_0x43aa65(0x2d7)]==_0x43aa65(0x218)&&(_0x5266ee=_0x2ed573==_0x43aa65(0x2bd)?_0x2f77a2:_0x42c552));_0x5e0aa0=formatResult(_0x5e0aa0,0x8),_0x5266ee=formatResult(_0x5266ee,0x8);const _0x77c574=_0x2ed573==_0x43aa65(0x2cd)?config[_0x43aa65(0x1f6)]?String[_0x43aa65(0x2de)]('0x'+config[_0x43aa65(0x1f6)])+'\x20':'':config[_0x43aa65(0x2cb)]?String[_0x43aa65(0x2de)]('0x'+config[_0x43aa65(0x2cb)])+'\x20':'',_0x4b448f=_0x56e012==_0x43aa65(0x2ed)?'Market':config[_0x43aa65(0x2d7)]=='limit-high'?'Limit\x20(high-margin)':'Limit\x20(low-margin)',_0x5de4d8=(Math[_0x43aa65(0x1d0)](Math['random']()*0x35a4e900)+0x5f5e100)[_0x43aa65(0x1b4)]();lastOrders[_0x43aa65(0x1d2)]({'customId':_0x5de4d8,'symbol':_0x2b7ed2,'coin':_0x2bc96d[_0x43aa65(0x201)],'amount':_0x5e0aa0,'price':_0x5266ee,'side':_0x2ed573,'reverse':_0x2bc96d[_0x43aa65(0x24f)],'filled':0x0});let _0x41c7bf;_0x56e012=='market'?_0x2ed573==_0x43aa65(0x2bd)&&['Bybit',_0x43aa65(0x2c6),'Cex','Huobi',_0x43aa65(0x1c0)][_0x43aa65(0x1f1)](config[_0x43aa65(0x304)])?_0x41c7bf=await exchange[_0x43aa65(0x1ce)](_0x2b7ed2,_0x56e012,_0x2ed573,_0x5e0aa0,_0x5266ee):_0x41c7bf=await exchange[_0x43aa65(0x1ce)](_0x2b7ed2,_0x56e012,_0x2ed573,_0x5e0aa0,undefined):_0x41c7bf=await exchange['createOrder'](_0x2b7ed2,_0x56e012,_0x2ed573,_0x5e0aa0,_0x5266ee);const _0x4aa8aa=lastOrders[_0x43aa65(0x282)]-0x1;if(_0x4aa8aa>=0x0&&lastOrders[_0x4aa8aa][_0x43aa65(0x1f9)]==_0x5de4d8){lastOrders[_0x4aa8aa][_0x43aa65(0x333)]=_0x41c7bf['id'];if(_0x41c7bf['amount'])lastOrders[_0x4aa8aa][_0x43aa65(0x1e4)]=_0x41c7bf['amount'];if(_0x41c7bf['price'])lastOrders[_0x4aa8aa][_0x43aa65(0x356)]=_0x41c7bf['price'];lastOrders[_0x4aa8aa]['fee']=_0x41c7bf[_0x43aa65(0x2bc)];}if(_0x41c7bf['amount'])_0x5e0aa0=_0x41c7bf[_0x43aa65(0x1e4)];if(_0x41c7bf[_0x43aa65(0x356)])_0x5266ee=_0x41c7bf[_0x43aa65(0x356)];if(_0x56e012=='market')logHistory(_0x43aa65(0x2b0),''+_0x77c574+_0x4b448f+_0x43aa65(0x240)+_0x2b7ed2+'\x20'+_0x2ed573+'\x20#'+formatResult(_0x5e0aa0,0x8)+'\x20@'+formatResult(_0x5266ee,0x8));else logHistory(_0x43aa65(0x2b0),''+_0x77c574+_0x4b448f+_0x43aa65(0x240)+_0x2b7ed2+'\x20'+_0x2ed573+'\x20#'+formatResult(_0x5e0aa0,0x8)+'\x20@'+formatResult(_0x5266ee,0x8));logger[_0x43aa65(0x1f0)]('ID:\x20'+_0x41c7bf['id']+'\x20|\x20Custom\x20ID:\x20'+_0x5de4d8);if(config[_0x43aa65(0x2d1)]!=0x0){let _0x331bde=null;if(cooldownTracker[_0x43aa65(0x282)]==config['cooldown']-0x1)_0x331bde=cooldownTracker[_0x43aa65(0x2a0)]();const _0x82fef=getTimeStamp();cooldownTracker[_0x43aa65(0x1d2)](_0x82fef);if(_0x331bde){const _0x37bbf7=fns['differenceInSeconds'](new Date(_0x82fef),new Date(_0x331bde));if(_0x37bbf7<cooldownInterval){logHistory('error',_0x43aa65(0x36c)+config['cooldown']+_0x43aa65(0x2be)+cooldownInterval/0x3c+_0x43aa65(0x21d)+cooldownPeriod/(0xe10*0x3e8)+_0x43aa65(0x2eb)),coolingDown=!![];break;}}}}catch(_0x1f8953){if(_0x1f8953['toString']()[_0x43aa65(0x1f1)](_0x43aa65(0x292)))lastOrders=lastOrders['filter'](_0x561018=>_0x561018['symbol']!=_0x2b7ed2),logHistory('error','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x2b7ed2),_0x5e648d=!![];else{if(_0x1f8953[_0x43aa65(0x1b4)]()[_0x43aa65(0x1f1)]('Invalid\x20quantity'))lastOrders=lastOrders[_0x43aa65(0x24c)](_0x2768cd=>_0x2768cd['symbol']!=_0x2b7ed2),logHistory(_0x43aa65(0x360),'Order\x20amount\x20is\x20invalid:\x20'+_0x2b7ed2),_0x5e648d=!![];else{if(_0x1f8953[_0x43aa65(0x1b4)]()[_0x43aa65(0x1f1)]('InvalidOrder'))lastOrders=lastOrders[_0x43aa65(0x24c)](_0x47beec=>_0x47beec['symbol']!=_0x2b7ed2),logHistory(_0x43aa65(0x360),_0x43aa65(0x29d)+_0x2b7ed2),logger[_0x43aa65(0x1f0)](_0x1f8953),_0x5e648d=!![];else _0x1f8953[_0x43aa65(0x1b4)]()[_0x43aa65(0x1f1)]('must\x20be\x20greater\x20than\x20minimum\x20amount')?(lastOrders=lastOrders[_0x43aa65(0x24c)](_0x5957f8=>_0x5957f8[_0x43aa65(0x21e)]!=_0x2b7ed2),logHistory(_0x43aa65(0x360),_0x43aa65(0x228)+_0x2b7ed2),_0x5e648d=!![]):(lastOrders=lastOrders['filter'](_0x586c96=>_0x586c96[_0x43aa65(0x21e)]!=_0x2b7ed2),await handleError(_0x1f8953,'placeOrder()',_0x2b7ed2));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x43aa65(0x282)]>0x0){const _0xf52ebf=config[_0x43aa65(0x2d7)]=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0x43aa65(0x330)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x499c72=_0x43aa65;validateOrders(_0x499c72(0x31a));},_0xf52ebf);}else unlockOrders();_0x5e648d&&config[_0x43aa65(0x1f5)]&&(logHistory(_0x43aa65(0x360),_0x43aa65(0x1b8)+pauseBotMsg),await pauseBot(pauseBotInterval)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x43aa65(0x35d),_0x43aa65(0x315)));}else{if(coolingDown)!config['headless']&&logHistory('error',_0x43aa65(0x1dc));else lockOrders!=ORDERS['UNLOCKED']&&(!config[_0x43aa65(0x1f5)]&&(config['ordertype']==_0x43aa65(0x2ed)?logHistory('error',_0x43aa65(0x1ec)):logHistory('error',_0x43aa65(0x243))));}}function persistOpenOrders(_0x89d7ec){const _0x2b6226=_0x34d5f7,_0x46fdcc={...config,'openOrders':_0x89d7ec};let _0x558218=dbConfig['get'](_0x2b6226(0x27c))['find']({'botID':botID})['value']();_0x558218&&dbConfig[_0x2b6226(0x35a)](_0x2b6226(0x27c))[_0x2b6226(0x224)]({'botID':botID})[_0x2b6226(0x210)](_0x46fdcc)['write']();}function restoreOrders(){const _0x3bdf3b=_0x34d5f7;let _0x312bc1;config[_0x3bdf3b(0x27e)]&&allOpenOrders[_0x3bdf3b(0x2f0)](_0x1654cf=>{const _0x3f0be5=_0x3bdf3b,_0x371cc2=config[_0x3f0be5(0x27e)][_0x3f0be5(0x224)](_0x6a15cc=>_0x6a15cc[_0x3f0be5(0x333)]==_0x1654cf['id']);_0x371cc2&&(lastOrders[_0x3f0be5(0x1d2)](_0x371cc2),_0x312bc1=_0x1654cf[_0x3f0be5(0x2d8)]);});if(lastOrders[_0x3bdf3b(0x282)]>0x0){setLockOrders(ORDERS[_0x3bdf3b(0x364)]),validateOrdersState=_0x3bdf3b(0x290),allOrdersPlaced=!![];const _0x4d4f6e=new Date()[_0x3bdf3b(0x208)](),_0x4b1d27=config['ordertype']==_0x3bdf3b(0x2ed)?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(_0x312bc1+_0x4b1d27>_0x4d4f6e){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x396951=_0x3bdf3b;validateOrders(_0x396951(0x31a));},_0x312bc1+_0x4b1d27-_0x4d4f6e);}else validateOrders(_0x3bdf3b(0x31a));}}async function sendMetricsTelegram(){const _0x5532b5=_0x34d5f7;if(!coinsLoaded){process[_0x5532b5(0x1e3)]({'telegrammsg':'Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute'},_0x1c1d2c=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x26cf7f='';if(config[_0x5532b5(0x33d)])_0x26cf7f=_0x5532b5(0x374)+config[_0x5532b5(0x1bb)]+_0x5532b5(0x28c);else _0x26cf7f='<b>Bot\x20'+botID+_0x5532b5(0x28c);const _0x1e79fc=config['basecoin'],_0x301ca7=config[_0x5532b5(0x357)],_0x56e7ea=getKPIs(_0x5532b5(0x377)),_0x1b4b9c=getKPIs('fiat',_0x301ca7),_0x4b86d4=getKPIs('net-basecoin'),_0x412914=getKPIs(_0x5532b5(0x2aa),_0x301ca7),_0x5835de=getKPIs(_0x5532b5(0x1b7)),_0x2a8145=getKPIs(_0x5532b5(0x1b1),_0x301ca7);_0x1e79fc[_0x5532b5(0x1f1)](_0x301ca7)?(_0x26cf7f+=_0x5532b5(0x349),_0x26cf7f+='Value\x20'+_0x1e79fc+':\x20'+_0x56e7ea['value']+'\x20('+_0x56e7ea[_0x5532b5(0x2dd)]+_0x5532b5(0x2ae),_0x26cf7f+=_0x5532b5(0x22b)+_0x1e79fc+':\x20'+_0x4b86d4['value']+'\x20('+_0x4b86d4[_0x5532b5(0x2dd)]+'%)\x0a',_0x26cf7f+=_0x5532b5(0x2c3)+_0x1e79fc+':\x20'+_0x5835de[_0x5532b5(0x2c9)]+'\x20('+_0x5835de['change']+_0x5532b5(0x2ae),_0x26cf7f+=_0x5532b5(0x238)):(_0x26cf7f+='<pre>',_0x26cf7f+=_0x5532b5(0x32e)+_0x1e79fc+':\x20'+_0x56e7ea['value']+'\x20('+_0x56e7ea[_0x5532b5(0x2dd)]+_0x5532b5(0x2ae),_0x26cf7f+='Value\x20'+_0x301ca7+':\x20'+_0x1b4b9c[_0x5532b5(0x2c9)]+'\x20('+_0x1b4b9c[_0x5532b5(0x2dd)]+'%)\x0a',_0x26cf7f+=_0x5532b5(0x22b)+_0x1e79fc+':\x20'+_0x4b86d4[_0x5532b5(0x2c9)]+'\x20('+_0x4b86d4[_0x5532b5(0x2dd)]+_0x5532b5(0x2ae),_0x26cf7f+=_0x5532b5(0x22b)+_0x301ca7+':\x20'+_0x412914[_0x5532b5(0x2c9)]+'\x20('+_0x412914[_0x5532b5(0x2dd)]+_0x5532b5(0x2ae),_0x26cf7f+='PnL\x20'+_0x1e79fc+':\x20'+_0x5835de[_0x5532b5(0x2c9)]+'\x20('+_0x5835de['change']+'%)\x0a',_0x26cf7f+='PnL\x20'+_0x301ca7+':\x20'+_0x2a8145[_0x5532b5(0x2c9)]+'\x20('+_0x2a8145['change']+_0x5532b5(0x2ae),_0x26cf7f+=_0x5532b5(0x238)),process[_0x5532b5(0x1e3)]({'telegrammsg':_0x26cf7f},_0x577678=>{});}async function sendPortfolioTelegram(){const _0x294432=_0x34d5f7;if(!coinsLoaded||!currentCoins[0x0][_0x294432(0x350)]){process[_0x294432(0x1e3)]({'telegrammsg':_0x294432(0x35b)},_0x4687f7=>{});return;}let _0x213d9c='';if(config[_0x294432(0x33d)])_0x213d9c=_0x294432(0x374)+config[_0x294432(0x1bb)]+_0x294432(0x29a);else _0x213d9c='<b>Bot\x20'+botID+'\x20portfolio:</b>\x20\x0a\x0a';_0x213d9c+='<pre>',_0x213d9c+=_0x294432(0x216),_0x213d9c+='Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a',_0x213d9c+=_0x294432(0x216),currentCoins['forEach'](_0x52b4f7=>{const _0x435662=_0x294432;_0x213d9c+=_0x52b4f7[_0x435662(0x201)][_0x435662(0x223)](0x7)+'|\x20'+formatPad(_0x52b4f7[_0x435662(0x350)],0x2,0x6)+'|\x20'+formatPad(_0x52b4f7[_0x435662(0x268)],0x2,0x6)+'|\x20'+formatPad(_0x52b4f7['delta']*0x64,0x2,0x6)+'\x0a';}),_0x213d9c+=_0x294432(0x238),process[_0x294432(0x1e3)]({'telegrammsg':_0x213d9c},_0xb1ebc2=>{});}function formatPad(_0x322666,_0x8dd0c8,_0x5ece16){const _0x19977a=_0x34d5f7,_0x3c0ac4=formatResultString(_0x322666,_0x8dd0c8);return _0x3c0ac4?_0x3c0ac4[_0x19977a(0x2f9)](_0x5ece16):''[_0x19977a(0x2f9)](_0x5ece16);}function logHistory(_0x569e0d,_0xd099a,_0x517191=''){const _0x1af0a6=_0x34d5f7;logger[_0x1af0a6(0x23f)](''+_0xd099a);let _0xc41bf5={'time':getTimeStamp(),'type':_0x569e0d,'event':_0xd099a};dbLogs[_0x1af0a6(0x35a)]('logs')['push'](_0xc41bf5)[_0x1af0a6(0x25f)]();if(_0x517191=='')_0x517191=_0xd099a;proxyEmit(_0x1af0a6(0x340),{'log':_0xc41bf5,'summary':_0x517191}),process[_0x1af0a6(0x1e3)]({'telegram':{..._0xc41bf5,'botname':config[_0x1af0a6(0x1bb)],'showname':config[_0x1af0a6(0x33d)]}},_0x347484=>{});}function emitHistory(_0x59b7d9={}){const _0x2888c2=_0x34d5f7;Object['keys'](_0x59b7d9)[_0x2888c2(0x282)]==0x0&&(_0x59b7d9={'type':['order',_0x2888c2(0x340)],'event':'','page':0x1});if(_0x59b7d9[_0x2888c2(0x2f8)][_0x2888c2(0x1f1)](_0x2888c2(0x340)))_0x59b7d9[_0x2888c2(0x2f8)][_0x2888c2(0x1c2)](_0x59b7d9[_0x2888c2(0x2f8)]['indexOf'](_0x2888c2(0x340)),0x1,_0x2888c2(0x360),_0x2888c2(0x378),'success');if(dbLogs[_0x2888c2(0x287)](_0x2888c2(0x361))[_0x2888c2(0x2c9)]()){let _0x3c9b0d=dbLogs[_0x2888c2(0x35a)]('logs')['filter'](_0x46c08f=>{const _0x4f37e6=_0x2888c2;if(_0x59b7d9['type'][_0x4f37e6(0x282)]==0x0)return![];else return _0x59b7d9[_0x4f37e6(0x2f8)][_0x4f37e6(0x1f1)](_0x46c08f[_0x4f37e6(0x2f8)]);})['filter'](_0x4d836b=>{const _0x1e0ee1=_0x2888c2;if(_0x59b7d9[_0x1e0ee1(0x340)]=='')return!![];else return _0x4d836b[_0x1e0ee1(0x340)][_0x1e0ee1(0x24a)]()['includes'](_0x59b7d9[_0x1e0ee1(0x340)]['toLowerCase']());})['sortBy'](_0x2888c2(0x1cd)),_0x4377ba=_0x3c9b0d[_0x2888c2(0x2c9)]()['length'];_0x3c9b0d=_0x3c9b0d['reverse']()[_0x2888c2(0x2ac)]((_0x59b7d9[_0x2888c2(0x2f1)]-0x1)*logPageSize,_0x59b7d9['page']*logPageSize-0x1)[_0x2888c2(0x24f)]()[_0x2888c2(0x2c9)](),proxyEmit(_0x2888c2(0x332),{'logs':_0x3c9b0d,'total':_0x4377ba});}else proxyEmit(_0x2888c2(0x332),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x3b9718){const _0x487e08=_0x34d5f7;if(dbLogs[_0x487e08(0x287)]('logs')['value']()){const _0x215e26=dbLogs[_0x487e08(0x35a)](_0x487e08(0x361))[_0x487e08(0x1da)](_0x487e08(0x1cd))['filter'](_0x4a09ea=>{const _0xe4d374=_0x487e08;return _0x4a09ea[_0xe4d374(0x2f8)]=='order';})[_0x487e08(0x2c9)]();dbLogs['get'](_0x487e08(0x361))[_0x487e08(0x31c)]()['write'](),dbLogs[_0x487e08(0x35a)](_0x487e08(0x361))[_0x487e08(0x210)](_0x215e26)[_0x487e08(0x25f)](),emitHistory(_0x3b9718);}}async function pauseBot(_0x2950fd=pauseBotIntervalShort,_0x7c9c8a,_0x44f8bc,_0x47afd5=![]){const _0x3116c2=_0x34d5f7,_0x5bf5e4=new Date()['getTime']();if(!lastErrorShown||_0x5bf5e4-lastErrorShown>=_0x2950fd){lastErrorShown=_0x5bf5e4;if(!lastBotPause)lastBotPause=_0x5bf5e4,consecutivePauses=0x1;else{if(_0x5bf5e4-lastBotPause-_0x2950fd<0x5a*0x3e8){consecutivePauses++;if(consecutivePauses>maxPauseRetries){if(_0x47afd5){logHistory(_0x3116c2(0x360),_0x7c9c8a+_0x3116c2(0x1f7)),await killBot();return;}else logHistory(_0x3116c2(0x360),_0x7c9c8a+pauseBotMsg),_0x2950fd=pauseBotInterval;}}else consecutivePauses=0x1;lastBotPause=_0x5bf5e4;}_0x44f8bc?logger[_0x3116c2(0x1f0)]('('+consecutivePauses+')\x20'+_0x7c9c8a+_0x3116c2(0x1b9),_0x44f8bc):logger['debug']('('+consecutivePauses+')\x20'+_0x7c9c8a);if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);await sleep(_0x2950fd),botPaused=![],_0x2950fd==pauseBotIntervalShort?resumeBot(!![]):resumeBot(![]);}}}async function killBot(){const _0x2e4cc2=_0x34d5f7;botPaused=!![],await sleep(0x3e8),process[_0x2e4cc2(0x1e3)]({'stop':_0x2e4cc2(0x1cb)},_0x582340=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x220d5a,_0x39bf1c,_0xaf918a=![]){const _0x5dde81=_0x34d5f7;if(botPaused)return;let _0x194745;const _0x3fa5da=config[_0x5dde81(0x304)]||'Exchange';if(_0x39bf1c)logger[_0x5dde81(0x1f0)](_0x5dde81(0x288)+_0x39bf1c);const _0xd7eb89=()=>{const _0x357515=_0x5dde81;loading[_0x357515(0x360)]=_0x357515(0x295),emitLoadingProgress();};if(_0x220d5a[_0x5dde81(0x1b4)]()['includes'](_0x5dde81(0x2ec)))logHistory('error',_0x3fa5da+_0x5dde81(0x2d9)),_0xd7eb89();else{if(_0x220d5a[_0x5dde81(0x1b4)]()['includes'](_0x5dde81(0x1ea)))logHistory('error',_0x3fa5da+_0x5dde81(0x2d0)),_0xd7eb89();else{if(_0x220d5a['toString']()[_0x5dde81(0x1f1)](_0x5dde81(0x246)))config[_0x5dde81(0x2e5)]?_0x194745=_0x3fa5da+_0x5dde81(0x23b):_0x194745=_0x3fa5da+_0x5dde81(0x296),logHistory(_0x5dde81(0x360),_0x194745+_0x5dde81(0x305)),_0xd7eb89();else{if(_0x220d5a[_0x5dde81(0x1b4)]()[_0x5dde81(0x1f1)](_0x5dde81(0x34f)))logHistory(_0x5dde81(0x360),_0x3fa5da+_0x5dde81(0x1bf)),_0xd7eb89();else{if(!_0xaf918a)await handleError(_0x220d5a,null);}}}}}async function handleError(_0x2085d6,_0x4f5d1c,_0x4a87d2=''){const _0x2b4629=_0x34d5f7;if(botPaused)return;let _0x36f512;const _0xee28b=config['exchange']||_0x2b4629(0x249);if(_0x4f5d1c)logger[_0x2b4629(0x1f0)](_0x2b4629(0x288)+_0x4f5d1c);if(_0x2085d6[_0x2b4629(0x1b4)]()[_0x2b4629(0x1f1)](_0x2b4629(0x314)))_0x36f512=_0xee28b+'\x20blocked\x20API\x20(DDoSProtection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading',await pauseBot(undefined,_0x36f512,_0x2085d6);else{if(_0x2085d6[_0x2b4629(0x1b4)]()[_0x2b4629(0x1f1)](_0x2b4629(0x27f)))_0x36f512=_0xee28b+_0x2b4629(0x29e),await pauseBot(undefined,_0x36f512,_0x2085d6);else{if(_0x2085d6[_0x2b4629(0x1b4)]()[_0x2b4629(0x1f1)](_0x2b4629(0x2b8))||_0x2085d6[_0x2b4629(0x1b4)]()[_0x2b4629(0x1f1)]('OnMaintenance'))_0x36f512=_0xee28b+_0x2b4629(0x202),await pauseBot(undefined,_0x36f512,_0x2085d6[_0x2b4629(0x1b4)]());else{if(_0x2085d6[_0x2b4629(0x1b4)]()[_0x2b4629(0x1f1)](_0x2b4629(0x338)))_0x36f512=_0xee28b+_0x2b4629(0x2ab),await pauseBot(undefined,_0x36f512,_0x2085d6['toString']());else{if(_0x2085d6[_0x2b4629(0x1b4)]()[_0x2b4629(0x1f1)](_0x2b4629(0x34d)))_0x36f512=_0xee28b+'\x20closed\x20the\x20connection\x20(see:\x20hodlerhacks.com/fix/5)',await pauseBot(undefined,_0x36f512,_0x2085d6['toString']());else{if(_0x2085d6['toString']()['toLowerCase']()['includes'](_0x2b4629(0x2d8))||_0x2085d6[_0x2b4629(0x1b4)]()[_0x2b4629(0x24a)]()[_0x2b4629(0x1f1)]('request-time'))_0x36f512='Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)',await pauseBot(undefined,_0x36f512,_0x2085d6['toString']());else{if(_0x2085d6['toString']()[_0x2b4629(0x1f1)](_0x2b4629(0x262)))_0x36f512=_0xee28b+_0x2b4629(0x205),await pauseBot(undefined,_0x36f512,_0x2085d6['toString']());else{if(_0x2085d6 instanceof ccxt['NetworkError'])_0x36f512=_0xee28b+_0x2b4629(0x30f)+_0x2085d6[_0x2b4629(0x1b4)](),logger[_0x2b4629(0x1f0)](_0x2b4629(0x1fc),_0x2085d6),await pauseBot(undefined,_0x36f512,_0x2085d6);else{if(_0x2085d6['toString']()[_0x2b4629(0x1f1)](_0x2b4629(0x2ec)))logHistory(_0x2b4629(0x360),_0xee28b+'\x20API\x20key\x20is\x20invalid'),logHistory(_0x2b4629(0x360),_0x2b4629(0x2c2)),await killBot();else{if(_0x2085d6[_0x2b4629(0x1b4)]()[_0x2b4629(0x1f1)](_0x2b4629(0x1ea)))logHistory(_0x2b4629(0x360),_0xee28b+'\x20API\x20secret\x20is\x20invalid'),logHistory('error','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)'),await killBot();else{if(_0x2085d6['toString']()[_0x2b4629(0x1f1)](_0x2b4629(0x246))&&_0x2085d6[_0x2b4629(0x1b4)]()[_0x2b4629(0x1f1)]('token\x20is\x20expired'))_0x36f512=_0xee28b+'\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)',await pauseBot(undefined,_0x36f512,_0x2085d6,!![]);else{if(_0x2085d6[_0x2b4629(0x1b4)]()[_0x2b4629(0x1f1)](_0x2b4629(0x246)))config[_0x2b4629(0x2e5)]?_0x36f512=_0xee28b+_0x2b4629(0x23b):_0x36f512=_0xee28b+_0x2b4629(0x296),logHistory(_0x2b4629(0x360),_0x36f512),logHistory(_0x2b4629(0x360),_0x2b4629(0x2c2)),await killBot();else{if(_0x2085d6[_0x2b4629(0x1b4)]()[_0x2b4629(0x1f1)](_0x2b4629(0x34f)))logHistory('error',_0xee28b+'\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange'),logHistory(_0x2b4629(0x360),_0x2b4629(0x2c2)),await killBot();else{if(_0x2085d6[_0x2b4629(0x1b4)]()[_0x2b4629(0x1f1)](_0x2b4629(0x1c1)))logHistory(_0x2b4629(0x360),_0x2b4629(0x2e0)+_0x4a87d2),logger[_0x2b4629(0x1f0)](_0x2b4629(0x336),_0x2085d6);else{if(_0x2085d6 instanceof ccxt[_0x2b4629(0x29c)]){_0x36f512=_0xee28b+_0x2b4629(0x2f7)+_0x2085d6[_0x2b4629(0x1b4)]();if(_0x4a87d2)_0x36f512+=_0x2b4629(0x264)+_0x4a87d2;await pauseBot(undefined,_0x36f512,_0x2085d6);}else{_0x36f512=_0x2b4629(0x34e)+_0x2085d6[_0x2b4629(0x1b4)]();if(_0x4a87d2)_0x36f512+=_0x2b4629(0x264)+_0x4a87d2;await pauseBot(undefined,_0x36f512);}}}}}}}}}}}}}}}}function decryptRSA(_0x32838b,_0x2750a8){const _0x1165e8=_0x34d5f7,_0x3ea25c=forge['pki'][_0x1165e8(0x32d)](_0x32838b),_0x45fd0f=_0x3ea25c[_0x1165e8(0x34c)](forge[_0x1165e8(0x239)][_0x1165e8(0x260)](_0x2750a8),_0x1165e8(0x1e9),{'md':forge['md']['sha256'][_0x1165e8(0x362)](),'mgf1':{'md':forge['md'][_0x1165e8(0x1ed)][_0x1165e8(0x362)]()}});return _0x45fd0f;}async function withRetry(_0x1df8aa,_0x4c7518){const _0x3f5bb3=_0x34d5f7;let _0x5bf952=![],_0x5b5ba2=0x0,_0x3ec170,_0x594984;while(_0x5b5ba2<maxRetries){try{_0x3ec170=await _0x4c7518();break;}catch(_0x1b1a4e){_0x594984=_0x1b1a4e,!_0x5bf952?(_0x5bf952=!![],logger[_0x3f5bb3(0x1f0)](_0x3f5bb3(0x281)+_0x1df8aa+':',_0x1b1a4e[_0x3f5bb3(0x1b4)]())):await sleep(retryInterval);}_0x5b5ba2++;}if(_0x5b5ba2==0x0)return _0x3ec170;if(_0x5b5ba2>=maxRetries)throw _0x594984;else return logger[_0x3f5bb3(0x1f0)](_0x3f5bb3(0x1dd)+_0x5b5ba2+_0x3f5bb3(0x2e3)),_0x3ec170;}function formatResult(_0x2806cf,_0x495842){const _0x213fc5=_0x34d5f7;return parseFloat(_0x2806cf[_0x213fc5(0x366)](_0x495842));}function formatResultTruncate(_0x2303b3,_0xcb5db1){const _0xd3a783=_0x34d5f7;let _0x4b210b=formatResultString(_0x2303b3,0xa),_0x21ac5d=_0x4b210b[_0xd3a783(0x2bf)]('.');return _0x21ac5d!=-0x1&&(_0x4b210b=_0x4b210b[_0xd3a783(0x2ac)](0x0,_0x21ac5d+_0xcb5db1+0x1)),Number(_0x4b210b);}function formatResultString(_0x50139a,_0x33beaa){const _0x573b4e=_0x34d5f7;let _0x5828e5;if(!(''+_0x50139a)[_0x573b4e(0x1f1)]('e'))_0x5828e5=+(Math[_0x573b4e(0x346)](_0x50139a+'e+'+_0x33beaa)+'e-'+_0x33beaa);else{let _0x44f330=(''+_0x50139a)['split']('e'),_0x2af319='';+_0x44f330[0x1]+_0x33beaa>0x0&&(_0x2af319='+'),_0x5828e5=+(Math['round'](+_0x44f330[0x0]+'e'+_0x2af319+(+_0x44f330[0x1]+_0x33beaa))+'e-'+_0x33beaa);}return Number(_0x5828e5)['toFixed'](_0x33beaa);}function getServerTime(){const _0x575fa6=_0x34d5f7,_0x4e30b6=new Date();return _0x4e30b6[_0x575fa6(0x1d7)]()+'/'+(_0x4e30b6[_0x575fa6(0x2c0)]()+0x1)[_0x575fa6(0x1b4)]()['padStart'](0x2,'0')+'/'+_0x4e30b6['getDate']()[_0x575fa6(0x1b4)]()['padStart'](0x2,'0')+'\x20'+_0x4e30b6[_0x575fa6(0x2ee)]()['toString']()[_0x575fa6(0x2f9)](0x2,'0')+':'+_0x4e30b6[_0x575fa6(0x21f)]()[_0x575fa6(0x1b4)]()[_0x575fa6(0x2f9)](0x2,'0')+':'+_0x4e30b6[_0x575fa6(0x23e)]()[_0x575fa6(0x1b4)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x3f5056=_0x34d5f7,_0x56431c=shiftedTime();return _0x56431c[_0x3f5056(0x1d7)]()+'/'+(_0x56431c[_0x3f5056(0x2c0)]()+0x1)[_0x3f5056(0x1b4)]()['padStart'](0x2,'0')+'/'+_0x56431c[_0x3f5056(0x213)]()[_0x3f5056(0x1b4)]()[_0x3f5056(0x2f9)](0x2,'0')+'\x20'+_0x56431c[_0x3f5056(0x2ee)]()[_0x3f5056(0x1b4)]()[_0x3f5056(0x2f9)](0x2,'0')+':'+_0x56431c[_0x3f5056(0x21f)]()[_0x3f5056(0x1b4)]()[_0x3f5056(0x2f9)](0x2,'0')+':'+_0x56431c['getSeconds']()[_0x3f5056(0x1b4)]()[_0x3f5056(0x2f9)](0x2,'0');}function getDate(){const _0x349891=_0x34d5f7,_0x457f21=shiftedTime();return _0x457f21[_0x349891(0x1d7)]()+'/'+(_0x457f21[_0x349891(0x2c0)]()+0x1)[_0x349891(0x1b4)]()['padStart'](0x2,'0')+'/'+_0x457f21['getDate']()[_0x349891(0x1b4)]()[_0x349891(0x2f9)](0x2,'0');}function _0x1f5c(_0x8ebb31,_0x4d1c90){const _0x1887fb=_0x51ed();return _0x1f5c=function(_0x15e74e,_0xf6ff10){_0x15e74e=_0x15e74e-0x1a9;let _0x51ed37=_0x1887fb[_0x15e74e];return _0x51ed37;},_0x1f5c(_0x8ebb31,_0x4d1c90);}function getHour(){const _0x1351e6=_0x34d5f7,_0x2f060e=shiftedTime();return _0x2f060e['getHours']()['toString']()[_0x1351e6(0x2f9)](0x2,'0');}function sleep(_0x2fcdda){return new Promise(_0x58169e=>setTimeout(_0x58169e,_0x2fcdda));}function shiftedTime(){const _0x1eb7e1=_0x34d5f7,_0x1ee225=new Date();let _0x17583=_0x1ee225;if(config&&config[_0x1eb7e1(0x234)]!==0x0)_0x17583=fns[_0x1eb7e1(0x25d)](_0x1ee225,{'hours':config[_0x1eb7e1(0x234)]});return _0x17583;}function timer(_0x3256fe){const _0x9d60ff=_0x34d5f7,_0x451197=new Date();!lasttime?console[_0x9d60ff(0x2d2)](getTimeStamp()+_0x9d60ff(0x36f),_0x3256fe,_0x451197):console[_0x9d60ff(0x2d2)](getTimeStamp()+_0x9d60ff(0x36f),_0x3256fe,(_0x451197-lasttime)/0x3e8),lasttime=_0x451197;}