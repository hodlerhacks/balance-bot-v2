const _0x224dcd=_0x3bf2;(function(_0x5f3157,_0x298c80){const _0x21b7a0=_0x3bf2,_0x180ecd=_0x5f3157();while(!![]){try{const _0x42f14d=-parseInt(_0x21b7a0(0x20e))/0x1*(-parseInt(_0x21b7a0(0x2bc))/0x2)+-parseInt(_0x21b7a0(0x278))/0x3*(-parseInt(_0x21b7a0(0x2ac))/0x4)+-parseInt(_0x21b7a0(0x302))/0x5*(-parseInt(_0x21b7a0(0x2d3))/0x6)+parseInt(_0x21b7a0(0x230))/0x7+parseInt(_0x21b7a0(0x367))/0x8+parseInt(_0x21b7a0(0x36d))/0x9+-parseInt(_0x21b7a0(0x232))/0xa;if(_0x42f14d===_0x298c80)break;else _0x180ecd['push'](_0x180ecd['shift']());}catch(_0x5756bc){_0x180ecd['push'](_0x180ecd['shift']());}}}(_0x5356,0x81079));const _0x9ceb84=function(){let _0x1d7733=!![];return function(_0x4a7a06,_0x25ef01){const _0x1ebb2a=_0x1d7733?function(){const _0x4658ca=_0x3bf2;if(_0x25ef01){const _0xc21d8e=_0x25ef01[_0x4658ca(0x1b0)](_0x4a7a06,arguments);return _0x25ef01=null,_0xc21d8e;}}:function(){};return _0x1d7733=![],_0x1ebb2a;};}(),_0x488059=_0x9ceb84(this,function(){const _0xae90e3=_0x3bf2;return _0x488059[_0xae90e3(0x356)]()['search'](_0xae90e3(0x29f))[_0xae90e3(0x356)]()[_0xae90e3(0x218)](_0x488059)[_0xae90e3(0x28c)](_0xae90e3(0x29f));});_0x488059();'use strict';const ccxt=require('ccxt'),low=require(_0x224dcd(0x26a)),FileSync=require(_0x224dcd(0x213)),fs=require('fs'),fns=require(_0x224dcd(0x28a)),forge=require(_0x224dcd(0x1b8)),util=require('util'),argv=require(_0x224dcd(0x35a))(process['argv'][_0x224dcd(0x2fe)](0x2))[_0x224dcd(0x1e8)],path=require('path'),axios=require(_0x224dcd(0x1ed));let exchange,gTicker={},gChange={};const usdBasecoins=[_0x224dcd(0x268),'BUSD',_0x224dcd(0x30e),_0x224dcd(0x2f6),_0x224dcd(0x273),_0x224dcd(0x30f)],excludedExchanges=[_0x224dcd(0x254)],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object['freeze']({'LOCKED':0x0,'UNLOCKING':0x1,'UNLOCKED':0x2});let lockOrders=ORDERS[_0x224dcd(0x37b)],validateOrdersState,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotIntervalShort=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg='\x20>\x20pausing\x20bot\x20for\x20'+pauseBotInterval/0xea60+'\x20minutes',maxPauseRetries=0x6,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,watchTransactionsInterval=0x3c*0x3e8,schedulerInterval=0x3c*0x3c*0x3e8,retryInterval=0x3e8,maxRetries=0x5,logPageSize=0x14,defaultFee=0.003;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidOrdersInitialTimeout,pidOrdersTimeout,botPaused=![],transactionDetectionOngoing=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x5dc,balanceUpdateRetries=0x5;let enableFiatToggle;const serverversion=require(_0x224dcd(0x2c9))[_0x224dcd(0x25d)],environment=require('./version.json')[_0x224dcd(0x2e2)]||_0x224dcd(0x2ad),botID=process[_0x224dcd(0x1e8)][0x2]||'001',pattern=/^[0-9]{3}$/;!pattern[_0x224dcd(0x347)](botID)&&(console[_0x224dcd(0x22a)](_0x224dcd(0x2ba)+botID+',\x20must\x20be\x20a\x203\x20digit\x20number'),killBot());const userID=process[_0x224dcd(0x1e8)][0x3]||'',configpath=userID?_0x224dcd(0x217)+userID+'/':'./config/',logspath=userID?'./logs/'+userID+'/':_0x224dcd(0x1b7),loggerfile=fs['createWriteStream'](logspath+'/output-000.log',{'flags':'a'});!fs['existsSync'](configpath)&&fs[_0x224dcd(0x201)](configpath);!fs['existsSync'](logspath)&&fs[_0x224dcd(0x201)](logspath);const configfile=configpath+_0x224dcd(0x207)+botID+_0x224dcd(0x36b),logfile=configpath+_0x224dcd(0x207)+botID+_0x224dcd(0x2f5),performancefile=configpath+_0x224dcd(0x207)+botID+'-performance.json',coinresultsfile=configpath+_0x224dcd(0x207)+botID+_0x224dcd(0x284),settingsfile=configpath+_0x224dcd(0x2a4),securefile=configpath+_0x224dcd(0x24b),configbackuppath=configpath+_0x224dcd(0x31f),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x224dcd(0x317)]({'logs':[],'version':serverversion})[_0x224dcd(0x378)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x224dcd(0x317)]({'data':[],'version':serverversion})[_0x224dcd(0x378)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x224dcd(0x317)]({'bot':[],'version':serverversion})[_0x224dcd(0x378)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x224dcd(0x317)]({'coins':[],'version':serverversion})[_0x224dcd(0x378)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0,settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x462485=>{const _0xefa695=_0x224dcd;console[_0xefa695(0x22a)](_0x462485);},'simple':_0x8e6da6=>{const _0x13114c=_0x224dcd;console[_0x13114c(0x22a)](_0x8e6da6),loggerfile[_0x13114c(0x378)](util[_0x13114c(0x327)](_0x8e6da6)+'\x0a');},'full':async(_0x1e25bd,_0x70158='')=>{const _0x489499=_0x224dcd;let _0x16c91a;if(config[_0x489499(0x1c6)])_0x16c91a=getTimeStamp()+':\x20'+config[_0x489499(0x373)]+_0x489499(0x1c9)+_0x1e25bd;else _0x16c91a=getTimeStamp()+_0x489499(0x1bf)+botID+_0x489499(0x1c9)+_0x1e25bd;console[_0x489499(0x22a)](_0x16c91a),loggerfile[_0x489499(0x378)](util[_0x489499(0x327)](_0x16c91a)+'\x0a'),_0x70158&&(console[_0x489499(0x22a)](_0x70158),loggerfile['write'](util[_0x489499(0x327)](_0x70158)+'\x0a'));},'debug':async(_0x5ba860,_0x431a9d='')=>{const _0x480219=_0x224dcd;let _0x466f7b;if(config[_0x480219(0x1c6)])_0x466f7b=getTimeStamp()+':\x20'+config[_0x480219(0x373)]+_0x480219(0x275)+_0x5ba860;else _0x466f7b=getTimeStamp()+':\x20Bot\x20'+botID+'\x20>\x20[DEBUG]\x20'+_0x5ba860;if(debugging)console['log'](_0x466f7b);loggerfile[_0x480219(0x378)](util['format'](_0x466f7b)+'\x0a');if(_0x431a9d){if(debugging)console[_0x480219(0x22a)](_0x431a9d);loggerfile[_0x480219(0x378)](util[_0x480219(0x327)](_0x431a9d)+'\x0a');}}};process['on'](_0x224dcd(0x30c),function(_0x2d3d69){const _0x5e1a2d=_0x224dcd;handleError(_0x2d3d69,_0x5e1a2d(0x30c));});settings['timeshift']!=config[_0x224dcd(0x20a)]&&updateTimeshift(settings[_0x224dcd(0x20a)]);settings[_0x224dcd(0x209)]!=config[_0x224dcd(0x209)]&&updateOnepagemode(settings[_0x224dcd(0x209)]);(settings['marketcapApi']&&!config[_0x224dcd(0x324)]||!settings[_0x224dcd(0x324)]&&config['marketcapApi'])&&updateMarketcapApi(settings[_0x224dcd(0x324)]);process[_0x224dcd(0x1fc)]({'started':_0x224dcd(0x1f5)},_0x4b7dfe=>{}),initializeProcessListeners();function proxyEmit(_0x2f6155,_0x1f23cf=null){const _0x3fd799=_0x224dcd;process[_0x3fd799(0x1fc)]({'function':_0x2f6155,'args':_0x1f23cf},_0x1e21ca=>{});}function initializeProcessListeners(){const _0x355127=_0x224dcd;process['on'](_0x355127(0x21b),_0x42507a=>{const _0x14bf9e=_0x355127;switch(Object[_0x14bf9e(0x228)](_0x42507a)[0x0]){case _0x14bf9e(0x20a):_0x42507a[_0x14bf9e(0x20a)]!=undefined&&(settings['timeshift']=_0x42507a['timeshift'],updateTimeshift(settings[_0x14bf9e(0x20a)]));break;case'onepagemode':_0x42507a[_0x14bf9e(0x209)]!=undefined&&(settings[_0x14bf9e(0x209)]=_0x42507a[_0x14bf9e(0x209)],updateOnepagemode(settings['onepagemode']));break;case _0x14bf9e(0x324):_0x42507a[_0x14bf9e(0x324)]!=undefined&&(settings[_0x14bf9e(0x324)]=_0x42507a[_0x14bf9e(0x324)],updateMarketcapApi(settings[_0x14bf9e(0x324)]));break;case _0x14bf9e(0x330):_0x42507a[_0x14bf9e(0x330)]!=undefined&&(bots=JSON[_0x14bf9e(0x1ca)](_0x42507a[_0x14bf9e(0x330)]),proxyEmit(_0x14bf9e(0x330),bots));break;case'function':switch(_0x42507a[_0x14bf9e(0x33f)]){case _0x14bf9e(0x1ef):initclient();break;case _0x14bf9e(0x36f):toggleBotMode();break;case _0x14bf9e(0x2a2):emitHistory(_0x42507a[_0x14bf9e(0x2d2)]);break;case _0x14bf9e(0x205):deleteHistoryAlerts(_0x42507a[_0x14bf9e(0x2d2)]);break;case _0x14bf9e(0x305):getPortfolio(_0x42507a[_0x14bf9e(0x2d2)]);break;case _0x14bf9e(0x22f):storeConfiguration(_0x42507a['args']);break;case _0x14bf9e(0x2b1):storeHeadless(_0x42507a['args']);break;case'storeFiat':storeFiat(_0x42507a[_0x14bf9e(0x2d2)]);break;case _0x14bf9e(0x2b8):resetHistory();break;case _0x14bf9e(0x35b):getStartingBalances(getNormalizedPerformance());break;case'placeOrder':placeOrder(_0x42507a[_0x14bf9e(0x2d2)]);break;case'cancelLoading':cancelLoading();break;case _0x14bf9e(0x350):showConfig();break;case _0x14bf9e(0x319):sendMetricsTelegram();break;case'sendPortfolioTelegram':sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x3fbc88=![]){const _0x48ff62=_0x224dcd;logger['debug'](_0x48ff62(0x1bd)+(_0x3fbc88?_0x48ff62(0x2ec):_0x48ff62(0x274))+_0x48ff62(0x2d1)+config[_0x48ff62(0x27b)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x3fbc88)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x48ff62(0x24c)]!=''&&config[_0x48ff62(0x24c)]!='***'){loadingProgress=0x0;_0x3fbc88&&(await initExchange(),await loadSymbols(),loadingProgress=0x1,setStableCoins(),proxyEmit('configuration',emittedConfiguration()),initialPerformanceStored=![]);const _0x211984=await getCoins();[currentCoins,currentCoinsAll]=_0x211984,setBlockTransactionDetection(![]),startScheduler(),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger['debug']('Loading\x20completed'),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x48ff62(0x260)]==0x0&&allOpenOrders[_0x48ff62(0x260)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}function _0x5356(){const _0x512abf=['portfolio1','breakeven','getPortfolio','min','highest','2.6.23','restart','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','\x20uses\x20','uncaughtException','\x20change','TUSD','USDP','floor','toLowerCase','Loading\x20completed','memoryUsage','Resetting\x20bot\x20history','/USDT','logs','defaults','PermissionDenied','sendMetricsTelegram','watchOrders()','bot','Error\x20details:','last','order','/backup/','splice','EUR','sell','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','marketcapApi','Waited\x20','get','format','data','fetchTickers','RateLimitExceeded','abs','Saving\x20configuration','create','watchTradesForSymbols','watchTradesForSymbols()','bots','\x20API\x20key,\x20secret\x20or\x20password\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','liquidity','recreateCoinResults()','existsSync','\x20minutes','datetime','initTickers()','complete','portfolio','DDoSProtection','Initializing\x20exchange:\x20already\x20done','1\x20-\x20partially\x20FILLED\x20(','openOrders','Bitget','function','slider','realized','loadSymbols()','OnMaintenance','Failed\x20to\x20load\x20coin\x20data\x20for\x20','\x20not\x20available\x20(see:\x20hodlerhacks.com/fix/5)','basecoin','test','\x20not\x20responding\x20(see:\x20hodlerhacks.com/fix/5)','startsWith','market','sha256','Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute','\x20portfolio:</b>\x20\x0a\x0a','\x20rejected\x20your\x20API\x20request\x20(see:\x20hodlerhacks.com/fix/4)','\x20API\x20key\x20is\x20invalid','showConfig','limit-low','Error\x20in\x20loadSymbols():\x20','Bybit','staging','2.5.0','toString','Invalid\x20API\x20details,\x20please\x20try\x20again\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','token\x20is\x20expired','\x20>\x20details:','yargs/yargs','getStartingBalances','fetchTicker','Net\x20effect','getFullYear','cancelOrder','LOCKED','recent20','\x20closed\x20the\x20connection\x20(see:\x20hodlerhacks.com/fix/5)','ask','Error\x20in\x20testAPI():\x20','Unfilled\x20order(s)\x20canceled\x20after\x20','1\x20-\x20FILLED\x20known\x20order:\x20','2152120XVLDOT','BNB','Limit\x20(low-margin)','max','-config.json','\x20API\x20secret\x20is\x20invalid','7444962ypEcrl','getTime','toggleBotMode','detectLiquidityChange()','delta','set','botname','2\x20-\x20handling\x20FILLED\x20order:\x20','Error\x20while\x20deleting\x20files:\x20','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','InsufficientFunds','write','changes','.json','UNLOCKED','netoffset','2.6.0','average','\x20|\x20lock\x20orders:\x20','Executed\x20','event','error','/USD','fetchOpenOrders','sells','1\x20-\x20Handle\x20open\x20orders','apply','No\x20more\x20open\x20orders\x20-\x20','stringify','Avoiding\x20continuous\x20order\x20attempts','limits','marketcapsqrt','\x20network\x20error:\x20','./logs/','node-forge','no\x20open\x20orders','full','password','Initializing\x20exchange','Reset\x20|\x20','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)',':\x20Bot\x20','side','exchanges','Unknown\x20error:\x20','Huobipro','decrypt','open','showname','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','loadMarkets','\x20>\x20','parse','Fee\x20discount\x20refund\x20detected:\x20','join','UNLOCKING','limit','map','remainingSymbols','date','has','debug','\x20-\x20bot\x20already\x20running\x20in\x20manual\x20mode','sortBy','includes','settings','leftTxt','orderId','privateKey','padEnd','emojibuy','InvalidNonce','limit-high','Exchange\x20permission\x20denied\x20-\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','closed','util','decode64','Order(s)\x20not\x20validated\x20after\x20','filled','Insufficient\x20funds\x20to\x20execute\x20order:\x20','market_cap','orderstatus','argv','pro','\x20attempts','getMinutes','status','axios','\x20has\x20a\x2024h\x20drop\x20of\x20','initclient','Limit\x20(high-margin)','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','split','rightTxt','quote','running','buys','PAXG','type','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)','net-fiat','send','coins','autoliquidity','code','\x20MB','mkdirSync','push','Resetting\x20coin\x20results:\x20','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','deleteHistoryAlerts','1\x20-\x20FILLED\x20unknown\x20order:\x20','bot-','\x20|\x20','onepagemode','timeshift',':\x20timer\x20>','</pre>','offset','19249BAlgVM','configstate','colorscheme','progress','Test\x20API','lowdb/adapters/FileSync','fetchTickers()','Order\x20amount\x20is\x20invalid:\x20','Updating\x20API\x20key\x20(not\x20saved\x20in\x20config\x20file\x20yet)','./config/','constructor','startnumber','cooldown','message','entries','symbol','net-basecoin','reverse','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','Valid\x20balance\x20for\x20','balancing\x20resumed','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)','change','Trigger:\x20','apiPassword','keys','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','log','pop','Binance','\x20|\x20highest\x20fee:\x20','Set\x20lock\x20orders\x20to:\x20','storeConfiguration','2398025btGPoQ','eur','16807530ykeupP','getOpenOrders()','bid','API-key\x20format\x20invalid','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','buy','configuration','Stopped\x20fetching\x20balance\x20after\x20','getDate','ordertype','amountToPrecision','<pre>','number','price','switch-manual','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','process\x20','time','Error\x20occurred:\x20','trade','differenceInSeconds','Order\x20filled:\x20','heapUsed','startdate','Initiating\x20bot\x20restart','bb-secure.json','apiKey','\x0aSymbol(s):\x20','Bot\x20','RSA-OAEP','getMonth','cloneDeep','amount','testApi','bitmex','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','exec','find','pid','final','ExchangeError','Resuming\x20(','timeout','version','coin','\x20value','length','Invalid\x20balance\x20for\x20','\x20metrics:</b>\x20\x0a\x0a','remove','indexOf','privateKeyFromPem','percentage','replace','USD','fetchBalance','lowdb','portfolio2','toFixed','random','padStart','\x20-\x20bot\x20switched\x20to\x20manual\x20mode','cost','configuration-stored','canceled','USDC','no\x20exchange\x20reloaded','\x20>\x20[DEBUG]\x20','Error\x20details:\x20','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','174WnDVlr','balances','red_yellow_blue','exchange','performance','<b>','basecoinvalue','string','event-history','InvalidOrder','findIndex','MIN_NOTIONAL','-results.json','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','-performance.json','emojisell','recovery','prevnumber','date-fns','enabled','search','filter','none','AuthenticationError','Failed\x20to\x20load\x20market\x20data\x20-\x20bot\x20not\x20started','%\x20(','unlinkSync','valid','apiSecret','Pausing\x20for\x20','watchTrades()','startprice','2\x20-\x20Handled\x20open\x20orders','kill','pki','ExchangeNotAvailable','placeOrder()','Order\x20is\x20invalid:\x20','\x20exchange','(((.+)+)+)+$',')\x20|\x20exchange:\x20','botID','emitHistory','excluded','bb-settings.json','Exception\x20thrown\x20in\x20','ID:\x20','currency','getCoinNumber()','initial','target','sort','13196EkQCqw','production','marketcapEnabled','\x20-\x20bot\x20not\x20started','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','storeHeadless','getSeconds','\x20blocked\x20API\x20(RateLimitExceeded)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','Network\x20error\x20details:','request-time','\x20:\x20','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20trying\x20again\x20in\x20','resetHistory','value','Error:\x20Invalid\x20argument\x20','secure','28lrYztZ','\x20|\x20Custom\x20ID:\x20','writeFile','Unknown\x20error\x20-\x20check\x20logs','round','cancelOrders()','sqrt','timestamp','watchOrders','distribution','BNB/','\x20(see:\x20hodlerhacks.com/fix/1)','NetworkError','./version.json','2.3.5','substring','createOrder','fees','headless','recreate','forEach','\x20|\x20exchange:\x20','args','1788wyieuH','Exchange','\x20order:\x20','ETH','fetchBalance()','yyyy/MM/dd','quick','removed','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','total','Cex','fee','ongoing','BTC','spot','environment','add','starting-balance-','marketcap','getHours','threshold','Portfolio\x20change\x20detected:\x20','assign','***','/EUR','exchange\x20reload','toUpperCase','update-liquidity','2\x20-\x20Validate\x20orders:\x20','change24h','fiat','************','2.6.22','watchTrades','-events.json','USDT','added','shift','Invalid\x20quantity','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','success','-------------------------------\x0a','usd','slice','\x20minutes\x20-\x20','<b>Bot\x20','fromCodePoint','5195nMfsqB'];_0x5356=function(){return _0x512abf;};return _0x5356();}async function resumeBot(_0xe9dfe=![]){const _0xdf75ee=_0x224dcd;logger[_0xdf75ee(0x1d3)](_0xdf75ee(0x25b)+(_0xe9dfe?_0xdf75ee(0x2d9):_0xdf75ee(0x338))+_0xdf75ee(0x2a0)+config[_0xdf75ee(0x27b)]);if(pidBalances)clearTimeout(pidBalances);if(_0xe9dfe){getBalances();return;}coinsLoaded=![];if(config['apiKey']!=''&&config[_0xdf75ee(0x24c)]!=_0xdf75ee(0x2ea)){loadingProgress=0x1;const _0x2842dc=await getCoins();[currentCoins,currentCoinsAll]=_0x2842dc,setBlockTransactionDetection(![]),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0xdf75ee(0x1d3)](_0xdf75ee(0x312)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0xdf75ee(0x260)]==0x0&&allOpenOrders[_0xdf75ee(0x260)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();}}async function getMarketCap(_0x2f0138){const _0x5cfb30=_0x224dcd;let _0x3b710d=![];if(_0x2f0138)_0x3b710d=!![];let _0x508299;_0x3b710d?_0x508299=_0x2f0138['map'](_0x5c0c94=>_0x5c0c94[_0x5cfb30(0x25e)]):_0x508299=currentCoinsAll[_0x5cfb30(0x1cf)](_0x4c787d=>_0x4c787d[_0x5cfb30(0x25e)]);if(!config['marketcapApi']||!_0x3b710d&&!config[_0x5cfb30(0x2ae)]||_0x508299[_0x5cfb30(0x260)]==0x0)return;let _0xbc04f5=null;try{_0xbc04f5=await axios[_0x5cfb30(0x326)](_0x5cfb30(0x1c7),{'headers':{'X-CMC_PRO_API_KEY':settings[_0x5cfb30(0x324)]},'params':{'symbol':_0x508299['toString']()}});}catch(_0x373111){_0xbc04f5=null,_0x373111['toString']()[_0x5cfb30(0x1d6)]('status\x20code\x20401')?(config[_0x5cfb30(0x324)]=![],updateConfig(),proxyEmit('configuration',emittedConfiguration()),logHistory(_0x5cfb30(0x382),'CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager')):(logHistory(_0x5cfb30(0x382),_0x5cfb30(0x2b7)+schedulerInterval/(0x3c*0x3e8)+_0x5cfb30(0x335)),logger[_0x5cfb30(0x1d3)]('Error\x20details:',_0x373111['toString']()+'\x20-\x20'+_0x373111[_0x5cfb30(0x1ff)]));}if(_0xbc04f5){let _0x1e06b1=0x0;const _0x46e204=_0xbc04f5[_0x5cfb30(0x328)];_0x508299[_0x5cfb30(0x2d0)](_0x150233=>{const _0x555a6c=_0x5cfb30;if(_0x46e204['data'][_0x150233][0x0])_0x1e06b1+=_0x46e204[_0x555a6c(0x328)][_0x150233][0x0][_0x555a6c(0x1f4)][_0x555a6c(0x268)][_0x555a6c(0x1e6)];}),_0x508299[_0x5cfb30(0x2d0)](_0x301f0f=>{const _0x430574=_0x5cfb30,_0x56f932=_0x46e204[_0x430574(0x328)][_0x301f0f][0x0]?_0x46e204[_0x430574(0x328)][_0x301f0f][0x0]['quote'][_0x430574(0x268)]['market_cap']:0x0;if(_0x3b710d){const _0x26b83c=_0x2f0138[_0x430574(0x257)](_0x2ab123=>_0x2ab123[_0x430574(0x25e)]==_0x301f0f);_0x26b83c&&(_0x26b83c[_0x430574(0x2e5)]=_0x56f932);}else{const _0x5aa6f6=currentCoins[_0x430574(0x257)](_0x248294=>_0x248294[_0x430574(0x25e)]==_0x301f0f);_0x5aa6f6&&(_0x5aa6f6['marketcap']=_0x56f932);const _0x397c48=currentCoinsAll[_0x430574(0x257)](_0x51796d=>_0x51796d[_0x430574(0x25e)]==_0x301f0f);_0x397c48&&(_0x397c48[_0x430574(0x2e5)]=_0x56f932);}}),!_0x3b710d&&updateTargetDistribution();}}function updateTargetDistribution(){const _0xcaf083=_0x224dcd,_0x5d321b=0x2;let _0x16d9c2=0x0,_0x14b74f=0x0,_0x544b58=0x0,_0x12dda3=0x0,_0x521cb4=0x0;config[_0xcaf083(0x339)]['forEach'](_0x376731=>{const _0x7585d1=_0xcaf083;if(!_0x376731[_0x7585d1(0x2a3)]){_0x544b58++,_0x16d9c2+=_0x376731[_0x7585d1(0x340)];if(_0x376731[_0x7585d1(0x340)]===-0x1){_0x16d9c2++;const _0x25ebdf=currentCoinsAll[_0x7585d1(0x257)](_0x41d0d6=>_0x41d0d6[_0x7585d1(0x25e)]==_0x376731['coin']);_0x25ebdf&&(_0x12dda3+=_0x25ebdf[_0x7585d1(0x2e5)],_0x521cb4+=Math[_0x7585d1(0x2c2)](_0x25ebdf[_0x7585d1(0x2e5)]));}if(_0x376731[_0x7585d1(0x340)]!==-0x1)_0x14b74f++;}});let _0x21c27a;const _0x1ec1ea=0x64-_0x16d9c2,_0x2e6934=_0x544b58-_0x14b74f;_0x21c27a=_0x2e6934===0x0?_0x16d9c2:Math[_0xcaf083(0x36a)](0x64,_0x16d9c2),config['portfolio'][_0xcaf083(0x2d0)](_0x53f22f=>{const _0x3f4bbf=_0xcaf083,_0x454f1c=currentCoinsAll['find'](_0x160cae=>_0x160cae['coin']==_0x53f22f[_0x3f4bbf(0x25e)]);_0x454f1c&&(_0x53f22f[_0x3f4bbf(0x2e5)]=_0x454f1c[_0x3f4bbf(0x2e5)]);if(!_0x53f22f[_0x3f4bbf(0x2a3)]){if(_0x21c27a<=0x64){if(_0x53f22f[_0x3f4bbf(0x340)]===-0x1){if(_0x12dda3!==0x0&&config[_0x3f4bbf(0x2ae)]){if(_0x454f1c){if(config[_0x3f4bbf(0x2ae)]==_0x3f4bbf(0x2e5))_0x53f22f[_0x3f4bbf(0x2c5)]=(_0x1ec1ea/(_0x12dda3/_0x454f1c[_0x3f4bbf(0x2e5)]))[_0x3f4bbf(0x26c)](_0x5d321b);else config[_0x3f4bbf(0x2ae)]==_0x3f4bbf(0x1b5)&&(_0x53f22f[_0x3f4bbf(0x2c5)]=(_0x1ec1ea/(_0x521cb4/Math[_0x3f4bbf(0x2c2)](_0x454f1c[_0x3f4bbf(0x2e5)])))['toFixed'](_0x5d321b));}}}}}}),updateConfig();}function updateConfig(){const _0x587e9d=_0x224dcd;let _0x37b7f2=dbConfig['get'](_0x587e9d(0x31b))['find']({'botID':botID})['value']();_0x37b7f2&&dbConfig[_0x587e9d(0x326)](_0x587e9d(0x31b))['find']({'botID':botID})['assign'](config)['write']();}function logMemory(){const _0xd77f5d=_0x224dcd;if(environment!=_0xd77f5d(0x354))return;const _0x3e985a=process[_0xd77f5d(0x313)]()[_0xd77f5d(0x248)]/0x400/0x400;logger[_0xd77f5d(0x1d3)](_0xd77f5d(0x242)+process[_0xd77f5d(0x258)]+_0xd77f5d(0x30b)+formatResult(_0x3e985a,0x1)+_0xd77f5d(0x200));}async function startScheduler(){const _0x5cc09a=_0x224dcd,_0x4915e2=shiftedTime()[_0x5cc09a(0x2e6)]();getMarketCap(),loadSymbols(),_0x4915e2==0x1&&logMemory(),await sleep(schedulerInterval),startScheduler();}async function restartBot(_0xa43e82=![]){const _0x3a1d40=_0x224dcd;logger[_0x3a1d40(0x1d3)](_0x3a1d40(0x24a));if(!_0xa43e82)while(lockOrders!=ORDERS[_0x3a1d40(0x37b)]||coolingDown){await sleep(0x3e8);}process[_0x3a1d40(0x1fc)]({'stop':_0x3a1d40(0x309)},_0x3a293e=>{});}async function initExchange(_0x1a41ce=config[_0x224dcd(0x27b)],_0x283597=config['apiKey'],_0x573078=config[_0x224dcd(0x294)],_0x41baf1=config['apiPassword']){const _0x574b6f=_0x224dcd;if(exchange){logger[_0x574b6f(0x1d3)](_0x574b6f(0x33b));return;}logger[_0x574b6f(0x1d3)](_0x574b6f(0x1bc));!supportedExchanges()[_0x574b6f(0x1d6)](_0x1a41ce)&&(logHistory('error','Balance\x20Bot\x20does\x20not\x20support\x20the\x20'+_0x1a41ce+_0x574b6f(0x29e)),killBot());const _0x3dfd71=ccxt[_0x574b6f(0x1e9)][_0x1a41ce[_0x574b6f(0x311)]()];exchange=new _0x3dfd71({'apiKey':_0x283597,'secret':_0x573078,'options':{'defaultType':_0x574b6f(0x2e1)}});if(_0x41baf1)exchange['password']=_0x41baf1;}function updateExchange(_0xbad6d8,_0x122dff,_0x4ab41e=null){const _0x2bfb49=_0x224dcd;exchange['apiKey']=_0xbad6d8,exchange[_0x2bfb49(0x294)]=_0x122dff,exchange[_0x2bfb49(0x227)]=_0x4ab41e,logger[_0x2bfb49(0x1d3)](_0x2bfb49(0x216));}function setStableCoins(){const _0x4461be=_0x224dcd;let _0x5b5393=config[_0x4461be(0x346)]==_0x4461be(0x2d6)?_0x4461be(0x2d6):config[_0x4461be(0x346)]==_0x4461be(0x1f7)?_0x4461be(0x1f7):'BTC',_0x5ac9d2=allSymbols[_0x4461be(0x1d6)](_0x5b5393+_0x4461be(0x383))?'USD':allSymbols['includes'](_0x5b5393+_0x4461be(0x315))?'USDT':_0x4461be(0x321),_0x29846e=allSymbols[_0x4461be(0x1d6)](_0x5b5393+_0x4461be(0x2eb))?'EUR':_0x5ac9d2;enableFiatToggle=!![],_0x5ac9d2==_0x4461be(0x321)&&(enableFiatToggle=![],storeFiat(_0x4461be(0x321))),_0x29846e!=_0x4461be(0x321)&&(enableFiatToggle=![],storeFiat(_0x4461be(0x268))),stablecoins={'eur':{'coin':''+_0x5b5393+_0x29846e,'symbol':_0x5b5393+'/'+_0x29846e},'usd':{'coin':''+_0x5b5393+_0x5ac9d2,'symbol':_0x5b5393+'/'+_0x5ac9d2}};}async function initwsCcxt(){const _0x4a8b5d=_0x224dcd;initCycle++;const _0x258225=initCycle;let _0x5b9b99=[];config[_0x4a8b5d(0x339)][_0x4a8b5d(0x2d0)](_0x325f14=>{const _0x47d4f8=_0x4a8b5d;if(!_0x325f14[_0x47d4f8(0x2a3)]&&_0x325f14[_0x47d4f8(0x25e)]!=config['basecoin'])_0x5b9b99[_0x47d4f8(0x202)](_0x325f14[_0x47d4f8(0x21d)]);});if(!_0x5b9b99[_0x4a8b5d(0x1d6)](stablecoins[_0x4a8b5d(0x231)][_0x4a8b5d(0x21d)]))_0x5b9b99['push'](stablecoins[_0x4a8b5d(0x231)]['symbol']);if(!_0x5b9b99['includes'](stablecoins[_0x4a8b5d(0x2fd)][_0x4a8b5d(0x21d)]))_0x5b9b99[_0x4a8b5d(0x202)](stablecoins['usd'][_0x4a8b5d(0x21d)]);if(config[_0x4a8b5d(0x27b)][_0x4a8b5d(0x349)](_0x4a8b5d(0x22c))&&config[_0x4a8b5d(0x346)]!=_0x4a8b5d(0x1f7)){if(!_0x5b9b99[_0x4a8b5d(0x1d6)](_0x4a8b5d(0x2c6)+config[_0x4a8b5d(0x346)]))_0x5b9b99[_0x4a8b5d(0x202)]('BNB/'+config[_0x4a8b5d(0x346)]);}loadCoins(_0x5b9b99),_0x5b9b99=validateSymbols(_0x5b9b99);const _0x5e893b=async _0x53cce1=>{const _0x4c0184=_0x4a8b5d;let _0x2c1948;try{const _0x230694=await getTickers(_0x53cce1);Object[_0x4c0184(0x21c)](_0x230694)['forEach'](_0x2875d1=>{const _0x2a6491=_0x4c0184;_0x2c1948=_0x2875d1[0x1][_0x2a6491(0x21d)],gTicker[noslash(_0x2c1948)]=_0x2875d1[0x1]['last'],gChange[_0x2c1948]=_0x2875d1[0x1][_0x2a6491(0x266)];});}catch(_0x229b3c){await handleError(_0x229b3c,_0x4c0184(0x337),_0x2c1948);}},_0x207c1c=async _0x109eba=>{const _0x42f4b4=_0x4a8b5d;while(initCycle==_0x258225){if(!botPaused)try{const _0x3cb582=await exchange['watchTrades'](_0x109eba);gTicker[noslash(_0x3cb582[0x0]['symbol'])]=_0x3cb582[0x0][_0x42f4b4(0x23f)];}catch(_0x3a214f){if(!exchangeStopped)await handleError(_0x3a214f,_0x42f4b4(0x296),_0x109eba);}else await sleep(0x64);}},_0x3fff65=async _0x52c835=>{const _0x2c399e=_0x4a8b5d;while(initCycle==_0x258225){if(!botPaused)try{const _0xcd2b62=await exchange[_0x2c399e(0x32e)](_0x52c835),_0x5225d7=_0xcd2b62[_0x2c399e(0x22b)]();gTicker[noslash(_0x5225d7[_0x2c399e(0x21d)])]=_0x5225d7[_0x2c399e(0x23f)];}catch(_0x5ab314){if(!exchangeStopped)await handleError(_0x5ab314,_0x2c399e(0x32f),_0x52c835['toString']());}else await sleep(0x64);}},_0x5d741f=async _0x28492a=>{const _0x15769f=_0x4a8b5d;while(initCycle==_0x258225){if(!botPaused){let _0x5ecc9a;try{await sleep(0x3c*0x3e8);const _0x282bd5=await getTickers(_0x28492a);Object[_0x15769f(0x21c)](_0x282bd5)['forEach'](_0x273a20=>{const _0x559ae1=_0x15769f;_0x5ecc9a=_0x273a20[0x1][_0x559ae1(0x21d)],gChange[_0x5ecc9a]=_0x273a20[0x1]['percentage'];});}catch(_0x5300e4){if(!exchangeStopped)await handleError(_0x5300e4,_0x15769f(0x214),_0x5ecc9a);}}else await sleep(0x64);}},_0x1ba591=async _0x507cab=>{const _0x544563=_0x4a8b5d;while(initCycle==_0x258225){if(!botPaused)try{const _0x478420=await exchange[_0x544563(0x2c4)](_0x507cab);initCycle==_0x258225&&_0x478420[_0x544563(0x2d0)](_0x138573=>{updateNumberCoinsCcxt(_0x138573);});}catch(_0x3313b7){if(!exchangeStopped)await handleError(_0x3313b7,_0x544563(0x31a));}else await sleep(0x64);}};_0x5e893b(_0x5b9b99),_0x5d741f(_0x5b9b99),exchange['has'][_0x4a8b5d(0x32e)]&&!(config[_0x4a8b5d(0x27b)]==_0x4a8b5d(0x353)&&_0x5b9b99['length']>0xa)?_0x3fff65(_0x5b9b99):_0x5b9b99['forEach'](_0x4d1994=>{_0x207c1c(_0x4d1994);}),_0x5b9b99[_0x4a8b5d(0x2d0)](_0x167bc1=>{_0x1ba591(_0x167bc1);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x4a0834){const _0x51c0a7=_0x224dcd;let _0x3a7beb={};try{if(config[_0x51c0a7(0x27b)]!='Cryptocom')_0x3a7beb=await exchange[_0x51c0a7(0x329)](_0x4a0834);else for(const _0x3d6229 of _0x4a0834){const _0x4f84e5=await exchange[_0x51c0a7(0x35c)](_0x3d6229);_0x3a7beb[_0x3d6229]=_0x4f84e5;}return _0x3a7beb;}catch(_0x5e298c){throw _0x5e298c;}}function setBlockTransactionDetection(_0x17b9a3){blockTransactionDetection=_0x17b9a3,logger['debug']('Block\x20transaction\x20detection:\x20'+blockTransactionDetection);}async function detectLiquidityChange(_0x2c94e1=0x0){const _0x5ce568=_0x224dcd;transactionDetectionOngoing=!![];try{const _0x3a7929=await getCoins(_0x2c94e1),[_0x4c45f5,_0x3e39ea]=_0x3a7929;let _0x1b3162=[];currentCoins[_0x5ce568(0x2d0)](_0x464aa6=>{const _0x188197=_0x5ce568,_0x162aa6=_0x4c45f5[_0x188197(0x257)](_0x301ffd=>_0x301ffd['coin']==_0x464aa6[_0x188197(0x25e)]);if(_0x162aa6){if(_0x464aa6[_0x188197(0x23e)]!=_0x162aa6[_0x188197(0x23e)]){let _0x55afe6;if(_0x464aa6[_0x188197(0x25e)]!=config[_0x188197(0x346)]){const _0x490dcf=gTicker[noslash(_0x464aa6['symbol'])];_0x55afe6=_0x464aa6[_0x188197(0x21f)]?0x1/_0x490dcf:_0x490dcf;}else _0x55afe6=0x1;_0x1b3162[_0x188197(0x202)]({'coin':_0x464aa6[_0x188197(0x25e)],'symbol':_0x464aa6[_0x188197(0x21d)],'price':_0x55afe6,'number':Number(formatResult(_0x162aa6[_0x188197(0x23e)]-_0x464aa6[_0x188197(0x23e)],0x8)),'basecoinvalue':_0x55afe6*(_0x162aa6['number']-_0x464aa6[_0x188197(0x23e)])});}}});if(_0x1b3162[_0x5ce568(0x260)]>0x0&&!blockTransactionDetection){for(const _0x1b8529 of _0x1b3162){if(config[_0x5ce568(0x1fe)]){logger['debug']('Liquidity\x20change\x20|\x20basecoin\x20value:\x20'+_0x1b8529[_0x5ce568(0x27e)]+_0x5ce568(0x22d)+lastFees[_0x5ce568(0x307)]);if(lastFees[_0x5ce568(0x307)]==0x0||Math['abs'](_0x1b8529[_0x5ce568(0x27e)])>lastFees['highest']*0x3){if(config['autoliquidity']==_0x5ce568(0x2ee)){delete _0x1b8529[_0x5ce568(0x21d)],delete _0x1b8529['basecoinvalue'];let _0x4d40d6=[],_0x18dd00=[...config[_0x5ce568(0x332)]]||[],_0x4f16f6=config[_0x5ce568(0x332)];_0x18dd00[_0x5ce568(0x2ab)]((_0x3b1b71,_0x5e1276)=>_0x3b1b71[_0x5ce568(0x1d1)]>_0x5e1276[_0x5ce568(0x1d1)]?-0x1:_0x5e1276[_0x5ce568(0x1d1)]>_0x3b1b71[_0x5ce568(0x1d1)]?0x1:0x0);const _0x3b8844=getDate();if(_0x18dd00[0x0]){const _0xcc22d4=fns[_0x5ce568(0x1ca)](_0x18dd00[0x0][_0x5ce568(0x1d1)],_0x5ce568(0x2d8),new Date()),_0x274280=fns[_0x5ce568(0x1ca)](_0x3b8844,'yyyy/MM/dd',new Date());if(fns['isEqual'](_0xcc22d4,_0x274280)){_0x4d40d6=_0x18dd00[0x0]['changes'];const _0x3ea11b=_0x4d40d6[_0x5ce568(0x257)](_0x4f2bc5=>_0x4f2bc5[_0x5ce568(0x25e)]==_0x1b8529[_0x5ce568(0x25e)]);_0x3ea11b?(_0x3ea11b['number']+=_0x1b8529[_0x5ce568(0x23e)],_0x3ea11b['number']==0x0&&(_0x4d40d6=_0x4d40d6[_0x5ce568(0x28d)](_0x11924a=>{const _0x44057a=_0x5ce568;return _0x11924a[_0x44057a(0x25e)]!=_0x1b8529['coin'];}))):_0x4d40d6[_0x5ce568(0x202)](_0x1b8529);const _0x17f779=_0x4f16f6[_0x5ce568(0x257)](_0x2383a5=>_0x2383a5[_0x5ce568(0x1d1)]==_0x3b8844);_0x17f779[_0x5ce568(0x379)]=_0x4d40d6;}else _0x4f16f6[_0x5ce568(0x202)]({'date':_0x3b8844,'changes':[_0x1b8529]});}const _0x46024c=_0x4f16f6[_0x5ce568(0x257)](_0x2fff2a=>_0x2fff2a[_0x5ce568(0x1d1)]==_0x3b8844);if(_0x46024c){let _0x2bd9b8=!![];_0x46024c[_0x5ce568(0x379)][_0x5ce568(0x2d0)](_0x11bea0=>{const _0xe5ba1a=_0x5ce568;if(_0x11bea0[_0xe5ba1a(0x23e)]!=0x0)_0x2bd9b8=![];}),_0x2bd9b8&&(_0x4f16f6=_0x4f16f6[_0x5ce568(0x28d)](_0x1f4e82=>{const _0x4b5cbf=_0x5ce568;return _0x1f4e82[_0x4b5cbf(0x1d1)]!=_0x3b8844;}));}let _0x24a1f7=dbConfig[_0x5ce568(0x326)](_0x5ce568(0x31b))[_0x5ce568(0x257)]({'botID':botID})[_0x5ce568(0x2b9)]();_0x24a1f7&&(dbConfig[_0x5ce568(0x326)](_0x5ce568(0x31b))[_0x5ce568(0x257)]({'botID':botID})['assign']({'liquidity':_0x4f16f6})[_0x5ce568(0x378)](),config[_0x5ce568(0x332)]=_0x4f16f6);logHistory(_0x5ce568(0x2fb),_0x5ce568(0x2e8)+Math['abs'](_0x1b8529[_0x5ce568(0x23e)])+'\x20'+_0x1b8529['coin']+'\x20'+(_0x1b8529[_0x5ce568(0x23e)]>0x0?'added':_0x5ce568(0x2da))+_0x5ce568(0x255)),proxyEmit(_0x5ce568(0x238),emittedConfiguration());const _0x29b552=getNormalizedPerformance();emitPerformance(_0x29b552),getStartingBalances(_0x29b552),logger[_0x5ce568(0x1d3)]('Portfolio\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated');}else config['autoliquidity']==_0x5ce568(0x240)&&(config[_0x5ce568(0x2ce)]?(await storeHeadless({'headless':![]}),logHistory(_0x5ce568(0x2fb),_0x5ce568(0x2e8)+Math[_0x5ce568(0x32b)](_0x1b8529[_0x5ce568(0x23e)])+'\x20'+_0x1b8529['coin']+'\x20'+(_0x1b8529['number']>0x0?_0x5ce568(0x2f7):_0x5ce568(0x2da))+_0x5ce568(0x26f))):logger[_0x5ce568(0x1d3)]('Portfolio\x20change\x20detected:\x20'+Math['abs'](_0x1b8529[_0x5ce568(0x23e)])+'\x20'+_0x1b8529['coin']+'\x20'+(_0x1b8529[_0x5ce568(0x23e)]>0x0?_0x5ce568(0x2f7):_0x5ce568(0x2da))+_0x5ce568(0x1d4)));}else logger[_0x5ce568(0x1d3)](_0x5ce568(0x1cb)+Math[_0x5ce568(0x32b)](_0x1b8529[_0x5ce568(0x23e)])+'\x20'+_0x1b8529[_0x5ce568(0x25e)]+'\x20'+(_0x1b8529[_0x5ce568(0x23e)]>0x0?_0x5ce568(0x2f7):'removed'));}else logger['debug'](_0x5ce568(0x2e8)+Math[_0x5ce568(0x32b)](_0x1b8529['number'])+'\x20'+_0x1b8529[_0x5ce568(0x25e)]+'\x20'+(_0x1b8529[_0x5ce568(0x23e)]>0x0?_0x5ce568(0x2f7):_0x5ce568(0x2da))+_0x5ce568(0x1f1));}currentCoins=_0x4c45f5,currentCoinsAll=_0x3e39ea;}}catch(_0x3501c5){if(!exchangeStopped)await handleError(_0x3501c5,_0x5ce568(0x370));}transactionDetectionOngoing=![];}async function watchTransactions(){await sleep(0x14*0x3e8);while(!![]){!botPaused&&!blockTransactionDetection&&coinsLoaded?(detectLiquidityChange(),await sleep(watchTransactionsInterval)):await sleep(0x3e8);}}async function loadSymbols(){const _0x3ccb73=_0x224dcd;try{markets=await exchange[_0x3ccb73(0x1c8)](!![]),allSymbols=[],Object[_0x3ccb73(0x21c)](markets)[_0x3ccb73(0x2d0)](_0x1fba2c=>{const _0x41f692=_0x3ccb73;_0x1fba2c[0x1]['active']&&_0x1fba2c[0x1][_0x41f692(0x2e1)]&&allSymbols['push'](_0x1fba2c[0x0]);});}catch(_0x3c8f9b){markets?logger[_0x3ccb73(0x1d3)](_0x3ccb73(0x352)+_0x3c8f9b['toString']()):(loading['cancel']=!![],emitLoadingProgress(),_0x3c8f9b['toString']()[_0x3ccb73(0x311)]()[_0x3ccb73(0x1d6)](_0x3ccb73(0x2c3))||_0x3c8f9b[_0x3ccb73(0x356)]()[_0x3ccb73(0x311)]()[_0x3ccb73(0x1d6)](_0x3ccb73(0x2b5))?logHistory(_0x3ccb73(0x382),_0x3ccb73(0x1fa)):handleErrorNoStop(_0x3c8f9b,_0x3ccb73(0x342),!![]),logHistory(_0x3ccb73(0x382),_0x3ccb73(0x290)),logHistory(_0x3ccb73(0x382),_0x3ccb73(0x295)+loadCoinsRetryInterval/0xea60+'\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again'),logger[_0x3ccb73(0x1d3)](_0x3ccb73(0x31c),_0x3c8f9b),botPaused=!![],await sleep(loadCoinsRetryInterval),restartBot());}}function validateSymbols(_0x194a0f){const _0x3573ae=_0x224dcd;let _0x406d15=[];return _0x194a0f[_0x3573ae(0x2d0)](_0x4da54a=>{const _0x509b63=_0x3573ae;!allSymbols[_0x509b63(0x1d6)](_0x4da54a)?logHistory(_0x509b63(0x382),'Invalid\x20symbol:\x20'+_0x4da54a+'\x20-\x20exclude\x20coin\x20in\x20the\x20configuration'):_0x406d15['push'](_0x4da54a);}),_0x406d15;}async function initclient(){const _0x4d04e0=_0x224dcd;proxyEmit('configuration',emittedConfiguration()),proxyEmit(_0x4d04e0(0x1c1),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x3367d6=getNormalizedPerformance();emitPerformance(_0x3367d6),getStartingBalances(_0x3367d6);}async function toggleBotMode(){const _0x1140ec=_0x224dcd;let _0x24a700=dbConfig[_0x1140ec(0x326)](_0x1140ec(0x31b))[_0x1140ec(0x257)]({'botID':botID})[_0x1140ec(0x2b9)]();if(_0x24a700){const _0x9d8cb7=!_0x24a700[_0x1140ec(0x2ce)];dbConfig[_0x1140ec(0x326)]('bot')[_0x1140ec(0x257)]({'botID':botID})[_0x1140ec(0x2e9)]({'headless':_0x9d8cb7})[_0x1140ec(0x378)](),config[_0x1140ec(0x2ce)]=_0x9d8cb7,proxyEmit(_0x1140ec(0x238),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x1fba61=_0x224dcd;process[_0x1fba61(0x1fc)]({'updatebotmanager':!![]},_0x47bb0c=>{}),logger[_0x1fba61(0x1d3)]('Headless:\x20'+config[_0x1fba61(0x2ce)]);}async function loadCoins(_0x120b2e){const _0xd4c174=_0x224dcd;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x2de069,_0xa45ea4=0x0,_0x51edc3=0x0;_0x120b2e['forEach'](_0xa2b5d4=>{const _0x4bb11d=_0x3bf2;loading[_0x4bb11d(0x1d0)][_0x4bb11d(0x202)](_0xa2b5d4);}),loadingCanceled=![];let _0x65d209=![];while(_0x2de069!=_0x120b2e[_0xd4c174(0x260)]+maxLoadingProgress){_0x2de069=loadingProgress,_0x120b2e['forEach'](_0x5b8a90=>{const _0xbd6565=_0xd4c174;if(gTicker[noslash(_0x5b8a90)]){loading[_0xbd6565(0x1d0)]=loading[_0xbd6565(0x1d0)][_0xbd6565(0x28d)](_0x410d2b=>_0x410d2b!=_0x5b8a90);if(!watchedSymbols[_0xbd6565(0x1d6)](_0x5b8a90))watchedSymbols[_0xbd6565(0x202)](_0x5b8a90);_0x2de069++;}}),loading['progress']=Math[_0xd4c174(0x2c0)](_0x2de069/(_0x120b2e[_0xd4c174(0x260)]+maxLoadingProgress)*0x64);loading[_0xd4c174(0x211)]!=0x64&&(_0x51edc3>0x1e*0x5&&(loading[_0xd4c174(0x25c)]=!![],emitLoadingProgress()),_0x51edc3>0x78*0x5&&!_0x65d209&&(_0x65d209=!![],logHistory(_0xd4c174(0x382),_0xd4c174(0x344)+loading[_0xd4c174(0x1d0)]['join'](',\x20')+_0xd4c174(0x2af)),logHistory(_0xd4c174(0x382),_0xd4c174(0x295)+loadCoinsRetryInterval/0xea60+_0xd4c174(0x229)),loadingCanceled=!![],await sleep(loadCoinsRetryInterval),restartBot()));if(loadingCanceled){loading['cancel']=!![],emitLoadingProgress();break;}else _0xa45ea4!=loading['progress']&&(_0xa45ea4=loading[_0xd4c174(0x211)],emitLoadingProgress()),_0x51edc3++,await sleep(0xc8);}_0x2de069==_0x120b2e['length']+maxLoadingProgress&&(coinsLoaded=!![],process[_0xd4c174(0x1fc)]({'status':_0xd4c174(0x28b),'live':_0xd4c174(0x1f5)},_0x1a8d08=>{}),_0x65d209&&logHistory(_0xd4c174(0x2fb),_0xd4c174(0x376)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){proxyEmit('configuration',{...emittedConfiguration(),'configstate':'loading-canceled'});}function emitLoadingProgress(){proxyEmit('coin-loading-progress',loading);}async function getFiat(){const _0x250136=_0x224dcd;let _0x4f2b73=gTicker[stablecoins['eur']['coin']],_0x3aa508=gTicker[stablecoins[_0x250136(0x2fd)][_0x250136(0x25e)]];return{'eur':Number(_0x4f2b73),'usd':Number(_0x3aa508)};}function capitalize(_0xac4590){const _0x24424e=_0x224dcd;return _0xac4590['substring'](0x0,0x1)[_0x24424e(0x2ed)]()+_0xac4590[_0x24424e(0x2cb)](0x1);}function supportedExchanges(){const _0x32c410=_0x224dcd,_0x5b1374=['ws',_0x32c410(0x329),'fetchTicker',_0x32c410(0x2f4),_0x32c410(0x2c4),'cancelOrder',_0x32c410(0x2cc),'fetchOpenOrders',_0x32c410(0x269)];let _0x4ccc3b=[],_0xaa188e=[],_0x69ab8f=ccxt[_0x32c410(0x1e9)][_0x32c410(0x1c1)];_0x69ab8f[_0x32c410(0x2d0)](_0xa41708=>{const _0x39a54e=_0x32c410;try{const _0x444b8d=new ccxt[(_0x39a54e(0x1e9))][_0xa41708]();_0xaa188e['push'](_0x444b8d);}catch(_0x5848e9){}}),_0xaa188e[_0x32c410(0x2d0)](_0x2918e5=>{const _0xba144e=_0x32c410;let _0x2fb656=0x0;_0x5b1374[_0xba144e(0x2d0)](_0x5965e3=>{_0x5965e3 in _0x2918e5['has']&&_0x2918e5['has'][_0x5965e3]&&_0x2fb656++;}),_0x2fb656==_0x5b1374[_0xba144e(0x260)]&&(!excludedExchanges[_0xba144e(0x1d6)](_0x2918e5['id'])&&_0x4ccc3b[_0xba144e(0x202)](capitalize(_0x2918e5['id'])));});let _0xdab469=[];return _0x69ab8f[_0x32c410(0x2d0)](_0x126a82=>{const _0x300e80=_0x32c410;_0x126a82=capitalize(_0x126a82);if(!_0x4ccc3b[_0x300e80(0x1d6)](_0x126a82))_0xdab469[_0x300e80(0x202)](_0x126a82);}),_0x4ccc3b;}function setStartDatePerformance(){const _0x93438d=_0x224dcd;if(config&&config[_0x93438d(0x332)][0x0][_0x93438d(0x379)][_0x93438d(0x260)]!=0x0){const _0x3811c4=config[_0x93438d(0x332)][0x0][_0x93438d(0x379)];dbPerformance[_0x93438d(0x326)](_0x93438d(0x328))['find']({'date':config['startdate']})[_0x93438d(0x2e9)]({'coins':_0x3811c4})[_0x93438d(0x378)]();}}async function recreateCoinResults(){const _0x5c926d=_0x224dcd;recreationNeeded=![];let _0x5f1ced,_0x49e8a1=[];try{for(const _0x42f0de of currentCoins){if(_0x42f0de[_0x5c926d(0x25e)]!=config[_0x5c926d(0x346)]){let _0xcf48e6=0x0,_0x24d19d,_0x59ffe0;_0x5f1ced=await getAllEventOrders(_0x42f0de['symbol']);if(_0x5f1ced[_0x5c926d(0x260)]>0x0)_0x5f1ced[_0x5c926d(0x2d0)](_0xf26621=>{const _0x23d259=_0x5c926d,_0x39f42a=_0x42f0de[_0x23d259(0x21d)][_0x23d259(0x1d6)](config['basecoin']+'/');_0x49e8a1[_0x23d259(0x202)]({'datetime':_0xf26621[_0x23d259(0x336)],'coin':_0x42f0de['coin'],'symbol':_0x42f0de['symbol'],'side':_0xf26621['side'],'reverse':_0x39f42a,'amount':formatResult(_0xf26621[_0x23d259(0x1e4)],0x8),'filled':formatResult(_0xf26621[_0x23d259(0x1e4)],0x8),'price':formatResult(_0xf26621[_0x23d259(0x23f)],0x8)}),_0xcf48e6=_0xf26621['side']==_0x23d259(0x237)?_0xcf48e6+_0xf26621[_0x23d259(0x1e4)]:_0xcf48e6-_0xf26621['filled'];if(!_0x59ffe0)_0x59ffe0=_0xf26621[_0x23d259(0x23f)];});_0x24d19d=_0x42f0de['number']-_0xcf48e6;let _0x5a3ff4;config[_0x5c926d(0x332)][_0x5c926d(0x2d0)](_0x149e04=>{const _0xad11=_0x5c926d;!_0x5a3ff4&&(_0x5a3ff4=_0x149e04[_0xad11(0x379)][_0xad11(0x257)](_0x41f30b=>_0x41f30b[_0xad11(0x25e)]==_0x42f0de['coin']),_0x5a3ff4&&(_0x24d19d=_0x5a3ff4[_0xad11(0x23e)],_0x59ffe0=_0x5a3ff4['price']));});let _0x28538c=dbCoinResults[_0x5c926d(0x326)]('coins')[_0x5c926d(0x257)]({'coin':_0x42f0de[_0x5c926d(0x25e)]})[_0x5c926d(0x2b9)]();_0x28538c={'coin':_0x42f0de[_0x5c926d(0x25e)],'number':_0x24d19d,'breakeven':_0x59ffe0,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x5c926d(0x326)](_0x5c926d(0x1fd))[_0x5c926d(0x257)]({'coin':_0x42f0de[_0x5c926d(0x25e)]})[_0x5c926d(0x2e9)](_0x28538c)['write']();}}_0x49e8a1[_0x5c926d(0x2ab)]((_0x4ce507,_0x44c93f)=>_0x4ce507[_0x5c926d(0x336)]>_0x44c93f[_0x5c926d(0x336)]?0x1:_0x44c93f[_0x5c926d(0x336)]>_0x4ce507[_0x5c926d(0x336)]?-0x1:0x0);let _0x1e8937=0x0;for(let _0x24213c of _0x49e8a1){await updateCoinResults(_0x24213c,!![]);}}catch(_0x26fed4){await handleError(_0x26fed4,_0x5c926d(0x333));}}async function getAllEventOrders(_0x370d18){const _0x3b12d3=_0x224dcd;let _0x4d0b56=[],_0x4f6952=dbLogs[_0x3b12d3(0x326)]('logs')[_0x3b12d3(0x28d)](_0x1e3d15=>{const _0x1e8e8a=_0x3b12d3,_0x191212=_0x1e3d15[_0x1e8e8a(0x381)]['toLowerCase']();return _0x191212[_0x1e8e8a(0x1d6)](_0x370d18[_0x1e8e8a(0x311)]())&&(_0x191212['includes'](_0x1e8e8a(0x34a))&&_0x191212[_0x1e8e8a(0x1d6)]('order')||_0x191212[_0x1e8e8a(0x1d6)](_0x1e8e8a(0x1e4))&&_0x191212[_0x1e8e8a(0x1d6)]('order'));})[_0x3b12d3(0x1d5)](_0x3b12d3(0x243))[_0x3b12d3(0x2b9)]();return _0x4f6952[_0x3b12d3(0x2d0)](_0x5066d4=>{const _0x49a3ec=_0x3b12d3,_0x4b08c6=_0x5066d4[_0x49a3ec(0x381)][_0x49a3ec(0x1d6)](_0x49a3ec(0x322))?'sell':'buy',_0x1be040=/#([0-9]|\.)+\s/i,_0x274a89=Number(_0x1be040[_0x49a3ec(0x256)](_0x5066d4['event'])[0x0]['slice'](0x1)),_0x33da83=/@([0-9]|\.)+$/i,_0x3595d0=Number(_0x33da83['exec'](_0x5066d4[_0x49a3ec(0x381)])[0x0][_0x49a3ec(0x2fe)](0x1));_0x4d0b56[_0x49a3ec(0x202)]({'datetime':_0x5066d4[_0x49a3ec(0x243)],'coin':symbolToCoin(_0x370d18),'symbol':_0x370d18,'side':_0x4b08c6,'amount':_0x274a89,'filled':_0x274a89,'price':_0x3595d0});}),_0x4d0b56;}async function validate24hChanges(){const _0x351622=_0x224dcd;for(const _0x61a4c3 of currentCoins){if(_0x61a4c3[_0x351622(0x25e)]!=config[_0x351622(0x346)]){let _0x5334b5;_0x61a4c3[_0x351622(0x21f)]?_0x5334b5=formatResult((0x1/(gChange[_0x61a4c3['symbol']]/0x64+0x1)-0x1)*0x64,0x3):_0x5334b5=gChange[_0x61a4c3[_0x351622(0x21d)]],_0x5334b5<config['change24h']&&(logHistory(_0x351622(0x382),_0x61a4c3[_0x351622(0x25e)]+_0x351622(0x1ee)+_0x5334b5+'%'),logHistory(_0x351622(0x382),_0x351622(0x221)),logHistory(_0x351622(0x382),'Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again'),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x103b83,_0x4b0fcd){const _0x18a298=_0x224dcd;if(!_0x103b83)return!![];const _0x8af6c1=_0x4b0fcd[_0x18a298(0x1f2)]('.'),_0x4bff46=_0x103b83[_0x18a298(0x1f2)]('.');for(var _0x5241e3=0x0;_0x5241e3<_0x4bff46[_0x18a298(0x260)];_0x5241e3++){const _0x577fe3=~~_0x4bff46[_0x5241e3],_0xd5dfd1=~~_0x8af6c1[_0x5241e3];if(_0x577fe3<_0xd5dfd1)return!![];if(_0x577fe3>_0xd5dfd1)return![];}return![];}async function oneTimeMigration(){const _0x33bfba=_0x224dcd;let _0x285da6=dbLogs[_0x33bfba(0x326)](_0x33bfba(0x25d))[_0x33bfba(0x2b9)]();if(isOlderVersion(_0x285da6,_0x33bfba(0x2ca))){let _0xdab8ba=[];const _0x124d19=dbLogs[_0x33bfba(0x326)]('logs')[_0x33bfba(0x2b9)]();_0x124d19[_0x33bfba(0x2d0)](_0x5072be=>{const _0x110910=_0x33bfba;_0xdab8ba[_0x110910(0x202)]({'time':_0x5072be[_0x110910(0x243)],'type':_0x5072be[_0x110910(0x1f8)],'event':_0x5072be['event']});}),dbLogs['get']('logs')[_0x33bfba(0x2e9)](_0xdab8ba)['write']();}let _0x423173=dbConfig[_0x33bfba(0x326)](_0x33bfba(0x25d))[_0x33bfba(0x2b9)]();if(isOlderVersion(_0x423173,_0x33bfba(0x2ca))){let _0x10f1dc=dbConfig[_0x33bfba(0x326)](_0x33bfba(0x31b))[_0x33bfba(0x257)]({'botID':botID})[_0x33bfba(0x2b9)]();if(_0x10f1dc){let _0x31d3bd=[];_0x10f1dc[_0x33bfba(0x339)]['forEach'](_0x58f8dd=>{const _0x52d2f7=_0x33bfba;_0x31d3bd['push']({'coin':_0x58f8dd[_0x52d2f7(0x25e)],'number':_0x58f8dd['startnumber'],'price':_0x58f8dd['startprice']}),delete _0x58f8dd[_0x52d2f7(0x219)],delete _0x58f8dd[_0x52d2f7(0x297)];});if(_0x31d3bd[_0x33bfba(0x260)]!==0x0)fs[_0x33bfba(0x2be)](configbackuppath+(_0x33bfba(0x2e4)+botID+_0x33bfba(0x37a)),JSON[_0x33bfba(0x1b2)](_0x31d3bd,null,0x4),function(_0x4a49a9){if(_0x4a49a9){}});const _0x461ce2=(_0x3bccde,_0x27ba35)=>{const _0x17bd3c=_0x33bfba;let _0x4044e1=[];_0x27ba35[_0x17bd3c(0x2d0)](_0x43715d=>{const _0x4b329c=_0x17bd3c,_0x3feb5f=_0x3bccde['find'](_0x183ad0=>_0x183ad0[_0x4b329c(0x25e)]==_0x43715d[_0x4b329c(0x25e)]);if(!_0x3feb5f)_0x4044e1[_0x4b329c(0x202)](_0x43715d);});let _0x439fbe=[];return _0x3bccde[_0x17bd3c(0x2d0)](_0x487e83=>{const _0x1890e0=_0x17bd3c,_0xab7f61=_0x27ba35[_0x1890e0(0x257)](_0x3ba36b=>_0x3ba36b[_0x1890e0(0x25e)]==_0x487e83[_0x1890e0(0x25e)]);if(!_0xab7f61||_0xab7f61['number']==0x0&&_0x487e83[_0x1890e0(0x23e)]!=0x0)_0x439fbe['push'](_0x487e83);}),{'missingDay1':_0x4044e1,'notInDay2':_0x439fbe};},_0x382b82=dbPerformance[_0x33bfba(0x326)](_0x33bfba(0x328))['cloneDeep']()[_0x33bfba(0x2b9)]();if(_0x382b82[_0x33bfba(0x260)]>0x1){const {missingDay1:_0x7ca799,notInDay2:_0x21b6d9}=_0x461ce2(_0x31d3bd,_0x382b82[0x1]['coins']);_0x31d3bd=[..._0x31d3bd,..._0x7ca799],_0x21b6d9[_0x33bfba(0x2d0)](_0x4ba1aa=>{const _0x327f13=_0x33bfba;let _0x39f0fe=_0x31d3bd[_0x327f13(0x282)](_0x1139df=>_0x1139df[_0x327f13(0x25e)]==_0x4ba1aa['coin']);_0x39f0fe!=-0x1&&_0x31d3bd[_0x327f13(0x320)](_0x39f0fe,0x1);});}_0x31d3bd[_0x33bfba(0x2ab)]((_0x5a82a9,_0x39d1d2)=>_0x5a82a9[_0x33bfba(0x25e)]>_0x39d1d2[_0x33bfba(0x25e)]?0x1:_0x39d1d2[_0x33bfba(0x25e)]>_0x5a82a9['coin']?-0x1:0x0);let _0x54d840=[{'date':_0x10f1dc[_0x33bfba(0x249)],'changes':_0x31d3bd}];_0x382b82[_0x33bfba(0x260)]>0x2&&_0x382b82[_0x33bfba(0x2d0)]((_0x26bdab,_0x5b2b3f)=>{const _0x415f51=_0x33bfba;if(_0x5b2b3f>0x0&&_0x5b2b3f<_0x382b82[_0x415f51(0x260)]-0x1){const {missingDay1:_0x6efd31,notInDay2:_0x20fbc3}=_0x461ce2(_0x382b82[_0x5b2b3f]['coins'],_0x382b82[_0x5b2b3f+0x1][_0x415f51(0x1fd)]);_0x31d3bd=[],(_0x6efd31[_0x415f51(0x260)]!=0x0||_0x20fbc3[_0x415f51(0x260)]!=0x0)&&(_0x6efd31[_0x415f51(0x260)]!=0x0&&_0x31d3bd['push'](..._0x6efd31),_0x20fbc3[_0x415f51(0x260)]!=0x0&&(_0x20fbc3[_0x415f51(0x2d0)](_0xd7386=>{const _0x37e6a1=_0x415f51;_0xd7386[_0x37e6a1(0x23e)]=-_0xd7386['number'];}),_0x31d3bd['push'](..._0x20fbc3)),_0x31d3bd[_0x415f51(0x2ab)]((_0x440a10,_0x1a680d)=>_0x440a10[_0x415f51(0x25e)]>_0x1a680d[_0x415f51(0x25e)]?0x1:_0x1a680d[_0x415f51(0x25e)]>_0x440a10[_0x415f51(0x25e)]?-0x1:0x0),_0x54d840['push']({'date':_0x382b82[_0x5b2b3f+0x1]['date'],'changes':_0x31d3bd}));}}),dbConfig[_0x33bfba(0x326)](_0x33bfba(0x31b))[_0x33bfba(0x257)]({'botID':botID})['assign']({..._0x10f1dc,'liquidity':_0x54d840})[_0x33bfba(0x378)]();}}if(isOlderVersion(_0x423173,_0x33bfba(0x37d))){let _0x14e72f=dbConfig['get'](_0x33bfba(0x31b))[_0x33bfba(0x257)]({'botID':botID})[_0x33bfba(0x2b9)]();if(_0x14e72f){const _0x453a06=_0x14e72f[_0x33bfba(0x27b)],_0x2b3d12=_0x453a06?capitalize(_0x453a06):_0x33bfba(0x22c);dbConfig[_0x33bfba(0x326)]('bot')[_0x33bfba(0x257)]({'botID':botID})[_0x33bfba(0x2e9)]({'exchange':_0x2b3d12})[_0x33bfba(0x378)]();}}if(isOlderVersion(_0x423173,_0x33bfba(0x2f3))){let _0x5b3a3e=dbConfig[_0x33bfba(0x326)](_0x33bfba(0x31b))[_0x33bfba(0x257)]({'botID':botID})[_0x33bfba(0x2b9)]();if(_0x5b3a3e){const _0x1fcd8a=_0x5b3a3e['marketcapEnabled'],_0x3bf213=_0x1fcd8a?_0x33bfba(0x2e5):![];dbConfig[_0x33bfba(0x326)](_0x33bfba(0x31b))[_0x33bfba(0x257)]({'botID':botID})[_0x33bfba(0x2e9)]({'marketcapEnabled':_0x3bf213})[_0x33bfba(0x378)]();}}if(isOlderVersion(_0x423173,_0x33bfba(0x308))){let _0x5acfc3=dbConfig[_0x33bfba(0x326)](_0x33bfba(0x31b))[_0x33bfba(0x257)]({'botID':botID})[_0x33bfba(0x2b9)]();if(_0x5acfc3){const _0x27fb52=_0x5acfc3[_0x33bfba(0x1fe)],_0x366695=_0x27fb52?_0x33bfba(0x2ee):![];dbConfig['get'](_0x33bfba(0x31b))[_0x33bfba(0x257)]({'botID':botID})['assign']({'autoliquidity':_0x366695})[_0x33bfba(0x378)]();}}let _0x3fd6d5=dbPerformance[_0x33bfba(0x326)](_0x33bfba(0x25d))['value']();isOlderVersion(_0x3fd6d5,_0x33bfba(0x2ca))&&setStartDatePerformance();let _0x2358b3=dbCoinResults[_0x33bfba(0x326)](_0x33bfba(0x25d))[_0x33bfba(0x2b9)]();if(isOlderVersion(_0x2358b3,_0x33bfba(0x355))){let _0x22ea65=dbCoinResults['get'](_0x33bfba(0x1fd))[_0x33bfba(0x2b9)]();if(_0x22ea65[_0x33bfba(0x260)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x2f019b=_0x224dcd;dbConfig[_0x2f019b(0x372)]('version',serverversion)[_0x2f019b(0x378)](),dbPerformance[_0x2f019b(0x372)](_0x2f019b(0x25d),serverversion)[_0x2f019b(0x378)](),dbLogs[_0x2f019b(0x372)](_0x2f019b(0x25d),serverversion)['write'](),dbCoinResults[_0x2f019b(0x372)](_0x2f019b(0x25d),serverversion)[_0x2f019b(0x378)]();}function getConfiguration(_0x494299){const _0x3b5d18=_0x224dcd;let _0x251248=dbConfig[_0x3b5d18(0x326)](_0x3b5d18(0x31b))[_0x3b5d18(0x257)]({'botID':_0x494299})[_0x3b5d18(0x2b9)]();if(_0x251248){let _0x48b27c=![];typeof _0x251248[_0x3b5d18(0x2e7)]==_0x3b5d18(0x27f)&&(_0x251248={..._0x251248,'threshold':Number(_0x251248[_0x3b5d18(0x2e7)])},_0x48b27c=!![]),_0x251248[_0x3b5d18(0x2f0)]==undefined&&(_0x251248={..._0x251248,'change24h':-0x14},_0x48b27c=!![]),_0x251248[_0x3b5d18(0x2f1)]==undefined&&(_0x251248={..._0x251248,'fiat':_0x3b5d18(0x268)},_0x48b27c=!![]),_0x251248[_0x3b5d18(0x209)]==undefined&&(_0x251248={..._0x251248,'onepagemode':settings['onepagemode']},_0x48b27c=!![]),_0x251248[_0x3b5d18(0x210)]==undefined&&(_0x251248={..._0x251248,'colorscheme':'red_yellow_blue'},_0x48b27c=!![]),_0x251248[_0x3b5d18(0x1fe)]==undefined&&(_0x251248={..._0x251248,'autoliquidity':_0x3b5d18(0x2ee)},_0x48b27c=!![]),_0x251248['marketcapApi']==undefined&&(_0x251248={..._0x251248,'marketcapApi':settings[_0x3b5d18(0x324)]?!![]:![]},_0x48b27c=!![]),_0x251248[_0x3b5d18(0x2ae)]==undefined&&(_0x251248={..._0x251248,'marketcapEnabled':![]},_0x48b27c=!![]),_0x48b27c&&(_0x251248={'botID':_0x251248[_0x3b5d18(0x2a1)],'exchange':_0x251248[_0x3b5d18(0x27b)],'apiKey':_0x251248[_0x3b5d18(0x24c)],'apiSecret':_0x251248[_0x3b5d18(0x294)],'apiPassword':_0x251248['apiPassword'],'basecoin':_0x251248['basecoin'],'botname':_0x251248[_0x3b5d18(0x373)],'showname':_0x251248['showname'],'threshold':_0x251248[_0x3b5d18(0x2e7)],'ordertype':_0x251248[_0x3b5d18(0x23b)],'timeout':_0x251248[_0x3b5d18(0x25c)],'fiat':_0x251248['fiat'],'startdate':_0x251248[_0x3b5d18(0x249)],'recreate':_0x251248[_0x3b5d18(0x2cf)],'timeshift':_0x251248['timeshift'],'onepagemode':_0x251248['onepagemode'],'headless':_0x251248['headless'],'cooldown':_0x251248[_0x3b5d18(0x21a)],'change24h':_0x251248[_0x3b5d18(0x2f0)],'emojibuy':_0x251248[_0x3b5d18(0x1dc)],'emojisell':_0x251248[_0x3b5d18(0x287)],'colorscheme':_0x251248[_0x3b5d18(0x210)],'marketcapApi':_0x251248[_0x3b5d18(0x324)],'marketcapEnabled':_0x251248[_0x3b5d18(0x2ae)],'portfolio':_0x251248[_0x3b5d18(0x339)],'autoliquidity':_0x251248['autoliquidity'],'liquidity':_0x251248[_0x3b5d18(0x332)],'openOrders':_0x251248[_0x3b5d18(0x33d)]},dbConfig[_0x3b5d18(0x326)](_0x3b5d18(0x31b))[_0x3b5d18(0x263)]()['write'](),dbConfig['get']('bot')['push'](_0x251248)[_0x3b5d18(0x378)]());}else _0x251248={'botID':_0x494299,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x3b5d18(0x24e)+_0x494299,'showname':![],'threshold':0x3,'ordertype':_0x3b5d18(0x34a),'timeout':0x14,'fiat':_0x3b5d18(0x268),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x3b5d18(0x20a)],'onepagemode':settings[_0x3b5d18(0x209)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x3b5d18(0x27a),'marketcapApi':settings[_0x3b5d18(0x324)]?!![]:![],'marketcapEnabled':![],'portfolio':[],'autoliquidity':'update-liquidity','liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x251248;}function emittedConfiguration(){const _0x29618f=_0x224dcd;let _0x1aac9e;if(config[_0x29618f(0x24c)]=='')_0x1aac9e={...config,'configstate':_0x29618f(0x2a9)};else config['apiKey']==_0x29618f(0x2ea)?_0x1aac9e={...config,'configstate':_0x29618f(0x288)}:(_0x1aac9e={...config,'apiKey':_0x29618f(0x2f2),'apiSecret':_0x29618f(0x2f2)},config[_0x29618f(0x227)]&&(_0x1aac9e[_0x29618f(0x227)]=_0x29618f(0x2f2)));return _0x1aac9e['enableFiatToggle']=enableFiatToggle,_0x1aac9e;}function getSettings(){const _0x209881=_0x224dcd;return dbSettings[_0x209881(0x326)](_0x209881(0x1d7))[_0x209881(0x2b9)]();}function getSecure(){const _0x380101=_0x224dcd;return dbSecure['get'](_0x380101(0x2bb))['value']()||{};}function updateTimeshift(_0x57df98){const _0x5ee1ab=_0x224dcd;let _0x53929f=dbConfig[_0x5ee1ab(0x326)](_0x5ee1ab(0x31b))[_0x5ee1ab(0x257)]({'botID':botID})[_0x5ee1ab(0x2b9)]();_0x53929f&&dbConfig[_0x5ee1ab(0x326)](_0x5ee1ab(0x31b))[_0x5ee1ab(0x257)]({'botID':botID})[_0x5ee1ab(0x2e9)]({'timeshift':_0x57df98})[_0x5ee1ab(0x378)](),config[_0x5ee1ab(0x20a)]=_0x57df98,proxyEmit(_0x5ee1ab(0x238),emittedConfiguration());}function updateOnepagemode(_0x481596){const _0x408de7=_0x224dcd;let _0x40a90c=dbConfig[_0x408de7(0x326)](_0x408de7(0x31b))[_0x408de7(0x257)]({'botID':botID})[_0x408de7(0x2b9)]();_0x40a90c&&dbConfig[_0x408de7(0x326)](_0x408de7(0x31b))[_0x408de7(0x257)]({'botID':botID})[_0x408de7(0x2e9)]({'onepagemode':_0x481596})[_0x408de7(0x378)](),config[_0x408de7(0x209)]=_0x481596,proxyEmit(_0x408de7(0x238),emittedConfiguration());}function updateMarketcapApi(_0x34a500){const _0x3b408b=_0x224dcd,_0x4f64fe=_0x34a500?!![]:![];let _0x452bb9=dbConfig[_0x3b408b(0x326)](_0x3b408b(0x31b))[_0x3b408b(0x257)]({'botID':botID})[_0x3b408b(0x2b9)]();_0x452bb9&&dbConfig['get'](_0x3b408b(0x31b))[_0x3b408b(0x257)]({'botID':botID})[_0x3b408b(0x2e9)]({'marketcapApi':_0x4f64fe})['write'](),config[_0x3b408b(0x324)]=_0x4f64fe,getMarketCap(),proxyEmit('configuration',emittedConfiguration());}async function storeConfiguration(_0x5eb4eb){const _0x17268d=_0x224dcd;logger['debug'](_0x17268d(0x32c));let _0x140974=![];_0x5eb4eb[_0x17268d(0x20f)]&&(_0x5eb4eb[_0x17268d(0x20f)]=='recovery'&&(_0x140974=!![]),delete _0x5eb4eb['configstate']);if(pidBalances)clearTimeout(pidBalances);setBlockTransactionDetection(!![]);let _0x592a9c=![],_0x19d4a2=![],_0x230ff5=[];_0x5eb4eb[_0x17268d(0x339)][_0x17268d(0x2d0)](_0x3557f7=>{const _0x3f3c0b=_0x17268d;if(!_0x3557f7[_0x3f3c0b(0x2a3)]&&_0x3557f7[_0x3f3c0b(0x25e)]!=_0x5eb4eb[_0x3f3c0b(0x346)])_0x230ff5[_0x3f3c0b(0x202)](_0x3557f7[_0x3f3c0b(0x21d)]);}),_0x230ff5[_0x17268d(0x2d0)](_0xea3189=>{const _0xaf610=_0x17268d,_0x5e1cdb=currentCoins[_0xaf610(0x257)](_0xe07fc0=>_0xe07fc0[_0xaf610(0x21d)]==_0xea3189);!_0x5e1cdb&&(_0x592a9c=!![]);}),currentCoins[_0x17268d(0x2d0)](_0x124e89=>{const _0x20072b=_0x17268d;if(_0x124e89[_0x20072b(0x25e)]!=config[_0x20072b(0x346)]){const _0x2b37a0=_0x230ff5[_0x20072b(0x257)](_0x574a09=>_0x574a09==_0x124e89[_0x20072b(0x21d)]);!_0x2b37a0&&(_0x592a9c=!![]);}}),_0x5eb4eb[_0x17268d(0x339)][_0x17268d(0x2d0)](_0x565061=>{const _0xc1f15d=_0x17268d,_0x37a7bd=config['portfolio'][_0xc1f15d(0x257)](_0xfd1bb=>_0xfd1bb[_0xc1f15d(0x25e)]==_0x565061[_0xc1f15d(0x25e)]);if(_0x37a7bd&&_0x565061[_0xc1f15d(0x20d)]!=_0x37a7bd[_0xc1f15d(0x20d)])_0x19d4a2=!![];});let _0x252ab8=dbConfig['get'](_0x17268d(0x31b))[_0x17268d(0x257)]({'botID':botID})[_0x17268d(0x2b9)]();_0x5eb4eb={..._0x5eb4eb,'apiKey':decryptRSA(secure[_0x17268d(0x1da)],_0x5eb4eb[_0x17268d(0x24c)]),'apiSecret':decryptRSA(secure[_0x17268d(0x1da)],_0x5eb4eb[_0x17268d(0x294)])};_0x5eb4eb['apiPassword']&&(_0x5eb4eb[_0x17268d(0x227)]=decryptRSA(secure['privateKey'],_0x5eb4eb[_0x17268d(0x227)]));let _0x3a87e2=![];if(_0x252ab8){_0x5eb4eb[_0x17268d(0x24c)]==_0x17268d(0x2f2)?_0x5eb4eb[_0x17268d(0x24c)]=config[_0x17268d(0x24c)]:_0x3a87e2=!![];_0x5eb4eb[_0x17268d(0x294)]=='************'?_0x5eb4eb[_0x17268d(0x294)]=config[_0x17268d(0x294)]:_0x3a87e2=!![];if(_0x5eb4eb[_0x17268d(0x227)]==_0x17268d(0x2f2))_0x5eb4eb[_0x17268d(0x227)]=config[_0x17268d(0x227)];else{if(_0x5eb4eb[_0x17268d(0x227)])_0x3a87e2=!![];}dbConfig[_0x17268d(0x326)]('bot')[_0x17268d(0x257)]({'botID':botID})[_0x17268d(0x2e9)](_0x5eb4eb)[_0x17268d(0x378)]();}else dbConfig[_0x17268d(0x326)]('bot')[_0x17268d(0x202)](_0x5eb4eb)['write'](),_0x3a87e2=!![],process[_0x17268d(0x1fc)]({'status':_0x17268d(0x28b),'live':_0x17268d(0x1f5)},_0x111ad6=>{});process[_0x17268d(0x1fc)]({'botname':_0x5eb4eb[_0x17268d(0x373)]},_0x276173=>{}),config={..._0x5eb4eb},updateBotManager(),proxyEmit(_0x17268d(0x271)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x3a87e2)!_0x252ab8||_0x140974?await reset(!![]):getBalances();else _0x592a9c||_0x19d4a2?await reset(![]):getBalances();setBlockTransactionDetection(![]);}async function storeHeadless(_0x241705){const _0x31f609=_0x224dcd,_0xb12c6e={...config,'headless':_0x241705[_0x31f609(0x2ce)]};let _0x30e929=dbConfig['get'](_0x31f609(0x31b))['find']({'botID':botID})[_0x31f609(0x2b9)]();_0x30e929&&dbConfig[_0x31f609(0x326)](_0x31f609(0x31b))[_0x31f609(0x257)]({'botID':botID})[_0x31f609(0x2e9)](_0xb12c6e)[_0x31f609(0x378)](),config={..._0xb12c6e},updateBotManager(),proxyEmit(_0x31f609(0x238),emittedConfiguration());}async function storeFiat(_0x74a87){const _0xd85338=_0x224dcd,_0x3b7506={...config,'fiat':_0x74a87};let _0x16635c=dbConfig[_0xd85338(0x326)]('bot')['find']({'botID':botID})[_0xd85338(0x2b9)]();_0x16635c&&dbConfig[_0xd85338(0x326)](_0xd85338(0x31b))[_0xd85338(0x257)]({'botID':botID})[_0xd85338(0x2e9)](_0x3b7506)[_0xd85338(0x378)](),config={..._0x3b7506},proxyEmit(_0xd85338(0x238),emittedConfiguration());}function resetHistory(){const _0x2e0bb1=_0x224dcd;logger[_0x2e0bb1(0x1ba)](_0x2e0bb1(0x314));try{if(fs[_0x2e0bb1(0x334)](path['join'](configpath,_0x2e0bb1(0x207)+botID+_0x2e0bb1(0x2f5))))fs[_0x2e0bb1(0x292)](path[_0x2e0bb1(0x1cc)](configpath,_0x2e0bb1(0x207)+botID+_0x2e0bb1(0x2f5)));if(fs[_0x2e0bb1(0x334)](path[_0x2e0bb1(0x1cc)](configpath,_0x2e0bb1(0x207)+botID+_0x2e0bb1(0x286))))fs[_0x2e0bb1(0x292)](path[_0x2e0bb1(0x1cc)](configpath,_0x2e0bb1(0x207)+botID+_0x2e0bb1(0x286)));if(fs[_0x2e0bb1(0x334)](path[_0x2e0bb1(0x1cc)](configpath,_0x2e0bb1(0x207)+botID+_0x2e0bb1(0x284))))fs[_0x2e0bb1(0x292)](path['join'](configpath,_0x2e0bb1(0x207)+botID+_0x2e0bb1(0x284)));}catch(_0x2b6746){if(_0x2b6746)logger[_0x2e0bb1(0x1ba)](_0x2e0bb1(0x375),_0x2b6746);}const _0x5df975=getDate();let _0x51c73a=[];currentCoins[_0x2e0bb1(0x2d0)](_0x5970e4=>{const _0x56af63=_0x2e0bb1;_0x51c73a['push']({'coin':_0x5970e4[_0x56af63(0x25e)],'number':_0x5970e4['number'],'price':_0x5970e4['last']});});let _0x3f46aa=dbConfig[_0x2e0bb1(0x326)](_0x2e0bb1(0x31b))[_0x2e0bb1(0x257)]({'botID':botID})[_0x2e0bb1(0x2b9)]();_0x3f46aa&&(dbConfig[_0x2e0bb1(0x326)]('bot')[_0x2e0bb1(0x257)]({'botID':botID})[_0x2e0bb1(0x2e9)]({'liquidity':[{'date':_0x5df975,'changes':_0x51c73a}]})[_0x2e0bb1(0x378)](),config['liquidity']=[]),restartBot(!![]);}function noslash(_0x21dbdf){const _0x4fb68e=_0x224dcd;return _0x21dbdf[_0x4fb68e(0x267)]('/','');}function updateHighestFee(_0x1edbe9){const _0x5323cf=_0x224dcd;if(_0x1edbe9[_0x5323cf(0x21f)]){let _0x33769e={'filled':_0x1edbe9['filled']*_0x1edbe9[_0x5323cf(0x23f)],'amount':_0x1edbe9[_0x5323cf(0x1e4)]*_0x1edbe9[_0x5323cf(0x23f)],'side':_0x1edbe9['side']==_0x5323cf(0x322)?_0x5323cf(0x237):_0x5323cf(0x322),'price':0x1/_0x1edbe9[_0x5323cf(0x23f)]};_0x1edbe9={..._0x1edbe9,..._0x33769e};}const _0x42787a=defaultFee*_0x1edbe9[_0x5323cf(0x1e4)]*_0x1edbe9[_0x5323cf(0x23f)];lastFees[_0x5323cf(0x361)][_0x5323cf(0x260)]===0x14&&lastFees['recent20'][_0x5323cf(0x2f8)](),lastFees[_0x5323cf(0x361)]['push'](_0x42787a),lastFees['highest']=Math[_0x5323cf(0x36a)](...lastFees[_0x5323cf(0x361)]);}async function updateNumberCoinsCcxt(_0x5e4c31){const _0x272aaf=_0x224dcd;logger[_0x272aaf(0x1d3)]('0\x20-\x20EXECUTION:\x20'+_0x5e4c31[_0x272aaf(0x21d)]+_0x272aaf(0x208)+_0x5e4c31[_0x272aaf(0x1ec)]+'\x20|\x20'+_0x5e4c31[_0x272aaf(0x1e4)]+'\x20/\x20'+_0x5e4c31[_0x272aaf(0x252)]+'\x20|\x20'+_0x5e4c31['id']);let _0x3e5db2=_0x5e4c31[_0x272aaf(0x1ec)],_0x422e0e=![];currentCoins[_0x272aaf(0x2d0)](_0x5d460e=>{const _0x38e1c5=_0x272aaf;_0x5d460e[_0x38e1c5(0x21d)]==_0x5e4c31[_0x38e1c5(0x21d)]&&(_0x422e0e=!![]);});if(!_0x422e0e)return;const _0x1cf6de=currentCoins[_0x272aaf(0x257)](_0x487cb9=>_0x487cb9[_0x272aaf(0x21d)]==_0x5e4c31[_0x272aaf(0x21d)]),_0x524394=_0x1cf6de['coin'],_0x10af09=_0xe0db0a=>{const _0x52c584=_0x272aaf,_0x42a5a8=currentCoins[_0x52c584(0x257)](_0x2c165e=>_0x2c165e['symbol']==_0x5e4c31['symbol']);if(_0x42a5a8)_0x42a5a8[_0x52c584(0x1e7)]=_0xe0db0a;};let _0x1c23e3=![];for(const _0x3bf01d of lastOrders){const _0x585971=0x64,_0x3348dc=0x1388;let _0x4199f4=0x0;while(!_0x3bf01d[_0x272aaf(0x1d9)]&&_0x4199f4*_0x585971<_0x3348dc){_0x4199f4++,await sleep(_0x585971);}if(_0x4199f4>0x0)logger[_0x272aaf(0x1d3)](_0x272aaf(0x325)+_0x4199f4*_0x585971/0x3e8+_0x272aaf(0x2db));_0x3bf01d['orderId']==_0x5e4c31['id']&&(_0x1c23e3=!![]);}if(_0x3e5db2==_0x272aaf(0x1c5)){_0x10af09('open');if(_0x5e4c31[_0x272aaf(0x1e4)]>0x0&&_0x5e4c31[_0x272aaf(0x1e4)]<_0x5e4c31[_0x272aaf(0x252)]){if(_0x1c23e3){setBlockTransactionDetection(!![]),logger[_0x272aaf(0x1d3)]('1\x20-\x20partially\x20FILLED\x20('+_0x5e4c31[_0x272aaf(0x1e4)]+')\x20known\x20order:\x20'+_0x5e4c31['id']);const _0x263be5=await getCoins(balanceUpdateDelay,undefined,undefined,_0x524394);[currentCoins,currentCoinsAll]=_0x263be5,setBlockTransactionDetection(![]);}else logger[_0x272aaf(0x1d3)](_0x272aaf(0x33c)+_0x5e4c31[_0x272aaf(0x1e4)]+')\x20unknown\x20order:\x20'+_0x5e4c31['id']),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay);}}else{if(_0x3e5db2==_0x272aaf(0x272)){_0x10af09(_0x272aaf(0x272)),lastOrders=lastOrders[_0x272aaf(0x28d)](_0x25f949=>_0x25f949[_0x272aaf(0x21d)]!=_0x5e4c31['symbol']);const _0x2feaaa=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x2feaaa,setBlockTransactionDetection(![]),await getOpenOrders(),handleOpenOrders();}else{if(_0x3e5db2==_0x272aaf(0x1e0)){if(lastOrders)for(const _0x10b0d5 of lastOrders){if(_0x10b0d5['orderId']==_0x5e4c31['id']){logger['debug'](_0x272aaf(0x366)+_0x5e4c31['id']),_0x1c23e3=!![];if(_0x10b0d5['filled']==0x0){setBlockTransactionDetection(!![]),logger[_0x272aaf(0x1d3)](_0x272aaf(0x374)+_0x5e4c31['id']);if(_0x5e4c31[_0x272aaf(0x37e)])_0x10b0d5[_0x272aaf(0x23f)]=_0x5e4c31['average'];else{if(_0x5e4c31[_0x272aaf(0x23f)])_0x10b0d5[_0x272aaf(0x23f)]=_0x5e4c31[_0x272aaf(0x23f)];else{}}_0x10b0d5[_0x272aaf(0x1e4)]=_0x5e4c31[_0x272aaf(0x1e4)],updateHighestFee(_0x10b0d5);const _0x4d99cf=await getCoins(balanceUpdateDelay,undefined,undefined,_0x524394);[currentCoins,currentCoinsAll]=_0x4d99cf,setBlockTransactionDetection(![]),await validateOrders(),_0x10af09(_0x272aaf(0x1e4)),_0x10b0d5[_0x272aaf(0x2de)]={'currency':_0x5e4c31['fee']?_0x5e4c31[_0x272aaf(0x2de)][_0x272aaf(0x2a7)]:null,'cost':_0x5e4c31['fee']?_0x5e4c31[_0x272aaf(0x2de)]['cost']:0x0},await updateCoinResults(_0x10b0d5);}}}!_0x1c23e3&&(logger[_0x272aaf(0x1d3)](_0x272aaf(0x206)+_0x5e4c31['id']),_0x10af09(_0x272aaf(0x1e4)),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay),await updateOpenOrders(),handleOpenOrders());}}}if(lastBalances){let _0x289e0a=JSON[_0x272aaf(0x1ca)](lastBalances[_0x272aaf(0x339)]);const _0x5aa715=_0x289e0a[_0x272aaf(0x257)](_0x44c4fb=>_0x44c4fb['symbol']==_0x5e4c31['symbol']);if(_0x5aa715){if(_0x3e5db2==_0x272aaf(0x1c5))_0x5aa715[_0x272aaf(0x1e7)]=_0x5aa715['orderstatus']==_0x272aaf(0x1e4)?_0x272aaf(0x1e4):_0x272aaf(0x1c5);else{if(_0x3e5db2==_0x272aaf(0x272))_0x5aa715[_0x272aaf(0x1e7)]=_0x5aa715[_0x272aaf(0x1e7)]==_0x272aaf(0x1e4)?_0x272aaf(0x1e4):_0x272aaf(0x272);else _0x3e5db2=='closed'&&(_0x5aa715['orderstatus']=_0x272aaf(0x1e4));}}lastBalances={...lastBalances,'portfolio':JSON[_0x272aaf(0x1b2)](_0x289e0a)},proxyEmit(_0x272aaf(0x279),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x50d45c=_0x224dcd;await getOpenOrders();let _0x24df35=![];currentCoins[_0x50d45c(0x2d0)](_0x1f0232=>{const _0x262300=_0x50d45c;_0x24df35=allOpenOrders[_0x262300(0x257)](_0x3af3fa=>_0x3af3fa[_0x262300(0x21d)]==_0x1f0232[_0x262300(0x21d)]),_0x1f0232[_0x262300(0x1e7)]=_0x24df35?_0x262300(0x1c5):'none';});}async function fetchBalance(_0x37b067=!![]){const _0x5fba7f=_0x224dcd;let _0x10ab43,_0x1a7f4a;try{return _0x10ab43=await exchange[_0x5fba7f(0x269)](),_0x1a7f4a=_0x10ab43['total'],_0x1a7f4a;}catch(_0x1aaaee){return!_0x37b067?handleErrorNoStop(_0x1aaaee,_0x5fba7f(0x2d7)):await handleError(_0x1aaaee,'fetchBalance()'),![];}}async function getCoins(_0x4ea65f=0x0,_0x485217=!![],_0x52d826=config[_0x224dcd(0x346)],_0x15b7b6){const _0x2b4d68=_0x224dcd;let _0x2e0095=[],_0x51d75a=[],_0x35e684=[],_0x40f66a;if(_0x4ea65f)await sleep(_0x4ea65f);if(botPaused)return[currentCoins,currentCoinsAll];let _0x1ac270=![],_0x2c1e89=0x0,_0x52fd26,_0x2ad390;_0x15b7b6&&(_0x52fd26=currentCoins[_0x2b4d68(0x257)](_0xc6a103=>_0xc6a103['coin']==_0x15b7b6),_0x52fd26&&(_0x2ad390=_0x52fd26['prevnumber'],delete _0x52fd26['prevnumber']));while(!_0x1ac270){_0x40f66a=await fetchBalance(_0x485217);if(_0x40f66a){if(_0x15b7b6){if(_0x40f66a[_0x15b7b6]!=_0x2ad390)logger['debug'](_0x2b4d68(0x222)+_0x15b7b6+':\x20'+_0x40f66a[_0x15b7b6]+'\x20('+_0x2ad390+')'),_0x1ac270=!![];else{logger[_0x2b4d68(0x1d3)](_0x2b4d68(0x261)+_0x15b7b6+':\x20'+_0x40f66a[_0x15b7b6]+'\x20('+_0x2ad390+')'),_0x2c1e89++;if(_0x2c1e89<balanceUpdateRetries)await sleep(balanceUpdateDelay);else{logger['debug'](_0x2b4d68(0x239)+_0x2c1e89+_0x2b4d68(0x1ea));break;}}}else break;}else return[currentCoins,currentCoinsAll];}for(const [_0xd425b5,_0xf32dae]of Object[_0x2b4d68(0x21c)](_0x40f66a)){_0x35e684[_0x2b4d68(0x202)](_0xd425b5);}config[_0x2b4d68(0x339)][_0x2b4d68(0x2d0)](_0x3083a0=>{const _0x210c20=_0x2b4d68;!_0x35e684[_0x210c20(0x1d6)](_0x3083a0[_0x210c20(0x25e)])&&(_0x40f66a[_0x3083a0[_0x210c20(0x25e)]]=0x0);});if(_0x52d826=='')for(const [_0xc78bd,_0x453290]of Object[_0x2b4d68(0x21c)](_0x40f66a)){_0x453290!=0x0&&_0x2e0095[_0x2b4d68(0x202)]({'coin':_0xc78bd});}else for(const [_0x949733,_0x653b1c]of Object[_0x2b4d68(0x21c)](_0x40f66a)){const _0xcc029a=config['portfolio'][_0x2b4d68(0x257)](_0x3ce0f1=>_0x3ce0f1[_0x2b4d68(0x25e)]==_0x949733),_0x22039b=_0x949733+'/'+_0x52d826,_0x249844=_0x52d826+'/'+_0x949733,_0x350556=currentCoins[_0x2b4d68(0x257)](_0x439e00=>_0x439e00[_0x2b4d68(0x25e)]==_0x949733);if((_0x653b1c!=0x0||_0xcc029a)&&(allSymbols[_0x2b4d68(0x1d6)](_0x22039b)||_0x949733==_0x52d826))_0x350556?_0x2e0095[_0x2b4d68(0x202)]({..._0x350556,'number':Math[_0x2b4d68(0x36a)](_0x653b1c+(_0xcc029a&&_0xcc029a[_0x2b4d68(0x20d)]||0x0),0x0)}):_0x2e0095[_0x2b4d68(0x202)]({'coin':_0x949733,'symbol':_0x22039b,'reverse':![],'number':Math[_0x2b4d68(0x36a)](_0x653b1c+(_0xcc029a&&_0xcc029a['offset']||0x0),0x0),'orderstatus':'none'});else{if((_0x653b1c!=0x0||_0xcc029a)&&allSymbols[_0x2b4d68(0x1d6)](_0x249844))_0x350556?_0x2e0095[_0x2b4d68(0x202)]({..._0x350556,'number':Math[_0x2b4d68(0x36a)](_0x653b1c+(_0xcc029a&&_0xcc029a[_0x2b4d68(0x20d)]||0x0),0x0)}):_0x2e0095[_0x2b4d68(0x202)]({'coin':_0x949733,'symbol':_0x249844,'reverse':!![],'number':Math[_0x2b4d68(0x36a)](_0x653b1c+(_0xcc029a&&_0xcc029a['offset']||0x0),0x0),'orderstatus':'none'});else _0xcc029a&&_0x2e0095[_0x2b4d68(0x202)]({'coin':_0xcc029a['coin'],'symbol':_0xcc029a[_0x2b4d68(0x21d)],'reverse':_0xcc029a[_0x2b4d68(0x21f)],'number':0x0,'orderstatus':'none'});}}return _0x2e0095['sort']((_0x186d36,_0x18eea7)=>_0x186d36['delta']<_0x18eea7['delta']?0x1:_0x18eea7['delta']<_0x186d36['delta']?-0x1:0x0),_0x51d75a=cloneDeep(_0x2e0095),_0x2e0095=_0x2e0095[_0x2b4d68(0x28d)](_0x24aa2a=>{const _0x1bca5f=_0x2b4d68,_0x9416a9=config[_0x1bca5f(0x339)]['find'](_0x3a6995=>_0x3a6995['coin']==_0x24aa2a['coin']);return _0x9416a9&&!_0x9416a9[_0x1bca5f(0x2a3)];}),[_0x2e0095,_0x51d75a];}async function getCoinNumber(_0x1ddc9e){const _0x3fd8c3=_0x224dcd;let _0x3d6e00;try{const _0xb64df9=await exchange[_0x3fd8c3(0x269)]();_0x3d6e00=_0xb64df9[_0x3fd8c3(0x2dc)][_0x1ddc9e];}catch(_0x1e72de){await handleError(_0x1e72de,_0x3fd8c3(0x2a8));}return _0x3d6e00;}async function getOpenOrders(){const _0x3df3eb=_0x224dcd;let _0x59b9cf;allOpenOrders=[];try{for(const _0x508b8d of config[_0x3df3eb(0x339)]){!_0x508b8d[_0x3df3eb(0x2a3)]&&_0x508b8d['coin']!=config[_0x3df3eb(0x346)]&&(_0x59b9cf=await exchange[_0x3df3eb(0x384)](_0x508b8d[_0x3df3eb(0x21d)]),_0x59b9cf[_0x3df3eb(0x260)]>0x0&&allOpenOrders['push'](_0x59b9cf[0x0]));}}catch(_0x3e50a1){await handleError(_0x3e50a1,_0x3df3eb(0x233));}}async function handleOpenOrders(_0x582507=0x0){const _0x1e3ebb=_0x224dcd;allOpenOrders[_0x1e3ebb(0x260)]==0x0&&lockOrders==ORDERS['LOCKED']&&allOrdersPlaced&&(_0x582507==0x0?(logger[_0x1e3ebb(0x1d3)](_0x1e3ebb(0x1af)),_0x582507++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x1e3ebb(0x1d3)](_0x1e3ebb(0x298)),validateOrders('no\x20open\x20orders')));}async function testAPI(_0x2220a5){const _0x30e274=_0x224dcd;logger[_0x30e274(0x1d3)](_0x30e274(0x212));const _0x3ff349=ccxt[_0x30e274(0x1e9)][_0x2220a5[_0x30e274(0x27b)]['toLowerCase']()],_0xeb7cdc=new _0x3ff349({'apiKey':_0x2220a5[_0x30e274(0x24c)],'secret':_0x2220a5[_0x30e274(0x294)],'options':{'defaultType':'spot'}});if(_0x2220a5[_0x30e274(0x227)])_0xeb7cdc[_0x30e274(0x1bb)]=_0x2220a5[_0x30e274(0x227)];try{await _0xeb7cdc[_0x30e274(0x269)]();}catch(_0x55bc32){logger[_0x30e274(0x1d3)](_0x30e274(0x364)+_0x55bc32['toString']());throw _0x55bc32;}}function cloneDeep(_0x464743){const _0xeb70ee=_0x224dcd;return JSON[_0xeb70ee(0x1ca)](JSON[_0xeb70ee(0x1b2)](_0x464743));}async function getPortfolio(_0x200b9e){const _0x1f7567=_0x224dcd;let _0x291279=[],_0x59a4e5=[],_0x206fb1=[],_0x3d3018;_0x200b9e[_0x1f7567(0x24c)]=decryptRSA(secure[_0x1f7567(0x1da)],_0x200b9e[_0x1f7567(0x24c)]),_0x200b9e[_0x1f7567(0x294)]=decryptRSA(secure[_0x1f7567(0x1da)],_0x200b9e[_0x1f7567(0x294)]);if(_0x200b9e[_0x1f7567(0x227)])_0x200b9e[_0x1f7567(0x227)]=decryptRSA(secure[_0x1f7567(0x1da)],_0x200b9e[_0x1f7567(0x227)]);if(_0x200b9e['apiKey']!==_0x1f7567(0x2f2)||_0x200b9e[_0x1f7567(0x294)]!==_0x1f7567(0x2f2)||_0x200b9e[_0x1f7567(0x227)]&&_0x200b9e[_0x1f7567(0x227)]!==_0x1f7567(0x2f2)){if(config['exchange']){if(_0x200b9e[_0x1f7567(0x24c)]==_0x1f7567(0x2f2))_0x200b9e['apiKey']=config['apiKey'];if(_0x200b9e[_0x1f7567(0x294)]==_0x1f7567(0x2f2))_0x200b9e['apiSecret']=config['apiSecret'];if(_0x200b9e[_0x1f7567(0x227)]==_0x1f7567(0x2f2))_0x200b9e['apiPassword']=config['apiPassword'];}try{if(_0x200b9e[_0x1f7567(0x253)])await testAPI(_0x200b9e);}catch(_0x1780a4){if(_0x1780a4[_0x1f7567(0x356)]()[_0x1f7567(0x1d6)]('AuthenticationError')){logHistory('error',_0x1f7567(0x357)),logHistory(_0x1f7567(0x382),_0x1f7567(0x276)+_0x1780a4[_0x1f7567(0x356)]()),proxyEmit(_0x1f7567(0x303),![]);return;}else{if(_0x1780a4['toString']()[_0x1f7567(0x1d6)](_0x1f7567(0x318))){logHistory(_0x1f7567(0x382),_0x1f7567(0x1df)),logHistory(_0x1f7567(0x382),'Error\x20details:\x20'+_0x1780a4[_0x1f7567(0x356)]()),proxyEmit(_0x1f7567(0x303),![]);return;}else{logHistory(_0x1f7567(0x382),_0x1f7567(0x244)+_0x1780a4[_0x1f7567(0x356)]()),logger[_0x1f7567(0x1d3)]('Error\x20details:',_0x1780a4),proxyEmit('portfolio1',![]);return;}}}exchange?updateExchange(_0x200b9e[_0x1f7567(0x24c)],_0x200b9e[_0x1f7567(0x294)],_0x200b9e['apiPassword']):await initExchange(_0x200b9e[_0x1f7567(0x27b)],_0x200b9e[_0x1f7567(0x24c)],_0x200b9e[_0x1f7567(0x294)],_0x200b9e[_0x1f7567(0x227)]);await loadSymbols();const _0x33b289=await getCoins(0x0,![],_0x200b9e['basecoin']);_0x206fb1=cloneDeep(_0x33b289[0x1]);}else{const _0x533238=await getCoins();_0x206fb1=cloneDeep(_0x533238[0x1]);}if(_0x200b9e['basecoin']=='')proxyEmit(_0x1f7567(0x303),!![]),proxyEmit(_0x1f7567(0x26b),_0x206fb1);else{_0x206fb1['forEach'](_0x10079a=>{const _0x25f29a=_0x1f7567;if(_0x10079a[_0x25f29a(0x25e)]!=_0x200b9e[_0x25f29a(0x346)]&&allSymbols[_0x25f29a(0x1d6)](_0x10079a[_0x25f29a(0x21d)]))_0x291279[_0x25f29a(0x202)](_0x10079a[_0x25f29a(0x21d)]);});if(_0x291279[_0x1f7567(0x260)]==0x0)logHistory(_0x1f7567(0x382),_0x1f7567(0x220));else{try{_0x59a4e5=await getTickers(_0x291279);}catch(_0xec8aa7){logHistory(_0x1f7567(0x382),_0x1f7567(0x2bf)),logger[_0x1f7567(0x1d3)](_0x1f7567(0x31c),_0xec8aa7),proxyEmit(_0x1f7567(0x303),![]);return;}_0x206fb1['forEach'](_0x4d8682=>{const _0xea007b=_0x1f7567;_0x4d8682[_0xea007b(0x25e)]!=_0x200b9e[_0xea007b(0x346)]?_0x59a4e5[_0x4d8682[_0xea007b(0x21d)]]?_0x3d3018=_0x4d8682['reverse']?0x1/_0x59a4e5[_0x4d8682[_0xea007b(0x21d)]][_0xea007b(0x31d)]:_0x59a4e5[_0x4d8682[_0xea007b(0x21d)]][_0xea007b(0x31d)]:_0x3d3018=0x0:_0x3d3018=0x1,_0x4d8682['price']=formatResult(_0x3d3018,0x8);}),await getMarketCap(_0x206fb1),proxyEmit('portfolio1',!![]),proxyEmit(_0x1f7567(0x26b),_0x206fb1);}}}function truncateTradeAmount(_0x5cbc30,_0x534c21){const _0x386cee=_0x224dcd;let _0x44b18f=0x0;try{_0x44b18f=exchange[_0x386cee(0x23c)](_0x5cbc30,_0x534c21);}catch(_0x41e312){}return _0x44b18f;}function checkMinimums(_0x55d059){const _0x23b4e2=_0x224dcd;let _0x5d3503=!![];const _0x447d65=!_0x55d059[_0x23b4e2(0x21f)]?markets[_0x55d059[_0x23b4e2(0x21d)]][_0x23b4e2(0x1b4)]['amount'][_0x23b4e2(0x306)]:markets[_0x55d059['symbol']][_0x23b4e2(0x1b4)][_0x23b4e2(0x270)][_0x23b4e2(0x306)],_0x377e47=!_0x55d059['reverse']?markets[_0x55d059['symbol']]['limits'][_0x23b4e2(0x270)]['min']:markets[_0x55d059[_0x23b4e2(0x21d)]][_0x23b4e2(0x1b4)][_0x23b4e2(0x252)]['min'],_0x4cdab6=truncateTradeAmount(_0x55d059['symbol'],_0x55d059[_0x23b4e2(0x245)]);_0x55d059[_0x23b4e2(0x245)]=_0x4cdab6;if(Math[_0x23b4e2(0x32b)](_0x4cdab6)<_0x447d65)_0x5d3503=![];if(Math['abs'](_0x4cdab6)*_0x55d059['last']<_0x377e47)_0x5d3503=![];if(_0x55d059['side']=='sell'){let _0x23ace9=config['portfolio'][_0x23b4e2(0x257)](_0x120a3b=>_0x120a3b['coin']==_0x55d059[_0x23b4e2(0x25e)]);if(_0x23ace9[_0x23b4e2(0x20d)]>0x0){if(Math[_0x23b4e2(0x32b)](_0x4cdab6)>_0x55d059[_0x23b4e2(0x23e)]-_0x23ace9[_0x23b4e2(0x20d)])_0x5d3503=![];}else{if(Math[_0x23b4e2(0x32b)](_0x4cdab6)>_0x55d059['number'])_0x5d3503=![];}}if(_0x55d059[_0x23b4e2(0x1c0)]==_0x23b4e2(0x237)){let _0x5677f3=config[_0x23b4e2(0x339)][_0x23b4e2(0x257)](_0x39c044=>_0x39c044[_0x23b4e2(0x25e)]==config[_0x23b4e2(0x346)]),_0x25288b=currentCoins[_0x23b4e2(0x257)](_0x3ca5ca=>_0x3ca5ca[_0x23b4e2(0x25e)]==config['basecoin']);if(_0x5677f3[_0x23b4e2(0x20d)]>0x0){if(Math[_0x23b4e2(0x32b)](_0x4cdab6)*_0x55d059[_0x23b4e2(0x31d)]>_0x25288b['number']-_0x5677f3[_0x23b4e2(0x20d)])_0x5d3503=![];}else{if(Math[_0x23b4e2(0x32b)](_0x4cdab6)*_0x55d059[_0x23b4e2(0x31d)]>_0x25288b[_0x23b4e2(0x23e)])_0x5d3503=![];}}return _0x5d3503;}async function getBalances(_0x297106=!![]){const _0x3c3624=_0x224dcd;if(botPaused)return;let _0x5b516a=0x0,_0x50fdec;const _0x2f7698=config[_0x3c3624(0x2e7)];if(config[_0x3c3624(0x2ce)]&&config[_0x3c3624(0x2f0)]<0x0)await validate24hChanges();currentCoins['forEach'](_0x52ea78=>{const _0x1615fe=_0x3c3624;if(_0x52ea78[_0x1615fe(0x25e)]!=config['basecoin']){let _0x3d1688=gTicker[noslash(_0x52ea78[_0x1615fe(0x21d)])];_0x50fdec=_0x52ea78[_0x1615fe(0x21f)]?0x1/_0x3d1688:_0x3d1688;}else _0x50fdec=0x1;let _0x1a54cc=_0x52ea78[_0x1615fe(0x23e)]*_0x50fdec;_0x5b516a+=_0x1a54cc,_0x52ea78[_0x1615fe(0x31d)]=formatResult(Number(_0x50fdec),0x8),_0x52ea78[_0x1615fe(0x2b9)]=_0x1a54cc;}),currentCoins[_0x3c3624(0x2d0)](_0x331866=>{const _0x10951a=_0x3c3624;let _0x3c1728=config['portfolio'][_0x10951a(0x257)](_0x91ee2f=>_0x91ee2f['coin']==_0x331866['coin']),_0x572c44=Number(_0x3c1728[_0x10951a(0x2c5)]),_0x38bec1=_0x331866[_0x10951a(0x2b9)]/_0x5b516a*0x64,_0x536b9e=_0x572c44*_0x5b516a/0x64/_0x331866['last']-_0x331866[_0x10951a(0x23e)];_0x331866[_0x10951a(0x2c5)]=formatResult(_0x38bec1,0x3),_0x331866[_0x10951a(0x2aa)]=formatResult(_0x572c44,0x3),_0x331866[_0x10951a(0x245)]=formatResult(_0x536b9e,0x8),_0x331866[_0x10951a(0x1c0)]='',_0x331866[_0x10951a(0x293)]=![];if(_0x331866['coin']!=config[_0x10951a(0x346)]){if(_0x331866[_0x10951a(0x2c5)]>_0x572c44)_0x331866[_0x10951a(0x1c0)]=_0x10951a(0x322),_0x331866[_0x10951a(0x293)]=checkMinimums(_0x331866);else _0x331866['distribution']<_0x572c44&&(_0x331866[_0x10951a(0x1c0)]=_0x10951a(0x237),_0x331866[_0x10951a(0x293)]=checkMinimums(_0x331866));}_0x331866[_0x10951a(0x371)]=_0x331866[_0x10951a(0x2c5)]/_0x331866['target']-0x1;if(_0x331866[_0x10951a(0x1e7)]==_0x10951a(0x1e4)||_0x331866[_0x10951a(0x1e7)]==_0x10951a(0x272))_0x331866[_0x10951a(0x1e7)]=_0x10951a(0x28e);}),currentCoins[_0x3c3624(0x2ab)]((_0x585dd3,_0x3dc732)=>_0x585dd3[_0x3c3624(0x371)]<_0x3dc732[_0x3c3624(0x371)]?0x1:_0x3dc732[_0x3c3624(0x371)]<_0x585dd3[_0x3c3624(0x371)]?-0x1:0x0);const _0x4f40b5=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x4f40b5[_0x3c3624(0x231)],'usd':_0x4f40b5[_0x3c3624(0x2fd)],'portfolio':JSON['stringify'](currentCoins),'threshold':_0x2f7698},proxyEmit(_0x3c3624(0x279),{'serverversion':serverversion,'balances':lastBalances});if(_0x297106){if(config['headless'])headlessMode({'portfolio':currentCoins,'threshold':_0x2f7698});else lockOrders==ORDERS['UNLOCKED']&&!coolingDown&&notifyBalance({'portfolio':currentCoins,'threshold':_0x2f7698});}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x2e3116=getNormalizedPerformance();getStartingBalances(_0x2e3116),emitPerformance(_0x2e3116);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x2f2f61=_0x224dcd;if(!lastBalances)return;let _0x55626f=[],_0x3048ff,_0x176345=JSON[_0x2f2f61(0x1ca)](lastBalances[_0x2f2f61(0x339)]);_0x176345['sort']((_0x26cc74,_0x208f96)=>_0x26cc74[_0x2f2f61(0x25e)]>_0x208f96[_0x2f2f61(0x25e)]?0x1:_0x208f96['coin']>_0x26cc74[_0x2f2f61(0x25e)]?-0x1:0x0),_0x176345[_0x2f2f61(0x2d0)](_0x51d386=>{const _0x258122=_0x2f2f61;let _0x2296e5={'coin':_0x51d386['coin'],'number':_0x51d386[_0x258122(0x23e)],'price':_0x51d386['last']};_0x55626f[_0x258122(0x202)](_0x2296e5);});const _0x60fce0=await getFiat();_0x3048ff={'date':lastBalances['time'][_0x2f2f61(0x1f2)]('\x20')[0x0],'eur':_0x60fce0[_0x2f2f61(0x231)],'usd':_0x60fce0['usd'],'coins':_0x55626f};let _0x2221d4=dbPerformance[_0x2f2f61(0x326)](_0x2f2f61(0x328))[_0x2f2f61(0x257)]({'date':_0x3048ff['date']})[_0x2f2f61(0x2b9)]();_0x2221d4?_0x3048ff[_0x2f2f61(0x1d1)]!=config[_0x2f2f61(0x249)]&&dbPerformance[_0x2f2f61(0x326)]('data')[_0x2f2f61(0x257)]({'date':_0x3048ff[_0x2f2f61(0x1d1)]})[_0x2f2f61(0x2e9)](_0x3048ff)[_0x2f2f61(0x378)]():dbPerformance[_0x2f2f61(0x326)](_0x2f2f61(0x328))[_0x2f2f61(0x202)](_0x3048ff)[_0x2f2f61(0x378)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x2c9009=_0x224dcd;let _0x31880c=[];if(dbPerformance[_0x2c9009(0x1d2)](_0x2c9009(0x328))[_0x2c9009(0x2b9)]()){let _0x510bff=dbPerformance[_0x2c9009(0x326)]('data')[_0x2c9009(0x251)]()[_0x2c9009(0x28d)](_0x142f97=>{const _0x23d7a3=_0x2c9009;if(_0x142f97[_0x23d7a3(0x1fd)][_0x23d7a3(0x260)]==0x0)return![];else return!![];})[_0x2c9009(0x1d5)]('date')[_0x2c9009(0x2b9)](),_0x5a6118=[...config[_0x2c9009(0x332)]];_0x5a6118[_0x2c9009(0x2ab)]((_0x2fa722,_0x169b7a)=>_0x2fa722[_0x2c9009(0x1d1)]>_0x169b7a[_0x2c9009(0x1d1)]?-0x1:_0x169b7a[_0x2c9009(0x1d1)]>_0x2fa722['date']?0x1:0x0);let _0x106e5b=0x1,_0x5aba42=[],_0x1a20de=0x0;_0x510bff[_0x2c9009(0x2fe)]()[_0x2c9009(0x21f)]()['forEach']((_0x85b97f,_0x177f1c)=>{const _0x1ea70a=_0x2c9009;if(_0x5a6118[_0x1a20de]){if(_0x510bff[_0x510bff[_0x1ea70a(0x260)]-_0x177f1c]&&_0x5a6118[_0x1a20de][_0x1ea70a(0x1d1)]==_0x510bff[_0x510bff[_0x1ea70a(0x260)]-_0x177f1c][_0x1ea70a(0x1d1)]){if(_0x177f1c<_0x510bff[_0x1ea70a(0x260)]){let _0xfc828=0x0,_0x1ca9c4=0x0;_0x510bff[_0x510bff[_0x1ea70a(0x260)]-_0x177f1c][_0x1ea70a(0x1fd)][_0x1ea70a(0x2d0)](_0x2c0c14=>{const _0x26ea9a=_0x1ea70a;_0x1ca9c4+=_0x2c0c14[_0x26ea9a(0x23e)]*_0x2c0c14[_0x26ea9a(0x23f)];}),_0x5a6118[_0x1a20de][_0x1ea70a(0x379)][_0x1ea70a(0x2d0)](_0x149cf7=>{const _0x2b2f41=_0x1ea70a;_0xfc828+=_0x149cf7[_0x2b2f41(0x23e)]*_0x149cf7['price'];}),_0x106e5b*=_0xfc828/(_0x1ca9c4-_0xfc828)+0x1;}_0x1a20de++;}}let _0x588719=0x0;_0x85b97f[_0x1ea70a(0x1fd)][_0x1ea70a(0x2d0)](_0x223fd4=>{const _0x3466de=_0x1ea70a;_0x588719+=_0x223fd4[_0x3466de(0x23e)]*_0x223fd4[_0x3466de(0x23f)];}),_0x5aba42[_0x510bff[_0x1ea70a(0x260)]-_0x177f1c-0x1]=_0x588719*(_0x106e5b-0x1);});let _0x514532=[];_0x5a6118=[...config[_0x2c9009(0x332)]]||[];let _0x1d23e1=0x0;_0x1a20de=0x0,_0x510bff[_0x2c9009(0x2d0)]((_0x28c95f,_0x274cdc)=>{const _0x3a884c=_0x2c9009;if(_0x5a6118[_0x1a20de]){const _0x27553d=fns['parse'](_0x5a6118[_0x1a20de]['date'],'yyyy/MM/dd',new Date()),_0xc3336a=fns['parse'](_0x28c95f['date'],'yyyy/MM/dd',new Date());if(fns['isEqual'](_0x27553d,_0xc3336a)){let _0x11f52e=0x0;_0x5a6118[_0x1a20de][_0x3a884c(0x379)][_0x3a884c(0x2d0)](_0xfb8af7=>{const _0x4728d7=_0x3a884c;!_0x514532[_0xfb8af7[_0x4728d7(0x25e)]]?_0x514532[_0xfb8af7[_0x4728d7(0x25e)]]=_0xfb8af7['number']:(_0x11f52e=_0x514532[_0xfb8af7['coin']],_0x514532[_0xfb8af7[_0x4728d7(0x25e)]]+=_0xfb8af7[_0x4728d7(0x23e)]);const _0x1f3038=_0x28c95f[_0x4728d7(0x1fd)][_0x4728d7(0x257)](_0x87e032=>_0x87e032[_0x4728d7(0x25e)]==_0xfb8af7['coin']);(!_0x1f3038||_0x1f3038['number']==0x0)&&(_0x1d23e1+=(-_0xfb8af7[_0x4728d7(0x23e)]-_0x11f52e)*_0xfb8af7[_0x4728d7(0x23f)]);}),_0x1a20de++;}}_0x28c95f['coins'][_0x3a884c(0x2d0)]((_0x35ed08,_0x44507c)=>{const _0x411a31=_0x3a884c;_0x514532[_0x35ed08[_0x411a31(0x25e)]]&&(_0x35ed08[_0x411a31(0x2a9)]=_0x514532[_0x35ed08[_0x411a31(0x25e)]]);}),_0x31880c['push']({'date':_0x28c95f[_0x3a884c(0x1d1)],'eur':_0x28c95f[_0x3a884c(0x231)],'usd':_0x28c95f[_0x3a884c(0x2fd)],'offset':_0x5aba42[_0x274cdc],'netoffset':_0x1d23e1,'coins':_0x28c95f['coins']});});}return _0x31880c;}function emitPerformance(_0x5635ea){const _0x4292f1=_0x224dcd;_0x5635ea[_0x4292f1(0x260)]!==0x0?(proxyEmit(_0x4292f1(0x27c),_0x5635ea),lastPerformanceEmitted=getDate()):proxyEmit('performance',[]);}function getPerf(_0x2138bd,_0x4d8122){const _0x5ef95=_0x224dcd;let _0xe0b52e=0x0,_0x390239=0x0,_0x17c91d=0x0;_0x2138bd[_0x5ef95(0x1fd)][_0x5ef95(0x2d0)](_0x138347=>{const _0x5cb7e2=_0x5ef95;_0xe0b52e+=_0x138347[_0x5cb7e2(0x23e)]*_0x138347[_0x5cb7e2(0x23f)];});_0x4d8122&&(_0xe0b52e+=_0x2138bd[_0x5ef95(0x20d)]);if(config[_0x5ef95(0x346)]===_0x5ef95(0x2e0)||config[_0x5ef95(0x346)]===_0x5ef95(0x2d6)||config[_0x5ef95(0x346)]===_0x5ef95(0x1f7))_0x390239=_0xe0b52e*_0x2138bd[_0x5ef95(0x231)],_0x17c91d=_0xe0b52e*_0x2138bd[_0x5ef95(0x2fd)];else{if(usdBasecoins[_0x5ef95(0x1d6)](config[_0x5ef95(0x346)]))_0x390239=_0xe0b52e*_0x2138bd[_0x5ef95(0x231)]/_0x2138bd[_0x5ef95(0x2fd)],_0x17c91d=_0xe0b52e;else config['basecoin']==='EUR'&&(_0x390239=_0xe0b52e,_0x17c91d=_0xe0b52e*_0x2138bd['usd']/_0x2138bd['eur']);}return[_0xe0b52e,_0x390239,_0x17c91d];}function getKPIs(_0x4df7cc,_0x3c1889=_0x224dcd(0x321)){const _0x4a7a3d=_0x224dcd,_0x227701=config['basecoin'],_0x26c7b1=lastBalances,_0x2a3960=currentCoins,_0x57a97d=getNormalizedPerformance(),_0x220698=_0x4df7cc===_0x4a7a3d(0x346)?_0x227701:_0x4df7cc===_0x4a7a3d(0x2f1)||_0x4df7cc===_0x4a7a3d(0x1fb)?_0x3c1889:'Net\x20'+_0x227701,_0x3aa529=_0x4df7cc===_0x4a7a3d(0x21e)?_0x4a7a3d(0x35d):_0x4df7cc===_0x4a7a3d(0x1fb)?_0x4a7a3d(0x35d):_0x220698+_0x4a7a3d(0x25f),_0x55e4fe=_0x4df7cc==='net-basecoin'||_0x4df7cc===_0x4a7a3d(0x1fb)?_0x4a7a3d(0x35d):_0x220698+_0x4a7a3d(0x30d);let _0x303f38=0x0;_0x2a3960[_0x4a7a3d(0x2d0)](_0x1615e6=>{const _0x4149db=_0x4a7a3d;_0x303f38+=_0x1615e6['number']*_0x1615e6[_0x4149db(0x31d)];});if(_0x4df7cc===_0x4a7a3d(0x2f1)||_0x4df7cc===_0x4a7a3d(0x1fb)){if(_0x227701===_0x4a7a3d(0x2e0)||_0x227701===_0x4a7a3d(0x2d6)||_0x227701==='PAXG')_0x303f38=_0x303f38*(_0x3c1889===_0x4a7a3d(0x321)?_0x26c7b1[_0x4a7a3d(0x231)]:_0x26c7b1['usd']);else{if(usdBasecoins[_0x4a7a3d(0x1d6)](_0x227701))_0x303f38=_0x303f38*(_0x3c1889===_0x4a7a3d(0x321)?_0x26c7b1['eur']/_0x26c7b1[_0x4a7a3d(0x2fd)]:0x1);else _0x227701==='EUR'&&(_0x303f38=_0x303f38*(_0x3c1889==='EUR'?0x1:_0x26c7b1['usd']/_0x26c7b1['eur']));}}let _0x5c52cf;if(_0x303f38!==0x0){if(_0x4df7cc===_0x4a7a3d(0x346))_0x5c52cf=(_0x303f38/startingBalances[_0x4a7a3d(0x346)]-0x1)*0x64;else{if(_0x3c1889===_0x4a7a3d(0x321))_0x5c52cf=(_0x303f38/startingBalances[_0x4a7a3d(0x231)]-0x1)*0x64;else _0x5c52cf=(_0x303f38/startingBalances['usd']-0x1)*0x64;}let _0x4ce566=0x0;if(startingBalances[_0x4a7a3d(0x1fd)])_0x2a3960[_0x4a7a3d(0x2d0)](_0x21143f=>{const _0x3e1f7d=_0x4a7a3d;let _0x588159=startingBalances[_0x3e1f7d(0x1fd)][_0x3e1f7d(0x257)](_0x424dda=>_0x424dda[_0x3e1f7d(0x25e)]===_0x21143f[_0x3e1f7d(0x25e)]);if(_0x588159&&_0x588159[_0x3e1f7d(0x25e)]&&_0x21143f[_0x3e1f7d(0x23e)]!==0x0)_0x4ce566+=_0x588159['number']*_0x21143f[_0x3e1f7d(0x31d)];});let _0x288a03=0x0;if(_0x57a97d[_0x4a7a3d(0x260)]!==0x0){let _0x3f831f=_0x57a97d[_0x57a97d[_0x4a7a3d(0x260)]-0x1];_0x288a03=_0x3f831f[_0x4a7a3d(0x37c)];}_0x4ce566-=_0x288a03;_0x4df7cc===_0x4a7a3d(0x21e)&&(_0x5c52cf=(_0x303f38-_0x4ce566)/startingBalances[_0x4a7a3d(0x346)]*0x64,_0x303f38=_0x303f38-_0x4ce566);if(_0x4df7cc==='net-fiat'){let _0x2641b0=_0x3c1889===_0x4a7a3d(0x321)?startingBalances[_0x4a7a3d(0x231)]:startingBalances['usd'];if(_0x227701===_0x4a7a3d(0x2e0)||_0x227701==='ETH'||_0x227701==='PAXG')_0x4ce566=_0x3c1889===_0x4a7a3d(0x321)?_0x4ce566*_0x26c7b1[_0x4a7a3d(0x231)]:_0x4ce566*_0x26c7b1['usd'];else{if(usdBasecoins[_0x4a7a3d(0x1d6)](_0x227701))_0x4ce566=_0x3c1889===_0x4a7a3d(0x321)?_0x4ce566*_0x26c7b1[_0x4a7a3d(0x231)]/_0x26c7b1[_0x4a7a3d(0x2fd)]:_0x4ce566;else _0x227701===_0x4a7a3d(0x321)&&(_0x4ce566=_0x3c1889===_0x4a7a3d(0x321)?_0x4ce566:_0x4ce566*_0x26c7b1['usd']/_0x26c7b1[_0x4a7a3d(0x231)]);}_0x5c52cf=(_0x303f38-_0x4ce566)/_0x2641b0*0x64,_0x303f38=_0x303f38-_0x4ce566;}if(_0x5c52cf){if(_0x5c52cf<0x64)_0x5c52cf=_0x5c52cf[_0x4a7a3d(0x26c)](0x2);else{if(_0x5c52cf<0x3e8)_0x5c52cf=_0x5c52cf[_0x4a7a3d(0x26c)](0x1);else _0x5c52cf=_0x5c52cf[_0x4a7a3d(0x26c)](0x0);}}else _0x5c52cf=Number('0')[_0x4a7a3d(0x26c)](0x2);if(_0x303f38){if(Math[_0x4a7a3d(0x32b)](_0x303f38)<0.000001)_0x303f38=_0x303f38['toFixed'](0x2);else{if(Math[_0x4a7a3d(0x32b)](_0x303f38)<0.1)_0x303f38=_0x303f38[_0x4a7a3d(0x26c)](0x6);else{if(Math[_0x4a7a3d(0x32b)](_0x303f38)<0x1)_0x303f38=_0x303f38[_0x4a7a3d(0x26c)](0x5);else{if(Math[_0x4a7a3d(0x32b)](_0x303f38)<0xa)_0x303f38=_0x303f38[_0x4a7a3d(0x26c)](0x4);else{if(Math[_0x4a7a3d(0x32b)](_0x303f38)<0x64)_0x303f38=_0x303f38[_0x4a7a3d(0x26c)](0x3);else{if(Math[_0x4a7a3d(0x32b)](_0x303f38)<0x3e8)_0x303f38=_0x303f38[_0x4a7a3d(0x26c)](0x2);else _0x303f38=_0x303f38['toFixed'](0x2);}}}}}}else _0x303f38=Number('0')[_0x4a7a3d(0x26c)](0x2);}else _0x5c52cf=Number('0')['toFixed'](0x2);return{'value':_0x303f38,'change':_0x5c52cf,'leftTxt':_0x3aa529,'rightTxt':_0x55e4fe};}async function getStartingBalances(_0x5ae4b4,_0x1202e7=!![]){const _0x10e76f=_0x224dcd;if(_0x5ae4b4[_0x10e76f(0x260)]!==0x0){const [_0x552e4b,_0x4db4d6,_0xe79abf]=getPerf(_0x5ae4b4[0x0],!![]);let _0x51568b=[];config['portfolio'][_0x10e76f(0x2d0)](_0x50f297=>{const _0x10c103=_0x10e76f;let _0x39d58d=0x0,_0x5cc913;config[_0x10c103(0x332)][_0x10c103(0x2d0)](_0x363d03=>{const _0x26c83c=_0x10c103;let _0xf3e3cd=_0x363d03[_0x26c83c(0x379)][_0x26c83c(0x257)](_0x38d57e=>_0x38d57e[_0x26c83c(0x25e)]==_0x50f297[_0x26c83c(0x25e)]);if(_0xf3e3cd){_0x39d58d+=_0xf3e3cd['number'];if(!_0x5cc913)_0x5cc913=_0xf3e3cd[_0x26c83c(0x23f)];}}),_0x51568b[_0x10c103(0x202)]({'coin':_0x50f297[_0x10c103(0x25e)],'number':_0x39d58d,'initialprice':_0x5cc913});});const _0x2782f8={'basecoin':_0x552e4b,'eur':_0x4db4d6,'usd':_0xe79abf,'coins':_0x51568b};if(_0x1202e7)proxyEmit('starting-balances',_0x2782f8);startingBalances=_0x2782f8;}}function headlessMode(_0x2d4f1f){const _0x246519=_0x224dcd;let _0x526405=_0x2d4f1f[_0x246519(0x339)],_0x18d7e9=_0x2d4f1f[_0x246519(0x2e7)],_0x34a5e5=[];for(let _0x4300bd of _0x526405){if(_0x4300bd[_0x246519(0x25e)]!=config[_0x246519(0x346)]){if(_0x4300bd[_0x246519(0x371)]>=_0x18d7e9/0x64){if(_0x4300bd['valid'])_0x34a5e5[_0x246519(0x202)](_0x4300bd);}else{if(_0x4300bd[_0x246519(0x371)]<=-_0x18d7e9/0x64){if(_0x4300bd[_0x246519(0x293)])_0x34a5e5[_0x246519(0x202)](_0x4300bd);}}}}_0x34a5e5[_0x246519(0x260)]>0x0&&placeOrder(_0x34a5e5);}function notifyBalance(_0x2ac56f){const _0x1c4a16=_0x224dcd;let _0x14cd1d=_0x2ac56f['portfolio'],_0x54eabc=_0x2ac56f['threshold'],_0x20ad88=[];for(let _0x3c01f6 of _0x14cd1d){if(_0x3c01f6[_0x1c4a16(0x25e)]!=config[_0x1c4a16(0x346)]){if(_0x3c01f6[_0x1c4a16(0x371)]>=_0x54eabc/0x64){if(_0x3c01f6[_0x1c4a16(0x293)])_0x20ad88[_0x1c4a16(0x202)](_0x3c01f6);}else{if(_0x3c01f6[_0x1c4a16(0x371)]<=-_0x54eabc/0x64){if(_0x3c01f6[_0x1c4a16(0x293)])_0x20ad88[_0x1c4a16(0x202)](_0x3c01f6);}}}}if(_0x20ad88[_0x1c4a16(0x260)]>0x0){let _0x1428b4=_0x20ad88[_0x1c4a16(0x1cf)](_0x303ca4=>_0x303ca4['coin']);_0x1428b4[_0x1c4a16(0x2ab)]();let _0x2dbbf7=_0x1428b4[_0x1c4a16(0x1cc)](',\x20');if(!lastCoinsToBalance)logHistory('warning','Manual\x20balancing\x20required');lastCoinsToBalance=_0x2dbbf7;}}function symbolToCoin(_0x4b21e6){const _0x5d3c01=_0x224dcd;let _0x18d4b2;if(_0x4b21e6['includes']('/'+config[_0x5d3c01(0x346)]))_0x18d4b2=_0x4b21e6[_0x5d3c01(0x267)]('/'+config[_0x5d3c01(0x346)],'');if(_0x4b21e6[_0x5d3c01(0x1d6)](config[_0x5d3c01(0x346)]+'/'))_0x18d4b2=_0x4b21e6['replace'](config[_0x5d3c01(0x346)]+'/','');return _0x18d4b2;}function setLockOrders(_0x493d3d){const _0x4d1b9c=_0x224dcd;lockOrders=_0x493d3d,logger[_0x4d1b9c(0x1d3)](_0x4d1b9c(0x22e)+Object['keys'](ORDERS)[lockOrders]);}async function unlockOrders(_0x1153d8=![]){const _0x193a5b=_0x224dcd;if(allOrdersPlaced&&lockOrders==ORDERS[_0x193a5b(0x360)]){setLockOrders(ORDERS[_0x193a5b(0x1cd)]);if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);if(_0x1153d8){const _0x40722f=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x40722f,setBlockTransactionDetection(![]);}validateOrdersState=_0x193a5b(0x2a9),persistOpenOrders([]),setLockOrders(ORDERS[_0x193a5b(0x37b)]);}}async function validateOrders(_0x151fdf){const _0x262afe=_0x224dcd;if(_0x151fdf)validateOrdersState=_0x151fdf;logger[_0x262afe(0x1d3)]('1\x20-\x20Validate\x20orders:\x20'+validateOrdersState+_0x262afe(0x37f)+Object[_0x262afe(0x228)](ORDERS)[lockOrders]);let _0x1d9074=[],_0x88fb22=config[_0x262afe(0x23b)]==_0x262afe(0x34a)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config['timeout']*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x262afe(0x360)])return;logger[_0x262afe(0x1d3)](_0x262afe(0x2ef)+validateOrdersState);for(let _0x2305ec=lastOrders[_0x262afe(0x260)]-0x1;_0x2305ec>=0x0;_0x2305ec--){let _0x4dec60=lastOrders[_0x2305ec],_0x5e08a6=![];_0x4dec60[_0x262afe(0x1e4)]>0x0&&(_0x5e08a6=!![]),_0x1d9074[_0x262afe(0x202)](_0x5e08a6),_0x5e08a6&&config['ordertype']!=_0x262afe(0x34a)&&logHistory(_0x262afe(0x31e),_0x262afe(0x247)+_0x4dec60[_0x262afe(0x21d)]+'\x20'+_0x4dec60['side']+'\x20#'+formatResult(_0x4dec60['filled'],0x8)+'\x20@'+formatResult(_0x4dec60[_0x262afe(0x23f)],0x8)),_0x5e08a6&&lastOrders[_0x262afe(0x320)](_0x2305ec,0x1);}persistOpenOrders(lastOrders);const _0x49beaf=coolingDown?'balancing\x20resumes\x20when\x20cooldown\x20ends':_0x262afe(0x223);if(validateOrdersState==_0x262afe(0x2a9)){validateOrdersState=_0x262afe(0x2df);if(_0x1d9074[_0x262afe(0x1d6)](![])){}else await unlockOrders();}else{if(validateOrdersState==_0x262afe(0x2df)){if(_0x1d9074[_0x262afe(0x1d6)](![])){}else await unlockOrders();}else{if(validateOrdersState=='final')_0x1d9074[_0x262afe(0x1d6)](![])&&(config[_0x262afe(0x23b)]==_0x262afe(0x34a)?logHistory(_0x262afe(0x2fb),_0x262afe(0x1e3)+Math['round'](_0x88fb22*validateOrderInterval/0xea60)+_0x262afe(0x2ff)+_0x49beaf):(await cancelOrders(),logHistory('success',_0x262afe(0x365)+Math[_0x262afe(0x2c0)](_0x88fb22*validateOrderInterval/0xea60)+_0x262afe(0x2ff)+_0x49beaf))),await unlockOrders(!![]);else{if(validateOrdersState==_0x262afe(0x1b9)){if(config[_0x262afe(0x23b)]!='market')logHistory(_0x262afe(0x2fb),_0x262afe(0x1b1)+_0x49beaf);await unlockOrders(!![]);}}}}}async function cancelOrders(){const _0x27c2c2=_0x224dcd;lastOrders[_0x27c2c2(0x2d0)](async _0xbc921c=>{const _0x2a908a=_0x27c2c2;try{const _0x54199d=await exchange[_0x2a908a(0x35f)](_0xbc921c[_0x2a908a(0x1d9)],_0xbc921c[_0x2a908a(0x21d)]);}catch(_0x31f872){if(_0x31f872['toString']()['includes']('OrderNotFound')){}else await handleError(_0x31f872,_0x2a908a(0x2c1));}});}async function initCoinResults(_0x392b2d){const _0x423d45=_0x224dcd;_0x392b2d?logger[_0x423d45(0x1d3)](_0x423d45(0x203)+_0x392b2d):logger[_0x423d45(0x1d3)]('Initializing\x20coin\x20results'),config[_0x423d45(0x339)]['forEach'](_0x2ef45a=>{const _0x20074d=_0x423d45;if(!_0x2ef45a[_0x20074d(0x2a3)]&&_0x2ef45a[_0x20074d(0x25e)]!=config['basecoin']){const _0x1a22cb=currentCoins[_0x20074d(0x257)](_0x5e739c=>_0x5e739c[_0x20074d(0x25e)]==_0x2ef45a[_0x20074d(0x25e)]),_0x31a3a8=gTicker[noslash(_0x2ef45a[_0x20074d(0x21d)])];let _0x47381d=_0x1a22cb?_0x1a22cb['number']:null,_0x33d1f9=_0x2ef45a[_0x20074d(0x21f)]?0x1/_0x31a3a8:_0x31a3a8,_0x50b67e;config[_0x20074d(0x332)][_0x20074d(0x2d0)](_0x50a6d1=>{const _0x29d95f=_0x20074d;!_0x50b67e&&(_0x50b67e=_0x50a6d1[_0x29d95f(0x379)][_0x29d95f(0x257)](_0x22eea9=>_0x22eea9['coin']==_0x2ef45a[_0x29d95f(0x25e)]),_0x50b67e&&(_0x47381d=_0x50b67e['number'],_0x33d1f9=_0x50b67e[_0x29d95f(0x23f)]));});let _0x4113bd=dbCoinResults[_0x20074d(0x326)]('coins')[_0x20074d(0x257)]({'coin':_0x2ef45a[_0x20074d(0x25e)]})['value']();if(!_0x4113bd){const _0x138a10={'coin':_0x2ef45a[_0x20074d(0x25e)],'number':_0x47381d,'breakeven':_0x33d1f9,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get']('coins')[_0x20074d(0x202)](_0x138a10)[_0x20074d(0x378)]();}else{if(_0x392b2d&&_0x2ef45a[_0x20074d(0x25e)]==_0x392b2d){const _0x1a8173={'coin':_0x2ef45a[_0x20074d(0x25e)],'number':_0x47381d,'breakeven':_0x33d1f9,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x20074d(0x326)](_0x20074d(0x1fd))[_0x20074d(0x257)]({'coin':_0x2ef45a[_0x20074d(0x25e)]})[_0x20074d(0x2e9)](_0x1a8173)[_0x20074d(0x378)]();}}}});}async function updateCoinResults(_0x2b9440,_0x4699b4=![]){const _0x1baec1=_0x224dcd;let _0x4d6da4,_0x2a8a3f,_0x13b6af,_0x1bd631,_0x2469ea,_0x17a517,_0xdf47bf=dbCoinResults[_0x1baec1(0x326)](_0x1baec1(0x1fd))[_0x1baec1(0x257)]({'coin':_0x2b9440[_0x1baec1(0x25e)]})['value'](),_0x15a35c=![];_0xdf47bf&&Object[_0x1baec1(0x21c)](_0xdf47bf)[_0x1baec1(0x2d0)](([_0x256fb6,_0x54caa0])=>{if(_0x54caa0==null)_0x15a35c=!![];});(!_0xdf47bf||_0x15a35c)&&(await initCoinResults(_0x2b9440[_0x1baec1(0x25e)]),_0xdf47bf=dbCoinResults[_0x1baec1(0x326)](_0x1baec1(0x1fd))['find']({'coin':_0x2b9440[_0x1baec1(0x25e)]})['value']());_0x2b9440[_0x1baec1(0x21f)]&&(_0x17a517={'filled':_0x2b9440[_0x1baec1(0x1e4)]*_0x2b9440[_0x1baec1(0x23f)],'amount':_0x2b9440[_0x1baec1(0x1e4)]*_0x2b9440[_0x1baec1(0x23f)],'side':_0x2b9440[_0x1baec1(0x1c0)]==_0x1baec1(0x322)?_0x1baec1(0x237):_0x1baec1(0x322),'price':0x1/_0x2b9440[_0x1baec1(0x23f)]},_0x2b9440={..._0x2b9440,..._0x17a517});_0x4699b4?_0x2a8a3f=_0x2b9440['side']=='buy'?_0xdf47bf[_0x1baec1(0x23e)]+_0x2b9440['filled']:_0xdf47bf[_0x1baec1(0x23e)]-_0x2b9440[_0x1baec1(0x1e4)]:_0x2a8a3f=await getCoinNumber(_0x2b9440['coin']);if(_0x2b9440['fee']&&_0x2b9440[_0x1baec1(0x2de)][_0x1baec1(0x2a7)]==config[_0x1baec1(0x346)])_0x4d6da4=Number(_0x2b9440['fee'][_0x1baec1(0x270)]);else{if(_0x2b9440['fee']&&_0x2b9440['fee'][_0x1baec1(0x2a7)]=='BNB'&&!_0x4699b4&&config['basecoin']!=_0x1baec1(0x1f7))_0x4d6da4=Number(_0x2b9440[_0x1baec1(0x2de)][_0x1baec1(0x270)])*gTicker[_0x1baec1(0x368)+config['basecoin']];else _0x4d6da4=defaultFee*_0x2b9440[_0x1baec1(0x1e4)]*_0x2b9440[_0x1baec1(0x23f)];}_0x2b9440[_0x1baec1(0x1c0)]=='buy'?(_0x13b6af=_0x2a8a3f!=0x0?(_0xdf47bf[_0x1baec1(0x304)]*_0xdf47bf[_0x1baec1(0x23e)]+_0x2b9440[_0x1baec1(0x23f)]*(_0x2a8a3f-_0xdf47bf['number'])+_0x4d6da4)/_0x2a8a3f:0x0,_0x1bd631=_0xdf47bf[_0x1baec1(0x341)]):(_0x13b6af=_0x2a8a3f!=0x0?(_0xdf47bf[_0x1baec1(0x304)]*_0xdf47bf['number']-_0x2b9440[_0x1baec1(0x23f)]*(_0xdf47bf[_0x1baec1(0x23e)]-_0x2a8a3f)+_0x4d6da4)/_0x2a8a3f:0x0,_0x1bd631=_0xdf47bf[_0x1baec1(0x341)]+(_0x2b9440[_0x1baec1(0x23f)]-_0xdf47bf['breakeven'])*_0x2b9440[_0x1baec1(0x1e4)]);_0x2469ea=(_0x2b9440[_0x1baec1(0x23f)]-_0x13b6af-_0x4d6da4/_0x2b9440[_0x1baec1(0x1e4)])*_0x2a8a3f;let _0x2ea3b2={'coin':_0x2b9440[_0x1baec1(0x25e)],'number':_0x2a8a3f,'breakeven':formatResult(_0x13b6af,0x8),'realized':formatResult(_0x1bd631,0x8),'unrealized':formatResult(_0x2469ea,0x8),'fees':formatResult(_0xdf47bf[_0x1baec1(0x2cd)]+_0x4d6da4,0x8),'sells':_0x2b9440[_0x1baec1(0x1c0)]==_0x1baec1(0x322)?_0xdf47bf[_0x1baec1(0x385)]+0x1:_0xdf47bf[_0x1baec1(0x385)],'buys':_0x2b9440[_0x1baec1(0x1c0)]==_0x1baec1(0x237)?_0xdf47bf[_0x1baec1(0x1f6)]+0x1:_0xdf47bf[_0x1baec1(0x1f6)]};dbCoinResults[_0x1baec1(0x326)]('coins')['find']({'coin':_0x2b9440[_0x1baec1(0x25e)]})[_0x1baec1(0x2e9)](_0x2ea3b2)[_0x1baec1(0x378)]();if(!_0x4699b4){if(_0x2b9440[_0x1baec1(0x2de)]&&_0x2b9440[_0x1baec1(0x2de)]['currency']==_0x1baec1(0x368)){const _0x1e8bdc=currentCoins[_0x1baec1(0x257)](_0x366a02=>_0x366a02[_0x1baec1(0x25e)]==_0x1baec1(0x368));if(_0x1e8bdc){let _0xf129a5=dbCoinResults['get']('coins')[_0x1baec1(0x257)]({'coin':'BNB'})[_0x1baec1(0x2b9)]();_0x2ea3b2={..._0xf129a5,'number':_0x1e8bdc[_0x1baec1(0x23e)]},dbCoinResults[_0x1baec1(0x326)]('coins')[_0x1baec1(0x257)]({'coin':_0x1baec1(0x368)})[_0x1baec1(0x2e9)](_0x2ea3b2)['write']();}}}}async function placeOrder(_0x764498){const _0x576fea=_0x224dcd,_0x465a4c=config[_0x576fea(0x23b)]==_0x576fea(0x34a)?_0x576fea(0x34a):_0x576fea(0x1ce);if(lockOrders==ORDERS[_0x576fea(0x37b)]&&!coolingDown){setLockOrders(ORDERS[_0x576fea(0x360)]);while(transactionDetectionOngoing){await sleep(0x64);}logger[_0x576fea(0x1d3)]('Placing\x20order\x20for:\x20'+_0x764498[_0x576fea(0x1cf)](_0x2f2471=>_0x2f2471[_0x576fea(0x25e)])['join'](',\x20')),lastCoinsToBalance='',allOrdersPlaced=![],validateOrdersState=_0x576fea(0x2a9);let _0xf49840=![];lastOrders=[];const _0x5d5203=config[_0x576fea(0x2e7)];for(const _0x3789a5 of _0x764498){let _0x31cdeb,_0x3c174b,_0x1e38b2,_0x3a2b1d,_0x2c0472,_0x5c5ab5=_0x3789a5[_0x576fea(0x21d)];logger['debug'](_0x576fea(0x226)+_0x3789a5['coin']+'\x20'+_0x3789a5[_0x576fea(0x23e)]+'\x20'+_0x3789a5[_0x576fea(0x31d)]+'\x20'+_0x3789a5[_0x576fea(0x2c5)]+'%\x20'+_0x3789a5[_0x576fea(0x2aa)]+'%\x20'+(0x64*_0x3789a5[_0x576fea(0x371)])[_0x576fea(0x26c)](0x2)+'%\x20('+_0x5d5203[_0x576fea(0x26c)](0x2)+'%)');const _0x3ef933=currentCoins[_0x576fea(0x257)](_0x3eeab4=>_0x3eeab4[_0x576fea(0x25e)]==_0x3789a5[_0x576fea(0x25e)]);_0x3ef933&&(_0x3ef933[_0x576fea(0x289)]=_0x3789a5[_0x576fea(0x23e)]);try{const _0x1a572f=await exchange['fetchTicker'](_0x5c5ab5);_0x31cdeb=_0x3789a5['reverse']?0x1/_0x3789a5[_0x576fea(0x31d)]:_0x3789a5[_0x576fea(0x31d)],_0x3c174b=_0x1a572f[_0x576fea(0x234)],_0x1e38b2=_0x1a572f[_0x576fea(0x363)];_0x3789a5['reverse']?(_0x3a2b1d=_0x3789a5[_0x576fea(0x1c0)]=='buy'?_0x576fea(0x322):_0x576fea(0x237),_0x2c0472=Math[_0x576fea(0x32b)](_0x3789a5['trade'])/_0x31cdeb):(_0x3a2b1d=_0x3789a5[_0x576fea(0x1c0)],_0x2c0472=Math[_0x576fea(0x32b)](_0x3789a5[_0x576fea(0x245)]));_0x465a4c==_0x576fea(0x1ce)&&(config['ordertype']==_0x576fea(0x1de)&&(_0x31cdeb=_0x3a2b1d==_0x576fea(0x237)?_0x3c174b:_0x1e38b2),config[_0x576fea(0x23b)]==_0x576fea(0x351)&&(_0x31cdeb=_0x3a2b1d==_0x576fea(0x237)?_0x1e38b2:_0x3c174b));_0x2c0472=formatResult(_0x2c0472,0x8),_0x31cdeb=formatResult(_0x31cdeb,0x8);const _0x2fb11d=_0x3a2b1d==_0x576fea(0x322)?config[_0x576fea(0x287)]?String['fromCodePoint']('0x'+config[_0x576fea(0x287)])+'\x20':'':config[_0x576fea(0x1dc)]?String[_0x576fea(0x301)]('0x'+config['emojibuy'])+'\x20':'',_0x4ee80a=_0x465a4c==_0x576fea(0x34a)?'Market':config[_0x576fea(0x23b)]==_0x576fea(0x1de)?_0x576fea(0x1f0):_0x576fea(0x369),_0x3a2793=(Math[_0x576fea(0x310)](Math[_0x576fea(0x26d)]()*0x35a4e900)+0x5f5e100)[_0x576fea(0x356)]();lastOrders['push']({'customId':_0x3a2793,'symbol':_0x5c5ab5,'coin':_0x3789a5[_0x576fea(0x25e)],'amount':_0x2c0472,'price':_0x31cdeb,'side':_0x3a2b1d,'reverse':_0x3789a5['reverse'],'filled':0x0});if(_0x465a4c==_0x576fea(0x34a))logHistory(_0x576fea(0x31e),''+_0x2fb11d+_0x4ee80a+_0x576fea(0x2d5)+_0x5c5ab5+'\x20'+_0x3a2b1d+'\x20#'+formatResult(_0x2c0472,0x8)+'\x20@'+formatResult(_0x31cdeb,0x8));else logHistory(_0x576fea(0x31e),''+_0x2fb11d+_0x4ee80a+_0x576fea(0x2d5)+_0x5c5ab5+'\x20'+_0x3a2b1d+'\x20#'+formatResult(_0x2c0472,0x8)+'\x20@'+formatResult(_0x31cdeb,0x8));let _0x2debaf;_0x465a4c=='market'?_0x3a2b1d==_0x576fea(0x237)&&[_0x576fea(0x353),_0x576fea(0x33e),_0x576fea(0x2dd),'Huobi',_0x576fea(0x1c3)]['includes'](config[_0x576fea(0x27b)])?_0x2debaf=await exchange[_0x576fea(0x2cc)](_0x5c5ab5,_0x465a4c,_0x3a2b1d,_0x2c0472,_0x31cdeb):_0x2debaf=await exchange['createOrder'](_0x5c5ab5,_0x465a4c,_0x3a2b1d,_0x2c0472,undefined):_0x2debaf=await exchange['createOrder'](_0x5c5ab5,_0x465a4c,_0x3a2b1d,_0x2c0472,_0x31cdeb);logger[_0x576fea(0x1d3)](_0x576fea(0x2a6)+_0x2debaf['id']+_0x576fea(0x2bd)+_0x3a2793);const _0x24d588=lastOrders[_0x576fea(0x260)]-0x1;if(_0x24d588>=0x0&&lastOrders[_0x24d588]['customId']==_0x3a2793){lastOrders[_0x24d588][_0x576fea(0x1d9)]=_0x2debaf['id'];if(_0x2debaf['amount'])lastOrders[_0x24d588]['amount']=_0x2debaf['amount'];if(_0x2debaf[_0x576fea(0x23f)])lastOrders[_0x24d588][_0x576fea(0x23f)]=_0x2debaf[_0x576fea(0x23f)];lastOrders[_0x24d588][_0x576fea(0x2de)]=_0x2debaf[_0x576fea(0x2de)];}if(config[_0x576fea(0x21a)]!=0x0){let _0x34fcea=null;if(cooldownTracker['length']==config['cooldown']-0x1)_0x34fcea=cooldownTracker['shift']();const _0x217e21=getTimeStamp();cooldownTracker[_0x576fea(0x202)](_0x217e21);if(_0x34fcea){const _0x2b9686=fns[_0x576fea(0x246)](new Date(_0x217e21),new Date(_0x34fcea));if(_0x2b9686<cooldownInterval){logHistory(_0x576fea(0x382),_0x576fea(0x380)+config[_0x576fea(0x21a)]+'\x20orders\x20in\x20less\x20than\x20'+cooldownInterval/0x3c+'\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20'+cooldownPeriod/(0xe10*0x3e8)+'\x20hour'),coolingDown=!![];break;}}}}catch(_0x285d68){if(_0x285d68['toString']()[_0x576fea(0x1d6)](_0x576fea(0x283)))lastOrders=lastOrders[_0x576fea(0x28d)](_0x442da6=>_0x442da6[_0x576fea(0x21d)]!=_0x5c5ab5),logHistory(_0x576fea(0x382),_0x576fea(0x236)+_0x5c5ab5),_0xf49840=!![];else{if(_0x285d68[_0x576fea(0x356)]()[_0x576fea(0x1d6)](_0x576fea(0x2f9)))lastOrders=lastOrders[_0x576fea(0x28d)](_0x9ca9f5=>_0x9ca9f5[_0x576fea(0x21d)]!=_0x5c5ab5),logHistory(_0x576fea(0x382),_0x576fea(0x215)+_0x5c5ab5),_0xf49840=!![];else{if(_0x285d68['toString']()[_0x576fea(0x1d6)](_0x576fea(0x281)))lastOrders=lastOrders['filter'](_0x3eb0f8=>_0x3eb0f8[_0x576fea(0x21d)]!=_0x5c5ab5),logHistory(_0x576fea(0x382),_0x576fea(0x29d)+_0x5c5ab5),logger['debug'](_0x285d68),_0xf49840=!![];else _0x285d68[_0x576fea(0x356)]()[_0x576fea(0x1d6)]('must\x20be\x20greater\x20than\x20minimum\x20amount')?(lastOrders=lastOrders[_0x576fea(0x28d)](_0x298eb3=>_0x298eb3[_0x576fea(0x21d)]!=_0x5c5ab5),logHistory('error',_0x576fea(0x236)+_0x5c5ab5),_0xf49840=!![]):(lastOrders=lastOrders[_0x576fea(0x28d)](_0x33998f=>_0x33998f[_0x576fea(0x21d)]!=_0x5c5ab5),await handleError(_0x285d68,_0x576fea(0x29c),_0x5c5ab5));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x576fea(0x260)]>0x0){const _0x34dec8=config[_0x576fea(0x23b)]=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0x576fea(0x25c)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x5e97cf=_0x576fea;validateOrders(_0x5e97cf(0x259));},_0x34dec8);}else unlockOrders();_0xf49840&&config[_0x576fea(0x2ce)]&&(logHistory(_0x576fea(0x382),_0x576fea(0x1b3)+pauseBotMsg),await pauseBot(pauseBotInterval)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory('success','Cooldown\x20ended\x20-\x20balancing\x20resumed'));}else{if(coolingDown)!config['headless']&&logHistory(_0x576fea(0x382),'Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode');else lockOrders!=ORDERS[_0x576fea(0x37b)]&&(!config[_0x576fea(0x2ce)]&&(config[_0x576fea(0x23b)]==_0x576fea(0x34a)?logHistory(_0x576fea(0x382),_0x576fea(0x2fa)):logHistory('error',_0x576fea(0x323))));}}function persistOpenOrders(_0x8b116b){const _0x2aed6c=_0x224dcd,_0x21cccc={...config,'openOrders':_0x8b116b};let _0x4f80bd=dbConfig[_0x2aed6c(0x326)](_0x2aed6c(0x31b))[_0x2aed6c(0x257)]({'botID':botID})[_0x2aed6c(0x2b9)]();_0x4f80bd&&dbConfig[_0x2aed6c(0x326)](_0x2aed6c(0x31b))[_0x2aed6c(0x257)]({'botID':botID})['assign'](_0x21cccc)['write']();}function restoreOrders(){const _0x13b278=_0x224dcd;let _0x2ead52;config['openOrders']&&allOpenOrders[_0x13b278(0x2d0)](_0x1c8688=>{const _0x236978=_0x13b278,_0x863938=config[_0x236978(0x33d)]['find'](_0xfc8b78=>_0xfc8b78[_0x236978(0x1d9)]==_0x1c8688['id']);_0x863938&&(lastOrders[_0x236978(0x202)](_0x863938),_0x2ead52=_0x1c8688['timestamp']);});if(lastOrders['length']>0x0){setLockOrders(ORDERS[_0x13b278(0x360)]),validateOrdersState=_0x13b278(0x2df),allOrdersPlaced=!![];const _0x32e4ef=new Date()[_0x13b278(0x36e)](),_0x2e99f3=config[_0x13b278(0x23b)]=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0x13b278(0x25c)]*0x3c*0x3e8;if(_0x2ead52+_0x2e99f3>_0x32e4ef){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x57b893=_0x13b278;validateOrders(_0x57b893(0x259));},_0x2ead52+_0x2e99f3-_0x32e4ef);}else validateOrders(_0x13b278(0x259));}}async function sendMetricsTelegram(){const _0x3c28df=_0x224dcd;if(!coinsLoaded){process['send']({'telegrammsg':_0x3c28df(0x34c)},_0x8409d4=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x395e9d='';if(config[_0x3c28df(0x1c6)])_0x395e9d=_0x3c28df(0x27d)+config['botname']+_0x3c28df(0x262);else _0x395e9d=_0x3c28df(0x300)+botID+_0x3c28df(0x262);const _0xb78d42=getKPIs(_0x3c28df(0x346)),_0xe760e5=getKPIs(_0x3c28df(0x2f1),config[_0x3c28df(0x2f1)]),_0x2afd2d=getKPIs(_0x3c28df(0x21e)),_0x1a53fd=getKPIs('net-fiat',config[_0x3c28df(0x2f1)]);_0x395e9d+='<pre>',_0x395e9d+=_0xb78d42['leftTxt']+_0x3c28df(0x2b6)+_0xb78d42[_0x3c28df(0x2b9)]+'\x0a',_0x395e9d+=_0xb78d42[_0x3c28df(0x1f3)]+':\x20'+_0xb78d42['change']+'%\x0a',_0x395e9d+=_0xe760e5[_0x3c28df(0x1d8)]+_0x3c28df(0x2b6)+_0xe760e5[_0x3c28df(0x2b9)]+'\x0a',_0x395e9d+=_0xe760e5[_0x3c28df(0x1f3)]+':\x20'+_0xe760e5[_0x3c28df(0x225)]+'%\x0a',_0x395e9d+=_0x2afd2d[_0x3c28df(0x1d8)]+':\x20'+_0x2afd2d['value']+'\x20('+config[_0x3c28df(0x346)]+')\x0a',_0x395e9d+=_0x2afd2d[_0x3c28df(0x1f3)]+':\x20'+_0x2afd2d[_0x3c28df(0x225)]+_0x3c28df(0x291)+config[_0x3c28df(0x346)]+')\x0a',_0x395e9d+=_0x1a53fd[_0x3c28df(0x1d8)]+':\x20'+_0x1a53fd['value']+'\x20('+config[_0x3c28df(0x2f1)]+')\x0a',_0x395e9d+=_0x1a53fd[_0x3c28df(0x1f3)]+':\x20'+_0x1a53fd['change']+_0x3c28df(0x291)+config[_0x3c28df(0x2f1)]+')\x0a',_0x395e9d+=_0x3c28df(0x20c),process[_0x3c28df(0x1fc)]({'telegrammsg':_0x395e9d},_0x448637=>{});}async function sendPortfolioTelegram(){const _0x479edf=_0x224dcd;if(!coinsLoaded||!currentCoins[0x0]['distribution']){process['send']({'telegrammsg':_0x479edf(0x34c)},_0x4190a7=>{});return;}let _0x21b2ea='';if(config[_0x479edf(0x1c6)])_0x21b2ea='<b>'+config['botname']+'\x20portfolio:</b>\x20\x0a\x0a';else _0x21b2ea='<b>Bot\x20'+botID+_0x479edf(0x34d);_0x21b2ea+=_0x479edf(0x23d),_0x21b2ea+=_0x479edf(0x2fc),_0x21b2ea+=_0x479edf(0x277),_0x21b2ea+=_0x479edf(0x2fc),currentCoins['forEach'](_0x5aff28=>{const _0x36697f=_0x479edf;_0x21b2ea+=_0x5aff28[_0x36697f(0x25e)][_0x36697f(0x1db)](0x7)+'|\x20'+formatPad(_0x5aff28['distribution'],0x2,0x6)+'|\x20'+formatPad(_0x5aff28[_0x36697f(0x2aa)],0x2,0x6)+'|\x20'+formatPad(_0x5aff28[_0x36697f(0x371)]*0x64,0x2,0x6)+'\x0a';}),_0x21b2ea+=_0x479edf(0x20c),process['send']({'telegrammsg':_0x21b2ea},_0xfc1251=>{});}function formatPad(_0x587c13,_0x4e8d56,_0x277732){const _0x1a53e4=_0x224dcd,_0x558be2=formatResultString(_0x587c13,_0x4e8d56);return _0x558be2?_0x558be2[_0x1a53e4(0x26e)](_0x277732):''[_0x1a53e4(0x26e)](_0x277732);}function logHistory(_0x4c0990,_0x39ae73,_0x199099=''){const _0xc71dc5=_0x224dcd;logger[_0xc71dc5(0x1ba)](''+_0x39ae73);let _0x2b8ce5={'time':getTimeStamp(),'type':_0x4c0990,'event':_0x39ae73};dbLogs['get'](_0xc71dc5(0x316))[_0xc71dc5(0x202)](_0x2b8ce5)[_0xc71dc5(0x378)]();if(_0x199099=='')_0x199099=_0x39ae73;proxyEmit('event',{'log':_0x2b8ce5,'summary':_0x199099}),process[_0xc71dc5(0x1fc)]({'telegram':{..._0x2b8ce5,'botname':config[_0xc71dc5(0x373)],'showname':config['showname']}},_0xcaa74a=>{});}function emitHistory(_0x2680d9={}){const _0x1b306c=_0x224dcd;Object['keys'](_0x2680d9)['length']==0x0&&(_0x2680d9={'type':[_0x1b306c(0x31e),_0x1b306c(0x381)],'event':'','page':0x1});if(_0x2680d9[_0x1b306c(0x1f8)][_0x1b306c(0x1d6)](_0x1b306c(0x381)))_0x2680d9['type'][_0x1b306c(0x320)](_0x2680d9[_0x1b306c(0x1f8)][_0x1b306c(0x264)](_0x1b306c(0x381)),0x1,_0x1b306c(0x382),'warning',_0x1b306c(0x2fb));if(dbLogs[_0x1b306c(0x1d2)](_0x1b306c(0x316))[_0x1b306c(0x2b9)]()){let _0x7a5b43=dbLogs[_0x1b306c(0x326)](_0x1b306c(0x316))[_0x1b306c(0x28d)](_0x1741f7=>{const _0x537d82=_0x1b306c;if(_0x2680d9[_0x537d82(0x1f8)][_0x537d82(0x260)]==0x0)return![];else return _0x2680d9[_0x537d82(0x1f8)][_0x537d82(0x1d6)](_0x1741f7['type']);})['filter'](_0x1cfe93=>{const _0x469a85=_0x1b306c;if(_0x2680d9[_0x469a85(0x381)]=='')return!![];else return _0x1cfe93[_0x469a85(0x381)][_0x469a85(0x311)]()[_0x469a85(0x1d6)](_0x2680d9[_0x469a85(0x381)][_0x469a85(0x311)]());})[_0x1b306c(0x1d5)](_0x1b306c(0x243)),_0x15f51e=_0x7a5b43[_0x1b306c(0x2b9)]()[_0x1b306c(0x260)];_0x7a5b43=_0x7a5b43[_0x1b306c(0x21f)]()[_0x1b306c(0x2fe)]((_0x2680d9['page']-0x1)*logPageSize,_0x2680d9['page']*logPageSize-0x1)['reverse']()[_0x1b306c(0x2b9)](),proxyEmit(_0x1b306c(0x280),{'logs':_0x7a5b43,'total':_0x15f51e});}else proxyEmit(_0x1b306c(0x280),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x51f4e5){const _0x226420=_0x224dcd;if(dbLogs[_0x226420(0x1d2)](_0x226420(0x316))[_0x226420(0x2b9)]()){const _0x3a8e7b=dbLogs[_0x226420(0x326)](_0x226420(0x316))[_0x226420(0x1d5)](_0x226420(0x243))[_0x226420(0x28d)](_0x5c7cbc=>{const _0x2fcf66=_0x226420;return _0x5c7cbc[_0x2fcf66(0x1f8)]==_0x2fcf66(0x31e);})[_0x226420(0x2b9)]();dbLogs[_0x226420(0x326)](_0x226420(0x316))['remove']()[_0x226420(0x378)](),dbLogs[_0x226420(0x326)](_0x226420(0x316))[_0x226420(0x2e9)](_0x3a8e7b)[_0x226420(0x378)](),emitHistory(_0x51f4e5);}}async function pauseBot(_0x1ba39c=pauseBotIntervalShort,_0x55081f,_0x5bd154,_0x3cd3ea=![]){const _0x808231=_0x224dcd,_0x41bd54=new Date()['getTime']();if(!lastErrorShown||_0x41bd54-lastErrorShown>=_0x1ba39c){lastErrorShown=_0x41bd54;if(!lastBotPause)lastBotPause=_0x41bd54,consecutivePauses=0x1;else{if(_0x41bd54-lastBotPause-_0x1ba39c<0x5a*0x3e8){consecutivePauses++;if(consecutivePauses>maxPauseRetries){if(_0x3cd3ea){logHistory('error',_0x55081f+'\x20>\x20stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();return;}else logHistory(_0x808231(0x382),_0x55081f+pauseBotMsg),_0x1ba39c=pauseBotInterval;}}else consecutivePauses=0x1;lastBotPause=_0x41bd54;}_0x5bd154?logger[_0x808231(0x1d3)]('('+consecutivePauses+')\x20'+_0x55081f+_0x808231(0x359),_0x5bd154):logger['debug']('('+consecutivePauses+')\x20'+_0x55081f);if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);await sleep(_0x1ba39c),botPaused=![],_0x1ba39c==pauseBotIntervalShort?resumeBot(!![]):resumeBot(![]);}}}async function killBot(){const _0x1ba852=_0x224dcd;botPaused=!![],await sleep(0x3e8),process[_0x1ba852(0x1fc)]({'stop':_0x1ba852(0x299)},_0x33d743=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x550bff,_0x647357,_0x374112=![]){const _0x360b27=_0x224dcd;if(botPaused)return;let _0x16e5d7;const _0x222659=config[_0x360b27(0x27b)]||'Exchange';if(_0x647357)logger['debug'](_0x360b27(0x2a5)+_0x647357);const _0x2a4a3e=()=>{loading['error']=!![],emitLoadingProgress();};if(_0x550bff[_0x360b27(0x356)]()[_0x360b27(0x1d6)](_0x360b27(0x235)))logHistory('error',_0x222659+_0x360b27(0x204)),_0x2a4a3e();else{if(_0x550bff['toString']()[_0x360b27(0x1d6)](_0x360b27(0x285)))logHistory(_0x360b27(0x382),_0x222659+_0x360b27(0x2b0)),_0x2a4a3e();else{if(_0x550bff['toString']()[_0x360b27(0x1d6)](_0x360b27(0x28f)))config['apiPassword']?_0x16e5d7=_0x222659+_0x360b27(0x331):_0x16e5d7=_0x222659+_0x360b27(0x1f9),logHistory(_0x360b27(0x382),_0x16e5d7+_0x360b27(0x2c7)),_0x2a4a3e();else{if(_0x550bff['toString']()[_0x360b27(0x1d6)](_0x360b27(0x318)))logHistory(_0x360b27(0x382),_0x222659+_0x360b27(0x1be)),_0x2a4a3e();else{if(!_0x374112)await handleError(_0x550bff,null);}}}}}async function handleError(_0x5c4c79,_0x461c28,_0x1a100c=''){const _0xf62568=_0x224dcd;if(botPaused)return;let _0x2a5311;const _0x47f4ba=config['exchange']||_0xf62568(0x2d4);if(_0x461c28)logger[_0xf62568(0x1d3)](_0xf62568(0x2a5)+_0x461c28);if(_0x5c4c79[_0xf62568(0x356)]()[_0xf62568(0x1d6)](_0xf62568(0x33a)))_0x2a5311=_0x47f4ba+'\x20blocked\x20API\x20(DDoSProtection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading',await pauseBot(undefined,_0x2a5311,_0x5c4c79);else{if(_0x5c4c79[_0xf62568(0x356)]()[_0xf62568(0x1d6)](_0xf62568(0x32a)))_0x2a5311=_0x47f4ba+_0xf62568(0x2b3),await pauseBot(undefined,_0x2a5311,_0x5c4c79);else{if(_0x5c4c79[_0xf62568(0x356)]()[_0xf62568(0x1d6)](_0xf62568(0x29b))||_0x5c4c79[_0xf62568(0x356)]()['includes'](_0xf62568(0x343)))_0x2a5311=_0x47f4ba+_0xf62568(0x345),await pauseBot(undefined,_0x2a5311,_0x5c4c79[_0xf62568(0x356)]());else{if(_0x5c4c79['toString']()[_0xf62568(0x1d6)]('RequestTimeout'))_0x2a5311=_0x47f4ba+_0xf62568(0x348),await pauseBot(undefined,_0x2a5311,_0x5c4c79[_0xf62568(0x356)]());else{if(_0x5c4c79['toString']()[_0xf62568(0x1d6)](_0xf62568(0x30a)))_0x2a5311=_0x47f4ba+_0xf62568(0x362),await pauseBot(undefined,_0x2a5311,_0x5c4c79[_0xf62568(0x356)]());else{if(_0x5c4c79[_0xf62568(0x356)]()['toLowerCase']()[_0xf62568(0x1d6)](_0xf62568(0x2c3))||_0x5c4c79[_0xf62568(0x356)]()[_0xf62568(0x311)]()[_0xf62568(0x1d6)](_0xf62568(0x2b5)))_0x2a5311=_0xf62568(0x1fa),await pauseBot(undefined,_0x2a5311,_0x5c4c79[_0xf62568(0x356)]());else{if(_0x5c4c79['toString']()[_0xf62568(0x1d6)](_0xf62568(0x1dd)))_0x2a5311=_0x47f4ba+_0xf62568(0x34e),await pauseBot(undefined,_0x2a5311,_0x5c4c79['toString']());else{if(_0x5c4c79 instanceof ccxt[_0xf62568(0x2c8)])_0x2a5311=_0x47f4ba+_0xf62568(0x1b6)+_0x5c4c79[_0xf62568(0x356)](),logger[_0xf62568(0x1d3)](_0xf62568(0x2b4),_0x5c4c79),await pauseBot(undefined,_0x2a5311,_0x5c4c79);else{if(_0x5c4c79['toString']()['includes'](_0xf62568(0x235)))logHistory(_0xf62568(0x382),_0x47f4ba+_0xf62568(0x34f)),logHistory(_0xf62568(0x382),_0xf62568(0x224)),await killBot();else{if(_0x5c4c79[_0xf62568(0x356)]()[_0xf62568(0x1d6)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory(_0xf62568(0x382),_0x47f4ba+_0xf62568(0x36c)),logHistory(_0xf62568(0x382),_0xf62568(0x224)),await killBot();else{if(_0x5c4c79[_0xf62568(0x356)]()[_0xf62568(0x1d6)]('AuthenticationError')&&_0x5c4c79[_0xf62568(0x356)]()['includes'](_0xf62568(0x358)))_0x2a5311=_0x47f4ba+'\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)',await pauseBot(undefined,_0x2a5311,_0x5c4c79,!![]);else{if(_0x5c4c79['toString']()[_0xf62568(0x1d6)]('AuthenticationError'))config[_0xf62568(0x227)]?_0x2a5311=_0x47f4ba+_0xf62568(0x331):_0x2a5311=_0x47f4ba+'\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange',logHistory('error',_0x2a5311),logHistory('error',_0xf62568(0x224)),await killBot();else{if(_0x5c4c79['toString']()['includes'](_0xf62568(0x318)))logHistory('error',_0x47f4ba+_0xf62568(0x241)),logHistory('error',_0xf62568(0x224)),await killBot();else{if(_0x5c4c79[_0xf62568(0x356)]()[_0xf62568(0x1d6)](_0xf62568(0x377)))logHistory(_0xf62568(0x382),_0xf62568(0x1e5)+_0x1a100c),logger[_0xf62568(0x1d3)]('Error\x20details:',_0x5c4c79);else{if(_0x5c4c79 instanceof ccxt[_0xf62568(0x25a)]){_0x2a5311=_0x47f4ba+'\x20exchange\x20error:\x20'+_0x5c4c79[_0xf62568(0x356)]();if(_0x1a100c)_0x2a5311+=_0xf62568(0x24d)+_0x1a100c;await pauseBot(undefined,_0x2a5311,_0x5c4c79);}else{_0x2a5311=_0xf62568(0x1c2)+_0x5c4c79[_0xf62568(0x356)]();if(_0x1a100c)_0x2a5311+=_0xf62568(0x24d)+_0x1a100c;await pauseBot(undefined,_0x2a5311);}}}}}}}}}}}}}}}}function decryptRSA(_0x235e6b,_0x5e8cae){const _0x2250ca=_0x224dcd,_0x3164f7=forge[_0x2250ca(0x29a)][_0x2250ca(0x265)](_0x235e6b),_0x17a448=_0x3164f7[_0x2250ca(0x1c4)](forge[_0x2250ca(0x1e1)][_0x2250ca(0x1e2)](_0x5e8cae),_0x2250ca(0x24f),{'md':forge['md'][_0x2250ca(0x34b)][_0x2250ca(0x32d)](),'mgf1':{'md':forge['md'][_0x2250ca(0x34b)][_0x2250ca(0x32d)]()}});return _0x17a448;}async function withRetry(_0x3c412a,_0x2f02b1){const _0x48f2af=_0x224dcd;let _0x546548=![],_0x42847c=0x0,_0x18e2b1,_0x3aa0d7;while(_0x42847c<maxRetries){try{_0x18e2b1=await _0x2f02b1();break;}catch(_0x3b0836){_0x3aa0d7=_0x3b0836,!_0x546548?(_0x546548=!![],logger[_0x48f2af(0x1d3)]('RETRY\x20-\x20Error\x20in\x20'+_0x3c412a+':',_0x3b0836[_0x48f2af(0x356)]())):await sleep(retryInterval);}_0x42847c++;}if(_0x42847c==0x0)return _0x18e2b1;if(_0x42847c>=maxRetries)throw _0x3aa0d7;else return logger[_0x48f2af(0x1d3)]('RETRY\x20-\x20Problem\x20resolved\x20after\x20'+_0x42847c+_0x48f2af(0x1ea)),_0x18e2b1;}function formatResult(_0x570046,_0x498ccf){const _0x2a547f=_0x224dcd;return parseFloat(_0x570046[_0x2a547f(0x26c)](_0x498ccf));}function formatResultTruncate(_0x273b33,_0x57c27d){const _0x94cd4=_0x224dcd;let _0x922846=formatResultString(_0x273b33,0xa),_0x43bb55=_0x922846[_0x94cd4(0x264)]('.');return _0x43bb55!=-0x1&&(_0x922846=_0x922846[_0x94cd4(0x2fe)](0x0,_0x43bb55+_0x57c27d+0x1)),Number(_0x922846);}function formatResultString(_0x54710b,_0x30310d){const _0x12b9ba=_0x224dcd;let _0x5d5023;if(!(''+_0x54710b)['includes']('e'))_0x5d5023=+(Math[_0x12b9ba(0x2c0)](_0x54710b+'e+'+_0x30310d)+'e-'+_0x30310d);else{let _0x38cf47=(''+_0x54710b)['split']('e'),_0x165c1b='';+_0x38cf47[0x1]+_0x30310d>0x0&&(_0x165c1b='+'),_0x5d5023=+(Math[_0x12b9ba(0x2c0)](+_0x38cf47[0x0]+'e'+_0x165c1b+(+_0x38cf47[0x1]+_0x30310d))+'e-'+_0x30310d);}return Number(_0x5d5023)[_0x12b9ba(0x26c)](_0x30310d);}function getServerTime(){const _0xc48ecc=_0x224dcd,_0x553c13=new Date();return _0x553c13[_0xc48ecc(0x35e)]()+'/'+(_0x553c13[_0xc48ecc(0x250)]()+0x1)[_0xc48ecc(0x356)]()[_0xc48ecc(0x26e)](0x2,'0')+'/'+_0x553c13['getDate']()[_0xc48ecc(0x356)]()[_0xc48ecc(0x26e)](0x2,'0')+'\x20'+_0x553c13[_0xc48ecc(0x2e6)]()[_0xc48ecc(0x356)]()['padStart'](0x2,'0')+':'+_0x553c13[_0xc48ecc(0x1eb)]()[_0xc48ecc(0x356)]()[_0xc48ecc(0x26e)](0x2,'0')+':'+_0x553c13[_0xc48ecc(0x2b2)]()[_0xc48ecc(0x356)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x5efe82=_0x224dcd,_0x2730c6=shiftedTime();return _0x2730c6[_0x5efe82(0x35e)]()+'/'+(_0x2730c6[_0x5efe82(0x250)]()+0x1)[_0x5efe82(0x356)]()['padStart'](0x2,'0')+'/'+_0x2730c6[_0x5efe82(0x23a)]()['toString']()['padStart'](0x2,'0')+'\x20'+_0x2730c6[_0x5efe82(0x2e6)]()[_0x5efe82(0x356)]()['padStart'](0x2,'0')+':'+_0x2730c6[_0x5efe82(0x1eb)]()[_0x5efe82(0x356)]()[_0x5efe82(0x26e)](0x2,'0')+':'+_0x2730c6[_0x5efe82(0x2b2)]()['toString']()[_0x5efe82(0x26e)](0x2,'0');}function getDate(){const _0x563779=_0x224dcd,_0x4c17a6=shiftedTime();return _0x4c17a6[_0x563779(0x35e)]()+'/'+(_0x4c17a6[_0x563779(0x250)]()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x4c17a6[_0x563779(0x23a)]()[_0x563779(0x356)]()[_0x563779(0x26e)](0x2,'0');}function _0x3bf2(_0x2b3716,_0x44ddca){const _0x330fdf=_0x5356();return _0x3bf2=function(_0x488059,_0x9ceb84){_0x488059=_0x488059-0x1af;let _0x53564b=_0x330fdf[_0x488059];return _0x53564b;},_0x3bf2(_0x2b3716,_0x44ddca);}function getHour(){const _0x4bf1d4=_0x224dcd,_0x31add9=shiftedTime();return _0x31add9[_0x4bf1d4(0x2e6)]()[_0x4bf1d4(0x356)]()[_0x4bf1d4(0x26e)](0x2,'0');}function sleep(_0x2360a5){return new Promise(_0x439024=>setTimeout(_0x439024,_0x2360a5));}function shiftedTime(){const _0x1157b8=_0x224dcd,_0x3a1094=new Date();let _0x15a355=_0x3a1094;if(config&&config[_0x1157b8(0x20a)]!==0x0)_0x15a355=fns[_0x1157b8(0x2e3)](_0x3a1094,{'hours':config[_0x1157b8(0x20a)]});return _0x15a355;}function timer(_0x3a0288){const _0x37ec03=_0x224dcd,_0x1d8cce=new Date();!lasttime?console[_0x37ec03(0x22a)](getTimeStamp()+_0x37ec03(0x20b),_0x3a0288,_0x1d8cce):console['log'](getTimeStamp()+_0x37ec03(0x20b),_0x3a0288,(_0x1d8cce-lasttime)/0x3e8),lasttime=_0x1d8cce;}