const _0x518395=_0x310a;(function(_0x30da0c,_0x519d73){const _0x304556=_0x310a,_0x3c0584=_0x30da0c();while(!![]){try{const _0x4f2a3e=-parseInt(_0x304556(0x1b1))/0x1+parseInt(_0x304556(0x2ae))/0x2+-parseInt(_0x304556(0x170))/0x3*(parseInt(_0x304556(0x275))/0x4)+-parseInt(_0x304556(0x1cb))/0x5+parseInt(_0x304556(0x2fb))/0x6+-parseInt(_0x304556(0x282))/0x7*(-parseInt(_0x304556(0x1af))/0x8)+parseInt(_0x304556(0x2a5))/0x9*(parseInt(_0x304556(0x207))/0xa);if(_0x4f2a3e===_0x519d73)break;else _0x3c0584['push'](_0x3c0584['shift']());}catch(_0x5be572){_0x3c0584['push'](_0x3c0584['shift']());}}}(_0x5c97,0xc85f0));const _0x4c7166=function(){let _0xaab81c=!![];return function(_0xa5401b,_0x3d372b){const _0x5a852a=_0xaab81c?function(){const _0x2dceeb=_0x310a;if(_0x3d372b){const _0x2d7bf5=_0x3d372b[_0x2dceeb(0x17d)](_0xa5401b,arguments);return _0x3d372b=null,_0x2d7bf5;}}:function(){};return _0xaab81c=![],_0x5a852a;};}(),_0x46165d=_0x4c7166(this,function(){const _0x266a40=_0x310a;return _0x46165d[_0x266a40(0x2a1)]()[_0x266a40(0x1c7)](_0x266a40(0x1f5))['toString']()[_0x266a40(0x1a2)](_0x46165d)[_0x266a40(0x1c7)](_0x266a40(0x1f5));});_0x46165d();'use strict';const ccxt=require(_0x518395(0x279)),low=require(_0x518395(0x254)),FileSync=require(_0x518395(0x131)),fs=require('fs'),fns=require(_0x518395(0x13e)),forge=require(_0x518395(0x1b4)),util=require(_0x518395(0x1bc)),argv=require(_0x518395(0x2c7))(process['argv'][_0x518395(0x184)](0x2))[_0x518395(0x261)],path=require(_0x518395(0x234)),axios=require(_0x518395(0x143));let exchange,gTicker={},gChange={};const usdBasecoins=[_0x518395(0x21b),_0x518395(0x2f8),'TUSD',_0x518395(0x2d9),'USDC',_0x518395(0x1c0)],excludedExchanges=[_0x518395(0x1d7)],debugging=argv['d']||![];let pnlGenerationNeeded=argv['r']||![],config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x518395(0x163)]({'LOCKED':0x0,'UNLOCKING':0x1,'UNLOCKED':0x2});let lockOrders=ORDERS['UNLOCKED'],validateOrdersState,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotIntervalShort=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0x518395(0x1fb)+pauseBotInterval/0xea60+_0x518395(0x29c),maxPauseRetries=0x6,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,watchTransactionsInterval=0x3c*0x3e8,schedulerInterval=0x3c*0x3c*0x3e8,retryInterval=0x3e8,maxRetries=0x5,logPageSize=0x14,defaultFee=0.003;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidOrdersInitialTimeout,pidOrdersTimeout,botPaused=![],transactionDetectionOngoing=![],lastCoinsToBalance='',exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x5dc,balanceUpdateRetries=0x5;let enableFiatToggle;const serverversion=require(_0x518395(0x17f))[_0x518395(0x139)],environment=require(_0x518395(0x17f))[_0x518395(0x1bd)]||_0x518395(0x2e5),botID=process[_0x518395(0x261)][0x2]||_0x518395(0x278),pattern=/^[0-9]{3}$/;!pattern['test'](botID)&&(console[_0x518395(0x2f4)]('Error:\x20Invalid\x20argument\x20'+botID+',\x20must\x20be\x20a\x203\x20digit\x20number'),killBot());const userID=process[_0x518395(0x261)][0x3]||'',configpath=userID?_0x518395(0x1e3)+userID+'/':_0x518395(0x1e3),logspath=userID?_0x518395(0x1bf)+userID+'/':'./logs/',loggerfile=fs['createWriteStream'](logspath+_0x518395(0x20d),{'flags':'a'});!fs['existsSync'](configpath)&&fs[_0x518395(0x12f)](configpath);!fs[_0x518395(0x2ca)](logspath)&&fs[_0x518395(0x12f)](logspath);const configfile=configpath+_0x518395(0x23a)+botID+_0x518395(0x2d7),logfile=configpath+'bot-'+botID+_0x518395(0x2fa),performancefile=configpath+_0x518395(0x23a)+botID+'-performance.json',coinresultsfile=configpath+_0x518395(0x23a)+botID+_0x518395(0x290),settingsfile=configpath+_0x518395(0x1e7),securefile=configpath+_0x518395(0x2bf),configbackuppath=configpath+'/backup/',adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x518395(0x2ce)]({'logs':[],'version':serverversion})[_0x518395(0x130)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x518395(0x2ce)]({'data':[],'version':serverversion})[_0x518395(0x130)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x518395(0x2ce)]({'bot':[],'version':serverversion})[_0x518395(0x130)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults['defaults']({'coins':{},'version':serverversion})['write']();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0,settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x401961=>{const _0x56a836=_0x518395;console[_0x56a836(0x2f4)](_0x401961);},'simple':_0x306784=>{const _0x673ba6=_0x518395;console[_0x673ba6(0x2f4)](_0x306784),loggerfile[_0x673ba6(0x130)](util[_0x673ba6(0x12d)](_0x306784)+'\x0a');},'full':async(_0x56b4df,_0x1f949f='')=>{const _0x5c2b6f=_0x518395;let _0x22f98d;if(config[_0x5c2b6f(0x2ec)])_0x22f98d=getTimeStamp()+':\x20'+config[_0x5c2b6f(0x242)]+_0x5c2b6f(0x137)+_0x56b4df;else _0x22f98d=getTimeStamp()+':\x20Bot\x20'+botID+_0x5c2b6f(0x137)+_0x56b4df;console[_0x5c2b6f(0x2f4)](_0x22f98d),loggerfile[_0x5c2b6f(0x130)](util[_0x5c2b6f(0x12d)](_0x22f98d)+'\x0a'),_0x1f949f&&(console[_0x5c2b6f(0x2f4)](_0x1f949f),loggerfile[_0x5c2b6f(0x130)](util[_0x5c2b6f(0x12d)](_0x1f949f)+'\x0a'));},'debug':async(_0x5c4ad0,_0x2988ae='')=>{const _0x38c30a=_0x518395;let _0x6062a0;if(config[_0x38c30a(0x2ec)])_0x6062a0=getTimeStamp()+':\x20'+config['botname']+'\x20>\x20[DEBUG]\x20'+_0x5c4ad0;else _0x6062a0=getTimeStamp()+_0x38c30a(0x214)+botID+_0x38c30a(0x25d)+_0x5c4ad0;if(debugging)console[_0x38c30a(0x2f4)](_0x6062a0);loggerfile['write'](util[_0x38c30a(0x12d)](_0x6062a0)+'\x0a');if(_0x2988ae){if(debugging)console[_0x38c30a(0x2f4)](_0x2988ae);loggerfile['write'](util[_0x38c30a(0x12d)](_0x2988ae)+'\x0a');}}};process['on'](_0x518395(0x2ed),function(_0x3a772c){const _0x5d84ed=_0x518395;handleError(_0x3a772c[_0x5d84ed(0x205)],'uncaughtException');});settings['timeshift']!=config['timeshift']&&updateTimeshift(settings['timeshift']);settings[_0x518395(0x14d)]!=config[_0x518395(0x14d)]&&updateOnepagemode(settings[_0x518395(0x14d)]);(settings[_0x518395(0x280)]&&!config[_0x518395(0x280)]||!settings[_0x518395(0x280)]&&config[_0x518395(0x280)])&&updateMarketcapApi(settings[_0x518395(0x280)]);process[_0x518395(0x256)]({'started':_0x518395(0x293)},_0x262856=>{}),initializeProcessListeners();function proxyEmit(_0x32d376,_0x4705ac=null){const _0xbd4cda=_0x518395;process[_0xbd4cda(0x256)]({'function':_0x32d376,'args':_0x4705ac},_0x4a0604=>{});}function initializeProcessListeners(){process['on']('message',_0x1cbc60=>{const _0x12c877=_0x310a;switch(Object[_0x12c877(0x2db)](_0x1cbc60)[0x0]){case _0x12c877(0x211):_0x1cbc60[_0x12c877(0x211)]!=undefined&&(settings['timeshift']=_0x1cbc60[_0x12c877(0x211)],updateTimeshift(settings[_0x12c877(0x211)]));break;case _0x12c877(0x14d):_0x1cbc60[_0x12c877(0x14d)]!=undefined&&(settings[_0x12c877(0x14d)]=_0x1cbc60[_0x12c877(0x14d)],updateOnepagemode(settings[_0x12c877(0x14d)]));break;case _0x12c877(0x280):_0x1cbc60[_0x12c877(0x280)]!=undefined&&(settings[_0x12c877(0x280)]=_0x1cbc60['marketcapApi'],updateMarketcapApi(settings[_0x12c877(0x280)]));break;case _0x12c877(0x233):_0x1cbc60[_0x12c877(0x233)]!=undefined&&(bots=JSON[_0x12c877(0x22c)](_0x1cbc60[_0x12c877(0x233)]),proxyEmit(_0x12c877(0x233),bots));break;case _0x12c877(0x199):switch(_0x1cbc60['function']){case _0x12c877(0x2df):initclient();break;case'toggleBotMode':toggleBotMode();break;case'emitHistory':emitHistory(_0x1cbc60[_0x12c877(0x1c4)]);break;case _0x12c877(0x220):deleteHistoryAlerts(_0x1cbc60[_0x12c877(0x1c4)]);break;case _0x12c877(0x239):getPortfolio(_0x1cbc60[_0x12c877(0x1c4)]);break;case _0x12c877(0x22f):storeConfiguration(_0x1cbc60[_0x12c877(0x1c4)]);break;case _0x12c877(0x166):storeHeadless(_0x1cbc60[_0x12c877(0x1c4)]);break;case _0x12c877(0x159):storeFiat(_0x1cbc60[_0x12c877(0x1c4)]);break;case _0x12c877(0x29e):resetHistory();break;case _0x12c877(0x1fa):getStartingBalances(getNormalizedPerformance());break;case _0x12c877(0x2aa):placeOrder(_0x1cbc60[_0x12c877(0x1c4)]);break;case _0x12c877(0x12e):cancelLoading();break;case _0x12c877(0x27c):showConfig();break;case _0x12c877(0x154):sendMetricsTelegram();break;case _0x12c877(0x1b7):sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x3c9034=![]){const _0x1c0f7d=_0x518395;logger[_0x1c0f7d(0x219)](_0x1c0f7d(0x21f)+(_0x3c9034?_0x1c0f7d(0x2b6):_0x1c0f7d(0x21a))+_0x1c0f7d(0x1aa)+config['exchange']);if(pidBalances)clearTimeout(pidBalances);if(!_0x3c9034)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x1c0f7d(0x18a)]!=''&&config[_0x1c0f7d(0x18a)]!=_0x1c0f7d(0x25b)){loadingProgress=0x0;if(_0x3c9034){await initExchange();const _0x3bff22=await testAPI();if(!_0x3bff22)return;await loadSymbols(),loadingProgress=0x1,setStableCoins(),proxyEmit(_0x1c0f7d(0x1ac),emittedConfiguration()),initialPerformanceStored=![];}const _0x24ab83=await getCoins();[currentCoins,currentCoinsAll]=_0x24ab83,setBlockTransactionDetection(![]),startScheduler(),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x1c0f7d(0x219)](_0x1c0f7d(0x27f)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x1c0f7d(0x17e)]==0x0&&allOpenOrders[_0x1c0f7d(0x17e)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(pnlGenerationNeeded)await generatePnL();}}async function resumeBot(_0x217367=![]){const _0x35c39c=_0x518395;logger[_0x35c39c(0x219)](_0x35c39c(0x21e)+(_0x217367?'quick':_0x35c39c(0x167))+_0x35c39c(0x192)+config[_0x35c39c(0x161)]);if(pidBalances)clearTimeout(pidBalances);if(_0x217367){getBalances();return;}coinsLoaded=![];if(config[_0x35c39c(0x18a)]!=''&&config[_0x35c39c(0x18a)]!='***'){loadingProgress=0x1;const _0x316e64=await getCoins();[currentCoins,currentCoinsAll]=_0x316e64,setBlockTransactionDetection(![]),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x35c39c(0x219)]('Loading\x20completed'),getBalances(![]),await updateOpenOrders();if(lastOrders['length']==0x0&&allOpenOrders['length']!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();}}async function getMarketCap(_0x1ce701){const _0x26c08e=_0x518395;let _0x126c42=![];if(_0x1ce701)_0x126c42=!![];let _0x1bda7c;_0x126c42?_0x1bda7c=_0x1ce701[_0x26c08e(0x1e0)](_0x768fb4=>_0x768fb4[_0x26c08e(0x179)]):_0x1bda7c=currentCoinsAll['map'](_0x4ede87=>_0x4ede87['coin']);if(!config[_0x26c08e(0x280)]||!_0x126c42&&!config['marketcapEnabled']||_0x1bda7c['length']==0x0)return;let _0x3ce210=null;try{_0x3ce210=await axios['get'](_0x26c08e(0x285),{'headers':{'X-CMC_PRO_API_KEY':settings[_0x26c08e(0x280)]},'params':{'symbol':_0x1bda7c[_0x26c08e(0x2a1)]()}});}catch(_0x4e4dc7){_0x3ce210=null,_0x4e4dc7[_0x26c08e(0x2a1)]()['includes']('status\x20code\x20401')?(config[_0x26c08e(0x280)]=![],updateConfig(),proxyEmit('configuration',emittedConfiguration()),logHistory('error',_0x26c08e(0x18f))):(logHistory('error',_0x26c08e(0x2b1)+schedulerInterval/(0x3c*0x3e8)+_0x26c08e(0x29c)),logger[_0x26c08e(0x219)](_0x26c08e(0x1f8),_0x4e4dc7['toString']()+_0x26c08e(0x213)+_0x4e4dc7[_0x26c08e(0x224)]));}if(_0x3ce210){let _0x268fd7=0x0;const _0x14345f=_0x3ce210[_0x26c08e(0x26e)];_0x1bda7c[_0x26c08e(0x1ee)](_0xe8dfea=>{const _0x57c63b=_0x26c08e;if(_0x14345f['data'][_0xe8dfea][0x0])_0x268fd7+=_0x14345f[_0x57c63b(0x26e)][_0xe8dfea][0x0][_0x57c63b(0x2eb)][_0x57c63b(0x21b)][_0x57c63b(0x1ea)];}),_0x1bda7c[_0x26c08e(0x1ee)](_0xfdf0c7=>{const _0x2a4d9c=_0x26c08e,_0x41b978=_0x14345f['data'][_0xfdf0c7][0x0]?_0x14345f[_0x2a4d9c(0x26e)][_0xfdf0c7][0x0][_0x2a4d9c(0x2eb)][_0x2a4d9c(0x21b)]['market_cap']:0x0;if(_0x126c42){const _0xa58901=_0x1ce701['find'](_0x49a4c7=>_0x49a4c7[_0x2a4d9c(0x179)]==_0xfdf0c7);_0xa58901&&(_0xa58901[_0x2a4d9c(0x21d)]=_0x41b978);}else{const _0x48cd62=currentCoins[_0x2a4d9c(0x1dd)](_0x2b9cf0=>_0x2b9cf0['coin']==_0xfdf0c7);_0x48cd62&&(_0x48cd62['marketcap']=_0x41b978);const _0x22ad60=currentCoinsAll[_0x2a4d9c(0x1dd)](_0x20ad6d=>_0x20ad6d[_0x2a4d9c(0x179)]==_0xfdf0c7);_0x22ad60&&(_0x22ad60['marketcap']=_0x41b978);}}),!_0x126c42&&updateTargetDistribution();}}function updateTargetDistribution(){const _0x3fdfa4=_0x518395,_0x10fbe9=0x2;let _0x1505b6=0x0,_0x3ee914=0x0,_0x266792=0x0,_0x47bfea=0x0,_0x31f24f=0x0;config['portfolio'][_0x3fdfa4(0x1ee)](_0x5c0cf5=>{const _0x5f5a25=_0x3fdfa4;if(!_0x5c0cf5[_0x5f5a25(0x1bb)]){_0x266792++,_0x1505b6+=_0x5c0cf5['slider'];if(_0x5c0cf5[_0x5f5a25(0x181)]===-0x1){_0x1505b6++;const _0x3a1c52=currentCoinsAll[_0x5f5a25(0x1dd)](_0x969515=>_0x969515['coin']==_0x5c0cf5[_0x5f5a25(0x179)]);_0x3a1c52&&(_0x47bfea+=_0x3a1c52[_0x5f5a25(0x21d)],_0x31f24f+=Math['sqrt'](_0x3a1c52[_0x5f5a25(0x21d)]));}if(_0x5c0cf5[_0x5f5a25(0x181)]!==-0x1)_0x3ee914++;}});let _0x30978d;const _0x1b9d2f=0x64-_0x1505b6,_0x107f33=_0x266792-_0x3ee914;_0x30978d=_0x107f33===0x0?_0x1505b6:Math[_0x3fdfa4(0x273)](0x64,_0x1505b6),config[_0x3fdfa4(0x175)][_0x3fdfa4(0x1ee)](_0x55b47e=>{const _0x4da2a3=_0x3fdfa4,_0x4e9a5f=currentCoinsAll[_0x4da2a3(0x1dd)](_0x1a0ef9=>_0x1a0ef9[_0x4da2a3(0x179)]==_0x55b47e['coin']);_0x4e9a5f&&(_0x55b47e[_0x4da2a3(0x21d)]=_0x4e9a5f['marketcap']);if(!_0x55b47e[_0x4da2a3(0x1bb)]){if(_0x30978d<=0x64){if(_0x55b47e[_0x4da2a3(0x181)]===-0x1){if(_0x47bfea!==0x0&&config[_0x4da2a3(0x25a)]){if(_0x4e9a5f){if(config['marketcapEnabled']==_0x4da2a3(0x21d))_0x55b47e['distribution']=(_0x1b9d2f/(_0x47bfea/_0x4e9a5f['marketcap']))[_0x4da2a3(0x2bb)](_0x10fbe9);else config[_0x4da2a3(0x25a)]=='marketcapsqrt'&&(_0x55b47e[_0x4da2a3(0x14e)]=(_0x1b9d2f/(_0x31f24f/Math['sqrt'](_0x4e9a5f['marketcap'])))['toFixed'](_0x10fbe9));}}}}}}),updateConfig();}function updateConfig(){const _0x295afc=_0x518395;let _0x355698=dbConfig['get'](_0x295afc(0x253))['find']({'botID':botID})[_0x295afc(0x18d)]();_0x355698&&dbConfig['get'](_0x295afc(0x253))[_0x295afc(0x1dd)]({'botID':botID})['assign'](config)[_0x295afc(0x130)]();}function logMemory(){const _0x5af140=_0x518395;if(environment!=_0x5af140(0x22e))return;const _0x1f07e2=process[_0x5af140(0x16e)]()[_0x5af140(0x147)]/0x400/0x400;logger[_0x5af140(0x219)]('process\x20'+process['pid']+_0x5af140(0x1e8)+formatResult(_0x1f07e2,0x1)+_0x5af140(0x28e));}async function startScheduler(){const _0x1c7d85=_0x518395,_0x2acb33=shiftedTime()[_0x1c7d85(0x174)]();getMarketCap(),loadSymbols(),_0x2acb33==0x1&&logMemory(),await sleep(schedulerInterval),startScheduler();}async function restartBot(_0x62e6a8=![]){const _0x586267=_0x518395;logger[_0x586267(0x219)](_0x586267(0x1c5));if(!_0x62e6a8)while(lockOrders!=ORDERS[_0x586267(0x218)]||coolingDown){await sleep(0x3e8);}process[_0x586267(0x256)]({'stop':_0x586267(0x150)},_0x573218=>{});}async function initExchange(_0x5690c3=config['exchange'],_0x1ec2ec=config[_0x518395(0x18a)],_0x295be1=config[_0x518395(0x248)],_0x37fae5=config['apiPassword']){const _0x22bb3c=_0x518395;if(exchange){logger['debug'](_0x22bb3c(0x1b9));return;}logger[_0x22bb3c(0x219)](_0x22bb3c(0x24a));!supportedExchanges()[_0x22bb3c(0x2f0)](_0x5690c3)&&(logHistory(_0x22bb3c(0x164),_0x22bb3c(0x1cf)+_0x5690c3+_0x22bb3c(0x1d2)),killBot());const _0x42e5fd=ccxt[_0x22bb3c(0x13b)][_0x5690c3[_0x22bb3c(0x135)]()];exchange=new _0x42e5fd({'apiKey':_0x1ec2ec,'secret':_0x295be1,'options':{'defaultType':_0x22bb3c(0x1dc)}});if(_0x37fae5)exchange[_0x22bb3c(0x1ab)]=_0x37fae5;}function updateExchange(_0x24454f,_0x592d0a,_0x844f5d=null){const _0xa513ab=_0x518395;exchange['apiKey']=_0x24454f,exchange[_0xa513ab(0x24d)]=_0x592d0a,exchange[_0xa513ab(0x1ab)]=_0x844f5d,logger[_0xa513ab(0x219)](_0xa513ab(0x19e));}function setStableCoins(){const _0x4f1799=_0x518395;let _0x47f2bb=config[_0x4f1799(0x241)]=='ETH'?_0x4f1799(0x262):config['basecoin']==_0x4f1799(0x245)?_0x4f1799(0x245):_0x4f1799(0x28b),_0x17fa4b=allSymbols[_0x4f1799(0x2f0)](_0x47f2bb+_0x4f1799(0x2a7))?_0x4f1799(0x21b):allSymbols[_0x4f1799(0x2f0)](_0x47f2bb+_0x4f1799(0x25c))?_0x4f1799(0x2d9):_0x4f1799(0x222),_0x1f2bd5=allSymbols['includes'](_0x47f2bb+'/EUR')?'EUR':_0x17fa4b;enableFiatToggle=!![],_0x17fa4b==_0x4f1799(0x222)&&(enableFiatToggle=![],storeFiat(_0x4f1799(0x222))),_0x1f2bd5!='EUR'&&(enableFiatToggle=![],storeFiat(_0x4f1799(0x21b))),stablecoins={'eur':{'coin':''+_0x47f2bb+_0x1f2bd5,'symbol':_0x47f2bb+'/'+_0x1f2bd5},'usd':{'coin':''+_0x47f2bb+_0x17fa4b,'symbol':_0x47f2bb+'/'+_0x17fa4b}};}async function initwsCcxt(){const _0x33651e=_0x518395;initCycle++;const _0x2cb2f7=initCycle;let _0x14769c=[];config[_0x33651e(0x175)][_0x33651e(0x1ee)](_0x13f884=>{const _0x29e467=_0x33651e;if(!_0x13f884['excluded']&&_0x13f884[_0x29e467(0x179)]!=config['basecoin'])_0x14769c[_0x29e467(0x2c9)](_0x13f884[_0x29e467(0x2da)]);});if(!_0x14769c['includes'](stablecoins[_0x33651e(0x24f)][_0x33651e(0x2da)]))_0x14769c[_0x33651e(0x2c9)](stablecoins[_0x33651e(0x24f)]['symbol']);if(!_0x14769c[_0x33651e(0x2f0)](stablecoins[_0x33651e(0x1ff)]['symbol']))_0x14769c[_0x33651e(0x2c9)](stablecoins['usd']['symbol']);loadCoins(_0x14769c),_0x14769c=validateSymbols(_0x14769c);const _0x2a6fb6=async _0x4c076e=>{const _0x4265f8=_0x33651e;let _0x565b45;try{const _0x267f38=await getTickers(_0x4c076e);Object[_0x4265f8(0x298)](_0x267f38)['forEach'](_0x5e7863=>{const _0x3cd294=_0x4265f8;_0x565b45=_0x5e7863[0x1]['symbol'],gTicker[noslash(_0x565b45)]=_0x5e7863[0x1][_0x3cd294(0x289)],gChange[_0x565b45]=_0x5e7863[0x1][_0x3cd294(0x2c5)];});}catch(_0x171ac6){await handleError(_0x171ac6,_0x4265f8(0x13a),_0x565b45);}},_0x265d58=async _0x67ba9e=>{const _0x326d5f=_0x33651e;while(initCycle==_0x2cb2f7){if(!botPaused)try{const _0x17b80b=await exchange['watchTrades'](_0x67ba9e);gTicker[noslash(_0x17b80b[0x0][_0x326d5f(0x2da)])]=_0x17b80b[0x0]['price'];}catch(_0x418149){if(!exchangeStopped)await handleError(_0x418149,_0x326d5f(0x178),_0x67ba9e);}else await sleep(0x64);}},_0x3aac52=async _0x3880bf=>{const _0x4febae=_0x33651e;while(initCycle==_0x2cb2f7){if(!botPaused)try{const _0x17e472=await exchange[_0x4febae(0x212)](_0x3880bf),_0x2f28f4=_0x17e472['pop']();gTicker[noslash(_0x2f28f4['symbol'])]=_0x2f28f4[_0x4febae(0x228)];}catch(_0x5c9009){if(!exchangeStopped)await handleError(_0x5c9009,_0x4febae(0x160),_0x3880bf['toString']());}else await sleep(0x64);}},_0x3c4790=async _0x4a0744=>{const _0x3c725=_0x33651e;while(initCycle==_0x2cb2f7){if(!botPaused){let _0x45fe8e;try{await sleep(0x3c*0x3e8);const _0x2587ca=await getTickers(_0x4a0744);Object[_0x3c725(0x298)](_0x2587ca)[_0x3c725(0x1ee)](_0x486a08=>{const _0x15ddbe=_0x3c725;_0x45fe8e=_0x486a08[0x1][_0x15ddbe(0x2da)],gChange[_0x45fe8e]=_0x486a08[0x1]['percentage'];});}catch(_0x53c3f1){if(!exchangeStopped)await handleError(_0x53c3f1,_0x3c725(0x149),_0x45fe8e);}}else await sleep(0x64);}},_0x5c3912=async _0x5c61e3=>{const _0x28737d=_0x33651e;while(initCycle==_0x2cb2f7){if(!botPaused)try{const _0x43a07b=await exchange[_0x28737d(0x16f)](_0x5c61e3);initCycle==_0x2cb2f7&&_0x43a07b[_0x28737d(0x1ee)](_0x423ffc=>{updateNumberCoinsCcxt(_0x423ffc);});}catch(_0x29c678){if(!exchangeStopped)await handleError(_0x29c678,_0x28737d(0x23f));}else await sleep(0x64);}};_0x2a6fb6(_0x14769c),_0x3c4790(_0x14769c),exchange[_0x33651e(0x1d9)]['watchTradesForSymbols']&&!(config[_0x33651e(0x161)]=='Bybit'&&_0x14769c['length']>0xa)?_0x3aac52(_0x14769c):_0x14769c[_0x33651e(0x1ee)](_0x2c3b32=>{_0x265d58(_0x2c3b32);}),_0x14769c[_0x33651e(0x1ee)](_0x383438=>{_0x5c3912(_0x383438);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x5d33dd){const _0x167895=_0x518395;let _0x214252={};try{if(config['exchange']!=_0x167895(0x2ab))_0x214252=await exchange[_0x167895(0x287)](_0x5d33dd);else for(const _0x425329 of _0x5d33dd){const _0xa1d19a=await exchange['fetchTicker'](_0x425329);_0x214252[_0x425329]=_0xa1d19a;}return _0x214252;}catch(_0x4b5609){throw _0x4b5609;}}function setBlockTransactionDetection(_0xa7f1d5){const _0x5a02ab=_0x518395;blockTransactionDetection=_0xa7f1d5,logger['debug'](_0x5a02ab(0x15c)+blockTransactionDetection);}async function detectLiquidityChange(_0x562206=0x0){const _0x52335f=_0x518395;transactionDetectionOngoing=!![];try{const _0x19c44f=await getCoins(_0x562206),[_0x35fcc6,_0x56fec5]=_0x19c44f;let _0xdecc8b=[];currentCoins[_0x52335f(0x1ee)](_0x19ff68=>{const _0x25ffeb=_0x52335f,_0x1c31b5=_0x35fcc6[_0x25ffeb(0x1dd)](_0x12310e=>_0x12310e['coin']==_0x19ff68[_0x25ffeb(0x179)]);if(_0x1c31b5){if(_0x19ff68[_0x25ffeb(0x13d)]!=_0x1c31b5[_0x25ffeb(0x13d)]){let _0x6fac3;if(_0x19ff68[_0x25ffeb(0x179)]!=config['basecoin']){const _0x127a2f=gTicker[noslash(_0x19ff68[_0x25ffeb(0x2da)])];_0x6fac3=_0x19ff68[_0x25ffeb(0x1d5)]?0x1/_0x127a2f:_0x127a2f;}else _0x6fac3=0x1;_0xdecc8b[_0x25ffeb(0x2c9)]({'coin':_0x19ff68[_0x25ffeb(0x179)],'symbol':_0x19ff68[_0x25ffeb(0x2da)],'price':_0x6fac3,'number':Number(formatResult(_0x1c31b5[_0x25ffeb(0x13d)]-_0x19ff68[_0x25ffeb(0x13d)],0x8)),'basecoinvalue':_0x6fac3*(_0x1c31b5[_0x25ffeb(0x13d)]-_0x19ff68['number'])});}}});if(_0xdecc8b[_0x52335f(0x17e)]>0x0&&!blockTransactionDetection){for(const _0x46f38b of _0xdecc8b){if(config[_0x52335f(0x227)]){logger[_0x52335f(0x219)](_0x52335f(0x15a)+_0x46f38b['basecoinvalue']+_0x52335f(0x2ee)+lastFees[_0x52335f(0x155)]);if(lastFees[_0x52335f(0x155)]==0x0||Math[_0x52335f(0x2ba)](_0x46f38b[_0x52335f(0x22a)])>lastFees[_0x52335f(0x155)]*0x3){if(config[_0x52335f(0x227)]==_0x52335f(0x134)){delete _0x46f38b[_0x52335f(0x2da)],delete _0x46f38b['basecoinvalue'];let _0x21c5da=[],_0x11407e=[...config[_0x52335f(0x2cd)]]||[],_0x1985ab=config[_0x52335f(0x2cd)];_0x11407e[_0x52335f(0x2e8)]((_0x5790f4,_0x3e3106)=>_0x5790f4[_0x52335f(0x20f)]>_0x3e3106[_0x52335f(0x20f)]?-0x1:_0x3e3106['date']>_0x5790f4['date']?0x1:0x0);const _0x3c4672=getDate();if(_0x11407e[0x0]){const _0x58bd03=fns['parse'](_0x11407e[0x0][_0x52335f(0x20f)],_0x52335f(0x1d4),new Date()),_0x194f97=fns['parse'](_0x3c4672,_0x52335f(0x1d4),new Date());if(fns[_0x52335f(0x2f5)](_0x58bd03,_0x194f97)){_0x21c5da=_0x11407e[0x0][_0x52335f(0x1d0)];const _0x16dec0=_0x21c5da[_0x52335f(0x1dd)](_0x2c7d43=>_0x2c7d43['coin']==_0x46f38b[_0x52335f(0x179)]);_0x16dec0?(_0x16dec0['number']+=_0x46f38b[_0x52335f(0x13d)],_0x16dec0['number']==0x0&&(_0x21c5da=_0x21c5da['filter'](_0x196492=>{const _0x261a33=_0x52335f;return _0x196492[_0x261a33(0x179)]!=_0x46f38b[_0x261a33(0x179)];}))):_0x21c5da[_0x52335f(0x2c9)](_0x46f38b);const _0x5dfd46=_0x1985ab[_0x52335f(0x1dd)](_0x2f5cc9=>_0x2f5cc9[_0x52335f(0x20f)]==_0x3c4672);_0x5dfd46[_0x52335f(0x1d0)]=_0x21c5da;}else _0x1985ab['push']({'date':_0x3c4672,'changes':[_0x46f38b]});}const _0x5c5578=_0x1985ab[_0x52335f(0x1dd)](_0x3e81d1=>_0x3e81d1['date']==_0x3c4672);if(_0x5c5578){let _0x83101b=!![];_0x5c5578[_0x52335f(0x1d0)][_0x52335f(0x1ee)](_0xb275c8=>{const _0x4e256a=_0x52335f;if(_0xb275c8[_0x4e256a(0x13d)]!=0x0)_0x83101b=![];}),_0x83101b&&(_0x1985ab=_0x1985ab['filter'](_0x5a7cb7=>{const _0x334d84=_0x52335f;return _0x5a7cb7[_0x334d84(0x20f)]!=_0x3c4672;}));}let _0x478dcd=dbConfig[_0x52335f(0x1be)](_0x52335f(0x253))['find']({'botID':botID})[_0x52335f(0x18d)]();_0x478dcd&&(dbConfig[_0x52335f(0x1be)](_0x52335f(0x253))[_0x52335f(0x1dd)]({'botID':botID})[_0x52335f(0x2f3)]({'liquidity':_0x1985ab})[_0x52335f(0x130)](),config[_0x52335f(0x2cd)]=_0x1985ab);logHistory(_0x52335f(0x23e),_0x52335f(0x2cc)+Math[_0x52335f(0x2ba)](_0x46f38b[_0x52335f(0x13d)])+'\x20'+_0x46f38b[_0x52335f(0x179)]+'\x20'+(_0x46f38b[_0x52335f(0x13d)]>0x0?'added':_0x52335f(0x265))+_0x52335f(0x15d)),proxyEmit(_0x52335f(0x1ac),emittedConfiguration());const _0xdb5c5=getNormalizedPerformance();emitPerformance(_0xdb5c5),getStartingBalances(_0xdb5c5),logger[_0x52335f(0x219)](_0x52335f(0x1e6));}else config[_0x52335f(0x227)]==_0x52335f(0x2b3)&&(config[_0x52335f(0x2cb)]?(await storeHeadless({'headless':![]}),logHistory(_0x52335f(0x23e),_0x52335f(0x2cc)+Math[_0x52335f(0x2ba)](_0x46f38b[_0x52335f(0x13d)])+'\x20'+_0x46f38b[_0x52335f(0x179)]+'\x20'+(_0x46f38b[_0x52335f(0x13d)]>0x0?'added':_0x52335f(0x265))+'\x20-\x20bot\x20switched\x20to\x20manual\x20mode')):logger['debug']('Portfolio\x20change\x20detected:\x20'+Math[_0x52335f(0x2ba)](_0x46f38b[_0x52335f(0x13d)])+'\x20'+_0x46f38b[_0x52335f(0x179)]+'\x20'+(_0x46f38b['number']>0x0?_0x52335f(0x223):_0x52335f(0x265))+_0x52335f(0x284)));}else logger[_0x52335f(0x219)](_0x52335f(0x15b)+Math['abs'](_0x46f38b[_0x52335f(0x13d)])+'\x20'+_0x46f38b[_0x52335f(0x179)]+'\x20'+(_0x46f38b['number']>0x0?_0x52335f(0x223):_0x52335f(0x265)));}else logger[_0x52335f(0x219)](_0x52335f(0x2cc)+Math[_0x52335f(0x2ba)](_0x46f38b[_0x52335f(0x13d)])+'\x20'+_0x46f38b[_0x52335f(0x179)]+'\x20'+(_0x46f38b[_0x52335f(0x13d)]>0x0?_0x52335f(0x223):_0x52335f(0x265))+_0x52335f(0x193));}currentCoins=_0x35fcc6,currentCoinsAll=_0x56fec5;}}catch(_0x5344da){if(!exchangeStopped)await handleError(_0x5344da,'detectLiquidityChange()');}transactionDetectionOngoing=![];}async function watchTransactions(){await sleep(0x14*0x3e8);while(!![]){!botPaused&&!blockTransactionDetection&&coinsLoaded?(detectLiquidityChange(),await sleep(watchTransactionsInterval)):await sleep(0x3e8);}}async function loadSymbols(){const _0x3c65f9=_0x518395;try{markets=await exchange[_0x3c65f9(0x26a)](!![]),allSymbols=[],Object[_0x3c65f9(0x298)](markets)[_0x3c65f9(0x1ee)](_0x204812=>{const _0x550f14=_0x3c65f9;_0x204812[0x1][_0x550f14(0x23c)]&&_0x204812[0x1][_0x550f14(0x1dc)]&&allSymbols[_0x550f14(0x2c9)](_0x204812[0x0]);});}catch(_0x19cd4f){markets?logger[_0x3c65f9(0x219)](_0x3c65f9(0x2e4)+_0x19cd4f['toString']()):(loading[_0x3c65f9(0x1ce)]=!![],emitLoadingProgress(),_0x19cd4f['toString']()[_0x3c65f9(0x135)]()[_0x3c65f9(0x2f0)](_0x3c65f9(0x15e))||_0x19cd4f[_0x3c65f9(0x2a1)]()['toLowerCase']()[_0x3c65f9(0x2f0)](_0x3c65f9(0x2de))?logHistory(_0x3c65f9(0x164),_0x3c65f9(0x2a0)):handleErrorNoStop(_0x19cd4f,_0x3c65f9(0x27a),!![]),logHistory(_0x3c65f9(0x164),_0x3c65f9(0x268)),logHistory(_0x3c65f9(0x164),'Pausing\x20for\x20'+loadCoinsRetryInterval/0xea60+'\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again'),logger[_0x3c65f9(0x219)](_0x3c65f9(0x1f8),_0x19cd4f),botPaused=!![],await sleep(loadCoinsRetryInterval),restartBot());}}function validateSymbols(_0x1c010a){const _0xd3f892=_0x518395;let _0x2f171c=[];return _0x1c010a[_0xd3f892(0x1ee)](_0xd99dc0=>{const _0x4d2499=_0xd3f892;!allSymbols['includes'](_0xd99dc0)?logHistory(_0x4d2499(0x164),_0x4d2499(0x1a4)+_0xd99dc0+'\x20-\x20exclude\x20coin\x20in\x20the\x20configuration'):_0x2f171c[_0x4d2499(0x2c9)](_0xd99dc0);}),_0x2f171c;}async function initclient(){const _0x303d95=_0x518395;proxyEmit('configuration',emittedConfiguration()),proxyEmit(_0x303d95(0x1fd),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x303d95(0x141),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x5bd87f=getNormalizedPerformance();emitPerformance(_0x5bd87f),getStartingBalances(_0x5bd87f);}async function toggleBotMode(){const _0x564064=_0x518395;let _0x29676e=dbConfig[_0x564064(0x1be)]('bot')[_0x564064(0x1dd)]({'botID':botID})[_0x564064(0x18d)]();if(_0x29676e){const _0x40081b=!_0x29676e[_0x564064(0x2cb)];dbConfig[_0x564064(0x1be)]('bot')[_0x564064(0x1dd)]({'botID':botID})['assign']({'headless':_0x40081b})[_0x564064(0x130)](),config['headless']=_0x40081b,proxyEmit('configuration',emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0xb2a6c0=_0x518395;process[_0xb2a6c0(0x256)]({'updatebotmanager':!![]},_0x18215e=>{}),logger[_0xb2a6c0(0x219)](_0xb2a6c0(0x292)+config[_0xb2a6c0(0x2cb)]);}async function loadCoins(_0x17169f){const _0x5069d4=_0x518395;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0xe564c5,_0x175172=0x0,_0x4c8630=0x0;_0x17169f[_0x5069d4(0x1ee)](_0x1339c6=>{loading['remainingSymbols']['push'](_0x1339c6);}),loadingCanceled=![];let _0x4e1658=![];while(_0xe564c5!=_0x17169f[_0x5069d4(0x17e)]+maxLoadingProgress){_0xe564c5=loadingProgress,_0x17169f[_0x5069d4(0x1ee)](_0x5ea8e9=>{const _0x482b54=_0x5069d4;if(gTicker[noslash(_0x5ea8e9)]){loading[_0x482b54(0x258)]=loading[_0x482b54(0x258)][_0x482b54(0x26c)](_0x3aeac6=>_0x3aeac6!=_0x5ea8e9);if(!watchedSymbols[_0x482b54(0x2f0)](_0x5ea8e9))watchedSymbols['push'](_0x5ea8e9);_0xe564c5++;}}),loading[_0x5069d4(0x230)]=Math[_0x5069d4(0x299)](_0xe564c5/(_0x17169f['length']+maxLoadingProgress)*0x64);loading[_0x5069d4(0x230)]!=0x64&&(_0x4c8630>0x1e*0x5&&(loading[_0x5069d4(0x177)]=!![],emitLoadingProgress()),_0x4c8630>0x78*0x5&&!_0x4e1658&&(_0x4e1658=!![],logHistory('error',_0x5069d4(0x1b6)+loading[_0x5069d4(0x258)]['join'](',\x20')+'\x20-\x20bot\x20not\x20started'),logHistory(_0x5069d4(0x164),_0x5069d4(0x1e1)+loadCoinsRetryInterval/0xea60+_0x5069d4(0x2ad)),loadingCanceled=!![],await sleep(loadCoinsRetryInterval),restartBot()));if(loadingCanceled){loading[_0x5069d4(0x1ce)]=!![],emitLoadingProgress();break;}else _0x175172!=loading[_0x5069d4(0x230)]&&(_0x175172=loading[_0x5069d4(0x230)],emitLoadingProgress()),_0x4c8630++,await sleep(0xc8);}_0xe564c5==_0x17169f[_0x5069d4(0x17e)]+maxLoadingProgress&&(coinsLoaded=!![],process[_0x5069d4(0x256)]({'status':_0x5069d4(0x23d),'live':_0x5069d4(0x293)},_0x439e60=>{}),_0x4e1658&&logHistory(_0x5069d4(0x23e),_0x5069d4(0x237)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){proxyEmit('configuration',{...emittedConfiguration(),'configstate':'loading-canceled'});}function emitLoadingProgress(){proxyEmit('coin-loading-progress',loading);}async function getFiat(){const _0x25caaf=_0x518395;let _0x34c861=gTicker[stablecoins['eur'][_0x25caaf(0x179)]],_0x384cae=gTicker[stablecoins['usd']['coin']];return{'eur':Number(_0x34c861),'usd':Number(_0x384cae)};}function capitalize(_0x1dc772){const _0x4f96a3=_0x518395;return _0x1dc772[_0x4f96a3(0x1ca)](0x0,0x1)[_0x4f96a3(0x16c)]()+_0x1dc772[_0x4f96a3(0x1ca)](0x1);}function supportedExchanges(){const _0x3565c0=_0x518395,_0x1fbbf6=['ws','fetchTickers',_0x3565c0(0x204),_0x3565c0(0x1df),_0x3565c0(0x16f),'cancelOrder','createOrder',_0x3565c0(0x1ed),_0x3565c0(0x202)];let _0x1c2d3c=[],_0x104a00=[],_0x12a344=ccxt[_0x3565c0(0x13b)]['exchanges'];_0x12a344[_0x3565c0(0x1ee)](_0x4b561b=>{const _0x4a8896=_0x3565c0;try{const _0x440127=new ccxt[(_0x4a8896(0x13b))][_0x4b561b]();_0x104a00[_0x4a8896(0x2c9)](_0x440127);}catch(_0x49fb4b){}}),_0x104a00[_0x3565c0(0x1ee)](_0x28763d=>{const _0x270875=_0x3565c0;let _0x2f126f=0x0;_0x1fbbf6['forEach'](_0x59b0a7=>{const _0x2eb338=_0x310a;_0x59b0a7 in _0x28763d[_0x2eb338(0x1d9)]&&_0x28763d['has'][_0x59b0a7]&&_0x2f126f++;}),_0x2f126f==_0x1fbbf6[_0x270875(0x17e)]&&(!excludedExchanges[_0x270875(0x2f0)](_0x28763d['id'])&&_0x1c2d3c[_0x270875(0x2c9)](capitalize(_0x28763d['id'])));});let _0x151000=[];return _0x12a344[_0x3565c0(0x1ee)](_0x17502a=>{const _0x16a58c=_0x3565c0;_0x17502a=capitalize(_0x17502a);if(!_0x1c2d3c['includes'](_0x17502a))_0x151000[_0x16a58c(0x2c9)](_0x17502a);}),_0x1c2d3c;}function setStartDatePerformance(){const _0x2c7b51=_0x518395;if(config&&config[_0x2c7b51(0x2cd)][0x0][_0x2c7b51(0x1d0)][_0x2c7b51(0x17e)]!=0x0){const _0x49c8d5=config['liquidity'][0x0]['changes'];dbPerformance[_0x2c7b51(0x1be)](_0x2c7b51(0x26e))[_0x2c7b51(0x1dd)]({'date':config[_0x2c7b51(0x266)]})[_0x2c7b51(0x2f3)]({'coins':_0x49c8d5})[_0x2c7b51(0x130)]();}}function calculatePnL(_0x1674c1,_0x5dd67d,_0x1a78cd,_0x2530af,_0xe128c5,_0x56986e){const _0x20ad35=_0x518395;!_0x1674c1[_0x20ad35(0x2f0)]('/'+config['basecoin'])&&(_0x1a78cd=_0x1a78cd==_0x20ad35(0x257)?'sell':_0x20ad35(0x257));!_0x56986e[_0x5dd67d]&&(_0x56986e[_0x5dd67d]={'number':0x0,'sells':0x0,'buys':0x0,'breakeven':0x0,'realizedPnL':0x0});let _0x12e73f=0x0,_0x56e7fe,_0x10c702;if(_0x1a78cd==_0x20ad35(0x257))_0x10c702=_0x56986e[_0x5dd67d]['number']*_0x56986e[_0x5dd67d]['breakeven']+_0xe128c5*_0x2530af,_0x56986e[_0x5dd67d][_0x20ad35(0x13d)]+=_0x2530af,_0x56986e[_0x5dd67d]['breakeven']=_0x56986e[_0x5dd67d]['number']!=0x0?_0x10c702/_0x56986e[_0x5dd67d][_0x20ad35(0x13d)]:0x0,_0x56986e[_0x5dd67d]['buys']++;else _0x1a78cd==_0x20ad35(0x17a)&&(_0x56e7fe=Math['min'](_0x56986e[_0x5dd67d]['number'],_0x2530af),_0x12e73f=(_0xe128c5-_0x56986e[_0x5dd67d][_0x20ad35(0x140)])*_0x56e7fe,_0x10c702=Math['max'](_0x56986e[_0x5dd67d][_0x20ad35(0x13d)]*_0x56986e[_0x5dd67d][_0x20ad35(0x140)]-_0x56e7fe*_0x56986e[_0x5dd67d][_0x20ad35(0x140)],0x0),_0x56986e[_0x5dd67d][_0x20ad35(0x13d)]-=_0x56e7fe,_0x56986e[_0x5dd67d]['breakeven']=_0x56986e[_0x5dd67d]['number']!=0x0?_0x10c702/_0x56986e[_0x5dd67d]['number']:0x0,_0x56986e[_0x5dd67d]['realizedPnL']+=_0x12e73f,_0x56986e[_0x5dd67d][_0x20ad35(0x2d5)]++);return _0x12e73f;}async function generatePnL(){const _0x2b6b5d=_0x518395;pnlGenerationNeeded=![],logger[_0x2b6b5d(0x219)](_0x2b6b5d(0x209));const _0xa2ca8e=dbLogs['get'](_0x2b6b5d(0x281))[_0x2b6b5d(0x18d)]();let _0x1e1c36={},_0x4040bc=0x0,_0x6c992e=0x0,_0x438337=config['startdate'];const _0x12cb1a=fns['parse'](_0x438337,_0x2b6b5d(0x1d4),new Date()),_0x9c1ac5=new Date();let _0x2f682e=0x0;for(let _0x36e590=_0x12cb1a;!fns['isBefore'](_0x9c1ac5,_0x36e590);_0x36e590=fns[_0x2b6b5d(0x136)](_0x36e590,0x1)){const _0xfbd24d=fns[_0x2b6b5d(0x12d)](_0x36e590,'yyyy/MM/dd');while(_0x4040bc<_0xa2ca8e['length']){const _0x4df9f3=new Date(_0xa2ca8e[_0x4040bc][_0x2b6b5d(0x226)]);if(fns['isBefore'](_0x4df9f3,_0x36e590))_0x4040bc++;else{if(_0xa2ca8e[_0x4040bc][_0x2b6b5d(0x226)][_0x2b6b5d(0x2f0)](_0xfbd24d)){const _0x9a6a4e=_0xa2ca8e[_0x4040bc];if(_0x9a6a4e[_0x2b6b5d(0x173)]===_0x2b6b5d(0x14a)&&(_0x9a6a4e['event'][_0x2b6b5d(0x2f0)](_0x2b6b5d(0x2c4))||_0x9a6a4e[_0x2b6b5d(0x1a8)]['includes'](_0x2b6b5d(0x1ba)))){const _0x49e9b0=_0x9a6a4e[_0x2b6b5d(0x1a8)]['match'](/([A-Z]+\/[A-Z]+) (sell|buy) #([\d.]+) @([\d.]+)/);if(_0x49e9b0){const [,_0x1762df,_0x4fc7c8,_0x4ca6e6,_0x158279]=_0x49e9b0,_0x11ca8f=_0x1762df[_0x2b6b5d(0x2f0)]('/'+config[_0x2b6b5d(0x241)])?_0x1762df['split']('/')[0x0]:_0x1762df[_0x2b6b5d(0x296)]('/')[0x1],_0x3ef4b4=calculatePnL(_0x1762df,_0x11ca8f,_0x4fc7c8,parseFloat(_0x4ca6e6),parseFloat(_0x158279),_0x1e1c36);_0x6c992e+=_0x3ef4b4;}}_0x4040bc++;}else break;}}dbPerformance[_0x2b6b5d(0x1be)](_0x2b6b5d(0x26e))[_0x2b6b5d(0x1dd)]({'date':_0xfbd24d})[_0x2b6b5d(0x2f3)]({'pnl':_0x6c992e})[_0x2b6b5d(0x130)]();}dbCoinResults[_0x2b6b5d(0x29d)](_0x2b6b5d(0x272),_0x1e1c36)[_0x2b6b5d(0x130)](),logger[_0x2b6b5d(0x219)]('Generated\x20PnL\x20data');const _0x3b9441=getNormalizedPerformance();emitPerformance(_0x3b9441);}async function updatePnL(_0x32b6ba){const _0x5d2cd8=_0x518395,{symbol:_0x25a357,coin:_0x4425b4,amount:_0x3f085,price:_0x370dd6,side:_0x36b458,reverse:_0x394476}=_0x32b6ba;let _0x51b892=dbCoinResults['get'](_0x5d2cd8(0x272))['value']();const _0x2da97b=calculatePnL(_0x25a357,_0x4425b4,_0x36b458,_0x3f085,_0x370dd6,_0x51b892);dbCoinResults['set'](_0x5d2cd8(0x272),_0x51b892)['write']();const _0x2c872e=getTimeStamp()['split']('\x20')[0x0];let _0x5b370e=dbPerformance['get']('data')[_0x5d2cd8(0x1dd)]({'date':_0x2c872e})[_0x5d2cd8(0x18d)]();_0x5b370e?(_0x5b370e[_0x5d2cd8(0x24e)]+=_0x2da97b,dbPerformance[_0x5d2cd8(0x1be)](_0x5d2cd8(0x26e))[_0x5d2cd8(0x1dd)]({'date':_0x2c872e})[_0x5d2cd8(0x2f3)](_0x5b370e)[_0x5d2cd8(0x130)]()):await storePerformance();const _0x3e65dc=getNormalizedPerformance();emitPerformance(_0x3e65dc);}async function validate24hChanges(){const _0x3f56e7=_0x518395;for(const _0x555426 of currentCoins){if(_0x555426[_0x3f56e7(0x179)]!=config[_0x3f56e7(0x241)]){let _0x50c650;_0x555426[_0x3f56e7(0x1d5)]?_0x50c650=formatResult((0x1/(gChange[_0x555426['symbol']]/0x64+0x1)-0x1)*0x64,0x3):_0x50c650=gChange[_0x555426[_0x3f56e7(0x2da)]],_0x50c650<config[_0x3f56e7(0x132)]&&(logHistory(_0x3f56e7(0x164),_0x555426[_0x3f56e7(0x179)]+_0x3f56e7(0x195)+_0x50c650+'%'),logHistory(_0x3f56e7(0x164),_0x3f56e7(0x188)),logHistory(_0x3f56e7(0x164),_0x3f56e7(0x171)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x2dc7e2,_0x21042f){const _0x1524e7=_0x518395;if(!_0x2dc7e2)return!![];const _0x2a33a4=_0x21042f['split']('.'),_0xc307aa=_0x2dc7e2['split']('.');for(var _0x3cb642=0x0;_0x3cb642<_0xc307aa[_0x1524e7(0x17e)];_0x3cb642++){const _0x5403e7=~~_0xc307aa[_0x3cb642],_0x4a4215=~~_0x2a33a4[_0x3cb642];if(_0x5403e7<_0x4a4215)return!![];if(_0x5403e7>_0x4a4215)return![];}return![];}async function oneTimeMigration(){const _0x19c660=_0x518395;let _0x1ac741=dbLogs['get'](_0x19c660(0x139))[_0x19c660(0x18d)]();if(isOlderVersion(_0x1ac741,_0x19c660(0x2e0))){let _0x38853d=[];const _0x2b3453=dbLogs[_0x19c660(0x1be)]('logs')['value']();_0x2b3453[_0x19c660(0x1ee)](_0x59f0db=>{const _0xc9c870=_0x19c660;_0x38853d['push']({'time':_0x59f0db['time'],'type':_0x59f0db[_0xc9c870(0x173)],'event':_0x59f0db['event']});}),dbLogs['get'](_0x19c660(0x281))[_0x19c660(0x2f3)](_0x38853d)['write']();}let _0x58ee72=dbConfig[_0x19c660(0x1be)](_0x19c660(0x139))[_0x19c660(0x18d)]();if(isOlderVersion(_0x58ee72,'2.3.5')){let _0xf3370=dbConfig[_0x19c660(0x1be)](_0x19c660(0x253))['find']({'botID':botID})['value']();if(_0xf3370){let _0x14344e=[];_0xf3370[_0x19c660(0x175)][_0x19c660(0x1ee)](_0x415166=>{const _0x407502=_0x19c660;_0x14344e['push']({'coin':_0x415166['coin'],'number':_0x415166[_0x407502(0x283)],'price':_0x415166[_0x407502(0x246)]}),delete _0x415166[_0x407502(0x283)],delete _0x415166[_0x407502(0x246)];});if(_0x14344e[_0x19c660(0x17e)]!==0x0)fs[_0x19c660(0x2ff)](configbackuppath+('starting-balance-'+botID+_0x19c660(0x26f)),JSON['stringify'](_0x14344e,null,0x4),function(_0x2b4912){if(_0x2b4912){}});const _0x49f166=(_0x37e514,_0x1b6d7d)=>{const _0x2eca58=_0x19c660;let _0x15d601=[];_0x1b6d7d['forEach'](_0x403211=>{const _0x492a79=_0x310a,_0x7f1ebc=_0x37e514[_0x492a79(0x1dd)](_0x90b1be=>_0x90b1be['coin']==_0x403211[_0x492a79(0x179)]);if(!_0x7f1ebc)_0x15d601[_0x492a79(0x2c9)](_0x403211);});let _0xf9a71f=[];return _0x37e514[_0x2eca58(0x1ee)](_0x25392d=>{const _0xcad7fb=_0x2eca58,_0x588f5b=_0x1b6d7d['find'](_0x4362f4=>_0x4362f4[_0xcad7fb(0x179)]==_0x25392d[_0xcad7fb(0x179)]);if(!_0x588f5b||_0x588f5b[_0xcad7fb(0x13d)]==0x0&&_0x25392d[_0xcad7fb(0x13d)]!=0x0)_0xf9a71f[_0xcad7fb(0x2c9)](_0x25392d);}),{'missingDay1':_0x15d601,'notInDay2':_0xf9a71f};},_0xe427fa=dbPerformance[_0x19c660(0x1be)]('data')['cloneDeep']()['value']();if(_0xe427fa[_0x19c660(0x17e)]>0x1){const {missingDay1:_0x5cb34a,notInDay2:_0x521315}=_0x49f166(_0x14344e,_0xe427fa[0x1]['coins']);_0x14344e=[..._0x14344e,..._0x5cb34a],_0x521315['forEach'](_0x3a5c22=>{const _0xfa8f3c=_0x19c660;let _0x273217=_0x14344e[_0xfa8f3c(0x1f9)](_0x5eec95=>_0x5eec95[_0xfa8f3c(0x179)]==_0x3a5c22[_0xfa8f3c(0x179)]);_0x273217!=-0x1&&_0x14344e[_0xfa8f3c(0x1f1)](_0x273217,0x1);});}_0x14344e[_0x19c660(0x2e8)]((_0x192a00,_0x9af683)=>_0x192a00[_0x19c660(0x179)]>_0x9af683[_0x19c660(0x179)]?0x1:_0x9af683['coin']>_0x192a00[_0x19c660(0x179)]?-0x1:0x0);let _0x4b4da3=[{'date':_0xf3370[_0x19c660(0x266)],'changes':_0x14344e}];_0xe427fa[_0x19c660(0x17e)]>0x2&&_0xe427fa[_0x19c660(0x1ee)]((_0x12498d,_0x531bb7)=>{const _0x4b3015=_0x19c660;if(_0x531bb7>0x0&&_0x531bb7<_0xe427fa[_0x4b3015(0x17e)]-0x1){const {missingDay1:_0xcf9346,notInDay2:_0x473407}=_0x49f166(_0xe427fa[_0x531bb7][_0x4b3015(0x272)],_0xe427fa[_0x531bb7+0x1][_0x4b3015(0x272)]);_0x14344e=[],(_0xcf9346[_0x4b3015(0x17e)]!=0x0||_0x473407[_0x4b3015(0x17e)]!=0x0)&&(_0xcf9346[_0x4b3015(0x17e)]!=0x0&&_0x14344e[_0x4b3015(0x2c9)](..._0xcf9346),_0x473407['length']!=0x0&&(_0x473407[_0x4b3015(0x1ee)](_0x49202f=>{const _0x1b539f=_0x4b3015;_0x49202f[_0x1b539f(0x13d)]=-_0x49202f['number'];}),_0x14344e[_0x4b3015(0x2c9)](..._0x473407)),_0x14344e[_0x4b3015(0x2e8)]((_0x320425,_0x13720d)=>_0x320425['coin']>_0x13720d[_0x4b3015(0x179)]?0x1:_0x13720d['coin']>_0x320425['coin']?-0x1:0x0),_0x4b4da3[_0x4b3015(0x2c9)]({'date':_0xe427fa[_0x531bb7+0x1][_0x4b3015(0x20f)],'changes':_0x14344e}));}}),dbConfig[_0x19c660(0x1be)]('bot')[_0x19c660(0x1dd)]({'botID':botID})['assign']({..._0xf3370,'liquidity':_0x4b4da3})[_0x19c660(0x130)]();}}if(isOlderVersion(_0x58ee72,_0x19c660(0x183))){let _0xb6221=dbConfig[_0x19c660(0x1be)](_0x19c660(0x253))['find']({'botID':botID})[_0x19c660(0x18d)]();if(_0xb6221){const _0x1d1b66=_0xb6221[_0x19c660(0x161)],_0x21a653=_0x1d1b66?capitalize(_0x1d1b66):_0x19c660(0x291);dbConfig[_0x19c660(0x1be)](_0x19c660(0x253))['find']({'botID':botID})['assign']({'exchange':_0x21a653})['write']();}}if(isOlderVersion(_0x58ee72,_0x19c660(0x300))){let _0x4db4fc=dbConfig[_0x19c660(0x1be)]('bot')[_0x19c660(0x1dd)]({'botID':botID})['value']();if(_0x4db4fc){const _0x1251a8=_0x4db4fc[_0x19c660(0x25a)],_0x2d4e12=_0x1251a8?_0x19c660(0x21d):![];dbConfig[_0x19c660(0x1be)](_0x19c660(0x253))[_0x19c660(0x1dd)]({'botID':botID})['assign']({'marketcapEnabled':_0x2d4e12})['write']();}}if(isOlderVersion(_0x58ee72,_0x19c660(0x16a))){let _0x38dc98=dbConfig['get'](_0x19c660(0x253))[_0x19c660(0x1dd)]({'botID':botID})[_0x19c660(0x18d)]();if(_0x38dc98){const _0x459a9d=_0x38dc98[_0x19c660(0x227)],_0x306762=_0x459a9d?_0x19c660(0x134):![];dbConfig[_0x19c660(0x1be)](_0x19c660(0x253))[_0x19c660(0x1dd)]({'botID':botID})[_0x19c660(0x2f3)]({'autoliquidity':_0x306762})[_0x19c660(0x130)]();}}let _0x496c23=dbPerformance[_0x19c660(0x1be)](_0x19c660(0x139))[_0x19c660(0x18d)]();isOlderVersion(_0x496c23,_0x19c660(0x2e0))&&setStartDatePerformance();let _0x26f32b=dbCoinResults[_0x19c660(0x1be)](_0x19c660(0x139))[_0x19c660(0x18d)]();if(isOlderVersion(_0x26f32b,_0x19c660(0x2e7))){let _0x2163b7=dbCoinResults[_0x19c660(0x1be)](_0x19c660(0x272))[_0x19c660(0x18d)]();if(_0x2163b7[_0x19c660(0x17e)]!=0x0)pnlGenerationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x292c20=_0x518395;dbConfig[_0x292c20(0x29d)](_0x292c20(0x139),serverversion)['write'](),dbPerformance['set'](_0x292c20(0x139),serverversion)[_0x292c20(0x130)](),dbLogs['set'](_0x292c20(0x139),serverversion)[_0x292c20(0x130)](),dbCoinResults[_0x292c20(0x29d)](_0x292c20(0x139),serverversion)[_0x292c20(0x130)]();}function getConfiguration(_0x59bac8){const _0x3ac5e7=_0x518395;let _0x2cfa82=dbConfig[_0x3ac5e7(0x1be)](_0x3ac5e7(0x253))['find']({'botID':_0x59bac8})[_0x3ac5e7(0x18d)]();if(_0x2cfa82){let _0x162176=![];typeof _0x2cfa82[_0x3ac5e7(0x185)]=='string'&&(_0x2cfa82={..._0x2cfa82,'threshold':Number(_0x2cfa82[_0x3ac5e7(0x185)])},_0x162176=!![]),_0x2cfa82[_0x3ac5e7(0x132)]==undefined&&(_0x2cfa82={..._0x2cfa82,'change24h':-0x14},_0x162176=!![]),_0x2cfa82[_0x3ac5e7(0x1f3)]==undefined&&(_0x2cfa82={..._0x2cfa82,'fiat':_0x3ac5e7(0x21b)},_0x162176=!![]),_0x2cfa82[_0x3ac5e7(0x14d)]==undefined&&(_0x2cfa82={..._0x2cfa82,'onepagemode':settings[_0x3ac5e7(0x14d)]},_0x162176=!![]),_0x2cfa82[_0x3ac5e7(0x24b)]==undefined&&(_0x2cfa82={..._0x2cfa82,'colorscheme':'red_yellow_blue'},_0x162176=!![]),_0x2cfa82[_0x3ac5e7(0x227)]==undefined&&(_0x2cfa82={..._0x2cfa82,'autoliquidity':'update-liquidity'},_0x162176=!![]),_0x2cfa82['marketcapApi']==undefined&&(_0x2cfa82={..._0x2cfa82,'marketcapApi':settings['marketcapApi']?!![]:![]},_0x162176=!![]),_0x2cfa82[_0x3ac5e7(0x25a)]==undefined&&(_0x2cfa82={..._0x2cfa82,'marketcapEnabled':![]},_0x162176=!![]),_0x162176&&(_0x2cfa82={'botID':_0x2cfa82[_0x3ac5e7(0x14c)],'exchange':_0x2cfa82[_0x3ac5e7(0x161)],'apiKey':_0x2cfa82[_0x3ac5e7(0x18a)],'apiSecret':_0x2cfa82['apiSecret'],'apiPassword':_0x2cfa82['apiPassword'],'basecoin':_0x2cfa82[_0x3ac5e7(0x241)],'botname':_0x2cfa82['botname'],'showname':_0x2cfa82['showname'],'threshold':_0x2cfa82[_0x3ac5e7(0x185)],'ordertype':_0x2cfa82[_0x3ac5e7(0x1ef)],'timeout':_0x2cfa82[_0x3ac5e7(0x177)],'fiat':_0x2cfa82['fiat'],'startdate':_0x2cfa82[_0x3ac5e7(0x266)],'recreate':_0x2cfa82[_0x3ac5e7(0x235)],'timeshift':_0x2cfa82[_0x3ac5e7(0x211)],'onepagemode':_0x2cfa82[_0x3ac5e7(0x14d)],'headless':_0x2cfa82[_0x3ac5e7(0x2cb)],'cooldown':_0x2cfa82[_0x3ac5e7(0x2c2)],'change24h':_0x2cfa82[_0x3ac5e7(0x132)],'emojibuy':_0x2cfa82['emojibuy'],'emojisell':_0x2cfa82['emojisell'],'colorscheme':_0x2cfa82['colorscheme'],'marketcapApi':_0x2cfa82[_0x3ac5e7(0x280)],'marketcapEnabled':_0x2cfa82[_0x3ac5e7(0x25a)],'portfolio':_0x2cfa82[_0x3ac5e7(0x175)],'autoliquidity':_0x2cfa82[_0x3ac5e7(0x227)],'liquidity':_0x2cfa82['liquidity'],'openOrders':_0x2cfa82[_0x3ac5e7(0x133)]},dbConfig['get'](_0x3ac5e7(0x253))[_0x3ac5e7(0x2fc)]()['write'](),dbConfig['get'](_0x3ac5e7(0x253))['push'](_0x2cfa82)[_0x3ac5e7(0x130)]());}else _0x2cfa82={'botID':_0x59bac8,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x3ac5e7(0x2d2)+_0x59bac8,'showname':![],'threshold':0x3,'ordertype':_0x3ac5e7(0x2e3),'timeout':0x14,'fiat':_0x3ac5e7(0x21b),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x3ac5e7(0x211)],'onepagemode':settings[_0x3ac5e7(0x14d)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':'red_yellow_blue','marketcapApi':settings[_0x3ac5e7(0x280)]?!![]:![],'marketcapEnabled':![],'portfolio':[],'autoliquidity':_0x3ac5e7(0x134),'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x2cfa82;}function emittedConfiguration(){const _0x12e70d=_0x518395;let _0x220c9d;if(config[_0x12e70d(0x18a)]=='')_0x220c9d={...config,'configstate':_0x12e70d(0x172)};else config[_0x12e70d(0x18a)]=='***'?_0x220c9d={...config,'configstate':'recovery'}:(_0x220c9d={...config,'apiKey':'************','apiSecret':_0x12e70d(0x297)},config[_0x12e70d(0x2ac)]&&(_0x220c9d[_0x12e70d(0x2ac)]=_0x12e70d(0x297)));return _0x220c9d[_0x12e70d(0x1b2)]=enableFiatToggle,_0x220c9d;}function getSettings(){const _0x43e62c=_0x518395;return dbSettings['get'](_0x43e62c(0x144))[_0x43e62c(0x18d)]();}function getSecure(){const _0x5ab64a=_0x518395;return dbSecure[_0x5ab64a(0x1be)](_0x5ab64a(0x2e6))['value']()||{};}function updateTimeshift(_0x27e040){const _0xc1e195=_0x518395;let _0x1255e9=dbConfig[_0xc1e195(0x1be)](_0xc1e195(0x253))[_0xc1e195(0x1dd)]({'botID':botID})[_0xc1e195(0x18d)]();_0x1255e9&&dbConfig[_0xc1e195(0x1be)](_0xc1e195(0x253))[_0xc1e195(0x1dd)]({'botID':botID})[_0xc1e195(0x2f3)]({'timeshift':_0x27e040})[_0xc1e195(0x130)](),config[_0xc1e195(0x211)]=_0x27e040,proxyEmit(_0xc1e195(0x1ac),emittedConfiguration());}function updateOnepagemode(_0x1c84c8){const _0x474710=_0x518395;let _0x5bc39a=dbConfig['get'](_0x474710(0x253))['find']({'botID':botID})[_0x474710(0x18d)]();_0x5bc39a&&dbConfig[_0x474710(0x1be)](_0x474710(0x253))[_0x474710(0x1dd)]({'botID':botID})[_0x474710(0x2f3)]({'onepagemode':_0x1c84c8})['write'](),config[_0x474710(0x14d)]=_0x1c84c8,proxyEmit(_0x474710(0x1ac),emittedConfiguration());}function updateMarketcapApi(_0x2d1510){const _0x2ec0c5=_0x518395,_0xafd640=_0x2d1510?!![]:![];let _0x36f0c0=dbConfig[_0x2ec0c5(0x1be)](_0x2ec0c5(0x253))[_0x2ec0c5(0x1dd)]({'botID':botID})[_0x2ec0c5(0x18d)]();_0x36f0c0&&dbConfig[_0x2ec0c5(0x1be)](_0x2ec0c5(0x253))[_0x2ec0c5(0x1dd)]({'botID':botID})[_0x2ec0c5(0x2f3)]({'marketcapApi':_0xafd640})[_0x2ec0c5(0x130)](),config[_0x2ec0c5(0x280)]=_0xafd640,getMarketCap(),proxyEmit(_0x2ec0c5(0x1ac),emittedConfiguration());}async function storeConfiguration(_0xec028a){const _0x4ee821=_0x518395;logger[_0x4ee821(0x219)](_0x4ee821(0x27b));let _0x297642=![];_0xec028a[_0x4ee821(0x2b2)]&&(_0xec028a[_0x4ee821(0x2b2)]==_0x4ee821(0x259)&&(_0x297642=!![]),delete _0xec028a[_0x4ee821(0x2b2)]);if(pidBalances)clearTimeout(pidBalances);setBlockTransactionDetection(!![]);let _0x55e17c=![],_0x5dd4f1=![],_0x4ced9d=[];_0xec028a[_0x4ee821(0x175)]['forEach'](_0x1f237b=>{const _0x40fd06=_0x4ee821;if(!_0x1f237b[_0x40fd06(0x1bb)]&&_0x1f237b[_0x40fd06(0x179)]!=_0xec028a[_0x40fd06(0x241)])_0x4ced9d[_0x40fd06(0x2c9)](_0x1f237b[_0x40fd06(0x2da)]);}),_0x4ced9d[_0x4ee821(0x1ee)](_0x57c302=>{const _0x1a4cc7=_0x4ee821,_0x210c9b=currentCoins[_0x1a4cc7(0x1dd)](_0x5f07b3=>_0x5f07b3[_0x1a4cc7(0x2da)]==_0x57c302);!_0x210c9b&&(_0x55e17c=!![]);}),currentCoins[_0x4ee821(0x1ee)](_0x480ed0=>{const _0x6a90a=_0x4ee821;if(_0x480ed0['coin']!=config[_0x6a90a(0x241)]){const _0x2dabd7=_0x4ced9d[_0x6a90a(0x1dd)](_0x3d0244=>_0x3d0244==_0x480ed0[_0x6a90a(0x2da)]);!_0x2dabd7&&(_0x55e17c=!![]);}}),_0xec028a['portfolio'][_0x4ee821(0x1ee)](_0x4ba2dd=>{const _0x5061a7=_0x4ee821,_0x2296da=config[_0x5061a7(0x175)][_0x5061a7(0x1dd)](_0x142bff=>_0x142bff['coin']==_0x4ba2dd[_0x5061a7(0x179)]);if(_0x2296da&&_0x4ba2dd[_0x5061a7(0x1ae)]!=_0x2296da[_0x5061a7(0x1ae)])_0x5dd4f1=!![];});let _0x136263=dbConfig['get']('bot')[_0x4ee821(0x1dd)]({'botID':botID})[_0x4ee821(0x18d)]();_0xec028a={..._0xec028a,'apiKey':decryptRSA(secure[_0x4ee821(0x19c)],_0xec028a[_0x4ee821(0x18a)]),'apiSecret':decryptRSA(secure[_0x4ee821(0x19c)],_0xec028a[_0x4ee821(0x248)])};_0xec028a['apiPassword']&&(_0xec028a[_0x4ee821(0x2ac)]=decryptRSA(secure[_0x4ee821(0x19c)],_0xec028a['apiPassword']));let _0x1da438=![];if(_0x136263){_0xec028a[_0x4ee821(0x18a)]=='************'?_0xec028a['apiKey']=config[_0x4ee821(0x18a)]:_0x1da438=!![];_0xec028a[_0x4ee821(0x248)]==_0x4ee821(0x297)?_0xec028a[_0x4ee821(0x248)]=config[_0x4ee821(0x248)]:_0x1da438=!![];if(_0xec028a[_0x4ee821(0x2ac)]=='************')_0xec028a[_0x4ee821(0x2ac)]=config['apiPassword'];else{if(_0xec028a['apiPassword'])_0x1da438=!![];}dbConfig[_0x4ee821(0x1be)](_0x4ee821(0x253))[_0x4ee821(0x1dd)]({'botID':botID})[_0x4ee821(0x2f3)](_0xec028a)['write']();}else dbConfig[_0x4ee821(0x1be)](_0x4ee821(0x253))[_0x4ee821(0x2c9)](_0xec028a)[_0x4ee821(0x130)](),_0x1da438=!![],process[_0x4ee821(0x256)]({'status':_0x4ee821(0x23d),'live':_0x4ee821(0x293)},_0x47e96a=>{});process[_0x4ee821(0x256)]({'botname':_0xec028a[_0x4ee821(0x242)]},_0xe7efea=>{}),config={..._0xec028a},updateBotManager(),proxyEmit('configuration-stored'),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x1da438)await reset(!![]);else _0x55e17c||_0x5dd4f1?await reset(![]):getBalances();setBlockTransactionDetection(![]);}async function storeHeadless(_0x5aad36){const _0x1a6ea4=_0x518395,_0x1ac9fd={...config,'headless':_0x5aad36[_0x1a6ea4(0x2cb)]};let _0x210f0c=dbConfig[_0x1a6ea4(0x1be)](_0x1a6ea4(0x253))[_0x1a6ea4(0x1dd)]({'botID':botID})[_0x1a6ea4(0x18d)]();_0x210f0c&&dbConfig['get']('bot')[_0x1a6ea4(0x1dd)]({'botID':botID})[_0x1a6ea4(0x2f3)](_0x1ac9fd)[_0x1a6ea4(0x130)](),config={..._0x1ac9fd},updateBotManager(),proxyEmit('configuration',emittedConfiguration());}async function storeFiat(_0x4a31e2){const _0x3369bb=_0x518395,_0x2e148f={...config,'fiat':_0x4a31e2};let _0x2149a3=dbConfig[_0x3369bb(0x1be)](_0x3369bb(0x253))['find']({'botID':botID})['value']();_0x2149a3&&dbConfig['get'](_0x3369bb(0x253))[_0x3369bb(0x1dd)]({'botID':botID})['assign'](_0x2e148f)[_0x3369bb(0x130)](),config={..._0x2e148f},proxyEmit(_0x3369bb(0x1ac),emittedConfiguration());}function resetHistory(){const _0x3aaca6=_0x518395;logger[_0x3aaca6(0x229)](_0x3aaca6(0x198));try{if(fs[_0x3aaca6(0x2ca)](path['join'](configpath,'bot-'+botID+_0x3aaca6(0x2fa))))fs[_0x3aaca6(0x217)](path[_0x3aaca6(0x2c8)](configpath,_0x3aaca6(0x23a)+botID+_0x3aaca6(0x2fa)));if(fs[_0x3aaca6(0x2ca)](path[_0x3aaca6(0x2c8)](configpath,'bot-'+botID+_0x3aaca6(0x1d6))))fs[_0x3aaca6(0x217)](path[_0x3aaca6(0x2c8)](configpath,'bot-'+botID+_0x3aaca6(0x1d6)));if(fs['existsSync'](path['join'](configpath,_0x3aaca6(0x23a)+botID+_0x3aaca6(0x290))))fs[_0x3aaca6(0x217)](path[_0x3aaca6(0x2c8)](configpath,_0x3aaca6(0x23a)+botID+_0x3aaca6(0x290)));}catch(_0x3330df){if(_0x3330df)logger[_0x3aaca6(0x229)]('Error\x20while\x20deleting\x20files:\x20',_0x3330df);}const _0x13cd61=getDate();let _0x2e10a6=[];currentCoins[_0x3aaca6(0x1ee)](_0x1213d6=>{const _0x461bbe=_0x3aaca6;_0x2e10a6['push']({'coin':_0x1213d6['coin'],'number':_0x1213d6[_0x461bbe(0x13d)],'price':_0x1213d6[_0x461bbe(0x289)]});});let _0x940dff=dbConfig[_0x3aaca6(0x1be)](_0x3aaca6(0x253))[_0x3aaca6(0x1dd)]({'botID':botID})[_0x3aaca6(0x18d)]();_0x940dff&&(dbConfig['get'](_0x3aaca6(0x253))[_0x3aaca6(0x1dd)]({'botID':botID})[_0x3aaca6(0x2f3)]({'liquidity':[{'date':_0x13cd61,'changes':_0x2e10a6}]})['write'](),config[_0x3aaca6(0x2cd)]=[]),restartBot(!![]);}function noslash(_0x281b6){const _0x5466f9=_0x518395;return _0x281b6[_0x5466f9(0x2c6)]('/','');}function _0x310a(_0x2326d9,_0x388493){const _0x54131b=_0x5c97();return _0x310a=function(_0x46165d,_0x4c7166){_0x46165d=_0x46165d-0x12d;let _0x5c97d4=_0x54131b[_0x46165d];return _0x5c97d4;},_0x310a(_0x2326d9,_0x388493);}function updateHighestFee(_0x4c5565){const _0x27df33=_0x518395;if(_0x4c5565[_0x27df33(0x1d5)]){let _0x5a894e={'filled':_0x4c5565[_0x27df33(0x1e2)]*_0x4c5565[_0x27df33(0x228)],'amount':_0x4c5565[_0x27df33(0x1e2)]*_0x4c5565[_0x27df33(0x228)],'side':_0x4c5565[_0x27df33(0x1b5)]==_0x27df33(0x17a)?_0x27df33(0x257):_0x27df33(0x17a),'price':0x1/_0x4c5565[_0x27df33(0x228)]};_0x4c5565={..._0x4c5565,..._0x5a894e};}const _0x3fb58a=defaultFee*_0x4c5565['filled']*_0x4c5565[_0x27df33(0x228)];lastFees[_0x27df33(0x22d)][_0x27df33(0x17e)]===0x14&&lastFees[_0x27df33(0x22d)]['shift'](),lastFees[_0x27df33(0x22d)][_0x27df33(0x2c9)](_0x3fb58a),lastFees[_0x27df33(0x155)]=Math[_0x27df33(0x273)](...lastFees[_0x27df33(0x22d)]);}async function updateNumberCoinsCcxt(_0x4c6df0){const _0x3a7b2a=_0x518395;logger['debug']('0\x20-\x20EXECUTION:\x20'+_0x4c6df0[_0x3a7b2a(0x2da)]+_0x3a7b2a(0x210)+_0x4c6df0[_0x3a7b2a(0x1f7)]+'\x20|\x20'+_0x4c6df0['filled']+_0x3a7b2a(0x208)+_0x4c6df0[_0x3a7b2a(0x23b)]+_0x3a7b2a(0x210)+_0x4c6df0['id']);let _0x317324=_0x4c6df0['status'],_0x2ba679=![];currentCoins[_0x3a7b2a(0x1ee)](_0x4de564=>{const _0x6991f9=_0x3a7b2a;_0x4de564[_0x6991f9(0x2da)]==_0x4c6df0['symbol']&&(_0x2ba679=!![]);});if(!_0x2ba679)return;const _0x1f9531=currentCoins[_0x3a7b2a(0x1dd)](_0x49656a=>_0x49656a[_0x3a7b2a(0x2da)]==_0x4c6df0[_0x3a7b2a(0x2da)]),_0x2d887a=_0x1f9531[_0x3a7b2a(0x179)],_0x43d597=_0x434ebe=>{const _0x5e1eeb=_0x3a7b2a,_0x9931d2=currentCoins['find'](_0x39b1f7=>_0x39b1f7['symbol']==_0x4c6df0[_0x5e1eeb(0x2da)]);if(_0x9931d2)_0x9931d2[_0x5e1eeb(0x203)]=_0x434ebe;};let _0x41c8f3=![];for(const _0x11366d of lastOrders){const _0x161265=0x64,_0x2e37eb=0x1388;let _0xd24b11=0x0;while(!_0x11366d[_0x3a7b2a(0x19f)]&&_0xd24b11*_0x161265<_0x2e37eb){_0xd24b11++,await sleep(_0x161265);}if(_0xd24b11>0x0)logger['debug']('Waited\x20'+_0xd24b11*_0x161265/0x3e8+'\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed');_0x11366d['orderId']==_0x4c6df0['id']&&(_0x41c8f3=!![]);}if(_0x317324==_0x3a7b2a(0x1ec)){_0x43d597(_0x3a7b2a(0x1ec));if(_0x4c6df0[_0x3a7b2a(0x1e2)]>0x0&&_0x4c6df0[_0x3a7b2a(0x1e2)]<_0x4c6df0[_0x3a7b2a(0x23b)]){if(_0x41c8f3){setBlockTransactionDetection(!![]),logger[_0x3a7b2a(0x219)](_0x3a7b2a(0x18b)+_0x4c6df0[_0x3a7b2a(0x1e2)]+')\x20known\x20order:\x20'+_0x4c6df0['id']);const _0x458510=await getCoins(balanceUpdateDelay,undefined,undefined,_0x2d887a);[currentCoins,currentCoinsAll]=_0x458510,setBlockTransactionDetection(![]);}else logger[_0x3a7b2a(0x219)](_0x3a7b2a(0x18b)+_0x4c6df0[_0x3a7b2a(0x1e2)]+_0x3a7b2a(0x27e)+_0x4c6df0['id']),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay);}}else{if(_0x317324==_0x3a7b2a(0x28d)){_0x43d597(_0x3a7b2a(0x28d)),lastOrders=lastOrders[_0x3a7b2a(0x26c)](_0x5aeceb=>_0x5aeceb[_0x3a7b2a(0x2da)]!=_0x4c6df0[_0x3a7b2a(0x2da)]);const _0x1db51c=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x1db51c,setBlockTransactionDetection(![]),await getOpenOrders(),handleOpenOrders();}else{if(_0x317324==_0x3a7b2a(0x1ad)){if(lastOrders)for(const _0x16776e of lastOrders){if(_0x16776e[_0x3a7b2a(0x19f)]==_0x4c6df0['id']){logger[_0x3a7b2a(0x219)](_0x3a7b2a(0x2f6)+_0x4c6df0['id']),_0x41c8f3=!![];if(_0x16776e[_0x3a7b2a(0x1e2)]==0x0){setBlockTransactionDetection(!![]),logger[_0x3a7b2a(0x219)](_0x3a7b2a(0x276)+_0x4c6df0['id']);if(_0x4c6df0['average'])_0x16776e['price']=_0x4c6df0[_0x3a7b2a(0x24c)];else{if(_0x4c6df0[_0x3a7b2a(0x228)])_0x16776e['price']=_0x4c6df0[_0x3a7b2a(0x228)];else{}}_0x16776e[_0x3a7b2a(0x1e2)]=_0x4c6df0[_0x3a7b2a(0x1e2)],updateHighestFee(_0x16776e);const _0x573602=await getCoins(balanceUpdateDelay,undefined,undefined,_0x2d887a);[currentCoins,currentCoinsAll]=_0x573602,setBlockTransactionDetection(![]),await validateOrders(),_0x43d597(_0x3a7b2a(0x1e2)),_0x16776e['fee']={'currency':_0x4c6df0[_0x3a7b2a(0x25f)]?_0x4c6df0[_0x3a7b2a(0x25f)]['currency']:null,'cost':_0x4c6df0[_0x3a7b2a(0x25f)]?_0x4c6df0['fee'][_0x3a7b2a(0x221)]:0x0},await updatePnL(_0x16776e);}}}!_0x41c8f3&&(logger[_0x3a7b2a(0x219)](_0x3a7b2a(0x1d3)+_0x4c6df0['id']),_0x43d597(_0x3a7b2a(0x1e2)),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay),await updateOpenOrders(),handleOpenOrders());}}}if(lastBalances){let _0x2a49ec=JSON[_0x3a7b2a(0x22c)](lastBalances[_0x3a7b2a(0x175)]);const _0x41559b=_0x2a49ec[_0x3a7b2a(0x1dd)](_0x1a1010=>_0x1a1010['symbol']==_0x4c6df0[_0x3a7b2a(0x2da)]);if(_0x41559b){if(_0x317324==_0x3a7b2a(0x1ec))_0x41559b[_0x3a7b2a(0x203)]=_0x41559b[_0x3a7b2a(0x203)]==_0x3a7b2a(0x1e2)?_0x3a7b2a(0x1e2):_0x3a7b2a(0x1ec);else{if(_0x317324==_0x3a7b2a(0x28d))_0x41559b['orderstatus']=_0x41559b['orderstatus']==_0x3a7b2a(0x1e2)?_0x3a7b2a(0x1e2):_0x3a7b2a(0x28d);else _0x317324==_0x3a7b2a(0x1ad)&&(_0x41559b[_0x3a7b2a(0x203)]=_0x3a7b2a(0x1e2));}}lastBalances={...lastBalances,'portfolio':JSON[_0x3a7b2a(0x180)](_0x2a49ec)},proxyEmit(_0x3a7b2a(0x141),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x2b9319=_0x518395;await getOpenOrders();let _0x2e441d=![];currentCoins[_0x2b9319(0x1ee)](_0x3efae7=>{const _0x38bc67=_0x2b9319;_0x2e441d=allOpenOrders['find'](_0x38b9a3=>_0x38b9a3[_0x38bc67(0x2da)]==_0x3efae7[_0x38bc67(0x2da)]),_0x3efae7[_0x38bc67(0x203)]=_0x2e441d?_0x38bc67(0x1ec):'none';});}async function fetchBalance(_0x2fa43b=!![]){const _0x373eed=_0x518395;let _0x7a1249,_0x27d914;try{return _0x7a1249=await exchange[_0x373eed(0x202)](),_0x27d914=_0x7a1249['total'],_0x27d914;}catch(_0x4c0ae1){return!_0x2fa43b?handleErrorNoStop(_0x4c0ae1,_0x373eed(0x263)):await handleError(_0x4c0ae1,_0x373eed(0x263)),![];}}async function getCoins(_0xbf1aa8=0x0,_0x20b415=!![],_0x52a7db=config['basecoin'],_0x294741){const _0x578916=_0x518395;let _0x267450=[],_0x3bd39b=[],_0xdfadec=[],_0x5f4dcb;if(_0xbf1aa8)await sleep(_0xbf1aa8);if(botPaused)return[currentCoins,currentCoinsAll];let _0x5d59c5=![],_0x2db290=0x0,_0x36a391,_0x34ce78;_0x294741&&(_0x36a391=currentCoins[_0x578916(0x1dd)](_0x176940=>_0x176940[_0x578916(0x179)]==_0x294741),_0x36a391&&(_0x34ce78=_0x36a391[_0x578916(0x2c3)],delete _0x36a391[_0x578916(0x2c3)]));while(!_0x5d59c5){_0x5f4dcb=await fetchBalance(_0x20b415);if(_0x5f4dcb){if(_0x294741){if(_0x5f4dcb[_0x294741]!=_0x34ce78)logger[_0x578916(0x219)](_0x578916(0x2a6)+_0x294741+':\x20'+_0x5f4dcb[_0x294741]+'\x20('+_0x34ce78+')'),_0x5d59c5=!![];else{logger[_0x578916(0x219)](_0x578916(0x2d8)+_0x294741+':\x20'+_0x5f4dcb[_0x294741]+'\x20('+_0x34ce78+')'),_0x2db290++;if(_0x2db290<balanceUpdateRetries)await sleep(balanceUpdateDelay);else{logger[_0x578916(0x219)](_0x578916(0x14b)+_0x2db290+_0x578916(0x1cc));break;}}}else break;}else return[currentCoins,currentCoinsAll];}for(const [_0x1f52d6,_0xb8abf6]of Object['entries'](_0x5f4dcb)){_0xdfadec[_0x578916(0x2c9)](_0x1f52d6);}config[_0x578916(0x175)][_0x578916(0x1ee)](_0x3b8ab0=>{const _0x16325e=_0x578916;!_0xdfadec[_0x16325e(0x2f0)](_0x3b8ab0[_0x16325e(0x179)])&&(_0x5f4dcb[_0x3b8ab0[_0x16325e(0x179)]]=0x0);});if(_0x52a7db=='')for(const [_0x58dabd,_0x28f8bb]of Object[_0x578916(0x298)](_0x5f4dcb)){_0x28f8bb!=0x0&&_0x267450[_0x578916(0x2c9)]({'coin':_0x58dabd});}else for(const [_0x3bb896,_0x2e91f0]of Object[_0x578916(0x298)](_0x5f4dcb)){const _0x568e2b=config['portfolio'][_0x578916(0x1dd)](_0x24e76e=>_0x24e76e[_0x578916(0x179)]==_0x3bb896),_0x4def54=_0x3bb896+'/'+_0x52a7db,_0x33fc39=_0x52a7db+'/'+_0x3bb896,_0x2f252a=currentCoins['find'](_0x20e459=>_0x20e459[_0x578916(0x179)]==_0x3bb896);if((_0x2e91f0!=0x0||_0x568e2b)&&(allSymbols[_0x578916(0x2f0)](_0x4def54)||_0x3bb896==_0x52a7db))_0x2f252a?_0x267450['push']({..._0x2f252a,'number':Math[_0x578916(0x273)](_0x2e91f0+(_0x568e2b&&_0x568e2b[_0x578916(0x1ae)]||0x0),0x0)}):_0x267450[_0x578916(0x2c9)]({'coin':_0x3bb896,'symbol':_0x4def54,'reverse':![],'number':Math[_0x578916(0x273)](_0x2e91f0+(_0x568e2b&&_0x568e2b[_0x578916(0x1ae)]||0x0),0x0),'orderstatus':_0x578916(0x1b8)});else{if((_0x2e91f0!=0x0||_0x568e2b)&&allSymbols[_0x578916(0x2f0)](_0x33fc39))_0x2f252a?_0x267450[_0x578916(0x2c9)]({..._0x2f252a,'number':Math[_0x578916(0x273)](_0x2e91f0+(_0x568e2b&&_0x568e2b[_0x578916(0x1ae)]||0x0),0x0)}):_0x267450['push']({'coin':_0x3bb896,'symbol':_0x33fc39,'reverse':!![],'number':Math[_0x578916(0x273)](_0x2e91f0+(_0x568e2b&&_0x568e2b[_0x578916(0x1ae)]||0x0),0x0),'orderstatus':_0x578916(0x1b8)});else _0x568e2b&&_0x267450['push']({'coin':_0x568e2b[_0x578916(0x179)],'symbol':_0x568e2b[_0x578916(0x2da)],'reverse':_0x568e2b[_0x578916(0x1d5)],'number':0x0,'orderstatus':_0x578916(0x1b8)});}}return _0x267450[_0x578916(0x2e8)]((_0x5c2fb4,_0x275d46)=>_0x5c2fb4[_0x578916(0x2dc)]<_0x275d46[_0x578916(0x2dc)]?0x1:_0x275d46[_0x578916(0x2dc)]<_0x5c2fb4[_0x578916(0x2dc)]?-0x1:0x0),_0x3bd39b=cloneDeep(_0x267450),_0x267450=_0x267450['filter'](_0x515c11=>{const _0x5282de=_0x578916,_0x49bde5=config['portfolio'][_0x5282de(0x1dd)](_0xbc9de1=>_0xbc9de1[_0x5282de(0x179)]==_0x515c11[_0x5282de(0x179)]);return _0x49bde5&&!_0x49bde5[_0x5282de(0x1bb)];}),[_0x267450,_0x3bd39b];}async function getOpenOrders(){const _0x321690=_0x518395;let _0x44850;allOpenOrders=[];try{for(const _0x353cb6 of config[_0x321690(0x175)]){!_0x353cb6[_0x321690(0x1bb)]&&_0x353cb6[_0x321690(0x179)]!=config[_0x321690(0x241)]&&(_0x44850=await exchange[_0x321690(0x1ed)](_0x353cb6[_0x321690(0x2da)]),_0x44850[_0x321690(0x17e)]>0x0&&allOpenOrders['push'](_0x44850[0x0]));}}catch(_0x37d484){await handleError(_0x37d484,_0x321690(0x247));}}async function handleOpenOrders(_0x46119d=0x0){const _0x2fe5ef=_0x518395;allOpenOrders[_0x2fe5ef(0x17e)]==0x0&&lockOrders==ORDERS[_0x2fe5ef(0x16b)]&&allOrdersPlaced&&(_0x46119d==0x0?(logger[_0x2fe5ef(0x219)]('1\x20-\x20Handle\x20open\x20orders'),_0x46119d++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x2fe5ef(0x219)](_0x2fe5ef(0x251)),validateOrders(_0x2fe5ef(0x288))));}async function testAPI(){const _0x3bb09e=_0x518395;try{return await exchange[_0x3bb09e(0x202)](),!![];}catch(_0x5649b5){return loading[_0x3bb09e(0x1ce)]=!![],emitLoadingProgress(),handleErrorNoStop(_0x5649b5,_0x3bb09e(0x152)),logger['debug'](_0x3bb09e(0x1f8),_0x5649b5),botPaused=!![],![];}}async function testNewAPI(_0x35e703){const _0x4165df=_0x518395;logger[_0x4165df(0x219)](_0x4165df(0x29a));const _0xeea408=ccxt[_0x4165df(0x13b)][_0x35e703[_0x4165df(0x161)][_0x4165df(0x135)]()],_0x5735e1=new _0xeea408({'apiKey':_0x35e703['apiKey'],'secret':_0x35e703['apiSecret'],'options':{'defaultType':_0x4165df(0x1dc)}});if(_0x35e703[_0x4165df(0x2ac)])_0x5735e1[_0x4165df(0x1ab)]=_0x35e703[_0x4165df(0x2ac)];try{await _0x5735e1[_0x4165df(0x202)](),botPaused=![];}catch(_0x16ae07){logger[_0x4165df(0x219)]('Error\x20in\x20testNewAPI():\x20'+_0x16ae07[_0x4165df(0x2a1)]());throw _0x16ae07;}}function cloneDeep(_0x223070){const _0x45d24c=_0x518395;return JSON[_0x45d24c(0x22c)](JSON[_0x45d24c(0x180)](_0x223070));}async function getPortfolio(_0x42d516){const _0x2e1b69=_0x518395;let _0x54444d=[],_0x36c6a8=[],_0x531e60=[],_0x35a129;_0x42d516[_0x2e1b69(0x18a)]=decryptRSA(secure[_0x2e1b69(0x19c)],_0x42d516['apiKey']),_0x42d516['apiSecret']=decryptRSA(secure['privateKey'],_0x42d516[_0x2e1b69(0x248)]);if(_0x42d516[_0x2e1b69(0x2ac)])_0x42d516[_0x2e1b69(0x2ac)]=decryptRSA(secure[_0x2e1b69(0x19c)],_0x42d516[_0x2e1b69(0x2ac)]);if(_0x42d516[_0x2e1b69(0x18a)]!==_0x2e1b69(0x297)||_0x42d516[_0x2e1b69(0x248)]!==_0x2e1b69(0x297)||_0x42d516[_0x2e1b69(0x2ac)]&&_0x42d516['apiPassword']!==_0x2e1b69(0x297)){if(config['exchange']){if(_0x42d516['apiKey']==_0x2e1b69(0x297))_0x42d516[_0x2e1b69(0x18a)]=config[_0x2e1b69(0x18a)];if(_0x42d516[_0x2e1b69(0x248)]==_0x2e1b69(0x297))_0x42d516[_0x2e1b69(0x248)]=config[_0x2e1b69(0x248)];if(_0x42d516[_0x2e1b69(0x2ac)]=='************')_0x42d516[_0x2e1b69(0x2ac)]=config[_0x2e1b69(0x2ac)];}try{if(_0x42d516[_0x2e1b69(0x158)])await testNewAPI(_0x42d516);}catch(_0xd9ac43){if(_0xd9ac43['toString']()[_0x2e1b69(0x2f0)](_0x2e1b69(0x1c6))){logHistory(_0x2e1b69(0x164),_0x2e1b69(0x1da)),logHistory(_0x2e1b69(0x164),_0x2e1b69(0x19d)+_0xd9ac43[_0x2e1b69(0x2a1)]()),proxyEmit('portfolio1',![]);return;}else{if(_0xd9ac43['toString']()['includes'](_0x2e1b69(0x1c9))){logHistory(_0x2e1b69(0x164),_0x2e1b69(0x14f)),logHistory(_0x2e1b69(0x164),_0x2e1b69(0x19d)+_0xd9ac43[_0x2e1b69(0x2a1)]()),proxyEmit(_0x2e1b69(0x2af),![]);return;}else{logHistory(_0x2e1b69(0x164),_0x2e1b69(0x231)+_0xd9ac43['toString']()),logger['debug'](_0x2e1b69(0x1f8),_0xd9ac43),proxyEmit(_0x2e1b69(0x2af),![]);return;}}}exchange?updateExchange(_0x42d516[_0x2e1b69(0x18a)],_0x42d516[_0x2e1b69(0x248)],_0x42d516['apiPassword']):await initExchange(_0x42d516[_0x2e1b69(0x161)],_0x42d516[_0x2e1b69(0x18a)],_0x42d516[_0x2e1b69(0x248)],_0x42d516[_0x2e1b69(0x2ac)]);await loadSymbols();const _0x34f6c7=await getCoins(0x0,![],_0x42d516[_0x2e1b69(0x241)]);_0x531e60=cloneDeep(_0x34f6c7[0x1]);}else{const _0x3d21aa=await getCoins();_0x531e60=cloneDeep(_0x3d21aa[0x1]);}if(_0x42d516[_0x2e1b69(0x241)]=='')proxyEmit(_0x2e1b69(0x2af),!![]),proxyEmit('portfolio2',_0x531e60);else{_0x531e60[_0x2e1b69(0x1ee)](_0x14d484=>{const _0x21db6a=_0x2e1b69;if(_0x14d484['coin']!=_0x42d516[_0x21db6a(0x241)]&&allSymbols[_0x21db6a(0x2f0)](_0x14d484[_0x21db6a(0x2da)]))_0x54444d[_0x21db6a(0x2c9)](_0x14d484[_0x21db6a(0x2da)]);});if(_0x54444d[_0x2e1b69(0x17e)]==0x0)logHistory(_0x2e1b69(0x164),_0x2e1b69(0x16d));else{try{_0x36c6a8=await getTickers(_0x54444d);}catch(_0x3b735b){logHistory(_0x2e1b69(0x164),_0x2e1b69(0x2bc)),logger['debug'](_0x2e1b69(0x1f8),_0x3b735b),proxyEmit(_0x2e1b69(0x2af),![]);return;}_0x531e60[_0x2e1b69(0x1ee)](_0x4d301a=>{const _0x16d44c=_0x2e1b69;_0x4d301a['coin']!=_0x42d516[_0x16d44c(0x241)]?_0x36c6a8[_0x4d301a['symbol']]?_0x35a129=_0x4d301a[_0x16d44c(0x1d5)]?0x1/_0x36c6a8[_0x4d301a[_0x16d44c(0x2da)]]['last']:_0x36c6a8[_0x4d301a[_0x16d44c(0x2da)]][_0x16d44c(0x289)]:_0x35a129=0x0:_0x35a129=0x1,_0x4d301a[_0x16d44c(0x228)]=formatResult(_0x35a129,0x8);}),await getMarketCap(_0x531e60),proxyEmit('portfolio1',!![]),proxyEmit(_0x2e1b69(0x190),_0x531e60);}}}function truncateTradeAmount(_0x10bad4,_0x2800a3){const _0x2eb24b=_0x518395;let _0x3b2107=0x0;try{_0x3b2107=exchange[_0x2eb24b(0x2e9)](_0x10bad4,_0x2800a3);}catch(_0x24f7b3){}return _0x3b2107;}function checkMinimums(_0x44c82e){const _0x1322b8=_0x518395;let _0x1ec9ee=!![];const _0x5e3977=!_0x44c82e[_0x1322b8(0x1d5)]?markets[_0x44c82e['symbol']]['limits'][_0x1322b8(0x23b)][_0x1322b8(0x142)]:markets[_0x44c82e[_0x1322b8(0x2da)]][_0x1322b8(0x20a)][_0x1322b8(0x221)][_0x1322b8(0x142)],_0x4dc8cb=!_0x44c82e['reverse']?markets[_0x44c82e[_0x1322b8(0x2da)]][_0x1322b8(0x20a)][_0x1322b8(0x221)]['min']:markets[_0x44c82e['symbol']][_0x1322b8(0x20a)][_0x1322b8(0x23b)]['min'],_0x2b78e2=truncateTradeAmount(_0x44c82e[_0x1322b8(0x2da)],_0x44c82e[_0x1322b8(0x1e4)]);_0x44c82e[_0x1322b8(0x1e4)]=_0x2b78e2;if(Math['abs'](_0x2b78e2)<_0x5e3977)_0x1ec9ee=![];if(Math['abs'](_0x2b78e2)*_0x44c82e[_0x1322b8(0x289)]<_0x4dc8cb)_0x1ec9ee=![];if(_0x44c82e[_0x1322b8(0x1b5)]==_0x1322b8(0x17a)){let _0x1b823f=config[_0x1322b8(0x175)][_0x1322b8(0x1dd)](_0x381754=>_0x381754['coin']==_0x44c82e[_0x1322b8(0x179)]);if(_0x1b823f[_0x1322b8(0x1ae)]>0x0){if(Math[_0x1322b8(0x2ba)](_0x2b78e2)>_0x44c82e[_0x1322b8(0x13d)]-_0x1b823f['offset'])_0x1ec9ee=![];}else{if(Math[_0x1322b8(0x2ba)](_0x2b78e2)>_0x44c82e[_0x1322b8(0x13d)])_0x1ec9ee=![];}}if(_0x44c82e[_0x1322b8(0x1b5)]==_0x1322b8(0x257)){let _0xd06829=config['portfolio'][_0x1322b8(0x1dd)](_0x3ac51=>_0x3ac51[_0x1322b8(0x179)]==config[_0x1322b8(0x241)]),_0x4bb1c7=currentCoins[_0x1322b8(0x1dd)](_0x3282e8=>_0x3282e8['coin']==config[_0x1322b8(0x241)]);if(_0xd06829[_0x1322b8(0x1ae)]>0x0){if(Math[_0x1322b8(0x2ba)](_0x2b78e2)*_0x44c82e[_0x1322b8(0x289)]>_0x4bb1c7[_0x1322b8(0x13d)]-_0xd06829['offset'])_0x1ec9ee=![];}else{if(Math[_0x1322b8(0x2ba)](_0x2b78e2)*_0x44c82e[_0x1322b8(0x289)]>_0x4bb1c7[_0x1322b8(0x13d)])_0x1ec9ee=![];}}return _0x1ec9ee;}async function getBalances(_0x134ace=!![]){const _0x17176f=_0x518395;if(botPaused)return;let _0x4013d6=0x0,_0x5e4176;const _0x5d8886=config[_0x17176f(0x185)];if(config[_0x17176f(0x2cb)]&&config[_0x17176f(0x132)]<0x0)await validate24hChanges();currentCoins[_0x17176f(0x1ee)](_0x36c08c=>{const _0x5652b5=_0x17176f;if(_0x36c08c[_0x5652b5(0x179)]!=config[_0x5652b5(0x241)]){let _0x2774ee=gTicker[noslash(_0x36c08c['symbol'])];_0x5e4176=_0x36c08c[_0x5652b5(0x1d5)]?0x1/_0x2774ee:_0x2774ee;}else _0x5e4176=0x1;let _0x27e800=_0x36c08c['number']*_0x5e4176;_0x4013d6+=_0x27e800,_0x36c08c[_0x5652b5(0x289)]=formatResult(Number(_0x5e4176),0x8),_0x36c08c[_0x5652b5(0x18d)]=_0x27e800;}),currentCoins[_0x17176f(0x1ee)](_0x41cd86=>{const _0x28ba05=_0x17176f;let _0x104bfc=config[_0x28ba05(0x175)]['find'](_0xbd7707=>_0xbd7707[_0x28ba05(0x179)]==_0x41cd86[_0x28ba05(0x179)]),_0x569483=Number(_0x104bfc['distribution']),_0x2bc8c1=_0x41cd86[_0x28ba05(0x18d)]/_0x4013d6*0x64,_0x5f1fa1=_0x569483*_0x4013d6/0x64/_0x41cd86[_0x28ba05(0x289)]-_0x41cd86['number'];_0x41cd86[_0x28ba05(0x14e)]=formatResult(_0x2bc8c1,0x3),_0x41cd86[_0x28ba05(0x1db)]=formatResult(_0x569483,0x3),_0x41cd86[_0x28ba05(0x1e4)]=formatResult(_0x5f1fa1,0x8),_0x41cd86[_0x28ba05(0x1b5)]='',_0x41cd86[_0x28ba05(0x169)]=![];if(_0x41cd86[_0x28ba05(0x179)]!=config[_0x28ba05(0x241)]){if(_0x41cd86[_0x28ba05(0x14e)]>_0x569483)_0x41cd86['side']=_0x28ba05(0x17a),_0x41cd86[_0x28ba05(0x169)]=checkMinimums(_0x41cd86);else _0x41cd86[_0x28ba05(0x14e)]<_0x569483&&(_0x41cd86['side']=_0x28ba05(0x257),_0x41cd86[_0x28ba05(0x169)]=checkMinimums(_0x41cd86));}_0x41cd86[_0x28ba05(0x2dc)]=_0x41cd86[_0x28ba05(0x14e)]/_0x41cd86['target']-0x1;if(_0x41cd86[_0x28ba05(0x203)]==_0x28ba05(0x1e2)||_0x41cd86[_0x28ba05(0x203)]==_0x28ba05(0x28d))_0x41cd86['orderstatus']=_0x28ba05(0x1b8);}),currentCoins[_0x17176f(0x2e8)]((_0x44b126,_0x598008)=>_0x44b126['delta']<_0x598008[_0x17176f(0x2dc)]?0x1:_0x598008[_0x17176f(0x2dc)]<_0x44b126['delta']?-0x1:0x0);const _0x37b32c=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x37b32c['eur'],'usd':_0x37b32c[_0x17176f(0x1ff)],'portfolio':JSON['stringify'](currentCoins),'threshold':_0x5d8886},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});if(_0x134ace){if(config[_0x17176f(0x2cb)])headlessMode({'portfolio':currentCoins,'threshold':_0x5d8886});else lockOrders==ORDERS[_0x17176f(0x218)]&&!coolingDown&&notifyBalance({'portfolio':currentCoins,'threshold':_0x5d8886});}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x1d9583=getNormalizedPerformance();getStartingBalances(_0x1d9583),emitPerformance(_0x1d9583);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}function getPnL(){const _0x4de87a=_0x518395;let _0x564785=dbCoinResults[_0x4de87a(0x1be)](_0x4de87a(0x272))[_0x4de87a(0x18d)](),_0x2d611b=0x0;return Object[_0x4de87a(0x298)](_0x564785)['forEach'](([_0x38ab38,_0x2ca7e3])=>{_0x2d611b+=_0x2ca7e3['realizedPnL'];}),_0x2d611b;}async function storePerformance(){const _0x2d8d0b=_0x518395;if(!lastBalances)return;let _0x4aaece=[],_0x2c7caf;const _0x3829bb=getPnL();let _0x2fa74b=JSON[_0x2d8d0b(0x22c)](lastBalances[_0x2d8d0b(0x175)]);_0x2fa74b[_0x2d8d0b(0x2e8)]((_0x2b6551,_0x20913e)=>_0x2b6551[_0x2d8d0b(0x179)]>_0x20913e[_0x2d8d0b(0x179)]?0x1:_0x20913e[_0x2d8d0b(0x179)]>_0x2b6551[_0x2d8d0b(0x179)]?-0x1:0x0),_0x2fa74b[_0x2d8d0b(0x1ee)](_0x4822da=>{const _0x2606b0=_0x2d8d0b;let _0x5642cd={'coin':_0x4822da[_0x2606b0(0x179)],'number':_0x4822da[_0x2606b0(0x13d)],'price':_0x4822da[_0x2606b0(0x289)]};_0x4aaece[_0x2606b0(0x2c9)](_0x5642cd);});const _0x1055f2=await getFiat(),_0x5a4541=getTimeStamp()['split']('\x20')[0x0],_0x3c9b09=dbPerformance[_0x2d8d0b(0x1be)](_0x2d8d0b(0x26e))[_0x2d8d0b(0x1dd)]({'date':_0x5a4541})[_0x2d8d0b(0x18d)]();_0x2c7caf={'date':_0x5a4541,'eur':_0x1055f2[_0x2d8d0b(0x24f)],'usd':_0x1055f2[_0x2d8d0b(0x1ff)],'coins':_0x4aaece,'pnl':_0x3829bb},_0x3c9b09?_0x2c7caf[_0x2d8d0b(0x20f)]!=config['startdate']&&dbPerformance[_0x2d8d0b(0x1be)](_0x2d8d0b(0x26e))[_0x2d8d0b(0x1dd)]({'date':_0x5a4541})[_0x2d8d0b(0x2f3)](_0x2c7caf)[_0x2d8d0b(0x130)]():dbPerformance[_0x2d8d0b(0x1be)]('data')[_0x2d8d0b(0x2c9)](_0x2c7caf)[_0x2d8d0b(0x130)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x302e9c=_0x518395;let _0x1e6471=[];if(dbPerformance[_0x302e9c(0x1d9)](_0x302e9c(0x26e))['value']()){let _0x238cde=dbPerformance['get'](_0x302e9c(0x26e))[_0x302e9c(0x2d4)]()[_0x302e9c(0x26c)](_0x3aa510=>{const _0x17e224=_0x302e9c;if(_0x3aa510[_0x17e224(0x272)]['length']==0x0)return![];else return!![];})['sortBy'](_0x302e9c(0x20f))[_0x302e9c(0x18d)](),_0x3efce9=[...config['liquidity']];_0x3efce9['sort']((_0x437438,_0x42bd01)=>_0x437438[_0x302e9c(0x20f)]>_0x42bd01[_0x302e9c(0x20f)]?-0x1:_0x42bd01['date']>_0x437438[_0x302e9c(0x20f)]?0x1:0x0);let _0x27a947=0x1,_0x5d3513=[],_0x2a851f=0x0;_0x238cde[_0x302e9c(0x184)]()[_0x302e9c(0x1d5)]()[_0x302e9c(0x1ee)]((_0x389325,_0x5bc453)=>{const _0x2fa8c7=_0x302e9c;if(_0x3efce9[_0x2a851f]){if(_0x238cde[_0x238cde[_0x2fa8c7(0x17e)]-_0x5bc453]&&_0x3efce9[_0x2a851f][_0x2fa8c7(0x20f)]==_0x238cde[_0x238cde[_0x2fa8c7(0x17e)]-_0x5bc453][_0x2fa8c7(0x20f)]){if(_0x5bc453<_0x238cde['length']){let _0x3b0b9a=0x0,_0x5c449b=0x0;_0x238cde[_0x238cde['length']-_0x5bc453][_0x2fa8c7(0x272)][_0x2fa8c7(0x1ee)](_0x1ae5d8=>{const _0x3babe3=_0x2fa8c7;_0x5c449b+=_0x1ae5d8[_0x3babe3(0x13d)]*_0x1ae5d8[_0x3babe3(0x228)];}),_0x3efce9[_0x2a851f]['changes']['forEach'](_0x33a63f=>{const _0x2bdb70=_0x2fa8c7;_0x3b0b9a+=_0x33a63f[_0x2bdb70(0x13d)]*_0x33a63f[_0x2bdb70(0x228)];}),_0x27a947*=_0x3b0b9a/(_0x5c449b-_0x3b0b9a)+0x1;}_0x2a851f++;}}let _0x18b967=0x0;_0x389325['coins'][_0x2fa8c7(0x1ee)](_0x4ff8dc=>{_0x18b967+=_0x4ff8dc['number']*_0x4ff8dc['price'];}),_0x5d3513[_0x238cde['length']-_0x5bc453-0x1]=_0x18b967*(_0x27a947-0x1);});let _0x733046=[];_0x3efce9=[...config[_0x302e9c(0x2cd)]]||[];let _0x448495=0x0;_0x2a851f=0x0,_0x238cde['forEach']((_0x3af57d,_0x1f0d91)=>{const _0x2be08a=_0x302e9c;if(_0x3efce9[_0x2a851f]){const _0x149e3b=fns['parse'](_0x3efce9[_0x2a851f][_0x2be08a(0x20f)],_0x2be08a(0x1d4),new Date()),_0x5009a2=fns['parse'](_0x3af57d[_0x2be08a(0x20f)],_0x2be08a(0x1d4),new Date());if(fns[_0x2be08a(0x2f5)](_0x149e3b,_0x5009a2)){let _0x549bd7=0x0;_0x3efce9[_0x2a851f][_0x2be08a(0x1d0)][_0x2be08a(0x1ee)](_0x52162b=>{const _0x1d58cb=_0x2be08a;!_0x733046[_0x52162b[_0x1d58cb(0x179)]]?_0x733046[_0x52162b['coin']]=_0x52162b[_0x1d58cb(0x13d)]:(_0x549bd7=_0x733046[_0x52162b['coin']],_0x733046[_0x52162b['coin']]+=_0x52162b[_0x1d58cb(0x13d)]);const _0x963fea=_0x3af57d['coins']['find'](_0x3a5305=>_0x3a5305['coin']==_0x52162b[_0x1d58cb(0x179)]);(!_0x963fea||_0x963fea[_0x1d58cb(0x13d)]==0x0)&&(_0x448495+=(-_0x52162b[_0x1d58cb(0x13d)]-_0x549bd7)*_0x52162b[_0x1d58cb(0x228)]);}),_0x2a851f++;}}_0x3af57d[_0x2be08a(0x272)]['forEach']((_0xb93673,_0x484a6d)=>{const _0x2e31b4=_0x2be08a;_0x733046[_0xb93673[_0x2e31b4(0x179)]]&&(_0xb93673[_0x2e31b4(0x172)]=_0x733046[_0xb93673[_0x2e31b4(0x179)]]);}),_0x1e6471[_0x2be08a(0x2c9)]({'date':_0x3af57d['date'],'eur':_0x3af57d[_0x2be08a(0x24f)],'usd':_0x3af57d[_0x2be08a(0x1ff)],'offset':_0x5d3513[_0x1f0d91],'netoffset':_0x448495,'coins':_0x3af57d[_0x2be08a(0x272)],'pnl':_0x3af57d[_0x2be08a(0x24e)]});});}return _0x1e6471;}function emitPerformance(_0x515b22){const _0x3469a3=_0x518395;_0x515b22[_0x3469a3(0x17e)]!==0x0?(proxyEmit(_0x3469a3(0x17b),_0x515b22),lastPerformanceEmitted=getDate()):proxyEmit(_0x3469a3(0x17b),[]);}function getPerf(_0x10976e,_0x5b2324){const _0x2196da=_0x518395;let _0x2de66a=0x0,_0xf74d15=0x0,_0x53a96d=0x0;_0x10976e[_0x2196da(0x272)][_0x2196da(0x1ee)](_0x253781=>{const _0x15008f=_0x2196da;_0x2de66a+=_0x253781[_0x15008f(0x13d)]*_0x253781[_0x15008f(0x228)];});_0x5b2324&&(_0x2de66a+=_0x10976e['offset']);if(config[_0x2196da(0x241)]===_0x2196da(0x28b)||config[_0x2196da(0x241)]===_0x2196da(0x262)||config[_0x2196da(0x241)]===_0x2196da(0x245))_0xf74d15=_0x2de66a*_0x10976e[_0x2196da(0x24f)],_0x53a96d=_0x2de66a*_0x10976e[_0x2196da(0x1ff)];else{if(usdBasecoins['includes'](config[_0x2196da(0x241)]))_0xf74d15=_0x2de66a*_0x10976e[_0x2196da(0x24f)]/_0x10976e[_0x2196da(0x1ff)],_0x53a96d=_0x2de66a;else config[_0x2196da(0x241)]===_0x2196da(0x222)&&(_0xf74d15=_0x2de66a,_0x53a96d=_0x2de66a*_0x10976e['usd']/_0x10976e[_0x2196da(0x24f)]);}return[_0x2de66a,_0xf74d15,_0x53a96d];}function CurrencyFactor(_0x37365b,_0x1b894d,_0x513ca6){const _0x4f2498=_0x518395;let _0x139162;if(_0x1b894d===_0x4f2498(0x28b)||_0x1b894d===_0x4f2498(0x262)||_0x1b894d==='PAXG')_0x139162=_0x513ca6===_0x4f2498(0x222)?_0x37365b[_0x4f2498(0x24f)]:_0x37365b['usd'];else{if(usdBasecoins[_0x4f2498(0x2f0)](_0x1b894d))_0x139162=_0x513ca6==='EUR'?_0x37365b[_0x4f2498(0x24f)]/_0x37365b[_0x4f2498(0x1ff)]:0x1;else _0x1b894d===_0x4f2498(0x222)&&(_0x139162=_0x513ca6===_0x4f2498(0x222)?0x1:_0x37365b[_0x4f2498(0x1ff)]/_0x37365b[_0x4f2498(0x24f)]);}return _0x139162;}function getKPIs(_0x3daa5f,_0x29eab0=_0x518395(0x222)){const _0x54488d=_0x518395,_0x145206=config[_0x54488d(0x241)],_0x58c62f=lastBalances,_0x10f353=currentCoins,_0x4f7462=getNormalizedPerformance(),_0x599fc5=CurrencyFactor(_0x58c62f,config[_0x54488d(0x241)],_0x29eab0);let _0x1b65cc=0x0;_0x10f353[_0x54488d(0x1ee)](_0x1782ec=>{const _0x27d416=_0x54488d;_0x1b65cc+=_0x1782ec['number']*_0x1782ec[_0x27d416(0x289)];});_0x3daa5f[_0x54488d(0x2f0)]('fiat')&&(_0x1b65cc*=_0x599fc5);let _0x309f17;if(_0x1b65cc!==0x0){if(_0x3daa5f===_0x54488d(0x241)||_0x3daa5f===_0x54488d(0x1f3)){if(_0x3daa5f===_0x54488d(0x241))_0x309f17=(_0x1b65cc/startingBalances[_0x54488d(0x241)]-0x1)*0x64;else{if(_0x29eab0===_0x54488d(0x222))_0x309f17=(_0x1b65cc/startingBalances[_0x54488d(0x24f)]-0x1)*0x64;else _0x309f17=(_0x1b65cc/startingBalances[_0x54488d(0x1ff)]-0x1)*0x64;}}if(_0x3daa5f[_0x54488d(0x2f0)](_0x54488d(0x260))){let _0x17a0bd=0x0;if(startingBalances[_0x54488d(0x272)])_0x10f353[_0x54488d(0x1ee)](_0x21d828=>{const _0x398624=_0x54488d;let _0x19bfec=startingBalances['coins'][_0x398624(0x1dd)](_0x4b32e0=>_0x4b32e0[_0x398624(0x179)]===_0x21d828[_0x398624(0x179)]);if(_0x19bfec&&_0x19bfec[_0x398624(0x179)]&&_0x21d828['number']!==0x0)_0x17a0bd+=_0x19bfec[_0x398624(0x13d)]*_0x21d828[_0x398624(0x289)];});let _0x224378=0x0;if(_0x4f7462[_0x54488d(0x17e)]!==0x0){let _0x1fbbe5=_0x4f7462[_0x4f7462['length']-0x1];_0x224378=_0x1fbbe5[_0x54488d(0x1a6)];}_0x17a0bd-=_0x224378;let _0x118286;_0x3daa5f===_0x54488d(0x26d)&&(_0x118286=startingBalances[_0x54488d(0x241)]),_0x3daa5f===_0x54488d(0x20b)&&(_0x118286=_0x29eab0===_0x54488d(0x222)?startingBalances[_0x54488d(0x24f)]:startingBalances[_0x54488d(0x1ff)],_0x17a0bd*=_0x599fc5),_0x309f17=(_0x1b65cc-_0x17a0bd)/_0x118286*0x64,_0x1b65cc=_0x1b65cc-_0x17a0bd;}if(_0x3daa5f[_0x54488d(0x2f0)](_0x54488d(0x24e))){if(_0x4f7462['length']!==0x0&&_0x10f353[_0x54488d(0x17e)]!==0x0){let _0x527c2b,_0x42d5b4=_0x4f7462[_0x4f7462[_0x54488d(0x17e)]-0x1][_0x54488d(0x24e)];_0x3daa5f[_0x54488d(0x2f0)](_0x54488d(0x1f3))?(_0x527c2b=_0x29eab0===_0x54488d(0x222)?startingBalances[_0x54488d(0x24f)]:startingBalances[_0x54488d(0x1ff)],_0x42d5b4*=CurrencyFactor(_0x58c62f,_0x145206,_0x29eab0)):_0x527c2b=startingBalances[_0x54488d(0x241)],_0x309f17=_0x42d5b4/_0x527c2b*0x64,_0x1b65cc=_0x42d5b4;}}if(_0x309f17){if(_0x309f17<0x64)_0x309f17=_0x309f17[_0x54488d(0x2bb)](0x2);else{if(_0x309f17<0x3e8)_0x309f17=_0x309f17['toFixed'](0x1);else _0x309f17=_0x309f17['toFixed'](0x0);}}else _0x309f17=Number('0')[_0x54488d(0x2bb)](0x2);if(_0x1b65cc){if(Math['abs'](_0x1b65cc)<0.000001)_0x1b65cc=_0x1b65cc[_0x54488d(0x2bb)](0x2);else{if(Math['abs'](_0x1b65cc)<0.1)_0x1b65cc=_0x1b65cc[_0x54488d(0x2bb)](0x6);else{if(Math[_0x54488d(0x2ba)](_0x1b65cc)<0x1)_0x1b65cc=_0x1b65cc[_0x54488d(0x2bb)](0x5);else{if(Math[_0x54488d(0x2ba)](_0x1b65cc)<0xa)_0x1b65cc=_0x1b65cc[_0x54488d(0x2bb)](0x4);else{if(Math[_0x54488d(0x2ba)](_0x1b65cc)<0x64)_0x1b65cc=_0x1b65cc[_0x54488d(0x2bb)](0x3);else{if(Math[_0x54488d(0x2ba)](_0x1b65cc)<0x3e8)_0x1b65cc=_0x1b65cc[_0x54488d(0x2bb)](0x2);else _0x1b65cc=_0x1b65cc[_0x54488d(0x2bb)](0x2);}}}}}}else _0x1b65cc=Number('0')['toFixed'](0x2);}else _0x309f17=Number('0')[_0x54488d(0x2bb)](0x2);if(_0x309f17>=0x0)_0x309f17='+'+_0x309f17;return{'value':_0x1b65cc,'change':_0x309f17};}async function getStartingBalances(_0x527d79,_0x267f54=!![]){const _0xf53a89=_0x518395;if(_0x527d79[_0xf53a89(0x17e)]!==0x0){const [_0x3bf386,_0x36f777,_0x25846e]=getPerf(_0x527d79[0x0],!![]);let _0x65e77e=[];config[_0xf53a89(0x175)]['forEach'](_0x3e9f59=>{const _0x2e78c1=_0xf53a89;let _0x183c6a=0x0,_0x57ef04;config[_0x2e78c1(0x2cd)][_0x2e78c1(0x1ee)](_0x48b771=>{const _0x2a5d90=_0x2e78c1;let _0x97f833=_0x48b771[_0x2a5d90(0x1d0)][_0x2a5d90(0x1dd)](_0x224c4d=>_0x224c4d[_0x2a5d90(0x179)]==_0x3e9f59['coin']);if(_0x97f833){_0x183c6a+=_0x97f833[_0x2a5d90(0x13d)];if(!_0x57ef04)_0x57ef04=_0x97f833[_0x2a5d90(0x228)];}}),_0x65e77e['push']({'coin':_0x3e9f59[_0x2e78c1(0x179)],'number':_0x183c6a,'initialprice':_0x57ef04});});const _0x19a19a={'basecoin':_0x3bf386,'eur':_0x36f777,'usd':_0x25846e,'coins':_0x65e77e};if(_0x267f54)proxyEmit(_0xf53a89(0x156),_0x19a19a);startingBalances=_0x19a19a;}}function headlessMode(_0x3ddbc7){const _0x2ae167=_0x518395;let _0x5c5e2e=_0x3ddbc7[_0x2ae167(0x175)],_0x2e2cc0=_0x3ddbc7['threshold'],_0x101663=[];for(let _0x371342 of _0x5c5e2e){if(_0x371342[_0x2ae167(0x179)]!=config[_0x2ae167(0x241)]){if(_0x371342[_0x2ae167(0x2dc)]>=_0x2e2cc0/0x64){if(_0x371342[_0x2ae167(0x169)])_0x101663[_0x2ae167(0x2c9)](_0x371342);}else{if(_0x371342[_0x2ae167(0x2dc)]<=-_0x2e2cc0/0x64){if(_0x371342[_0x2ae167(0x169)])_0x101663[_0x2ae167(0x2c9)](_0x371342);}}}}_0x101663['length']>0x0&&placeOrder(_0x101663);}function notifyBalance(_0x2403f4){const _0x418c65=_0x518395;let _0x1a6b91=_0x2403f4[_0x418c65(0x175)],_0x20cd2e=_0x2403f4['threshold'],_0x299f85=[];for(let _0xfaabcb of _0x1a6b91){if(_0xfaabcb[_0x418c65(0x179)]!=config[_0x418c65(0x241)]){if(_0xfaabcb[_0x418c65(0x2dc)]>=_0x20cd2e/0x64){if(_0xfaabcb[_0x418c65(0x169)])_0x299f85[_0x418c65(0x2c9)](_0xfaabcb);}else{if(_0xfaabcb[_0x418c65(0x2dc)]<=-_0x20cd2e/0x64){if(_0xfaabcb[_0x418c65(0x169)])_0x299f85[_0x418c65(0x2c9)](_0xfaabcb);}}}}if(_0x299f85[_0x418c65(0x17e)]>0x0){let _0x2550c1=_0x299f85['map'](_0x2760fd=>_0x2760fd[_0x418c65(0x179)]);_0x2550c1[_0x418c65(0x2e8)]();let _0x36dda9=_0x2550c1['join'](',\x20');if(!lastCoinsToBalance)logHistory(_0x418c65(0x13c),'Manual\x20balancing\x20required');lastCoinsToBalance=_0x36dda9;}}function symbolToCoin(_0x786b10){const _0x2f6447=_0x518395;let _0xb1768a;if(_0x786b10[_0x2f6447(0x2f0)]('/'+config[_0x2f6447(0x241)]))_0xb1768a=_0x786b10[_0x2f6447(0x2c6)]('/'+config[_0x2f6447(0x241)],'');if(_0x786b10['includes'](config['basecoin']+'/'))_0xb1768a=_0x786b10[_0x2f6447(0x2c6)](config[_0x2f6447(0x241)]+'/','');return _0xb1768a;}function setLockOrders(_0x5e5732){const _0x599aea=_0x518395;lockOrders=_0x5e5732,logger[_0x599aea(0x219)](_0x599aea(0x151)+Object[_0x599aea(0x2db)](ORDERS)[lockOrders]);}async function unlockOrders(_0xd956fe=![]){const _0x52da8f=_0x518395;if(allOrdersPlaced&&lockOrders==ORDERS[_0x52da8f(0x16b)]){setLockOrders(ORDERS[_0x52da8f(0x2d3)]);if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);if(_0xd956fe){const _0x2dce45=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x2dce45,setBlockTransactionDetection(![]);}validateOrdersState=_0x52da8f(0x172),persistOpenOrders([]),setLockOrders(ORDERS['UNLOCKED']);}}async function validateOrders(_0x1756f3){const _0x3342b0=_0x518395;if(_0x1756f3)validateOrdersState=_0x1756f3;logger[_0x3342b0(0x219)](_0x3342b0(0x1c2)+validateOrdersState+_0x3342b0(0x2d6)+Object[_0x3342b0(0x2db)](ORDERS)[lockOrders]);let _0x1cb64e=[],_0x18f94a=config[_0x3342b0(0x1ef)]==_0x3342b0(0x2e3)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x3342b0(0x177)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS['LOCKED'])return;logger[_0x3342b0(0x219)](_0x3342b0(0x2b9)+validateOrdersState);for(let _0x3f41ac=lastOrders[_0x3342b0(0x17e)]-0x1;_0x3f41ac>=0x0;_0x3f41ac--){let _0x2b071a=lastOrders[_0x3f41ac],_0x4d3ada=![];_0x2b071a['filled']>0x0&&(_0x4d3ada=!![]),_0x1cb64e['push'](_0x4d3ada),_0x4d3ada&&config[_0x3342b0(0x1ef)]!=_0x3342b0(0x2e3)&&logHistory(_0x3342b0(0x14a),_0x3342b0(0x1b0)+_0x2b071a['symbol']+'\x20'+_0x2b071a[_0x3342b0(0x1b5)]+'\x20#'+formatResult(_0x2b071a[_0x3342b0(0x1e2)],0x8)+'\x20@'+formatResult(_0x2b071a['price'],0x8)),_0x4d3ada&&lastOrders['splice'](_0x3f41ac,0x1);}persistOpenOrders(lastOrders);const _0x1ccbe3=coolingDown?_0x3342b0(0x2a9):_0x3342b0(0x1f2);if(validateOrdersState==_0x3342b0(0x172)){validateOrdersState=_0x3342b0(0x1fc);if(_0x1cb64e['includes'](![])){}else await unlockOrders();}else{if(validateOrdersState=='ongoing'){if(_0x1cb64e[_0x3342b0(0x2f0)](![])){}else await unlockOrders();}else{if(validateOrdersState==_0x3342b0(0x201))_0x1cb64e[_0x3342b0(0x2f0)](![])&&(config['ordertype']=='market'?logHistory(_0x3342b0(0x23e),_0x3342b0(0x17c)+Math[_0x3342b0(0x299)](_0x18f94a*validateOrderInterval/0xea60)+_0x3342b0(0x274)+_0x1ccbe3):(await cancelOrders(),logHistory(_0x3342b0(0x23e),_0x3342b0(0x238)+Math['round'](_0x18f94a*validateOrderInterval/0xea60)+_0x3342b0(0x274)+_0x1ccbe3))),await unlockOrders(!![]);else{if(validateOrdersState==_0x3342b0(0x288)){if(config[_0x3342b0(0x1ef)]!=_0x3342b0(0x2e3))logHistory(_0x3342b0(0x23e),_0x3342b0(0x2f2)+_0x1ccbe3);await unlockOrders(!![]);}}}}}async function cancelOrders(){const _0x3b24ad=_0x518395;lastOrders[_0x3b24ad(0x1ee)](async _0x1cace5=>{const _0x538c7e=_0x3b24ad;try{const _0x58cad0=await exchange[_0x538c7e(0x252)](_0x1cace5[_0x538c7e(0x19f)],_0x1cace5['symbol']);}catch(_0x4004a6){if(_0x4004a6[_0x538c7e(0x2a1)]()[_0x538c7e(0x2f0)](_0x538c7e(0x27d))){}else await handleError(_0x4004a6,_0x538c7e(0x264));}});}async function initCoinResults(_0x2bde6f){const _0x4225d2=_0x518395;_0x2bde6f?logger[_0x4225d2(0x219)](_0x4225d2(0x1f6)+_0x2bde6f):logger[_0x4225d2(0x219)](_0x4225d2(0x225)),config['portfolio'][_0x4225d2(0x1ee)](_0x16f634=>{const _0x4d2431=_0x4225d2;if(!_0x16f634[_0x4d2431(0x1bb)]&&_0x16f634['coin']!=config[_0x4d2431(0x241)]){const _0x1342a6=currentCoins[_0x4d2431(0x1dd)](_0xe84097=>_0xe84097[_0x4d2431(0x179)]==_0x16f634['coin']),_0x30fd7d=gTicker[noslash(_0x16f634[_0x4d2431(0x2da)])];let _0x49972f=_0x1342a6?_0x1342a6[_0x4d2431(0x13d)]:null,_0x5c5012=_0x16f634['reverse']?0x1/_0x30fd7d:_0x30fd7d,_0x40f0f8;config['liquidity'][_0x4d2431(0x1ee)](_0x61cb50=>{const _0x1ddf83=_0x4d2431;!_0x40f0f8&&(_0x40f0f8=_0x61cb50['changes'][_0x1ddf83(0x1dd)](_0x1e8d34=>_0x1e8d34['coin']==_0x16f634[_0x1ddf83(0x179)]),_0x40f0f8&&(_0x49972f=_0x40f0f8[_0x1ddf83(0x13d)],_0x5c5012=_0x40f0f8[_0x1ddf83(0x228)]));});let _0x3bbbf5=dbCoinResults[_0x4d2431(0x1be)](_0x4d2431(0x272))['find']({'coin':_0x16f634[_0x4d2431(0x179)]})[_0x4d2431(0x18d)]();if(!_0x3bbbf5){const _0x6244ce={'coin':_0x16f634[_0x4d2431(0x179)],'number':_0x49972f,'breakeven':_0x5c5012,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x4d2431(0x1be)](_0x4d2431(0x272))['push'](_0x6244ce)[_0x4d2431(0x130)]();}else{if(_0x2bde6f&&_0x16f634[_0x4d2431(0x179)]==_0x2bde6f){const _0x4f2d77={'coin':_0x16f634['coin'],'number':_0x49972f,'breakeven':_0x5c5012,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get']('coins')[_0x4d2431(0x1dd)]({'coin':_0x16f634[_0x4d2431(0x179)]})[_0x4d2431(0x2f3)](_0x4f2d77)[_0x4d2431(0x130)]();}}}});}async function placeOrder(_0x2d6362){const _0x2fc422=_0x518395,_0x4d3e74=config[_0x2fc422(0x1ef)]=='market'?_0x2fc422(0x2e3):_0x2fc422(0x15f);if(lockOrders==ORDERS[_0x2fc422(0x218)]&&!coolingDown){setLockOrders(ORDERS[_0x2fc422(0x16b)]);while(transactionDetectionOngoing){await sleep(0x64);}logger[_0x2fc422(0x219)]('Placing\x20order\x20for:\x20'+_0x2d6362[_0x2fc422(0x1e0)](_0xa466ca=>_0xa466ca[_0x2fc422(0x179)])[_0x2fc422(0x2c8)](',\x20')),lastCoinsToBalance='',allOrdersPlaced=![],validateOrdersState='initial';let _0x18b968=![];lastOrders=[];const _0x1e8210=config[_0x2fc422(0x185)];for(const _0x44f2d9 of _0x2d6362){let _0x36bc46,_0x49381a,_0x4e5bf9,_0xc47a39,_0x56452f,_0xc0effb=_0x44f2d9[_0x2fc422(0x2da)];logger[_0x2fc422(0x219)](_0x2fc422(0x2b8)+_0x44f2d9[_0x2fc422(0x179)]+'\x20'+_0x44f2d9[_0x2fc422(0x13d)]+'\x20'+_0x44f2d9[_0x2fc422(0x289)]+'\x20'+_0x44f2d9[_0x2fc422(0x14e)]+'%\x20'+_0x44f2d9[_0x2fc422(0x1db)]+'%\x20'+(0x64*_0x44f2d9[_0x2fc422(0x2dc)])['toFixed'](0x2)+_0x2fc422(0x232)+_0x1e8210['toFixed'](0x2)+'%)');const _0xea34b4=currentCoins[_0x2fc422(0x1dd)](_0x52453c=>_0x52453c[_0x2fc422(0x179)]==_0x44f2d9['coin']);_0xea34b4&&(_0xea34b4[_0x2fc422(0x2c3)]=_0x44f2d9[_0x2fc422(0x13d)]);try{const _0x1909ac=await exchange['fetchTicker'](_0xc0effb);_0x36bc46=_0x44f2d9[_0x2fc422(0x1d5)]?0x1/_0x44f2d9[_0x2fc422(0x289)]:_0x44f2d9[_0x2fc422(0x289)],_0x49381a=_0x1909ac[_0x2fc422(0x1fe)],_0x4e5bf9=_0x1909ac[_0x2fc422(0x1cd)];_0x44f2d9[_0x2fc422(0x1d5)]?(_0xc47a39=_0x44f2d9[_0x2fc422(0x1b5)]==_0x2fc422(0x257)?_0x2fc422(0x17a):'buy',_0x56452f=Math[_0x2fc422(0x2ba)](_0x44f2d9[_0x2fc422(0x1e4)])/_0x36bc46):(_0xc47a39=_0x44f2d9[_0x2fc422(0x1b5)],_0x56452f=Math['abs'](_0x44f2d9['trade']));_0x4d3e74=='limit'&&(config[_0x2fc422(0x1ef)]==_0x2fc422(0x162)&&(_0x36bc46=_0xc47a39==_0x2fc422(0x257)?_0x49381a:_0x4e5bf9),config[_0x2fc422(0x1ef)]==_0x2fc422(0x18e)&&(_0x36bc46=_0xc47a39==_0x2fc422(0x257)?_0x4e5bf9:_0x49381a));_0x56452f=formatResult(_0x56452f,0x8),_0x36bc46=formatResult(_0x36bc46,0x8);const _0xe6e251=_0xc47a39==_0x2fc422(0x17a)?config['emojisell']?String[_0x2fc422(0x2f7)]('0x'+config[_0x2fc422(0x28a)])+'\x20':'':config[_0x2fc422(0x186)]?String['fromCodePoint']('0x'+config[_0x2fc422(0x186)])+'\x20':'',_0x3d5dfa=_0x4d3e74==_0x2fc422(0x2e3)?_0x2fc422(0x2f1):config[_0x2fc422(0x1ef)]=='limit-high'?'Limit\x20(high-margin)':_0x2fc422(0x1f0),_0xb5b0e=(Math['floor'](Math['random']()*0x35a4e900)+0x5f5e100)['toString']();lastOrders[_0x2fc422(0x2c9)]({'customId':_0xb5b0e,'symbol':_0xc0effb,'coin':_0x44f2d9[_0x2fc422(0x179)],'amount':_0x56452f,'price':_0x36bc46,'side':_0xc47a39,'reverse':_0x44f2d9['reverse'],'filled':0x0});let _0x149a49;_0x4d3e74==_0x2fc422(0x2e3)?_0xc47a39==_0x2fc422(0x257)&&[_0x2fc422(0x197),_0x2fc422(0x2e2),_0x2fc422(0x240),_0x2fc422(0x22b),_0x2fc422(0x244)]['includes'](config[_0x2fc422(0x161)])?_0x149a49=await exchange[_0x2fc422(0x1a1)](_0xc0effb,_0x4d3e74,_0xc47a39,_0x56452f,_0x36bc46):_0x149a49=await exchange[_0x2fc422(0x1a1)](_0xc0effb,_0x4d3e74,_0xc47a39,_0x56452f,undefined):_0x149a49=await exchange[_0x2fc422(0x1a1)](_0xc0effb,_0x4d3e74,_0xc47a39,_0x56452f,_0x36bc46);const _0x330b1e=lastOrders[_0x2fc422(0x17e)]-0x1;if(_0x330b1e>=0x0&&lastOrders[_0x330b1e][_0x2fc422(0x2c1)]==_0xb5b0e){lastOrders[_0x330b1e][_0x2fc422(0x19f)]=_0x149a49['id'];if(_0x149a49[_0x2fc422(0x23b)])lastOrders[_0x330b1e][_0x2fc422(0x23b)]=_0x149a49[_0x2fc422(0x23b)];if(_0x149a49[_0x2fc422(0x228)])lastOrders[_0x330b1e][_0x2fc422(0x228)]=_0x149a49['price'];lastOrders[_0x330b1e][_0x2fc422(0x25f)]=_0x149a49[_0x2fc422(0x25f)];}if(_0x149a49[_0x2fc422(0x23b)])_0x56452f=_0x149a49[_0x2fc422(0x23b)];if(_0x149a49[_0x2fc422(0x228)])_0x36bc46=_0x149a49['price'];if(_0x4d3e74==_0x2fc422(0x2e3))logHistory('order',''+_0xe6e251+_0x3d5dfa+_0x2fc422(0x1de)+_0xc0effb+'\x20'+_0xc47a39+'\x20#'+formatResult(_0x56452f,0x8)+'\x20@'+formatResult(_0x36bc46,0x8));else logHistory(_0x2fc422(0x14a),''+_0xe6e251+_0x3d5dfa+'\x20order:\x20'+_0xc0effb+'\x20'+_0xc47a39+'\x20#'+formatResult(_0x56452f,0x8)+'\x20@'+formatResult(_0x36bc46,0x8));logger[_0x2fc422(0x219)](_0x2fc422(0x21c)+_0x149a49['id']+_0x2fc422(0x269)+_0xb5b0e);if(config['cooldown']!=0x0){let _0x5b9d24=null;if(cooldownTracker[_0x2fc422(0x17e)]==config[_0x2fc422(0x2c2)]-0x1)_0x5b9d24=cooldownTracker['shift']();const _0x256722=getTimeStamp();cooldownTracker[_0x2fc422(0x2c9)](_0x256722);if(_0x5b9d24){const _0x23e79c=fns['differenceInSeconds'](new Date(_0x256722),new Date(_0x5b9d24));if(_0x23e79c<cooldownInterval){logHistory(_0x2fc422(0x164),'Executed\x20'+config['cooldown']+_0x2fc422(0x165)+cooldownInterval/0x3c+_0x2fc422(0x28f)+cooldownPeriod/(0xe10*0x3e8)+_0x2fc422(0x2a2)),coolingDown=!![];break;}}}}catch(_0xf5d507){if(_0xf5d507[_0x2fc422(0x2a1)]()[_0x2fc422(0x2f0)]('MIN_NOTIONAL'))lastOrders=lastOrders[_0x2fc422(0x26c)](_0x4c2e13=>_0x4c2e13[_0x2fc422(0x2da)]!=_0xc0effb),logHistory(_0x2fc422(0x164),_0x2fc422(0x2a3)+_0xc0effb),_0x18b968=!![];else{if(_0xf5d507[_0x2fc422(0x2a1)]()[_0x2fc422(0x2f0)](_0x2fc422(0x2b0)))lastOrders=lastOrders['filter'](_0x36cf59=>_0x36cf59['symbol']!=_0xc0effb),logHistory(_0x2fc422(0x164),_0x2fc422(0x243)+_0xc0effb),_0x18b968=!![];else{if(_0xf5d507['toString']()[_0x2fc422(0x2f0)]('InvalidOrder'))lastOrders=lastOrders[_0x2fc422(0x26c)](_0x492bac=>_0x492bac['symbol']!=_0xc0effb),logHistory('error',_0x2fc422(0x146)+_0xc0effb),logger[_0x2fc422(0x219)](_0xf5d507),_0x18b968=!![];else _0xf5d507[_0x2fc422(0x2a1)]()['includes'](_0x2fc422(0x271))?(lastOrders=lastOrders['filter'](_0x5c7247=>_0x5c7247[_0x2fc422(0x2da)]!=_0xc0effb),logHistory('error',_0x2fc422(0x2a3)+_0xc0effb),_0x18b968=!![]):(lastOrders=lastOrders[_0x2fc422(0x26c)](_0x22de55=>_0x22de55[_0x2fc422(0x2da)]!=_0xc0effb),await handleError(_0xf5d507,_0x2fc422(0x1f4),_0xc0effb));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x2fc422(0x17e)]>0x0){const _0x402a39=config[_0x2fc422(0x1ef)]=='market'?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x402a39);}else unlockOrders();_0x18b968&&config[_0x2fc422(0x2cb)]&&(logHistory(_0x2fc422(0x164),'Avoiding\x20continuous\x20order\x20attempts'+pauseBotMsg),await pauseBot(pauseBotInterval)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x2fc422(0x23e),'Cooldown\x20ended\x20-\x20balancing\x20resumed'));}else{if(coolingDown)!config[_0x2fc422(0x2cb)]&&logHistory(_0x2fc422(0x164),_0x2fc422(0x168));else lockOrders!=ORDERS[_0x2fc422(0x218)]&&(!config[_0x2fc422(0x2cb)]&&(config['ordertype']=='market'?logHistory(_0x2fc422(0x164),_0x2fc422(0x200)):logHistory(_0x2fc422(0x164),_0x2fc422(0x249))));}}function persistOpenOrders(_0x5d2163){const _0x4c551d=_0x518395,_0x4a57a3={...config,'openOrders':_0x5d2163};let _0x4438c6=dbConfig[_0x4c551d(0x1be)](_0x4c551d(0x253))['find']({'botID':botID})[_0x4c551d(0x18d)]();_0x4438c6&&dbConfig[_0x4c551d(0x1be)](_0x4c551d(0x253))['find']({'botID':botID})['assign'](_0x4a57a3)[_0x4c551d(0x130)]();}function restoreOrders(){const _0x369618=_0x518395;let _0x173bd2;config['openOrders']&&allOpenOrders[_0x369618(0x1ee)](_0x446e07=>{const _0x2ecdb4=_0x369618,_0x2efb28=config[_0x2ecdb4(0x133)][_0x2ecdb4(0x1dd)](_0x325c84=>_0x325c84[_0x2ecdb4(0x19f)]==_0x446e07['id']);_0x2efb28&&(lastOrders[_0x2ecdb4(0x2c9)](_0x2efb28),_0x173bd2=_0x446e07[_0x2ecdb4(0x15e)]);});if(lastOrders[_0x369618(0x17e)]>0x0){setLockOrders(ORDERS[_0x369618(0x16b)]),validateOrdersState=_0x369618(0x1fc),allOrdersPlaced=!![];const _0x4e07ed=new Date()[_0x369618(0x206)](),_0x1d3d5d=config[_0x369618(0x1ef)]=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0x369618(0x177)]*0x3c*0x3e8;if(_0x173bd2+_0x1d3d5d>_0x4e07ed){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x53a563=_0x369618;validateOrders(_0x53a563(0x201));},_0x173bd2+_0x1d3d5d-_0x4e07ed);}else validateOrders(_0x369618(0x201));}}async function sendMetricsTelegram(){const _0x4cf6a7=_0x518395;if(!coinsLoaded){process[_0x4cf6a7(0x256)]({'telegrammsg':_0x4cf6a7(0x196)},_0x500f06=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x194db0='';if(config[_0x4cf6a7(0x2ec)])_0x194db0=_0x4cf6a7(0x255)+config[_0x4cf6a7(0x242)]+_0x4cf6a7(0x1c8);else _0x194db0=_0x4cf6a7(0x2e1)+botID+_0x4cf6a7(0x1c8);const _0x43e202=config[_0x4cf6a7(0x241)],_0x56f452=config[_0x4cf6a7(0x1f3)],_0x95f554=getKPIs(_0x4cf6a7(0x241)),_0x1c3102=getKPIs(_0x4cf6a7(0x1f3),_0x56f452),_0x396803=getKPIs(_0x4cf6a7(0x26d)),_0x10747b=getKPIs(_0x4cf6a7(0x20b),_0x56f452),_0x555888=getKPIs(_0x4cf6a7(0x187)),_0x3e55b8=getKPIs(_0x4cf6a7(0x20c),_0x56f452);_0x43e202['includes'](_0x56f452)?(_0x194db0+=_0x4cf6a7(0x1eb),_0x194db0+=_0x4cf6a7(0x1e9)+_0x43e202+':\x20'+_0x95f554[_0x4cf6a7(0x18d)]+'\x20('+_0x95f554['change']+_0x4cf6a7(0x148),_0x194db0+='Net\x20'+_0x43e202+':\x20'+_0x396803[_0x4cf6a7(0x18d)]+'\x20('+_0x396803[_0x4cf6a7(0x29f)]+_0x4cf6a7(0x148),_0x194db0+=_0x4cf6a7(0x270)+_0x43e202+':\x20'+_0x555888['value']+'\x20('+_0x555888[_0x4cf6a7(0x29f)]+_0x4cf6a7(0x148),_0x194db0+=_0x4cf6a7(0x138)):(_0x194db0+=_0x4cf6a7(0x1eb),_0x194db0+=_0x4cf6a7(0x1e9)+_0x43e202+':\x20'+_0x95f554[_0x4cf6a7(0x18d)]+'\x20('+_0x95f554[_0x4cf6a7(0x29f)]+_0x4cf6a7(0x148),_0x194db0+='Value\x20'+_0x56f452+':\x20'+_0x1c3102['value']+'\x20('+_0x1c3102[_0x4cf6a7(0x29f)]+_0x4cf6a7(0x148),_0x194db0+=_0x4cf6a7(0x294)+_0x43e202+':\x20'+_0x396803[_0x4cf6a7(0x18d)]+'\x20('+_0x396803[_0x4cf6a7(0x29f)]+_0x4cf6a7(0x148),_0x194db0+=_0x4cf6a7(0x294)+_0x56f452+':\x20'+_0x10747b[_0x4cf6a7(0x18d)]+'\x20('+_0x10747b['change']+_0x4cf6a7(0x148),_0x194db0+=_0x4cf6a7(0x270)+_0x43e202+':\x20'+_0x555888[_0x4cf6a7(0x18d)]+'\x20('+_0x555888[_0x4cf6a7(0x29f)]+_0x4cf6a7(0x148),_0x194db0+='PnL\x20'+_0x56f452+':\x20'+_0x3e55b8['value']+'\x20('+_0x3e55b8['change']+_0x4cf6a7(0x148),_0x194db0+='</pre>'),process['send']({'telegrammsg':_0x194db0},_0xba4d57=>{});}async function sendPortfolioTelegram(){const _0x360218=_0x518395;if(!coinsLoaded||!currentCoins[0x0][_0x360218(0x14e)]){process['send']({'telegrammsg':'Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute'},_0x2e3f5a=>{});return;}let _0x2fbb7d='';if(config[_0x360218(0x2ec)])_0x2fbb7d=_0x360218(0x255)+config[_0x360218(0x242)]+'\x20portfolio:</b>\x20\x0a\x0a';else _0x2fbb7d='<b>Bot\x20'+botID+_0x360218(0x2d1);_0x2fbb7d+=_0x360218(0x1eb),_0x2fbb7d+=_0x360218(0x2ef),_0x2fbb7d+=_0x360218(0x13f),_0x2fbb7d+='-------------------------------\x0a',currentCoins['forEach'](_0x11ae0b=>{const _0x135fb6=_0x360218;_0x2fbb7d+=_0x11ae0b[_0x135fb6(0x179)][_0x135fb6(0x236)](0x7)+'|\x20'+formatPad(_0x11ae0b[_0x135fb6(0x14e)],0x2,0x6)+'|\x20'+formatPad(_0x11ae0b[_0x135fb6(0x1db)],0x2,0x6)+'|\x20'+formatPad(_0x11ae0b[_0x135fb6(0x2dc)]*0x64,0x2,0x6)+'\x0a';}),_0x2fbb7d+=_0x360218(0x138),process['send']({'telegrammsg':_0x2fbb7d},_0x2f1896=>{});}function formatPad(_0x5aa01b,_0x25532e,_0x25ebfb){const _0x9092cc=_0x518395,_0x216907=formatResultString(_0x5aa01b,_0x25532e);return _0x216907?_0x216907[_0x9092cc(0x20e)](_0x25ebfb):''[_0x9092cc(0x20e)](_0x25ebfb);}function logHistory(_0x432aff,_0x8d7166,_0x177251=''){const _0x1e63b4=_0x518395;logger[_0x1e63b4(0x229)](''+_0x8d7166);let _0x48d780={'time':getTimeStamp(),'type':_0x432aff,'event':_0x8d7166};dbLogs['get'](_0x1e63b4(0x281))[_0x1e63b4(0x2c9)](_0x48d780)[_0x1e63b4(0x130)]();if(_0x177251=='')_0x177251=_0x8d7166;proxyEmit(_0x1e63b4(0x1a8),{'log':_0x48d780,'summary':_0x177251}),process[_0x1e63b4(0x256)]({'telegram':{..._0x48d780,'botname':config[_0x1e63b4(0x242)],'showname':config[_0x1e63b4(0x2ec)]}},_0x39d29b=>{});}function emitHistory(_0x15f057={}){const _0x258608=_0x518395;Object[_0x258608(0x2db)](_0x15f057)[_0x258608(0x17e)]==0x0&&(_0x15f057={'type':[_0x258608(0x14a),_0x258608(0x1a8)],'event':'','page':0x1});if(_0x15f057['type']['includes']('event'))_0x15f057[_0x258608(0x173)][_0x258608(0x1f1)](_0x15f057['type'][_0x258608(0x286)](_0x258608(0x1a8)),0x1,'error',_0x258608(0x13c),_0x258608(0x23e));if(dbLogs[_0x258608(0x1d9)]('logs')[_0x258608(0x18d)]()){let _0x589296=dbLogs[_0x258608(0x1be)]('logs')[_0x258608(0x26c)](_0x25e9e2=>{const _0x264bb4=_0x258608;if(_0x15f057[_0x264bb4(0x173)][_0x264bb4(0x17e)]==0x0)return![];else return _0x15f057['type']['includes'](_0x25e9e2[_0x264bb4(0x173)]);})[_0x258608(0x26c)](_0x7103dc=>{const _0x32fbf9=_0x258608;if(_0x15f057[_0x32fbf9(0x1a8)]=='')return!![];else return _0x7103dc['event']['toLowerCase']()[_0x32fbf9(0x2f0)](_0x15f057[_0x32fbf9(0x1a8)][_0x32fbf9(0x135)]());})['sortBy'](_0x258608(0x226)),_0x1c9d67=_0x589296[_0x258608(0x18d)]()[_0x258608(0x17e)];_0x589296=_0x589296['reverse']()[_0x258608(0x184)]((_0x15f057['page']-0x1)*logPageSize,_0x15f057[_0x258608(0x2fd)]*logPageSize-0x1)[_0x258608(0x1d5)]()[_0x258608(0x18d)](),proxyEmit('event-history',{'logs':_0x589296,'total':_0x1c9d67});}else proxyEmit(_0x258608(0x2c0),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x5b3d50){const _0xc0ef2c=_0x518395;if(dbLogs['has'](_0xc0ef2c(0x281))[_0xc0ef2c(0x18d)]()){const _0xbbc9f8=dbLogs['get'](_0xc0ef2c(0x281))['sortBy'](_0xc0ef2c(0x226))[_0xc0ef2c(0x26c)](_0x4a16de=>{const _0x1bc428=_0xc0ef2c;return _0x4a16de[_0x1bc428(0x173)]==_0x1bc428(0x14a);})[_0xc0ef2c(0x18d)]();dbLogs[_0xc0ef2c(0x1be)](_0xc0ef2c(0x281))[_0xc0ef2c(0x2fc)]()[_0xc0ef2c(0x130)](),dbLogs[_0xc0ef2c(0x1be)](_0xc0ef2c(0x281))[_0xc0ef2c(0x2f3)](_0xbbc9f8)[_0xc0ef2c(0x130)](),emitHistory(_0x5b3d50);}}async function pauseBot(_0x4f6431=pauseBotIntervalShort,_0x1cb3d2,_0x4e2eec,_0x3de056=![]){const _0x4b540a=_0x518395,_0x5d3bcb=new Date()['getTime']();if(!lastErrorShown||_0x5d3bcb-lastErrorShown>=_0x4f6431){lastErrorShown=_0x5d3bcb;if(!lastBotPause)lastBotPause=_0x5d3bcb,consecutivePauses=0x1;else{if(_0x5d3bcb-lastBotPause-_0x4f6431<0x5a*0x3e8){consecutivePauses++;if(consecutivePauses>maxPauseRetries){if(_0x3de056){logHistory(_0x4b540a(0x164),_0x1cb3d2+_0x4b540a(0x295)),await killBot();return;}else logHistory('error',_0x1cb3d2+pauseBotMsg),_0x4f6431=pauseBotInterval;}}else consecutivePauses=0x1;lastBotPause=_0x5d3bcb;}_0x4e2eec?logger[_0x4b540a(0x219)]('('+consecutivePauses+')\x20'+_0x1cb3d2+_0x4b540a(0x2cf),_0x4e2eec):logger['debug']('('+consecutivePauses+')\x20'+_0x1cb3d2);if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);await sleep(_0x4f6431),botPaused=![],_0x4f6431==pauseBotIntervalShort?resumeBot(!![]):resumeBot(![]);}}}async function killBot(){const _0x5deaf2=_0x518395;botPaused=!![],await sleep(0x3e8),process[_0x5deaf2(0x256)]({'stop':_0x5deaf2(0x19a)},_0x34445c=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x47d81c,_0x404084,_0x3a315d=![]){const _0x109bab=_0x518395;if(botPaused)return;let _0x593f1b;const _0x464143=config[_0x109bab(0x161)]||_0x109bab(0x191);if(_0x404084)logger[_0x109bab(0x219)]('Exception\x20thrown\x20in\x20'+_0x404084);const _0x577b2b=()=>{const _0x2d9801=_0x109bab;loading[_0x2d9801(0x164)]=!![],emitLoadingProgress();};if(_0x47d81c[_0x109bab(0x2a1)]()[_0x109bab(0x2f0)](_0x109bab(0x2fe)))logHistory(_0x109bab(0x164),_0x464143+_0x109bab(0x267)),_0x577b2b();else{if(_0x47d81c['toString']()[_0x109bab(0x2f0)](_0x109bab(0x2bd)))logHistory(_0x109bab(0x164),_0x464143+'\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)'),_0x577b2b();else{if(_0x47d81c['toString']()[_0x109bab(0x2f0)]('AuthenticationError'))config['apiPassword']?_0x593f1b=_0x464143+'\x20API\x20key,\x20secret\x20or\x20password\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange':_0x593f1b=_0x464143+_0x109bab(0x2f9),logHistory(_0x109bab(0x164),_0x593f1b+_0x109bab(0x145)),_0x577b2b();else{if(_0x47d81c['toString']()[_0x109bab(0x2f0)](_0x109bab(0x1c9)))logHistory(_0x109bab(0x164),_0x464143+_0x109bab(0x2d0)),_0x577b2b();else{if(!_0x3a315d)await handleError(_0x47d81c,null);}}}}}async function handleError(_0x42dd67,_0x4b97e3,_0x31e683=''){const _0x49f34e=_0x518395;if(botPaused)return;let _0x1ecca3;const _0x268f9d=config[_0x49f34e(0x161)]||'Exchange';if(_0x4b97e3)logger[_0x49f34e(0x219)](_0x49f34e(0x1a7)+_0x4b97e3);if(_0x42dd67[_0x49f34e(0x2a1)]()[_0x49f34e(0x2f0)]('DDoSProtection'))_0x1ecca3=_0x268f9d+_0x49f34e(0x182),await pauseBot(undefined,_0x1ecca3,_0x42dd67);else{if(_0x42dd67[_0x49f34e(0x2a1)]()[_0x49f34e(0x2f0)]('RateLimitExceeded'))_0x1ecca3=_0x268f9d+_0x49f34e(0x19b),await pauseBot(undefined,_0x1ecca3,_0x42dd67);else{if(_0x42dd67[_0x49f34e(0x2a1)]()[_0x49f34e(0x2f0)]('ExchangeNotAvailable')||_0x42dd67['toString']()[_0x49f34e(0x2f0)](_0x49f34e(0x2a8)))_0x1ecca3=_0x268f9d+'\x20not\x20available\x20(see:\x20hodlerhacks.com/fix/5)',await pauseBot(undefined,_0x1ecca3,_0x42dd67[_0x49f34e(0x2a1)]());else{if(_0x42dd67[_0x49f34e(0x2a1)]()['includes']('RequestTimeout'))_0x1ecca3=_0x268f9d+_0x49f34e(0x28c),await pauseBot(undefined,_0x1ecca3,_0x42dd67[_0x49f34e(0x2a1)]());else{if(_0x42dd67[_0x49f34e(0x2a1)]()[_0x49f34e(0x2f0)](_0x49f34e(0x215)))_0x1ecca3=_0x268f9d+_0x49f34e(0x29b),await pauseBot(undefined,_0x1ecca3,_0x42dd67['toString']());else{if(_0x42dd67[_0x49f34e(0x2a1)]()['toLowerCase']()[_0x49f34e(0x2f0)](_0x49f34e(0x15e))||_0x42dd67['toString']()[_0x49f34e(0x135)]()[_0x49f34e(0x2f0)](_0x49f34e(0x2de)))_0x1ecca3='Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)',await pauseBot(undefined,_0x1ecca3,_0x42dd67[_0x49f34e(0x2a1)]());else{if(_0x42dd67['toString']()['includes'](_0x49f34e(0x2ea)))_0x1ecca3=_0x268f9d+_0x49f34e(0x250),await pauseBot(undefined,_0x1ecca3,_0x42dd67[_0x49f34e(0x2a1)]());else{if(_0x42dd67 instanceof ccxt['NetworkError'])_0x1ecca3=_0x268f9d+_0x49f34e(0x1e5)+_0x42dd67['toString'](),logger['debug'](_0x49f34e(0x18c),_0x42dd67),await pauseBot(undefined,_0x1ecca3,_0x42dd67);else{if(_0x42dd67[_0x49f34e(0x2a1)]()[_0x49f34e(0x2f0)]('API-key\x20format\x20invalid'))logHistory(_0x49f34e(0x164),_0x268f9d+_0x49f34e(0x2b4)),logHistory(_0x49f34e(0x164),_0x49f34e(0x1b3)),await killBot();else{if(_0x42dd67[_0x49f34e(0x2a1)]()[_0x49f34e(0x2f0)](_0x49f34e(0x2bd)))logHistory('error',_0x268f9d+_0x49f34e(0x2b5)),logHistory(_0x49f34e(0x164),_0x49f34e(0x1b3)),await killBot();else{if(_0x42dd67[_0x49f34e(0x2a1)]()[_0x49f34e(0x2f0)]('AuthenticationError')&&_0x42dd67[_0x49f34e(0x2a1)]()[_0x49f34e(0x2f0)](_0x49f34e(0x2a4)))_0x1ecca3=_0x268f9d+'\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)',await pauseBot(undefined,_0x1ecca3,_0x42dd67,!![]);else{if(_0x42dd67['toString']()[_0x49f34e(0x2f0)]('AuthenticationError'))config[_0x49f34e(0x2ac)]?_0x1ecca3=_0x268f9d+_0x49f34e(0x194):_0x1ecca3=_0x268f9d+_0x49f34e(0x2f9),logHistory(_0x49f34e(0x164),_0x1ecca3),logHistory('error','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)'),await killBot();else{if(_0x42dd67[_0x49f34e(0x2a1)]()[_0x49f34e(0x2f0)](_0x49f34e(0x1c9)))logHistory(_0x49f34e(0x164),_0x268f9d+'\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange'),logHistory(_0x49f34e(0x164),_0x49f34e(0x1b3)),await killBot();else{if(_0x42dd67[_0x49f34e(0x2a1)]()[_0x49f34e(0x2f0)](_0x49f34e(0x157)))logHistory(_0x49f34e(0x164),'Insufficient\x20funds\x20to\x20execute\x20order:\x20'+_0x31e683),logger['debug'](_0x49f34e(0x1f8),_0x42dd67);else{if(_0x42dd67 instanceof ccxt[_0x49f34e(0x26b)]){_0x1ecca3=_0x268f9d+_0x49f34e(0x2be)+_0x42dd67[_0x49f34e(0x2a1)]();if(_0x31e683)_0x1ecca3+=_0x49f34e(0x1d1)+_0x31e683;await pauseBot(undefined,_0x1ecca3,_0x42dd67);}else{_0x1ecca3=_0x49f34e(0x1a0)+_0x42dd67[_0x49f34e(0x2a1)]();if(_0x31e683)_0x1ecca3+=_0x49f34e(0x1d1)+_0x31e683;await pauseBot(undefined,_0x1ecca3);}}}}}}}}}}}}}}}}function decryptRSA(_0x277232,_0x5d3bdf){const _0x384613=_0x518395,_0x366e4a=forge[_0x384613(0x1a5)][_0x384613(0x1a3)](_0x277232),_0x4feba4=_0x366e4a[_0x384613(0x2dd)](forge[_0x384613(0x1bc)][_0x384613(0x153)](_0x5d3bdf),_0x384613(0x1d8),{'md':forge['md']['sha256'][_0x384613(0x1c3)](),'mgf1':{'md':forge['md'][_0x384613(0x1c1)][_0x384613(0x1c3)]()}});return _0x4feba4;}async function withRetry(_0x5edb3e,_0x36269b){const _0x32e0c2=_0x518395;let _0x4d79f4=![],_0x5b436d=0x0,_0x9ae659,_0x297c72;while(_0x5b436d<maxRetries){try{_0x9ae659=await _0x36269b();break;}catch(_0x15de5c){_0x297c72=_0x15de5c,!_0x4d79f4?(_0x4d79f4=!![],logger['debug'](_0x32e0c2(0x176)+_0x5edb3e+':',_0x15de5c[_0x32e0c2(0x2a1)]())):await sleep(retryInterval);}_0x5b436d++;}if(_0x5b436d==0x0)return _0x9ae659;if(_0x5b436d>=maxRetries)throw _0x297c72;else return logger[_0x32e0c2(0x219)](_0x32e0c2(0x302)+_0x5b436d+_0x32e0c2(0x1cc)),_0x9ae659;}function formatResult(_0x24f8f0,_0x2308bd){const _0x3c135c=_0x518395;return parseFloat(_0x24f8f0[_0x3c135c(0x2bb)](_0x2308bd));}function _0x5c97(){const _0x48cc27=['date-fns','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','breakeven','balances','min','axios','settings','\x20(see:\x20hodlerhacks.com/fix/1)','Order\x20is\x20invalid:\x20','heapUsed','%)\x0a','fetchTickers()','order','Stopped\x20fetching\x20balance\x20after\x20','botID','onepagemode','distribution','Exchange\x20permission\x20denied\x20-\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','restart','Set\x20lock\x20orders\x20to:\x20','testAPI()','decode64','sendMetricsTelegram','highest','starting-balances','InsufficientFunds','testApi','storeFiat','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','Fee\x20discount\x20refund\x20detected:\x20','Block\x20transaction\x20detection:\x20','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','timestamp','limit','watchTradesForSymbols()','exchange','limit-high','freeze','error','\x20orders\x20in\x20less\x20than\x20','storeHeadless','complete','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','valid','2.6.23','LOCKED','toUpperCase','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','memoryUsage','watchOrders','128517KalIwn','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','initial','type','getHours','portfolio','RETRY\x20-\x20Error\x20in\x20','timeout','watchTrades()','coin','sell','performance','Order(s)\x20not\x20validated\x20after\x20','apply','length','./version.json','stringify','slider','\x20blocked\x20API\x20(DDoSProtection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','2.6.0','slice','threshold','emojibuy','pnl-basecoin','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','getFullYear','apiKey','1\x20-\x20partially\x20FILLED\x20(','Network\x20error\x20details:','value','limit-low','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','portfolio2','Exchange',')\x20|\x20exchange:\x20','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','\x20API\x20key,\x20secret\x20or\x20password\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','\x20has\x20a\x2024h\x20drop\x20of\x20','Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute','Bybit','Resetting\x20bot\x20history','function','kill','\x20blocked\x20API\x20(RateLimitExceeded)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','privateKey','Error\x20details:\x20','Updating\x20API\x20key\x20(not\x20saved\x20in\x20config\x20file\x20yet)','orderId','Unknown\x20error:\x20','createOrder','constructor','privateKeyFromPem','Invalid\x20symbol:\x20','pki','netoffset','Exception\x20thrown\x20in\x20','event','getMinutes','\x20|\x20exchange:\x20','password','configuration','closed','offset','7465552sGmvaV','Order\x20filled:\x20','600449kwYlnT','enableFiatToggle','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)','node-forge','side','Failed\x20to\x20load\x20coin\x20data\x20for\x20','sendPortfolioTelegram','none','Initializing\x20exchange:\x20already\x20done','Market\x20order','excluded','util','environment','get','./logs/','USDP','sha256','1\x20-\x20Validate\x20orders:\x20','create','args','Initiating\x20bot\x20restart','AuthenticationError','search','\x20metrics:</b>\x20\x0a\x0a','PermissionDenied','substring','6954305xoxDAU','\x20attempts','ask','cancel','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','changes','\x0aSymbol(s):\x20','\x20exchange','1\x20-\x20FILLED\x20unknown\x20order:\x20','yyyy/MM/dd','reverse','-performance.json','bitmex','RSA-OAEP','has','Invalid\x20API\x20details,\x20please\x20try\x20again\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','target','spot','find','\x20order:\x20','watchTrades','map','Pausing\x20for\x20','filled','./config/','trade','\x20network\x20error:\x20','Portfolio\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','bb-settings.json','\x20uses\x20','Value\x20','market_cap','<pre>','open','fetchOpenOrders','forEach','ordertype','Limit\x20(low-margin)','splice','balancing\x20resumed','fiat','placeOrder()','(((.+)+)+)+$','Resetting\x20coin\x20results:\x20','status','Error\x20details:','findIndex','getStartingBalances','\x20>\x20pausing\x20bot\x20for\x20','ongoing','exchanges','bid','usd','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','final','fetchBalance','orderstatus','fetchTicker','stack','getTime','49890TqRviq','\x20/\x20','Generating\x20PnL\x20data','limits','net-fiat','pnl-fiat','/output-000.log','padStart','date','\x20|\x20','timeshift','watchTradesForSymbols','\x20-\x20',':\x20Bot\x20','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server',':\x20timer\x20>','unlinkSync','UNLOCKED','debug','no\x20exchange\x20reloaded','USD','ID:\x20','marketcap','Resuming\x20(','Reset\x20|\x20','deleteHistoryAlerts','cost','EUR','added','code','Initializing\x20coin\x20results','time','autoliquidity','price','full','basecoinvalue','Huobi','parse','recent20','staging','storeConfiguration','progress','Error\x20occurred:\x20','%\x20(','bots','path','recreate','padEnd','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','Unfilled\x20order(s)\x20canceled\x20after\x20','getPortfolio','bot-','amount','active','enabled','success','watchOrders()','Cex','basecoin','botname','Order\x20amount\x20is\x20invalid:\x20','Huobipro','PAXG','startprice','getOpenOrders()','apiSecret','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','Initializing\x20exchange','colorscheme','average','secret','pnl','eur','\x20rejected\x20your\x20API\x20request\x20(see:\x20hodlerhacks.com/fix/4)','2\x20-\x20Handled\x20open\x20orders','cancelOrder','bot','lowdb','<b>','send','buy','remainingSymbols','recovery','marketcapEnabled','***','/USDT','\x20>\x20[DEBUG]\x20','add','fee','net','argv','ETH','fetchBalance()','cancelOrders()','removed','startdate','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','Failed\x20to\x20load\x20market\x20data\x20-\x20bot\x20not\x20started','\x20|\x20Custom\x20ID:\x20','loadMarkets','ExchangeError','filter','net-basecoin','data','.json','PnL\x20','must\x20be\x20greater\x20than\x20minimum\x20amount','coins','max','\x20minutes\x20-\x20','28XFnzoy','2\x20-\x20handling\x20FILLED\x20order:\x20','getMonth','001','ccxt','loadSymbols()','Saving\x20configuration','showConfig','OrderNotFound',')\x20unknown\x20order:\x20','Loading\x20completed','marketcapApi','logs','7rnyeJU','startnumber','\x20-\x20bot\x20already\x20running\x20in\x20manual\x20mode','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','indexOf','fetchTickers','no\x20open\x20orders','last','emojisell','BTC','\x20not\x20responding\x20(see:\x20hodlerhacks.com/fix/5)','canceled','\x20MB','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','-results.json','Binance','Headless:\x20','running','Net\x20','\x20>\x20stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','split','************','entries','round','Test\x20new\x20API','\x20closed\x20the\x20connection\x20(see:\x20hodlerhacks.com/fix/5)','\x20minutes','set','resetHistory','change','Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)','toString','\x20hour','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','token\x20is\x20expired','567ZadkeY','Valid\x20balance\x20for\x20','/USD','OnMaintenance','balancing\x20resumes\x20when\x20cooldown\x20ends','placeOrder','Cryptocom','apiPassword','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','1277780SWbHxj','portfolio1','Invalid\x20quantity','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20trying\x20again\x20in\x20','configstate','switch-manual','\x20API\x20key\x20is\x20invalid','\x20API\x20secret\x20is\x20invalid','exchange\x20reload','getDate','Trigger:\x20','2\x20-\x20Validate\x20orders:\x20','abs','toFixed','Unknown\x20error\x20-\x20check\x20logs','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','\x20exchange\x20error:\x20','bb-secure.json','event-history','customId','cooldown','prevnumber','Order\x20filled','percentage','replace','yargs/yargs','join','push','existsSync','headless','Portfolio\x20change\x20detected:\x20','liquidity','defaults','\x20>\x20details:','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','\x20portfolio:</b>\x20\x0a\x0a','Bot\x20','UNLOCKING','cloneDeep','sells','\x20|\x20lock\x20orders:\x20','-config.json','Invalid\x20balance\x20for\x20','USDT','symbol','keys','delta','decrypt','request-time','initclient','2.3.5','<b>Bot\x20','Bitget','market','Error\x20in\x20loadSymbols():\x20','production','secure','2.7.1','sort','amountToPrecision','InvalidNonce','quote','showname','uncaughtException','\x20|\x20highest\x20fee:\x20','-------------------------------\x0a','includes','Market','No\x20more\x20open\x20orders\x20-\x20','assign','log','isEqual','1\x20-\x20FILLED\x20known\x20order:\x20','fromCodePoint','BUSD','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','-events.json','7353072CFGVXA','remove','page','API-key\x20format\x20invalid','writeFile','2.6.22','getSeconds','RETRY\x20-\x20Problem\x20resolved\x20after\x20','format','cancelLoading','mkdirSync','write','lowdb/adapters/FileSync','change24h','openOrders','update-liquidity','toLowerCase','addDays','\x20>\x20','</pre>','version','initTickers()','pro','warning','number'];_0x5c97=function(){return _0x48cc27;};return _0x5c97();}function formatResultTruncate(_0x482c75,_0x76f51){const _0xc01e76=_0x518395;let _0x793915=formatResultString(_0x482c75,0xa),_0x42793c=_0x793915[_0xc01e76(0x286)]('.');return _0x42793c!=-0x1&&(_0x793915=_0x793915[_0xc01e76(0x184)](0x0,_0x42793c+_0x76f51+0x1)),Number(_0x793915);}function formatResultString(_0x2b6caa,_0x13681e){const _0x27944e=_0x518395;let _0x4eb1a5;if(!(''+_0x2b6caa)['includes']('e'))_0x4eb1a5=+(Math['round'](_0x2b6caa+'e+'+_0x13681e)+'e-'+_0x13681e);else{let _0x63c0b9=(''+_0x2b6caa)[_0x27944e(0x296)]('e'),_0x23b42d='';+_0x63c0b9[0x1]+_0x13681e>0x0&&(_0x23b42d='+'),_0x4eb1a5=+(Math['round'](+_0x63c0b9[0x0]+'e'+_0x23b42d+(+_0x63c0b9[0x1]+_0x13681e))+'e-'+_0x13681e);}return Number(_0x4eb1a5)['toFixed'](_0x13681e);}function getServerTime(){const _0x4aea89=_0x518395,_0xe85570=new Date();return _0xe85570['getFullYear']()+'/'+(_0xe85570[_0x4aea89(0x277)]()+0x1)[_0x4aea89(0x2a1)]()[_0x4aea89(0x20e)](0x2,'0')+'/'+_0xe85570[_0x4aea89(0x2b7)]()['toString']()[_0x4aea89(0x20e)](0x2,'0')+'\x20'+_0xe85570[_0x4aea89(0x174)]()[_0x4aea89(0x2a1)]()['padStart'](0x2,'0')+':'+_0xe85570[_0x4aea89(0x1a9)]()[_0x4aea89(0x2a1)]()[_0x4aea89(0x20e)](0x2,'0')+':'+_0xe85570[_0x4aea89(0x301)]()[_0x4aea89(0x2a1)]()[_0x4aea89(0x20e)](0x2,'0');}function getTimeStamp(){const _0xe60849=_0x518395,_0x5b0ada=shiftedTime();return _0x5b0ada[_0xe60849(0x189)]()+'/'+(_0x5b0ada[_0xe60849(0x277)]()+0x1)[_0xe60849(0x2a1)]()['padStart'](0x2,'0')+'/'+_0x5b0ada[_0xe60849(0x2b7)]()['toString']()[_0xe60849(0x20e)](0x2,'0')+'\x20'+_0x5b0ada[_0xe60849(0x174)]()[_0xe60849(0x2a1)]()[_0xe60849(0x20e)](0x2,'0')+':'+_0x5b0ada['getMinutes']()[_0xe60849(0x2a1)]()[_0xe60849(0x20e)](0x2,'0')+':'+_0x5b0ada[_0xe60849(0x301)]()[_0xe60849(0x2a1)]()[_0xe60849(0x20e)](0x2,'0');}function getDate(){const _0x34bbf0=_0x518395,_0x577af3=shiftedTime();return _0x577af3[_0x34bbf0(0x189)]()+'/'+(_0x577af3['getMonth']()+0x1)[_0x34bbf0(0x2a1)]()[_0x34bbf0(0x20e)](0x2,'0')+'/'+_0x577af3[_0x34bbf0(0x2b7)]()[_0x34bbf0(0x2a1)]()['padStart'](0x2,'0');}function getHour(){const _0x303bf7=_0x518395,_0x12c422=shiftedTime();return _0x12c422[_0x303bf7(0x174)]()[_0x303bf7(0x2a1)]()[_0x303bf7(0x20e)](0x2,'0');}function sleep(_0x541757){return new Promise(_0x1cc14b=>setTimeout(_0x1cc14b,_0x541757));}function shiftedTime(){const _0x2a60ef=_0x518395,_0x3729ad=new Date();let _0x4f0588=_0x3729ad;if(config&&config[_0x2a60ef(0x211)]!==0x0)_0x4f0588=fns[_0x2a60ef(0x25e)](_0x3729ad,{'hours':config[_0x2a60ef(0x211)]});return _0x4f0588;}function timer(_0x1adcf2){const _0x3dbffb=_0x518395,_0x28e4ab=new Date();!lasttime?console['log'](getTimeStamp()+_0x3dbffb(0x216),_0x1adcf2,_0x28e4ab):console[_0x3dbffb(0x2f4)](getTimeStamp()+_0x3dbffb(0x216),_0x1adcf2,(_0x28e4ab-lasttime)/0x3e8),lasttime=_0x28e4ab;}