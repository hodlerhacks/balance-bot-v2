const _0x5a5ecf=_0x52be;(function(_0x137c40,_0x565e5a){const _0x2bb62a=_0x52be,_0x3d8518=_0x137c40();while(!![]){try{const _0x269976=-parseInt(_0x2bb62a(0x10b))/0x1*(parseInt(_0x2bb62a(0x14b))/0x2)+parseInt(_0x2bb62a(0x116))/0x3+parseInt(_0x2bb62a(0x125))/0x4+-parseInt(_0x2bb62a(0x24f))/0x5+parseInt(_0x2bb62a(0x194))/0x6+-parseInt(_0x2bb62a(0x25c))/0x7+parseInt(_0x2bb62a(0x1c4))/0x8;if(_0x269976===_0x565e5a)break;else _0x3d8518['push'](_0x3d8518['shift']());}catch(_0x53e065){_0x3d8518['push'](_0x3d8518['shift']());}}}(_0x2be4,0xb810a));const _0x6e568c=function(){let _0x59dc2f=!![];return function(_0x1cab8e,_0x27da3f){const _0x507cbe=_0x59dc2f?function(){if(_0x27da3f){const _0x37074d=_0x27da3f['apply'](_0x1cab8e,arguments);return _0x27da3f=null,_0x37074d;}}:function(){};return _0x59dc2f=![],_0x507cbe;};}(),_0x4ddaed=_0x6e568c(this,function(){const _0x44319d=_0x52be;return _0x4ddaed[_0x44319d(0x22b)]()[_0x44319d(0x112)](_0x44319d(0x187))[_0x44319d(0x22b)]()[_0x44319d(0x1dd)](_0x4ddaed)['search'](_0x44319d(0x187));});_0x4ddaed();'use strict';const ccxt=require('ccxt'),low=require(_0x5a5ecf(0x235)),FileSync=require(_0x5a5ecf(0x169)),fs=require('fs'),fns=require(_0x5a5ecf(0x121)),forge=require(_0x5a5ecf(0x137)),util=require(_0x5a5ecf(0x17a)),argv=require('yargs/yargs')(process[_0x5a5ecf(0x22d)][_0x5a5ecf(0x23c)](0x2))[_0x5a5ecf(0x22d)],path=require(_0x5a5ecf(0x269)),axios=require(_0x5a5ecf(0x136));let exchange,gTicker={},gChange={};const usdBasecoins=[_0x5a5ecf(0x195),'BUSD',_0x5a5ecf(0x249),'USDT','USDC','USDP'],excludedExchanges=[_0x5a5ecf(0x19b)],debugging=argv['d']||![];let pnlGenerationNeeded=argv['r']||![],config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object['freeze']({'LOCKED':0x0,'UNLOCKING':0x1,'UNLOCKED':0x2});let lockOrders=ORDERS[_0x5a5ecf(0x1b3)],validateOrdersState,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotIntervalShort=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0x5a5ecf(0x242)+pauseBotInterval/0xea60+'\x20minutes',maxPauseRetries=0x6,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,watchTransactionsInterval=0x3c*0x3e8,schedulerInterval=0x3c*0x3c*0x3e8,retryInterval=0x3e8,maxRetries=0x5,logPageSize=0x14,defaultFee=0.003;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidOrdersInitialTimeout,pidOrdersTimeout,botPaused=![],transactionDetectionOngoing=![],lastCoinsToBalance='',insufficientFundsWarningSent=[],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;function _0x2be4(){const _0x20afe0=['./version.json','\x20-\x20bot\x20switched\x20to\x20manual\x20mode','toFixed','set','recent20','padEnd','Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute','change24h','data','min','page','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','net-basecoin','lowdb/adapters/FileSync','Error\x20in\x20loadSymbols():\x20','getFullYear','fee','error','kill','setSandboxMode','coin','push','limit-high','heapUsed','\x20API\x20secret\x20is\x20invalid','\x20minutes','AuthenticationError','sandbox','loading-canceled','RequestTimeout','util','token\x20is\x20expired','Unfilled\x20order(s)\x20could\x20not\x20be\x20canceled\x20after\x20','sha256','emitHistory','Huobipro','watchTradesForSymbols','\x20not\x20responding\x20(see:\x20hodlerhacks.com/fix/5)','has','botID','getDate','PermissionDenied','Loading\x20completed','(((.+)+)+)+$','Initiating\x20bot\x20restart','addDays','Block\x20transaction\x20detection:\x20','market','orderId','DDoSProtection','Resetting\x20bot\x20history','NetworkError','timeshift','watchOrders()','Will\x20continue\x20to\x20wait\x20for\x20order(s)\x20to\x20be\x20filled\x20and\x20try\x20to\x20cancel\x20again\x20later','bot-','2322672fvbHST','USD','getHours','request-time','sells','getMinutes','complete','bitmex','marketcap','-------------------------------\x0a','1\x20-\x20FILLED\x20unknown\x20order:\x20','No\x20more\x20open\x20orders\x20-\x20','storeFiat','parse','Order\x20is\x20invalid:\x20','cancelLoading','price','event-history','substring','<b>Bot\x20','final','update-liquidity','Error\x20details:','</pre>','Unknown\x20error\x20-\x20check\x20logs','net-fiat','function','testAPI()','pki','max','limit-low','UNLOCKED','bb-settings.json','Bitget','last','reverse','market_cap','<b>','match','privateKeyFromPem',',\x20must\x20be\x20a\x203\x20digit\x20number','status','\x20due\x20to\x20offset','\x20exchange\x20error:\x20','Manual\x20balancing\x20required','write','unlinkSync','UNLOCKING','2427792iCcGWL','Set\x20lock\x20orders\x20to:\x20','api-issue','Updating\x20API\x20key\x20(not\x20saved\x20in\x20config\x20file\x20yet)','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','breakeven','marketcapEnabled','exchange','balancing\x20resumes\x20when\x20cooldown\x20ends','value','\x0aSymbol(s):\x20','bid','ID:\x20','orderstatus','valid','keys','eur','onepagemode','getMonth','apiSecret','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','debug','enableFiatToggle','added','fetchOpenOrders','constructor','threshold','Reset\x20|\x20','average','settings','findIndex','highest','getStartingBalances','pid','2\x20-\x20handling\x20FILLED\x20order:\x20','Gateio','change','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','Binance','target','length','2.7.1','create','RETRY\x20-\x20Error\x20in\x20','\x20portfolio:</b>\x20\x0a\x0a','buy','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','Net\x20','round','changes','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','\x20|\x20exchange:\x20','Error\x20details:\x20','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','getTime','portfolio1','marketcapApi','fetchTicker','filter','\x20network\x20error:\x20','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20trying\x20again\x20in\x20','cooldown','Failed\x20to\x20load\x20coin\x20data\x20for\x20','Executed\x20','staging','pnl','Error:\x20Invalid\x20argument\x20','timestamp','splice','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)','-config.json','Order\x20filled','\x20blocked\x20API\x20(DDoSProtection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','forEach','defaults','toggleBotMode','memoryUsage','%)\x0a',')\x20unknown\x20order:\x20','fromCodePoint','total','spot','************','running','active','Headless:\x20','send','\x20not\x20available\x20(see:\x20hodlerhacks.com/fix/5)','marketcapsqrt','cancelOrders()','exchanges','find','\x20>\x20','Insufficient\x20funds\x20to\x20execute\x20order:\x20','apiKey','warning','yyyy/MM/dd','progress','\x20metrics:</b>\x20\x0a\x0a','time','\x20attempts','/USD','process\x20','toString','Invalid\x20API\x20details,\x20please\x20try\x20again\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','argv','Test\x20new\x20API','includes','net','entries','initial','abs','args','lowdb','format','cancel','Portfolio\x20change\x20detected:\x20','-results.json','limit','\x20exchange','slice','cloneDeep','showConfig','recovery','./config/','Unfilled\x20order(s)\x20canceled\x20after\x20','\x20>\x20pausing\x20bot\x20for\x20','join','none','distribution','Saving\x20configuration','prevnumber','side','TUSD','configuration','Bybit','number','configuration-stored','add','4789885oqowFk','cost','startdate','toLowerCase','\x20uses\x20','getPortfolio','isBefore','Pausing\x20for\x20','1\x20-\x20Handle\x20open\x20orders','resetHistory','closed','Stopped\x20fetching\x20balance\x20after\x20','RSA-OAEP','5689040GCIklX','PAXG','currency','configstate','performance','Invalid\x20quantity','-performance.json','shift','fetchBalance','Exchange\x20permission\x20denied\x20-\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','USDT','PnL\x20','production','path','restart','status\x20code\x20401','quote',')\x20|\x20exchange:\x20','ExchangeError','date','random','\x20-\x20bot\x20not\x20started','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','starting-balances','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','Generating\x20PnL\x20data','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','portfolio','liquidity','Limit\x20(low-margin)','Error\x20while\x20deleting\x20files:\x20','assign','\x20rejected\x20your\x20API\x20request\x20(see:\x20hodlerhacks.com/fix/4)','RETRY\x20-\x20Problem\x20resolved\x20after\x20','existsSync','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','\x20/\x20','Initializing\x20exchange','createWriteStream','\x20orders\x20in\x20less\x20than\x20','ordertype','/USDT','amount','event','showname','cancelOrder','stack','realizedPnL','Resetting\x20coin\x20results:\x20','Market','password','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','delta','.json','pop','watchTrades','2.3.5','type','apiPassword','LOCKED','message','autoliquidity','sqrt','trade','2.6.0','symbol','\x20hour','2.6.23','2\x20-\x20Handled\x20open\x20orders','OnMaintenance','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','map','\x20>\x20[DEBUG]\x20','sell','Order(s)\x20not\x20validated\x20after\x20','Exception\x20thrown\x20in\x20','version','%\x20(','basecoin','test','Placing\x20order\x20for:\x20',')\x20known\x20order:\x20','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','initclient','balances','Portfolio\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','openOrders','2\x20-\x20Validate\x20orders:\x20','timeout','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','CoinMarketCap\x20data\x20could\x20not\x20be\x20updated\x20-\x20will\x20try\x20again\x20in\x201\x20hour','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','Cooldown\x20ended\x20-\x20balancing\x20resumed',':\x20timer\x20>','log','InvalidNonce','logs','Cryptocom','detectLiquidityChange()','EUR','Cex','createOrder','bot','1\x20-\x20Validate\x20orders:\x20','placeOrder()','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20for\x20','code','fiat','Failed\x20to\x20load\x20market\x20data\x20-\x20bot\x20not\x20started','InvalidOrder','mkdirSync','coins','loadMarkets','uncaughtException','bots','Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','offset','Value\x20','emojisell','portfolio2','\x20|\x20lock\x20orders:\x20','MIN_NOTIONAL','order','Insufficient\x20funds\x20to\x20place\x20order\x20for\x20','\x20order:\x20','stringify','/output-000.log','Initializing\x20coin\x20results','sortBy','split','timestamp-issue','\x20minutes\x20-\x20','indexOf','toUpperCase','sort','Trigger:\x20','canceled','-events.json','5884eMCpAM','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','watchOrders','full','remainingSymbols','basecoinvalue','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','search','isEqual','ask','Order\x20amount\x20is\x20invalid:\x20','4379898HSTdWT','excluded','filled','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','pnl-fiat','get','pnl-basecoin','<pre>','BTC','red_yellow_blue','Invalid\x20symbol:\x20','date-fns','replace','fetchBalance()','0\x20-\x20EXECUTION:\x20','3049676JyppLP','Generated\x20PnL\x20data','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','padStart','\x20-\x20go\x20back\x20and\x20try\x20again','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','startnumber','Order\x20filled:\x20',':\x20Bot\x20','watchTrades()','placeOrder','removed','\x20>\x20details:','getOpenOrders()','\x20API\x20key,\x20secret\x20or\x20password\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','Resuming\x20(','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','axios','node-forge','botname','must\x20be\x20greater\x20than\x20minimum\x20amount','slider','emojibuy','Limit\x20(high-margin)','success','buys','ongoing','usd','1\x20-\x20partially\x20FILLED\x20(','deleteHistoryAlerts','privateKey','limits','getSeconds','\x20|\x20Custom\x20ID:\x20','headless','\x20closed\x20the\x20connection\x20(see:\x20hodlerhacks.com/fix/5)','ETH','remove','132aOJDcv','secure','\x20|\x20','Unknown\x20error:\x20','testApi','fetchTickers','quick','Failed\x20to\x20connect\x20to\x20the\x20exchange\x20-\x20bot\x20not\x20started','open','./logs/','***','recreate','netoffset','\x20-\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','API-key\x20format\x20invalid','percentage','no\x20open\x20orders'];_0x2be4=function(){return _0x20afe0;};return _0x2be4();}let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x5dc,balanceUpdateRetries=0x5;let enableFiatToggle;const serverversion=require(_0x5a5ecf(0x15c))[_0x5a5ecf(0x2a8)],environment=require(_0x5a5ecf(0x15c))['environment']||_0x5a5ecf(0x268),botID=process['argv'][0x2]||'001',pattern=/^[0-9]{3}$/;!pattern[_0x5a5ecf(0x2ab)](botID)&&(console[_0x5a5ecf(0xde)](_0x5a5ecf(0x206)+botID+_0x5a5ecf(0x1bc)),killBot());const userID=process[_0x5a5ecf(0x22d)][0x3]||'',configpath=userID?'./config/'+userID+'/':_0x5a5ecf(0x240),logspath=userID?_0x5a5ecf(0x154)+userID+'/':'./logs/',loggerfile=fs[_0x5a5ecf(0x282)](logspath+_0x5a5ecf(0xff),{'flags':'a'});!fs[_0x5a5ecf(0x27e)](configpath)&&fs['mkdirSync'](configpath);!fs[_0x5a5ecf(0x27e)](logspath)&&fs[_0x5a5ecf(0xee)](logspath);const configfile=configpath+_0x5a5ecf(0x193)+botID+_0x5a5ecf(0x20a),logfile=configpath+_0x5a5ecf(0x193)+botID+'-events.json',performancefile=configpath+_0x5a5ecf(0x193)+botID+_0x5a5ecf(0x262),coinresultsfile=configpath+_0x5a5ecf(0x193)+botID+_0x5a5ecf(0x239),settingsfile=configpath+_0x5a5ecf(0x1b4),securefile=configpath+'bb-secure.json',configbackuppath=configpath+'/backup/',adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x5a5ecf(0x20e)]({'logs':[],'version':serverversion})[_0x5a5ecf(0x1c1)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance['defaults']({'data':[],'version':serverversion})[_0x5a5ecf(0x1c1)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x5a5ecf(0x20e)]({'bot':[],'version':serverversion})[_0x5a5ecf(0x1c1)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x5a5ecf(0x20e)]({'coins':{},'version':serverversion})['write']();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0,settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x16eb9f=>{console['log'](_0x16eb9f);},'simple':_0x1c82e2=>{const _0x4a75f0=_0x5a5ecf;console[_0x4a75f0(0xde)](_0x1c82e2),loggerfile[_0x4a75f0(0x1c1)](util[_0x4a75f0(0x236)](_0x1c82e2)+'\x0a');},'full':async(_0x369409,_0x1d6734='')=>{const _0x2aec65=_0x5a5ecf;let _0x19515c;if(config[_0x2aec65(0x288)])_0x19515c=getTimeStamp()+':\x20'+config['botname']+'\x20>\x20'+_0x369409;else _0x19515c=getTimeStamp()+':\x20Bot\x20'+botID+_0x2aec65(0x220)+_0x369409;console[_0x2aec65(0xde)](_0x19515c),loggerfile[_0x2aec65(0x1c1)](util[_0x2aec65(0x236)](_0x19515c)+'\x0a'),_0x1d6734&&(console[_0x2aec65(0xde)](_0x1d6734),loggerfile['write'](util[_0x2aec65(0x236)](_0x1d6734)+'\x0a'));},'debug':async(_0x253ba7,_0xb45f41='')=>{const _0x5d3474=_0x5a5ecf;let _0x3ddf74;if(config[_0x5d3474(0x288)])_0x3ddf74=getTimeStamp()+':\x20'+config[_0x5d3474(0x138)]+'\x20>\x20[DEBUG]\x20'+_0x253ba7;else _0x3ddf74=getTimeStamp()+_0x5d3474(0x12d)+botID+_0x5d3474(0x2a4)+_0x253ba7;if(debugging)console[_0x5d3474(0xde)](_0x3ddf74);loggerfile['write'](util[_0x5d3474(0x236)](_0x3ddf74)+'\x0a');if(_0xb45f41){if(debugging)console['log'](_0xb45f41);loggerfile[_0x5d3474(0x1c1)](util[_0x5d3474(0x236)](_0xb45f41)+'\x0a');}}};process['on']('uncaughtException',function(_0x33f93c){const _0xc965f2=_0x5a5ecf;handleError(_0x33f93c[_0xc965f2(0x28a)],_0xc965f2(0xf1));});settings[_0x5a5ecf(0x190)]!=config[_0x5a5ecf(0x190)]&&updateTimeshift(settings['timeshift']);settings['onepagemode']!=config['onepagemode']&&updateOnepagemode(settings[_0x5a5ecf(0x1d5)]);(settings[_0x5a5ecf(0x1fc)]&&!config['marketcapApi']||!settings[_0x5a5ecf(0x1fc)]&&config[_0x5a5ecf(0x1fc)])&&updateMarketcapApi(settings['marketcapApi']);process['send']({'started':_0x5a5ecf(0x217)},_0xe1185a=>{}),initializeProcessListeners();function proxyEmit(_0x40c4a5,_0xcbcf00=null){const _0x4db779=_0x5a5ecf;process[_0x4db779(0x21a)]({'function':_0x40c4a5,'args':_0xcbcf00},_0x4ac960=>{});}function initializeProcessListeners(){const _0x30a514=_0x5a5ecf;process['on'](_0x30a514(0x298),_0x5e14a8=>{const _0x412efe=_0x30a514;switch(Object[_0x412efe(0x1d3)](_0x5e14a8)[0x0]){case _0x412efe(0x190):_0x5e14a8[_0x412efe(0x190)]!=undefined&&(settings[_0x412efe(0x190)]=_0x5e14a8[_0x412efe(0x190)],updateTimeshift(settings[_0x412efe(0x190)]));break;case _0x412efe(0x1d5):_0x5e14a8['onepagemode']!=undefined&&(settings[_0x412efe(0x1d5)]=_0x5e14a8[_0x412efe(0x1d5)],updateOnepagemode(settings[_0x412efe(0x1d5)]));break;case _0x412efe(0x1fc):_0x5e14a8[_0x412efe(0x1fc)]!=undefined&&(settings[_0x412efe(0x1fc)]=_0x5e14a8[_0x412efe(0x1fc)],updateMarketcapApi(settings[_0x412efe(0x1fc)]));break;case _0x412efe(0xf2):_0x5e14a8[_0x412efe(0xf2)]!=undefined&&(bots=JSON[_0x412efe(0x1a1)](_0x5e14a8[_0x412efe(0xf2)]),proxyEmit(_0x412efe(0xf2),bots));break;case _0x412efe(0x1ae):switch(_0x5e14a8[_0x412efe(0x1ae)]){case _0x412efe(0x2af):initclient();break;case _0x412efe(0x20f):toggleBotMode();break;case _0x412efe(0x17e):emitHistory(_0x5e14a8['args']);break;case _0x412efe(0x142):deleteHistoryAlerts(_0x5e14a8['args']);break;case _0x412efe(0x254):getPortfolio(_0x5e14a8['args']);break;case'storeConfiguration':storeConfiguration(_0x5e14a8[_0x412efe(0x234)]);break;case'storeHeadless':storeHeadless(_0x5e14a8[_0x412efe(0x234)]);break;case _0x412efe(0x1a0):storeFiat(_0x5e14a8[_0x412efe(0x234)]);break;case _0x412efe(0x258):resetHistory();break;case _0x412efe(0x1e4):getStartingBalances(getNormalizedPerformance());break;case _0x412efe(0x12f):placeOrder(_0x5e14a8[_0x412efe(0x234)]);break;case _0x412efe(0x1a3):cancelLoading();break;case _0x412efe(0x23e):showConfig();break;case'sendMetricsTelegram':sendMetricsTelegram();break;case'sendPortfolioTelegram':sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x31e83c=![]){const _0x28e72f=_0x5a5ecf;logger[_0x28e72f(0x1d9)](_0x28e72f(0x1df)+(_0x31e83c?'exchange\x20reload':'no\x20exchange\x20reloaded')+_0x28e72f(0x1f7)+config[_0x28e72f(0x1cb)]);if(pidBalances)clearTimeout(pidBalances);lastCoinsToBalance='',insufficientFundsWarningSent=[],coinsLoaded=![];if(config[_0x28e72f(0x222)]!=''&&config['apiKey']!=_0x28e72f(0x155)){loadingProgress=0x0;if(_0x31e83c){await initExchange();const _0x1e639b=await testAPI();if(!_0x1e639b)return;await loadSymbols(),loadingProgress=0x1,setStableCoins(),proxyEmit(_0x28e72f(0x24a),emittedConfiguration()),initialPerformanceStored=![];}const _0x56c3ac=await getCoins();[currentCoins,currentCoinsAll]=_0x56c3ac,setBlockTransactionDetection(![]),startScheduler(),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x28e72f(0x1d9)]('Loading\x20completed'),getBalances(![]),await updateOpenOrders();if(lastOrders['length']==0x0&&allOpenOrders[_0x28e72f(0x1ec)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(pnlGenerationNeeded)await generatePnL();}}async function resumeBot(_0x4fbbb6=![]){const _0x325e37=_0x5a5ecf;logger[_0x325e37(0x1d9)](_0x325e37(0x134)+(_0x4fbbb6?_0x325e37(0x151):_0x325e37(0x19a))+_0x325e37(0x26d)+config[_0x325e37(0x1cb)]);if(pidBalances)clearTimeout(pidBalances);if(_0x4fbbb6){getBalances();return;}coinsLoaded=![];if(config['apiKey']!=''&&config[_0x325e37(0x222)]!=_0x325e37(0x155)){loadingProgress=0x1;const _0xde3002=await getCoins();[currentCoins,currentCoinsAll]=_0xde3002,setBlockTransactionDetection(![]),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger['debug'](_0x325e37(0x186)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x325e37(0x1ec)]==0x0&&allOpenOrders[_0x325e37(0x1ec)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();}}async function getMarketCap(_0x4f11ac){const _0x218687=_0x5a5ecf;let _0x5e8283=![];if(_0x4f11ac)_0x5e8283=!![];const _0x308f9a=_0x5e8283?_0x4f11ac:currentCoins,_0x114dad=_0x308f9a['map'](_0x1811f2=>_0x1811f2['coin']);if(!config[_0x218687(0x1fc)]||!_0x5e8283&&!config[_0x218687(0x1ca)]||_0x114dad['length']==0x0)return;let _0x258bc9=null;try{_0x258bc9=await axios[_0x218687(0x11b)](_0x218687(0x12a),{'headers':{'X-CMC_PRO_API_KEY':settings[_0x218687(0x1fc)]},'params':{'symbol':_0x114dad['toString']()}});}catch(_0x1bc415){_0x258bc9=null,_0x1bc415['toString']()[_0x218687(0x22f)](_0x218687(0x26b))?(config[_0x218687(0x1fc)]=![],updateConfig(),proxyEmit(_0x218687(0x24a),emittedConfiguration()),logHistory('error',_0x218687(0x28f))):(logHistory(_0x218687(0x16d),_0x218687(0x200)+schedulerInterval/(0x3c*0x3e8)+_0x218687(0x175)),logger[_0x218687(0x1d9)](_0x218687(0x1aa),_0x1bc415[_0x218687(0x22b)]()+'\x20-\x20'+_0x1bc415[_0x218687(0xea)]));}let _0x10cf43=!![];if(_0x258bc9){let _0x40df21=0x0;const _0x51e685=_0x258bc9[_0x218687(0x164)];_0x114dad[_0x218687(0x20d)](_0x5a51a2=>{const _0x20c7ee=_0x218687;if(_0x51e685[_0x20c7ee(0x164)][_0x5a51a2][0x0]&&_0x51e685[_0x20c7ee(0x164)][_0x5a51a2][0x0][_0x20c7ee(0x26c)][_0x20c7ee(0x195)][_0x20c7ee(0x1b8)])_0x40df21+=_0x51e685['data'][_0x5a51a2][0x0][_0x20c7ee(0x26c)][_0x20c7ee(0x195)][_0x20c7ee(0x1b8)];else{if(!['EUR',_0x20c7ee(0x195)][_0x20c7ee(0x22f)](_0x5a51a2)){if(_0x5e8283)logHistory('error',_0x20c7ee(0xe9)+_0x5a51a2+_0x20c7ee(0x129));else{const _0x52647e=config['portfolio'][_0x20c7ee(0x21f)](_0x308310=>_0x308310[_0x20c7ee(0x170)]==_0x5a51a2);_0x52647e&&!_0x52647e[_0x20c7ee(0x117)]&&_0x52647e[_0x20c7ee(0x13a)]==-0x1&&(_0x10cf43=![],logHistory(_0x20c7ee(0x16d),_0x20c7ee(0xda)),logger['debug']('CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20for\x20'+_0x5a51a2));}}}});if(!_0x10cf43)return;_0x114dad[_0x218687(0x20d)](_0xf915ec=>{const _0x294aeb=_0x218687,_0x1a8143=_0x51e685[_0x294aeb(0x164)][_0xf915ec][0x0]?_0x51e685[_0x294aeb(0x164)][_0xf915ec][0x0]['quote'][_0x294aeb(0x195)][_0x294aeb(0x1b8)]:0x0;if(_0x5e8283){const _0x157866=_0x4f11ac[_0x294aeb(0x21f)](_0x3337b9=>_0x3337b9[_0x294aeb(0x170)]==_0xf915ec);_0x157866&&(_0x157866[_0x294aeb(0x19c)]=_0x1a8143);}else{const _0x20346b=currentCoins[_0x294aeb(0x21f)](_0x54b274=>_0x54b274[_0x294aeb(0x170)]==_0xf915ec);_0x20346b&&(_0x20346b[_0x294aeb(0x19c)]=_0x1a8143);const _0x3c2563=currentCoinsAll[_0x294aeb(0x21f)](_0x152675=>_0x152675[_0x294aeb(0x170)]==_0xf915ec);_0x3c2563&&(_0x3c2563[_0x294aeb(0x19c)]=_0x1a8143);}}),!_0x5e8283&&updateTargetDistribution();}}function updateTargetDistribution(){const _0x1cdcfd=_0x5a5ecf,_0x4a3d6e=0x2;let _0x49f66c=0x0,_0xbd615a=0x0,_0x5f37d0=0x0,_0x167e8c=0x0,_0x2ead5b=0x0;config[_0x1cdcfd(0x277)][_0x1cdcfd(0x20d)](_0x1951df=>{const _0x52be6e=_0x1cdcfd;if(!_0x1951df[_0x52be6e(0x117)]){_0x5f37d0++,_0x49f66c+=_0x1951df['slider'];if(_0x1951df[_0x52be6e(0x13a)]===-0x1){_0x49f66c++;const _0x1c2c01=currentCoinsAll[_0x52be6e(0x21f)](_0x3ca85a=>_0x3ca85a[_0x52be6e(0x170)]==_0x1951df[_0x52be6e(0x170)]);_0x1c2c01&&(_0x167e8c+=_0x1c2c01[_0x52be6e(0x19c)],_0x2ead5b+=Math['sqrt'](_0x1c2c01[_0x52be6e(0x19c)]));}if(_0x1951df[_0x52be6e(0x13a)]!==-0x1)_0xbd615a++;}});let _0x16a792;const _0x231a50=0x64-_0x49f66c,_0x21326b=_0x5f37d0-_0xbd615a;_0x16a792=_0x21326b===0x0?_0x49f66c:Math[_0x1cdcfd(0x1b1)](0x64,_0x49f66c),config[_0x1cdcfd(0x277)]['forEach'](_0x1299a8=>{const _0x1160f4=_0x1cdcfd,_0x2f03e9=currentCoinsAll[_0x1160f4(0x21f)](_0x5e677f=>_0x5e677f[_0x1160f4(0x170)]==_0x1299a8[_0x1160f4(0x170)]);_0x2f03e9&&(_0x1299a8[_0x1160f4(0x19c)]=_0x2f03e9[_0x1160f4(0x19c)]);if(!_0x1299a8[_0x1160f4(0x117)]){if(_0x16a792<=0x64){if(_0x1299a8[_0x1160f4(0x13a)]===-0x1){if(_0x167e8c!==0x0&&config['marketcapEnabled']){if(_0x2f03e9){if(config['marketcapEnabled']=='marketcap')_0x1299a8[_0x1160f4(0x245)]=(_0x231a50/(_0x167e8c/_0x2f03e9['marketcap']))['toFixed'](_0x4a3d6e);else config[_0x1160f4(0x1ca)]==_0x1160f4(0x21c)&&(_0x1299a8[_0x1160f4(0x245)]=(_0x231a50/(_0x2ead5b/Math[_0x1160f4(0x29a)](_0x2f03e9[_0x1160f4(0x19c)])))[_0x1160f4(0x15e)](_0x4a3d6e));}}}}}}),updateConfig();}function updateConfig(){const _0x2dc514=_0x5a5ecf;let _0x47e06d=dbConfig[_0x2dc514(0x11b)](_0x2dc514(0xe6))[_0x2dc514(0x21f)]({'botID':botID})[_0x2dc514(0x1cd)]();_0x47e06d&&dbConfig[_0x2dc514(0x11b)](_0x2dc514(0xe6))['find']({'botID':botID})[_0x2dc514(0x27b)](config)['write']();}function logMemory(){const _0x34ae5c=_0x5a5ecf;if(environment!=_0x34ae5c(0x204))return;const _0x216ae9=process[_0x34ae5c(0x210)]()[_0x34ae5c(0x173)]/0x400/0x400;logger[_0x34ae5c(0x1d9)](_0x34ae5c(0x22a)+process[_0x34ae5c(0x1e5)]+_0x34ae5c(0x253)+formatResult(_0x216ae9,0x1)+'\x20MB');}async function startScheduler(){const _0x5a1eb8=shiftedTime()['getHours']();getMarketCap(),loadSymbols(),_0x5a1eb8==0x1&&logMemory(),await sleep(schedulerInterval),startScheduler();}async function restartBot(_0x575fb9=![]){const _0x1a327b=_0x5a5ecf;logger[_0x1a327b(0x1d9)](_0x1a327b(0x188));if(!_0x575fb9)while(lockOrders!=ORDERS[_0x1a327b(0x1b3)]||coolingDown){await sleep(0x3e8);}process[_0x1a327b(0x21a)]({'stop':_0x1a327b(0x26a)},_0x3d6bef=>{});}async function initExchange(_0x212267=config[_0x5a5ecf(0x1cb)],_0x15c1d9=config['apiKey'],_0x1532ce=config[_0x5a5ecf(0x1d7)],_0x2c1329=config[_0x5a5ecf(0x296)],_0x300c78=config[_0x5a5ecf(0x177)]){const _0x289e16=_0x5a5ecf;if(exchange){logger[_0x289e16(0x1d9)]('Initializing\x20exchange:\x20already\x20done');return;}logger[_0x289e16(0x1d9)](_0x289e16(0x281));!supportedExchanges()[_0x289e16(0x22f)](_0x212267)&&(logHistory('error',_0x289e16(0x27f)+_0x212267+_0x289e16(0x23b)),killBot());const _0x1d7af4=ccxt['pro'][_0x212267[_0x289e16(0x252)]()];exchange=new _0x1d7af4({'apiKey':_0x15c1d9,'secret':_0x1532ce,'options':{'defaultType':_0x289e16(0x215)}});if(_0x2c1329)exchange['password']=_0x2c1329;if(exchange[_0x289e16(0x182)][_0x289e16(0x177)])exchange[_0x289e16(0x16f)](_0x300c78);}function updateExchange(_0x27a76f,_0x539c86,_0x54a8a9=null){const _0x5872e6=_0x5a5ecf;exchange[_0x5872e6(0x222)]=_0x27a76f,exchange['secret']=_0x539c86,exchange[_0x5872e6(0x28e)]=_0x54a8a9,logger[_0x5872e6(0x1d9)](_0x5872e6(0x1c7));}function setStableCoins(){const _0x220d39=_0x5a5ecf;let _0x448a76=config[_0x220d39(0x2aa)]==_0x220d39(0x149)?_0x220d39(0x149):config[_0x220d39(0x2aa)]==_0x220d39(0x25d)?_0x220d39(0x25d):_0x220d39(0x11e),_0xfe4133=allSymbols[_0x220d39(0x22f)](_0x448a76+_0x220d39(0x229))?'USD':allSymbols[_0x220d39(0x22f)](_0x448a76+_0x220d39(0x285))?_0x220d39(0x266):_0x220d39(0xe3),_0x2d169a=allSymbols[_0x220d39(0x22f)](_0x448a76+'/EUR')?_0x220d39(0xe3):_0xfe4133;enableFiatToggle=!![],_0xfe4133==_0x220d39(0xe3)&&(enableFiatToggle=![],storeFiat('EUR')),_0x2d169a!=_0x220d39(0xe3)&&(enableFiatToggle=![],storeFiat('USD')),stablecoins={'eur':{'coin':''+_0x448a76+_0x2d169a,'symbol':_0x448a76+'/'+_0x2d169a},'usd':{'coin':''+_0x448a76+_0xfe4133,'symbol':_0x448a76+'/'+_0xfe4133}};}async function initwsCcxt(){const _0x531229=_0x5a5ecf;initCycle++;const _0x21b970=initCycle;let _0x5f1e0d=[];config[_0x531229(0x277)][_0x531229(0x20d)](_0x33cdfb=>{const _0x530fa5=_0x531229;if(!_0x33cdfb[_0x530fa5(0x117)]&&_0x33cdfb[_0x530fa5(0x170)]!=config[_0x530fa5(0x2aa)])_0x5f1e0d[_0x530fa5(0x171)](_0x33cdfb['symbol']);});if(!_0x5f1e0d[_0x531229(0x22f)](stablecoins['eur'][_0x531229(0x29d)]))_0x5f1e0d[_0x531229(0x171)](stablecoins[_0x531229(0x1d4)][_0x531229(0x29d)]);if(!_0x5f1e0d[_0x531229(0x22f)](stablecoins['usd'][_0x531229(0x29d)]))_0x5f1e0d[_0x531229(0x171)](stablecoins[_0x531229(0x140)]['symbol']);loadCoins(_0x5f1e0d),_0x5f1e0d=validateSymbols(_0x5f1e0d);const _0x126a0b=async _0x3b5c15=>{const _0xecb4c4=_0x531229;let _0xef13cd;try{const _0x3528e6=await getTickers(_0x3b5c15);Object[_0xecb4c4(0x231)](_0x3528e6)[_0xecb4c4(0x20d)](_0x7254b9=>{const _0x16c9d0=_0xecb4c4;_0xef13cd=_0x7254b9[0x1][_0x16c9d0(0x29d)],gTicker[noslash(_0xef13cd)]=_0x7254b9[0x1]['last'],gChange[_0xef13cd]=_0x7254b9[0x1][_0x16c9d0(0x15a)];});}catch(_0x1e3078){await handleError(_0x1e3078,'initTickers()',_0xef13cd);}},_0x54f8e6=async _0x30d827=>{const _0x33e787=_0x531229;while(initCycle==_0x21b970){if(!botPaused)try{const _0x5a3baf=await exchange[_0x33e787(0x293)](_0x30d827);gTicker[noslash(_0x5a3baf[0x0]['symbol'])]=_0x5a3baf[0x0][_0x33e787(0x1a4)];}catch(_0x2c35c3){if(!exchangeStopped)await handleError(_0x2c35c3,_0x33e787(0x12e),_0x30d827);}else await sleep(0x64);}},_0x38f638=async _0x2444c5=>{const _0x55dd03=_0x531229;while(initCycle==_0x21b970){if(!botPaused)try{const _0x4bde19=await exchange[_0x55dd03(0x180)](_0x2444c5),_0x39379e=_0x4bde19[_0x55dd03(0x292)]();gTicker[noslash(_0x39379e[_0x55dd03(0x29d)])]=_0x39379e[_0x55dd03(0x1a4)];}catch(_0x2fe8fc){if(!exchangeStopped)await handleError(_0x2fe8fc,'watchTradesForSymbols()',_0x2444c5[_0x55dd03(0x22b)]());}else await sleep(0x64);}},_0x423b2a=async _0x4138ff=>{const _0x5cc8e9=_0x531229;while(initCycle==_0x21b970){if(!botPaused){let _0x46cb03;try{await sleep(0x3c*0x3e8);const _0x5e2107=await getTickers(_0x4138ff);Object[_0x5cc8e9(0x231)](_0x5e2107)[_0x5cc8e9(0x20d)](_0x3c9778=>{const _0x25082d=_0x5cc8e9;_0x46cb03=_0x3c9778[0x1][_0x25082d(0x29d)],gChange[_0x46cb03]=_0x3c9778[0x1][_0x25082d(0x15a)];});}catch(_0x17551f){if(!exchangeStopped)await handleError(_0x17551f,'fetchTickers()',_0x46cb03);}}else await sleep(0x64);}},_0x545e47=async _0x15ef8a=>{const _0x4043c6=_0x531229;while(initCycle==_0x21b970){if(!botPaused)try{const _0x43c30a=await exchange[_0x4043c6(0x10d)](_0x15ef8a);initCycle==_0x21b970&&_0x43c30a[_0x4043c6(0x20d)](_0x2b92de=>{updateNumberCoinsCcxt(_0x2b92de);});}catch(_0x56e862){if(!exchangeStopped)await handleError(_0x56e862,_0x4043c6(0x191));}else await sleep(0x64);}};_0x126a0b(_0x5f1e0d),_0x423b2a(_0x5f1e0d),exchange[_0x531229(0x182)]['watchTradesForSymbols']&&!(config[_0x531229(0x1cb)]==_0x531229(0x24b)&&_0x5f1e0d[_0x531229(0x1ec)]>0xa)?_0x38f638(_0x5f1e0d):_0x5f1e0d[_0x531229(0x20d)](_0x1e07dc=>{_0x54f8e6(_0x1e07dc);}),_0x5f1e0d[_0x531229(0x20d)](_0x2cc0a0=>{_0x545e47(_0x2cc0a0);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x39639d){const _0x3e7c9c=_0x5a5ecf;let _0x1a3d89={};try{if(config[_0x3e7c9c(0x1cb)]!=_0x3e7c9c(0xe1))_0x1a3d89=await exchange[_0x3e7c9c(0x150)](_0x39639d);else for(const _0x3b22df of _0x39639d){const _0x3980c3=await exchange[_0x3e7c9c(0x1fd)](_0x3b22df);_0x1a3d89[_0x3b22df]=_0x3980c3;}return _0x1a3d89;}catch(_0x2fea80){throw _0x2fea80;}}function setBlockTransactionDetection(_0x29ca9b){const _0x286ab8=_0x5a5ecf;blockTransactionDetection=_0x29ca9b,logger[_0x286ab8(0x1d9)](_0x286ab8(0x18a)+blockTransactionDetection);}async function detectLiquidityChange(_0xeb57a=0x0){const _0x583fa8=_0x5a5ecf;transactionDetectionOngoing=!![];try{const _0x4fd136=await getCoins(_0xeb57a),[_0x3d37fe,_0x261002]=_0x4fd136;let _0x5628dc=[];currentCoins['forEach'](_0x516c31=>{const _0x5e317d=_0x52be,_0x59a517=_0x3d37fe[_0x5e317d(0x21f)](_0x203e60=>_0x203e60['coin']==_0x516c31[_0x5e317d(0x170)]);if(_0x59a517){if(_0x516c31[_0x5e317d(0x24c)]!=_0x59a517['number']){let _0x5483a8;if(_0x516c31[_0x5e317d(0x170)]!=config['basecoin']){const _0x1394c4=gTicker[noslash(_0x516c31[_0x5e317d(0x29d)])];_0x5483a8=_0x516c31['reverse']?0x1/_0x1394c4:_0x1394c4;}else _0x5483a8=0x1;_0x5628dc[_0x5e317d(0x171)]({'coin':_0x516c31[_0x5e317d(0x170)],'symbol':_0x516c31[_0x5e317d(0x29d)],'price':_0x5483a8,'number':Number(formatResult(_0x59a517[_0x5e317d(0x24c)]-_0x516c31['number'],0x8)),'basecoinvalue':_0x5483a8*(_0x59a517[_0x5e317d(0x24c)]-_0x516c31[_0x5e317d(0x24c)])});}}});if(_0x5628dc[_0x583fa8(0x1ec)]>0x0&&!blockTransactionDetection){for(const _0x41238a of _0x5628dc){if(config['autoliquidity']){logger[_0x583fa8(0x1d9)](_0x583fa8(0xf4)+_0x41238a[_0x583fa8(0x110)]+'\x20|\x20highest\x20fee:\x20'+lastFees['highest']);if(lastFees[_0x583fa8(0x1e3)]==0x0||Math[_0x583fa8(0x233)](_0x41238a[_0x583fa8(0x110)])>lastFees['highest']*0x3){if(config[_0x583fa8(0x299)]==_0x583fa8(0x1a9)){delete _0x41238a[_0x583fa8(0x29d)],delete _0x41238a['basecoinvalue'];let _0x9a8dd2=[],_0x47a92d=[...config['liquidity']]||[],_0x278b6f=config[_0x583fa8(0x278)];_0x47a92d[_0x583fa8(0x107)]((_0x271eeb,_0x495055)=>_0x271eeb[_0x583fa8(0x26f)]>_0x495055[_0x583fa8(0x26f)]?-0x1:_0x495055['date']>_0x271eeb['date']?0x1:0x0);const _0x3e6f52=getDate();if(_0x47a92d[0x0]){const _0x1fd087=fns['parse'](_0x47a92d[0x0]['date'],_0x583fa8(0x224),new Date()),_0x3f5ca4=fns['parse'](_0x3e6f52,_0x583fa8(0x224),new Date());if(fns[_0x583fa8(0x113)](_0x1fd087,_0x3f5ca4)){_0x9a8dd2=_0x47a92d[0x0]['changes'];const _0x43f578=_0x9a8dd2[_0x583fa8(0x21f)](_0x39c09a=>_0x39c09a[_0x583fa8(0x170)]==_0x41238a[_0x583fa8(0x170)]);_0x43f578?(_0x43f578[_0x583fa8(0x24c)]+=_0x41238a[_0x583fa8(0x24c)],_0x43f578[_0x583fa8(0x24c)]==0x0&&(_0x9a8dd2=_0x9a8dd2[_0x583fa8(0x1fe)](_0x4a1b28=>{return _0x4a1b28['coin']!=_0x41238a['coin'];}))):_0x9a8dd2[_0x583fa8(0x171)](_0x41238a);const _0x5ce343=_0x278b6f[_0x583fa8(0x21f)](_0x529171=>_0x529171[_0x583fa8(0x26f)]==_0x3e6f52);_0x5ce343[_0x583fa8(0x1f5)]=_0x9a8dd2;}else _0x278b6f['push']({'date':_0x3e6f52,'changes':[_0x41238a]});}const _0xe7f949=_0x278b6f[_0x583fa8(0x21f)](_0x582029=>_0x582029['date']==_0x3e6f52);if(_0xe7f949){let _0x2a140c=!![];_0xe7f949[_0x583fa8(0x1f5)][_0x583fa8(0x20d)](_0x10dd6c=>{const _0x1c7959=_0x583fa8;if(_0x10dd6c[_0x1c7959(0x24c)]!=0x0)_0x2a140c=![];}),_0x2a140c&&(_0x278b6f=_0x278b6f[_0x583fa8(0x1fe)](_0xdeb8dc=>{return _0xdeb8dc['date']!=_0x3e6f52;}));}let _0x19d391=dbConfig[_0x583fa8(0x11b)](_0x583fa8(0xe6))[_0x583fa8(0x21f)]({'botID':botID})[_0x583fa8(0x1cd)]();_0x19d391&&(dbConfig[_0x583fa8(0x11b)](_0x583fa8(0xe6))[_0x583fa8(0x21f)]({'botID':botID})[_0x583fa8(0x27b)]({'liquidity':_0x278b6f})['write'](),config['liquidity']=_0x278b6f);logHistory(_0x583fa8(0x13d),_0x583fa8(0x238)+Math[_0x583fa8(0x233)](_0x41238a[_0x583fa8(0x24c)])+'\x20'+_0x41238a[_0x583fa8(0x170)]+'\x20'+(_0x41238a[_0x583fa8(0x24c)]>0x0?'added':_0x583fa8(0x130))+_0x583fa8(0x2a2)),proxyEmit('configuration',emittedConfiguration());const _0x8f5894=getNormalizedPerformance();emitPerformance(_0x8f5894),getStartingBalances(_0x8f5894),logger[_0x583fa8(0x1d9)](_0x583fa8(0x2b1));}else config['autoliquidity']=='switch-manual'&&(config[_0x583fa8(0x147)]?(await storeHeadless({'headless':![]}),logHistory('success',_0x583fa8(0x238)+Math[_0x583fa8(0x233)](_0x41238a['number'])+'\x20'+_0x41238a[_0x583fa8(0x170)]+'\x20'+(_0x41238a['number']>0x0?_0x583fa8(0x1db):_0x583fa8(0x130))+_0x583fa8(0x15d))):logger[_0x583fa8(0x1d9)](_0x583fa8(0x238)+Math[_0x583fa8(0x233)](_0x41238a[_0x583fa8(0x24c)])+'\x20'+_0x41238a['coin']+'\x20'+(_0x41238a[_0x583fa8(0x24c)]>0x0?_0x583fa8(0x1db):_0x583fa8(0x130))+'\x20-\x20bot\x20already\x20running\x20in\x20manual\x20mode'));}else logger[_0x583fa8(0x1d9)]('Fee\x20discount\x20refund\x20detected:\x20'+Math[_0x583fa8(0x233)](_0x41238a[_0x583fa8(0x24c)])+'\x20'+_0x41238a[_0x583fa8(0x170)]+'\x20'+(_0x41238a[_0x583fa8(0x24c)]>0x0?_0x583fa8(0x1db):'removed'));}else logger['debug'](_0x583fa8(0x238)+Math[_0x583fa8(0x233)](_0x41238a[_0x583fa8(0x24c)])+'\x20'+_0x41238a[_0x583fa8(0x170)]+'\x20'+(_0x41238a['number']>0x0?_0x583fa8(0x1db):_0x583fa8(0x130))+_0x583fa8(0x158));}currentCoins=_0x3d37fe,currentCoinsAll=_0x261002;}}catch(_0x4eafeb){if(!exchangeStopped)await handleError(_0x4eafeb,_0x583fa8(0xe2));}transactionDetectionOngoing=![];}async function watchTransactions(){await sleep(0x14*0x3e8);while(!![]){!botPaused&&!blockTransactionDetection&&coinsLoaded?(detectLiquidityChange(),await sleep(watchTransactionsInterval)):await sleep(0x3e8);}}async function loadSymbols(){const _0x5dc7ff=_0x5a5ecf;try{markets=await exchange[_0x5dc7ff(0xf0)](!![]),allSymbols=[],Object[_0x5dc7ff(0x231)](markets)[_0x5dc7ff(0x20d)](_0x3e39c1=>{const _0x1cf8f1=_0x5dc7ff;_0x3e39c1[0x1][_0x1cf8f1(0x218)]&&_0x3e39c1[0x1]['spot']&&allSymbols[_0x1cf8f1(0x171)](_0x3e39c1[0x0]);});}catch(_0x15fd2a){markets?logger[_0x5dc7ff(0x1d9)](_0x5dc7ff(0x16a)+_0x15fd2a[_0x5dc7ff(0x22b)]()):(loading[_0x5dc7ff(0x237)]=!![],_0x15fd2a['toString']()[_0x5dc7ff(0x252)]()[_0x5dc7ff(0x22f)](_0x5dc7ff(0x207))||_0x15fd2a['toString']()['toLowerCase']()[_0x5dc7ff(0x22f)](_0x5dc7ff(0x197))?(logHistory('error',_0x5dc7ff(0xf3)),loading[_0x5dc7ff(0x16d)]=_0x5dc7ff(0x103)):handleErrorNoStop(_0x15fd2a,'loadSymbols()',!![]),logHistory(_0x5dc7ff(0x16d),_0x5dc7ff(0xec)),logHistory('error',_0x5dc7ff(0x256)+loadCoinsRetryInterval/0xea60+_0x5dc7ff(0x1e9)),logger[_0x5dc7ff(0x1d9)]('Error\x20details:',_0x15fd2a),emitLoadingProgress(),botPaused=!![],await sleep(loadCoinsRetryInterval),restartBot());}}function validateSymbols(_0x5675b7){const _0x3c43e4=_0x5a5ecf;let _0x4d5f30=[];return _0x5675b7[_0x3c43e4(0x20d)](_0x458368=>{const _0x2a1c70=_0x3c43e4;!allSymbols['includes'](_0x458368)?(logHistory(_0x2a1c70(0x16d),_0x2a1c70(0x120)+_0x458368+_0x2a1c70(0x167)),loading[_0x2a1c70(0x2b4)]=!![],emitLoadingProgress()):_0x4d5f30[_0x2a1c70(0x171)](_0x458368);}),_0x4d5f30;}async function initclient(){const _0x158464=_0x5a5ecf;proxyEmit(_0x158464(0x24a),emittedConfiguration()),proxyEmit('exchanges',supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x158464(0x2b0),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0xa29442=getNormalizedPerformance();emitPerformance(_0xa29442),getStartingBalances(_0xa29442);}async function toggleBotMode(){const _0x544079=_0x5a5ecf;let _0x3eb802=dbConfig[_0x544079(0x11b)](_0x544079(0xe6))[_0x544079(0x21f)]({'botID':botID})['value']();if(_0x3eb802){const _0x5199e5=!_0x3eb802['headless'];dbConfig[_0x544079(0x11b)](_0x544079(0xe6))[_0x544079(0x21f)]({'botID':botID})[_0x544079(0x27b)]({'headless':_0x5199e5})[_0x544079(0x1c1)](),config['headless']=_0x5199e5,proxyEmit(_0x544079(0x24a),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x2f9705=_0x5a5ecf;process[_0x2f9705(0x21a)]({'updatebotmanager':!![]},_0x10bf38=>{}),logger[_0x2f9705(0x1d9)](_0x2f9705(0x219)+config['headless']);}async function loadCoins(_0x5d34f4){const _0x44a9e0=_0x5a5ecf;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x542fbb,_0x3d2394=0x0,_0x4e84ac=0x0;_0x5d34f4[_0x44a9e0(0x20d)](_0x1f1d0b=>{const _0x4196ec=_0x44a9e0;loading[_0x4196ec(0x10f)][_0x4196ec(0x171)](_0x1f1d0b);}),loadingCanceled=![];let _0x7213e3=![];while(_0x542fbb!=_0x5d34f4['length']+maxLoadingProgress){_0x542fbb=loadingProgress,_0x5d34f4[_0x44a9e0(0x20d)](_0x59787d=>{const _0x233407=_0x44a9e0;if(gTicker[noslash(_0x59787d)]){loading[_0x233407(0x10f)]=loading[_0x233407(0x10f)][_0x233407(0x1fe)](_0x2a7082=>_0x2a7082!=_0x59787d);if(!watchedSymbols[_0x233407(0x22f)](_0x59787d))watchedSymbols[_0x233407(0x171)](_0x59787d);_0x542fbb++;}}),loading[_0x44a9e0(0x225)]=Math[_0x44a9e0(0x1f4)](_0x542fbb/(_0x5d34f4['length']+maxLoadingProgress)*0x64);loading['progress']!=0x64&&(_0x4e84ac>0x1e*0x5&&(loading[_0x44a9e0(0x2b4)]=!![],emitLoadingProgress()),_0x4e84ac>0x78*0x5&&!_0x7213e3&&(_0x7213e3=!![],logHistory(_0x44a9e0(0x16d),_0x44a9e0(0x202)+loading[_0x44a9e0(0x10f)]['join'](',\x20')+_0x44a9e0(0x271)),logHistory(_0x44a9e0(0x16d),_0x44a9e0(0x256)+loadCoinsRetryInterval/0xea60+_0x44a9e0(0x1e9)),loadingCanceled=!![],await sleep(loadCoinsRetryInterval),restartBot()));if(loadingCanceled){loading[_0x44a9e0(0x237)]=!![],emitLoadingProgress();break;}else _0x3d2394!=loading['progress']&&(_0x3d2394=loading[_0x44a9e0(0x225)],emitLoadingProgress()),_0x4e84ac++,await sleep(0xc8);}_0x542fbb==_0x5d34f4[_0x44a9e0(0x1ec)]+maxLoadingProgress&&(coinsLoaded=!![],process[_0x44a9e0(0x21a)]({'status':'enabled','live':_0x44a9e0(0x217)},_0x385572=>{}),_0x7213e3&&logHistory(_0x44a9e0(0x13d),_0x44a9e0(0x127)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x30b3c9=_0x5a5ecf;proxyEmit(_0x30b3c9(0x24a),{...emittedConfiguration(),'configstate':_0x30b3c9(0x178)});}function emitLoadingProgress(){proxyEmit('coin-loading-progress',loading);}async function getFiat(){const _0x4cf9f2=_0x5a5ecf;let _0xba0417=gTicker[stablecoins[_0x4cf9f2(0x1d4)][_0x4cf9f2(0x170)]],_0x7eafac=gTicker[stablecoins[_0x4cf9f2(0x140)][_0x4cf9f2(0x170)]];return{'eur':Number(_0xba0417),'usd':Number(_0x7eafac)};}function capitalize(_0x57bc3f){const _0x5265e6=_0x5a5ecf;return _0x57bc3f[_0x5265e6(0x1a6)](0x0,0x1)[_0x5265e6(0x106)]()+_0x57bc3f[_0x5265e6(0x1a6)](0x1);}function supportedExchanges(){const _0x4382a2=_0x5a5ecf,_0x171ce6=['ws','fetchTickers',_0x4382a2(0x1fd),_0x4382a2(0x293),_0x4382a2(0x10d),_0x4382a2(0x289),_0x4382a2(0xe5),_0x4382a2(0x1dc),_0x4382a2(0x264)];let _0x5a7be7=[],_0x3e8213=[],_0x4b0e16=ccxt['pro'][_0x4382a2(0x21e)];_0x4b0e16[_0x4382a2(0x20d)](_0x2ae106=>{const _0xff5a57=_0x4382a2;try{const _0x1715cd=new ccxt['pro'][_0x2ae106]();_0x3e8213[_0xff5a57(0x171)](_0x1715cd);}catch(_0x528172){}}),_0x3e8213[_0x4382a2(0x20d)](_0x2400e3=>{const _0x2bae5e=_0x4382a2;let _0x298b3c=0x0;_0x171ce6[_0x2bae5e(0x20d)](_0x4d640b=>{const _0x2a89a7=_0x2bae5e;_0x4d640b in _0x2400e3[_0x2a89a7(0x182)]&&_0x2400e3[_0x2a89a7(0x182)][_0x4d640b]&&_0x298b3c++;}),_0x298b3c==_0x171ce6[_0x2bae5e(0x1ec)]&&(!excludedExchanges['includes'](_0x2400e3['id'])&&_0x5a7be7['push'](capitalize(_0x2400e3['id'])));});let _0xbcb657=[];return _0x4b0e16[_0x4382a2(0x20d)](_0x706e0c=>{const _0x101b0f=_0x4382a2;_0x706e0c=capitalize(_0x706e0c);if(!_0x5a7be7[_0x101b0f(0x22f)](_0x706e0c))_0xbcb657[_0x101b0f(0x171)](_0x706e0c);}),_0x5a7be7;}function setStartDatePerformance(){const _0x30be00=_0x5a5ecf;if(config&&config['liquidity'][0x0]['changes'][_0x30be00(0x1ec)]!=0x0){const _0x216a38=config[_0x30be00(0x278)][0x0]['changes'];dbPerformance['get'](_0x30be00(0x164))[_0x30be00(0x21f)]({'date':config[_0x30be00(0x251)]})[_0x30be00(0x27b)]({'coins':_0x216a38})['write']();}}function calculatePnL(_0x26ce3f,_0x174b7b,_0x44d8e2,_0x295de9,_0x386c60,_0x19700b){const _0x7a5543=_0x5a5ecf;!_0x26ce3f[_0x7a5543(0x22f)]('/'+config[_0x7a5543(0x2aa)])&&(_0x44d8e2=_0x44d8e2==_0x7a5543(0x1f1)?_0x7a5543(0x2a5):'buy');!_0x19700b[_0x174b7b]&&(_0x19700b[_0x174b7b]={'number':0x0,'sells':0x0,'buys':0x0,'breakeven':0x0,'realizedPnL':0x0});let _0x3e8979=0x0,_0x224651,_0x48448f;if(_0x44d8e2==_0x7a5543(0x1f1))_0x48448f=_0x19700b[_0x174b7b][_0x7a5543(0x24c)]*_0x19700b[_0x174b7b][_0x7a5543(0x1c9)]+_0x386c60*_0x295de9,_0x19700b[_0x174b7b][_0x7a5543(0x24c)]+=_0x295de9,_0x19700b[_0x174b7b][_0x7a5543(0x1c9)]=_0x19700b[_0x174b7b][_0x7a5543(0x24c)]!=0x0?_0x48448f/_0x19700b[_0x174b7b][_0x7a5543(0x24c)]:0x0,_0x19700b[_0x174b7b][_0x7a5543(0x13e)]++;else _0x44d8e2==_0x7a5543(0x2a5)&&(_0x224651=Math['min'](_0x19700b[_0x174b7b][_0x7a5543(0x24c)],_0x295de9),_0x3e8979=(_0x386c60-_0x19700b[_0x174b7b][_0x7a5543(0x1c9)])*_0x224651,_0x48448f=Math['max'](_0x19700b[_0x174b7b][_0x7a5543(0x24c)]*_0x19700b[_0x174b7b][_0x7a5543(0x1c9)]-_0x224651*_0x19700b[_0x174b7b][_0x7a5543(0x1c9)],0x0),_0x19700b[_0x174b7b][_0x7a5543(0x24c)]-=_0x224651,_0x19700b[_0x174b7b]['breakeven']=_0x19700b[_0x174b7b][_0x7a5543(0x24c)]!=0x0?_0x48448f/_0x19700b[_0x174b7b][_0x7a5543(0x24c)]:0x0,_0x19700b[_0x174b7b][_0x7a5543(0x28b)]+=_0x3e8979,_0x19700b[_0x174b7b][_0x7a5543(0x198)]++);return _0x3e8979;}async function generatePnL(){const _0x445369=_0x5a5ecf;pnlGenerationNeeded=![],logger[_0x445369(0x1d9)](_0x445369(0x275));const _0x5be7b7=dbLogs[_0x445369(0x11b)](_0x445369(0xe0))[_0x445369(0x1cd)]();let _0x178aad={},_0x583cab=0x0,_0x30ac8a=0x0,_0x5b19fb=config[_0x445369(0x251)];const _0x17cd55=fns[_0x445369(0x1a1)](_0x5b19fb,_0x445369(0x224),new Date()),_0x12c959=new Date();let _0x777887=0x0;for(let _0x32f28e=_0x17cd55;!fns[_0x445369(0x255)](_0x12c959,_0x32f28e);_0x32f28e=fns[_0x445369(0x189)](_0x32f28e,0x1)){const _0x4ed84f=fns[_0x445369(0x236)](_0x32f28e,'yyyy/MM/dd');while(_0x583cab<_0x5be7b7[_0x445369(0x1ec)]){const _0x45e4d3=new Date(_0x5be7b7[_0x583cab][_0x445369(0x227)]);if(fns[_0x445369(0x255)](_0x45e4d3,_0x32f28e))_0x583cab++;else{if(_0x5be7b7[_0x583cab][_0x445369(0x227)]['includes'](_0x4ed84f)){const _0x27e698=_0x5be7b7[_0x583cab];if(_0x27e698[_0x445369(0x295)]===_0x445369(0xfb)&&(_0x27e698[_0x445369(0x287)][_0x445369(0x22f)](_0x445369(0x20b))||_0x27e698[_0x445369(0x287)][_0x445369(0x22f)]('Market\x20order'))){const _0x5f34d8=_0x27e698[_0x445369(0x287)][_0x445369(0x1ba)](/([A-Z]+\/[A-Z]+) (sell|buy) #([\d.]+) @([\d.]+)/);if(_0x5f34d8){const [,_0x7e658d,_0x1e5aed,_0x1fdbea,_0x2a78df]=_0x5f34d8,_0x26b308=_0x7e658d['includes']('/'+config[_0x445369(0x2aa)])?_0x7e658d[_0x445369(0x102)]('/')[0x0]:_0x7e658d['split']('/')[0x1],_0x349b82=calculatePnL(_0x7e658d,_0x26b308,_0x1e5aed,parseFloat(_0x1fdbea),parseFloat(_0x2a78df),_0x178aad);_0x30ac8a+=_0x349b82;}}_0x583cab++;}else break;}}dbPerformance['get']('data')[_0x445369(0x21f)]({'date':_0x4ed84f})[_0x445369(0x27b)]({'pnl':_0x30ac8a})['write']();}dbCoinResults[_0x445369(0x15f)]('coins',_0x178aad)[_0x445369(0x1c1)](),logger['debug'](_0x445369(0x126));const _0xe7e844=getNormalizedPerformance();emitPerformance(_0xe7e844);}async function updatePnL(_0x5a21b5){const _0x5a1c41=_0x5a5ecf,{symbol:_0x378328,coin:_0x39cfcb,amount:_0x565a5c,price:_0x167456,side:_0x57d5a7,reverse:_0x1b5af3}=_0x5a21b5;let _0x20a2ce=dbCoinResults[_0x5a1c41(0x11b)](_0x5a1c41(0xef))[_0x5a1c41(0x1cd)]();const _0x45c6bf=calculatePnL(_0x378328,_0x39cfcb,_0x57d5a7,_0x565a5c,_0x167456,_0x20a2ce);dbCoinResults['set']('coins',_0x20a2ce)[_0x5a1c41(0x1c1)]();const _0x52ffd6=getTimeStamp()[_0x5a1c41(0x102)]('\x20')[0x0];let _0x255640=dbPerformance[_0x5a1c41(0x11b)](_0x5a1c41(0x164))['find']({'date':_0x52ffd6})[_0x5a1c41(0x1cd)]();_0x255640?(_0x255640['pnl']+=_0x45c6bf,dbPerformance[_0x5a1c41(0x11b)](_0x5a1c41(0x164))['find']({'date':_0x52ffd6})[_0x5a1c41(0x27b)](_0x255640)[_0x5a1c41(0x1c1)]()):await storePerformance();const _0x3fb2bd=getNormalizedPerformance();emitPerformance(_0x3fb2bd);}async function validate24hChanges(){const _0x1eead0=_0x5a5ecf;for(const _0x203578 of currentCoins){if(_0x203578[_0x1eead0(0x170)]!=config[_0x1eead0(0x2aa)]){let _0x1dc3a9;_0x203578['reverse']?_0x1dc3a9=formatResult((0x1/(gChange[_0x203578[_0x1eead0(0x29d)]]/0x64+0x1)-0x1)*0x64,0x3):_0x1dc3a9=gChange[_0x203578[_0x1eead0(0x29d)]],_0x1dc3a9<config['change24h']&&(logHistory(_0x1eead0(0x16d),_0x203578['coin']+'\x20has\x20a\x2024h\x20drop\x20of\x20'+_0x1dc3a9+'%'),logHistory(_0x1eead0(0x16d),_0x1eead0(0x272)),logHistory(_0x1eead0(0x16d),_0x1eead0(0x274)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x57ab30,_0x42e85e){const _0x208a20=_0x5a5ecf;if(!_0x57ab30)return!![];const _0x133dd3=_0x42e85e['split']('.'),_0x579b0d=_0x57ab30[_0x208a20(0x102)]('.');for(var _0x2bfd35=0x0;_0x2bfd35<_0x579b0d[_0x208a20(0x1ec)];_0x2bfd35++){const _0x149be5=~~_0x579b0d[_0x2bfd35],_0x200361=~~_0x133dd3[_0x2bfd35];if(_0x149be5<_0x200361)return!![];if(_0x149be5>_0x200361)return![];}return![];}async function oneTimeMigration(){const _0x574168=_0x5a5ecf;let _0x934b7=dbLogs[_0x574168(0x11b)](_0x574168(0x2a8))[_0x574168(0x1cd)]();if(isOlderVersion(_0x934b7,_0x574168(0x294))){let _0x4ee1b6=[];const _0x1ef347=dbLogs['get'](_0x574168(0xe0))['value']();_0x1ef347[_0x574168(0x20d)](_0x4ef064=>{const _0x11a54b=_0x574168;_0x4ee1b6['push']({'time':_0x4ef064[_0x11a54b(0x227)],'type':_0x4ef064[_0x11a54b(0x295)],'event':_0x4ef064[_0x11a54b(0x287)]});}),dbLogs[_0x574168(0x11b)](_0x574168(0xe0))[_0x574168(0x27b)](_0x4ee1b6)[_0x574168(0x1c1)]();}let _0x21f412=dbConfig[_0x574168(0x11b)](_0x574168(0x2a8))[_0x574168(0x1cd)]();if(isOlderVersion(_0x21f412,_0x574168(0x294))){let _0x18948e=dbConfig[_0x574168(0x11b)](_0x574168(0xe6))['find']({'botID':botID})[_0x574168(0x1cd)]();if(_0x18948e){let _0xef7a21=[];_0x18948e[_0x574168(0x277)][_0x574168(0x20d)](_0x2470c0=>{const _0x59297a=_0x574168;_0xef7a21[_0x59297a(0x171)]({'coin':_0x2470c0[_0x59297a(0x170)],'number':_0x2470c0[_0x59297a(0x12b)],'price':_0x2470c0['startprice']}),delete _0x2470c0[_0x59297a(0x12b)],delete _0x2470c0['startprice'];});if(_0xef7a21[_0x574168(0x1ec)]!==0x0)fs['writeFile'](configbackuppath+('starting-balance-'+botID+_0x574168(0x291)),JSON['stringify'](_0xef7a21,null,0x4),function(_0x3dcc0b){if(_0x3dcc0b){}});const _0x21181b=(_0x3a0643,_0x42e6d5)=>{const _0x54a776=_0x574168;let _0x10c2fb=[];_0x42e6d5['forEach'](_0x3ae2fa=>{const _0x554cde=_0x52be,_0x527d0b=_0x3a0643[_0x554cde(0x21f)](_0x3924cc=>_0x3924cc[_0x554cde(0x170)]==_0x3ae2fa['coin']);if(!_0x527d0b)_0x10c2fb[_0x554cde(0x171)](_0x3ae2fa);});let _0x4c560f=[];return _0x3a0643[_0x54a776(0x20d)](_0x2af483=>{const _0x25c5a7=_0x54a776,_0x1ac5eb=_0x42e6d5['find'](_0x5b0aeb=>_0x5b0aeb[_0x25c5a7(0x170)]==_0x2af483[_0x25c5a7(0x170)]);if(!_0x1ac5eb||_0x1ac5eb[_0x25c5a7(0x24c)]==0x0&&_0x2af483[_0x25c5a7(0x24c)]!=0x0)_0x4c560f[_0x25c5a7(0x171)](_0x2af483);}),{'missingDay1':_0x10c2fb,'notInDay2':_0x4c560f};},_0x53cf53=dbPerformance['get'](_0x574168(0x164))[_0x574168(0x23d)]()['value']();if(_0x53cf53[_0x574168(0x1ec)]>0x1){const {missingDay1:_0x32c4c0,notInDay2:_0xb4c55d}=_0x21181b(_0xef7a21,_0x53cf53[0x1]['coins']);_0xef7a21=[..._0xef7a21,..._0x32c4c0],_0xb4c55d['forEach'](_0x11428b=>{const _0x26302a=_0x574168;let _0x5b5a8d=_0xef7a21[_0x26302a(0x1e2)](_0x2664cc=>_0x2664cc['coin']==_0x11428b[_0x26302a(0x170)]);_0x5b5a8d!=-0x1&&_0xef7a21[_0x26302a(0x208)](_0x5b5a8d,0x1);});}_0xef7a21[_0x574168(0x107)]((_0x37c542,_0x483c33)=>_0x37c542['coin']>_0x483c33[_0x574168(0x170)]?0x1:_0x483c33[_0x574168(0x170)]>_0x37c542[_0x574168(0x170)]?-0x1:0x0);let _0x239662=[{'date':_0x18948e[_0x574168(0x251)],'changes':_0xef7a21}];_0x53cf53['length']>0x2&&_0x53cf53[_0x574168(0x20d)]((_0x135af7,_0x557f9a)=>{const _0x57dafc=_0x574168;if(_0x557f9a>0x0&&_0x557f9a<_0x53cf53[_0x57dafc(0x1ec)]-0x1){const {missingDay1:_0x30a4ff,notInDay2:_0x586ddc}=_0x21181b(_0x53cf53[_0x557f9a][_0x57dafc(0xef)],_0x53cf53[_0x557f9a+0x1]['coins']);_0xef7a21=[],(_0x30a4ff[_0x57dafc(0x1ec)]!=0x0||_0x586ddc['length']!=0x0)&&(_0x30a4ff[_0x57dafc(0x1ec)]!=0x0&&_0xef7a21['push'](..._0x30a4ff),_0x586ddc[_0x57dafc(0x1ec)]!=0x0&&(_0x586ddc['forEach'](_0x2d294f=>{const _0x4d2c34=_0x57dafc;_0x2d294f[_0x4d2c34(0x24c)]=-_0x2d294f['number'];}),_0xef7a21['push'](..._0x586ddc)),_0xef7a21[_0x57dafc(0x107)]((_0x2f416d,_0x4c5336)=>_0x2f416d[_0x57dafc(0x170)]>_0x4c5336[_0x57dafc(0x170)]?0x1:_0x4c5336[_0x57dafc(0x170)]>_0x2f416d['coin']?-0x1:0x0),_0x239662[_0x57dafc(0x171)]({'date':_0x53cf53[_0x557f9a+0x1]['date'],'changes':_0xef7a21}));}}),dbConfig[_0x574168(0x11b)](_0x574168(0xe6))[_0x574168(0x21f)]({'botID':botID})[_0x574168(0x27b)]({..._0x18948e,'liquidity':_0x239662})[_0x574168(0x1c1)]();}}if(isOlderVersion(_0x21f412,_0x574168(0x29c))){let _0x4bee42=dbConfig[_0x574168(0x11b)](_0x574168(0xe6))[_0x574168(0x21f)]({'botID':botID})[_0x574168(0x1cd)]();if(_0x4bee42){const _0x9adba1=_0x4bee42['exchange'],_0x4cacc6=_0x9adba1?capitalize(_0x9adba1):_0x574168(0x1ea);dbConfig[_0x574168(0x11b)](_0x574168(0xe6))[_0x574168(0x21f)]({'botID':botID})[_0x574168(0x27b)]({'exchange':_0x4cacc6})['write']();}}if(isOlderVersion(_0x21f412,'2.6.22')){let _0x1174e8=dbConfig[_0x574168(0x11b)](_0x574168(0xe6))[_0x574168(0x21f)]({'botID':botID})[_0x574168(0x1cd)]();if(_0x1174e8){const _0x31a600=_0x1174e8[_0x574168(0x1ca)],_0x2674c7=_0x31a600?_0x574168(0x19c):![];dbConfig[_0x574168(0x11b)](_0x574168(0xe6))[_0x574168(0x21f)]({'botID':botID})['assign']({'marketcapEnabled':_0x2674c7})[_0x574168(0x1c1)]();}}if(isOlderVersion(_0x21f412,_0x574168(0x29f))){let _0x560480=dbConfig[_0x574168(0x11b)](_0x574168(0xe6))['find']({'botID':botID})[_0x574168(0x1cd)]();if(_0x560480){const _0x19524d=_0x560480[_0x574168(0x299)],_0x522a0f=_0x19524d?'update-liquidity':![];dbConfig[_0x574168(0x11b)]('bot')[_0x574168(0x21f)]({'botID':botID})[_0x574168(0x27b)]({'autoliquidity':_0x522a0f})[_0x574168(0x1c1)]();}}let _0x111655=dbPerformance[_0x574168(0x11b)](_0x574168(0x2a8))['value']();isOlderVersion(_0x111655,_0x574168(0x294))&&setStartDatePerformance();let _0x50a740=dbCoinResults[_0x574168(0x11b)](_0x574168(0x2a8))[_0x574168(0x1cd)]();if(isOlderVersion(_0x50a740,_0x574168(0x1ed))){let _0x5b0ecd=dbCoinResults[_0x574168(0x11b)](_0x574168(0xef))['value']();if(_0x5b0ecd[_0x574168(0x1ec)]!=0x0)pnlGenerationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x4b3875=_0x5a5ecf;dbConfig['set'](_0x4b3875(0x2a8),serverversion)[_0x4b3875(0x1c1)](),dbPerformance[_0x4b3875(0x15f)](_0x4b3875(0x2a8),serverversion)[_0x4b3875(0x1c1)](),dbLogs['set'](_0x4b3875(0x2a8),serverversion)[_0x4b3875(0x1c1)](),dbCoinResults['set'](_0x4b3875(0x2a8),serverversion)[_0x4b3875(0x1c1)]();}function getConfiguration(_0x2a0c38){const _0x5716d7=_0x5a5ecf;let _0x18fde0=dbConfig[_0x5716d7(0x11b)](_0x5716d7(0xe6))[_0x5716d7(0x21f)]({'botID':_0x2a0c38})[_0x5716d7(0x1cd)]();if(_0x18fde0){let _0x5c04a1=![];typeof _0x18fde0[_0x5716d7(0x1de)]=='string'&&(_0x18fde0={..._0x18fde0,'threshold':Number(_0x18fde0[_0x5716d7(0x1de)])},_0x5c04a1=!![]),_0x18fde0[_0x5716d7(0x163)]==undefined&&(_0x18fde0={..._0x18fde0,'change24h':-0x14},_0x5c04a1=!![]),_0x18fde0[_0x5716d7(0xeb)]==undefined&&(_0x18fde0={..._0x18fde0,'fiat':_0x5716d7(0x195)},_0x5c04a1=!![]),_0x18fde0['onepagemode']==undefined&&(_0x18fde0={..._0x18fde0,'onepagemode':settings[_0x5716d7(0x1d5)]},_0x5c04a1=!![]),_0x18fde0['colorscheme']==undefined&&(_0x18fde0={..._0x18fde0,'colorscheme':_0x5716d7(0x11f)},_0x5c04a1=!![]),_0x18fde0[_0x5716d7(0x299)]==undefined&&(_0x18fde0={..._0x18fde0,'autoliquidity':_0x5716d7(0x1a9)},_0x5c04a1=!![]),_0x18fde0['marketcapApi']==undefined&&(_0x18fde0={..._0x18fde0,'marketcapApi':settings[_0x5716d7(0x1fc)]?!![]:![]},_0x5c04a1=!![]),_0x18fde0['marketcapEnabled']==undefined&&(_0x18fde0={..._0x18fde0,'marketcapEnabled':![]},_0x5c04a1=!![]),_0x18fde0[_0x5716d7(0x177)]==undefined&&(_0x18fde0={..._0x18fde0,'sandbox':![]},_0x5c04a1=!![]),_0x5c04a1&&(_0x18fde0={'botID':_0x18fde0[_0x5716d7(0x183)],'exchange':_0x18fde0[_0x5716d7(0x1cb)],'apiKey':_0x18fde0[_0x5716d7(0x222)],'apiSecret':_0x18fde0[_0x5716d7(0x1d7)],'apiPassword':_0x18fde0[_0x5716d7(0x296)],'basecoin':_0x18fde0[_0x5716d7(0x2aa)],'botname':_0x18fde0[_0x5716d7(0x138)],'showname':_0x18fde0[_0x5716d7(0x288)],'threshold':_0x18fde0[_0x5716d7(0x1de)],'ordertype':_0x18fde0[_0x5716d7(0x284)],'timeout':_0x18fde0[_0x5716d7(0x2b4)],'fiat':_0x18fde0[_0x5716d7(0xeb)],'startdate':_0x18fde0[_0x5716d7(0x251)],'recreate':_0x18fde0[_0x5716d7(0x156)],'timeshift':_0x18fde0[_0x5716d7(0x190)],'onepagemode':_0x18fde0[_0x5716d7(0x1d5)],'headless':_0x18fde0[_0x5716d7(0x147)],'cooldown':_0x18fde0['cooldown'],'change24h':_0x18fde0[_0x5716d7(0x163)],'emojibuy':_0x18fde0[_0x5716d7(0x13b)],'emojisell':_0x18fde0[_0x5716d7(0xf7)],'colorscheme':_0x18fde0['colorscheme'],'marketcapApi':_0x18fde0[_0x5716d7(0x1fc)],'marketcapEnabled':_0x18fde0['marketcapEnabled'],'sandbox':_0x18fde0[_0x5716d7(0x177)],'portfolio':_0x18fde0[_0x5716d7(0x277)],'autoliquidity':_0x18fde0[_0x5716d7(0x299)],'liquidity':_0x18fde0['liquidity'],'openOrders':_0x18fde0[_0x5716d7(0x2b2)]},dbConfig[_0x5716d7(0x11b)](_0x5716d7(0xe6))[_0x5716d7(0x14a)]()[_0x5716d7(0x1c1)](),dbConfig[_0x5716d7(0x11b)](_0x5716d7(0xe6))[_0x5716d7(0x171)](_0x18fde0)[_0x5716d7(0x1c1)]());}else _0x18fde0={'botID':_0x2a0c38,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':'Bot\x20'+_0x2a0c38,'showname':![],'threshold':0x3,'ordertype':_0x5716d7(0x18b),'timeout':0x14,'fiat':'USD','startdate':getDate(),'recreate':![],'timeshift':settings['timeshift'],'onepagemode':settings[_0x5716d7(0x1d5)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x5716d7(0x11f),'marketcapApi':settings['marketcapApi']?!![]:![],'marketcapEnabled':![],'sandbox':![],'portfolio':[],'autoliquidity':_0x5716d7(0x1a9),'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x18fde0;}function emittedConfiguration(){const _0x14ec6f=_0x5a5ecf;let _0x538881;if(config[_0x14ec6f(0x222)]=='')_0x538881={...config,'configstate':_0x14ec6f(0x232)};else config[_0x14ec6f(0x222)]==_0x14ec6f(0x155)?_0x538881={...config,'configstate':_0x14ec6f(0x23f)}:(_0x538881={...config,'apiKey':_0x14ec6f(0x216),'apiSecret':_0x14ec6f(0x216)},config[_0x14ec6f(0x296)]&&(_0x538881['apiPassword']=_0x14ec6f(0x216)));return _0x538881[_0x14ec6f(0x1da)]=enableFiatToggle,_0x538881;}function getSettings(){const _0x50f7e7=_0x5a5ecf;return dbSettings[_0x50f7e7(0x11b)](_0x50f7e7(0x1e1))[_0x50f7e7(0x1cd)]();}function getSecure(){const _0x1ec824=_0x5a5ecf;return dbSecure[_0x1ec824(0x11b)](_0x1ec824(0x14c))[_0x1ec824(0x1cd)]()||{};}function updateTimeshift(_0x80f8c5){const _0x1220b2=_0x5a5ecf;let _0x392dee=dbConfig[_0x1220b2(0x11b)](_0x1220b2(0xe6))[_0x1220b2(0x21f)]({'botID':botID})['value']();_0x392dee&&dbConfig[_0x1220b2(0x11b)]('bot')[_0x1220b2(0x21f)]({'botID':botID})['assign']({'timeshift':_0x80f8c5})[_0x1220b2(0x1c1)](),config[_0x1220b2(0x190)]=_0x80f8c5,proxyEmit(_0x1220b2(0x24a),emittedConfiguration());}function updateOnepagemode(_0x93e16d){const _0x1ad880=_0x5a5ecf;let _0x247be2=dbConfig['get'](_0x1ad880(0xe6))[_0x1ad880(0x21f)]({'botID':botID})[_0x1ad880(0x1cd)]();_0x247be2&&dbConfig['get'](_0x1ad880(0xe6))[_0x1ad880(0x21f)]({'botID':botID})[_0x1ad880(0x27b)]({'onepagemode':_0x93e16d})[_0x1ad880(0x1c1)](),config[_0x1ad880(0x1d5)]=_0x93e16d,proxyEmit(_0x1ad880(0x24a),emittedConfiguration());}function updateMarketcapApi(_0x3ad54b){const _0x210b66=_0x5a5ecf,_0x21f05a=_0x3ad54b?!![]:![];let _0x2211a9=dbConfig[_0x210b66(0x11b)]('bot')['find']({'botID':botID})['value']();_0x2211a9&&dbConfig['get'](_0x210b66(0xe6))['find']({'botID':botID})[_0x210b66(0x27b)]({'marketcapApi':_0x21f05a})[_0x210b66(0x1c1)](),config[_0x210b66(0x1fc)]=_0x21f05a,getMarketCap(),proxyEmit(_0x210b66(0x24a),emittedConfiguration());}async function storeConfiguration(_0x401669){const _0x2800c1=_0x5a5ecf;logger[_0x2800c1(0x1d9)](_0x2800c1(0x246));_0x401669[_0x2800c1(0x25f)]&&delete _0x401669[_0x2800c1(0x25f)];if(pidBalances)clearTimeout(pidBalances);setBlockTransactionDetection(!![]);let _0x4dcfbe=![],_0x14d879=![],_0x5a645b=[];_0x401669['portfolio']['forEach'](_0x49bfc4=>{const _0x49ec30=_0x2800c1;if(!_0x49bfc4['excluded']&&_0x49bfc4[_0x49ec30(0x170)]!=_0x401669[_0x49ec30(0x2aa)])_0x5a645b[_0x49ec30(0x171)](_0x49bfc4[_0x49ec30(0x29d)]);}),_0x5a645b[_0x2800c1(0x20d)](_0xadc338=>{const _0x68fa7e=_0x2800c1,_0x9d3292=currentCoins[_0x68fa7e(0x21f)](_0xa3f9d8=>_0xa3f9d8[_0x68fa7e(0x29d)]==_0xadc338);!_0x9d3292&&(_0x4dcfbe=!![]);}),currentCoins[_0x2800c1(0x20d)](_0x11330b=>{const _0x11be23=_0x2800c1;if(_0x11330b[_0x11be23(0x170)]!=config[_0x11be23(0x2aa)]){const _0x36dcb0=_0x5a645b[_0x11be23(0x21f)](_0x53bf43=>_0x53bf43==_0x11330b[_0x11be23(0x29d)]);!_0x36dcb0&&(_0x4dcfbe=!![]);}}),_0x401669[_0x2800c1(0x277)][_0x2800c1(0x20d)](_0x21a13b=>{const _0x3ce761=_0x2800c1,_0x344914=config[_0x3ce761(0x277)][_0x3ce761(0x21f)](_0x2b3fe4=>_0x2b3fe4[_0x3ce761(0x170)]==_0x21a13b['coin']);if(_0x344914&&_0x21a13b['offset']!=_0x344914['offset'])_0x14d879=!![];});let _0x407923=dbConfig[_0x2800c1(0x11b)](_0x2800c1(0xe6))[_0x2800c1(0x21f)]({'botID':botID})[_0x2800c1(0x1cd)]();_0x401669={..._0x401669,'apiKey':decryptRSA(secure[_0x2800c1(0x143)],_0x401669[_0x2800c1(0x222)]),'apiSecret':decryptRSA(secure[_0x2800c1(0x143)],_0x401669[_0x2800c1(0x1d7)])};_0x401669[_0x2800c1(0x296)]&&(_0x401669['apiPassword']=decryptRSA(secure[_0x2800c1(0x143)],_0x401669[_0x2800c1(0x296)]));let _0x550cc2=![];if(_0x407923){_0x401669[_0x2800c1(0x222)]==_0x2800c1(0x216)?_0x401669['apiKey']=config[_0x2800c1(0x222)]:_0x550cc2=!![];_0x401669['apiSecret']==_0x2800c1(0x216)?_0x401669['apiSecret']=config[_0x2800c1(0x1d7)]:_0x550cc2=!![];if(_0x401669[_0x2800c1(0x296)]==_0x2800c1(0x216))_0x401669[_0x2800c1(0x296)]=config[_0x2800c1(0x296)];else{if(_0x401669[_0x2800c1(0x296)])_0x550cc2=!![];}dbConfig['get']('bot')['find']({'botID':botID})[_0x2800c1(0x27b)](_0x401669)['write']();}else dbConfig['get'](_0x2800c1(0xe6))['push'](_0x401669)[_0x2800c1(0x1c1)](),_0x550cc2=!![],process[_0x2800c1(0x21a)]({'status':'enabled','live':_0x2800c1(0x217)},_0x33cc1d=>{});process[_0x2800c1(0x21a)]({'botname':_0x401669[_0x2800c1(0x138)]},_0x3a0a66=>{}),config={..._0x401669},updateBotManager(),proxyEmit(_0x2800c1(0x24d)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x550cc2)await reset(!![]);else _0x4dcfbe||_0x14d879?await reset(![]):getBalances();setBlockTransactionDetection(![]);}async function storeHeadless(_0xbc1c20){const _0x2ec59f=_0x5a5ecf,_0x40aa56={...config,'headless':_0xbc1c20[_0x2ec59f(0x147)]};let _0x36268b=dbConfig[_0x2ec59f(0x11b)](_0x2ec59f(0xe6))['find']({'botID':botID})[_0x2ec59f(0x1cd)]();_0x36268b&&dbConfig[_0x2ec59f(0x11b)](_0x2ec59f(0xe6))[_0x2ec59f(0x21f)]({'botID':botID})[_0x2ec59f(0x27b)](_0x40aa56)[_0x2ec59f(0x1c1)](),config={..._0x40aa56},updateBotManager(),proxyEmit(_0x2ec59f(0x24a),emittedConfiguration());}async function storeFiat(_0x56131f){const _0x2310e0=_0x5a5ecf,_0x2f9bf8={...config,'fiat':_0x56131f};let _0x48cdb3=dbConfig[_0x2310e0(0x11b)]('bot')[_0x2310e0(0x21f)]({'botID':botID})['value']();_0x48cdb3&&dbConfig[_0x2310e0(0x11b)](_0x2310e0(0xe6))[_0x2310e0(0x21f)]({'botID':botID})[_0x2310e0(0x27b)](_0x2f9bf8)[_0x2310e0(0x1c1)](),config={..._0x2f9bf8},proxyEmit(_0x2310e0(0x24a),emittedConfiguration());}function resetHistory(){const _0x4b9245=_0x5a5ecf;logger[_0x4b9245(0x10e)](_0x4b9245(0x18e));try{if(fs[_0x4b9245(0x27e)](path[_0x4b9245(0x243)](configpath,_0x4b9245(0x193)+botID+_0x4b9245(0x10a))))fs[_0x4b9245(0x1c2)](path[_0x4b9245(0x243)](configpath,'bot-'+botID+_0x4b9245(0x10a)));if(fs[_0x4b9245(0x27e)](path[_0x4b9245(0x243)](configpath,_0x4b9245(0x193)+botID+_0x4b9245(0x262))))fs[_0x4b9245(0x1c2)](path[_0x4b9245(0x243)](configpath,_0x4b9245(0x193)+botID+_0x4b9245(0x262)));if(fs[_0x4b9245(0x27e)](path[_0x4b9245(0x243)](configpath,_0x4b9245(0x193)+botID+_0x4b9245(0x239))))fs[_0x4b9245(0x1c2)](path[_0x4b9245(0x243)](configpath,_0x4b9245(0x193)+botID+'-results.json'));}catch(_0x34a4fe){if(_0x34a4fe)logger['full'](_0x4b9245(0x27a),_0x34a4fe);}const _0x136eb4=getDate();let _0x404c1b=[];currentCoins['forEach'](_0x5f302c=>{const _0x85d223=_0x4b9245;_0x404c1b['push']({'coin':_0x5f302c[_0x85d223(0x170)],'number':_0x5f302c['number'],'price':_0x5f302c['last']});});let _0x430439=dbConfig[_0x4b9245(0x11b)](_0x4b9245(0xe6))[_0x4b9245(0x21f)]({'botID':botID})[_0x4b9245(0x1cd)]();_0x430439&&(dbConfig[_0x4b9245(0x11b)](_0x4b9245(0xe6))[_0x4b9245(0x21f)]({'botID':botID})['assign']({'liquidity':[{'date':_0x136eb4,'changes':_0x404c1b}]})[_0x4b9245(0x1c1)](),config['liquidity']=[]),restartBot(!![]);}function noslash(_0x4ec568){const _0x53fd94=_0x5a5ecf;return _0x4ec568[_0x53fd94(0x122)]('/','');}function updateHighestFee(_0xe8f884){const _0x1ca60b=_0x5a5ecf;if(_0xe8f884[_0x1ca60b(0x1b7)]){let _0x6b88f={'filled':_0xe8f884[_0x1ca60b(0x118)]*_0xe8f884[_0x1ca60b(0x1a4)],'amount':_0xe8f884[_0x1ca60b(0x118)]*_0xe8f884[_0x1ca60b(0x1a4)],'side':_0xe8f884['side']==_0x1ca60b(0x2a5)?'buy':_0x1ca60b(0x2a5),'price':0x1/_0xe8f884[_0x1ca60b(0x1a4)]};_0xe8f884={..._0xe8f884,..._0x6b88f};}const _0x3cb5fa=defaultFee*_0xe8f884['filled']*_0xe8f884['price'];lastFees[_0x1ca60b(0x160)]['length']===0x14&&lastFees[_0x1ca60b(0x160)]['shift'](),lastFees[_0x1ca60b(0x160)]['push'](_0x3cb5fa),lastFees[_0x1ca60b(0x1e3)]=Math[_0x1ca60b(0x1b1)](...lastFees[_0x1ca60b(0x160)]);}async function updateNumberCoinsCcxt(_0x4bedd8){const _0x48e65f=_0x5a5ecf;logger[_0x48e65f(0x1d9)](_0x48e65f(0x124)+_0x4bedd8['symbol']+_0x48e65f(0x14d)+_0x4bedd8[_0x48e65f(0x1bd)]+_0x48e65f(0x14d)+_0x4bedd8['filled']+_0x48e65f(0x280)+_0x4bedd8[_0x48e65f(0x286)]+_0x48e65f(0x14d)+_0x4bedd8['id']);let _0x283b70=_0x4bedd8[_0x48e65f(0x1bd)],_0xa51bfe=![];currentCoins[_0x48e65f(0x20d)](_0x1816ce=>{const _0x5c1659=_0x48e65f;_0x1816ce['symbol']==_0x4bedd8[_0x5c1659(0x29d)]&&(_0xa51bfe=!![]);});if(!_0xa51bfe)return;const _0x1e3739=currentCoins['find'](_0x168ad3=>_0x168ad3[_0x48e65f(0x29d)]==_0x4bedd8[_0x48e65f(0x29d)]),_0x5313c5=_0x1e3739[_0x48e65f(0x170)],_0x3c2783=_0x4cfceb=>{const _0x3d926e=currentCoins['find'](_0x412ac0=>_0x412ac0['symbol']==_0x4bedd8['symbol']);if(_0x3d926e)_0x3d926e['orderstatus']=_0x4cfceb;};let _0x586348=![];for(const _0x262b35 of lastOrders){const _0x3efc2c=0x64,_0x3aa339=0x1388;let _0x587103=0x0;while(!_0x262b35['orderId']&&_0x587103*_0x3efc2c<_0x3aa339){_0x587103++,await sleep(_0x3efc2c);}if(_0x587103>0x0)logger[_0x48e65f(0x1d9)]('Waited\x20'+_0x587103*_0x3efc2c/0x3e8+_0x48e65f(0x10c));_0x262b35['orderId']==_0x4bedd8['id']&&(_0x586348=!![]);}if(_0x283b70==_0x48e65f(0x153)){_0x3c2783(_0x48e65f(0x153));if(_0x4bedd8[_0x48e65f(0x118)]>0x0&&_0x4bedd8['filled']<_0x4bedd8['amount']){if(_0x586348){setBlockTransactionDetection(!![]),logger['debug']('1\x20-\x20partially\x20FILLED\x20('+_0x4bedd8['filled']+_0x48e65f(0x2ad)+_0x4bedd8['id']);const _0x4e297a=await getCoins(balanceUpdateDelay,undefined,undefined,_0x5313c5);[currentCoins,currentCoinsAll]=_0x4e297a,setBlockTransactionDetection(![]);}else logger[_0x48e65f(0x1d9)](_0x48e65f(0x141)+_0x4bedd8['filled']+_0x48e65f(0x212)+_0x4bedd8['id']),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay);}}else{if(_0x283b70==_0x48e65f(0x109)){_0x3c2783(_0x48e65f(0x109)),lastOrders=lastOrders[_0x48e65f(0x1fe)](_0xfe027e=>_0xfe027e[_0x48e65f(0x29d)]!=_0x4bedd8[_0x48e65f(0x29d)]);const _0xaa728b=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0xaa728b,setBlockTransactionDetection(![]),await getOpenOrders(),handleOpenOrders();}else{if(_0x283b70==_0x48e65f(0x259)){if(lastOrders)for(const _0x38e9d1 of lastOrders){if(_0x38e9d1[_0x48e65f(0x18c)]==_0x4bedd8['id']){logger[_0x48e65f(0x1d9)]('1\x20-\x20FILLED\x20known\x20order:\x20'+_0x4bedd8['id']),_0x586348=!![];if(_0x38e9d1[_0x48e65f(0x118)]==0x0){setBlockTransactionDetection(!![]),logger['debug'](_0x48e65f(0x1e6)+_0x4bedd8['id']);if(_0x4bedd8[_0x48e65f(0x1e0)])_0x38e9d1[_0x48e65f(0x1a4)]=_0x4bedd8[_0x48e65f(0x1e0)];else{if(_0x4bedd8['price'])_0x38e9d1[_0x48e65f(0x1a4)]=_0x4bedd8[_0x48e65f(0x1a4)];else{}}_0x38e9d1[_0x48e65f(0x118)]=_0x4bedd8['filled'],updateHighestFee(_0x38e9d1);const _0x576112=await getCoins(balanceUpdateDelay,undefined,undefined,_0x5313c5);[currentCoins,currentCoinsAll]=_0x576112,setBlockTransactionDetection(![]),await validateOrders(),_0x3c2783(_0x48e65f(0x118)),_0x38e9d1['fee']={'currency':_0x4bedd8['fee']?_0x4bedd8['fee'][_0x48e65f(0x25e)]:null,'cost':_0x4bedd8['fee']?_0x4bedd8[_0x48e65f(0x16c)][_0x48e65f(0x250)]:0x0},await updatePnL(_0x38e9d1);}}}!_0x586348&&(logger[_0x48e65f(0x1d9)](_0x48e65f(0x19e)+_0x4bedd8['id']),_0x3c2783(_0x48e65f(0x118)),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay),await updateOpenOrders(),handleOpenOrders());}}}if(lastBalances){let _0x5c3351=JSON[_0x48e65f(0x1a1)](lastBalances['portfolio']);const _0x472220=_0x5c3351['find'](_0x118156=>_0x118156[_0x48e65f(0x29d)]==_0x4bedd8[_0x48e65f(0x29d)]);if(_0x472220){if(_0x283b70==_0x48e65f(0x153))_0x472220[_0x48e65f(0x1d1)]=_0x472220[_0x48e65f(0x1d1)]=='filled'?_0x48e65f(0x118):_0x48e65f(0x153);else{if(_0x283b70==_0x48e65f(0x109))_0x472220['orderstatus']=_0x472220[_0x48e65f(0x1d1)]==_0x48e65f(0x118)?'filled':_0x48e65f(0x109);else _0x283b70==_0x48e65f(0x259)&&(_0x472220[_0x48e65f(0x1d1)]=_0x48e65f(0x118));}}lastBalances={...lastBalances,'portfolio':JSON[_0x48e65f(0xfe)](_0x5c3351)},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){await getOpenOrders();let _0x62052c=![];currentCoins['forEach'](_0x5521dc=>{const _0x571291=_0x52be;_0x62052c=allOpenOrders[_0x571291(0x21f)](_0x5ceffb=>_0x5ceffb[_0x571291(0x29d)]==_0x5521dc['symbol']),_0x5521dc[_0x571291(0x1d1)]=_0x62052c?_0x571291(0x153):_0x571291(0x244);});}async function fetchBalance(_0x48e8ba=!![]){const _0x32e097=_0x5a5ecf;let _0x94120a,_0x3468ec,_0x483310,_0x5c4fc6=0x0;while(!_0x3468ec&&_0x5c4fc6<maxRetries){try{return _0x94120a=await exchange[_0x32e097(0x264)](),_0x3468ec=_0x94120a[_0x32e097(0x214)],_0x3468ec;}catch(_0x4df998){_0x483310=_0x4df998,_0x5c4fc6++,await sleep(retryInterval);}}return!_0x48e8ba?handleErrorNoStop(_0x483310,_0x32e097(0x123)):await handleError(_0x483310,'fetchBalance()'),![];}async function getCoins(_0x1c183f=0x0,_0x4dd82a=!![],_0x3fa238=config[_0x5a5ecf(0x2aa)],_0x1d85ba){const _0x24e13d=_0x5a5ecf;let _0x1948ac=[],_0x14b506=[],_0x1ad1a5=[],_0x484c96;if(_0x1c183f)await sleep(_0x1c183f);if(botPaused)return[currentCoins,currentCoinsAll];let _0x408bc2=![],_0xaf9ca5=0x0,_0x2bacfe,_0x2919ff;_0x1d85ba&&(_0x2bacfe=currentCoins['find'](_0x5ac382=>_0x5ac382[_0x24e13d(0x170)]==_0x1d85ba),_0x2bacfe&&(_0x2919ff=_0x2bacfe[_0x24e13d(0x247)],delete _0x2bacfe[_0x24e13d(0x247)]));while(!_0x408bc2){_0x484c96=await fetchBalance(_0x4dd82a);if(_0x484c96){if(_0x1d85ba){if(_0x484c96[_0x1d85ba]!=_0x2919ff)logger[_0x24e13d(0x1d9)]('Valid\x20balance\x20for\x20'+_0x1d85ba+':\x20'+_0x484c96[_0x1d85ba]+'\x20('+_0x2919ff+')'),_0x408bc2=!![];else{logger[_0x24e13d(0x1d9)]('Invalid\x20balance\x20for\x20'+_0x1d85ba+':\x20'+_0x484c96[_0x1d85ba]+'\x20('+_0x2919ff+')'),_0xaf9ca5++;if(_0xaf9ca5<balanceUpdateRetries)await sleep(balanceUpdateDelay);else{logger['debug'](_0x24e13d(0x25a)+_0xaf9ca5+_0x24e13d(0x228));break;}}}else break;}else return[currentCoins,currentCoinsAll];}for(const [_0x335c5f,_0x238d55]of Object['entries'](_0x484c96)){_0x1ad1a5[_0x24e13d(0x171)](_0x335c5f);}config[_0x24e13d(0x277)][_0x24e13d(0x20d)](_0x4e6360=>{const _0x46fa4f=_0x24e13d;!_0x1ad1a5['includes'](_0x4e6360['coin'])&&(_0x484c96[_0x4e6360[_0x46fa4f(0x170)]]=0x0);});if(_0x3fa238=='')for(const [_0x463d12,_0x5268d5]of Object[_0x24e13d(0x231)](_0x484c96)){_0x5268d5!=0x0&&_0x1948ac[_0x24e13d(0x171)]({'coin':_0x463d12});}else for(const [_0x3095bf,_0x30c641]of Object['entries'](_0x484c96)){const _0xa54404=config['portfolio'][_0x24e13d(0x21f)](_0x5efe2a=>_0x5efe2a[_0x24e13d(0x170)]==_0x3095bf),_0x307d7d=_0x3095bf+'/'+_0x3fa238,_0x1497ba=_0x3fa238+'/'+_0x3095bf,_0x115e4a=currentCoins[_0x24e13d(0x21f)](_0x38aacb=>_0x38aacb[_0x24e13d(0x170)]==_0x3095bf);if((_0x30c641!=0x0||_0xa54404)&&(allSymbols['includes'](_0x307d7d)||_0x3095bf==_0x3fa238))_0x115e4a?_0x1948ac['push']({..._0x115e4a,'number':Math[_0x24e13d(0x1b1)](_0x30c641+(_0xa54404&&_0xa54404[_0x24e13d(0xf5)]||0x0),0x0)}):_0x1948ac[_0x24e13d(0x171)]({'coin':_0x3095bf,'symbol':_0x307d7d,'reverse':![],'number':Math[_0x24e13d(0x1b1)](_0x30c641+(_0xa54404&&_0xa54404['offset']||0x0),0x0),'orderstatus':'none'});else{if((_0x30c641!=0x0||_0xa54404)&&allSymbols[_0x24e13d(0x22f)](_0x1497ba))_0x115e4a?_0x1948ac[_0x24e13d(0x171)]({..._0x115e4a,'number':Math[_0x24e13d(0x1b1)](_0x30c641+(_0xa54404&&_0xa54404[_0x24e13d(0xf5)]||0x0),0x0)}):_0x1948ac[_0x24e13d(0x171)]({'coin':_0x3095bf,'symbol':_0x1497ba,'reverse':!![],'number':Math[_0x24e13d(0x1b1)](_0x30c641+(_0xa54404&&_0xa54404[_0x24e13d(0xf5)]||0x0),0x0),'orderstatus':_0x24e13d(0x244)});else _0xa54404&&_0x1948ac['push']({'coin':_0xa54404[_0x24e13d(0x170)],'symbol':_0xa54404['symbol'],'reverse':_0xa54404[_0x24e13d(0x1b7)],'number':0x0,'orderstatus':_0x24e13d(0x244)});}}return _0x1948ac[_0x24e13d(0x107)]((_0x322393,_0x31a6a7)=>_0x322393[_0x24e13d(0x290)]<_0x31a6a7[_0x24e13d(0x290)]?0x1:_0x31a6a7[_0x24e13d(0x290)]<_0x322393[_0x24e13d(0x290)]?-0x1:0x0),_0x14b506=cloneDeep(_0x1948ac),_0x1948ac=_0x1948ac[_0x24e13d(0x1fe)](_0x1a2e4f=>{const _0x322010=_0x24e13d,_0x233dd4=config[_0x322010(0x277)][_0x322010(0x21f)](_0x1c6fcf=>_0x1c6fcf[_0x322010(0x170)]==_0x1a2e4f[_0x322010(0x170)]);return _0x233dd4&&!_0x233dd4[_0x322010(0x117)];}),[_0x1948ac,_0x14b506];}async function getOpenOrders(){const _0x3fb0d0=_0x5a5ecf;let _0x2a3174;allOpenOrders=[];try{for(const _0x4ff1b2 of config[_0x3fb0d0(0x277)]){!_0x4ff1b2['excluded']&&_0x4ff1b2[_0x3fb0d0(0x170)]!=config[_0x3fb0d0(0x2aa)]&&(_0x2a3174=await exchange[_0x3fb0d0(0x1dc)](_0x4ff1b2[_0x3fb0d0(0x29d)]),_0x2a3174[_0x3fb0d0(0x1ec)]>0x0&&allOpenOrders['push'](_0x2a3174[0x0]));}}catch(_0xec513a){await handleError(_0xec513a,_0x3fb0d0(0x132));}}async function handleOpenOrders(_0x48aedd=0x0){const _0x224222=_0x5a5ecf;allOpenOrders[_0x224222(0x1ec)]==0x0&&lockOrders==ORDERS['LOCKED']&&allOrdersPlaced&&(_0x48aedd==0x0?(logger['debug'](_0x224222(0x257)),_0x48aedd++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger['debug'](_0x224222(0x2a0)),validateOrders(_0x224222(0x15b))));}async function testAPI(){const _0x1f4773=_0x5a5ecf;try{return await exchange[_0x1f4773(0x264)](),!![];}catch(_0x170b17){loading[_0x1f4773(0x237)]=!![],_0x170b17[_0x1f4773(0x22b)]()[_0x1f4773(0x252)]()[_0x1f4773(0x22f)]('timestamp')||_0x170b17[_0x1f4773(0x22b)]()[_0x1f4773(0x252)]()['includes']('request-time')?(logHistory(_0x1f4773(0x16d),'Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)'),loading[_0x1f4773(0x16d)]=_0x1f4773(0x103)):handleErrorNoStop(_0x170b17,_0x1f4773(0x1af),!![]),logHistory(_0x1f4773(0x16d),_0x1f4773(0x152)),logHistory(_0x1f4773(0x16d),'Pausing\x20for\x20'+loadCoinsRetryInterval/0xea60+_0x1f4773(0x1e9)),logger[_0x1f4773(0x1d9)]('Error\x20details:',_0x170b17),emitLoadingProgress(),botPaused=!![],await sleep(loadCoinsRetryInterval),restartBot();}}async function testNewAPI(_0x548530){const _0x5b0e3c=_0x5a5ecf;logger[_0x5b0e3c(0x1d9)](_0x5b0e3c(0x22e));const _0x257212=ccxt['pro'][_0x548530[_0x5b0e3c(0x1cb)]['toLowerCase']()],_0x429208=new _0x257212({'apiKey':_0x548530['apiKey'],'secret':_0x548530[_0x5b0e3c(0x1d7)],'options':{'defaultType':_0x5b0e3c(0x215)}});if(_0x548530[_0x5b0e3c(0x296)])_0x429208[_0x5b0e3c(0x28e)]=_0x548530[_0x5b0e3c(0x296)];if(_0x429208['has'][_0x5b0e3c(0x177)])_0x429208[_0x5b0e3c(0x16f)](_0x548530[_0x5b0e3c(0x177)]);try{await _0x429208[_0x5b0e3c(0x264)](),botPaused=![];}catch(_0x601dd){logger['debug']('Error\x20in\x20testNewAPI():\x20'+_0x601dd['toString']());throw _0x601dd;}}function cloneDeep(_0x2b247f){const _0x3fbb26=_0x5a5ecf;return JSON[_0x3fbb26(0x1a1)](JSON[_0x3fbb26(0xfe)](_0x2b247f));}async function getPortfolio(_0x2bcf08){const _0x20b83c=_0x5a5ecf;let _0x149140=[],_0x200420=[],_0xf8de3d=[],_0x325a33;_0x2bcf08[_0x20b83c(0x222)]=decryptRSA(secure['privateKey'],_0x2bcf08[_0x20b83c(0x222)]),_0x2bcf08[_0x20b83c(0x1d7)]=decryptRSA(secure[_0x20b83c(0x143)],_0x2bcf08['apiSecret']);if(_0x2bcf08[_0x20b83c(0x296)])_0x2bcf08[_0x20b83c(0x296)]=decryptRSA(secure[_0x20b83c(0x143)],_0x2bcf08[_0x20b83c(0x296)]);if(_0x2bcf08[_0x20b83c(0x222)]!==_0x20b83c(0x216)||_0x2bcf08['apiSecret']!==_0x20b83c(0x216)||_0x2bcf08[_0x20b83c(0x296)]&&_0x2bcf08[_0x20b83c(0x296)]!==_0x20b83c(0x216)){if(config[_0x20b83c(0x1cb)]){if(_0x2bcf08[_0x20b83c(0x222)]==_0x20b83c(0x216))_0x2bcf08['apiKey']=config[_0x20b83c(0x222)];if(_0x2bcf08[_0x20b83c(0x1d7)]==_0x20b83c(0x216))_0x2bcf08[_0x20b83c(0x1d7)]=config['apiSecret'];if(_0x2bcf08['apiPassword']=='************')_0x2bcf08[_0x20b83c(0x296)]=config['apiPassword'];}try{if(_0x2bcf08[_0x20b83c(0x14f)])await testNewAPI(_0x2bcf08);}catch(_0x50f182){if(_0x50f182[_0x20b83c(0x22b)]()['includes'](_0x20b83c(0x176))){logHistory(_0x20b83c(0x16d),_0x20b83c(0x22c)),logHistory(_0x20b83c(0x16d),'Error\x20details:\x20'+_0x50f182[_0x20b83c(0x22b)]()),proxyEmit(_0x20b83c(0x1fb),![]);return;}else{if(_0x50f182['toString']()[_0x20b83c(0x22f)](_0x20b83c(0x185))){logHistory('error',_0x20b83c(0x265)),logHistory(_0x20b83c(0x16d),_0x20b83c(0x1f8)+_0x50f182[_0x20b83c(0x22b)]()),proxyEmit(_0x20b83c(0x1fb),![]);return;}else{logHistory('error','Error\x20occurred:\x20'+_0x50f182[_0x20b83c(0x22b)]()),logger[_0x20b83c(0x1d9)]('Error\x20details:',_0x50f182),proxyEmit(_0x20b83c(0x1fb),![]);return;}}}exchange?updateExchange(_0x2bcf08[_0x20b83c(0x222)],_0x2bcf08[_0x20b83c(0x1d7)],_0x2bcf08[_0x20b83c(0x296)]):await initExchange(_0x2bcf08[_0x20b83c(0x1cb)],_0x2bcf08[_0x20b83c(0x222)],_0x2bcf08['apiSecret'],_0x2bcf08[_0x20b83c(0x296)],_0x2bcf08[_0x20b83c(0x177)]);await loadSymbols();const _0x17050a=await getCoins(0x0,![],_0x2bcf08[_0x20b83c(0x2aa)]);_0xf8de3d=cloneDeep(_0x17050a[0x1]);}else{const _0x3f563d=await getCoins();_0xf8de3d=cloneDeep(_0x3f563d[0x1]);}if(_0x2bcf08[_0x20b83c(0x2aa)]=='')proxyEmit(_0x20b83c(0x1fb),!![]),proxyEmit(_0x20b83c(0xf8),_0xf8de3d);else{_0xf8de3d[_0x20b83c(0x20d)](_0xf11ecb=>{const _0x582aa1=_0x20b83c;if(_0xf11ecb['coin']!=_0x2bcf08['basecoin']&&allSymbols[_0x582aa1(0x22f)](_0xf11ecb[_0x582aa1(0x29d)]))_0x149140[_0x582aa1(0x171)](_0xf11ecb[_0x582aa1(0x29d)]);});if(_0x149140['length']==0x0)logHistory('error',_0x20b83c(0x1f2));else{try{_0x200420=await getTickers(_0x149140);}catch(_0x342e52){logHistory(_0x20b83c(0x16d),_0x20b83c(0x1ac)),logger['debug'](_0x20b83c(0x1aa),_0x342e52),proxyEmit(_0x20b83c(0x1fb),![]);return;}_0xf8de3d['forEach'](_0x1bbcc2=>{const _0x26666a=_0x20b83c;_0x1bbcc2[_0x26666a(0x170)]!=_0x2bcf08[_0x26666a(0x2aa)]?_0x200420[_0x1bbcc2['symbol']]?_0x200420[_0x1bbcc2['symbol']][_0x26666a(0x1b6)]?_0x325a33=_0x1bbcc2[_0x26666a(0x1b7)]?0x1/_0x200420[_0x1bbcc2[_0x26666a(0x29d)]][_0x26666a(0x1b6)]:_0x200420[_0x1bbcc2[_0x26666a(0x29d)]][_0x26666a(0x1b6)]:_0x325a33=0x0:_0x325a33=0x0:_0x325a33=0x1,_0x1bbcc2['price']=formatResult(_0x325a33,0x8);}),await getMarketCap(_0xf8de3d),proxyEmit(_0x20b83c(0x1fb),!![]),proxyEmit('portfolio2',_0xf8de3d);}}}function _0x52be(_0x52ad98,_0x485c0b){const _0x1193ae=_0x2be4();return _0x52be=function(_0x4ddaed,_0x6e568c){_0x4ddaed=_0x4ddaed-0xd9;let _0x2be43a=_0x1193ae[_0x4ddaed];return _0x2be43a;},_0x52be(_0x52ad98,_0x485c0b);}function truncateTradeAmount(_0x4688d7,_0x2a88d5){let _0x57eaf4=0x0;try{_0x57eaf4=exchange['amountToPrecision'](_0x4688d7,_0x2a88d5);}catch(_0x45a1a4){}return _0x57eaf4;}function checkMinimums(_0x58603f){const _0x125b86=_0x5a5ecf;let _0x1a856d=!![];const _0x31b8a9=!_0x58603f[_0x125b86(0x1b7)]?markets[_0x58603f[_0x125b86(0x29d)]][_0x125b86(0x144)][_0x125b86(0x286)]['min']:markets[_0x58603f[_0x125b86(0x29d)]]['limits'][_0x125b86(0x250)]['min'],_0x402606=!_0x58603f['reverse']?markets[_0x58603f['symbol']][_0x125b86(0x144)]['cost'][_0x125b86(0x165)]:markets[_0x58603f[_0x125b86(0x29d)]][_0x125b86(0x144)][_0x125b86(0x286)][_0x125b86(0x165)],_0x2bec03=truncateTradeAmount(_0x58603f[_0x125b86(0x29d)],_0x58603f[_0x125b86(0x29b)]);_0x58603f[_0x125b86(0x29b)]=_0x2bec03;if(Math['abs'](_0x2bec03)<_0x31b8a9)_0x1a856d=![];if(Math['abs'](_0x2bec03)*_0x58603f[_0x125b86(0x1b6)]<_0x402606)_0x1a856d=![];let _0x5ab56b='';if(_0x58603f['side']==_0x125b86(0x2a5)){let _0x1f803a=config[_0x125b86(0x277)][_0x125b86(0x21f)](_0x375717=>_0x375717[_0x125b86(0x170)]==_0x58603f[_0x125b86(0x170)]);_0x1f803a['offset']>0x0?Math['abs'](_0x2bec03)>_0x58603f[_0x125b86(0x24c)]-_0x1f803a['offset']&&(_0x1a856d=![],_0x5ab56b=_0x125b86(0xfc)+_0x1f803a[_0x125b86(0x170)]+'\x20due\x20to\x20offset'):Math[_0x125b86(0x233)](_0x2bec03)>_0x58603f[_0x125b86(0x24c)]&&(_0x1a856d=![]);}if(_0x58603f[_0x125b86(0x248)]==_0x125b86(0x1f1)){let _0x382ef1=config[_0x125b86(0x277)]['find'](_0x1c477b=>_0x1c477b['coin']==config[_0x125b86(0x2aa)]),_0x360fff=currentCoins[_0x125b86(0x21f)](_0x43f8bc=>_0x43f8bc[_0x125b86(0x170)]==config['basecoin']);_0x382ef1['offset']>0x0?Math[_0x125b86(0x233)](_0x2bec03)*_0x58603f['last']>_0x360fff[_0x125b86(0x24c)]-_0x382ef1[_0x125b86(0xf5)]&&(_0x1a856d=![],_0x5ab56b=_0x125b86(0xfc)+config[_0x125b86(0x2aa)]+_0x125b86(0x1be)):Math[_0x125b86(0x233)](_0x2bec03)*_0x58603f[_0x125b86(0x1b6)]>_0x360fff[_0x125b86(0x24c)]&&(_0x1a856d=![]);}return!_0x1a856d&&_0x5ab56b&&!insufficientFundsWarningSent[_0x125b86(0x22f)](_0x58603f['coin'])&&(logHistory(_0x125b86(0x223),_0x5ab56b),insufficientFundsWarningSent[_0x125b86(0x171)](_0x58603f[_0x125b86(0x170)])),_0x1a856d;}async function getBalances(_0x3fe318=!![]){const _0x570a9d=_0x5a5ecf;if(botPaused)return;let _0x31459c=0x0,_0x42e49a;const _0x1c4753=config['threshold'];if(config[_0x570a9d(0x147)]&&config[_0x570a9d(0x163)]<0x0)await validate24hChanges();currentCoins[_0x570a9d(0x20d)](_0xad258f=>{const _0x3a68a2=_0x570a9d;if(_0xad258f[_0x3a68a2(0x170)]!=config[_0x3a68a2(0x2aa)]){let _0x5ed899=gTicker[noslash(_0xad258f[_0x3a68a2(0x29d)])];_0x42e49a=_0xad258f[_0x3a68a2(0x1b7)]?0x1/_0x5ed899:_0x5ed899;}else _0x42e49a=0x1;let _0x50f9fe=_0xad258f['number']*_0x42e49a;_0x31459c+=_0x50f9fe,_0xad258f['last']=formatResult(Number(_0x42e49a),0x8),_0xad258f[_0x3a68a2(0x1cd)]=_0x50f9fe;}),currentCoins[_0x570a9d(0x20d)](_0x46c085=>{const _0x5de98d=_0x570a9d;let _0x4fb72d=config['portfolio'][_0x5de98d(0x21f)](_0x574afc=>_0x574afc[_0x5de98d(0x170)]==_0x46c085['coin']),_0xf9d79c=Number(_0x4fb72d[_0x5de98d(0x245)]),_0x5b3e19=_0x46c085[_0x5de98d(0x1cd)]/_0x31459c*0x64,_0x34247a=_0xf9d79c*_0x31459c/0x64/_0x46c085[_0x5de98d(0x1b6)]-_0x46c085[_0x5de98d(0x24c)];_0x46c085[_0x5de98d(0x245)]=formatResult(_0x5b3e19,0x3),_0x46c085[_0x5de98d(0x1eb)]=formatResult(_0xf9d79c,0x3),_0x46c085[_0x5de98d(0x29b)]=formatResult(_0x34247a,0x8),_0x46c085[_0x5de98d(0x248)]='',_0x46c085[_0x5de98d(0x1d2)]=![];if(_0x46c085[_0x5de98d(0x170)]!=config['basecoin']){if(_0x46c085[_0x5de98d(0x245)]>_0xf9d79c)_0x46c085['side']=_0x5de98d(0x2a5),_0x46c085[_0x5de98d(0x1d2)]=checkMinimums(_0x46c085);else _0x46c085[_0x5de98d(0x245)]<_0xf9d79c&&(_0x46c085['side']=_0x5de98d(0x1f1),_0x46c085['valid']=checkMinimums(_0x46c085));}_0x46c085[_0x5de98d(0x290)]=_0x46c085[_0x5de98d(0x245)]/_0x46c085[_0x5de98d(0x1eb)]-0x1;if(_0x46c085[_0x5de98d(0x1d1)]==_0x5de98d(0x118)||_0x46c085['orderstatus']==_0x5de98d(0x109))_0x46c085[_0x5de98d(0x1d1)]=_0x5de98d(0x244);}),currentCoins['sort']((_0x52e079,_0x36c231)=>_0x52e079[_0x570a9d(0x290)]<_0x36c231[_0x570a9d(0x290)]?0x1:_0x36c231[_0x570a9d(0x290)]<_0x52e079[_0x570a9d(0x290)]?-0x1:0x0);const _0x13b622=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x13b622[_0x570a9d(0x1d4)],'usd':_0x13b622[_0x570a9d(0x140)],'portfolio':JSON['stringify'](currentCoins),'threshold':_0x1c4753},proxyEmit(_0x570a9d(0x2b0),{'serverversion':serverversion,'balances':lastBalances});if(_0x3fe318){if(config[_0x570a9d(0x147)])headlessMode({'portfolio':currentCoins,'threshold':_0x1c4753});else lockOrders==ORDERS[_0x570a9d(0x1b3)]&&!coolingDown&&notifyBalance({'portfolio':currentCoins,'threshold':_0x1c4753});}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x3490c5=getNormalizedPerformance();getStartingBalances(_0x3490c5),emitPerformance(_0x3490c5);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}function getPnL(){const _0x4cd47e=_0x5a5ecf;let _0x4c8bed=dbCoinResults[_0x4cd47e(0x11b)](_0x4cd47e(0xef))[_0x4cd47e(0x1cd)](),_0x3e85b0=0x0;return Object[_0x4cd47e(0x231)](_0x4c8bed)[_0x4cd47e(0x20d)](([_0xf98f1a,_0x5dc45d])=>{const _0x5a7905=_0x4cd47e;_0x3e85b0+=_0x5dc45d[_0x5a7905(0x28b)];}),_0x3e85b0;}async function storePerformance(){const _0x23392b=_0x5a5ecf;if(!lastBalances)return;let _0x13e77e=[],_0x1b657d;const _0x20882f=getPnL();let _0x147114=JSON[_0x23392b(0x1a1)](lastBalances[_0x23392b(0x277)]);_0x147114[_0x23392b(0x107)]((_0x53bfec,_0x153905)=>_0x53bfec[_0x23392b(0x170)]>_0x153905[_0x23392b(0x170)]?0x1:_0x153905[_0x23392b(0x170)]>_0x53bfec[_0x23392b(0x170)]?-0x1:0x0),_0x147114['forEach'](_0x2792ce=>{const _0xa726e3=_0x23392b;let _0xbdf199={'coin':_0x2792ce[_0xa726e3(0x170)],'number':_0x2792ce[_0xa726e3(0x24c)],'price':_0x2792ce[_0xa726e3(0x1b6)]};_0x13e77e['push'](_0xbdf199);});const _0x96979d=await getFiat(),_0x1bfbc5=getTimeStamp()[_0x23392b(0x102)]('\x20')[0x0],_0x5e3f81=dbPerformance[_0x23392b(0x11b)](_0x23392b(0x164))[_0x23392b(0x21f)]({'date':_0x1bfbc5})[_0x23392b(0x1cd)]();_0x1b657d={'date':_0x1bfbc5,'eur':_0x96979d[_0x23392b(0x1d4)],'usd':_0x96979d[_0x23392b(0x140)],'coins':_0x13e77e,'pnl':_0x20882f},_0x5e3f81?_0x1b657d[_0x23392b(0x26f)]!=config[_0x23392b(0x251)]&&dbPerformance[_0x23392b(0x11b)](_0x23392b(0x164))[_0x23392b(0x21f)]({'date':_0x1bfbc5})[_0x23392b(0x27b)](_0x1b657d)[_0x23392b(0x1c1)]():dbPerformance[_0x23392b(0x11b)](_0x23392b(0x164))['push'](_0x1b657d)[_0x23392b(0x1c1)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x4d9903=_0x5a5ecf;let _0x3a8560=[];if(dbPerformance[_0x4d9903(0x182)](_0x4d9903(0x164))[_0x4d9903(0x1cd)]()){let _0x1d4803=dbPerformance[_0x4d9903(0x11b)]('data')[_0x4d9903(0x23d)]()[_0x4d9903(0x1fe)](_0x5b1e77=>{const _0x205943=_0x4d9903;if(_0x5b1e77[_0x205943(0xef)][_0x205943(0x1ec)]==0x0)return![];else return!![];})[_0x4d9903(0x101)](_0x4d9903(0x26f))[_0x4d9903(0x1cd)](),_0x1e62a0=[...config[_0x4d9903(0x278)]];_0x1e62a0[_0x4d9903(0x107)]((_0x3b630b,_0x39c6bc)=>_0x3b630b['date']>_0x39c6bc['date']?-0x1:_0x39c6bc[_0x4d9903(0x26f)]>_0x3b630b['date']?0x1:0x0);let _0x224e40=0x1,_0x23f5b5=[],_0x513876=0x0;_0x1d4803[_0x4d9903(0x23c)]()[_0x4d9903(0x1b7)]()[_0x4d9903(0x20d)]((_0x45d4a6,_0x39604f)=>{const _0x479350=_0x4d9903;if(_0x1e62a0[_0x513876]){if(_0x1d4803[_0x1d4803['length']-_0x39604f]&&_0x1e62a0[_0x513876]['date']==_0x1d4803[_0x1d4803['length']-_0x39604f][_0x479350(0x26f)]){if(_0x39604f<_0x1d4803['length']){let _0x54e62f=0x0,_0x45b58a=0x0;_0x1d4803[_0x1d4803[_0x479350(0x1ec)]-_0x39604f][_0x479350(0xef)][_0x479350(0x20d)](_0x4a7246=>{const _0xd2566e=_0x479350;_0x45b58a+=_0x4a7246['number']*_0x4a7246[_0xd2566e(0x1a4)];}),_0x1e62a0[_0x513876][_0x479350(0x1f5)]['forEach'](_0x514ac7=>{const _0x37bdf8=_0x479350;_0x54e62f+=_0x514ac7[_0x37bdf8(0x24c)]*_0x514ac7[_0x37bdf8(0x1a4)];}),_0x224e40*=_0x54e62f/(_0x45b58a-_0x54e62f)+0x1;}_0x513876++;}}let _0x4dc012=0x0;_0x45d4a6[_0x479350(0xef)]['forEach'](_0xa042a5=>{const _0x2f52be=_0x479350;_0x4dc012+=_0xa042a5['number']*_0xa042a5[_0x2f52be(0x1a4)];}),_0x23f5b5[_0x1d4803[_0x479350(0x1ec)]-_0x39604f-0x1]=_0x4dc012*(_0x224e40-0x1);});let _0x3ff32e=[];_0x1e62a0=[...config[_0x4d9903(0x278)]]||[];let _0x3fdbdc=0x0;_0x513876=0x0,_0x1d4803[_0x4d9903(0x20d)]((_0x3048bf,_0x56d2ee)=>{const _0x4c4048=_0x4d9903;if(_0x1e62a0[_0x513876]){const _0x1b3d5c=fns['parse'](_0x1e62a0[_0x513876]['date'],_0x4c4048(0x224),new Date()),_0xd5c7a0=fns[_0x4c4048(0x1a1)](_0x3048bf[_0x4c4048(0x26f)],_0x4c4048(0x224),new Date());if(fns[_0x4c4048(0x113)](_0x1b3d5c,_0xd5c7a0)){let _0x4c64eb=0x0;_0x1e62a0[_0x513876][_0x4c4048(0x1f5)][_0x4c4048(0x20d)](_0x5600a7=>{const _0x50338f=_0x4c4048;!_0x3ff32e[_0x5600a7['coin']]?_0x3ff32e[_0x5600a7[_0x50338f(0x170)]]=_0x5600a7[_0x50338f(0x24c)]:(_0x4c64eb=_0x3ff32e[_0x5600a7[_0x50338f(0x170)]],_0x3ff32e[_0x5600a7[_0x50338f(0x170)]]+=_0x5600a7[_0x50338f(0x24c)]);const _0x1018c7=_0x3048bf['coins'][_0x50338f(0x21f)](_0x3b84a4=>_0x3b84a4[_0x50338f(0x170)]==_0x5600a7['coin']);(!_0x1018c7||_0x1018c7[_0x50338f(0x24c)]==0x0)&&(_0x3fdbdc+=(-_0x5600a7[_0x50338f(0x24c)]-_0x4c64eb)*_0x5600a7[_0x50338f(0x1a4)]);}),_0x513876++;}}_0x3048bf[_0x4c4048(0xef)][_0x4c4048(0x20d)]((_0x5a0711,_0x32c7fa)=>{const _0x1ac1ad=_0x4c4048;_0x3ff32e[_0x5a0711[_0x1ac1ad(0x170)]]&&(_0x5a0711[_0x1ac1ad(0x232)]=_0x3ff32e[_0x5a0711[_0x1ac1ad(0x170)]]);}),_0x3a8560['push']({'date':_0x3048bf[_0x4c4048(0x26f)],'eur':_0x3048bf[_0x4c4048(0x1d4)],'usd':_0x3048bf[_0x4c4048(0x140)],'offset':_0x23f5b5[_0x56d2ee],'netoffset':_0x3fdbdc,'coins':_0x3048bf[_0x4c4048(0xef)],'pnl':_0x3048bf[_0x4c4048(0x205)]});});}return _0x3a8560;}function emitPerformance(_0x5a14b5){const _0x4be6d4=_0x5a5ecf;_0x5a14b5[_0x4be6d4(0x1ec)]!==0x0?(proxyEmit(_0x4be6d4(0x260),_0x5a14b5),lastPerformanceEmitted=getDate()):proxyEmit(_0x4be6d4(0x260),[]);}function getPerf(_0x263362,_0x473729){const _0x1fc47b=_0x5a5ecf;let _0x5518e8=0x0,_0x15aed2=0x0,_0x5647a9=0x0;_0x263362[_0x1fc47b(0xef)][_0x1fc47b(0x20d)](_0xe1932=>{const _0x35067a=_0x1fc47b;_0x5518e8+=_0xe1932['number']*_0xe1932[_0x35067a(0x1a4)];});_0x473729&&(_0x5518e8+=_0x263362['offset']);if(config[_0x1fc47b(0x2aa)]==='BTC'||config[_0x1fc47b(0x2aa)]===_0x1fc47b(0x149)||config[_0x1fc47b(0x2aa)]===_0x1fc47b(0x25d))_0x15aed2=_0x5518e8*_0x263362[_0x1fc47b(0x1d4)],_0x5647a9=_0x5518e8*_0x263362[_0x1fc47b(0x140)];else{if(usdBasecoins[_0x1fc47b(0x22f)](config[_0x1fc47b(0x2aa)]))_0x15aed2=_0x5518e8*_0x263362[_0x1fc47b(0x1d4)]/_0x263362[_0x1fc47b(0x140)],_0x5647a9=_0x5518e8;else config[_0x1fc47b(0x2aa)]==='EUR'&&(_0x15aed2=_0x5518e8,_0x5647a9=_0x5518e8*_0x263362[_0x1fc47b(0x140)]/_0x263362['eur']);}return[_0x5518e8,_0x15aed2,_0x5647a9];}function CurrencyFactor(_0x6fd33,_0x52a8a6,_0x25b0ec){const _0x110a07=_0x5a5ecf;let _0x41f67d;if(_0x52a8a6===_0x110a07(0x11e)||_0x52a8a6==='ETH'||_0x52a8a6===_0x110a07(0x25d))_0x41f67d=_0x25b0ec==='EUR'?_0x6fd33[_0x110a07(0x1d4)]:_0x6fd33[_0x110a07(0x140)];else{if(usdBasecoins[_0x110a07(0x22f)](_0x52a8a6))_0x41f67d=_0x25b0ec===_0x110a07(0xe3)?_0x6fd33[_0x110a07(0x1d4)]/_0x6fd33['usd']:0x1;else _0x52a8a6===_0x110a07(0xe3)&&(_0x41f67d=_0x25b0ec===_0x110a07(0xe3)?0x1:_0x6fd33['usd']/_0x6fd33[_0x110a07(0x1d4)]);}return _0x41f67d;}function getKPIs(_0x586c41,_0x108b11='EUR'){const _0x43e166=_0x5a5ecf,_0x366e61=config['basecoin'],_0x2e7cba=lastBalances,_0x14f93a=currentCoins,_0x143caa=getNormalizedPerformance(),_0xb63900=CurrencyFactor(_0x2e7cba,config[_0x43e166(0x2aa)],_0x108b11);let _0x185d9d=0x0;_0x14f93a[_0x43e166(0x20d)](_0x1c9783=>{const _0x8f0704=_0x43e166;_0x185d9d+=_0x1c9783[_0x8f0704(0x24c)]*_0x1c9783['last'];});_0x586c41[_0x43e166(0x22f)](_0x43e166(0xeb))&&(_0x185d9d*=_0xb63900);let _0x5834ac;if(_0x185d9d!==0x0){if(_0x586c41==='basecoin'||_0x586c41===_0x43e166(0xeb)){if(_0x586c41===_0x43e166(0x2aa))_0x5834ac=(_0x185d9d/startingBalances[_0x43e166(0x2aa)]-0x1)*0x64;else{if(_0x108b11===_0x43e166(0xe3))_0x5834ac=(_0x185d9d/startingBalances[_0x43e166(0x1d4)]-0x1)*0x64;else _0x5834ac=(_0x185d9d/startingBalances['usd']-0x1)*0x64;}}if(_0x586c41['includes'](_0x43e166(0x230))){let _0x1aea6b=0x0;if(startingBalances['coins'])_0x14f93a[_0x43e166(0x20d)](_0x39def4=>{const _0x3d9c25=_0x43e166;let _0x41d5b4=startingBalances['coins'][_0x3d9c25(0x21f)](_0x427ac3=>_0x427ac3[_0x3d9c25(0x170)]===_0x39def4[_0x3d9c25(0x170)]);if(_0x41d5b4&&_0x41d5b4['coin']&&_0x39def4[_0x3d9c25(0x24c)]!==0x0)_0x1aea6b+=_0x41d5b4[_0x3d9c25(0x24c)]*_0x39def4[_0x3d9c25(0x1b6)];});let _0x1899f6=0x0;if(_0x143caa[_0x43e166(0x1ec)]!==0x0){let _0x4cb425=_0x143caa[_0x143caa[_0x43e166(0x1ec)]-0x1];_0x1899f6=_0x4cb425[_0x43e166(0x157)];}_0x1aea6b-=_0x1899f6;let _0x286648;_0x586c41===_0x43e166(0x168)&&(_0x286648=startingBalances[_0x43e166(0x2aa)]),_0x586c41===_0x43e166(0x1ad)&&(_0x286648=_0x108b11===_0x43e166(0xe3)?startingBalances[_0x43e166(0x1d4)]:startingBalances[_0x43e166(0x140)],_0x1aea6b*=_0xb63900),_0x5834ac=(_0x185d9d-_0x1aea6b)/_0x286648*0x64,_0x185d9d=_0x185d9d-_0x1aea6b;}if(_0x586c41['includes'](_0x43e166(0x205))){if(_0x143caa['length']!==0x0&&_0x14f93a['length']!==0x0){let _0x9eb71f,_0x5118c4=_0x143caa[_0x143caa['length']-0x1][_0x43e166(0x205)];_0x586c41[_0x43e166(0x22f)](_0x43e166(0xeb))?(_0x9eb71f=_0x108b11===_0x43e166(0xe3)?startingBalances[_0x43e166(0x1d4)]:startingBalances['usd'],_0x5118c4*=CurrencyFactor(_0x2e7cba,_0x366e61,_0x108b11)):_0x9eb71f=startingBalances[_0x43e166(0x2aa)],_0x5834ac=_0x5118c4/_0x9eb71f*0x64,_0x185d9d=_0x5118c4;}}if(_0x5834ac){if(_0x5834ac<0x64)_0x5834ac=_0x5834ac[_0x43e166(0x15e)](0x2);else{if(_0x5834ac<0x3e8)_0x5834ac=_0x5834ac[_0x43e166(0x15e)](0x1);else _0x5834ac=_0x5834ac[_0x43e166(0x15e)](0x0);}}else _0x5834ac=Number('0')[_0x43e166(0x15e)](0x2);if(_0x185d9d){if(Math[_0x43e166(0x233)](_0x185d9d)<0.000001)_0x185d9d=_0x185d9d['toFixed'](0x2);else{if(Math['abs'](_0x185d9d)<0.1)_0x185d9d=_0x185d9d[_0x43e166(0x15e)](0x6);else{if(Math['abs'](_0x185d9d)<0x1)_0x185d9d=_0x185d9d['toFixed'](0x5);else{if(Math['abs'](_0x185d9d)<0xa)_0x185d9d=_0x185d9d[_0x43e166(0x15e)](0x4);else{if(Math[_0x43e166(0x233)](_0x185d9d)<0x64)_0x185d9d=_0x185d9d[_0x43e166(0x15e)](0x3);else{if(Math[_0x43e166(0x233)](_0x185d9d)<0x3e8)_0x185d9d=_0x185d9d['toFixed'](0x2);else _0x185d9d=_0x185d9d['toFixed'](0x2);}}}}}}else _0x185d9d=Number('0')[_0x43e166(0x15e)](0x2);}else _0x5834ac=Number('0')['toFixed'](0x2);if(_0x5834ac>=0x0)_0x5834ac='+'+_0x5834ac;return{'value':_0x185d9d,'change':_0x5834ac};}async function getStartingBalances(_0x512f60,_0x1f6247=!![]){const _0x169a2e=_0x5a5ecf;if(_0x512f60[_0x169a2e(0x1ec)]!==0x0){const [_0x1f0067,_0xe8d744,_0x31409f]=getPerf(_0x512f60[0x0],!![]);let _0x2e51eb=[];config[_0x169a2e(0x277)][_0x169a2e(0x20d)](_0x40c9a1=>{const _0x422931=_0x169a2e;let _0x381526=0x0,_0x2706b0;config[_0x422931(0x278)][_0x422931(0x20d)](_0x2d46b8=>{const _0x4326f2=_0x422931;let _0x410982=_0x2d46b8[_0x4326f2(0x1f5)][_0x4326f2(0x21f)](_0xf71f88=>_0xf71f88[_0x4326f2(0x170)]==_0x40c9a1['coin']);if(_0x410982){_0x381526+=_0x410982['number'];if(!_0x2706b0)_0x2706b0=_0x410982[_0x4326f2(0x1a4)];}}),_0x2e51eb[_0x422931(0x171)]({'coin':_0x40c9a1[_0x422931(0x170)],'number':_0x381526,'initialprice':_0x2706b0});});const _0x5b1b11={'basecoin':_0x1f0067,'eur':_0xe8d744,'usd':_0x31409f,'coins':_0x2e51eb};if(_0x1f6247)proxyEmit(_0x169a2e(0x273),_0x5b1b11);startingBalances=_0x5b1b11;}}function headlessMode(_0x33ee5f){const _0x4a4dcd=_0x5a5ecf;let _0x2fe14c=_0x33ee5f[_0x4a4dcd(0x277)],_0x230e54=_0x33ee5f[_0x4a4dcd(0x1de)],_0x8829e6=[];for(let _0xe75956 of _0x2fe14c){if(_0xe75956['coin']!=config['basecoin']){if(_0xe75956[_0x4a4dcd(0x290)]>=_0x230e54/0x64){if(_0xe75956[_0x4a4dcd(0x1d2)])_0x8829e6[_0x4a4dcd(0x171)](_0xe75956);}else{if(_0xe75956['delta']<=-_0x230e54/0x64){if(_0xe75956['valid'])_0x8829e6['push'](_0xe75956);}}}}_0x8829e6[_0x4a4dcd(0x1ec)]>0x0&&placeOrder(_0x8829e6);}function notifyBalance(_0x3becb1){const _0x1159bd=_0x5a5ecf;let _0x16213e=_0x3becb1['portfolio'],_0x390a5b=_0x3becb1[_0x1159bd(0x1de)],_0x1179ea=[];for(let _0x395a4b of _0x16213e){if(_0x395a4b[_0x1159bd(0x170)]!=config['basecoin']){if(_0x395a4b[_0x1159bd(0x290)]>=_0x390a5b/0x64){if(_0x395a4b[_0x1159bd(0x1d2)])_0x1179ea['push'](_0x395a4b);}else{if(_0x395a4b[_0x1159bd(0x290)]<=-_0x390a5b/0x64){if(_0x395a4b[_0x1159bd(0x1d2)])_0x1179ea[_0x1159bd(0x171)](_0x395a4b);}}}}if(_0x1179ea[_0x1159bd(0x1ec)]>0x0){let _0x429cbe=_0x1179ea[_0x1159bd(0x2a3)](_0x465f45=>_0x465f45[_0x1159bd(0x170)]);_0x429cbe[_0x1159bd(0x107)]();let _0x49d4a0=_0x429cbe[_0x1159bd(0x243)](',\x20');if(!lastCoinsToBalance)logHistory(_0x1159bd(0x223),_0x1159bd(0x1c0));lastCoinsToBalance=_0x49d4a0;}}function symbolToCoin(_0x469516){const _0x45070c=_0x5a5ecf;let _0x114af5;if(_0x469516[_0x45070c(0x22f)]('/'+config[_0x45070c(0x2aa)]))_0x114af5=_0x469516[_0x45070c(0x122)]('/'+config[_0x45070c(0x2aa)],'');if(_0x469516[_0x45070c(0x22f)](config['basecoin']+'/'))_0x114af5=_0x469516[_0x45070c(0x122)](config['basecoin']+'/','');return _0x114af5;}function setLockOrders(_0x362267){const _0xf02511=_0x5a5ecf;lockOrders=_0x362267,logger[_0xf02511(0x1d9)](_0xf02511(0x1c5)+Object[_0xf02511(0x1d3)](ORDERS)[lockOrders]);}async function unlockOrders(_0x5ce8e4=![]){const _0x324ff0=_0x5a5ecf;if(allOrdersPlaced&&lockOrders==ORDERS[_0x324ff0(0x297)]){setLockOrders(ORDERS[_0x324ff0(0x1c3)]);if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);if(_0x5ce8e4){const _0x4e3d44=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x4e3d44,setBlockTransactionDetection(![]);}validateOrdersState=_0x324ff0(0x232),persistOpenOrders([]),setLockOrders(ORDERS[_0x324ff0(0x1b3)]);}}async function validateOrders(_0x219e74){const _0xdf7d78=_0x5a5ecf;if(_0x219e74)validateOrdersState=_0x219e74;logger['debug'](_0xdf7d78(0xe7)+validateOrdersState+_0xdf7d78(0xf9)+Object[_0xdf7d78(0x1d3)](ORDERS)[lockOrders]);let _0x3182bc=[],_0x3c3adc=config[_0xdf7d78(0x284)]=='market'?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0xdf7d78(0x2b4)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0xdf7d78(0x297)])return;logger[_0xdf7d78(0x1d9)](_0xdf7d78(0x2b3)+validateOrdersState);for(let _0x2d48db=lastOrders['length']-0x1;_0x2d48db>=0x0;_0x2d48db--){let _0xae8f31=lastOrders[_0x2d48db],_0x5f4acc=![];_0xae8f31['filled']>0x0&&(_0x5f4acc=!![]),_0x3182bc[_0xdf7d78(0x171)](_0x5f4acc),_0x5f4acc&&config['ordertype']!=_0xdf7d78(0x18b)&&logHistory('order',_0xdf7d78(0x12c)+_0xae8f31[_0xdf7d78(0x29d)]+'\x20'+_0xae8f31[_0xdf7d78(0x248)]+'\x20#'+formatResult(_0xae8f31['filled'],0x8)+'\x20@'+formatResult(_0xae8f31['price'],0x8)),_0x5f4acc&&lastOrders[_0xdf7d78(0x208)](_0x2d48db,0x1);}persistOpenOrders(lastOrders);const _0x505159=coolingDown?_0xdf7d78(0x1cc):'balancing\x20resumed';if(validateOrdersState=='initial'){validateOrdersState=_0xdf7d78(0x13f);if(_0x3182bc[_0xdf7d78(0x22f)](![])){}else await unlockOrders();}else{if(validateOrdersState=='ongoing'){if(_0x3182bc[_0xdf7d78(0x22f)](![])){}else await unlockOrders();}else{if(validateOrdersState==_0xdf7d78(0x1a8)){let _0x4b7558=!![];if(_0x3182bc[_0xdf7d78(0x22f)](![])){if(config[_0xdf7d78(0x284)]==_0xdf7d78(0x18b))logHistory(_0xdf7d78(0x13d),_0xdf7d78(0x2a6)+Math[_0xdf7d78(0x1f4)](_0x3c3adc*validateOrderInterval/0xea60)+_0xdf7d78(0x104)+_0x505159),await unlockOrders(!![]);else{_0x4b7558=await cancelOrders();if(_0x4b7558)logHistory(_0xdf7d78(0x13d),_0xdf7d78(0x241)+Math[_0xdf7d78(0x1f4)](_0x3c3adc*validateOrderInterval/0xea60)+_0xdf7d78(0x104)+_0x505159),await unlockOrders(!![]);else{validateOrdersState=_0xdf7d78(0x13f),logHistory(_0xdf7d78(0x16d),_0xdf7d78(0x17c)+Math[_0xdf7d78(0x1f4)](_0x3c3adc*validateOrderInterval/0xea60)+_0xdf7d78(0x104)+_0x505159),logHistory(_0xdf7d78(0x16d),_0xdf7d78(0x192));const _0x29d34c=config[_0xdf7d78(0x284)]==_0xdf7d78(0x18b)?validateOrderTimeout*0x3c*0x3e8:config[_0xdf7d78(0x2b4)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x495978=_0xdf7d78;validateOrders(_0x495978(0x1a8));},_0x29d34c);}}}else await unlockOrders(!![]);}else{if(validateOrdersState==_0xdf7d78(0x15b)){if(config[_0xdf7d78(0x284)]!=_0xdf7d78(0x18b))logHistory(_0xdf7d78(0x13d),_0xdf7d78(0x19f)+_0x505159);await unlockOrders(!![]);}}}}}async function cancelOrders(){const _0x10af63=_0x5a5ecf;let _0x3c6013=!![],_0x42a9be;for(const _0x2660cd of lastOrders){let _0x4d2894=![],_0x3bb3b8=0x0;while(!_0x4d2894&&_0x3bb3b8<maxRetries){try{const _0x17c236=await exchange['cancelOrder'](_0x2660cd[_0x10af63(0x18c)],_0x2660cd[_0x10af63(0x29d)]);_0x4d2894=!![];}catch(_0x2ce7b7){_0x2ce7b7['toString']()['includes']('OrderNotFound')||_0x2ce7b7[_0x10af63(0x22b)]()['includes'](_0x10af63(0xed))?_0x4d2894=!![]:(_0x42a9be=_0x2ce7b7,_0x4d2894=![]);}!_0x4d2894&&(_0x3bb3b8++,await sleep(retryInterval));}_0x3c6013=_0x3c6013&&_0x4d2894;}return!_0x3c6013&&await handleError(_0x42a9be,_0x10af63(0x21d)),_0x3c6013;}async function initCoinResults(_0x3b3cd0){const _0x21afe2=_0x5a5ecf;_0x3b3cd0?logger[_0x21afe2(0x1d9)](_0x21afe2(0x28c)+_0x3b3cd0):logger['debug'](_0x21afe2(0x100)),config['portfolio'][_0x21afe2(0x20d)](_0x247667=>{const _0x4448d7=_0x21afe2;if(!_0x247667[_0x4448d7(0x117)]&&_0x247667['coin']!=config[_0x4448d7(0x2aa)]){const _0x359c08=currentCoins['find'](_0x1923d1=>_0x1923d1['coin']==_0x247667[_0x4448d7(0x170)]),_0x545bdf=gTicker[noslash(_0x247667[_0x4448d7(0x29d)])];let _0x2104a8=_0x359c08?_0x359c08[_0x4448d7(0x24c)]:null,_0x169ec9=_0x247667[_0x4448d7(0x1b7)]?0x1/_0x545bdf:_0x545bdf,_0x190069;config[_0x4448d7(0x278)][_0x4448d7(0x20d)](_0x52f18c=>{const _0xf9b177=_0x4448d7;!_0x190069&&(_0x190069=_0x52f18c[_0xf9b177(0x1f5)][_0xf9b177(0x21f)](_0x34284f=>_0x34284f[_0xf9b177(0x170)]==_0x247667[_0xf9b177(0x170)]),_0x190069&&(_0x2104a8=_0x190069[_0xf9b177(0x24c)],_0x169ec9=_0x190069[_0xf9b177(0x1a4)]));});let _0x21db20=dbCoinResults[_0x4448d7(0x11b)](_0x4448d7(0xef))[_0x4448d7(0x21f)]({'coin':_0x247667['coin']})[_0x4448d7(0x1cd)]();if(!_0x21db20){const _0xfd3627={'coin':_0x247667[_0x4448d7(0x170)],'number':_0x2104a8,'breakeven':_0x169ec9,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x4448d7(0x11b)](_0x4448d7(0xef))['push'](_0xfd3627)[_0x4448d7(0x1c1)]();}else{if(_0x3b3cd0&&_0x247667[_0x4448d7(0x170)]==_0x3b3cd0){const _0x62c83c={'coin':_0x247667['coin'],'number':_0x2104a8,'breakeven':_0x169ec9,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get']('coins')[_0x4448d7(0x21f)]({'coin':_0x247667[_0x4448d7(0x170)]})[_0x4448d7(0x27b)](_0x62c83c)[_0x4448d7(0x1c1)]();}}}});}async function placeOrder(_0x2aed2b){const _0x15911e=_0x5a5ecf,_0x25fa5a=config[_0x15911e(0x284)]=='market'?_0x15911e(0x18b):_0x15911e(0x23a);if(lockOrders==ORDERS['UNLOCKED']&&!coolingDown){setLockOrders(ORDERS['LOCKED']);while(transactionDetectionOngoing){await sleep(0x64);}logger['debug'](_0x15911e(0x2ac)+_0x2aed2b[_0x15911e(0x2a3)](_0x244019=>_0x244019[_0x15911e(0x170)])[_0x15911e(0x243)](',\x20')),lastCoinsToBalance='',allOrdersPlaced=![],validateOrdersState=_0x15911e(0x232);let _0x157ac3=![];lastOrders=[];const _0x161f59=config[_0x15911e(0x1de)];for(const _0x5a8794 of _0x2aed2b){let _0x2e24f6,_0x112b43,_0x4973d9,_0x1cef30,_0x3c347e,_0xce80fc=_0x5a8794[_0x15911e(0x29d)];logger[_0x15911e(0x1d9)](_0x15911e(0x108)+_0x5a8794['coin']+'\x20'+_0x5a8794[_0x15911e(0x24c)]+'\x20'+_0x5a8794[_0x15911e(0x1b6)]+'\x20'+_0x5a8794[_0x15911e(0x245)]+'%\x20'+_0x5a8794[_0x15911e(0x1eb)]+'%\x20'+(0x64*_0x5a8794[_0x15911e(0x290)])[_0x15911e(0x15e)](0x2)+_0x15911e(0x2a9)+_0x161f59[_0x15911e(0x15e)](0x2)+'%)'),insufficientFundsWarningSent=insufficientFundsWarningSent[_0x15911e(0x1fe)](_0x15e6cb=>_0x15e6cb!==_0x5a8794[_0x15911e(0x170)]);const _0x22c7b4=currentCoins['find'](_0x3920cd=>_0x3920cd[_0x15911e(0x170)]==_0x5a8794[_0x15911e(0x170)]);_0x22c7b4&&(_0x22c7b4[_0x15911e(0x247)]=_0x5a8794[_0x15911e(0x24c)]);try{const _0xa90e0c=await exchange[_0x15911e(0x1fd)](_0xce80fc);_0x2e24f6=_0x5a8794['reverse']?0x1/_0x5a8794[_0x15911e(0x1b6)]:_0x5a8794[_0x15911e(0x1b6)],_0x112b43=_0xa90e0c[_0x15911e(0x1cf)],_0x4973d9=_0xa90e0c[_0x15911e(0x114)];_0x5a8794['reverse']?(_0x1cef30=_0x5a8794[_0x15911e(0x248)]==_0x15911e(0x1f1)?_0x15911e(0x2a5):_0x15911e(0x1f1),_0x3c347e=Math[_0x15911e(0x233)](_0x5a8794[_0x15911e(0x29b)])/_0x2e24f6):(_0x1cef30=_0x5a8794[_0x15911e(0x248)],_0x3c347e=Math[_0x15911e(0x233)](_0x5a8794[_0x15911e(0x29b)]));_0x25fa5a==_0x15911e(0x23a)&&(config[_0x15911e(0x284)]==_0x15911e(0x172)&&(_0x2e24f6=_0x1cef30==_0x15911e(0x1f1)?_0x112b43:_0x4973d9),config['ordertype']==_0x15911e(0x1b2)&&(_0x2e24f6=_0x1cef30==_0x15911e(0x1f1)?_0x4973d9:_0x112b43));_0x3c347e=formatResult(_0x3c347e,0x8),_0x2e24f6=formatResult(_0x2e24f6,0x8);const _0x3325d4=_0x1cef30==_0x15911e(0x2a5)?config[_0x15911e(0xf7)]?String[_0x15911e(0x213)]('0x'+config[_0x15911e(0xf7)])+'\x20':'':config[_0x15911e(0x13b)]?String[_0x15911e(0x213)]('0x'+config[_0x15911e(0x13b)])+'\x20':'',_0x14abeb=_0x25fa5a==_0x15911e(0x18b)?_0x15911e(0x28d):config[_0x15911e(0x284)]==_0x15911e(0x172)?_0x15911e(0x13c):_0x15911e(0x279),_0x4013c5=(Math['floor'](Math[_0x15911e(0x270)]()*0x35a4e900)+0x5f5e100)['toString']();lastOrders['push']({'customId':_0x4013c5,'symbol':_0xce80fc,'coin':_0x5a8794[_0x15911e(0x170)],'amount':_0x3c347e,'price':_0x2e24f6,'side':_0x1cef30,'reverse':_0x5a8794[_0x15911e(0x1b7)],'filled':0x0});let _0x555bac;_0x25fa5a==_0x15911e(0x18b)?_0x1cef30==_0x15911e(0x1f1)&&[_0x15911e(0x24b),_0x15911e(0x1b5),_0x15911e(0xe4),_0x15911e(0x1e7),'Huobi',_0x15911e(0x17f)][_0x15911e(0x22f)](config[_0x15911e(0x1cb)])?_0x555bac=await exchange[_0x15911e(0xe5)](_0xce80fc,_0x25fa5a,_0x1cef30,_0x3c347e,_0x2e24f6):_0x555bac=await exchange[_0x15911e(0xe5)](_0xce80fc,_0x25fa5a,_0x1cef30,_0x3c347e,undefined):_0x555bac=await exchange[_0x15911e(0xe5)](_0xce80fc,_0x25fa5a,_0x1cef30,_0x3c347e,_0x2e24f6);const _0x14ea50=lastOrders['length']-0x1;if(_0x14ea50>=0x0&&lastOrders[_0x14ea50]['customId']==_0x4013c5){lastOrders[_0x14ea50][_0x15911e(0x18c)]=_0x555bac['id'];if(_0x555bac[_0x15911e(0x286)])lastOrders[_0x14ea50][_0x15911e(0x286)]=_0x555bac['amount'];if(_0x555bac[_0x15911e(0x1a4)])lastOrders[_0x14ea50][_0x15911e(0x1a4)]=_0x555bac[_0x15911e(0x1a4)];lastOrders[_0x14ea50]['fee']=_0x555bac[_0x15911e(0x16c)];}if(_0x555bac['amount'])_0x3c347e=_0x555bac[_0x15911e(0x286)];if(_0x555bac[_0x15911e(0x1a4)])_0x2e24f6=_0x555bac['price'];if(_0x25fa5a==_0x15911e(0x18b))logHistory(_0x15911e(0xfb),''+_0x3325d4+_0x14abeb+_0x15911e(0xfd)+_0xce80fc+'\x20'+_0x1cef30+'\x20#'+formatResult(_0x3c347e,0x8)+'\x20@'+formatResult(_0x2e24f6,0x8));else logHistory('order',''+_0x3325d4+_0x14abeb+_0x15911e(0xfd)+_0xce80fc+'\x20'+_0x1cef30+'\x20#'+formatResult(_0x3c347e,0x8)+'\x20@'+formatResult(_0x2e24f6,0x8));logger[_0x15911e(0x1d9)](_0x15911e(0x1d0)+_0x555bac['id']+_0x15911e(0x146)+_0x4013c5);if(config[_0x15911e(0x201)]!=0x0){let _0x424e1b=null;if(cooldownTracker[_0x15911e(0x1ec)]==config[_0x15911e(0x201)]-0x1)_0x424e1b=cooldownTracker[_0x15911e(0x263)]();const _0x42a7c4=getTimeStamp();cooldownTracker[_0x15911e(0x171)](_0x42a7c4);if(_0x424e1b){const _0x3150ca=fns['differenceInSeconds'](new Date(_0x42a7c4),new Date(_0x424e1b));if(_0x3150ca<cooldownInterval){logHistory('error',_0x15911e(0x203)+config['cooldown']+_0x15911e(0x283)+cooldownInterval/0x3c+_0x15911e(0xdb)+cooldownPeriod/(0xe10*0x3e8)+_0x15911e(0x29e)),coolingDown=!![];break;}}}}catch(_0x41c379){if(_0x41c379[_0x15911e(0x22b)]()[_0x15911e(0x22f)](_0x15911e(0xfa)))lastOrders=lastOrders['filter'](_0x477648=>_0x477648['symbol']!=_0xce80fc),logHistory(_0x15911e(0x16d),_0x15911e(0x119)+_0xce80fc),_0x157ac3=!![];else{if(_0x41c379[_0x15911e(0x22b)]()[_0x15911e(0x22f)](_0x15911e(0x261)))lastOrders=lastOrders[_0x15911e(0x1fe)](_0x2a9002=>_0x2a9002['symbol']!=_0xce80fc),logHistory(_0x15911e(0x16d),_0x15911e(0x115)+_0xce80fc),_0x157ac3=!![];else{if(_0x41c379[_0x15911e(0x22b)]()[_0x15911e(0x22f)](_0x15911e(0xed)))lastOrders=lastOrders[_0x15911e(0x1fe)](_0x94a202=>_0x94a202[_0x15911e(0x29d)]!=_0xce80fc),logHistory(_0x15911e(0x16d),_0x15911e(0x1a2)+_0xce80fc),logger[_0x15911e(0x1d9)](_0x41c379),_0x157ac3=!![];else _0x41c379['toString']()[_0x15911e(0x22f)](_0x15911e(0x139))?(lastOrders=lastOrders[_0x15911e(0x1fe)](_0x354d1b=>_0x354d1b[_0x15911e(0x29d)]!=_0xce80fc),logHistory(_0x15911e(0x16d),_0x15911e(0x119)+_0xce80fc),_0x157ac3=!![]):(lastOrders=lastOrders[_0x15911e(0x1fe)](_0x317435=>_0x317435['symbol']!=_0xce80fc),await handleError(_0x41c379,_0x15911e(0xe8),_0xce80fc));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x15911e(0x1ec)]>0x0){const _0x2c38b5=config[_0x15911e(0x284)]=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0x15911e(0x2b4)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x2c38b5);}else unlockOrders();_0x157ac3&&config[_0x15911e(0x147)]&&(logHistory(_0x15911e(0x16d),'Avoiding\x20continuous\x20order\x20attempts'+pauseBotMsg),await pauseBot(pauseBotInterval)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x15911e(0x13d),_0x15911e(0xdc)));}else{if(coolingDown)!config['headless']&&logHistory(_0x15911e(0x16d),_0x15911e(0x1f9));else lockOrders!=ORDERS[_0x15911e(0x1b3)]&&(!config['headless']&&(config['ordertype']==_0x15911e(0x18b)?logHistory(_0x15911e(0x16d),_0x15911e(0xd9)):logHistory('error','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled')));}}function persistOpenOrders(_0x76f300){const _0x54006e=_0x5a5ecf,_0x21ae4d={...config,'openOrders':_0x76f300};let _0x33a9d3=dbConfig[_0x54006e(0x11b)](_0x54006e(0xe6))[_0x54006e(0x21f)]({'botID':botID})[_0x54006e(0x1cd)]();_0x33a9d3&&dbConfig[_0x54006e(0x11b)](_0x54006e(0xe6))[_0x54006e(0x21f)]({'botID':botID})[_0x54006e(0x27b)](_0x21ae4d)[_0x54006e(0x1c1)]();}function restoreOrders(){const _0x342152=_0x5a5ecf;let _0x631def;config[_0x342152(0x2b2)]&&allOpenOrders[_0x342152(0x20d)](_0x58edf1=>{const _0x18b65b=_0x342152,_0x3b69ec=config[_0x18b65b(0x2b2)][_0x18b65b(0x21f)](_0x17a2c4=>_0x17a2c4[_0x18b65b(0x18c)]==_0x58edf1['id']);_0x3b69ec&&(lastOrders[_0x18b65b(0x171)](_0x3b69ec),_0x631def=_0x58edf1[_0x18b65b(0x207)]);});if(lastOrders[_0x342152(0x1ec)]>0x0){setLockOrders(ORDERS[_0x342152(0x297)]),validateOrdersState=_0x342152(0x13f),allOrdersPlaced=!![];const _0x460ecf=new Date()[_0x342152(0x1fa)](),_0x1e7050=config['ordertype']==_0x342152(0x18b)?validateOrderTimeout*0x3c*0x3e8:config[_0x342152(0x2b4)]*0x3c*0x3e8;if(_0x631def+_0x1e7050>_0x460ecf){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0xdd9c70=_0x342152;validateOrders(_0xdd9c70(0x1a8));},_0x631def+_0x1e7050-_0x460ecf);}else validateOrders(_0x342152(0x1a8));}}async function sendMetricsTelegram(){const _0x300b36=_0x5a5ecf;if(!coinsLoaded){process[_0x300b36(0x21a)]({'telegrammsg':_0x300b36(0x162)},_0x45cb1d=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x105f83='';if(config[_0x300b36(0x288)])_0x105f83='<b>'+config[_0x300b36(0x138)]+_0x300b36(0x226);else _0x105f83=_0x300b36(0x1a7)+botID+_0x300b36(0x226);const _0x57217b=config[_0x300b36(0x2aa)],_0x273b99=config['fiat'],_0x178f87=getKPIs(_0x300b36(0x2aa)),_0x22df24=getKPIs(_0x300b36(0xeb),_0x273b99),_0x499d87=getKPIs(_0x300b36(0x168)),_0xeee825=getKPIs(_0x300b36(0x1ad),_0x273b99),_0x419994=getKPIs(_0x300b36(0x11c)),_0x19c02e=getKPIs(_0x300b36(0x11a),_0x273b99);_0x57217b['includes'](_0x273b99)?(_0x105f83+=_0x300b36(0x11d),_0x105f83+=_0x300b36(0xf6)+_0x57217b+':\x20'+_0x178f87[_0x300b36(0x1cd)]+'\x20('+_0x178f87[_0x300b36(0x1e8)]+_0x300b36(0x211),_0x105f83+='Net\x20'+_0x57217b+':\x20'+_0x499d87[_0x300b36(0x1cd)]+'\x20('+_0x499d87['change']+_0x300b36(0x211),_0x105f83+=_0x300b36(0x267)+_0x57217b+':\x20'+_0x419994[_0x300b36(0x1cd)]+'\x20('+_0x419994[_0x300b36(0x1e8)]+_0x300b36(0x211),_0x105f83+='</pre>'):(_0x105f83+=_0x300b36(0x11d),_0x105f83+=_0x300b36(0xf6)+_0x57217b+':\x20'+_0x178f87[_0x300b36(0x1cd)]+'\x20('+_0x178f87['change']+_0x300b36(0x211),_0x105f83+=_0x300b36(0xf6)+_0x273b99+':\x20'+_0x22df24[_0x300b36(0x1cd)]+'\x20('+_0x22df24[_0x300b36(0x1e8)]+_0x300b36(0x211),_0x105f83+=_0x300b36(0x1f3)+_0x57217b+':\x20'+_0x499d87[_0x300b36(0x1cd)]+'\x20('+_0x499d87[_0x300b36(0x1e8)]+_0x300b36(0x211),_0x105f83+='Net\x20'+_0x273b99+':\x20'+_0xeee825[_0x300b36(0x1cd)]+'\x20('+_0xeee825[_0x300b36(0x1e8)]+_0x300b36(0x211),_0x105f83+=_0x300b36(0x267)+_0x57217b+':\x20'+_0x419994[_0x300b36(0x1cd)]+'\x20('+_0x419994['change']+'%)\x0a',_0x105f83+='PnL\x20'+_0x273b99+':\x20'+_0x19c02e['value']+'\x20('+_0x19c02e['change']+_0x300b36(0x211),_0x105f83+='</pre>'),process[_0x300b36(0x21a)]({'telegrammsg':_0x105f83},_0x49f400=>{});}async function sendPortfolioTelegram(){const _0xbf71f=_0x5a5ecf;if(!coinsLoaded||!currentCoins[0x0][_0xbf71f(0x245)]){process[_0xbf71f(0x21a)]({'telegrammsg':_0xbf71f(0x162)},_0x182958=>{});return;}let _0x3f15d0='';if(config[_0xbf71f(0x288)])_0x3f15d0=_0xbf71f(0x1b9)+config['botname']+_0xbf71f(0x1f0);else _0x3f15d0='<b>Bot\x20'+botID+_0xbf71f(0x1f0);_0x3f15d0+=_0xbf71f(0x11d),_0x3f15d0+=_0xbf71f(0x19d),_0x3f15d0+='Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a',_0x3f15d0+='-------------------------------\x0a',currentCoins[_0xbf71f(0x20d)](_0x119053=>{const _0x9861d9=_0xbf71f;_0x3f15d0+=_0x119053['coin'][_0x9861d9(0x161)](0x7)+'|\x20'+formatPad(_0x119053['distribution'],0x2,0x6)+'|\x20'+formatPad(_0x119053[_0x9861d9(0x1eb)],0x2,0x6)+'|\x20'+formatPad(_0x119053['delta']*0x64,0x2,0x6)+'\x0a';}),_0x3f15d0+=_0xbf71f(0x1ab),process[_0xbf71f(0x21a)]({'telegrammsg':_0x3f15d0},_0x5368a7=>{});}function formatPad(_0x72c3c,_0x1fb6f5,_0x5d9bd8){const _0x3153f2=_0x5a5ecf,_0x7ea219=formatResultString(_0x72c3c,_0x1fb6f5);return _0x7ea219?_0x7ea219[_0x3153f2(0x128)](_0x5d9bd8):''[_0x3153f2(0x128)](_0x5d9bd8);}function logHistory(_0x476ad2,_0xd9ff40,_0x53b7b2=''){const _0x48b173=_0x5a5ecf;logger['full'](''+_0xd9ff40);let _0x47d27b={'time':getTimeStamp(),'type':_0x476ad2,'event':_0xd9ff40};dbLogs[_0x48b173(0x11b)](_0x48b173(0xe0))['push'](_0x47d27b)['write']();if(_0x53b7b2=='')_0x53b7b2=_0xd9ff40;proxyEmit(_0x48b173(0x287),{'log':_0x47d27b,'summary':_0x53b7b2}),process[_0x48b173(0x21a)]({'telegram':{..._0x47d27b,'botname':config['botname'],'showname':config[_0x48b173(0x288)]}},_0x524412=>{});}function emitHistory(_0x352688={}){const _0x42e2cb=_0x5a5ecf;Object[_0x42e2cb(0x1d3)](_0x352688)[_0x42e2cb(0x1ec)]==0x0&&(_0x352688={'type':[_0x42e2cb(0xfb),_0x42e2cb(0x287)],'event':'','page':0x1});if(_0x352688['type']['includes'](_0x42e2cb(0x287)))_0x352688[_0x42e2cb(0x295)][_0x42e2cb(0x208)](_0x352688[_0x42e2cb(0x295)][_0x42e2cb(0x105)](_0x42e2cb(0x287)),0x1,_0x42e2cb(0x16d),'warning',_0x42e2cb(0x13d));if(dbLogs[_0x42e2cb(0x182)](_0x42e2cb(0xe0))[_0x42e2cb(0x1cd)]()){let _0x2c84f=dbLogs[_0x42e2cb(0x11b)]('logs')['filter'](_0x1d0c76=>{const _0x1ae85c=_0x42e2cb;if(_0x352688['type'][_0x1ae85c(0x1ec)]==0x0)return![];else return _0x352688[_0x1ae85c(0x295)]['includes'](_0x1d0c76[_0x1ae85c(0x295)]);})[_0x42e2cb(0x1fe)](_0x297ae9=>{const _0x3a5508=_0x42e2cb;if(_0x352688[_0x3a5508(0x287)]=='')return!![];else return _0x297ae9['event'][_0x3a5508(0x252)]()[_0x3a5508(0x22f)](_0x352688[_0x3a5508(0x287)][_0x3a5508(0x252)]());})[_0x42e2cb(0x101)]('time'),_0x2b2d1e=_0x2c84f['value']()[_0x42e2cb(0x1ec)];_0x2c84f=_0x2c84f['reverse']()[_0x42e2cb(0x23c)]((_0x352688[_0x42e2cb(0x166)]-0x1)*logPageSize,_0x352688['page']*logPageSize-0x1)[_0x42e2cb(0x1b7)]()[_0x42e2cb(0x1cd)](),proxyEmit('event-history',{'logs':_0x2c84f,'total':_0x2b2d1e});}else proxyEmit(_0x42e2cb(0x1a5),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x28c472){const _0x591538=_0x5a5ecf;if(dbLogs['has'](_0x591538(0xe0))[_0x591538(0x1cd)]()){const _0x5067a8=dbLogs[_0x591538(0x11b)]('logs')[_0x591538(0x101)](_0x591538(0x227))[_0x591538(0x1fe)](_0x34397e=>{const _0x3f4dd8=_0x591538;return _0x34397e[_0x3f4dd8(0x295)]==_0x3f4dd8(0xfb);})[_0x591538(0x1cd)]();dbLogs['get'](_0x591538(0xe0))[_0x591538(0x14a)]()[_0x591538(0x1c1)](),dbLogs[_0x591538(0x11b)](_0x591538(0xe0))['assign'](_0x5067a8)[_0x591538(0x1c1)](),emitHistory(_0x28c472);}}async function pauseBot(_0xfd11e6=pauseBotIntervalShort,_0x43e88e,_0x3f7400,_0x2f297d=![]){const _0x1e3c75=_0x5a5ecf,_0x542e82=new Date()[_0x1e3c75(0x1fa)]();if(!lastErrorShown||_0x542e82-lastErrorShown>=_0xfd11e6){lastErrorShown=_0x542e82;if(!lastBotPause)lastBotPause=_0x542e82,consecutivePauses=0x1;else{if(_0x542e82-lastBotPause-_0xfd11e6<0x5a*0x3e8){consecutivePauses++;if(consecutivePauses>maxPauseRetries){if(_0x2f297d){logHistory(_0x1e3c75(0x16d),_0x43e88e+'\x20>\x20stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();return;}else logHistory('error',_0x43e88e+pauseBotMsg),_0xfd11e6=pauseBotInterval;}}else consecutivePauses=0x1;lastBotPause=_0x542e82;}_0x3f7400?logger[_0x1e3c75(0x1d9)]('('+consecutivePauses+')\x20'+_0x43e88e+_0x1e3c75(0x131),_0x3f7400):logger[_0x1e3c75(0x1d9)]('('+consecutivePauses+')\x20'+_0x43e88e);if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);await sleep(_0xfd11e6),botPaused=![],_0xfd11e6==pauseBotIntervalShort?resumeBot(!![]):resumeBot(![]);}}}async function killBot(){const _0x205de1=_0x5a5ecf;botPaused=!![],await sleep(0x3e8),process[_0x205de1(0x21a)]({'stop':_0x205de1(0x16e)},_0x189dee=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x412252,_0x3a5ec4,_0xa0c5e=![]){const _0x22b3ee=_0x5a5ecf;if(botPaused)return;let _0x40f0de;const _0xf12338=config[_0x22b3ee(0x1cb)]||'Exchange';if(_0x3a5ec4)logger[_0x22b3ee(0x1d9)](_0x22b3ee(0x2a7)+_0x3a5ec4);const _0x1a24dd=()=>{const _0x2f9055=_0x22b3ee;loading['error']=_0x2f9055(0x1c6),emitLoadingProgress();};if(_0x412252[_0x22b3ee(0x22b)]()[_0x22b3ee(0x22f)](_0x22b3ee(0x159)))logHistory(_0x22b3ee(0x16d),_0xf12338+_0x22b3ee(0x111)),_0x1a24dd();else{if(_0x412252[_0x22b3ee(0x22b)]()[_0x22b3ee(0x22f)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory(_0x22b3ee(0x16d),_0xf12338+_0x22b3ee(0x1f6)),_0x1a24dd();else{if(_0x412252['toString']()[_0x22b3ee(0x22f)](_0x22b3ee(0x176)))config[_0x22b3ee(0x296)]?_0x40f0de=_0xf12338+_0x22b3ee(0x133):_0x40f0de=_0xf12338+_0x22b3ee(0x276),logHistory(_0x22b3ee(0x16d),_0x40f0de+'\x20(see:\x20hodlerhacks.com/fix/1)'),_0x1a24dd();else{if(_0x412252[_0x22b3ee(0x22b)]()[_0x22b3ee(0x22f)]('PermissionDenied'))logHistory(_0x22b3ee(0x16d),_0xf12338+'\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)'),_0x1a24dd();else{if(!_0xa0c5e)await handleError(_0x412252,null);}}}}}async function handleError(_0x3a864b,_0xf0a35,_0x914f09=''){const _0x39c5dd=_0x5a5ecf;if(botPaused)return;let _0x3b4105;const _0xca4992=config[_0x39c5dd(0x1cb)]||'Exchange';if(_0xf0a35)logger['debug'](_0x39c5dd(0x2a7)+_0xf0a35);if(_0x3a864b[_0x39c5dd(0x22b)]()[_0x39c5dd(0x22f)](_0x39c5dd(0x18d)))_0x3b4105=_0xca4992+_0x39c5dd(0x20c),await pauseBot(undefined,_0x3b4105,_0x3a864b);else{if(_0x3a864b[_0x39c5dd(0x22b)]()[_0x39c5dd(0x22f)]('RateLimitExceeded'))_0x3b4105=_0xca4992+'\x20blocked\x20API\x20(RateLimitExceeded)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading',await pauseBot(undefined,_0x3b4105,_0x3a864b);else{if(_0x3a864b['toString']()['includes']('ExchangeNotAvailable')||_0x3a864b[_0x39c5dd(0x22b)]()['includes'](_0x39c5dd(0x2a1)))_0x3b4105=_0xca4992+_0x39c5dd(0x21b),await pauseBot(undefined,_0x3b4105,_0x3a864b['toString']());else{if(_0x3a864b['toString']()[_0x39c5dd(0x22f)](_0x39c5dd(0x179)))_0x3b4105=_0xca4992+_0x39c5dd(0x181),await pauseBot(undefined,_0x3b4105,_0x3a864b[_0x39c5dd(0x22b)]());else{if(_0x3a864b[_0x39c5dd(0x22b)]()[_0x39c5dd(0x22f)](_0x39c5dd(0x135)))_0x3b4105=_0xca4992+_0x39c5dd(0x148),await pauseBot(undefined,_0x3b4105,_0x3a864b['toString']());else{if(_0x3a864b[_0x39c5dd(0x22b)]()[_0x39c5dd(0x252)]()['includes'](_0x39c5dd(0x207))||_0x3a864b['toString']()['toLowerCase']()[_0x39c5dd(0x22f)](_0x39c5dd(0x197)))_0x3b4105=_0x39c5dd(0xf3),await pauseBot(undefined,_0x3b4105,_0x3a864b[_0x39c5dd(0x22b)]());else{if(_0x3a864b[_0x39c5dd(0x22b)]()[_0x39c5dd(0x22f)](_0x39c5dd(0xdf)))_0x3b4105=_0xca4992+_0x39c5dd(0x27c),await pauseBot(undefined,_0x3b4105,_0x3a864b['toString']());else{if(_0x3a864b instanceof ccxt[_0x39c5dd(0x18f)])_0x3b4105=_0xca4992+_0x39c5dd(0x1ff)+_0x3a864b[_0x39c5dd(0x22b)](),logger[_0x39c5dd(0x1d9)]('Network\x20error\x20details:',_0x3a864b),await pauseBot(undefined,_0x3b4105,_0x3a864b);else{if(_0x3a864b[_0x39c5dd(0x22b)]()[_0x39c5dd(0x22f)]('API-key\x20format\x20invalid'))logHistory(_0x39c5dd(0x16d),_0xca4992+'\x20API\x20key\x20is\x20invalid'),logHistory(_0x39c5dd(0x16d),_0x39c5dd(0x209)),await killBot();else{if(_0x3a864b['toString']()[_0x39c5dd(0x22f)](_0x39c5dd(0x1d8)))logHistory(_0x39c5dd(0x16d),_0xca4992+_0x39c5dd(0x174)),logHistory('error',_0x39c5dd(0x209)),await killBot();else{if(_0x3a864b[_0x39c5dd(0x22b)]()['includes']('AuthenticationError')&&_0x3a864b[_0x39c5dd(0x22b)]()[_0x39c5dd(0x22f)](_0x39c5dd(0x17b)))_0x3b4105=_0xca4992+_0x39c5dd(0x1c8),await pauseBot(undefined,_0x3b4105,_0x3a864b,!![]);else{if(_0x3a864b[_0x39c5dd(0x22b)]()['includes'](_0x39c5dd(0x176)))config[_0x39c5dd(0x296)]?_0x3b4105=_0xca4992+_0x39c5dd(0x133):_0x3b4105=_0xca4992+_0x39c5dd(0x276),logHistory(_0x39c5dd(0x16d),_0x3b4105),logHistory(_0x39c5dd(0x16d),_0x39c5dd(0x209)),await killBot();else{if(_0x3a864b[_0x39c5dd(0x22b)]()['includes'](_0x39c5dd(0x185)))logHistory(_0x39c5dd(0x16d),_0xca4992+_0x39c5dd(0x2ae)),logHistory(_0x39c5dd(0x16d),_0x39c5dd(0x209)),await killBot();else{if(_0x3a864b[_0x39c5dd(0x22b)]()[_0x39c5dd(0x22f)]('InsufficientFunds'))logHistory(_0x39c5dd(0x16d),_0x39c5dd(0x221)+_0x914f09),logger[_0x39c5dd(0x1d9)](_0x39c5dd(0x1aa),_0x3a864b);else{if(_0x3a864b instanceof ccxt[_0x39c5dd(0x26e)]){_0x3b4105=_0xca4992+_0x39c5dd(0x1bf)+_0x3a864b['toString']();if(_0x914f09)_0x3b4105+=_0x39c5dd(0x1ce)+_0x914f09;await pauseBot(undefined,_0x3b4105,_0x3a864b);}else{_0x3b4105=_0x39c5dd(0x14e)+_0x3a864b['toString']();if(_0x914f09)_0x3b4105+='\x0aSymbol(s):\x20'+_0x914f09;await pauseBot(undefined,_0x3b4105);}}}}}}}}}}}}}}}}function decryptRSA(_0x3254aa,_0x38c67b){const _0x48ad10=_0x5a5ecf,_0x3db83d=forge[_0x48ad10(0x1b0)][_0x48ad10(0x1bb)](_0x3254aa),_0x261a19=_0x3db83d['decrypt'](forge[_0x48ad10(0x17a)]['decode64'](_0x38c67b),_0x48ad10(0x25b),{'md':forge['md'][_0x48ad10(0x17d)][_0x48ad10(0x1ee)](),'mgf1':{'md':forge['md'][_0x48ad10(0x17d)][_0x48ad10(0x1ee)]()}});return _0x261a19;}async function withRetry(_0x25a0c8,_0x4aa916){const _0x40a55e=_0x5a5ecf;let _0x22c752=![],_0x49729c=0x0,_0x5719fa,_0x1bd203;while(_0x49729c<maxRetries){try{_0x5719fa=await _0x4aa916();break;}catch(_0x31c753){_0x1bd203=_0x31c753,!_0x22c752?(_0x22c752=!![],logger['debug'](_0x40a55e(0x1ef)+_0x25a0c8+':',_0x31c753['toString']())):await sleep(retryInterval);}_0x49729c++;}if(_0x49729c==0x0)return _0x5719fa;if(_0x49729c>=maxRetries)throw _0x1bd203;else return logger[_0x40a55e(0x1d9)](_0x40a55e(0x27d)+_0x49729c+_0x40a55e(0x228)),_0x5719fa;}function formatResult(_0x16a38b,_0x55a67a){const _0x41679c=_0x5a5ecf;return parseFloat(_0x16a38b[_0x41679c(0x15e)](_0x55a67a));}function formatResultTruncate(_0x9c62c9,_0x501204){const _0x343a83=_0x5a5ecf;let _0xa6b87e=formatResultString(_0x9c62c9,0xa),_0x22d901=_0xa6b87e[_0x343a83(0x105)]('.');return _0x22d901!=-0x1&&(_0xa6b87e=_0xa6b87e['slice'](0x0,_0x22d901+_0x501204+0x1)),Number(_0xa6b87e);}function formatResultString(_0x5790c7,_0x47e868){const _0x481b27=_0x5a5ecf;let _0x517367;if(!(''+_0x5790c7)['includes']('e'))_0x517367=+(Math[_0x481b27(0x1f4)](_0x5790c7+'e+'+_0x47e868)+'e-'+_0x47e868);else{let _0x3e47ca=(''+_0x5790c7)[_0x481b27(0x102)]('e'),_0x2681ad='';+_0x3e47ca[0x1]+_0x47e868>0x0&&(_0x2681ad='+'),_0x517367=+(Math[_0x481b27(0x1f4)](+_0x3e47ca[0x0]+'e'+_0x2681ad+(+_0x3e47ca[0x1]+_0x47e868))+'e-'+_0x47e868);}return Number(_0x517367)['toFixed'](_0x47e868);}function getServerTime(){const _0x356ffb=_0x5a5ecf,_0x101fd4=new Date();return _0x101fd4[_0x356ffb(0x16b)]()+'/'+(_0x101fd4['getMonth']()+0x1)['toString']()[_0x356ffb(0x128)](0x2,'0')+'/'+_0x101fd4[_0x356ffb(0x184)]()[_0x356ffb(0x22b)]()[_0x356ffb(0x128)](0x2,'0')+'\x20'+_0x101fd4[_0x356ffb(0x196)]()[_0x356ffb(0x22b)]()['padStart'](0x2,'0')+':'+_0x101fd4[_0x356ffb(0x199)]()[_0x356ffb(0x22b)]()['padStart'](0x2,'0')+':'+_0x101fd4[_0x356ffb(0x145)]()[_0x356ffb(0x22b)]()[_0x356ffb(0x128)](0x2,'0');}function getTimeStamp(){const _0x4e68d6=_0x5a5ecf,_0x420848=shiftedTime();return _0x420848[_0x4e68d6(0x16b)]()+'/'+(_0x420848['getMonth']()+0x1)[_0x4e68d6(0x22b)]()[_0x4e68d6(0x128)](0x2,'0')+'/'+_0x420848[_0x4e68d6(0x184)]()[_0x4e68d6(0x22b)]()[_0x4e68d6(0x128)](0x2,'0')+'\x20'+_0x420848[_0x4e68d6(0x196)]()['toString']()[_0x4e68d6(0x128)](0x2,'0')+':'+_0x420848[_0x4e68d6(0x199)]()[_0x4e68d6(0x22b)]()[_0x4e68d6(0x128)](0x2,'0')+':'+_0x420848[_0x4e68d6(0x145)]()[_0x4e68d6(0x22b)]()[_0x4e68d6(0x128)](0x2,'0');}function getDate(){const _0xa8fcd9=_0x5a5ecf,_0x3b8b76=shiftedTime();return _0x3b8b76[_0xa8fcd9(0x16b)]()+'/'+(_0x3b8b76[_0xa8fcd9(0x1d6)]()+0x1)['toString']()[_0xa8fcd9(0x128)](0x2,'0')+'/'+_0x3b8b76[_0xa8fcd9(0x184)]()[_0xa8fcd9(0x22b)]()[_0xa8fcd9(0x128)](0x2,'0');}function getHour(){const _0x27cc5b=_0x5a5ecf,_0x486f1e=shiftedTime();return _0x486f1e[_0x27cc5b(0x196)]()[_0x27cc5b(0x22b)]()['padStart'](0x2,'0');}function sleep(_0x29062f){return new Promise(_0x57b7e6=>setTimeout(_0x57b7e6,_0x29062f));}function shiftedTime(){const _0xa68d58=_0x5a5ecf,_0x263dd8=new Date();let _0x2ddb93=_0x263dd8;if(config&&config[_0xa68d58(0x190)]!==0x0)_0x2ddb93=fns[_0xa68d58(0x24e)](_0x263dd8,{'hours':config[_0xa68d58(0x190)]});return _0x2ddb93;}function timer(_0x3f91bb){const _0x380b11=_0x5a5ecf,_0x13c2ec=new Date();!lasttime?console[_0x380b11(0xde)](getTimeStamp()+_0x380b11(0xdd),_0x3f91bb,_0x13c2ec):console[_0x380b11(0xde)](getTimeStamp()+_0x380b11(0xdd),_0x3f91bb,(_0x13c2ec-lasttime)/0x3e8),lasttime=_0x13c2ec;}