const _0x1b2526=_0x167b;(function(_0x38125a,_0x39549e){const _0x232958=_0x167b,_0x5e5b95=_0x38125a();while(!![]){try{const _0x154a37=-parseInt(_0x232958(0x1c3))/0x1+parseInt(_0x232958(0x26f))/0x2*(-parseInt(_0x232958(0x14f))/0x3)+parseInt(_0x232958(0x2c6))/0x4+parseInt(_0x232958(0x2bb))/0x5*(parseInt(_0x232958(0x190))/0x6)+-parseInt(_0x232958(0x2cc))/0x7*(-parseInt(_0x232958(0x1cd))/0x8)+-parseInt(_0x232958(0x183))/0x9*(parseInt(_0x232958(0x13b))/0xa)+parseInt(_0x232958(0x303))/0xb*(parseInt(_0x232958(0x1c9))/0xc);if(_0x154a37===_0x39549e)break;else _0x5e5b95['push'](_0x5e5b95['shift']());}catch(_0x28df56){_0x5e5b95['push'](_0x5e5b95['shift']());}}}(_0x45fe,0xd2468));const _0x32109f=function(){let _0x4e9200=!![];return function(_0x3ed207,_0x5a184b){const _0x3c731f=_0x4e9200?function(){const _0x1dad2b=_0x167b;if(_0x5a184b){const _0x3ff002=_0x5a184b[_0x1dad2b(0x264)](_0x3ed207,arguments);return _0x5a184b=null,_0x3ff002;}}:function(){};return _0x4e9200=![],_0x3c731f;};}(),_0x286672=_0x32109f(this,function(){const _0x4655b4=_0x167b;return _0x286672[_0x4655b4(0x236)]()[_0x4655b4(0x2ba)](_0x4655b4(0x2be))[_0x4655b4(0x236)]()[_0x4655b4(0x19f)](_0x286672)[_0x4655b4(0x2ba)](_0x4655b4(0x2be));});_0x286672();'use strict';const ccxt=require(_0x1b2526(0x230)),low=require(_0x1b2526(0x2cd)),FileSync=require(_0x1b2526(0x188)),fs=require('fs'),fns=require('date-fns'),forge=require('node-forge'),util=require(_0x1b2526(0x15d)),argv=require(_0x1b2526(0x1b3))(process['argv'][_0x1b2526(0x248)](0x2))['argv'],path=require(_0x1b2526(0x2c3)),axios=require('axios');let exchange,gTicker={},gChange={};const usdBasecoins=[_0x1b2526(0x2f9),'BUSD','TUSD',_0x1b2526(0x1d8),_0x1b2526(0x29c),'USDP'],excludedExchanges=[_0x1b2526(0x279)],debugging=argv['d']||![];let pnlGenerationNeeded=argv['r']||![],config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x1b2526(0x277)]({'LOCKED':0x0,'UNLOCKING':0x1,'UNLOCKED':0x2});let lockOrders=ORDERS[_0x1b2526(0x227)],validateOrdersState,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotIntervalShort=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0x1b2526(0x187)+pauseBotInterval/0xea60+_0x1b2526(0x152),maxPauseRetries=0x6,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,watchTransactionsInterval=0x3c*0x3e8,schedulerInterval=0x3c*0x3c*0x3e8,retryInterval=0x3e8,maxRetries=0x5,logPageSize=0x14,defaultFee=0.003;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidOrdersInitialTimeout,pidOrdersTimeout,botPaused=![],transactionDetectionOngoing=![],lastCoinsToBalance='',insufficientFundsWarningSent=[],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x5dc,balanceUpdateRetries=0x5;function _0x167b(_0x57b586,_0x11da9f){const _0x7b9df1=_0x45fe();return _0x167b=function(_0x286672,_0x32109f){_0x286672=_0x286672-0x136;let _0x45fe98=_0x7b9df1[_0x286672];return _0x45fe98;},_0x167b(_0x57b586,_0x11da9f);}let enableFiatToggle;const serverversion=require('./version.json')[_0x1b2526(0x231)],environment=require(_0x1b2526(0x21b))[_0x1b2526(0x218)]||'production',botID=process['argv'][0x2]||_0x1b2526(0x292),pattern=/^[0-9]{3}$/;!pattern[_0x1b2526(0x25c)](botID)&&(console['log'](_0x1b2526(0x181)+botID+_0x1b2526(0x16e)),killBot());const userID=process[_0x1b2526(0x241)][0x3]||'',configpath=userID?_0x1b2526(0x1b5)+userID+'/':_0x1b2526(0x1b5),logspath=userID?'./logs/'+userID+'/':'./logs/',loggerfile=fs[_0x1b2526(0x1cf)](logspath+'/output-000.log',{'flags':'a'});!fs[_0x1b2526(0x23d)](configpath)&&fs[_0x1b2526(0x156)](configpath);!fs[_0x1b2526(0x23d)](logspath)&&fs[_0x1b2526(0x156)](logspath);const configfile=configpath+'bot-'+botID+_0x1b2526(0x2e2),logfile=configpath+'bot-'+botID+'-events.json',performancefile=configpath+_0x1b2526(0x2d9)+botID+'-performance.json',coinresultsfile=configpath+_0x1b2526(0x2d9)+botID+_0x1b2526(0x22e),settingsfile=configpath+_0x1b2526(0x1b2),securefile=configpath+_0x1b2526(0x301),configbackuppath=configpath+_0x1b2526(0x22a),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x1b2526(0x283)]({'logs':[],'version':serverversion})[_0x1b2526(0x21c)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x1b2526(0x283)]({'data':[],'version':serverversion})[_0x1b2526(0x21c)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x1b2526(0x283)]({'bot':[],'version':serverversion})[_0x1b2526(0x21c)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults['defaults']({'coins':{},'version':serverversion})[_0x1b2526(0x21c)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const operatorId=0x200f1;let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x36c09d=>{const _0x11914e=_0x1b2526;console[_0x11914e(0x2fd)](_0x36c09d);},'simple':_0xf0480c=>{const _0x3e5a78=_0x1b2526;console[_0x3e5a78(0x2fd)](_0xf0480c),loggerfile['write'](util['format'](_0xf0480c)+'\x0a');},'full':async(_0x49ef22,_0x643bfc='')=>{const _0x1077d7=_0x1b2526;let _0x1f5a52;if(config[_0x1077d7(0x18e)])_0x1f5a52=getTimeStamp()+':\x20'+config[_0x1077d7(0x1bb)]+_0x1077d7(0x22f)+_0x49ef22;else _0x1f5a52=getTimeStamp()+_0x1077d7(0x1df)+botID+_0x1077d7(0x22f)+_0x49ef22;console[_0x1077d7(0x2fd)](_0x1f5a52),loggerfile['write'](util[_0x1077d7(0x1fa)](_0x1f5a52)+'\x0a'),_0x643bfc&&(console['log'](_0x643bfc),loggerfile['write'](util[_0x1077d7(0x1fa)](_0x643bfc)+'\x0a'));},'debug':async(_0x6a91c3,_0xaa7df='')=>{const _0x2ce4c3=_0x1b2526;let _0x5bc4f0;if(config[_0x2ce4c3(0x18e)])_0x5bc4f0=getTimeStamp()+':\x20'+config[_0x2ce4c3(0x1bb)]+'\x20>\x20[DEBUG]\x20'+_0x6a91c3;else _0x5bc4f0=getTimeStamp()+_0x2ce4c3(0x1df)+botID+'\x20>\x20[DEBUG]\x20'+_0x6a91c3;if(debugging)console[_0x2ce4c3(0x2fd)](_0x5bc4f0);loggerfile[_0x2ce4c3(0x21c)](util[_0x2ce4c3(0x1fa)](_0x5bc4f0)+'\x0a');if(_0xaa7df){if(debugging)console[_0x2ce4c3(0x2fd)](_0xaa7df);loggerfile[_0x2ce4c3(0x21c)](util[_0x2ce4c3(0x1fa)](_0xaa7df)+'\x0a');}}};process['on'](_0x1b2526(0x138),function(_0x345fb8){handleError(_0x345fb8['stack'],'uncaughtException');});settings[_0x1b2526(0x199)]!=config[_0x1b2526(0x199)]&&updateTimeshift(settings[_0x1b2526(0x199)]);settings[_0x1b2526(0x24a)]!=config[_0x1b2526(0x24a)]&&updateOnepagemode(settings[_0x1b2526(0x24a)]);(settings[_0x1b2526(0x21e)]&&!config[_0x1b2526(0x21e)]||!settings[_0x1b2526(0x21e)]&&config[_0x1b2526(0x21e)])&&updateMarketcapApi(settings[_0x1b2526(0x21e)]);process[_0x1b2526(0x25a)]({'started':'running'},_0x2dbff7=>{}),initializeProcessListeners();function proxyEmit(_0x557368,_0x4fc13e=null){const _0x1bdbe4=_0x1b2526;process[_0x1bdbe4(0x25a)]({'function':_0x557368,'args':_0x4fc13e},_0x2130d8=>{});}function initializeProcessListeners(){const _0x1f3883=_0x1b2526;process['on'](_0x1f3883(0x17e),_0x3e16e0=>{const _0x279705=_0x1f3883;switch(Object[_0x279705(0x18f)](_0x3e16e0)[0x0]){case'timeshift':_0x3e16e0[_0x279705(0x199)]!=undefined&&(settings[_0x279705(0x199)]=_0x3e16e0[_0x279705(0x199)],updateTimeshift(settings[_0x279705(0x199)]));break;case _0x279705(0x24a):_0x3e16e0['onepagemode']!=undefined&&(settings[_0x279705(0x24a)]=_0x3e16e0[_0x279705(0x24a)],updateOnepagemode(settings['onepagemode']));break;case'marketcapApi':_0x3e16e0[_0x279705(0x21e)]!=undefined&&(settings['marketcapApi']=_0x3e16e0[_0x279705(0x21e)],updateMarketcapApi(settings[_0x279705(0x21e)]));break;case _0x279705(0x1e7):_0x3e16e0['bots']!=undefined&&(bots=JSON[_0x279705(0x210)](_0x3e16e0[_0x279705(0x1e7)]),proxyEmit('bots',bots));break;case _0x279705(0x1d0):switch(_0x3e16e0['function']){case _0x279705(0x286):initclient();break;case'toggleBotMode':toggleBotMode();break;case _0x279705(0x16f):emitHistory(_0x3e16e0['args']);break;case'deleteHistoryAlerts':deleteHistoryAlerts(_0x3e16e0[_0x279705(0x214)]);break;case'getPortfolio':getPortfolio(_0x3e16e0['args']);break;case _0x279705(0x1e3):storeConfiguration(_0x3e16e0['args']);break;case _0x279705(0x276):storeHeadless(_0x3e16e0['args']);break;case _0x279705(0x2aa):storeFiat(_0x3e16e0['args']);break;case _0x279705(0x234):resetHistory();break;case _0x279705(0x288):getStartingBalances(getNormalizedPerformance());break;case _0x279705(0x164):placeOrder(_0x3e16e0['args']);break;case _0x279705(0x29d):cancelLoading();break;case _0x279705(0x297):showConfig();break;case _0x279705(0x1a1):sendMetricsTelegram();break;case _0x279705(0x1f9):sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x17bb51=![]){const _0x229111=_0x1b2526;logger[_0x229111(0x2df)](_0x229111(0x29a)+(_0x17bb51?_0x229111(0x1cb):'no\x20exchange\x20reloaded')+_0x229111(0x2f2)+config[_0x229111(0x2e1)]);if(pidBalances)clearTimeout(pidBalances);lastCoinsToBalance='',insufficientFundsWarningSent=[],coinsLoaded=![];if(config[_0x229111(0x265)]!=''&&config[_0x229111(0x265)]!='***'){loadingProgress=0x0;if(_0x17bb51){await initExchange();const _0x33249c=await testAPI();if(!_0x33249c)return;await loadSymbols(),loadingProgress=0x1,setStableCoins(),proxyEmit(_0x229111(0x245),emittedConfiguration()),initialPerformanceStored=![];}const _0x4a1273=await getCoins();[currentCoins,currentCoinsAll]=_0x4a1273,setBlockTransactionDetection(![]),startScheduler(),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x229111(0x2df)](_0x229111(0x229)),getBalances(![]),await updateOpenOrders();if(lastOrders['length']==0x0&&allOpenOrders[_0x229111(0x267)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(pnlGenerationNeeded)await generatePnL();}}async function resumeBot(_0x4853fa=![]){const _0x29a810=_0x1b2526;logger[_0x29a810(0x2df)](_0x29a810(0x275)+(_0x4853fa?_0x29a810(0x209):_0x29a810(0x299))+_0x29a810(0x239)+config[_0x29a810(0x2e1)]);if(pidBalances)clearTimeout(pidBalances);if(_0x4853fa){getBalances();return;}coinsLoaded=![];if(config['apiKey']!=''&&config[_0x29a810(0x265)]!=_0x29a810(0x26e)){loadingProgress=0x1;const _0x53508f=await getCoins();[currentCoins,currentCoinsAll]=_0x53508f,setBlockTransactionDetection(![]),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger['debug'](_0x29a810(0x229)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x29a810(0x267)]==0x0&&allOpenOrders[_0x29a810(0x267)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();}}async function getMarketCap(_0x26935d){const _0x2b87e5=_0x1b2526;let _0x331e15=![];if(_0x26935d)_0x331e15=!![];const _0x469e09=_0x331e15?_0x26935d:currentCoins,_0x2656f7=_0x469e09[_0x2b87e5(0x1a5)](_0x483b75=>_0x483b75[_0x2b87e5(0x272)]);if(!config[_0x2b87e5(0x21e)]||!_0x331e15&&!config[_0x2b87e5(0x170)]||_0x2656f7[_0x2b87e5(0x267)]==0x0)return;let _0x3b2fe9=null;try{_0x3b2fe9=await axios[_0x2b87e5(0x2f6)](_0x2b87e5(0x258),{'headers':{'X-CMC_PRO_API_KEY':settings[_0x2b87e5(0x21e)]},'params':{'symbol':_0x2656f7['toString']()}});}catch(_0x3bc8c4){_0x3b2fe9=null,_0x3bc8c4[_0x2b87e5(0x236)]()['includes']('status\x20code\x20401')?(config['marketcapApi']=![],updateConfig(),proxyEmit('configuration',emittedConfiguration()),logHistory('error',_0x2b87e5(0x2ad))):(logHistory(_0x2b87e5(0x18a),'CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20trying\x20again\x20in\x20'+schedulerInterval/(0x3c*0x3e8)+_0x2b87e5(0x152)),logger['debug'](_0x2b87e5(0x200),_0x3bc8c4[_0x2b87e5(0x236)]()+_0x2b87e5(0x2a8)+_0x3bc8c4['code']));}const _0x4c729c=new Map();let _0x123c0b=!![];if(_0x3b2fe9){let _0x309433=0x0;const _0x1219a9=_0x3b2fe9[_0x2b87e5(0x1fc)];_0x2656f7[_0x2b87e5(0x157)](_0x217074=>{const _0x253cf7=_0x2b87e5;if(_0x1219a9[_0x253cf7(0x1fc)][_0x217074][0x0]&&_0x1219a9[_0x253cf7(0x1fc)][_0x217074][0x0]['quote']['USD'][_0x253cf7(0x1fe)])_0x4c729c['set'](_0x217074,_0x1219a9[_0x253cf7(0x1fc)][_0x217074][0x0][_0x253cf7(0x145)][_0x253cf7(0x2f9)][_0x253cf7(0x1fe)]),_0x309433+=_0x1219a9[_0x253cf7(0x1fc)][_0x217074][0x0][_0x253cf7(0x145)]['USD']['market_cap'];else{if(_0x1219a9[_0x253cf7(0x1fc)][_0x217074][0x0]&&_0x1219a9[_0x253cf7(0x1fc)][_0x217074][0x0][_0x253cf7(0x24d)])_0x4c729c['set'](_0x217074,_0x1219a9[_0x253cf7(0x1fc)][_0x217074][0x0][_0x253cf7(0x24d)]),_0x309433+=_0x1219a9[_0x253cf7(0x1fc)][_0x217074][0x0][_0x253cf7(0x24d)];else{if(![_0x253cf7(0x266),_0x253cf7(0x2f9)]['includes'](_0x217074)){if(_0x331e15)logHistory(_0x253cf7(0x18a),_0x253cf7(0x28f)+_0x217074+_0x253cf7(0x1ee));else{const _0x1e2d91=config[_0x253cf7(0x1c2)][_0x253cf7(0x2d7)](_0x11a4f5=>_0x11a4f5[_0x253cf7(0x272)]==_0x217074);_0x1e2d91&&!_0x1e2d91[_0x253cf7(0x1f3)]&&_0x1e2d91[_0x253cf7(0x307)]==-0x1&&(_0x123c0b=![],logHistory('error',_0x253cf7(0x308)),logger[_0x253cf7(0x2df)](_0x253cf7(0x28f)+_0x217074));}}}}});if(!_0x123c0b)return;_0x2656f7[_0x2b87e5(0x157)](_0x291670=>{const _0xca5fd6=_0x2b87e5,_0x1e4098=_0x4c729c[_0xca5fd6(0x2f6)](_0x291670)?_0x4c729c[_0xca5fd6(0x2f6)](_0x291670):0x0;if(_0x331e15){const _0x38b403=_0x26935d[_0xca5fd6(0x2d7)](_0x4d5c16=>_0x4d5c16['coin']==_0x291670);_0x38b403&&(_0x38b403[_0xca5fd6(0x171)]=_0x1e4098);}else{const _0x137193=currentCoins[_0xca5fd6(0x2d7)](_0x261c69=>_0x261c69['coin']==_0x291670);_0x137193&&(_0x137193[_0xca5fd6(0x171)]=_0x1e4098);const _0x300c1f=currentCoinsAll[_0xca5fd6(0x2d7)](_0x303af2=>_0x303af2[_0xca5fd6(0x272)]==_0x291670);_0x300c1f&&(_0x300c1f[_0xca5fd6(0x171)]=_0x1e4098);}}),!_0x331e15&&updateTargetDistribution();}}function updateTargetDistribution(){const _0x377098=_0x1b2526,_0x308c93=0x2;let _0x49b9d7=0x0,_0x249a3c=0x0,_0x2e3ef3=0x0,_0x1043ce=0x0,_0x7709ac=0x0;config['portfolio'][_0x377098(0x157)](_0x38e266=>{const _0x550845=_0x377098;if(!_0x38e266['excluded']){_0x2e3ef3++,_0x49b9d7+=_0x38e266[_0x550845(0x307)];if(_0x38e266[_0x550845(0x307)]===-0x1){_0x49b9d7++;const _0x599ee4=currentCoinsAll[_0x550845(0x2d7)](_0x3e52c1=>_0x3e52c1[_0x550845(0x272)]==_0x38e266[_0x550845(0x272)]);_0x599ee4&&(_0x1043ce+=_0x599ee4[_0x550845(0x171)],_0x7709ac+=Math[_0x550845(0x151)](_0x599ee4[_0x550845(0x171)]));}if(_0x38e266[_0x550845(0x307)]!==-0x1)_0x249a3c++;}});let _0x2713a0;const _0x13e7a1=0x64-_0x49b9d7,_0x45b59d=_0x2e3ef3-_0x249a3c;_0x2713a0=_0x45b59d===0x0?_0x49b9d7:Math['max'](0x64,_0x49b9d7),config['portfolio'][_0x377098(0x157)](_0x277871=>{const _0x1dad22=_0x377098,_0x5a56d6=currentCoinsAll['find'](_0x53bdec=>_0x53bdec['coin']==_0x277871[_0x1dad22(0x272)]);_0x5a56d6&&(_0x277871['marketcap']=_0x5a56d6[_0x1dad22(0x171)]);if(!_0x277871['excluded']){if(_0x2713a0<=0x64){if(_0x277871['slider']===-0x1){if(_0x1043ce!==0x0&&config['marketcapEnabled']){if(_0x5a56d6){if(config['marketcapEnabled']=='marketcap')_0x277871[_0x1dad22(0x2ae)]=(_0x13e7a1/(_0x1043ce/_0x5a56d6[_0x1dad22(0x171)]))[_0x1dad22(0x274)](_0x308c93);else config['marketcapEnabled']==_0x1dad22(0x216)&&(_0x277871[_0x1dad22(0x2ae)]=(_0x13e7a1/(_0x7709ac/Math[_0x1dad22(0x151)](_0x5a56d6[_0x1dad22(0x171)])))[_0x1dad22(0x274)](_0x308c93));}}}}}}),updateConfig();}function updateConfig(){const _0x3b948c=_0x1b2526;let _0xee6263=dbConfig[_0x3b948c(0x2f6)](_0x3b948c(0x1e1))[_0x3b948c(0x2d7)]({'botID':botID})['value']();_0xee6263&&dbConfig['get'](_0x3b948c(0x1e1))[_0x3b948c(0x2d7)]({'botID':botID})[_0x3b948c(0x13c)](config)['write']();}function logMemory(){const _0x5eed20=_0x1b2526;if(environment!='staging')return;const _0x5db3dd=process[_0x5eed20(0x1f4)]()[_0x5eed20(0x23a)]/0x400/0x400;logger[_0x5eed20(0x2df)](_0x5eed20(0x16d)+process[_0x5eed20(0x150)]+_0x5eed20(0x2c4)+formatResult(_0x5db3dd,0x1)+_0x5eed20(0x257));}async function startScheduler(){const _0xd3a489=_0x1b2526,_0x2feda0=shiftedTime()[_0xd3a489(0x1e5)]();getMarketCap(),loadSymbols(),_0x2feda0==0x1&&logMemory(),await sleep(schedulerInterval),startScheduler();}async function restartBot(_0x53ad38=![]){const _0x303e7c=_0x1b2526;logger['debug'](_0x303e7c(0x300));if(!_0x53ad38)while(lockOrders!=ORDERS[_0x303e7c(0x227)]||coolingDown){await sleep(0x3e8);}process[_0x303e7c(0x25a)]({'stop':_0x303e7c(0x282)},_0x5a8c12=>{});}async function initExchange(_0x1c7b21=config['exchange'],_0x5b342d=config['apiKey'],_0x431681=config['apiSecret'],_0x2ed38e=config['apiPassword'],_0x1035d5=config[_0x1b2526(0x1ca)]){const _0x209440=_0x1b2526;if(exchange){logger[_0x209440(0x2df)](_0x209440(0x2dc));return;}logger['debug'](_0x209440(0x2d6));!supportedExchanges()[_0x209440(0x160)](_0x1c7b21)&&(logHistory(_0x209440(0x18a),'Balance\x20Bot\x20does\x20not\x20support\x20the\x20'+_0x1c7b21+_0x209440(0x23c)),killBot());const _0x2cbbda=ccxt[_0x209440(0x220)][_0x1c7b21[_0x209440(0x23b)]()];exchange=new _0x2cbbda({'apiKey':_0x5b342d,'secret':_0x431681,'options':{'defaultType':_0x209440(0x2e4)}});if(_0x2ed38e)exchange[_0x209440(0x25e)]=_0x2ed38e;if(exchange[_0x209440(0x2bd)][_0x209440(0x1ca)])exchange[_0x209440(0x225)](_0x1035d5);if(_0x1c7b21[_0x209440(0x23b)]()==_0x209440(0x1b0))exchange['options'][_0x209440(0x1da)]=operatorId;}function updateExchange(_0x50a0a9,_0xfd9759,_0x20e1dd=null){const _0x4db2a0=_0x1b2526;exchange[_0x4db2a0(0x265)]=_0x50a0a9,exchange[_0x4db2a0(0x17a)]=_0xfd9759,exchange[_0x4db2a0(0x25e)]=_0x20e1dd,logger[_0x4db2a0(0x2df)](_0x4db2a0(0x19a));}function setStableCoins(){const _0x2c45ad=_0x1b2526;let _0x32cb60=config['basecoin']==_0x2c45ad(0x1e0)?_0x2c45ad(0x1e0):config[_0x2c45ad(0x287)]==_0x2c45ad(0x1bf)?'PAXG':'BTC',_0x4b3863=allSymbols[_0x2c45ad(0x160)](_0x32cb60+'/USD')?_0x2c45ad(0x2f9):allSymbols['includes'](_0x32cb60+'/USDT')?_0x2c45ad(0x1d8):'EUR',_0x433026=allSymbols[_0x2c45ad(0x160)](_0x32cb60+_0x2c45ad(0x1a2))?_0x2c45ad(0x266):_0x4b3863;enableFiatToggle=!![],_0x4b3863==_0x2c45ad(0x266)&&(enableFiatToggle=![],storeFiat(_0x2c45ad(0x266))),_0x433026!='EUR'&&(enableFiatToggle=![],storeFiat('USD')),stablecoins={'eur':{'coin':''+_0x32cb60+_0x433026,'symbol':_0x32cb60+'/'+_0x433026},'usd':{'coin':''+_0x32cb60+_0x4b3863,'symbol':_0x32cb60+'/'+_0x4b3863}};}async function initwsCcxt(){const _0x34e4a7=_0x1b2526;initCycle++;const _0x8e85d9=initCycle;let _0x469e3c=[];config[_0x34e4a7(0x1c2)][_0x34e4a7(0x157)](_0x51479e=>{const _0x1da1b2=_0x34e4a7;if(!_0x51479e[_0x1da1b2(0x1f3)]&&_0x51479e[_0x1da1b2(0x272)]!=config[_0x1da1b2(0x287)])_0x469e3c[_0x1da1b2(0x21d)](_0x51479e[_0x1da1b2(0x293)]);});if(!_0x469e3c['includes'](stablecoins[_0x34e4a7(0x1f8)][_0x34e4a7(0x293)]))_0x469e3c[_0x34e4a7(0x21d)](stablecoins[_0x34e4a7(0x1f8)][_0x34e4a7(0x293)]);if(!_0x469e3c['includes'](stablecoins[_0x34e4a7(0x2da)][_0x34e4a7(0x293)]))_0x469e3c[_0x34e4a7(0x21d)](stablecoins['usd'][_0x34e4a7(0x293)]);loadCoins(_0x469e3c),_0x469e3c=validateSymbols(_0x469e3c);const _0x116f94=async _0x41d580=>{const _0xb872f4=_0x34e4a7;let _0x496a78;try{const _0x56882b=await getTickers(_0x41d580);Object[_0xb872f4(0x1c1)](_0x56882b)[_0xb872f4(0x157)](_0x470b0c=>{const _0x4c1611=_0xb872f4;_0x496a78=_0x470b0c[0x1]['symbol'],gTicker[noslash(_0x496a78)]=_0x470b0c[0x1][_0x4c1611(0x2ee)],gChange[_0x496a78]=_0x470b0c[0x1][_0x4c1611(0x2fe)];});}catch(_0x2a7783){await handleError(_0x2a7783,_0xb872f4(0x21a),_0x496a78);}},_0x9d952b=async _0xc3255c=>{const _0x36c1cd=_0x34e4a7;while(initCycle==_0x8e85d9){if(!botPaused)try{const _0x439a04=await exchange['watchTrades'](_0xc3255c);gTicker[noslash(_0x439a04[0x0][_0x36c1cd(0x293)])]=_0x439a04[0x0][_0x36c1cd(0x169)];}catch(_0x45d785){if(!exchangeStopped)await handleError(_0x45d785,'watchTrades()',_0xc3255c);}else await sleep(0x64);}},_0x2ff04b=async _0x4eb09d=>{const _0x1b0316=_0x34e4a7;while(initCycle==_0x8e85d9){if(!botPaused)try{const _0x515ca2=await exchange[_0x1b0316(0x2ff)](_0x4eb09d),_0x456c19=_0x515ca2[_0x1b0316(0x2dd)]();gTicker[noslash(_0x456c19[_0x1b0316(0x293)])]=_0x456c19[_0x1b0316(0x169)];}catch(_0x1cc9ee){if(!exchangeStopped)await handleError(_0x1cc9ee,'watchTradesForSymbols()',_0x4eb09d[_0x1b0316(0x236)]());}else await sleep(0x64);}},_0x2b3aa5=async _0x3996fe=>{const _0x3a801a=_0x34e4a7;while(initCycle==_0x8e85d9){if(!botPaused){let _0x598f47;try{await sleep(0x3c*0x3e8);const _0x310c8e=await getTickers(_0x3996fe);Object[_0x3a801a(0x1c1)](_0x310c8e)[_0x3a801a(0x157)](_0x4be7e4=>{const _0x4d07ca=_0x3a801a;_0x598f47=_0x4be7e4[0x1][_0x4d07ca(0x293)],gChange[_0x598f47]=_0x4be7e4[0x1][_0x4d07ca(0x2fe)];});}catch(_0x364140){if(!exchangeStopped)await handleError(_0x364140,'fetchTickers()',_0x598f47);}}else await sleep(0x64);}},_0x44fc98=async _0x290c95=>{const _0x4d6c35=_0x34e4a7;while(initCycle==_0x8e85d9){if(!botPaused)try{const _0xcf49a3=await exchange['watchOrders'](_0x290c95);initCycle==_0x8e85d9&&_0xcf49a3[_0x4d6c35(0x157)](_0x3efd0a=>{updateNumberCoinsCcxt(_0x3efd0a);});}catch(_0x1c6115){if(!exchangeStopped)await handleError(_0x1c6115,'watchOrders()');}else await sleep(0x64);}};_0x116f94(_0x469e3c),_0x2b3aa5(_0x469e3c),exchange[_0x34e4a7(0x2bd)]['watchTradesForSymbols']&&!(config[_0x34e4a7(0x2e1)]=='Bybit'&&_0x469e3c['length']>0xa)?_0x2ff04b(_0x469e3c):_0x469e3c['forEach'](_0x34cfcd=>{_0x9d952b(_0x34cfcd);}),_0x469e3c['forEach'](_0x50d1fd=>{_0x44fc98(_0x50d1fd);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x4c45d7){const _0xc043bb=_0x1b2526;let _0x2353ca={};try{if(config[_0xc043bb(0x2e1)]!=_0xc043bb(0x191))_0x2353ca=await exchange[_0xc043bb(0x16b)](_0x4c45d7);else for(const _0x508bea of _0x4c45d7){const _0x2bc175=await exchange[_0xc043bb(0x2e9)](_0x508bea);_0x2353ca[_0x508bea]=_0x2bc175;}return _0x2353ca;}catch(_0x4dfb4a){throw _0x4dfb4a;}}function setBlockTransactionDetection(_0x2dbd0f){const _0x5d9fa2=_0x1b2526;blockTransactionDetection=_0x2dbd0f,logger[_0x5d9fa2(0x2df)]('Block\x20transaction\x20detection:\x20'+blockTransactionDetection);}async function detectLiquidityChange(_0x161e41=0x0){const _0x2ad3ba=_0x1b2526;transactionDetectionOngoing=!![];try{const _0x18f794=await getCoins(_0x161e41),[_0x395c31,_0x5d50d7]=_0x18f794;let _0x483361=[];currentCoins['forEach'](_0x47c6cb=>{const _0x58b37e=_0x167b,_0x46d099=_0x395c31[_0x58b37e(0x2d7)](_0x12217b=>_0x12217b['coin']==_0x47c6cb['coin']);if(_0x46d099){if(_0x47c6cb['number']!=_0x46d099[_0x58b37e(0x143)]){let _0x5d599e;if(_0x47c6cb[_0x58b37e(0x272)]!=config[_0x58b37e(0x287)]){const _0x117558=gTicker[noslash(_0x47c6cb['symbol'])];_0x5d599e=_0x47c6cb[_0x58b37e(0x186)]?0x1/_0x117558:_0x117558;}else _0x5d599e=0x1;_0x483361[_0x58b37e(0x21d)]({'coin':_0x47c6cb[_0x58b37e(0x272)],'symbol':_0x47c6cb['symbol'],'price':_0x5d599e,'number':Number(formatResult(_0x46d099[_0x58b37e(0x143)]-_0x47c6cb[_0x58b37e(0x143)],0x8)),'basecoinvalue':_0x5d599e*(_0x46d099[_0x58b37e(0x143)]-_0x47c6cb[_0x58b37e(0x143)])});}}});if(_0x483361[_0x2ad3ba(0x267)]>0x0&&!blockTransactionDetection){for(const _0x528c0c of _0x483361){if(config[_0x2ad3ba(0x1a8)]){logger['debug'](_0x2ad3ba(0x1d2)+_0x528c0c['basecoinvalue']+_0x2ad3ba(0x2b2)+lastFees['highest']);if(lastFees[_0x2ad3ba(0x2d8)]==0x0||Math['abs'](_0x528c0c['basecoinvalue'])>lastFees['highest']*0x3){if(config[_0x2ad3ba(0x1a8)]==_0x2ad3ba(0x1dd)){delete _0x528c0c[_0x2ad3ba(0x293)],delete _0x528c0c[_0x2ad3ba(0x1b8)];let _0x10f32a=[],_0x145716=[...config[_0x2ad3ba(0x2fc)]]||[],_0x201366=config[_0x2ad3ba(0x2fc)];_0x145716['sort']((_0xdb73d4,_0x2a686e)=>_0xdb73d4['date']>_0x2a686e['date']?-0x1:_0x2a686e['date']>_0xdb73d4[_0x2ad3ba(0x285)]?0x1:0x0);const _0x58e6a0=getDate();if(_0x145716[0x0]){const _0x1266aa=fns['parse'](_0x145716[0x0][_0x2ad3ba(0x285)],'yyyy/MM/dd',new Date()),_0x524e90=fns[_0x2ad3ba(0x210)](_0x58e6a0,_0x2ad3ba(0x2b5),new Date());if(fns[_0x2ad3ba(0x201)](_0x1266aa,_0x524e90)){_0x10f32a=_0x145716[0x0][_0x2ad3ba(0x14c)];const _0x47fc6f=_0x10f32a[_0x2ad3ba(0x2d7)](_0x1cc369=>_0x1cc369[_0x2ad3ba(0x272)]==_0x528c0c[_0x2ad3ba(0x272)]);_0x47fc6f?(_0x47fc6f[_0x2ad3ba(0x143)]+=_0x528c0c['number'],_0x47fc6f[_0x2ad3ba(0x143)]==0x0&&(_0x10f32a=_0x10f32a[_0x2ad3ba(0x14a)](_0x3889e8=>{const _0x16b2f4=_0x2ad3ba;return _0x3889e8[_0x16b2f4(0x272)]!=_0x528c0c[_0x16b2f4(0x272)];}))):_0x10f32a['push'](_0x528c0c);const _0x36ca44=_0x201366['find'](_0x516cf1=>_0x516cf1['date']==_0x58e6a0);_0x36ca44['changes']=_0x10f32a;}else _0x201366[_0x2ad3ba(0x21d)]({'date':_0x58e6a0,'changes':[_0x528c0c]});}const _0xd16d97=_0x201366['find'](_0x50004d=>_0x50004d[_0x2ad3ba(0x285)]==_0x58e6a0);if(_0xd16d97){let _0x221465=!![];_0xd16d97[_0x2ad3ba(0x14c)][_0x2ad3ba(0x157)](_0x2eda93=>{if(_0x2eda93['number']!=0x0)_0x221465=![];}),_0x221465&&(_0x201366=_0x201366[_0x2ad3ba(0x14a)](_0x4feaae=>{const _0x5d4d8e=_0x2ad3ba;return _0x4feaae[_0x5d4d8e(0x285)]!=_0x58e6a0;}));}let _0x4b296d=dbConfig[_0x2ad3ba(0x2f6)](_0x2ad3ba(0x1e1))['find']({'botID':botID})[_0x2ad3ba(0x2cb)]();_0x4b296d&&(dbConfig['get'](_0x2ad3ba(0x1e1))[_0x2ad3ba(0x2d7)]({'botID':botID})[_0x2ad3ba(0x13c)]({'liquidity':_0x201366})[_0x2ad3ba(0x21c)](),config['liquidity']=_0x201366);logHistory(_0x2ad3ba(0x22b),_0x2ad3ba(0x215)+Math['abs'](_0x528c0c[_0x2ad3ba(0x143)])+'\x20'+_0x528c0c[_0x2ad3ba(0x272)]+'\x20'+(_0x528c0c[_0x2ad3ba(0x143)]>0x0?'added':_0x2ad3ba(0x261))+_0x2ad3ba(0x306)),proxyEmit(_0x2ad3ba(0x245),emittedConfiguration());const _0x37ae55=getNormalizedPerformance();emitPerformance(_0x37ae55),getStartingBalances(_0x37ae55),logger[_0x2ad3ba(0x2df)](_0x2ad3ba(0x24c));}else config[_0x2ad3ba(0x1a8)]==_0x2ad3ba(0x1c7)&&(config['headless']?(await storeHeadless({'headless':![]}),logHistory('success',_0x2ad3ba(0x215)+Math['abs'](_0x528c0c['number'])+'\x20'+_0x528c0c[_0x2ad3ba(0x272)]+'\x20'+(_0x528c0c[_0x2ad3ba(0x143)]>0x0?_0x2ad3ba(0x2b7):_0x2ad3ba(0x261))+_0x2ad3ba(0x2e7))):logger[_0x2ad3ba(0x2df)](_0x2ad3ba(0x215)+Math[_0x2ad3ba(0x2c2)](_0x528c0c[_0x2ad3ba(0x143)])+'\x20'+_0x528c0c[_0x2ad3ba(0x272)]+'\x20'+(_0x528c0c[_0x2ad3ba(0x143)]>0x0?'added':_0x2ad3ba(0x261))+_0x2ad3ba(0x20e)));}else logger[_0x2ad3ba(0x2df)](_0x2ad3ba(0x298)+Math['abs'](_0x528c0c[_0x2ad3ba(0x143)])+'\x20'+_0x528c0c[_0x2ad3ba(0x272)]+'\x20'+(_0x528c0c[_0x2ad3ba(0x143)]>0x0?'added':_0x2ad3ba(0x261)));}else logger['debug'](_0x2ad3ba(0x215)+Math[_0x2ad3ba(0x2c2)](_0x528c0c['number'])+'\x20'+_0x528c0c[_0x2ad3ba(0x272)]+'\x20'+(_0x528c0c['number']>0x0?_0x2ad3ba(0x2b7):'removed')+'\x20-\x20auto\x20adjusting\x20liquidity\x20is\x20disabled');}currentCoins=_0x395c31,currentCoinsAll=_0x5d50d7;}}catch(_0x36f937){if(!exchangeStopped)await handleError(_0x36f937,_0x2ad3ba(0x163));}transactionDetectionOngoing=![];}async function watchTransactions(){await sleep(0x14*0x3e8);while(!![]){!botPaused&&!blockTransactionDetection&&coinsLoaded?(detectLiquidityChange(),await sleep(watchTransactionsInterval)):await sleep(0x3e8);}}async function loadSymbols(){const _0x4ce42b=_0x1b2526;try{markets=await exchange[_0x4ce42b(0x29b)](!![]),allSymbols=[],Object[_0x4ce42b(0x1c1)](markets)[_0x4ce42b(0x157)](_0x53d0af=>{const _0x2e580b=_0x4ce42b;_0x53d0af[0x1][_0x2e580b(0x304)]&&_0x53d0af[0x1][_0x2e580b(0x2e4)]&&allSymbols[_0x2e580b(0x21d)](_0x53d0af[0x0]);});}catch(_0x371b87){markets?logger[_0x4ce42b(0x2df)]('Error\x20in\x20loadSymbols():\x20'+_0x371b87[_0x4ce42b(0x236)]()):(loading['cancel']=!![],_0x371b87[_0x4ce42b(0x236)]()['toLowerCase']()[_0x4ce42b(0x160)](_0x4ce42b(0x173))||_0x371b87[_0x4ce42b(0x236)]()[_0x4ce42b(0x23b)]()[_0x4ce42b(0x160)](_0x4ce42b(0x2ea))?(logHistory('error',_0x4ce42b(0x2d5)),loading[_0x4ce42b(0x18a)]='timestamp-issue'):handleErrorNoStop(_0x371b87,'loadSymbols()',!![]),logHistory('error','Failed\x20to\x20load\x20market\x20data\x20-\x20bot\x20not\x20started'),logHistory(_0x4ce42b(0x18a),_0x4ce42b(0x1c5)+loadCoinsRetryInterval/0xea60+'\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again'),logger[_0x4ce42b(0x2df)]('Error\x20details:',_0x371b87),emitLoadingProgress(),botPaused=!![],await sleep(loadCoinsRetryInterval),restartBot());}}function validateSymbols(_0xd3d781){let _0x3ab506=[];return _0xd3d781['forEach'](_0x19e359=>{const _0x2b618b=_0x167b;!allSymbols[_0x2b618b(0x160)](_0x19e359)?(logHistory(_0x2b618b(0x18a),_0x2b618b(0x1ed)+_0x19e359+_0x2b618b(0x311)),loading[_0x2b618b(0x1d1)]=!![],emitLoadingProgress()):_0x3ab506['push'](_0x19e359);}),_0x3ab506;}async function initclient(){const _0x2801ef=_0x1b2526;proxyEmit(_0x2801ef(0x245),emittedConfiguration()),proxyEmit(_0x2801ef(0x2eb),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x6a5db1=getNormalizedPerformance();emitPerformance(_0x6a5db1),getStartingBalances(_0x6a5db1);}async function toggleBotMode(){const _0x534508=_0x1b2526;let _0x2f6bb2=dbConfig[_0x534508(0x2f6)](_0x534508(0x1e1))[_0x534508(0x2d7)]({'botID':botID})[_0x534508(0x2cb)]();if(_0x2f6bb2){const _0x1a94c7=!_0x2f6bb2[_0x534508(0x278)];dbConfig[_0x534508(0x2f6)](_0x534508(0x1e1))[_0x534508(0x2d7)]({'botID':botID})['assign']({'headless':_0x1a94c7})['write'](),config[_0x534508(0x278)]=_0x1a94c7,proxyEmit(_0x534508(0x245),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x5bfcd6=_0x1b2526;process[_0x5bfcd6(0x25a)]({'updatebotmanager':!![]},_0x40d524=>{}),logger[_0x5bfcd6(0x2df)](_0x5bfcd6(0x2f3)+config[_0x5bfcd6(0x278)]);}async function loadCoins(_0x5aa5d9){const _0x2f6ff0=_0x1b2526;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x25153b,_0x226620=0x0,_0x54a8d1=0x0;_0x5aa5d9[_0x2f6ff0(0x157)](_0x2610b6=>{const _0x303c86=_0x2f6ff0;loading[_0x303c86(0x177)][_0x303c86(0x21d)](_0x2610b6);}),loadingCanceled=![];let _0x2ebccc=![];while(_0x25153b!=_0x5aa5d9[_0x2f6ff0(0x267)]+maxLoadingProgress){_0x25153b=loadingProgress,_0x5aa5d9[_0x2f6ff0(0x157)](_0x173ad1=>{const _0x203fc0=_0x2f6ff0;if(gTicker[noslash(_0x173ad1)]){loading[_0x203fc0(0x177)]=loading['remainingSymbols'][_0x203fc0(0x14a)](_0x5569b1=>_0x5569b1!=_0x173ad1);if(!watchedSymbols[_0x203fc0(0x160)](_0x173ad1))watchedSymbols[_0x203fc0(0x21d)](_0x173ad1);_0x25153b++;}}),loading[_0x2f6ff0(0x2a5)]=Math['round'](_0x25153b/(_0x5aa5d9[_0x2f6ff0(0x267)]+maxLoadingProgress)*0x64);loading[_0x2f6ff0(0x2a5)]!=0x64&&(_0x54a8d1>0x1e*0x5&&(loading[_0x2f6ff0(0x1d1)]=!![],emitLoadingProgress()),_0x54a8d1>0x78*0x5&&!_0x2ebccc&&(_0x2ebccc=!![],logHistory(_0x2f6ff0(0x18a),'Failed\x20to\x20load\x20coin\x20data\x20for\x20'+loading[_0x2f6ff0(0x177)][_0x2f6ff0(0x139)](',\x20')+_0x2f6ff0(0x179)),logHistory(_0x2f6ff0(0x18a),_0x2f6ff0(0x1c5)+loadCoinsRetryInterval/0xea60+_0x2f6ff0(0x1f2)),loadingCanceled=!![],await sleep(loadCoinsRetryInterval),restartBot()));if(loadingCanceled){loading['cancel']=!![],emitLoadingProgress();break;}else _0x226620!=loading[_0x2f6ff0(0x2a5)]&&(_0x226620=loading[_0x2f6ff0(0x2a5)],emitLoadingProgress()),_0x54a8d1++,await sleep(0xc8);}_0x25153b==_0x5aa5d9[_0x2f6ff0(0x267)]+maxLoadingProgress&&(coinsLoaded=!![],process[_0x2f6ff0(0x25a)]({'status':_0x2f6ff0(0x1be),'live':_0x2f6ff0(0x2fa)},_0x1fdc79=>{}),_0x2ebccc&&logHistory(_0x2f6ff0(0x22b),_0x2f6ff0(0x184)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0xc924e5=_0x1b2526;proxyEmit(_0xc924e5(0x245),{...emittedConfiguration(),'configstate':_0xc924e5(0x20d)});}function emitLoadingProgress(){const _0x299d30=_0x1b2526;proxyEmit(_0x299d30(0x1d7),loading);}async function getFiat(){const _0x58c354=_0x1b2526;let _0x367f36=gTicker[stablecoins[_0x58c354(0x1f8)]['coin']],_0xf55bd0=gTicker[stablecoins[_0x58c354(0x2da)]['coin']];return{'eur':Number(_0x367f36),'usd':Number(_0xf55bd0)};}function capitalize(_0x311f66){const _0xac99=_0x1b2526;return _0x311f66[_0xac99(0x13a)](0x0,0x1)[_0xac99(0x29f)]()+_0x311f66[_0xac99(0x13a)](0x1);}function supportedExchanges(){const _0x47bdf2=_0x1b2526,_0x4f4e2f=['ws',_0x47bdf2(0x16b),_0x47bdf2(0x2e9),_0x47bdf2(0x192),_0x47bdf2(0x30e),_0x47bdf2(0x242),'createOrder',_0x47bdf2(0x2de),_0x47bdf2(0x26b)];let _0x146aaf=[],_0xf49f4b=[],_0x5a4c8f=ccxt[_0x47bdf2(0x220)]['exchanges'];_0x5a4c8f[_0x47bdf2(0x157)](_0x1ecd23=>{const _0x54c3e0=_0x47bdf2;try{const _0x2dba1a=new ccxt[(_0x54c3e0(0x220))][_0x1ecd23]();_0xf49f4b[_0x54c3e0(0x21d)](_0x2dba1a);}catch(_0x163861){}}),_0xf49f4b[_0x47bdf2(0x157)](_0x1b5f32=>{const _0x24e90e=_0x47bdf2;let _0x4d3a76=0x0;_0x4f4e2f[_0x24e90e(0x157)](_0x324d7e=>{_0x324d7e in _0x1b5f32['has']&&_0x1b5f32['has'][_0x324d7e]&&_0x4d3a76++;}),_0x4d3a76==_0x4f4e2f[_0x24e90e(0x267)]&&(!excludedExchanges[_0x24e90e(0x160)](_0x1b5f32['id'])&&_0x146aaf[_0x24e90e(0x21d)](capitalize(_0x1b5f32['id'])));});let _0x882d28=[];return _0x5a4c8f[_0x47bdf2(0x157)](_0x435ea2=>{const _0x440b56=_0x47bdf2;_0x435ea2=capitalize(_0x435ea2);if(!_0x146aaf[_0x440b56(0x160)](_0x435ea2))_0x882d28[_0x440b56(0x21d)](_0x435ea2);}),_0x146aaf;}function setStartDatePerformance(){const _0x44d586=_0x1b2526;if(config&&config[_0x44d586(0x2fc)][0x0][_0x44d586(0x14c)][_0x44d586(0x267)]!=0x0){const _0x501887=config[_0x44d586(0x2fc)][0x0][_0x44d586(0x14c)];dbPerformance[_0x44d586(0x2f6)](_0x44d586(0x1fc))[_0x44d586(0x2d7)]({'date':config[_0x44d586(0x28e)]})[_0x44d586(0x13c)]({'coins':_0x501887})[_0x44d586(0x21c)]();}}function calculatePnL(_0x3ed674,_0x579478,_0x3cc12b,_0x57e4ec,_0x3b0dc0,_0x323cbf){const _0x681a1c=_0x1b2526;!_0x3ed674['includes']('/'+config[_0x681a1c(0x287)])&&(_0x3cc12b=_0x3cc12b=='buy'?_0x681a1c(0x1b4):_0x681a1c(0x193));!_0x323cbf[_0x579478]&&(_0x323cbf[_0x579478]={'number':0x0,'sells':0x0,'buys':0x0,'breakeven':0x0,'realizedPnL':0x0});let _0x34dddc=0x0,_0xd97451,_0x35b2d9;if(_0x3cc12b==_0x681a1c(0x193))_0x35b2d9=_0x323cbf[_0x579478][_0x681a1c(0x143)]*_0x323cbf[_0x579478][_0x681a1c(0x2b6)]+_0x3b0dc0*_0x57e4ec,_0x323cbf[_0x579478][_0x681a1c(0x143)]+=_0x57e4ec,_0x323cbf[_0x579478][_0x681a1c(0x2b6)]=_0x323cbf[_0x579478][_0x681a1c(0x143)]!=0x0?_0x35b2d9/_0x323cbf[_0x579478][_0x681a1c(0x143)]:0x0,_0x323cbf[_0x579478][_0x681a1c(0x158)]++;else _0x3cc12b=='sell'&&(_0xd97451=Math[_0x681a1c(0x2e6)](_0x323cbf[_0x579478][_0x681a1c(0x143)],_0x57e4ec),_0x34dddc=(_0x3b0dc0-_0x323cbf[_0x579478][_0x681a1c(0x2b6)])*_0xd97451,_0x35b2d9=Math[_0x681a1c(0x141)](_0x323cbf[_0x579478][_0x681a1c(0x143)]*_0x323cbf[_0x579478][_0x681a1c(0x2b6)]-_0xd97451*_0x323cbf[_0x579478][_0x681a1c(0x2b6)],0x0),_0x323cbf[_0x579478][_0x681a1c(0x143)]-=_0xd97451,_0x323cbf[_0x579478][_0x681a1c(0x2b6)]=_0x323cbf[_0x579478][_0x681a1c(0x143)]!=0x0?_0x35b2d9/_0x323cbf[_0x579478]['number']:0x0,_0x323cbf[_0x579478][_0x681a1c(0x2c7)]+=_0x34dddc,_0x323cbf[_0x579478]['sells']++);return _0x34dddc;}async function generatePnL(){const _0x51d846=_0x1b2526;pnlGenerationNeeded=![],logger[_0x51d846(0x2df)](_0x51d846(0x2c0));const _0x749ea1=dbLogs[_0x51d846(0x2f6)](_0x51d846(0x30f))[_0x51d846(0x2cb)]();let _0xc54a7d={},_0x2b8e1d=0x0,_0x4139fb=0x0,_0x2df56a=config[_0x51d846(0x28e)];const _0x548eb7=fns[_0x51d846(0x210)](_0x2df56a,'yyyy/MM/dd',new Date()),_0x1d31b9=new Date();let _0x39c49b=0x0;for(let _0xce2e11=_0x548eb7;!fns['isBefore'](_0x1d31b9,_0xce2e11);_0xce2e11=fns[_0x51d846(0x2e8)](_0xce2e11,0x1)){const _0x23b340=fns['format'](_0xce2e11,_0x51d846(0x2b5));while(_0x2b8e1d<_0x749ea1[_0x51d846(0x267)]){const _0x3f18e4=new Date(_0x749ea1[_0x2b8e1d]['time']);if(fns[_0x51d846(0x1dc)](_0x3f18e4,_0xce2e11))_0x2b8e1d++;else{if(_0x749ea1[_0x2b8e1d][_0x51d846(0x1ae)][_0x51d846(0x160)](_0x23b340)){const _0x21f0b3=_0x749ea1[_0x2b8e1d];if(_0x21f0b3[_0x51d846(0x178)]===_0x51d846(0x2d0)&&(_0x21f0b3['event'][_0x51d846(0x160)](_0x51d846(0x1b6))||_0x21f0b3[_0x51d846(0x148)][_0x51d846(0x160)](_0x51d846(0x263)))){const _0x1eb30e=_0x21f0b3['event'][_0x51d846(0x20c)](/([A-Z]+\/[A-Z]+) (sell|buy) #([\d.]+) @([\d.]+)/);if(_0x1eb30e){const [,_0x59ac80,_0x67f93e,_0x229cbf,_0x2dfc68]=_0x1eb30e,_0x2e6167=_0x59ac80['includes']('/'+config[_0x51d846(0x287)])?_0x59ac80[_0x51d846(0x270)]('/')[0x0]:_0x59ac80[_0x51d846(0x270)]('/')[0x1],_0x58886b=calculatePnL(_0x59ac80,_0x2e6167,_0x67f93e,parseFloat(_0x229cbf),parseFloat(_0x2dfc68),_0xc54a7d);_0x4139fb+=_0x58886b;}}_0x2b8e1d++;}else break;}}dbPerformance[_0x51d846(0x2f6)](_0x51d846(0x1fc))['find']({'date':_0x23b340})['assign']({'pnl':_0x4139fb})['write']();}dbCoinResults[_0x51d846(0x2a1)](_0x51d846(0x1b1),_0xc54a7d)[_0x51d846(0x21c)](),logger['debug'](_0x51d846(0x1ba));const _0x111a91=getNormalizedPerformance();emitPerformance(_0x111a91);}async function updatePnL(_0x55fccf){const _0x2ab456=_0x1b2526,{symbol:_0x194db9,coin:_0x52c0aa,amount:_0x4765f8,price:_0x540c80,side:_0x5184a1,reverse:_0x2d104e}=_0x55fccf;let _0x495b10=dbCoinResults[_0x2ab456(0x2f6)](_0x2ab456(0x1b1))[_0x2ab456(0x2cb)]();const _0x564303=calculatePnL(_0x194db9,_0x52c0aa,_0x5184a1,_0x4765f8,_0x540c80,_0x495b10);dbCoinResults[_0x2ab456(0x2a1)](_0x2ab456(0x1b1),_0x495b10)['write']();const _0x32d0c2=getTimeStamp()[_0x2ab456(0x270)]('\x20')[0x0];let _0x3b9d24=dbPerformance[_0x2ab456(0x2f6)]('data')['find']({'date':_0x32d0c2})['value']();_0x3b9d24?(_0x3b9d24[_0x2ab456(0x255)]+=_0x564303,dbPerformance[_0x2ab456(0x2f6)](_0x2ab456(0x1fc))[_0x2ab456(0x2d7)]({'date':_0x32d0c2})[_0x2ab456(0x13c)](_0x3b9d24)[_0x2ab456(0x21c)]()):await storePerformance();const _0x2e3098=getNormalizedPerformance();emitPerformance(_0x2e3098);}async function validate24hChanges(){const _0x2d0cf7=_0x1b2526;for(const _0x3a4777 of currentCoins){if(_0x3a4777['coin']!=config[_0x2d0cf7(0x287)]){let _0x488837;_0x3a4777[_0x2d0cf7(0x186)]?_0x488837=formatResult((0x1/(gChange[_0x3a4777[_0x2d0cf7(0x293)]]/0x64+0x1)-0x1)*0x64,0x3):_0x488837=gChange[_0x3a4777[_0x2d0cf7(0x293)]],_0x488837<config[_0x2d0cf7(0x2b0)]&&(logHistory(_0x2d0cf7(0x18a),_0x3a4777[_0x2d0cf7(0x272)]+_0x2d0cf7(0x235)+_0x488837+'%'),logHistory(_0x2d0cf7(0x18a),_0x2d0cf7(0x289)),logHistory(_0x2d0cf7(0x18a),_0x2d0cf7(0x1a9)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x24ced3,_0x3efc04){const _0x31b845=_0x1b2526;if(!_0x24ced3)return!![];const _0x41d940=_0x3efc04['split']('.'),_0x2b3e08=_0x24ced3[_0x31b845(0x270)]('.');for(var _0x4eafb9=0x0;_0x4eafb9<_0x2b3e08[_0x31b845(0x267)];_0x4eafb9++){const _0xc075bc=~~_0x2b3e08[_0x4eafb9],_0x14b0bf=~~_0x41d940[_0x4eafb9];if(_0xc075bc<_0x14b0bf)return!![];if(_0xc075bc>_0x14b0bf)return![];}return![];}async function oneTimeMigration(){const _0x27f289=_0x1b2526;let _0x4efe9a=dbLogs[_0x27f289(0x2f6)]('version')[_0x27f289(0x2cb)]();if(isOlderVersion(_0x4efe9a,_0x27f289(0x147))){let _0x1c3c32=[];const _0x5d43f2=dbLogs[_0x27f289(0x2f6)](_0x27f289(0x30f))['value']();_0x5d43f2[_0x27f289(0x157)](_0x5d0df2=>{const _0x31219a=_0x27f289;_0x1c3c32[_0x31219a(0x21d)]({'time':_0x5d0df2[_0x31219a(0x1ae)],'type':_0x5d0df2[_0x31219a(0x178)],'event':_0x5d0df2[_0x31219a(0x148)]});}),dbLogs['get']('logs')[_0x27f289(0x13c)](_0x1c3c32)[_0x27f289(0x21c)]();}let _0x4adf1e=dbConfig[_0x27f289(0x2f6)](_0x27f289(0x231))[_0x27f289(0x2cb)]();if(isOlderVersion(_0x4adf1e,_0x27f289(0x147))){let _0x26ec16=dbConfig[_0x27f289(0x2f6)](_0x27f289(0x1e1))['find']({'botID':botID})['value']();if(_0x26ec16){let _0x4faf55=[];_0x26ec16[_0x27f289(0x1c2)][_0x27f289(0x157)](_0x1679cd=>{const _0x52bcfe=_0x27f289;_0x4faf55[_0x52bcfe(0x21d)]({'coin':_0x1679cd[_0x52bcfe(0x272)],'number':_0x1679cd[_0x52bcfe(0x28b)],'price':_0x1679cd[_0x52bcfe(0x1de)]}),delete _0x1679cd[_0x52bcfe(0x28b)],delete _0x1679cd['startprice'];});if(_0x4faf55['length']!==0x0)fs[_0x27f289(0x15c)](configbackuppath+('starting-balance-'+botID+_0x27f289(0x305)),JSON[_0x27f289(0x1d5)](_0x4faf55,null,0x4),function(_0x5612e1){if(_0x5612e1){}});const _0x5982f0=(_0x236e41,_0x15bfad)=>{const _0x3cc9ab=_0x27f289;let _0x50b096=[];_0x15bfad[_0x3cc9ab(0x157)](_0x6f736d=>{const _0x346ad4=_0x3cc9ab,_0x4103ff=_0x236e41[_0x346ad4(0x2d7)](_0x4a81a2=>_0x4a81a2[_0x346ad4(0x272)]==_0x6f736d['coin']);if(!_0x4103ff)_0x50b096['push'](_0x6f736d);});let _0x206219=[];return _0x236e41[_0x3cc9ab(0x157)](_0x15e04e=>{const _0x2ee3b5=_0x3cc9ab,_0x9c3019=_0x15bfad[_0x2ee3b5(0x2d7)](_0xbf7769=>_0xbf7769[_0x2ee3b5(0x272)]==_0x15e04e[_0x2ee3b5(0x272)]);if(!_0x9c3019||_0x9c3019['number']==0x0&&_0x15e04e[_0x2ee3b5(0x143)]!=0x0)_0x206219[_0x2ee3b5(0x21d)](_0x15e04e);}),{'missingDay1':_0x50b096,'notInDay2':_0x206219};},_0x3055ed=dbPerformance['get'](_0x27f289(0x1fc))[_0x27f289(0x180)]()[_0x27f289(0x2cb)]();if(_0x3055ed['length']>0x1){const {missingDay1:_0x47e0b4,notInDay2:_0xaf6875}=_0x5982f0(_0x4faf55,_0x3055ed[0x1]['coins']);_0x4faf55=[..._0x4faf55,..._0x47e0b4],_0xaf6875[_0x27f289(0x157)](_0x5f4fdd=>{const _0x504f00=_0x27f289;let _0x45b344=_0x4faf55[_0x504f00(0x159)](_0x156b54=>_0x156b54[_0x504f00(0x272)]==_0x5f4fdd[_0x504f00(0x272)]);_0x45b344!=-0x1&&_0x4faf55[_0x504f00(0x246)](_0x45b344,0x1);});}_0x4faf55[_0x27f289(0x19b)]((_0x171333,_0x291281)=>_0x171333['coin']>_0x291281[_0x27f289(0x272)]?0x1:_0x291281[_0x27f289(0x272)]>_0x171333['coin']?-0x1:0x0);let _0x134e3d=[{'date':_0x26ec16['startdate'],'changes':_0x4faf55}];_0x3055ed[_0x27f289(0x267)]>0x2&&_0x3055ed['forEach']((_0x48af3b,_0x31e180)=>{const _0xb470c0=_0x27f289;if(_0x31e180>0x0&&_0x31e180<_0x3055ed[_0xb470c0(0x267)]-0x1){const {missingDay1:_0x4bb046,notInDay2:_0x3751f5}=_0x5982f0(_0x3055ed[_0x31e180][_0xb470c0(0x1b1)],_0x3055ed[_0x31e180+0x1]['coins']);_0x4faf55=[],(_0x4bb046[_0xb470c0(0x267)]!=0x0||_0x3751f5[_0xb470c0(0x267)]!=0x0)&&(_0x4bb046[_0xb470c0(0x267)]!=0x0&&_0x4faf55['push'](..._0x4bb046),_0x3751f5[_0xb470c0(0x267)]!=0x0&&(_0x3751f5[_0xb470c0(0x157)](_0x4d6f67=>{const _0x54a5dc=_0xb470c0;_0x4d6f67[_0x54a5dc(0x143)]=-_0x4d6f67['number'];}),_0x4faf55[_0xb470c0(0x21d)](..._0x3751f5)),_0x4faf55[_0xb470c0(0x19b)]((_0x6deb61,_0x4a05d8)=>_0x6deb61[_0xb470c0(0x272)]>_0x4a05d8['coin']?0x1:_0x4a05d8[_0xb470c0(0x272)]>_0x6deb61[_0xb470c0(0x272)]?-0x1:0x0),_0x134e3d['push']({'date':_0x3055ed[_0x31e180+0x1]['date'],'changes':_0x4faf55}));}}),dbConfig[_0x27f289(0x2f6)](_0x27f289(0x1e1))[_0x27f289(0x2d7)]({'botID':botID})['assign']({..._0x26ec16,'liquidity':_0x134e3d})[_0x27f289(0x21c)]();}}if(isOlderVersion(_0x4adf1e,_0x27f289(0x1db))){let _0x4b3bf0=dbConfig[_0x27f289(0x2f6)](_0x27f289(0x1e1))[_0x27f289(0x2d7)]({'botID':botID})['value']();if(_0x4b3bf0){const _0x28897c=_0x4b3bf0[_0x27f289(0x2e1)],_0x463515=_0x28897c?capitalize(_0x28897c):'Binance';dbConfig[_0x27f289(0x2f6)]('bot')[_0x27f289(0x2d7)]({'botID':botID})[_0x27f289(0x13c)]({'exchange':_0x463515})[_0x27f289(0x21c)]();}}if(isOlderVersion(_0x4adf1e,_0x27f289(0x2d2))){let _0x526dff=dbConfig[_0x27f289(0x2f6)](_0x27f289(0x1e1))[_0x27f289(0x2d7)]({'botID':botID})[_0x27f289(0x2cb)]();if(_0x526dff){const _0x4d472b=_0x526dff[_0x27f289(0x170)],_0x21dbfe=_0x4d472b?_0x27f289(0x171):![];dbConfig[_0x27f289(0x2f6)]('bot')[_0x27f289(0x2d7)]({'botID':botID})[_0x27f289(0x13c)]({'marketcapEnabled':_0x21dbfe})[_0x27f289(0x21c)]();}}if(isOlderVersion(_0x4adf1e,_0x27f289(0x25f))){let _0x2fea90=dbConfig[_0x27f289(0x2f6)](_0x27f289(0x1e1))[_0x27f289(0x2d7)]({'botID':botID})[_0x27f289(0x2cb)]();if(_0x2fea90){const _0x5c43a4=_0x2fea90[_0x27f289(0x1a8)],_0x6d6c9b=_0x5c43a4?_0x27f289(0x1dd):![];dbConfig['get'](_0x27f289(0x1e1))[_0x27f289(0x2d7)]({'botID':botID})[_0x27f289(0x13c)]({'autoliquidity':_0x6d6c9b})[_0x27f289(0x21c)]();}}let _0x32e407=dbPerformance['get']('version')[_0x27f289(0x2cb)]();isOlderVersion(_0x32e407,'2.3.5')&&setStartDatePerformance();let _0x49e753=dbCoinResults['get'](_0x27f289(0x231))[_0x27f289(0x2cb)]();if(isOlderVersion(_0x49e753,_0x27f289(0x16a))){let _0x21398d=dbCoinResults['get'](_0x27f289(0x1b1))['value']();if(_0x21398d[_0x27f289(0x267)]!=0x0)pnlGenerationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0xe3f63c=_0x1b2526;dbConfig[_0xe3f63c(0x2a1)](_0xe3f63c(0x231),serverversion)[_0xe3f63c(0x21c)](),dbPerformance[_0xe3f63c(0x2a1)](_0xe3f63c(0x231),serverversion)[_0xe3f63c(0x21c)](),dbLogs[_0xe3f63c(0x2a1)](_0xe3f63c(0x231),serverversion)[_0xe3f63c(0x21c)](),dbCoinResults[_0xe3f63c(0x2a1)](_0xe3f63c(0x231),serverversion)['write']();}function getConfiguration(_0x425345){const _0x5814b0=_0x1b2526;let _0x3770b2=dbConfig[_0x5814b0(0x2f6)]('bot')['find']({'botID':_0x425345})[_0x5814b0(0x2cb)]();if(_0x3770b2){let _0x270e42=![];typeof _0x3770b2[_0x5814b0(0x30c)]==_0x5814b0(0x240)&&(_0x3770b2={..._0x3770b2,'threshold':Number(_0x3770b2[_0x5814b0(0x30c)])},_0x270e42=!![]),_0x3770b2[_0x5814b0(0x2b0)]==undefined&&(_0x3770b2={..._0x3770b2,'change24h':-0x14},_0x270e42=!![]),_0x3770b2[_0x5814b0(0x23e)]==undefined&&(_0x3770b2={..._0x3770b2,'fiat':_0x5814b0(0x2f9)},_0x270e42=!![]),_0x3770b2[_0x5814b0(0x24a)]==undefined&&(_0x3770b2={..._0x3770b2,'onepagemode':settings[_0x5814b0(0x24a)]},_0x270e42=!![]),_0x3770b2['colorscheme']==undefined&&(_0x3770b2={..._0x3770b2,'colorscheme':_0x5814b0(0x185)},_0x270e42=!![]),_0x3770b2[_0x5814b0(0x1a8)]==undefined&&(_0x3770b2={..._0x3770b2,'autoliquidity':_0x5814b0(0x1dd)},_0x270e42=!![]),_0x3770b2['marketcapApi']==undefined&&(_0x3770b2={..._0x3770b2,'marketcapApi':settings[_0x5814b0(0x21e)]?!![]:![]},_0x270e42=!![]),_0x3770b2['marketcapEnabled']==undefined&&(_0x3770b2={..._0x3770b2,'marketcapEnabled':![]},_0x270e42=!![]),_0x3770b2['sandbox']==undefined&&(_0x3770b2={..._0x3770b2,'sandbox':![]},_0x270e42=!![]),_0x270e42&&(_0x3770b2={'botID':_0x3770b2[_0x5814b0(0x137)],'exchange':_0x3770b2[_0x5814b0(0x2e1)],'apiKey':_0x3770b2['apiKey'],'apiSecret':_0x3770b2[_0x5814b0(0x205)],'apiPassword':_0x3770b2[_0x5814b0(0x1ff)],'basecoin':_0x3770b2[_0x5814b0(0x287)],'botname':_0x3770b2[_0x5814b0(0x1bb)],'showname':_0x3770b2[_0x5814b0(0x18e)],'threshold':_0x3770b2[_0x5814b0(0x30c)],'ordertype':_0x3770b2[_0x5814b0(0x2fb)],'timeout':_0x3770b2[_0x5814b0(0x1d1)],'fiat':_0x3770b2['fiat'],'startdate':_0x3770b2[_0x5814b0(0x28e)],'recreate':_0x3770b2['recreate'],'timeshift':_0x3770b2[_0x5814b0(0x199)],'onepagemode':_0x3770b2[_0x5814b0(0x24a)],'headless':_0x3770b2['headless'],'cooldown':_0x3770b2[_0x5814b0(0x213)],'change24h':_0x3770b2[_0x5814b0(0x2b0)],'emojibuy':_0x3770b2[_0x5814b0(0x228)],'emojisell':_0x3770b2[_0x5814b0(0x291)],'colorscheme':_0x3770b2[_0x5814b0(0x1ef)],'marketcapApi':_0x3770b2['marketcapApi'],'marketcapEnabled':_0x3770b2[_0x5814b0(0x170)],'sandbox':_0x3770b2[_0x5814b0(0x1ca)],'portfolio':_0x3770b2[_0x5814b0(0x1c2)],'autoliquidity':_0x3770b2[_0x5814b0(0x1a8)],'liquidity':_0x3770b2[_0x5814b0(0x2fc)],'openOrders':_0x3770b2[_0x5814b0(0x222)]},dbConfig[_0x5814b0(0x2f6)]('bot')['remove']()[_0x5814b0(0x21c)](),dbConfig['get'](_0x5814b0(0x1e1))[_0x5814b0(0x21d)](_0x3770b2)[_0x5814b0(0x21c)]());}else _0x3770b2={'botID':_0x425345,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x5814b0(0x247)+_0x425345,'showname':![],'threshold':0x3,'ordertype':_0x5814b0(0x1c8),'timeout':0x14,'fiat':_0x5814b0(0x2f9),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x5814b0(0x199)],'onepagemode':settings[_0x5814b0(0x24a)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x5814b0(0x185),'marketcapApi':settings[_0x5814b0(0x21e)]?!![]:![],'marketcapEnabled':![],'sandbox':![],'portfolio':[],'autoliquidity':'update-liquidity','liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x3770b2;}function emittedConfiguration(){const _0x5f4ff8=_0x1b2526;let _0x1cdb58;if(config[_0x5f4ff8(0x265)]=='')_0x1cdb58={...config,'configstate':'initial'};else config[_0x5f4ff8(0x265)]==_0x5f4ff8(0x26e)?_0x1cdb58={...config,'configstate':_0x5f4ff8(0x262)}:(_0x1cdb58={...config,'apiKey':_0x5f4ff8(0x18b),'apiSecret':_0x5f4ff8(0x18b)},config['apiPassword']&&(_0x1cdb58[_0x5f4ff8(0x1ff)]=_0x5f4ff8(0x18b)));return _0x1cdb58[_0x5f4ff8(0x23f)]=enableFiatToggle,_0x1cdb58;}function getSettings(){const _0xce63b1=_0x1b2526;return dbSettings[_0xce63b1(0x2f6)](_0xce63b1(0x2ec))[_0xce63b1(0x2cb)]();}function getSecure(){const _0x39f594=_0x1b2526;return dbSecure[_0x39f594(0x2f6)]('secure')['value']()||{};}function updateTimeshift(_0xfe8f1f){const _0x281741=_0x1b2526;let _0x404a8c=dbConfig[_0x281741(0x2f6)](_0x281741(0x1e1))[_0x281741(0x2d7)]({'botID':botID})[_0x281741(0x2cb)]();_0x404a8c&&dbConfig[_0x281741(0x2f6)](_0x281741(0x1e1))[_0x281741(0x2d7)]({'botID':botID})[_0x281741(0x13c)]({'timeshift':_0xfe8f1f})[_0x281741(0x21c)](),config[_0x281741(0x199)]=_0xfe8f1f,proxyEmit(_0x281741(0x245),emittedConfiguration());}function updateOnepagemode(_0xf21339){const _0x51bee1=_0x1b2526;let _0x57c2ee=dbConfig[_0x51bee1(0x2f6)](_0x51bee1(0x1e1))[_0x51bee1(0x2d7)]({'botID':botID})[_0x51bee1(0x2cb)]();_0x57c2ee&&dbConfig[_0x51bee1(0x2f6)]('bot')['find']({'botID':botID})[_0x51bee1(0x13c)]({'onepagemode':_0xf21339})[_0x51bee1(0x21c)](),config[_0x51bee1(0x24a)]=_0xf21339,proxyEmit(_0x51bee1(0x245),emittedConfiguration());}function updateMarketcapApi(_0x44e47c){const _0x97c1ed=_0x1b2526,_0x133d98=_0x44e47c?!![]:![];let _0x553c09=dbConfig[_0x97c1ed(0x2f6)](_0x97c1ed(0x1e1))[_0x97c1ed(0x2d7)]({'botID':botID})['value']();_0x553c09&&dbConfig[_0x97c1ed(0x2f6)]('bot')[_0x97c1ed(0x2d7)]({'botID':botID})[_0x97c1ed(0x13c)]({'marketcapApi':_0x133d98})['write'](),config[_0x97c1ed(0x21e)]=_0x133d98,getMarketCap(),proxyEmit(_0x97c1ed(0x245),emittedConfiguration());}async function storeConfiguration(_0x484549){const _0x12a2b4=_0x1b2526;logger['debug'](_0x12a2b4(0x2f1));_0x484549[_0x12a2b4(0x2ab)]&&delete _0x484549[_0x12a2b4(0x2ab)];if(pidBalances)clearTimeout(pidBalances);setBlockTransactionDetection(!![]);let _0x5a8493=![],_0x47080e=![],_0x3ec5f5=[];_0x484549[_0x12a2b4(0x1c2)][_0x12a2b4(0x157)](_0x5a2058=>{const _0x155504=_0x12a2b4;if(!_0x5a2058[_0x155504(0x1f3)]&&_0x5a2058[_0x155504(0x272)]!=_0x484549[_0x155504(0x287)])_0x3ec5f5[_0x155504(0x21d)](_0x5a2058['symbol']);}),_0x3ec5f5[_0x12a2b4(0x157)](_0x213d9e=>{const _0x2ab1df=currentCoins['find'](_0x5e4520=>_0x5e4520['symbol']==_0x213d9e);!_0x2ab1df&&(_0x5a8493=!![]);}),currentCoins[_0x12a2b4(0x157)](_0x2330fd=>{const _0x5123e8=_0x12a2b4;if(_0x2330fd[_0x5123e8(0x272)]!=config[_0x5123e8(0x287)]){const _0x755356=_0x3ec5f5[_0x5123e8(0x2d7)](_0xe9d5fd=>_0xe9d5fd==_0x2330fd[_0x5123e8(0x293)]);!_0x755356&&(_0x5a8493=!![]);}}),_0x484549[_0x12a2b4(0x1c2)][_0x12a2b4(0x157)](_0x41bfc7=>{const _0xc53e45=_0x12a2b4,_0x5dc2a7=config[_0xc53e45(0x1c2)]['find'](_0xcaffda=>_0xcaffda[_0xc53e45(0x272)]==_0x41bfc7['coin']);if(_0x5dc2a7&&_0x41bfc7['offset']!=_0x5dc2a7['offset'])_0x47080e=!![];});let _0x595f32=dbConfig[_0x12a2b4(0x2f6)]('bot')['find']({'botID':botID})[_0x12a2b4(0x2cb)]();_0x484549={..._0x484549,'apiKey':decryptRSA(secure[_0x12a2b4(0x232)],_0x484549[_0x12a2b4(0x265)]),'apiSecret':decryptRSA(secure[_0x12a2b4(0x232)],_0x484549[_0x12a2b4(0x205)])};_0x484549[_0x12a2b4(0x1ff)]&&(_0x484549[_0x12a2b4(0x1ff)]=decryptRSA(secure['privateKey'],_0x484549[_0x12a2b4(0x1ff)]));let _0x426527=![];if(_0x595f32){_0x484549[_0x12a2b4(0x265)]=='************'?_0x484549[_0x12a2b4(0x265)]=config['apiKey']:_0x426527=!![];_0x484549['apiSecret']=='************'?_0x484549[_0x12a2b4(0x205)]=config[_0x12a2b4(0x205)]:_0x426527=!![];if(_0x484549[_0x12a2b4(0x1ff)]==_0x12a2b4(0x18b))_0x484549['apiPassword']=config[_0x12a2b4(0x1ff)];else{if(_0x484549[_0x12a2b4(0x1ff)])_0x426527=!![];}dbConfig['get'](_0x12a2b4(0x1e1))[_0x12a2b4(0x2d7)]({'botID':botID})[_0x12a2b4(0x13c)](_0x484549)[_0x12a2b4(0x21c)]();}else dbConfig[_0x12a2b4(0x2f6)](_0x12a2b4(0x1e1))[_0x12a2b4(0x21d)](_0x484549)[_0x12a2b4(0x21c)](),_0x426527=!![],process[_0x12a2b4(0x25a)]({'status':'enabled','live':_0x12a2b4(0x2fa)},_0x24ae62=>{});process[_0x12a2b4(0x25a)]({'botname':_0x484549['botname']},_0x12e93f=>{}),config={..._0x484549},updateBotManager(),proxyEmit('configuration-stored'),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x426527)await reset(!![]);else _0x5a8493||_0x47080e?await reset(![]):getBalances();setBlockTransactionDetection(![]);}async function storeHeadless(_0x3d9a5b){const _0x578227=_0x1b2526,_0x354b07={...config,'headless':_0x3d9a5b[_0x578227(0x278)]};let _0x5d240c=dbConfig[_0x578227(0x2f6)]('bot')[_0x578227(0x2d7)]({'botID':botID})['value']();_0x5d240c&&dbConfig['get'](_0x578227(0x1e1))['find']({'botID':botID})['assign'](_0x354b07)['write'](),config={..._0x354b07},updateBotManager(),proxyEmit(_0x578227(0x245),emittedConfiguration());}async function storeFiat(_0xf1aac5){const _0x56b6f2=_0x1b2526,_0x4df255={...config,'fiat':_0xf1aac5};let _0x1c00db=dbConfig['get'](_0x56b6f2(0x1e1))[_0x56b6f2(0x2d7)]({'botID':botID})[_0x56b6f2(0x2cb)]();_0x1c00db&&dbConfig[_0x56b6f2(0x2f6)](_0x56b6f2(0x1e1))[_0x56b6f2(0x2d7)]({'botID':botID})[_0x56b6f2(0x13c)](_0x4df255)['write'](),config={..._0x4df255},proxyEmit(_0x56b6f2(0x245),emittedConfiguration());}function resetHistory(){const _0x1363cd=_0x1b2526;logger[_0x1363cd(0x194)](_0x1363cd(0x1c4));try{if(fs[_0x1363cd(0x23d)](path[_0x1363cd(0x139)](configpath,_0x1363cd(0x2d9)+botID+_0x1363cd(0x1a7))))fs[_0x1363cd(0x174)](path[_0x1363cd(0x139)](configpath,_0x1363cd(0x2d9)+botID+_0x1363cd(0x1a7)));if(fs['existsSync'](path[_0x1363cd(0x139)](configpath,_0x1363cd(0x2d9)+botID+_0x1363cd(0x13f))))fs['unlinkSync'](path[_0x1363cd(0x139)](configpath,_0x1363cd(0x2d9)+botID+_0x1363cd(0x13f)));if(fs[_0x1363cd(0x23d)](path[_0x1363cd(0x139)](configpath,_0x1363cd(0x2d9)+botID+'-results.json')))fs[_0x1363cd(0x174)](path[_0x1363cd(0x139)](configpath,_0x1363cd(0x2d9)+botID+'-results.json'));}catch(_0xc51326){if(_0xc51326)logger['full'](_0x1363cd(0x1a6),_0xc51326);}const _0x4351f7=getDate();let _0x5dd953=[];currentCoins[_0x1363cd(0x157)](_0x517c72=>{const _0x18df89=_0x1363cd;_0x5dd953[_0x18df89(0x21d)]({'coin':_0x517c72['coin'],'number':_0x517c72[_0x18df89(0x143)],'price':_0x517c72[_0x18df89(0x2ee)]});});let _0x4e69b7=dbConfig[_0x1363cd(0x2f6)]('bot')[_0x1363cd(0x2d7)]({'botID':botID})[_0x1363cd(0x2cb)]();_0x4e69b7&&(dbConfig[_0x1363cd(0x2f6)](_0x1363cd(0x1e1))[_0x1363cd(0x2d7)]({'botID':botID})[_0x1363cd(0x13c)]({'liquidity':[{'date':_0x4351f7,'changes':_0x5dd953}]})[_0x1363cd(0x21c)](),config['liquidity']=[]),restartBot(!![]);}function noslash(_0x138f7d){const _0x58e449=_0x1b2526;return _0x138f7d[_0x58e449(0x168)]('/','');}function updateHighestFee(_0x294dd5){const _0x4ede1e=_0x1b2526;if(_0x294dd5[_0x4ede1e(0x186)]){let _0x29e12c={'filled':_0x294dd5['filled']*_0x294dd5[_0x4ede1e(0x169)],'amount':_0x294dd5[_0x4ede1e(0x251)]*_0x294dd5[_0x4ede1e(0x169)],'side':_0x294dd5['side']==_0x4ede1e(0x1b4)?_0x4ede1e(0x193):_0x4ede1e(0x1b4),'price':0x1/_0x294dd5[_0x4ede1e(0x169)]};_0x294dd5={..._0x294dd5,..._0x29e12c};}const _0xf5ab09=defaultFee*_0x294dd5[_0x4ede1e(0x251)]*_0x294dd5[_0x4ede1e(0x169)];lastFees[_0x4ede1e(0x2e0)]['length']===0x14&&lastFees[_0x4ede1e(0x2e0)][_0x4ede1e(0x268)](),lastFees['recent20']['push'](_0xf5ab09),lastFees[_0x4ede1e(0x2d8)]=Math[_0x4ede1e(0x141)](...lastFees[_0x4ede1e(0x2e0)]);}async function updateNumberCoinsCcxt(_0x4e9f34){const _0x146305=_0x1b2526;logger[_0x146305(0x2df)](_0x146305(0x162)+_0x4e9f34[_0x146305(0x293)]+_0x146305(0x1f1)+_0x4e9f34[_0x146305(0x2db)]+_0x146305(0x1f1)+_0x4e9f34['filled']+_0x146305(0x224)+_0x4e9f34['amount']+_0x146305(0x1f1)+_0x4e9f34['id']);let _0x4abd2e=_0x4e9f34[_0x146305(0x2db)],_0x350d07=![];currentCoins['forEach'](_0x322656=>{const _0x3099a3=_0x146305;_0x322656[_0x3099a3(0x293)]==_0x4e9f34[_0x3099a3(0x293)]&&(_0x350d07=!![]);});if(!_0x350d07)return;const _0x80566e=currentCoins[_0x146305(0x2d7)](_0x91e41b=>_0x91e41b[_0x146305(0x293)]==_0x4e9f34['symbol']),_0x37484f=_0x80566e[_0x146305(0x272)],_0x1e1cb0=_0x4b1424=>{const _0x24ad07=_0x146305,_0x2fec74=currentCoins['find'](_0x263891=>_0x263891[_0x24ad07(0x293)]==_0x4e9f34['symbol']);if(_0x2fec74)_0x2fec74[_0x24ad07(0x1e6)]=_0x4b1424;};let _0x33fc1f=![];for(const _0x283fcb of lastOrders){const _0x4737c5=0x64,_0x4a01c2=0x1388;let _0x4fe116=0x0;while(!_0x283fcb['orderId']&&_0x4fe116*_0x4737c5<_0x4a01c2){_0x4fe116++,await sleep(_0x4737c5);}if(_0x4fe116>0x0)logger['debug'](_0x146305(0x24f)+_0x4fe116*_0x4737c5/0x3e8+'\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed');_0x283fcb[_0x146305(0x2bf)]==_0x4e9f34['id']&&(_0x33fc1f=!![]);}if(_0x4abd2e=='open'){_0x1e1cb0(_0x146305(0x206));if(_0x4e9f34[_0x146305(0x251)]>0x0&&_0x4e9f34['filled']<_0x4e9f34['amount']){if(_0x33fc1f){setBlockTransactionDetection(!![]),logger[_0x146305(0x2df)](_0x146305(0x273)+_0x4e9f34[_0x146305(0x251)]+_0x146305(0x211)+_0x4e9f34['id']);const _0x135cd2=await getCoins(balanceUpdateDelay,undefined,undefined,_0x37484f);[currentCoins,currentCoinsAll]=_0x135cd2,setBlockTransactionDetection(![]);}else logger[_0x146305(0x2df)](_0x146305(0x273)+_0x4e9f34[_0x146305(0x251)]+_0x146305(0x196)+_0x4e9f34['id']),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay);}}else{if(_0x4abd2e==_0x146305(0x21f)){_0x1e1cb0(_0x146305(0x21f)),lastOrders=lastOrders['filter'](_0x4b69e6=>_0x4b69e6[_0x146305(0x293)]!=_0x4e9f34[_0x146305(0x293)]);const _0x9fe34d=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x9fe34d,setBlockTransactionDetection(![]),await getOpenOrders(),handleOpenOrders();}else{if(_0x4abd2e==_0x146305(0x18c)){if(lastOrders)for(const _0x45ea78 of lastOrders){if(_0x45ea78[_0x146305(0x2bf)]==_0x4e9f34['id']){logger['debug'](_0x146305(0x1e4)+_0x4e9f34['id']),_0x33fc1f=!![];if(_0x45ea78[_0x146305(0x251)]==0x0){setBlockTransactionDetection(!![]),logger[_0x146305(0x2df)](_0x146305(0x1d6)+_0x4e9f34['id']);if(_0x4e9f34[_0x146305(0x176)])_0x45ea78[_0x146305(0x169)]=_0x4e9f34[_0x146305(0x176)];else{if(_0x4e9f34[_0x146305(0x169)])_0x45ea78['price']=_0x4e9f34[_0x146305(0x169)];else{}}_0x45ea78[_0x146305(0x251)]=_0x4e9f34[_0x146305(0x251)],updateHighestFee(_0x45ea78);const _0x538937=await getCoins(balanceUpdateDelay,undefined,undefined,_0x37484f);[currentCoins,currentCoinsAll]=_0x538937,setBlockTransactionDetection(![]),await validateOrders(),_0x1e1cb0(_0x146305(0x251)),_0x45ea78['fee']={'currency':_0x4e9f34[_0x146305(0x221)]?_0x4e9f34[_0x146305(0x221)][_0x146305(0x2bc)]:null,'cost':_0x4e9f34['fee']?_0x4e9f34['fee'][_0x146305(0x27c)]:0x0},await updatePnL(_0x45ea78);}}}!_0x33fc1f&&(logger[_0x146305(0x2df)](_0x146305(0x2ef)+_0x4e9f34['id']),_0x1e1cb0('filled'),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay),await updateOpenOrders(),handleOpenOrders());}}}if(lastBalances){let _0x4773d3=JSON[_0x146305(0x210)](lastBalances[_0x146305(0x1c2)]);const _0x50e6c9=_0x4773d3['find'](_0xb33b33=>_0xb33b33[_0x146305(0x293)]==_0x4e9f34['symbol']);if(_0x50e6c9){if(_0x4abd2e==_0x146305(0x206))_0x50e6c9[_0x146305(0x1e6)]=_0x50e6c9['orderstatus']==_0x146305(0x251)?'filled':_0x146305(0x206);else{if(_0x4abd2e==_0x146305(0x21f))_0x50e6c9[_0x146305(0x1e6)]=_0x50e6c9[_0x146305(0x1e6)]==_0x146305(0x251)?_0x146305(0x251):_0x146305(0x21f);else _0x4abd2e==_0x146305(0x18c)&&(_0x50e6c9['orderstatus']=_0x146305(0x251));}}lastBalances={...lastBalances,'portfolio':JSON[_0x146305(0x1d5)](_0x4773d3)},proxyEmit(_0x146305(0x1d9),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x4d1090=_0x1b2526;await getOpenOrders();let _0x3c2583=![];currentCoins[_0x4d1090(0x157)](_0x4e975b=>{const _0xf45317=_0x4d1090;_0x3c2583=allOpenOrders[_0xf45317(0x2d7)](_0x15b3cc=>_0x15b3cc[_0xf45317(0x293)]==_0x4e975b['symbol']),_0x4e975b[_0xf45317(0x1e6)]=_0x3c2583?'open':_0xf45317(0x189);});}async function fetchBalance(_0x2eab78=!![]){const _0x1c3539=_0x1b2526;let _0x2d9e13,_0x322c8c,_0x4737af,_0x201eb4=0x0;while(!_0x322c8c&&_0x201eb4<maxRetries){try{return _0x2d9e13=await exchange[_0x1c3539(0x26b)](),_0x322c8c=_0x2d9e13[_0x1c3539(0x1ce)],_0x322c8c;}catch(_0x51ffb1){_0x4737af=_0x51ffb1,_0x201eb4++,await sleep(retryInterval);}}return!_0x2eab78?handleErrorNoStop(_0x4737af,_0x1c3539(0x2af)):await handleError(_0x4737af,_0x1c3539(0x2af)),![];}async function getCoins(_0x1cb5ce=0x0,_0x5024e7=!![],_0x3068f1=config[_0x1b2526(0x287)],_0x446003){const _0x49dc91=_0x1b2526;let _0x58a02f=[],_0x25bc77=[],_0x34b3fa=[],_0x7a3551;if(_0x1cb5ce)await sleep(_0x1cb5ce);if(botPaused)return[currentCoins,currentCoinsAll];let _0x199c8e=![],_0x4f234d=0x0,_0x346922,_0x54d407;_0x446003&&(_0x346922=currentCoins[_0x49dc91(0x2d7)](_0x1198c4=>_0x1198c4[_0x49dc91(0x272)]==_0x446003),_0x346922&&(_0x54d407=_0x346922[_0x49dc91(0x24b)],delete _0x346922['prevnumber']));while(!_0x199c8e){_0x7a3551=await fetchBalance(_0x5024e7);if(_0x7a3551){if(_0x446003){if(_0x7a3551[_0x446003]!=_0x54d407)logger[_0x49dc91(0x2df)](_0x49dc91(0x28a)+_0x446003+':\x20'+_0x7a3551[_0x446003]+'\x20('+_0x54d407+')'),_0x199c8e=!![];else{logger[_0x49dc91(0x2df)](_0x49dc91(0x1b9)+_0x446003+':\x20'+_0x7a3551[_0x446003]+'\x20('+_0x54d407+')'),_0x4f234d++;if(_0x4f234d<balanceUpdateRetries)await sleep(balanceUpdateDelay);else{logger[_0x49dc91(0x2df)]('Stopped\x20fetching\x20balance\x20after\x20'+_0x4f234d+'\x20attempts');break;}}}else break;}else return[currentCoins,currentCoinsAll];}for(const [_0x5bf397,_0xe8f3e6]of Object['entries'](_0x7a3551)){_0x34b3fa[_0x49dc91(0x21d)](_0x5bf397);}config[_0x49dc91(0x1c2)][_0x49dc91(0x157)](_0x46ae30=>{const _0x27927e=_0x49dc91;!_0x34b3fa[_0x27927e(0x160)](_0x46ae30[_0x27927e(0x272)])&&(_0x7a3551[_0x46ae30[_0x27927e(0x272)]]=0x0);});if(_0x3068f1=='')for(const [_0x146ae7,_0x4f542f]of Object[_0x49dc91(0x1c1)](_0x7a3551)){_0x4f542f!=0x0&&_0x58a02f['push']({'coin':_0x146ae7});}else for(const [_0x31ad85,_0x2f406f]of Object[_0x49dc91(0x1c1)](_0x7a3551)){const _0x12dc65=config['portfolio']['find'](_0x427775=>_0x427775[_0x49dc91(0x272)]==_0x31ad85),_0x4fa6a9=_0x31ad85+'/'+_0x3068f1,_0x2a4e50=_0x3068f1+'/'+_0x31ad85,_0xd29e22=currentCoins['find'](_0x1f5757=>_0x1f5757[_0x49dc91(0x272)]==_0x31ad85);if((_0x2f406f!=0x0||_0x12dc65)&&(allSymbols['includes'](_0x4fa6a9)||_0x31ad85==_0x3068f1))_0xd29e22?_0x58a02f[_0x49dc91(0x21d)]({..._0xd29e22,'number':Math[_0x49dc91(0x141)](_0x2f406f+(_0x12dc65&&_0x12dc65[_0x49dc91(0x17d)]||0x0),0x0)}):_0x58a02f[_0x49dc91(0x21d)]({'coin':_0x31ad85,'symbol':_0x4fa6a9,'reverse':![],'number':Math[_0x49dc91(0x141)](_0x2f406f+(_0x12dc65&&_0x12dc65['offset']||0x0),0x0),'orderstatus':_0x49dc91(0x189)});else{if((_0x2f406f!=0x0||_0x12dc65)&&allSymbols['includes'](_0x2a4e50))_0xd29e22?_0x58a02f[_0x49dc91(0x21d)]({..._0xd29e22,'number':Math[_0x49dc91(0x141)](_0x2f406f+(_0x12dc65&&_0x12dc65['offset']||0x0),0x0)}):_0x58a02f[_0x49dc91(0x21d)]({'coin':_0x31ad85,'symbol':_0x2a4e50,'reverse':!![],'number':Math['max'](_0x2f406f+(_0x12dc65&&_0x12dc65[_0x49dc91(0x17d)]||0x0),0x0),'orderstatus':_0x49dc91(0x189)});else _0x12dc65&&_0x58a02f[_0x49dc91(0x21d)]({'coin':_0x12dc65['coin'],'symbol':_0x12dc65[_0x49dc91(0x293)],'reverse':_0x12dc65['reverse'],'number':0x0,'orderstatus':_0x49dc91(0x189)});}}return _0x58a02f[_0x49dc91(0x19b)]((_0x4d76c7,_0x4e0e7d)=>_0x4d76c7[_0x49dc91(0x172)]<_0x4e0e7d[_0x49dc91(0x172)]?0x1:_0x4e0e7d[_0x49dc91(0x172)]<_0x4d76c7['delta']?-0x1:0x0),_0x25bc77=cloneDeep(_0x58a02f),_0x58a02f=_0x58a02f[_0x49dc91(0x14a)](_0x52f9ad=>{const _0x1aa7a9=_0x49dc91,_0x2fc2d7=config[_0x1aa7a9(0x1c2)][_0x1aa7a9(0x2d7)](_0x3186eb=>_0x3186eb[_0x1aa7a9(0x272)]==_0x52f9ad[_0x1aa7a9(0x272)]);return _0x2fc2d7&&!_0x2fc2d7[_0x1aa7a9(0x1f3)];}),[_0x58a02f,_0x25bc77];}async function getOpenOrders(){const _0x4a8cb2=_0x1b2526;let _0xb1914c;allOpenOrders=[];try{for(const _0x33c7dc of config['portfolio']){!_0x33c7dc[_0x4a8cb2(0x1f3)]&&_0x33c7dc['coin']!=config['basecoin']&&(_0xb1914c=await exchange[_0x4a8cb2(0x2de)](_0x33c7dc[_0x4a8cb2(0x293)]),_0xb1914c[_0x4a8cb2(0x267)]>0x0&&allOpenOrders[_0x4a8cb2(0x21d)](_0xb1914c[0x0]));}}catch(_0x43cb2f){await handleError(_0x43cb2f,'getOpenOrders()');}}async function handleOpenOrders(_0x3ba0a6=0x0){const _0x19b2bd=_0x1b2526;allOpenOrders[_0x19b2bd(0x267)]==0x0&&lockOrders==ORDERS[_0x19b2bd(0x312)]&&allOrdersPlaced&&(_0x3ba0a6==0x0?(logger['debug'](_0x19b2bd(0x13e)),_0x3ba0a6++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x19b2bd(0x2df)]('2\x20-\x20Handled\x20open\x20orders'),validateOrders(_0x19b2bd(0x154))));}async function testAPI(){const _0xd0dde7=_0x1b2526;try{return await exchange[_0xd0dde7(0x26b)](),!![];}catch(_0x5ca5e4){loading[_0xd0dde7(0x175)]=!![],_0x5ca5e4[_0xd0dde7(0x236)]()['toLowerCase']()[_0xd0dde7(0x160)]('timestamp')||_0x5ca5e4[_0xd0dde7(0x236)]()[_0xd0dde7(0x23b)]()[_0xd0dde7(0x160)]('request-time')?(logHistory('error',_0xd0dde7(0x2d5)),loading['error']=_0xd0dde7(0x2c5)):handleErrorNoStop(_0x5ca5e4,_0xd0dde7(0x2ed),!![]),logHistory(_0xd0dde7(0x18a),_0xd0dde7(0x1af)),logHistory('error','Pausing\x20for\x20'+loadCoinsRetryInterval/0xea60+_0xd0dde7(0x1f2)),logger['debug'](_0xd0dde7(0x200),_0x5ca5e4),emitLoadingProgress(),botPaused=!![],await sleep(loadCoinsRetryInterval),restartBot();}}async function testNewAPI(_0x51a3e0){const _0x589c2d=_0x1b2526;logger['debug']('Test\x20new\x20API');const _0x3e5e9d=ccxt[_0x589c2d(0x220)][_0x51a3e0[_0x589c2d(0x2e1)][_0x589c2d(0x23b)]()],_0x551e12=new _0x3e5e9d({'apiKey':_0x51a3e0[_0x589c2d(0x265)],'secret':_0x51a3e0[_0x589c2d(0x205)],'options':{'defaultType':_0x589c2d(0x2e4)}});if(_0x51a3e0[_0x589c2d(0x1ff)])_0x551e12[_0x589c2d(0x25e)]=_0x51a3e0['apiPassword'];if(_0x551e12[_0x589c2d(0x2bd)][_0x589c2d(0x1ca)])_0x551e12[_0x589c2d(0x225)](_0x51a3e0[_0x589c2d(0x1ca)]);if(_0x51a3e0['exchange'][_0x589c2d(0x23b)]()==_0x589c2d(0x1b0))_0x551e12[_0x589c2d(0x252)][_0x589c2d(0x1da)]=operatorId;try{await _0x551e12[_0x589c2d(0x26b)](),botPaused=![];}catch(_0x44568c){logger['debug'](_0x589c2d(0x2f5)+_0x44568c['toString']());throw _0x44568c;}}function cloneDeep(_0x33d5db){const _0x14c3a1=_0x1b2526;return JSON['parse'](JSON[_0x14c3a1(0x1d5)](_0x33d5db));}async function getPortfolio(_0xffb848){const _0x27ae29=_0x1b2526;let _0x1344a6=[],_0x20c4db=[],_0x4305cb=[],_0x40b2e7;_0xffb848[_0x27ae29(0x265)]=decryptRSA(secure[_0x27ae29(0x232)],_0xffb848['apiKey']),_0xffb848[_0x27ae29(0x205)]=decryptRSA(secure[_0x27ae29(0x232)],_0xffb848[_0x27ae29(0x205)]);if(_0xffb848[_0x27ae29(0x1ff)])_0xffb848['apiPassword']=decryptRSA(secure['privateKey'],_0xffb848['apiPassword']);if(_0xffb848[_0x27ae29(0x265)]!=='************'||_0xffb848['apiSecret']!==_0x27ae29(0x18b)||_0xffb848[_0x27ae29(0x1ff)]&&_0xffb848[_0x27ae29(0x1ff)]!==_0x27ae29(0x18b)){if(config[_0x27ae29(0x2e1)]){if(_0xffb848[_0x27ae29(0x265)]==_0x27ae29(0x18b))_0xffb848[_0x27ae29(0x265)]=config['apiKey'];if(_0xffb848['apiSecret']==_0x27ae29(0x18b))_0xffb848['apiSecret']=config[_0x27ae29(0x205)];if(_0xffb848[_0x27ae29(0x1ff)]==_0x27ae29(0x18b))_0xffb848[_0x27ae29(0x1ff)]=config['apiPassword'];}try{if(_0xffb848[_0x27ae29(0x1f5)])await testNewAPI(_0xffb848);}catch(_0x38065c){if(_0x38065c[_0x27ae29(0x236)]()['includes'](_0x27ae29(0x2a2))){logHistory(_0x27ae29(0x18a),_0x27ae29(0x17b)),logHistory('error',_0x27ae29(0x25d)+_0x38065c[_0x27ae29(0x236)]()),proxyEmit(_0x27ae29(0x1fd),![]);return;}else{if(_0x38065c[_0x27ae29(0x236)]()[_0x27ae29(0x160)](_0x27ae29(0x1ec))){logHistory(_0x27ae29(0x18a),_0x27ae29(0x244)),logHistory('error',_0x27ae29(0x25d)+_0x38065c[_0x27ae29(0x236)]()),proxyEmit(_0x27ae29(0x1fd),![]);return;}else{logHistory(_0x27ae29(0x18a),'Error\x20occurred:\x20'+_0x38065c['toString']()),logger[_0x27ae29(0x2df)](_0x27ae29(0x200),_0x38065c),proxyEmit(_0x27ae29(0x1fd),![]);return;}}}exchange?updateExchange(_0xffb848[_0x27ae29(0x265)],_0xffb848[_0x27ae29(0x205)],_0xffb848[_0x27ae29(0x1ff)]):await initExchange(_0xffb848[_0x27ae29(0x2e1)],_0xffb848[_0x27ae29(0x265)],_0xffb848[_0x27ae29(0x205)],_0xffb848[_0x27ae29(0x1ff)],_0xffb848[_0x27ae29(0x1ca)]);await loadSymbols();const _0x521194=await getCoins(0x0,![],_0xffb848[_0x27ae29(0x287)]);_0x4305cb=cloneDeep(_0x521194[0x1]);}else{const _0x1740d1=await getCoins();_0x4305cb=cloneDeep(_0x1740d1[0x1]);}if(_0xffb848['basecoin']=='')proxyEmit('portfolio1',!![]),proxyEmit(_0x27ae29(0x202),_0x4305cb);else{_0x4305cb['forEach'](_0x2eacb6=>{const _0x11d4a6=_0x27ae29;if(_0x2eacb6[_0x11d4a6(0x272)]!=_0xffb848['basecoin']&&allSymbols[_0x11d4a6(0x160)](_0x2eacb6[_0x11d4a6(0x293)]))_0x1344a6[_0x11d4a6(0x21d)](_0x2eacb6[_0x11d4a6(0x293)]);});if(_0x1344a6[_0x27ae29(0x267)]==0x0)logHistory(_0x27ae29(0x18a),_0x27ae29(0x13d));else{try{_0x20c4db=await getTickers(_0x1344a6);}catch(_0x1f0dda){logHistory('error',_0x27ae29(0x15f)),logger[_0x27ae29(0x2df)](_0x27ae29(0x200),_0x1f0dda),proxyEmit(_0x27ae29(0x1fd),![]);return;}_0x4305cb['forEach'](_0x10a19f=>{const _0x62fc1e=_0x27ae29;_0x10a19f[_0x62fc1e(0x272)]!=_0xffb848[_0x62fc1e(0x287)]?_0x20c4db[_0x10a19f[_0x62fc1e(0x293)]]?_0x20c4db[_0x10a19f['symbol']][_0x62fc1e(0x2ee)]?_0x40b2e7=_0x10a19f['reverse']?0x1/_0x20c4db[_0x10a19f[_0x62fc1e(0x293)]][_0x62fc1e(0x2ee)]:_0x20c4db[_0x10a19f[_0x62fc1e(0x293)]][_0x62fc1e(0x2ee)]:_0x40b2e7=0x0:_0x40b2e7=0x0:_0x40b2e7=0x1,_0x10a19f[_0x62fc1e(0x169)]=formatResult(_0x40b2e7,0x8);}),await getMarketCap(_0x4305cb),proxyEmit(_0x27ae29(0x1fd),!![]),proxyEmit('portfolio2',_0x4305cb);}}}function truncateTradeAmount(_0x311ff6,_0x378eda){let _0x49eb51=0x0;try{_0x49eb51=exchange['amountToPrecision'](_0x311ff6,_0x378eda);}catch(_0x3988dc){}return _0x49eb51;}function checkMinimums(_0x22fda0){const _0x58db20=_0x1b2526;let _0x4602b0=!![];const _0x5c1337=!_0x22fda0['reverse']?markets[_0x22fda0['symbol']][_0x58db20(0x27e)][_0x58db20(0x146)]['min']:markets[_0x22fda0[_0x58db20(0x293)]][_0x58db20(0x27e)][_0x58db20(0x27c)]['min'],_0x2d228f=!_0x22fda0[_0x58db20(0x186)]?markets[_0x22fda0[_0x58db20(0x293)]][_0x58db20(0x27e)][_0x58db20(0x27c)][_0x58db20(0x2e6)]:markets[_0x22fda0['symbol']]['limits']['amount']['min'],_0x521688=truncateTradeAmount(_0x22fda0[_0x58db20(0x293)],_0x22fda0['trade']);_0x22fda0['trade']=_0x521688;if(Math[_0x58db20(0x2c2)](_0x521688)<_0x5c1337)_0x4602b0=![];if(Math['abs'](_0x521688)*_0x22fda0[_0x58db20(0x2ee)]<_0x2d228f)_0x4602b0=![];let _0x212db3='';if(_0x22fda0['side']==_0x58db20(0x1b4)){let _0x13cbf6=config[_0x58db20(0x1c2)][_0x58db20(0x2d7)](_0x5a9a1d=>_0x5a9a1d[_0x58db20(0x272)]==_0x22fda0['coin']);_0x13cbf6[_0x58db20(0x17d)]>0x0?Math[_0x58db20(0x2c2)](_0x521688)>_0x22fda0[_0x58db20(0x143)]-_0x13cbf6['offset']&&(_0x4602b0=![],_0x212db3='Insufficient\x20funds\x20to\x20place\x20order\x20for\x20'+_0x13cbf6['coin']+'\x20due\x20to\x20offset'):Math[_0x58db20(0x2c2)](_0x521688)>_0x22fda0[_0x58db20(0x143)]&&(_0x4602b0=![]);}if(_0x22fda0[_0x58db20(0x1f6)]==_0x58db20(0x193)){let _0xf7c2e5=config[_0x58db20(0x1c2)][_0x58db20(0x2d7)](_0xc86aed=>_0xc86aed[_0x58db20(0x272)]==config[_0x58db20(0x287)]),_0x30c0d4=currentCoins[_0x58db20(0x2d7)](_0x1110bd=>_0x1110bd[_0x58db20(0x272)]==config['basecoin']);_0xf7c2e5[_0x58db20(0x17d)]>0x0?Math['abs'](_0x521688)*_0x22fda0['last']>_0x30c0d4[_0x58db20(0x143)]-_0xf7c2e5['offset']&&(_0x4602b0=![],_0x212db3=_0x58db20(0x1ac)+config['basecoin']+'\x20due\x20to\x20offset'):Math[_0x58db20(0x2c2)](_0x521688)*_0x22fda0[_0x58db20(0x2ee)]>_0x30c0d4['number']&&(_0x4602b0=![]);}return!_0x4602b0&&_0x212db3&&!insufficientFundsWarningSent[_0x58db20(0x160)](_0x22fda0[_0x58db20(0x272)])&&(logHistory(_0x58db20(0x2c9),_0x212db3),insufficientFundsWarningSent[_0x58db20(0x21d)](_0x22fda0[_0x58db20(0x272)])),_0x4602b0;}async function getBalances(_0x47d70d=!![]){const _0x1b14f6=_0x1b2526;if(botPaused)return;let _0x58d9d8=0x0,_0x2776f0;const _0xad5d30=config['threshold'];if(config[_0x1b14f6(0x278)]&&config[_0x1b14f6(0x2b0)]<0x0)await validate24hChanges();currentCoins[_0x1b14f6(0x157)](_0x34c2d3=>{const _0x1cb6f3=_0x1b14f6;if(_0x34c2d3[_0x1cb6f3(0x272)]!=config[_0x1cb6f3(0x287)]){let _0x467a93=gTicker[noslash(_0x34c2d3[_0x1cb6f3(0x293)])];_0x2776f0=_0x34c2d3[_0x1cb6f3(0x186)]?0x1/_0x467a93:_0x467a93;}else _0x2776f0=0x1;let _0x43c80a=_0x34c2d3[_0x1cb6f3(0x143)]*_0x2776f0;_0x58d9d8+=_0x43c80a,_0x34c2d3[_0x1cb6f3(0x2ee)]=formatResult(Number(_0x2776f0),0x8),_0x34c2d3[_0x1cb6f3(0x2cb)]=_0x43c80a;}),currentCoins['forEach'](_0x2c157b=>{const _0x3bced5=_0x1b14f6;let _0x51833b=config[_0x3bced5(0x1c2)]['find'](_0x41bf59=>_0x41bf59[_0x3bced5(0x272)]==_0x2c157b[_0x3bced5(0x272)]),_0xf6a98e=Number(_0x51833b['distribution']),_0x331567=_0x2c157b[_0x3bced5(0x2cb)]/_0x58d9d8*0x64,_0x2ce9b5=_0xf6a98e*_0x58d9d8/0x64/_0x2c157b['last']-_0x2c157b['number'];_0x2c157b[_0x3bced5(0x2ae)]=formatResult(_0x331567,0x3),_0x2c157b[_0x3bced5(0x142)]=formatResult(_0xf6a98e,0x3),_0x2c157b[_0x3bced5(0x22d)]=formatResult(_0x2ce9b5,0x8),_0x2c157b[_0x3bced5(0x1f6)]='',_0x2c157b[_0x3bced5(0x259)]=![];if(_0x2c157b[_0x3bced5(0x272)]!=config[_0x3bced5(0x287)]){if(_0x2c157b[_0x3bced5(0x2ae)]>_0xf6a98e)_0x2c157b['side']=_0x3bced5(0x1b4),_0x2c157b['valid']=checkMinimums(_0x2c157b);else _0x2c157b[_0x3bced5(0x2ae)]<_0xf6a98e&&(_0x2c157b[_0x3bced5(0x1f6)]=_0x3bced5(0x193),_0x2c157b[_0x3bced5(0x259)]=checkMinimums(_0x2c157b));}_0x2c157b[_0x3bced5(0x172)]=_0x2c157b[_0x3bced5(0x142)]==0x0?0x270f:_0x2c157b[_0x3bced5(0x2ae)]/_0x2c157b['target']-0x1;if(_0x2c157b[_0x3bced5(0x1e6)]==_0x3bced5(0x251)||_0x2c157b[_0x3bced5(0x1e6)]==_0x3bced5(0x21f))_0x2c157b[_0x3bced5(0x1e6)]=_0x3bced5(0x189);}),currentCoins[_0x1b14f6(0x19b)]((_0x2feeee,_0x3a1fbe)=>_0x2feeee['delta']<_0x3a1fbe[_0x1b14f6(0x172)]?0x1:_0x3a1fbe[_0x1b14f6(0x172)]<_0x2feeee[_0x1b14f6(0x172)]?-0x1:0x0);const _0x4a802c=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x4a802c[_0x1b14f6(0x1f8)],'usd':_0x4a802c[_0x1b14f6(0x2da)],'portfolio':JSON[_0x1b14f6(0x1d5)](currentCoins),'threshold':_0xad5d30},proxyEmit(_0x1b14f6(0x1d9),{'serverversion':serverversion,'balances':lastBalances});if(_0x47d70d){if(config[_0x1b14f6(0x278)])headlessMode({'portfolio':currentCoins,'threshold':_0xad5d30});else lockOrders==ORDERS[_0x1b14f6(0x227)]&&!coolingDown&&notifyBalance({'portfolio':currentCoins,'threshold':_0xad5d30});}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x50fd85=getNormalizedPerformance();getStartingBalances(_0x50fd85),emitPerformance(_0x50fd85);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}function getPnL(){const _0x4a3c14=_0x1b2526;let _0x44ba42=dbCoinResults[_0x4a3c14(0x2f6)](_0x4a3c14(0x1b1))['value'](),_0x59d18d=0x0;return Object['entries'](_0x44ba42)[_0x4a3c14(0x157)](([_0x4663fc,_0x2a546c])=>{const _0xe3eb5b=_0x4a3c14;_0x59d18d+=_0x2a546c[_0xe3eb5b(0x2c7)];}),_0x59d18d;}async function storePerformance(){const _0x41bb68=_0x1b2526;if(!lastBalances)return;let _0x5cd111=[],_0x35a4a5;const _0x32127d=getPnL();let _0x301f1e=JSON[_0x41bb68(0x210)](lastBalances['portfolio']);_0x301f1e['sort']((_0xfbe3d1,_0x318057)=>_0xfbe3d1[_0x41bb68(0x272)]>_0x318057['coin']?0x1:_0x318057[_0x41bb68(0x272)]>_0xfbe3d1[_0x41bb68(0x272)]?-0x1:0x0),_0x301f1e[_0x41bb68(0x157)](_0x7180e8=>{const _0x3c9e11=_0x41bb68;let _0x4ce2c9={'coin':_0x7180e8[_0x3c9e11(0x272)],'number':_0x7180e8[_0x3c9e11(0x143)],'price':_0x7180e8[_0x3c9e11(0x2ee)]};_0x5cd111[_0x3c9e11(0x21d)](_0x4ce2c9);});const _0x47f1ef=await getFiat(),_0x56a88e=getTimeStamp()['split']('\x20')[0x0],_0x1f2751=dbPerformance[_0x41bb68(0x2f6)](_0x41bb68(0x1fc))[_0x41bb68(0x2d7)]({'date':_0x56a88e})[_0x41bb68(0x2cb)]();_0x35a4a5={'date':_0x56a88e,'eur':_0x47f1ef[_0x41bb68(0x1f8)],'usd':_0x47f1ef[_0x41bb68(0x2da)],'coins':_0x5cd111,'pnl':_0x32127d},_0x1f2751?_0x35a4a5[_0x41bb68(0x285)]!=config[_0x41bb68(0x28e)]&&dbPerformance['get']('data')[_0x41bb68(0x2d7)]({'date':_0x56a88e})[_0x41bb68(0x13c)](_0x35a4a5)[_0x41bb68(0x21c)]():dbPerformance[_0x41bb68(0x2f6)](_0x41bb68(0x1fc))[_0x41bb68(0x21d)](_0x35a4a5)[_0x41bb68(0x21c)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x52865e=_0x1b2526;let _0x480bed=[];if(dbPerformance['has'](_0x52865e(0x1fc))['value']()){let _0x5aa5c1=dbPerformance['get']('data')[_0x52865e(0x180)]()[_0x52865e(0x14a)](_0x1b29bb=>{const _0x563c47=_0x52865e;if(_0x1b29bb[_0x563c47(0x1b1)][_0x563c47(0x267)]==0x0)return![];else return!![];})[_0x52865e(0x28c)](_0x52865e(0x285))[_0x52865e(0x2cb)](),_0x4749cb=[...config[_0x52865e(0x2fc)]];_0x4749cb[_0x52865e(0x19b)]((_0xf28c7e,_0x2903ed)=>_0xf28c7e[_0x52865e(0x285)]>_0x2903ed[_0x52865e(0x285)]?-0x1:_0x2903ed[_0x52865e(0x285)]>_0xf28c7e[_0x52865e(0x285)]?0x1:0x0);let _0x4b3060=0x1,_0x2a60d3=[],_0x20338d=0x0;_0x5aa5c1[_0x52865e(0x248)]()[_0x52865e(0x186)]()[_0x52865e(0x157)]((_0x1193b8,_0x1eafa1)=>{const _0x4c1744=_0x52865e;if(_0x4749cb[_0x20338d]){if(_0x5aa5c1[_0x5aa5c1[_0x4c1744(0x267)]-_0x1eafa1]&&_0x4749cb[_0x20338d]['date']==_0x5aa5c1[_0x5aa5c1[_0x4c1744(0x267)]-_0x1eafa1][_0x4c1744(0x285)]){if(_0x1eafa1<_0x5aa5c1[_0x4c1744(0x267)]){let _0x9fc499=0x0,_0x4c4cb0=0x0;_0x5aa5c1[_0x5aa5c1[_0x4c1744(0x267)]-_0x1eafa1][_0x4c1744(0x1b1)][_0x4c1744(0x157)](_0x443f99=>{const _0x1e47c3=_0x4c1744;_0x4c4cb0+=_0x443f99[_0x1e47c3(0x143)]*_0x443f99[_0x1e47c3(0x169)];}),_0x4749cb[_0x20338d]['changes'][_0x4c1744(0x157)](_0xdfa56f=>{const _0xaa11bb=_0x4c1744;_0x9fc499+=_0xdfa56f[_0xaa11bb(0x143)]*_0xdfa56f[_0xaa11bb(0x169)];}),_0x4b3060*=_0x9fc499/(_0x4c4cb0-_0x9fc499)+0x1;}_0x20338d++;}}let _0xf4f39e=0x0;_0x1193b8[_0x4c1744(0x1b1)][_0x4c1744(0x157)](_0x29f729=>{const _0x24b008=_0x4c1744;_0xf4f39e+=_0x29f729['number']*_0x29f729[_0x24b008(0x169)];}),_0x2a60d3[_0x5aa5c1['length']-_0x1eafa1-0x1]=_0xf4f39e*(_0x4b3060-0x1);});let _0xfbd5d8=[];_0x4749cb=[...config[_0x52865e(0x2fc)]]||[];let _0x489497=0x0;_0x20338d=0x0,_0x5aa5c1[_0x52865e(0x157)]((_0x3bd7e9,_0x526fb5)=>{const _0x96e2ed=_0x52865e;if(_0x4749cb[_0x20338d]){const _0x1d49ac=fns[_0x96e2ed(0x210)](_0x4749cb[_0x20338d]['date'],_0x96e2ed(0x2b5),new Date()),_0x32411b=fns[_0x96e2ed(0x210)](_0x3bd7e9['date'],_0x96e2ed(0x2b5),new Date());if(fns[_0x96e2ed(0x201)](_0x1d49ac,_0x32411b)){let _0x5b9b85=0x0;_0x4749cb[_0x20338d][_0x96e2ed(0x14c)][_0x96e2ed(0x157)](_0x17327f=>{const _0xd0daca=_0x96e2ed;!_0xfbd5d8[_0x17327f['coin']]?_0xfbd5d8[_0x17327f['coin']]=_0x17327f['number']:(_0x5b9b85=_0xfbd5d8[_0x17327f['coin']],_0xfbd5d8[_0x17327f['coin']]+=_0x17327f[_0xd0daca(0x143)]);const _0x457ab6=_0x3bd7e9['coins']['find'](_0x683d92=>_0x683d92['coin']==_0x17327f[_0xd0daca(0x272)]);(!_0x457ab6||_0x457ab6['number']==0x0)&&(_0x489497+=(-_0x17327f[_0xd0daca(0x143)]-_0x5b9b85)*_0x17327f[_0xd0daca(0x169)]);}),_0x20338d++;}}_0x3bd7e9[_0x96e2ed(0x1b1)][_0x96e2ed(0x157)]((_0x3cc7b7,_0x5d31d2)=>{const _0xd03498=_0x96e2ed;_0xfbd5d8[_0x3cc7b7[_0xd03498(0x272)]]&&(_0x3cc7b7[_0xd03498(0x18d)]=_0xfbd5d8[_0x3cc7b7['coin']]);}),_0x480bed[_0x96e2ed(0x21d)]({'date':_0x3bd7e9['date'],'eur':_0x3bd7e9[_0x96e2ed(0x1f8)],'usd':_0x3bd7e9[_0x96e2ed(0x2da)],'offset':_0x2a60d3[_0x526fb5],'netoffset':_0x489497,'coins':_0x3bd7e9['coins'],'pnl':_0x3bd7e9[_0x96e2ed(0x255)]});});}return _0x480bed;}function emitPerformance(_0x510eab){const _0x46eb5d=_0x1b2526;_0x510eab[_0x46eb5d(0x267)]!==0x0?(proxyEmit(_0x46eb5d(0x26d),_0x510eab),lastPerformanceEmitted=getDate()):proxyEmit('performance',[]);}function getPerf(_0x298775,_0x4550e4){const _0x248997=_0x1b2526;let _0x30f420=0x0,_0x18ad1f=0x0,_0x3c9c49=0x0;_0x298775['coins']['forEach'](_0x36c869=>{const _0x2b8ab6=_0x167b;_0x30f420+=_0x36c869[_0x2b8ab6(0x143)]*_0x36c869['price'];});_0x4550e4&&(_0x30f420+=_0x298775[_0x248997(0x17d)]);if(config[_0x248997(0x287)]===_0x248997(0x27f)||config['basecoin']===_0x248997(0x1e0)||config['basecoin']==='PAXG')_0x18ad1f=_0x30f420*_0x298775[_0x248997(0x1f8)],_0x3c9c49=_0x30f420*_0x298775[_0x248997(0x2da)];else{if(usdBasecoins['includes'](config['basecoin']))_0x18ad1f=_0x30f420*_0x298775[_0x248997(0x1f8)]/_0x298775[_0x248997(0x2da)],_0x3c9c49=_0x30f420;else config[_0x248997(0x287)]===_0x248997(0x266)&&(_0x18ad1f=_0x30f420,_0x3c9c49=_0x30f420*_0x298775[_0x248997(0x2da)]/_0x298775[_0x248997(0x1f8)]);}return[_0x30f420,_0x18ad1f,_0x3c9c49];}function CurrencyFactor(_0x3e17e8,_0x34411d,_0x1e874b){const _0xf80579=_0x1b2526;let _0x387a48;if(_0x34411d===_0xf80579(0x27f)||_0x34411d===_0xf80579(0x1e0)||_0x34411d===_0xf80579(0x1bf))_0x387a48=_0x1e874b===_0xf80579(0x266)?_0x3e17e8['eur']:_0x3e17e8[_0xf80579(0x2da)];else{if(usdBasecoins[_0xf80579(0x160)](_0x34411d))_0x387a48=_0x1e874b===_0xf80579(0x266)?_0x3e17e8['eur']/_0x3e17e8[_0xf80579(0x2da)]:0x1;else _0x34411d==='EUR'&&(_0x387a48=_0x1e874b==='EUR'?0x1:_0x3e17e8[_0xf80579(0x2da)]/_0x3e17e8[_0xf80579(0x1f8)]);}return _0x387a48;}function getKPIs(_0x5aedec,_0x18471f=_0x1b2526(0x266)){const _0x45f5c1=_0x1b2526,_0x22d1ab=config[_0x45f5c1(0x287)],_0x32d0e3=lastBalances,_0x2eece2=currentCoins,_0x5304de=getNormalizedPerformance(),_0x1a9c5d=CurrencyFactor(_0x32d0e3,config[_0x45f5c1(0x287)],_0x18471f);let _0x13ffd5=0x0;_0x2eece2[_0x45f5c1(0x157)](_0x42aafb=>{const _0x148fc5=_0x45f5c1;_0x13ffd5+=_0x42aafb[_0x148fc5(0x143)]*_0x42aafb['last'];});_0x5aedec[_0x45f5c1(0x160)](_0x45f5c1(0x23e))&&(_0x13ffd5*=_0x1a9c5d);let _0x2bcbf9;if(_0x13ffd5!==0x0){if(_0x5aedec===_0x45f5c1(0x287)||_0x5aedec===_0x45f5c1(0x23e)){if(_0x5aedec===_0x45f5c1(0x287))_0x2bcbf9=(_0x13ffd5/startingBalances['basecoin']-0x1)*0x64;else{if(_0x18471f===_0x45f5c1(0x266))_0x2bcbf9=(_0x13ffd5/startingBalances[_0x45f5c1(0x1f8)]-0x1)*0x64;else _0x2bcbf9=(_0x13ffd5/startingBalances[_0x45f5c1(0x2da)]-0x1)*0x64;}}if(_0x5aedec[_0x45f5c1(0x160)](_0x45f5c1(0x27a))){let _0x555603=0x0;if(startingBalances[_0x45f5c1(0x1b1)])_0x2eece2[_0x45f5c1(0x157)](_0x363df0=>{const _0x4c571d=_0x45f5c1;let _0x439c25=startingBalances[_0x4c571d(0x1b1)][_0x4c571d(0x2d7)](_0x5c5c39=>_0x5c5c39[_0x4c571d(0x272)]===_0x363df0[_0x4c571d(0x272)]);if(_0x439c25&&_0x439c25[_0x4c571d(0x272)]&&_0x363df0[_0x4c571d(0x143)]!==0x0)_0x555603+=_0x439c25[_0x4c571d(0x143)]*_0x363df0[_0x4c571d(0x2ee)];});let _0x570e18=0x0;if(_0x5304de[_0x45f5c1(0x267)]!==0x0){let _0x15081a=_0x5304de[_0x5304de[_0x45f5c1(0x267)]-0x1];_0x570e18=_0x15081a[_0x45f5c1(0x2ca)];}_0x555603-=_0x570e18;let _0x1da256;_0x5aedec===_0x45f5c1(0x149)&&(_0x1da256=startingBalances[_0x45f5c1(0x287)]),_0x5aedec==='net-fiat'&&(_0x1da256=_0x18471f===_0x45f5c1(0x266)?startingBalances[_0x45f5c1(0x1f8)]:startingBalances[_0x45f5c1(0x2da)],_0x555603*=_0x1a9c5d),_0x2bcbf9=(_0x13ffd5-_0x555603)/_0x1da256*0x64,_0x13ffd5=_0x13ffd5-_0x555603;}if(_0x5aedec[_0x45f5c1(0x160)]('pnl')){if(_0x5304de['length']!==0x0&&_0x2eece2['length']!==0x0){let _0x58766a,_0x10992f=_0x5304de[_0x5304de['length']-0x1]['pnl'];_0x5aedec['includes'](_0x45f5c1(0x23e))?(_0x58766a=_0x18471f===_0x45f5c1(0x266)?startingBalances[_0x45f5c1(0x1f8)]:startingBalances['usd'],_0x10992f*=CurrencyFactor(_0x32d0e3,_0x22d1ab,_0x18471f)):_0x58766a=startingBalances[_0x45f5c1(0x287)],_0x2bcbf9=_0x10992f/_0x58766a*0x64,_0x13ffd5=_0x10992f;}}if(_0x2bcbf9){if(_0x2bcbf9<0x64)_0x2bcbf9=_0x2bcbf9[_0x45f5c1(0x274)](0x2);else{if(_0x2bcbf9<0x3e8)_0x2bcbf9=_0x2bcbf9['toFixed'](0x1);else _0x2bcbf9=_0x2bcbf9[_0x45f5c1(0x274)](0x0);}}else _0x2bcbf9=Number('0')['toFixed'](0x2);if(_0x13ffd5){if(Math[_0x45f5c1(0x2c2)](_0x13ffd5)<0.000001)_0x13ffd5=_0x13ffd5[_0x45f5c1(0x274)](0x2);else{if(Math['abs'](_0x13ffd5)<0.1)_0x13ffd5=_0x13ffd5[_0x45f5c1(0x274)](0x6);else{if(Math['abs'](_0x13ffd5)<0x1)_0x13ffd5=_0x13ffd5['toFixed'](0x5);else{if(Math['abs'](_0x13ffd5)<0xa)_0x13ffd5=_0x13ffd5[_0x45f5c1(0x274)](0x4);else{if(Math[_0x45f5c1(0x2c2)](_0x13ffd5)<0x64)_0x13ffd5=_0x13ffd5['toFixed'](0x3);else{if(Math[_0x45f5c1(0x2c2)](_0x13ffd5)<0x3e8)_0x13ffd5=_0x13ffd5[_0x45f5c1(0x274)](0x2);else _0x13ffd5=_0x13ffd5['toFixed'](0x2);}}}}}}else _0x13ffd5=Number('0')[_0x45f5c1(0x274)](0x2);}else _0x2bcbf9=Number('0')[_0x45f5c1(0x274)](0x2);if(_0x2bcbf9>=0x0)_0x2bcbf9='+'+_0x2bcbf9;return{'value':_0x13ffd5,'change':_0x2bcbf9};}async function getStartingBalances(_0x31a2c6,_0x28daae=!![]){const _0x4cc8c4=_0x1b2526;if(_0x31a2c6[_0x4cc8c4(0x267)]!==0x0){const [_0x13d1ab,_0x38338d,_0x4665b0]=getPerf(_0x31a2c6[0x0],!![]);let _0x1c4fbd=[];config[_0x4cc8c4(0x1c2)][_0x4cc8c4(0x157)](_0x288397=>{const _0x9e9833=_0x4cc8c4;let _0x581a64=0x0,_0x214d69;config[_0x9e9833(0x2fc)][_0x9e9833(0x157)](_0x17a066=>{const _0x574fe4=_0x9e9833;let _0x14b56c=_0x17a066['changes']['find'](_0x369398=>_0x369398[_0x574fe4(0x272)]==_0x288397[_0x574fe4(0x272)]);if(_0x14b56c){_0x581a64+=_0x14b56c[_0x574fe4(0x143)];if(!_0x214d69)_0x214d69=_0x14b56c['price'];}}),_0x1c4fbd[_0x9e9833(0x21d)]({'coin':_0x288397['coin'],'number':_0x581a64,'initialprice':_0x214d69});});const _0x5c8ee2={'basecoin':_0x13d1ab,'eur':_0x38338d,'usd':_0x4665b0,'coins':_0x1c4fbd};if(_0x28daae)proxyEmit('starting-balances',_0x5c8ee2);startingBalances=_0x5c8ee2;}}function headlessMode(_0x941d9b){const _0x41a8e6=_0x1b2526;let _0x2b23b0=_0x941d9b[_0x41a8e6(0x1c2)],_0x9552c4=_0x941d9b['threshold'],_0x33604c=[];for(let _0x5928cd of _0x2b23b0){if(_0x5928cd[_0x41a8e6(0x272)]!=config[_0x41a8e6(0x287)]){if(_0x5928cd['delta']>=_0x9552c4/0x64){if(_0x5928cd[_0x41a8e6(0x259)])_0x33604c['push'](_0x5928cd);}else{if(_0x5928cd[_0x41a8e6(0x172)]<=-_0x9552c4/0x64){if(_0x5928cd[_0x41a8e6(0x259)])_0x33604c[_0x41a8e6(0x21d)](_0x5928cd);}}}}_0x33604c[_0x41a8e6(0x267)]>0x0&&placeOrder(_0x33604c);}function notifyBalance(_0x220abe){const _0x1971f0=_0x1b2526;let _0x580339=_0x220abe['portfolio'],_0x5cc2ef=_0x220abe[_0x1971f0(0x30c)],_0x11b786=[];for(let _0x440eeb of _0x580339){if(_0x440eeb[_0x1971f0(0x272)]!=config['basecoin']){if(_0x440eeb[_0x1971f0(0x172)]>=_0x5cc2ef/0x64){if(_0x440eeb['valid'])_0x11b786[_0x1971f0(0x21d)](_0x440eeb);}else{if(_0x440eeb[_0x1971f0(0x172)]<=-_0x5cc2ef/0x64){if(_0x440eeb[_0x1971f0(0x259)])_0x11b786['push'](_0x440eeb);}}}}if(_0x11b786['length']>0x0){let _0x453065=_0x11b786[_0x1971f0(0x1a5)](_0x4908fa=>_0x4908fa['coin']);_0x453065['sort']();let _0x570134=_0x453065[_0x1971f0(0x139)](',\x20');if(!lastCoinsToBalance)logHistory('warning',_0x1971f0(0x26c));lastCoinsToBalance=_0x570134;}}function symbolToCoin(_0x17bbb1){const _0x216f86=_0x1b2526;let _0x1b025e;if(_0x17bbb1[_0x216f86(0x160)]('/'+config['basecoin']))_0x1b025e=_0x17bbb1[_0x216f86(0x168)]('/'+config[_0x216f86(0x287)],'');if(_0x17bbb1[_0x216f86(0x160)](config[_0x216f86(0x287)]+'/'))_0x1b025e=_0x17bbb1[_0x216f86(0x168)](config['basecoin']+'/','');return _0x1b025e;}function setLockOrders(_0x4482c4){const _0xd0cbf4=_0x1b2526;lockOrders=_0x4482c4,logger['debug'](_0xd0cbf4(0x2cf)+Object[_0xd0cbf4(0x18f)](ORDERS)[lockOrders]);}async function unlockOrders(_0x166745=![]){const _0x5567a0=_0x1b2526;if(allOrdersPlaced&&lockOrders==ORDERS['LOCKED']){setLockOrders(ORDERS['UNLOCKING']);if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);if(_0x166745){const _0x2a44af=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x2a44af,setBlockTransactionDetection(![]);}validateOrdersState=_0x5567a0(0x18d),persistOpenOrders([]),setLockOrders(ORDERS[_0x5567a0(0x227)]);}}async function validateOrders(_0x4d7270){const _0x55b771=_0x1b2526;if(_0x4d7270)validateOrdersState=_0x4d7270;logger[_0x55b771(0x2df)](_0x55b771(0x144)+validateOrdersState+_0x55b771(0x20f)+Object[_0x55b771(0x18f)](ORDERS)[lockOrders]);let _0x1a2ba3=[],_0x351b44=config[_0x55b771(0x2fb)]==_0x55b771(0x1c8)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x55b771(0x1d1)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x55b771(0x312)])return;logger[_0x55b771(0x2df)](_0x55b771(0x1e8)+validateOrdersState);for(let _0xe75946=lastOrders[_0x55b771(0x267)]-0x1;_0xe75946>=0x0;_0xe75946--){let _0x2a6754=lastOrders[_0xe75946],_0xf8ffcb=![];_0x2a6754['filled']>0x0&&(_0xf8ffcb=!![]),_0x1a2ba3[_0x55b771(0x21d)](_0xf8ffcb),_0xf8ffcb&&config[_0x55b771(0x2fb)]!=_0x55b771(0x1c8)&&logHistory(_0x55b771(0x2d0),_0x55b771(0x20a)+_0x2a6754[_0x55b771(0x293)]+'\x20'+_0x2a6754[_0x55b771(0x1f6)]+'\x20#'+formatResult(_0x2a6754[_0x55b771(0x251)],0x8)+'\x20@'+formatResult(_0x2a6754[_0x55b771(0x169)],0x8)),_0xf8ffcb&&lastOrders[_0x55b771(0x246)](_0xe75946,0x1);}persistOpenOrders(lastOrders);const _0x3deb63=coolingDown?'balancing\x20resumes\x20when\x20cooldown\x20ends':_0x55b771(0x309);if(validateOrdersState==_0x55b771(0x18d)){validateOrdersState=_0x55b771(0x226);if(_0x1a2ba3['includes'](![])){}else await unlockOrders();}else{if(validateOrdersState==_0x55b771(0x226)){if(_0x1a2ba3[_0x55b771(0x160)](![])){}else await unlockOrders();}else{if(validateOrdersState==_0x55b771(0x2e3)){let _0x4c012e=!![];if(_0x1a2ba3['includes'](![])){if(config[_0x55b771(0x2fb)]=='market')logHistory('success','Order(s)\x20not\x20validated\x20after\x20'+Math['round'](_0x351b44*validateOrderInterval/0xea60)+_0x55b771(0x2f0)+_0x3deb63),await unlockOrders(!![]);else{_0x4c012e=await cancelOrders();if(_0x4c012e)logHistory(_0x55b771(0x22b),'Unfilled\x20order(s)\x20canceled\x20after\x20'+Math[_0x55b771(0x1c6)](_0x351b44*validateOrderInterval/0xea60)+_0x55b771(0x2f0)+_0x3deb63),await unlockOrders(!![]);else{validateOrdersState='ongoing',logHistory('error',_0x55b771(0x165)+Math[_0x55b771(0x1c6)](_0x351b44*validateOrderInterval/0xea60)+_0x55b771(0x2f0)+_0x3deb63),logHistory(_0x55b771(0x18a),'Will\x20continue\x20to\x20wait\x20for\x20order(s)\x20to\x20be\x20filled\x20and\x20try\x20to\x20cancel\x20again\x20later');const _0x494464=config['ordertype']=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0x55b771(0x1d1)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x3bc2f7=_0x55b771;validateOrders(_0x3bc2f7(0x2e3));},_0x494464);}}}else await unlockOrders(!![]);}else{if(validateOrdersState=='no\x20open\x20orders'){if(config[_0x55b771(0x2fb)]!=_0x55b771(0x1c8))logHistory('success','No\x20more\x20open\x20orders\x20-\x20'+_0x3deb63);await unlockOrders(!![]);}}}}}async function cancelOrders(){const _0x25840b=_0x1b2526;let _0xfb8b6a=!![],_0x2a890d;for(const _0x1cf672 of lastOrders){let _0x2e64a9=![],_0x55f131=0x0;while(!_0x2e64a9&&_0x55f131<maxRetries){try{const _0x3abc62=await exchange[_0x25840b(0x242)](_0x1cf672[_0x25840b(0x2bf)],_0x1cf672[_0x25840b(0x293)]);_0x2e64a9=!![];}catch(_0x30535b){_0x30535b[_0x25840b(0x236)]()[_0x25840b(0x160)](_0x25840b(0x24e))||_0x30535b[_0x25840b(0x236)]()[_0x25840b(0x160)](_0x25840b(0x1bc))?_0x2e64a9=!![]:(_0x2a890d=_0x30535b,_0x2e64a9=![]);}!_0x2e64a9&&(_0x55f131++,await sleep(retryInterval));}_0xfb8b6a=_0xfb8b6a&&_0x2e64a9;}return!_0xfb8b6a&&await handleError(_0x2a890d,'cancelOrders()'),_0xfb8b6a;}async function initCoinResults(_0x16a626){const _0x2e7e89=_0x1b2526;_0x16a626?logger['debug']('Resetting\x20coin\x20results:\x20'+_0x16a626):logger[_0x2e7e89(0x2df)](_0x2e7e89(0x22c)),config[_0x2e7e89(0x1c2)][_0x2e7e89(0x157)](_0x1e0848=>{const _0x4e9b92=_0x2e7e89;if(!_0x1e0848[_0x4e9b92(0x1f3)]&&_0x1e0848['coin']!=config[_0x4e9b92(0x287)]){const _0x1e9c34=currentCoins[_0x4e9b92(0x2d7)](_0x4b60d6=>_0x4b60d6['coin']==_0x1e0848[_0x4e9b92(0x272)]),_0x321430=gTicker[noslash(_0x1e0848[_0x4e9b92(0x293)])];let _0x257d10=_0x1e9c34?_0x1e9c34[_0x4e9b92(0x143)]:null,_0x5c0d9a=_0x1e0848[_0x4e9b92(0x186)]?0x1/_0x321430:_0x321430,_0x1ee1b6;config[_0x4e9b92(0x2fc)][_0x4e9b92(0x157)](_0x27d063=>{const _0x2dd6bf=_0x4e9b92;!_0x1ee1b6&&(_0x1ee1b6=_0x27d063[_0x2dd6bf(0x14c)][_0x2dd6bf(0x2d7)](_0x359cc3=>_0x359cc3[_0x2dd6bf(0x272)]==_0x1e0848['coin']),_0x1ee1b6&&(_0x257d10=_0x1ee1b6[_0x2dd6bf(0x143)],_0x5c0d9a=_0x1ee1b6['price']));});let _0x25f570=dbCoinResults[_0x4e9b92(0x2f6)](_0x4e9b92(0x1b1))[_0x4e9b92(0x2d7)]({'coin':_0x1e0848[_0x4e9b92(0x272)]})['value']();if(!_0x25f570){const _0x37220f={'coin':_0x1e0848[_0x4e9b92(0x272)],'number':_0x257d10,'breakeven':_0x5c0d9a,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x4e9b92(0x2f6)]('coins')[_0x4e9b92(0x21d)](_0x37220f)[_0x4e9b92(0x21c)]();}else{if(_0x16a626&&_0x1e0848[_0x4e9b92(0x272)]==_0x16a626){const _0x38b7d0={'coin':_0x1e0848[_0x4e9b92(0x272)],'number':_0x257d10,'breakeven':_0x5c0d9a,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get'](_0x4e9b92(0x1b1))['find']({'coin':_0x1e0848['coin']})[_0x4e9b92(0x13c)](_0x38b7d0)['write']();}}}});}async function placeOrder(_0x11a3b5){const _0x575d01=_0x1b2526,_0x4537f3=config[_0x575d01(0x2fb)]==_0x575d01(0x1c8)?_0x575d01(0x1c8):'limit';if(lockOrders==ORDERS[_0x575d01(0x227)]&&!coolingDown){setLockOrders(ORDERS[_0x575d01(0x312)]);while(transactionDetectionOngoing){await sleep(0x64);}logger['debug'](_0x575d01(0x204)+_0x11a3b5[_0x575d01(0x1a5)](_0x30eaa0=>_0x30eaa0['coin'])[_0x575d01(0x139)](',\x20')),lastCoinsToBalance='',allOrdersPlaced=![],validateOrdersState=_0x575d01(0x18d);let _0x51ca44=![];lastOrders=[];const _0x42f005=config[_0x575d01(0x30c)];for(const _0x5eafda of _0x11a3b5){let _0x27b35f,_0x2c8feb,_0x3381c3,_0x51c39d,_0x52f614,_0x247539=_0x5eafda[_0x575d01(0x293)];logger[_0x575d01(0x2df)](_0x575d01(0x16c)+_0x5eafda['coin']+'\x20'+_0x5eafda[_0x575d01(0x143)]+'\x20'+_0x5eafda[_0x575d01(0x2ee)]+'\x20'+_0x5eafda['distribution']+'%\x20'+_0x5eafda[_0x575d01(0x142)]+'%\x20'+(0x64*_0x5eafda[_0x575d01(0x172)])[_0x575d01(0x274)](0x2)+_0x575d01(0x195)+_0x42f005[_0x575d01(0x274)](0x2)+'%)'),insufficientFundsWarningSent=insufficientFundsWarningSent[_0x575d01(0x14a)](_0x3f996a=>_0x3f996a!==_0x5eafda[_0x575d01(0x272)]);const _0x3d5222=currentCoins[_0x575d01(0x2d7)](_0x244c7c=>_0x244c7c['coin']==_0x5eafda[_0x575d01(0x272)]);_0x3d5222&&(_0x3d5222['prevnumber']=_0x5eafda[_0x575d01(0x143)]);try{const _0x5dbf3c=await exchange[_0x575d01(0x2e9)](_0x247539);_0x27b35f=_0x5eafda[_0x575d01(0x186)]?0x1/_0x5eafda['last']:_0x5eafda[_0x575d01(0x2ee)],_0x2c8feb=_0x5dbf3c[_0x575d01(0x14d)],_0x3381c3=_0x5dbf3c['ask'];_0x5eafda[_0x575d01(0x186)]?(_0x51c39d=_0x5eafda[_0x575d01(0x1f6)]==_0x575d01(0x193)?_0x575d01(0x1b4):_0x575d01(0x193),_0x52f614=Math['abs'](_0x5eafda[_0x575d01(0x22d)])/_0x27b35f):(_0x51c39d=_0x5eafda['side'],_0x52f614=Math['abs'](_0x5eafda[_0x575d01(0x22d)]));_0x4537f3==_0x575d01(0x136)&&(config[_0x575d01(0x2fb)]==_0x575d01(0x1ea)&&(_0x27b35f=_0x51c39d==_0x575d01(0x193)?_0x2c8feb:_0x3381c3),config[_0x575d01(0x2fb)]=='limit-low'&&(_0x27b35f=_0x51c39d==_0x575d01(0x193)?_0x3381c3:_0x2c8feb));_0x52f614=formatResult(_0x52f614,0x8),_0x27b35f=formatResult(_0x27b35f,0x8);const _0x1705fc=_0x51c39d==_0x575d01(0x1b4)?config[_0x575d01(0x291)]?String[_0x575d01(0x208)]('0x'+config[_0x575d01(0x291)])+'\x20':'':config[_0x575d01(0x228)]?String[_0x575d01(0x208)]('0x'+config['emojibuy'])+'\x20':'',_0x155427=_0x4537f3==_0x575d01(0x1c8)?_0x575d01(0x295):config[_0x575d01(0x2fb)]==_0x575d01(0x1ea)?_0x575d01(0x296):_0x575d01(0x237),_0x4272bd=(Math[_0x575d01(0x1ab)](Math[_0x575d01(0x223)]()*0x35a4e900)+0x5f5e100)['toString']();lastOrders[_0x575d01(0x21d)]({'customId':_0x4272bd,'symbol':_0x247539,'coin':_0x5eafda[_0x575d01(0x272)],'amount':_0x52f614,'price':_0x27b35f,'side':_0x51c39d,'reverse':_0x5eafda[_0x575d01(0x186)],'filled':0x0});let _0x50de37;_0x4537f3==_0x575d01(0x1c8)?_0x51c39d==_0x575d01(0x193)&&[_0x575d01(0x2b3),_0x575d01(0x1aa),_0x575d01(0x161),_0x575d01(0x1a3),_0x575d01(0x2c8),_0x575d01(0x27b)][_0x575d01(0x160)](config[_0x575d01(0x2e1)])?_0x50de37=await exchange['createOrder'](_0x247539,_0x4537f3,_0x51c39d,_0x52f614,_0x27b35f):_0x50de37=await exchange[_0x575d01(0x256)](_0x247539,_0x4537f3,_0x51c39d,_0x52f614,undefined):_0x50de37=await exchange[_0x575d01(0x256)](_0x247539,_0x4537f3,_0x51c39d,_0x52f614,_0x27b35f);const _0x517065=lastOrders['length']-0x1;if(_0x517065>=0x0&&lastOrders[_0x517065][_0x575d01(0x1b7)]==_0x4272bd){lastOrders[_0x517065][_0x575d01(0x2bf)]=_0x50de37['id'];if(_0x50de37[_0x575d01(0x146)])lastOrders[_0x517065][_0x575d01(0x146)]=_0x50de37[_0x575d01(0x146)];if(_0x50de37[_0x575d01(0x169)])lastOrders[_0x517065][_0x575d01(0x169)]=_0x50de37[_0x575d01(0x169)];lastOrders[_0x517065][_0x575d01(0x221)]=_0x50de37[_0x575d01(0x221)];}if(_0x50de37['amount'])_0x52f614=_0x50de37[_0x575d01(0x146)];if(_0x50de37['price'])_0x27b35f=_0x50de37['price'];if(_0x4537f3==_0x575d01(0x1c8))logHistory('order',''+_0x1705fc+_0x155427+'\x20order:\x20'+_0x247539+'\x20'+_0x51c39d+'\x20#'+formatResult(_0x52f614,0x8)+'\x20@'+formatResult(_0x27b35f,0x8));else logHistory(_0x575d01(0x2d0),''+_0x1705fc+_0x155427+_0x575d01(0x19e)+_0x247539+'\x20'+_0x51c39d+'\x20#'+formatResult(_0x52f614,0x8)+'\x20@'+formatResult(_0x27b35f,0x8));logger['debug'](_0x575d01(0x167)+_0x50de37['id']+_0x575d01(0x1e2)+_0x4272bd);if(config[_0x575d01(0x213)]!=0x0){let _0x3fe708=null;if(cooldownTracker['length']==config[_0x575d01(0x213)]-0x1)_0x3fe708=cooldownTracker[_0x575d01(0x268)]();const _0x230b13=getTimeStamp();cooldownTracker[_0x575d01(0x21d)](_0x230b13);if(_0x3fe708){const _0x302252=fns[_0x575d01(0x253)](new Date(_0x230b13),new Date(_0x3fe708));if(_0x302252<cooldownInterval){logHistory('error',_0x575d01(0x2f7)+config[_0x575d01(0x213)]+'\x20orders\x20in\x20less\x20than\x20'+cooldownInterval/0x3c+_0x575d01(0x166)+cooldownPeriod/(0xe10*0x3e8)+_0x575d01(0x238)),coolingDown=!![];break;}}}}catch(_0x445a37){if(_0x445a37[_0x575d01(0x236)]()['includes']('MIN_NOTIONAL'))lastOrders=lastOrders[_0x575d01(0x14a)](_0x467933=>_0x467933[_0x575d01(0x293)]!=_0x247539),logHistory(_0x575d01(0x18a),'Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x247539),_0x51ca44=!![];else{if(_0x445a37[_0x575d01(0x236)]()[_0x575d01(0x160)](_0x575d01(0x30d)))lastOrders=lastOrders[_0x575d01(0x14a)](_0x107e0e=>_0x107e0e[_0x575d01(0x293)]!=_0x247539),logHistory('error','Order\x20amount\x20is\x20invalid:\x20'+_0x247539),_0x51ca44=!![];else{if(_0x445a37[_0x575d01(0x236)]()[_0x575d01(0x160)](_0x575d01(0x1bc)))lastOrders=lastOrders[_0x575d01(0x14a)](_0x44ce1d=>_0x44ce1d['symbol']!=_0x247539),logHistory(_0x575d01(0x18a),_0x575d01(0x2d1)+_0x247539),logger[_0x575d01(0x2df)](_0x445a37),_0x51ca44=!![];else _0x445a37['toString']()[_0x575d01(0x160)](_0x575d01(0x1d4))?(lastOrders=lastOrders[_0x575d01(0x14a)](_0x31cd08=>_0x31cd08['symbol']!=_0x247539),logHistory(_0x575d01(0x18a),_0x575d01(0x1d3)+_0x247539),_0x51ca44=!![]):(lastOrders=lastOrders['filter'](_0x5dd684=>_0x5dd684[_0x575d01(0x293)]!=_0x247539),await handleError(_0x445a37,_0x575d01(0x2a0),_0x247539));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x575d01(0x267)]>0x0){const _0x1ef119=config[_0x575d01(0x2fb)]==_0x575d01(0x1c8)?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x11c918=_0x575d01;validateOrders(_0x11c918(0x2e3));},_0x1ef119);}else unlockOrders();_0x51ca44&&config[_0x575d01(0x278)]&&(logHistory(_0x575d01(0x18a),_0x575d01(0x294)+pauseBotMsg),await pauseBot(pauseBotInterval)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x575d01(0x22b),'Cooldown\x20ended\x20-\x20balancing\x20resumed'));}else{if(coolingDown)!config[_0x575d01(0x278)]&&logHistory(_0x575d01(0x18a),'Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode');else lockOrders!=ORDERS[_0x575d01(0x227)]&&(!config[_0x575d01(0x278)]&&(config[_0x575d01(0x2fb)]==_0x575d01(0x1c8)?logHistory(_0x575d01(0x18a),_0x575d01(0x1f7)):logHistory(_0x575d01(0x18a),_0x575d01(0x269))));}}function persistOpenOrders(_0x547478){const _0x5df212=_0x1b2526,_0x23260c={...config,'openOrders':_0x547478};let _0x412f3e=dbConfig[_0x5df212(0x2f6)](_0x5df212(0x1e1))[_0x5df212(0x2d7)]({'botID':botID})[_0x5df212(0x2cb)]();_0x412f3e&&dbConfig['get'](_0x5df212(0x1e1))[_0x5df212(0x2d7)]({'botID':botID})[_0x5df212(0x13c)](_0x23260c)['write']();}function restoreOrders(){const _0x26597c=_0x1b2526;let _0x30bb2b;config[_0x26597c(0x222)]&&allOpenOrders['forEach'](_0x2fddb0=>{const _0x15939f=_0x26597c,_0x4d4c5e=config['openOrders']['find'](_0x3e5d6b=>_0x3e5d6b[_0x15939f(0x2bf)]==_0x2fddb0['id']);_0x4d4c5e&&(lastOrders['push'](_0x4d4c5e),_0x30bb2b=_0x2fddb0['timestamp']);});if(lastOrders[_0x26597c(0x267)]>0x0){setLockOrders(ORDERS['LOCKED']),validateOrdersState=_0x26597c(0x226),allOrdersPlaced=!![];const _0x306912=new Date()[_0x26597c(0x2b9)](),_0xf08591=config['ordertype']==_0x26597c(0x1c8)?validateOrderTimeout*0x3c*0x3e8:config[_0x26597c(0x1d1)]*0x3c*0x3e8;if(_0x30bb2b+_0xf08591>_0x306912){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x30bb2b+_0xf08591-_0x306912);}else validateOrders(_0x26597c(0x2e3));}}async function sendMetricsTelegram(){const _0x33823d=_0x1b2526;if(!coinsLoaded){process[_0x33823d(0x25a)]({'telegrammsg':_0x33823d(0x1ad)},_0x5f1e2b=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x1bc228='';if(config['showname'])_0x1bc228=_0x33823d(0x1eb)+config[_0x33823d(0x1bb)]+_0x33823d(0x19c);else _0x1bc228=_0x33823d(0x2a6)+botID+_0x33823d(0x19c);const _0x370920=config[_0x33823d(0x287)],_0x4fe0d5=config['fiat'],_0x31d73c=getKPIs(_0x33823d(0x287)),_0x4a5173=getKPIs(_0x33823d(0x23e),_0x4fe0d5),_0x4393fd=getKPIs('net-basecoin'),_0x44dacf=getKPIs('net-fiat',_0x4fe0d5),_0x3b345a=getKPIs('pnl-basecoin'),_0x190121=getKPIs(_0x33823d(0x2ac),_0x4fe0d5);_0x370920[_0x33823d(0x160)](_0x4fe0d5)?(_0x1bc228+=_0x33823d(0x2f4),_0x1bc228+='Value\x20'+_0x370920+':\x20'+_0x31d73c[_0x33823d(0x2cb)]+'\x20('+_0x31d73c['change']+'%)\x0a',_0x1bc228+=_0x33823d(0x20b)+_0x370920+':\x20'+_0x4393fd[_0x33823d(0x2cb)]+'\x20('+_0x4393fd[_0x33823d(0x249)]+'%)\x0a',_0x1bc228+=_0x33823d(0x1a4)+_0x370920+':\x20'+_0x3b345a[_0x33823d(0x2cb)]+'\x20('+_0x3b345a[_0x33823d(0x249)]+_0x33823d(0x2ce),_0x1bc228+=_0x33823d(0x281)):(_0x1bc228+='<pre>',_0x1bc228+=_0x33823d(0x310)+_0x370920+':\x20'+_0x31d73c['value']+'\x20('+_0x31d73c['change']+'%)\x0a',_0x1bc228+=_0x33823d(0x310)+_0x4fe0d5+':\x20'+_0x4a5173[_0x33823d(0x2cb)]+'\x20('+_0x4a5173[_0x33823d(0x249)]+'%)\x0a',_0x1bc228+=_0x33823d(0x20b)+_0x370920+':\x20'+_0x4393fd[_0x33823d(0x2cb)]+'\x20('+_0x4393fd[_0x33823d(0x249)]+_0x33823d(0x2ce),_0x1bc228+=_0x33823d(0x20b)+_0x4fe0d5+':\x20'+_0x44dacf[_0x33823d(0x2cb)]+'\x20('+_0x44dacf[_0x33823d(0x249)]+_0x33823d(0x2ce),_0x1bc228+='PnL\x20'+_0x370920+':\x20'+_0x3b345a[_0x33823d(0x2cb)]+'\x20('+_0x3b345a[_0x33823d(0x249)]+_0x33823d(0x2ce),_0x1bc228+=_0x33823d(0x1a4)+_0x4fe0d5+':\x20'+_0x190121[_0x33823d(0x2cb)]+'\x20('+_0x190121[_0x33823d(0x249)]+'%)\x0a',_0x1bc228+=_0x33823d(0x281)),process[_0x33823d(0x25a)]({'telegrammsg':_0x1bc228},_0x4c63f7=>{});}async function sendPortfolioTelegram(){const _0x2feb56=_0x1b2526;if(!coinsLoaded||!currentCoins[0x0][_0x2feb56(0x2ae)]&&currentCoins[0x0][_0x2feb56(0x2ae)]!=0x0){process[_0x2feb56(0x25a)]({'telegrammsg':_0x2feb56(0x1ad)},_0x3664fe=>{});return;}let _0x48f9c8='';if(config[_0x2feb56(0x18e)])_0x48f9c8=_0x2feb56(0x1eb)+config[_0x2feb56(0x1bb)]+_0x2feb56(0x14b);else _0x48f9c8=_0x2feb56(0x2a6)+botID+_0x2feb56(0x14b);_0x48f9c8+=_0x2feb56(0x2f4),_0x48f9c8+=_0x2feb56(0x250),_0x48f9c8+=_0x2feb56(0x2d4),_0x48f9c8+=_0x2feb56(0x250),currentCoins['forEach'](_0x30006c=>{const _0x3972e0=_0x2feb56;_0x48f9c8+=_0x30006c[_0x3972e0(0x272)][_0x3972e0(0x15a)](0x7)+'|\x20'+formatPad(_0x30006c[_0x3972e0(0x2ae)],0x2,0x6)+'|\x20'+formatPad(_0x30006c[_0x3972e0(0x142)],0x2,0x6)+'|\x20'+(_0x30006c[_0x3972e0(0x142)]==0x0?''[_0x3972e0(0x1cc)](0x6):formatPad(_0x30006c[_0x3972e0(0x172)]*0x64,0x2,0x6))+'\x0a';}),_0x48f9c8+=_0x2feb56(0x281),process['send']({'telegrammsg':_0x48f9c8},_0x506059=>{});}function formatPad(_0x18054b,_0x2c3d6e,_0x47adcc){const _0x4a129a=_0x1b2526,_0x16b170=formatResultString(_0x18054b,_0x2c3d6e);return _0x16b170?_0x16b170[_0x4a129a(0x1cc)](_0x47adcc):''['padStart'](_0x47adcc);}function logHistory(_0xcd50f1,_0x10f034,_0x538361=''){const _0x9330aa=_0x1b2526;logger['full'](''+_0x10f034);let _0x12cd1a={'time':getTimeStamp(),'type':_0xcd50f1,'event':_0x10f034};dbLogs[_0x9330aa(0x2f6)](_0x9330aa(0x30f))[_0x9330aa(0x21d)](_0x12cd1a)[_0x9330aa(0x21c)]();if(_0x538361=='')_0x538361=_0x10f034;proxyEmit(_0x9330aa(0x148),{'log':_0x12cd1a,'summary':_0x538361}),process[_0x9330aa(0x25a)]({'telegram':{..._0x12cd1a,'botname':config['botname'],'showname':config[_0x9330aa(0x18e)]}},_0x258b19=>{});}function emitHistory(_0x436249={}){const _0x483aa3=_0x1b2526;Object[_0x483aa3(0x18f)](_0x436249)[_0x483aa3(0x267)]==0x0&&(_0x436249={'type':[_0x483aa3(0x2d0),_0x483aa3(0x148)],'event':'','page':0x1});if(_0x436249['type'][_0x483aa3(0x160)](_0x483aa3(0x148)))_0x436249['type']['splice'](_0x436249[_0x483aa3(0x178)][_0x483aa3(0x198)]('event'),0x1,_0x483aa3(0x18a),_0x483aa3(0x2c9),_0x483aa3(0x22b));if(dbLogs[_0x483aa3(0x2bd)](_0x483aa3(0x30f))[_0x483aa3(0x2cb)]()){let _0x5dc381=dbLogs[_0x483aa3(0x2f6)](_0x483aa3(0x30f))[_0x483aa3(0x14a)](_0x285e71=>{const _0xc7d4d6=_0x483aa3;if(_0x436249['type'][_0xc7d4d6(0x267)]==0x0)return![];else return _0x436249['type'][_0xc7d4d6(0x160)](_0x285e71[_0xc7d4d6(0x178)]);})[_0x483aa3(0x14a)](_0x21be0f=>{const _0x6f8d0b=_0x483aa3;if(_0x436249['event']=='')return!![];else return _0x21be0f[_0x6f8d0b(0x148)][_0x6f8d0b(0x23b)]()[_0x6f8d0b(0x160)](_0x436249[_0x6f8d0b(0x148)][_0x6f8d0b(0x23b)]());})[_0x483aa3(0x28c)](_0x483aa3(0x1ae)),_0x7edc52=_0x5dc381[_0x483aa3(0x2cb)]()[_0x483aa3(0x267)];_0x5dc381=_0x5dc381[_0x483aa3(0x186)]()[_0x483aa3(0x248)]((_0x436249[_0x483aa3(0x30a)]-0x1)*logPageSize,_0x436249[_0x483aa3(0x30a)]*logPageSize-0x1)[_0x483aa3(0x186)]()[_0x483aa3(0x2cb)](),proxyEmit(_0x483aa3(0x203),{'logs':_0x5dc381,'total':_0x7edc52});}else proxyEmit(_0x483aa3(0x203),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x13fc17){const _0x50451d=_0x1b2526;if(dbLogs[_0x50451d(0x2bd)](_0x50451d(0x30f))[_0x50451d(0x2cb)]()){const _0x3a81b5=dbLogs[_0x50451d(0x2f6)](_0x50451d(0x30f))[_0x50451d(0x28c)](_0x50451d(0x1ae))[_0x50451d(0x14a)](_0x4429b2=>{const _0x21938b=_0x50451d;return _0x4429b2[_0x21938b(0x178)]==_0x21938b(0x2d0);})['value']();dbLogs['get'](_0x50451d(0x30f))['remove']()[_0x50451d(0x21c)](),dbLogs[_0x50451d(0x2f6)](_0x50451d(0x30f))[_0x50451d(0x13c)](_0x3a81b5)[_0x50451d(0x21c)](),emitHistory(_0x13fc17);}}async function pauseBot(_0x1463c9=pauseBotIntervalShort,_0x82986b,_0xc5489f,_0x392080=![]){const _0x12b143=_0x1b2526,_0x1b5c7f=new Date()[_0x12b143(0x2b9)]();if(!lastErrorShown||_0x1b5c7f-lastErrorShown>=_0x1463c9){lastErrorShown=_0x1b5c7f;if(!lastBotPause)lastBotPause=_0x1b5c7f,consecutivePauses=0x1;else{if(_0x1b5c7f-lastBotPause-_0x1463c9<0x5a*0x3e8){consecutivePauses++;if(consecutivePauses>maxPauseRetries){if(_0x392080){logHistory(_0x12b143(0x18a),_0x82986b+'\x20>\x20stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();return;}else logHistory(_0x12b143(0x18a),_0x82986b+pauseBotMsg),_0x1463c9=pauseBotInterval;}}else consecutivePauses=0x1;lastBotPause=_0x1b5c7f;}_0xc5489f?logger['debug']('('+consecutivePauses+')\x20'+_0x82986b+'\x20>\x20details:',_0xc5489f):logger[_0x12b143(0x2df)]('('+consecutivePauses+')\x20'+_0x82986b);if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);await sleep(_0x1463c9),botPaused=![],_0x1463c9==pauseBotIntervalShort?resumeBot(!![]):resumeBot(![]);}}}async function killBot(){const _0x5b862d=_0x1b2526;botPaused=!![],await sleep(0x3e8),process[_0x5b862d(0x25a)]({'stop':'kill'},_0x5beea8=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x5a1266,_0x8dccb3,_0xff443e=![]){const _0x28865f=_0x1b2526;if(botPaused)return;let _0x1163e8;const _0x594766=config[_0x28865f(0x2e1)]||_0x28865f(0x2b1);if(_0x8dccb3)logger[_0x28865f(0x2df)](_0x28865f(0x26a)+_0x8dccb3);const _0x384ea6=()=>{const _0x253160=_0x28865f;loading[_0x253160(0x18a)]=_0x253160(0x302),emitLoadingProgress();};if(_0x5a1266[_0x28865f(0x236)]()[_0x28865f(0x160)](_0x28865f(0x212)))logHistory(_0x28865f(0x18a),_0x594766+'\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)'),_0x384ea6();else{if(_0x5a1266[_0x28865f(0x236)]()['includes'](_0x28865f(0x197)))logHistory('error',_0x594766+_0x28865f(0x25b)),_0x384ea6();else{if(_0x5a1266[_0x28865f(0x236)]()[_0x28865f(0x160)](_0x28865f(0x2a2)))config['apiPassword']?_0x1163e8=_0x594766+_0x28865f(0x2a3):_0x1163e8=_0x594766+'\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange',logHistory(_0x28865f(0x18a),_0x1163e8+_0x28865f(0x182)),_0x384ea6();else{if(_0x5a1266['toString']()['includes'](_0x28865f(0x1ec)))logHistory(_0x28865f(0x18a),_0x594766+'\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)'),_0x384ea6();else{if(!_0xff443e)await handleError(_0x5a1266,null);}}}}}function _0x45fe(){const _0x1a434f=['sandbox','exchange\x20reload','padStart','14248HTvUYw','total','createWriteStream','function','timeout','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','must\x20be\x20greater\x20than\x20minimum\x20amount','stringify','2\x20-\x20handling\x20FILLED\x20order:\x20','coin-loading-progress','USDT','balances','operatorId','2.6.0','isBefore','update-liquidity','startprice',':\x20Bot\x20','ETH','bot','\x20|\x20Custom\x20ID:\x20','storeConfiguration','1\x20-\x20FILLED\x20known\x20order:\x20','getHours','orderstatus','bots','2\x20-\x20Validate\x20orders:\x20','\x20blocked\x20API\x20(RateLimitExceeded)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','limit-high','<b>','PermissionDenied','Invalid\x20symbol:\x20','\x20-\x20go\x20back\x20and\x20try\x20again','colorscheme','\x20API\x20key\x20is\x20invalid','\x20|\x20','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','excluded','memoryUsage','testApi','side','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','eur','sendPortfolioTelegram','format','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','data','portfolio1','market_cap','apiPassword','Error\x20details:','isEqual','portfolio2','event-history','Placing\x20order\x20for:\x20','apiSecret','open','InvalidNonce','fromCodePoint','quick','Order\x20filled:\x20','Net\x20','match','loading-canceled','\x20-\x20bot\x20already\x20running\x20in\x20manual\x20mode','\x20|\x20lock\x20orders:\x20','parse',')\x20known\x20order:\x20','API-key\x20format\x20invalid','cooldown','args','Portfolio\x20change\x20detected:\x20','marketcapsqrt','RSA-OAEP','environment','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','initTickers()','./version.json','write','push','marketcapApi','canceled','pro','fee','openOrders','random','\x20/\x20','setSandboxMode','ongoing','UNLOCKED','emojibuy','Loading\x20completed','/backup/','success','Initializing\x20coin\x20results','trade','-results.json','\x20>\x20','ccxt','version','privateKey','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)','resetHistory','\x20has\x20a\x2024h\x20drop\x20of\x20','toString','Limit\x20(low-margin)','\x20hour',')\x20|\x20exchange:\x20','heapUsed','toLowerCase','\x20exchange','existsSync','fiat','enableFiatToggle','string','argv','cancelOrder','\x20blocked\x20API\x20(DDoSProtection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','Exchange\x20permission\x20denied\x20-\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','configuration','splice','Bot\x20','slice','change','onepagemode','prevnumber','Portfolio\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','self_reported_market_cap','OrderNotFound','Waited\x20','-------------------------------\x0a','filled','options','differenceInSeconds','getSeconds','pnl','createOrder','\x20MB','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','valid','send','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','test','Error\x20details:\x20','password','2.6.23','getMonth','removed','recovery','Market\x20order','apply','apiKey','EUR','length','shift','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','Exception\x20thrown\x20in\x20','fetchBalance','Manual\x20balancing\x20required','performance','***','2ktjUvz','split','RequestTimeout','coin','1\x20-\x20partially\x20FILLED\x20(','toFixed','Resuming\x20(','storeHeadless','freeze','headless','bitmex','net','Huobipro','cost','getMinutes','limits','BTC','token\x20is\x20expired','</pre>','restart','defaults','\x20rejected\x20your\x20API\x20request\x20(see:\x20hodlerhacks.com/fix/4)','date','initclient','basecoin','getStartingBalances','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','Valid\x20balance\x20for\x20','startnumber','sortBy','RETRY\x20-\x20Problem\x20resolved\x20after\x20','startdate','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20for\x20','getFullYear','emojisell','001','symbol','Avoiding\x20continuous\x20order\x20attempts','Market','Limit\x20(high-margin)','showConfig','Fee\x20discount\x20refund\x20detected:\x20','complete','Reset\x20|\x20','loadMarkets','USDC','cancelLoading','\x20closed\x20the\x20connection\x20(see:\x20hodlerhacks.com/fix/5)','toUpperCase','placeOrder()','set','AuthenticationError','\x20API\x20key,\x20secret\x20or\x20password\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','add','progress','<b>Bot\x20','getDate','\x20-\x20','DDoSProtection','storeFiat','configstate','pnl-fiat','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','distribution','fetchBalance()','change24h','Exchange','\x20|\x20highest\x20fee:\x20','Bybit','Unknown\x20error:\x20','yyyy/MM/dd','breakeven','added','sha256','getTime','search','5fSUqiI','currency','has','(((.+)+)+)+$','orderId','Generating\x20PnL\x20data','Network\x20error\x20details:','abs','path','\x20uses\x20','timestamp-issue','3045556FkUvgS','realizedPnL','Huobi','warning','netoffset','value','3591uhFKdF','lowdb','%)\x0a','Set\x20lock\x20orders\x20to:\x20','order','Order\x20is\x20invalid:\x20','2.6.22','\x20API\x20secret\x20is\x20invalid','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)','Initializing\x20exchange','find','highest','bot-','usd','status','Initializing\x20exchange:\x20already\x20done','pop','fetchOpenOrders','debug','recent20','exchange','-config.json','final','spot','pki','min','\x20-\x20bot\x20switched\x20to\x20manual\x20mode','addDays','fetchTicker','request-time','exchanges','settings','testAPI()','last','1\x20-\x20FILLED\x20unknown\x20order:\x20','\x20minutes\x20-\x20','Saving\x20configuration','\x20|\x20exchange:\x20','Headless:\x20','<pre>','Error\x20in\x20testNewAPI():\x20','get','Executed\x20','\x20attempts','USD','running','ordertype','liquidity','log','percentage','watchTradesForSymbols','Initiating\x20bot\x20restart','bb-secure.json','api-issue','55hpyYZx','active','.json','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','slider','CoinMarketCap\x20data\x20could\x20not\x20be\x20updated\x20-\x20will\x20try\x20again\x20in\x201\x20hour','balancing\x20resumed','page','create','threshold','Invalid\x20quantity','watchOrders','logs','Value\x20','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','LOCKED','limit','botID','uncaughtException','join','substring','50qRfJnQ','assign','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','1\x20-\x20Handle\x20open\x20orders','-performance.json','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','max','target','number','1\x20-\x20Validate\x20orders:\x20','quote','amount','2.3.5','event','net-basecoin','filter','\x20portfolio:</b>\x20\x0a\x0a','changes','bid','\x0aSymbol(s):\x20','4531773lgbEiv','pid','sqrt','\x20minutes','NetworkError','no\x20open\x20orders','Insufficient\x20funds\x20to\x20execute\x20order:\x20','mkdirSync','forEach','buys','findIndex','padEnd',':\x20timer\x20>','writeFile','util','RateLimitExceeded','Unknown\x20error\x20-\x20check\x20logs','includes','Cex','0\x20-\x20EXECUTION:\x20','detectLiquidityChange()','placeOrder','Unfilled\x20order(s)\x20could\x20not\x20be\x20canceled\x20after\x20','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','ID:\x20','replace','price','2.7.1','fetchTickers','Trigger:\x20','process\x20',',\x20must\x20be\x20a\x203\x20digit\x20number','emitHistory','marketcapEnabled','marketcap','delta','timestamp','unlinkSync','cancel','average','remainingSymbols','type','\x20-\x20bot\x20not\x20started','secret','Invalid\x20API\x20details,\x20please\x20try\x20again\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','ExchangeError','offset','message','InsufficientFunds','cloneDeep','Error:\x20Invalid\x20argument\x20','\x20(see:\x20hodlerhacks.com/fix/1)','57726kQChWN','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','red_yellow_blue','reverse','\x20>\x20pausing\x20bot\x20for\x20','lowdb/adapters/FileSync','none','error','************','closed','initial','showname','keys','5689458yuRSEL','Cryptocom','watchTrades','buy','full','%\x20(',')\x20unknown\x20order:\x20','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','indexOf','timeshift','Updating\x20API\x20key\x20(not\x20saved\x20in\x20config\x20file\x20yet)','sort','\x20metrics:</b>\x20\x0a\x0a','\x20network\x20error:\x20','\x20order:\x20','constructor','OnMaintenance','sendMetricsTelegram','/EUR','Gateio','PnL\x20','map','Error\x20while\x20deleting\x20files:\x20','-events.json','autoliquidity','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','Bitget','floor','Insufficient\x20funds\x20to\x20place\x20order\x20for\x20','Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute','time','Failed\x20to\x20connect\x20to\x20the\x20exchange\x20-\x20bot\x20not\x20started','bitvavo','coins','bb-settings.json','yargs/yargs','sell','./config/','Order\x20filled','customId','basecoinvalue','Invalid\x20balance\x20for\x20','Generated\x20PnL\x20data','botname','InvalidOrder','\x20exchange\x20error:\x20','enabled','PAXG','decrypt','entries','portfolio','1274651eNubKn','Resetting\x20bot\x20history','Pausing\x20for\x20','round','switch-manual','market','2532756tOimig'];_0x45fe=function(){return _0x1a434f;};return _0x45fe();}async function handleError(_0x406b08,_0xe901a2,_0x1523e2=''){const _0x151ff3=_0x1b2526;if(botPaused)return;let _0x25d121;const _0x254e23=config['exchange']||_0x151ff3(0x2b1);if(_0xe901a2)logger['debug'](_0x151ff3(0x26a)+_0xe901a2);if(_0x406b08[_0x151ff3(0x236)]()[_0x151ff3(0x160)](_0x151ff3(0x2a9)))_0x25d121=_0x254e23+_0x151ff3(0x243),await pauseBot(undefined,_0x25d121,_0x406b08);else{if(_0x406b08['toString']()[_0x151ff3(0x160)](_0x151ff3(0x15e)))_0x25d121=_0x254e23+_0x151ff3(0x1e9),await pauseBot(undefined,_0x25d121,_0x406b08);else{if(_0x406b08[_0x151ff3(0x236)]()[_0x151ff3(0x160)]('ExchangeNotAvailable')||_0x406b08[_0x151ff3(0x236)]()['includes'](_0x151ff3(0x1a0)))_0x25d121=_0x254e23+'\x20not\x20available\x20(see:\x20hodlerhacks.com/fix/5)',await pauseBot(undefined,_0x25d121,_0x406b08['toString']());else{if(_0x406b08[_0x151ff3(0x236)]()[_0x151ff3(0x160)](_0x151ff3(0x271)))_0x25d121=_0x254e23+'\x20not\x20responding\x20(see:\x20hodlerhacks.com/fix/5)',await pauseBot(undefined,_0x25d121,_0x406b08[_0x151ff3(0x236)]());else{if(_0x406b08[_0x151ff3(0x236)]()[_0x151ff3(0x160)](_0x151ff3(0x1fb)))_0x25d121=_0x254e23+_0x151ff3(0x29e),await pauseBot(undefined,_0x25d121,_0x406b08['toString']());else{if(_0x406b08[_0x151ff3(0x236)]()['toLowerCase']()[_0x151ff3(0x160)](_0x151ff3(0x173))||_0x406b08[_0x151ff3(0x236)]()[_0x151ff3(0x23b)]()[_0x151ff3(0x160)](_0x151ff3(0x2ea)))_0x25d121=_0x151ff3(0x2d5),await pauseBot(undefined,_0x25d121,_0x406b08[_0x151ff3(0x236)]());else{if(_0x406b08[_0x151ff3(0x236)]()[_0x151ff3(0x160)](_0x151ff3(0x207)))_0x25d121=_0x254e23+_0x151ff3(0x284),await pauseBot(undefined,_0x25d121,_0x406b08[_0x151ff3(0x236)]());else{if(_0x406b08 instanceof ccxt[_0x151ff3(0x153)])_0x25d121=_0x254e23+_0x151ff3(0x19d)+_0x406b08[_0x151ff3(0x236)](),logger[_0x151ff3(0x2df)](_0x151ff3(0x2c1),_0x406b08),await pauseBot(undefined,_0x25d121,_0x406b08);else{if(_0x406b08[_0x151ff3(0x236)]()[_0x151ff3(0x160)]('API-key\x20format\x20invalid'))logHistory(_0x151ff3(0x18a),_0x254e23+_0x151ff3(0x1f0)),logHistory(_0x151ff3(0x18a),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)'),await killBot();else{if(_0x406b08[_0x151ff3(0x236)]()[_0x151ff3(0x160)](_0x151ff3(0x197)))logHistory(_0x151ff3(0x18a),_0x254e23+_0x151ff3(0x2d3)),logHistory(_0x151ff3(0x18a),_0x151ff3(0x233)),await killBot();else{if(_0x406b08[_0x151ff3(0x236)]()['includes']('AuthenticationError')&&_0x406b08[_0x151ff3(0x236)]()[_0x151ff3(0x160)](_0x151ff3(0x280)))_0x25d121=_0x254e23+_0x151ff3(0x219),await pauseBot(undefined,_0x25d121,_0x406b08,!![]);else{if(_0x406b08['toString']()[_0x151ff3(0x160)](_0x151ff3(0x2a2)))config[_0x151ff3(0x1ff)]?_0x25d121=_0x254e23+_0x151ff3(0x2a3):_0x25d121=_0x254e23+'\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange',logHistory(_0x151ff3(0x18a),_0x25d121),logHistory(_0x151ff3(0x18a),_0x151ff3(0x233)),await killBot();else{if(_0x406b08[_0x151ff3(0x236)]()[_0x151ff3(0x160)]('PermissionDenied'))logHistory('error',_0x254e23+_0x151ff3(0x140)),logHistory(_0x151ff3(0x18a),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)'),await killBot();else{if(_0x406b08[_0x151ff3(0x236)]()['includes'](_0x151ff3(0x17f)))logHistory(_0x151ff3(0x18a),_0x151ff3(0x155)+_0x1523e2),logger[_0x151ff3(0x2df)](_0x151ff3(0x200),_0x406b08);else{if(_0x406b08 instanceof ccxt[_0x151ff3(0x17c)]){_0x25d121=_0x254e23+_0x151ff3(0x1bd)+_0x406b08[_0x151ff3(0x236)]();if(_0x1523e2)_0x25d121+=_0x151ff3(0x14e)+_0x1523e2;await pauseBot(undefined,_0x25d121,_0x406b08);}else{_0x25d121=_0x151ff3(0x2b4)+_0x406b08[_0x151ff3(0x236)]();if(_0x1523e2)_0x25d121+=_0x151ff3(0x14e)+_0x1523e2;await pauseBot(undefined,_0x25d121);}}}}}}}}}}}}}}}}function decryptRSA(_0x2378ff,_0x1ec2cb){const _0xcb5fbc=_0x1b2526,_0x1e6ec6=forge[_0xcb5fbc(0x2e5)]['privateKeyFromPem'](_0x2378ff),_0xb81289=_0x1e6ec6[_0xcb5fbc(0x1c0)](forge[_0xcb5fbc(0x15d)]['decode64'](_0x1ec2cb),_0xcb5fbc(0x217),{'md':forge['md']['sha256'][_0xcb5fbc(0x30b)](),'mgf1':{'md':forge['md'][_0xcb5fbc(0x2b8)][_0xcb5fbc(0x30b)]()}});return _0xb81289;}async function withRetry(_0x535ad8,_0x542c35){const _0x3cff4f=_0x1b2526;let _0x179e6e=![],_0x66133d=0x0,_0x5da5b4,_0x2490e9;while(_0x66133d<maxRetries){try{_0x5da5b4=await _0x542c35();break;}catch(_0x88091c){_0x2490e9=_0x88091c,!_0x179e6e?(_0x179e6e=!![],logger[_0x3cff4f(0x2df)]('RETRY\x20-\x20Error\x20in\x20'+_0x535ad8+':',_0x88091c[_0x3cff4f(0x236)]())):await sleep(retryInterval);}_0x66133d++;}if(_0x66133d==0x0)return _0x5da5b4;if(_0x66133d>=maxRetries)throw _0x2490e9;else return logger['debug'](_0x3cff4f(0x28d)+_0x66133d+_0x3cff4f(0x2f8)),_0x5da5b4;}function formatResult(_0x31430f,_0x1801d7){return parseFloat(_0x31430f['toFixed'](_0x1801d7));}function formatResultTruncate(_0x7fab91,_0x5d0ea7){const _0x427952=_0x1b2526;let _0xec44ef=formatResultString(_0x7fab91,0xa),_0x115548=_0xec44ef[_0x427952(0x198)]('.');return _0x115548!=-0x1&&(_0xec44ef=_0xec44ef[_0x427952(0x248)](0x0,_0x115548+_0x5d0ea7+0x1)),Number(_0xec44ef);}function formatResultString(_0x35add4,_0x4f79c6){const _0x1e9072=_0x1b2526;let _0x8f19aa;if(!(''+_0x35add4)[_0x1e9072(0x160)]('e'))_0x8f19aa=+(Math[_0x1e9072(0x1c6)](_0x35add4+'e+'+_0x4f79c6)+'e-'+_0x4f79c6);else{let _0x54c203=(''+_0x35add4)['split']('e'),_0x1eb887='';+_0x54c203[0x1]+_0x4f79c6>0x0&&(_0x1eb887='+'),_0x8f19aa=+(Math['round'](+_0x54c203[0x0]+'e'+_0x1eb887+(+_0x54c203[0x1]+_0x4f79c6))+'e-'+_0x4f79c6);}return Number(_0x8f19aa)['toFixed'](_0x4f79c6);}function getServerTime(){const _0x52d2d7=_0x1b2526,_0x491698=new Date();return _0x491698[_0x52d2d7(0x290)]()+'/'+(_0x491698['getMonth']()+0x1)[_0x52d2d7(0x236)]()[_0x52d2d7(0x1cc)](0x2,'0')+'/'+_0x491698[_0x52d2d7(0x2a7)]()['toString']()[_0x52d2d7(0x1cc)](0x2,'0')+'\x20'+_0x491698[_0x52d2d7(0x1e5)]()[_0x52d2d7(0x236)]()['padStart'](0x2,'0')+':'+_0x491698[_0x52d2d7(0x27d)]()['toString']()[_0x52d2d7(0x1cc)](0x2,'0')+':'+_0x491698[_0x52d2d7(0x254)]()[_0x52d2d7(0x236)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x16fa4f=_0x1b2526,_0x4d2da6=shiftedTime();return _0x4d2da6[_0x16fa4f(0x290)]()+'/'+(_0x4d2da6['getMonth']()+0x1)[_0x16fa4f(0x236)]()[_0x16fa4f(0x1cc)](0x2,'0')+'/'+_0x4d2da6[_0x16fa4f(0x2a7)]()['toString']()[_0x16fa4f(0x1cc)](0x2,'0')+'\x20'+_0x4d2da6['getHours']()[_0x16fa4f(0x236)]()['padStart'](0x2,'0')+':'+_0x4d2da6['getMinutes']()['toString']()['padStart'](0x2,'0')+':'+_0x4d2da6['getSeconds']()[_0x16fa4f(0x236)]()[_0x16fa4f(0x1cc)](0x2,'0');}function getDate(){const _0x3e2178=_0x1b2526,_0x4b32a2=shiftedTime();return _0x4b32a2['getFullYear']()+'/'+(_0x4b32a2[_0x3e2178(0x260)]()+0x1)[_0x3e2178(0x236)]()[_0x3e2178(0x1cc)](0x2,'0')+'/'+_0x4b32a2[_0x3e2178(0x2a7)]()[_0x3e2178(0x236)]()['padStart'](0x2,'0');}function getHour(){const _0x445ca5=_0x1b2526,_0x466ede=shiftedTime();return _0x466ede[_0x445ca5(0x1e5)]()[_0x445ca5(0x236)]()['padStart'](0x2,'0');}function sleep(_0x506af3){return new Promise(_0x3c9f26=>setTimeout(_0x3c9f26,_0x506af3));}function shiftedTime(){const _0x47507a=_0x1b2526,_0x2e7d0a=new Date();let _0x4ef472=_0x2e7d0a;if(config&&config[_0x47507a(0x199)]!==0x0)_0x4ef472=fns[_0x47507a(0x2a4)](_0x2e7d0a,{'hours':config[_0x47507a(0x199)]});return _0x4ef472;}function timer(_0x3ea49c){const _0x4887bc=_0x1b2526,_0x222eb9=new Date();!lasttime?console['log'](getTimeStamp()+_0x4887bc(0x15b),_0x3ea49c,_0x222eb9):console['log'](getTimeStamp()+_0x4887bc(0x15b),_0x3ea49c,(_0x222eb9-lasttime)/0x3e8),lasttime=_0x222eb9;}