const _0x3bd8cf=_0x1ca4;(function(_0x1f6183,_0x5a8b06){const _0x48e0ce=_0x1ca4,_0x157e6b=_0x1f6183();while(!![]){try{const _0x50e985=-parseInt(_0x48e0ce(0x122))/0x1+-parseInt(_0x48e0ce(0x272))/0x2+-parseInt(_0x48e0ce(0x29f))/0x3*(parseInt(_0x48e0ce(0x2ac))/0x4)+parseInt(_0x48e0ce(0x24e))/0x5+-parseInt(_0x48e0ce(0x2a4))/0x6+parseInt(_0x48e0ce(0x196))/0x7*(parseInt(_0x48e0ce(0x138))/0x8)+parseInt(_0x48e0ce(0xf3))/0x9*(parseInt(_0x48e0ce(0x218))/0xa);if(_0x50e985===_0x5a8b06)break;else _0x157e6b['push'](_0x157e6b['shift']());}catch(_0x4e5104){_0x157e6b['push'](_0x157e6b['shift']());}}}(_0x2bc9,0xe2aa0));const _0x2bf5cd=function(){let _0x4ce253=!![];return function(_0x146a19,_0x5096c3){const _0x31852e=_0x4ce253?function(){const _0x20a8c2=_0x1ca4;if(_0x5096c3){const _0x5a6bd4=_0x5096c3[_0x20a8c2(0x198)](_0x146a19,arguments);return _0x5096c3=null,_0x5a6bd4;}}:function(){};return _0x4ce253=![],_0x31852e;};}(),_0x16936b=_0x2bf5cd(this,function(){const _0x4a1f84=_0x1ca4;return _0x16936b[_0x4a1f84(0x1a0)]()['search']('(((.+)+)+)+$')['toString']()['constructor'](_0x16936b)['search'](_0x4a1f84(0x229));});_0x16936b();'use strict';const ccxt=require(_0x3bd8cf(0x221)),low=require(_0x3bd8cf(0x168)),FileSync=require(_0x3bd8cf(0x154)),fs=require('fs'),fns=require(_0x3bd8cf(0x23a)),forge=require(_0x3bd8cf(0xd9)),util=require(_0x3bd8cf(0xd7)),argv=require(_0x3bd8cf(0x293))(process[_0x3bd8cf(0x108)][_0x3bd8cf(0x26a)](0x2))['argv'],path=require(_0x3bd8cf(0xf1)),axios=require(_0x3bd8cf(0x199));let exchange,gTicker={},gChange={};const usdBasecoins=[_0x3bd8cf(0x104),_0x3bd8cf(0x1ac),_0x3bd8cf(0x140),_0x3bd8cf(0x22d),'USDC',_0x3bd8cf(0x1bf)],excludedExchanges=[_0x3bd8cf(0x158)],debugging=argv['d']||![];let pnlGenerationNeeded=argv['r']||![],config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x3bd8cf(0x253)]({'LOCKED':0x0,'UNLOCKING':0x1,'UNLOCKED':0x2});let lockOrders=ORDERS[_0x3bd8cf(0x184)],validateOrdersState,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotIntervalShort=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg='\x20>\x20pausing\x20bot\x20for\x20'+pauseBotInterval/0xea60+'\x20minutes',maxPauseRetries=0x6,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,watchTransactionsInterval=0x3c*0x3e8,schedulerInterval=0x3c*0x3c*0x3e8,retryInterval=0x3e8,maxRetries=0x5,logPageSize=0x14,defaultFee=0.003;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidOrdersInitialTimeout,pidOrdersTimeout,botPaused=![],transactionDetectionOngoing=![],lastCoinsToBalance='',exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x5dc,balanceUpdateRetries=0x5;let enableFiatToggle;const serverversion=require(_0x3bd8cf(0xee))[_0x3bd8cf(0x163)],environment=require(_0x3bd8cf(0xee))[_0x3bd8cf(0x121)]||_0x3bd8cf(0x1fa),botID=process[_0x3bd8cf(0x108)][0x2]||'001',pattern=/^[0-9]{3}$/;!pattern['test'](botID)&&(console[_0x3bd8cf(0x18a)]('Error:\x20Invalid\x20argument\x20'+botID+_0x3bd8cf(0x1ae)),killBot());const userID=process[_0x3bd8cf(0x108)][0x3]||'',configpath=userID?'./config/'+userID+'/':_0x3bd8cf(0xd8),logspath=userID?_0x3bd8cf(0x14a)+userID+'/':_0x3bd8cf(0x14a),loggerfile=fs[_0x3bd8cf(0x240)](logspath+_0x3bd8cf(0x178),{'flags':'a'});!fs[_0x3bd8cf(0x146)](configpath)&&fs[_0x3bd8cf(0x10d)](configpath);!fs[_0x3bd8cf(0x146)](logspath)&&fs[_0x3bd8cf(0x10d)](logspath);const configfile=configpath+_0x3bd8cf(0x210)+botID+_0x3bd8cf(0x12e),logfile=configpath+_0x3bd8cf(0x210)+botID+_0x3bd8cf(0x2a8),performancefile=configpath+'bot-'+botID+'-performance.json',coinresultsfile=configpath+_0x3bd8cf(0x210)+botID+'-results.json',settingsfile=configpath+_0x3bd8cf(0x1cf),securefile=configpath+_0x3bd8cf(0xec),configbackuppath=configpath+'/backup/',adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x3bd8cf(0x24c)]({'logs':[],'version':serverversion})[_0x3bd8cf(0x11c)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x3bd8cf(0x24c)]({'data':[],'version':serverversion})['write']();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig['defaults']({'bot':[],'version':serverversion})['write']();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x3bd8cf(0x24c)]({'coins':{},'version':serverversion})['write']();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0,settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0xd45031=>{console['log'](_0xd45031);},'simple':_0x572ab1=>{const _0x48f813=_0x3bd8cf;console[_0x48f813(0x18a)](_0x572ab1),loggerfile[_0x48f813(0x11c)](util[_0x48f813(0x18f)](_0x572ab1)+'\x0a');},'full':async(_0x25c893,_0x3cdd6c='')=>{const _0x4cdbfe=_0x3bd8cf;let _0x36e823;if(config['showname'])_0x36e823=getTimeStamp()+':\x20'+config[_0x4cdbfe(0x103)]+_0x4cdbfe(0x139)+_0x25c893;else _0x36e823=getTimeStamp()+_0x4cdbfe(0x153)+botID+_0x4cdbfe(0x139)+_0x25c893;console['log'](_0x36e823),loggerfile['write'](util[_0x4cdbfe(0x18f)](_0x36e823)+'\x0a'),_0x3cdd6c&&(console[_0x4cdbfe(0x18a)](_0x3cdd6c),loggerfile[_0x4cdbfe(0x11c)](util[_0x4cdbfe(0x18f)](_0x3cdd6c)+'\x0a'));},'debug':async(_0x2024a6,_0x31db68='')=>{const _0x5ce010=_0x3bd8cf;let _0x2719d3;if(config['showname'])_0x2719d3=getTimeStamp()+':\x20'+config[_0x5ce010(0x103)]+'\x20>\x20[DEBUG]\x20'+_0x2024a6;else _0x2719d3=getTimeStamp()+_0x5ce010(0x153)+botID+_0x5ce010(0x204)+_0x2024a6;if(debugging)console[_0x5ce010(0x18a)](_0x2719d3);loggerfile[_0x5ce010(0x11c)](util[_0x5ce010(0x18f)](_0x2719d3)+'\x0a');if(_0x31db68){if(debugging)console[_0x5ce010(0x18a)](_0x31db68);loggerfile[_0x5ce010(0x11c)](util['format'](_0x31db68)+'\x0a');}}};process['on'](_0x3bd8cf(0x25c),function(_0x2aaade){const _0x5c3964=_0x3bd8cf;handleError(_0x2aaade['stack'],_0x5c3964(0x25c));});settings[_0x3bd8cf(0x1e4)]!=config[_0x3bd8cf(0x1e4)]&&updateTimeshift(settings['timeshift']);settings[_0x3bd8cf(0x25e)]!=config['onepagemode']&&updateOnepagemode(settings[_0x3bd8cf(0x25e)]);(settings[_0x3bd8cf(0x193)]&&!config[_0x3bd8cf(0x193)]||!settings[_0x3bd8cf(0x193)]&&config[_0x3bd8cf(0x193)])&&updateMarketcapApi(settings[_0x3bd8cf(0x193)]);process[_0x3bd8cf(0x245)]({'started':_0x3bd8cf(0x263)},_0x23a62c=>{}),initializeProcessListeners();function proxyEmit(_0x5ed470,_0x227c81=null){process['send']({'function':_0x5ed470,'args':_0x227c81},_0x3a62fd=>{});}function initializeProcessListeners(){process['on']('message',_0x17b870=>{const _0x5a40a6=_0x1ca4;switch(Object[_0x5a40a6(0x1ed)](_0x17b870)[0x0]){case _0x5a40a6(0x1e4):_0x17b870[_0x5a40a6(0x1e4)]!=undefined&&(settings['timeshift']=_0x17b870[_0x5a40a6(0x1e4)],updateTimeshift(settings[_0x5a40a6(0x1e4)]));break;case _0x5a40a6(0x25e):_0x17b870['onepagemode']!=undefined&&(settings[_0x5a40a6(0x25e)]=_0x17b870['onepagemode'],updateOnepagemode(settings['onepagemode']));break;case _0x5a40a6(0x193):_0x17b870['marketcapApi']!=undefined&&(settings[_0x5a40a6(0x193)]=_0x17b870[_0x5a40a6(0x193)],updateMarketcapApi(settings[_0x5a40a6(0x193)]));break;case _0x5a40a6(0x291):_0x17b870['bots']!=undefined&&(bots=JSON[_0x5a40a6(0x175)](_0x17b870[_0x5a40a6(0x291)]),proxyEmit('bots',bots));break;case'function':switch(_0x17b870['function']){case _0x5a40a6(0x194):initclient();break;case'toggleBotMode':toggleBotMode();break;case'emitHistory':emitHistory(_0x17b870['args']);break;case _0x5a40a6(0x203):deleteHistoryAlerts(_0x17b870[_0x5a40a6(0x1d6)]);break;case _0x5a40a6(0x278):getPortfolio(_0x17b870['args']);break;case _0x5a40a6(0x297):storeConfiguration(_0x17b870[_0x5a40a6(0x1d6)]);break;case _0x5a40a6(0x1ad):storeHeadless(_0x17b870['args']);break;case _0x5a40a6(0x112):storeFiat(_0x17b870[_0x5a40a6(0x1d6)]);break;case _0x5a40a6(0x1db):resetHistory();break;case'getStartingBalances':getStartingBalances(getNormalizedPerformance());break;case _0x5a40a6(0x18d):placeOrder(_0x17b870[_0x5a40a6(0x1d6)]);break;case'cancelLoading':cancelLoading();break;case'showConfig':showConfig();break;case _0x5a40a6(0x136):sendMetricsTelegram();break;case _0x5a40a6(0x1b9):sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x38276d=![]){const _0x33d996=_0x3bd8cf;logger[_0x33d996(0x135)](_0x33d996(0x295)+(_0x38276d?_0x33d996(0x270):_0x33d996(0x254))+'\x20|\x20exchange:\x20'+config[_0x33d996(0x21b)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x38276d)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x33d996(0x133)]!=''&&config[_0x33d996(0x133)]!=_0x33d996(0x17e)){loadingProgress=0x0;if(_0x38276d){await initExchange();const _0x1facff=await testAPI();if(!_0x1facff)return;await loadSymbols(),loadingProgress=0x1,setStableCoins(),proxyEmit(_0x33d996(0x10e),emittedConfiguration()),initialPerformanceStored=![];}const _0x2a7ec6=await getCoins();[currentCoins,currentCoinsAll]=_0x2a7ec6,setBlockTransactionDetection(![]),startScheduler(),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x33d996(0x135)](_0x33d996(0x21f)),getBalances(![]),await updateOpenOrders();if(lastOrders['length']==0x0&&allOpenOrders[_0x33d996(0xf4)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(pnlGenerationNeeded)await generatePnL();}}async function resumeBot(_0x3629d9=![]){const _0x235b2c=_0x3bd8cf;logger[_0x235b2c(0x135)](_0x235b2c(0x2a5)+(_0x3629d9?_0x235b2c(0x2a9):_0x235b2c(0x27d))+_0x235b2c(0x159)+config[_0x235b2c(0x21b)]);if(pidBalances)clearTimeout(pidBalances);if(_0x3629d9){getBalances();return;}coinsLoaded=![];if(config[_0x235b2c(0x133)]!=''&&config[_0x235b2c(0x133)]!=_0x235b2c(0x17e)){loadingProgress=0x1;const _0xcbdcef=await getCoins();[currentCoins,currentCoinsAll]=_0xcbdcef,setBlockTransactionDetection(![]),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x235b2c(0x135)]('Loading\x20completed'),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x235b2c(0xf4)]==0x0&&allOpenOrders[_0x235b2c(0xf4)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();}}async function getMarketCap(_0x1ce509){const _0x14f84c=_0x3bd8cf;let _0x4ad03f=![];if(_0x1ce509)_0x4ad03f=!![];let _0x474145;_0x4ad03f?_0x474145=_0x1ce509['map'](_0x3d38b4=>_0x3d38b4['coin']):_0x474145=currentCoinsAll[_0x14f84c(0x180)](_0x7c5d3d=>_0x7c5d3d[_0x14f84c(0x189)]);if(!config[_0x14f84c(0x193)]||!_0x4ad03f&&!config[_0x14f84c(0x10b)]||_0x474145['length']==0x0)return;let _0x27b1ab=null;try{_0x27b1ab=await axios[_0x14f84c(0x1e6)](_0x14f84c(0x252),{'headers':{'X-CMC_PRO_API_KEY':settings['marketcapApi']},'params':{'symbol':_0x474145[_0x14f84c(0x1a0)]()}});}catch(_0x3a3a6d){_0x27b1ab=null,_0x3a3a6d[_0x14f84c(0x1a0)]()[_0x14f84c(0x160)](_0x14f84c(0x119))?(config[_0x14f84c(0x193)]=![],updateConfig(),proxyEmit('configuration',emittedConfiguration()),logHistory(_0x14f84c(0x14b),_0x14f84c(0x120))):(logHistory(_0x14f84c(0x14b),_0x14f84c(0x28c)+schedulerInterval/(0x3c*0x3e8)+'\x20minutes'),logger['debug'](_0x14f84c(0x217),_0x3a3a6d[_0x14f84c(0x1a0)]()+'\x20-\x20'+_0x3a3a6d[_0x14f84c(0x1ee)]));}if(_0x27b1ab){let _0x304d87=0x0;const _0x3d5074=_0x27b1ab['data'];_0x474145[_0x14f84c(0x169)](_0x563e02=>{const _0x2d7ce9=_0x14f84c;if(_0x3d5074[_0x2d7ce9(0x26b)][_0x563e02][0x0])_0x304d87+=_0x3d5074[_0x2d7ce9(0x26b)][_0x563e02][0x0][_0x2d7ce9(0x1d0)]['USD'][_0x2d7ce9(0xe0)];}),_0x474145[_0x14f84c(0x169)](_0x5be9e6=>{const _0xa33601=_0x14f84c,_0x3b1777=_0x3d5074[_0xa33601(0x26b)][_0x5be9e6][0x0]?_0x3d5074[_0xa33601(0x26b)][_0x5be9e6][0x0][_0xa33601(0x1d0)][_0xa33601(0x104)][_0xa33601(0xe0)]:0x0;if(_0x4ad03f){const _0x33c6bb=_0x1ce509[_0xa33601(0x144)](_0x190969=>_0x190969['coin']==_0x5be9e6);_0x33c6bb&&(_0x33c6bb['marketcap']=_0x3b1777);}else{const _0x536d37=currentCoins[_0xa33601(0x144)](_0x6f887f=>_0x6f887f[_0xa33601(0x189)]==_0x5be9e6);_0x536d37&&(_0x536d37[_0xa33601(0x276)]=_0x3b1777);const _0x2d8837=currentCoinsAll[_0xa33601(0x144)](_0x2181ba=>_0x2181ba[_0xa33601(0x189)]==_0x5be9e6);_0x2d8837&&(_0x2d8837[_0xa33601(0x276)]=_0x3b1777);}}),!_0x4ad03f&&updateTargetDistribution();}}function updateTargetDistribution(){const _0x216d9e=_0x3bd8cf,_0x5437f4=0x2;let _0x1390f7=0x0,_0x42a35b=0x0,_0x2d11ac=0x0,_0x2a8089=0x0,_0x45e65b=0x0;config[_0x216d9e(0x285)]['forEach'](_0x59b22f=>{const _0x2d9341=_0x216d9e;if(!_0x59b22f['excluded']){_0x2d11ac++,_0x1390f7+=_0x59b22f['slider'];if(_0x59b22f[_0x2d9341(0x2a1)]===-0x1){_0x1390f7++;const _0x242cf4=currentCoinsAll[_0x2d9341(0x144)](_0xd0d385=>_0xd0d385[_0x2d9341(0x189)]==_0x59b22f[_0x2d9341(0x189)]);_0x242cf4&&(_0x2a8089+=_0x242cf4[_0x2d9341(0x276)],_0x45e65b+=Math['sqrt'](_0x242cf4[_0x2d9341(0x276)]));}if(_0x59b22f[_0x2d9341(0x2a1)]!==-0x1)_0x42a35b++;}});let _0x28876b;const _0x138635=0x64-_0x1390f7,_0x5c436a=_0x2d11ac-_0x42a35b;_0x28876b=_0x5c436a===0x0?_0x1390f7:Math[_0x216d9e(0xdb)](0x64,_0x1390f7),config[_0x216d9e(0x285)][_0x216d9e(0x169)](_0x4a1648=>{const _0x511078=_0x216d9e,_0x2f148e=currentCoinsAll[_0x511078(0x144)](_0x448b92=>_0x448b92[_0x511078(0x189)]==_0x4a1648[_0x511078(0x189)]);_0x2f148e&&(_0x4a1648['marketcap']=_0x2f148e[_0x511078(0x276)]);if(!_0x4a1648[_0x511078(0x26c)]){if(_0x28876b<=0x64){if(_0x4a1648['slider']===-0x1){if(_0x2a8089!==0x0&&config['marketcapEnabled']){if(_0x2f148e){if(config[_0x511078(0x10b)]==_0x511078(0x276))_0x4a1648['distribution']=(_0x138635/(_0x2a8089/_0x2f148e[_0x511078(0x276)]))['toFixed'](_0x5437f4);else config[_0x511078(0x10b)]==_0x511078(0x27f)&&(_0x4a1648[_0x511078(0x115)]=(_0x138635/(_0x45e65b/Math[_0x511078(0x1e3)](_0x2f148e[_0x511078(0x276)])))[_0x511078(0x1c0)](_0x5437f4));}}}}}}),updateConfig();}function updateConfig(){const _0x208bf9=_0x3bd8cf;let _0x21a302=dbConfig['get'](_0x208bf9(0x212))['find']({'botID':botID})[_0x208bf9(0x155)]();_0x21a302&&dbConfig[_0x208bf9(0x1e6)](_0x208bf9(0x212))['find']({'botID':botID})[_0x208bf9(0xf0)](config)[_0x208bf9(0x11c)]();}function logMemory(){const _0x2ffeb3=_0x3bd8cf;if(environment!=_0x2ffeb3(0x20f))return;const _0x5b50b9=process[_0x2ffeb3(0xff)]()[_0x2ffeb3(0x1c6)]/0x400/0x400;logger[_0x2ffeb3(0x135)](_0x2ffeb3(0x264)+process[_0x2ffeb3(0x11f)]+'\x20uses\x20'+formatResult(_0x5b50b9,0x1)+_0x2ffeb3(0x1ea));}async function startScheduler(){const _0x130eb1=shiftedTime()['getHours']();getMarketCap(),loadSymbols(),_0x130eb1==0x1&&logMemory(),await sleep(schedulerInterval),startScheduler();}async function restartBot(_0x4bacb8=![]){const _0x2cb4b6=_0x3bd8cf;logger[_0x2cb4b6(0x135)]('Initiating\x20bot\x20restart');if(!_0x4bacb8)while(lockOrders!=ORDERS[_0x2cb4b6(0x184)]||coolingDown){await sleep(0x3e8);}process[_0x2cb4b6(0x245)]({'stop':'restart'},_0x2017cd=>{});}async function initExchange(_0x3d1a4a=config[_0x3bd8cf(0x21b)],_0x65529b=config[_0x3bd8cf(0x133)],_0x233f71=config[_0x3bd8cf(0x250)],_0x4d26db=config[_0x3bd8cf(0x1f5)],_0x34d03f=config[_0x3bd8cf(0x109)]){const _0x4fa252=_0x3bd8cf;if(exchange){logger[_0x4fa252(0x135)](_0x4fa252(0x262));return;}logger[_0x4fa252(0x135)](_0x4fa252(0x246));!supportedExchanges()[_0x4fa252(0x160)](_0x3d1a4a)&&(logHistory(_0x4fa252(0x14b),_0x4fa252(0x236)+_0x3d1a4a+'\x20exchange'),killBot());const _0x29b450=ccxt['pro'][_0x3d1a4a[_0x4fa252(0x1b8)]()];exchange=new _0x29b450({'apiKey':_0x65529b,'secret':_0x233f71,'options':{'defaultType':'spot'}});if(_0x4d26db)exchange['password']=_0x4d26db;if(exchange[_0x4fa252(0x20b)][_0x4fa252(0x109)])exchange['setSandboxMode'](_0x34d03f);}function updateExchange(_0x414927,_0x4dca6e,_0x33df2a=null){const _0x22410f=_0x3bd8cf;exchange[_0x22410f(0x133)]=_0x414927,exchange[_0x22410f(0x1c5)]=_0x4dca6e,exchange[_0x22410f(0x200)]=_0x33df2a,logger[_0x22410f(0x135)](_0x22410f(0x24f));}function setStableCoins(){const _0x559fe7=_0x3bd8cf;let _0x404c56=config[_0x559fe7(0xe9)]==_0x559fe7(0x191)?_0x559fe7(0x191):config[_0x559fe7(0xe9)]==_0x559fe7(0x147)?_0x559fe7(0x147):_0x559fe7(0x16a),_0xa88cb5=allSymbols['includes'](_0x404c56+_0x559fe7(0x22c))?_0x559fe7(0x104):allSymbols[_0x559fe7(0x160)](_0x404c56+_0x559fe7(0x11d))?_0x559fe7(0x22d):_0x559fe7(0x149),_0x5cfe3f=allSymbols['includes'](_0x404c56+_0x559fe7(0x1ef))?_0x559fe7(0x149):_0xa88cb5;enableFiatToggle=!![],_0xa88cb5==_0x559fe7(0x149)&&(enableFiatToggle=![],storeFiat(_0x559fe7(0x149))),_0x5cfe3f!=_0x559fe7(0x149)&&(enableFiatToggle=![],storeFiat('USD')),stablecoins={'eur':{'coin':''+_0x404c56+_0x5cfe3f,'symbol':_0x404c56+'/'+_0x5cfe3f},'usd':{'coin':''+_0x404c56+_0xa88cb5,'symbol':_0x404c56+'/'+_0xa88cb5}};}async function initwsCcxt(){const _0x3701ac=_0x3bd8cf;initCycle++;const _0x17f729=initCycle;let _0x439572=[];config['portfolio']['forEach'](_0xf6878=>{const _0x65a064=_0x1ca4;if(!_0xf6878[_0x65a064(0x26c)]&&_0xf6878[_0x65a064(0x189)]!=config[_0x65a064(0xe9)])_0x439572[_0x65a064(0x1c3)](_0xf6878[_0x65a064(0x148)]);});if(!_0x439572[_0x3701ac(0x160)](stablecoins['eur']['symbol']))_0x439572[_0x3701ac(0x1c3)](stablecoins['eur'][_0x3701ac(0x148)]);if(!_0x439572[_0x3701ac(0x160)](stablecoins[_0x3701ac(0x256)]['symbol']))_0x439572['push'](stablecoins[_0x3701ac(0x256)]['symbol']);loadCoins(_0x439572),_0x439572=validateSymbols(_0x439572);const _0x34cf7c=async _0x429f17=>{const _0x3dede8=_0x3701ac;let _0x3d60e9;try{const _0x182e53=await getTickers(_0x429f17);Object['entries'](_0x182e53)['forEach'](_0x4cf513=>{const _0x4ab005=_0x1ca4;_0x3d60e9=_0x4cf513[0x1][_0x4ab005(0x148)],gTicker[noslash(_0x3d60e9)]=_0x4cf513[0x1][_0x4ab005(0x230)],gChange[_0x3d60e9]=_0x4cf513[0x1]['percentage'];});}catch(_0x4137e6){await handleError(_0x4137e6,_0x3dede8(0x271),_0x3d60e9);}},_0x53fd43=async _0xa8fd1d=>{const _0x29d737=_0x3701ac;while(initCycle==_0x17f729){if(!botPaused)try{const _0x56d598=await exchange[_0x29d737(0x2ab)](_0xa8fd1d);gTicker[noslash(_0x56d598[0x0]['symbol'])]=_0x56d598[0x0][_0x29d737(0x28d)];}catch(_0x35283b){if(!exchangeStopped)await handleError(_0x35283b,_0x29d737(0x1f6),_0xa8fd1d);}else await sleep(0x64);}},_0x5c17d8=async _0x57db23=>{const _0x389823=_0x3701ac;while(initCycle==_0x17f729){if(!botPaused)try{const _0x2592b9=await exchange['watchTradesForSymbols'](_0x57db23),_0x581890=_0x2592b9[_0x389823(0x2aa)]();gTicker[noslash(_0x581890[_0x389823(0x148)])]=_0x581890[_0x389823(0x28d)];}catch(_0x1d9115){if(!exchangeStopped)await handleError(_0x1d9115,_0x389823(0x24d),_0x57db23[_0x389823(0x1a0)]());}else await sleep(0x64);}},_0x43bbd6=async _0xb8094b=>{const _0x59a9c1=_0x3701ac;while(initCycle==_0x17f729){if(!botPaused){let _0x280188;try{await sleep(0x3c*0x3e8);const _0x4b9cd7=await getTickers(_0xb8094b);Object[_0x59a9c1(0x227)](_0x4b9cd7)[_0x59a9c1(0x169)](_0x6bb37d=>{const _0x2f8706=_0x59a9c1;_0x280188=_0x6bb37d[0x1][_0x2f8706(0x148)],gChange[_0x280188]=_0x6bb37d[0x1]['percentage'];});}catch(_0x4f1a2a){if(!exchangeStopped)await handleError(_0x4f1a2a,_0x59a9c1(0x1cd),_0x280188);}}else await sleep(0x64);}},_0xdee8af=async _0x5976f9=>{const _0x4c5a37=_0x3701ac;while(initCycle==_0x17f729){if(!botPaused)try{const _0x3e6e69=await exchange['watchOrders'](_0x5976f9);initCycle==_0x17f729&&_0x3e6e69[_0x4c5a37(0x169)](_0x226613=>{updateNumberCoinsCcxt(_0x226613);});}catch(_0x25aa9f){if(!exchangeStopped)await handleError(_0x25aa9f,_0x4c5a37(0x284));}else await sleep(0x64);}};_0x34cf7c(_0x439572),_0x43bbd6(_0x439572),exchange[_0x3701ac(0x20b)][_0x3701ac(0xe3)]&&!(config[_0x3701ac(0x21b)]==_0x3701ac(0x233)&&_0x439572[_0x3701ac(0xf4)]>0xa)?_0x5c17d8(_0x439572):_0x439572['forEach'](_0x1ce4db=>{_0x53fd43(_0x1ce4db);}),_0x439572[_0x3701ac(0x169)](_0x4d468f=>{_0xdee8af(_0x4d468f);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x40188b){const _0x58d7b1=_0x3bd8cf;let _0x4c7a1e={};try{if(config[_0x58d7b1(0x21b)]!='Cryptocom')_0x4c7a1e=await exchange[_0x58d7b1(0x134)](_0x40188b);else for(const _0x3684f5 of _0x40188b){const _0x41bd7a=await exchange[_0x58d7b1(0x24a)](_0x3684f5);_0x4c7a1e[_0x3684f5]=_0x41bd7a;}return _0x4c7a1e;}catch(_0x2f0802){throw _0x2f0802;}}function setBlockTransactionDetection(_0x68e257){const _0x498d6e=_0x3bd8cf;blockTransactionDetection=_0x68e257,logger[_0x498d6e(0x135)](_0x498d6e(0x26d)+blockTransactionDetection);}async function detectLiquidityChange(_0x34ffa2=0x0){const _0x457fef=_0x3bd8cf;transactionDetectionOngoing=!![];try{const _0x36cb4c=await getCoins(_0x34ffa2),[_0x57e959,_0x117831]=_0x36cb4c;let _0x4d73b6=[];currentCoins[_0x457fef(0x169)](_0x3341d8=>{const _0x4a9d95=_0x457fef,_0x36ed00=_0x57e959[_0x4a9d95(0x144)](_0x436694=>_0x436694[_0x4a9d95(0x189)]==_0x3341d8[_0x4a9d95(0x189)]);if(_0x36ed00){if(_0x3341d8[_0x4a9d95(0x197)]!=_0x36ed00[_0x4a9d95(0x197)]){let _0x1e5892;if(_0x3341d8[_0x4a9d95(0x189)]!=config[_0x4a9d95(0xe9)]){const _0x22bf6b=gTicker[noslash(_0x3341d8[_0x4a9d95(0x148)])];_0x1e5892=_0x3341d8[_0x4a9d95(0x1de)]?0x1/_0x22bf6b:_0x22bf6b;}else _0x1e5892=0x1;_0x4d73b6[_0x4a9d95(0x1c3)]({'coin':_0x3341d8[_0x4a9d95(0x189)],'symbol':_0x3341d8[_0x4a9d95(0x148)],'price':_0x1e5892,'number':Number(formatResult(_0x36ed00[_0x4a9d95(0x197)]-_0x3341d8[_0x4a9d95(0x197)],0x8)),'basecoinvalue':_0x1e5892*(_0x36ed00[_0x4a9d95(0x197)]-_0x3341d8['number'])});}}});if(_0x4d73b6[_0x457fef(0xf4)]>0x0&&!blockTransactionDetection){for(const _0x48c6e8 of _0x4d73b6){if(config[_0x457fef(0xf2)]){logger['debug'](_0x457fef(0x1e8)+_0x48c6e8[_0x457fef(0x269)]+'\x20|\x20highest\x20fee:\x20'+lastFees['highest']);if(lastFees[_0x457fef(0x176)]==0x0||Math[_0x457fef(0x1e0)](_0x48c6e8[_0x457fef(0x269)])>lastFees[_0x457fef(0x176)]*0x3){if(config[_0x457fef(0xf2)]==_0x457fef(0x141)){delete _0x48c6e8[_0x457fef(0x148)],delete _0x48c6e8['basecoinvalue'];let _0x331b03=[],_0x3e8aa3=[...config[_0x457fef(0x25f)]]||[],_0x583bcd=config[_0x457fef(0x25f)];_0x3e8aa3[_0x457fef(0x247)]((_0x5bb4d2,_0x32a799)=>_0x5bb4d2[_0x457fef(0x1e5)]>_0x32a799[_0x457fef(0x1e5)]?-0x1:_0x32a799[_0x457fef(0x1e5)]>_0x5bb4d2['date']?0x1:0x0);const _0x46e7d3=getDate();if(_0x3e8aa3[0x0]){const _0x4f2e0a=fns[_0x457fef(0x175)](_0x3e8aa3[0x0][_0x457fef(0x1e5)],'yyyy/MM/dd',new Date()),_0x1d8757=fns[_0x457fef(0x175)](_0x46e7d3,_0x457fef(0x172),new Date());if(fns[_0x457fef(0x143)](_0x4f2e0a,_0x1d8757)){_0x331b03=_0x3e8aa3[0x0]['changes'];const _0x4f7a68=_0x331b03['find'](_0x55eef6=>_0x55eef6[_0x457fef(0x189)]==_0x48c6e8[_0x457fef(0x189)]);_0x4f7a68?(_0x4f7a68[_0x457fef(0x197)]+=_0x48c6e8['number'],_0x4f7a68[_0x457fef(0x197)]==0x0&&(_0x331b03=_0x331b03[_0x457fef(0x244)](_0x3998b1=>{const _0x33b618=_0x457fef;return _0x3998b1['coin']!=_0x48c6e8[_0x33b618(0x189)];}))):_0x331b03[_0x457fef(0x1c3)](_0x48c6e8);const _0x2a83b3=_0x583bcd[_0x457fef(0x144)](_0x350991=>_0x350991[_0x457fef(0x1e5)]==_0x46e7d3);_0x2a83b3[_0x457fef(0x1fb)]=_0x331b03;}else _0x583bcd[_0x457fef(0x1c3)]({'date':_0x46e7d3,'changes':[_0x48c6e8]});}const _0x1a74d0=_0x583bcd[_0x457fef(0x144)](_0x5a7b9a=>_0x5a7b9a[_0x457fef(0x1e5)]==_0x46e7d3);if(_0x1a74d0){let _0x1659dc=!![];_0x1a74d0[_0x457fef(0x1fb)][_0x457fef(0x169)](_0xce27c9=>{const _0x580003=_0x457fef;if(_0xce27c9[_0x580003(0x197)]!=0x0)_0x1659dc=![];}),_0x1659dc&&(_0x583bcd=_0x583bcd[_0x457fef(0x244)](_0x18f28c=>{const _0xc3b7ca=_0x457fef;return _0x18f28c[_0xc3b7ca(0x1e5)]!=_0x46e7d3;}));}let _0x23cddb=dbConfig[_0x457fef(0x1e6)]('bot')[_0x457fef(0x144)]({'botID':botID})['value']();_0x23cddb&&(dbConfig[_0x457fef(0x1e6)](_0x457fef(0x212))[_0x457fef(0x144)]({'botID':botID})['assign']({'liquidity':_0x583bcd})[_0x457fef(0x11c)](),config['liquidity']=_0x583bcd);logHistory(_0x457fef(0x281),'Portfolio\x20change\x20detected:\x20'+Math[_0x457fef(0x1e0)](_0x48c6e8[_0x457fef(0x197)])+'\x20'+_0x48c6e8[_0x457fef(0x189)]+'\x20'+(_0x48c6e8['number']>0x0?_0x457fef(0xe6):_0x457fef(0x201))+'\x20-\x20liquidity\x20settings\x20updated\x20accordingly'),proxyEmit(_0x457fef(0x10e),emittedConfiguration());const _0x43fa11=getNormalizedPerformance();emitPerformance(_0x43fa11),getStartingBalances(_0x43fa11),logger[_0x457fef(0x135)](_0x457fef(0x15a));}else config[_0x457fef(0xf2)]==_0x457fef(0x23d)&&(config['headless']?(await storeHeadless({'headless':![]}),logHistory('success',_0x457fef(0x1ff)+Math[_0x457fef(0x1e0)](_0x48c6e8['number'])+'\x20'+_0x48c6e8['coin']+'\x20'+(_0x48c6e8['number']>0x0?_0x457fef(0xe6):_0x457fef(0x201))+_0x457fef(0x1bd))):logger[_0x457fef(0x135)](_0x457fef(0x1ff)+Math[_0x457fef(0x1e0)](_0x48c6e8[_0x457fef(0x197)])+'\x20'+_0x48c6e8[_0x457fef(0x189)]+'\x20'+(_0x48c6e8['number']>0x0?_0x457fef(0xe6):'removed')+'\x20-\x20bot\x20already\x20running\x20in\x20manual\x20mode'));}else logger['debug'](_0x457fef(0xf6)+Math[_0x457fef(0x1e0)](_0x48c6e8[_0x457fef(0x197)])+'\x20'+_0x48c6e8[_0x457fef(0x189)]+'\x20'+(_0x48c6e8['number']>0x0?_0x457fef(0xe6):_0x457fef(0x201)));}else logger['debug'](_0x457fef(0x1ff)+Math[_0x457fef(0x1e0)](_0x48c6e8[_0x457fef(0x197)])+'\x20'+_0x48c6e8['coin']+'\x20'+(_0x48c6e8[_0x457fef(0x197)]>0x0?_0x457fef(0xe6):_0x457fef(0x201))+_0x457fef(0x27c));}currentCoins=_0x57e959,currentCoinsAll=_0x117831;}}catch(_0xd67743){if(!exchangeStopped)await handleError(_0xd67743,_0x457fef(0x14e));}transactionDetectionOngoing=![];}async function watchTransactions(){await sleep(0x14*0x3e8);while(!![]){!botPaused&&!blockTransactionDetection&&coinsLoaded?(detectLiquidityChange(),await sleep(watchTransactionsInterval)):await sleep(0x3e8);}}async function loadSymbols(){const _0x246cb1=_0x3bd8cf;try{markets=await exchange[_0x246cb1(0xf8)](!![]),allSymbols=[],Object[_0x246cb1(0x227)](markets)[_0x246cb1(0x169)](_0x38b8e9=>{const _0x71ff37=_0x246cb1;_0x38b8e9[0x1][_0x71ff37(0x181)]&&_0x38b8e9[0x1][_0x71ff37(0x207)]&&allSymbols[_0x71ff37(0x1c3)](_0x38b8e9[0x0]);});}catch(_0x1b996b){markets?logger[_0x246cb1(0x135)]('Error\x20in\x20loadSymbols():\x20'+_0x1b996b[_0x246cb1(0x1a0)]()):(loading[_0x246cb1(0x19a)]=!![],_0x1b996b[_0x246cb1(0x1a0)]()[_0x246cb1(0x1b8)]()[_0x246cb1(0x160)]('timestamp')||_0x1b996b[_0x246cb1(0x1a0)]()[_0x246cb1(0x1b8)]()['includes'](_0x246cb1(0x20d))?(logHistory(_0x246cb1(0x14b),_0x246cb1(0x13a)),loading[_0x246cb1(0x14b)]=_0x246cb1(0x1a1)):handleErrorNoStop(_0x1b996b,_0x246cb1(0xeb),!![]),logHistory(_0x246cb1(0x14b),_0x246cb1(0x23b)),logHistory(_0x246cb1(0x14b),_0x246cb1(0x224)+loadCoinsRetryInterval/0xea60+_0x246cb1(0x17a)),logger[_0x246cb1(0x135)]('Error\x20details:',_0x1b996b),emitLoadingProgress(),botPaused=!![],await sleep(loadCoinsRetryInterval),restartBot());}}function validateSymbols(_0x45e2c7){const _0x215ae8=_0x3bd8cf;let _0x910ec2=[];return _0x45e2c7[_0x215ae8(0x169)](_0x5d4657=>{const _0x559f01=_0x215ae8;!allSymbols[_0x559f01(0x160)](_0x5d4657)?logHistory(_0x559f01(0x14b),_0x559f01(0x219)+_0x5d4657+_0x559f01(0x249)):_0x910ec2['push'](_0x5d4657);}),_0x910ec2;}async function initclient(){const _0xd69462=_0x3bd8cf;proxyEmit(_0xd69462(0x10e),emittedConfiguration()),proxyEmit(_0xd69462(0x21e),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x18445e=getNormalizedPerformance();emitPerformance(_0x18445e),getStartingBalances(_0x18445e);}async function toggleBotMode(){const _0x24047f=_0x3bd8cf;let _0x44ef53=dbConfig[_0x24047f(0x1e6)](_0x24047f(0x212))[_0x24047f(0x144)]({'botID':botID})[_0x24047f(0x155)]();if(_0x44ef53){const _0xce272b=!_0x44ef53[_0x24047f(0x1d8)];dbConfig[_0x24047f(0x1e6)](_0x24047f(0x212))[_0x24047f(0x144)]({'botID':botID})[_0x24047f(0xf0)]({'headless':_0xce272b})[_0x24047f(0x11c)](),config[_0x24047f(0x1d8)]=_0xce272b,proxyEmit(_0x24047f(0x10e),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x4bcd6f=_0x3bd8cf;process[_0x4bcd6f(0x245)]({'updatebotmanager':!![]},_0x33ca1d=>{}),logger[_0x4bcd6f(0x135)](_0x4bcd6f(0x1b6)+config[_0x4bcd6f(0x1d8)]);}async function loadCoins(_0x5f390c){const _0x259fac=_0x3bd8cf;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x4ac2fe,_0x3088e3=0x0,_0x2d3d6b=0x0;_0x5f390c[_0x259fac(0x169)](_0x58db9a=>{const _0x534498=_0x259fac;loading[_0x534498(0x1be)]['push'](_0x58db9a);}),loadingCanceled=![];let _0x5974ac=![];while(_0x4ac2fe!=_0x5f390c[_0x259fac(0xf4)]+maxLoadingProgress){_0x4ac2fe=loadingProgress,_0x5f390c['forEach'](_0x4210e7=>{const _0x541bac=_0x259fac;if(gTicker[noslash(_0x4210e7)]){loading['remainingSymbols']=loading['remainingSymbols'][_0x541bac(0x244)](_0x2244bd=>_0x2244bd!=_0x4210e7);if(!watchedSymbols[_0x541bac(0x160)](_0x4210e7))watchedSymbols[_0x541bac(0x1c3)](_0x4210e7);_0x4ac2fe++;}}),loading[_0x259fac(0x206)]=Math[_0x259fac(0x171)](_0x4ac2fe/(_0x5f390c['length']+maxLoadingProgress)*0x64);loading[_0x259fac(0x206)]!=0x64&&(_0x2d3d6b>0x1e*0x5&&(loading['timeout']=!![],emitLoadingProgress()),_0x2d3d6b>0x78*0x5&&!_0x5974ac&&(_0x5974ac=!![],logHistory('error',_0x259fac(0x185)+loading['remainingSymbols'][_0x259fac(0x15e)](',\x20')+'\x20-\x20bot\x20not\x20started'),logHistory('error',_0x259fac(0x224)+loadCoinsRetryInterval/0xea60+_0x259fac(0x17a)),loadingCanceled=!![],await sleep(loadCoinsRetryInterval),restartBot()));if(loadingCanceled){loading[_0x259fac(0x19a)]=!![],emitLoadingProgress();break;}else _0x3088e3!=loading['progress']&&(_0x3088e3=loading[_0x259fac(0x206)],emitLoadingProgress()),_0x2d3d6b++,await sleep(0xc8);}_0x4ac2fe==_0x5f390c[_0x259fac(0xf4)]+maxLoadingProgress&&(coinsLoaded=!![],process['send']({'status':_0x259fac(0x222),'live':_0x259fac(0x263)},_0x444638=>{}),_0x5974ac&&logHistory(_0x259fac(0x281),'All\x20coin\x20data\x20loaded\x20-\x20bot\x20started'));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0xcae8ef=_0x3bd8cf;proxyEmit('configuration',{...emittedConfiguration(),'configstate':_0xcae8ef(0xe7)});}function emitLoadingProgress(){const _0x5b9291=_0x3bd8cf;proxyEmit(_0x5b9291(0x215),loading);}async function getFiat(){const _0x4b490d=_0x3bd8cf;let _0x3a3134=gTicker[stablecoins[_0x4b490d(0x15c)][_0x4b490d(0x189)]],_0x20d6f4=gTicker[stablecoins[_0x4b490d(0x256)][_0x4b490d(0x189)]];return{'eur':Number(_0x3a3134),'usd':Number(_0x20d6f4)};}function capitalize(_0xc1e8e9){const _0x3b2479=_0x3bd8cf;return _0xc1e8e9['substring'](0x0,0x1)[_0x3b2479(0x223)]()+_0xc1e8e9[_0x3b2479(0x127)](0x1);}function supportedExchanges(){const _0x5974ce=_0x3bd8cf,_0x9ae49e=['ws',_0x5974ce(0x134),'fetchTicker',_0x5974ce(0x2ab),'watchOrders',_0x5974ce(0x20e),_0x5974ce(0x1a3),'fetchOpenOrders',_0x5974ce(0x125)];let _0x537ae5=[],_0x18e88d=[],_0x3f4b1=ccxt[_0x5974ce(0x177)][_0x5974ce(0x21e)];_0x3f4b1[_0x5974ce(0x169)](_0x216c8c=>{const _0x1a6dc4=_0x5974ce;try{const _0x193021=new ccxt[(_0x1a6dc4(0x177))][_0x216c8c]();_0x18e88d['push'](_0x193021);}catch(_0x252980){}}),_0x18e88d[_0x5974ce(0x169)](_0x4b7048=>{const _0x176bb5=_0x5974ce;let _0x415020=0x0;_0x9ae49e[_0x176bb5(0x169)](_0x2cc364=>{const _0x46f8e6=_0x176bb5;_0x2cc364 in _0x4b7048[_0x46f8e6(0x20b)]&&_0x4b7048[_0x46f8e6(0x20b)][_0x2cc364]&&_0x415020++;}),_0x415020==_0x9ae49e[_0x176bb5(0xf4)]&&(!excludedExchanges[_0x176bb5(0x160)](_0x4b7048['id'])&&_0x537ae5[_0x176bb5(0x1c3)](capitalize(_0x4b7048['id'])));});let _0x2a3a80=[];return _0x3f4b1[_0x5974ce(0x169)](_0x57d9a5=>{_0x57d9a5=capitalize(_0x57d9a5);if(!_0x537ae5['includes'](_0x57d9a5))_0x2a3a80['push'](_0x57d9a5);}),_0x537ae5;}function setStartDatePerformance(){const _0x58e59b=_0x3bd8cf;if(config&&config[_0x58e59b(0x25f)][0x0]['changes']['length']!=0x0){const _0x2bb75a=config[_0x58e59b(0x25f)][0x0][_0x58e59b(0x1fb)];dbPerformance[_0x58e59b(0x1e6)](_0x58e59b(0x26b))[_0x58e59b(0x144)]({'date':config[_0x58e59b(0x25a)]})[_0x58e59b(0xf0)]({'coins':_0x2bb75a})[_0x58e59b(0x11c)]();}}function calculatePnL(_0x535478,_0x27dccf,_0x47a149,_0x4cb89a,_0x3e946f,_0x2ab3c5){const _0x52fad6=_0x3bd8cf;!_0x535478[_0x52fad6(0x160)]('/'+config[_0x52fad6(0xe9)])&&(_0x47a149=_0x47a149==_0x52fad6(0xe2)?'sell':_0x52fad6(0xe2));!_0x2ab3c5[_0x27dccf]&&(_0x2ab3c5[_0x27dccf]={'number':0x0,'sells':0x0,'buys':0x0,'breakeven':0x0,'realizedPnL':0x0});let _0x9281b5=0x0,_0x3c1f4c,_0x29e2f7;if(_0x47a149==_0x52fad6(0xe2))_0x29e2f7=_0x2ab3c5[_0x27dccf][_0x52fad6(0x197)]*_0x2ab3c5[_0x27dccf]['breakeven']+_0x3e946f*_0x4cb89a,_0x2ab3c5[_0x27dccf]['number']+=_0x4cb89a,_0x2ab3c5[_0x27dccf][_0x52fad6(0x16e)]=_0x2ab3c5[_0x27dccf][_0x52fad6(0x197)]!=0x0?_0x29e2f7/_0x2ab3c5[_0x27dccf]['number']:0x0,_0x2ab3c5[_0x27dccf][_0x52fad6(0x13c)]++;else _0x47a149==_0x52fad6(0x1c7)&&(_0x3c1f4c=Math[_0x52fad6(0x261)](_0x2ab3c5[_0x27dccf]['number'],_0x4cb89a),_0x9281b5=(_0x3e946f-_0x2ab3c5[_0x27dccf][_0x52fad6(0x16e)])*_0x3c1f4c,_0x29e2f7=Math[_0x52fad6(0xdb)](_0x2ab3c5[_0x27dccf][_0x52fad6(0x197)]*_0x2ab3c5[_0x27dccf]['breakeven']-_0x3c1f4c*_0x2ab3c5[_0x27dccf][_0x52fad6(0x16e)],0x0),_0x2ab3c5[_0x27dccf][_0x52fad6(0x197)]-=_0x3c1f4c,_0x2ab3c5[_0x27dccf][_0x52fad6(0x16e)]=_0x2ab3c5[_0x27dccf][_0x52fad6(0x197)]!=0x0?_0x29e2f7/_0x2ab3c5[_0x27dccf][_0x52fad6(0x197)]:0x0,_0x2ab3c5[_0x27dccf][_0x52fad6(0x251)]+=_0x9281b5,_0x2ab3c5[_0x27dccf][_0x52fad6(0x1df)]++);return _0x9281b5;}async function generatePnL(){const _0x50f000=_0x3bd8cf;pnlGenerationNeeded=![],logger['debug'](_0x50f000(0x243));const _0x3ba5a4=dbLogs[_0x50f000(0x1e6)]('logs')[_0x50f000(0x155)]();let _0x547cc5={},_0xbe46a3=0x0,_0xded2d5=0x0,_0x2c46c9=config[_0x50f000(0x25a)];const _0x3a4eac=fns[_0x50f000(0x175)](_0x2c46c9,_0x50f000(0x172),new Date()),_0x33a610=new Date();let _0x21fc54=0x0;for(let _0x13e713=_0x3a4eac;!fns[_0x50f000(0x113)](_0x33a610,_0x13e713);_0x13e713=fns[_0x50f000(0x1b3)](_0x13e713,0x1)){const _0x584148=fns['format'](_0x13e713,_0x50f000(0x172));while(_0xbe46a3<_0x3ba5a4[_0x50f000(0xf4)]){const _0x5ed0ad=new Date(_0x3ba5a4[_0xbe46a3][_0x50f000(0x260)]);if(fns[_0x50f000(0x113)](_0x5ed0ad,_0x13e713))_0xbe46a3++;else{if(_0x3ba5a4[_0xbe46a3][_0x50f000(0x260)][_0x50f000(0x160)](_0x584148)){const _0x21424f=_0x3ba5a4[_0xbe46a3];if(_0x21424f['type']===_0x50f000(0x152)&&(_0x21424f[_0x50f000(0x23c)][_0x50f000(0x160)](_0x50f000(0x23f))||_0x21424f[_0x50f000(0x23c)][_0x50f000(0x160)](_0x50f000(0x235)))){const _0x58f82b=_0x21424f[_0x50f000(0x23c)][_0x50f000(0x10a)](/([A-Z]+\/[A-Z]+) (sell|buy) #([\d.]+) @([\d.]+)/);if(_0x58f82b){const [,_0x1376cd,_0x164317,_0xdcded,_0x572f8e]=_0x58f82b,_0x397d16=_0x1376cd[_0x50f000(0x160)]('/'+config[_0x50f000(0xe9)])?_0x1376cd[_0x50f000(0x19d)]('/')[0x0]:_0x1376cd[_0x50f000(0x19d)]('/')[0x1],_0x3035c8=calculatePnL(_0x1376cd,_0x397d16,_0x164317,parseFloat(_0xdcded),parseFloat(_0x572f8e),_0x547cc5);_0xded2d5+=_0x3035c8;}}_0xbe46a3++;}else break;}}dbPerformance[_0x50f000(0x1e6)](_0x50f000(0x26b))['find']({'date':_0x584148})[_0x50f000(0xf0)]({'pnl':_0xded2d5})[_0x50f000(0x11c)]();}dbCoinResults[_0x50f000(0x29d)](_0x50f000(0x117),_0x547cc5)[_0x50f000(0x11c)](),logger[_0x50f000(0x135)](_0x50f000(0x273));const _0x122415=getNormalizedPerformance();emitPerformance(_0x122415);}async function updatePnL(_0x19dc0f){const _0xd1869a=_0x3bd8cf,{symbol:_0x1891b9,coin:_0xc95c3c,amount:_0x178d3c,price:_0x21098a,side:_0xbc4b8b,reverse:_0x3a8ebe}=_0x19dc0f;let _0x55940c=dbCoinResults['get'](_0xd1869a(0x117))[_0xd1869a(0x155)]();const _0x3dcd08=calculatePnL(_0x1891b9,_0xc95c3c,_0xbc4b8b,_0x178d3c,_0x21098a,_0x55940c);dbCoinResults[_0xd1869a(0x29d)](_0xd1869a(0x117),_0x55940c)[_0xd1869a(0x11c)]();const _0x19b8b5=getTimeStamp()[_0xd1869a(0x19d)]('\x20')[0x0];let _0x791b4d=dbPerformance[_0xd1869a(0x1e6)]('data')[_0xd1869a(0x144)]({'date':_0x19b8b5})[_0xd1869a(0x155)]();_0x791b4d?(_0x791b4d[_0xd1869a(0x238)]+=_0x3dcd08,dbPerformance[_0xd1869a(0x1e6)](_0xd1869a(0x26b))['find']({'date':_0x19b8b5})[_0xd1869a(0xf0)](_0x791b4d)['write']()):await storePerformance();const _0x49fe1e=getNormalizedPerformance();emitPerformance(_0x49fe1e);}async function validate24hChanges(){const _0x561774=_0x3bd8cf;for(const _0x54f09d of currentCoins){if(_0x54f09d[_0x561774(0x189)]!=config['basecoin']){let _0x2c40dc;_0x54f09d[_0x561774(0x1de)]?_0x2c40dc=formatResult((0x1/(gChange[_0x54f09d[_0x561774(0x148)]]/0x64+0x1)-0x1)*0x64,0x3):_0x2c40dc=gChange[_0x54f09d[_0x561774(0x148)]],_0x2c40dc<config[_0x561774(0x265)]&&(logHistory(_0x561774(0x14b),_0x54f09d[_0x561774(0x189)]+_0x561774(0xdc)+_0x2c40dc+'%'),logHistory('error',_0x561774(0x16b)),logHistory('error','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again'),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x127b6e,_0x2ddd6c){const _0xf95c99=_0x3bd8cf;if(!_0x127b6e)return!![];const _0x5e8188=_0x2ddd6c['split']('.'),_0xb2e4a5=_0x127b6e[_0xf95c99(0x19d)]('.');for(var _0x9853f9=0x0;_0x9853f9<_0xb2e4a5[_0xf95c99(0xf4)];_0x9853f9++){const _0x5eb17b=~~_0xb2e4a5[_0x9853f9],_0x544bd6=~~_0x5e8188[_0x9853f9];if(_0x5eb17b<_0x544bd6)return!![];if(_0x5eb17b>_0x544bd6)return![];}return![];}async function oneTimeMigration(){const _0x2ec80a=_0x3bd8cf;let _0x16ad4d=dbLogs['get'](_0x2ec80a(0x163))[_0x2ec80a(0x155)]();if(isOlderVersion(_0x16ad4d,_0x2ec80a(0x1d1))){let _0x382932=[];const _0x3249ca=dbLogs[_0x2ec80a(0x1e6)](_0x2ec80a(0x162))[_0x2ec80a(0x155)]();_0x3249ca['forEach'](_0x4d8617=>{const _0x41d085=_0x2ec80a;_0x382932[_0x41d085(0x1c3)]({'time':_0x4d8617[_0x41d085(0x260)],'type':_0x4d8617['type'],'event':_0x4d8617['event']});}),dbLogs['get'](_0x2ec80a(0x162))[_0x2ec80a(0xf0)](_0x382932)[_0x2ec80a(0x11c)]();}let _0x165452=dbConfig['get'](_0x2ec80a(0x163))[_0x2ec80a(0x155)]();if(isOlderVersion(_0x165452,_0x2ec80a(0x1d1))){let _0x5b74f1=dbConfig[_0x2ec80a(0x1e6)](_0x2ec80a(0x212))['find']({'botID':botID})[_0x2ec80a(0x155)]();if(_0x5b74f1){let _0x44d557=[];_0x5b74f1[_0x2ec80a(0x285)][_0x2ec80a(0x169)](_0x212ae7=>{const _0x248380=_0x2ec80a;_0x44d557[_0x248380(0x1c3)]({'coin':_0x212ae7[_0x248380(0x189)],'number':_0x212ae7[_0x248380(0x241)],'price':_0x212ae7[_0x248380(0xdf)]}),delete _0x212ae7[_0x248380(0x241)],delete _0x212ae7[_0x248380(0xdf)];});if(_0x44d557['length']!==0x0)fs[_0x2ec80a(0x290)](configbackuppath+(_0x2ec80a(0x287)+botID+_0x2ec80a(0x101)),JSON['stringify'](_0x44d557,null,0x4),function(_0x4be40e){if(_0x4be40e){}});const _0x4d0939=(_0x209c01,_0x2a94f8)=>{const _0x466c30=_0x2ec80a;let _0xe456a6=[];_0x2a94f8[_0x466c30(0x169)](_0x2fa290=>{const _0x5a7444=_0x466c30,_0x492d1d=_0x209c01[_0x5a7444(0x144)](_0x507121=>_0x507121['coin']==_0x2fa290[_0x5a7444(0x189)]);if(!_0x492d1d)_0xe456a6[_0x5a7444(0x1c3)](_0x2fa290);});let _0x498e19=[];return _0x209c01['forEach'](_0x1fd85d=>{const _0x20c9f5=_0x466c30,_0x14f4da=_0x2a94f8[_0x20c9f5(0x144)](_0x259c1b=>_0x259c1b[_0x20c9f5(0x189)]==_0x1fd85d['coin']);if(!_0x14f4da||_0x14f4da[_0x20c9f5(0x197)]==0x0&&_0x1fd85d[_0x20c9f5(0x197)]!=0x0)_0x498e19[_0x20c9f5(0x1c3)](_0x1fd85d);}),{'missingDay1':_0xe456a6,'notInDay2':_0x498e19};},_0x390b41=dbPerformance[_0x2ec80a(0x1e6)](_0x2ec80a(0x26b))[_0x2ec80a(0xf9)]()[_0x2ec80a(0x155)]();if(_0x390b41[_0x2ec80a(0xf4)]>0x1){const {missingDay1:_0x36ccf3,notInDay2:_0xc96585}=_0x4d0939(_0x44d557,_0x390b41[0x1]['coins']);_0x44d557=[..._0x44d557,..._0x36ccf3],_0xc96585['forEach'](_0x53e38e=>{const _0x21c9b9=_0x2ec80a;let _0x13f840=_0x44d557['findIndex'](_0x3d690a=>_0x3d690a[_0x21c9b9(0x189)]==_0x53e38e[_0x21c9b9(0x189)]);_0x13f840!=-0x1&&_0x44d557[_0x21c9b9(0x10f)](_0x13f840,0x1);});}_0x44d557[_0x2ec80a(0x247)]((_0x5014d0,_0x29c3fa)=>_0x5014d0[_0x2ec80a(0x189)]>_0x29c3fa['coin']?0x1:_0x29c3fa[_0x2ec80a(0x189)]>_0x5014d0[_0x2ec80a(0x189)]?-0x1:0x0);let _0x22bb0e=[{'date':_0x5b74f1[_0x2ec80a(0x25a)],'changes':_0x44d557}];_0x390b41[_0x2ec80a(0xf4)]>0x2&&_0x390b41[_0x2ec80a(0x169)]((_0x6b68a6,_0x1a3715)=>{const _0x28d7c0=_0x2ec80a;if(_0x1a3715>0x0&&_0x1a3715<_0x390b41[_0x28d7c0(0xf4)]-0x1){const {missingDay1:_0x3efffc,notInDay2:_0x1d0c5a}=_0x4d0939(_0x390b41[_0x1a3715][_0x28d7c0(0x117)],_0x390b41[_0x1a3715+0x1][_0x28d7c0(0x117)]);_0x44d557=[],(_0x3efffc['length']!=0x0||_0x1d0c5a['length']!=0x0)&&(_0x3efffc[_0x28d7c0(0xf4)]!=0x0&&_0x44d557[_0x28d7c0(0x1c3)](..._0x3efffc),_0x1d0c5a[_0x28d7c0(0xf4)]!=0x0&&(_0x1d0c5a[_0x28d7c0(0x169)](_0x39cdde=>{const _0x353e96=_0x28d7c0;_0x39cdde[_0x353e96(0x197)]=-_0x39cdde[_0x353e96(0x197)];}),_0x44d557['push'](..._0x1d0c5a)),_0x44d557[_0x28d7c0(0x247)]((_0x27fb61,_0x5ec069)=>_0x27fb61[_0x28d7c0(0x189)]>_0x5ec069['coin']?0x1:_0x5ec069[_0x28d7c0(0x189)]>_0x27fb61[_0x28d7c0(0x189)]?-0x1:0x0),_0x22bb0e[_0x28d7c0(0x1c3)]({'date':_0x390b41[_0x1a3715+0x1][_0x28d7c0(0x1e5)],'changes':_0x44d557}));}}),dbConfig[_0x2ec80a(0x1e6)](_0x2ec80a(0x212))[_0x2ec80a(0x144)]({'botID':botID})['assign']({..._0x5b74f1,'liquidity':_0x22bb0e})[_0x2ec80a(0x11c)]();}}if(isOlderVersion(_0x165452,_0x2ec80a(0x12d))){let _0x332a60=dbConfig['get'](_0x2ec80a(0x212))[_0x2ec80a(0x144)]({'botID':botID})['value']();if(_0x332a60){const _0x4384c8=_0x332a60[_0x2ec80a(0x21b)],_0x433bd0=_0x4384c8?capitalize(_0x4384c8):_0x2ec80a(0x1d3);dbConfig[_0x2ec80a(0x1e6)](_0x2ec80a(0x212))[_0x2ec80a(0x144)]({'botID':botID})[_0x2ec80a(0xf0)]({'exchange':_0x433bd0})[_0x2ec80a(0x11c)]();}}if(isOlderVersion(_0x165452,_0x2ec80a(0x151))){let _0xc6a98c=dbConfig[_0x2ec80a(0x1e6)](_0x2ec80a(0x212))['find']({'botID':botID})[_0x2ec80a(0x155)]();if(_0xc6a98c){const _0xc21e4f=_0xc6a98c[_0x2ec80a(0x10b)],_0x14c4e8=_0xc21e4f?'marketcap':![];dbConfig[_0x2ec80a(0x1e6)]('bot')[_0x2ec80a(0x144)]({'botID':botID})[_0x2ec80a(0xf0)]({'marketcapEnabled':_0x14c4e8})[_0x2ec80a(0x11c)]();}}if(isOlderVersion(_0x165452,_0x2ec80a(0x10c))){let _0x58e4c5=dbConfig[_0x2ec80a(0x1e6)](_0x2ec80a(0x212))[_0x2ec80a(0x144)]({'botID':botID})[_0x2ec80a(0x155)]();if(_0x58e4c5){const _0x5682b0=_0x58e4c5[_0x2ec80a(0xf2)],_0x463029=_0x5682b0?_0x2ec80a(0x141):![];dbConfig[_0x2ec80a(0x1e6)]('bot')[_0x2ec80a(0x144)]({'botID':botID})[_0x2ec80a(0xf0)]({'autoliquidity':_0x463029})['write']();}}let _0x47a90a=dbPerformance[_0x2ec80a(0x1e6)](_0x2ec80a(0x163))['value']();isOlderVersion(_0x47a90a,_0x2ec80a(0x1d1))&&setStartDatePerformance();let _0xedd154=dbCoinResults[_0x2ec80a(0x1e6)](_0x2ec80a(0x163))['value']();if(isOlderVersion(_0xedd154,_0x2ec80a(0x17c))){let _0x40b528=dbCoinResults['get']('coins')[_0x2ec80a(0x155)]();if(_0x40b528[_0x2ec80a(0xf4)]!=0x0)pnlGenerationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x4d7641=_0x3bd8cf;dbConfig['set'](_0x4d7641(0x163),serverversion)[_0x4d7641(0x11c)](),dbPerformance['set'](_0x4d7641(0x163),serverversion)[_0x4d7641(0x11c)](),dbLogs[_0x4d7641(0x29d)](_0x4d7641(0x163),serverversion)[_0x4d7641(0x11c)](),dbCoinResults['set'](_0x4d7641(0x163),serverversion)[_0x4d7641(0x11c)]();}function getConfiguration(_0x223e3c){const _0x18f7f0=_0x3bd8cf;let _0x47a883=dbConfig[_0x18f7f0(0x1e6)]('bot')[_0x18f7f0(0x144)]({'botID':_0x223e3c})['value']();if(_0x47a883){let _0x253306=![];typeof _0x47a883[_0x18f7f0(0x21d)]=='string'&&(_0x47a883={..._0x47a883,'threshold':Number(_0x47a883[_0x18f7f0(0x21d)])},_0x253306=!![]),_0x47a883[_0x18f7f0(0x265)]==undefined&&(_0x47a883={..._0x47a883,'change24h':-0x14},_0x253306=!![]),_0x47a883[_0x18f7f0(0x234)]==undefined&&(_0x47a883={..._0x47a883,'fiat':_0x18f7f0(0x104)},_0x253306=!![]),_0x47a883[_0x18f7f0(0x25e)]==undefined&&(_0x47a883={..._0x47a883,'onepagemode':settings[_0x18f7f0(0x25e)]},_0x253306=!![]),_0x47a883[_0x18f7f0(0x187)]==undefined&&(_0x47a883={..._0x47a883,'colorscheme':'red_yellow_blue'},_0x253306=!![]),_0x47a883[_0x18f7f0(0xf2)]==undefined&&(_0x47a883={..._0x47a883,'autoliquidity':_0x18f7f0(0x141)},_0x253306=!![]),_0x47a883[_0x18f7f0(0x193)]==undefined&&(_0x47a883={..._0x47a883,'marketcapApi':settings[_0x18f7f0(0x193)]?!![]:![]},_0x253306=!![]),_0x47a883[_0x18f7f0(0x10b)]==undefined&&(_0x47a883={..._0x47a883,'marketcapEnabled':![]},_0x253306=!![]),_0x47a883[_0x18f7f0(0x109)]==undefined&&(_0x47a883={..._0x47a883,'sandbox':![]},_0x253306=!![]),_0x253306&&(_0x47a883={'botID':_0x47a883[_0x18f7f0(0x2a2)],'exchange':_0x47a883[_0x18f7f0(0x21b)],'apiKey':_0x47a883[_0x18f7f0(0x133)],'apiSecret':_0x47a883['apiSecret'],'apiPassword':_0x47a883[_0x18f7f0(0x1f5)],'basecoin':_0x47a883['basecoin'],'botname':_0x47a883[_0x18f7f0(0x103)],'showname':_0x47a883['showname'],'threshold':_0x47a883[_0x18f7f0(0x21d)],'ordertype':_0x47a883['ordertype'],'timeout':_0x47a883[_0x18f7f0(0x258)],'fiat':_0x47a883[_0x18f7f0(0x234)],'startdate':_0x47a883[_0x18f7f0(0x25a)],'recreate':_0x47a883[_0x18f7f0(0x213)],'timeshift':_0x47a883[_0x18f7f0(0x1e4)],'onepagemode':_0x47a883[_0x18f7f0(0x25e)],'headless':_0x47a883['headless'],'cooldown':_0x47a883['cooldown'],'change24h':_0x47a883['change24h'],'emojibuy':_0x47a883[_0x18f7f0(0x23e)],'emojisell':_0x47a883[_0x18f7f0(0x228)],'colorscheme':_0x47a883[_0x18f7f0(0x187)],'marketcapApi':_0x47a883[_0x18f7f0(0x193)],'marketcapEnabled':_0x47a883[_0x18f7f0(0x10b)],'sandbox':_0x47a883[_0x18f7f0(0x109)],'portfolio':_0x47a883['portfolio'],'autoliquidity':_0x47a883[_0x18f7f0(0xf2)],'liquidity':_0x47a883[_0x18f7f0(0x25f)],'openOrders':_0x47a883[_0x18f7f0(0x183)]},dbConfig[_0x18f7f0(0x1e6)](_0x18f7f0(0x212))[_0x18f7f0(0x13f)]()[_0x18f7f0(0x11c)](),dbConfig[_0x18f7f0(0x1e6)](_0x18f7f0(0x212))[_0x18f7f0(0x1c3)](_0x47a883)[_0x18f7f0(0x11c)]());}else _0x47a883={'botID':_0x223e3c,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x18f7f0(0x1e9)+_0x223e3c,'showname':![],'threshold':0x3,'ordertype':_0x18f7f0(0x13b),'timeout':0x14,'fiat':_0x18f7f0(0x104),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x18f7f0(0x1e4)],'onepagemode':settings[_0x18f7f0(0x25e)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x18f7f0(0x190),'marketcapApi':settings[_0x18f7f0(0x193)]?!![]:![],'marketcapEnabled':![],'sandbox':![],'portfolio':[],'autoliquidity':_0x18f7f0(0x141),'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x47a883;}function emittedConfiguration(){const _0x5f1cee=_0x3bd8cf;let _0x1ce524;if(config['apiKey']=='')_0x1ce524={...config,'configstate':_0x5f1cee(0xf5)};else config[_0x5f1cee(0x133)]=='***'?_0x1ce524={...config,'configstate':_0x5f1cee(0x29c)}:(_0x1ce524={...config,'apiKey':_0x5f1cee(0x107),'apiSecret':'************'},config[_0x5f1cee(0x1f5)]&&(_0x1ce524[_0x5f1cee(0x1f5)]=_0x5f1cee(0x107)));return _0x1ce524['enableFiatToggle']=enableFiatToggle,_0x1ce524;}function _0x1ca4(_0x5fb196,_0x36a5b9){const _0x38da5a=_0x2bc9();return _0x1ca4=function(_0x16936b,_0x2bf5cd){_0x16936b=_0x16936b-0xd7;let _0x2bc995=_0x38da5a[_0x16936b];return _0x2bc995;},_0x1ca4(_0x5fb196,_0x36a5b9);}function getSettings(){const _0x195d97=_0x3bd8cf;return dbSettings['get'](_0x195d97(0x1eb))[_0x195d97(0x155)]();}function getSecure(){const _0x5b77a3=_0x3bd8cf;return dbSecure[_0x5b77a3(0x1e6)]('secure')[_0x5b77a3(0x155)]()||{};}function updateTimeshift(_0x8818dd){const _0x64eca1=_0x3bd8cf;let _0x38d99b=dbConfig['get'](_0x64eca1(0x212))[_0x64eca1(0x144)]({'botID':botID})[_0x64eca1(0x155)]();_0x38d99b&&dbConfig[_0x64eca1(0x1e6)]('bot')[_0x64eca1(0x144)]({'botID':botID})[_0x64eca1(0xf0)]({'timeshift':_0x8818dd})[_0x64eca1(0x11c)](),config[_0x64eca1(0x1e4)]=_0x8818dd,proxyEmit(_0x64eca1(0x10e),emittedConfiguration());}function updateOnepagemode(_0xbf6212){const _0x1a2351=_0x3bd8cf;let _0x122284=dbConfig[_0x1a2351(0x1e6)](_0x1a2351(0x212))[_0x1a2351(0x144)]({'botID':botID})[_0x1a2351(0x155)]();_0x122284&&dbConfig[_0x1a2351(0x1e6)]('bot')['find']({'botID':botID})['assign']({'onepagemode':_0xbf6212})[_0x1a2351(0x11c)](),config['onepagemode']=_0xbf6212,proxyEmit(_0x1a2351(0x10e),emittedConfiguration());}function updateMarketcapApi(_0x54eb25){const _0x4cb65e=_0x3bd8cf,_0x5d40c5=_0x54eb25?!![]:![];let _0x48cf7c=dbConfig[_0x4cb65e(0x1e6)]('bot')[_0x4cb65e(0x144)]({'botID':botID})[_0x4cb65e(0x155)]();_0x48cf7c&&dbConfig[_0x4cb65e(0x1e6)](_0x4cb65e(0x212))[_0x4cb65e(0x144)]({'botID':botID})[_0x4cb65e(0xf0)]({'marketcapApi':_0x5d40c5})[_0x4cb65e(0x11c)](),config[_0x4cb65e(0x193)]=_0x5d40c5,getMarketCap(),proxyEmit('configuration',emittedConfiguration());}async function storeConfiguration(_0x2bbd02){const _0x1c25c3=_0x3bd8cf;logger[_0x1c25c3(0x135)](_0x1c25c3(0x13e));_0x2bbd02[_0x1c25c3(0x26f)]&&delete _0x2bbd02['configstate'];if(pidBalances)clearTimeout(pidBalances);setBlockTransactionDetection(!![]);let _0x4ea203=![],_0x2f3c27=![],_0xf5d289=[];_0x2bbd02[_0x1c25c3(0x285)][_0x1c25c3(0x169)](_0x261cf4=>{const _0x300518=_0x1c25c3;if(!_0x261cf4['excluded']&&_0x261cf4[_0x300518(0x189)]!=_0x2bbd02[_0x300518(0xe9)])_0xf5d289['push'](_0x261cf4[_0x300518(0x148)]);}),_0xf5d289[_0x1c25c3(0x169)](_0x2f9458=>{const _0x3baf7a=_0x1c25c3,_0x17f281=currentCoins[_0x3baf7a(0x144)](_0x4c6884=>_0x4c6884['symbol']==_0x2f9458);!_0x17f281&&(_0x4ea203=!![]);}),currentCoins['forEach'](_0xac7cfb=>{const _0x3f859b=_0x1c25c3;if(_0xac7cfb['coin']!=config['basecoin']){const _0x5578eb=_0xf5d289[_0x3f859b(0x144)](_0xba80ee=>_0xba80ee==_0xac7cfb[_0x3f859b(0x148)]);!_0x5578eb&&(_0x4ea203=!![]);}}),_0x2bbd02[_0x1c25c3(0x285)][_0x1c25c3(0x169)](_0x373dad=>{const _0x2627b7=_0x1c25c3,_0x3b8370=config[_0x2627b7(0x285)][_0x2627b7(0x144)](_0x32f3d4=>_0x32f3d4[_0x2627b7(0x189)]==_0x373dad[_0x2627b7(0x189)]);if(_0x3b8370&&_0x373dad[_0x2627b7(0x182)]!=_0x3b8370[_0x2627b7(0x182)])_0x2f3c27=!![];});let _0x1cf3cf=dbConfig[_0x1c25c3(0x1e6)](_0x1c25c3(0x212))[_0x1c25c3(0x144)]({'botID':botID})[_0x1c25c3(0x155)]();_0x2bbd02={..._0x2bbd02,'apiKey':decryptRSA(secure['privateKey'],_0x2bbd02['apiKey']),'apiSecret':decryptRSA(secure[_0x1c25c3(0x19e)],_0x2bbd02[_0x1c25c3(0x250)])};_0x2bbd02[_0x1c25c3(0x1f5)]&&(_0x2bbd02[_0x1c25c3(0x1f5)]=decryptRSA(secure[_0x1c25c3(0x19e)],_0x2bbd02[_0x1c25c3(0x1f5)]));let _0x55febe=![];if(_0x1cf3cf){_0x2bbd02[_0x1c25c3(0x133)]=='************'?_0x2bbd02[_0x1c25c3(0x133)]=config['apiKey']:_0x55febe=!![];_0x2bbd02[_0x1c25c3(0x250)]==_0x1c25c3(0x107)?_0x2bbd02['apiSecret']=config[_0x1c25c3(0x250)]:_0x55febe=!![];if(_0x2bbd02[_0x1c25c3(0x1f5)]==_0x1c25c3(0x107))_0x2bbd02[_0x1c25c3(0x1f5)]=config[_0x1c25c3(0x1f5)];else{if(_0x2bbd02[_0x1c25c3(0x1f5)])_0x55febe=!![];}dbConfig['get'](_0x1c25c3(0x212))[_0x1c25c3(0x144)]({'botID':botID})[_0x1c25c3(0xf0)](_0x2bbd02)[_0x1c25c3(0x11c)]();}else dbConfig[_0x1c25c3(0x1e6)](_0x1c25c3(0x212))[_0x1c25c3(0x1c3)](_0x2bbd02)[_0x1c25c3(0x11c)](),_0x55febe=!![],process[_0x1c25c3(0x245)]({'status':_0x1c25c3(0x222),'live':_0x1c25c3(0x263)},_0x41d7e9=>{});process['send']({'botname':_0x2bbd02[_0x1c25c3(0x103)]},_0x459f43=>{}),config={..._0x2bbd02},updateBotManager(),proxyEmit(_0x1c25c3(0x102)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x55febe)await reset(!![]);else _0x4ea203||_0x2f3c27?await reset(![]):getBalances();setBlockTransactionDetection(![]);}async function storeHeadless(_0x34c663){const _0x4c61c5=_0x3bd8cf,_0x1e3af7={...config,'headless':_0x34c663[_0x4c61c5(0x1d8)]};let _0x2fb48b=dbConfig['get'](_0x4c61c5(0x212))['find']({'botID':botID})[_0x4c61c5(0x155)]();_0x2fb48b&&dbConfig[_0x4c61c5(0x1e6)](_0x4c61c5(0x212))[_0x4c61c5(0x144)]({'botID':botID})[_0x4c61c5(0xf0)](_0x1e3af7)[_0x4c61c5(0x11c)](),config={..._0x1e3af7},updateBotManager(),proxyEmit(_0x4c61c5(0x10e),emittedConfiguration());}async function storeFiat(_0x575bf8){const _0x423427=_0x3bd8cf,_0x20dc79={...config,'fiat':_0x575bf8};let _0x18d67c=dbConfig[_0x423427(0x1e6)](_0x423427(0x212))['find']({'botID':botID})[_0x423427(0x155)]();_0x18d67c&&dbConfig[_0x423427(0x1e6)](_0x423427(0x212))['find']({'botID':botID})['assign'](_0x20dc79)[_0x423427(0x11c)](),config={..._0x20dc79},proxyEmit(_0x423427(0x10e),emittedConfiguration());}function resetHistory(){const _0x3cf0fd=_0x3bd8cf;logger[_0x3cf0fd(0x19c)]('Resetting\x20bot\x20history');try{if(fs[_0x3cf0fd(0x146)](path[_0x3cf0fd(0x15e)](configpath,_0x3cf0fd(0x210)+botID+_0x3cf0fd(0x2a8))))fs['unlinkSync'](path[_0x3cf0fd(0x15e)](configpath,_0x3cf0fd(0x210)+botID+'-events.json'));if(fs[_0x3cf0fd(0x146)](path[_0x3cf0fd(0x15e)](configpath,'bot-'+botID+_0x3cf0fd(0x12f))))fs['unlinkSync'](path[_0x3cf0fd(0x15e)](configpath,_0x3cf0fd(0x210)+botID+_0x3cf0fd(0x12f)));if(fs[_0x3cf0fd(0x146)](path[_0x3cf0fd(0x15e)](configpath,_0x3cf0fd(0x210)+botID+'-results.json')))fs[_0x3cf0fd(0x165)](path[_0x3cf0fd(0x15e)](configpath,_0x3cf0fd(0x210)+botID+'-results.json'));}catch(_0x12c4f2){if(_0x12c4f2)logger[_0x3cf0fd(0x19c)](_0x3cf0fd(0x17f),_0x12c4f2);}const _0x71dd66=getDate();let _0x4e4e95=[];currentCoins[_0x3cf0fd(0x169)](_0x32c4fb=>{const _0x5b94c0=_0x3cf0fd;_0x4e4e95[_0x5b94c0(0x1c3)]({'coin':_0x32c4fb['coin'],'number':_0x32c4fb[_0x5b94c0(0x197)],'price':_0x32c4fb['last']});});let _0x40ba1f=dbConfig['get'](_0x3cf0fd(0x212))[_0x3cf0fd(0x144)]({'botID':botID})[_0x3cf0fd(0x155)]();_0x40ba1f&&(dbConfig[_0x3cf0fd(0x1e6)](_0x3cf0fd(0x212))[_0x3cf0fd(0x144)]({'botID':botID})[_0x3cf0fd(0xf0)]({'liquidity':[{'date':_0x71dd66,'changes':_0x4e4e95}]})[_0x3cf0fd(0x11c)](),config['liquidity']=[]),restartBot(!![]);}function noslash(_0x414d70){const _0x39dd8f=_0x3bd8cf;return _0x414d70[_0x39dd8f(0x17b)]('/','');}function updateHighestFee(_0xade63b){const _0x131844=_0x3bd8cf;if(_0xade63b[_0x131844(0x1de)]){let _0x53f4b3={'filled':_0xade63b[_0x131844(0x19b)]*_0xade63b[_0x131844(0x28d)],'amount':_0xade63b['filled']*_0xade63b[_0x131844(0x28d)],'side':_0xade63b[_0x131844(0xfc)]=='sell'?_0x131844(0xe2):_0x131844(0x1c7),'price':0x1/_0xade63b['price']};_0xade63b={..._0xade63b,..._0x53f4b3};}const _0x3c409b=defaultFee*_0xade63b[_0x131844(0x19b)]*_0xade63b[_0x131844(0x28d)];lastFees[_0x131844(0xf7)][_0x131844(0xf4)]===0x14&&lastFees[_0x131844(0xf7)][_0x131844(0x130)](),lastFees[_0x131844(0xf7)][_0x131844(0x1c3)](_0x3c409b),lastFees[_0x131844(0x176)]=Math['max'](...lastFees[_0x131844(0xf7)]);}async function updateNumberCoinsCcxt(_0x2f54d8){const _0x3cf228=_0x3bd8cf;logger['debug']('0\x20-\x20EXECUTION:\x20'+_0x2f54d8[_0x3cf228(0x148)]+_0x3cf228(0x100)+_0x2f54d8[_0x3cf228(0x1f1)]+_0x3cf228(0x100)+_0x2f54d8[_0x3cf228(0x19b)]+_0x3cf228(0x173)+_0x2f54d8[_0x3cf228(0x1dd)]+_0x3cf228(0x100)+_0x2f54d8['id']);let _0x556a4c=_0x2f54d8['status'],_0x4b988a=![];currentCoins[_0x3cf228(0x169)](_0x2035ee=>{const _0x24b925=_0x3cf228;_0x2035ee[_0x24b925(0x148)]==_0x2f54d8[_0x24b925(0x148)]&&(_0x4b988a=!![]);});if(!_0x4b988a)return;const _0x1180a6=currentCoins['find'](_0x1ecc88=>_0x1ecc88[_0x3cf228(0x148)]==_0x2f54d8[_0x3cf228(0x148)]),_0x43a870=_0x1180a6[_0x3cf228(0x189)],_0x367212=_0x4ee0ed=>{const _0x220cc1=_0x3cf228,_0x2efe28=currentCoins['find'](_0x31ca07=>_0x31ca07[_0x220cc1(0x148)]==_0x2f54d8[_0x220cc1(0x148)]);if(_0x2efe28)_0x2efe28[_0x220cc1(0xda)]=_0x4ee0ed;};let _0x532460=![];for(const _0x3e48a8 of lastOrders){const _0x199a86=0x64,_0x2b3a09=0x1388;let _0x12bca2=0x0;while(!_0x3e48a8[_0x3cf228(0xe4)]&&_0x12bca2*_0x199a86<_0x2b3a09){_0x12bca2++,await sleep(_0x199a86);}if(_0x12bca2>0x0)logger[_0x3cf228(0x135)](_0x3cf228(0x239)+_0x12bca2*_0x199a86/0x3e8+_0x3cf228(0x26e));_0x3e48a8[_0x3cf228(0xe4)]==_0x2f54d8['id']&&(_0x532460=!![]);}if(_0x556a4c==_0x3cf228(0x28a)){_0x367212('open');if(_0x2f54d8[_0x3cf228(0x19b)]>0x0&&_0x2f54d8[_0x3cf228(0x19b)]<_0x2f54d8[_0x3cf228(0x1dd)]){if(_0x532460){setBlockTransactionDetection(!![]),logger['debug'](_0x3cf228(0x24b)+_0x2f54d8['filled']+_0x3cf228(0xea)+_0x2f54d8['id']);const _0x2fd26f=await getCoins(balanceUpdateDelay,undefined,undefined,_0x43a870);[currentCoins,currentCoinsAll]=_0x2fd26f,setBlockTransactionDetection(![]);}else logger['debug'](_0x3cf228(0x24b)+_0x2f54d8['filled']+_0x3cf228(0x1b4)+_0x2f54d8['id']),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay);}}else{if(_0x556a4c==_0x3cf228(0x128)){_0x367212('canceled'),lastOrders=lastOrders[_0x3cf228(0x244)](_0x16bc9f=>_0x16bc9f[_0x3cf228(0x148)]!=_0x2f54d8[_0x3cf228(0x148)]);const _0x4b81fa=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x4b81fa,setBlockTransactionDetection(![]),await getOpenOrders(),handleOpenOrders();}else{if(_0x556a4c=='closed'){if(lastOrders)for(const _0x35de93 of lastOrders){if(_0x35de93[_0x3cf228(0xe4)]==_0x2f54d8['id']){logger[_0x3cf228(0x135)](_0x3cf228(0x1a7)+_0x2f54d8['id']),_0x532460=!![];if(_0x35de93[_0x3cf228(0x19b)]==0x0){setBlockTransactionDetection(!![]),logger[_0x3cf228(0x135)](_0x3cf228(0x298)+_0x2f54d8['id']);if(_0x2f54d8[_0x3cf228(0xde)])_0x35de93[_0x3cf228(0x28d)]=_0x2f54d8['average'];else{if(_0x2f54d8['price'])_0x35de93['price']=_0x2f54d8[_0x3cf228(0x28d)];else{}}_0x35de93[_0x3cf228(0x19b)]=_0x2f54d8['filled'],updateHighestFee(_0x35de93);const _0x16703b=await getCoins(balanceUpdateDelay,undefined,undefined,_0x43a870);[currentCoins,currentCoinsAll]=_0x16703b,setBlockTransactionDetection(![]),await validateOrders(),_0x367212('filled'),_0x35de93[_0x3cf228(0x226)]={'currency':_0x2f54d8[_0x3cf228(0x226)]?_0x2f54d8[_0x3cf228(0x226)][_0x3cf228(0x1f0)]:null,'cost':_0x2f54d8[_0x3cf228(0x226)]?_0x2f54d8[_0x3cf228(0x226)]['cost']:0x0},await updatePnL(_0x35de93);}}}!_0x532460&&(logger['debug'](_0x3cf228(0x118)+_0x2f54d8['id']),_0x367212('filled'),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay),await updateOpenOrders(),handleOpenOrders());}}}if(lastBalances){let _0x149a76=JSON[_0x3cf228(0x175)](lastBalances['portfolio']);const _0x15b9c4=_0x149a76[_0x3cf228(0x144)](_0x5569de=>_0x5569de[_0x3cf228(0x148)]==_0x2f54d8[_0x3cf228(0x148)]);if(_0x15b9c4){if(_0x556a4c==_0x3cf228(0x28a))_0x15b9c4['orderstatus']=_0x15b9c4[_0x3cf228(0xda)]==_0x3cf228(0x19b)?_0x3cf228(0x19b):_0x3cf228(0x28a);else{if(_0x556a4c==_0x3cf228(0x128))_0x15b9c4[_0x3cf228(0xda)]=_0x15b9c4['orderstatus']=='filled'?'filled':_0x3cf228(0x128);else _0x556a4c==_0x3cf228(0xfe)&&(_0x15b9c4[_0x3cf228(0xda)]=_0x3cf228(0x19b));}}lastBalances={...lastBalances,'portfolio':JSON[_0x3cf228(0x18e)](_0x149a76)},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x411578=_0x3bd8cf;await getOpenOrders();let _0x40395b=![];currentCoins[_0x411578(0x169)](_0x5e4435=>{const _0x521cda=_0x411578;_0x40395b=allOpenOrders[_0x521cda(0x144)](_0x3ac68f=>_0x3ac68f[_0x521cda(0x148)]==_0x5e4435['symbol']),_0x5e4435[_0x521cda(0xda)]=_0x40395b?_0x521cda(0x28a):'none';});}async function fetchBalance(_0x1bf01f=!![]){const _0x2076b8=_0x3bd8cf;let _0x297ad6,_0x9c99b6;try{return _0x297ad6=await exchange[_0x2076b8(0x125)](),_0x9c99b6=_0x297ad6['total'],_0x9c99b6;}catch(_0x24c8f4){return!_0x1bf01f?handleErrorNoStop(_0x24c8f4,_0x2076b8(0x1f2)):await handleError(_0x24c8f4,_0x2076b8(0x1f2)),![];}}async function getCoins(_0x1389a5=0x0,_0x40a279=!![],_0x2f0462=config['basecoin'],_0x2b5c2b){const _0x35b7c5=_0x3bd8cf;let _0x27e2a7=[],_0x4d1a59=[],_0x45515e=[],_0x1cfcc9;if(_0x1389a5)await sleep(_0x1389a5);if(botPaused)return[currentCoins,currentCoinsAll];let _0x8e43e4=![],_0x430b11=0x0,_0x5836dc,_0x5c32e7;_0x2b5c2b&&(_0x5836dc=currentCoins[_0x35b7c5(0x144)](_0x50dab4=>_0x50dab4[_0x35b7c5(0x189)]==_0x2b5c2b),_0x5836dc&&(_0x5c32e7=_0x5836dc[_0x35b7c5(0x12a)],delete _0x5836dc[_0x35b7c5(0x12a)]));while(!_0x8e43e4){_0x1cfcc9=await fetchBalance(_0x40a279);if(_0x1cfcc9){if(_0x2b5c2b){if(_0x1cfcc9[_0x2b5c2b]!=_0x5c32e7)logger['debug'](_0x35b7c5(0x214)+_0x2b5c2b+':\x20'+_0x1cfcc9[_0x2b5c2b]+'\x20('+_0x5c32e7+')'),_0x8e43e4=!![];else{logger['debug'](_0x35b7c5(0x156)+_0x2b5c2b+':\x20'+_0x1cfcc9[_0x2b5c2b]+'\x20('+_0x5c32e7+')'),_0x430b11++;if(_0x430b11<balanceUpdateRetries)await sleep(balanceUpdateDelay);else{logger[_0x35b7c5(0x135)]('Stopped\x20fetching\x20balance\x20after\x20'+_0x430b11+_0x35b7c5(0x1da));break;}}}else break;}else return[currentCoins,currentCoinsAll];}for(const [_0x2e8e88,_0x2b96cb]of Object[_0x35b7c5(0x227)](_0x1cfcc9)){_0x45515e['push'](_0x2e8e88);}config[_0x35b7c5(0x285)][_0x35b7c5(0x169)](_0x22b881=>{const _0xcf2bb5=_0x35b7c5;!_0x45515e[_0xcf2bb5(0x160)](_0x22b881['coin'])&&(_0x1cfcc9[_0x22b881['coin']]=0x0);});if(_0x2f0462=='')for(const [_0x3c57ea,_0x428210]of Object['entries'](_0x1cfcc9)){_0x428210!=0x0&&_0x27e2a7[_0x35b7c5(0x1c3)]({'coin':_0x3c57ea});}else for(const [_0x5f20b6,_0x50cabb]of Object[_0x35b7c5(0x227)](_0x1cfcc9)){const _0x2a9705=config[_0x35b7c5(0x285)][_0x35b7c5(0x144)](_0x5c113c=>_0x5c113c[_0x35b7c5(0x189)]==_0x5f20b6),_0x35e916=_0x5f20b6+'/'+_0x2f0462,_0x20e936=_0x2f0462+'/'+_0x5f20b6,_0x467a88=currentCoins[_0x35b7c5(0x144)](_0x2e784e=>_0x2e784e[_0x35b7c5(0x189)]==_0x5f20b6);if((_0x50cabb!=0x0||_0x2a9705)&&(allSymbols[_0x35b7c5(0x160)](_0x35e916)||_0x5f20b6==_0x2f0462))_0x467a88?_0x27e2a7[_0x35b7c5(0x1c3)]({..._0x467a88,'number':Math[_0x35b7c5(0xdb)](_0x50cabb+(_0x2a9705&&_0x2a9705['offset']||0x0),0x0)}):_0x27e2a7[_0x35b7c5(0x1c3)]({'coin':_0x5f20b6,'symbol':_0x35e916,'reverse':![],'number':Math[_0x35b7c5(0xdb)](_0x50cabb+(_0x2a9705&&_0x2a9705[_0x35b7c5(0x182)]||0x0),0x0),'orderstatus':_0x35b7c5(0x1f8)});else{if((_0x50cabb!=0x0||_0x2a9705)&&allSymbols[_0x35b7c5(0x160)](_0x20e936))_0x467a88?_0x27e2a7[_0x35b7c5(0x1c3)]({..._0x467a88,'number':Math[_0x35b7c5(0xdb)](_0x50cabb+(_0x2a9705&&_0x2a9705[_0x35b7c5(0x182)]||0x0),0x0)}):_0x27e2a7[_0x35b7c5(0x1c3)]({'coin':_0x5f20b6,'symbol':_0x20e936,'reverse':!![],'number':Math['max'](_0x50cabb+(_0x2a9705&&_0x2a9705[_0x35b7c5(0x182)]||0x0),0x0),'orderstatus':_0x35b7c5(0x1f8)});else _0x2a9705&&_0x27e2a7[_0x35b7c5(0x1c3)]({'coin':_0x2a9705['coin'],'symbol':_0x2a9705[_0x35b7c5(0x148)],'reverse':_0x2a9705[_0x35b7c5(0x1de)],'number':0x0,'orderstatus':_0x35b7c5(0x1f8)});}}return _0x27e2a7[_0x35b7c5(0x247)]((_0x50fd58,_0x40a105)=>_0x50fd58[_0x35b7c5(0x1f9)]<_0x40a105['delta']?0x1:_0x40a105[_0x35b7c5(0x1f9)]<_0x50fd58[_0x35b7c5(0x1f9)]?-0x1:0x0),_0x4d1a59=cloneDeep(_0x27e2a7),_0x27e2a7=_0x27e2a7['filter'](_0x6e597d=>{const _0x3d5abd=_0x35b7c5,_0x10c496=config[_0x3d5abd(0x285)][_0x3d5abd(0x144)](_0x1be4bd=>_0x1be4bd[_0x3d5abd(0x189)]==_0x6e597d[_0x3d5abd(0x189)]);return _0x10c496&&!_0x10c496[_0x3d5abd(0x26c)];}),[_0x27e2a7,_0x4d1a59];}async function getOpenOrders(){const _0x58dc6a=_0x3bd8cf;let _0x22d5ea;allOpenOrders=[];try{for(const _0x2b2a47 of config['portfolio']){!_0x2b2a47[_0x58dc6a(0x26c)]&&_0x2b2a47['coin']!=config[_0x58dc6a(0xe9)]&&(_0x22d5ea=await exchange[_0x58dc6a(0x145)](_0x2b2a47[_0x58dc6a(0x148)]),_0x22d5ea[_0x58dc6a(0xf4)]>0x0&&allOpenOrders[_0x58dc6a(0x1c3)](_0x22d5ea[0x0]));}}catch(_0x5abce0){await handleError(_0x5abce0,_0x58dc6a(0x255));}}async function handleOpenOrders(_0x30ade1=0x0){const _0x3ac932=_0x3bd8cf;allOpenOrders[_0x3ac932(0xf4)]==0x0&&lockOrders==ORDERS[_0x3ac932(0x1ca)]&&allOrdersPlaced&&(_0x30ade1==0x0?(logger[_0x3ac932(0x135)]('1\x20-\x20Handle\x20open\x20orders'),_0x30ade1++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x3ac932(0x135)](_0x3ac932(0x286)),validateOrders(_0x3ac932(0x1ba))));}async function testAPI(){const _0x409852=_0x3bd8cf;try{return await exchange['fetchBalance'](),!![];}catch(_0x5f011c){return loading['cancel']=!![],_0x5f011c['toString']()['toLowerCase']()[_0x409852(0x160)](_0x409852(0x266))||_0x5f011c[_0x409852(0x1a0)]()[_0x409852(0x1b8)]()['includes'](_0x409852(0x20d))?(logHistory(_0x409852(0x14b),_0x409852(0x13a)),loading[_0x409852(0x14b)]=_0x409852(0x1a1)):(handleErrorNoStop(_0x5f011c,'testAPI()'),logger[_0x409852(0x135)]('Error\x20details:',_0x5f011c)),emitLoadingProgress(),botPaused=!![],![];}}async function testNewAPI(_0x4fd59d){const _0x505303=_0x3bd8cf;logger['debug'](_0x505303(0x299));const _0x4898c3=ccxt[_0x505303(0x177)][_0x4fd59d[_0x505303(0x21b)]['toLowerCase']()],_0xd22af2=new _0x4898c3({'apiKey':_0x4fd59d[_0x505303(0x133)],'secret':_0x4fd59d['apiSecret'],'options':{'defaultType':_0x505303(0x207)}});if(_0x4fd59d['apiPassword'])_0xd22af2[_0x505303(0x200)]=_0x4fd59d[_0x505303(0x1f5)];if(_0xd22af2[_0x505303(0x20b)][_0x505303(0x109)])_0xd22af2['setSandboxMode'](_0x4fd59d['sandbox']);try{await _0xd22af2[_0x505303(0x125)](),botPaused=![];}catch(_0x1a075e){logger[_0x505303(0x135)](_0x505303(0x1aa)+_0x1a075e[_0x505303(0x1a0)]());throw _0x1a075e;}}function cloneDeep(_0x5762e4){const _0x38b802=_0x3bd8cf;return JSON[_0x38b802(0x175)](JSON['stringify'](_0x5762e4));}async function getPortfolio(_0x527d09){const _0x4f3954=_0x3bd8cf;let _0xc0820e=[],_0x26dfee=[],_0x1bd3dd=[],_0x43d9dc;_0x527d09[_0x4f3954(0x133)]=decryptRSA(secure[_0x4f3954(0x19e)],_0x527d09[_0x4f3954(0x133)]),_0x527d09[_0x4f3954(0x250)]=decryptRSA(secure[_0x4f3954(0x19e)],_0x527d09[_0x4f3954(0x250)]);if(_0x527d09['apiPassword'])_0x527d09[_0x4f3954(0x1f5)]=decryptRSA(secure[_0x4f3954(0x19e)],_0x527d09['apiPassword']);if(_0x527d09['apiKey']!==_0x4f3954(0x107)||_0x527d09[_0x4f3954(0x250)]!==_0x4f3954(0x107)||_0x527d09['apiPassword']&&_0x527d09[_0x4f3954(0x1f5)]!==_0x4f3954(0x107)){if(config[_0x4f3954(0x21b)]){if(_0x527d09[_0x4f3954(0x133)]==_0x4f3954(0x107))_0x527d09[_0x4f3954(0x133)]=config['apiKey'];if(_0x527d09['apiSecret']==_0x4f3954(0x107))_0x527d09['apiSecret']=config[_0x4f3954(0x250)];if(_0x527d09[_0x4f3954(0x1f5)]=='************')_0x527d09[_0x4f3954(0x1f5)]=config[_0x4f3954(0x1f5)];}try{if(_0x527d09[_0x4f3954(0x16d)])await testNewAPI(_0x527d09);}catch(_0x391c19){if(_0x391c19[_0x4f3954(0x1a0)]()[_0x4f3954(0x160)](_0x4f3954(0x1af))){logHistory(_0x4f3954(0x14b),_0x4f3954(0x279)),logHistory(_0x4f3954(0x14b),'Error\x20details:\x20'+_0x391c19[_0x4f3954(0x1a0)]()),proxyEmit(_0x4f3954(0x114),![]);return;}else{if(_0x391c19[_0x4f3954(0x1a0)]()[_0x4f3954(0x160)]('PermissionDenied')){logHistory('error',_0x4f3954(0x20a)),logHistory(_0x4f3954(0x14b),_0x4f3954(0x1d4)+_0x391c19[_0x4f3954(0x1a0)]()),proxyEmit(_0x4f3954(0x114),![]);return;}else{logHistory(_0x4f3954(0x14b),_0x4f3954(0x21a)+_0x391c19[_0x4f3954(0x1a0)]()),logger[_0x4f3954(0x135)](_0x4f3954(0x217),_0x391c19),proxyEmit('portfolio1',![]);return;}}}exchange?updateExchange(_0x527d09[_0x4f3954(0x133)],_0x527d09[_0x4f3954(0x250)],_0x527d09[_0x4f3954(0x1f5)]):await initExchange(_0x527d09[_0x4f3954(0x21b)],_0x527d09[_0x4f3954(0x133)],_0x527d09['apiSecret'],_0x527d09[_0x4f3954(0x1f5)],_0x527d09[_0x4f3954(0x109)]);await loadSymbols();const _0x4693e8=await getCoins(0x0,![],_0x527d09['basecoin']);_0x1bd3dd=cloneDeep(_0x4693e8[0x1]);}else{const _0x338d80=await getCoins();_0x1bd3dd=cloneDeep(_0x338d80[0x1]);}if(_0x527d09[_0x4f3954(0xe9)]=='')proxyEmit('portfolio1',!![]),proxyEmit('portfolio2',_0x1bd3dd);else{_0x1bd3dd[_0x4f3954(0x169)](_0x987756=>{const _0x3fb68b=_0x4f3954;if(_0x987756[_0x3fb68b(0x189)]!=_0x527d09[_0x3fb68b(0xe9)]&&allSymbols[_0x3fb68b(0x160)](_0x987756[_0x3fb68b(0x148)]))_0xc0820e[_0x3fb68b(0x1c3)](_0x987756[_0x3fb68b(0x148)]);});if(_0xc0820e[_0x4f3954(0xf4)]==0x0)logHistory(_0x4f3954(0x14b),_0x4f3954(0x124));else{try{_0x26dfee=await getTickers(_0xc0820e);}catch(_0x527a82){logHistory(_0x4f3954(0x14b),_0x4f3954(0x1c2)),logger[_0x4f3954(0x135)](_0x4f3954(0x217),_0x527a82),proxyEmit(_0x4f3954(0x114),![]);return;}_0x1bd3dd[_0x4f3954(0x169)](_0x436aba=>{const _0x1be734=_0x4f3954;_0x436aba[_0x1be734(0x189)]!=_0x527d09[_0x1be734(0xe9)]?_0x26dfee[_0x436aba['symbol']]?_0x26dfee[_0x436aba[_0x1be734(0x148)]]['last']?_0x43d9dc=_0x436aba[_0x1be734(0x1de)]?0x1/_0x26dfee[_0x436aba[_0x1be734(0x148)]][_0x1be734(0x230)]:_0x26dfee[_0x436aba['symbol']][_0x1be734(0x230)]:_0x43d9dc=0x0:_0x43d9dc=0x0:_0x43d9dc=0x1,_0x436aba[_0x1be734(0x28d)]=formatResult(_0x43d9dc,0x8);}),await getMarketCap(_0x1bd3dd),proxyEmit(_0x4f3954(0x114),!![]),proxyEmit(_0x4f3954(0x292),_0x1bd3dd);}}}function truncateTradeAmount(_0x27fa31,_0x26ded3){const _0x3a1933=_0x3bd8cf;let _0x296bf3=0x0;try{_0x296bf3=exchange[_0x3a1933(0x268)](_0x27fa31,_0x26ded3);}catch(_0x8e0ff1){}return _0x296bf3;}function checkMinimums(_0x20c0d7){const _0x227969=_0x3bd8cf;let _0x56799f=!![];const _0x18e724=!_0x20c0d7[_0x227969(0x1de)]?markets[_0x20c0d7[_0x227969(0x148)]]['limits']['amount']['min']:markets[_0x20c0d7['symbol']][_0x227969(0x231)][_0x227969(0x29a)]['min'],_0x2a7642=!_0x20c0d7[_0x227969(0x1de)]?markets[_0x20c0d7[_0x227969(0x148)]][_0x227969(0x231)]['cost'][_0x227969(0x261)]:markets[_0x20c0d7['symbol']][_0x227969(0x231)]['amount']['min'],_0x3914de=truncateTradeAmount(_0x20c0d7['symbol'],_0x20c0d7[_0x227969(0x11a)]);_0x20c0d7['trade']=_0x3914de;if(Math[_0x227969(0x1e0)](_0x3914de)<_0x18e724)_0x56799f=![];if(Math[_0x227969(0x1e0)](_0x3914de)*_0x20c0d7[_0x227969(0x230)]<_0x2a7642)_0x56799f=![];if(_0x20c0d7[_0x227969(0xfc)]==_0x227969(0x1c7)){let _0x512982=config['portfolio'][_0x227969(0x144)](_0x4a47e0=>_0x4a47e0['coin']==_0x20c0d7[_0x227969(0x189)]);if(_0x512982[_0x227969(0x182)]>0x0){if(Math[_0x227969(0x1e0)](_0x3914de)>_0x20c0d7['number']-_0x512982[_0x227969(0x182)])_0x56799f=![];}else{if(Math[_0x227969(0x1e0)](_0x3914de)>_0x20c0d7[_0x227969(0x197)])_0x56799f=![];}}if(_0x20c0d7[_0x227969(0xfc)]==_0x227969(0xe2)){let _0xa39dcf=config[_0x227969(0x285)][_0x227969(0x144)](_0x368c58=>_0x368c58['coin']==config[_0x227969(0xe9)]),_0x1ea962=currentCoins[_0x227969(0x144)](_0x56a2b4=>_0x56a2b4['coin']==config[_0x227969(0xe9)]);if(_0xa39dcf['offset']>0x0){if(Math[_0x227969(0x1e0)](_0x3914de)*_0x20c0d7[_0x227969(0x230)]>_0x1ea962[_0x227969(0x197)]-_0xa39dcf['offset'])_0x56799f=![];}else{if(Math[_0x227969(0x1e0)](_0x3914de)*_0x20c0d7[_0x227969(0x230)]>_0x1ea962['number'])_0x56799f=![];}}return _0x56799f;}async function getBalances(_0x517551=!![]){const _0x1f079a=_0x3bd8cf;if(botPaused)return;let _0x1e1108=0x0,_0x95ef3b;const _0x3bdd85=config[_0x1f079a(0x21d)];if(config[_0x1f079a(0x1d8)]&&config['change24h']<0x0)await validate24hChanges();currentCoins['forEach'](_0x134629=>{const _0xb7af40=_0x1f079a;if(_0x134629[_0xb7af40(0x189)]!=config[_0xb7af40(0xe9)]){let _0x4781a6=gTicker[noslash(_0x134629[_0xb7af40(0x148)])];_0x95ef3b=_0x134629[_0xb7af40(0x1de)]?0x1/_0x4781a6:_0x4781a6;}else _0x95ef3b=0x1;let _0x54abe4=_0x134629[_0xb7af40(0x197)]*_0x95ef3b;_0x1e1108+=_0x54abe4,_0x134629[_0xb7af40(0x230)]=formatResult(Number(_0x95ef3b),0x8),_0x134629[_0xb7af40(0x155)]=_0x54abe4;}),currentCoins[_0x1f079a(0x169)](_0x1cb502=>{const _0x50627c=_0x1f079a;let _0x3920d9=config['portfolio'][_0x50627c(0x144)](_0x5f228d=>_0x5f228d['coin']==_0x1cb502[_0x50627c(0x189)]),_0x4aab8f=Number(_0x3920d9[_0x50627c(0x115)]),_0x2225a9=_0x1cb502[_0x50627c(0x155)]/_0x1e1108*0x64,_0x332acf=_0x4aab8f*_0x1e1108/0x64/_0x1cb502[_0x50627c(0x230)]-_0x1cb502[_0x50627c(0x197)];_0x1cb502[_0x50627c(0x115)]=formatResult(_0x2225a9,0x3),_0x1cb502['target']=formatResult(_0x4aab8f,0x3),_0x1cb502['trade']=formatResult(_0x332acf,0x8),_0x1cb502['side']='',_0x1cb502['valid']=![];if(_0x1cb502['coin']!=config[_0x50627c(0xe9)]){if(_0x1cb502['distribution']>_0x4aab8f)_0x1cb502[_0x50627c(0xfc)]=_0x50627c(0x1c7),_0x1cb502['valid']=checkMinimums(_0x1cb502);else _0x1cb502['distribution']<_0x4aab8f&&(_0x1cb502['side']='buy',_0x1cb502[_0x50627c(0x277)]=checkMinimums(_0x1cb502));}_0x1cb502['delta']=_0x1cb502[_0x50627c(0x115)]/_0x1cb502[_0x50627c(0x211)]-0x1;if(_0x1cb502[_0x50627c(0xda)]=='filled'||_0x1cb502[_0x50627c(0xda)]=='canceled')_0x1cb502[_0x50627c(0xda)]=_0x50627c(0x1f8);}),currentCoins[_0x1f079a(0x247)]((_0x2a5445,_0x1b5e6c)=>_0x2a5445[_0x1f079a(0x1f9)]<_0x1b5e6c[_0x1f079a(0x1f9)]?0x1:_0x1b5e6c[_0x1f079a(0x1f9)]<_0x2a5445[_0x1f079a(0x1f9)]?-0x1:0x0);const _0x182d16=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x182d16[_0x1f079a(0x15c)],'usd':_0x182d16[_0x1f079a(0x256)],'portfolio':JSON[_0x1f079a(0x18e)](currentCoins),'threshold':_0x3bdd85},proxyEmit(_0x1f079a(0x131),{'serverversion':serverversion,'balances':lastBalances});if(_0x517551){if(config['headless'])headlessMode({'portfolio':currentCoins,'threshold':_0x3bdd85});else lockOrders==ORDERS[_0x1f079a(0x184)]&&!coolingDown&&notifyBalance({'portfolio':currentCoins,'threshold':_0x3bdd85});}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x23bf4d=getNormalizedPerformance();getStartingBalances(_0x23bf4d),emitPerformance(_0x23bf4d);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}function getPnL(){const _0x2758cf=_0x3bd8cf;let _0x12d748=dbCoinResults['get'](_0x2758cf(0x117))[_0x2758cf(0x155)](),_0xf11a68=0x0;return Object[_0x2758cf(0x227)](_0x12d748)[_0x2758cf(0x169)](([_0x2a678a,_0x2b1f61])=>{const _0x2ac032=_0x2758cf;_0xf11a68+=_0x2b1f61[_0x2ac032(0x251)];}),_0xf11a68;}async function storePerformance(){const _0x9c2799=_0x3bd8cf;if(!lastBalances)return;let _0x405874=[],_0x5f1f5d;const _0xcfb4e8=getPnL();let _0x341ff1=JSON[_0x9c2799(0x175)](lastBalances[_0x9c2799(0x285)]);_0x341ff1['sort']((_0x289762,_0x4934cb)=>_0x289762[_0x9c2799(0x189)]>_0x4934cb[_0x9c2799(0x189)]?0x1:_0x4934cb[_0x9c2799(0x189)]>_0x289762[_0x9c2799(0x189)]?-0x1:0x0),_0x341ff1[_0x9c2799(0x169)](_0x963ff9=>{const _0x32162e=_0x9c2799;let _0x492a94={'coin':_0x963ff9[_0x32162e(0x189)],'number':_0x963ff9[_0x32162e(0x197)],'price':_0x963ff9[_0x32162e(0x230)]};_0x405874[_0x32162e(0x1c3)](_0x492a94);});const _0x1a265b=await getFiat(),_0x278af1=getTimeStamp()[_0x9c2799(0x19d)]('\x20')[0x0],_0x4b41a5=dbPerformance[_0x9c2799(0x1e6)](_0x9c2799(0x26b))[_0x9c2799(0x144)]({'date':_0x278af1})[_0x9c2799(0x155)]();_0x5f1f5d={'date':_0x278af1,'eur':_0x1a265b[_0x9c2799(0x15c)],'usd':_0x1a265b['usd'],'coins':_0x405874,'pnl':_0xcfb4e8},_0x4b41a5?_0x5f1f5d[_0x9c2799(0x1e5)]!=config[_0x9c2799(0x25a)]&&dbPerformance[_0x9c2799(0x1e6)](_0x9c2799(0x26b))[_0x9c2799(0x144)]({'date':_0x278af1})[_0x9c2799(0xf0)](_0x5f1f5d)[_0x9c2799(0x11c)]():dbPerformance['get'](_0x9c2799(0x26b))[_0x9c2799(0x1c3)](_0x5f1f5d)[_0x9c2799(0x11c)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x5a10c5=_0x3bd8cf;let _0x391f30=[];if(dbPerformance[_0x5a10c5(0x20b)](_0x5a10c5(0x26b))[_0x5a10c5(0x155)]()){let _0x3d2a11=dbPerformance[_0x5a10c5(0x1e6)](_0x5a10c5(0x26b))[_0x5a10c5(0xf9)]()[_0x5a10c5(0x244)](_0x586d5f=>{const _0x5748c5=_0x5a10c5;if(_0x586d5f[_0x5748c5(0x117)][_0x5748c5(0xf4)]==0x0)return![];else return!![];})['sortBy'](_0x5a10c5(0x1e5))[_0x5a10c5(0x155)](),_0x3048da=[...config[_0x5a10c5(0x25f)]];_0x3048da[_0x5a10c5(0x247)]((_0x378b35,_0x47642e)=>_0x378b35[_0x5a10c5(0x1e5)]>_0x47642e[_0x5a10c5(0x1e5)]?-0x1:_0x47642e[_0x5a10c5(0x1e5)]>_0x378b35[_0x5a10c5(0x1e5)]?0x1:0x0);let _0x3f5338=0x1,_0x126313=[],_0x26e310=0x0;_0x3d2a11[_0x5a10c5(0x26a)]()['reverse']()[_0x5a10c5(0x169)]((_0x302edd,_0x588858)=>{const _0x13a09f=_0x5a10c5;if(_0x3048da[_0x26e310]){if(_0x3d2a11[_0x3d2a11[_0x13a09f(0xf4)]-_0x588858]&&_0x3048da[_0x26e310][_0x13a09f(0x1e5)]==_0x3d2a11[_0x3d2a11[_0x13a09f(0xf4)]-_0x588858][_0x13a09f(0x1e5)]){if(_0x588858<_0x3d2a11['length']){let _0x432b10=0x0,_0x2e8017=0x0;_0x3d2a11[_0x3d2a11[_0x13a09f(0xf4)]-_0x588858]['coins'][_0x13a09f(0x169)](_0x303915=>{const _0x558f00=_0x13a09f;_0x2e8017+=_0x303915[_0x558f00(0x197)]*_0x303915[_0x558f00(0x28d)];}),_0x3048da[_0x26e310]['changes'][_0x13a09f(0x169)](_0x1e911b=>{const _0x321eeb=_0x13a09f;_0x432b10+=_0x1e911b['number']*_0x1e911b[_0x321eeb(0x28d)];}),_0x3f5338*=_0x432b10/(_0x2e8017-_0x432b10)+0x1;}_0x26e310++;}}let _0x579cc7=0x0;_0x302edd[_0x13a09f(0x117)][_0x13a09f(0x169)](_0x1e8af7=>{const _0x336cb8=_0x13a09f;_0x579cc7+=_0x1e8af7[_0x336cb8(0x197)]*_0x1e8af7[_0x336cb8(0x28d)];}),_0x126313[_0x3d2a11[_0x13a09f(0xf4)]-_0x588858-0x1]=_0x579cc7*(_0x3f5338-0x1);});let _0x27b766=[];_0x3048da=[...config['liquidity']]||[];let _0x173f8f=0x0;_0x26e310=0x0,_0x3d2a11[_0x5a10c5(0x169)]((_0x4388ce,_0x136c80)=>{const _0x32f149=_0x5a10c5;if(_0x3048da[_0x26e310]){const _0x15eb9f=fns[_0x32f149(0x175)](_0x3048da[_0x26e310][_0x32f149(0x1e5)],_0x32f149(0x172),new Date()),_0x173a54=fns[_0x32f149(0x175)](_0x4388ce[_0x32f149(0x1e5)],_0x32f149(0x172),new Date());if(fns[_0x32f149(0x143)](_0x15eb9f,_0x173a54)){let _0x3cf62=0x0;_0x3048da[_0x26e310]['changes']['forEach'](_0x4d7987=>{const _0xa98023=_0x32f149;!_0x27b766[_0x4d7987[_0xa98023(0x189)]]?_0x27b766[_0x4d7987[_0xa98023(0x189)]]=_0x4d7987[_0xa98023(0x197)]:(_0x3cf62=_0x27b766[_0x4d7987[_0xa98023(0x189)]],_0x27b766[_0x4d7987[_0xa98023(0x189)]]+=_0x4d7987[_0xa98023(0x197)]);const _0x20cb52=_0x4388ce['coins'][_0xa98023(0x144)](_0x31ab7b=>_0x31ab7b[_0xa98023(0x189)]==_0x4d7987[_0xa98023(0x189)]);(!_0x20cb52||_0x20cb52[_0xa98023(0x197)]==0x0)&&(_0x173f8f+=(-_0x4d7987['number']-_0x3cf62)*_0x4d7987[_0xa98023(0x28d)]);}),_0x26e310++;}}_0x4388ce[_0x32f149(0x117)][_0x32f149(0x169)]((_0x27c4a0,_0xa49bf9)=>{const _0xdea27a=_0x32f149;_0x27b766[_0x27c4a0[_0xdea27a(0x189)]]&&(_0x27c4a0['initial']=_0x27b766[_0x27c4a0[_0xdea27a(0x189)]]);}),_0x391f30['push']({'date':_0x4388ce[_0x32f149(0x1e5)],'eur':_0x4388ce[_0x32f149(0x15c)],'usd':_0x4388ce['usd'],'offset':_0x126313[_0x136c80],'netoffset':_0x173f8f,'coins':_0x4388ce[_0x32f149(0x117)],'pnl':_0x4388ce[_0x32f149(0x238)]});});}return _0x391f30;}function emitPerformance(_0x106ae5){const _0xeccea1=_0x3bd8cf;_0x106ae5[_0xeccea1(0xf4)]!==0x0?(proxyEmit(_0xeccea1(0x1fe),_0x106ae5),lastPerformanceEmitted=getDate()):proxyEmit('performance',[]);}function getPerf(_0x10dd51,_0x53124a){const _0x2b2090=_0x3bd8cf;let _0x3bc003=0x0,_0x5ebfa8=0x0,_0x217063=0x0;_0x10dd51[_0x2b2090(0x117)][_0x2b2090(0x169)](_0xe98486=>{const _0x5d8c8d=_0x2b2090;_0x3bc003+=_0xe98486['number']*_0xe98486[_0x5d8c8d(0x28d)];});_0x53124a&&(_0x3bc003+=_0x10dd51['offset']);if(config[_0x2b2090(0xe9)]==='BTC'||config[_0x2b2090(0xe9)]===_0x2b2090(0x191)||config[_0x2b2090(0xe9)]===_0x2b2090(0x147))_0x5ebfa8=_0x3bc003*_0x10dd51[_0x2b2090(0x15c)],_0x217063=_0x3bc003*_0x10dd51[_0x2b2090(0x256)];else{if(usdBasecoins[_0x2b2090(0x160)](config[_0x2b2090(0xe9)]))_0x5ebfa8=_0x3bc003*_0x10dd51['eur']/_0x10dd51['usd'],_0x217063=_0x3bc003;else config['basecoin']===_0x2b2090(0x149)&&(_0x5ebfa8=_0x3bc003,_0x217063=_0x3bc003*_0x10dd51['usd']/_0x10dd51[_0x2b2090(0x15c)]);}return[_0x3bc003,_0x5ebfa8,_0x217063];}function CurrencyFactor(_0x5abddd,_0xe1f78a,_0x5099bc){const _0x3f4d55=_0x3bd8cf;let _0x2d68a9;if(_0xe1f78a===_0x3f4d55(0x16a)||_0xe1f78a===_0x3f4d55(0x191)||_0xe1f78a===_0x3f4d55(0x147))_0x2d68a9=_0x5099bc===_0x3f4d55(0x149)?_0x5abddd['eur']:_0x5abddd[_0x3f4d55(0x256)];else{if(usdBasecoins['includes'](_0xe1f78a))_0x2d68a9=_0x5099bc===_0x3f4d55(0x149)?_0x5abddd['eur']/_0x5abddd[_0x3f4d55(0x256)]:0x1;else _0xe1f78a==='EUR'&&(_0x2d68a9=_0x5099bc==='EUR'?0x1:_0x5abddd[_0x3f4d55(0x256)]/_0x5abddd[_0x3f4d55(0x15c)]);}return _0x2d68a9;}function getKPIs(_0x55aa67,_0x17eee9=_0x3bd8cf(0x149)){const _0x2c3cf7=_0x3bd8cf,_0xeea47=config[_0x2c3cf7(0xe9)],_0x2708f5=lastBalances,_0x489111=currentCoins,_0x3c38c3=getNormalizedPerformance(),_0x31fec7=CurrencyFactor(_0x2708f5,config['basecoin'],_0x17eee9);let _0x30835f=0x0;_0x489111['forEach'](_0x446e77=>{const _0x114a2c=_0x2c3cf7;_0x30835f+=_0x446e77['number']*_0x446e77[_0x114a2c(0x230)];});_0x55aa67[_0x2c3cf7(0x160)](_0x2c3cf7(0x234))&&(_0x30835f*=_0x31fec7);let _0x10a165;if(_0x30835f!==0x0){if(_0x55aa67===_0x2c3cf7(0xe9)||_0x55aa67===_0x2c3cf7(0x234)){if(_0x55aa67===_0x2c3cf7(0xe9))_0x10a165=(_0x30835f/startingBalances[_0x2c3cf7(0xe9)]-0x1)*0x64;else{if(_0x17eee9==='EUR')_0x10a165=(_0x30835f/startingBalances[_0x2c3cf7(0x15c)]-0x1)*0x64;else _0x10a165=(_0x30835f/startingBalances[_0x2c3cf7(0x256)]-0x1)*0x64;}}if(_0x55aa67['includes'](_0x2c3cf7(0x1b1))){let _0x2d021f=0x0;if(startingBalances[_0x2c3cf7(0x117)])_0x489111[_0x2c3cf7(0x169)](_0x9adef=>{const _0x248037=_0x2c3cf7;let _0x5bfbe1=startingBalances[_0x248037(0x117)][_0x248037(0x144)](_0x5c5fce=>_0x5c5fce[_0x248037(0x189)]===_0x9adef[_0x248037(0x189)]);if(_0x5bfbe1&&_0x5bfbe1[_0x248037(0x189)]&&_0x9adef['number']!==0x0)_0x2d021f+=_0x5bfbe1[_0x248037(0x197)]*_0x9adef[_0x248037(0x230)];});let _0x3e0913=0x0;if(_0x3c38c3[_0x2c3cf7(0xf4)]!==0x0){let _0x4c85d9=_0x3c38c3[_0x3c38c3['length']-0x1];_0x3e0913=_0x4c85d9[_0x2c3cf7(0x294)];}_0x2d021f-=_0x3e0913;let _0x146565;_0x55aa67===_0x2c3cf7(0xef)&&(_0x146565=startingBalances[_0x2c3cf7(0xe9)]),_0x55aa67===_0x2c3cf7(0x22b)&&(_0x146565=_0x17eee9===_0x2c3cf7(0x149)?startingBalances['eur']:startingBalances[_0x2c3cf7(0x256)],_0x2d021f*=_0x31fec7),_0x10a165=(_0x30835f-_0x2d021f)/_0x146565*0x64,_0x30835f=_0x30835f-_0x2d021f;}if(_0x55aa67['includes'](_0x2c3cf7(0x238))){if(_0x3c38c3[_0x2c3cf7(0xf4)]!==0x0&&_0x489111[_0x2c3cf7(0xf4)]!==0x0){let _0x156e4d,_0x4af46a=_0x3c38c3[_0x3c38c3[_0x2c3cf7(0xf4)]-0x1][_0x2c3cf7(0x238)];_0x55aa67[_0x2c3cf7(0x160)]('fiat')?(_0x156e4d=_0x17eee9===_0x2c3cf7(0x149)?startingBalances[_0x2c3cf7(0x15c)]:startingBalances[_0x2c3cf7(0x256)],_0x4af46a*=CurrencyFactor(_0x2708f5,_0xeea47,_0x17eee9)):_0x156e4d=startingBalances[_0x2c3cf7(0xe9)],_0x10a165=_0x4af46a/_0x156e4d*0x64,_0x30835f=_0x4af46a;}}if(_0x10a165){if(_0x10a165<0x64)_0x10a165=_0x10a165['toFixed'](0x2);else{if(_0x10a165<0x3e8)_0x10a165=_0x10a165[_0x2c3cf7(0x1c0)](0x1);else _0x10a165=_0x10a165[_0x2c3cf7(0x1c0)](0x0);}}else _0x10a165=Number('0')[_0x2c3cf7(0x1c0)](0x2);if(_0x30835f){if(Math[_0x2c3cf7(0x1e0)](_0x30835f)<0.000001)_0x30835f=_0x30835f[_0x2c3cf7(0x1c0)](0x2);else{if(Math[_0x2c3cf7(0x1e0)](_0x30835f)<0.1)_0x30835f=_0x30835f[_0x2c3cf7(0x1c0)](0x6);else{if(Math[_0x2c3cf7(0x1e0)](_0x30835f)<0x1)_0x30835f=_0x30835f[_0x2c3cf7(0x1c0)](0x5);else{if(Math[_0x2c3cf7(0x1e0)](_0x30835f)<0xa)_0x30835f=_0x30835f[_0x2c3cf7(0x1c0)](0x4);else{if(Math[_0x2c3cf7(0x1e0)](_0x30835f)<0x64)_0x30835f=_0x30835f[_0x2c3cf7(0x1c0)](0x3);else{if(Math[_0x2c3cf7(0x1e0)](_0x30835f)<0x3e8)_0x30835f=_0x30835f[_0x2c3cf7(0x1c0)](0x2);else _0x30835f=_0x30835f[_0x2c3cf7(0x1c0)](0x2);}}}}}}else _0x30835f=Number('0')[_0x2c3cf7(0x1c0)](0x2);}else _0x10a165=Number('0')[_0x2c3cf7(0x1c0)](0x2);if(_0x10a165>=0x0)_0x10a165='+'+_0x10a165;return{'value':_0x30835f,'change':_0x10a165};}async function getStartingBalances(_0x34a196,_0x1035c3=!![]){const _0x158c56=_0x3bd8cf;if(_0x34a196[_0x158c56(0xf4)]!==0x0){const [_0x55ee30,_0x445fd4,_0x10e37b]=getPerf(_0x34a196[0x0],!![]);let _0x7c273e=[];config['portfolio'][_0x158c56(0x169)](_0xef1c9e=>{const _0x546f5f=_0x158c56;let _0x221ce6=0x0,_0x96844e;config[_0x546f5f(0x25f)][_0x546f5f(0x169)](_0x5fb588=>{const _0xec24aa=_0x546f5f;let _0x445d72=_0x5fb588[_0xec24aa(0x1fb)][_0xec24aa(0x144)](_0x57b60c=>_0x57b60c[_0xec24aa(0x189)]==_0xef1c9e[_0xec24aa(0x189)]);if(_0x445d72){_0x221ce6+=_0x445d72[_0xec24aa(0x197)];if(!_0x96844e)_0x96844e=_0x445d72[_0xec24aa(0x28d)];}}),_0x7c273e[_0x546f5f(0x1c3)]({'coin':_0xef1c9e['coin'],'number':_0x221ce6,'initialprice':_0x96844e});});const _0x51e066={'basecoin':_0x55ee30,'eur':_0x445fd4,'usd':_0x10e37b,'coins':_0x7c273e};if(_0x1035c3)proxyEmit('starting-balances',_0x51e066);startingBalances=_0x51e066;}}function headlessMode(_0x1cb46a){const _0x485ee0=_0x3bd8cf;let _0x426f0f=_0x1cb46a[_0x485ee0(0x285)],_0x193f2e=_0x1cb46a[_0x485ee0(0x21d)],_0x249796=[];for(let _0x2e45eb of _0x426f0f){if(_0x2e45eb[_0x485ee0(0x189)]!=config[_0x485ee0(0xe9)]){if(_0x2e45eb['delta']>=_0x193f2e/0x64){if(_0x2e45eb[_0x485ee0(0x277)])_0x249796['push'](_0x2e45eb);}else{if(_0x2e45eb[_0x485ee0(0x1f9)]<=-_0x193f2e/0x64){if(_0x2e45eb[_0x485ee0(0x277)])_0x249796[_0x485ee0(0x1c3)](_0x2e45eb);}}}}_0x249796['length']>0x0&&placeOrder(_0x249796);}function notifyBalance(_0x17a553){const _0x5cb5b8=_0x3bd8cf;let _0x356e1e=_0x17a553[_0x5cb5b8(0x285)],_0x3d7b0c=_0x17a553[_0x5cb5b8(0x21d)],_0x5d0da8=[];for(let _0x41ec8b of _0x356e1e){if(_0x41ec8b['coin']!=config['basecoin']){if(_0x41ec8b['delta']>=_0x3d7b0c/0x64){if(_0x41ec8b[_0x5cb5b8(0x277)])_0x5d0da8[_0x5cb5b8(0x1c3)](_0x41ec8b);}else{if(_0x41ec8b[_0x5cb5b8(0x1f9)]<=-_0x3d7b0c/0x64){if(_0x41ec8b[_0x5cb5b8(0x277)])_0x5d0da8[_0x5cb5b8(0x1c3)](_0x41ec8b);}}}}if(_0x5d0da8[_0x5cb5b8(0xf4)]>0x0){let _0xe5922a=_0x5d0da8[_0x5cb5b8(0x180)](_0x39051b=>_0x39051b['coin']);_0xe5922a['sort']();let _0x40477b=_0xe5922a[_0x5cb5b8(0x15e)](',\x20');if(!lastCoinsToBalance)logHistory('warning',_0x5cb5b8(0x1b0));lastCoinsToBalance=_0x40477b;}}function symbolToCoin(_0x11d5d0){const _0xf0f7df=_0x3bd8cf;let _0x32ab48;if(_0x11d5d0['includes']('/'+config[_0xf0f7df(0xe9)]))_0x32ab48=_0x11d5d0['replace']('/'+config['basecoin'],'');if(_0x11d5d0['includes'](config[_0xf0f7df(0xe9)]+'/'))_0x32ab48=_0x11d5d0[_0xf0f7df(0x17b)](config[_0xf0f7df(0xe9)]+'/','');return _0x32ab48;}function setLockOrders(_0x3f6f99){const _0x4034f5=_0x3bd8cf;lockOrders=_0x3f6f99,logger[_0x4034f5(0x135)](_0x4034f5(0x282)+Object[_0x4034f5(0x1ed)](ORDERS)[lockOrders]);}async function unlockOrders(_0x4d22eb=![]){const _0x326531=_0x3bd8cf;if(allOrdersPlaced&&lockOrders==ORDERS[_0x326531(0x1ca)]){setLockOrders(ORDERS[_0x326531(0x1a8)]);if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);if(_0x4d22eb){const _0x3064b5=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x3064b5,setBlockTransactionDetection(![]);}validateOrdersState='initial',persistOpenOrders([]),setLockOrders(ORDERS[_0x326531(0x184)]);}}async function validateOrders(_0x44dfdd){const _0x3d835c=_0x3bd8cf;if(_0x44dfdd)validateOrdersState=_0x44dfdd;logger[_0x3d835c(0x135)]('1\x20-\x20Validate\x20orders:\x20'+validateOrdersState+_0x3d835c(0x1e1)+Object[_0x3d835c(0x1ed)](ORDERS)[lockOrders]);let _0x30ef2b=[],_0x2d0be4=config[_0x3d835c(0x1cb)]=='market'?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x3d835c(0x258)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x3d835c(0x1ca)])return;logger['debug'](_0x3d835c(0xe1)+validateOrdersState);for(let _0x5ccf0c=lastOrders[_0x3d835c(0xf4)]-0x1;_0x5ccf0c>=0x0;_0x5ccf0c--){let _0x4072f5=lastOrders[_0x5ccf0c],_0x283901=![];_0x4072f5[_0x3d835c(0x19b)]>0x0&&(_0x283901=!![]),_0x30ef2b['push'](_0x283901),_0x283901&&config[_0x3d835c(0x1cb)]!=_0x3d835c(0x13b)&&logHistory('order',_0x3d835c(0x1a4)+_0x4072f5[_0x3d835c(0x148)]+'\x20'+_0x4072f5[_0x3d835c(0xfc)]+'\x20#'+formatResult(_0x4072f5[_0x3d835c(0x19b)],0x8)+'\x20@'+formatResult(_0x4072f5['price'],0x8)),_0x283901&&lastOrders[_0x3d835c(0x10f)](_0x5ccf0c,0x1);}persistOpenOrders(lastOrders);const _0xff500f=coolingDown?'balancing\x20resumes\x20when\x20cooldown\x20ends':_0x3d835c(0xfd);if(validateOrdersState==_0x3d835c(0xf5)){validateOrdersState=_0x3d835c(0x1f4);if(_0x30ef2b[_0x3d835c(0x160)](![])){}else await unlockOrders();}else{if(validateOrdersState==_0x3d835c(0x1f4)){if(_0x30ef2b['includes'](![])){}else await unlockOrders();}else{if(validateOrdersState==_0x3d835c(0x1bc))_0x30ef2b[_0x3d835c(0x160)](![])&&(config['ordertype']==_0x3d835c(0x13b)?logHistory(_0x3d835c(0x281),_0x3d835c(0x166)+Math[_0x3d835c(0x171)](_0x2d0be4*validateOrderInterval/0xea60)+_0x3d835c(0x19f)+_0xff500f):(await cancelOrders(),logHistory(_0x3d835c(0x281),_0x3d835c(0x16f)+Math['round'](_0x2d0be4*validateOrderInterval/0xea60)+_0x3d835c(0x19f)+_0xff500f))),await unlockOrders(!![]);else{if(validateOrdersState==_0x3d835c(0x1ba)){if(config['ordertype']!='market')logHistory(_0x3d835c(0x281),_0x3d835c(0x25d)+_0xff500f);await unlockOrders(!![]);}}}}}async function cancelOrders(){const _0x22439a=_0x3bd8cf;lastOrders[_0x22439a(0x169)](async _0x19fa72=>{const _0x131f2b=_0x22439a;try{const _0x53a9ef=await exchange[_0x131f2b(0x20e)](_0x19fa72[_0x131f2b(0xe4)],_0x19fa72['symbol']);}catch(_0x323112){if(_0x323112[_0x131f2b(0x1a0)]()[_0x131f2b(0x160)](_0x131f2b(0x232))){}else await handleError(_0x323112,_0x131f2b(0x205));}});}async function initCoinResults(_0x199bfe){const _0x17cd41=_0x3bd8cf;_0x199bfe?logger[_0x17cd41(0x135)](_0x17cd41(0x1b2)+_0x199bfe):logger[_0x17cd41(0x135)](_0x17cd41(0x11e)),config[_0x17cd41(0x285)][_0x17cd41(0x169)](_0x40c15b=>{const _0x27fabf=_0x17cd41;if(!_0x40c15b['excluded']&&_0x40c15b[_0x27fabf(0x189)]!=config[_0x27fabf(0xe9)]){const _0x5c3700=currentCoins[_0x27fabf(0x144)](_0x28ea81=>_0x28ea81[_0x27fabf(0x189)]==_0x40c15b[_0x27fabf(0x189)]),_0x46b821=gTicker[noslash(_0x40c15b[_0x27fabf(0x148)])];let _0x99efbe=_0x5c3700?_0x5c3700[_0x27fabf(0x197)]:null,_0x40dfb0=_0x40c15b['reverse']?0x1/_0x46b821:_0x46b821,_0x4d5c70;config[_0x27fabf(0x25f)][_0x27fabf(0x169)](_0x128e30=>{const _0x515091=_0x27fabf;!_0x4d5c70&&(_0x4d5c70=_0x128e30[_0x515091(0x1fb)][_0x515091(0x144)](_0x53b99e=>_0x53b99e[_0x515091(0x189)]==_0x40c15b[_0x515091(0x189)]),_0x4d5c70&&(_0x99efbe=_0x4d5c70[_0x515091(0x197)],_0x40dfb0=_0x4d5c70[_0x515091(0x28d)]));});let _0x3f2319=dbCoinResults[_0x27fabf(0x1e6)]('coins')[_0x27fabf(0x144)]({'coin':_0x40c15b[_0x27fabf(0x189)]})[_0x27fabf(0x155)]();if(!_0x3f2319){const _0x341691={'coin':_0x40c15b[_0x27fabf(0x189)],'number':_0x99efbe,'breakeven':_0x40dfb0,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x27fabf(0x1e6)](_0x27fabf(0x117))['push'](_0x341691)[_0x27fabf(0x11c)]();}else{if(_0x199bfe&&_0x40c15b[_0x27fabf(0x189)]==_0x199bfe){const _0x4f4a15={'coin':_0x40c15b[_0x27fabf(0x189)],'number':_0x99efbe,'breakeven':_0x40dfb0,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x27fabf(0x1e6)](_0x27fabf(0x117))[_0x27fabf(0x144)]({'coin':_0x40c15b['coin']})[_0x27fabf(0xf0)](_0x4f4a15)[_0x27fabf(0x11c)]();}}}});}async function placeOrder(_0x2116d3){const _0x3a38f3=_0x3bd8cf,_0x5811a0=config[_0x3a38f3(0x1cb)]==_0x3a38f3(0x13b)?'market':_0x3a38f3(0x188);if(lockOrders==ORDERS[_0x3a38f3(0x184)]&&!coolingDown){setLockOrders(ORDERS[_0x3a38f3(0x1ca)]);while(transactionDetectionOngoing){await sleep(0x64);}logger['debug'](_0x3a38f3(0x28e)+_0x2116d3[_0x3a38f3(0x180)](_0x1a71b0=>_0x1a71b0['coin'])[_0x3a38f3(0x15e)](',\x20')),lastCoinsToBalance='',allOrdersPlaced=![],validateOrdersState=_0x3a38f3(0xf5);let _0x44c7dc=![];lastOrders=[];const _0xb6aba3=config[_0x3a38f3(0x21d)];for(const _0xcd41ad of _0x2116d3){let _0x1bd496,_0x164d60,_0x121048,_0x20b425,_0x51e45a,_0x2c3197=_0xcd41ad[_0x3a38f3(0x148)];logger[_0x3a38f3(0x135)](_0x3a38f3(0x22a)+_0xcd41ad[_0x3a38f3(0x189)]+'\x20'+_0xcd41ad[_0x3a38f3(0x197)]+'\x20'+_0xcd41ad[_0x3a38f3(0x230)]+'\x20'+_0xcd41ad[_0x3a38f3(0x115)]+'%\x20'+_0xcd41ad[_0x3a38f3(0x211)]+'%\x20'+(0x64*_0xcd41ad[_0x3a38f3(0x1f9)])['toFixed'](0x2)+_0x3a38f3(0x1c9)+_0xb6aba3['toFixed'](0x2)+'%)');const _0x1ab1a6=currentCoins[_0x3a38f3(0x144)](_0x376621=>_0x376621['coin']==_0xcd41ad['coin']);_0x1ab1a6&&(_0x1ab1a6[_0x3a38f3(0x12a)]=_0xcd41ad[_0x3a38f3(0x197)]);try{const _0x2c6edf=await exchange['fetchTicker'](_0x2c3197);_0x1bd496=_0xcd41ad[_0x3a38f3(0x1de)]?0x1/_0xcd41ad[_0x3a38f3(0x230)]:_0xcd41ad[_0x3a38f3(0x230)],_0x164d60=_0x2c6edf[_0x3a38f3(0x15b)],_0x121048=_0x2c6edf[_0x3a38f3(0x1ce)];_0xcd41ad[_0x3a38f3(0x1de)]?(_0x20b425=_0xcd41ad[_0x3a38f3(0xfc)]==_0x3a38f3(0xe2)?_0x3a38f3(0x1c7):_0x3a38f3(0xe2),_0x51e45a=Math[_0x3a38f3(0x1e0)](_0xcd41ad[_0x3a38f3(0x11a)])/_0x1bd496):(_0x20b425=_0xcd41ad[_0x3a38f3(0xfc)],_0x51e45a=Math[_0x3a38f3(0x1e0)](_0xcd41ad['trade']));_0x5811a0=='limit'&&(config['ordertype']=='limit-high'&&(_0x1bd496=_0x20b425==_0x3a38f3(0xe2)?_0x164d60:_0x121048),config[_0x3a38f3(0x1cb)]==_0x3a38f3(0x129)&&(_0x1bd496=_0x20b425=='buy'?_0x121048:_0x164d60));_0x51e45a=formatResult(_0x51e45a,0x8),_0x1bd496=formatResult(_0x1bd496,0x8);const _0x55f537=_0x20b425==_0x3a38f3(0x1c7)?config[_0x3a38f3(0x228)]?String[_0x3a38f3(0x289)]('0x'+config['emojisell'])+'\x20':'':config['emojibuy']?String[_0x3a38f3(0x289)]('0x'+config[_0x3a38f3(0x23e)])+'\x20':'',_0x3c14db=_0x5811a0==_0x3a38f3(0x13b)?'Market':config[_0x3a38f3(0x1cb)]==_0x3a38f3(0xfb)?_0x3a38f3(0x22f):_0x3a38f3(0x208),_0x30d419=(Math['floor'](Math[_0x3a38f3(0x242)]()*0x35a4e900)+0x5f5e100)[_0x3a38f3(0x1a0)]();lastOrders[_0x3a38f3(0x1c3)]({'customId':_0x30d419,'symbol':_0x2c3197,'coin':_0xcd41ad[_0x3a38f3(0x189)],'amount':_0x51e45a,'price':_0x1bd496,'side':_0x20b425,'reverse':_0xcd41ad[_0x3a38f3(0x1de)],'filled':0x0});let _0x59b28b;_0x5811a0==_0x3a38f3(0x13b)?_0x20b425=='buy'&&[_0x3a38f3(0x233),_0x3a38f3(0x296),_0x3a38f3(0x216),_0x3a38f3(0x1d9),_0x3a38f3(0x27a)][_0x3a38f3(0x160)](config[_0x3a38f3(0x21b)])?_0x59b28b=await exchange[_0x3a38f3(0x1a3)](_0x2c3197,_0x5811a0,_0x20b425,_0x51e45a,_0x1bd496):_0x59b28b=await exchange[_0x3a38f3(0x1a3)](_0x2c3197,_0x5811a0,_0x20b425,_0x51e45a,undefined):_0x59b28b=await exchange['createOrder'](_0x2c3197,_0x5811a0,_0x20b425,_0x51e45a,_0x1bd496);const _0x56c6bb=lastOrders[_0x3a38f3(0xf4)]-0x1;if(_0x56c6bb>=0x0&&lastOrders[_0x56c6bb][_0x3a38f3(0x17d)]==_0x30d419){lastOrders[_0x56c6bb][_0x3a38f3(0xe4)]=_0x59b28b['id'];if(_0x59b28b[_0x3a38f3(0x1dd)])lastOrders[_0x56c6bb][_0x3a38f3(0x1dd)]=_0x59b28b['amount'];if(_0x59b28b[_0x3a38f3(0x28d)])lastOrders[_0x56c6bb][_0x3a38f3(0x28d)]=_0x59b28b['price'];lastOrders[_0x56c6bb][_0x3a38f3(0x226)]=_0x59b28b[_0x3a38f3(0x226)];}if(_0x59b28b[_0x3a38f3(0x1dd)])_0x51e45a=_0x59b28b[_0x3a38f3(0x1dd)];if(_0x59b28b[_0x3a38f3(0x28d)])_0x1bd496=_0x59b28b[_0x3a38f3(0x28d)];if(_0x5811a0==_0x3a38f3(0x13b))logHistory(_0x3a38f3(0x152),''+_0x55f537+_0x3c14db+_0x3a38f3(0x195)+_0x2c3197+'\x20'+_0x20b425+'\x20#'+formatResult(_0x51e45a,0x8)+'\x20@'+formatResult(_0x1bd496,0x8));else logHistory('order',''+_0x55f537+_0x3c14db+_0x3a38f3(0x195)+_0x2c3197+'\x20'+_0x20b425+'\x20#'+formatResult(_0x51e45a,0x8)+'\x20@'+formatResult(_0x1bd496,0x8));logger[_0x3a38f3(0x135)](_0x3a38f3(0x288)+_0x59b28b['id']+_0x3a38f3(0x28f)+_0x30d419);if(config[_0x3a38f3(0x150)]!=0x0){let _0x2242a5=null;if(cooldownTracker[_0x3a38f3(0xf4)]==config[_0x3a38f3(0x150)]-0x1)_0x2242a5=cooldownTracker['shift']();const _0x4864cf=getTimeStamp();cooldownTracker[_0x3a38f3(0x1c3)](_0x4864cf);if(_0x2242a5){const _0x4006cc=fns['differenceInSeconds'](new Date(_0x4864cf),new Date(_0x2242a5));if(_0x4006cc<cooldownInterval){logHistory(_0x3a38f3(0x14b),'Executed\x20'+config[_0x3a38f3(0x150)]+_0x3a38f3(0x25b)+cooldownInterval/0x3c+'\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20'+cooldownPeriod/(0xe10*0x3e8)+_0x3a38f3(0x1a6)),coolingDown=!![];break;}}}}catch(_0x335d08){if(_0x335d08['toString']()[_0x3a38f3(0x160)]('MIN_NOTIONAL'))lastOrders=lastOrders[_0x3a38f3(0x244)](_0x4429c7=>_0x4429c7[_0x3a38f3(0x148)]!=_0x2c3197),logHistory(_0x3a38f3(0x14b),_0x3a38f3(0xed)+_0x2c3197),_0x44c7dc=!![];else{if(_0x335d08[_0x3a38f3(0x1a0)]()[_0x3a38f3(0x160)](_0x3a38f3(0x283)))lastOrders=lastOrders['filter'](_0x2664b0=>_0x2664b0[_0x3a38f3(0x148)]!=_0x2c3197),logHistory(_0x3a38f3(0x14b),_0x3a38f3(0x275)+_0x2c3197),_0x44c7dc=!![];else{if(_0x335d08[_0x3a38f3(0x1a0)]()[_0x3a38f3(0x160)](_0x3a38f3(0x2a3)))lastOrders=lastOrders[_0x3a38f3(0x244)](_0x1bef59=>_0x1bef59['symbol']!=_0x2c3197),logHistory(_0x3a38f3(0x14b),_0x3a38f3(0x1a5)+_0x2c3197),logger[_0x3a38f3(0x135)](_0x335d08),_0x44c7dc=!![];else _0x335d08[_0x3a38f3(0x1a0)]()[_0x3a38f3(0x160)]('must\x20be\x20greater\x20than\x20minimum\x20amount')?(lastOrders=lastOrders[_0x3a38f3(0x244)](_0x12893c=>_0x12893c['symbol']!=_0x2c3197),logHistory(_0x3a38f3(0x14b),_0x3a38f3(0xed)+_0x2c3197),_0x44c7dc=!![]):(lastOrders=lastOrders[_0x3a38f3(0x244)](_0xdea33=>_0xdea33[_0x3a38f3(0x148)]!=_0x2c3197),await handleError(_0x335d08,_0x3a38f3(0x1b7),_0x2c3197));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x3a38f3(0xf4)]>0x0){const _0x85cb5c=config[_0x3a38f3(0x1cb)]=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0x3a38f3(0x258)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x523c76=_0x3a38f3;validateOrders(_0x523c76(0x1bc));},_0x85cb5c);}else unlockOrders();_0x44c7dc&&config[_0x3a38f3(0x1d8)]&&(logHistory(_0x3a38f3(0x14b),_0x3a38f3(0x179)+pauseBotMsg),await pauseBot(pauseBotInterval)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory('success',_0x3a38f3(0x1a9)));}else{if(coolingDown)!config[_0x3a38f3(0x1d8)]&&logHistory(_0x3a38f3(0x14b),'Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode');else lockOrders!=ORDERS[_0x3a38f3(0x184)]&&(!config[_0x3a38f3(0x1d8)]&&(config[_0x3a38f3(0x1cb)]==_0x3a38f3(0x13b)?logHistory(_0x3a38f3(0x14b),_0x3a38f3(0x111)):logHistory(_0x3a38f3(0x14b),_0x3a38f3(0x280))));}}function persistOpenOrders(_0x4d8752){const _0x1f2fd3=_0x3bd8cf,_0x575f73={...config,'openOrders':_0x4d8752};let _0x306c84=dbConfig[_0x1f2fd3(0x1e6)](_0x1f2fd3(0x212))[_0x1f2fd3(0x144)]({'botID':botID})[_0x1f2fd3(0x155)]();_0x306c84&&dbConfig[_0x1f2fd3(0x1e6)]('bot')['find']({'botID':botID})[_0x1f2fd3(0xf0)](_0x575f73)[_0x1f2fd3(0x11c)]();}function restoreOrders(){const _0x22c945=_0x3bd8cf;let _0xa1ef79;config['openOrders']&&allOpenOrders['forEach'](_0x4f423c=>{const _0x1fdb81=_0x1ca4,_0x190a9b=config['openOrders'][_0x1fdb81(0x144)](_0x59ed9a=>_0x59ed9a[_0x1fdb81(0xe4)]==_0x4f423c['id']);_0x190a9b&&(lastOrders[_0x1fdb81(0x1c3)](_0x190a9b),_0xa1ef79=_0x4f423c[_0x1fdb81(0x266)]);});if(lastOrders['length']>0x0){setLockOrders(ORDERS[_0x22c945(0x1ca)]),validateOrdersState=_0x22c945(0x1f4),allOrdersPlaced=!![];const _0x52ae31=new Date()[_0x22c945(0x259)](),_0x1c3c5e=config[_0x22c945(0x1cb)]=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0x22c945(0x258)]*0x3c*0x3e8;if(_0xa1ef79+_0x1c3c5e>_0x52ae31){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x1d3f4f=_0x22c945;validateOrders(_0x1d3f4f(0x1bc));},_0xa1ef79+_0x1c3c5e-_0x52ae31);}else validateOrders(_0x22c945(0x1bc));}}async function sendMetricsTelegram(){const _0x598054=_0x3bd8cf;if(!coinsLoaded){process[_0x598054(0x245)]({'telegrammsg':_0x598054(0x192)},_0x5b66fb=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0xc97ea7='';if(config[_0x598054(0x1ec)])_0xc97ea7='<b>'+config['botname']+_0x598054(0xe8);else _0xc97ea7=_0x598054(0xfa)+botID+_0x598054(0xe8);const _0x1edef0=config['basecoin'],_0x1457df=config[_0x598054(0x234)],_0x541132=getKPIs('basecoin'),_0x12b1a5=getKPIs(_0x598054(0x234),_0x1457df),_0x5eec41=getKPIs(_0x598054(0xef)),_0x459983=getKPIs(_0x598054(0x22b),_0x1457df),_0x594644=getKPIs('pnl-basecoin'),_0x1aa775=getKPIs('pnl-fiat',_0x1457df);_0x1edef0['includes'](_0x1457df)?(_0xc97ea7+=_0x598054(0x22e),_0xc97ea7+=_0x598054(0x248)+_0x1edef0+':\x20'+_0x541132[_0x598054(0x155)]+'\x20('+_0x541132['change']+_0x598054(0x13d),_0xc97ea7+=_0x598054(0x1fc)+_0x1edef0+':\x20'+_0x5eec41[_0x598054(0x155)]+'\x20('+_0x5eec41[_0x598054(0x257)]+'%)\x0a',_0xc97ea7+=_0x598054(0x18c)+_0x1edef0+':\x20'+_0x594644[_0x598054(0x155)]+'\x20('+_0x594644[_0x598054(0x257)]+'%)\x0a',_0xc97ea7+='</pre>'):(_0xc97ea7+=_0x598054(0x22e),_0xc97ea7+=_0x598054(0x248)+_0x1edef0+':\x20'+_0x541132['value']+'\x20('+_0x541132[_0x598054(0x257)]+_0x598054(0x13d),_0xc97ea7+='Value\x20'+_0x1457df+':\x20'+_0x12b1a5[_0x598054(0x155)]+'\x20('+_0x12b1a5[_0x598054(0x257)]+_0x598054(0x13d),_0xc97ea7+=_0x598054(0x1fc)+_0x1edef0+':\x20'+_0x5eec41[_0x598054(0x155)]+'\x20('+_0x5eec41[_0x598054(0x257)]+'%)\x0a',_0xc97ea7+=_0x598054(0x1fc)+_0x1457df+':\x20'+_0x459983[_0x598054(0x155)]+'\x20('+_0x459983[_0x598054(0x257)]+_0x598054(0x13d),_0xc97ea7+='PnL\x20'+_0x1edef0+':\x20'+_0x594644[_0x598054(0x155)]+'\x20('+_0x594644['change']+'%)\x0a',_0xc97ea7+='PnL\x20'+_0x1457df+':\x20'+_0x1aa775[_0x598054(0x155)]+'\x20('+_0x1aa775[_0x598054(0x257)]+_0x598054(0x13d),_0xc97ea7+=_0x598054(0x157)),process[_0x598054(0x245)]({'telegrammsg':_0xc97ea7},_0x39744b=>{});}async function sendPortfolioTelegram(){const _0x360191=_0x3bd8cf;if(!coinsLoaded||!currentCoins[0x0]['distribution']){process[_0x360191(0x245)]({'telegrammsg':_0x360191(0x192)},_0xbbb4d0=>{});return;}let _0x4dda0c='';if(config[_0x360191(0x1ec)])_0x4dda0c=_0x360191(0x12b)+config[_0x360191(0x103)]+_0x360191(0x15f);else _0x4dda0c=_0x360191(0xfa)+botID+_0x360191(0x15f);_0x4dda0c+=_0x360191(0x22e),_0x4dda0c+=_0x360191(0x14d),_0x4dda0c+=_0x360191(0x116),_0x4dda0c+='-------------------------------\x0a',currentCoins[_0x360191(0x169)](_0x502c38=>{const _0x50dc51=_0x360191;_0x4dda0c+=_0x502c38['coin'][_0x50dc51(0x18b)](0x7)+'|\x20'+formatPad(_0x502c38['distribution'],0x2,0x6)+'|\x20'+formatPad(_0x502c38['target'],0x2,0x6)+'|\x20'+formatPad(_0x502c38[_0x50dc51(0x1f9)]*0x64,0x2,0x6)+'\x0a';}),_0x4dda0c+=_0x360191(0x157),process[_0x360191(0x245)]({'telegrammsg':_0x4dda0c},_0x5e91b5=>{});}function formatPad(_0x1547b0,_0x4eab15,_0xfd3d36){const _0x210007=_0x3bd8cf,_0x1d0a0e=formatResultString(_0x1547b0,_0x4eab15);return _0x1d0a0e?_0x1d0a0e[_0x210007(0x220)](_0xfd3d36):''[_0x210007(0x220)](_0xfd3d36);}function logHistory(_0x5d9c1a,_0x15893e,_0x38b38e=''){const _0x2dcacb=_0x3bd8cf;logger[_0x2dcacb(0x19c)](''+_0x15893e);let _0x5eca31={'time':getTimeStamp(),'type':_0x5d9c1a,'event':_0x15893e};dbLogs[_0x2dcacb(0x1e6)](_0x2dcacb(0x162))['push'](_0x5eca31)['write']();if(_0x38b38e=='')_0x38b38e=_0x15893e;proxyEmit(_0x2dcacb(0x23c),{'log':_0x5eca31,'summary':_0x38b38e}),process[_0x2dcacb(0x245)]({'telegram':{..._0x5eca31,'botname':config['botname'],'showname':config['showname']}},_0x5f2d8a=>{});}function emitHistory(_0x5d3601={}){const _0xd6812c=_0x3bd8cf;Object[_0xd6812c(0x1ed)](_0x5d3601)[_0xd6812c(0xf4)]==0x0&&(_0x5d3601={'type':[_0xd6812c(0x152),_0xd6812c(0x23c)],'event':'','page':0x1});if(_0x5d3601['type'][_0xd6812c(0x160)]('event'))_0x5d3601['type']['splice'](_0x5d3601[_0xd6812c(0x2a0)][_0xd6812c(0x1cc)](_0xd6812c(0x23c)),0x1,_0xd6812c(0x14b),_0xd6812c(0x27b),_0xd6812c(0x281));if(dbLogs[_0xd6812c(0x20b)]('logs')[_0xd6812c(0x155)]()){let _0x50791a=dbLogs[_0xd6812c(0x1e6)](_0xd6812c(0x162))[_0xd6812c(0x244)](_0xcd2416=>{const _0x1adc45=_0xd6812c;if(_0x5d3601[_0x1adc45(0x2a0)][_0x1adc45(0xf4)]==0x0)return![];else return _0x5d3601[_0x1adc45(0x2a0)][_0x1adc45(0x160)](_0xcd2416[_0x1adc45(0x2a0)]);})[_0xd6812c(0x244)](_0x9b1082=>{const _0x1ae23e=_0xd6812c;if(_0x5d3601['event']=='')return!![];else return _0x9b1082[_0x1ae23e(0x23c)][_0x1ae23e(0x1b8)]()[_0x1ae23e(0x160)](_0x5d3601[_0x1ae23e(0x23c)]['toLowerCase']());})[_0xd6812c(0x1d5)]('time'),_0x4de2ee=_0x50791a['value']()[_0xd6812c(0xf4)];_0x50791a=_0x50791a[_0xd6812c(0x1de)]()[_0xd6812c(0x26a)]((_0x5d3601[_0xd6812c(0x29b)]-0x1)*logPageSize,_0x5d3601[_0xd6812c(0x29b)]*logPageSize-0x1)[_0xd6812c(0x1de)]()[_0xd6812c(0x155)](),proxyEmit(_0xd6812c(0x1d2),{'logs':_0x50791a,'total':_0x4de2ee});}else proxyEmit(_0xd6812c(0x1d2),{'logs':[],'total':0x0});}function _0x2bc9(){const _0x15e278=['join','\x20portfolio:</b>\x20\x0a\x0a','includes','getMinutes','logs','version','\x20not\x20responding\x20(see:\x20hodlerhacks.com/fix/5)','unlinkSync','Order(s)\x20not\x20validated\x20after\x20','InvalidNonce','lowdb','forEach','BTC','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','getMonth','testApi','breakeven','Unfilled\x20order(s)\x20canceled\x20after\x20','Exchange','round','yyyy/MM/dd','\x20/\x20','getSeconds','parse','highest','pro','/output-000.log','Avoiding\x20continuous\x20order\x20attempts','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','replace','2.7.1','customId','***','Error\x20while\x20deleting\x20files:\x20','map','active','offset','openOrders','UNLOCKED','Failed\x20to\x20load\x20coin\x20data\x20for\x20','RETRY\x20-\x20Problem\x20resolved\x20after\x20','colorscheme','limit','coin','log','padEnd','PnL\x20','placeOrder','stringify','format','red_yellow_blue','ETH','Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute','marketcapApi','initclient','\x20order:\x20','7WRAKNV','number','apply','axios','cancel','filled','full','split','privateKey','\x20minutes\x20-\x20','toString','timestamp-issue','\x0aSymbol(s):\x20','createOrder','Order\x20filled:\x20','Order\x20is\x20invalid:\x20','\x20hour','1\x20-\x20FILLED\x20known\x20order:\x20','UNLOCKING','Cooldown\x20ended\x20-\x20balancing\x20resumed','Error\x20in\x20testNewAPI():\x20','getDate','BUSD','storeHeadless',',\x20must\x20be\x20a\x203\x20digit\x20number','AuthenticationError','Manual\x20balancing\x20required','net','Resetting\x20coin\x20results:\x20','addDays',')\x20unknown\x20order:\x20','sha256','Headless:\x20','placeOrder()','toLowerCase','sendPortfolioTelegram','no\x20open\x20orders','getFullYear','final','\x20-\x20bot\x20switched\x20to\x20manual\x20mode','remainingSymbols','USDP','toFixed','api-issue','Unknown\x20error\x20-\x20check\x20logs','push','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','secret','heapUsed','sell','token\x20is\x20expired','%\x20(','LOCKED','ordertype','indexOf','fetchTickers()','ask','bb-settings.json','quote','2.3.5','event-history','Binance','Error\x20details:\x20','sortBy','args','getHours','headless','Huobi','\x20attempts','resetHistory','\x20exchange\x20error:\x20','amount','reverse','sells','abs','\x20|\x20lock\x20orders:\x20','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','sqrt','timeshift','date','get','decode64','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','Bot\x20','\x20MB','settings','showname','keys','code','/EUR','currency','status','fetchBalance()','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','ongoing','apiPassword','watchTrades()','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','none','delta','production','changes','Net\x20','RequestTimeout','performance','Portfolio\x20change\x20detected:\x20','password','removed','\x20network\x20error:\x20','deleteHistoryAlerts','\x20>\x20[DEBUG]\x20','cancelOrders()','progress','spot','Limit\x20(low-margin)','decrypt','Exchange\x20permission\x20denied\x20-\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','has','\x20>\x20stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','request-time','cancelOrder','staging','bot-','target','bot','recreate','Valid\x20balance\x20for\x20','coin-loading-progress','Cex','Error\x20details:','19760100OpeGXq','Invalid\x20symbol:\x20','Error\x20occurred:\x20','exchange',':\x20timer\x20>','threshold','exchanges','Loading\x20completed','padStart','ccxt','enabled','toUpperCase','Pausing\x20for\x20','Exception\x20thrown\x20in\x20','fee','entries','emojisell','(((.+)+)+)+$','Trigger:\x20','net-fiat','/USD','USDT','<pre>','Limit\x20(high-margin)','last','limits','OrderNotFound','Bybit','fiat','Market\x20order','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','\x20rejected\x20your\x20API\x20request\x20(see:\x20hodlerhacks.com/fix/4)','pnl','Waited\x20','date-fns','Failed\x20to\x20load\x20market\x20data\x20-\x20bot\x20not\x20started','event','switch-manual','emojibuy','Order\x20filled','createWriteStream','startnumber','random','Generating\x20PnL\x20data','filter','send','Initializing\x20exchange','sort','Value\x20','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','fetchTicker','1\x20-\x20partially\x20FILLED\x20(','defaults','watchTradesForSymbols()','6906240gamzWO','Updating\x20API\x20key\x20(not\x20saved\x20in\x20config\x20file\x20yet)','apiSecret','realizedPnL','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','freeze','no\x20exchange\x20reloaded','getOpenOrders()','usd','change','timeout','getTime','startdate','\x20orders\x20in\x20less\x20than\x20','uncaughtException','No\x20more\x20open\x20orders\x20-\x20','onepagemode','liquidity','time','min','Initializing\x20exchange:\x20already\x20done','running','process\x20','change24h','timestamp','\x20API\x20key,\x20secret\x20or\x20password\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','amountToPrecision','basecoinvalue','slice','data','excluded','Block\x20transaction\x20detection:\x20','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','configstate','exchange\x20reload','initTickers()','3242816addVQy','Generated\x20PnL\x20data','DDoSProtection','Order\x20amount\x20is\x20invalid:\x20','marketcap','valid','getPortfolio','Invalid\x20API\x20details,\x20please\x20try\x20again\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','Huobipro','warning','\x20-\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','complete','InsufficientFunds','marketcapsqrt','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','success','Set\x20lock\x20orders\x20to:\x20','Invalid\x20quantity','watchOrders()','portfolio','2\x20-\x20Handled\x20open\x20orders','starting-balance-','ID:\x20','fromCodePoint','open','ExchangeError','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20trying\x20again\x20in\x20','price','Placing\x20order\x20for:\x20','\x20|\x20Custom\x20ID:\x20','writeFile','bots','portfolio2','yargs/yargs','netoffset','Reset\x20|\x20','Bitget','storeConfiguration','2\x20-\x20handling\x20FILLED\x20order:\x20','Test\x20new\x20API','cost','page','recovery','set','create','100359xhIdVw','type','slider','botID','InvalidOrder','10697190eejtiG','Resuming\x20(','RSA-OAEP','\x20API\x20key\x20is\x20invalid','-events.json','quick','pop','watchTrades','56qRfpjK','util','./config/','node-forge','orderstatus','max','\x20has\x20a\x2024h\x20drop\x20of\x20','NetworkError','average','startprice','market_cap','2\x20-\x20Validate\x20orders:\x20','buy','watchTradesForSymbols','orderId','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','added','loading-canceled','\x20metrics:</b>\x20\x0a\x0a','basecoin',')\x20known\x20order:\x20','loadSymbols()','bb-secure.json','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','./version.json','net-basecoin','assign','path','autoliquidity','9SXDffu','length','initial','Fee\x20discount\x20refund\x20detected:\x20','recent20','loadMarkets','cloneDeep','<b>Bot\x20','limit-high','side','balancing\x20resumed','closed','memoryUsage','\x20|\x20','.json','configuration-stored','botname','USD','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','\x20not\x20available\x20(see:\x20hodlerhacks.com/fix/5)','************','argv','sandbox','match','marketcapEnabled','2.6.23','mkdirSync','configuration','splice','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','storeFiat','isBefore','portfolio1','distribution','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','coins','1\x20-\x20FILLED\x20unknown\x20order:\x20','status\x20code\x20401','trade','pki','write','/USDT','Initializing\x20coin\x20results','pid','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','environment','296951QnVsYL','privateKeyFromPem','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','fetchBalance','\x20>\x20details:','substring','canceled','limit-low','prevnumber','<b>','PermissionDenied','2.6.0','-config.json','-performance.json','shift','balances','kill','apiKey','fetchTickers','debug','sendMetricsTelegram','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)','13925792HDukjN','\x20>\x20','Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)','market','buys','%)\x0a','Saving\x20configuration','remove','TUSD','update-liquidity','RETRY\x20-\x20Error\x20in\x20','isEqual','find','fetchOpenOrders','existsSync','PAXG','symbol','EUR','./logs/','error','API-key\x20format\x20invalid','-------------------------------\x0a','detectLiquidityChange()','Insufficient\x20funds\x20to\x20execute\x20order:\x20','cooldown','2.6.22','order',':\x20Bot\x20','lowdb/adapters/FileSync','value','Invalid\x20balance\x20for\x20','</pre>','bitmex',')\x20|\x20exchange:\x20','Portfolio\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','bid','eur','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange'];_0x2bc9=function(){return _0x15e278;};return _0x2bc9();}function deleteHistoryAlerts(_0x52972d){const _0x343413=_0x3bd8cf;if(dbLogs[_0x343413(0x20b)]('logs')['value']()){const _0x2611a9=dbLogs[_0x343413(0x1e6)](_0x343413(0x162))[_0x343413(0x1d5)](_0x343413(0x260))[_0x343413(0x244)](_0x25e743=>{const _0x40da60=_0x343413;return _0x25e743['type']==_0x40da60(0x152);})[_0x343413(0x155)]();dbLogs['get'](_0x343413(0x162))[_0x343413(0x13f)]()[_0x343413(0x11c)](),dbLogs[_0x343413(0x1e6)](_0x343413(0x162))[_0x343413(0xf0)](_0x2611a9)[_0x343413(0x11c)](),emitHistory(_0x52972d);}}async function pauseBot(_0x572ed2=pauseBotIntervalShort,_0x524512,_0x2df1d0,_0x1f3e90=![]){const _0x8fa516=_0x3bd8cf,_0x32600d=new Date()[_0x8fa516(0x259)]();if(!lastErrorShown||_0x32600d-lastErrorShown>=_0x572ed2){lastErrorShown=_0x32600d;if(!lastBotPause)lastBotPause=_0x32600d,consecutivePauses=0x1;else{if(_0x32600d-lastBotPause-_0x572ed2<0x5a*0x3e8){consecutivePauses++;if(consecutivePauses>maxPauseRetries){if(_0x1f3e90){logHistory(_0x8fa516(0x14b),_0x524512+_0x8fa516(0x20c)),await killBot();return;}else logHistory('error',_0x524512+pauseBotMsg),_0x572ed2=pauseBotInterval;}}else consecutivePauses=0x1;lastBotPause=_0x32600d;}_0x2df1d0?logger[_0x8fa516(0x135)]('('+consecutivePauses+')\x20'+_0x524512+_0x8fa516(0x126),_0x2df1d0):logger['debug']('('+consecutivePauses+')\x20'+_0x524512);if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);await sleep(_0x572ed2),botPaused=![],_0x572ed2==pauseBotIntervalShort?resumeBot(!![]):resumeBot(![]);}}}async function killBot(){const _0x142dba=_0x3bd8cf;botPaused=!![],await sleep(0x3e8),process[_0x142dba(0x245)]({'stop':_0x142dba(0x132)},_0x16fd2e=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x35a8b2,_0xd5b249,_0x50f89c=![]){const _0x1286b9=_0x3bd8cf;if(botPaused)return;let _0x165010;const _0x4f9c0a=config[_0x1286b9(0x21b)]||'Exchange';if(_0xd5b249)logger[_0x1286b9(0x135)](_0x1286b9(0x225)+_0xd5b249);const _0x38e7bc=()=>{const _0x3dd06e=_0x1286b9;loading[_0x3dd06e(0x14b)]=_0x3dd06e(0x1c1),emitLoadingProgress();};if(_0x35a8b2['toString']()[_0x1286b9(0x160)](_0x1286b9(0x14c)))logHistory(_0x1286b9(0x14b),_0x4f9c0a+_0x1286b9(0x1e2)),_0x38e7bc();else{if(_0x35a8b2['toString']()[_0x1286b9(0x160)](_0x1286b9(0x105)))logHistory(_0x1286b9(0x14b),_0x4f9c0a+_0x1286b9(0x1f3)),_0x38e7bc();else{if(_0x35a8b2[_0x1286b9(0x1a0)]()[_0x1286b9(0x160)](_0x1286b9(0x1af)))config[_0x1286b9(0x1f5)]?_0x165010=_0x4f9c0a+_0x1286b9(0x267):_0x165010=_0x4f9c0a+_0x1286b9(0x1f7),logHistory(_0x1286b9(0x14b),_0x165010+'\x20(see:\x20hodlerhacks.com/fix/1)'),_0x38e7bc();else{if(_0x35a8b2[_0x1286b9(0x1a0)]()[_0x1286b9(0x160)](_0x1286b9(0x12c)))logHistory(_0x1286b9(0x14b),_0x4f9c0a+_0x1286b9(0x110)),_0x38e7bc();else{if(!_0x50f89c)await handleError(_0x35a8b2,null);}}}}}async function handleError(_0x120752,_0x586b2f,_0x3d2d76=''){const _0x1869ee=_0x3bd8cf;if(botPaused)return;let _0x24be77;const _0x2aaddb=config[_0x1869ee(0x21b)]||_0x1869ee(0x170);if(_0x586b2f)logger[_0x1869ee(0x135)](_0x1869ee(0x225)+_0x586b2f);if(_0x120752['toString']()[_0x1869ee(0x160)](_0x1869ee(0x274)))_0x24be77=_0x2aaddb+'\x20blocked\x20API\x20(DDoSProtection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading',await pauseBot(undefined,_0x24be77,_0x120752);else{if(_0x120752[_0x1869ee(0x1a0)]()[_0x1869ee(0x160)]('RateLimitExceeded'))_0x24be77=_0x2aaddb+'\x20blocked\x20API\x20(RateLimitExceeded)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading',await pauseBot(undefined,_0x24be77,_0x120752);else{if(_0x120752[_0x1869ee(0x1a0)]()[_0x1869ee(0x160)]('ExchangeNotAvailable')||_0x120752['toString']()[_0x1869ee(0x160)]('OnMaintenance'))_0x24be77=_0x2aaddb+_0x1869ee(0x106),await pauseBot(undefined,_0x24be77,_0x120752[_0x1869ee(0x1a0)]());else{if(_0x120752[_0x1869ee(0x1a0)]()[_0x1869ee(0x160)](_0x1869ee(0x1fd)))_0x24be77=_0x2aaddb+_0x1869ee(0x164),await pauseBot(undefined,_0x24be77,_0x120752[_0x1869ee(0x1a0)]());else{if(_0x120752[_0x1869ee(0x1a0)]()[_0x1869ee(0x160)](_0x1869ee(0xe5)))_0x24be77=_0x2aaddb+'\x20closed\x20the\x20connection\x20(see:\x20hodlerhacks.com/fix/5)',await pauseBot(undefined,_0x24be77,_0x120752[_0x1869ee(0x1a0)]());else{if(_0x120752[_0x1869ee(0x1a0)]()['toLowerCase']()[_0x1869ee(0x160)](_0x1869ee(0x266))||_0x120752[_0x1869ee(0x1a0)]()['toLowerCase']()['includes'](_0x1869ee(0x20d)))_0x24be77='Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)',await pauseBot(undefined,_0x24be77,_0x120752['toString']());else{if(_0x120752[_0x1869ee(0x1a0)]()[_0x1869ee(0x160)](_0x1869ee(0x167)))_0x24be77=_0x2aaddb+_0x1869ee(0x237),await pauseBot(undefined,_0x24be77,_0x120752[_0x1869ee(0x1a0)]());else{if(_0x120752 instanceof ccxt[_0x1869ee(0xdd)])_0x24be77=_0x2aaddb+_0x1869ee(0x202)+_0x120752[_0x1869ee(0x1a0)](),logger[_0x1869ee(0x135)]('Network\x20error\x20details:',_0x120752),await pauseBot(undefined,_0x24be77,_0x120752);else{if(_0x120752[_0x1869ee(0x1a0)]()[_0x1869ee(0x160)](_0x1869ee(0x14c)))logHistory('error',_0x2aaddb+_0x1869ee(0x2a7)),logHistory(_0x1869ee(0x14b),_0x1869ee(0x137)),await killBot();else{if(_0x120752['toString']()['includes'](_0x1869ee(0x105)))logHistory(_0x1869ee(0x14b),_0x2aaddb+'\x20API\x20secret\x20is\x20invalid'),logHistory(_0x1869ee(0x14b),_0x1869ee(0x137)),await killBot();else{if(_0x120752['toString']()['includes']('AuthenticationError')&&_0x120752[_0x1869ee(0x1a0)]()[_0x1869ee(0x160)](_0x1869ee(0x1c8)))_0x24be77=_0x2aaddb+_0x1869ee(0x1c4),await pauseBot(undefined,_0x24be77,_0x120752,!![]);else{if(_0x120752['toString']()[_0x1869ee(0x160)]('AuthenticationError'))config[_0x1869ee(0x1f5)]?_0x24be77=_0x2aaddb+_0x1869ee(0x267):_0x24be77=_0x2aaddb+_0x1869ee(0x1f7),logHistory(_0x1869ee(0x14b),_0x24be77),logHistory(_0x1869ee(0x14b),_0x1869ee(0x137)),await killBot();else{if(_0x120752[_0x1869ee(0x1a0)]()[_0x1869ee(0x160)](_0x1869ee(0x12c)))logHistory(_0x1869ee(0x14b),_0x2aaddb+_0x1869ee(0x15d)),logHistory(_0x1869ee(0x14b),_0x1869ee(0x137)),await killBot();else{if(_0x120752[_0x1869ee(0x1a0)]()['includes'](_0x1869ee(0x27e)))logHistory('error',_0x1869ee(0x14f)+_0x3d2d76),logger[_0x1869ee(0x135)](_0x1869ee(0x217),_0x120752);else{if(_0x120752 instanceof ccxt[_0x1869ee(0x28b)]){_0x24be77=_0x2aaddb+_0x1869ee(0x1dc)+_0x120752[_0x1869ee(0x1a0)]();if(_0x3d2d76)_0x24be77+='\x0aSymbol(s):\x20'+_0x3d2d76;await pauseBot(undefined,_0x24be77,_0x120752);}else{_0x24be77='Unknown\x20error:\x20'+_0x120752[_0x1869ee(0x1a0)]();if(_0x3d2d76)_0x24be77+=_0x1869ee(0x1a2)+_0x3d2d76;await pauseBot(undefined,_0x24be77);}}}}}}}}}}}}}}}}function decryptRSA(_0x300b42,_0x3b069d){const _0x5c55d6=_0x3bd8cf,_0x87f501=forge[_0x5c55d6(0x11b)][_0x5c55d6(0x123)](_0x300b42),_0x2e870d=_0x87f501[_0x5c55d6(0x209)](forge['util'][_0x5c55d6(0x1e7)](_0x3b069d),_0x5c55d6(0x2a6),{'md':forge['md'][_0x5c55d6(0x1b5)][_0x5c55d6(0x29e)](),'mgf1':{'md':forge['md'][_0x5c55d6(0x1b5)][_0x5c55d6(0x29e)]()}});return _0x2e870d;}async function withRetry(_0x25d46b,_0x33acc7){const _0x32ec4b=_0x3bd8cf;let _0x284ccc=![],_0x30a2f5=0x0,_0x3f73f9,_0x4e34f3;while(_0x30a2f5<maxRetries){try{_0x3f73f9=await _0x33acc7();break;}catch(_0x36a0a8){_0x4e34f3=_0x36a0a8,!_0x284ccc?(_0x284ccc=!![],logger[_0x32ec4b(0x135)](_0x32ec4b(0x142)+_0x25d46b+':',_0x36a0a8[_0x32ec4b(0x1a0)]())):await sleep(retryInterval);}_0x30a2f5++;}if(_0x30a2f5==0x0)return _0x3f73f9;if(_0x30a2f5>=maxRetries)throw _0x4e34f3;else return logger['debug'](_0x32ec4b(0x186)+_0x30a2f5+_0x32ec4b(0x1da)),_0x3f73f9;}function formatResult(_0x41fc6d,_0x25811f){const _0xfe8103=_0x3bd8cf;return parseFloat(_0x41fc6d[_0xfe8103(0x1c0)](_0x25811f));}function formatResultTruncate(_0x31d3e8,_0x2c9994){const _0x4784e7=_0x3bd8cf;let _0xf54600=formatResultString(_0x31d3e8,0xa),_0x556016=_0xf54600[_0x4784e7(0x1cc)]('.');return _0x556016!=-0x1&&(_0xf54600=_0xf54600['slice'](0x0,_0x556016+_0x2c9994+0x1)),Number(_0xf54600);}function formatResultString(_0x55cc1b,_0x1ba756){const _0x532412=_0x3bd8cf;let _0x1254df;if(!(''+_0x55cc1b)['includes']('e'))_0x1254df=+(Math[_0x532412(0x171)](_0x55cc1b+'e+'+_0x1ba756)+'e-'+_0x1ba756);else{let _0x5e2290=(''+_0x55cc1b)[_0x532412(0x19d)]('e'),_0x55218='';+_0x5e2290[0x1]+_0x1ba756>0x0&&(_0x55218='+'),_0x1254df=+(Math['round'](+_0x5e2290[0x0]+'e'+_0x55218+(+_0x5e2290[0x1]+_0x1ba756))+'e-'+_0x1ba756);}return Number(_0x1254df)[_0x532412(0x1c0)](_0x1ba756);}function getServerTime(){const _0x30c346=_0x3bd8cf,_0x534c13=new Date();return _0x534c13[_0x30c346(0x1bb)]()+'/'+(_0x534c13[_0x30c346(0x16c)]()+0x1)[_0x30c346(0x1a0)]()[_0x30c346(0x220)](0x2,'0')+'/'+_0x534c13[_0x30c346(0x1ab)]()[_0x30c346(0x1a0)]()['padStart'](0x2,'0')+'\x20'+_0x534c13[_0x30c346(0x1d7)]()[_0x30c346(0x1a0)]()['padStart'](0x2,'0')+':'+_0x534c13[_0x30c346(0x161)]()['toString']()[_0x30c346(0x220)](0x2,'0')+':'+_0x534c13[_0x30c346(0x174)]()['toString']()[_0x30c346(0x220)](0x2,'0');}function getTimeStamp(){const _0x3da09c=_0x3bd8cf,_0x4c2d2e=shiftedTime();return _0x4c2d2e[_0x3da09c(0x1bb)]()+'/'+(_0x4c2d2e['getMonth']()+0x1)[_0x3da09c(0x1a0)]()['padStart'](0x2,'0')+'/'+_0x4c2d2e[_0x3da09c(0x1ab)]()[_0x3da09c(0x1a0)]()[_0x3da09c(0x220)](0x2,'0')+'\x20'+_0x4c2d2e[_0x3da09c(0x1d7)]()[_0x3da09c(0x1a0)]()[_0x3da09c(0x220)](0x2,'0')+':'+_0x4c2d2e[_0x3da09c(0x161)]()['toString']()[_0x3da09c(0x220)](0x2,'0')+':'+_0x4c2d2e[_0x3da09c(0x174)]()[_0x3da09c(0x1a0)]()[_0x3da09c(0x220)](0x2,'0');}function getDate(){const _0x1fd26a=_0x3bd8cf,_0x323b00=shiftedTime();return _0x323b00[_0x1fd26a(0x1bb)]()+'/'+(_0x323b00[_0x1fd26a(0x16c)]()+0x1)[_0x1fd26a(0x1a0)]()['padStart'](0x2,'0')+'/'+_0x323b00[_0x1fd26a(0x1ab)]()[_0x1fd26a(0x1a0)]()[_0x1fd26a(0x220)](0x2,'0');}function getHour(){const _0x4b18b8=_0x3bd8cf,_0x1bc64c=shiftedTime();return _0x1bc64c[_0x4b18b8(0x1d7)]()[_0x4b18b8(0x1a0)]()[_0x4b18b8(0x220)](0x2,'0');}function sleep(_0xfd8c67){return new Promise(_0x2fee28=>setTimeout(_0x2fee28,_0xfd8c67));}function shiftedTime(){const _0x45733e=_0x3bd8cf,_0x34c041=new Date();let _0x4953f2=_0x34c041;if(config&&config[_0x45733e(0x1e4)]!==0x0)_0x4953f2=fns['add'](_0x34c041,{'hours':config[_0x45733e(0x1e4)]});return _0x4953f2;}function timer(_0x34e63f){const _0x3fbee0=_0x3bd8cf,_0x5873ea=new Date();!lasttime?console[_0x3fbee0(0x18a)](getTimeStamp()+_0x3fbee0(0x21c),_0x34e63f,_0x5873ea):console[_0x3fbee0(0x18a)](getTimeStamp()+':\x20timer\x20>',_0x34e63f,(_0x5873ea-lasttime)/0x3e8),lasttime=_0x5873ea;}