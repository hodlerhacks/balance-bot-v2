const _0x3ab734=_0x28e0;(function(_0x55d13d,_0x46da0f){const _0x38e200=_0x28e0,_0x57a1cc=_0x55d13d();while(!![]){try{const _0x1ac01f=-parseInt(_0x38e200(0x1ad))/0x1+parseInt(_0x38e200(0x278))/0x2+parseInt(_0x38e200(0x1ca))/0x3*(parseInt(_0x38e200(0x2e9))/0x4)+-parseInt(_0x38e200(0x205))/0x5*(-parseInt(_0x38e200(0x24d))/0x6)+-parseInt(_0x38e200(0x1bd))/0x7+-parseInt(_0x38e200(0x1f2))/0x8*(parseInt(_0x38e200(0x2fd))/0x9)+parseInt(_0x38e200(0x26d))/0xa;if(_0x1ac01f===_0x46da0f)break;else _0x57a1cc['push'](_0x57a1cc['shift']());}catch(_0xce51ea){_0x57a1cc['push'](_0x57a1cc['shift']());}}}(_0x41cd,0x7c2c9));const _0x4f47eb=function(){let _0xd0a040=!![];return function(_0x2fd8dd,_0x2676db){const _0x1b68a8=_0xd0a040?function(){if(_0x2676db){const _0x47db57=_0x2676db['apply'](_0x2fd8dd,arguments);return _0x2676db=null,_0x47db57;}}:function(){};return _0xd0a040=![],_0x1b68a8;};}(),_0x2bb835=_0x4f47eb(this,function(){const _0x446338=_0x28e0;return _0x2bb835[_0x446338(0x274)]()[_0x446338(0x1d6)](_0x446338(0x211))[_0x446338(0x274)]()[_0x446338(0x2aa)](_0x2bb835)[_0x446338(0x1d6)](_0x446338(0x211));});_0x2bb835();'use strict';const ccxt=require(_0x3ab734(0x176)),low=require(_0x3ab734(0x1ed)),FileSync=require(_0x3ab734(0x2bd)),fs=require('fs'),fns=require(_0x3ab734(0x2ba)),forge=require(_0x3ab734(0x194)),util=require('util'),argv=require(_0x3ab734(0x152))(process['argv'][_0x3ab734(0x313)](0x2))[_0x3ab734(0x1f7)],path=require(_0x3ab734(0x266)),axios=require('axios');let exchange,gTicker={},gChange={};const usdBasecoins=[_0x3ab734(0x2b5),_0x3ab734(0x1a2),'TUSD',_0x3ab734(0x24c),_0x3ab734(0x1e2),_0x3ab734(0x2d3)],excludedExchanges=[_0x3ab734(0x1a1)],debugging=argv['d']||![];let pnlGenerationNeeded=argv['r']||![],config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object['freeze']({'LOCKED':0x0,'UNLOCKING':0x1,'UNLOCKED':0x2});let lockOrders=ORDERS[_0x3ab734(0x150)],validateOrdersState,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotIntervalShort=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0x3ab734(0x2bc)+pauseBotInterval/0xea60+_0x3ab734(0x202),maxPauseRetries=0x6,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,watchTransactionsInterval=0x3c*0x3e8,schedulerInterval=0x3c*0x3c*0x3e8,retryInterval=0x3e8,maxRetries=0x5,logPageSize=0x14,defaultFee=0.003;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidOrdersInitialTimeout,pidOrdersTimeout,botPaused=![],transactionDetectionOngoing=![],lastCoinsToBalance='',exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x5dc,balanceUpdateRetries=0x5;let enableFiatToggle;const serverversion=require('./version.json')['version'],environment=require('./version.json')[_0x3ab734(0x24f)]||_0x3ab734(0x1ab),botID=process[_0x3ab734(0x1f7)][0x2]||_0x3ab734(0x144),pattern=/^[0-9]{3}$/;!pattern[_0x3ab734(0x18c)](botID)&&(console[_0x3ab734(0x2b6)](_0x3ab734(0x219)+botID+_0x3ab734(0x1aa)),killBot());const userID=process[_0x3ab734(0x1f7)][0x3]||'',configpath=userID?_0x3ab734(0x212)+userID+'/':_0x3ab734(0x212),logspath=userID?'./logs/'+userID+'/':_0x3ab734(0x24a),loggerfile=fs[_0x3ab734(0x148)](logspath+_0x3ab734(0x20d),{'flags':'a'});!fs[_0x3ab734(0x299)](configpath)&&fs[_0x3ab734(0x20c)](configpath);!fs['existsSync'](logspath)&&fs['mkdirSync'](logspath);const configfile=configpath+'bot-'+botID+_0x3ab734(0x1c2),logfile=configpath+_0x3ab734(0x30c)+botID+_0x3ab734(0x159),performancefile=configpath+_0x3ab734(0x30c)+botID+'-performance.json',coinresultsfile=configpath+'bot-'+botID+_0x3ab734(0x27a),settingsfile=configpath+_0x3ab734(0x258),securefile=configpath+_0x3ab734(0x1ec),configbackuppath=configpath+_0x3ab734(0x1de),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x3ab734(0x1af)]({'logs':[],'version':serverversion})['write']();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x3ab734(0x1af)]({'data':[],'version':serverversion})[_0x3ab734(0x27f)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x3ab734(0x1af)]({'bot':[],'version':serverversion})[_0x3ab734(0x27f)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x3ab734(0x1af)]({'coins':{},'version':serverversion})[_0x3ab734(0x27f)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0,settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x1be222=>{const _0x267e7d=_0x3ab734;console[_0x267e7d(0x2b6)](_0x1be222);},'simple':_0x47f177=>{const _0x45cfbe=_0x3ab734;console[_0x45cfbe(0x2b6)](_0x47f177),loggerfile[_0x45cfbe(0x27f)](util[_0x45cfbe(0x249)](_0x47f177)+'\x0a');},'full':async(_0x4df661,_0x51b0e9='')=>{const _0x114d71=_0x3ab734;let _0x164350;if(config['showname'])_0x164350=getTimeStamp()+':\x20'+config[_0x114d71(0x198)]+'\x20>\x20'+_0x4df661;else _0x164350=getTimeStamp()+_0x114d71(0x23a)+botID+'\x20>\x20'+_0x4df661;console[_0x114d71(0x2b6)](_0x164350),loggerfile[_0x114d71(0x27f)](util[_0x114d71(0x249)](_0x164350)+'\x0a'),_0x51b0e9&&(console[_0x114d71(0x2b6)](_0x51b0e9),loggerfile['write'](util[_0x114d71(0x249)](_0x51b0e9)+'\x0a'));},'debug':async(_0x22a0d2,_0x378049='')=>{const _0x31cc1a=_0x3ab734;let _0x2bcc0b;if(config[_0x31cc1a(0x30e)])_0x2bcc0b=getTimeStamp()+':\x20'+config[_0x31cc1a(0x198)]+'\x20>\x20[DEBUG]\x20'+_0x22a0d2;else _0x2bcc0b=getTimeStamp()+_0x31cc1a(0x23a)+botID+'\x20>\x20[DEBUG]\x20'+_0x22a0d2;if(debugging)console[_0x31cc1a(0x2b6)](_0x2bcc0b);loggerfile[_0x31cc1a(0x27f)](util['format'](_0x2bcc0b)+'\x0a');if(_0x378049){if(debugging)console['log'](_0x378049);loggerfile[_0x31cc1a(0x27f)](util[_0x31cc1a(0x249)](_0x378049)+'\x0a');}}};process['on'](_0x3ab734(0x16b),function(_0x54ca6a){const _0x2601b1=_0x3ab734;handleError(_0x54ca6a[_0x2601b1(0x1eb)],'uncaughtException');});settings[_0x3ab734(0x24b)]!=config[_0x3ab734(0x24b)]&&updateTimeshift(settings['timeshift']);settings[_0x3ab734(0x168)]!=config['onepagemode']&&updateOnepagemode(settings[_0x3ab734(0x168)]);(settings['marketcapApi']&&!config[_0x3ab734(0x23c)]||!settings[_0x3ab734(0x23c)]&&config[_0x3ab734(0x23c)])&&updateMarketcapApi(settings[_0x3ab734(0x23c)]);process[_0x3ab734(0x2fb)]({'started':_0x3ab734(0x283)},_0x4a62c9=>{}),initializeProcessListeners();function proxyEmit(_0x28d7a6,_0x59bbd0=null){const _0x571cc7=_0x3ab734;process[_0x571cc7(0x2fb)]({'function':_0x28d7a6,'args':_0x59bbd0},_0x25665b=>{});}function initializeProcessListeners(){const _0x1009c4=_0x3ab734;process['on'](_0x1009c4(0x2da),_0xaacc4=>{const _0x4a64be=_0x1009c4;switch(Object[_0x4a64be(0x1f6)](_0xaacc4)[0x0]){case _0x4a64be(0x24b):_0xaacc4['timeshift']!=undefined&&(settings[_0x4a64be(0x24b)]=_0xaacc4[_0x4a64be(0x24b)],updateTimeshift(settings[_0x4a64be(0x24b)]));break;case _0x4a64be(0x168):_0xaacc4[_0x4a64be(0x168)]!=undefined&&(settings[_0x4a64be(0x168)]=_0xaacc4[_0x4a64be(0x168)],updateOnepagemode(settings[_0x4a64be(0x168)]));break;case'marketcapApi':_0xaacc4[_0x4a64be(0x23c)]!=undefined&&(settings['marketcapApi']=_0xaacc4[_0x4a64be(0x23c)],updateMarketcapApi(settings['marketcapApi']));break;case _0x4a64be(0x303):_0xaacc4[_0x4a64be(0x303)]!=undefined&&(bots=JSON['parse'](_0xaacc4[_0x4a64be(0x303)]),proxyEmit(_0x4a64be(0x303),bots));break;case _0x4a64be(0x1c3):switch(_0xaacc4['function']){case _0x4a64be(0x138):initclient();break;case _0x4a64be(0x26c):toggleBotMode();break;case _0x4a64be(0x1bb):emitHistory(_0xaacc4[_0x4a64be(0x30d)]);break;case _0x4a64be(0x269):deleteHistoryAlerts(_0xaacc4['args']);break;case _0x4a64be(0x16f):getPortfolio(_0xaacc4[_0x4a64be(0x30d)]);break;case _0x4a64be(0x203):storeConfiguration(_0xaacc4[_0x4a64be(0x30d)]);break;case _0x4a64be(0x2d2):storeHeadless(_0xaacc4[_0x4a64be(0x30d)]);break;case _0x4a64be(0x312):storeFiat(_0xaacc4[_0x4a64be(0x30d)]);break;case _0x4a64be(0x2d4):resetHistory();break;case'getStartingBalances':getStartingBalances(getNormalizedPerformance());break;case'placeOrder':placeOrder(_0xaacc4[_0x4a64be(0x30d)]);break;case'cancelLoading':cancelLoading();break;case _0x4a64be(0x18d):showConfig();break;case _0x4a64be(0x25c):sendMetricsTelegram();break;case _0x4a64be(0x17f):sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x5f3805=![]){const _0x4c66a7=_0x3ab734;logger['debug'](_0x4c66a7(0x1b2)+(_0x5f3805?_0x4c66a7(0x293):_0x4c66a7(0x1ba))+_0x4c66a7(0x298)+config[_0x4c66a7(0x16a)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x5f3805)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x4c66a7(0x1d4)]!=''&&config['apiKey']!=_0x4c66a7(0x2ac)){loadingProgress=0x0;if(_0x5f3805){await initExchange();const _0x1d4ec5=await testAPI();if(!_0x1d4ec5)return;await loadSymbols(),loadingProgress=0x1,setStableCoins(),proxyEmit('configuration',emittedConfiguration()),initialPerformanceStored=![];}const _0x55ad5a=await getCoins();[currentCoins,currentCoinsAll]=_0x55ad5a,setBlockTransactionDetection(![]),startScheduler(),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x4c66a7(0x28f)](_0x4c66a7(0x251)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x4c66a7(0x179)]==0x0&&allOpenOrders['length']!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(pnlGenerationNeeded)await generatePnL();}}async function resumeBot(_0x4a5445=![]){const _0xfaf245=_0x3ab734;logger[_0xfaf245(0x28f)](_0xfaf245(0x1f5)+(_0x4a5445?_0xfaf245(0x157):_0xfaf245(0x28d))+_0xfaf245(0x26a)+config[_0xfaf245(0x16a)]);if(pidBalances)clearTimeout(pidBalances);if(_0x4a5445){getBalances();return;}coinsLoaded=![];if(config[_0xfaf245(0x1d4)]!=''&&config[_0xfaf245(0x1d4)]!=_0xfaf245(0x2ac)){loadingProgress=0x1;const _0x6f76e8=await getCoins();[currentCoins,currentCoinsAll]=_0x6f76e8,setBlockTransactionDetection(![]),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0xfaf245(0x28f)](_0xfaf245(0x251)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0xfaf245(0x179)]==0x0&&allOpenOrders[_0xfaf245(0x179)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();}}async function getMarketCap(_0x523ac4){const _0x5aa829=_0x3ab734;let _0x298454=![];if(_0x523ac4)_0x298454=!![];let _0x472e4c;_0x298454?_0x472e4c=_0x523ac4[_0x5aa829(0x314)](_0x2827ec=>_0x2827ec['coin']):_0x472e4c=currentCoinsAll[_0x5aa829(0x314)](_0x46d1f6=>_0x46d1f6[_0x5aa829(0x1e4)]);if(!config[_0x5aa829(0x23c)]||!_0x298454&&!config[_0x5aa829(0x1ae)]||_0x472e4c[_0x5aa829(0x179)]==0x0)return;let _0x3914b6=null;try{_0x3914b6=await axios['get']('https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest',{'headers':{'X-CMC_PRO_API_KEY':settings['marketcapApi']},'params':{'symbol':_0x472e4c[_0x5aa829(0x274)]()}});}catch(_0xb0a3eb){_0x3914b6=null,_0xb0a3eb[_0x5aa829(0x274)]()[_0x5aa829(0x2e0)](_0x5aa829(0x20a))?(config[_0x5aa829(0x23c)]=![],updateConfig(),proxyEmit(_0x5aa829(0x1d1),emittedConfiguration()),logHistory(_0x5aa829(0x256),_0x5aa829(0x2e3))):(logHistory(_0x5aa829(0x256),_0x5aa829(0x1f4)+schedulerInterval/(0x3c*0x3e8)+_0x5aa829(0x202)),logger[_0x5aa829(0x28f)](_0x5aa829(0x2b7),_0xb0a3eb[_0x5aa829(0x274)]()+_0x5aa829(0x146)+_0xb0a3eb[_0x5aa829(0x17c)]));}if(_0x3914b6){let _0x39c886=0x0;const _0x5d893f=_0x3914b6['data'];_0x472e4c[_0x5aa829(0x1a4)](_0x4929e6=>{const _0x5778b=_0x5aa829;if(_0x5d893f[_0x5778b(0x286)][_0x4929e6][0x0])_0x39c886+=_0x5d893f[_0x5778b(0x286)][_0x4929e6][0x0][_0x5778b(0x1c0)]['USD'][_0x5778b(0x1cf)];}),_0x472e4c[_0x5aa829(0x1a4)](_0x383ec8=>{const _0x183abe=_0x5aa829,_0x4c3d75=_0x5d893f[_0x183abe(0x286)][_0x383ec8][0x0]?_0x5d893f[_0x183abe(0x286)][_0x383ec8][0x0][_0x183abe(0x1c0)][_0x183abe(0x2b5)]['market_cap']:0x0;if(_0x298454){const _0x57d244=_0x523ac4[_0x183abe(0x191)](_0x1264b2=>_0x1264b2['coin']==_0x383ec8);_0x57d244&&(_0x57d244['marketcap']=_0x4c3d75);}else{const _0x372905=currentCoins[_0x183abe(0x191)](_0x372434=>_0x372434[_0x183abe(0x1e4)]==_0x383ec8);_0x372905&&(_0x372905['marketcap']=_0x4c3d75);const _0x372559=currentCoinsAll[_0x183abe(0x191)](_0x2ab357=>_0x2ab357[_0x183abe(0x1e4)]==_0x383ec8);_0x372559&&(_0x372559[_0x183abe(0x13b)]=_0x4c3d75);}}),!_0x298454&&updateTargetDistribution();}}function updateTargetDistribution(){const _0x590be8=_0x3ab734,_0xaa0715=0x2;let _0xbe3e10=0x0,_0x3ba73a=0x0,_0x42f07b=0x0,_0x3e6747=0x0,_0x2836ad=0x0;config[_0x590be8(0x183)][_0x590be8(0x1a4)](_0x217472=>{const _0x392b21=_0x590be8;if(!_0x217472[_0x392b21(0x2c3)]){_0x42f07b++,_0xbe3e10+=_0x217472['slider'];if(_0x217472['slider']===-0x1){_0xbe3e10++;const _0x50ed2d=currentCoinsAll[_0x392b21(0x191)](_0x20ba97=>_0x20ba97[_0x392b21(0x1e4)]==_0x217472[_0x392b21(0x1e4)]);_0x50ed2d&&(_0x3e6747+=_0x50ed2d['marketcap'],_0x2836ad+=Math['sqrt'](_0x50ed2d['marketcap']));}if(_0x217472['slider']!==-0x1)_0x3ba73a++;}});let _0x535ee9;const _0x5b8cc9=0x64-_0xbe3e10,_0x1e2a48=_0x42f07b-_0x3ba73a;_0x535ee9=_0x1e2a48===0x0?_0xbe3e10:Math[_0x590be8(0x1c6)](0x64,_0xbe3e10),config[_0x590be8(0x183)][_0x590be8(0x1a4)](_0x3ca0dc=>{const _0x5f4f56=_0x590be8,_0x1158fe=currentCoinsAll[_0x5f4f56(0x191)](_0x1eddb1=>_0x1eddb1['coin']==_0x3ca0dc[_0x5f4f56(0x1e4)]);_0x1158fe&&(_0x3ca0dc[_0x5f4f56(0x13b)]=_0x1158fe[_0x5f4f56(0x13b)]);if(!_0x3ca0dc[_0x5f4f56(0x2c3)]){if(_0x535ee9<=0x64){if(_0x3ca0dc[_0x5f4f56(0x13c)]===-0x1){if(_0x3e6747!==0x0&&config[_0x5f4f56(0x1ae)]){if(_0x1158fe){if(config[_0x5f4f56(0x1ae)]=='marketcap')_0x3ca0dc[_0x5f4f56(0x225)]=(_0x5b8cc9/(_0x3e6747/_0x1158fe[_0x5f4f56(0x13b)]))['toFixed'](_0xaa0715);else config[_0x5f4f56(0x1ae)]==_0x5f4f56(0x2cd)&&(_0x3ca0dc[_0x5f4f56(0x225)]=(_0x5b8cc9/(_0x2836ad/Math[_0x5f4f56(0x29d)](_0x1158fe[_0x5f4f56(0x13b)])))[_0x5f4f56(0x27e)](_0xaa0715));}}}}}}),updateConfig();}function updateConfig(){const _0x1aeeb8=_0x3ab734;let _0x171046=dbConfig[_0x1aeeb8(0x315)]('bot')[_0x1aeeb8(0x191)]({'botID':botID})[_0x1aeeb8(0x208)]();_0x171046&&dbConfig[_0x1aeeb8(0x315)](_0x1aeeb8(0x18f))[_0x1aeeb8(0x191)]({'botID':botID})[_0x1aeeb8(0x13d)](config)[_0x1aeeb8(0x27f)]();}function logMemory(){const _0x30f292=_0x3ab734;if(environment!=_0x30f292(0x22f))return;const _0x116f30=process['memoryUsage']()['heapUsed']/0x400/0x400;logger[_0x30f292(0x28f)](_0x30f292(0x2b8)+process[_0x30f292(0x1a6)]+_0x30f292(0x22d)+formatResult(_0x116f30,0x1)+'\x20MB');}async function startScheduler(){const _0x301c69=_0x3ab734,_0x246332=shiftedTime()[_0x301c69(0x19c)]();getMarketCap(),loadSymbols(),_0x246332==0x1&&logMemory(),await sleep(schedulerInterval),startScheduler();}async function restartBot(_0x377a4c=![]){const _0x144a5b=_0x3ab734;logger[_0x144a5b(0x28f)](_0x144a5b(0x187));if(!_0x377a4c)while(lockOrders!=ORDERS[_0x144a5b(0x150)]||coolingDown){await sleep(0x3e8);}process['send']({'stop':_0x144a5b(0x2e2)},_0x1ea924=>{});}async function initExchange(_0x375f0f=config[_0x3ab734(0x16a)],_0x1bf162=config[_0x3ab734(0x1d4)],_0x54b317=config[_0x3ab734(0x1d5)],_0x417665=config[_0x3ab734(0x18b)],_0x5edfe4=config['sandbox']){const _0x1ceb8d=_0x3ab734;if(exchange){logger[_0x1ceb8d(0x28f)](_0x1ceb8d(0x1fe));return;}logger['debug'](_0x1ceb8d(0x154));!supportedExchanges()['includes'](_0x375f0f)&&(logHistory(_0x1ceb8d(0x256),_0x1ceb8d(0x2b2)+_0x375f0f+_0x1ceb8d(0x2f2)),killBot());const _0x482dc9=ccxt[_0x1ceb8d(0x305)][_0x375f0f[_0x1ceb8d(0x1c4)]()];exchange=new _0x482dc9({'apiKey':_0x1bf162,'secret':_0x54b317,'options':{'defaultType':_0x1ceb8d(0x2fc)}});if(_0x417665)exchange['password']=_0x417665;if(exchange[_0x1ceb8d(0x311)][_0x1ceb8d(0x2c5)])exchange[_0x1ceb8d(0x309)](_0x5edfe4);}function updateExchange(_0x50edca,_0x34869a,_0x3cc668=null){const _0x36cc0c=_0x3ab734;exchange['apiKey']=_0x50edca,exchange[_0x36cc0c(0x2b1)]=_0x34869a,exchange[_0x36cc0c(0x270)]=_0x3cc668,logger[_0x36cc0c(0x28f)]('Updating\x20API\x20key\x20(not\x20saved\x20in\x20config\x20file\x20yet)');}function setStableCoins(){const _0x43876f=_0x3ab734;let _0x6f75a8=config[_0x43876f(0x26f)]=='ETH'?_0x43876f(0x2f8):config[_0x43876f(0x26f)]=='PAXG'?_0x43876f(0x2ef):_0x43876f(0x237),_0x542d09=allSymbols['includes'](_0x6f75a8+'/USD')?_0x43876f(0x2b5):allSymbols['includes'](_0x6f75a8+_0x43876f(0x273))?_0x43876f(0x24c):_0x43876f(0x15c),_0x2b79b8=allSymbols[_0x43876f(0x2e0)](_0x6f75a8+_0x43876f(0x1dd))?_0x43876f(0x15c):_0x542d09;enableFiatToggle=!![],_0x542d09==_0x43876f(0x15c)&&(enableFiatToggle=![],storeFiat('EUR')),_0x2b79b8!=_0x43876f(0x15c)&&(enableFiatToggle=![],storeFiat(_0x43876f(0x2b5))),stablecoins={'eur':{'coin':''+_0x6f75a8+_0x2b79b8,'symbol':_0x6f75a8+'/'+_0x2b79b8},'usd':{'coin':''+_0x6f75a8+_0x542d09,'symbol':_0x6f75a8+'/'+_0x542d09}};}async function initwsCcxt(){const _0x23d35d=_0x3ab734;initCycle++;const _0x151164=initCycle;let _0x4cc55c=[];config[_0x23d35d(0x183)]['forEach'](_0x5332da=>{const _0x4aaf0d=_0x23d35d;if(!_0x5332da['excluded']&&_0x5332da[_0x4aaf0d(0x1e4)]!=config[_0x4aaf0d(0x26f)])_0x4cc55c['push'](_0x5332da[_0x4aaf0d(0x141)]);});if(!_0x4cc55c['includes'](stablecoins['eur'][_0x23d35d(0x141)]))_0x4cc55c['push'](stablecoins[_0x23d35d(0x153)][_0x23d35d(0x141)]);if(!_0x4cc55c['includes'](stablecoins[_0x23d35d(0x275)][_0x23d35d(0x141)]))_0x4cc55c[_0x23d35d(0x2fe)](stablecoins[_0x23d35d(0x275)][_0x23d35d(0x141)]);loadCoins(_0x4cc55c),_0x4cc55c=validateSymbols(_0x4cc55c);const _0x599743=async _0x2b2ef6=>{const _0x2881b6=_0x23d35d;let _0x15e372;try{const _0x24b5df=await getTickers(_0x2b2ef6);Object[_0x2881b6(0x1f0)](_0x24b5df)[_0x2881b6(0x1a4)](_0x3c2d58=>{const _0x1d5fad=_0x2881b6;_0x15e372=_0x3c2d58[0x1][_0x1d5fad(0x141)],gTicker[noslash(_0x15e372)]=_0x3c2d58[0x1][_0x1d5fad(0x1bc)],gChange[_0x15e372]=_0x3c2d58[0x1][_0x1d5fad(0x264)];});}catch(_0x5a565d){await handleError(_0x5a565d,'initTickers()',_0x15e372);}},_0x3de908=async _0x2ca1dd=>{const _0xc5779b=_0x23d35d;while(initCycle==_0x151164){if(!botPaused)try{const _0x5275a0=await exchange[_0xc5779b(0x1d8)](_0x2ca1dd);gTicker[noslash(_0x5275a0[0x0][_0xc5779b(0x141)])]=_0x5275a0[0x0]['price'];}catch(_0x5354d7){if(!exchangeStopped)await handleError(_0x5354d7,_0xc5779b(0x17d),_0x2ca1dd);}else await sleep(0x64);}},_0x2b607e=async _0x15f8ba=>{const _0xd944c=_0x23d35d;while(initCycle==_0x151164){if(!botPaused)try{const _0x22467e=await exchange['watchTradesForSymbols'](_0x15f8ba),_0x52061f=_0x22467e[_0xd944c(0x19e)]();gTicker[noslash(_0x52061f['symbol'])]=_0x52061f[_0xd944c(0x14d)];}catch(_0xe7b01a){if(!exchangeStopped)await handleError(_0xe7b01a,'watchTradesForSymbols()',_0x15f8ba[_0xd944c(0x274)]());}else await sleep(0x64);}},_0x213b97=async _0x3b2408=>{const _0xb9962=_0x23d35d;while(initCycle==_0x151164){if(!botPaused){let _0x388265;try{await sleep(0x3c*0x3e8);const _0x194b92=await getTickers(_0x3b2408);Object['entries'](_0x194b92)[_0xb9962(0x1a4)](_0x2ef124=>{const _0x4379d3=_0xb9962;_0x388265=_0x2ef124[0x1][_0x4379d3(0x141)],gChange[_0x388265]=_0x2ef124[0x1]['percentage'];});}catch(_0x11e913){if(!exchangeStopped)await handleError(_0x11e913,_0xb9962(0x296),_0x388265);}}else await sleep(0x64);}},_0x210337=async _0x3e398e=>{const _0x1d4cda=_0x23d35d;while(initCycle==_0x151164){if(!botPaused)try{const _0x156ef5=await exchange['watchOrders'](_0x3e398e);initCycle==_0x151164&&_0x156ef5['forEach'](_0x55376f=>{updateNumberCoinsCcxt(_0x55376f);});}catch(_0x184177){if(!exchangeStopped)await handleError(_0x184177,_0x1d4cda(0x2d1));}else await sleep(0x64);}};_0x599743(_0x4cc55c),_0x213b97(_0x4cc55c),exchange['has'][_0x23d35d(0x2a8)]&&!(config[_0x23d35d(0x16a)]==_0x23d35d(0x2bb)&&_0x4cc55c[_0x23d35d(0x179)]>0xa)?_0x2b607e(_0x4cc55c):_0x4cc55c[_0x23d35d(0x1a4)](_0x25d40d=>{_0x3de908(_0x25d40d);}),_0x4cc55c['forEach'](_0x40c63b=>{_0x210337(_0x40c63b);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x47748d){const _0x335c06=_0x3ab734;let _0x3a48be={};try{if(config['exchange']!='Cryptocom')_0x3a48be=await exchange[_0x335c06(0x15d)](_0x47748d);else for(const _0x43fd3f of _0x47748d){const _0x339cee=await exchange[_0x335c06(0x23d)](_0x43fd3f);_0x3a48be[_0x43fd3f]=_0x339cee;}return _0x3a48be;}catch(_0x5cf804){throw _0x5cf804;}}function _0x41cd(){const _0x28d1ae=['string','Bitget','error','\x20API\x20key,\x20secret\x20or\x20password\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','bb-settings.json','OnMaintenance','shift','splice','sendMetricsTelegram','\x20not\x20available\x20(see:\x20hodlerhacks.com/fix/5)','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','Value\x20','InvalidNonce','botID','loading-canceled','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','percentage','round','path','open','logs','deleteHistoryAlerts',')\x20|\x20exchange:\x20','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','toggleBotMode','4938990RcvhRq','\x20>\x20details:','basecoin','password','api-issue','success','/USDT','toString','usd','target','decode64','1413396LiHQIM','\x20metrics:</b>\x20\x0a\x0a','-results.json','net-basecoin','emojisell','event','toFixed','write','\x20hour','2.7.1','Error\x20occurred:\x20','running','split','\x0aSymbol(s):\x20','data','configuration-stored','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','threshold','customId','%)\x0a','colorscheme','complete','ongoing','debug','%\x20(','\x20minutes\x20-\x20','fee','exchange\x20reload','getFullYear','highest','fetchTickers()','toUpperCase','\x20|\x20exchange:\x20','existsSync','differenceInSeconds','Headless:\x20','limits','sqrt','settings','order','getTime','\x20API\x20key\x20is\x20invalid','1\x20-\x20FILLED\x20known\x20order:\x20','match','timestamp-issue','Generating\x20PnL\x20data','progress','trade','watchTradesForSymbols','currency','constructor','Cooldown\x20ended\x20-\x20balancing\x20resumed','***','Invalid\x20symbol:\x20','change24h','limit','replace','secret','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','prevnumber','enableFiatToggle','USD','log','Error\x20details:','process\x20','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','date-fns','Bybit','\x20>\x20pausing\x20bot\x20for\x20','lowdb/adapters/FileSync','API-key\x20format\x20invalid','total','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','coin-loading-progress','2.6.0','excluded','getMonth','sandbox','cost','starting-balance-','placeOrder()','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','<b>Bot\x20','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','watchOrders','marketcapsqrt','sha256','Trigger:\x20','cloneDeep','watchOrders()','storeHeadless','USDP','resetHistory','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','update-liquidity','-performance.json','Unknown\x20error:\x20','no\x20open\x20orders','message','\x20closed\x20the\x20connection\x20(see:\x20hodlerhacks.com/fix/5)','\x20-\x20bot\x20not\x20started','performance','enabled','initial','includes','RSA-OAEP','restart','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','util','reverse','Order(s)\x20not\x20validated\x20after\x20','Portfolio\x20change\x20detected:\x20','canceled','1416ynGBFj','\x20blocked\x20API\x20(DDoSProtection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','testApi','2.6.23','<b>','Block\x20transaction\x20detection:\x20','PAXG','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','timeout','\x20exchange','cancelOrder','addDays','number','UNLOCKING','parse','ETH','delta','Network\x20error\x20details:','send','spot','171IeSnoW','push','isEqual','startnumber','AuthenticationError','Portfolio\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','bots','Limit\x20(low-margin)','pro','balancing\x20resumed','ExchangeError','ID:\x20','setSandboxMode',')\x20unknown\x20order:\x20','yyyy/MM/dd','bot-','args','showname','orderId','Stopped\x20fetching\x20balance\x20after\x20','has','storeFiat','slice','map','get','Net\x20','filter','OrderNotFound','recent20','initclient','emojibuy','amount','marketcap','slider','assign','must\x20be\x20greater\x20than\x20minimum\x20amount','NetworkError','active','symbol','portfolio1','privateKey','001','Resetting\x20bot\x20history','\x20-\x20','request-time','createWriteStream','secure','Pausing\x20for\x20','\x20API\x20secret\x20is\x20invalid','filled','price','net-fiat','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','UNLOCKED','************','yargs/yargs','eur','Initializing\x20exchange','changes','orderstatus','quick','privateKeyFromPem','-events.json','detectLiquidityChange()','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','EUR','fetchTickers','Market','warning','removed','sell','getSeconds','liquidity','writeFile','side','Order\x20is\x20invalid:\x20','add','onepagemode','create','exchange','uncaughtException','Unknown\x20error\x20-\x20check\x20logs','Test\x20new\x20API','Error\x20in\x20testNewAPI():\x20','getPortfolio',')\x20known\x20order:\x20','status','buy','event-history','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','2.3.5','ccxt','startprice','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','length','configstate','closed','code','watchTrades()','\x20-\x20bot\x20switched\x20to\x20manual\x20mode','sendPortfolioTelegram','Fee\x20discount\x20refund\x20detected:\x20','realizedPnL','abs','portfolio','fetchBalance','Error\x20in\x20loadSymbols():\x20','limit-low','Initiating\x20bot\x20restart','remove','2\x20-\x20handling\x20FILLED\x20order:\x20','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','apiPassword','test','showConfig','2\x20-\x20Handled\x20open\x20orders','bot','bid','find','cooldown','added','node-forge','token\x20is\x20expired','change','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','botname','sells','\x20not\x20responding\x20(see:\x20hodlerhacks.com/fix/5)','Failed\x20to\x20load\x20coin\x20data\x20for\x20','getHours','Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)','pop','<pre>','sortBy','bitmex','BUSD','getMinutes','forEach','Exchange\x20permission\x20denied\x20-\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','pid','ask','final','Valid\x20balance\x20for\x20',',\x20must\x20be\x20a\x203\x20digit\x20number','production','balances','132037VsDUaj','marketcapEnabled','defaults','breakeven','MIN_NOTIONAL','Reset\x20|\x20','Placing\x20order\x20for:\x20','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)','createOrder','page','net','getDate','Manual\x20balancing\x20required','no\x20exchange\x20reloaded','emitHistory','last','4991112LXAdUz','Set\x20lock\x20orders\x20to:\x20','red_yellow_blue','quote','indexOf','-config.json','function','toLowerCase','LOCKED','max','fromCodePoint','limit-high','recovery','1917npRfNj','RETRY\x20-\x20Problem\x20resolved\x20after\x20','set','1\x20-\x20Validate\x20orders:\x20','type','market_cap','</pre>','configuration','\x20has\x20a\x2024h\x20drop\x20of\x20','\x20-\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','apiKey','apiSecret','search','Invalid\x20balance\x20for\x20','watchTrades','cancel','date','-------------------------------\x0a','padEnd','/EUR','/backup/','version','fetchBalance()','none','USDC','portfolio2','coin','No\x20more\x20open\x20orders\x20-\x20','netoffset','getOpenOrders()','Order\x20filled:\x20','Generated\x20PnL\x20data','pnl-basecoin','stack','bb-secure.json','lowdb','substring','time','entries','remainingSymbols','128088YlZhyR','2.6.22','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20trying\x20again\x20in\x20','Resuming\x20(','keys','argv','fiat','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','offset','stringify','floor','pnl','Initializing\x20exchange:\x20already\x20done','full','\x20/\x20','pnl-fiat','\x20minutes','storeConfiguration','join','1155380QUqOUS','loadSymbols()','Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute','value','Huobipro','status\x20code\x20401','coins','mkdirSync','/output-000.log','Exchange','min','ordertype','(((.+)+)+)+$','./config/','cancelOrders()','\x20-\x20bot\x20already\x20running\x20in\x20manual\x20mode','InsufficientFunds','decrypt','basecoinvalue','\x20orders\x20in\x20less\x20than\x20','Error:\x20Invalid\x20argument\x20','timestamp','valid','InvalidOrder','\x20exchange\x20error:\x20','average','PnL\x20','starting-balances','\x20blocked\x20API\x20(RateLimitExceeded)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','unlinkSync','\x20|\x20','padStart','distribution','autoliquidity','1\x20-\x20Handle\x20open\x20orders','isBefore',':\x20timer\x20>','sort','startdate','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','\x20uses\x20','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','staging','Invalid\x20API\x20details,\x20please\x20try\x20again\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','DDoSProtection','\x20|\x20highest\x20fee:\x20','\x20portfolio:</b>\x20\x0a\x0a','headless','switch-manual','exchanges','BTC','balancing\x20resumes\x20when\x20cooldown\x20ends','amountToPrecision',':\x20Bot\x20','fetchOpenOrders','marketcapApi','fetchTicker','Resetting\x20coin\x20results:\x20','0\x20-\x20EXECUTION:\x20','Executed\x20','Cex','RETRY\x20-\x20Error\x20in\x20','PermissionDenied','Exception\x20thrown\x20in\x20','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','market','pki','Unfilled\x20order(s)\x20canceled\x20after\x20','format','./logs/','timeshift','USDT','6KayyaA','\x20network\x20error:\x20','environment','\x20(see:\x20hodlerhacks.com/fix/1)','Loading\x20completed','1\x20-\x20partially\x20FILLED\x20(','Order\x20filled'];_0x41cd=function(){return _0x28d1ae;};return _0x41cd();}function setBlockTransactionDetection(_0x3bd8bb){const _0xaf9e8d=_0x3ab734;blockTransactionDetection=_0x3bd8bb,logger[_0xaf9e8d(0x28f)](_0xaf9e8d(0x2ee)+blockTransactionDetection);}async function detectLiquidityChange(_0x115c81=0x0){const _0x2be504=_0x3ab734;transactionDetectionOngoing=!![];try{const _0x48d765=await getCoins(_0x115c81),[_0x27ee4f,_0x4503d4]=_0x48d765;let _0x4c81a1=[];currentCoins[_0x2be504(0x1a4)](_0x369be2=>{const _0x247783=_0x2be504,_0x125214=_0x27ee4f[_0x247783(0x191)](_0x369e56=>_0x369e56[_0x247783(0x1e4)]==_0x369be2[_0x247783(0x1e4)]);if(_0x125214){if(_0x369be2['number']!=_0x125214[_0x247783(0x2f5)]){let _0x2fd955;if(_0x369be2[_0x247783(0x1e4)]!=config[_0x247783(0x26f)]){const _0x3f6b35=gTicker[noslash(_0x369be2[_0x247783(0x141)])];_0x2fd955=_0x369be2['reverse']?0x1/_0x3f6b35:_0x3f6b35;}else _0x2fd955=0x1;_0x4c81a1[_0x247783(0x2fe)]({'coin':_0x369be2[_0x247783(0x1e4)],'symbol':_0x369be2[_0x247783(0x141)],'price':_0x2fd955,'number':Number(formatResult(_0x125214[_0x247783(0x2f5)]-_0x369be2[_0x247783(0x2f5)],0x8)),'basecoinvalue':_0x2fd955*(_0x125214[_0x247783(0x2f5)]-_0x369be2['number'])});}}});if(_0x4c81a1['length']>0x0&&!blockTransactionDetection){for(const _0x2b2940 of _0x4c81a1){if(config[_0x2be504(0x226)]){logger[_0x2be504(0x28f)]('Liquidity\x20change\x20|\x20basecoin\x20value:\x20'+_0x2b2940[_0x2be504(0x217)]+_0x2be504(0x232)+lastFees[_0x2be504(0x295)]);if(lastFees['highest']==0x0||Math[_0x2be504(0x182)](_0x2b2940[_0x2be504(0x217)])>lastFees[_0x2be504(0x295)]*0x3){if(config['autoliquidity']=='update-liquidity'){delete _0x2b2940['symbol'],delete _0x2b2940['basecoinvalue'];let _0x9673da=[],_0x3acdf9=[...config[_0x2be504(0x163)]]||[],_0xa94565=config[_0x2be504(0x163)];_0x3acdf9[_0x2be504(0x22a)]((_0x471836,_0x28f5dc)=>_0x471836[_0x2be504(0x1da)]>_0x28f5dc['date']?-0x1:_0x28f5dc[_0x2be504(0x1da)]>_0x471836[_0x2be504(0x1da)]?0x1:0x0);const _0x3b778b=getDate();if(_0x3acdf9[0x0]){const _0x1a3a30=fns[_0x2be504(0x2f7)](_0x3acdf9[0x0][_0x2be504(0x1da)],_0x2be504(0x30b),new Date()),_0x3a67df=fns[_0x2be504(0x2f7)](_0x3b778b,'yyyy/MM/dd',new Date());if(fns[_0x2be504(0x2ff)](_0x1a3a30,_0x3a67df)){_0x9673da=_0x3acdf9[0x0][_0x2be504(0x155)];const _0x18e08b=_0x9673da[_0x2be504(0x191)](_0x32a580=>_0x32a580[_0x2be504(0x1e4)]==_0x2b2940[_0x2be504(0x1e4)]);_0x18e08b?(_0x18e08b['number']+=_0x2b2940[_0x2be504(0x2f5)],_0x18e08b[_0x2be504(0x2f5)]==0x0&&(_0x9673da=_0x9673da[_0x2be504(0x317)](_0x45a43d=>{const _0xada0e9=_0x2be504;return _0x45a43d[_0xada0e9(0x1e4)]!=_0x2b2940[_0xada0e9(0x1e4)];}))):_0x9673da[_0x2be504(0x2fe)](_0x2b2940);const _0x4e2b6f=_0xa94565[_0x2be504(0x191)](_0xc04efc=>_0xc04efc[_0x2be504(0x1da)]==_0x3b778b);_0x4e2b6f[_0x2be504(0x155)]=_0x9673da;}else _0xa94565[_0x2be504(0x2fe)]({'date':_0x3b778b,'changes':[_0x2b2940]});}const _0x37502b=_0xa94565[_0x2be504(0x191)](_0x2ab0a3=>_0x2ab0a3['date']==_0x3b778b);if(_0x37502b){let _0x4572ac=!![];_0x37502b[_0x2be504(0x155)][_0x2be504(0x1a4)](_0x48e304=>{const _0x5a5b49=_0x2be504;if(_0x48e304[_0x5a5b49(0x2f5)]!=0x0)_0x4572ac=![];}),_0x4572ac&&(_0xa94565=_0xa94565[_0x2be504(0x317)](_0x1bb2e6=>{return _0x1bb2e6['date']!=_0x3b778b;}));}let _0x1716a0=dbConfig[_0x2be504(0x315)](_0x2be504(0x18f))[_0x2be504(0x191)]({'botID':botID})['value']();_0x1716a0&&(dbConfig[_0x2be504(0x315)](_0x2be504(0x18f))[_0x2be504(0x191)]({'botID':botID})[_0x2be504(0x13d)]({'liquidity':_0xa94565})['write'](),config[_0x2be504(0x163)]=_0xa94565);logHistory('success','Portfolio\x20change\x20detected:\x20'+Math[_0x2be504(0x182)](_0x2b2940['number'])+'\x20'+_0x2b2940['coin']+'\x20'+(_0x2b2940[_0x2be504(0x2f5)]>0x0?_0x2be504(0x193):_0x2be504(0x160))+_0x2be504(0x178)),proxyEmit('configuration',emittedConfiguration());const _0x516a7c=getNormalizedPerformance();emitPerformance(_0x516a7c),getStartingBalances(_0x516a7c),logger[_0x2be504(0x28f)](_0x2be504(0x302));}else config[_0x2be504(0x226)]==_0x2be504(0x235)&&(config[_0x2be504(0x234)]?(await storeHeadless({'headless':![]}),logHistory(_0x2be504(0x272),_0x2be504(0x2e7)+Math['abs'](_0x2b2940[_0x2be504(0x2f5)])+'\x20'+_0x2b2940[_0x2be504(0x1e4)]+'\x20'+(_0x2b2940[_0x2be504(0x2f5)]>0x0?_0x2be504(0x193):_0x2be504(0x160))+_0x2be504(0x17e))):logger['debug'](_0x2be504(0x2e7)+Math[_0x2be504(0x182)](_0x2b2940[_0x2be504(0x2f5)])+'\x20'+_0x2b2940[_0x2be504(0x1e4)]+'\x20'+(_0x2b2940[_0x2be504(0x2f5)]>0x0?_0x2be504(0x193):'removed')+_0x2be504(0x214)));}else logger['debug'](_0x2be504(0x180)+Math['abs'](_0x2b2940[_0x2be504(0x2f5)])+'\x20'+_0x2b2940['coin']+'\x20'+(_0x2b2940[_0x2be504(0x2f5)]>0x0?_0x2be504(0x193):_0x2be504(0x160)));}else logger[_0x2be504(0x28f)](_0x2be504(0x2e7)+Math['abs'](_0x2b2940['number'])+'\x20'+_0x2b2940[_0x2be504(0x1e4)]+'\x20'+(_0x2b2940[_0x2be504(0x2f5)]>0x0?_0x2be504(0x193):_0x2be504(0x160))+_0x2be504(0x1d3));}currentCoins=_0x27ee4f,currentCoinsAll=_0x4503d4;}}catch(_0x545a20){if(!exchangeStopped)await handleError(_0x545a20,_0x2be504(0x15a));}transactionDetectionOngoing=![];}async function watchTransactions(){await sleep(0x14*0x3e8);while(!![]){!botPaused&&!blockTransactionDetection&&coinsLoaded?(detectLiquidityChange(),await sleep(watchTransactionsInterval)):await sleep(0x3e8);}}async function loadSymbols(){const _0xfc2c5a=_0x3ab734;try{markets=await exchange['loadMarkets'](!![]),allSymbols=[],Object[_0xfc2c5a(0x1f0)](markets)[_0xfc2c5a(0x1a4)](_0x12bde2=>{const _0x307a58=_0xfc2c5a;_0x12bde2[0x1][_0x307a58(0x140)]&&_0x12bde2[0x1][_0x307a58(0x2fc)]&&allSymbols[_0x307a58(0x2fe)](_0x12bde2[0x0]);});}catch(_0x38ac3b){markets?logger[_0xfc2c5a(0x28f)](_0xfc2c5a(0x185)+_0x38ac3b[_0xfc2c5a(0x274)]()):(loading[_0xfc2c5a(0x1d9)]=!![],_0x38ac3b[_0xfc2c5a(0x274)]()['toLowerCase']()[_0xfc2c5a(0x2e0)]('timestamp')||_0x38ac3b[_0xfc2c5a(0x274)]()[_0xfc2c5a(0x1c4)]()[_0xfc2c5a(0x2e0)]('request-time')?(logHistory(_0xfc2c5a(0x256),_0xfc2c5a(0x19d)),loading[_0xfc2c5a(0x256)]=_0xfc2c5a(0x2a4)):handleErrorNoStop(_0x38ac3b,_0xfc2c5a(0x206),!![]),logHistory(_0xfc2c5a(0x256),'Failed\x20to\x20load\x20market\x20data\x20-\x20bot\x20not\x20started'),logHistory('error',_0xfc2c5a(0x14a)+loadCoinsRetryInterval/0xea60+'\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again'),logger[_0xfc2c5a(0x28f)]('Error\x20details:',_0x38ac3b),emitLoadingProgress(),botPaused=!![],await sleep(loadCoinsRetryInterval),restartBot());}}function validateSymbols(_0x517cf6){let _0x395dfc=[];return _0x517cf6['forEach'](_0x55325b=>{const _0x4c1a45=_0x28e0;!allSymbols[_0x4c1a45(0x2e0)](_0x55325b)?logHistory(_0x4c1a45(0x256),_0x4c1a45(0x2ad)+_0x55325b+_0x4c1a45(0x263)):_0x395dfc[_0x4c1a45(0x2fe)](_0x55325b);}),_0x395dfc;}async function initclient(){const _0x224c31=_0x3ab734;proxyEmit('configuration',emittedConfiguration()),proxyEmit(_0x224c31(0x236),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x10a4ba=getNormalizedPerformance();emitPerformance(_0x10a4ba),getStartingBalances(_0x10a4ba);}async function toggleBotMode(){const _0xb992bc=_0x3ab734;let _0x589e13=dbConfig[_0xb992bc(0x315)](_0xb992bc(0x18f))[_0xb992bc(0x191)]({'botID':botID})[_0xb992bc(0x208)]();if(_0x589e13){const _0x772b43=!_0x589e13[_0xb992bc(0x234)];dbConfig['get'](_0xb992bc(0x18f))['find']({'botID':botID})[_0xb992bc(0x13d)]({'headless':_0x772b43})[_0xb992bc(0x27f)](),config[_0xb992bc(0x234)]=_0x772b43,proxyEmit(_0xb992bc(0x1d1),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x5cb834=_0x3ab734;process[_0x5cb834(0x2fb)]({'updatebotmanager':!![]},_0x4f1885=>{}),logger[_0x5cb834(0x28f)](_0x5cb834(0x29b)+config[_0x5cb834(0x234)]);}async function loadCoins(_0x5de16b){const _0x50bfbc=_0x3ab734;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x30549a,_0x112d57=0x0,_0x55997f=0x0;_0x5de16b[_0x50bfbc(0x1a4)](_0x2ec9ad=>{const _0x4411b0=_0x50bfbc;loading[_0x4411b0(0x1f1)][_0x4411b0(0x2fe)](_0x2ec9ad);}),loadingCanceled=![];let _0x4bfd7c=![];while(_0x30549a!=_0x5de16b[_0x50bfbc(0x179)]+maxLoadingProgress){_0x30549a=loadingProgress,_0x5de16b[_0x50bfbc(0x1a4)](_0x422d06=>{const _0xcdc3be=_0x50bfbc;if(gTicker[noslash(_0x422d06)]){loading[_0xcdc3be(0x1f1)]=loading[_0xcdc3be(0x1f1)]['filter'](_0x2b5c7c=>_0x2b5c7c!=_0x422d06);if(!watchedSymbols[_0xcdc3be(0x2e0)](_0x422d06))watchedSymbols[_0xcdc3be(0x2fe)](_0x422d06);_0x30549a++;}}),loading[_0x50bfbc(0x2a6)]=Math['round'](_0x30549a/(_0x5de16b['length']+maxLoadingProgress)*0x64);loading[_0x50bfbc(0x2a6)]!=0x64&&(_0x55997f>0x1e*0x5&&(loading['timeout']=!![],emitLoadingProgress()),_0x55997f>0x78*0x5&&!_0x4bfd7c&&(_0x4bfd7c=!![],logHistory(_0x50bfbc(0x256),_0x50bfbc(0x19b)+loading[_0x50bfbc(0x1f1)][_0x50bfbc(0x204)](',\x20')+_0x50bfbc(0x2dc)),logHistory(_0x50bfbc(0x256),_0x50bfbc(0x14a)+loadCoinsRetryInterval/0xea60+_0x50bfbc(0x2d5)),loadingCanceled=!![],await sleep(loadCoinsRetryInterval),restartBot()));if(loadingCanceled){loading[_0x50bfbc(0x1d9)]=!![],emitLoadingProgress();break;}else _0x112d57!=loading[_0x50bfbc(0x2a6)]&&(_0x112d57=loading['progress'],emitLoadingProgress()),_0x55997f++,await sleep(0xc8);}_0x30549a==_0x5de16b['length']+maxLoadingProgress&&(coinsLoaded=!![],process['send']({'status':_0x50bfbc(0x2de),'live':_0x50bfbc(0x283)},_0x5523fb=>{}),_0x4bfd7c&&logHistory('success',_0x50bfbc(0x2b9)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x192859=_0x3ab734;proxyEmit(_0x192859(0x1d1),{...emittedConfiguration(),'configstate':_0x192859(0x262)});}function emitLoadingProgress(){const _0x2ea621=_0x3ab734;proxyEmit(_0x2ea621(0x2c1),loading);}async function getFiat(){const _0x86314=_0x3ab734;let _0x22c529=gTicker[stablecoins['eur']['coin']],_0x2c0760=gTicker[stablecoins[_0x86314(0x275)][_0x86314(0x1e4)]];return{'eur':Number(_0x22c529),'usd':Number(_0x2c0760)};}function capitalize(_0x4c414f){const _0x30c186=_0x3ab734;return _0x4c414f[_0x30c186(0x1ee)](0x0,0x1)[_0x30c186(0x297)]()+_0x4c414f[_0x30c186(0x1ee)](0x1);}function supportedExchanges(){const _0x58d787=_0x3ab734,_0x2555f4=['ws',_0x58d787(0x15d),_0x58d787(0x23d),_0x58d787(0x1d8),_0x58d787(0x2cc),_0x58d787(0x2f3),_0x58d787(0x1b5),_0x58d787(0x23b),'fetchBalance'];let _0x55177d=[],_0x4e2474=[],_0x11bc3a=ccxt[_0x58d787(0x305)][_0x58d787(0x236)];_0x11bc3a['forEach'](_0x41a843=>{const _0x37a2ae=_0x58d787;try{const _0x36d233=new ccxt[(_0x37a2ae(0x305))][_0x41a843]();_0x4e2474['push'](_0x36d233);}catch(_0x2ae068){}}),_0x4e2474['forEach'](_0x14b993=>{const _0x17d6e5=_0x58d787;let _0x14a37b=0x0;_0x2555f4[_0x17d6e5(0x1a4)](_0x535612=>{const _0x315d33=_0x17d6e5;_0x535612 in _0x14b993[_0x315d33(0x311)]&&_0x14b993['has'][_0x535612]&&_0x14a37b++;}),_0x14a37b==_0x2555f4[_0x17d6e5(0x179)]&&(!excludedExchanges[_0x17d6e5(0x2e0)](_0x14b993['id'])&&_0x55177d[_0x17d6e5(0x2fe)](capitalize(_0x14b993['id'])));});let _0x5220ca=[];return _0x11bc3a[_0x58d787(0x1a4)](_0x3db262=>{const _0x448aa0=_0x58d787;_0x3db262=capitalize(_0x3db262);if(!_0x55177d['includes'](_0x3db262))_0x5220ca[_0x448aa0(0x2fe)](_0x3db262);}),_0x55177d;}function setStartDatePerformance(){const _0x386a8d=_0x3ab734;if(config&&config[_0x386a8d(0x163)][0x0][_0x386a8d(0x155)][_0x386a8d(0x179)]!=0x0){const _0x1d5d36=config[_0x386a8d(0x163)][0x0]['changes'];dbPerformance[_0x386a8d(0x315)]('data')[_0x386a8d(0x191)]({'date':config[_0x386a8d(0x22b)]})[_0x386a8d(0x13d)]({'coins':_0x1d5d36})[_0x386a8d(0x27f)]();}}function calculatePnL(_0x178865,_0x24f174,_0x17c3bc,_0x3d425a,_0x108919,_0x2df904){const _0x192610=_0x3ab734;!_0x178865[_0x192610(0x2e0)]('/'+config['basecoin'])&&(_0x17c3bc=_0x17c3bc==_0x192610(0x172)?'sell':_0x192610(0x172));!_0x2df904[_0x24f174]&&(_0x2df904[_0x24f174]={'number':0x0,'sells':0x0,'buys':0x0,'breakeven':0x0,'realizedPnL':0x0});let _0x1fa508=0x0,_0x564d99,_0x50f7c0;if(_0x17c3bc=='buy')_0x50f7c0=_0x2df904[_0x24f174][_0x192610(0x2f5)]*_0x2df904[_0x24f174][_0x192610(0x1b0)]+_0x108919*_0x3d425a,_0x2df904[_0x24f174][_0x192610(0x2f5)]+=_0x3d425a,_0x2df904[_0x24f174][_0x192610(0x1b0)]=_0x2df904[_0x24f174][_0x192610(0x2f5)]!=0x0?_0x50f7c0/_0x2df904[_0x24f174][_0x192610(0x2f5)]:0x0,_0x2df904[_0x24f174]['buys']++;else _0x17c3bc==_0x192610(0x161)&&(_0x564d99=Math['min'](_0x2df904[_0x24f174][_0x192610(0x2f5)],_0x3d425a),_0x1fa508=(_0x108919-_0x2df904[_0x24f174][_0x192610(0x1b0)])*_0x564d99,_0x50f7c0=Math[_0x192610(0x1c6)](_0x2df904[_0x24f174]['number']*_0x2df904[_0x24f174]['breakeven']-_0x564d99*_0x2df904[_0x24f174][_0x192610(0x1b0)],0x0),_0x2df904[_0x24f174][_0x192610(0x2f5)]-=_0x564d99,_0x2df904[_0x24f174]['breakeven']=_0x2df904[_0x24f174][_0x192610(0x2f5)]!=0x0?_0x50f7c0/_0x2df904[_0x24f174][_0x192610(0x2f5)]:0x0,_0x2df904[_0x24f174]['realizedPnL']+=_0x1fa508,_0x2df904[_0x24f174][_0x192610(0x199)]++);return _0x1fa508;}async function generatePnL(){const _0x226882=_0x3ab734;pnlGenerationNeeded=![],logger[_0x226882(0x28f)](_0x226882(0x2a5));const _0x139419=dbLogs[_0x226882(0x315)](_0x226882(0x268))[_0x226882(0x208)]();let _0x3e514c={},_0x4f3c00=0x0,_0x43e4ed=0x0,_0x82cb3f=config[_0x226882(0x22b)];const _0x2220d9=fns[_0x226882(0x2f7)](_0x82cb3f,'yyyy/MM/dd',new Date()),_0xd0c933=new Date();let _0x133e74=0x0;for(let _0x261ae6=_0x2220d9;!fns['isBefore'](_0xd0c933,_0x261ae6);_0x261ae6=fns[_0x226882(0x2f4)](_0x261ae6,0x1)){const _0x470a76=fns['format'](_0x261ae6,_0x226882(0x30b));while(_0x4f3c00<_0x139419['length']){const _0x389d9c=new Date(_0x139419[_0x4f3c00][_0x226882(0x1ef)]);if(fns[_0x226882(0x228)](_0x389d9c,_0x261ae6))_0x4f3c00++;else{if(_0x139419[_0x4f3c00][_0x226882(0x1ef)]['includes'](_0x470a76)){const _0x23ace4=_0x139419[_0x4f3c00];if(_0x23ace4[_0x226882(0x1ce)]==='order'&&(_0x23ace4[_0x226882(0x27d)][_0x226882(0x2e0)](_0x226882(0x253))||_0x23ace4[_0x226882(0x27d)][_0x226882(0x2e0)]('Market\x20order'))){const _0x1d06b4=_0x23ace4[_0x226882(0x27d)][_0x226882(0x2a3)](/([A-Z]+\/[A-Z]+) (sell|buy) #([\d.]+) @([\d.]+)/);if(_0x1d06b4){const [,_0x243101,_0x33a5e2,_0x38fa29,_0x2f35df]=_0x1d06b4,_0xfe3742=_0x243101['includes']('/'+config[_0x226882(0x26f)])?_0x243101[_0x226882(0x284)]('/')[0x0]:_0x243101[_0x226882(0x284)]('/')[0x1],_0x1c6de9=calculatePnL(_0x243101,_0xfe3742,_0x33a5e2,parseFloat(_0x38fa29),parseFloat(_0x2f35df),_0x3e514c);_0x43e4ed+=_0x1c6de9;}}_0x4f3c00++;}else break;}}dbPerformance[_0x226882(0x315)](_0x226882(0x286))[_0x226882(0x191)]({'date':_0x470a76})['assign']({'pnl':_0x43e4ed})[_0x226882(0x27f)]();}dbCoinResults[_0x226882(0x1cc)](_0x226882(0x20b),_0x3e514c)[_0x226882(0x27f)](),logger[_0x226882(0x28f)](_0x226882(0x1e9));const _0x190970=getNormalizedPerformance();emitPerformance(_0x190970);}async function updatePnL(_0x31f3ad){const _0x1e09df=_0x3ab734,{symbol:_0x1b5b30,coin:_0x8b0f8b,amount:_0x14a5ba,price:_0x4f251d,side:_0x9fc77,reverse:_0x198628}=_0x31f3ad;let _0x392898=dbCoinResults[_0x1e09df(0x315)](_0x1e09df(0x20b))[_0x1e09df(0x208)]();const _0x13c94e=calculatePnL(_0x1b5b30,_0x8b0f8b,_0x9fc77,_0x14a5ba,_0x4f251d,_0x392898);dbCoinResults[_0x1e09df(0x1cc)](_0x1e09df(0x20b),_0x392898)[_0x1e09df(0x27f)]();const _0x2e64dd=getTimeStamp()[_0x1e09df(0x284)]('\x20')[0x0];let _0x2b1c86=dbPerformance[_0x1e09df(0x315)](_0x1e09df(0x286))[_0x1e09df(0x191)]({'date':_0x2e64dd})[_0x1e09df(0x208)]();_0x2b1c86?(_0x2b1c86[_0x1e09df(0x1fd)]+=_0x13c94e,dbPerformance['get'](_0x1e09df(0x286))[_0x1e09df(0x191)]({'date':_0x2e64dd})[_0x1e09df(0x13d)](_0x2b1c86)[_0x1e09df(0x27f)]()):await storePerformance();const _0x17e622=getNormalizedPerformance();emitPerformance(_0x17e622);}async function validate24hChanges(){const _0x49e00c=_0x3ab734;for(const _0x1b96c2 of currentCoins){if(_0x1b96c2[_0x49e00c(0x1e4)]!=config['basecoin']){let _0x119c8c;_0x1b96c2[_0x49e00c(0x2e5)]?_0x119c8c=formatResult((0x1/(gChange[_0x1b96c2[_0x49e00c(0x141)]]/0x64+0x1)-0x1)*0x64,0x3):_0x119c8c=gChange[_0x1b96c2[_0x49e00c(0x141)]],_0x119c8c<config[_0x49e00c(0x2ae)]&&(logHistory(_0x49e00c(0x256),_0x1b96c2[_0x49e00c(0x1e4)]+_0x49e00c(0x1d2)+_0x119c8c+'%'),logHistory(_0x49e00c(0x256),_0x49e00c(0x2f0)),logHistory(_0x49e00c(0x256),_0x49e00c(0x15b)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x4bd532,_0x31a614){const _0x3cc92e=_0x3ab734;if(!_0x4bd532)return!![];const _0x5e55d3=_0x31a614[_0x3cc92e(0x284)]('.'),_0x5322a6=_0x4bd532[_0x3cc92e(0x284)]('.');for(var _0x5662de=0x0;_0x5662de<_0x5322a6[_0x3cc92e(0x179)];_0x5662de++){const _0x213190=~~_0x5322a6[_0x5662de],_0x24cc82=~~_0x5e55d3[_0x5662de];if(_0x213190<_0x24cc82)return!![];if(_0x213190>_0x24cc82)return![];}return![];}async function oneTimeMigration(){const _0x52c8bc=_0x3ab734;let _0x262c95=dbLogs[_0x52c8bc(0x315)]('version')[_0x52c8bc(0x208)]();if(isOlderVersion(_0x262c95,_0x52c8bc(0x175))){let _0x10f391=[];const _0xce025d=dbLogs[_0x52c8bc(0x315)]('logs')[_0x52c8bc(0x208)]();_0xce025d['forEach'](_0x2fc17e=>{const _0x9ca46a=_0x52c8bc;_0x10f391[_0x9ca46a(0x2fe)]({'time':_0x2fc17e['time'],'type':_0x2fc17e[_0x9ca46a(0x1ce)],'event':_0x2fc17e[_0x9ca46a(0x27d)]});}),dbLogs['get']('logs')['assign'](_0x10f391)[_0x52c8bc(0x27f)]();}let _0x322fb8=dbConfig[_0x52c8bc(0x315)](_0x52c8bc(0x1df))[_0x52c8bc(0x208)]();if(isOlderVersion(_0x322fb8,'2.3.5')){let _0x340a53=dbConfig[_0x52c8bc(0x315)](_0x52c8bc(0x18f))[_0x52c8bc(0x191)]({'botID':botID})[_0x52c8bc(0x208)]();if(_0x340a53){let _0x2b8774=[];_0x340a53['portfolio'][_0x52c8bc(0x1a4)](_0x3b914b=>{const _0x5e3a92=_0x52c8bc;_0x2b8774[_0x5e3a92(0x2fe)]({'coin':_0x3b914b[_0x5e3a92(0x1e4)],'number':_0x3b914b['startnumber'],'price':_0x3b914b['startprice']}),delete _0x3b914b[_0x5e3a92(0x300)],delete _0x3b914b[_0x5e3a92(0x177)];});if(_0x2b8774[_0x52c8bc(0x179)]!==0x0)fs[_0x52c8bc(0x164)](configbackuppath+(_0x52c8bc(0x2c7)+botID+'.json'),JSON[_0x52c8bc(0x1fb)](_0x2b8774,null,0x4),function(_0x1bac4d){if(_0x1bac4d){}});const _0x3ea1b1=(_0x1296fe,_0x7dd318)=>{let _0x4fec2d=[];_0x7dd318['forEach'](_0x53078e=>{const _0x3489d0=_0x28e0,_0x18c464=_0x1296fe['find'](_0x5620e9=>_0x5620e9[_0x3489d0(0x1e4)]==_0x53078e[_0x3489d0(0x1e4)]);if(!_0x18c464)_0x4fec2d[_0x3489d0(0x2fe)](_0x53078e);});let _0x7b4754=[];return _0x1296fe['forEach'](_0x47072d=>{const _0x5ac957=_0x28e0,_0x3a034b=_0x7dd318[_0x5ac957(0x191)](_0x3b5972=>_0x3b5972[_0x5ac957(0x1e4)]==_0x47072d[_0x5ac957(0x1e4)]);if(!_0x3a034b||_0x3a034b['number']==0x0&&_0x47072d[_0x5ac957(0x2f5)]!=0x0)_0x7b4754[_0x5ac957(0x2fe)](_0x47072d);}),{'missingDay1':_0x4fec2d,'notInDay2':_0x7b4754};},_0x35a0f4=dbPerformance['get'](_0x52c8bc(0x286))[_0x52c8bc(0x2d0)]()[_0x52c8bc(0x208)]();if(_0x35a0f4[_0x52c8bc(0x179)]>0x1){const {missingDay1:_0x4bfc41,notInDay2:_0xcbba6a}=_0x3ea1b1(_0x2b8774,_0x35a0f4[0x1][_0x52c8bc(0x20b)]);_0x2b8774=[..._0x2b8774,..._0x4bfc41],_0xcbba6a[_0x52c8bc(0x1a4)](_0x515bec=>{const _0x201fdb=_0x52c8bc;let _0x5207d8=_0x2b8774['findIndex'](_0x2c2119=>_0x2c2119['coin']==_0x515bec[_0x201fdb(0x1e4)]);_0x5207d8!=-0x1&&_0x2b8774[_0x201fdb(0x25b)](_0x5207d8,0x1);});}_0x2b8774[_0x52c8bc(0x22a)]((_0x5e753e,_0x248a55)=>_0x5e753e[_0x52c8bc(0x1e4)]>_0x248a55[_0x52c8bc(0x1e4)]?0x1:_0x248a55[_0x52c8bc(0x1e4)]>_0x5e753e[_0x52c8bc(0x1e4)]?-0x1:0x0);let _0x4cbd22=[{'date':_0x340a53[_0x52c8bc(0x22b)],'changes':_0x2b8774}];_0x35a0f4[_0x52c8bc(0x179)]>0x2&&_0x35a0f4[_0x52c8bc(0x1a4)]((_0x564892,_0x3e273c)=>{const _0x3cca16=_0x52c8bc;if(_0x3e273c>0x0&&_0x3e273c<_0x35a0f4[_0x3cca16(0x179)]-0x1){const {missingDay1:_0x3ac425,notInDay2:_0x11508c}=_0x3ea1b1(_0x35a0f4[_0x3e273c][_0x3cca16(0x20b)],_0x35a0f4[_0x3e273c+0x1][_0x3cca16(0x20b)]);_0x2b8774=[],(_0x3ac425[_0x3cca16(0x179)]!=0x0||_0x11508c[_0x3cca16(0x179)]!=0x0)&&(_0x3ac425['length']!=0x0&&_0x2b8774['push'](..._0x3ac425),_0x11508c[_0x3cca16(0x179)]!=0x0&&(_0x11508c[_0x3cca16(0x1a4)](_0x2f0d04=>{const _0x57b329=_0x3cca16;_0x2f0d04['number']=-_0x2f0d04[_0x57b329(0x2f5)];}),_0x2b8774[_0x3cca16(0x2fe)](..._0x11508c)),_0x2b8774['sort']((_0x1d4b78,_0x387fd6)=>_0x1d4b78[_0x3cca16(0x1e4)]>_0x387fd6[_0x3cca16(0x1e4)]?0x1:_0x387fd6[_0x3cca16(0x1e4)]>_0x1d4b78[_0x3cca16(0x1e4)]?-0x1:0x0),_0x4cbd22[_0x3cca16(0x2fe)]({'date':_0x35a0f4[_0x3e273c+0x1][_0x3cca16(0x1da)],'changes':_0x2b8774}));}}),dbConfig[_0x52c8bc(0x315)]('bot')[_0x52c8bc(0x191)]({'botID':botID})[_0x52c8bc(0x13d)]({..._0x340a53,'liquidity':_0x4cbd22})[_0x52c8bc(0x27f)]();}}if(isOlderVersion(_0x322fb8,_0x52c8bc(0x2c2))){let _0x390b21=dbConfig[_0x52c8bc(0x315)](_0x52c8bc(0x18f))[_0x52c8bc(0x191)]({'botID':botID})[_0x52c8bc(0x208)]();if(_0x390b21){const _0xfa70be=_0x390b21[_0x52c8bc(0x16a)],_0x3b0be5=_0xfa70be?capitalize(_0xfa70be):'Binance';dbConfig[_0x52c8bc(0x315)]('bot')[_0x52c8bc(0x191)]({'botID':botID})[_0x52c8bc(0x13d)]({'exchange':_0x3b0be5})['write']();}}if(isOlderVersion(_0x322fb8,_0x52c8bc(0x1f3))){let _0x1554bc=dbConfig[_0x52c8bc(0x315)](_0x52c8bc(0x18f))[_0x52c8bc(0x191)]({'botID':botID})['value']();if(_0x1554bc){const _0x590dba=_0x1554bc[_0x52c8bc(0x1ae)],_0x412f17=_0x590dba?_0x52c8bc(0x13b):![];dbConfig[_0x52c8bc(0x315)](_0x52c8bc(0x18f))[_0x52c8bc(0x191)]({'botID':botID})[_0x52c8bc(0x13d)]({'marketcapEnabled':_0x412f17})[_0x52c8bc(0x27f)]();}}if(isOlderVersion(_0x322fb8,_0x52c8bc(0x2ec))){let _0x2ed97c=dbConfig[_0x52c8bc(0x315)](_0x52c8bc(0x18f))['find']({'botID':botID})[_0x52c8bc(0x208)]();if(_0x2ed97c){const _0x3d208d=_0x2ed97c['autoliquidity'],_0x414516=_0x3d208d?_0x52c8bc(0x2d6):![];dbConfig[_0x52c8bc(0x315)](_0x52c8bc(0x18f))[_0x52c8bc(0x191)]({'botID':botID})[_0x52c8bc(0x13d)]({'autoliquidity':_0x414516})['write']();}}let _0x5b0407=dbPerformance[_0x52c8bc(0x315)](_0x52c8bc(0x1df))['value']();isOlderVersion(_0x5b0407,_0x52c8bc(0x175))&&setStartDatePerformance();let _0x224604=dbCoinResults[_0x52c8bc(0x315)]('version')[_0x52c8bc(0x208)]();if(isOlderVersion(_0x224604,_0x52c8bc(0x281))){let _0x107297=dbCoinResults[_0x52c8bc(0x315)](_0x52c8bc(0x20b))[_0x52c8bc(0x208)]();if(_0x107297[_0x52c8bc(0x179)]!=0x0)pnlGenerationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x4b6347=_0x3ab734;dbConfig[_0x4b6347(0x1cc)]('version',serverversion)['write'](),dbPerformance[_0x4b6347(0x1cc)]('version',serverversion)[_0x4b6347(0x27f)](),dbLogs['set'](_0x4b6347(0x1df),serverversion)[_0x4b6347(0x27f)](),dbCoinResults[_0x4b6347(0x1cc)](_0x4b6347(0x1df),serverversion)[_0x4b6347(0x27f)]();}function getConfiguration(_0x5ce308){const _0x4032bc=_0x3ab734;let _0x4688f8=dbConfig[_0x4032bc(0x315)]('bot')[_0x4032bc(0x191)]({'botID':_0x5ce308})['value']();if(_0x4688f8){let _0x12dea6=![];typeof _0x4688f8[_0x4032bc(0x289)]==_0x4032bc(0x254)&&(_0x4688f8={..._0x4688f8,'threshold':Number(_0x4688f8[_0x4032bc(0x289)])},_0x12dea6=!![]),_0x4688f8['change24h']==undefined&&(_0x4688f8={..._0x4688f8,'change24h':-0x14},_0x12dea6=!![]),_0x4688f8[_0x4032bc(0x1f8)]==undefined&&(_0x4688f8={..._0x4688f8,'fiat':_0x4032bc(0x2b5)},_0x12dea6=!![]),_0x4688f8[_0x4032bc(0x168)]==undefined&&(_0x4688f8={..._0x4688f8,'onepagemode':settings[_0x4032bc(0x168)]},_0x12dea6=!![]),_0x4688f8['colorscheme']==undefined&&(_0x4688f8={..._0x4688f8,'colorscheme':_0x4032bc(0x1bf)},_0x12dea6=!![]),_0x4688f8[_0x4032bc(0x226)]==undefined&&(_0x4688f8={..._0x4688f8,'autoliquidity':_0x4032bc(0x2d6)},_0x12dea6=!![]),_0x4688f8[_0x4032bc(0x23c)]==undefined&&(_0x4688f8={..._0x4688f8,'marketcapApi':settings['marketcapApi']?!![]:![]},_0x12dea6=!![]),_0x4688f8['marketcapEnabled']==undefined&&(_0x4688f8={..._0x4688f8,'marketcapEnabled':![]},_0x12dea6=!![]),_0x4688f8[_0x4032bc(0x2c5)]==undefined&&(_0x4688f8={..._0x4688f8,'sandbox':![]},_0x12dea6=!![]),_0x12dea6&&(_0x4688f8={'botID':_0x4688f8[_0x4032bc(0x261)],'exchange':_0x4688f8[_0x4032bc(0x16a)],'apiKey':_0x4688f8[_0x4032bc(0x1d4)],'apiSecret':_0x4688f8['apiSecret'],'apiPassword':_0x4688f8[_0x4032bc(0x18b)],'basecoin':_0x4688f8[_0x4032bc(0x26f)],'botname':_0x4688f8['botname'],'showname':_0x4688f8[_0x4032bc(0x30e)],'threshold':_0x4688f8[_0x4032bc(0x289)],'ordertype':_0x4688f8[_0x4032bc(0x210)],'timeout':_0x4688f8['timeout'],'fiat':_0x4688f8[_0x4032bc(0x1f8)],'startdate':_0x4688f8[_0x4032bc(0x22b)],'recreate':_0x4688f8['recreate'],'timeshift':_0x4688f8[_0x4032bc(0x24b)],'onepagemode':_0x4688f8[_0x4032bc(0x168)],'headless':_0x4688f8[_0x4032bc(0x234)],'cooldown':_0x4688f8[_0x4032bc(0x192)],'change24h':_0x4688f8['change24h'],'emojibuy':_0x4688f8[_0x4032bc(0x139)],'emojisell':_0x4688f8[_0x4032bc(0x27c)],'colorscheme':_0x4688f8[_0x4032bc(0x28c)],'marketcapApi':_0x4688f8[_0x4032bc(0x23c)],'marketcapEnabled':_0x4688f8['marketcapEnabled'],'sandbox':_0x4688f8[_0x4032bc(0x2c5)],'portfolio':_0x4688f8[_0x4032bc(0x183)],'autoliquidity':_0x4688f8['autoliquidity'],'liquidity':_0x4688f8['liquidity'],'openOrders':_0x4688f8['openOrders']},dbConfig['get']('bot')['remove']()[_0x4032bc(0x27f)](),dbConfig[_0x4032bc(0x315)](_0x4032bc(0x18f))[_0x4032bc(0x2fe)](_0x4688f8)[_0x4032bc(0x27f)]());}else _0x4688f8={'botID':_0x5ce308,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':'Bot\x20'+_0x5ce308,'showname':![],'threshold':0x3,'ordertype':_0x4032bc(0x246),'timeout':0x14,'fiat':'USD','startdate':getDate(),'recreate':![],'timeshift':settings[_0x4032bc(0x24b)],'onepagemode':settings['onepagemode'],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':'red_yellow_blue','marketcapApi':settings['marketcapApi']?!![]:![],'marketcapEnabled':![],'sandbox':![],'portfolio':[],'autoliquidity':'update-liquidity','liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x4688f8;}function emittedConfiguration(){const _0x4431d7=_0x3ab734;let _0x45f30f;if(config[_0x4431d7(0x1d4)]=='')_0x45f30f={...config,'configstate':_0x4431d7(0x2df)};else config['apiKey']==_0x4431d7(0x2ac)?_0x45f30f={...config,'configstate':_0x4431d7(0x1c9)}:(_0x45f30f={...config,'apiKey':_0x4431d7(0x151),'apiSecret':_0x4431d7(0x151)},config['apiPassword']&&(_0x45f30f['apiPassword']=_0x4431d7(0x151)));return _0x45f30f[_0x4431d7(0x2b4)]=enableFiatToggle,_0x45f30f;}function getSettings(){const _0x18b4a0=_0x3ab734;return dbSettings[_0x18b4a0(0x315)](_0x18b4a0(0x29e))[_0x18b4a0(0x208)]();}function getSecure(){const _0x6bce55=_0x3ab734;return dbSecure[_0x6bce55(0x315)](_0x6bce55(0x149))[_0x6bce55(0x208)]()||{};}function updateTimeshift(_0x2c0838){const _0x45e4e6=_0x3ab734;let _0xa87a9b=dbConfig[_0x45e4e6(0x315)](_0x45e4e6(0x18f))[_0x45e4e6(0x191)]({'botID':botID})[_0x45e4e6(0x208)]();_0xa87a9b&&dbConfig['get'](_0x45e4e6(0x18f))[_0x45e4e6(0x191)]({'botID':botID})[_0x45e4e6(0x13d)]({'timeshift':_0x2c0838})[_0x45e4e6(0x27f)](),config[_0x45e4e6(0x24b)]=_0x2c0838,proxyEmit(_0x45e4e6(0x1d1),emittedConfiguration());}function updateOnepagemode(_0x45a3b5){const _0x4fb7f3=_0x3ab734;let _0x34603e=dbConfig['get'](_0x4fb7f3(0x18f))[_0x4fb7f3(0x191)]({'botID':botID})['value']();_0x34603e&&dbConfig[_0x4fb7f3(0x315)](_0x4fb7f3(0x18f))[_0x4fb7f3(0x191)]({'botID':botID})[_0x4fb7f3(0x13d)]({'onepagemode':_0x45a3b5})[_0x4fb7f3(0x27f)](),config['onepagemode']=_0x45a3b5,proxyEmit(_0x4fb7f3(0x1d1),emittedConfiguration());}function updateMarketcapApi(_0x4377b2){const _0xd1ed51=_0x3ab734,_0x5bd500=_0x4377b2?!![]:![];let _0x44a522=dbConfig['get'](_0xd1ed51(0x18f))['find']({'botID':botID})[_0xd1ed51(0x208)]();_0x44a522&&dbConfig[_0xd1ed51(0x315)](_0xd1ed51(0x18f))['find']({'botID':botID})['assign']({'marketcapApi':_0x5bd500})[_0xd1ed51(0x27f)](),config[_0xd1ed51(0x23c)]=_0x5bd500,getMarketCap(),proxyEmit(_0xd1ed51(0x1d1),emittedConfiguration());}async function storeConfiguration(_0x11ccd8){const _0x41fb1b=_0x3ab734;logger[_0x41fb1b(0x28f)]('Saving\x20configuration');_0x11ccd8['configstate']&&delete _0x11ccd8[_0x41fb1b(0x17a)];if(pidBalances)clearTimeout(pidBalances);setBlockTransactionDetection(!![]);let _0x2f21e5=![],_0x42224b=![],_0x39624b=[];_0x11ccd8[_0x41fb1b(0x183)][_0x41fb1b(0x1a4)](_0x13874c=>{const _0x5e0a02=_0x41fb1b;if(!_0x13874c[_0x5e0a02(0x2c3)]&&_0x13874c['coin']!=_0x11ccd8[_0x5e0a02(0x26f)])_0x39624b[_0x5e0a02(0x2fe)](_0x13874c[_0x5e0a02(0x141)]);}),_0x39624b[_0x41fb1b(0x1a4)](_0x431c12=>{const _0x4ee096=_0x41fb1b,_0x53452a=currentCoins[_0x4ee096(0x191)](_0x5283c0=>_0x5283c0[_0x4ee096(0x141)]==_0x431c12);!_0x53452a&&(_0x2f21e5=!![]);}),currentCoins[_0x41fb1b(0x1a4)](_0x53cd15=>{const _0x4a0be9=_0x41fb1b;if(_0x53cd15['coin']!=config[_0x4a0be9(0x26f)]){const _0x53b144=_0x39624b[_0x4a0be9(0x191)](_0x2d529d=>_0x2d529d==_0x53cd15[_0x4a0be9(0x141)]);!_0x53b144&&(_0x2f21e5=!![]);}}),_0x11ccd8[_0x41fb1b(0x183)][_0x41fb1b(0x1a4)](_0x3c724d=>{const _0xc08ce=_0x41fb1b,_0x308f4c=config[_0xc08ce(0x183)]['find'](_0x356e51=>_0x356e51[_0xc08ce(0x1e4)]==_0x3c724d[_0xc08ce(0x1e4)]);if(_0x308f4c&&_0x3c724d[_0xc08ce(0x1fa)]!=_0x308f4c['offset'])_0x42224b=!![];});let _0x6695a3=dbConfig['get'](_0x41fb1b(0x18f))[_0x41fb1b(0x191)]({'botID':botID})['value']();_0x11ccd8={..._0x11ccd8,'apiKey':decryptRSA(secure[_0x41fb1b(0x143)],_0x11ccd8[_0x41fb1b(0x1d4)]),'apiSecret':decryptRSA(secure[_0x41fb1b(0x143)],_0x11ccd8[_0x41fb1b(0x1d5)])};_0x11ccd8[_0x41fb1b(0x18b)]&&(_0x11ccd8[_0x41fb1b(0x18b)]=decryptRSA(secure[_0x41fb1b(0x143)],_0x11ccd8[_0x41fb1b(0x18b)]));let _0x24d079=![];if(_0x6695a3){_0x11ccd8[_0x41fb1b(0x1d4)]==_0x41fb1b(0x151)?_0x11ccd8[_0x41fb1b(0x1d4)]=config[_0x41fb1b(0x1d4)]:_0x24d079=!![];_0x11ccd8[_0x41fb1b(0x1d5)]==_0x41fb1b(0x151)?_0x11ccd8[_0x41fb1b(0x1d5)]=config[_0x41fb1b(0x1d5)]:_0x24d079=!![];if(_0x11ccd8[_0x41fb1b(0x18b)]==_0x41fb1b(0x151))_0x11ccd8[_0x41fb1b(0x18b)]=config[_0x41fb1b(0x18b)];else{if(_0x11ccd8[_0x41fb1b(0x18b)])_0x24d079=!![];}dbConfig[_0x41fb1b(0x315)](_0x41fb1b(0x18f))[_0x41fb1b(0x191)]({'botID':botID})[_0x41fb1b(0x13d)](_0x11ccd8)['write']();}else dbConfig[_0x41fb1b(0x315)](_0x41fb1b(0x18f))['push'](_0x11ccd8)[_0x41fb1b(0x27f)](),_0x24d079=!![],process[_0x41fb1b(0x2fb)]({'status':'enabled','live':_0x41fb1b(0x283)},_0x53a7ed=>{});process[_0x41fb1b(0x2fb)]({'botname':_0x11ccd8[_0x41fb1b(0x198)]},_0x12dbaa=>{}),config={..._0x11ccd8},updateBotManager(),proxyEmit(_0x41fb1b(0x287)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x24d079)await reset(!![]);else _0x2f21e5||_0x42224b?await reset(![]):getBalances();setBlockTransactionDetection(![]);}async function storeHeadless(_0x1c939c){const _0x10d6d8=_0x3ab734,_0x123adf={...config,'headless':_0x1c939c[_0x10d6d8(0x234)]};let _0x4a0ff4=dbConfig[_0x10d6d8(0x315)](_0x10d6d8(0x18f))[_0x10d6d8(0x191)]({'botID':botID})[_0x10d6d8(0x208)]();_0x4a0ff4&&dbConfig[_0x10d6d8(0x315)](_0x10d6d8(0x18f))[_0x10d6d8(0x191)]({'botID':botID})[_0x10d6d8(0x13d)](_0x123adf)[_0x10d6d8(0x27f)](),config={..._0x123adf},updateBotManager(),proxyEmit(_0x10d6d8(0x1d1),emittedConfiguration());}async function storeFiat(_0x4549a0){const _0x39d77a=_0x3ab734,_0x45d2c7={...config,'fiat':_0x4549a0};let _0x4a0e4c=dbConfig[_0x39d77a(0x315)](_0x39d77a(0x18f))['find']({'botID':botID})[_0x39d77a(0x208)]();_0x4a0e4c&&dbConfig[_0x39d77a(0x315)](_0x39d77a(0x18f))[_0x39d77a(0x191)]({'botID':botID})[_0x39d77a(0x13d)](_0x45d2c7)[_0x39d77a(0x27f)](),config={..._0x45d2c7},proxyEmit(_0x39d77a(0x1d1),emittedConfiguration());}function resetHistory(){const _0x163ad6=_0x3ab734;logger[_0x163ad6(0x1ff)](_0x163ad6(0x145));try{if(fs[_0x163ad6(0x299)](path[_0x163ad6(0x204)](configpath,_0x163ad6(0x30c)+botID+_0x163ad6(0x159))))fs[_0x163ad6(0x222)](path[_0x163ad6(0x204)](configpath,_0x163ad6(0x30c)+botID+_0x163ad6(0x159)));if(fs['existsSync'](path[_0x163ad6(0x204)](configpath,'bot-'+botID+_0x163ad6(0x2d7))))fs['unlinkSync'](path[_0x163ad6(0x204)](configpath,_0x163ad6(0x30c)+botID+_0x163ad6(0x2d7)));if(fs['existsSync'](path[_0x163ad6(0x204)](configpath,_0x163ad6(0x30c)+botID+_0x163ad6(0x27a))))fs['unlinkSync'](path[_0x163ad6(0x204)](configpath,_0x163ad6(0x30c)+botID+_0x163ad6(0x27a)));}catch(_0xa493e6){if(_0xa493e6)logger['full']('Error\x20while\x20deleting\x20files:\x20',_0xa493e6);}const _0x5bf56a=getDate();let _0x4ba97c=[];currentCoins[_0x163ad6(0x1a4)](_0xd88ab3=>{const _0x209478=_0x163ad6;_0x4ba97c[_0x209478(0x2fe)]({'coin':_0xd88ab3[_0x209478(0x1e4)],'number':_0xd88ab3[_0x209478(0x2f5)],'price':_0xd88ab3[_0x209478(0x1bc)]});});let _0x1e8508=dbConfig[_0x163ad6(0x315)](_0x163ad6(0x18f))[_0x163ad6(0x191)]({'botID':botID})[_0x163ad6(0x208)]();_0x1e8508&&(dbConfig[_0x163ad6(0x315)](_0x163ad6(0x18f))[_0x163ad6(0x191)]({'botID':botID})[_0x163ad6(0x13d)]({'liquidity':[{'date':_0x5bf56a,'changes':_0x4ba97c}]})[_0x163ad6(0x27f)](),config[_0x163ad6(0x163)]=[]),restartBot(!![]);}function _0x28e0(_0x1b8857,_0x152daf){const _0x3362b8=_0x41cd();return _0x28e0=function(_0x2bb835,_0x4f47eb){_0x2bb835=_0x2bb835-0x136;let _0x41cda7=_0x3362b8[_0x2bb835];return _0x41cda7;},_0x28e0(_0x1b8857,_0x152daf);}function noslash(_0x2e9cfd){const _0x531036=_0x3ab734;return _0x2e9cfd[_0x531036(0x2b0)]('/','');}function updateHighestFee(_0x15c4f2){const _0x2c30d7=_0x3ab734;if(_0x15c4f2['reverse']){let _0x4f6300={'filled':_0x15c4f2[_0x2c30d7(0x14c)]*_0x15c4f2[_0x2c30d7(0x14d)],'amount':_0x15c4f2[_0x2c30d7(0x14c)]*_0x15c4f2[_0x2c30d7(0x14d)],'side':_0x15c4f2['side']==_0x2c30d7(0x161)?'buy':_0x2c30d7(0x161),'price':0x1/_0x15c4f2[_0x2c30d7(0x14d)]};_0x15c4f2={..._0x15c4f2,..._0x4f6300};}const _0x59ff45=defaultFee*_0x15c4f2[_0x2c30d7(0x14c)]*_0x15c4f2[_0x2c30d7(0x14d)];lastFees['recent20'][_0x2c30d7(0x179)]===0x14&&lastFees[_0x2c30d7(0x137)][_0x2c30d7(0x25a)](),lastFees[_0x2c30d7(0x137)][_0x2c30d7(0x2fe)](_0x59ff45),lastFees[_0x2c30d7(0x295)]=Math[_0x2c30d7(0x1c6)](...lastFees[_0x2c30d7(0x137)]);}async function updateNumberCoinsCcxt(_0x5b2ba5){const _0x32642e=_0x3ab734;logger['debug'](_0x32642e(0x23f)+_0x5b2ba5[_0x32642e(0x141)]+'\x20|\x20'+_0x5b2ba5[_0x32642e(0x171)]+_0x32642e(0x223)+_0x5b2ba5[_0x32642e(0x14c)]+_0x32642e(0x200)+_0x5b2ba5['amount']+_0x32642e(0x223)+_0x5b2ba5['id']);let _0x3f7316=_0x5b2ba5[_0x32642e(0x171)],_0xf7bda3=![];currentCoins[_0x32642e(0x1a4)](_0x3edfb3=>{const _0x1e6154=_0x32642e;_0x3edfb3['symbol']==_0x5b2ba5[_0x1e6154(0x141)]&&(_0xf7bda3=!![]);});if(!_0xf7bda3)return;const _0x1e9935=currentCoins['find'](_0x17cea9=>_0x17cea9[_0x32642e(0x141)]==_0x5b2ba5['symbol']),_0xe42c52=_0x1e9935[_0x32642e(0x1e4)],_0x28973e=_0x374348=>{const _0x5eb25d=_0x32642e,_0x441d84=currentCoins[_0x5eb25d(0x191)](_0x41bf66=>_0x41bf66[_0x5eb25d(0x141)]==_0x5b2ba5[_0x5eb25d(0x141)]);if(_0x441d84)_0x441d84[_0x5eb25d(0x156)]=_0x374348;};let _0x3c44d2=![];for(const _0x33bb5d of lastOrders){const _0x4cb450=0x64,_0x423705=0x1388;let _0x229685=0x0;while(!_0x33bb5d[_0x32642e(0x30f)]&&_0x229685*_0x4cb450<_0x423705){_0x229685++,await sleep(_0x4cb450);}if(_0x229685>0x0)logger[_0x32642e(0x28f)]('Waited\x20'+_0x229685*_0x4cb450/0x3e8+_0x32642e(0x18a));_0x33bb5d[_0x32642e(0x30f)]==_0x5b2ba5['id']&&(_0x3c44d2=!![]);}if(_0x3f7316=='open'){_0x28973e(_0x32642e(0x267));if(_0x5b2ba5['filled']>0x0&&_0x5b2ba5['filled']<_0x5b2ba5[_0x32642e(0x13a)]){if(_0x3c44d2){setBlockTransactionDetection(!![]),logger['debug'](_0x32642e(0x252)+_0x5b2ba5[_0x32642e(0x14c)]+_0x32642e(0x170)+_0x5b2ba5['id']);const _0x10f450=await getCoins(balanceUpdateDelay,undefined,undefined,_0xe42c52);[currentCoins,currentCoinsAll]=_0x10f450,setBlockTransactionDetection(![]);}else logger[_0x32642e(0x28f)](_0x32642e(0x252)+_0x5b2ba5[_0x32642e(0x14c)]+_0x32642e(0x30a)+_0x5b2ba5['id']),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay);}}else{if(_0x3f7316=='canceled'){_0x28973e(_0x32642e(0x2e8)),lastOrders=lastOrders[_0x32642e(0x317)](_0x114f03=>_0x114f03['symbol']!=_0x5b2ba5['symbol']);const _0x19c89e=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x19c89e,setBlockTransactionDetection(![]),await getOpenOrders(),handleOpenOrders();}else{if(_0x3f7316==_0x32642e(0x17b)){if(lastOrders)for(const _0x526f16 of lastOrders){if(_0x526f16[_0x32642e(0x30f)]==_0x5b2ba5['id']){logger['debug'](_0x32642e(0x2a2)+_0x5b2ba5['id']),_0x3c44d2=!![];if(_0x526f16[_0x32642e(0x14c)]==0x0){setBlockTransactionDetection(!![]),logger['debug'](_0x32642e(0x189)+_0x5b2ba5['id']);if(_0x5b2ba5[_0x32642e(0x21e)])_0x526f16[_0x32642e(0x14d)]=_0x5b2ba5[_0x32642e(0x21e)];else{if(_0x5b2ba5[_0x32642e(0x14d)])_0x526f16['price']=_0x5b2ba5[_0x32642e(0x14d)];else{}}_0x526f16[_0x32642e(0x14c)]=_0x5b2ba5['filled'],updateHighestFee(_0x526f16);const _0x506602=await getCoins(balanceUpdateDelay,undefined,undefined,_0xe42c52);[currentCoins,currentCoinsAll]=_0x506602,setBlockTransactionDetection(![]),await validateOrders(),_0x28973e('filled'),_0x526f16[_0x32642e(0x292)]={'currency':_0x5b2ba5[_0x32642e(0x292)]?_0x5b2ba5[_0x32642e(0x292)][_0x32642e(0x2a9)]:null,'cost':_0x5b2ba5[_0x32642e(0x292)]?_0x5b2ba5[_0x32642e(0x292)][_0x32642e(0x2c6)]:0x0},await updatePnL(_0x526f16);}}}!_0x3c44d2&&(logger[_0x32642e(0x28f)]('1\x20-\x20FILLED\x20unknown\x20order:\x20'+_0x5b2ba5['id']),_0x28973e(_0x32642e(0x14c)),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay),await updateOpenOrders(),handleOpenOrders());}}}if(lastBalances){let _0x74af45=JSON[_0x32642e(0x2f7)](lastBalances['portfolio']);const _0x55b063=_0x74af45[_0x32642e(0x191)](_0x3afb7b=>_0x3afb7b[_0x32642e(0x141)]==_0x5b2ba5[_0x32642e(0x141)]);if(_0x55b063){if(_0x3f7316==_0x32642e(0x267))_0x55b063[_0x32642e(0x156)]=_0x55b063[_0x32642e(0x156)]==_0x32642e(0x14c)?_0x32642e(0x14c):_0x32642e(0x267);else{if(_0x3f7316==_0x32642e(0x2e8))_0x55b063[_0x32642e(0x156)]=_0x55b063[_0x32642e(0x156)]==_0x32642e(0x14c)?_0x32642e(0x14c):_0x32642e(0x2e8);else _0x3f7316==_0x32642e(0x17b)&&(_0x55b063[_0x32642e(0x156)]=_0x32642e(0x14c));}}lastBalances={...lastBalances,'portfolio':JSON[_0x32642e(0x1fb)](_0x74af45)},proxyEmit(_0x32642e(0x1ac),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){await getOpenOrders();let _0x515ebc=![];currentCoins['forEach'](_0x2a28ec=>{const _0x42b610=_0x28e0;_0x515ebc=allOpenOrders[_0x42b610(0x191)](_0x247e1a=>_0x247e1a[_0x42b610(0x141)]==_0x2a28ec[_0x42b610(0x141)]),_0x2a28ec[_0x42b610(0x156)]=_0x515ebc?_0x42b610(0x267):_0x42b610(0x1e1);});}async function fetchBalance(_0x53423e=!![]){const _0x63b59d=_0x3ab734;let _0x5dca25,_0x5e6125;try{return _0x5dca25=await exchange['fetchBalance'](),_0x5e6125=_0x5dca25[_0x63b59d(0x2bf)],_0x5e6125;}catch(_0x196a18){return!_0x53423e?handleErrorNoStop(_0x196a18,'fetchBalance()'):await handleError(_0x196a18,_0x63b59d(0x1e0)),![];}}async function getCoins(_0x15fc21=0x0,_0x25c73b=!![],_0x26e4e4=config[_0x3ab734(0x26f)],_0x735028){const _0x5ae225=_0x3ab734;let _0x2733d8=[],_0x346ef6=[],_0x98d937=[],_0x28f31d;if(_0x15fc21)await sleep(_0x15fc21);if(botPaused)return[currentCoins,currentCoinsAll];let _0x314b56=![],_0x168f19=0x0,_0x4d96ed,_0x500172;_0x735028&&(_0x4d96ed=currentCoins[_0x5ae225(0x191)](_0x509989=>_0x509989[_0x5ae225(0x1e4)]==_0x735028),_0x4d96ed&&(_0x500172=_0x4d96ed[_0x5ae225(0x2b3)],delete _0x4d96ed[_0x5ae225(0x2b3)]));while(!_0x314b56){_0x28f31d=await fetchBalance(_0x25c73b);if(_0x28f31d){if(_0x735028){if(_0x28f31d[_0x735028]!=_0x500172)logger[_0x5ae225(0x28f)](_0x5ae225(0x1a9)+_0x735028+':\x20'+_0x28f31d[_0x735028]+'\x20('+_0x500172+')'),_0x314b56=!![];else{logger[_0x5ae225(0x28f)](_0x5ae225(0x1d7)+_0x735028+':\x20'+_0x28f31d[_0x735028]+'\x20('+_0x500172+')'),_0x168f19++;if(_0x168f19<balanceUpdateRetries)await sleep(balanceUpdateDelay);else{logger[_0x5ae225(0x28f)](_0x5ae225(0x310)+_0x168f19+'\x20attempts');break;}}}else break;}else return[currentCoins,currentCoinsAll];}for(const [_0x2c2c5d,_0x400355]of Object[_0x5ae225(0x1f0)](_0x28f31d)){_0x98d937[_0x5ae225(0x2fe)](_0x2c2c5d);}config[_0x5ae225(0x183)][_0x5ae225(0x1a4)](_0x3a163e=>{const _0x1026c0=_0x5ae225;!_0x98d937[_0x1026c0(0x2e0)](_0x3a163e[_0x1026c0(0x1e4)])&&(_0x28f31d[_0x3a163e[_0x1026c0(0x1e4)]]=0x0);});if(_0x26e4e4=='')for(const [_0x3d9213,_0x1f9be4]of Object[_0x5ae225(0x1f0)](_0x28f31d)){_0x1f9be4!=0x0&&_0x2733d8[_0x5ae225(0x2fe)]({'coin':_0x3d9213});}else for(const [_0x80fbae,_0x3fcf2f]of Object[_0x5ae225(0x1f0)](_0x28f31d)){const _0x4bb60d=config[_0x5ae225(0x183)][_0x5ae225(0x191)](_0x2fa498=>_0x2fa498[_0x5ae225(0x1e4)]==_0x80fbae),_0x200de9=_0x80fbae+'/'+_0x26e4e4,_0x456aa5=_0x26e4e4+'/'+_0x80fbae,_0x53a8c6=currentCoins[_0x5ae225(0x191)](_0x44471e=>_0x44471e[_0x5ae225(0x1e4)]==_0x80fbae);if((_0x3fcf2f!=0x0||_0x4bb60d)&&(allSymbols[_0x5ae225(0x2e0)](_0x200de9)||_0x80fbae==_0x26e4e4))_0x53a8c6?_0x2733d8['push']({..._0x53a8c6,'number':Math[_0x5ae225(0x1c6)](_0x3fcf2f+(_0x4bb60d&&_0x4bb60d['offset']||0x0),0x0)}):_0x2733d8['push']({'coin':_0x80fbae,'symbol':_0x200de9,'reverse':![],'number':Math[_0x5ae225(0x1c6)](_0x3fcf2f+(_0x4bb60d&&_0x4bb60d[_0x5ae225(0x1fa)]||0x0),0x0),'orderstatus':_0x5ae225(0x1e1)});else{if((_0x3fcf2f!=0x0||_0x4bb60d)&&allSymbols[_0x5ae225(0x2e0)](_0x456aa5))_0x53a8c6?_0x2733d8['push']({..._0x53a8c6,'number':Math[_0x5ae225(0x1c6)](_0x3fcf2f+(_0x4bb60d&&_0x4bb60d['offset']||0x0),0x0)}):_0x2733d8[_0x5ae225(0x2fe)]({'coin':_0x80fbae,'symbol':_0x456aa5,'reverse':!![],'number':Math[_0x5ae225(0x1c6)](_0x3fcf2f+(_0x4bb60d&&_0x4bb60d[_0x5ae225(0x1fa)]||0x0),0x0),'orderstatus':_0x5ae225(0x1e1)});else _0x4bb60d&&_0x2733d8[_0x5ae225(0x2fe)]({'coin':_0x4bb60d[_0x5ae225(0x1e4)],'symbol':_0x4bb60d[_0x5ae225(0x141)],'reverse':_0x4bb60d[_0x5ae225(0x2e5)],'number':0x0,'orderstatus':_0x5ae225(0x1e1)});}}return _0x2733d8[_0x5ae225(0x22a)]((_0x2c567b,_0x91b04e)=>_0x2c567b[_0x5ae225(0x2f9)]<_0x91b04e['delta']?0x1:_0x91b04e[_0x5ae225(0x2f9)]<_0x2c567b[_0x5ae225(0x2f9)]?-0x1:0x0),_0x346ef6=cloneDeep(_0x2733d8),_0x2733d8=_0x2733d8[_0x5ae225(0x317)](_0x53bc3f=>{const _0x3763cd=_0x5ae225,_0x231c32=config[_0x3763cd(0x183)][_0x3763cd(0x191)](_0x38727b=>_0x38727b[_0x3763cd(0x1e4)]==_0x53bc3f[_0x3763cd(0x1e4)]);return _0x231c32&&!_0x231c32[_0x3763cd(0x2c3)];}),[_0x2733d8,_0x346ef6];}async function getOpenOrders(){const _0x4524e5=_0x3ab734;let _0x210d94;allOpenOrders=[];try{for(const _0xa48d1c of config[_0x4524e5(0x183)]){!_0xa48d1c['excluded']&&_0xa48d1c[_0x4524e5(0x1e4)]!=config[_0x4524e5(0x26f)]&&(_0x210d94=await exchange[_0x4524e5(0x23b)](_0xa48d1c[_0x4524e5(0x141)]),_0x210d94['length']>0x0&&allOpenOrders[_0x4524e5(0x2fe)](_0x210d94[0x0]));}}catch(_0x3af24d){await handleError(_0x3af24d,_0x4524e5(0x1e7));}}async function handleOpenOrders(_0x554d45=0x0){const _0xbab40a=_0x3ab734;allOpenOrders[_0xbab40a(0x179)]==0x0&&lockOrders==ORDERS[_0xbab40a(0x1c5)]&&allOrdersPlaced&&(_0x554d45==0x0?(logger[_0xbab40a(0x28f)](_0xbab40a(0x227)),_0x554d45++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0xbab40a(0x28f)](_0xbab40a(0x18e)),validateOrders('no\x20open\x20orders')));}async function testAPI(){const _0x5a7d5c=_0x3ab734;try{return await exchange[_0x5a7d5c(0x184)](),!![];}catch(_0x3bbc21){return loading['cancel']=!![],_0x3bbc21['toString']()[_0x5a7d5c(0x1c4)]()[_0x5a7d5c(0x2e0)](_0x5a7d5c(0x21a))||_0x3bbc21[_0x5a7d5c(0x274)]()['toLowerCase']()[_0x5a7d5c(0x2e0)]('request-time')?(logHistory('error',_0x5a7d5c(0x19d)),loading[_0x5a7d5c(0x256)]=_0x5a7d5c(0x2a4)):(handleErrorNoStop(_0x3bbc21,'testAPI()'),logger['debug'](_0x5a7d5c(0x2b7),_0x3bbc21)),emitLoadingProgress(),botPaused=!![],![];}}async function testNewAPI(_0x320cc8){const _0x3b2a50=_0x3ab734;logger[_0x3b2a50(0x28f)](_0x3b2a50(0x16d));const _0x299e58=ccxt[_0x3b2a50(0x305)][_0x320cc8['exchange'][_0x3b2a50(0x1c4)]()],_0x424382=new _0x299e58({'apiKey':_0x320cc8[_0x3b2a50(0x1d4)],'secret':_0x320cc8['apiSecret'],'options':{'defaultType':'spot'}});if(_0x320cc8[_0x3b2a50(0x18b)])_0x424382['password']=_0x320cc8[_0x3b2a50(0x18b)];if(_0x424382['has'][_0x3b2a50(0x2c5)])_0x424382[_0x3b2a50(0x309)](_0x320cc8[_0x3b2a50(0x2c5)]);try{await _0x424382[_0x3b2a50(0x184)](),botPaused=![];}catch(_0x22440f){logger[_0x3b2a50(0x28f)](_0x3b2a50(0x16e)+_0x22440f[_0x3b2a50(0x274)]());throw _0x22440f;}}function cloneDeep(_0x372e19){const _0x53edfc=_0x3ab734;return JSON['parse'](JSON[_0x53edfc(0x1fb)](_0x372e19));}async function getPortfolio(_0x437f49){const _0x5593f0=_0x3ab734;let _0x4961da=[],_0x11430f=[],_0x85bd54=[],_0x519dd9;_0x437f49[_0x5593f0(0x1d4)]=decryptRSA(secure[_0x5593f0(0x143)],_0x437f49[_0x5593f0(0x1d4)]),_0x437f49['apiSecret']=decryptRSA(secure['privateKey'],_0x437f49[_0x5593f0(0x1d5)]);if(_0x437f49[_0x5593f0(0x18b)])_0x437f49[_0x5593f0(0x18b)]=decryptRSA(secure[_0x5593f0(0x143)],_0x437f49[_0x5593f0(0x18b)]);if(_0x437f49[_0x5593f0(0x1d4)]!=='************'||_0x437f49['apiSecret']!==_0x5593f0(0x151)||_0x437f49[_0x5593f0(0x18b)]&&_0x437f49[_0x5593f0(0x18b)]!=='************'){if(config[_0x5593f0(0x16a)]){if(_0x437f49[_0x5593f0(0x1d4)]=='************')_0x437f49['apiKey']=config[_0x5593f0(0x1d4)];if(_0x437f49[_0x5593f0(0x1d5)]==_0x5593f0(0x151))_0x437f49[_0x5593f0(0x1d5)]=config[_0x5593f0(0x1d5)];if(_0x437f49[_0x5593f0(0x18b)]==_0x5593f0(0x151))_0x437f49[_0x5593f0(0x18b)]=config['apiPassword'];}try{if(_0x437f49[_0x5593f0(0x2eb)])await testNewAPI(_0x437f49);}catch(_0x24b063){if(_0x24b063[_0x5593f0(0x274)]()[_0x5593f0(0x2e0)](_0x5593f0(0x301))){logHistory(_0x5593f0(0x256),_0x5593f0(0x230)),logHistory(_0x5593f0(0x256),'Error\x20details:\x20'+_0x24b063[_0x5593f0(0x274)]()),proxyEmit(_0x5593f0(0x142),![]);return;}else{if(_0x24b063[_0x5593f0(0x274)]()[_0x5593f0(0x2e0)](_0x5593f0(0x243))){logHistory(_0x5593f0(0x256),_0x5593f0(0x1a5)),logHistory('error','Error\x20details:\x20'+_0x24b063[_0x5593f0(0x274)]()),proxyEmit('portfolio1',![]);return;}else{logHistory(_0x5593f0(0x256),_0x5593f0(0x282)+_0x24b063['toString']()),logger[_0x5593f0(0x28f)](_0x5593f0(0x2b7),_0x24b063),proxyEmit('portfolio1',![]);return;}}}exchange?updateExchange(_0x437f49[_0x5593f0(0x1d4)],_0x437f49[_0x5593f0(0x1d5)],_0x437f49[_0x5593f0(0x18b)]):await initExchange(_0x437f49[_0x5593f0(0x16a)],_0x437f49[_0x5593f0(0x1d4)],_0x437f49[_0x5593f0(0x1d5)],_0x437f49[_0x5593f0(0x18b)],_0x437f49[_0x5593f0(0x2c5)]);await loadSymbols();const _0x911c69=await getCoins(0x0,![],_0x437f49[_0x5593f0(0x26f)]);_0x85bd54=cloneDeep(_0x911c69[0x1]);}else{const _0x4425c4=await getCoins();_0x85bd54=cloneDeep(_0x4425c4[0x1]);}if(_0x437f49[_0x5593f0(0x26f)]=='')proxyEmit(_0x5593f0(0x142),!![]),proxyEmit(_0x5593f0(0x1e3),_0x85bd54);else{_0x85bd54[_0x5593f0(0x1a4)](_0x56ff7=>{const _0x48417d=_0x5593f0;if(_0x56ff7[_0x48417d(0x1e4)]!=_0x437f49[_0x48417d(0x26f)]&&allSymbols['includes'](_0x56ff7[_0x48417d(0x141)]))_0x4961da[_0x48417d(0x2fe)](_0x56ff7['symbol']);});if(_0x4961da['length']==0x0)logHistory('error','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot');else{try{_0x11430f=await getTickers(_0x4961da);}catch(_0x248745){logHistory(_0x5593f0(0x256),_0x5593f0(0x16c)),logger['debug'](_0x5593f0(0x2b7),_0x248745),proxyEmit('portfolio1',![]);return;}_0x85bd54[_0x5593f0(0x1a4)](_0x194a44=>{const _0x4b54d2=_0x5593f0;_0x194a44[_0x4b54d2(0x1e4)]!=_0x437f49[_0x4b54d2(0x26f)]?_0x11430f[_0x194a44[_0x4b54d2(0x141)]]?_0x11430f[_0x194a44[_0x4b54d2(0x141)]][_0x4b54d2(0x1bc)]?_0x519dd9=_0x194a44['reverse']?0x1/_0x11430f[_0x194a44['symbol']][_0x4b54d2(0x1bc)]:_0x11430f[_0x194a44[_0x4b54d2(0x141)]][_0x4b54d2(0x1bc)]:_0x519dd9=0x0:_0x519dd9=0x0:_0x519dd9=0x1,_0x194a44[_0x4b54d2(0x14d)]=formatResult(_0x519dd9,0x8);}),await getMarketCap(_0x85bd54),proxyEmit(_0x5593f0(0x142),!![]),proxyEmit(_0x5593f0(0x1e3),_0x85bd54);}}}function truncateTradeAmount(_0x3a7e76,_0x1250e7){const _0x53dcb0=_0x3ab734;let _0x370ce7=0x0;try{_0x370ce7=exchange[_0x53dcb0(0x239)](_0x3a7e76,_0x1250e7);}catch(_0x44bc15){}return _0x370ce7;}function checkMinimums(_0x25e5ae){const _0x9954f8=_0x3ab734;let _0x588991=!![];const _0x5dd85b=!_0x25e5ae[_0x9954f8(0x2e5)]?markets[_0x25e5ae[_0x9954f8(0x141)]][_0x9954f8(0x29c)]['amount']['min']:markets[_0x25e5ae[_0x9954f8(0x141)]][_0x9954f8(0x29c)][_0x9954f8(0x2c6)][_0x9954f8(0x20f)],_0x42792a=!_0x25e5ae[_0x9954f8(0x2e5)]?markets[_0x25e5ae[_0x9954f8(0x141)]][_0x9954f8(0x29c)][_0x9954f8(0x2c6)][_0x9954f8(0x20f)]:markets[_0x25e5ae[_0x9954f8(0x141)]][_0x9954f8(0x29c)][_0x9954f8(0x13a)][_0x9954f8(0x20f)],_0x5ab4c7=truncateTradeAmount(_0x25e5ae[_0x9954f8(0x141)],_0x25e5ae[_0x9954f8(0x2a7)]);_0x25e5ae['trade']=_0x5ab4c7;if(Math[_0x9954f8(0x182)](_0x5ab4c7)<_0x5dd85b)_0x588991=![];if(Math[_0x9954f8(0x182)](_0x5ab4c7)*_0x25e5ae['last']<_0x42792a)_0x588991=![];if(_0x25e5ae[_0x9954f8(0x165)]==_0x9954f8(0x161)){let _0x3d62ad=config[_0x9954f8(0x183)][_0x9954f8(0x191)](_0x3ac8bb=>_0x3ac8bb[_0x9954f8(0x1e4)]==_0x25e5ae['coin']);if(_0x3d62ad['offset']>0x0){if(Math['abs'](_0x5ab4c7)>_0x25e5ae[_0x9954f8(0x2f5)]-_0x3d62ad[_0x9954f8(0x1fa)])_0x588991=![];}else{if(Math[_0x9954f8(0x182)](_0x5ab4c7)>_0x25e5ae['number'])_0x588991=![];}}if(_0x25e5ae[_0x9954f8(0x165)]==_0x9954f8(0x172)){let _0x6d31c=config[_0x9954f8(0x183)]['find'](_0xa14561=>_0xa14561[_0x9954f8(0x1e4)]==config['basecoin']),_0x332380=currentCoins['find'](_0x2dfc2d=>_0x2dfc2d['coin']==config['basecoin']);if(_0x6d31c['offset']>0x0){if(Math['abs'](_0x5ab4c7)*_0x25e5ae['last']>_0x332380[_0x9954f8(0x2f5)]-_0x6d31c[_0x9954f8(0x1fa)])_0x588991=![];}else{if(Math[_0x9954f8(0x182)](_0x5ab4c7)*_0x25e5ae[_0x9954f8(0x1bc)]>_0x332380[_0x9954f8(0x2f5)])_0x588991=![];}}return _0x588991;}async function getBalances(_0x3298ff=!![]){const _0x467019=_0x3ab734;if(botPaused)return;let _0x5a36c8=0x0,_0x186dde;const _0x594e0d=config[_0x467019(0x289)];if(config[_0x467019(0x234)]&&config['change24h']<0x0)await validate24hChanges();currentCoins[_0x467019(0x1a4)](_0x57d430=>{const _0x4a0d66=_0x467019;if(_0x57d430[_0x4a0d66(0x1e4)]!=config[_0x4a0d66(0x26f)]){let _0x392be5=gTicker[noslash(_0x57d430[_0x4a0d66(0x141)])];_0x186dde=_0x57d430[_0x4a0d66(0x2e5)]?0x1/_0x392be5:_0x392be5;}else _0x186dde=0x1;let _0x205013=_0x57d430['number']*_0x186dde;_0x5a36c8+=_0x205013,_0x57d430['last']=formatResult(Number(_0x186dde),0x8),_0x57d430['value']=_0x205013;}),currentCoins[_0x467019(0x1a4)](_0x508dec=>{const _0x427f25=_0x467019;let _0x27b7ba=config['portfolio'][_0x427f25(0x191)](_0x48942e=>_0x48942e[_0x427f25(0x1e4)]==_0x508dec[_0x427f25(0x1e4)]),_0x46994b=Number(_0x27b7ba[_0x427f25(0x225)]),_0x38a265=_0x508dec[_0x427f25(0x208)]/_0x5a36c8*0x64,_0x3aa34c=_0x46994b*_0x5a36c8/0x64/_0x508dec[_0x427f25(0x1bc)]-_0x508dec['number'];_0x508dec[_0x427f25(0x225)]=formatResult(_0x38a265,0x3),_0x508dec[_0x427f25(0x276)]=formatResult(_0x46994b,0x3),_0x508dec[_0x427f25(0x2a7)]=formatResult(_0x3aa34c,0x8),_0x508dec[_0x427f25(0x165)]='',_0x508dec[_0x427f25(0x21b)]=![];if(_0x508dec[_0x427f25(0x1e4)]!=config[_0x427f25(0x26f)]){if(_0x508dec[_0x427f25(0x225)]>_0x46994b)_0x508dec[_0x427f25(0x165)]='sell',_0x508dec[_0x427f25(0x21b)]=checkMinimums(_0x508dec);else _0x508dec[_0x427f25(0x225)]<_0x46994b&&(_0x508dec[_0x427f25(0x165)]='buy',_0x508dec[_0x427f25(0x21b)]=checkMinimums(_0x508dec));}_0x508dec[_0x427f25(0x2f9)]=_0x508dec[_0x427f25(0x225)]/_0x508dec[_0x427f25(0x276)]-0x1;if(_0x508dec[_0x427f25(0x156)]==_0x427f25(0x14c)||_0x508dec[_0x427f25(0x156)]==_0x427f25(0x2e8))_0x508dec[_0x427f25(0x156)]=_0x427f25(0x1e1);}),currentCoins[_0x467019(0x22a)]((_0x4b19b5,_0x2cece0)=>_0x4b19b5['delta']<_0x2cece0[_0x467019(0x2f9)]?0x1:_0x2cece0[_0x467019(0x2f9)]<_0x4b19b5['delta']?-0x1:0x0);const _0x2a2306=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x2a2306['eur'],'usd':_0x2a2306['usd'],'portfolio':JSON[_0x467019(0x1fb)](currentCoins),'threshold':_0x594e0d},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});if(_0x3298ff){if(config[_0x467019(0x234)])headlessMode({'portfolio':currentCoins,'threshold':_0x594e0d});else lockOrders==ORDERS[_0x467019(0x150)]&&!coolingDown&&notifyBalance({'portfolio':currentCoins,'threshold':_0x594e0d});}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x23a173=getNormalizedPerformance();getStartingBalances(_0x23a173),emitPerformance(_0x23a173);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}function getPnL(){const _0x409f01=_0x3ab734;let _0x22e2fa=dbCoinResults[_0x409f01(0x315)](_0x409f01(0x20b))[_0x409f01(0x208)](),_0x434159=0x0;return Object[_0x409f01(0x1f0)](_0x22e2fa)[_0x409f01(0x1a4)](([_0x301730,_0x2f3b54])=>{const _0x2e9466=_0x409f01;_0x434159+=_0x2f3b54[_0x2e9466(0x181)];}),_0x434159;}async function storePerformance(){const _0x2d9a22=_0x3ab734;if(!lastBalances)return;let _0x4ac2df=[],_0x1433ac;const _0x42e6e9=getPnL();let _0x4592e5=JSON[_0x2d9a22(0x2f7)](lastBalances[_0x2d9a22(0x183)]);_0x4592e5[_0x2d9a22(0x22a)]((_0x26e425,_0x4dd389)=>_0x26e425[_0x2d9a22(0x1e4)]>_0x4dd389[_0x2d9a22(0x1e4)]?0x1:_0x4dd389[_0x2d9a22(0x1e4)]>_0x26e425[_0x2d9a22(0x1e4)]?-0x1:0x0),_0x4592e5[_0x2d9a22(0x1a4)](_0x49cd67=>{let _0x2d0788={'coin':_0x49cd67['coin'],'number':_0x49cd67['number'],'price':_0x49cd67['last']};_0x4ac2df['push'](_0x2d0788);});const _0x358815=await getFiat(),_0x90023b=getTimeStamp()[_0x2d9a22(0x284)]('\x20')[0x0],_0x47242c=dbPerformance[_0x2d9a22(0x315)](_0x2d9a22(0x286))[_0x2d9a22(0x191)]({'date':_0x90023b})[_0x2d9a22(0x208)]();_0x1433ac={'date':_0x90023b,'eur':_0x358815['eur'],'usd':_0x358815[_0x2d9a22(0x275)],'coins':_0x4ac2df,'pnl':_0x42e6e9},_0x47242c?_0x1433ac['date']!=config[_0x2d9a22(0x22b)]&&dbPerformance[_0x2d9a22(0x315)](_0x2d9a22(0x286))[_0x2d9a22(0x191)]({'date':_0x90023b})[_0x2d9a22(0x13d)](_0x1433ac)['write']():dbPerformance[_0x2d9a22(0x315)](_0x2d9a22(0x286))[_0x2d9a22(0x2fe)](_0x1433ac)['write'](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x355d83=_0x3ab734;let _0x1d7b77=[];if(dbPerformance[_0x355d83(0x311)](_0x355d83(0x286))[_0x355d83(0x208)]()){let _0x436e7c=dbPerformance[_0x355d83(0x315)]('data')[_0x355d83(0x2d0)]()['filter'](_0x57bf08=>{const _0x4609ac=_0x355d83;if(_0x57bf08[_0x4609ac(0x20b)][_0x4609ac(0x179)]==0x0)return![];else return!![];})[_0x355d83(0x1a0)]('date')[_0x355d83(0x208)](),_0x536422=[...config[_0x355d83(0x163)]];_0x536422[_0x355d83(0x22a)]((_0x55a4ce,_0x2e4948)=>_0x55a4ce['date']>_0x2e4948[_0x355d83(0x1da)]?-0x1:_0x2e4948[_0x355d83(0x1da)]>_0x55a4ce['date']?0x1:0x0);let _0x436b94=0x1,_0x520b0f=[],_0x2c4ff0=0x0;_0x436e7c[_0x355d83(0x313)]()[_0x355d83(0x2e5)]()['forEach']((_0x494984,_0x5097ab)=>{const _0x267507=_0x355d83;if(_0x536422[_0x2c4ff0]){if(_0x436e7c[_0x436e7c[_0x267507(0x179)]-_0x5097ab]&&_0x536422[_0x2c4ff0]['date']==_0x436e7c[_0x436e7c[_0x267507(0x179)]-_0x5097ab][_0x267507(0x1da)]){if(_0x5097ab<_0x436e7c[_0x267507(0x179)]){let _0xcf1dfd=0x0,_0x82df26=0x0;_0x436e7c[_0x436e7c[_0x267507(0x179)]-_0x5097ab][_0x267507(0x20b)][_0x267507(0x1a4)](_0x380446=>{const _0x14e2f9=_0x267507;_0x82df26+=_0x380446[_0x14e2f9(0x2f5)]*_0x380446[_0x14e2f9(0x14d)];}),_0x536422[_0x2c4ff0][_0x267507(0x155)]['forEach'](_0x3187f8=>{const _0x12939a=_0x267507;_0xcf1dfd+=_0x3187f8['number']*_0x3187f8[_0x12939a(0x14d)];}),_0x436b94*=_0xcf1dfd/(_0x82df26-_0xcf1dfd)+0x1;}_0x2c4ff0++;}}let _0x5a2acd=0x0;_0x494984[_0x267507(0x20b)][_0x267507(0x1a4)](_0x5502f2=>{const _0xc9af69=_0x267507;_0x5a2acd+=_0x5502f2['number']*_0x5502f2[_0xc9af69(0x14d)];}),_0x520b0f[_0x436e7c[_0x267507(0x179)]-_0x5097ab-0x1]=_0x5a2acd*(_0x436b94-0x1);});let _0x158935=[];_0x536422=[...config['liquidity']]||[];let _0x405634=0x0;_0x2c4ff0=0x0,_0x436e7c[_0x355d83(0x1a4)]((_0x31c3bc,_0x32b275)=>{const _0x3e6dd2=_0x355d83;if(_0x536422[_0x2c4ff0]){const _0x4f991c=fns['parse'](_0x536422[_0x2c4ff0][_0x3e6dd2(0x1da)],_0x3e6dd2(0x30b),new Date()),_0x518395=fns[_0x3e6dd2(0x2f7)](_0x31c3bc[_0x3e6dd2(0x1da)],_0x3e6dd2(0x30b),new Date());if(fns[_0x3e6dd2(0x2ff)](_0x4f991c,_0x518395)){let _0x2c37f5=0x0;_0x536422[_0x2c4ff0][_0x3e6dd2(0x155)][_0x3e6dd2(0x1a4)](_0x5e428a=>{const _0x4efea9=_0x3e6dd2;!_0x158935[_0x5e428a[_0x4efea9(0x1e4)]]?_0x158935[_0x5e428a['coin']]=_0x5e428a[_0x4efea9(0x2f5)]:(_0x2c37f5=_0x158935[_0x5e428a[_0x4efea9(0x1e4)]],_0x158935[_0x5e428a[_0x4efea9(0x1e4)]]+=_0x5e428a[_0x4efea9(0x2f5)]);const _0x282ad5=_0x31c3bc[_0x4efea9(0x20b)][_0x4efea9(0x191)](_0x18940c=>_0x18940c[_0x4efea9(0x1e4)]==_0x5e428a['coin']);(!_0x282ad5||_0x282ad5[_0x4efea9(0x2f5)]==0x0)&&(_0x405634+=(-_0x5e428a[_0x4efea9(0x2f5)]-_0x2c37f5)*_0x5e428a[_0x4efea9(0x14d)]);}),_0x2c4ff0++;}}_0x31c3bc['coins']['forEach']((_0x5bf18c,_0x1bd8c4)=>{const _0x5a5b07=_0x3e6dd2;_0x158935[_0x5bf18c[_0x5a5b07(0x1e4)]]&&(_0x5bf18c['initial']=_0x158935[_0x5bf18c[_0x5a5b07(0x1e4)]]);}),_0x1d7b77[_0x3e6dd2(0x2fe)]({'date':_0x31c3bc[_0x3e6dd2(0x1da)],'eur':_0x31c3bc[_0x3e6dd2(0x153)],'usd':_0x31c3bc['usd'],'offset':_0x520b0f[_0x32b275],'netoffset':_0x405634,'coins':_0x31c3bc['coins'],'pnl':_0x31c3bc['pnl']});});}return _0x1d7b77;}function emitPerformance(_0x1af217){const _0x3b1bfa=_0x3ab734;_0x1af217[_0x3b1bfa(0x179)]!==0x0?(proxyEmit(_0x3b1bfa(0x2dd),_0x1af217),lastPerformanceEmitted=getDate()):proxyEmit(_0x3b1bfa(0x2dd),[]);}function getPerf(_0x35d02b,_0xe2d838){const _0x339274=_0x3ab734;let _0x2e1db8=0x0,_0x296692=0x0,_0xcb5bd6=0x0;_0x35d02b[_0x339274(0x20b)][_0x339274(0x1a4)](_0x3c98c8=>{const _0x1df4d8=_0x339274;_0x2e1db8+=_0x3c98c8[_0x1df4d8(0x2f5)]*_0x3c98c8[_0x1df4d8(0x14d)];});_0xe2d838&&(_0x2e1db8+=_0x35d02b['offset']);if(config['basecoin']==='BTC'||config[_0x339274(0x26f)]===_0x339274(0x2f8)||config['basecoin']==='PAXG')_0x296692=_0x2e1db8*_0x35d02b[_0x339274(0x153)],_0xcb5bd6=_0x2e1db8*_0x35d02b['usd'];else{if(usdBasecoins[_0x339274(0x2e0)](config[_0x339274(0x26f)]))_0x296692=_0x2e1db8*_0x35d02b[_0x339274(0x153)]/_0x35d02b['usd'],_0xcb5bd6=_0x2e1db8;else config[_0x339274(0x26f)]===_0x339274(0x15c)&&(_0x296692=_0x2e1db8,_0xcb5bd6=_0x2e1db8*_0x35d02b[_0x339274(0x275)]/_0x35d02b['eur']);}return[_0x2e1db8,_0x296692,_0xcb5bd6];}function CurrencyFactor(_0x2f51c5,_0x5c0fe8,_0x1bb387){const _0x2c59cd=_0x3ab734;let _0x45f0c1;if(_0x5c0fe8===_0x2c59cd(0x237)||_0x5c0fe8===_0x2c59cd(0x2f8)||_0x5c0fe8===_0x2c59cd(0x2ef))_0x45f0c1=_0x1bb387==='EUR'?_0x2f51c5[_0x2c59cd(0x153)]:_0x2f51c5[_0x2c59cd(0x275)];else{if(usdBasecoins[_0x2c59cd(0x2e0)](_0x5c0fe8))_0x45f0c1=_0x1bb387===_0x2c59cd(0x15c)?_0x2f51c5[_0x2c59cd(0x153)]/_0x2f51c5[_0x2c59cd(0x275)]:0x1;else _0x5c0fe8===_0x2c59cd(0x15c)&&(_0x45f0c1=_0x1bb387===_0x2c59cd(0x15c)?0x1:_0x2f51c5['usd']/_0x2f51c5[_0x2c59cd(0x153)]);}return _0x45f0c1;}function getKPIs(_0x493054,_0xe35734='EUR'){const _0x5eff8e=_0x3ab734,_0x1d85a5=config[_0x5eff8e(0x26f)],_0x5023e8=lastBalances,_0x3ef4cd=currentCoins,_0x2039e0=getNormalizedPerformance(),_0x3b6a03=CurrencyFactor(_0x5023e8,config[_0x5eff8e(0x26f)],_0xe35734);let _0x10ea15=0x0;_0x3ef4cd[_0x5eff8e(0x1a4)](_0x41084e=>{const _0x75830c=_0x5eff8e;_0x10ea15+=_0x41084e[_0x75830c(0x2f5)]*_0x41084e[_0x75830c(0x1bc)];});_0x493054['includes']('fiat')&&(_0x10ea15*=_0x3b6a03);let _0x26a938;if(_0x10ea15!==0x0){if(_0x493054===_0x5eff8e(0x26f)||_0x493054==='fiat'){if(_0x493054===_0x5eff8e(0x26f))_0x26a938=(_0x10ea15/startingBalances[_0x5eff8e(0x26f)]-0x1)*0x64;else{if(_0xe35734===_0x5eff8e(0x15c))_0x26a938=(_0x10ea15/startingBalances['eur']-0x1)*0x64;else _0x26a938=(_0x10ea15/startingBalances[_0x5eff8e(0x275)]-0x1)*0x64;}}if(_0x493054[_0x5eff8e(0x2e0)](_0x5eff8e(0x1b7))){let _0x576492=0x0;if(startingBalances[_0x5eff8e(0x20b)])_0x3ef4cd['forEach'](_0x39e2c=>{const _0x34f923=_0x5eff8e;let _0x5e20a0=startingBalances[_0x34f923(0x20b)][_0x34f923(0x191)](_0x38b47f=>_0x38b47f[_0x34f923(0x1e4)]===_0x39e2c[_0x34f923(0x1e4)]);if(_0x5e20a0&&_0x5e20a0[_0x34f923(0x1e4)]&&_0x39e2c[_0x34f923(0x2f5)]!==0x0)_0x576492+=_0x5e20a0[_0x34f923(0x2f5)]*_0x39e2c[_0x34f923(0x1bc)];});let _0x92246d=0x0;if(_0x2039e0[_0x5eff8e(0x179)]!==0x0){let _0x3123d8=_0x2039e0[_0x2039e0[_0x5eff8e(0x179)]-0x1];_0x92246d=_0x3123d8[_0x5eff8e(0x1e6)];}_0x576492-=_0x92246d;let _0xf7eb65;_0x493054==='net-basecoin'&&(_0xf7eb65=startingBalances[_0x5eff8e(0x26f)]),_0x493054===_0x5eff8e(0x14e)&&(_0xf7eb65=_0xe35734===_0x5eff8e(0x15c)?startingBalances[_0x5eff8e(0x153)]:startingBalances[_0x5eff8e(0x275)],_0x576492*=_0x3b6a03),_0x26a938=(_0x10ea15-_0x576492)/_0xf7eb65*0x64,_0x10ea15=_0x10ea15-_0x576492;}if(_0x493054[_0x5eff8e(0x2e0)](_0x5eff8e(0x1fd))){if(_0x2039e0[_0x5eff8e(0x179)]!==0x0&&_0x3ef4cd[_0x5eff8e(0x179)]!==0x0){let _0xc8f2ff,_0x5bfbd7=_0x2039e0[_0x2039e0[_0x5eff8e(0x179)]-0x1][_0x5eff8e(0x1fd)];_0x493054['includes']('fiat')?(_0xc8f2ff=_0xe35734===_0x5eff8e(0x15c)?startingBalances[_0x5eff8e(0x153)]:startingBalances[_0x5eff8e(0x275)],_0x5bfbd7*=CurrencyFactor(_0x5023e8,_0x1d85a5,_0xe35734)):_0xc8f2ff=startingBalances[_0x5eff8e(0x26f)],_0x26a938=_0x5bfbd7/_0xc8f2ff*0x64,_0x10ea15=_0x5bfbd7;}}if(_0x26a938){if(_0x26a938<0x64)_0x26a938=_0x26a938[_0x5eff8e(0x27e)](0x2);else{if(_0x26a938<0x3e8)_0x26a938=_0x26a938[_0x5eff8e(0x27e)](0x1);else _0x26a938=_0x26a938[_0x5eff8e(0x27e)](0x0);}}else _0x26a938=Number('0')['toFixed'](0x2);if(_0x10ea15){if(Math[_0x5eff8e(0x182)](_0x10ea15)<0.000001)_0x10ea15=_0x10ea15[_0x5eff8e(0x27e)](0x2);else{if(Math[_0x5eff8e(0x182)](_0x10ea15)<0.1)_0x10ea15=_0x10ea15[_0x5eff8e(0x27e)](0x6);else{if(Math[_0x5eff8e(0x182)](_0x10ea15)<0x1)_0x10ea15=_0x10ea15['toFixed'](0x5);else{if(Math['abs'](_0x10ea15)<0xa)_0x10ea15=_0x10ea15[_0x5eff8e(0x27e)](0x4);else{if(Math['abs'](_0x10ea15)<0x64)_0x10ea15=_0x10ea15[_0x5eff8e(0x27e)](0x3);else{if(Math['abs'](_0x10ea15)<0x3e8)_0x10ea15=_0x10ea15[_0x5eff8e(0x27e)](0x2);else _0x10ea15=_0x10ea15[_0x5eff8e(0x27e)](0x2);}}}}}}else _0x10ea15=Number('0')[_0x5eff8e(0x27e)](0x2);}else _0x26a938=Number('0')['toFixed'](0x2);if(_0x26a938>=0x0)_0x26a938='+'+_0x26a938;return{'value':_0x10ea15,'change':_0x26a938};}async function getStartingBalances(_0x524d51,_0x102e5c=!![]){const _0x2e45c3=_0x3ab734;if(_0x524d51[_0x2e45c3(0x179)]!==0x0){const [_0x3122e0,_0x3dbc52,_0x37afc6]=getPerf(_0x524d51[0x0],!![]);let _0x39a84b=[];config[_0x2e45c3(0x183)][_0x2e45c3(0x1a4)](_0x18bbf9=>{const _0x472721=_0x2e45c3;let _0x30d9f6=0x0,_0x1010fb;config['liquidity'][_0x472721(0x1a4)](_0x4a6138=>{const _0xb7fdaa=_0x472721;let _0x598e50=_0x4a6138[_0xb7fdaa(0x155)]['find'](_0x582500=>_0x582500[_0xb7fdaa(0x1e4)]==_0x18bbf9[_0xb7fdaa(0x1e4)]);if(_0x598e50){_0x30d9f6+=_0x598e50[_0xb7fdaa(0x2f5)];if(!_0x1010fb)_0x1010fb=_0x598e50[_0xb7fdaa(0x14d)];}}),_0x39a84b[_0x472721(0x2fe)]({'coin':_0x18bbf9[_0x472721(0x1e4)],'number':_0x30d9f6,'initialprice':_0x1010fb});});const _0x514ba7={'basecoin':_0x3122e0,'eur':_0x3dbc52,'usd':_0x37afc6,'coins':_0x39a84b};if(_0x102e5c)proxyEmit(_0x2e45c3(0x220),_0x514ba7);startingBalances=_0x514ba7;}}function headlessMode(_0x29c2a6){const _0x497491=_0x3ab734;let _0x508bf3=_0x29c2a6[_0x497491(0x183)],_0x19813f=_0x29c2a6[_0x497491(0x289)],_0xa42b91=[];for(let _0x414a71 of _0x508bf3){if(_0x414a71[_0x497491(0x1e4)]!=config[_0x497491(0x26f)]){if(_0x414a71[_0x497491(0x2f9)]>=_0x19813f/0x64){if(_0x414a71[_0x497491(0x21b)])_0xa42b91[_0x497491(0x2fe)](_0x414a71);}else{if(_0x414a71[_0x497491(0x2f9)]<=-_0x19813f/0x64){if(_0x414a71[_0x497491(0x21b)])_0xa42b91[_0x497491(0x2fe)](_0x414a71);}}}}_0xa42b91[_0x497491(0x179)]>0x0&&placeOrder(_0xa42b91);}function notifyBalance(_0x5f045e){const _0x5e2a93=_0x3ab734;let _0x2c3239=_0x5f045e['portfolio'],_0x3c04c9=_0x5f045e[_0x5e2a93(0x289)],_0x59163d=[];for(let _0x594d19 of _0x2c3239){if(_0x594d19['coin']!=config[_0x5e2a93(0x26f)]){if(_0x594d19[_0x5e2a93(0x2f9)]>=_0x3c04c9/0x64){if(_0x594d19[_0x5e2a93(0x21b)])_0x59163d[_0x5e2a93(0x2fe)](_0x594d19);}else{if(_0x594d19['delta']<=-_0x3c04c9/0x64){if(_0x594d19[_0x5e2a93(0x21b)])_0x59163d['push'](_0x594d19);}}}}if(_0x59163d[_0x5e2a93(0x179)]>0x0){let _0x48ae23=_0x59163d[_0x5e2a93(0x314)](_0x3ecf84=>_0x3ecf84['coin']);_0x48ae23[_0x5e2a93(0x22a)]();let _0x220612=_0x48ae23[_0x5e2a93(0x204)](',\x20');if(!lastCoinsToBalance)logHistory('warning',_0x5e2a93(0x1b9));lastCoinsToBalance=_0x220612;}}function symbolToCoin(_0x47b611){const _0x5bd4cb=_0x3ab734;let _0x15d688;if(_0x47b611['includes']('/'+config['basecoin']))_0x15d688=_0x47b611[_0x5bd4cb(0x2b0)]('/'+config[_0x5bd4cb(0x26f)],'');if(_0x47b611[_0x5bd4cb(0x2e0)](config[_0x5bd4cb(0x26f)]+'/'))_0x15d688=_0x47b611['replace'](config[_0x5bd4cb(0x26f)]+'/','');return _0x15d688;}function setLockOrders(_0x3c9947){const _0x3f6f22=_0x3ab734;lockOrders=_0x3c9947,logger[_0x3f6f22(0x28f)](_0x3f6f22(0x1be)+Object[_0x3f6f22(0x1f6)](ORDERS)[lockOrders]);}async function unlockOrders(_0x533988=![]){const _0x16dc5a=_0x3ab734;if(allOrdersPlaced&&lockOrders==ORDERS[_0x16dc5a(0x1c5)]){setLockOrders(ORDERS[_0x16dc5a(0x2f6)]);if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);if(_0x533988){const _0x358f88=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x358f88,setBlockTransactionDetection(![]);}validateOrdersState=_0x16dc5a(0x2df),persistOpenOrders([]),setLockOrders(ORDERS[_0x16dc5a(0x150)]);}}async function validateOrders(_0x5cccfb){const _0x389b38=_0x3ab734;if(_0x5cccfb)validateOrdersState=_0x5cccfb;logger[_0x389b38(0x28f)](_0x389b38(0x1cd)+validateOrdersState+'\x20|\x20lock\x20orders:\x20'+Object['keys'](ORDERS)[lockOrders]);let _0xd53c03=[],_0x36d2bc=config['ordertype']==_0x389b38(0x246)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x389b38(0x2f1)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x389b38(0x1c5)])return;logger[_0x389b38(0x28f)]('2\x20-\x20Validate\x20orders:\x20'+validateOrdersState);for(let _0x397072=lastOrders['length']-0x1;_0x397072>=0x0;_0x397072--){let _0x4208fd=lastOrders[_0x397072],_0x4e5da9=![];_0x4208fd[_0x389b38(0x14c)]>0x0&&(_0x4e5da9=!![]),_0xd53c03[_0x389b38(0x2fe)](_0x4e5da9),_0x4e5da9&&config[_0x389b38(0x210)]!='market'&&logHistory('order',_0x389b38(0x1e8)+_0x4208fd[_0x389b38(0x141)]+'\x20'+_0x4208fd['side']+'\x20#'+formatResult(_0x4208fd[_0x389b38(0x14c)],0x8)+'\x20@'+formatResult(_0x4208fd[_0x389b38(0x14d)],0x8)),_0x4e5da9&&lastOrders[_0x389b38(0x25b)](_0x397072,0x1);}persistOpenOrders(lastOrders);const _0x70d834=coolingDown?_0x389b38(0x238):_0x389b38(0x306);if(validateOrdersState==_0x389b38(0x2df)){validateOrdersState=_0x389b38(0x28e);if(_0xd53c03[_0x389b38(0x2e0)](![])){}else await unlockOrders();}else{if(validateOrdersState==_0x389b38(0x28e)){if(_0xd53c03[_0x389b38(0x2e0)](![])){}else await unlockOrders();}else{if(validateOrdersState==_0x389b38(0x1a8))_0xd53c03[_0x389b38(0x2e0)](![])&&(config[_0x389b38(0x210)]==_0x389b38(0x246)?logHistory(_0x389b38(0x272),_0x389b38(0x2e6)+Math[_0x389b38(0x265)](_0x36d2bc*validateOrderInterval/0xea60)+_0x389b38(0x291)+_0x70d834):(await cancelOrders(),logHistory(_0x389b38(0x272),_0x389b38(0x248)+Math[_0x389b38(0x265)](_0x36d2bc*validateOrderInterval/0xea60)+_0x389b38(0x291)+_0x70d834))),await unlockOrders(!![]);else{if(validateOrdersState==_0x389b38(0x2d9)){if(config[_0x389b38(0x210)]!=_0x389b38(0x246))logHistory(_0x389b38(0x272),_0x389b38(0x1e5)+_0x70d834);await unlockOrders(!![]);}}}}}async function cancelOrders(){const _0x548329=_0x3ab734;lastOrders[_0x548329(0x1a4)](async _0x2b0fed=>{const _0x169156=_0x548329;try{const _0x3c4bbc=await exchange[_0x169156(0x2f3)](_0x2b0fed['orderId'],_0x2b0fed[_0x169156(0x141)]);}catch(_0x2aae09){if(_0x2aae09[_0x169156(0x274)]()['includes'](_0x169156(0x136))){}else await handleError(_0x2aae09,_0x169156(0x213));}});}async function initCoinResults(_0x4fd31d){const _0x500fca=_0x3ab734;_0x4fd31d?logger[_0x500fca(0x28f)](_0x500fca(0x23e)+_0x4fd31d):logger['debug']('Initializing\x20coin\x20results'),config[_0x500fca(0x183)][_0x500fca(0x1a4)](_0x372b59=>{const _0x2d0f3c=_0x500fca;if(!_0x372b59['excluded']&&_0x372b59[_0x2d0f3c(0x1e4)]!=config[_0x2d0f3c(0x26f)]){const _0x56e8a7=currentCoins[_0x2d0f3c(0x191)](_0x17975f=>_0x17975f[_0x2d0f3c(0x1e4)]==_0x372b59[_0x2d0f3c(0x1e4)]),_0x4ecf81=gTicker[noslash(_0x372b59[_0x2d0f3c(0x141)])];let _0x1e519a=_0x56e8a7?_0x56e8a7['number']:null,_0x162d8d=_0x372b59['reverse']?0x1/_0x4ecf81:_0x4ecf81,_0x37f664;config[_0x2d0f3c(0x163)]['forEach'](_0x57da62=>{const _0x1b40d6=_0x2d0f3c;!_0x37f664&&(_0x37f664=_0x57da62[_0x1b40d6(0x155)][_0x1b40d6(0x191)](_0x26f4e5=>_0x26f4e5[_0x1b40d6(0x1e4)]==_0x372b59[_0x1b40d6(0x1e4)]),_0x37f664&&(_0x1e519a=_0x37f664[_0x1b40d6(0x2f5)],_0x162d8d=_0x37f664[_0x1b40d6(0x14d)]));});let _0x3754cc=dbCoinResults[_0x2d0f3c(0x315)](_0x2d0f3c(0x20b))['find']({'coin':_0x372b59[_0x2d0f3c(0x1e4)]})[_0x2d0f3c(0x208)]();if(!_0x3754cc){const _0x4eeab3={'coin':_0x372b59['coin'],'number':_0x1e519a,'breakeven':_0x162d8d,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get']('coins')[_0x2d0f3c(0x2fe)](_0x4eeab3)[_0x2d0f3c(0x27f)]();}else{if(_0x4fd31d&&_0x372b59[_0x2d0f3c(0x1e4)]==_0x4fd31d){const _0x189293={'coin':_0x372b59[_0x2d0f3c(0x1e4)],'number':_0x1e519a,'breakeven':_0x162d8d,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x2d0f3c(0x315)]('coins')['find']({'coin':_0x372b59[_0x2d0f3c(0x1e4)]})[_0x2d0f3c(0x13d)](_0x189293)[_0x2d0f3c(0x27f)]();}}}});}async function placeOrder(_0xa2636f){const _0x140b80=_0x3ab734,_0x57bffa=config['ordertype']==_0x140b80(0x246)?_0x140b80(0x246):_0x140b80(0x2af);if(lockOrders==ORDERS[_0x140b80(0x150)]&&!coolingDown){setLockOrders(ORDERS[_0x140b80(0x1c5)]);while(transactionDetectionOngoing){await sleep(0x64);}logger[_0x140b80(0x28f)](_0x140b80(0x1b3)+_0xa2636f[_0x140b80(0x314)](_0x16cc7b=>_0x16cc7b['coin'])['join'](',\x20')),lastCoinsToBalance='',allOrdersPlaced=![],validateOrdersState=_0x140b80(0x2df);let _0x52bb7c=![];lastOrders=[];const _0x3e735d=config[_0x140b80(0x289)];for(const _0xe42d99 of _0xa2636f){let _0x1e41c0,_0x18da49,_0x21013c,_0x4e373b,_0x299cf5,_0x1f1e92=_0xe42d99[_0x140b80(0x141)];logger[_0x140b80(0x28f)](_0x140b80(0x2cf)+_0xe42d99[_0x140b80(0x1e4)]+'\x20'+_0xe42d99['number']+'\x20'+_0xe42d99['last']+'\x20'+_0xe42d99['distribution']+'%\x20'+_0xe42d99[_0x140b80(0x276)]+'%\x20'+(0x64*_0xe42d99[_0x140b80(0x2f9)])['toFixed'](0x2)+_0x140b80(0x290)+_0x3e735d[_0x140b80(0x27e)](0x2)+'%)');const _0x8663b=currentCoins[_0x140b80(0x191)](_0x4240c6=>_0x4240c6[_0x140b80(0x1e4)]==_0xe42d99[_0x140b80(0x1e4)]);_0x8663b&&(_0x8663b[_0x140b80(0x2b3)]=_0xe42d99[_0x140b80(0x2f5)]);try{const _0x296c08=await exchange[_0x140b80(0x23d)](_0x1f1e92);_0x1e41c0=_0xe42d99[_0x140b80(0x2e5)]?0x1/_0xe42d99[_0x140b80(0x1bc)]:_0xe42d99['last'],_0x18da49=_0x296c08[_0x140b80(0x190)],_0x21013c=_0x296c08[_0x140b80(0x1a7)];_0xe42d99[_0x140b80(0x2e5)]?(_0x4e373b=_0xe42d99[_0x140b80(0x165)]==_0x140b80(0x172)?_0x140b80(0x161):_0x140b80(0x172),_0x299cf5=Math['abs'](_0xe42d99[_0x140b80(0x2a7)])/_0x1e41c0):(_0x4e373b=_0xe42d99[_0x140b80(0x165)],_0x299cf5=Math['abs'](_0xe42d99[_0x140b80(0x2a7)]));_0x57bffa==_0x140b80(0x2af)&&(config['ordertype']=='limit-high'&&(_0x1e41c0=_0x4e373b=='buy'?_0x18da49:_0x21013c),config[_0x140b80(0x210)]==_0x140b80(0x186)&&(_0x1e41c0=_0x4e373b==_0x140b80(0x172)?_0x21013c:_0x18da49));_0x299cf5=formatResult(_0x299cf5,0x8),_0x1e41c0=formatResult(_0x1e41c0,0x8);const _0x2f25e1=_0x4e373b==_0x140b80(0x161)?config[_0x140b80(0x27c)]?String[_0x140b80(0x1c7)]('0x'+config[_0x140b80(0x27c)])+'\x20':'':config[_0x140b80(0x139)]?String[_0x140b80(0x1c7)]('0x'+config[_0x140b80(0x139)])+'\x20':'',_0x233cab=_0x57bffa=='market'?_0x140b80(0x15e):config[_0x140b80(0x210)]==_0x140b80(0x1c8)?'Limit\x20(high-margin)':_0x140b80(0x304),_0x305bde=(Math[_0x140b80(0x1fc)](Math['random']()*0x35a4e900)+0x5f5e100)[_0x140b80(0x274)]();lastOrders['push']({'customId':_0x305bde,'symbol':_0x1f1e92,'coin':_0xe42d99[_0x140b80(0x1e4)],'amount':_0x299cf5,'price':_0x1e41c0,'side':_0x4e373b,'reverse':_0xe42d99[_0x140b80(0x2e5)],'filled':0x0});let _0x380c61;_0x57bffa==_0x140b80(0x246)?_0x4e373b==_0x140b80(0x172)&&[_0x140b80(0x2bb),_0x140b80(0x255),_0x140b80(0x241),'Huobi',_0x140b80(0x209)][_0x140b80(0x2e0)](config['exchange'])?_0x380c61=await exchange[_0x140b80(0x1b5)](_0x1f1e92,_0x57bffa,_0x4e373b,_0x299cf5,_0x1e41c0):_0x380c61=await exchange[_0x140b80(0x1b5)](_0x1f1e92,_0x57bffa,_0x4e373b,_0x299cf5,undefined):_0x380c61=await exchange['createOrder'](_0x1f1e92,_0x57bffa,_0x4e373b,_0x299cf5,_0x1e41c0);const _0x52b01f=lastOrders[_0x140b80(0x179)]-0x1;if(_0x52b01f>=0x0&&lastOrders[_0x52b01f][_0x140b80(0x28a)]==_0x305bde){lastOrders[_0x52b01f][_0x140b80(0x30f)]=_0x380c61['id'];if(_0x380c61[_0x140b80(0x13a)])lastOrders[_0x52b01f][_0x140b80(0x13a)]=_0x380c61[_0x140b80(0x13a)];if(_0x380c61['price'])lastOrders[_0x52b01f][_0x140b80(0x14d)]=_0x380c61[_0x140b80(0x14d)];lastOrders[_0x52b01f][_0x140b80(0x292)]=_0x380c61[_0x140b80(0x292)];}if(_0x380c61[_0x140b80(0x13a)])_0x299cf5=_0x380c61[_0x140b80(0x13a)];if(_0x380c61[_0x140b80(0x14d)])_0x1e41c0=_0x380c61[_0x140b80(0x14d)];if(_0x57bffa=='market')logHistory(_0x140b80(0x29f),''+_0x2f25e1+_0x233cab+'\x20order:\x20'+_0x1f1e92+'\x20'+_0x4e373b+'\x20#'+formatResult(_0x299cf5,0x8)+'\x20@'+formatResult(_0x1e41c0,0x8));else logHistory(_0x140b80(0x29f),''+_0x2f25e1+_0x233cab+'\x20order:\x20'+_0x1f1e92+'\x20'+_0x4e373b+'\x20#'+formatResult(_0x299cf5,0x8)+'\x20@'+formatResult(_0x1e41c0,0x8));logger['debug'](_0x140b80(0x308)+_0x380c61['id']+'\x20|\x20Custom\x20ID:\x20'+_0x305bde);if(config['cooldown']!=0x0){let _0x323411=null;if(cooldownTracker['length']==config[_0x140b80(0x192)]-0x1)_0x323411=cooldownTracker[_0x140b80(0x25a)]();const _0x452c71=getTimeStamp();cooldownTracker['push'](_0x452c71);if(_0x323411){const _0x262cfa=fns[_0x140b80(0x29a)](new Date(_0x452c71),new Date(_0x323411));if(_0x262cfa<cooldownInterval){logHistory('error',_0x140b80(0x240)+config['cooldown']+_0x140b80(0x218)+cooldownInterval/0x3c+_0x140b80(0x2c0)+cooldownPeriod/(0xe10*0x3e8)+_0x140b80(0x280)),coolingDown=!![];break;}}}}catch(_0x1fe479){if(_0x1fe479[_0x140b80(0x274)]()['includes'](_0x140b80(0x1b1)))lastOrders=lastOrders[_0x140b80(0x317)](_0x537117=>_0x537117[_0x140b80(0x141)]!=_0x1f1e92),logHistory(_0x140b80(0x256),_0x140b80(0x2cb)+_0x1f1e92),_0x52bb7c=!![];else{if(_0x1fe479[_0x140b80(0x274)]()[_0x140b80(0x2e0)]('Invalid\x20quantity'))lastOrders=lastOrders[_0x140b80(0x317)](_0x10817a=>_0x10817a[_0x140b80(0x141)]!=_0x1f1e92),logHistory(_0x140b80(0x256),'Order\x20amount\x20is\x20invalid:\x20'+_0x1f1e92),_0x52bb7c=!![];else{if(_0x1fe479[_0x140b80(0x274)]()[_0x140b80(0x2e0)](_0x140b80(0x21c)))lastOrders=lastOrders[_0x140b80(0x317)](_0x19f341=>_0x19f341[_0x140b80(0x141)]!=_0x1f1e92),logHistory(_0x140b80(0x256),_0x140b80(0x166)+_0x1f1e92),logger[_0x140b80(0x28f)](_0x1fe479),_0x52bb7c=!![];else _0x1fe479[_0x140b80(0x274)]()[_0x140b80(0x2e0)](_0x140b80(0x13e))?(lastOrders=lastOrders['filter'](_0x3ed490=>_0x3ed490[_0x140b80(0x141)]!=_0x1f1e92),logHistory(_0x140b80(0x256),_0x140b80(0x2cb)+_0x1f1e92),_0x52bb7c=!![]):(lastOrders=lastOrders['filter'](_0x56ead1=>_0x56ead1[_0x140b80(0x141)]!=_0x1f1e92),await handleError(_0x1fe479,_0x140b80(0x2c8),_0x1f1e92));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders['length']>0x0){const _0x4c16d5=config[_0x140b80(0x210)]==_0x140b80(0x246)?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x459222=_0x140b80;validateOrders(_0x459222(0x1a8));},_0x4c16d5);}else unlockOrders();_0x52bb7c&&config[_0x140b80(0x234)]&&(logHistory(_0x140b80(0x256),'Avoiding\x20continuous\x20order\x20attempts'+pauseBotMsg),await pauseBot(pauseBotInterval)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory('success',_0x140b80(0x2ab)));}else{if(coolingDown)!config[_0x140b80(0x234)]&&logHistory(_0x140b80(0x256),_0x140b80(0x22e));else lockOrders!=ORDERS[_0x140b80(0x150)]&&(!config[_0x140b80(0x234)]&&(config[_0x140b80(0x210)]=='market'?logHistory(_0x140b80(0x256),_0x140b80(0x174)):logHistory(_0x140b80(0x256),_0x140b80(0x14f))));}}function persistOpenOrders(_0x2e36d4){const _0x27818f=_0x3ab734,_0x3b4eae={...config,'openOrders':_0x2e36d4};let _0x35393d=dbConfig['get'](_0x27818f(0x18f))[_0x27818f(0x191)]({'botID':botID})[_0x27818f(0x208)]();_0x35393d&&dbConfig[_0x27818f(0x315)]('bot')['find']({'botID':botID})[_0x27818f(0x13d)](_0x3b4eae)[_0x27818f(0x27f)]();}function restoreOrders(){const _0x5f322b=_0x3ab734;let _0x4b9e03;config['openOrders']&&allOpenOrders[_0x5f322b(0x1a4)](_0x47194a=>{const _0x4ff761=_0x5f322b,_0x418592=config['openOrders']['find'](_0x3c0d41=>_0x3c0d41['orderId']==_0x47194a['id']);_0x418592&&(lastOrders['push'](_0x418592),_0x4b9e03=_0x47194a[_0x4ff761(0x21a)]);});if(lastOrders['length']>0x0){setLockOrders(ORDERS['LOCKED']),validateOrdersState=_0x5f322b(0x28e),allOrdersPlaced=!![];const _0x4131fb=new Date()[_0x5f322b(0x2a0)](),_0x24c679=config[_0x5f322b(0x210)]==_0x5f322b(0x246)?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(_0x4b9e03+_0x24c679>_0x4131fb){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x2b8694=_0x5f322b;validateOrders(_0x2b8694(0x1a8));},_0x4b9e03+_0x24c679-_0x4131fb);}else validateOrders(_0x5f322b(0x1a8));}}async function sendMetricsTelegram(){const _0x272066=_0x3ab734;if(!coinsLoaded){process[_0x272066(0x2fb)]({'telegrammsg':_0x272066(0x207)},_0x2d1b6b=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x587cc9='';if(config[_0x272066(0x30e)])_0x587cc9=_0x272066(0x2ed)+config[_0x272066(0x198)]+_0x272066(0x279);else _0x587cc9='<b>Bot\x20'+botID+'\x20metrics:</b>\x20\x0a\x0a';const _0x34cb1f=config[_0x272066(0x26f)],_0x550b7d=config[_0x272066(0x1f8)],_0x501217=getKPIs('basecoin'),_0x1bb742=getKPIs(_0x272066(0x1f8),_0x550b7d),_0x2a5561=getKPIs(_0x272066(0x27b)),_0xbca22=getKPIs(_0x272066(0x14e),_0x550b7d),_0x1e7170=getKPIs(_0x272066(0x1ea)),_0x100114=getKPIs(_0x272066(0x201),_0x550b7d);_0x34cb1f[_0x272066(0x2e0)](_0x550b7d)?(_0x587cc9+=_0x272066(0x19f),_0x587cc9+=_0x272066(0x25f)+_0x34cb1f+':\x20'+_0x501217[_0x272066(0x208)]+'\x20('+_0x501217['change']+_0x272066(0x28b),_0x587cc9+='Net\x20'+_0x34cb1f+':\x20'+_0x2a5561['value']+'\x20('+_0x2a5561['change']+_0x272066(0x28b),_0x587cc9+='PnL\x20'+_0x34cb1f+':\x20'+_0x1e7170[_0x272066(0x208)]+'\x20('+_0x1e7170['change']+_0x272066(0x28b),_0x587cc9+='</pre>'):(_0x587cc9+=_0x272066(0x19f),_0x587cc9+=_0x272066(0x25f)+_0x34cb1f+':\x20'+_0x501217[_0x272066(0x208)]+'\x20('+_0x501217[_0x272066(0x196)]+_0x272066(0x28b),_0x587cc9+='Value\x20'+_0x550b7d+':\x20'+_0x1bb742[_0x272066(0x208)]+'\x20('+_0x1bb742['change']+_0x272066(0x28b),_0x587cc9+=_0x272066(0x316)+_0x34cb1f+':\x20'+_0x2a5561['value']+'\x20('+_0x2a5561[_0x272066(0x196)]+_0x272066(0x28b),_0x587cc9+=_0x272066(0x316)+_0x550b7d+':\x20'+_0xbca22[_0x272066(0x208)]+'\x20('+_0xbca22[_0x272066(0x196)]+_0x272066(0x28b),_0x587cc9+=_0x272066(0x21f)+_0x34cb1f+':\x20'+_0x1e7170['value']+'\x20('+_0x1e7170['change']+_0x272066(0x28b),_0x587cc9+=_0x272066(0x21f)+_0x550b7d+':\x20'+_0x100114['value']+'\x20('+_0x100114['change']+_0x272066(0x28b),_0x587cc9+='</pre>'),process[_0x272066(0x2fb)]({'telegrammsg':_0x587cc9},_0x116a43=>{});}async function sendPortfolioTelegram(){const _0x45a37c=_0x3ab734;if(!coinsLoaded||!currentCoins[0x0][_0x45a37c(0x225)]){process[_0x45a37c(0x2fb)]({'telegrammsg':_0x45a37c(0x207)},_0x271307=>{});return;}let _0x4b790c='';if(config[_0x45a37c(0x30e)])_0x4b790c=_0x45a37c(0x2ed)+config[_0x45a37c(0x198)]+_0x45a37c(0x233);else _0x4b790c=_0x45a37c(0x2ca)+botID+_0x45a37c(0x233);_0x4b790c+=_0x45a37c(0x19f),_0x4b790c+=_0x45a37c(0x1db),_0x4b790c+='Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a',_0x4b790c+=_0x45a37c(0x1db),currentCoins[_0x45a37c(0x1a4)](_0x2bff22=>{const _0x6360bd=_0x45a37c;_0x4b790c+=_0x2bff22['coin'][_0x6360bd(0x1dc)](0x7)+'|\x20'+formatPad(_0x2bff22[_0x6360bd(0x225)],0x2,0x6)+'|\x20'+formatPad(_0x2bff22[_0x6360bd(0x276)],0x2,0x6)+'|\x20'+formatPad(_0x2bff22['delta']*0x64,0x2,0x6)+'\x0a';}),_0x4b790c+=_0x45a37c(0x1d0),process[_0x45a37c(0x2fb)]({'telegrammsg':_0x4b790c},_0x5f2597=>{});}function formatPad(_0xaacb,_0x487f31,_0x43a060){const _0x25ed6b=_0x3ab734,_0x266232=formatResultString(_0xaacb,_0x487f31);return _0x266232?_0x266232['padStart'](_0x43a060):''[_0x25ed6b(0x224)](_0x43a060);}function logHistory(_0x2e147e,_0x52f1f3,_0x257748=''){const _0x49037e=_0x3ab734;logger[_0x49037e(0x1ff)](''+_0x52f1f3);let _0x597394={'time':getTimeStamp(),'type':_0x2e147e,'event':_0x52f1f3};dbLogs[_0x49037e(0x315)]('logs')[_0x49037e(0x2fe)](_0x597394)['write']();if(_0x257748=='')_0x257748=_0x52f1f3;proxyEmit(_0x49037e(0x27d),{'log':_0x597394,'summary':_0x257748}),process['send']({'telegram':{..._0x597394,'botname':config[_0x49037e(0x198)],'showname':config[_0x49037e(0x30e)]}},_0x114a83=>{});}function emitHistory(_0x43e377={}){const _0x64eeab=_0x3ab734;Object['keys'](_0x43e377)[_0x64eeab(0x179)]==0x0&&(_0x43e377={'type':[_0x64eeab(0x29f),_0x64eeab(0x27d)],'event':'','page':0x1});if(_0x43e377[_0x64eeab(0x1ce)][_0x64eeab(0x2e0)](_0x64eeab(0x27d)))_0x43e377[_0x64eeab(0x1ce)][_0x64eeab(0x25b)](_0x43e377['type']['indexOf'](_0x64eeab(0x27d)),0x1,_0x64eeab(0x256),_0x64eeab(0x15f),'success');if(dbLogs[_0x64eeab(0x311)](_0x64eeab(0x268))[_0x64eeab(0x208)]()){let _0xc1437c=dbLogs[_0x64eeab(0x315)](_0x64eeab(0x268))['filter'](_0x3b3324=>{const _0x1ec4a5=_0x64eeab;if(_0x43e377[_0x1ec4a5(0x1ce)][_0x1ec4a5(0x179)]==0x0)return![];else return _0x43e377['type']['includes'](_0x3b3324[_0x1ec4a5(0x1ce)]);})[_0x64eeab(0x317)](_0x268481=>{const _0x4c3ba1=_0x64eeab;if(_0x43e377[_0x4c3ba1(0x27d)]=='')return!![];else return _0x268481[_0x4c3ba1(0x27d)][_0x4c3ba1(0x1c4)]()[_0x4c3ba1(0x2e0)](_0x43e377[_0x4c3ba1(0x27d)]['toLowerCase']());})[_0x64eeab(0x1a0)]('time'),_0x4f7225=_0xc1437c['value']()[_0x64eeab(0x179)];_0xc1437c=_0xc1437c[_0x64eeab(0x2e5)]()[_0x64eeab(0x313)]((_0x43e377[_0x64eeab(0x1b6)]-0x1)*logPageSize,_0x43e377[_0x64eeab(0x1b6)]*logPageSize-0x1)[_0x64eeab(0x2e5)]()[_0x64eeab(0x208)](),proxyEmit('event-history',{'logs':_0xc1437c,'total':_0x4f7225});}else proxyEmit(_0x64eeab(0x173),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x12c80c){const _0xb363b9=_0x3ab734;if(dbLogs['has'](_0xb363b9(0x268))[_0xb363b9(0x208)]()){const _0x314795=dbLogs[_0xb363b9(0x315)]('logs')[_0xb363b9(0x1a0)](_0xb363b9(0x1ef))[_0xb363b9(0x317)](_0x8dc1d6=>{return _0x8dc1d6['type']=='order';})[_0xb363b9(0x208)]();dbLogs[_0xb363b9(0x315)](_0xb363b9(0x268))[_0xb363b9(0x188)]()['write'](),dbLogs[_0xb363b9(0x315)](_0xb363b9(0x268))[_0xb363b9(0x13d)](_0x314795)[_0xb363b9(0x27f)](),emitHistory(_0x12c80c);}}async function pauseBot(_0x1edc61=pauseBotIntervalShort,_0x285011,_0x16efb3,_0x2fb210=![]){const _0x5a90fc=_0x3ab734,_0x3116bb=new Date()['getTime']();if(!lastErrorShown||_0x3116bb-lastErrorShown>=_0x1edc61){lastErrorShown=_0x3116bb;if(!lastBotPause)lastBotPause=_0x3116bb,consecutivePauses=0x1;else{if(_0x3116bb-lastBotPause-_0x1edc61<0x5a*0x3e8){consecutivePauses++;if(consecutivePauses>maxPauseRetries){if(_0x2fb210){logHistory(_0x5a90fc(0x256),_0x285011+'\x20>\x20stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();return;}else logHistory(_0x5a90fc(0x256),_0x285011+pauseBotMsg),_0x1edc61=pauseBotInterval;}}else consecutivePauses=0x1;lastBotPause=_0x3116bb;}_0x16efb3?logger[_0x5a90fc(0x28f)]('('+consecutivePauses+')\x20'+_0x285011+_0x5a90fc(0x26e),_0x16efb3):logger[_0x5a90fc(0x28f)]('('+consecutivePauses+')\x20'+_0x285011);if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);await sleep(_0x1edc61),botPaused=![],_0x1edc61==pauseBotIntervalShort?resumeBot(!![]):resumeBot(![]);}}}async function killBot(){const _0x4eef2f=_0x3ab734;botPaused=!![],await sleep(0x3e8),process[_0x4eef2f(0x2fb)]({'stop':'kill'},_0x25038d=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x3bc4b9,_0x4388a5,_0x3b8c9a=![]){const _0xb4a697=_0x3ab734;if(botPaused)return;let _0x1b49cc;const _0x1af0ce=config[_0xb4a697(0x16a)]||'Exchange';if(_0x4388a5)logger[_0xb4a697(0x28f)](_0xb4a697(0x244)+_0x4388a5);const _0x5d234a=()=>{const _0x3d3c5c=_0xb4a697;loading[_0x3d3c5c(0x256)]=_0x3d3c5c(0x271),emitLoadingProgress();};if(_0x3bc4b9[_0xb4a697(0x274)]()[_0xb4a697(0x2e0)]('API-key\x20format\x20invalid'))logHistory(_0xb4a697(0x256),_0x1af0ce+_0xb4a697(0x1f9)),_0x5d234a();else{if(_0x3bc4b9[_0xb4a697(0x274)]()[_0xb4a697(0x2e0)](_0xb4a697(0x2c9)))logHistory(_0xb4a697(0x256),_0x1af0ce+_0xb4a697(0x245)),_0x5d234a();else{if(_0x3bc4b9[_0xb4a697(0x274)]()[_0xb4a697(0x2e0)](_0xb4a697(0x301)))config[_0xb4a697(0x18b)]?_0x1b49cc=_0x1af0ce+_0xb4a697(0x257):_0x1b49cc=_0x1af0ce+_0xb4a697(0x26b),logHistory(_0xb4a697(0x256),_0x1b49cc+_0xb4a697(0x250)),_0x5d234a();else{if(_0x3bc4b9['toString']()[_0xb4a697(0x2e0)](_0xb4a697(0x243)))logHistory('error',_0x1af0ce+_0xb4a697(0x288)),_0x5d234a();else{if(!_0x3b8c9a)await handleError(_0x3bc4b9,null);}}}}}async function handleError(_0x124ae5,_0x45fc0a,_0x37c6d5=''){const _0x2a11ea=_0x3ab734;if(botPaused)return;let _0x17330b;const _0x1c8f9a=config[_0x2a11ea(0x16a)]||_0x2a11ea(0x20e);if(_0x45fc0a)logger[_0x2a11ea(0x28f)](_0x2a11ea(0x244)+_0x45fc0a);if(_0x124ae5[_0x2a11ea(0x274)]()[_0x2a11ea(0x2e0)](_0x2a11ea(0x231)))_0x17330b=_0x1c8f9a+_0x2a11ea(0x2ea),await pauseBot(undefined,_0x17330b,_0x124ae5);else{if(_0x124ae5[_0x2a11ea(0x274)]()[_0x2a11ea(0x2e0)]('RateLimitExceeded'))_0x17330b=_0x1c8f9a+_0x2a11ea(0x221),await pauseBot(undefined,_0x17330b,_0x124ae5);else{if(_0x124ae5['toString']()[_0x2a11ea(0x2e0)]('ExchangeNotAvailable')||_0x124ae5[_0x2a11ea(0x274)]()['includes'](_0x2a11ea(0x259)))_0x17330b=_0x1c8f9a+_0x2a11ea(0x25d),await pauseBot(undefined,_0x17330b,_0x124ae5[_0x2a11ea(0x274)]());else{if(_0x124ae5[_0x2a11ea(0x274)]()[_0x2a11ea(0x2e0)]('RequestTimeout'))_0x17330b=_0x1c8f9a+_0x2a11ea(0x19a),await pauseBot(undefined,_0x17330b,_0x124ae5[_0x2a11ea(0x274)]());else{if(_0x124ae5[_0x2a11ea(0x274)]()[_0x2a11ea(0x2e0)](_0x2a11ea(0x197)))_0x17330b=_0x1c8f9a+_0x2a11ea(0x2db),await pauseBot(undefined,_0x17330b,_0x124ae5['toString']());else{if(_0x124ae5[_0x2a11ea(0x274)]()['toLowerCase']()[_0x2a11ea(0x2e0)](_0x2a11ea(0x21a))||_0x124ae5[_0x2a11ea(0x274)]()[_0x2a11ea(0x1c4)]()[_0x2a11ea(0x2e0)](_0x2a11ea(0x147)))_0x17330b=_0x2a11ea(0x19d),await pauseBot(undefined,_0x17330b,_0x124ae5[_0x2a11ea(0x274)]());else{if(_0x124ae5[_0x2a11ea(0x274)]()['includes'](_0x2a11ea(0x260)))_0x17330b=_0x1c8f9a+'\x20rejected\x20your\x20API\x20request\x20(see:\x20hodlerhacks.com/fix/4)',await pauseBot(undefined,_0x17330b,_0x124ae5[_0x2a11ea(0x274)]());else{if(_0x124ae5 instanceof ccxt[_0x2a11ea(0x13f)])_0x17330b=_0x1c8f9a+_0x2a11ea(0x24e)+_0x124ae5['toString'](),logger[_0x2a11ea(0x28f)](_0x2a11ea(0x2fa),_0x124ae5),await pauseBot(undefined,_0x17330b,_0x124ae5);else{if(_0x124ae5[_0x2a11ea(0x274)]()[_0x2a11ea(0x2e0)](_0x2a11ea(0x2be)))logHistory('error',_0x1c8f9a+_0x2a11ea(0x2a1)),logHistory(_0x2a11ea(0x256),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)'),await killBot();else{if(_0x124ae5[_0x2a11ea(0x274)]()[_0x2a11ea(0x2e0)](_0x2a11ea(0x2c9)))logHistory(_0x2a11ea(0x256),_0x1c8f9a+_0x2a11ea(0x14b)),logHistory('error',_0x2a11ea(0x1b4)),await killBot();else{if(_0x124ae5[_0x2a11ea(0x274)]()[_0x2a11ea(0x2e0)](_0x2a11ea(0x301))&&_0x124ae5[_0x2a11ea(0x274)]()[_0x2a11ea(0x2e0)](_0x2a11ea(0x195)))_0x17330b=_0x1c8f9a+_0x2a11ea(0x25e),await pauseBot(undefined,_0x17330b,_0x124ae5,!![]);else{if(_0x124ae5[_0x2a11ea(0x274)]()[_0x2a11ea(0x2e0)](_0x2a11ea(0x301)))config[_0x2a11ea(0x18b)]?_0x17330b=_0x1c8f9a+_0x2a11ea(0x257):_0x17330b=_0x1c8f9a+_0x2a11ea(0x26b),logHistory(_0x2a11ea(0x256),_0x17330b),logHistory(_0x2a11ea(0x256),_0x2a11ea(0x1b4)),await killBot();else{if(_0x124ae5[_0x2a11ea(0x274)]()['includes']('PermissionDenied'))logHistory('error',_0x1c8f9a+_0x2a11ea(0x22c)),logHistory('error','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)'),await killBot();else{if(_0x124ae5[_0x2a11ea(0x274)]()[_0x2a11ea(0x2e0)](_0x2a11ea(0x215)))logHistory('error','Insufficient\x20funds\x20to\x20execute\x20order:\x20'+_0x37c6d5),logger['debug']('Error\x20details:',_0x124ae5);else{if(_0x124ae5 instanceof ccxt[_0x2a11ea(0x307)]){_0x17330b=_0x1c8f9a+_0x2a11ea(0x21d)+_0x124ae5[_0x2a11ea(0x274)]();if(_0x37c6d5)_0x17330b+=_0x2a11ea(0x285)+_0x37c6d5;await pauseBot(undefined,_0x17330b,_0x124ae5);}else{_0x17330b=_0x2a11ea(0x2d8)+_0x124ae5['toString']();if(_0x37c6d5)_0x17330b+=_0x2a11ea(0x285)+_0x37c6d5;await pauseBot(undefined,_0x17330b);}}}}}}}}}}}}}}}}function decryptRSA(_0xcbc255,_0x1267b3){const _0x3c664f=_0x3ab734,_0x4210ee=forge[_0x3c664f(0x247)][_0x3c664f(0x158)](_0xcbc255),_0x172cc8=_0x4210ee[_0x3c664f(0x216)](forge[_0x3c664f(0x2e4)][_0x3c664f(0x277)](_0x1267b3),_0x3c664f(0x2e1),{'md':forge['md'][_0x3c664f(0x2ce)][_0x3c664f(0x169)](),'mgf1':{'md':forge['md'][_0x3c664f(0x2ce)][_0x3c664f(0x169)]()}});return _0x172cc8;}async function withRetry(_0x1e6c12,_0x2ff2d7){const _0x29fdd1=_0x3ab734;let _0x205b3f=![],_0x575faf=0x0,_0x4e1ee2,_0x80add1;while(_0x575faf<maxRetries){try{_0x4e1ee2=await _0x2ff2d7();break;}catch(_0x811c45){_0x80add1=_0x811c45,!_0x205b3f?(_0x205b3f=!![],logger[_0x29fdd1(0x28f)](_0x29fdd1(0x242)+_0x1e6c12+':',_0x811c45[_0x29fdd1(0x274)]())):await sleep(retryInterval);}_0x575faf++;}if(_0x575faf==0x0)return _0x4e1ee2;if(_0x575faf>=maxRetries)throw _0x80add1;else return logger[_0x29fdd1(0x28f)](_0x29fdd1(0x1cb)+_0x575faf+'\x20attempts'),_0x4e1ee2;}function formatResult(_0x3c00bd,_0x52e889){const _0xde6fcc=_0x3ab734;return parseFloat(_0x3c00bd[_0xde6fcc(0x27e)](_0x52e889));}function formatResultTruncate(_0x18cf5f,_0x35b4d5){const _0x43d1c5=_0x3ab734;let _0x3eb0eb=formatResultString(_0x18cf5f,0xa),_0x2bb007=_0x3eb0eb[_0x43d1c5(0x1c1)]('.');return _0x2bb007!=-0x1&&(_0x3eb0eb=_0x3eb0eb[_0x43d1c5(0x313)](0x0,_0x2bb007+_0x35b4d5+0x1)),Number(_0x3eb0eb);}function formatResultString(_0x9e46d7,_0x2f9f11){const _0x3cf4c8=_0x3ab734;let _0x5947d7;if(!(''+_0x9e46d7)['includes']('e'))_0x5947d7=+(Math[_0x3cf4c8(0x265)](_0x9e46d7+'e+'+_0x2f9f11)+'e-'+_0x2f9f11);else{let _0x3b3d2d=(''+_0x9e46d7)[_0x3cf4c8(0x284)]('e'),_0x25b9a3='';+_0x3b3d2d[0x1]+_0x2f9f11>0x0&&(_0x25b9a3='+'),_0x5947d7=+(Math[_0x3cf4c8(0x265)](+_0x3b3d2d[0x0]+'e'+_0x25b9a3+(+_0x3b3d2d[0x1]+_0x2f9f11))+'e-'+_0x2f9f11);}return Number(_0x5947d7)[_0x3cf4c8(0x27e)](_0x2f9f11);}function getServerTime(){const _0x171bd4=_0x3ab734,_0x5a512b=new Date();return _0x5a512b[_0x171bd4(0x294)]()+'/'+(_0x5a512b[_0x171bd4(0x2c4)]()+0x1)['toString']()[_0x171bd4(0x224)](0x2,'0')+'/'+_0x5a512b[_0x171bd4(0x1b8)]()[_0x171bd4(0x274)]()['padStart'](0x2,'0')+'\x20'+_0x5a512b[_0x171bd4(0x19c)]()[_0x171bd4(0x274)]()[_0x171bd4(0x224)](0x2,'0')+':'+_0x5a512b[_0x171bd4(0x1a3)]()['toString']()['padStart'](0x2,'0')+':'+_0x5a512b['getSeconds']()['toString']()[_0x171bd4(0x224)](0x2,'0');}function getTimeStamp(){const _0x2ebfe6=_0x3ab734,_0x446d4b=shiftedTime();return _0x446d4b['getFullYear']()+'/'+(_0x446d4b['getMonth']()+0x1)[_0x2ebfe6(0x274)]()[_0x2ebfe6(0x224)](0x2,'0')+'/'+_0x446d4b[_0x2ebfe6(0x1b8)]()[_0x2ebfe6(0x274)]()[_0x2ebfe6(0x224)](0x2,'0')+'\x20'+_0x446d4b['getHours']()[_0x2ebfe6(0x274)]()[_0x2ebfe6(0x224)](0x2,'0')+':'+_0x446d4b['getMinutes']()['toString']()[_0x2ebfe6(0x224)](0x2,'0')+':'+_0x446d4b[_0x2ebfe6(0x162)]()['toString']()['padStart'](0x2,'0');}function getDate(){const _0x1316e6=_0x3ab734,_0x1fb3b4=shiftedTime();return _0x1fb3b4['getFullYear']()+'/'+(_0x1fb3b4[_0x1316e6(0x2c4)]()+0x1)[_0x1316e6(0x274)]()[_0x1316e6(0x224)](0x2,'0')+'/'+_0x1fb3b4[_0x1316e6(0x1b8)]()[_0x1316e6(0x274)]()[_0x1316e6(0x224)](0x2,'0');}function getHour(){const _0x3b4fc7=_0x3ab734,_0x8fbcc0=shiftedTime();return _0x8fbcc0['getHours']()['toString']()[_0x3b4fc7(0x224)](0x2,'0');}function sleep(_0x87bdf9){return new Promise(_0x10607b=>setTimeout(_0x10607b,_0x87bdf9));}function shiftedTime(){const _0x55dabd=_0x3ab734,_0x2f9fed=new Date();let _0x3a60e7=_0x2f9fed;if(config&&config[_0x55dabd(0x24b)]!==0x0)_0x3a60e7=fns[_0x55dabd(0x167)](_0x2f9fed,{'hours':config[_0x55dabd(0x24b)]});return _0x3a60e7;}function timer(_0x5ed389){const _0x1fbbc4=_0x3ab734,_0x3050c9=new Date();!lasttime?console[_0x1fbbc4(0x2b6)](getTimeStamp()+':\x20timer\x20>',_0x5ed389,_0x3050c9):console[_0x1fbbc4(0x2b6)](getTimeStamp()+_0x1fbbc4(0x229),_0x5ed389,(_0x3050c9-lasttime)/0x3e8),lasttime=_0x3050c9;}