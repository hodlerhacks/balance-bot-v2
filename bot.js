const _0x4e2b08=_0xbd55;(function(_0xecf4f1,_0x1f7568){const _0xcac06f=_0xbd55,_0x24b0b6=_0xecf4f1();while(!![]){try{const _0x547874=parseInt(_0xcac06f(0x168))/0x1+parseInt(_0xcac06f(0x180))/0x2*(-parseInt(_0xcac06f(0x2b8))/0x3)+parseInt(_0xcac06f(0x134))/0x4*(parseInt(_0xcac06f(0xeb))/0x5)+parseInt(_0xcac06f(0x20d))/0x6+-parseInt(_0xcac06f(0x250))/0x7*(-parseInt(_0xcac06f(0x15f))/0x8)+-parseInt(_0xcac06f(0x15b))/0x9*(-parseInt(_0xcac06f(0x1d9))/0xa)+-parseInt(_0xcac06f(0x20f))/0xb;if(_0x547874===_0x1f7568)break;else _0x24b0b6['push'](_0x24b0b6['shift']());}catch(_0x587cfc){_0x24b0b6['push'](_0x24b0b6['shift']());}}}(_0x47bd,0x7b6bc));const _0x413565=function(){let _0x34f25b=!![];return function(_0x21e9ff,_0x2c31af){const _0x46bb4f=_0x34f25b?function(){const _0x1f329f=_0xbd55;if(_0x2c31af){const _0x59c954=_0x2c31af[_0x1f329f(0xe0)](_0x21e9ff,arguments);return _0x2c31af=null,_0x59c954;}}:function(){};return _0x34f25b=![],_0x46bb4f;};}(),_0x3c87c4=_0x413565(this,function(){const _0x41ed3c=_0xbd55;return _0x3c87c4[_0x41ed3c(0x210)]()[_0x41ed3c(0x225)](_0x41ed3c(0x273))['toString']()[_0x41ed3c(0x252)](_0x3c87c4)[_0x41ed3c(0x225)](_0x41ed3c(0x273));});_0x3c87c4();'use strict';const ccxt=require(_0x4e2b08(0x233)),low=require(_0x4e2b08(0x1aa)),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require('date-fns'),forge=require(_0x4e2b08(0x171)),util=require(_0x4e2b08(0x164)),argv=require(_0x4e2b08(0x1ff))(process[_0x4e2b08(0x194)][_0x4e2b08(0x23d)](0x2))['argv'],path=require(_0x4e2b08(0x1bc)),axios=require(_0x4e2b08(0x135));let exchange,gTicker={},gChange={};const usdBasecoins=[_0x4e2b08(0x1d8),_0x4e2b08(0x108),_0x4e2b08(0x2ac),_0x4e2b08(0x125),_0x4e2b08(0x1ba),_0x4e2b08(0x14f)],excludedExchanges=[_0x4e2b08(0x25e)],debugging=argv['d']||![];let pnlGenerationNeeded=argv['r']||![],config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x4e2b08(0x1d3)]({'LOCKED':0x0,'UNLOCKING':0x1,'UNLOCKED':0x2});let lockOrders=ORDERS[_0x4e2b08(0x27a)],validateOrdersState,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotIntervalShort=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0x4e2b08(0x179)+pauseBotInterval/0xea60+'\x20minutes',maxPauseRetries=0x6,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,watchTransactionsInterval=0x3c*0x3e8,schedulerInterval=0x3c*0x3c*0x3e8,retryInterval=0x3e8,maxRetries=0x5,logPageSize=0x14,defaultFee=0.003;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidOrdersInitialTimeout,pidOrdersTimeout,botPaused=![],transactionDetectionOngoing=![],lastCoinsToBalance='',exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x5dc,balanceUpdateRetries=0x5;let enableFiatToggle;const serverversion=require('./version.json')[_0x4e2b08(0x1f2)],environment=require(_0x4e2b08(0x162))[_0x4e2b08(0x2a9)]||_0x4e2b08(0x197),botID=process[_0x4e2b08(0x194)][0x2]||_0x4e2b08(0x1b2),pattern=/^[0-9]{3}$/;!pattern[_0x4e2b08(0x2ae)](botID)&&(console['log'](_0x4e2b08(0x1ad)+botID+_0x4e2b08(0xec)),killBot());const userID=process['argv'][0x3]||'',configpath=userID?_0x4e2b08(0x1b9)+userID+'/':_0x4e2b08(0x1b9),logspath=userID?'./logs/'+userID+'/':_0x4e2b08(0x139),loggerfile=fs[_0x4e2b08(0x244)](logspath+_0x4e2b08(0x115),{'flags':'a'});!fs[_0x4e2b08(0x1db)](configpath)&&fs[_0x4e2b08(0x1de)](configpath);!fs[_0x4e2b08(0x1db)](logspath)&&fs['mkdirSync'](logspath);const configfile=configpath+'bot-'+botID+_0x4e2b08(0x186),logfile=configpath+_0x4e2b08(0x2a2)+botID+_0x4e2b08(0x227),performancefile=configpath+_0x4e2b08(0x2a2)+botID+_0x4e2b08(0x12c),coinresultsfile=configpath+_0x4e2b08(0x2a2)+botID+'-results.json',settingsfile=configpath+'bb-settings.json',securefile=configpath+_0x4e2b08(0x11b),configbackuppath=configpath+_0x4e2b08(0x1bb),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs['defaults']({'logs':[],'version':serverversion})[_0x4e2b08(0x1a1)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x4e2b08(0x12b)]({'data':[],'version':serverversion})[_0x4e2b08(0x1a1)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig['defaults']({'bot':[],'version':serverversion})[_0x4e2b08(0x1a1)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x4e2b08(0x12b)]({'coins':{},'version':serverversion})[_0x4e2b08(0x1a1)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0,settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x124b72=>{const _0xf36468=_0x4e2b08;console[_0xf36468(0x265)](_0x124b72);},'simple':_0x15dbb5=>{const _0x1d8489=_0x4e2b08;console[_0x1d8489(0x265)](_0x15dbb5),loggerfile[_0x1d8489(0x1a1)](util[_0x1d8489(0x184)](_0x15dbb5)+'\x0a');},'full':async(_0x5151f9,_0x4120b7='')=>{const _0x1ea28f=_0x4e2b08;let _0x384159;if(config[_0x1ea28f(0xed)])_0x384159=getTimeStamp()+':\x20'+config['botname']+_0x1ea28f(0xe7)+_0x5151f9;else _0x384159=getTimeStamp()+':\x20Bot\x20'+botID+_0x1ea28f(0xe7)+_0x5151f9;console[_0x1ea28f(0x265)](_0x384159),loggerfile['write'](util[_0x1ea28f(0x184)](_0x384159)+'\x0a'),_0x4120b7&&(console[_0x1ea28f(0x265)](_0x4120b7),loggerfile['write'](util[_0x1ea28f(0x184)](_0x4120b7)+'\x0a'));},'debug':async(_0x4f1446,_0x576646='')=>{const _0x1a9d8=_0x4e2b08;let _0x45f1f7;if(config[_0x1a9d8(0xed)])_0x45f1f7=getTimeStamp()+':\x20'+config[_0x1a9d8(0x176)]+_0x1a9d8(0x193)+_0x4f1446;else _0x45f1f7=getTimeStamp()+_0x1a9d8(0x208)+botID+'\x20>\x20[DEBUG]\x20'+_0x4f1446;if(debugging)console[_0x1a9d8(0x265)](_0x45f1f7);loggerfile[_0x1a9d8(0x1a1)](util[_0x1a9d8(0x184)](_0x45f1f7)+'\x0a');if(_0x576646){if(debugging)console[_0x1a9d8(0x265)](_0x576646);loggerfile[_0x1a9d8(0x1a1)](util[_0x1a9d8(0x184)](_0x576646)+'\x0a');}}};process['on'](_0x4e2b08(0x2a7),function(_0x150bc2){const _0x28f432=_0x4e2b08;handleError(_0x150bc2[_0x28f432(0x14b)],_0x28f432(0x2a7));});settings[_0x4e2b08(0x145)]!=config[_0x4e2b08(0x145)]&&updateTimeshift(settings[_0x4e2b08(0x145)]);settings['onepagemode']!=config[_0x4e2b08(0x152)]&&updateOnepagemode(settings['onepagemode']);(settings[_0x4e2b08(0x154)]&&!config['marketcapApi']||!settings[_0x4e2b08(0x154)]&&config[_0x4e2b08(0x154)])&&updateMarketcapApi(settings['marketcapApi']);process[_0x4e2b08(0xe6)]({'started':_0x4e2b08(0x175)},_0x16d88b=>{}),initializeProcessListeners();function proxyEmit(_0x3336d7,_0xedeefa=null){process['send']({'function':_0x3336d7,'args':_0xedeefa},_0x3a5bcc=>{});}function initializeProcessListeners(){const _0xfb7147=_0x4e2b08;process['on'](_0xfb7147(0x29f),_0x49d048=>{const _0x22844b=_0xfb7147;switch(Object[_0x22844b(0x116)](_0x49d048)[0x0]){case _0x22844b(0x145):_0x49d048[_0x22844b(0x145)]!=undefined&&(settings[_0x22844b(0x145)]=_0x49d048[_0x22844b(0x145)],updateTimeshift(settings[_0x22844b(0x145)]));break;case _0x22844b(0x152):_0x49d048[_0x22844b(0x152)]!=undefined&&(settings['onepagemode']=_0x49d048[_0x22844b(0x152)],updateOnepagemode(settings['onepagemode']));break;case _0x22844b(0x154):_0x49d048['marketcapApi']!=undefined&&(settings['marketcapApi']=_0x49d048[_0x22844b(0x154)],updateMarketcapApi(settings[_0x22844b(0x154)]));break;case _0x22844b(0x284):_0x49d048[_0x22844b(0x284)]!=undefined&&(bots=JSON[_0x22844b(0x1c4)](_0x49d048[_0x22844b(0x284)]),proxyEmit(_0x22844b(0x284),bots));break;case _0x22844b(0x14c):switch(_0x49d048[_0x22844b(0x14c)]){case _0x22844b(0x207):initclient();break;case _0x22844b(0x1b4):toggleBotMode();break;case _0x22844b(0x1e6):emitHistory(_0x49d048[_0x22844b(0x1f0)]);break;case'deleteHistoryAlerts':deleteHistoryAlerts(_0x49d048[_0x22844b(0x1f0)]);break;case _0x22844b(0x230):getPortfolio(_0x49d048[_0x22844b(0x1f0)]);break;case _0x22844b(0x1c7):storeConfiguration(_0x49d048[_0x22844b(0x1f0)]);break;case _0x22844b(0x1d0):storeHeadless(_0x49d048[_0x22844b(0x1f0)]);break;case _0x22844b(0x28d):storeFiat(_0x49d048[_0x22844b(0x1f0)]);break;case _0x22844b(0x11d):resetHistory();break;case _0x22844b(0x10a):getStartingBalances(getNormalizedPerformance());break;case _0x22844b(0x1a0):placeOrder(_0x49d048[_0x22844b(0x1f0)]);break;case _0x22844b(0x2b6):cancelLoading();break;case'showConfig':showConfig();break;case _0x22844b(0x248):sendMetricsTelegram();break;case _0x22844b(0x277):sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x7e952c=![]){const _0x293bd6=_0x4e2b08;logger[_0x293bd6(0x13e)](_0x293bd6(0x11f)+(_0x7e952c?_0x293bd6(0x1c5):_0x293bd6(0xee))+_0x293bd6(0x224)+config[_0x293bd6(0x155)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x7e952c)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x293bd6(0x1cd)]!=''&&config[_0x293bd6(0x1cd)]!=_0x293bd6(0x256)){loadingProgress=0x0;if(_0x7e952c){await initExchange();const _0x1e9ab7=await testAPI();if(!_0x1e9ab7)return;await loadSymbols(),loadingProgress=0x1,setStableCoins(),proxyEmit(_0x293bd6(0x243),emittedConfiguration()),initialPerformanceStored=![];}const _0x5bfd94=await getCoins();[currentCoins,currentCoinsAll]=_0x5bfd94,setBlockTransactionDetection(![]),startScheduler(),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x293bd6(0x13e)](_0x293bd6(0x27b)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x293bd6(0x159)]==0x0&&allOpenOrders[_0x293bd6(0x159)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(pnlGenerationNeeded)await generatePnL();}}async function resumeBot(_0x2b48d1=![]){const _0x37822e=_0x4e2b08;logger[_0x37822e(0x13e)](_0x37822e(0x1da)+(_0x2b48d1?_0x37822e(0x23a):_0x37822e(0x143))+_0x37822e(0x1a3)+config[_0x37822e(0x155)]);if(pidBalances)clearTimeout(pidBalances);if(_0x2b48d1){getBalances();return;}coinsLoaded=![];if(config['apiKey']!=''&&config[_0x37822e(0x1cd)]!=_0x37822e(0x256)){loadingProgress=0x1;const _0xdfc44a=await getCoins();[currentCoins,currentCoinsAll]=_0xdfc44a,setBlockTransactionDetection(![]),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x37822e(0x13e)](_0x37822e(0x27b)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x37822e(0x159)]==0x0&&allOpenOrders['length']!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();}}async function getMarketCap(_0x5175a8){const _0x2a7d03=_0x4e2b08;let _0x5e3741=![];if(_0x5175a8)_0x5e3741=!![];const _0x443bea=_0x5e3741?_0x5175a8:currentCoins,_0x11c2d8=_0x443bea['map'](_0x382d20=>_0x382d20[_0x2a7d03(0x110)]);if(!config['marketcapApi']||!_0x5e3741&&!config[_0x2a7d03(0x2bd)]||_0x11c2d8['length']==0x0)return;let _0x1d3d16=null;try{_0x1d3d16=await axios['get'](_0x2a7d03(0x2ab),{'headers':{'X-CMC_PRO_API_KEY':settings[_0x2a7d03(0x154)]},'params':{'symbol':_0x11c2d8[_0x2a7d03(0x210)]()}});}catch(_0x3a1b2e){_0x1d3d16=null,_0x3a1b2e[_0x2a7d03(0x210)]()[_0x2a7d03(0x13d)]('status\x20code\x20401')?(config[_0x2a7d03(0x154)]=![],updateConfig(),proxyEmit(_0x2a7d03(0x243),emittedConfiguration()),logHistory(_0x2a7d03(0x1a2),'CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager')):(logHistory(_0x2a7d03(0x1a2),_0x2a7d03(0x181)+schedulerInterval/(0x3c*0x3e8)+_0x2a7d03(0x18d)),logger[_0x2a7d03(0x13e)]('Error\x20details:',_0x3a1b2e[_0x2a7d03(0x210)]()+_0x2a7d03(0x276)+_0x3a1b2e[_0x2a7d03(0x188)]));}let _0x21ddc9=!![];if(_0x1d3d16){let _0x258418=0x0;const _0x1b369b=_0x1d3d16['data'];_0x11c2d8[_0x2a7d03(0x127)](_0x5602d7=>{const _0x419d8f=_0x2a7d03;if(_0x1b369b[_0x419d8f(0x198)][_0x5602d7][0x0]&&_0x1b369b['data'][_0x5602d7][0x0]['quote'][_0x419d8f(0x1d8)][_0x419d8f(0x2b2)])_0x258418+=_0x1b369b['data'][_0x5602d7][0x0]['quote'][_0x419d8f(0x1d8)][_0x419d8f(0x2b2)];else{if(![_0x419d8f(0x1b8),_0x419d8f(0x1d8)][_0x419d8f(0x13d)](_0x5602d7)){if(_0x5e3741)logHistory(_0x419d8f(0x1a2),_0x419d8f(0x192)+_0x5602d7+_0x419d8f(0x1f3));else{const _0x3842b0=config[_0x419d8f(0x213)][_0x419d8f(0x156)](_0x146ac0=>_0x146ac0[_0x419d8f(0x110)]==_0x5602d7);_0x3842b0&&!_0x3842b0[_0x419d8f(0x182)]&&_0x3842b0[_0x419d8f(0x258)]==-0x1&&(_0x21ddc9=![],logHistory(_0x419d8f(0x1a2),_0x419d8f(0x219)),logger[_0x419d8f(0x13e)](_0x419d8f(0x192)+_0x5602d7));}}}});if(!_0x21ddc9)return;_0x11c2d8['forEach'](_0x21b45c=>{const _0x5a81a3=_0x2a7d03,_0x14c411=_0x1b369b[_0x5a81a3(0x198)][_0x21b45c][0x0]?_0x1b369b[_0x5a81a3(0x198)][_0x21b45c][0x0][_0x5a81a3(0x24f)]['USD'][_0x5a81a3(0x2b2)]:0x0;if(_0x5e3741){const _0x2a6e57=_0x5175a8[_0x5a81a3(0x156)](_0x478b3d=>_0x478b3d[_0x5a81a3(0x110)]==_0x21b45c);_0x2a6e57&&(_0x2a6e57[_0x5a81a3(0x247)]=_0x14c411);}else{const _0x570a2d=currentCoins[_0x5a81a3(0x156)](_0x5807ed=>_0x5807ed['coin']==_0x21b45c);_0x570a2d&&(_0x570a2d[_0x5a81a3(0x247)]=_0x14c411);const _0x3b4175=currentCoinsAll[_0x5a81a3(0x156)](_0x73b764=>_0x73b764[_0x5a81a3(0x110)]==_0x21b45c);_0x3b4175&&(_0x3b4175[_0x5a81a3(0x247)]=_0x14c411);}}),!_0x5e3741&&updateTargetDistribution();}}function updateTargetDistribution(){const _0x35ce5d=_0x4e2b08,_0x4f6e18=0x2;let _0x330b1a=0x0,_0x4c49be=0x0,_0xb016e0=0x0,_0x58e336=0x0,_0x530e5b=0x0;config[_0x35ce5d(0x213)][_0x35ce5d(0x127)](_0x252eab=>{const _0x2188d6=_0x35ce5d;if(!_0x252eab[_0x2188d6(0x182)]){_0xb016e0++,_0x330b1a+=_0x252eab[_0x2188d6(0x258)];if(_0x252eab[_0x2188d6(0x258)]===-0x1){_0x330b1a++;const _0x1023f6=currentCoinsAll[_0x2188d6(0x156)](_0x1e27d1=>_0x1e27d1[_0x2188d6(0x110)]==_0x252eab[_0x2188d6(0x110)]);_0x1023f6&&(_0x58e336+=_0x1023f6[_0x2188d6(0x247)],_0x530e5b+=Math[_0x2188d6(0x1dd)](_0x1023f6[_0x2188d6(0x247)]));}if(_0x252eab[_0x2188d6(0x258)]!==-0x1)_0x4c49be++;}});let _0x58a717;const _0x207f5e=0x64-_0x330b1a,_0x59ca8b=_0xb016e0-_0x4c49be;_0x58a717=_0x59ca8b===0x0?_0x330b1a:Math[_0x35ce5d(0x24c)](0x64,_0x330b1a),config[_0x35ce5d(0x213)][_0x35ce5d(0x127)](_0x2bdc5f=>{const _0x3901ac=_0x35ce5d,_0x3c0135=currentCoinsAll[_0x3901ac(0x156)](_0x3bdb00=>_0x3bdb00[_0x3901ac(0x110)]==_0x2bdc5f[_0x3901ac(0x110)]);_0x3c0135&&(_0x2bdc5f['marketcap']=_0x3c0135['marketcap']);if(!_0x2bdc5f['excluded']){if(_0x58a717<=0x64){if(_0x2bdc5f['slider']===-0x1){if(_0x58e336!==0x0&&config[_0x3901ac(0x2bd)]){if(_0x3c0135){if(config[_0x3901ac(0x2bd)]==_0x3901ac(0x247))_0x2bdc5f[_0x3901ac(0x106)]=(_0x207f5e/(_0x58e336/_0x3c0135[_0x3901ac(0x247)]))[_0x3901ac(0x1d1)](_0x4f6e18);else config[_0x3901ac(0x2bd)]==_0x3901ac(0x183)&&(_0x2bdc5f[_0x3901ac(0x106)]=(_0x207f5e/(_0x530e5b/Math[_0x3901ac(0x1dd)](_0x3c0135[_0x3901ac(0x247)])))[_0x3901ac(0x1d1)](_0x4f6e18));}}}}}}),updateConfig();}function updateConfig(){const _0x4f7cd6=_0x4e2b08;let _0x288dee=dbConfig['get']('bot')['find']({'botID':botID})['value']();_0x288dee&&dbConfig[_0x4f7cd6(0x11e)](_0x4f7cd6(0x255))[_0x4f7cd6(0x156)]({'botID':botID})[_0x4f7cd6(0x138)](config)[_0x4f7cd6(0x1a1)]();}function logMemory(){const _0x4ddb63=_0x4e2b08;if(environment!=_0x4ddb63(0x271))return;const _0x3329b5=process[_0x4ddb63(0xfc)]()[_0x4ddb63(0x18c)]/0x400/0x400;logger[_0x4ddb63(0x13e)](_0x4ddb63(0xe2)+process['pid']+'\x20uses\x20'+formatResult(_0x3329b5,0x1)+_0x4ddb63(0x12e));}async function startScheduler(){const _0x400c85=_0x4e2b08,_0x2c45d0=shiftedTime()[_0x400c85(0x2c2)]();getMarketCap(),loadSymbols(),_0x2c45d0==0x1&&logMemory(),await sleep(schedulerInterval),startScheduler();}async function restartBot(_0x4e7b82=![]){const _0x82a247=_0x4e2b08;logger['debug'](_0x82a247(0x196));if(!_0x4e7b82)while(lockOrders!=ORDERS['UNLOCKED']||coolingDown){await sleep(0x3e8);}process[_0x82a247(0xe6)]({'stop':_0x82a247(0x1dc)},_0x333081=>{});}async function initExchange(_0x4c7f6a=config[_0x4e2b08(0x155)],_0xfe0b01=config['apiKey'],_0xf8838f=config[_0x4e2b08(0x2b0)],_0x516716=config['apiPassword'],_0x27a450=config[_0x4e2b08(0xe4)]){const _0x2a3f34=_0x4e2b08;if(exchange){logger[_0x2a3f34(0x13e)](_0x2a3f34(0x185));return;}logger[_0x2a3f34(0x13e)](_0x2a3f34(0x1fe));!supportedExchanges()['includes'](_0x4c7f6a)&&(logHistory('error',_0x2a3f34(0x157)+_0x4c7f6a+_0x2a3f34(0x141)),killBot());const _0x47173b=ccxt[_0x2a3f34(0x191)][_0x4c7f6a[_0x2a3f34(0x2a5)]()];exchange=new _0x47173b({'apiKey':_0xfe0b01,'secret':_0xf8838f,'options':{'defaultType':_0x2a3f34(0xfb)}});if(_0x516716)exchange['password']=_0x516716;if(exchange['has'][_0x2a3f34(0xe4)])exchange[_0x2a3f34(0x1a7)](_0x27a450);}function updateExchange(_0x1d43e7,_0x1a0103,_0x55bd06=null){const _0x157084=_0x4e2b08;exchange['apiKey']=_0x1d43e7,exchange[_0x157084(0x117)]=_0x1a0103,exchange[_0x157084(0x1c3)]=_0x55bd06,logger['debug'](_0x157084(0x242));}function setStableCoins(){const _0x2691cb=_0x4e2b08;let _0x59503b=config['basecoin']==_0x2691cb(0x111)?_0x2691cb(0x111):config[_0x2691cb(0x215)]==_0x2691cb(0x2a0)?_0x2691cb(0x2a0):'BTC',_0x4b0683=allSymbols['includes'](_0x59503b+_0x2691cb(0x275))?_0x2691cb(0x1d8):allSymbols[_0x2691cb(0x13d)](_0x59503b+_0x2691cb(0x203))?_0x2691cb(0x125):_0x2691cb(0x1b8),_0x18b53c=allSymbols['includes'](_0x59503b+_0x2691cb(0x158))?_0x2691cb(0x1b8):_0x4b0683;enableFiatToggle=!![],_0x4b0683==_0x2691cb(0x1b8)&&(enableFiatToggle=![],storeFiat(_0x2691cb(0x1b8))),_0x18b53c!='EUR'&&(enableFiatToggle=![],storeFiat('USD')),stablecoins={'eur':{'coin':''+_0x59503b+_0x18b53c,'symbol':_0x59503b+'/'+_0x18b53c},'usd':{'coin':''+_0x59503b+_0x4b0683,'symbol':_0x59503b+'/'+_0x4b0683}};}async function initwsCcxt(){const _0x4aec1e=_0x4e2b08;initCycle++;const _0xaad2c0=initCycle;let _0x5b3192=[];config[_0x4aec1e(0x213)][_0x4aec1e(0x127)](_0x32e92c=>{const _0x37280b=_0x4aec1e;if(!_0x32e92c[_0x37280b(0x182)]&&_0x32e92c[_0x37280b(0x110)]!=config['basecoin'])_0x5b3192[_0x37280b(0x15c)](_0x32e92c[_0x37280b(0x1cb)]);});if(!_0x5b3192[_0x4aec1e(0x13d)](stablecoins[_0x4aec1e(0x259)]['symbol']))_0x5b3192['push'](stablecoins['eur'][_0x4aec1e(0x1cb)]);if(!_0x5b3192[_0x4aec1e(0x13d)](stablecoins[_0x4aec1e(0x1e4)][_0x4aec1e(0x1cb)]))_0x5b3192[_0x4aec1e(0x15c)](stablecoins[_0x4aec1e(0x1e4)]['symbol']);loadCoins(_0x5b3192),_0x5b3192=validateSymbols(_0x5b3192);const _0x4e00f6=async _0x2eccde=>{const _0x359cb1=_0x4aec1e;let _0x2d6771;try{const _0x554653=await getTickers(_0x2eccde);Object['entries'](_0x554653)[_0x359cb1(0x127)](_0x5d5f4e=>{const _0x48b1ea=_0x359cb1;_0x2d6771=_0x5d5f4e[0x1][_0x48b1ea(0x1cb)],gTicker[noslash(_0x2d6771)]=_0x5d5f4e[0x1]['last'],gChange[_0x2d6771]=_0x5d5f4e[0x1][_0x48b1ea(0x10f)];});}catch(_0x326fcc){await handleError(_0x326fcc,_0x359cb1(0x1eb),_0x2d6771);}},_0x424f6a=async _0x54dffa=>{const _0x4639a7=_0x4aec1e;while(initCycle==_0xaad2c0){if(!botPaused)try{const _0x21bf82=await exchange[_0x4639a7(0x12a)](_0x54dffa);gTicker[noslash(_0x21bf82[0x0][_0x4639a7(0x1cb)])]=_0x21bf82[0x0][_0x4639a7(0x1c6)];}catch(_0x159f56){if(!exchangeStopped)await handleError(_0x159f56,_0x4639a7(0x2b9),_0x54dffa);}else await sleep(0x64);}},_0x3194de=async _0x44a080=>{const _0x178942=_0x4aec1e;while(initCycle==_0xaad2c0){if(!botPaused)try{const _0x54f548=await exchange[_0x178942(0x174)](_0x44a080),_0x2ba9e0=_0x54f548[_0x178942(0x26c)]();gTicker[noslash(_0x2ba9e0[_0x178942(0x1cb)])]=_0x2ba9e0[_0x178942(0x1c6)];}catch(_0x3e7cac){if(!exchangeStopped)await handleError(_0x3e7cac,_0x178942(0xf8),_0x44a080['toString']());}else await sleep(0x64);}},_0x3a8237=async _0x1d4e9a=>{const _0x478ab6=_0x4aec1e;while(initCycle==_0xaad2c0){if(!botPaused){let _0x2e6d70;try{await sleep(0x3c*0x3e8);const _0x33486b=await getTickers(_0x1d4e9a);Object['entries'](_0x33486b)[_0x478ab6(0x127)](_0x5c719c=>{const _0x29f099=_0x478ab6;_0x2e6d70=_0x5c719c[0x1][_0x29f099(0x1cb)],gChange[_0x2e6d70]=_0x5c719c[0x1][_0x29f099(0x10f)];});}catch(_0x17455b){if(!exchangeStopped)await handleError(_0x17455b,'fetchTickers()',_0x2e6d70);}}else await sleep(0x64);}},_0x11acec=async _0xfb7ef2=>{const _0x13ef84=_0x4aec1e;while(initCycle==_0xaad2c0){if(!botPaused)try{const _0x44d379=await exchange[_0x13ef84(0x2ad)](_0xfb7ef2);initCycle==_0xaad2c0&&_0x44d379[_0x13ef84(0x127)](_0x5b1ad3=>{updateNumberCoinsCcxt(_0x5b1ad3);});}catch(_0x32f95e){if(!exchangeStopped)await handleError(_0x32f95e,'watchOrders()');}else await sleep(0x64);}};_0x4e00f6(_0x5b3192),_0x3a8237(_0x5b3192),exchange[_0x4aec1e(0x297)]['watchTradesForSymbols']&&!(config[_0x4aec1e(0x155)]==_0x4aec1e(0x10d)&&_0x5b3192[_0x4aec1e(0x159)]>0xa)?_0x3194de(_0x5b3192):_0x5b3192[_0x4aec1e(0x127)](_0xf9686a=>{_0x424f6a(_0xf9686a);}),_0x5b3192[_0x4aec1e(0x127)](_0x193502=>{_0x11acec(_0x193502);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x2c6641){const _0x1592ab=_0x4e2b08;let _0x1545e0={};try{if(config[_0x1592ab(0x155)]!=_0x1592ab(0x133))_0x1545e0=await exchange[_0x1592ab(0x23c)](_0x2c6641);else for(const _0x166f21 of _0x2c6641){const _0x4180af=await exchange[_0x1592ab(0x27d)](_0x166f21);_0x1545e0[_0x166f21]=_0x4180af;}return _0x1545e0;}catch(_0x39e53d){throw _0x39e53d;}}function setBlockTransactionDetection(_0x3f1a8f){const _0x5de880=_0x4e2b08;blockTransactionDetection=_0x3f1a8f,logger[_0x5de880(0x13e)]('Block\x20transaction\x20detection:\x20'+blockTransactionDetection);}async function detectLiquidityChange(_0xf3ef7f=0x0){const _0x1e0e82=_0x4e2b08;transactionDetectionOngoing=!![];try{const _0x5eb6af=await getCoins(_0xf3ef7f),[_0x4412c8,_0xe1377b]=_0x5eb6af;let _0x14a5a5=[];currentCoins[_0x1e0e82(0x127)](_0x242c0a=>{const _0x5f25ce=_0x1e0e82,_0x4d332d=_0x4412c8[_0x5f25ce(0x156)](_0x12fe0=>_0x12fe0['coin']==_0x242c0a[_0x5f25ce(0x110)]);if(_0x4d332d){if(_0x242c0a[_0x5f25ce(0x11c)]!=_0x4d332d['number']){let _0x640f8b;if(_0x242c0a[_0x5f25ce(0x110)]!=config[_0x5f25ce(0x215)]){const _0x57f636=gTicker[noslash(_0x242c0a['symbol'])];_0x640f8b=_0x242c0a[_0x5f25ce(0x22a)]?0x1/_0x57f636:_0x57f636;}else _0x640f8b=0x1;_0x14a5a5[_0x5f25ce(0x15c)]({'coin':_0x242c0a[_0x5f25ce(0x110)],'symbol':_0x242c0a[_0x5f25ce(0x1cb)],'price':_0x640f8b,'number':Number(formatResult(_0x4d332d[_0x5f25ce(0x11c)]-_0x242c0a[_0x5f25ce(0x11c)],0x8)),'basecoinvalue':_0x640f8b*(_0x4d332d[_0x5f25ce(0x11c)]-_0x242c0a[_0x5f25ce(0x11c)])});}}});if(_0x14a5a5[_0x1e0e82(0x159)]>0x0&&!blockTransactionDetection){for(const _0x4f535a of _0x14a5a5){if(config[_0x1e0e82(0x1ae)]){logger[_0x1e0e82(0x13e)](_0x1e0e82(0xf4)+_0x4f535a['basecoinvalue']+_0x1e0e82(0x24e)+lastFees[_0x1e0e82(0x23f)]);if(lastFees['highest']==0x0||Math[_0x1e0e82(0x1b3)](_0x4f535a[_0x1e0e82(0x20b)])>lastFees['highest']*0x3){if(config['autoliquidity']==_0x1e0e82(0xe3)){delete _0x4f535a['symbol'],delete _0x4f535a[_0x1e0e82(0x20b)];let _0x50683f=[],_0x41ac7f=[...config['liquidity']]||[],_0x50f56b=config[_0x1e0e82(0x251)];_0x41ac7f[_0x1e0e82(0x28c)]((_0x2448fa,_0x417286)=>_0x2448fa['date']>_0x417286[_0x1e0e82(0x1ac)]?-0x1:_0x417286[_0x1e0e82(0x1ac)]>_0x2448fa[_0x1e0e82(0x1ac)]?0x1:0x0);const _0x222494=getDate();if(_0x41ac7f[0x0]){const _0x14858d=fns[_0x1e0e82(0x1c4)](_0x41ac7f[0x0][_0x1e0e82(0x1ac)],_0x1e0e82(0x148),new Date()),_0x2f205e=fns['parse'](_0x222494,'yyyy/MM/dd',new Date());if(fns[_0x1e0e82(0x19d)](_0x14858d,_0x2f205e)){_0x50683f=_0x41ac7f[0x0]['changes'];const _0x24fb09=_0x50683f['find'](_0x3394ce=>_0x3394ce[_0x1e0e82(0x110)]==_0x4f535a[_0x1e0e82(0x110)]);_0x24fb09?(_0x24fb09['number']+=_0x4f535a[_0x1e0e82(0x11c)],_0x24fb09[_0x1e0e82(0x11c)]==0x0&&(_0x50683f=_0x50683f[_0x1e0e82(0x170)](_0x42c5c8=>{const _0x4cd9ec=_0x1e0e82;return _0x42c5c8[_0x4cd9ec(0x110)]!=_0x4f535a['coin'];}))):_0x50683f[_0x1e0e82(0x15c)](_0x4f535a);const _0x24cb6e=_0x50f56b['find'](_0x4d7ecb=>_0x4d7ecb['date']==_0x222494);_0x24cb6e['changes']=_0x50683f;}else _0x50f56b[_0x1e0e82(0x15c)]({'date':_0x222494,'changes':[_0x4f535a]});}const _0x1ab26f=_0x50f56b['find'](_0x2a1a9b=>_0x2a1a9b[_0x1e0e82(0x1ac)]==_0x222494);if(_0x1ab26f){let _0x30cb2a=!![];_0x1ab26f[_0x1e0e82(0x1c2)][_0x1e0e82(0x127)](_0x1f6b50=>{if(_0x1f6b50['number']!=0x0)_0x30cb2a=![];}),_0x30cb2a&&(_0x50f56b=_0x50f56b[_0x1e0e82(0x170)](_0x264a35=>{const _0x1a47bb=_0x1e0e82;return _0x264a35[_0x1a47bb(0x1ac)]!=_0x222494;}));}let _0x307e70=dbConfig[_0x1e0e82(0x11e)]('bot')[_0x1e0e82(0x156)]({'botID':botID})['value']();_0x307e70&&(dbConfig[_0x1e0e82(0x11e)]('bot')[_0x1e0e82(0x156)]({'botID':botID})[_0x1e0e82(0x138)]({'liquidity':_0x50f56b})[_0x1e0e82(0x1a1)](),config[_0x1e0e82(0x251)]=_0x50f56b);logHistory('success',_0x1e0e82(0x206)+Math[_0x1e0e82(0x1b3)](_0x4f535a[_0x1e0e82(0x11c)])+'\x20'+_0x4f535a[_0x1e0e82(0x110)]+'\x20'+(_0x4f535a[_0x1e0e82(0x11c)]>0x0?_0x1e0e82(0x153):_0x1e0e82(0x245))+_0x1e0e82(0x1e0)),proxyEmit('configuration',emittedConfiguration());const _0x6d9be2=getNormalizedPerformance();emitPerformance(_0x6d9be2),getStartingBalances(_0x6d9be2),logger['debug'](_0x1e0e82(0x118));}else config[_0x1e0e82(0x1ae)]==_0x1e0e82(0x272)&&(config[_0x1e0e82(0x10e)]?(await storeHeadless({'headless':![]}),logHistory(_0x1e0e82(0x26e),_0x1e0e82(0x206)+Math[_0x1e0e82(0x1b3)](_0x4f535a['number'])+'\x20'+_0x4f535a[_0x1e0e82(0x110)]+'\x20'+(_0x4f535a[_0x1e0e82(0x11c)]>0x0?_0x1e0e82(0x153):_0x1e0e82(0x245))+'\x20-\x20bot\x20switched\x20to\x20manual\x20mode')):logger['debug'](_0x1e0e82(0x206)+Math[_0x1e0e82(0x1b3)](_0x4f535a[_0x1e0e82(0x11c)])+'\x20'+_0x4f535a[_0x1e0e82(0x110)]+'\x20'+(_0x4f535a[_0x1e0e82(0x11c)]>0x0?_0x1e0e82(0x153):_0x1e0e82(0x245))+'\x20-\x20bot\x20already\x20running\x20in\x20manual\x20mode'));}else logger[_0x1e0e82(0x13e)](_0x1e0e82(0x12d)+Math[_0x1e0e82(0x1b3)](_0x4f535a[_0x1e0e82(0x11c)])+'\x20'+_0x4f535a[_0x1e0e82(0x110)]+'\x20'+(_0x4f535a[_0x1e0e82(0x11c)]>0x0?_0x1e0e82(0x153):_0x1e0e82(0x245)));}else logger[_0x1e0e82(0x13e)](_0x1e0e82(0x206)+Math[_0x1e0e82(0x1b3)](_0x4f535a[_0x1e0e82(0x11c)])+'\x20'+_0x4f535a[_0x1e0e82(0x110)]+'\x20'+(_0x4f535a[_0x1e0e82(0x11c)]>0x0?_0x1e0e82(0x153):'removed')+'\x20-\x20auto\x20adjusting\x20liquidity\x20is\x20disabled');}currentCoins=_0x4412c8,currentCoinsAll=_0xe1377b;}}catch(_0xd2aae1){if(!exchangeStopped)await handleError(_0xd2aae1,_0x1e0e82(0x1b6));}transactionDetectionOngoing=![];}async function watchTransactions(){await sleep(0x14*0x3e8);while(!![]){!botPaused&&!blockTransactionDetection&&coinsLoaded?(detectLiquidityChange(),await sleep(watchTransactionsInterval)):await sleep(0x3e8);}}async function loadSymbols(){const _0x4c9af=_0x4e2b08;try{markets=await exchange['loadMarkets'](!![]),allSymbols=[],Object[_0x4c9af(0x235)](markets)['forEach'](_0x34d9fe=>{const _0x5c0010=_0x4c9af;_0x34d9fe[0x1][_0x5c0010(0x18e)]&&_0x34d9fe[0x1]['spot']&&allSymbols['push'](_0x34d9fe[0x0]);});}catch(_0x3cea75){markets?logger[_0x4c9af(0x13e)]('Error\x20in\x20loadSymbols():\x20'+_0x3cea75[_0x4c9af(0x210)]()):(loading[_0x4c9af(0x1e9)]=!![],_0x3cea75[_0x4c9af(0x210)]()['toLowerCase']()[_0x4c9af(0x13d)]('timestamp')||_0x3cea75[_0x4c9af(0x210)]()[_0x4c9af(0x2a5)]()[_0x4c9af(0x13d)](_0x4c9af(0x2aa))?(logHistory('error','Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)'),loading['error']='timestamp-issue'):handleErrorNoStop(_0x3cea75,_0x4c9af(0x1ca),!![]),logHistory(_0x4c9af(0x1a2),_0x4c9af(0x113)),logHistory(_0x4c9af(0x1a2),'Pausing\x20for\x20'+loadCoinsRetryInterval/0xea60+_0x4c9af(0x283)),logger[_0x4c9af(0x13e)](_0x4c9af(0x199),_0x3cea75),emitLoadingProgress(),botPaused=!![],await sleep(loadCoinsRetryInterval),restartBot());}}function validateSymbols(_0x4c70b6){const _0xd6ec93=_0x4e2b08;let _0x2fb45e=[];return _0x4c70b6[_0xd6ec93(0x127)](_0x3ea933=>{const _0x4ac2e8=_0xd6ec93;!allSymbols[_0x4ac2e8(0x13d)](_0x3ea933)?(logHistory(_0x4ac2e8(0x1a2),_0x4ac2e8(0x167)+_0x3ea933+'\x20-\x20exclude\x20coin\x20in\x20the\x20configuration'),loading[_0x4ac2e8(0x1cc)]=!![],emitLoadingProgress()):_0x2fb45e[_0x4ac2e8(0x15c)](_0x3ea933);}),_0x2fb45e;}async function initclient(){const _0x10ba93=_0x4e2b08;proxyEmit('configuration',emittedConfiguration()),proxyEmit('exchanges',supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x10ba93(0x2bb),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x51aaf3=getNormalizedPerformance();emitPerformance(_0x51aaf3),getStartingBalances(_0x51aaf3);}async function toggleBotMode(){const _0x5b823c=_0x4e2b08;let _0x11e7bb=dbConfig[_0x5b823c(0x11e)]('bot')[_0x5b823c(0x156)]({'botID':botID})[_0x5b823c(0x136)]();if(_0x11e7bb){const _0x115f2f=!_0x11e7bb[_0x5b823c(0x10e)];dbConfig['get']('bot')['find']({'botID':botID})[_0x5b823c(0x138)]({'headless':_0x115f2f})[_0x5b823c(0x1a1)](),config[_0x5b823c(0x10e)]=_0x115f2f,proxyEmit(_0x5b823c(0x243),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0xf76c23=_0x4e2b08;process[_0xf76c23(0xe6)]({'updatebotmanager':!![]},_0x477704=>{}),logger['debug'](_0xf76c23(0x16b)+config[_0xf76c23(0x10e)]);}async function loadCoins(_0x59c246){const _0x173644=_0x4e2b08;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x496388,_0x1cdff3=0x0,_0x209826=0x0;_0x59c246[_0x173644(0x127)](_0x8d0ae8=>{const _0x1ac23c=_0x173644;loading[_0x1ac23c(0x144)][_0x1ac23c(0x15c)](_0x8d0ae8);}),loadingCanceled=![];let _0x53c9a1=![];while(_0x496388!=_0x59c246[_0x173644(0x159)]+maxLoadingProgress){_0x496388=loadingProgress,_0x59c246[_0x173644(0x127)](_0x558ffa=>{const _0xa11fe=_0x173644;if(gTicker[noslash(_0x558ffa)]){loading[_0xa11fe(0x144)]=loading['remainingSymbols'][_0xa11fe(0x170)](_0x174ce1=>_0x174ce1!=_0x558ffa);if(!watchedSymbols[_0xa11fe(0x13d)](_0x558ffa))watchedSymbols[_0xa11fe(0x15c)](_0x558ffa);_0x496388++;}}),loading['progress']=Math[_0x173644(0x17e)](_0x496388/(_0x59c246[_0x173644(0x159)]+maxLoadingProgress)*0x64);loading['progress']!=0x64&&(_0x209826>0x1e*0x5&&(loading[_0x173644(0x1cc)]=!![],emitLoadingProgress()),_0x209826>0x78*0x5&&!_0x53c9a1&&(_0x53c9a1=!![],logHistory(_0x173644(0x1a2),'Failed\x20to\x20load\x20coin\x20data\x20for\x20'+loading['remainingSymbols'][_0x173644(0x19a)](',\x20')+'\x20-\x20bot\x20not\x20started'),logHistory(_0x173644(0x1a2),_0x173644(0x2a1)+loadCoinsRetryInterval/0xea60+_0x173644(0x283)),loadingCanceled=!![],await sleep(loadCoinsRetryInterval),restartBot()));if(loadingCanceled){loading[_0x173644(0x1e9)]=!![],emitLoadingProgress();break;}else _0x1cdff3!=loading[_0x173644(0x29c)]&&(_0x1cdff3=loading['progress'],emitLoadingProgress()),_0x209826++,await sleep(0xc8);}_0x496388==_0x59c246[_0x173644(0x159)]+maxLoadingProgress&&(coinsLoaded=!![],process[_0x173644(0xe6)]({'status':_0x173644(0xf2),'live':'running'},_0x2b92d2=>{}),_0x53c9a1&&logHistory(_0x173644(0x26e),_0x173644(0x2b7)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x10a183=_0x4e2b08;proxyEmit(_0x10a183(0x243),{...emittedConfiguration(),'configstate':_0x10a183(0x1ed)});}function emitLoadingProgress(){const _0x4a421b=_0x4e2b08;proxyEmit(_0x4a421b(0x166),loading);}async function getFiat(){const _0x5c2e95=_0x4e2b08;let _0xb8136f=gTicker[stablecoins['eur'][_0x5c2e95(0x110)]],_0x365568=gTicker[stablecoins[_0x5c2e95(0x1e4)][_0x5c2e95(0x110)]];return{'eur':Number(_0xb8136f),'usd':Number(_0x365568)};}function capitalize(_0x1fcf77){const _0x58bca5=_0x4e2b08;return _0x1fcf77[_0x58bca5(0x1cf)](0x0,0x1)[_0x58bca5(0x22f)]()+_0x1fcf77[_0x58bca5(0x1cf)](0x1);}function supportedExchanges(){const _0x3004ea=_0x4e2b08,_0x20a194=['ws','fetchTickers','fetchTicker',_0x3004ea(0x12a),_0x3004ea(0x2ad),'cancelOrder',_0x3004ea(0x293),_0x3004ea(0x280),_0x3004ea(0x23b)];let _0x273d33=[],_0x184be5=[],_0x5d8992=ccxt[_0x3004ea(0x191)][_0x3004ea(0x267)];_0x5d8992[_0x3004ea(0x127)](_0x232aa0=>{const _0x38c4a5=_0x3004ea;try{const _0x2b080a=new ccxt[(_0x38c4a5(0x191))][_0x232aa0]();_0x184be5[_0x38c4a5(0x15c)](_0x2b080a);}catch(_0xdad69){}}),_0x184be5['forEach'](_0x45e31c=>{const _0x292c86=_0x3004ea;let _0x1ccc71=0x0;_0x20a194[_0x292c86(0x127)](_0x4afe20=>{const _0x17b12c=_0x292c86;_0x4afe20 in _0x45e31c[_0x17b12c(0x297)]&&_0x45e31c['has'][_0x4afe20]&&_0x1ccc71++;}),_0x1ccc71==_0x20a194[_0x292c86(0x159)]&&(!excludedExchanges[_0x292c86(0x13d)](_0x45e31c['id'])&&_0x273d33[_0x292c86(0x15c)](capitalize(_0x45e31c['id'])));});let _0x354f43=[];return _0x5d8992[_0x3004ea(0x127)](_0x171343=>{const _0x472035=_0x3004ea;_0x171343=capitalize(_0x171343);if(!_0x273d33[_0x472035(0x13d)](_0x171343))_0x354f43[_0x472035(0x15c)](_0x171343);}),_0x273d33;}function setStartDatePerformance(){const _0x103dc5=_0x4e2b08;if(config&&config['liquidity'][0x0][_0x103dc5(0x1c2)][_0x103dc5(0x159)]!=0x0){const _0x16ccdc=config['liquidity'][0x0][_0x103dc5(0x1c2)];dbPerformance[_0x103dc5(0x11e)]('data')[_0x103dc5(0x156)]({'date':config['startdate']})[_0x103dc5(0x138)]({'coins':_0x16ccdc})[_0x103dc5(0x1a1)]();}}function calculatePnL(_0x3a084a,_0x4cb9cf,_0x1a806f,_0x5283f2,_0x2723e8,_0x2c040b){const _0x16d636=_0x4e2b08;!_0x3a084a['includes']('/'+config[_0x16d636(0x215)])&&(_0x1a806f=_0x1a806f=='buy'?_0x16d636(0x131):_0x16d636(0x1ab));!_0x2c040b[_0x4cb9cf]&&(_0x2c040b[_0x4cb9cf]={'number':0x0,'sells':0x0,'buys':0x0,'breakeven':0x0,'realizedPnL':0x0});let _0x38cc27=0x0,_0x3239c7,_0x556c32;if(_0x1a806f==_0x16d636(0x1ab))_0x556c32=_0x2c040b[_0x4cb9cf][_0x16d636(0x11c)]*_0x2c040b[_0x4cb9cf][_0x16d636(0x202)]+_0x2723e8*_0x5283f2,_0x2c040b[_0x4cb9cf][_0x16d636(0x11c)]+=_0x5283f2,_0x2c040b[_0x4cb9cf][_0x16d636(0x202)]=_0x2c040b[_0x4cb9cf][_0x16d636(0x11c)]!=0x0?_0x556c32/_0x2c040b[_0x4cb9cf][_0x16d636(0x11c)]:0x0,_0x2c040b[_0x4cb9cf][_0x16d636(0x28a)]++;else _0x1a806f==_0x16d636(0x131)&&(_0x3239c7=Math['min'](_0x2c040b[_0x4cb9cf][_0x16d636(0x11c)],_0x5283f2),_0x38cc27=(_0x2723e8-_0x2c040b[_0x4cb9cf][_0x16d636(0x202)])*_0x3239c7,_0x556c32=Math[_0x16d636(0x24c)](_0x2c040b[_0x4cb9cf]['number']*_0x2c040b[_0x4cb9cf][_0x16d636(0x202)]-_0x3239c7*_0x2c040b[_0x4cb9cf][_0x16d636(0x202)],0x0),_0x2c040b[_0x4cb9cf][_0x16d636(0x11c)]-=_0x3239c7,_0x2c040b[_0x4cb9cf]['breakeven']=_0x2c040b[_0x4cb9cf][_0x16d636(0x11c)]!=0x0?_0x556c32/_0x2c040b[_0x4cb9cf]['number']:0x0,_0x2c040b[_0x4cb9cf][_0x16d636(0x1d2)]+=_0x38cc27,_0x2c040b[_0x4cb9cf]['sells']++);return _0x38cc27;}async function generatePnL(){const _0x536054=_0x4e2b08;pnlGenerationNeeded=![],logger[_0x536054(0x13e)]('Generating\x20PnL\x20data');const _0x3561c2=dbLogs['get']('logs')[_0x536054(0x136)]();let _0xc34e0b={},_0x7e0ec9=0x0,_0x4278f8=0x0,_0x42fcaa=config[_0x536054(0x26a)];const _0x237994=fns[_0x536054(0x1c4)](_0x42fcaa,'yyyy/MM/dd',new Date()),_0x4062fe=new Date();let _0x137106=0x0;for(let _0x2d2c31=_0x237994;!fns['isBefore'](_0x4062fe,_0x2d2c31);_0x2d2c31=fns['addDays'](_0x2d2c31,0x1)){const _0x5b14f5=fns[_0x536054(0x184)](_0x2d2c31,'yyyy/MM/dd');while(_0x7e0ec9<_0x3561c2[_0x536054(0x159)]){const _0x3fd575=new Date(_0x3561c2[_0x7e0ec9][_0x536054(0x204)]);if(fns[_0x536054(0x1e5)](_0x3fd575,_0x2d2c31))_0x7e0ec9++;else{if(_0x3561c2[_0x7e0ec9][_0x536054(0x204)]['includes'](_0x5b14f5)){const _0x586f5a=_0x3561c2[_0x7e0ec9];if(_0x586f5a[_0x536054(0x236)]===_0x536054(0x214)&&(_0x586f5a[_0x536054(0x205)][_0x536054(0x13d)](_0x536054(0xf5))||_0x586f5a['event']['includes']('Market\x20order'))){const _0x57fd04=_0x586f5a['event'][_0x536054(0x261)](/([A-Z]+\/[A-Z]+) (sell|buy) #([\d.]+) @([\d.]+)/);if(_0x57fd04){const [,_0x486ac6,_0x9de199,_0x34d738,_0x5efb69]=_0x57fd04,_0x3b8e58=_0x486ac6[_0x536054(0x13d)]('/'+config['basecoin'])?_0x486ac6[_0x536054(0x1df)]('/')[0x0]:_0x486ac6['split']('/')[0x1],_0x456370=calculatePnL(_0x486ac6,_0x3b8e58,_0x9de199,parseFloat(_0x34d738),parseFloat(_0x5efb69),_0xc34e0b);_0x4278f8+=_0x456370;}}_0x7e0ec9++;}else break;}}dbPerformance['get']('data')[_0x536054(0x156)]({'date':_0x5b14f5})[_0x536054(0x138)]({'pnl':_0x4278f8})[_0x536054(0x1a1)]();}dbCoinResults[_0x536054(0x100)](_0x536054(0x172),_0xc34e0b)['write'](),logger['debug'](_0x536054(0x29d));const _0x1e625d=getNormalizedPerformance();emitPerformance(_0x1e625d);}async function updatePnL(_0x2713c7){const _0x39d886=_0x4e2b08,{symbol:_0x19b5f1,coin:_0x2f4b53,amount:_0x3b6dee,price:_0x24924c,side:_0x16b193,reverse:_0xab1c00}=_0x2713c7;let _0x15c6ca=dbCoinResults[_0x39d886(0x11e)]('coins')[_0x39d886(0x136)]();const _0x1829b5=calculatePnL(_0x19b5f1,_0x2f4b53,_0x16b193,_0x3b6dee,_0x24924c,_0x15c6ca);dbCoinResults[_0x39d886(0x100)](_0x39d886(0x172),_0x15c6ca)[_0x39d886(0x1a1)]();const _0x358860=getTimeStamp()['split']('\x20')[0x0];let _0x1a8d83=dbPerformance['get']('data')[_0x39d886(0x156)]({'date':_0x358860})[_0x39d886(0x136)]();_0x1a8d83?(_0x1a8d83[_0x39d886(0x122)]+=_0x1829b5,dbPerformance['get']('data')[_0x39d886(0x156)]({'date':_0x358860})[_0x39d886(0x138)](_0x1a8d83)[_0x39d886(0x1a1)]()):await storePerformance();const _0x4241a6=getNormalizedPerformance();emitPerformance(_0x4241a6);}async function validate24hChanges(){const _0x26c099=_0x4e2b08;for(const _0xf7838f of currentCoins){if(_0xf7838f[_0x26c099(0x110)]!=config['basecoin']){let _0x548b29;_0xf7838f[_0x26c099(0x22a)]?_0x548b29=formatResult((0x1/(gChange[_0xf7838f[_0x26c099(0x1cb)]]/0x64+0x1)-0x1)*0x64,0x3):_0x548b29=gChange[_0xf7838f[_0x26c099(0x1cb)]],_0x548b29<config[_0x26c099(0x151)]&&(logHistory('error',_0xf7838f[_0x26c099(0x110)]+_0x26c099(0x269)+_0x548b29+'%'),logHistory(_0x26c099(0x1a2),'Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses'),logHistory(_0x26c099(0x1a2),_0x26c099(0x29b)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x1047ec,_0xb6e8c2){const _0x45b796=_0x4e2b08;if(!_0x1047ec)return!![];const _0x3debc6=_0xb6e8c2[_0x45b796(0x1df)]('.'),_0x3fbf74=_0x1047ec[_0x45b796(0x1df)]('.');for(var _0x201b1b=0x0;_0x201b1b<_0x3fbf74[_0x45b796(0x159)];_0x201b1b++){const _0xe1f59e=~~_0x3fbf74[_0x201b1b],_0x76f7b5=~~_0x3debc6[_0x201b1b];if(_0xe1f59e<_0x76f7b5)return!![];if(_0xe1f59e>_0x76f7b5)return![];}return![];}async function oneTimeMigration(){const _0x2c08ea=_0x4e2b08;let _0xc31e29=dbLogs[_0x2c08ea(0x11e)](_0x2c08ea(0x1f2))['value']();if(isOlderVersion(_0xc31e29,'2.3.5')){let _0x245c9f=[];const _0x545e23=dbLogs[_0x2c08ea(0x11e)](_0x2c08ea(0x1e2))['value']();_0x545e23[_0x2c08ea(0x127)](_0x5576fd=>{const _0x4ec18e=_0x2c08ea;_0x245c9f[_0x4ec18e(0x15c)]({'time':_0x5576fd[_0x4ec18e(0x204)],'type':_0x5576fd[_0x4ec18e(0x236)],'event':_0x5576fd[_0x4ec18e(0x205)]});}),dbLogs[_0x2c08ea(0x11e)](_0x2c08ea(0x1e2))['assign'](_0x245c9f)[_0x2c08ea(0x1a1)]();}let _0x364a15=dbConfig['get'](_0x2c08ea(0x1f2))[_0x2c08ea(0x136)]();if(isOlderVersion(_0x364a15,_0x2c08ea(0x18a))){let _0x469e5f=dbConfig['get'](_0x2c08ea(0x255))[_0x2c08ea(0x156)]({'botID':botID})[_0x2c08ea(0x136)]();if(_0x469e5f){let _0x3edd78=[];_0x469e5f['portfolio'][_0x2c08ea(0x127)](_0x3b6a29=>{const _0x922e32=_0x2c08ea;_0x3edd78[_0x922e32(0x15c)]({'coin':_0x3b6a29[_0x922e32(0x110)],'number':_0x3b6a29[_0x922e32(0x129)],'price':_0x3b6a29[_0x922e32(0x1d4)]}),delete _0x3b6a29[_0x922e32(0x129)],delete _0x3b6a29[_0x922e32(0x1d4)];});if(_0x3edd78[_0x2c08ea(0x159)]!==0x0)fs[_0x2c08ea(0x1d5)](configbackuppath+(_0x2c08ea(0x268)+botID+_0x2c08ea(0x165)),JSON[_0x2c08ea(0xf0)](_0x3edd78,null,0x4),function(_0x121ce5){if(_0x121ce5){}});const _0x14de18=(_0x1935a5,_0x262c49)=>{const _0x30d572=_0x2c08ea;let _0x115d0f=[];_0x262c49[_0x30d572(0x127)](_0x3519d0=>{const _0x565fd0=_0x30d572,_0x34e0e6=_0x1935a5[_0x565fd0(0x156)](_0x14642c=>_0x14642c[_0x565fd0(0x110)]==_0x3519d0[_0x565fd0(0x110)]);if(!_0x34e0e6)_0x115d0f[_0x565fd0(0x15c)](_0x3519d0);});let _0x4de2f6=[];return _0x1935a5[_0x30d572(0x127)](_0x211b4f=>{const _0x394b47=_0x30d572,_0x4c292a=_0x262c49[_0x394b47(0x156)](_0x500b30=>_0x500b30[_0x394b47(0x110)]==_0x211b4f[_0x394b47(0x110)]);if(!_0x4c292a||_0x4c292a['number']==0x0&&_0x211b4f['number']!=0x0)_0x4de2f6[_0x394b47(0x15c)](_0x211b4f);}),{'missingDay1':_0x115d0f,'notInDay2':_0x4de2f6};},_0x366778=dbPerformance[_0x2c08ea(0x11e)](_0x2c08ea(0x198))[_0x2c08ea(0x23e)]()[_0x2c08ea(0x136)]();if(_0x366778[_0x2c08ea(0x159)]>0x1){const {missingDay1:_0xf3c326,notInDay2:_0x1d379e}=_0x14de18(_0x3edd78,_0x366778[0x1][_0x2c08ea(0x172)]);_0x3edd78=[..._0x3edd78,..._0xf3c326],_0x1d379e[_0x2c08ea(0x127)](_0x1201b2=>{const _0xa9aa7e=_0x2c08ea;let _0x35548a=_0x3edd78['findIndex'](_0x3f8cd0=>_0x3f8cd0[_0xa9aa7e(0x110)]==_0x1201b2[_0xa9aa7e(0x110)]);_0x35548a!=-0x1&&_0x3edd78[_0xa9aa7e(0x226)](_0x35548a,0x1);});}_0x3edd78[_0x2c08ea(0x28c)]((_0x82bcbc,_0x158a65)=>_0x82bcbc[_0x2c08ea(0x110)]>_0x158a65['coin']?0x1:_0x158a65[_0x2c08ea(0x110)]>_0x82bcbc[_0x2c08ea(0x110)]?-0x1:0x0);let _0x4aba18=[{'date':_0x469e5f[_0x2c08ea(0x26a)],'changes':_0x3edd78}];_0x366778[_0x2c08ea(0x159)]>0x2&&_0x366778[_0x2c08ea(0x127)]((_0x1962e4,_0x25f793)=>{const _0x142299=_0x2c08ea;if(_0x25f793>0x0&&_0x25f793<_0x366778[_0x142299(0x159)]-0x1){const {missingDay1:_0x4bd74d,notInDay2:_0x138767}=_0x14de18(_0x366778[_0x25f793][_0x142299(0x172)],_0x366778[_0x25f793+0x1][_0x142299(0x172)]);_0x3edd78=[],(_0x4bd74d[_0x142299(0x159)]!=0x0||_0x138767['length']!=0x0)&&(_0x4bd74d[_0x142299(0x159)]!=0x0&&_0x3edd78[_0x142299(0x15c)](..._0x4bd74d),_0x138767[_0x142299(0x159)]!=0x0&&(_0x138767['forEach'](_0x3a75de=>{const _0x169fb0=_0x142299;_0x3a75de[_0x169fb0(0x11c)]=-_0x3a75de[_0x169fb0(0x11c)];}),_0x3edd78[_0x142299(0x15c)](..._0x138767)),_0x3edd78[_0x142299(0x28c)]((_0x38fc73,_0x559fe4)=>_0x38fc73[_0x142299(0x110)]>_0x559fe4[_0x142299(0x110)]?0x1:_0x559fe4[_0x142299(0x110)]>_0x38fc73[_0x142299(0x110)]?-0x1:0x0),_0x4aba18[_0x142299(0x15c)]({'date':_0x366778[_0x25f793+0x1]['date'],'changes':_0x3edd78}));}}),dbConfig[_0x2c08ea(0x11e)](_0x2c08ea(0x255))['find']({'botID':botID})['assign']({..._0x469e5f,'liquidity':_0x4aba18})[_0x2c08ea(0x1a1)]();}}if(isOlderVersion(_0x364a15,_0x2c08ea(0x105))){let _0x5d5d7e=dbConfig[_0x2c08ea(0x11e)](_0x2c08ea(0x255))[_0x2c08ea(0x156)]({'botID':botID})[_0x2c08ea(0x136)]();if(_0x5d5d7e){const _0x4d2a4b=_0x5d5d7e[_0x2c08ea(0x155)],_0x40dcd6=_0x4d2a4b?capitalize(_0x4d2a4b):_0x2c08ea(0x126);dbConfig['get'](_0x2c08ea(0x255))[_0x2c08ea(0x156)]({'botID':botID})[_0x2c08ea(0x138)]({'exchange':_0x40dcd6})[_0x2c08ea(0x1a1)]();}}if(isOlderVersion(_0x364a15,_0x2c08ea(0x13c))){let _0x402cb0=dbConfig[_0x2c08ea(0x11e)]('bot')[_0x2c08ea(0x156)]({'botID':botID})[_0x2c08ea(0x136)]();if(_0x402cb0){const _0x2a5eae=_0x402cb0[_0x2c08ea(0x2bd)],_0x5e2dc9=_0x2a5eae?_0x2c08ea(0x247):![];dbConfig[_0x2c08ea(0x11e)](_0x2c08ea(0x255))[_0x2c08ea(0x156)]({'botID':botID})['assign']({'marketcapEnabled':_0x5e2dc9})[_0x2c08ea(0x1a1)]();}}if(isOlderVersion(_0x364a15,_0x2c08ea(0xdf))){let _0x395181=dbConfig['get']('bot')['find']({'botID':botID})['value']();if(_0x395181){const _0x274310=_0x395181['autoliquidity'],_0x701e35=_0x274310?_0x2c08ea(0xe3):![];dbConfig[_0x2c08ea(0x11e)]('bot')['find']({'botID':botID})[_0x2c08ea(0x138)]({'autoliquidity':_0x701e35})[_0x2c08ea(0x1a1)]();}}let _0xb3d5b6=dbPerformance['get'](_0x2c08ea(0x1f2))['value']();isOlderVersion(_0xb3d5b6,_0x2c08ea(0x18a))&&setStartDatePerformance();let _0x156382=dbCoinResults[_0x2c08ea(0x11e)](_0x2c08ea(0x1f2))['value']();if(isOlderVersion(_0x156382,_0x2c08ea(0x2be))){let _0x47a903=dbCoinResults[_0x2c08ea(0x11e)](_0x2c08ea(0x172))[_0x2c08ea(0x136)]();if(_0x47a903[_0x2c08ea(0x159)]!=0x0)pnlGenerationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x2cc3c9=_0x4e2b08;dbConfig[_0x2cc3c9(0x100)](_0x2cc3c9(0x1f2),serverversion)[_0x2cc3c9(0x1a1)](),dbPerformance['set'](_0x2cc3c9(0x1f2),serverversion)[_0x2cc3c9(0x1a1)](),dbLogs[_0x2cc3c9(0x100)](_0x2cc3c9(0x1f2),serverversion)[_0x2cc3c9(0x1a1)](),dbCoinResults[_0x2cc3c9(0x100)](_0x2cc3c9(0x1f2),serverversion)[_0x2cc3c9(0x1a1)]();}function getConfiguration(_0x529446){const _0x41089d=_0x4e2b08;let _0x22ad98=dbConfig[_0x41089d(0x11e)](_0x41089d(0x255))[_0x41089d(0x156)]({'botID':_0x529446})[_0x41089d(0x136)]();if(_0x22ad98){let _0x3707d6=![];typeof _0x22ad98[_0x41089d(0x223)]==_0x41089d(0x14a)&&(_0x22ad98={..._0x22ad98,'threshold':Number(_0x22ad98[_0x41089d(0x223)])},_0x3707d6=!![]),_0x22ad98[_0x41089d(0x151)]==undefined&&(_0x22ad98={..._0x22ad98,'change24h':-0x14},_0x3707d6=!![]),_0x22ad98[_0x41089d(0x2a8)]==undefined&&(_0x22ad98={..._0x22ad98,'fiat':'USD'},_0x3707d6=!![]),_0x22ad98[_0x41089d(0x152)]==undefined&&(_0x22ad98={..._0x22ad98,'onepagemode':settings[_0x41089d(0x152)]},_0x3707d6=!![]),_0x22ad98[_0x41089d(0x14e)]==undefined&&(_0x22ad98={..._0x22ad98,'colorscheme':_0x41089d(0x130)},_0x3707d6=!![]),_0x22ad98[_0x41089d(0x1ae)]==undefined&&(_0x22ad98={..._0x22ad98,'autoliquidity':_0x41089d(0xe3)},_0x3707d6=!![]),_0x22ad98[_0x41089d(0x154)]==undefined&&(_0x22ad98={..._0x22ad98,'marketcapApi':settings[_0x41089d(0x154)]?!![]:![]},_0x3707d6=!![]),_0x22ad98[_0x41089d(0x2bd)]==undefined&&(_0x22ad98={..._0x22ad98,'marketcapEnabled':![]},_0x3707d6=!![]),_0x22ad98[_0x41089d(0xe4)]==undefined&&(_0x22ad98={..._0x22ad98,'sandbox':![]},_0x3707d6=!![]),_0x3707d6&&(_0x22ad98={'botID':_0x22ad98[_0x41089d(0x241)],'exchange':_0x22ad98['exchange'],'apiKey':_0x22ad98[_0x41089d(0x1cd)],'apiSecret':_0x22ad98['apiSecret'],'apiPassword':_0x22ad98[_0x41089d(0x1c0)],'basecoin':_0x22ad98['basecoin'],'botname':_0x22ad98[_0x41089d(0x176)],'showname':_0x22ad98[_0x41089d(0xed)],'threshold':_0x22ad98[_0x41089d(0x223)],'ordertype':_0x22ad98[_0x41089d(0x296)],'timeout':_0x22ad98[_0x41089d(0x1cc)],'fiat':_0x22ad98[_0x41089d(0x2a8)],'startdate':_0x22ad98[_0x41089d(0x26a)],'recreate':_0x22ad98[_0x41089d(0x290)],'timeshift':_0x22ad98[_0x41089d(0x145)],'onepagemode':_0x22ad98['onepagemode'],'headless':_0x22ad98[_0x41089d(0x10e)],'cooldown':_0x22ad98[_0x41089d(0x246)],'change24h':_0x22ad98['change24h'],'emojibuy':_0x22ad98[_0x41089d(0x22d)],'emojisell':_0x22ad98[_0x41089d(0x1b7)],'colorscheme':_0x22ad98[_0x41089d(0x14e)],'marketcapApi':_0x22ad98[_0x41089d(0x154)],'marketcapEnabled':_0x22ad98[_0x41089d(0x2bd)],'sandbox':_0x22ad98[_0x41089d(0xe4)],'portfolio':_0x22ad98[_0x41089d(0x213)],'autoliquidity':_0x22ad98[_0x41089d(0x1ae)],'liquidity':_0x22ad98['liquidity'],'openOrders':_0x22ad98['openOrders']},dbConfig[_0x41089d(0x11e)](_0x41089d(0x255))[_0x41089d(0x285)]()['write'](),dbConfig['get'](_0x41089d(0x255))[_0x41089d(0x15c)](_0x22ad98)[_0x41089d(0x1a1)]());}else _0x22ad98={'botID':_0x529446,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x41089d(0x286)+_0x529446,'showname':![],'threshold':0x3,'ordertype':_0x41089d(0x103),'timeout':0x14,'fiat':_0x41089d(0x1d8),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x41089d(0x145)],'onepagemode':settings[_0x41089d(0x152)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':'red_yellow_blue','marketcapApi':settings[_0x41089d(0x154)]?!![]:![],'marketcapEnabled':![],'sandbox':![],'portfolio':[],'autoliquidity':_0x41089d(0xe3),'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x22ad98;}function emittedConfiguration(){const _0x501ae1=_0x4e2b08;let _0x1fa422;if(config[_0x501ae1(0x1cd)]=='')_0x1fa422={...config,'configstate':_0x501ae1(0x1f7)};else config['apiKey']=='***'?_0x1fa422={...config,'configstate':_0x501ae1(0x24b)}:(_0x1fa422={...config,'apiKey':_0x501ae1(0x234),'apiSecret':'************'},config[_0x501ae1(0x1c0)]&&(_0x1fa422[_0x501ae1(0x1c0)]='************'));return _0x1fa422[_0x501ae1(0xfd)]=enableFiatToggle,_0x1fa422;}function getSettings(){const _0x32a30b=_0x4e2b08;return dbSettings[_0x32a30b(0x11e)]('settings')[_0x32a30b(0x136)]();}function getSecure(){const _0x250e90=_0x4e2b08;return dbSecure[_0x250e90(0x11e)]('secure')['value']()||{};}function updateTimeshift(_0x1e92a1){const _0x155df8=_0x4e2b08;let _0x44752c=dbConfig[_0x155df8(0x11e)](_0x155df8(0x255))[_0x155df8(0x156)]({'botID':botID})[_0x155df8(0x136)]();_0x44752c&&dbConfig['get'](_0x155df8(0x255))[_0x155df8(0x156)]({'botID':botID})[_0x155df8(0x138)]({'timeshift':_0x1e92a1})['write'](),config[_0x155df8(0x145)]=_0x1e92a1,proxyEmit(_0x155df8(0x243),emittedConfiguration());}function updateOnepagemode(_0x58c7a4){const _0x3be20d=_0x4e2b08;let _0x2902a4=dbConfig[_0x3be20d(0x11e)](_0x3be20d(0x255))[_0x3be20d(0x156)]({'botID':botID})[_0x3be20d(0x136)]();_0x2902a4&&dbConfig[_0x3be20d(0x11e)]('bot')['find']({'botID':botID})[_0x3be20d(0x138)]({'onepagemode':_0x58c7a4})[_0x3be20d(0x1a1)](),config[_0x3be20d(0x152)]=_0x58c7a4,proxyEmit(_0x3be20d(0x243),emittedConfiguration());}function updateMarketcapApi(_0x4be373){const _0x52d004=_0x4e2b08,_0x24f1ff=_0x4be373?!![]:![];let _0x217fc3=dbConfig[_0x52d004(0x11e)]('bot')['find']({'botID':botID})[_0x52d004(0x136)]();_0x217fc3&&dbConfig[_0x52d004(0x11e)](_0x52d004(0x255))[_0x52d004(0x156)]({'botID':botID})[_0x52d004(0x138)]({'marketcapApi':_0x24f1ff})[_0x52d004(0x1a1)](),config[_0x52d004(0x154)]=_0x24f1ff,getMarketCap(),proxyEmit('configuration',emittedConfiguration());}async function storeConfiguration(_0x175f88){const _0x612c28=_0x4e2b08;logger[_0x612c28(0x13e)](_0x612c28(0x21b));_0x175f88[_0x612c28(0x218)]&&delete _0x175f88['configstate'];if(pidBalances)clearTimeout(pidBalances);setBlockTransactionDetection(!![]);let _0x3c446a=![],_0x19d61e=![],_0x31fcf4=[];_0x175f88[_0x612c28(0x213)][_0x612c28(0x127)](_0x1825a2=>{const _0x18b85e=_0x612c28;if(!_0x1825a2[_0x18b85e(0x182)]&&_0x1825a2[_0x18b85e(0x110)]!=_0x175f88[_0x18b85e(0x215)])_0x31fcf4['push'](_0x1825a2[_0x18b85e(0x1cb)]);}),_0x31fcf4[_0x612c28(0x127)](_0x4345bd=>{const _0x4d0786=_0x612c28,_0x2183e9=currentCoins[_0x4d0786(0x156)](_0x3c364b=>_0x3c364b[_0x4d0786(0x1cb)]==_0x4345bd);!_0x2183e9&&(_0x3c446a=!![]);}),currentCoins[_0x612c28(0x127)](_0x3854f=>{const _0x1c05b2=_0x612c28;if(_0x3854f[_0x1c05b2(0x110)]!=config[_0x1c05b2(0x215)]){const _0xa173b2=_0x31fcf4[_0x1c05b2(0x156)](_0x36b228=>_0x36b228==_0x3854f['symbol']);!_0xa173b2&&(_0x3c446a=!![]);}}),_0x175f88[_0x612c28(0x213)]['forEach'](_0x4bc577=>{const _0x4766d7=_0x612c28,_0x4801f7=config[_0x4766d7(0x213)]['find'](_0xc055f6=>_0xc055f6[_0x4766d7(0x110)]==_0x4bc577[_0x4766d7(0x110)]);if(_0x4801f7&&_0x4bc577[_0x4766d7(0x19c)]!=_0x4801f7[_0x4766d7(0x19c)])_0x19d61e=!![];});let _0x265ca5=dbConfig[_0x612c28(0x11e)](_0x612c28(0x255))[_0x612c28(0x156)]({'botID':botID})[_0x612c28(0x136)]();_0x175f88={..._0x175f88,'apiKey':decryptRSA(secure[_0x612c28(0x18b)],_0x175f88['apiKey']),'apiSecret':decryptRSA(secure['privateKey'],_0x175f88[_0x612c28(0x2b0)])};_0x175f88['apiPassword']&&(_0x175f88[_0x612c28(0x1c0)]=decryptRSA(secure[_0x612c28(0x18b)],_0x175f88['apiPassword']));let _0x3ebf29=![];if(_0x265ca5){_0x175f88['apiKey']=='************'?_0x175f88[_0x612c28(0x1cd)]=config['apiKey']:_0x3ebf29=!![];_0x175f88['apiSecret']==_0x612c28(0x234)?_0x175f88[_0x612c28(0x2b0)]=config['apiSecret']:_0x3ebf29=!![];if(_0x175f88[_0x612c28(0x1c0)]==_0x612c28(0x234))_0x175f88['apiPassword']=config[_0x612c28(0x1c0)];else{if(_0x175f88[_0x612c28(0x1c0)])_0x3ebf29=!![];}dbConfig[_0x612c28(0x11e)](_0x612c28(0x255))[_0x612c28(0x156)]({'botID':botID})[_0x612c28(0x138)](_0x175f88)[_0x612c28(0x1a1)]();}else dbConfig[_0x612c28(0x11e)](_0x612c28(0x255))[_0x612c28(0x15c)](_0x175f88)[_0x612c28(0x1a1)](),_0x3ebf29=!![],process['send']({'status':'enabled','live':_0x612c28(0x175)},_0x31d59e=>{});process['send']({'botname':_0x175f88[_0x612c28(0x176)]},_0x4dc761=>{}),config={..._0x175f88},updateBotManager(),proxyEmit('configuration-stored'),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x3ebf29)await reset(!![]);else _0x3c446a||_0x19d61e?await reset(![]):getBalances();setBlockTransactionDetection(![]);}async function storeHeadless(_0x13799c){const _0x13e10d=_0x4e2b08,_0x3d6e7d={...config,'headless':_0x13799c[_0x13e10d(0x10e)]};let _0x199d9=dbConfig['get'](_0x13e10d(0x255))[_0x13e10d(0x156)]({'botID':botID})[_0x13e10d(0x136)]();_0x199d9&&dbConfig[_0x13e10d(0x11e)](_0x13e10d(0x255))[_0x13e10d(0x156)]({'botID':botID})[_0x13e10d(0x138)](_0x3d6e7d)[_0x13e10d(0x1a1)](),config={..._0x3d6e7d},updateBotManager(),proxyEmit(_0x13e10d(0x243),emittedConfiguration());}async function storeFiat(_0x155e59){const _0x52ca7c=_0x4e2b08,_0xb4b39e={...config,'fiat':_0x155e59};let _0x5e27f4=dbConfig[_0x52ca7c(0x11e)](_0x52ca7c(0x255))[_0x52ca7c(0x156)]({'botID':botID})[_0x52ca7c(0x136)]();_0x5e27f4&&dbConfig[_0x52ca7c(0x11e)](_0x52ca7c(0x255))[_0x52ca7c(0x156)]({'botID':botID})['assign'](_0xb4b39e)['write'](),config={..._0xb4b39e},proxyEmit(_0x52ca7c(0x243),emittedConfiguration());}function resetHistory(){const _0x16f475=_0x4e2b08;logger[_0x16f475(0x12f)](_0x16f475(0x21a));try{if(fs[_0x16f475(0x1db)](path[_0x16f475(0x19a)](configpath,_0x16f475(0x2a2)+botID+_0x16f475(0x227))))fs[_0x16f475(0x201)](path[_0x16f475(0x19a)](configpath,_0x16f475(0x2a2)+botID+_0x16f475(0x227)));if(fs[_0x16f475(0x1db)](path['join'](configpath,_0x16f475(0x2a2)+botID+_0x16f475(0x12c))))fs[_0x16f475(0x201)](path[_0x16f475(0x19a)](configpath,_0x16f475(0x2a2)+botID+_0x16f475(0x12c)));if(fs['existsSync'](path[_0x16f475(0x19a)](configpath,_0x16f475(0x2a2)+botID+'-results.json')))fs['unlinkSync'](path[_0x16f475(0x19a)](configpath,_0x16f475(0x2a2)+botID+_0x16f475(0x114)));}catch(_0x487e98){if(_0x487e98)logger['full'](_0x16f475(0xf9),_0x487e98);}const _0x4a5f11=getDate();let _0x29c7eb=[];currentCoins[_0x16f475(0x127)](_0x165ed7=>{const _0x3207f2=_0x16f475;_0x29c7eb[_0x3207f2(0x15c)]({'coin':_0x165ed7[_0x3207f2(0x110)],'number':_0x165ed7[_0x3207f2(0x11c)],'price':_0x165ed7[_0x3207f2(0x120)]});});let _0x4ef49d=dbConfig['get'](_0x16f475(0x255))[_0x16f475(0x156)]({'botID':botID})[_0x16f475(0x136)]();_0x4ef49d&&(dbConfig[_0x16f475(0x11e)]('bot')[_0x16f475(0x156)]({'botID':botID})[_0x16f475(0x138)]({'liquidity':[{'date':_0x4a5f11,'changes':_0x29c7eb}]})[_0x16f475(0x1a1)](),config['liquidity']=[]),restartBot(!![]);}function noslash(_0x4a7e74){const _0x39ff04=_0x4e2b08;return _0x4a7e74[_0x39ff04(0x1a4)]('/','');}function updateHighestFee(_0x12c29a){const _0x50b6f4=_0x4e2b08;if(_0x12c29a[_0x50b6f4(0x22a)]){let _0x2d3653={'filled':_0x12c29a['filled']*_0x12c29a[_0x50b6f4(0x1c6)],'amount':_0x12c29a[_0x50b6f4(0xe1)]*_0x12c29a[_0x50b6f4(0x1c6)],'side':_0x12c29a['side']==_0x50b6f4(0x131)?'buy':'sell','price':0x1/_0x12c29a['price']};_0x12c29a={..._0x12c29a,..._0x2d3653};}const _0x414b61=defaultFee*_0x12c29a[_0x50b6f4(0xe1)]*_0x12c29a['price'];lastFees[_0x50b6f4(0x1f9)][_0x50b6f4(0x159)]===0x14&&lastFees[_0x50b6f4(0x1f9)]['shift'](),lastFees[_0x50b6f4(0x1f9)][_0x50b6f4(0x15c)](_0x414b61),lastFees[_0x50b6f4(0x23f)]=Math[_0x50b6f4(0x24c)](...lastFees[_0x50b6f4(0x1f9)]);}async function updateNumberCoinsCcxt(_0x21e149){const _0x45cee1=_0x4e2b08;logger[_0x45cee1(0x13e)](_0x45cee1(0x147)+_0x21e149[_0x45cee1(0x1cb)]+_0x45cee1(0x16f)+_0x21e149[_0x45cee1(0x292)]+_0x45cee1(0x16f)+_0x21e149[_0x45cee1(0xe1)]+'\x20/\x20'+_0x21e149['amount']+'\x20|\x20'+_0x21e149['id']);let _0x31d186=_0x21e149[_0x45cee1(0x292)],_0x3b57a8=![];currentCoins['forEach'](_0x10f1cb=>{const _0x32a141=_0x45cee1;_0x10f1cb[_0x32a141(0x1cb)]==_0x21e149[_0x32a141(0x1cb)]&&(_0x3b57a8=!![]);});if(!_0x3b57a8)return;const _0x38e633=currentCoins[_0x45cee1(0x156)](_0x272d6d=>_0x272d6d[_0x45cee1(0x1cb)]==_0x21e149['symbol']),_0x16f49e=_0x38e633[_0x45cee1(0x110)],_0x1f29d8=_0x35cd82=>{const _0x1e7e10=_0x45cee1,_0x3e4ced=currentCoins[_0x1e7e10(0x156)](_0x11dff3=>_0x11dff3['symbol']==_0x21e149[_0x1e7e10(0x1cb)]);if(_0x3e4ced)_0x3e4ced[_0x1e7e10(0x220)]=_0x35cd82;};let _0x1693a9=![];for(const _0x111523 of lastOrders){const _0x470b1d=0x64,_0x8aa0=0x1388;let _0x6d6369=0x0;while(!_0x111523['orderId']&&_0x6d6369*_0x470b1d<_0x8aa0){_0x6d6369++,await sleep(_0x470b1d);}if(_0x6d6369>0x0)logger[_0x45cee1(0x13e)](_0x45cee1(0x298)+_0x6d6369*_0x470b1d/0x3e8+_0x45cee1(0xff));_0x111523[_0x45cee1(0x22e)]==_0x21e149['id']&&(_0x1693a9=!![]);}if(_0x31d186==_0x45cee1(0x1f4)){_0x1f29d8(_0x45cee1(0x1f4));if(_0x21e149[_0x45cee1(0xe1)]>0x0&&_0x21e149[_0x45cee1(0xe1)]<_0x21e149['amount']){if(_0x1693a9){setBlockTransactionDetection(!![]),logger[_0x45cee1(0x13e)](_0x45cee1(0x15d)+_0x21e149[_0x45cee1(0xe1)]+_0x45cee1(0x1fa)+_0x21e149['id']);const _0x257973=await getCoins(balanceUpdateDelay,undefined,undefined,_0x16f49e);[currentCoins,currentCoinsAll]=_0x257973,setBlockTransactionDetection(![]);}else logger[_0x45cee1(0x13e)](_0x45cee1(0x15d)+_0x21e149[_0x45cee1(0xe1)]+_0x45cee1(0x25b)+_0x21e149['id']),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay);}}else{if(_0x31d186==_0x45cee1(0x1e8)){_0x1f29d8(_0x45cee1(0x1e8)),lastOrders=lastOrders[_0x45cee1(0x170)](_0x55fbdc=>_0x55fbdc[_0x45cee1(0x1cb)]!=_0x21e149[_0x45cee1(0x1cb)]);const _0x5195e3=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x5195e3,setBlockTransactionDetection(![]),await getOpenOrders(),handleOpenOrders();}else{if(_0x31d186=='closed'){if(lastOrders)for(const _0x1df2a3 of lastOrders){if(_0x1df2a3[_0x45cee1(0x22e)]==_0x21e149['id']){logger[_0x45cee1(0x13e)](_0x45cee1(0x278)+_0x21e149['id']),_0x1693a9=!![];if(_0x1df2a3[_0x45cee1(0xe1)]==0x0){setBlockTransactionDetection(!![]),logger[_0x45cee1(0x13e)]('2\x20-\x20handling\x20FILLED\x20order:\x20'+_0x21e149['id']);if(_0x21e149[_0x45cee1(0x299)])_0x1df2a3['price']=_0x21e149[_0x45cee1(0x299)];else{if(_0x21e149['price'])_0x1df2a3[_0x45cee1(0x1c6)]=_0x21e149[_0x45cee1(0x1c6)];else{}}_0x1df2a3[_0x45cee1(0xe1)]=_0x21e149[_0x45cee1(0xe1)],updateHighestFee(_0x1df2a3);const _0x4ec670=await getCoins(balanceUpdateDelay,undefined,undefined,_0x16f49e);[currentCoins,currentCoinsAll]=_0x4ec670,setBlockTransactionDetection(![]),await validateOrders(),_0x1f29d8(_0x45cee1(0xe1)),_0x1df2a3['fee']={'currency':_0x21e149[_0x45cee1(0x1e7)]?_0x21e149[_0x45cee1(0x1e7)][_0x45cee1(0x21c)]:null,'cost':_0x21e149[_0x45cee1(0x1e7)]?_0x21e149[_0x45cee1(0x1e7)][_0x45cee1(0x222)]:0x0},await updatePnL(_0x1df2a3);}}}!_0x1693a9&&(logger[_0x45cee1(0x13e)](_0x45cee1(0x291)+_0x21e149['id']),_0x1f29d8(_0x45cee1(0xe1)),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay),await updateOpenOrders(),handleOpenOrders());}}}if(lastBalances){let _0x47560e=JSON[_0x45cee1(0x1c4)](lastBalances[_0x45cee1(0x213)]);const _0xb5666=_0x47560e[_0x45cee1(0x156)](_0x2b9a6f=>_0x2b9a6f[_0x45cee1(0x1cb)]==_0x21e149['symbol']);if(_0xb5666){if(_0x31d186==_0x45cee1(0x1f4))_0xb5666['orderstatus']=_0xb5666[_0x45cee1(0x220)]==_0x45cee1(0xe1)?'filled':'open';else{if(_0x31d186==_0x45cee1(0x1e8))_0xb5666[_0x45cee1(0x220)]=_0xb5666['orderstatus']==_0x45cee1(0xe1)?_0x45cee1(0xe1):_0x45cee1(0x1e8);else _0x31d186==_0x45cee1(0x1af)&&(_0xb5666['orderstatus']=_0x45cee1(0xe1));}}lastBalances={...lastBalances,'portfolio':JSON[_0x45cee1(0xf0)](_0x47560e)},proxyEmit(_0x45cee1(0x2bb),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){await getOpenOrders();let _0x57e6b5=![];currentCoins['forEach'](_0x1aa9e5=>{const _0x322992=_0xbd55;_0x57e6b5=allOpenOrders[_0x322992(0x156)](_0x4dfe20=>_0x4dfe20[_0x322992(0x1cb)]==_0x1aa9e5['symbol']),_0x1aa9e5[_0x322992(0x220)]=_0x57e6b5?_0x322992(0x1f4):'none';});}async function fetchBalance(_0x331bfc=!![]){const _0x199af7=_0x4e2b08;let _0x1390e5,_0x41f7b6;try{return _0x1390e5=await exchange[_0x199af7(0x23b)](),_0x41f7b6=_0x1390e5[_0x199af7(0xf3)],_0x41f7b6;}catch(_0x1470f0){return!_0x331bfc?handleErrorNoStop(_0x1470f0,_0x199af7(0x2bc)):await handleError(_0x1470f0,_0x199af7(0x2bc)),![];}}async function getCoins(_0x5a12d0=0x0,_0x228099=!![],_0x580d0a=config[_0x4e2b08(0x215)],_0x13d572){const _0x31dd6d=_0x4e2b08;let _0x12782d=[],_0x331e99=[],_0x1dd413=[],_0x6502c5;if(_0x5a12d0)await sleep(_0x5a12d0);if(botPaused)return[currentCoins,currentCoinsAll];let _0x34c802=![],_0x55a3a4=0x0,_0x1019ef,_0x5a6001;_0x13d572&&(_0x1019ef=currentCoins[_0x31dd6d(0x156)](_0x55b1e8=>_0x55b1e8['coin']==_0x13d572),_0x1019ef&&(_0x5a6001=_0x1019ef[_0x31dd6d(0x146)],delete _0x1019ef[_0x31dd6d(0x146)]));while(!_0x34c802){_0x6502c5=await fetchBalance(_0x228099);if(_0x6502c5){if(_0x13d572){if(_0x6502c5[_0x13d572]!=_0x5a6001)logger[_0x31dd6d(0x13e)](_0x31dd6d(0x173)+_0x13d572+':\x20'+_0x6502c5[_0x13d572]+'\x20('+_0x5a6001+')'),_0x34c802=!![];else{logger[_0x31dd6d(0x13e)](_0x31dd6d(0x29e)+_0x13d572+':\x20'+_0x6502c5[_0x13d572]+'\x20('+_0x5a6001+')'),_0x55a3a4++;if(_0x55a3a4<balanceUpdateRetries)await sleep(balanceUpdateDelay);else{logger['debug']('Stopped\x20fetching\x20balance\x20after\x20'+_0x55a3a4+_0x31dd6d(0x26f));break;}}}else break;}else return[currentCoins,currentCoinsAll];}for(const [_0x1e7324,_0x3ce699]of Object['entries'](_0x6502c5)){_0x1dd413['push'](_0x1e7324);}config['portfolio'][_0x31dd6d(0x127)](_0x1822d8=>{const _0x100595=_0x31dd6d;!_0x1dd413[_0x100595(0x13d)](_0x1822d8[_0x100595(0x110)])&&(_0x6502c5[_0x1822d8[_0x100595(0x110)]]=0x0);});if(_0x580d0a=='')for(const [_0x1106ff,_0x5764e0]of Object[_0x31dd6d(0x235)](_0x6502c5)){_0x5764e0!=0x0&&_0x12782d[_0x31dd6d(0x15c)]({'coin':_0x1106ff});}else for(const [_0x500333,_0x59271d]of Object[_0x31dd6d(0x235)](_0x6502c5)){const _0x1da7e5=config[_0x31dd6d(0x213)][_0x31dd6d(0x156)](_0x38943a=>_0x38943a['coin']==_0x500333),_0x406b9f=_0x500333+'/'+_0x580d0a,_0x545158=_0x580d0a+'/'+_0x500333,_0x3ad165=currentCoins['find'](_0x2e3437=>_0x2e3437[_0x31dd6d(0x110)]==_0x500333);if((_0x59271d!=0x0||_0x1da7e5)&&(allSymbols[_0x31dd6d(0x13d)](_0x406b9f)||_0x500333==_0x580d0a))_0x3ad165?_0x12782d['push']({..._0x3ad165,'number':Math[_0x31dd6d(0x24c)](_0x59271d+(_0x1da7e5&&_0x1da7e5['offset']||0x0),0x0)}):_0x12782d['push']({'coin':_0x500333,'symbol':_0x406b9f,'reverse':![],'number':Math[_0x31dd6d(0x24c)](_0x59271d+(_0x1da7e5&&_0x1da7e5[_0x31dd6d(0x19c)]||0x0),0x0),'orderstatus':_0x31dd6d(0x21f)});else{if((_0x59271d!=0x0||_0x1da7e5)&&allSymbols[_0x31dd6d(0x13d)](_0x545158))_0x3ad165?_0x12782d[_0x31dd6d(0x15c)]({..._0x3ad165,'number':Math[_0x31dd6d(0x24c)](_0x59271d+(_0x1da7e5&&_0x1da7e5['offset']||0x0),0x0)}):_0x12782d[_0x31dd6d(0x15c)]({'coin':_0x500333,'symbol':_0x545158,'reverse':!![],'number':Math[_0x31dd6d(0x24c)](_0x59271d+(_0x1da7e5&&_0x1da7e5[_0x31dd6d(0x19c)]||0x0),0x0),'orderstatus':_0x31dd6d(0x21f)});else _0x1da7e5&&_0x12782d['push']({'coin':_0x1da7e5[_0x31dd6d(0x110)],'symbol':_0x1da7e5[_0x31dd6d(0x1cb)],'reverse':_0x1da7e5[_0x31dd6d(0x22a)],'number':0x0,'orderstatus':_0x31dd6d(0x21f)});}}return _0x12782d['sort']((_0x5de07b,_0x5ade6a)=>_0x5de07b[_0x31dd6d(0x21d)]<_0x5ade6a[_0x31dd6d(0x21d)]?0x1:_0x5ade6a[_0x31dd6d(0x21d)]<_0x5de07b['delta']?-0x1:0x0),_0x331e99=cloneDeep(_0x12782d),_0x12782d=_0x12782d[_0x31dd6d(0x170)](_0x233a15=>{const _0x1f6bfa=_0x31dd6d,_0x2d7553=config[_0x1f6bfa(0x213)][_0x1f6bfa(0x156)](_0x2bcfe7=>_0x2bcfe7[_0x1f6bfa(0x110)]==_0x233a15[_0x1f6bfa(0x110)]);return _0x2d7553&&!_0x2d7553['excluded'];}),[_0x12782d,_0x331e99];}async function getOpenOrders(){const _0x5eed30=_0x4e2b08;let _0x3516a6;allOpenOrders=[];try{for(const _0x24895e of config[_0x5eed30(0x213)]){!_0x24895e[_0x5eed30(0x182)]&&_0x24895e[_0x5eed30(0x110)]!=config[_0x5eed30(0x215)]&&(_0x3516a6=await exchange[_0x5eed30(0x280)](_0x24895e[_0x5eed30(0x1cb)]),_0x3516a6[_0x5eed30(0x159)]>0x0&&allOpenOrders['push'](_0x3516a6[0x0]));}}catch(_0x3adb32){await handleError(_0x3adb32,_0x5eed30(0x1a9));}}async function handleOpenOrders(_0xe49092=0x0){const _0x3e052f=_0x4e2b08;allOpenOrders[_0x3e052f(0x159)]==0x0&&lockOrders==ORDERS[_0x3e052f(0x17b)]&&allOrdersPlaced&&(_0xe49092==0x0?(logger[_0x3e052f(0x13e)]('1\x20-\x20Handle\x20open\x20orders'),_0xe49092++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x3e052f(0x13e)](_0x3e052f(0xf6)),validateOrders(_0x3e052f(0x1fd))));}async function testAPI(){const _0x3d3a2e=_0x4e2b08;try{return await exchange['fetchBalance'](),!![];}catch(_0x4bc4e7){return loading[_0x3d3a2e(0x1e9)]=!![],_0x4bc4e7[_0x3d3a2e(0x210)]()[_0x3d3a2e(0x2a5)]()[_0x3d3a2e(0x13d)](_0x3d3a2e(0x264))||_0x4bc4e7['toString']()['toLowerCase']()[_0x3d3a2e(0x13d)](_0x3d3a2e(0x2aa))?(logHistory(_0x3d3a2e(0x1a2),'Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)'),loading[_0x3d3a2e(0x1a2)]=_0x3d3a2e(0x28f)):(handleErrorNoStop(_0x4bc4e7,'testAPI()'),logger[_0x3d3a2e(0x13e)](_0x3d3a2e(0x199),_0x4bc4e7)),emitLoadingProgress(),botPaused=!![],![];}}async function testNewAPI(_0xaadc23){const _0x5705da=_0x4e2b08;logger['debug'](_0x5705da(0x274));const _0x1825a7=ccxt[_0x5705da(0x191)][_0xaadc23[_0x5705da(0x155)][_0x5705da(0x2a5)]()],_0x2358ba=new _0x1825a7({'apiKey':_0xaadc23[_0x5705da(0x1cd)],'secret':_0xaadc23[_0x5705da(0x2b0)],'options':{'defaultType':_0x5705da(0xfb)}});if(_0xaadc23['apiPassword'])_0x2358ba[_0x5705da(0x1c3)]=_0xaadc23[_0x5705da(0x1c0)];if(_0x2358ba[_0x5705da(0x297)][_0x5705da(0xe4)])_0x2358ba[_0x5705da(0x1a7)](_0xaadc23['sandbox']);try{await _0x2358ba[_0x5705da(0x23b)](),botPaused=![];}catch(_0xe28031){logger[_0x5705da(0x13e)](_0x5705da(0x1c8)+_0xe28031[_0x5705da(0x210)]());throw _0xe28031;}}function cloneDeep(_0x1451c3){const _0x541d86=_0x4e2b08;return JSON['parse'](JSON[_0x541d86(0xf0)](_0x1451c3));}async function getPortfolio(_0x8fd060){const _0x55a013=_0x4e2b08;let _0x5a697a=[],_0x32d2cb=[],_0x130104=[],_0x451642;_0x8fd060[_0x55a013(0x1cd)]=decryptRSA(secure[_0x55a013(0x18b)],_0x8fd060[_0x55a013(0x1cd)]),_0x8fd060[_0x55a013(0x2b0)]=decryptRSA(secure[_0x55a013(0x18b)],_0x8fd060[_0x55a013(0x2b0)]);if(_0x8fd060['apiPassword'])_0x8fd060[_0x55a013(0x1c0)]=decryptRSA(secure[_0x55a013(0x18b)],_0x8fd060['apiPassword']);if(_0x8fd060['apiKey']!==_0x55a013(0x234)||_0x8fd060[_0x55a013(0x2b0)]!==_0x55a013(0x234)||_0x8fd060[_0x55a013(0x1c0)]&&_0x8fd060[_0x55a013(0x1c0)]!=='************'){if(config[_0x55a013(0x155)]){if(_0x8fd060[_0x55a013(0x1cd)]=='************')_0x8fd060[_0x55a013(0x1cd)]=config['apiKey'];if(_0x8fd060[_0x55a013(0x2b0)]==_0x55a013(0x234))_0x8fd060[_0x55a013(0x2b0)]=config[_0x55a013(0x2b0)];if(_0x8fd060[_0x55a013(0x1c0)]==_0x55a013(0x234))_0x8fd060[_0x55a013(0x1c0)]=config[_0x55a013(0x1c0)];}try{if(_0x8fd060[_0x55a013(0x1ce)])await testNewAPI(_0x8fd060);}catch(_0x4a2942){if(_0x4a2942[_0x55a013(0x210)]()[_0x55a013(0x13d)]('AuthenticationError')){logHistory(_0x55a013(0x1a2),_0x55a013(0x228)),logHistory('error',_0x55a013(0x282)+_0x4a2942[_0x55a013(0x210)]()),proxyEmit(_0x55a013(0x253),![]);return;}else{if(_0x4a2942[_0x55a013(0x210)]()[_0x55a013(0x13d)]('PermissionDenied')){logHistory(_0x55a013(0x1a2),'Exchange\x20permission\x20denied\x20-\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange'),logHistory(_0x55a013(0x1a2),_0x55a013(0x282)+_0x4a2942[_0x55a013(0x210)]()),proxyEmit('portfolio1',![]);return;}else{logHistory('error',_0x55a013(0x17c)+_0x4a2942[_0x55a013(0x210)]()),logger[_0x55a013(0x13e)](_0x55a013(0x199),_0x4a2942),proxyEmit(_0x55a013(0x253),![]);return;}}}exchange?updateExchange(_0x8fd060[_0x55a013(0x1cd)],_0x8fd060[_0x55a013(0x2b0)],_0x8fd060[_0x55a013(0x1c0)]):await initExchange(_0x8fd060[_0x55a013(0x155)],_0x8fd060['apiKey'],_0x8fd060[_0x55a013(0x2b0)],_0x8fd060[_0x55a013(0x1c0)],_0x8fd060['sandbox']);await loadSymbols();const _0x36fdb3=await getCoins(0x0,![],_0x8fd060[_0x55a013(0x215)]);_0x130104=cloneDeep(_0x36fdb3[0x1]);}else{const _0x2263b5=await getCoins();_0x130104=cloneDeep(_0x2263b5[0x1]);}if(_0x8fd060[_0x55a013(0x215)]=='')proxyEmit(_0x55a013(0x253),!![]),proxyEmit(_0x55a013(0x295),_0x130104);else{_0x130104[_0x55a013(0x127)](_0x1f2d35=>{const _0x369282=_0x55a013;if(_0x1f2d35[_0x369282(0x110)]!=_0x8fd060[_0x369282(0x215)]&&allSymbols[_0x369282(0x13d)](_0x1f2d35[_0x369282(0x1cb)]))_0x5a697a[_0x369282(0x15c)](_0x1f2d35[_0x369282(0x1cb)]);});if(_0x5a697a[_0x55a013(0x159)]==0x0)logHistory(_0x55a013(0x1a2),_0x55a013(0x190));else{try{_0x32d2cb=await getTickers(_0x5a697a);}catch(_0x2fc4d3){logHistory('error',_0x55a013(0x119)),logger[_0x55a013(0x13e)](_0x55a013(0x199),_0x2fc4d3),proxyEmit(_0x55a013(0x253),![]);return;}_0x130104['forEach'](_0x345657=>{const _0x5580fd=_0x55a013;_0x345657['coin']!=_0x8fd060[_0x5580fd(0x215)]?_0x32d2cb[_0x345657[_0x5580fd(0x1cb)]]?_0x32d2cb[_0x345657['symbol']][_0x5580fd(0x120)]?_0x451642=_0x345657[_0x5580fd(0x22a)]?0x1/_0x32d2cb[_0x345657[_0x5580fd(0x1cb)]][_0x5580fd(0x120)]:_0x32d2cb[_0x345657[_0x5580fd(0x1cb)]][_0x5580fd(0x120)]:_0x451642=0x0:_0x451642=0x0:_0x451642=0x1,_0x345657[_0x5580fd(0x1c6)]=formatResult(_0x451642,0x8);}),await getMarketCap(_0x130104),proxyEmit('portfolio1',!![]),proxyEmit('portfolio2',_0x130104);}}}function truncateTradeAmount(_0x5a8073,_0x599842){const _0x37d5d4=_0x4e2b08;let _0x3844e3=0x0;try{_0x3844e3=exchange[_0x37d5d4(0x1f5)](_0x5a8073,_0x599842);}catch(_0x52905d){}return _0x3844e3;}function checkMinimums(_0x21e230){const _0x215337=_0x4e2b08;let _0x387533=!![];const _0x99e27c=!_0x21e230[_0x215337(0x22a)]?markets[_0x21e230[_0x215337(0x1cb)]][_0x215337(0x24a)]['amount'][_0x215337(0x211)]:markets[_0x21e230['symbol']]['limits'][_0x215337(0x222)][_0x215337(0x211)],_0x1d9d22=!_0x21e230[_0x215337(0x22a)]?markets[_0x21e230[_0x215337(0x1cb)]][_0x215337(0x24a)]['cost']['min']:markets[_0x21e230[_0x215337(0x1cb)]]['limits'][_0x215337(0x107)]['min'],_0x13cfac=truncateTradeAmount(_0x21e230['symbol'],_0x21e230['trade']);_0x21e230[_0x215337(0x249)]=_0x13cfac;if(Math[_0x215337(0x1b3)](_0x13cfac)<_0x99e27c)_0x387533=![];if(Math[_0x215337(0x1b3)](_0x13cfac)*_0x21e230[_0x215337(0x120)]<_0x1d9d22)_0x387533=![];if(_0x21e230[_0x215337(0x287)]==_0x215337(0x131)){let _0x566507=config[_0x215337(0x213)][_0x215337(0x156)](_0x3fbeb3=>_0x3fbeb3['coin']==_0x21e230[_0x215337(0x110)]);if(_0x566507[_0x215337(0x19c)]>0x0){if(Math[_0x215337(0x1b3)](_0x13cfac)>_0x21e230[_0x215337(0x11c)]-_0x566507['offset'])_0x387533=![];}else{if(Math['abs'](_0x13cfac)>_0x21e230[_0x215337(0x11c)])_0x387533=![];}}if(_0x21e230[_0x215337(0x287)]==_0x215337(0x1ab)){let _0x3c9241=config[_0x215337(0x213)][_0x215337(0x156)](_0x231cc9=>_0x231cc9[_0x215337(0x110)]==config[_0x215337(0x215)]),_0x54b0ac=currentCoins['find'](_0xf54461=>_0xf54461['coin']==config['basecoin']);if(_0x3c9241[_0x215337(0x19c)]>0x0){if(Math[_0x215337(0x1b3)](_0x13cfac)*_0x21e230[_0x215337(0x120)]>_0x54b0ac['number']-_0x3c9241[_0x215337(0x19c)])_0x387533=![];}else{if(Math['abs'](_0x13cfac)*_0x21e230['last']>_0x54b0ac[_0x215337(0x11c)])_0x387533=![];}}return _0x387533;}async function getBalances(_0x4d34e4=!![]){const _0x5afeb6=_0x4e2b08;if(botPaused)return;let _0x49da9f=0x0,_0x1add82;const _0x3363b1=config[_0x5afeb6(0x223)];if(config['headless']&&config[_0x5afeb6(0x151)]<0x0)await validate24hChanges();currentCoins['forEach'](_0x1411ee=>{const _0x47dda1=_0x5afeb6;if(_0x1411ee['coin']!=config[_0x47dda1(0x215)]){let _0x1f179a=gTicker[noslash(_0x1411ee['symbol'])];_0x1add82=_0x1411ee[_0x47dda1(0x22a)]?0x1/_0x1f179a:_0x1f179a;}else _0x1add82=0x1;let _0x19a140=_0x1411ee[_0x47dda1(0x11c)]*_0x1add82;_0x49da9f+=_0x19a140,_0x1411ee['last']=formatResult(Number(_0x1add82),0x8),_0x1411ee[_0x47dda1(0x136)]=_0x19a140;}),currentCoins[_0x5afeb6(0x127)](_0x12ba14=>{const _0x5be690=_0x5afeb6;let _0x3a11fd=config[_0x5be690(0x213)][_0x5be690(0x156)](_0x317ea3=>_0x317ea3[_0x5be690(0x110)]==_0x12ba14[_0x5be690(0x110)]),_0x20bc0d=Number(_0x3a11fd[_0x5be690(0x106)]),_0x1aa9e8=_0x12ba14['value']/_0x49da9f*0x64,_0x2fdf10=_0x20bc0d*_0x49da9f/0x64/_0x12ba14[_0x5be690(0x120)]-_0x12ba14[_0x5be690(0x11c)];_0x12ba14[_0x5be690(0x106)]=formatResult(_0x1aa9e8,0x3),_0x12ba14[_0x5be690(0x112)]=formatResult(_0x20bc0d,0x3),_0x12ba14[_0x5be690(0x249)]=formatResult(_0x2fdf10,0x8),_0x12ba14[_0x5be690(0x287)]='',_0x12ba14[_0x5be690(0x1c1)]=![];if(_0x12ba14['coin']!=config[_0x5be690(0x215)]){if(_0x12ba14[_0x5be690(0x106)]>_0x20bc0d)_0x12ba14[_0x5be690(0x287)]=_0x5be690(0x131),_0x12ba14[_0x5be690(0x1c1)]=checkMinimums(_0x12ba14);else _0x12ba14[_0x5be690(0x106)]<_0x20bc0d&&(_0x12ba14['side']='buy',_0x12ba14[_0x5be690(0x1c1)]=checkMinimums(_0x12ba14));}_0x12ba14[_0x5be690(0x21d)]=_0x12ba14[_0x5be690(0x106)]/_0x12ba14[_0x5be690(0x112)]-0x1;if(_0x12ba14[_0x5be690(0x220)]==_0x5be690(0xe1)||_0x12ba14[_0x5be690(0x220)]==_0x5be690(0x1e8))_0x12ba14['orderstatus']=_0x5be690(0x21f);}),currentCoins[_0x5afeb6(0x28c)]((_0x53d3ef,_0x556dc6)=>_0x53d3ef[_0x5afeb6(0x21d)]<_0x556dc6[_0x5afeb6(0x21d)]?0x1:_0x556dc6['delta']<_0x53d3ef[_0x5afeb6(0x21d)]?-0x1:0x0);const _0x1c74fe=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x1c74fe['eur'],'usd':_0x1c74fe[_0x5afeb6(0x1e4)],'portfolio':JSON[_0x5afeb6(0xf0)](currentCoins),'threshold':_0x3363b1},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});if(_0x4d34e4){if(config['headless'])headlessMode({'portfolio':currentCoins,'threshold':_0x3363b1});else lockOrders==ORDERS[_0x5afeb6(0x27a)]&&!coolingDown&&notifyBalance({'portfolio':currentCoins,'threshold':_0x3363b1});}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x35ad78=getNormalizedPerformance();getStartingBalances(_0x35ad78),emitPerformance(_0x35ad78);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}function getPnL(){const _0x2f8cb6=_0x4e2b08;let _0x2fdb9d=dbCoinResults['get'](_0x2f8cb6(0x172))[_0x2f8cb6(0x136)](),_0x378a16=0x0;return Object[_0x2f8cb6(0x235)](_0x2fdb9d)[_0x2f8cb6(0x127)](([_0xc506a6,_0x14225c])=>{const _0x2ae07f=_0x2f8cb6;_0x378a16+=_0x14225c[_0x2ae07f(0x1d2)];}),_0x378a16;}async function storePerformance(){const _0x4ffa5e=_0x4e2b08;if(!lastBalances)return;let _0x162733=[],_0x3156d3;const _0x6f4444=getPnL();let _0x3ea4f5=JSON['parse'](lastBalances[_0x4ffa5e(0x213)]);_0x3ea4f5[_0x4ffa5e(0x28c)]((_0x59a0b2,_0x3062e1)=>_0x59a0b2[_0x4ffa5e(0x110)]>_0x3062e1[_0x4ffa5e(0x110)]?0x1:_0x3062e1['coin']>_0x59a0b2[_0x4ffa5e(0x110)]?-0x1:0x0),_0x3ea4f5['forEach'](_0x494015=>{const _0x36443d=_0x4ffa5e;let _0x1a9057={'coin':_0x494015['coin'],'number':_0x494015[_0x36443d(0x11c)],'price':_0x494015[_0x36443d(0x120)]};_0x162733[_0x36443d(0x15c)](_0x1a9057);});const _0xbafe3c=await getFiat(),_0x48e613=getTimeStamp()[_0x4ffa5e(0x1df)]('\x20')[0x0],_0x40c0e5=dbPerformance[_0x4ffa5e(0x11e)](_0x4ffa5e(0x198))[_0x4ffa5e(0x156)]({'date':_0x48e613})[_0x4ffa5e(0x136)]();_0x3156d3={'date':_0x48e613,'eur':_0xbafe3c[_0x4ffa5e(0x259)],'usd':_0xbafe3c[_0x4ffa5e(0x1e4)],'coins':_0x162733,'pnl':_0x6f4444},_0x40c0e5?_0x3156d3[_0x4ffa5e(0x1ac)]!=config[_0x4ffa5e(0x26a)]&&dbPerformance[_0x4ffa5e(0x11e)](_0x4ffa5e(0x198))[_0x4ffa5e(0x156)]({'date':_0x48e613})[_0x4ffa5e(0x138)](_0x3156d3)[_0x4ffa5e(0x1a1)]():dbPerformance[_0x4ffa5e(0x11e)](_0x4ffa5e(0x198))[_0x4ffa5e(0x15c)](_0x3156d3)[_0x4ffa5e(0x1a1)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x309e60=_0x4e2b08;let _0x42c5e1=[];if(dbPerformance[_0x309e60(0x297)](_0x309e60(0x198))['value']()){let _0xf826d0=dbPerformance['get'](_0x309e60(0x198))[_0x309e60(0x23e)]()[_0x309e60(0x170)](_0x5c952b=>{const _0x3cf139=_0x309e60;if(_0x5c952b[_0x3cf139(0x172)][_0x3cf139(0x159)]==0x0)return![];else return!![];})['sortBy']('date')[_0x309e60(0x136)](),_0x5c72e6=[...config[_0x309e60(0x251)]];_0x5c72e6['sort']((_0x3d4f99,_0xfddd23)=>_0x3d4f99[_0x309e60(0x1ac)]>_0xfddd23[_0x309e60(0x1ac)]?-0x1:_0xfddd23[_0x309e60(0x1ac)]>_0x3d4f99[_0x309e60(0x1ac)]?0x1:0x0);let _0x248a00=0x1,_0xbcccbe=[],_0x1b407a=0x0;_0xf826d0[_0x309e60(0x23d)]()[_0x309e60(0x22a)]()[_0x309e60(0x127)]((_0x201db4,_0x5e191f)=>{const _0x3aa184=_0x309e60;if(_0x5c72e6[_0x1b407a]){if(_0xf826d0[_0xf826d0[_0x3aa184(0x159)]-_0x5e191f]&&_0x5c72e6[_0x1b407a]['date']==_0xf826d0[_0xf826d0[_0x3aa184(0x159)]-_0x5e191f]['date']){if(_0x5e191f<_0xf826d0[_0x3aa184(0x159)]){let _0x163430=0x0,_0x4d58da=0x0;_0xf826d0[_0xf826d0[_0x3aa184(0x159)]-_0x5e191f][_0x3aa184(0x172)][_0x3aa184(0x127)](_0x103cda=>{const _0x401d77=_0x3aa184;_0x4d58da+=_0x103cda[_0x401d77(0x11c)]*_0x103cda['price'];}),_0x5c72e6[_0x1b407a][_0x3aa184(0x1c2)]['forEach'](_0x3cdefd=>{const _0x5a49bb=_0x3aa184;_0x163430+=_0x3cdefd[_0x5a49bb(0x11c)]*_0x3cdefd[_0x5a49bb(0x1c6)];}),_0x248a00*=_0x163430/(_0x4d58da-_0x163430)+0x1;}_0x1b407a++;}}let _0x2799cc=0x0;_0x201db4[_0x3aa184(0x172)]['forEach'](_0xcd5b18=>{_0x2799cc+=_0xcd5b18['number']*_0xcd5b18['price'];}),_0xbcccbe[_0xf826d0[_0x3aa184(0x159)]-_0x5e191f-0x1]=_0x2799cc*(_0x248a00-0x1);});let _0x32f852=[];_0x5c72e6=[...config[_0x309e60(0x251)]]||[];let _0x253963=0x0;_0x1b407a=0x0,_0xf826d0[_0x309e60(0x127)]((_0x31288c,_0x54d4f2)=>{const _0x40a331=_0x309e60;if(_0x5c72e6[_0x1b407a]){const _0x518830=fns['parse'](_0x5c72e6[_0x1b407a][_0x40a331(0x1ac)],_0x40a331(0x148),new Date()),_0x776c39=fns[_0x40a331(0x1c4)](_0x31288c['date'],'yyyy/MM/dd',new Date());if(fns[_0x40a331(0x19d)](_0x518830,_0x776c39)){let _0x5215f5=0x0;_0x5c72e6[_0x1b407a][_0x40a331(0x1c2)]['forEach'](_0x591a9e=>{const _0x295727=_0x40a331;!_0x32f852[_0x591a9e[_0x295727(0x110)]]?_0x32f852[_0x591a9e[_0x295727(0x110)]]=_0x591a9e['number']:(_0x5215f5=_0x32f852[_0x591a9e[_0x295727(0x110)]],_0x32f852[_0x591a9e['coin']]+=_0x591a9e['number']);const _0x2a0645=_0x31288c['coins']['find'](_0x124a69=>_0x124a69[_0x295727(0x110)]==_0x591a9e[_0x295727(0x110)]);(!_0x2a0645||_0x2a0645[_0x295727(0x11c)]==0x0)&&(_0x253963+=(-_0x591a9e[_0x295727(0x11c)]-_0x5215f5)*_0x591a9e[_0x295727(0x1c6)]);}),_0x1b407a++;}}_0x31288c[_0x40a331(0x172)]['forEach']((_0x49b851,_0x37609a)=>{const _0xb64d3a=_0x40a331;_0x32f852[_0x49b851[_0xb64d3a(0x110)]]&&(_0x49b851[_0xb64d3a(0x1f7)]=_0x32f852[_0x49b851[_0xb64d3a(0x110)]]);}),_0x42c5e1[_0x40a331(0x15c)]({'date':_0x31288c[_0x40a331(0x1ac)],'eur':_0x31288c[_0x40a331(0x259)],'usd':_0x31288c[_0x40a331(0x1e4)],'offset':_0xbcccbe[_0x54d4f2],'netoffset':_0x253963,'coins':_0x31288c[_0x40a331(0x172)],'pnl':_0x31288c['pnl']});});}return _0x42c5e1;}function emitPerformance(_0x66861e){const _0x45a582=_0x4e2b08;_0x66861e[_0x45a582(0x159)]!==0x0?(proxyEmit('performance',_0x66861e),lastPerformanceEmitted=getDate()):proxyEmit(_0x45a582(0x270),[]);}function getPerf(_0x195b89,_0xe70857){const _0x5f1855=_0x4e2b08;let _0x1d2715=0x0,_0x23fe6c=0x0,_0x8e68bf=0x0;_0x195b89['coins'][_0x5f1855(0x127)](_0x193ec5=>{const _0xae2974=_0x5f1855;_0x1d2715+=_0x193ec5[_0xae2974(0x11c)]*_0x193ec5[_0xae2974(0x1c6)];});_0xe70857&&(_0x1d2715+=_0x195b89[_0x5f1855(0x19c)]);if(config[_0x5f1855(0x215)]===_0x5f1855(0x2b4)||config['basecoin']===_0x5f1855(0x111)||config['basecoin']===_0x5f1855(0x2a0))_0x23fe6c=_0x1d2715*_0x195b89[_0x5f1855(0x259)],_0x8e68bf=_0x1d2715*_0x195b89[_0x5f1855(0x1e4)];else{if(usdBasecoins['includes'](config['basecoin']))_0x23fe6c=_0x1d2715*_0x195b89['eur']/_0x195b89['usd'],_0x8e68bf=_0x1d2715;else config['basecoin']===_0x5f1855(0x1b8)&&(_0x23fe6c=_0x1d2715,_0x8e68bf=_0x1d2715*_0x195b89[_0x5f1855(0x1e4)]/_0x195b89['eur']);}return[_0x1d2715,_0x23fe6c,_0x8e68bf];}function CurrencyFactor(_0x1f2b32,_0x2a120a,_0x5034d6){const _0x108ef7=_0x4e2b08;let _0x3b55c2;if(_0x2a120a===_0x108ef7(0x2b4)||_0x2a120a==='ETH'||_0x2a120a===_0x108ef7(0x2a0))_0x3b55c2=_0x5034d6===_0x108ef7(0x1b8)?_0x1f2b32['eur']:_0x1f2b32['usd'];else{if(usdBasecoins[_0x108ef7(0x13d)](_0x2a120a))_0x3b55c2=_0x5034d6==='EUR'?_0x1f2b32['eur']/_0x1f2b32[_0x108ef7(0x1e4)]:0x1;else _0x2a120a==='EUR'&&(_0x3b55c2=_0x5034d6===_0x108ef7(0x1b8)?0x1:_0x1f2b32['usd']/_0x1f2b32[_0x108ef7(0x259)]);}return _0x3b55c2;}function getKPIs(_0x52a006,_0x202025=_0x4e2b08(0x1b8)){const _0x16be54=_0x4e2b08,_0x572432=config[_0x16be54(0x215)],_0x47d05a=lastBalances,_0x2bbc65=currentCoins,_0x2de17e=getNormalizedPerformance(),_0x419979=CurrencyFactor(_0x47d05a,config['basecoin'],_0x202025);let _0x4ef8e5=0x0;_0x2bbc65[_0x16be54(0x127)](_0x2b1278=>{const _0x3d7ec5=_0x16be54;_0x4ef8e5+=_0x2b1278[_0x3d7ec5(0x11c)]*_0x2b1278['last'];});_0x52a006['includes']('fiat')&&(_0x4ef8e5*=_0x419979);let _0x1067ac;if(_0x4ef8e5!==0x0){if(_0x52a006==='basecoin'||_0x52a006===_0x16be54(0x2a8)){if(_0x52a006===_0x16be54(0x215))_0x1067ac=(_0x4ef8e5/startingBalances['basecoin']-0x1)*0x64;else{if(_0x202025===_0x16be54(0x1b8))_0x1067ac=(_0x4ef8e5/startingBalances[_0x16be54(0x259)]-0x1)*0x64;else _0x1067ac=(_0x4ef8e5/startingBalances[_0x16be54(0x1e4)]-0x1)*0x64;}}if(_0x52a006[_0x16be54(0x13d)](_0x16be54(0x2b5))){let _0x2ce02a=0x0;if(startingBalances[_0x16be54(0x172)])_0x2bbc65['forEach'](_0x59046c=>{const _0x80b30d=_0x16be54;let _0x1bb584=startingBalances[_0x80b30d(0x172)][_0x80b30d(0x156)](_0x38dfe3=>_0x38dfe3[_0x80b30d(0x110)]===_0x59046c[_0x80b30d(0x110)]);if(_0x1bb584&&_0x1bb584[_0x80b30d(0x110)]&&_0x59046c[_0x80b30d(0x11c)]!==0x0)_0x2ce02a+=_0x1bb584['number']*_0x59046c[_0x80b30d(0x120)];});let _0x50db31=0x0;if(_0x2de17e[_0x16be54(0x159)]!==0x0){let _0x17f580=_0x2de17e[_0x2de17e['length']-0x1];_0x50db31=_0x17f580[_0x16be54(0x2b1)];}_0x2ce02a-=_0x50db31;let _0x12fa96;_0x52a006===_0x16be54(0x16e)&&(_0x12fa96=startingBalances[_0x16be54(0x215)]),_0x52a006===_0x16be54(0xf1)&&(_0x12fa96=_0x202025===_0x16be54(0x1b8)?startingBalances[_0x16be54(0x259)]:startingBalances[_0x16be54(0x1e4)],_0x2ce02a*=_0x419979),_0x1067ac=(_0x4ef8e5-_0x2ce02a)/_0x12fa96*0x64,_0x4ef8e5=_0x4ef8e5-_0x2ce02a;}if(_0x52a006['includes']('pnl')){if(_0x2de17e[_0x16be54(0x159)]!==0x0&&_0x2bbc65[_0x16be54(0x159)]!==0x0){let _0x1b5f7d,_0xbc0dae=_0x2de17e[_0x2de17e[_0x16be54(0x159)]-0x1]['pnl'];_0x52a006[_0x16be54(0x13d)](_0x16be54(0x2a8))?(_0x1b5f7d=_0x202025===_0x16be54(0x1b8)?startingBalances['eur']:startingBalances[_0x16be54(0x1e4)],_0xbc0dae*=CurrencyFactor(_0x47d05a,_0x572432,_0x202025)):_0x1b5f7d=startingBalances[_0x16be54(0x215)],_0x1067ac=_0xbc0dae/_0x1b5f7d*0x64,_0x4ef8e5=_0xbc0dae;}}if(_0x1067ac){if(_0x1067ac<0x64)_0x1067ac=_0x1067ac['toFixed'](0x2);else{if(_0x1067ac<0x3e8)_0x1067ac=_0x1067ac['toFixed'](0x1);else _0x1067ac=_0x1067ac[_0x16be54(0x1d1)](0x0);}}else _0x1067ac=Number('0')[_0x16be54(0x1d1)](0x2);if(_0x4ef8e5){if(Math['abs'](_0x4ef8e5)<0.000001)_0x4ef8e5=_0x4ef8e5[_0x16be54(0x1d1)](0x2);else{if(Math[_0x16be54(0x1b3)](_0x4ef8e5)<0.1)_0x4ef8e5=_0x4ef8e5[_0x16be54(0x1d1)](0x6);else{if(Math[_0x16be54(0x1b3)](_0x4ef8e5)<0x1)_0x4ef8e5=_0x4ef8e5[_0x16be54(0x1d1)](0x5);else{if(Math[_0x16be54(0x1b3)](_0x4ef8e5)<0xa)_0x4ef8e5=_0x4ef8e5[_0x16be54(0x1d1)](0x4);else{if(Math['abs'](_0x4ef8e5)<0x64)_0x4ef8e5=_0x4ef8e5['toFixed'](0x3);else{if(Math[_0x16be54(0x1b3)](_0x4ef8e5)<0x3e8)_0x4ef8e5=_0x4ef8e5[_0x16be54(0x1d1)](0x2);else _0x4ef8e5=_0x4ef8e5[_0x16be54(0x1d1)](0x2);}}}}}}else _0x4ef8e5=Number('0')['toFixed'](0x2);}else _0x1067ac=Number('0')[_0x16be54(0x1d1)](0x2);if(_0x1067ac>=0x0)_0x1067ac='+'+_0x1067ac;return{'value':_0x4ef8e5,'change':_0x1067ac};}async function getStartingBalances(_0x2ba6c8,_0x311e1f=!![]){const _0x9f6e83=_0x4e2b08;if(_0x2ba6c8[_0x9f6e83(0x159)]!==0x0){const [_0x2ff7a5,_0x13ebdf,_0x375d93]=getPerf(_0x2ba6c8[0x0],!![]);let _0x50cdb6=[];config[_0x9f6e83(0x213)][_0x9f6e83(0x127)](_0x4eddd2=>{const _0x52af16=_0x9f6e83;let _0x18b59d=0x0,_0x57940a;config[_0x52af16(0x251)][_0x52af16(0x127)](_0x4c3e16=>{const _0x2bd76c=_0x52af16;let _0x11a450=_0x4c3e16[_0x2bd76c(0x1c2)]['find'](_0x1a60e0=>_0x1a60e0[_0x2bd76c(0x110)]==_0x4eddd2[_0x2bd76c(0x110)]);if(_0x11a450){_0x18b59d+=_0x11a450[_0x2bd76c(0x11c)];if(!_0x57940a)_0x57940a=_0x11a450[_0x2bd76c(0x1c6)];}}),_0x50cdb6[_0x52af16(0x15c)]({'coin':_0x4eddd2[_0x52af16(0x110)],'number':_0x18b59d,'initialprice':_0x57940a});});const _0x56bde0={'basecoin':_0x2ff7a5,'eur':_0x13ebdf,'usd':_0x375d93,'coins':_0x50cdb6};if(_0x311e1f)proxyEmit(_0x9f6e83(0x11a),_0x56bde0);startingBalances=_0x56bde0;}}function headlessMode(_0x33ceb0){const _0x39c790=_0x4e2b08;let _0x303b95=_0x33ceb0[_0x39c790(0x213)],_0x32c357=_0x33ceb0[_0x39c790(0x223)],_0x3d114a=[];for(let _0x8a89da of _0x303b95){if(_0x8a89da['coin']!=config[_0x39c790(0x215)]){if(_0x8a89da[_0x39c790(0x21d)]>=_0x32c357/0x64){if(_0x8a89da[_0x39c790(0x1c1)])_0x3d114a[_0x39c790(0x15c)](_0x8a89da);}else{if(_0x8a89da['delta']<=-_0x32c357/0x64){if(_0x8a89da['valid'])_0x3d114a['push'](_0x8a89da);}}}}_0x3d114a[_0x39c790(0x159)]>0x0&&placeOrder(_0x3d114a);}function notifyBalance(_0x482df2){const _0x550d87=_0x4e2b08;let _0x48d742=_0x482df2[_0x550d87(0x213)],_0xd7175b=_0x482df2[_0x550d87(0x223)],_0x25ddd2=[];for(let _0x11e2a0 of _0x48d742){if(_0x11e2a0[_0x550d87(0x110)]!=config[_0x550d87(0x215)]){if(_0x11e2a0[_0x550d87(0x21d)]>=_0xd7175b/0x64){if(_0x11e2a0[_0x550d87(0x1c1)])_0x25ddd2[_0x550d87(0x15c)](_0x11e2a0);}else{if(_0x11e2a0[_0x550d87(0x21d)]<=-_0xd7175b/0x64){if(_0x11e2a0['valid'])_0x25ddd2[_0x550d87(0x15c)](_0x11e2a0);}}}}if(_0x25ddd2[_0x550d87(0x159)]>0x0){let _0x4cbf43=_0x25ddd2[_0x550d87(0x17a)](_0x11fc95=>_0x11fc95[_0x550d87(0x110)]);_0x4cbf43[_0x550d87(0x28c)]();let _0x36e62f=_0x4cbf43[_0x550d87(0x19a)](',\x20');if(!lastCoinsToBalance)logHistory(_0x550d87(0x200),'Manual\x20balancing\x20required');lastCoinsToBalance=_0x36e62f;}}function symbolToCoin(_0x40b81c){const _0x532113=_0x4e2b08;let _0x2313f0;if(_0x40b81c[_0x532113(0x13d)]('/'+config['basecoin']))_0x2313f0=_0x40b81c['replace']('/'+config[_0x532113(0x215)],'');if(_0x40b81c['includes'](config[_0x532113(0x215)]+'/'))_0x2313f0=_0x40b81c[_0x532113(0x1a4)](config['basecoin']+'/','');return _0x2313f0;}function setLockOrders(_0x17e97e){const _0x1b50dc=_0x4e2b08;lockOrders=_0x17e97e,logger[_0x1b50dc(0x13e)](_0x1b50dc(0x189)+Object[_0x1b50dc(0x116)](ORDERS)[lockOrders]);}async function unlockOrders(_0x544d99=![]){const _0x19d091=_0x4e2b08;if(allOrdersPlaced&&lockOrders==ORDERS[_0x19d091(0x17b)]){setLockOrders(ORDERS[_0x19d091(0xe5)]);if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);if(_0x544d99){const _0x388c08=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x388c08,setBlockTransactionDetection(![]);}validateOrdersState='initial',persistOpenOrders([]),setLockOrders(ORDERS[_0x19d091(0x27a)]);}}async function validateOrders(_0x449e11){const _0x53a2db=_0x4e2b08;if(_0x449e11)validateOrdersState=_0x449e11;logger[_0x53a2db(0x13e)]('1\x20-\x20Validate\x20orders:\x20'+validateOrdersState+_0x53a2db(0x1bd)+Object[_0x53a2db(0x116)](ORDERS)[lockOrders]);let _0x39917b=[],_0x201a1d=config[_0x53a2db(0x296)]==_0x53a2db(0x103)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x53a2db(0x1cc)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x53a2db(0x17b)])return;logger[_0x53a2db(0x13e)](_0x53a2db(0x25a)+validateOrdersState);for(let _0x44e5b6=lastOrders['length']-0x1;_0x44e5b6>=0x0;_0x44e5b6--){let _0x5778f1=lastOrders[_0x44e5b6],_0x25b931=![];_0x5778f1[_0x53a2db(0xe1)]>0x0&&(_0x25b931=!![]),_0x39917b[_0x53a2db(0x15c)](_0x25b931),_0x25b931&&config[_0x53a2db(0x296)]!='market'&&logHistory(_0x53a2db(0x214),_0x53a2db(0x209)+_0x5778f1['symbol']+'\x20'+_0x5778f1[_0x53a2db(0x287)]+'\x20#'+formatResult(_0x5778f1['filled'],0x8)+'\x20@'+formatResult(_0x5778f1[_0x53a2db(0x1c6)],0x8)),_0x25b931&&lastOrders[_0x53a2db(0x226)](_0x44e5b6,0x1);}persistOpenOrders(lastOrders);const _0x186ad4=coolingDown?_0x53a2db(0x1ee):_0x53a2db(0x20a);if(validateOrdersState==_0x53a2db(0x1f7)){validateOrdersState=_0x53a2db(0x27c);if(_0x39917b['includes'](![])){}else await unlockOrders();}else{if(validateOrdersState==_0x53a2db(0x27c)){if(_0x39917b[_0x53a2db(0x13d)](![])){}else await unlockOrders();}else{if(validateOrdersState==_0x53a2db(0x13b))_0x39917b[_0x53a2db(0x13d)](![])&&(config[_0x53a2db(0x296)]==_0x53a2db(0x103)?logHistory('success',_0x53a2db(0x19e)+Math[_0x53a2db(0x17e)](_0x201a1d*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x186ad4):(await cancelOrders(),logHistory(_0x53a2db(0x26e),'Unfilled\x20order(s)\x20canceled\x20after\x20'+Math[_0x53a2db(0x17e)](_0x201a1d*validateOrderInterval/0xea60)+_0x53a2db(0x28b)+_0x186ad4))),await unlockOrders(!![]);else{if(validateOrdersState==_0x53a2db(0x1fd)){if(config['ordertype']!=_0x53a2db(0x103))logHistory(_0x53a2db(0x26e),_0x53a2db(0x1bf)+_0x186ad4);await unlockOrders(!![]);}}}}}async function cancelOrders(){const _0x454d38=_0x4e2b08;lastOrders[_0x454d38(0x127)](async _0x577c8c=>{const _0x4f84c6=_0x454d38;try{const _0x5972cd=await exchange[_0x4f84c6(0x19b)](_0x577c8c[_0x4f84c6(0x22e)],_0x577c8c[_0x4f84c6(0x1cb)]);}catch(_0x380ea4){if(_0x380ea4[_0x4f84c6(0x210)]()[_0x4f84c6(0x13d)]('OrderNotFound')){}else await handleError(_0x380ea4,'cancelOrders()');}});}async function initCoinResults(_0x44ebf3){const _0x118a22=_0x4e2b08;_0x44ebf3?logger['debug']('Resetting\x20coin\x20results:\x20'+_0x44ebf3):logger[_0x118a22(0x13e)](_0x118a22(0x13f)),config[_0x118a22(0x213)][_0x118a22(0x127)](_0x15e62d=>{const _0x239140=_0x118a22;if(!_0x15e62d[_0x239140(0x182)]&&_0x15e62d[_0x239140(0x110)]!=config[_0x239140(0x215)]){const _0x4e5c6f=currentCoins[_0x239140(0x156)](_0x27309c=>_0x27309c[_0x239140(0x110)]==_0x15e62d[_0x239140(0x110)]),_0x88d3f6=gTicker[noslash(_0x15e62d[_0x239140(0x1cb)])];let _0x215063=_0x4e5c6f?_0x4e5c6f[_0x239140(0x11c)]:null,_0x1334ec=_0x15e62d[_0x239140(0x22a)]?0x1/_0x88d3f6:_0x88d3f6,_0xd1a224;config['liquidity'][_0x239140(0x127)](_0x46a7d1=>{const _0x55e5e3=_0x239140;!_0xd1a224&&(_0xd1a224=_0x46a7d1[_0x55e5e3(0x1c2)][_0x55e5e3(0x156)](_0x962f4b=>_0x962f4b[_0x55e5e3(0x110)]==_0x15e62d[_0x55e5e3(0x110)]),_0xd1a224&&(_0x215063=_0xd1a224[_0x55e5e3(0x11c)],_0x1334ec=_0xd1a224[_0x55e5e3(0x1c6)]));});let _0x3aaf8e=dbCoinResults['get'](_0x239140(0x172))[_0x239140(0x156)]({'coin':_0x15e62d['coin']})[_0x239140(0x136)]();if(!_0x3aaf8e){const _0x580831={'coin':_0x15e62d[_0x239140(0x110)],'number':_0x215063,'breakeven':_0x1334ec,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x239140(0x11e)](_0x239140(0x172))[_0x239140(0x15c)](_0x580831)[_0x239140(0x1a1)]();}else{if(_0x44ebf3&&_0x15e62d[_0x239140(0x110)]==_0x44ebf3){const _0x56b5e9={'coin':_0x15e62d[_0x239140(0x110)],'number':_0x215063,'breakeven':_0x1334ec,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x239140(0x11e)]('coins')[_0x239140(0x156)]({'coin':_0x15e62d['coin']})['assign'](_0x56b5e9)[_0x239140(0x1a1)]();}}}});}async function placeOrder(_0x1ab121){const _0x2c1d1e=_0x4e2b08,_0x110454=config['ordertype']==_0x2c1d1e(0x103)?_0x2c1d1e(0x103):_0x2c1d1e(0x22b);if(lockOrders==ORDERS[_0x2c1d1e(0x27a)]&&!coolingDown){setLockOrders(ORDERS['LOCKED']);while(transactionDetectionOngoing){await sleep(0x64);}logger[_0x2c1d1e(0x13e)](_0x2c1d1e(0x123)+_0x1ab121[_0x2c1d1e(0x17a)](_0x3d9728=>_0x3d9728[_0x2c1d1e(0x110)])[_0x2c1d1e(0x19a)](',\x20')),lastCoinsToBalance='',allOrdersPlaced=![],validateOrdersState=_0x2c1d1e(0x1f7);let _0x6730ce=![];lastOrders=[];const _0x5bbbc9=config['threshold'];for(const _0x517705 of _0x1ab121){let _0x3fb9b7,_0x1496bc,_0x3be662,_0x117022,_0x21e465,_0x103ee5=_0x517705[_0x2c1d1e(0x1cb)];logger['debug']('Trigger:\x20'+_0x517705[_0x2c1d1e(0x110)]+'\x20'+_0x517705[_0x2c1d1e(0x11c)]+'\x20'+_0x517705[_0x2c1d1e(0x120)]+'\x20'+_0x517705['distribution']+'%\x20'+_0x517705['target']+'%\x20'+(0x64*_0x517705[_0x2c1d1e(0x21d)])['toFixed'](0x2)+_0x2c1d1e(0x25d)+_0x5bbbc9[_0x2c1d1e(0x1d1)](0x2)+'%)');const _0x2e9678=currentCoins['find'](_0x3b78f2=>_0x3b78f2[_0x2c1d1e(0x110)]==_0x517705[_0x2c1d1e(0x110)]);_0x2e9678&&(_0x2e9678['prevnumber']=_0x517705['number']);try{const _0x3c7ee3=await exchange[_0x2c1d1e(0x27d)](_0x103ee5);_0x3fb9b7=_0x517705[_0x2c1d1e(0x22a)]?0x1/_0x517705[_0x2c1d1e(0x120)]:_0x517705['last'],_0x1496bc=_0x3c7ee3['bid'],_0x3be662=_0x3c7ee3[_0x2c1d1e(0x294)];_0x517705['reverse']?(_0x117022=_0x517705['side']==_0x2c1d1e(0x1ab)?'sell':'buy',_0x21e465=Math['abs'](_0x517705['trade'])/_0x3fb9b7):(_0x117022=_0x517705['side'],_0x21e465=Math[_0x2c1d1e(0x1b3)](_0x517705[_0x2c1d1e(0x249)]));_0x110454==_0x2c1d1e(0x22b)&&(config[_0x2c1d1e(0x296)]==_0x2c1d1e(0x1b1)&&(_0x3fb9b7=_0x117022=='buy'?_0x1496bc:_0x3be662),config[_0x2c1d1e(0x296)]==_0x2c1d1e(0x279)&&(_0x3fb9b7=_0x117022==_0x2c1d1e(0x1ab)?_0x3be662:_0x1496bc));_0x21e465=formatResult(_0x21e465,0x8),_0x3fb9b7=formatResult(_0x3fb9b7,0x8);const _0x30f76f=_0x117022==_0x2c1d1e(0x131)?config[_0x2c1d1e(0x1b7)]?String[_0x2c1d1e(0x1f1)]('0x'+config[_0x2c1d1e(0x1b7)])+'\x20':'':config[_0x2c1d1e(0x22d)]?String[_0x2c1d1e(0x1f1)]('0x'+config[_0x2c1d1e(0x22d)])+'\x20':'',_0x35ea10=_0x110454==_0x2c1d1e(0x103)?_0x2c1d1e(0x2bf):config[_0x2c1d1e(0x296)]=='limit-high'?'Limit\x20(high-margin)':_0x2c1d1e(0x160),_0x51393d=(Math['floor'](Math['random']()*0x35a4e900)+0x5f5e100)['toString']();lastOrders['push']({'customId':_0x51393d,'symbol':_0x103ee5,'coin':_0x517705[_0x2c1d1e(0x110)],'amount':_0x21e465,'price':_0x3fb9b7,'side':_0x117022,'reverse':_0x517705['reverse'],'filled':0x0});let _0x38ab5e;_0x110454==_0x2c1d1e(0x103)?_0x117022==_0x2c1d1e(0x1ab)&&[_0x2c1d1e(0x10d),_0x2c1d1e(0xfe),_0x2c1d1e(0xe9),_0x2c1d1e(0x27e),'Huobipro'][_0x2c1d1e(0x13d)](config[_0x2c1d1e(0x155)])?_0x38ab5e=await exchange[_0x2c1d1e(0x293)](_0x103ee5,_0x110454,_0x117022,_0x21e465,_0x3fb9b7):_0x38ab5e=await exchange[_0x2c1d1e(0x293)](_0x103ee5,_0x110454,_0x117022,_0x21e465,undefined):_0x38ab5e=await exchange[_0x2c1d1e(0x293)](_0x103ee5,_0x110454,_0x117022,_0x21e465,_0x3fb9b7);const _0x1ec2f3=lastOrders[_0x2c1d1e(0x159)]-0x1;if(_0x1ec2f3>=0x0&&lastOrders[_0x1ec2f3][_0x2c1d1e(0x1b0)]==_0x51393d){lastOrders[_0x1ec2f3][_0x2c1d1e(0x22e)]=_0x38ab5e['id'];if(_0x38ab5e[_0x2c1d1e(0x107)])lastOrders[_0x1ec2f3]['amount']=_0x38ab5e[_0x2c1d1e(0x107)];if(_0x38ab5e[_0x2c1d1e(0x1c6)])lastOrders[_0x1ec2f3]['price']=_0x38ab5e[_0x2c1d1e(0x1c6)];lastOrders[_0x1ec2f3]['fee']=_0x38ab5e['fee'];}if(_0x38ab5e[_0x2c1d1e(0x107)])_0x21e465=_0x38ab5e[_0x2c1d1e(0x107)];if(_0x38ab5e[_0x2c1d1e(0x1c6)])_0x3fb9b7=_0x38ab5e[_0x2c1d1e(0x1c6)];if(_0x110454==_0x2c1d1e(0x103))logHistory(_0x2c1d1e(0x214),''+_0x30f76f+_0x35ea10+_0x2c1d1e(0x16d)+_0x103ee5+'\x20'+_0x117022+'\x20#'+formatResult(_0x21e465,0x8)+'\x20@'+formatResult(_0x3fb9b7,0x8));else logHistory(_0x2c1d1e(0x214),''+_0x30f76f+_0x35ea10+_0x2c1d1e(0x16d)+_0x103ee5+'\x20'+_0x117022+'\x20#'+formatResult(_0x21e465,0x8)+'\x20@'+formatResult(_0x3fb9b7,0x8));logger[_0x2c1d1e(0x13e)](_0x2c1d1e(0x1fb)+_0x38ab5e['id']+_0x2c1d1e(0x19f)+_0x51393d);if(config[_0x2c1d1e(0x246)]!=0x0){let _0x1bac53=null;if(cooldownTracker[_0x2c1d1e(0x159)]==config[_0x2c1d1e(0x246)]-0x1)_0x1bac53=cooldownTracker[_0x2c1d1e(0x101)]();const _0x33fabf=getTimeStamp();cooldownTracker[_0x2c1d1e(0x15c)](_0x33fabf);if(_0x1bac53){const _0x41a281=fns['differenceInSeconds'](new Date(_0x33fabf),new Date(_0x1bac53));if(_0x41a281<cooldownInterval){logHistory(_0x2c1d1e(0x1a2),_0x2c1d1e(0x1c9)+config[_0x2c1d1e(0x246)]+_0x2c1d1e(0x1d7)+cooldownInterval/0x3c+_0x2c1d1e(0x28e)+cooldownPeriod/(0xe10*0x3e8)+_0x2c1d1e(0xe8)),coolingDown=!![];break;}}}}catch(_0x29d598){if(_0x29d598[_0x2c1d1e(0x210)]()[_0x2c1d1e(0x13d)](_0x2c1d1e(0x149)))lastOrders=lastOrders['filter'](_0x37395e=>_0x37395e[_0x2c1d1e(0x1cb)]!=_0x103ee5),logHistory(_0x2c1d1e(0x1a2),_0x2c1d1e(0x27f)+_0x103ee5),_0x6730ce=!![];else{if(_0x29d598[_0x2c1d1e(0x210)]()[_0x2c1d1e(0x13d)]('Invalid\x20quantity'))lastOrders=lastOrders[_0x2c1d1e(0x170)](_0x50eac3=>_0x50eac3[_0x2c1d1e(0x1cb)]!=_0x103ee5),logHistory(_0x2c1d1e(0x1a2),_0x2c1d1e(0x15e)+_0x103ee5),_0x6730ce=!![];else{if(_0x29d598[_0x2c1d1e(0x210)]()['includes']('InvalidOrder'))lastOrders=lastOrders['filter'](_0x5bfd52=>_0x5bfd52['symbol']!=_0x103ee5),logHistory(_0x2c1d1e(0x1a2),_0x2c1d1e(0x16c)+_0x103ee5),logger[_0x2c1d1e(0x13e)](_0x29d598),_0x6730ce=!![];else _0x29d598[_0x2c1d1e(0x210)]()[_0x2c1d1e(0x13d)](_0x2c1d1e(0x15a))?(lastOrders=lastOrders[_0x2c1d1e(0x170)](_0x5dc41b=>_0x5dc41b[_0x2c1d1e(0x1cb)]!=_0x103ee5),logHistory(_0x2c1d1e(0x1a2),'Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x103ee5),_0x6730ce=!![]):(lastOrders=lastOrders[_0x2c1d1e(0x170)](_0x10c568=>_0x10c568[_0x2c1d1e(0x1cb)]!=_0x103ee5),await handleError(_0x29d598,'placeOrder()',_0x103ee5));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x2c1d1e(0x159)]>0x0){const _0x1656d3=config[_0x2c1d1e(0x296)]==_0x2c1d1e(0x103)?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0xe730fc=_0x2c1d1e;validateOrders(_0xe730fc(0x13b));},_0x1656d3);}else unlockOrders();_0x6730ce&&config['headless']&&(logHistory(_0x2c1d1e(0x1a2),_0x2c1d1e(0x257)+pauseBotMsg),await pauseBot(pauseBotInterval)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x2c1d1e(0x26e),_0x2c1d1e(0x1a8)));}else{if(coolingDown)!config[_0x2c1d1e(0x10e)]&&logHistory(_0x2c1d1e(0x1a2),_0x2c1d1e(0x1ec));else lockOrders!=ORDERS[_0x2c1d1e(0x27a)]&&(!config[_0x2c1d1e(0x10e)]&&(config[_0x2c1d1e(0x296)]=='market'?logHistory('error','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated'):logHistory('error',_0x2c1d1e(0x260))));}}function persistOpenOrders(_0x1be88e){const _0x45e119=_0x4e2b08,_0x1b01e5={...config,'openOrders':_0x1be88e};let _0x3eddf3=dbConfig[_0x45e119(0x11e)](_0x45e119(0x255))['find']({'botID':botID})[_0x45e119(0x136)]();_0x3eddf3&&dbConfig[_0x45e119(0x11e)]('bot')[_0x45e119(0x156)]({'botID':botID})['assign'](_0x1b01e5)[_0x45e119(0x1a1)]();}function restoreOrders(){const _0x2b9f34=_0x4e2b08;let _0x463f81;config['openOrders']&&allOpenOrders[_0x2b9f34(0x127)](_0x77de9f=>{const _0x171ebb=_0x2b9f34,_0xfe72f5=config[_0x171ebb(0x212)]['find'](_0x41ea51=>_0x41ea51[_0x171ebb(0x22e)]==_0x77de9f['id']);_0xfe72f5&&(lastOrders[_0x171ebb(0x15c)](_0xfe72f5),_0x463f81=_0x77de9f[_0x171ebb(0x264)]);});if(lastOrders[_0x2b9f34(0x159)]>0x0){setLockOrders(ORDERS[_0x2b9f34(0x17b)]),validateOrdersState=_0x2b9f34(0x27c),allOrdersPlaced=!![];const _0x13cad3=new Date()[_0x2b9f34(0x20c)](),_0x127f1d=config['ordertype']==_0x2b9f34(0x103)?validateOrderTimeout*0x3c*0x3e8:config[_0x2b9f34(0x1cc)]*0x3c*0x3e8;if(_0x463f81+_0x127f1d>_0x13cad3){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x463f81+_0x127f1d-_0x13cad3);}else validateOrders('final');}}async function sendMetricsTelegram(){const _0x466a30=_0x4e2b08;if(!coinsLoaded){process['send']({'telegrammsg':_0x466a30(0x195)},_0x167e36=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x4d5a21='';if(config['showname'])_0x4d5a21=_0x466a30(0x221)+config[_0x466a30(0x176)]+_0x466a30(0x29a);else _0x4d5a21='<b>Bot\x20'+botID+'\x20metrics:</b>\x20\x0a\x0a';const _0x1dd0f8=config['basecoin'],_0x33170e=config[_0x466a30(0x2a8)],_0x575f58=getKPIs(_0x466a30(0x215)),_0x575d0d=getKPIs(_0x466a30(0x2a8),_0x33170e),_0x55e7a1=getKPIs(_0x466a30(0x16e)),_0x140e60=getKPIs('net-fiat',_0x33170e),_0x1911b0=getKPIs(_0x466a30(0x137)),_0x27c2f9=getKPIs(_0x466a30(0x1a6),_0x33170e);_0x1dd0f8[_0x466a30(0x13d)](_0x33170e)?(_0x4d5a21+=_0x466a30(0x25f),_0x4d5a21+='Value\x20'+_0x1dd0f8+':\x20'+_0x575f58[_0x466a30(0x136)]+'\x20('+_0x575f58[_0x466a30(0x121)]+_0x466a30(0x26b),_0x4d5a21+=_0x466a30(0x281)+_0x1dd0f8+':\x20'+_0x55e7a1[_0x466a30(0x136)]+'\x20('+_0x55e7a1['change']+'%)\x0a',_0x4d5a21+='PnL\x20'+_0x1dd0f8+':\x20'+_0x1911b0[_0x466a30(0x136)]+'\x20('+_0x1911b0['change']+_0x466a30(0x26b),_0x4d5a21+=_0x466a30(0x289)):(_0x4d5a21+=_0x466a30(0x25f),_0x4d5a21+=_0x466a30(0x10c)+_0x1dd0f8+':\x20'+_0x575f58[_0x466a30(0x136)]+'\x20('+_0x575f58['change']+_0x466a30(0x26b),_0x4d5a21+=_0x466a30(0x10c)+_0x33170e+':\x20'+_0x575d0d[_0x466a30(0x136)]+'\x20('+_0x575d0d[_0x466a30(0x121)]+'%)\x0a',_0x4d5a21+=_0x466a30(0x281)+_0x1dd0f8+':\x20'+_0x55e7a1['value']+'\x20('+_0x55e7a1['change']+_0x466a30(0x26b),_0x4d5a21+=_0x466a30(0x281)+_0x33170e+':\x20'+_0x140e60[_0x466a30(0x136)]+'\x20('+_0x140e60[_0x466a30(0x121)]+'%)\x0a',_0x4d5a21+=_0x466a30(0x132)+_0x1dd0f8+':\x20'+_0x1911b0['value']+'\x20('+_0x1911b0[_0x466a30(0x121)]+_0x466a30(0x26b),_0x4d5a21+=_0x466a30(0x132)+_0x33170e+':\x20'+_0x27c2f9[_0x466a30(0x136)]+'\x20('+_0x27c2f9[_0x466a30(0x121)]+'%)\x0a',_0x4d5a21+='</pre>'),process['send']({'telegrammsg':_0x4d5a21},_0x59fd1c=>{});}async function sendPortfolioTelegram(){const _0x5c2937=_0x4e2b08;if(!coinsLoaded||!currentCoins[0x0][_0x5c2937(0x106)]){process[_0x5c2937(0xe6)]({'telegrammsg':_0x5c2937(0x195)},_0x5b8401=>{});return;}let _0x587316='';if(config[_0x5c2937(0xed)])_0x587316=_0x5c2937(0x221)+config['botname']+_0x5c2937(0x1ef);else _0x587316=_0x5c2937(0x231)+botID+_0x5c2937(0x1ef);_0x587316+=_0x5c2937(0x25f),_0x587316+='-------------------------------\x0a',_0x587316+=_0x5c2937(0x1a5),_0x587316+=_0x5c2937(0x10b),currentCoins[_0x5c2937(0x127)](_0x1127f5=>{const _0x3e17e1=_0x5c2937;_0x587316+=_0x1127f5['coin'][_0x3e17e1(0x150)](0x7)+'|\x20'+formatPad(_0x1127f5[_0x3e17e1(0x106)],0x2,0x6)+'|\x20'+formatPad(_0x1127f5[_0x3e17e1(0x112)],0x2,0x6)+'|\x20'+formatPad(_0x1127f5['delta']*0x64,0x2,0x6)+'\x0a';}),_0x587316+=_0x5c2937(0x289),process[_0x5c2937(0xe6)]({'telegrammsg':_0x587316},_0x5ebaad=>{});}function formatPad(_0x1a7d66,_0x5bdfa3,_0x7df1cf){const _0x3cc366=_0x4e2b08,_0x4cba73=formatResultString(_0x1a7d66,_0x5bdfa3);return _0x4cba73?_0x4cba73[_0x3cc366(0x216)](_0x7df1cf):''['padStart'](_0x7df1cf);}function logHistory(_0x29438f,_0x8e9cc4,_0xa75ff1=''){const _0x50ac74=_0x4e2b08;logger[_0x50ac74(0x12f)](''+_0x8e9cc4);let _0x2350ab={'time':getTimeStamp(),'type':_0x29438f,'event':_0x8e9cc4};dbLogs[_0x50ac74(0x11e)](_0x50ac74(0x1e2))[_0x50ac74(0x15c)](_0x2350ab)['write']();if(_0xa75ff1=='')_0xa75ff1=_0x8e9cc4;proxyEmit(_0x50ac74(0x205),{'log':_0x2350ab,'summary':_0xa75ff1}),process[_0x50ac74(0xe6)]({'telegram':{..._0x2350ab,'botname':config[_0x50ac74(0x176)],'showname':config['showname']}},_0x616e52=>{});}function emitHistory(_0x2e3573={}){const _0x2f139d=_0x4e2b08;Object[_0x2f139d(0x116)](_0x2e3573)[_0x2f139d(0x159)]==0x0&&(_0x2e3573={'type':[_0x2f139d(0x214),_0x2f139d(0x205)],'event':'','page':0x1});if(_0x2e3573[_0x2f139d(0x236)][_0x2f139d(0x13d)](_0x2f139d(0x205)))_0x2e3573[_0x2f139d(0x236)][_0x2f139d(0x226)](_0x2e3573[_0x2f139d(0x236)]['indexOf']('event'),0x1,_0x2f139d(0x1a2),_0x2f139d(0x200),'success');if(dbLogs['has'](_0x2f139d(0x1e2))[_0x2f139d(0x136)]()){let _0x412208=dbLogs[_0x2f139d(0x11e)]('logs')[_0x2f139d(0x170)](_0x1f695a=>{const _0x3b0a7e=_0x2f139d;if(_0x2e3573[_0x3b0a7e(0x236)][_0x3b0a7e(0x159)]==0x0)return![];else return _0x2e3573[_0x3b0a7e(0x236)]['includes'](_0x1f695a[_0x3b0a7e(0x236)]);})[_0x2f139d(0x170)](_0xf9a3f9=>{const _0x1f781c=_0x2f139d;if(_0x2e3573[_0x1f781c(0x205)]=='')return!![];else return _0xf9a3f9['event'][_0x1f781c(0x2a5)]()[_0x1f781c(0x13d)](_0x2e3573[_0x1f781c(0x205)]['toLowerCase']());})[_0x2f139d(0x1e1)](_0x2f139d(0x204)),_0x58b92c=_0x412208[_0x2f139d(0x136)]()[_0x2f139d(0x159)];_0x412208=_0x412208[_0x2f139d(0x22a)]()[_0x2f139d(0x23d)]((_0x2e3573[_0x2f139d(0x124)]-0x1)*logPageSize,_0x2e3573[_0x2f139d(0x124)]*logPageSize-0x1)[_0x2f139d(0x22a)]()[_0x2f139d(0x136)](),proxyEmit(_0x2f139d(0x16a),{'logs':_0x412208,'total':_0x58b92c});}else proxyEmit('event-history',{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x11e9c5){const _0x14ffb1=_0x4e2b08;if(dbLogs[_0x14ffb1(0x297)](_0x14ffb1(0x1e2))['value']()){const _0x596875=dbLogs[_0x14ffb1(0x11e)]('logs')[_0x14ffb1(0x1e1)](_0x14ffb1(0x204))[_0x14ffb1(0x170)](_0x2f2d3e=>{const _0x3804cf=_0x14ffb1;return _0x2f2d3e[_0x3804cf(0x236)]=='order';})['value']();dbLogs['get'](_0x14ffb1(0x1e2))[_0x14ffb1(0x285)]()[_0x14ffb1(0x1a1)](),dbLogs[_0x14ffb1(0x11e)](_0x14ffb1(0x1e2))[_0x14ffb1(0x138)](_0x596875)[_0x14ffb1(0x1a1)](),emitHistory(_0x11e9c5);}}async function pauseBot(_0x5f26de=pauseBotIntervalShort,_0x4b9343,_0x2bc407,_0x53a68f=![]){const _0x5ed882=_0x4e2b08,_0x330aee=new Date()['getTime']();if(!lastErrorShown||_0x330aee-lastErrorShown>=_0x5f26de){lastErrorShown=_0x330aee;if(!lastBotPause)lastBotPause=_0x330aee,consecutivePauses=0x1;else{if(_0x330aee-lastBotPause-_0x5f26de<0x5a*0x3e8){consecutivePauses++;if(consecutivePauses>maxPauseRetries){if(_0x53a68f){logHistory(_0x5ed882(0x1a2),_0x4b9343+_0x5ed882(0x1ea)),await killBot();return;}else logHistory(_0x5ed882(0x1a2),_0x4b9343+pauseBotMsg),_0x5f26de=pauseBotInterval;}}else consecutivePauses=0x1;lastBotPause=_0x330aee;}_0x2bc407?logger[_0x5ed882(0x13e)]('('+consecutivePauses+')\x20'+_0x4b9343+'\x20>\x20details:',_0x2bc407):logger[_0x5ed882(0x13e)]('('+consecutivePauses+')\x20'+_0x4b9343);if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);await sleep(_0x5f26de),botPaused=![],_0x5f26de==pauseBotIntervalShort?resumeBot(!![]):resumeBot(![]);}}}async function killBot(){const _0x2f7d23=_0x4e2b08;botPaused=!![],await sleep(0x3e8),process['send']({'stop':_0x2f7d23(0x26d)},_0x516980=>{}),await sleep(0x7d0);}function _0xbd55(_0x4fc2e7,_0x4444eb){const _0x18cdfb=_0x47bd();return _0xbd55=function(_0x3c87c4,_0x413565){_0x3c87c4=_0x3c87c4-0xdf;let _0x47bd1e=_0x18cdfb[_0x3c87c4];return _0x47bd1e;},_0xbd55(_0x4fc2e7,_0x4444eb);}async function handleErrorNoStop(_0xce5939,_0x2a136a,_0x4aac62=![]){const _0x47a446=_0x4e2b08;if(botPaused)return;let _0x42775d;const _0x540269=config[_0x47a446(0x155)]||_0x47a446(0x1f6);if(_0x2a136a)logger[_0x47a446(0x13e)](_0x47a446(0x2a3)+_0x2a136a);const _0x22e864=()=>{const _0x40a5d5=_0x47a446;loading[_0x40a5d5(0x1a2)]=_0x40a5d5(0x237),emitLoadingProgress();};if(_0xce5939[_0x47a446(0x210)]()[_0x47a446(0x13d)](_0x47a446(0x2ba)))logHistory(_0x47a446(0x1a2),_0x540269+_0x47a446(0x25c)),_0x22e864();else{if(_0xce5939['toString']()[_0x47a446(0x13d)](_0x47a446(0x263)))logHistory(_0x47a446(0x1a2),_0x540269+_0x47a446(0x104)),_0x22e864();else{if(_0xce5939[_0x47a446(0x210)]()['includes'](_0x47a446(0x17f)))config['apiPassword']?_0x42775d=_0x540269+_0x47a446(0x2a6):_0x42775d=_0x540269+_0x47a446(0x177),logHistory(_0x47a446(0x1a2),_0x42775d+_0x47a446(0x288)),_0x22e864();else{if(_0xce5939[_0x47a446(0x210)]()['includes'](_0x47a446(0x2a4)))logHistory(_0x47a446(0x1a2),_0x540269+_0x47a446(0x109)),_0x22e864();else{if(!_0x4aac62)await handleError(_0xce5939,null);}}}}}async function handleError(_0x33446b,_0x800afc,_0x40cc1c=''){const _0x5a5e68=_0x4e2b08;if(botPaused)return;let _0x8c2ce5;const _0x4aa74a=config[_0x5a5e68(0x155)]||_0x5a5e68(0x1f6);if(_0x800afc)logger[_0x5a5e68(0x13e)](_0x5a5e68(0x2a3)+_0x800afc);if(_0x33446b[_0x5a5e68(0x210)]()[_0x5a5e68(0x13d)]('DDoSProtection'))_0x8c2ce5=_0x4aa74a+_0x5a5e68(0x229),await pauseBot(undefined,_0x8c2ce5,_0x33446b);else{if(_0x33446b[_0x5a5e68(0x210)]()['includes']('RateLimitExceeded'))_0x8c2ce5=_0x4aa74a+'\x20blocked\x20API\x20(RateLimitExceeded)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading',await pauseBot(undefined,_0x8c2ce5,_0x33446b);else{if(_0x33446b[_0x5a5e68(0x210)]()['includes'](_0x5a5e68(0x178))||_0x33446b[_0x5a5e68(0x210)]()[_0x5a5e68(0x13d)](_0x5a5e68(0x163)))_0x8c2ce5=_0x4aa74a+_0x5a5e68(0x239),await pauseBot(undefined,_0x8c2ce5,_0x33446b['toString']());else{if(_0x33446b[_0x5a5e68(0x210)]()[_0x5a5e68(0x13d)](_0x5a5e68(0x22c)))_0x8c2ce5=_0x4aa74a+_0x5a5e68(0x1b5),await pauseBot(undefined,_0x8c2ce5,_0x33446b[_0x5a5e68(0x210)]());else{if(_0x33446b['toString']()[_0x5a5e68(0x13d)](_0x5a5e68(0x142)))_0x8c2ce5=_0x4aa74a+_0x5a5e68(0x20e),await pauseBot(undefined,_0x8c2ce5,_0x33446b[_0x5a5e68(0x210)]());else{if(_0x33446b[_0x5a5e68(0x210)]()[_0x5a5e68(0x2a5)]()[_0x5a5e68(0x13d)](_0x5a5e68(0x264))||_0x33446b[_0x5a5e68(0x210)]()[_0x5a5e68(0x2a5)]()[_0x5a5e68(0x13d)](_0x5a5e68(0x2aa)))_0x8c2ce5='Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)',await pauseBot(undefined,_0x8c2ce5,_0x33446b[_0x5a5e68(0x210)]());else{if(_0x33446b['toString']()[_0x5a5e68(0x13d)](_0x5a5e68(0x21e)))_0x8c2ce5=_0x4aa74a+_0x5a5e68(0x266),await pauseBot(undefined,_0x8c2ce5,_0x33446b[_0x5a5e68(0x210)]());else{if(_0x33446b instanceof ccxt[_0x5a5e68(0x18f)])_0x8c2ce5=_0x4aa74a+_0x5a5e68(0x262)+_0x33446b[_0x5a5e68(0x210)](),logger[_0x5a5e68(0x13e)](_0x5a5e68(0x217),_0x33446b),await pauseBot(undefined,_0x8c2ce5,_0x33446b);else{if(_0x33446b[_0x5a5e68(0x210)]()[_0x5a5e68(0x13d)]('API-key\x20format\x20invalid'))logHistory('error',_0x4aa74a+_0x5a5e68(0x238)),logHistory(_0x5a5e68(0x1a2),_0x5a5e68(0x17d)),await killBot();else{if(_0x33446b[_0x5a5e68(0x210)]()[_0x5a5e68(0x13d)](_0x5a5e68(0x263)))logHistory(_0x5a5e68(0x1a2),_0x4aa74a+_0x5a5e68(0x102)),logHistory(_0x5a5e68(0x1a2),_0x5a5e68(0x17d)),await killBot();else{if(_0x33446b['toString']()[_0x5a5e68(0x13d)]('AuthenticationError')&&_0x33446b[_0x5a5e68(0x210)]()[_0x5a5e68(0x13d)](_0x5a5e68(0xfa)))_0x8c2ce5=_0x4aa74a+_0x5a5e68(0x169),await pauseBot(undefined,_0x8c2ce5,_0x33446b,!![]);else{if(_0x33446b[_0x5a5e68(0x210)]()[_0x5a5e68(0x13d)]('AuthenticationError'))config[_0x5a5e68(0x1c0)]?_0x8c2ce5=_0x4aa74a+_0x5a5e68(0x2a6):_0x8c2ce5=_0x4aa74a+'\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange',logHistory(_0x5a5e68(0x1a2),_0x8c2ce5),logHistory('error',_0x5a5e68(0x17d)),await killBot();else{if(_0x33446b[_0x5a5e68(0x210)]()[_0x5a5e68(0x13d)](_0x5a5e68(0x2a4)))logHistory(_0x5a5e68(0x1a2),_0x4aa74a+_0x5a5e68(0x1e3)),logHistory(_0x5a5e68(0x1a2),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)'),await killBot();else{if(_0x33446b['toString']()[_0x5a5e68(0x13d)](_0x5a5e68(0x161)))logHistory(_0x5a5e68(0x1a2),_0x5a5e68(0x2b3)+_0x40cc1c),logger['debug'](_0x5a5e68(0x199),_0x33446b);else{if(_0x33446b instanceof ccxt[_0x5a5e68(0x1f8)]){_0x8c2ce5=_0x4aa74a+_0x5a5e68(0x1be)+_0x33446b['toString']();if(_0x40cc1c)_0x8c2ce5+='\x0aSymbol(s):\x20'+_0x40cc1c;await pauseBot(undefined,_0x8c2ce5,_0x33446b);}else{_0x8c2ce5=_0x5a5e68(0xea)+_0x33446b[_0x5a5e68(0x210)]();if(_0x40cc1c)_0x8c2ce5+=_0x5a5e68(0x187)+_0x40cc1c;await pauseBot(undefined,_0x8c2ce5);}}}}}}}}}}}}}}}}function decryptRSA(_0x2a9d6a,_0x18ae0e){const _0x2365de=_0x4e2b08,_0x30b8e8=forge[_0x2365de(0x232)][_0x2365de(0x2c1)](_0x2a9d6a),_0x32962f=_0x30b8e8[_0x2365de(0x2c0)](forge[_0x2365de(0x164)][_0x2365de(0x24d)](_0x18ae0e),'RSA-OAEP',{'md':forge['md'][_0x2365de(0x254)][_0x2365de(0x14d)](),'mgf1':{'md':forge['md'][_0x2365de(0x254)][_0x2365de(0x14d)]()}});return _0x32962f;}function _0x47bd(){const _0x3c6415=['exchange\x20reload','price','storeConfiguration','Error\x20in\x20testNewAPI():\x20','Executed\x20','loadSymbols()','symbol','timeout','apiKey','testApi','substring','storeHeadless','toFixed','realizedPnL','freeze','startprice','writeFile','getMonth','\x20orders\x20in\x20less\x20than\x20','USD','10MFESNW','Resuming\x20(','existsSync','restart','sqrt','mkdirSync','split','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','sortBy','logs','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','usd','isBefore','emitHistory','fee','canceled','cancel','\x20>\x20stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','initTickers()','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','loading-canceled','balancing\x20resumes\x20when\x20cooldown\x20ends','\x20portfolio:</b>\x20\x0a\x0a','args','fromCodePoint','version','\x20-\x20go\x20back\x20and\x20try\x20again','open','amountToPrecision','Exchange','initial','ExchangeError','recent20',')\x20known\x20order:\x20','ID:\x20','add','no\x20open\x20orders','Initializing\x20exchange','yargs/yargs','warning','unlinkSync','breakeven','/USDT','time','event','Portfolio\x20change\x20detected:\x20','initclient',':\x20Bot\x20','Order\x20filled:\x20','balancing\x20resumed','basecoinvalue','getTime','4453770xhmYZr','\x20closed\x20the\x20connection\x20(see:\x20hodlerhacks.com/fix/5)','19552731NroNIi','toString','min','openOrders','portfolio','order','basecoin','padStart','Network\x20error\x20details:','configstate','CoinMarketCap\x20data\x20could\x20not\x20be\x20updated\x20-\x20will\x20try\x20again\x20in\x201\x20hour','Resetting\x20bot\x20history','Saving\x20configuration','currency','delta','InvalidNonce','none','orderstatus','<b>','cost','threshold','\x20|\x20exchange:\x20','search','splice','-events.json','Invalid\x20API\x20details,\x20please\x20try\x20again\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','\x20blocked\x20API\x20(DDoSProtection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','reverse','limit','RequestTimeout','emojibuy','orderId','toUpperCase','getPortfolio','<b>Bot\x20','pki','ccxt','************','entries','type','api-issue','\x20API\x20key\x20is\x20invalid','\x20not\x20available\x20(see:\x20hodlerhacks.com/fix/5)','quick','fetchBalance','fetchTickers','slice','cloneDeep','highest','RETRY\x20-\x20Error\x20in\x20','botID','Updating\x20API\x20key\x20(not\x20saved\x20in\x20config\x20file\x20yet)','configuration','createWriteStream','removed','cooldown','marketcap','sendMetricsTelegram','trade','limits','recovery','max','decode64','\x20|\x20highest\x20fee:\x20','quote','7rlJakw','liquidity','constructor','portfolio1','sha256','bot','***','Avoiding\x20continuous\x20order\x20attempts','slider','eur','2\x20-\x20Validate\x20orders:\x20',')\x20unknown\x20order:\x20','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','%\x20(','bitmex','<pre>','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','match','\x20network\x20error:\x20','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','timestamp','log','\x20rejected\x20your\x20API\x20request\x20(see:\x20hodlerhacks.com/fix/4)','exchanges','starting-balance-','\x20has\x20a\x2024h\x20drop\x20of\x20','startdate','%)\x0a','pop','kill','success','\x20attempts','performance','staging','switch-manual','(((.+)+)+)+$','Test\x20new\x20API','/USD','\x20-\x20','sendPortfolioTelegram','1\x20-\x20FILLED\x20known\x20order:\x20','limit-low','UNLOCKED','Loading\x20completed','ongoing','fetchTicker','Huobi','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','fetchOpenOrders','Net\x20','Error\x20details:\x20','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','bots','remove','Bot\x20','side','\x20(see:\x20hodlerhacks.com/fix/1)','</pre>','buys','\x20minutes\x20-\x20','sort','storeFiat','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','timestamp-issue','recreate','1\x20-\x20FILLED\x20unknown\x20order:\x20','status','createOrder','ask','portfolio2','ordertype','has','Waited\x20','average','\x20metrics:</b>\x20\x0a\x0a','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','progress','Generated\x20PnL\x20data','Invalid\x20balance\x20for\x20','message','PAXG','Pausing\x20for\x20','bot-','Exception\x20thrown\x20in\x20','PermissionDenied','toLowerCase','\x20API\x20key,\x20secret\x20or\x20password\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','uncaughtException','fiat','environment','request-time','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','TUSD','watchOrders','test','getMinutes','apiSecret','netoffset','market_cap','Insufficient\x20funds\x20to\x20execute\x20order:\x20','BTC','net','cancelLoading','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','6PrZeaD','watchTrades()','API-key\x20format\x20invalid','balances','fetchBalance()','marketcapEnabled','2.7.1','Market','decrypt','privateKeyFromPem','getHours','2.6.23','apply','filled','process\x20','update-liquidity','sandbox','UNLOCKING','send','\x20>\x20','\x20hour','Cex','Unknown\x20error:\x20','5SsDmum',',\x20must\x20be\x20a\x203\x20digit\x20number','showname','no\x20exchange\x20reloaded','getSeconds','stringify','net-fiat','enabled','total','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','Order\x20filled','2\x20-\x20Handled\x20open\x20orders','getFullYear','watchTradesForSymbols()','Error\x20while\x20deleting\x20files:\x20','token\x20is\x20expired','spot','memoryUsage','enableFiatToggle','Bitget','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','set','shift','\x20API\x20secret\x20is\x20invalid','market','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','2.6.0','distribution','amount','BUSD','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','getStartingBalances','-------------------------------\x0a','Value\x20','Bybit','headless','percentage','coin','ETH','target','Failed\x20to\x20load\x20market\x20data\x20-\x20bot\x20not\x20started','-results.json','/output-000.log','keys','secret','Portfolio\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','Unknown\x20error\x20-\x20check\x20logs','starting-balances','bb-secure.json','number','resetHistory','get','Reset\x20|\x20','last','change','pnl','Placing\x20order\x20for:\x20','page','USDT','Binance','forEach','RETRY\x20-\x20Problem\x20resolved\x20after\x20','startnumber','watchTrades','defaults','-performance.json','Fee\x20discount\x20refund\x20detected:\x20','\x20MB','full','red_yellow_blue','sell','PnL\x20','Cryptocom','349564GYRrTV','axios','value','pnl-basecoin','assign','./logs/',':\x20timer\x20>','final','2.6.22','includes','debug','Initializing\x20coin\x20results','getDate','\x20exchange','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','complete','remainingSymbols','timeshift','prevnumber','0\x20-\x20EXECUTION:\x20','yyyy/MM/dd','MIN_NOTIONAL','string','stack','function','create','colorscheme','USDP','padEnd','change24h','onepagemode','added','marketcapApi','exchange','find','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','/EUR','length','must\x20be\x20greater\x20than\x20minimum\x20amount','1975923VhCqCL','push','1\x20-\x20partially\x20FILLED\x20(','Order\x20amount\x20is\x20invalid:\x20','5593104YiXgbD','Limit\x20(low-margin)','InsufficientFunds','./version.json','OnMaintenance','util','.json','coin-loading-progress','Invalid\x20symbol:\x20','723588KDYQjk','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','event-history','Headless:\x20','Order\x20is\x20invalid:\x20','\x20order:\x20','net-basecoin','\x20|\x20','filter','node-forge','coins','Valid\x20balance\x20for\x20','watchTradesForSymbols','running','botname','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','ExchangeNotAvailable','\x20>\x20pausing\x20bot\x20for\x20','map','LOCKED','Error\x20occurred:\x20','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)','round','AuthenticationError','188906QboYcC','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20trying\x20again\x20in\x20','excluded','marketcapsqrt','format','Initializing\x20exchange:\x20already\x20done','-config.json','\x0aSymbol(s):\x20','code','Set\x20lock\x20orders\x20to:\x20','2.3.5','privateKey','heapUsed','\x20minutes','active','NetworkError','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','pro','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20for\x20','\x20>\x20[DEBUG]\x20','argv','Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute','Initiating\x20bot\x20restart','production','data','Error\x20details:','join','cancelOrder','offset','isEqual','Order(s)\x20not\x20validated\x20after\x20','\x20|\x20Custom\x20ID:\x20','placeOrder','write','error',')\x20|\x20exchange:\x20','replace','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','pnl-fiat','setSandboxMode','Cooldown\x20ended\x20-\x20balancing\x20resumed','getOpenOrders()','lowdb','buy','date','Error:\x20Invalid\x20argument\x20','autoliquidity','closed','customId','limit-high','001','abs','toggleBotMode','\x20not\x20responding\x20(see:\x20hodlerhacks.com/fix/5)','detectLiquidityChange()','emojisell','EUR','./config/','USDC','/backup/','path','\x20|\x20lock\x20orders:\x20','\x20exchange\x20error:\x20','No\x20more\x20open\x20orders\x20-\x20','apiPassword','valid','changes','password','parse'];_0x47bd=function(){return _0x3c6415;};return _0x47bd();}async function withRetry(_0x41bd4f,_0x13c932){const _0x2bf231=_0x4e2b08;let _0x433150=![],_0x2f2c14=0x0,_0x5c29f5,_0x2be5a0;while(_0x2f2c14<maxRetries){try{_0x5c29f5=await _0x13c932();break;}catch(_0x5bce1f){_0x2be5a0=_0x5bce1f,!_0x433150?(_0x433150=!![],logger[_0x2bf231(0x13e)](_0x2bf231(0x240)+_0x41bd4f+':',_0x5bce1f[_0x2bf231(0x210)]())):await sleep(retryInterval);}_0x2f2c14++;}if(_0x2f2c14==0x0)return _0x5c29f5;if(_0x2f2c14>=maxRetries)throw _0x2be5a0;else return logger[_0x2bf231(0x13e)](_0x2bf231(0x128)+_0x2f2c14+_0x2bf231(0x26f)),_0x5c29f5;}function formatResult(_0x5b7dca,_0x37289a){const _0x1ea6c7=_0x4e2b08;return parseFloat(_0x5b7dca[_0x1ea6c7(0x1d1)](_0x37289a));}function formatResultTruncate(_0x59bf46,_0x22fba0){const _0x573d67=_0x4e2b08;let _0xb41712=formatResultString(_0x59bf46,0xa),_0x1944ba=_0xb41712['indexOf']('.');return _0x1944ba!=-0x1&&(_0xb41712=_0xb41712[_0x573d67(0x23d)](0x0,_0x1944ba+_0x22fba0+0x1)),Number(_0xb41712);}function formatResultString(_0x1c7a12,_0xd8e2cf){const _0x32fc51=_0x4e2b08;let _0x479257;if(!(''+_0x1c7a12)['includes']('e'))_0x479257=+(Math[_0x32fc51(0x17e)](_0x1c7a12+'e+'+_0xd8e2cf)+'e-'+_0xd8e2cf);else{let _0x42ef85=(''+_0x1c7a12)[_0x32fc51(0x1df)]('e'),_0x45a363='';+_0x42ef85[0x1]+_0xd8e2cf>0x0&&(_0x45a363='+'),_0x479257=+(Math['round'](+_0x42ef85[0x0]+'e'+_0x45a363+(+_0x42ef85[0x1]+_0xd8e2cf))+'e-'+_0xd8e2cf);}return Number(_0x479257)[_0x32fc51(0x1d1)](_0xd8e2cf);}function getServerTime(){const _0x4c3be4=_0x4e2b08,_0x5e4c11=new Date();return _0x5e4c11[_0x4c3be4(0xf7)]()+'/'+(_0x5e4c11['getMonth']()+0x1)[_0x4c3be4(0x210)]()[_0x4c3be4(0x216)](0x2,'0')+'/'+_0x5e4c11[_0x4c3be4(0x140)]()['toString']()[_0x4c3be4(0x216)](0x2,'0')+'\x20'+_0x5e4c11[_0x4c3be4(0x2c2)]()[_0x4c3be4(0x210)]()['padStart'](0x2,'0')+':'+_0x5e4c11[_0x4c3be4(0x2af)]()[_0x4c3be4(0x210)]()[_0x4c3be4(0x216)](0x2,'0')+':'+_0x5e4c11[_0x4c3be4(0xef)]()[_0x4c3be4(0x210)]()[_0x4c3be4(0x216)](0x2,'0');}function getTimeStamp(){const _0x4bd4da=_0x4e2b08,_0x5ba99f=shiftedTime();return _0x5ba99f['getFullYear']()+'/'+(_0x5ba99f['getMonth']()+0x1)[_0x4bd4da(0x210)]()['padStart'](0x2,'0')+'/'+_0x5ba99f['getDate']()[_0x4bd4da(0x210)]()[_0x4bd4da(0x216)](0x2,'0')+'\x20'+_0x5ba99f[_0x4bd4da(0x2c2)]()['toString']()[_0x4bd4da(0x216)](0x2,'0')+':'+_0x5ba99f[_0x4bd4da(0x2af)]()[_0x4bd4da(0x210)]()[_0x4bd4da(0x216)](0x2,'0')+':'+_0x5ba99f[_0x4bd4da(0xef)]()['toString']()[_0x4bd4da(0x216)](0x2,'0');}function getDate(){const _0x268fd1=_0x4e2b08,_0x2ad4ea=shiftedTime();return _0x2ad4ea[_0x268fd1(0xf7)]()+'/'+(_0x2ad4ea[_0x268fd1(0x1d6)]()+0x1)[_0x268fd1(0x210)]()[_0x268fd1(0x216)](0x2,'0')+'/'+_0x2ad4ea[_0x268fd1(0x140)]()[_0x268fd1(0x210)]()[_0x268fd1(0x216)](0x2,'0');}function getHour(){const _0xf7ab3b=_0x4e2b08,_0x28d1ca=shiftedTime();return _0x28d1ca[_0xf7ab3b(0x2c2)]()['toString']()[_0xf7ab3b(0x216)](0x2,'0');}function sleep(_0x59ed98){return new Promise(_0x5aa7fb=>setTimeout(_0x5aa7fb,_0x59ed98));}function shiftedTime(){const _0x42ed2f=_0x4e2b08,_0x13212c=new Date();let _0x113877=_0x13212c;if(config&&config['timeshift']!==0x0)_0x113877=fns[_0x42ed2f(0x1fc)](_0x13212c,{'hours':config[_0x42ed2f(0x145)]});return _0x113877;}function timer(_0x1ed5a2){const _0x31d6a4=_0x4e2b08,_0x50e20e=new Date();!lasttime?console[_0x31d6a4(0x265)](getTimeStamp()+_0x31d6a4(0x13a),_0x1ed5a2,_0x50e20e):console['log'](getTimeStamp()+_0x31d6a4(0x13a),_0x1ed5a2,(_0x50e20e-lasttime)/0x3e8),lasttime=_0x50e20e;}