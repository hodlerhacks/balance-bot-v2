const _0x387443=_0x38dd;(function(_0x3734b0,_0x3a9785){const _0x112e2b=_0x38dd,_0x3dcfd4=_0x3734b0();while(!![]){try{const _0x215ab0=parseInt(_0x112e2b(0x22a))/0x1+-parseInt(_0x112e2b(0x226))/0x2+-parseInt(_0x112e2b(0x2d7))/0x3+-parseInt(_0x112e2b(0x284))/0x4*(parseInt(_0x112e2b(0x1fb))/0x5)+parseInt(_0x112e2b(0x33b))/0x6+parseInt(_0x112e2b(0x34f))/0x7*(-parseInt(_0x112e2b(0x25a))/0x8)+parseInt(_0x112e2b(0x25d))/0x9*(parseInt(_0x112e2b(0x37c))/0xa);if(_0x215ab0===_0x3a9785)break;else _0x3dcfd4['push'](_0x3dcfd4['shift']());}catch(_0x53dcf4){_0x3dcfd4['push'](_0x3dcfd4['shift']());}}}(_0x37c9,0x54255));const _0x5960f5=function(){let _0x1eb953=!![];return function(_0x2507cc,_0xdeb3c4){const _0x4e972c=_0x1eb953?function(){const _0x8d2a09=_0x38dd;if(_0xdeb3c4){const _0x4260ac=_0xdeb3c4[_0x8d2a09(0x270)](_0x2507cc,arguments);return _0xdeb3c4=null,_0x4260ac;}}:function(){};return _0x1eb953=![],_0x4e972c;};}(),_0x1bc14a=_0x5960f5(this,function(){const _0x59567d=_0x38dd;return _0x1bc14a[_0x59567d(0x26c)]()[_0x59567d(0x374)](_0x59567d(0x1bb))[_0x59567d(0x26c)]()['constructor'](_0x1bc14a)[_0x59567d(0x374)](_0x59567d(0x1bb));});_0x1bc14a();'use strict';const ccxt=require(_0x387443(0x2fc)),low=require(_0x387443(0x2d0)),FileSync=require(_0x387443(0x37f)),fs=require('fs'),fns=require(_0x387443(0x28a)),forge=require('node-forge'),util=require(_0x387443(0x2c0)),argv=require(_0x387443(0x362))(process['argv']['slice'](0x2))[_0x387443(0x29e)],path=require(_0x387443(0x348)),axios=require(_0x387443(0x2b8));let exchange,gTicker={},gChange={};const usdBasecoins=['USD',_0x387443(0x324),_0x387443(0x1f8),_0x387443(0x2f1),_0x387443(0x29b),_0x387443(0x1cb)],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x387443(0x25c)]({'LOCKED':0x0,'UNLOCKING':0x1,'UNLOCKED':0x2});let lockOrders=ORDERS['UNLOCKED'],validateOrdersState,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotIntervalShort=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0x387443(0x1ed)+pauseBotInterval/0xea60+_0x387443(0x1cd),maxPauseRetries=0x6,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,watchTransactionsInterval=0x3c*0x3e8,schedulerInterval=0x3c*0x3c*0x3e8,retryInterval=0x3e8,maxRetries=0x5,logPageSize=0x14,defaultFee=0.003;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidOrdersInitialTimeout,pidOrdersTimeout,botPaused=![],transactionDetectionOngoing=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x5dc,balanceUpdateRetries=0x5;let enableFiatToggle;const serverversion=require(_0x387443(0x382))[_0x387443(0x31d)],environment=require(_0x387443(0x382))[_0x387443(0x266)]||_0x387443(0x232),botID=process[_0x387443(0x29e)][0x2]||_0x387443(0x35b),pattern=/^[0-9]{3}$/;!pattern['test'](botID)&&(console['log'](_0x387443(0x33c)+botID+_0x387443(0x279)),killBot());const userID=process[_0x387443(0x29e)][0x3]||'',configpath=userID?'./config/'+userID+'/':_0x387443(0x372),logspath=userID?_0x387443(0x1f0)+userID+'/':_0x387443(0x1f0),loggerfile=fs[_0x387443(0x1dd)](logspath+_0x387443(0x35a),{'flags':'a'});!fs[_0x387443(0x208)](configpath)&&fs[_0x387443(0x207)](configpath);!fs['existsSync'](logspath)&&fs[_0x387443(0x207)](logspath);const configfile=configpath+'bot-'+botID+_0x387443(0x1ec),logfile=configpath+_0x387443(0x358)+botID+'-events.json',performancefile=configpath+_0x387443(0x358)+botID+_0x387443(0x1d5),coinresultsfile=configpath+'bot-'+botID+'-results.json',settingsfile=configpath+_0x387443(0x1e0),securefile=configpath+'bb-secure.json',configbackuppath=configpath+'/backup/',adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x387443(0x234)]({'logs':[],'version':serverversion})[_0x387443(0x1f1)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x387443(0x234)]({'data':[],'version':serverversion})['write']();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x387443(0x234)]({'bot':[],'version':serverversion})[_0x387443(0x1f1)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x387443(0x234)]({'coins':[],'version':serverversion})[_0x387443(0x1f1)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0,settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x563b78=>{const _0x4967b9=_0x387443;console[_0x4967b9(0x29c)](_0x563b78);},'simple':_0x27151c=>{const _0x1d1d80=_0x387443;console[_0x1d1d80(0x29c)](_0x27151c),loggerfile[_0x1d1d80(0x1f1)](util[_0x1d1d80(0x36c)](_0x27151c)+'\x0a');},'full':async(_0x3d3b0c,_0xab057d='')=>{const _0xa447fe=_0x387443;let _0x106db9;if(config[_0xa447fe(0x24d)])_0x106db9=getTimeStamp()+':\x20'+config[_0xa447fe(0x368)]+_0xa447fe(0x2c4)+_0x3d3b0c;else _0x106db9=getTimeStamp()+':\x20Bot\x20'+botID+_0xa447fe(0x2c4)+_0x3d3b0c;console[_0xa447fe(0x29c)](_0x106db9),loggerfile[_0xa447fe(0x1f1)](util[_0xa447fe(0x36c)](_0x106db9)+'\x0a'),_0xab057d&&(console[_0xa447fe(0x29c)](_0xab057d),loggerfile['write'](util[_0xa447fe(0x36c)](_0xab057d)+'\x0a'));},'debug':async(_0x35e804,_0x25ce57='')=>{const _0x390ec6=_0x387443;let _0x54d429;if(config[_0x390ec6(0x24d)])_0x54d429=getTimeStamp()+':\x20'+config['botname']+'\x20>\x20[DEBUG]\x20'+_0x35e804;else _0x54d429=getTimeStamp()+_0x390ec6(0x277)+botID+_0x390ec6(0x356)+_0x35e804;if(debugging)console[_0x390ec6(0x29c)](_0x54d429);loggerfile[_0x390ec6(0x1f1)](util[_0x390ec6(0x36c)](_0x54d429)+'\x0a');if(_0x25ce57){if(debugging)console[_0x390ec6(0x29c)](_0x25ce57);loggerfile[_0x390ec6(0x1f1)](util[_0x390ec6(0x36c)](_0x25ce57)+'\x0a');}}};process['on']('uncaughtException',function(_0x437af2){handleError(_0x437af2,'uncaughtException');});settings[_0x387443(0x2af)]!=config[_0x387443(0x2af)]&&updateTimeshift(settings[_0x387443(0x2af)]);settings[_0x387443(0x239)]!=config['onepagemode']&&updateOnepagemode(settings[_0x387443(0x239)]);(settings[_0x387443(0x345)]&&!config['marketcapApi']||!settings[_0x387443(0x345)]&&config['marketcapApi'])&&updateMarketcapApi(settings[_0x387443(0x345)]);process['send']({'started':_0x387443(0x21a)},_0x280990=>{}),initializeProcessListeners();function proxyEmit(_0x1d3ea5,_0x3ef017=null){const _0xf9a92=_0x387443;process[_0xf9a92(0x200)]({'function':_0x1d3ea5,'args':_0x3ef017},_0x55ce32=>{});}function initializeProcessListeners(){const _0x565cf2=_0x387443;process['on'](_0x565cf2(0x36e),_0x3117d1=>{const _0x33ae80=_0x565cf2;switch(Object[_0x33ae80(0x2fb)](_0x3117d1)[0x0]){case _0x33ae80(0x2af):_0x3117d1[_0x33ae80(0x2af)]!=undefined&&(settings[_0x33ae80(0x2af)]=_0x3117d1['timeshift'],updateTimeshift(settings[_0x33ae80(0x2af)]));break;case _0x33ae80(0x239):_0x3117d1[_0x33ae80(0x239)]!=undefined&&(settings['onepagemode']=_0x3117d1[_0x33ae80(0x239)],updateOnepagemode(settings[_0x33ae80(0x239)]));break;case _0x33ae80(0x345):_0x3117d1['marketcapApi']!=undefined&&(settings[_0x33ae80(0x345)]=_0x3117d1[_0x33ae80(0x345)],updateMarketcapApi(settings['marketcapApi']));break;case _0x33ae80(0x330):_0x3117d1['bots']!=undefined&&(bots=JSON['parse'](_0x3117d1[_0x33ae80(0x330)]),proxyEmit(_0x33ae80(0x330),bots));break;case'function':switch(_0x3117d1[_0x33ae80(0x37b)]){case _0x33ae80(0x243):initclient();break;case'toggleBotMode':toggleBotMode();break;case _0x33ae80(0x326):emitHistory(_0x3117d1[_0x33ae80(0x257)]);break;case _0x33ae80(0x253):deleteHistoryAlerts(_0x3117d1[_0x33ae80(0x257)]);break;case _0x33ae80(0x2c3):getPortfolio(_0x3117d1[_0x33ae80(0x257)]);break;case _0x33ae80(0x37d):storeConfiguration(_0x3117d1['args']);break;case _0x33ae80(0x2c1):storeHeadless(_0x3117d1['args']);break;case'storeFiat':storeFiat(_0x3117d1['args']);break;case _0x33ae80(0x262):resetHistory();break;case'getStartingBalances':getStartingBalances(getNormalizedPerformance());break;case _0x33ae80(0x27c):placeOrder(_0x3117d1[_0x33ae80(0x257)]);break;case'cancelLoading':cancelLoading();break;case _0x33ae80(0x2ad):showConfig();break;case _0x33ae80(0x2b4):sendMetricsTelegram();break;case'sendPortfolioTelegram':sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x2b1334=![]){const _0x1bde0f=_0x387443;logger[_0x1bde0f(0x216)]('Reset\x20|\x20'+(_0x2b1334?'exchange\x20reload':_0x1bde0f(0x35f))+_0x1bde0f(0x361)+config['exchange']);if(pidBalances)clearTimeout(pidBalances);if(!_0x2b1334)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x1bde0f(0x20a)]!=''&&config[_0x1bde0f(0x20a)]!=_0x1bde0f(0x222)){loadingProgress=0x0;_0x2b1334&&(await initExchange(),await loadSymbols(),loadingProgress=0x1,setStableCoins(),proxyEmit(_0x1bde0f(0x1c4),emittedConfiguration()),initialPerformanceStored=![]);const _0x488386=await getCoins();[currentCoins,currentCoinsAll]=_0x488386,setBlockTransactionDetection(![]),startScheduler(),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x1bde0f(0x216)](_0x1bde0f(0x1d2)),getBalances(![]),await updateOpenOrders();if(lastOrders['length']==0x0&&allOpenOrders[_0x1bde0f(0x310)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function resumeBot(_0x1dbce9=![]){const _0x5ce395=_0x387443;logger[_0x5ce395(0x216)]('Resuming\x20('+(_0x1dbce9?'quick':'complete')+_0x5ce395(0x2eb)+config['exchange']);if(pidBalances)clearTimeout(pidBalances);if(_0x1dbce9){getBalances();return;}coinsLoaded=![];if(config[_0x5ce395(0x20a)]!=''&&config[_0x5ce395(0x20a)]!=_0x5ce395(0x222)){loadingProgress=0x1;const _0x1928e5=await getCoins();[currentCoins,currentCoinsAll]=_0x1928e5,setBlockTransactionDetection(![]),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x5ce395(0x216)](_0x5ce395(0x1d2)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x5ce395(0x310)]==0x0&&allOpenOrders[_0x5ce395(0x310)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();}}async function getMarketCap(_0x299b04){const _0x5ec929=_0x387443;let _0x3cc8c2=![];if(_0x299b04)_0x3cc8c2=!![];let _0xa46795;_0x3cc8c2?_0xa46795=_0x299b04['map'](_0x5159df=>_0x5159df[_0x5ec929(0x27f)]):_0xa46795=currentCoinsAll[_0x5ec929(0x2d5)](_0x3e54c4=>_0x3e54c4['coin']);if(!config[_0x5ec929(0x345)]||!_0x3cc8c2&&!config[_0x5ec929(0x351)]||_0xa46795[_0x5ec929(0x310)]==0x0)return;let _0xcf70ff=null;try{_0xcf70ff=await axios['get']('https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest',{'headers':{'X-CMC_PRO_API_KEY':settings[_0x5ec929(0x345)]},'params':{'symbol':_0xa46795[_0x5ec929(0x26c)]()}});}catch(_0x516dc7){_0xcf70ff=null,_0x516dc7[_0x5ec929(0x26c)]()[_0x5ec929(0x353)](_0x5ec929(0x2cb))?(config['marketcapApi']=![],updateConfig(),proxyEmit(_0x5ec929(0x1c4),emittedConfiguration()),logHistory(_0x5ec929(0x32f),'CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager')):(logHistory('error','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20trying\x20again\x20in\x20'+schedulerInterval/(0x3c*0x3e8)+'\x20minutes'),logger[_0x5ec929(0x216)](_0x5ec929(0x254),_0x516dc7[_0x5ec929(0x26c)]()+_0x5ec929(0x268)+_0x516dc7['code']));}if(_0xcf70ff){let _0xc41d33=0x0;const _0x319237=_0xcf70ff[_0x5ec929(0x21e)];_0xa46795[_0x5ec929(0x2b7)](_0x26466a=>{const _0xff59e8=_0x5ec929;if(_0x319237[_0xff59e8(0x21e)][_0x26466a][0x0])_0xc41d33+=_0x319237[_0xff59e8(0x21e)][_0x26466a][0x0][_0xff59e8(0x291)][_0xff59e8(0x343)][_0xff59e8(0x36a)];}),_0xa46795[_0x5ec929(0x2b7)](_0x216f52=>{const _0x2cda7a=_0x5ec929,_0x3893ce=_0x319237['data'][_0x216f52][0x0]?_0x319237['data'][_0x216f52][0x0][_0x2cda7a(0x291)][_0x2cda7a(0x343)][_0x2cda7a(0x36a)]:0x0;if(_0x3cc8c2){const _0x502e27=_0x299b04['find'](_0x1225b8=>_0x1225b8['coin']==_0x216f52);_0x502e27&&(_0x502e27[_0x2cda7a(0x21f)]=_0x3893ce);}else{const _0x1e8260=currentCoins[_0x2cda7a(0x295)](_0x5bb179=>_0x5bb179[_0x2cda7a(0x27f)]==_0x216f52);_0x1e8260&&(_0x1e8260[_0x2cda7a(0x21f)]=_0x3893ce);const _0x26c700=currentCoinsAll[_0x2cda7a(0x295)](_0x2688a1=>_0x2688a1['coin']==_0x216f52);_0x26c700&&(_0x26c700[_0x2cda7a(0x21f)]=_0x3893ce);}}),!_0x3cc8c2&&updateTargetDistribution();}}function updateTargetDistribution(){const _0x59ce77=_0x387443,_0x15628e=0x2;let _0xdb68f2=0x0,_0x5d4a22=0x0,_0x3bfd8e=0x0,_0x2c3dab=0x0,_0x1a3f92=0x0;config['portfolio']['forEach'](_0x265a97=>{const _0x339a41=_0x38dd;if(!_0x265a97[_0x339a41(0x30a)]){_0x3bfd8e++,_0xdb68f2+=_0x265a97[_0x339a41(0x1c7)];if(_0x265a97[_0x339a41(0x1c7)]===-0x1){_0xdb68f2++;const _0x436587=currentCoinsAll[_0x339a41(0x295)](_0x57a035=>_0x57a035[_0x339a41(0x27f)]==_0x265a97[_0x339a41(0x27f)]);_0x436587&&(_0x2c3dab+=_0x436587[_0x339a41(0x21f)],_0x1a3f92+=Math[_0x339a41(0x349)](_0x436587[_0x339a41(0x21f)]));}if(_0x265a97[_0x339a41(0x1c7)]!==-0x1)_0x5d4a22++;}});let _0x572f21;const _0x1db861=0x64-_0xdb68f2,_0x19c6d0=_0x3bfd8e-_0x5d4a22;_0x572f21=_0x19c6d0===0x0?_0xdb68f2:Math[_0x59ce77(0x28f)](0x64,_0xdb68f2),config[_0x59ce77(0x241)][_0x59ce77(0x2b7)](_0x37cbf8=>{const _0x169928=_0x59ce77,_0x41d946=currentCoinsAll[_0x169928(0x295)](_0x52e44b=>_0x52e44b[_0x169928(0x27f)]==_0x37cbf8[_0x169928(0x27f)]);_0x41d946&&(_0x37cbf8[_0x169928(0x21f)]=_0x41d946[_0x169928(0x21f)]);if(!_0x37cbf8[_0x169928(0x30a)]){if(_0x572f21<=0x64){if(_0x37cbf8[_0x169928(0x1c7)]===-0x1){if(_0x2c3dab!==0x0&&config[_0x169928(0x351)]){if(_0x41d946){if(config[_0x169928(0x351)]==_0x169928(0x21f))_0x37cbf8[_0x169928(0x22e)]=(_0x1db861/(_0x2c3dab/_0x41d946[_0x169928(0x21f)]))['toFixed'](_0x15628e);else config[_0x169928(0x351)]==_0x169928(0x211)&&(_0x37cbf8[_0x169928(0x22e)]=(_0x1db861/(_0x1a3f92/Math[_0x169928(0x349)](_0x41d946['marketcap'])))['toFixed'](_0x15628e));}}}}}}),updateConfig();}function updateConfig(){const _0x2a4ae6=_0x387443;let _0x3af1c1=dbConfig['get'](_0x2a4ae6(0x341))['find']({'botID':botID})[_0x2a4ae6(0x256)]();_0x3af1c1&&dbConfig[_0x2a4ae6(0x1c2)](_0x2a4ae6(0x341))['find']({'botID':botID})[_0x2a4ae6(0x30e)](config)[_0x2a4ae6(0x1f1)]();}function logMemory(){const _0x27dc37=_0x387443;if(environment!=_0x27dc37(0x250))return;const _0xbfebaf=process[_0x27dc37(0x28e)]()[_0x27dc37(0x315)]/0x400/0x400;logger[_0x27dc37(0x216)]('process\x20'+process[_0x27dc37(0x238)]+_0x27dc37(0x331)+formatResult(_0xbfebaf,0x1)+'\x20MB');}async function startScheduler(){const _0xd3f848=shiftedTime()['getHours']();getMarketCap(),loadSymbols(),_0xd3f848==0x1&&logMemory(),await sleep(schedulerInterval),startScheduler();}async function restartBot(_0x9f9c89=![]){const _0x2e2d50=_0x387443;logger[_0x2e2d50(0x216)](_0x2e2d50(0x22b));if(!_0x9f9c89)while(lockOrders!=ORDERS[_0x2e2d50(0x37a)]||coolingDown){await sleep(0x3e8);}process[_0x2e2d50(0x200)]({'stop':_0x2e2d50(0x213)},_0x1bcb31=>{});}async function initExchange(_0x96d5f5=config[_0x387443(0x269)],_0x117859=config[_0x387443(0x20a)],_0x3e0115=config['apiSecret'],_0x44dcde=config[_0x387443(0x1d8)]){const _0xbc02d8=_0x387443;if(exchange){logger[_0xbc02d8(0x216)]('Initializing\x20exchange:\x20already\x20done');return;}logger['debug'](_0xbc02d8(0x312));!supportedExchanges()[_0xbc02d8(0x353)](_0x96d5f5)&&(logHistory(_0xbc02d8(0x32f),_0xbc02d8(0x1dc)+_0x96d5f5+_0xbc02d8(0x2bb)),killBot());const _0x91ea2b=ccxt[_0xbc02d8(0x338)][_0x96d5f5[_0xbc02d8(0x2db)]()];exchange=new _0x91ea2b({'apiKey':_0x117859,'secret':_0x3e0115,'options':{'defaultType':'spot'}});if(_0x44dcde)exchange['password']=_0x44dcde;}function updateExchange(_0x539524,_0x4d8c93,_0x430caa=null){const _0x2ddabe=_0x387443;exchange[_0x2ddabe(0x20a)]=_0x539524,exchange[_0x2ddabe(0x2a3)]=_0x4d8c93,exchange[_0x2ddabe(0x1d8)]=_0x430caa,logger[_0x2ddabe(0x216)]('Updating\x20API\x20key\x20(not\x20saved\x20in\x20config\x20file\x20yet)');}function setStableCoins(){const _0x107537=_0x387443;let _0x5c5a76=config['basecoin']=='ETH'?_0x107537(0x313):config[_0x107537(0x2a8)]=='PAXG'?'PAXG':_0x107537(0x2df),_0x55b8d4=allSymbols[_0x107537(0x353)](_0x5c5a76+_0x107537(0x1e1))?_0x107537(0x343):allSymbols[_0x107537(0x353)](_0x5c5a76+_0x107537(0x2c6))?'USDT':_0x107537(0x36b),_0x240287=allSymbols['includes'](_0x5c5a76+_0x107537(0x2ef))?_0x107537(0x36b):_0x55b8d4;enableFiatToggle=!![],_0x55b8d4==_0x107537(0x36b)&&(enableFiatToggle=![],storeFiat('EUR')),_0x240287!='EUR'&&(enableFiatToggle=![],storeFiat(_0x107537(0x343))),stablecoins={'eur':{'coin':''+_0x5c5a76+_0x240287,'symbol':_0x5c5a76+'/'+_0x240287},'usd':{'coin':''+_0x5c5a76+_0x55b8d4,'symbol':_0x5c5a76+'/'+_0x55b8d4}};}async function initwsCcxt(){const _0x38b62c=_0x387443;initCycle++;const _0x1de789=initCycle;let _0x2bf878=[];config[_0x38b62c(0x241)][_0x38b62c(0x2b7)](_0x38ca91=>{const _0xc5b69c=_0x38b62c;if(!_0x38ca91[_0xc5b69c(0x30a)]&&_0x38ca91['coin']!=config[_0xc5b69c(0x2a8)])_0x2bf878[_0xc5b69c(0x2dd)](_0x38ca91['symbol']);});if(!_0x2bf878[_0x38b62c(0x353)](stablecoins[_0x38b62c(0x217)]['symbol']))_0x2bf878[_0x38b62c(0x2dd)](stablecoins['eur'][_0x38b62c(0x328)]);if(!_0x2bf878['includes'](stablecoins[_0x38b62c(0x30d)]['symbol']))_0x2bf878[_0x38b62c(0x2dd)](stablecoins[_0x38b62c(0x30d)][_0x38b62c(0x328)]);if(config[_0x38b62c(0x269)][_0x38b62c(0x26a)]('Binance')&&config[_0x38b62c(0x2a8)]!=_0x38b62c(0x32a)){if(!_0x2bf878[_0x38b62c(0x353)](_0x38b62c(0x335)+config[_0x38b62c(0x2a8)]))_0x2bf878[_0x38b62c(0x2dd)](_0x38b62c(0x335)+config[_0x38b62c(0x2a8)]);}loadCoins(_0x2bf878),_0x2bf878=validateSymbols(_0x2bf878);const _0x1584f2=async _0x3812e8=>{const _0x12b247=_0x38b62c;let _0x72bc7d;try{const _0x390147=await getTickers(_0x3812e8);Object['entries'](_0x390147)['forEach'](_0x18ed19=>{const _0x5e84c9=_0x38dd;_0x72bc7d=_0x18ed19[0x1][_0x5e84c9(0x328)],gTicker[noslash(_0x72bc7d)]=_0x18ed19[0x1][_0x5e84c9(0x308)],gChange[_0x72bc7d]=_0x18ed19[0x1]['percentage'];});}catch(_0x1efdf9){await handleError(_0x1efdf9,_0x12b247(0x2b5),_0x72bc7d);}},_0x58d1ec=async _0x4ff264=>{const _0x119b6f=_0x38b62c;while(initCycle==_0x1de789){if(!botPaused)try{const _0x1ebc63=await exchange[_0x119b6f(0x24b)](_0x4ff264);gTicker[noslash(_0x1ebc63[0x0][_0x119b6f(0x328)])]=_0x1ebc63[0x0][_0x119b6f(0x29f)];}catch(_0x37ba2b){if(!exchangeStopped)await handleError(_0x37ba2b,_0x119b6f(0x1f3),_0x4ff264);}else await sleep(0x64);}},_0x1edcce=async _0x49931e=>{const _0x526c4a=_0x38b62c;while(initCycle==_0x1de789){if(!botPaused)try{const _0x27631c=await exchange[_0x526c4a(0x287)](_0x49931e),_0x49e705=_0x27631c[_0x526c4a(0x259)]();gTicker[noslash(_0x49e705[_0x526c4a(0x328)])]=_0x49e705[_0x526c4a(0x29f)];}catch(_0x107d0d){if(!exchangeStopped)await handleError(_0x107d0d,'watchTradesForSymbols()',_0x49931e[_0x526c4a(0x26c)]());}else await sleep(0x64);}},_0x5aa4ac=async _0x3825f9=>{const _0x4c660e=_0x38b62c;while(initCycle==_0x1de789){if(!botPaused){let _0xacdaea;try{await sleep(0x3c*0x3e8);const _0x1cd810=await getTickers(_0x3825f9);Object[_0x4c660e(0x2e7)](_0x1cd810)[_0x4c660e(0x2b7)](_0x340727=>{const _0x3a1909=_0x4c660e;_0xacdaea=_0x340727[0x1][_0x3a1909(0x328)],gChange[_0xacdaea]=_0x340727[0x1]['percentage'];});}catch(_0xd20e19){if(!exchangeStopped)await handleError(_0xd20e19,_0x4c660e(0x248),_0xacdaea);}}else await sleep(0x64);}},_0x47711e=async _0x7f6167=>{const _0x18e03d=_0x38b62c;while(initCycle==_0x1de789){if(!botPaused)try{const _0x212ac3=await exchange[_0x18e03d(0x32e)](_0x7f6167);initCycle==_0x1de789&&_0x212ac3[_0x18e03d(0x2b7)](_0x5a1583=>{updateNumberCoinsCcxt(_0x5a1583);});}catch(_0xa3db42){if(!exchangeStopped)await handleError(_0xa3db42,_0x18e03d(0x1de));}else await sleep(0x64);}};_0x1584f2(_0x2bf878),_0x5aa4ac(_0x2bf878),exchange['has']['watchTradesForSymbols']&&!(config[_0x38b62c(0x269)]==_0x38b62c(0x380)&&_0x2bf878['length']>0xa)?_0x1edcce(_0x2bf878):_0x2bf878['forEach'](_0x3f9fd2=>{_0x58d1ec(_0x3f9fd2);}),_0x2bf878[_0x38b62c(0x2b7)](_0x4962b5=>{_0x47711e(_0x4962b5);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x554d16){const _0x549b40=_0x387443;let _0x31f68f={};try{if(config['exchange']!=_0x549b40(0x2d3))_0x31f68f=await exchange[_0x549b40(0x1d6)](_0x554d16);else for(const _0xb4b35e of _0x554d16){const _0x51628c=await exchange[_0x549b40(0x206)](_0xb4b35e);_0x31f68f[_0xb4b35e]=_0x51628c;}return _0x31f68f;}catch(_0x501ff9){throw _0x501ff9;}}function setBlockTransactionDetection(_0x59c701){const _0x45485a=_0x387443;blockTransactionDetection=_0x59c701,logger[_0x45485a(0x216)]('Block\x20transaction\x20detection:\x20'+blockTransactionDetection);}async function detectLiquidityChange(_0x33ecd9=0x0){const _0x2ac0a6=_0x387443;transactionDetectionOngoing=!![];try{const _0xd5c719=await getCoins(_0x33ecd9),[_0x2e0df0,_0x3862b0]=_0xd5c719;let _0x1c46f0=[];currentCoins[_0x2ac0a6(0x2b7)](_0x4d7f3c=>{const _0x345fae=_0x2ac0a6,_0x3e2691=_0x2e0df0[_0x345fae(0x295)](_0x12bacc=>_0x12bacc[_0x345fae(0x27f)]==_0x4d7f3c[_0x345fae(0x27f)]);if(_0x3e2691){if(_0x4d7f3c[_0x345fae(0x32c)]!=_0x3e2691[_0x345fae(0x32c)]){let _0x2e5e1b;if(_0x4d7f3c[_0x345fae(0x27f)]!=config[_0x345fae(0x2a8)]){const _0x3ded=gTicker[noslash(_0x4d7f3c[_0x345fae(0x328)])];_0x2e5e1b=_0x4d7f3c['reverse']?0x1/_0x3ded:_0x3ded;}else _0x2e5e1b=0x1;_0x1c46f0['push']({'coin':_0x4d7f3c[_0x345fae(0x27f)],'symbol':_0x4d7f3c[_0x345fae(0x328)],'price':_0x2e5e1b,'number':Number(formatResult(_0x3e2691[_0x345fae(0x32c)]-_0x4d7f3c[_0x345fae(0x32c)],0x8)),'basecoinvalue':_0x2e5e1b*(_0x3e2691[_0x345fae(0x32c)]-_0x4d7f3c[_0x345fae(0x32c)])});}}});if(_0x1c46f0[_0x2ac0a6(0x310)]>0x0&&!blockTransactionDetection){for(const _0x2354da of _0x1c46f0){if(config['autoliquidity']){logger[_0x2ac0a6(0x216)](_0x2ac0a6(0x25e)+_0x2354da['basecoinvalue']+_0x2ac0a6(0x2f4)+lastFees[_0x2ac0a6(0x214)]);if(lastFees[_0x2ac0a6(0x214)]==0x0||Math[_0x2ac0a6(0x33d)](_0x2354da[_0x2ac0a6(0x2ba)])>lastFees[_0x2ac0a6(0x214)]*0x3){if(config['autoliquidity']==_0x2ac0a6(0x2fa)){delete _0x2354da[_0x2ac0a6(0x328)],delete _0x2354da[_0x2ac0a6(0x2ba)];let _0x1dce77=[],_0x5b88da=[...config[_0x2ac0a6(0x223)]]||[],_0x32ea5d=config[_0x2ac0a6(0x223)];_0x5b88da[_0x2ac0a6(0x2f7)]((_0x5d45ee,_0x249a48)=>_0x5d45ee[_0x2ac0a6(0x2ff)]>_0x249a48[_0x2ac0a6(0x2ff)]?-0x1:_0x249a48[_0x2ac0a6(0x2ff)]>_0x5d45ee[_0x2ac0a6(0x2ff)]?0x1:0x0);const _0x35b76b=getDate();if(_0x5b88da[0x0]){const _0x4c0934=fns['parse'](_0x5b88da[0x0][_0x2ac0a6(0x2ff)],'yyyy/MM/dd',new Date()),_0x407b21=fns[_0x2ac0a6(0x27e)](_0x35b76b,_0x2ac0a6(0x21b),new Date());if(fns[_0x2ac0a6(0x2ab)](_0x4c0934,_0x407b21)){_0x1dce77=_0x5b88da[0x0][_0x2ac0a6(0x1d7)];const _0x3864ee=_0x1dce77[_0x2ac0a6(0x295)](_0x5c6e95=>_0x5c6e95[_0x2ac0a6(0x27f)]==_0x2354da[_0x2ac0a6(0x27f)]);_0x3864ee?(_0x3864ee[_0x2ac0a6(0x32c)]+=_0x2354da[_0x2ac0a6(0x32c)],_0x3864ee[_0x2ac0a6(0x32c)]==0x0&&(_0x1dce77=_0x1dce77['filter'](_0x375f9f=>{const _0x2f84cc=_0x2ac0a6;return _0x375f9f['coin']!=_0x2354da[_0x2f84cc(0x27f)];}))):_0x1dce77[_0x2ac0a6(0x2dd)](_0x2354da);const _0x215ec1=_0x32ea5d[_0x2ac0a6(0x295)](_0x5996e6=>_0x5996e6[_0x2ac0a6(0x2ff)]==_0x35b76b);_0x215ec1[_0x2ac0a6(0x1d7)]=_0x1dce77;}else _0x32ea5d[_0x2ac0a6(0x2dd)]({'date':_0x35b76b,'changes':[_0x2354da]});}const _0x2113fb=_0x32ea5d[_0x2ac0a6(0x295)](_0x1e33b9=>_0x1e33b9['date']==_0x35b76b);if(_0x2113fb){let _0x2109d1=!![];_0x2113fb[_0x2ac0a6(0x1d7)][_0x2ac0a6(0x2b7)](_0x393619=>{if(_0x393619['number']!=0x0)_0x2109d1=![];}),_0x2109d1&&(_0x32ea5d=_0x32ea5d[_0x2ac0a6(0x233)](_0x16c3a1=>{return _0x16c3a1['date']!=_0x35b76b;}));}let _0x4c9bef=dbConfig[_0x2ac0a6(0x1c2)](_0x2ac0a6(0x341))[_0x2ac0a6(0x295)]({'botID':botID})['value']();_0x4c9bef&&(dbConfig[_0x2ac0a6(0x1c2)](_0x2ac0a6(0x341))[_0x2ac0a6(0x295)]({'botID':botID})['assign']({'liquidity':_0x32ea5d})[_0x2ac0a6(0x1f1)](),config[_0x2ac0a6(0x223)]=_0x32ea5d);logHistory('success','Portfolio\x20change\x20detected:\x20'+Math[_0x2ac0a6(0x33d)](_0x2354da[_0x2ac0a6(0x32c)])+'\x20'+_0x2354da[_0x2ac0a6(0x27f)]+'\x20'+(_0x2354da['number']>0x0?_0x2ac0a6(0x251):_0x2ac0a6(0x2de))+'\x20-\x20liquidity\x20settings\x20updated\x20accordingly'),proxyEmit('configuration',emittedConfiguration());const _0x5de8ce=getNormalizedPerformance();emitPerformance(_0x5de8ce),getStartingBalances(_0x5de8ce),logger['debug'](_0x2ac0a6(0x1da));}else config[_0x2ac0a6(0x2d4)]==_0x2ac0a6(0x278)&&(config[_0x2ac0a6(0x2a4)]?(await storeHeadless({'headless':![]}),logHistory(_0x2ac0a6(0x2fd),_0x2ac0a6(0x1d9)+Math['abs'](_0x2354da[_0x2ac0a6(0x32c)])+'\x20'+_0x2354da['coin']+'\x20'+(_0x2354da[_0x2ac0a6(0x32c)]>0x0?_0x2ac0a6(0x251):_0x2ac0a6(0x2de))+_0x2ac0a6(0x2a5))):logger[_0x2ac0a6(0x216)]('Portfolio\x20change\x20detected:\x20'+Math[_0x2ac0a6(0x33d)](_0x2354da[_0x2ac0a6(0x32c)])+'\x20'+_0x2354da['coin']+'\x20'+(_0x2354da[_0x2ac0a6(0x32c)]>0x0?_0x2ac0a6(0x251):_0x2ac0a6(0x2de))+_0x2ac0a6(0x371)));}else logger[_0x2ac0a6(0x216)](_0x2ac0a6(0x334)+Math['abs'](_0x2354da[_0x2ac0a6(0x32c)])+'\x20'+_0x2354da[_0x2ac0a6(0x27f)]+'\x20'+(_0x2354da['number']>0x0?_0x2ac0a6(0x251):_0x2ac0a6(0x2de)));}else logger[_0x2ac0a6(0x216)]('Portfolio\x20change\x20detected:\x20'+Math['abs'](_0x2354da['number'])+'\x20'+_0x2354da[_0x2ac0a6(0x27f)]+'\x20'+(_0x2354da['number']>0x0?'added':_0x2ac0a6(0x2de))+'\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled');}currentCoins=_0x2e0df0,currentCoinsAll=_0x3862b0;}}catch(_0x3b8dcc){if(!exchangeStopped)await handleError(_0x3b8dcc,_0x2ac0a6(0x2e0));}transactionDetectionOngoing=![];}async function watchTransactions(){await sleep(0x14*0x3e8);while(!![]){!botPaused&&!blockTransactionDetection&&coinsLoaded?(detectLiquidityChange(),await sleep(watchTransactionsInterval)):await sleep(0x3e8);}}async function loadSymbols(){const _0x5adf91=_0x387443;try{markets=await exchange[_0x5adf91(0x355)](!![]),allSymbols=[],Object[_0x5adf91(0x2e7)](markets)['forEach'](_0x267e41=>{const _0x56bc00=_0x5adf91;_0x267e41[0x1][_0x56bc00(0x267)]&&_0x267e41[0x1][_0x56bc00(0x2d1)]&&allSymbols[_0x56bc00(0x2dd)](_0x267e41[0x0]);});}catch(_0x2aa6a7){markets?logger[_0x5adf91(0x216)]('Error\x20in\x20loadSymbols():\x20'+_0x2aa6a7['toString']()):(loading[_0x5adf91(0x303)]=!![],emitLoadingProgress(),_0x2aa6a7[_0x5adf91(0x26c)]()[_0x5adf91(0x2db)]()['includes'](_0x5adf91(0x296))||_0x2aa6a7[_0x5adf91(0x26c)]()[_0x5adf91(0x2db)]()[_0x5adf91(0x353)](_0x5adf91(0x26e))?logHistory('error','Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)'):handleErrorNoStop(_0x2aa6a7,'loadSymbols()',!![]),logHistory(_0x5adf91(0x32f),'Failed\x20to\x20load\x20market\x20data\x20-\x20bot\x20not\x20started'),logHistory(_0x5adf91(0x32f),'Pausing\x20for\x20'+loadCoinsRetryInterval/0xea60+_0x5adf91(0x378)),logger[_0x5adf91(0x216)]('Error\x20details:',_0x2aa6a7),botPaused=!![],await sleep(loadCoinsRetryInterval),restartBot());}}function validateSymbols(_0x47e55a){let _0x536504=[];return _0x47e55a['forEach'](_0x1f0e19=>{const _0x448f5e=_0x38dd;!allSymbols[_0x448f5e(0x353)](_0x1f0e19)?logHistory(_0x448f5e(0x32f),_0x448f5e(0x1e3)+_0x1f0e19+_0x448f5e(0x2d6)):_0x536504[_0x448f5e(0x2dd)](_0x1f0e19);}),_0x536504;}async function initclient(){const _0x322819=_0x387443;proxyEmit(_0x322819(0x1c4),emittedConfiguration()),proxyEmit(_0x322819(0x2b9),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x1fe192=getNormalizedPerformance();emitPerformance(_0x1fe192),getStartingBalances(_0x1fe192);}async function toggleBotMode(){const _0x2d5054=_0x387443;let _0xdf3c7a=dbConfig[_0x2d5054(0x1c2)](_0x2d5054(0x341))['find']({'botID':botID})[_0x2d5054(0x256)]();if(_0xdf3c7a){const _0x56bdd8=!_0xdf3c7a[_0x2d5054(0x2a4)];dbConfig[_0x2d5054(0x1c2)](_0x2d5054(0x341))[_0x2d5054(0x295)]({'botID':botID})['assign']({'headless':_0x56bdd8})[_0x2d5054(0x1f1)](),config[_0x2d5054(0x2a4)]=_0x56bdd8,proxyEmit(_0x2d5054(0x1c4),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x402a03=_0x387443;process[_0x402a03(0x200)]({'updatebotmanager':!![]},_0x1d4afd=>{}),logger['debug'](_0x402a03(0x360)+config[_0x402a03(0x2a4)]);}async function loadCoins(_0x4e3f59){const _0x169bce=_0x387443;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x34f405,_0x581d2b=0x0,_0x2ce229=0x0;_0x4e3f59[_0x169bce(0x2b7)](_0x1ea9dd=>{const _0x5d4af6=_0x169bce;loading[_0x5d4af6(0x369)]['push'](_0x1ea9dd);}),loadingCanceled=![];let _0x23927c=![];while(_0x34f405!=_0x4e3f59[_0x169bce(0x310)]+maxLoadingProgress){_0x34f405=loadingProgress,_0x4e3f59[_0x169bce(0x2b7)](_0x140631=>{const _0x59f5b7=_0x169bce;if(gTicker[noslash(_0x140631)]){loading['remainingSymbols']=loading[_0x59f5b7(0x369)][_0x59f5b7(0x233)](_0x380195=>_0x380195!=_0x140631);if(!watchedSymbols[_0x59f5b7(0x353)](_0x140631))watchedSymbols['push'](_0x140631);_0x34f405++;}}),loading[_0x169bce(0x228)]=Math[_0x169bce(0x263)](_0x34f405/(_0x4e3f59[_0x169bce(0x310)]+maxLoadingProgress)*0x64);loading[_0x169bce(0x228)]!=0x64&&(_0x2ce229>0x1e*0x5&&(loading[_0x169bce(0x26d)]=!![],emitLoadingProgress()),_0x2ce229>0x78*0x5&&!_0x23927c&&(_0x23927c=!![],logHistory(_0x169bce(0x32f),_0x169bce(0x1d4)+loading['remainingSymbols'][_0x169bce(0x2ca)](',\x20')+_0x169bce(0x337)),logHistory(_0x169bce(0x32f),_0x169bce(0x1fc)+loadCoinsRetryInterval/0xea60+_0x169bce(0x378)),loadingCanceled=!![],await sleep(loadCoinsRetryInterval),restartBot()));if(loadingCanceled){loading[_0x169bce(0x303)]=!![],emitLoadingProgress();break;}else _0x581d2b!=loading[_0x169bce(0x228)]&&(_0x581d2b=loading[_0x169bce(0x228)],emitLoadingProgress()),_0x2ce229++,await sleep(0xc8);}_0x34f405==_0x4e3f59[_0x169bce(0x310)]+maxLoadingProgress&&(coinsLoaded=!![],process[_0x169bce(0x200)]({'status':_0x169bce(0x2da),'live':_0x169bce(0x21a)},_0x49e23a=>{}),_0x23927c&&logHistory(_0x169bce(0x2fd),_0x169bce(0x1e9)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x5c9814=_0x387443;proxyEmit('configuration',{...emittedConfiguration(),'configstate':_0x5c9814(0x31b)});}function emitLoadingProgress(){const _0x3945a8=_0x387443;proxyEmit(_0x3945a8(0x240),loading);}async function getFiat(){const _0x34ea02=_0x387443;let _0x10f255=gTicker[stablecoins[_0x34ea02(0x217)][_0x34ea02(0x27f)]],_0x4eb47c=gTicker[stablecoins[_0x34ea02(0x30d)][_0x34ea02(0x27f)]];return{'eur':Number(_0x10f255),'usd':Number(_0x4eb47c)};}function capitalize(_0x2e04e0){const _0x362e49=_0x387443;return _0x2e04e0[_0x362e49(0x1ee)](0x0,0x1)[_0x362e49(0x357)]()+_0x2e04e0[_0x362e49(0x1ee)](0x1);}function supportedExchanges(){const _0x38eb25=_0x387443,_0xf06f9=['ws','fetchTickers',_0x38eb25(0x206),'watchTrades',_0x38eb25(0x32e),'cancelOrder',_0x38eb25(0x290),_0x38eb25(0x236),_0x38eb25(0x2f3)];let _0x4353d4=[],_0x230b8a=[],_0x178149=ccxt['pro'][_0x38eb25(0x2b9)];_0x178149['forEach'](_0x4693e9=>{const _0x4496d4=_0x38eb25;try{const _0x1a04d7=new ccxt[(_0x4496d4(0x338))][_0x4693e9]();_0x230b8a['push'](_0x1a04d7);}catch(_0x489424){}}),_0x230b8a[_0x38eb25(0x2b7)](_0x16c54a=>{const _0x35a055=_0x38eb25;let _0x283420=0x0;_0xf06f9['forEach'](_0x2a22d0=>{const _0x558a82=_0x38dd;_0x2a22d0 in _0x16c54a[_0x558a82(0x323)]&&_0x16c54a[_0x558a82(0x323)][_0x2a22d0]&&_0x283420++;}),_0x283420==_0xf06f9[_0x35a055(0x310)]&&_0x4353d4['push'](capitalize(_0x16c54a['id']));});let _0x3ffa86=[];return _0x178149[_0x38eb25(0x2b7)](_0x56ef75=>{const _0x35f730=_0x38eb25;_0x56ef75=capitalize(_0x56ef75);if(!_0x4353d4[_0x35f730(0x353)](_0x56ef75))_0x3ffa86[_0x35f730(0x2dd)](_0x56ef75);}),_0x4353d4;}function setStartDatePerformance(){const _0x2c9687=_0x387443;if(config&&config['liquidity'][0x0][_0x2c9687(0x1d7)][_0x2c9687(0x310)]!=0x0){const _0x3ccb12=config[_0x2c9687(0x223)][0x0][_0x2c9687(0x1d7)];dbPerformance['get'](_0x2c9687(0x21e))['find']({'date':config['startdate']})[_0x2c9687(0x30e)]({'coins':_0x3ccb12})[_0x2c9687(0x1f1)]();}}async function recreateCoinResults(){const _0x2f7691=_0x387443;recreationNeeded=![];let _0x59419d,_0x3992ac=[];try{for(const _0x2a0f8b of currentCoins){if(_0x2a0f8b[_0x2f7691(0x27f)]!=config['basecoin']){let _0x3c94c7=0x0,_0x3eda18,_0x4fc473;_0x59419d=await getAllEventOrders(_0x2a0f8b['symbol']);if(_0x59419d[_0x2f7691(0x310)]>0x0)_0x59419d[_0x2f7691(0x2b7)](_0x3e5df2=>{const _0x203184=_0x2f7691,_0x4600eb=_0x2a0f8b['symbol'][_0x203184(0x353)](config[_0x203184(0x2a8)]+'/');_0x3992ac[_0x203184(0x2dd)]({'datetime':_0x3e5df2[_0x203184(0x1c3)],'coin':_0x2a0f8b[_0x203184(0x27f)],'symbol':_0x2a0f8b[_0x203184(0x328)],'side':_0x3e5df2[_0x203184(0x2ec)],'reverse':_0x4600eb,'amount':formatResult(_0x3e5df2['filled'],0x8),'filled':formatResult(_0x3e5df2[_0x203184(0x318)],0x8),'price':formatResult(_0x3e5df2[_0x203184(0x29f)],0x8)}),_0x3c94c7=_0x3e5df2['side']=='buy'?_0x3c94c7+_0x3e5df2['filled']:_0x3c94c7-_0x3e5df2[_0x203184(0x318)];if(!_0x4fc473)_0x4fc473=_0x3e5df2[_0x203184(0x29f)];});_0x3eda18=_0x2a0f8b[_0x2f7691(0x32c)]-_0x3c94c7;let _0x3d3ac5;config[_0x2f7691(0x223)]['forEach'](_0x57f62b=>{const _0x30d19a=_0x2f7691;!_0x3d3ac5&&(_0x3d3ac5=_0x57f62b[_0x30d19a(0x1d7)][_0x30d19a(0x295)](_0x531aad=>_0x531aad[_0x30d19a(0x27f)]==_0x2a0f8b[_0x30d19a(0x27f)]),_0x3d3ac5&&(_0x3eda18=_0x3d3ac5['number'],_0x4fc473=_0x3d3ac5[_0x30d19a(0x29f)]));});let _0x48a098=dbCoinResults['get'](_0x2f7691(0x1f4))['find']({'coin':_0x2a0f8b[_0x2f7691(0x27f)]})[_0x2f7691(0x256)]();_0x48a098={'coin':_0x2a0f8b['coin'],'number':_0x3eda18,'breakeven':_0x4fc473,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x2f7691(0x1c2)](_0x2f7691(0x1f4))[_0x2f7691(0x295)]({'coin':_0x2a0f8b[_0x2f7691(0x27f)]})['assign'](_0x48a098)[_0x2f7691(0x1f1)]();}}_0x3992ac[_0x2f7691(0x2f7)]((_0x381977,_0x40d77b)=>_0x381977[_0x2f7691(0x1c3)]>_0x40d77b[_0x2f7691(0x1c3)]?0x1:_0x40d77b[_0x2f7691(0x1c3)]>_0x381977['datetime']?-0x1:0x0);let _0x155a43=0x0;for(let _0x212182 of _0x3992ac){await updateCoinResults(_0x212182,!![]);}}catch(_0xaac91f){await handleError(_0xaac91f,_0x2f7691(0x218));}}async function getAllEventOrders(_0x4d3164){const _0x2bc6b8=_0x387443;let _0x316103=[],_0x2948f3=dbLogs[_0x2bc6b8(0x1c2)](_0x2bc6b8(0x29a))[_0x2bc6b8(0x233)](_0x3ccae5=>{const _0x3f69e7=_0x2bc6b8,_0x5e85e9=_0x3ccae5[_0x3f69e7(0x298)][_0x3f69e7(0x2db)]();return _0x5e85e9[_0x3f69e7(0x353)](_0x4d3164[_0x3f69e7(0x2db)]())&&(_0x5e85e9['includes']('market')&&_0x5e85e9['includes']('order')||_0x5e85e9[_0x3f69e7(0x353)](_0x3f69e7(0x318))&&_0x5e85e9[_0x3f69e7(0x353)](_0x3f69e7(0x26b)));})[_0x2bc6b8(0x2a0)](_0x2bc6b8(0x215))[_0x2bc6b8(0x256)]();return _0x2948f3[_0x2bc6b8(0x2b7)](_0x587154=>{const _0x105c9f=_0x2bc6b8,_0x501161=_0x587154[_0x105c9f(0x298)]['includes']('sell')?_0x105c9f(0x2bc):_0x105c9f(0x1f2),_0x27cea8=/#([0-9]|\.)+\s/i,_0x2f77ed=Number(_0x27cea8[_0x105c9f(0x36d)](_0x587154[_0x105c9f(0x298)])[0x0][_0x105c9f(0x2b3)](0x1)),_0xc61317=/@([0-9]|\.)+$/i,_0x28888e=Number(_0xc61317['exec'](_0x587154['event'])[0x0][_0x105c9f(0x2b3)](0x1));_0x316103['push']({'datetime':_0x587154[_0x105c9f(0x215)],'coin':symbolToCoin(_0x4d3164),'symbol':_0x4d3164,'side':_0x501161,'amount':_0x2f77ed,'filled':_0x2f77ed,'price':_0x28888e});}),_0x316103;}async function validate24hChanges(){const _0x5867a9=_0x387443;for(const _0x4fe058 of currentCoins){if(_0x4fe058[_0x5867a9(0x27f)]!=config[_0x5867a9(0x2a8)]){let _0x2fd326;_0x4fe058[_0x5867a9(0x25b)]?_0x2fd326=formatResult((0x1/(gChange[_0x4fe058['symbol']]/0x64+0x1)-0x1)*0x64,0x3):_0x2fd326=gChange[_0x4fe058[_0x5867a9(0x328)]],_0x2fd326<config[_0x5867a9(0x283)]&&(logHistory(_0x5867a9(0x32f),_0x4fe058[_0x5867a9(0x27f)]+_0x5867a9(0x27a)+_0x2fd326+'%'),logHistory(_0x5867a9(0x32f),_0x5867a9(0x2c9)),logHistory(_0x5867a9(0x32f),_0x5867a9(0x23e)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x3286cd,_0x24901d){const _0x48fdf5=_0x387443;if(!_0x3286cd)return!![];const _0x3cbb3c=_0x24901d[_0x48fdf5(0x2ea)]('.'),_0xe1f5a1=_0x3286cd[_0x48fdf5(0x2ea)]('.');for(var _0x4265c5=0x0;_0x4265c5<_0xe1f5a1['length'];_0x4265c5++){const _0x46fc9b=~~_0xe1f5a1[_0x4265c5],_0x3931ce=~~_0x3cbb3c[_0x4265c5];if(_0x46fc9b<_0x3931ce)return!![];if(_0x46fc9b>_0x3931ce)return![];}return![];}async function oneTimeMigration(){const _0x46ab12=_0x387443;let _0x56cd43=dbLogs[_0x46ab12(0x1c2)](_0x46ab12(0x31d))[_0x46ab12(0x256)]();if(isOlderVersion(_0x56cd43,'2.3.5')){let _0x5c180a=[];const _0x264e5b=dbLogs[_0x46ab12(0x1c2)](_0x46ab12(0x29a))['value']();_0x264e5b['forEach'](_0x1c4014=>{const _0x5cdee5=_0x46ab12;_0x5c180a[_0x5cdee5(0x2dd)]({'time':_0x1c4014[_0x5cdee5(0x215)],'type':_0x1c4014['type'],'event':_0x1c4014[_0x5cdee5(0x298)]});}),dbLogs[_0x46ab12(0x1c2)](_0x46ab12(0x29a))[_0x46ab12(0x30e)](_0x5c180a)[_0x46ab12(0x1f1)]();}let _0x111a87=dbConfig[_0x46ab12(0x1c2)]('version')['value']();if(isOlderVersion(_0x111a87,_0x46ab12(0x220))){let _0x2ecd55=dbConfig[_0x46ab12(0x1c2)](_0x46ab12(0x341))[_0x46ab12(0x295)]({'botID':botID})[_0x46ab12(0x256)]();if(_0x2ecd55){let _0xb976ea=[];_0x2ecd55[_0x46ab12(0x241)][_0x46ab12(0x2b7)](_0x5c79cc=>{const _0x1419a8=_0x46ab12;_0xb976ea['push']({'coin':_0x5c79cc[_0x1419a8(0x27f)],'number':_0x5c79cc['startnumber'],'price':_0x5c79cc[_0x1419a8(0x339)]}),delete _0x5c79cc[_0x1419a8(0x245)],delete _0x5c79cc['startprice'];});if(_0xb976ea[_0x46ab12(0x310)]!==0x0)fs[_0x46ab12(0x359)](configbackuppath+('starting-balance-'+botID+_0x46ab12(0x34b)),JSON[_0x46ab12(0x21c)](_0xb976ea,null,0x4),function(_0xc2de41){if(_0xc2de41){}});const _0x36d90f=(_0x4f9836,_0x276ae4)=>{const _0x505567=_0x46ab12;let _0x2f8b81=[];_0x276ae4[_0x505567(0x2b7)](_0x298a23=>{const _0x187b82=_0x505567,_0x5de205=_0x4f9836['find'](_0x215528=>_0x215528[_0x187b82(0x27f)]==_0x298a23[_0x187b82(0x27f)]);if(!_0x5de205)_0x2f8b81[_0x187b82(0x2dd)](_0x298a23);});let _0x731096=[];return _0x4f9836[_0x505567(0x2b7)](_0x5ee5e1=>{const _0x1e40d0=_0x505567,_0x3a1215=_0x276ae4[_0x1e40d0(0x295)](_0x44004a=>_0x44004a[_0x1e40d0(0x27f)]==_0x5ee5e1[_0x1e40d0(0x27f)]);if(!_0x3a1215||_0x3a1215['number']==0x0&&_0x5ee5e1[_0x1e40d0(0x32c)]!=0x0)_0x731096[_0x1e40d0(0x2dd)](_0x5ee5e1);}),{'missingDay1':_0x2f8b81,'notInDay2':_0x731096};},_0x52ebc7=dbPerformance[_0x46ab12(0x1c2)](_0x46ab12(0x21e))[_0x46ab12(0x1ff)]()[_0x46ab12(0x256)]();if(_0x52ebc7[_0x46ab12(0x310)]>0x1){const {missingDay1:_0x219a3a,notInDay2:_0x2079c7}=_0x36d90f(_0xb976ea,_0x52ebc7[0x1][_0x46ab12(0x1f4)]);_0xb976ea=[..._0xb976ea,..._0x219a3a],_0x2079c7[_0x46ab12(0x2b7)](_0x3b176c=>{const _0x4f3c20=_0x46ab12;let _0x515fb9=_0xb976ea['findIndex'](_0x5440ba=>_0x5440ba['coin']==_0x3b176c[_0x4f3c20(0x27f)]);_0x515fb9!=-0x1&&_0xb976ea[_0x4f3c20(0x300)](_0x515fb9,0x1);});}_0xb976ea[_0x46ab12(0x2f7)]((_0x2c5c04,_0x3eca13)=>_0x2c5c04[_0x46ab12(0x27f)]>_0x3eca13[_0x46ab12(0x27f)]?0x1:_0x3eca13[_0x46ab12(0x27f)]>_0x2c5c04[_0x46ab12(0x27f)]?-0x1:0x0);let _0x2c60fb=[{'date':_0x2ecd55[_0x46ab12(0x1e4)],'changes':_0xb976ea}];_0x52ebc7[_0x46ab12(0x310)]>0x2&&_0x52ebc7[_0x46ab12(0x2b7)]((_0x54bef1,_0x448953)=>{const _0x41f585=_0x46ab12;if(_0x448953>0x0&&_0x448953<_0x52ebc7[_0x41f585(0x310)]-0x1){const {missingDay1:_0x17bff3,notInDay2:_0x95353b}=_0x36d90f(_0x52ebc7[_0x448953][_0x41f585(0x1f4)],_0x52ebc7[_0x448953+0x1][_0x41f585(0x1f4)]);_0xb976ea=[],(_0x17bff3[_0x41f585(0x310)]!=0x0||_0x95353b[_0x41f585(0x310)]!=0x0)&&(_0x17bff3[_0x41f585(0x310)]!=0x0&&_0xb976ea[_0x41f585(0x2dd)](..._0x17bff3),_0x95353b[_0x41f585(0x310)]!=0x0&&(_0x95353b['forEach'](_0x503653=>{const _0x1eb15d=_0x41f585;_0x503653[_0x1eb15d(0x32c)]=-_0x503653[_0x1eb15d(0x32c)];}),_0xb976ea[_0x41f585(0x2dd)](..._0x95353b)),_0xb976ea['sort']((_0x565a78,_0x53a88c)=>_0x565a78['coin']>_0x53a88c['coin']?0x1:_0x53a88c['coin']>_0x565a78[_0x41f585(0x27f)]?-0x1:0x0),_0x2c60fb[_0x41f585(0x2dd)]({'date':_0x52ebc7[_0x448953+0x1][_0x41f585(0x2ff)],'changes':_0xb976ea}));}}),dbConfig[_0x46ab12(0x1c2)]('bot')[_0x46ab12(0x295)]({'botID':botID})[_0x46ab12(0x30e)]({..._0x2ecd55,'liquidity':_0x2c60fb})[_0x46ab12(0x1f1)]();}}if(isOlderVersion(_0x111a87,_0x46ab12(0x306))){let _0x3349c2=dbConfig['get']('bot')[_0x46ab12(0x295)]({'botID':botID})[_0x46ab12(0x256)]();if(_0x3349c2){const _0x52f6a3=_0x3349c2[_0x46ab12(0x269)],_0xeff47e=_0x52f6a3?capitalize(_0x52f6a3):_0x46ab12(0x381);dbConfig[_0x46ab12(0x1c2)](_0x46ab12(0x341))['find']({'botID':botID})[_0x46ab12(0x30e)]({'exchange':_0xeff47e})['write']();}}if(isOlderVersion(_0x111a87,_0x46ab12(0x2f5))){let _0x7fb8cc=dbConfig['get'](_0x46ab12(0x341))[_0x46ab12(0x295)]({'botID':botID})[_0x46ab12(0x256)]();if(_0x7fb8cc){const _0x2cd24a=_0x7fb8cc[_0x46ab12(0x351)],_0x3404d3=_0x2cd24a?_0x46ab12(0x21f):![];dbConfig[_0x46ab12(0x1c2)]('bot')[_0x46ab12(0x295)]({'botID':botID})['assign']({'marketcapEnabled':_0x3404d3})[_0x46ab12(0x1f1)]();}}if(isOlderVersion(_0x111a87,_0x46ab12(0x212))){let _0x179034=dbConfig[_0x46ab12(0x1c2)](_0x46ab12(0x341))[_0x46ab12(0x295)]({'botID':botID})[_0x46ab12(0x256)]();if(_0x179034){const _0x3a1ec7=_0x179034[_0x46ab12(0x2d4)],_0xbcb0f0=_0x3a1ec7?_0x46ab12(0x2fa):![];dbConfig['get'](_0x46ab12(0x341))[_0x46ab12(0x295)]({'botID':botID})[_0x46ab12(0x30e)]({'autoliquidity':_0xbcb0f0})[_0x46ab12(0x1f1)]();}}let _0xf21323=dbPerformance[_0x46ab12(0x1c2)]('version')[_0x46ab12(0x256)]();isOlderVersion(_0xf21323,_0x46ab12(0x220))&&setStartDatePerformance();let _0x14facd=dbCoinResults[_0x46ab12(0x1c2)](_0x46ab12(0x31d))[_0x46ab12(0x256)]();if(isOlderVersion(_0x14facd,_0x46ab12(0x1df))){let _0x3ba64e=dbCoinResults[_0x46ab12(0x1c2)](_0x46ab12(0x1f4))[_0x46ab12(0x256)]();if(_0x3ba64e[_0x46ab12(0x310)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x231625=_0x387443;dbConfig[_0x231625(0x24f)](_0x231625(0x31d),serverversion)[_0x231625(0x1f1)](),dbPerformance['set'](_0x231625(0x31d),serverversion)[_0x231625(0x1f1)](),dbLogs[_0x231625(0x24f)](_0x231625(0x31d),serverversion)['write'](),dbCoinResults[_0x231625(0x24f)](_0x231625(0x31d),serverversion)[_0x231625(0x1f1)]();}function _0x38dd(_0x4a02fa,_0x28cc87){const _0x3aa68d=_0x37c9();return _0x38dd=function(_0x1bc14a,_0x5960f5){_0x1bc14a=_0x1bc14a-0x1bb;let _0x37c925=_0x3aa68d[_0x1bc14a];return _0x37c925;},_0x38dd(_0x4a02fa,_0x28cc87);}function getConfiguration(_0x293f54){const _0x3a81f1=_0x387443;let _0x38b4f5=dbConfig[_0x3a81f1(0x1c2)](_0x3a81f1(0x341))['find']({'botID':_0x293f54})['value']();if(_0x38b4f5){let _0x25575b=![];typeof _0x38b4f5[_0x3a81f1(0x28b)]==_0x3a81f1(0x23a)&&(_0x38b4f5={..._0x38b4f5,'threshold':Number(_0x38b4f5['threshold'])},_0x25575b=!![]),_0x38b4f5['change24h']==undefined&&(_0x38b4f5={..._0x38b4f5,'change24h':-0x14},_0x25575b=!![]),_0x38b4f5[_0x3a81f1(0x1f9)]==undefined&&(_0x38b4f5={..._0x38b4f5,'fiat':_0x3a81f1(0x343)},_0x25575b=!![]),_0x38b4f5[_0x3a81f1(0x239)]==undefined&&(_0x38b4f5={..._0x38b4f5,'onepagemode':settings[_0x3a81f1(0x239)]},_0x25575b=!![]),_0x38b4f5['colorscheme']==undefined&&(_0x38b4f5={..._0x38b4f5,'colorscheme':'red_yellow_blue'},_0x25575b=!![]),_0x38b4f5[_0x3a81f1(0x2d4)]==undefined&&(_0x38b4f5={..._0x38b4f5,'autoliquidity':_0x3a81f1(0x2fa)},_0x25575b=!![]),_0x38b4f5['marketcapApi']==undefined&&(_0x38b4f5={..._0x38b4f5,'marketcapApi':settings[_0x3a81f1(0x345)]?!![]:![]},_0x25575b=!![]),_0x38b4f5[_0x3a81f1(0x351)]==undefined&&(_0x38b4f5={..._0x38b4f5,'marketcapEnabled':![]},_0x25575b=!![]),_0x25575b&&(_0x38b4f5={'botID':_0x38b4f5[_0x3a81f1(0x30f)],'exchange':_0x38b4f5['exchange'],'apiKey':_0x38b4f5[_0x3a81f1(0x20a)],'apiSecret':_0x38b4f5[_0x3a81f1(0x2a3)],'apiPassword':_0x38b4f5[_0x3a81f1(0x1d8)],'basecoin':_0x38b4f5[_0x3a81f1(0x2a8)],'botname':_0x38b4f5[_0x3a81f1(0x368)],'showname':_0x38b4f5['showname'],'threshold':_0x38b4f5['threshold'],'ordertype':_0x38b4f5[_0x3a81f1(0x20f)],'timeout':_0x38b4f5['timeout'],'fiat':_0x38b4f5[_0x3a81f1(0x1f9)],'startdate':_0x38b4f5[_0x3a81f1(0x1e4)],'recreate':_0x38b4f5['recreate'],'timeshift':_0x38b4f5[_0x3a81f1(0x2af)],'onepagemode':_0x38b4f5[_0x3a81f1(0x239)],'headless':_0x38b4f5['headless'],'cooldown':_0x38b4f5[_0x3a81f1(0x33f)],'change24h':_0x38b4f5[_0x3a81f1(0x283)],'emojibuy':_0x38b4f5[_0x3a81f1(0x1be)],'emojisell':_0x38b4f5[_0x3a81f1(0x365)],'colorscheme':_0x38b4f5[_0x3a81f1(0x252)],'marketcapApi':_0x38b4f5[_0x3a81f1(0x345)],'marketcapEnabled':_0x38b4f5['marketcapEnabled'],'portfolio':_0x38b4f5['portfolio'],'autoliquidity':_0x38b4f5[_0x3a81f1(0x2d4)],'liquidity':_0x38b4f5[_0x3a81f1(0x223)],'openOrders':_0x38b4f5[_0x3a81f1(0x34d)]},dbConfig[_0x3a81f1(0x1c2)](_0x3a81f1(0x341))[_0x3a81f1(0x305)]()[_0x3a81f1(0x1f1)](),dbConfig[_0x3a81f1(0x1c2)](_0x3a81f1(0x341))[_0x3a81f1(0x2dd)](_0x38b4f5)['write']());}else _0x38b4f5={'botID':_0x293f54,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x3a81f1(0x225)+_0x293f54,'showname':![],'threshold':0x3,'ordertype':_0x3a81f1(0x1fd),'timeout':0x14,'fiat':_0x3a81f1(0x343),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x3a81f1(0x2af)],'onepagemode':settings[_0x3a81f1(0x239)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x3a81f1(0x2d8),'marketcapApi':settings[_0x3a81f1(0x345)]?!![]:![],'marketcapEnabled':![],'portfolio':[],'autoliquidity':_0x3a81f1(0x2fa),'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x38b4f5;}function emittedConfiguration(){const _0x3137e8=_0x387443;let _0x7dcb71;if(config[_0x3137e8(0x20a)]=='')_0x7dcb71={...config,'configstate':_0x3137e8(0x322)};else config[_0x3137e8(0x20a)]==_0x3137e8(0x222)?_0x7dcb71={...config,'configstate':_0x3137e8(0x2e4)}:(_0x7dcb71={...config,'apiKey':_0x3137e8(0x201),'apiSecret':_0x3137e8(0x201)},config['apiPassword']&&(_0x7dcb71[_0x3137e8(0x1d8)]=_0x3137e8(0x201)));return _0x7dcb71['enableFiatToggle']=enableFiatToggle,_0x7dcb71;}function getSettings(){const _0xf0c1d0=_0x387443;return dbSettings[_0xf0c1d0(0x1c2)](_0xf0c1d0(0x27d))[_0xf0c1d0(0x256)]();}function getSecure(){const _0x438878=_0x387443;return dbSecure[_0x438878(0x1c2)]('secure')['value']()||{};}function updateTimeshift(_0x41eeed){const _0xae7aa1=_0x387443;let _0x389a3b=dbConfig['get'](_0xae7aa1(0x341))[_0xae7aa1(0x295)]({'botID':botID})['value']();_0x389a3b&&dbConfig['get'](_0xae7aa1(0x341))[_0xae7aa1(0x295)]({'botID':botID})[_0xae7aa1(0x30e)]({'timeshift':_0x41eeed})['write'](),config[_0xae7aa1(0x2af)]=_0x41eeed,proxyEmit('configuration',emittedConfiguration());}function updateOnepagemode(_0x2e3a89){const _0xa2e14f=_0x387443;let _0x1ec8db=dbConfig[_0xa2e14f(0x1c2)](_0xa2e14f(0x341))[_0xa2e14f(0x295)]({'botID':botID})[_0xa2e14f(0x256)]();_0x1ec8db&&dbConfig[_0xa2e14f(0x1c2)](_0xa2e14f(0x341))['find']({'botID':botID})[_0xa2e14f(0x30e)]({'onepagemode':_0x2e3a89})[_0xa2e14f(0x1f1)](),config[_0xa2e14f(0x239)]=_0x2e3a89,proxyEmit(_0xa2e14f(0x1c4),emittedConfiguration());}function updateMarketcapApi(_0x46062c){const _0x240db9=_0x387443,_0x126e04=_0x46062c?!![]:![];let _0x2e3b9a=dbConfig['get'](_0x240db9(0x341))['find']({'botID':botID})[_0x240db9(0x256)]();_0x2e3b9a&&dbConfig['get'](_0x240db9(0x341))[_0x240db9(0x295)]({'botID':botID})['assign']({'marketcapApi':_0x126e04})[_0x240db9(0x1f1)](),config['marketcapApi']=_0x126e04,getMarketCap(),proxyEmit('configuration',emittedConfiguration());}async function storeConfiguration(_0x16d5a7){const _0x533f3e=_0x387443;logger[_0x533f3e(0x216)]('Saving\x20configuration');if(pidBalances)clearTimeout(pidBalances);setBlockTransactionDetection(!![]);let _0x44a25e=![],_0x22fda9=![],_0x5d9733=[];_0x16d5a7[_0x533f3e(0x241)]['forEach'](_0x2507b8=>{const _0x5bfc93=_0x533f3e;if(!_0x2507b8[_0x5bfc93(0x30a)]&&_0x2507b8[_0x5bfc93(0x27f)]!=_0x16d5a7[_0x5bfc93(0x2a8)])_0x5d9733['push'](_0x2507b8[_0x5bfc93(0x328)]);}),_0x5d9733[_0x533f3e(0x2b7)](_0x3f4124=>{const _0xeae6cd=_0x533f3e,_0x271bf7=currentCoins[_0xeae6cd(0x295)](_0x44d051=>_0x44d051[_0xeae6cd(0x328)]==_0x3f4124);!_0x271bf7&&(_0x44a25e=!![]);}),currentCoins[_0x533f3e(0x2b7)](_0x2a3355=>{const _0x1f6798=_0x533f3e;if(_0x2a3355[_0x1f6798(0x27f)]!=config[_0x1f6798(0x2a8)]){const _0x565b7d=_0x5d9733['find'](_0x2ec703=>_0x2ec703==_0x2a3355['symbol']);!_0x565b7d&&(_0x44a25e=!![]);}}),_0x16d5a7[_0x533f3e(0x241)][_0x533f3e(0x2b7)](_0x5433c5=>{const _0x5966cc=_0x533f3e,_0x5d7802=config[_0x5966cc(0x241)][_0x5966cc(0x295)](_0x3497c=>_0x3497c[_0x5966cc(0x27f)]==_0x5433c5[_0x5966cc(0x27f)]);if(_0x5d7802&&_0x5433c5[_0x5966cc(0x247)]!=_0x5d7802['offset'])_0x22fda9=!![];});let _0x4df39e=dbConfig['get'](_0x533f3e(0x341))['find']({'botID':botID})[_0x533f3e(0x256)]();_0x16d5a7={..._0x16d5a7,'apiKey':decryptRSA(secure[_0x533f3e(0x1fe)],_0x16d5a7[_0x533f3e(0x20a)]),'apiSecret':decryptRSA(secure['privateKey'],_0x16d5a7[_0x533f3e(0x2a3)])};_0x16d5a7[_0x533f3e(0x1d8)]&&(_0x16d5a7['apiPassword']=decryptRSA(secure['privateKey'],_0x16d5a7[_0x533f3e(0x1d8)]));let _0x5bc22d=![];if(_0x4df39e){_0x16d5a7['apiKey']==_0x533f3e(0x201)?_0x16d5a7['apiKey']=config['apiKey']:_0x5bc22d=!![];_0x16d5a7[_0x533f3e(0x2a3)]==_0x533f3e(0x201)?_0x16d5a7['apiSecret']=config[_0x533f3e(0x2a3)]:_0x5bc22d=!![];if(_0x16d5a7['apiPassword']==_0x533f3e(0x201))_0x16d5a7['apiPassword']=config[_0x533f3e(0x1d8)];else{if(_0x16d5a7[_0x533f3e(0x1d8)])_0x5bc22d=!![];}dbConfig[_0x533f3e(0x1c2)](_0x533f3e(0x341))[_0x533f3e(0x295)]({'botID':botID})['assign'](_0x16d5a7)[_0x533f3e(0x1f1)]();}else dbConfig[_0x533f3e(0x1c2)](_0x533f3e(0x341))[_0x533f3e(0x2dd)](_0x16d5a7)[_0x533f3e(0x1f1)](),_0x5bc22d=!![],process[_0x533f3e(0x200)]({'status':_0x533f3e(0x2da),'live':'running'},_0x5bd63d=>{});process[_0x533f3e(0x200)]({'botname':_0x16d5a7['botname']},_0xa15e27=>{}),config={..._0x16d5a7},updateBotManager(),proxyEmit(_0x533f3e(0x2a7)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x5bc22d)!_0x4df39e?await reset(!![]):getBalances();else _0x44a25e||_0x22fda9?await reset(![]):getBalances();setBlockTransactionDetection(![]);}async function storeHeadless(_0x4b4c61){const _0x1fa524=_0x387443,_0x117682={...config,'headless':_0x4b4c61[_0x1fa524(0x2a4)]};let _0x4ee5e6=dbConfig['get']('bot')['find']({'botID':botID})[_0x1fa524(0x256)]();_0x4ee5e6&&dbConfig['get']('bot')[_0x1fa524(0x295)]({'botID':botID})[_0x1fa524(0x30e)](_0x117682)[_0x1fa524(0x1f1)](),config={..._0x117682},updateBotManager(),proxyEmit(_0x1fa524(0x1c4),emittedConfiguration());}async function storeFiat(_0x1e8bc1){const _0x2b9b5e=_0x387443,_0x1c9e0a={...config,'fiat':_0x1e8bc1};let _0x62dfd9=dbConfig[_0x2b9b5e(0x1c2)](_0x2b9b5e(0x341))[_0x2b9b5e(0x295)]({'botID':botID})[_0x2b9b5e(0x256)]();_0x62dfd9&&dbConfig[_0x2b9b5e(0x1c2)](_0x2b9b5e(0x341))[_0x2b9b5e(0x295)]({'botID':botID})[_0x2b9b5e(0x30e)](_0x1c9e0a)[_0x2b9b5e(0x1f1)](),config={..._0x1c9e0a},proxyEmit(_0x2b9b5e(0x1c4),emittedConfiguration());}function resetHistory(){const _0x139497=_0x387443;logger[_0x139497(0x2cd)](_0x139497(0x22d));try{if(fs[_0x139497(0x208)](path[_0x139497(0x2ca)](configpath,_0x139497(0x358)+botID+'-events.json')))fs[_0x139497(0x235)](path[_0x139497(0x2ca)](configpath,_0x139497(0x358)+botID+_0x139497(0x1db)));if(fs[_0x139497(0x208)](path[_0x139497(0x2ca)](configpath,_0x139497(0x358)+botID+_0x139497(0x1d5))))fs[_0x139497(0x235)](path['join'](configpath,_0x139497(0x358)+botID+_0x139497(0x1d5)));if(fs[_0x139497(0x208)](path[_0x139497(0x2ca)](configpath,_0x139497(0x358)+botID+'-results.json')))fs[_0x139497(0x235)](path[_0x139497(0x2ca)](configpath,_0x139497(0x358)+botID+_0x139497(0x1bf)));}catch(_0xa5c348){if(_0xa5c348)logger[_0x139497(0x2cd)](_0x139497(0x327),_0xa5c348);}const _0x4d2929=getDate();let _0x59c8f5=[];currentCoins[_0x139497(0x2b7)](_0x37153d=>{const _0x1bc1b1=_0x139497;_0x59c8f5['push']({'coin':_0x37153d[_0x1bc1b1(0x27f)],'number':_0x37153d[_0x1bc1b1(0x32c)],'price':_0x37153d[_0x1bc1b1(0x308)]});});let _0x14968e=dbConfig['get'](_0x139497(0x341))[_0x139497(0x295)]({'botID':botID})['value']();_0x14968e&&(dbConfig[_0x139497(0x1c2)](_0x139497(0x341))[_0x139497(0x295)]({'botID':botID})[_0x139497(0x30e)]({'liquidity':[{'date':_0x4d2929,'changes':_0x59c8f5}]})['write'](),config[_0x139497(0x223)]=[]),restartBot(!![]);}function noslash(_0x9b2397){const _0x2738ad=_0x387443;return _0x9b2397[_0x2738ad(0x33e)]('/','');}function updateHighestFee(_0x3df969){const _0xaeebad=_0x387443;if(_0x3df969[_0xaeebad(0x25b)]){let _0x416740={'filled':_0x3df969[_0xaeebad(0x318)]*_0x3df969['price'],'amount':_0x3df969[_0xaeebad(0x318)]*_0x3df969[_0xaeebad(0x29f)],'side':_0x3df969[_0xaeebad(0x2ec)]==_0xaeebad(0x2bc)?'buy':'sell','price':0x1/_0x3df969[_0xaeebad(0x29f)]};_0x3df969={..._0x3df969,..._0x416740};}const _0x5e1304=defaultFee*_0x3df969['filled']*_0x3df969['price'];lastFees['recent20'][_0xaeebad(0x310)]===0x14&&lastFees[_0xaeebad(0x1c8)][_0xaeebad(0x23b)](),lastFees[_0xaeebad(0x1c8)][_0xaeebad(0x2dd)](_0x5e1304),lastFees[_0xaeebad(0x214)]=Math[_0xaeebad(0x28f)](...lastFees[_0xaeebad(0x1c8)]);}async function updateNumberCoinsCcxt(_0x3d01f2){const _0x11557e=_0x387443;logger['debug'](_0x11557e(0x2b1)+_0x3d01f2[_0x11557e(0x328)]+_0x11557e(0x342)+_0x3d01f2[_0x11557e(0x1f6)]+_0x11557e(0x342)+_0x3d01f2[_0x11557e(0x318)]+_0x11557e(0x249)+_0x3d01f2[_0x11557e(0x20c)]+_0x11557e(0x342)+_0x3d01f2['id']);let _0x5deed9=_0x3d01f2['status'],_0x48629d=![];currentCoins[_0x11557e(0x2b7)](_0x3060b1=>{const _0x1e248d=_0x11557e;_0x3060b1[_0x1e248d(0x328)]==_0x3d01f2['symbol']&&(_0x48629d=!![]);});if(!_0x48629d)return;const _0x599d1b=currentCoins[_0x11557e(0x295)](_0x5031c3=>_0x5031c3[_0x11557e(0x328)]==_0x3d01f2['symbol']),_0x502187=_0x599d1b['coin'],_0x17f5c7=_0x477591=>{const _0x17670c=_0x11557e,_0x395885=currentCoins[_0x17670c(0x295)](_0x1b85c0=>_0x1b85c0['symbol']==_0x3d01f2[_0x17670c(0x328)]);if(_0x395885)_0x395885[_0x17670c(0x280)]=_0x477591;};let _0x54629a=![];for(const _0x3b8ca9 of lastOrders){const _0x39e3a1=0x64,_0x4661dc=0x1388;let _0x294a6f=0x0;while(!_0x3b8ca9[_0x11557e(0x24c)]&&_0x294a6f*_0x39e3a1<_0x4661dc){_0x294a6f++,await sleep(_0x39e3a1);}if(_0x294a6f>0x0)logger[_0x11557e(0x216)]('Waited\x20'+_0x294a6f*_0x39e3a1/0x3e8+'\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed');_0x3b8ca9['orderId']==_0x3d01f2['id']&&(_0x54629a=!![]);}if(_0x5deed9==_0x11557e(0x21d)){_0x17f5c7(_0x11557e(0x21d));if(_0x3d01f2[_0x11557e(0x318)]>0x0&&_0x3d01f2[_0x11557e(0x318)]<_0x3d01f2[_0x11557e(0x20c)]){if(_0x54629a){setBlockTransactionDetection(!![]),logger[_0x11557e(0x216)](_0x11557e(0x321)+_0x3d01f2[_0x11557e(0x318)]+_0x11557e(0x1d3)+_0x3d01f2['id']);const _0x395ac9=await getCoins(balanceUpdateDelay,undefined,undefined,_0x502187);[currentCoins,currentCoinsAll]=_0x395ac9,setBlockTransactionDetection(![]);}else logger[_0x11557e(0x216)](_0x11557e(0x321)+_0x3d01f2['filled']+_0x11557e(0x2cc)+_0x3d01f2['id']),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay);}}else{if(_0x5deed9==_0x11557e(0x379)){_0x17f5c7(_0x11557e(0x379)),lastOrders=lastOrders[_0x11557e(0x233)](_0x59a9c7=>_0x59a9c7[_0x11557e(0x328)]!=_0x3d01f2['symbol']);const _0x4ba72e=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x4ba72e,setBlockTransactionDetection(![]),await getOpenOrders(),handleOpenOrders();}else{if(_0x5deed9=='closed'){if(lastOrders)for(const _0x2335cb of lastOrders){if(_0x2335cb[_0x11557e(0x24c)]==_0x3d01f2['id']){logger[_0x11557e(0x216)](_0x11557e(0x35c)+_0x3d01f2['id']),_0x54629a=!![];if(_0x2335cb['filled']==0x0){setBlockTransactionDetection(!![]),logger[_0x11557e(0x216)](_0x11557e(0x271)+_0x3d01f2['id']);if(_0x3d01f2[_0x11557e(0x1cf)])_0x2335cb[_0x11557e(0x29f)]=_0x3d01f2[_0x11557e(0x1cf)];else{if(_0x3d01f2['price'])_0x2335cb['price']=_0x3d01f2[_0x11557e(0x29f)];else{}}_0x2335cb[_0x11557e(0x318)]=_0x3d01f2['filled'],updateHighestFee(_0x2335cb);const _0x5f360b=await getCoins(balanceUpdateDelay,undefined,undefined,_0x502187);[currentCoins,currentCoinsAll]=_0x5f360b,setBlockTransactionDetection(![]),await validateOrders(),_0x17f5c7(_0x11557e(0x318)),_0x2335cb[_0x11557e(0x264)]={'currency':_0x3d01f2[_0x11557e(0x264)]?_0x3d01f2['fee'][_0x11557e(0x282)]:null,'cost':_0x3d01f2['fee']?_0x3d01f2[_0x11557e(0x264)][_0x11557e(0x354)]:0x0},await updateCoinResults(_0x2335cb);}}}!_0x54629a&&(logger[_0x11557e(0x216)](_0x11557e(0x1c1)+_0x3d01f2['id']),_0x17f5c7(_0x11557e(0x318)),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay),await updateOpenOrders(),handleOpenOrders());}}}if(lastBalances){let _0x4fc75a=JSON['parse'](lastBalances['portfolio']);const _0x17e0ce=_0x4fc75a['find'](_0x48fd83=>_0x48fd83[_0x11557e(0x328)]==_0x3d01f2[_0x11557e(0x328)]);if(_0x17e0ce){if(_0x5deed9==_0x11557e(0x21d))_0x17e0ce[_0x11557e(0x280)]=_0x17e0ce['orderstatus']==_0x11557e(0x318)?'filled':_0x11557e(0x21d);else{if(_0x5deed9==_0x11557e(0x379))_0x17e0ce[_0x11557e(0x280)]=_0x17e0ce[_0x11557e(0x280)]=='filled'?_0x11557e(0x318):'canceled';else _0x5deed9==_0x11557e(0x227)&&(_0x17e0ce['orderstatus']=_0x11557e(0x318));}}lastBalances={...lastBalances,'portfolio':JSON[_0x11557e(0x21c)](_0x4fc75a)},proxyEmit(_0x11557e(0x34e),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x2a942a=_0x387443;await getOpenOrders();let _0x54d4bd=![];currentCoins[_0x2a942a(0x2b7)](_0x102138=>{const _0x1cf173=_0x2a942a;_0x54d4bd=allOpenOrders[_0x1cf173(0x295)](_0x48dffc=>_0x48dffc['symbol']==_0x102138[_0x1cf173(0x328)]),_0x102138[_0x1cf173(0x280)]=_0x54d4bd?_0x1cf173(0x21d):_0x1cf173(0x302);});}async function fetchBalance(_0x351e35=!![]){const _0x49675b=_0x387443;let _0x19aa33,_0x1448eb;try{return _0x19aa33=await exchange[_0x49675b(0x2f3)](),_0x1448eb=_0x19aa33[_0x49675b(0x2e1)],_0x1448eb;}catch(_0xca564b){return!_0x351e35?handleErrorNoStop(_0xca564b,_0x49675b(0x28c)):await handleError(_0xca564b,_0x49675b(0x28c)),![];}}async function getCoins(_0x820ce6=0x0,_0x2b610a=!![],_0x1b57d2=config[_0x387443(0x2a8)],_0x3e9ac1){const _0x3bf2d3=_0x387443;let _0x1e279a=[],_0x2fb28a=[],_0x2cbfbf=[],_0x4f8489;if(_0x820ce6)await sleep(_0x820ce6);if(botPaused)return[currentCoins,currentCoinsAll];let _0x41da60=![],_0xf49696=0x0,_0x47c9a1,_0x30ad19;_0x3e9ac1&&(_0x47c9a1=currentCoins[_0x3bf2d3(0x295)](_0x1dfdae=>_0x1dfdae[_0x3bf2d3(0x27f)]==_0x3e9ac1),_0x47c9a1&&(_0x30ad19=_0x47c9a1[_0x3bf2d3(0x333)],delete _0x47c9a1[_0x3bf2d3(0x333)]));while(!_0x41da60){_0x4f8489=await fetchBalance(_0x2b610a);if(_0x4f8489){if(_0x3e9ac1){if(_0x4f8489[_0x3e9ac1]!=_0x30ad19)logger[_0x3bf2d3(0x216)]('Valid\x20balance\x20for\x20'+_0x3e9ac1+':\x20'+_0x4f8489[_0x3e9ac1]+'\x20('+_0x30ad19+')'),_0x41da60=!![];else{logger[_0x3bf2d3(0x216)](_0x3bf2d3(0x237)+_0x3e9ac1+':\x20'+_0x4f8489[_0x3e9ac1]+'\x20('+_0x30ad19+')'),_0xf49696++;if(_0xf49696<balanceUpdateRetries)await sleep(balanceUpdateDelay);else{logger[_0x3bf2d3(0x216)](_0x3bf2d3(0x1c5)+_0xf49696+_0x3bf2d3(0x316));break;}}}else break;}else return[currentCoins,currentCoinsAll];}for(const [_0x229ada,_0x4ddf6e]of Object['entries'](_0x4f8489)){_0x2cbfbf[_0x3bf2d3(0x2dd)](_0x229ada);}config[_0x3bf2d3(0x241)][_0x3bf2d3(0x2b7)](_0x4e16d7=>{const _0x1b0874=_0x3bf2d3;!_0x2cbfbf[_0x1b0874(0x353)](_0x4e16d7[_0x1b0874(0x27f)])&&(_0x4f8489[_0x4e16d7[_0x1b0874(0x27f)]]=0x0);});if(_0x1b57d2=='')for(const [_0x4753cd,_0x5e888c]of Object[_0x3bf2d3(0x2e7)](_0x4f8489)){_0x5e888c!=0x0&&_0x1e279a[_0x3bf2d3(0x2dd)]({'coin':_0x4753cd});}else for(const [_0x4a848d,_0x538da5]of Object[_0x3bf2d3(0x2e7)](_0x4f8489)){const _0x5e2421=config[_0x3bf2d3(0x241)][_0x3bf2d3(0x295)](_0x3069bb=>_0x3069bb[_0x3bf2d3(0x27f)]==_0x4a848d),_0x2a1ebd=_0x4a848d+'/'+_0x1b57d2,_0x5f3e0e=_0x1b57d2+'/'+_0x4a848d,_0x474a81=currentCoins[_0x3bf2d3(0x295)](_0x2d1e10=>_0x2d1e10[_0x3bf2d3(0x27f)]==_0x4a848d);if((_0x538da5!=0x0||_0x5e2421)&&(allSymbols['includes'](_0x2a1ebd)||_0x4a848d==_0x1b57d2))_0x474a81?_0x1e279a[_0x3bf2d3(0x2dd)]({..._0x474a81,'number':Math[_0x3bf2d3(0x28f)](_0x538da5+(_0x5e2421&&_0x5e2421[_0x3bf2d3(0x247)]||0x0),0x0)}):_0x1e279a[_0x3bf2d3(0x2dd)]({'coin':_0x4a848d,'symbol':_0x2a1ebd,'reverse':![],'number':Math[_0x3bf2d3(0x28f)](_0x538da5+(_0x5e2421&&_0x5e2421[_0x3bf2d3(0x247)]||0x0),0x0),'orderstatus':'none'});else{if((_0x538da5!=0x0||_0x5e2421)&&allSymbols[_0x3bf2d3(0x353)](_0x5f3e0e))_0x474a81?_0x1e279a[_0x3bf2d3(0x2dd)]({..._0x474a81,'number':Math[_0x3bf2d3(0x28f)](_0x538da5+(_0x5e2421&&_0x5e2421[_0x3bf2d3(0x247)]||0x0),0x0)}):_0x1e279a[_0x3bf2d3(0x2dd)]({'coin':_0x4a848d,'symbol':_0x5f3e0e,'reverse':!![],'number':Math[_0x3bf2d3(0x28f)](_0x538da5+(_0x5e2421&&_0x5e2421[_0x3bf2d3(0x247)]||0x0),0x0),'orderstatus':'none'});else _0x5e2421&&_0x1e279a[_0x3bf2d3(0x2dd)]({'coin':_0x5e2421[_0x3bf2d3(0x27f)],'symbol':_0x5e2421[_0x3bf2d3(0x328)],'reverse':_0x5e2421[_0x3bf2d3(0x25b)],'number':0x0,'orderstatus':_0x3bf2d3(0x302)});}}return _0x1e279a[_0x3bf2d3(0x2f7)]((_0x5e5a5c,_0x280428)=>_0x5e5a5c[_0x3bf2d3(0x352)]<_0x280428['delta']?0x1:_0x280428[_0x3bf2d3(0x352)]<_0x5e5a5c[_0x3bf2d3(0x352)]?-0x1:0x0),_0x2fb28a=cloneDeep(_0x1e279a),_0x1e279a=_0x1e279a[_0x3bf2d3(0x233)](_0x52b267=>{const _0x3d162f=_0x3bf2d3,_0x111417=config[_0x3d162f(0x241)][_0x3d162f(0x295)](_0xf93c61=>_0xf93c61[_0x3d162f(0x27f)]==_0x52b267[_0x3d162f(0x27f)]);return _0x111417&&!_0x111417[_0x3d162f(0x30a)];}),[_0x1e279a,_0x2fb28a];}async function getCoinNumber(_0x27a742){const _0x35aef1=_0x387443;let _0x5ea57d;try{const _0x79f4d1=await exchange[_0x35aef1(0x2f3)]();_0x5ea57d=_0x79f4d1[_0x35aef1(0x2e1)][_0x27a742];}catch(_0x2c883f){await handleError(_0x2c883f,_0x35aef1(0x244));}return _0x5ea57d;}async function getOpenOrders(){const _0x417506=_0x387443;let _0x1ad369;allOpenOrders=[];try{for(const _0x4b6cf3 of config[_0x417506(0x241)]){!_0x4b6cf3[_0x417506(0x30a)]&&_0x4b6cf3[_0x417506(0x27f)]!=config['basecoin']&&(_0x1ad369=await exchange['fetchOpenOrders'](_0x4b6cf3['symbol']),_0x1ad369['length']>0x0&&allOpenOrders[_0x417506(0x2dd)](_0x1ad369[0x0]));}}catch(_0x36d6f7){await handleError(_0x36d6f7,_0x417506(0x2e5));}}async function handleOpenOrders(_0x2526f7=0x0){const _0x573a3b=_0x387443;allOpenOrders[_0x573a3b(0x310)]==0x0&&lockOrders==ORDERS[_0x573a3b(0x30c)]&&allOrdersPlaced&&(_0x2526f7==0x0?(logger['debug']('1\x20-\x20Handle\x20open\x20orders'),_0x2526f7++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x573a3b(0x216)](_0x573a3b(0x2be)),validateOrders(_0x573a3b(0x31c))));}async function testAPI(_0x4e298f){const _0x3ad08f=_0x387443;logger[_0x3ad08f(0x216)]('Test\x20API');const _0x18fb58=ccxt['pro'][_0x4e298f[_0x3ad08f(0x269)][_0x3ad08f(0x2db)]()],_0x5356aa=new _0x18fb58({'apiKey':_0x4e298f[_0x3ad08f(0x20a)],'secret':_0x4e298f[_0x3ad08f(0x2a3)],'options':{'defaultType':'spot'}});if(_0x4e298f[_0x3ad08f(0x1d8)])_0x5356aa['password']=_0x4e298f[_0x3ad08f(0x1d8)];try{await _0x5356aa['fetchBalance']();}catch(_0x120f84){logger['debug'](_0x3ad08f(0x24a)+_0x120f84[_0x3ad08f(0x26c)]());throw _0x120f84;}}function cloneDeep(_0x59dc06){const _0x4bd84f=_0x387443;return JSON[_0x4bd84f(0x27e)](JSON[_0x4bd84f(0x21c)](_0x59dc06));}async function getPortfolio(_0x1df9a2){const _0x43abb1=_0x387443;let _0x307799=[],_0x4af473=[],_0x280fda=[],_0x199499;_0x1df9a2['apiKey']=decryptRSA(secure[_0x43abb1(0x1fe)],_0x1df9a2[_0x43abb1(0x20a)]),_0x1df9a2['apiSecret']=decryptRSA(secure[_0x43abb1(0x1fe)],_0x1df9a2[_0x43abb1(0x2a3)]);if(_0x1df9a2[_0x43abb1(0x1d8)])_0x1df9a2[_0x43abb1(0x1d8)]=decryptRSA(secure['privateKey'],_0x1df9a2[_0x43abb1(0x1d8)]);if(_0x1df9a2[_0x43abb1(0x20a)]!==_0x43abb1(0x201)||_0x1df9a2['apiSecret']!==_0x43abb1(0x201)||_0x1df9a2[_0x43abb1(0x1d8)]&&_0x1df9a2['apiPassword']!=='************'){if(config[_0x43abb1(0x269)]){if(_0x1df9a2[_0x43abb1(0x20a)]==_0x43abb1(0x201))_0x1df9a2[_0x43abb1(0x20a)]=config['apiKey'];if(_0x1df9a2[_0x43abb1(0x2a3)]==_0x43abb1(0x201))_0x1df9a2[_0x43abb1(0x2a3)]=config[_0x43abb1(0x2a3)];if(_0x1df9a2[_0x43abb1(0x1d8)]==_0x43abb1(0x201))_0x1df9a2[_0x43abb1(0x1d8)]=config[_0x43abb1(0x1d8)];}try{if(_0x1df9a2[_0x43abb1(0x219)])await testAPI(_0x1df9a2);}catch(_0x144c01){if(_0x144c01[_0x43abb1(0x26c)]()[_0x43abb1(0x353)](_0x43abb1(0x2a2))){logHistory(_0x43abb1(0x32f),'Invalid\x20API\x20details,\x20please\x20try\x20again\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange'),logHistory(_0x43abb1(0x32f),'Error\x20details:\x20'+_0x144c01['toString']()),proxyEmit(_0x43abb1(0x242),![]);return;}else{if(_0x144c01[_0x43abb1(0x26c)]()[_0x43abb1(0x353)](_0x43abb1(0x273))){logHistory('error',_0x43abb1(0x23d)),logHistory(_0x43abb1(0x32f),'Error\x20details:\x20'+_0x144c01[_0x43abb1(0x26c)]()),proxyEmit(_0x43abb1(0x242),![]);return;}else{logHistory('error',_0x43abb1(0x274)+_0x144c01[_0x43abb1(0x26c)]()),logger[_0x43abb1(0x216)](_0x43abb1(0x254),_0x144c01),proxyEmit(_0x43abb1(0x242),![]);return;}}}exchange?updateExchange(_0x1df9a2[_0x43abb1(0x20a)],_0x1df9a2['apiSecret'],_0x1df9a2['apiPassword']):await initExchange(_0x1df9a2[_0x43abb1(0x269)],_0x1df9a2['apiKey'],_0x1df9a2[_0x43abb1(0x2a3)],_0x1df9a2[_0x43abb1(0x1d8)]);await loadSymbols();const _0x1fa3dc=await getCoins(0x0,![],_0x1df9a2[_0x43abb1(0x2a8)]);_0x280fda=cloneDeep(_0x1fa3dc[0x1]);}else{const _0x5e8c7c=await getCoins();_0x280fda=cloneDeep(_0x5e8c7c[0x1]);}if(_0x1df9a2[_0x43abb1(0x2a8)]=='')proxyEmit('portfolio1',!![]),proxyEmit(_0x43abb1(0x210),_0x280fda);else{_0x280fda['forEach'](_0xaeeeed=>{const _0x294a89=_0x43abb1;if(_0xaeeeed[_0x294a89(0x27f)]!=_0x1df9a2[_0x294a89(0x2a8)]&&allSymbols[_0x294a89(0x353)](_0xaeeeed['symbol']))_0x307799[_0x294a89(0x2dd)](_0xaeeeed[_0x294a89(0x328)]);});if(_0x307799[_0x43abb1(0x310)]==0x0)logHistory(_0x43abb1(0x32f),'Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot');else{try{_0x4af473=await getTickers(_0x307799);}catch(_0x4ced82){logHistory(_0x43abb1(0x32f),'Unknown\x20error\x20-\x20check\x20logs'),logger['debug'](_0x43abb1(0x254),_0x4ced82),proxyEmit(_0x43abb1(0x242),![]);return;}_0x280fda[_0x43abb1(0x2b7)](_0x1a6882=>{const _0x3bd34e=_0x43abb1;_0x1a6882['coin']!=_0x1df9a2[_0x3bd34e(0x2a8)]?_0x4af473[_0x1a6882[_0x3bd34e(0x328)]]?_0x199499=_0x1a6882[_0x3bd34e(0x25b)]?0x1/_0x4af473[_0x1a6882['symbol']][_0x3bd34e(0x308)]:_0x4af473[_0x1a6882[_0x3bd34e(0x328)]][_0x3bd34e(0x308)]:_0x199499=0x0:_0x199499=0x1,_0x1a6882[_0x3bd34e(0x29f)]=formatResult(_0x199499,0x8);}),await getMarketCap(_0x280fda),proxyEmit(_0x43abb1(0x242),!![]),proxyEmit(_0x43abb1(0x210),_0x280fda);}}}function truncateTradeAmount(_0x48860d,_0x25d9e4){const _0x55511a=_0x387443;let _0x57bbf3=0x0;try{_0x57bbf3=exchange[_0x55511a(0x311)](_0x48860d,_0x25d9e4);}catch(_0x3cbba2){}return _0x57bbf3;}function checkMinimums(_0x1b2a63){const _0x3c5e2d=_0x387443;let _0x4c4b33=!![];const _0x460e1a=!_0x1b2a63['reverse']?markets[_0x1b2a63['symbol']][_0x3c5e2d(0x304)][_0x3c5e2d(0x20c)][_0x3c5e2d(0x221)]:markets[_0x1b2a63[_0x3c5e2d(0x328)]][_0x3c5e2d(0x304)][_0x3c5e2d(0x354)][_0x3c5e2d(0x221)],_0xda4c09=!_0x1b2a63['reverse']?markets[_0x1b2a63[_0x3c5e2d(0x328)]]['limits'][_0x3c5e2d(0x354)][_0x3c5e2d(0x221)]:markets[_0x1b2a63[_0x3c5e2d(0x328)]][_0x3c5e2d(0x304)]['amount']['min'],_0x387ee7=truncateTradeAmount(_0x1b2a63[_0x3c5e2d(0x328)],_0x1b2a63[_0x3c5e2d(0x2e2)]);_0x1b2a63['trade']=_0x387ee7;if(Math[_0x3c5e2d(0x33d)](_0x387ee7)<_0x460e1a)_0x4c4b33=![];if(Math['abs'](_0x387ee7)*_0x1b2a63[_0x3c5e2d(0x308)]<_0xda4c09)_0x4c4b33=![];if(_0x1b2a63[_0x3c5e2d(0x2ec)]==_0x3c5e2d(0x2bc)){let _0x2a66fb=config['portfolio'][_0x3c5e2d(0x295)](_0x28d945=>_0x28d945[_0x3c5e2d(0x27f)]==_0x1b2a63[_0x3c5e2d(0x27f)]);if(_0x2a66fb[_0x3c5e2d(0x247)]>0x0){if(Math['abs'](_0x387ee7)>_0x1b2a63[_0x3c5e2d(0x32c)]-_0x2a66fb[_0x3c5e2d(0x247)])_0x4c4b33=![];}else{if(Math[_0x3c5e2d(0x33d)](_0x387ee7)>_0x1b2a63[_0x3c5e2d(0x32c)])_0x4c4b33=![];}}if(_0x1b2a63[_0x3c5e2d(0x2ec)]==_0x3c5e2d(0x1f2)){let _0x2e3af6=config[_0x3c5e2d(0x241)][_0x3c5e2d(0x295)](_0x5b4d04=>_0x5b4d04[_0x3c5e2d(0x27f)]==config[_0x3c5e2d(0x2a8)]),_0x63981d=currentCoins[_0x3c5e2d(0x295)](_0x8a8223=>_0x8a8223[_0x3c5e2d(0x27f)]==config[_0x3c5e2d(0x2a8)]);if(_0x2e3af6[_0x3c5e2d(0x247)]>0x0){if(Math['abs'](_0x387ee7)*_0x1b2a63[_0x3c5e2d(0x308)]>_0x63981d[_0x3c5e2d(0x32c)]-_0x2e3af6['offset'])_0x4c4b33=![];}else{if(Math['abs'](_0x387ee7)*_0x1b2a63['last']>_0x63981d[_0x3c5e2d(0x32c)])_0x4c4b33=![];}}return _0x4c4b33;}async function getBalances(_0x526009=!![]){const _0x3baf2f=_0x387443;if(botPaused)return;let _0x384997=0x0,_0x2dd0fb;const _0xe1494f=config[_0x3baf2f(0x28b)];if(config[_0x3baf2f(0x2a4)]&&config[_0x3baf2f(0x283)]<0x0)await validate24hChanges();currentCoins[_0x3baf2f(0x2b7)](_0x5a72cb=>{const _0x1689b2=_0x3baf2f;if(_0x5a72cb['coin']!=config[_0x1689b2(0x2a8)]){let _0x252992=gTicker[noslash(_0x5a72cb[_0x1689b2(0x328)])];_0x2dd0fb=_0x5a72cb[_0x1689b2(0x25b)]?0x1/_0x252992:_0x252992;}else _0x2dd0fb=0x1;let _0x6f171a=_0x5a72cb[_0x1689b2(0x32c)]*_0x2dd0fb;_0x384997+=_0x6f171a,_0x5a72cb[_0x1689b2(0x308)]=formatResult(Number(_0x2dd0fb),0x8),_0x5a72cb['value']=_0x6f171a;}),currentCoins[_0x3baf2f(0x2b7)](_0x419fec=>{const _0x1418a7=_0x3baf2f;let _0x505065=config['portfolio'][_0x1418a7(0x295)](_0x17c1d9=>_0x17c1d9['coin']==_0x419fec[_0x1418a7(0x27f)]),_0x109d7d=Number(_0x505065[_0x1418a7(0x22e)]),_0x9eb723=_0x419fec[_0x1418a7(0x256)]/_0x384997*0x64,_0x30a1a3=_0x109d7d*_0x384997/0x64/_0x419fec['last']-_0x419fec[_0x1418a7(0x32c)];_0x419fec['distribution']=formatResult(_0x9eb723,0x3),_0x419fec[_0x1418a7(0x35d)]=formatResult(_0x109d7d,0x3),_0x419fec[_0x1418a7(0x2e2)]=formatResult(_0x30a1a3,0x8),_0x419fec[_0x1418a7(0x2ec)]='',_0x419fec['valid']=![];if(_0x419fec['coin']!=config['basecoin']){if(_0x419fec['distribution']>_0x109d7d)_0x419fec[_0x1418a7(0x2ec)]='sell',_0x419fec[_0x1418a7(0x2d9)]=checkMinimums(_0x419fec);else _0x419fec['distribution']<_0x109d7d&&(_0x419fec[_0x1418a7(0x2ec)]='buy',_0x419fec[_0x1418a7(0x2d9)]=checkMinimums(_0x419fec));}_0x419fec[_0x1418a7(0x352)]=_0x419fec[_0x1418a7(0x22e)]/_0x419fec[_0x1418a7(0x35d)]-0x1;if(_0x419fec[_0x1418a7(0x280)]==_0x1418a7(0x318)||_0x419fec[_0x1418a7(0x280)]==_0x1418a7(0x379))_0x419fec[_0x1418a7(0x280)]=_0x1418a7(0x302);}),currentCoins['sort']((_0x13d6e9,_0x5a2909)=>_0x13d6e9[_0x3baf2f(0x352)]<_0x5a2909['delta']?0x1:_0x5a2909[_0x3baf2f(0x352)]<_0x13d6e9['delta']?-0x1:0x0);const _0x32a5bb=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x32a5bb['eur'],'usd':_0x32a5bb[_0x3baf2f(0x30d)],'portfolio':JSON[_0x3baf2f(0x21c)](currentCoins),'threshold':_0xe1494f},proxyEmit(_0x3baf2f(0x34e),{'serverversion':serverversion,'balances':lastBalances});if(_0x526009){if(config[_0x3baf2f(0x2a4)])headlessMode({'portfolio':currentCoins,'threshold':_0xe1494f});else lockOrders==ORDERS['UNLOCKED']&&!coolingDown&&notifyBalance({'portfolio':currentCoins,'threshold':_0xe1494f});}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x1d225b=getNormalizedPerformance();getStartingBalances(_0x1d225b),emitPerformance(_0x1d225b);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x19d0f7=_0x387443;if(!lastBalances)return;let _0x4292a6=[],_0x50c453,_0x72011b=JSON[_0x19d0f7(0x27e)](lastBalances[_0x19d0f7(0x241)]);_0x72011b[_0x19d0f7(0x2f7)]((_0x4b7cde,_0x494554)=>_0x4b7cde[_0x19d0f7(0x27f)]>_0x494554['coin']?0x1:_0x494554['coin']>_0x4b7cde[_0x19d0f7(0x27f)]?-0x1:0x0),_0x72011b[_0x19d0f7(0x2b7)](_0x45c580=>{const _0x1a07f0=_0x19d0f7;let _0x4e7db5={'coin':_0x45c580['coin'],'number':_0x45c580[_0x1a07f0(0x32c)],'price':_0x45c580[_0x1a07f0(0x308)]};_0x4292a6[_0x1a07f0(0x2dd)](_0x4e7db5);});const _0x2dc044=await getFiat();_0x50c453={'date':lastBalances[_0x19d0f7(0x215)][_0x19d0f7(0x2ea)]('\x20')[0x0],'eur':_0x2dc044[_0x19d0f7(0x217)],'usd':_0x2dc044[_0x19d0f7(0x30d)],'coins':_0x4292a6};let _0x845547=dbPerformance[_0x19d0f7(0x1c2)](_0x19d0f7(0x21e))[_0x19d0f7(0x295)]({'date':_0x50c453[_0x19d0f7(0x2ff)]})[_0x19d0f7(0x256)]();_0x845547?_0x50c453[_0x19d0f7(0x2ff)]!=config['startdate']&&dbPerformance['get'](_0x19d0f7(0x21e))[_0x19d0f7(0x295)]({'date':_0x50c453[_0x19d0f7(0x2ff)]})[_0x19d0f7(0x30e)](_0x50c453)['write']():dbPerformance[_0x19d0f7(0x1c2)]('data')['push'](_0x50c453)[_0x19d0f7(0x1f1)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x1e727b=_0x387443;let _0xd7c536=[];if(dbPerformance[_0x1e727b(0x323)](_0x1e727b(0x21e))['value']()){let _0x2efabc=dbPerformance[_0x1e727b(0x1c2)](_0x1e727b(0x21e))[_0x1e727b(0x1ff)]()[_0x1e727b(0x233)](_0x1546cf=>{const _0x1c62f3=_0x1e727b;if(_0x1546cf[_0x1c62f3(0x1f4)][_0x1c62f3(0x310)]==0x0)return![];else return!![];})[_0x1e727b(0x2a0)](_0x1e727b(0x2ff))[_0x1e727b(0x256)](),_0x216794=[...config['liquidity']];_0x216794[_0x1e727b(0x2f7)]((_0x4d6443,_0x6bfe85)=>_0x4d6443[_0x1e727b(0x2ff)]>_0x6bfe85['date']?-0x1:_0x6bfe85['date']>_0x4d6443[_0x1e727b(0x2ff)]?0x1:0x0);let _0x52f146=0x1,_0x29e058=[],_0x13dd0d=0x0;_0x2efabc[_0x1e727b(0x2b3)]()[_0x1e727b(0x25b)]()['forEach']((_0x333ab2,_0x37f3af)=>{const _0x435a90=_0x1e727b;if(_0x216794[_0x13dd0d]){if(_0x2efabc[_0x2efabc[_0x435a90(0x310)]-_0x37f3af]&&_0x216794[_0x13dd0d][_0x435a90(0x2ff)]==_0x2efabc[_0x2efabc[_0x435a90(0x310)]-_0x37f3af]['date']){if(_0x37f3af<_0x2efabc[_0x435a90(0x310)]){let _0x407317=0x0,_0x42aa80=0x0;_0x2efabc[_0x2efabc[_0x435a90(0x310)]-_0x37f3af]['coins'][_0x435a90(0x2b7)](_0x4df1fd=>{const _0x159f1d=_0x435a90;_0x42aa80+=_0x4df1fd[_0x159f1d(0x32c)]*_0x4df1fd['price'];}),_0x216794[_0x13dd0d]['changes']['forEach'](_0x2c221e=>{const _0x590f7b=_0x435a90;_0x407317+=_0x2c221e[_0x590f7b(0x32c)]*_0x2c221e[_0x590f7b(0x29f)];}),_0x52f146*=_0x407317/(_0x42aa80-_0x407317)+0x1;}_0x13dd0d++;}}let _0x3043f4=0x0;_0x333ab2[_0x435a90(0x1f4)]['forEach'](_0x408155=>{const _0x2598ed=_0x435a90;_0x3043f4+=_0x408155[_0x2598ed(0x32c)]*_0x408155[_0x2598ed(0x29f)];}),_0x29e058[_0x2efabc['length']-_0x37f3af-0x1]=_0x3043f4*(_0x52f146-0x1);});let _0x38c5f=[];_0x216794=[...config[_0x1e727b(0x223)]]||[];let _0x280ec7=0x0;_0x13dd0d=0x0,_0x2efabc['forEach']((_0x22a84d,_0xf15606)=>{const _0x4289de=_0x1e727b;if(_0x216794[_0x13dd0d]){const _0x381f20=fns[_0x4289de(0x27e)](_0x216794[_0x13dd0d]['date'],'yyyy/MM/dd',new Date()),_0x4b7d3a=fns[_0x4289de(0x27e)](_0x22a84d[_0x4289de(0x2ff)],_0x4289de(0x21b),new Date());if(fns[_0x4289de(0x2ab)](_0x381f20,_0x4b7d3a)){let _0x1bedae=0x0;_0x216794[_0x13dd0d]['changes'][_0x4289de(0x2b7)](_0x226bb8=>{const _0x482a78=_0x4289de;!_0x38c5f[_0x226bb8[_0x482a78(0x27f)]]?_0x38c5f[_0x226bb8[_0x482a78(0x27f)]]=_0x226bb8[_0x482a78(0x32c)]:(_0x1bedae=_0x38c5f[_0x226bb8[_0x482a78(0x27f)]],_0x38c5f[_0x226bb8[_0x482a78(0x27f)]]+=_0x226bb8['number']);const _0x4d13bf=_0x22a84d['coins'][_0x482a78(0x295)](_0x417338=>_0x417338[_0x482a78(0x27f)]==_0x226bb8[_0x482a78(0x27f)]);(!_0x4d13bf||_0x4d13bf[_0x482a78(0x32c)]==0x0)&&(_0x280ec7+=(-_0x226bb8[_0x482a78(0x32c)]-_0x1bedae)*_0x226bb8[_0x482a78(0x29f)]);}),_0x13dd0d++;}}_0x22a84d[_0x4289de(0x1f4)]['forEach']((_0x5051f8,_0x5c4d23)=>{const _0x59a005=_0x4289de;_0x38c5f[_0x5051f8['coin']]&&(_0x5051f8[_0x59a005(0x322)]=_0x38c5f[_0x5051f8[_0x59a005(0x27f)]]);}),_0xd7c536[_0x4289de(0x2dd)]({'date':_0x22a84d['date'],'eur':_0x22a84d['eur'],'usd':_0x22a84d[_0x4289de(0x30d)],'offset':_0x29e058[_0xf15606],'netoffset':_0x280ec7,'coins':_0x22a84d[_0x4289de(0x1f4)]});});}return _0xd7c536;}function emitPerformance(_0x1bc4f0){const _0x2a3d33=_0x387443;_0x1bc4f0[_0x2a3d33(0x310)]!==0x0?(proxyEmit(_0x2a3d33(0x36f),_0x1bc4f0),lastPerformanceEmitted=getDate()):proxyEmit(_0x2a3d33(0x36f),[]);}function getPerf(_0x1fea57,_0x6f63e4){const _0xce3fca=_0x387443;let _0x387a0c=0x0,_0x1ef076=0x0,_0x22887f=0x0;_0x1fea57[_0xce3fca(0x1f4)][_0xce3fca(0x2b7)](_0x3cc15d=>{const _0x858e81=_0xce3fca;_0x387a0c+=_0x3cc15d[_0x858e81(0x32c)]*_0x3cc15d['price'];});_0x6f63e4&&(_0x387a0c+=_0x1fea57[_0xce3fca(0x247)]);if(config[_0xce3fca(0x2a8)]===_0xce3fca(0x2df)||config['basecoin']===_0xce3fca(0x313)||config[_0xce3fca(0x2a8)]===_0xce3fca(0x32a))_0x1ef076=_0x387a0c*_0x1fea57[_0xce3fca(0x217)],_0x22887f=_0x387a0c*_0x1fea57['usd'];else{if(usdBasecoins[_0xce3fca(0x353)](config[_0xce3fca(0x2a8)]))_0x1ef076=_0x387a0c*_0x1fea57[_0xce3fca(0x217)]/_0x1fea57[_0xce3fca(0x30d)],_0x22887f=_0x387a0c;else config[_0xce3fca(0x2a8)]===_0xce3fca(0x36b)&&(_0x1ef076=_0x387a0c,_0x22887f=_0x387a0c*_0x1fea57[_0xce3fca(0x30d)]/_0x1fea57['eur']);}return[_0x387a0c,_0x1ef076,_0x22887f];}function getKPIs(_0x586ddd,_0x5d6aa8='EUR'){const _0x12ef87=_0x387443,_0xa69cb5=config['basecoin'],_0x2fea10=lastBalances,_0x2cdb84=currentCoins,_0x39d647=getNormalizedPerformance(),_0xf91d63=_0x586ddd===_0x12ef87(0x2a8)?_0xa69cb5:_0x586ddd==='fiat'||_0x586ddd===_0x12ef87(0x2f2)?_0x5d6aa8:_0x12ef87(0x204)+_0xa69cb5,_0xbf84ec=_0x586ddd==='net-basecoin'?'Net\x20effect':_0x586ddd===_0x12ef87(0x2f2)?_0x12ef87(0x32d):_0xf91d63+_0x12ef87(0x363),_0x15ae82=_0x586ddd===_0x12ef87(0x2e3)||_0x586ddd===_0x12ef87(0x2f2)?'Net\x20effect':_0xf91d63+'\x20change';let _0x4c2ac3=0x0;_0x2cdb84[_0x12ef87(0x2b7)](_0xd80f91=>{const _0xacce3b=_0x12ef87;_0x4c2ac3+=_0xd80f91[_0xacce3b(0x32c)]*_0xd80f91[_0xacce3b(0x308)];});if(_0x586ddd===_0x12ef87(0x1f9)||_0x586ddd===_0x12ef87(0x2f2)){if(_0xa69cb5===_0x12ef87(0x2df)||_0xa69cb5===_0x12ef87(0x313)||_0xa69cb5===_0x12ef87(0x32a))_0x4c2ac3=_0x4c2ac3*(_0x5d6aa8===_0x12ef87(0x36b)?_0x2fea10[_0x12ef87(0x217)]:_0x2fea10[_0x12ef87(0x30d)]);else{if(usdBasecoins[_0x12ef87(0x353)](_0xa69cb5))_0x4c2ac3=_0x4c2ac3*(_0x5d6aa8===_0x12ef87(0x36b)?_0x2fea10['eur']/_0x2fea10[_0x12ef87(0x30d)]:0x1);else _0xa69cb5===_0x12ef87(0x36b)&&(_0x4c2ac3=_0x4c2ac3*(_0x5d6aa8===_0x12ef87(0x36b)?0x1:_0x2fea10[_0x12ef87(0x30d)]/_0x2fea10[_0x12ef87(0x217)]));}}let _0x598f83;if(_0x4c2ac3!==0x0){if(_0x586ddd===_0x12ef87(0x2a8))_0x598f83=(_0x4c2ac3/startingBalances[_0x12ef87(0x2a8)]-0x1)*0x64;else{if(_0x5d6aa8===_0x12ef87(0x36b))_0x598f83=(_0x4c2ac3/startingBalances['eur']-0x1)*0x64;else _0x598f83=(_0x4c2ac3/startingBalances[_0x12ef87(0x30d)]-0x1)*0x64;}let _0x1db402=0x0;if(startingBalances[_0x12ef87(0x1f4)])_0x2cdb84[_0x12ef87(0x2b7)](_0x45b828=>{const _0x521f38=_0x12ef87;let _0x4d5b49=startingBalances[_0x521f38(0x1f4)]['find'](_0x1b27d=>_0x1b27d['coin']===_0x45b828[_0x521f38(0x27f)]);if(_0x4d5b49&&_0x4d5b49['coin']&&_0x45b828[_0x521f38(0x32c)]!==0x0)_0x1db402+=_0x4d5b49[_0x521f38(0x32c)]*_0x45b828['last'];});let _0x3d178d=0x0;if(_0x39d647[_0x12ef87(0x310)]!==0x0){let _0xf574a4=_0x39d647[_0x39d647['length']-0x1];_0x3d178d=_0xf574a4[_0x12ef87(0x2c7)];}_0x1db402-=_0x3d178d;_0x586ddd===_0x12ef87(0x2e3)&&(_0x598f83=(_0x4c2ac3-_0x1db402)/startingBalances[_0x12ef87(0x2a8)]*0x64,_0x4c2ac3=_0x4c2ac3-_0x1db402);if(_0x586ddd==='net-fiat'){let _0x2a4fbf=_0x5d6aa8===_0x12ef87(0x36b)?startingBalances[_0x12ef87(0x217)]:startingBalances[_0x12ef87(0x30d)];if(_0xa69cb5===_0x12ef87(0x2df)||_0xa69cb5==='ETH'||_0xa69cb5===_0x12ef87(0x32a))_0x1db402=_0x5d6aa8===_0x12ef87(0x36b)?_0x1db402*_0x2fea10[_0x12ef87(0x217)]:_0x1db402*_0x2fea10[_0x12ef87(0x30d)];else{if(usdBasecoins[_0x12ef87(0x353)](_0xa69cb5))_0x1db402=_0x5d6aa8===_0x12ef87(0x36b)?_0x1db402*_0x2fea10[_0x12ef87(0x217)]/_0x2fea10['usd']:_0x1db402;else _0xa69cb5===_0x12ef87(0x36b)&&(_0x1db402=_0x5d6aa8==='EUR'?_0x1db402:_0x1db402*_0x2fea10[_0x12ef87(0x30d)]/_0x2fea10[_0x12ef87(0x217)]);}_0x598f83=(_0x4c2ac3-_0x1db402)/_0x2a4fbf*0x64,_0x4c2ac3=_0x4c2ac3-_0x1db402;}if(_0x598f83){if(_0x598f83<0x64)_0x598f83=_0x598f83[_0x12ef87(0x1ce)](0x2);else{if(_0x598f83<0x3e8)_0x598f83=_0x598f83[_0x12ef87(0x1ce)](0x1);else _0x598f83=_0x598f83[_0x12ef87(0x1ce)](0x0);}}else _0x598f83=Number('0')[_0x12ef87(0x1ce)](0x2);if(_0x4c2ac3){if(Math[_0x12ef87(0x33d)](_0x4c2ac3)<0.000001)_0x4c2ac3=_0x4c2ac3[_0x12ef87(0x1ce)](0x2);else{if(Math['abs'](_0x4c2ac3)<0.1)_0x4c2ac3=_0x4c2ac3[_0x12ef87(0x1ce)](0x6);else{if(Math[_0x12ef87(0x33d)](_0x4c2ac3)<0x1)_0x4c2ac3=_0x4c2ac3[_0x12ef87(0x1ce)](0x5);else{if(Math[_0x12ef87(0x33d)](_0x4c2ac3)<0xa)_0x4c2ac3=_0x4c2ac3[_0x12ef87(0x1ce)](0x4);else{if(Math[_0x12ef87(0x33d)](_0x4c2ac3)<0x64)_0x4c2ac3=_0x4c2ac3[_0x12ef87(0x1ce)](0x3);else{if(Math[_0x12ef87(0x33d)](_0x4c2ac3)<0x3e8)_0x4c2ac3=_0x4c2ac3[_0x12ef87(0x1ce)](0x2);else _0x4c2ac3=_0x4c2ac3[_0x12ef87(0x1ce)](0x2);}}}}}}else _0x4c2ac3=Number('0')[_0x12ef87(0x1ce)](0x2);}else _0x598f83=Number('0')[_0x12ef87(0x1ce)](0x2);return{'value':_0x4c2ac3,'change':_0x598f83,'leftTxt':_0xbf84ec,'rightTxt':_0x15ae82};}async function getStartingBalances(_0x3d15b4,_0x4477e1=!![]){const _0x34957f=_0x387443;if(_0x3d15b4[_0x34957f(0x310)]!==0x0){const [_0x2f212c,_0x503aea,_0x26b6a9]=getPerf(_0x3d15b4[0x0],!![]);let _0x3a73c6=[];config[_0x34957f(0x241)]['forEach'](_0x336f61=>{const _0x34f97e=_0x34957f;let _0x181362=0x0,_0x446da4;config[_0x34f97e(0x223)]['forEach'](_0x4a1450=>{const _0x5d1c69=_0x34f97e;let _0x5aee6e=_0x4a1450[_0x5d1c69(0x1d7)]['find'](_0x32ff4e=>_0x32ff4e[_0x5d1c69(0x27f)]==_0x336f61[_0x5d1c69(0x27f)]);if(_0x5aee6e){_0x181362+=_0x5aee6e[_0x5d1c69(0x32c)];if(!_0x446da4)_0x446da4=_0x5aee6e[_0x5d1c69(0x29f)];}}),_0x3a73c6[_0x34f97e(0x2dd)]({'coin':_0x336f61[_0x34f97e(0x27f)],'number':_0x181362,'initialprice':_0x446da4});});const _0x2bea26={'basecoin':_0x2f212c,'eur':_0x503aea,'usd':_0x26b6a9,'coins':_0x3a73c6};if(_0x4477e1)proxyEmit(_0x34957f(0x2cf),_0x2bea26);startingBalances=_0x2bea26;}}function headlessMode(_0x508f36){const _0x4e9d3a=_0x387443;let _0x20c032=_0x508f36['portfolio'],_0x45eace=_0x508f36[_0x4e9d3a(0x28b)],_0x1cf11=[];for(let _0x5af0ee of _0x20c032){if(_0x5af0ee['coin']!=config['basecoin']){if(_0x5af0ee[_0x4e9d3a(0x352)]>=_0x45eace/0x64){if(_0x5af0ee[_0x4e9d3a(0x2d9)])_0x1cf11['push'](_0x5af0ee);}else{if(_0x5af0ee['delta']<=-_0x45eace/0x64){if(_0x5af0ee[_0x4e9d3a(0x2d9)])_0x1cf11['push'](_0x5af0ee);}}}}_0x1cf11[_0x4e9d3a(0x310)]>0x0&&placeOrder(_0x1cf11);}function notifyBalance(_0x474bc3){const _0x2d5c90=_0x387443;let _0x2f20ac=_0x474bc3['portfolio'],_0x483e08=_0x474bc3[_0x2d5c90(0x28b)],_0x343d76=[];for(let _0x560c96 of _0x2f20ac){if(_0x560c96['coin']!=config[_0x2d5c90(0x2a8)]){if(_0x560c96[_0x2d5c90(0x352)]>=_0x483e08/0x64){if(_0x560c96['valid'])_0x343d76['push'](_0x560c96);}else{if(_0x560c96['delta']<=-_0x483e08/0x64){if(_0x560c96[_0x2d5c90(0x2d9)])_0x343d76['push'](_0x560c96);}}}}if(_0x343d76[_0x2d5c90(0x310)]>0x0){let _0x4361bb=_0x343d76[_0x2d5c90(0x2d5)](_0x89507c=>_0x89507c['coin']);_0x4361bb[_0x2d5c90(0x2f7)]();let _0x133560=_0x4361bb['join'](',\x20');if(!lastCoinsToBalance)logHistory(_0x2d5c90(0x285),_0x2d5c90(0x294));lastCoinsToBalance=_0x133560;}}function symbolToCoin(_0x2fe4c9){const _0x128f9a=_0x387443;let _0x3cf749;if(_0x2fe4c9[_0x128f9a(0x353)]('/'+config[_0x128f9a(0x2a8)]))_0x3cf749=_0x2fe4c9['replace']('/'+config[_0x128f9a(0x2a8)],'');if(_0x2fe4c9[_0x128f9a(0x353)](config['basecoin']+'/'))_0x3cf749=_0x2fe4c9[_0x128f9a(0x33e)](config[_0x128f9a(0x2a8)]+'/','');return _0x3cf749;}function setLockOrders(_0x15df71){const _0x546e9d=_0x387443;lockOrders=_0x15df71,logger['debug'](_0x546e9d(0x202)+Object[_0x546e9d(0x2fb)](ORDERS)[lockOrders]);}async function unlockOrders(_0x3c6e42=![]){const _0x3624c3=_0x387443;if(allOrdersPlaced&&lockOrders==ORDERS[_0x3624c3(0x30c)]){setLockOrders(ORDERS[_0x3624c3(0x276)]);if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);if(_0x3c6e42){const _0x1e53ce=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x1e53ce,setBlockTransactionDetection(![]);}validateOrdersState=_0x3624c3(0x322),persistOpenOrders([]),setLockOrders(ORDERS[_0x3624c3(0x37a)]);}}async function validateOrders(_0x434204){const _0x3e337a=_0x387443;if(_0x434204)validateOrdersState=_0x434204;logger[_0x3e337a(0x216)](_0x3e337a(0x2ed)+validateOrdersState+'\x20|\x20lock\x20orders:\x20'+Object[_0x3e337a(0x2fb)](ORDERS)[lockOrders]);let _0x7f9318=[],_0x508d7d=config[_0x3e337a(0x20f)]=='market'?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config['timeout']*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x3e337a(0x30c)])return;logger[_0x3e337a(0x216)](_0x3e337a(0x26f)+validateOrdersState);for(let _0x30ea43=lastOrders[_0x3e337a(0x310)]-0x1;_0x30ea43>=0x0;_0x30ea43--){let _0x3e5417=lastOrders[_0x30ea43],_0x2438a3=![];_0x3e5417['filled']>0x0&&(_0x2438a3=!![]),_0x7f9318[_0x3e337a(0x2dd)](_0x2438a3),_0x2438a3&&config[_0x3e337a(0x20f)]!=_0x3e337a(0x1fd)&&logHistory(_0x3e337a(0x26b),_0x3e337a(0x332)+_0x3e5417[_0x3e337a(0x328)]+'\x20'+_0x3e5417[_0x3e337a(0x2ec)]+'\x20#'+formatResult(_0x3e5417[_0x3e337a(0x318)],0x8)+'\x20@'+formatResult(_0x3e5417[_0x3e337a(0x29f)],0x8)),_0x2438a3&&lastOrders['splice'](_0x30ea43,0x1);}persistOpenOrders(lastOrders);const _0x335c7e=coolingDown?_0x3e337a(0x292):_0x3e337a(0x2e8);if(validateOrdersState==_0x3e337a(0x322)){validateOrdersState=_0x3e337a(0x1e7);if(_0x7f9318[_0x3e337a(0x353)](![])){}else await unlockOrders();}else{if(validateOrdersState==_0x3e337a(0x1e7)){if(_0x7f9318['includes'](![])){}else await unlockOrders();}else{if(validateOrdersState=='final')_0x7f9318[_0x3e337a(0x353)](![])&&(config[_0x3e337a(0x20f)]==_0x3e337a(0x1fd)?logHistory(_0x3e337a(0x2fd),_0x3e337a(0x27b)+Math['round'](_0x508d7d*validateOrderInterval/0xea60)+_0x3e337a(0x2dc)+_0x335c7e):(await cancelOrders(),logHistory('success',_0x3e337a(0x336)+Math[_0x3e337a(0x263)](_0x508d7d*validateOrderInterval/0xea60)+_0x3e337a(0x2dc)+_0x335c7e))),await unlockOrders(!![]);else{if(validateOrdersState==_0x3e337a(0x31c)){if(config[_0x3e337a(0x20f)]!=_0x3e337a(0x1fd))logHistory(_0x3e337a(0x2fd),_0x3e337a(0x24e)+_0x335c7e);await unlockOrders(!![]);}}}}}async function cancelOrders(){lastOrders['forEach'](async _0x50966e=>{const _0x36e246=_0x38dd;try{const _0x333838=await exchange[_0x36e246(0x367)](_0x50966e[_0x36e246(0x24c)],_0x50966e[_0x36e246(0x328)]);}catch(_0x3db950){if(_0x3db950['toString']()['includes'](_0x36e246(0x1ea))){}else await handleError(_0x3db950,_0x36e246(0x20d));}});}async function initCoinResults(_0x52eeb3){const _0x2d8782=_0x387443;_0x52eeb3?logger[_0x2d8782(0x216)]('Resetting\x20coin\x20results:\x20'+_0x52eeb3):logger[_0x2d8782(0x216)](_0x2d8782(0x2c5)),config['portfolio'][_0x2d8782(0x2b7)](_0x2ec849=>{const _0x26ae2b=_0x2d8782;if(!_0x2ec849[_0x26ae2b(0x30a)]&&_0x2ec849[_0x26ae2b(0x27f)]!=config['basecoin']){const _0x28b4a2=currentCoins[_0x26ae2b(0x295)](_0x13da99=>_0x13da99[_0x26ae2b(0x27f)]==_0x2ec849[_0x26ae2b(0x27f)]),_0x36644d=gTicker[noslash(_0x2ec849[_0x26ae2b(0x328)])];let _0x7f8bea=_0x28b4a2?_0x28b4a2[_0x26ae2b(0x32c)]:null,_0x2efa23=_0x2ec849[_0x26ae2b(0x25b)]?0x1/_0x36644d:_0x36644d,_0x467aca;config[_0x26ae2b(0x223)]['forEach'](_0x56b48c=>{const _0x3abb88=_0x26ae2b;!_0x467aca&&(_0x467aca=_0x56b48c[_0x3abb88(0x1d7)][_0x3abb88(0x295)](_0xef415c=>_0xef415c[_0x3abb88(0x27f)]==_0x2ec849[_0x3abb88(0x27f)]),_0x467aca&&(_0x7f8bea=_0x467aca[_0x3abb88(0x32c)],_0x2efa23=_0x467aca[_0x3abb88(0x29f)]));});let _0x31e2e3=dbCoinResults[_0x26ae2b(0x1c2)](_0x26ae2b(0x1f4))[_0x26ae2b(0x295)]({'coin':_0x2ec849[_0x26ae2b(0x27f)]})[_0x26ae2b(0x256)]();if(!_0x31e2e3){const _0xd442c={'coin':_0x2ec849[_0x26ae2b(0x27f)],'number':_0x7f8bea,'breakeven':_0x2efa23,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x26ae2b(0x1c2)](_0x26ae2b(0x1f4))['push'](_0xd442c)['write']();}else{if(_0x52eeb3&&_0x2ec849[_0x26ae2b(0x27f)]==_0x52eeb3){const _0x31db11={'coin':_0x2ec849[_0x26ae2b(0x27f)],'number':_0x7f8bea,'breakeven':_0x2efa23,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get']('coins')[_0x26ae2b(0x295)]({'coin':_0x2ec849[_0x26ae2b(0x27f)]})[_0x26ae2b(0x30e)](_0x31db11)['write']();}}}});}async function updateCoinResults(_0x19d650,_0x34995a=![]){const _0x2a5291=_0x387443;let _0x5e8880,_0xf7282b,_0xb3dbe9,_0x3092fd,_0xb5823,_0x3de3cf,_0x28b655=dbCoinResults[_0x2a5291(0x1c2)](_0x2a5291(0x1f4))[_0x2a5291(0x295)]({'coin':_0x19d650[_0x2a5291(0x27f)]})[_0x2a5291(0x256)](),_0x5e9237=![];_0x28b655&&Object[_0x2a5291(0x2e7)](_0x28b655)[_0x2a5291(0x2b7)](([_0x3aefcd,_0x250ddb])=>{if(_0x250ddb==null)_0x5e9237=!![];});(!_0x28b655||_0x5e9237)&&(await initCoinResults(_0x19d650['coin']),_0x28b655=dbCoinResults[_0x2a5291(0x1c2)]('coins')[_0x2a5291(0x295)]({'coin':_0x19d650[_0x2a5291(0x27f)]})[_0x2a5291(0x256)]());_0x19d650[_0x2a5291(0x25b)]&&(_0x3de3cf={'filled':_0x19d650[_0x2a5291(0x318)]*_0x19d650[_0x2a5291(0x29f)],'amount':_0x19d650['filled']*_0x19d650[_0x2a5291(0x29f)],'side':_0x19d650[_0x2a5291(0x2ec)]==_0x2a5291(0x2bc)?_0x2a5291(0x1f2):_0x2a5291(0x2bc),'price':0x1/_0x19d650['price']},_0x19d650={..._0x19d650,..._0x3de3cf});_0x34995a?_0xf7282b=_0x19d650['side']==_0x2a5291(0x1f2)?_0x28b655[_0x2a5291(0x32c)]+_0x19d650[_0x2a5291(0x318)]:_0x28b655['number']-_0x19d650[_0x2a5291(0x318)]:_0xf7282b=await getCoinNumber(_0x19d650[_0x2a5291(0x27f)]);if(_0x19d650['fee']&&_0x19d650[_0x2a5291(0x264)][_0x2a5291(0x282)]==config[_0x2a5291(0x2a8)])_0x5e8880=Number(_0x19d650[_0x2a5291(0x264)][_0x2a5291(0x354)]);else{if(_0x19d650[_0x2a5291(0x264)]&&_0x19d650[_0x2a5291(0x264)][_0x2a5291(0x282)]==_0x2a5291(0x297)&&!_0x34995a&&config[_0x2a5291(0x2a8)]!='PAXG')_0x5e8880=Number(_0x19d650[_0x2a5291(0x264)][_0x2a5291(0x354)])*gTicker['BNB'+config[_0x2a5291(0x2a8)]];else _0x5e8880=defaultFee*_0x19d650['filled']*_0x19d650[_0x2a5291(0x29f)];}_0x19d650[_0x2a5291(0x2ec)]==_0x2a5291(0x1f2)?(_0xb3dbe9=_0xf7282b!=0x0?(_0x28b655[_0x2a5291(0x1f5)]*_0x28b655[_0x2a5291(0x32c)]+_0x19d650[_0x2a5291(0x29f)]*(_0xf7282b-_0x28b655[_0x2a5291(0x32c)])+_0x5e8880)/_0xf7282b:0x0,_0x3092fd=_0x28b655[_0x2a5291(0x329)]):(_0xb3dbe9=_0xf7282b!=0x0?(_0x28b655['breakeven']*_0x28b655[_0x2a5291(0x32c)]-_0x19d650[_0x2a5291(0x29f)]*(_0x28b655[_0x2a5291(0x32c)]-_0xf7282b)+_0x5e8880)/_0xf7282b:0x0,_0x3092fd=_0x28b655[_0x2a5291(0x329)]+(_0x19d650[_0x2a5291(0x29f)]-_0x28b655[_0x2a5291(0x1f5)])*_0x19d650[_0x2a5291(0x318)]);_0xb5823=(_0x19d650[_0x2a5291(0x29f)]-_0xb3dbe9-_0x5e8880/_0x19d650[_0x2a5291(0x318)])*_0xf7282b;let _0x128851={'coin':_0x19d650[_0x2a5291(0x27f)],'number':_0xf7282b,'breakeven':formatResult(_0xb3dbe9,0x8),'realized':formatResult(_0x3092fd,0x8),'unrealized':formatResult(_0xb5823,0x8),'fees':formatResult(_0x28b655[_0x2a5291(0x1ca)]+_0x5e8880,0x8),'sells':_0x19d650[_0x2a5291(0x2ec)]=='sell'?_0x28b655['sells']+0x1:_0x28b655[_0x2a5291(0x31a)],'buys':_0x19d650[_0x2a5291(0x2ec)]==_0x2a5291(0x1f2)?_0x28b655['buys']+0x1:_0x28b655[_0x2a5291(0x23f)]};dbCoinResults['get']('coins')[_0x2a5291(0x295)]({'coin':_0x19d650[_0x2a5291(0x27f)]})[_0x2a5291(0x30e)](_0x128851)['write']();if(!_0x34995a){if(_0x19d650[_0x2a5291(0x264)]&&_0x19d650['fee'][_0x2a5291(0x282)]==_0x2a5291(0x297)){const _0x4ede20=currentCoins[_0x2a5291(0x295)](_0x545b5d=>_0x545b5d['coin']==_0x2a5291(0x297));if(_0x4ede20){let _0x4eea8f=dbCoinResults['get'](_0x2a5291(0x1f4))['find']({'coin':_0x2a5291(0x297)})[_0x2a5291(0x256)]();_0x128851={..._0x4eea8f,'number':_0x4ede20[_0x2a5291(0x32c)]},dbCoinResults[_0x2a5291(0x1c2)]('coins')[_0x2a5291(0x295)]({'coin':_0x2a5291(0x297)})[_0x2a5291(0x30e)](_0x128851)[_0x2a5291(0x1f1)]();}}}}async function placeOrder(_0x2c47c9){const _0x337046=_0x387443,_0x3dc965=config[_0x337046(0x20f)]==_0x337046(0x1fd)?_0x337046(0x1fd):_0x337046(0x1eb);if(lockOrders==ORDERS[_0x337046(0x37a)]&&!coolingDown){setLockOrders(ORDERS['LOCKED']);while(transactionDetectionOngoing){await sleep(0x64);}logger[_0x337046(0x216)](_0x337046(0x346)+_0x2c47c9['map'](_0xc2efa4=>_0xc2efa4['coin'])[_0x337046(0x2ca)](',\x20')),lastCoinsToBalance='',allOrdersPlaced=![],validateOrdersState=_0x337046(0x322);let _0x1aacab=![];lastOrders=[];const _0xa830c6=config[_0x337046(0x28b)];for(const _0x9a6190 of _0x2c47c9){let _0x256544,_0x2e9590,_0x33ba8f,_0x15a28c,_0x26f8e4,_0x37e194=_0x9a6190['symbol'];logger[_0x337046(0x216)]('Trigger:\x20'+_0x9a6190[_0x337046(0x27f)]+'\x20'+_0x9a6190[_0x337046(0x32c)]+'\x20'+_0x9a6190[_0x337046(0x308)]+'\x20'+_0x9a6190['distribution']+'%\x20'+_0x9a6190[_0x337046(0x35d)]+'%\x20'+(0x64*_0x9a6190['delta'])[_0x337046(0x1ce)](0x2)+_0x337046(0x2ac)+_0xa830c6[_0x337046(0x1ce)](0x2)+'%)');const _0xe6501f=currentCoins['find'](_0x3850f8=>_0x3850f8[_0x337046(0x27f)]==_0x9a6190[_0x337046(0x27f)]);_0xe6501f&&(_0xe6501f[_0x337046(0x333)]=_0x9a6190[_0x337046(0x32c)]);try{const _0x557aa3=await exchange[_0x337046(0x206)](_0x37e194);_0x256544=_0x9a6190[_0x337046(0x25b)]?0x1/_0x9a6190['last']:_0x9a6190['last'],_0x2e9590=_0x557aa3['bid'],_0x33ba8f=_0x557aa3[_0x337046(0x2e9)];_0x9a6190[_0x337046(0x25b)]?(_0x15a28c=_0x9a6190[_0x337046(0x2ec)]==_0x337046(0x1f2)?_0x337046(0x2bc):_0x337046(0x1f2),_0x26f8e4=Math[_0x337046(0x33d)](_0x9a6190['trade'])/_0x256544):(_0x15a28c=_0x9a6190['side'],_0x26f8e4=Math[_0x337046(0x33d)](_0x9a6190[_0x337046(0x2e2)]));_0x3dc965==_0x337046(0x1eb)&&(config[_0x337046(0x20f)]==_0x337046(0x25f)&&(_0x256544=_0x15a28c==_0x337046(0x1f2)?_0x2e9590:_0x33ba8f),config[_0x337046(0x20f)]==_0x337046(0x373)&&(_0x256544=_0x15a28c=='buy'?_0x33ba8f:_0x2e9590));_0x26f8e4=formatResult(_0x26f8e4,0x8),_0x256544=formatResult(_0x256544,0x8);const _0x536bca=_0x15a28c=='sell'?config['emojisell']?String[_0x337046(0x31f)]('0x'+config[_0x337046(0x365)])+'\x20':'':config['emojibuy']?String['fromCodePoint']('0x'+config['emojibuy'])+'\x20':'',_0xa4c691=_0x3dc965=='market'?_0x337046(0x376):config[_0x337046(0x20f)]==_0x337046(0x25f)?_0x337046(0x2c8):_0x337046(0x1c9),_0x249f36=(Math[_0x337046(0x340)](Math[_0x337046(0x286)]()*0x35a4e900)+0x5f5e100)['toString']();lastOrders[_0x337046(0x2dd)]({'customId':_0x249f36,'symbol':_0x37e194,'coin':_0x9a6190[_0x337046(0x27f)],'amount':_0x26f8e4,'price':_0x256544,'side':_0x15a28c,'reverse':_0x9a6190['reverse'],'filled':0x0});if(_0x3dc965==_0x337046(0x1fd))logHistory(_0x337046(0x26b),''+_0x536bca+_0xa4c691+_0x337046(0x261)+_0x37e194+'\x20'+_0x15a28c+'\x20#'+formatResult(_0x26f8e4,0x8)+'\x20@'+formatResult(_0x256544,0x8));else logHistory(_0x337046(0x26b),''+_0x536bca+_0xa4c691+_0x337046(0x261)+_0x37e194+'\x20'+_0x15a28c+'\x20#'+formatResult(_0x26f8e4,0x8)+'\x20@'+formatResult(_0x256544,0x8));let _0x1213df;_0x3dc965==_0x337046(0x1fd)?_0x15a28c=='buy'&&[_0x337046(0x380),_0x337046(0x375),'Cex',_0x337046(0x265),'Huobipro']['includes'](config[_0x337046(0x269)])?_0x1213df=await exchange[_0x337046(0x290)](_0x37e194,_0x3dc965,_0x15a28c,_0x26f8e4,_0x256544):_0x1213df=await exchange[_0x337046(0x290)](_0x37e194,_0x3dc965,_0x15a28c,_0x26f8e4,undefined):_0x1213df=await exchange['createOrder'](_0x37e194,_0x3dc965,_0x15a28c,_0x26f8e4,_0x256544);logger['debug'](_0x337046(0x1d0)+_0x1213df['id']+'\x20|\x20Custom\x20ID:\x20'+_0x249f36);const _0xe77133=lastOrders[_0x337046(0x310)]-0x1;if(_0xe77133>=0x0&&lastOrders[_0xe77133][_0x337046(0x2a9)]==_0x249f36){lastOrders[_0xe77133][_0x337046(0x24c)]=_0x1213df['id'];if(_0x1213df[_0x337046(0x20c)])lastOrders[_0xe77133][_0x337046(0x20c)]=_0x1213df['amount'];if(_0x1213df[_0x337046(0x29f)])lastOrders[_0xe77133][_0x337046(0x29f)]=_0x1213df[_0x337046(0x29f)];lastOrders[_0xe77133]['fee']=_0x1213df[_0x337046(0x264)];}if(config['cooldown']!=0x0){let _0x11f69b=null;if(cooldownTracker['length']==config['cooldown']-0x1)_0x11f69b=cooldownTracker['shift']();const _0x3d656d=getTimeStamp();cooldownTracker[_0x337046(0x2dd)](_0x3d656d);if(_0x11f69b){const _0x4e40e9=fns[_0x337046(0x28d)](new Date(_0x3d656d),new Date(_0x11f69b));if(_0x4e40e9<cooldownInterval){logHistory(_0x337046(0x32f),_0x337046(0x344)+config[_0x337046(0x33f)]+_0x337046(0x30b)+cooldownInterval/0x3c+_0x337046(0x281)+cooldownPeriod/(0xe10*0x3e8)+'\x20hour'),coolingDown=!![];break;}}}}catch(_0x2d09c9){if(_0x2d09c9[_0x337046(0x26c)]()[_0x337046(0x353)]('MIN_NOTIONAL'))lastOrders=lastOrders[_0x337046(0x233)](_0x5e455f=>_0x5e455f[_0x337046(0x328)]!=_0x37e194),logHistory(_0x337046(0x32f),_0x337046(0x272)+_0x37e194),_0x1aacab=!![];else{if(_0x2d09c9[_0x337046(0x26c)]()['includes']('Invalid\x20quantity'))lastOrders=lastOrders['filter'](_0x1f6d1b=>_0x1f6d1b[_0x337046(0x328)]!=_0x37e194),logHistory(_0x337046(0x32f),_0x337046(0x34a)+_0x37e194),_0x1aacab=!![];else{if(_0x2d09c9[_0x337046(0x26c)]()[_0x337046(0x353)](_0x337046(0x299)))lastOrders=lastOrders[_0x337046(0x233)](_0x18c35a=>_0x18c35a[_0x337046(0x328)]!=_0x37e194),logHistory(_0x337046(0x32f),_0x337046(0x2c2)+_0x37e194),logger[_0x337046(0x216)](_0x2d09c9),_0x1aacab=!![];else _0x2d09c9[_0x337046(0x26c)]()['includes'](_0x337046(0x20e))?(lastOrders=lastOrders['filter'](_0x512652=>_0x512652[_0x337046(0x328)]!=_0x37e194),logHistory(_0x337046(0x32f),'Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x37e194),_0x1aacab=!![]):(lastOrders=lastOrders[_0x337046(0x233)](_0x36db26=>_0x36db26['symbol']!=_0x37e194),await handleError(_0x2d09c9,_0x337046(0x325),_0x37e194));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x337046(0x310)]>0x0){const _0x22d1eb=config[_0x337046(0x20f)]=='market'?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x54d79e=_0x337046;validateOrders(_0x54d79e(0x1ef));},_0x22d1eb);}else unlockOrders();_0x1aacab&&config['headless']&&(logHistory(_0x337046(0x32f),_0x337046(0x1c0)+pauseBotMsg),await pauseBot(pauseBotInterval)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory('success',_0x337046(0x377)));}else{if(coolingDown)!config['headless']&&logHistory(_0x337046(0x32f),'Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode');else lockOrders!=ORDERS['UNLOCKED']&&(!config[_0x337046(0x2a4)]&&(config[_0x337046(0x20f)]==_0x337046(0x1fd)?logHistory(_0x337046(0x32f),_0x337046(0x2b2)):logHistory(_0x337046(0x32f),_0x337046(0x1fa))));}}function persistOpenOrders(_0x6fa3b5){const _0x114490=_0x387443,_0x86bb53={...config,'openOrders':_0x6fa3b5};let _0x225f63=dbConfig[_0x114490(0x1c2)]('bot')[_0x114490(0x295)]({'botID':botID})[_0x114490(0x256)]();_0x225f63&&dbConfig[_0x114490(0x1c2)](_0x114490(0x341))[_0x114490(0x295)]({'botID':botID})['assign'](_0x86bb53)[_0x114490(0x1f1)]();}function restoreOrders(){const _0x1fa724=_0x387443;let _0x27f25c;config[_0x1fa724(0x34d)]&&allOpenOrders[_0x1fa724(0x2b7)](_0x1a7b49=>{const _0x2326bd=_0x1fa724,_0x2f2673=config[_0x2326bd(0x34d)][_0x2326bd(0x295)](_0x5c2688=>_0x5c2688['orderId']==_0x1a7b49['id']);_0x2f2673&&(lastOrders[_0x2326bd(0x2dd)](_0x2f2673),_0x27f25c=_0x1a7b49[_0x2326bd(0x296)]);});if(lastOrders[_0x1fa724(0x310)]>0x0){setLockOrders(ORDERS[_0x1fa724(0x30c)]),validateOrdersState=_0x1fa724(0x1e7),allOrdersPlaced=!![];const _0x2fca1a=new Date()[_0x1fa724(0x229)](),_0x2df20d=config[_0x1fa724(0x20f)]=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0x1fa724(0x26d)]*0x3c*0x3e8;if(_0x27f25c+_0x2df20d>_0x2fca1a){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x4ddec3=_0x1fa724;validateOrders(_0x4ddec3(0x1ef));},_0x27f25c+_0x2df20d-_0x2fca1a);}else validateOrders(_0x1fa724(0x1ef));}}async function sendMetricsTelegram(){const _0x24ce31=_0x387443;if(!coinsLoaded){process['send']({'telegrammsg':'Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute'},_0x5329e2=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x47b460='';if(config[_0x24ce31(0x24d)])_0x47b460='<b>'+config[_0x24ce31(0x368)]+_0x24ce31(0x1e6);else _0x47b460=_0x24ce31(0x2a1)+botID+_0x24ce31(0x1e6);const _0x3093a7=getKPIs('basecoin'),_0x78c5d6=getKPIs(_0x24ce31(0x1f9),config[_0x24ce31(0x1f9)]),_0x128acb=getKPIs(_0x24ce31(0x2e3)),_0x2d87e1=getKPIs('net-fiat',config[_0x24ce31(0x1f9)]);_0x47b460+='<pre>',_0x47b460+=_0x3093a7[_0x24ce31(0x34c)]+_0x24ce31(0x260)+_0x3093a7[_0x24ce31(0x256)]+'\x0a',_0x47b460+=_0x3093a7[_0x24ce31(0x2e6)]+':\x20'+_0x3093a7['change']+'%\x0a',_0x47b460+=_0x78c5d6[_0x24ce31(0x34c)]+_0x24ce31(0x260)+_0x78c5d6[_0x24ce31(0x256)]+'\x0a',_0x47b460+=_0x78c5d6[_0x24ce31(0x2e6)]+':\x20'+_0x78c5d6[_0x24ce31(0x230)]+'%\x0a',_0x47b460+=_0x128acb['leftTxt']+':\x20'+_0x128acb[_0x24ce31(0x256)]+'\x20('+config[_0x24ce31(0x2a8)]+')\x0a',_0x47b460+=_0x128acb[_0x24ce31(0x2e6)]+':\x20'+_0x128acb['change']+_0x24ce31(0x2ac)+config[_0x24ce31(0x2a8)]+')\x0a',_0x47b460+=_0x2d87e1['leftTxt']+':\x20'+_0x2d87e1[_0x24ce31(0x256)]+'\x20('+config[_0x24ce31(0x1f9)]+')\x0a',_0x47b460+=_0x2d87e1[_0x24ce31(0x2e6)]+':\x20'+_0x2d87e1[_0x24ce31(0x230)]+'%\x20('+config[_0x24ce31(0x1f9)]+')\x0a',_0x47b460+=_0x24ce31(0x2aa),process[_0x24ce31(0x200)]({'telegrammsg':_0x47b460},_0x56ab83=>{});}async function sendPortfolioTelegram(){const _0xb3f2c0=_0x387443;if(!coinsLoaded||!currentCoins[0x0]['distribution']){process['send']({'telegrammsg':'Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute'},_0x423e97=>{});return;}let _0x16e162='';if(config['showname'])_0x16e162='<b>'+config['botname']+_0xb3f2c0(0x317);else _0x16e162=_0xb3f2c0(0x2a1)+botID+_0xb3f2c0(0x317);_0x16e162+=_0xb3f2c0(0x2ae),_0x16e162+=_0xb3f2c0(0x2f6),_0x16e162+=_0xb3f2c0(0x23c),_0x16e162+=_0xb3f2c0(0x2f6),currentCoins['forEach'](_0x2c0a2c=>{const _0x4c206b=_0xb3f2c0;_0x16e162+=_0x2c0a2c['coin'][_0x4c206b(0x2fe)](0x7)+'|\x20'+formatPad(_0x2c0a2c['distribution'],0x2,0x6)+'|\x20'+formatPad(_0x2c0a2c[_0x4c206b(0x35d)],0x2,0x6)+'|\x20'+formatPad(_0x2c0a2c[_0x4c206b(0x352)]*0x64,0x2,0x6)+'\x0a';}),_0x16e162+=_0xb3f2c0(0x2aa),process[_0xb3f2c0(0x200)]({'telegrammsg':_0x16e162},_0xf90aff=>{});}function formatPad(_0x4886f7,_0x38aa24,_0x30bbec){const _0x3e40cd=_0x387443,_0x1faf9a=formatResultString(_0x4886f7,_0x38aa24);return _0x1faf9a?_0x1faf9a[_0x3e40cd(0x1e8)](_0x30bbec):''['padStart'](_0x30bbec);}function logHistory(_0x353008,_0x3a27b1,_0x253600=''){const _0x1ec798=_0x387443;logger[_0x1ec798(0x2cd)](''+_0x3a27b1);let _0x5dd7c6={'time':getTimeStamp(),'type':_0x353008,'event':_0x3a27b1};dbLogs[_0x1ec798(0x1c2)](_0x1ec798(0x29a))[_0x1ec798(0x2dd)](_0x5dd7c6)[_0x1ec798(0x1f1)]();if(_0x253600=='')_0x253600=_0x3a27b1;proxyEmit(_0x1ec798(0x298),{'log':_0x5dd7c6,'summary':_0x253600}),process['send']({'telegram':{..._0x5dd7c6,'botname':config[_0x1ec798(0x368)],'showname':config['showname']}},_0x575357=>{});}function emitHistory(_0x21fcd3={}){const _0x9b4720=_0x387443;Object[_0x9b4720(0x2fb)](_0x21fcd3)[_0x9b4720(0x310)]==0x0&&(_0x21fcd3={'type':['order',_0x9b4720(0x298)],'event':'','page':0x1});if(_0x21fcd3[_0x9b4720(0x320)][_0x9b4720(0x353)]('event'))_0x21fcd3[_0x9b4720(0x320)][_0x9b4720(0x300)](_0x21fcd3[_0x9b4720(0x320)][_0x9b4720(0x255)]('event'),0x1,'error',_0x9b4720(0x285),_0x9b4720(0x2fd));if(dbLogs[_0x9b4720(0x323)]('logs')[_0x9b4720(0x256)]()){let _0x42b26c=dbLogs[_0x9b4720(0x1c2)](_0x9b4720(0x29a))[_0x9b4720(0x233)](_0x2e2341=>{const _0x34da61=_0x9b4720;if(_0x21fcd3[_0x34da61(0x320)][_0x34da61(0x310)]==0x0)return![];else return _0x21fcd3[_0x34da61(0x320)]['includes'](_0x2e2341['type']);})[_0x9b4720(0x233)](_0x2a45cb=>{const _0x2dfbff=_0x9b4720;if(_0x21fcd3[_0x2dfbff(0x298)]=='')return!![];else return _0x2a45cb[_0x2dfbff(0x298)][_0x2dfbff(0x2db)]()['includes'](_0x21fcd3[_0x2dfbff(0x298)][_0x2dfbff(0x2db)]());})[_0x9b4720(0x2a0)](_0x9b4720(0x215)),_0x51a6c5=_0x42b26c[_0x9b4720(0x256)]()['length'];_0x42b26c=_0x42b26c['reverse']()[_0x9b4720(0x2b3)]((_0x21fcd3[_0x9b4720(0x22f)]-0x1)*logPageSize,_0x21fcd3[_0x9b4720(0x22f)]*logPageSize-0x1)[_0x9b4720(0x25b)]()[_0x9b4720(0x256)](),proxyEmit(_0x9b4720(0x2f9),{'logs':_0x42b26c,'total':_0x51a6c5});}else proxyEmit(_0x9b4720(0x2f9),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x3f02b1){const _0x563cdb=_0x387443;if(dbLogs[_0x563cdb(0x323)](_0x563cdb(0x29a))['value']()){const _0x23d7a1=dbLogs[_0x563cdb(0x1c2)](_0x563cdb(0x29a))[_0x563cdb(0x2a0)](_0x563cdb(0x215))[_0x563cdb(0x233)](_0x2a5000=>{return _0x2a5000['type']=='order';})[_0x563cdb(0x256)]();dbLogs[_0x563cdb(0x1c2)](_0x563cdb(0x29a))[_0x563cdb(0x305)]()[_0x563cdb(0x1f1)](),dbLogs[_0x563cdb(0x1c2)](_0x563cdb(0x29a))[_0x563cdb(0x30e)](_0x23d7a1)[_0x563cdb(0x1f1)](),emitHistory(_0x3f02b1);}}async function pauseBot(_0x5d288a=pauseBotIntervalShort,_0x1d0807,_0x569b27,_0x477563=![]){const _0x6efb87=_0x387443,_0x2d130c=new Date()[_0x6efb87(0x229)]();if(!lastErrorShown||_0x2d130c-lastErrorShown>=_0x5d288a){lastErrorShown=_0x2d130c;if(!lastBotPause)lastBotPause=_0x2d130c,consecutivePauses=0x1;else{if(_0x2d130c-lastBotPause-_0x5d288a<0x5a*0x3e8){consecutivePauses++;if(consecutivePauses>maxPauseRetries){if(_0x477563){logHistory(_0x6efb87(0x32f),_0x1d0807+_0x6efb87(0x2f0)),await killBot();return;}else logHistory(_0x6efb87(0x32f),_0x1d0807+pauseBotMsg),_0x5d288a=pauseBotInterval;}}else consecutivePauses=0x1;lastBotPause=_0x2d130c;}_0x569b27?logger[_0x6efb87(0x216)]('('+consecutivePauses+')\x20'+_0x1d0807+_0x6efb87(0x31e),_0x569b27):logger[_0x6efb87(0x216)]('('+consecutivePauses+')\x20'+_0x1d0807);if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);await sleep(_0x5d288a),botPaused=![],_0x5d288a==pauseBotIntervalShort?resumeBot(!![]):resumeBot(![]);}}}async function killBot(){const _0x140439=_0x387443;botPaused=!![],await sleep(0x3e8),process[_0x140439(0x200)]({'stop':_0x140439(0x1cc)},_0xb97af0=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x301be9,_0x135560,_0x5db5d6=![]){const _0x3e5610=_0x387443;if(botPaused)return;let _0x3cb91a;const _0x477408=config[_0x3e5610(0x269)]||'Exchange';if(_0x135560)logger['debug'](_0x3e5610(0x29d)+_0x135560);const _0x5e344a=()=>{const _0x567db7=_0x3e5610;loading[_0x567db7(0x32f)]=!![],emitLoadingProgress();};if(_0x301be9['toString']()['includes']('API-key\x20format\x20invalid'))logHistory(_0x3e5610(0x32f),_0x477408+_0x3e5610(0x350)),_0x5e344a();else{if(_0x301be9[_0x3e5610(0x26c)]()[_0x3e5610(0x353)](_0x3e5610(0x314)))logHistory('error',_0x477408+_0x3e5610(0x1c6)),_0x5e344a();else{if(_0x301be9[_0x3e5610(0x26c)]()['includes'](_0x3e5610(0x2a2)))config[_0x3e5610(0x1d8)]?_0x3cb91a=_0x477408+'\x20API\x20key,\x20secret\x20or\x20password\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange':_0x3cb91a=_0x477408+_0x3e5610(0x35e),logHistory('error',_0x3cb91a+_0x3e5610(0x32b)),_0x5e344a();else{if(_0x301be9['toString']()[_0x3e5610(0x353)](_0x3e5610(0x273)))logHistory(_0x3e5610(0x32f),_0x477408+'\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)'),_0x5e344a();else{if(!_0x5db5d6)await handleError(_0x301be9,null);}}}}}async function handleError(_0x5a2114,_0x4b1443,_0x24d0c9=''){const _0xc16146=_0x387443;if(botPaused)return;let _0x5d3b81;const _0x4d7b3f=config['exchange']||'Exchange';if(_0x4b1443)logger['debug'](_0xc16146(0x29d)+_0x4b1443);if(_0x5a2114[_0xc16146(0x26c)]()[_0xc16146(0x353)](_0xc16146(0x275)))_0x5d3b81=_0x4d7b3f+_0xc16146(0x224),await pauseBot(undefined,_0x5d3b81,_0x5a2114);else{if(_0x5a2114[_0xc16146(0x26c)]()[_0xc16146(0x353)]('RateLimitExceeded'))_0x5d3b81=_0x4d7b3f+_0xc16146(0x2d2),await pauseBot(undefined,_0x5d3b81,_0x5a2114);else{if(_0x5a2114[_0xc16146(0x26c)]()[_0xc16146(0x353)]('ExchangeNotAvailable')||_0x5a2114['toString']()[_0xc16146(0x353)](_0xc16146(0x370)))_0x5d3b81=_0x4d7b3f+_0xc16146(0x2bf),await pauseBot(undefined,_0x5d3b81,_0x5a2114[_0xc16146(0x26c)]());else{if(_0x5a2114[_0xc16146(0x26c)]()['includes'](_0xc16146(0x2b6)))_0x5d3b81=_0x4d7b3f+_0xc16146(0x309),await pauseBot(undefined,_0x5d3b81,_0x5a2114['toString']());else{if(_0x5a2114['toString']()[_0xc16146(0x353)]('NetworkError:\x20connection\x20closed\x20by\x20remote\x20server'))_0x5d3b81=_0x4d7b3f+_0xc16146(0x2ce),await pauseBot(undefined,_0x5d3b81,_0x5a2114[_0xc16146(0x26c)]());else{if(_0x5a2114['toString']()[_0xc16146(0x2db)]()[_0xc16146(0x353)](_0xc16146(0x296))||_0x5a2114['toString']()[_0xc16146(0x2db)]()[_0xc16146(0x353)](_0xc16146(0x26e)))_0x5d3b81=_0xc16146(0x37e),await pauseBot(undefined,_0x5d3b81,_0x5a2114[_0xc16146(0x26c)]());else{if(_0x5a2114[_0xc16146(0x26c)]()['includes'](_0xc16146(0x366)))_0x5d3b81=_0x4d7b3f+'\x20rejected\x20your\x20API\x20request\x20(see:\x20hodlerhacks.com/fix/4)',await pauseBot(undefined,_0x5d3b81,_0x5a2114['toString']());else{if(_0x5a2114 instanceof ccxt[_0xc16146(0x288)])_0x5d3b81=_0x4d7b3f+_0xc16146(0x289)+_0x5a2114[_0xc16146(0x26c)](),logger[_0xc16146(0x216)](_0xc16146(0x364),_0x5a2114),await pauseBot(undefined,_0x5d3b81,_0x5a2114);else{if(_0x5a2114['toString']()[_0xc16146(0x353)]('API-key\x20format\x20invalid'))logHistory(_0xc16146(0x32f),_0x4d7b3f+'\x20API\x20key\x20is\x20invalid'),logHistory(_0xc16146(0x32f),_0xc16146(0x246)),await killBot();else{if(_0x5a2114[_0xc16146(0x26c)]()[_0xc16146(0x353)](_0xc16146(0x314)))logHistory(_0xc16146(0x32f),_0x4d7b3f+_0xc16146(0x2f8)),logHistory(_0xc16146(0x32f),_0xc16146(0x246)),await killBot();else{if(_0x5a2114[_0xc16146(0x26c)]()[_0xc16146(0x353)](_0xc16146(0x2a2))&&_0x5a2114[_0xc16146(0x26c)]()[_0xc16146(0x353)](_0xc16146(0x347)))_0x5d3b81=_0x4d7b3f+'\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)',await pauseBot(undefined,_0x5d3b81,_0x5a2114,!![]);else{if(_0x5a2114[_0xc16146(0x26c)]()[_0xc16146(0x353)](_0xc16146(0x2a2)))config['apiPassword']?_0x5d3b81=_0x4d7b3f+'\x20API\x20key,\x20secret\x20or\x20password\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange':_0x5d3b81=_0x4d7b3f+_0xc16146(0x35e),logHistory(_0xc16146(0x32f),_0x5d3b81),logHistory(_0xc16146(0x32f),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)'),await killBot();else{if(_0x5a2114[_0xc16146(0x26c)]()[_0xc16146(0x353)](_0xc16146(0x273)))logHistory(_0xc16146(0x32f),_0x4d7b3f+'\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange'),logHistory(_0xc16146(0x32f),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)'),await killBot();else{if(_0x5a2114['toString']()[_0xc16146(0x353)](_0xc16146(0x209)))logHistory(_0xc16146(0x32f),_0xc16146(0x307)+_0x24d0c9),logger[_0xc16146(0x216)](_0xc16146(0x254),_0x5a2114);else{if(_0x5a2114 instanceof ccxt[_0xc16146(0x2b0)]){_0x5d3b81=_0x4d7b3f+_0xc16146(0x2a6)+_0x5a2114[_0xc16146(0x26c)](),logHistory(_0xc16146(0x32f),_0x5d3b81),logger['debug'](_0xc16146(0x1bc),_0x5a2114);if(_0x24d0c9)logger['debug'](_0xc16146(0x22c)+_0x24d0c9);await pauseBot(undefined,_0x5d3b81,_0x5a2114);}else{_0x5d3b81=_0xc16146(0x1f7)+_0x5a2114[_0xc16146(0x26c)](),logHistory('error',_0x5d3b81),logger[_0xc16146(0x216)](_0x5d3b81+_0xc16146(0x31e),_0x5a2114);if(_0x24d0c9)logger[_0xc16146(0x216)](_0xc16146(0x22c)+_0x24d0c9);await pauseBot(undefined,_0x5d3b81);}}}}}}}}}}}}}}}}function decryptRSA(_0x3dcc6d,_0xdf821b){const _0x464d76=_0x387443,_0x1007fc=forge[_0x464d76(0x205)][_0x464d76(0x293)](_0x3dcc6d),_0x9b7a0e=_0x1007fc[_0x464d76(0x203)](forge[_0x464d76(0x2c0)][_0x464d76(0x319)](_0xdf821b),'RSA-OAEP',{'md':forge['md'][_0x464d76(0x301)][_0x464d76(0x1d1)](),'mgf1':{'md':forge['md'][_0x464d76(0x301)][_0x464d76(0x1d1)]()}});return _0x9b7a0e;}async function withRetry(_0x1d21f6,_0x21e27f){const _0x4e5eaf=_0x387443;let _0x5a9d08=![],_0x323697=0x0,_0x1e3d50,_0x4cf163;while(_0x323697<maxRetries){try{_0x1e3d50=await _0x21e27f();break;}catch(_0x25cc14){_0x4cf163=_0x25cc14,!_0x5a9d08?(_0x5a9d08=!![],logger[_0x4e5eaf(0x216)](_0x4e5eaf(0x33a)+_0x1d21f6+':',_0x25cc14[_0x4e5eaf(0x26c)]())):await sleep(retryInterval);}_0x323697++;}if(_0x323697==0x0)return _0x1e3d50;if(_0x323697>=maxRetries)throw _0x4cf163;else return logger[_0x4e5eaf(0x216)]('RETRY\x20-\x20Problem\x20resolved\x20after\x20'+_0x323697+_0x4e5eaf(0x316)),_0x1e3d50;}function formatResult(_0x2a2379,_0x5cdf95){const _0x4d8a06=_0x387443;return parseFloat(_0x2a2379[_0x4d8a06(0x1ce)](_0x5cdf95));}function formatResultTruncate(_0x281d07,_0x467947){const _0x535060=_0x387443;let _0x5a63df=formatResultString(_0x281d07,0xa),_0x224e86=_0x5a63df[_0x535060(0x255)]('.');return _0x224e86!=-0x1&&(_0x5a63df=_0x5a63df['slice'](0x0,_0x224e86+_0x467947+0x1)),Number(_0x5a63df);}function formatResultString(_0x2d8285,_0xd521d9){const _0x1aec01=_0x387443;let _0xfb5b71;if(!(''+_0x2d8285)[_0x1aec01(0x353)]('e'))_0xfb5b71=+(Math['round'](_0x2d8285+'e+'+_0xd521d9)+'e-'+_0xd521d9);else{let _0x59caef=(''+_0x2d8285)[_0x1aec01(0x2ea)]('e'),_0x37f961='';+_0x59caef[0x1]+_0xd521d9>0x0&&(_0x37f961='+'),_0xfb5b71=+(Math[_0x1aec01(0x263)](+_0x59caef[0x0]+'e'+_0x37f961+(+_0x59caef[0x1]+_0xd521d9))+'e-'+_0xd521d9);}return Number(_0xfb5b71)[_0x1aec01(0x1ce)](_0xd521d9);}function getServerTime(){const _0x3c8f66=_0x387443,_0x3ac5d6=new Date();return _0x3ac5d6[_0x3c8f66(0x20b)]()+'/'+(_0x3ac5d6[_0x3c8f66(0x2ee)]()+0x1)['toString']()[_0x3c8f66(0x1e8)](0x2,'0')+'/'+_0x3ac5d6['getDate']()[_0x3c8f66(0x26c)]()[_0x3c8f66(0x1e8)](0x2,'0')+'\x20'+_0x3ac5d6[_0x3c8f66(0x231)]()[_0x3c8f66(0x26c)]()[_0x3c8f66(0x1e8)](0x2,'0')+':'+_0x3ac5d6[_0x3c8f66(0x2bd)]()['toString']()['padStart'](0x2,'0')+':'+_0x3ac5d6[_0x3c8f66(0x1bd)]()[_0x3c8f66(0x26c)]()[_0x3c8f66(0x1e8)](0x2,'0');}function _0x37c9(){const _0x4efd30=['Failed\x20to\x20load\x20coin\x20data\x20for\x20','-performance.json','fetchTickers','changes','apiPassword','Portfolio\x20change\x20detected:\x20','Portfolio\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','-events.json','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','createWriteStream','watchOrders()','2.5.0','bb-settings.json','/USD','getDate','Invalid\x20symbol:\x20','startdate','add','\x20metrics:</b>\x20\x0a\x0a','ongoing','padStart','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','OrderNotFound','limit','-config.json','\x20>\x20pausing\x20bot\x20for\x20','substring','final','./logs/','write','buy','watchTrades()','coins','breakeven','status','Unknown\x20error:\x20','TUSD','fiat','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','25MTWRaG','Pausing\x20for\x20','market','privateKey','cloneDeep','send','************','Set\x20lock\x20orders\x20to:\x20','decrypt','Net\x20','pki','fetchTicker','mkdirSync','existsSync','InsufficientFunds','apiKey','getFullYear','amount','cancelOrders()','must\x20be\x20greater\x20than\x20minimum\x20amount','ordertype','portfolio2','marketcapsqrt','2.6.23','restart','highest','time','debug','eur','recreateCoinResults()','testApi','running','yyyy/MM/dd','stringify','open','data','marketcap','2.3.5','min','***','liquidity','\x20blocked\x20API\x20(DDoSProtection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','Bot\x20','627494pFsUGd','closed','progress','getTime','292514fkgHgm','Initiating\x20bot\x20restart','Symbol(s):\x20','Resetting\x20bot\x20history','distribution','page','change','getHours','production','filter','defaults','unlinkSync','fetchOpenOrders','Invalid\x20balance\x20for\x20','pid','onepagemode','string','shift','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','Exchange\x20permission\x20denied\x20-\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','buys','coin-loading-progress','portfolio','portfolio1','initclient','getCoinNumber()','startnumber','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)','offset','fetchTickers()','\x20/\x20','Error\x20in\x20testAPI():\x20','watchTrades','orderId','showname','No\x20more\x20open\x20orders\x20-\x20','set','staging','added','colorscheme','deleteHistoryAlerts','Error\x20details:','indexOf','value','args',':\x20timer\x20>','pop','278360jvTqNE','reverse','freeze','9DBFWdi','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','limit-high','\x20:\x20','\x20order:\x20','resetHistory','round','fee','Huobi','environment','active','\x20-\x20','exchange','startsWith','order','toString','timeout','request-time','2\x20-\x20Validate\x20orders:\x20','apply','2\x20-\x20handling\x20FILLED\x20order:\x20','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','PermissionDenied','Error\x20occurred:\x20','DDoSProtection','UNLOCKING',':\x20Bot\x20','switch-manual',',\x20must\x20be\x20a\x203\x20digit\x20number','\x20has\x20a\x2024h\x20drop\x20of\x20','Order(s)\x20not\x20validated\x20after\x20','placeOrder','settings','parse','coin','orderstatus','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','currency','change24h','211668YlHSlh','warning','random','watchTradesForSymbols','NetworkError','\x20network\x20error:\x20','date-fns','threshold','fetchBalance()','differenceInSeconds','memoryUsage','max','createOrder','quote','balancing\x20resumes\x20when\x20cooldown\x20ends','privateKeyFromPem','Manual\x20balancing\x20required','find','timestamp','BNB','event','InvalidOrder','logs','USDC','log','Exception\x20thrown\x20in\x20','argv','price','sortBy','<b>Bot\x20','AuthenticationError','apiSecret','headless','\x20-\x20bot\x20switched\x20to\x20manual\x20mode','\x20exchange\x20error:\x20','configuration-stored','basecoin','customId','</pre>','isEqual','%\x20(','showConfig','<pre>','timeshift','ExchangeError','0\x20-\x20EXECUTION:\x20','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','slice','sendMetricsTelegram','initTickers()','RequestTimeout','forEach','axios','exchanges','basecoinvalue','\x20exchange','sell','getMinutes','2\x20-\x20Handled\x20open\x20orders','\x20not\x20available\x20(see:\x20hodlerhacks.com/fix/5)','util','storeHeadless','Order\x20is\x20invalid:\x20','getPortfolio','\x20>\x20','Initializing\x20coin\x20results','/USDT','netoffset','Limit\x20(high-margin)','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','join','status\x20code\x20401',')\x20unknown\x20order:\x20','full','\x20closed\x20the\x20connection\x20(see:\x20hodlerhacks.com/fix/5)','starting-balances','lowdb','spot','\x20blocked\x20API\x20(RateLimitExceeded)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','Cryptocom','autoliquidity','map','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','435429wyQvoc','red_yellow_blue','valid','enabled','toLowerCase','\x20minutes\x20-\x20','push','removed','BTC','detectLiquidityChange()','total','trade','net-basecoin','recovery','getOpenOrders()','rightTxt','entries','balancing\x20resumed','ask','split',')\x20|\x20exchange:\x20','side','1\x20-\x20Validate\x20orders:\x20','getMonth','/EUR','\x20>\x20stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','USDT','net-fiat','fetchBalance','\x20|\x20highest\x20fee:\x20','2.6.22','-------------------------------\x0a','sort','\x20API\x20secret\x20is\x20invalid','event-history','update-liquidity','keys','ccxt','success','padEnd','date','splice','sha256','none','cancel','limits','remove','2.6.0','Insufficient\x20funds\x20to\x20execute\x20order:\x20','last','\x20not\x20responding\x20(see:\x20hodlerhacks.com/fix/5)','excluded','\x20orders\x20in\x20less\x20than\x20','LOCKED','usd','assign','botID','length','amountToPrecision','Initializing\x20exchange','ETH','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','heapUsed','\x20attempts','\x20portfolio:</b>\x20\x0a\x0a','filled','decode64','sells','loading-canceled','no\x20open\x20orders','version','\x20>\x20details:','fromCodePoint','type','1\x20-\x20partially\x20FILLED\x20(','initial','has','BUSD','placeOrder()','emitHistory','Error\x20while\x20deleting\x20files:\x20','symbol','realized','PAXG','\x20(see:\x20hodlerhacks.com/fix/1)','number','Net\x20effect','watchOrders','error','bots','\x20uses\x20','Order\x20filled:\x20','prevnumber','Fee\x20discount\x20refund\x20detected:\x20','BNB/','Unfilled\x20order(s)\x20canceled\x20after\x20','\x20-\x20bot\x20not\x20started','pro','startprice','RETRY\x20-\x20Error\x20in\x20','2048550HxuZtc','Error:\x20Invalid\x20argument\x20','abs','replace','cooldown','floor','bot','\x20|\x20','USD','Executed\x20','marketcapApi','Placing\x20order\x20for:\x20','token\x20is\x20expired','path','sqrt','Order\x20amount\x20is\x20invalid:\x20','.json','leftTxt','openOrders','balances','84VINOlv','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','marketcapEnabled','delta','includes','cost','loadMarkets','\x20>\x20[DEBUG]\x20','toUpperCase','bot-','writeFile','/output-000.log','001','1\x20-\x20FILLED\x20known\x20order:\x20','target','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','no\x20exchange\x20reloaded','Headless:\x20','\x20|\x20exchange:\x20','yargs/yargs','\x20value','Network\x20error\x20details:','emojisell','InvalidNonce','cancelOrder','botname','remainingSymbols','market_cap','EUR','format','exec','message','performance','OnMaintenance','\x20-\x20bot\x20already\x20running\x20in\x20manual\x20mode','./config/','limit-low','search','Bitget','Market','Cooldown\x20ended\x20-\x20balancing\x20resumed','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','canceled','UNLOCKED','function','8517370tdPgUU','storeConfiguration','Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)','lowdb/adapters/FileSync','Bybit','Binance','./version.json','(((.+)+)+)+$','Exchange\x20error\x20details:','getSeconds','emojibuy','-results.json','Avoiding\x20continuous\x20order\x20attempts','1\x20-\x20FILLED\x20unknown\x20order:\x20','get','datetime','configuration','Stopped\x20fetching\x20balance\x20after\x20','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','slider','recent20','Limit\x20(low-margin)','fees','USDP','kill','\x20minutes','toFixed','average','ID:\x20','create','Loading\x20completed',')\x20known\x20order:\x20'];_0x37c9=function(){return _0x4efd30;};return _0x37c9();}function getTimeStamp(){const _0x56ac4c=_0x387443,_0x31c8fc=shiftedTime();return _0x31c8fc[_0x56ac4c(0x20b)]()+'/'+(_0x31c8fc['getMonth']()+0x1)['toString']()[_0x56ac4c(0x1e8)](0x2,'0')+'/'+_0x31c8fc[_0x56ac4c(0x1e2)]()[_0x56ac4c(0x26c)]()[_0x56ac4c(0x1e8)](0x2,'0')+'\x20'+_0x31c8fc[_0x56ac4c(0x231)]()[_0x56ac4c(0x26c)]()[_0x56ac4c(0x1e8)](0x2,'0')+':'+_0x31c8fc[_0x56ac4c(0x2bd)]()[_0x56ac4c(0x26c)]()[_0x56ac4c(0x1e8)](0x2,'0')+':'+_0x31c8fc[_0x56ac4c(0x1bd)]()[_0x56ac4c(0x26c)]()[_0x56ac4c(0x1e8)](0x2,'0');}function getDate(){const _0x41967e=_0x387443,_0x2ed470=shiftedTime();return _0x2ed470['getFullYear']()+'/'+(_0x2ed470[_0x41967e(0x2ee)]()+0x1)[_0x41967e(0x26c)]()[_0x41967e(0x1e8)](0x2,'0')+'/'+_0x2ed470[_0x41967e(0x1e2)]()['toString']()[_0x41967e(0x1e8)](0x2,'0');}function getHour(){const _0x33426c=_0x387443,_0x3073ac=shiftedTime();return _0x3073ac['getHours']()['toString']()[_0x33426c(0x1e8)](0x2,'0');}function sleep(_0x9aa95d){return new Promise(_0x2f02c9=>setTimeout(_0x2f02c9,_0x9aa95d));}function shiftedTime(){const _0x22dcad=_0x387443,_0x166c9e=new Date();let _0xe7a84f=_0x166c9e;if(config&&config[_0x22dcad(0x2af)]!==0x0)_0xe7a84f=fns[_0x22dcad(0x1e5)](_0x166c9e,{'hours':config[_0x22dcad(0x2af)]});return _0xe7a84f;}function timer(_0x4ae4bb){const _0x359756=_0x387443,_0x5c2418=new Date();!lasttime?console[_0x359756(0x29c)](getTimeStamp()+':\x20timer\x20>',_0x4ae4bb,_0x5c2418):console[_0x359756(0x29c)](getTimeStamp()+_0x359756(0x258),_0x4ae4bb,(_0x5c2418-lasttime)/0x3e8),lasttime=_0x5c2418;}