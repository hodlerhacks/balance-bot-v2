const _0x71e98b=_0x49b3;(function(_0x1e357f,_0x54c263){const _0x4f16b8=_0x49b3,_0x57cbd2=_0x1e357f();while(!![]){try{const _0x257939=parseInt(_0x4f16b8(0x14e))/0x1*(-parseInt(_0x4f16b8(0x288))/0x2)+parseInt(_0x4f16b8(0x1ac))/0x3*(parseInt(_0x4f16b8(0x151))/0x4)+parseInt(_0x4f16b8(0x1f0))/0x5*(-parseInt(_0x4f16b8(0x22f))/0x6)+parseInt(_0x4f16b8(0x22a))/0x7+parseInt(_0x4f16b8(0x2b0))/0x8*(parseInt(_0x4f16b8(0x21d))/0x9)+-parseInt(_0x4f16b8(0x244))/0xa*(-parseInt(_0x4f16b8(0x243))/0xb)+-parseInt(_0x4f16b8(0x267))/0xc;if(_0x257939===_0x54c263)break;else _0x57cbd2['push'](_0x57cbd2['shift']());}catch(_0x58e8d5){_0x57cbd2['push'](_0x57cbd2['shift']());}}}(_0x51ef,0x64854));const _0x16b075=function(){let _0x51c0b8=!![];return function(_0x29416e,_0x146003){const _0x40a818=_0x51c0b8?function(){const _0x478509=_0x49b3;if(_0x146003){const _0x1c6b6c=_0x146003[_0x478509(0x1a2)](_0x29416e,arguments);return _0x146003=null,_0x1c6b6c;}}:function(){};return _0x51c0b8=![],_0x40a818;};}(),_0x3a7603=_0x16b075(this,function(){const _0x19947c=_0x49b3;return _0x3a7603[_0x19947c(0x11b)]()[_0x19947c(0x18f)]('(((.+)+)+)+$')[_0x19947c(0x11b)]()[_0x19947c(0x192)](_0x3a7603)['search'](_0x19947c(0x236));});_0x3a7603();'use strict';const ccxt=require('ccxt'),low=require(_0x71e98b(0x17d)),FileSync=require(_0x71e98b(0x202)),fs=require('fs'),fns=require('date-fns'),forge=require(_0x71e98b(0x167)),util=require(_0x71e98b(0x28f)),argv=require(_0x71e98b(0x20f))(process[_0x71e98b(0x269)][_0x71e98b(0x1f4)](0x2))[_0x71e98b(0x269)],path=require('path'),axios=require(_0x71e98b(0x279));let exchange,gTicker={},gChange={};const usdBasecoins=[_0x71e98b(0x1bb),_0x71e98b(0x1fe),_0x71e98b(0x240),_0x71e98b(0x26e),'USDC',_0x71e98b(0x270)],excludedExchanges=[_0x71e98b(0x12d)],debugging=argv['d']||![];let pnlGenerationNeeded=argv['r']||![],config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x71e98b(0x241)]({'LOCKED':0x0,'UNLOCKING':0x1,'UNLOCKED':0x2});let lockOrders=ORDERS[_0x71e98b(0x248)],validateOrdersState,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotIntervalShort=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0x71e98b(0x1fb)+pauseBotInterval/0xea60+'\x20minutes',maxPauseRetries=0x6,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,watchTransactionsInterval=0x3c*0x3e8,schedulerInterval=0x3c*0x3c*0x3e8,retryInterval=0x3e8,maxRetries=0x5,logPageSize=0x14,defaultFee=0.003;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidOrdersInitialTimeout,pidOrdersTimeout,botPaused=![],transactionDetectionOngoing=![],lastCoinsToBalance='',exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x5dc,balanceUpdateRetries=0x5;let enableFiatToggle;const serverversion=require(_0x71e98b(0x207))[_0x71e98b(0x199)],environment=require(_0x71e98b(0x207))['environment']||_0x71e98b(0x2a0),botID=process[_0x71e98b(0x269)][0x2]||_0x71e98b(0x132),pattern=/^[0-9]{3}$/;!pattern[_0x71e98b(0x21c)](botID)&&(console[_0x71e98b(0x261)]('Error:\x20Invalid\x20argument\x20'+botID+_0x71e98b(0x212)),killBot());const userID=process[_0x71e98b(0x269)][0x3]||'',configpath=userID?_0x71e98b(0x102)+userID+'/':_0x71e98b(0x102),logspath=userID?_0x71e98b(0x1a3)+userID+'/':_0x71e98b(0x1a3),loggerfile=fs[_0x71e98b(0x210)](logspath+'/output-000.log',{'flags':'a'});!fs['existsSync'](configpath)&&fs['mkdirSync'](configpath);!fs[_0x71e98b(0x254)](logspath)&&fs[_0x71e98b(0x17c)](logspath);const configfile=configpath+'bot-'+botID+_0x71e98b(0x16f),logfile=configpath+_0x71e98b(0x10d)+botID+_0x71e98b(0x234),performancefile=configpath+_0x71e98b(0x10d)+botID+'-performance.json',coinresultsfile=configpath+'bot-'+botID+_0x71e98b(0x26b),settingsfile=configpath+'bb-settings.json',securefile=configpath+_0x71e98b(0xfe),configbackuppath=configpath+'/backup/',adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs['defaults']({'logs':[],'version':serverversion})[_0x71e98b(0x2a2)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x71e98b(0x168)]({'data':[],'version':serverversion})[_0x71e98b(0x2a2)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x71e98b(0x168)]({'bot':[],'version':serverversion})[_0x71e98b(0x2a2)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x71e98b(0x168)]({'coins':{},'version':serverversion})[_0x71e98b(0x2a2)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0,settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0xeb60fb=>{const _0x2c4edd=_0x71e98b;console[_0x2c4edd(0x261)](_0xeb60fb);},'simple':_0x315006=>{const _0x35b4c4=_0x71e98b;console[_0x35b4c4(0x261)](_0x315006),loggerfile['write'](util[_0x35b4c4(0x206)](_0x315006)+'\x0a');},'full':async(_0x519d84,_0x29f071='')=>{const _0x13e4dc=_0x71e98b;let _0x26965d;if(config[_0x13e4dc(0x18c)])_0x26965d=getTimeStamp()+':\x20'+config[_0x13e4dc(0x21a)]+_0x13e4dc(0x18e)+_0x519d84;else _0x26965d=getTimeStamp()+_0x13e4dc(0x13c)+botID+'\x20>\x20'+_0x519d84;console[_0x13e4dc(0x261)](_0x26965d),loggerfile['write'](util[_0x13e4dc(0x206)](_0x26965d)+'\x0a'),_0x29f071&&(console[_0x13e4dc(0x261)](_0x29f071),loggerfile[_0x13e4dc(0x2a2)](util[_0x13e4dc(0x206)](_0x29f071)+'\x0a'));},'debug':async(_0x1e277a,_0x1fcdf8='')=>{const _0x44d017=_0x71e98b;let _0x2fe101;if(config['showname'])_0x2fe101=getTimeStamp()+':\x20'+config['botname']+'\x20>\x20[DEBUG]\x20'+_0x1e277a;else _0x2fe101=getTimeStamp()+':\x20Bot\x20'+botID+_0x44d017(0x1be)+_0x1e277a;if(debugging)console[_0x44d017(0x261)](_0x2fe101);loggerfile[_0x44d017(0x2a2)](util[_0x44d017(0x206)](_0x2fe101)+'\x0a');if(_0x1fcdf8){if(debugging)console[_0x44d017(0x261)](_0x1fcdf8);loggerfile[_0x44d017(0x2a2)](util[_0x44d017(0x206)](_0x1fcdf8)+'\x0a');}}};process['on']('uncaughtException',function(_0x1c6fa5){const _0x5e32aa=_0x71e98b;handleError(_0x1c6fa5[_0x5e32aa(0x223)],_0x5e32aa(0x2a4));});settings[_0x71e98b(0x1eb)]!=config[_0x71e98b(0x1eb)]&&updateTimeshift(settings[_0x71e98b(0x1eb)]);settings[_0x71e98b(0xf7)]!=config[_0x71e98b(0xf7)]&&updateOnepagemode(settings[_0x71e98b(0xf7)]);(settings[_0x71e98b(0x1a9)]&&!config['marketcapApi']||!settings[_0x71e98b(0x1a9)]&&config[_0x71e98b(0x1a9)])&&updateMarketcapApi(settings[_0x71e98b(0x1a9)]);process['send']({'started':'running'},_0x2d48ab=>{}),initializeProcessListeners();function proxyEmit(_0x41759d,_0x4df71f=null){const _0x118e24=_0x71e98b;process[_0x118e24(0x10a)]({'function':_0x41759d,'args':_0x4df71f},_0x57670e=>{});}function initializeProcessListeners(){const _0x48223d=_0x71e98b;process['on'](_0x48223d(0x299),_0x193da0=>{const _0x5cefc0=_0x48223d;switch(Object[_0x5cefc0(0x296)](_0x193da0)[0x0]){case _0x5cefc0(0x1eb):_0x193da0[_0x5cefc0(0x1eb)]!=undefined&&(settings[_0x5cefc0(0x1eb)]=_0x193da0[_0x5cefc0(0x1eb)],updateTimeshift(settings[_0x5cefc0(0x1eb)]));break;case _0x5cefc0(0xf7):_0x193da0[_0x5cefc0(0xf7)]!=undefined&&(settings[_0x5cefc0(0xf7)]=_0x193da0['onepagemode'],updateOnepagemode(settings[_0x5cefc0(0xf7)]));break;case'marketcapApi':_0x193da0[_0x5cefc0(0x1a9)]!=undefined&&(settings[_0x5cefc0(0x1a9)]=_0x193da0[_0x5cefc0(0x1a9)],updateMarketcapApi(settings[_0x5cefc0(0x1a9)]));break;case _0x5cefc0(0x1de):_0x193da0[_0x5cefc0(0x1de)]!=undefined&&(bots=JSON[_0x5cefc0(0x22d)](_0x193da0['bots']),proxyEmit(_0x5cefc0(0x1de),bots));break;case'function':switch(_0x193da0[_0x5cefc0(0x1ab)]){case _0x5cefc0(0x25e):initclient();break;case'toggleBotMode':toggleBotMode();break;case _0x5cefc0(0x139):emitHistory(_0x193da0[_0x5cefc0(0x26c)]);break;case'deleteHistoryAlerts':deleteHistoryAlerts(_0x193da0['args']);break;case _0x5cefc0(0x13d):getPortfolio(_0x193da0[_0x5cefc0(0x26c)]);break;case _0x5cefc0(0x1e5):storeConfiguration(_0x193da0[_0x5cefc0(0x26c)]);break;case _0x5cefc0(0x23e):storeHeadless(_0x193da0[_0x5cefc0(0x26c)]);break;case'storeFiat':storeFiat(_0x193da0['args']);break;case _0x5cefc0(0x26f):resetHistory();break;case _0x5cefc0(0x256):getStartingBalances(getNormalizedPerformance());break;case'placeOrder':placeOrder(_0x193da0[_0x5cefc0(0x26c)]);break;case'cancelLoading':cancelLoading();break;case _0x5cefc0(0x262):showConfig();break;case _0x5cefc0(0x289):sendMetricsTelegram();break;case'sendPortfolioTelegram':sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x302bf4=![]){const _0x56c7ef=_0x71e98b;logger[_0x56c7ef(0x165)](_0x56c7ef(0x103)+(_0x302bf4?_0x56c7ef(0x160):_0x56c7ef(0x1d2))+'\x20|\x20exchange:\x20'+config[_0x56c7ef(0x13a)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x302bf4)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x56c7ef(0x142)]!=''&&config[_0x56c7ef(0x142)]!='***'){loadingProgress=0x0;if(_0x302bf4){await initExchange();const _0x593463=await testAPI();if(!_0x593463)return;await loadSymbols(),loadingProgress=0x1,setStableCoins(),proxyEmit('configuration',emittedConfiguration()),initialPerformanceStored=![];}const _0x177650=await getCoins();[currentCoins,currentCoinsAll]=_0x177650,setBlockTransactionDetection(![]),startScheduler(),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x56c7ef(0x165)]('Loading\x20completed'),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x56c7ef(0x209)]==0x0&&allOpenOrders[_0x56c7ef(0x209)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(pnlGenerationNeeded)await generatePnL();}}async function resumeBot(_0x18035=![]){const _0x1d3044=_0x71e98b;logger[_0x1d3044(0x165)](_0x1d3044(0x2a9)+(_0x18035?_0x1d3044(0x29c):_0x1d3044(0x1c4))+_0x1d3044(0x295)+config['exchange']);if(pidBalances)clearTimeout(pidBalances);if(_0x18035){getBalances();return;}coinsLoaded=![];if(config[_0x1d3044(0x142)]!=''&&config[_0x1d3044(0x142)]!=_0x1d3044(0x176)){loadingProgress=0x1;const _0x40493a=await getCoins();[currentCoins,currentCoinsAll]=_0x40493a,setBlockTransactionDetection(![]),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x1d3044(0x165)]('Loading\x20completed'),getBalances(![]),await updateOpenOrders();if(lastOrders['length']==0x0&&allOpenOrders[_0x1d3044(0x209)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();}}async function getMarketCap(_0x3a3bdc){const _0x5690f6=_0x71e98b;let _0x546ccc=![];if(_0x3a3bdc)_0x546ccc=!![];let _0x34ed41;_0x546ccc?_0x34ed41=_0x3a3bdc['map'](_0x2c0f98=>_0x2c0f98['coin']):_0x34ed41=currentCoinsAll[_0x5690f6(0x1af)](_0x450c67=>_0x450c67[_0x5690f6(0xf9)]);if(!config[_0x5690f6(0x1a9)]||!_0x546ccc&&!config[_0x5690f6(0x1b0)]||_0x34ed41[_0x5690f6(0x209)]==0x0)return;let _0x54e18a=null;try{_0x54e18a=await axios['get'](_0x5690f6(0x1fc),{'headers':{'X-CMC_PRO_API_KEY':settings[_0x5690f6(0x1a9)]},'params':{'symbol':_0x34ed41[_0x5690f6(0x11b)]()}});}catch(_0x59616a){_0x54e18a=null,_0x59616a['toString']()[_0x5690f6(0x29f)](_0x5690f6(0x1ca))?(config['marketcapApi']=![],updateConfig(),proxyEmit('configuration',emittedConfiguration()),logHistory(_0x5690f6(0x215),_0x5690f6(0x11f))):(logHistory(_0x5690f6(0x215),_0x5690f6(0x28e)+schedulerInterval/(0x3c*0x3e8)+'\x20minutes'),logger[_0x5690f6(0x165)](_0x5690f6(0x265),_0x59616a[_0x5690f6(0x11b)]()+_0x5690f6(0x1df)+_0x59616a[_0x5690f6(0x1e1)]));}if(_0x54e18a){let _0x4accb2=0x0;const _0xd05397=_0x54e18a[_0x5690f6(0x141)];_0x34ed41['forEach'](_0xdb517d=>{const _0x262789=_0x5690f6;if(_0xd05397['data'][_0xdb517d][0x0])_0x4accb2+=_0xd05397[_0x262789(0x141)][_0xdb517d][0x0][_0x262789(0x16e)][_0x262789(0x1bb)][_0x262789(0x1a1)];}),_0x34ed41[_0x5690f6(0x186)](_0x4486f2=>{const _0x54be6f=_0x5690f6,_0x525d43=_0xd05397[_0x54be6f(0x141)][_0x4486f2][0x0]?_0xd05397['data'][_0x4486f2][0x0][_0x54be6f(0x16e)][_0x54be6f(0x1bb)]['market_cap']:0x0;if(_0x546ccc){const _0x297825=_0x3a3bdc[_0x54be6f(0x146)](_0x4b2230=>_0x4b2230[_0x54be6f(0xf9)]==_0x4486f2);_0x297825&&(_0x297825[_0x54be6f(0x174)]=_0x525d43);}else{const _0x2b008d=currentCoins['find'](_0x3e3f50=>_0x3e3f50[_0x54be6f(0xf9)]==_0x4486f2);_0x2b008d&&(_0x2b008d[_0x54be6f(0x174)]=_0x525d43);const _0x905beb=currentCoinsAll[_0x54be6f(0x146)](_0x4db6c8=>_0x4db6c8[_0x54be6f(0xf9)]==_0x4486f2);_0x905beb&&(_0x905beb['marketcap']=_0x525d43);}}),!_0x546ccc&&updateTargetDistribution();}}function updateTargetDistribution(){const _0x92bb0b=_0x71e98b,_0x5cd490=0x2;let _0x3df018=0x0,_0x4eb894=0x0,_0x8152b0=0x0,_0x37b3b8=0x0,_0x51b0fd=0x0;config[_0x92bb0b(0x171)]['forEach'](_0x18712f=>{const _0x38b8a0=_0x92bb0b;if(!_0x18712f['excluded']){_0x8152b0++,_0x3df018+=_0x18712f[_0x38b8a0(0x19a)];if(_0x18712f[_0x38b8a0(0x19a)]===-0x1){_0x3df018++;const _0x33d6c9=currentCoinsAll[_0x38b8a0(0x146)](_0x18dac6=>_0x18dac6['coin']==_0x18712f[_0x38b8a0(0xf9)]);_0x33d6c9&&(_0x37b3b8+=_0x33d6c9[_0x38b8a0(0x174)],_0x51b0fd+=Math[_0x38b8a0(0x157)](_0x33d6c9[_0x38b8a0(0x174)]));}if(_0x18712f[_0x38b8a0(0x19a)]!==-0x1)_0x4eb894++;}});let _0x1d1389;const _0x40e71e=0x64-_0x3df018,_0x4ca9cc=_0x8152b0-_0x4eb894;_0x1d1389=_0x4ca9cc===0x0?_0x3df018:Math[_0x92bb0b(0x2a5)](0x64,_0x3df018),config[_0x92bb0b(0x171)][_0x92bb0b(0x186)](_0x21f191=>{const _0x2c7aad=_0x92bb0b,_0x38b856=currentCoinsAll['find'](_0x3b2055=>_0x3b2055[_0x2c7aad(0xf9)]==_0x21f191[_0x2c7aad(0xf9)]);_0x38b856&&(_0x21f191[_0x2c7aad(0x174)]=_0x38b856[_0x2c7aad(0x174)]);if(!_0x21f191['excluded']){if(_0x1d1389<=0x64){if(_0x21f191[_0x2c7aad(0x19a)]===-0x1){if(_0x37b3b8!==0x0&&config[_0x2c7aad(0x1b0)]){if(_0x38b856){if(config[_0x2c7aad(0x1b0)]==_0x2c7aad(0x174))_0x21f191[_0x2c7aad(0x26d)]=(_0x40e71e/(_0x37b3b8/_0x38b856['marketcap']))[_0x2c7aad(0x20b)](_0x5cd490);else config[_0x2c7aad(0x1b0)]==_0x2c7aad(0x278)&&(_0x21f191[_0x2c7aad(0x26d)]=(_0x40e71e/(_0x51b0fd/Math[_0x2c7aad(0x157)](_0x38b856[_0x2c7aad(0x174)])))[_0x2c7aad(0x20b)](_0x5cd490));}}}}}}),updateConfig();}function updateConfig(){const _0x4be03f=_0x71e98b;let _0x3011ba=dbConfig['get'](_0x4be03f(0x1c0))[_0x4be03f(0x146)]({'botID':botID})['value']();_0x3011ba&&dbConfig[_0x4be03f(0x1ea)](_0x4be03f(0x1c0))[_0x4be03f(0x146)]({'botID':botID})[_0x4be03f(0x27e)](config)[_0x4be03f(0x2a2)]();}function logMemory(){const _0x4cead9=_0x71e98b;if(environment!='staging')return;const _0x43c40a=process['memoryUsage']()['heapUsed']/0x400/0x400;logger[_0x4cead9(0x165)]('process\x20'+process[_0x4cead9(0x1b5)]+'\x20uses\x20'+formatResult(_0x43c40a,0x1)+_0x4cead9(0x1ad));}async function startScheduler(){const _0x121c1c=_0x71e98b,_0x35d2e9=shiftedTime()[_0x121c1c(0x211)]();getMarketCap(),loadSymbols(),_0x35d2e9==0x1&&logMemory(),await sleep(schedulerInterval),startScheduler();}async function restartBot(_0x59efa9=![]){const _0x56790f=_0x71e98b;logger[_0x56790f(0x165)](_0x56790f(0x12f));if(!_0x59efa9)while(lockOrders!=ORDERS[_0x56790f(0x248)]||coolingDown){await sleep(0x3e8);}process['send']({'stop':_0x56790f(0x287)},_0x1906cd=>{});}async function initExchange(_0x84d93a=config[_0x71e98b(0x13a)],_0xe25282=config[_0x71e98b(0x142)],_0x109ead=config[_0x71e98b(0x12c)],_0xe9a6e1=config[_0x71e98b(0x24d)]){const _0x2bd61a=_0x71e98b;if(exchange){logger[_0x2bd61a(0x165)]('Initializing\x20exchange:\x20already\x20done');return;}logger[_0x2bd61a(0x165)](_0x2bd61a(0x1a4));!supportedExchanges()[_0x2bd61a(0x29f)](_0x84d93a)&&(logHistory(_0x2bd61a(0x215),'Balance\x20Bot\x20does\x20not\x20support\x20the\x20'+_0x84d93a+'\x20exchange'),killBot());const _0x155899=ccxt['pro'][_0x84d93a[_0x2bd61a(0x2a6)]()];exchange=new _0x155899({'apiKey':_0xe25282,'secret':_0x109ead,'options':{'defaultType':_0x2bd61a(0x282)}});if(_0xe9a6e1)exchange[_0x2bd61a(0x120)]=_0xe9a6e1;}function updateExchange(_0x3a503c,_0x374f70,_0x499372=null){const _0x2d6906=_0x71e98b;exchange[_0x2d6906(0x142)]=_0x3a503c,exchange[_0x2d6906(0x187)]=_0x374f70,exchange[_0x2d6906(0x120)]=_0x499372,logger[_0x2d6906(0x165)](_0x2d6906(0x27b));}function setStableCoins(){const _0x3928eb=_0x71e98b;let _0x3dd842=config[_0x3928eb(0x250)]==_0x3928eb(0x232)?_0x3928eb(0x232):config[_0x3928eb(0x250)]==_0x3928eb(0x1ee)?_0x3928eb(0x1ee):'BTC',_0x304a15=allSymbols['includes'](_0x3dd842+_0x3928eb(0x24c))?_0x3928eb(0x1bb):allSymbols[_0x3928eb(0x29f)](_0x3dd842+'/USDT')?_0x3928eb(0x26e):'EUR',_0x3b065a=allSymbols[_0x3928eb(0x29f)](_0x3dd842+'/EUR')?_0x3928eb(0x1f6):_0x304a15;enableFiatToggle=!![],_0x304a15==_0x3928eb(0x1f6)&&(enableFiatToggle=![],storeFiat('EUR')),_0x3b065a!=_0x3928eb(0x1f6)&&(enableFiatToggle=![],storeFiat('USD')),stablecoins={'eur':{'coin':''+_0x3dd842+_0x3b065a,'symbol':_0x3dd842+'/'+_0x3b065a},'usd':{'coin':''+_0x3dd842+_0x304a15,'symbol':_0x3dd842+'/'+_0x304a15}};}function _0x49b3(_0x59ee51,_0x5e3f10){const _0x14c720=_0x51ef();return _0x49b3=function(_0x3a7603,_0x16b075){_0x3a7603=_0x3a7603-0xf6;let _0x51ef07=_0x14c720[_0x3a7603];return _0x51ef07;},_0x49b3(_0x59ee51,_0x5e3f10);}async function initwsCcxt(){const _0x1befcf=_0x71e98b;initCycle++;const _0xbda716=initCycle;let _0x520592=[];config[_0x1befcf(0x171)][_0x1befcf(0x186)](_0x16a02b=>{const _0x19d54e=_0x1befcf;if(!_0x16a02b[_0x19d54e(0x14a)]&&_0x16a02b[_0x19d54e(0xf9)]!=config[_0x19d54e(0x250)])_0x520592[_0x19d54e(0x1d1)](_0x16a02b[_0x19d54e(0x274)]);});if(!_0x520592[_0x1befcf(0x29f)](stablecoins['eur'][_0x1befcf(0x274)]))_0x520592['push'](stablecoins['eur'][_0x1befcf(0x274)]);if(!_0x520592[_0x1befcf(0x29f)](stablecoins[_0x1befcf(0x26a)][_0x1befcf(0x274)]))_0x520592[_0x1befcf(0x1d1)](stablecoins[_0x1befcf(0x26a)][_0x1befcf(0x274)]);loadCoins(_0x520592),_0x520592=validateSymbols(_0x520592);const _0x36c09a=async _0xe6caee=>{const _0x2e7ec9=_0x1befcf;let _0x4b1968;try{const _0x20d665=await getTickers(_0xe6caee);Object['entries'](_0x20d665)[_0x2e7ec9(0x186)](_0x27eebe=>{const _0x325097=_0x2e7ec9;_0x4b1968=_0x27eebe[0x1][_0x325097(0x274)],gTicker[noslash(_0x4b1968)]=_0x27eebe[0x1]['last'],gChange[_0x4b1968]=_0x27eebe[0x1]['percentage'];});}catch(_0x48733b){await handleError(_0x48733b,_0x2e7ec9(0x272),_0x4b1968);}},_0x38c89d=async _0x3aace3=>{const _0x3daa13=_0x1befcf;while(initCycle==_0xbda716){if(!botPaused)try{const _0x1ac52c=await exchange[_0x3daa13(0x24b)](_0x3aace3);gTicker[noslash(_0x1ac52c[0x0][_0x3daa13(0x274)])]=_0x1ac52c[0x0][_0x3daa13(0x14f)];}catch(_0x3d6d88){if(!exchangeStopped)await handleError(_0x3d6d88,_0x3daa13(0x21f),_0x3aace3);}else await sleep(0x64);}},_0xea35dc=async _0xa47621=>{const _0x140aaa=_0x1befcf;while(initCycle==_0xbda716){if(!botPaused)try{const _0x347b49=await exchange[_0x140aaa(0x239)](_0xa47621),_0x42009f=_0x347b49[_0x140aaa(0x2ac)]();gTicker[noslash(_0x42009f[_0x140aaa(0x274)])]=_0x42009f['price'];}catch(_0x4154b5){if(!exchangeStopped)await handleError(_0x4154b5,'watchTradesForSymbols()',_0xa47621[_0x140aaa(0x11b)]());}else await sleep(0x64);}},_0x185e57=async _0x58af9e=>{while(initCycle==_0xbda716){if(!botPaused){let _0x3a359f;try{await sleep(0x3c*0x3e8);const _0x1a2cd7=await getTickers(_0x58af9e);Object['entries'](_0x1a2cd7)['forEach'](_0x2df636=>{const _0x43fd96=_0x49b3;_0x3a359f=_0x2df636[0x1][_0x43fd96(0x274)],gChange[_0x3a359f]=_0x2df636[0x1][_0x43fd96(0x19b)];});}catch(_0x3f8273){if(!exchangeStopped)await handleError(_0x3f8273,'fetchTickers()',_0x3a359f);}}else await sleep(0x64);}},_0x588d51=async _0x3da373=>{const _0x2ab7ec=_0x1befcf;while(initCycle==_0xbda716){if(!botPaused)try{const _0x354440=await exchange['watchOrders'](_0x3da373);initCycle==_0xbda716&&_0x354440[_0x2ab7ec(0x186)](_0x154ab1=>{updateNumberCoinsCcxt(_0x154ab1);});}catch(_0x2f0d7f){if(!exchangeStopped)await handleError(_0x2f0d7f,'watchOrders()');}else await sleep(0x64);}};_0x36c09a(_0x520592),_0x185e57(_0x520592),exchange[_0x1befcf(0x1bf)][_0x1befcf(0x239)]&&!(config[_0x1befcf(0x13a)]==_0x1befcf(0x185)&&_0x520592[_0x1befcf(0x209)]>0xa)?_0xea35dc(_0x520592):_0x520592[_0x1befcf(0x186)](_0xae1f56=>{_0x38c89d(_0xae1f56);}),_0x520592[_0x1befcf(0x186)](_0x46c6c2=>{_0x588d51(_0x46c6c2);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x130501){const _0x3f45a7=_0x71e98b;let _0x5d234d={};try{if(config[_0x3f45a7(0x13a)]!=_0x3f45a7(0x147))_0x5d234d=await exchange[_0x3f45a7(0x25c)](_0x130501);else for(const _0x54a47a of _0x130501){const _0x2811b0=await exchange['fetchTicker'](_0x54a47a);_0x5d234d[_0x54a47a]=_0x2811b0;}return _0x5d234d;}catch(_0x9b0768){throw _0x9b0768;}}function setBlockTransactionDetection(_0x3b851){const _0x364de9=_0x71e98b;blockTransactionDetection=_0x3b851,logger['debug'](_0x364de9(0x1b3)+blockTransactionDetection);}async function detectLiquidityChange(_0x9c77d9=0x0){const _0x4f36b9=_0x71e98b;transactionDetectionOngoing=!![];try{const _0x7da459=await getCoins(_0x9c77d9),[_0x2900b1,_0x379105]=_0x7da459;let _0x54d118=[];currentCoins[_0x4f36b9(0x186)](_0xcc3710=>{const _0x51aa13=_0x4f36b9,_0x443719=_0x2900b1[_0x51aa13(0x146)](_0x4cdfec=>_0x4cdfec['coin']==_0xcc3710[_0x51aa13(0xf9)]);if(_0x443719){if(_0xcc3710[_0x51aa13(0x18a)]!=_0x443719[_0x51aa13(0x18a)]){let _0x4ca41f;if(_0xcc3710[_0x51aa13(0xf9)]!=config[_0x51aa13(0x250)]){const _0x23af3f=gTicker[noslash(_0xcc3710['symbol'])];_0x4ca41f=_0xcc3710[_0x51aa13(0x1ce)]?0x1/_0x23af3f:_0x23af3f;}else _0x4ca41f=0x1;_0x54d118[_0x51aa13(0x1d1)]({'coin':_0xcc3710[_0x51aa13(0xf9)],'symbol':_0xcc3710['symbol'],'price':_0x4ca41f,'number':Number(formatResult(_0x443719[_0x51aa13(0x18a)]-_0xcc3710[_0x51aa13(0x18a)],0x8)),'basecoinvalue':_0x4ca41f*(_0x443719[_0x51aa13(0x18a)]-_0xcc3710[_0x51aa13(0x18a)])});}}});if(_0x54d118[_0x4f36b9(0x209)]>0x0&&!blockTransactionDetection){for(const _0x2a0d35 of _0x54d118){if(config[_0x4f36b9(0x135)]){logger['debug'](_0x4f36b9(0x1c6)+_0x2a0d35['basecoinvalue']+_0x4f36b9(0x119)+lastFees[_0x4f36b9(0x231)]);if(lastFees[_0x4f36b9(0x231)]==0x0||Math[_0x4f36b9(0x230)](_0x2a0d35[_0x4f36b9(0x2a7)])>lastFees[_0x4f36b9(0x231)]*0x3){if(config[_0x4f36b9(0x135)]==_0x4f36b9(0x22b)){delete _0x2a0d35[_0x4f36b9(0x274)],delete _0x2a0d35[_0x4f36b9(0x2a7)];let _0x5a8a00=[],_0xa57e5e=[...config[_0x4f36b9(0x189)]]||[],_0x1cdc50=config['liquidity'];_0xa57e5e['sort']((_0x321d27,_0x2e2039)=>_0x321d27['date']>_0x2e2039[_0x4f36b9(0x1ec)]?-0x1:_0x2e2039[_0x4f36b9(0x1ec)]>_0x321d27['date']?0x1:0x0);const _0x4d349e=getDate();if(_0xa57e5e[0x0]){const _0x293df3=fns[_0x4f36b9(0x22d)](_0xa57e5e[0x0][_0x4f36b9(0x1ec)],_0x4f36b9(0x2af),new Date()),_0x46042f=fns['parse'](_0x4d349e,_0x4f36b9(0x2af),new Date());if(fns['isEqual'](_0x293df3,_0x46042f)){_0x5a8a00=_0xa57e5e[0x0][_0x4f36b9(0x297)];const _0xcff759=_0x5a8a00[_0x4f36b9(0x146)](_0x2770d4=>_0x2770d4['coin']==_0x2a0d35[_0x4f36b9(0xf9)]);_0xcff759?(_0xcff759[_0x4f36b9(0x18a)]+=_0x2a0d35[_0x4f36b9(0x18a)],_0xcff759[_0x4f36b9(0x18a)]==0x0&&(_0x5a8a00=_0x5a8a00[_0x4f36b9(0x1e7)](_0x3c656d=>{const _0x110e04=_0x4f36b9;return _0x3c656d[_0x110e04(0xf9)]!=_0x2a0d35['coin'];}))):_0x5a8a00['push'](_0x2a0d35);const _0x2bc1ae=_0x1cdc50[_0x4f36b9(0x146)](_0x202c66=>_0x202c66['date']==_0x4d349e);_0x2bc1ae[_0x4f36b9(0x297)]=_0x5a8a00;}else _0x1cdc50[_0x4f36b9(0x1d1)]({'date':_0x4d349e,'changes':[_0x2a0d35]});}const _0xa87c54=_0x1cdc50[_0x4f36b9(0x146)](_0x5c666c=>_0x5c666c[_0x4f36b9(0x1ec)]==_0x4d349e);if(_0xa87c54){let _0x1efc6e=!![];_0xa87c54[_0x4f36b9(0x297)][_0x4f36b9(0x186)](_0x39ec31=>{if(_0x39ec31['number']!=0x0)_0x1efc6e=![];}),_0x1efc6e&&(_0x1cdc50=_0x1cdc50[_0x4f36b9(0x1e7)](_0x1b401b=>{const _0x2b1f28=_0x4f36b9;return _0x1b401b[_0x2b1f28(0x1ec)]!=_0x4d349e;}));}let _0x2df63a=dbConfig['get'](_0x4f36b9(0x1c0))[_0x4f36b9(0x146)]({'botID':botID})['value']();_0x2df63a&&(dbConfig['get'](_0x4f36b9(0x1c0))['find']({'botID':botID})[_0x4f36b9(0x27e)]({'liquidity':_0x1cdc50})['write'](),config[_0x4f36b9(0x189)]=_0x1cdc50);logHistory(_0x4f36b9(0x18b),'Portfolio\x20change\x20detected:\x20'+Math[_0x4f36b9(0x230)](_0x2a0d35['number'])+'\x20'+_0x2a0d35[_0x4f36b9(0xf9)]+'\x20'+(_0x2a0d35[_0x4f36b9(0x18a)]>0x0?_0x4f36b9(0x229):_0x4f36b9(0x12e))+_0x4f36b9(0x294)),proxyEmit('configuration',emittedConfiguration());const _0x4c21b7=getNormalizedPerformance();emitPerformance(_0x4c21b7),getStartingBalances(_0x4c21b7),logger[_0x4f36b9(0x165)](_0x4f36b9(0x17e));}else config[_0x4f36b9(0x135)]=='switch-manual'&&(config[_0x4f36b9(0x1f2)]?(await storeHeadless({'headless':![]}),logHistory(_0x4f36b9(0x18b),'Portfolio\x20change\x20detected:\x20'+Math['abs'](_0x2a0d35[_0x4f36b9(0x18a)])+'\x20'+_0x2a0d35['coin']+'\x20'+(_0x2a0d35[_0x4f36b9(0x18a)]>0x0?_0x4f36b9(0x229):_0x4f36b9(0x12e))+_0x4f36b9(0x24e))):logger[_0x4f36b9(0x165)](_0x4f36b9(0x1d9)+Math[_0x4f36b9(0x230)](_0x2a0d35['number'])+'\x20'+_0x2a0d35[_0x4f36b9(0xf9)]+'\x20'+(_0x2a0d35['number']>0x0?'added':_0x4f36b9(0x12e))+_0x4f36b9(0x10b)));}else logger[_0x4f36b9(0x165)](_0x4f36b9(0x17b)+Math['abs'](_0x2a0d35[_0x4f36b9(0x18a)])+'\x20'+_0x2a0d35[_0x4f36b9(0xf9)]+'\x20'+(_0x2a0d35[_0x4f36b9(0x18a)]>0x0?_0x4f36b9(0x229):_0x4f36b9(0x12e)));}else logger['debug']('Portfolio\x20change\x20detected:\x20'+Math[_0x4f36b9(0x230)](_0x2a0d35[_0x4f36b9(0x18a)])+'\x20'+_0x2a0d35['coin']+'\x20'+(_0x2a0d35[_0x4f36b9(0x18a)]>0x0?_0x4f36b9(0x229):_0x4f36b9(0x12e))+_0x4f36b9(0x169));}currentCoins=_0x2900b1,currentCoinsAll=_0x379105;}}catch(_0x4fd45f){if(!exchangeStopped)await handleError(_0x4fd45f,_0x4f36b9(0x298));}transactionDetectionOngoing=![];}async function watchTransactions(){await sleep(0x14*0x3e8);while(!![]){!botPaused&&!blockTransactionDetection&&coinsLoaded?(detectLiquidityChange(),await sleep(watchTransactionsInterval)):await sleep(0x3e8);}}async function loadSymbols(){const _0x21e3a3=_0x71e98b;try{markets=await exchange['loadMarkets'](!![]),allSymbols=[],Object['entries'](markets)[_0x21e3a3(0x186)](_0x41534e=>{const _0x29255a=_0x21e3a3;_0x41534e[0x1][_0x29255a(0x1b1)]&&_0x41534e[0x1][_0x29255a(0x282)]&&allSymbols[_0x29255a(0x1d1)](_0x41534e[0x0]);});}catch(_0x6fac28){markets?logger['debug'](_0x21e3a3(0x291)+_0x6fac28['toString']()):(loading[_0x21e3a3(0x193)]=!![],emitLoadingProgress(),_0x6fac28[_0x21e3a3(0x11b)]()[_0x21e3a3(0x2a6)]()[_0x21e3a3(0x29f)](_0x21e3a3(0x133))||_0x6fac28[_0x21e3a3(0x11b)]()['toLowerCase']()[_0x21e3a3(0x29f)](_0x21e3a3(0x247))?logHistory(_0x21e3a3(0x215),'Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)'):handleErrorNoStop(_0x6fac28,_0x21e3a3(0x1d5),!![]),logHistory(_0x21e3a3(0x215),_0x21e3a3(0x28c)),logHistory(_0x21e3a3(0x215),_0x21e3a3(0x29a)+loadCoinsRetryInterval/0xea60+_0x21e3a3(0x1ff)),logger[_0x21e3a3(0x165)](_0x21e3a3(0x265),_0x6fac28),botPaused=!![],await sleep(loadCoinsRetryInterval),restartBot());}}function validateSymbols(_0x2e9e01){const _0x5c9c91=_0x71e98b;let _0x44c7eb=[];return _0x2e9e01[_0x5c9c91(0x186)](_0x23809e=>{const _0x32c753=_0x5c9c91;!allSymbols[_0x32c753(0x29f)](_0x23809e)?logHistory(_0x32c753(0x215),_0x32c753(0x2a3)+_0x23809e+_0x32c753(0x1b6)):_0x44c7eb[_0x32c753(0x1d1)](_0x23809e);}),_0x44c7eb;}async function initclient(){const _0xabe2b2=_0x71e98b;proxyEmit('configuration',emittedConfiguration()),proxyEmit(_0xabe2b2(0x10c),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0xabe2b2(0x126),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x4a2496=getNormalizedPerformance();emitPerformance(_0x4a2496),getStartingBalances(_0x4a2496);}async function toggleBotMode(){const _0x24842d=_0x71e98b;let _0x4a8ac6=dbConfig[_0x24842d(0x1ea)]('bot')[_0x24842d(0x146)]({'botID':botID})['value']();if(_0x4a8ac6){const _0x50c40f=!_0x4a8ac6[_0x24842d(0x1f2)];dbConfig['get']('bot')['find']({'botID':botID})[_0x24842d(0x27e)]({'headless':_0x50c40f})[_0x24842d(0x2a2)](),config[_0x24842d(0x1f2)]=_0x50c40f,proxyEmit(_0x24842d(0x20a),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x56d2f1=_0x71e98b;process[_0x56d2f1(0x10a)]({'updatebotmanager':!![]},_0x4d45f3=>{}),logger[_0x56d2f1(0x165)](_0x56d2f1(0x259)+config['headless']);}async function loadCoins(_0x56181b){const _0x5d63c6=_0x71e98b;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x14b24b,_0x4fa06c=0x0,_0x50bdc2=0x0;_0x56181b[_0x5d63c6(0x186)](_0x321c28=>{const _0x474384=_0x5d63c6;loading[_0x474384(0x197)][_0x474384(0x1d1)](_0x321c28);}),loadingCanceled=![];let _0x4134ef=![];while(_0x14b24b!=_0x56181b[_0x5d63c6(0x209)]+maxLoadingProgress){_0x14b24b=loadingProgress,_0x56181b[_0x5d63c6(0x186)](_0x49f0ca=>{const _0x2039b8=_0x5d63c6;if(gTicker[noslash(_0x49f0ca)]){loading[_0x2039b8(0x197)]=loading['remainingSymbols'][_0x2039b8(0x1e7)](_0x1690d4=>_0x1690d4!=_0x49f0ca);if(!watchedSymbols[_0x2039b8(0x29f)](_0x49f0ca))watchedSymbols[_0x2039b8(0x1d1)](_0x49f0ca);_0x14b24b++;}}),loading[_0x5d63c6(0x1d4)]=Math[_0x5d63c6(0x144)](_0x14b24b/(_0x56181b[_0x5d63c6(0x209)]+maxLoadingProgress)*0x64);loading[_0x5d63c6(0x1d4)]!=0x64&&(_0x50bdc2>0x1e*0x5&&(loading[_0x5d63c6(0x1f7)]=!![],emitLoadingProgress()),_0x50bdc2>0x78*0x5&&!_0x4134ef&&(_0x4134ef=!![],logHistory(_0x5d63c6(0x215),_0x5d63c6(0x173)+loading['remainingSymbols'][_0x5d63c6(0x1d8)](',\x20')+'\x20-\x20bot\x20not\x20started'),logHistory('error',_0x5d63c6(0x29a)+loadCoinsRetryInterval/0xea60+_0x5d63c6(0x1ff)),loadingCanceled=!![],await sleep(loadCoinsRetryInterval),restartBot()));if(loadingCanceled){loading[_0x5d63c6(0x193)]=!![],emitLoadingProgress();break;}else _0x4fa06c!=loading[_0x5d63c6(0x1d4)]&&(_0x4fa06c=loading['progress'],emitLoadingProgress()),_0x50bdc2++,await sleep(0xc8);}_0x14b24b==_0x56181b[_0x5d63c6(0x209)]+maxLoadingProgress&&(coinsLoaded=!![],process['send']({'status':'enabled','live':_0x5d63c6(0x148)},_0x5f4f8a=>{}),_0x4134ef&&logHistory('success',_0x5d63c6(0x149)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){proxyEmit('configuration',{...emittedConfiguration(),'configstate':'loading-canceled'});}function emitLoadingProgress(){const _0x23e2dc=_0x71e98b;proxyEmit(_0x23e2dc(0x2ae),loading);}async function getFiat(){const _0x1d0f92=_0x71e98b;let _0x56898c=gTicker[stablecoins[_0x1d0f92(0x201)][_0x1d0f92(0xf9)]],_0x1342d2=gTicker[stablecoins[_0x1d0f92(0x26a)]['coin']];return{'eur':Number(_0x56898c),'usd':Number(_0x1342d2)};}function capitalize(_0x2ab10d){const _0x26c693=_0x71e98b;return _0x2ab10d[_0x26c693(0x246)](0x0,0x1)['toUpperCase']()+_0x2ab10d[_0x26c693(0x246)](0x1);}function supportedExchanges(){const _0x1cffb6=_0x71e98b,_0xd104c2=['ws','fetchTickers',_0x1cffb6(0x205),_0x1cffb6(0x24b),_0x1cffb6(0x123),'cancelOrder',_0x1cffb6(0x181),_0x1cffb6(0x118),_0x1cffb6(0x2b2)];let _0x13f65f=[],_0x47153a=[],_0x14f399=ccxt[_0x1cffb6(0x258)][_0x1cffb6(0x10c)];_0x14f399['forEach'](_0x11b2dc=>{const _0x16c1c1=_0x1cffb6;try{const _0x1ce8d8=new ccxt[(_0x16c1c1(0x258))][_0x11b2dc]();_0x47153a[_0x16c1c1(0x1d1)](_0x1ce8d8);}catch(_0x184546){}}),_0x47153a[_0x1cffb6(0x186)](_0x280bf1=>{const _0x98ec9f=_0x1cffb6;let _0x435222=0x0;_0xd104c2[_0x98ec9f(0x186)](_0x397b8e=>{const _0x5229c7=_0x98ec9f;_0x397b8e in _0x280bf1[_0x5229c7(0x1bf)]&&_0x280bf1[_0x5229c7(0x1bf)][_0x397b8e]&&_0x435222++;}),_0x435222==_0xd104c2['length']&&(!excludedExchanges[_0x98ec9f(0x29f)](_0x280bf1['id'])&&_0x13f65f[_0x98ec9f(0x1d1)](capitalize(_0x280bf1['id'])));});let _0x26b9a5=[];return _0x14f399[_0x1cffb6(0x186)](_0xef5234=>{const _0x2cd121=_0x1cffb6;_0xef5234=capitalize(_0xef5234);if(!_0x13f65f[_0x2cd121(0x29f)](_0xef5234))_0x26b9a5['push'](_0xef5234);}),_0x13f65f;}function setStartDatePerformance(){const _0x2d17a6=_0x71e98b;if(config&&config['liquidity'][0x0][_0x2d17a6(0x297)]['length']!=0x0){const _0x4624ba=config['liquidity'][0x0][_0x2d17a6(0x297)];dbPerformance[_0x2d17a6(0x1ea)](_0x2d17a6(0x141))['find']({'date':config[_0x2d17a6(0x219)]})[_0x2d17a6(0x27e)]({'coins':_0x4624ba})['write']();}}function calculatePnL(_0x2b3544,_0x384684,_0x80e9f0,_0x38910e,_0x4c15aa,_0x5e1531){const _0x6a0e11=_0x71e98b;!_0x2b3544[_0x6a0e11(0x29f)]('/'+config[_0x6a0e11(0x250)])&&(_0x80e9f0=_0x80e9f0==_0x6a0e11(0x275)?_0x6a0e11(0x106):_0x6a0e11(0x275));!_0x5e1531[_0x384684]&&(_0x5e1531[_0x384684]={'number':0x0,'sells':0x0,'buys':0x0,'breakeven':0x0,'realizedPnL':0x0});let _0x3439cf=0x0,_0x4ead19,_0x484f79;if(_0x80e9f0==_0x6a0e11(0x275))_0x484f79=_0x5e1531[_0x384684][_0x6a0e11(0x18a)]*_0x5e1531[_0x384684][_0x6a0e11(0x1f1)]+_0x4c15aa*_0x38910e,_0x5e1531[_0x384684][_0x6a0e11(0x18a)]+=_0x38910e,_0x5e1531[_0x384684]['breakeven']=_0x5e1531[_0x384684][_0x6a0e11(0x18a)]!=0x0?_0x484f79/_0x5e1531[_0x384684][_0x6a0e11(0x18a)]:0x0,_0x5e1531[_0x384684]['buys']++;else _0x80e9f0==_0x6a0e11(0x106)&&(_0x4ead19=Math['min'](_0x5e1531[_0x384684][_0x6a0e11(0x18a)],_0x38910e),_0x3439cf=(_0x4c15aa-_0x5e1531[_0x384684]['breakeven'])*_0x4ead19,_0x484f79=Math[_0x6a0e11(0x2a5)](_0x5e1531[_0x384684][_0x6a0e11(0x18a)]*_0x5e1531[_0x384684][_0x6a0e11(0x1f1)]-_0x4ead19*_0x5e1531[_0x384684][_0x6a0e11(0x1f1)],0x0),_0x5e1531[_0x384684][_0x6a0e11(0x18a)]-=_0x4ead19,_0x5e1531[_0x384684][_0x6a0e11(0x1f1)]=_0x5e1531[_0x384684][_0x6a0e11(0x18a)]!=0x0?_0x484f79/_0x5e1531[_0x384684][_0x6a0e11(0x18a)]:0x0,_0x5e1531[_0x384684]['realizedPnL']+=_0x3439cf,_0x5e1531[_0x384684][_0x6a0e11(0x153)]++);return _0x3439cf;}function _0x51ef(){const _0x550c91=['join','Portfolio\x20change\x20detected:\x20','final','LOCKED','Bitget','min','bots','\x20-\x20','Unfilled\x20order(s)\x20canceled\x20after\x20','code','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','\x20not\x20responding\x20(see:\x20hodlerhacks.com/fix/5)','Waited\x20','storeConfiguration','amount','filter','stringify','emojibuy','get','timeshift','date','Valid\x20balance\x20for\x20','PAXG','string','13655SvlyfE','breakeven','headless','sha256','slice','coins','EUR','timeout','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','enableFiatToggle','DDoSProtection','\x20>\x20pausing\x20bot\x20for\x20','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','Market\x20order','BUSD','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute','eur','lowdb/adapters/FileSync','decode64','<pre>','fetchTicker','format','./version.json','warning','length','configuration','toFixed','prevnumber','target','\x20closed\x20the\x20connection\x20(see:\x20hodlerhacks.com/fix/5)','yargs/yargs','createWriteStream','getHours',',\x20must\x20be\x20a\x203\x20digit\x20number','Error\x20details:\x20','unlinkSync','error','\x20portfolio:</b>\x20\x0a\x0a','differenceInSeconds','Exchange','startdate','botname','cancelOrder','test','9OZMYjr','set','watchTrades()','RequestTimeout','.json','Invalid\x20balance\x20for\x20','stack','\x0aSymbol(s):\x20','privateKey','startprice','InsufficientFunds','limit','added','4990069AeahBn','update-liquidity','recovery','parse','offset','240wsTjeD','abs','highest','ETH','time','-events.json','fee','(((.+)+)+)+$','match','Resetting\x20coin\x20results:\x20','watchTradesForSymbols','side','filled','RETRY\x20-\x20Problem\x20resolved\x20after\x20','AuthenticationError','storeHeadless','1\x20-\x20FILLED\x20known\x20order:\x20','TUSD','freeze','recent20','11SqXdJX','2691770azsHXb','1\x20-\x20Handle\x20open\x20orders','substring','request-time','UNLOCKED','initial','PermissionDenied','watchTrades','/USD','apiPassword','\x20-\x20bot\x20switched\x20to\x20manual\x20mode','Manual\x20balancing\x20required','basecoin','must\x20be\x20greater\x20than\x20minimum\x20amount','net-basecoin','replace','existsSync','2\x20-\x20Validate\x20orders:\x20','getStartingBalances','starting-balance-','pro','Headless:\x20','realizedPnL','settings','fetchTickers','balancing\x20resumed','initclient','ExchangeError','1\x20-\x20Validate\x20orders:\x20','log','showConfig','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','0\x20-\x20EXECUTION:\x20','Error\x20details:','red_yellow_blue','16290240VqvOdw','addDays','argv','usd','-results.json','args','distribution','USDT','resetHistory','USDP','shift','initTickers()','openOrders','symbol','buy','split','Trigger:\x20','marketcapsqrt','axios','none','Updating\x20API\x20key\x20(not\x20saved\x20in\x20config\x20file\x20yet)','Value\x20','add','assign','\x20attempts','total','privateKeyFromPem','spot','open','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)','************','\x20metrics:</b>\x20\x0a\x0a','restart','14RdkEMc','sendMetricsTelegram','PnL\x20','\x20network\x20error:\x20','Failed\x20to\x20load\x20market\x20data\x20-\x20bot\x20not\x20started','Network\x20error\x20details:','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20trying\x20again\x20in\x20','util','Initializing\x20coin\x20results','Error\x20in\x20loadSymbols():\x20','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','change24h','\x20-\x20liquidity\x20settings\x20updated\x20accordingly',')\x20|\x20exchange:\x20','keys','changes','detectLiquidityChange()','message','Pausing\x20for\x20','last','quick','cost','\x20|\x20','includes','production','No\x20more\x20open\x20orders\x20-\x20','write','Invalid\x20symbol:\x20','uncaughtException','max','toLowerCase','basecoinvalue','closed','Resuming\x20(','limits','secure','pop','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','coin-loading-progress','yyyy/MM/dd','2128560VrJOeM','Invalid\x20API\x20details,\x20please\x20try\x20again\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','fetchBalance','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','Market','Saving\x20configuration','Error\x20while\x20deleting\x20files:\x20','onepagemode','findIndex','coin','fiat','ordertype','order','splice','bb-secure.json','Executed\x20','status','getTime','./config/','Reset\x20|\x20','2\x20-\x20handling\x20FILLED\x20order:\x20',':\x20timer\x20>','sell','ID:\x20','getFullYear','trade','send','\x20-\x20bot\x20already\x20running\x20in\x20manual\x20mode','exchanges','bot-','Exception\x20thrown\x20in\x20','event-history','OrderNotFound','\x20order:\x20','emojisell','pki','cancelOrders()','startnumber','getSeconds','pnl-fiat','fetchOpenOrders','\x20|\x20highest\x20fee:\x20','net','toString','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','RETRY\x20-\x20Error\x20in\x20','logs','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','password','cooldown','performance','watchOrders','\x20API\x20key,\x20secret\x20or\x20password\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','orderstatus','balances','<b>','2.6.23','getDate','2.7.1','MIN_NOTIONAL','apiSecret','bitmex','removed','Initiating\x20bot\x20restart','</pre>','2.6.22','001','timestamp','%)\x0a','autoliquidity','-performance.json','isEqual','1\x20-\x20FILLED\x20unknown\x20order:\x20','emitHistory','exchange','market',':\x20Bot\x20','getPortfolio','type','%\x20(','cloneDeep','data','apiKey','valid','round','decrypt','find','Cryptocom','running','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','excluded','bid','botID','ongoing','10433NKJIyq','price','Huobipro','68lSGcWs','average','sells','\x20orders\x20in\x20less\x20than\x20','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','Cooldown\x20ended\x20-\x20balancing\x20resumed','sqrt','getMonth','threshold','\x20(see:\x20hodlerhacks.com/fix/1)','token\x20is\x20expired','Net\x20','portfolio2','remove','API-key\x20format\x20invalid','exchange\x20reload','canceled','configstate','2\x20-\x20Handled\x20open\x20orders','event','debug','random','node-forge','defaults','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','starting-balances','customId','Stopped\x20fetching\x20balance\x20after\x20','2.3.5','quote','-config.json','ask','portfolio','orderId','Failed\x20to\x20load\x20coin\x20data\x20for\x20','marketcap','Order\x20is\x20invalid:\x20','***','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','sort','entries',')\x20unknown\x20order:\x20','Fee\x20discount\x20refund\x20detected:\x20','mkdirSync','lowdb','Portfolio\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','\x20>\x20stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','indexOf','createOrder','kill','Set\x20lock\x20orders\x20to:\x20','Avoiding\x20continuous\x20order\x20attempts','Bybit','forEach','secret','pnl','liquidity','number','success','showname','Unknown\x20error\x20-\x20check\x20logs','\x20>\x20','search','\x20has\x20a\x2024h\x20drop\x20of\x20','sortBy','constructor','cancel','Limit\x20(low-margin)','create','getOpenOrders()','remainingSymbols','value','version','slider','percentage','Error\x20in\x20testNewAPI():\x20','\x20blocked\x20API\x20(DDoSProtection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','Huobi','fromCodePoint','Order\x20amount\x20is\x20invalid:\x20','market_cap','apply','./logs/','Initializing\x20exchange','\x20exchange\x20error:\x20','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','padStart','-------------------------------\x0a','marketcapApi','no\x20open\x20orders','function','124131lDfNcs','\x20MB','Order(s)\x20not\x20validated\x20after\x20','map','marketcapEnabled','active','<b>Bot\x20','Block\x20transaction\x20detection:\x20','Insufficient\x20funds\x20to\x20execute\x20order:\x20','pid','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','limit-high','isBefore','change','Test\x20new\x20API','USD','Exchange\x20permission\x20denied\x20-\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','\x20>\x20[DEBUG]\x20','has','bot','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','fetchBalance()','portfolio1','complete','InvalidNonce','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','pnl-basecoin','full','Generating\x20PnL\x20data','status\x20code\x20401','BTC','net-fiat','Invalid\x20quantity','reverse','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','delta','push','no\x20exchange\x20reloaded','\x20rejected\x20your\x20API\x20request\x20(see:\x20hodlerhacks.com/fix/4)','progress','loadSymbols()','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','Order\x20filled:\x20'];_0x51ef=function(){return _0x550c91;};return _0x51ef();}async function generatePnL(){const _0x260882=_0x71e98b;pnlGenerationNeeded=![],logger['debug'](_0x260882(0x1c9));const _0x278107=dbLogs[_0x260882(0x1ea)]('logs')[_0x260882(0x198)]();let _0x3cb93d={},_0x38fbf3=0x0,_0x132cea=0x0,_0x26678c=config['startdate'];const _0x3a091b=fns['parse'](_0x26678c,'yyyy/MM/dd',new Date()),_0x15d286=new Date();let _0x5dc4f8=0x0;for(let _0x8caa9d=_0x3a091b;!fns[_0x260882(0x1b8)](_0x15d286,_0x8caa9d);_0x8caa9d=fns[_0x260882(0x268)](_0x8caa9d,0x1)){const _0x4a8e2b=fns[_0x260882(0x206)](_0x8caa9d,'yyyy/MM/dd');while(_0x38fbf3<_0x278107[_0x260882(0x209)]){const _0x1bf3ed=new Date(_0x278107[_0x38fbf3][_0x260882(0x233)]);if(fns[_0x260882(0x1b8)](_0x1bf3ed,_0x8caa9d))_0x38fbf3++;else{if(_0x278107[_0x38fbf3][_0x260882(0x233)][_0x260882(0x29f)](_0x4a8e2b)){const _0xad4c5d=_0x278107[_0x38fbf3];if(_0xad4c5d[_0x260882(0x13e)]===_0x260882(0xfc)&&(_0xad4c5d['event'][_0x260882(0x29f)]('Order\x20filled')||_0xad4c5d[_0x260882(0x164)][_0x260882(0x29f)](_0x260882(0x1fd)))){const _0x5d9da8=_0xad4c5d[_0x260882(0x164)][_0x260882(0x237)](/([A-Z]+\/[A-Z]+) (sell|buy) #([\d.]+) @([\d.]+)/);if(_0x5d9da8){const [,_0x5319b3,_0x2f879a,_0x2f96b9,_0x47f778]=_0x5d9da8,_0x4f9694=_0x5319b3['includes']('/'+config[_0x260882(0x250)])?_0x5319b3['split']('/')[0x0]:_0x5319b3['split']('/')[0x1],_0xd12e7f=calculatePnL(_0x5319b3,_0x4f9694,_0x2f879a,parseFloat(_0x2f96b9),parseFloat(_0x47f778),_0x3cb93d);_0x132cea+=_0xd12e7f;}}_0x38fbf3++;}else break;}}dbPerformance['get']('data')[_0x260882(0x146)]({'date':_0x4a8e2b})['assign']({'pnl':_0x132cea})[_0x260882(0x2a2)]();}dbCoinResults[_0x260882(0x21e)](_0x260882(0x1f5),_0x3cb93d)['write'](),logger['debug']('Generated\x20PnL\x20data');const _0x36a1d2=getNormalizedPerformance();emitPerformance(_0x36a1d2);}async function updatePnL(_0x446290){const _0x335a06=_0x71e98b,{symbol:_0x30ce37,coin:_0x1b8ae8,amount:_0x339203,price:_0x4a8e80,side:_0x269e20,reverse:_0xed65cb}=_0x446290;let _0x34874c=dbCoinResults[_0x335a06(0x1ea)](_0x335a06(0x1f5))[_0x335a06(0x198)]();const _0x5588f9=calculatePnL(_0x30ce37,_0x1b8ae8,_0x269e20,_0x339203,_0x4a8e80,_0x34874c);dbCoinResults['set'](_0x335a06(0x1f5),_0x34874c)['write']();const _0xd0864d=getTimeStamp()[_0x335a06(0x276)]('\x20')[0x0];let _0x2cf6ae=dbPerformance[_0x335a06(0x1ea)](_0x335a06(0x141))[_0x335a06(0x146)]({'date':_0xd0864d})[_0x335a06(0x198)]();_0x2cf6ae?(_0x2cf6ae['pnl']+=_0x5588f9,dbPerformance[_0x335a06(0x1ea)]('data')['find']({'date':_0xd0864d})[_0x335a06(0x27e)](_0x2cf6ae)['write']()):await storePerformance();const _0x2aedac=getNormalizedPerformance();emitPerformance(_0x2aedac);}async function validate24hChanges(){const _0x42680a=_0x71e98b;for(const _0x228d53 of currentCoins){if(_0x228d53[_0x42680a(0xf9)]!=config[_0x42680a(0x250)]){let _0x4fa114;_0x228d53['reverse']?_0x4fa114=formatResult((0x1/(gChange[_0x228d53['symbol']]/0x64+0x1)-0x1)*0x64,0x3):_0x4fa114=gChange[_0x228d53[_0x42680a(0x274)]],_0x4fa114<config['change24h']&&(logHistory(_0x42680a(0x215),_0x228d53['coin']+_0x42680a(0x190)+_0x4fa114+'%'),logHistory(_0x42680a(0x215),_0x42680a(0x2ad)),logHistory('error',_0x42680a(0x292)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x44a502,_0x34fb7a){const _0x187996=_0x71e98b;if(!_0x44a502)return!![];const _0x3215ec=_0x34fb7a[_0x187996(0x276)]('.'),_0x54ad81=_0x44a502[_0x187996(0x276)]('.');for(var _0x2ba014=0x0;_0x2ba014<_0x54ad81[_0x187996(0x209)];_0x2ba014++){const _0xaffc58=~~_0x54ad81[_0x2ba014],_0x156241=~~_0x3215ec[_0x2ba014];if(_0xaffc58<_0x156241)return!![];if(_0xaffc58>_0x156241)return![];}return![];}async function oneTimeMigration(){const _0x978630=_0x71e98b;let _0x3accc9=dbLogs[_0x978630(0x1ea)](_0x978630(0x199))[_0x978630(0x198)]();if(isOlderVersion(_0x3accc9,_0x978630(0x16d))){let _0x3c9131=[];const _0x3e3296=dbLogs[_0x978630(0x1ea)]('logs')[_0x978630(0x198)]();_0x3e3296[_0x978630(0x186)](_0x1a9645=>{const _0x2f0067=_0x978630;_0x3c9131[_0x2f0067(0x1d1)]({'time':_0x1a9645[_0x2f0067(0x233)],'type':_0x1a9645[_0x2f0067(0x13e)],'event':_0x1a9645['event']});}),dbLogs[_0x978630(0x1ea)]('logs')[_0x978630(0x27e)](_0x3c9131)['write']();}let _0x401f8f=dbConfig[_0x978630(0x1ea)](_0x978630(0x199))['value']();if(isOlderVersion(_0x401f8f,_0x978630(0x16d))){let _0x36ed3a=dbConfig[_0x978630(0x1ea)]('bot')['find']({'botID':botID})['value']();if(_0x36ed3a){let _0x3291a5=[];_0x36ed3a[_0x978630(0x171)][_0x978630(0x186)](_0x533ce5=>{const _0x5d856f=_0x978630;_0x3291a5[_0x5d856f(0x1d1)]({'coin':_0x533ce5[_0x5d856f(0xf9)],'number':_0x533ce5[_0x5d856f(0x115)],'price':_0x533ce5[_0x5d856f(0x226)]}),delete _0x533ce5[_0x5d856f(0x115)],delete _0x533ce5[_0x5d856f(0x226)];});if(_0x3291a5[_0x978630(0x209)]!==0x0)fs['writeFile'](configbackuppath+(_0x978630(0x257)+botID+_0x978630(0x221)),JSON['stringify'](_0x3291a5,null,0x4),function(_0x89b58b){if(_0x89b58b){}});const _0x2eeba0=(_0x3069e0,_0x37ac37)=>{const _0x2ccfc9=_0x978630;let _0x496c6f=[];_0x37ac37['forEach'](_0x390da2=>{const _0x30a9b1=_0x49b3,_0x2895f5=_0x3069e0[_0x30a9b1(0x146)](_0x39baf5=>_0x39baf5[_0x30a9b1(0xf9)]==_0x390da2[_0x30a9b1(0xf9)]);if(!_0x2895f5)_0x496c6f[_0x30a9b1(0x1d1)](_0x390da2);});let _0x5ba894=[];return _0x3069e0[_0x2ccfc9(0x186)](_0x9738d2=>{const _0x4de153=_0x2ccfc9,_0xca8d29=_0x37ac37[_0x4de153(0x146)](_0xcb639c=>_0xcb639c[_0x4de153(0xf9)]==_0x9738d2[_0x4de153(0xf9)]);if(!_0xca8d29||_0xca8d29[_0x4de153(0x18a)]==0x0&&_0x9738d2[_0x4de153(0x18a)]!=0x0)_0x5ba894[_0x4de153(0x1d1)](_0x9738d2);}),{'missingDay1':_0x496c6f,'notInDay2':_0x5ba894};},_0x263b60=dbPerformance['get'](_0x978630(0x141))['cloneDeep']()[_0x978630(0x198)]();if(_0x263b60['length']>0x1){const {missingDay1:_0x226859,notInDay2:_0x3a0a9e}=_0x2eeba0(_0x3291a5,_0x263b60[0x1][_0x978630(0x1f5)]);_0x3291a5=[..._0x3291a5,..._0x226859],_0x3a0a9e[_0x978630(0x186)](_0x55bf2c=>{const _0x16fa77=_0x978630;let _0x5e6b70=_0x3291a5[_0x16fa77(0xf8)](_0x441819=>_0x441819[_0x16fa77(0xf9)]==_0x55bf2c[_0x16fa77(0xf9)]);_0x5e6b70!=-0x1&&_0x3291a5[_0x16fa77(0xfd)](_0x5e6b70,0x1);});}_0x3291a5[_0x978630(0x178)]((_0x45c300,_0x2bbb56)=>_0x45c300[_0x978630(0xf9)]>_0x2bbb56[_0x978630(0xf9)]?0x1:_0x2bbb56[_0x978630(0xf9)]>_0x45c300[_0x978630(0xf9)]?-0x1:0x0);let _0x53698b=[{'date':_0x36ed3a[_0x978630(0x219)],'changes':_0x3291a5}];_0x263b60[_0x978630(0x209)]>0x2&&_0x263b60['forEach']((_0x27f18f,_0x360ec6)=>{const _0x723995=_0x978630;if(_0x360ec6>0x0&&_0x360ec6<_0x263b60[_0x723995(0x209)]-0x1){const {missingDay1:_0x41fce5,notInDay2:_0xa420a1}=_0x2eeba0(_0x263b60[_0x360ec6]['coins'],_0x263b60[_0x360ec6+0x1][_0x723995(0x1f5)]);_0x3291a5=[],(_0x41fce5[_0x723995(0x209)]!=0x0||_0xa420a1['length']!=0x0)&&(_0x41fce5[_0x723995(0x209)]!=0x0&&_0x3291a5[_0x723995(0x1d1)](..._0x41fce5),_0xa420a1['length']!=0x0&&(_0xa420a1[_0x723995(0x186)](_0x47aebb=>{const _0x2dc57d=_0x723995;_0x47aebb[_0x2dc57d(0x18a)]=-_0x47aebb[_0x2dc57d(0x18a)];}),_0x3291a5[_0x723995(0x1d1)](..._0xa420a1)),_0x3291a5[_0x723995(0x178)]((_0x607277,_0x2bd7a8)=>_0x607277['coin']>_0x2bd7a8[_0x723995(0xf9)]?0x1:_0x2bd7a8[_0x723995(0xf9)]>_0x607277['coin']?-0x1:0x0),_0x53698b['push']({'date':_0x263b60[_0x360ec6+0x1][_0x723995(0x1ec)],'changes':_0x3291a5}));}}),dbConfig['get']('bot')[_0x978630(0x146)]({'botID':botID})[_0x978630(0x27e)]({..._0x36ed3a,'liquidity':_0x53698b})[_0x978630(0x2a2)]();}}if(isOlderVersion(_0x401f8f,'2.6.0')){let _0x20684d=dbConfig['get'](_0x978630(0x1c0))['find']({'botID':botID})['value']();if(_0x20684d){const _0x2f93bb=_0x20684d[_0x978630(0x13a)],_0x96e2b0=_0x2f93bb?capitalize(_0x2f93bb):'Binance';dbConfig[_0x978630(0x1ea)](_0x978630(0x1c0))[_0x978630(0x146)]({'botID':botID})[_0x978630(0x27e)]({'exchange':_0x96e2b0})[_0x978630(0x2a2)]();}}if(isOlderVersion(_0x401f8f,_0x978630(0x131))){let _0x30549e=dbConfig[_0x978630(0x1ea)](_0x978630(0x1c0))[_0x978630(0x146)]({'botID':botID})[_0x978630(0x198)]();if(_0x30549e){const _0x450989=_0x30549e['marketcapEnabled'],_0x140b47=_0x450989?'marketcap':![];dbConfig['get'](_0x978630(0x1c0))[_0x978630(0x146)]({'botID':botID})[_0x978630(0x27e)]({'marketcapEnabled':_0x140b47})['write']();}}if(isOlderVersion(_0x401f8f,_0x978630(0x128))){let _0x59c28b=dbConfig[_0x978630(0x1ea)](_0x978630(0x1c0))['find']({'botID':botID})[_0x978630(0x198)]();if(_0x59c28b){const _0x360758=_0x59c28b[_0x978630(0x135)],_0x5bce86=_0x360758?_0x978630(0x22b):![];dbConfig['get'](_0x978630(0x1c0))['find']({'botID':botID})[_0x978630(0x27e)]({'autoliquidity':_0x5bce86})[_0x978630(0x2a2)]();}}let _0x323385=dbPerformance[_0x978630(0x1ea)](_0x978630(0x199))[_0x978630(0x198)]();isOlderVersion(_0x323385,_0x978630(0x16d))&&setStartDatePerformance();let _0x4a6f9b=dbCoinResults['get'](_0x978630(0x199))[_0x978630(0x198)]();if(isOlderVersion(_0x4a6f9b,_0x978630(0x12a))){let _0x1a0223=dbCoinResults[_0x978630(0x1ea)]('coins')[_0x978630(0x198)]();if(_0x1a0223[_0x978630(0x209)]!=0x0)pnlGenerationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x40a021=_0x71e98b;dbConfig[_0x40a021(0x21e)](_0x40a021(0x199),serverversion)[_0x40a021(0x2a2)](),dbPerformance[_0x40a021(0x21e)]('version',serverversion)[_0x40a021(0x2a2)](),dbLogs[_0x40a021(0x21e)](_0x40a021(0x199),serverversion)[_0x40a021(0x2a2)](),dbCoinResults['set'](_0x40a021(0x199),serverversion)[_0x40a021(0x2a2)]();}function getConfiguration(_0xd58cbe){const _0x11a1fa=_0x71e98b;let _0x4acff9=dbConfig[_0x11a1fa(0x1ea)](_0x11a1fa(0x1c0))[_0x11a1fa(0x146)]({'botID':_0xd58cbe})[_0x11a1fa(0x198)]();if(_0x4acff9){let _0x26b2f6=![];typeof _0x4acff9['threshold']==_0x11a1fa(0x1ef)&&(_0x4acff9={..._0x4acff9,'threshold':Number(_0x4acff9['threshold'])},_0x26b2f6=!![]),_0x4acff9[_0x11a1fa(0x293)]==undefined&&(_0x4acff9={..._0x4acff9,'change24h':-0x14},_0x26b2f6=!![]),_0x4acff9['fiat']==undefined&&(_0x4acff9={..._0x4acff9,'fiat':_0x11a1fa(0x1bb)},_0x26b2f6=!![]),_0x4acff9[_0x11a1fa(0xf7)]==undefined&&(_0x4acff9={..._0x4acff9,'onepagemode':settings['onepagemode']},_0x26b2f6=!![]),_0x4acff9['colorscheme']==undefined&&(_0x4acff9={..._0x4acff9,'colorscheme':_0x11a1fa(0x266)},_0x26b2f6=!![]),_0x4acff9[_0x11a1fa(0x135)]==undefined&&(_0x4acff9={..._0x4acff9,'autoliquidity':_0x11a1fa(0x22b)},_0x26b2f6=!![]),_0x4acff9[_0x11a1fa(0x1a9)]==undefined&&(_0x4acff9={..._0x4acff9,'marketcapApi':settings[_0x11a1fa(0x1a9)]?!![]:![]},_0x26b2f6=!![]),_0x4acff9['marketcapEnabled']==undefined&&(_0x4acff9={..._0x4acff9,'marketcapEnabled':![]},_0x26b2f6=!![]),_0x26b2f6&&(_0x4acff9={'botID':_0x4acff9[_0x11a1fa(0x14c)],'exchange':_0x4acff9[_0x11a1fa(0x13a)],'apiKey':_0x4acff9[_0x11a1fa(0x142)],'apiSecret':_0x4acff9['apiSecret'],'apiPassword':_0x4acff9['apiPassword'],'basecoin':_0x4acff9['basecoin'],'botname':_0x4acff9[_0x11a1fa(0x21a)],'showname':_0x4acff9[_0x11a1fa(0x18c)],'threshold':_0x4acff9[_0x11a1fa(0x159)],'ordertype':_0x4acff9['ordertype'],'timeout':_0x4acff9[_0x11a1fa(0x1f7)],'fiat':_0x4acff9[_0x11a1fa(0xfa)],'startdate':_0x4acff9[_0x11a1fa(0x219)],'recreate':_0x4acff9['recreate'],'timeshift':_0x4acff9[_0x11a1fa(0x1eb)],'onepagemode':_0x4acff9['onepagemode'],'headless':_0x4acff9[_0x11a1fa(0x1f2)],'cooldown':_0x4acff9[_0x11a1fa(0x121)],'change24h':_0x4acff9['change24h'],'emojibuy':_0x4acff9['emojibuy'],'emojisell':_0x4acff9[_0x11a1fa(0x112)],'colorscheme':_0x4acff9['colorscheme'],'marketcapApi':_0x4acff9['marketcapApi'],'marketcapEnabled':_0x4acff9['marketcapEnabled'],'portfolio':_0x4acff9[_0x11a1fa(0x171)],'autoliquidity':_0x4acff9[_0x11a1fa(0x135)],'liquidity':_0x4acff9['liquidity'],'openOrders':_0x4acff9[_0x11a1fa(0x273)]},dbConfig[_0x11a1fa(0x1ea)](_0x11a1fa(0x1c0))[_0x11a1fa(0x15e)]()['write'](),dbConfig[_0x11a1fa(0x1ea)](_0x11a1fa(0x1c0))[_0x11a1fa(0x1d1)](_0x4acff9)['write']());}else _0x4acff9={'botID':_0xd58cbe,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':'Bot\x20'+_0xd58cbe,'showname':![],'threshold':0x3,'ordertype':_0x11a1fa(0x13b),'timeout':0x14,'fiat':_0x11a1fa(0x1bb),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x11a1fa(0x1eb)],'onepagemode':settings[_0x11a1fa(0xf7)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':'red_yellow_blue','marketcapApi':settings[_0x11a1fa(0x1a9)]?!![]:![],'marketcapEnabled':![],'portfolio':[],'autoliquidity':'update-liquidity','liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x4acff9;}function emittedConfiguration(){const _0x148623=_0x71e98b;let _0x37ff37;if(config['apiKey']=='')_0x37ff37={...config,'configstate':'initial'};else config[_0x148623(0x142)]==_0x148623(0x176)?_0x37ff37={...config,'configstate':'recovery'}:(_0x37ff37={...config,'apiKey':_0x148623(0x285),'apiSecret':_0x148623(0x285)},config['apiPassword']&&(_0x37ff37[_0x148623(0x24d)]=_0x148623(0x285)));return _0x37ff37[_0x148623(0x1f9)]=enableFiatToggle,_0x37ff37;}function getSettings(){const _0x365c88=_0x71e98b;return dbSettings[_0x365c88(0x1ea)](_0x365c88(0x25b))[_0x365c88(0x198)]();}function getSecure(){const _0x1c51e2=_0x71e98b;return dbSecure[_0x1c51e2(0x1ea)](_0x1c51e2(0x2ab))[_0x1c51e2(0x198)]()||{};}function updateTimeshift(_0x4a9751){const _0x3482c0=_0x71e98b;let _0x3e4013=dbConfig[_0x3482c0(0x1ea)]('bot')[_0x3482c0(0x146)]({'botID':botID})[_0x3482c0(0x198)]();_0x3e4013&&dbConfig[_0x3482c0(0x1ea)](_0x3482c0(0x1c0))[_0x3482c0(0x146)]({'botID':botID})[_0x3482c0(0x27e)]({'timeshift':_0x4a9751})[_0x3482c0(0x2a2)](),config[_0x3482c0(0x1eb)]=_0x4a9751,proxyEmit(_0x3482c0(0x20a),emittedConfiguration());}function updateOnepagemode(_0x54793a){const _0x7f817e=_0x71e98b;let _0x4f3e0e=dbConfig[_0x7f817e(0x1ea)](_0x7f817e(0x1c0))[_0x7f817e(0x146)]({'botID':botID})[_0x7f817e(0x198)]();_0x4f3e0e&&dbConfig[_0x7f817e(0x1ea)]('bot')['find']({'botID':botID})['assign']({'onepagemode':_0x54793a})[_0x7f817e(0x2a2)](),config[_0x7f817e(0xf7)]=_0x54793a,proxyEmit(_0x7f817e(0x20a),emittedConfiguration());}function updateMarketcapApi(_0x28db8e){const _0x4327f3=_0x71e98b,_0x31bdda=_0x28db8e?!![]:![];let _0x5bd1a9=dbConfig[_0x4327f3(0x1ea)]('bot')[_0x4327f3(0x146)]({'botID':botID})[_0x4327f3(0x198)]();_0x5bd1a9&&dbConfig[_0x4327f3(0x1ea)](_0x4327f3(0x1c0))[_0x4327f3(0x146)]({'botID':botID})['assign']({'marketcapApi':_0x31bdda})['write'](),config[_0x4327f3(0x1a9)]=_0x31bdda,getMarketCap(),proxyEmit(_0x4327f3(0x20a),emittedConfiguration());}async function storeConfiguration(_0x1925cf){const _0x2066c5=_0x71e98b;logger[_0x2066c5(0x165)](_0x2066c5(0x2b6));let _0x3a05e4=![];_0x1925cf[_0x2066c5(0x162)]&&(_0x1925cf['configstate']==_0x2066c5(0x22c)&&(_0x3a05e4=!![]),delete _0x1925cf[_0x2066c5(0x162)]);if(pidBalances)clearTimeout(pidBalances);setBlockTransactionDetection(!![]);let _0x17acca=![],_0x2123ca=![],_0x312003=[];_0x1925cf[_0x2066c5(0x171)][_0x2066c5(0x186)](_0x1806e7=>{const _0x31ccdf=_0x2066c5;if(!_0x1806e7['excluded']&&_0x1806e7[_0x31ccdf(0xf9)]!=_0x1925cf[_0x31ccdf(0x250)])_0x312003[_0x31ccdf(0x1d1)](_0x1806e7[_0x31ccdf(0x274)]);}),_0x312003[_0x2066c5(0x186)](_0x260991=>{const _0x59bef5=_0x2066c5,_0x4dbefa=currentCoins[_0x59bef5(0x146)](_0x124311=>_0x124311[_0x59bef5(0x274)]==_0x260991);!_0x4dbefa&&(_0x17acca=!![]);}),currentCoins['forEach'](_0x3bcc4e=>{const _0x56f252=_0x2066c5;if(_0x3bcc4e[_0x56f252(0xf9)]!=config['basecoin']){const _0x48b821=_0x312003[_0x56f252(0x146)](_0x5d3de0=>_0x5d3de0==_0x3bcc4e[_0x56f252(0x274)]);!_0x48b821&&(_0x17acca=!![]);}}),_0x1925cf[_0x2066c5(0x171)][_0x2066c5(0x186)](_0x7ba20=>{const _0x5d5552=_0x2066c5,_0x2fdf72=config['portfolio']['find'](_0xd6d019=>_0xd6d019[_0x5d5552(0xf9)]==_0x7ba20[_0x5d5552(0xf9)]);if(_0x2fdf72&&_0x7ba20[_0x5d5552(0x22e)]!=_0x2fdf72[_0x5d5552(0x22e)])_0x2123ca=!![];});let _0x5846f4=dbConfig[_0x2066c5(0x1ea)]('bot')['find']({'botID':botID})[_0x2066c5(0x198)]();_0x1925cf={..._0x1925cf,'apiKey':decryptRSA(secure[_0x2066c5(0x225)],_0x1925cf[_0x2066c5(0x142)]),'apiSecret':decryptRSA(secure[_0x2066c5(0x225)],_0x1925cf['apiSecret'])};_0x1925cf[_0x2066c5(0x24d)]&&(_0x1925cf[_0x2066c5(0x24d)]=decryptRSA(secure[_0x2066c5(0x225)],_0x1925cf['apiPassword']));let _0x135273=![];if(_0x5846f4){_0x1925cf[_0x2066c5(0x142)]==_0x2066c5(0x285)?_0x1925cf[_0x2066c5(0x142)]=config[_0x2066c5(0x142)]:_0x135273=!![];_0x1925cf['apiSecret']=='************'?_0x1925cf[_0x2066c5(0x12c)]=config['apiSecret']:_0x135273=!![];if(_0x1925cf[_0x2066c5(0x24d)]==_0x2066c5(0x285))_0x1925cf[_0x2066c5(0x24d)]=config[_0x2066c5(0x24d)];else{if(_0x1925cf[_0x2066c5(0x24d)])_0x135273=!![];}dbConfig[_0x2066c5(0x1ea)](_0x2066c5(0x1c0))['find']({'botID':botID})[_0x2066c5(0x27e)](_0x1925cf)[_0x2066c5(0x2a2)]();}else dbConfig[_0x2066c5(0x1ea)]('bot')[_0x2066c5(0x1d1)](_0x1925cf)[_0x2066c5(0x2a2)](),_0x135273=!![],process['send']({'status':'enabled','live':'running'},_0x893e56=>{});process['send']({'botname':_0x1925cf[_0x2066c5(0x21a)]},_0x2cc36b=>{}),config={..._0x1925cf},updateBotManager(),proxyEmit('configuration-stored'),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x135273)await reset(!![]);else _0x17acca||_0x2123ca?await reset(![]):getBalances();setBlockTransactionDetection(![]);}async function storeHeadless(_0x4a4fea){const _0xa76e07=_0x71e98b,_0x20255c={...config,'headless':_0x4a4fea[_0xa76e07(0x1f2)]};let _0x51218b=dbConfig[_0xa76e07(0x1ea)](_0xa76e07(0x1c0))[_0xa76e07(0x146)]({'botID':botID})[_0xa76e07(0x198)]();_0x51218b&&dbConfig[_0xa76e07(0x1ea)](_0xa76e07(0x1c0))['find']({'botID':botID})[_0xa76e07(0x27e)](_0x20255c)[_0xa76e07(0x2a2)](),config={..._0x20255c},updateBotManager(),proxyEmit(_0xa76e07(0x20a),emittedConfiguration());}async function storeFiat(_0x21c7cf){const _0x3003f2=_0x71e98b,_0x60ee09={...config,'fiat':_0x21c7cf};let _0x203f17=dbConfig['get'](_0x3003f2(0x1c0))[_0x3003f2(0x146)]({'botID':botID})[_0x3003f2(0x198)]();_0x203f17&&dbConfig[_0x3003f2(0x1ea)]('bot')[_0x3003f2(0x146)]({'botID':botID})['assign'](_0x60ee09)[_0x3003f2(0x2a2)](),config={..._0x60ee09},proxyEmit(_0x3003f2(0x20a),emittedConfiguration());}function resetHistory(){const _0x8ed8bf=_0x71e98b;logger[_0x8ed8bf(0x1c8)]('Resetting\x20bot\x20history');try{if(fs[_0x8ed8bf(0x254)](path['join'](configpath,_0x8ed8bf(0x10d)+botID+_0x8ed8bf(0x234))))fs[_0x8ed8bf(0x214)](path[_0x8ed8bf(0x1d8)](configpath,'bot-'+botID+_0x8ed8bf(0x234)));if(fs[_0x8ed8bf(0x254)](path[_0x8ed8bf(0x1d8)](configpath,'bot-'+botID+_0x8ed8bf(0x136))))fs[_0x8ed8bf(0x214)](path[_0x8ed8bf(0x1d8)](configpath,_0x8ed8bf(0x10d)+botID+_0x8ed8bf(0x136)));if(fs[_0x8ed8bf(0x254)](path[_0x8ed8bf(0x1d8)](configpath,_0x8ed8bf(0x10d)+botID+_0x8ed8bf(0x26b))))fs[_0x8ed8bf(0x214)](path[_0x8ed8bf(0x1d8)](configpath,_0x8ed8bf(0x10d)+botID+'-results.json'));}catch(_0x51c576){if(_0x51c576)logger[_0x8ed8bf(0x1c8)](_0x8ed8bf(0xf6),_0x51c576);}const _0x5431cd=getDate();let _0x4f06a6=[];currentCoins['forEach'](_0x23b315=>{const _0x45cdf8=_0x8ed8bf;_0x4f06a6['push']({'coin':_0x23b315[_0x45cdf8(0xf9)],'number':_0x23b315[_0x45cdf8(0x18a)],'price':_0x23b315[_0x45cdf8(0x29b)]});});let _0x2a5a5e=dbConfig[_0x8ed8bf(0x1ea)](_0x8ed8bf(0x1c0))[_0x8ed8bf(0x146)]({'botID':botID})[_0x8ed8bf(0x198)]();_0x2a5a5e&&(dbConfig[_0x8ed8bf(0x1ea)](_0x8ed8bf(0x1c0))[_0x8ed8bf(0x146)]({'botID':botID})[_0x8ed8bf(0x27e)]({'liquidity':[{'date':_0x5431cd,'changes':_0x4f06a6}]})[_0x8ed8bf(0x2a2)](),config[_0x8ed8bf(0x189)]=[]),restartBot(!![]);}function noslash(_0x198e83){const _0x500a81=_0x71e98b;return _0x198e83[_0x500a81(0x253)]('/','');}function updateHighestFee(_0x5a0871){const _0x815c8b=_0x71e98b;if(_0x5a0871[_0x815c8b(0x1ce)]){let _0x1a33fe={'filled':_0x5a0871[_0x815c8b(0x23b)]*_0x5a0871[_0x815c8b(0x14f)],'amount':_0x5a0871['filled']*_0x5a0871[_0x815c8b(0x14f)],'side':_0x5a0871[_0x815c8b(0x23a)]==_0x815c8b(0x106)?_0x815c8b(0x275):_0x815c8b(0x106),'price':0x1/_0x5a0871[_0x815c8b(0x14f)]};_0x5a0871={..._0x5a0871,..._0x1a33fe};}const _0x516b38=defaultFee*_0x5a0871[_0x815c8b(0x23b)]*_0x5a0871[_0x815c8b(0x14f)];lastFees[_0x815c8b(0x242)][_0x815c8b(0x209)]===0x14&&lastFees[_0x815c8b(0x242)][_0x815c8b(0x271)](),lastFees['recent20'][_0x815c8b(0x1d1)](_0x516b38),lastFees['highest']=Math[_0x815c8b(0x2a5)](...lastFees['recent20']);}async function updateNumberCoinsCcxt(_0xff7f2){const _0x4d5249=_0x71e98b;logger[_0x4d5249(0x165)](_0x4d5249(0x264)+_0xff7f2[_0x4d5249(0x274)]+_0x4d5249(0x29e)+_0xff7f2['status']+_0x4d5249(0x29e)+_0xff7f2[_0x4d5249(0x23b)]+'\x20/\x20'+_0xff7f2['amount']+_0x4d5249(0x29e)+_0xff7f2['id']);let _0x5ab9cc=_0xff7f2[_0x4d5249(0x100)],_0x5d7219=![];currentCoins[_0x4d5249(0x186)](_0x43b64e=>{const _0x501a31=_0x4d5249;_0x43b64e[_0x501a31(0x274)]==_0xff7f2['symbol']&&(_0x5d7219=!![]);});if(!_0x5d7219)return;const _0x53e8b1=currentCoins[_0x4d5249(0x146)](_0x38cd9f=>_0x38cd9f[_0x4d5249(0x274)]==_0xff7f2['symbol']),_0x568a8e=_0x53e8b1[_0x4d5249(0xf9)],_0x34d612=_0x4a66eb=>{const _0x258c10=_0x4d5249,_0x596ee5=currentCoins[_0x258c10(0x146)](_0x1fadf6=>_0x1fadf6['symbol']==_0xff7f2[_0x258c10(0x274)]);if(_0x596ee5)_0x596ee5[_0x258c10(0x125)]=_0x4a66eb;};let _0x1b6b12=![];for(const _0x49fc0d of lastOrders){const _0x31644f=0x64,_0x347cc9=0x1388;let _0x504db1=0x0;while(!_0x49fc0d[_0x4d5249(0x172)]&&_0x504db1*_0x31644f<_0x347cc9){_0x504db1++,await sleep(_0x31644f);}if(_0x504db1>0x0)logger[_0x4d5249(0x165)](_0x4d5249(0x1e4)+_0x504db1*_0x31644f/0x3e8+_0x4d5249(0x1a6));_0x49fc0d[_0x4d5249(0x172)]==_0xff7f2['id']&&(_0x1b6b12=!![]);}if(_0x5ab9cc==_0x4d5249(0x283)){_0x34d612(_0x4d5249(0x283));if(_0xff7f2[_0x4d5249(0x23b)]>0x0&&_0xff7f2[_0x4d5249(0x23b)]<_0xff7f2[_0x4d5249(0x1e6)]){if(_0x1b6b12){setBlockTransactionDetection(!![]),logger[_0x4d5249(0x165)]('1\x20-\x20partially\x20FILLED\x20('+_0xff7f2[_0x4d5249(0x23b)]+')\x20known\x20order:\x20'+_0xff7f2['id']);const _0x2bd5e9=await getCoins(balanceUpdateDelay,undefined,undefined,_0x568a8e);[currentCoins,currentCoinsAll]=_0x2bd5e9,setBlockTransactionDetection(![]);}else logger[_0x4d5249(0x165)]('1\x20-\x20partially\x20FILLED\x20('+_0xff7f2['filled']+_0x4d5249(0x17a)+_0xff7f2['id']),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay);}}else{if(_0x5ab9cc==_0x4d5249(0x161)){_0x34d612('canceled'),lastOrders=lastOrders[_0x4d5249(0x1e7)](_0x33dd39=>_0x33dd39['symbol']!=_0xff7f2[_0x4d5249(0x274)]);const _0x4dd8c5=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x4dd8c5,setBlockTransactionDetection(![]),await getOpenOrders(),handleOpenOrders();}else{if(_0x5ab9cc==_0x4d5249(0x2a8)){if(lastOrders)for(const _0x53f1b0 of lastOrders){if(_0x53f1b0[_0x4d5249(0x172)]==_0xff7f2['id']){logger[_0x4d5249(0x165)](_0x4d5249(0x23f)+_0xff7f2['id']),_0x1b6b12=!![];if(_0x53f1b0[_0x4d5249(0x23b)]==0x0){setBlockTransactionDetection(!![]),logger[_0x4d5249(0x165)](_0x4d5249(0x104)+_0xff7f2['id']);if(_0xff7f2[_0x4d5249(0x152)])_0x53f1b0[_0x4d5249(0x14f)]=_0xff7f2[_0x4d5249(0x152)];else{if(_0xff7f2[_0x4d5249(0x14f)])_0x53f1b0[_0x4d5249(0x14f)]=_0xff7f2[_0x4d5249(0x14f)];else{}}_0x53f1b0['filled']=_0xff7f2['filled'],updateHighestFee(_0x53f1b0);const _0x4dbe8c=await getCoins(balanceUpdateDelay,undefined,undefined,_0x568a8e);[currentCoins,currentCoinsAll]=_0x4dbe8c,setBlockTransactionDetection(![]),await validateOrders(),_0x34d612('filled'),_0x53f1b0['fee']={'currency':_0xff7f2[_0x4d5249(0x235)]?_0xff7f2[_0x4d5249(0x235)]['currency']:null,'cost':_0xff7f2[_0x4d5249(0x235)]?_0xff7f2[_0x4d5249(0x235)][_0x4d5249(0x29d)]:0x0},await updatePnL(_0x53f1b0);}}}!_0x1b6b12&&(logger[_0x4d5249(0x165)](_0x4d5249(0x138)+_0xff7f2['id']),_0x34d612(_0x4d5249(0x23b)),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay),await updateOpenOrders(),handleOpenOrders());}}}if(lastBalances){let _0x1ed565=JSON[_0x4d5249(0x22d)](lastBalances[_0x4d5249(0x171)]);const _0x42ca46=_0x1ed565[_0x4d5249(0x146)](_0x22d5b7=>_0x22d5b7[_0x4d5249(0x274)]==_0xff7f2[_0x4d5249(0x274)]);if(_0x42ca46){if(_0x5ab9cc==_0x4d5249(0x283))_0x42ca46[_0x4d5249(0x125)]=_0x42ca46['orderstatus']=='filled'?_0x4d5249(0x23b):_0x4d5249(0x283);else{if(_0x5ab9cc=='canceled')_0x42ca46[_0x4d5249(0x125)]=_0x42ca46['orderstatus']=='filled'?_0x4d5249(0x23b):_0x4d5249(0x161);else _0x5ab9cc==_0x4d5249(0x2a8)&&(_0x42ca46[_0x4d5249(0x125)]=_0x4d5249(0x23b));}}lastBalances={...lastBalances,'portfolio':JSON[_0x4d5249(0x1e8)](_0x1ed565)},proxyEmit(_0x4d5249(0x126),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x54564e=_0x71e98b;await getOpenOrders();let _0x4c8ab6=![];currentCoins[_0x54564e(0x186)](_0x169078=>{const _0x20c763=_0x54564e;_0x4c8ab6=allOpenOrders[_0x20c763(0x146)](_0x341952=>_0x341952['symbol']==_0x169078[_0x20c763(0x274)]),_0x169078[_0x20c763(0x125)]=_0x4c8ab6?_0x20c763(0x283):'none';});}async function fetchBalance(_0x44463d=!![]){const _0x50bbed=_0x71e98b;let _0x1143c4,_0x2961c2;try{return _0x1143c4=await exchange[_0x50bbed(0x2b2)](),_0x2961c2=_0x1143c4[_0x50bbed(0x280)],_0x2961c2;}catch(_0x2fe3eb){return!_0x44463d?handleErrorNoStop(_0x2fe3eb,_0x50bbed(0x1c2)):await handleError(_0x2fe3eb,_0x50bbed(0x1c2)),![];}}async function getCoins(_0x446b9f=0x0,_0x1748ec=!![],_0x584404=config[_0x71e98b(0x250)],_0x23fcbb){const _0x1d74fc=_0x71e98b;let _0x54991a=[],_0x19624e=[],_0x7b2fe1=[],_0x58adf8;if(_0x446b9f)await sleep(_0x446b9f);if(botPaused)return[currentCoins,currentCoinsAll];let _0x1471fa=![],_0x4d0980=0x0,_0x414ce2,_0x19f9df;_0x23fcbb&&(_0x414ce2=currentCoins[_0x1d74fc(0x146)](_0x1d7612=>_0x1d7612[_0x1d74fc(0xf9)]==_0x23fcbb),_0x414ce2&&(_0x19f9df=_0x414ce2[_0x1d74fc(0x20c)],delete _0x414ce2[_0x1d74fc(0x20c)]));while(!_0x1471fa){_0x58adf8=await fetchBalance(_0x1748ec);if(_0x58adf8){if(_0x23fcbb){if(_0x58adf8[_0x23fcbb]!=_0x19f9df)logger[_0x1d74fc(0x165)](_0x1d74fc(0x1ed)+_0x23fcbb+':\x20'+_0x58adf8[_0x23fcbb]+'\x20('+_0x19f9df+')'),_0x1471fa=!![];else{logger[_0x1d74fc(0x165)](_0x1d74fc(0x222)+_0x23fcbb+':\x20'+_0x58adf8[_0x23fcbb]+'\x20('+_0x19f9df+')'),_0x4d0980++;if(_0x4d0980<balanceUpdateRetries)await sleep(balanceUpdateDelay);else{logger['debug'](_0x1d74fc(0x16c)+_0x4d0980+_0x1d74fc(0x27f));break;}}}else break;}else return[currentCoins,currentCoinsAll];}for(const [_0x23d217,_0x1c19cf]of Object[_0x1d74fc(0x179)](_0x58adf8)){_0x7b2fe1[_0x1d74fc(0x1d1)](_0x23d217);}config[_0x1d74fc(0x171)][_0x1d74fc(0x186)](_0x52ad8c=>{const _0x36dd4c=_0x1d74fc;!_0x7b2fe1['includes'](_0x52ad8c[_0x36dd4c(0xf9)])&&(_0x58adf8[_0x52ad8c['coin']]=0x0);});if(_0x584404=='')for(const [_0x18b001,_0x52505a]of Object[_0x1d74fc(0x179)](_0x58adf8)){_0x52505a!=0x0&&_0x54991a['push']({'coin':_0x18b001});}else for(const [_0x5c57f3,_0x554700]of Object[_0x1d74fc(0x179)](_0x58adf8)){const _0x1ca00c=config['portfolio']['find'](_0x34c9fe=>_0x34c9fe['coin']==_0x5c57f3),_0x3abe73=_0x5c57f3+'/'+_0x584404,_0x64e3d0=_0x584404+'/'+_0x5c57f3,_0x2e1fcb=currentCoins[_0x1d74fc(0x146)](_0x4b4e17=>_0x4b4e17['coin']==_0x5c57f3);if((_0x554700!=0x0||_0x1ca00c)&&(allSymbols[_0x1d74fc(0x29f)](_0x3abe73)||_0x5c57f3==_0x584404))_0x2e1fcb?_0x54991a[_0x1d74fc(0x1d1)]({..._0x2e1fcb,'number':Math['max'](_0x554700+(_0x1ca00c&&_0x1ca00c[_0x1d74fc(0x22e)]||0x0),0x0)}):_0x54991a[_0x1d74fc(0x1d1)]({'coin':_0x5c57f3,'symbol':_0x3abe73,'reverse':![],'number':Math[_0x1d74fc(0x2a5)](_0x554700+(_0x1ca00c&&_0x1ca00c[_0x1d74fc(0x22e)]||0x0),0x0),'orderstatus':'none'});else{if((_0x554700!=0x0||_0x1ca00c)&&allSymbols['includes'](_0x64e3d0))_0x2e1fcb?_0x54991a[_0x1d74fc(0x1d1)]({..._0x2e1fcb,'number':Math[_0x1d74fc(0x2a5)](_0x554700+(_0x1ca00c&&_0x1ca00c['offset']||0x0),0x0)}):_0x54991a['push']({'coin':_0x5c57f3,'symbol':_0x64e3d0,'reverse':!![],'number':Math[_0x1d74fc(0x2a5)](_0x554700+(_0x1ca00c&&_0x1ca00c[_0x1d74fc(0x22e)]||0x0),0x0),'orderstatus':'none'});else _0x1ca00c&&_0x54991a['push']({'coin':_0x1ca00c[_0x1d74fc(0xf9)],'symbol':_0x1ca00c[_0x1d74fc(0x274)],'reverse':_0x1ca00c[_0x1d74fc(0x1ce)],'number':0x0,'orderstatus':_0x1d74fc(0x27a)});}}return _0x54991a[_0x1d74fc(0x178)]((_0x4c60d3,_0x1e8376)=>_0x4c60d3[_0x1d74fc(0x1d0)]<_0x1e8376[_0x1d74fc(0x1d0)]?0x1:_0x1e8376[_0x1d74fc(0x1d0)]<_0x4c60d3[_0x1d74fc(0x1d0)]?-0x1:0x0),_0x19624e=cloneDeep(_0x54991a),_0x54991a=_0x54991a[_0x1d74fc(0x1e7)](_0x1a8540=>{const _0x57970a=_0x1d74fc,_0x2c49a5=config[_0x57970a(0x171)][_0x57970a(0x146)](_0x49d9dc=>_0x49d9dc[_0x57970a(0xf9)]==_0x1a8540[_0x57970a(0xf9)]);return _0x2c49a5&&!_0x2c49a5['excluded'];}),[_0x54991a,_0x19624e];}async function getOpenOrders(){const _0x1e658c=_0x71e98b;let _0x3e90da;allOpenOrders=[];try{for(const _0x4d614 of config['portfolio']){!_0x4d614[_0x1e658c(0x14a)]&&_0x4d614[_0x1e658c(0xf9)]!=config[_0x1e658c(0x250)]&&(_0x3e90da=await exchange[_0x1e658c(0x118)](_0x4d614[_0x1e658c(0x274)]),_0x3e90da[_0x1e658c(0x209)]>0x0&&allOpenOrders[_0x1e658c(0x1d1)](_0x3e90da[0x0]));}}catch(_0x3f8b6f){await handleError(_0x3f8b6f,_0x1e658c(0x196));}}async function handleOpenOrders(_0x2817ca=0x0){const _0x47ca1=_0x71e98b;allOpenOrders['length']==0x0&&lockOrders==ORDERS[_0x47ca1(0x1db)]&&allOrdersPlaced&&(_0x2817ca==0x0?(logger['debug'](_0x47ca1(0x245)),_0x2817ca++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger['debug'](_0x47ca1(0x163)),validateOrders(_0x47ca1(0x1aa))));}async function testAPI(){const _0x31190b=_0x71e98b;try{return await exchange[_0x31190b(0x2b2)](),!![];}catch(_0x5bceba){return loading[_0x31190b(0x193)]=!![],emitLoadingProgress(),handleErrorNoStop(_0x5bceba,'testAPI()'),logger[_0x31190b(0x165)](_0x31190b(0x265),_0x5bceba),botPaused=!![],![];}}async function testNewAPI(_0x77a60b){const _0x554f62=_0x71e98b;logger[_0x554f62(0x165)](_0x554f62(0x1ba));const _0x2eb5c7=ccxt[_0x554f62(0x258)][_0x77a60b[_0x554f62(0x13a)][_0x554f62(0x2a6)]()],_0x28797d=new _0x2eb5c7({'apiKey':_0x77a60b['apiKey'],'secret':_0x77a60b[_0x554f62(0x12c)],'options':{'defaultType':'spot'}});if(_0x77a60b[_0x554f62(0x24d)])_0x28797d['password']=_0x77a60b['apiPassword'];try{await _0x28797d[_0x554f62(0x2b2)](),botPaused=![];}catch(_0x3937c2){logger[_0x554f62(0x165)](_0x554f62(0x19c)+_0x3937c2[_0x554f62(0x11b)]());throw _0x3937c2;}}function cloneDeep(_0x19fa63){const _0x135334=_0x71e98b;return JSON[_0x135334(0x22d)](JSON[_0x135334(0x1e8)](_0x19fa63));}async function getPortfolio(_0x1f3668){const _0x35ec24=_0x71e98b;let _0x5c1aa9=[],_0x2ca9ff=[],_0x4f56c4=[],_0x12757e;_0x1f3668[_0x35ec24(0x142)]=decryptRSA(secure[_0x35ec24(0x225)],_0x1f3668['apiKey']),_0x1f3668[_0x35ec24(0x12c)]=decryptRSA(secure[_0x35ec24(0x225)],_0x1f3668[_0x35ec24(0x12c)]);if(_0x1f3668[_0x35ec24(0x24d)])_0x1f3668['apiPassword']=decryptRSA(secure['privateKey'],_0x1f3668[_0x35ec24(0x24d)]);if(_0x1f3668[_0x35ec24(0x142)]!==_0x35ec24(0x285)||_0x1f3668['apiSecret']!==_0x35ec24(0x285)||_0x1f3668['apiPassword']&&_0x1f3668[_0x35ec24(0x24d)]!==_0x35ec24(0x285)){if(config[_0x35ec24(0x13a)]){if(_0x1f3668[_0x35ec24(0x142)]==_0x35ec24(0x285))_0x1f3668[_0x35ec24(0x142)]=config['apiKey'];if(_0x1f3668[_0x35ec24(0x12c)]==_0x35ec24(0x285))_0x1f3668['apiSecret']=config[_0x35ec24(0x12c)];if(_0x1f3668[_0x35ec24(0x24d)]==_0x35ec24(0x285))_0x1f3668['apiPassword']=config[_0x35ec24(0x24d)];}try{if(_0x1f3668['testApi'])await testNewAPI(_0x1f3668);}catch(_0x442ba7){if(_0x442ba7[_0x35ec24(0x11b)]()[_0x35ec24(0x29f)](_0x35ec24(0x23d))){logHistory(_0x35ec24(0x215),_0x35ec24(0x2b1)),logHistory(_0x35ec24(0x215),_0x35ec24(0x213)+_0x442ba7[_0x35ec24(0x11b)]()),proxyEmit('portfolio1',![]);return;}else{if(_0x442ba7[_0x35ec24(0x11b)]()[_0x35ec24(0x29f)]('PermissionDenied')){logHistory(_0x35ec24(0x215),_0x35ec24(0x1bc)),logHistory(_0x35ec24(0x215),_0x35ec24(0x213)+_0x442ba7[_0x35ec24(0x11b)]()),proxyEmit(_0x35ec24(0x1c3),![]);return;}else{logHistory(_0x35ec24(0x215),'Error\x20occurred:\x20'+_0x442ba7[_0x35ec24(0x11b)]()),logger['debug'](_0x35ec24(0x265),_0x442ba7),proxyEmit(_0x35ec24(0x1c3),![]);return;}}}exchange?updateExchange(_0x1f3668[_0x35ec24(0x142)],_0x1f3668[_0x35ec24(0x12c)],_0x1f3668[_0x35ec24(0x24d)]):await initExchange(_0x1f3668['exchange'],_0x1f3668[_0x35ec24(0x142)],_0x1f3668[_0x35ec24(0x12c)],_0x1f3668[_0x35ec24(0x24d)]);await loadSymbols();const _0x58d4d6=await getCoins(0x0,![],_0x1f3668['basecoin']);_0x4f56c4=cloneDeep(_0x58d4d6[0x1]);}else{const _0x158f7c=await getCoins();_0x4f56c4=cloneDeep(_0x158f7c[0x1]);}if(_0x1f3668[_0x35ec24(0x250)]=='')proxyEmit(_0x35ec24(0x1c3),!![]),proxyEmit(_0x35ec24(0x15d),_0x4f56c4);else{_0x4f56c4['forEach'](_0x2ffacd=>{const _0x43182b=_0x35ec24;if(_0x2ffacd[_0x43182b(0xf9)]!=_0x1f3668[_0x43182b(0x250)]&&allSymbols[_0x43182b(0x29f)](_0x2ffacd[_0x43182b(0x274)]))_0x5c1aa9[_0x43182b(0x1d1)](_0x2ffacd['symbol']);});if(_0x5c1aa9[_0x35ec24(0x209)]==0x0)logHistory(_0x35ec24(0x215),_0x35ec24(0x1bd));else{try{_0x2ca9ff=await getTickers(_0x5c1aa9);}catch(_0x853f37){logHistory(_0x35ec24(0x215),_0x35ec24(0x18d)),logger['debug'](_0x35ec24(0x265),_0x853f37),proxyEmit(_0x35ec24(0x1c3),![]);return;}_0x4f56c4['forEach'](_0x3a5589=>{const _0x15d5f3=_0x35ec24;_0x3a5589[_0x15d5f3(0xf9)]!=_0x1f3668[_0x15d5f3(0x250)]?_0x2ca9ff[_0x3a5589[_0x15d5f3(0x274)]]?_0x12757e=_0x3a5589[_0x15d5f3(0x1ce)]?0x1/_0x2ca9ff[_0x3a5589[_0x15d5f3(0x274)]][_0x15d5f3(0x29b)]:_0x2ca9ff[_0x3a5589[_0x15d5f3(0x274)]][_0x15d5f3(0x29b)]:_0x12757e=0x0:_0x12757e=0x1,_0x3a5589['price']=formatResult(_0x12757e,0x8);}),await getMarketCap(_0x4f56c4),proxyEmit(_0x35ec24(0x1c3),!![]),proxyEmit(_0x35ec24(0x15d),_0x4f56c4);}}}function truncateTradeAmount(_0x1d41b0,_0x578c9c){let _0x50ec63=0x0;try{_0x50ec63=exchange['amountToPrecision'](_0x1d41b0,_0x578c9c);}catch(_0xe048c0){}return _0x50ec63;}function checkMinimums(_0x288ce0){const _0x1a00c0=_0x71e98b;let _0x591961=!![];const _0x2f4d3e=!_0x288ce0[_0x1a00c0(0x1ce)]?markets[_0x288ce0['symbol']]['limits'][_0x1a00c0(0x1e6)][_0x1a00c0(0x1dd)]:markets[_0x288ce0[_0x1a00c0(0x274)]][_0x1a00c0(0x2aa)][_0x1a00c0(0x29d)][_0x1a00c0(0x1dd)],_0x226999=!_0x288ce0['reverse']?markets[_0x288ce0[_0x1a00c0(0x274)]]['limits']['cost'][_0x1a00c0(0x1dd)]:markets[_0x288ce0[_0x1a00c0(0x274)]][_0x1a00c0(0x2aa)][_0x1a00c0(0x1e6)][_0x1a00c0(0x1dd)],_0xb16958=truncateTradeAmount(_0x288ce0['symbol'],_0x288ce0[_0x1a00c0(0x109)]);_0x288ce0['trade']=_0xb16958;if(Math['abs'](_0xb16958)<_0x2f4d3e)_0x591961=![];if(Math[_0x1a00c0(0x230)](_0xb16958)*_0x288ce0['last']<_0x226999)_0x591961=![];if(_0x288ce0[_0x1a00c0(0x23a)]==_0x1a00c0(0x106)){let _0x4416fb=config[_0x1a00c0(0x171)][_0x1a00c0(0x146)](_0x5d5dc6=>_0x5d5dc6[_0x1a00c0(0xf9)]==_0x288ce0[_0x1a00c0(0xf9)]);if(_0x4416fb['offset']>0x0){if(Math[_0x1a00c0(0x230)](_0xb16958)>_0x288ce0['number']-_0x4416fb[_0x1a00c0(0x22e)])_0x591961=![];}else{if(Math[_0x1a00c0(0x230)](_0xb16958)>_0x288ce0[_0x1a00c0(0x18a)])_0x591961=![];}}if(_0x288ce0[_0x1a00c0(0x23a)]==_0x1a00c0(0x275)){let _0x34c622=config[_0x1a00c0(0x171)][_0x1a00c0(0x146)](_0x3be06b=>_0x3be06b[_0x1a00c0(0xf9)]==config[_0x1a00c0(0x250)]),_0x5ea4c2=currentCoins[_0x1a00c0(0x146)](_0x135a4b=>_0x135a4b['coin']==config[_0x1a00c0(0x250)]);if(_0x34c622['offset']>0x0){if(Math[_0x1a00c0(0x230)](_0xb16958)*_0x288ce0[_0x1a00c0(0x29b)]>_0x5ea4c2[_0x1a00c0(0x18a)]-_0x34c622[_0x1a00c0(0x22e)])_0x591961=![];}else{if(Math['abs'](_0xb16958)*_0x288ce0['last']>_0x5ea4c2['number'])_0x591961=![];}}return _0x591961;}async function getBalances(_0x2bc867=!![]){const _0x12fc77=_0x71e98b;if(botPaused)return;let _0x55d160=0x0,_0x461c00;const _0x472aac=config['threshold'];if(config[_0x12fc77(0x1f2)]&&config['change24h']<0x0)await validate24hChanges();currentCoins[_0x12fc77(0x186)](_0xd479b4=>{const _0x5427e3=_0x12fc77;if(_0xd479b4[_0x5427e3(0xf9)]!=config['basecoin']){let _0x15200a=gTicker[noslash(_0xd479b4['symbol'])];_0x461c00=_0xd479b4[_0x5427e3(0x1ce)]?0x1/_0x15200a:_0x15200a;}else _0x461c00=0x1;let _0x39ae75=_0xd479b4[_0x5427e3(0x18a)]*_0x461c00;_0x55d160+=_0x39ae75,_0xd479b4[_0x5427e3(0x29b)]=formatResult(Number(_0x461c00),0x8),_0xd479b4[_0x5427e3(0x198)]=_0x39ae75;}),currentCoins[_0x12fc77(0x186)](_0x84ae5f=>{const _0x44763e=_0x12fc77;let _0x1312d7=config[_0x44763e(0x171)]['find'](_0x19c8a5=>_0x19c8a5[_0x44763e(0xf9)]==_0x84ae5f[_0x44763e(0xf9)]),_0x417da5=Number(_0x1312d7[_0x44763e(0x26d)]),_0x26da43=_0x84ae5f[_0x44763e(0x198)]/_0x55d160*0x64,_0x14018f=_0x417da5*_0x55d160/0x64/_0x84ae5f[_0x44763e(0x29b)]-_0x84ae5f['number'];_0x84ae5f[_0x44763e(0x26d)]=formatResult(_0x26da43,0x3),_0x84ae5f[_0x44763e(0x20d)]=formatResult(_0x417da5,0x3),_0x84ae5f[_0x44763e(0x109)]=formatResult(_0x14018f,0x8),_0x84ae5f[_0x44763e(0x23a)]='',_0x84ae5f[_0x44763e(0x143)]=![];if(_0x84ae5f['coin']!=config['basecoin']){if(_0x84ae5f[_0x44763e(0x26d)]>_0x417da5)_0x84ae5f[_0x44763e(0x23a)]=_0x44763e(0x106),_0x84ae5f[_0x44763e(0x143)]=checkMinimums(_0x84ae5f);else _0x84ae5f[_0x44763e(0x26d)]<_0x417da5&&(_0x84ae5f[_0x44763e(0x23a)]=_0x44763e(0x275),_0x84ae5f[_0x44763e(0x143)]=checkMinimums(_0x84ae5f));}_0x84ae5f[_0x44763e(0x1d0)]=_0x84ae5f[_0x44763e(0x26d)]/_0x84ae5f['target']-0x1;if(_0x84ae5f['orderstatus']=='filled'||_0x84ae5f[_0x44763e(0x125)]==_0x44763e(0x161))_0x84ae5f[_0x44763e(0x125)]=_0x44763e(0x27a);}),currentCoins[_0x12fc77(0x178)]((_0x26dc74,_0x338025)=>_0x26dc74['delta']<_0x338025['delta']?0x1:_0x338025[_0x12fc77(0x1d0)]<_0x26dc74['delta']?-0x1:0x0);const _0xcc69b1=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0xcc69b1[_0x12fc77(0x201)],'usd':_0xcc69b1[_0x12fc77(0x26a)],'portfolio':JSON[_0x12fc77(0x1e8)](currentCoins),'threshold':_0x472aac},proxyEmit(_0x12fc77(0x126),{'serverversion':serverversion,'balances':lastBalances});if(_0x2bc867){if(config['headless'])headlessMode({'portfolio':currentCoins,'threshold':_0x472aac});else lockOrders==ORDERS[_0x12fc77(0x248)]&&!coolingDown&&notifyBalance({'portfolio':currentCoins,'threshold':_0x472aac});}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x3b854a=getNormalizedPerformance();getStartingBalances(_0x3b854a),emitPerformance(_0x3b854a);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}function getPnL(){const _0x431ea=_0x71e98b;let _0x5d75df=dbCoinResults[_0x431ea(0x1ea)](_0x431ea(0x1f5))[_0x431ea(0x198)](),_0x4ef43e=0x0;return Object[_0x431ea(0x179)](_0x5d75df)['forEach'](([_0x2ca93a,_0x24cc9a])=>{const _0x1127ed=_0x431ea;_0x4ef43e+=_0x24cc9a[_0x1127ed(0x25a)];}),_0x4ef43e;}async function storePerformance(){const _0x10dbc0=_0x71e98b;if(!lastBalances)return;let _0x1bc26f=[],_0x31332f;const _0x3663d2=getPnL();let _0x4b2484=JSON[_0x10dbc0(0x22d)](lastBalances[_0x10dbc0(0x171)]);_0x4b2484['sort']((_0xc6992d,_0x4d9b6b)=>_0xc6992d[_0x10dbc0(0xf9)]>_0x4d9b6b[_0x10dbc0(0xf9)]?0x1:_0x4d9b6b[_0x10dbc0(0xf9)]>_0xc6992d[_0x10dbc0(0xf9)]?-0x1:0x0),_0x4b2484[_0x10dbc0(0x186)](_0x5d4da2=>{const _0x277ab=_0x10dbc0;let _0x32b16c={'coin':_0x5d4da2[_0x277ab(0xf9)],'number':_0x5d4da2[_0x277ab(0x18a)],'price':_0x5d4da2[_0x277ab(0x29b)]};_0x1bc26f[_0x277ab(0x1d1)](_0x32b16c);});const _0x40578b=await getFiat(),_0x4c0adb=getTimeStamp()[_0x10dbc0(0x276)]('\x20')[0x0],_0x434f97=dbPerformance[_0x10dbc0(0x1ea)]('data')['find']({'date':_0x4c0adb})[_0x10dbc0(0x198)]();_0x31332f={'date':_0x4c0adb,'eur':_0x40578b[_0x10dbc0(0x201)],'usd':_0x40578b[_0x10dbc0(0x26a)],'coins':_0x1bc26f,'pnl':_0x3663d2},_0x434f97?_0x31332f['date']!=config['startdate']&&dbPerformance[_0x10dbc0(0x1ea)](_0x10dbc0(0x141))[_0x10dbc0(0x146)]({'date':_0x4c0adb})[_0x10dbc0(0x27e)](_0x31332f)['write']():dbPerformance['get']('data')['push'](_0x31332f)[_0x10dbc0(0x2a2)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x2e7867=_0x71e98b;let _0x3a8e13=[];if(dbPerformance[_0x2e7867(0x1bf)](_0x2e7867(0x141))['value']()){let _0x34ac48=dbPerformance['get'](_0x2e7867(0x141))[_0x2e7867(0x140)]()[_0x2e7867(0x1e7)](_0x416c6d=>{const _0x5ea537=_0x2e7867;if(_0x416c6d[_0x5ea537(0x1f5)][_0x5ea537(0x209)]==0x0)return![];else return!![];})['sortBy']('date')[_0x2e7867(0x198)](),_0x4a2f12=[...config[_0x2e7867(0x189)]];_0x4a2f12['sort']((_0x454a6a,_0x3be05b)=>_0x454a6a['date']>_0x3be05b[_0x2e7867(0x1ec)]?-0x1:_0x3be05b[_0x2e7867(0x1ec)]>_0x454a6a[_0x2e7867(0x1ec)]?0x1:0x0);let _0x18babc=0x1,_0x272857=[],_0x4da549=0x0;_0x34ac48['slice']()[_0x2e7867(0x1ce)]()[_0x2e7867(0x186)]((_0x94b5ac,_0xde58e9)=>{const _0x428df2=_0x2e7867;if(_0x4a2f12[_0x4da549]){if(_0x34ac48[_0x34ac48[_0x428df2(0x209)]-_0xde58e9]&&_0x4a2f12[_0x4da549][_0x428df2(0x1ec)]==_0x34ac48[_0x34ac48[_0x428df2(0x209)]-_0xde58e9][_0x428df2(0x1ec)]){if(_0xde58e9<_0x34ac48[_0x428df2(0x209)]){let _0x315d1d=0x0,_0x37164e=0x0;_0x34ac48[_0x34ac48[_0x428df2(0x209)]-_0xde58e9]['coins'][_0x428df2(0x186)](_0x23aa88=>{const _0xb56f4a=_0x428df2;_0x37164e+=_0x23aa88[_0xb56f4a(0x18a)]*_0x23aa88[_0xb56f4a(0x14f)];}),_0x4a2f12[_0x4da549][_0x428df2(0x297)][_0x428df2(0x186)](_0x457565=>{const _0x559024=_0x428df2;_0x315d1d+=_0x457565[_0x559024(0x18a)]*_0x457565['price'];}),_0x18babc*=_0x315d1d/(_0x37164e-_0x315d1d)+0x1;}_0x4da549++;}}let _0xbed86e=0x0;_0x94b5ac[_0x428df2(0x1f5)]['forEach'](_0x47bd6e=>{_0xbed86e+=_0x47bd6e['number']*_0x47bd6e['price'];}),_0x272857[_0x34ac48[_0x428df2(0x209)]-_0xde58e9-0x1]=_0xbed86e*(_0x18babc-0x1);});let _0x159be4=[];_0x4a2f12=[...config[_0x2e7867(0x189)]]||[];let _0x40e4d3=0x0;_0x4da549=0x0,_0x34ac48[_0x2e7867(0x186)]((_0x2575ac,_0x1a6896)=>{const _0x6c26c6=_0x2e7867;if(_0x4a2f12[_0x4da549]){const _0x23946c=fns[_0x6c26c6(0x22d)](_0x4a2f12[_0x4da549][_0x6c26c6(0x1ec)],_0x6c26c6(0x2af),new Date()),_0x13aadf=fns[_0x6c26c6(0x22d)](_0x2575ac[_0x6c26c6(0x1ec)],_0x6c26c6(0x2af),new Date());if(fns[_0x6c26c6(0x137)](_0x23946c,_0x13aadf)){let _0x400b3d=0x0;_0x4a2f12[_0x4da549][_0x6c26c6(0x297)][_0x6c26c6(0x186)](_0x2db8ea=>{const _0x555f4b=_0x6c26c6;!_0x159be4[_0x2db8ea['coin']]?_0x159be4[_0x2db8ea['coin']]=_0x2db8ea[_0x555f4b(0x18a)]:(_0x400b3d=_0x159be4[_0x2db8ea[_0x555f4b(0xf9)]],_0x159be4[_0x2db8ea[_0x555f4b(0xf9)]]+=_0x2db8ea[_0x555f4b(0x18a)]);const _0x4dce5a=_0x2575ac[_0x555f4b(0x1f5)][_0x555f4b(0x146)](_0x33dc67=>_0x33dc67[_0x555f4b(0xf9)]==_0x2db8ea[_0x555f4b(0xf9)]);(!_0x4dce5a||_0x4dce5a['number']==0x0)&&(_0x40e4d3+=(-_0x2db8ea[_0x555f4b(0x18a)]-_0x400b3d)*_0x2db8ea['price']);}),_0x4da549++;}}_0x2575ac['coins'][_0x6c26c6(0x186)]((_0x31c2f2,_0x1e1cba)=>{const _0x3999fb=_0x6c26c6;_0x159be4[_0x31c2f2[_0x3999fb(0xf9)]]&&(_0x31c2f2[_0x3999fb(0x249)]=_0x159be4[_0x31c2f2[_0x3999fb(0xf9)]]);}),_0x3a8e13['push']({'date':_0x2575ac['date'],'eur':_0x2575ac[_0x6c26c6(0x201)],'usd':_0x2575ac[_0x6c26c6(0x26a)],'offset':_0x272857[_0x1a6896],'netoffset':_0x40e4d3,'coins':_0x2575ac[_0x6c26c6(0x1f5)],'pnl':_0x2575ac['pnl']});});}return _0x3a8e13;}function emitPerformance(_0x36f87c){const _0x5eb26d=_0x71e98b;_0x36f87c[_0x5eb26d(0x209)]!==0x0?(proxyEmit('performance',_0x36f87c),lastPerformanceEmitted=getDate()):proxyEmit(_0x5eb26d(0x122),[]);}function getPerf(_0x1aeaac,_0x41cc78){const _0x30dc8f=_0x71e98b;let _0x1b697b=0x0,_0x6de882=0x0,_0x4e6e8f=0x0;_0x1aeaac['coins'][_0x30dc8f(0x186)](_0x10858c=>{const _0x4a568c=_0x30dc8f;_0x1b697b+=_0x10858c['number']*_0x10858c[_0x4a568c(0x14f)];});_0x41cc78&&(_0x1b697b+=_0x1aeaac[_0x30dc8f(0x22e)]);if(config[_0x30dc8f(0x250)]==='BTC'||config['basecoin']===_0x30dc8f(0x232)||config[_0x30dc8f(0x250)]===_0x30dc8f(0x1ee))_0x6de882=_0x1b697b*_0x1aeaac['eur'],_0x4e6e8f=_0x1b697b*_0x1aeaac['usd'];else{if(usdBasecoins[_0x30dc8f(0x29f)](config[_0x30dc8f(0x250)]))_0x6de882=_0x1b697b*_0x1aeaac[_0x30dc8f(0x201)]/_0x1aeaac[_0x30dc8f(0x26a)],_0x4e6e8f=_0x1b697b;else config['basecoin']===_0x30dc8f(0x1f6)&&(_0x6de882=_0x1b697b,_0x4e6e8f=_0x1b697b*_0x1aeaac[_0x30dc8f(0x26a)]/_0x1aeaac[_0x30dc8f(0x201)]);}return[_0x1b697b,_0x6de882,_0x4e6e8f];}function CurrencyFactor(_0xe6a5d4,_0x2fd633,_0xd0e3ce){const _0x185c01=_0x71e98b;let _0x4bdbc5;if(_0x2fd633===_0x185c01(0x1cb)||_0x2fd633===_0x185c01(0x232)||_0x2fd633===_0x185c01(0x1ee))_0x4bdbc5=_0xd0e3ce===_0x185c01(0x1f6)?_0xe6a5d4[_0x185c01(0x201)]:_0xe6a5d4[_0x185c01(0x26a)];else{if(usdBasecoins[_0x185c01(0x29f)](_0x2fd633))_0x4bdbc5=_0xd0e3ce===_0x185c01(0x1f6)?_0xe6a5d4['eur']/_0xe6a5d4['usd']:0x1;else _0x2fd633===_0x185c01(0x1f6)&&(_0x4bdbc5=_0xd0e3ce==='EUR'?0x1:_0xe6a5d4[_0x185c01(0x26a)]/_0xe6a5d4[_0x185c01(0x201)]);}return _0x4bdbc5;}function getKPIs(_0x8106b,_0x2d1f7a=_0x71e98b(0x1f6)){const _0x5b7d3b=_0x71e98b,_0x1e7725=config['basecoin'],_0x1f745d=lastBalances,_0x1ca9aa=currentCoins,_0x1ee75b=getNormalizedPerformance(),_0x263512=CurrencyFactor(_0x1f745d,config['basecoin'],_0x2d1f7a);let _0x1c99b3=0x0;_0x1ca9aa['forEach'](_0x141c02=>{const _0x4d4d16=_0x49b3;_0x1c99b3+=_0x141c02['number']*_0x141c02[_0x4d4d16(0x29b)];});_0x8106b['includes'](_0x5b7d3b(0xfa))&&(_0x1c99b3*=_0x263512);let _0x59c113;if(_0x1c99b3!==0x0){if(_0x8106b===_0x5b7d3b(0x250)||_0x8106b===_0x5b7d3b(0xfa)){if(_0x8106b===_0x5b7d3b(0x250))_0x59c113=(_0x1c99b3/startingBalances[_0x5b7d3b(0x250)]-0x1)*0x64;else{if(_0x2d1f7a===_0x5b7d3b(0x1f6))_0x59c113=(_0x1c99b3/startingBalances[_0x5b7d3b(0x201)]-0x1)*0x64;else _0x59c113=(_0x1c99b3/startingBalances[_0x5b7d3b(0x26a)]-0x1)*0x64;}}if(_0x8106b[_0x5b7d3b(0x29f)](_0x5b7d3b(0x11a))){let _0x3edceb=0x0;if(startingBalances['coins'])_0x1ca9aa[_0x5b7d3b(0x186)](_0x51d648=>{const _0x5e864b=_0x5b7d3b;let _0x34e6b9=startingBalances[_0x5e864b(0x1f5)]['find'](_0x218f2b=>_0x218f2b[_0x5e864b(0xf9)]===_0x51d648[_0x5e864b(0xf9)]);if(_0x34e6b9&&_0x34e6b9[_0x5e864b(0xf9)]&&_0x51d648[_0x5e864b(0x18a)]!==0x0)_0x3edceb+=_0x34e6b9[_0x5e864b(0x18a)]*_0x51d648['last'];});let _0x3094c5=0x0;if(_0x1ee75b[_0x5b7d3b(0x209)]!==0x0){let _0x3879fc=_0x1ee75b[_0x1ee75b['length']-0x1];_0x3094c5=_0x3879fc['netoffset'];}_0x3edceb-=_0x3094c5;let _0xe984ed;_0x8106b===_0x5b7d3b(0x252)&&(_0xe984ed=startingBalances['basecoin']),_0x8106b===_0x5b7d3b(0x1cc)&&(_0xe984ed=_0x2d1f7a==='EUR'?startingBalances[_0x5b7d3b(0x201)]:startingBalances[_0x5b7d3b(0x26a)],_0x3edceb*=_0x263512),_0x59c113=(_0x1c99b3-_0x3edceb)/_0xe984ed*0x64,_0x1c99b3=_0x1c99b3-_0x3edceb;}if(_0x8106b[_0x5b7d3b(0x29f)](_0x5b7d3b(0x188))){if(_0x1ee75b['length']!==0x0&&_0x1ca9aa[_0x5b7d3b(0x209)]!==0x0){let _0x4a0003,_0x157f7a=_0x1ee75b[_0x1ee75b[_0x5b7d3b(0x209)]-0x1][_0x5b7d3b(0x188)];_0x8106b[_0x5b7d3b(0x29f)]('fiat')?(_0x4a0003=_0x2d1f7a===_0x5b7d3b(0x1f6)?startingBalances[_0x5b7d3b(0x201)]:startingBalances[_0x5b7d3b(0x26a)],_0x157f7a*=CurrencyFactor(_0x1f745d,_0x1e7725,_0x2d1f7a)):_0x4a0003=startingBalances[_0x5b7d3b(0x250)],_0x59c113=_0x157f7a/_0x4a0003*0x64,_0x1c99b3=_0x157f7a;}}if(_0x59c113){if(_0x59c113<0x64)_0x59c113=_0x59c113[_0x5b7d3b(0x20b)](0x2);else{if(_0x59c113<0x3e8)_0x59c113=_0x59c113[_0x5b7d3b(0x20b)](0x1);else _0x59c113=_0x59c113[_0x5b7d3b(0x20b)](0x0);}}else _0x59c113=Number('0')[_0x5b7d3b(0x20b)](0x2);if(_0x1c99b3){if(Math['abs'](_0x1c99b3)<0.000001)_0x1c99b3=_0x1c99b3[_0x5b7d3b(0x20b)](0x2);else{if(Math[_0x5b7d3b(0x230)](_0x1c99b3)<0.1)_0x1c99b3=_0x1c99b3['toFixed'](0x6);else{if(Math[_0x5b7d3b(0x230)](_0x1c99b3)<0x1)_0x1c99b3=_0x1c99b3[_0x5b7d3b(0x20b)](0x5);else{if(Math[_0x5b7d3b(0x230)](_0x1c99b3)<0xa)_0x1c99b3=_0x1c99b3[_0x5b7d3b(0x20b)](0x4);else{if(Math[_0x5b7d3b(0x230)](_0x1c99b3)<0x64)_0x1c99b3=_0x1c99b3[_0x5b7d3b(0x20b)](0x3);else{if(Math[_0x5b7d3b(0x230)](_0x1c99b3)<0x3e8)_0x1c99b3=_0x1c99b3[_0x5b7d3b(0x20b)](0x2);else _0x1c99b3=_0x1c99b3['toFixed'](0x2);}}}}}}else _0x1c99b3=Number('0')[_0x5b7d3b(0x20b)](0x2);}else _0x59c113=Number('0')[_0x5b7d3b(0x20b)](0x2);if(_0x59c113>=0x0)_0x59c113='+'+_0x59c113;return{'value':_0x1c99b3,'change':_0x59c113};}async function getStartingBalances(_0x3b94df,_0x479706=!![]){const _0x3cb7c8=_0x71e98b;if(_0x3b94df['length']!==0x0){const [_0x169618,_0x32018d,_0x5137f8]=getPerf(_0x3b94df[0x0],!![]);let _0x43b996=[];config[_0x3cb7c8(0x171)][_0x3cb7c8(0x186)](_0x44407a=>{const _0x58cb68=_0x3cb7c8;let _0x4f1b6b=0x0,_0x45a8d1;config['liquidity'][_0x58cb68(0x186)](_0x422963=>{const _0x5f57e0=_0x58cb68;let _0x179c56=_0x422963[_0x5f57e0(0x297)][_0x5f57e0(0x146)](_0x3cc832=>_0x3cc832[_0x5f57e0(0xf9)]==_0x44407a[_0x5f57e0(0xf9)]);if(_0x179c56){_0x4f1b6b+=_0x179c56[_0x5f57e0(0x18a)];if(!_0x45a8d1)_0x45a8d1=_0x179c56[_0x5f57e0(0x14f)];}}),_0x43b996[_0x58cb68(0x1d1)]({'coin':_0x44407a[_0x58cb68(0xf9)],'number':_0x4f1b6b,'initialprice':_0x45a8d1});});const _0x23326a={'basecoin':_0x169618,'eur':_0x32018d,'usd':_0x5137f8,'coins':_0x43b996};if(_0x479706)proxyEmit(_0x3cb7c8(0x16a),_0x23326a);startingBalances=_0x23326a;}}function headlessMode(_0x171856){const _0x6fc7de=_0x71e98b;let _0x4980f7=_0x171856[_0x6fc7de(0x171)],_0x3bc51a=_0x171856[_0x6fc7de(0x159)],_0x31ed77=[];for(let _0x461986 of _0x4980f7){if(_0x461986[_0x6fc7de(0xf9)]!=config['basecoin']){if(_0x461986[_0x6fc7de(0x1d0)]>=_0x3bc51a/0x64){if(_0x461986[_0x6fc7de(0x143)])_0x31ed77['push'](_0x461986);}else{if(_0x461986['delta']<=-_0x3bc51a/0x64){if(_0x461986[_0x6fc7de(0x143)])_0x31ed77['push'](_0x461986);}}}}_0x31ed77[_0x6fc7de(0x209)]>0x0&&placeOrder(_0x31ed77);}function notifyBalance(_0x4ea7f3){const _0x191265=_0x71e98b;let _0x1dcbb2=_0x4ea7f3[_0x191265(0x171)],_0x2692d6=_0x4ea7f3[_0x191265(0x159)],_0x80a146=[];for(let _0x56f297 of _0x1dcbb2){if(_0x56f297[_0x191265(0xf9)]!=config[_0x191265(0x250)]){if(_0x56f297[_0x191265(0x1d0)]>=_0x2692d6/0x64){if(_0x56f297[_0x191265(0x143)])_0x80a146['push'](_0x56f297);}else{if(_0x56f297[_0x191265(0x1d0)]<=-_0x2692d6/0x64){if(_0x56f297[_0x191265(0x143)])_0x80a146[_0x191265(0x1d1)](_0x56f297);}}}}if(_0x80a146[_0x191265(0x209)]>0x0){let _0x51a800=_0x80a146[_0x191265(0x1af)](_0x1412bc=>_0x1412bc[_0x191265(0xf9)]);_0x51a800['sort']();let _0x4dad59=_0x51a800[_0x191265(0x1d8)](',\x20');if(!lastCoinsToBalance)logHistory(_0x191265(0x208),_0x191265(0x24f));lastCoinsToBalance=_0x4dad59;}}function symbolToCoin(_0x5b9fe1){const _0x1851f2=_0x71e98b;let _0x74acc6;if(_0x5b9fe1['includes']('/'+config[_0x1851f2(0x250)]))_0x74acc6=_0x5b9fe1['replace']('/'+config[_0x1851f2(0x250)],'');if(_0x5b9fe1[_0x1851f2(0x29f)](config[_0x1851f2(0x250)]+'/'))_0x74acc6=_0x5b9fe1[_0x1851f2(0x253)](config[_0x1851f2(0x250)]+'/','');return _0x74acc6;}function setLockOrders(_0x12239c){const _0x347ff0=_0x71e98b;lockOrders=_0x12239c,logger[_0x347ff0(0x165)](_0x347ff0(0x183)+Object[_0x347ff0(0x296)](ORDERS)[lockOrders]);}async function unlockOrders(_0x10a906=![]){const _0x39e778=_0x71e98b;if(allOrdersPlaced&&lockOrders==ORDERS[_0x39e778(0x1db)]){setLockOrders(ORDERS['UNLOCKING']);if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);if(_0x10a906){const _0x3d335f=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x3d335f,setBlockTransactionDetection(![]);}validateOrdersState=_0x39e778(0x249),persistOpenOrders([]),setLockOrders(ORDERS[_0x39e778(0x248)]);}}async function validateOrders(_0x3fdb86){const _0x267a7b=_0x71e98b;if(_0x3fdb86)validateOrdersState=_0x3fdb86;logger[_0x267a7b(0x165)](_0x267a7b(0x260)+validateOrdersState+'\x20|\x20lock\x20orders:\x20'+Object[_0x267a7b(0x296)](ORDERS)[lockOrders]);let _0x4022b5=[],_0x3da7d7=config[_0x267a7b(0xfb)]=='market'?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config['timeout']*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS['LOCKED'])return;logger['debug'](_0x267a7b(0x255)+validateOrdersState);for(let _0x58eb9e=lastOrders[_0x267a7b(0x209)]-0x1;_0x58eb9e>=0x0;_0x58eb9e--){let _0x2c5494=lastOrders[_0x58eb9e],_0x3d36d0=![];_0x2c5494['filled']>0x0&&(_0x3d36d0=!![]),_0x4022b5[_0x267a7b(0x1d1)](_0x3d36d0),_0x3d36d0&&config[_0x267a7b(0xfb)]!=_0x267a7b(0x13b)&&logHistory(_0x267a7b(0xfc),_0x267a7b(0x1d7)+_0x2c5494[_0x267a7b(0x274)]+'\x20'+_0x2c5494[_0x267a7b(0x23a)]+'\x20#'+formatResult(_0x2c5494['filled'],0x8)+'\x20@'+formatResult(_0x2c5494[_0x267a7b(0x14f)],0x8)),_0x3d36d0&&lastOrders[_0x267a7b(0xfd)](_0x58eb9e,0x1);}persistOpenOrders(lastOrders);const _0x5b008e=coolingDown?'balancing\x20resumes\x20when\x20cooldown\x20ends':_0x267a7b(0x25d);if(validateOrdersState==_0x267a7b(0x249)){validateOrdersState=_0x267a7b(0x14d);if(_0x4022b5[_0x267a7b(0x29f)](![])){}else await unlockOrders();}else{if(validateOrdersState=='ongoing'){if(_0x4022b5[_0x267a7b(0x29f)](![])){}else await unlockOrders();}else{if(validateOrdersState==_0x267a7b(0x1da))_0x4022b5[_0x267a7b(0x29f)](![])&&(config[_0x267a7b(0xfb)]=='market'?logHistory('success',_0x267a7b(0x1ae)+Math[_0x267a7b(0x144)](_0x3da7d7*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x5b008e):(await cancelOrders(),logHistory(_0x267a7b(0x18b),_0x267a7b(0x1e0)+Math['round'](_0x3da7d7*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x5b008e))),await unlockOrders(!![]);else{if(validateOrdersState==_0x267a7b(0x1aa)){if(config[_0x267a7b(0xfb)]!=_0x267a7b(0x13b))logHistory(_0x267a7b(0x18b),_0x267a7b(0x2a1)+_0x5b008e);await unlockOrders(!![]);}}}}}async function cancelOrders(){const _0x23d7e8=_0x71e98b;lastOrders[_0x23d7e8(0x186)](async _0x5ad7af=>{const _0x58c4d7=_0x23d7e8;try{const _0x3cd963=await exchange[_0x58c4d7(0x21b)](_0x5ad7af[_0x58c4d7(0x172)],_0x5ad7af[_0x58c4d7(0x274)]);}catch(_0x205efc){if(_0x205efc[_0x58c4d7(0x11b)]()[_0x58c4d7(0x29f)](_0x58c4d7(0x110))){}else await handleError(_0x205efc,_0x58c4d7(0x114));}});}async function initCoinResults(_0xde999f){const _0x1044e8=_0x71e98b;_0xde999f?logger[_0x1044e8(0x165)](_0x1044e8(0x238)+_0xde999f):logger[_0x1044e8(0x165)](_0x1044e8(0x290)),config[_0x1044e8(0x171)][_0x1044e8(0x186)](_0x1ed60e=>{const _0x17f62b=_0x1044e8;if(!_0x1ed60e[_0x17f62b(0x14a)]&&_0x1ed60e[_0x17f62b(0xf9)]!=config[_0x17f62b(0x250)]){const _0x2b1f76=currentCoins[_0x17f62b(0x146)](_0x41e82d=>_0x41e82d['coin']==_0x1ed60e[_0x17f62b(0xf9)]),_0x5655b3=gTicker[noslash(_0x1ed60e['symbol'])];let _0x2e3fda=_0x2b1f76?_0x2b1f76[_0x17f62b(0x18a)]:null,_0x16b687=_0x1ed60e[_0x17f62b(0x1ce)]?0x1/_0x5655b3:_0x5655b3,_0x1a9a1c;config[_0x17f62b(0x189)][_0x17f62b(0x186)](_0x51f4fc=>{const _0x324fda=_0x17f62b;!_0x1a9a1c&&(_0x1a9a1c=_0x51f4fc[_0x324fda(0x297)][_0x324fda(0x146)](_0x118163=>_0x118163[_0x324fda(0xf9)]==_0x1ed60e['coin']),_0x1a9a1c&&(_0x2e3fda=_0x1a9a1c[_0x324fda(0x18a)],_0x16b687=_0x1a9a1c[_0x324fda(0x14f)]));});let _0x29b365=dbCoinResults[_0x17f62b(0x1ea)](_0x17f62b(0x1f5))[_0x17f62b(0x146)]({'coin':_0x1ed60e['coin']})['value']();if(!_0x29b365){const _0x359d27={'coin':_0x1ed60e[_0x17f62b(0xf9)],'number':_0x2e3fda,'breakeven':_0x16b687,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x17f62b(0x1ea)]('coins')[_0x17f62b(0x1d1)](_0x359d27)['write']();}else{if(_0xde999f&&_0x1ed60e['coin']==_0xde999f){const _0x2278c5={'coin':_0x1ed60e['coin'],'number':_0x2e3fda,'breakeven':_0x16b687,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get'](_0x17f62b(0x1f5))[_0x17f62b(0x146)]({'coin':_0x1ed60e[_0x17f62b(0xf9)]})[_0x17f62b(0x27e)](_0x2278c5)[_0x17f62b(0x2a2)]();}}}});}async function placeOrder(_0x180c1a){const _0x194405=_0x71e98b,_0x11d693=config['ordertype']=='market'?_0x194405(0x13b):_0x194405(0x228);if(lockOrders==ORDERS[_0x194405(0x248)]&&!coolingDown){setLockOrders(ORDERS[_0x194405(0x1db)]);while(transactionDetectionOngoing){await sleep(0x64);}logger[_0x194405(0x165)]('Placing\x20order\x20for:\x20'+_0x180c1a[_0x194405(0x1af)](_0x4fde8b=>_0x4fde8b[_0x194405(0xf9)])[_0x194405(0x1d8)](',\x20')),lastCoinsToBalance='',allOrdersPlaced=![],validateOrdersState='initial';let _0x1c597b=![];lastOrders=[];const _0x412daa=config['threshold'];for(const _0x3f5fda of _0x180c1a){let _0x17db31,_0x2bad30,_0x4c53d8,_0x2188c0,_0x57cf3f,_0xe175fb=_0x3f5fda['symbol'];logger[_0x194405(0x165)](_0x194405(0x277)+_0x3f5fda[_0x194405(0xf9)]+'\x20'+_0x3f5fda[_0x194405(0x18a)]+'\x20'+_0x3f5fda[_0x194405(0x29b)]+'\x20'+_0x3f5fda['distribution']+'%\x20'+_0x3f5fda[_0x194405(0x20d)]+'%\x20'+(0x64*_0x3f5fda[_0x194405(0x1d0)])[_0x194405(0x20b)](0x2)+_0x194405(0x13f)+_0x412daa[_0x194405(0x20b)](0x2)+'%)');const _0x4654ae=currentCoins[_0x194405(0x146)](_0x53f924=>_0x53f924[_0x194405(0xf9)]==_0x3f5fda[_0x194405(0xf9)]);_0x4654ae&&(_0x4654ae[_0x194405(0x20c)]=_0x3f5fda[_0x194405(0x18a)]);try{const _0x3ecb8d=await exchange[_0x194405(0x205)](_0xe175fb);_0x17db31=_0x3f5fda['reverse']?0x1/_0x3f5fda[_0x194405(0x29b)]:_0x3f5fda[_0x194405(0x29b)],_0x2bad30=_0x3ecb8d[_0x194405(0x14b)],_0x4c53d8=_0x3ecb8d[_0x194405(0x170)];_0x3f5fda[_0x194405(0x1ce)]?(_0x2188c0=_0x3f5fda[_0x194405(0x23a)]==_0x194405(0x275)?_0x194405(0x106):_0x194405(0x275),_0x57cf3f=Math[_0x194405(0x230)](_0x3f5fda[_0x194405(0x109)])/_0x17db31):(_0x2188c0=_0x3f5fda[_0x194405(0x23a)],_0x57cf3f=Math[_0x194405(0x230)](_0x3f5fda[_0x194405(0x109)]));_0x11d693==_0x194405(0x228)&&(config[_0x194405(0xfb)]==_0x194405(0x1b7)&&(_0x17db31=_0x2188c0==_0x194405(0x275)?_0x2bad30:_0x4c53d8),config[_0x194405(0xfb)]=='limit-low'&&(_0x17db31=_0x2188c0==_0x194405(0x275)?_0x4c53d8:_0x2bad30));_0x57cf3f=formatResult(_0x57cf3f,0x8),_0x17db31=formatResult(_0x17db31,0x8);const _0x34831b=_0x2188c0==_0x194405(0x106)?config[_0x194405(0x112)]?String[_0x194405(0x19f)]('0x'+config[_0x194405(0x112)])+'\x20':'':config['emojibuy']?String['fromCodePoint']('0x'+config[_0x194405(0x1e9)])+'\x20':'',_0x51591e=_0x11d693==_0x194405(0x13b)?_0x194405(0x2b5):config['ordertype']==_0x194405(0x1b7)?'Limit\x20(high-margin)':_0x194405(0x194),_0x108cb9=(Math['floor'](Math[_0x194405(0x166)]()*0x35a4e900)+0x5f5e100)['toString']();lastOrders[_0x194405(0x1d1)]({'customId':_0x108cb9,'symbol':_0xe175fb,'coin':_0x3f5fda[_0x194405(0xf9)],'amount':_0x57cf3f,'price':_0x17db31,'side':_0x2188c0,'reverse':_0x3f5fda[_0x194405(0x1ce)],'filled':0x0});let _0x4ce890;_0x11d693==_0x194405(0x13b)?_0x2188c0==_0x194405(0x275)&&['Bybit',_0x194405(0x1dc),'Cex',_0x194405(0x19e),_0x194405(0x150)][_0x194405(0x29f)](config[_0x194405(0x13a)])?_0x4ce890=await exchange[_0x194405(0x181)](_0xe175fb,_0x11d693,_0x2188c0,_0x57cf3f,_0x17db31):_0x4ce890=await exchange[_0x194405(0x181)](_0xe175fb,_0x11d693,_0x2188c0,_0x57cf3f,undefined):_0x4ce890=await exchange[_0x194405(0x181)](_0xe175fb,_0x11d693,_0x2188c0,_0x57cf3f,_0x17db31);const _0x20aac0=lastOrders[_0x194405(0x209)]-0x1;if(_0x20aac0>=0x0&&lastOrders[_0x20aac0][_0x194405(0x16b)]==_0x108cb9){lastOrders[_0x20aac0]['orderId']=_0x4ce890['id'];if(_0x4ce890[_0x194405(0x1e6)])lastOrders[_0x20aac0][_0x194405(0x1e6)]=_0x4ce890[_0x194405(0x1e6)];if(_0x4ce890['price'])lastOrders[_0x20aac0][_0x194405(0x14f)]=_0x4ce890[_0x194405(0x14f)];lastOrders[_0x20aac0][_0x194405(0x235)]=_0x4ce890[_0x194405(0x235)];}if(_0x4ce890[_0x194405(0x1e6)])_0x57cf3f=_0x4ce890['amount'];if(_0x4ce890[_0x194405(0x14f)])_0x17db31=_0x4ce890[_0x194405(0x14f)];if(_0x11d693=='market')logHistory(_0x194405(0xfc),''+_0x34831b+_0x51591e+_0x194405(0x111)+_0xe175fb+'\x20'+_0x2188c0+'\x20#'+formatResult(_0x57cf3f,0x8)+'\x20@'+formatResult(_0x17db31,0x8));else logHistory(_0x194405(0xfc),''+_0x34831b+_0x51591e+'\x20order:\x20'+_0xe175fb+'\x20'+_0x2188c0+'\x20#'+formatResult(_0x57cf3f,0x8)+'\x20@'+formatResult(_0x17db31,0x8));logger[_0x194405(0x165)](_0x194405(0x107)+_0x4ce890['id']+'\x20|\x20Custom\x20ID:\x20'+_0x108cb9);if(config['cooldown']!=0x0){let _0x5856f6=null;if(cooldownTracker['length']==config[_0x194405(0x121)]-0x1)_0x5856f6=cooldownTracker[_0x194405(0x271)]();const _0x1294a2=getTimeStamp();cooldownTracker[_0x194405(0x1d1)](_0x1294a2);if(_0x5856f6){const _0x4ab35e=fns[_0x194405(0x217)](new Date(_0x1294a2),new Date(_0x5856f6));if(_0x4ab35e<cooldownInterval){logHistory(_0x194405(0x215),_0x194405(0xff)+config[_0x194405(0x121)]+_0x194405(0x154)+cooldownInterval/0x3c+_0x194405(0x1f8)+cooldownPeriod/(0xe10*0x3e8)+'\x20hour'),coolingDown=!![];break;}}}}catch(_0x221280){if(_0x221280['toString']()[_0x194405(0x29f)](_0x194405(0x12b)))lastOrders=lastOrders['filter'](_0x5b28b9=>_0x5b28b9[_0x194405(0x274)]!=_0xe175fb),logHistory('error',_0x194405(0x155)+_0xe175fb),_0x1c597b=!![];else{if(_0x221280[_0x194405(0x11b)]()['includes'](_0x194405(0x1cd)))lastOrders=lastOrders['filter'](_0x2f4ff7=>_0x2f4ff7[_0x194405(0x274)]!=_0xe175fb),logHistory('error',_0x194405(0x1a0)+_0xe175fb),_0x1c597b=!![];else{if(_0x221280['toString']()['includes']('InvalidOrder'))lastOrders=lastOrders[_0x194405(0x1e7)](_0x484cfd=>_0x484cfd[_0x194405(0x274)]!=_0xe175fb),logHistory(_0x194405(0x215),_0x194405(0x175)+_0xe175fb),logger['debug'](_0x221280),_0x1c597b=!![];else _0x221280[_0x194405(0x11b)]()['includes'](_0x194405(0x251))?(lastOrders=lastOrders[_0x194405(0x1e7)](_0x5806d3=>_0x5806d3['symbol']!=_0xe175fb),logHistory(_0x194405(0x215),_0x194405(0x155)+_0xe175fb),_0x1c597b=!![]):(lastOrders=lastOrders[_0x194405(0x1e7)](_0x30af2a=>_0x30af2a[_0x194405(0x274)]!=_0xe175fb),await handleError(_0x221280,'placeOrder()',_0xe175fb));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders['length']>0x0){const _0x2a4900=config[_0x194405(0xfb)]==_0x194405(0x13b)?validateOrderTimeout*0x3c*0x3e8:config[_0x194405(0x1f7)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x2490e1=_0x194405;validateOrders(_0x2490e1(0x1da));},_0x2a4900);}else unlockOrders();_0x1c597b&&config[_0x194405(0x1f2)]&&(logHistory(_0x194405(0x215),_0x194405(0x184)+pauseBotMsg),await pauseBot(pauseBotInterval)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x194405(0x18b),_0x194405(0x156)));}else{if(coolingDown)!config[_0x194405(0x1f2)]&&logHistory(_0x194405(0x215),_0x194405(0x11c));else lockOrders!=ORDERS[_0x194405(0x248)]&&(!config[_0x194405(0x1f2)]&&(config['ordertype']==_0x194405(0x13b)?logHistory('error',_0x194405(0x177)):logHistory(_0x194405(0x215),_0x194405(0x2b3))));}}function persistOpenOrders(_0x3812e0){const _0x53edb3=_0x71e98b,_0x1d7088={...config,'openOrders':_0x3812e0};let _0x1aa7af=dbConfig[_0x53edb3(0x1ea)](_0x53edb3(0x1c0))[_0x53edb3(0x146)]({'botID':botID})[_0x53edb3(0x198)]();_0x1aa7af&&dbConfig['get'](_0x53edb3(0x1c0))[_0x53edb3(0x146)]({'botID':botID})[_0x53edb3(0x27e)](_0x1d7088)['write']();}function restoreOrders(){const _0x57d034=_0x71e98b;let _0x577787;config[_0x57d034(0x273)]&&allOpenOrders[_0x57d034(0x186)](_0x4cc1f5=>{const _0x23af88=_0x57d034,_0x20b68d=config['openOrders'][_0x23af88(0x146)](_0x127932=>_0x127932[_0x23af88(0x172)]==_0x4cc1f5['id']);_0x20b68d&&(lastOrders['push'](_0x20b68d),_0x577787=_0x4cc1f5[_0x23af88(0x133)]);});if(lastOrders[_0x57d034(0x209)]>0x0){setLockOrders(ORDERS['LOCKED']),validateOrdersState='ongoing',allOrdersPlaced=!![];const _0x2482e6=new Date()[_0x57d034(0x101)](),_0x56e94a=config[_0x57d034(0xfb)]==_0x57d034(0x13b)?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(_0x577787+_0x56e94a>_0x2482e6){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x188d79=_0x57d034;validateOrders(_0x188d79(0x1da));},_0x577787+_0x56e94a-_0x2482e6);}else validateOrders('final');}}async function sendMetricsTelegram(){const _0x1b6586=_0x71e98b;if(!coinsLoaded){process['send']({'telegrammsg':_0x1b6586(0x200)},_0x3898b7=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x1a6799='';if(config['showname'])_0x1a6799=_0x1b6586(0x127)+config[_0x1b6586(0x21a)]+_0x1b6586(0x286);else _0x1a6799=_0x1b6586(0x1b2)+botID+_0x1b6586(0x286);const _0x2f76fd=config[_0x1b6586(0x250)],_0xfff7e2=config[_0x1b6586(0xfa)],_0xc41532=getKPIs(_0x1b6586(0x250)),_0x2af75d=getKPIs(_0x1b6586(0xfa),_0xfff7e2),_0x2d3e93=getKPIs('net-basecoin'),_0x263794=getKPIs(_0x1b6586(0x1cc),_0xfff7e2),_0x2add4c=getKPIs(_0x1b6586(0x1c7)),_0x494c5e=getKPIs(_0x1b6586(0x117),_0xfff7e2);_0x2f76fd[_0x1b6586(0x29f)](_0xfff7e2)?(_0x1a6799+=_0x1b6586(0x204),_0x1a6799+=_0x1b6586(0x27c)+_0x2f76fd+':\x20'+_0xc41532[_0x1b6586(0x198)]+'\x20('+_0xc41532['change']+_0x1b6586(0x134),_0x1a6799+=_0x1b6586(0x15c)+_0x2f76fd+':\x20'+_0x2d3e93['value']+'\x20('+_0x2d3e93['change']+_0x1b6586(0x134),_0x1a6799+=_0x1b6586(0x28a)+_0x2f76fd+':\x20'+_0x2add4c[_0x1b6586(0x198)]+'\x20('+_0x2add4c[_0x1b6586(0x1b9)]+_0x1b6586(0x134),_0x1a6799+='</pre>'):(_0x1a6799+=_0x1b6586(0x204),_0x1a6799+=_0x1b6586(0x27c)+_0x2f76fd+':\x20'+_0xc41532['value']+'\x20('+_0xc41532['change']+_0x1b6586(0x134),_0x1a6799+=_0x1b6586(0x27c)+_0xfff7e2+':\x20'+_0x2af75d[_0x1b6586(0x198)]+'\x20('+_0x2af75d[_0x1b6586(0x1b9)]+_0x1b6586(0x134),_0x1a6799+=_0x1b6586(0x15c)+_0x2f76fd+':\x20'+_0x2d3e93[_0x1b6586(0x198)]+'\x20('+_0x2d3e93['change']+_0x1b6586(0x134),_0x1a6799+=_0x1b6586(0x15c)+_0xfff7e2+':\x20'+_0x263794[_0x1b6586(0x198)]+'\x20('+_0x263794['change']+_0x1b6586(0x134),_0x1a6799+='PnL\x20'+_0x2f76fd+':\x20'+_0x2add4c[_0x1b6586(0x198)]+'\x20('+_0x2add4c[_0x1b6586(0x1b9)]+_0x1b6586(0x134),_0x1a6799+=_0x1b6586(0x28a)+_0xfff7e2+':\x20'+_0x494c5e['value']+'\x20('+_0x494c5e['change']+_0x1b6586(0x134),_0x1a6799+=_0x1b6586(0x130)),process[_0x1b6586(0x10a)]({'telegrammsg':_0x1a6799},_0x574069=>{});}async function sendPortfolioTelegram(){const _0x4865af=_0x71e98b;if(!coinsLoaded||!currentCoins[0x0][_0x4865af(0x26d)]){process[_0x4865af(0x10a)]({'telegrammsg':_0x4865af(0x200)},_0x6970ed=>{});return;}let _0x25db16='';if(config[_0x4865af(0x18c)])_0x25db16='<b>'+config[_0x4865af(0x21a)]+_0x4865af(0x216);else _0x25db16=_0x4865af(0x1b2)+botID+_0x4865af(0x216);_0x25db16+=_0x4865af(0x204),_0x25db16+=_0x4865af(0x1a8),_0x25db16+='Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a',_0x25db16+=_0x4865af(0x1a8),currentCoins[_0x4865af(0x186)](_0xc237a8=>{const _0xff614d=_0x4865af;_0x25db16+=_0xc237a8[_0xff614d(0xf9)]['padEnd'](0x7)+'|\x20'+formatPad(_0xc237a8['distribution'],0x2,0x6)+'|\x20'+formatPad(_0xc237a8['target'],0x2,0x6)+'|\x20'+formatPad(_0xc237a8['delta']*0x64,0x2,0x6)+'\x0a';}),_0x25db16+=_0x4865af(0x130),process[_0x4865af(0x10a)]({'telegrammsg':_0x25db16},_0x1f4159=>{});}function formatPad(_0x5dc2dc,_0x93d43d,_0x5bdd48){const _0x31075f=formatResultString(_0x5dc2dc,_0x93d43d);return _0x31075f?_0x31075f['padStart'](_0x5bdd48):''['padStart'](_0x5bdd48);}function logHistory(_0xbdb498,_0x4b65c1,_0x1eefa2=''){const _0x24a656=_0x71e98b;logger[_0x24a656(0x1c8)](''+_0x4b65c1);let _0x5938b9={'time':getTimeStamp(),'type':_0xbdb498,'event':_0x4b65c1};dbLogs[_0x24a656(0x1ea)](_0x24a656(0x11e))[_0x24a656(0x1d1)](_0x5938b9)[_0x24a656(0x2a2)]();if(_0x1eefa2=='')_0x1eefa2=_0x4b65c1;proxyEmit(_0x24a656(0x164),{'log':_0x5938b9,'summary':_0x1eefa2}),process['send']({'telegram':{..._0x5938b9,'botname':config[_0x24a656(0x21a)],'showname':config['showname']}},_0x112dba=>{});}function emitHistory(_0x460949={}){const _0x1e6a23=_0x71e98b;Object['keys'](_0x460949)['length']==0x0&&(_0x460949={'type':['order',_0x1e6a23(0x164)],'event':'','page':0x1});if(_0x460949[_0x1e6a23(0x13e)][_0x1e6a23(0x29f)](_0x1e6a23(0x164)))_0x460949[_0x1e6a23(0x13e)][_0x1e6a23(0xfd)](_0x460949['type']['indexOf'](_0x1e6a23(0x164)),0x1,_0x1e6a23(0x215),'warning',_0x1e6a23(0x18b));if(dbLogs[_0x1e6a23(0x1bf)](_0x1e6a23(0x11e))[_0x1e6a23(0x198)]()){let _0x1b1f52=dbLogs[_0x1e6a23(0x1ea)]('logs')[_0x1e6a23(0x1e7)](_0x29a14b=>{const _0x2d3ead=_0x1e6a23;if(_0x460949[_0x2d3ead(0x13e)][_0x2d3ead(0x209)]==0x0)return![];else return _0x460949['type'][_0x2d3ead(0x29f)](_0x29a14b[_0x2d3ead(0x13e)]);})[_0x1e6a23(0x1e7)](_0x4131ad=>{const _0x1e51b6=_0x1e6a23;if(_0x460949['event']=='')return!![];else return _0x4131ad[_0x1e51b6(0x164)][_0x1e51b6(0x2a6)]()[_0x1e51b6(0x29f)](_0x460949[_0x1e51b6(0x164)][_0x1e51b6(0x2a6)]());})[_0x1e6a23(0x191)](_0x1e6a23(0x233)),_0x418166=_0x1b1f52['value']()['length'];_0x1b1f52=_0x1b1f52[_0x1e6a23(0x1ce)]()[_0x1e6a23(0x1f4)]((_0x460949['page']-0x1)*logPageSize,_0x460949['page']*logPageSize-0x1)[_0x1e6a23(0x1ce)]()[_0x1e6a23(0x198)](),proxyEmit(_0x1e6a23(0x10f),{'logs':_0x1b1f52,'total':_0x418166});}else proxyEmit(_0x1e6a23(0x10f),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x1c4faf){const _0x356ff6=_0x71e98b;if(dbLogs[_0x356ff6(0x1bf)](_0x356ff6(0x11e))[_0x356ff6(0x198)]()){const _0x4cf21f=dbLogs['get'](_0x356ff6(0x11e))['sortBy'](_0x356ff6(0x233))[_0x356ff6(0x1e7)](_0x2bc8d4=>{const _0x3354f0=_0x356ff6;return _0x2bc8d4[_0x3354f0(0x13e)]==_0x3354f0(0xfc);})[_0x356ff6(0x198)]();dbLogs['get'](_0x356ff6(0x11e))['remove']()[_0x356ff6(0x2a2)](),dbLogs[_0x356ff6(0x1ea)]('logs')[_0x356ff6(0x27e)](_0x4cf21f)['write'](),emitHistory(_0x1c4faf);}}async function pauseBot(_0x1e591b=pauseBotIntervalShort,_0x140b43,_0x2b8ab2,_0x35c706=![]){const _0x5e00f7=_0x71e98b,_0x2cb332=new Date()[_0x5e00f7(0x101)]();if(!lastErrorShown||_0x2cb332-lastErrorShown>=_0x1e591b){lastErrorShown=_0x2cb332;if(!lastBotPause)lastBotPause=_0x2cb332,consecutivePauses=0x1;else{if(_0x2cb332-lastBotPause-_0x1e591b<0x5a*0x3e8){consecutivePauses++;if(consecutivePauses>maxPauseRetries){if(_0x35c706){logHistory(_0x5e00f7(0x215),_0x140b43+_0x5e00f7(0x17f)),await killBot();return;}else logHistory(_0x5e00f7(0x215),_0x140b43+pauseBotMsg),_0x1e591b=pauseBotInterval;}}else consecutivePauses=0x1;lastBotPause=_0x2cb332;}_0x2b8ab2?logger['debug']('('+consecutivePauses+')\x20'+_0x140b43+'\x20>\x20details:',_0x2b8ab2):logger[_0x5e00f7(0x165)]('('+consecutivePauses+')\x20'+_0x140b43);if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);await sleep(_0x1e591b),botPaused=![],_0x1e591b==pauseBotIntervalShort?resumeBot(!![]):resumeBot(![]);}}}async function killBot(){const _0x5ce2a4=_0x71e98b;botPaused=!![],await sleep(0x3e8),process[_0x5ce2a4(0x10a)]({'stop':_0x5ce2a4(0x182)},_0x387487=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x3eedfc,_0x3ce880,_0x3128a0=![]){const _0x578043=_0x71e98b;if(botPaused)return;let _0xb0750;const _0x1d93bd=config[_0x578043(0x13a)]||_0x578043(0x218);if(_0x3ce880)logger[_0x578043(0x165)](_0x578043(0x10e)+_0x3ce880);const _0x584304=()=>{const _0xecb7cd=_0x578043;loading[_0xecb7cd(0x215)]=!![],emitLoadingProgress();};if(_0x3eedfc[_0x578043(0x11b)]()[_0x578043(0x29f)](_0x578043(0x15f)))logHistory(_0x578043(0x215),_0x1d93bd+'\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)'),_0x584304();else{if(_0x3eedfc[_0x578043(0x11b)]()[_0x578043(0x29f)](_0x578043(0x1e2)))logHistory(_0x578043(0x215),_0x1d93bd+_0x578043(0x263)),_0x584304();else{if(_0x3eedfc[_0x578043(0x11b)]()[_0x578043(0x29f)](_0x578043(0x23d)))config[_0x578043(0x24d)]?_0xb0750=_0x1d93bd+_0x578043(0x124):_0xb0750=_0x1d93bd+'\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange',logHistory(_0x578043(0x215),_0xb0750+_0x578043(0x15a)),_0x584304();else{if(_0x3eedfc[_0x578043(0x11b)]()[_0x578043(0x29f)](_0x578043(0x24a)))logHistory(_0x578043(0x215),_0x1d93bd+_0x578043(0x2b4)),_0x584304();else{if(!_0x3128a0)await handleError(_0x3eedfc,null);}}}}}async function handleError(_0x1c5a69,_0xfbb099,_0x3cde31=''){const _0x2943ed=_0x71e98b;if(botPaused)return;let _0x576b36;const _0x59f482=config['exchange']||_0x2943ed(0x218);if(_0xfbb099)logger['debug'](_0x2943ed(0x10e)+_0xfbb099);if(_0x1c5a69['toString']()[_0x2943ed(0x29f)](_0x2943ed(0x1fa)))_0x576b36=_0x59f482+_0x2943ed(0x19d),await pauseBot(undefined,_0x576b36,_0x1c5a69);else{if(_0x1c5a69[_0x2943ed(0x11b)]()['includes']('RateLimitExceeded'))_0x576b36=_0x59f482+'\x20blocked\x20API\x20(RateLimitExceeded)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading',await pauseBot(undefined,_0x576b36,_0x1c5a69);else{if(_0x1c5a69['toString']()[_0x2943ed(0x29f)]('ExchangeNotAvailable')||_0x1c5a69['toString']()['includes']('OnMaintenance'))_0x576b36=_0x59f482+'\x20not\x20available\x20(see:\x20hodlerhacks.com/fix/5)',await pauseBot(undefined,_0x576b36,_0x1c5a69[_0x2943ed(0x11b)]());else{if(_0x1c5a69[_0x2943ed(0x11b)]()[_0x2943ed(0x29f)](_0x2943ed(0x220)))_0x576b36=_0x59f482+_0x2943ed(0x1e3),await pauseBot(undefined,_0x576b36,_0x1c5a69[_0x2943ed(0x11b)]());else{if(_0x1c5a69['toString']()[_0x2943ed(0x29f)](_0x2943ed(0x1cf)))_0x576b36=_0x59f482+_0x2943ed(0x20e),await pauseBot(undefined,_0x576b36,_0x1c5a69[_0x2943ed(0x11b)]());else{if(_0x1c5a69['toString']()['toLowerCase']()[_0x2943ed(0x29f)](_0x2943ed(0x133))||_0x1c5a69[_0x2943ed(0x11b)]()[_0x2943ed(0x2a6)]()['includes']('request-time'))_0x576b36='Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)',await pauseBot(undefined,_0x576b36,_0x1c5a69['toString']());else{if(_0x1c5a69['toString']()['includes'](_0x2943ed(0x1c5)))_0x576b36=_0x59f482+_0x2943ed(0x1d3),await pauseBot(undefined,_0x576b36,_0x1c5a69['toString']());else{if(_0x1c5a69 instanceof ccxt['NetworkError'])_0x576b36=_0x59f482+_0x2943ed(0x28b)+_0x1c5a69[_0x2943ed(0x11b)](),logger[_0x2943ed(0x165)](_0x2943ed(0x28d),_0x1c5a69),await pauseBot(undefined,_0x576b36,_0x1c5a69);else{if(_0x1c5a69[_0x2943ed(0x11b)]()[_0x2943ed(0x29f)](_0x2943ed(0x15f)))logHistory(_0x2943ed(0x215),_0x59f482+'\x20API\x20key\x20is\x20invalid'),logHistory(_0x2943ed(0x215),_0x2943ed(0x284)),await killBot();else{if(_0x1c5a69[_0x2943ed(0x11b)]()['includes'](_0x2943ed(0x1e2)))logHistory('error',_0x59f482+'\x20API\x20secret\x20is\x20invalid'),logHistory(_0x2943ed(0x215),_0x2943ed(0x284)),await killBot();else{if(_0x1c5a69['toString']()[_0x2943ed(0x29f)]('AuthenticationError')&&_0x1c5a69[_0x2943ed(0x11b)]()[_0x2943ed(0x29f)](_0x2943ed(0x15b)))_0x576b36=_0x59f482+'\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)',await pauseBot(undefined,_0x576b36,_0x1c5a69,!![]);else{if(_0x1c5a69[_0x2943ed(0x11b)]()[_0x2943ed(0x29f)]('AuthenticationError'))config['apiPassword']?_0x576b36=_0x59f482+_0x2943ed(0x124):_0x576b36=_0x59f482+_0x2943ed(0x1d6),logHistory(_0x2943ed(0x215),_0x576b36),logHistory(_0x2943ed(0x215),_0x2943ed(0x284)),await killBot();else{if(_0x1c5a69[_0x2943ed(0x11b)]()[_0x2943ed(0x29f)](_0x2943ed(0x24a)))logHistory('error',_0x59f482+_0x2943ed(0x1c1)),logHistory(_0x2943ed(0x215),_0x2943ed(0x284)),await killBot();else{if(_0x1c5a69[_0x2943ed(0x11b)]()[_0x2943ed(0x29f)](_0x2943ed(0x227)))logHistory('error',_0x2943ed(0x1b4)+_0x3cde31),logger[_0x2943ed(0x165)](_0x2943ed(0x265),_0x1c5a69);else{if(_0x1c5a69 instanceof ccxt[_0x2943ed(0x25f)]){_0x576b36=_0x59f482+_0x2943ed(0x1a5)+_0x1c5a69[_0x2943ed(0x11b)]();if(_0x3cde31)_0x576b36+=_0x2943ed(0x224)+_0x3cde31;await pauseBot(undefined,_0x576b36,_0x1c5a69);}else{_0x576b36='Unknown\x20error:\x20'+_0x1c5a69['toString']();if(_0x3cde31)_0x576b36+=_0x2943ed(0x224)+_0x3cde31;await pauseBot(undefined,_0x576b36);}}}}}}}}}}}}}}}}function decryptRSA(_0x3592a8,_0x2cbc2f){const _0x44fa08=_0x71e98b,_0x3a41b0=forge[_0x44fa08(0x113)][_0x44fa08(0x281)](_0x3592a8),_0x53290a=_0x3a41b0[_0x44fa08(0x145)](forge[_0x44fa08(0x28f)][_0x44fa08(0x203)](_0x2cbc2f),'RSA-OAEP',{'md':forge['md']['sha256'][_0x44fa08(0x195)](),'mgf1':{'md':forge['md'][_0x44fa08(0x1f3)][_0x44fa08(0x195)]()}});return _0x53290a;}async function withRetry(_0x2769f3,_0x4fa0da){const _0x3501f4=_0x71e98b;let _0x219662=![],_0x4aa622=0x0,_0x4cd11a,_0x19c94e;while(_0x4aa622<maxRetries){try{_0x4cd11a=await _0x4fa0da();break;}catch(_0x3734c5){_0x19c94e=_0x3734c5,!_0x219662?(_0x219662=!![],logger[_0x3501f4(0x165)](_0x3501f4(0x11d)+_0x2769f3+':',_0x3734c5[_0x3501f4(0x11b)]())):await sleep(retryInterval);}_0x4aa622++;}if(_0x4aa622==0x0)return _0x4cd11a;if(_0x4aa622>=maxRetries)throw _0x19c94e;else return logger['debug'](_0x3501f4(0x23c)+_0x4aa622+'\x20attempts'),_0x4cd11a;}function formatResult(_0x5e9049,_0x38cd85){return parseFloat(_0x5e9049['toFixed'](_0x38cd85));}function formatResultTruncate(_0x39b7e5,_0x20202d){const _0x30fbf9=_0x71e98b;let _0x130519=formatResultString(_0x39b7e5,0xa),_0x28dad2=_0x130519[_0x30fbf9(0x180)]('.');return _0x28dad2!=-0x1&&(_0x130519=_0x130519[_0x30fbf9(0x1f4)](0x0,_0x28dad2+_0x20202d+0x1)),Number(_0x130519);}function formatResultString(_0x127d63,_0x115330){const _0x3ef4cd=_0x71e98b;let _0x1598b8;if(!(''+_0x127d63)[_0x3ef4cd(0x29f)]('e'))_0x1598b8=+(Math[_0x3ef4cd(0x144)](_0x127d63+'e+'+_0x115330)+'e-'+_0x115330);else{let _0x400691=(''+_0x127d63)[_0x3ef4cd(0x276)]('e'),_0x19ea75='';+_0x400691[0x1]+_0x115330>0x0&&(_0x19ea75='+'),_0x1598b8=+(Math[_0x3ef4cd(0x144)](+_0x400691[0x0]+'e'+_0x19ea75+(+_0x400691[0x1]+_0x115330))+'e-'+_0x115330);}return Number(_0x1598b8)[_0x3ef4cd(0x20b)](_0x115330);}function getServerTime(){const _0x48e7bd=_0x71e98b,_0x2a9b20=new Date();return _0x2a9b20[_0x48e7bd(0x108)]()+'/'+(_0x2a9b20['getMonth']()+0x1)[_0x48e7bd(0x11b)]()[_0x48e7bd(0x1a7)](0x2,'0')+'/'+_0x2a9b20['getDate']()['toString']()[_0x48e7bd(0x1a7)](0x2,'0')+'\x20'+_0x2a9b20[_0x48e7bd(0x211)]()[_0x48e7bd(0x11b)]()['padStart'](0x2,'0')+':'+_0x2a9b20['getMinutes']()[_0x48e7bd(0x11b)]()[_0x48e7bd(0x1a7)](0x2,'0')+':'+_0x2a9b20['getSeconds']()[_0x48e7bd(0x11b)]()[_0x48e7bd(0x1a7)](0x2,'0');}function getTimeStamp(){const _0x48d9db=_0x71e98b,_0x26c4ef=shiftedTime();return _0x26c4ef[_0x48d9db(0x108)]()+'/'+(_0x26c4ef[_0x48d9db(0x158)]()+0x1)[_0x48d9db(0x11b)]()['padStart'](0x2,'0')+'/'+_0x26c4ef[_0x48d9db(0x129)]()[_0x48d9db(0x11b)]()[_0x48d9db(0x1a7)](0x2,'0')+'\x20'+_0x26c4ef[_0x48d9db(0x211)]()[_0x48d9db(0x11b)]()[_0x48d9db(0x1a7)](0x2,'0')+':'+_0x26c4ef['getMinutes']()['toString']()[_0x48d9db(0x1a7)](0x2,'0')+':'+_0x26c4ef[_0x48d9db(0x116)]()['toString']()[_0x48d9db(0x1a7)](0x2,'0');}function getDate(){const _0x10a0df=_0x71e98b,_0x605a41=shiftedTime();return _0x605a41[_0x10a0df(0x108)]()+'/'+(_0x605a41[_0x10a0df(0x158)]()+0x1)[_0x10a0df(0x11b)]()['padStart'](0x2,'0')+'/'+_0x605a41[_0x10a0df(0x129)]()[_0x10a0df(0x11b)]()['padStart'](0x2,'0');}function getHour(){const _0x1414d5=_0x71e98b,_0x26f4d4=shiftedTime();return _0x26f4d4[_0x1414d5(0x211)]()['toString']()[_0x1414d5(0x1a7)](0x2,'0');}function sleep(_0x20e7f0){return new Promise(_0x1abbf6=>setTimeout(_0x1abbf6,_0x20e7f0));}function shiftedTime(){const _0x2ac679=_0x71e98b,_0x68cc73=new Date();let _0x29095c=_0x68cc73;if(config&&config[_0x2ac679(0x1eb)]!==0x0)_0x29095c=fns[_0x2ac679(0x27d)](_0x68cc73,{'hours':config[_0x2ac679(0x1eb)]});return _0x29095c;}function timer(_0x374ac4){const _0x3810fe=_0x71e98b,_0x2aaf46=new Date();!lasttime?console[_0x3810fe(0x261)](getTimeStamp()+_0x3810fe(0x105),_0x374ac4,_0x2aaf46):console['log'](getTimeStamp()+_0x3810fe(0x105),_0x374ac4,(_0x2aaf46-lasttime)/0x3e8),lasttime=_0x2aaf46;}