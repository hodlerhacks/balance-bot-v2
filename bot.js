const _0x3c6aac=_0x40ee;(function(_0x165cab,_0x2a5ae2){const _0x48595a=_0x40ee,_0x26ebb6=_0x165cab();while(!![]){try{const _0x4250c0=parseInt(_0x48595a(0x76))/0x1+parseInt(_0x48595a(0x9a))/0x2+parseInt(_0x48595a(0x145))/0x3*(parseInt(_0x48595a(0xb1))/0x4)+-parseInt(_0x48595a(0x18b))/0x5+-parseInt(_0x48595a(0x112))/0x6+-parseInt(_0x48595a(0x17e))/0x7*(parseInt(_0x48595a(0xb9))/0x8)+-parseInt(_0x48595a(0xf3))/0x9*(parseInt(_0x48595a(0xe5))/0xa);if(_0x4250c0===_0x2a5ae2)break;else _0x26ebb6['push'](_0x26ebb6['shift']());}catch(_0x12174c){_0x26ebb6['push'](_0x26ebb6['shift']());}}}(_0x4a96,0xc0b86));const _0x35f0be=function(){let _0x450b1c=!![];return function(_0x3c2b1c,_0x2ed947){const _0x562d84=_0x450b1c?function(){const _0x2c9b94=_0x40ee;if(_0x2ed947){const _0x549b3b=_0x2ed947[_0x2c9b94(0x1cb)](_0x3c2b1c,arguments);return _0x2ed947=null,_0x549b3b;}}:function(){};return _0x450b1c=![],_0x562d84;};}(),_0x50bdc=_0x35f0be(this,function(){const _0x36a33b=_0x40ee;return _0x50bdc['toString']()[_0x36a33b(0x1ba)](_0x36a33b(0xe4))[_0x36a33b(0x10f)]()[_0x36a33b(0x13f)](_0x50bdc)[_0x36a33b(0x1ba)]('(((.+)+)+)+$');});_0x50bdc();'use strict';const ccxt=require(_0x3c6aac(0xac)),low=require(_0x3c6aac(0x1ed)),FileSync=require(_0x3c6aac(0x1a3)),fs=require('fs'),fns=require(_0x3c6aac(0x147)),forge=require(_0x3c6aac(0x23d)),util=require(_0x3c6aac(0xc2)),argv=require(_0x3c6aac(0x78))(process[_0x3c6aac(0x203)][_0x3c6aac(0x1f1)](0x2))[_0x3c6aac(0x203)],path=require(_0x3c6aac(0x131)),axios=require(_0x3c6aac(0x1f3));let exchange,gTicker={},gChange={};const usdBasecoins=[_0x3c6aac(0x1f8),_0x3c6aac(0xc6),_0x3c6aac(0x1f9),_0x3c6aac(0x79),_0x3c6aac(0xad),_0x3c6aac(0xd9)],excludedExchanges=[_0x3c6aac(0x113)],debugging=argv['d']||![];let pnlGenerationNeeded=argv['r']||![],config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x3c6aac(0x1b2)]({'LOCKED':0x0,'UNLOCKING':0x1,'UNLOCKED':0x2});let lockOrders=ORDERS[_0x3c6aac(0x15b)],validateOrdersState,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotIntervalShort=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0x3c6aac(0x142)+pauseBotInterval/0xea60+'\x20minutes',maxPauseRetries=0x6,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,watchTransactionsInterval=0x3c*0x3e8,schedulerInterval=0x3c*0x3c*0x3e8,retryInterval=0x3e8,maxRetries=0x5,logPageSize=0x14,defaultFee=0.003;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidOrdersInitialTimeout,pidOrdersTimeout,botPaused=![],transactionDetectionOngoing=![],lastCoinsToBalance='',insufficientFundsWarningSent=[],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x5dc,balanceUpdateRetries=0x5;let enableFiatToggle;const serverversion=require('./version.json')['version'],environment=require('./version.json')[_0x3c6aac(0x75)]||_0x3c6aac(0x103),botID=process[_0x3c6aac(0x203)][0x2]||'001',pattern=/^[0-9]{3}$/;!pattern[_0x3c6aac(0x71)](botID)&&(console[_0x3c6aac(0xdf)]('Error:\x20Invalid\x20argument\x20'+botID+_0x3c6aac(0x198)),killBot());const userID=process[_0x3c6aac(0x203)][0x3]||'',configpath=userID?_0x3c6aac(0x12d)+userID+'/':_0x3c6aac(0x12d),logspath=userID?_0x3c6aac(0x85)+userID+'/':_0x3c6aac(0x85),loggerfile=fs[_0x3c6aac(0xaf)](logspath+'/output-000.log',{'flags':'a'});!fs[_0x3c6aac(0x1af)](configpath)&&fs[_0x3c6aac(0xc4)](configpath);!fs[_0x3c6aac(0x1af)](logspath)&&fs[_0x3c6aac(0xc4)](logspath);const configfile=configpath+'bot-'+botID+'-config.json',logfile=configpath+_0x3c6aac(0x161)+botID+_0x3c6aac(0x1a9),performancefile=configpath+_0x3c6aac(0x161)+botID+_0x3c6aac(0x13b),coinresultsfile=configpath+'bot-'+botID+_0x3c6aac(0xc0),settingsfile=configpath+'bb-settings.json',securefile=configpath+_0x3c6aac(0x228),configbackuppath=configpath+'/backup/',adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x3c6aac(0x1fa)]({'logs':[],'version':serverversion})[_0x3c6aac(0x245)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x3c6aac(0x1fa)]({'data':[],'version':serverversion})[_0x3c6aac(0x245)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig['defaults']({'bot':[],'version':serverversion})[_0x3c6aac(0x245)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x3c6aac(0x1fa)]({'coins':{},'version':serverversion})['write']();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0,settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x2677ed=>{const _0x5c28d9=_0x3c6aac;console[_0x5c28d9(0xdf)](_0x2677ed);},'simple':_0x5b4261=>{const _0x262e00=_0x3c6aac;console['log'](_0x5b4261),loggerfile[_0x262e00(0x245)](util[_0x262e00(0x1eb)](_0x5b4261)+'\x0a');},'full':async(_0x30b9fc,_0x5708a7='')=>{const _0x5d5d26=_0x3c6aac;let _0x7d0710;if(config['showname'])_0x7d0710=getTimeStamp()+':\x20'+config[_0x5d5d26(0x23a)]+_0x5d5d26(0x16e)+_0x30b9fc;else _0x7d0710=getTimeStamp()+_0x5d5d26(0xb3)+botID+_0x5d5d26(0x16e)+_0x30b9fc;console[_0x5d5d26(0xdf)](_0x7d0710),loggerfile['write'](util[_0x5d5d26(0x1eb)](_0x7d0710)+'\x0a'),_0x5708a7&&(console[_0x5d5d26(0xdf)](_0x5708a7),loggerfile[_0x5d5d26(0x245)](util[_0x5d5d26(0x1eb)](_0x5708a7)+'\x0a'));},'debug':async(_0x3cb52f,_0xf68932='')=>{const _0x1f85f3=_0x3c6aac;let _0x431f96;if(config[_0x1f85f3(0x1f6)])_0x431f96=getTimeStamp()+':\x20'+config['botname']+_0x1f85f3(0x1aa)+_0x3cb52f;else _0x431f96=getTimeStamp()+':\x20Bot\x20'+botID+_0x1f85f3(0x1aa)+_0x3cb52f;if(debugging)console['log'](_0x431f96);loggerfile[_0x1f85f3(0x245)](util['format'](_0x431f96)+'\x0a');if(_0xf68932){if(debugging)console[_0x1f85f3(0xdf)](_0xf68932);loggerfile[_0x1f85f3(0x245)](util[_0x1f85f3(0x1eb)](_0xf68932)+'\x0a');}}};process['on'](_0x3c6aac(0x18a),function(_0x114e05){const _0x5e0bff=_0x3c6aac;handleError(_0x114e05[_0x5e0bff(0x118)],_0x5e0bff(0x18a));});settings[_0x3c6aac(0x236)]!=config['timeshift']&&updateTimeshift(settings[_0x3c6aac(0x236)]);settings[_0x3c6aac(0x6f)]!=config[_0x3c6aac(0x6f)]&&updateOnepagemode(settings[_0x3c6aac(0x6f)]);(settings[_0x3c6aac(0x1d7)]&&!config[_0x3c6aac(0x1d7)]||!settings['marketcapApi']&&config['marketcapApi'])&&updateMarketcapApi(settings[_0x3c6aac(0x1d7)]);process['send']({'started':_0x3c6aac(0x18e)},_0x138ca7=>{}),initializeProcessListeners();function proxyEmit(_0x52820e,_0x5405f7=null){process['send']({'function':_0x52820e,'args':_0x5405f7},_0x2832d2=>{});}function initializeProcessListeners(){const _0x4d4478=_0x3c6aac;process['on'](_0x4d4478(0x11b),_0x2b13d2=>{const _0x5ed97e=_0x4d4478;switch(Object[_0x5ed97e(0x1a2)](_0x2b13d2)[0x0]){case _0x5ed97e(0x236):_0x2b13d2[_0x5ed97e(0x236)]!=undefined&&(settings[_0x5ed97e(0x236)]=_0x2b13d2[_0x5ed97e(0x236)],updateTimeshift(settings['timeshift']));break;case _0x5ed97e(0x6f):_0x2b13d2['onepagemode']!=undefined&&(settings[_0x5ed97e(0x6f)]=_0x2b13d2[_0x5ed97e(0x6f)],updateOnepagemode(settings['onepagemode']));break;case _0x5ed97e(0x1d7):_0x2b13d2[_0x5ed97e(0x1d7)]!=undefined&&(settings[_0x5ed97e(0x1d7)]=_0x2b13d2[_0x5ed97e(0x1d7)],updateMarketcapApi(settings['marketcapApi']));break;case _0x5ed97e(0x242):_0x2b13d2[_0x5ed97e(0x242)]!=undefined&&(bots=JSON[_0x5ed97e(0x237)](_0x2b13d2[_0x5ed97e(0x242)]),proxyEmit('bots',bots));break;case _0x5ed97e(0x177):switch(_0x2b13d2['function']){case'initclient':initclient();break;case _0x5ed97e(0x232):toggleBotMode();break;case _0x5ed97e(0x222):emitHistory(_0x2b13d2[_0x5ed97e(0x1a0)]);break;case _0x5ed97e(0x1d8):deleteHistoryAlerts(_0x2b13d2[_0x5ed97e(0x1a0)]);break;case _0x5ed97e(0xd1):getPortfolio(_0x2b13d2[_0x5ed97e(0x1a0)]);break;case'storeConfiguration':storeConfiguration(_0x2b13d2['args']);break;case _0x5ed97e(0xf7):storeHeadless(_0x2b13d2['args']);break;case _0x5ed97e(0xe2):storeFiat(_0x2b13d2[_0x5ed97e(0x1a0)]);break;case _0x5ed97e(0x233):resetHistory();break;case'getStartingBalances':getStartingBalances(getNormalizedPerformance());break;case _0x5ed97e(0x19a):placeOrder(_0x2b13d2['args']);break;case'cancelLoading':cancelLoading();break;case _0x5ed97e(0x1b4):showConfig();break;case _0x5ed97e(0x1c9):sendMetricsTelegram();break;case _0x5ed97e(0xcf):sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x371451=![]){const _0x396dd9=_0x3c6aac;logger[_0x396dd9(0x244)](_0x396dd9(0x106)+(_0x371451?_0x396dd9(0x193):_0x396dd9(0xc1))+_0x396dd9(0xaa)+config[_0x396dd9(0x1b5)]);if(pidBalances)clearTimeout(pidBalances);lastCoinsToBalance='',insufficientFundsWarningSent=[],coinsLoaded=![];if(config[_0x396dd9(0x205)]!=''&&config[_0x396dd9(0x205)]!='***'){loadingProgress=0x0;if(_0x371451){await initExchange();const _0xce4e6c=await testAPI();if(!_0xce4e6c)return;await loadSymbols(),loadingProgress=0x1,setStableCoins(),proxyEmit(_0x396dd9(0x213),emittedConfiguration()),initialPerformanceStored=![];}const _0x208086=await getCoins();[currentCoins,currentCoinsAll]=_0x208086,setBlockTransactionDetection(![]),startScheduler(),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger['debug'](_0x396dd9(0x170)),getBalances(![]),await updateOpenOrders();if(lastOrders['length']==0x0&&allOpenOrders[_0x396dd9(0x1b6)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(pnlGenerationNeeded)await generatePnL();}}async function resumeBot(_0x4157e1=![]){const _0x5468c1=_0x3c6aac;logger[_0x5468c1(0x244)](_0x5468c1(0x11c)+(_0x4157e1?_0x5468c1(0x7e):_0x5468c1(0x19e))+')\x20|\x20exchange:\x20'+config[_0x5468c1(0x1b5)]);if(pidBalances)clearTimeout(pidBalances);if(_0x4157e1){getBalances();return;}coinsLoaded=![];if(config[_0x5468c1(0x205)]!=''&&config[_0x5468c1(0x205)]!=_0x5468c1(0xb0)){loadingProgress=0x1;const _0x5db16b=await getCoins();[currentCoins,currentCoinsAll]=_0x5db16b,setBlockTransactionDetection(![]),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger['debug'](_0x5468c1(0x170)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x5468c1(0x1b6)]==0x0&&allOpenOrders[_0x5468c1(0x1b6)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();}}async function getMarketCap(_0x4dbf05){const _0x4c2d58=_0x3c6aac;let _0x41f6da=![];if(_0x4dbf05)_0x41f6da=!![];const _0x572249=_0x41f6da?_0x4dbf05:currentCoins,_0x548d98=_0x572249[_0x4c2d58(0x178)](_0x4519f9=>_0x4519f9[_0x4c2d58(0x224)]);if(!config[_0x4c2d58(0x1d7)]||!_0x41f6da&&!config[_0x4c2d58(0xe9)]||_0x548d98[_0x4c2d58(0x1b6)]==0x0)return;let _0x2527ae=null;try{_0x2527ae=await axios[_0x4c2d58(0x194)](_0x4c2d58(0xec),{'headers':{'X-CMC_PRO_API_KEY':settings[_0x4c2d58(0x1d7)]},'params':{'symbol':_0x548d98['toString']()}});}catch(_0x1189b7){_0x2527ae=null,_0x1189b7[_0x4c2d58(0x10f)]()[_0x4c2d58(0x77)](_0x4c2d58(0x1e9))?(config['marketcapApi']=![],updateConfig(),proxyEmit(_0x4c2d58(0x213),emittedConfiguration()),logHistory(_0x4c2d58(0x96),'CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager')):(logHistory(_0x4c2d58(0x96),'CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20trying\x20again\x20in\x20'+schedulerInterval/(0x3c*0x3e8)+_0x4c2d58(0x174)),logger[_0x4c2d58(0x244)](_0x4c2d58(0x1cd),_0x1189b7[_0x4c2d58(0x10f)]()+_0x4c2d58(0x22f)+_0x1189b7[_0x4c2d58(0x6c)]));}let _0x46a5ff=!![];if(_0x2527ae){let _0x51ef3c=0x0;const _0x2d27bc=_0x2527ae[_0x4c2d58(0x208)];_0x548d98['forEach'](_0x2e3830=>{const _0x3550df=_0x4c2d58;if(_0x2d27bc[_0x3550df(0x208)][_0x2e3830][0x0]&&_0x2d27bc[_0x3550df(0x208)][_0x2e3830][0x0][_0x3550df(0x199)]['USD'][_0x3550df(0x1dd)])_0x51ef3c+=_0x2d27bc[_0x3550df(0x208)][_0x2e3830][0x0][_0x3550df(0x199)][_0x3550df(0x1f8)][_0x3550df(0x1dd)];else{if(![_0x3550df(0x1f5),_0x3550df(0x1f8)][_0x3550df(0x77)](_0x2e3830)){if(_0x41f6da)logHistory(_0x3550df(0x96),_0x3550df(0xff)+_0x2e3830+'\x20-\x20go\x20back\x20and\x20try\x20again');else{const _0x5b5602=config[_0x3550df(0x8a)]['find'](_0x2805a5=>_0x2805a5[_0x3550df(0x224)]==_0x2e3830);_0x5b5602&&!_0x5b5602[_0x3550df(0xe7)]&&_0x5b5602[_0x3550df(0xa4)]==-0x1&&(_0x46a5ff=![],logHistory(_0x3550df(0x96),'CoinMarketCap\x20data\x20could\x20not\x20be\x20updated\x20-\x20will\x20try\x20again\x20in\x201\x20hour'),logger[_0x3550df(0x244)]('CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20for\x20'+_0x2e3830));}}}});if(!_0x46a5ff)return;_0x548d98['forEach'](_0x526874=>{const _0x51cda6=_0x4c2d58,_0x47d605=_0x2d27bc[_0x51cda6(0x208)][_0x526874][0x0]?_0x2d27bc[_0x51cda6(0x208)][_0x526874][0x0]['quote'][_0x51cda6(0x1f8)][_0x51cda6(0x1dd)]:0x0;if(_0x41f6da){const _0x21e94b=_0x4dbf05[_0x51cda6(0x1bc)](_0x479b46=>_0x479b46[_0x51cda6(0x224)]==_0x526874);_0x21e94b&&(_0x21e94b[_0x51cda6(0x219)]=_0x47d605);}else{const _0x94fb6f=currentCoins['find'](_0x3dca6c=>_0x3dca6c['coin']==_0x526874);_0x94fb6f&&(_0x94fb6f[_0x51cda6(0x219)]=_0x47d605);const _0x1b7a10=currentCoinsAll[_0x51cda6(0x1bc)](_0xd63d5c=>_0xd63d5c['coin']==_0x526874);_0x1b7a10&&(_0x1b7a10['marketcap']=_0x47d605);}}),!_0x41f6da&&updateTargetDistribution();}}function updateTargetDistribution(){const _0x2747c2=_0x3c6aac,_0xa3b74f=0x2;let _0x593414=0x0,_0x817064=0x0,_0x1b5764=0x0,_0x3740be=0x0,_0x3680d4=0x0;config[_0x2747c2(0x8a)][_0x2747c2(0x8f)](_0x5b9dd2=>{const _0x47729b=_0x2747c2;if(!_0x5b9dd2['excluded']){_0x1b5764++,_0x593414+=_0x5b9dd2[_0x47729b(0xa4)];if(_0x5b9dd2[_0x47729b(0xa4)]===-0x1){_0x593414++;const _0x1e05ed=currentCoinsAll[_0x47729b(0x1bc)](_0x1e22f0=>_0x1e22f0['coin']==_0x5b9dd2['coin']);_0x1e05ed&&(_0x3740be+=_0x1e05ed[_0x47729b(0x219)],_0x3680d4+=Math[_0x47729b(0x16c)](_0x1e05ed[_0x47729b(0x219)]));}if(_0x5b9dd2[_0x47729b(0xa4)]!==-0x1)_0x817064++;}});let _0x5d4d31;const _0x4c9458=0x64-_0x593414,_0x121d90=_0x1b5764-_0x817064;_0x5d4d31=_0x121d90===0x0?_0x593414:Math[_0x2747c2(0x7f)](0x64,_0x593414),config[_0x2747c2(0x8a)][_0x2747c2(0x8f)](_0x9a07d=>{const _0x576bdc=_0x2747c2,_0x4ce4f2=currentCoinsAll['find'](_0x48b1a0=>_0x48b1a0['coin']==_0x9a07d[_0x576bdc(0x224)]);_0x4ce4f2&&(_0x9a07d['marketcap']=_0x4ce4f2[_0x576bdc(0x219)]);if(!_0x9a07d[_0x576bdc(0xe7)]){if(_0x5d4d31<=0x64){if(_0x9a07d['slider']===-0x1){if(_0x3740be!==0x0&&config[_0x576bdc(0xe9)]){if(_0x4ce4f2){if(config[_0x576bdc(0xe9)]==_0x576bdc(0x219))_0x9a07d['distribution']=(_0x4c9458/(_0x3740be/_0x4ce4f2[_0x576bdc(0x219)]))[_0x576bdc(0x123)](_0xa3b74f);else config[_0x576bdc(0xe9)]==_0x576bdc(0x1fe)&&(_0x9a07d[_0x576bdc(0x100)]=(_0x4c9458/(_0x3680d4/Math['sqrt'](_0x4ce4f2[_0x576bdc(0x219)])))[_0x576bdc(0x123)](_0xa3b74f));}}}}}}),updateConfig();}function updateConfig(){const _0x595abb=_0x3c6aac;let _0x3f486e=dbConfig[_0x595abb(0x194)]('bot')['find']({'botID':botID})[_0x595abb(0x241)]();_0x3f486e&&dbConfig[_0x595abb(0x194)](_0x595abb(0x160))[_0x595abb(0x1bc)]({'botID':botID})[_0x595abb(0x212)](config)[_0x595abb(0x245)]();}function logMemory(){const _0x2266f6=_0x3c6aac;if(environment!=_0x2266f6(0x89))return;const _0x3ec9a1=process[_0x2266f6(0x1d2)]()[_0x2266f6(0x1c1)]/0x400/0x400;logger[_0x2266f6(0x244)](_0x2266f6(0x16a)+process[_0x2266f6(0xd3)]+_0x2266f6(0x1e0)+formatResult(_0x3ec9a1,0x1)+_0x2266f6(0x20a));}async function startScheduler(){const _0x276431=shiftedTime()['getHours']();getMarketCap(),loadSymbols(),_0x276431==0x1&&logMemory(),await sleep(schedulerInterval),startScheduler();}async function restartBot(_0x4bff11=![]){const _0x382b62=_0x3c6aac;logger[_0x382b62(0x244)]('Initiating\x20bot\x20restart');if(!_0x4bff11)while(lockOrders!=ORDERS[_0x382b62(0x15b)]||coolingDown){await sleep(0x3e8);}process[_0x382b62(0x1ea)]({'stop':_0x382b62(0x1dc)},_0x459163=>{});}async function initExchange(_0x2447f7=config[_0x3c6aac(0x1b5)],_0xbb5a24=config[_0x3c6aac(0x205)],_0x29af8c=config[_0x3c6aac(0x68)],_0xa51e4f=config[_0x3c6aac(0x1d0)],_0x3b84d5=config[_0x3c6aac(0xcc)]){const _0x5630e0=_0x3c6aac;if(exchange){logger[_0x5630e0(0x244)](_0x5630e0(0xbf));return;}logger[_0x5630e0(0x244)](_0x5630e0(0x8c));!supportedExchanges()[_0x5630e0(0x77)](_0x2447f7)&&(logHistory(_0x5630e0(0x96),'Balance\x20Bot\x20does\x20not\x20support\x20the\x20'+_0x2447f7+_0x5630e0(0x20e)),killBot());const _0x16443c=ccxt[_0x5630e0(0xfa)][_0x2447f7[_0x5630e0(0x1da)]()];exchange=new _0x16443c({'apiKey':_0xbb5a24,'secret':_0x29af8c,'options':{'defaultType':_0x5630e0(0x1e7)}});if(_0xa51e4f)exchange[_0x5630e0(0x135)]=_0xa51e4f;if(exchange[_0x5630e0(0x14c)]['sandbox'])exchange[_0x5630e0(0x11a)](_0x3b84d5);}function updateExchange(_0x15956b,_0x27519a,_0x1def4a=null){const _0x3bd3aa=_0x3c6aac;exchange[_0x3bd3aa(0x205)]=_0x15956b,exchange[_0x3bd3aa(0xb5)]=_0x27519a,exchange[_0x3bd3aa(0x135)]=_0x1def4a,logger[_0x3bd3aa(0x244)](_0x3bd3aa(0x1e4));}function setStableCoins(){const _0x295c5c=_0x3c6aac;let _0x3d04fc=config[_0x295c5c(0x7a)]==_0x295c5c(0x22d)?_0x295c5c(0x22d):config[_0x295c5c(0x7a)]==_0x295c5c(0x1d1)?'PAXG':_0x295c5c(0x114),_0x3eebe4=allSymbols[_0x295c5c(0x77)](_0x3d04fc+_0x295c5c(0x127))?_0x295c5c(0x1f8):allSymbols[_0x295c5c(0x77)](_0x3d04fc+_0x295c5c(0x226))?'USDT':_0x295c5c(0x1f5),_0x542914=allSymbols[_0x295c5c(0x77)](_0x3d04fc+_0x295c5c(0xc5))?_0x295c5c(0x1f5):_0x3eebe4;enableFiatToggle=!![],_0x3eebe4==_0x295c5c(0x1f5)&&(enableFiatToggle=![],storeFiat(_0x295c5c(0x1f5))),_0x542914!='EUR'&&(enableFiatToggle=![],storeFiat(_0x295c5c(0x1f8))),stablecoins={'eur':{'coin':''+_0x3d04fc+_0x542914,'symbol':_0x3d04fc+'/'+_0x542914},'usd':{'coin':''+_0x3d04fc+_0x3eebe4,'symbol':_0x3d04fc+'/'+_0x3eebe4}};}async function initwsCcxt(){const _0x2e4de2=_0x3c6aac;initCycle++;const _0x57bfc5=initCycle;let _0x4192e4=[];config[_0x2e4de2(0x8a)][_0x2e4de2(0x8f)](_0x554fcf=>{const _0x448753=_0x2e4de2;if(!_0x554fcf[_0x448753(0xe7)]&&_0x554fcf[_0x448753(0x224)]!=config[_0x448753(0x7a)])_0x4192e4[_0x448753(0x1c6)](_0x554fcf[_0x448753(0x69)]);});if(!_0x4192e4[_0x2e4de2(0x77)](stablecoins['eur'][_0x2e4de2(0x69)]))_0x4192e4[_0x2e4de2(0x1c6)](stablecoins['eur'][_0x2e4de2(0x69)]);if(!_0x4192e4[_0x2e4de2(0x77)](stablecoins[_0x2e4de2(0x217)]['symbol']))_0x4192e4[_0x2e4de2(0x1c6)](stablecoins[_0x2e4de2(0x217)][_0x2e4de2(0x69)]);loadCoins(_0x4192e4),_0x4192e4=validateSymbols(_0x4192e4);const _0x2f8921=async _0x2be68a=>{const _0x8fe984=_0x2e4de2;let _0x43f06c;try{const _0x50bcd2=await getTickers(_0x2be68a);Object[_0x8fe984(0x1ee)](_0x50bcd2)['forEach'](_0x39c25f=>{const _0x5adfa1=_0x8fe984;_0x43f06c=_0x39c25f[0x1][_0x5adfa1(0x69)],gTicker[noslash(_0x43f06c)]=_0x39c25f[0x1]['last'],gChange[_0x43f06c]=_0x39c25f[0x1][_0x5adfa1(0xbe)];});}catch(_0x22e2b6){await handleError(_0x22e2b6,_0x8fe984(0x165),_0x43f06c);}},_0x1d8776=async _0x58539b=>{const _0x34097a=_0x2e4de2;while(initCycle==_0x57bfc5){if(!botPaused)try{const _0xf3c70f=await exchange[_0x34097a(0x105)](_0x58539b);gTicker[noslash(_0xf3c70f[0x0][_0x34097a(0x69)])]=_0xf3c70f[0x0][_0x34097a(0x166)];}catch(_0x35cbf8){if(!exchangeStopped)await handleError(_0x35cbf8,_0x34097a(0x19d),_0x58539b);}else await sleep(0x64);}},_0x2a8443=async _0x16ce8a=>{const _0x70fe47=_0x2e4de2;while(initCycle==_0x57bfc5){if(!botPaused)try{const _0x50b0c9=await exchange['watchTradesForSymbols'](_0x16ce8a),_0x3bd65c=_0x50b0c9[_0x70fe47(0x1b8)]();gTicker[noslash(_0x3bd65c['symbol'])]=_0x3bd65c['price'];}catch(_0x3c265e){if(!exchangeStopped)await handleError(_0x3c265e,_0x70fe47(0x151),_0x16ce8a[_0x70fe47(0x10f)]());}else await sleep(0x64);}},_0x20b948=async _0x19fd96=>{const _0x3822f9=_0x2e4de2;while(initCycle==_0x57bfc5){if(!botPaused){let _0x27c820;try{await sleep(0x3c*0x3e8);const _0x1ae63c=await getTickers(_0x19fd96);Object[_0x3822f9(0x1ee)](_0x1ae63c)[_0x3822f9(0x8f)](_0x36bb98=>{const _0x4fe274=_0x3822f9;_0x27c820=_0x36bb98[0x1][_0x4fe274(0x69)],gChange[_0x27c820]=_0x36bb98[0x1][_0x4fe274(0xbe)];});}catch(_0x18eabe){if(!exchangeStopped)await handleError(_0x18eabe,_0x3822f9(0x1c5),_0x27c820);}}else await sleep(0x64);}},_0x769f88=async _0x5035eb=>{const _0x508773=_0x2e4de2;while(initCycle==_0x57bfc5){if(!botPaused)try{const _0x46961e=await exchange[_0x508773(0x1e8)](_0x5035eb);initCycle==_0x57bfc5&&_0x46961e[_0x508773(0x8f)](_0x46182d=>{updateNumberCoinsCcxt(_0x46182d);});}catch(_0xfde020){if(!exchangeStopped)await handleError(_0xfde020,_0x508773(0xea));}else await sleep(0x64);}};_0x2f8921(_0x4192e4),_0x20b948(_0x4192e4),exchange[_0x2e4de2(0x14c)][_0x2e4de2(0x14f)]&&!(config['exchange']==_0x2e4de2(0x184)&&_0x4192e4[_0x2e4de2(0x1b6)]>0xa)?_0x2a8443(_0x4192e4):_0x4192e4[_0x2e4de2(0x8f)](_0x1a305b=>{_0x1d8776(_0x1a305b);}),_0x4192e4['forEach'](_0xc3f95e=>{_0x769f88(_0xc3f95e);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x2d33c1){const _0x26c7a8=_0x3c6aac;let _0x5748df={};try{if(config[_0x26c7a8(0x1b5)]!='Cryptocom')_0x5748df=await exchange[_0x26c7a8(0xa5)](_0x2d33c1);else for(const _0x3da547 of _0x2d33c1){const _0x5ca378=await exchange[_0x26c7a8(0xcb)](_0x3da547);_0x5748df[_0x3da547]=_0x5ca378;}return _0x5748df;}catch(_0x1d9fa7){throw _0x1d9fa7;}}function setBlockTransactionDetection(_0x278230){const _0x7e95d8=_0x3c6aac;blockTransactionDetection=_0x278230,logger[_0x7e95d8(0x244)](_0x7e95d8(0x122)+blockTransactionDetection);}async function detectLiquidityChange(_0x5ebdaa=0x0){const _0xcd133b=_0x3c6aac;transactionDetectionOngoing=!![];try{const _0xc62fa7=await getCoins(_0x5ebdaa),[_0x370076,_0x4c429f]=_0xc62fa7;let _0x375920=[];currentCoins[_0xcd133b(0x8f)](_0x56b149=>{const _0x2ef5b6=_0xcd133b,_0x27356d=_0x370076[_0x2ef5b6(0x1bc)](_0x32e2f8=>_0x32e2f8[_0x2ef5b6(0x224)]==_0x56b149['coin']);if(_0x27356d){if(_0x56b149[_0x2ef5b6(0xf4)]!=_0x27356d[_0x2ef5b6(0xf4)]){let _0x30d529;if(_0x56b149[_0x2ef5b6(0x224)]!=config[_0x2ef5b6(0x7a)]){const _0x34a789=gTicker[noslash(_0x56b149['symbol'])];_0x30d529=_0x56b149[_0x2ef5b6(0x239)]?0x1/_0x34a789:_0x34a789;}else _0x30d529=0x1;_0x375920[_0x2ef5b6(0x1c6)]({'coin':_0x56b149[_0x2ef5b6(0x224)],'symbol':_0x56b149[_0x2ef5b6(0x69)],'price':_0x30d529,'number':Number(formatResult(_0x27356d[_0x2ef5b6(0xf4)]-_0x56b149[_0x2ef5b6(0xf4)],0x8)),'basecoinvalue':_0x30d529*(_0x27356d[_0x2ef5b6(0xf4)]-_0x56b149['number'])});}}});if(_0x375920[_0xcd133b(0x1b6)]>0x0&&!blockTransactionDetection){for(const _0x37157c of _0x375920){if(config[_0xcd133b(0x21f)]){logger[_0xcd133b(0x244)](_0xcd133b(0x220)+_0x37157c['basecoinvalue']+_0xcd133b(0xa1)+lastFees['highest']);if(lastFees[_0xcd133b(0x125)]==0x0||Math[_0xcd133b(0x15d)](_0x37157c['basecoinvalue'])>lastFees[_0xcd133b(0x125)]*0x3){if(config[_0xcd133b(0x21f)]=='update-liquidity'){delete _0x37157c[_0xcd133b(0x69)],delete _0x37157c[_0xcd133b(0x1b1)];let _0x353699=[],_0x3aa91f=[...config['liquidity']]||[],_0x51000a=config[_0xcd133b(0x140)];_0x3aa91f[_0xcd133b(0x22a)]((_0x65e6a2,_0x2f4353)=>_0x65e6a2[_0xcd133b(0x197)]>_0x2f4353['date']?-0x1:_0x2f4353[_0xcd133b(0x197)]>_0x65e6a2['date']?0x1:0x0);const _0xf2be3d=getDate();if(_0x3aa91f[0x0]){const _0x5dbe8d=fns[_0xcd133b(0x237)](_0x3aa91f[0x0][_0xcd133b(0x197)],_0xcd133b(0x207),new Date()),_0x2c2c31=fns[_0xcd133b(0x237)](_0xf2be3d,'yyyy/MM/dd',new Date());if(fns[_0xcd133b(0x133)](_0x5dbe8d,_0x2c2c31)){_0x353699=_0x3aa91f[0x0][_0xcd133b(0xf6)];const _0x5df354=_0x353699['find'](_0x32544c=>_0x32544c[_0xcd133b(0x224)]==_0x37157c[_0xcd133b(0x224)]);_0x5df354?(_0x5df354[_0xcd133b(0xf4)]+=_0x37157c[_0xcd133b(0xf4)],_0x5df354[_0xcd133b(0xf4)]==0x0&&(_0x353699=_0x353699['filter'](_0x49748d=>{const _0x20d1df=_0xcd133b;return _0x49748d[_0x20d1df(0x224)]!=_0x37157c['coin'];}))):_0x353699[_0xcd133b(0x1c6)](_0x37157c);const _0x24be3e=_0x51000a[_0xcd133b(0x1bc)](_0x196f68=>_0x196f68['date']==_0xf2be3d);_0x24be3e[_0xcd133b(0xf6)]=_0x353699;}else _0x51000a[_0xcd133b(0x1c6)]({'date':_0xf2be3d,'changes':[_0x37157c]});}const _0x221260=_0x51000a['find'](_0x43bc2e=>_0x43bc2e[_0xcd133b(0x197)]==_0xf2be3d);if(_0x221260){let _0x2c4b88=!![];_0x221260['changes'][_0xcd133b(0x8f)](_0x5a22ef=>{if(_0x5a22ef['number']!=0x0)_0x2c4b88=![];}),_0x2c4b88&&(_0x51000a=_0x51000a[_0xcd133b(0xe8)](_0x5a4678=>{const _0x1c84c3=_0xcd133b;return _0x5a4678[_0x1c84c3(0x197)]!=_0xf2be3d;}));}let _0x1cfc63=dbConfig[_0xcd133b(0x194)](_0xcd133b(0x160))[_0xcd133b(0x1bc)]({'botID':botID})[_0xcd133b(0x241)]();_0x1cfc63&&(dbConfig[_0xcd133b(0x194)](_0xcd133b(0x160))[_0xcd133b(0x1bc)]({'botID':botID})[_0xcd133b(0x212)]({'liquidity':_0x51000a})[_0xcd133b(0x245)](),config['liquidity']=_0x51000a);logHistory('success',_0xcd133b(0x150)+Math[_0xcd133b(0x15d)](_0x37157c[_0xcd133b(0xf4)])+'\x20'+_0x37157c[_0xcd133b(0x224)]+'\x20'+(_0x37157c['number']>0x0?_0xcd133b(0x1c3):_0xcd133b(0x187))+_0xcd133b(0x176)),proxyEmit('configuration',emittedConfiguration());const _0x290c6a=getNormalizedPerformance();emitPerformance(_0x290c6a),getStartingBalances(_0x290c6a),logger[_0xcd133b(0x244)](_0xcd133b(0x16d));}else config[_0xcd133b(0x21f)]==_0xcd133b(0x156)&&(config[_0xcd133b(0x130)]?(await storeHeadless({'headless':![]}),logHistory('success',_0xcd133b(0x150)+Math[_0xcd133b(0x15d)](_0x37157c[_0xcd133b(0xf4)])+'\x20'+_0x37157c[_0xcd133b(0x224)]+'\x20'+(_0x37157c[_0xcd133b(0xf4)]>0x0?'added':'removed')+'\x20-\x20bot\x20switched\x20to\x20manual\x20mode')):logger['debug'](_0xcd133b(0x150)+Math['abs'](_0x37157c[_0xcd133b(0xf4)])+'\x20'+_0x37157c[_0xcd133b(0x224)]+'\x20'+(_0x37157c['number']>0x0?_0xcd133b(0x1c3):_0xcd133b(0x187))+_0xcd133b(0x1e3)));}else logger[_0xcd133b(0x244)](_0xcd133b(0x1cf)+Math[_0xcd133b(0x15d)](_0x37157c[_0xcd133b(0xf4)])+'\x20'+_0x37157c[_0xcd133b(0x224)]+'\x20'+(_0x37157c['number']>0x0?_0xcd133b(0x1c3):_0xcd133b(0x187)));}else logger[_0xcd133b(0x244)](_0xcd133b(0x150)+Math[_0xcd133b(0x15d)](_0x37157c['number'])+'\x20'+_0x37157c[_0xcd133b(0x224)]+'\x20'+(_0x37157c['number']>0x0?_0xcd133b(0x1c3):_0xcd133b(0x187))+'\x20-\x20auto\x20adjusting\x20liquidity\x20is\x20disabled');}currentCoins=_0x370076,currentCoinsAll=_0x4c429f;}}catch(_0x155a2c){if(!exchangeStopped)await handleError(_0x155a2c,_0xcd133b(0xd4));}transactionDetectionOngoing=![];}async function watchTransactions(){await sleep(0x14*0x3e8);while(!![]){!botPaused&&!blockTransactionDetection&&coinsLoaded?(detectLiquidityChange(),await sleep(watchTransactionsInterval)):await sleep(0x3e8);}}async function loadSymbols(){const _0x16541a=_0x3c6aac;try{markets=await exchange[_0x16541a(0x21a)](!![]),allSymbols=[],Object[_0x16541a(0x1ee)](markets)[_0x16541a(0x8f)](_0x585ea9=>{const _0x53c45b=_0x16541a;_0x585ea9[0x1][_0x53c45b(0x101)]&&_0x585ea9[0x1][_0x53c45b(0x1e7)]&&allSymbols[_0x53c45b(0x1c6)](_0x585ea9[0x0]);});}catch(_0x1b8524){markets?logger['debug'](_0x16541a(0x11d)+_0x1b8524['toString']()):(loading[_0x16541a(0xd5)]=!![],_0x1b8524[_0x16541a(0x10f)]()['toLowerCase']()[_0x16541a(0x77)](_0x16541a(0x86))||_0x1b8524['toString']()['toLowerCase']()[_0x16541a(0x77)](_0x16541a(0x183))?(logHistory(_0x16541a(0x96),_0x16541a(0x1ff)),loading['error']='timestamp-issue'):handleErrorNoStop(_0x1b8524,_0x16541a(0x115),!![]),logHistory(_0x16541a(0x96),'Failed\x20to\x20load\x20market\x20data\x20-\x20bot\x20not\x20started'),logHistory(_0x16541a(0x96),_0x16541a(0xfc)+loadCoinsRetryInterval/0xea60+'\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again'),logger[_0x16541a(0x244)]('Error\x20details:',_0x1b8524),emitLoadingProgress(),botPaused=!![],await sleep(loadCoinsRetryInterval),restartBot());}}function validateSymbols(_0x3d0f84){const _0x5d7f01=_0x3c6aac;let _0x304964=[];return _0x3d0f84[_0x5d7f01(0x8f)](_0x22cd44=>{const _0x3805e9=_0x5d7f01;!allSymbols[_0x3805e9(0x77)](_0x22cd44)?(logHistory('error','Invalid\x20symbol:\x20'+_0x22cd44+_0x3805e9(0x223)),loading[_0x3805e9(0x13d)]=!![],emitLoadingProgress()):_0x304964[_0x3805e9(0x1c6)](_0x22cd44);}),_0x304964;}async function initclient(){const _0x3c07a8=_0x3c6aac;proxyEmit('configuration',emittedConfiguration()),proxyEmit(_0x3c07a8(0x200),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x3c07a8(0x181),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x17e239=getNormalizedPerformance();emitPerformance(_0x17e239),getStartingBalances(_0x17e239);}async function toggleBotMode(){const _0x334644=_0x3c6aac;let _0x1207a6=dbConfig[_0x334644(0x194)](_0x334644(0x160))['find']({'botID':botID})[_0x334644(0x241)]();if(_0x1207a6){const _0x475af5=!_0x1207a6['headless'];dbConfig['get'](_0x334644(0x160))[_0x334644(0x1bc)]({'botID':botID})[_0x334644(0x212)]({'headless':_0x475af5})[_0x334644(0x245)](),config[_0x334644(0x130)]=_0x475af5,proxyEmit(_0x334644(0x213),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x35119d=_0x3c6aac;process[_0x35119d(0x1ea)]({'updatebotmanager':!![]},_0x5a0d1f=>{}),logger[_0x35119d(0x244)](_0x35119d(0x12b)+config[_0x35119d(0x130)]);}async function loadCoins(_0x42b0bc){const _0x2a0f48=_0x3c6aac;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0xf9d73a,_0x35939a=0x0,_0x1955cb=0x0;_0x42b0bc[_0x2a0f48(0x8f)](_0x488668=>{const _0x20c80e=_0x2a0f48;loading[_0x20c80e(0xf1)][_0x20c80e(0x1c6)](_0x488668);}),loadingCanceled=![];let _0x576189=![];while(_0xf9d73a!=_0x42b0bc['length']+maxLoadingProgress){_0xf9d73a=loadingProgress,_0x42b0bc['forEach'](_0x51df16=>{const _0x19cb18=_0x2a0f48;if(gTicker[noslash(_0x51df16)]){loading[_0x19cb18(0xf1)]=loading[_0x19cb18(0xf1)][_0x19cb18(0xe8)](_0x449d4b=>_0x449d4b!=_0x51df16);if(!watchedSymbols['includes'](_0x51df16))watchedSymbols[_0x19cb18(0x1c6)](_0x51df16);_0xf9d73a++;}}),loading['progress']=Math[_0x2a0f48(0xdd)](_0xf9d73a/(_0x42b0bc['length']+maxLoadingProgress)*0x64);loading[_0x2a0f48(0xdc)]!=0x64&&(_0x1955cb>0x1e*0x5&&(loading[_0x2a0f48(0x13d)]=!![],emitLoadingProgress()),_0x1955cb>0x78*0x5&&!_0x576189&&(_0x576189=!![],logHistory(_0x2a0f48(0x96),_0x2a0f48(0x1a5)+loading[_0x2a0f48(0xf1)][_0x2a0f48(0x155)](',\x20')+'\x20-\x20bot\x20not\x20started'),logHistory(_0x2a0f48(0x96),_0x2a0f48(0xfc)+loadCoinsRetryInterval/0xea60+_0x2a0f48(0x1c7)),loadingCanceled=!![],await sleep(loadCoinsRetryInterval),restartBot()));if(loadingCanceled){loading['cancel']=!![],emitLoadingProgress();break;}else _0x35939a!=loading[_0x2a0f48(0xdc)]&&(_0x35939a=loading['progress'],emitLoadingProgress()),_0x1955cb++,await sleep(0xc8);}_0xf9d73a==_0x42b0bc[_0x2a0f48(0x1b6)]+maxLoadingProgress&&(coinsLoaded=!![],process['send']({'status':'enabled','live':_0x2a0f48(0x18e)},_0x41e423=>{}),_0x576189&&logHistory(_0x2a0f48(0x87),_0x2a0f48(0x67)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){proxyEmit('configuration',{...emittedConfiguration(),'configstate':'loading-canceled'});}function emitLoadingProgress(){const _0x1a41a5=_0x3c6aac;proxyEmit(_0x1a41a5(0x17a),loading);}async function getFiat(){const _0x498a86=_0x3c6aac;let _0xefe28a=gTicker[stablecoins[_0x498a86(0x13e)]['coin']],_0x543a8e=gTicker[stablecoins[_0x498a86(0x217)][_0x498a86(0x224)]];return{'eur':Number(_0xefe28a),'usd':Number(_0x543a8e)};}function capitalize(_0x429dd1){const _0x4abe3d=_0x3c6aac;return _0x429dd1[_0x4abe3d(0x8e)](0x0,0x1)['toUpperCase']()+_0x429dd1[_0x4abe3d(0x8e)](0x1);}function supportedExchanges(){const _0x2e9e5b=_0x3c6aac,_0x13dc7d=['ws','fetchTickers',_0x2e9e5b(0xcb),'watchTrades',_0x2e9e5b(0x1e8),'cancelOrder',_0x2e9e5b(0x230),_0x2e9e5b(0xef),_0x2e9e5b(0x23f)];let _0x5e2658=[],_0x2be1f0=[],_0x1454be=ccxt['pro'][_0x2e9e5b(0x200)];_0x1454be['forEach'](_0x19377b=>{const _0x4d6e3e=_0x2e9e5b;try{const _0x134f7b=new ccxt[(_0x4d6e3e(0xfa))][_0x19377b]();_0x2be1f0[_0x4d6e3e(0x1c6)](_0x134f7b);}catch(_0x3185a4){}}),_0x2be1f0[_0x2e9e5b(0x8f)](_0x2fe917=>{const _0x2a1230=_0x2e9e5b;let _0x2b4af6=0x0;_0x13dc7d['forEach'](_0x29fd70=>{const _0x374e42=_0x40ee;_0x29fd70 in _0x2fe917[_0x374e42(0x14c)]&&_0x2fe917[_0x374e42(0x14c)][_0x29fd70]&&_0x2b4af6++;}),_0x2b4af6==_0x13dc7d['length']&&(!excludedExchanges[_0x2a1230(0x77)](_0x2fe917['id'])&&_0x5e2658[_0x2a1230(0x1c6)](capitalize(_0x2fe917['id'])));});let _0x4b030f=[];return _0x1454be[_0x2e9e5b(0x8f)](_0x170848=>{const _0x462886=_0x2e9e5b;_0x170848=capitalize(_0x170848);if(!_0x5e2658[_0x462886(0x77)](_0x170848))_0x4b030f[_0x462886(0x1c6)](_0x170848);}),_0x5e2658;}function setStartDatePerformance(){const _0x51444a=_0x3c6aac;if(config&&config[_0x51444a(0x140)][0x0][_0x51444a(0xf6)][_0x51444a(0x1b6)]!=0x0){const _0x14bf92=config[_0x51444a(0x140)][0x0]['changes'];dbPerformance[_0x51444a(0x194)]('data')[_0x51444a(0x1bc)]({'date':config[_0x51444a(0x21c)]})[_0x51444a(0x212)]({'coins':_0x14bf92})[_0x51444a(0x245)]();}}function calculatePnL(_0x361fc7,_0x20bfa5,_0x543718,_0x4905a1,_0x44b5ec,_0x291ac6){const _0xfbb2c8=_0x3c6aac;!_0x361fc7['includes']('/'+config[_0xfbb2c8(0x7a)])&&(_0x543718=_0x543718==_0xfbb2c8(0x14d)?_0xfbb2c8(0x93):'buy');!_0x291ac6[_0x20bfa5]&&(_0x291ac6[_0x20bfa5]={'number':0x0,'sells':0x0,'buys':0x0,'breakeven':0x0,'realizedPnL':0x0});let _0x43be25=0x0,_0x4d604b,_0x3c6c14;if(_0x543718==_0xfbb2c8(0x14d))_0x3c6c14=_0x291ac6[_0x20bfa5]['number']*_0x291ac6[_0x20bfa5][_0xfbb2c8(0x1f7)]+_0x44b5ec*_0x4905a1,_0x291ac6[_0x20bfa5][_0xfbb2c8(0xf4)]+=_0x4905a1,_0x291ac6[_0x20bfa5]['breakeven']=_0x291ac6[_0x20bfa5][_0xfbb2c8(0xf4)]!=0x0?_0x3c6c14/_0x291ac6[_0x20bfa5][_0xfbb2c8(0xf4)]:0x0,_0x291ac6[_0x20bfa5]['buys']++;else _0x543718==_0xfbb2c8(0x93)&&(_0x4d604b=Math[_0xfbb2c8(0xab)](_0x291ac6[_0x20bfa5]['number'],_0x4905a1),_0x43be25=(_0x44b5ec-_0x291ac6[_0x20bfa5][_0xfbb2c8(0x1f7)])*_0x4d604b,_0x3c6c14=Math[_0xfbb2c8(0x7f)](_0x291ac6[_0x20bfa5][_0xfbb2c8(0xf4)]*_0x291ac6[_0x20bfa5][_0xfbb2c8(0x1f7)]-_0x4d604b*_0x291ac6[_0x20bfa5][_0xfbb2c8(0x1f7)],0x0),_0x291ac6[_0x20bfa5]['number']-=_0x4d604b,_0x291ac6[_0x20bfa5][_0xfbb2c8(0x1f7)]=_0x291ac6[_0x20bfa5]['number']!=0x0?_0x3c6c14/_0x291ac6[_0x20bfa5][_0xfbb2c8(0xf4)]:0x0,_0x291ac6[_0x20bfa5][_0xfbb2c8(0x240)]+=_0x43be25,_0x291ac6[_0x20bfa5]['sells']++);return _0x43be25;}async function generatePnL(){const _0x1c6300=_0x3c6aac;pnlGenerationNeeded=![],logger[_0x1c6300(0x244)](_0x1c6300(0x6e));const _0x1a852d=dbLogs[_0x1c6300(0x194)]('logs')[_0x1c6300(0x241)]();let _0x4365f4={},_0x14a985=0x0,_0x4bf6b9=0x0,_0x2f23de=config['startdate'];const _0x29ebb0=fns[_0x1c6300(0x237)](_0x2f23de,'yyyy/MM/dd',new Date()),_0x1dba51=new Date();let _0x1be67f=0x0;for(let _0x4a3bf0=_0x29ebb0;!fns[_0x1c6300(0xa8)](_0x1dba51,_0x4a3bf0);_0x4a3bf0=fns[_0x1c6300(0x17d)](_0x4a3bf0,0x1)){const _0x5bb37c=fns[_0x1c6300(0x1eb)](_0x4a3bf0,_0x1c6300(0x207));while(_0x14a985<_0x1a852d[_0x1c6300(0x1b6)]){const _0x273643=new Date(_0x1a852d[_0x14a985][_0x1c6300(0x1b3)]);if(fns[_0x1c6300(0xa8)](_0x273643,_0x4a3bf0))_0x14a985++;else{if(_0x1a852d[_0x14a985][_0x1c6300(0x1b3)][_0x1c6300(0x77)](_0x5bb37c)){const _0x4b0da1=_0x1a852d[_0x14a985];if(_0x4b0da1[_0x1c6300(0x12e)]===_0x1c6300(0x20d)&&(_0x4b0da1['event'][_0x1c6300(0x77)](_0x1c6300(0x12c))||_0x4b0da1['event'][_0x1c6300(0x77)]('Market\x20order'))){const _0x1221ce=_0x4b0da1[_0x1c6300(0x1a1)]['match'](/([A-Z]+\/[A-Z]+) (sell|buy) #([\d.]+) @([\d.]+)/);if(_0x1221ce){const [,_0x2a3adc,_0x4ab4bc,_0x10dfbf,_0x484648]=_0x1221ce,_0x31c098=_0x2a3adc[_0x1c6300(0x77)]('/'+config[_0x1c6300(0x7a)])?_0x2a3adc[_0x1c6300(0x9b)]('/')[0x0]:_0x2a3adc[_0x1c6300(0x9b)]('/')[0x1],_0x5e6892=calculatePnL(_0x2a3adc,_0x31c098,_0x4ab4bc,parseFloat(_0x10dfbf),parseFloat(_0x484648),_0x4365f4);_0x4bf6b9+=_0x5e6892;}}_0x14a985++;}else break;}}dbPerformance[_0x1c6300(0x194)]('data')['find']({'date':_0x5bb37c})[_0x1c6300(0x212)]({'pnl':_0x4bf6b9})['write']();}dbCoinResults[_0x1c6300(0x90)]('coins',_0x4365f4)['write'](),logger['debug'](_0x1c6300(0x231));const _0x3bc60c=getNormalizedPerformance();emitPerformance(_0x3bc60c);}async function updatePnL(_0x55cbd1){const _0x3cdcab=_0x3c6aac,{symbol:_0x68e01a,coin:_0x43ebb0,amount:_0x4baeb1,price:_0x67a7f,side:_0x1af457,reverse:_0x56e530}=_0x55cbd1;let _0x5bf8ec=dbCoinResults[_0x3cdcab(0x194)](_0x3cdcab(0x107))[_0x3cdcab(0x241)]();const _0x58a867=calculatePnL(_0x68e01a,_0x43ebb0,_0x1af457,_0x4baeb1,_0x67a7f,_0x5bf8ec);dbCoinResults[_0x3cdcab(0x90)](_0x3cdcab(0x107),_0x5bf8ec)[_0x3cdcab(0x245)]();const _0x23f6b9=getTimeStamp()['split']('\x20')[0x0];let _0x4481df=dbPerformance[_0x3cdcab(0x194)](_0x3cdcab(0x208))[_0x3cdcab(0x1bc)]({'date':_0x23f6b9})['value']();_0x4481df?(_0x4481df['pnl']+=_0x58a867,dbPerformance['get'](_0x3cdcab(0x208))['find']({'date':_0x23f6b9})[_0x3cdcab(0x212)](_0x4481df)['write']()):await storePerformance();const _0x312817=getNormalizedPerformance();emitPerformance(_0x312817);}async function validate24hChanges(){const _0x271f39=_0x3c6aac;for(const _0x16d67d of currentCoins){if(_0x16d67d['coin']!=config[_0x271f39(0x7a)]){let _0x71495e;_0x16d67d['reverse']?_0x71495e=formatResult((0x1/(gChange[_0x16d67d['symbol']]/0x64+0x1)-0x1)*0x64,0x3):_0x71495e=gChange[_0x16d67d[_0x271f39(0x69)]],_0x71495e<config['change24h']&&(logHistory('error',_0x16d67d[_0x271f39(0x224)]+_0x271f39(0xeb)+_0x71495e+'%'),logHistory(_0x271f39(0x96),_0x271f39(0xf0)),logHistory(_0x271f39(0x96),_0x271f39(0x1e6)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x4eb493,_0x455d87){const _0x7983a3=_0x3c6aac;if(!_0x4eb493)return!![];const _0x312607=_0x455d87[_0x7983a3(0x9b)]('.'),_0x565b62=_0x4eb493['split']('.');for(var _0x460037=0x0;_0x460037<_0x565b62[_0x7983a3(0x1b6)];_0x460037++){const _0x51b4b5=~~_0x565b62[_0x460037],_0x3699e0=~~_0x312607[_0x460037];if(_0x51b4b5<_0x3699e0)return!![];if(_0x51b4b5>_0x3699e0)return![];}return![];}async function oneTimeMigration(){const _0x4137ab=_0x3c6aac;let _0x2a716b=dbLogs['get'](_0x4137ab(0x92))[_0x4137ab(0x241)]();if(isOlderVersion(_0x2a716b,_0x4137ab(0x126))){let _0xcdf512=[];const _0x47d3b9=dbLogs[_0x4137ab(0x194)](_0x4137ab(0x221))[_0x4137ab(0x241)]();_0x47d3b9[_0x4137ab(0x8f)](_0x4624b3=>{const _0x4fc20c=_0x4137ab;_0xcdf512[_0x4fc20c(0x1c6)]({'time':_0x4624b3['time'],'type':_0x4624b3[_0x4fc20c(0x12e)],'event':_0x4624b3['event']});}),dbLogs[_0x4137ab(0x194)]('logs')[_0x4137ab(0x212)](_0xcdf512)[_0x4137ab(0x245)]();}let _0x905b2f=dbConfig['get'](_0x4137ab(0x92))['value']();if(isOlderVersion(_0x905b2f,_0x4137ab(0x126))){let _0x55db9e=dbConfig[_0x4137ab(0x194)](_0x4137ab(0x160))['find']({'botID':botID})['value']();if(_0x55db9e){let _0x5280a3=[];_0x55db9e[_0x4137ab(0x8a)][_0x4137ab(0x8f)](_0x136ff7=>{const _0x4f0931=_0x4137ab;_0x5280a3['push']({'coin':_0x136ff7[_0x4f0931(0x224)],'number':_0x136ff7[_0x4f0931(0x7d)],'price':_0x136ff7['startprice']}),delete _0x136ff7[_0x4f0931(0x7d)],delete _0x136ff7[_0x4f0931(0x10c)];});if(_0x5280a3[_0x4137ab(0x1b6)]!==0x0)fs[_0x4137ab(0x21b)](configbackuppath+(_0x4137ab(0xbd)+botID+'.json'),JSON[_0x4137ab(0xd8)](_0x5280a3,null,0x4),function(_0x2b523d){if(_0x2b523d){}});const _0x1bbf1c=(_0x4ce0b1,_0x47a194)=>{let _0x211df5=[];_0x47a194['forEach'](_0xe45c6d=>{const _0x4292f8=_0x40ee,_0x2bc675=_0x4ce0b1[_0x4292f8(0x1bc)](_0x252128=>_0x252128[_0x4292f8(0x224)]==_0xe45c6d['coin']);if(!_0x2bc675)_0x211df5['push'](_0xe45c6d);});let _0x4eac5d=[];return _0x4ce0b1['forEach'](_0x56079e=>{const _0x3b9004=_0x40ee,_0x4126b6=_0x47a194[_0x3b9004(0x1bc)](_0x388c07=>_0x388c07[_0x3b9004(0x224)]==_0x56079e[_0x3b9004(0x224)]);if(!_0x4126b6||_0x4126b6[_0x3b9004(0xf4)]==0x0&&_0x56079e['number']!=0x0)_0x4eac5d[_0x3b9004(0x1c6)](_0x56079e);}),{'missingDay1':_0x211df5,'notInDay2':_0x4eac5d};},_0x24ee84=dbPerformance['get'](_0x4137ab(0x208))[_0x4137ab(0x186)]()['value']();if(_0x24ee84[_0x4137ab(0x1b6)]>0x1){const {missingDay1:_0x12b648,notInDay2:_0x27a988}=_0x1bbf1c(_0x5280a3,_0x24ee84[0x1][_0x4137ab(0x107)]);_0x5280a3=[..._0x5280a3,..._0x12b648],_0x27a988[_0x4137ab(0x8f)](_0x2438a5=>{const _0x1e0c23=_0x4137ab;let _0x54c007=_0x5280a3[_0x1e0c23(0xdb)](_0x23bac2=>_0x23bac2['coin']==_0x2438a5['coin']);_0x54c007!=-0x1&&_0x5280a3['splice'](_0x54c007,0x1);});}_0x5280a3[_0x4137ab(0x22a)]((_0x3b8159,_0x49ae5f)=>_0x3b8159['coin']>_0x49ae5f[_0x4137ab(0x224)]?0x1:_0x49ae5f[_0x4137ab(0x224)]>_0x3b8159[_0x4137ab(0x224)]?-0x1:0x0);let _0xf53389=[{'date':_0x55db9e['startdate'],'changes':_0x5280a3}];_0x24ee84['length']>0x2&&_0x24ee84[_0x4137ab(0x8f)]((_0x2a5f46,_0x46da23)=>{const _0xc91983=_0x4137ab;if(_0x46da23>0x0&&_0x46da23<_0x24ee84['length']-0x1){const {missingDay1:_0x1144dd,notInDay2:_0x139c07}=_0x1bbf1c(_0x24ee84[_0x46da23]['coins'],_0x24ee84[_0x46da23+0x1][_0xc91983(0x107)]);_0x5280a3=[],(_0x1144dd[_0xc91983(0x1b6)]!=0x0||_0x139c07[_0xc91983(0x1b6)]!=0x0)&&(_0x1144dd['length']!=0x0&&_0x5280a3[_0xc91983(0x1c6)](..._0x1144dd),_0x139c07['length']!=0x0&&(_0x139c07[_0xc91983(0x8f)](_0xbfdc3c=>{const _0x5e03c8=_0xc91983;_0xbfdc3c['number']=-_0xbfdc3c[_0x5e03c8(0xf4)];}),_0x5280a3[_0xc91983(0x1c6)](..._0x139c07)),_0x5280a3[_0xc91983(0x22a)]((_0x5687e5,_0x552da4)=>_0x5687e5[_0xc91983(0x224)]>_0x552da4[_0xc91983(0x224)]?0x1:_0x552da4[_0xc91983(0x224)]>_0x5687e5[_0xc91983(0x224)]?-0x1:0x0),_0xf53389[_0xc91983(0x1c6)]({'date':_0x24ee84[_0x46da23+0x1][_0xc91983(0x197)],'changes':_0x5280a3}));}}),dbConfig[_0x4137ab(0x194)]('bot')[_0x4137ab(0x1bc)]({'botID':botID})[_0x4137ab(0x212)]({..._0x55db9e,'liquidity':_0xf53389})[_0x4137ab(0x245)]();}}if(isOlderVersion(_0x905b2f,_0x4137ab(0x98))){let _0x4581e8=dbConfig[_0x4137ab(0x194)]('bot')['find']({'botID':botID})['value']();if(_0x4581e8){const _0x196342=_0x4581e8[_0x4137ab(0x1b5)],_0x29d1c5=_0x196342?capitalize(_0x196342):_0x4137ab(0x1fb);dbConfig[_0x4137ab(0x194)](_0x4137ab(0x160))[_0x4137ab(0x1bc)]({'botID':botID})[_0x4137ab(0x212)]({'exchange':_0x29d1c5})[_0x4137ab(0x245)]();}}if(isOlderVersion(_0x905b2f,_0x4137ab(0x132))){let _0xd68cb8=dbConfig[_0x4137ab(0x194)](_0x4137ab(0x160))[_0x4137ab(0x1bc)]({'botID':botID})[_0x4137ab(0x241)]();if(_0xd68cb8){const _0x2ce9fa=_0xd68cb8[_0x4137ab(0xe9)],_0x221030=_0x2ce9fa?'marketcap':![];dbConfig[_0x4137ab(0x194)](_0x4137ab(0x160))[_0x4137ab(0x1bc)]({'botID':botID})[_0x4137ab(0x212)]({'marketcapEnabled':_0x221030})[_0x4137ab(0x245)]();}}if(isOlderVersion(_0x905b2f,_0x4137ab(0x210))){let _0x1be104=dbConfig['get'](_0x4137ab(0x160))[_0x4137ab(0x1bc)]({'botID':botID})[_0x4137ab(0x241)]();if(_0x1be104){const _0x36d7f9=_0x1be104['autoliquidity'],_0x1f638c=_0x36d7f9?_0x4137ab(0x9e):![];dbConfig[_0x4137ab(0x194)](_0x4137ab(0x160))[_0x4137ab(0x1bc)]({'botID':botID})[_0x4137ab(0x212)]({'autoliquidity':_0x1f638c})[_0x4137ab(0x245)]();}}let _0x202f04=dbPerformance[_0x4137ab(0x194)](_0x4137ab(0x92))[_0x4137ab(0x241)]();isOlderVersion(_0x202f04,_0x4137ab(0x126))&&setStartDatePerformance();let _0x2a507e=dbCoinResults[_0x4137ab(0x194)]('version')['value']();if(isOlderVersion(_0x2a507e,_0x4137ab(0xd7))){let _0x142293=dbCoinResults[_0x4137ab(0x194)]('coins')[_0x4137ab(0x241)]();if(_0x142293[_0x4137ab(0x1b6)]!=0x0)pnlGenerationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x4b3bdf=_0x3c6aac;dbConfig[_0x4b3bdf(0x90)](_0x4b3bdf(0x92),serverversion)[_0x4b3bdf(0x245)](),dbPerformance[_0x4b3bdf(0x90)](_0x4b3bdf(0x92),serverversion)['write'](),dbLogs['set']('version',serverversion)[_0x4b3bdf(0x245)](),dbCoinResults[_0x4b3bdf(0x90)]('version',serverversion)[_0x4b3bdf(0x245)]();}function getConfiguration(_0x1c2760){const _0x49d75a=_0x3c6aac;let _0x46503f=dbConfig[_0x49d75a(0x194)](_0x49d75a(0x160))['find']({'botID':_0x1c2760})[_0x49d75a(0x241)]();if(_0x46503f){let _0x578795=![];typeof _0x46503f[_0x49d75a(0x169)]==_0x49d75a(0xf5)&&(_0x46503f={..._0x46503f,'threshold':Number(_0x46503f['threshold'])},_0x578795=!![]),_0x46503f[_0x49d75a(0x20f)]==undefined&&(_0x46503f={..._0x46503f,'change24h':-0x14},_0x578795=!![]),_0x46503f[_0x49d75a(0x7c)]==undefined&&(_0x46503f={..._0x46503f,'fiat':_0x49d75a(0x1f8)},_0x578795=!![]),_0x46503f[_0x49d75a(0x6f)]==undefined&&(_0x46503f={..._0x46503f,'onepagemode':settings[_0x49d75a(0x6f)]},_0x578795=!![]),_0x46503f['colorscheme']==undefined&&(_0x46503f={..._0x46503f,'colorscheme':_0x49d75a(0x209)},_0x578795=!![]),_0x46503f[_0x49d75a(0x21f)]==undefined&&(_0x46503f={..._0x46503f,'autoliquidity':_0x49d75a(0x9e)},_0x578795=!![]),_0x46503f[_0x49d75a(0x1d7)]==undefined&&(_0x46503f={..._0x46503f,'marketcapApi':settings[_0x49d75a(0x1d7)]?!![]:![]},_0x578795=!![]),_0x46503f['marketcapEnabled']==undefined&&(_0x46503f={..._0x46503f,'marketcapEnabled':![]},_0x578795=!![]),_0x46503f[_0x49d75a(0xcc)]==undefined&&(_0x46503f={..._0x46503f,'sandbox':![]},_0x578795=!![]),_0x578795&&(_0x46503f={'botID':_0x46503f['botID'],'exchange':_0x46503f[_0x49d75a(0x1b5)],'apiKey':_0x46503f['apiKey'],'apiSecret':_0x46503f['apiSecret'],'apiPassword':_0x46503f[_0x49d75a(0x1d0)],'basecoin':_0x46503f[_0x49d75a(0x7a)],'botname':_0x46503f[_0x49d75a(0x23a)],'showname':_0x46503f['showname'],'threshold':_0x46503f[_0x49d75a(0x169)],'ordertype':_0x46503f[_0x49d75a(0x1de)],'timeout':_0x46503f[_0x49d75a(0x13d)],'fiat':_0x46503f[_0x49d75a(0x7c)],'startdate':_0x46503f[_0x49d75a(0x21c)],'recreate':_0x46503f[_0x49d75a(0x17b)],'timeshift':_0x46503f['timeshift'],'onepagemode':_0x46503f[_0x49d75a(0x6f)],'headless':_0x46503f[_0x49d75a(0x130)],'cooldown':_0x46503f[_0x49d75a(0x138)],'change24h':_0x46503f[_0x49d75a(0x20f)],'emojibuy':_0x46503f[_0x49d75a(0xf8)],'emojisell':_0x46503f[_0x49d75a(0xa2)],'colorscheme':_0x46503f[_0x49d75a(0x15e)],'marketcapApi':_0x46503f[_0x49d75a(0x1d7)],'marketcapEnabled':_0x46503f[_0x49d75a(0xe9)],'sandbox':_0x46503f[_0x49d75a(0xcc)],'portfolio':_0x46503f[_0x49d75a(0x8a)],'autoliquidity':_0x46503f['autoliquidity'],'liquidity':_0x46503f['liquidity'],'openOrders':_0x46503f[_0x49d75a(0x1d3)]},dbConfig[_0x49d75a(0x194)](_0x49d75a(0x160))['remove']()[_0x49d75a(0x245)](),dbConfig[_0x49d75a(0x194)](_0x49d75a(0x160))['push'](_0x46503f)[_0x49d75a(0x245)]());}else _0x46503f={'botID':_0x1c2760,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x49d75a(0x1ab)+_0x1c2760,'showname':![],'threshold':0x3,'ordertype':'market','timeout':0x14,'fiat':_0x49d75a(0x1f8),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x49d75a(0x236)],'onepagemode':settings[_0x49d75a(0x6f)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x49d75a(0x209),'marketcapApi':settings[_0x49d75a(0x1d7)]?!![]:![],'marketcapEnabled':![],'sandbox':![],'portfolio':[],'autoliquidity':'update-liquidity','liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x46503f;}function emittedConfiguration(){const _0x29e833=_0x3c6aac;let _0x2f31b8;if(config['apiKey']=='')_0x2f31b8={...config,'configstate':_0x29e833(0x1ec)};else config[_0x29e833(0x205)]==_0x29e833(0xb0)?_0x2f31b8={...config,'configstate':_0x29e833(0x1cc)}:(_0x2f31b8={...config,'apiKey':_0x29e833(0x16b),'apiSecret':'************'},config[_0x29e833(0x1d0)]&&(_0x2f31b8[_0x29e833(0x1d0)]=_0x29e833(0x16b)));return _0x2f31b8[_0x29e833(0xc8)]=enableFiatToggle,_0x2f31b8;}function getSettings(){const _0x1018a9=_0x3c6aac;return dbSettings['get'](_0x1018a9(0xb7))[_0x1018a9(0x241)]();}function getSecure(){const _0x335ed0=_0x3c6aac;return dbSecure[_0x335ed0(0x194)](_0x335ed0(0x190))['value']()||{};}function updateTimeshift(_0x43b374){const _0x26f68f=_0x3c6aac;let _0x18aee5=dbConfig[_0x26f68f(0x194)]('bot')[_0x26f68f(0x1bc)]({'botID':botID})[_0x26f68f(0x241)]();_0x18aee5&&dbConfig[_0x26f68f(0x194)]('bot')['find']({'botID':botID})[_0x26f68f(0x212)]({'timeshift':_0x43b374})[_0x26f68f(0x245)](),config[_0x26f68f(0x236)]=_0x43b374,proxyEmit(_0x26f68f(0x213),emittedConfiguration());}function updateOnepagemode(_0x2056f1){const _0xfd8987=_0x3c6aac;let _0x5de2cf=dbConfig['get'](_0xfd8987(0x160))[_0xfd8987(0x1bc)]({'botID':botID})['value']();_0x5de2cf&&dbConfig[_0xfd8987(0x194)]('bot')[_0xfd8987(0x1bc)]({'botID':botID})[_0xfd8987(0x212)]({'onepagemode':_0x2056f1})[_0xfd8987(0x245)](),config[_0xfd8987(0x6f)]=_0x2056f1,proxyEmit('configuration',emittedConfiguration());}function updateMarketcapApi(_0x3126ff){const _0x5e3e96=_0x3c6aac,_0x145bce=_0x3126ff?!![]:![];let _0x301988=dbConfig[_0x5e3e96(0x194)](_0x5e3e96(0x160))[_0x5e3e96(0x1bc)]({'botID':botID})['value']();_0x301988&&dbConfig[_0x5e3e96(0x194)](_0x5e3e96(0x160))[_0x5e3e96(0x1bc)]({'botID':botID})['assign']({'marketcapApi':_0x145bce})[_0x5e3e96(0x245)](),config[_0x5e3e96(0x1d7)]=_0x145bce,getMarketCap(),proxyEmit(_0x5e3e96(0x213),emittedConfiguration());}async function storeConfiguration(_0x431675){const _0x28d579=_0x3c6aac;logger[_0x28d579(0x244)](_0x28d579(0x171));_0x431675['configstate']&&delete _0x431675[_0x28d579(0x162)];if(pidBalances)clearTimeout(pidBalances);setBlockTransactionDetection(!![]);let _0x3e5862=![],_0x24244f=![],_0x1e6216=[];_0x431675[_0x28d579(0x8a)][_0x28d579(0x8f)](_0x5c59f6=>{const _0x2b7de9=_0x28d579;if(!_0x5c59f6[_0x2b7de9(0xe7)]&&_0x5c59f6[_0x2b7de9(0x224)]!=_0x431675[_0x2b7de9(0x7a)])_0x1e6216[_0x2b7de9(0x1c6)](_0x5c59f6[_0x2b7de9(0x69)]);}),_0x1e6216[_0x28d579(0x8f)](_0x39c181=>{const _0x99e55c=currentCoins['find'](_0x293e06=>_0x293e06['symbol']==_0x39c181);!_0x99e55c&&(_0x3e5862=!![]);}),currentCoins['forEach'](_0x202328=>{const _0x29ffcf=_0x28d579;if(_0x202328['coin']!=config['basecoin']){const _0x434e90=_0x1e6216[_0x29ffcf(0x1bc)](_0x2f356e=>_0x2f356e==_0x202328[_0x29ffcf(0x69)]);!_0x434e90&&(_0x3e5862=!![]);}}),_0x431675[_0x28d579(0x8a)][_0x28d579(0x8f)](_0x14cc88=>{const _0x2b74d4=_0x28d579,_0x54cab9=config[_0x2b74d4(0x8a)]['find'](_0x2046d2=>_0x2046d2[_0x2b74d4(0x224)]==_0x14cc88['coin']);if(_0x54cab9&&_0x14cc88[_0x2b74d4(0x10d)]!=_0x54cab9['offset'])_0x24244f=!![];});let _0x5b1b7d=dbConfig['get'](_0x28d579(0x160))[_0x28d579(0x1bc)]({'botID':botID})[_0x28d579(0x241)]();_0x431675={..._0x431675,'apiKey':decryptRSA(secure['privateKey'],_0x431675[_0x28d579(0x205)]),'apiSecret':decryptRSA(secure[_0x28d579(0x1df)],_0x431675['apiSecret'])};_0x431675[_0x28d579(0x1d0)]&&(_0x431675[_0x28d579(0x1d0)]=decryptRSA(secure['privateKey'],_0x431675[_0x28d579(0x1d0)]));let _0x4cfe68=![];if(_0x5b1b7d){_0x431675['apiKey']=='************'?_0x431675[_0x28d579(0x205)]=config[_0x28d579(0x205)]:_0x4cfe68=!![];_0x431675[_0x28d579(0x68)]==_0x28d579(0x16b)?_0x431675[_0x28d579(0x68)]=config['apiSecret']:_0x4cfe68=!![];if(_0x431675['apiPassword']==_0x28d579(0x16b))_0x431675[_0x28d579(0x1d0)]=config['apiPassword'];else{if(_0x431675[_0x28d579(0x1d0)])_0x4cfe68=!![];}dbConfig[_0x28d579(0x194)]('bot')[_0x28d579(0x1bc)]({'botID':botID})['assign'](_0x431675)[_0x28d579(0x245)]();}else dbConfig['get'](_0x28d579(0x160))[_0x28d579(0x1c6)](_0x431675)['write'](),_0x4cfe68=!![],process[_0x28d579(0x1ea)]({'status':_0x28d579(0x1e1),'live':_0x28d579(0x18e)},_0x2dc1be=>{});process[_0x28d579(0x1ea)]({'botname':_0x431675[_0x28d579(0x23a)]},_0x2ea394=>{}),config={..._0x431675},updateBotManager(),proxyEmit('configuration-stored'),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x4cfe68)await reset(!![]);else _0x3e5862||_0x24244f?await reset(![]):getBalances();setBlockTransactionDetection(![]);}async function storeHeadless(_0x567d19){const _0x32e0a1=_0x3c6aac,_0x399c25={...config,'headless':_0x567d19['headless']};let _0x5f5376=dbConfig[_0x32e0a1(0x194)](_0x32e0a1(0x160))[_0x32e0a1(0x1bc)]({'botID':botID})[_0x32e0a1(0x241)]();_0x5f5376&&dbConfig['get'](_0x32e0a1(0x160))[_0x32e0a1(0x1bc)]({'botID':botID})[_0x32e0a1(0x212)](_0x399c25)[_0x32e0a1(0x245)](),config={..._0x399c25},updateBotManager(),proxyEmit(_0x32e0a1(0x213),emittedConfiguration());}async function storeFiat(_0x3e33a1){const _0x27f47e=_0x3c6aac,_0x59bd2b={...config,'fiat':_0x3e33a1};let _0x14a55b=dbConfig[_0x27f47e(0x194)](_0x27f47e(0x160))['find']({'botID':botID})['value']();_0x14a55b&&dbConfig[_0x27f47e(0x194)](_0x27f47e(0x160))[_0x27f47e(0x1bc)]({'botID':botID})['assign'](_0x59bd2b)[_0x27f47e(0x245)](),config={..._0x59bd2b},proxyEmit('configuration',emittedConfiguration());}function resetHistory(){const _0x5e6124=_0x3c6aac;logger[_0x5e6124(0xc7)](_0x5e6124(0x185));try{if(fs['existsSync'](path['join'](configpath,_0x5e6124(0x161)+botID+_0x5e6124(0x1a9))))fs['unlinkSync'](path['join'](configpath,_0x5e6124(0x161)+botID+_0x5e6124(0x1a9)));if(fs[_0x5e6124(0x1af)](path[_0x5e6124(0x155)](configpath,_0x5e6124(0x161)+botID+_0x5e6124(0x13b))))fs[_0x5e6124(0x1db)](path['join'](configpath,_0x5e6124(0x161)+botID+_0x5e6124(0x13b)));if(fs[_0x5e6124(0x1af)](path['join'](configpath,_0x5e6124(0x161)+botID+_0x5e6124(0xc0))))fs[_0x5e6124(0x1db)](path[_0x5e6124(0x155)](configpath,_0x5e6124(0x161)+botID+'-results.json'));}catch(_0x1ab3d1){if(_0x1ab3d1)logger[_0x5e6124(0xc7)](_0x5e6124(0x70),_0x1ab3d1);}const _0x24d8e1=getDate();let _0x17f944=[];currentCoins[_0x5e6124(0x8f)](_0x2757d9=>{const _0xddc63b=_0x5e6124;_0x17f944[_0xddc63b(0x1c6)]({'coin':_0x2757d9[_0xddc63b(0x224)],'number':_0x2757d9['number'],'price':_0x2757d9[_0xddc63b(0x1bd)]});});let _0x4aad2e=dbConfig[_0x5e6124(0x194)](_0x5e6124(0x160))[_0x5e6124(0x1bc)]({'botID':botID})[_0x5e6124(0x241)]();_0x4aad2e&&(dbConfig['get'](_0x5e6124(0x160))[_0x5e6124(0x1bc)]({'botID':botID})[_0x5e6124(0x212)]({'liquidity':[{'date':_0x24d8e1,'changes':_0x17f944}]})['write'](),config['liquidity']=[]),restartBot(!![]);}function noslash(_0x5ce43c){return _0x5ce43c['replace']('/','');}function updateHighestFee(_0x117ba7){const _0x2baa60=_0x3c6aac;if(_0x117ba7[_0x2baa60(0x239)]){let _0x281cd4={'filled':_0x117ba7[_0x2baa60(0x180)]*_0x117ba7[_0x2baa60(0x166)],'amount':_0x117ba7['filled']*_0x117ba7[_0x2baa60(0x166)],'side':_0x117ba7['side']==_0x2baa60(0x93)?_0x2baa60(0x14d):_0x2baa60(0x93),'price':0x1/_0x117ba7[_0x2baa60(0x166)]};_0x117ba7={..._0x117ba7,..._0x281cd4};}const _0x31fffe=defaultFee*_0x117ba7[_0x2baa60(0x180)]*_0x117ba7['price'];lastFees['recent20'][_0x2baa60(0x1b6)]===0x14&&lastFees[_0x2baa60(0x243)]['shift'](),lastFees[_0x2baa60(0x243)]['push'](_0x31fffe),lastFees['highest']=Math[_0x2baa60(0x7f)](...lastFees[_0x2baa60(0x243)]);}async function updateNumberCoinsCcxt(_0x22f587){const _0x1a8354=_0x3c6aac;logger['debug'](_0x1a8354(0x111)+_0x22f587[_0x1a8354(0x69)]+_0x1a8354(0x1ca)+_0x22f587[_0x1a8354(0x23b)]+'\x20|\x20'+_0x22f587[_0x1a8354(0x180)]+_0x1a8354(0x167)+_0x22f587[_0x1a8354(0x149)]+_0x1a8354(0x1ca)+_0x22f587['id']);let _0x2b039e=_0x22f587['status'],_0x5ae6d9=![];currentCoins[_0x1a8354(0x8f)](_0x2ac926=>{const _0x5c8d38=_0x1a8354;_0x2ac926['symbol']==_0x22f587[_0x5c8d38(0x69)]&&(_0x5ae6d9=!![]);});if(!_0x5ae6d9)return;const _0x4bd765=currentCoins[_0x1a8354(0x1bc)](_0x7749ac=>_0x7749ac[_0x1a8354(0x69)]==_0x22f587['symbol']),_0xdf6a1d=_0x4bd765['coin'],_0x4eef10=_0x593ca4=>{const _0x177f20=_0x1a8354,_0x82a9ad=currentCoins['find'](_0x15f59c=>_0x15f59c[_0x177f20(0x69)]==_0x22f587[_0x177f20(0x69)]);if(_0x82a9ad)_0x82a9ad[_0x177f20(0xca)]=_0x593ca4;};let _0xd69ade=![];for(const _0x39dc59 of lastOrders){const _0x2f9f6b=0x64,_0x1cc955=0x1388;let _0x2ca38c=0x0;while(!_0x39dc59[_0x1a8354(0x1d6)]&&_0x2ca38c*_0x2f9f6b<_0x1cc955){_0x2ca38c++,await sleep(_0x2f9f6b);}if(_0x2ca38c>0x0)logger[_0x1a8354(0x244)](_0x1a8354(0xe3)+_0x2ca38c*_0x2f9f6b/0x3e8+_0x1a8354(0x1e2));_0x39dc59[_0x1a8354(0x1d6)]==_0x22f587['id']&&(_0xd69ade=!![]);}if(_0x2b039e=='open'){_0x4eef10(_0x1a8354(0xd6));if(_0x22f587[_0x1a8354(0x180)]>0x0&&_0x22f587[_0x1a8354(0x180)]<_0x22f587[_0x1a8354(0x149)]){if(_0xd69ade){setBlockTransactionDetection(!![]),logger['debug'](_0x1a8354(0x1a7)+_0x22f587[_0x1a8354(0x180)]+_0x1a8354(0x119)+_0x22f587['id']);const _0x2e2733=await getCoins(balanceUpdateDelay,undefined,undefined,_0xdf6a1d);[currentCoins,currentCoinsAll]=_0x2e2733,setBlockTransactionDetection(![]);}else logger[_0x1a8354(0x244)](_0x1a8354(0x1a7)+_0x22f587[_0x1a8354(0x180)]+')\x20unknown\x20order:\x20'+_0x22f587['id']),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay);}}else{if(_0x2b039e==_0x1a8354(0x11e)){_0x4eef10(_0x1a8354(0x11e)),lastOrders=lastOrders['filter'](_0x501494=>_0x501494[_0x1a8354(0x69)]!=_0x22f587[_0x1a8354(0x69)]);const _0x158bce=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x158bce,setBlockTransactionDetection(![]),await getOpenOrders(),handleOpenOrders();}else{if(_0x2b039e==_0x1a8354(0xa7)){if(lastOrders)for(const _0x4018b8 of lastOrders){if(_0x4018b8['orderId']==_0x22f587['id']){logger[_0x1a8354(0x244)](_0x1a8354(0x1c0)+_0x22f587['id']),_0xd69ade=!![];if(_0x4018b8[_0x1a8354(0x180)]==0x0){setBlockTransactionDetection(!![]),logger[_0x1a8354(0x244)](_0x1a8354(0x235)+_0x22f587['id']);if(_0x22f587[_0x1a8354(0x234)])_0x4018b8[_0x1a8354(0x166)]=_0x22f587[_0x1a8354(0x234)];else{if(_0x22f587['price'])_0x4018b8['price']=_0x22f587[_0x1a8354(0x166)];else{}}_0x4018b8[_0x1a8354(0x180)]=_0x22f587[_0x1a8354(0x180)],updateHighestFee(_0x4018b8);const _0x467745=await getCoins(balanceUpdateDelay,undefined,undefined,_0xdf6a1d);[currentCoins,currentCoinsAll]=_0x467745,setBlockTransactionDetection(![]),await validateOrders(),_0x4eef10(_0x1a8354(0x180)),_0x4018b8[_0x1a8354(0x1b0)]={'currency':_0x22f587[_0x1a8354(0x1b0)]?_0x22f587[_0x1a8354(0x1b0)][_0x1a8354(0xbb)]:null,'cost':_0x22f587[_0x1a8354(0x1b0)]?_0x22f587['fee'][_0x1a8354(0x225)]:0x0},await updatePnL(_0x4018b8);}}}!_0xd69ade&&(logger['debug'](_0x1a8354(0x154)+_0x22f587['id']),_0x4eef10(_0x1a8354(0x180)),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay),await updateOpenOrders(),handleOpenOrders());}}}if(lastBalances){let _0x48cc10=JSON[_0x1a8354(0x237)](lastBalances[_0x1a8354(0x8a)]);const _0x21aff9=_0x48cc10[_0x1a8354(0x1bc)](_0x4d5cda=>_0x4d5cda[_0x1a8354(0x69)]==_0x22f587[_0x1a8354(0x69)]);if(_0x21aff9){if(_0x2b039e==_0x1a8354(0xd6))_0x21aff9[_0x1a8354(0xca)]=_0x21aff9[_0x1a8354(0xca)]==_0x1a8354(0x180)?_0x1a8354(0x180):_0x1a8354(0xd6);else{if(_0x2b039e==_0x1a8354(0x11e))_0x21aff9[_0x1a8354(0xca)]=_0x21aff9['orderstatus']==_0x1a8354(0x180)?_0x1a8354(0x180):_0x1a8354(0x11e);else _0x2b039e==_0x1a8354(0xa7)&&(_0x21aff9[_0x1a8354(0xca)]=_0x1a8354(0x180));}}lastBalances={...lastBalances,'portfolio':JSON[_0x1a8354(0xd8)](_0x48cc10)},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x232053=_0x3c6aac;await getOpenOrders();let _0x58026e=![];currentCoins[_0x232053(0x8f)](_0x573d7c=>{const _0x266ec6=_0x232053;_0x58026e=allOpenOrders[_0x266ec6(0x1bc)](_0x240f7c=>_0x240f7c[_0x266ec6(0x69)]==_0x573d7c[_0x266ec6(0x69)]),_0x573d7c[_0x266ec6(0xca)]=_0x58026e?_0x266ec6(0xd6):_0x266ec6(0x91);});}async function fetchBalance(_0x34c1bd=!![]){const _0x22bce4=_0x3c6aac;let _0x32f1a7,_0x2e7f0a,_0x5d0e52,_0x51c2b0=0x0;while(!_0x2e7f0a&&_0x51c2b0<maxRetries){try{return _0x32f1a7=await exchange[_0x22bce4(0x23f)](),_0x2e7f0a=_0x32f1a7['total'],_0x2e7f0a;}catch(_0x527b7d){_0x5d0e52=_0x527b7d,_0x51c2b0++,await sleep(retryInterval);}}return!_0x34c1bd?handleErrorNoStop(_0x5d0e52,_0x22bce4(0x95)):await handleError(_0x5d0e52,'fetchBalance()'),![];}async function getCoins(_0x4c7cc1=0x0,_0x5054a5=!![],_0x2b6ba5=config[_0x3c6aac(0x7a)],_0x41dcda){const _0x469a45=_0x3c6aac;let _0x5534fa=[],_0x4cb365=[],_0x3dd3c0=[],_0x109d22;if(_0x4c7cc1)await sleep(_0x4c7cc1);if(botPaused)return[currentCoins,currentCoinsAll];let _0x4f9112=![],_0x4211f0=0x0,_0x6ae655,_0x13f7de;_0x41dcda&&(_0x6ae655=currentCoins[_0x469a45(0x1bc)](_0x40473f=>_0x40473f['coin']==_0x41dcda),_0x6ae655&&(_0x13f7de=_0x6ae655[_0x469a45(0x102)],delete _0x6ae655['prevnumber']));while(!_0x4f9112){_0x109d22=await fetchBalance(_0x5054a5);if(_0x109d22){if(_0x41dcda){if(_0x109d22[_0x41dcda]!=_0x13f7de)logger[_0x469a45(0x244)](_0x469a45(0x189)+_0x41dcda+':\x20'+_0x109d22[_0x41dcda]+'\x20('+_0x13f7de+')'),_0x4f9112=!![];else{logger[_0x469a45(0x244)](_0x469a45(0x179)+_0x41dcda+':\x20'+_0x109d22[_0x41dcda]+'\x20('+_0x13f7de+')'),_0x4211f0++;if(_0x4211f0<balanceUpdateRetries)await sleep(balanceUpdateDelay);else{logger[_0x469a45(0x244)]('Stopped\x20fetching\x20balance\x20after\x20'+_0x4211f0+_0x469a45(0xee));break;}}}else break;}else return[currentCoins,currentCoinsAll];}for(const [_0x2d4501,_0x4721fc]of Object['entries'](_0x109d22)){_0x3dd3c0[_0x469a45(0x1c6)](_0x2d4501);}config[_0x469a45(0x8a)][_0x469a45(0x8f)](_0x46ea0a=>{const _0x21a974=_0x469a45;!_0x3dd3c0['includes'](_0x46ea0a[_0x21a974(0x224)])&&(_0x109d22[_0x46ea0a['coin']]=0x0);});if(_0x2b6ba5=='')for(const [_0x136cbe,_0x1111db]of Object['entries'](_0x109d22)){_0x1111db!=0x0&&_0x5534fa['push']({'coin':_0x136cbe});}else for(const [_0x1709c4,_0x2605c2]of Object[_0x469a45(0x1ee)](_0x109d22)){const _0x54afcc=config[_0x469a45(0x8a)][_0x469a45(0x1bc)](_0x1cfe44=>_0x1cfe44[_0x469a45(0x224)]==_0x1709c4),_0x2afa43=_0x1709c4+'/'+_0x2b6ba5,_0x12ca5c=_0x2b6ba5+'/'+_0x1709c4,_0x3f03fd=currentCoins[_0x469a45(0x1bc)](_0x1ef007=>_0x1ef007['coin']==_0x1709c4);if((_0x2605c2!=0x0||_0x54afcc)&&(allSymbols[_0x469a45(0x77)](_0x2afa43)||_0x1709c4==_0x2b6ba5))_0x3f03fd?_0x5534fa[_0x469a45(0x1c6)]({..._0x3f03fd,'number':Math[_0x469a45(0x7f)](_0x2605c2+(_0x54afcc&&_0x54afcc[_0x469a45(0x10d)]||0x0),0x0)}):_0x5534fa[_0x469a45(0x1c6)]({'coin':_0x1709c4,'symbol':_0x2afa43,'reverse':![],'number':Math['max'](_0x2605c2+(_0x54afcc&&_0x54afcc[_0x469a45(0x10d)]||0x0),0x0),'orderstatus':_0x469a45(0x91)});else{if((_0x2605c2!=0x0||_0x54afcc)&&allSymbols['includes'](_0x12ca5c))_0x3f03fd?_0x5534fa[_0x469a45(0x1c6)]({..._0x3f03fd,'number':Math[_0x469a45(0x7f)](_0x2605c2+(_0x54afcc&&_0x54afcc[_0x469a45(0x10d)]||0x0),0x0)}):_0x5534fa[_0x469a45(0x1c6)]({'coin':_0x1709c4,'symbol':_0x12ca5c,'reverse':!![],'number':Math['max'](_0x2605c2+(_0x54afcc&&_0x54afcc[_0x469a45(0x10d)]||0x0),0x0),'orderstatus':_0x469a45(0x91)});else _0x54afcc&&_0x5534fa[_0x469a45(0x1c6)]({'coin':_0x54afcc['coin'],'symbol':_0x54afcc[_0x469a45(0x69)],'reverse':_0x54afcc[_0x469a45(0x239)],'number':0x0,'orderstatus':'none'});}}return _0x5534fa['sort']((_0x15c327,_0x1f7558)=>_0x15c327[_0x469a45(0x157)]<_0x1f7558[_0x469a45(0x157)]?0x1:_0x1f7558[_0x469a45(0x157)]<_0x15c327[_0x469a45(0x157)]?-0x1:0x0),_0x4cb365=cloneDeep(_0x5534fa),_0x5534fa=_0x5534fa[_0x469a45(0xe8)](_0x291b2e=>{const _0x352f66=_0x469a45,_0x32c5b1=config['portfolio'][_0x352f66(0x1bc)](_0x544a5d=>_0x544a5d[_0x352f66(0x224)]==_0x291b2e['coin']);return _0x32c5b1&&!_0x32c5b1[_0x352f66(0xe7)];}),[_0x5534fa,_0x4cb365];}async function getOpenOrders(){const _0x403520=_0x3c6aac;let _0x53cfbf;allOpenOrders=[];try{for(const _0x4d8b83 of config['portfolio']){!_0x4d8b83[_0x403520(0xe7)]&&_0x4d8b83[_0x403520(0x224)]!=config[_0x403520(0x7a)]&&(_0x53cfbf=await exchange['fetchOpenOrders'](_0x4d8b83[_0x403520(0x69)]),_0x53cfbf['length']>0x0&&allOpenOrders[_0x403520(0x1c6)](_0x53cfbf[0x0]));}}catch(_0x4766c9){await handleError(_0x4766c9,_0x403520(0x18d));}}async function handleOpenOrders(_0x26df93=0x0){const _0x12c6b7=_0x3c6aac;allOpenOrders['length']==0x0&&lockOrders==ORDERS[_0x12c6b7(0x1c4)]&&allOrdersPlaced&&(_0x26df93==0x0?(logger[_0x12c6b7(0x244)](_0x12c6b7(0x1ce)),_0x26df93++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x12c6b7(0x244)](_0x12c6b7(0xf9)),validateOrders(_0x12c6b7(0xfb))));}async function testAPI(){const _0x53c4a9=_0x3c6aac;try{return await exchange[_0x53c4a9(0x23f)](),!![];}catch(_0x1b6834){loading['cancel']=!![],_0x1b6834[_0x53c4a9(0x10f)]()[_0x53c4a9(0x1da)]()[_0x53c4a9(0x77)]('timestamp')||_0x1b6834[_0x53c4a9(0x10f)]()[_0x53c4a9(0x1da)]()[_0x53c4a9(0x77)](_0x53c4a9(0x183))?(logHistory(_0x53c4a9(0x96),'Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)'),loading[_0x53c4a9(0x96)]=_0x53c4a9(0x15f)):handleErrorNoStop(_0x1b6834,_0x53c4a9(0x21d),!![]),logHistory(_0x53c4a9(0x96),_0x53c4a9(0x19b)),logHistory(_0x53c4a9(0x96),'Pausing\x20for\x20'+loadCoinsRetryInterval/0xea60+'\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again'),logger[_0x53c4a9(0x244)](_0x53c4a9(0x1cd),_0x1b6834),emitLoadingProgress(),botPaused=!![],await sleep(loadCoinsRetryInterval),restartBot();}}async function testNewAPI(_0xe0927a){const _0x57e66f=_0x3c6aac;logger[_0x57e66f(0x244)](_0x57e66f(0x1ef));const _0x52c1e9=ccxt[_0x57e66f(0xfa)][_0xe0927a[_0x57e66f(0x1b5)]['toLowerCase']()],_0x25244b=new _0x52c1e9({'apiKey':_0xe0927a['apiKey'],'secret':_0xe0927a[_0x57e66f(0x68)],'options':{'defaultType':_0x57e66f(0x1e7)}});if(_0xe0927a[_0x57e66f(0x1d0)])_0x25244b[_0x57e66f(0x135)]=_0xe0927a[_0x57e66f(0x1d0)];if(_0x25244b[_0x57e66f(0x14c)][_0x57e66f(0xcc)])_0x25244b['setSandboxMode'](_0xe0927a['sandbox']);try{await _0x25244b[_0x57e66f(0x23f)](),botPaused=![];}catch(_0x44c4be){logger['debug']('Error\x20in\x20testNewAPI():\x20'+_0x44c4be[_0x57e66f(0x10f)]());throw _0x44c4be;}}function cloneDeep(_0x339b6f){const _0x51a675=_0x3c6aac;return JSON[_0x51a675(0x237)](JSON['stringify'](_0x339b6f));}async function getPortfolio(_0x1680b2){const _0x3201b8=_0x3c6aac;let _0x457d03=[],_0x36ed5d=[],_0x5dcd4e=[],_0x1b2d78;_0x1680b2['apiKey']=decryptRSA(secure[_0x3201b8(0x1df)],_0x1680b2[_0x3201b8(0x205)]),_0x1680b2[_0x3201b8(0x68)]=decryptRSA(secure[_0x3201b8(0x1df)],_0x1680b2[_0x3201b8(0x68)]);if(_0x1680b2[_0x3201b8(0x1d0)])_0x1680b2[_0x3201b8(0x1d0)]=decryptRSA(secure['privateKey'],_0x1680b2[_0x3201b8(0x1d0)]);if(_0x1680b2['apiKey']!==_0x3201b8(0x16b)||_0x1680b2[_0x3201b8(0x68)]!==_0x3201b8(0x16b)||_0x1680b2['apiPassword']&&_0x1680b2['apiPassword']!==_0x3201b8(0x16b)){if(config[_0x3201b8(0x1b5)]){if(_0x1680b2[_0x3201b8(0x205)]==_0x3201b8(0x16b))_0x1680b2[_0x3201b8(0x205)]=config[_0x3201b8(0x205)];if(_0x1680b2['apiSecret']==_0x3201b8(0x16b))_0x1680b2['apiSecret']=config[_0x3201b8(0x68)];if(_0x1680b2[_0x3201b8(0x1d0)]==_0x3201b8(0x16b))_0x1680b2[_0x3201b8(0x1d0)]=config['apiPassword'];}try{if(_0x1680b2[_0x3201b8(0x20c)])await testNewAPI(_0x1680b2);}catch(_0x433218){if(_0x433218[_0x3201b8(0x10f)]()['includes']('AuthenticationError')){logHistory('error',_0x3201b8(0xe1)),logHistory('error',_0x3201b8(0x141)+_0x433218[_0x3201b8(0x10f)]()),proxyEmit(_0x3201b8(0x1d9),![]);return;}else{if(_0x433218['toString']()[_0x3201b8(0x77)](_0x3201b8(0x12f))){logHistory(_0x3201b8(0x96),'Exchange\x20permission\x20denied\x20-\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange'),logHistory(_0x3201b8(0x96),_0x3201b8(0x141)+_0x433218['toString']()),proxyEmit(_0x3201b8(0x1d9),![]);return;}else{logHistory(_0x3201b8(0x96),_0x3201b8(0x81)+_0x433218[_0x3201b8(0x10f)]()),logger[_0x3201b8(0x244)](_0x3201b8(0x1cd),_0x433218),proxyEmit(_0x3201b8(0x1d9),![]);return;}}}exchange?updateExchange(_0x1680b2[_0x3201b8(0x205)],_0x1680b2[_0x3201b8(0x68)],_0x1680b2[_0x3201b8(0x1d0)]):await initExchange(_0x1680b2[_0x3201b8(0x1b5)],_0x1680b2[_0x3201b8(0x205)],_0x1680b2[_0x3201b8(0x68)],_0x1680b2['apiPassword'],_0x1680b2['sandbox']);await loadSymbols();const _0x57bf21=await getCoins(0x0,![],_0x1680b2[_0x3201b8(0x7a)]);_0x5dcd4e=cloneDeep(_0x57bf21[0x1]);}else{const _0x104e85=await getCoins();_0x5dcd4e=cloneDeep(_0x104e85[0x1]);}if(_0x1680b2['basecoin']=='')proxyEmit(_0x3201b8(0x1d9),!![]),proxyEmit('portfolio2',_0x5dcd4e);else{_0x5dcd4e['forEach'](_0x20326a=>{const _0x4add48=_0x3201b8;if(_0x20326a[_0x4add48(0x224)]!=_0x1680b2[_0x4add48(0x7a)]&&allSymbols[_0x4add48(0x77)](_0x20326a[_0x4add48(0x69)]))_0x457d03[_0x4add48(0x1c6)](_0x20326a['symbol']);});if(_0x457d03[_0x3201b8(0x1b6)]==0x0)logHistory(_0x3201b8(0x96),'Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot');else{try{_0x36ed5d=await getTickers(_0x457d03);}catch(_0x546a1a){logHistory(_0x3201b8(0x96),_0x3201b8(0x8d)),logger[_0x3201b8(0x244)](_0x3201b8(0x1cd),_0x546a1a),proxyEmit(_0x3201b8(0x1d9),![]);return;}_0x5dcd4e[_0x3201b8(0x8f)](_0x56f97c=>{const _0x2d50a6=_0x3201b8;_0x56f97c['coin']!=_0x1680b2['basecoin']?_0x36ed5d[_0x56f97c[_0x2d50a6(0x69)]]?_0x36ed5d[_0x56f97c[_0x2d50a6(0x69)]][_0x2d50a6(0x1bd)]?_0x1b2d78=_0x56f97c[_0x2d50a6(0x239)]?0x1/_0x36ed5d[_0x56f97c[_0x2d50a6(0x69)]][_0x2d50a6(0x1bd)]:_0x36ed5d[_0x56f97c[_0x2d50a6(0x69)]]['last']:_0x1b2d78=0x0:_0x1b2d78=0x0:_0x1b2d78=0x1,_0x56f97c['price']=formatResult(_0x1b2d78,0x8);}),await getMarketCap(_0x5dcd4e),proxyEmit(_0x3201b8(0x1d9),!![]),proxyEmit(_0x3201b8(0x17c),_0x5dcd4e);}}}function truncateTradeAmount(_0x51ba59,_0x885aaf){const _0x1b0113=_0x3c6aac;let _0x22be9c=0x0;try{_0x22be9c=exchange[_0x1b0113(0x172)](_0x51ba59,_0x885aaf);}catch(_0x11b849){}return _0x22be9c;}function checkMinimums(_0xf936ea){const _0x43c8a8=_0x3c6aac;let _0x49333a=!![];const _0x2ed875=!_0xf936ea['reverse']?markets[_0xf936ea[_0x43c8a8(0x69)]][_0x43c8a8(0x22b)]['amount']['min']:markets[_0xf936ea[_0x43c8a8(0x69)]][_0x43c8a8(0x22b)][_0x43c8a8(0x225)][_0x43c8a8(0xab)],_0x3b77b8=!_0xf936ea[_0x43c8a8(0x239)]?markets[_0xf936ea['symbol']][_0x43c8a8(0x22b)]['cost'][_0x43c8a8(0xab)]:markets[_0xf936ea[_0x43c8a8(0x69)]]['limits'][_0x43c8a8(0x149)][_0x43c8a8(0xab)],_0x3d285a=truncateTradeAmount(_0xf936ea[_0x43c8a8(0x69)],_0xf936ea[_0x43c8a8(0x153)]);_0xf936ea['trade']=_0x3d285a;if(Math[_0x43c8a8(0x15d)](_0x3d285a)<_0x2ed875)_0x49333a=![];if(Math[_0x43c8a8(0x15d)](_0x3d285a)*_0xf936ea['last']<_0x3b77b8)_0x49333a=![];let _0x36050b='';if(_0xf936ea[_0x43c8a8(0xde)]==_0x43c8a8(0x93)){let _0xee0266=config['portfolio']['find'](_0x4b6937=>_0x4b6937[_0x43c8a8(0x224)]==_0xf936ea[_0x43c8a8(0x224)]);_0xee0266['offset']>0x0?Math[_0x43c8a8(0x15d)](_0x3d285a)>_0xf936ea[_0x43c8a8(0xf4)]-_0xee0266['offset']&&(_0x49333a=![],_0x36050b=_0x43c8a8(0x134)+_0xee0266['coin']+'\x20due\x20to\x20offset'):Math['abs'](_0x3d285a)>_0xf936ea[_0x43c8a8(0xf4)]&&(_0x49333a=![]);}if(_0xf936ea['side']==_0x43c8a8(0x14d)){let _0x562930=config[_0x43c8a8(0x8a)][_0x43c8a8(0x1bc)](_0x308121=>_0x308121[_0x43c8a8(0x224)]==config[_0x43c8a8(0x7a)]),_0xc8c412=currentCoins[_0x43c8a8(0x1bc)](_0x2e4830=>_0x2e4830[_0x43c8a8(0x224)]==config[_0x43c8a8(0x7a)]);_0x562930[_0x43c8a8(0x10d)]>0x0?Math[_0x43c8a8(0x15d)](_0x3d285a)*_0xf936ea[_0x43c8a8(0x1bd)]>_0xc8c412['number']-_0x562930[_0x43c8a8(0x10d)]&&(_0x49333a=![],_0x36050b=_0x43c8a8(0x134)+config[_0x43c8a8(0x7a)]+_0x43c8a8(0x1a8)):Math[_0x43c8a8(0x15d)](_0x3d285a)*_0xf936ea[_0x43c8a8(0x1bd)]>_0xc8c412[_0x43c8a8(0xf4)]&&(_0x49333a=![]);}return!_0x49333a&&_0x36050b&&!insufficientFundsWarningSent['includes'](_0xf936ea[_0x43c8a8(0x224)])&&(logHistory(_0x43c8a8(0x1be),_0x36050b),insufficientFundsWarningSent[_0x43c8a8(0x1c6)](_0xf936ea['coin'])),_0x49333a;}async function getBalances(_0x4c8723=!![]){const _0x19fb01=_0x3c6aac;if(botPaused)return;let _0x3d802a=0x0,_0x48a775;const _0x2c1ca7=config[_0x19fb01(0x169)];if(config['headless']&&config[_0x19fb01(0x20f)]<0x0)await validate24hChanges();currentCoins['forEach'](_0x45c6af=>{const _0x285337=_0x19fb01;if(_0x45c6af[_0x285337(0x224)]!=config[_0x285337(0x7a)]){let _0x54b899=gTicker[noslash(_0x45c6af[_0x285337(0x69)])];_0x48a775=_0x45c6af[_0x285337(0x239)]?0x1/_0x54b899:_0x54b899;}else _0x48a775=0x1;let _0x3d2db0=_0x45c6af[_0x285337(0xf4)]*_0x48a775;_0x3d802a+=_0x3d2db0,_0x45c6af[_0x285337(0x1bd)]=formatResult(Number(_0x48a775),0x8),_0x45c6af[_0x285337(0x241)]=_0x3d2db0;}),currentCoins['forEach'](_0xb6161d=>{const _0x252e51=_0x19fb01;let _0x10eefa=config[_0x252e51(0x8a)][_0x252e51(0x1bc)](_0x3d1a60=>_0x3d1a60[_0x252e51(0x224)]==_0xb6161d[_0x252e51(0x224)]),_0x17e0b1=Number(_0x10eefa[_0x252e51(0x100)]),_0xfdeac=_0xb6161d['value']/_0x3d802a*0x64,_0x204a06=_0x17e0b1*_0x3d802a/0x64/_0xb6161d[_0x252e51(0x1bd)]-_0xb6161d[_0x252e51(0xf4)];_0xb6161d[_0x252e51(0x100)]=formatResult(_0xfdeac,0x3),_0xb6161d[_0x252e51(0x158)]=formatResult(_0x17e0b1,0x3),_0xb6161d[_0x252e51(0x153)]=formatResult(_0x204a06,0x8),_0xb6161d[_0x252e51(0xde)]='',_0xb6161d[_0x252e51(0xd2)]=![];if(_0xb6161d[_0x252e51(0x224)]!=config[_0x252e51(0x7a)]){if(_0xb6161d[_0x252e51(0x100)]>_0x17e0b1)_0xb6161d[_0x252e51(0xde)]='sell',_0xb6161d[_0x252e51(0xd2)]=checkMinimums(_0xb6161d);else _0xb6161d[_0x252e51(0x100)]<_0x17e0b1&&(_0xb6161d[_0x252e51(0xde)]=_0x252e51(0x14d),_0xb6161d['valid']=checkMinimums(_0xb6161d));}_0xb6161d['delta']=_0xb6161d[_0x252e51(0x100)]/_0xb6161d[_0x252e51(0x158)]-0x1;if(_0xb6161d['orderstatus']=='filled'||_0xb6161d[_0x252e51(0xca)]==_0x252e51(0x11e))_0xb6161d[_0x252e51(0xca)]=_0x252e51(0x91);}),currentCoins[_0x19fb01(0x22a)]((_0x132e79,_0x141f0f)=>_0x132e79[_0x19fb01(0x157)]<_0x141f0f['delta']?0x1:_0x141f0f[_0x19fb01(0x157)]<_0x132e79['delta']?-0x1:0x0);const _0xcd8f7d=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0xcd8f7d['eur'],'usd':_0xcd8f7d[_0x19fb01(0x217)],'portfolio':JSON['stringify'](currentCoins),'threshold':_0x2c1ca7},proxyEmit(_0x19fb01(0x181),{'serverversion':serverversion,'balances':lastBalances});if(_0x4c8723){if(config[_0x19fb01(0x130)])headlessMode({'portfolio':currentCoins,'threshold':_0x2c1ca7});else lockOrders==ORDERS[_0x19fb01(0x15b)]&&!coolingDown&&notifyBalance({'portfolio':currentCoins,'threshold':_0x2c1ca7});}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x32e73c=getNormalizedPerformance();getStartingBalances(_0x32e73c),emitPerformance(_0x32e73c);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}function getPnL(){const _0x1d2ce6=_0x3c6aac;let _0x5562f8=dbCoinResults[_0x1d2ce6(0x194)](_0x1d2ce6(0x107))['value'](),_0x19936a=0x0;return Object[_0x1d2ce6(0x1ee)](_0x5562f8)[_0x1d2ce6(0x8f)](([_0x1130a7,_0xe29408])=>{const _0x18ed28=_0x1d2ce6;_0x19936a+=_0xe29408[_0x18ed28(0x240)];}),_0x19936a;}async function storePerformance(){const _0x7649f1=_0x3c6aac;if(!lastBalances)return;let _0x5cbcd2=[],_0x475b5b;const _0x36ad79=getPnL();let _0x537416=JSON[_0x7649f1(0x237)](lastBalances[_0x7649f1(0x8a)]);_0x537416[_0x7649f1(0x22a)]((_0x19ee7d,_0x1a628b)=>_0x19ee7d[_0x7649f1(0x224)]>_0x1a628b['coin']?0x1:_0x1a628b['coin']>_0x19ee7d[_0x7649f1(0x224)]?-0x1:0x0),_0x537416['forEach'](_0x40afa0=>{const _0x585faa=_0x7649f1;let _0x4e2a09={'coin':_0x40afa0[_0x585faa(0x224)],'number':_0x40afa0[_0x585faa(0xf4)],'price':_0x40afa0[_0x585faa(0x1bd)]};_0x5cbcd2[_0x585faa(0x1c6)](_0x4e2a09);});const _0x2db1b3=await getFiat(),_0x187b3b=getTimeStamp()[_0x7649f1(0x9b)]('\x20')[0x0],_0x8ef2e1=dbPerformance['get'](_0x7649f1(0x208))['find']({'date':_0x187b3b})['value']();_0x475b5b={'date':_0x187b3b,'eur':_0x2db1b3[_0x7649f1(0x13e)],'usd':_0x2db1b3[_0x7649f1(0x217)],'coins':_0x5cbcd2,'pnl':_0x36ad79},_0x8ef2e1?_0x475b5b[_0x7649f1(0x197)]!=config[_0x7649f1(0x21c)]&&dbPerformance[_0x7649f1(0x194)](_0x7649f1(0x208))['find']({'date':_0x187b3b})[_0x7649f1(0x212)](_0x475b5b)[_0x7649f1(0x245)]():dbPerformance[_0x7649f1(0x194)](_0x7649f1(0x208))[_0x7649f1(0x1c6)](_0x475b5b)[_0x7649f1(0x245)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0xf44028=_0x3c6aac;let _0x4d1017=[];if(dbPerformance[_0xf44028(0x14c)](_0xf44028(0x208))[_0xf44028(0x241)]()){let _0x51d7c0=dbPerformance['get'](_0xf44028(0x208))[_0xf44028(0x186)]()[_0xf44028(0xe8)](_0x1ce8d0=>{const _0xda9af1=_0xf44028;if(_0x1ce8d0[_0xda9af1(0x107)][_0xda9af1(0x1b6)]==0x0)return![];else return!![];})[_0xf44028(0x13c)](_0xf44028(0x197))[_0xf44028(0x241)](),_0x38ab56=[...config[_0xf44028(0x140)]];_0x38ab56[_0xf44028(0x22a)]((_0x38a299,_0x5ec5d8)=>_0x38a299['date']>_0x5ec5d8[_0xf44028(0x197)]?-0x1:_0x5ec5d8['date']>_0x38a299['date']?0x1:0x0);let _0x2251d6=0x1,_0x27d55f=[],_0x3ccfb0=0x0;_0x51d7c0[_0xf44028(0x1f1)]()[_0xf44028(0x239)]()[_0xf44028(0x8f)]((_0x318703,_0x3691cf)=>{const _0x50d04d=_0xf44028;if(_0x38ab56[_0x3ccfb0]){if(_0x51d7c0[_0x51d7c0[_0x50d04d(0x1b6)]-_0x3691cf]&&_0x38ab56[_0x3ccfb0][_0x50d04d(0x197)]==_0x51d7c0[_0x51d7c0['length']-_0x3691cf]['date']){if(_0x3691cf<_0x51d7c0[_0x50d04d(0x1b6)]){let _0x2b2682=0x0,_0x913d3e=0x0;_0x51d7c0[_0x51d7c0['length']-_0x3691cf][_0x50d04d(0x107)][_0x50d04d(0x8f)](_0x4bfa7d=>{const _0x12a9a6=_0x50d04d;_0x913d3e+=_0x4bfa7d[_0x12a9a6(0xf4)]*_0x4bfa7d['price'];}),_0x38ab56[_0x3ccfb0][_0x50d04d(0xf6)][_0x50d04d(0x8f)](_0x41ed6d=>{const _0x2b6e31=_0x50d04d;_0x2b2682+=_0x41ed6d[_0x2b6e31(0xf4)]*_0x41ed6d['price'];}),_0x2251d6*=_0x2b2682/(_0x913d3e-_0x2b2682)+0x1;}_0x3ccfb0++;}}let _0x53fa82=0x0;_0x318703[_0x50d04d(0x107)][_0x50d04d(0x8f)](_0x5a8901=>{const _0x2b77df=_0x50d04d;_0x53fa82+=_0x5a8901[_0x2b77df(0xf4)]*_0x5a8901[_0x2b77df(0x166)];}),_0x27d55f[_0x51d7c0[_0x50d04d(0x1b6)]-_0x3691cf-0x1]=_0x53fa82*(_0x2251d6-0x1);});let _0x6d1202=[];_0x38ab56=[...config[_0xf44028(0x140)]]||[];let _0x4587b4=0x0;_0x3ccfb0=0x0,_0x51d7c0[_0xf44028(0x8f)]((_0x2c7c69,_0x21134c)=>{const _0x49acf0=_0xf44028;if(_0x38ab56[_0x3ccfb0]){const _0x5f323f=fns[_0x49acf0(0x237)](_0x38ab56[_0x3ccfb0]['date'],_0x49acf0(0x207),new Date()),_0x71fde9=fns['parse'](_0x2c7c69[_0x49acf0(0x197)],_0x49acf0(0x207),new Date());if(fns[_0x49acf0(0x133)](_0x5f323f,_0x71fde9)){let _0x1cb77a=0x0;_0x38ab56[_0x3ccfb0][_0x49acf0(0xf6)]['forEach'](_0x4f49f4=>{const _0x164981=_0x49acf0;!_0x6d1202[_0x4f49f4[_0x164981(0x224)]]?_0x6d1202[_0x4f49f4['coin']]=_0x4f49f4[_0x164981(0xf4)]:(_0x1cb77a=_0x6d1202[_0x4f49f4[_0x164981(0x224)]],_0x6d1202[_0x4f49f4[_0x164981(0x224)]]+=_0x4f49f4[_0x164981(0xf4)]);const _0x2b4334=_0x2c7c69[_0x164981(0x107)][_0x164981(0x1bc)](_0x1af23a=>_0x1af23a['coin']==_0x4f49f4[_0x164981(0x224)]);(!_0x2b4334||_0x2b4334[_0x164981(0xf4)]==0x0)&&(_0x4587b4+=(-_0x4f49f4['number']-_0x1cb77a)*_0x4f49f4[_0x164981(0x166)]);}),_0x3ccfb0++;}}_0x2c7c69[_0x49acf0(0x107)][_0x49acf0(0x8f)]((_0x2b73f5,_0x3d6da4)=>{const _0x3e1d84=_0x49acf0;_0x6d1202[_0x2b73f5[_0x3e1d84(0x224)]]&&(_0x2b73f5[_0x3e1d84(0x1ec)]=_0x6d1202[_0x2b73f5[_0x3e1d84(0x224)]]);}),_0x4d1017['push']({'date':_0x2c7c69[_0x49acf0(0x197)],'eur':_0x2c7c69['eur'],'usd':_0x2c7c69['usd'],'offset':_0x27d55f[_0x21134c],'netoffset':_0x4587b4,'coins':_0x2c7c69['coins'],'pnl':_0x2c7c69[_0x49acf0(0x99)]});});}return _0x4d1017;}function emitPerformance(_0x541390){const _0x26251e=_0x3c6aac;_0x541390['length']!==0x0?(proxyEmit(_0x26251e(0xbc),_0x541390),lastPerformanceEmitted=getDate()):proxyEmit('performance',[]);}function getPerf(_0x4483ca,_0x11b125){const _0x505b5a=_0x3c6aac;let _0x11eae8=0x0,_0x2f2b9c=0x0,_0x418fa4=0x0;_0x4483ca[_0x505b5a(0x107)]['forEach'](_0x34a2be=>{const _0x331de5=_0x505b5a;_0x11eae8+=_0x34a2be[_0x331de5(0xf4)]*_0x34a2be[_0x331de5(0x166)];});_0x11b125&&(_0x11eae8+=_0x4483ca[_0x505b5a(0x10d)]);if(config['basecoin']===_0x505b5a(0x114)||config['basecoin']===_0x505b5a(0x22d)||config[_0x505b5a(0x7a)]===_0x505b5a(0x1d1))_0x2f2b9c=_0x11eae8*_0x4483ca[_0x505b5a(0x13e)],_0x418fa4=_0x11eae8*_0x4483ca['usd'];else{if(usdBasecoins[_0x505b5a(0x77)](config[_0x505b5a(0x7a)]))_0x2f2b9c=_0x11eae8*_0x4483ca[_0x505b5a(0x13e)]/_0x4483ca['usd'],_0x418fa4=_0x11eae8;else config[_0x505b5a(0x7a)]===_0x505b5a(0x1f5)&&(_0x2f2b9c=_0x11eae8,_0x418fa4=_0x11eae8*_0x4483ca[_0x505b5a(0x217)]/_0x4483ca[_0x505b5a(0x13e)]);}return[_0x11eae8,_0x2f2b9c,_0x418fa4];}function CurrencyFactor(_0x435357,_0x35922d,_0x4d14f8){const _0x57ae79=_0x3c6aac;let _0x1db395;if(_0x35922d===_0x57ae79(0x114)||_0x35922d==='ETH'||_0x35922d==='PAXG')_0x1db395=_0x4d14f8===_0x57ae79(0x1f5)?_0x435357[_0x57ae79(0x13e)]:_0x435357[_0x57ae79(0x217)];else{if(usdBasecoins[_0x57ae79(0x77)](_0x35922d))_0x1db395=_0x4d14f8===_0x57ae79(0x1f5)?_0x435357[_0x57ae79(0x13e)]/_0x435357[_0x57ae79(0x217)]:0x1;else _0x35922d===_0x57ae79(0x1f5)&&(_0x1db395=_0x4d14f8===_0x57ae79(0x1f5)?0x1:_0x435357[_0x57ae79(0x217)]/_0x435357[_0x57ae79(0x13e)]);}return _0x1db395;}function getKPIs(_0x10b42b,_0x276db5=_0x3c6aac(0x1f5)){const _0x2c83ce=_0x3c6aac,_0x48419e=config[_0x2c83ce(0x7a)],_0x3a01a2=lastBalances,_0x8c681e=currentCoins,_0x3858ef=getNormalizedPerformance(),_0x588eda=CurrencyFactor(_0x3a01a2,config['basecoin'],_0x276db5);let _0x493009=0x0;_0x8c681e[_0x2c83ce(0x8f)](_0x57aded=>{const _0x23bf91=_0x2c83ce;_0x493009+=_0x57aded['number']*_0x57aded[_0x23bf91(0x1bd)];});_0x10b42b[_0x2c83ce(0x77)](_0x2c83ce(0x7c))&&(_0x493009*=_0x588eda);let _0x3a9345;if(_0x493009!==0x0){if(_0x10b42b===_0x2c83ce(0x7a)||_0x10b42b===_0x2c83ce(0x7c)){if(_0x10b42b===_0x2c83ce(0x7a))_0x3a9345=(_0x493009/startingBalances[_0x2c83ce(0x7a)]-0x1)*0x64;else{if(_0x276db5==='EUR')_0x3a9345=(_0x493009/startingBalances['eur']-0x1)*0x64;else _0x3a9345=(_0x493009/startingBalances[_0x2c83ce(0x217)]-0x1)*0x64;}}if(_0x10b42b[_0x2c83ce(0x77)]('net')){let _0x59277f=0x0;if(startingBalances[_0x2c83ce(0x107)])_0x8c681e['forEach'](_0x3b9ed3=>{const _0xd3e9d3=_0x2c83ce;let _0x1256d8=startingBalances['coins'][_0xd3e9d3(0x1bc)](_0x26aba0=>_0x26aba0[_0xd3e9d3(0x224)]===_0x3b9ed3[_0xd3e9d3(0x224)]);if(_0x1256d8&&_0x1256d8['coin']&&_0x3b9ed3[_0xd3e9d3(0xf4)]!==0x0)_0x59277f+=_0x1256d8[_0xd3e9d3(0xf4)]*_0x3b9ed3[_0xd3e9d3(0x1bd)];});let _0x55a320=0x0;if(_0x3858ef[_0x2c83ce(0x1b6)]!==0x0){let _0x41c27d=_0x3858ef[_0x3858ef['length']-0x1];_0x55a320=_0x41c27d[_0x2c83ce(0x6b)];}_0x59277f-=_0x55a320;let _0x168cb3;_0x10b42b===_0x2c83ce(0x94)&&(_0x168cb3=startingBalances['basecoin']),_0x10b42b===_0x2c83ce(0x10e)&&(_0x168cb3=_0x276db5===_0x2c83ce(0x1f5)?startingBalances[_0x2c83ce(0x13e)]:startingBalances['usd'],_0x59277f*=_0x588eda),_0x3a9345=(_0x493009-_0x59277f)/_0x168cb3*0x64,_0x493009=_0x493009-_0x59277f;}if(_0x10b42b[_0x2c83ce(0x77)]('pnl')){if(_0x3858ef[_0x2c83ce(0x1b6)]!==0x0&&_0x8c681e['length']!==0x0){let _0x3e9279,_0x3542a4=_0x3858ef[_0x3858ef['length']-0x1][_0x2c83ce(0x99)];_0x10b42b['includes']('fiat')?(_0x3e9279=_0x276db5===_0x2c83ce(0x1f5)?startingBalances[_0x2c83ce(0x13e)]:startingBalances[_0x2c83ce(0x217)],_0x3542a4*=CurrencyFactor(_0x3a01a2,_0x48419e,_0x276db5)):_0x3e9279=startingBalances['basecoin'],_0x3a9345=_0x3542a4/_0x3e9279*0x64,_0x493009=_0x3542a4;}}if(_0x3a9345){if(_0x3a9345<0x64)_0x3a9345=_0x3a9345[_0x2c83ce(0x123)](0x2);else{if(_0x3a9345<0x3e8)_0x3a9345=_0x3a9345[_0x2c83ce(0x123)](0x1);else _0x3a9345=_0x3a9345['toFixed'](0x0);}}else _0x3a9345=Number('0')[_0x2c83ce(0x123)](0x2);if(_0x493009){if(Math['abs'](_0x493009)<0.000001)_0x493009=_0x493009[_0x2c83ce(0x123)](0x2);else{if(Math[_0x2c83ce(0x15d)](_0x493009)<0.1)_0x493009=_0x493009[_0x2c83ce(0x123)](0x6);else{if(Math[_0x2c83ce(0x15d)](_0x493009)<0x1)_0x493009=_0x493009[_0x2c83ce(0x123)](0x5);else{if(Math[_0x2c83ce(0x15d)](_0x493009)<0xa)_0x493009=_0x493009['toFixed'](0x4);else{if(Math[_0x2c83ce(0x15d)](_0x493009)<0x64)_0x493009=_0x493009[_0x2c83ce(0x123)](0x3);else{if(Math[_0x2c83ce(0x15d)](_0x493009)<0x3e8)_0x493009=_0x493009['toFixed'](0x2);else _0x493009=_0x493009[_0x2c83ce(0x123)](0x2);}}}}}}else _0x493009=Number('0')[_0x2c83ce(0x123)](0x2);}else _0x3a9345=Number('0')[_0x2c83ce(0x123)](0x2);if(_0x3a9345>=0x0)_0x3a9345='+'+_0x3a9345;return{'value':_0x493009,'change':_0x3a9345};}async function getStartingBalances(_0x5654bd,_0x5d4388=!![]){const _0x276099=_0x3c6aac;if(_0x5654bd[_0x276099(0x1b6)]!==0x0){const [_0x1f06bd,_0x170e5c,_0x56a53f]=getPerf(_0x5654bd[0x0],!![]);let _0x1e7af2=[];config[_0x276099(0x8a)][_0x276099(0x8f)](_0x18cd46=>{const _0x59aa18=_0x276099;let _0x204953=0x0,_0x3e04d4;config['liquidity'][_0x59aa18(0x8f)](_0x1af306=>{const _0x198692=_0x59aa18;let _0x212284=_0x1af306['changes']['find'](_0x172675=>_0x172675[_0x198692(0x224)]==_0x18cd46['coin']);if(_0x212284){_0x204953+=_0x212284[_0x198692(0xf4)];if(!_0x3e04d4)_0x3e04d4=_0x212284[_0x198692(0x166)];}}),_0x1e7af2[_0x59aa18(0x1c6)]({'coin':_0x18cd46[_0x59aa18(0x224)],'number':_0x204953,'initialprice':_0x3e04d4});});const _0x1db4ac={'basecoin':_0x1f06bd,'eur':_0x170e5c,'usd':_0x56a53f,'coins':_0x1e7af2};if(_0x5d4388)proxyEmit(_0x276099(0x227),_0x1db4ac);startingBalances=_0x1db4ac;}}function _0x4a96(){const _0x14144d=['stack',')\x20known\x20order:\x20','setSandboxMode','message','Resuming\x20(','Error\x20in\x20loadSymbols():\x20','canceled','\x20order:\x20','\x20blocked\x20API\x20(RateLimitExceeded)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','RSA-OAEP','Block\x20transaction\x20detection:\x20','toFixed','market','highest','2.3.5','/USD','\x20API\x20key\x20is\x20invalid','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','\x20API\x20secret\x20is\x20invalid','Headless:\x20','Order\x20filled','./config/','type','PermissionDenied','headless','path','2.6.22','isEqual','Insufficient\x20funds\x20to\x20place\x20order\x20for\x20','password','\x20exchange\x20error:\x20','remove','cooldown','Exception\x20thrown\x20in\x20','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','-performance.json','sortBy','timeout','eur','constructor','liquidity','Error\x20details:\x20','\x20>\x20pausing\x20bot\x20for\x20','Resetting\x20coin\x20results:\x20','1\x20-\x20Validate\x20orders:\x20','4465482XbWSoL','add','date-fns','NetworkError','amount','Unfilled\x20order(s)\x20could\x20not\x20be\x20canceled\x20after\x20','decode64','has','buy','DDoSProtection','watchTradesForSymbols','Portfolio\x20change\x20detected:\x20','watchTradesForSymbols()','Avoiding\x20continuous\x20order\x20attempts','trade','1\x20-\x20FILLED\x20unknown\x20order:\x20','join','switch-manual','delta','target','\x20not\x20available\x20(see:\x20hodlerhacks.com/fix/5)','\x0aSymbol(s):\x20','UNLOCKED','\x20|\x20Custom\x20ID:\x20','abs','colorscheme','timestamp-issue','bot','bot-','configstate','cancelOrder','bid','initTickers()','price','\x20/\x20','pki','threshold','process\x20','************','sqrt','Portfolio\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','\x20>\x20','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','Loading\x20completed','Saving\x20configuration','amountToPrecision','must\x20be\x20greater\x20than\x20minimum\x20amount','\x20minutes','InvalidOrder','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','function','map','Invalid\x20balance\x20for\x20','coin-loading-progress','recreate','portfolio2','addDays','177261CahjQB','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','filled','balances','privateKeyFromPem','request-time','Bybit','Resetting\x20bot\x20history','cloneDeep','removed','getDate','Valid\x20balance\x20for\x20','uncaughtException','491895EKMxmW','RequestTimeout','getOpenOrders()','running','getSeconds','secure','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','exchange\x20reload','get','shift','AuthenticationError','date',',\x20must\x20be\x20a\x203\x20digit\x20number','quote','placeOrder','Failed\x20to\x20connect\x20to\x20the\x20exchange\x20-\x20bot\x20not\x20started','sha256','watchTrades()','complete','pnl-basecoin','args','event','keys','lowdb/adapters/FileSync','Limit\x20(low-margin)','Failed\x20to\x20load\x20coin\x20data\x20for\x20','Gateio','1\x20-\x20partially\x20FILLED\x20(','\x20due\x20to\x20offset','-events.json','\x20>\x20[DEBUG]\x20','Bot\x20','Insufficient\x20funds\x20to\x20execute\x20order:\x20','\x20blocked\x20API\x20(DDoSProtection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','decrypt','existsSync','fee','basecoinvalue','freeze','time','showConfig','exchange','length','<b>Bot\x20','pop','Huobi','search','OrderNotFound','find','last','warning','getHours','1\x20-\x20FILLED\x20known\x20order:\x20','heapUsed',':\x20timer\x20>','added','LOCKED','fetchTickers()','push','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','\x20>\x20stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','sendMetricsTelegram','\x20|\x20','apply','recovery','Error\x20details:','1\x20-\x20Handle\x20open\x20orders','Fee\x20discount\x20refund\x20detected:\x20','apiPassword','PAXG','memoryUsage','openOrders','Value\x20','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','orderId','marketcapApi','deleteHistoryAlerts','portfolio1','toLowerCase','unlinkSync','restart','market_cap','ordertype','privateKey','\x20uses\x20','enabled','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','\x20-\x20bot\x20already\x20running\x20in\x20manual\x20mode','Updating\x20API\x20key\x20(not\x20saved\x20in\x20config\x20file\x20yet)','Executed\x20','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','spot','watchOrders','status\x20code\x20401','send','format','initial','lowdb','entries','Test\x20new\x20API','Order\x20filled:\x20','slice','\x20hour','axios','Bitget','EUR','showname','breakeven','USD','TUSD','defaults','Binance','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','kill','marketcapsqrt','Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)','exchanges','placeOrder()','indexOf','argv','No\x20more\x20open\x20orders\x20-\x20','apiKey','Huobipro','yyyy/MM/dd','data','red_yellow_blue','\x20MB','\x20portfolio:</b>\x20\x0a\x0a','testApi','order','\x20exchange','change24h','2.6.23','<b>','assign','configuration','limit-high','-------------------------------\x0a','Unfilled\x20order(s)\x20canceled\x20after\x20','usd','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','marketcap','loadMarkets','writeFile','startdate','testAPI()','ID:\x20','autoliquidity','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','logs','emitHistory','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','coin','cost','/USDT','starting-balances','bb-secure.json','\x20metrics:</b>\x20\x0a\x0a','sort','limits','getMinutes','ETH','Net\x20','\x20-\x20','createOrder','Generated\x20PnL\x20data','toggleBotMode','resetHistory','average','2\x20-\x20handling\x20FILLED\x20order:\x20','timeshift','parse','Initializing\x20coin\x20results','reverse','botname','status','padStart','node-forge','getMonth','fetchBalance','realizedPnL','value','bots','recent20','debug','write','change','getFullYear','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','apiSecret','symbol','padEnd','netoffset','code','ExchangeNotAvailable','Generating\x20PnL\x20data','onepagemode','Error\x20while\x20deleting\x20files:\x20','test','<pre>','Invalid\x20quantity','%)\x0a','environment','1237095TaEeuf','includes','yargs/yargs','USDT','basecoin','\x20API\x20key,\x20secret\x20or\x20password\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','fiat','startnumber','quick','max','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)','Error\x20occurred:\x20','page','\x20network\x20error:\x20','fromCodePoint','./logs/','timestamp','success','Limit\x20(high-margin)','staging','portfolio','MIN_NOTIONAL','Initializing\x20exchange','Unknown\x20error\x20-\x20check\x20logs','substring','forEach','set','none','version','sell','net-basecoin','fetchBalance()','error','</pre>','2.6.0','pnl','19642ikCAgT','split','\x20>\x20details:','2\x20-\x20Validate\x20orders:\x20','update-liquidity','PnL\x20','\x20minutes\x20-\x20','\x20|\x20highest\x20fee:\x20','emojisell','InsufficientFunds','slider','fetchTickers','%\x20(','closed','isBefore','Set\x20lock\x20orders\x20to:\x20','\x20|\x20exchange:\x20','min','ccxt','USDC','balancing\x20resumed','createWriteStream','***','4ymCzif','\x20rejected\x20your\x20API\x20request\x20(see:\x20hodlerhacks.com/fix/4)',':\x20Bot\x20','Manual\x20balancing\x20required','secret','OnMaintenance','settings','create','288gVEPle','limit-low','currency','performance','starting-balance-','percentage','Initializing\x20exchange:\x20already\x20done','-results.json','no\x20exchange\x20reloaded','util','final','mkdirSync','/EUR','BUSD','full','enableFiatToggle','ongoing','orderstatus','fetchTicker','sandbox','\x20orders\x20in\x20less\x20than\x20','UNLOCKING','sendPortfolioTelegram','limit','getPortfolio','valid','pid','detectLiquidityChange()','cancel','open','2.7.1','stringify','USDP','Cooldown\x20ended\x20-\x20balancing\x20resumed','findIndex','progress','round','side','log','differenceInSeconds','Invalid\x20API\x20details,\x20please\x20try\x20again\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','storeFiat','Waited\x20','(((.+)+)+)+$','470nCUjoN','floor','excluded','filter','marketcapEnabled','watchOrders()','\x20has\x20a\x2024h\x20drop\x20of\x20','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','Placing\x20order\x20for:\x20','\x20attempts','fetchOpenOrders','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','remainingSymbols','\x20not\x20responding\x20(see:\x20hodlerhacks.com/fix/5)','150192XkERqi','number','string','changes','storeHeadless','emojibuy','2\x20-\x20Handled\x20open\x20orders','pro','no\x20open\x20orders','Pausing\x20for\x20','Order\x20amount\x20is\x20invalid:\x20','getTime','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20for\x20','distribution','active','prevnumber','production','event-history','watchTrades','Reset\x20|\x20','coins','ask','Exchange','splice','Market','startprice','offset','net-fiat','toString','Trigger:\x20','0\x20-\x20EXECUTION:\x20','910110UjvgJK','bitmex','BTC','loadSymbols()','Unknown\x20error:\x20','replace'];_0x4a96=function(){return _0x14144d;};return _0x4a96();}function headlessMode(_0x53fa4b){const _0x48de62=_0x3c6aac;let _0x38fdd2=_0x53fa4b[_0x48de62(0x8a)],_0x1b1df7=_0x53fa4b[_0x48de62(0x169)],_0x186f88=[];for(let _0x80b2e6 of _0x38fdd2){if(_0x80b2e6[_0x48de62(0x224)]!=config[_0x48de62(0x7a)]){if(_0x80b2e6[_0x48de62(0x157)]>=_0x1b1df7/0x64){if(_0x80b2e6[_0x48de62(0xd2)])_0x186f88[_0x48de62(0x1c6)](_0x80b2e6);}else{if(_0x80b2e6[_0x48de62(0x157)]<=-_0x1b1df7/0x64){if(_0x80b2e6[_0x48de62(0xd2)])_0x186f88[_0x48de62(0x1c6)](_0x80b2e6);}}}}_0x186f88[_0x48de62(0x1b6)]>0x0&&placeOrder(_0x186f88);}function notifyBalance(_0x49552b){const _0x3f0729=_0x3c6aac;let _0x48da02=_0x49552b['portfolio'],_0x447a0e=_0x49552b[_0x3f0729(0x169)],_0x34985b=[];for(let _0x2ebbab of _0x48da02){if(_0x2ebbab[_0x3f0729(0x224)]!=config['basecoin']){if(_0x2ebbab[_0x3f0729(0x157)]>=_0x447a0e/0x64){if(_0x2ebbab['valid'])_0x34985b['push'](_0x2ebbab);}else{if(_0x2ebbab[_0x3f0729(0x157)]<=-_0x447a0e/0x64){if(_0x2ebbab[_0x3f0729(0xd2)])_0x34985b[_0x3f0729(0x1c6)](_0x2ebbab);}}}}if(_0x34985b['length']>0x0){let _0x1938c0=_0x34985b[_0x3f0729(0x178)](_0x128205=>_0x128205[_0x3f0729(0x224)]);_0x1938c0[_0x3f0729(0x22a)]();let _0x495851=_0x1938c0['join'](',\x20');if(!lastCoinsToBalance)logHistory(_0x3f0729(0x1be),_0x3f0729(0xb4));lastCoinsToBalance=_0x495851;}}function symbolToCoin(_0x49fdf8){const _0x78562b=_0x3c6aac;let _0x1ae597;if(_0x49fdf8[_0x78562b(0x77)]('/'+config[_0x78562b(0x7a)]))_0x1ae597=_0x49fdf8[_0x78562b(0x117)]('/'+config[_0x78562b(0x7a)],'');if(_0x49fdf8[_0x78562b(0x77)](config[_0x78562b(0x7a)]+'/'))_0x1ae597=_0x49fdf8[_0x78562b(0x117)](config[_0x78562b(0x7a)]+'/','');return _0x1ae597;}function setLockOrders(_0x30baf5){const _0x5f5400=_0x3c6aac;lockOrders=_0x30baf5,logger[_0x5f5400(0x244)](_0x5f5400(0xa9)+Object[_0x5f5400(0x1a2)](ORDERS)[lockOrders]);}async function unlockOrders(_0x29819d=![]){const _0x2bfca3=_0x3c6aac;if(allOrdersPlaced&&lockOrders==ORDERS[_0x2bfca3(0x1c4)]){setLockOrders(ORDERS[_0x2bfca3(0xce)]);if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);if(_0x29819d){const _0x47fb69=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x47fb69,setBlockTransactionDetection(![]);}validateOrdersState='initial',persistOpenOrders([]),setLockOrders(ORDERS[_0x2bfca3(0x15b)]);}}async function validateOrders(_0x28cc36){const _0x4e012f=_0x3c6aac;if(_0x28cc36)validateOrdersState=_0x28cc36;logger['debug'](_0x4e012f(0x144)+validateOrdersState+'\x20|\x20lock\x20orders:\x20'+Object[_0x4e012f(0x1a2)](ORDERS)[lockOrders]);let _0x99c97c=[],_0x1c6a9b=config[_0x4e012f(0x1de)]=='market'?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x4e012f(0x13d)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x4e012f(0x1c4)])return;logger[_0x4e012f(0x244)](_0x4e012f(0x9d)+validateOrdersState);for(let _0x52523a=lastOrders[_0x4e012f(0x1b6)]-0x1;_0x52523a>=0x0;_0x52523a--){let _0x31b171=lastOrders[_0x52523a],_0x37c1a8=![];_0x31b171['filled']>0x0&&(_0x37c1a8=!![]),_0x99c97c[_0x4e012f(0x1c6)](_0x37c1a8),_0x37c1a8&&config[_0x4e012f(0x1de)]!=_0x4e012f(0x124)&&logHistory('order',_0x4e012f(0x1f0)+_0x31b171[_0x4e012f(0x69)]+'\x20'+_0x31b171[_0x4e012f(0xde)]+'\x20#'+formatResult(_0x31b171['filled'],0x8)+'\x20@'+formatResult(_0x31b171['price'],0x8)),_0x37c1a8&&lastOrders['splice'](_0x52523a,0x1);}persistOpenOrders(lastOrders);const _0x3d6490=coolingDown?'balancing\x20resumes\x20when\x20cooldown\x20ends':_0x4e012f(0xae);if(validateOrdersState==_0x4e012f(0x1ec)){validateOrdersState=_0x4e012f(0xc9);if(_0x99c97c[_0x4e012f(0x77)](![])){}else await unlockOrders();}else{if(validateOrdersState==_0x4e012f(0xc9)){if(_0x99c97c[_0x4e012f(0x77)](![])){}else await unlockOrders();}else{if(validateOrdersState==_0x4e012f(0xc3)){let _0x2133cb=!![];if(_0x99c97c[_0x4e012f(0x77)](![])){if(config[_0x4e012f(0x1de)]==_0x4e012f(0x124))logHistory(_0x4e012f(0x87),'Order(s)\x20not\x20validated\x20after\x20'+Math[_0x4e012f(0xdd)](_0x1c6a9b*validateOrderInterval/0xea60)+_0x4e012f(0xa0)+_0x3d6490),await unlockOrders(!![]);else{_0x2133cb=await cancelOrders();if(_0x2133cb)logHistory(_0x4e012f(0x87),_0x4e012f(0x216)+Math['round'](_0x1c6a9b*validateOrderInterval/0xea60)+_0x4e012f(0xa0)+_0x3d6490),await unlockOrders(!![]);else{validateOrdersState=_0x4e012f(0xc9),logHistory(_0x4e012f(0x96),_0x4e012f(0x14a)+Math[_0x4e012f(0xdd)](_0x1c6a9b*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x3d6490),logHistory(_0x4e012f(0x96),'Will\x20continue\x20to\x20wait\x20for\x20order(s)\x20to\x20be\x20filled\x20and\x20try\x20to\x20cancel\x20again\x20later');const _0x48407c=config[_0x4e012f(0x1de)]=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0x4e012f(0x13d)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x4ae2ec=_0x4e012f;validateOrders(_0x4ae2ec(0xc3));},_0x48407c);}}}else await unlockOrders(!![]);}else{if(validateOrdersState=='no\x20open\x20orders'){if(config[_0x4e012f(0x1de)]!=_0x4e012f(0x124))logHistory('success',_0x4e012f(0x204)+_0x3d6490);await unlockOrders(!![]);}}}}}async function cancelOrders(){const _0xf17aed=_0x3c6aac;let _0x4626b8=!![],_0x863397;for(const _0x5ba7b6 of lastOrders){let _0x51f224=![],_0x31488f=0x0;while(!_0x51f224&&_0x31488f<maxRetries){try{const _0x5acf8d=await exchange[_0xf17aed(0x163)](_0x5ba7b6[_0xf17aed(0x1d6)],_0x5ba7b6['symbol']);_0x51f224=!![];}catch(_0x27bd0c){_0x27bd0c[_0xf17aed(0x10f)]()['includes'](_0xf17aed(0x1bb))||_0x27bd0c[_0xf17aed(0x10f)]()[_0xf17aed(0x77)]('InvalidOrder')?_0x51f224=!![]:(_0x863397=_0x27bd0c,_0x51f224=![]);}!_0x51f224&&(_0x31488f++,await sleep(retryInterval));}_0x4626b8=_0x4626b8&&_0x51f224;}return!_0x4626b8&&await handleError(_0x863397,'cancelOrders()'),_0x4626b8;}async function initCoinResults(_0x35fc01){const _0x2ca94b=_0x3c6aac;_0x35fc01?logger[_0x2ca94b(0x244)](_0x2ca94b(0x143)+_0x35fc01):logger[_0x2ca94b(0x244)](_0x2ca94b(0x238)),config[_0x2ca94b(0x8a)][_0x2ca94b(0x8f)](_0x2a25e2=>{const _0x1a698f=_0x2ca94b;if(!_0x2a25e2['excluded']&&_0x2a25e2[_0x1a698f(0x224)]!=config[_0x1a698f(0x7a)]){const _0xe30274=currentCoins[_0x1a698f(0x1bc)](_0x34a005=>_0x34a005[_0x1a698f(0x224)]==_0x2a25e2[_0x1a698f(0x224)]),_0x543aa9=gTicker[noslash(_0x2a25e2[_0x1a698f(0x69)])];let _0xc0337c=_0xe30274?_0xe30274[_0x1a698f(0xf4)]:null,_0x59e724=_0x2a25e2[_0x1a698f(0x239)]?0x1/_0x543aa9:_0x543aa9,_0x4b5e59;config[_0x1a698f(0x140)]['forEach'](_0x13d938=>{const _0x567e96=_0x1a698f;!_0x4b5e59&&(_0x4b5e59=_0x13d938['changes'][_0x567e96(0x1bc)](_0x5279ad=>_0x5279ad[_0x567e96(0x224)]==_0x2a25e2['coin']),_0x4b5e59&&(_0xc0337c=_0x4b5e59[_0x567e96(0xf4)],_0x59e724=_0x4b5e59[_0x567e96(0x166)]));});let _0x2cc181=dbCoinResults[_0x1a698f(0x194)](_0x1a698f(0x107))[_0x1a698f(0x1bc)]({'coin':_0x2a25e2[_0x1a698f(0x224)]})[_0x1a698f(0x241)]();if(!_0x2cc181){const _0x24d1e8={'coin':_0x2a25e2['coin'],'number':_0xc0337c,'breakeven':_0x59e724,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x1a698f(0x194)](_0x1a698f(0x107))['push'](_0x24d1e8)[_0x1a698f(0x245)]();}else{if(_0x35fc01&&_0x2a25e2[_0x1a698f(0x224)]==_0x35fc01){const _0x416d7e={'coin':_0x2a25e2[_0x1a698f(0x224)],'number':_0xc0337c,'breakeven':_0x59e724,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x1a698f(0x194)](_0x1a698f(0x107))[_0x1a698f(0x1bc)]({'coin':_0x2a25e2[_0x1a698f(0x224)]})[_0x1a698f(0x212)](_0x416d7e)[_0x1a698f(0x245)]();}}}});}async function placeOrder(_0x36f3d4){const _0x5d07e6=_0x3c6aac,_0x5ecebc=config['ordertype']==_0x5d07e6(0x124)?_0x5d07e6(0x124):_0x5d07e6(0xd0);if(lockOrders==ORDERS[_0x5d07e6(0x15b)]&&!coolingDown){setLockOrders(ORDERS[_0x5d07e6(0x1c4)]);while(transactionDetectionOngoing){await sleep(0x64);}logger['debug'](_0x5d07e6(0xed)+_0x36f3d4[_0x5d07e6(0x178)](_0x529db1=>_0x529db1[_0x5d07e6(0x224)])[_0x5d07e6(0x155)](',\x20')),lastCoinsToBalance='',allOrdersPlaced=![],validateOrdersState=_0x5d07e6(0x1ec);let _0x5dec78=![];lastOrders=[];const _0x2d911e=config['threshold'];for(const _0x1c123e of _0x36f3d4){let _0x47e5e8,_0x4118da,_0x212aac,_0x2b6066,_0x2fe11b,_0x37d56d=_0x1c123e['symbol'];logger[_0x5d07e6(0x244)](_0x5d07e6(0x110)+_0x1c123e[_0x5d07e6(0x224)]+'\x20'+_0x1c123e[_0x5d07e6(0xf4)]+'\x20'+_0x1c123e[_0x5d07e6(0x1bd)]+'\x20'+_0x1c123e['distribution']+'%\x20'+_0x1c123e['target']+'%\x20'+(0x64*_0x1c123e[_0x5d07e6(0x157)])[_0x5d07e6(0x123)](0x2)+_0x5d07e6(0xa6)+_0x2d911e[_0x5d07e6(0x123)](0x2)+'%)'),insufficientFundsWarningSent=insufficientFundsWarningSent[_0x5d07e6(0xe8)](_0x32ecc2=>_0x32ecc2!==_0x1c123e[_0x5d07e6(0x224)]);const _0x348127=currentCoins[_0x5d07e6(0x1bc)](_0x3e9439=>_0x3e9439[_0x5d07e6(0x224)]==_0x1c123e['coin']);_0x348127&&(_0x348127['prevnumber']=_0x1c123e[_0x5d07e6(0xf4)]);try{const _0x204b16=await exchange[_0x5d07e6(0xcb)](_0x37d56d);_0x47e5e8=_0x1c123e[_0x5d07e6(0x239)]?0x1/_0x1c123e[_0x5d07e6(0x1bd)]:_0x1c123e[_0x5d07e6(0x1bd)],_0x4118da=_0x204b16[_0x5d07e6(0x164)],_0x212aac=_0x204b16[_0x5d07e6(0x108)];_0x1c123e[_0x5d07e6(0x239)]?(_0x2b6066=_0x1c123e[_0x5d07e6(0xde)]==_0x5d07e6(0x14d)?'sell':_0x5d07e6(0x14d),_0x2fe11b=Math[_0x5d07e6(0x15d)](_0x1c123e[_0x5d07e6(0x153)])/_0x47e5e8):(_0x2b6066=_0x1c123e[_0x5d07e6(0xde)],_0x2fe11b=Math['abs'](_0x1c123e[_0x5d07e6(0x153)]));_0x5ecebc=='limit'&&(config[_0x5d07e6(0x1de)]==_0x5d07e6(0x214)&&(_0x47e5e8=_0x2b6066==_0x5d07e6(0x14d)?_0x4118da:_0x212aac),config['ordertype']==_0x5d07e6(0xba)&&(_0x47e5e8=_0x2b6066==_0x5d07e6(0x14d)?_0x212aac:_0x4118da));_0x2fe11b=formatResult(_0x2fe11b,0x8),_0x47e5e8=formatResult(_0x47e5e8,0x8);const _0x566846=_0x2b6066==_0x5d07e6(0x93)?config['emojisell']?String[_0x5d07e6(0x84)]('0x'+config[_0x5d07e6(0xa2)])+'\x20':'':config[_0x5d07e6(0xf8)]?String[_0x5d07e6(0x84)]('0x'+config[_0x5d07e6(0xf8)])+'\x20':'',_0x22c2d9=_0x5ecebc==_0x5d07e6(0x124)?_0x5d07e6(0x10b):config[_0x5d07e6(0x1de)]==_0x5d07e6(0x214)?_0x5d07e6(0x88):_0x5d07e6(0x1a4),_0x24251f=(Math[_0x5d07e6(0xe6)](Math['random']()*0x35a4e900)+0x5f5e100)[_0x5d07e6(0x10f)]();lastOrders[_0x5d07e6(0x1c6)]({'customId':_0x24251f,'symbol':_0x37d56d,'coin':_0x1c123e[_0x5d07e6(0x224)],'amount':_0x2fe11b,'price':_0x47e5e8,'side':_0x2b6066,'reverse':_0x1c123e['reverse'],'filled':0x0});let _0x433fe8;_0x5ecebc==_0x5d07e6(0x124)?_0x2b6066==_0x5d07e6(0x14d)&&[_0x5d07e6(0x184),_0x5d07e6(0x1f4),'Cex',_0x5d07e6(0x1a6),_0x5d07e6(0x1b9),_0x5d07e6(0x206)][_0x5d07e6(0x77)](config[_0x5d07e6(0x1b5)])?_0x433fe8=await exchange['createOrder'](_0x37d56d,_0x5ecebc,_0x2b6066,_0x2fe11b,_0x47e5e8):_0x433fe8=await exchange[_0x5d07e6(0x230)](_0x37d56d,_0x5ecebc,_0x2b6066,_0x2fe11b,undefined):_0x433fe8=await exchange['createOrder'](_0x37d56d,_0x5ecebc,_0x2b6066,_0x2fe11b,_0x47e5e8);const _0x12fc3e=lastOrders['length']-0x1;if(_0x12fc3e>=0x0&&lastOrders[_0x12fc3e]['customId']==_0x24251f){lastOrders[_0x12fc3e][_0x5d07e6(0x1d6)]=_0x433fe8['id'];if(_0x433fe8[_0x5d07e6(0x149)])lastOrders[_0x12fc3e][_0x5d07e6(0x149)]=_0x433fe8[_0x5d07e6(0x149)];if(_0x433fe8[_0x5d07e6(0x166)])lastOrders[_0x12fc3e][_0x5d07e6(0x166)]=_0x433fe8[_0x5d07e6(0x166)];lastOrders[_0x12fc3e][_0x5d07e6(0x1b0)]=_0x433fe8[_0x5d07e6(0x1b0)];}if(_0x433fe8[_0x5d07e6(0x149)])_0x2fe11b=_0x433fe8[_0x5d07e6(0x149)];if(_0x433fe8['price'])_0x47e5e8=_0x433fe8[_0x5d07e6(0x166)];if(_0x5ecebc=='market')logHistory(_0x5d07e6(0x20d),''+_0x566846+_0x22c2d9+_0x5d07e6(0x11f)+_0x37d56d+'\x20'+_0x2b6066+'\x20#'+formatResult(_0x2fe11b,0x8)+'\x20@'+formatResult(_0x47e5e8,0x8));else logHistory(_0x5d07e6(0x20d),''+_0x566846+_0x22c2d9+_0x5d07e6(0x11f)+_0x37d56d+'\x20'+_0x2b6066+'\x20#'+formatResult(_0x2fe11b,0x8)+'\x20@'+formatResult(_0x47e5e8,0x8));logger['debug'](_0x5d07e6(0x21e)+_0x433fe8['id']+_0x5d07e6(0x15c)+_0x24251f);if(config[_0x5d07e6(0x138)]!=0x0){let _0x53884e=null;if(cooldownTracker[_0x5d07e6(0x1b6)]==config[_0x5d07e6(0x138)]-0x1)_0x53884e=cooldownTracker[_0x5d07e6(0x195)]();const _0x5787da=getTimeStamp();cooldownTracker[_0x5d07e6(0x1c6)](_0x5787da);if(_0x53884e){const _0x210323=fns[_0x5d07e6(0xe0)](new Date(_0x5787da),new Date(_0x53884e));if(_0x210323<cooldownInterval){logHistory(_0x5d07e6(0x96),_0x5d07e6(0x1e5)+config[_0x5d07e6(0x138)]+_0x5d07e6(0xcd)+cooldownInterval/0x3c+_0x5d07e6(0x1fc)+cooldownPeriod/(0xe10*0x3e8)+_0x5d07e6(0x1f2)),coolingDown=!![];break;}}}}catch(_0x6acfe7){if(_0x6acfe7[_0x5d07e6(0x10f)]()[_0x5d07e6(0x77)](_0x5d07e6(0x8b)))lastOrders=lastOrders[_0x5d07e6(0xe8)](_0x2dbc5d=>_0x2dbc5d[_0x5d07e6(0x69)]!=_0x37d56d),logHistory(_0x5d07e6(0x96),'Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x37d56d),_0x5dec78=!![];else{if(_0x6acfe7[_0x5d07e6(0x10f)]()[_0x5d07e6(0x77)](_0x5d07e6(0x73)))lastOrders=lastOrders[_0x5d07e6(0xe8)](_0x4a97b1=>_0x4a97b1[_0x5d07e6(0x69)]!=_0x37d56d),logHistory(_0x5d07e6(0x96),_0x5d07e6(0xfd)+_0x37d56d),_0x5dec78=!![];else{if(_0x6acfe7[_0x5d07e6(0x10f)]()[_0x5d07e6(0x77)](_0x5d07e6(0x175)))lastOrders=lastOrders['filter'](_0x21487b=>_0x21487b[_0x5d07e6(0x69)]!=_0x37d56d),logHistory(_0x5d07e6(0x96),'Order\x20is\x20invalid:\x20'+_0x37d56d),logger[_0x5d07e6(0x244)](_0x6acfe7),_0x5dec78=!![];else _0x6acfe7[_0x5d07e6(0x10f)]()[_0x5d07e6(0x77)](_0x5d07e6(0x173))?(lastOrders=lastOrders[_0x5d07e6(0xe8)](_0x40feeb=>_0x40feeb[_0x5d07e6(0x69)]!=_0x37d56d),logHistory(_0x5d07e6(0x96),_0x5d07e6(0x16f)+_0x37d56d),_0x5dec78=!![]):(lastOrders=lastOrders[_0x5d07e6(0xe8)](_0x295925=>_0x295925[_0x5d07e6(0x69)]!=_0x37d56d),await handleError(_0x6acfe7,_0x5d07e6(0x201),_0x37d56d));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x5d07e6(0x1b6)]>0x0){const _0x330170=config['ordertype']==_0x5d07e6(0x124)?validateOrderTimeout*0x3c*0x3e8:config[_0x5d07e6(0x13d)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x330170);}else unlockOrders();_0x5dec78&&config['headless']&&(logHistory('error',_0x5d07e6(0x152)+pauseBotMsg),await pauseBot(pauseBotInterval)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x5d07e6(0x87),_0x5d07e6(0xda)));}else{if(coolingDown)!config['headless']&&logHistory(_0x5d07e6(0x96),_0x5d07e6(0x129));else lockOrders!=ORDERS[_0x5d07e6(0x15b)]&&(!config[_0x5d07e6(0x130)]&&(config[_0x5d07e6(0x1de)]==_0x5d07e6(0x124)?logHistory(_0x5d07e6(0x96),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated'):logHistory(_0x5d07e6(0x96),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled')));}}function persistOpenOrders(_0x1df1f5){const _0xcdfaf1=_0x3c6aac,_0x45664e={...config,'openOrders':_0x1df1f5};let _0x47e32d=dbConfig[_0xcdfaf1(0x194)](_0xcdfaf1(0x160))[_0xcdfaf1(0x1bc)]({'botID':botID})[_0xcdfaf1(0x241)]();_0x47e32d&&dbConfig[_0xcdfaf1(0x194)](_0xcdfaf1(0x160))[_0xcdfaf1(0x1bc)]({'botID':botID})[_0xcdfaf1(0x212)](_0x45664e)[_0xcdfaf1(0x245)]();}function restoreOrders(){const _0x40a8c6=_0x3c6aac;let _0x990695;config['openOrders']&&allOpenOrders[_0x40a8c6(0x8f)](_0x2e354f=>{const _0x3200dc=_0x40a8c6,_0x4d9dc6=config[_0x3200dc(0x1d3)][_0x3200dc(0x1bc)](_0xaf32e9=>_0xaf32e9[_0x3200dc(0x1d6)]==_0x2e354f['id']);_0x4d9dc6&&(lastOrders[_0x3200dc(0x1c6)](_0x4d9dc6),_0x990695=_0x2e354f[_0x3200dc(0x86)]);});if(lastOrders[_0x40a8c6(0x1b6)]>0x0){setLockOrders(ORDERS[_0x40a8c6(0x1c4)]),validateOrdersState='ongoing',allOrdersPlaced=!![];const _0x1831ae=new Date()[_0x40a8c6(0xfe)](),_0x26e8aa=config[_0x40a8c6(0x1de)]==_0x40a8c6(0x124)?validateOrderTimeout*0x3c*0x3e8:config[_0x40a8c6(0x13d)]*0x3c*0x3e8;if(_0x990695+_0x26e8aa>_0x1831ae){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x2d160f=_0x40a8c6;validateOrders(_0x2d160f(0xc3));},_0x990695+_0x26e8aa-_0x1831ae);}else validateOrders(_0x40a8c6(0xc3));}}async function sendMetricsTelegram(){const _0x53dc8f=_0x3c6aac;if(!coinsLoaded){process[_0x53dc8f(0x1ea)]({'telegrammsg':'Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute'},_0x54a292=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x588b1b='';if(config[_0x53dc8f(0x1f6)])_0x588b1b=_0x53dc8f(0x211)+config['botname']+_0x53dc8f(0x229);else _0x588b1b=_0x53dc8f(0x1b7)+botID+'\x20metrics:</b>\x20\x0a\x0a';const _0x4cc646=config[_0x53dc8f(0x7a)],_0x3650d1=config['fiat'],_0x5c4e90=getKPIs('basecoin'),_0x579d6a=getKPIs(_0x53dc8f(0x7c),_0x3650d1),_0x5d6dd7=getKPIs(_0x53dc8f(0x94)),_0x388d56=getKPIs(_0x53dc8f(0x10e),_0x3650d1),_0x563319=getKPIs(_0x53dc8f(0x19f)),_0x403b94=getKPIs('pnl-fiat',_0x3650d1);_0x4cc646[_0x53dc8f(0x77)](_0x3650d1)?(_0x588b1b+='<pre>',_0x588b1b+=_0x53dc8f(0x1d4)+_0x4cc646+':\x20'+_0x5c4e90[_0x53dc8f(0x241)]+'\x20('+_0x5c4e90['change']+_0x53dc8f(0x74),_0x588b1b+=_0x53dc8f(0x22e)+_0x4cc646+':\x20'+_0x5d6dd7[_0x53dc8f(0x241)]+'\x20('+_0x5d6dd7['change']+_0x53dc8f(0x74),_0x588b1b+=_0x53dc8f(0x9f)+_0x4cc646+':\x20'+_0x563319[_0x53dc8f(0x241)]+'\x20('+_0x563319[_0x53dc8f(0x246)]+_0x53dc8f(0x74),_0x588b1b+=_0x53dc8f(0x97)):(_0x588b1b+=_0x53dc8f(0x72),_0x588b1b+=_0x53dc8f(0x1d4)+_0x4cc646+':\x20'+_0x5c4e90[_0x53dc8f(0x241)]+'\x20('+_0x5c4e90[_0x53dc8f(0x246)]+_0x53dc8f(0x74),_0x588b1b+=_0x53dc8f(0x1d4)+_0x3650d1+':\x20'+_0x579d6a[_0x53dc8f(0x241)]+'\x20('+_0x579d6a['change']+_0x53dc8f(0x74),_0x588b1b+=_0x53dc8f(0x22e)+_0x4cc646+':\x20'+_0x5d6dd7['value']+'\x20('+_0x5d6dd7['change']+'%)\x0a',_0x588b1b+=_0x53dc8f(0x22e)+_0x3650d1+':\x20'+_0x388d56['value']+'\x20('+_0x388d56[_0x53dc8f(0x246)]+_0x53dc8f(0x74),_0x588b1b+='PnL\x20'+_0x4cc646+':\x20'+_0x563319[_0x53dc8f(0x241)]+'\x20('+_0x563319[_0x53dc8f(0x246)]+_0x53dc8f(0x74),_0x588b1b+=_0x53dc8f(0x9f)+_0x3650d1+':\x20'+_0x403b94[_0x53dc8f(0x241)]+'\x20('+_0x403b94[_0x53dc8f(0x246)]+_0x53dc8f(0x74),_0x588b1b+='</pre>'),process[_0x53dc8f(0x1ea)]({'telegrammsg':_0x588b1b},_0x2e4599=>{});}async function sendPortfolioTelegram(){const _0x3e1288=_0x3c6aac;if(!coinsLoaded||!currentCoins[0x0][_0x3e1288(0x100)]){process[_0x3e1288(0x1ea)]({'telegrammsg':'Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute'},_0x10ea91=>{});return;}let _0x598bf5='';if(config[_0x3e1288(0x1f6)])_0x598bf5=_0x3e1288(0x211)+config[_0x3e1288(0x23a)]+_0x3e1288(0x20b);else _0x598bf5=_0x3e1288(0x1b7)+botID+_0x3e1288(0x20b);_0x598bf5+='<pre>',_0x598bf5+=_0x3e1288(0x215),_0x598bf5+='Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a',_0x598bf5+='-------------------------------\x0a',currentCoins[_0x3e1288(0x8f)](_0x32376b=>{const _0x272503=_0x3e1288;_0x598bf5+=_0x32376b['coin'][_0x272503(0x6a)](0x7)+'|\x20'+formatPad(_0x32376b[_0x272503(0x100)],0x2,0x6)+'|\x20'+formatPad(_0x32376b[_0x272503(0x158)],0x2,0x6)+'|\x20'+formatPad(_0x32376b[_0x272503(0x157)]*0x64,0x2,0x6)+'\x0a';}),_0x598bf5+='</pre>',process['send']({'telegrammsg':_0x598bf5},_0x514f98=>{});}function formatPad(_0x5576ba,_0x20fb5a,_0x3e0720){const _0x35e5ca=_0x3c6aac,_0x110373=formatResultString(_0x5576ba,_0x20fb5a);return _0x110373?_0x110373[_0x35e5ca(0x23c)](_0x3e0720):''[_0x35e5ca(0x23c)](_0x3e0720);}function logHistory(_0x3ab71c,_0x46cc0d,_0x17e6f6=''){const _0x307a80=_0x3c6aac;logger[_0x307a80(0xc7)](''+_0x46cc0d);let _0x284305={'time':getTimeStamp(),'type':_0x3ab71c,'event':_0x46cc0d};dbLogs['get'](_0x307a80(0x221))[_0x307a80(0x1c6)](_0x284305)[_0x307a80(0x245)]();if(_0x17e6f6=='')_0x17e6f6=_0x46cc0d;proxyEmit(_0x307a80(0x1a1),{'log':_0x284305,'summary':_0x17e6f6}),process[_0x307a80(0x1ea)]({'telegram':{..._0x284305,'botname':config[_0x307a80(0x23a)],'showname':config[_0x307a80(0x1f6)]}},_0x4f8177=>{});}function emitHistory(_0x49158c={}){const _0x398577=_0x3c6aac;Object['keys'](_0x49158c)[_0x398577(0x1b6)]==0x0&&(_0x49158c={'type':[_0x398577(0x20d),_0x398577(0x1a1)],'event':'','page':0x1});if(_0x49158c[_0x398577(0x12e)][_0x398577(0x77)](_0x398577(0x1a1)))_0x49158c[_0x398577(0x12e)][_0x398577(0x10a)](_0x49158c[_0x398577(0x12e)]['indexOf']('event'),0x1,'error',_0x398577(0x1be),_0x398577(0x87));if(dbLogs[_0x398577(0x14c)](_0x398577(0x221))[_0x398577(0x241)]()){let _0x5ea605=dbLogs[_0x398577(0x194)](_0x398577(0x221))[_0x398577(0xe8)](_0x2063aa=>{const _0x4e66d2=_0x398577;if(_0x49158c['type'][_0x4e66d2(0x1b6)]==0x0)return![];else return _0x49158c[_0x4e66d2(0x12e)]['includes'](_0x2063aa[_0x4e66d2(0x12e)]);})[_0x398577(0xe8)](_0x456067=>{const _0x47946d=_0x398577;if(_0x49158c[_0x47946d(0x1a1)]=='')return!![];else return _0x456067[_0x47946d(0x1a1)][_0x47946d(0x1da)]()[_0x47946d(0x77)](_0x49158c['event']['toLowerCase']());})[_0x398577(0x13c)](_0x398577(0x1b3)),_0x3aea3d=_0x5ea605[_0x398577(0x241)]()['length'];_0x5ea605=_0x5ea605[_0x398577(0x239)]()['slice']((_0x49158c[_0x398577(0x82)]-0x1)*logPageSize,_0x49158c['page']*logPageSize-0x1)['reverse']()['value'](),proxyEmit('event-history',{'logs':_0x5ea605,'total':_0x3aea3d});}else proxyEmit(_0x398577(0x104),{'logs':[],'total':0x0});}function _0x40ee(_0x3dc83d,_0x2d780a){const _0x150150=_0x4a96();return _0x40ee=function(_0x50bdc,_0x35f0be){_0x50bdc=_0x50bdc-0x66;let _0x4a96cc=_0x150150[_0x50bdc];return _0x4a96cc;},_0x40ee(_0x3dc83d,_0x2d780a);}function deleteHistoryAlerts(_0xe13c92){const _0x209b13=_0x3c6aac;if(dbLogs[_0x209b13(0x14c)]('logs')[_0x209b13(0x241)]()){const _0x13d9f0=dbLogs[_0x209b13(0x194)]('logs')[_0x209b13(0x13c)]('time')[_0x209b13(0xe8)](_0x3b76ff=>{const _0xf6b59c=_0x209b13;return _0x3b76ff[_0xf6b59c(0x12e)]==_0xf6b59c(0x20d);})[_0x209b13(0x241)]();dbLogs[_0x209b13(0x194)]('logs')[_0x209b13(0x137)]()['write'](),dbLogs[_0x209b13(0x194)](_0x209b13(0x221))[_0x209b13(0x212)](_0x13d9f0)[_0x209b13(0x245)](),emitHistory(_0xe13c92);}}async function pauseBot(_0x40f846=pauseBotIntervalShort,_0x365eee,_0x8b8599,_0x454d8b=![]){const _0x3ff18a=_0x3c6aac,_0x248aa2=new Date()[_0x3ff18a(0xfe)]();if(!lastErrorShown||_0x248aa2-lastErrorShown>=_0x40f846){lastErrorShown=_0x248aa2;if(!lastBotPause)lastBotPause=_0x248aa2,consecutivePauses=0x1;else{if(_0x248aa2-lastBotPause-_0x40f846<0x5a*0x3e8){consecutivePauses++;if(consecutivePauses>maxPauseRetries){if(_0x454d8b){logHistory(_0x3ff18a(0x96),_0x365eee+_0x3ff18a(0x1c8)),await killBot();return;}else logHistory(_0x3ff18a(0x96),_0x365eee+pauseBotMsg),_0x40f846=pauseBotInterval;}}else consecutivePauses=0x1;lastBotPause=_0x248aa2;}_0x8b8599?logger[_0x3ff18a(0x244)]('('+consecutivePauses+')\x20'+_0x365eee+_0x3ff18a(0x9c),_0x8b8599):logger['debug']('('+consecutivePauses+')\x20'+_0x365eee);if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);await sleep(_0x40f846),botPaused=![],_0x40f846==pauseBotIntervalShort?resumeBot(!![]):resumeBot(![]);}}}async function killBot(){const _0x19d604=_0x3c6aac;botPaused=!![],await sleep(0x3e8),process[_0x19d604(0x1ea)]({'stop':_0x19d604(0x1fd)},_0x992cd2=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x11cbc0,_0x2310eb,_0x3554c8=![]){const _0x2a2c70=_0x3c6aac;if(botPaused)return;let _0x2b2bd5;const _0x11e370=config[_0x2a2c70(0x1b5)]||_0x2a2c70(0x109);if(_0x2310eb)logger['debug'](_0x2a2c70(0x139)+_0x2310eb);const _0x195443=()=>{const _0x4a20c9=_0x2a2c70;loading[_0x4a20c9(0x96)]='api-issue',emitLoadingProgress();};if(_0x11cbc0[_0x2a2c70(0x10f)]()[_0x2a2c70(0x77)]('API-key\x20format\x20invalid'))logHistory(_0x2a2c70(0x96),_0x11e370+_0x2a2c70(0x13a)),_0x195443();else{if(_0x11cbc0[_0x2a2c70(0x10f)]()['includes'](_0x2a2c70(0x218)))logHistory('error',_0x11e370+'\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)'),_0x195443();else{if(_0x11cbc0[_0x2a2c70(0x10f)]()[_0x2a2c70(0x77)]('AuthenticationError'))config[_0x2a2c70(0x1d0)]?_0x2b2bd5=_0x11e370+_0x2a2c70(0x7b):_0x2b2bd5=_0x11e370+_0x2a2c70(0x192),logHistory(_0x2a2c70(0x96),_0x2b2bd5+'\x20(see:\x20hodlerhacks.com/fix/1)'),_0x195443();else{if(_0x11cbc0['toString']()[_0x2a2c70(0x77)](_0x2a2c70(0x12f)))logHistory('error',_0x11e370+_0x2a2c70(0x17f)),_0x195443();else{if(!_0x3554c8)await handleError(_0x11cbc0,null);}}}}}async function handleError(_0x397e8c,_0x459ddf,_0x38a34e=''){const _0x4feac3=_0x3c6aac;if(botPaused)return;let _0x43c0b6;const _0x4c7f94=config[_0x4feac3(0x1b5)]||_0x4feac3(0x109);if(_0x459ddf)logger[_0x4feac3(0x244)]('Exception\x20thrown\x20in\x20'+_0x459ddf);if(_0x397e8c['toString']()['includes'](_0x4feac3(0x14e)))_0x43c0b6=_0x4c7f94+_0x4feac3(0x1ad),await pauseBot(undefined,_0x43c0b6,_0x397e8c);else{if(_0x397e8c[_0x4feac3(0x10f)]()['includes']('RateLimitExceeded'))_0x43c0b6=_0x4c7f94+_0x4feac3(0x120),await pauseBot(undefined,_0x43c0b6,_0x397e8c);else{if(_0x397e8c['toString']()[_0x4feac3(0x77)](_0x4feac3(0x6d))||_0x397e8c[_0x4feac3(0x10f)]()[_0x4feac3(0x77)](_0x4feac3(0xb6)))_0x43c0b6=_0x4c7f94+_0x4feac3(0x159),await pauseBot(undefined,_0x43c0b6,_0x397e8c['toString']());else{if(_0x397e8c[_0x4feac3(0x10f)]()[_0x4feac3(0x77)](_0x4feac3(0x18c)))_0x43c0b6=_0x4c7f94+_0x4feac3(0xf2),await pauseBot(undefined,_0x43c0b6,_0x397e8c['toString']());else{if(_0x397e8c[_0x4feac3(0x10f)]()[_0x4feac3(0x77)](_0x4feac3(0x191)))_0x43c0b6=_0x4c7f94+'\x20closed\x20the\x20connection\x20(see:\x20hodlerhacks.com/fix/5)',await pauseBot(undefined,_0x43c0b6,_0x397e8c[_0x4feac3(0x10f)]());else{if(_0x397e8c[_0x4feac3(0x10f)]()['toLowerCase']()[_0x4feac3(0x77)](_0x4feac3(0x86))||_0x397e8c[_0x4feac3(0x10f)]()[_0x4feac3(0x1da)]()[_0x4feac3(0x77)](_0x4feac3(0x183)))_0x43c0b6='Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)',await pauseBot(undefined,_0x43c0b6,_0x397e8c[_0x4feac3(0x10f)]());else{if(_0x397e8c[_0x4feac3(0x10f)]()[_0x4feac3(0x77)]('InvalidNonce'))_0x43c0b6=_0x4c7f94+_0x4feac3(0xb2),await pauseBot(undefined,_0x43c0b6,_0x397e8c['toString']());else{if(_0x397e8c instanceof ccxt[_0x4feac3(0x148)])_0x43c0b6=_0x4c7f94+_0x4feac3(0x83)+_0x397e8c[_0x4feac3(0x10f)](),logger[_0x4feac3(0x244)]('Network\x20error\x20details:',_0x397e8c),await pauseBot(undefined,_0x43c0b6,_0x397e8c);else{if(_0x397e8c[_0x4feac3(0x10f)]()[_0x4feac3(0x77)]('API-key\x20format\x20invalid'))logHistory(_0x4feac3(0x96),_0x4c7f94+_0x4feac3(0x128)),logHistory(_0x4feac3(0x96),_0x4feac3(0x80)),await killBot();else{if(_0x397e8c['toString']()[_0x4feac3(0x77)](_0x4feac3(0x218)))logHistory(_0x4feac3(0x96),_0x4c7f94+_0x4feac3(0x12a)),logHistory(_0x4feac3(0x96),_0x4feac3(0x80)),await killBot();else{if(_0x397e8c[_0x4feac3(0x10f)]()['includes'](_0x4feac3(0x196))&&_0x397e8c[_0x4feac3(0x10f)]()['includes']('token\x20is\x20expired'))_0x43c0b6=_0x4c7f94+'\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)',await pauseBot(undefined,_0x43c0b6,_0x397e8c,!![]);else{if(_0x397e8c['toString']()[_0x4feac3(0x77)](_0x4feac3(0x196)))config[_0x4feac3(0x1d0)]?_0x43c0b6=_0x4c7f94+_0x4feac3(0x7b):_0x43c0b6=_0x4c7f94+_0x4feac3(0x192),logHistory('error',_0x43c0b6),logHistory(_0x4feac3(0x96),_0x4feac3(0x80)),await killBot();else{if(_0x397e8c['toString']()[_0x4feac3(0x77)]('PermissionDenied'))logHistory(_0x4feac3(0x96),_0x4c7f94+_0x4feac3(0x1d5)),logHistory('error',_0x4feac3(0x80)),await killBot();else{if(_0x397e8c[_0x4feac3(0x10f)]()[_0x4feac3(0x77)](_0x4feac3(0xa3)))logHistory(_0x4feac3(0x96),_0x4feac3(0x1ac)+_0x38a34e),logger[_0x4feac3(0x244)]('Error\x20details:',_0x397e8c);else{if(_0x397e8c instanceof ccxt['ExchangeError']){_0x43c0b6=_0x4c7f94+_0x4feac3(0x136)+_0x397e8c['toString']();if(_0x38a34e)_0x43c0b6+=_0x4feac3(0x15a)+_0x38a34e;await pauseBot(undefined,_0x43c0b6,_0x397e8c);}else{_0x43c0b6=_0x4feac3(0x116)+_0x397e8c[_0x4feac3(0x10f)]();if(_0x38a34e)_0x43c0b6+=_0x4feac3(0x15a)+_0x38a34e;await pauseBot(undefined,_0x43c0b6);}}}}}}}}}}}}}}}}function decryptRSA(_0x19cd83,_0x33eb54){const _0x166dd3=_0x3c6aac,_0x1d99b2=forge[_0x166dd3(0x168)][_0x166dd3(0x182)](_0x19cd83),_0x38005e=_0x1d99b2[_0x166dd3(0x1ae)](forge[_0x166dd3(0xc2)][_0x166dd3(0x14b)](_0x33eb54),_0x166dd3(0x121),{'md':forge['md'][_0x166dd3(0x19c)]['create'](),'mgf1':{'md':forge['md'][_0x166dd3(0x19c)][_0x166dd3(0xb8)]()}});return _0x38005e;}async function withRetry(_0x244627,_0x592386){const _0x16bcef=_0x3c6aac;let _0x2ce673=![],_0x3d7adc=0x0,_0x1fde87,_0x345b28;while(_0x3d7adc<maxRetries){try{_0x1fde87=await _0x592386();break;}catch(_0x41e8e4){_0x345b28=_0x41e8e4,!_0x2ce673?(_0x2ce673=!![],logger[_0x16bcef(0x244)]('RETRY\x20-\x20Error\x20in\x20'+_0x244627+':',_0x41e8e4[_0x16bcef(0x10f)]())):await sleep(retryInterval);}_0x3d7adc++;}if(_0x3d7adc==0x0)return _0x1fde87;if(_0x3d7adc>=maxRetries)throw _0x345b28;else return logger[_0x16bcef(0x244)]('RETRY\x20-\x20Problem\x20resolved\x20after\x20'+_0x3d7adc+_0x16bcef(0xee)),_0x1fde87;}function formatResult(_0x71b6f0,_0x40f465){return parseFloat(_0x71b6f0['toFixed'](_0x40f465));}function formatResultTruncate(_0x236452,_0x340bd6){const _0x15d48a=_0x3c6aac;let _0x58112e=formatResultString(_0x236452,0xa),_0x212b99=_0x58112e[_0x15d48a(0x202)]('.');return _0x212b99!=-0x1&&(_0x58112e=_0x58112e[_0x15d48a(0x1f1)](0x0,_0x212b99+_0x340bd6+0x1)),Number(_0x58112e);}function formatResultString(_0x14946e,_0x1e01a2){const _0x353cb7=_0x3c6aac;let _0x238993;if(!(''+_0x14946e)[_0x353cb7(0x77)]('e'))_0x238993=+(Math[_0x353cb7(0xdd)](_0x14946e+'e+'+_0x1e01a2)+'e-'+_0x1e01a2);else{let _0x50ed8a=(''+_0x14946e)[_0x353cb7(0x9b)]('e'),_0x49df72='';+_0x50ed8a[0x1]+_0x1e01a2>0x0&&(_0x49df72='+'),_0x238993=+(Math[_0x353cb7(0xdd)](+_0x50ed8a[0x0]+'e'+_0x49df72+(+_0x50ed8a[0x1]+_0x1e01a2))+'e-'+_0x1e01a2);}return Number(_0x238993)['toFixed'](_0x1e01a2);}function getServerTime(){const _0x36d204=_0x3c6aac,_0x4e48bc=new Date();return _0x4e48bc['getFullYear']()+'/'+(_0x4e48bc[_0x36d204(0x23e)]()+0x1)['toString']()[_0x36d204(0x23c)](0x2,'0')+'/'+_0x4e48bc[_0x36d204(0x188)]()[_0x36d204(0x10f)]()[_0x36d204(0x23c)](0x2,'0')+'\x20'+_0x4e48bc[_0x36d204(0x1bf)]()[_0x36d204(0x10f)]()['padStart'](0x2,'0')+':'+_0x4e48bc[_0x36d204(0x22c)]()[_0x36d204(0x10f)]()[_0x36d204(0x23c)](0x2,'0')+':'+_0x4e48bc[_0x36d204(0x18f)]()[_0x36d204(0x10f)]()[_0x36d204(0x23c)](0x2,'0');}function getTimeStamp(){const _0x4e12eb=_0x3c6aac,_0x5e518f=shiftedTime();return _0x5e518f[_0x4e12eb(0x66)]()+'/'+(_0x5e518f[_0x4e12eb(0x23e)]()+0x1)[_0x4e12eb(0x10f)]()[_0x4e12eb(0x23c)](0x2,'0')+'/'+_0x5e518f['getDate']()['toString']()[_0x4e12eb(0x23c)](0x2,'0')+'\x20'+_0x5e518f['getHours']()['toString']()['padStart'](0x2,'0')+':'+_0x5e518f[_0x4e12eb(0x22c)]()[_0x4e12eb(0x10f)]()[_0x4e12eb(0x23c)](0x2,'0')+':'+_0x5e518f[_0x4e12eb(0x18f)]()['toString']()[_0x4e12eb(0x23c)](0x2,'0');}function getDate(){const _0x1f0ff=_0x3c6aac,_0x3b62a5=shiftedTime();return _0x3b62a5['getFullYear']()+'/'+(_0x3b62a5[_0x1f0ff(0x23e)]()+0x1)[_0x1f0ff(0x10f)]()[_0x1f0ff(0x23c)](0x2,'0')+'/'+_0x3b62a5['getDate']()[_0x1f0ff(0x10f)]()[_0x1f0ff(0x23c)](0x2,'0');}function getHour(){const _0x3b1fcc=_0x3c6aac,_0x5972bc=shiftedTime();return _0x5972bc[_0x3b1fcc(0x1bf)]()['toString']()['padStart'](0x2,'0');}function sleep(_0x46e652){return new Promise(_0x23f3bd=>setTimeout(_0x23f3bd,_0x46e652));}function shiftedTime(){const _0x510731=_0x3c6aac,_0x582cea=new Date();let _0x426cd5=_0x582cea;if(config&&config[_0x510731(0x236)]!==0x0)_0x426cd5=fns[_0x510731(0x146)](_0x582cea,{'hours':config[_0x510731(0x236)]});return _0x426cd5;}function timer(_0x214413){const _0x342b99=_0x3c6aac,_0x3fe201=new Date();!lasttime?console[_0x342b99(0xdf)](getTimeStamp()+':\x20timer\x20>',_0x214413,_0x3fe201):console['log'](getTimeStamp()+_0x342b99(0x1c2),_0x214413,(_0x3fe201-lasttime)/0x3e8),lasttime=_0x3fe201;}