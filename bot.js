const _0x5bc9d1=_0xd0c7;(function(_0x46705f,_0x1eb9d4){const _0x108cca=_0xd0c7,_0x53a0b7=_0x46705f();while(!![]){try{const _0x6c1b59=parseInt(_0x108cca(0x19a))/0x1*(parseInt(_0x108cca(0x1af))/0x2)+-parseInt(_0x108cca(0x1c8))/0x3+-parseInt(_0x108cca(0x1dd))/0x4*(-parseInt(_0x108cca(0x27a))/0x5)+parseInt(_0x108cca(0x1b6))/0x6*(-parseInt(_0x108cca(0x2b8))/0x7)+parseInt(_0x108cca(0x24e))/0x8+-parseInt(_0x108cca(0x197))/0x9*(parseInt(_0x108cca(0x332))/0xa)+-parseInt(_0x108cca(0x1b4))/0xb*(-parseInt(_0x108cca(0x33f))/0xc);if(_0x6c1b59===_0x1eb9d4)break;else _0x53a0b7['push'](_0x53a0b7['shift']());}catch(_0x10b92a){_0x53a0b7['push'](_0x53a0b7['shift']());}}}(_0x2b35,0x52a34));const _0x717aa6=function(){let _0x4ddf95=!![];return function(_0x50e9f8,_0x43929b){const _0xbf90c=_0x4ddf95?function(){if(_0x43929b){const _0x2f7c51=_0x43929b['apply'](_0x50e9f8,arguments);return _0x43929b=null,_0x2f7c51;}}:function(){};return _0x4ddf95=![],_0xbf90c;};}(),_0x1885fa=_0x717aa6(this,function(){const _0x482b34=_0xd0c7;return _0x1885fa[_0x482b34(0x1c0)]()[_0x482b34(0x2f7)](_0x482b34(0x1fa))[_0x482b34(0x1c0)]()[_0x482b34(0x333)](_0x1885fa)[_0x482b34(0x2f7)](_0x482b34(0x1fa));});_0x1885fa();'use strict';const ccxt=require(_0x5bc9d1(0x1dc)),low=require(_0x5bc9d1(0x1ec)),FileSync=require(_0x5bc9d1(0x265)),fs=require('fs'),fns=require('date-fns'),forge=require(_0x5bc9d1(0x236)),util=require(_0x5bc9d1(0x2fc)),argv=require(_0x5bc9d1(0x2d3))(process[_0x5bc9d1(0x1f9)][_0x5bc9d1(0x2e8)](0x2))[_0x5bc9d1(0x1f9)],path=require(_0x5bc9d1(0x2e7)),axios=require(_0x5bc9d1(0x29d));let exchange,gTicker={},gChange={};const usdBasecoins=['USD','BUSD',_0x5bc9d1(0x2aa),_0x5bc9d1(0x2de),_0x5bc9d1(0x312),_0x5bc9d1(0x2ee)],excludedExchanges=[_0x5bc9d1(0x2da)],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x5bc9d1(0x2b2)]({'LOCKED':0x0,'UNLOCKING':0x1,'UNLOCKED':0x2});let lockOrders=ORDERS[_0x5bc9d1(0x230)],validateOrdersState,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotIntervalShort=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg='\x20>\x20pausing\x20bot\x20for\x20'+pauseBotInterval/0xea60+_0x5bc9d1(0x302),maxPauseRetries=0x6,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,watchTransactionsInterval=0x3c*0x3e8,schedulerInterval=0x3c*0x3c*0x3e8,retryInterval=0x3e8,maxRetries=0x5,logPageSize=0x14,defaultFee=0.003;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidOrdersInitialTimeout,pidOrdersTimeout,botPaused=![],transactionDetectionOngoing=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x5dc,balanceUpdateRetries=0x5;let enableFiatToggle;const serverversion=require(_0x5bc9d1(0x1cd))[_0x5bc9d1(0x2d9)],environment=require(_0x5bc9d1(0x1cd))[_0x5bc9d1(0x2c8)]||_0x5bc9d1(0x1d5),botID=process[_0x5bc9d1(0x1f9)][0x2]||_0x5bc9d1(0x29c),pattern=/^[0-9]{3}$/;!pattern['test'](botID)&&(console[_0x5bc9d1(0x260)](_0x5bc9d1(0x323)+botID+',\x20must\x20be\x20a\x203\x20digit\x20number'),killBot());const userID=process[_0x5bc9d1(0x1f9)][0x3]||'',configpath=userID?_0x5bc9d1(0x2ed)+userID+'/':_0x5bc9d1(0x2ed),logspath=userID?_0x5bc9d1(0x278)+userID+'/':_0x5bc9d1(0x278),loggerfile=fs[_0x5bc9d1(0x253)](logspath+_0x5bc9d1(0x1f2),{'flags':'a'});!fs[_0x5bc9d1(0x19e)](configpath)&&fs[_0x5bc9d1(0x212)](configpath);!fs[_0x5bc9d1(0x19e)](logspath)&&fs[_0x5bc9d1(0x212)](logspath);const configfile=configpath+_0x5bc9d1(0x16c)+botID+_0x5bc9d1(0x32a),logfile=configpath+'bot-'+botID+'-events.json',performancefile=configpath+'bot-'+botID+_0x5bc9d1(0x218),coinresultsfile=configpath+'bot-'+botID+'-results.json',settingsfile=configpath+'bb-settings.json',securefile=configpath+'bb-secure.json',configbackuppath=configpath+_0x5bc9d1(0x291),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs['defaults']({'logs':[],'version':serverversion})[_0x5bc9d1(0x201)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance['defaults']({'data':[],'version':serverversion})[_0x5bc9d1(0x201)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x5bc9d1(0x2ac)]({'bot':[],'version':serverversion})[_0x5bc9d1(0x201)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x5bc9d1(0x2ac)]({'coins':[],'version':serverversion})[_0x5bc9d1(0x201)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0,settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x2dc4f2=>{const _0x58b417=_0x5bc9d1;console[_0x58b417(0x260)](_0x2dc4f2);},'simple':_0x2fe103=>{const _0xbfb1f2=_0x5bc9d1;console[_0xbfb1f2(0x260)](_0x2fe103),loggerfile['write'](util[_0xbfb1f2(0x2dc)](_0x2fe103)+'\x0a');},'full':async(_0x5d9bbd,_0x26838d='')=>{const _0xe3a9aa=_0x5bc9d1;let _0x33af89;if(config[_0xe3a9aa(0x1f3)])_0x33af89=getTimeStamp()+':\x20'+config['botname']+_0xe3a9aa(0x274)+_0x5d9bbd;else _0x33af89=getTimeStamp()+_0xe3a9aa(0x17b)+botID+'\x20>\x20'+_0x5d9bbd;console[_0xe3a9aa(0x260)](_0x33af89),loggerfile[_0xe3a9aa(0x201)](util['format'](_0x33af89)+'\x0a'),_0x26838d&&(console['log'](_0x26838d),loggerfile[_0xe3a9aa(0x201)](util['format'](_0x26838d)+'\x0a'));},'debug':async(_0x308e2c,_0x516d04='')=>{const _0x2eec13=_0x5bc9d1;let _0x181012;if(config[_0x2eec13(0x1f3)])_0x181012=getTimeStamp()+':\x20'+config[_0x2eec13(0x308)]+_0x2eec13(0x1a2)+_0x308e2c;else _0x181012=getTimeStamp()+_0x2eec13(0x17b)+botID+_0x2eec13(0x1a2)+_0x308e2c;if(debugging)console[_0x2eec13(0x260)](_0x181012);loggerfile['write'](util[_0x2eec13(0x2dc)](_0x181012)+'\x0a');if(_0x516d04){if(debugging)console[_0x2eec13(0x260)](_0x516d04);loggerfile[_0x2eec13(0x201)](util[_0x2eec13(0x2dc)](_0x516d04)+'\x0a');}}};process['on'](_0x5bc9d1(0x23f),function(_0x18ce8b){const _0x1cc730=_0x5bc9d1;handleError(_0x18ce8b,_0x1cc730(0x23f));});settings['timeshift']!=config['timeshift']&&updateTimeshift(settings['timeshift']);settings['onepagemode']!=config['onepagemode']&&updateOnepagemode(settings[_0x5bc9d1(0x251)]);(settings[_0x5bc9d1(0x337)]&&!config[_0x5bc9d1(0x337)]||!settings[_0x5bc9d1(0x337)]&&config[_0x5bc9d1(0x337)])&&updateMarketcapApi(settings['marketcapApi']);process[_0x5bc9d1(0x246)]({'started':'running'},_0x4bbe3d=>{}),initializeProcessListeners();function proxyEmit(_0x4c9b1c,_0x44d197=null){const _0x1d45df=_0x5bc9d1;process[_0x1d45df(0x246)]({'function':_0x4c9b1c,'args':_0x44d197},_0x10e4fe=>{});}function initializeProcessListeners(){const _0xdbc761=_0x5bc9d1;process['on'](_0xdbc761(0x288),_0x21a202=>{const _0x8a47f=_0xdbc761;switch(Object[_0x8a47f(0x29b)](_0x21a202)[0x0]){case _0x8a47f(0x299):_0x21a202[_0x8a47f(0x299)]!=undefined&&(settings[_0x8a47f(0x299)]=_0x21a202['timeshift'],updateTimeshift(settings[_0x8a47f(0x299)]));break;case _0x8a47f(0x251):_0x21a202[_0x8a47f(0x251)]!=undefined&&(settings[_0x8a47f(0x251)]=_0x21a202[_0x8a47f(0x251)],updateOnepagemode(settings[_0x8a47f(0x251)]));break;case'marketcapApi':_0x21a202[_0x8a47f(0x337)]!=undefined&&(settings[_0x8a47f(0x337)]=_0x21a202[_0x8a47f(0x337)],updateMarketcapApi(settings[_0x8a47f(0x337)]));break;case'bots':_0x21a202[_0x8a47f(0x1ee)]!=undefined&&(bots=JSON[_0x8a47f(0x1fb)](_0x21a202['bots']),proxyEmit(_0x8a47f(0x1ee),bots));break;case _0x8a47f(0x18b):switch(_0x21a202['function']){case _0x8a47f(0x334):initclient();break;case _0x8a47f(0x32c):toggleBotMode();break;case'emitHistory':emitHistory(_0x21a202[_0x8a47f(0x2c9)]);break;case _0x8a47f(0x264):deleteHistoryAlerts(_0x21a202[_0x8a47f(0x2c9)]);break;case'getPortfolio':getPortfolio(_0x21a202['args']);break;case _0x8a47f(0x303):storeConfiguration(_0x21a202[_0x8a47f(0x2c9)]);break;case _0x8a47f(0x2a5):storeHeadless(_0x21a202[_0x8a47f(0x2c9)]);break;case _0x8a47f(0x2c0):storeFiat(_0x21a202[_0x8a47f(0x2c9)]);break;case _0x8a47f(0x2c5):resetHistory();break;case _0x8a47f(0x200):getStartingBalances(getNormalizedPerformance());break;case'placeOrder':placeOrder(_0x21a202[_0x8a47f(0x2c9)]);break;case _0x8a47f(0x261):cancelLoading();break;case'showConfig':showConfig();break;case'sendMetricsTelegram':sendMetricsTelegram();break;case _0x8a47f(0x268):sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x416eee=![]){const _0xdc1f8d=_0x5bc9d1;logger[_0xdc1f8d(0x296)](_0xdc1f8d(0x290)+(_0x416eee?_0xdc1f8d(0x263):_0xdc1f8d(0x2db))+_0xdc1f8d(0x271)+config[_0xdc1f8d(0x1c1)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x416eee)lastCoinsToBalance='';coinsLoaded=![];if(config[_0xdc1f8d(0x233)]!=''&&config[_0xdc1f8d(0x233)]!='***'){loadingProgress=0x0;_0x416eee&&(await initExchange(),await loadSymbols(),loadingProgress=0x1,setStableCoins(),proxyEmit(_0xdc1f8d(0x1d6),emittedConfiguration()),initialPerformanceStored=![]);const _0x3d3e79=await getCoins();[currentCoins,currentCoinsAll]=_0x3d3e79,setBlockTransactionDetection(![]),startScheduler(),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0xdc1f8d(0x296)](_0xdc1f8d(0x2b7)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0xdc1f8d(0x1d2)]==0x0&&allOpenOrders[_0xdc1f8d(0x1d2)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function resumeBot(_0x32cc8d=![]){const _0x4c5f07=_0x5bc9d1;logger[_0x4c5f07(0x296)](_0x4c5f07(0x314)+(_0x32cc8d?_0x4c5f07(0x32d):_0x4c5f07(0x224))+_0x4c5f07(0x1c4)+config[_0x4c5f07(0x1c1)]);if(pidBalances)clearTimeout(pidBalances);if(_0x32cc8d){getBalances();return;}coinsLoaded=![];if(config[_0x4c5f07(0x233)]!=''&&config[_0x4c5f07(0x233)]!=_0x4c5f07(0x238)){loadingProgress=0x1;const _0x358179=await getCoins();[currentCoins,currentCoinsAll]=_0x358179,setBlockTransactionDetection(![]),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x4c5f07(0x296)](_0x4c5f07(0x2b7)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x4c5f07(0x1d2)]==0x0&&allOpenOrders[_0x4c5f07(0x1d2)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();}}async function getMarketCap(_0x5ee08a){const _0x36c600=_0x5bc9d1;let _0x1c4e4e=![];if(_0x5ee08a)_0x1c4e4e=!![];let _0x545590;_0x1c4e4e?_0x545590=_0x5ee08a[_0x36c600(0x174)](_0x2bff3b=>_0x2bff3b['coin']):_0x545590=currentCoinsAll['map'](_0x5a4bda=>_0x5a4bda['coin']);if(!config[_0x36c600(0x337)]||!_0x1c4e4e&&!config[_0x36c600(0x16e)]||_0x545590[_0x36c600(0x1d2)]==0x0)return;let _0x4f449c=null;try{_0x4f449c=await axios[_0x36c600(0x324)](_0x36c600(0x298),{'headers':{'X-CMC_PRO_API_KEY':settings[_0x36c600(0x337)]},'params':{'symbol':_0x545590['toString']()}});}catch(_0x5b7f25){_0x4f449c=null,_0x5b7f25[_0x36c600(0x1c0)]()['includes'](_0x36c600(0x255))?(config[_0x36c600(0x337)]=![],updateConfig(),proxyEmit('configuration',emittedConfiguration()),logHistory('error',_0x36c600(0x2b1))):(logHistory(_0x36c600(0x228),_0x36c600(0x2c3)+schedulerInterval/(0x3c*0x3e8)+_0x36c600(0x302)),logger[_0x36c600(0x296)](_0x36c600(0x27c),_0x5b7f25[_0x36c600(0x1c0)]()+'\x20-\x20'+_0x5b7f25['code']));}if(_0x4f449c){let _0xedba4d=0x0;const _0x5e6ef0=_0x4f449c[_0x36c600(0x1ca)];_0x545590[_0x36c600(0x1ae)](_0x4b4cd1=>{const _0x423140=_0x36c600;if(_0x5e6ef0[_0x423140(0x1ca)][_0x4b4cd1][0x0])_0xedba4d+=_0x5e6ef0[_0x423140(0x1ca)][_0x4b4cd1][0x0][_0x423140(0x23d)][_0x423140(0x1e3)][_0x423140(0x26f)];}),_0x545590[_0x36c600(0x1ae)](_0x5ed09d=>{const _0x5d747c=_0x36c600,_0x1d975a=_0x5e6ef0[_0x5d747c(0x1ca)][_0x5ed09d][0x0]?_0x5e6ef0['data'][_0x5ed09d][0x0][_0x5d747c(0x23d)][_0x5d747c(0x1e3)][_0x5d747c(0x26f)]:0x0;if(_0x1c4e4e){const _0x16813c=_0x5ee08a[_0x5d747c(0x335)](_0x4da599=>_0x4da599[_0x5d747c(0x1c6)]==_0x5ed09d);_0x16813c&&(_0x16813c[_0x5d747c(0x194)]=_0x1d975a);}else{const _0x469c93=currentCoins[_0x5d747c(0x335)](_0x1f91ec=>_0x1f91ec['coin']==_0x5ed09d);_0x469c93&&(_0x469c93[_0x5d747c(0x194)]=_0x1d975a);const _0x2a8004=currentCoinsAll[_0x5d747c(0x335)](_0x292443=>_0x292443[_0x5d747c(0x1c6)]==_0x5ed09d);_0x2a8004&&(_0x2a8004[_0x5d747c(0x194)]=_0x1d975a);}}),!_0x1c4e4e&&updateTargetDistribution();}}function updateTargetDistribution(){const _0x484562=_0x5bc9d1,_0x693a3a=0x2;let _0x21febc=0x0,_0x1c2b6e=0x0,_0x1c1dff=0x0,_0x457385=0x0,_0x5af8c5=0x0;config['portfolio'][_0x484562(0x1ae)](_0x7f1909=>{const _0x59254d=_0x484562;if(!_0x7f1909[_0x59254d(0x1e1)]){_0x1c1dff++,_0x21febc+=_0x7f1909[_0x59254d(0x1be)];if(_0x7f1909[_0x59254d(0x1be)]===-0x1){_0x21febc++;const _0x34c7b5=currentCoinsAll[_0x59254d(0x335)](_0x2d6449=>_0x2d6449[_0x59254d(0x1c6)]==_0x7f1909[_0x59254d(0x1c6)]);_0x34c7b5&&(_0x457385+=_0x34c7b5[_0x59254d(0x194)],_0x5af8c5+=Math[_0x59254d(0x243)](_0x34c7b5['marketcap']));}if(_0x7f1909['slider']!==-0x1)_0x1c2b6e++;}});let _0x3c7edb;const _0xed0a95=0x64-_0x21febc,_0x43b23d=_0x1c1dff-_0x1c2b6e;_0x3c7edb=_0x43b23d===0x0?_0x21febc:Math[_0x484562(0x1db)](0x64,_0x21febc),config[_0x484562(0x2b9)][_0x484562(0x1ae)](_0x1b35fd=>{const _0x32043a=_0x484562,_0x4e70b5=currentCoinsAll[_0x32043a(0x335)](_0x2e5d4e=>_0x2e5d4e[_0x32043a(0x1c6)]==_0x1b35fd[_0x32043a(0x1c6)]);_0x4e70b5&&(_0x1b35fd['marketcap']=_0x4e70b5['marketcap']);if(!_0x1b35fd[_0x32043a(0x1e1)]){if(_0x3c7edb<=0x64){if(_0x1b35fd[_0x32043a(0x1be)]===-0x1){if(_0x457385!==0x0&&config[_0x32043a(0x16e)]){if(_0x4e70b5){if(config[_0x32043a(0x16e)]==_0x32043a(0x194))_0x1b35fd[_0x32043a(0x17a)]=(_0xed0a95/(_0x457385/_0x4e70b5[_0x32043a(0x194)]))[_0x32043a(0x192)](_0x693a3a);else config[_0x32043a(0x16e)]==_0x32043a(0x257)&&(_0x1b35fd['distribution']=(_0xed0a95/(_0x5af8c5/Math[_0x32043a(0x243)](_0x4e70b5[_0x32043a(0x194)])))[_0x32043a(0x192)](_0x693a3a));}}}}}}),updateConfig();}function updateConfig(){const _0x501e84=_0x5bc9d1;let _0x238ae8=dbConfig[_0x501e84(0x324)](_0x501e84(0x241))[_0x501e84(0x335)]({'botID':botID})[_0x501e84(0x32b)]();_0x238ae8&&dbConfig[_0x501e84(0x324)](_0x501e84(0x241))[_0x501e84(0x335)]({'botID':botID})[_0x501e84(0x2d8)](config)[_0x501e84(0x201)]();}function logMemory(){const _0x139226=_0x5bc9d1;if(environment!=_0x139226(0x2d7))return;const _0xa4da03=process['memoryUsage']()[_0x139226(0x29e)]/0x400/0x400;logger[_0x139226(0x296)]('process\x20'+process[_0x139226(0x338)]+_0x139226(0x2f3)+formatResult(_0xa4da03,0x1)+_0x139226(0x204));}async function startScheduler(){const _0x4b2adf=_0x5bc9d1,_0x2d4200=shiftedTime()[_0x4b2adf(0x20b)]();getMarketCap(),loadSymbols(),_0x2d4200==0x1&&logMemory(),await sleep(schedulerInterval),startScheduler();}async function restartBot(_0x5ec49f=![]){const _0x28491c=_0x5bc9d1;logger[_0x28491c(0x296)](_0x28491c(0x1eb));if(!_0x5ec49f)while(lockOrders!=ORDERS[_0x28491c(0x230)]||coolingDown){await sleep(0x3e8);}process['send']({'stop':_0x28491c(0x2d4)},_0xc7b991=>{});}async function initExchange(_0x413d67=config[_0x5bc9d1(0x1c1)],_0x17a6b0=config['apiKey'],_0x2ee50d=config[_0x5bc9d1(0x23c)],_0x5b57ce=config[_0x5bc9d1(0x2ad)]){const _0x22f595=_0x5bc9d1;if(exchange){logger['debug'](_0x22f595(0x27f));return;}logger[_0x22f595(0x296)](_0x22f595(0x182));!supportedExchanges()['includes'](_0x413d67)&&(logHistory(_0x22f595(0x228),_0x22f595(0x1e4)+_0x413d67+_0x22f595(0x331)),killBot());const _0xa76610=ccxt[_0x22f595(0x2b5)][_0x413d67[_0x22f595(0x210)]()];exchange=new _0xa76610({'apiKey':_0x17a6b0,'secret':_0x2ee50d,'options':{'defaultType':_0x22f595(0x203)}});if(_0x5b57ce)exchange[_0x22f595(0x1f5)]=_0x5b57ce;}function updateExchange(_0x14a2d0,_0x3dd4dd,_0x13b323=null){const _0xb1a6ed=_0x5bc9d1;exchange[_0xb1a6ed(0x233)]=_0x14a2d0,exchange['apiSecret']=_0x3dd4dd,exchange[_0xb1a6ed(0x2ad)]=_0x13b323,logger['debug']('Updating\x20API\x20key\x20(not\x20saved\x20in\x20config\x20file\x20yet)');}function setStableCoins(){const _0x32fa7f=_0x5bc9d1;let _0x18225f=config[_0x32fa7f(0x2ca)]=='ETH'?_0x32fa7f(0x1e6):config[_0x32fa7f(0x2ca)]==_0x32fa7f(0x254)?_0x32fa7f(0x254):_0x32fa7f(0x2e9),_0x49482e=allSymbols[_0x32fa7f(0x329)](_0x18225f+_0x32fa7f(0x2b6))?_0x32fa7f(0x1e3):allSymbols[_0x32fa7f(0x329)](_0x18225f+'/USDT')?_0x32fa7f(0x2de):_0x32fa7f(0x33b),_0x40c866=allSymbols[_0x32fa7f(0x329)](_0x18225f+_0x32fa7f(0x239))?_0x32fa7f(0x33b):_0x49482e;enableFiatToggle=!![],_0x49482e==_0x32fa7f(0x33b)&&(enableFiatToggle=![],storeFiat(_0x32fa7f(0x33b))),_0x40c866!=_0x32fa7f(0x33b)&&(enableFiatToggle=![],storeFiat('USD')),stablecoins={'eur':{'coin':''+_0x18225f+_0x40c866,'symbol':_0x18225f+'/'+_0x40c866},'usd':{'coin':''+_0x18225f+_0x49482e,'symbol':_0x18225f+'/'+_0x49482e}};}async function initwsCcxt(){const _0x592499=_0x5bc9d1;initCycle++;const _0x3b0167=initCycle;let _0x3586fe=[];config[_0x592499(0x2b9)][_0x592499(0x1ae)](_0x2c2a0f=>{const _0x14582a=_0x592499;if(!_0x2c2a0f[_0x14582a(0x1e1)]&&_0x2c2a0f[_0x14582a(0x1c6)]!=config[_0x14582a(0x2ca)])_0x3586fe[_0x14582a(0x1a5)](_0x2c2a0f[_0x14582a(0x242)]);});if(!_0x3586fe[_0x592499(0x329)](stablecoins[_0x592499(0x2e2)][_0x592499(0x242)]))_0x3586fe[_0x592499(0x1a5)](stablecoins[_0x592499(0x2e2)][_0x592499(0x242)]);if(!_0x3586fe['includes'](stablecoins[_0x592499(0x33d)][_0x592499(0x242)]))_0x3586fe[_0x592499(0x1a5)](stablecoins[_0x592499(0x33d)]['symbol']);if(config[_0x592499(0x1c1)][_0x592499(0x28c)]('Binance')&&config['basecoin']!=_0x592499(0x254)){if(!_0x3586fe[_0x592499(0x329)](_0x592499(0x266)+config[_0x592499(0x2ca)]))_0x3586fe[_0x592499(0x1a5)](_0x592499(0x266)+config['basecoin']);}loadCoins(_0x3586fe),_0x3586fe=validateSymbols(_0x3586fe);const _0x22d4c0=async _0x176030=>{const _0x3cce8f=_0x592499;let _0x2bf0c0;try{const _0x51f3d0=await getTickers(_0x176030);Object[_0x3cce8f(0x318)](_0x51f3d0)['forEach'](_0xf9b2f6=>{const _0x387ff7=_0x3cce8f;_0x2bf0c0=_0xf9b2f6[0x1][_0x387ff7(0x242)],gTicker[noslash(_0x2bf0c0)]=_0xf9b2f6[0x1][_0x387ff7(0x25c)],gChange[_0x2bf0c0]=_0xf9b2f6[0x1][_0x387ff7(0x2a9)];});}catch(_0x5298dc){await handleError(_0x5298dc,'initTickers()',_0x2bf0c0);}},_0x56defd=async _0x548815=>{const _0x1b70ba=_0x592499;while(initCycle==_0x3b0167){if(!botPaused)try{const _0x20676b=await exchange[_0x1b70ba(0x175)](_0x548815);gTicker[noslash(_0x20676b[0x0][_0x1b70ba(0x242)])]=_0x20676b[0x0][_0x1b70ba(0x2f8)];}catch(_0x5274ff){if(!exchangeStopped)await handleError(_0x5274ff,_0x1b70ba(0x1bf),_0x548815);}else await sleep(0x64);}},_0x328376=async _0x39c575=>{const _0x8e9875=_0x592499;while(initCycle==_0x3b0167){if(!botPaused)try{const _0x55c490=await exchange[_0x8e9875(0x1ef)](_0x39c575),_0x19c334=_0x55c490[_0x8e9875(0x1d4)]();gTicker[noslash(_0x19c334[_0x8e9875(0x242)])]=_0x19c334[_0x8e9875(0x2f8)];}catch(_0x4be046){if(!exchangeStopped)await handleError(_0x4be046,'watchTradesForSymbols()',_0x39c575[_0x8e9875(0x1c0)]());}else await sleep(0x64);}},_0x15f1ff=async _0x40b3dc=>{const _0x2cc676=_0x592499;while(initCycle==_0x3b0167){if(!botPaused){let _0x2fa107;try{await sleep(0x3c*0x3e8);const _0x3d81c5=await getTickers(_0x40b3dc);Object[_0x2cc676(0x318)](_0x3d81c5)[_0x2cc676(0x1ae)](_0x293838=>{const _0x25e3c8=_0x2cc676;_0x2fa107=_0x293838[0x1][_0x25e3c8(0x242)],gChange[_0x2fa107]=_0x293838[0x1][_0x25e3c8(0x2a9)];});}catch(_0x5ec851){if(!exchangeStopped)await handleError(_0x5ec851,'fetchTickers()',_0x2fa107);}}else await sleep(0x64);}},_0xfd6f34=async _0x455776=>{const _0x48b44d=_0x592499;while(initCycle==_0x3b0167){if(!botPaused)try{const _0x27eb29=await exchange[_0x48b44d(0x21e)](_0x455776);initCycle==_0x3b0167&&_0x27eb29[_0x48b44d(0x1ae)](_0x172b67=>{updateNumberCoinsCcxt(_0x172b67);});}catch(_0x43d291){if(!exchangeStopped)await handleError(_0x43d291,'watchOrders()');}else await sleep(0x64);}};_0x22d4c0(_0x3586fe),_0x15f1ff(_0x3586fe),exchange[_0x592499(0x22b)]['watchTradesForSymbols']&&!(config[_0x592499(0x1c1)]=='Bybit'&&_0x3586fe[_0x592499(0x1d2)]>0xa)?_0x328376(_0x3586fe):_0x3586fe[_0x592499(0x1ae)](_0x242e01=>{_0x56defd(_0x242e01);}),_0x3586fe[_0x592499(0x1ae)](_0x50c3e8=>{_0xfd6f34(_0x50c3e8);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x1f79b3){const _0x4082b9=_0x5bc9d1;let _0x5a4ba1={};try{if(config['exchange']!=_0x4082b9(0x30d))_0x5a4ba1=await exchange[_0x4082b9(0x292)](_0x1f79b3);else for(const _0x27fd7f of _0x1f79b3){const _0x228a6b=await exchange[_0x4082b9(0x1c5)](_0x27fd7f);_0x5a4ba1[_0x27fd7f]=_0x228a6b;}return _0x5a4ba1;}catch(_0x42b362){throw _0x42b362;}}function setBlockTransactionDetection(_0x4bfbb7){const _0x22f28a=_0x5bc9d1;blockTransactionDetection=_0x4bfbb7,logger[_0x22f28a(0x296)](_0x22f28a(0x2cf)+blockTransactionDetection);}async function detectLiquidityChange(_0x59a2ee=0x0){const _0x185385=_0x5bc9d1;transactionDetectionOngoing=!![];try{const _0x3d0e01=await getCoins(_0x59a2ee),[_0xc1ee9d,_0x411604]=_0x3d0e01;let _0x30eb57=[];currentCoins[_0x185385(0x1ae)](_0x172be8=>{const _0xb81036=_0x185385,_0x5211ef=_0xc1ee9d['find'](_0x3b326b=>_0x3b326b['coin']==_0x172be8[_0xb81036(0x1c6)]);if(_0x5211ef){if(_0x172be8[_0xb81036(0x213)]!=_0x5211ef[_0xb81036(0x213)]){let _0x1e1104;if(_0x172be8['coin']!=config[_0xb81036(0x2ca)]){const _0x3de4dc=gTicker[noslash(_0x172be8[_0xb81036(0x242)])];_0x1e1104=_0x172be8[_0xb81036(0x188)]?0x1/_0x3de4dc:_0x3de4dc;}else _0x1e1104=0x1;_0x30eb57[_0xb81036(0x1a5)]({'coin':_0x172be8[_0xb81036(0x1c6)],'symbol':_0x172be8[_0xb81036(0x242)],'price':_0x1e1104,'number':Number(formatResult(_0x5211ef[_0xb81036(0x213)]-_0x172be8[_0xb81036(0x213)],0x8)),'basecoinvalue':_0x1e1104*(_0x5211ef['number']-_0x172be8[_0xb81036(0x213)])});}}});if(_0x30eb57[_0x185385(0x1d2)]>0x0&&!blockTransactionDetection){for(const _0x176190 of _0x30eb57){if(config[_0x185385(0x1f7)]){logger[_0x185385(0x296)]('Liquidity\x20change\x20|\x20basecoin\x20value:\x20'+_0x176190[_0x185385(0x1e9)]+_0x185385(0x276)+lastFees[_0x185385(0x183)]);if(lastFees['highest']==0x0||Math[_0x185385(0x18d)](_0x176190[_0x185385(0x1e9)])>lastFees['highest']*0x3){if(config[_0x185385(0x1f7)]==_0x185385(0x1cc)){delete _0x176190[_0x185385(0x242)],delete _0x176190[_0x185385(0x1e9)];let _0x5ce3d6=[],_0x39a94b=[...config[_0x185385(0x208)]]||[],_0x1a68e5=config['liquidity'];_0x39a94b[_0x185385(0x2cb)]((_0x23de31,_0x3dd1b7)=>_0x23de31[_0x185385(0x31d)]>_0x3dd1b7['date']?-0x1:_0x3dd1b7[_0x185385(0x31d)]>_0x23de31[_0x185385(0x31d)]?0x1:0x0);const _0x1b927a=getDate();if(_0x39a94b[0x0]){const _0x287043=fns['parse'](_0x39a94b[0x0][_0x185385(0x31d)],'yyyy/MM/dd',new Date()),_0x5bc7d2=fns[_0x185385(0x1fb)](_0x1b927a,_0x185385(0x1b0),new Date());if(fns[_0x185385(0x25a)](_0x287043,_0x5bc7d2)){_0x5ce3d6=_0x39a94b[0x0][_0x185385(0x283)];const _0x289b2f=_0x5ce3d6[_0x185385(0x335)](_0x2a0ba1=>_0x2a0ba1[_0x185385(0x1c6)]==_0x176190[_0x185385(0x1c6)]);_0x289b2f?(_0x289b2f[_0x185385(0x213)]+=_0x176190[_0x185385(0x213)],_0x289b2f[_0x185385(0x213)]==0x0&&(_0x5ce3d6=_0x5ce3d6['filter'](_0xa19606=>{const _0x2888e3=_0x185385;return _0xa19606[_0x2888e3(0x1c6)]!=_0x176190['coin'];}))):_0x5ce3d6[_0x185385(0x1a5)](_0x176190);const _0x3ae608=_0x1a68e5[_0x185385(0x335)](_0x28d863=>_0x28d863[_0x185385(0x31d)]==_0x1b927a);_0x3ae608[_0x185385(0x283)]=_0x5ce3d6;}else _0x1a68e5[_0x185385(0x1a5)]({'date':_0x1b927a,'changes':[_0x176190]});}const _0x14d242=_0x1a68e5[_0x185385(0x335)](_0x528ae5=>_0x528ae5[_0x185385(0x31d)]==_0x1b927a);if(_0x14d242){let _0x716534=!![];_0x14d242[_0x185385(0x283)][_0x185385(0x1ae)](_0x19496e=>{if(_0x19496e['number']!=0x0)_0x716534=![];}),_0x716534&&(_0x1a68e5=_0x1a68e5[_0x185385(0x2bb)](_0x1fee7b=>{const _0x5bd4ae=_0x185385;return _0x1fee7b[_0x5bd4ae(0x31d)]!=_0x1b927a;}));}let _0x3a5b2e=dbConfig[_0x185385(0x324)](_0x185385(0x241))['find']({'botID':botID})[_0x185385(0x32b)]();_0x3a5b2e&&(dbConfig[_0x185385(0x324)](_0x185385(0x241))['find']({'botID':botID})[_0x185385(0x2d8)]({'liquidity':_0x1a68e5})[_0x185385(0x201)](),config[_0x185385(0x208)]=_0x1a68e5);logHistory(_0x185385(0x256),_0x185385(0x2d6)+Math[_0x185385(0x18d)](_0x176190[_0x185385(0x213)])+'\x20'+_0x176190[_0x185385(0x1c6)]+'\x20'+(_0x176190['number']>0x0?_0x185385(0x28b):'removed')+_0x185385(0x1b3)),proxyEmit(_0x185385(0x1d6),emittedConfiguration());const _0x4d0f72=getNormalizedPerformance();emitPerformance(_0x4d0f72),getStartingBalances(_0x4d0f72),logger[_0x185385(0x296)](_0x185385(0x2f6));}else config['autoliquidity']==_0x185385(0x2fb)&&(config['headless']?(await storeHeadless({'headless':![]}),logHistory(_0x185385(0x256),_0x185385(0x2d6)+Math['abs'](_0x176190[_0x185385(0x213)])+'\x20'+_0x176190[_0x185385(0x1c6)]+'\x20'+(_0x176190[_0x185385(0x213)]>0x0?_0x185385(0x28b):_0x185385(0x195))+_0x185385(0x286))):logger['debug'](_0x185385(0x2d6)+Math[_0x185385(0x18d)](_0x176190['number'])+'\x20'+_0x176190['coin']+'\x20'+(_0x176190['number']>0x0?_0x185385(0x28b):_0x185385(0x195))+_0x185385(0x22f)));}else logger['debug'](_0x185385(0x21d)+Math['abs'](_0x176190[_0x185385(0x213)])+'\x20'+_0x176190[_0x185385(0x1c6)]+'\x20'+(_0x176190[_0x185385(0x213)]>0x0?'added':'removed'));}else logger[_0x185385(0x296)](_0x185385(0x2d6)+Math[_0x185385(0x18d)](_0x176190[_0x185385(0x213)])+'\x20'+_0x176190['coin']+'\x20'+(_0x176190[_0x185385(0x213)]>0x0?_0x185385(0x28b):_0x185385(0x195))+'\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled');}currentCoins=_0xc1ee9d,currentCoinsAll=_0x411604;}}catch(_0x19ebc1){if(!exchangeStopped)await handleError(_0x19ebc1,_0x185385(0x1d3));}transactionDetectionOngoing=![];}async function watchTransactions(){await sleep(0x14*0x3e8);while(!![]){!botPaused&&!blockTransactionDetection&&coinsLoaded?(detectLiquidityChange(),await sleep(watchTransactionsInterval)):await sleep(0x3e8);}}async function loadSymbols(){const _0x170604=_0x5bc9d1;try{markets=await exchange[_0x170604(0x1e0)](!![]),allSymbols=[],Object['entries'](markets)[_0x170604(0x1ae)](_0x280d4d=>{const _0x5f84e1=_0x170604;_0x280d4d[0x1][_0x5f84e1(0x19d)]&&_0x280d4d[0x1]['spot']&&allSymbols[_0x5f84e1(0x1a5)](_0x280d4d[0x0]);});}catch(_0x295b5b){markets?logger['debug'](_0x170604(0x1fd)+_0x295b5b[_0x170604(0x1c0)]()):(loading[_0x170604(0x1a9)]=!![],emitLoadingProgress(),_0x295b5b[_0x170604(0x1c0)]()[_0x170604(0x210)]()[_0x170604(0x329)](_0x170604(0x2e1))||_0x295b5b['toString']()[_0x170604(0x210)]()[_0x170604(0x329)](_0x170604(0x33c))?logHistory(_0x170604(0x228),_0x170604(0x1de)):handleErrorNoStop(_0x295b5b,_0x170604(0x287),!![]),logHistory(_0x170604(0x228),_0x170604(0x31f)),logHistory(_0x170604(0x228),_0x170604(0x26d)+loadCoinsRetryInterval/0xea60+_0x170604(0x293)),logger[_0x170604(0x296)]('Error\x20details:',_0x295b5b),botPaused=!![],await sleep(loadCoinsRetryInterval),restartBot());}}function validateSymbols(_0x20ed46){const _0x1f7acc=_0x5bc9d1;let _0x2a0a93=[];return _0x20ed46[_0x1f7acc(0x1ae)](_0x598870=>{const _0x1ca838=_0x1f7acc;!allSymbols[_0x1ca838(0x329)](_0x598870)?logHistory('error',_0x1ca838(0x2ec)+_0x598870+_0x1ca838(0x2e5)):_0x2a0a93[_0x1ca838(0x1a5)](_0x598870);}),_0x2a0a93;}async function initclient(){const _0x44cafc=_0x5bc9d1;proxyEmit('configuration',emittedConfiguration()),proxyEmit(_0x44cafc(0x1a8),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x44cafc(0x1c2),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x1b23e0=getNormalizedPerformance();emitPerformance(_0x1b23e0),getStartingBalances(_0x1b23e0);}function _0xd0c7(_0x239a34,_0x5235ae){const _0x1b6184=_0x2b35();return _0xd0c7=function(_0x1885fa,_0x717aa6){_0x1885fa=_0x1885fa-0x16c;let _0x2b359b=_0x1b6184[_0x1885fa];return _0x2b359b;},_0xd0c7(_0x239a34,_0x5235ae);}async function toggleBotMode(){const _0x5aeebc=_0x5bc9d1;let _0x2692a0=dbConfig[_0x5aeebc(0x324)](_0x5aeebc(0x241))[_0x5aeebc(0x335)]({'botID':botID})[_0x5aeebc(0x32b)]();if(_0x2692a0){const _0x57c463=!_0x2692a0[_0x5aeebc(0x32f)];dbConfig['get']('bot')[_0x5aeebc(0x335)]({'botID':botID})[_0x5aeebc(0x2d8)]({'headless':_0x57c463})['write'](),config[_0x5aeebc(0x32f)]=_0x57c463,proxyEmit(_0x5aeebc(0x1d6),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x2a5d66=_0x5bc9d1;process[_0x2a5d66(0x246)]({'updatebotmanager':!![]},_0x2f8430=>{}),logger['debug'](_0x2a5d66(0x2dd)+config[_0x2a5d66(0x32f)]);}async function loadCoins(_0x3f655b){const _0xc449eb=_0x5bc9d1;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x33045a,_0xf33556=0x0,_0x163f0d=0x0;_0x3f655b[_0xc449eb(0x1ae)](_0x561d30=>{loading['remainingSymbols']['push'](_0x561d30);}),loadingCanceled=![];let _0x7e87e=![];while(_0x33045a!=_0x3f655b[_0xc449eb(0x1d2)]+maxLoadingProgress){_0x33045a=loadingProgress,_0x3f655b[_0xc449eb(0x1ae)](_0x207225=>{const _0x352e95=_0xc449eb;if(gTicker[noslash(_0x207225)]){loading[_0x352e95(0x30f)]=loading['remainingSymbols'][_0x352e95(0x2bb)](_0x5b8dc6=>_0x5b8dc6!=_0x207225);if(!watchedSymbols[_0x352e95(0x329)](_0x207225))watchedSymbols[_0x352e95(0x1a5)](_0x207225);_0x33045a++;}}),loading[_0xc449eb(0x272)]=Math[_0xc449eb(0x27b)](_0x33045a/(_0x3f655b[_0xc449eb(0x1d2)]+maxLoadingProgress)*0x64);loading[_0xc449eb(0x272)]!=0x64&&(_0x163f0d>0x1e*0x5&&(loading[_0xc449eb(0x28a)]=!![],emitLoadingProgress()),_0x163f0d>0x78*0x5&&!_0x7e87e&&(_0x7e87e=!![],logHistory('error',_0xc449eb(0x1c9)+loading[_0xc449eb(0x30f)][_0xc449eb(0x306)](',\x20')+_0xc449eb(0x305)),logHistory(_0xc449eb(0x228),_0xc449eb(0x26d)+loadCoinsRetryInterval/0xea60+_0xc449eb(0x293)),loadingCanceled=!![],await sleep(loadCoinsRetryInterval),restartBot()));if(loadingCanceled){loading[_0xc449eb(0x1a9)]=!![],emitLoadingProgress();break;}else _0xf33556!=loading[_0xc449eb(0x272)]&&(_0xf33556=loading[_0xc449eb(0x272)],emitLoadingProgress()),_0x163f0d++,await sleep(0xc8);}_0x33045a==_0x3f655b['length']+maxLoadingProgress&&(coinsLoaded=!![],process['send']({'status':_0xc449eb(0x270),'live':'running'},_0x87a45f=>{}),_0x7e87e&&logHistory(_0xc449eb(0x256),'All\x20coin\x20data\x20loaded\x20-\x20bot\x20started'));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){proxyEmit('configuration',{...emittedConfiguration(),'configstate':'loading-canceled'});}function emitLoadingProgress(){proxyEmit('coin-loading-progress',loading);}async function getFiat(){const _0x1d9486=_0x5bc9d1;let _0x16910f=gTicker[stablecoins[_0x1d9486(0x2e2)]['coin']],_0x22f5ba=gTicker[stablecoins[_0x1d9486(0x33d)]['coin']];return{'eur':Number(_0x16910f),'usd':Number(_0x22f5ba)};}function capitalize(_0x1d3101){const _0x30a756=_0x5bc9d1;return _0x1d3101['substring'](0x0,0x1)[_0x30a756(0x247)]()+_0x1d3101['substring'](0x1);}function supportedExchanges(){const _0x3a08ba=_0x5bc9d1,_0x2c43fb=['ws',_0x3a08ba(0x292),_0x3a08ba(0x1c5),'watchTrades','watchOrders',_0x3a08ba(0x1e7),_0x3a08ba(0x1a7),_0x3a08ba(0x221),'fetchBalance'];let _0x51fdd6=[],_0x3af936=[],_0x4d1521=ccxt[_0x3a08ba(0x2b5)][_0x3a08ba(0x1a8)];_0x4d1521[_0x3a08ba(0x1ae)](_0x25749c=>{const _0x1cf48c=_0x3a08ba;try{const _0x5eea69=new ccxt[(_0x1cf48c(0x2b5))][_0x25749c]();_0x3af936[_0x1cf48c(0x1a5)](_0x5eea69);}catch(_0x3e9cc5){}}),_0x3af936[_0x3a08ba(0x1ae)](_0x54f036=>{const _0x821179=_0x3a08ba;let _0x7b6343=0x0;_0x2c43fb['forEach'](_0x43d6c8=>{const _0x4d366a=_0xd0c7;_0x43d6c8 in _0x54f036[_0x4d366a(0x22b)]&&_0x54f036[_0x4d366a(0x22b)][_0x43d6c8]&&_0x7b6343++;}),_0x7b6343==_0x2c43fb[_0x821179(0x1d2)]&&(!excludedExchanges['includes'](_0x54f036['id'])&&_0x51fdd6['push'](capitalize(_0x54f036['id'])));});let _0x3c8d01=[];return _0x4d1521[_0x3a08ba(0x1ae)](_0x21764a=>{const _0x537cd8=_0x3a08ba;_0x21764a=capitalize(_0x21764a);if(!_0x51fdd6[_0x537cd8(0x329)](_0x21764a))_0x3c8d01[_0x537cd8(0x1a5)](_0x21764a);}),_0x51fdd6;}function setStartDatePerformance(){const _0x1fc081=_0x5bc9d1;if(config&&config['liquidity'][0x0][_0x1fc081(0x283)][_0x1fc081(0x1d2)]!=0x0){const _0x106ff3=config['liquidity'][0x0][_0x1fc081(0x283)];dbPerformance['get'](_0x1fc081(0x1ca))['find']({'date':config[_0x1fc081(0x26e)]})[_0x1fc081(0x2d8)]({'coins':_0x106ff3})[_0x1fc081(0x201)]();}}async function recreateCoinResults(){const _0x42a9cd=_0x5bc9d1;recreationNeeded=![];let _0x18e412,_0x3b3015=[];try{for(const _0x305c97 of currentCoins){if(_0x305c97['coin']!=config[_0x42a9cd(0x2ca)]){let _0x5dac0e=0x0,_0x5c30b5,_0x3f9ff5;_0x18e412=await getAllEventOrders(_0x305c97[_0x42a9cd(0x242)]);if(_0x18e412[_0x42a9cd(0x1d2)]>0x0)_0x18e412[_0x42a9cd(0x1ae)](_0x591b22=>{const _0x5d3fdd=_0x42a9cd,_0x2c24c2=_0x305c97[_0x5d3fdd(0x242)][_0x5d3fdd(0x329)](config['basecoin']+'/');_0x3b3015[_0x5d3fdd(0x1a5)]({'datetime':_0x591b22[_0x5d3fdd(0x252)],'coin':_0x305c97[_0x5d3fdd(0x1c6)],'symbol':_0x305c97[_0x5d3fdd(0x242)],'side':_0x591b22[_0x5d3fdd(0x187)],'reverse':_0x2c24c2,'amount':formatResult(_0x591b22[_0x5d3fdd(0x21f)],0x8),'filled':formatResult(_0x591b22[_0x5d3fdd(0x21f)],0x8),'price':formatResult(_0x591b22[_0x5d3fdd(0x2f8)],0x8)}),_0x5dac0e=_0x591b22[_0x5d3fdd(0x187)]=='buy'?_0x5dac0e+_0x591b22['filled']:_0x5dac0e-_0x591b22[_0x5d3fdd(0x21f)];if(!_0x3f9ff5)_0x3f9ff5=_0x591b22[_0x5d3fdd(0x2f8)];});_0x5c30b5=_0x305c97['number']-_0x5dac0e;let _0x1926c8;config[_0x42a9cd(0x208)][_0x42a9cd(0x1ae)](_0x41fef9=>{const _0x2f1c7b=_0x42a9cd;!_0x1926c8&&(_0x1926c8=_0x41fef9[_0x2f1c7b(0x283)][_0x2f1c7b(0x335)](_0x2f0015=>_0x2f0015[_0x2f1c7b(0x1c6)]==_0x305c97[_0x2f1c7b(0x1c6)]),_0x1926c8&&(_0x5c30b5=_0x1926c8['number'],_0x3f9ff5=_0x1926c8['price']));});let _0x57e6cd=dbCoinResults[_0x42a9cd(0x324)]('coins')[_0x42a9cd(0x335)]({'coin':_0x305c97[_0x42a9cd(0x1c6)]})[_0x42a9cd(0x32b)]();_0x57e6cd={'coin':_0x305c97[_0x42a9cd(0x1c6)],'number':_0x5c30b5,'breakeven':_0x3f9ff5,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x42a9cd(0x324)](_0x42a9cd(0x250))[_0x42a9cd(0x335)]({'coin':_0x305c97[_0x42a9cd(0x1c6)]})['assign'](_0x57e6cd)[_0x42a9cd(0x201)]();}}_0x3b3015[_0x42a9cd(0x2cb)]((_0x473263,_0x3cf489)=>_0x473263['datetime']>_0x3cf489[_0x42a9cd(0x252)]?0x1:_0x3cf489[_0x42a9cd(0x252)]>_0x473263[_0x42a9cd(0x252)]?-0x1:0x0);let _0x5323d4=0x0;for(let _0x3aaf30 of _0x3b3015){await updateCoinResults(_0x3aaf30,!![]);}}catch(_0x22d758){await handleError(_0x22d758,_0x42a9cd(0x24d));}}async function getAllEventOrders(_0x54661d){const _0x5c5f5e=_0x5bc9d1;let _0xe07950=[],_0x399843=dbLogs[_0x5c5f5e(0x324)](_0x5c5f5e(0x2e4))[_0x5c5f5e(0x2bb)](_0x2bc0f0=>{const _0x770c44=_0x5c5f5e,_0x5e6273=_0x2bc0f0[_0x770c44(0x26a)][_0x770c44(0x210)]();return _0x5e6273[_0x770c44(0x329)](_0x54661d[_0x770c44(0x210)]())&&(_0x5e6273[_0x770c44(0x329)](_0x770c44(0x327))&&_0x5e6273[_0x770c44(0x329)](_0x770c44(0x25b))||_0x5e6273[_0x770c44(0x329)](_0x770c44(0x21f))&&_0x5e6273[_0x770c44(0x329)](_0x770c44(0x25b)));})[_0x5c5f5e(0x186)]('time')['value']();return _0x399843['forEach'](_0x5916f1=>{const _0x5c2a26=_0x5c5f5e,_0x1ac140=_0x5916f1[_0x5c2a26(0x26a)][_0x5c2a26(0x329)]('sell')?_0x5c2a26(0x31b):_0x5c2a26(0x2f9),_0x39cbd1=/#([0-9]|\.)+\s/i,_0x552e18=Number(_0x39cbd1[_0x5c2a26(0x2fd)](_0x5916f1[_0x5c2a26(0x26a)])[0x0][_0x5c2a26(0x2e8)](0x1)),_0xb9065c=/@([0-9]|\.)+$/i,_0x56eb41=Number(_0xb9065c['exec'](_0x5916f1[_0x5c2a26(0x26a)])[0x0][_0x5c2a26(0x2e8)](0x1));_0xe07950[_0x5c2a26(0x1a5)]({'datetime':_0x5916f1[_0x5c2a26(0x316)],'coin':symbolToCoin(_0x54661d),'symbol':_0x54661d,'side':_0x1ac140,'amount':_0x552e18,'filled':_0x552e18,'price':_0x56eb41});}),_0xe07950;}async function validate24hChanges(){const _0x1a0993=_0x5bc9d1;for(const _0x36e2b0 of currentCoins){if(_0x36e2b0[_0x1a0993(0x1c6)]!=config[_0x1a0993(0x2ca)]){let _0x3f031c;_0x36e2b0['reverse']?_0x3f031c=formatResult((0x1/(gChange[_0x36e2b0[_0x1a0993(0x242)]]/0x64+0x1)-0x1)*0x64,0x3):_0x3f031c=gChange[_0x36e2b0[_0x1a0993(0x242)]],_0x3f031c<config['change24h']&&(logHistory('error',_0x36e2b0[_0x1a0993(0x1c6)]+_0x1a0993(0x207)+_0x3f031c+'%'),logHistory(_0x1a0993(0x228),'Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses'),logHistory('error',_0x1a0993(0x2c2)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x1116b6,_0x4ee06f){const _0x336678=_0x5bc9d1;if(!_0x1116b6)return!![];const _0x368d0e=_0x4ee06f[_0x336678(0x1b9)]('.'),_0xb75861=_0x1116b6[_0x336678(0x1b9)]('.');for(var _0x3f0ae5=0x0;_0x3f0ae5<_0xb75861[_0x336678(0x1d2)];_0x3f0ae5++){const _0x193bf9=~~_0xb75861[_0x3f0ae5],_0x1c022d=~~_0x368d0e[_0x3f0ae5];if(_0x193bf9<_0x1c022d)return!![];if(_0x193bf9>_0x1c022d)return![];}return![];}async function oneTimeMigration(){const _0x43bffa=_0x5bc9d1;let _0x9b8cc3=dbLogs[_0x43bffa(0x324)]('version')['value']();if(isOlderVersion(_0x9b8cc3,_0x43bffa(0x219))){let _0x129a7d=[];const _0x5f1306=dbLogs['get']('logs')[_0x43bffa(0x32b)]();_0x5f1306['forEach'](_0x5dd8e3=>{const _0x2ca9a4=_0x43bffa;_0x129a7d[_0x2ca9a4(0x1a5)]({'time':_0x5dd8e3[_0x2ca9a4(0x316)],'type':_0x5dd8e3[_0x2ca9a4(0x171)],'event':_0x5dd8e3['event']});}),dbLogs[_0x43bffa(0x324)]('logs')[_0x43bffa(0x2d8)](_0x129a7d)[_0x43bffa(0x201)]();}let _0x5604de=dbConfig[_0x43bffa(0x324)]('version')[_0x43bffa(0x32b)]();if(isOlderVersion(_0x5604de,_0x43bffa(0x219))){let _0x19258c=dbConfig[_0x43bffa(0x324)]('bot')['find']({'botID':botID})[_0x43bffa(0x32b)]();if(_0x19258c){let _0x56135a=[];_0x19258c[_0x43bffa(0x2b9)][_0x43bffa(0x1ae)](_0x3b51f0=>{const _0x104552=_0x43bffa;_0x56135a['push']({'coin':_0x3b51f0['coin'],'number':_0x3b51f0[_0x104552(0x17c)],'price':_0x3b51f0['startprice']}),delete _0x3b51f0[_0x104552(0x17c)],delete _0x3b51f0[_0x104552(0x173)];});if(_0x56135a[_0x43bffa(0x1d2)]!==0x0)fs['writeFile'](configbackuppath+(_0x43bffa(0x279)+botID+'.json'),JSON['stringify'](_0x56135a,null,0x4),function(_0xc7d718){if(_0xc7d718){}});const _0x38c8c7=(_0x516962,_0x15c8b7)=>{const _0x57d800=_0x43bffa;let _0xd326fd=[];_0x15c8b7[_0x57d800(0x1ae)](_0x4ff411=>{const _0x1f4ab7=_0x57d800,_0x502b40=_0x516962['find'](_0xe5a51d=>_0xe5a51d[_0x1f4ab7(0x1c6)]==_0x4ff411[_0x1f4ab7(0x1c6)]);if(!_0x502b40)_0xd326fd[_0x1f4ab7(0x1a5)](_0x4ff411);});let _0x2c4a6f=[];return _0x516962[_0x57d800(0x1ae)](_0x57015e=>{const _0x3e4d15=_0x57d800,_0xdf45cb=_0x15c8b7['find'](_0x29a735=>_0x29a735[_0x3e4d15(0x1c6)]==_0x57015e[_0x3e4d15(0x1c6)]);if(!_0xdf45cb||_0xdf45cb[_0x3e4d15(0x213)]==0x0&&_0x57015e[_0x3e4d15(0x213)]!=0x0)_0x2c4a6f[_0x3e4d15(0x1a5)](_0x57015e);}),{'missingDay1':_0xd326fd,'notInDay2':_0x2c4a6f};},_0x437760=dbPerformance['get'](_0x43bffa(0x1ca))[_0x43bffa(0x191)]()[_0x43bffa(0x32b)]();if(_0x437760[_0x43bffa(0x1d2)]>0x1){const {missingDay1:_0xaa4040,notInDay2:_0x21d429}=_0x38c8c7(_0x56135a,_0x437760[0x1]['coins']);_0x56135a=[..._0x56135a,..._0xaa4040],_0x21d429[_0x43bffa(0x1ae)](_0xd08689=>{const _0x2b3c92=_0x43bffa;let _0x5d0c02=_0x56135a[_0x2b3c92(0x16f)](_0x14d887=>_0x14d887[_0x2b3c92(0x1c6)]==_0xd08689[_0x2b3c92(0x1c6)]);_0x5d0c02!=-0x1&&_0x56135a[_0x2b3c92(0x23e)](_0x5d0c02,0x1);});}_0x56135a[_0x43bffa(0x2cb)]((_0x1d6ac8,_0x344072)=>_0x1d6ac8[_0x43bffa(0x1c6)]>_0x344072[_0x43bffa(0x1c6)]?0x1:_0x344072['coin']>_0x1d6ac8[_0x43bffa(0x1c6)]?-0x1:0x0);let _0x457ec5=[{'date':_0x19258c['startdate'],'changes':_0x56135a}];_0x437760[_0x43bffa(0x1d2)]>0x2&&_0x437760[_0x43bffa(0x1ae)]((_0x2d0df6,_0x249ffe)=>{const _0x2c04e9=_0x43bffa;if(_0x249ffe>0x0&&_0x249ffe<_0x437760[_0x2c04e9(0x1d2)]-0x1){const {missingDay1:_0x3ec4dc,notInDay2:_0x331fa4}=_0x38c8c7(_0x437760[_0x249ffe]['coins'],_0x437760[_0x249ffe+0x1][_0x2c04e9(0x250)]);_0x56135a=[],(_0x3ec4dc[_0x2c04e9(0x1d2)]!=0x0||_0x331fa4[_0x2c04e9(0x1d2)]!=0x0)&&(_0x3ec4dc[_0x2c04e9(0x1d2)]!=0x0&&_0x56135a['push'](..._0x3ec4dc),_0x331fa4[_0x2c04e9(0x1d2)]!=0x0&&(_0x331fa4[_0x2c04e9(0x1ae)](_0x1f5f20=>{const _0x56dacd=_0x2c04e9;_0x1f5f20[_0x56dacd(0x213)]=-_0x1f5f20[_0x56dacd(0x213)];}),_0x56135a['push'](..._0x331fa4)),_0x56135a[_0x2c04e9(0x2cb)]((_0x11bd86,_0x4ed602)=>_0x11bd86[_0x2c04e9(0x1c6)]>_0x4ed602[_0x2c04e9(0x1c6)]?0x1:_0x4ed602[_0x2c04e9(0x1c6)]>_0x11bd86[_0x2c04e9(0x1c6)]?-0x1:0x0),_0x457ec5[_0x2c04e9(0x1a5)]({'date':_0x437760[_0x249ffe+0x1][_0x2c04e9(0x31d)],'changes':_0x56135a}));}}),dbConfig[_0x43bffa(0x324)](_0x43bffa(0x241))['find']({'botID':botID})[_0x43bffa(0x2d8)]({..._0x19258c,'liquidity':_0x457ec5})[_0x43bffa(0x201)]();}}if(isOlderVersion(_0x5604de,_0x43bffa(0x2eb))){let _0x1ab8b8=dbConfig[_0x43bffa(0x324)](_0x43bffa(0x241))[_0x43bffa(0x335)]({'botID':botID})[_0x43bffa(0x32b)]();if(_0x1ab8b8){const _0x4f507e=_0x1ab8b8['exchange'],_0x47894a=_0x4f507e?capitalize(_0x4f507e):_0x43bffa(0x259);dbConfig[_0x43bffa(0x324)]('bot')[_0x43bffa(0x335)]({'botID':botID})[_0x43bffa(0x2d8)]({'exchange':_0x47894a})[_0x43bffa(0x201)]();}}if(isOlderVersion(_0x5604de,_0x43bffa(0x267))){let _0x53c120=dbConfig[_0x43bffa(0x324)](_0x43bffa(0x241))[_0x43bffa(0x335)]({'botID':botID})[_0x43bffa(0x32b)]();if(_0x53c120){const _0x208bbf=_0x53c120[_0x43bffa(0x16e)],_0x44239c=_0x208bbf?_0x43bffa(0x194):![];dbConfig[_0x43bffa(0x324)](_0x43bffa(0x241))[_0x43bffa(0x335)]({'botID':botID})[_0x43bffa(0x2d8)]({'marketcapEnabled':_0x44239c})['write']();}}if(isOlderVersion(_0x5604de,_0x43bffa(0x2bf))){let _0x3cddff=dbConfig[_0x43bffa(0x324)](_0x43bffa(0x241))[_0x43bffa(0x335)]({'botID':botID})[_0x43bffa(0x32b)]();if(_0x3cddff){const _0x200356=_0x3cddff[_0x43bffa(0x1f7)],_0x56085b=_0x200356?_0x43bffa(0x1cc):![];dbConfig[_0x43bffa(0x324)]('bot')[_0x43bffa(0x335)]({'botID':botID})[_0x43bffa(0x2d8)]({'autoliquidity':_0x56085b})['write']();}}let _0x538246=dbPerformance['get'](_0x43bffa(0x2d9))[_0x43bffa(0x32b)]();isOlderVersion(_0x538246,_0x43bffa(0x219))&&setStartDatePerformance();let _0x187565=dbCoinResults[_0x43bffa(0x324)](_0x43bffa(0x2d9))[_0x43bffa(0x32b)]();if(isOlderVersion(_0x187565,_0x43bffa(0x2be))){let _0x59c727=dbCoinResults['get']('coins')[_0x43bffa(0x32b)]();if(_0x59c727['length']!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x231a29=_0x5bc9d1;dbConfig[_0x231a29(0x1cb)](_0x231a29(0x2d9),serverversion)['write'](),dbPerformance['set']('version',serverversion)[_0x231a29(0x201)](),dbLogs['set'](_0x231a29(0x2d9),serverversion)['write'](),dbCoinResults['set'](_0x231a29(0x2d9),serverversion)[_0x231a29(0x201)]();}function getConfiguration(_0x442155){const _0x5bc75a=_0x5bc9d1;let _0x4c646d=dbConfig[_0x5bc75a(0x324)]('bot')[_0x5bc75a(0x335)]({'botID':_0x442155})['value']();if(_0x4c646d){let _0xc9b854=![];typeof _0x4c646d[_0x5bc75a(0x2d2)]==_0x5bc75a(0x25e)&&(_0x4c646d={..._0x4c646d,'threshold':Number(_0x4c646d[_0x5bc75a(0x2d2)])},_0xc9b854=!![]),_0x4c646d[_0x5bc75a(0x1ab)]==undefined&&(_0x4c646d={..._0x4c646d,'change24h':-0x14},_0xc9b854=!![]),_0x4c646d[_0x5bc75a(0x2f1)]==undefined&&(_0x4c646d={..._0x4c646d,'fiat':_0x5bc75a(0x1e3)},_0xc9b854=!![]),_0x4c646d[_0x5bc75a(0x251)]==undefined&&(_0x4c646d={..._0x4c646d,'onepagemode':settings['onepagemode']},_0xc9b854=!![]),_0x4c646d['colorscheme']==undefined&&(_0x4c646d={..._0x4c646d,'colorscheme':_0x5bc75a(0x1a3)},_0xc9b854=!![]),_0x4c646d[_0x5bc75a(0x1f7)]==undefined&&(_0x4c646d={..._0x4c646d,'autoliquidity':_0x5bc75a(0x1cc)},_0xc9b854=!![]),_0x4c646d['marketcapApi']==undefined&&(_0x4c646d={..._0x4c646d,'marketcapApi':settings[_0x5bc75a(0x337)]?!![]:![]},_0xc9b854=!![]),_0x4c646d[_0x5bc75a(0x16e)]==undefined&&(_0x4c646d={..._0x4c646d,'marketcapEnabled':![]},_0xc9b854=!![]),_0xc9b854&&(_0x4c646d={'botID':_0x4c646d['botID'],'exchange':_0x4c646d[_0x5bc75a(0x1c1)],'apiKey':_0x4c646d[_0x5bc75a(0x233)],'apiSecret':_0x4c646d[_0x5bc75a(0x23c)],'apiPassword':_0x4c646d[_0x5bc75a(0x2ad)],'basecoin':_0x4c646d[_0x5bc75a(0x2ca)],'botname':_0x4c646d[_0x5bc75a(0x308)],'showname':_0x4c646d[_0x5bc75a(0x1f3)],'threshold':_0x4c646d['threshold'],'ordertype':_0x4c646d[_0x5bc75a(0x211)],'timeout':_0x4c646d[_0x5bc75a(0x28a)],'fiat':_0x4c646d[_0x5bc75a(0x2f1)],'startdate':_0x4c646d[_0x5bc75a(0x26e)],'recreate':_0x4c646d[_0x5bc75a(0x220)],'timeshift':_0x4c646d[_0x5bc75a(0x299)],'onepagemode':_0x4c646d[_0x5bc75a(0x251)],'headless':_0x4c646d[_0x5bc75a(0x32f)],'cooldown':_0x4c646d['cooldown'],'change24h':_0x4c646d[_0x5bc75a(0x1ab)],'emojibuy':_0x4c646d[_0x5bc75a(0x2b4)],'emojisell':_0x4c646d[_0x5bc75a(0x2a4)],'colorscheme':_0x4c646d['colorscheme'],'marketcapApi':_0x4c646d[_0x5bc75a(0x337)],'marketcapEnabled':_0x4c646d['marketcapEnabled'],'portfolio':_0x4c646d[_0x5bc75a(0x2b9)],'autoliquidity':_0x4c646d[_0x5bc75a(0x1f7)],'liquidity':_0x4c646d[_0x5bc75a(0x208)],'openOrders':_0x4c646d['openOrders']},dbConfig[_0x5bc75a(0x324)](_0x5bc75a(0x241))[_0x5bc75a(0x1f6)]()[_0x5bc75a(0x201)](),dbConfig[_0x5bc75a(0x324)](_0x5bc75a(0x241))[_0x5bc75a(0x1a5)](_0x4c646d)[_0x5bc75a(0x201)]());}else _0x4c646d={'botID':_0x442155,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x5bc75a(0x19c)+_0x442155,'showname':![],'threshold':0x3,'ordertype':'market','timeout':0x14,'fiat':_0x5bc75a(0x1e3),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x5bc75a(0x299)],'onepagemode':settings[_0x5bc75a(0x251)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':'red_yellow_blue','marketcapApi':settings[_0x5bc75a(0x337)]?!![]:![],'marketcapEnabled':![],'portfolio':[],'autoliquidity':_0x5bc75a(0x1cc),'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x4c646d;}function emittedConfiguration(){const _0x2525a7=_0x5bc9d1;let _0x3f042f;if(config[_0x2525a7(0x233)]=='')_0x3f042f={...config,'configstate':_0x2525a7(0x304)};else config[_0x2525a7(0x233)]==_0x2525a7(0x238)?_0x3f042f={...config,'configstate':_0x2525a7(0x23b)}:(_0x3f042f={...config,'apiKey':_0x2525a7(0x18e),'apiSecret':'************'},config['apiPassword']&&(_0x3f042f[_0x2525a7(0x2ad)]=_0x2525a7(0x18e)));return _0x3f042f[_0x2525a7(0x30c)]=enableFiatToggle,_0x3f042f;}function getSettings(){const _0x90517a=_0x5bc9d1;return dbSettings[_0x90517a(0x324)](_0x90517a(0x2cd))['value']();}function getSecure(){const _0x2e9b68=_0x5bc9d1;return dbSecure['get'](_0x2e9b68(0x1fc))[_0x2e9b68(0x32b)]()||{};}function updateTimeshift(_0x1bfc45){const _0x2e1473=_0x5bc9d1;let _0x200898=dbConfig[_0x2e1473(0x324)](_0x2e1473(0x241))['find']({'botID':botID})['value']();_0x200898&&dbConfig[_0x2e1473(0x324)](_0x2e1473(0x241))[_0x2e1473(0x335)]({'botID':botID})[_0x2e1473(0x2d8)]({'timeshift':_0x1bfc45})[_0x2e1473(0x201)](),config[_0x2e1473(0x299)]=_0x1bfc45,proxyEmit(_0x2e1473(0x1d6),emittedConfiguration());}function updateOnepagemode(_0x4a4a13){const _0xdacef5=_0x5bc9d1;let _0x1e730f=dbConfig[_0xdacef5(0x324)](_0xdacef5(0x241))['find']({'botID':botID})['value']();_0x1e730f&&dbConfig[_0xdacef5(0x324)](_0xdacef5(0x241))[_0xdacef5(0x335)]({'botID':botID})[_0xdacef5(0x2d8)]({'onepagemode':_0x4a4a13})[_0xdacef5(0x201)](),config[_0xdacef5(0x251)]=_0x4a4a13,proxyEmit(_0xdacef5(0x1d6),emittedConfiguration());}function updateMarketcapApi(_0x420acb){const _0x2e8be3=_0x5bc9d1,_0x255a67=_0x420acb?!![]:![];let _0xb3a97b=dbConfig[_0x2e8be3(0x324)](_0x2e8be3(0x241))['find']({'botID':botID})['value']();_0xb3a97b&&dbConfig[_0x2e8be3(0x324)]('bot')[_0x2e8be3(0x335)]({'botID':botID})['assign']({'marketcapApi':_0x255a67})[_0x2e8be3(0x201)](),config['marketcapApi']=_0x255a67,getMarketCap(),proxyEmit(_0x2e8be3(0x1d6),emittedConfiguration());}async function storeConfiguration(_0xbe94f4){const _0x4ef210=_0x5bc9d1;logger[_0x4ef210(0x296)]('Saving\x20configuration');let _0x24e3c2=![];_0xbe94f4['configstate']&&(_0xbe94f4[_0x4ef210(0x199)]=='recovery'&&(_0x24e3c2=!![]),delete _0xbe94f4[_0x4ef210(0x199)]);if(pidBalances)clearTimeout(pidBalances);setBlockTransactionDetection(!![]);let _0x5a0b29=![],_0x19aae2=![],_0x40157a=[];_0xbe94f4[_0x4ef210(0x2b9)][_0x4ef210(0x1ae)](_0x147faf=>{const _0x44d2f2=_0x4ef210;if(!_0x147faf[_0x44d2f2(0x1e1)]&&_0x147faf[_0x44d2f2(0x1c6)]!=_0xbe94f4['basecoin'])_0x40157a[_0x44d2f2(0x1a5)](_0x147faf[_0x44d2f2(0x242)]);}),_0x40157a[_0x4ef210(0x1ae)](_0x26d3cc=>{const _0x5d3012=_0x4ef210,_0x3df6db=currentCoins[_0x5d3012(0x335)](_0x19ce75=>_0x19ce75['symbol']==_0x26d3cc);!_0x3df6db&&(_0x5a0b29=!![]);}),currentCoins[_0x4ef210(0x1ae)](_0x1fb778=>{const _0x2e438f=_0x4ef210;if(_0x1fb778['coin']!=config[_0x2e438f(0x2ca)]){const _0x2534fd=_0x40157a[_0x2e438f(0x335)](_0x26dc49=>_0x26dc49==_0x1fb778['symbol']);!_0x2534fd&&(_0x5a0b29=!![]);}}),_0xbe94f4[_0x4ef210(0x2b9)][_0x4ef210(0x1ae)](_0x11b0cf=>{const _0x52031a=_0x4ef210,_0x43c39d=config[_0x52031a(0x2b9)][_0x52031a(0x335)](_0x1ea6ed=>_0x1ea6ed[_0x52031a(0x1c6)]==_0x11b0cf['coin']);if(_0x43c39d&&_0x11b0cf[_0x52031a(0x25f)]!=_0x43c39d[_0x52031a(0x25f)])_0x19aae2=!![];});let _0x555067=dbConfig[_0x4ef210(0x324)](_0x4ef210(0x241))[_0x4ef210(0x335)]({'botID':botID})[_0x4ef210(0x32b)]();_0xbe94f4={..._0xbe94f4,'apiKey':decryptRSA(secure[_0x4ef210(0x321)],_0xbe94f4['apiKey']),'apiSecret':decryptRSA(secure[_0x4ef210(0x321)],_0xbe94f4['apiSecret'])};_0xbe94f4[_0x4ef210(0x2ad)]&&(_0xbe94f4[_0x4ef210(0x2ad)]=decryptRSA(secure[_0x4ef210(0x321)],_0xbe94f4[_0x4ef210(0x2ad)]));let _0x12351e=![];if(_0x555067){_0xbe94f4[_0x4ef210(0x233)]=='************'?_0xbe94f4['apiKey']=config[_0x4ef210(0x233)]:_0x12351e=!![];_0xbe94f4[_0x4ef210(0x23c)]==_0x4ef210(0x18e)?_0xbe94f4[_0x4ef210(0x23c)]=config[_0x4ef210(0x23c)]:_0x12351e=!![];if(_0xbe94f4[_0x4ef210(0x2ad)]==_0x4ef210(0x18e))_0xbe94f4[_0x4ef210(0x2ad)]=config['apiPassword'];else{if(_0xbe94f4[_0x4ef210(0x2ad)])_0x12351e=!![];}dbConfig['get']('bot')[_0x4ef210(0x335)]({'botID':botID})['assign'](_0xbe94f4)['write']();}else dbConfig[_0x4ef210(0x324)](_0x4ef210(0x241))['push'](_0xbe94f4)[_0x4ef210(0x201)](),_0x12351e=!![],process['send']({'status':_0x4ef210(0x270),'live':_0x4ef210(0x1cf)},_0x4fb978=>{});process[_0x4ef210(0x246)]({'botname':_0xbe94f4[_0x4ef210(0x308)]},_0x2da7fb=>{}),config={..._0xbe94f4},updateBotManager(),proxyEmit(_0x4ef210(0x240)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x12351e)!_0x555067||_0x24e3c2?await reset(!![]):getBalances();else _0x5a0b29||_0x19aae2?await reset(![]):getBalances();setBlockTransactionDetection(![]);}async function storeHeadless(_0x3f6220){const _0x2b8c7d=_0x5bc9d1,_0x4d2457={...config,'headless':_0x3f6220[_0x2b8c7d(0x32f)]};let _0x5f0534=dbConfig[_0x2b8c7d(0x324)](_0x2b8c7d(0x241))['find']({'botID':botID})['value']();_0x5f0534&&dbConfig[_0x2b8c7d(0x324)](_0x2b8c7d(0x241))['find']({'botID':botID})[_0x2b8c7d(0x2d8)](_0x4d2457)[_0x2b8c7d(0x201)](),config={..._0x4d2457},updateBotManager(),proxyEmit(_0x2b8c7d(0x1d6),emittedConfiguration());}async function storeFiat(_0x2d6bce){const _0x593b0c=_0x5bc9d1,_0x287fa4={...config,'fiat':_0x2d6bce};let _0x3148ae=dbConfig[_0x593b0c(0x324)](_0x593b0c(0x241))[_0x593b0c(0x335)]({'botID':botID})[_0x593b0c(0x32b)]();_0x3148ae&&dbConfig[_0x593b0c(0x324)](_0x593b0c(0x241))[_0x593b0c(0x335)]({'botID':botID})[_0x593b0c(0x2d8)](_0x287fa4)[_0x593b0c(0x201)](),config={..._0x287fa4},proxyEmit('configuration',emittedConfiguration());}function resetHistory(){const _0x114550=_0x5bc9d1;logger['full'](_0x114550(0x184));try{if(fs[_0x114550(0x19e)](path[_0x114550(0x306)](configpath,_0x114550(0x16c)+botID+_0x114550(0x30e))))fs['unlinkSync'](path['join'](configpath,'bot-'+botID+_0x114550(0x30e)));if(fs['existsSync'](path[_0x114550(0x306)](configpath,'bot-'+botID+_0x114550(0x218))))fs['unlinkSync'](path[_0x114550(0x306)](configpath,_0x114550(0x16c)+botID+'-performance.json'));if(fs['existsSync'](path[_0x114550(0x306)](configpath,_0x114550(0x16c)+botID+'-results.json')))fs['unlinkSync'](path[_0x114550(0x306)](configpath,_0x114550(0x16c)+botID+_0x114550(0x1d7)));}catch(_0x4d36ba){if(_0x4d36ba)logger[_0x114550(0x315)](_0x114550(0x2d1),_0x4d36ba);}const _0x297e79=getDate();let _0x2546d7=[];currentCoins[_0x114550(0x1ae)](_0x181b8a=>{const _0x2d135a=_0x114550;_0x2546d7[_0x2d135a(0x1a5)]({'coin':_0x181b8a['coin'],'number':_0x181b8a[_0x2d135a(0x213)],'price':_0x181b8a['last']});});let _0x5b0071=dbConfig['get']('bot')[_0x114550(0x335)]({'botID':botID})[_0x114550(0x32b)]();_0x5b0071&&(dbConfig[_0x114550(0x324)](_0x114550(0x241))[_0x114550(0x335)]({'botID':botID})[_0x114550(0x2d8)]({'liquidity':[{'date':_0x297e79,'changes':_0x2546d7}]})[_0x114550(0x201)](),config[_0x114550(0x208)]=[]),restartBot(!![]);}function noslash(_0x54cfd3){const _0x4952b1=_0x5bc9d1;return _0x54cfd3[_0x4952b1(0x2ea)]('/','');}function updateHighestFee(_0x14fdc3){const _0x2dc783=_0x5bc9d1;if(_0x14fdc3[_0x2dc783(0x188)]){let _0x277425={'filled':_0x14fdc3[_0x2dc783(0x21f)]*_0x14fdc3['price'],'amount':_0x14fdc3[_0x2dc783(0x21f)]*_0x14fdc3[_0x2dc783(0x2f8)],'side':_0x14fdc3[_0x2dc783(0x187)]==_0x2dc783(0x31b)?_0x2dc783(0x2f9):'sell','price':0x1/_0x14fdc3['price']};_0x14fdc3={..._0x14fdc3,..._0x277425};}const _0x4f5b39=defaultFee*_0x14fdc3['filled']*_0x14fdc3['price'];lastFees[_0x2dc783(0x1b1)]['length']===0x14&&lastFees[_0x2dc783(0x1b1)][_0x2dc783(0x190)](),lastFees[_0x2dc783(0x1b1)][_0x2dc783(0x1a5)](_0x4f5b39),lastFees[_0x2dc783(0x183)]=Math[_0x2dc783(0x1db)](...lastFees[_0x2dc783(0x1b1)]);}async function updateNumberCoinsCcxt(_0x41c3ad){const _0x2baaee=_0x5bc9d1;logger[_0x2baaee(0x296)](_0x2baaee(0x227)+_0x41c3ad['symbol']+_0x2baaee(0x320)+_0x41c3ad[_0x2baaee(0x20e)]+'\x20|\x20'+_0x41c3ad[_0x2baaee(0x21f)]+_0x2baaee(0x21b)+_0x41c3ad[_0x2baaee(0x196)]+_0x2baaee(0x320)+_0x41c3ad['id']);let _0x494608=_0x41c3ad[_0x2baaee(0x20e)],_0xc26d30=![];currentCoins[_0x2baaee(0x1ae)](_0x29a802=>{const _0x39362a=_0x2baaee;_0x29a802[_0x39362a(0x242)]==_0x41c3ad[_0x39362a(0x242)]&&(_0xc26d30=!![]);});if(!_0xc26d30)return;const _0x1ea847=currentCoins['find'](_0x2265f9=>_0x2265f9[_0x2baaee(0x242)]==_0x41c3ad['symbol']),_0x1cff9b=_0x1ea847[_0x2baaee(0x1c6)],_0xbee99e=_0x382997=>{const _0x3417fd=_0x2baaee,_0x2c98a4=currentCoins[_0x3417fd(0x335)](_0x4bb548=>_0x4bb548['symbol']==_0x41c3ad[_0x3417fd(0x242)]);if(_0x2c98a4)_0x2c98a4[_0x3417fd(0x1c7)]=_0x382997;};let _0x224700=![];for(const _0x3995a2 of lastOrders){const _0x4249e5=0x64,_0x207688=0x1388;let _0x29c0a6=0x0;while(!_0x3995a2['orderId']&&_0x29c0a6*_0x4249e5<_0x207688){_0x29c0a6++,await sleep(_0x4249e5);}if(_0x29c0a6>0x0)logger[_0x2baaee(0x296)](_0x2baaee(0x193)+_0x29c0a6*_0x4249e5/0x3e8+_0x2baaee(0x258));_0x3995a2[_0x2baaee(0x2a2)]==_0x41c3ad['id']&&(_0x224700=!![]);}if(_0x494608==_0x2baaee(0x21c)){_0xbee99e(_0x2baaee(0x21c));if(_0x41c3ad[_0x2baaee(0x21f)]>0x0&&_0x41c3ad[_0x2baaee(0x21f)]<_0x41c3ad[_0x2baaee(0x196)]){if(_0x224700){setBlockTransactionDetection(!![]),logger[_0x2baaee(0x296)](_0x2baaee(0x1da)+_0x41c3ad[_0x2baaee(0x21f)]+_0x2baaee(0x1bd)+_0x41c3ad['id']);const _0xd0c3a2=await getCoins(balanceUpdateDelay,undefined,undefined,_0x1cff9b);[currentCoins,currentCoinsAll]=_0xd0c3a2,setBlockTransactionDetection(![]);}else logger[_0x2baaee(0x296)](_0x2baaee(0x1da)+_0x41c3ad[_0x2baaee(0x21f)]+_0x2baaee(0x20a)+_0x41c3ad['id']),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay);}}else{if(_0x494608==_0x2baaee(0x1b5)){_0xbee99e(_0x2baaee(0x1b5)),lastOrders=lastOrders[_0x2baaee(0x2bb)](_0x318578=>_0x318578[_0x2baaee(0x242)]!=_0x41c3ad['symbol']);const _0x97ed47=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x97ed47,setBlockTransactionDetection(![]),await getOpenOrders(),handleOpenOrders();}else{if(_0x494608==_0x2baaee(0x301)){if(lastOrders)for(const _0x218bc6 of lastOrders){if(_0x218bc6[_0x2baaee(0x2a2)]==_0x41c3ad['id']){logger[_0x2baaee(0x296)](_0x2baaee(0x29a)+_0x41c3ad['id']),_0x224700=!![];if(_0x218bc6['filled']==0x0){setBlockTransactionDetection(!![]),logger[_0x2baaee(0x296)](_0x2baaee(0x23a)+_0x41c3ad['id']);if(_0x41c3ad['average'])_0x218bc6['price']=_0x41c3ad[_0x2baaee(0x22c)];else{if(_0x41c3ad[_0x2baaee(0x2f8)])_0x218bc6[_0x2baaee(0x2f8)]=_0x41c3ad['price'];else{}}_0x218bc6['filled']=_0x41c3ad[_0x2baaee(0x21f)],updateHighestFee(_0x218bc6);const _0x3d53fc=await getCoins(balanceUpdateDelay,undefined,undefined,_0x1cff9b);[currentCoins,currentCoinsAll]=_0x3d53fc,setBlockTransactionDetection(![]),await validateOrders(),_0xbee99e(_0x2baaee(0x21f)),_0x218bc6['fee']={'currency':_0x41c3ad[_0x2baaee(0x33a)]?_0x41c3ad[_0x2baaee(0x33a)][_0x2baaee(0x1e5)]:null,'cost':_0x41c3ad[_0x2baaee(0x33a)]?_0x41c3ad[_0x2baaee(0x33a)]['cost']:0x0},await updateCoinResults(_0x218bc6);}}}!_0x224700&&(logger[_0x2baaee(0x296)](_0x2baaee(0x24f)+_0x41c3ad['id']),_0xbee99e(_0x2baaee(0x21f)),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay),await updateOpenOrders(),handleOpenOrders());}}}if(lastBalances){let _0x5d0eb2=JSON[_0x2baaee(0x1fb)](lastBalances[_0x2baaee(0x2b9)]);const _0x2ed565=_0x5d0eb2['find'](_0x3d28c9=>_0x3d28c9['symbol']==_0x41c3ad[_0x2baaee(0x242)]);if(_0x2ed565){if(_0x494608=='open')_0x2ed565[_0x2baaee(0x1c7)]=_0x2ed565[_0x2baaee(0x1c7)]==_0x2baaee(0x21f)?_0x2baaee(0x21f):_0x2baaee(0x21c);else{if(_0x494608=='canceled')_0x2ed565[_0x2baaee(0x1c7)]=_0x2ed565['orderstatus']=='filled'?'filled':_0x2baaee(0x1b5);else _0x494608=='closed'&&(_0x2ed565['orderstatus']=_0x2baaee(0x21f));}}lastBalances={...lastBalances,'portfolio':JSON[_0x2baaee(0x280)](_0x5d0eb2)},proxyEmit(_0x2baaee(0x1c2),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x2ca7c4=_0x5bc9d1;await getOpenOrders();let _0x147a16=![];currentCoins[_0x2ca7c4(0x1ae)](_0x425742=>{const _0x4efbed=_0x2ca7c4;_0x147a16=allOpenOrders[_0x4efbed(0x335)](_0x46dbd7=>_0x46dbd7[_0x4efbed(0x242)]==_0x425742[_0x4efbed(0x242)]),_0x425742[_0x4efbed(0x1c7)]=_0x147a16?_0x4efbed(0x21c):_0x4efbed(0x1b7);});}async function fetchBalance(_0x46cf66=!![]){const _0xe52ce4=_0x5bc9d1;let _0x54ef58,_0x110e25;try{return _0x54ef58=await exchange[_0xe52ce4(0x172)](),_0x110e25=_0x54ef58[_0xe52ce4(0x294)],_0x110e25;}catch(_0x298ece){return!_0x46cf66?handleErrorNoStop(_0x298ece,_0xe52ce4(0x1b2)):await handleError(_0x298ece,_0xe52ce4(0x1b2)),![];}}async function getCoins(_0x436487=0x0,_0x5b1184=!![],_0x1f2511=config[_0x5bc9d1(0x2ca)],_0x1630e2){const _0x212b1b=_0x5bc9d1;let _0x525b99=[],_0xbe7512=[],_0x19cf8c=[],_0x657fd1;if(_0x436487)await sleep(_0x436487);if(botPaused)return[currentCoins,currentCoinsAll];let _0x28f966=![],_0x2aca57=0x0,_0x7ac54,_0x9e429;_0x1630e2&&(_0x7ac54=currentCoins[_0x212b1b(0x335)](_0x8d2c91=>_0x8d2c91['coin']==_0x1630e2),_0x7ac54&&(_0x9e429=_0x7ac54['prevnumber'],delete _0x7ac54[_0x212b1b(0x28f)]));while(!_0x28f966){_0x657fd1=await fetchBalance(_0x5b1184);if(_0x657fd1){if(_0x1630e2){if(_0x657fd1[_0x1630e2]!=_0x9e429)logger[_0x212b1b(0x296)](_0x212b1b(0x2cc)+_0x1630e2+':\x20'+_0x657fd1[_0x1630e2]+'\x20('+_0x9e429+')'),_0x28f966=!![];else{logger[_0x212b1b(0x296)](_0x212b1b(0x1d8)+_0x1630e2+':\x20'+_0x657fd1[_0x1630e2]+'\x20('+_0x9e429+')'),_0x2aca57++;if(_0x2aca57<balanceUpdateRetries)await sleep(balanceUpdateDelay);else{logger[_0x212b1b(0x296)](_0x212b1b(0x284)+_0x2aca57+'\x20attempts');break;}}}else break;}else return[currentCoins,currentCoinsAll];}for(const [_0x2a869d,_0x1edd86]of Object[_0x212b1b(0x318)](_0x657fd1)){_0x19cf8c[_0x212b1b(0x1a5)](_0x2a869d);}config[_0x212b1b(0x2b9)][_0x212b1b(0x1ae)](_0x2c1a2c=>{const _0x23c2c0=_0x212b1b;!_0x19cf8c[_0x23c2c0(0x329)](_0x2c1a2c[_0x23c2c0(0x1c6)])&&(_0x657fd1[_0x2c1a2c[_0x23c2c0(0x1c6)]]=0x0);});if(_0x1f2511=='')for(const [_0x4dea65,_0x12e5dc]of Object[_0x212b1b(0x318)](_0x657fd1)){_0x12e5dc!=0x0&&_0x525b99[_0x212b1b(0x1a5)]({'coin':_0x4dea65});}else for(const [_0x2f92a5,_0x21191c]of Object[_0x212b1b(0x318)](_0x657fd1)){const _0x556215=config[_0x212b1b(0x2b9)][_0x212b1b(0x335)](_0x1328f8=>_0x1328f8[_0x212b1b(0x1c6)]==_0x2f92a5),_0x17d922=_0x2f92a5+'/'+_0x1f2511,_0x15e229=_0x1f2511+'/'+_0x2f92a5,_0x3e1871=currentCoins[_0x212b1b(0x335)](_0x4fa9f7=>_0x4fa9f7[_0x212b1b(0x1c6)]==_0x2f92a5);if((_0x21191c!=0x0||_0x556215)&&(allSymbols[_0x212b1b(0x329)](_0x17d922)||_0x2f92a5==_0x1f2511))_0x3e1871?_0x525b99[_0x212b1b(0x1a5)]({..._0x3e1871,'number':Math[_0x212b1b(0x1db)](_0x21191c+(_0x556215&&_0x556215[_0x212b1b(0x25f)]||0x0),0x0)}):_0x525b99['push']({'coin':_0x2f92a5,'symbol':_0x17d922,'reverse':![],'number':Math[_0x212b1b(0x1db)](_0x21191c+(_0x556215&&_0x556215['offset']||0x0),0x0),'orderstatus':_0x212b1b(0x1b7)});else{if((_0x21191c!=0x0||_0x556215)&&allSymbols[_0x212b1b(0x329)](_0x15e229))_0x3e1871?_0x525b99[_0x212b1b(0x1a5)]({..._0x3e1871,'number':Math[_0x212b1b(0x1db)](_0x21191c+(_0x556215&&_0x556215['offset']||0x0),0x0)}):_0x525b99[_0x212b1b(0x1a5)]({'coin':_0x2f92a5,'symbol':_0x15e229,'reverse':!![],'number':Math[_0x212b1b(0x1db)](_0x21191c+(_0x556215&&_0x556215['offset']||0x0),0x0),'orderstatus':_0x212b1b(0x1b7)});else _0x556215&&_0x525b99[_0x212b1b(0x1a5)]({'coin':_0x556215['coin'],'symbol':_0x556215[_0x212b1b(0x242)],'reverse':_0x556215[_0x212b1b(0x188)],'number':0x0,'orderstatus':'none'});}}return _0x525b99[_0x212b1b(0x2cb)]((_0x563f04,_0x3f70eb)=>_0x563f04['delta']<_0x3f70eb[_0x212b1b(0x28e)]?0x1:_0x3f70eb['delta']<_0x563f04[_0x212b1b(0x28e)]?-0x1:0x0),_0xbe7512=cloneDeep(_0x525b99),_0x525b99=_0x525b99[_0x212b1b(0x2bb)](_0x46b9a8=>{const _0x1336a0=_0x212b1b,_0x593f6e=config[_0x1336a0(0x2b9)]['find'](_0x3df63d=>_0x3df63d['coin']==_0x46b9a8[_0x1336a0(0x1c6)]);return _0x593f6e&&!_0x593f6e[_0x1336a0(0x1e1)];}),[_0x525b99,_0xbe7512];}async function getCoinNumber(_0x5644c6){const _0x17ac29=_0x5bc9d1;let _0x1ab8e1;try{const _0x8a1851=await exchange[_0x17ac29(0x172)]();_0x1ab8e1=_0x8a1851[_0x17ac29(0x294)][_0x5644c6];}catch(_0x1e589b){await handleError(_0x1e589b,_0x17ac29(0x285));}return _0x1ab8e1;}async function getOpenOrders(){const _0x372a3e=_0x5bc9d1;let _0x225cc4;allOpenOrders=[];try{for(const _0x1710d9 of config[_0x372a3e(0x2b9)]){!_0x1710d9[_0x372a3e(0x1e1)]&&_0x1710d9[_0x372a3e(0x1c6)]!=config[_0x372a3e(0x2ca)]&&(_0x225cc4=await exchange[_0x372a3e(0x221)](_0x1710d9[_0x372a3e(0x242)]),_0x225cc4[_0x372a3e(0x1d2)]>0x0&&allOpenOrders[_0x372a3e(0x1a5)](_0x225cc4[0x0]));}}catch(_0x182654){await handleError(_0x182654,_0x372a3e(0x2ef));}}async function handleOpenOrders(_0x78dc9d=0x0){const _0x3d34e3=_0x5bc9d1;allOpenOrders[_0x3d34e3(0x1d2)]==0x0&&lockOrders==ORDERS[_0x3d34e3(0x17e)]&&allOrdersPlaced&&(_0x78dc9d==0x0?(logger['debug'](_0x3d34e3(0x313)),_0x78dc9d++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x3d34e3(0x296)]('2\x20-\x20Handled\x20open\x20orders'),validateOrders(_0x3d34e3(0x1d9))));}async function testAPI(_0x231355){const _0x417957=_0x5bc9d1;logger['debug'](_0x417957(0x237));const _0x2b342c=ccxt['pro'][_0x231355['exchange'][_0x417957(0x210)]()],_0x5aa4ba=new _0x2b342c({'apiKey':_0x231355[_0x417957(0x233)],'secret':_0x231355['apiSecret'],'options':{'defaultType':'spot'}});if(_0x231355[_0x417957(0x2ad)])_0x5aa4ba[_0x417957(0x1f5)]=_0x231355[_0x417957(0x2ad)];try{await _0x5aa4ba[_0x417957(0x172)]();}catch(_0x4af698){logger[_0x417957(0x296)](_0x417957(0x198)+_0x4af698[_0x417957(0x1c0)]());throw _0x4af698;}}function cloneDeep(_0x13a82b){const _0x4495e4=_0x5bc9d1;return JSON['parse'](JSON[_0x4495e4(0x280)](_0x13a82b));}async function getPortfolio(_0x217f43){const _0x445811=_0x5bc9d1;let _0x36c88c=[],_0x9fc17f=[],_0x1804e8=[],_0x7cef42;_0x217f43[_0x445811(0x233)]=decryptRSA(secure[_0x445811(0x321)],_0x217f43[_0x445811(0x233)]),_0x217f43[_0x445811(0x23c)]=decryptRSA(secure[_0x445811(0x321)],_0x217f43['apiSecret']);if(_0x217f43['apiPassword'])_0x217f43[_0x445811(0x2ad)]=decryptRSA(secure['privateKey'],_0x217f43[_0x445811(0x2ad)]);if(_0x217f43[_0x445811(0x233)]!==_0x445811(0x18e)||_0x217f43[_0x445811(0x23c)]!==_0x445811(0x18e)||_0x217f43[_0x445811(0x2ad)]&&_0x217f43[_0x445811(0x2ad)]!==_0x445811(0x18e)){if(config[_0x445811(0x1c1)]){if(_0x217f43[_0x445811(0x233)]==_0x445811(0x18e))_0x217f43[_0x445811(0x233)]=config[_0x445811(0x233)];if(_0x217f43[_0x445811(0x23c)]==_0x445811(0x18e))_0x217f43[_0x445811(0x23c)]=config['apiSecret'];if(_0x217f43[_0x445811(0x2ad)]==_0x445811(0x18e))_0x217f43['apiPassword']=config[_0x445811(0x2ad)];}try{if(_0x217f43[_0x445811(0x1ba)])await testAPI(_0x217f43);}catch(_0x179327){if(_0x179327[_0x445811(0x1c0)]()[_0x445811(0x329)](_0x445811(0x27e))){logHistory(_0x445811(0x228),_0x445811(0x2fe)),logHistory(_0x445811(0x228),_0x445811(0x206)+_0x179327[_0x445811(0x1c0)]()),proxyEmit('portfolio1',![]);return;}else{if(_0x179327['toString']()['includes'](_0x445811(0x273))){logHistory(_0x445811(0x228),_0x445811(0x20d)),logHistory(_0x445811(0x228),_0x445811(0x206)+_0x179327[_0x445811(0x1c0)]()),proxyEmit(_0x445811(0x20c),![]);return;}else{logHistory(_0x445811(0x228),_0x445811(0x2ba)+_0x179327['toString']()),logger[_0x445811(0x296)]('Error\x20details:',_0x179327),proxyEmit(_0x445811(0x20c),![]);return;}}}exchange?updateExchange(_0x217f43['apiKey'],_0x217f43['apiSecret'],_0x217f43[_0x445811(0x2ad)]):await initExchange(_0x217f43[_0x445811(0x1c1)],_0x217f43[_0x445811(0x233)],_0x217f43['apiSecret'],_0x217f43[_0x445811(0x2ad)]);await loadSymbols();const _0x2dfb17=await getCoins(0x0,![],_0x217f43[_0x445811(0x2ca)]);_0x1804e8=cloneDeep(_0x2dfb17[0x1]);}else{const _0x42fce1=await getCoins();_0x1804e8=cloneDeep(_0x42fce1[0x1]);}if(_0x217f43[_0x445811(0x2ca)]=='')proxyEmit(_0x445811(0x20c),!![]),proxyEmit(_0x445811(0x18a),_0x1804e8);else{_0x1804e8[_0x445811(0x1ae)](_0x4d56f1=>{const _0x50c560=_0x445811;if(_0x4d56f1[_0x50c560(0x1c6)]!=_0x217f43[_0x50c560(0x2ca)]&&allSymbols[_0x50c560(0x329)](_0x4d56f1[_0x50c560(0x242)]))_0x36c88c[_0x50c560(0x1a5)](_0x4d56f1[_0x50c560(0x242)]);});if(_0x36c88c['length']==0x0)logHistory(_0x445811(0x228),_0x445811(0x336));else{try{_0x9fc17f=await getTickers(_0x36c88c);}catch(_0x5d94c7){logHistory(_0x445811(0x228),_0x445811(0x205)),logger[_0x445811(0x296)]('Error\x20details:',_0x5d94c7),proxyEmit(_0x445811(0x20c),![]);return;}_0x1804e8[_0x445811(0x1ae)](_0x398304=>{const _0x4106f7=_0x445811;_0x398304[_0x4106f7(0x1c6)]!=_0x217f43['basecoin']?_0x9fc17f[_0x398304['symbol']]?_0x7cef42=_0x398304[_0x4106f7(0x188)]?0x1/_0x9fc17f[_0x398304[_0x4106f7(0x242)]][_0x4106f7(0x25c)]:_0x9fc17f[_0x398304[_0x4106f7(0x242)]][_0x4106f7(0x25c)]:_0x7cef42=0x0:_0x7cef42=0x1,_0x398304[_0x4106f7(0x2f8)]=formatResult(_0x7cef42,0x8);}),await getMarketCap(_0x1804e8),proxyEmit(_0x445811(0x20c),!![]),proxyEmit(_0x445811(0x18a),_0x1804e8);}}}function truncateTradeAmount(_0xd21113,_0x4ba7c9){let _0x14d6a0=0x0;try{_0x14d6a0=exchange['amountToPrecision'](_0xd21113,_0x4ba7c9);}catch(_0x596877){}return _0x14d6a0;}function checkMinimums(_0x3cef87){const _0x47ca16=_0x5bc9d1;let _0xb04db0=!![];const _0x537b5b=!_0x3cef87[_0x47ca16(0x188)]?markets[_0x3cef87[_0x47ca16(0x242)]][_0x47ca16(0x2c6)]['amount'][_0x47ca16(0x2e0)]:markets[_0x3cef87[_0x47ca16(0x242)]][_0x47ca16(0x2c6)][_0x47ca16(0x2fa)][_0x47ca16(0x2e0)],_0x4dd723=!_0x3cef87[_0x47ca16(0x188)]?markets[_0x3cef87['symbol']]['limits'][_0x47ca16(0x2fa)][_0x47ca16(0x2e0)]:markets[_0x3cef87['symbol']]['limits'][_0x47ca16(0x196)][_0x47ca16(0x2e0)],_0x1b2537=truncateTradeAmount(_0x3cef87[_0x47ca16(0x242)],_0x3cef87[_0x47ca16(0x1ac)]);_0x3cef87[_0x47ca16(0x1ac)]=_0x1b2537;if(Math['abs'](_0x1b2537)<_0x537b5b)_0xb04db0=![];if(Math[_0x47ca16(0x18d)](_0x1b2537)*_0x3cef87['last']<_0x4dd723)_0xb04db0=![];if(_0x3cef87['side']==_0x47ca16(0x31b)){let _0x371fd3=config['portfolio']['find'](_0x56d4c3=>_0x56d4c3[_0x47ca16(0x1c6)]==_0x3cef87[_0x47ca16(0x1c6)]);if(_0x371fd3[_0x47ca16(0x25f)]>0x0){if(Math[_0x47ca16(0x18d)](_0x1b2537)>_0x3cef87[_0x47ca16(0x213)]-_0x371fd3[_0x47ca16(0x25f)])_0xb04db0=![];}else{if(Math['abs'](_0x1b2537)>_0x3cef87[_0x47ca16(0x213)])_0xb04db0=![];}}if(_0x3cef87[_0x47ca16(0x187)]==_0x47ca16(0x2f9)){let _0x55edf1=config[_0x47ca16(0x2b9)][_0x47ca16(0x335)](_0xb38abb=>_0xb38abb[_0x47ca16(0x1c6)]==config[_0x47ca16(0x2ca)]),_0x349a7d=currentCoins[_0x47ca16(0x335)](_0x361241=>_0x361241[_0x47ca16(0x1c6)]==config[_0x47ca16(0x2ca)]);if(_0x55edf1['offset']>0x0){if(Math[_0x47ca16(0x18d)](_0x1b2537)*_0x3cef87[_0x47ca16(0x25c)]>_0x349a7d[_0x47ca16(0x213)]-_0x55edf1['offset'])_0xb04db0=![];}else{if(Math['abs'](_0x1b2537)*_0x3cef87['last']>_0x349a7d[_0x47ca16(0x213)])_0xb04db0=![];}}return _0xb04db0;}async function getBalances(_0x16880e=!![]){const _0x4c6d6a=_0x5bc9d1;if(botPaused)return;let _0x5bd932=0x0,_0xbf2d2;const _0x332fd2=config[_0x4c6d6a(0x2d2)];if(config[_0x4c6d6a(0x32f)]&&config[_0x4c6d6a(0x1ab)]<0x0)await validate24hChanges();currentCoins[_0x4c6d6a(0x1ae)](_0x4ce9fb=>{const _0xecb794=_0x4c6d6a;if(_0x4ce9fb[_0xecb794(0x1c6)]!=config[_0xecb794(0x2ca)]){let _0x8393ae=gTicker[noslash(_0x4ce9fb['symbol'])];_0xbf2d2=_0x4ce9fb[_0xecb794(0x188)]?0x1/_0x8393ae:_0x8393ae;}else _0xbf2d2=0x1;let _0x1dc87d=_0x4ce9fb[_0xecb794(0x213)]*_0xbf2d2;_0x5bd932+=_0x1dc87d,_0x4ce9fb[_0xecb794(0x25c)]=formatResult(Number(_0xbf2d2),0x8),_0x4ce9fb[_0xecb794(0x32b)]=_0x1dc87d;}),currentCoins[_0x4c6d6a(0x1ae)](_0x3040e3=>{const _0x53ffbf=_0x4c6d6a;let _0x55f6a6=config['portfolio'][_0x53ffbf(0x335)](_0x330d7a=>_0x330d7a[_0x53ffbf(0x1c6)]==_0x3040e3['coin']),_0x52444b=Number(_0x55f6a6[_0x53ffbf(0x17a)]),_0x3ef67a=_0x3040e3['value']/_0x5bd932*0x64,_0x287fc0=_0x52444b*_0x5bd932/0x64/_0x3040e3['last']-_0x3040e3[_0x53ffbf(0x213)];_0x3040e3[_0x53ffbf(0x17a)]=formatResult(_0x3ef67a,0x3),_0x3040e3[_0x53ffbf(0x209)]=formatResult(_0x52444b,0x3),_0x3040e3[_0x53ffbf(0x1ac)]=formatResult(_0x287fc0,0x8),_0x3040e3[_0x53ffbf(0x187)]='',_0x3040e3[_0x53ffbf(0x215)]=![];if(_0x3040e3[_0x53ffbf(0x1c6)]!=config[_0x53ffbf(0x2ca)]){if(_0x3040e3[_0x53ffbf(0x17a)]>_0x52444b)_0x3040e3[_0x53ffbf(0x187)]=_0x53ffbf(0x31b),_0x3040e3['valid']=checkMinimums(_0x3040e3);else _0x3040e3[_0x53ffbf(0x17a)]<_0x52444b&&(_0x3040e3[_0x53ffbf(0x187)]='buy',_0x3040e3[_0x53ffbf(0x215)]=checkMinimums(_0x3040e3));}_0x3040e3[_0x53ffbf(0x28e)]=_0x3040e3[_0x53ffbf(0x17a)]/_0x3040e3[_0x53ffbf(0x209)]-0x1;if(_0x3040e3[_0x53ffbf(0x1c7)]==_0x53ffbf(0x21f)||_0x3040e3[_0x53ffbf(0x1c7)]==_0x53ffbf(0x1b5))_0x3040e3[_0x53ffbf(0x1c7)]=_0x53ffbf(0x1b7);}),currentCoins[_0x4c6d6a(0x2cb)]((_0x1005f9,_0x49f18b)=>_0x1005f9[_0x4c6d6a(0x28e)]<_0x49f18b['delta']?0x1:_0x49f18b[_0x4c6d6a(0x28e)]<_0x1005f9[_0x4c6d6a(0x28e)]?-0x1:0x0);const _0x526e36=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x526e36['eur'],'usd':_0x526e36['usd'],'portfolio':JSON[_0x4c6d6a(0x280)](currentCoins),'threshold':_0x332fd2},proxyEmit(_0x4c6d6a(0x1c2),{'serverversion':serverversion,'balances':lastBalances});if(_0x16880e){if(config[_0x4c6d6a(0x32f)])headlessMode({'portfolio':currentCoins,'threshold':_0x332fd2});else lockOrders==ORDERS[_0x4c6d6a(0x230)]&&!coolingDown&&notifyBalance({'portfolio':currentCoins,'threshold':_0x332fd2});}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0xf50f5a=getNormalizedPerformance();getStartingBalances(_0xf50f5a),emitPerformance(_0xf50f5a);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x402370=_0x5bc9d1;if(!lastBalances)return;let _0xa6e16a=[],_0x3d4d1c,_0x22e55e=JSON[_0x402370(0x1fb)](lastBalances[_0x402370(0x2b9)]);_0x22e55e[_0x402370(0x2cb)]((_0x4731f5,_0x422715)=>_0x4731f5[_0x402370(0x1c6)]>_0x422715[_0x402370(0x1c6)]?0x1:_0x422715[_0x402370(0x1c6)]>_0x4731f5['coin']?-0x1:0x0),_0x22e55e[_0x402370(0x1ae)](_0x459720=>{const _0x3d4fc9=_0x402370;let _0x2077a6={'coin':_0x459720['coin'],'number':_0x459720[_0x3d4fc9(0x213)],'price':_0x459720['last']};_0xa6e16a[_0x3d4fc9(0x1a5)](_0x2077a6);});const _0x9c44a6=await getFiat();_0x3d4d1c={'date':lastBalances[_0x402370(0x316)][_0x402370(0x1b9)]('\x20')[0x0],'eur':_0x9c44a6['eur'],'usd':_0x9c44a6['usd'],'coins':_0xa6e16a};let _0x360b50=dbPerformance[_0x402370(0x324)](_0x402370(0x1ca))[_0x402370(0x335)]({'date':_0x3d4d1c[_0x402370(0x31d)]})[_0x402370(0x32b)]();_0x360b50?_0x3d4d1c[_0x402370(0x31d)]!=config['startdate']&&dbPerformance[_0x402370(0x324)](_0x402370(0x1ca))[_0x402370(0x335)]({'date':_0x3d4d1c[_0x402370(0x31d)]})[_0x402370(0x2d8)](_0x3d4d1c)[_0x402370(0x201)]():dbPerformance[_0x402370(0x324)](_0x402370(0x1ca))[_0x402370(0x1a5)](_0x3d4d1c)[_0x402370(0x201)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x57a99d=_0x5bc9d1;let _0x391318=[];if(dbPerformance[_0x57a99d(0x22b)](_0x57a99d(0x1ca))[_0x57a99d(0x32b)]()){let _0x396a73=dbPerformance[_0x57a99d(0x324)](_0x57a99d(0x1ca))[_0x57a99d(0x191)]()[_0x57a99d(0x2bb)](_0x5a01bd=>{const _0x187dd8=_0x57a99d;if(_0x5a01bd[_0x187dd8(0x250)][_0x187dd8(0x1d2)]==0x0)return![];else return!![];})['sortBy']('date')['value'](),_0x4dd9ea=[...config[_0x57a99d(0x208)]];_0x4dd9ea[_0x57a99d(0x2cb)]((_0x56a5ba,_0x400fa2)=>_0x56a5ba[_0x57a99d(0x31d)]>_0x400fa2['date']?-0x1:_0x400fa2[_0x57a99d(0x31d)]>_0x56a5ba['date']?0x1:0x0);let _0x243b23=0x1,_0xe98e24=[],_0x499e95=0x0;_0x396a73[_0x57a99d(0x2e8)]()[_0x57a99d(0x188)]()[_0x57a99d(0x1ae)]((_0x175c5e,_0x14ecb2)=>{const _0x3ae785=_0x57a99d;if(_0x4dd9ea[_0x499e95]){if(_0x396a73[_0x396a73[_0x3ae785(0x1d2)]-_0x14ecb2]&&_0x4dd9ea[_0x499e95]['date']==_0x396a73[_0x396a73[_0x3ae785(0x1d2)]-_0x14ecb2][_0x3ae785(0x31d)]){if(_0x14ecb2<_0x396a73[_0x3ae785(0x1d2)]){let _0x5f244a=0x0,_0x5948fa=0x0;_0x396a73[_0x396a73[_0x3ae785(0x1d2)]-_0x14ecb2]['coins'][_0x3ae785(0x1ae)](_0x2d1ed4=>{const _0x330a91=_0x3ae785;_0x5948fa+=_0x2d1ed4[_0x330a91(0x213)]*_0x2d1ed4['price'];}),_0x4dd9ea[_0x499e95][_0x3ae785(0x283)][_0x3ae785(0x1ae)](_0x5977c5=>{const _0x567a26=_0x3ae785;_0x5f244a+=_0x5977c5['number']*_0x5977c5[_0x567a26(0x2f8)];}),_0x243b23*=_0x5f244a/(_0x5948fa-_0x5f244a)+0x1;}_0x499e95++;}}let _0x1b7f7a=0x0;_0x175c5e[_0x3ae785(0x250)][_0x3ae785(0x1ae)](_0x5a3324=>{const _0x363af3=_0x3ae785;_0x1b7f7a+=_0x5a3324[_0x363af3(0x213)]*_0x5a3324[_0x363af3(0x2f8)];}),_0xe98e24[_0x396a73['length']-_0x14ecb2-0x1]=_0x1b7f7a*(_0x243b23-0x1);});let _0x5803bb=[];_0x4dd9ea=[...config[_0x57a99d(0x208)]]||[];let _0x2abade=0x0;_0x499e95=0x0,_0x396a73[_0x57a99d(0x1ae)]((_0x2bf670,_0x304fb7)=>{const _0x1b47b5=_0x57a99d;if(_0x4dd9ea[_0x499e95]){const _0xf2d034=fns[_0x1b47b5(0x1fb)](_0x4dd9ea[_0x499e95][_0x1b47b5(0x31d)],_0x1b47b5(0x1b0),new Date()),_0x18050a=fns[_0x1b47b5(0x1fb)](_0x2bf670[_0x1b47b5(0x31d)],_0x1b47b5(0x1b0),new Date());if(fns['isEqual'](_0xf2d034,_0x18050a)){let _0x293a9d=0x0;_0x4dd9ea[_0x499e95][_0x1b47b5(0x283)]['forEach'](_0x32855b=>{const _0x12a714=_0x1b47b5;!_0x5803bb[_0x32855b[_0x12a714(0x1c6)]]?_0x5803bb[_0x32855b[_0x12a714(0x1c6)]]=_0x32855b[_0x12a714(0x213)]:(_0x293a9d=_0x5803bb[_0x32855b[_0x12a714(0x1c6)]],_0x5803bb[_0x32855b[_0x12a714(0x1c6)]]+=_0x32855b[_0x12a714(0x213)]);const _0xe932ad=_0x2bf670[_0x12a714(0x250)][_0x12a714(0x335)](_0x23d75a=>_0x23d75a[_0x12a714(0x1c6)]==_0x32855b[_0x12a714(0x1c6)]);(!_0xe932ad||_0xe932ad['number']==0x0)&&(_0x2abade+=(-_0x32855b[_0x12a714(0x213)]-_0x293a9d)*_0x32855b['price']);}),_0x499e95++;}}_0x2bf670['coins'][_0x1b47b5(0x1ae)]((_0x364c78,_0x552c43)=>{const _0x1e1f83=_0x1b47b5;_0x5803bb[_0x364c78[_0x1e1f83(0x1c6)]]&&(_0x364c78['initial']=_0x5803bb[_0x364c78[_0x1e1f83(0x1c6)]]);}),_0x391318[_0x1b47b5(0x1a5)]({'date':_0x2bf670[_0x1b47b5(0x31d)],'eur':_0x2bf670[_0x1b47b5(0x2e2)],'usd':_0x2bf670[_0x1b47b5(0x33d)],'offset':_0xe98e24[_0x304fb7],'netoffset':_0x2abade,'coins':_0x2bf670[_0x1b47b5(0x250)]});});}return _0x391318;}function emitPerformance(_0x597a0f){const _0x5d993c=_0x5bc9d1;_0x597a0f[_0x5d993c(0x1d2)]!==0x0?(proxyEmit(_0x5d993c(0x1ce),_0x597a0f),lastPerformanceEmitted=getDate()):proxyEmit(_0x5d993c(0x1ce),[]);}function getPerf(_0x52e2ed,_0x425bea){const _0x198096=_0x5bc9d1;let _0x36a17a=0x0,_0x2db80d=0x0,_0x1e319e=0x0;_0x52e2ed[_0x198096(0x250)]['forEach'](_0x23b798=>{const _0x21f6f1=_0x198096;_0x36a17a+=_0x23b798['number']*_0x23b798[_0x21f6f1(0x2f8)];});_0x425bea&&(_0x36a17a+=_0x52e2ed[_0x198096(0x25f)]);if(config['basecoin']===_0x198096(0x2e9)||config[_0x198096(0x2ca)]===_0x198096(0x1e6)||config[_0x198096(0x2ca)]==='PAXG')_0x2db80d=_0x36a17a*_0x52e2ed[_0x198096(0x2e2)],_0x1e319e=_0x36a17a*_0x52e2ed[_0x198096(0x33d)];else{if(usdBasecoins[_0x198096(0x329)](config['basecoin']))_0x2db80d=_0x36a17a*_0x52e2ed['eur']/_0x52e2ed[_0x198096(0x33d)],_0x1e319e=_0x36a17a;else config['basecoin']===_0x198096(0x33b)&&(_0x2db80d=_0x36a17a,_0x1e319e=_0x36a17a*_0x52e2ed[_0x198096(0x33d)]/_0x52e2ed[_0x198096(0x2e2)]);}return[_0x36a17a,_0x2db80d,_0x1e319e];}function getKPIs(_0x2f2a3f,_0xa0c06=_0x5bc9d1(0x33b)){const _0x1d606a=_0x5bc9d1,_0x191172=config[_0x1d606a(0x2ca)],_0x24db4d=lastBalances,_0x1330cf=currentCoins,_0x22955a=getNormalizedPerformance(),_0x272549=_0x2f2a3f===_0x1d606a(0x2ca)?_0x191172:_0x2f2a3f===_0x1d606a(0x2f1)||_0x2f2a3f==='net-fiat'?_0xa0c06:_0x1d606a(0x185)+_0x191172,_0x383049=_0x2f2a3f===_0x1d606a(0x2df)?_0x1d606a(0x1f8):_0x2f2a3f===_0x1d606a(0x2bc)?_0x1d606a(0x1f8):_0x272549+'\x20value',_0xa10129=_0x2f2a3f===_0x1d606a(0x2df)||_0x2f2a3f===_0x1d606a(0x2bc)?'Net\x20effect':_0x272549+_0x1d606a(0x1c3);let _0x4d354f=0x0;_0x1330cf[_0x1d606a(0x1ae)](_0x12d948=>{const _0x194ffc=_0x1d606a;_0x4d354f+=_0x12d948['number']*_0x12d948[_0x194ffc(0x25c)];});if(_0x2f2a3f===_0x1d606a(0x2f1)||_0x2f2a3f===_0x1d606a(0x2bc)){if(_0x191172==='BTC'||_0x191172===_0x1d606a(0x1e6)||_0x191172===_0x1d606a(0x254))_0x4d354f=_0x4d354f*(_0xa0c06===_0x1d606a(0x33b)?_0x24db4d[_0x1d606a(0x2e2)]:_0x24db4d[_0x1d606a(0x33d)]);else{if(usdBasecoins[_0x1d606a(0x329)](_0x191172))_0x4d354f=_0x4d354f*(_0xa0c06===_0x1d606a(0x33b)?_0x24db4d[_0x1d606a(0x2e2)]/_0x24db4d['usd']:0x1);else _0x191172===_0x1d606a(0x33b)&&(_0x4d354f=_0x4d354f*(_0xa0c06===_0x1d606a(0x33b)?0x1:_0x24db4d['usd']/_0x24db4d['eur']));}}let _0x7b40ab;if(_0x4d354f!==0x0){if(_0x2f2a3f==='basecoin')_0x7b40ab=(_0x4d354f/startingBalances['basecoin']-0x1)*0x64;else{if(_0xa0c06===_0x1d606a(0x33b))_0x7b40ab=(_0x4d354f/startingBalances[_0x1d606a(0x2e2)]-0x1)*0x64;else _0x7b40ab=(_0x4d354f/startingBalances[_0x1d606a(0x33d)]-0x1)*0x64;}let _0x3535ea=0x0;if(startingBalances['coins'])_0x1330cf[_0x1d606a(0x1ae)](_0x59ab47=>{const _0x411959=_0x1d606a;let _0x368820=startingBalances[_0x411959(0x250)][_0x411959(0x335)](_0x2d953f=>_0x2d953f[_0x411959(0x1c6)]===_0x59ab47[_0x411959(0x1c6)]);if(_0x368820&&_0x368820['coin']&&_0x59ab47['number']!==0x0)_0x3535ea+=_0x368820[_0x411959(0x213)]*_0x59ab47[_0x411959(0x25c)];});let _0x499cab=0x0;if(_0x22955a[_0x1d606a(0x1d2)]!==0x0){let _0x1ac20e=_0x22955a[_0x22955a[_0x1d606a(0x1d2)]-0x1];_0x499cab=_0x1ac20e[_0x1d606a(0x1a4)];}_0x3535ea-=_0x499cab;_0x2f2a3f===_0x1d606a(0x2df)&&(_0x7b40ab=(_0x4d354f-_0x3535ea)/startingBalances[_0x1d606a(0x2ca)]*0x64,_0x4d354f=_0x4d354f-_0x3535ea);if(_0x2f2a3f==='net-fiat'){let _0x38a33f=_0xa0c06===_0x1d606a(0x33b)?startingBalances[_0x1d606a(0x2e2)]:startingBalances[_0x1d606a(0x33d)];if(_0x191172===_0x1d606a(0x2e9)||_0x191172===_0x1d606a(0x1e6)||_0x191172===_0x1d606a(0x254))_0x3535ea=_0xa0c06===_0x1d606a(0x33b)?_0x3535ea*_0x24db4d['eur']:_0x3535ea*_0x24db4d[_0x1d606a(0x33d)];else{if(usdBasecoins[_0x1d606a(0x329)](_0x191172))_0x3535ea=_0xa0c06===_0x1d606a(0x33b)?_0x3535ea*_0x24db4d['eur']/_0x24db4d[_0x1d606a(0x33d)]:_0x3535ea;else _0x191172==='EUR'&&(_0x3535ea=_0xa0c06==='EUR'?_0x3535ea:_0x3535ea*_0x24db4d['usd']/_0x24db4d[_0x1d606a(0x2e2)]);}_0x7b40ab=(_0x4d354f-_0x3535ea)/_0x38a33f*0x64,_0x4d354f=_0x4d354f-_0x3535ea;}if(_0x7b40ab){if(_0x7b40ab<0x64)_0x7b40ab=_0x7b40ab[_0x1d606a(0x192)](0x2);else{if(_0x7b40ab<0x3e8)_0x7b40ab=_0x7b40ab[_0x1d606a(0x192)](0x1);else _0x7b40ab=_0x7b40ab[_0x1d606a(0x192)](0x0);}}else _0x7b40ab=Number('0')[_0x1d606a(0x192)](0x2);if(_0x4d354f){if(Math[_0x1d606a(0x18d)](_0x4d354f)<0.000001)_0x4d354f=_0x4d354f['toFixed'](0x2);else{if(Math[_0x1d606a(0x18d)](_0x4d354f)<0.1)_0x4d354f=_0x4d354f[_0x1d606a(0x192)](0x6);else{if(Math[_0x1d606a(0x18d)](_0x4d354f)<0x1)_0x4d354f=_0x4d354f[_0x1d606a(0x192)](0x5);else{if(Math[_0x1d606a(0x18d)](_0x4d354f)<0xa)_0x4d354f=_0x4d354f[_0x1d606a(0x192)](0x4);else{if(Math[_0x1d606a(0x18d)](_0x4d354f)<0x64)_0x4d354f=_0x4d354f[_0x1d606a(0x192)](0x3);else{if(Math[_0x1d606a(0x18d)](_0x4d354f)<0x3e8)_0x4d354f=_0x4d354f['toFixed'](0x2);else _0x4d354f=_0x4d354f[_0x1d606a(0x192)](0x2);}}}}}}else _0x4d354f=Number('0')['toFixed'](0x2);}else _0x7b40ab=Number('0')[_0x1d606a(0x192)](0x2);return{'value':_0x4d354f,'change':_0x7b40ab,'leftTxt':_0x383049,'rightTxt':_0xa10129};}async function getStartingBalances(_0x5cb485,_0x473f25=!![]){const _0x39350d=_0x5bc9d1;if(_0x5cb485[_0x39350d(0x1d2)]!==0x0){const [_0x5ff6e6,_0x3ca67f,_0x1f3c13]=getPerf(_0x5cb485[0x0],!![]);let _0x5aa6ed=[];config[_0x39350d(0x2b9)][_0x39350d(0x1ae)](_0x351352=>{const _0x474694=_0x39350d;let _0x4829de=0x0,_0x62ffd9;config[_0x474694(0x208)][_0x474694(0x1ae)](_0x4e872c=>{const _0x301399=_0x474694;let _0x16fdf1=_0x4e872c[_0x301399(0x283)][_0x301399(0x335)](_0x82cfab=>_0x82cfab['coin']==_0x351352[_0x301399(0x1c6)]);if(_0x16fdf1){_0x4829de+=_0x16fdf1[_0x301399(0x213)];if(!_0x62ffd9)_0x62ffd9=_0x16fdf1[_0x301399(0x2f8)];}}),_0x5aa6ed[_0x474694(0x1a5)]({'coin':_0x351352[_0x474694(0x1c6)],'number':_0x4829de,'initialprice':_0x62ffd9});});const _0x1d336c={'basecoin':_0x5ff6e6,'eur':_0x3ca67f,'usd':_0x1f3c13,'coins':_0x5aa6ed};if(_0x473f25)proxyEmit(_0x39350d(0x232),_0x1d336c);startingBalances=_0x1d336c;}}function headlessMode(_0x4f259c){const _0x4342c0=_0x5bc9d1;let _0x149c92=_0x4f259c[_0x4342c0(0x2b9)],_0x5ee6b2=_0x4f259c[_0x4342c0(0x2d2)],_0x205b90=[];for(let _0x36812f of _0x149c92){if(_0x36812f[_0x4342c0(0x1c6)]!=config[_0x4342c0(0x2ca)]){if(_0x36812f['delta']>=_0x5ee6b2/0x64){if(_0x36812f[_0x4342c0(0x215)])_0x205b90['push'](_0x36812f);}else{if(_0x36812f['delta']<=-_0x5ee6b2/0x64){if(_0x36812f[_0x4342c0(0x215)])_0x205b90['push'](_0x36812f);}}}}_0x205b90['length']>0x0&&placeOrder(_0x205b90);}function notifyBalance(_0x1a1c05){const _0x36c876=_0x5bc9d1;let _0x30c171=_0x1a1c05[_0x36c876(0x2b9)],_0x2fee4d=_0x1a1c05[_0x36c876(0x2d2)],_0x4172ce=[];for(let _0x52ba67 of _0x30c171){if(_0x52ba67[_0x36c876(0x1c6)]!=config[_0x36c876(0x2ca)]){if(_0x52ba67[_0x36c876(0x28e)]>=_0x2fee4d/0x64){if(_0x52ba67['valid'])_0x4172ce[_0x36c876(0x1a5)](_0x52ba67);}else{if(_0x52ba67['delta']<=-_0x2fee4d/0x64){if(_0x52ba67[_0x36c876(0x215)])_0x4172ce[_0x36c876(0x1a5)](_0x52ba67);}}}}if(_0x4172ce[_0x36c876(0x1d2)]>0x0){let _0x346b78=_0x4172ce[_0x36c876(0x174)](_0x250fef=>_0x250fef['coin']);_0x346b78[_0x36c876(0x2cb)]();let _0x22764a=_0x346b78[_0x36c876(0x306)](',\x20');if(!lastCoinsToBalance)logHistory(_0x36c876(0x180),_0x36c876(0x1ea));lastCoinsToBalance=_0x22764a;}}function symbolToCoin(_0x1c725a){const _0x3b3379=_0x5bc9d1;let _0x4fb065;if(_0x1c725a[_0x3b3379(0x329)]('/'+config[_0x3b3379(0x2ca)]))_0x4fb065=_0x1c725a['replace']('/'+config[_0x3b3379(0x2ca)],'');if(_0x1c725a[_0x3b3379(0x329)](config[_0x3b3379(0x2ca)]+'/'))_0x4fb065=_0x1c725a[_0x3b3379(0x2ea)](config[_0x3b3379(0x2ca)]+'/','');return _0x4fb065;}function _0x2b35(){const _0x55d4a6=['quote','splice','uncaughtException','configuration-stored','bot','symbol','sqrt','privateKeyFromPem','must\x20be\x20greater\x20than\x20minimum\x20amount','send','toUpperCase','Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute','\x20closed\x20the\x20connection\x20(see:\x20hodlerhacks.com/fix/5)','event-history','\x20>\x20stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','Market','recreateCoinResults()','2897992Deeenf','1\x20-\x20FILLED\x20unknown\x20order:\x20','coins','onepagemode','datetime','createWriteStream','PAXG','status\x20code\x20401','success','marketcapsqrt','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','Binance','isEqual','order','last','cancelOrders()','string','offset','log','cancelLoading','Resetting\x20coin\x20results:\x20','exchange\x20reload','deleteHistoryAlerts','lowdb/adapters/FileSync','BNB/','2.6.22','sendPortfolioTelegram','Order\x20filled:\x20','event','pki','API-key\x20format\x20invalid','Pausing\x20for\x20','startdate','market_cap','enabled','\x20|\x20exchange:\x20','progress','PermissionDenied','\x20>\x20','padStart','\x20|\x20highest\x20fee:\x20','decode64','./logs/','starting-balance-','30jcNcGF','round','Error\x20details:','decrypt','AuthenticationError','Initializing\x20exchange:\x20already\x20done','stringify','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','Huobi','changes','Stopped\x20fetching\x20balance\x20after\x20','getCoinNumber()','\x20-\x20bot\x20switched\x20to\x20manual\x20mode','loadSymbols()','message','padEnd','timeout','added','startsWith','<pre>','delta','prevnumber','Reset\x20|\x20','/backup/','fetchTickers','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','total','Limit\x20(low-margin)','debug','\x20orders\x20in\x20less\x20than\x20','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','timeshift','1\x20-\x20FILLED\x20known\x20order:\x20','keys','001','axios','heapUsed','limit','sha256','differenceInSeconds','orderId','Limit\x20(high-margin)','emojisell','storeHeadless','ID:\x20','getMonth','page','percentage','TUSD','\x20API\x20key,\x20secret\x20or\x20password\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','defaults','apiPassword','\x20API\x20secret\x20is\x20invalid','getMinutes','breakeven','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','freeze','Unfilled\x20order(s)\x20canceled\x20after\x20','emojibuy','pro','/USD','Loading\x20completed','7GRrEcj','portfolio','Error\x20occurred:\x20','filter','net-fiat','\x20not\x20available\x20(see:\x20hodlerhacks.com/fix/5)','2.5.0','2.6.23','storeFiat','Exception\x20thrown\x20in\x20','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20trying\x20again\x20in\x20','\x20>\x20details:','resetHistory','limits','getFullYear','environment','args','basecoin','sort','Valid\x20balance\x20for\x20','settings','fromCodePoint','Block\x20transaction\x20detection:\x20','Invalid\x20quantity','Error\x20while\x20deleting\x20files:\x20','threshold','yargs/yargs','restart','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','Portfolio\x20change\x20detected:\x20','staging','assign','version','bitmex','no\x20exchange\x20reloaded','format','Headless:\x20','USDT','net-basecoin','min','timestamp','eur','Executed\x20','logs','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','\x20order:\x20','path','slice','BTC','replace','2.6.0','Invalid\x20symbol:\x20','./config/','USDP','getOpenOrders()','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','fiat','MIN_NOTIONAL','\x20uses\x20','Order\x20is\x20invalid:\x20','\x20API\x20key\x20is\x20invalid','Portfolio\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','search','price','buy','cost','switch-manual','util','exec','Invalid\x20API\x20details,\x20please\x20try\x20again\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','DDoSProtection','openOrders','closed','\x20minutes','storeConfiguration','initial','\x20-\x20bot\x20not\x20started','join','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','botname','%\x20(','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','enableFiatToggle','Cryptocom','-events.json','remainingSymbols','\x0aSymbol(s):\x20','\x20minutes\x20-\x20','USDC','1\x20-\x20Handle\x20open\x20orders','Resuming\x20(','full','time','ExchangeNotAvailable','entries','ongoing','create','sell','placeOrder()','date','\x20(see:\x20hodlerhacks.com/fix/1)','Failed\x20to\x20load\x20market\x20data\x20-\x20bot\x20not\x20started','\x20|\x20','privateKey','\x20blocked\x20API\x20(RateLimitExceeded)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','Error:\x20Invalid\x20argument\x20','get','\x20attempts','\x20metrics:</b>\x20\x0a\x0a','market','\x20:\x20','includes','-config.json','value','toggleBotMode','quick','final','headless','token\x20is\x20expired','\x20exchange','5380rtOHiP','constructor','initclient','find','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','marketcapApi','pid','kill','fee','EUR','request-time','usd','OrderNotFound','5052dEZwdS','leftTxt','Order\x20amount\x20is\x20invalid:\x20','bot-','\x20|\x20Custom\x20ID:\x20','marketcapEnabled','findIndex','random','type','fetchBalance','startprice','map','watchTrades','Cex','indexOf','Exchange','getSeconds','distribution',':\x20Bot\x20','startnumber','fees','LOCKED','balancing\x20resumes\x20when\x20cooldown\x20ends','warning','Initializing\x20coin\x20results','Initializing\x20exchange','highest','Resetting\x20bot\x20history','Net\x20','sortBy','side','reverse','cooldown','portfolio2','function','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','abs','************','<b>','shift','cloneDeep','toFixed','Waited\x20','marketcap','removed','amount','6768iISkht','Error\x20in\x20testAPI():\x20','configstate','439626imIpyA','add','Bot\x20','active','existsSync','ExchangeError','change','\x20not\x20responding\x20(see:\x20hodlerhacks.com/fix/5)','\x20>\x20[DEBUG]\x20','red_yellow_blue','netoffset','push','No\x20more\x20open\x20orders\x20-\x20','createOrder','exchanges','cancel','getTime','change24h','trade','-------------------------------\x0a','forEach','2vpEKhq','yyyy/MM/dd','recent20','fetchBalance()','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','11308aLFvDs','canceled','3199362gTFkDw','none','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)','split','testApi','buys','floor',')\x20known\x20order:\x20','slider','watchTrades()','toString','exchange','balances','\x20change',')\x20|\x20exchange:\x20','fetchTicker','coin','orderstatus','748290eQgxEw','Failed\x20to\x20load\x20coin\x20data\x20for\x20','data','set','update-liquidity','./version.json','performance','running','RequestTimeout','1\x20-\x20Validate\x20orders:\x20','length','detectLiquidityChange()','pop','production','configuration','-results.json','Invalid\x20balance\x20for\x20','no\x20open\x20orders','1\x20-\x20partially\x20FILLED\x20(','max','ccxt','194036DBOguV','Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)','\x20exchange\x20error:\x20','loadMarkets','excluded','\x20blocked\x20API\x20(DDoSProtection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','USD','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','currency','ETH','cancelOrder','customId','basecoinvalue','Manual\x20balancing\x20required','Initiating\x20bot\x20restart','lowdb','Unknown\x20error:\x20','bots','watchTradesForSymbols','2\x20-\x20Validate\x20orders:\x20','UNLOCKING','/output-000.log','showname','realized','password','remove','autoliquidity','Net\x20effect','argv','(((.+)+)+)+$','parse','secure','Error\x20in\x20loadSymbols():\x20','NetworkError','BNB','getStartingBalances','write','\x20portfolio:</b>\x20\x0a\x0a','spot','\x20MB','Unknown\x20error\x20-\x20check\x20logs','Error\x20details:\x20','\x20has\x20a\x2024h\x20drop\x20of\x20','liquidity','target',')\x20unknown\x20order:\x20','getHours','portfolio1','Exchange\x20permission\x20denied\x20-\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','status','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','toLowerCase','ordertype','mkdirSync','number','getDate','valid','InvalidOrder','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','-performance.json','2.3.5','RSA-OAEP','\x20/\x20','open','Fee\x20discount\x20refund\x20detected:\x20','watchOrders','filled','recreate','fetchOpenOrders','\x20hour','rightTxt','complete','RETRY\x20-\x20Problem\x20resolved\x20after\x20','Huobipro','0\x20-\x20EXECUTION:\x20','error','\x20|\x20lock\x20orders:\x20','RateLimitExceeded','has','average','Order(s)\x20not\x20validated\x20after\x20','OnMaintenance','\x20-\x20bot\x20already\x20running\x20in\x20manual\x20mode','UNLOCKED',':\x20timer\x20>','starting-balances','apiKey','balancing\x20resumed','Bybit','node-forge','Test\x20API','***','/EUR','2\x20-\x20handling\x20FILLED\x20order:\x20','recovery','apiSecret'];_0x2b35=function(){return _0x55d4a6;};return _0x2b35();}function setLockOrders(_0x56d90e){const _0x4da807=_0x5bc9d1;lockOrders=_0x56d90e,logger[_0x4da807(0x296)]('Set\x20lock\x20orders\x20to:\x20'+Object[_0x4da807(0x29b)](ORDERS)[lockOrders]);}async function unlockOrders(_0x193c2d=![]){const _0x14f658=_0x5bc9d1;if(allOrdersPlaced&&lockOrders==ORDERS[_0x14f658(0x17e)]){setLockOrders(ORDERS[_0x14f658(0x1f1)]);if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);if(_0x193c2d){const _0x4e317f=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x4e317f,setBlockTransactionDetection(![]);}validateOrdersState=_0x14f658(0x304),persistOpenOrders([]),setLockOrders(ORDERS[_0x14f658(0x230)]);}}async function validateOrders(_0x3d28a3){const _0x3a7da7=_0x5bc9d1;if(_0x3d28a3)validateOrdersState=_0x3d28a3;logger[_0x3a7da7(0x296)](_0x3a7da7(0x1d1)+validateOrdersState+_0x3a7da7(0x229)+Object[_0x3a7da7(0x29b)](ORDERS)[lockOrders]);let _0x3ced27=[],_0xb1d52b=config[_0x3a7da7(0x211)]=='market'?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x3a7da7(0x28a)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x3a7da7(0x17e)])return;logger['debug'](_0x3a7da7(0x1f0)+validateOrdersState);for(let _0x46981d=lastOrders['length']-0x1;_0x46981d>=0x0;_0x46981d--){let _0x1c23e3=lastOrders[_0x46981d],_0x188c37=![];_0x1c23e3[_0x3a7da7(0x21f)]>0x0&&(_0x188c37=!![]),_0x3ced27[_0x3a7da7(0x1a5)](_0x188c37),_0x188c37&&config[_0x3a7da7(0x211)]!=_0x3a7da7(0x327)&&logHistory(_0x3a7da7(0x25b),_0x3a7da7(0x269)+_0x1c23e3['symbol']+'\x20'+_0x1c23e3[_0x3a7da7(0x187)]+'\x20#'+formatResult(_0x1c23e3['filled'],0x8)+'\x20@'+formatResult(_0x1c23e3[_0x3a7da7(0x2f8)],0x8)),_0x188c37&&lastOrders[_0x3a7da7(0x23e)](_0x46981d,0x1);}persistOpenOrders(lastOrders);const _0x2a110c=coolingDown?_0x3a7da7(0x17f):_0x3a7da7(0x234);if(validateOrdersState=='initial'){validateOrdersState='ongoing';if(_0x3ced27['includes'](![])){}else await unlockOrders();}else{if(validateOrdersState==_0x3a7da7(0x319)){if(_0x3ced27[_0x3a7da7(0x329)](![])){}else await unlockOrders();}else{if(validateOrdersState=='final')_0x3ced27[_0x3a7da7(0x329)](![])&&(config[_0x3a7da7(0x211)]==_0x3a7da7(0x327)?logHistory(_0x3a7da7(0x256),_0x3a7da7(0x22d)+Math['round'](_0xb1d52b*validateOrderInterval/0xea60)+_0x3a7da7(0x311)+_0x2a110c):(await cancelOrders(),logHistory(_0x3a7da7(0x256),_0x3a7da7(0x2b3)+Math['round'](_0xb1d52b*validateOrderInterval/0xea60)+_0x3a7da7(0x311)+_0x2a110c))),await unlockOrders(!![]);else{if(validateOrdersState==_0x3a7da7(0x1d9)){if(config[_0x3a7da7(0x211)]!=_0x3a7da7(0x327))logHistory('success',_0x3a7da7(0x1a6)+_0x2a110c);await unlockOrders(!![]);}}}}}async function cancelOrders(){lastOrders['forEach'](async _0x5545bc=>{const _0x538f97=_0xd0c7;try{const _0x4acb79=await exchange[_0x538f97(0x1e7)](_0x5545bc[_0x538f97(0x2a2)],_0x5545bc['symbol']);}catch(_0x1d6b2e){if(_0x1d6b2e[_0x538f97(0x1c0)]()['includes'](_0x538f97(0x33e))){}else await handleError(_0x1d6b2e,_0x538f97(0x25d));}});}async function initCoinResults(_0x236c3d){const _0x205ab4=_0x5bc9d1;_0x236c3d?logger[_0x205ab4(0x296)](_0x205ab4(0x262)+_0x236c3d):logger['debug'](_0x205ab4(0x181)),config[_0x205ab4(0x2b9)][_0x205ab4(0x1ae)](_0x3faec0=>{const _0x1a4145=_0x205ab4;if(!_0x3faec0[_0x1a4145(0x1e1)]&&_0x3faec0[_0x1a4145(0x1c6)]!=config['basecoin']){const _0x3b22fe=currentCoins[_0x1a4145(0x335)](_0x2ba36e=>_0x2ba36e[_0x1a4145(0x1c6)]==_0x3faec0[_0x1a4145(0x1c6)]),_0xbfc781=gTicker[noslash(_0x3faec0[_0x1a4145(0x242)])];let _0xb45f48=_0x3b22fe?_0x3b22fe['number']:null,_0x40396a=_0x3faec0[_0x1a4145(0x188)]?0x1/_0xbfc781:_0xbfc781,_0x3bc294;config[_0x1a4145(0x208)][_0x1a4145(0x1ae)](_0x4bd01b=>{const _0x158499=_0x1a4145;!_0x3bc294&&(_0x3bc294=_0x4bd01b[_0x158499(0x283)][_0x158499(0x335)](_0x54b87b=>_0x54b87b['coin']==_0x3faec0[_0x158499(0x1c6)]),_0x3bc294&&(_0xb45f48=_0x3bc294[_0x158499(0x213)],_0x40396a=_0x3bc294[_0x158499(0x2f8)]));});let _0x9d2b8=dbCoinResults['get'](_0x1a4145(0x250))[_0x1a4145(0x335)]({'coin':_0x3faec0[_0x1a4145(0x1c6)]})['value']();if(!_0x9d2b8){const _0x1496b5={'coin':_0x3faec0[_0x1a4145(0x1c6)],'number':_0xb45f48,'breakeven':_0x40396a,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get'](_0x1a4145(0x250))[_0x1a4145(0x1a5)](_0x1496b5)['write']();}else{if(_0x236c3d&&_0x3faec0[_0x1a4145(0x1c6)]==_0x236c3d){const _0x40c51b={'coin':_0x3faec0['coin'],'number':_0xb45f48,'breakeven':_0x40396a,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x1a4145(0x324)](_0x1a4145(0x250))[_0x1a4145(0x335)]({'coin':_0x3faec0[_0x1a4145(0x1c6)]})[_0x1a4145(0x2d8)](_0x40c51b)[_0x1a4145(0x201)]();}}}});}async function updateCoinResults(_0x44ef3b,_0x243eb4=![]){const _0x273c18=_0x5bc9d1;let _0x39d8a6,_0x4df6a5,_0x305eef,_0x141cd6,_0x222b3b,_0x4c3ccc,_0x124a39=dbCoinResults['get'](_0x273c18(0x250))[_0x273c18(0x335)]({'coin':_0x44ef3b[_0x273c18(0x1c6)]})[_0x273c18(0x32b)](),_0x2238d9=![];_0x124a39&&Object[_0x273c18(0x318)](_0x124a39)[_0x273c18(0x1ae)](([_0x23517f,_0x21b347])=>{if(_0x21b347==null)_0x2238d9=!![];});(!_0x124a39||_0x2238d9)&&(await initCoinResults(_0x44ef3b[_0x273c18(0x1c6)]),_0x124a39=dbCoinResults['get'](_0x273c18(0x250))['find']({'coin':_0x44ef3b['coin']})['value']());_0x44ef3b[_0x273c18(0x188)]&&(_0x4c3ccc={'filled':_0x44ef3b[_0x273c18(0x21f)]*_0x44ef3b[_0x273c18(0x2f8)],'amount':_0x44ef3b[_0x273c18(0x21f)]*_0x44ef3b['price'],'side':_0x44ef3b[_0x273c18(0x187)]==_0x273c18(0x31b)?_0x273c18(0x2f9):_0x273c18(0x31b),'price':0x1/_0x44ef3b['price']},_0x44ef3b={..._0x44ef3b,..._0x4c3ccc});_0x243eb4?_0x4df6a5=_0x44ef3b[_0x273c18(0x187)]==_0x273c18(0x2f9)?_0x124a39['number']+_0x44ef3b[_0x273c18(0x21f)]:_0x124a39[_0x273c18(0x213)]-_0x44ef3b[_0x273c18(0x21f)]:_0x4df6a5=await getCoinNumber(_0x44ef3b[_0x273c18(0x1c6)]);if(_0x44ef3b[_0x273c18(0x33a)]&&_0x44ef3b[_0x273c18(0x33a)][_0x273c18(0x1e5)]==config[_0x273c18(0x2ca)])_0x39d8a6=Number(_0x44ef3b[_0x273c18(0x33a)][_0x273c18(0x2fa)]);else{if(_0x44ef3b[_0x273c18(0x33a)]&&_0x44ef3b[_0x273c18(0x33a)][_0x273c18(0x1e5)]==_0x273c18(0x1ff)&&!_0x243eb4&&config[_0x273c18(0x2ca)]!='PAXG')_0x39d8a6=Number(_0x44ef3b[_0x273c18(0x33a)][_0x273c18(0x2fa)])*gTicker[_0x273c18(0x1ff)+config[_0x273c18(0x2ca)]];else _0x39d8a6=defaultFee*_0x44ef3b['filled']*_0x44ef3b['price'];}_0x44ef3b[_0x273c18(0x187)]==_0x273c18(0x2f9)?(_0x305eef=_0x4df6a5!=0x0?(_0x124a39['breakeven']*_0x124a39['number']+_0x44ef3b[_0x273c18(0x2f8)]*(_0x4df6a5-_0x124a39[_0x273c18(0x213)])+_0x39d8a6)/_0x4df6a5:0x0,_0x141cd6=_0x124a39[_0x273c18(0x1f4)]):(_0x305eef=_0x4df6a5!=0x0?(_0x124a39[_0x273c18(0x2b0)]*_0x124a39[_0x273c18(0x213)]-_0x44ef3b[_0x273c18(0x2f8)]*(_0x124a39[_0x273c18(0x213)]-_0x4df6a5)+_0x39d8a6)/_0x4df6a5:0x0,_0x141cd6=_0x124a39[_0x273c18(0x1f4)]+(_0x44ef3b[_0x273c18(0x2f8)]-_0x124a39[_0x273c18(0x2b0)])*_0x44ef3b[_0x273c18(0x21f)]);_0x222b3b=(_0x44ef3b[_0x273c18(0x2f8)]-_0x305eef-_0x39d8a6/_0x44ef3b['filled'])*_0x4df6a5;let _0xd7d382={'coin':_0x44ef3b[_0x273c18(0x1c6)],'number':_0x4df6a5,'breakeven':formatResult(_0x305eef,0x8),'realized':formatResult(_0x141cd6,0x8),'unrealized':formatResult(_0x222b3b,0x8),'fees':formatResult(_0x124a39[_0x273c18(0x17d)]+_0x39d8a6,0x8),'sells':_0x44ef3b[_0x273c18(0x187)]==_0x273c18(0x31b)?_0x124a39['sells']+0x1:_0x124a39['sells'],'buys':_0x44ef3b['side']==_0x273c18(0x2f9)?_0x124a39[_0x273c18(0x1bb)]+0x1:_0x124a39[_0x273c18(0x1bb)]};dbCoinResults['get'](_0x273c18(0x250))[_0x273c18(0x335)]({'coin':_0x44ef3b['coin']})[_0x273c18(0x2d8)](_0xd7d382)[_0x273c18(0x201)]();if(!_0x243eb4){if(_0x44ef3b[_0x273c18(0x33a)]&&_0x44ef3b[_0x273c18(0x33a)][_0x273c18(0x1e5)]=='BNB'){const _0x50be68=currentCoins[_0x273c18(0x335)](_0x2a0e69=>_0x2a0e69[_0x273c18(0x1c6)]=='BNB');if(_0x50be68){let _0x13e55c=dbCoinResults['get'](_0x273c18(0x250))['find']({'coin':'BNB'})[_0x273c18(0x32b)]();_0xd7d382={..._0x13e55c,'number':_0x50be68['number']},dbCoinResults[_0x273c18(0x324)]('coins')[_0x273c18(0x335)]({'coin':_0x273c18(0x1ff)})['assign'](_0xd7d382)['write']();}}}}async function placeOrder(_0x41538f){const _0x1f130d=_0x5bc9d1,_0x357e39=config[_0x1f130d(0x211)]==_0x1f130d(0x327)?_0x1f130d(0x327):_0x1f130d(0x29f);if(lockOrders==ORDERS[_0x1f130d(0x230)]&&!coolingDown){setLockOrders(ORDERS[_0x1f130d(0x17e)]);while(transactionDetectionOngoing){await sleep(0x64);}logger['debug']('Placing\x20order\x20for:\x20'+_0x41538f[_0x1f130d(0x174)](_0x16abb3=>_0x16abb3['coin'])[_0x1f130d(0x306)](',\x20')),lastCoinsToBalance='',allOrdersPlaced=![],validateOrdersState='initial';let _0x3e146d=![];lastOrders=[];const _0x402c32=config[_0x1f130d(0x2d2)];for(const _0x3e8c22 of _0x41538f){let _0x5481b5,_0xf9beb8,_0x211b45,_0x5bb5bb,_0x37f392,_0x3524d5=_0x3e8c22[_0x1f130d(0x242)];logger[_0x1f130d(0x296)]('Trigger:\x20'+_0x3e8c22['coin']+'\x20'+_0x3e8c22['number']+'\x20'+_0x3e8c22[_0x1f130d(0x25c)]+'\x20'+_0x3e8c22[_0x1f130d(0x17a)]+'%\x20'+_0x3e8c22[_0x1f130d(0x209)]+'%\x20'+(0x64*_0x3e8c22[_0x1f130d(0x28e)])[_0x1f130d(0x192)](0x2)+_0x1f130d(0x309)+_0x402c32[_0x1f130d(0x192)](0x2)+'%)');const _0x384d4c=currentCoins['find'](_0x3e93b2=>_0x3e93b2[_0x1f130d(0x1c6)]==_0x3e8c22[_0x1f130d(0x1c6)]);_0x384d4c&&(_0x384d4c[_0x1f130d(0x28f)]=_0x3e8c22['number']);try{const _0x256a73=await exchange['fetchTicker'](_0x3524d5);_0x5481b5=_0x3e8c22[_0x1f130d(0x188)]?0x1/_0x3e8c22['last']:_0x3e8c22[_0x1f130d(0x25c)],_0xf9beb8=_0x256a73['bid'],_0x211b45=_0x256a73['ask'];_0x3e8c22[_0x1f130d(0x188)]?(_0x5bb5bb=_0x3e8c22[_0x1f130d(0x187)]=='buy'?_0x1f130d(0x31b):_0x1f130d(0x2f9),_0x37f392=Math[_0x1f130d(0x18d)](_0x3e8c22[_0x1f130d(0x1ac)])/_0x5481b5):(_0x5bb5bb=_0x3e8c22[_0x1f130d(0x187)],_0x37f392=Math[_0x1f130d(0x18d)](_0x3e8c22[_0x1f130d(0x1ac)]));_0x357e39=='limit'&&(config[_0x1f130d(0x211)]=='limit-high'&&(_0x5481b5=_0x5bb5bb==_0x1f130d(0x2f9)?_0xf9beb8:_0x211b45),config[_0x1f130d(0x211)]=='limit-low'&&(_0x5481b5=_0x5bb5bb==_0x1f130d(0x2f9)?_0x211b45:_0xf9beb8));_0x37f392=formatResult(_0x37f392,0x8),_0x5481b5=formatResult(_0x5481b5,0x8);const _0x3cad84=_0x5bb5bb=='sell'?config[_0x1f130d(0x2a4)]?String[_0x1f130d(0x2ce)]('0x'+config['emojisell'])+'\x20':'':config['emojibuy']?String[_0x1f130d(0x2ce)]('0x'+config[_0x1f130d(0x2b4)])+'\x20':'',_0x956e87=_0x357e39==_0x1f130d(0x327)?_0x1f130d(0x24c):config['ordertype']=='limit-high'?_0x1f130d(0x2a3):_0x1f130d(0x295),_0x298f7f=(Math[_0x1f130d(0x1bc)](Math[_0x1f130d(0x170)]()*0x35a4e900)+0x5f5e100)[_0x1f130d(0x1c0)]();lastOrders['push']({'customId':_0x298f7f,'symbol':_0x3524d5,'coin':_0x3e8c22[_0x1f130d(0x1c6)],'amount':_0x37f392,'price':_0x5481b5,'side':_0x5bb5bb,'reverse':_0x3e8c22['reverse'],'filled':0x0});if(_0x357e39==_0x1f130d(0x327))logHistory('order',''+_0x3cad84+_0x956e87+_0x1f130d(0x2e6)+_0x3524d5+'\x20'+_0x5bb5bb+'\x20#'+formatResult(_0x37f392,0x8)+'\x20@'+formatResult(_0x5481b5,0x8));else logHistory(_0x1f130d(0x25b),''+_0x3cad84+_0x956e87+_0x1f130d(0x2e6)+_0x3524d5+'\x20'+_0x5bb5bb+'\x20#'+formatResult(_0x37f392,0x8)+'\x20@'+formatResult(_0x5481b5,0x8));let _0x15d1b2;_0x357e39==_0x1f130d(0x327)?_0x5bb5bb=='buy'&&[_0x1f130d(0x235),'Bitget',_0x1f130d(0x176),_0x1f130d(0x282),_0x1f130d(0x226)][_0x1f130d(0x329)](config[_0x1f130d(0x1c1)])?_0x15d1b2=await exchange[_0x1f130d(0x1a7)](_0x3524d5,_0x357e39,_0x5bb5bb,_0x37f392,_0x5481b5):_0x15d1b2=await exchange[_0x1f130d(0x1a7)](_0x3524d5,_0x357e39,_0x5bb5bb,_0x37f392,undefined):_0x15d1b2=await exchange[_0x1f130d(0x1a7)](_0x3524d5,_0x357e39,_0x5bb5bb,_0x37f392,_0x5481b5);logger[_0x1f130d(0x296)](_0x1f130d(0x2a6)+_0x15d1b2['id']+_0x1f130d(0x16d)+_0x298f7f);const _0x1c6e80=lastOrders[_0x1f130d(0x1d2)]-0x1;if(_0x1c6e80>=0x0&&lastOrders[_0x1c6e80][_0x1f130d(0x1e8)]==_0x298f7f){lastOrders[_0x1c6e80][_0x1f130d(0x2a2)]=_0x15d1b2['id'];if(_0x15d1b2[_0x1f130d(0x196)])lastOrders[_0x1c6e80]['amount']=_0x15d1b2[_0x1f130d(0x196)];if(_0x15d1b2[_0x1f130d(0x2f8)])lastOrders[_0x1c6e80][_0x1f130d(0x2f8)]=_0x15d1b2['price'];lastOrders[_0x1c6e80]['fee']=_0x15d1b2[_0x1f130d(0x33a)];}if(config[_0x1f130d(0x189)]!=0x0){let _0x1aee93=null;if(cooldownTracker['length']==config[_0x1f130d(0x189)]-0x1)_0x1aee93=cooldownTracker[_0x1f130d(0x190)]();const _0x42e248=getTimeStamp();cooldownTracker[_0x1f130d(0x1a5)](_0x42e248);if(_0x1aee93){const _0xe5971d=fns[_0x1f130d(0x2a1)](new Date(_0x42e248),new Date(_0x1aee93));if(_0xe5971d<cooldownInterval){logHistory(_0x1f130d(0x228),_0x1f130d(0x2e3)+config[_0x1f130d(0x189)]+_0x1f130d(0x297)+cooldownInterval/0x3c+_0x1f130d(0x2f0)+cooldownPeriod/(0xe10*0x3e8)+_0x1f130d(0x222)),coolingDown=!![];break;}}}}catch(_0x278946){if(_0x278946[_0x1f130d(0x1c0)]()[_0x1f130d(0x329)](_0x1f130d(0x2f2)))lastOrders=lastOrders[_0x1f130d(0x2bb)](_0x24aa7c=>_0x24aa7c[_0x1f130d(0x242)]!=_0x3524d5),logHistory(_0x1f130d(0x228),_0x1f130d(0x281)+_0x3524d5),_0x3e146d=!![];else{if(_0x278946['toString']()[_0x1f130d(0x329)](_0x1f130d(0x2d0)))lastOrders=lastOrders[_0x1f130d(0x2bb)](_0x50a358=>_0x50a358[_0x1f130d(0x242)]!=_0x3524d5),logHistory(_0x1f130d(0x228),_0x1f130d(0x341)+_0x3524d5),_0x3e146d=!![];else{if(_0x278946[_0x1f130d(0x1c0)]()[_0x1f130d(0x329)](_0x1f130d(0x216)))lastOrders=lastOrders[_0x1f130d(0x2bb)](_0x184233=>_0x184233[_0x1f130d(0x242)]!=_0x3524d5),logHistory(_0x1f130d(0x228),_0x1f130d(0x2f4)+_0x3524d5),logger[_0x1f130d(0x296)](_0x278946),_0x3e146d=!![];else _0x278946[_0x1f130d(0x1c0)]()['includes'](_0x1f130d(0x245))?(lastOrders=lastOrders[_0x1f130d(0x2bb)](_0x57b021=>_0x57b021['symbol']!=_0x3524d5),logHistory('error',_0x1f130d(0x281)+_0x3524d5),_0x3e146d=!![]):(lastOrders=lastOrders[_0x1f130d(0x2bb)](_0xd0b284=>_0xd0b284[_0x1f130d(0x242)]!=_0x3524d5),await handleError(_0x278946,_0x1f130d(0x31c),_0x3524d5));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders['length']>0x0){const _0x28d42d=config['ordertype']==_0x1f130d(0x327)?validateOrderTimeout*0x3c*0x3e8:config[_0x1f130d(0x28a)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x7ba8a2=_0x1f130d;validateOrders(_0x7ba8a2(0x32e));},_0x28d42d);}else unlockOrders();_0x3e146d&&config[_0x1f130d(0x32f)]&&(logHistory(_0x1f130d(0x228),'Avoiding\x20continuous\x20order\x20attempts'+pauseBotMsg),await pauseBot(pauseBotInterval)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x1f130d(0x256),'Cooldown\x20ended\x20-\x20balancing\x20resumed'));}else{if(coolingDown)!config[_0x1f130d(0x32f)]&&logHistory(_0x1f130d(0x228),_0x1f130d(0x18c));else lockOrders!=ORDERS[_0x1f130d(0x230)]&&(!config['headless']&&(config[_0x1f130d(0x211)]==_0x1f130d(0x327)?logHistory(_0x1f130d(0x228),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated'):logHistory(_0x1f130d(0x228),_0x1f130d(0x30b))));}}function persistOpenOrders(_0x2a0350){const _0x2da55b=_0x5bc9d1,_0x13f861={...config,'openOrders':_0x2a0350};let _0x536dcf=dbConfig['get'](_0x2da55b(0x241))[_0x2da55b(0x335)]({'botID':botID})[_0x2da55b(0x32b)]();_0x536dcf&&dbConfig[_0x2da55b(0x324)](_0x2da55b(0x241))['find']({'botID':botID})['assign'](_0x13f861)['write']();}function restoreOrders(){const _0x4554cd=_0x5bc9d1;let _0x4d8bd8;config[_0x4554cd(0x300)]&&allOpenOrders[_0x4554cd(0x1ae)](_0x4f4fc2=>{const _0x466bf4=_0x4554cd,_0x5af6a5=config[_0x466bf4(0x300)][_0x466bf4(0x335)](_0x1fede8=>_0x1fede8[_0x466bf4(0x2a2)]==_0x4f4fc2['id']);_0x5af6a5&&(lastOrders['push'](_0x5af6a5),_0x4d8bd8=_0x4f4fc2['timestamp']);});if(lastOrders['length']>0x0){setLockOrders(ORDERS['LOCKED']),validateOrdersState='ongoing',allOrdersPlaced=!![];const _0x48e3b8=new Date()[_0x4554cd(0x1aa)](),_0x19aa61=config[_0x4554cd(0x211)]==_0x4554cd(0x327)?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(_0x4d8bd8+_0x19aa61>_0x48e3b8){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x4d8bd8+_0x19aa61-_0x48e3b8);}else validateOrders(_0x4554cd(0x32e));}}async function sendMetricsTelegram(){const _0x1fa7ed=_0x5bc9d1;if(!coinsLoaded){process[_0x1fa7ed(0x246)]({'telegrammsg':'Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute'},_0x2ffc68=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x36a642='';if(config[_0x1fa7ed(0x1f3)])_0x36a642=_0x1fa7ed(0x18f)+config[_0x1fa7ed(0x308)]+'\x20metrics:</b>\x20\x0a\x0a';else _0x36a642='<b>Bot\x20'+botID+_0x1fa7ed(0x326);const _0x36c9e1=getKPIs(_0x1fa7ed(0x2ca)),_0x5357c8=getKPIs(_0x1fa7ed(0x2f1),config['fiat']),_0xef523b=getKPIs(_0x1fa7ed(0x2df)),_0x2d5a45=getKPIs(_0x1fa7ed(0x2bc),config[_0x1fa7ed(0x2f1)]);_0x36a642+='<pre>',_0x36a642+=_0x36c9e1[_0x1fa7ed(0x340)]+_0x1fa7ed(0x328)+_0x36c9e1[_0x1fa7ed(0x32b)]+'\x0a',_0x36a642+=_0x36c9e1['rightTxt']+':\x20'+_0x36c9e1[_0x1fa7ed(0x1a0)]+'%\x0a',_0x36a642+=_0x5357c8[_0x1fa7ed(0x340)]+_0x1fa7ed(0x328)+_0x5357c8[_0x1fa7ed(0x32b)]+'\x0a',_0x36a642+=_0x5357c8[_0x1fa7ed(0x223)]+':\x20'+_0x5357c8['change']+'%\x0a',_0x36a642+=_0xef523b['leftTxt']+':\x20'+_0xef523b[_0x1fa7ed(0x32b)]+'\x20('+config[_0x1fa7ed(0x2ca)]+')\x0a',_0x36a642+=_0xef523b[_0x1fa7ed(0x223)]+':\x20'+_0xef523b[_0x1fa7ed(0x1a0)]+_0x1fa7ed(0x309)+config[_0x1fa7ed(0x2ca)]+')\x0a',_0x36a642+=_0x2d5a45[_0x1fa7ed(0x340)]+':\x20'+_0x2d5a45[_0x1fa7ed(0x32b)]+'\x20('+config['fiat']+')\x0a',_0x36a642+=_0x2d5a45[_0x1fa7ed(0x223)]+':\x20'+_0x2d5a45[_0x1fa7ed(0x1a0)]+'%\x20('+config[_0x1fa7ed(0x2f1)]+')\x0a',_0x36a642+='</pre>',process['send']({'telegrammsg':_0x36a642},_0x1343bf=>{});}async function sendPortfolioTelegram(){const _0x47c7e6=_0x5bc9d1;if(!coinsLoaded||!currentCoins[0x0]['distribution']){process[_0x47c7e6(0x246)]({'telegrammsg':_0x47c7e6(0x248)},_0x4ed88c=>{});return;}let _0x12b118='';if(config[_0x47c7e6(0x1f3)])_0x12b118=_0x47c7e6(0x18f)+config['botname']+'\x20portfolio:</b>\x20\x0a\x0a';else _0x12b118='<b>Bot\x20'+botID+_0x47c7e6(0x202);_0x12b118+=_0x47c7e6(0x28d),_0x12b118+=_0x47c7e6(0x1ad),_0x12b118+='Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a',_0x12b118+='-------------------------------\x0a',currentCoins[_0x47c7e6(0x1ae)](_0x5e8e37=>{const _0x2720bd=_0x47c7e6;_0x12b118+=_0x5e8e37['coin'][_0x2720bd(0x289)](0x7)+'|\x20'+formatPad(_0x5e8e37[_0x2720bd(0x17a)],0x2,0x6)+'|\x20'+formatPad(_0x5e8e37['target'],0x2,0x6)+'|\x20'+formatPad(_0x5e8e37[_0x2720bd(0x28e)]*0x64,0x2,0x6)+'\x0a';}),_0x12b118+='</pre>',process[_0x47c7e6(0x246)]({'telegrammsg':_0x12b118},_0xc8f09c=>{});}function formatPad(_0x4ec3d9,_0x302562,_0xb93622){const _0x407dc1=_0x5bc9d1,_0x23fd1a=formatResultString(_0x4ec3d9,_0x302562);return _0x23fd1a?_0x23fd1a[_0x407dc1(0x275)](_0xb93622):''[_0x407dc1(0x275)](_0xb93622);}function logHistory(_0x5778b4,_0xb6d2f1,_0x456eec=''){const _0xd30a7c=_0x5bc9d1;logger[_0xd30a7c(0x315)](''+_0xb6d2f1);let _0x584703={'time':getTimeStamp(),'type':_0x5778b4,'event':_0xb6d2f1};dbLogs[_0xd30a7c(0x324)](_0xd30a7c(0x2e4))[_0xd30a7c(0x1a5)](_0x584703)[_0xd30a7c(0x201)]();if(_0x456eec=='')_0x456eec=_0xb6d2f1;proxyEmit('event',{'log':_0x584703,'summary':_0x456eec}),process[_0xd30a7c(0x246)]({'telegram':{..._0x584703,'botname':config[_0xd30a7c(0x308)],'showname':config[_0xd30a7c(0x1f3)]}},_0x1cd2ca=>{});}function emitHistory(_0x43d88f={}){const _0x4cb157=_0x5bc9d1;Object[_0x4cb157(0x29b)](_0x43d88f)[_0x4cb157(0x1d2)]==0x0&&(_0x43d88f={'type':[_0x4cb157(0x25b),_0x4cb157(0x26a)],'event':'','page':0x1});if(_0x43d88f[_0x4cb157(0x171)][_0x4cb157(0x329)]('event'))_0x43d88f[_0x4cb157(0x171)][_0x4cb157(0x23e)](_0x43d88f['type'][_0x4cb157(0x177)](_0x4cb157(0x26a)),0x1,_0x4cb157(0x228),_0x4cb157(0x180),'success');if(dbLogs[_0x4cb157(0x22b)](_0x4cb157(0x2e4))[_0x4cb157(0x32b)]()){let _0x564c7e=dbLogs[_0x4cb157(0x324)](_0x4cb157(0x2e4))[_0x4cb157(0x2bb)](_0x5777ea=>{const _0x4af2c0=_0x4cb157;if(_0x43d88f[_0x4af2c0(0x171)][_0x4af2c0(0x1d2)]==0x0)return![];else return _0x43d88f[_0x4af2c0(0x171)][_0x4af2c0(0x329)](_0x5777ea[_0x4af2c0(0x171)]);})[_0x4cb157(0x2bb)](_0x40d560=>{const _0x58b7c1=_0x4cb157;if(_0x43d88f[_0x58b7c1(0x26a)]=='')return!![];else return _0x40d560[_0x58b7c1(0x26a)][_0x58b7c1(0x210)]()[_0x58b7c1(0x329)](_0x43d88f[_0x58b7c1(0x26a)][_0x58b7c1(0x210)]());})[_0x4cb157(0x186)](_0x4cb157(0x316)),_0x2deb77=_0x564c7e['value']()['length'];_0x564c7e=_0x564c7e[_0x4cb157(0x188)]()[_0x4cb157(0x2e8)]((_0x43d88f[_0x4cb157(0x2a8)]-0x1)*logPageSize,_0x43d88f['page']*logPageSize-0x1)['reverse']()[_0x4cb157(0x32b)](),proxyEmit('event-history',{'logs':_0x564c7e,'total':_0x2deb77});}else proxyEmit(_0x4cb157(0x24a),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x3e2f5b){const _0x2fc0d1=_0x5bc9d1;if(dbLogs['has']('logs')[_0x2fc0d1(0x32b)]()){const _0x271634=dbLogs[_0x2fc0d1(0x324)](_0x2fc0d1(0x2e4))[_0x2fc0d1(0x186)]('time')['filter'](_0x813718=>{const _0x1ae8e9=_0x2fc0d1;return _0x813718[_0x1ae8e9(0x171)]==_0x1ae8e9(0x25b);})[_0x2fc0d1(0x32b)]();dbLogs[_0x2fc0d1(0x324)]('logs')[_0x2fc0d1(0x1f6)]()[_0x2fc0d1(0x201)](),dbLogs[_0x2fc0d1(0x324)](_0x2fc0d1(0x2e4))[_0x2fc0d1(0x2d8)](_0x271634)[_0x2fc0d1(0x201)](),emitHistory(_0x3e2f5b);}}async function pauseBot(_0x3cea27=pauseBotIntervalShort,_0x4aeb4c,_0x25472f,_0xbb6940=![]){const _0x3c4833=_0x5bc9d1,_0x4b2ba0=new Date()[_0x3c4833(0x1aa)]();if(!lastErrorShown||_0x4b2ba0-lastErrorShown>=_0x3cea27){lastErrorShown=_0x4b2ba0;if(!lastBotPause)lastBotPause=_0x4b2ba0,consecutivePauses=0x1;else{if(_0x4b2ba0-lastBotPause-_0x3cea27<0x5a*0x3e8){consecutivePauses++;if(consecutivePauses>maxPauseRetries){if(_0xbb6940){logHistory(_0x3c4833(0x228),_0x4aeb4c+_0x3c4833(0x24b)),await killBot();return;}else logHistory(_0x3c4833(0x228),_0x4aeb4c+pauseBotMsg),_0x3cea27=pauseBotInterval;}}else consecutivePauses=0x1;lastBotPause=_0x4b2ba0;}_0x25472f?logger[_0x3c4833(0x296)]('('+consecutivePauses+')\x20'+_0x4aeb4c+_0x3c4833(0x2c4),_0x25472f):logger['debug']('('+consecutivePauses+')\x20'+_0x4aeb4c);if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);await sleep(_0x3cea27),botPaused=![],_0x3cea27==pauseBotIntervalShort?resumeBot(!![]):resumeBot(![]);}}}async function killBot(){const _0x17e83d=_0x5bc9d1;botPaused=!![],await sleep(0x3e8),process[_0x17e83d(0x246)]({'stop':_0x17e83d(0x339)},_0x3e84dc=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0xf8762e,_0x2a5c65,_0x1b1c07=![]){const _0x5bcfe7=_0x5bc9d1;if(botPaused)return;let _0x17bc65;const _0x431954=config[_0x5bcfe7(0x1c1)]||_0x5bcfe7(0x178);if(_0x2a5c65)logger[_0x5bcfe7(0x296)](_0x5bcfe7(0x2c1)+_0x2a5c65);const _0xed9375=()=>{const _0x166069=_0x5bcfe7;loading[_0x166069(0x228)]=!![],emitLoadingProgress();};if(_0xf8762e[_0x5bcfe7(0x1c0)]()[_0x5bcfe7(0x329)]('API-key\x20format\x20invalid'))logHistory(_0x5bcfe7(0x228),_0x431954+_0x5bcfe7(0x30a)),_0xed9375();else{if(_0xf8762e[_0x5bcfe7(0x1c0)]()[_0x5bcfe7(0x329)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory(_0x5bcfe7(0x228),_0x431954+'\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)'),_0xed9375();else{if(_0xf8762e[_0x5bcfe7(0x1c0)]()[_0x5bcfe7(0x329)](_0x5bcfe7(0x27e)))config['apiPassword']?_0x17bc65=_0x431954+_0x5bcfe7(0x2ab):_0x17bc65=_0x431954+_0x5bcfe7(0x307),logHistory(_0x5bcfe7(0x228),_0x17bc65+_0x5bcfe7(0x31e)),_0xed9375();else{if(_0xf8762e[_0x5bcfe7(0x1c0)]()[_0x5bcfe7(0x329)](_0x5bcfe7(0x273)))logHistory(_0x5bcfe7(0x228),_0x431954+_0x5bcfe7(0x217)),_0xed9375();else{if(!_0x1b1c07)await handleError(_0xf8762e,null);}}}}}async function handleError(_0x175dc6,_0x2844ec,_0x278c70=''){const _0x2807db=_0x5bc9d1;if(botPaused)return;let _0x1ebd37;const _0xbd6da9=config[_0x2807db(0x1c1)]||_0x2807db(0x178);if(_0x2844ec)logger['debug'](_0x2807db(0x2c1)+_0x2844ec);if(_0x175dc6[_0x2807db(0x1c0)]()[_0x2807db(0x329)](_0x2807db(0x2ff)))_0x1ebd37=_0xbd6da9+_0x2807db(0x1e2),await pauseBot(undefined,_0x1ebd37,_0x175dc6);else{if(_0x175dc6['toString']()[_0x2807db(0x329)](_0x2807db(0x22a)))_0x1ebd37=_0xbd6da9+_0x2807db(0x322),await pauseBot(undefined,_0x1ebd37,_0x175dc6);else{if(_0x175dc6[_0x2807db(0x1c0)]()[_0x2807db(0x329)](_0x2807db(0x317))||_0x175dc6[_0x2807db(0x1c0)]()[_0x2807db(0x329)](_0x2807db(0x22e)))_0x1ebd37=_0xbd6da9+_0x2807db(0x2bd),await pauseBot(undefined,_0x1ebd37,_0x175dc6[_0x2807db(0x1c0)]());else{if(_0x175dc6[_0x2807db(0x1c0)]()['includes'](_0x2807db(0x1d0)))_0x1ebd37=_0xbd6da9+_0x2807db(0x1a1),await pauseBot(undefined,_0x1ebd37,_0x175dc6[_0x2807db(0x1c0)]());else{if(_0x175dc6[_0x2807db(0x1c0)]()[_0x2807db(0x329)]('NetworkError:\x20connection\x20closed\x20by\x20remote\x20server'))_0x1ebd37=_0xbd6da9+_0x2807db(0x249),await pauseBot(undefined,_0x1ebd37,_0x175dc6[_0x2807db(0x1c0)]());else{if(_0x175dc6['toString']()[_0x2807db(0x210)]()['includes'](_0x2807db(0x2e1))||_0x175dc6[_0x2807db(0x1c0)]()[_0x2807db(0x210)]()[_0x2807db(0x329)](_0x2807db(0x33c)))_0x1ebd37=_0x2807db(0x1de),await pauseBot(undefined,_0x1ebd37,_0x175dc6[_0x2807db(0x1c0)]());else{if(_0x175dc6['toString']()[_0x2807db(0x329)]('InvalidNonce'))_0x1ebd37=_0xbd6da9+'\x20rejected\x20your\x20API\x20request\x20(see:\x20hodlerhacks.com/fix/4)',await pauseBot(undefined,_0x1ebd37,_0x175dc6[_0x2807db(0x1c0)]());else{if(_0x175dc6 instanceof ccxt[_0x2807db(0x1fe)])_0x1ebd37=_0xbd6da9+'\x20network\x20error:\x20'+_0x175dc6['toString'](),logger[_0x2807db(0x296)]('Network\x20error\x20details:',_0x175dc6),await pauseBot(undefined,_0x1ebd37,_0x175dc6);else{if(_0x175dc6[_0x2807db(0x1c0)]()['includes'](_0x2807db(0x26c)))logHistory(_0x2807db(0x228),_0xbd6da9+_0x2807db(0x2f5)),logHistory(_0x2807db(0x228),_0x2807db(0x1b8)),await killBot();else{if(_0x175dc6['toString']()[_0x2807db(0x329)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory(_0x2807db(0x228),_0xbd6da9+_0x2807db(0x2ae)),logHistory('error',_0x2807db(0x1b8)),await killBot();else{if(_0x175dc6['toString']()[_0x2807db(0x329)](_0x2807db(0x27e))&&_0x175dc6[_0x2807db(0x1c0)]()[_0x2807db(0x329)](_0x2807db(0x330)))_0x1ebd37=_0xbd6da9+_0x2807db(0x20f),await pauseBot(undefined,_0x1ebd37,_0x175dc6,!![]);else{if(_0x175dc6['toString']()[_0x2807db(0x329)](_0x2807db(0x27e)))config[_0x2807db(0x2ad)]?_0x1ebd37=_0xbd6da9+'\x20API\x20key,\x20secret\x20or\x20password\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange':_0x1ebd37=_0xbd6da9+'\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange',logHistory(_0x2807db(0x228),_0x1ebd37),logHistory(_0x2807db(0x228),_0x2807db(0x1b8)),await killBot();else{if(_0x175dc6[_0x2807db(0x1c0)]()[_0x2807db(0x329)](_0x2807db(0x273)))logHistory(_0x2807db(0x228),_0xbd6da9+_0x2807db(0x2d5)),logHistory('error',_0x2807db(0x1b8)),await killBot();else{if(_0x175dc6['toString']()[_0x2807db(0x329)]('InsufficientFunds'))logHistory(_0x2807db(0x228),'Insufficient\x20funds\x20to\x20execute\x20order:\x20'+_0x278c70),logger['debug'](_0x2807db(0x27c),_0x175dc6);else{if(_0x175dc6 instanceof ccxt[_0x2807db(0x19f)]){_0x1ebd37=_0xbd6da9+_0x2807db(0x1df)+_0x175dc6[_0x2807db(0x1c0)]();if(_0x278c70)_0x1ebd37+=_0x2807db(0x310)+_0x278c70;await pauseBot(undefined,_0x1ebd37,_0x175dc6);}else{_0x1ebd37=_0x2807db(0x1ed)+_0x175dc6[_0x2807db(0x1c0)]();if(_0x278c70)_0x1ebd37+='\x0aSymbol(s):\x20'+_0x278c70;await pauseBot(undefined,_0x1ebd37);}}}}}}}}}}}}}}}}function decryptRSA(_0x5beb69,_0x186462){const _0xf30a4a=_0x5bc9d1,_0x408a56=forge[_0xf30a4a(0x26b)][_0xf30a4a(0x244)](_0x5beb69),_0x59a9bd=_0x408a56[_0xf30a4a(0x27d)](forge[_0xf30a4a(0x2fc)][_0xf30a4a(0x277)](_0x186462),_0xf30a4a(0x21a),{'md':forge['md']['sha256'][_0xf30a4a(0x31a)](),'mgf1':{'md':forge['md'][_0xf30a4a(0x2a0)][_0xf30a4a(0x31a)]()}});return _0x59a9bd;}async function withRetry(_0x16f617,_0x3e5034){const _0x3d91cf=_0x5bc9d1;let _0xf4b0b2=![],_0x45041c=0x0,_0x293de8,_0x49fd57;while(_0x45041c<maxRetries){try{_0x293de8=await _0x3e5034();break;}catch(_0x37c4df){_0x49fd57=_0x37c4df,!_0xf4b0b2?(_0xf4b0b2=!![],logger[_0x3d91cf(0x296)]('RETRY\x20-\x20Error\x20in\x20'+_0x16f617+':',_0x37c4df[_0x3d91cf(0x1c0)]())):await sleep(retryInterval);}_0x45041c++;}if(_0x45041c==0x0)return _0x293de8;if(_0x45041c>=maxRetries)throw _0x49fd57;else return logger['debug'](_0x3d91cf(0x225)+_0x45041c+_0x3d91cf(0x325)),_0x293de8;}function formatResult(_0x35b4f4,_0x150859){const _0x43381a=_0x5bc9d1;return parseFloat(_0x35b4f4[_0x43381a(0x192)](_0x150859));}function formatResultTruncate(_0xdfd47,_0x223213){const _0x33b647=_0x5bc9d1;let _0x12b9d7=formatResultString(_0xdfd47,0xa),_0x2e0fcf=_0x12b9d7[_0x33b647(0x177)]('.');return _0x2e0fcf!=-0x1&&(_0x12b9d7=_0x12b9d7[_0x33b647(0x2e8)](0x0,_0x2e0fcf+_0x223213+0x1)),Number(_0x12b9d7);}function formatResultString(_0x6d6f4f,_0x59337c){const _0x4f4bcc=_0x5bc9d1;let _0x13fb9d;if(!(''+_0x6d6f4f)['includes']('e'))_0x13fb9d=+(Math[_0x4f4bcc(0x27b)](_0x6d6f4f+'e+'+_0x59337c)+'e-'+_0x59337c);else{let _0x373c9c=(''+_0x6d6f4f)[_0x4f4bcc(0x1b9)]('e'),_0x2649ee='';+_0x373c9c[0x1]+_0x59337c>0x0&&(_0x2649ee='+'),_0x13fb9d=+(Math[_0x4f4bcc(0x27b)](+_0x373c9c[0x0]+'e'+_0x2649ee+(+_0x373c9c[0x1]+_0x59337c))+'e-'+_0x59337c);}return Number(_0x13fb9d)[_0x4f4bcc(0x192)](_0x59337c);}function getServerTime(){const _0x805674=_0x5bc9d1,_0x569d9a=new Date();return _0x569d9a[_0x805674(0x2c7)]()+'/'+(_0x569d9a[_0x805674(0x2a7)]()+0x1)[_0x805674(0x1c0)]()[_0x805674(0x275)](0x2,'0')+'/'+_0x569d9a['getDate']()[_0x805674(0x1c0)]()['padStart'](0x2,'0')+'\x20'+_0x569d9a[_0x805674(0x20b)]()[_0x805674(0x1c0)]()[_0x805674(0x275)](0x2,'0')+':'+_0x569d9a['getMinutes']()[_0x805674(0x1c0)]()[_0x805674(0x275)](0x2,'0')+':'+_0x569d9a[_0x805674(0x179)]()['toString']()['padStart'](0x2,'0');}function getTimeStamp(){const _0x4e0e00=_0x5bc9d1,_0x3b99a5=shiftedTime();return _0x3b99a5[_0x4e0e00(0x2c7)]()+'/'+(_0x3b99a5['getMonth']()+0x1)[_0x4e0e00(0x1c0)]()[_0x4e0e00(0x275)](0x2,'0')+'/'+_0x3b99a5['getDate']()[_0x4e0e00(0x1c0)]()[_0x4e0e00(0x275)](0x2,'0')+'\x20'+_0x3b99a5[_0x4e0e00(0x20b)]()[_0x4e0e00(0x1c0)]()['padStart'](0x2,'0')+':'+_0x3b99a5[_0x4e0e00(0x2af)]()[_0x4e0e00(0x1c0)]()[_0x4e0e00(0x275)](0x2,'0')+':'+_0x3b99a5[_0x4e0e00(0x179)]()[_0x4e0e00(0x1c0)]()[_0x4e0e00(0x275)](0x2,'0');}function getDate(){const _0x362928=_0x5bc9d1,_0x384072=shiftedTime();return _0x384072[_0x362928(0x2c7)]()+'/'+(_0x384072['getMonth']()+0x1)[_0x362928(0x1c0)]()[_0x362928(0x275)](0x2,'0')+'/'+_0x384072[_0x362928(0x214)]()['toString']()[_0x362928(0x275)](0x2,'0');}function getHour(){const _0x202406=_0x5bc9d1,_0x2990f0=shiftedTime();return _0x2990f0['getHours']()['toString']()[_0x202406(0x275)](0x2,'0');}function sleep(_0x3150d7){return new Promise(_0x5f1144=>setTimeout(_0x5f1144,_0x3150d7));}function shiftedTime(){const _0x34e814=_0x5bc9d1,_0x56746e=new Date();let _0x205e9c=_0x56746e;if(config&&config[_0x34e814(0x299)]!==0x0)_0x205e9c=fns[_0x34e814(0x19b)](_0x56746e,{'hours':config[_0x34e814(0x299)]});return _0x205e9c;}function timer(_0x2d3a37){const _0x50f84a=_0x5bc9d1,_0x17762f=new Date();!lasttime?console[_0x50f84a(0x260)](getTimeStamp()+_0x50f84a(0x231),_0x2d3a37,_0x17762f):console[_0x50f84a(0x260)](getTimeStamp()+_0x50f84a(0x231),_0x2d3a37,(_0x17762f-lasttime)/0x3e8),lasttime=_0x17762f;}