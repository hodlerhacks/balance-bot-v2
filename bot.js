const _0x400f17=_0x5133;(function(_0x29ec6e,_0x511fdb){const _0x35f60b=_0x5133,_0x4d4496=_0x29ec6e();while(!![]){try{const _0x15bfbb=parseInt(_0x35f60b(0x274))/0x1*(parseInt(_0x35f60b(0x25f))/0x2)+parseInt(_0x35f60b(0x139))/0x3+-parseInt(_0x35f60b(0x1ca))/0x4+-parseInt(_0x35f60b(0x22b))/0x5*(-parseInt(_0x35f60b(0x280))/0x6)+parseInt(_0x35f60b(0x25a))/0x7+-parseInt(_0x35f60b(0x209))/0x8*(parseInt(_0x35f60b(0x1a1))/0x9)+parseInt(_0x35f60b(0x138))/0xa*(parseInt(_0x35f60b(0x239))/0xb);if(_0x15bfbb===_0x511fdb)break;else _0x4d4496['push'](_0x4d4496['shift']());}catch(_0x7bb83f){_0x4d4496['push'](_0x4d4496['shift']());}}}(_0x5e06,0xa2207));const _0x5d6002=function(){let _0x4d514a=!![];return function(_0x433d2e,_0x320c16){const _0x2be264=_0x4d514a?function(){const _0x3f8daa=_0x5133;if(_0x320c16){const _0x2ab27a=_0x320c16[_0x3f8daa(0x18a)](_0x433d2e,arguments);return _0x320c16=null,_0x2ab27a;}}:function(){};return _0x4d514a=![],_0x2be264;};}(),_0x3efe41=_0x5d6002(this,function(){const _0x300932=_0x5133;return _0x3efe41['toString']()[_0x300932(0x260)](_0x300932(0x26a))[_0x300932(0x258)]()[_0x300932(0x28d)](_0x3efe41)[_0x300932(0x260)](_0x300932(0x26a));});_0x3efe41();'use strict';const ccxt=require(_0x400f17(0x29a)),low=require(_0x400f17(0x17e)),FileSync=require(_0x400f17(0x16e)),fs=require('fs'),fns=require(_0x400f17(0x114)),forge=require(_0x400f17(0x132)),util=require('util'),argv=require(_0x400f17(0x206))(process[_0x400f17(0x171)][_0x400f17(0x13f)](0x2))[_0x400f17(0x171)],path=require(_0x400f17(0x179)),axios=require(_0x400f17(0x228));let exchange,gTicker={},gChange={};const usdBasecoins=['USD',_0x400f17(0x2a6),'TUSD',_0x400f17(0x235),_0x400f17(0x253),_0x400f17(0x256)],excludedExchanges=[_0x400f17(0x160)],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x400f17(0x2b6)]({'LOCKED':0x0,'UNLOCKING':0x1,'UNLOCKED':0x2});let lockOrders=ORDERS['UNLOCKED'],validateOrdersState,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotIntervalShort=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0x400f17(0x299)+pauseBotInterval/0xea60+_0x400f17(0x1eb),maxPauseRetries=0x6,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,watchTransactionsInterval=0x3c*0x3e8,schedulerInterval=0x3c*0x3c*0x3e8,retryInterval=0x3e8,maxRetries=0x5,logPageSize=0x14,defaultFee=0.003;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidOrdersInitialTimeout,pidOrdersTimeout,botPaused=![],transactionDetectionOngoing=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x5dc,balanceUpdateRetries=0x5;let enableFiatToggle;const serverversion=require('./version.json')[_0x400f17(0x1e1)],environment=require(_0x400f17(0x2a2))[_0x400f17(0x189)]||_0x400f17(0x1bf),botID=process['argv'][0x2]||'001',pattern=/^[0-9]{3}$/;!pattern[_0x400f17(0x182)](botID)&&(console[_0x400f17(0x269)]('Error:\x20Invalid\x20argument\x20'+botID+',\x20must\x20be\x20a\x203\x20digit\x20number'),killBot());const userID=process[_0x400f17(0x171)][0x3]||'',configpath=userID?_0x400f17(0x17d)+userID+'/':_0x400f17(0x17d),logspath=userID?'./logs/'+userID+'/':_0x400f17(0x1dd),loggerfile=fs[_0x400f17(0x2b0)](logspath+_0x400f17(0x212),{'flags':'a'});!fs[_0x400f17(0x290)](configpath)&&fs[_0x400f17(0x1b7)](configpath);!fs['existsSync'](logspath)&&fs[_0x400f17(0x1b7)](logspath);const configfile=configpath+'bot-'+botID+_0x400f17(0x20f),logfile=configpath+'bot-'+botID+'-events.json',performancefile=configpath+_0x400f17(0x13a)+botID+_0x400f17(0x19c),coinresultsfile=configpath+_0x400f17(0x13a)+botID+_0x400f17(0x24f),settingsfile=configpath+'bb-settings.json',securefile=configpath+_0x400f17(0x28e),configbackuppath=configpath+_0x400f17(0x1c3),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x400f17(0x263)]({'logs':[],'version':serverversion})[_0x400f17(0x200)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x400f17(0x263)]({'data':[],'version':serverversion})[_0x400f17(0x200)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x400f17(0x263)]({'bot':[],'version':serverversion})[_0x400f17(0x200)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x400f17(0x263)]({'coins':[],'version':serverversion})[_0x400f17(0x200)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0,settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x10a9da=>{console['log'](_0x10a9da);},'simple':_0x5b974b=>{const _0x20ad0d=_0x400f17;console[_0x20ad0d(0x269)](_0x5b974b),loggerfile[_0x20ad0d(0x200)](util['format'](_0x5b974b)+'\x0a');},'full':async(_0x216712,_0x3c1d04='')=>{const _0x262a68=_0x400f17;let _0x298129;if(config[_0x262a68(0x12c)])_0x298129=getTimeStamp()+':\x20'+config[_0x262a68(0x121)]+_0x262a68(0x26d)+_0x216712;else _0x298129=getTimeStamp()+_0x262a68(0x291)+botID+_0x262a68(0x26d)+_0x216712;console['log'](_0x298129),loggerfile['write'](util[_0x262a68(0x27b)](_0x298129)+'\x0a'),_0x3c1d04&&(console['log'](_0x3c1d04),loggerfile[_0x262a68(0x200)](util[_0x262a68(0x27b)](_0x3c1d04)+'\x0a'));},'debug':async(_0x59134a,_0x22ac4f='')=>{const _0x55c715=_0x400f17;let _0x4edf4f;if(config['showname'])_0x4edf4f=getTimeStamp()+':\x20'+config[_0x55c715(0x121)]+'\x20>\x20[DEBUG]\x20'+_0x59134a;else _0x4edf4f=getTimeStamp()+':\x20Bot\x20'+botID+_0x55c715(0x185)+_0x59134a;if(debugging)console[_0x55c715(0x269)](_0x4edf4f);loggerfile['write'](util['format'](_0x4edf4f)+'\x0a');if(_0x22ac4f){if(debugging)console[_0x55c715(0x269)](_0x22ac4f);loggerfile[_0x55c715(0x200)](util['format'](_0x22ac4f)+'\x0a');}}};process['on']('uncaughtException',function(_0x37d5ef){const _0x1e6dd=_0x400f17;handleError(_0x37d5ef,_0x1e6dd(0x192));});settings[_0x400f17(0x26e)]!=config[_0x400f17(0x26e)]&&updateTimeshift(settings[_0x400f17(0x26e)]);settings[_0x400f17(0x236)]!=config[_0x400f17(0x236)]&&updateOnepagemode(settings['onepagemode']);(settings[_0x400f17(0x1b0)]&&!config[_0x400f17(0x1b0)]||!settings[_0x400f17(0x1b0)]&&config['marketcapApi'])&&updateMarketcapApi(settings[_0x400f17(0x1b0)]);process[_0x400f17(0x166)]({'started':_0x400f17(0x270)},_0x3d907f=>{}),initializeProcessListeners();function proxyEmit(_0x80ec50,_0xe6a6ee=null){process['send']({'function':_0x80ec50,'args':_0xe6a6ee},_0x3cf1dd=>{});}function initializeProcessListeners(){const _0x2a4ecd=_0x400f17;process['on'](_0x2a4ecd(0x22c),_0x1fa79e=>{const _0x1d97e3=_0x2a4ecd;switch(Object[_0x1d97e3(0x21d)](_0x1fa79e)[0x0]){case _0x1d97e3(0x26e):_0x1fa79e['timeshift']!=undefined&&(settings[_0x1d97e3(0x26e)]=_0x1fa79e[_0x1d97e3(0x26e)],updateTimeshift(settings['timeshift']));break;case'onepagemode':_0x1fa79e[_0x1d97e3(0x236)]!=undefined&&(settings[_0x1d97e3(0x236)]=_0x1fa79e[_0x1d97e3(0x236)],updateOnepagemode(settings[_0x1d97e3(0x236)]));break;case'marketcapApi':_0x1fa79e[_0x1d97e3(0x1b0)]!=undefined&&(settings[_0x1d97e3(0x1b0)]=_0x1fa79e['marketcapApi'],updateMarketcapApi(settings[_0x1d97e3(0x1b0)]));break;case'bots':_0x1fa79e['bots']!=undefined&&(bots=JSON[_0x1d97e3(0x21e)](_0x1fa79e[_0x1d97e3(0xf1)]),proxyEmit(_0x1d97e3(0xf1),bots));break;case _0x1d97e3(0x1d5):switch(_0x1fa79e[_0x1d97e3(0x1d5)]){case _0x1d97e3(0x207):initclient();break;case _0x1d97e3(0x107):toggleBotMode();break;case _0x1d97e3(0x1aa):emitHistory(_0x1fa79e['args']);break;case _0x1d97e3(0x11b):deleteHistoryAlerts(_0x1fa79e[_0x1d97e3(0x2a8)]);break;case _0x1d97e3(0x272):getPortfolio(_0x1fa79e[_0x1d97e3(0x2a8)]);break;case _0x1d97e3(0x1ce):storeConfiguration(_0x1fa79e[_0x1d97e3(0x2a8)]);break;case'storeHeadless':storeHeadless(_0x1fa79e[_0x1d97e3(0x2a8)]);break;case _0x1d97e3(0x1c0):storeFiat(_0x1fa79e[_0x1d97e3(0x2a8)]);break;case'resetHistory':resetHistory();break;case _0x1d97e3(0x2a1):getStartingBalances(getNormalizedPerformance());break;case _0x1d97e3(0x176):placeOrder(_0x1fa79e[_0x1d97e3(0x2a8)]);break;case _0x1d97e3(0x13c):cancelLoading();break;case _0x1d97e3(0x18f):showConfig();break;case _0x1d97e3(0x158):sendMetricsTelegram();break;case _0x1d97e3(0x2b5):sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x2155b9=![]){const _0x1ccb4f=_0x400f17;logger[_0x1ccb4f(0x15f)]('Reset\x20|\x20'+(_0x2155b9?_0x1ccb4f(0x1b2):_0x1ccb4f(0x2a4))+_0x1ccb4f(0x297)+config['exchange']);if(pidBalances)clearTimeout(pidBalances);if(!_0x2155b9)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x1ccb4f(0x28a)]!=''&&config['apiKey']!='***'){loadingProgress=0x0;_0x2155b9&&(await initExchange(),await loadSymbols(),loadingProgress=0x1,setStableCoins(),proxyEmit('configuration',emittedConfiguration()),initialPerformanceStored=![]);const _0x2834c8=await getCoins();[currentCoins,currentCoinsAll]=_0x2834c8,setBlockTransactionDetection(![]),startScheduler(),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x1ccb4f(0x15f)](_0x1ccb4f(0x224)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x1ccb4f(0x29e)]==0x0&&allOpenOrders[_0x1ccb4f(0x29e)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function resumeBot(_0x3881e4=![]){const _0x4026a8=_0x400f17;logger['debug'](_0x4026a8(0x1d0)+(_0x3881e4?'quick':'complete')+_0x4026a8(0x135)+config[_0x4026a8(0x18e)]);if(pidBalances)clearTimeout(pidBalances);if(_0x3881e4){getBalances();return;}coinsLoaded=![];if(config[_0x4026a8(0x28a)]!=''&&config[_0x4026a8(0x28a)]!='***'){loadingProgress=0x1;const _0x2972d0=await getCoins();[currentCoins,currentCoinsAll]=_0x2972d0,setBlockTransactionDetection(![]),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x4026a8(0x15f)]('Loading\x20completed'),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x4026a8(0x29e)]==0x0&&allOpenOrders[_0x4026a8(0x29e)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();}}async function getMarketCap(_0xc8c954){const _0x18891c=_0x400f17;let _0x427afd=![];if(_0xc8c954)_0x427afd=!![];let _0x4ddb3b;_0x427afd?_0x4ddb3b=_0xc8c954[_0x18891c(0x181)](_0x524004=>_0x524004['coin']):_0x4ddb3b=currentCoinsAll[_0x18891c(0x181)](_0x3f5594=>_0x3f5594[_0x18891c(0x14a)]);if(!config[_0x18891c(0x1b0)]||!_0x427afd&&!config[_0x18891c(0x2b7)]||_0x4ddb3b['length']==0x0)return;let _0x367294=null;try{_0x367294=await axios['get']('https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest',{'headers':{'X-CMC_PRO_API_KEY':settings[_0x18891c(0x1b0)]},'params':{'symbol':_0x4ddb3b[_0x18891c(0x258)]()}});}catch(_0x3fa15c){_0x367294=null,_0x3fa15c['toString']()[_0x18891c(0x267)](_0x18891c(0x25c))?(config[_0x18891c(0x1b0)]=![],updateConfig(),proxyEmit('configuration',emittedConfiguration()),logHistory(_0x18891c(0x1ae),_0x18891c(0x19b))):(logHistory('error',_0x18891c(0x1ac)+schedulerInterval/(0x3c*0x3e8)+_0x18891c(0x1eb)),logger[_0x18891c(0x15f)](_0x18891c(0x2af),_0x3fa15c[_0x18891c(0x258)]()+'\x20-\x20'+_0x3fa15c[_0x18891c(0x1d8)]));}if(_0x367294){let _0x293178=0x0;const _0x11ccf2=_0x367294[_0x18891c(0x1c7)];_0x4ddb3b[_0x18891c(0x23b)](_0x777397=>{const _0x2d9a5b=_0x18891c;if(_0x11ccf2[_0x2d9a5b(0x1c7)][_0x777397][0x0])_0x293178+=_0x11ccf2['data'][_0x777397][0x0]['quote'][_0x2d9a5b(0x27e)][_0x2d9a5b(0x20d)];}),_0x4ddb3b[_0x18891c(0x23b)](_0x34bfea=>{const _0x4e63bd=_0x18891c,_0x27e994=_0x11ccf2['data'][_0x34bfea][0x0]?_0x11ccf2[_0x4e63bd(0x1c7)][_0x34bfea][0x0][_0x4e63bd(0x1b8)][_0x4e63bd(0x27e)][_0x4e63bd(0x20d)]:0x0;if(_0x427afd){const _0x1f046d=_0xc8c954[_0x4e63bd(0x17b)](_0x313fbd=>_0x313fbd['coin']==_0x34bfea);_0x1f046d&&(_0x1f046d['marketcap']=_0x27e994);}else{const _0x2eb665=currentCoins['find'](_0x360a96=>_0x360a96['coin']==_0x34bfea);_0x2eb665&&(_0x2eb665[_0x4e63bd(0x145)]=_0x27e994);const _0x5129f4=currentCoinsAll[_0x4e63bd(0x17b)](_0x3226b9=>_0x3226b9[_0x4e63bd(0x14a)]==_0x34bfea);_0x5129f4&&(_0x5129f4[_0x4e63bd(0x145)]=_0x27e994);}}),!_0x427afd&&updateTargetDistribution();}}function updateTargetDistribution(){const _0x206bc0=_0x400f17,_0x3601ea=0x2;let _0x3d1291=0x0,_0x1b4005=0x0,_0xbbecf5=0x0,_0x2fb91d=0x0,_0x177d19=0x0;config[_0x206bc0(0x262)][_0x206bc0(0x23b)](_0x1834de=>{const _0x5a844d=_0x206bc0;if(!_0x1834de[_0x5a844d(0x14d)]){_0xbbecf5++,_0x3d1291+=_0x1834de['slider'];if(_0x1834de[_0x5a844d(0x240)]===-0x1){_0x3d1291++;const _0x37788a=currentCoinsAll[_0x5a844d(0x17b)](_0x31ec2e=>_0x31ec2e[_0x5a844d(0x14a)]==_0x1834de[_0x5a844d(0x14a)]);_0x37788a&&(_0x2fb91d+=_0x37788a[_0x5a844d(0x145)],_0x177d19+=Math[_0x5a844d(0x220)](_0x37788a[_0x5a844d(0x145)]));}if(_0x1834de['slider']!==-0x1)_0x1b4005++;}});let _0x17aac5;const _0x3875c8=0x64-_0x3d1291,_0x5e74a3=_0xbbecf5-_0x1b4005;_0x17aac5=_0x5e74a3===0x0?_0x3d1291:Math[_0x206bc0(0x159)](0x64,_0x3d1291),config[_0x206bc0(0x262)][_0x206bc0(0x23b)](_0x188051=>{const _0x42a0a4=_0x206bc0,_0x17c3ed=currentCoinsAll['find'](_0x34a0f6=>_0x34a0f6['coin']==_0x188051[_0x42a0a4(0x14a)]);_0x17c3ed&&(_0x188051[_0x42a0a4(0x145)]=_0x17c3ed[_0x42a0a4(0x145)]);if(!_0x188051[_0x42a0a4(0x14d)]){if(_0x17aac5<=0x64){if(_0x188051[_0x42a0a4(0x240)]===-0x1){if(_0x2fb91d!==0x0&&config['marketcapEnabled']){if(_0x17c3ed){if(config['marketcapEnabled']==_0x42a0a4(0x145))_0x188051[_0x42a0a4(0x150)]=(_0x3875c8/(_0x2fb91d/_0x17c3ed[_0x42a0a4(0x145)]))['toFixed'](_0x3601ea);else config['marketcapEnabled']=='marketcapsqrt'&&(_0x188051[_0x42a0a4(0x150)]=(_0x3875c8/(_0x177d19/Math[_0x42a0a4(0x220)](_0x17c3ed[_0x42a0a4(0x145)])))[_0x42a0a4(0x13e)](_0x3601ea));}}}}}}),updateConfig();}function updateConfig(){const _0x1dc1e7=_0x400f17;let _0x50170d=dbConfig[_0x1dc1e7(0x283)](_0x1dc1e7(0x29d))[_0x1dc1e7(0x17b)]({'botID':botID})['value']();_0x50170d&&dbConfig[_0x1dc1e7(0x283)](_0x1dc1e7(0x29d))[_0x1dc1e7(0x17b)]({'botID':botID})[_0x1dc1e7(0x1f2)](config)['write']();}function logMemory(){const _0x1e8bda=_0x400f17;if(environment!=_0x1e8bda(0x27d))return;const _0x279296=process[_0x1e8bda(0x254)]()['heapUsed']/0x400/0x400;logger[_0x1e8bda(0x15f)]('process\x20'+process[_0x1e8bda(0x296)]+_0x1e8bda(0x148)+formatResult(_0x279296,0x1)+_0x1e8bda(0xff));}async function startScheduler(){const _0x2d5fa3=_0x400f17,_0x599db4=shiftedTime()[_0x2d5fa3(0x298)]();getMarketCap(),loadSymbols(),_0x599db4==0x1&&logMemory(),await sleep(schedulerInterval),startScheduler();}async function restartBot(_0xbdae0e=![]){const _0x875c8=_0x400f17;logger['debug'](_0x875c8(0x222));if(!_0xbdae0e)while(lockOrders!=ORDERS[_0x875c8(0x261)]||coolingDown){await sleep(0x3e8);}process['send']({'stop':_0x875c8(0x1ea)},_0x188315=>{});}async function initExchange(_0x62d25d=config[_0x400f17(0x18e)],_0x3f422d=config[_0x400f17(0x28a)],_0x2bb8c2=config[_0x400f17(0x19d)],_0x27bd6e=config[_0x400f17(0x2a0)]){const _0x5a48b1=_0x400f17;if(exchange){logger[_0x5a48b1(0x15f)](_0x5a48b1(0x16a));return;}logger['debug']('Initializing\x20exchange');!supportedExchanges()[_0x5a48b1(0x267)](_0x62d25d)&&(logHistory(_0x5a48b1(0x1ae),_0x5a48b1(0x156)+_0x62d25d+_0x5a48b1(0xec)),killBot());const _0x4dd22d=ccxt['pro'][_0x62d25d[_0x5a48b1(0x278)]()];exchange=new _0x4dd22d({'apiKey':_0x3f422d,'secret':_0x2bb8c2,'options':{'defaultType':_0x5a48b1(0x2b2)}});if(_0x27bd6e)exchange[_0x5a48b1(0x24e)]=_0x27bd6e;}function updateExchange(_0x4c4592,_0x53a992,_0x448f30=null){const _0x3a1e6f=_0x400f17;exchange[_0x3a1e6f(0x28a)]=_0x4c4592,exchange['apiSecret']=_0x53a992,exchange['apiPassword']=_0x448f30,logger[_0x3a1e6f(0x15f)]('Updating\x20API\x20key\x20(not\x20saved\x20in\x20config\x20file\x20yet)');}function setStableCoins(){const _0x2d6ba4=_0x400f17;let _0x593c0b=config[_0x2d6ba4(0x1ec)]==_0x2d6ba4(0x1dc)?'ETH':config[_0x2d6ba4(0x1ec)]==_0x2d6ba4(0xef)?_0x2d6ba4(0xef):'BTC',_0x438bb2=allSymbols[_0x2d6ba4(0x267)](_0x593c0b+_0x2d6ba4(0x16b))?'USD':allSymbols['includes'](_0x593c0b+_0x2d6ba4(0x1e8))?_0x2d6ba4(0x235):_0x2d6ba4(0x1b5),_0x1b73a8=allSymbols['includes'](_0x593c0b+_0x2d6ba4(0x238))?_0x2d6ba4(0x1b5):_0x438bb2;enableFiatToggle=!![],_0x438bb2==_0x2d6ba4(0x1b5)&&(enableFiatToggle=![],storeFiat(_0x2d6ba4(0x1b5))),_0x1b73a8!=_0x2d6ba4(0x1b5)&&(enableFiatToggle=![],storeFiat(_0x2d6ba4(0x27e))),stablecoins={'eur':{'coin':''+_0x593c0b+_0x1b73a8,'symbol':_0x593c0b+'/'+_0x1b73a8},'usd':{'coin':''+_0x593c0b+_0x438bb2,'symbol':_0x593c0b+'/'+_0x438bb2}};}async function initwsCcxt(){const _0x5cfe11=_0x400f17;initCycle++;const _0xca7697=initCycle;let _0x3e3e9c=[];config[_0x5cfe11(0x262)]['forEach'](_0x3e42b0=>{const _0x6e1aa3=_0x5cfe11;if(!_0x3e42b0['excluded']&&_0x3e42b0['coin']!=config['basecoin'])_0x3e3e9c[_0x6e1aa3(0x20c)](_0x3e42b0[_0x6e1aa3(0x188)]);});if(!_0x3e3e9c[_0x5cfe11(0x267)](stablecoins[_0x5cfe11(0x28b)][_0x5cfe11(0x188)]))_0x3e3e9c[_0x5cfe11(0x20c)](stablecoins[_0x5cfe11(0x28b)][_0x5cfe11(0x188)]);if(!_0x3e3e9c[_0x5cfe11(0x267)](stablecoins[_0x5cfe11(0x24c)][_0x5cfe11(0x188)]))_0x3e3e9c[_0x5cfe11(0x20c)](stablecoins[_0x5cfe11(0x24c)][_0x5cfe11(0x188)]);if(config[_0x5cfe11(0x18e)]['startsWith'](_0x5cfe11(0x21b))&&config[_0x5cfe11(0x1ec)]!=_0x5cfe11(0xef)){if(!_0x3e3e9c[_0x5cfe11(0x267)](_0x5cfe11(0x201)+config['basecoin']))_0x3e3e9c[_0x5cfe11(0x20c)](_0x5cfe11(0x201)+config[_0x5cfe11(0x1ec)]);}loadCoins(_0x3e3e9c),_0x3e3e9c=validateSymbols(_0x3e3e9c);const _0x6354aa=async _0x4eecb2=>{const _0x9c61f1=_0x5cfe11;let _0x12d637;try{const _0x2d8d5c=await getTickers(_0x4eecb2);Object['entries'](_0x2d8d5c)[_0x9c61f1(0x23b)](_0x48ad47=>{const _0x3919a0=_0x9c61f1;_0x12d637=_0x48ad47[0x1][_0x3919a0(0x188)],gTicker[noslash(_0x12d637)]=_0x48ad47[0x1]['last'],gChange[_0x12d637]=_0x48ad47[0x1][_0x3919a0(0xf7)];});}catch(_0x32222c){await handleError(_0x32222c,_0x9c61f1(0x149),_0x12d637);}},_0x2c5c9c=async _0x469ad2=>{const _0x2b7772=_0x5cfe11;while(initCycle==_0xca7697){if(!botPaused)try{const _0x54bf50=await exchange[_0x2b7772(0x102)](_0x469ad2);gTicker[noslash(_0x54bf50[0x0]['symbol'])]=_0x54bf50[0x0][_0x2b7772(0x11d)];}catch(_0x2206a4){if(!exchangeStopped)await handleError(_0x2206a4,_0x2b7772(0x230),_0x469ad2);}else await sleep(0x64);}},_0x1d588d=async _0x1f2335=>{const _0x15ff20=_0x5cfe11;while(initCycle==_0xca7697){if(!botPaused)try{const _0x197e53=await exchange[_0x15ff20(0x21c)](_0x1f2335),_0x4dadf7=_0x197e53[_0x15ff20(0x29f)]();gTicker[noslash(_0x4dadf7[_0x15ff20(0x188)])]=_0x4dadf7[_0x15ff20(0x11d)];}catch(_0x4fad52){if(!exchangeStopped)await handleError(_0x4fad52,_0x15ff20(0x1cf),_0x1f2335[_0x15ff20(0x258)]());}else await sleep(0x64);}},_0x42a7a2=async _0x3debe8=>{const _0x3b54d9=_0x5cfe11;while(initCycle==_0xca7697){if(!botPaused){let _0x33cdc4;try{await sleep(0x3c*0x3e8);const _0x312e78=await getTickers(_0x3debe8);Object[_0x3b54d9(0x252)](_0x312e78)[_0x3b54d9(0x23b)](_0x4b0ba7=>{_0x33cdc4=_0x4b0ba7[0x1]['symbol'],gChange[_0x33cdc4]=_0x4b0ba7[0x1]['percentage'];});}catch(_0x4b2ee9){if(!exchangeStopped)await handleError(_0x4b2ee9,_0x3b54d9(0x1f0),_0x33cdc4);}}else await sleep(0x64);}},_0xd1eda=async _0x4bbda5=>{const _0xebdfef=_0x5cfe11;while(initCycle==_0xca7697){if(!botPaused)try{const _0x5cf8fe=await exchange[_0xebdfef(0x229)](_0x4bbda5);initCycle==_0xca7697&&_0x5cf8fe[_0xebdfef(0x23b)](_0x4262b6=>{updateNumberCoinsCcxt(_0x4262b6);});}catch(_0x1da59b){if(!exchangeStopped)await handleError(_0x1da59b,_0xebdfef(0x203));}else await sleep(0x64);}};_0x6354aa(_0x3e3e9c),_0x42a7a2(_0x3e3e9c),exchange[_0x5cfe11(0x15a)][_0x5cfe11(0x21c)]&&!(config[_0x5cfe11(0x18e)]==_0x5cfe11(0x1b3)&&_0x3e3e9c[_0x5cfe11(0x29e)]>0xa)?_0x1d588d(_0x3e3e9c):_0x3e3e9c[_0x5cfe11(0x23b)](_0x55d816=>{_0x2c5c9c(_0x55d816);}),_0x3e3e9c[_0x5cfe11(0x23b)](_0xc90309=>{_0xd1eda(_0xc90309);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x362613){const _0x152464=_0x400f17;let _0x476689={};try{if(config[_0x152464(0x18e)]!=_0x152464(0x131))_0x476689=await exchange[_0x152464(0x213)](_0x362613);else for(const _0x35b075 of _0x362613){const _0x369216=await exchange[_0x152464(0x1b6)](_0x35b075);_0x476689[_0x35b075]=_0x369216;}return _0x476689;}catch(_0x2a6a78){throw _0x2a6a78;}}function setBlockTransactionDetection(_0x14aa31){const _0x3f0ab6=_0x400f17;blockTransactionDetection=_0x14aa31,logger[_0x3f0ab6(0x15f)]('Block\x20transaction\x20detection:\x20'+blockTransactionDetection);}async function detectLiquidityChange(_0x18c413=0x0){const _0x25eb0d=_0x400f17;transactionDetectionOngoing=!![];try{const _0x3287b0=await getCoins(_0x18c413),[_0x347acc,_0x31c231]=_0x3287b0;let _0x5d7644=[];currentCoins[_0x25eb0d(0x23b)](_0x11aa0f=>{const _0x6b6369=_0x25eb0d,_0xd4b184=_0x347acc[_0x6b6369(0x17b)](_0x3651bd=>_0x3651bd[_0x6b6369(0x14a)]==_0x11aa0f[_0x6b6369(0x14a)]);if(_0xd4b184){if(_0x11aa0f['number']!=_0xd4b184[_0x6b6369(0x15e)]){let _0x5df53b;if(_0x11aa0f[_0x6b6369(0x14a)]!=config[_0x6b6369(0x1ec)]){const _0x27070b=gTicker[noslash(_0x11aa0f['symbol'])];_0x5df53b=_0x11aa0f[_0x6b6369(0x108)]?0x1/_0x27070b:_0x27070b;}else _0x5df53b=0x1;_0x5d7644['push']({'coin':_0x11aa0f[_0x6b6369(0x14a)],'symbol':_0x11aa0f['symbol'],'price':_0x5df53b,'number':Number(formatResult(_0xd4b184[_0x6b6369(0x15e)]-_0x11aa0f[_0x6b6369(0x15e)],0x8)),'basecoinvalue':_0x5df53b*(_0xd4b184[_0x6b6369(0x15e)]-_0x11aa0f[_0x6b6369(0x15e)])});}}});if(_0x5d7644[_0x25eb0d(0x29e)]>0x0&&!blockTransactionDetection){for(const _0x4df086 of _0x5d7644){if(config[_0x25eb0d(0x120)]){logger[_0x25eb0d(0x15f)]('Liquidity\x20change\x20|\x20basecoin\x20value:\x20'+_0x4df086['basecoinvalue']+_0x25eb0d(0x14b)+lastFees['highest']);if(lastFees[_0x25eb0d(0x204)]==0x0||Math[_0x25eb0d(0x22d)](_0x4df086['basecoinvalue'])>lastFees[_0x25eb0d(0x204)]*0x3){if(config[_0x25eb0d(0x120)]==_0x25eb0d(0x118)){delete _0x4df086[_0x25eb0d(0x188)],delete _0x4df086[_0x25eb0d(0x190)];let _0x41b4f0=[],_0x388831=[...config[_0x25eb0d(0x14c)]]||[],_0x521bae=config[_0x25eb0d(0x14c)];_0x388831[_0x25eb0d(0x271)]((_0x189765,_0x1819e7)=>_0x189765['date']>_0x1819e7[_0x25eb0d(0x24b)]?-0x1:_0x1819e7[_0x25eb0d(0x24b)]>_0x189765['date']?0x1:0x0);const _0x2294f4=getDate();if(_0x388831[0x0]){const _0x45256f=fns[_0x25eb0d(0x21e)](_0x388831[0x0][_0x25eb0d(0x24b)],_0x25eb0d(0x1a5),new Date()),_0x37d8a3=fns['parse'](_0x2294f4,_0x25eb0d(0x1a5),new Date());if(fns[_0x25eb0d(0xfc)](_0x45256f,_0x37d8a3)){_0x41b4f0=_0x388831[0x0][_0x25eb0d(0x175)];const _0xc4db3d=_0x41b4f0[_0x25eb0d(0x17b)](_0x11da63=>_0x11da63[_0x25eb0d(0x14a)]==_0x4df086[_0x25eb0d(0x14a)]);_0xc4db3d?(_0xc4db3d[_0x25eb0d(0x15e)]+=_0x4df086[_0x25eb0d(0x15e)],_0xc4db3d['number']==0x0&&(_0x41b4f0=_0x41b4f0[_0x25eb0d(0x25e)](_0x58a035=>{const _0x33237b=_0x25eb0d;return _0x58a035['coin']!=_0x4df086[_0x33237b(0x14a)];}))):_0x41b4f0[_0x25eb0d(0x20c)](_0x4df086);const _0x582614=_0x521bae[_0x25eb0d(0x17b)](_0x1a17f8=>_0x1a17f8[_0x25eb0d(0x24b)]==_0x2294f4);_0x582614['changes']=_0x41b4f0;}else _0x521bae['push']({'date':_0x2294f4,'changes':[_0x4df086]});}const _0x1e73eb=_0x521bae[_0x25eb0d(0x17b)](_0x440e5e=>_0x440e5e[_0x25eb0d(0x24b)]==_0x2294f4);if(_0x1e73eb){let _0x2e7ac3=!![];_0x1e73eb[_0x25eb0d(0x175)][_0x25eb0d(0x23b)](_0x451087=>{const _0x41e798=_0x25eb0d;if(_0x451087[_0x41e798(0x15e)]!=0x0)_0x2e7ac3=![];}),_0x2e7ac3&&(_0x521bae=_0x521bae['filter'](_0x1b7efd=>{const _0x5eebf5=_0x25eb0d;return _0x1b7efd[_0x5eebf5(0x24b)]!=_0x2294f4;}));}let _0x588bdd=dbConfig[_0x25eb0d(0x283)](_0x25eb0d(0x29d))[_0x25eb0d(0x17b)]({'botID':botID})[_0x25eb0d(0x2ab)]();_0x588bdd&&(dbConfig[_0x25eb0d(0x283)]('bot')[_0x25eb0d(0x17b)]({'botID':botID})['assign']({'liquidity':_0x521bae})['write'](),config['liquidity']=_0x521bae);logHistory('success',_0x25eb0d(0x1ab)+Math['abs'](_0x4df086[_0x25eb0d(0x15e)])+'\x20'+_0x4df086[_0x25eb0d(0x14a)]+'\x20'+(_0x4df086[_0x25eb0d(0x15e)]>0x0?'added':_0x25eb0d(0x1fb))+'\x20-\x20liquidity\x20settings\x20updated\x20accordingly'),proxyEmit('configuration',emittedConfiguration());const _0xf1d451=getNormalizedPerformance();emitPerformance(_0xf1d451),getStartingBalances(_0xf1d451),logger[_0x25eb0d(0x15f)](_0x25eb0d(0x293));}else config[_0x25eb0d(0x120)]=='switch-manual'&&(config[_0x25eb0d(0x14e)]?(await storeHeadless({'headless':![]}),logHistory(_0x25eb0d(0x136),_0x25eb0d(0x1ab)+Math[_0x25eb0d(0x22d)](_0x4df086[_0x25eb0d(0x15e)])+'\x20'+_0x4df086[_0x25eb0d(0x14a)]+'\x20'+(_0x4df086[_0x25eb0d(0x15e)]>0x0?_0x25eb0d(0xfb):_0x25eb0d(0x1fb))+'\x20-\x20bot\x20switched\x20to\x20manual\x20mode')):logger[_0x25eb0d(0x15f)](_0x25eb0d(0x1ab)+Math[_0x25eb0d(0x22d)](_0x4df086['number'])+'\x20'+_0x4df086[_0x25eb0d(0x14a)]+'\x20'+(_0x4df086[_0x25eb0d(0x15e)]>0x0?_0x25eb0d(0xfb):_0x25eb0d(0x1fb))+'\x20-\x20bot\x20already\x20running\x20in\x20manual\x20mode'));}else logger[_0x25eb0d(0x15f)](_0x25eb0d(0x1bd)+Math[_0x25eb0d(0x22d)](_0x4df086['number'])+'\x20'+_0x4df086[_0x25eb0d(0x14a)]+'\x20'+(_0x4df086[_0x25eb0d(0x15e)]>0x0?_0x25eb0d(0xfb):_0x25eb0d(0x1fb)));}else logger[_0x25eb0d(0x15f)](_0x25eb0d(0x1ab)+Math[_0x25eb0d(0x22d)](_0x4df086[_0x25eb0d(0x15e)])+'\x20'+_0x4df086['coin']+'\x20'+(_0x4df086[_0x25eb0d(0x15e)]>0x0?_0x25eb0d(0xfb):_0x25eb0d(0x1fb))+_0x25eb0d(0x1e6));}currentCoins=_0x347acc,currentCoinsAll=_0x31c231;}}catch(_0xdfd399){if(!exchangeStopped)await handleError(_0xdfd399,_0x25eb0d(0x25d));}transactionDetectionOngoing=![];}async function watchTransactions(){await sleep(0x14*0x3e8);while(!![]){!botPaused&&!blockTransactionDetection&&coinsLoaded?(detectLiquidityChange(),await sleep(watchTransactionsInterval)):await sleep(0x3e8);}}async function loadSymbols(){const _0x24a11a=_0x400f17;try{markets=await exchange[_0x24a11a(0x10e)](!![]),allSymbols=[],Object[_0x24a11a(0x252)](markets)[_0x24a11a(0x23b)](_0x40584b=>{const _0x239820=_0x24a11a;_0x40584b[0x1][_0x239820(0x264)]&&_0x40584b[0x1][_0x239820(0x2b2)]&&allSymbols[_0x239820(0x20c)](_0x40584b[0x0]);});}catch(_0x14b15d){markets?logger[_0x24a11a(0x15f)](_0x24a11a(0x1cc)+_0x14b15d['toString']()):(loading['cancel']=!![],emitLoadingProgress(),_0x14b15d[_0x24a11a(0x258)]()[_0x24a11a(0x278)]()[_0x24a11a(0x267)](_0x24a11a(0x1d1))||_0x14b15d['toString']()[_0x24a11a(0x278)]()['includes'](_0x24a11a(0x193))?logHistory(_0x24a11a(0x1ae),'Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)'):handleErrorNoStop(_0x14b15d,_0x24a11a(0x1a4),!![]),logHistory(_0x24a11a(0x1ae),_0x24a11a(0x1cd)),logHistory(_0x24a11a(0x1ae),_0x24a11a(0x216)+loadCoinsRetryInterval/0xea60+_0x24a11a(0x286)),logger['debug'](_0x24a11a(0x2af),_0x14b15d),botPaused=!![],await sleep(loadCoinsRetryInterval),restartBot());}}function validateSymbols(_0x430186){const _0xc6034b=_0x400f17;let _0x8af37c=[];return _0x430186[_0xc6034b(0x23b)](_0x2d9dfd=>{const _0x39d7fe=_0xc6034b;!allSymbols[_0x39d7fe(0x267)](_0x2d9dfd)?logHistory('error','Invalid\x20symbol:\x20'+_0x2d9dfd+'\x20-\x20exclude\x20coin\x20in\x20the\x20configuration'):_0x8af37c[_0x39d7fe(0x20c)](_0x2d9dfd);}),_0x8af37c;}async function initclient(){const _0x15fd32=_0x400f17;proxyEmit(_0x15fd32(0x172),emittedConfiguration()),proxyEmit('exchanges',supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x1cea1d=getNormalizedPerformance();emitPerformance(_0x1cea1d),getStartingBalances(_0x1cea1d);}async function toggleBotMode(){const _0x1436fc=_0x400f17;let _0x32a986=dbConfig['get'](_0x1436fc(0x29d))[_0x1436fc(0x17b)]({'botID':botID})[_0x1436fc(0x2ab)]();if(_0x32a986){const _0xb60f95=!_0x32a986['headless'];dbConfig[_0x1436fc(0x283)]('bot')[_0x1436fc(0x17b)]({'botID':botID})[_0x1436fc(0x1f2)]({'headless':_0xb60f95})[_0x1436fc(0x200)](),config[_0x1436fc(0x14e)]=_0xb60f95,proxyEmit('configuration',emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x5be428=_0x400f17;process[_0x5be428(0x166)]({'updatebotmanager':!![]},_0x2569d9=>{}),logger[_0x5be428(0x15f)](_0x5be428(0x115)+config[_0x5be428(0x14e)]);}async function loadCoins(_0xbd7638){const _0x3ede35=_0x400f17;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x12ce7c,_0x362c9a=0x0,_0x3cd77f=0x0;_0xbd7638[_0x3ede35(0x23b)](_0xceae3d=>{const _0x3862d7=_0x3ede35;loading[_0x3862d7(0xf5)]['push'](_0xceae3d);}),loadingCanceled=![];let _0x459fed=![];while(_0x12ce7c!=_0xbd7638[_0x3ede35(0x29e)]+maxLoadingProgress){_0x12ce7c=loadingProgress,_0xbd7638[_0x3ede35(0x23b)](_0x38c011=>{const _0x218425=_0x3ede35;if(gTicker[noslash(_0x38c011)]){loading[_0x218425(0xf5)]=loading['remainingSymbols'][_0x218425(0x25e)](_0xba6d52=>_0xba6d52!=_0x38c011);if(!watchedSymbols['includes'](_0x38c011))watchedSymbols[_0x218425(0x20c)](_0x38c011);_0x12ce7c++;}}),loading['progress']=Math[_0x3ede35(0x248)](_0x12ce7c/(_0xbd7638[_0x3ede35(0x29e)]+maxLoadingProgress)*0x64);loading[_0x3ede35(0x259)]!=0x64&&(_0x3cd77f>0x1e*0x5&&(loading['timeout']=!![],emitLoadingProgress()),_0x3cd77f>0x78*0x5&&!_0x459fed&&(_0x459fed=!![],logHistory('error',_0x3ede35(0x1fd)+loading['remainingSymbols'][_0x3ede35(0x1be)](',\x20')+_0x3ede35(0x173)),logHistory(_0x3ede35(0x1ae),_0x3ede35(0x216)+loadCoinsRetryInterval/0xea60+_0x3ede35(0x286)),loadingCanceled=!![],await sleep(loadCoinsRetryInterval),restartBot()));if(loadingCanceled){loading[_0x3ede35(0x16c)]=!![],emitLoadingProgress();break;}else _0x362c9a!=loading['progress']&&(_0x362c9a=loading['progress'],emitLoadingProgress()),_0x3cd77f++,await sleep(0xc8);}_0x12ce7c==_0xbd7638[_0x3ede35(0x29e)]+maxLoadingProgress&&(coinsLoaded=!![],process[_0x3ede35(0x166)]({'status':'enabled','live':'running'},_0x34a148=>{}),_0x459fed&&logHistory(_0x3ede35(0x136),_0x3ede35(0x1f6)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x2b2622=_0x400f17;proxyEmit(_0x2b2622(0x172),{...emittedConfiguration(),'configstate':'loading-canceled'});}function emitLoadingProgress(){const _0x2c0d9c=_0x400f17;proxyEmit(_0x2c0d9c(0x10c),loading);}async function getFiat(){const _0x2ded87=_0x400f17;let _0x576a4b=gTicker[stablecoins[_0x2ded87(0x28b)][_0x2ded87(0x14a)]],_0x5e22bb=gTicker[stablecoins[_0x2ded87(0x24c)]['coin']];return{'eur':Number(_0x576a4b),'usd':Number(_0x5e22bb)};}function capitalize(_0x52c445){const _0x304857=_0x400f17;return _0x52c445[_0x304857(0x124)](0x0,0x1)[_0x304857(0x18d)]()+_0x52c445['substring'](0x1);}function supportedExchanges(){const _0x6fa177=_0x400f17,_0x2d3114=['ws',_0x6fa177(0x213),_0x6fa177(0x1b6),_0x6fa177(0x102),_0x6fa177(0x229),_0x6fa177(0x152),_0x6fa177(0x1fa),_0x6fa177(0x1e4),_0x6fa177(0x1fe)];let _0x5624f7=[],_0x17d0d8=[],_0x46cff0=ccxt[_0x6fa177(0x211)]['exchanges'];_0x46cff0['forEach'](_0x54bc64=>{const _0xa5b557=_0x6fa177;try{const _0x3a865e=new ccxt[(_0xa5b557(0x211))][_0x54bc64]();_0x17d0d8[_0xa5b557(0x20c)](_0x3a865e);}catch(_0x327c41){}}),_0x17d0d8[_0x6fa177(0x23b)](_0x491a0b=>{const _0x27a4fc=_0x6fa177;let _0x573027=0x0;_0x2d3114[_0x27a4fc(0x23b)](_0xa626ee=>{const _0x559dac=_0x27a4fc;_0xa626ee in _0x491a0b[_0x559dac(0x15a)]&&_0x491a0b[_0x559dac(0x15a)][_0xa626ee]&&_0x573027++;}),_0x573027==_0x2d3114['length']&&(!excludedExchanges['includes'](_0x491a0b['id'])&&_0x5624f7[_0x27a4fc(0x20c)](capitalize(_0x491a0b['id'])));});let _0x1c2be8=[];return _0x46cff0[_0x6fa177(0x23b)](_0x32026c=>{const _0x572333=_0x6fa177;_0x32026c=capitalize(_0x32026c);if(!_0x5624f7[_0x572333(0x267)](_0x32026c))_0x1c2be8[_0x572333(0x20c)](_0x32026c);}),_0x5624f7;}function setStartDatePerformance(){const _0x541e07=_0x400f17;if(config&&config[_0x541e07(0x14c)][0x0][_0x541e07(0x175)]['length']!=0x0){const _0x456622=config['liquidity'][0x0][_0x541e07(0x175)];dbPerformance['get']('data')[_0x541e07(0x17b)]({'date':config[_0x541e07(0x1f9)]})[_0x541e07(0x1f2)]({'coins':_0x456622})[_0x541e07(0x200)]();}}async function recreateCoinResults(){const _0x39db32=_0x400f17;recreationNeeded=![];let _0xe17a7b,_0x4fcc3e=[];try{for(const _0x1470a6 of currentCoins){if(_0x1470a6[_0x39db32(0x14a)]!=config[_0x39db32(0x1ec)]){let _0x2a1d85=0x0,_0xd4483f,_0x3311a2;_0xe17a7b=await getAllEventOrders(_0x1470a6[_0x39db32(0x188)]);if(_0xe17a7b[_0x39db32(0x29e)]>0x0)_0xe17a7b[_0x39db32(0x23b)](_0x52d6f1=>{const _0x202cc6=_0x39db32,_0x54d2b1=_0x1470a6[_0x202cc6(0x188)][_0x202cc6(0x267)](config[_0x202cc6(0x1ec)]+'/');_0x4fcc3e[_0x202cc6(0x20c)]({'datetime':_0x52d6f1[_0x202cc6(0x1d6)],'coin':_0x1470a6[_0x202cc6(0x14a)],'symbol':_0x1470a6[_0x202cc6(0x188)],'side':_0x52d6f1[_0x202cc6(0xf2)],'reverse':_0x54d2b1,'amount':formatResult(_0x52d6f1[_0x202cc6(0x285)],0x8),'filled':formatResult(_0x52d6f1['filled'],0x8),'price':formatResult(_0x52d6f1[_0x202cc6(0x11d)],0x8)}),_0x2a1d85=_0x52d6f1['side']==_0x202cc6(0x1e2)?_0x2a1d85+_0x52d6f1[_0x202cc6(0x285)]:_0x2a1d85-_0x52d6f1[_0x202cc6(0x285)];if(!_0x3311a2)_0x3311a2=_0x52d6f1['price'];});_0xd4483f=_0x1470a6[_0x39db32(0x15e)]-_0x2a1d85;let _0x5c2931;config[_0x39db32(0x14c)][_0x39db32(0x23b)](_0x3a6087=>{const _0x199f06=_0x39db32;!_0x5c2931&&(_0x5c2931=_0x3a6087[_0x199f06(0x175)][_0x199f06(0x17b)](_0x2b74d6=>_0x2b74d6[_0x199f06(0x14a)]==_0x1470a6[_0x199f06(0x14a)]),_0x5c2931&&(_0xd4483f=_0x5c2931[_0x199f06(0x15e)],_0x3311a2=_0x5c2931[_0x199f06(0x11d)]));});let _0x292599=dbCoinResults[_0x39db32(0x283)]('coins')[_0x39db32(0x17b)]({'coin':_0x1470a6[_0x39db32(0x14a)]})[_0x39db32(0x2ab)]();_0x292599={'coin':_0x1470a6['coin'],'number':_0xd4483f,'breakeven':_0x3311a2,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x39db32(0x283)](_0x39db32(0x19e))[_0x39db32(0x17b)]({'coin':_0x1470a6['coin']})['assign'](_0x292599)[_0x39db32(0x200)]();}}_0x4fcc3e[_0x39db32(0x271)]((_0xb42bca,_0x46bcd9)=>_0xb42bca[_0x39db32(0x1d6)]>_0x46bcd9[_0x39db32(0x1d6)]?0x1:_0x46bcd9[_0x39db32(0x1d6)]>_0xb42bca[_0x39db32(0x1d6)]?-0x1:0x0);let _0x35ec93=0x0;for(let _0x297a03 of _0x4fcc3e){await updateCoinResults(_0x297a03,!![]);}}catch(_0x417727){await handleError(_0x417727,_0x39db32(0x23c));}}async function getAllEventOrders(_0x14ff40){const _0x5a556b=_0x400f17;let _0x147a54=[],_0x44ddfd=dbLogs[_0x5a556b(0x283)](_0x5a556b(0x257))[_0x5a556b(0x25e)](_0x5b4c2b=>{const _0xa0eb19=_0x5a556b,_0x16702c=_0x5b4c2b['event'][_0xa0eb19(0x278)]();return _0x16702c['includes'](_0x14ff40['toLowerCase']())&&(_0x16702c['includes']('market')&&_0x16702c[_0xa0eb19(0x267)](_0xa0eb19(0x11c))||_0x16702c[_0xa0eb19(0x267)](_0xa0eb19(0x285))&&_0x16702c[_0xa0eb19(0x267)]('order'));})[_0x5a556b(0x103)](_0x5a556b(0x134))[_0x5a556b(0x2ab)]();return _0x44ddfd[_0x5a556b(0x23b)](_0x476641=>{const _0x548694=_0x5a556b,_0x13801b=_0x476641['event'][_0x548694(0x267)](_0x548694(0x2b3))?_0x548694(0x2b3):'buy',_0x3c205e=/#([0-9]|\.)+\s/i,_0x30a2cc=Number(_0x3c205e[_0x548694(0x2b4)](_0x476641['event'])[0x0]['slice'](0x1)),_0x4c010f=/@([0-9]|\.)+$/i,_0x31661d=Number(_0x4c010f[_0x548694(0x2b4)](_0x476641['event'])[0x0]['slice'](0x1));_0x147a54['push']({'datetime':_0x476641[_0x548694(0x134)],'coin':symbolToCoin(_0x14ff40),'symbol':_0x14ff40,'side':_0x13801b,'amount':_0x30a2cc,'filled':_0x30a2cc,'price':_0x31661d});}),_0x147a54;}async function validate24hChanges(){const _0x245748=_0x400f17;for(const _0xb49f84 of currentCoins){if(_0xb49f84[_0x245748(0x14a)]!=config[_0x245748(0x1ec)]){let _0x4464cb;_0xb49f84[_0x245748(0x108)]?_0x4464cb=formatResult((0x1/(gChange[_0xb49f84['symbol']]/0x64+0x1)-0x1)*0x64,0x3):_0x4464cb=gChange[_0xb49f84[_0x245748(0x188)]],_0x4464cb<config['change24h']&&(logHistory(_0x245748(0x1ae),_0xb49f84['coin']+_0x245748(0x10a)+_0x4464cb+'%'),logHistory(_0x245748(0x1ae),_0x245748(0x147)),logHistory(_0x245748(0x1ae),_0x245748(0x2a7)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x2c9b4b,_0x55baa3){const _0x2b2c1a=_0x400f17;if(!_0x2c9b4b)return!![];const _0x4022b5=_0x55baa3[_0x2b2c1a(0x198)]('.'),_0xe63205=_0x2c9b4b[_0x2b2c1a(0x198)]('.');for(var _0x72ac98=0x0;_0x72ac98<_0xe63205[_0x2b2c1a(0x29e)];_0x72ac98++){const _0xb64c50=~~_0xe63205[_0x72ac98],_0x30826c=~~_0x4022b5[_0x72ac98];if(_0xb64c50<_0x30826c)return!![];if(_0xb64c50>_0x30826c)return![];}return![];}async function oneTimeMigration(){const _0x59359b=_0x400f17;let _0x36d98a=dbLogs['get'](_0x59359b(0x1e1))[_0x59359b(0x2ab)]();if(isOlderVersion(_0x36d98a,'2.3.5')){let _0x4e8e96=[];const _0x439b89=dbLogs[_0x59359b(0x283)](_0x59359b(0x257))['value']();_0x439b89[_0x59359b(0x23b)](_0x5b659b=>{const _0x314c68=_0x59359b;_0x4e8e96[_0x314c68(0x20c)]({'time':_0x5b659b[_0x314c68(0x134)],'type':_0x5b659b['type'],'event':_0x5b659b[_0x314c68(0x196)]});}),dbLogs[_0x59359b(0x283)](_0x59359b(0x257))[_0x59359b(0x1f2)](_0x4e8e96)[_0x59359b(0x200)]();}let _0xb413fe=dbConfig['get'](_0x59359b(0x1e1))['value']();if(isOlderVersion(_0xb413fe,_0x59359b(0x111))){let _0x4cd9ea=dbConfig['get'](_0x59359b(0x29d))[_0x59359b(0x17b)]({'botID':botID})[_0x59359b(0x2ab)]();if(_0x4cd9ea){let _0x2226c9=[];_0x4cd9ea[_0x59359b(0x262)][_0x59359b(0x23b)](_0x46c084=>{const _0x1cabb0=_0x59359b;_0x2226c9[_0x1cabb0(0x20c)]({'coin':_0x46c084['coin'],'number':_0x46c084['startnumber'],'price':_0x46c084[_0x1cabb0(0xfd)]}),delete _0x46c084[_0x1cabb0(0x284)],delete _0x46c084[_0x1cabb0(0xfd)];});if(_0x2226c9[_0x59359b(0x29e)]!==0x0)fs[_0x59359b(0x245)](configbackuppath+('starting-balance-'+botID+'.json'),JSON[_0x59359b(0x1f7)](_0x2226c9,null,0x4),function(_0x2b4081){if(_0x2b4081){}});const _0x2e1a39=(_0x4f904b,_0x5aa99b)=>{const _0x346cf4=_0x59359b;let _0x2d3c05=[];_0x5aa99b[_0x346cf4(0x23b)](_0x51a305=>{const _0x450b59=_0x346cf4,_0x493e90=_0x4f904b[_0x450b59(0x17b)](_0x1ea95c=>_0x1ea95c[_0x450b59(0x14a)]==_0x51a305['coin']);if(!_0x493e90)_0x2d3c05[_0x450b59(0x20c)](_0x51a305);});let _0x46da43=[];return _0x4f904b[_0x346cf4(0x23b)](_0x4a555f=>{const _0x4d4623=_0x346cf4,_0xe735dd=_0x5aa99b[_0x4d4623(0x17b)](_0x16cca1=>_0x16cca1['coin']==_0x4a555f['coin']);if(!_0xe735dd||_0xe735dd['number']==0x0&&_0x4a555f[_0x4d4623(0x15e)]!=0x0)_0x46da43[_0x4d4623(0x20c)](_0x4a555f);}),{'missingDay1':_0x2d3c05,'notInDay2':_0x46da43};},_0x206c34=dbPerformance[_0x59359b(0x283)](_0x59359b(0x1c7))[_0x59359b(0x26c)]()['value']();if(_0x206c34[_0x59359b(0x29e)]>0x1){const {missingDay1:_0x207cc4,notInDay2:_0x3e970b}=_0x2e1a39(_0x2226c9,_0x206c34[0x1]['coins']);_0x2226c9=[..._0x2226c9,..._0x207cc4],_0x3e970b[_0x59359b(0x23b)](_0x21be5a=>{const _0x38a603=_0x59359b;let _0x366068=_0x2226c9[_0x38a603(0x117)](_0x3b0b30=>_0x3b0b30[_0x38a603(0x14a)]==_0x21be5a[_0x38a603(0x14a)]);_0x366068!=-0x1&&_0x2226c9[_0x38a603(0xfe)](_0x366068,0x1);});}_0x2226c9[_0x59359b(0x271)]((_0x1b9cc7,_0x33994c)=>_0x1b9cc7['coin']>_0x33994c['coin']?0x1:_0x33994c['coin']>_0x1b9cc7[_0x59359b(0x14a)]?-0x1:0x0);let _0x2f3aca=[{'date':_0x4cd9ea['startdate'],'changes':_0x2226c9}];_0x206c34[_0x59359b(0x29e)]>0x2&&_0x206c34['forEach']((_0x1f6d32,_0x4a8fb4)=>{const _0x1c7d7a=_0x59359b;if(_0x4a8fb4>0x0&&_0x4a8fb4<_0x206c34[_0x1c7d7a(0x29e)]-0x1){const {missingDay1:_0x30ec94,notInDay2:_0x5b87d1}=_0x2e1a39(_0x206c34[_0x4a8fb4][_0x1c7d7a(0x19e)],_0x206c34[_0x4a8fb4+0x1]['coins']);_0x2226c9=[],(_0x30ec94[_0x1c7d7a(0x29e)]!=0x0||_0x5b87d1['length']!=0x0)&&(_0x30ec94[_0x1c7d7a(0x29e)]!=0x0&&_0x2226c9[_0x1c7d7a(0x20c)](..._0x30ec94),_0x5b87d1[_0x1c7d7a(0x29e)]!=0x0&&(_0x5b87d1[_0x1c7d7a(0x23b)](_0x7794ac=>{const _0x5fca97=_0x1c7d7a;_0x7794ac[_0x5fca97(0x15e)]=-_0x7794ac[_0x5fca97(0x15e)];}),_0x2226c9['push'](..._0x5b87d1)),_0x2226c9[_0x1c7d7a(0x271)]((_0x2db2c1,_0x254c84)=>_0x2db2c1[_0x1c7d7a(0x14a)]>_0x254c84[_0x1c7d7a(0x14a)]?0x1:_0x254c84['coin']>_0x2db2c1['coin']?-0x1:0x0),_0x2f3aca['push']({'date':_0x206c34[_0x4a8fb4+0x1][_0x1c7d7a(0x24b)],'changes':_0x2226c9}));}}),dbConfig['get']('bot')[_0x59359b(0x17b)]({'botID':botID})[_0x59359b(0x1f2)]({..._0x4cd9ea,'liquidity':_0x2f3aca})[_0x59359b(0x200)]();}}if(isOlderVersion(_0xb413fe,_0x59359b(0x28f))){let _0x3aa14a=dbConfig[_0x59359b(0x283)](_0x59359b(0x29d))[_0x59359b(0x17b)]({'botID':botID})[_0x59359b(0x2ab)]();if(_0x3aa14a){const _0x4dc578=_0x3aa14a[_0x59359b(0x18e)],_0x19600f=_0x4dc578?capitalize(_0x4dc578):_0x59359b(0x21b);dbConfig[_0x59359b(0x283)](_0x59359b(0x29d))[_0x59359b(0x17b)]({'botID':botID})[_0x59359b(0x1f2)]({'exchange':_0x19600f})[_0x59359b(0x200)]();}}if(isOlderVersion(_0xb413fe,_0x59359b(0xe9))){let _0x451549=dbConfig[_0x59359b(0x283)](_0x59359b(0x29d))[_0x59359b(0x17b)]({'botID':botID})[_0x59359b(0x2ab)]();if(_0x451549){const _0x312721=_0x451549[_0x59359b(0x2b7)],_0x4ff074=_0x312721?_0x59359b(0x145):![];dbConfig[_0x59359b(0x283)](_0x59359b(0x29d))[_0x59359b(0x17b)]({'botID':botID})[_0x59359b(0x1f2)]({'marketcapEnabled':_0x4ff074})['write']();}}if(isOlderVersion(_0xb413fe,_0x59359b(0x12a))){let _0x20e72a=dbConfig[_0x59359b(0x283)]('bot')[_0x59359b(0x17b)]({'botID':botID})[_0x59359b(0x2ab)]();if(_0x20e72a){const _0x494ac6=_0x20e72a[_0x59359b(0x120)],_0x43c975=_0x494ac6?_0x59359b(0x118):![];dbConfig['get'](_0x59359b(0x29d))['find']({'botID':botID})[_0x59359b(0x1f2)]({'autoliquidity':_0x43c975})[_0x59359b(0x200)]();}}let _0x5a6127=dbPerformance[_0x59359b(0x283)]('version')['value']();isOlderVersion(_0x5a6127,_0x59359b(0x111))&&setStartDatePerformance();let _0x4e7c96=dbCoinResults['get'](_0x59359b(0x1e1))[_0x59359b(0x2ab)]();if(isOlderVersion(_0x4e7c96,_0x59359b(0x110))){let _0x57f660=dbCoinResults[_0x59359b(0x283)](_0x59359b(0x19e))[_0x59359b(0x2ab)]();if(_0x57f660[_0x59359b(0x29e)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x1d0d18=_0x400f17;dbConfig[_0x1d0d18(0x217)](_0x1d0d18(0x1e1),serverversion)[_0x1d0d18(0x200)](),dbPerformance['set']('version',serverversion)['write'](),dbLogs[_0x1d0d18(0x217)](_0x1d0d18(0x1e1),serverversion)['write'](),dbCoinResults['set'](_0x1d0d18(0x1e1),serverversion)[_0x1d0d18(0x200)]();}function getConfiguration(_0x26495b){const _0x3a4dd5=_0x400f17;let _0x93650b=dbConfig[_0x3a4dd5(0x283)](_0x3a4dd5(0x29d))[_0x3a4dd5(0x17b)]({'botID':_0x26495b})['value']();if(_0x93650b){let _0xaaaac1=![];typeof _0x93650b[_0x3a4dd5(0x282)]==_0x3a4dd5(0x1e9)&&(_0x93650b={..._0x93650b,'threshold':Number(_0x93650b['threshold'])},_0xaaaac1=!![]),_0x93650b[_0x3a4dd5(0x277)]==undefined&&(_0x93650b={..._0x93650b,'change24h':-0x14},_0xaaaac1=!![]),_0x93650b[_0x3a4dd5(0x1fc)]==undefined&&(_0x93650b={..._0x93650b,'fiat':'USD'},_0xaaaac1=!![]),_0x93650b[_0x3a4dd5(0x236)]==undefined&&(_0x93650b={..._0x93650b,'onepagemode':settings[_0x3a4dd5(0x236)]},_0xaaaac1=!![]),_0x93650b[_0x3a4dd5(0x2a3)]==undefined&&(_0x93650b={..._0x93650b,'colorscheme':_0x3a4dd5(0x164)},_0xaaaac1=!![]),_0x93650b[_0x3a4dd5(0x120)]==undefined&&(_0x93650b={..._0x93650b,'autoliquidity':_0x3a4dd5(0x118)},_0xaaaac1=!![]),_0x93650b[_0x3a4dd5(0x1b0)]==undefined&&(_0x93650b={..._0x93650b,'marketcapApi':settings[_0x3a4dd5(0x1b0)]?!![]:![]},_0xaaaac1=!![]),_0x93650b[_0x3a4dd5(0x2b7)]==undefined&&(_0x93650b={..._0x93650b,'marketcapEnabled':![]},_0xaaaac1=!![]),_0xaaaac1&&(_0x93650b={'botID':_0x93650b[_0x3a4dd5(0x1d2)],'exchange':_0x93650b[_0x3a4dd5(0x18e)],'apiKey':_0x93650b[_0x3a4dd5(0x28a)],'apiSecret':_0x93650b[_0x3a4dd5(0x19d)],'apiPassword':_0x93650b[_0x3a4dd5(0x2a0)],'basecoin':_0x93650b[_0x3a4dd5(0x1ec)],'botname':_0x93650b[_0x3a4dd5(0x121)],'showname':_0x93650b[_0x3a4dd5(0x12c)],'threshold':_0x93650b[_0x3a4dd5(0x282)],'ordertype':_0x93650b['ordertype'],'timeout':_0x93650b[_0x3a4dd5(0x232)],'fiat':_0x93650b['fiat'],'startdate':_0x93650b[_0x3a4dd5(0x1f9)],'recreate':_0x93650b[_0x3a4dd5(0x11f)],'timeshift':_0x93650b[_0x3a4dd5(0x26e)],'onepagemode':_0x93650b[_0x3a4dd5(0x236)],'headless':_0x93650b[_0x3a4dd5(0x14e)],'cooldown':_0x93650b[_0x3a4dd5(0x247)],'change24h':_0x93650b[_0x3a4dd5(0x277)],'emojibuy':_0x93650b[_0x3a4dd5(0x23f)],'emojisell':_0x93650b[_0x3a4dd5(0x170)],'colorscheme':_0x93650b[_0x3a4dd5(0x2a3)],'marketcapApi':_0x93650b[_0x3a4dd5(0x1b0)],'marketcapEnabled':_0x93650b[_0x3a4dd5(0x2b7)],'portfolio':_0x93650b[_0x3a4dd5(0x262)],'autoliquidity':_0x93650b[_0x3a4dd5(0x120)],'liquidity':_0x93650b['liquidity'],'openOrders':_0x93650b[_0x3a4dd5(0x2b1)]},dbConfig['get'](_0x3a4dd5(0x29d))[_0x3a4dd5(0x116)]()['write'](),dbConfig['get']('bot')[_0x3a4dd5(0x20c)](_0x93650b)[_0x3a4dd5(0x200)]());}else _0x93650b={'botID':_0x26495b,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x3a4dd5(0x168)+_0x26495b,'showname':![],'threshold':0x3,'ordertype':_0x3a4dd5(0x288),'timeout':0x14,'fiat':_0x3a4dd5(0x27e),'startdate':getDate(),'recreate':![],'timeshift':settings['timeshift'],'onepagemode':settings[_0x3a4dd5(0x236)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x3a4dd5(0x164),'marketcapApi':settings['marketcapApi']?!![]:![],'marketcapEnabled':![],'portfolio':[],'autoliquidity':'update-liquidity','liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x93650b;}function emittedConfiguration(){const _0x394bd2=_0x400f17;let _0x3db52a;if(config[_0x394bd2(0x28a)]=='')_0x3db52a={...config,'configstate':_0x394bd2(0x12d)};else config[_0x394bd2(0x28a)]==_0x394bd2(0x1db)?_0x3db52a={...config,'configstate':_0x394bd2(0x231)}:(_0x3db52a={...config,'apiKey':'************','apiSecret':_0x394bd2(0x20e)},config[_0x394bd2(0x2a0)]&&(_0x3db52a[_0x394bd2(0x2a0)]=_0x394bd2(0x20e)));return _0x3db52a[_0x394bd2(0x289)]=enableFiatToggle,_0x3db52a;}function getSettings(){const _0x533d8b=_0x400f17;return dbSettings[_0x533d8b(0x283)](_0x533d8b(0x1a3))[_0x533d8b(0x2ab)]();}function getSecure(){const _0x434164=_0x400f17;return dbSecure[_0x434164(0x283)]('secure')[_0x434164(0x2ab)]()||{};}function updateTimeshift(_0x9a000){const _0x3741b0=_0x400f17;let _0x510c83=dbConfig['get']('bot')['find']({'botID':botID})[_0x3741b0(0x2ab)]();_0x510c83&&dbConfig['get'](_0x3741b0(0x29d))[_0x3741b0(0x17b)]({'botID':botID})[_0x3741b0(0x1f2)]({'timeshift':_0x9a000})['write'](),config[_0x3741b0(0x26e)]=_0x9a000,proxyEmit(_0x3741b0(0x172),emittedConfiguration());}function updateOnepagemode(_0x398f6e){const _0x14861a=_0x400f17;let _0x4395d2=dbConfig[_0x14861a(0x283)](_0x14861a(0x29d))[_0x14861a(0x17b)]({'botID':botID})[_0x14861a(0x2ab)]();_0x4395d2&&dbConfig[_0x14861a(0x283)](_0x14861a(0x29d))[_0x14861a(0x17b)]({'botID':botID})['assign']({'onepagemode':_0x398f6e})[_0x14861a(0x200)](),config[_0x14861a(0x236)]=_0x398f6e,proxyEmit(_0x14861a(0x172),emittedConfiguration());}function updateMarketcapApi(_0x4d91dd){const _0x4382f9=_0x400f17,_0x41eab6=_0x4d91dd?!![]:![];let _0x1564b4=dbConfig[_0x4382f9(0x283)](_0x4382f9(0x29d))['find']({'botID':botID})[_0x4382f9(0x2ab)]();_0x1564b4&&dbConfig[_0x4382f9(0x283)](_0x4382f9(0x29d))[_0x4382f9(0x17b)]({'botID':botID})[_0x4382f9(0x1f2)]({'marketcapApi':_0x41eab6})[_0x4382f9(0x200)](),config[_0x4382f9(0x1b0)]=_0x41eab6,getMarketCap(),proxyEmit('configuration',emittedConfiguration());}function _0x5133(_0x581469,_0x565aaa){const _0x489fec=_0x5e06();return _0x5133=function(_0x3efe41,_0x5d6002){_0x3efe41=_0x3efe41-0xe6;let _0x5e069b=_0x489fec[_0x3efe41];return _0x5e069b;},_0x5133(_0x581469,_0x565aaa);}async function storeConfiguration(_0x38b777){const _0xbf9590=_0x400f17;logger[_0xbf9590(0x15f)](_0xbf9590(0x225));let _0x55fea1=![];_0x38b777[_0xbf9590(0x249)]&&(_0x38b777[_0xbf9590(0x249)]==_0xbf9590(0x231)&&(_0x55fea1=!![]),delete _0x38b777['configstate']);if(pidBalances)clearTimeout(pidBalances);setBlockTransactionDetection(!![]);let _0x3bd254=![],_0x3779e4=![],_0x5a83e2=[];_0x38b777['portfolio']['forEach'](_0x50b6a9=>{const _0x5b77e4=_0xbf9590;if(!_0x50b6a9[_0x5b77e4(0x14d)]&&_0x50b6a9[_0x5b77e4(0x14a)]!=_0x38b777[_0x5b77e4(0x1ec)])_0x5a83e2[_0x5b77e4(0x20c)](_0x50b6a9[_0x5b77e4(0x188)]);}),_0x5a83e2['forEach'](_0x4c9de1=>{const _0x54390b=_0xbf9590,_0x29eb89=currentCoins['find'](_0x38f831=>_0x38f831[_0x54390b(0x188)]==_0x4c9de1);!_0x29eb89&&(_0x3bd254=!![]);}),currentCoins[_0xbf9590(0x23b)](_0x44b9b7=>{const _0x5e3692=_0xbf9590;if(_0x44b9b7[_0x5e3692(0x14a)]!=config[_0x5e3692(0x1ec)]){const _0x5d372b=_0x5a83e2['find'](_0x57b24e=>_0x57b24e==_0x44b9b7[_0x5e3692(0x188)]);!_0x5d372b&&(_0x3bd254=!![]);}}),_0x38b777[_0xbf9590(0x262)][_0xbf9590(0x23b)](_0x46de60=>{const _0x31270a=_0xbf9590,_0x49b154=config[_0x31270a(0x262)][_0x31270a(0x17b)](_0x4b1382=>_0x4b1382[_0x31270a(0x14a)]==_0x46de60[_0x31270a(0x14a)]);if(_0x49b154&&_0x46de60[_0x31270a(0x227)]!=_0x49b154[_0x31270a(0x227)])_0x3779e4=!![];});let _0x8d5013=dbConfig[_0xbf9590(0x283)](_0xbf9590(0x29d))[_0xbf9590(0x17b)]({'botID':botID})['value']();_0x38b777={..._0x38b777,'apiKey':decryptRSA(secure[_0xbf9590(0x276)],_0x38b777[_0xbf9590(0x28a)]),'apiSecret':decryptRSA(secure[_0xbf9590(0x276)],_0x38b777[_0xbf9590(0x19d)])};_0x38b777[_0xbf9590(0x2a0)]&&(_0x38b777[_0xbf9590(0x2a0)]=decryptRSA(secure['privateKey'],_0x38b777[_0xbf9590(0x2a0)]));let _0x3bbec9=![];if(_0x8d5013){_0x38b777[_0xbf9590(0x28a)]=='************'?_0x38b777[_0xbf9590(0x28a)]=config['apiKey']:_0x3bbec9=!![];_0x38b777[_0xbf9590(0x19d)]==_0xbf9590(0x20e)?_0x38b777[_0xbf9590(0x19d)]=config[_0xbf9590(0x19d)]:_0x3bbec9=!![];if(_0x38b777['apiPassword']==_0xbf9590(0x20e))_0x38b777[_0xbf9590(0x2a0)]=config[_0xbf9590(0x2a0)];else{if(_0x38b777[_0xbf9590(0x2a0)])_0x3bbec9=!![];}dbConfig[_0xbf9590(0x283)](_0xbf9590(0x29d))[_0xbf9590(0x17b)]({'botID':botID})[_0xbf9590(0x1f2)](_0x38b777)['write']();}else dbConfig[_0xbf9590(0x283)](_0xbf9590(0x29d))[_0xbf9590(0x20c)](_0x38b777)[_0xbf9590(0x200)](),_0x3bbec9=!![],process[_0xbf9590(0x166)]({'status':_0xbf9590(0xf6),'live':'running'},_0xac60d9=>{});process['send']({'botname':_0x38b777[_0xbf9590(0x121)]},_0x8d2d42=>{}),config={..._0x38b777},updateBotManager(),proxyEmit('configuration-stored'),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x3bbec9)!_0x8d5013||_0x55fea1?await reset(!![]):getBalances();else _0x3bd254||_0x3779e4?await reset(![]):getBalances();setBlockTransactionDetection(![]);}async function storeHeadless(_0x5cf3df){const _0x1820b1=_0x400f17,_0x4ce77f={...config,'headless':_0x5cf3df[_0x1820b1(0x14e)]};let _0x1a05ed=dbConfig[_0x1820b1(0x283)](_0x1820b1(0x29d))['find']({'botID':botID})[_0x1820b1(0x2ab)]();_0x1a05ed&&dbConfig[_0x1820b1(0x283)]('bot')[_0x1820b1(0x17b)]({'botID':botID})['assign'](_0x4ce77f)[_0x1820b1(0x200)](),config={..._0x4ce77f},updateBotManager(),proxyEmit(_0x1820b1(0x172),emittedConfiguration());}async function storeFiat(_0xc70cb3){const _0x5cd8bc=_0x400f17,_0x22b7f4={...config,'fiat':_0xc70cb3};let _0x1a1c50=dbConfig[_0x5cd8bc(0x283)](_0x5cd8bc(0x29d))[_0x5cd8bc(0x17b)]({'botID':botID})[_0x5cd8bc(0x2ab)]();_0x1a1c50&&dbConfig[_0x5cd8bc(0x283)](_0x5cd8bc(0x29d))[_0x5cd8bc(0x17b)]({'botID':botID})[_0x5cd8bc(0x1f2)](_0x22b7f4)[_0x5cd8bc(0x200)](),config={..._0x22b7f4},proxyEmit(_0x5cd8bc(0x172),emittedConfiguration());}function resetHistory(){const _0x5a6024=_0x400f17;logger['full'](_0x5a6024(0x1a2));try{if(fs['existsSync'](path[_0x5a6024(0x1be)](configpath,_0x5a6024(0x13a)+botID+_0x5a6024(0x1a7))))fs[_0x5a6024(0x26f)](path[_0x5a6024(0x1be)](configpath,'bot-'+botID+_0x5a6024(0x1a7)));if(fs[_0x5a6024(0x290)](path['join'](configpath,'bot-'+botID+'-performance.json')))fs[_0x5a6024(0x26f)](path[_0x5a6024(0x1be)](configpath,_0x5a6024(0x13a)+botID+_0x5a6024(0x19c)));if(fs['existsSync'](path[_0x5a6024(0x1be)](configpath,_0x5a6024(0x13a)+botID+_0x5a6024(0x24f))))fs['unlinkSync'](path[_0x5a6024(0x1be)](configpath,_0x5a6024(0x13a)+botID+_0x5a6024(0x24f)));}catch(_0x5c9e44){if(_0x5c9e44)logger[_0x5a6024(0x295)](_0x5a6024(0x113),_0x5c9e44);}const _0x5ec3d1=getDate();let _0x584e82=[];currentCoins[_0x5a6024(0x23b)](_0xe8fad3=>{const _0x2a0444=_0x5a6024;_0x584e82['push']({'coin':_0xe8fad3[_0x2a0444(0x14a)],'number':_0xe8fad3[_0x2a0444(0x15e)],'price':_0xe8fad3[_0x2a0444(0x1b4)]});});let _0x5df8a5=dbConfig[_0x5a6024(0x283)](_0x5a6024(0x29d))[_0x5a6024(0x17b)]({'botID':botID})[_0x5a6024(0x2ab)]();_0x5df8a5&&(dbConfig['get'](_0x5a6024(0x29d))['find']({'botID':botID})[_0x5a6024(0x1f2)]({'liquidity':[{'date':_0x5ec3d1,'changes':_0x584e82}]})[_0x5a6024(0x200)](),config[_0x5a6024(0x14c)]=[]),restartBot(!![]);}function noslash(_0x7e50db){const _0x1415a2=_0x400f17;return _0x7e50db[_0x1415a2(0x1e3)]('/','');}function updateHighestFee(_0x37a50e){const _0x5c176e=_0x400f17;if(_0x37a50e[_0x5c176e(0x108)]){let _0x4dc6f9={'filled':_0x37a50e[_0x5c176e(0x285)]*_0x37a50e[_0x5c176e(0x11d)],'amount':_0x37a50e[_0x5c176e(0x285)]*_0x37a50e[_0x5c176e(0x11d)],'side':_0x37a50e['side']==_0x5c176e(0x2b3)?_0x5c176e(0x1e2):_0x5c176e(0x2b3),'price':0x1/_0x37a50e[_0x5c176e(0x11d)]};_0x37a50e={..._0x37a50e,..._0x4dc6f9};}const _0x371ca7=defaultFee*_0x37a50e['filled']*_0x37a50e[_0x5c176e(0x11d)];lastFees[_0x5c176e(0xe8)][_0x5c176e(0x29e)]===0x14&&lastFees['recent20'][_0x5c176e(0x18b)](),lastFees[_0x5c176e(0xe8)][_0x5c176e(0x20c)](_0x371ca7),lastFees[_0x5c176e(0x204)]=Math['max'](...lastFees[_0x5c176e(0xe8)]);}async function updateNumberCoinsCcxt(_0x540d98){const _0x4f2114=_0x400f17;logger[_0x4f2114(0x15f)]('0\x20-\x20EXECUTION:\x20'+_0x540d98[_0x4f2114(0x188)]+'\x20|\x20'+_0x540d98['status']+_0x4f2114(0x12e)+_0x540d98[_0x4f2114(0x285)]+_0x4f2114(0x2ac)+_0x540d98[_0x4f2114(0x130)]+_0x4f2114(0x12e)+_0x540d98['id']);let _0x327545=_0x540d98[_0x4f2114(0x142)],_0x24011d=![];currentCoins[_0x4f2114(0x23b)](_0x505d52=>{const _0x565c64=_0x4f2114;_0x505d52[_0x565c64(0x188)]==_0x540d98['symbol']&&(_0x24011d=!![]);});if(!_0x24011d)return;const _0x45451e=currentCoins[_0x4f2114(0x17b)](_0x1309d9=>_0x1309d9[_0x4f2114(0x188)]==_0x540d98['symbol']),_0x58d6b6=_0x45451e[_0x4f2114(0x14a)],_0x460599=_0x5775fb=>{const _0x5a54b5=_0x4f2114,_0x556562=currentCoins[_0x5a54b5(0x17b)](_0x4d7605=>_0x4d7605[_0x5a54b5(0x188)]==_0x540d98[_0x5a54b5(0x188)]);if(_0x556562)_0x556562['orderstatus']=_0x5775fb;};let _0x52730b=![];for(const _0x599382 of lastOrders){const _0x10be2a=0x64,_0x5702ae=0x1388;let _0x98636e=0x0;while(!_0x599382[_0x4f2114(0x137)]&&_0x98636e*_0x10be2a<_0x5702ae){_0x98636e++,await sleep(_0x10be2a);}if(_0x98636e>0x0)logger[_0x4f2114(0x15f)]('Waited\x20'+_0x98636e*_0x10be2a/0x3e8+'\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed');_0x599382[_0x4f2114(0x137)]==_0x540d98['id']&&(_0x52730b=!![]);}if(_0x327545==_0x4f2114(0x105)){_0x460599(_0x4f2114(0x105));if(_0x540d98['filled']>0x0&&_0x540d98[_0x4f2114(0x285)]<_0x540d98[_0x4f2114(0x130)]){if(_0x52730b){setBlockTransactionDetection(!![]),logger[_0x4f2114(0x15f)](_0x4f2114(0x1f8)+_0x540d98['filled']+_0x4f2114(0x24a)+_0x540d98['id']);const _0x15e497=await getCoins(balanceUpdateDelay,undefined,undefined,_0x58d6b6);[currentCoins,currentCoinsAll]=_0x15e497,setBlockTransactionDetection(![]);}else logger[_0x4f2114(0x15f)](_0x4f2114(0x1f8)+_0x540d98['filled']+_0x4f2114(0x128)+_0x540d98['id']),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay);}}else{if(_0x327545=='canceled'){_0x460599(_0x4f2114(0x202)),lastOrders=lastOrders[_0x4f2114(0x25e)](_0x1b7b5b=>_0x1b7b5b['symbol']!=_0x540d98[_0x4f2114(0x188)]);const _0x9f098=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x9f098,setBlockTransactionDetection(![]),await getOpenOrders(),handleOpenOrders();}else{if(_0x327545==_0x4f2114(0x1c8)){if(lastOrders)for(const _0x90d4e8 of lastOrders){if(_0x90d4e8['orderId']==_0x540d98['id']){logger[_0x4f2114(0x15f)](_0x4f2114(0x197)+_0x540d98['id']),_0x52730b=!![];if(_0x90d4e8['filled']==0x0){setBlockTransactionDetection(!![]),logger[_0x4f2114(0x15f)](_0x4f2114(0x180)+_0x540d98['id']);if(_0x540d98['average'])_0x90d4e8[_0x4f2114(0x11d)]=_0x540d98[_0x4f2114(0x1ba)];else{if(_0x540d98[_0x4f2114(0x11d)])_0x90d4e8[_0x4f2114(0x11d)]=_0x540d98[_0x4f2114(0x11d)];else{}}_0x90d4e8[_0x4f2114(0x285)]=_0x540d98[_0x4f2114(0x285)],updateHighestFee(_0x90d4e8);const _0x29e6fe=await getCoins(balanceUpdateDelay,undefined,undefined,_0x58d6b6);[currentCoins,currentCoinsAll]=_0x29e6fe,setBlockTransactionDetection(![]),await validateOrders(),_0x460599('filled'),_0x90d4e8[_0x4f2114(0x233)]={'currency':_0x540d98[_0x4f2114(0x233)]?_0x540d98[_0x4f2114(0x233)][_0x4f2114(0x237)]:null,'cost':_0x540d98[_0x4f2114(0x233)]?_0x540d98[_0x4f2114(0x233)]['cost']:0x0},await updateCoinResults(_0x90d4e8);}}}!_0x52730b&&(logger[_0x4f2114(0x15f)](_0x4f2114(0x15c)+_0x540d98['id']),_0x460599(_0x4f2114(0x285)),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay),await updateOpenOrders(),handleOpenOrders());}}}if(lastBalances){let _0x2efa4c=JSON['parse'](lastBalances['portfolio']);const _0x5a4128=_0x2efa4c[_0x4f2114(0x17b)](_0x19c40a=>_0x19c40a[_0x4f2114(0x188)]==_0x540d98[_0x4f2114(0x188)]);if(_0x5a4128){if(_0x327545==_0x4f2114(0x105))_0x5a4128['orderstatus']=_0x5a4128[_0x4f2114(0x14f)]=='filled'?_0x4f2114(0x285):_0x4f2114(0x105);else{if(_0x327545==_0x4f2114(0x202))_0x5a4128[_0x4f2114(0x14f)]=_0x5a4128[_0x4f2114(0x14f)]=='filled'?_0x4f2114(0x285):'canceled';else _0x327545=='closed'&&(_0x5a4128['orderstatus']=_0x4f2114(0x285));}}lastBalances={...lastBalances,'portfolio':JSON['stringify'](_0x2efa4c)},proxyEmit(_0x4f2114(0x1d9),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){await getOpenOrders();let _0x2cea1c=![];currentCoins['forEach'](_0x5c1d0a=>{const _0x20a6ea=_0x5133;_0x2cea1c=allOpenOrders['find'](_0x26a6a9=>_0x26a6a9[_0x20a6ea(0x188)]==_0x5c1d0a['symbol']),_0x5c1d0a['orderstatus']=_0x2cea1c?_0x20a6ea(0x105):_0x20a6ea(0x287);});}async function fetchBalance(_0x23a578=!![]){const _0x4f7ce3=_0x400f17;let _0x4db651,_0x1b7a1a;try{return _0x4db651=await exchange[_0x4f7ce3(0x1fe)](),_0x1b7a1a=_0x4db651[_0x4f7ce3(0x1af)],_0x1b7a1a;}catch(_0x5e4f99){return!_0x23a578?handleErrorNoStop(_0x5e4f99,_0x4f7ce3(0x143)):await handleError(_0x5e4f99,_0x4f7ce3(0x143)),![];}}async function getCoins(_0x49658f=0x0,_0x32595d=!![],_0x22e615=config[_0x400f17(0x1ec)],_0x13c1df){const _0x4eb696=_0x400f17;let _0x98c9db=[],_0x2b66b1=[],_0x3fa0e9=[],_0x302b10;if(_0x49658f)await sleep(_0x49658f);if(botPaused)return[currentCoins,currentCoinsAll];let _0x9776b5=![],_0x3fa336=0x0,_0x2e8175,_0x450300;_0x13c1df&&(_0x2e8175=currentCoins[_0x4eb696(0x17b)](_0x597f15=>_0x597f15[_0x4eb696(0x14a)]==_0x13c1df),_0x2e8175&&(_0x450300=_0x2e8175[_0x4eb696(0x1df)],delete _0x2e8175['prevnumber']));while(!_0x9776b5){_0x302b10=await fetchBalance(_0x32595d);if(_0x302b10){if(_0x13c1df){if(_0x302b10[_0x13c1df]!=_0x450300)logger[_0x4eb696(0x15f)](_0x4eb696(0x146)+_0x13c1df+':\x20'+_0x302b10[_0x13c1df]+'\x20('+_0x450300+')'),_0x9776b5=!![];else{logger[_0x4eb696(0x15f)]('Invalid\x20balance\x20for\x20'+_0x13c1df+':\x20'+_0x302b10[_0x13c1df]+'\x20('+_0x450300+')'),_0x3fa336++;if(_0x3fa336<balanceUpdateRetries)await sleep(balanceUpdateDelay);else{logger[_0x4eb696(0x15f)]('Stopped\x20fetching\x20balance\x20after\x20'+_0x3fa336+_0x4eb696(0x1a9));break;}}}else break;}else return[currentCoins,currentCoinsAll];}for(const [_0x378d0b,_0x42a39c]of Object[_0x4eb696(0x252)](_0x302b10)){_0x3fa0e9[_0x4eb696(0x20c)](_0x378d0b);}config[_0x4eb696(0x262)][_0x4eb696(0x23b)](_0x30a3ae=>{const _0x46fad4=_0x4eb696;!_0x3fa0e9[_0x46fad4(0x267)](_0x30a3ae[_0x46fad4(0x14a)])&&(_0x302b10[_0x30a3ae[_0x46fad4(0x14a)]]=0x0);});if(_0x22e615=='')for(const [_0x85ebfe,_0x10ed70]of Object[_0x4eb696(0x252)](_0x302b10)){_0x10ed70!=0x0&&_0x98c9db['push']({'coin':_0x85ebfe});}else for(const [_0x27b8cc,_0x19e9fd]of Object[_0x4eb696(0x252)](_0x302b10)){const _0x3cba56=config[_0x4eb696(0x262)][_0x4eb696(0x17b)](_0x19d861=>_0x19d861['coin']==_0x27b8cc),_0x4bc12e=_0x27b8cc+'/'+_0x22e615,_0x196316=_0x22e615+'/'+_0x27b8cc,_0x1daad2=currentCoins['find'](_0x10a12b=>_0x10a12b[_0x4eb696(0x14a)]==_0x27b8cc);if((_0x19e9fd!=0x0||_0x3cba56)&&(allSymbols['includes'](_0x4bc12e)||_0x27b8cc==_0x22e615))_0x1daad2?_0x98c9db[_0x4eb696(0x20c)]({..._0x1daad2,'number':Math['max'](_0x19e9fd+(_0x3cba56&&_0x3cba56[_0x4eb696(0x227)]||0x0),0x0)}):_0x98c9db[_0x4eb696(0x20c)]({'coin':_0x27b8cc,'symbol':_0x4bc12e,'reverse':![],'number':Math['max'](_0x19e9fd+(_0x3cba56&&_0x3cba56['offset']||0x0),0x0),'orderstatus':_0x4eb696(0x287)});else{if((_0x19e9fd!=0x0||_0x3cba56)&&allSymbols[_0x4eb696(0x267)](_0x196316))_0x1daad2?_0x98c9db[_0x4eb696(0x20c)]({..._0x1daad2,'number':Math[_0x4eb696(0x159)](_0x19e9fd+(_0x3cba56&&_0x3cba56[_0x4eb696(0x227)]||0x0),0x0)}):_0x98c9db[_0x4eb696(0x20c)]({'coin':_0x27b8cc,'symbol':_0x196316,'reverse':!![],'number':Math['max'](_0x19e9fd+(_0x3cba56&&_0x3cba56[_0x4eb696(0x227)]||0x0),0x0),'orderstatus':_0x4eb696(0x287)});else _0x3cba56&&_0x98c9db[_0x4eb696(0x20c)]({'coin':_0x3cba56[_0x4eb696(0x14a)],'symbol':_0x3cba56[_0x4eb696(0x188)],'reverse':_0x3cba56[_0x4eb696(0x108)],'number':0x0,'orderstatus':_0x4eb696(0x287)});}}return _0x98c9db['sort']((_0x332f58,_0x32f742)=>_0x332f58['delta']<_0x32f742['delta']?0x1:_0x32f742[_0x4eb696(0x1f5)]<_0x332f58[_0x4eb696(0x1f5)]?-0x1:0x0),_0x2b66b1=cloneDeep(_0x98c9db),_0x98c9db=_0x98c9db[_0x4eb696(0x25e)](_0x2afa3d=>{const _0x151c92=_0x4eb696,_0x36ecbd=config[_0x151c92(0x262)][_0x151c92(0x17b)](_0x36c2bc=>_0x36c2bc[_0x151c92(0x14a)]==_0x2afa3d[_0x151c92(0x14a)]);return _0x36ecbd&&!_0x36ecbd[_0x151c92(0x14d)];}),[_0x98c9db,_0x2b66b1];}async function getCoinNumber(_0x5239e6){const _0x1e8a97=_0x400f17;let _0x3e6a90;try{const _0x7725b5=await exchange[_0x1e8a97(0x1fe)]();_0x3e6a90=_0x7725b5['total'][_0x5239e6];}catch(_0x44fa42){await handleError(_0x44fa42,_0x1e8a97(0x178));}return _0x3e6a90;}async function getOpenOrders(){const _0x433607=_0x400f17;let _0x424026;allOpenOrders=[];try{for(const _0x4a6973 of config[_0x433607(0x262)]){!_0x4a6973[_0x433607(0x14d)]&&_0x4a6973[_0x433607(0x14a)]!=config[_0x433607(0x1ec)]&&(_0x424026=await exchange[_0x433607(0x1e4)](_0x4a6973[_0x433607(0x188)]),_0x424026[_0x433607(0x29e)]>0x0&&allOpenOrders['push'](_0x424026[0x0]));}}catch(_0x527d9a){await handleError(_0x527d9a,_0x433607(0xf8));}}async function handleOpenOrders(_0xf3fb32=0x0){const _0x3699c6=_0x400f17;allOpenOrders[_0x3699c6(0x29e)]==0x0&&lockOrders==ORDERS[_0x3699c6(0x18c)]&&allOrdersPlaced&&(_0xf3fb32==0x0?(logger['debug'](_0x3699c6(0x24d)),_0xf3fb32++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x3699c6(0x15f)](_0x3699c6(0x1c9)),validateOrders(_0x3699c6(0x292))));}async function testAPI(_0xe9021e){const _0x48d0f7=_0x400f17;logger[_0x48d0f7(0x15f)](_0x48d0f7(0x1e7));const _0x38b8d2=ccxt[_0x48d0f7(0x211)][_0xe9021e[_0x48d0f7(0x18e)][_0x48d0f7(0x278)]()],_0x49d195=new _0x38b8d2({'apiKey':_0xe9021e['apiKey'],'secret':_0xe9021e[_0x48d0f7(0x19d)],'options':{'defaultType':_0x48d0f7(0x2b2)}});if(_0xe9021e['apiPassword'])_0x49d195[_0x48d0f7(0x24e)]=_0xe9021e[_0x48d0f7(0x2a0)];try{await _0x49d195[_0x48d0f7(0x1fe)]();}catch(_0x407a15){logger[_0x48d0f7(0x15f)](_0x48d0f7(0x123)+_0x407a15['toString']());throw _0x407a15;}}function cloneDeep(_0x19269b){const _0x29edfa=_0x400f17;return JSON[_0x29edfa(0x21e)](JSON['stringify'](_0x19269b));}async function getPortfolio(_0x18041e){const _0x3fc372=_0x400f17;let _0x5b02ec=[],_0x40985b=[],_0x26bb99=[],_0x2555d4;_0x18041e[_0x3fc372(0x28a)]=decryptRSA(secure[_0x3fc372(0x276)],_0x18041e[_0x3fc372(0x28a)]),_0x18041e['apiSecret']=decryptRSA(secure[_0x3fc372(0x276)],_0x18041e[_0x3fc372(0x19d)]);if(_0x18041e[_0x3fc372(0x2a0)])_0x18041e[_0x3fc372(0x2a0)]=decryptRSA(secure['privateKey'],_0x18041e[_0x3fc372(0x2a0)]);if(_0x18041e['apiKey']!=='************'||_0x18041e['apiSecret']!=='************'||_0x18041e[_0x3fc372(0x2a0)]&&_0x18041e[_0x3fc372(0x2a0)]!==_0x3fc372(0x20e)){if(config[_0x3fc372(0x18e)]){if(_0x18041e[_0x3fc372(0x28a)]=='************')_0x18041e[_0x3fc372(0x28a)]=config[_0x3fc372(0x28a)];if(_0x18041e[_0x3fc372(0x19d)]==_0x3fc372(0x20e))_0x18041e[_0x3fc372(0x19d)]=config[_0x3fc372(0x19d)];if(_0x18041e[_0x3fc372(0x2a0)]==_0x3fc372(0x20e))_0x18041e[_0x3fc372(0x2a0)]=config['apiPassword'];}try{if(_0x18041e[_0x3fc372(0x205)])await testAPI(_0x18041e);}catch(_0x2f8285){if(_0x2f8285['toString']()['includes'](_0x3fc372(0x27a))){logHistory(_0x3fc372(0x1ae),_0x3fc372(0x112)),logHistory(_0x3fc372(0x1ae),_0x3fc372(0x28c)+_0x2f8285['toString']()),proxyEmit(_0x3fc372(0x109),![]);return;}else{if(_0x2f8285[_0x3fc372(0x258)]()[_0x3fc372(0x267)](_0x3fc372(0xf3))){logHistory('error',_0x3fc372(0x17f)),logHistory(_0x3fc372(0x1ae),'Error\x20details:\x20'+_0x2f8285[_0x3fc372(0x258)]()),proxyEmit(_0x3fc372(0x109),![]);return;}else{logHistory(_0x3fc372(0x1ae),_0x3fc372(0x2ad)+_0x2f8285['toString']()),logger['debug']('Error\x20details:',_0x2f8285),proxyEmit('portfolio1',![]);return;}}}exchange?updateExchange(_0x18041e[_0x3fc372(0x28a)],_0x18041e[_0x3fc372(0x19d)],_0x18041e['apiPassword']):await initExchange(_0x18041e[_0x3fc372(0x18e)],_0x18041e[_0x3fc372(0x28a)],_0x18041e[_0x3fc372(0x19d)],_0x18041e['apiPassword']);await loadSymbols();const _0x4aece7=await getCoins(0x0,![],_0x18041e[_0x3fc372(0x1ec)]);_0x26bb99=cloneDeep(_0x4aece7[0x1]);}else{const _0x3370d6=await getCoins();_0x26bb99=cloneDeep(_0x3370d6[0x1]);}if(_0x18041e['basecoin']=='')proxyEmit('portfolio1',!![]),proxyEmit(_0x3fc372(0x214),_0x26bb99);else{_0x26bb99[_0x3fc372(0x23b)](_0x263366=>{const _0x2393d1=_0x3fc372;if(_0x263366[_0x2393d1(0x14a)]!=_0x18041e[_0x2393d1(0x1ec)]&&allSymbols[_0x2393d1(0x267)](_0x263366[_0x2393d1(0x188)]))_0x5b02ec[_0x2393d1(0x20c)](_0x263366['symbol']);});if(_0x5b02ec[_0x3fc372(0x29e)]==0x0)logHistory(_0x3fc372(0x1ae),'Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot');else{try{_0x40985b=await getTickers(_0x5b02ec);}catch(_0x5d1fb8){logHistory(_0x3fc372(0x1ae),_0x3fc372(0x266)),logger['debug'](_0x3fc372(0x2af),_0x5d1fb8),proxyEmit(_0x3fc372(0x109),![]);return;}_0x26bb99['forEach'](_0x3d1970=>{const _0x157bd8=_0x3fc372;_0x3d1970[_0x157bd8(0x14a)]!=_0x18041e[_0x157bd8(0x1ec)]?_0x40985b[_0x3d1970[_0x157bd8(0x188)]]?_0x2555d4=_0x3d1970['reverse']?0x1/_0x40985b[_0x3d1970[_0x157bd8(0x188)]]['last']:_0x40985b[_0x3d1970[_0x157bd8(0x188)]][_0x157bd8(0x1b4)]:_0x2555d4=0x0:_0x2555d4=0x1,_0x3d1970[_0x157bd8(0x11d)]=formatResult(_0x2555d4,0x8);}),await getMarketCap(_0x26bb99),proxyEmit(_0x3fc372(0x109),!![]),proxyEmit(_0x3fc372(0x214),_0x26bb99);}}}function truncateTradeAmount(_0x213994,_0x53f4ca){const _0x4049a6=_0x400f17;let _0x529449=0x0;try{_0x529449=exchange[_0x4049a6(0x163)](_0x213994,_0x53f4ca);}catch(_0x2b5c1b){}return _0x529449;}function checkMinimums(_0x371714){const _0x476cfe=_0x400f17;let _0x2216fc=!![];const _0x1323c0=!_0x371714[_0x476cfe(0x108)]?markets[_0x371714[_0x476cfe(0x188)]][_0x476cfe(0x11a)][_0x476cfe(0x130)]['min']:markets[_0x371714['symbol']][_0x476cfe(0x11a)]['cost'][_0x476cfe(0x157)],_0x19f1a=!_0x371714['reverse']?markets[_0x371714[_0x476cfe(0x188)]][_0x476cfe(0x11a)][_0x476cfe(0xeb)][_0x476cfe(0x157)]:markets[_0x371714[_0x476cfe(0x188)]]['limits'][_0x476cfe(0x130)]['min'],_0x3dd4e6=truncateTradeAmount(_0x371714[_0x476cfe(0x188)],_0x371714['trade']);_0x371714[_0x476cfe(0x27c)]=_0x3dd4e6;if(Math[_0x476cfe(0x22d)](_0x3dd4e6)<_0x1323c0)_0x2216fc=![];if(Math[_0x476cfe(0x22d)](_0x3dd4e6)*_0x371714['last']<_0x19f1a)_0x2216fc=![];if(_0x371714[_0x476cfe(0xf2)]=='sell'){let _0xc3f049=config['portfolio'][_0x476cfe(0x17b)](_0x1fefe3=>_0x1fefe3[_0x476cfe(0x14a)]==_0x371714['coin']);if(_0xc3f049[_0x476cfe(0x227)]>0x0){if(Math[_0x476cfe(0x22d)](_0x3dd4e6)>_0x371714['number']-_0xc3f049['offset'])_0x2216fc=![];}else{if(Math[_0x476cfe(0x22d)](_0x3dd4e6)>_0x371714['number'])_0x2216fc=![];}}if(_0x371714[_0x476cfe(0xf2)]==_0x476cfe(0x1e2)){let _0x157be4=config[_0x476cfe(0x262)][_0x476cfe(0x17b)](_0x5031c6=>_0x5031c6['coin']==config[_0x476cfe(0x1ec)]),_0x1b3ae6=currentCoins[_0x476cfe(0x17b)](_0x3c3a64=>_0x3c3a64['coin']==config[_0x476cfe(0x1ec)]);if(_0x157be4[_0x476cfe(0x227)]>0x0){if(Math[_0x476cfe(0x22d)](_0x3dd4e6)*_0x371714[_0x476cfe(0x1b4)]>_0x1b3ae6[_0x476cfe(0x15e)]-_0x157be4['offset'])_0x2216fc=![];}else{if(Math[_0x476cfe(0x22d)](_0x3dd4e6)*_0x371714['last']>_0x1b3ae6['number'])_0x2216fc=![];}}return _0x2216fc;}async function getBalances(_0x1553ea=!![]){const _0x428877=_0x400f17;if(botPaused)return;let _0x29ed55=0x0,_0x54cdfc;const _0x570c32=config[_0x428877(0x282)];if(config[_0x428877(0x14e)]&&config[_0x428877(0x277)]<0x0)await validate24hChanges();currentCoins[_0x428877(0x23b)](_0x5d1d80=>{const _0x1b8257=_0x428877;if(_0x5d1d80['coin']!=config[_0x1b8257(0x1ec)]){let _0x1ddf6f=gTicker[noslash(_0x5d1d80[_0x1b8257(0x188)])];_0x54cdfc=_0x5d1d80[_0x1b8257(0x108)]?0x1/_0x1ddf6f:_0x1ddf6f;}else _0x54cdfc=0x1;let _0x3801f6=_0x5d1d80['number']*_0x54cdfc;_0x29ed55+=_0x3801f6,_0x5d1d80['last']=formatResult(Number(_0x54cdfc),0x8),_0x5d1d80[_0x1b8257(0x2ab)]=_0x3801f6;}),currentCoins[_0x428877(0x23b)](_0x4ba790=>{const _0x1d077a=_0x428877;let _0x1aedfc=config['portfolio'][_0x1d077a(0x17b)](_0x234f54=>_0x234f54[_0x1d077a(0x14a)]==_0x4ba790['coin']),_0x466102=Number(_0x1aedfc[_0x1d077a(0x150)]),_0xb97c4a=_0x4ba790[_0x1d077a(0x2ab)]/_0x29ed55*0x64,_0x43ac2c=_0x466102*_0x29ed55/0x64/_0x4ba790[_0x1d077a(0x1b4)]-_0x4ba790['number'];_0x4ba790['distribution']=formatResult(_0xb97c4a,0x3),_0x4ba790['target']=formatResult(_0x466102,0x3),_0x4ba790[_0x1d077a(0x27c)]=formatResult(_0x43ac2c,0x8),_0x4ba790[_0x1d077a(0xf2)]='',_0x4ba790[_0x1d077a(0x2a9)]=![];if(_0x4ba790[_0x1d077a(0x14a)]!=config[_0x1d077a(0x1ec)]){if(_0x4ba790['distribution']>_0x466102)_0x4ba790['side']=_0x1d077a(0x2b3),_0x4ba790[_0x1d077a(0x2a9)]=checkMinimums(_0x4ba790);else _0x4ba790[_0x1d077a(0x150)]<_0x466102&&(_0x4ba790[_0x1d077a(0xf2)]=_0x1d077a(0x1e2),_0x4ba790[_0x1d077a(0x2a9)]=checkMinimums(_0x4ba790));}_0x4ba790[_0x1d077a(0x1f5)]=_0x4ba790[_0x1d077a(0x150)]/_0x4ba790[_0x1d077a(0x1b9)]-0x1;if(_0x4ba790[_0x1d077a(0x14f)]=='filled'||_0x4ba790['orderstatus']==_0x1d077a(0x202))_0x4ba790[_0x1d077a(0x14f)]=_0x1d077a(0x287);}),currentCoins[_0x428877(0x271)]((_0x4a6ca1,_0x53e05f)=>_0x4a6ca1[_0x428877(0x1f5)]<_0x53e05f[_0x428877(0x1f5)]?0x1:_0x53e05f[_0x428877(0x1f5)]<_0x4a6ca1[_0x428877(0x1f5)]?-0x1:0x0);const _0x12b444=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x12b444[_0x428877(0x28b)],'usd':_0x12b444[_0x428877(0x24c)],'portfolio':JSON[_0x428877(0x1f7)](currentCoins),'threshold':_0x570c32},proxyEmit(_0x428877(0x1d9),{'serverversion':serverversion,'balances':lastBalances});if(_0x1553ea){if(config[_0x428877(0x14e)])headlessMode({'portfolio':currentCoins,'threshold':_0x570c32});else lockOrders==ORDERS[_0x428877(0x261)]&&!coolingDown&&notifyBalance({'portfolio':currentCoins,'threshold':_0x570c32});}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x558c22=getNormalizedPerformance();getStartingBalances(_0x558c22),emitPerformance(_0x558c22);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x59e149=_0x400f17;if(!lastBalances)return;let _0x55158e=[],_0x127bf2,_0x58707f=JSON[_0x59e149(0x21e)](lastBalances['portfolio']);_0x58707f['sort']((_0x340b33,_0x397b79)=>_0x340b33[_0x59e149(0x14a)]>_0x397b79[_0x59e149(0x14a)]?0x1:_0x397b79[_0x59e149(0x14a)]>_0x340b33[_0x59e149(0x14a)]?-0x1:0x0),_0x58707f[_0x59e149(0x23b)](_0x4e9c2e=>{const _0x2e8fe7=_0x59e149;let _0x5a4346={'coin':_0x4e9c2e[_0x2e8fe7(0x14a)],'number':_0x4e9c2e[_0x2e8fe7(0x15e)],'price':_0x4e9c2e[_0x2e8fe7(0x1b4)]};_0x55158e[_0x2e8fe7(0x20c)](_0x5a4346);});const _0x30f607=await getFiat();_0x127bf2={'date':lastBalances[_0x59e149(0x134)]['split']('\x20')[0x0],'eur':_0x30f607[_0x59e149(0x28b)],'usd':_0x30f607['usd'],'coins':_0x55158e};let _0x1047d2=dbPerformance['get']('data')[_0x59e149(0x17b)]({'date':_0x127bf2[_0x59e149(0x24b)]})['value']();_0x1047d2?_0x127bf2['date']!=config[_0x59e149(0x1f9)]&&dbPerformance[_0x59e149(0x283)](_0x59e149(0x1c7))[_0x59e149(0x17b)]({'date':_0x127bf2[_0x59e149(0x24b)]})[_0x59e149(0x1f2)](_0x127bf2)[_0x59e149(0x200)]():dbPerformance['get'](_0x59e149(0x1c7))[_0x59e149(0x20c)](_0x127bf2)[_0x59e149(0x200)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x158519=_0x400f17;let _0xf8545b=[];if(dbPerformance[_0x158519(0x15a)](_0x158519(0x1c7))[_0x158519(0x2ab)]()){let _0x2c7e51=dbPerformance[_0x158519(0x283)]('data')[_0x158519(0x26c)]()[_0x158519(0x25e)](_0x12b925=>{const _0x43234f=_0x158519;if(_0x12b925[_0x43234f(0x19e)][_0x43234f(0x29e)]==0x0)return![];else return!![];})[_0x158519(0x103)](_0x158519(0x24b))['value'](),_0x1960dd=[...config[_0x158519(0x14c)]];_0x1960dd[_0x158519(0x271)]((_0x787ed1,_0x291b9c)=>_0x787ed1[_0x158519(0x24b)]>_0x291b9c[_0x158519(0x24b)]?-0x1:_0x291b9c['date']>_0x787ed1[_0x158519(0x24b)]?0x1:0x0);let _0x36eb3a=0x1,_0x3154d5=[],_0xb2916a=0x0;_0x2c7e51[_0x158519(0x13f)]()[_0x158519(0x108)]()[_0x158519(0x23b)]((_0x3e4ea4,_0x48e479)=>{const _0x172c0c=_0x158519;if(_0x1960dd[_0xb2916a]){if(_0x2c7e51[_0x2c7e51[_0x172c0c(0x29e)]-_0x48e479]&&_0x1960dd[_0xb2916a][_0x172c0c(0x24b)]==_0x2c7e51[_0x2c7e51['length']-_0x48e479][_0x172c0c(0x24b)]){if(_0x48e479<_0x2c7e51[_0x172c0c(0x29e)]){let _0x496b9b=0x0,_0x292e03=0x0;_0x2c7e51[_0x2c7e51['length']-_0x48e479][_0x172c0c(0x19e)][_0x172c0c(0x23b)](_0x24b14f=>{const _0x42de5c=_0x172c0c;_0x292e03+=_0x24b14f[_0x42de5c(0x15e)]*_0x24b14f[_0x42de5c(0x11d)];}),_0x1960dd[_0xb2916a][_0x172c0c(0x175)][_0x172c0c(0x23b)](_0x40893e=>{const _0x125288=_0x172c0c;_0x496b9b+=_0x40893e[_0x125288(0x15e)]*_0x40893e[_0x125288(0x11d)];}),_0x36eb3a*=_0x496b9b/(_0x292e03-_0x496b9b)+0x1;}_0xb2916a++;}}let _0x466e5b=0x0;_0x3e4ea4['coins'][_0x172c0c(0x23b)](_0x44dade=>{const _0x58a18d=_0x172c0c;_0x466e5b+=_0x44dade['number']*_0x44dade[_0x58a18d(0x11d)];}),_0x3154d5[_0x2c7e51[_0x172c0c(0x29e)]-_0x48e479-0x1]=_0x466e5b*(_0x36eb3a-0x1);});let _0x5e62a5=[];_0x1960dd=[...config['liquidity']]||[];let _0x5cb64f=0x0;_0xb2916a=0x0,_0x2c7e51['forEach']((_0x3b71eb,_0x135163)=>{const _0x176d50=_0x158519;if(_0x1960dd[_0xb2916a]){const _0x53add5=fns[_0x176d50(0x21e)](_0x1960dd[_0xb2916a]['date'],'yyyy/MM/dd',new Date()),_0x2451b9=fns[_0x176d50(0x21e)](_0x3b71eb[_0x176d50(0x24b)],'yyyy/MM/dd',new Date());if(fns[_0x176d50(0xfc)](_0x53add5,_0x2451b9)){let _0x2dcfbe=0x0;_0x1960dd[_0xb2916a][_0x176d50(0x175)][_0x176d50(0x23b)](_0x4da382=>{const _0xc73d9b=_0x176d50;!_0x5e62a5[_0x4da382[_0xc73d9b(0x14a)]]?_0x5e62a5[_0x4da382['coin']]=_0x4da382[_0xc73d9b(0x15e)]:(_0x2dcfbe=_0x5e62a5[_0x4da382[_0xc73d9b(0x14a)]],_0x5e62a5[_0x4da382[_0xc73d9b(0x14a)]]+=_0x4da382['number']);const _0x204fb9=_0x3b71eb[_0xc73d9b(0x19e)][_0xc73d9b(0x17b)](_0x18d04f=>_0x18d04f[_0xc73d9b(0x14a)]==_0x4da382[_0xc73d9b(0x14a)]);(!_0x204fb9||_0x204fb9[_0xc73d9b(0x15e)]==0x0)&&(_0x5cb64f+=(-_0x4da382['number']-_0x2dcfbe)*_0x4da382[_0xc73d9b(0x11d)]);}),_0xb2916a++;}}_0x3b71eb[_0x176d50(0x19e)][_0x176d50(0x23b)]((_0x5a75e3,_0x1326a5)=>{const _0x471a58=_0x176d50;_0x5e62a5[_0x5a75e3['coin']]&&(_0x5a75e3[_0x471a58(0x12d)]=_0x5e62a5[_0x5a75e3[_0x471a58(0x14a)]]);}),_0xf8545b[_0x176d50(0x20c)]({'date':_0x3b71eb['date'],'eur':_0x3b71eb[_0x176d50(0x28b)],'usd':_0x3b71eb[_0x176d50(0x24c)],'offset':_0x3154d5[_0x135163],'netoffset':_0x5cb64f,'coins':_0x3b71eb[_0x176d50(0x19e)]});});}return _0xf8545b;}function emitPerformance(_0x1342f9){const _0x29de64=_0x400f17;_0x1342f9[_0x29de64(0x29e)]!==0x0?(proxyEmit(_0x29de64(0x125),_0x1342f9),lastPerformanceEmitted=getDate()):proxyEmit(_0x29de64(0x125),[]);}function _0x5e06(){const _0x2cb4f1=['./version.json','colorscheme','no\x20exchange\x20reloaded','cancelOrders()','BUSD','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','args','valid','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','value','\x20/\x20','Error\x20occurred:\x20','ExchangeError','Error\x20details:','createWriteStream','openOrders','spot','sell','exec','sendPortfolioTelegram','freeze','marketcapEnabled','ID:\x20','ask','\x20not\x20available\x20(see:\x20hodlerhacks.com/fix/5)','recent20','2.6.22','RSA-OAEP','cost','\x20exchange','\x20closed\x20the\x20connection\x20(see:\x20hodlerhacks.com/fix/5)','util','PAXG','UNLOCKING','bots','side','PermissionDenied','page','remainingSymbols','enabled','percentage','getOpenOrders()','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','Set\x20lock\x20orders\x20to:\x20','added','isEqual','startprice','splice','\x20MB','\x20:\x20','\x20order:\x20','watchTrades','sortBy','Cooldown\x20ended\x20-\x20balancing\x20resumed','open','sells','toggleBotMode','reverse','portfolio1','\x20has\x20a\x2024h\x20drop\x20of\x20','Resetting\x20coin\x20results:\x20','coin-loading-progress','privateKeyFromPem','loadMarkets','BTC','2.5.0','2.3.5','Invalid\x20API\x20details,\x20please\x20try\x20again\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','Error\x20while\x20deleting\x20files:\x20','date-fns','Headless:\x20','remove','findIndex','update-liquidity','Invalid\x20quantity','limits','deleteHistoryAlerts','order','price','net-fiat','recreate','autoliquidity','botname','\x20hour','Error\x20in\x20testAPI():\x20','substring','performance','OrderNotFound','Limit\x20(low-margin)',')\x20unknown\x20order:\x20','ongoing','2.6.23','Bitget','showname','initial','\x20|\x20','change','amount','Cryptocom','node-forge','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','time',')\x20|\x20exchange:\x20','success','orderId','10Tweytb','1272090KSibvk','bot-','BNB','cancelLoading','\x20rejected\x20your\x20API\x20request\x20(see:\x20hodlerhacks.com/fix/4)','toFixed','slice','\x20(see:\x20hodlerhacks.com/fix/1)','event-history','status','fetchBalance()','realized','marketcap','Valid\x20balance\x20for\x20','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','\x20uses\x20','initTickers()','coin','\x20|\x20highest\x20fee:\x20','liquidity','excluded','headless','orderstatus','distribution','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','cancelOrder','Order\x20filled:\x20','\x20change','Unknown\x20error:\x20','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','min','sendMetricsTelegram','max','has','\x20metrics:</b>\x20\x0a\x0a','1\x20-\x20FILLED\x20unknown\x20order:\x20','\x20API\x20key,\x20secret\x20or\x20password\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','number','debug','bitmex','%\x20(','getMonth','amountToPrecision','red_yellow_blue','Net\x20effect','send','Cex','Bot\x20','InsufficientFunds','Initializing\x20exchange:\x20already\x20done','/USD','cancel','<b>Bot\x20','lowdb/adapters/FileSync','Order\x20is\x20invalid:\x20','emojisell','argv','configuration','\x20-\x20bot\x20not\x20started','type','changes','placeOrder','Avoiding\x20continuous\x20order\x20attempts','getCoinNumber()','path','\x20blocked\x20API\x20(RateLimitExceeded)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','find','Placing\x20order\x20for:\x20','./config/','lowdb','Exchange\x20permission\x20denied\x20-\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','2\x20-\x20handling\x20FILLED\x20order:\x20','map','test','Manual\x20balancing\x20required','\x20portfolio:</b>\x20\x0a\x0a','\x20>\x20[DEBUG]\x20','add','padEnd','symbol','environment','apply','shift','LOCKED','toUpperCase','exchange','showConfig','basecoinvalue','Unfilled\x20order(s)\x20canceled\x20after\x20','uncaughtException','request-time','net-basecoin','floor','event','1\x20-\x20FILLED\x20known\x20order:\x20','split','kill','token\x20is\x20expired','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','-performance.json','apiSecret','coins','RETRY\x20-\x20Problem\x20resolved\x20after\x20','starting-balances','5877CHfJAh','Resetting\x20bot\x20history','settings','loadSymbols()','yyyy/MM/dd','final','-events.json','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)','\x20attempts','emitHistory','Portfolio\x20change\x20detected:\x20','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20trying\x20again\x20in\x20','getDate','error','total','marketcapApi','must\x20be\x20greater\x20than\x20minimum\x20amount','exchange\x20reload','Bybit','last','EUR','fetchTicker','mkdirSync','quote','target','average',':\x20timer\x20>','buys','Fee\x20discount\x20refund\x20detected:\x20','join','production','storeFiat','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','Net\x20','/backup/','getTime','limit-low','\x20minutes\x20-\x20','data','closed','2\x20-\x20Handled\x20open\x20orders','3865148mfIgGl','ordertype','Error\x20in\x20loadSymbols():\x20','Failed\x20to\x20load\x20market\x20data\x20-\x20bot\x20not\x20started','storeConfiguration','watchTradesForSymbols()','Resuming\x20(','timestamp','botID','-------------------------------\x0a','getSeconds','function','datetime','create','code','balances','2\x20-\x20Validate\x20orders:\x20','***','ETH','./logs/','Limit\x20(high-margin)','prevnumber','balancing\x20resumes\x20when\x20cooldown\x20ends','version','buy','replace','fetchOpenOrders','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','Test\x20API','/USDT','string','restart','\x20minutes','basecoin','\x20not\x20responding\x20(see:\x20hodlerhacks.com/fix/5)','Exchange','padStart','fetchTickers()','Exception\x20thrown\x20in\x20','assign','1\x20-\x20Validate\x20orders:\x20','\x20>\x20stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','delta','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','stringify','1\x20-\x20partially\x20FILLED\x20(','startdate','createOrder','removed','fiat','Failed\x20to\x20load\x20coin\x20data\x20for\x20','fetchBalance','fees','write','BNB/','canceled','watchOrders()','highest','testApi','yargs/yargs','initclient','Network\x20error\x20details:','8824KjZSqz','rightTxt','limit-high','push','market_cap','************','-config.json','\x20network\x20error:\x20','pro','/output-000.log','fetchTickers','portfolio2','API-key\x20format\x20invalid','Pausing\x20for\x20','set','differenceInSeconds','breakeven','\x20API\x20secret\x20is\x20invalid','Binance','watchTradesForSymbols','keys','parse','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','sqrt','<b>','Initiating\x20bot\x20restart','fromCodePoint','Loading\x20completed','Saving\x20configuration','netoffset','offset','axios','watchOrders','\x20|\x20lock\x20orders:\x20','96485RuPwfh','message','abs','getFullYear','RETRY\x20-\x20Error\x20in\x20','watchTrades()','recovery','timeout','fee','Order(s)\x20not\x20validated\x20after\x20','USDT','onepagemode','currency','/EUR','7353676JWaOqp','NetworkError','forEach','recreateCoinResults()','warning','limit','emojibuy','slider','\x20exchange\x20error:\x20','\x20|\x20Custom\x20ID:\x20','InvalidNonce','InvalidOrder','writeFile','leftTxt','cooldown','round','configstate',')\x20known\x20order:\x20','date','usd','1\x20-\x20Handle\x20open\x20orders','password','-results.json','</pre>','RateLimitExceeded','entries','USDC','memoryUsage','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','USDP','logs','toString','progress','2338021FlRQFT','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','status\x20code\x20401','detectLiquidityChange()','filter','397346bYYUHl','search','UNLOCKED','portfolio','defaults','active','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','Unknown\x20error\x20-\x20check\x20logs','includes','Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute','log','(((.+)+)+)+$','Huobi','cloneDeep','\x20>\x20','timeshift','unlinkSync','running','sort','getPortfolio','sha256','3MfmBOz','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','privateKey','change24h','toLowerCase','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','AuthenticationError','format','trade','staging','USD','OnMaintenance','102Phglby','decode64','threshold','get','startnumber','filled','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','none','market','enableFiatToggle','apiKey','eur','Error\x20details:\x20','constructor','bb-secure.json','2.6.0','existsSync',':\x20Bot\x20','no\x20open\x20orders','Portfolio\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','\x0aSymbol(s):\x20','full','pid','\x20|\x20exchange:\x20','getHours','\x20>\x20pausing\x20bot\x20for\x20','ccxt','customId','No\x20more\x20open\x20orders\x20-\x20','bot','length','pop','apiPassword','getStartingBalances'];_0x5e06=function(){return _0x2cb4f1;};return _0x5e06();}function getPerf(_0x3832d8,_0x169602){const _0x3537e1=_0x400f17;let _0x3a52a2=0x0,_0x314a0c=0x0,_0x1acccd=0x0;_0x3832d8['coins'][_0x3537e1(0x23b)](_0x1265ae=>{const _0x466989=_0x3537e1;_0x3a52a2+=_0x1265ae[_0x466989(0x15e)]*_0x1265ae[_0x466989(0x11d)];});_0x169602&&(_0x3a52a2+=_0x3832d8['offset']);if(config[_0x3537e1(0x1ec)]===_0x3537e1(0x10f)||config[_0x3537e1(0x1ec)]==='ETH'||config[_0x3537e1(0x1ec)]===_0x3537e1(0xef))_0x314a0c=_0x3a52a2*_0x3832d8['eur'],_0x1acccd=_0x3a52a2*_0x3832d8[_0x3537e1(0x24c)];else{if(usdBasecoins[_0x3537e1(0x267)](config[_0x3537e1(0x1ec)]))_0x314a0c=_0x3a52a2*_0x3832d8[_0x3537e1(0x28b)]/_0x3832d8[_0x3537e1(0x24c)],_0x1acccd=_0x3a52a2;else config[_0x3537e1(0x1ec)]===_0x3537e1(0x1b5)&&(_0x314a0c=_0x3a52a2,_0x1acccd=_0x3a52a2*_0x3832d8[_0x3537e1(0x24c)]/_0x3832d8[_0x3537e1(0x28b)]);}return[_0x3a52a2,_0x314a0c,_0x1acccd];}function getKPIs(_0x3252d8,_0x429480='EUR'){const _0xbe6071=_0x400f17,_0x5c5580=config[_0xbe6071(0x1ec)],_0x39ce3d=lastBalances,_0x24d291=currentCoins,_0x2a209d=getNormalizedPerformance(),_0x34fd15=_0x3252d8==='basecoin'?_0x5c5580:_0x3252d8===_0xbe6071(0x1fc)||_0x3252d8===_0xbe6071(0x11e)?_0x429480:_0xbe6071(0x1c2)+_0x5c5580,_0x39acee=_0x3252d8===_0xbe6071(0x194)?_0xbe6071(0x165):_0x3252d8===_0xbe6071(0x11e)?_0xbe6071(0x165):_0x34fd15+'\x20value',_0x401880=_0x3252d8==='net-basecoin'||_0x3252d8===_0xbe6071(0x11e)?_0xbe6071(0x165):_0x34fd15+_0xbe6071(0x154);let _0x74aabe=0x0;_0x24d291['forEach'](_0x1467e8=>{const _0x27c8a5=_0xbe6071;_0x74aabe+=_0x1467e8[_0x27c8a5(0x15e)]*_0x1467e8[_0x27c8a5(0x1b4)];});if(_0x3252d8===_0xbe6071(0x1fc)||_0x3252d8===_0xbe6071(0x11e)){if(_0x5c5580===_0xbe6071(0x10f)||_0x5c5580==='ETH'||_0x5c5580===_0xbe6071(0xef))_0x74aabe=_0x74aabe*(_0x429480===_0xbe6071(0x1b5)?_0x39ce3d[_0xbe6071(0x28b)]:_0x39ce3d[_0xbe6071(0x24c)]);else{if(usdBasecoins[_0xbe6071(0x267)](_0x5c5580))_0x74aabe=_0x74aabe*(_0x429480===_0xbe6071(0x1b5)?_0x39ce3d[_0xbe6071(0x28b)]/_0x39ce3d[_0xbe6071(0x24c)]:0x1);else _0x5c5580===_0xbe6071(0x1b5)&&(_0x74aabe=_0x74aabe*(_0x429480===_0xbe6071(0x1b5)?0x1:_0x39ce3d[_0xbe6071(0x24c)]/_0x39ce3d['eur']));}}let _0x51817b;if(_0x74aabe!==0x0){if(_0x3252d8===_0xbe6071(0x1ec))_0x51817b=(_0x74aabe/startingBalances[_0xbe6071(0x1ec)]-0x1)*0x64;else{if(_0x429480===_0xbe6071(0x1b5))_0x51817b=(_0x74aabe/startingBalances[_0xbe6071(0x28b)]-0x1)*0x64;else _0x51817b=(_0x74aabe/startingBalances[_0xbe6071(0x24c)]-0x1)*0x64;}let _0x1a3ae1=0x0;if(startingBalances[_0xbe6071(0x19e)])_0x24d291[_0xbe6071(0x23b)](_0x8ed274=>{const _0xc46ab6=_0xbe6071;let _0x5e7249=startingBalances['coins'][_0xc46ab6(0x17b)](_0x285cd5=>_0x285cd5[_0xc46ab6(0x14a)]===_0x8ed274[_0xc46ab6(0x14a)]);if(_0x5e7249&&_0x5e7249['coin']&&_0x8ed274['number']!==0x0)_0x1a3ae1+=_0x5e7249['number']*_0x8ed274[_0xc46ab6(0x1b4)];});let _0x211a1f=0x0;if(_0x2a209d['length']!==0x0){let _0x360f51=_0x2a209d[_0x2a209d[_0xbe6071(0x29e)]-0x1];_0x211a1f=_0x360f51[_0xbe6071(0x226)];}_0x1a3ae1-=_0x211a1f;_0x3252d8==='net-basecoin'&&(_0x51817b=(_0x74aabe-_0x1a3ae1)/startingBalances[_0xbe6071(0x1ec)]*0x64,_0x74aabe=_0x74aabe-_0x1a3ae1);if(_0x3252d8==='net-fiat'){let _0x4f4f66=_0x429480===_0xbe6071(0x1b5)?startingBalances[_0xbe6071(0x28b)]:startingBalances['usd'];if(_0x5c5580==='BTC'||_0x5c5580===_0xbe6071(0x1dc)||_0x5c5580===_0xbe6071(0xef))_0x1a3ae1=_0x429480==='EUR'?_0x1a3ae1*_0x39ce3d['eur']:_0x1a3ae1*_0x39ce3d[_0xbe6071(0x24c)];else{if(usdBasecoins[_0xbe6071(0x267)](_0x5c5580))_0x1a3ae1=_0x429480===_0xbe6071(0x1b5)?_0x1a3ae1*_0x39ce3d[_0xbe6071(0x28b)]/_0x39ce3d['usd']:_0x1a3ae1;else _0x5c5580===_0xbe6071(0x1b5)&&(_0x1a3ae1=_0x429480==='EUR'?_0x1a3ae1:_0x1a3ae1*_0x39ce3d['usd']/_0x39ce3d['eur']);}_0x51817b=(_0x74aabe-_0x1a3ae1)/_0x4f4f66*0x64,_0x74aabe=_0x74aabe-_0x1a3ae1;}if(_0x51817b){if(_0x51817b<0x64)_0x51817b=_0x51817b[_0xbe6071(0x13e)](0x2);else{if(_0x51817b<0x3e8)_0x51817b=_0x51817b[_0xbe6071(0x13e)](0x1);else _0x51817b=_0x51817b[_0xbe6071(0x13e)](0x0);}}else _0x51817b=Number('0')[_0xbe6071(0x13e)](0x2);if(_0x74aabe){if(Math['abs'](_0x74aabe)<0.000001)_0x74aabe=_0x74aabe[_0xbe6071(0x13e)](0x2);else{if(Math[_0xbe6071(0x22d)](_0x74aabe)<0.1)_0x74aabe=_0x74aabe[_0xbe6071(0x13e)](0x6);else{if(Math[_0xbe6071(0x22d)](_0x74aabe)<0x1)_0x74aabe=_0x74aabe[_0xbe6071(0x13e)](0x5);else{if(Math[_0xbe6071(0x22d)](_0x74aabe)<0xa)_0x74aabe=_0x74aabe[_0xbe6071(0x13e)](0x4);else{if(Math[_0xbe6071(0x22d)](_0x74aabe)<0x64)_0x74aabe=_0x74aabe[_0xbe6071(0x13e)](0x3);else{if(Math['abs'](_0x74aabe)<0x3e8)_0x74aabe=_0x74aabe['toFixed'](0x2);else _0x74aabe=_0x74aabe[_0xbe6071(0x13e)](0x2);}}}}}}else _0x74aabe=Number('0')['toFixed'](0x2);}else _0x51817b=Number('0')[_0xbe6071(0x13e)](0x2);return{'value':_0x74aabe,'change':_0x51817b,'leftTxt':_0x39acee,'rightTxt':_0x401880};}async function getStartingBalances(_0x51ca19,_0x112651=!![]){const _0x23cd4f=_0x400f17;if(_0x51ca19[_0x23cd4f(0x29e)]!==0x0){const [_0x5e0ce8,_0x577726,_0x2a134d]=getPerf(_0x51ca19[0x0],!![]);let _0x1a6e6b=[];config[_0x23cd4f(0x262)][_0x23cd4f(0x23b)](_0x1de58a=>{const _0x2da612=_0x23cd4f;let _0x4b802b=0x0,_0x17cfc0;config[_0x2da612(0x14c)]['forEach'](_0x130e69=>{const _0x1d4cb1=_0x2da612;let _0xd4583e=_0x130e69[_0x1d4cb1(0x175)][_0x1d4cb1(0x17b)](_0x57a5e3=>_0x57a5e3[_0x1d4cb1(0x14a)]==_0x1de58a['coin']);if(_0xd4583e){_0x4b802b+=_0xd4583e['number'];if(!_0x17cfc0)_0x17cfc0=_0xd4583e['price'];}}),_0x1a6e6b[_0x2da612(0x20c)]({'coin':_0x1de58a['coin'],'number':_0x4b802b,'initialprice':_0x17cfc0});});const _0x124a11={'basecoin':_0x5e0ce8,'eur':_0x577726,'usd':_0x2a134d,'coins':_0x1a6e6b};if(_0x112651)proxyEmit(_0x23cd4f(0x1a0),_0x124a11);startingBalances=_0x124a11;}}function headlessMode(_0x2f9b3a){const _0x54a952=_0x400f17;let _0x344b60=_0x2f9b3a[_0x54a952(0x262)],_0x74a65c=_0x2f9b3a[_0x54a952(0x282)],_0xf8c674=[];for(let _0x112080 of _0x344b60){if(_0x112080['coin']!=config[_0x54a952(0x1ec)]){if(_0x112080[_0x54a952(0x1f5)]>=_0x74a65c/0x64){if(_0x112080[_0x54a952(0x2a9)])_0xf8c674[_0x54a952(0x20c)](_0x112080);}else{if(_0x112080['delta']<=-_0x74a65c/0x64){if(_0x112080[_0x54a952(0x2a9)])_0xf8c674['push'](_0x112080);}}}}_0xf8c674[_0x54a952(0x29e)]>0x0&&placeOrder(_0xf8c674);}function notifyBalance(_0xe34ba1){const _0xc42001=_0x400f17;let _0x80ba3b=_0xe34ba1['portfolio'],_0x409410=_0xe34ba1[_0xc42001(0x282)],_0x585ddf=[];for(let _0x80469 of _0x80ba3b){if(_0x80469[_0xc42001(0x14a)]!=config[_0xc42001(0x1ec)]){if(_0x80469[_0xc42001(0x1f5)]>=_0x409410/0x64){if(_0x80469[_0xc42001(0x2a9)])_0x585ddf[_0xc42001(0x20c)](_0x80469);}else{if(_0x80469[_0xc42001(0x1f5)]<=-_0x409410/0x64){if(_0x80469[_0xc42001(0x2a9)])_0x585ddf['push'](_0x80469);}}}}if(_0x585ddf[_0xc42001(0x29e)]>0x0){let _0x497564=_0x585ddf['map'](_0x40aacd=>_0x40aacd['coin']);_0x497564[_0xc42001(0x271)]();let _0x14b54f=_0x497564[_0xc42001(0x1be)](',\x20');if(!lastCoinsToBalance)logHistory(_0xc42001(0x23d),_0xc42001(0x183));lastCoinsToBalance=_0x14b54f;}}function symbolToCoin(_0x1aeab2){const _0x2c62be=_0x400f17;let _0x4c0342;if(_0x1aeab2[_0x2c62be(0x267)]('/'+config[_0x2c62be(0x1ec)]))_0x4c0342=_0x1aeab2[_0x2c62be(0x1e3)]('/'+config[_0x2c62be(0x1ec)],'');if(_0x1aeab2[_0x2c62be(0x267)](config[_0x2c62be(0x1ec)]+'/'))_0x4c0342=_0x1aeab2[_0x2c62be(0x1e3)](config[_0x2c62be(0x1ec)]+'/','');return _0x4c0342;}function setLockOrders(_0x339321){const _0x227ed1=_0x400f17;lockOrders=_0x339321,logger[_0x227ed1(0x15f)](_0x227ed1(0xfa)+Object['keys'](ORDERS)[lockOrders]);}async function unlockOrders(_0x3a615b=![]){const _0x454e43=_0x400f17;if(allOrdersPlaced&&lockOrders==ORDERS[_0x454e43(0x18c)]){setLockOrders(ORDERS[_0x454e43(0xf0)]);if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);if(_0x3a615b){const _0x50d54b=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x50d54b,setBlockTransactionDetection(![]);}validateOrdersState=_0x454e43(0x12d),persistOpenOrders([]),setLockOrders(ORDERS[_0x454e43(0x261)]);}}async function validateOrders(_0x36667f){const _0x566c32=_0x400f17;if(_0x36667f)validateOrdersState=_0x36667f;logger[_0x566c32(0x15f)](_0x566c32(0x1f3)+validateOrdersState+_0x566c32(0x22a)+Object[_0x566c32(0x21d)](ORDERS)[lockOrders]);let _0x415ed3=[],_0x55a9ef=config[_0x566c32(0x1cb)]==_0x566c32(0x288)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config['timeout']*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x566c32(0x18c)])return;logger[_0x566c32(0x15f)](_0x566c32(0x1da)+validateOrdersState);for(let _0x3f6683=lastOrders[_0x566c32(0x29e)]-0x1;_0x3f6683>=0x0;_0x3f6683--){let _0x3404e8=lastOrders[_0x3f6683],_0x2f5339=![];_0x3404e8['filled']>0x0&&(_0x2f5339=!![]),_0x415ed3[_0x566c32(0x20c)](_0x2f5339),_0x2f5339&&config[_0x566c32(0x1cb)]!='market'&&logHistory(_0x566c32(0x11c),_0x566c32(0x153)+_0x3404e8[_0x566c32(0x188)]+'\x20'+_0x3404e8[_0x566c32(0xf2)]+'\x20#'+formatResult(_0x3404e8[_0x566c32(0x285)],0x8)+'\x20@'+formatResult(_0x3404e8[_0x566c32(0x11d)],0x8)),_0x2f5339&&lastOrders['splice'](_0x3f6683,0x1);}persistOpenOrders(lastOrders);const _0x57ffc1=coolingDown?_0x566c32(0x1e0):'balancing\x20resumed';if(validateOrdersState==_0x566c32(0x12d)){validateOrdersState=_0x566c32(0x129);if(_0x415ed3[_0x566c32(0x267)](![])){}else await unlockOrders();}else{if(validateOrdersState==_0x566c32(0x129)){if(_0x415ed3[_0x566c32(0x267)](![])){}else await unlockOrders();}else{if(validateOrdersState=='final')_0x415ed3[_0x566c32(0x267)](![])&&(config[_0x566c32(0x1cb)]=='market'?logHistory('success',_0x566c32(0x234)+Math[_0x566c32(0x248)](_0x55a9ef*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x57ffc1):(await cancelOrders(),logHistory(_0x566c32(0x136),_0x566c32(0x191)+Math['round'](_0x55a9ef*validateOrderInterval/0xea60)+_0x566c32(0x1c6)+_0x57ffc1))),await unlockOrders(!![]);else{if(validateOrdersState==_0x566c32(0x292)){if(config[_0x566c32(0x1cb)]!=_0x566c32(0x288))logHistory(_0x566c32(0x136),_0x566c32(0x29c)+_0x57ffc1);await unlockOrders(!![]);}}}}}async function cancelOrders(){const _0x587891=_0x400f17;lastOrders[_0x587891(0x23b)](async _0x1f25a4=>{const _0x301555=_0x587891;try{const _0x14c423=await exchange[_0x301555(0x152)](_0x1f25a4[_0x301555(0x137)],_0x1f25a4[_0x301555(0x188)]);}catch(_0x39f2e9){if(_0x39f2e9['toString']()[_0x301555(0x267)](_0x301555(0x126))){}else await handleError(_0x39f2e9,_0x301555(0x2a5));}});}async function initCoinResults(_0x19764a){const _0x4bfddc=_0x400f17;_0x19764a?logger['debug'](_0x4bfddc(0x10b)+_0x19764a):logger[_0x4bfddc(0x15f)]('Initializing\x20coin\x20results'),config[_0x4bfddc(0x262)]['forEach'](_0x1d614d=>{const _0x400a2e=_0x4bfddc;if(!_0x1d614d[_0x400a2e(0x14d)]&&_0x1d614d[_0x400a2e(0x14a)]!=config['basecoin']){const _0x2628ed=currentCoins[_0x400a2e(0x17b)](_0x4eff2f=>_0x4eff2f[_0x400a2e(0x14a)]==_0x1d614d[_0x400a2e(0x14a)]),_0x4feea4=gTicker[noslash(_0x1d614d[_0x400a2e(0x188)])];let _0x358daa=_0x2628ed?_0x2628ed[_0x400a2e(0x15e)]:null,_0x2f8737=_0x1d614d[_0x400a2e(0x108)]?0x1/_0x4feea4:_0x4feea4,_0x47e965;config[_0x400a2e(0x14c)]['forEach'](_0x288713=>{const _0x1b2bbe=_0x400a2e;!_0x47e965&&(_0x47e965=_0x288713['changes'][_0x1b2bbe(0x17b)](_0x452554=>_0x452554['coin']==_0x1d614d[_0x1b2bbe(0x14a)]),_0x47e965&&(_0x358daa=_0x47e965[_0x1b2bbe(0x15e)],_0x2f8737=_0x47e965['price']));});let _0x17d832=dbCoinResults[_0x400a2e(0x283)]('coins')[_0x400a2e(0x17b)]({'coin':_0x1d614d[_0x400a2e(0x14a)]})[_0x400a2e(0x2ab)]();if(!_0x17d832){const _0x4a261e={'coin':_0x1d614d[_0x400a2e(0x14a)],'number':_0x358daa,'breakeven':_0x2f8737,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x400a2e(0x283)]('coins')['push'](_0x4a261e)[_0x400a2e(0x200)]();}else{if(_0x19764a&&_0x1d614d['coin']==_0x19764a){const _0x44e4aa={'coin':_0x1d614d[_0x400a2e(0x14a)],'number':_0x358daa,'breakeven':_0x2f8737,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x400a2e(0x283)](_0x400a2e(0x19e))[_0x400a2e(0x17b)]({'coin':_0x1d614d[_0x400a2e(0x14a)]})[_0x400a2e(0x1f2)](_0x44e4aa)['write']();}}}});}async function updateCoinResults(_0x12c4dc,_0x27f031=![]){const _0x5be8b6=_0x400f17;let _0x2c6080,_0x4ba31e,_0x568010,_0x3907d3,_0x4c5499,_0x2f9de7,_0x4386dd=dbCoinResults[_0x5be8b6(0x283)](_0x5be8b6(0x19e))[_0x5be8b6(0x17b)]({'coin':_0x12c4dc[_0x5be8b6(0x14a)]})[_0x5be8b6(0x2ab)](),_0x1dfd02=![];_0x4386dd&&Object[_0x5be8b6(0x252)](_0x4386dd)[_0x5be8b6(0x23b)](([_0x20386b,_0x1e6d3c])=>{if(_0x1e6d3c==null)_0x1dfd02=!![];});(!_0x4386dd||_0x1dfd02)&&(await initCoinResults(_0x12c4dc['coin']),_0x4386dd=dbCoinResults[_0x5be8b6(0x283)]('coins')[_0x5be8b6(0x17b)]({'coin':_0x12c4dc[_0x5be8b6(0x14a)]})[_0x5be8b6(0x2ab)]());_0x12c4dc[_0x5be8b6(0x108)]&&(_0x2f9de7={'filled':_0x12c4dc[_0x5be8b6(0x285)]*_0x12c4dc['price'],'amount':_0x12c4dc[_0x5be8b6(0x285)]*_0x12c4dc['price'],'side':_0x12c4dc['side']==_0x5be8b6(0x2b3)?_0x5be8b6(0x1e2):_0x5be8b6(0x2b3),'price':0x1/_0x12c4dc[_0x5be8b6(0x11d)]},_0x12c4dc={..._0x12c4dc,..._0x2f9de7});_0x27f031?_0x4ba31e=_0x12c4dc['side']==_0x5be8b6(0x1e2)?_0x4386dd[_0x5be8b6(0x15e)]+_0x12c4dc[_0x5be8b6(0x285)]:_0x4386dd['number']-_0x12c4dc[_0x5be8b6(0x285)]:_0x4ba31e=await getCoinNumber(_0x12c4dc[_0x5be8b6(0x14a)]);if(_0x12c4dc[_0x5be8b6(0x233)]&&_0x12c4dc[_0x5be8b6(0x233)][_0x5be8b6(0x237)]==config[_0x5be8b6(0x1ec)])_0x2c6080=Number(_0x12c4dc[_0x5be8b6(0x233)]['cost']);else{if(_0x12c4dc[_0x5be8b6(0x233)]&&_0x12c4dc[_0x5be8b6(0x233)][_0x5be8b6(0x237)]=='BNB'&&!_0x27f031&&config[_0x5be8b6(0x1ec)]!=_0x5be8b6(0xef))_0x2c6080=Number(_0x12c4dc[_0x5be8b6(0x233)]['cost'])*gTicker[_0x5be8b6(0x13b)+config[_0x5be8b6(0x1ec)]];else _0x2c6080=defaultFee*_0x12c4dc[_0x5be8b6(0x285)]*_0x12c4dc['price'];}_0x12c4dc[_0x5be8b6(0xf2)]==_0x5be8b6(0x1e2)?(_0x568010=_0x4ba31e!=0x0?(_0x4386dd['breakeven']*_0x4386dd['number']+_0x12c4dc['price']*(_0x4ba31e-_0x4386dd['number'])+_0x2c6080)/_0x4ba31e:0x0,_0x3907d3=_0x4386dd[_0x5be8b6(0x144)]):(_0x568010=_0x4ba31e!=0x0?(_0x4386dd[_0x5be8b6(0x219)]*_0x4386dd[_0x5be8b6(0x15e)]-_0x12c4dc[_0x5be8b6(0x11d)]*(_0x4386dd['number']-_0x4ba31e)+_0x2c6080)/_0x4ba31e:0x0,_0x3907d3=_0x4386dd[_0x5be8b6(0x144)]+(_0x12c4dc[_0x5be8b6(0x11d)]-_0x4386dd['breakeven'])*_0x12c4dc[_0x5be8b6(0x285)]);_0x4c5499=(_0x12c4dc['price']-_0x568010-_0x2c6080/_0x12c4dc[_0x5be8b6(0x285)])*_0x4ba31e;let _0x335f11={'coin':_0x12c4dc['coin'],'number':_0x4ba31e,'breakeven':formatResult(_0x568010,0x8),'realized':formatResult(_0x3907d3,0x8),'unrealized':formatResult(_0x4c5499,0x8),'fees':formatResult(_0x4386dd[_0x5be8b6(0x1ff)]+_0x2c6080,0x8),'sells':_0x12c4dc[_0x5be8b6(0xf2)]==_0x5be8b6(0x2b3)?_0x4386dd[_0x5be8b6(0x106)]+0x1:_0x4386dd[_0x5be8b6(0x106)],'buys':_0x12c4dc[_0x5be8b6(0xf2)]==_0x5be8b6(0x1e2)?_0x4386dd[_0x5be8b6(0x1bc)]+0x1:_0x4386dd[_0x5be8b6(0x1bc)]};dbCoinResults[_0x5be8b6(0x283)](_0x5be8b6(0x19e))[_0x5be8b6(0x17b)]({'coin':_0x12c4dc[_0x5be8b6(0x14a)]})[_0x5be8b6(0x1f2)](_0x335f11)[_0x5be8b6(0x200)]();if(!_0x27f031){if(_0x12c4dc[_0x5be8b6(0x233)]&&_0x12c4dc['fee']['currency']==_0x5be8b6(0x13b)){const _0x45c122=currentCoins['find'](_0x3697ce=>_0x3697ce[_0x5be8b6(0x14a)]==_0x5be8b6(0x13b));if(_0x45c122){let _0x2fc34d=dbCoinResults[_0x5be8b6(0x283)](_0x5be8b6(0x19e))['find']({'coin':_0x5be8b6(0x13b)})[_0x5be8b6(0x2ab)]();_0x335f11={..._0x2fc34d,'number':_0x45c122['number']},dbCoinResults['get'](_0x5be8b6(0x19e))[_0x5be8b6(0x17b)]({'coin':_0x5be8b6(0x13b)})['assign'](_0x335f11)['write']();}}}}async function placeOrder(_0x882971){const _0x4e9203=_0x400f17,_0x49f697=config[_0x4e9203(0x1cb)]=='market'?'market':_0x4e9203(0x23e);if(lockOrders==ORDERS[_0x4e9203(0x261)]&&!coolingDown){setLockOrders(ORDERS['LOCKED']);while(transactionDetectionOngoing){await sleep(0x64);}logger[_0x4e9203(0x15f)](_0x4e9203(0x17c)+_0x882971[_0x4e9203(0x181)](_0x18249b=>_0x18249b['coin'])['join'](',\x20')),lastCoinsToBalance='',allOrdersPlaced=![],validateOrdersState=_0x4e9203(0x12d);let _0x4b28ae=![];lastOrders=[];const _0x314d07=config[_0x4e9203(0x282)];for(const _0x48d04d of _0x882971){let _0x3f3ab2,_0x1a8708,_0x36a534,_0x485435,_0x458b85,_0x21d59b=_0x48d04d[_0x4e9203(0x188)];logger[_0x4e9203(0x15f)]('Trigger:\x20'+_0x48d04d[_0x4e9203(0x14a)]+'\x20'+_0x48d04d[_0x4e9203(0x15e)]+'\x20'+_0x48d04d[_0x4e9203(0x1b4)]+'\x20'+_0x48d04d[_0x4e9203(0x150)]+'%\x20'+_0x48d04d[_0x4e9203(0x1b9)]+'%\x20'+(0x64*_0x48d04d['delta'])[_0x4e9203(0x13e)](0x2)+_0x4e9203(0x161)+_0x314d07[_0x4e9203(0x13e)](0x2)+'%)');const _0x542ea7=currentCoins[_0x4e9203(0x17b)](_0xb4f8f3=>_0xb4f8f3[_0x4e9203(0x14a)]==_0x48d04d[_0x4e9203(0x14a)]);_0x542ea7&&(_0x542ea7[_0x4e9203(0x1df)]=_0x48d04d[_0x4e9203(0x15e)]);try{const _0x33e901=await exchange[_0x4e9203(0x1b6)](_0x21d59b);_0x3f3ab2=_0x48d04d[_0x4e9203(0x108)]?0x1/_0x48d04d[_0x4e9203(0x1b4)]:_0x48d04d[_0x4e9203(0x1b4)],_0x1a8708=_0x33e901['bid'],_0x36a534=_0x33e901[_0x4e9203(0xe6)];_0x48d04d[_0x4e9203(0x108)]?(_0x485435=_0x48d04d[_0x4e9203(0xf2)]==_0x4e9203(0x1e2)?_0x4e9203(0x2b3):_0x4e9203(0x1e2),_0x458b85=Math[_0x4e9203(0x22d)](_0x48d04d[_0x4e9203(0x27c)])/_0x3f3ab2):(_0x485435=_0x48d04d[_0x4e9203(0xf2)],_0x458b85=Math[_0x4e9203(0x22d)](_0x48d04d[_0x4e9203(0x27c)]));_0x49f697==_0x4e9203(0x23e)&&(config[_0x4e9203(0x1cb)]=='limit-high'&&(_0x3f3ab2=_0x485435==_0x4e9203(0x1e2)?_0x1a8708:_0x36a534),config[_0x4e9203(0x1cb)]==_0x4e9203(0x1c5)&&(_0x3f3ab2=_0x485435==_0x4e9203(0x1e2)?_0x36a534:_0x1a8708));_0x458b85=formatResult(_0x458b85,0x8),_0x3f3ab2=formatResult(_0x3f3ab2,0x8);const _0x21b112=_0x485435=='sell'?config[_0x4e9203(0x170)]?String[_0x4e9203(0x223)]('0x'+config['emojisell'])+'\x20':'':config[_0x4e9203(0x23f)]?String[_0x4e9203(0x223)]('0x'+config[_0x4e9203(0x23f)])+'\x20':'',_0x55b694=_0x49f697==_0x4e9203(0x288)?'Market':config[_0x4e9203(0x1cb)]==_0x4e9203(0x20b)?_0x4e9203(0x1de):_0x4e9203(0x127),_0x598fa9=(Math[_0x4e9203(0x195)](Math['random']()*0x35a4e900)+0x5f5e100)['toString']();lastOrders[_0x4e9203(0x20c)]({'customId':_0x598fa9,'symbol':_0x21d59b,'coin':_0x48d04d['coin'],'amount':_0x458b85,'price':_0x3f3ab2,'side':_0x485435,'reverse':_0x48d04d['reverse'],'filled':0x0});if(_0x49f697==_0x4e9203(0x288))logHistory(_0x4e9203(0x11c),''+_0x21b112+_0x55b694+_0x4e9203(0x101)+_0x21d59b+'\x20'+_0x485435+'\x20#'+formatResult(_0x458b85,0x8)+'\x20@'+formatResult(_0x3f3ab2,0x8));else logHistory(_0x4e9203(0x11c),''+_0x21b112+_0x55b694+_0x4e9203(0x101)+_0x21d59b+'\x20'+_0x485435+'\x20#'+formatResult(_0x458b85,0x8)+'\x20@'+formatResult(_0x3f3ab2,0x8));let _0x50d4a0;_0x49f697==_0x4e9203(0x288)?_0x485435==_0x4e9203(0x1e2)&&[_0x4e9203(0x1b3),_0x4e9203(0x12b),_0x4e9203(0x167),_0x4e9203(0x26b),'Huobipro'][_0x4e9203(0x267)](config['exchange'])?_0x50d4a0=await exchange[_0x4e9203(0x1fa)](_0x21d59b,_0x49f697,_0x485435,_0x458b85,_0x3f3ab2):_0x50d4a0=await exchange[_0x4e9203(0x1fa)](_0x21d59b,_0x49f697,_0x485435,_0x458b85,undefined):_0x50d4a0=await exchange[_0x4e9203(0x1fa)](_0x21d59b,_0x49f697,_0x485435,_0x458b85,_0x3f3ab2);logger['debug'](_0x4e9203(0x2b8)+_0x50d4a0['id']+_0x4e9203(0x242)+_0x598fa9);const _0x376f06=lastOrders[_0x4e9203(0x29e)]-0x1;if(_0x376f06>=0x0&&lastOrders[_0x376f06][_0x4e9203(0x29b)]==_0x598fa9){lastOrders[_0x376f06]['orderId']=_0x50d4a0['id'];if(_0x50d4a0['amount'])lastOrders[_0x376f06][_0x4e9203(0x130)]=_0x50d4a0[_0x4e9203(0x130)];if(_0x50d4a0['price'])lastOrders[_0x376f06][_0x4e9203(0x11d)]=_0x50d4a0[_0x4e9203(0x11d)];lastOrders[_0x376f06][_0x4e9203(0x233)]=_0x50d4a0['fee'];}if(config[_0x4e9203(0x247)]!=0x0){let _0x2278d7=null;if(cooldownTracker['length']==config[_0x4e9203(0x247)]-0x1)_0x2278d7=cooldownTracker[_0x4e9203(0x18b)]();const _0x5cf891=getTimeStamp();cooldownTracker[_0x4e9203(0x20c)](_0x5cf891);if(_0x2278d7){const _0x60a7c1=fns[_0x4e9203(0x218)](new Date(_0x5cf891),new Date(_0x2278d7));if(_0x60a7c1<cooldownInterval){logHistory(_0x4e9203(0x1ae),'Executed\x20'+config[_0x4e9203(0x247)]+'\x20orders\x20in\x20less\x20than\x20'+cooldownInterval/0x3c+_0x4e9203(0xf9)+cooldownPeriod/(0xe10*0x3e8)+_0x4e9203(0x122)),coolingDown=!![];break;}}}}catch(_0x510ec8){if(_0x510ec8['toString']()[_0x4e9203(0x267)]('MIN_NOTIONAL'))lastOrders=lastOrders[_0x4e9203(0x25e)](_0x1783db=>_0x1783db[_0x4e9203(0x188)]!=_0x21d59b),logHistory(_0x4e9203(0x1ae),_0x4e9203(0x255)+_0x21d59b),_0x4b28ae=!![];else{if(_0x510ec8[_0x4e9203(0x258)]()[_0x4e9203(0x267)](_0x4e9203(0x119)))lastOrders=lastOrders[_0x4e9203(0x25e)](_0x1edadb=>_0x1edadb[_0x4e9203(0x188)]!=_0x21d59b),logHistory(_0x4e9203(0x1ae),'Order\x20amount\x20is\x20invalid:\x20'+_0x21d59b),_0x4b28ae=!![];else{if(_0x510ec8[_0x4e9203(0x258)]()[_0x4e9203(0x267)](_0x4e9203(0x244)))lastOrders=lastOrders['filter'](_0x19449b=>_0x19449b[_0x4e9203(0x188)]!=_0x21d59b),logHistory(_0x4e9203(0x1ae),_0x4e9203(0x16f)+_0x21d59b),logger[_0x4e9203(0x15f)](_0x510ec8),_0x4b28ae=!![];else _0x510ec8[_0x4e9203(0x258)]()[_0x4e9203(0x267)](_0x4e9203(0x1b1))?(lastOrders=lastOrders[_0x4e9203(0x25e)](_0x87e702=>_0x87e702[_0x4e9203(0x188)]!=_0x21d59b),logHistory('error',_0x4e9203(0x255)+_0x21d59b),_0x4b28ae=!![]):(lastOrders=lastOrders[_0x4e9203(0x25e)](_0x2026c0=>_0x2026c0[_0x4e9203(0x188)]!=_0x21d59b),await handleError(_0x510ec8,'placeOrder()',_0x21d59b));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x4e9203(0x29e)]>0x0){const _0x551a24=config['ordertype']==_0x4e9203(0x288)?validateOrderTimeout*0x3c*0x3e8:config[_0x4e9203(0x232)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x1e81bf=_0x4e9203;validateOrders(_0x1e81bf(0x1a6));},_0x551a24);}else unlockOrders();_0x4b28ae&&config[_0x4e9203(0x14e)]&&(logHistory('error',_0x4e9203(0x177)+pauseBotMsg),await pauseBot(pauseBotInterval)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory('success',_0x4e9203(0x104)));}else{if(coolingDown)!config[_0x4e9203(0x14e)]&&logHistory(_0x4e9203(0x1ae),_0x4e9203(0x265));else lockOrders!=ORDERS[_0x4e9203(0x261)]&&(!config[_0x4e9203(0x14e)]&&(config[_0x4e9203(0x1cb)]==_0x4e9203(0x288)?logHistory(_0x4e9203(0x1ae),_0x4e9203(0x1e5)):logHistory(_0x4e9203(0x1ae),_0x4e9203(0x133))));}}function persistOpenOrders(_0x5cd827){const _0x485bcc=_0x400f17,_0x414b7a={...config,'openOrders':_0x5cd827};let _0x3c1658=dbConfig[_0x485bcc(0x283)](_0x485bcc(0x29d))[_0x485bcc(0x17b)]({'botID':botID})['value']();_0x3c1658&&dbConfig[_0x485bcc(0x283)](_0x485bcc(0x29d))[_0x485bcc(0x17b)]({'botID':botID})[_0x485bcc(0x1f2)](_0x414b7a)[_0x485bcc(0x200)]();}function restoreOrders(){const _0x461062=_0x400f17;let _0x4e2551;config[_0x461062(0x2b1)]&&allOpenOrders[_0x461062(0x23b)](_0x5376cb=>{const _0x36086d=_0x461062,_0x1d4e8e=config['openOrders'][_0x36086d(0x17b)](_0x4d3678=>_0x4d3678['orderId']==_0x5376cb['id']);_0x1d4e8e&&(lastOrders[_0x36086d(0x20c)](_0x1d4e8e),_0x4e2551=_0x5376cb[_0x36086d(0x1d1)]);});if(lastOrders[_0x461062(0x29e)]>0x0){setLockOrders(ORDERS[_0x461062(0x18c)]),validateOrdersState=_0x461062(0x129),allOrdersPlaced=!![];const _0x49804b=new Date()['getTime'](),_0x5e70f2=config['ordertype']==_0x461062(0x288)?validateOrderTimeout*0x3c*0x3e8:config[_0x461062(0x232)]*0x3c*0x3e8;if(_0x4e2551+_0x5e70f2>_0x49804b){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x2966fa=_0x461062;validateOrders(_0x2966fa(0x1a6));},_0x4e2551+_0x5e70f2-_0x49804b);}else validateOrders('final');}}async function sendMetricsTelegram(){const _0x4a1ed1=_0x400f17;if(!coinsLoaded){process[_0x4a1ed1(0x166)]({'telegrammsg':_0x4a1ed1(0x268)},_0x4f5421=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x55999d='';if(config[_0x4a1ed1(0x12c)])_0x55999d='<b>'+config[_0x4a1ed1(0x121)]+_0x4a1ed1(0x15b);else _0x55999d='<b>Bot\x20'+botID+_0x4a1ed1(0x15b);const _0x439b54=getKPIs('basecoin'),_0x4155ea=getKPIs(_0x4a1ed1(0x1fc),config[_0x4a1ed1(0x1fc)]),_0x20f2cb=getKPIs(_0x4a1ed1(0x194)),_0x10cc6c=getKPIs(_0x4a1ed1(0x11e),config[_0x4a1ed1(0x1fc)]);_0x55999d+='<pre>',_0x55999d+=_0x439b54['leftTxt']+'\x20:\x20'+_0x439b54[_0x4a1ed1(0x2ab)]+'\x0a',_0x55999d+=_0x439b54[_0x4a1ed1(0x20a)]+':\x20'+_0x439b54[_0x4a1ed1(0x12f)]+'%\x0a',_0x55999d+=_0x4155ea[_0x4a1ed1(0x246)]+_0x4a1ed1(0x100)+_0x4155ea[_0x4a1ed1(0x2ab)]+'\x0a',_0x55999d+=_0x4155ea[_0x4a1ed1(0x20a)]+':\x20'+_0x4155ea[_0x4a1ed1(0x12f)]+'%\x0a',_0x55999d+=_0x20f2cb[_0x4a1ed1(0x246)]+':\x20'+_0x20f2cb[_0x4a1ed1(0x2ab)]+'\x20('+config[_0x4a1ed1(0x1ec)]+')\x0a',_0x55999d+=_0x20f2cb['rightTxt']+':\x20'+_0x20f2cb[_0x4a1ed1(0x12f)]+_0x4a1ed1(0x161)+config[_0x4a1ed1(0x1ec)]+')\x0a',_0x55999d+=_0x10cc6c[_0x4a1ed1(0x246)]+':\x20'+_0x10cc6c['value']+'\x20('+config[_0x4a1ed1(0x1fc)]+')\x0a',_0x55999d+=_0x10cc6c[_0x4a1ed1(0x20a)]+':\x20'+_0x10cc6c['change']+_0x4a1ed1(0x161)+config['fiat']+')\x0a',_0x55999d+=_0x4a1ed1(0x250),process[_0x4a1ed1(0x166)]({'telegrammsg':_0x55999d},_0x4c27d2=>{});}async function sendPortfolioTelegram(){const _0x516128=_0x400f17;if(!coinsLoaded||!currentCoins[0x0][_0x516128(0x150)]){process[_0x516128(0x166)]({'telegrammsg':_0x516128(0x268)},_0xde9d20=>{});return;}let _0x4c7aaf='';if(config[_0x516128(0x12c)])_0x4c7aaf=_0x516128(0x221)+config['botname']+_0x516128(0x184);else _0x4c7aaf=_0x516128(0x16d)+botID+_0x516128(0x184);_0x4c7aaf+='<pre>',_0x4c7aaf+='-------------------------------\x0a',_0x4c7aaf+=_0x516128(0x21f),_0x4c7aaf+=_0x516128(0x1d3),currentCoins['forEach'](_0x1d1e0d=>{const _0x33a440=_0x516128;_0x4c7aaf+=_0x1d1e0d['coin'][_0x33a440(0x187)](0x7)+'|\x20'+formatPad(_0x1d1e0d[_0x33a440(0x150)],0x2,0x6)+'|\x20'+formatPad(_0x1d1e0d[_0x33a440(0x1b9)],0x2,0x6)+'|\x20'+formatPad(_0x1d1e0d['delta']*0x64,0x2,0x6)+'\x0a';}),_0x4c7aaf+=_0x516128(0x250),process[_0x516128(0x166)]({'telegrammsg':_0x4c7aaf},_0x314bac=>{});}function formatPad(_0x50a8eb,_0x459b64,_0x4a366a){const _0x319b90=_0x400f17,_0x5bfb64=formatResultString(_0x50a8eb,_0x459b64);return _0x5bfb64?_0x5bfb64[_0x319b90(0x1ef)](_0x4a366a):''['padStart'](_0x4a366a);}function logHistory(_0x20bb8b,_0x18c0c6,_0x4d7b32=''){const _0x428629=_0x400f17;logger[_0x428629(0x295)](''+_0x18c0c6);let _0x120355={'time':getTimeStamp(),'type':_0x20bb8b,'event':_0x18c0c6};dbLogs[_0x428629(0x283)](_0x428629(0x257))[_0x428629(0x20c)](_0x120355)[_0x428629(0x200)]();if(_0x4d7b32=='')_0x4d7b32=_0x18c0c6;proxyEmit(_0x428629(0x196),{'log':_0x120355,'summary':_0x4d7b32}),process[_0x428629(0x166)]({'telegram':{..._0x120355,'botname':config['botname'],'showname':config[_0x428629(0x12c)]}},_0x39e716=>{});}function emitHistory(_0x34ec75={}){const _0x229f37=_0x400f17;Object['keys'](_0x34ec75)[_0x229f37(0x29e)]==0x0&&(_0x34ec75={'type':[_0x229f37(0x11c),'event'],'event':'','page':0x1});if(_0x34ec75[_0x229f37(0x174)][_0x229f37(0x267)](_0x229f37(0x196)))_0x34ec75[_0x229f37(0x174)][_0x229f37(0xfe)](_0x34ec75[_0x229f37(0x174)]['indexOf'](_0x229f37(0x196)),0x1,_0x229f37(0x1ae),'warning',_0x229f37(0x136));if(dbLogs['has'](_0x229f37(0x257))[_0x229f37(0x2ab)]()){let _0x5bdd4f=dbLogs[_0x229f37(0x283)](_0x229f37(0x257))[_0x229f37(0x25e)](_0x16bb37=>{const _0x148e0f=_0x229f37;if(_0x34ec75[_0x148e0f(0x174)][_0x148e0f(0x29e)]==0x0)return![];else return _0x34ec75[_0x148e0f(0x174)][_0x148e0f(0x267)](_0x16bb37[_0x148e0f(0x174)]);})['filter'](_0x20fdea=>{const _0x3baa13=_0x229f37;if(_0x34ec75[_0x3baa13(0x196)]=='')return!![];else return _0x20fdea[_0x3baa13(0x196)][_0x3baa13(0x278)]()[_0x3baa13(0x267)](_0x34ec75['event'][_0x3baa13(0x278)]());})['sortBy']('time'),_0x202a94=_0x5bdd4f[_0x229f37(0x2ab)]()[_0x229f37(0x29e)];_0x5bdd4f=_0x5bdd4f[_0x229f37(0x108)]()['slice']((_0x34ec75[_0x229f37(0xf4)]-0x1)*logPageSize,_0x34ec75[_0x229f37(0xf4)]*logPageSize-0x1)['reverse']()[_0x229f37(0x2ab)](),proxyEmit(_0x229f37(0x141),{'logs':_0x5bdd4f,'total':_0x202a94});}else proxyEmit(_0x229f37(0x141),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x3b1225){const _0x4aef35=_0x400f17;if(dbLogs[_0x4aef35(0x15a)](_0x4aef35(0x257))[_0x4aef35(0x2ab)]()){const _0x480eb8=dbLogs[_0x4aef35(0x283)]('logs')[_0x4aef35(0x103)](_0x4aef35(0x134))['filter'](_0x511f43=>{const _0x1e928c=_0x4aef35;return _0x511f43[_0x1e928c(0x174)]==_0x1e928c(0x11c);})[_0x4aef35(0x2ab)]();dbLogs[_0x4aef35(0x283)](_0x4aef35(0x257))[_0x4aef35(0x116)]()['write'](),dbLogs[_0x4aef35(0x283)](_0x4aef35(0x257))[_0x4aef35(0x1f2)](_0x480eb8)['write'](),emitHistory(_0x3b1225);}}async function pauseBot(_0x3495b3=pauseBotIntervalShort,_0x35be69,_0x3ad66b,_0x59c65a=![]){const _0x4b6a11=_0x400f17,_0x454a4d=new Date()[_0x4b6a11(0x1c4)]();if(!lastErrorShown||_0x454a4d-lastErrorShown>=_0x3495b3){lastErrorShown=_0x454a4d;if(!lastBotPause)lastBotPause=_0x454a4d,consecutivePauses=0x1;else{if(_0x454a4d-lastBotPause-_0x3495b3<0x5a*0x3e8){consecutivePauses++;if(consecutivePauses>maxPauseRetries){if(_0x59c65a){logHistory(_0x4b6a11(0x1ae),_0x35be69+_0x4b6a11(0x1f4)),await killBot();return;}else logHistory(_0x4b6a11(0x1ae),_0x35be69+pauseBotMsg),_0x3495b3=pauseBotInterval;}}else consecutivePauses=0x1;lastBotPause=_0x454a4d;}_0x3ad66b?logger['debug']('('+consecutivePauses+')\x20'+_0x35be69+'\x20>\x20details:',_0x3ad66b):logger['debug']('('+consecutivePauses+')\x20'+_0x35be69);if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);await sleep(_0x3495b3),botPaused=![],_0x3495b3==pauseBotIntervalShort?resumeBot(!![]):resumeBot(![]);}}}async function killBot(){const _0x3d49c6=_0x400f17;botPaused=!![],await sleep(0x3e8),process['send']({'stop':_0x3d49c6(0x199)},_0x24a36a=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0xd7a887,_0x398af9,_0x2a0c24=![]){const _0x416aa6=_0x400f17;if(botPaused)return;let _0x2440ca;const _0x2b5cc8=config[_0x416aa6(0x18e)]||_0x416aa6(0x1ee);if(_0x398af9)logger[_0x416aa6(0x15f)]('Exception\x20thrown\x20in\x20'+_0x398af9);const _0x77dbb8=()=>{const _0x3765b1=_0x416aa6;loading[_0x3765b1(0x1ae)]=!![],emitLoadingProgress();};if(_0xd7a887[_0x416aa6(0x258)]()[_0x416aa6(0x267)]('API-key\x20format\x20invalid'))logHistory(_0x416aa6(0x1ae),_0x2b5cc8+_0x416aa6(0x25b)),_0x77dbb8();else{if(_0xd7a887[_0x416aa6(0x258)]()[_0x416aa6(0x267)](_0x416aa6(0x2aa)))logHistory(_0x416aa6(0x1ae),_0x2b5cc8+_0x416aa6(0x279)),_0x77dbb8();else{if(_0xd7a887[_0x416aa6(0x258)]()[_0x416aa6(0x267)]('AuthenticationError'))config[_0x416aa6(0x2a0)]?_0x2440ca=_0x2b5cc8+_0x416aa6(0x15d):_0x2440ca=_0x2b5cc8+_0x416aa6(0x275),logHistory(_0x416aa6(0x1ae),_0x2440ca+_0x416aa6(0x140)),_0x77dbb8();else{if(_0xd7a887['toString']()[_0x416aa6(0x267)]('PermissionDenied'))logHistory(_0x416aa6(0x1ae),_0x2b5cc8+'\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)'),_0x77dbb8();else{if(!_0x2a0c24)await handleError(_0xd7a887,null);}}}}}async function handleError(_0x223f22,_0x2c4de1,_0x54be24=''){const _0x2ca626=_0x400f17;if(botPaused)return;let _0x3b2f8c;const _0x98992d=config[_0x2ca626(0x18e)]||_0x2ca626(0x1ee);if(_0x2c4de1)logger['debug'](_0x2ca626(0x1f1)+_0x2c4de1);if(_0x223f22[_0x2ca626(0x258)]()['includes']('DDoSProtection'))_0x3b2f8c=_0x98992d+'\x20blocked\x20API\x20(DDoSProtection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading',await pauseBot(undefined,_0x3b2f8c,_0x223f22);else{if(_0x223f22[_0x2ca626(0x258)]()['includes'](_0x2ca626(0x251)))_0x3b2f8c=_0x98992d+_0x2ca626(0x17a),await pauseBot(undefined,_0x3b2f8c,_0x223f22);else{if(_0x223f22['toString']()[_0x2ca626(0x267)]('ExchangeNotAvailable')||_0x223f22[_0x2ca626(0x258)]()[_0x2ca626(0x267)](_0x2ca626(0x27f)))_0x3b2f8c=_0x98992d+_0x2ca626(0xe7),await pauseBot(undefined,_0x3b2f8c,_0x223f22['toString']());else{if(_0x223f22['toString']()[_0x2ca626(0x267)]('RequestTimeout'))_0x3b2f8c=_0x98992d+_0x2ca626(0x1ed),await pauseBot(undefined,_0x3b2f8c,_0x223f22[_0x2ca626(0x258)]());else{if(_0x223f22[_0x2ca626(0x258)]()['includes'](_0x2ca626(0x151)))_0x3b2f8c=_0x98992d+_0x2ca626(0xed),await pauseBot(undefined,_0x3b2f8c,_0x223f22[_0x2ca626(0x258)]());else{if(_0x223f22[_0x2ca626(0x258)]()[_0x2ca626(0x278)]()['includes'](_0x2ca626(0x1d1))||_0x223f22['toString']()[_0x2ca626(0x278)]()[_0x2ca626(0x267)]('request-time'))_0x3b2f8c='Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)',await pauseBot(undefined,_0x3b2f8c,_0x223f22[_0x2ca626(0x258)]());else{if(_0x223f22['toString']()['includes'](_0x2ca626(0x243)))_0x3b2f8c=_0x98992d+_0x2ca626(0x13d),await pauseBot(undefined,_0x3b2f8c,_0x223f22[_0x2ca626(0x258)]());else{if(_0x223f22 instanceof ccxt[_0x2ca626(0x23a)])_0x3b2f8c=_0x98992d+_0x2ca626(0x210)+_0x223f22[_0x2ca626(0x258)](),logger[_0x2ca626(0x15f)](_0x2ca626(0x208),_0x223f22),await pauseBot(undefined,_0x3b2f8c,_0x223f22);else{if(_0x223f22['toString']()[_0x2ca626(0x267)](_0x2ca626(0x215)))logHistory(_0x2ca626(0x1ae),_0x98992d+'\x20API\x20key\x20is\x20invalid'),logHistory(_0x2ca626(0x1ae),_0x2ca626(0x1a8)),await killBot();else{if(_0x223f22['toString']()[_0x2ca626(0x267)](_0x2ca626(0x2aa)))logHistory(_0x2ca626(0x1ae),_0x98992d+_0x2ca626(0x21a)),logHistory(_0x2ca626(0x1ae),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)'),await killBot();else{if(_0x223f22[_0x2ca626(0x258)]()[_0x2ca626(0x267)]('AuthenticationError')&&_0x223f22[_0x2ca626(0x258)]()[_0x2ca626(0x267)](_0x2ca626(0x19a)))_0x3b2f8c=_0x98992d+_0x2ca626(0x1c1),await pauseBot(undefined,_0x3b2f8c,_0x223f22,!![]);else{if(_0x223f22['toString']()[_0x2ca626(0x267)]('AuthenticationError'))config[_0x2ca626(0x2a0)]?_0x3b2f8c=_0x98992d+_0x2ca626(0x15d):_0x3b2f8c=_0x98992d+_0x2ca626(0x275),logHistory(_0x2ca626(0x1ae),_0x3b2f8c),logHistory('error','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)'),await killBot();else{if(_0x223f22[_0x2ca626(0x258)]()['includes'](_0x2ca626(0xf3)))logHistory(_0x2ca626(0x1ae),_0x98992d+'\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange'),logHistory(_0x2ca626(0x1ae),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)'),await killBot();else{if(_0x223f22[_0x2ca626(0x258)]()[_0x2ca626(0x267)](_0x2ca626(0x169)))logHistory('error','Insufficient\x20funds\x20to\x20execute\x20order:\x20'+_0x54be24),logger[_0x2ca626(0x15f)](_0x2ca626(0x2af),_0x223f22);else{if(_0x223f22 instanceof ccxt[_0x2ca626(0x2ae)]){_0x3b2f8c=_0x98992d+_0x2ca626(0x241)+_0x223f22[_0x2ca626(0x258)]();if(_0x54be24)_0x3b2f8c+='\x0aSymbol(s):\x20'+_0x54be24;await pauseBot(undefined,_0x3b2f8c,_0x223f22);}else{_0x3b2f8c=_0x2ca626(0x155)+_0x223f22[_0x2ca626(0x258)]();if(_0x54be24)_0x3b2f8c+=_0x2ca626(0x294)+_0x54be24;await pauseBot(undefined,_0x3b2f8c);}}}}}}}}}}}}}}}}function decryptRSA(_0xf707cd,_0xec2687){const _0x4e1444=_0x400f17,_0x397500=forge['pki'][_0x4e1444(0x10d)](_0xf707cd),_0x3406eb=_0x397500['decrypt'](forge[_0x4e1444(0xee)][_0x4e1444(0x281)](_0xec2687),_0x4e1444(0xea),{'md':forge['md'][_0x4e1444(0x273)]['create'](),'mgf1':{'md':forge['md'][_0x4e1444(0x273)][_0x4e1444(0x1d7)]()}});return _0x3406eb;}async function withRetry(_0x333ade,_0x532f92){const _0x1453af=_0x400f17;let _0x257be4=![],_0x4f0a60=0x0,_0x40066d,_0x59f49b;while(_0x4f0a60<maxRetries){try{_0x40066d=await _0x532f92();break;}catch(_0x4048c4){_0x59f49b=_0x4048c4,!_0x257be4?(_0x257be4=!![],logger['debug'](_0x1453af(0x22f)+_0x333ade+':',_0x4048c4[_0x1453af(0x258)]())):await sleep(retryInterval);}_0x4f0a60++;}if(_0x4f0a60==0x0)return _0x40066d;if(_0x4f0a60>=maxRetries)throw _0x59f49b;else return logger[_0x1453af(0x15f)](_0x1453af(0x19f)+_0x4f0a60+'\x20attempts'),_0x40066d;}function formatResult(_0x5db7b4,_0x2372d5){return parseFloat(_0x5db7b4['toFixed'](_0x2372d5));}function formatResultTruncate(_0x5e5d33,_0x28b0ed){const _0x38513a=_0x400f17;let _0x13ddb9=formatResultString(_0x5e5d33,0xa),_0x4d634f=_0x13ddb9['indexOf']('.');return _0x4d634f!=-0x1&&(_0x13ddb9=_0x13ddb9[_0x38513a(0x13f)](0x0,_0x4d634f+_0x28b0ed+0x1)),Number(_0x13ddb9);}function formatResultString(_0x2272d3,_0x1f573b){const _0x1876e1=_0x400f17;let _0x146af0;if(!(''+_0x2272d3)['includes']('e'))_0x146af0=+(Math[_0x1876e1(0x248)](_0x2272d3+'e+'+_0x1f573b)+'e-'+_0x1f573b);else{let _0x11aab1=(''+_0x2272d3)[_0x1876e1(0x198)]('e'),_0x74d3a5='';+_0x11aab1[0x1]+_0x1f573b>0x0&&(_0x74d3a5='+'),_0x146af0=+(Math[_0x1876e1(0x248)](+_0x11aab1[0x0]+'e'+_0x74d3a5+(+_0x11aab1[0x1]+_0x1f573b))+'e-'+_0x1f573b);}return Number(_0x146af0)[_0x1876e1(0x13e)](_0x1f573b);}function getServerTime(){const _0x25e463=_0x400f17,_0x3d6d39=new Date();return _0x3d6d39['getFullYear']()+'/'+(_0x3d6d39['getMonth']()+0x1)[_0x25e463(0x258)]()[_0x25e463(0x1ef)](0x2,'0')+'/'+_0x3d6d39[_0x25e463(0x1ad)]()[_0x25e463(0x258)]()[_0x25e463(0x1ef)](0x2,'0')+'\x20'+_0x3d6d39[_0x25e463(0x298)]()[_0x25e463(0x258)]()[_0x25e463(0x1ef)](0x2,'0')+':'+_0x3d6d39['getMinutes']()[_0x25e463(0x258)]()[_0x25e463(0x1ef)](0x2,'0')+':'+_0x3d6d39[_0x25e463(0x1d4)]()['toString']()[_0x25e463(0x1ef)](0x2,'0');}function getTimeStamp(){const _0x328742=_0x400f17,_0x559227=shiftedTime();return _0x559227[_0x328742(0x22e)]()+'/'+(_0x559227['getMonth']()+0x1)[_0x328742(0x258)]()[_0x328742(0x1ef)](0x2,'0')+'/'+_0x559227[_0x328742(0x1ad)]()[_0x328742(0x258)]()[_0x328742(0x1ef)](0x2,'0')+'\x20'+_0x559227[_0x328742(0x298)]()['toString']()[_0x328742(0x1ef)](0x2,'0')+':'+_0x559227['getMinutes']()[_0x328742(0x258)]()[_0x328742(0x1ef)](0x2,'0')+':'+_0x559227[_0x328742(0x1d4)]()['toString']()[_0x328742(0x1ef)](0x2,'0');}function getDate(){const _0x32e14f=_0x400f17,_0x1fa1bc=shiftedTime();return _0x1fa1bc['getFullYear']()+'/'+(_0x1fa1bc[_0x32e14f(0x162)]()+0x1)[_0x32e14f(0x258)]()[_0x32e14f(0x1ef)](0x2,'0')+'/'+_0x1fa1bc[_0x32e14f(0x1ad)]()[_0x32e14f(0x258)]()[_0x32e14f(0x1ef)](0x2,'0');}function getHour(){const _0x2c9e20=_0x400f17,_0x441e8a=shiftedTime();return _0x441e8a['getHours']()[_0x2c9e20(0x258)]()[_0x2c9e20(0x1ef)](0x2,'0');}function sleep(_0x5181f2){return new Promise(_0x54c8e2=>setTimeout(_0x54c8e2,_0x5181f2));}function shiftedTime(){const _0x2141b1=_0x400f17,_0x18e303=new Date();let _0xfee4e5=_0x18e303;if(config&&config[_0x2141b1(0x26e)]!==0x0)_0xfee4e5=fns[_0x2141b1(0x186)](_0x18e303,{'hours':config[_0x2141b1(0x26e)]});return _0xfee4e5;}function timer(_0x987678){const _0xc59b2b=_0x400f17,_0x204121=new Date();!lasttime?console['log'](getTimeStamp()+_0xc59b2b(0x1bb),_0x987678,_0x204121):console[_0xc59b2b(0x269)](getTimeStamp()+':\x20timer\x20>',_0x987678,(_0x204121-lasttime)/0x3e8),lasttime=_0x204121;}