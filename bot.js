const _0x453176=_0x4ad0;(function(_0xe2d074,_0x4fb642){const _0x2301ae=_0x4ad0,_0x389e2c=_0xe2d074();while(!![]){try{const _0x15d467=-parseInt(_0x2301ae(0x2ed))/0x1*(parseInt(_0x2301ae(0x37b))/0x2)+parseInt(_0x2301ae(0x356))/0x3+-parseInt(_0x2301ae(0x370))/0x4*(parseInt(_0x2301ae(0x2d2))/0x5)+-parseInt(_0x2301ae(0x21b))/0x6+parseInt(_0x2301ae(0x212))/0x7*(-parseInt(_0x2301ae(0x290))/0x8)+parseInt(_0x2301ae(0x326))/0x9*(parseInt(_0x2301ae(0x318))/0xa)+parseInt(_0x2301ae(0x216))/0xb*(parseInt(_0x2301ae(0x2f3))/0xc);if(_0x15d467===_0x4fb642)break;else _0x389e2c['push'](_0x389e2c['shift']());}catch(_0x2cad99){_0x389e2c['push'](_0x389e2c['shift']());}}}(_0x5b36,0x97044));const _0x54080a=function(){let _0x3693e7=!![];return function(_0xefb8ab,_0x3abe09){const _0x360d3e=_0x3693e7?function(){const _0x343ab6=_0x4ad0;if(_0x3abe09){const _0x35cccd=_0x3abe09[_0x343ab6(0x372)](_0xefb8ab,arguments);return _0x3abe09=null,_0x35cccd;}}:function(){};return _0x3693e7=![],_0x360d3e;};}(),_0x5cf60e=_0x54080a(this,function(){const _0x49c9d1=_0x4ad0;return _0x5cf60e[_0x49c9d1(0x1c5)]()[_0x49c9d1(0x36e)]('(((.+)+)+)+$')[_0x49c9d1(0x1c5)]()[_0x49c9d1(0x204)](_0x5cf60e)['search'](_0x49c9d1(0x244));});_0x5cf60e();'use strict';const ccxt=require('ccxt'),low=require('lowdb'),FileSync=require(_0x453176(0x24d)),fs=require('fs'),fns=require(_0x453176(0x2f2)),forge=require(_0x453176(0x282)),util=require('util'),argv=require(_0x453176(0x351))(process['argv'][_0x453176(0x369)](0x2))[_0x453176(0x2c9)],path=require('path'),axios=require(_0x453176(0x26f));let exchange,gTicker={},gChange={};const usdBasecoins=[_0x453176(0x27a),_0x453176(0x310),_0x453176(0x2a6),_0x453176(0x376),_0x453176(0x1c8),_0x453176(0x345)],excludedExchanges=[_0x453176(0x30c)],debugging=argv['d']||![];let pnlGenerationNeeded=argv['r']||![],config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object['freeze']({'LOCKED':0x0,'UNLOCKING':0x1,'UNLOCKED':0x2});let lockOrders=ORDERS['UNLOCKED'],validateOrdersState,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotIntervalShort=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0x453176(0x325)+pauseBotInterval/0xea60+_0x453176(0x2b3),maxPauseRetries=0x6,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,watchTransactionsInterval=0x3c*0x3e8,schedulerInterval=0x3c*0x3c*0x3e8,retryInterval=0x3e8,maxRetries=0x5,logPageSize=0x14,defaultFee=0.003;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidOrdersInitialTimeout,pidOrdersTimeout,botPaused=![],transactionDetectionOngoing=![],lastCoinsToBalance='',exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x5dc,balanceUpdateRetries=0x5;let enableFiatToggle;const serverversion=require('./version.json')['version'],environment=require(_0x453176(0x2c3))[_0x453176(0x2f5)]||_0x453176(0x255),botID=process['argv'][0x2]||_0x453176(0x338),pattern=/^[0-9]{3}$/;!pattern[_0x453176(0x32c)](botID)&&(console['log'](_0x453176(0x277)+botID+_0x453176(0x28c)),killBot());const userID=process[_0x453176(0x2c9)][0x3]||'',configpath=userID?_0x453176(0x24b)+userID+'/':_0x453176(0x24b),logspath=userID?_0x453176(0x280)+userID+'/':_0x453176(0x280),loggerfile=fs[_0x453176(0x352)](logspath+_0x453176(0x366),{'flags':'a'});!fs[_0x453176(0x26e)](configpath)&&fs[_0x453176(0x34b)](configpath);!fs['existsSync'](logspath)&&fs[_0x453176(0x34b)](logspath);const configfile=configpath+_0x453176(0x22d)+botID+_0x453176(0x233),logfile=configpath+_0x453176(0x22d)+botID+_0x453176(0x274),performancefile=configpath+_0x453176(0x22d)+botID+_0x453176(0x1e0),coinresultsfile=configpath+_0x453176(0x22d)+botID+'-results.json',settingsfile=configpath+'bb-settings.json',securefile=configpath+_0x453176(0x25d),configbackuppath=configpath+_0x453176(0x30a),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x453176(0x245)]({'logs':[],'version':serverversion})[_0x453176(0x321)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x453176(0x245)]({'data':[],'version':serverversion})[_0x453176(0x321)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x453176(0x245)]({'bot':[],'version':serverversion})['write']();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x453176(0x245)]({'coins':{},'version':serverversion})['write']();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0,settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x44496e=>{const _0x2d6ff5=_0x453176;console[_0x2d6ff5(0x238)](_0x44496e);},'simple':_0x1a3729=>{const _0x441ae6=_0x453176;console['log'](_0x1a3729),loggerfile['write'](util[_0x441ae6(0x335)](_0x1a3729)+'\x0a');},'full':async(_0x283c64,_0x486032='')=>{const _0x50e157=_0x453176;let _0x587a14;if(config[_0x50e157(0x1e5)])_0x587a14=getTimeStamp()+':\x20'+config[_0x50e157(0x26b)]+'\x20>\x20'+_0x283c64;else _0x587a14=getTimeStamp()+_0x50e157(0x23e)+botID+_0x50e157(0x2c2)+_0x283c64;console[_0x50e157(0x238)](_0x587a14),loggerfile[_0x50e157(0x321)](util['format'](_0x587a14)+'\x0a'),_0x486032&&(console[_0x50e157(0x238)](_0x486032),loggerfile[_0x50e157(0x321)](util['format'](_0x486032)+'\x0a'));},'debug':async(_0x55989b,_0x5722c8='')=>{const _0xd55f16=_0x453176;let _0x2547da;if(config[_0xd55f16(0x1e5)])_0x2547da=getTimeStamp()+':\x20'+config[_0xd55f16(0x26b)]+_0xd55f16(0x30b)+_0x55989b;else _0x2547da=getTimeStamp()+_0xd55f16(0x23e)+botID+'\x20>\x20[DEBUG]\x20'+_0x55989b;if(debugging)console[_0xd55f16(0x238)](_0x2547da);loggerfile[_0xd55f16(0x321)](util[_0xd55f16(0x335)](_0x2547da)+'\x0a');if(_0x5722c8){if(debugging)console['log'](_0x5722c8);loggerfile[_0xd55f16(0x321)](util[_0xd55f16(0x335)](_0x5722c8)+'\x0a');}}};process['on'](_0x453176(0x296),function(_0x38c5af){const _0x37283d=_0x453176;handleError(_0x38c5af[_0x37283d(0x276)],'uncaughtException');});settings['timeshift']!=config[_0x453176(0x230)]&&updateTimeshift(settings[_0x453176(0x230)]);settings['onepagemode']!=config[_0x453176(0x1da)]&&updateOnepagemode(settings['onepagemode']);(settings['marketcapApi']&&!config[_0x453176(0x235)]||!settings[_0x453176(0x235)]&&config[_0x453176(0x235)])&&updateMarketcapApi(settings[_0x453176(0x235)]);process[_0x453176(0x2c4)]({'started':'running'},_0x508a6b=>{}),initializeProcessListeners();function proxyEmit(_0x16f20d,_0x5598e9=null){const _0x3b39b4=_0x453176;process[_0x3b39b4(0x2c4)]({'function':_0x16f20d,'args':_0x5598e9},_0x5cc426=>{});}function initializeProcessListeners(){const _0x1e84b4=_0x453176;process['on'](_0x1e84b4(0x2ea),_0x154dc2=>{const _0x2bad97=_0x1e84b4;switch(Object[_0x2bad97(0x33b)](_0x154dc2)[0x0]){case _0x2bad97(0x230):_0x154dc2['timeshift']!=undefined&&(settings[_0x2bad97(0x230)]=_0x154dc2[_0x2bad97(0x230)],updateTimeshift(settings['timeshift']));break;case _0x2bad97(0x1da):_0x154dc2['onepagemode']!=undefined&&(settings[_0x2bad97(0x1da)]=_0x154dc2[_0x2bad97(0x1da)],updateOnepagemode(settings[_0x2bad97(0x1da)]));break;case _0x2bad97(0x235):_0x154dc2[_0x2bad97(0x235)]!=undefined&&(settings[_0x2bad97(0x235)]=_0x154dc2['marketcapApi'],updateMarketcapApi(settings[_0x2bad97(0x235)]));break;case _0x2bad97(0x2aa):_0x154dc2[_0x2bad97(0x2aa)]!=undefined&&(bots=JSON[_0x2bad97(0x32e)](_0x154dc2['bots']),proxyEmit(_0x2bad97(0x2aa),bots));break;case _0x2bad97(0x293):switch(_0x154dc2[_0x2bad97(0x293)]){case'initclient':initclient();break;case _0x2bad97(0x202):toggleBotMode();break;case _0x2bad97(0x2ba):emitHistory(_0x154dc2['args']);break;case _0x2bad97(0x37e):deleteHistoryAlerts(_0x154dc2[_0x2bad97(0x2d9)]);break;case _0x2bad97(0x36c):getPortfolio(_0x154dc2[_0x2bad97(0x2d9)]);break;case _0x2bad97(0x301):storeConfiguration(_0x154dc2[_0x2bad97(0x2d9)]);break;case _0x2bad97(0x304):storeHeadless(_0x154dc2[_0x2bad97(0x2d9)]);break;case _0x2bad97(0x2eb):storeFiat(_0x154dc2['args']);break;case _0x2bad97(0x35f):resetHistory();break;case _0x2bad97(0x36d):getStartingBalances(getNormalizedPerformance());break;case _0x2bad97(0x20d):placeOrder(_0x154dc2[_0x2bad97(0x2d9)]);break;case _0x2bad97(0x246):cancelLoading();break;case'showConfig':showConfig();break;case _0x2bad97(0x347):sendMetricsTelegram();break;case'sendPortfolioTelegram':sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x56b8f1=![]){const _0x172030=_0x453176;logger['debug'](_0x172030(0x1dd)+(_0x56b8f1?_0x172030(0x299):'no\x20exchange\x20reloaded')+_0x172030(0x21d)+config['exchange']);if(pidBalances)clearTimeout(pidBalances);if(!_0x56b8f1)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x172030(0x1ed)]!=''&&config[_0x172030(0x1ed)]!=_0x172030(0x27d)){loadingProgress=0x0;if(_0x56b8f1){await initExchange();const _0x34ca14=await testAPI();if(!_0x34ca14)return;await loadSymbols(),loadingProgress=0x1,setStableCoins(),proxyEmit(_0x172030(0x320),emittedConfiguration()),initialPerformanceStored=![];}const _0x4c5e83=await getCoins();[currentCoins,currentCoinsAll]=_0x4c5e83,setBlockTransactionDetection(![]),startScheduler(),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger['debug'](_0x172030(0x2ee)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x172030(0x24f)]==0x0&&allOpenOrders['length']!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(pnlGenerationNeeded)await generatePnL();}}async function resumeBot(_0x3b3c8e=![]){const _0xe033ff=_0x453176;logger[_0xe033ff(0x2a7)]('Resuming\x20('+(_0x3b3c8e?_0xe033ff(0x217):_0xe033ff(0x243))+')\x20|\x20exchange:\x20'+config[_0xe033ff(0x25c)]);if(pidBalances)clearTimeout(pidBalances);if(_0x3b3c8e){getBalances();return;}coinsLoaded=![];if(config[_0xe033ff(0x1ed)]!=''&&config[_0xe033ff(0x1ed)]!=_0xe033ff(0x27d)){loadingProgress=0x1;const _0x3dd238=await getCoins();[currentCoins,currentCoinsAll]=_0x3dd238,setBlockTransactionDetection(![]),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger['debug']('Loading\x20completed'),getBalances(![]),await updateOpenOrders();if(lastOrders[_0xe033ff(0x24f)]==0x0&&allOpenOrders['length']!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();}}async function getMarketCap(_0x2cfe34){const _0x2a5651=_0x453176;let _0x805038=![];if(_0x2cfe34)_0x805038=!![];const _0xbd0f1c=_0x805038?_0x2cfe34:currentCoins,_0x5c592d=_0xbd0f1c['map'](_0x5da327=>_0x5da327[_0x2a5651(0x240)]);if(!config['marketcapApi']||!_0x805038&&!config[_0x2a5651(0x306)]||_0x5c592d[_0x2a5651(0x24f)]==0x0)return;let _0x2f49dc=null;try{_0x2f49dc=await axios['get']('https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest',{'headers':{'X-CMC_PRO_API_KEY':settings[_0x2a5651(0x235)]},'params':{'symbol':_0x5c592d['toString']()}});}catch(_0x40507b){_0x2f49dc=null,_0x40507b['toString']()['includes'](_0x2a5651(0x215))?(config[_0x2a5651(0x235)]=![],updateConfig(),proxyEmit(_0x2a5651(0x320),emittedConfiguration()),logHistory('error',_0x2a5651(0x257))):(logHistory(_0x2a5651(0x359),'CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20trying\x20again\x20in\x20'+schedulerInterval/(0x3c*0x3e8)+_0x2a5651(0x2b3)),logger['debug'](_0x2a5651(0x22c),_0x40507b['toString']()+_0x2a5651(0x236)+_0x40507b[_0x2a5651(0x231)]));}let _0x4641ea=!![];if(_0x2f49dc){let _0x2dd3d2=0x0;const _0x56f665=_0x2f49dc[_0x2a5651(0x380)];_0x5c592d[_0x2a5651(0x31b)](_0x224437=>{const _0x6ab6a=_0x2a5651;if(_0x56f665[_0x6ab6a(0x380)][_0x224437][0x0]&&_0x56f665[_0x6ab6a(0x380)][_0x224437][0x0][_0x6ab6a(0x364)][_0x6ab6a(0x27a)][_0x6ab6a(0x368)])_0x2dd3d2+=_0x56f665['data'][_0x224437][0x0]['quote'][_0x6ab6a(0x27a)][_0x6ab6a(0x368)];else{if(![_0x6ab6a(0x2e7),_0x6ab6a(0x27a)]['includes'](_0x224437)){if(_0x805038)logHistory(_0x6ab6a(0x359),_0x6ab6a(0x33a)+_0x224437+_0x6ab6a(0x33d));else{const _0xe19e03=config['portfolio'][_0x6ab6a(0x268)](_0x130437=>_0x130437[_0x6ab6a(0x240)]==_0x224437);_0xe19e03&&!_0xe19e03[_0x6ab6a(0x1e1)]&&_0xe19e03[_0x6ab6a(0x207)]==-0x1&&(_0x4641ea=![],logHistory('error',_0x6ab6a(0x383)),logger[_0x6ab6a(0x2a7)](_0x6ab6a(0x33a)+_0x224437));}}}});if(!_0x4641ea)return;_0x5c592d[_0x2a5651(0x31b)](_0x46a973=>{const _0x2fe39e=_0x2a5651,_0x3356f7=_0x56f665[_0x2fe39e(0x380)][_0x46a973][0x0]?_0x56f665['data'][_0x46a973][0x0]['quote'][_0x2fe39e(0x27a)]['market_cap']:0x0;if(_0x805038){const _0xf760fc=_0x2cfe34[_0x2fe39e(0x268)](_0x541456=>_0x541456[_0x2fe39e(0x240)]==_0x46a973);_0xf760fc&&(_0xf760fc['marketcap']=_0x3356f7);}else{const _0x5cc558=currentCoins[_0x2fe39e(0x268)](_0xd26d71=>_0xd26d71[_0x2fe39e(0x240)]==_0x46a973);_0x5cc558&&(_0x5cc558[_0x2fe39e(0x2f8)]=_0x3356f7);const _0x1eb715=currentCoinsAll[_0x2fe39e(0x268)](_0xe71230=>_0xe71230['coin']==_0x46a973);_0x1eb715&&(_0x1eb715['marketcap']=_0x3356f7);}}),!_0x805038&&updateTargetDistribution();}}function updateTargetDistribution(){const _0x40a312=_0x453176,_0x547388=0x2;let _0x1cf9ac=0x0,_0x4d1cef=0x0,_0x66391a=0x0,_0x66de6a=0x0,_0x3174f6=0x0;config[_0x40a312(0x2d0)][_0x40a312(0x31b)](_0x10c17c=>{const _0x1b38b3=_0x40a312;if(!_0x10c17c[_0x1b38b3(0x1e1)]){_0x66391a++,_0x1cf9ac+=_0x10c17c['slider'];if(_0x10c17c[_0x1b38b3(0x207)]===-0x1){_0x1cf9ac++;const _0x5184ae=currentCoinsAll['find'](_0x35064b=>_0x35064b[_0x1b38b3(0x240)]==_0x10c17c[_0x1b38b3(0x240)]);_0x5184ae&&(_0x66de6a+=_0x5184ae[_0x1b38b3(0x2f8)],_0x3174f6+=Math[_0x1b38b3(0x1f1)](_0x5184ae[_0x1b38b3(0x2f8)]));}if(_0x10c17c[_0x1b38b3(0x207)]!==-0x1)_0x4d1cef++;}});let _0x23c393;const _0x849b6d=0x64-_0x1cf9ac,_0x550302=_0x66391a-_0x4d1cef;_0x23c393=_0x550302===0x0?_0x1cf9ac:Math[_0x40a312(0x297)](0x64,_0x1cf9ac),config[_0x40a312(0x2d0)][_0x40a312(0x31b)](_0xb585f2=>{const _0x4fe7e4=_0x40a312,_0x19bf9a=currentCoinsAll['find'](_0x37fa15=>_0x37fa15[_0x4fe7e4(0x240)]==_0xb585f2['coin']);_0x19bf9a&&(_0xb585f2[_0x4fe7e4(0x2f8)]=_0x19bf9a[_0x4fe7e4(0x2f8)]);if(!_0xb585f2[_0x4fe7e4(0x1e1)]){if(_0x23c393<=0x64){if(_0xb585f2['slider']===-0x1){if(_0x66de6a!==0x0&&config[_0x4fe7e4(0x306)]){if(_0x19bf9a){if(config[_0x4fe7e4(0x306)]==_0x4fe7e4(0x2f8))_0xb585f2['distribution']=(_0x849b6d/(_0x66de6a/_0x19bf9a[_0x4fe7e4(0x2f8)]))[_0x4fe7e4(0x35d)](_0x547388);else config[_0x4fe7e4(0x306)]=='marketcapsqrt'&&(_0xb585f2[_0x4fe7e4(0x33c)]=(_0x849b6d/(_0x3174f6/Math['sqrt'](_0x19bf9a[_0x4fe7e4(0x2f8)])))[_0x4fe7e4(0x35d)](_0x547388));}}}}}}),updateConfig();}function updateConfig(){const _0x5daf8a=_0x453176;let _0x361539=dbConfig[_0x5daf8a(0x363)](_0x5daf8a(0x2f6))[_0x5daf8a(0x268)]({'botID':botID})['value']();_0x361539&&dbConfig[_0x5daf8a(0x363)](_0x5daf8a(0x2f6))['find']({'botID':botID})[_0x5daf8a(0x275)](config)['write']();}function logMemory(){const _0x59149b=_0x453176;if(environment!='staging')return;const _0x3be3ef=process[_0x59149b(0x213)]()[_0x59149b(0x25e)]/0x400/0x400;logger[_0x59149b(0x2a7)]('process\x20'+process[_0x59149b(0x21e)]+_0x59149b(0x357)+formatResult(_0x3be3ef,0x1)+_0x59149b(0x205));}async function startScheduler(){const _0x47776c=shiftedTime()['getHours']();getMarketCap(),loadSymbols(),_0x47776c==0x1&&logMemory(),await sleep(schedulerInterval),startScheduler();}async function restartBot(_0x5385b1=![]){const _0x2b625f=_0x453176;logger['debug']('Initiating\x20bot\x20restart');if(!_0x5385b1)while(lockOrders!=ORDERS[_0x2b625f(0x2cc)]||coolingDown){await sleep(0x3e8);}process[_0x2b625f(0x2c4)]({'stop':_0x2b625f(0x1ee)},_0x1e257d=>{});}async function initExchange(_0x38accd=config[_0x453176(0x25c)],_0x4cb39e=config[_0x453176(0x1ed)],_0xb23d38=config[_0x453176(0x1f7)],_0x38bdf7=config[_0x453176(0x1ff)],_0x92f9ad=config[_0x453176(0x37f)]){const _0xfb63ff=_0x453176;if(exchange){logger[_0xfb63ff(0x2a7)](_0xfb63ff(0x1f5));return;}logger[_0xfb63ff(0x2a7)]('Initializing\x20exchange');!supportedExchanges()[_0xfb63ff(0x2d7)](_0x38accd)&&(logHistory(_0xfb63ff(0x359),'Balance\x20Bot\x20does\x20not\x20support\x20the\x20'+_0x38accd+_0xfb63ff(0x286)),killBot());const _0x2be025=ccxt['pro'][_0x38accd[_0xfb63ff(0x355)]()];exchange=new _0x2be025({'apiKey':_0x4cb39e,'secret':_0xb23d38,'options':{'defaultType':_0xfb63ff(0x30f)}});if(_0x38bdf7)exchange['password']=_0x38bdf7;if(exchange[_0xfb63ff(0x219)][_0xfb63ff(0x37f)])exchange[_0xfb63ff(0x307)](_0x92f9ad);}function updateExchange(_0x181abf,_0x535845,_0x10b818=null){const _0x114b78=_0x453176;exchange[_0x114b78(0x1ed)]=_0x181abf,exchange[_0x114b78(0x34c)]=_0x535845,exchange[_0x114b78(0x303)]=_0x10b818,logger[_0x114b78(0x2a7)](_0x114b78(0x1db));}function setStableCoins(){const _0x18fcc9=_0x453176;let _0x1fa3a1=config[_0x18fcc9(0x260)]=='ETH'?'ETH':config[_0x18fcc9(0x260)]==_0x18fcc9(0x353)?_0x18fcc9(0x353):_0x18fcc9(0x2be),_0x396dc7=allSymbols[_0x18fcc9(0x2d7)](_0x1fa3a1+'/USD')?_0x18fcc9(0x27a):allSymbols[_0x18fcc9(0x2d7)](_0x1fa3a1+_0x18fcc9(0x1dc))?_0x18fcc9(0x376):_0x18fcc9(0x2e7),_0x306d13=allSymbols['includes'](_0x1fa3a1+_0x18fcc9(0x2e0))?'EUR':_0x396dc7;enableFiatToggle=!![],_0x396dc7==_0x18fcc9(0x2e7)&&(enableFiatToggle=![],storeFiat(_0x18fcc9(0x2e7))),_0x306d13!=_0x18fcc9(0x2e7)&&(enableFiatToggle=![],storeFiat(_0x18fcc9(0x27a))),stablecoins={'eur':{'coin':''+_0x1fa3a1+_0x306d13,'symbol':_0x1fa3a1+'/'+_0x306d13},'usd':{'coin':''+_0x1fa3a1+_0x396dc7,'symbol':_0x1fa3a1+'/'+_0x396dc7}};}async function initwsCcxt(){const _0x231797=_0x453176;initCycle++;const _0x20ce9a=initCycle;let _0x1b9877=[];config['portfolio'][_0x231797(0x31b)](_0x42f732=>{const _0x348ce1=_0x231797;if(!_0x42f732['excluded']&&_0x42f732['coin']!=config['basecoin'])_0x1b9877['push'](_0x42f732[_0x348ce1(0x291)]);});if(!_0x1b9877[_0x231797(0x2d7)](stablecoins[_0x231797(0x36f)][_0x231797(0x291)]))_0x1b9877[_0x231797(0x34d)](stablecoins[_0x231797(0x36f)][_0x231797(0x291)]);if(!_0x1b9877[_0x231797(0x2d7)](stablecoins[_0x231797(0x367)][_0x231797(0x291)]))_0x1b9877[_0x231797(0x34d)](stablecoins[_0x231797(0x367)][_0x231797(0x291)]);loadCoins(_0x1b9877),_0x1b9877=validateSymbols(_0x1b9877);const _0x537a56=async _0x2184fa=>{const _0x365f6f=_0x231797;let _0x4333ba;try{const _0xe64046=await getTickers(_0x2184fa);Object[_0x365f6f(0x222)](_0xe64046)[_0x365f6f(0x31b)](_0x3c8787=>{const _0x19044c=_0x365f6f;_0x4333ba=_0x3c8787[0x1][_0x19044c(0x291)],gTicker[noslash(_0x4333ba)]=_0x3c8787[0x1][_0x19044c(0x218)],gChange[_0x4333ba]=_0x3c8787[0x1][_0x19044c(0x1fe)];});}catch(_0x25dee3){await handleError(_0x25dee3,_0x365f6f(0x2d8),_0x4333ba);}},_0x1274bf=async _0x3858c6=>{const _0x27d219=_0x231797;while(initCycle==_0x20ce9a){if(!botPaused)try{const _0x1ecb03=await exchange[_0x27d219(0x1ef)](_0x3858c6);gTicker[noslash(_0x1ecb03[0x0][_0x27d219(0x291)])]=_0x1ecb03[0x0][_0x27d219(0x2df)];}catch(_0x4ddf3b){if(!exchangeStopped)await handleError(_0x4ddf3b,'watchTrades()',_0x3858c6);}else await sleep(0x64);}},_0x50ff23=async _0x5dab4e=>{const _0x25747c=_0x231797;while(initCycle==_0x20ce9a){if(!botPaused)try{const _0x3d6fe3=await exchange[_0x25747c(0x265)](_0x5dab4e),_0xbdd152=_0x3d6fe3[_0x25747c(0x2e6)]();gTicker[noslash(_0xbdd152[_0x25747c(0x291)])]=_0xbdd152[_0x25747c(0x2df)];}catch(_0x3d1c56){if(!exchangeStopped)await handleError(_0x3d1c56,_0x25747c(0x324),_0x5dab4e[_0x25747c(0x1c5)]());}else await sleep(0x64);}},_0x7f7f8d=async _0xc35d20=>{const _0x42d022=_0x231797;while(initCycle==_0x20ce9a){if(!botPaused){let _0x24b04b;try{await sleep(0x3c*0x3e8);const _0x194edc=await getTickers(_0xc35d20);Object[_0x42d022(0x222)](_0x194edc)[_0x42d022(0x31b)](_0x296be8=>{const _0xdffc20=_0x42d022;_0x24b04b=_0x296be8[0x1]['symbol'],gChange[_0x24b04b]=_0x296be8[0x1][_0xdffc20(0x1fe)];});}catch(_0x3a7b93){if(!exchangeStopped)await handleError(_0x3a7b93,_0x42d022(0x2f7),_0x24b04b);}}else await sleep(0x64);}},_0x1ceef4=async _0x91ccf2=>{const _0x3f215c=_0x231797;while(initCycle==_0x20ce9a){if(!botPaused)try{const _0x27a205=await exchange[_0x3f215c(0x2ae)](_0x91ccf2);initCycle==_0x20ce9a&&_0x27a205[_0x3f215c(0x31b)](_0x5bcf1b=>{updateNumberCoinsCcxt(_0x5bcf1b);});}catch(_0x502def){if(!exchangeStopped)await handleError(_0x502def,'watchOrders()');}else await sleep(0x64);}};_0x537a56(_0x1b9877),_0x7f7f8d(_0x1b9877),exchange[_0x231797(0x219)][_0x231797(0x265)]&&!(config['exchange']==_0x231797(0x311)&&_0x1b9877[_0x231797(0x24f)]>0xa)?_0x50ff23(_0x1b9877):_0x1b9877['forEach'](_0x1a6484=>{_0x1274bf(_0x1a6484);}),_0x1b9877[_0x231797(0x31b)](_0x479871=>{_0x1ceef4(_0x479871);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x4e3f31){const _0x512be3=_0x453176;let _0x446f7e={};try{if(config[_0x512be3(0x25c)]!='Cryptocom')_0x446f7e=await exchange[_0x512be3(0x294)](_0x4e3f31);else for(const _0x4161bb of _0x4e3f31){const _0x4b8b5e=await exchange['fetchTicker'](_0x4161bb);_0x446f7e[_0x4161bb]=_0x4b8b5e;}return _0x446f7e;}catch(_0x1d7b16){throw _0x1d7b16;}}function setBlockTransactionDetection(_0x57ee40){const _0x3315d8=_0x453176;blockTransactionDetection=_0x57ee40,logger[_0x3315d8(0x2a7)](_0x3315d8(0x371)+blockTransactionDetection);}async function detectLiquidityChange(_0x24c609=0x0){const _0x1d697d=_0x453176;transactionDetectionOngoing=!![];try{const _0x419488=await getCoins(_0x24c609),[_0xcfd5ef,_0x23f8b8]=_0x419488;let _0x1983f5=[];currentCoins[_0x1d697d(0x31b)](_0x54f72d=>{const _0x1abd03=_0x1d697d,_0x38672=_0xcfd5ef[_0x1abd03(0x268)](_0x2ccef6=>_0x2ccef6[_0x1abd03(0x240)]==_0x54f72d[_0x1abd03(0x240)]);if(_0x38672){if(_0x54f72d[_0x1abd03(0x2a0)]!=_0x38672['number']){let _0x3bd9c2;if(_0x54f72d['coin']!=config[_0x1abd03(0x260)]){const _0x17c9b1=gTicker[noslash(_0x54f72d[_0x1abd03(0x291)])];_0x3bd9c2=_0x54f72d[_0x1abd03(0x2e9)]?0x1/_0x17c9b1:_0x17c9b1;}else _0x3bd9c2=0x1;_0x1983f5['push']({'coin':_0x54f72d[_0x1abd03(0x240)],'symbol':_0x54f72d[_0x1abd03(0x291)],'price':_0x3bd9c2,'number':Number(formatResult(_0x38672['number']-_0x54f72d[_0x1abd03(0x2a0)],0x8)),'basecoinvalue':_0x3bd9c2*(_0x38672[_0x1abd03(0x2a0)]-_0x54f72d[_0x1abd03(0x2a0)])});}}});if(_0x1983f5[_0x1d697d(0x24f)]>0x0&&!blockTransactionDetection){for(const _0x405e7d of _0x1983f5){if(config[_0x1d697d(0x2fc)]){logger[_0x1d697d(0x2a7)](_0x1d697d(0x1cb)+_0x405e7d[_0x1d697d(0x2e5)]+_0x1d697d(0x31c)+lastFees[_0x1d697d(0x2a9)]);if(lastFees['highest']==0x0||Math['abs'](_0x405e7d[_0x1d697d(0x2e5)])>lastFees['highest']*0x3){if(config[_0x1d697d(0x2fc)]==_0x1d697d(0x32b)){delete _0x405e7d[_0x1d697d(0x291)],delete _0x405e7d[_0x1d697d(0x2e5)];let _0x3f680f=[],_0x39470f=[...config[_0x1d697d(0x269)]]||[],_0x2cd2f1=config['liquidity'];_0x39470f[_0x1d697d(0x210)]((_0x5f4f3d,_0x52aceb)=>_0x5f4f3d[_0x1d697d(0x247)]>_0x52aceb[_0x1d697d(0x247)]?-0x1:_0x52aceb['date']>_0x5f4f3d['date']?0x1:0x0);const _0x2e14a3=getDate();if(_0x39470f[0x0]){const _0x1e5e48=fns[_0x1d697d(0x32e)](_0x39470f[0x0][_0x1d697d(0x247)],_0x1d697d(0x20a),new Date()),_0xdf4edc=fns[_0x1d697d(0x32e)](_0x2e14a3,'yyyy/MM/dd',new Date());if(fns[_0x1d697d(0x34a)](_0x1e5e48,_0xdf4edc)){_0x3f680f=_0x39470f[0x0]['changes'];const _0x477a13=_0x3f680f[_0x1d697d(0x268)](_0x10e4c5=>_0x10e4c5[_0x1d697d(0x240)]==_0x405e7d['coin']);_0x477a13?(_0x477a13[_0x1d697d(0x2a0)]+=_0x405e7d[_0x1d697d(0x2a0)],_0x477a13['number']==0x0&&(_0x3f680f=_0x3f680f['filter'](_0x4f1938=>{const _0x50caed=_0x1d697d;return _0x4f1938[_0x50caed(0x240)]!=_0x405e7d['coin'];}))):_0x3f680f[_0x1d697d(0x34d)](_0x405e7d);const _0x1eb8d0=_0x2cd2f1[_0x1d697d(0x268)](_0x7105b0=>_0x7105b0[_0x1d697d(0x247)]==_0x2e14a3);_0x1eb8d0[_0x1d697d(0x263)]=_0x3f680f;}else _0x2cd2f1[_0x1d697d(0x34d)]({'date':_0x2e14a3,'changes':[_0x405e7d]});}const _0xf360e8=_0x2cd2f1[_0x1d697d(0x268)](_0x3b7ae2=>_0x3b7ae2[_0x1d697d(0x247)]==_0x2e14a3);if(_0xf360e8){let _0x409e84=!![];_0xf360e8[_0x1d697d(0x263)][_0x1d697d(0x31b)](_0x3fa44f=>{const _0x1a296f=_0x1d697d;if(_0x3fa44f[_0x1a296f(0x2a0)]!=0x0)_0x409e84=![];}),_0x409e84&&(_0x2cd2f1=_0x2cd2f1[_0x1d697d(0x361)](_0x1259bf=>{const _0x158f92=_0x1d697d;return _0x1259bf[_0x158f92(0x247)]!=_0x2e14a3;}));}let _0x58403b=dbConfig[_0x1d697d(0x363)](_0x1d697d(0x2f6))[_0x1d697d(0x268)]({'botID':botID})[_0x1d697d(0x340)]();_0x58403b&&(dbConfig[_0x1d697d(0x363)](_0x1d697d(0x2f6))['find']({'botID':botID})[_0x1d697d(0x275)]({'liquidity':_0x2cd2f1})[_0x1d697d(0x321)](),config['liquidity']=_0x2cd2f1);logHistory('success','Portfolio\x20change\x20detected:\x20'+Math['abs'](_0x405e7d['number'])+'\x20'+_0x405e7d[_0x1d697d(0x240)]+'\x20'+(_0x405e7d['number']>0x0?_0x1d697d(0x33e):'removed')+_0x1d697d(0x214)),proxyEmit(_0x1d697d(0x320),emittedConfiguration());const _0x4f9e05=getNormalizedPerformance();emitPerformance(_0x4f9e05),getStartingBalances(_0x4f9e05),logger[_0x1d697d(0x2a7)](_0x1d697d(0x2fd));}else config[_0x1d697d(0x2fc)]==_0x1d697d(0x1f6)&&(config[_0x1d697d(0x27b)]?(await storeHeadless({'headless':![]}),logHistory(_0x1d697d(0x358),_0x1d697d(0x334)+Math[_0x1d697d(0x305)](_0x405e7d[_0x1d697d(0x2a0)])+'\x20'+_0x405e7d[_0x1d697d(0x240)]+'\x20'+(_0x405e7d['number']>0x0?_0x1d697d(0x33e):_0x1d697d(0x329))+_0x1d697d(0x1cf))):logger[_0x1d697d(0x2a7)](_0x1d697d(0x334)+Math['abs'](_0x405e7d[_0x1d697d(0x2a0)])+'\x20'+_0x405e7d[_0x1d697d(0x240)]+'\x20'+(_0x405e7d[_0x1d697d(0x2a0)]>0x0?_0x1d697d(0x33e):_0x1d697d(0x329))+_0x1d697d(0x22a)));}else logger[_0x1d697d(0x2a7)]('Fee\x20discount\x20refund\x20detected:\x20'+Math[_0x1d697d(0x305)](_0x405e7d[_0x1d697d(0x2a0)])+'\x20'+_0x405e7d[_0x1d697d(0x240)]+'\x20'+(_0x405e7d['number']>0x0?'added':_0x1d697d(0x329)));}else logger[_0x1d697d(0x2a7)](_0x1d697d(0x334)+Math[_0x1d697d(0x305)](_0x405e7d[_0x1d697d(0x2a0)])+'\x20'+_0x405e7d[_0x1d697d(0x240)]+'\x20'+(_0x405e7d[_0x1d697d(0x2a0)]>0x0?'added':'removed')+_0x1d697d(0x226));}currentCoins=_0xcfd5ef,currentCoinsAll=_0x23f8b8;}}catch(_0x46b569){if(!exchangeStopped)await handleError(_0x46b569,'detectLiquidityChange()');}transactionDetectionOngoing=![];}async function watchTransactions(){await sleep(0x14*0x3e8);while(!![]){!botPaused&&!blockTransactionDetection&&coinsLoaded?(detectLiquidityChange(),await sleep(watchTransactionsInterval)):await sleep(0x3e8);}}async function loadSymbols(){const _0x572552=_0x453176;try{markets=await exchange['loadMarkets'](!![]),allSymbols=[],Object[_0x572552(0x222)](markets)[_0x572552(0x31b)](_0x5d1503=>{const _0x1d19a2=_0x572552;_0x5d1503[0x1][_0x1d19a2(0x27e)]&&_0x5d1503[0x1][_0x1d19a2(0x30f)]&&allSymbols[_0x1d19a2(0x34d)](_0x5d1503[0x0]);});}catch(_0x487530){markets?logger[_0x572552(0x2a7)]('Error\x20in\x20loadSymbols():\x20'+_0x487530[_0x572552(0x1c5)]()):(loading[_0x572552(0x37c)]=!![],_0x487530['toString']()[_0x572552(0x355)]()[_0x572552(0x2d7)](_0x572552(0x2fe))||_0x487530[_0x572552(0x1c5)]()[_0x572552(0x355)]()['includes'](_0x572552(0x284))?(logHistory(_0x572552(0x359),_0x572552(0x2b4)),loading['error']='timestamp-issue'):handleErrorNoStop(_0x487530,_0x572552(0x319),!![]),logHistory(_0x572552(0x359),'Failed\x20to\x20load\x20market\x20data\x20-\x20bot\x20not\x20started'),logHistory('error',_0x572552(0x211)+loadCoinsRetryInterval/0xea60+'\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again'),logger[_0x572552(0x2a7)](_0x572552(0x22c),_0x487530),emitLoadingProgress(),botPaused=!![],await sleep(loadCoinsRetryInterval),restartBot());}}function validateSymbols(_0x231c77){const _0x262c11=_0x453176;let _0x960d1c=[];return _0x231c77[_0x262c11(0x31b)](_0x306d62=>{const _0x43fa92=_0x262c11;!allSymbols[_0x43fa92(0x2d7)](_0x306d62)?(logHistory(_0x43fa92(0x359),_0x43fa92(0x1f0)+_0x306d62+_0x43fa92(0x223)),loading[_0x43fa92(0x2bb)]=!![],emitLoadingProgress()):_0x960d1c[_0x43fa92(0x34d)](_0x306d62);}),_0x960d1c;}async function initclient(){const _0x4d3542=_0x453176;proxyEmit(_0x4d3542(0x320),emittedConfiguration()),proxyEmit(_0x4d3542(0x388),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x4d3542(0x2c6),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x527d50=getNormalizedPerformance();emitPerformance(_0x527d50),getStartingBalances(_0x527d50);}async function toggleBotMode(){const _0x38fa32=_0x453176;let _0x5903b4=dbConfig['get'](_0x38fa32(0x2f6))['find']({'botID':botID})[_0x38fa32(0x340)]();if(_0x5903b4){const _0x35c0af=!_0x5903b4['headless'];dbConfig['get'](_0x38fa32(0x2f6))[_0x38fa32(0x268)]({'botID':botID})[_0x38fa32(0x275)]({'headless':_0x35c0af})[_0x38fa32(0x321)](),config['headless']=_0x35c0af,proxyEmit(_0x38fa32(0x320),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x8e3c85=_0x453176;process['send']({'updatebotmanager':!![]},_0x5c60f7=>{}),logger[_0x8e3c85(0x2a7)](_0x8e3c85(0x234)+config[_0x8e3c85(0x27b)]);}async function loadCoins(_0x571ee7){const _0x177fbb=_0x453176;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x13c903,_0x4089be=0x0,_0xf67549=0x0;_0x571ee7[_0x177fbb(0x31b)](_0x1143d7=>{const _0x123373=_0x177fbb;loading[_0x123373(0x261)][_0x123373(0x34d)](_0x1143d7);}),loadingCanceled=![];let _0x33c57f=![];while(_0x13c903!=_0x571ee7[_0x177fbb(0x24f)]+maxLoadingProgress){_0x13c903=loadingProgress,_0x571ee7[_0x177fbb(0x31b)](_0x55d31=>{const _0x247145=_0x177fbb;if(gTicker[noslash(_0x55d31)]){loading[_0x247145(0x261)]=loading['remainingSymbols'][_0x247145(0x361)](_0xd18831=>_0xd18831!=_0x55d31);if(!watchedSymbols['includes'](_0x55d31))watchedSymbols[_0x247145(0x34d)](_0x55d31);_0x13c903++;}}),loading[_0x177fbb(0x2de)]=Math['round'](_0x13c903/(_0x571ee7[_0x177fbb(0x24f)]+maxLoadingProgress)*0x64);loading['progress']!=0x64&&(_0xf67549>0x1e*0x5&&(loading[_0x177fbb(0x2bb)]=!![],emitLoadingProgress()),_0xf67549>0x78*0x5&&!_0x33c57f&&(_0x33c57f=!![],logHistory(_0x177fbb(0x359),_0x177fbb(0x32a)+loading[_0x177fbb(0x261)][_0x177fbb(0x253)](',\x20')+_0x177fbb(0x2bf)),logHistory(_0x177fbb(0x359),_0x177fbb(0x211)+loadCoinsRetryInterval/0xea60+_0x177fbb(0x337)),loadingCanceled=!![],await sleep(loadCoinsRetryInterval),restartBot()));if(loadingCanceled){loading['cancel']=!![],emitLoadingProgress();break;}else _0x4089be!=loading[_0x177fbb(0x2de)]&&(_0x4089be=loading['progress'],emitLoadingProgress()),_0xf67549++,await sleep(0xc8);}_0x13c903==_0x571ee7[_0x177fbb(0x24f)]+maxLoadingProgress&&(coinsLoaded=!![],process['send']({'status':_0x177fbb(0x316),'live':_0x177fbb(0x1f4)},_0x1fba16=>{}),_0x33c57f&&logHistory('success','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started'));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x280905=_0x453176;proxyEmit('configuration',{...emittedConfiguration(),'configstate':_0x280905(0x1c6)});}function emitLoadingProgress(){proxyEmit('coin-loading-progress',loading);}async function getFiat(){const _0x324a73=_0x453176;let _0x38a51f=gTicker[stablecoins['eur'][_0x324a73(0x240)]],_0x5a67fb=gTicker[stablecoins[_0x324a73(0x367)]['coin']];return{'eur':Number(_0x38a51f),'usd':Number(_0x5a67fb)};}function capitalize(_0xe23e2b){const _0xfd8df2=_0x453176;return _0xe23e2b[_0xfd8df2(0x2a8)](0x0,0x1)['toUpperCase']()+_0xe23e2b[_0xfd8df2(0x2a8)](0x1);}function supportedExchanges(){const _0x5632f0=_0x453176,_0x4ee0db=['ws',_0x5632f0(0x294),_0x5632f0(0x1df),'watchTrades',_0x5632f0(0x2ae),'cancelOrder','createOrder',_0x5632f0(0x327),_0x5632f0(0x298)];let _0x4c89e5=[],_0x55904c=[],_0x1d4376=ccxt[_0x5632f0(0x34f)]['exchanges'];_0x1d4376[_0x5632f0(0x31b)](_0x584225=>{const _0x1df5ac=_0x5632f0;try{const _0x131209=new ccxt[(_0x1df5ac(0x34f))][_0x584225]();_0x55904c[_0x1df5ac(0x34d)](_0x131209);}catch(_0x105550){}}),_0x55904c[_0x5632f0(0x31b)](_0x59a3f1=>{const _0x154e8d=_0x5632f0;let _0x4479e7=0x0;_0x4ee0db[_0x154e8d(0x31b)](_0x2a72c0=>{const _0x4d1c62=_0x154e8d;_0x2a72c0 in _0x59a3f1[_0x4d1c62(0x219)]&&_0x59a3f1[_0x4d1c62(0x219)][_0x2a72c0]&&_0x4479e7++;}),_0x4479e7==_0x4ee0db['length']&&(!excludedExchanges[_0x154e8d(0x2d7)](_0x59a3f1['id'])&&_0x4c89e5[_0x154e8d(0x34d)](capitalize(_0x59a3f1['id'])));});let _0x33096d=[];return _0x1d4376[_0x5632f0(0x31b)](_0x14adac=>{const _0x112ab8=_0x5632f0;_0x14adac=capitalize(_0x14adac);if(!_0x4c89e5[_0x112ab8(0x2d7)](_0x14adac))_0x33096d['push'](_0x14adac);}),_0x4c89e5;}function setStartDatePerformance(){const _0x22107e=_0x453176;if(config&&config[_0x22107e(0x269)][0x0]['changes']['length']!=0x0){const _0x3ad897=config['liquidity'][0x0]['changes'];dbPerformance['get'](_0x22107e(0x380))[_0x22107e(0x268)]({'date':config[_0x22107e(0x25a)]})['assign']({'coins':_0x3ad897})['write']();}}function calculatePnL(_0x134027,_0x21f903,_0x22278b,_0x2ae7e1,_0x578402,_0x26c8a3){const _0x3e468a=_0x453176;!_0x134027[_0x3e468a(0x2d7)]('/'+config[_0x3e468a(0x260)])&&(_0x22278b=_0x22278b==_0x3e468a(0x2e3)?_0x3e468a(0x264):_0x3e468a(0x2e3));!_0x26c8a3[_0x21f903]&&(_0x26c8a3[_0x21f903]={'number':0x0,'sells':0x0,'buys':0x0,'breakeven':0x0,'realizedPnL':0x0});let _0x29cee9=0x0,_0x1a1b94,_0x31a451;if(_0x22278b==_0x3e468a(0x2e3))_0x31a451=_0x26c8a3[_0x21f903][_0x3e468a(0x2a0)]*_0x26c8a3[_0x21f903][_0x3e468a(0x2b6)]+_0x578402*_0x2ae7e1,_0x26c8a3[_0x21f903][_0x3e468a(0x2a0)]+=_0x2ae7e1,_0x26c8a3[_0x21f903]['breakeven']=_0x26c8a3[_0x21f903][_0x3e468a(0x2a0)]!=0x0?_0x31a451/_0x26c8a3[_0x21f903][_0x3e468a(0x2a0)]:0x0,_0x26c8a3[_0x21f903][_0x3e468a(0x201)]++;else _0x22278b==_0x3e468a(0x264)&&(_0x1a1b94=Math[_0x3e468a(0x1f8)](_0x26c8a3[_0x21f903]['number'],_0x2ae7e1),_0x29cee9=(_0x578402-_0x26c8a3[_0x21f903][_0x3e468a(0x2b6)])*_0x1a1b94,_0x31a451=Math[_0x3e468a(0x297)](_0x26c8a3[_0x21f903][_0x3e468a(0x2a0)]*_0x26c8a3[_0x21f903]['breakeven']-_0x1a1b94*_0x26c8a3[_0x21f903][_0x3e468a(0x2b6)],0x0),_0x26c8a3[_0x21f903]['number']-=_0x1a1b94,_0x26c8a3[_0x21f903][_0x3e468a(0x2b6)]=_0x26c8a3[_0x21f903]['number']!=0x0?_0x31a451/_0x26c8a3[_0x21f903][_0x3e468a(0x2a0)]:0x0,_0x26c8a3[_0x21f903]['realizedPnL']+=_0x29cee9,_0x26c8a3[_0x21f903][_0x3e468a(0x29b)]++);return _0x29cee9;}async function generatePnL(){const _0x35369b=_0x453176;pnlGenerationNeeded=![],logger[_0x35369b(0x2a7)](_0x35369b(0x2bd));const _0x3c9e38=dbLogs[_0x35369b(0x363)](_0x35369b(0x374))[_0x35369b(0x340)]();let _0x57e768={},_0x53a765=0x0,_0x582ae0=0x0,_0x11de91=config[_0x35369b(0x25a)];const _0x341370=fns[_0x35369b(0x32e)](_0x11de91,_0x35369b(0x20a),new Date()),_0x340e7a=new Date();let _0xecfed6=0x0;for(let _0x51f749=_0x341370;!fns[_0x35369b(0x1eb)](_0x340e7a,_0x51f749);_0x51f749=fns['addDays'](_0x51f749,0x1)){const _0x148afa=fns[_0x35369b(0x335)](_0x51f749,_0x35369b(0x20a));while(_0x53a765<_0x3c9e38[_0x35369b(0x24f)]){const _0x46aa25=new Date(_0x3c9e38[_0x53a765][_0x35369b(0x281)]);if(fns['isBefore'](_0x46aa25,_0x51f749))_0x53a765++;else{if(_0x3c9e38[_0x53a765]['time'][_0x35369b(0x2d7)](_0x148afa)){const _0x695a7f=_0x3c9e38[_0x53a765];if(_0x695a7f[_0x35369b(0x288)]===_0x35369b(0x37d)&&(_0x695a7f['event']['includes'](_0x35369b(0x289))||_0x695a7f['event'][_0x35369b(0x2d7)](_0x35369b(0x1f3)))){const _0x532752=_0x695a7f['event'][_0x35369b(0x2e2)](/([A-Z]+\/[A-Z]+) (sell|buy) #([\d.]+) @([\d.]+)/);if(_0x532752){const [,_0x518cd7,_0x12abce,_0xf067d2,_0x29f5c7]=_0x532752,_0x154e99=_0x518cd7[_0x35369b(0x2d7)]('/'+config[_0x35369b(0x260)])?_0x518cd7[_0x35369b(0x28b)]('/')[0x0]:_0x518cd7['split']('/')[0x1],_0x330764=calculatePnL(_0x518cd7,_0x154e99,_0x12abce,parseFloat(_0xf067d2),parseFloat(_0x29f5c7),_0x57e768);_0x582ae0+=_0x330764;}}_0x53a765++;}else break;}}dbPerformance[_0x35369b(0x363)](_0x35369b(0x380))[_0x35369b(0x268)]({'date':_0x148afa})[_0x35369b(0x275)]({'pnl':_0x582ae0})[_0x35369b(0x321)]();}dbCoinResults[_0x35369b(0x2db)]('coins',_0x57e768)['write'](),logger[_0x35369b(0x2a7)]('Generated\x20PnL\x20data');const _0x2633b2=getNormalizedPerformance();emitPerformance(_0x2633b2);}async function updatePnL(_0x31d743){const _0x50932a=_0x453176,{symbol:_0x20d2dc,coin:_0x3e74c7,amount:_0x21bd5b,price:_0x34064b,side:_0x196da8,reverse:_0x462fb2}=_0x31d743;let _0x2f7c33=dbCoinResults[_0x50932a(0x363)](_0x50932a(0x378))[_0x50932a(0x340)]();const _0x4100d5=calculatePnL(_0x20d2dc,_0x3e74c7,_0x196da8,_0x21bd5b,_0x34064b,_0x2f7c33);dbCoinResults[_0x50932a(0x2db)](_0x50932a(0x378),_0x2f7c33)['write']();const _0x290f0c=getTimeStamp()[_0x50932a(0x28b)]('\x20')[0x0];let _0x16adfa=dbPerformance['get'](_0x50932a(0x380))[_0x50932a(0x268)]({'date':_0x290f0c})[_0x50932a(0x340)]();_0x16adfa?(_0x16adfa[_0x50932a(0x2b7)]+=_0x4100d5,dbPerformance['get'](_0x50932a(0x380))[_0x50932a(0x268)]({'date':_0x290f0c})[_0x50932a(0x275)](_0x16adfa)[_0x50932a(0x321)]()):await storePerformance();const _0x39709f=getNormalizedPerformance();emitPerformance(_0x39709f);}async function validate24hChanges(){const _0x342ff8=_0x453176;for(const _0x23238c of currentCoins){if(_0x23238c[_0x342ff8(0x240)]!=config[_0x342ff8(0x260)]){let _0x4a5d1e;_0x23238c[_0x342ff8(0x2e9)]?_0x4a5d1e=formatResult((0x1/(gChange[_0x23238c[_0x342ff8(0x291)]]/0x64+0x1)-0x1)*0x64,0x3):_0x4a5d1e=gChange[_0x23238c[_0x342ff8(0x291)]],_0x4a5d1e<config['change24h']&&(logHistory(_0x342ff8(0x359),_0x23238c['coin']+'\x20has\x20a\x2024h\x20drop\x20of\x20'+_0x4a5d1e+'%'),logHistory(_0x342ff8(0x359),'Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses'),logHistory('error','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again'),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x50ecb9,_0x353564){const _0x5cc70a=_0x453176;if(!_0x50ecb9)return!![];const _0x558b2c=_0x353564[_0x5cc70a(0x28b)]('.'),_0x5dd7a2=_0x50ecb9[_0x5cc70a(0x28b)]('.');for(var _0x5d8c50=0x0;_0x5d8c50<_0x5dd7a2[_0x5cc70a(0x24f)];_0x5d8c50++){const _0x18607c=~~_0x5dd7a2[_0x5d8c50],_0x5d83bf=~~_0x558b2c[_0x5d8c50];if(_0x18607c<_0x5d83bf)return!![];if(_0x18607c>_0x5d83bf)return![];}return![];}async function oneTimeMigration(){const _0x61031a=_0x453176;let _0x33e72b=dbLogs['get'](_0x61031a(0x2ef))['value']();if(isOlderVersion(_0x33e72b,_0x61031a(0x203))){let _0x35ea88=[];const _0x226ce6=dbLogs[_0x61031a(0x363)](_0x61031a(0x374))[_0x61031a(0x340)]();_0x226ce6['forEach'](_0x1133fc=>{const _0x4053b4=_0x61031a;_0x35ea88[_0x4053b4(0x34d)]({'time':_0x1133fc['time'],'type':_0x1133fc['type'],'event':_0x1133fc[_0x4053b4(0x36b)]});}),dbLogs[_0x61031a(0x363)](_0x61031a(0x374))['assign'](_0x35ea88)[_0x61031a(0x321)]();}let _0x3fa2a0=dbConfig['get']('version')[_0x61031a(0x340)]();if(isOlderVersion(_0x3fa2a0,_0x61031a(0x203))){let _0x509018=dbConfig[_0x61031a(0x363)](_0x61031a(0x2f6))[_0x61031a(0x268)]({'botID':botID})[_0x61031a(0x340)]();if(_0x509018){let _0x5df1f0=[];_0x509018['portfolio'][_0x61031a(0x31b)](_0x2dccb3=>{const _0x96fd1=_0x61031a;_0x5df1f0[_0x96fd1(0x34d)]({'coin':_0x2dccb3[_0x96fd1(0x240)],'number':_0x2dccb3['startnumber'],'price':_0x2dccb3['startprice']}),delete _0x2dccb3['startnumber'],delete _0x2dccb3[_0x96fd1(0x24c)];});if(_0x5df1f0[_0x61031a(0x24f)]!==0x0)fs[_0x61031a(0x279)](configbackuppath+(_0x61031a(0x1fc)+botID+_0x61031a(0x21a)),JSON[_0x61031a(0x259)](_0x5df1f0,null,0x4),function(_0xc8ca93){if(_0xc8ca93){}});const _0x873746=(_0x3481b1,_0x283cf2)=>{let _0x311039=[];_0x283cf2['forEach'](_0xf4d3d0=>{const _0x4f020f=_0x4ad0,_0x8dc1b=_0x3481b1['find'](_0x30f966=>_0x30f966[_0x4f020f(0x240)]==_0xf4d3d0['coin']);if(!_0x8dc1b)_0x311039['push'](_0xf4d3d0);});let _0x3025bf=[];return _0x3481b1['forEach'](_0x4d0e42=>{const _0x2deff6=_0x4ad0,_0x50b573=_0x283cf2[_0x2deff6(0x268)](_0x3aeea0=>_0x3aeea0[_0x2deff6(0x240)]==_0x4d0e42['coin']);if(!_0x50b573||_0x50b573[_0x2deff6(0x2a0)]==0x0&&_0x4d0e42['number']!=0x0)_0x3025bf[_0x2deff6(0x34d)](_0x4d0e42);}),{'missingDay1':_0x311039,'notInDay2':_0x3025bf};},_0x2b7b5b=dbPerformance[_0x61031a(0x363)]('data')['cloneDeep']()[_0x61031a(0x340)]();if(_0x2b7b5b[_0x61031a(0x24f)]>0x1){const {missingDay1:_0x197d00,notInDay2:_0x557227}=_0x873746(_0x5df1f0,_0x2b7b5b[0x1]['coins']);_0x5df1f0=[..._0x5df1f0,..._0x197d00],_0x557227[_0x61031a(0x31b)](_0x4b9425=>{const _0x2ba75c=_0x61031a;let _0x4f0fba=_0x5df1f0[_0x2ba75c(0x258)](_0x1271e8=>_0x1271e8['coin']==_0x4b9425[_0x2ba75c(0x240)]);_0x4f0fba!=-0x1&&_0x5df1f0[_0x2ba75c(0x362)](_0x4f0fba,0x1);});}_0x5df1f0[_0x61031a(0x210)]((_0x2f6e37,_0x4600e3)=>_0x2f6e37['coin']>_0x4600e3[_0x61031a(0x240)]?0x1:_0x4600e3[_0x61031a(0x240)]>_0x2f6e37['coin']?-0x1:0x0);let _0x343855=[{'date':_0x509018[_0x61031a(0x25a)],'changes':_0x5df1f0}];_0x2b7b5b[_0x61031a(0x24f)]>0x2&&_0x2b7b5b['forEach']((_0x1d8e5f,_0x1f8073)=>{const _0x43e138=_0x61031a;if(_0x1f8073>0x0&&_0x1f8073<_0x2b7b5b[_0x43e138(0x24f)]-0x1){const {missingDay1:_0x229e76,notInDay2:_0xa781c2}=_0x873746(_0x2b7b5b[_0x1f8073][_0x43e138(0x378)],_0x2b7b5b[_0x1f8073+0x1][_0x43e138(0x378)]);_0x5df1f0=[],(_0x229e76[_0x43e138(0x24f)]!=0x0||_0xa781c2[_0x43e138(0x24f)]!=0x0)&&(_0x229e76[_0x43e138(0x24f)]!=0x0&&_0x5df1f0['push'](..._0x229e76),_0xa781c2[_0x43e138(0x24f)]!=0x0&&(_0xa781c2[_0x43e138(0x31b)](_0x3bb444=>{const _0x2273ce=_0x43e138;_0x3bb444[_0x2273ce(0x2a0)]=-_0x3bb444[_0x2273ce(0x2a0)];}),_0x5df1f0[_0x43e138(0x34d)](..._0xa781c2)),_0x5df1f0[_0x43e138(0x210)]((_0x33ef84,_0x9a68ba)=>_0x33ef84[_0x43e138(0x240)]>_0x9a68ba[_0x43e138(0x240)]?0x1:_0x9a68ba[_0x43e138(0x240)]>_0x33ef84[_0x43e138(0x240)]?-0x1:0x0),_0x343855[_0x43e138(0x34d)]({'date':_0x2b7b5b[_0x1f8073+0x1][_0x43e138(0x247)],'changes':_0x5df1f0}));}}),dbConfig[_0x61031a(0x363)](_0x61031a(0x2f6))['find']({'botID':botID})[_0x61031a(0x275)]({..._0x509018,'liquidity':_0x343855})[_0x61031a(0x321)]();}}if(isOlderVersion(_0x3fa2a0,_0x61031a(0x1d1))){let _0x17030e=dbConfig['get'](_0x61031a(0x2f6))[_0x61031a(0x268)]({'botID':botID})[_0x61031a(0x340)]();if(_0x17030e){const _0x43e2fd=_0x17030e[_0x61031a(0x25c)],_0x47f3fa=_0x43e2fd?capitalize(_0x43e2fd):'Binance';dbConfig[_0x61031a(0x363)](_0x61031a(0x2f6))[_0x61031a(0x268)]({'botID':botID})['assign']({'exchange':_0x47f3fa})[_0x61031a(0x321)]();}}if(isOlderVersion(_0x3fa2a0,_0x61031a(0x27f))){let _0x4a171c=dbConfig['get'](_0x61031a(0x2f6))[_0x61031a(0x268)]({'botID':botID})[_0x61031a(0x340)]();if(_0x4a171c){const _0x3e879f=_0x4a171c['marketcapEnabled'],_0x27dcb9=_0x3e879f?'marketcap':![];dbConfig[_0x61031a(0x363)]('bot')[_0x61031a(0x268)]({'botID':botID})[_0x61031a(0x275)]({'marketcapEnabled':_0x27dcb9})[_0x61031a(0x321)]();}}if(isOlderVersion(_0x3fa2a0,_0x61031a(0x32d))){let _0x1580d3=dbConfig[_0x61031a(0x363)]('bot')[_0x61031a(0x268)]({'botID':botID})['value']();if(_0x1580d3){const _0x30931a=_0x1580d3[_0x61031a(0x2fc)],_0x57c89d=_0x30931a?_0x61031a(0x32b):![];dbConfig[_0x61031a(0x363)](_0x61031a(0x2f6))[_0x61031a(0x268)]({'botID':botID})[_0x61031a(0x275)]({'autoliquidity':_0x57c89d})[_0x61031a(0x321)]();}}let _0x17ef48=dbPerformance['get']('version')[_0x61031a(0x340)]();isOlderVersion(_0x17ef48,_0x61031a(0x203))&&setStartDatePerformance();let _0x9bb9c7=dbCoinResults[_0x61031a(0x363)](_0x61031a(0x2ef))[_0x61031a(0x340)]();if(isOlderVersion(_0x9bb9c7,_0x61031a(0x1de))){let _0x12475a=dbCoinResults[_0x61031a(0x363)](_0x61031a(0x378))[_0x61031a(0x340)]();if(_0x12475a[_0x61031a(0x24f)]!=0x0)pnlGenerationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x8b2dcf=_0x453176;dbConfig[_0x8b2dcf(0x2db)](_0x8b2dcf(0x2ef),serverversion)[_0x8b2dcf(0x321)](),dbPerformance[_0x8b2dcf(0x2db)](_0x8b2dcf(0x2ef),serverversion)[_0x8b2dcf(0x321)](),dbLogs[_0x8b2dcf(0x2db)](_0x8b2dcf(0x2ef),serverversion)[_0x8b2dcf(0x321)](),dbCoinResults['set'](_0x8b2dcf(0x2ef),serverversion)[_0x8b2dcf(0x321)]();}function getConfiguration(_0x463149){const _0x266cd5=_0x453176;let _0xa101a9=dbConfig['get'](_0x266cd5(0x2f6))[_0x266cd5(0x268)]({'botID':_0x463149})[_0x266cd5(0x340)]();if(_0xa101a9){let _0x2aaa0a=![];typeof _0xa101a9['threshold']==_0x266cd5(0x2c5)&&(_0xa101a9={..._0xa101a9,'threshold':Number(_0xa101a9[_0x266cd5(0x2b9)])},_0x2aaa0a=!![]),_0xa101a9[_0x266cd5(0x23f)]==undefined&&(_0xa101a9={..._0xa101a9,'change24h':-0x14},_0x2aaa0a=!![]),_0xa101a9[_0x266cd5(0x2f9)]==undefined&&(_0xa101a9={..._0xa101a9,'fiat':_0x266cd5(0x27a)},_0x2aaa0a=!![]),_0xa101a9[_0x266cd5(0x1da)]==undefined&&(_0xa101a9={..._0xa101a9,'onepagemode':settings['onepagemode']},_0x2aaa0a=!![]),_0xa101a9[_0x266cd5(0x2ec)]==undefined&&(_0xa101a9={..._0xa101a9,'colorscheme':_0x266cd5(0x242)},_0x2aaa0a=!![]),_0xa101a9[_0x266cd5(0x2fc)]==undefined&&(_0xa101a9={..._0xa101a9,'autoliquidity':_0x266cd5(0x32b)},_0x2aaa0a=!![]),_0xa101a9['marketcapApi']==undefined&&(_0xa101a9={..._0xa101a9,'marketcapApi':settings[_0x266cd5(0x235)]?!![]:![]},_0x2aaa0a=!![]),_0xa101a9[_0x266cd5(0x306)]==undefined&&(_0xa101a9={..._0xa101a9,'marketcapEnabled':![]},_0x2aaa0a=!![]),_0xa101a9[_0x266cd5(0x37f)]==undefined&&(_0xa101a9={..._0xa101a9,'sandbox':![]},_0x2aaa0a=!![]),_0x2aaa0a&&(_0xa101a9={'botID':_0xa101a9[_0x266cd5(0x354)],'exchange':_0xa101a9['exchange'],'apiKey':_0xa101a9[_0x266cd5(0x1ed)],'apiSecret':_0xa101a9[_0x266cd5(0x1f7)],'apiPassword':_0xa101a9['apiPassword'],'basecoin':_0xa101a9[_0x266cd5(0x260)],'botname':_0xa101a9[_0x266cd5(0x26b)],'showname':_0xa101a9[_0x266cd5(0x1e5)],'threshold':_0xa101a9[_0x266cd5(0x2b9)],'ordertype':_0xa101a9[_0x266cd5(0x1cd)],'timeout':_0xa101a9[_0x266cd5(0x2bb)],'fiat':_0xa101a9['fiat'],'startdate':_0xa101a9['startdate'],'recreate':_0xa101a9[_0x266cd5(0x1e8)],'timeshift':_0xa101a9[_0x266cd5(0x230)],'onepagemode':_0xa101a9[_0x266cd5(0x1da)],'headless':_0xa101a9[_0x266cd5(0x27b)],'cooldown':_0xa101a9[_0x266cd5(0x267)],'change24h':_0xa101a9[_0x266cd5(0x23f)],'emojibuy':_0xa101a9[_0x266cd5(0x2dc)],'emojisell':_0xa101a9[_0x266cd5(0x28d)],'colorscheme':_0xa101a9[_0x266cd5(0x2ec)],'marketcapApi':_0xa101a9[_0x266cd5(0x235)],'marketcapEnabled':_0xa101a9[_0x266cd5(0x306)],'sandbox':_0xa101a9[_0x266cd5(0x37f)],'portfolio':_0xa101a9[_0x266cd5(0x2d0)],'autoliquidity':_0xa101a9[_0x266cd5(0x2fc)],'liquidity':_0xa101a9[_0x266cd5(0x269)],'openOrders':_0xa101a9['openOrders']},dbConfig['get'](_0x266cd5(0x2f6))['remove']()['write'](),dbConfig[_0x266cd5(0x363)]('bot')[_0x266cd5(0x34d)](_0xa101a9)[_0x266cd5(0x321)]());}else _0xa101a9={'botID':_0x463149,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x266cd5(0x2ce)+_0x463149,'showname':![],'threshold':0x3,'ordertype':_0x266cd5(0x341),'timeout':0x14,'fiat':'USD','startdate':getDate(),'recreate':![],'timeshift':settings[_0x266cd5(0x230)],'onepagemode':settings[_0x266cd5(0x1da)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x266cd5(0x242),'marketcapApi':settings[_0x266cd5(0x235)]?!![]:![],'marketcapEnabled':![],'sandbox':![],'portfolio':[],'autoliquidity':'update-liquidity','liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0xa101a9;}function emittedConfiguration(){const _0x3959af=_0x453176;let _0x2a40ac;if(config[_0x3959af(0x1ed)]=='')_0x2a40ac={...config,'configstate':'initial'};else config[_0x3959af(0x1ed)]==_0x3959af(0x27d)?_0x2a40ac={...config,'configstate':_0x3959af(0x26a)}:(_0x2a40ac={...config,'apiKey':'************','apiSecret':'************'},config[_0x3959af(0x1ff)]&&(_0x2a40ac[_0x3959af(0x1ff)]=_0x3959af(0x2c8)));return _0x2a40ac['enableFiatToggle']=enableFiatToggle,_0x2a40ac;}function getSettings(){const _0x6e1ef3=_0x453176;return dbSettings[_0x6e1ef3(0x363)](_0x6e1ef3(0x382))['value']();}function getSecure(){const _0x23c3a4=_0x453176;return dbSecure[_0x23c3a4(0x363)](_0x23c3a4(0x322))['value']()||{};}function updateTimeshift(_0x42d080){const _0x1e4795=_0x453176;let _0x15eec6=dbConfig[_0x1e4795(0x363)](_0x1e4795(0x2f6))[_0x1e4795(0x268)]({'botID':botID})[_0x1e4795(0x340)]();_0x15eec6&&dbConfig[_0x1e4795(0x363)](_0x1e4795(0x2f6))[_0x1e4795(0x268)]({'botID':botID})[_0x1e4795(0x275)]({'timeshift':_0x42d080})[_0x1e4795(0x321)](),config[_0x1e4795(0x230)]=_0x42d080,proxyEmit(_0x1e4795(0x320),emittedConfiguration());}function updateOnepagemode(_0xb01829){const _0x49003d=_0x453176;let _0x4f0dd7=dbConfig['get'](_0x49003d(0x2f6))['find']({'botID':botID})[_0x49003d(0x340)]();_0x4f0dd7&&dbConfig['get'](_0x49003d(0x2f6))[_0x49003d(0x268)]({'botID':botID})[_0x49003d(0x275)]({'onepagemode':_0xb01829})[_0x49003d(0x321)](),config[_0x49003d(0x1da)]=_0xb01829,proxyEmit(_0x49003d(0x320),emittedConfiguration());}function updateMarketcapApi(_0x21f0ea){const _0x24f99b=_0x453176,_0x4bb345=_0x21f0ea?!![]:![];let _0x5395cf=dbConfig[_0x24f99b(0x363)](_0x24f99b(0x2f6))[_0x24f99b(0x268)]({'botID':botID})[_0x24f99b(0x340)]();_0x5395cf&&dbConfig[_0x24f99b(0x363)](_0x24f99b(0x2f6))[_0x24f99b(0x268)]({'botID':botID})['assign']({'marketcapApi':_0x4bb345})[_0x24f99b(0x321)](),config[_0x24f99b(0x235)]=_0x4bb345,getMarketCap(),proxyEmit(_0x24f99b(0x320),emittedConfiguration());}async function storeConfiguration(_0x402243){const _0x28a6cb=_0x453176;logger[_0x28a6cb(0x2a7)]('Saving\x20configuration');_0x402243['configstate']&&delete _0x402243[_0x28a6cb(0x1c9)];if(pidBalances)clearTimeout(pidBalances);setBlockTransactionDetection(!![]);let _0x158ba8=![],_0x21d0e5=![],_0x4268d2=[];_0x402243[_0x28a6cb(0x2d0)][_0x28a6cb(0x31b)](_0x1b353f=>{const _0x499c5f=_0x28a6cb;if(!_0x1b353f[_0x499c5f(0x1e1)]&&_0x1b353f[_0x499c5f(0x240)]!=_0x402243[_0x499c5f(0x260)])_0x4268d2[_0x499c5f(0x34d)](_0x1b353f['symbol']);}),_0x4268d2[_0x28a6cb(0x31b)](_0x4410fe=>{const _0x1abe74=_0x28a6cb,_0x102bf3=currentCoins[_0x1abe74(0x268)](_0x375970=>_0x375970['symbol']==_0x4410fe);!_0x102bf3&&(_0x158ba8=!![]);}),currentCoins[_0x28a6cb(0x31b)](_0x33065c=>{const _0x16e646=_0x28a6cb;if(_0x33065c['coin']!=config['basecoin']){const _0x32140b=_0x4268d2[_0x16e646(0x268)](_0x1626d4=>_0x1626d4==_0x33065c[_0x16e646(0x291)]);!_0x32140b&&(_0x158ba8=!![]);}}),_0x402243[_0x28a6cb(0x2d0)]['forEach'](_0x495cf4=>{const _0x1dee7a=_0x28a6cb,_0x4e9180=config['portfolio'][_0x1dee7a(0x268)](_0xeaf239=>_0xeaf239[_0x1dee7a(0x240)]==_0x495cf4['coin']);if(_0x4e9180&&_0x495cf4['offset']!=_0x4e9180['offset'])_0x21d0e5=!![];});let _0xbf0498=dbConfig['get'](_0x28a6cb(0x2f6))['find']({'botID':botID})['value']();_0x402243={..._0x402243,'apiKey':decryptRSA(secure['privateKey'],_0x402243[_0x28a6cb(0x1ed)]),'apiSecret':decryptRSA(secure[_0x28a6cb(0x384)],_0x402243[_0x28a6cb(0x1f7)])};_0x402243[_0x28a6cb(0x1ff)]&&(_0x402243[_0x28a6cb(0x1ff)]=decryptRSA(secure[_0x28a6cb(0x384)],_0x402243[_0x28a6cb(0x1ff)]));let _0x171bbf=![];if(_0xbf0498){_0x402243[_0x28a6cb(0x1ed)]=='************'?_0x402243['apiKey']=config[_0x28a6cb(0x1ed)]:_0x171bbf=!![];_0x402243[_0x28a6cb(0x1f7)]=='************'?_0x402243[_0x28a6cb(0x1f7)]=config[_0x28a6cb(0x1f7)]:_0x171bbf=!![];if(_0x402243[_0x28a6cb(0x1ff)]==_0x28a6cb(0x2c8))_0x402243[_0x28a6cb(0x1ff)]=config[_0x28a6cb(0x1ff)];else{if(_0x402243[_0x28a6cb(0x1ff)])_0x171bbf=!![];}dbConfig[_0x28a6cb(0x363)](_0x28a6cb(0x2f6))[_0x28a6cb(0x268)]({'botID':botID})[_0x28a6cb(0x275)](_0x402243)['write']();}else dbConfig[_0x28a6cb(0x363)]('bot')[_0x28a6cb(0x34d)](_0x402243)['write'](),_0x171bbf=!![],process['send']({'status':_0x28a6cb(0x316),'live':'running'},_0x624048=>{});process[_0x28a6cb(0x2c4)]({'botname':_0x402243['botname']},_0x18e011=>{}),config={..._0x402243},updateBotManager(),proxyEmit(_0x28a6cb(0x227)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x171bbf)await reset(!![]);else _0x158ba8||_0x21d0e5?await reset(![]):getBalances();setBlockTransactionDetection(![]);}async function storeHeadless(_0x5c2a44){const _0x3ba5a5=_0x453176,_0x560372={...config,'headless':_0x5c2a44[_0x3ba5a5(0x27b)]};let _0x290d65=dbConfig[_0x3ba5a5(0x363)]('bot')[_0x3ba5a5(0x268)]({'botID':botID})['value']();_0x290d65&&dbConfig[_0x3ba5a5(0x363)](_0x3ba5a5(0x2f6))['find']({'botID':botID})[_0x3ba5a5(0x275)](_0x560372)['write'](),config={..._0x560372},updateBotManager(),proxyEmit(_0x3ba5a5(0x320),emittedConfiguration());}async function storeFiat(_0x4c4328){const _0x2cc97f=_0x453176,_0x36a521={...config,'fiat':_0x4c4328};let _0x4ad656=dbConfig['get'](_0x2cc97f(0x2f6))[_0x2cc97f(0x268)]({'botID':botID})[_0x2cc97f(0x340)]();_0x4ad656&&dbConfig['get'](_0x2cc97f(0x2f6))[_0x2cc97f(0x268)]({'botID':botID})[_0x2cc97f(0x275)](_0x36a521)[_0x2cc97f(0x321)](),config={..._0x36a521},proxyEmit('configuration',emittedConfiguration());}function resetHistory(){const _0x598b7e=_0x453176;logger['full']('Resetting\x20bot\x20history');try{if(fs[_0x598b7e(0x26e)](path[_0x598b7e(0x253)](configpath,_0x598b7e(0x22d)+botID+'-events.json')))fs[_0x598b7e(0x2d6)](path['join'](configpath,'bot-'+botID+_0x598b7e(0x274)));if(fs[_0x598b7e(0x26e)](path[_0x598b7e(0x253)](configpath,_0x598b7e(0x22d)+botID+_0x598b7e(0x1e0))))fs[_0x598b7e(0x2d6)](path[_0x598b7e(0x253)](configpath,'bot-'+botID+_0x598b7e(0x1e0)));if(fs[_0x598b7e(0x26e)](path[_0x598b7e(0x253)](configpath,_0x598b7e(0x22d)+botID+_0x598b7e(0x22e))))fs['unlinkSync'](path[_0x598b7e(0x253)](configpath,_0x598b7e(0x22d)+botID+_0x598b7e(0x22e)));}catch(_0x2f764a){if(_0x2f764a)logger['full'](_0x598b7e(0x24a),_0x2f764a);}const _0x47ed9d=getDate();let _0x552d89=[];currentCoins['forEach'](_0x4e65a8=>{const _0x1df7f6=_0x598b7e;_0x552d89[_0x1df7f6(0x34d)]({'coin':_0x4e65a8['coin'],'number':_0x4e65a8[_0x1df7f6(0x2a0)],'price':_0x4e65a8[_0x1df7f6(0x218)]});});let _0x2ef0d3=dbConfig[_0x598b7e(0x363)]('bot')['find']({'botID':botID})['value']();_0x2ef0d3&&(dbConfig['get'](_0x598b7e(0x2f6))[_0x598b7e(0x268)]({'botID':botID})[_0x598b7e(0x275)]({'liquidity':[{'date':_0x47ed9d,'changes':_0x552d89}]})['write'](),config[_0x598b7e(0x269)]=[]),restartBot(!![]);}function noslash(_0x3886d0){const _0x2ff934=_0x453176;return _0x3886d0[_0x2ff934(0x22f)]('/','');}function updateHighestFee(_0x467ea0){const _0x12332e=_0x453176;if(_0x467ea0['reverse']){let _0x5c6f82={'filled':_0x467ea0['filled']*_0x467ea0['price'],'amount':_0x467ea0[_0x12332e(0x2b2)]*_0x467ea0[_0x12332e(0x2df)],'side':_0x467ea0['side']=='sell'?_0x12332e(0x2e3):'sell','price':0x1/_0x467ea0['price']};_0x467ea0={..._0x467ea0,..._0x5c6f82};}const _0x5cdfde=defaultFee*_0x467ea0['filled']*_0x467ea0['price'];lastFees['recent20']['length']===0x14&&lastFees['recent20'][_0x12332e(0x2f4)](),lastFees['recent20'][_0x12332e(0x34d)](_0x5cdfde),lastFees[_0x12332e(0x2a9)]=Math[_0x12332e(0x297)](...lastFees['recent20']);}async function updateNumberCoinsCcxt(_0x4a2560){const _0x3edd25=_0x453176;logger['debug']('0\x20-\x20EXECUTION:\x20'+_0x4a2560[_0x3edd25(0x291)]+'\x20|\x20'+_0x4a2560[_0x3edd25(0x23d)]+_0x3edd25(0x2fa)+_0x4a2560[_0x3edd25(0x2b2)]+'\x20/\x20'+_0x4a2560[_0x3edd25(0x2b0)]+_0x3edd25(0x2fa)+_0x4a2560['id']);let _0xb098fa=_0x4a2560[_0x3edd25(0x23d)],_0x4ef1fa=![];currentCoins[_0x3edd25(0x31b)](_0x182772=>{const _0x8cab31=_0x3edd25;_0x182772['symbol']==_0x4a2560[_0x8cab31(0x291)]&&(_0x4ef1fa=!![]);});if(!_0x4ef1fa)return;const _0x226880=currentCoins['find'](_0xc8303b=>_0xc8303b[_0x3edd25(0x291)]==_0x4a2560[_0x3edd25(0x291)]),_0x3e1016=_0x226880[_0x3edd25(0x240)],_0x3aaae3=_0x3cbe9e=>{const _0x115c1d=_0x3edd25,_0x1fee19=currentCoins[_0x115c1d(0x268)](_0x43b58e=>_0x43b58e['symbol']==_0x4a2560[_0x115c1d(0x291)]);if(_0x1fee19)_0x1fee19[_0x115c1d(0x228)]=_0x3cbe9e;};let _0x2ad937=![];for(const _0x1df169 of lastOrders){const _0x53f124=0x64,_0x247ca2=0x1388;let _0x2ab4d9=0x0;while(!_0x1df169['orderId']&&_0x2ab4d9*_0x53f124<_0x247ca2){_0x2ab4d9++,await sleep(_0x53f124);}if(_0x2ab4d9>0x0)logger[_0x3edd25(0x2a7)](_0x3edd25(0x333)+_0x2ab4d9*_0x53f124/0x3e8+_0x3edd25(0x1d6));_0x1df169['orderId']==_0x4a2560['id']&&(_0x2ad937=!![]);}if(_0xb098fa==_0x3edd25(0x29f)){_0x3aaae3(_0x3edd25(0x29f));if(_0x4a2560['filled']>0x0&&_0x4a2560['filled']<_0x4a2560['amount']){if(_0x2ad937){setBlockTransactionDetection(!![]),logger[_0x3edd25(0x2a7)](_0x3edd25(0x278)+_0x4a2560[_0x3edd25(0x2b2)]+')\x20known\x20order:\x20'+_0x4a2560['id']);const _0x43cee1=await getCoins(balanceUpdateDelay,undefined,undefined,_0x3e1016);[currentCoins,currentCoinsAll]=_0x43cee1,setBlockTransactionDetection(![]);}else logger[_0x3edd25(0x2a7)](_0x3edd25(0x278)+_0x4a2560[_0x3edd25(0x2b2)]+_0x3edd25(0x209)+_0x4a2560['id']),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay);}}else{if(_0xb098fa=='canceled'){_0x3aaae3('canceled'),lastOrders=lastOrders['filter'](_0x5c56f4=>_0x5c56f4[_0x3edd25(0x291)]!=_0x4a2560[_0x3edd25(0x291)]);const _0x441102=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x441102,setBlockTransactionDetection(![]),await getOpenOrders(),handleOpenOrders();}else{if(_0xb098fa==_0x3edd25(0x33f)){if(lastOrders)for(const _0x4e7c86 of lastOrders){if(_0x4e7c86[_0x3edd25(0x28e)]==_0x4a2560['id']){logger[_0x3edd25(0x2a7)]('1\x20-\x20FILLED\x20known\x20order:\x20'+_0x4a2560['id']),_0x2ad937=!![];if(_0x4e7c86[_0x3edd25(0x2b2)]==0x0){setBlockTransactionDetection(!![]),logger['debug'](_0x3edd25(0x29d)+_0x4a2560['id']);if(_0x4a2560['average'])_0x4e7c86[_0x3edd25(0x2df)]=_0x4a2560[_0x3edd25(0x344)];else{if(_0x4a2560['price'])_0x4e7c86[_0x3edd25(0x2df)]=_0x4a2560[_0x3edd25(0x2df)];else{}}_0x4e7c86[_0x3edd25(0x2b2)]=_0x4a2560[_0x3edd25(0x2b2)],updateHighestFee(_0x4e7c86);const _0x8a0b6c=await getCoins(balanceUpdateDelay,undefined,undefined,_0x3e1016);[currentCoins,currentCoinsAll]=_0x8a0b6c,setBlockTransactionDetection(![]),await validateOrders(),_0x3aaae3(_0x3edd25(0x2b2)),_0x4e7c86[_0x3edd25(0x1ca)]={'currency':_0x4a2560[_0x3edd25(0x1ca)]?_0x4a2560[_0x3edd25(0x1ca)][_0x3edd25(0x2e4)]:null,'cost':_0x4a2560[_0x3edd25(0x1ca)]?_0x4a2560['fee'][_0x3edd25(0x21c)]:0x0},await updatePnL(_0x4e7c86);}}}!_0x2ad937&&(logger[_0x3edd25(0x2a7)]('1\x20-\x20FILLED\x20unknown\x20order:\x20'+_0x4a2560['id']),_0x3aaae3(_0x3edd25(0x2b2)),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay),await updateOpenOrders(),handleOpenOrders());}}}if(lastBalances){let _0xbc7568=JSON[_0x3edd25(0x32e)](lastBalances[_0x3edd25(0x2d0)]);const _0x10bac1=_0xbc7568[_0x3edd25(0x268)](_0xec3042=>_0xec3042[_0x3edd25(0x291)]==_0x4a2560[_0x3edd25(0x291)]);if(_0x10bac1){if(_0xb098fa==_0x3edd25(0x29f))_0x10bac1['orderstatus']=_0x10bac1[_0x3edd25(0x228)]=='filled'?'filled':_0x3edd25(0x29f);else{if(_0xb098fa==_0x3edd25(0x29e))_0x10bac1['orderstatus']=_0x10bac1[_0x3edd25(0x228)]=='filled'?_0x3edd25(0x2b2):_0x3edd25(0x29e);else _0xb098fa=='closed'&&(_0x10bac1[_0x3edd25(0x228)]=_0x3edd25(0x2b2));}}lastBalances={...lastBalances,'portfolio':JSON[_0x3edd25(0x259)](_0xbc7568)},proxyEmit(_0x3edd25(0x2c6),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x468527=_0x453176;await getOpenOrders();let _0x18eaf7=![];currentCoins[_0x468527(0x31b)](_0x1a7269=>{const _0x3d7ef7=_0x468527;_0x18eaf7=allOpenOrders[_0x3d7ef7(0x268)](_0x48963a=>_0x48963a[_0x3d7ef7(0x291)]==_0x1a7269[_0x3d7ef7(0x291)]),_0x1a7269['orderstatus']=_0x18eaf7?_0x3d7ef7(0x29f):_0x3d7ef7(0x2d5);});}async function fetchBalance(_0x38c549=!![]){const _0x114b7d=_0x453176;let _0x56c0b8,_0x1a31c9;try{return _0x56c0b8=await exchange[_0x114b7d(0x298)](),_0x1a31c9=_0x56c0b8[_0x114b7d(0x349)],_0x1a31c9;}catch(_0x158ce1){return!_0x38c549?handleErrorNoStop(_0x158ce1,_0x114b7d(0x270)):await handleError(_0x158ce1,_0x114b7d(0x270)),![];}}async function getCoins(_0x37fc73=0x0,_0x219734=!![],_0x48ac9d=config['basecoin'],_0x5b84ac){const _0x2cdc4f=_0x453176;let _0x59ba76=[],_0x227f1d=[],_0x2b53ec=[],_0x3c06b6;if(_0x37fc73)await sleep(_0x37fc73);if(botPaused)return[currentCoins,currentCoinsAll];let _0x2c3727=![],_0x57955e=0x0,_0x1eaacb,_0x2784d8;_0x5b84ac&&(_0x1eaacb=currentCoins[_0x2cdc4f(0x268)](_0x4bd49f=>_0x4bd49f[_0x2cdc4f(0x240)]==_0x5b84ac),_0x1eaacb&&(_0x2784d8=_0x1eaacb[_0x2cdc4f(0x26d)],delete _0x1eaacb[_0x2cdc4f(0x26d)]));while(!_0x2c3727){_0x3c06b6=await fetchBalance(_0x219734);if(_0x3c06b6){if(_0x5b84ac){if(_0x3c06b6[_0x5b84ac]!=_0x2784d8)logger['debug'](_0x2cdc4f(0x386)+_0x5b84ac+':\x20'+_0x3c06b6[_0x5b84ac]+'\x20('+_0x2784d8+')'),_0x2c3727=!![];else{logger['debug'](_0x2cdc4f(0x373)+_0x5b84ac+':\x20'+_0x3c06b6[_0x5b84ac]+'\x20('+_0x2784d8+')'),_0x57955e++;if(_0x57955e<balanceUpdateRetries)await sleep(balanceUpdateDelay);else{logger['debug']('Stopped\x20fetching\x20balance\x20after\x20'+_0x57955e+_0x2cdc4f(0x302));break;}}}else break;}else return[currentCoins,currentCoinsAll];}for(const [_0x202c32,_0x3abb59]of Object[_0x2cdc4f(0x222)](_0x3c06b6)){_0x2b53ec['push'](_0x202c32);}config[_0x2cdc4f(0x2d0)][_0x2cdc4f(0x31b)](_0x4cfbb5=>{const _0x59fa11=_0x2cdc4f;!_0x2b53ec[_0x59fa11(0x2d7)](_0x4cfbb5[_0x59fa11(0x240)])&&(_0x3c06b6[_0x4cfbb5['coin']]=0x0);});if(_0x48ac9d=='')for(const [_0x23bf65,_0x5159b4]of Object[_0x2cdc4f(0x222)](_0x3c06b6)){_0x5159b4!=0x0&&_0x59ba76[_0x2cdc4f(0x34d)]({'coin':_0x23bf65});}else for(const [_0x18023f,_0x338c40]of Object[_0x2cdc4f(0x222)](_0x3c06b6)){const _0x5c3d82=config[_0x2cdc4f(0x2d0)][_0x2cdc4f(0x268)](_0x18752c=>_0x18752c['coin']==_0x18023f),_0x19bbd5=_0x18023f+'/'+_0x48ac9d,_0x32ba23=_0x48ac9d+'/'+_0x18023f,_0x1a1204=currentCoins['find'](_0x5d729a=>_0x5d729a[_0x2cdc4f(0x240)]==_0x18023f);if((_0x338c40!=0x0||_0x5c3d82)&&(allSymbols[_0x2cdc4f(0x2d7)](_0x19bbd5)||_0x18023f==_0x48ac9d))_0x1a1204?_0x59ba76[_0x2cdc4f(0x34d)]({..._0x1a1204,'number':Math[_0x2cdc4f(0x297)](_0x338c40+(_0x5c3d82&&_0x5c3d82['offset']||0x0),0x0)}):_0x59ba76['push']({'coin':_0x18023f,'symbol':_0x19bbd5,'reverse':![],'number':Math[_0x2cdc4f(0x297)](_0x338c40+(_0x5c3d82&&_0x5c3d82[_0x2cdc4f(0x31e)]||0x0),0x0),'orderstatus':_0x2cdc4f(0x2d5)});else{if((_0x338c40!=0x0||_0x5c3d82)&&allSymbols['includes'](_0x32ba23))_0x1a1204?_0x59ba76[_0x2cdc4f(0x34d)]({..._0x1a1204,'number':Math[_0x2cdc4f(0x297)](_0x338c40+(_0x5c3d82&&_0x5c3d82['offset']||0x0),0x0)}):_0x59ba76[_0x2cdc4f(0x34d)]({'coin':_0x18023f,'symbol':_0x32ba23,'reverse':!![],'number':Math[_0x2cdc4f(0x297)](_0x338c40+(_0x5c3d82&&_0x5c3d82['offset']||0x0),0x0),'orderstatus':_0x2cdc4f(0x2d5)});else _0x5c3d82&&_0x59ba76['push']({'coin':_0x5c3d82[_0x2cdc4f(0x240)],'symbol':_0x5c3d82[_0x2cdc4f(0x291)],'reverse':_0x5c3d82[_0x2cdc4f(0x2e9)],'number':0x0,'orderstatus':_0x2cdc4f(0x2d5)});}}return _0x59ba76[_0x2cdc4f(0x210)]((_0x338196,_0x30ed65)=>_0x338196[_0x2cdc4f(0x314)]<_0x30ed65[_0x2cdc4f(0x314)]?0x1:_0x30ed65[_0x2cdc4f(0x314)]<_0x338196[_0x2cdc4f(0x314)]?-0x1:0x0),_0x227f1d=cloneDeep(_0x59ba76),_0x59ba76=_0x59ba76[_0x2cdc4f(0x361)](_0x32a09d=>{const _0x3addde=_0x2cdc4f,_0x23c6ee=config['portfolio'][_0x3addde(0x268)](_0x471d54=>_0x471d54['coin']==_0x32a09d['coin']);return _0x23c6ee&&!_0x23c6ee[_0x3addde(0x1e1)];}),[_0x59ba76,_0x227f1d];}async function getOpenOrders(){const _0x56572c=_0x453176;let _0x549acb;allOpenOrders=[];try{for(const _0x18e43b of config[_0x56572c(0x2d0)]){!_0x18e43b[_0x56572c(0x1e1)]&&_0x18e43b[_0x56572c(0x240)]!=config[_0x56572c(0x260)]&&(_0x549acb=await exchange['fetchOpenOrders'](_0x18e43b['symbol']),_0x549acb[_0x56572c(0x24f)]>0x0&&allOpenOrders['push'](_0x549acb[0x0]));}}catch(_0x14c13f){await handleError(_0x14c13f,_0x56572c(0x35c));}}async function handleOpenOrders(_0x59cf4b=0x0){const _0xea9dd3=_0x453176;allOpenOrders[_0xea9dd3(0x24f)]==0x0&&lockOrders==ORDERS[_0xea9dd3(0x29a)]&&allOrdersPlaced&&(_0x59cf4b==0x0?(logger[_0xea9dd3(0x2a7)](_0xea9dd3(0x224)),_0x59cf4b++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0xea9dd3(0x2a7)](_0xea9dd3(0x28a)),validateOrders('no\x20open\x20orders')));}async function testAPI(){const _0x4220c1=_0x453176;try{return await exchange[_0x4220c1(0x298)](),!![];}catch(_0x29c7d0){return loading[_0x4220c1(0x37c)]=!![],_0x29c7d0[_0x4220c1(0x1c5)]()[_0x4220c1(0x355)]()['includes'](_0x4220c1(0x2fe))||_0x29c7d0[_0x4220c1(0x1c5)]()[_0x4220c1(0x355)]()[_0x4220c1(0x2d7)](_0x4220c1(0x284))?(logHistory('error',_0x4220c1(0x2b4)),loading['error']=_0x4220c1(0x1ec)):(handleErrorNoStop(_0x29c7d0,'testAPI()'),logger[_0x4220c1(0x2a7)](_0x4220c1(0x22c),_0x29c7d0)),emitLoadingProgress(),botPaused=!![],![];}}async function testNewAPI(_0x1afc14){const _0x2b69fd=_0x453176;logger[_0x2b69fd(0x2a7)](_0x2b69fd(0x1e7));const _0x2741d6=ccxt[_0x2b69fd(0x34f)][_0x1afc14[_0x2b69fd(0x25c)][_0x2b69fd(0x355)]()],_0x5424dd=new _0x2741d6({'apiKey':_0x1afc14[_0x2b69fd(0x1ed)],'secret':_0x1afc14['apiSecret'],'options':{'defaultType':_0x2b69fd(0x30f)}});if(_0x1afc14[_0x2b69fd(0x1ff)])_0x5424dd[_0x2b69fd(0x303)]=_0x1afc14[_0x2b69fd(0x1ff)];if(_0x5424dd[_0x2b69fd(0x219)][_0x2b69fd(0x37f)])_0x5424dd[_0x2b69fd(0x307)](_0x1afc14[_0x2b69fd(0x37f)]);try{await _0x5424dd['fetchBalance'](),botPaused=![];}catch(_0x4060c1){logger[_0x2b69fd(0x2a7)](_0x2b69fd(0x20f)+_0x4060c1[_0x2b69fd(0x1c5)]());throw _0x4060c1;}}function cloneDeep(_0x3cac66){const _0x3fc807=_0x453176;return JSON[_0x3fc807(0x32e)](JSON['stringify'](_0x3cac66));}async function getPortfolio(_0x2bcbc2){const _0x2106cd=_0x453176;let _0x52011b=[],_0x2f148e=[],_0x21eb8d=[],_0x5e10ef;_0x2bcbc2[_0x2106cd(0x1ed)]=decryptRSA(secure[_0x2106cd(0x384)],_0x2bcbc2[_0x2106cd(0x1ed)]),_0x2bcbc2[_0x2106cd(0x1f7)]=decryptRSA(secure[_0x2106cd(0x384)],_0x2bcbc2[_0x2106cd(0x1f7)]);if(_0x2bcbc2[_0x2106cd(0x1ff)])_0x2bcbc2['apiPassword']=decryptRSA(secure[_0x2106cd(0x384)],_0x2bcbc2[_0x2106cd(0x1ff)]);if(_0x2bcbc2['apiKey']!==_0x2106cd(0x2c8)||_0x2bcbc2['apiSecret']!==_0x2106cd(0x2c8)||_0x2bcbc2[_0x2106cd(0x1ff)]&&_0x2bcbc2[_0x2106cd(0x1ff)]!==_0x2106cd(0x2c8)){if(config[_0x2106cd(0x25c)]){if(_0x2bcbc2[_0x2106cd(0x1ed)]=='************')_0x2bcbc2[_0x2106cd(0x1ed)]=config[_0x2106cd(0x1ed)];if(_0x2bcbc2[_0x2106cd(0x1f7)]==_0x2106cd(0x2c8))_0x2bcbc2[_0x2106cd(0x1f7)]=config[_0x2106cd(0x1f7)];if(_0x2bcbc2[_0x2106cd(0x1ff)]=='************')_0x2bcbc2['apiPassword']=config[_0x2106cd(0x1ff)];}try{if(_0x2bcbc2[_0x2106cd(0x1c7)])await testNewAPI(_0x2bcbc2);}catch(_0x5ea763){if(_0x5ea763[_0x2106cd(0x1c5)]()['includes'](_0x2106cd(0x20c))){logHistory(_0x2106cd(0x359),_0x2106cd(0x20b)),logHistory(_0x2106cd(0x359),_0x2106cd(0x237)+_0x5ea763['toString']()),proxyEmit(_0x2106cd(0x27c),![]);return;}else{if(_0x5ea763[_0x2106cd(0x1c5)]()['includes'](_0x2106cd(0x339))){logHistory(_0x2106cd(0x359),_0x2106cd(0x1e2)),logHistory('error',_0x2106cd(0x237)+_0x5ea763[_0x2106cd(0x1c5)]()),proxyEmit(_0x2106cd(0x27c),![]);return;}else{logHistory('error','Error\x20occurred:\x20'+_0x5ea763[_0x2106cd(0x1c5)]()),logger[_0x2106cd(0x2a7)]('Error\x20details:',_0x5ea763),proxyEmit(_0x2106cd(0x27c),![]);return;}}}exchange?updateExchange(_0x2bcbc2[_0x2106cd(0x1ed)],_0x2bcbc2[_0x2106cd(0x1f7)],_0x2bcbc2['apiPassword']):await initExchange(_0x2bcbc2[_0x2106cd(0x25c)],_0x2bcbc2[_0x2106cd(0x1ed)],_0x2bcbc2[_0x2106cd(0x1f7)],_0x2bcbc2['apiPassword'],_0x2bcbc2[_0x2106cd(0x37f)]);await loadSymbols();const _0x5aa54a=await getCoins(0x0,![],_0x2bcbc2['basecoin']);_0x21eb8d=cloneDeep(_0x5aa54a[0x1]);}else{const _0x2706e9=await getCoins();_0x21eb8d=cloneDeep(_0x2706e9[0x1]);}if(_0x2bcbc2['basecoin']=='')proxyEmit(_0x2106cd(0x27c),!![]),proxyEmit(_0x2106cd(0x37a),_0x21eb8d);else{_0x21eb8d[_0x2106cd(0x31b)](_0xc06087=>{const _0x15d099=_0x2106cd;if(_0xc06087['coin']!=_0x2bcbc2['basecoin']&&allSymbols[_0x15d099(0x2d7)](_0xc06087[_0x15d099(0x291)]))_0x52011b[_0x15d099(0x34d)](_0xc06087[_0x15d099(0x291)]);});if(_0x52011b[_0x2106cd(0x24f)]==0x0)logHistory(_0x2106cd(0x359),_0x2106cd(0x309));else{try{_0x2f148e=await getTickers(_0x52011b);}catch(_0x1e4fae){logHistory(_0x2106cd(0x359),_0x2106cd(0x220)),logger['debug'](_0x2106cd(0x22c),_0x1e4fae),proxyEmit(_0x2106cd(0x27c),![]);return;}_0x21eb8d['forEach'](_0x166acc=>{const _0x3dd3d4=_0x2106cd;_0x166acc[_0x3dd3d4(0x240)]!=_0x2bcbc2[_0x3dd3d4(0x260)]?_0x2f148e[_0x166acc[_0x3dd3d4(0x291)]]?_0x2f148e[_0x166acc[_0x3dd3d4(0x291)]][_0x3dd3d4(0x218)]?_0x5e10ef=_0x166acc[_0x3dd3d4(0x2e9)]?0x1/_0x2f148e[_0x166acc[_0x3dd3d4(0x291)]]['last']:_0x2f148e[_0x166acc[_0x3dd3d4(0x291)]][_0x3dd3d4(0x218)]:_0x5e10ef=0x0:_0x5e10ef=0x0:_0x5e10ef=0x1,_0x166acc[_0x3dd3d4(0x2df)]=formatResult(_0x5e10ef,0x8);}),await getMarketCap(_0x21eb8d),proxyEmit(_0x2106cd(0x27c),!![]),proxyEmit(_0x2106cd(0x37a),_0x21eb8d);}}}function truncateTradeAmount(_0x113d7b,_0x22e41c){let _0x549326=0x0;try{_0x549326=exchange['amountToPrecision'](_0x113d7b,_0x22e41c);}catch(_0x56df0e){}return _0x549326;}function checkMinimums(_0xf82b58){const _0x2581ad=_0x453176;let _0x36c15c=!![];const _0x3a34e7=!_0xf82b58['reverse']?markets[_0xf82b58[_0x2581ad(0x291)]][_0x2581ad(0x1d9)][_0x2581ad(0x2b0)]['min']:markets[_0xf82b58['symbol']]['limits'][_0x2581ad(0x21c)][_0x2581ad(0x1f8)],_0x1cc45c=!_0xf82b58['reverse']?markets[_0xf82b58['symbol']][_0x2581ad(0x1d9)][_0x2581ad(0x21c)][_0x2581ad(0x1f8)]:markets[_0xf82b58['symbol']][_0x2581ad(0x1d9)][_0x2581ad(0x2b0)][_0x2581ad(0x1f8)],_0x4172a1=truncateTradeAmount(_0xf82b58[_0x2581ad(0x291)],_0xf82b58[_0x2581ad(0x31d)]);_0xf82b58['trade']=_0x4172a1;if(Math[_0x2581ad(0x305)](_0x4172a1)<_0x3a34e7)_0x36c15c=![];if(Math[_0x2581ad(0x305)](_0x4172a1)*_0xf82b58[_0x2581ad(0x218)]<_0x1cc45c)_0x36c15c=![];if(_0xf82b58['side']==_0x2581ad(0x264)){let _0x5a806e=config[_0x2581ad(0x2d0)][_0x2581ad(0x268)](_0x5b003b=>_0x5b003b[_0x2581ad(0x240)]==_0xf82b58[_0x2581ad(0x240)]);if(_0x5a806e[_0x2581ad(0x31e)]>0x0){if(Math['abs'](_0x4172a1)>_0xf82b58[_0x2581ad(0x2a0)]-_0x5a806e[_0x2581ad(0x31e)])_0x36c15c=![];}else{if(Math['abs'](_0x4172a1)>_0xf82b58[_0x2581ad(0x2a0)])_0x36c15c=![];}}if(_0xf82b58['side']=='buy'){let _0x5990be=config['portfolio'][_0x2581ad(0x268)](_0x42a1a4=>_0x42a1a4['coin']==config[_0x2581ad(0x260)]),_0x14c4bd=currentCoins[_0x2581ad(0x268)](_0x15fa9b=>_0x15fa9b[_0x2581ad(0x240)]==config[_0x2581ad(0x260)]);if(_0x5990be[_0x2581ad(0x31e)]>0x0){if(Math[_0x2581ad(0x305)](_0x4172a1)*_0xf82b58[_0x2581ad(0x218)]>_0x14c4bd[_0x2581ad(0x2a0)]-_0x5990be[_0x2581ad(0x31e)])_0x36c15c=![];}else{if(Math[_0x2581ad(0x305)](_0x4172a1)*_0xf82b58[_0x2581ad(0x218)]>_0x14c4bd['number'])_0x36c15c=![];}}return _0x36c15c;}async function getBalances(_0x570dbe=!![]){const _0x2b4b49=_0x453176;if(botPaused)return;let _0x110d9d=0x0,_0x4328b9;const _0x34f295=config[_0x2b4b49(0x2b9)];if(config[_0x2b4b49(0x27b)]&&config[_0x2b4b49(0x23f)]<0x0)await validate24hChanges();currentCoins[_0x2b4b49(0x31b)](_0x5e6049=>{const _0x3d42b4=_0x2b4b49;if(_0x5e6049[_0x3d42b4(0x240)]!=config[_0x3d42b4(0x260)]){let _0x37b03c=gTicker[noslash(_0x5e6049['symbol'])];_0x4328b9=_0x5e6049[_0x3d42b4(0x2e9)]?0x1/_0x37b03c:_0x37b03c;}else _0x4328b9=0x1;let _0x3bbb76=_0x5e6049['number']*_0x4328b9;_0x110d9d+=_0x3bbb76,_0x5e6049[_0x3d42b4(0x218)]=formatResult(Number(_0x4328b9),0x8),_0x5e6049[_0x3d42b4(0x340)]=_0x3bbb76;}),currentCoins[_0x2b4b49(0x31b)](_0x22730e=>{const _0x4d9fa2=_0x2b4b49;let _0x13136b=config[_0x4d9fa2(0x2d0)][_0x4d9fa2(0x268)](_0x12d0fc=>_0x12d0fc[_0x4d9fa2(0x240)]==_0x22730e['coin']),_0xc3c5cc=Number(_0x13136b[_0x4d9fa2(0x33c)]),_0x2ef09e=_0x22730e[_0x4d9fa2(0x340)]/_0x110d9d*0x64,_0x2be45d=_0xc3c5cc*_0x110d9d/0x64/_0x22730e['last']-_0x22730e['number'];_0x22730e['distribution']=formatResult(_0x2ef09e,0x3),_0x22730e['target']=formatResult(_0xc3c5cc,0x3),_0x22730e['trade']=formatResult(_0x2be45d,0x8),_0x22730e['side']='',_0x22730e[_0x4d9fa2(0x1d4)]=![];if(_0x22730e[_0x4d9fa2(0x240)]!=config[_0x4d9fa2(0x260)]){if(_0x22730e[_0x4d9fa2(0x33c)]>_0xc3c5cc)_0x22730e[_0x4d9fa2(0x2a3)]='sell',_0x22730e[_0x4d9fa2(0x1d4)]=checkMinimums(_0x22730e);else _0x22730e[_0x4d9fa2(0x33c)]<_0xc3c5cc&&(_0x22730e[_0x4d9fa2(0x2a3)]=_0x4d9fa2(0x2e3),_0x22730e[_0x4d9fa2(0x1d4)]=checkMinimums(_0x22730e));}_0x22730e[_0x4d9fa2(0x314)]=_0x22730e[_0x4d9fa2(0x33c)]/_0x22730e[_0x4d9fa2(0x232)]-0x1;if(_0x22730e['orderstatus']==_0x4d9fa2(0x2b2)||_0x22730e[_0x4d9fa2(0x228)]==_0x4d9fa2(0x29e))_0x22730e[_0x4d9fa2(0x228)]=_0x4d9fa2(0x2d5);}),currentCoins['sort']((_0x389dd2,_0x4520f4)=>_0x389dd2['delta']<_0x4520f4[_0x2b4b49(0x314)]?0x1:_0x4520f4[_0x2b4b49(0x314)]<_0x389dd2[_0x2b4b49(0x314)]?-0x1:0x0);const _0x22ee71=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x22ee71['eur'],'usd':_0x22ee71['usd'],'portfolio':JSON[_0x2b4b49(0x259)](currentCoins),'threshold':_0x34f295},proxyEmit(_0x2b4b49(0x2c6),{'serverversion':serverversion,'balances':lastBalances});if(_0x570dbe){if(config[_0x2b4b49(0x27b)])headlessMode({'portfolio':currentCoins,'threshold':_0x34f295});else lockOrders==ORDERS[_0x2b4b49(0x2cc)]&&!coolingDown&&notifyBalance({'portfolio':currentCoins,'threshold':_0x34f295});}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x3ed436=getNormalizedPerformance();getStartingBalances(_0x3ed436),emitPerformance(_0x3ed436);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}function getPnL(){const _0x493663=_0x453176;let _0x187eab=dbCoinResults['get'](_0x493663(0x378))[_0x493663(0x340)](),_0x23a4eb=0x0;return Object['entries'](_0x187eab)[_0x493663(0x31b)](([_0x5e6c23,_0x48709d])=>{const _0x5a58b3=_0x493663;_0x23a4eb+=_0x48709d[_0x5a58b3(0x377)];}),_0x23a4eb;}async function storePerformance(){const _0x16b00a=_0x453176;if(!lastBalances)return;let _0x3ec95c=[],_0x3927a4;const _0x17b75f=getPnL();let _0x31320c=JSON[_0x16b00a(0x32e)](lastBalances[_0x16b00a(0x2d0)]);_0x31320c['sort']((_0x18d6dc,_0x2c5a38)=>_0x18d6dc[_0x16b00a(0x240)]>_0x2c5a38[_0x16b00a(0x240)]?0x1:_0x2c5a38[_0x16b00a(0x240)]>_0x18d6dc[_0x16b00a(0x240)]?-0x1:0x0),_0x31320c['forEach'](_0x1aa4e3=>{const _0x58ae87=_0x16b00a;let _0x3e8e2f={'coin':_0x1aa4e3[_0x58ae87(0x240)],'number':_0x1aa4e3[_0x58ae87(0x2a0)],'price':_0x1aa4e3['last']};_0x3ec95c[_0x58ae87(0x34d)](_0x3e8e2f);});const _0x459c2b=await getFiat(),_0xce1bc3=getTimeStamp()[_0x16b00a(0x28b)]('\x20')[0x0],_0x3ce08a=dbPerformance[_0x16b00a(0x363)](_0x16b00a(0x380))[_0x16b00a(0x268)]({'date':_0xce1bc3})['value']();_0x3927a4={'date':_0xce1bc3,'eur':_0x459c2b['eur'],'usd':_0x459c2b[_0x16b00a(0x367)],'coins':_0x3ec95c,'pnl':_0x17b75f},_0x3ce08a?_0x3927a4[_0x16b00a(0x247)]!=config['startdate']&&dbPerformance[_0x16b00a(0x363)](_0x16b00a(0x380))['find']({'date':_0xce1bc3})['assign'](_0x3927a4)['write']():dbPerformance['get']('data')[_0x16b00a(0x34d)](_0x3927a4)[_0x16b00a(0x321)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x1fc8a0=_0x453176;let _0x1a5aec=[];if(dbPerformance['has'](_0x1fc8a0(0x380))[_0x1fc8a0(0x340)]()){let _0x1c6e5d=dbPerformance[_0x1fc8a0(0x363)](_0x1fc8a0(0x380))['cloneDeep']()[_0x1fc8a0(0x361)](_0x330fd5=>{const _0x265cfa=_0x1fc8a0;if(_0x330fd5[_0x265cfa(0x378)][_0x265cfa(0x24f)]==0x0)return![];else return!![];})['sortBy'](_0x1fc8a0(0x247))[_0x1fc8a0(0x340)](),_0x4fa269=[...config['liquidity']];_0x4fa269[_0x1fc8a0(0x210)]((_0x3ed0a0,_0x16cd75)=>_0x3ed0a0['date']>_0x16cd75['date']?-0x1:_0x16cd75[_0x1fc8a0(0x247)]>_0x3ed0a0[_0x1fc8a0(0x247)]?0x1:0x0);let _0x1d4f25=0x1,_0x305970=[],_0x59dd46=0x0;_0x1c6e5d[_0x1fc8a0(0x369)]()[_0x1fc8a0(0x2e9)]()[_0x1fc8a0(0x31b)]((_0x63da4f,_0x339367)=>{const _0x6ca5a8=_0x1fc8a0;if(_0x4fa269[_0x59dd46]){if(_0x1c6e5d[_0x1c6e5d['length']-_0x339367]&&_0x4fa269[_0x59dd46][_0x6ca5a8(0x247)]==_0x1c6e5d[_0x1c6e5d[_0x6ca5a8(0x24f)]-_0x339367][_0x6ca5a8(0x247)]){if(_0x339367<_0x1c6e5d['length']){let _0x2be55d=0x0,_0x1a1eb3=0x0;_0x1c6e5d[_0x1c6e5d['length']-_0x339367][_0x6ca5a8(0x378)]['forEach'](_0x422e3b=>{const _0x1e1fd2=_0x6ca5a8;_0x1a1eb3+=_0x422e3b[_0x1e1fd2(0x2a0)]*_0x422e3b['price'];}),_0x4fa269[_0x59dd46][_0x6ca5a8(0x263)][_0x6ca5a8(0x31b)](_0x444eaf=>{const _0x956482=_0x6ca5a8;_0x2be55d+=_0x444eaf[_0x956482(0x2a0)]*_0x444eaf[_0x956482(0x2df)];}),_0x1d4f25*=_0x2be55d/(_0x1a1eb3-_0x2be55d)+0x1;}_0x59dd46++;}}let _0xcce4f1=0x0;_0x63da4f[_0x6ca5a8(0x378)][_0x6ca5a8(0x31b)](_0x17c8b3=>{const _0x30c8d4=_0x6ca5a8;_0xcce4f1+=_0x17c8b3[_0x30c8d4(0x2a0)]*_0x17c8b3[_0x30c8d4(0x2df)];}),_0x305970[_0x1c6e5d[_0x6ca5a8(0x24f)]-_0x339367-0x1]=_0xcce4f1*(_0x1d4f25-0x1);});let _0xbe1e44=[];_0x4fa269=[...config[_0x1fc8a0(0x269)]]||[];let _0x1a2797=0x0;_0x59dd46=0x0,_0x1c6e5d[_0x1fc8a0(0x31b)]((_0x147aea,_0x3326d5)=>{const _0x105c90=_0x1fc8a0;if(_0x4fa269[_0x59dd46]){const _0xb68448=fns[_0x105c90(0x32e)](_0x4fa269[_0x59dd46]['date'],_0x105c90(0x20a),new Date()),_0x2688e8=fns['parse'](_0x147aea['date'],_0x105c90(0x20a),new Date());if(fns[_0x105c90(0x34a)](_0xb68448,_0x2688e8)){let _0x1ea3cf=0x0;_0x4fa269[_0x59dd46]['changes']['forEach'](_0x41f151=>{const _0x5126d8=_0x105c90;!_0xbe1e44[_0x41f151[_0x5126d8(0x240)]]?_0xbe1e44[_0x41f151[_0x5126d8(0x240)]]=_0x41f151[_0x5126d8(0x2a0)]:(_0x1ea3cf=_0xbe1e44[_0x41f151['coin']],_0xbe1e44[_0x41f151[_0x5126d8(0x240)]]+=_0x41f151['number']);const _0x456cc3=_0x147aea['coins'][_0x5126d8(0x268)](_0x536537=>_0x536537[_0x5126d8(0x240)]==_0x41f151[_0x5126d8(0x240)]);(!_0x456cc3||_0x456cc3['number']==0x0)&&(_0x1a2797+=(-_0x41f151[_0x5126d8(0x2a0)]-_0x1ea3cf)*_0x41f151['price']);}),_0x59dd46++;}}_0x147aea[_0x105c90(0x378)][_0x105c90(0x31b)]((_0x358d26,_0x567e95)=>{const _0x537934=_0x105c90;_0xbe1e44[_0x358d26['coin']]&&(_0x358d26[_0x537934(0x350)]=_0xbe1e44[_0x358d26[_0x537934(0x240)]]);}),_0x1a5aec['push']({'date':_0x147aea[_0x105c90(0x247)],'eur':_0x147aea[_0x105c90(0x36f)],'usd':_0x147aea[_0x105c90(0x367)],'offset':_0x305970[_0x3326d5],'netoffset':_0x1a2797,'coins':_0x147aea[_0x105c90(0x378)],'pnl':_0x147aea['pnl']});});}return _0x1a5aec;}function emitPerformance(_0x372117){const _0x2ce78f=_0x453176;_0x372117[_0x2ce78f(0x24f)]!==0x0?(proxyEmit(_0x2ce78f(0x1ea),_0x372117),lastPerformanceEmitted=getDate()):proxyEmit(_0x2ce78f(0x1ea),[]);}function _0x4ad0(_0x2bf344,_0x47d225){const _0x19cb34=_0x5b36();return _0x4ad0=function(_0x5cf60e,_0x54080a){_0x5cf60e=_0x5cf60e-0x1c4;let _0x5b36d4=_0x19cb34[_0x5cf60e];return _0x5b36d4;},_0x4ad0(_0x2bf344,_0x47d225);}function getPerf(_0x498387,_0x4b616b){const _0x2b2150=_0x453176;let _0x17b064=0x0,_0x5cd643=0x0,_0xf4e042=0x0;_0x498387[_0x2b2150(0x378)]['forEach'](_0x2260b8=>{const _0x32c4cd=_0x2b2150;_0x17b064+=_0x2260b8[_0x32c4cd(0x2a0)]*_0x2260b8['price'];});_0x4b616b&&(_0x17b064+=_0x498387[_0x2b2150(0x31e)]);if(config['basecoin']===_0x2b2150(0x2be)||config[_0x2b2150(0x260)]===_0x2b2150(0x343)||config['basecoin']===_0x2b2150(0x353))_0x5cd643=_0x17b064*_0x498387[_0x2b2150(0x36f)],_0xf4e042=_0x17b064*_0x498387[_0x2b2150(0x367)];else{if(usdBasecoins[_0x2b2150(0x2d7)](config[_0x2b2150(0x260)]))_0x5cd643=_0x17b064*_0x498387[_0x2b2150(0x36f)]/_0x498387[_0x2b2150(0x367)],_0xf4e042=_0x17b064;else config['basecoin']===_0x2b2150(0x2e7)&&(_0x5cd643=_0x17b064,_0xf4e042=_0x17b064*_0x498387[_0x2b2150(0x367)]/_0x498387[_0x2b2150(0x36f)]);}return[_0x17b064,_0x5cd643,_0xf4e042];}function _0x5b36(){const _0x5c214a=['Headless:\x20','marketcapApi','\x20-\x20','Error\x20details:\x20','log','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','Unknown\x20error:\x20','\x20order:\x20','\x20not\x20available\x20(see:\x20hodlerhacks.com/fix/5)','status',':\x20Bot\x20','change24h','coin','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','red_yellow_blue','complete','(((.+)+)+)+$','defaults','cancelLoading','date','ask','<pre>','Error\x20while\x20deleting\x20files:\x20','./config/','startprice','lowdb/adapters/FileSync','pnl-basecoin','length','create','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','Set\x20lock\x20orders\x20to:\x20','join','-------------------------------\x0a','production','getTime','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','findIndex','stringify','startdate','privateKeyFromPem','exchange','bb-secure.json','heapUsed','\x20>\x20details:','basecoin','remainingSymbols','bid','changes','sell','watchTradesForSymbols','fromCodePoint','cooldown','find','liquidity','recovery','botname','netoffset','prevnumber','existsSync','axios','fetchBalance()','util','kill','getMonth','-events.json','assign','stack','Error:\x20Invalid\x20argument\x20','1\x20-\x20partially\x20FILLED\x20(','writeFile','USD','headless','portfolio1','***','active','2.6.22','./logs/','time','node-forge','OnMaintenance','request-time','Placing\x20order\x20for:\x20','\x20exchange','getFullYear','type','Order\x20filled','2\x20-\x20Handled\x20open\x20orders','split',',\x20must\x20be\x20a\x203\x20digit\x20number','emojisell','orderId','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','88rZGcik','symbol','\x20|\x20Custom\x20ID:\x20','function','fetchTickers','MIN_NOTIONAL','uncaughtException','max','fetchBalance','exchange\x20reload','LOCKED','sells','Manual\x20balancing\x20required','2\x20-\x20handling\x20FILLED\x20order:\x20','canceled','open','number','OrderNotFound','\x20exchange\x20error:\x20','side','limit-high','No\x20more\x20open\x20orders\x20-\x20','TUSD','debug','substring','highest','bots','Net\x20','net-basecoin','round','watchOrders','InsufficientFunds','amount','createOrder','filled','\x20minutes','Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)','decode64','breakeven','pnl',':\x20timer\x20>','threshold','emitHistory','timeout','limit','Generating\x20PnL\x20data','BTC','\x20-\x20bot\x20not\x20started','\x20portfolio:</b>\x20\x0a\x0a','ExchangeError','\x20>\x20','./version.json','send','string','balances','padStart','************','argv','RateLimitExceeded','Insufficient\x20funds\x20to\x20execute\x20order:\x20','UNLOCKED','pnl-fiat','Bot\x20','Initializing\x20coin\x20results','portfolio','\x20API\x20secret\x20is\x20invalid','125swusVA','</pre>','Bitget','none','unlinkSync','includes','initTickers()','args','\x20|\x20lock\x20orders:\x20','set','emojibuy','net','progress','price','/EUR','starting-balances','match','buy','currency','basecoinvalue','pop','EUR','Huobipro','reverse','message','storeFiat','colorscheme','10361ouWFop','Loading\x20completed','version','InvalidNonce','ID:\x20','date-fns','12nPMqgO','shift','environment','bot','fetchTickers()','marketcap','fiat','\x20|\x20','full','autoliquidity','Portfolio\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','timestamp','page','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)','storeConfiguration','\x20attempts','password','storeHeadless','abs','marketcapEnabled','setSandboxMode','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','/backup/','\x20>\x20[DEBUG]\x20','bitmex','event-history','Exchange','spot','BUSD','Bybit','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','%\x20(','delta','Avoiding\x20continuous\x20order\x20attempts','enabled','padEnd','3590JGnpOv','loadSymbols()','\x20minutes\x20-\x20','forEach','\x20|\x20highest\x20fee:\x20','trade','offset','Order(s)\x20not\x20validated\x20after\x20','configuration','write','secure','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','watchTradesForSymbols()','\x20>\x20pausing\x20bot\x20for\x20','5778hIFeQj','fetchOpenOrders','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','removed','Failed\x20to\x20load\x20coin\x20data\x20for\x20','update-liquidity','test','2.6.23','parse','ongoing','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','RETRY\x20-\x20Problem\x20resolved\x20after\x20','api-issue','Waited\x20','Portfolio\x20change\x20detected:\x20','format','\x20API\x20key\x20is\x20invalid','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','001','PermissionDenied','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20for\x20','keys','distribution','\x20-\x20go\x20back\x20and\x20try\x20again','added','closed','value','market','Order\x20is\x20invalid:\x20','ETH','average','USDP','change','sendMetricsTelegram','getDate','total','isEqual','mkdirSync','secret','push','getMinutes','pro','initial','yargs/yargs','createWriteStream','PAXG','botID','toLowerCase','1740639qMXTjs','\x20uses\x20','success','error','NetworkError','getSeconds','getOpenOrders()','toFixed','\x20rejected\x20your\x20API\x20request\x20(see:\x20hodlerhacks.com/fix/4)','resetHistory','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','filter','splice','get','quote','Huobi','/output-000.log','usd','market_cap','slice','Exception\x20thrown\x20in\x20','event','getPortfolio','getStartingBalances','search','eur','140340uiKUeY','Block\x20transaction\x20detection:\x20','apply','Invalid\x20balance\x20for\x20','logs','\x20closed\x20the\x20connection\x20(see:\x20hodlerhacks.com/fix/5)','USDT','realizedPnL','coins','Value\x20','portfolio2','194WebTzz','cancel','order','deleteHistoryAlerts','sandbox','data','openOrders','settings','CoinMarketCap\x20data\x20could\x20not\x20be\x20updated\x20-\x20will\x20try\x20again\x20in\x201\x20hour','privateKey','Resetting\x20coin\x20results:\x20','Valid\x20balance\x20for\x20','%)\x0a','exchanges','Executed\x20','toString','loading-canceled','testApi','USDC','configstate','fee','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','Trigger:\x20','ordertype','<b>Bot\x20','\x20-\x20bot\x20switched\x20to\x20manual\x20mode','indexOf','2.6.0','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','\x20hour','valid','sortBy','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','Unfilled\x20order(s)\x20canceled\x20after\x20','warning','limits','onepagemode','Updating\x20API\x20key\x20(not\x20saved\x20in\x20config\x20file\x20yet)','/USDT','Reset\x20|\x20','2.7.1','fetchTicker','-performance.json','excluded','Exchange\x20permission\x20denied\x20-\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','\x0aSymbol(s):\x20','floor','showname','\x20blocked\x20API\x20(RateLimitExceeded)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','Test\x20new\x20API','recreate','\x20not\x20responding\x20(see:\x20hodlerhacks.com/fix/5)','performance','isBefore','timestamp-issue','apiKey','restart','watchTrades','Invalid\x20symbol:\x20','sqrt','API-key\x20format\x20invalid','Market\x20order','running','Initializing\x20exchange:\x20already\x20done','switch-manual','apiSecret','min','<b>','getHours','RETRY\x20-\x20Error\x20in\x20','starting-balance-','Market','percentage','apiPassword','map','buys','toggleBotMode','2.3.5','constructor','\x20MB','net-fiat','slider','final',')\x20unknown\x20order:\x20','yyyy/MM/dd','Invalid\x20API\x20details,\x20please\x20try\x20again\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','AuthenticationError','placeOrder','\x20API\x20key,\x20secret\x20or\x20password\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','Error\x20in\x20testNewAPI():\x20','sort','Pausing\x20for\x20','127666rdnZYo','memoryUsage','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','status\x20code\x20401','29151914AQxxdq','quick','last','has','.json','4557246cRmEaa','cost','\x20|\x20exchange:\x20','pid','cancelOrders()','Unknown\x20error\x20-\x20check\x20logs','PnL\x20','entries','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','1\x20-\x20Handle\x20open\x20orders','no\x20open\x20orders','\x20-\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','configuration-stored','orderstatus','Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute','\x20-\x20bot\x20already\x20running\x20in\x20manual\x20mode','add','Error\x20details:','bot-','-results.json','replace','timeshift','code','target','-config.json'];_0x5b36=function(){return _0x5c214a;};return _0x5b36();}function CurrencyFactor(_0x5c31ca,_0x39ba67,_0x5e9000){const _0x4f81bb=_0x453176;let _0x17785e;if(_0x39ba67===_0x4f81bb(0x2be)||_0x39ba67==='ETH'||_0x39ba67===_0x4f81bb(0x353))_0x17785e=_0x5e9000===_0x4f81bb(0x2e7)?_0x5c31ca['eur']:_0x5c31ca[_0x4f81bb(0x367)];else{if(usdBasecoins[_0x4f81bb(0x2d7)](_0x39ba67))_0x17785e=_0x5e9000===_0x4f81bb(0x2e7)?_0x5c31ca[_0x4f81bb(0x36f)]/_0x5c31ca['usd']:0x1;else _0x39ba67==='EUR'&&(_0x17785e=_0x5e9000==='EUR'?0x1:_0x5c31ca[_0x4f81bb(0x367)]/_0x5c31ca[_0x4f81bb(0x36f)]);}return _0x17785e;}function getKPIs(_0x132e0e,_0x180dff='EUR'){const _0x2ad0cb=_0x453176,_0x5e3f24=config['basecoin'],_0x39226f=lastBalances,_0xe05176=currentCoins,_0x199d52=getNormalizedPerformance(),_0xe824ad=CurrencyFactor(_0x39226f,config[_0x2ad0cb(0x260)],_0x180dff);let _0x312957=0x0;_0xe05176[_0x2ad0cb(0x31b)](_0x2571da=>{const _0x3a1675=_0x2ad0cb;_0x312957+=_0x2571da['number']*_0x2571da[_0x3a1675(0x218)];});_0x132e0e['includes'](_0x2ad0cb(0x2f9))&&(_0x312957*=_0xe824ad);let _0xc8bc90;if(_0x312957!==0x0){if(_0x132e0e==='basecoin'||_0x132e0e===_0x2ad0cb(0x2f9)){if(_0x132e0e===_0x2ad0cb(0x260))_0xc8bc90=(_0x312957/startingBalances[_0x2ad0cb(0x260)]-0x1)*0x64;else{if(_0x180dff===_0x2ad0cb(0x2e7))_0xc8bc90=(_0x312957/startingBalances[_0x2ad0cb(0x36f)]-0x1)*0x64;else _0xc8bc90=(_0x312957/startingBalances['usd']-0x1)*0x64;}}if(_0x132e0e['includes'](_0x2ad0cb(0x2dd))){let _0xc46ec5=0x0;if(startingBalances['coins'])_0xe05176[_0x2ad0cb(0x31b)](_0x328b72=>{const _0x45289e=_0x2ad0cb;let _0x504643=startingBalances[_0x45289e(0x378)]['find'](_0x1fe170=>_0x1fe170['coin']===_0x328b72[_0x45289e(0x240)]);if(_0x504643&&_0x504643[_0x45289e(0x240)]&&_0x328b72[_0x45289e(0x2a0)]!==0x0)_0xc46ec5+=_0x504643[_0x45289e(0x2a0)]*_0x328b72[_0x45289e(0x218)];});let _0x4bc150=0x0;if(_0x199d52[_0x2ad0cb(0x24f)]!==0x0){let _0x78f6b4=_0x199d52[_0x199d52[_0x2ad0cb(0x24f)]-0x1];_0x4bc150=_0x78f6b4[_0x2ad0cb(0x26c)];}_0xc46ec5-=_0x4bc150;let _0x23d513;_0x132e0e===_0x2ad0cb(0x2ac)&&(_0x23d513=startingBalances['basecoin']),_0x132e0e===_0x2ad0cb(0x206)&&(_0x23d513=_0x180dff===_0x2ad0cb(0x2e7)?startingBalances[_0x2ad0cb(0x36f)]:startingBalances[_0x2ad0cb(0x367)],_0xc46ec5*=_0xe824ad),_0xc8bc90=(_0x312957-_0xc46ec5)/_0x23d513*0x64,_0x312957=_0x312957-_0xc46ec5;}if(_0x132e0e[_0x2ad0cb(0x2d7)]('pnl')){if(_0x199d52[_0x2ad0cb(0x24f)]!==0x0&&_0xe05176[_0x2ad0cb(0x24f)]!==0x0){let _0x4e2d24,_0x5ace83=_0x199d52[_0x199d52[_0x2ad0cb(0x24f)]-0x1][_0x2ad0cb(0x2b7)];_0x132e0e[_0x2ad0cb(0x2d7)](_0x2ad0cb(0x2f9))?(_0x4e2d24=_0x180dff===_0x2ad0cb(0x2e7)?startingBalances[_0x2ad0cb(0x36f)]:startingBalances[_0x2ad0cb(0x367)],_0x5ace83*=CurrencyFactor(_0x39226f,_0x5e3f24,_0x180dff)):_0x4e2d24=startingBalances['basecoin'],_0xc8bc90=_0x5ace83/_0x4e2d24*0x64,_0x312957=_0x5ace83;}}if(_0xc8bc90){if(_0xc8bc90<0x64)_0xc8bc90=_0xc8bc90['toFixed'](0x2);else{if(_0xc8bc90<0x3e8)_0xc8bc90=_0xc8bc90['toFixed'](0x1);else _0xc8bc90=_0xc8bc90[_0x2ad0cb(0x35d)](0x0);}}else _0xc8bc90=Number('0')[_0x2ad0cb(0x35d)](0x2);if(_0x312957){if(Math['abs'](_0x312957)<0.000001)_0x312957=_0x312957[_0x2ad0cb(0x35d)](0x2);else{if(Math['abs'](_0x312957)<0.1)_0x312957=_0x312957[_0x2ad0cb(0x35d)](0x6);else{if(Math['abs'](_0x312957)<0x1)_0x312957=_0x312957[_0x2ad0cb(0x35d)](0x5);else{if(Math[_0x2ad0cb(0x305)](_0x312957)<0xa)_0x312957=_0x312957[_0x2ad0cb(0x35d)](0x4);else{if(Math[_0x2ad0cb(0x305)](_0x312957)<0x64)_0x312957=_0x312957['toFixed'](0x3);else{if(Math[_0x2ad0cb(0x305)](_0x312957)<0x3e8)_0x312957=_0x312957[_0x2ad0cb(0x35d)](0x2);else _0x312957=_0x312957[_0x2ad0cb(0x35d)](0x2);}}}}}}else _0x312957=Number('0')[_0x2ad0cb(0x35d)](0x2);}else _0xc8bc90=Number('0')[_0x2ad0cb(0x35d)](0x2);if(_0xc8bc90>=0x0)_0xc8bc90='+'+_0xc8bc90;return{'value':_0x312957,'change':_0xc8bc90};}async function getStartingBalances(_0x415d82,_0x15d745=!![]){const _0x14b3eb=_0x453176;if(_0x415d82[_0x14b3eb(0x24f)]!==0x0){const [_0x10fc28,_0x3e44f6,_0xd83029]=getPerf(_0x415d82[0x0],!![]);let _0x1dd7d8=[];config[_0x14b3eb(0x2d0)]['forEach'](_0x2d3c4e=>{const _0x36a4a9=_0x14b3eb;let _0x58316a=0x0,_0x53eefc;config['liquidity'][_0x36a4a9(0x31b)](_0x4f103d=>{const _0x869915=_0x36a4a9;let _0x2ea14c=_0x4f103d[_0x869915(0x263)][_0x869915(0x268)](_0x1d2d30=>_0x1d2d30[_0x869915(0x240)]==_0x2d3c4e[_0x869915(0x240)]);if(_0x2ea14c){_0x58316a+=_0x2ea14c[_0x869915(0x2a0)];if(!_0x53eefc)_0x53eefc=_0x2ea14c['price'];}}),_0x1dd7d8[_0x36a4a9(0x34d)]({'coin':_0x2d3c4e['coin'],'number':_0x58316a,'initialprice':_0x53eefc});});const _0x5978b0={'basecoin':_0x10fc28,'eur':_0x3e44f6,'usd':_0xd83029,'coins':_0x1dd7d8};if(_0x15d745)proxyEmit(_0x14b3eb(0x2e1),_0x5978b0);startingBalances=_0x5978b0;}}function headlessMode(_0x3578fb){const _0x3a6d2e=_0x453176;let _0x19f996=_0x3578fb['portfolio'],_0x2a04df=_0x3578fb[_0x3a6d2e(0x2b9)],_0x228f6a=[];for(let _0x5df9d2 of _0x19f996){if(_0x5df9d2[_0x3a6d2e(0x240)]!=config['basecoin']){if(_0x5df9d2[_0x3a6d2e(0x314)]>=_0x2a04df/0x64){if(_0x5df9d2[_0x3a6d2e(0x1d4)])_0x228f6a['push'](_0x5df9d2);}else{if(_0x5df9d2[_0x3a6d2e(0x314)]<=-_0x2a04df/0x64){if(_0x5df9d2[_0x3a6d2e(0x1d4)])_0x228f6a[_0x3a6d2e(0x34d)](_0x5df9d2);}}}}_0x228f6a[_0x3a6d2e(0x24f)]>0x0&&placeOrder(_0x228f6a);}function notifyBalance(_0x188b98){const _0x5ae2be=_0x453176;let _0x48438a=_0x188b98['portfolio'],_0x56a057=_0x188b98['threshold'],_0x21e432=[];for(let _0x2a4630 of _0x48438a){if(_0x2a4630['coin']!=config[_0x5ae2be(0x260)]){if(_0x2a4630[_0x5ae2be(0x314)]>=_0x56a057/0x64){if(_0x2a4630[_0x5ae2be(0x1d4)])_0x21e432[_0x5ae2be(0x34d)](_0x2a4630);}else{if(_0x2a4630[_0x5ae2be(0x314)]<=-_0x56a057/0x64){if(_0x2a4630['valid'])_0x21e432[_0x5ae2be(0x34d)](_0x2a4630);}}}}if(_0x21e432[_0x5ae2be(0x24f)]>0x0){let _0xe57041=_0x21e432[_0x5ae2be(0x200)](_0x29df0b=>_0x29df0b[_0x5ae2be(0x240)]);_0xe57041[_0x5ae2be(0x210)]();let _0x590e0c=_0xe57041[_0x5ae2be(0x253)](',\x20');if(!lastCoinsToBalance)logHistory(_0x5ae2be(0x1d8),_0x5ae2be(0x29c));lastCoinsToBalance=_0x590e0c;}}function symbolToCoin(_0x3f7682){const _0x12a698=_0x453176;let _0x3a3858;if(_0x3f7682[_0x12a698(0x2d7)]('/'+config[_0x12a698(0x260)]))_0x3a3858=_0x3f7682['replace']('/'+config[_0x12a698(0x260)],'');if(_0x3f7682[_0x12a698(0x2d7)](config[_0x12a698(0x260)]+'/'))_0x3a3858=_0x3f7682[_0x12a698(0x22f)](config[_0x12a698(0x260)]+'/','');return _0x3a3858;}function setLockOrders(_0x4e112a){const _0x5996bd=_0x453176;lockOrders=_0x4e112a,logger['debug'](_0x5996bd(0x252)+Object[_0x5996bd(0x33b)](ORDERS)[lockOrders]);}async function unlockOrders(_0x31b014=![]){const _0x10e909=_0x453176;if(allOrdersPlaced&&lockOrders==ORDERS[_0x10e909(0x29a)]){setLockOrders(ORDERS['UNLOCKING']);if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);if(_0x31b014){const _0xaed3af=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0xaed3af,setBlockTransactionDetection(![]);}validateOrdersState=_0x10e909(0x350),persistOpenOrders([]),setLockOrders(ORDERS[_0x10e909(0x2cc)]);}}async function validateOrders(_0xae827f){const _0x33762b=_0x453176;if(_0xae827f)validateOrdersState=_0xae827f;logger[_0x33762b(0x2a7)]('1\x20-\x20Validate\x20orders:\x20'+validateOrdersState+_0x33762b(0x2da)+Object[_0x33762b(0x33b)](ORDERS)[lockOrders]);let _0x37e4d5=[],_0x265cdd=config[_0x33762b(0x1cd)]==_0x33762b(0x341)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x33762b(0x2bb)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x33762b(0x29a)])return;logger[_0x33762b(0x2a7)]('2\x20-\x20Validate\x20orders:\x20'+validateOrdersState);for(let _0x19ed16=lastOrders[_0x33762b(0x24f)]-0x1;_0x19ed16>=0x0;_0x19ed16--){let _0x1f9c8f=lastOrders[_0x19ed16],_0x2080c3=![];_0x1f9c8f['filled']>0x0&&(_0x2080c3=!![]),_0x37e4d5[_0x33762b(0x34d)](_0x2080c3),_0x2080c3&&config[_0x33762b(0x1cd)]!='market'&&logHistory(_0x33762b(0x37d),'Order\x20filled:\x20'+_0x1f9c8f[_0x33762b(0x291)]+'\x20'+_0x1f9c8f['side']+'\x20#'+formatResult(_0x1f9c8f[_0x33762b(0x2b2)],0x8)+'\x20@'+formatResult(_0x1f9c8f['price'],0x8)),_0x2080c3&&lastOrders[_0x33762b(0x362)](_0x19ed16,0x1);}persistOpenOrders(lastOrders);const _0x173740=coolingDown?'balancing\x20resumes\x20when\x20cooldown\x20ends':'balancing\x20resumed';if(validateOrdersState=='initial'){validateOrdersState=_0x33762b(0x32f);if(_0x37e4d5[_0x33762b(0x2d7)](![])){}else await unlockOrders();}else{if(validateOrdersState==_0x33762b(0x32f)){if(_0x37e4d5[_0x33762b(0x2d7)](![])){}else await unlockOrders();}else{if(validateOrdersState=='final')_0x37e4d5['includes'](![])&&(config['ordertype']==_0x33762b(0x341)?logHistory('success',_0x33762b(0x31f)+Math[_0x33762b(0x2ad)](_0x265cdd*validateOrderInterval/0xea60)+_0x33762b(0x31a)+_0x173740):(await cancelOrders(),logHistory('success',_0x33762b(0x1d7)+Math['round'](_0x265cdd*validateOrderInterval/0xea60)+_0x33762b(0x31a)+_0x173740))),await unlockOrders(!![]);else{if(validateOrdersState==_0x33762b(0x225)){if(config['ordertype']!='market')logHistory(_0x33762b(0x358),_0x33762b(0x2a5)+_0x173740);await unlockOrders(!![]);}}}}}async function cancelOrders(){const _0x1895d6=_0x453176;lastOrders[_0x1895d6(0x31b)](async _0x10c285=>{const _0x43fcce=_0x1895d6;try{const _0x4f2e07=await exchange['cancelOrder'](_0x10c285[_0x43fcce(0x28e)],_0x10c285[_0x43fcce(0x291)]);}catch(_0x13b8b4){if(_0x13b8b4[_0x43fcce(0x1c5)]()[_0x43fcce(0x2d7)](_0x43fcce(0x2a1))){}else await handleError(_0x13b8b4,_0x43fcce(0x21f));}});}async function initCoinResults(_0x55e850){const _0x2161b2=_0x453176;_0x55e850?logger[_0x2161b2(0x2a7)](_0x2161b2(0x385)+_0x55e850):logger[_0x2161b2(0x2a7)](_0x2161b2(0x2cf)),config[_0x2161b2(0x2d0)]['forEach'](_0x115d69=>{const _0x302f2d=_0x2161b2;if(!_0x115d69[_0x302f2d(0x1e1)]&&_0x115d69[_0x302f2d(0x240)]!=config[_0x302f2d(0x260)]){const _0x2f3bdb=currentCoins[_0x302f2d(0x268)](_0x5d9280=>_0x5d9280[_0x302f2d(0x240)]==_0x115d69[_0x302f2d(0x240)]),_0x29f309=gTicker[noslash(_0x115d69[_0x302f2d(0x291)])];let _0x4ed715=_0x2f3bdb?_0x2f3bdb[_0x302f2d(0x2a0)]:null,_0x94b346=_0x115d69[_0x302f2d(0x2e9)]?0x1/_0x29f309:_0x29f309,_0x454c09;config[_0x302f2d(0x269)]['forEach'](_0x51b247=>{const _0x12de16=_0x302f2d;!_0x454c09&&(_0x454c09=_0x51b247['changes']['find'](_0x1252a9=>_0x1252a9[_0x12de16(0x240)]==_0x115d69[_0x12de16(0x240)]),_0x454c09&&(_0x4ed715=_0x454c09[_0x12de16(0x2a0)],_0x94b346=_0x454c09[_0x12de16(0x2df)]));});let _0x39120a=dbCoinResults[_0x302f2d(0x363)](_0x302f2d(0x378))['find']({'coin':_0x115d69[_0x302f2d(0x240)]})[_0x302f2d(0x340)]();if(!_0x39120a){const _0x1dc634={'coin':_0x115d69[_0x302f2d(0x240)],'number':_0x4ed715,'breakeven':_0x94b346,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x302f2d(0x363)](_0x302f2d(0x378))[_0x302f2d(0x34d)](_0x1dc634)[_0x302f2d(0x321)]();}else{if(_0x55e850&&_0x115d69['coin']==_0x55e850){const _0x44fce2={'coin':_0x115d69[_0x302f2d(0x240)],'number':_0x4ed715,'breakeven':_0x94b346,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x302f2d(0x363)](_0x302f2d(0x378))[_0x302f2d(0x268)]({'coin':_0x115d69[_0x302f2d(0x240)]})[_0x302f2d(0x275)](_0x44fce2)[_0x302f2d(0x321)]();}}}});}async function placeOrder(_0x2378c5){const _0x3b4d37=_0x453176,_0x30fa44=config[_0x3b4d37(0x1cd)]==_0x3b4d37(0x341)?_0x3b4d37(0x341):_0x3b4d37(0x2bc);if(lockOrders==ORDERS[_0x3b4d37(0x2cc)]&&!coolingDown){setLockOrders(ORDERS[_0x3b4d37(0x29a)]);while(transactionDetectionOngoing){await sleep(0x64);}logger[_0x3b4d37(0x2a7)](_0x3b4d37(0x285)+_0x2378c5[_0x3b4d37(0x200)](_0x376c3e=>_0x376c3e[_0x3b4d37(0x240)])[_0x3b4d37(0x253)](',\x20')),lastCoinsToBalance='',allOrdersPlaced=![],validateOrdersState=_0x3b4d37(0x350);let _0x5966e6=![];lastOrders=[];const _0x4860ac=config[_0x3b4d37(0x2b9)];for(const _0x5f040c of _0x2378c5){let _0xb58392,_0x5f1d39,_0x262741,_0x576c3d,_0x1b95a6,_0xbefff8=_0x5f040c[_0x3b4d37(0x291)];logger[_0x3b4d37(0x2a7)](_0x3b4d37(0x1cc)+_0x5f040c[_0x3b4d37(0x240)]+'\x20'+_0x5f040c[_0x3b4d37(0x2a0)]+'\x20'+_0x5f040c[_0x3b4d37(0x218)]+'\x20'+_0x5f040c[_0x3b4d37(0x33c)]+'%\x20'+_0x5f040c[_0x3b4d37(0x232)]+'%\x20'+(0x64*_0x5f040c[_0x3b4d37(0x314)])['toFixed'](0x2)+_0x3b4d37(0x313)+_0x4860ac[_0x3b4d37(0x35d)](0x2)+'%)');const _0x3b3374=currentCoins[_0x3b4d37(0x268)](_0x1028d5=>_0x1028d5['coin']==_0x5f040c[_0x3b4d37(0x240)]);_0x3b3374&&(_0x3b3374[_0x3b4d37(0x26d)]=_0x5f040c[_0x3b4d37(0x2a0)]);try{const _0x4096ba=await exchange[_0x3b4d37(0x1df)](_0xbefff8);_0xb58392=_0x5f040c[_0x3b4d37(0x2e9)]?0x1/_0x5f040c[_0x3b4d37(0x218)]:_0x5f040c[_0x3b4d37(0x218)],_0x5f1d39=_0x4096ba[_0x3b4d37(0x262)],_0x262741=_0x4096ba[_0x3b4d37(0x248)];_0x5f040c[_0x3b4d37(0x2e9)]?(_0x576c3d=_0x5f040c['side']==_0x3b4d37(0x2e3)?'sell':_0x3b4d37(0x2e3),_0x1b95a6=Math['abs'](_0x5f040c['trade'])/_0xb58392):(_0x576c3d=_0x5f040c[_0x3b4d37(0x2a3)],_0x1b95a6=Math[_0x3b4d37(0x305)](_0x5f040c[_0x3b4d37(0x31d)]));_0x30fa44==_0x3b4d37(0x2bc)&&(config[_0x3b4d37(0x1cd)]=='limit-high'&&(_0xb58392=_0x576c3d==_0x3b4d37(0x2e3)?_0x5f1d39:_0x262741),config['ordertype']=='limit-low'&&(_0xb58392=_0x576c3d==_0x3b4d37(0x2e3)?_0x262741:_0x5f1d39));_0x1b95a6=formatResult(_0x1b95a6,0x8),_0xb58392=formatResult(_0xb58392,0x8);const _0x5a18b2=_0x576c3d==_0x3b4d37(0x264)?config[_0x3b4d37(0x28d)]?String['fromCodePoint']('0x'+config[_0x3b4d37(0x28d)])+'\x20':'':config[_0x3b4d37(0x2dc)]?String[_0x3b4d37(0x266)]('0x'+config['emojibuy'])+'\x20':'',_0xafe2fa=_0x30fa44==_0x3b4d37(0x341)?_0x3b4d37(0x1fd):config[_0x3b4d37(0x1cd)]==_0x3b4d37(0x2a4)?'Limit\x20(high-margin)':'Limit\x20(low-margin)',_0x2506b0=(Math[_0x3b4d37(0x1e4)](Math['random']()*0x35a4e900)+0x5f5e100)['toString']();lastOrders[_0x3b4d37(0x34d)]({'customId':_0x2506b0,'symbol':_0xbefff8,'coin':_0x5f040c[_0x3b4d37(0x240)],'amount':_0x1b95a6,'price':_0xb58392,'side':_0x576c3d,'reverse':_0x5f040c[_0x3b4d37(0x2e9)],'filled':0x0});let _0x49308b;_0x30fa44==_0x3b4d37(0x341)?_0x576c3d=='buy'&&[_0x3b4d37(0x311),_0x3b4d37(0x2d4),'Cex',_0x3b4d37(0x365),_0x3b4d37(0x2e8)][_0x3b4d37(0x2d7)](config[_0x3b4d37(0x25c)])?_0x49308b=await exchange[_0x3b4d37(0x2b1)](_0xbefff8,_0x30fa44,_0x576c3d,_0x1b95a6,_0xb58392):_0x49308b=await exchange[_0x3b4d37(0x2b1)](_0xbefff8,_0x30fa44,_0x576c3d,_0x1b95a6,undefined):_0x49308b=await exchange[_0x3b4d37(0x2b1)](_0xbefff8,_0x30fa44,_0x576c3d,_0x1b95a6,_0xb58392);const _0x272785=lastOrders[_0x3b4d37(0x24f)]-0x1;if(_0x272785>=0x0&&lastOrders[_0x272785]['customId']==_0x2506b0){lastOrders[_0x272785]['orderId']=_0x49308b['id'];if(_0x49308b[_0x3b4d37(0x2b0)])lastOrders[_0x272785][_0x3b4d37(0x2b0)]=_0x49308b[_0x3b4d37(0x2b0)];if(_0x49308b[_0x3b4d37(0x2df)])lastOrders[_0x272785][_0x3b4d37(0x2df)]=_0x49308b[_0x3b4d37(0x2df)];lastOrders[_0x272785][_0x3b4d37(0x1ca)]=_0x49308b['fee'];}if(_0x49308b[_0x3b4d37(0x2b0)])_0x1b95a6=_0x49308b[_0x3b4d37(0x2b0)];if(_0x49308b[_0x3b4d37(0x2df)])_0xb58392=_0x49308b[_0x3b4d37(0x2df)];if(_0x30fa44==_0x3b4d37(0x341))logHistory(_0x3b4d37(0x37d),''+_0x5a18b2+_0xafe2fa+_0x3b4d37(0x23b)+_0xbefff8+'\x20'+_0x576c3d+'\x20#'+formatResult(_0x1b95a6,0x8)+'\x20@'+formatResult(_0xb58392,0x8));else logHistory(_0x3b4d37(0x37d),''+_0x5a18b2+_0xafe2fa+_0x3b4d37(0x23b)+_0xbefff8+'\x20'+_0x576c3d+'\x20#'+formatResult(_0x1b95a6,0x8)+'\x20@'+formatResult(_0xb58392,0x8));logger['debug'](_0x3b4d37(0x2f1)+_0x49308b['id']+_0x3b4d37(0x292)+_0x2506b0);if(config[_0x3b4d37(0x267)]!=0x0){let _0x2bb99c=null;if(cooldownTracker[_0x3b4d37(0x24f)]==config[_0x3b4d37(0x267)]-0x1)_0x2bb99c=cooldownTracker[_0x3b4d37(0x2f4)]();const _0x5ca530=getTimeStamp();cooldownTracker['push'](_0x5ca530);if(_0x2bb99c){const _0x294daf=fns['differenceInSeconds'](new Date(_0x5ca530),new Date(_0x2bb99c));if(_0x294daf<cooldownInterval){logHistory(_0x3b4d37(0x359),_0x3b4d37(0x1c4)+config[_0x3b4d37(0x267)]+'\x20orders\x20in\x20less\x20than\x20'+cooldownInterval/0x3c+_0x3b4d37(0x251)+cooldownPeriod/(0xe10*0x3e8)+_0x3b4d37(0x1d3)),coolingDown=!![];break;}}}}catch(_0x272de2){if(_0x272de2[_0x3b4d37(0x1c5)]()['includes'](_0x3b4d37(0x295)))lastOrders=lastOrders[_0x3b4d37(0x361)](_0x59863f=>_0x59863f[_0x3b4d37(0x291)]!=_0xbefff8),logHistory(_0x3b4d37(0x359),_0x3b4d37(0x241)+_0xbefff8),_0x5966e6=!![];else{if(_0x272de2[_0x3b4d37(0x1c5)]()[_0x3b4d37(0x2d7)]('Invalid\x20quantity'))lastOrders=lastOrders[_0x3b4d37(0x361)](_0x32dee3=>_0x32dee3[_0x3b4d37(0x291)]!=_0xbefff8),logHistory(_0x3b4d37(0x359),'Order\x20amount\x20is\x20invalid:\x20'+_0xbefff8),_0x5966e6=!![];else{if(_0x272de2[_0x3b4d37(0x1c5)]()[_0x3b4d37(0x2d7)]('InvalidOrder'))lastOrders=lastOrders[_0x3b4d37(0x361)](_0x5335a2=>_0x5335a2[_0x3b4d37(0x291)]!=_0xbefff8),logHistory(_0x3b4d37(0x359),_0x3b4d37(0x342)+_0xbefff8),logger['debug'](_0x272de2),_0x5966e6=!![];else _0x272de2[_0x3b4d37(0x1c5)]()[_0x3b4d37(0x2d7)]('must\x20be\x20greater\x20than\x20minimum\x20amount')?(lastOrders=lastOrders[_0x3b4d37(0x361)](_0x4acaa6=>_0x4acaa6['symbol']!=_0xbefff8),logHistory(_0x3b4d37(0x359),_0x3b4d37(0x241)+_0xbefff8),_0x5966e6=!![]):(lastOrders=lastOrders[_0x3b4d37(0x361)](_0x242cf2=>_0x242cf2[_0x3b4d37(0x291)]!=_0xbefff8),await handleError(_0x272de2,'placeOrder()',_0xbefff8));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders['length']>0x0){const _0x5a31b1=config['ordertype']==_0x3b4d37(0x341)?validateOrderTimeout*0x3c*0x3e8:config[_0x3b4d37(0x2bb)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x21405e=_0x3b4d37;validateOrders(_0x21405e(0x208));},_0x5a31b1);}else unlockOrders();_0x5966e6&&config[_0x3b4d37(0x27b)]&&(logHistory('error',_0x3b4d37(0x315)+pauseBotMsg),await pauseBot(pauseBotInterval)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x3b4d37(0x358),'Cooldown\x20ended\x20-\x20balancing\x20resumed'));}else{if(coolingDown)!config[_0x3b4d37(0x27b)]&&logHistory(_0x3b4d37(0x359),'Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode');else lockOrders!=ORDERS[_0x3b4d37(0x2cc)]&&(!config['headless']&&(config['ordertype']==_0x3b4d37(0x341)?logHistory(_0x3b4d37(0x359),_0x3b4d37(0x1d2)):logHistory(_0x3b4d37(0x359),_0x3b4d37(0x360))));}}function persistOpenOrders(_0x2c538a){const _0x2b369c=_0x453176,_0x119dc0={...config,'openOrders':_0x2c538a};let _0x59ba5f=dbConfig[_0x2b369c(0x363)](_0x2b369c(0x2f6))[_0x2b369c(0x268)]({'botID':botID})['value']();_0x59ba5f&&dbConfig['get'](_0x2b369c(0x2f6))[_0x2b369c(0x268)]({'botID':botID})['assign'](_0x119dc0)[_0x2b369c(0x321)]();}function restoreOrders(){const _0x3eac39=_0x453176;let _0x1760d1;config[_0x3eac39(0x381)]&&allOpenOrders[_0x3eac39(0x31b)](_0x52ee58=>{const _0x2aa4c3=_0x3eac39,_0x296e53=config[_0x2aa4c3(0x381)][_0x2aa4c3(0x268)](_0x147ab0=>_0x147ab0['orderId']==_0x52ee58['id']);_0x296e53&&(lastOrders[_0x2aa4c3(0x34d)](_0x296e53),_0x1760d1=_0x52ee58[_0x2aa4c3(0x2fe)]);});if(lastOrders['length']>0x0){setLockOrders(ORDERS['LOCKED']),validateOrdersState=_0x3eac39(0x32f),allOrdersPlaced=!![];const _0x4339c5=new Date()['getTime'](),_0xb80b51=config[_0x3eac39(0x1cd)]==_0x3eac39(0x341)?validateOrderTimeout*0x3c*0x3e8:config[_0x3eac39(0x2bb)]*0x3c*0x3e8;if(_0x1760d1+_0xb80b51>_0x4339c5){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x1760d1+_0xb80b51-_0x4339c5);}else validateOrders(_0x3eac39(0x208));}}async function sendMetricsTelegram(){const _0x47aa57=_0x453176;if(!coinsLoaded){process['send']({'telegrammsg':_0x47aa57(0x229)},_0x372a4d=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x15edce='';if(config[_0x47aa57(0x1e5)])_0x15edce=_0x47aa57(0x1f9)+config['botname']+'\x20metrics:</b>\x20\x0a\x0a';else _0x15edce=_0x47aa57(0x1ce)+botID+'\x20metrics:</b>\x20\x0a\x0a';const _0x31f383=config[_0x47aa57(0x260)],_0x26f3e3=config[_0x47aa57(0x2f9)],_0x53cb65=getKPIs(_0x47aa57(0x260)),_0x555869=getKPIs(_0x47aa57(0x2f9),_0x26f3e3),_0x3e7f5a=getKPIs(_0x47aa57(0x2ac)),_0x4aeb15=getKPIs(_0x47aa57(0x206),_0x26f3e3),_0xa344f3=getKPIs(_0x47aa57(0x24e)),_0x2c9d08=getKPIs(_0x47aa57(0x2cd),_0x26f3e3);_0x31f383['includes'](_0x26f3e3)?(_0x15edce+=_0x47aa57(0x249),_0x15edce+='Value\x20'+_0x31f383+':\x20'+_0x53cb65[_0x47aa57(0x340)]+'\x20('+_0x53cb65['change']+_0x47aa57(0x387),_0x15edce+='Net\x20'+_0x31f383+':\x20'+_0x3e7f5a[_0x47aa57(0x340)]+'\x20('+_0x3e7f5a[_0x47aa57(0x346)]+_0x47aa57(0x387),_0x15edce+=_0x47aa57(0x221)+_0x31f383+':\x20'+_0xa344f3[_0x47aa57(0x340)]+'\x20('+_0xa344f3[_0x47aa57(0x346)]+'%)\x0a',_0x15edce+='</pre>'):(_0x15edce+='<pre>',_0x15edce+=_0x47aa57(0x379)+_0x31f383+':\x20'+_0x53cb65['value']+'\x20('+_0x53cb65[_0x47aa57(0x346)]+_0x47aa57(0x387),_0x15edce+=_0x47aa57(0x379)+_0x26f3e3+':\x20'+_0x555869[_0x47aa57(0x340)]+'\x20('+_0x555869[_0x47aa57(0x346)]+'%)\x0a',_0x15edce+=_0x47aa57(0x2ab)+_0x31f383+':\x20'+_0x3e7f5a['value']+'\x20('+_0x3e7f5a[_0x47aa57(0x346)]+_0x47aa57(0x387),_0x15edce+='Net\x20'+_0x26f3e3+':\x20'+_0x4aeb15[_0x47aa57(0x340)]+'\x20('+_0x4aeb15['change']+'%)\x0a',_0x15edce+=_0x47aa57(0x221)+_0x31f383+':\x20'+_0xa344f3[_0x47aa57(0x340)]+'\x20('+_0xa344f3[_0x47aa57(0x346)]+_0x47aa57(0x387),_0x15edce+=_0x47aa57(0x221)+_0x26f3e3+':\x20'+_0x2c9d08['value']+'\x20('+_0x2c9d08[_0x47aa57(0x346)]+_0x47aa57(0x387),_0x15edce+=_0x47aa57(0x2d3)),process[_0x47aa57(0x2c4)]({'telegrammsg':_0x15edce},_0x5cbfd8=>{});}async function sendPortfolioTelegram(){const _0x479f09=_0x453176;if(!coinsLoaded||!currentCoins[0x0][_0x479f09(0x33c)]){process['send']({'telegrammsg':'Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute'},_0x2cf47c=>{});return;}let _0x145a7d='';if(config[_0x479f09(0x1e5)])_0x145a7d=_0x479f09(0x1f9)+config['botname']+_0x479f09(0x2c0);else _0x145a7d=_0x479f09(0x1ce)+botID+_0x479f09(0x2c0);_0x145a7d+=_0x479f09(0x249),_0x145a7d+='-------------------------------\x0a',_0x145a7d+='Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a',_0x145a7d+=_0x479f09(0x254),currentCoins[_0x479f09(0x31b)](_0x42f3f5=>{const _0xf058e7=_0x479f09;_0x145a7d+=_0x42f3f5[_0xf058e7(0x240)][_0xf058e7(0x317)](0x7)+'|\x20'+formatPad(_0x42f3f5[_0xf058e7(0x33c)],0x2,0x6)+'|\x20'+formatPad(_0x42f3f5[_0xf058e7(0x232)],0x2,0x6)+'|\x20'+formatPad(_0x42f3f5[_0xf058e7(0x314)]*0x64,0x2,0x6)+'\x0a';}),_0x145a7d+=_0x479f09(0x2d3),process[_0x479f09(0x2c4)]({'telegrammsg':_0x145a7d},_0x542426=>{});}function formatPad(_0x273f06,_0x48a41e,_0x169aa4){const _0x135184=_0x453176,_0x1f508b=formatResultString(_0x273f06,_0x48a41e);return _0x1f508b?_0x1f508b[_0x135184(0x2c7)](_0x169aa4):''[_0x135184(0x2c7)](_0x169aa4);}function logHistory(_0x5aa300,_0x3792d9,_0x38e157=''){const _0x305bf9=_0x453176;logger[_0x305bf9(0x2fb)](''+_0x3792d9);let _0x248f93={'time':getTimeStamp(),'type':_0x5aa300,'event':_0x3792d9};dbLogs[_0x305bf9(0x363)](_0x305bf9(0x374))[_0x305bf9(0x34d)](_0x248f93)['write']();if(_0x38e157=='')_0x38e157=_0x3792d9;proxyEmit('event',{'log':_0x248f93,'summary':_0x38e157}),process[_0x305bf9(0x2c4)]({'telegram':{..._0x248f93,'botname':config[_0x305bf9(0x26b)],'showname':config[_0x305bf9(0x1e5)]}},_0x4973ea=>{});}function emitHistory(_0x1cc3ea={}){const _0xe7f787=_0x453176;Object[_0xe7f787(0x33b)](_0x1cc3ea)[_0xe7f787(0x24f)]==0x0&&(_0x1cc3ea={'type':[_0xe7f787(0x37d),_0xe7f787(0x36b)],'event':'','page':0x1});if(_0x1cc3ea[_0xe7f787(0x288)][_0xe7f787(0x2d7)](_0xe7f787(0x36b)))_0x1cc3ea['type']['splice'](_0x1cc3ea[_0xe7f787(0x288)][_0xe7f787(0x1d0)](_0xe7f787(0x36b)),0x1,'error',_0xe7f787(0x1d8),_0xe7f787(0x358));if(dbLogs[_0xe7f787(0x219)](_0xe7f787(0x374))[_0xe7f787(0x340)]()){let _0x3a8ee2=dbLogs['get'](_0xe7f787(0x374))[_0xe7f787(0x361)](_0x538f17=>{const _0x2d23fb=_0xe7f787;if(_0x1cc3ea[_0x2d23fb(0x288)][_0x2d23fb(0x24f)]==0x0)return![];else return _0x1cc3ea[_0x2d23fb(0x288)][_0x2d23fb(0x2d7)](_0x538f17['type']);})['filter'](_0x28fc1f=>{const _0x15a027=_0xe7f787;if(_0x1cc3ea['event']=='')return!![];else return _0x28fc1f['event'][_0x15a027(0x355)]()[_0x15a027(0x2d7)](_0x1cc3ea[_0x15a027(0x36b)][_0x15a027(0x355)]());})[_0xe7f787(0x1d5)](_0xe7f787(0x281)),_0x550eb3=_0x3a8ee2[_0xe7f787(0x340)]()[_0xe7f787(0x24f)];_0x3a8ee2=_0x3a8ee2['reverse']()[_0xe7f787(0x369)]((_0x1cc3ea[_0xe7f787(0x2ff)]-0x1)*logPageSize,_0x1cc3ea[_0xe7f787(0x2ff)]*logPageSize-0x1)[_0xe7f787(0x2e9)]()['value'](),proxyEmit(_0xe7f787(0x30d),{'logs':_0x3a8ee2,'total':_0x550eb3});}else proxyEmit(_0xe7f787(0x30d),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x2c48a7){const _0x281277=_0x453176;if(dbLogs[_0x281277(0x219)](_0x281277(0x374))[_0x281277(0x340)]()){const _0xfac2c3=dbLogs[_0x281277(0x363)]('logs')['sortBy'](_0x281277(0x281))[_0x281277(0x361)](_0x2a9507=>{const _0x5596ae=_0x281277;return _0x2a9507[_0x5596ae(0x288)]==_0x5596ae(0x37d);})[_0x281277(0x340)]();dbLogs['get'](_0x281277(0x374))['remove']()[_0x281277(0x321)](),dbLogs[_0x281277(0x363)](_0x281277(0x374))['assign'](_0xfac2c3)[_0x281277(0x321)](),emitHistory(_0x2c48a7);}}async function pauseBot(_0x3b6628=pauseBotIntervalShort,_0x47e03c,_0x52aa22,_0x1f3b10=![]){const _0x2b07b7=_0x453176,_0x1378f8=new Date()[_0x2b07b7(0x256)]();if(!lastErrorShown||_0x1378f8-lastErrorShown>=_0x3b6628){lastErrorShown=_0x1378f8;if(!lastBotPause)lastBotPause=_0x1378f8,consecutivePauses=0x1;else{if(_0x1378f8-lastBotPause-_0x3b6628<0x5a*0x3e8){consecutivePauses++;if(consecutivePauses>maxPauseRetries){if(_0x1f3b10){logHistory('error',_0x47e03c+'\x20>\x20stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();return;}else logHistory(_0x2b07b7(0x359),_0x47e03c+pauseBotMsg),_0x3b6628=pauseBotInterval;}}else consecutivePauses=0x1;lastBotPause=_0x1378f8;}_0x52aa22?logger[_0x2b07b7(0x2a7)]('('+consecutivePauses+')\x20'+_0x47e03c+_0x2b07b7(0x25f),_0x52aa22):logger[_0x2b07b7(0x2a7)]('('+consecutivePauses+')\x20'+_0x47e03c);if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);await sleep(_0x3b6628),botPaused=![],_0x3b6628==pauseBotIntervalShort?resumeBot(!![]):resumeBot(![]);}}}async function killBot(){const _0x1fe030=_0x453176;botPaused=!![],await sleep(0x3e8),process['send']({'stop':_0x1fe030(0x272)},_0x20b204=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x2e01e9,_0x1bc3b0,_0x302204=![]){const _0x5a49d5=_0x453176;if(botPaused)return;let _0xd18527;const _0xe3c329=config[_0x5a49d5(0x25c)]||_0x5a49d5(0x30e);if(_0x1bc3b0)logger['debug'](_0x5a49d5(0x36a)+_0x1bc3b0);const _0x1881d2=()=>{const _0x4155d0=_0x5a49d5;loading[_0x4155d0(0x359)]=_0x4155d0(0x332),emitLoadingProgress();};if(_0x2e01e9[_0x5a49d5(0x1c5)]()['includes'](_0x5a49d5(0x1f2)))logHistory(_0x5a49d5(0x359),_0xe3c329+_0x5a49d5(0x308)),_0x1881d2();else{if(_0x2e01e9['toString']()[_0x5a49d5(0x2d7)](_0x5a49d5(0x312)))logHistory(_0x5a49d5(0x359),_0xe3c329+_0x5a49d5(0x328)),_0x1881d2();else{if(_0x2e01e9[_0x5a49d5(0x1c5)]()['includes'](_0x5a49d5(0x20c)))config[_0x5a49d5(0x1ff)]?_0xd18527=_0xe3c329+_0x5a49d5(0x20e):_0xd18527=_0xe3c329+'\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange',logHistory(_0x5a49d5(0x359),_0xd18527+'\x20(see:\x20hodlerhacks.com/fix/1)'),_0x1881d2();else{if(_0x2e01e9[_0x5a49d5(0x1c5)]()['includes'](_0x5a49d5(0x339)))logHistory(_0x5a49d5(0x359),_0xe3c329+_0x5a49d5(0x323)),_0x1881d2();else{if(!_0x302204)await handleError(_0x2e01e9,null);}}}}}async function handleError(_0x255be8,_0x740bf4,_0x9a4f8a=''){const _0x4c9967=_0x453176;if(botPaused)return;let _0x55d0eb;const _0x4eeefb=config[_0x4c9967(0x25c)]||'Exchange';if(_0x740bf4)logger['debug']('Exception\x20thrown\x20in\x20'+_0x740bf4);if(_0x255be8[_0x4c9967(0x1c5)]()[_0x4c9967(0x2d7)]('DDoSProtection'))_0x55d0eb=_0x4eeefb+'\x20blocked\x20API\x20(DDoSProtection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading',await pauseBot(undefined,_0x55d0eb,_0x255be8);else{if(_0x255be8[_0x4c9967(0x1c5)]()['includes'](_0x4c9967(0x2ca)))_0x55d0eb=_0x4eeefb+_0x4c9967(0x1e6),await pauseBot(undefined,_0x55d0eb,_0x255be8);else{if(_0x255be8[_0x4c9967(0x1c5)]()[_0x4c9967(0x2d7)]('ExchangeNotAvailable')||_0x255be8[_0x4c9967(0x1c5)]()[_0x4c9967(0x2d7)](_0x4c9967(0x283)))_0x55d0eb=_0x4eeefb+_0x4c9967(0x23c),await pauseBot(undefined,_0x55d0eb,_0x255be8['toString']());else{if(_0x255be8[_0x4c9967(0x1c5)]()[_0x4c9967(0x2d7)]('RequestTimeout'))_0x55d0eb=_0x4eeefb+_0x4c9967(0x1e9),await pauseBot(undefined,_0x55d0eb,_0x255be8[_0x4c9967(0x1c5)]());else{if(_0x255be8[_0x4c9967(0x1c5)]()['includes'](_0x4c9967(0x330)))_0x55d0eb=_0x4eeefb+_0x4c9967(0x375),await pauseBot(undefined,_0x55d0eb,_0x255be8[_0x4c9967(0x1c5)]());else{if(_0x255be8[_0x4c9967(0x1c5)]()[_0x4c9967(0x355)]()[_0x4c9967(0x2d7)](_0x4c9967(0x2fe))||_0x255be8[_0x4c9967(0x1c5)]()[_0x4c9967(0x355)]()[_0x4c9967(0x2d7)](_0x4c9967(0x284)))_0x55d0eb=_0x4c9967(0x2b4),await pauseBot(undefined,_0x55d0eb,_0x255be8[_0x4c9967(0x1c5)]());else{if(_0x255be8['toString']()[_0x4c9967(0x2d7)](_0x4c9967(0x2f0)))_0x55d0eb=_0x4eeefb+_0x4c9967(0x35e),await pauseBot(undefined,_0x55d0eb,_0x255be8['toString']());else{if(_0x255be8 instanceof ccxt[_0x4c9967(0x35a)])_0x55d0eb=_0x4eeefb+'\x20network\x20error:\x20'+_0x255be8['toString'](),logger['debug']('Network\x20error\x20details:',_0x255be8),await pauseBot(undefined,_0x55d0eb,_0x255be8);else{if(_0x255be8['toString']()[_0x4c9967(0x2d7)](_0x4c9967(0x1f2)))logHistory(_0x4c9967(0x359),_0x4eeefb+_0x4c9967(0x336)),logHistory(_0x4c9967(0x359),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)'),await killBot();else{if(_0x255be8[_0x4c9967(0x1c5)]()['includes'](_0x4c9967(0x312)))logHistory(_0x4c9967(0x359),_0x4eeefb+_0x4c9967(0x2d1)),logHistory(_0x4c9967(0x359),_0x4c9967(0x300)),await killBot();else{if(_0x255be8[_0x4c9967(0x1c5)]()[_0x4c9967(0x2d7)](_0x4c9967(0x20c))&&_0x255be8[_0x4c9967(0x1c5)]()[_0x4c9967(0x2d7)]('token\x20is\x20expired'))_0x55d0eb=_0x4eeefb+'\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)',await pauseBot(undefined,_0x55d0eb,_0x255be8,!![]);else{if(_0x255be8[_0x4c9967(0x1c5)]()['includes']('AuthenticationError'))config[_0x4c9967(0x1ff)]?_0x55d0eb=_0x4eeefb+_0x4c9967(0x20e):_0x55d0eb=_0x4eeefb+_0x4c9967(0x28f),logHistory('error',_0x55d0eb),logHistory(_0x4c9967(0x359),_0x4c9967(0x300)),await killBot();else{if(_0x255be8[_0x4c9967(0x1c5)]()['includes'](_0x4c9967(0x339)))logHistory(_0x4c9967(0x359),_0x4eeefb+_0x4c9967(0x239)),logHistory(_0x4c9967(0x359),_0x4c9967(0x300)),await killBot();else{if(_0x255be8[_0x4c9967(0x1c5)]()[_0x4c9967(0x2d7)](_0x4c9967(0x2af)))logHistory(_0x4c9967(0x359),_0x4c9967(0x2cb)+_0x9a4f8a),logger[_0x4c9967(0x2a7)]('Error\x20details:',_0x255be8);else{if(_0x255be8 instanceof ccxt[_0x4c9967(0x2c1)]){_0x55d0eb=_0x4eeefb+_0x4c9967(0x2a2)+_0x255be8[_0x4c9967(0x1c5)]();if(_0x9a4f8a)_0x55d0eb+=_0x4c9967(0x1e3)+_0x9a4f8a;await pauseBot(undefined,_0x55d0eb,_0x255be8);}else{_0x55d0eb=_0x4c9967(0x23a)+_0x255be8['toString']();if(_0x9a4f8a)_0x55d0eb+=_0x4c9967(0x1e3)+_0x9a4f8a;await pauseBot(undefined,_0x55d0eb);}}}}}}}}}}}}}}}}function decryptRSA(_0x5fad1f,_0x3e4b40){const _0x4c25e6=_0x453176,_0xc303dc=forge['pki'][_0x4c25e6(0x25b)](_0x5fad1f),_0x17cc2d=_0xc303dc['decrypt'](forge[_0x4c25e6(0x271)][_0x4c25e6(0x2b5)](_0x3e4b40),'RSA-OAEP',{'md':forge['md']['sha256'][_0x4c25e6(0x250)](),'mgf1':{'md':forge['md']['sha256']['create']()}});return _0x17cc2d;}async function withRetry(_0x20daa6,_0x10c883){const _0x99fb48=_0x453176;let _0x1a9921=![],_0x30caaa=0x0,_0x14d442,_0x346b8c;while(_0x30caaa<maxRetries){try{_0x14d442=await _0x10c883();break;}catch(_0x5be91c){_0x346b8c=_0x5be91c,!_0x1a9921?(_0x1a9921=!![],logger['debug'](_0x99fb48(0x1fb)+_0x20daa6+':',_0x5be91c[_0x99fb48(0x1c5)]())):await sleep(retryInterval);}_0x30caaa++;}if(_0x30caaa==0x0)return _0x14d442;if(_0x30caaa>=maxRetries)throw _0x346b8c;else return logger[_0x99fb48(0x2a7)](_0x99fb48(0x331)+_0x30caaa+_0x99fb48(0x302)),_0x14d442;}function formatResult(_0x3867bd,_0x509f66){const _0x58fecc=_0x453176;return parseFloat(_0x3867bd[_0x58fecc(0x35d)](_0x509f66));}function formatResultTruncate(_0x56a352,_0x53a020){const _0x59d19c=_0x453176;let _0xe7cff5=formatResultString(_0x56a352,0xa),_0x461b63=_0xe7cff5[_0x59d19c(0x1d0)]('.');return _0x461b63!=-0x1&&(_0xe7cff5=_0xe7cff5[_0x59d19c(0x369)](0x0,_0x461b63+_0x53a020+0x1)),Number(_0xe7cff5);}function formatResultString(_0x2debf3,_0x4afe1d){const _0x5db94f=_0x453176;let _0x5cb9ba;if(!(''+_0x2debf3)[_0x5db94f(0x2d7)]('e'))_0x5cb9ba=+(Math['round'](_0x2debf3+'e+'+_0x4afe1d)+'e-'+_0x4afe1d);else{let _0x5a0deb=(''+_0x2debf3)[_0x5db94f(0x28b)]('e'),_0x282900='';+_0x5a0deb[0x1]+_0x4afe1d>0x0&&(_0x282900='+'),_0x5cb9ba=+(Math[_0x5db94f(0x2ad)](+_0x5a0deb[0x0]+'e'+_0x282900+(+_0x5a0deb[0x1]+_0x4afe1d))+'e-'+_0x4afe1d);}return Number(_0x5cb9ba)['toFixed'](_0x4afe1d);}function getServerTime(){const _0x707933=_0x453176,_0x5d1af8=new Date();return _0x5d1af8[_0x707933(0x287)]()+'/'+(_0x5d1af8[_0x707933(0x273)]()+0x1)[_0x707933(0x1c5)]()[_0x707933(0x2c7)](0x2,'0')+'/'+_0x5d1af8['getDate']()[_0x707933(0x1c5)]()[_0x707933(0x2c7)](0x2,'0')+'\x20'+_0x5d1af8[_0x707933(0x1fa)]()['toString']()[_0x707933(0x2c7)](0x2,'0')+':'+_0x5d1af8[_0x707933(0x34e)]()[_0x707933(0x1c5)]()['padStart'](0x2,'0')+':'+_0x5d1af8[_0x707933(0x35b)]()[_0x707933(0x1c5)]()[_0x707933(0x2c7)](0x2,'0');}function getTimeStamp(){const _0x3f83a6=_0x453176,_0xb87e57=shiftedTime();return _0xb87e57['getFullYear']()+'/'+(_0xb87e57[_0x3f83a6(0x273)]()+0x1)['toString']()[_0x3f83a6(0x2c7)](0x2,'0')+'/'+_0xb87e57['getDate']()['toString']()[_0x3f83a6(0x2c7)](0x2,'0')+'\x20'+_0xb87e57[_0x3f83a6(0x1fa)]()[_0x3f83a6(0x1c5)]()['padStart'](0x2,'0')+':'+_0xb87e57[_0x3f83a6(0x34e)]()[_0x3f83a6(0x1c5)]()[_0x3f83a6(0x2c7)](0x2,'0')+':'+_0xb87e57[_0x3f83a6(0x35b)]()[_0x3f83a6(0x1c5)]()[_0x3f83a6(0x2c7)](0x2,'0');}function getDate(){const _0x33f710=_0x453176,_0x24e322=shiftedTime();return _0x24e322[_0x33f710(0x287)]()+'/'+(_0x24e322['getMonth']()+0x1)[_0x33f710(0x1c5)]()[_0x33f710(0x2c7)](0x2,'0')+'/'+_0x24e322[_0x33f710(0x348)]()[_0x33f710(0x1c5)]()[_0x33f710(0x2c7)](0x2,'0');}function getHour(){const _0x3ba440=_0x453176,_0x5149e4=shiftedTime();return _0x5149e4[_0x3ba440(0x1fa)]()['toString']()[_0x3ba440(0x2c7)](0x2,'0');}function sleep(_0x5cd9dc){return new Promise(_0x5c8d2d=>setTimeout(_0x5c8d2d,_0x5cd9dc));}function shiftedTime(){const _0x11c310=_0x453176,_0x5b7791=new Date();let _0x5dc095=_0x5b7791;if(config&&config[_0x11c310(0x230)]!==0x0)_0x5dc095=fns[_0x11c310(0x22b)](_0x5b7791,{'hours':config[_0x11c310(0x230)]});return _0x5dc095;}function timer(_0x43df53){const _0x460713=_0x453176,_0x1ba26f=new Date();!lasttime?console[_0x460713(0x238)](getTimeStamp()+_0x460713(0x2b8),_0x43df53,_0x1ba26f):console['log'](getTimeStamp()+_0x460713(0x2b8),_0x43df53,(_0x1ba26f-lasttime)/0x3e8),lasttime=_0x1ba26f;}