const _0x1bf3c8=_0x3629;(function(_0x156984,_0x619ea9){const _0x4c5b9c=_0x3629,_0x2fcb05=_0x156984();while(!![]){try{const _0xe5e07a=parseInt(_0x4c5b9c(0x32d))/0x1*(parseInt(_0x4c5b9c(0x1fc))/0x2)+-parseInt(_0x4c5b9c(0x1bb))/0x3+-parseInt(_0x4c5b9c(0x2ef))/0x4*(-parseInt(_0x4c5b9c(0x24e))/0x5)+parseInt(_0x4c5b9c(0x18d))/0x6*(parseInt(_0x4c5b9c(0x326))/0x7)+-parseInt(_0x4c5b9c(0x264))/0x8*(-parseInt(_0x4c5b9c(0x293))/0x9)+parseInt(_0x4c5b9c(0x1dd))/0xa*(-parseInt(_0x4c5b9c(0x1b2))/0xb)+parseInt(_0x4c5b9c(0x1a5))/0xc*(-parseInt(_0x4c5b9c(0x301))/0xd);if(_0xe5e07a===_0x619ea9)break;else _0x2fcb05['push'](_0x2fcb05['shift']());}catch(_0x2d4c68){_0x2fcb05['push'](_0x2fcb05['shift']());}}}(_0x4a6f,0x376ae));const _0x5ce81c=function(){let _0x29df00=!![];return function(_0x2de2c9,_0x3c8a42){const _0x4c4622=_0x29df00?function(){if(_0x3c8a42){const _0x3fc4ad=_0x3c8a42['apply'](_0x2de2c9,arguments);return _0x3c8a42=null,_0x3fc4ad;}}:function(){};return _0x29df00=![],_0x4c4622;};}(),_0x13e08b=_0x5ce81c(this,function(){const _0x180d8d=_0x3629;return _0x13e08b[_0x180d8d(0x2e8)]()['search'](_0x180d8d(0x18c))[_0x180d8d(0x2e8)]()['constructor'](_0x13e08b)[_0x180d8d(0x22f)]('(((.+)+)+)+$');});_0x13e08b();'use strict';const ccxt=require(_0x1bf3c8(0x230)),low=require('lowdb'),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require('date-fns'),forge=require(_0x1bf3c8(0x216)),util=require('util'),argv=require('yargs/yargs')(process['argv'][_0x1bf3c8(0x18b)](0x2))[_0x1bf3c8(0x257)],path=require('path'),axios=require('axios');let exchange,gTicker={},gChange={};const usdBasecoins=[_0x1bf3c8(0x1c2),'BUSD',_0x1bf3c8(0x1ed),_0x1bf3c8(0x2f9),_0x1bf3c8(0x2fb),_0x1bf3c8(0x1eb)],excludedExchanges=[_0x1bf3c8(0x1e6)],debugging=argv['d']||![];let pnlGenerationNeeded=argv['r']||![],config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x1bf3c8(0x345)]({'LOCKED':0x0,'UNLOCKING':0x1,'UNLOCKED':0x2});let lockOrders=ORDERS[_0x1bf3c8(0x24a)],validateOrdersState,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotIntervalShort=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0x1bf3c8(0x26e)+pauseBotInterval/0xea60+_0x1bf3c8(0x2fd),maxPauseRetries=0x6,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,watchTransactionsInterval=0x3c*0x3e8,schedulerInterval=0x3c*0x3c*0x3e8,retryInterval=0x3e8,maxRetries=0x5,logPageSize=0x14,defaultFee=0.003;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidOrdersInitialTimeout,pidOrdersTimeout,botPaused=![],transactionDetectionOngoing=![],lastCoinsToBalance='',exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x5dc,balanceUpdateRetries=0x5;let enableFiatToggle;const serverversion=require(_0x1bf3c8(0x327))['version'],environment=require(_0x1bf3c8(0x327))[_0x1bf3c8(0x1fe)]||'production',botID=process[_0x1bf3c8(0x257)][0x2]||_0x1bf3c8(0x2c6),pattern=/^[0-9]{3}$/;!pattern[_0x1bf3c8(0x1c8)](botID)&&(console['log'](_0x1bf3c8(0x1b3)+botID+_0x1bf3c8(0x26c)),killBot());const userID=process[_0x1bf3c8(0x257)][0x3]||'',configpath=userID?_0x1bf3c8(0x34c)+userID+'/':_0x1bf3c8(0x34c),logspath=userID?_0x1bf3c8(0x2be)+userID+'/':_0x1bf3c8(0x2be),loggerfile=fs['createWriteStream'](logspath+_0x1bf3c8(0x308),{'flags':'a'});!fs[_0x1bf3c8(0x339)](configpath)&&fs[_0x1bf3c8(0x2ac)](configpath);!fs[_0x1bf3c8(0x339)](logspath)&&fs[_0x1bf3c8(0x2ac)](logspath);const configfile=configpath+_0x1bf3c8(0x332)+botID+_0x1bf3c8(0x1a4),logfile=configpath+_0x1bf3c8(0x332)+botID+'-events.json',performancefile=configpath+_0x1bf3c8(0x332)+botID+_0x1bf3c8(0x250),coinresultsfile=configpath+_0x1bf3c8(0x332)+botID+_0x1bf3c8(0x1ee),settingsfile=configpath+_0x1bf3c8(0x31f),securefile=configpath+'bb-secure.json',configbackuppath=configpath+_0x1bf3c8(0x1a8),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x1bf3c8(0x1ec)]({'logs':[],'version':serverversion})[_0x1bf3c8(0x190)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance['defaults']({'data':[],'version':serverversion})[_0x1bf3c8(0x190)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x1bf3c8(0x1ec)]({'bot':[],'version':serverversion})[_0x1bf3c8(0x190)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x1bf3c8(0x1ec)]({'coins':{},'version':serverversion})[_0x1bf3c8(0x190)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0,settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x595ab9=>{const _0x4fbb32=_0x1bf3c8;console[_0x4fbb32(0x303)](_0x595ab9);},'simple':_0x2b3ce9=>{const _0x4005c3=_0x1bf3c8;console['log'](_0x2b3ce9),loggerfile['write'](util[_0x4005c3(0x282)](_0x2b3ce9)+'\x0a');},'full':async(_0x4c85e3,_0x375663='')=>{const _0xfd3ae4=_0x1bf3c8;let _0x1f0885;if(config[_0xfd3ae4(0x314)])_0x1f0885=getTimeStamp()+':\x20'+config[_0xfd3ae4(0x28a)]+_0xfd3ae4(0x351)+_0x4c85e3;else _0x1f0885=getTimeStamp()+_0xfd3ae4(0x1be)+botID+_0xfd3ae4(0x351)+_0x4c85e3;console[_0xfd3ae4(0x303)](_0x1f0885),loggerfile[_0xfd3ae4(0x190)](util[_0xfd3ae4(0x282)](_0x1f0885)+'\x0a'),_0x375663&&(console[_0xfd3ae4(0x303)](_0x375663),loggerfile['write'](util['format'](_0x375663)+'\x0a'));},'debug':async(_0x5277f1,_0x23fa98='')=>{const _0x232359=_0x1bf3c8;let _0x1e73ea;if(config[_0x232359(0x314)])_0x1e73ea=getTimeStamp()+':\x20'+config[_0x232359(0x28a)]+_0x232359(0x324)+_0x5277f1;else _0x1e73ea=getTimeStamp()+_0x232359(0x1be)+botID+_0x232359(0x324)+_0x5277f1;if(debugging)console[_0x232359(0x303)](_0x1e73ea);loggerfile[_0x232359(0x190)](util[_0x232359(0x282)](_0x1e73ea)+'\x0a');if(_0x23fa98){if(debugging)console[_0x232359(0x303)](_0x23fa98);loggerfile[_0x232359(0x190)](util[_0x232359(0x282)](_0x23fa98)+'\x0a');}}};process['on'](_0x1bf3c8(0x1cc),function(_0x51b239){const _0x2cc103=_0x1bf3c8;handleError(_0x51b239['stack'],_0x2cc103(0x1cc));});settings[_0x1bf3c8(0x356)]!=config[_0x1bf3c8(0x356)]&&updateTimeshift(settings[_0x1bf3c8(0x356)]);settings['onepagemode']!=config[_0x1bf3c8(0x2c7)]&&updateOnepagemode(settings[_0x1bf3c8(0x2c7)]);(settings[_0x1bf3c8(0x276)]&&!config['marketcapApi']||!settings['marketcapApi']&&config[_0x1bf3c8(0x276)])&&updateMarketcapApi(settings[_0x1bf3c8(0x276)]);process['send']({'started':_0x1bf3c8(0x1a9)},_0x18579f=>{}),initializeProcessListeners();function proxyEmit(_0x2f45ed,_0x5af611=null){const _0x3bec85=_0x1bf3c8;process[_0x3bec85(0x1de)]({'function':_0x2f45ed,'args':_0x5af611},_0x178951=>{});}function initializeProcessListeners(){const _0x33d381=_0x1bf3c8;process['on'](_0x33d381(0x193),_0x333aa9=>{const _0x1ec443=_0x33d381;switch(Object[_0x1ec443(0x1f3)](_0x333aa9)[0x0]){case _0x1ec443(0x356):_0x333aa9[_0x1ec443(0x356)]!=undefined&&(settings[_0x1ec443(0x356)]=_0x333aa9[_0x1ec443(0x356)],updateTimeshift(settings[_0x1ec443(0x356)]));break;case'onepagemode':_0x333aa9[_0x1ec443(0x2c7)]!=undefined&&(settings[_0x1ec443(0x2c7)]=_0x333aa9[_0x1ec443(0x2c7)],updateOnepagemode(settings['onepagemode']));break;case _0x1ec443(0x276):_0x333aa9[_0x1ec443(0x276)]!=undefined&&(settings[_0x1ec443(0x276)]=_0x333aa9[_0x1ec443(0x276)],updateMarketcapApi(settings[_0x1ec443(0x276)]));break;case _0x1ec443(0x224):_0x333aa9[_0x1ec443(0x224)]!=undefined&&(bots=JSON['parse'](_0x333aa9[_0x1ec443(0x224)]),proxyEmit(_0x1ec443(0x224),bots));break;case _0x1ec443(0x225):switch(_0x333aa9['function']){case _0x1ec443(0x32c):initclient();break;case _0x1ec443(0x2e7):toggleBotMode();break;case _0x1ec443(0x24b):emitHistory(_0x333aa9[_0x1ec443(0x2c0)]);break;case'deleteHistoryAlerts':deleteHistoryAlerts(_0x333aa9['args']);break;case'getPortfolio':getPortfolio(_0x333aa9[_0x1ec443(0x2c0)]);break;case _0x1ec443(0x2ca):storeConfiguration(_0x333aa9['args']);break;case _0x1ec443(0x1c9):storeHeadless(_0x333aa9[_0x1ec443(0x2c0)]);break;case _0x1ec443(0x263):storeFiat(_0x333aa9['args']);break;case _0x1ec443(0x1bf):resetHistory();break;case _0x1ec443(0x319):getStartingBalances(getNormalizedPerformance());break;case'placeOrder':placeOrder(_0x333aa9['args']);break;case _0x1ec443(0x188):cancelLoading();break;case _0x1ec443(0x298):showConfig();break;case _0x1ec443(0x1ad):sendMetricsTelegram();break;case _0x1ec443(0x229):sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x1139c5=![]){const _0x427c70=_0x1bf3c8;logger[_0x427c70(0x223)]('Reset\x20|\x20'+(_0x1139c5?_0x427c70(0x321):_0x427c70(0x320))+'\x20|\x20exchange:\x20'+config[_0x427c70(0x355)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x1139c5)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x427c70(0x1f4)]!=''&&config['apiKey']!=_0x427c70(0x1c6)){loadingProgress=0x0;if(_0x1139c5){await initExchange();const _0x233446=await testAPI();if(!_0x233446)return;await loadSymbols(),loadingProgress=0x1,setStableCoins(),proxyEmit(_0x427c70(0x19e),emittedConfiguration()),initialPerformanceStored=![];}const _0x1867f5=await getCoins();[currentCoins,currentCoinsAll]=_0x1867f5,setBlockTransactionDetection(![]),startScheduler(),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger['debug']('Loading\x20completed'),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x427c70(0x249)]==0x0&&allOpenOrders[_0x427c70(0x249)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(pnlGenerationNeeded)await generatePnL();}}async function resumeBot(_0x3b0b1a=![]){const _0x1d2541=_0x1bf3c8;logger[_0x1d2541(0x223)]('Resuming\x20('+(_0x3b0b1a?_0x1d2541(0x338):'complete')+_0x1d2541(0x2c4)+config[_0x1d2541(0x355)]);if(pidBalances)clearTimeout(pidBalances);if(_0x3b0b1a){getBalances();return;}coinsLoaded=![];if(config[_0x1d2541(0x1f4)]!=''&&config['apiKey']!='***'){loadingProgress=0x1;const _0x1745b5=await getCoins();[currentCoins,currentCoinsAll]=_0x1745b5,setBlockTransactionDetection(![]),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x1d2541(0x223)](_0x1d2541(0x241)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x1d2541(0x249)]==0x0&&allOpenOrders[_0x1d2541(0x249)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();}}async function getMarketCap(_0x12245f){const _0x1018d4=_0x1bf3c8;let _0x25232f=![];if(_0x12245f)_0x25232f=!![];let _0x2854b9;_0x25232f?_0x2854b9=_0x12245f[_0x1018d4(0x1ef)](_0x3ae2d4=>_0x3ae2d4[_0x1018d4(0x2d4)]):_0x2854b9=currentCoinsAll['map'](_0x293f16=>_0x293f16[_0x1018d4(0x2d4)]);if(!config['marketcapApi']||!_0x25232f&&!config[_0x1018d4(0x28d)]||_0x2854b9[_0x1018d4(0x249)]==0x0)return;let _0x2c86f9=null;try{_0x2c86f9=await axios[_0x1018d4(0x1db)](_0x1018d4(0x2e0),{'headers':{'X-CMC_PRO_API_KEY':settings[_0x1018d4(0x276)]},'params':{'symbol':_0x2854b9[_0x1018d4(0x2e8)]()}});}catch(_0x382b70){_0x2c86f9=null,_0x382b70[_0x1018d4(0x2e8)]()[_0x1018d4(0x306)](_0x1018d4(0x2da))?(config[_0x1018d4(0x276)]=![],updateConfig(),proxyEmit(_0x1018d4(0x19e),emittedConfiguration()),logHistory(_0x1018d4(0x1d3),_0x1018d4(0x1aa))):(logHistory(_0x1018d4(0x1d3),'CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20trying\x20again\x20in\x20'+schedulerInterval/(0x3c*0x3e8)+_0x1018d4(0x2fd)),logger['debug'](_0x1018d4(0x2ec),_0x382b70['toString']()+_0x1018d4(0x198)+_0x382b70[_0x1018d4(0x1f7)]));}if(_0x2c86f9){let _0x2fe867=0x0;const _0x30590d=_0x2c86f9['data'];_0x2854b9[_0x1018d4(0x27b)](_0x582d9e=>{const _0x422297=_0x1018d4;if(_0x30590d['data'][_0x582d9e][0x0])_0x2fe867+=_0x30590d[_0x422297(0x2b0)][_0x582d9e][0x0][_0x422297(0x29f)]['USD']['market_cap'];}),_0x2854b9[_0x1018d4(0x27b)](_0xa07a22=>{const _0x28ebe5=_0x1018d4,_0x2d0e55=_0x30590d[_0x28ebe5(0x2b0)][_0xa07a22][0x0]?_0x30590d['data'][_0xa07a22][0x0][_0x28ebe5(0x29f)][_0x28ebe5(0x1c2)][_0x28ebe5(0x354)]:0x0;if(_0x25232f){const _0x1a0ac0=_0x12245f['find'](_0x53e6c0=>_0x53e6c0[_0x28ebe5(0x2d4)]==_0xa07a22);_0x1a0ac0&&(_0x1a0ac0[_0x28ebe5(0x336)]=_0x2d0e55);}else{const _0x5cd24e=currentCoins['find'](_0x442030=>_0x442030[_0x28ebe5(0x2d4)]==_0xa07a22);_0x5cd24e&&(_0x5cd24e[_0x28ebe5(0x336)]=_0x2d0e55);const _0x420618=currentCoinsAll[_0x28ebe5(0x1b8)](_0x12c2b0=>_0x12c2b0[_0x28ebe5(0x2d4)]==_0xa07a22);_0x420618&&(_0x420618[_0x28ebe5(0x336)]=_0x2d0e55);}}),!_0x25232f&&updateTargetDistribution();}}function updateTargetDistribution(){const _0x469793=_0x1bf3c8,_0xd20ced=0x2;let _0x1cca0a=0x0,_0x5633a7=0x0,_0x2cc303=0x0,_0x8b4f3=0x0,_0x1551ea=0x0;config[_0x469793(0x34e)][_0x469793(0x27b)](_0x2e4937=>{const _0x5d6477=_0x469793;if(!_0x2e4937[_0x5d6477(0x279)]){_0x2cc303++,_0x1cca0a+=_0x2e4937[_0x5d6477(0x194)];if(_0x2e4937[_0x5d6477(0x194)]===-0x1){_0x1cca0a++;const _0x42f2d=currentCoinsAll[_0x5d6477(0x1b8)](_0x2ace5a=>_0x2ace5a[_0x5d6477(0x2d4)]==_0x2e4937['coin']);_0x42f2d&&(_0x8b4f3+=_0x42f2d[_0x5d6477(0x336)],_0x1551ea+=Math[_0x5d6477(0x1e7)](_0x42f2d[_0x5d6477(0x336)]));}if(_0x2e4937['slider']!==-0x1)_0x5633a7++;}});let _0x1d7c12;const _0x29e9da=0x64-_0x1cca0a,_0x484703=_0x2cc303-_0x5633a7;_0x1d7c12=_0x484703===0x0?_0x1cca0a:Math[_0x469793(0x1d5)](0x64,_0x1cca0a),config[_0x469793(0x34e)]['forEach'](_0x1186c8=>{const _0x16e451=_0x469793,_0x2670a4=currentCoinsAll[_0x16e451(0x1b8)](_0x28d3cd=>_0x28d3cd[_0x16e451(0x2d4)]==_0x1186c8['coin']);_0x2670a4&&(_0x1186c8[_0x16e451(0x336)]=_0x2670a4['marketcap']);if(!_0x1186c8[_0x16e451(0x279)]){if(_0x1d7c12<=0x64){if(_0x1186c8[_0x16e451(0x194)]===-0x1){if(_0x8b4f3!==0x0&&config[_0x16e451(0x28d)]){if(_0x2670a4){if(config[_0x16e451(0x28d)]==_0x16e451(0x336))_0x1186c8[_0x16e451(0x2db)]=(_0x29e9da/(_0x8b4f3/_0x2670a4[_0x16e451(0x336)]))['toFixed'](_0xd20ced);else config[_0x16e451(0x28d)]==_0x16e451(0x266)&&(_0x1186c8[_0x16e451(0x2db)]=(_0x29e9da/(_0x1551ea/Math['sqrt'](_0x2670a4[_0x16e451(0x336)])))[_0x16e451(0x1fd)](_0xd20ced));}}}}}}),updateConfig();}function updateConfig(){const _0x5c45c8=_0x1bf3c8;let _0x3f5728=dbConfig[_0x5c45c8(0x1db)](_0x5c45c8(0x242))[_0x5c45c8(0x1b8)]({'botID':botID})[_0x5c45c8(0x310)]();_0x3f5728&&dbConfig['get'](_0x5c45c8(0x242))['find']({'botID':botID})[_0x5c45c8(0x1f2)](config)[_0x5c45c8(0x190)]();}function logMemory(){const _0x489216=_0x1bf3c8;if(environment!=_0x489216(0x228))return;const _0x30708d=process[_0x489216(0x255)]()[_0x489216(0x2af)]/0x400/0x400;logger[_0x489216(0x223)](_0x489216(0x22b)+process[_0x489216(0x186)]+_0x489216(0x2bb)+formatResult(_0x30708d,0x1)+_0x489216(0x2a3));}async function startScheduler(){const _0x2ee094=_0x1bf3c8,_0x14e5e6=shiftedTime()[_0x2ee094(0x1a0)]();getMarketCap(),loadSymbols(),_0x14e5e6==0x1&&logMemory(),await sleep(schedulerInterval),startScheduler();}async function restartBot(_0x1e2e4a=![]){const _0x2ad766=_0x1bf3c8;logger[_0x2ad766(0x223)]('Initiating\x20bot\x20restart');if(!_0x1e2e4a)while(lockOrders!=ORDERS['UNLOCKED']||coolingDown){await sleep(0x3e8);}process[_0x2ad766(0x1de)]({'stop':_0x2ad766(0x247)},_0x5db49f=>{});}async function initExchange(_0x336fc3=config[_0x1bf3c8(0x355)],_0x18686e=config[_0x1bf3c8(0x1f4)],_0x306272=config[_0x1bf3c8(0x32b)],_0x5e4bfb=config['apiPassword'],_0x35af36=config['sandbox']){const _0x319daf=_0x1bf3c8;if(exchange){logger[_0x319daf(0x223)](_0x319daf(0x2fe));return;}logger[_0x319daf(0x223)](_0x319daf(0x278));!supportedExchanges()['includes'](_0x336fc3)&&(logHistory(_0x319daf(0x1d3),_0x319daf(0x2a7)+_0x336fc3+_0x319daf(0x222)),killBot());const _0x235a11=ccxt[_0x319daf(0x233)][_0x336fc3[_0x319daf(0x261)]()];exchange=new _0x235a11({'apiKey':_0x18686e,'secret':_0x306272,'options':{'defaultType':'spot'}});if(_0x5e4bfb)exchange[_0x319daf(0x344)]=_0x5e4bfb;if(exchange[_0x319daf(0x211)][_0x319daf(0x299)])exchange[_0x319daf(0x32a)](_0x35af36);}function updateExchange(_0x4a0dd8,_0x3cc185,_0x3bb0b5=null){const _0x365bd1=_0x1bf3c8;exchange[_0x365bd1(0x1f4)]=_0x4a0dd8,exchange[_0x365bd1(0x237)]=_0x3cc185,exchange[_0x365bd1(0x344)]=_0x3bb0b5,logger[_0x365bd1(0x223)](_0x365bd1(0x328));}function setStableCoins(){const _0x1ce0b9=_0x1bf3c8;let _0x4057c9=config[_0x1ce0b9(0x1ab)]==_0x1ce0b9(0x19a)?'ETH':config[_0x1ce0b9(0x1ab)]==_0x1ce0b9(0x2f1)?_0x1ce0b9(0x2f1):'BTC',_0x1bb984=allSymbols[_0x1ce0b9(0x306)](_0x4057c9+_0x1ce0b9(0x2dc))?_0x1ce0b9(0x1c2):allSymbols[_0x1ce0b9(0x306)](_0x4057c9+_0x1ce0b9(0x262))?_0x1ce0b9(0x2f9):_0x1ce0b9(0x201),_0x492c2c=allSymbols[_0x1ce0b9(0x306)](_0x4057c9+_0x1ce0b9(0x317))?_0x1ce0b9(0x201):_0x1bb984;enableFiatToggle=!![],_0x1bb984==_0x1ce0b9(0x201)&&(enableFiatToggle=![],storeFiat(_0x1ce0b9(0x201))),_0x492c2c!=_0x1ce0b9(0x201)&&(enableFiatToggle=![],storeFiat(_0x1ce0b9(0x1c2))),stablecoins={'eur':{'coin':''+_0x4057c9+_0x492c2c,'symbol':_0x4057c9+'/'+_0x492c2c},'usd':{'coin':''+_0x4057c9+_0x1bb984,'symbol':_0x4057c9+'/'+_0x1bb984}};}async function initwsCcxt(){const _0x4c9bd6=_0x1bf3c8;initCycle++;const _0x4b1f3e=initCycle;let _0x127a8a=[];config[_0x4c9bd6(0x34e)]['forEach'](_0x30da58=>{const _0x715aff=_0x4c9bd6;if(!_0x30da58[_0x715aff(0x279)]&&_0x30da58[_0x715aff(0x2d4)]!=config['basecoin'])_0x127a8a[_0x715aff(0x252)](_0x30da58[_0x715aff(0x20f)]);});if(!_0x127a8a[_0x4c9bd6(0x306)](stablecoins[_0x4c9bd6(0x1f1)][_0x4c9bd6(0x20f)]))_0x127a8a['push'](stablecoins[_0x4c9bd6(0x1f1)]['symbol']);if(!_0x127a8a[_0x4c9bd6(0x306)](stablecoins[_0x4c9bd6(0x358)]['symbol']))_0x127a8a[_0x4c9bd6(0x252)](stablecoins[_0x4c9bd6(0x358)]['symbol']);loadCoins(_0x127a8a),_0x127a8a=validateSymbols(_0x127a8a);const _0x24f41f=async _0x58c782=>{const _0x4900e1=_0x4c9bd6;let _0x43da5a;try{const _0x22691c=await getTickers(_0x58c782);Object[_0x4900e1(0x29b)](_0x22691c)[_0x4900e1(0x27b)](_0xc57945=>{const _0xc4aa6=_0x4900e1;_0x43da5a=_0xc57945[0x1][_0xc4aa6(0x20f)],gTicker[noslash(_0x43da5a)]=_0xc57945[0x1][_0xc4aa6(0x1af)],gChange[_0x43da5a]=_0xc57945[0x1][_0xc4aa6(0x352)];});}catch(_0xb1138){await handleError(_0xb1138,_0x4900e1(0x316),_0x43da5a);}},_0x276abd=async _0x145ec4=>{const _0x53fbd1=_0x4c9bd6;while(initCycle==_0x4b1f3e){if(!botPaused)try{const _0x1612ad=await exchange[_0x53fbd1(0x2f8)](_0x145ec4);gTicker[noslash(_0x1612ad[0x0][_0x53fbd1(0x20f)])]=_0x1612ad[0x0]['price'];}catch(_0x2bce9b){if(!exchangeStopped)await handleError(_0x2bce9b,_0x53fbd1(0x2ee),_0x145ec4);}else await sleep(0x64);}},_0x4523e2=async _0x41c7f0=>{const _0x5a3bad=_0x4c9bd6;while(initCycle==_0x4b1f3e){if(!botPaused)try{const _0x204f35=await exchange[_0x5a3bad(0x2d5)](_0x41c7f0),_0x4367a1=_0x204f35[_0x5a3bad(0x291)]();gTicker[noslash(_0x4367a1[_0x5a3bad(0x20f)])]=_0x4367a1['price'];}catch(_0x33d84d){if(!exchangeStopped)await handleError(_0x33d84d,_0x5a3bad(0x23c),_0x41c7f0[_0x5a3bad(0x2e8)]());}else await sleep(0x64);}},_0x581a8a=async _0x5eef4c=>{const _0x4a8178=_0x4c9bd6;while(initCycle==_0x4b1f3e){if(!botPaused){let _0x2a6adb;try{await sleep(0x3c*0x3e8);const _0x1de777=await getTickers(_0x5eef4c);Object[_0x4a8178(0x29b)](_0x1de777)[_0x4a8178(0x27b)](_0x3a7a69=>{const _0x54bc8d=_0x4a8178;_0x2a6adb=_0x3a7a69[0x1]['symbol'],gChange[_0x2a6adb]=_0x3a7a69[0x1][_0x54bc8d(0x352)];});}catch(_0xc5765d){if(!exchangeStopped)await handleError(_0xc5765d,_0x4a8178(0x213),_0x2a6adb);}}else await sleep(0x64);}},_0x884581=async _0x4ef662=>{const _0x4658a9=_0x4c9bd6;while(initCycle==_0x4b1f3e){if(!botPaused)try{const _0x567e33=await exchange[_0x4658a9(0x33a)](_0x4ef662);initCycle==_0x4b1f3e&&_0x567e33[_0x4658a9(0x27b)](_0x39fbb4=>{updateNumberCoinsCcxt(_0x39fbb4);});}catch(_0x1168c2){if(!exchangeStopped)await handleError(_0x1168c2,_0x4658a9(0x256));}else await sleep(0x64);}};_0x24f41f(_0x127a8a),_0x581a8a(_0x127a8a),exchange[_0x4c9bd6(0x211)][_0x4c9bd6(0x2d5)]&&!(config[_0x4c9bd6(0x355)]==_0x4c9bd6(0x31b)&&_0x127a8a[_0x4c9bd6(0x249)]>0xa)?_0x4523e2(_0x127a8a):_0x127a8a[_0x4c9bd6(0x27b)](_0x5348ea=>{_0x276abd(_0x5348ea);}),_0x127a8a[_0x4c9bd6(0x27b)](_0x2a23a0=>{_0x884581(_0x2a23a0);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x189ae7){const _0x3b3f4a=_0x1bf3c8;let _0x406e5f={};try{if(config['exchange']!=_0x3b3f4a(0x2ad))_0x406e5f=await exchange[_0x3b3f4a(0x2f3)](_0x189ae7);else for(const _0x4ea593 of _0x189ae7){const _0x17a426=await exchange[_0x3b3f4a(0x1d2)](_0x4ea593);_0x406e5f[_0x4ea593]=_0x17a426;}return _0x406e5f;}catch(_0x2816cc){throw _0x2816cc;}}function setBlockTransactionDetection(_0x4ba318){const _0x89b200=_0x1bf3c8;blockTransactionDetection=_0x4ba318,logger[_0x89b200(0x223)](_0x89b200(0x2f0)+blockTransactionDetection);}async function detectLiquidityChange(_0x7d6d16=0x0){const _0x4b35a0=_0x1bf3c8;transactionDetectionOngoing=!![];try{const _0x10e19a=await getCoins(_0x7d6d16),[_0x30cf9f,_0x4cb0ee]=_0x10e19a;let _0x5a83d2=[];currentCoins[_0x4b35a0(0x27b)](_0x4d1eb9=>{const _0xcc56e=_0x4b35a0,_0x105ea1=_0x30cf9f[_0xcc56e(0x1b8)](_0x297a7b=>_0x297a7b[_0xcc56e(0x2d4)]==_0x4d1eb9['coin']);if(_0x105ea1){if(_0x4d1eb9[_0xcc56e(0x24d)]!=_0x105ea1['number']){let _0x214a4f;if(_0x4d1eb9[_0xcc56e(0x2d4)]!=config[_0xcc56e(0x1ab)]){const _0x5c718d=gTicker[noslash(_0x4d1eb9[_0xcc56e(0x20f)])];_0x214a4f=_0x4d1eb9[_0xcc56e(0x288)]?0x1/_0x5c718d:_0x5c718d;}else _0x214a4f=0x1;_0x5a83d2[_0xcc56e(0x252)]({'coin':_0x4d1eb9[_0xcc56e(0x2d4)],'symbol':_0x4d1eb9[_0xcc56e(0x20f)],'price':_0x214a4f,'number':Number(formatResult(_0x105ea1[_0xcc56e(0x24d)]-_0x4d1eb9[_0xcc56e(0x24d)],0x8)),'basecoinvalue':_0x214a4f*(_0x105ea1[_0xcc56e(0x24d)]-_0x4d1eb9[_0xcc56e(0x24d)])});}}});if(_0x5a83d2[_0x4b35a0(0x249)]>0x0&&!blockTransactionDetection){for(const _0x2330bb of _0x5a83d2){if(config[_0x4b35a0(0x221)]){logger[_0x4b35a0(0x223)](_0x4b35a0(0x2d2)+_0x2330bb[_0x4b35a0(0x2e4)]+_0x4b35a0(0x192)+lastFees[_0x4b35a0(0x34d)]);if(lastFees[_0x4b35a0(0x34d)]==0x0||Math[_0x4b35a0(0x302)](_0x2330bb['basecoinvalue'])>lastFees['highest']*0x3){if(config['autoliquidity']==_0x4b35a0(0x18a)){delete _0x2330bb[_0x4b35a0(0x20f)],delete _0x2330bb[_0x4b35a0(0x2e4)];let _0x590cbf=[],_0x587030=[...config[_0x4b35a0(0x1ea)]]||[],_0x38cb32=config[_0x4b35a0(0x1ea)];_0x587030[_0x4b35a0(0x22d)]((_0x471f42,_0x27e92d)=>_0x471f42[_0x4b35a0(0x1b0)]>_0x27e92d[_0x4b35a0(0x1b0)]?-0x1:_0x27e92d[_0x4b35a0(0x1b0)]>_0x471f42['date']?0x1:0x0);const _0x24cdf1=getDate();if(_0x587030[0x0]){const _0x2e6543=fns[_0x4b35a0(0x25d)](_0x587030[0x0][_0x4b35a0(0x1b0)],_0x4b35a0(0x1d9),new Date()),_0x410c92=fns['parse'](_0x24cdf1,'yyyy/MM/dd',new Date());if(fns[_0x4b35a0(0x31c)](_0x2e6543,_0x410c92)){_0x590cbf=_0x587030[0x0][_0x4b35a0(0x304)];const _0x3c93b5=_0x590cbf[_0x4b35a0(0x1b8)](_0x477300=>_0x477300[_0x4b35a0(0x2d4)]==_0x2330bb['coin']);_0x3c93b5?(_0x3c93b5[_0x4b35a0(0x24d)]+=_0x2330bb[_0x4b35a0(0x24d)],_0x3c93b5[_0x4b35a0(0x24d)]==0x0&&(_0x590cbf=_0x590cbf[_0x4b35a0(0x1a6)](_0x3d292c=>{const _0x231417=_0x4b35a0;return _0x3d292c['coin']!=_0x2330bb[_0x231417(0x2d4)];}))):_0x590cbf[_0x4b35a0(0x252)](_0x2330bb);const _0xdfc7cb=_0x38cb32[_0x4b35a0(0x1b8)](_0x1bfb74=>_0x1bfb74[_0x4b35a0(0x1b0)]==_0x24cdf1);_0xdfc7cb[_0x4b35a0(0x304)]=_0x590cbf;}else _0x38cb32['push']({'date':_0x24cdf1,'changes':[_0x2330bb]});}const _0x449dee=_0x38cb32[_0x4b35a0(0x1b8)](_0x1aceaf=>_0x1aceaf['date']==_0x24cdf1);if(_0x449dee){let _0xaa438b=!![];_0x449dee[_0x4b35a0(0x304)][_0x4b35a0(0x27b)](_0x1a7fbb=>{const _0x2f446a=_0x4b35a0;if(_0x1a7fbb[_0x2f446a(0x24d)]!=0x0)_0xaa438b=![];}),_0xaa438b&&(_0x38cb32=_0x38cb32[_0x4b35a0(0x1a6)](_0x428f8b=>{return _0x428f8b['date']!=_0x24cdf1;}));}let _0x348651=dbConfig['get'](_0x4b35a0(0x242))[_0x4b35a0(0x1b8)]({'botID':botID})[_0x4b35a0(0x310)]();_0x348651&&(dbConfig['get']('bot')[_0x4b35a0(0x1b8)]({'botID':botID})[_0x4b35a0(0x1f2)]({'liquidity':_0x38cb32})['write'](),config[_0x4b35a0(0x1ea)]=_0x38cb32);logHistory(_0x4b35a0(0x21a),_0x4b35a0(0x1f6)+Math[_0x4b35a0(0x302)](_0x2330bb['number'])+'\x20'+_0x2330bb[_0x4b35a0(0x2d4)]+'\x20'+(_0x2330bb['number']>0x0?'added':'removed')+_0x4b35a0(0x325)),proxyEmit('configuration',emittedConfiguration());const _0x91e5c2=getNormalizedPerformance();emitPerformance(_0x91e5c2),getStartingBalances(_0x91e5c2),logger[_0x4b35a0(0x223)](_0x4b35a0(0x1d0));}else config['autoliquidity']==_0x4b35a0(0x2a0)&&(config[_0x4b35a0(0x31e)]?(await storeHeadless({'headless':![]}),logHistory(_0x4b35a0(0x21a),'Portfolio\x20change\x20detected:\x20'+Math[_0x4b35a0(0x302)](_0x2330bb[_0x4b35a0(0x24d)])+'\x20'+_0x2330bb[_0x4b35a0(0x2d4)]+'\x20'+(_0x2330bb['number']>0x0?_0x4b35a0(0x34f):'removed')+_0x4b35a0(0x1b7))):logger[_0x4b35a0(0x223)]('Portfolio\x20change\x20detected:\x20'+Math[_0x4b35a0(0x302)](_0x2330bb[_0x4b35a0(0x24d)])+'\x20'+_0x2330bb[_0x4b35a0(0x2d4)]+'\x20'+(_0x2330bb[_0x4b35a0(0x24d)]>0x0?'added':_0x4b35a0(0x1bc))+_0x4b35a0(0x1e2)));}else logger['debug'](_0x4b35a0(0x292)+Math[_0x4b35a0(0x302)](_0x2330bb[_0x4b35a0(0x24d)])+'\x20'+_0x2330bb[_0x4b35a0(0x2d4)]+'\x20'+(_0x2330bb['number']>0x0?_0x4b35a0(0x34f):'removed'));}else logger[_0x4b35a0(0x223)](_0x4b35a0(0x1f6)+Math[_0x4b35a0(0x302)](_0x2330bb['number'])+'\x20'+_0x2330bb['coin']+'\x20'+(_0x2330bb[_0x4b35a0(0x24d)]>0x0?_0x4b35a0(0x34f):'removed')+'\x20-\x20auto\x20adjusting\x20liquidity\x20is\x20disabled');}currentCoins=_0x30cf9f,currentCoinsAll=_0x4cb0ee;}}catch(_0x13ece4){if(!exchangeStopped)await handleError(_0x13ece4,_0x4b35a0(0x254));}transactionDetectionOngoing=![];}async function watchTransactions(){await sleep(0x14*0x3e8);while(!![]){!botPaused&&!blockTransactionDetection&&coinsLoaded?(detectLiquidityChange(),await sleep(watchTransactionsInterval)):await sleep(0x3e8);}}async function loadSymbols(){const _0x593e8a=_0x1bf3c8;try{markets=await exchange['loadMarkets'](!![]),allSymbols=[],Object[_0x593e8a(0x29b)](markets)[_0x593e8a(0x27b)](_0x2f218e=>{const _0x18232a=_0x593e8a;_0x2f218e[0x1][_0x18232a(0x244)]&&_0x2f218e[0x1][_0x18232a(0x289)]&&allSymbols[_0x18232a(0x252)](_0x2f218e[0x0]);});}catch(_0x2fc251){markets?logger[_0x593e8a(0x223)](_0x593e8a(0x1e5)+_0x2fc251[_0x593e8a(0x2e8)]()):(loading[_0x593e8a(0x208)]=!![],_0x2fc251[_0x593e8a(0x2e8)]()[_0x593e8a(0x261)]()['includes'](_0x593e8a(0x2de))||_0x2fc251[_0x593e8a(0x2e8)]()['toLowerCase']()['includes'](_0x593e8a(0x33c))?(logHistory(_0x593e8a(0x1d3),'Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)'),loading[_0x593e8a(0x1d3)]=_0x593e8a(0x1d7)):handleErrorNoStop(_0x2fc251,_0x593e8a(0x214),!![]),logHistory(_0x593e8a(0x1d3),_0x593e8a(0x343)),logHistory('error','Pausing\x20for\x20'+loadCoinsRetryInterval/0xea60+_0x593e8a(0x202)),logger['debug'](_0x593e8a(0x2ec),_0x2fc251),emitLoadingProgress(),botPaused=!![],await sleep(loadCoinsRetryInterval),restartBot());}}function validateSymbols(_0x5b1072){const _0x524187=_0x1bf3c8;let _0x586ecc=[];return _0x5b1072[_0x524187(0x27b)](_0x4b0542=>{const _0x20d7f9=_0x524187;!allSymbols[_0x20d7f9(0x306)](_0x4b0542)?logHistory(_0x20d7f9(0x1d3),'Invalid\x20symbol:\x20'+_0x4b0542+'\x20-\x20exclude\x20coin\x20in\x20the\x20configuration'):_0x586ecc['push'](_0x4b0542);}),_0x586ecc;}async function initclient(){const _0x251b83=_0x1bf3c8;proxyEmit(_0x251b83(0x19e),emittedConfiguration()),proxyEmit('exchanges',supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x251b83(0x2b7),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x3e950f=getNormalizedPerformance();emitPerformance(_0x3e950f),getStartingBalances(_0x3e950f);}async function toggleBotMode(){const _0x377850=_0x1bf3c8;let _0x7009a6=dbConfig['get']('bot')[_0x377850(0x1b8)]({'botID':botID})[_0x377850(0x310)]();if(_0x7009a6){const _0x3df8a5=!_0x7009a6['headless'];dbConfig[_0x377850(0x1db)]('bot')[_0x377850(0x1b8)]({'botID':botID})[_0x377850(0x1f2)]({'headless':_0x3df8a5})[_0x377850(0x190)](),config[_0x377850(0x31e)]=_0x3df8a5,proxyEmit(_0x377850(0x19e),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x453646=_0x1bf3c8;process[_0x453646(0x1de)]({'updatebotmanager':!![]},_0x5ecfd8=>{}),logger['debug'](_0x453646(0x27c)+config[_0x453646(0x31e)]);}async function loadCoins(_0x12962b){const _0x1533b7=_0x1bf3c8;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x19e602,_0x297ef9=0x0,_0x43a5b6=0x0;_0x12962b[_0x1533b7(0x27b)](_0x162d4c=>{const _0x5bd358=_0x1533b7;loading[_0x5bd358(0x307)][_0x5bd358(0x252)](_0x162d4c);}),loadingCanceled=![];let _0x3c5f52=![];while(_0x19e602!=_0x12962b[_0x1533b7(0x249)]+maxLoadingProgress){_0x19e602=loadingProgress,_0x12962b['forEach'](_0x1c7349=>{const _0xde7de4=_0x1533b7;if(gTicker[noslash(_0x1c7349)]){loading[_0xde7de4(0x307)]=loading['remainingSymbols']['filter'](_0x34ba88=>_0x34ba88!=_0x1c7349);if(!watchedSymbols['includes'](_0x1c7349))watchedSymbols['push'](_0x1c7349);_0x19e602++;}}),loading[_0x1533b7(0x30b)]=Math[_0x1533b7(0x20b)](_0x19e602/(_0x12962b[_0x1533b7(0x249)]+maxLoadingProgress)*0x64);loading[_0x1533b7(0x30b)]!=0x64&&(_0x43a5b6>0x1e*0x5&&(loading['timeout']=!![],emitLoadingProgress()),_0x43a5b6>0x78*0x5&&!_0x3c5f52&&(_0x3c5f52=!![],logHistory(_0x1533b7(0x1d3),'Failed\x20to\x20load\x20coin\x20data\x20for\x20'+loading[_0x1533b7(0x307)]['join'](',\x20')+_0x1533b7(0x243)),logHistory(_0x1533b7(0x1d3),'Pausing\x20for\x20'+loadCoinsRetryInterval/0xea60+_0x1533b7(0x202)),loadingCanceled=!![],await sleep(loadCoinsRetryInterval),restartBot()));if(loadingCanceled){loading['cancel']=!![],emitLoadingProgress();break;}else _0x297ef9!=loading[_0x1533b7(0x30b)]&&(_0x297ef9=loading['progress'],emitLoadingProgress()),_0x43a5b6++,await sleep(0xc8);}_0x19e602==_0x12962b[_0x1533b7(0x249)]+maxLoadingProgress&&(coinsLoaded=!![],process['send']({'status':_0x1533b7(0x269),'live':_0x1533b7(0x1a9)},_0x5a50d1=>{}),_0x3c5f52&&logHistory(_0x1533b7(0x21a),_0x1533b7(0x206)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x47bbf8=_0x1bf3c8;proxyEmit(_0x47bbf8(0x19e),{...emittedConfiguration(),'configstate':_0x47bbf8(0x2f5)});}function emitLoadingProgress(){proxyEmit('coin-loading-progress',loading);}async function getFiat(){const _0x130099=_0x1bf3c8;let _0x5738e3=gTicker[stablecoins[_0x130099(0x1f1)][_0x130099(0x2d4)]],_0x4fe1ab=gTicker[stablecoins[_0x130099(0x358)][_0x130099(0x2d4)]];return{'eur':Number(_0x5738e3),'usd':Number(_0x4fe1ab)};}function capitalize(_0x2c0538){const _0xef55e2=_0x1bf3c8;return _0x2c0538[_0xef55e2(0x329)](0x0,0x1)[_0xef55e2(0x33f)]()+_0x2c0538['substring'](0x1);}function supportedExchanges(){const _0x555c7f=_0x1bf3c8,_0x1ff781=['ws','fetchTickers',_0x555c7f(0x1d2),_0x555c7f(0x2f8),_0x555c7f(0x33a),_0x555c7f(0x253),_0x555c7f(0x30e),'fetchOpenOrders','fetchBalance'];let _0x6053c7=[],_0x6478f9=[],_0x365ea9=ccxt[_0x555c7f(0x233)][_0x555c7f(0x1c3)];_0x365ea9['forEach'](_0x899642=>{const _0x56f3da=_0x555c7f;try{const _0x3ab3af=new ccxt[(_0x56f3da(0x233))][_0x899642]();_0x6478f9['push'](_0x3ab3af);}catch(_0x2bdcc9){}}),_0x6478f9[_0x555c7f(0x27b)](_0x2313f3=>{const _0x380f59=_0x555c7f;let _0xbe9528=0x0;_0x1ff781[_0x380f59(0x27b)](_0x2c87c2=>{const _0x144825=_0x380f59;_0x2c87c2 in _0x2313f3[_0x144825(0x211)]&&_0x2313f3[_0x144825(0x211)][_0x2c87c2]&&_0xbe9528++;}),_0xbe9528==_0x1ff781['length']&&(!excludedExchanges['includes'](_0x2313f3['id'])&&_0x6053c7[_0x380f59(0x252)](capitalize(_0x2313f3['id'])));});let _0x16db91=[];return _0x365ea9['forEach'](_0x592c16=>{_0x592c16=capitalize(_0x592c16);if(!_0x6053c7['includes'](_0x592c16))_0x16db91['push'](_0x592c16);}),_0x6053c7;}function setStartDatePerformance(){const _0x6d2186=_0x1bf3c8;if(config&&config['liquidity'][0x0][_0x6d2186(0x304)][_0x6d2186(0x249)]!=0x0){const _0x2a3cc3=config[_0x6d2186(0x1ea)][0x0][_0x6d2186(0x304)];dbPerformance[_0x6d2186(0x1db)](_0x6d2186(0x2b0))[_0x6d2186(0x1b8)]({'date':config[_0x6d2186(0x27f)]})[_0x6d2186(0x1f2)]({'coins':_0x2a3cc3})[_0x6d2186(0x190)]();}}function calculatePnL(_0x138fad,_0x35dae9,_0x4b0ce3,_0xd494,_0x43faf6,_0x3dbe7b){const _0x1937a7=_0x1bf3c8;!_0x138fad[_0x1937a7(0x306)]('/'+config[_0x1937a7(0x1ab)])&&(_0x4b0ce3=_0x4b0ce3=='buy'?_0x1937a7(0x27a):'buy');!_0x3dbe7b[_0x35dae9]&&(_0x3dbe7b[_0x35dae9]={'number':0x0,'sells':0x0,'buys':0x0,'breakeven':0x0,'realizedPnL':0x0});let _0x319ed1=0x0,_0x3af79d,_0xa1a953;if(_0x4b0ce3==_0x1937a7(0x207))_0xa1a953=_0x3dbe7b[_0x35dae9][_0x1937a7(0x24d)]*_0x3dbe7b[_0x35dae9][_0x1937a7(0x1e8)]+_0x43faf6*_0xd494,_0x3dbe7b[_0x35dae9][_0x1937a7(0x24d)]+=_0xd494,_0x3dbe7b[_0x35dae9]['breakeven']=_0x3dbe7b[_0x35dae9][_0x1937a7(0x24d)]!=0x0?_0xa1a953/_0x3dbe7b[_0x35dae9][_0x1937a7(0x24d)]:0x0,_0x3dbe7b[_0x35dae9]['buys']++;else _0x4b0ce3==_0x1937a7(0x27a)&&(_0x3af79d=Math[_0x1937a7(0x23e)](_0x3dbe7b[_0x35dae9][_0x1937a7(0x24d)],_0xd494),_0x319ed1=(_0x43faf6-_0x3dbe7b[_0x35dae9][_0x1937a7(0x1e8)])*_0x3af79d,_0xa1a953=Math[_0x1937a7(0x1d5)](_0x3dbe7b[_0x35dae9]['number']*_0x3dbe7b[_0x35dae9][_0x1937a7(0x1e8)]-_0x3af79d*_0x3dbe7b[_0x35dae9]['breakeven'],0x0),_0x3dbe7b[_0x35dae9]['number']-=_0x3af79d,_0x3dbe7b[_0x35dae9][_0x1937a7(0x1e8)]=_0x3dbe7b[_0x35dae9][_0x1937a7(0x24d)]!=0x0?_0xa1a953/_0x3dbe7b[_0x35dae9]['number']:0x0,_0x3dbe7b[_0x35dae9]['realizedPnL']+=_0x319ed1,_0x3dbe7b[_0x35dae9][_0x1937a7(0x2d1)]++);return _0x319ed1;}async function generatePnL(){const _0x1381ea=_0x1bf3c8;pnlGenerationNeeded=![],logger[_0x1381ea(0x223)](_0x1381ea(0x260));const _0x33a2c0=dbLogs[_0x1381ea(0x1db)](_0x1381ea(0x187))[_0x1381ea(0x310)]();let _0x41cf88={},_0x1ea012=0x0,_0x50c63b=0x0,_0x27cfb6=config[_0x1381ea(0x27f)];const _0x40512f=fns[_0x1381ea(0x25d)](_0x27cfb6,_0x1381ea(0x1d9),new Date()),_0x4db1e0=new Date();let _0x12d301=0x0;for(let _0x587aa4=_0x40512f;!fns['isBefore'](_0x4db1e0,_0x587aa4);_0x587aa4=fns['addDays'](_0x587aa4,0x1)){const _0x368e4d=fns[_0x1381ea(0x282)](_0x587aa4,_0x1381ea(0x1d9));while(_0x1ea012<_0x33a2c0[_0x1381ea(0x249)]){const _0x52dff0=new Date(_0x33a2c0[_0x1ea012][_0x1381ea(0x268)]);if(fns[_0x1381ea(0x26f)](_0x52dff0,_0x587aa4))_0x1ea012++;else{if(_0x33a2c0[_0x1ea012][_0x1381ea(0x268)][_0x1381ea(0x306)](_0x368e4d)){const _0x1e4ac4=_0x33a2c0[_0x1ea012];if(_0x1e4ac4['type']==='order'&&(_0x1e4ac4[_0x1381ea(0x195)][_0x1381ea(0x306)](_0x1381ea(0x1e9))||_0x1e4ac4[_0x1381ea(0x195)][_0x1381ea(0x306)](_0x1381ea(0x236)))){const _0x41b225=_0x1e4ac4[_0x1381ea(0x195)][_0x1381ea(0x1c0)](/([A-Z]+\/[A-Z]+) (sell|buy) #([\d.]+) @([\d.]+)/);if(_0x41b225){const [,_0x2b1c1c,_0x1368b1,_0x4d8420,_0x10e211]=_0x41b225,_0x59d793=_0x2b1c1c[_0x1381ea(0x306)]('/'+config['basecoin'])?_0x2b1c1c['split']('/')[0x0]:_0x2b1c1c[_0x1381ea(0x2a9)]('/')[0x1],_0x877f46=calculatePnL(_0x2b1c1c,_0x59d793,_0x1368b1,parseFloat(_0x4d8420),parseFloat(_0x10e211),_0x41cf88);_0x50c63b+=_0x877f46;}}_0x1ea012++;}else break;}}dbPerformance[_0x1381ea(0x1db)]('data')[_0x1381ea(0x1b8)]({'date':_0x368e4d})[_0x1381ea(0x1f2)]({'pnl':_0x50c63b})['write']();}dbCoinResults['set']('coins',_0x41cf88)[_0x1381ea(0x190)](),logger[_0x1381ea(0x223)]('Generated\x20PnL\x20data');const _0xd1199a=getNormalizedPerformance();emitPerformance(_0xd1199a);}async function updatePnL(_0x134c2c){const _0x952091=_0x1bf3c8,{symbol:_0x314f34,coin:_0x3202fb,amount:_0x238452,price:_0x20f3b1,side:_0x42c3e7,reverse:_0x4c7a8a}=_0x134c2c;let _0x5c3c68=dbCoinResults[_0x952091(0x1db)](_0x952091(0x2b2))[_0x952091(0x310)]();const _0x3b9cfe=calculatePnL(_0x314f34,_0x3202fb,_0x42c3e7,_0x238452,_0x20f3b1,_0x5c3c68);dbCoinResults[_0x952091(0x205)](_0x952091(0x2b2),_0x5c3c68)[_0x952091(0x190)]();const _0x1aae79=getTimeStamp()[_0x952091(0x2a9)]('\x20')[0x0];let _0x5cae67=dbPerformance[_0x952091(0x1db)](_0x952091(0x2b0))['find']({'date':_0x1aae79})[_0x952091(0x310)]();_0x5cae67?(_0x5cae67[_0x952091(0x2ce)]+=_0x3b9cfe,dbPerformance['get']('data')[_0x952091(0x1b8)]({'date':_0x1aae79})[_0x952091(0x1f2)](_0x5cae67)[_0x952091(0x190)]()):await storePerformance();const _0x5c5188=getNormalizedPerformance();emitPerformance(_0x5c5188);}async function validate24hChanges(){const _0x405fe1=_0x1bf3c8;for(const _0x7a70d3 of currentCoins){if(_0x7a70d3[_0x405fe1(0x2d4)]!=config['basecoin']){let _0x4bc309;_0x7a70d3[_0x405fe1(0x288)]?_0x4bc309=formatResult((0x1/(gChange[_0x7a70d3[_0x405fe1(0x20f)]]/0x64+0x1)-0x1)*0x64,0x3):_0x4bc309=gChange[_0x7a70d3[_0x405fe1(0x20f)]],_0x4bc309<config[_0x405fe1(0x204)]&&(logHistory('error',_0x7a70d3[_0x405fe1(0x2d4)]+_0x405fe1(0x20d)+_0x4bc309+'%'),logHistory(_0x405fe1(0x1d3),_0x405fe1(0x219)),logHistory(_0x405fe1(0x1d3),_0x405fe1(0x200)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x341917,_0x51ee9f){const _0x406bb2=_0x1bf3c8;if(!_0x341917)return!![];const _0x58cbf0=_0x51ee9f[_0x406bb2(0x2a9)]('.'),_0x25fafc=_0x341917[_0x406bb2(0x2a9)]('.');for(var _0x189086=0x0;_0x189086<_0x25fafc[_0x406bb2(0x249)];_0x189086++){const _0x20da4c=~~_0x25fafc[_0x189086],_0xc9dcda=~~_0x58cbf0[_0x189086];if(_0x20da4c<_0xc9dcda)return!![];if(_0x20da4c>_0xc9dcda)return![];}return![];}async function oneTimeMigration(){const _0x40f450=_0x1bf3c8;let _0x2f6639=dbLogs[_0x40f450(0x1db)](_0x40f450(0x19c))[_0x40f450(0x310)]();if(isOlderVersion(_0x2f6639,_0x40f450(0x1e3))){let _0x5287d8=[];const _0x16a1ee=dbLogs[_0x40f450(0x1db)](_0x40f450(0x187))[_0x40f450(0x310)]();_0x16a1ee[_0x40f450(0x27b)](_0x522189=>{const _0x2c54fd=_0x40f450;_0x5287d8['push']({'time':_0x522189[_0x2c54fd(0x268)],'type':_0x522189[_0x2c54fd(0x2d0)],'event':_0x522189[_0x2c54fd(0x195)]});}),dbLogs[_0x40f450(0x1db)](_0x40f450(0x187))[_0x40f450(0x1f2)](_0x5287d8)[_0x40f450(0x190)]();}let _0x143ae2=dbConfig[_0x40f450(0x1db)]('version')[_0x40f450(0x310)]();if(isOlderVersion(_0x143ae2,_0x40f450(0x1e3))){let _0x4999aa=dbConfig[_0x40f450(0x1db)](_0x40f450(0x242))[_0x40f450(0x1b8)]({'botID':botID})[_0x40f450(0x310)]();if(_0x4999aa){let _0x51b50e=[];_0x4999aa[_0x40f450(0x34e)][_0x40f450(0x27b)](_0x3cb475=>{const _0x29c30f=_0x40f450;_0x51b50e[_0x29c30f(0x252)]({'coin':_0x3cb475['coin'],'number':_0x3cb475['startnumber'],'price':_0x3cb475[_0x29c30f(0x1c7)]}),delete _0x3cb475[_0x29c30f(0x340)],delete _0x3cb475['startprice'];});if(_0x51b50e[_0x40f450(0x249)]!==0x0)fs[_0x40f450(0x2e1)](configbackuppath+('starting-balance-'+botID+_0x40f450(0x30c)),JSON['stringify'](_0x51b50e,null,0x4),function(_0x1e1af8){if(_0x1e1af8){}});const _0x3ac39b=(_0x10776a,_0x1f91c6)=>{const _0x5c3871=_0x40f450;let _0x30af97=[];_0x1f91c6['forEach'](_0x2e17d9=>{const _0x23e72d=_0x3629,_0xa9915d=_0x10776a[_0x23e72d(0x1b8)](_0x13dbb2=>_0x13dbb2[_0x23e72d(0x2d4)]==_0x2e17d9[_0x23e72d(0x2d4)]);if(!_0xa9915d)_0x30af97[_0x23e72d(0x252)](_0x2e17d9);});let _0x12beb5=[];return _0x10776a[_0x5c3871(0x27b)](_0x33650=>{const _0x41bc7c=_0x5c3871,_0x49f8c5=_0x1f91c6[_0x41bc7c(0x1b8)](_0x574239=>_0x574239[_0x41bc7c(0x2d4)]==_0x33650[_0x41bc7c(0x2d4)]);if(!_0x49f8c5||_0x49f8c5['number']==0x0&&_0x33650['number']!=0x0)_0x12beb5[_0x41bc7c(0x252)](_0x33650);}),{'missingDay1':_0x30af97,'notInDay2':_0x12beb5};},_0x23e96b=dbPerformance[_0x40f450(0x1db)](_0x40f450(0x2b0))[_0x40f450(0x2a5)]()[_0x40f450(0x310)]();if(_0x23e96b[_0x40f450(0x249)]>0x1){const {missingDay1:_0x2c1ff5,notInDay2:_0xf6167a}=_0x3ac39b(_0x51b50e,_0x23e96b[0x1][_0x40f450(0x2b2)]);_0x51b50e=[..._0x51b50e,..._0x2c1ff5],_0xf6167a['forEach'](_0x42746d=>{const _0x3d46d8=_0x40f450;let _0x5cde9e=_0x51b50e['findIndex'](_0x545628=>_0x545628[_0x3d46d8(0x2d4)]==_0x42746d['coin']);_0x5cde9e!=-0x1&&_0x51b50e[_0x3d46d8(0x191)](_0x5cde9e,0x1);});}_0x51b50e[_0x40f450(0x22d)]((_0x7a2c64,_0x59e178)=>_0x7a2c64[_0x40f450(0x2d4)]>_0x59e178[_0x40f450(0x2d4)]?0x1:_0x59e178[_0x40f450(0x2d4)]>_0x7a2c64[_0x40f450(0x2d4)]?-0x1:0x0);let _0x5c8585=[{'date':_0x4999aa[_0x40f450(0x27f)],'changes':_0x51b50e}];_0x23e96b[_0x40f450(0x249)]>0x2&&_0x23e96b[_0x40f450(0x27b)]((_0x16fa60,_0x2ad20a)=>{const _0x5790be=_0x40f450;if(_0x2ad20a>0x0&&_0x2ad20a<_0x23e96b[_0x5790be(0x249)]-0x1){const {missingDay1:_0x119e80,notInDay2:_0x5cde08}=_0x3ac39b(_0x23e96b[_0x2ad20a][_0x5790be(0x2b2)],_0x23e96b[_0x2ad20a+0x1][_0x5790be(0x2b2)]);_0x51b50e=[],(_0x119e80['length']!=0x0||_0x5cde08[_0x5790be(0x249)]!=0x0)&&(_0x119e80[_0x5790be(0x249)]!=0x0&&_0x51b50e[_0x5790be(0x252)](..._0x119e80),_0x5cde08[_0x5790be(0x249)]!=0x0&&(_0x5cde08['forEach'](_0x359b0b=>{const _0x1eca55=_0x5790be;_0x359b0b[_0x1eca55(0x24d)]=-_0x359b0b[_0x1eca55(0x24d)];}),_0x51b50e[_0x5790be(0x252)](..._0x5cde08)),_0x51b50e[_0x5790be(0x22d)]((_0x4a284f,_0x45f889)=>_0x4a284f[_0x5790be(0x2d4)]>_0x45f889[_0x5790be(0x2d4)]?0x1:_0x45f889[_0x5790be(0x2d4)]>_0x4a284f[_0x5790be(0x2d4)]?-0x1:0x0),_0x5c8585['push']({'date':_0x23e96b[_0x2ad20a+0x1][_0x5790be(0x1b0)],'changes':_0x51b50e}));}}),dbConfig[_0x40f450(0x1db)](_0x40f450(0x242))[_0x40f450(0x1b8)]({'botID':botID})[_0x40f450(0x1f2)]({..._0x4999aa,'liquidity':_0x5c8585})[_0x40f450(0x190)]();}}if(isOlderVersion(_0x143ae2,_0x40f450(0x1cf))){let _0x46d79e=dbConfig[_0x40f450(0x1db)]('bot')[_0x40f450(0x1b8)]({'botID':botID})[_0x40f450(0x310)]();if(_0x46d79e){const _0x26b5e8=_0x46d79e[_0x40f450(0x355)],_0x3aaa2e=_0x26b5e8?capitalize(_0x26b5e8):'Binance';dbConfig[_0x40f450(0x1db)]('bot')[_0x40f450(0x1b8)]({'botID':botID})['assign']({'exchange':_0x3aaa2e})[_0x40f450(0x190)]();}}if(isOlderVersion(_0x143ae2,_0x40f450(0x24c))){let _0x303e92=dbConfig[_0x40f450(0x1db)]('bot')[_0x40f450(0x1b8)]({'botID':botID})[_0x40f450(0x310)]();if(_0x303e92){const _0x484281=_0x303e92[_0x40f450(0x28d)],_0x980467=_0x484281?_0x40f450(0x336):![];dbConfig[_0x40f450(0x1db)](_0x40f450(0x242))[_0x40f450(0x1b8)]({'botID':botID})[_0x40f450(0x1f2)]({'marketcapEnabled':_0x980467})[_0x40f450(0x190)]();}}if(isOlderVersion(_0x143ae2,_0x40f450(0x2f7))){let _0x378ec4=dbConfig[_0x40f450(0x1db)](_0x40f450(0x242))[_0x40f450(0x1b8)]({'botID':botID})[_0x40f450(0x310)]();if(_0x378ec4){const _0x32a700=_0x378ec4[_0x40f450(0x221)],_0x8899d7=_0x32a700?_0x40f450(0x18a):![];dbConfig['get'](_0x40f450(0x242))[_0x40f450(0x1b8)]({'botID':botID})['assign']({'autoliquidity':_0x8899d7})[_0x40f450(0x190)]();}}let _0x360326=dbPerformance[_0x40f450(0x1db)](_0x40f450(0x19c))[_0x40f450(0x310)]();isOlderVersion(_0x360326,_0x40f450(0x1e3))&&setStartDatePerformance();let _0x121b31=dbCoinResults[_0x40f450(0x1db)](_0x40f450(0x19c))[_0x40f450(0x310)]();if(isOlderVersion(_0x121b31,'2.7.1')){let _0x9eea7a=dbCoinResults['get']('coins')[_0x40f450(0x310)]();if(_0x9eea7a[_0x40f450(0x249)]!=0x0)pnlGenerationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x2a7e9a=_0x1bf3c8;dbConfig[_0x2a7e9a(0x205)]('version',serverversion)[_0x2a7e9a(0x190)](),dbPerformance[_0x2a7e9a(0x205)](_0x2a7e9a(0x19c),serverversion)['write'](),dbLogs['set'](_0x2a7e9a(0x19c),serverversion)['write'](),dbCoinResults[_0x2a7e9a(0x205)](_0x2a7e9a(0x19c),serverversion)[_0x2a7e9a(0x190)]();}function getConfiguration(_0x162ea3){const _0x39a899=_0x1bf3c8;let _0x2725b0=dbConfig[_0x39a899(0x1db)](_0x39a899(0x242))[_0x39a899(0x1b8)]({'botID':_0x162ea3})[_0x39a899(0x310)]();if(_0x2725b0){let _0x375fb9=![];typeof _0x2725b0[_0x39a899(0x197)]==_0x39a899(0x2b1)&&(_0x2725b0={..._0x2725b0,'threshold':Number(_0x2725b0['threshold'])},_0x375fb9=!![]),_0x2725b0[_0x39a899(0x204)]==undefined&&(_0x2725b0={..._0x2725b0,'change24h':-0x14},_0x375fb9=!![]),_0x2725b0['fiat']==undefined&&(_0x2725b0={..._0x2725b0,'fiat':_0x39a899(0x1c2)},_0x375fb9=!![]),_0x2725b0[_0x39a899(0x2c7)]==undefined&&(_0x2725b0={..._0x2725b0,'onepagemode':settings[_0x39a899(0x2c7)]},_0x375fb9=!![]),_0x2725b0[_0x39a899(0x19d)]==undefined&&(_0x2725b0={..._0x2725b0,'colorscheme':'red_yellow_blue'},_0x375fb9=!![]),_0x2725b0[_0x39a899(0x221)]==undefined&&(_0x2725b0={..._0x2725b0,'autoliquidity':_0x39a899(0x18a)},_0x375fb9=!![]),_0x2725b0[_0x39a899(0x276)]==undefined&&(_0x2725b0={..._0x2725b0,'marketcapApi':settings[_0x39a899(0x276)]?!![]:![]},_0x375fb9=!![]),_0x2725b0[_0x39a899(0x28d)]==undefined&&(_0x2725b0={..._0x2725b0,'marketcapEnabled':![]},_0x375fb9=!![]),_0x2725b0[_0x39a899(0x299)]==undefined&&(_0x2725b0={..._0x2725b0,'sandbox':![]},_0x375fb9=!![]),_0x375fb9&&(_0x2725b0={'botID':_0x2725b0[_0x39a899(0x1f5)],'exchange':_0x2725b0[_0x39a899(0x355)],'apiKey':_0x2725b0[_0x39a899(0x1f4)],'apiSecret':_0x2725b0['apiSecret'],'apiPassword':_0x2725b0[_0x39a899(0x1d6)],'basecoin':_0x2725b0[_0x39a899(0x1ab)],'botname':_0x2725b0[_0x39a899(0x28a)],'showname':_0x2725b0[_0x39a899(0x314)],'threshold':_0x2725b0[_0x39a899(0x197)],'ordertype':_0x2725b0[_0x39a899(0x33d)],'timeout':_0x2725b0['timeout'],'fiat':_0x2725b0[_0x39a899(0x2b6)],'startdate':_0x2725b0['startdate'],'recreate':_0x2725b0['recreate'],'timeshift':_0x2725b0[_0x39a899(0x356)],'onepagemode':_0x2725b0[_0x39a899(0x2c7)],'headless':_0x2725b0[_0x39a899(0x31e)],'cooldown':_0x2725b0['cooldown'],'change24h':_0x2725b0[_0x39a899(0x204)],'emojibuy':_0x2725b0[_0x39a899(0x217)],'emojisell':_0x2725b0[_0x39a899(0x2a8)],'colorscheme':_0x2725b0[_0x39a899(0x19d)],'marketcapApi':_0x2725b0['marketcapApi'],'marketcapEnabled':_0x2725b0[_0x39a899(0x28d)],'sandbox':_0x2725b0[_0x39a899(0x299)],'portfolio':_0x2725b0[_0x39a899(0x34e)],'autoliquidity':_0x2725b0[_0x39a899(0x221)],'liquidity':_0x2725b0['liquidity'],'openOrders':_0x2725b0[_0x39a899(0x1d8)]},dbConfig[_0x39a899(0x1db)](_0x39a899(0x242))['remove']()['write'](),dbConfig[_0x39a899(0x1db)]('bot')[_0x39a899(0x252)](_0x2725b0)[_0x39a899(0x190)]());}else _0x2725b0={'botID':_0x162ea3,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x39a899(0x275)+_0x162ea3,'showname':![],'threshold':0x3,'ordertype':'market','timeout':0x14,'fiat':_0x39a899(0x1c2),'startdate':getDate(),'recreate':![],'timeshift':settings['timeshift'],'onepagemode':settings[_0x39a899(0x2c7)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x39a899(0x1ae),'marketcapApi':settings[_0x39a899(0x276)]?!![]:![],'marketcapEnabled':![],'sandbox':![],'portfolio':[],'autoliquidity':'update-liquidity','liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x2725b0;}function emittedConfiguration(){const _0x2682c9=_0x1bf3c8;let _0x3df840;if(config['apiKey']=='')_0x3df840={...config,'configstate':'initial'};else config[_0x2682c9(0x1f4)]==_0x2682c9(0x1c6)?_0x3df840={...config,'configstate':'recovery'}:(_0x3df840={...config,'apiKey':_0x2682c9(0x2d3),'apiSecret':_0x2682c9(0x2d3)},config['apiPassword']&&(_0x3df840[_0x2682c9(0x1d6)]=_0x2682c9(0x2d3)));return _0x3df840['enableFiatToggle']=enableFiatToggle,_0x3df840;}function getSettings(){const _0x14632b=_0x1bf3c8;return dbSettings[_0x14632b(0x1db)](_0x14632b(0x2bc))[_0x14632b(0x310)]();}function getSecure(){const _0x384d8b=_0x1bf3c8;return dbSecure['get'](_0x384d8b(0x330))[_0x384d8b(0x310)]()||{};}function updateTimeshift(_0x10deed){const _0x25468b=_0x1bf3c8;let _0x43cdc5=dbConfig['get'](_0x25468b(0x242))[_0x25468b(0x1b8)]({'botID':botID})[_0x25468b(0x310)]();_0x43cdc5&&dbConfig['get'](_0x25468b(0x242))[_0x25468b(0x1b8)]({'botID':botID})[_0x25468b(0x1f2)]({'timeshift':_0x10deed})[_0x25468b(0x190)](),config[_0x25468b(0x356)]=_0x10deed,proxyEmit(_0x25468b(0x19e),emittedConfiguration());}function updateOnepagemode(_0x1f03e4){const _0x728772=_0x1bf3c8;let _0x1821ff=dbConfig[_0x728772(0x1db)](_0x728772(0x242))['find']({'botID':botID})[_0x728772(0x310)]();_0x1821ff&&dbConfig['get'](_0x728772(0x242))[_0x728772(0x1b8)]({'botID':botID})[_0x728772(0x1f2)]({'onepagemode':_0x1f03e4})['write'](),config[_0x728772(0x2c7)]=_0x1f03e4,proxyEmit(_0x728772(0x19e),emittedConfiguration());}function updateMarketcapApi(_0xb5d5da){const _0x29ba9b=_0x1bf3c8,_0x4c0e76=_0xb5d5da?!![]:![];let _0x283168=dbConfig['get']('bot')[_0x29ba9b(0x1b8)]({'botID':botID})[_0x29ba9b(0x310)]();_0x283168&&dbConfig[_0x29ba9b(0x1db)](_0x29ba9b(0x242))[_0x29ba9b(0x1b8)]({'botID':botID})[_0x29ba9b(0x1f2)]({'marketcapApi':_0x4c0e76})[_0x29ba9b(0x190)](),config['marketcapApi']=_0x4c0e76,getMarketCap(),proxyEmit(_0x29ba9b(0x19e),emittedConfiguration());}async function storeConfiguration(_0x4df11a){const _0x8baf1f=_0x1bf3c8;logger[_0x8baf1f(0x223)]('Saving\x20configuration');_0x4df11a[_0x8baf1f(0x273)]&&delete _0x4df11a[_0x8baf1f(0x273)];if(pidBalances)clearTimeout(pidBalances);setBlockTransactionDetection(!![]);let _0x110c54=![],_0x5d9046=![],_0x1e97ba=[];_0x4df11a[_0x8baf1f(0x34e)][_0x8baf1f(0x27b)](_0x46030e=>{const _0x102e57=_0x8baf1f;if(!_0x46030e[_0x102e57(0x279)]&&_0x46030e[_0x102e57(0x2d4)]!=_0x4df11a[_0x102e57(0x1ab)])_0x1e97ba['push'](_0x46030e[_0x102e57(0x20f)]);}),_0x1e97ba['forEach'](_0x1f1e9c=>{const _0x1744a0=_0x8baf1f,_0x3df8a4=currentCoins[_0x1744a0(0x1b8)](_0x234562=>_0x234562[_0x1744a0(0x20f)]==_0x1f1e9c);!_0x3df8a4&&(_0x110c54=!![]);}),currentCoins[_0x8baf1f(0x27b)](_0x5c4323=>{const _0x4f293c=_0x8baf1f;if(_0x5c4323[_0x4f293c(0x2d4)]!=config[_0x4f293c(0x1ab)]){const _0x40d6c0=_0x1e97ba[_0x4f293c(0x1b8)](_0x528eee=>_0x528eee==_0x5c4323['symbol']);!_0x40d6c0&&(_0x110c54=!![]);}}),_0x4df11a['portfolio'][_0x8baf1f(0x27b)](_0x198734=>{const _0x4d000d=_0x8baf1f,_0x549f60=config[_0x4d000d(0x34e)][_0x4d000d(0x1b8)](_0x294594=>_0x294594[_0x4d000d(0x2d4)]==_0x198734[_0x4d000d(0x2d4)]);if(_0x549f60&&_0x198734['offset']!=_0x549f60[_0x4d000d(0x267)])_0x5d9046=!![];});let _0x46cc79=dbConfig[_0x8baf1f(0x1db)]('bot')['find']({'botID':botID})['value']();_0x4df11a={..._0x4df11a,'apiKey':decryptRSA(secure[_0x8baf1f(0x22c)],_0x4df11a['apiKey']),'apiSecret':decryptRSA(secure[_0x8baf1f(0x22c)],_0x4df11a['apiSecret'])};_0x4df11a[_0x8baf1f(0x1d6)]&&(_0x4df11a[_0x8baf1f(0x1d6)]=decryptRSA(secure[_0x8baf1f(0x22c)],_0x4df11a[_0x8baf1f(0x1d6)]));let _0x27be2d=![];if(_0x46cc79){_0x4df11a[_0x8baf1f(0x1f4)]==_0x8baf1f(0x2d3)?_0x4df11a['apiKey']=config[_0x8baf1f(0x1f4)]:_0x27be2d=!![];_0x4df11a[_0x8baf1f(0x32b)]==_0x8baf1f(0x2d3)?_0x4df11a[_0x8baf1f(0x32b)]=config[_0x8baf1f(0x32b)]:_0x27be2d=!![];if(_0x4df11a[_0x8baf1f(0x1d6)]==_0x8baf1f(0x2d3))_0x4df11a[_0x8baf1f(0x1d6)]=config[_0x8baf1f(0x1d6)];else{if(_0x4df11a[_0x8baf1f(0x1d6)])_0x27be2d=!![];}dbConfig[_0x8baf1f(0x1db)](_0x8baf1f(0x242))['find']({'botID':botID})['assign'](_0x4df11a)[_0x8baf1f(0x190)]();}else dbConfig[_0x8baf1f(0x1db)](_0x8baf1f(0x242))[_0x8baf1f(0x252)](_0x4df11a)[_0x8baf1f(0x190)](),_0x27be2d=!![],process[_0x8baf1f(0x1de)]({'status':_0x8baf1f(0x269),'live':'running'},_0x5ea4fd=>{});process['send']({'botname':_0x4df11a[_0x8baf1f(0x28a)]},_0x1bea53=>{}),config={..._0x4df11a},updateBotManager(),proxyEmit(_0x8baf1f(0x26b)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x27be2d)await reset(!![]);else _0x110c54||_0x5d9046?await reset(![]):getBalances();setBlockTransactionDetection(![]);}async function storeHeadless(_0x53dfe1){const _0x3c7b27=_0x1bf3c8,_0x566635={...config,'headless':_0x53dfe1[_0x3c7b27(0x31e)]};let _0x3b425f=dbConfig[_0x3c7b27(0x1db)](_0x3c7b27(0x242))[_0x3c7b27(0x1b8)]({'botID':botID})['value']();_0x3b425f&&dbConfig[_0x3c7b27(0x1db)]('bot')[_0x3c7b27(0x1b8)]({'botID':botID})[_0x3c7b27(0x1f2)](_0x566635)[_0x3c7b27(0x190)](),config={..._0x566635},updateBotManager(),proxyEmit(_0x3c7b27(0x19e),emittedConfiguration());}async function storeFiat(_0xfafcca){const _0x2e1a78=_0x1bf3c8,_0x5237ac={...config,'fiat':_0xfafcca};let _0x249e3f=dbConfig[_0x2e1a78(0x1db)](_0x2e1a78(0x242))[_0x2e1a78(0x1b8)]({'botID':botID})[_0x2e1a78(0x310)]();_0x249e3f&&dbConfig['get'](_0x2e1a78(0x242))[_0x2e1a78(0x1b8)]({'botID':botID})[_0x2e1a78(0x1f2)](_0x5237ac)[_0x2e1a78(0x190)](),config={..._0x5237ac},proxyEmit('configuration',emittedConfiguration());}function resetHistory(){const _0x19c995=_0x1bf3c8;logger[_0x19c995(0x212)]('Resetting\x20bot\x20history');try{if(fs[_0x19c995(0x339)](path[_0x19c995(0x258)](configpath,_0x19c995(0x332)+botID+_0x19c995(0x2c1))))fs[_0x19c995(0x2b3)](path[_0x19c995(0x258)](configpath,_0x19c995(0x332)+botID+'-events.json'));if(fs[_0x19c995(0x339)](path[_0x19c995(0x258)](configpath,_0x19c995(0x332)+botID+_0x19c995(0x250))))fs[_0x19c995(0x2b3)](path['join'](configpath,'bot-'+botID+_0x19c995(0x250)));if(fs['existsSync'](path['join'](configpath,_0x19c995(0x332)+botID+_0x19c995(0x1ee))))fs[_0x19c995(0x2b3)](path['join'](configpath,'bot-'+botID+_0x19c995(0x1ee)));}catch(_0x11ae7d){if(_0x11ae7d)logger[_0x19c995(0x212)](_0x19c995(0x2b8),_0x11ae7d);}const _0x1940b4=getDate();let _0x425e1d=[];currentCoins[_0x19c995(0x27b)](_0xd5af9b=>{const _0x27c694=_0x19c995;_0x425e1d[_0x27c694(0x252)]({'coin':_0xd5af9b[_0x27c694(0x2d4)],'number':_0xd5af9b[_0x27c694(0x24d)],'price':_0xd5af9b[_0x27c694(0x1af)]});});let _0x2d59e1=dbConfig[_0x19c995(0x1db)](_0x19c995(0x242))['find']({'botID':botID})['value']();_0x2d59e1&&(dbConfig[_0x19c995(0x1db)](_0x19c995(0x242))[_0x19c995(0x1b8)]({'botID':botID})[_0x19c995(0x1f2)]({'liquidity':[{'date':_0x1940b4,'changes':_0x425e1d}]})[_0x19c995(0x190)](),config['liquidity']=[]),restartBot(!![]);}function noslash(_0x3777b9){return _0x3777b9['replace']('/','');}function updateHighestFee(_0x2311ba){const _0x36fdd4=_0x1bf3c8;if(_0x2311ba[_0x36fdd4(0x288)]){let _0x3f50b7={'filled':_0x2311ba['filled']*_0x2311ba[_0x36fdd4(0x2dd)],'amount':_0x2311ba[_0x36fdd4(0x2b5)]*_0x2311ba['price'],'side':_0x2311ba[_0x36fdd4(0x313)]==_0x36fdd4(0x27a)?_0x36fdd4(0x207):_0x36fdd4(0x27a),'price':0x1/_0x2311ba[_0x36fdd4(0x2dd)]};_0x2311ba={..._0x2311ba,..._0x3f50b7};}const _0x3b50de=defaultFee*_0x2311ba['filled']*_0x2311ba['price'];lastFees['recent20'][_0x36fdd4(0x249)]===0x14&&lastFees['recent20'][_0x36fdd4(0x1e0)](),lastFees[_0x36fdd4(0x20c)]['push'](_0x3b50de),lastFees[_0x36fdd4(0x34d)]=Math[_0x36fdd4(0x1d5)](...lastFees[_0x36fdd4(0x20c)]);}async function updateNumberCoinsCcxt(_0x437504){const _0x269a79=_0x1bf3c8;logger['debug'](_0x269a79(0x315)+_0x437504[_0x269a79(0x20f)]+'\x20|\x20'+_0x437504[_0x269a79(0x27d)]+'\x20|\x20'+_0x437504['filled']+_0x269a79(0x234)+_0x437504['amount']+'\x20|\x20'+_0x437504['id']);let _0x462b5c=_0x437504['status'],_0x11d4ed=![];currentCoins[_0x269a79(0x27b)](_0x395d43=>{const _0x349b33=_0x269a79;_0x395d43[_0x349b33(0x20f)]==_0x437504['symbol']&&(_0x11d4ed=!![]);});if(!_0x11d4ed)return;const _0x4583b6=currentCoins['find'](_0x3f1442=>_0x3f1442['symbol']==_0x437504[_0x269a79(0x20f)]),_0x561277=_0x4583b6[_0x269a79(0x2d4)],_0x2caf5e=_0x671438=>{const _0x1ee020=_0x269a79,_0x2d92d7=currentCoins[_0x1ee020(0x1b8)](_0x4f2b48=>_0x4f2b48[_0x1ee020(0x20f)]==_0x437504[_0x1ee020(0x20f)]);if(_0x2d92d7)_0x2d92d7[_0x1ee020(0x235)]=_0x671438;};let _0x36ab0f=![];for(const _0x150ffa of lastOrders){const _0x1b695a=0x64,_0x490690=0x1388;let _0x57a936=0x0;while(!_0x150ffa[_0x269a79(0x2e2)]&&_0x57a936*_0x1b695a<_0x490690){_0x57a936++,await sleep(_0x1b695a);}if(_0x57a936>0x0)logger[_0x269a79(0x223)](_0x269a79(0x2e6)+_0x57a936*_0x1b695a/0x3e8+_0x269a79(0x21c));_0x150ffa[_0x269a79(0x2e2)]==_0x437504['id']&&(_0x36ab0f=!![]);}if(_0x462b5c==_0x269a79(0x1a7)){_0x2caf5e(_0x269a79(0x1a7));if(_0x437504[_0x269a79(0x2b5)]>0x0&&_0x437504['filled']<_0x437504['amount']){if(_0x36ab0f){setBlockTransactionDetection(!![]),logger[_0x269a79(0x223)]('1\x20-\x20partially\x20FILLED\x20('+_0x437504['filled']+')\x20known\x20order:\x20'+_0x437504['id']);const _0x5456ff=await getCoins(balanceUpdateDelay,undefined,undefined,_0x561277);[currentCoins,currentCoinsAll]=_0x5456ff,setBlockTransactionDetection(![]);}else logger[_0x269a79(0x223)](_0x269a79(0x34b)+_0x437504[_0x269a79(0x2b5)]+_0x269a79(0x1c5)+_0x437504['id']),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay);}}else{if(_0x462b5c==_0x269a79(0x287)){_0x2caf5e(_0x269a79(0x287)),lastOrders=lastOrders[_0x269a79(0x1a6)](_0x5f4f61=>_0x5f4f61[_0x269a79(0x20f)]!=_0x437504[_0x269a79(0x20f)]);const _0x353dd2=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x353dd2,setBlockTransactionDetection(![]),await getOpenOrders(),handleOpenOrders();}else{if(_0x462b5c==_0x269a79(0x2e9)){if(lastOrders)for(const _0x22e49f of lastOrders){if(_0x22e49f[_0x269a79(0x2e2)]==_0x437504['id']){logger[_0x269a79(0x223)](_0x269a79(0x1f0)+_0x437504['id']),_0x36ab0f=!![];if(_0x22e49f[_0x269a79(0x2b5)]==0x0){setBlockTransactionDetection(!![]),logger[_0x269a79(0x223)](_0x269a79(0x1c1)+_0x437504['id']);if(_0x437504[_0x269a79(0x286)])_0x22e49f['price']=_0x437504[_0x269a79(0x286)];else{if(_0x437504['price'])_0x22e49f[_0x269a79(0x2dd)]=_0x437504['price'];else{}}_0x22e49f[_0x269a79(0x2b5)]=_0x437504['filled'],updateHighestFee(_0x22e49f);const _0x192f64=await getCoins(balanceUpdateDelay,undefined,undefined,_0x561277);[currentCoins,currentCoinsAll]=_0x192f64,setBlockTransactionDetection(![]),await validateOrders(),_0x2caf5e(_0x269a79(0x2b5)),_0x22e49f[_0x269a79(0x1bd)]={'currency':_0x437504[_0x269a79(0x1bd)]?_0x437504[_0x269a79(0x1bd)][_0x269a79(0x2d8)]:null,'cost':_0x437504[_0x269a79(0x1bd)]?_0x437504[_0x269a79(0x1bd)][_0x269a79(0x2b9)]:0x0},await updatePnL(_0x22e49f);}}}!_0x36ab0f&&(logger[_0x269a79(0x223)](_0x269a79(0x1e1)+_0x437504['id']),_0x2caf5e(_0x269a79(0x2b5)),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay),await updateOpenOrders(),handleOpenOrders());}}}if(lastBalances){let _0x35ff7e=JSON[_0x269a79(0x25d)](lastBalances[_0x269a79(0x34e)]);const _0x1052c6=_0x35ff7e[_0x269a79(0x1b8)](_0x31d868=>_0x31d868[_0x269a79(0x20f)]==_0x437504[_0x269a79(0x20f)]);if(_0x1052c6){if(_0x462b5c==_0x269a79(0x1a7))_0x1052c6[_0x269a79(0x235)]=_0x1052c6[_0x269a79(0x235)]=='filled'?_0x269a79(0x2b5):_0x269a79(0x1a7);else{if(_0x462b5c==_0x269a79(0x287))_0x1052c6[_0x269a79(0x235)]=_0x1052c6['orderstatus']==_0x269a79(0x2b5)?_0x269a79(0x2b5):_0x269a79(0x287);else _0x462b5c=='closed'&&(_0x1052c6['orderstatus']=_0x269a79(0x2b5));}}lastBalances={...lastBalances,'portfolio':JSON[_0x269a79(0x323)](_0x35ff7e)},proxyEmit(_0x269a79(0x2b7),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){await getOpenOrders();let _0x5dc88f=![];currentCoins['forEach'](_0x370409=>{const _0x37f5a6=_0x3629;_0x5dc88f=allOpenOrders['find'](_0x3bd2f4=>_0x3bd2f4[_0x37f5a6(0x20f)]==_0x370409['symbol']),_0x370409[_0x37f5a6(0x235)]=_0x5dc88f?'open':_0x37f5a6(0x309);});}async function fetchBalance(_0x5deac4=!![]){const _0x4c8613=_0x1bf3c8;let _0x19709d,_0x57832a;try{return _0x19709d=await exchange[_0x4c8613(0x29c)](),_0x57832a=_0x19709d[_0x4c8613(0x341)],_0x57832a;}catch(_0x312e4e){return!_0x5deac4?handleErrorNoStop(_0x312e4e,_0x4c8613(0x189)):await handleError(_0x312e4e,_0x4c8613(0x189)),![];}}async function getCoins(_0x23be3e=0x0,_0x426af1=!![],_0x56d7fa=config[_0x1bf3c8(0x1ab)],_0x20af33){const _0x36cbcf=_0x1bf3c8;let _0x18a691=[],_0x322205=[],_0x5ba79a=[],_0x2d99c1;if(_0x23be3e)await sleep(_0x23be3e);if(botPaused)return[currentCoins,currentCoinsAll];let _0x3f3e3d=![],_0x593a9c=0x0,_0x5955d7,_0xd2219f;_0x20af33&&(_0x5955d7=currentCoins[_0x36cbcf(0x1b8)](_0x2990a2=>_0x2990a2[_0x36cbcf(0x2d4)]==_0x20af33),_0x5955d7&&(_0xd2219f=_0x5955d7[_0x36cbcf(0x1d1)],delete _0x5955d7[_0x36cbcf(0x1d1)]));while(!_0x3f3e3d){_0x2d99c1=await fetchBalance(_0x426af1);if(_0x2d99c1){if(_0x20af33){if(_0x2d99c1[_0x20af33]!=_0xd2219f)logger[_0x36cbcf(0x223)](_0x36cbcf(0x1da)+_0x20af33+':\x20'+_0x2d99c1[_0x20af33]+'\x20('+_0xd2219f+')'),_0x3f3e3d=!![];else{logger[_0x36cbcf(0x223)](_0x36cbcf(0x1dc)+_0x20af33+':\x20'+_0x2d99c1[_0x20af33]+'\x20('+_0xd2219f+')'),_0x593a9c++;if(_0x593a9c<balanceUpdateRetries)await sleep(balanceUpdateDelay);else{logger['debug']('Stopped\x20fetching\x20balance\x20after\x20'+_0x593a9c+'\x20attempts');break;}}}else break;}else return[currentCoins,currentCoinsAll];}for(const [_0x4d2bc8,_0x382f1f]of Object[_0x36cbcf(0x29b)](_0x2d99c1)){_0x5ba79a[_0x36cbcf(0x252)](_0x4d2bc8);}config[_0x36cbcf(0x34e)][_0x36cbcf(0x27b)](_0x144f41=>{const _0x5834cc=_0x36cbcf;!_0x5ba79a[_0x5834cc(0x306)](_0x144f41[_0x5834cc(0x2d4)])&&(_0x2d99c1[_0x144f41[_0x5834cc(0x2d4)]]=0x0);});if(_0x56d7fa=='')for(const [_0x4ba373,_0x3aef5a]of Object[_0x36cbcf(0x29b)](_0x2d99c1)){_0x3aef5a!=0x0&&_0x18a691[_0x36cbcf(0x252)]({'coin':_0x4ba373});}else for(const [_0x4567bb,_0x501314]of Object[_0x36cbcf(0x29b)](_0x2d99c1)){const _0x586966=config['portfolio'][_0x36cbcf(0x1b8)](_0x39d90d=>_0x39d90d[_0x36cbcf(0x2d4)]==_0x4567bb),_0x4db313=_0x4567bb+'/'+_0x56d7fa,_0x1ec65d=_0x56d7fa+'/'+_0x4567bb,_0x49900b=currentCoins['find'](_0x3ea113=>_0x3ea113['coin']==_0x4567bb);if((_0x501314!=0x0||_0x586966)&&(allSymbols[_0x36cbcf(0x306)](_0x4db313)||_0x4567bb==_0x56d7fa))_0x49900b?_0x18a691[_0x36cbcf(0x252)]({..._0x49900b,'number':Math['max'](_0x501314+(_0x586966&&_0x586966[_0x36cbcf(0x267)]||0x0),0x0)}):_0x18a691[_0x36cbcf(0x252)]({'coin':_0x4567bb,'symbol':_0x4db313,'reverse':![],'number':Math[_0x36cbcf(0x1d5)](_0x501314+(_0x586966&&_0x586966['offset']||0x0),0x0),'orderstatus':'none'});else{if((_0x501314!=0x0||_0x586966)&&allSymbols[_0x36cbcf(0x306)](_0x1ec65d))_0x49900b?_0x18a691['push']({..._0x49900b,'number':Math['max'](_0x501314+(_0x586966&&_0x586966[_0x36cbcf(0x267)]||0x0),0x0)}):_0x18a691[_0x36cbcf(0x252)]({'coin':_0x4567bb,'symbol':_0x1ec65d,'reverse':!![],'number':Math[_0x36cbcf(0x1d5)](_0x501314+(_0x586966&&_0x586966['offset']||0x0),0x0),'orderstatus':_0x36cbcf(0x309)});else _0x586966&&_0x18a691[_0x36cbcf(0x252)]({'coin':_0x586966['coin'],'symbol':_0x586966['symbol'],'reverse':_0x586966['reverse'],'number':0x0,'orderstatus':_0x36cbcf(0x309)});}}return _0x18a691['sort']((_0x3a871e,_0x3ee91f)=>_0x3a871e[_0x36cbcf(0x2ae)]<_0x3ee91f['delta']?0x1:_0x3ee91f['delta']<_0x3a871e[_0x36cbcf(0x2ae)]?-0x1:0x0),_0x322205=cloneDeep(_0x18a691),_0x18a691=_0x18a691[_0x36cbcf(0x1a6)](_0x34c808=>{const _0x2390c6=_0x36cbcf,_0x247076=config[_0x2390c6(0x34e)][_0x2390c6(0x1b8)](_0x9f1683=>_0x9f1683['coin']==_0x34c808['coin']);return _0x247076&&!_0x247076[_0x2390c6(0x279)];}),[_0x18a691,_0x322205];}async function getOpenOrders(){const _0x3d4a0c=_0x1bf3c8;let _0xd8b09e;allOpenOrders=[];try{for(const _0xd25753 of config[_0x3d4a0c(0x34e)]){!_0xd25753[_0x3d4a0c(0x279)]&&_0xd25753[_0x3d4a0c(0x2d4)]!=config['basecoin']&&(_0xd8b09e=await exchange[_0x3d4a0c(0x2fc)](_0xd25753[_0x3d4a0c(0x20f)]),_0xd8b09e['length']>0x0&&allOpenOrders[_0x3d4a0c(0x252)](_0xd8b09e[0x0]));}}catch(_0x2049e5){await handleError(_0x2049e5,_0x3d4a0c(0x248));}}async function handleOpenOrders(_0x236bf7=0x0){const _0x50450a=_0x1bf3c8;allOpenOrders[_0x50450a(0x249)]==0x0&&lockOrders==ORDERS[_0x50450a(0x239)]&&allOrdersPlaced&&(_0x236bf7==0x0?(logger[_0x50450a(0x223)](_0x50450a(0x1ba)),_0x236bf7++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger['debug'](_0x50450a(0x25f)),validateOrders(_0x50450a(0x272))));}async function testAPI(){const _0x334921=_0x1bf3c8;try{return await exchange['fetchBalance'](),!![];}catch(_0x2e9383){return loading[_0x334921(0x208)]=!![],_0x2e9383[_0x334921(0x2e8)]()['toLowerCase']()[_0x334921(0x306)]('timestamp')||_0x2e9383[_0x334921(0x2e8)]()[_0x334921(0x261)]()[_0x334921(0x306)](_0x334921(0x33c))?(logHistory(_0x334921(0x1d3),'Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)'),loading[_0x334921(0x1d3)]=_0x334921(0x1d7)):(handleErrorNoStop(_0x2e9383,_0x334921(0x196)),logger[_0x334921(0x223)](_0x334921(0x2ec),_0x2e9383)),emitLoadingProgress(),botPaused=!![],![];}}async function testNewAPI(_0x1bdf20){const _0x150b91=_0x1bf3c8;logger[_0x150b91(0x223)](_0x150b91(0x22e));const _0x542447=ccxt['pro'][_0x1bdf20[_0x150b91(0x355)][_0x150b91(0x261)]()],_0x51a7a9=new _0x542447({'apiKey':_0x1bdf20[_0x150b91(0x1f4)],'secret':_0x1bdf20[_0x150b91(0x32b)],'options':{'defaultType':_0x150b91(0x289)}});if(_0x1bdf20[_0x150b91(0x1d6)])_0x51a7a9['password']=_0x1bdf20[_0x150b91(0x1d6)];if(_0x51a7a9[_0x150b91(0x211)][_0x150b91(0x299)])_0x51a7a9[_0x150b91(0x32a)](_0x1bdf20[_0x150b91(0x299)]);try{await _0x51a7a9[_0x150b91(0x29c)](),botPaused=![];}catch(_0x29dcff){logger['debug']('Error\x20in\x20testNewAPI():\x20'+_0x29dcff[_0x150b91(0x2e8)]());throw _0x29dcff;}}function cloneDeep(_0xf24c2d){const _0x13a586=_0x1bf3c8;return JSON[_0x13a586(0x25d)](JSON[_0x13a586(0x323)](_0xf24c2d));}async function getPortfolio(_0x461c28){const _0xdc17db=_0x1bf3c8;let _0x47fb34=[],_0x4e2d19=[],_0x2e420b=[],_0x3d47e7;_0x461c28[_0xdc17db(0x1f4)]=decryptRSA(secure[_0xdc17db(0x22c)],_0x461c28[_0xdc17db(0x1f4)]),_0x461c28[_0xdc17db(0x32b)]=decryptRSA(secure['privateKey'],_0x461c28[_0xdc17db(0x32b)]);if(_0x461c28[_0xdc17db(0x1d6)])_0x461c28[_0xdc17db(0x1d6)]=decryptRSA(secure[_0xdc17db(0x22c)],_0x461c28[_0xdc17db(0x1d6)]);if(_0x461c28[_0xdc17db(0x1f4)]!=='************'||_0x461c28[_0xdc17db(0x32b)]!==_0xdc17db(0x2d3)||_0x461c28[_0xdc17db(0x1d6)]&&_0x461c28['apiPassword']!==_0xdc17db(0x2d3)){if(config[_0xdc17db(0x355)]){if(_0x461c28['apiKey']=='************')_0x461c28['apiKey']=config[_0xdc17db(0x1f4)];if(_0x461c28[_0xdc17db(0x32b)]=='************')_0x461c28[_0xdc17db(0x32b)]=config['apiSecret'];if(_0x461c28['apiPassword']=='************')_0x461c28['apiPassword']=config[_0xdc17db(0x1d6)];}try{if(_0x461c28[_0xdc17db(0x265)])await testNewAPI(_0x461c28);}catch(_0xe11cb2){if(_0xe11cb2[_0xdc17db(0x2e8)]()[_0xdc17db(0x306)]('AuthenticationError')){logHistory('error',_0xdc17db(0x226)),logHistory(_0xdc17db(0x1d3),'Error\x20details:\x20'+_0xe11cb2[_0xdc17db(0x2e8)]()),proxyEmit(_0xdc17db(0x218),![]);return;}else{if(_0xe11cb2['toString']()[_0xdc17db(0x306)]('PermissionDenied')){logHistory(_0xdc17db(0x1d3),'Exchange\x20permission\x20denied\x20-\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange'),logHistory(_0xdc17db(0x1d3),_0xdc17db(0x2c3)+_0xe11cb2[_0xdc17db(0x2e8)]()),proxyEmit(_0xdc17db(0x218),![]);return;}else{logHistory(_0xdc17db(0x1d3),'Error\x20occurred:\x20'+_0xe11cb2[_0xdc17db(0x2e8)]()),logger[_0xdc17db(0x223)]('Error\x20details:',_0xe11cb2),proxyEmit('portfolio1',![]);return;}}}exchange?updateExchange(_0x461c28[_0xdc17db(0x1f4)],_0x461c28[_0xdc17db(0x32b)],_0x461c28[_0xdc17db(0x1d6)]):await initExchange(_0x461c28[_0xdc17db(0x355)],_0x461c28[_0xdc17db(0x1f4)],_0x461c28['apiSecret'],_0x461c28[_0xdc17db(0x1d6)],_0x461c28['sandbox']);await loadSymbols();const _0x406de2=await getCoins(0x0,![],_0x461c28[_0xdc17db(0x1ab)]);_0x2e420b=cloneDeep(_0x406de2[0x1]);}else{const _0x46050f=await getCoins();_0x2e420b=cloneDeep(_0x46050f[0x1]);}if(_0x461c28[_0xdc17db(0x1ab)]=='')proxyEmit('portfolio1',!![]),proxyEmit(_0xdc17db(0x2bf),_0x2e420b);else{_0x2e420b[_0xdc17db(0x27b)](_0x2b1e33=>{const _0x49ecdd=_0xdc17db;if(_0x2b1e33[_0x49ecdd(0x2d4)]!=_0x461c28['basecoin']&&allSymbols[_0x49ecdd(0x306)](_0x2b1e33[_0x49ecdd(0x20f)]))_0x47fb34['push'](_0x2b1e33[_0x49ecdd(0x20f)]);});if(_0x47fb34[_0xdc17db(0x249)]==0x0)logHistory(_0xdc17db(0x1d3),'Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot');else{try{_0x4e2d19=await getTickers(_0x47fb34);}catch(_0x485d87){logHistory('error','Unknown\x20error\x20-\x20check\x20logs'),logger[_0xdc17db(0x223)](_0xdc17db(0x2ec),_0x485d87),proxyEmit(_0xdc17db(0x218),![]);return;}_0x2e420b[_0xdc17db(0x27b)](_0x539ee3=>{const _0x5b0db0=_0xdc17db;_0x539ee3[_0x5b0db0(0x2d4)]!=_0x461c28[_0x5b0db0(0x1ab)]?_0x4e2d19[_0x539ee3['symbol']]?_0x4e2d19[_0x539ee3[_0x5b0db0(0x20f)]][_0x5b0db0(0x1af)]?_0x3d47e7=_0x539ee3[_0x5b0db0(0x288)]?0x1/_0x4e2d19[_0x539ee3[_0x5b0db0(0x20f)]][_0x5b0db0(0x1af)]:_0x4e2d19[_0x539ee3[_0x5b0db0(0x20f)]]['last']:_0x3d47e7=0x0:_0x3d47e7=0x0:_0x3d47e7=0x1,_0x539ee3['price']=formatResult(_0x3d47e7,0x8);}),await getMarketCap(_0x2e420b),proxyEmit(_0xdc17db(0x218),!![]),proxyEmit(_0xdc17db(0x2bf),_0x2e420b);}}}function truncateTradeAmount(_0x29a8ae,_0x24240d){const _0x3f52f7=_0x1bf3c8;let _0x203764=0x0;try{_0x203764=exchange[_0x3f52f7(0x296)](_0x29a8ae,_0x24240d);}catch(_0x1ca5e7){}return _0x203764;}function checkMinimums(_0x14ec65){const _0x2c15ab=_0x1bf3c8;let _0x7b5704=!![];const _0x5c66b4=!_0x14ec65[_0x2c15ab(0x288)]?markets[_0x14ec65[_0x2c15ab(0x20f)]]['limits'][_0x2c15ab(0x2d6)]['min']:markets[_0x14ec65['symbol']][_0x2c15ab(0x331)][_0x2c15ab(0x2b9)][_0x2c15ab(0x23e)],_0x10063e=!_0x14ec65[_0x2c15ab(0x288)]?markets[_0x14ec65['symbol']]['limits'][_0x2c15ab(0x2b9)][_0x2c15ab(0x23e)]:markets[_0x14ec65[_0x2c15ab(0x20f)]][_0x2c15ab(0x331)][_0x2c15ab(0x2d6)]['min'],_0x34fa1e=truncateTradeAmount(_0x14ec65[_0x2c15ab(0x20f)],_0x14ec65[_0x2c15ab(0x23d)]);_0x14ec65['trade']=_0x34fa1e;if(Math[_0x2c15ab(0x302)](_0x34fa1e)<_0x5c66b4)_0x7b5704=![];if(Math[_0x2c15ab(0x302)](_0x34fa1e)*_0x14ec65[_0x2c15ab(0x1af)]<_0x10063e)_0x7b5704=![];if(_0x14ec65[_0x2c15ab(0x313)]==_0x2c15ab(0x27a)){let _0x1d5f63=config[_0x2c15ab(0x34e)]['find'](_0x300f60=>_0x300f60[_0x2c15ab(0x2d4)]==_0x14ec65['coin']);if(_0x1d5f63[_0x2c15ab(0x267)]>0x0){if(Math[_0x2c15ab(0x302)](_0x34fa1e)>_0x14ec65[_0x2c15ab(0x24d)]-_0x1d5f63[_0x2c15ab(0x267)])_0x7b5704=![];}else{if(Math[_0x2c15ab(0x302)](_0x34fa1e)>_0x14ec65[_0x2c15ab(0x24d)])_0x7b5704=![];}}if(_0x14ec65[_0x2c15ab(0x313)]=='buy'){let _0x5bc002=config[_0x2c15ab(0x34e)][_0x2c15ab(0x1b8)](_0x5c6f94=>_0x5c6f94[_0x2c15ab(0x2d4)]==config[_0x2c15ab(0x1ab)]),_0x2b539d=currentCoins[_0x2c15ab(0x1b8)](_0x26635f=>_0x26635f[_0x2c15ab(0x2d4)]==config['basecoin']);if(_0x5bc002[_0x2c15ab(0x267)]>0x0){if(Math[_0x2c15ab(0x302)](_0x34fa1e)*_0x14ec65[_0x2c15ab(0x1af)]>_0x2b539d[_0x2c15ab(0x24d)]-_0x5bc002[_0x2c15ab(0x267)])_0x7b5704=![];}else{if(Math['abs'](_0x34fa1e)*_0x14ec65[_0x2c15ab(0x1af)]>_0x2b539d['number'])_0x7b5704=![];}}return _0x7b5704;}async function getBalances(_0x2e4380=!![]){const _0x28b8e4=_0x1bf3c8;if(botPaused)return;let _0x34fe2b=0x0,_0x8f406e;const _0xa5d2a0=config['threshold'];if(config[_0x28b8e4(0x31e)]&&config[_0x28b8e4(0x204)]<0x0)await validate24hChanges();currentCoins[_0x28b8e4(0x27b)](_0x3d8351=>{const _0x3695b4=_0x28b8e4;if(_0x3d8351[_0x3695b4(0x2d4)]!=config['basecoin']){let _0x522531=gTicker[noslash(_0x3d8351['symbol'])];_0x8f406e=_0x3d8351[_0x3695b4(0x288)]?0x1/_0x522531:_0x522531;}else _0x8f406e=0x1;let _0x174f3a=_0x3d8351[_0x3695b4(0x24d)]*_0x8f406e;_0x34fe2b+=_0x174f3a,_0x3d8351[_0x3695b4(0x1af)]=formatResult(Number(_0x8f406e),0x8),_0x3d8351[_0x3695b4(0x310)]=_0x174f3a;}),currentCoins['forEach'](_0x567fbf=>{const _0x3bdf65=_0x28b8e4;let _0x49645e=config[_0x3bdf65(0x34e)][_0x3bdf65(0x1b8)](_0x370435=>_0x370435['coin']==_0x567fbf[_0x3bdf65(0x2d4)]),_0x3f3d5d=Number(_0x49645e['distribution']),_0x179800=_0x567fbf['value']/_0x34fe2b*0x64,_0x190c6c=_0x3f3d5d*_0x34fe2b/0x64/_0x567fbf[_0x3bdf65(0x1af)]-_0x567fbf[_0x3bdf65(0x24d)];_0x567fbf[_0x3bdf65(0x2db)]=formatResult(_0x179800,0x3),_0x567fbf[_0x3bdf65(0x28c)]=formatResult(_0x3f3d5d,0x3),_0x567fbf[_0x3bdf65(0x23d)]=formatResult(_0x190c6c,0x8),_0x567fbf[_0x3bdf65(0x313)]='',_0x567fbf['valid']=![];if(_0x567fbf[_0x3bdf65(0x2d4)]!=config[_0x3bdf65(0x1ab)]){if(_0x567fbf[_0x3bdf65(0x2db)]>_0x3f3d5d)_0x567fbf[_0x3bdf65(0x313)]=_0x3bdf65(0x27a),_0x567fbf[_0x3bdf65(0x2fa)]=checkMinimums(_0x567fbf);else _0x567fbf['distribution']<_0x3f3d5d&&(_0x567fbf[_0x3bdf65(0x313)]=_0x3bdf65(0x207),_0x567fbf[_0x3bdf65(0x2fa)]=checkMinimums(_0x567fbf));}_0x567fbf['delta']=_0x567fbf['distribution']/_0x567fbf['target']-0x1;if(_0x567fbf[_0x3bdf65(0x235)]==_0x3bdf65(0x2b5)||_0x567fbf[_0x3bdf65(0x235)]==_0x3bdf65(0x287))_0x567fbf[_0x3bdf65(0x235)]='none';}),currentCoins[_0x28b8e4(0x22d)]((_0x56e9e3,_0x20817d)=>_0x56e9e3[_0x28b8e4(0x2ae)]<_0x20817d[_0x28b8e4(0x2ae)]?0x1:_0x20817d[_0x28b8e4(0x2ae)]<_0x56e9e3['delta']?-0x1:0x0);const _0x5026bd=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x5026bd[_0x28b8e4(0x1f1)],'usd':_0x5026bd[_0x28b8e4(0x358)],'portfolio':JSON[_0x28b8e4(0x323)](currentCoins),'threshold':_0xa5d2a0},proxyEmit(_0x28b8e4(0x2b7),{'serverversion':serverversion,'balances':lastBalances});if(_0x2e4380){if(config[_0x28b8e4(0x31e)])headlessMode({'portfolio':currentCoins,'threshold':_0xa5d2a0});else lockOrders==ORDERS[_0x28b8e4(0x24a)]&&!coolingDown&&notifyBalance({'portfolio':currentCoins,'threshold':_0xa5d2a0});}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x17f9d4=getNormalizedPerformance();getStartingBalances(_0x17f9d4),emitPerformance(_0x17f9d4);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}function getPnL(){const _0x3d2d62=_0x1bf3c8;let _0x4762c1=dbCoinResults[_0x3d2d62(0x1db)](_0x3d2d62(0x2b2))[_0x3d2d62(0x310)](),_0x473133=0x0;return Object['entries'](_0x4762c1)['forEach'](([_0x3a5f0d,_0x575e1f])=>{_0x473133+=_0x575e1f['realizedPnL'];}),_0x473133;}async function storePerformance(){const _0x2872ca=_0x1bf3c8;if(!lastBalances)return;let _0x5d9a1d=[],_0x51e5cc;const _0x39647f=getPnL();let _0x4b232f=JSON[_0x2872ca(0x25d)](lastBalances['portfolio']);_0x4b232f['sort']((_0x4b7064,_0x1eca6b)=>_0x4b7064[_0x2872ca(0x2d4)]>_0x1eca6b[_0x2872ca(0x2d4)]?0x1:_0x1eca6b[_0x2872ca(0x2d4)]>_0x4b7064['coin']?-0x1:0x0),_0x4b232f[_0x2872ca(0x27b)](_0x5b95a6=>{const _0x4f16ab=_0x2872ca;let _0x1a0a0={'coin':_0x5b95a6[_0x4f16ab(0x2d4)],'number':_0x5b95a6['number'],'price':_0x5b95a6['last']};_0x5d9a1d[_0x4f16ab(0x252)](_0x1a0a0);});const _0x37c644=await getFiat(),_0x3b91fd=getTimeStamp()[_0x2872ca(0x2a9)]('\x20')[0x0],_0x1aa656=dbPerformance['get'](_0x2872ca(0x2b0))[_0x2872ca(0x1b8)]({'date':_0x3b91fd})[_0x2872ca(0x310)]();_0x51e5cc={'date':_0x3b91fd,'eur':_0x37c644[_0x2872ca(0x1f1)],'usd':_0x37c644[_0x2872ca(0x358)],'coins':_0x5d9a1d,'pnl':_0x39647f},_0x1aa656?_0x51e5cc['date']!=config[_0x2872ca(0x27f)]&&dbPerformance['get'](_0x2872ca(0x2b0))[_0x2872ca(0x1b8)]({'date':_0x3b91fd})[_0x2872ca(0x1f2)](_0x51e5cc)[_0x2872ca(0x190)]():dbPerformance[_0x2872ca(0x1db)](_0x2872ca(0x2b0))['push'](_0x51e5cc)[_0x2872ca(0x190)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0xff8d7a=_0x1bf3c8;let _0x530f9c=[];if(dbPerformance[_0xff8d7a(0x211)](_0xff8d7a(0x2b0))[_0xff8d7a(0x310)]()){let _0x4062df=dbPerformance[_0xff8d7a(0x1db)](_0xff8d7a(0x2b0))['cloneDeep']()['filter'](_0x20e818=>{const _0x25532e=_0xff8d7a;if(_0x20e818[_0x25532e(0x2b2)][_0x25532e(0x249)]==0x0)return![];else return!![];})['sortBy']('date')[_0xff8d7a(0x310)](),_0x2bf952=[...config[_0xff8d7a(0x1ea)]];_0x2bf952[_0xff8d7a(0x22d)]((_0x405e18,_0x352a44)=>_0x405e18[_0xff8d7a(0x1b0)]>_0x352a44[_0xff8d7a(0x1b0)]?-0x1:_0x352a44['date']>_0x405e18['date']?0x1:0x0);let _0x438388=0x1,_0x1ef873=[],_0x30f4da=0x0;_0x4062df[_0xff8d7a(0x18b)]()[_0xff8d7a(0x288)]()['forEach']((_0x2d2ffa,_0x22b864)=>{const _0x3ff148=_0xff8d7a;if(_0x2bf952[_0x30f4da]){if(_0x4062df[_0x4062df[_0x3ff148(0x249)]-_0x22b864]&&_0x2bf952[_0x30f4da]['date']==_0x4062df[_0x4062df[_0x3ff148(0x249)]-_0x22b864][_0x3ff148(0x1b0)]){if(_0x22b864<_0x4062df[_0x3ff148(0x249)]){let _0x59ae20=0x0,_0x427bd3=0x0;_0x4062df[_0x4062df['length']-_0x22b864][_0x3ff148(0x2b2)][_0x3ff148(0x27b)](_0x3704a1=>{const _0x1b7867=_0x3ff148;_0x427bd3+=_0x3704a1['number']*_0x3704a1[_0x1b7867(0x2dd)];}),_0x2bf952[_0x30f4da][_0x3ff148(0x304)]['forEach'](_0x14a088=>{const _0x5d3c20=_0x3ff148;_0x59ae20+=_0x14a088[_0x5d3c20(0x24d)]*_0x14a088[_0x5d3c20(0x2dd)];}),_0x438388*=_0x59ae20/(_0x427bd3-_0x59ae20)+0x1;}_0x30f4da++;}}let _0x39e6b9=0x0;_0x2d2ffa['coins'][_0x3ff148(0x27b)](_0x26c15c=>{const _0x3266c0=_0x3ff148;_0x39e6b9+=_0x26c15c['number']*_0x26c15c[_0x3266c0(0x2dd)];}),_0x1ef873[_0x4062df[_0x3ff148(0x249)]-_0x22b864-0x1]=_0x39e6b9*(_0x438388-0x1);});let _0xc42677=[];_0x2bf952=[...config[_0xff8d7a(0x1ea)]]||[];let _0x186dbe=0x0;_0x30f4da=0x0,_0x4062df['forEach']((_0x30ba2b,_0x1016c1)=>{const _0xfb46ea=_0xff8d7a;if(_0x2bf952[_0x30f4da]){const _0x119fdb=fns[_0xfb46ea(0x25d)](_0x2bf952[_0x30f4da][_0xfb46ea(0x1b0)],_0xfb46ea(0x1d9),new Date()),_0x266878=fns[_0xfb46ea(0x25d)](_0x30ba2b[_0xfb46ea(0x1b0)],_0xfb46ea(0x1d9),new Date());if(fns[_0xfb46ea(0x31c)](_0x119fdb,_0x266878)){let _0x3cd41b=0x0;_0x2bf952[_0x30f4da][_0xfb46ea(0x304)][_0xfb46ea(0x27b)](_0x333a29=>{const _0x9b1ebf=_0xfb46ea;!_0xc42677[_0x333a29[_0x9b1ebf(0x2d4)]]?_0xc42677[_0x333a29[_0x9b1ebf(0x2d4)]]=_0x333a29[_0x9b1ebf(0x24d)]:(_0x3cd41b=_0xc42677[_0x333a29[_0x9b1ebf(0x2d4)]],_0xc42677[_0x333a29['coin']]+=_0x333a29[_0x9b1ebf(0x24d)]);const _0x34dce3=_0x30ba2b[_0x9b1ebf(0x2b2)]['find'](_0x571c53=>_0x571c53['coin']==_0x333a29[_0x9b1ebf(0x2d4)]);(!_0x34dce3||_0x34dce3[_0x9b1ebf(0x24d)]==0x0)&&(_0x186dbe+=(-_0x333a29[_0x9b1ebf(0x24d)]-_0x3cd41b)*_0x333a29[_0x9b1ebf(0x2dd)]);}),_0x30f4da++;}}_0x30ba2b[_0xfb46ea(0x2b2)][_0xfb46ea(0x27b)]((_0x3230a6,_0xaf4057)=>{const _0x2b86ff=_0xfb46ea;_0xc42677[_0x3230a6[_0x2b86ff(0x2d4)]]&&(_0x3230a6[_0x2b86ff(0x2a1)]=_0xc42677[_0x3230a6[_0x2b86ff(0x2d4)]]);}),_0x530f9c[_0xfb46ea(0x252)]({'date':_0x30ba2b[_0xfb46ea(0x1b0)],'eur':_0x30ba2b[_0xfb46ea(0x1f1)],'usd':_0x30ba2b[_0xfb46ea(0x358)],'offset':_0x1ef873[_0x1016c1],'netoffset':_0x186dbe,'coins':_0x30ba2b[_0xfb46ea(0x2b2)],'pnl':_0x30ba2b[_0xfb46ea(0x2ce)]});});}return _0x530f9c;}function _0x3629(_0x329c31,_0x1c98e4){const _0x2d3374=_0x4a6f();return _0x3629=function(_0x13e08b,_0x5ce81c){_0x13e08b=_0x13e08b-0x185;let _0x4a6f62=_0x2d3374[_0x13e08b];return _0x4a6f62;},_0x3629(_0x329c31,_0x1c98e4);}function emitPerformance(_0x260b77){const _0x8361bf=_0x1bf3c8;_0x260b77['length']!==0x0?(proxyEmit(_0x8361bf(0x31d),_0x260b77),lastPerformanceEmitted=getDate()):proxyEmit(_0x8361bf(0x31d),[]);}function getPerf(_0x138055,_0x10d696){const _0x2ec564=_0x1bf3c8;let _0x49811a=0x0,_0x31c449=0x0,_0x4499e0=0x0;_0x138055[_0x2ec564(0x2b2)][_0x2ec564(0x27b)](_0x3baa53=>{const _0xf383e4=_0x2ec564;_0x49811a+=_0x3baa53[_0xf383e4(0x24d)]*_0x3baa53[_0xf383e4(0x2dd)];});_0x10d696&&(_0x49811a+=_0x138055[_0x2ec564(0x267)]);if(config['basecoin']===_0x2ec564(0x2c9)||config[_0x2ec564(0x1ab)]===_0x2ec564(0x19a)||config[_0x2ec564(0x1ab)]===_0x2ec564(0x2f1))_0x31c449=_0x49811a*_0x138055[_0x2ec564(0x1f1)],_0x4499e0=_0x49811a*_0x138055[_0x2ec564(0x358)];else{if(usdBasecoins[_0x2ec564(0x306)](config['basecoin']))_0x31c449=_0x49811a*_0x138055['eur']/_0x138055[_0x2ec564(0x358)],_0x4499e0=_0x49811a;else config[_0x2ec564(0x1ab)]===_0x2ec564(0x201)&&(_0x31c449=_0x49811a,_0x4499e0=_0x49811a*_0x138055[_0x2ec564(0x358)]/_0x138055[_0x2ec564(0x1f1)]);}return[_0x49811a,_0x31c449,_0x4499e0];}function CurrencyFactor(_0xee7f33,_0x18d929,_0x46789a){const _0x17bc55=_0x1bf3c8;let _0x2aa44d;if(_0x18d929===_0x17bc55(0x2c9)||_0x18d929===_0x17bc55(0x19a)||_0x18d929===_0x17bc55(0x2f1))_0x2aa44d=_0x46789a===_0x17bc55(0x201)?_0xee7f33[_0x17bc55(0x1f1)]:_0xee7f33[_0x17bc55(0x358)];else{if(usdBasecoins[_0x17bc55(0x306)](_0x18d929))_0x2aa44d=_0x46789a===_0x17bc55(0x201)?_0xee7f33['eur']/_0xee7f33['usd']:0x1;else _0x18d929===_0x17bc55(0x201)&&(_0x2aa44d=_0x46789a===_0x17bc55(0x201)?0x1:_0xee7f33[_0x17bc55(0x358)]/_0xee7f33[_0x17bc55(0x1f1)]);}return _0x2aa44d;}function getKPIs(_0x10a51e,_0x1067cf='EUR'){const _0x325969=_0x1bf3c8,_0x23e53c=config['basecoin'],_0x365823=lastBalances,_0x283fb2=currentCoins,_0x1dcae7=getNormalizedPerformance(),_0x20e8e8=CurrencyFactor(_0x365823,config[_0x325969(0x1ab)],_0x1067cf);let _0x3661f7=0x0;_0x283fb2[_0x325969(0x27b)](_0x26821e=>{const _0x340396=_0x325969;_0x3661f7+=_0x26821e[_0x340396(0x24d)]*_0x26821e['last'];});_0x10a51e[_0x325969(0x306)](_0x325969(0x2b6))&&(_0x3661f7*=_0x20e8e8);let _0x2451b3;if(_0x3661f7!==0x0){if(_0x10a51e===_0x325969(0x1ab)||_0x10a51e===_0x325969(0x2b6)){if(_0x10a51e==='basecoin')_0x2451b3=(_0x3661f7/startingBalances[_0x325969(0x1ab)]-0x1)*0x64;else{if(_0x1067cf===_0x325969(0x201))_0x2451b3=(_0x3661f7/startingBalances[_0x325969(0x1f1)]-0x1)*0x64;else _0x2451b3=(_0x3661f7/startingBalances[_0x325969(0x358)]-0x1)*0x64;}}if(_0x10a51e[_0x325969(0x306)]('net')){let _0x3f4d5f=0x0;if(startingBalances[_0x325969(0x2b2)])_0x283fb2[_0x325969(0x27b)](_0x2450a5=>{const _0x174ff8=_0x325969;let _0x492bc2=startingBalances[_0x174ff8(0x2b2)][_0x174ff8(0x1b8)](_0x223cf1=>_0x223cf1[_0x174ff8(0x2d4)]===_0x2450a5[_0x174ff8(0x2d4)]);if(_0x492bc2&&_0x492bc2[_0x174ff8(0x2d4)]&&_0x2450a5[_0x174ff8(0x24d)]!==0x0)_0x3f4d5f+=_0x492bc2['number']*_0x2450a5['last'];});let _0x35743a=0x0;if(_0x1dcae7[_0x325969(0x249)]!==0x0){let _0x4be535=_0x1dcae7[_0x1dcae7['length']-0x1];_0x35743a=_0x4be535[_0x325969(0x2cc)];}_0x3f4d5f-=_0x35743a;let _0x42a0b1;_0x10a51e===_0x325969(0x1f9)&&(_0x42a0b1=startingBalances['basecoin']),_0x10a51e===_0x325969(0x30f)&&(_0x42a0b1=_0x1067cf===_0x325969(0x201)?startingBalances[_0x325969(0x1f1)]:startingBalances['usd'],_0x3f4d5f*=_0x20e8e8),_0x2451b3=(_0x3661f7-_0x3f4d5f)/_0x42a0b1*0x64,_0x3661f7=_0x3661f7-_0x3f4d5f;}if(_0x10a51e['includes'](_0x325969(0x2ce))){if(_0x1dcae7[_0x325969(0x249)]!==0x0&&_0x283fb2[_0x325969(0x249)]!==0x0){let _0x3166ad,_0x129ea4=_0x1dcae7[_0x1dcae7['length']-0x1][_0x325969(0x2ce)];_0x10a51e['includes']('fiat')?(_0x3166ad=_0x1067cf===_0x325969(0x201)?startingBalances[_0x325969(0x1f1)]:startingBalances['usd'],_0x129ea4*=CurrencyFactor(_0x365823,_0x23e53c,_0x1067cf)):_0x3166ad=startingBalances[_0x325969(0x1ab)],_0x2451b3=_0x129ea4/_0x3166ad*0x64,_0x3661f7=_0x129ea4;}}if(_0x2451b3){if(_0x2451b3<0x64)_0x2451b3=_0x2451b3['toFixed'](0x2);else{if(_0x2451b3<0x3e8)_0x2451b3=_0x2451b3[_0x325969(0x1fd)](0x1);else _0x2451b3=_0x2451b3[_0x325969(0x1fd)](0x0);}}else _0x2451b3=Number('0')[_0x325969(0x1fd)](0x2);if(_0x3661f7){if(Math[_0x325969(0x302)](_0x3661f7)<0.000001)_0x3661f7=_0x3661f7[_0x325969(0x1fd)](0x2);else{if(Math['abs'](_0x3661f7)<0.1)_0x3661f7=_0x3661f7[_0x325969(0x1fd)](0x6);else{if(Math[_0x325969(0x302)](_0x3661f7)<0x1)_0x3661f7=_0x3661f7[_0x325969(0x1fd)](0x5);else{if(Math[_0x325969(0x302)](_0x3661f7)<0xa)_0x3661f7=_0x3661f7[_0x325969(0x1fd)](0x4);else{if(Math[_0x325969(0x302)](_0x3661f7)<0x64)_0x3661f7=_0x3661f7[_0x325969(0x1fd)](0x3);else{if(Math[_0x325969(0x302)](_0x3661f7)<0x3e8)_0x3661f7=_0x3661f7['toFixed'](0x2);else _0x3661f7=_0x3661f7[_0x325969(0x1fd)](0x2);}}}}}}else _0x3661f7=Number('0')[_0x325969(0x1fd)](0x2);}else _0x2451b3=Number('0')[_0x325969(0x1fd)](0x2);if(_0x2451b3>=0x0)_0x2451b3='+'+_0x2451b3;return{'value':_0x3661f7,'change':_0x2451b3};}async function getStartingBalances(_0x23bdc3,_0x137b50=!![]){const _0xc9db27=_0x1bf3c8;if(_0x23bdc3['length']!==0x0){const [_0x2e9725,_0x22668c,_0x35c730]=getPerf(_0x23bdc3[0x0],!![]);let _0x4b5853=[];config[_0xc9db27(0x34e)]['forEach'](_0x5358f4=>{const _0xe09b64=_0xc9db27;let _0x2a70e9=0x0,_0x44876b;config[_0xe09b64(0x1ea)][_0xe09b64(0x27b)](_0x37c03e=>{const _0xe26aa4=_0xe09b64;let _0x39d8da=_0x37c03e['changes'][_0xe26aa4(0x1b8)](_0x3dd17d=>_0x3dd17d[_0xe26aa4(0x2d4)]==_0x5358f4[_0xe26aa4(0x2d4)]);if(_0x39d8da){_0x2a70e9+=_0x39d8da[_0xe26aa4(0x24d)];if(!_0x44876b)_0x44876b=_0x39d8da['price'];}}),_0x4b5853['push']({'coin':_0x5358f4[_0xe09b64(0x2d4)],'number':_0x2a70e9,'initialprice':_0x44876b});});const _0x38e245={'basecoin':_0x2e9725,'eur':_0x22668c,'usd':_0x35c730,'coins':_0x4b5853};if(_0x137b50)proxyEmit('starting-balances',_0x38e245);startingBalances=_0x38e245;}}function headlessMode(_0x442a39){const _0x1046d3=_0x1bf3c8;let _0x3bf8c5=_0x442a39['portfolio'],_0x454d7b=_0x442a39['threshold'],_0x36e1fe=[];for(let _0x1d4cbc of _0x3bf8c5){if(_0x1d4cbc[_0x1046d3(0x2d4)]!=config[_0x1046d3(0x1ab)]){if(_0x1d4cbc['delta']>=_0x454d7b/0x64){if(_0x1d4cbc[_0x1046d3(0x2fa)])_0x36e1fe[_0x1046d3(0x252)](_0x1d4cbc);}else{if(_0x1d4cbc[_0x1046d3(0x2ae)]<=-_0x454d7b/0x64){if(_0x1d4cbc['valid'])_0x36e1fe[_0x1046d3(0x252)](_0x1d4cbc);}}}}_0x36e1fe[_0x1046d3(0x249)]>0x0&&placeOrder(_0x36e1fe);}function notifyBalance(_0x4178c2){const _0x1432a2=_0x1bf3c8;let _0x5122d9=_0x4178c2[_0x1432a2(0x34e)],_0x124869=_0x4178c2[_0x1432a2(0x197)],_0x5dceba=[];for(let _0x1f987a of _0x5122d9){if(_0x1f987a['coin']!=config[_0x1432a2(0x1ab)]){if(_0x1f987a[_0x1432a2(0x2ae)]>=_0x124869/0x64){if(_0x1f987a[_0x1432a2(0x2fa)])_0x5dceba['push'](_0x1f987a);}else{if(_0x1f987a['delta']<=-_0x124869/0x64){if(_0x1f987a[_0x1432a2(0x2fa)])_0x5dceba[_0x1432a2(0x252)](_0x1f987a);}}}}if(_0x5dceba[_0x1432a2(0x249)]>0x0){let _0x57c616=_0x5dceba[_0x1432a2(0x1ef)](_0x8b975e=>_0x8b975e[_0x1432a2(0x2d4)]);_0x57c616[_0x1432a2(0x22d)]();let _0x4433e6=_0x57c616[_0x1432a2(0x258)](',\x20');if(!lastCoinsToBalance)logHistory(_0x1432a2(0x2ea),_0x1432a2(0x1f8));lastCoinsToBalance=_0x4433e6;}}function symbolToCoin(_0xa5d594){const _0x1cb8ea=_0x1bf3c8;let _0x245757;if(_0xa5d594['includes']('/'+config[_0x1cb8ea(0x1ab)]))_0x245757=_0xa5d594[_0x1cb8ea(0x2bd)]('/'+config[_0x1cb8ea(0x1ab)],'');if(_0xa5d594[_0x1cb8ea(0x306)](config[_0x1cb8ea(0x1ab)]+'/'))_0x245757=_0xa5d594[_0x1cb8ea(0x2bd)](config[_0x1cb8ea(0x1ab)]+'/','');return _0x245757;}function setLockOrders(_0xcaf11e){const _0x6448f2=_0x1bf3c8;lockOrders=_0xcaf11e,logger[_0x6448f2(0x223)]('Set\x20lock\x20orders\x20to:\x20'+Object[_0x6448f2(0x1f3)](ORDERS)[lockOrders]);}async function unlockOrders(_0x3aa9e2=![]){const _0x51a1e7=_0x1bf3c8;if(allOrdersPlaced&&lockOrders==ORDERS['LOCKED']){setLockOrders(ORDERS[_0x51a1e7(0x28b)]);if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);if(_0x3aa9e2){const _0x21fdd8=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x21fdd8,setBlockTransactionDetection(![]);}validateOrdersState=_0x51a1e7(0x2a1),persistOpenOrders([]),setLockOrders(ORDERS['UNLOCKED']);}}async function validateOrders(_0xef56fb){const _0x55a895=_0x1bf3c8;if(_0xef56fb)validateOrdersState=_0xef56fb;logger['debug']('1\x20-\x20Validate\x20orders:\x20'+validateOrdersState+_0x55a895(0x322)+Object[_0x55a895(0x1f3)](ORDERS)[lockOrders]);let _0x11ae5f=[],_0xe85d59=config[_0x55a895(0x33d)]==_0x55a895(0x2ff)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x55a895(0x25e)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x55a895(0x239)])return;logger[_0x55a895(0x223)](_0x55a895(0x34a)+validateOrdersState);for(let _0x231f5e=lastOrders[_0x55a895(0x249)]-0x1;_0x231f5e>=0x0;_0x231f5e--){let _0x57ef6b=lastOrders[_0x231f5e],_0x6e26bd=![];_0x57ef6b[_0x55a895(0x2b5)]>0x0&&(_0x6e26bd=!![]),_0x11ae5f[_0x55a895(0x252)](_0x6e26bd),_0x6e26bd&&config[_0x55a895(0x33d)]!=_0x55a895(0x2ff)&&logHistory(_0x55a895(0x2c5),_0x55a895(0x281)+_0x57ef6b[_0x55a895(0x20f)]+'\x20'+_0x57ef6b['side']+'\x20#'+formatResult(_0x57ef6b[_0x55a895(0x2b5)],0x8)+'\x20@'+formatResult(_0x57ef6b['price'],0x8)),_0x6e26bd&&lastOrders['splice'](_0x231f5e,0x1);}persistOpenOrders(lastOrders);const _0x52bd99=coolingDown?_0x55a895(0x209):_0x55a895(0x2d9);if(validateOrdersState==_0x55a895(0x2a1)){validateOrdersState=_0x55a895(0x1a2);if(_0x11ae5f[_0x55a895(0x306)](![])){}else await unlockOrders();}else{if(validateOrdersState=='ongoing'){if(_0x11ae5f[_0x55a895(0x306)](![])){}else await unlockOrders();}else{if(validateOrdersState==_0x55a895(0x19f))_0x11ae5f[_0x55a895(0x306)](![])&&(config[_0x55a895(0x33d)]==_0x55a895(0x2ff)?logHistory('success',_0x55a895(0x25b)+Math['round'](_0xe85d59*validateOrderInterval/0xea60)+_0x55a895(0x2cf)+_0x52bd99):(await cancelOrders(),logHistory(_0x55a895(0x21a),_0x55a895(0x350)+Math[_0x55a895(0x20b)](_0xe85d59*validateOrderInterval/0xea60)+_0x55a895(0x2cf)+_0x52bd99))),await unlockOrders(!![]);else{if(validateOrdersState==_0x55a895(0x272)){if(config[_0x55a895(0x33d)]!=_0x55a895(0x2ff))logHistory(_0x55a895(0x21a),_0x55a895(0x2eb)+_0x52bd99);await unlockOrders(!![]);}}}}}async function cancelOrders(){const _0x31911f=_0x1bf3c8;lastOrders[_0x31911f(0x27b)](async _0x10dcab=>{const _0x5b9971=_0x31911f;try{const _0x570ff4=await exchange[_0x5b9971(0x253)](_0x10dcab[_0x5b9971(0x2e2)],_0x10dcab[_0x5b9971(0x20f)]);}catch(_0x3d39a9){if(_0x3d39a9[_0x5b9971(0x2e8)]()[_0x5b9971(0x306)](_0x5b9971(0x318))){}else await handleError(_0x3d39a9,_0x5b9971(0x346));}});}async function initCoinResults(_0x4f73db){const _0x156f70=_0x1bf3c8;_0x4f73db?logger[_0x156f70(0x223)](_0x156f70(0x284)+_0x4f73db):logger[_0x156f70(0x223)](_0x156f70(0x334)),config[_0x156f70(0x34e)][_0x156f70(0x27b)](_0x194f28=>{const _0x5b90d8=_0x156f70;if(!_0x194f28[_0x5b90d8(0x279)]&&_0x194f28[_0x5b90d8(0x2d4)]!=config['basecoin']){const _0x394ec0=currentCoins[_0x5b90d8(0x1b8)](_0x514756=>_0x514756[_0x5b90d8(0x2d4)]==_0x194f28['coin']),_0x5d1773=gTicker[noslash(_0x194f28[_0x5b90d8(0x20f)])];let _0x33197e=_0x394ec0?_0x394ec0['number']:null,_0x5ffcc3=_0x194f28['reverse']?0x1/_0x5d1773:_0x5d1773,_0x259774;config[_0x5b90d8(0x1ea)][_0x5b90d8(0x27b)](_0x260309=>{const _0x3c089d=_0x5b90d8;!_0x259774&&(_0x259774=_0x260309[_0x3c089d(0x304)][_0x3c089d(0x1b8)](_0x1c142b=>_0x1c142b['coin']==_0x194f28['coin']),_0x259774&&(_0x33197e=_0x259774[_0x3c089d(0x24d)],_0x5ffcc3=_0x259774[_0x3c089d(0x2dd)]));});let _0x6e4c33=dbCoinResults[_0x5b90d8(0x1db)](_0x5b90d8(0x2b2))['find']({'coin':_0x194f28['coin']})[_0x5b90d8(0x310)]();if(!_0x6e4c33){const _0x272857={'coin':_0x194f28[_0x5b90d8(0x2d4)],'number':_0x33197e,'breakeven':_0x5ffcc3,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get'](_0x5b90d8(0x2b2))[_0x5b90d8(0x252)](_0x272857)[_0x5b90d8(0x190)]();}else{if(_0x4f73db&&_0x194f28[_0x5b90d8(0x2d4)]==_0x4f73db){const _0x238099={'coin':_0x194f28[_0x5b90d8(0x2d4)],'number':_0x33197e,'breakeven':_0x5ffcc3,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x5b90d8(0x1db)](_0x5b90d8(0x2b2))[_0x5b90d8(0x1b8)]({'coin':_0x194f28[_0x5b90d8(0x2d4)]})[_0x5b90d8(0x1f2)](_0x238099)[_0x5b90d8(0x190)]();}}}});}async function placeOrder(_0x1a250a){const _0x1d48d7=_0x1bf3c8,_0x6952f=config[_0x1d48d7(0x33d)]==_0x1d48d7(0x2ff)?_0x1d48d7(0x2ff):_0x1d48d7(0x33e);if(lockOrders==ORDERS['UNLOCKED']&&!coolingDown){setLockOrders(ORDERS[_0x1d48d7(0x239)]);while(transactionDetectionOngoing){await sleep(0x64);}logger[_0x1d48d7(0x223)](_0x1d48d7(0x335)+_0x1a250a[_0x1d48d7(0x1ef)](_0x164779=>_0x164779[_0x1d48d7(0x2d4)])[_0x1d48d7(0x258)](',\x20')),lastCoinsToBalance='',allOrdersPlaced=![],validateOrdersState=_0x1d48d7(0x2a1);let _0x23487d=![];lastOrders=[];const _0x3196da=config[_0x1d48d7(0x197)];for(const _0x22b643 of _0x1a250a){let _0x58f552,_0x5f81d7,_0x347303,_0x56f7a2,_0x1a31f4,_0x19ca8e=_0x22b643['symbol'];logger[_0x1d48d7(0x223)](_0x1d48d7(0x21d)+_0x22b643[_0x1d48d7(0x2d4)]+'\x20'+_0x22b643[_0x1d48d7(0x24d)]+'\x20'+_0x22b643['last']+'\x20'+_0x22b643[_0x1d48d7(0x2db)]+'%\x20'+_0x22b643[_0x1d48d7(0x28c)]+'%\x20'+(0x64*_0x22b643['delta'])[_0x1d48d7(0x1fd)](0x2)+_0x1d48d7(0x333)+_0x3196da['toFixed'](0x2)+'%)');const _0x33a932=currentCoins[_0x1d48d7(0x1b8)](_0x2abaec=>_0x2abaec[_0x1d48d7(0x2d4)]==_0x22b643['coin']);_0x33a932&&(_0x33a932[_0x1d48d7(0x1d1)]=_0x22b643[_0x1d48d7(0x24d)]);try{const _0x9acd68=await exchange[_0x1d48d7(0x1d2)](_0x19ca8e);_0x58f552=_0x22b643[_0x1d48d7(0x288)]?0x1/_0x22b643[_0x1d48d7(0x1af)]:_0x22b643[_0x1d48d7(0x1af)],_0x5f81d7=_0x9acd68[_0x1d48d7(0x30d)],_0x347303=_0x9acd68[_0x1d48d7(0x353)];_0x22b643[_0x1d48d7(0x288)]?(_0x56f7a2=_0x22b643[_0x1d48d7(0x313)]==_0x1d48d7(0x207)?_0x1d48d7(0x27a):'buy',_0x1a31f4=Math[_0x1d48d7(0x302)](_0x22b643[_0x1d48d7(0x23d)])/_0x58f552):(_0x56f7a2=_0x22b643[_0x1d48d7(0x313)],_0x1a31f4=Math[_0x1d48d7(0x302)](_0x22b643['trade']));_0x6952f==_0x1d48d7(0x33e)&&(config[_0x1d48d7(0x33d)]==_0x1d48d7(0x1b9)&&(_0x58f552=_0x56f7a2==_0x1d48d7(0x207)?_0x5f81d7:_0x347303),config[_0x1d48d7(0x33d)]==_0x1d48d7(0x26a)&&(_0x58f552=_0x56f7a2=='buy'?_0x347303:_0x5f81d7));_0x1a31f4=formatResult(_0x1a31f4,0x8),_0x58f552=formatResult(_0x58f552,0x8);const _0x7df6b1=_0x56f7a2=='sell'?config[_0x1d48d7(0x2a8)]?String[_0x1d48d7(0x240)]('0x'+config[_0x1d48d7(0x2a8)])+'\x20':'':config[_0x1d48d7(0x217)]?String['fromCodePoint']('0x'+config[_0x1d48d7(0x217)])+'\x20':'',_0x467088=_0x6952f=='market'?_0x1d48d7(0x1e4):config[_0x1d48d7(0x33d)]=='limit-high'?'Limit\x20(high-margin)':_0x1d48d7(0x2a4),_0xc6ebb4=(Math[_0x1d48d7(0x337)](Math['random']()*0x35a4e900)+0x5f5e100)[_0x1d48d7(0x2e8)]();lastOrders[_0x1d48d7(0x252)]({'customId':_0xc6ebb4,'symbol':_0x19ca8e,'coin':_0x22b643[_0x1d48d7(0x2d4)],'amount':_0x1a31f4,'price':_0x58f552,'side':_0x56f7a2,'reverse':_0x22b643[_0x1d48d7(0x288)],'filled':0x0});let _0x3d4a83;_0x6952f==_0x1d48d7(0x2ff)?_0x56f7a2==_0x1d48d7(0x207)&&['Bybit',_0x1d48d7(0x2df),_0x1d48d7(0x203),_0x1d48d7(0x238),_0x1d48d7(0x342)][_0x1d48d7(0x306)](config['exchange'])?_0x3d4a83=await exchange['createOrder'](_0x19ca8e,_0x6952f,_0x56f7a2,_0x1a31f4,_0x58f552):_0x3d4a83=await exchange[_0x1d48d7(0x30e)](_0x19ca8e,_0x6952f,_0x56f7a2,_0x1a31f4,undefined):_0x3d4a83=await exchange[_0x1d48d7(0x30e)](_0x19ca8e,_0x6952f,_0x56f7a2,_0x1a31f4,_0x58f552);const _0x115bfd=lastOrders[_0x1d48d7(0x249)]-0x1;if(_0x115bfd>=0x0&&lastOrders[_0x115bfd][_0x1d48d7(0x231)]==_0xc6ebb4){lastOrders[_0x115bfd][_0x1d48d7(0x2e2)]=_0x3d4a83['id'];if(_0x3d4a83[_0x1d48d7(0x2d6)])lastOrders[_0x115bfd]['amount']=_0x3d4a83[_0x1d48d7(0x2d6)];if(_0x3d4a83[_0x1d48d7(0x2dd)])lastOrders[_0x115bfd][_0x1d48d7(0x2dd)]=_0x3d4a83[_0x1d48d7(0x2dd)];lastOrders[_0x115bfd]['fee']=_0x3d4a83[_0x1d48d7(0x1bd)];}if(_0x3d4a83[_0x1d48d7(0x2d6)])_0x1a31f4=_0x3d4a83['amount'];if(_0x3d4a83[_0x1d48d7(0x2dd)])_0x58f552=_0x3d4a83[_0x1d48d7(0x2dd)];if(_0x6952f==_0x1d48d7(0x2ff))logHistory(_0x1d48d7(0x2c5),''+_0x7df6b1+_0x467088+_0x1d48d7(0x271)+_0x19ca8e+'\x20'+_0x56f7a2+'\x20#'+formatResult(_0x1a31f4,0x8)+'\x20@'+formatResult(_0x58f552,0x8));else logHistory(_0x1d48d7(0x2c5),''+_0x7df6b1+_0x467088+_0x1d48d7(0x271)+_0x19ca8e+'\x20'+_0x56f7a2+'\x20#'+formatResult(_0x1a31f4,0x8)+'\x20@'+formatResult(_0x58f552,0x8));logger[_0x1d48d7(0x223)](_0x1d48d7(0x285)+_0x3d4a83['id']+_0x1d48d7(0x2ab)+_0xc6ebb4);if(config[_0x1d48d7(0x25c)]!=0x0){let _0x309952=null;if(cooldownTracker[_0x1d48d7(0x249)]==config[_0x1d48d7(0x25c)]-0x1)_0x309952=cooldownTracker[_0x1d48d7(0x1e0)]();const _0x23aacf=getTimeStamp();cooldownTracker[_0x1d48d7(0x252)](_0x23aacf);if(_0x309952){const _0xcadc56=fns[_0x1d48d7(0x300)](new Date(_0x23aacf),new Date(_0x309952));if(_0xcadc56<cooldownInterval){logHistory(_0x1d48d7(0x1d3),_0x1d48d7(0x251)+config[_0x1d48d7(0x25c)]+_0x1d48d7(0x2f6)+cooldownInterval/0x3c+'\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20'+cooldownPeriod/(0xe10*0x3e8)+_0x1d48d7(0x2cb)),coolingDown=!![];break;}}}}catch(_0x259377){if(_0x259377[_0x1d48d7(0x2e8)]()[_0x1d48d7(0x306)](_0x1d48d7(0x32e)))lastOrders=lastOrders['filter'](_0x2075f2=>_0x2075f2[_0x1d48d7(0x20f)]!=_0x19ca8e),logHistory(_0x1d48d7(0x1d3),'Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x19ca8e),_0x23487d=!![];else{if(_0x259377[_0x1d48d7(0x2e8)]()[_0x1d48d7(0x306)](_0x1d48d7(0x20e)))lastOrders=lastOrders[_0x1d48d7(0x1a6)](_0x146622=>_0x146622[_0x1d48d7(0x20f)]!=_0x19ca8e),logHistory(_0x1d48d7(0x1d3),_0x1d48d7(0x2a2)+_0x19ca8e),_0x23487d=!![];else{if(_0x259377[_0x1d48d7(0x2e8)]()[_0x1d48d7(0x306)]('InvalidOrder'))lastOrders=lastOrders[_0x1d48d7(0x1a6)](_0x1971ae=>_0x1971ae['symbol']!=_0x19ca8e),logHistory(_0x1d48d7(0x1d3),_0x1d48d7(0x294)+_0x19ca8e),logger[_0x1d48d7(0x223)](_0x259377),_0x23487d=!![];else _0x259377[_0x1d48d7(0x2e8)]()['includes'](_0x1d48d7(0x274))?(lastOrders=lastOrders[_0x1d48d7(0x1a6)](_0x1faf6c=>_0x1faf6c[_0x1d48d7(0x20f)]!=_0x19ca8e),logHistory(_0x1d48d7(0x1d3),_0x1d48d7(0x21b)+_0x19ca8e),_0x23487d=!![]):(lastOrders=lastOrders['filter'](_0x3f9e5c=>_0x3f9e5c['symbol']!=_0x19ca8e),await handleError(_0x259377,'placeOrder()',_0x19ca8e));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders['length']>0x0){const _0x346849=config[_0x1d48d7(0x33d)]==_0x1d48d7(0x2ff)?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x28aa21=_0x1d48d7;validateOrders(_0x28aa21(0x19f));},_0x346849);}else unlockOrders();_0x23487d&&config[_0x1d48d7(0x31e)]&&(logHistory(_0x1d48d7(0x1d3),_0x1d48d7(0x2cd)+pauseBotMsg),await pauseBot(pauseBotInterval)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory('success',_0x1d48d7(0x23a)));}else{if(coolingDown)!config['headless']&&logHistory(_0x1d48d7(0x1d3),_0x1d48d7(0x1c4));else lockOrders!=ORDERS[_0x1d48d7(0x24a)]&&(!config['headless']&&(config[_0x1d48d7(0x33d)]==_0x1d48d7(0x2ff)?logHistory(_0x1d48d7(0x1d3),_0x1d48d7(0x270)):logHistory('error',_0x1d48d7(0x259))));}}function persistOpenOrders(_0x35e887){const _0x10017a=_0x1bf3c8,_0x58a6e9={...config,'openOrders':_0x35e887};let _0x450aff=dbConfig[_0x10017a(0x1db)](_0x10017a(0x242))[_0x10017a(0x1b8)]({'botID':botID})[_0x10017a(0x310)]();_0x450aff&&dbConfig[_0x10017a(0x1db)](_0x10017a(0x242))[_0x10017a(0x1b8)]({'botID':botID})[_0x10017a(0x1f2)](_0x58a6e9)[_0x10017a(0x190)]();}function restoreOrders(){const _0x13ac91=_0x1bf3c8;let _0x116d98;config[_0x13ac91(0x1d8)]&&allOpenOrders[_0x13ac91(0x27b)](_0x5dd026=>{const _0x1a2771=_0x13ac91,_0x4b85e6=config[_0x1a2771(0x1d8)]['find'](_0x4e93d6=>_0x4e93d6[_0x1a2771(0x2e2)]==_0x5dd026['id']);_0x4b85e6&&(lastOrders[_0x1a2771(0x252)](_0x4b85e6),_0x116d98=_0x5dd026[_0x1a2771(0x2de)]);});if(lastOrders[_0x13ac91(0x249)]>0x0){setLockOrders(ORDERS[_0x13ac91(0x239)]),validateOrdersState=_0x13ac91(0x1a2),allOrdersPlaced=!![];const _0x4d5f54=new Date()['getTime'](),_0x2409f9=config[_0x13ac91(0x33d)]==_0x13ac91(0x2ff)?validateOrderTimeout*0x3c*0x3e8:config[_0x13ac91(0x25e)]*0x3c*0x3e8;if(_0x116d98+_0x2409f9>_0x4d5f54){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x4a1499=_0x13ac91;validateOrders(_0x4a1499(0x19f));},_0x116d98+_0x2409f9-_0x4d5f54);}else validateOrders('final');}}async function sendMetricsTelegram(){const _0x4a0d98=_0x1bf3c8;if(!coinsLoaded){process[_0x4a0d98(0x1de)]({'telegrammsg':'Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute'},_0x44269a=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x47da07='';if(config[_0x4a0d98(0x314)])_0x47da07=_0x4a0d98(0x2d7)+config[_0x4a0d98(0x28a)]+'\x20metrics:</b>\x20\x0a\x0a';else _0x47da07='<b>Bot\x20'+botID+_0x4a0d98(0x1b1);const _0x47f50b=config['basecoin'],_0x308303=config[_0x4a0d98(0x2b6)],_0x6fb1cc=getKPIs(_0x4a0d98(0x1ab)),_0x1aec2b=getKPIs('fiat',_0x308303),_0x152cc4=getKPIs(_0x4a0d98(0x1f9)),_0x266717=getKPIs('net-fiat',_0x308303),_0x536ab1=getKPIs('pnl-basecoin'),_0x2f0bf2=getKPIs('pnl-fiat',_0x308303);_0x47f50b[_0x4a0d98(0x306)](_0x308303)?(_0x47da07+=_0x4a0d98(0x18e),_0x47da07+=_0x4a0d98(0x245)+_0x47f50b+':\x20'+_0x6fb1cc[_0x4a0d98(0x310)]+'\x20('+_0x6fb1cc[_0x4a0d98(0x32f)]+_0x4a0d98(0x31a),_0x47da07+='Net\x20'+_0x47f50b+':\x20'+_0x152cc4['value']+'\x20('+_0x152cc4[_0x4a0d98(0x32f)]+_0x4a0d98(0x31a),_0x47da07+=_0x4a0d98(0x1b6)+_0x47f50b+':\x20'+_0x536ab1[_0x4a0d98(0x310)]+'\x20('+_0x536ab1['change']+_0x4a0d98(0x31a),_0x47da07+=_0x4a0d98(0x185)):(_0x47da07+=_0x4a0d98(0x18e),_0x47da07+=_0x4a0d98(0x245)+_0x47f50b+':\x20'+_0x6fb1cc[_0x4a0d98(0x310)]+'\x20('+_0x6fb1cc[_0x4a0d98(0x32f)]+_0x4a0d98(0x31a),_0x47da07+=_0x4a0d98(0x245)+_0x308303+':\x20'+_0x1aec2b[_0x4a0d98(0x310)]+'\x20('+_0x1aec2b['change']+_0x4a0d98(0x31a),_0x47da07+=_0x4a0d98(0x1a3)+_0x47f50b+':\x20'+_0x152cc4[_0x4a0d98(0x310)]+'\x20('+_0x152cc4[_0x4a0d98(0x32f)]+'%)\x0a',_0x47da07+=_0x4a0d98(0x1a3)+_0x308303+':\x20'+_0x266717[_0x4a0d98(0x310)]+'\x20('+_0x266717[_0x4a0d98(0x32f)]+_0x4a0d98(0x31a),_0x47da07+=_0x4a0d98(0x1b6)+_0x47f50b+':\x20'+_0x536ab1[_0x4a0d98(0x310)]+'\x20('+_0x536ab1['change']+_0x4a0d98(0x31a),_0x47da07+=_0x4a0d98(0x1b6)+_0x308303+':\x20'+_0x2f0bf2['value']+'\x20('+_0x2f0bf2[_0x4a0d98(0x32f)]+'%)\x0a',_0x47da07+=_0x4a0d98(0x185)),process[_0x4a0d98(0x1de)]({'telegrammsg':_0x47da07},_0x3d855c=>{});}async function sendPortfolioTelegram(){const _0x3be3ba=_0x1bf3c8;if(!coinsLoaded||!currentCoins[0x0][_0x3be3ba(0x2db)]){process['send']({'telegrammsg':_0x3be3ba(0x21e)},_0x18ea49=>{});return;}let _0x17bde7='';if(config['showname'])_0x17bde7=_0x3be3ba(0x2d7)+config[_0x3be3ba(0x28a)]+_0x3be3ba(0x2f4);else _0x17bde7=_0x3be3ba(0x2ba)+botID+'\x20portfolio:</b>\x20\x0a\x0a';_0x17bde7+=_0x3be3ba(0x18e),_0x17bde7+=_0x3be3ba(0x20a),_0x17bde7+=_0x3be3ba(0x29a),_0x17bde7+=_0x3be3ba(0x20a),currentCoins['forEach'](_0xb39da5=>{const _0x18036d=_0x3be3ba;_0x17bde7+=_0xb39da5[_0x18036d(0x2d4)]['padEnd'](0x7)+'|\x20'+formatPad(_0xb39da5[_0x18036d(0x2db)],0x2,0x6)+'|\x20'+formatPad(_0xb39da5['target'],0x2,0x6)+'|\x20'+formatPad(_0xb39da5[_0x18036d(0x2ae)]*0x64,0x2,0x6)+'\x0a';}),_0x17bde7+='</pre>',process[_0x3be3ba(0x1de)]({'telegrammsg':_0x17bde7},_0x34ef20=>{});}function formatPad(_0x2868b1,_0xde650c,_0x7cbc51){const _0x46c233=_0x1bf3c8,_0x81ea30=formatResultString(_0x2868b1,_0xde650c);return _0x81ea30?_0x81ea30['padStart'](_0x7cbc51):''[_0x46c233(0x347)](_0x7cbc51);}function logHistory(_0x3cec08,_0x19cc3d,_0x133f5d=''){const _0x31c109=_0x1bf3c8;logger[_0x31c109(0x212)](''+_0x19cc3d);let _0x12983d={'time':getTimeStamp(),'type':_0x3cec08,'event':_0x19cc3d};dbLogs[_0x31c109(0x1db)](_0x31c109(0x187))['push'](_0x12983d)[_0x31c109(0x190)]();if(_0x133f5d=='')_0x133f5d=_0x19cc3d;proxyEmit(_0x31c109(0x195),{'log':_0x12983d,'summary':_0x133f5d}),process[_0x31c109(0x1de)]({'telegram':{..._0x12983d,'botname':config[_0x31c109(0x28a)],'showname':config[_0x31c109(0x314)]}},_0x260748=>{});}function emitHistory(_0x4b1988={}){const _0x28fa41=_0x1bf3c8;Object[_0x28fa41(0x1f3)](_0x4b1988)[_0x28fa41(0x249)]==0x0&&(_0x4b1988={'type':[_0x28fa41(0x2c5),'event'],'event':'','page':0x1});if(_0x4b1988[_0x28fa41(0x2d0)]['includes']('event'))_0x4b1988['type'][_0x28fa41(0x191)](_0x4b1988[_0x28fa41(0x2d0)]['indexOf'](_0x28fa41(0x195)),0x1,_0x28fa41(0x1d3),_0x28fa41(0x2ea),_0x28fa41(0x21a));if(dbLogs[_0x28fa41(0x211)](_0x28fa41(0x187))[_0x28fa41(0x310)]()){let _0x57c623=dbLogs[_0x28fa41(0x1db)]('logs')[_0x28fa41(0x1a6)](_0xbce9a8=>{const _0x4fe8d4=_0x28fa41;if(_0x4b1988[_0x4fe8d4(0x2d0)][_0x4fe8d4(0x249)]==0x0)return![];else return _0x4b1988[_0x4fe8d4(0x2d0)][_0x4fe8d4(0x306)](_0xbce9a8[_0x4fe8d4(0x2d0)]);})[_0x28fa41(0x1a6)](_0x5fb2a8=>{const _0xd8cf8e=_0x28fa41;if(_0x4b1988[_0xd8cf8e(0x195)]=='')return!![];else return _0x5fb2a8[_0xd8cf8e(0x195)][_0xd8cf8e(0x261)]()[_0xd8cf8e(0x306)](_0x4b1988[_0xd8cf8e(0x195)][_0xd8cf8e(0x261)]());})[_0x28fa41(0x2aa)](_0x28fa41(0x268)),_0x2a4004=_0x57c623[_0x28fa41(0x310)]()['length'];_0x57c623=_0x57c623[_0x28fa41(0x288)]()[_0x28fa41(0x18b)]((_0x4b1988[_0x28fa41(0x348)]-0x1)*logPageSize,_0x4b1988[_0x28fa41(0x348)]*logPageSize-0x1)[_0x28fa41(0x288)]()[_0x28fa41(0x310)](),proxyEmit(_0x28fa41(0x26d),{'logs':_0x57c623,'total':_0x2a4004});}else proxyEmit(_0x28fa41(0x26d),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0xbd5dbd){const _0x1d22b0=_0x1bf3c8;if(dbLogs['has']('logs')['value']()){const _0x5f8f3c=dbLogs['get'](_0x1d22b0(0x187))[_0x1d22b0(0x2aa)](_0x1d22b0(0x268))[_0x1d22b0(0x1a6)](_0x1843d2=>{const _0x2e9d5c=_0x1d22b0;return _0x1843d2[_0x2e9d5c(0x2d0)]==_0x2e9d5c(0x2c5);})['value']();dbLogs[_0x1d22b0(0x1db)](_0x1d22b0(0x187))[_0x1d22b0(0x28f)]()[_0x1d22b0(0x190)](),dbLogs[_0x1d22b0(0x1db)](_0x1d22b0(0x187))[_0x1d22b0(0x1f2)](_0x5f8f3c)[_0x1d22b0(0x190)](),emitHistory(_0xbd5dbd);}}async function pauseBot(_0x3be2c2=pauseBotIntervalShort,_0xd200d1,_0x158a7e,_0x35203e=![]){const _0x5b48fc=_0x1bf3c8,_0x53522f=new Date()[_0x5b48fc(0x227)]();if(!lastErrorShown||_0x53522f-lastErrorShown>=_0x3be2c2){lastErrorShown=_0x53522f;if(!lastBotPause)lastBotPause=_0x53522f,consecutivePauses=0x1;else{if(_0x53522f-lastBotPause-_0x3be2c2<0x5a*0x3e8){consecutivePauses++;if(consecutivePauses>maxPauseRetries){if(_0x35203e){logHistory(_0x5b48fc(0x1d3),_0xd200d1+_0x5b48fc(0x232)),await killBot();return;}else logHistory(_0x5b48fc(0x1d3),_0xd200d1+pauseBotMsg),_0x3be2c2=pauseBotInterval;}}else consecutivePauses=0x1;lastBotPause=_0x53522f;}_0x158a7e?logger[_0x5b48fc(0x223)]('('+consecutivePauses+')\x20'+_0xd200d1+_0x5b48fc(0x283),_0x158a7e):logger[_0x5b48fc(0x223)]('('+consecutivePauses+')\x20'+_0xd200d1);if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);await sleep(_0x3be2c2),botPaused=![],_0x3be2c2==pauseBotIntervalShort?resumeBot(!![]):resumeBot(![]);}}}async function killBot(){const _0xa1d45c=_0x1bf3c8;botPaused=!![],await sleep(0x3e8),process[_0xa1d45c(0x1de)]({'stop':_0xa1d45c(0x297)},_0xccc667=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x3bf398,_0x3539aa,_0xd79da7=![]){const _0x1ce632=_0x1bf3c8;if(botPaused)return;let _0x4ef099;const _0x39f005=config[_0x1ce632(0x355)]||'Exchange';if(_0x3539aa)logger[_0x1ce632(0x223)]('Exception\x20thrown\x20in\x20'+_0x3539aa);const _0x42e2a0=()=>{const _0x43917e=_0x1ce632;loading[_0x43917e(0x1d3)]=_0x43917e(0x18f),emitLoadingProgress();};if(_0x3bf398['toString']()[_0x1ce632(0x306)](_0x1ce632(0x29d)))logHistory(_0x1ce632(0x1d3),_0x39f005+_0x1ce632(0x33b)),_0x42e2a0();else{if(_0x3bf398[_0x1ce632(0x2e8)]()[_0x1ce632(0x306)](_0x1ce632(0x1d4)))logHistory(_0x1ce632(0x1d3),_0x39f005+_0x1ce632(0x22a)),_0x42e2a0();else{if(_0x3bf398['toString']()[_0x1ce632(0x306)](_0x1ce632(0x305)))config['apiPassword']?_0x4ef099=_0x39f005+_0x1ce632(0x311):_0x4ef099=_0x39f005+_0x1ce632(0x27e),logHistory(_0x1ce632(0x1d3),_0x4ef099+_0x1ce632(0x2e5)),_0x42e2a0();else{if(_0x3bf398[_0x1ce632(0x2e8)]()[_0x1ce632(0x306)]('PermissionDenied'))logHistory(_0x1ce632(0x1d3),_0x39f005+_0x1ce632(0x1fb)),_0x42e2a0();else{if(!_0xd79da7)await handleError(_0x3bf398,null);}}}}}async function handleError(_0xf1f1e8,_0x5966db,_0x37dfd4=''){const _0x3d1cf4=_0x1bf3c8;if(botPaused)return;let _0x20ca61;const _0x4b17e4=config[_0x3d1cf4(0x355)]||_0x3d1cf4(0x2c8);if(_0x5966db)logger['debug']('Exception\x20thrown\x20in\x20'+_0x5966db);if(_0xf1f1e8[_0x3d1cf4(0x2e8)]()['includes'](_0x3d1cf4(0x1fa)))_0x20ca61=_0x4b17e4+'\x20blocked\x20API\x20(DDoSProtection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading',await pauseBot(undefined,_0x20ca61,_0xf1f1e8);else{if(_0xf1f1e8[_0x3d1cf4(0x2e8)]()['includes'](_0x3d1cf4(0x1ff)))_0x20ca61=_0x4b17e4+'\x20blocked\x20API\x20(RateLimitExceeded)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading',await pauseBot(undefined,_0x20ca61,_0xf1f1e8);else{if(_0xf1f1e8['toString']()['includes'](_0x3d1cf4(0x1cb))||_0xf1f1e8[_0x3d1cf4(0x2e8)]()['includes'](_0x3d1cf4(0x280)))_0x20ca61=_0x4b17e4+_0x3d1cf4(0x24f),await pauseBot(undefined,_0x20ca61,_0xf1f1e8[_0x3d1cf4(0x2e8)]());else{if(_0xf1f1e8[_0x3d1cf4(0x2e8)]()[_0x3d1cf4(0x306)](_0x3d1cf4(0x2e3)))_0x20ca61=_0x4b17e4+_0x3d1cf4(0x2a6),await pauseBot(undefined,_0x20ca61,_0xf1f1e8[_0x3d1cf4(0x2e8)]());else{if(_0xf1f1e8[_0x3d1cf4(0x2e8)]()['includes'](_0x3d1cf4(0x220)))_0x20ca61=_0x4b17e4+'\x20closed\x20the\x20connection\x20(see:\x20hodlerhacks.com/fix/5)',await pauseBot(undefined,_0x20ca61,_0xf1f1e8['toString']());else{if(_0xf1f1e8[_0x3d1cf4(0x2e8)]()[_0x3d1cf4(0x261)]()['includes']('timestamp')||_0xf1f1e8['toString']()[_0x3d1cf4(0x261)]()[_0x3d1cf4(0x306)]('request-time'))_0x20ca61=_0x3d1cf4(0x30a),await pauseBot(undefined,_0x20ca61,_0xf1f1e8[_0x3d1cf4(0x2e8)]());else{if(_0xf1f1e8[_0x3d1cf4(0x2e8)]()['includes'](_0x3d1cf4(0x1b4)))_0x20ca61=_0x4b17e4+_0x3d1cf4(0x215),await pauseBot(undefined,_0x20ca61,_0xf1f1e8[_0x3d1cf4(0x2e8)]());else{if(_0xf1f1e8 instanceof ccxt['NetworkError'])_0x20ca61=_0x4b17e4+_0x3d1cf4(0x2ed)+_0xf1f1e8['toString'](),logger[_0x3d1cf4(0x223)](_0x3d1cf4(0x21f),_0xf1f1e8),await pauseBot(undefined,_0x20ca61,_0xf1f1e8);else{if(_0xf1f1e8[_0x3d1cf4(0x2e8)]()[_0x3d1cf4(0x306)]('API-key\x20format\x20invalid'))logHistory(_0x3d1cf4(0x1d3),_0x4b17e4+_0x3d1cf4(0x1ac)),logHistory(_0x3d1cf4(0x1d3),_0x3d1cf4(0x1ce)),await killBot();else{if(_0xf1f1e8[_0x3d1cf4(0x2e8)]()[_0x3d1cf4(0x306)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory('error',_0x4b17e4+'\x20API\x20secret\x20is\x20invalid'),logHistory(_0x3d1cf4(0x1d3),_0x3d1cf4(0x1ce)),await killBot();else{if(_0xf1f1e8['toString']()['includes'](_0x3d1cf4(0x305))&&_0xf1f1e8[_0x3d1cf4(0x2e8)]()[_0x3d1cf4(0x306)]('token\x20is\x20expired'))_0x20ca61=_0x4b17e4+'\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)',await pauseBot(undefined,_0x20ca61,_0xf1f1e8,!![]);else{if(_0xf1f1e8[_0x3d1cf4(0x2e8)]()[_0x3d1cf4(0x306)](_0x3d1cf4(0x305)))config[_0x3d1cf4(0x1d6)]?_0x20ca61=_0x4b17e4+_0x3d1cf4(0x311):_0x20ca61=_0x4b17e4+_0x3d1cf4(0x27e),logHistory(_0x3d1cf4(0x1d3),_0x20ca61),logHistory(_0x3d1cf4(0x1d3),_0x3d1cf4(0x1ce)),await killBot();else{if(_0xf1f1e8[_0x3d1cf4(0x2e8)]()[_0x3d1cf4(0x306)](_0x3d1cf4(0x357)))logHistory(_0x3d1cf4(0x1d3),_0x4b17e4+_0x3d1cf4(0x1cd)),logHistory(_0x3d1cf4(0x1d3),_0x3d1cf4(0x1ce)),await killBot();else{if(_0xf1f1e8[_0x3d1cf4(0x2e8)]()[_0x3d1cf4(0x306)](_0x3d1cf4(0x2b4)))logHistory(_0x3d1cf4(0x1d3),_0x3d1cf4(0x1df)+_0x37dfd4),logger[_0x3d1cf4(0x223)](_0x3d1cf4(0x2ec),_0xf1f1e8);else{if(_0xf1f1e8 instanceof ccxt[_0x3d1cf4(0x349)]){_0x20ca61=_0x4b17e4+_0x3d1cf4(0x277)+_0xf1f1e8[_0x3d1cf4(0x2e8)]();if(_0x37dfd4)_0x20ca61+=_0x3d1cf4(0x23b)+_0x37dfd4;await pauseBot(undefined,_0x20ca61,_0xf1f1e8);}else{_0x20ca61=_0x3d1cf4(0x246)+_0xf1f1e8[_0x3d1cf4(0x2e8)]();if(_0x37dfd4)_0x20ca61+=_0x3d1cf4(0x23b)+_0x37dfd4;await pauseBot(undefined,_0x20ca61);}}}}}}}}}}}}}}}}function decryptRSA(_0x157015,_0x4c69a5){const _0x1c8ab3=_0x1bf3c8,_0x4eb409=forge['pki'][_0x1c8ab3(0x295)](_0x157015),_0x166b98=_0x4eb409['decrypt'](forge['util'][_0x1c8ab3(0x1ca)](_0x4c69a5),_0x1c8ab3(0x1a1),{'md':forge['md'][_0x1c8ab3(0x25a)][_0x1c8ab3(0x23f)](),'mgf1':{'md':forge['md'][_0x1c8ab3(0x25a)]['create']()}});return _0x166b98;}async function withRetry(_0x28a0c2,_0xcb38ce){const _0x6f12d1=_0x1bf3c8;let _0x1d973c=![],_0x5dbe99=0x0,_0x1e4ce1,_0x20fed0;while(_0x5dbe99<maxRetries){try{_0x1e4ce1=await _0xcb38ce();break;}catch(_0x175e97){_0x20fed0=_0x175e97,!_0x1d973c?(_0x1d973c=!![],logger[_0x6f12d1(0x223)](_0x6f12d1(0x199)+_0x28a0c2+':',_0x175e97[_0x6f12d1(0x2e8)]())):await sleep(retryInterval);}_0x5dbe99++;}if(_0x5dbe99==0x0)return _0x1e4ce1;if(_0x5dbe99>=maxRetries)throw _0x20fed0;else return logger[_0x6f12d1(0x223)](_0x6f12d1(0x29e)+_0x5dbe99+_0x6f12d1(0x2f2)),_0x1e4ce1;}function formatResult(_0x6df052,_0x11b2d5){const _0x222819=_0x1bf3c8;return parseFloat(_0x6df052[_0x222819(0x1fd)](_0x11b2d5));}function formatResultTruncate(_0x14505e,_0x3c236a){const _0x15c072=_0x1bf3c8;let _0x31107b=formatResultString(_0x14505e,0xa),_0x2e852d=_0x31107b['indexOf']('.');return _0x2e852d!=-0x1&&(_0x31107b=_0x31107b[_0x15c072(0x18b)](0x0,_0x2e852d+_0x3c236a+0x1)),Number(_0x31107b);}function formatResultString(_0x428604,_0x4dabde){const _0x403ae4=_0x1bf3c8;let _0x472083;if(!(''+_0x428604)[_0x403ae4(0x306)]('e'))_0x472083=+(Math[_0x403ae4(0x20b)](_0x428604+'e+'+_0x4dabde)+'e-'+_0x4dabde);else{let _0x4bcd39=(''+_0x428604)[_0x403ae4(0x2a9)]('e'),_0x34def3='';+_0x4bcd39[0x1]+_0x4dabde>0x0&&(_0x34def3='+'),_0x472083=+(Math[_0x403ae4(0x20b)](+_0x4bcd39[0x0]+'e'+_0x34def3+(+_0x4bcd39[0x1]+_0x4dabde))+'e-'+_0x4dabde);}return Number(_0x472083)[_0x403ae4(0x1fd)](_0x4dabde);}function _0x4a6f(){const _0x38f1b1=['fetchTickers()','loadSymbols()','\x20rejected\x20your\x20API\x20request\x20(see:\x20hodlerhacks.com/fix/4)','node-forge','emojibuy','portfolio1','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','success','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','Trigger:\x20','Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute','Network\x20error\x20details:','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','autoliquidity','\x20exchange','debug','bots','function','Invalid\x20API\x20details,\x20please\x20try\x20again\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','getTime','staging','sendPortfolioTelegram','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','process\x20','privateKey','sort','Test\x20new\x20API','search','ccxt','customId','\x20>\x20stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','pro','\x20/\x20','orderstatus','Market\x20order','secret','Huobi','LOCKED','Cooldown\x20ended\x20-\x20balancing\x20resumed','\x0aSymbol(s):\x20','watchTradesForSymbols()','trade','min','create','fromCodePoint','Loading\x20completed','bot','\x20-\x20bot\x20not\x20started','active','Value\x20','Unknown\x20error:\x20','restart','getOpenOrders()','length','UNLOCKED','emitHistory','2.6.22','number','30285EBsSmo','\x20not\x20available\x20(see:\x20hodlerhacks.com/fix/5)','-performance.json','Executed\x20','push','cancelOrder','detectLiquidityChange()','memoryUsage','watchOrders()','argv','join','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','sha256','Order(s)\x20not\x20validated\x20after\x20','cooldown','parse','timeout','2\x20-\x20Handled\x20open\x20orders','Generating\x20PnL\x20data','toLowerCase','/USDT','storeFiat','72kirHPn','testApi','marketcapsqrt','offset','time','enabled','limit-low','configuration-stored',',\x20must\x20be\x20a\x203\x20digit\x20number','event-history','\x20>\x20pausing\x20bot\x20for\x20','isBefore','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','\x20order:\x20','no\x20open\x20orders','configstate','must\x20be\x20greater\x20than\x20minimum\x20amount','Bot\x20','marketcapApi','\x20exchange\x20error:\x20','Initializing\x20exchange','excluded','sell','forEach','Headless:\x20','status','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','startdate','OnMaintenance','Order\x20filled:\x20','format','\x20>\x20details:','Resetting\x20coin\x20results:\x20','ID:\x20','average','canceled','reverse','spot','botname','UNLOCKING','target','marketcapEnabled','getSeconds','remove',':\x20timer\x20>','pop','Fee\x20discount\x20refund\x20detected:\x20','174627vEyzxF','Order\x20is\x20invalid:\x20','privateKeyFromPem','amountToPrecision','kill','showConfig','sandbox','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','entries','fetchBalance','API-key\x20format\x20invalid','RETRY\x20-\x20Problem\x20resolved\x20after\x20','quote','switch-manual','initial','Order\x20amount\x20is\x20invalid:\x20','\x20MB','Limit\x20(low-margin)','cloneDeep','\x20not\x20responding\x20(see:\x20hodlerhacks.com/fix/5)','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','emojisell','split','sortBy','\x20|\x20Custom\x20ID:\x20','mkdirSync','Cryptocom','delta','heapUsed','data','string','coins','unlinkSync','InsufficientFunds','filled','fiat','balances','Error\x20while\x20deleting\x20files:\x20','cost','<b>Bot\x20','\x20uses\x20','settings','replace','./logs/','portfolio2','args','-events.json','getMinutes','Error\x20details:\x20',')\x20|\x20exchange:\x20','order','001','onepagemode','Exchange','BTC','storeConfiguration','\x20hour','netoffset','Avoiding\x20continuous\x20order\x20attempts','pnl','\x20minutes\x20-\x20','type','sells','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','************','coin','watchTradesForSymbols','amount','<b>','currency','balancing\x20resumed','status\x20code\x20401','distribution','/USD','price','timestamp','Bitget','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','writeFile','orderId','RequestTimeout','basecoinvalue','\x20(see:\x20hodlerhacks.com/fix/1)','Waited\x20','toggleBotMode','toString','closed','warning','No\x20more\x20open\x20orders\x20-\x20','Error\x20details:','\x20network\x20error:\x20','watchTrades()','44EZrMWR','Block\x20transaction\x20detection:\x20','PAXG','\x20attempts','fetchTickers','\x20portfolio:</b>\x20\x0a\x0a','loading-canceled','\x20orders\x20in\x20less\x20than\x20','2.6.23','watchTrades','USDT','valid','USDC','fetchOpenOrders','\x20minutes','Initializing\x20exchange:\x20already\x20done','market','differenceInSeconds','1716CcldfQ','abs','log','changes','AuthenticationError','includes','remainingSymbols','/output-000.log','none','Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)','progress','.json','bid','createOrder','net-fiat','value','\x20API\x20key,\x20secret\x20or\x20password\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','getFullYear','side','showname','0\x20-\x20EXECUTION:\x20','initTickers()','/EUR','OrderNotFound','getStartingBalances','%)\x0a','Bybit','isEqual','performance','headless','bb-settings.json','no\x20exchange\x20reloaded','exchange\x20reload','\x20|\x20lock\x20orders:\x20','stringify','\x20>\x20[DEBUG]\x20','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','49hkkrnt','./version.json','Updating\x20API\x20key\x20(not\x20saved\x20in\x20config\x20file\x20yet)','substring','setSandboxMode','apiSecret','initclient','97PgwwWF','MIN_NOTIONAL','change','secure','limits','bot-','%\x20(','Initializing\x20coin\x20results','Placing\x20order\x20for:\x20','marketcap','floor','quick','existsSync','watchOrders','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','request-time','ordertype','limit','toUpperCase','startnumber','total','Huobipro','Failed\x20to\x20load\x20market\x20data\x20-\x20bot\x20not\x20started','password','freeze','cancelOrders()','padStart','page','ExchangeError','2\x20-\x20Validate\x20orders:\x20','1\x20-\x20partially\x20FILLED\x20(','./config/','highest','portfolio','added','Unfilled\x20order(s)\x20canceled\x20after\x20','\x20>\x20','percentage','ask','market_cap','exchange','timeshift','PermissionDenied','usd','</pre>','pid','logs','cancelLoading','fetchBalance()','update-liquidity','slice','(((.+)+)+)+$','280380GkIaRj','<pre>','api-issue','write','splice','\x20|\x20highest\x20fee:\x20','message','slider','event','testAPI()','threshold','\x20-\x20','RETRY\x20-\x20Error\x20in\x20','ETH','add','version','colorscheme','configuration','final','getHours','RSA-OAEP','ongoing','Net\x20','-config.json','18804nMbciH','filter','open','/backup/','running','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','basecoin','\x20API\x20key\x20is\x20invalid','sendMetricsTelegram','red_yellow_blue','last','date','\x20metrics:</b>\x20\x0a\x0a','11RElFaM','Error:\x20Invalid\x20argument\x20','InvalidNonce','getMonth','PnL\x20','\x20-\x20bot\x20switched\x20to\x20manual\x20mode','find','limit-high','1\x20-\x20Handle\x20open\x20orders','317262NZbzMq','removed','fee',':\x20Bot\x20','resetHistory','match','2\x20-\x20handling\x20FILLED\x20order:\x20','USD','exchanges','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode',')\x20unknown\x20order:\x20','***','startprice','test','storeHeadless','decode64','ExchangeNotAvailable','uncaughtException','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)','2.6.0','Portfolio\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','prevnumber','fetchTicker','error','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','max','apiPassword','timestamp-issue','openOrders','yyyy/MM/dd','Valid\x20balance\x20for\x20','get','Invalid\x20balance\x20for\x20','1648670edGxcQ','send','Insufficient\x20funds\x20to\x20execute\x20order:\x20','shift','1\x20-\x20FILLED\x20unknown\x20order:\x20','\x20-\x20bot\x20already\x20running\x20in\x20manual\x20mode','2.3.5','Market','Error\x20in\x20loadSymbols():\x20','bitmex','sqrt','breakeven','Order\x20filled','liquidity','USDP','defaults','TUSD','-results.json','map','1\x20-\x20FILLED\x20known\x20order:\x20','eur','assign','keys','apiKey','botID','Portfolio\x20change\x20detected:\x20','code','Manual\x20balancing\x20required','net-basecoin','DDoSProtection','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','2806tbhNLr','toFixed','environment','RateLimitExceeded','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','EUR','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','Cex','change24h','set','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','buy','cancel','balancing\x20resumes\x20when\x20cooldown\x20ends','-------------------------------\x0a','round','recent20','\x20has\x20a\x2024h\x20drop\x20of\x20','Invalid\x20quantity','symbol','getDate','has','full'];_0x4a6f=function(){return _0x38f1b1;};return _0x4a6f();}function getServerTime(){const _0x16689c=_0x1bf3c8,_0x3f0dbf=new Date();return _0x3f0dbf['getFullYear']()+'/'+(_0x3f0dbf[_0x16689c(0x1b5)]()+0x1)[_0x16689c(0x2e8)]()[_0x16689c(0x347)](0x2,'0')+'/'+_0x3f0dbf[_0x16689c(0x210)]()[_0x16689c(0x2e8)]()['padStart'](0x2,'0')+'\x20'+_0x3f0dbf[_0x16689c(0x1a0)]()[_0x16689c(0x2e8)]()['padStart'](0x2,'0')+':'+_0x3f0dbf[_0x16689c(0x2c2)]()[_0x16689c(0x2e8)]()[_0x16689c(0x347)](0x2,'0')+':'+_0x3f0dbf[_0x16689c(0x28e)]()[_0x16689c(0x2e8)]()[_0x16689c(0x347)](0x2,'0');}function getTimeStamp(){const _0x132f74=_0x1bf3c8,_0x2b2549=shiftedTime();return _0x2b2549[_0x132f74(0x312)]()+'/'+(_0x2b2549['getMonth']()+0x1)[_0x132f74(0x2e8)]()[_0x132f74(0x347)](0x2,'0')+'/'+_0x2b2549[_0x132f74(0x210)]()['toString']()[_0x132f74(0x347)](0x2,'0')+'\x20'+_0x2b2549['getHours']()['toString']()[_0x132f74(0x347)](0x2,'0')+':'+_0x2b2549['getMinutes']()[_0x132f74(0x2e8)]()[_0x132f74(0x347)](0x2,'0')+':'+_0x2b2549['getSeconds']()[_0x132f74(0x2e8)]()[_0x132f74(0x347)](0x2,'0');}function getDate(){const _0x692eea=_0x1bf3c8,_0x2041fc=shiftedTime();return _0x2041fc[_0x692eea(0x312)]()+'/'+(_0x2041fc[_0x692eea(0x1b5)]()+0x1)[_0x692eea(0x2e8)]()['padStart'](0x2,'0')+'/'+_0x2041fc[_0x692eea(0x210)]()[_0x692eea(0x2e8)]()['padStart'](0x2,'0');}function getHour(){const _0x41fbfb=_0x1bf3c8,_0x2eb0fe=shiftedTime();return _0x2eb0fe[_0x41fbfb(0x1a0)]()[_0x41fbfb(0x2e8)]()[_0x41fbfb(0x347)](0x2,'0');}function sleep(_0x472c20){return new Promise(_0x238ce1=>setTimeout(_0x238ce1,_0x472c20));}function shiftedTime(){const _0x25d169=_0x1bf3c8,_0x41711b=new Date();let _0x261310=_0x41711b;if(config&&config[_0x25d169(0x356)]!==0x0)_0x261310=fns[_0x25d169(0x19b)](_0x41711b,{'hours':config[_0x25d169(0x356)]});return _0x261310;}function timer(_0x9dc26b){const _0x179756=_0x1bf3c8,_0x504f22=new Date();!lasttime?console['log'](getTimeStamp()+_0x179756(0x290),_0x9dc26b,_0x504f22):console['log'](getTimeStamp()+_0x179756(0x290),_0x9dc26b,(_0x504f22-lasttime)/0x3e8),lasttime=_0x504f22;}