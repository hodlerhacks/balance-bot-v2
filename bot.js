const _0x183ff5=_0x4e8e;(function(_0x4e0b1f,_0x439e5a){const _0x28ebd3=_0x4e8e,_0x29c422=_0x4e0b1f();while(!![]){try{const _0x2461d7=-parseInt(_0x28ebd3(0x2bf))/0x1*(-parseInt(_0x28ebd3(0x2db))/0x2)+-parseInt(_0x28ebd3(0x2fd))/0x3*(-parseInt(_0x28ebd3(0x24a))/0x4)+-parseInt(_0x28ebd3(0x295))/0x5*(-parseInt(_0x28ebd3(0x2b5))/0x6)+-parseInt(_0x28ebd3(0x268))/0x7+parseInt(_0x28ebd3(0x31a))/0x8+parseInt(_0x28ebd3(0x1a8))/0x9*(-parseInt(_0x28ebd3(0x305))/0xa)+-parseInt(_0x28ebd3(0x209))/0xb;if(_0x2461d7===_0x439e5a)break;else _0x29c422['push'](_0x29c422['shift']());}catch(_0x5e9b1b){_0x29c422['push'](_0x29c422['shift']());}}}(_0x430f,0xee9d0));const _0x3c07f1=function(){let _0x3572dc=!![];return function(_0x32061b,_0xe5528b){const _0x5840d9=_0x3572dc?function(){const _0x5e77b3=_0x4e8e;if(_0xe5528b){const _0x121daa=_0xe5528b[_0x5e77b3(0x1e3)](_0x32061b,arguments);return _0xe5528b=null,_0x121daa;}}:function(){};return _0x3572dc=![],_0x5840d9;};}(),_0x511ad0=_0x3c07f1(this,function(){const _0x25ea9f=_0x4e8e;return _0x511ad0[_0x25ea9f(0x25c)]()[_0x25ea9f(0x2e4)](_0x25ea9f(0x1fd))['toString']()['constructor'](_0x511ad0)[_0x25ea9f(0x2e4)]('(((.+)+)+)+$');});_0x511ad0();'use strict';const ccxt=require(_0x183ff5(0x285)),low=require('lowdb'),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require(_0x183ff5(0x321)),forge=require('node-forge'),util=require(_0x183ff5(0x1ed)),argv=require(_0x183ff5(0x244))(process['argv'][_0x183ff5(0x310)](0x2))[_0x183ff5(0x2eb)],path=require(_0x183ff5(0x2e5)),axios=require('axios');let exchange,gTicker={},gChange={};const usdBasecoins=['USD',_0x183ff5(0x2e0),_0x183ff5(0x2b1),_0x183ff5(0x2e2),_0x183ff5(0x19b),'USDP'],excludedExchanges=[_0x183ff5(0x21a)],debugging=argv['d']||![];let pnlGenerationNeeded=argv['r']||![],config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x183ff5(0x320)]({'LOCKED':0x0,'UNLOCKING':0x1,'UNLOCKED':0x2});let lockOrders=ORDERS[_0x183ff5(0x292)],validateOrdersState,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotIntervalShort=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg='\x20>\x20pausing\x20bot\x20for\x20'+pauseBotInterval/0xea60+_0x183ff5(0x181),maxPauseRetries=0x6,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,watchTransactionsInterval=0x3c*0x3e8,schedulerInterval=0x3c*0x3c*0x3e8,retryInterval=0x3e8,maxRetries=0x5,logPageSize=0x14,defaultFee=0.003;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidOrdersInitialTimeout,pidOrdersTimeout,botPaused=![],transactionDetectionOngoing=![],lastCoinsToBalance='',exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x5dc,balanceUpdateRetries=0x5;let enableFiatToggle;const serverversion=require('./version.json')[_0x183ff5(0x2e8)],environment=require(_0x183ff5(0x225))[_0x183ff5(0x1e9)]||'production',botID=process[_0x183ff5(0x2eb)][0x2]||'001',pattern=/^[0-9]{3}$/;!pattern[_0x183ff5(0x1d3)](botID)&&(console['log'](_0x183ff5(0x1c5)+botID+_0x183ff5(0x1b1)),killBot());const userID=process[_0x183ff5(0x2eb)][0x3]||'',configpath=userID?_0x183ff5(0x22f)+userID+'/':_0x183ff5(0x22f),logspath=userID?_0x183ff5(0x337)+userID+'/':_0x183ff5(0x337),loggerfile=fs[_0x183ff5(0x32e)](logspath+_0x183ff5(0x243),{'flags':'a'});!fs[_0x183ff5(0x1cc)](configpath)&&fs[_0x183ff5(0x195)](configpath);!fs[_0x183ff5(0x1cc)](logspath)&&fs[_0x183ff5(0x195)](logspath);const configfile=configpath+_0x183ff5(0x178)+botID+_0x183ff5(0x2f4),logfile=configpath+_0x183ff5(0x178)+botID+_0x183ff5(0x27c),performancefile=configpath+_0x183ff5(0x178)+botID+'-performance.json',coinresultsfile=configpath+_0x183ff5(0x178)+botID+'-results.json',settingsfile=configpath+_0x183ff5(0x228),securefile=configpath+_0x183ff5(0x1b4),configbackuppath=configpath+_0x183ff5(0x315),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x183ff5(0x323)]({'logs':[],'version':serverversion})[_0x183ff5(0x2fa)]();function _0x4e8e(_0x1af211,_0x4a1c5f){const _0x1b5d39=_0x430f();return _0x4e8e=function(_0x511ad0,_0x3c07f1){_0x511ad0=_0x511ad0-0x168;let _0x430fc4=_0x1b5d39[_0x511ad0];return _0x430fc4;},_0x4e8e(_0x1af211,_0x4a1c5f);}const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x183ff5(0x323)]({'data':[],'version':serverversion})['write']();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x183ff5(0x323)]({'bot':[],'version':serverversion})[_0x183ff5(0x2fa)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x183ff5(0x323)]({'coins':{},'version':serverversion})[_0x183ff5(0x2fa)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0,settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0xc0462c=>{const _0x43f839=_0x183ff5;console[_0x43f839(0x296)](_0xc0462c);},'simple':_0x209396=>{const _0x18d8ff=_0x183ff5;console['log'](_0x209396),loggerfile[_0x18d8ff(0x2fa)](util[_0x18d8ff(0x2cc)](_0x209396)+'\x0a');},'full':async(_0xfc63b1,_0x1efd2c='')=>{const _0x3cc55d=_0x183ff5;let _0x49d904;if(config[_0x3cc55d(0x2a1)])_0x49d904=getTimeStamp()+':\x20'+config[_0x3cc55d(0x23d)]+_0x3cc55d(0x22e)+_0xfc63b1;else _0x49d904=getTimeStamp()+_0x3cc55d(0x297)+botID+'\x20>\x20'+_0xfc63b1;console['log'](_0x49d904),loggerfile[_0x3cc55d(0x2fa)](util[_0x3cc55d(0x2cc)](_0x49d904)+'\x0a'),_0x1efd2c&&(console[_0x3cc55d(0x296)](_0x1efd2c),loggerfile[_0x3cc55d(0x2fa)](util[_0x3cc55d(0x2cc)](_0x1efd2c)+'\x0a'));},'debug':async(_0x4a9b9d,_0x2bdf66='')=>{const _0x3a35e0=_0x183ff5;let _0x1a06d3;if(config['showname'])_0x1a06d3=getTimeStamp()+':\x20'+config['botname']+_0x3a35e0(0x2f2)+_0x4a9b9d;else _0x1a06d3=getTimeStamp()+_0x3a35e0(0x297)+botID+_0x3a35e0(0x2f2)+_0x4a9b9d;if(debugging)console['log'](_0x1a06d3);loggerfile[_0x3a35e0(0x2fa)](util[_0x3a35e0(0x2cc)](_0x1a06d3)+'\x0a');if(_0x2bdf66){if(debugging)console[_0x3a35e0(0x296)](_0x2bdf66);loggerfile['write'](util[_0x3a35e0(0x2cc)](_0x2bdf66)+'\x0a');}}};process['on'](_0x183ff5(0x2f6),function(_0x3d84f5){const _0x5896ac=_0x183ff5;handleError(_0x3d84f5[_0x5896ac(0x1ef)],_0x5896ac(0x2f6));});settings[_0x183ff5(0x1dd)]!=config[_0x183ff5(0x1dd)]&&updateTimeshift(settings[_0x183ff5(0x1dd)]);settings[_0x183ff5(0x1af)]!=config[_0x183ff5(0x1af)]&&updateOnepagemode(settings[_0x183ff5(0x1af)]);function _0x430f(){const _0x5e8677=['\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','map','ccxt','1\x20-\x20partially\x20FILLED\x20(','symbol','Market','add','unlinkSync','price','page','buy','***','Cooldown\x20ended\x20-\x20balancing\x20resumed','push','sort','UNLOCKED','2.6.22','canceled','8915560vQVfqz','log',':\x20Bot\x20','running','isEqual','emitHistory','remove','min','limit-high','balances','cost','date','showname','ask','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','round',')\x20known\x20order:\x20','\x20uses\x20','/USD','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','Cryptocom','fee','must\x20be\x20greater\x20than\x20minimum\x20amount','\x20(see:\x20hodlerhacks.com/fix/1)','Test\x20new\x20API','Reset\x20|\x20','eur','net','TUSD','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','trade','\x20API\x20key,\x20secret\x20or\x20password\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','6FWiNQS','2.6.0','pid','delta','event','Exception\x20thrown\x20in\x20','Order\x20filled','API-key\x20format\x20invalid','watchTradesForSymbols','%)\x0a','48099BEbwJA','event-history','\x20-\x20bot\x20already\x20running\x20in\x20manual\x20mode','\x20metrics:</b>\x20\x0a\x0a','\x20>\x20details:','InvalidOrder','USD','************','1\x20-\x20Handle\x20open\x20orders','loading-canceled','basecoinvalue','marketcapEnabled','Order\x20filled:\x20','format','AuthenticationError','filter','startdate','\x20-\x20bot\x20switched\x20to\x20manual\x20mode','ID:\x20','toLowerCase','Invalid\x20API\x20details,\x20please\x20try\x20again\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','includes','target','breakeven','-------------------------------\x0a','emojisell','coin-loading-progress','Bot\x20','2wgKJvB','No\x20more\x20open\x20orders\x20-\x20','orderId','changes','recreate','BUSD','Huobi','USDT','BTC','search','path','success','pro','version','emojibuy','apiPassword','argv','\x0aSymbol(s):\x20','marketcap','2\x20-\x20handling\x20FILLED\x20order:\x20','apiKey','0\x20-\x20EXECUTION:\x20','loadMarkets','\x20>\x20[DEBUG]\x20','configuration-stored','-config.json','limit','uncaughtException','coin','Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute','InsufficientFunds','write','LOCKED','percentage','60096BICNoq','getMinutes','debug','<b>','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','sqrt','colorscheme','assign','241100SWQGdN','indexOf','Error\x20details:\x20','getHours','removed','getSeconds','quote','balancing\x20resumes\x20when\x20cooldown\x20ends','red_yellow_blue','no\x20open\x20orders','progress','slice','\x20|\x20','market_cap','Resetting\x20bot\x20history','staging','/backup/','Bitget','side','\x20|\x20Custom\x20ID:\x20','starting-balance-','4594304BYDiMH','toFixed','full','abs','request-time','Limit\x20(high-margin)','freeze','date-fns','forEach','defaults','process\x20','\x20orders\x20in\x20less\x20than\x20','.json','cooldown','-results.json','startnumber','excluded','market','average','PermissionDenied','createWriteStream','type','getPortfolio',')\x20unknown\x20order:\x20','1\x20-\x20Validate\x20orders:\x20','fromCodePoint','timestamp-issue','findIndex','2\x20-\x20Validate\x20orders:\x20','./logs/','kill','\x20portfolio:</b>\x20\x0a\x0a','Fee\x20discount\x20refund\x20detected:\x20','message','pki','ordertype',':\x20timer\x20>','\x20hour','detectLiquidityChange()','watchOrders()','shift','Error\x20in\x20testNewAPI():\x20','settings','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','get','prevnumber','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','\x20has\x20a\x2024h\x20drop\x20of\x20','starting-balances','spot','configstate','split','Value\x20','bot-','getMonth','Error\x20while\x20deleting\x20files:\x20','offset','UNLOCKING','yyyy/MM/dd','createOrder','final','Insufficient\x20funds\x20to\x20execute\x20order:\x20','\x20minutes','storeFiat','value','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','none','RETRY\x20-\x20Error\x20in\x20','distribution','watchTrades','decrypt','memoryUsage','complete','active','getDate','cloneDeep','</pre>','coins','join','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)','1\x20-\x20FILLED\x20unknown\x20order:\x20','error','mkdirSync','reverse','sortBy','time','<pre>','threshold','USDC','Avoiding\x20continuous\x20order\x20attempts','Placing\x20order\x20for:\x20','sendPortfolioTelegram','RequestTimeout','order','has','Valid\x20balance\x20for\x20','Invalid\x20quantity','headless','toUpperCase','fetchTickers','netoffset','108vJGTBy','\x20not\x20available\x20(see:\x20hodlerhacks.com/fix/5)','liquidity','ETH','fetchBalance','portfolio','apiSecret','onepagemode','fetchTicker',',\x20must\x20be\x20a\x203\x20digit\x20number','Order\x20is\x20invalid:\x20','password','bb-secure.json','storeConfiguration','substring','\x20minutes\x20-\x20','loadSymbols()','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','Block\x20transaction\x20detection:\x20','change','bid','Generated\x20PnL\x20data','fetchBalance()','testAPI()','watchTrades()','pop','\x20rejected\x20your\x20API\x20request\x20(see:\x20hodlerhacks.com/fix/4)','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','max','Error:\x20Invalid\x20argument\x20','Pausing\x20for\x20','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','warning','<b>Bot\x20','realizedPnL','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','existsSync','2.3.5','\x20attempts','exchange','portfolio2','Invalid\x20symbol:\x20','balancing\x20resumed','test','%\x20(','openOrders','parse','\x20exchange','ExchangeError','cancelOrders()','net-basecoin','Cex','ongoing','timeshift','closed','EUR','RSA-OAEP','RETRY\x20-\x20Problem\x20resolved\x20after\x20','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','apply','limit-low','Portfolio\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','usd','change24h','api-issue','environment','recovery','getTime','PAXG','util','Set\x20lock\x20orders\x20to:\x20','stack','restart','/EUR','code','privateKey','floor','amountToPrecision',')\x20|\x20exchange:\x20','net-fiat','startprice','Failed\x20to\x20load\x20market\x20data\x20-\x20bot\x20not\x20started','enabled','\x20network\x20error:\x20','Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)','(((.+)+)+)+$','open','function','PnL\x20','valid','Invalid\x20balance\x20for\x20','performance','Network\x20error\x20details:','token\x20is\x20expired','secure','status','currency','1699544VUQeBW','Limit\x20(low-margin)','total','marketcapApi','sell','\x20API\x20key\x20is\x20invalid','\x20exchange\x20error:\x20','\x20-\x20bot\x20not\x20started','Exchange\x20permission\x20denied\x20-\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','toggleBotMode','timestamp','pnl','botID','2\x20-\x20Handled\x20open\x20orders','Resetting\x20coin\x20results:\x20','exchange\x20reload','/USDT','bitmex','Initializing\x20coin\x20results','initTickers()','number','\x20closed\x20the\x20connection\x20(see:\x20hodlerhacks.com/fix/5)','Initializing\x20exchange','initial','Generating\x20PnL\x20data','sandbox','update-liquidity','exchanges','./version.json','set','Net\x20','bb-settings.json','RateLimitExceeded','storeHeadless','timeout','getFullYear','customId','\x20>\x20','./config/','\x20>\x20stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','\x20|\x20lock\x20orders:\x20','orderstatus','heapUsed','length','configuration','deleteHistoryAlerts','replace','Bybit','Headless:\x20','remainingSymbols','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','botname','entries','cancelOrder','fiat','amount','last','/output-000.log','yargs/yargs','sha256','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','added','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','Trigger:\x20','160VJROYp','limits','privateKeyFromPem','slider','Error\x20in\x20loadSymbols():\x20','Market\x20order','autoliquidity','bot','\x20not\x20responding\x20(see:\x20hodlerhacks.com/fix/5)','splice','Executed\x20','cancel','data','filled','DDoSProtection','basecoin','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','portfolio1','toString','2.7.1','pnl-basecoin','bots','sells','Unknown\x20error\x20-\x20check\x20logs','recent20','no\x20exchange\x20reloaded','padStart','Loading\x20completed','stringify','Manual\x20balancing\x20required','12499165seRIHF','Order(s)\x20not\x20validated\x20after\x20','getStartingBalances','create','args','find','Portfolio\x20change\x20detected:\x20','watchOrders','-performance.json','Unknown\x20error:\x20','marketcapsqrt','\x20|\x20highest\x20fee:\x20','Error\x20details:','keys','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','ExchangeNotAvailable','logs','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20trying\x20again\x20in\x20','1\x20-\x20FILLED\x20known\x20order:\x20','setSandboxMode','-events.json','switch-manual','buys','resetHistory','highest','fetchOpenOrders','send'];_0x430f=function(){return _0x5e8677;};return _0x430f();}(settings[_0x183ff5(0x20c)]&&!config[_0x183ff5(0x20c)]||!settings['marketcapApi']&&config[_0x183ff5(0x20c)])&&updateMarketcapApi(settings['marketcapApi']);process[_0x183ff5(0x282)]({'started':_0x183ff5(0x298)},_0x531dff=>{}),initializeProcessListeners();function proxyEmit(_0x5774fe,_0x422851=null){const _0x203af9=_0x183ff5;process[_0x203af9(0x282)]({'function':_0x5774fe,'args':_0x422851},_0x48fd9e=>{});}function initializeProcessListeners(){const _0x4f7d2a=_0x183ff5;process['on'](_0x4f7d2a(0x33b),_0x15fc64=>{const _0x2f5a61=_0x4f7d2a;switch(Object[_0x2f5a61(0x275)](_0x15fc64)[0x0]){case'timeshift':_0x15fc64[_0x2f5a61(0x1dd)]!=undefined&&(settings[_0x2f5a61(0x1dd)]=_0x15fc64['timeshift'],updateTimeshift(settings[_0x2f5a61(0x1dd)]));break;case _0x2f5a61(0x1af):_0x15fc64[_0x2f5a61(0x1af)]!=undefined&&(settings[_0x2f5a61(0x1af)]=_0x15fc64[_0x2f5a61(0x1af)],updateOnepagemode(settings[_0x2f5a61(0x1af)]));break;case _0x2f5a61(0x20c):_0x15fc64['marketcapApi']!=undefined&&(settings['marketcapApi']=_0x15fc64['marketcapApi'],updateMarketcapApi(settings[_0x2f5a61(0x20c)]));break;case'bots':_0x15fc64['bots']!=undefined&&(bots=JSON[_0x2f5a61(0x1d6)](_0x15fc64[_0x2f5a61(0x25f)]),proxyEmit(_0x2f5a61(0x25f),bots));break;case _0x2f5a61(0x1ff):switch(_0x15fc64[_0x2f5a61(0x1ff)]){case'initclient':initclient();break;case _0x2f5a61(0x212):toggleBotMode();break;case _0x2f5a61(0x29a):emitHistory(_0x15fc64[_0x2f5a61(0x26c)]);break;case _0x2f5a61(0x236):deleteHistoryAlerts(_0x15fc64[_0x2f5a61(0x26c)]);break;case _0x2f5a61(0x330):getPortfolio(_0x15fc64[_0x2f5a61(0x26c)]);break;case _0x2f5a61(0x1b5):storeConfiguration(_0x15fc64[_0x2f5a61(0x26c)]);break;case _0x2f5a61(0x22a):storeHeadless(_0x15fc64[_0x2f5a61(0x26c)]);break;case _0x2f5a61(0x182):storeFiat(_0x15fc64['args']);break;case _0x2f5a61(0x27f):resetHistory();break;case _0x2f5a61(0x26a):getStartingBalances(getNormalizedPerformance());break;case'placeOrder':placeOrder(_0x15fc64[_0x2f5a61(0x26c)]);break;case'cancelLoading':cancelLoading();break;case'showConfig':showConfig();break;case'sendMetricsTelegram':sendMetricsTelegram();break;case _0x2f5a61(0x19e):sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x2d5dc4=![]){const _0x333ec5=_0x183ff5;logger[_0x333ec5(0x2ff)](_0x333ec5(0x2ae)+(_0x2d5dc4?_0x333ec5(0x218):_0x333ec5(0x263))+'\x20|\x20exchange:\x20'+config['exchange']);if(pidBalances)clearTimeout(pidBalances);if(!_0x2d5dc4)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x333ec5(0x2ef)]!=''&&config[_0x333ec5(0x2ef)]!=_0x333ec5(0x28e)){loadingProgress=0x0;if(_0x2d5dc4){await initExchange();const _0x38edce=await testAPI();if(!_0x38edce)return;await loadSymbols(),loadingProgress=0x1,setStableCoins(),proxyEmit(_0x333ec5(0x235),emittedConfiguration()),initialPerformanceStored=![];}const _0xb6403=await getCoins();[currentCoins,currentCoinsAll]=_0xb6403,setBlockTransactionDetection(![]),startScheduler(),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x333ec5(0x2ff)](_0x333ec5(0x265)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x333ec5(0x234)]==0x0&&allOpenOrders[_0x333ec5(0x234)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(pnlGenerationNeeded)await generatePnL();}}async function resumeBot(_0x1dfdcf=![]){const _0x5ce278=_0x183ff5;logger[_0x5ce278(0x2ff)]('Resuming\x20('+(_0x1dfdcf?'quick':_0x5ce278(0x18b))+_0x5ce278(0x1f6)+config[_0x5ce278(0x1cf)]);if(pidBalances)clearTimeout(pidBalances);if(_0x1dfdcf){getBalances();return;}coinsLoaded=![];if(config[_0x5ce278(0x2ef)]!=''&&config['apiKey']!=_0x5ce278(0x28e)){loadingProgress=0x1;const _0x12429d=await getCoins();[currentCoins,currentCoinsAll]=_0x12429d,setBlockTransactionDetection(![]),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x5ce278(0x2ff)](_0x5ce278(0x265)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x5ce278(0x234)]==0x0&&allOpenOrders['length']!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();}}async function getMarketCap(_0x15c1df){const _0x6fed3e=_0x183ff5;let _0x101208=![];if(_0x15c1df)_0x101208=!![];let _0x41416f;_0x101208?_0x41416f=_0x15c1df['map'](_0x4303e0=>_0x4303e0['coin']):_0x41416f=currentCoinsAll[_0x6fed3e(0x284)](_0x34f6a7=>_0x34f6a7[_0x6fed3e(0x2f7)]);if(!config[_0x6fed3e(0x20c)]||!_0x101208&&!config[_0x6fed3e(0x2ca)]||_0x41416f[_0x6fed3e(0x234)]==0x0)return;let _0x5209ad=null;try{_0x5209ad=await axios['get'](_0x6fed3e(0x2b2),{'headers':{'X-CMC_PRO_API_KEY':settings['marketcapApi']},'params':{'symbol':_0x41416f[_0x6fed3e(0x25c)]()}});}catch(_0x2a6838){_0x5209ad=null,_0x2a6838[_0x6fed3e(0x25c)]()[_0x6fed3e(0x2d4)]('status\x20code\x20401')?(config[_0x6fed3e(0x20c)]=![],updateConfig(),proxyEmit('configuration',emittedConfiguration()),logHistory('error',_0x6fed3e(0x170))):(logHistory('error',_0x6fed3e(0x279)+schedulerInterval/(0x3c*0x3e8)+_0x6fed3e(0x181)),logger['debug'](_0x6fed3e(0x274),_0x2a6838[_0x6fed3e(0x25c)]()+'\x20-\x20'+_0x2a6838[_0x6fed3e(0x1f2)]));}if(_0x5209ad){let _0x26f21b=0x0;const _0x343ea7=_0x5209ad['data'];_0x41416f[_0x6fed3e(0x322)](_0x25e4d4=>{const _0x333f06=_0x6fed3e;if(_0x343ea7[_0x333f06(0x256)][_0x25e4d4][0x0])_0x26f21b+=_0x343ea7[_0x333f06(0x256)][_0x25e4d4][0x0][_0x333f06(0x30b)][_0x333f06(0x2c5)]['market_cap'];}),_0x41416f[_0x6fed3e(0x322)](_0x2a2075=>{const _0x177701=_0x6fed3e,_0x145b92=_0x343ea7['data'][_0x2a2075][0x0]?_0x343ea7[_0x177701(0x256)][_0x2a2075][0x0][_0x177701(0x30b)]['USD'][_0x177701(0x312)]:0x0;if(_0x101208){const _0x1c5206=_0x15c1df[_0x177701(0x26d)](_0xfe54a=>_0xfe54a[_0x177701(0x2f7)]==_0x2a2075);_0x1c5206&&(_0x1c5206[_0x177701(0x2ed)]=_0x145b92);}else{const _0x4bc4d1=currentCoins[_0x177701(0x26d)](_0x4c0822=>_0x4c0822[_0x177701(0x2f7)]==_0x2a2075);_0x4bc4d1&&(_0x4bc4d1[_0x177701(0x2ed)]=_0x145b92);const _0x127bf9=currentCoinsAll[_0x177701(0x26d)](_0x2e14cf=>_0x2e14cf[_0x177701(0x2f7)]==_0x2a2075);_0x127bf9&&(_0x127bf9[_0x177701(0x2ed)]=_0x145b92);}}),!_0x101208&&updateTargetDistribution();}}function updateTargetDistribution(){const _0x587050=_0x183ff5,_0x37c8e5=0x2;let _0x5bda57=0x0,_0x32f6d4=0x0,_0x49e83f=0x0,_0x570865=0x0,_0x23863b=0x0;config[_0x587050(0x1ad)][_0x587050(0x322)](_0x3192eb=>{const _0x13b48b=_0x587050;if(!_0x3192eb[_0x13b48b(0x32a)]){_0x49e83f++,_0x5bda57+=_0x3192eb[_0x13b48b(0x24d)];if(_0x3192eb['slider']===-0x1){_0x5bda57++;const _0x1dd549=currentCoinsAll[_0x13b48b(0x26d)](_0x30e5f5=>_0x30e5f5[_0x13b48b(0x2f7)]==_0x3192eb[_0x13b48b(0x2f7)]);_0x1dd549&&(_0x570865+=_0x1dd549[_0x13b48b(0x2ed)],_0x23863b+=Math[_0x13b48b(0x302)](_0x1dd549[_0x13b48b(0x2ed)]));}if(_0x3192eb[_0x13b48b(0x24d)]!==-0x1)_0x32f6d4++;}});let _0x335ab7;const _0x21183a=0x64-_0x5bda57,_0x3e8e9e=_0x49e83f-_0x32f6d4;_0x335ab7=_0x3e8e9e===0x0?_0x5bda57:Math[_0x587050(0x1c4)](0x64,_0x5bda57),config[_0x587050(0x1ad)][_0x587050(0x322)](_0x5d56fb=>{const _0x2cd88d=_0x587050,_0x232be=currentCoinsAll['find'](_0x129f1f=>_0x129f1f[_0x2cd88d(0x2f7)]==_0x5d56fb['coin']);_0x232be&&(_0x5d56fb[_0x2cd88d(0x2ed)]=_0x232be[_0x2cd88d(0x2ed)]);if(!_0x5d56fb['excluded']){if(_0x335ab7<=0x64){if(_0x5d56fb[_0x2cd88d(0x24d)]===-0x1){if(_0x570865!==0x0&&config[_0x2cd88d(0x2ca)]){if(_0x232be){if(config[_0x2cd88d(0x2ca)]==_0x2cd88d(0x2ed))_0x5d56fb[_0x2cd88d(0x187)]=(_0x21183a/(_0x570865/_0x232be['marketcap']))[_0x2cd88d(0x31b)](_0x37c8e5);else config[_0x2cd88d(0x2ca)]==_0x2cd88d(0x272)&&(_0x5d56fb[_0x2cd88d(0x187)]=(_0x21183a/(_0x23863b/Math[_0x2cd88d(0x302)](_0x232be[_0x2cd88d(0x2ed)])))[_0x2cd88d(0x31b)](_0x37c8e5));}}}}}}),updateConfig();}function updateConfig(){const _0x1c1061=_0x183ff5;let _0x3d11cd=dbConfig[_0x1c1061(0x16e)](_0x1c1061(0x251))[_0x1c1061(0x26d)]({'botID':botID})['value']();_0x3d11cd&&dbConfig[_0x1c1061(0x16e)](_0x1c1061(0x251))[_0x1c1061(0x26d)]({'botID':botID})[_0x1c1061(0x304)](config)[_0x1c1061(0x2fa)]();}function logMemory(){const _0x19b3d1=_0x183ff5;if(environment!=_0x19b3d1(0x314))return;const _0x5bb42e=process[_0x19b3d1(0x18a)]()[_0x19b3d1(0x233)]/0x400/0x400;logger[_0x19b3d1(0x2ff)](_0x19b3d1(0x324)+process[_0x19b3d1(0x2b7)]+_0x19b3d1(0x2a6)+formatResult(_0x5bb42e,0x1)+'\x20MB');}async function startScheduler(){const _0x3f919d=_0x183ff5,_0x15dffc=shiftedTime()[_0x3f919d(0x308)]();getMarketCap(),loadSymbols(),_0x15dffc==0x1&&logMemory(),await sleep(schedulerInterval),startScheduler();}async function restartBot(_0x7b69db=![]){const _0x4b5ec3=_0x183ff5;logger['debug']('Initiating\x20bot\x20restart');if(!_0x7b69db)while(lockOrders!=ORDERS[_0x4b5ec3(0x292)]||coolingDown){await sleep(0x3e8);}process['send']({'stop':_0x4b5ec3(0x1f0)},_0x363327=>{});}async function initExchange(_0x55975d=config[_0x183ff5(0x1cf)],_0x5b8384=config[_0x183ff5(0x2ef)],_0x3bc78d=config[_0x183ff5(0x1ae)],_0x53782e=config[_0x183ff5(0x2ea)],_0x3bdafe=config['sandbox']){const _0x7a1515=_0x183ff5;if(exchange){logger[_0x7a1515(0x2ff)]('Initializing\x20exchange:\x20already\x20done');return;}logger['debug'](_0x7a1515(0x21f));!supportedExchanges()[_0x7a1515(0x2d4)](_0x55975d)&&(logHistory(_0x7a1515(0x194),'Balance\x20Bot\x20does\x20not\x20support\x20the\x20'+_0x55975d+_0x7a1515(0x1d7)),killBot());const _0x41169f=ccxt[_0x7a1515(0x2e7)][_0x55975d[_0x7a1515(0x2d2)]()];exchange=new _0x41169f({'apiKey':_0x5b8384,'secret':_0x3bc78d,'options':{'defaultType':_0x7a1515(0x174)}});if(_0x53782e)exchange['password']=_0x53782e;if(exchange[_0x7a1515(0x1a1)][_0x7a1515(0x222)])exchange[_0x7a1515(0x27b)](_0x3bdafe);}function updateExchange(_0x5bfebe,_0x1604de,_0x54c188=null){const _0x2a237c=_0x183ff5;exchange[_0x2a237c(0x2ef)]=_0x5bfebe,exchange['secret']=_0x1604de,exchange[_0x2a237c(0x1b3)]=_0x54c188,logger['debug']('Updating\x20API\x20key\x20(not\x20saved\x20in\x20config\x20file\x20yet)');}function setStableCoins(){const _0x59bdd4=_0x183ff5;let _0x2f431c=config[_0x59bdd4(0x259)]=='ETH'?_0x59bdd4(0x1ab):config[_0x59bdd4(0x259)]==_0x59bdd4(0x1ec)?_0x59bdd4(0x1ec):_0x59bdd4(0x2e3),_0xc280c2=allSymbols['includes'](_0x2f431c+_0x59bdd4(0x2a7))?_0x59bdd4(0x2c5):allSymbols[_0x59bdd4(0x2d4)](_0x2f431c+_0x59bdd4(0x219))?_0x59bdd4(0x2e2):_0x59bdd4(0x1df),_0x37dbc3=allSymbols[_0x59bdd4(0x2d4)](_0x2f431c+_0x59bdd4(0x1f1))?_0x59bdd4(0x1df):_0xc280c2;enableFiatToggle=!![],_0xc280c2==_0x59bdd4(0x1df)&&(enableFiatToggle=![],storeFiat(_0x59bdd4(0x1df))),_0x37dbc3!=_0x59bdd4(0x1df)&&(enableFiatToggle=![],storeFiat(_0x59bdd4(0x2c5))),stablecoins={'eur':{'coin':''+_0x2f431c+_0x37dbc3,'symbol':_0x2f431c+'/'+_0x37dbc3},'usd':{'coin':''+_0x2f431c+_0xc280c2,'symbol':_0x2f431c+'/'+_0xc280c2}};}async function initwsCcxt(){const _0x4c9692=_0x183ff5;initCycle++;const _0x2d025f=initCycle;let _0x5f488b=[];config[_0x4c9692(0x1ad)][_0x4c9692(0x322)](_0x4f16cc=>{const _0x589e17=_0x4c9692;if(!_0x4f16cc['excluded']&&_0x4f16cc['coin']!=config[_0x589e17(0x259)])_0x5f488b[_0x589e17(0x290)](_0x4f16cc['symbol']);});if(!_0x5f488b[_0x4c9692(0x2d4)](stablecoins[_0x4c9692(0x2af)][_0x4c9692(0x287)]))_0x5f488b['push'](stablecoins[_0x4c9692(0x2af)]['symbol']);if(!_0x5f488b[_0x4c9692(0x2d4)](stablecoins[_0x4c9692(0x1e6)]['symbol']))_0x5f488b['push'](stablecoins[_0x4c9692(0x1e6)][_0x4c9692(0x287)]);loadCoins(_0x5f488b),_0x5f488b=validateSymbols(_0x5f488b);const _0x44bf81=async _0x1a543b=>{const _0x580359=_0x4c9692;let _0x377e2b;try{const _0x1a05b4=await getTickers(_0x1a543b);Object[_0x580359(0x23e)](_0x1a05b4)[_0x580359(0x322)](_0x13a2fe=>{const _0x399541=_0x580359;_0x377e2b=_0x13a2fe[0x1][_0x399541(0x287)],gTicker[noslash(_0x377e2b)]=_0x13a2fe[0x1]['last'],gChange[_0x377e2b]=_0x13a2fe[0x1][_0x399541(0x2fc)];});}catch(_0x32ff5a){await handleError(_0x32ff5a,_0x580359(0x21c),_0x377e2b);}},_0x40737b=async _0x4a556c=>{const _0x1401c3=_0x4c9692;while(initCycle==_0x2d025f){if(!botPaused)try{const _0x45f7c4=await exchange['watchTrades'](_0x4a556c);gTicker[noslash(_0x45f7c4[0x0]['symbol'])]=_0x45f7c4[0x0][_0x1401c3(0x28b)];}catch(_0x2e7a2b){if(!exchangeStopped)await handleError(_0x2e7a2b,_0x1401c3(0x1c0),_0x4a556c);}else await sleep(0x64);}},_0x24363f=async _0x57d125=>{const _0xe951ef=_0x4c9692;while(initCycle==_0x2d025f){if(!botPaused)try{const _0x5ad7fd=await exchange['watchTradesForSymbols'](_0x57d125),_0x5850e3=_0x5ad7fd[_0xe951ef(0x1c1)]();gTicker[noslash(_0x5850e3[_0xe951ef(0x287)])]=_0x5850e3[_0xe951ef(0x28b)];}catch(_0x55f6f0){if(!exchangeStopped)await handleError(_0x55f6f0,'watchTradesForSymbols()',_0x57d125[_0xe951ef(0x25c)]());}else await sleep(0x64);}},_0x49d715=async _0x484bd8=>{const _0x29aca5=_0x4c9692;while(initCycle==_0x2d025f){if(!botPaused){let _0x1727a7;try{await sleep(0x3c*0x3e8);const _0x3f54ca=await getTickers(_0x484bd8);Object['entries'](_0x3f54ca)[_0x29aca5(0x322)](_0x33958c=>{const _0x38afd3=_0x29aca5;_0x1727a7=_0x33958c[0x1][_0x38afd3(0x287)],gChange[_0x1727a7]=_0x33958c[0x1][_0x38afd3(0x2fc)];});}catch(_0x3b6ebe){if(!exchangeStopped)await handleError(_0x3b6ebe,'fetchTickers()',_0x1727a7);}}else await sleep(0x64);}},_0x1eedbc=async _0x4dc419=>{const _0x30f57d=_0x4c9692;while(initCycle==_0x2d025f){if(!botPaused)try{const _0x1a90a7=await exchange[_0x30f57d(0x26f)](_0x4dc419);initCycle==_0x2d025f&&_0x1a90a7['forEach'](_0x293327=>{updateNumberCoinsCcxt(_0x293327);});}catch(_0x301584){if(!exchangeStopped)await handleError(_0x301584,_0x30f57d(0x169));}else await sleep(0x64);}};_0x44bf81(_0x5f488b),_0x49d715(_0x5f488b),exchange['has'][_0x4c9692(0x2bd)]&&!(config[_0x4c9692(0x1cf)]==_0x4c9692(0x238)&&_0x5f488b[_0x4c9692(0x234)]>0xa)?_0x24363f(_0x5f488b):_0x5f488b[_0x4c9692(0x322)](_0x45f26f=>{_0x40737b(_0x45f26f);}),_0x5f488b['forEach'](_0x28ec3f=>{_0x1eedbc(_0x28ec3f);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x1ebe30){const _0x5b45d1=_0x183ff5;let _0x1e4306={};try{if(config['exchange']!=_0x5b45d1(0x2a9))_0x1e4306=await exchange[_0x5b45d1(0x1a6)](_0x1ebe30);else for(const _0x481f86 of _0x1ebe30){const _0x45dd2e=await exchange[_0x5b45d1(0x1b0)](_0x481f86);_0x1e4306[_0x481f86]=_0x45dd2e;}return _0x1e4306;}catch(_0x423ec7){throw _0x423ec7;}}function setBlockTransactionDetection(_0x4d47ae){const _0x13e79e=_0x183ff5;blockTransactionDetection=_0x4d47ae,logger[_0x13e79e(0x2ff)](_0x13e79e(0x1ba)+blockTransactionDetection);}async function detectLiquidityChange(_0x39f5af=0x0){const _0x81b9da=_0x183ff5;transactionDetectionOngoing=!![];try{const _0x258ec9=await getCoins(_0x39f5af),[_0x21fd9f,_0x19aa0a]=_0x258ec9;let _0x3e3cf0=[];currentCoins[_0x81b9da(0x322)](_0x31312b=>{const _0x581d98=_0x81b9da,_0x588597=_0x21fd9f['find'](_0x260ef6=>_0x260ef6['coin']==_0x31312b[_0x581d98(0x2f7)]);if(_0x588597){if(_0x31312b[_0x581d98(0x21d)]!=_0x588597['number']){let _0x4c4559;if(_0x31312b['coin']!=config[_0x581d98(0x259)]){const _0x376f38=gTicker[noslash(_0x31312b[_0x581d98(0x287)])];_0x4c4559=_0x31312b['reverse']?0x1/_0x376f38:_0x376f38;}else _0x4c4559=0x1;_0x3e3cf0[_0x581d98(0x290)]({'coin':_0x31312b['coin'],'symbol':_0x31312b['symbol'],'price':_0x4c4559,'number':Number(formatResult(_0x588597[_0x581d98(0x21d)]-_0x31312b[_0x581d98(0x21d)],0x8)),'basecoinvalue':_0x4c4559*(_0x588597[_0x581d98(0x21d)]-_0x31312b[_0x581d98(0x21d)])});}}});if(_0x3e3cf0[_0x81b9da(0x234)]>0x0&&!blockTransactionDetection){for(const _0x5c9fc6 of _0x3e3cf0){if(config['autoliquidity']){logger[_0x81b9da(0x2ff)](_0x81b9da(0x16d)+_0x5c9fc6[_0x81b9da(0x2c9)]+_0x81b9da(0x273)+lastFees[_0x81b9da(0x280)]);if(lastFees[_0x81b9da(0x280)]==0x0||Math['abs'](_0x5c9fc6[_0x81b9da(0x2c9)])>lastFees['highest']*0x3){if(config[_0x81b9da(0x250)]==_0x81b9da(0x223)){delete _0x5c9fc6[_0x81b9da(0x287)],delete _0x5c9fc6[_0x81b9da(0x2c9)];let _0x11617c=[],_0x456c02=[...config[_0x81b9da(0x1aa)]]||[],_0xe1d6d4=config[_0x81b9da(0x1aa)];_0x456c02[_0x81b9da(0x291)]((_0x1b2b8d,_0x3b15d8)=>_0x1b2b8d['date']>_0x3b15d8[_0x81b9da(0x2a0)]?-0x1:_0x3b15d8[_0x81b9da(0x2a0)]>_0x1b2b8d['date']?0x1:0x0);const _0x9aa945=getDate();if(_0x456c02[0x0]){const _0x5a9478=fns[_0x81b9da(0x1d6)](_0x456c02[0x0][_0x81b9da(0x2a0)],_0x81b9da(0x17d),new Date()),_0xe7a0ad=fns['parse'](_0x9aa945,_0x81b9da(0x17d),new Date());if(fns[_0x81b9da(0x299)](_0x5a9478,_0xe7a0ad)){_0x11617c=_0x456c02[0x0]['changes'];const _0x3cd4b8=_0x11617c['find'](_0x61f12b=>_0x61f12b[_0x81b9da(0x2f7)]==_0x5c9fc6[_0x81b9da(0x2f7)]);_0x3cd4b8?(_0x3cd4b8[_0x81b9da(0x21d)]+=_0x5c9fc6[_0x81b9da(0x21d)],_0x3cd4b8['number']==0x0&&(_0x11617c=_0x11617c[_0x81b9da(0x2ce)](_0x3610ad=>{const _0x579445=_0x81b9da;return _0x3610ad[_0x579445(0x2f7)]!=_0x5c9fc6[_0x579445(0x2f7)];}))):_0x11617c[_0x81b9da(0x290)](_0x5c9fc6);const _0x565db9=_0xe1d6d4['find'](_0x4e4ff8=>_0x4e4ff8['date']==_0x9aa945);_0x565db9[_0x81b9da(0x2de)]=_0x11617c;}else _0xe1d6d4['push']({'date':_0x9aa945,'changes':[_0x5c9fc6]});}const _0x3b6e8a=_0xe1d6d4['find'](_0x4412c9=>_0x4412c9[_0x81b9da(0x2a0)]==_0x9aa945);if(_0x3b6e8a){let _0x4b28fc=!![];_0x3b6e8a['changes'][_0x81b9da(0x322)](_0x289ae4=>{const _0x5fb0aa=_0x81b9da;if(_0x289ae4[_0x5fb0aa(0x21d)]!=0x0)_0x4b28fc=![];}),_0x4b28fc&&(_0xe1d6d4=_0xe1d6d4[_0x81b9da(0x2ce)](_0x490aeb=>{const _0x1b44f0=_0x81b9da;return _0x490aeb[_0x1b44f0(0x2a0)]!=_0x9aa945;}));}let _0x48df8=dbConfig[_0x81b9da(0x16e)](_0x81b9da(0x251))['find']({'botID':botID})['value']();_0x48df8&&(dbConfig[_0x81b9da(0x16e)](_0x81b9da(0x251))[_0x81b9da(0x26d)]({'botID':botID})[_0x81b9da(0x304)]({'liquidity':_0xe1d6d4})[_0x81b9da(0x2fa)](),config[_0x81b9da(0x1aa)]=_0xe1d6d4);logHistory('success',_0x81b9da(0x26e)+Math[_0x81b9da(0x31d)](_0x5c9fc6[_0x81b9da(0x21d)])+'\x20'+_0x5c9fc6[_0x81b9da(0x2f7)]+'\x20'+(_0x5c9fc6[_0x81b9da(0x21d)]>0x0?_0x81b9da(0x247):_0x81b9da(0x309))+'\x20-\x20liquidity\x20settings\x20updated\x20accordingly'),proxyEmit(_0x81b9da(0x235),emittedConfiguration());const _0x3bddc4=getNormalizedPerformance();emitPerformance(_0x3bddc4),getStartingBalances(_0x3bddc4),logger[_0x81b9da(0x2ff)](_0x81b9da(0x1e5));}else config[_0x81b9da(0x250)]==_0x81b9da(0x27d)&&(config[_0x81b9da(0x1a4)]?(await storeHeadless({'headless':![]}),logHistory(_0x81b9da(0x2e6),'Portfolio\x20change\x20detected:\x20'+Math[_0x81b9da(0x31d)](_0x5c9fc6['number'])+'\x20'+_0x5c9fc6[_0x81b9da(0x2f7)]+'\x20'+(_0x5c9fc6[_0x81b9da(0x21d)]>0x0?'added':_0x81b9da(0x309))+_0x81b9da(0x2d0))):logger[_0x81b9da(0x2ff)](_0x81b9da(0x26e)+Math['abs'](_0x5c9fc6[_0x81b9da(0x21d)])+'\x20'+_0x5c9fc6['coin']+'\x20'+(_0x5c9fc6['number']>0x0?'added':'removed')+_0x81b9da(0x2c1)));}else logger[_0x81b9da(0x2ff)](_0x81b9da(0x33a)+Math[_0x81b9da(0x31d)](_0x5c9fc6['number'])+'\x20'+_0x5c9fc6[_0x81b9da(0x2f7)]+'\x20'+(_0x5c9fc6[_0x81b9da(0x21d)]>0x0?'added':_0x81b9da(0x309)));}else logger[_0x81b9da(0x2ff)](_0x81b9da(0x26e)+Math[_0x81b9da(0x31d)](_0x5c9fc6[_0x81b9da(0x21d)])+'\x20'+_0x5c9fc6[_0x81b9da(0x2f7)]+'\x20'+(_0x5c9fc6[_0x81b9da(0x21d)]>0x0?_0x81b9da(0x247):_0x81b9da(0x309))+_0x81b9da(0x1c7));}currentCoins=_0x21fd9f,currentCoinsAll=_0x19aa0a;}}catch(_0x584a6c){if(!exchangeStopped)await handleError(_0x584a6c,_0x81b9da(0x168));}transactionDetectionOngoing=![];}async function watchTransactions(){await sleep(0x14*0x3e8);while(!![]){!botPaused&&!blockTransactionDetection&&coinsLoaded?(detectLiquidityChange(),await sleep(watchTransactionsInterval)):await sleep(0x3e8);}}async function loadSymbols(){const _0x13941e=_0x183ff5;try{markets=await exchange[_0x13941e(0x2f1)](!![]),allSymbols=[],Object[_0x13941e(0x23e)](markets)[_0x13941e(0x322)](_0x2d74f6=>{const _0x52ba58=_0x13941e;_0x2d74f6[0x1][_0x52ba58(0x18c)]&&_0x2d74f6[0x1][_0x52ba58(0x174)]&&allSymbols[_0x52ba58(0x290)](_0x2d74f6[0x0]);});}catch(_0xb53834){markets?logger['debug'](_0x13941e(0x24e)+_0xb53834[_0x13941e(0x25c)]()):(loading[_0x13941e(0x255)]=!![],_0xb53834[_0x13941e(0x25c)]()['toLowerCase']()[_0x13941e(0x2d4)]('timestamp')||_0xb53834[_0x13941e(0x25c)]()[_0x13941e(0x2d2)]()[_0x13941e(0x2d4)](_0x13941e(0x31e))?(logHistory('error',_0x13941e(0x1fc)),loading[_0x13941e(0x194)]=_0x13941e(0x334)):handleErrorNoStop(_0xb53834,_0x13941e(0x1b8),!![]),logHistory(_0x13941e(0x194),_0x13941e(0x1f9)),logHistory(_0x13941e(0x194),_0x13941e(0x1c6)+loadCoinsRetryInterval/0xea60+_0x13941e(0x23b)),logger['debug'](_0x13941e(0x274),_0xb53834),emitLoadingProgress(),botPaused=!![],await sleep(loadCoinsRetryInterval),restartBot());}}function validateSymbols(_0x1cea54){const _0x1a1952=_0x183ff5;let _0x174f28=[];return _0x1cea54[_0x1a1952(0x322)](_0x1aa93c=>{const _0x3f670f=_0x1a1952;!allSymbols[_0x3f670f(0x2d4)](_0x1aa93c)?logHistory(_0x3f670f(0x194),_0x3f670f(0x1d1)+_0x1aa93c+_0x3f670f(0x25a)):_0x174f28['push'](_0x1aa93c);}),_0x174f28;}async function initclient(){const _0x3c4656=_0x183ff5;proxyEmit(_0x3c4656(0x235),emittedConfiguration()),proxyEmit(_0x3c4656(0x224),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x3c4656(0x29e),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x35979e=getNormalizedPerformance();emitPerformance(_0x35979e),getStartingBalances(_0x35979e);}async function toggleBotMode(){const _0x12ee93=_0x183ff5;let _0x48dc2b=dbConfig[_0x12ee93(0x16e)](_0x12ee93(0x251))[_0x12ee93(0x26d)]({'botID':botID})[_0x12ee93(0x183)]();if(_0x48dc2b){const _0x55310c=!_0x48dc2b[_0x12ee93(0x1a4)];dbConfig[_0x12ee93(0x16e)]('bot')[_0x12ee93(0x26d)]({'botID':botID})[_0x12ee93(0x304)]({'headless':_0x55310c})['write'](),config[_0x12ee93(0x1a4)]=_0x55310c,proxyEmit(_0x12ee93(0x235),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x1e0f26=_0x183ff5;process[_0x1e0f26(0x282)]({'updatebotmanager':!![]},_0x22c797=>{}),logger[_0x1e0f26(0x2ff)](_0x1e0f26(0x239)+config[_0x1e0f26(0x1a4)]);}async function loadCoins(_0x3b909a){const _0x56642e=_0x183ff5;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x1cc4e7,_0x395b30=0x0,_0x5aebf7=0x0;_0x3b909a['forEach'](_0x1a0d6c=>{loading['remainingSymbols']['push'](_0x1a0d6c);}),loadingCanceled=![];let _0x3bfeec=![];while(_0x1cc4e7!=_0x3b909a[_0x56642e(0x234)]+maxLoadingProgress){_0x1cc4e7=loadingProgress,_0x3b909a[_0x56642e(0x322)](_0x12a9a4=>{const _0xb16cc3=_0x56642e;if(gTicker[noslash(_0x12a9a4)]){loading[_0xb16cc3(0x23a)]=loading[_0xb16cc3(0x23a)][_0xb16cc3(0x2ce)](_0x24cd20=>_0x24cd20!=_0x12a9a4);if(!watchedSymbols['includes'](_0x12a9a4))watchedSymbols['push'](_0x12a9a4);_0x1cc4e7++;}}),loading['progress']=Math[_0x56642e(0x2a4)](_0x1cc4e7/(_0x3b909a[_0x56642e(0x234)]+maxLoadingProgress)*0x64);loading[_0x56642e(0x30f)]!=0x64&&(_0x5aebf7>0x1e*0x5&&(loading[_0x56642e(0x22b)]=!![],emitLoadingProgress()),_0x5aebf7>0x78*0x5&&!_0x3bfeec&&(_0x3bfeec=!![],logHistory(_0x56642e(0x194),'Failed\x20to\x20load\x20coin\x20data\x20for\x20'+loading['remainingSymbols'][_0x56642e(0x191)](',\x20')+_0x56642e(0x210)),logHistory(_0x56642e(0x194),'Pausing\x20for\x20'+loadCoinsRetryInterval/0xea60+_0x56642e(0x23b)),loadingCanceled=!![],await sleep(loadCoinsRetryInterval),restartBot()));if(loadingCanceled){loading[_0x56642e(0x255)]=!![],emitLoadingProgress();break;}else _0x395b30!=loading[_0x56642e(0x30f)]&&(_0x395b30=loading[_0x56642e(0x30f)],emitLoadingProgress()),_0x5aebf7++,await sleep(0xc8);}_0x1cc4e7==_0x3b909a[_0x56642e(0x234)]+maxLoadingProgress&&(coinsLoaded=!![],process['send']({'status':_0x56642e(0x1fa),'live':_0x56642e(0x298)},_0x4ed953=>{}),_0x3bfeec&&logHistory(_0x56642e(0x2e6),_0x56642e(0x301)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x33b7d0=_0x183ff5;proxyEmit(_0x33b7d0(0x235),{...emittedConfiguration(),'configstate':_0x33b7d0(0x2c8)});}function emitLoadingProgress(){const _0x160f7e=_0x183ff5;proxyEmit(_0x160f7e(0x2d9),loading);}async function getFiat(){const _0x3f39d8=_0x183ff5;let _0x29d069=gTicker[stablecoins[_0x3f39d8(0x2af)][_0x3f39d8(0x2f7)]],_0x233551=gTicker[stablecoins[_0x3f39d8(0x1e6)]['coin']];return{'eur':Number(_0x29d069),'usd':Number(_0x233551)};}function capitalize(_0x4c8df0){const _0x1eb912=_0x183ff5;return _0x4c8df0[_0x1eb912(0x1b6)](0x0,0x1)[_0x1eb912(0x1a5)]()+_0x4c8df0['substring'](0x1);}function supportedExchanges(){const _0x181311=_0x183ff5,_0x34c7a4=['ws',_0x181311(0x1a6),_0x181311(0x1b0),_0x181311(0x188),_0x181311(0x26f),_0x181311(0x23f),_0x181311(0x17e),_0x181311(0x281),_0x181311(0x1ac)];let _0x443178=[],_0x15730e=[],_0x28c92c=ccxt[_0x181311(0x2e7)][_0x181311(0x224)];_0x28c92c[_0x181311(0x322)](_0x660980=>{const _0x3474b9=_0x181311;try{const _0x3a9b0e=new ccxt[(_0x3474b9(0x2e7))][_0x660980]();_0x15730e[_0x3474b9(0x290)](_0x3a9b0e);}catch(_0x256632){}}),_0x15730e['forEach'](_0x180ea9=>{const _0x58c2fa=_0x181311;let _0x30022c=0x0;_0x34c7a4[_0x58c2fa(0x322)](_0x1ca028=>{const _0x42a898=_0x58c2fa;_0x1ca028 in _0x180ea9[_0x42a898(0x1a1)]&&_0x180ea9[_0x42a898(0x1a1)][_0x1ca028]&&_0x30022c++;}),_0x30022c==_0x34c7a4['length']&&(!excludedExchanges[_0x58c2fa(0x2d4)](_0x180ea9['id'])&&_0x443178[_0x58c2fa(0x290)](capitalize(_0x180ea9['id'])));});let _0x1cb4b2=[];return _0x28c92c[_0x181311(0x322)](_0x3d774a=>{const _0xef7da0=_0x181311;_0x3d774a=capitalize(_0x3d774a);if(!_0x443178[_0xef7da0(0x2d4)](_0x3d774a))_0x1cb4b2['push'](_0x3d774a);}),_0x443178;}function setStartDatePerformance(){const _0x288125=_0x183ff5;if(config&&config[_0x288125(0x1aa)][0x0][_0x288125(0x2de)][_0x288125(0x234)]!=0x0){const _0x1b393a=config[_0x288125(0x1aa)][0x0][_0x288125(0x2de)];dbPerformance[_0x288125(0x16e)](_0x288125(0x256))[_0x288125(0x26d)]({'date':config[_0x288125(0x2cf)]})[_0x288125(0x304)]({'coins':_0x1b393a})[_0x288125(0x2fa)]();}}function calculatePnL(_0x5cf710,_0x467ac7,_0x18fa16,_0x2ad211,_0x55ef9b,_0x4b1d81){const _0x2634c3=_0x183ff5;!_0x5cf710[_0x2634c3(0x2d4)]('/'+config[_0x2634c3(0x259)])&&(_0x18fa16=_0x18fa16==_0x2634c3(0x28d)?_0x2634c3(0x20d):_0x2634c3(0x28d));!_0x4b1d81[_0x467ac7]&&(_0x4b1d81[_0x467ac7]={'number':0x0,'sells':0x0,'buys':0x0,'breakeven':0x0,'realizedPnL':0x0});let _0x281a76=0x0,_0x3e1961,_0x249a27;if(_0x18fa16=='buy')_0x249a27=_0x4b1d81[_0x467ac7][_0x2634c3(0x21d)]*_0x4b1d81[_0x467ac7][_0x2634c3(0x2d6)]+_0x55ef9b*_0x2ad211,_0x4b1d81[_0x467ac7][_0x2634c3(0x21d)]+=_0x2ad211,_0x4b1d81[_0x467ac7][_0x2634c3(0x2d6)]=_0x4b1d81[_0x467ac7][_0x2634c3(0x21d)]!=0x0?_0x249a27/_0x4b1d81[_0x467ac7][_0x2634c3(0x21d)]:0x0,_0x4b1d81[_0x467ac7][_0x2634c3(0x27e)]++;else _0x18fa16==_0x2634c3(0x20d)&&(_0x3e1961=Math[_0x2634c3(0x29c)](_0x4b1d81[_0x467ac7][_0x2634c3(0x21d)],_0x2ad211),_0x281a76=(_0x55ef9b-_0x4b1d81[_0x467ac7]['breakeven'])*_0x3e1961,_0x249a27=Math['max'](_0x4b1d81[_0x467ac7][_0x2634c3(0x21d)]*_0x4b1d81[_0x467ac7][_0x2634c3(0x2d6)]-_0x3e1961*_0x4b1d81[_0x467ac7][_0x2634c3(0x2d6)],0x0),_0x4b1d81[_0x467ac7][_0x2634c3(0x21d)]-=_0x3e1961,_0x4b1d81[_0x467ac7][_0x2634c3(0x2d6)]=_0x4b1d81[_0x467ac7][_0x2634c3(0x21d)]!=0x0?_0x249a27/_0x4b1d81[_0x467ac7][_0x2634c3(0x21d)]:0x0,_0x4b1d81[_0x467ac7][_0x2634c3(0x1ca)]+=_0x281a76,_0x4b1d81[_0x467ac7][_0x2634c3(0x260)]++);return _0x281a76;}async function generatePnL(){const _0x1eedc0=_0x183ff5;pnlGenerationNeeded=![],logger[_0x1eedc0(0x2ff)](_0x1eedc0(0x221));const _0x33b83f=dbLogs[_0x1eedc0(0x16e)](_0x1eedc0(0x278))[_0x1eedc0(0x183)]();let _0x393a12={},_0x206056=0x0,_0x440561=0x0,_0x25974e=config[_0x1eedc0(0x2cf)];const _0x49e592=fns['parse'](_0x25974e,'yyyy/MM/dd',new Date()),_0x342931=new Date();let _0x42aa5a=0x0;for(let _0x22dda9=_0x49e592;!fns['isBefore'](_0x342931,_0x22dda9);_0x22dda9=fns['addDays'](_0x22dda9,0x1)){const _0x49d274=fns[_0x1eedc0(0x2cc)](_0x22dda9,_0x1eedc0(0x17d));while(_0x206056<_0x33b83f[_0x1eedc0(0x234)]){const _0x25c83d=new Date(_0x33b83f[_0x206056]['time']);if(fns['isBefore'](_0x25c83d,_0x22dda9))_0x206056++;else{if(_0x33b83f[_0x206056][_0x1eedc0(0x198)][_0x1eedc0(0x2d4)](_0x49d274)){const _0x505041=_0x33b83f[_0x206056];if(_0x505041[_0x1eedc0(0x32f)]===_0x1eedc0(0x1a0)&&(_0x505041[_0x1eedc0(0x2b9)][_0x1eedc0(0x2d4)](_0x1eedc0(0x2bb))||_0x505041[_0x1eedc0(0x2b9)][_0x1eedc0(0x2d4)](_0x1eedc0(0x24f)))){const _0x1fa837=_0x505041[_0x1eedc0(0x2b9)]['match'](/([A-Z]+\/[A-Z]+) (sell|buy) #([\d.]+) @([\d.]+)/);if(_0x1fa837){const [,_0xf10d79,_0x3b2626,_0x1ac5e2,_0x1c2b32]=_0x1fa837,_0x1685ea=_0xf10d79[_0x1eedc0(0x2d4)]('/'+config[_0x1eedc0(0x259)])?_0xf10d79['split']('/')[0x0]:_0xf10d79[_0x1eedc0(0x176)]('/')[0x1],_0x5c778e=calculatePnL(_0xf10d79,_0x1685ea,_0x3b2626,parseFloat(_0x1ac5e2),parseFloat(_0x1c2b32),_0x393a12);_0x440561+=_0x5c778e;}}_0x206056++;}else break;}}dbPerformance[_0x1eedc0(0x16e)](_0x1eedc0(0x256))[_0x1eedc0(0x26d)]({'date':_0x49d274})[_0x1eedc0(0x304)]({'pnl':_0x440561})['write']();}dbCoinResults[_0x1eedc0(0x226)](_0x1eedc0(0x190),_0x393a12)[_0x1eedc0(0x2fa)](),logger[_0x1eedc0(0x2ff)](_0x1eedc0(0x1bd));const _0xa7107c=getNormalizedPerformance();emitPerformance(_0xa7107c);}async function updatePnL(_0x2e519a){const _0x390132=_0x183ff5,{symbol:_0x371a8b,coin:_0x1fb575,amount:_0x2361ed,price:_0x238ef7,side:_0x4106ae,reverse:_0x5cb72c}=_0x2e519a;let _0x296be7=dbCoinResults[_0x390132(0x16e)](_0x390132(0x190))['value']();const _0x7307ee=calculatePnL(_0x371a8b,_0x1fb575,_0x4106ae,_0x2361ed,_0x238ef7,_0x296be7);dbCoinResults[_0x390132(0x226)](_0x390132(0x190),_0x296be7)[_0x390132(0x2fa)]();const _0x9de841=getTimeStamp()[_0x390132(0x176)]('\x20')[0x0];let _0x425cd2=dbPerformance['get'](_0x390132(0x256))[_0x390132(0x26d)]({'date':_0x9de841})[_0x390132(0x183)]();_0x425cd2?(_0x425cd2['pnl']+=_0x7307ee,dbPerformance[_0x390132(0x16e)](_0x390132(0x256))['find']({'date':_0x9de841})['assign'](_0x425cd2)[_0x390132(0x2fa)]()):await storePerformance();const _0x531418=getNormalizedPerformance();emitPerformance(_0x531418);}async function validate24hChanges(){const _0x285af5=_0x183ff5;for(const _0x418f31 of currentCoins){if(_0x418f31[_0x285af5(0x2f7)]!=config[_0x285af5(0x259)]){let _0x305611;_0x418f31[_0x285af5(0x196)]?_0x305611=formatResult((0x1/(gChange[_0x418f31[_0x285af5(0x287)]]/0x64+0x1)-0x1)*0x64,0x3):_0x305611=gChange[_0x418f31[_0x285af5(0x287)]],_0x305611<config['change24h']&&(logHistory(_0x285af5(0x194),_0x418f31[_0x285af5(0x2f7)]+_0x285af5(0x172)+_0x305611+'%'),logHistory(_0x285af5(0x194),_0x285af5(0x23c)),logHistory(_0x285af5(0x194),'Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again'),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x2b29be,_0x271aa4){const _0x54156c=_0x183ff5;if(!_0x2b29be)return!![];const _0x5c55e3=_0x271aa4[_0x54156c(0x176)]('.'),_0x2336d8=_0x2b29be[_0x54156c(0x176)]('.');for(var _0x98d2de=0x0;_0x98d2de<_0x2336d8[_0x54156c(0x234)];_0x98d2de++){const _0x4d24fe=~~_0x2336d8[_0x98d2de],_0x227f97=~~_0x5c55e3[_0x98d2de];if(_0x4d24fe<_0x227f97)return!![];if(_0x4d24fe>_0x227f97)return![];}return![];}async function oneTimeMigration(){const _0xbc9b18=_0x183ff5;let _0x5ef043=dbLogs[_0xbc9b18(0x16e)](_0xbc9b18(0x2e8))['value']();if(isOlderVersion(_0x5ef043,_0xbc9b18(0x1cd))){let _0x741c5d=[];const _0x4b18c8=dbLogs['get'](_0xbc9b18(0x278))[_0xbc9b18(0x183)]();_0x4b18c8['forEach'](_0x494132=>{const _0x5779cb=_0xbc9b18;_0x741c5d[_0x5779cb(0x290)]({'time':_0x494132[_0x5779cb(0x198)],'type':_0x494132[_0x5779cb(0x32f)],'event':_0x494132[_0x5779cb(0x2b9)]});}),dbLogs['get'](_0xbc9b18(0x278))['assign'](_0x741c5d)[_0xbc9b18(0x2fa)]();}let _0xe35b95=dbConfig[_0xbc9b18(0x16e)](_0xbc9b18(0x2e8))[_0xbc9b18(0x183)]();if(isOlderVersion(_0xe35b95,_0xbc9b18(0x1cd))){let _0x2d3d91=dbConfig[_0xbc9b18(0x16e)](_0xbc9b18(0x251))[_0xbc9b18(0x26d)]({'botID':botID})[_0xbc9b18(0x183)]();if(_0x2d3d91){let _0x117af8=[];_0x2d3d91[_0xbc9b18(0x1ad)]['forEach'](_0x55cf4c=>{const _0x50cb3d=_0xbc9b18;_0x117af8[_0x50cb3d(0x290)]({'coin':_0x55cf4c[_0x50cb3d(0x2f7)],'number':_0x55cf4c[_0x50cb3d(0x329)],'price':_0x55cf4c[_0x50cb3d(0x1f8)]}),delete _0x55cf4c['startnumber'],delete _0x55cf4c['startprice'];});if(_0x117af8[_0xbc9b18(0x234)]!==0x0)fs['writeFile'](configbackuppath+(_0xbc9b18(0x319)+botID+_0xbc9b18(0x326)),JSON['stringify'](_0x117af8,null,0x4),function(_0xf03d15){if(_0xf03d15){}});const _0xb329c2=(_0x3240d1,_0x8df701)=>{const _0x4597b1=_0xbc9b18;let _0x4d6eaa=[];_0x8df701[_0x4597b1(0x322)](_0x10f2eb=>{const _0x2659ef=_0x4597b1,_0x4c4139=_0x3240d1['find'](_0xe91f1e=>_0xe91f1e['coin']==_0x10f2eb['coin']);if(!_0x4c4139)_0x4d6eaa[_0x2659ef(0x290)](_0x10f2eb);});let _0x14188e=[];return _0x3240d1[_0x4597b1(0x322)](_0x292674=>{const _0x29fb16=_0x4597b1,_0x1d4332=_0x8df701[_0x29fb16(0x26d)](_0x26aa72=>_0x26aa72[_0x29fb16(0x2f7)]==_0x292674[_0x29fb16(0x2f7)]);if(!_0x1d4332||_0x1d4332[_0x29fb16(0x21d)]==0x0&&_0x292674['number']!=0x0)_0x14188e[_0x29fb16(0x290)](_0x292674);}),{'missingDay1':_0x4d6eaa,'notInDay2':_0x14188e};},_0x13d8c8=dbPerformance[_0xbc9b18(0x16e)]('data')['cloneDeep']()['value']();if(_0x13d8c8['length']>0x1){const {missingDay1:_0x30cda9,notInDay2:_0x1a868f}=_0xb329c2(_0x117af8,_0x13d8c8[0x1]['coins']);_0x117af8=[..._0x117af8,..._0x30cda9],_0x1a868f[_0xbc9b18(0x322)](_0xc3f955=>{const _0x14bf60=_0xbc9b18;let _0x26ef40=_0x117af8[_0x14bf60(0x335)](_0x23bd0d=>_0x23bd0d[_0x14bf60(0x2f7)]==_0xc3f955[_0x14bf60(0x2f7)]);_0x26ef40!=-0x1&&_0x117af8['splice'](_0x26ef40,0x1);});}_0x117af8['sort']((_0x35bba3,_0x3a9602)=>_0x35bba3[_0xbc9b18(0x2f7)]>_0x3a9602['coin']?0x1:_0x3a9602[_0xbc9b18(0x2f7)]>_0x35bba3[_0xbc9b18(0x2f7)]?-0x1:0x0);let _0x25772b=[{'date':_0x2d3d91[_0xbc9b18(0x2cf)],'changes':_0x117af8}];_0x13d8c8[_0xbc9b18(0x234)]>0x2&&_0x13d8c8[_0xbc9b18(0x322)]((_0x286b65,_0x314953)=>{const _0x5e5af2=_0xbc9b18;if(_0x314953>0x0&&_0x314953<_0x13d8c8['length']-0x1){const {missingDay1:_0x4a506a,notInDay2:_0x4e38ef}=_0xb329c2(_0x13d8c8[_0x314953][_0x5e5af2(0x190)],_0x13d8c8[_0x314953+0x1][_0x5e5af2(0x190)]);_0x117af8=[],(_0x4a506a[_0x5e5af2(0x234)]!=0x0||_0x4e38ef['length']!=0x0)&&(_0x4a506a[_0x5e5af2(0x234)]!=0x0&&_0x117af8['push'](..._0x4a506a),_0x4e38ef['length']!=0x0&&(_0x4e38ef['forEach'](_0x1a424d=>{const _0x33b6e0=_0x5e5af2;_0x1a424d[_0x33b6e0(0x21d)]=-_0x1a424d[_0x33b6e0(0x21d)];}),_0x117af8['push'](..._0x4e38ef)),_0x117af8['sort']((_0x248d59,_0xf4bef9)=>_0x248d59[_0x5e5af2(0x2f7)]>_0xf4bef9['coin']?0x1:_0xf4bef9[_0x5e5af2(0x2f7)]>_0x248d59[_0x5e5af2(0x2f7)]?-0x1:0x0),_0x25772b[_0x5e5af2(0x290)]({'date':_0x13d8c8[_0x314953+0x1]['date'],'changes':_0x117af8}));}}),dbConfig['get']('bot')[_0xbc9b18(0x26d)]({'botID':botID})[_0xbc9b18(0x304)]({..._0x2d3d91,'liquidity':_0x25772b})[_0xbc9b18(0x2fa)]();}}if(isOlderVersion(_0xe35b95,_0xbc9b18(0x2b6))){let _0x369629=dbConfig[_0xbc9b18(0x16e)](_0xbc9b18(0x251))[_0xbc9b18(0x26d)]({'botID':botID})['value']();if(_0x369629){const _0x4cc395=_0x369629[_0xbc9b18(0x1cf)],_0xf19b09=_0x4cc395?capitalize(_0x4cc395):'Binance';dbConfig[_0xbc9b18(0x16e)](_0xbc9b18(0x251))[_0xbc9b18(0x26d)]({'botID':botID})['assign']({'exchange':_0xf19b09})[_0xbc9b18(0x2fa)]();}}if(isOlderVersion(_0xe35b95,_0xbc9b18(0x293))){let _0x380fc4=dbConfig[_0xbc9b18(0x16e)](_0xbc9b18(0x251))[_0xbc9b18(0x26d)]({'botID':botID})[_0xbc9b18(0x183)]();if(_0x380fc4){const _0x521165=_0x380fc4['marketcapEnabled'],_0x23c188=_0x521165?_0xbc9b18(0x2ed):![];dbConfig['get']('bot')[_0xbc9b18(0x26d)]({'botID':botID})[_0xbc9b18(0x304)]({'marketcapEnabled':_0x23c188})[_0xbc9b18(0x2fa)]();}}if(isOlderVersion(_0xe35b95,'2.6.23')){let _0x1817ac=dbConfig['get'](_0xbc9b18(0x251))[_0xbc9b18(0x26d)]({'botID':botID})['value']();if(_0x1817ac){const _0x96b8ab=_0x1817ac[_0xbc9b18(0x250)],_0x424d0a=_0x96b8ab?_0xbc9b18(0x223):![];dbConfig['get']('bot')[_0xbc9b18(0x26d)]({'botID':botID})[_0xbc9b18(0x304)]({'autoliquidity':_0x424d0a})[_0xbc9b18(0x2fa)]();}}let _0x3beb78=dbPerformance[_0xbc9b18(0x16e)](_0xbc9b18(0x2e8))[_0xbc9b18(0x183)]();isOlderVersion(_0x3beb78,'2.3.5')&&setStartDatePerformance();let _0x332c7b=dbCoinResults[_0xbc9b18(0x16e)](_0xbc9b18(0x2e8))[_0xbc9b18(0x183)]();if(isOlderVersion(_0x332c7b,_0xbc9b18(0x25d))){let _0x28db4b=dbCoinResults[_0xbc9b18(0x16e)](_0xbc9b18(0x190))[_0xbc9b18(0x183)]();if(_0x28db4b[_0xbc9b18(0x234)]!=0x0)pnlGenerationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x47c506=_0x183ff5;dbConfig['set'](_0x47c506(0x2e8),serverversion)['write'](),dbPerformance['set'](_0x47c506(0x2e8),serverversion)[_0x47c506(0x2fa)](),dbLogs['set']('version',serverversion)[_0x47c506(0x2fa)](),dbCoinResults[_0x47c506(0x226)](_0x47c506(0x2e8),serverversion)['write']();}function getConfiguration(_0x5d1256){const _0x534e9d=_0x183ff5;let _0x146df5=dbConfig[_0x534e9d(0x16e)](_0x534e9d(0x251))[_0x534e9d(0x26d)]({'botID':_0x5d1256})[_0x534e9d(0x183)]();if(_0x146df5){let _0x3d2350=![];typeof _0x146df5['threshold']=='string'&&(_0x146df5={..._0x146df5,'threshold':Number(_0x146df5[_0x534e9d(0x19a)])},_0x3d2350=!![]),_0x146df5['change24h']==undefined&&(_0x146df5={..._0x146df5,'change24h':-0x14},_0x3d2350=!![]),_0x146df5[_0x534e9d(0x240)]==undefined&&(_0x146df5={..._0x146df5,'fiat':_0x534e9d(0x2c5)},_0x3d2350=!![]),_0x146df5[_0x534e9d(0x1af)]==undefined&&(_0x146df5={..._0x146df5,'onepagemode':settings[_0x534e9d(0x1af)]},_0x3d2350=!![]),_0x146df5[_0x534e9d(0x303)]==undefined&&(_0x146df5={..._0x146df5,'colorscheme':_0x534e9d(0x30d)},_0x3d2350=!![]),_0x146df5['autoliquidity']==undefined&&(_0x146df5={..._0x146df5,'autoliquidity':'update-liquidity'},_0x3d2350=!![]),_0x146df5[_0x534e9d(0x20c)]==undefined&&(_0x146df5={..._0x146df5,'marketcapApi':settings[_0x534e9d(0x20c)]?!![]:![]},_0x3d2350=!![]),_0x146df5[_0x534e9d(0x2ca)]==undefined&&(_0x146df5={..._0x146df5,'marketcapEnabled':![]},_0x3d2350=!![]),_0x146df5[_0x534e9d(0x222)]==undefined&&(_0x146df5={..._0x146df5,'sandbox':![]},_0x3d2350=!![]),_0x3d2350&&(_0x146df5={'botID':_0x146df5[_0x534e9d(0x215)],'exchange':_0x146df5[_0x534e9d(0x1cf)],'apiKey':_0x146df5[_0x534e9d(0x2ef)],'apiSecret':_0x146df5[_0x534e9d(0x1ae)],'apiPassword':_0x146df5['apiPassword'],'basecoin':_0x146df5[_0x534e9d(0x259)],'botname':_0x146df5[_0x534e9d(0x23d)],'showname':_0x146df5[_0x534e9d(0x2a1)],'threshold':_0x146df5['threshold'],'ordertype':_0x146df5[_0x534e9d(0x33d)],'timeout':_0x146df5[_0x534e9d(0x22b)],'fiat':_0x146df5[_0x534e9d(0x240)],'startdate':_0x146df5['startdate'],'recreate':_0x146df5[_0x534e9d(0x2df)],'timeshift':_0x146df5[_0x534e9d(0x1dd)],'onepagemode':_0x146df5[_0x534e9d(0x1af)],'headless':_0x146df5[_0x534e9d(0x1a4)],'cooldown':_0x146df5[_0x534e9d(0x327)],'change24h':_0x146df5[_0x534e9d(0x1e7)],'emojibuy':_0x146df5['emojibuy'],'emojisell':_0x146df5[_0x534e9d(0x2d8)],'colorscheme':_0x146df5['colorscheme'],'marketcapApi':_0x146df5['marketcapApi'],'marketcapEnabled':_0x146df5[_0x534e9d(0x2ca)],'sandbox':_0x146df5[_0x534e9d(0x222)],'portfolio':_0x146df5[_0x534e9d(0x1ad)],'autoliquidity':_0x146df5[_0x534e9d(0x250)],'liquidity':_0x146df5[_0x534e9d(0x1aa)],'openOrders':_0x146df5[_0x534e9d(0x1d5)]},dbConfig[_0x534e9d(0x16e)](_0x534e9d(0x251))[_0x534e9d(0x29b)]()[_0x534e9d(0x2fa)](),dbConfig[_0x534e9d(0x16e)]('bot')[_0x534e9d(0x290)](_0x146df5)[_0x534e9d(0x2fa)]());}else _0x146df5={'botID':_0x5d1256,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x534e9d(0x2da)+_0x5d1256,'showname':![],'threshold':0x3,'ordertype':_0x534e9d(0x32b),'timeout':0x14,'fiat':'USD','startdate':getDate(),'recreate':![],'timeshift':settings[_0x534e9d(0x1dd)],'onepagemode':settings[_0x534e9d(0x1af)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x534e9d(0x30d),'marketcapApi':settings[_0x534e9d(0x20c)]?!![]:![],'marketcapEnabled':![],'sandbox':![],'portfolio':[],'autoliquidity':_0x534e9d(0x223),'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x146df5;}function emittedConfiguration(){const _0x4ffc2e=_0x183ff5;let _0x2da045;if(config[_0x4ffc2e(0x2ef)]=='')_0x2da045={...config,'configstate':_0x4ffc2e(0x220)};else config[_0x4ffc2e(0x2ef)]==_0x4ffc2e(0x28e)?_0x2da045={...config,'configstate':_0x4ffc2e(0x1ea)}:(_0x2da045={...config,'apiKey':_0x4ffc2e(0x2c6),'apiSecret':_0x4ffc2e(0x2c6)},config[_0x4ffc2e(0x2ea)]&&(_0x2da045['apiPassword']=_0x4ffc2e(0x2c6)));return _0x2da045['enableFiatToggle']=enableFiatToggle,_0x2da045;}function getSettings(){const _0x52adef=_0x183ff5;return dbSettings[_0x52adef(0x16e)](_0x52adef(0x16c))[_0x52adef(0x183)]();}function getSecure(){const _0x426582=_0x183ff5;return dbSecure[_0x426582(0x16e)](_0x426582(0x206))[_0x426582(0x183)]()||{};}function updateTimeshift(_0x2e2b7a){const _0x45a626=_0x183ff5;let _0x8a29a5=dbConfig[_0x45a626(0x16e)](_0x45a626(0x251))[_0x45a626(0x26d)]({'botID':botID})[_0x45a626(0x183)]();_0x8a29a5&&dbConfig[_0x45a626(0x16e)](_0x45a626(0x251))['find']({'botID':botID})[_0x45a626(0x304)]({'timeshift':_0x2e2b7a})[_0x45a626(0x2fa)](),config[_0x45a626(0x1dd)]=_0x2e2b7a,proxyEmit(_0x45a626(0x235),emittedConfiguration());}function updateOnepagemode(_0x52f312){const _0x1edb58=_0x183ff5;let _0x21f26e=dbConfig['get']('bot')[_0x1edb58(0x26d)]({'botID':botID})['value']();_0x21f26e&&dbConfig['get']('bot')[_0x1edb58(0x26d)]({'botID':botID})[_0x1edb58(0x304)]({'onepagemode':_0x52f312})[_0x1edb58(0x2fa)](),config[_0x1edb58(0x1af)]=_0x52f312,proxyEmit('configuration',emittedConfiguration());}function updateMarketcapApi(_0x570472){const _0x56c97f=_0x183ff5,_0x3bfafc=_0x570472?!![]:![];let _0x185f0e=dbConfig[_0x56c97f(0x16e)]('bot')[_0x56c97f(0x26d)]({'botID':botID})[_0x56c97f(0x183)]();_0x185f0e&&dbConfig[_0x56c97f(0x16e)](_0x56c97f(0x251))['find']({'botID':botID})['assign']({'marketcapApi':_0x3bfafc})['write'](),config[_0x56c97f(0x20c)]=_0x3bfafc,getMarketCap(),proxyEmit('configuration',emittedConfiguration());}async function storeConfiguration(_0x3c2354){const _0x5c1f6b=_0x183ff5;logger[_0x5c1f6b(0x2ff)]('Saving\x20configuration');_0x3c2354['configstate']&&delete _0x3c2354[_0x5c1f6b(0x175)];if(pidBalances)clearTimeout(pidBalances);setBlockTransactionDetection(!![]);let _0x216b30=![],_0x218358=![],_0x484b14=[];_0x3c2354[_0x5c1f6b(0x1ad)][_0x5c1f6b(0x322)](_0x5ad92d=>{const _0x3ccf52=_0x5c1f6b;if(!_0x5ad92d['excluded']&&_0x5ad92d['coin']!=_0x3c2354['basecoin'])_0x484b14[_0x3ccf52(0x290)](_0x5ad92d[_0x3ccf52(0x287)]);}),_0x484b14[_0x5c1f6b(0x322)](_0x4eac62=>{const _0x5a312d=_0x5c1f6b,_0x14af94=currentCoins[_0x5a312d(0x26d)](_0x126528=>_0x126528[_0x5a312d(0x287)]==_0x4eac62);!_0x14af94&&(_0x216b30=!![]);}),currentCoins[_0x5c1f6b(0x322)](_0x5dc5f4=>{const _0x236e2d=_0x5c1f6b;if(_0x5dc5f4[_0x236e2d(0x2f7)]!=config[_0x236e2d(0x259)]){const _0x1a0033=_0x484b14[_0x236e2d(0x26d)](_0x125f5f=>_0x125f5f==_0x5dc5f4[_0x236e2d(0x287)]);!_0x1a0033&&(_0x216b30=!![]);}}),_0x3c2354[_0x5c1f6b(0x1ad)]['forEach'](_0x3887b4=>{const _0x10f9df=_0x5c1f6b,_0x34a20f=config[_0x10f9df(0x1ad)][_0x10f9df(0x26d)](_0x4c870f=>_0x4c870f[_0x10f9df(0x2f7)]==_0x3887b4['coin']);if(_0x34a20f&&_0x3887b4['offset']!=_0x34a20f[_0x10f9df(0x17b)])_0x218358=!![];});let _0x203066=dbConfig[_0x5c1f6b(0x16e)](_0x5c1f6b(0x251))[_0x5c1f6b(0x26d)]({'botID':botID})[_0x5c1f6b(0x183)]();_0x3c2354={..._0x3c2354,'apiKey':decryptRSA(secure['privateKey'],_0x3c2354['apiKey']),'apiSecret':decryptRSA(secure[_0x5c1f6b(0x1f3)],_0x3c2354[_0x5c1f6b(0x1ae)])};_0x3c2354[_0x5c1f6b(0x2ea)]&&(_0x3c2354[_0x5c1f6b(0x2ea)]=decryptRSA(secure[_0x5c1f6b(0x1f3)],_0x3c2354['apiPassword']));let _0x158d97=![];if(_0x203066){_0x3c2354['apiKey']==_0x5c1f6b(0x2c6)?_0x3c2354[_0x5c1f6b(0x2ef)]=config[_0x5c1f6b(0x2ef)]:_0x158d97=!![];_0x3c2354[_0x5c1f6b(0x1ae)]==_0x5c1f6b(0x2c6)?_0x3c2354[_0x5c1f6b(0x1ae)]=config[_0x5c1f6b(0x1ae)]:_0x158d97=!![];if(_0x3c2354[_0x5c1f6b(0x2ea)]=='************')_0x3c2354['apiPassword']=config[_0x5c1f6b(0x2ea)];else{if(_0x3c2354['apiPassword'])_0x158d97=!![];}dbConfig['get']('bot')[_0x5c1f6b(0x26d)]({'botID':botID})[_0x5c1f6b(0x304)](_0x3c2354)[_0x5c1f6b(0x2fa)]();}else dbConfig[_0x5c1f6b(0x16e)](_0x5c1f6b(0x251))[_0x5c1f6b(0x290)](_0x3c2354)[_0x5c1f6b(0x2fa)](),_0x158d97=!![],process[_0x5c1f6b(0x282)]({'status':_0x5c1f6b(0x1fa),'live':_0x5c1f6b(0x298)},_0x38a13a=>{});process[_0x5c1f6b(0x282)]({'botname':_0x3c2354[_0x5c1f6b(0x23d)]},_0x41b428=>{}),config={..._0x3c2354},updateBotManager(),proxyEmit(_0x5c1f6b(0x2f3)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x158d97)await reset(!![]);else _0x216b30||_0x218358?await reset(![]):getBalances();setBlockTransactionDetection(![]);}async function storeHeadless(_0x17e93e){const _0x31dd0c=_0x183ff5,_0x391dcb={...config,'headless':_0x17e93e[_0x31dd0c(0x1a4)]};let _0x193ccd=dbConfig[_0x31dd0c(0x16e)](_0x31dd0c(0x251))[_0x31dd0c(0x26d)]({'botID':botID})[_0x31dd0c(0x183)]();_0x193ccd&&dbConfig[_0x31dd0c(0x16e)]('bot')[_0x31dd0c(0x26d)]({'botID':botID})[_0x31dd0c(0x304)](_0x391dcb)[_0x31dd0c(0x2fa)](),config={..._0x391dcb},updateBotManager(),proxyEmit(_0x31dd0c(0x235),emittedConfiguration());}async function storeFiat(_0x1ada68){const _0x13d97f=_0x183ff5,_0x6802f0={...config,'fiat':_0x1ada68};let _0x1b2ebc=dbConfig[_0x13d97f(0x16e)](_0x13d97f(0x251))[_0x13d97f(0x26d)]({'botID':botID})[_0x13d97f(0x183)]();_0x1b2ebc&&dbConfig[_0x13d97f(0x16e)](_0x13d97f(0x251))[_0x13d97f(0x26d)]({'botID':botID})[_0x13d97f(0x304)](_0x6802f0)[_0x13d97f(0x2fa)](),config={..._0x6802f0},proxyEmit(_0x13d97f(0x235),emittedConfiguration());}function resetHistory(){const _0x38b73d=_0x183ff5;logger[_0x38b73d(0x31c)](_0x38b73d(0x313));try{if(fs[_0x38b73d(0x1cc)](path['join'](configpath,'bot-'+botID+'-events.json')))fs['unlinkSync'](path[_0x38b73d(0x191)](configpath,_0x38b73d(0x178)+botID+'-events.json'));if(fs[_0x38b73d(0x1cc)](path[_0x38b73d(0x191)](configpath,'bot-'+botID+_0x38b73d(0x270))))fs['unlinkSync'](path['join'](configpath,_0x38b73d(0x178)+botID+_0x38b73d(0x270)));if(fs[_0x38b73d(0x1cc)](path[_0x38b73d(0x191)](configpath,_0x38b73d(0x178)+botID+'-results.json')))fs[_0x38b73d(0x28a)](path[_0x38b73d(0x191)](configpath,_0x38b73d(0x178)+botID+_0x38b73d(0x328)));}catch(_0x1ebed2){if(_0x1ebed2)logger[_0x38b73d(0x31c)](_0x38b73d(0x17a),_0x1ebed2);}const _0x3249a8=getDate();let _0x30116f=[];currentCoins[_0x38b73d(0x322)](_0x26fc46=>{const _0x517102=_0x38b73d;_0x30116f[_0x517102(0x290)]({'coin':_0x26fc46[_0x517102(0x2f7)],'number':_0x26fc46[_0x517102(0x21d)],'price':_0x26fc46[_0x517102(0x242)]});});let _0x20960d=dbConfig[_0x38b73d(0x16e)](_0x38b73d(0x251))[_0x38b73d(0x26d)]({'botID':botID})[_0x38b73d(0x183)]();_0x20960d&&(dbConfig[_0x38b73d(0x16e)](_0x38b73d(0x251))['find']({'botID':botID})['assign']({'liquidity':[{'date':_0x3249a8,'changes':_0x30116f}]})[_0x38b73d(0x2fa)](),config[_0x38b73d(0x1aa)]=[]),restartBot(!![]);}function noslash(_0x2c2198){const _0x12c564=_0x183ff5;return _0x2c2198[_0x12c564(0x237)]('/','');}function updateHighestFee(_0x83a1db){const _0x20212b=_0x183ff5;if(_0x83a1db['reverse']){let _0x2042c9={'filled':_0x83a1db[_0x20212b(0x257)]*_0x83a1db[_0x20212b(0x28b)],'amount':_0x83a1db[_0x20212b(0x257)]*_0x83a1db[_0x20212b(0x28b)],'side':_0x83a1db['side']==_0x20212b(0x20d)?_0x20212b(0x28d):'sell','price':0x1/_0x83a1db[_0x20212b(0x28b)]};_0x83a1db={..._0x83a1db,..._0x2042c9};}const _0x252ed4=defaultFee*_0x83a1db[_0x20212b(0x257)]*_0x83a1db[_0x20212b(0x28b)];lastFees['recent20']['length']===0x14&&lastFees[_0x20212b(0x262)][_0x20212b(0x16a)](),lastFees[_0x20212b(0x262)][_0x20212b(0x290)](_0x252ed4),lastFees['highest']=Math[_0x20212b(0x1c4)](...lastFees[_0x20212b(0x262)]);}async function updateNumberCoinsCcxt(_0x3a26bb){const _0x91cc21=_0x183ff5;logger[_0x91cc21(0x2ff)](_0x91cc21(0x2f0)+_0x3a26bb[_0x91cc21(0x287)]+_0x91cc21(0x311)+_0x3a26bb[_0x91cc21(0x207)]+_0x91cc21(0x311)+_0x3a26bb['filled']+'\x20/\x20'+_0x3a26bb[_0x91cc21(0x241)]+'\x20|\x20'+_0x3a26bb['id']);let _0x34009c=_0x3a26bb[_0x91cc21(0x207)],_0x461614=![];currentCoins[_0x91cc21(0x322)](_0xc4494e=>{const _0x1e276c=_0x91cc21;_0xc4494e['symbol']==_0x3a26bb[_0x1e276c(0x287)]&&(_0x461614=!![]);});if(!_0x461614)return;const _0x4b4efb=currentCoins[_0x91cc21(0x26d)](_0x434207=>_0x434207[_0x91cc21(0x287)]==_0x3a26bb[_0x91cc21(0x287)]),_0x2fa1ad=_0x4b4efb[_0x91cc21(0x2f7)],_0xd29403=_0x2a933c=>{const _0xb49614=_0x91cc21,_0x58e43b=currentCoins['find'](_0xbd1f2=>_0xbd1f2[_0xb49614(0x287)]==_0x3a26bb[_0xb49614(0x287)]);if(_0x58e43b)_0x58e43b['orderstatus']=_0x2a933c;};let _0x3985e7=![];for(const _0x4d8feb of lastOrders){const _0xee3a17=0x64,_0xb56958=0x1388;let _0x1bc2e6=0x0;while(!_0x4d8feb[_0x91cc21(0x2dd)]&&_0x1bc2e6*_0xee3a17<_0xb56958){_0x1bc2e6++,await sleep(_0xee3a17);}if(_0x1bc2e6>0x0)logger['debug']('Waited\x20'+_0x1bc2e6*_0xee3a17/0x3e8+_0x91cc21(0x248));_0x4d8feb['orderId']==_0x3a26bb['id']&&(_0x3985e7=!![]);}if(_0x34009c==_0x91cc21(0x1fe)){_0xd29403(_0x91cc21(0x1fe));if(_0x3a26bb[_0x91cc21(0x257)]>0x0&&_0x3a26bb['filled']<_0x3a26bb[_0x91cc21(0x241)]){if(_0x3985e7){setBlockTransactionDetection(!![]),logger[_0x91cc21(0x2ff)]('1\x20-\x20partially\x20FILLED\x20('+_0x3a26bb[_0x91cc21(0x257)]+_0x91cc21(0x2a5)+_0x3a26bb['id']);const _0x4bfee5=await getCoins(balanceUpdateDelay,undefined,undefined,_0x2fa1ad);[currentCoins,currentCoinsAll]=_0x4bfee5,setBlockTransactionDetection(![]);}else logger[_0x91cc21(0x2ff)](_0x91cc21(0x286)+_0x3a26bb['filled']+_0x91cc21(0x331)+_0x3a26bb['id']),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay);}}else{if(_0x34009c==_0x91cc21(0x294)){_0xd29403('canceled'),lastOrders=lastOrders[_0x91cc21(0x2ce)](_0x346783=>_0x346783[_0x91cc21(0x287)]!=_0x3a26bb[_0x91cc21(0x287)]);const _0x2c374c=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x2c374c,setBlockTransactionDetection(![]),await getOpenOrders(),handleOpenOrders();}else{if(_0x34009c==_0x91cc21(0x1de)){if(lastOrders)for(const _0x437651 of lastOrders){if(_0x437651[_0x91cc21(0x2dd)]==_0x3a26bb['id']){logger[_0x91cc21(0x2ff)](_0x91cc21(0x27a)+_0x3a26bb['id']),_0x3985e7=!![];if(_0x437651[_0x91cc21(0x257)]==0x0){setBlockTransactionDetection(!![]),logger[_0x91cc21(0x2ff)](_0x91cc21(0x2ee)+_0x3a26bb['id']);if(_0x3a26bb[_0x91cc21(0x32c)])_0x437651[_0x91cc21(0x28b)]=_0x3a26bb['average'];else{if(_0x3a26bb[_0x91cc21(0x28b)])_0x437651['price']=_0x3a26bb[_0x91cc21(0x28b)];else{}}_0x437651[_0x91cc21(0x257)]=_0x3a26bb['filled'],updateHighestFee(_0x437651);const _0x1c4b6c=await getCoins(balanceUpdateDelay,undefined,undefined,_0x2fa1ad);[currentCoins,currentCoinsAll]=_0x1c4b6c,setBlockTransactionDetection(![]),await validateOrders(),_0xd29403(_0x91cc21(0x257)),_0x437651['fee']={'currency':_0x3a26bb['fee']?_0x3a26bb[_0x91cc21(0x2aa)][_0x91cc21(0x208)]:null,'cost':_0x3a26bb[_0x91cc21(0x2aa)]?_0x3a26bb[_0x91cc21(0x2aa)]['cost']:0x0},await updatePnL(_0x437651);}}}!_0x3985e7&&(logger[_0x91cc21(0x2ff)](_0x91cc21(0x193)+_0x3a26bb['id']),_0xd29403(_0x91cc21(0x257)),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay),await updateOpenOrders(),handleOpenOrders());}}}if(lastBalances){let _0x5a5d87=JSON['parse'](lastBalances[_0x91cc21(0x1ad)]);const _0x4f11e8=_0x5a5d87[_0x91cc21(0x26d)](_0x5f0a28=>_0x5f0a28[_0x91cc21(0x287)]==_0x3a26bb['symbol']);if(_0x4f11e8){if(_0x34009c=='open')_0x4f11e8['orderstatus']=_0x4f11e8[_0x91cc21(0x232)]==_0x91cc21(0x257)?_0x91cc21(0x257):_0x91cc21(0x1fe);else{if(_0x34009c==_0x91cc21(0x294))_0x4f11e8[_0x91cc21(0x232)]=_0x4f11e8['orderstatus']==_0x91cc21(0x257)?_0x91cc21(0x257):'canceled';else _0x34009c=='closed'&&(_0x4f11e8[_0x91cc21(0x232)]=_0x91cc21(0x257));}}lastBalances={...lastBalances,'portfolio':JSON['stringify'](_0x5a5d87)},proxyEmit(_0x91cc21(0x29e),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x23f58d=_0x183ff5;await getOpenOrders();let _0x203221=![];currentCoins[_0x23f58d(0x322)](_0x5b6b7a=>{const _0x397bee=_0x23f58d;_0x203221=allOpenOrders[_0x397bee(0x26d)](_0x4498b4=>_0x4498b4[_0x397bee(0x287)]==_0x5b6b7a['symbol']),_0x5b6b7a[_0x397bee(0x232)]=_0x203221?'open':_0x397bee(0x185);});}async function fetchBalance(_0x1625bc=!![]){const _0x36e1b2=_0x183ff5;let _0x29455e,_0x326085;try{return _0x29455e=await exchange[_0x36e1b2(0x1ac)](),_0x326085=_0x29455e[_0x36e1b2(0x20b)],_0x326085;}catch(_0x434a0e){return!_0x1625bc?handleErrorNoStop(_0x434a0e,_0x36e1b2(0x1be)):await handleError(_0x434a0e,_0x36e1b2(0x1be)),![];}}async function getCoins(_0x2ab120=0x0,_0x2d46c3=!![],_0x358266=config[_0x183ff5(0x259)],_0xb95958){const _0x1087d5=_0x183ff5;let _0x18f71c=[],_0x4d8faa=[],_0x577a07=[],_0x53d41d;if(_0x2ab120)await sleep(_0x2ab120);if(botPaused)return[currentCoins,currentCoinsAll];let _0x335184=![],_0x578401=0x0,_0x526385,_0x2dfe64;_0xb95958&&(_0x526385=currentCoins['find'](_0x1e5a0e=>_0x1e5a0e[_0x1087d5(0x2f7)]==_0xb95958),_0x526385&&(_0x2dfe64=_0x526385[_0x1087d5(0x16f)],delete _0x526385[_0x1087d5(0x16f)]));while(!_0x335184){_0x53d41d=await fetchBalance(_0x2d46c3);if(_0x53d41d){if(_0xb95958){if(_0x53d41d[_0xb95958]!=_0x2dfe64)logger[_0x1087d5(0x2ff)](_0x1087d5(0x1a2)+_0xb95958+':\x20'+_0x53d41d[_0xb95958]+'\x20('+_0x2dfe64+')'),_0x335184=!![];else{logger['debug'](_0x1087d5(0x202)+_0xb95958+':\x20'+_0x53d41d[_0xb95958]+'\x20('+_0x2dfe64+')'),_0x578401++;if(_0x578401<balanceUpdateRetries)await sleep(balanceUpdateDelay);else{logger[_0x1087d5(0x2ff)]('Stopped\x20fetching\x20balance\x20after\x20'+_0x578401+_0x1087d5(0x1ce));break;}}}else break;}else return[currentCoins,currentCoinsAll];}for(const [_0xd0aa42,_0x36297a]of Object[_0x1087d5(0x23e)](_0x53d41d)){_0x577a07[_0x1087d5(0x290)](_0xd0aa42);}config[_0x1087d5(0x1ad)][_0x1087d5(0x322)](_0x26e8c5=>{const _0x15ef44=_0x1087d5;!_0x577a07['includes'](_0x26e8c5[_0x15ef44(0x2f7)])&&(_0x53d41d[_0x26e8c5[_0x15ef44(0x2f7)]]=0x0);});if(_0x358266=='')for(const [_0x3f5f61,_0x5a3cca]of Object[_0x1087d5(0x23e)](_0x53d41d)){_0x5a3cca!=0x0&&_0x18f71c[_0x1087d5(0x290)]({'coin':_0x3f5f61});}else for(const [_0x51a3d7,_0x7605ed]of Object['entries'](_0x53d41d)){const _0x243989=config[_0x1087d5(0x1ad)][_0x1087d5(0x26d)](_0x46a239=>_0x46a239['coin']==_0x51a3d7),_0x2888ba=_0x51a3d7+'/'+_0x358266,_0x2bb142=_0x358266+'/'+_0x51a3d7,_0x4b27df=currentCoins[_0x1087d5(0x26d)](_0x413448=>_0x413448['coin']==_0x51a3d7);if((_0x7605ed!=0x0||_0x243989)&&(allSymbols[_0x1087d5(0x2d4)](_0x2888ba)||_0x51a3d7==_0x358266))_0x4b27df?_0x18f71c[_0x1087d5(0x290)]({..._0x4b27df,'number':Math[_0x1087d5(0x1c4)](_0x7605ed+(_0x243989&&_0x243989[_0x1087d5(0x17b)]||0x0),0x0)}):_0x18f71c[_0x1087d5(0x290)]({'coin':_0x51a3d7,'symbol':_0x2888ba,'reverse':![],'number':Math['max'](_0x7605ed+(_0x243989&&_0x243989[_0x1087d5(0x17b)]||0x0),0x0),'orderstatus':_0x1087d5(0x185)});else{if((_0x7605ed!=0x0||_0x243989)&&allSymbols[_0x1087d5(0x2d4)](_0x2bb142))_0x4b27df?_0x18f71c[_0x1087d5(0x290)]({..._0x4b27df,'number':Math['max'](_0x7605ed+(_0x243989&&_0x243989[_0x1087d5(0x17b)]||0x0),0x0)}):_0x18f71c['push']({'coin':_0x51a3d7,'symbol':_0x2bb142,'reverse':!![],'number':Math[_0x1087d5(0x1c4)](_0x7605ed+(_0x243989&&_0x243989[_0x1087d5(0x17b)]||0x0),0x0),'orderstatus':_0x1087d5(0x185)});else _0x243989&&_0x18f71c[_0x1087d5(0x290)]({'coin':_0x243989[_0x1087d5(0x2f7)],'symbol':_0x243989[_0x1087d5(0x287)],'reverse':_0x243989[_0x1087d5(0x196)],'number':0x0,'orderstatus':_0x1087d5(0x185)});}}return _0x18f71c['sort']((_0x7e18e5,_0x33518e)=>_0x7e18e5[_0x1087d5(0x2b8)]<_0x33518e[_0x1087d5(0x2b8)]?0x1:_0x33518e[_0x1087d5(0x2b8)]<_0x7e18e5['delta']?-0x1:0x0),_0x4d8faa=cloneDeep(_0x18f71c),_0x18f71c=_0x18f71c[_0x1087d5(0x2ce)](_0x26af5e=>{const _0x3836a6=_0x1087d5,_0xcb8813=config[_0x3836a6(0x1ad)][_0x3836a6(0x26d)](_0x55e130=>_0x55e130[_0x3836a6(0x2f7)]==_0x26af5e[_0x3836a6(0x2f7)]);return _0xcb8813&&!_0xcb8813[_0x3836a6(0x32a)];}),[_0x18f71c,_0x4d8faa];}async function getOpenOrders(){const _0x3c4a83=_0x183ff5;let _0x26d2cf;allOpenOrders=[];try{for(const _0x1dde28 of config['portfolio']){!_0x1dde28[_0x3c4a83(0x32a)]&&_0x1dde28[_0x3c4a83(0x2f7)]!=config[_0x3c4a83(0x259)]&&(_0x26d2cf=await exchange[_0x3c4a83(0x281)](_0x1dde28[_0x3c4a83(0x287)]),_0x26d2cf[_0x3c4a83(0x234)]>0x0&&allOpenOrders[_0x3c4a83(0x290)](_0x26d2cf[0x0]));}}catch(_0x482515){await handleError(_0x482515,'getOpenOrders()');}}async function handleOpenOrders(_0x1ea7c0=0x0){const _0x2a5bdc=_0x183ff5;allOpenOrders[_0x2a5bdc(0x234)]==0x0&&lockOrders==ORDERS[_0x2a5bdc(0x2fb)]&&allOrdersPlaced&&(_0x1ea7c0==0x0?(logger[_0x2a5bdc(0x2ff)](_0x2a5bdc(0x2c7)),_0x1ea7c0++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x2a5bdc(0x2ff)](_0x2a5bdc(0x216)),validateOrders(_0x2a5bdc(0x30e))));}async function testAPI(){const _0x2f9e31=_0x183ff5;try{return await exchange[_0x2f9e31(0x1ac)](),!![];}catch(_0x42cd90){return loading['cancel']=!![],_0x42cd90[_0x2f9e31(0x25c)]()['toLowerCase']()[_0x2f9e31(0x2d4)](_0x2f9e31(0x213))||_0x42cd90[_0x2f9e31(0x25c)]()[_0x2f9e31(0x2d2)]()[_0x2f9e31(0x2d4)](_0x2f9e31(0x31e))?(logHistory('error',_0x2f9e31(0x1fc)),loading[_0x2f9e31(0x194)]='timestamp-issue'):(handleErrorNoStop(_0x42cd90,_0x2f9e31(0x1bf)),logger[_0x2f9e31(0x2ff)]('Error\x20details:',_0x42cd90)),emitLoadingProgress(),botPaused=!![],![];}}async function testNewAPI(_0x607f24){const _0xe810e0=_0x183ff5;logger['debug'](_0xe810e0(0x2ad));const _0x290b1d=ccxt[_0xe810e0(0x2e7)][_0x607f24[_0xe810e0(0x1cf)][_0xe810e0(0x2d2)]()],_0x383256=new _0x290b1d({'apiKey':_0x607f24[_0xe810e0(0x2ef)],'secret':_0x607f24[_0xe810e0(0x1ae)],'options':{'defaultType':'spot'}});if(_0x607f24[_0xe810e0(0x2ea)])_0x383256[_0xe810e0(0x1b3)]=_0x607f24[_0xe810e0(0x2ea)];if(_0x383256[_0xe810e0(0x1a1)]['sandbox'])_0x383256[_0xe810e0(0x27b)](_0x607f24[_0xe810e0(0x222)]);try{await _0x383256[_0xe810e0(0x1ac)](),botPaused=![];}catch(_0x39798f){logger[_0xe810e0(0x2ff)](_0xe810e0(0x16b)+_0x39798f[_0xe810e0(0x25c)]());throw _0x39798f;}}function cloneDeep(_0x3b2100){const _0x15a9ff=_0x183ff5;return JSON[_0x15a9ff(0x1d6)](JSON[_0x15a9ff(0x266)](_0x3b2100));}async function getPortfolio(_0x433b60){const _0x1a03e1=_0x183ff5;let _0x2c5cae=[],_0x341ab2=[],_0x47bc41=[],_0x47db89;_0x433b60['apiKey']=decryptRSA(secure[_0x1a03e1(0x1f3)],_0x433b60[_0x1a03e1(0x2ef)]),_0x433b60[_0x1a03e1(0x1ae)]=decryptRSA(secure[_0x1a03e1(0x1f3)],_0x433b60[_0x1a03e1(0x1ae)]);if(_0x433b60[_0x1a03e1(0x2ea)])_0x433b60[_0x1a03e1(0x2ea)]=decryptRSA(secure[_0x1a03e1(0x1f3)],_0x433b60[_0x1a03e1(0x2ea)]);if(_0x433b60[_0x1a03e1(0x2ef)]!==_0x1a03e1(0x2c6)||_0x433b60[_0x1a03e1(0x1ae)]!==_0x1a03e1(0x2c6)||_0x433b60[_0x1a03e1(0x2ea)]&&_0x433b60[_0x1a03e1(0x2ea)]!=='************'){if(config['exchange']){if(_0x433b60['apiKey']==_0x1a03e1(0x2c6))_0x433b60[_0x1a03e1(0x2ef)]=config['apiKey'];if(_0x433b60[_0x1a03e1(0x1ae)]==_0x1a03e1(0x2c6))_0x433b60[_0x1a03e1(0x1ae)]=config[_0x1a03e1(0x1ae)];if(_0x433b60[_0x1a03e1(0x2ea)]==_0x1a03e1(0x2c6))_0x433b60[_0x1a03e1(0x2ea)]=config[_0x1a03e1(0x2ea)];}try{if(_0x433b60['testApi'])await testNewAPI(_0x433b60);}catch(_0x3c1609){if(_0x3c1609[_0x1a03e1(0x25c)]()['includes'](_0x1a03e1(0x2cd))){logHistory(_0x1a03e1(0x194),_0x1a03e1(0x2d3)),logHistory(_0x1a03e1(0x194),_0x1a03e1(0x307)+_0x3c1609['toString']()),proxyEmit(_0x1a03e1(0x25b),![]);return;}else{if(_0x3c1609[_0x1a03e1(0x25c)]()[_0x1a03e1(0x2d4)](_0x1a03e1(0x32d))){logHistory(_0x1a03e1(0x194),_0x1a03e1(0x211)),logHistory('error',_0x1a03e1(0x307)+_0x3c1609[_0x1a03e1(0x25c)]()),proxyEmit('portfolio1',![]);return;}else{logHistory('error','Error\x20occurred:\x20'+_0x3c1609[_0x1a03e1(0x25c)]()),logger[_0x1a03e1(0x2ff)](_0x1a03e1(0x274),_0x3c1609),proxyEmit(_0x1a03e1(0x25b),![]);return;}}}exchange?updateExchange(_0x433b60[_0x1a03e1(0x2ef)],_0x433b60['apiSecret'],_0x433b60[_0x1a03e1(0x2ea)]):await initExchange(_0x433b60[_0x1a03e1(0x1cf)],_0x433b60[_0x1a03e1(0x2ef)],_0x433b60[_0x1a03e1(0x1ae)],_0x433b60[_0x1a03e1(0x2ea)],_0x433b60['sandbox']);await loadSymbols();const _0x2d85f3=await getCoins(0x0,![],_0x433b60['basecoin']);_0x47bc41=cloneDeep(_0x2d85f3[0x1]);}else{const _0x37df27=await getCoins();_0x47bc41=cloneDeep(_0x37df27[0x1]);}if(_0x433b60['basecoin']=='')proxyEmit(_0x1a03e1(0x25b),!![]),proxyEmit(_0x1a03e1(0x1d0),_0x47bc41);else{_0x47bc41['forEach'](_0x1b917c=>{const _0x175afa=_0x1a03e1;if(_0x1b917c[_0x175afa(0x2f7)]!=_0x433b60['basecoin']&&allSymbols['includes'](_0x1b917c[_0x175afa(0x287)]))_0x2c5cae['push'](_0x1b917c['symbol']);});if(_0x2c5cae[_0x1a03e1(0x234)]==0x0)logHistory(_0x1a03e1(0x194),_0x1a03e1(0x1c3));else{try{_0x341ab2=await getTickers(_0x2c5cae);}catch(_0x1a29e8){logHistory('error',_0x1a03e1(0x261)),logger['debug'](_0x1a03e1(0x274),_0x1a29e8),proxyEmit('portfolio1',![]);return;}_0x47bc41['forEach'](_0x11c75b=>{const _0x11a096=_0x1a03e1;_0x11c75b[_0x11a096(0x2f7)]!=_0x433b60[_0x11a096(0x259)]?_0x341ab2[_0x11c75b[_0x11a096(0x287)]]?_0x341ab2[_0x11c75b[_0x11a096(0x287)]][_0x11a096(0x242)]?_0x47db89=_0x11c75b['reverse']?0x1/_0x341ab2[_0x11c75b[_0x11a096(0x287)]]['last']:_0x341ab2[_0x11c75b[_0x11a096(0x287)]][_0x11a096(0x242)]:_0x47db89=0x0:_0x47db89=0x0:_0x47db89=0x1,_0x11c75b[_0x11a096(0x28b)]=formatResult(_0x47db89,0x8);}),await getMarketCap(_0x47bc41),proxyEmit(_0x1a03e1(0x25b),!![]),proxyEmit('portfolio2',_0x47bc41);}}}function truncateTradeAmount(_0x3d404e,_0x59628d){const _0x3b3e1c=_0x183ff5;let _0x5f0511=0x0;try{_0x5f0511=exchange[_0x3b3e1c(0x1f5)](_0x3d404e,_0x59628d);}catch(_0x31ccd2){}return _0x5f0511;}function checkMinimums(_0x2c1b8b){const _0x428e9b=_0x183ff5;let _0x3ac383=!![];const _0x3b33e5=!_0x2c1b8b['reverse']?markets[_0x2c1b8b['symbol']]['limits'][_0x428e9b(0x241)][_0x428e9b(0x29c)]:markets[_0x2c1b8b[_0x428e9b(0x287)]]['limits'][_0x428e9b(0x29f)][_0x428e9b(0x29c)],_0x14d68d=!_0x2c1b8b[_0x428e9b(0x196)]?markets[_0x2c1b8b[_0x428e9b(0x287)]][_0x428e9b(0x24b)]['cost'][_0x428e9b(0x29c)]:markets[_0x2c1b8b[_0x428e9b(0x287)]][_0x428e9b(0x24b)]['amount'][_0x428e9b(0x29c)],_0x2740b2=truncateTradeAmount(_0x2c1b8b[_0x428e9b(0x287)],_0x2c1b8b[_0x428e9b(0x2b3)]);_0x2c1b8b[_0x428e9b(0x2b3)]=_0x2740b2;if(Math['abs'](_0x2740b2)<_0x3b33e5)_0x3ac383=![];if(Math[_0x428e9b(0x31d)](_0x2740b2)*_0x2c1b8b[_0x428e9b(0x242)]<_0x14d68d)_0x3ac383=![];if(_0x2c1b8b[_0x428e9b(0x317)]==_0x428e9b(0x20d)){let _0x5bc77b=config[_0x428e9b(0x1ad)][_0x428e9b(0x26d)](_0x592585=>_0x592585[_0x428e9b(0x2f7)]==_0x2c1b8b[_0x428e9b(0x2f7)]);if(_0x5bc77b[_0x428e9b(0x17b)]>0x0){if(Math['abs'](_0x2740b2)>_0x2c1b8b[_0x428e9b(0x21d)]-_0x5bc77b[_0x428e9b(0x17b)])_0x3ac383=![];}else{if(Math['abs'](_0x2740b2)>_0x2c1b8b[_0x428e9b(0x21d)])_0x3ac383=![];}}if(_0x2c1b8b[_0x428e9b(0x317)]=='buy'){let _0x12a553=config[_0x428e9b(0x1ad)][_0x428e9b(0x26d)](_0x13b792=>_0x13b792[_0x428e9b(0x2f7)]==config[_0x428e9b(0x259)]),_0x145935=currentCoins[_0x428e9b(0x26d)](_0x27dca5=>_0x27dca5[_0x428e9b(0x2f7)]==config['basecoin']);if(_0x12a553[_0x428e9b(0x17b)]>0x0){if(Math[_0x428e9b(0x31d)](_0x2740b2)*_0x2c1b8b[_0x428e9b(0x242)]>_0x145935['number']-_0x12a553[_0x428e9b(0x17b)])_0x3ac383=![];}else{if(Math['abs'](_0x2740b2)*_0x2c1b8b[_0x428e9b(0x242)]>_0x145935[_0x428e9b(0x21d)])_0x3ac383=![];}}return _0x3ac383;}async function getBalances(_0x4e2e79=!![]){const _0x3d4ac1=_0x183ff5;if(botPaused)return;let _0x388ea5=0x0,_0x33d724;const _0x16597a=config[_0x3d4ac1(0x19a)];if(config['headless']&&config['change24h']<0x0)await validate24hChanges();currentCoins[_0x3d4ac1(0x322)](_0x262a9e=>{const _0x306905=_0x3d4ac1;if(_0x262a9e['coin']!=config[_0x306905(0x259)]){let _0x15e545=gTicker[noslash(_0x262a9e[_0x306905(0x287)])];_0x33d724=_0x262a9e[_0x306905(0x196)]?0x1/_0x15e545:_0x15e545;}else _0x33d724=0x1;let _0x4eeba7=_0x262a9e[_0x306905(0x21d)]*_0x33d724;_0x388ea5+=_0x4eeba7,_0x262a9e[_0x306905(0x242)]=formatResult(Number(_0x33d724),0x8),_0x262a9e['value']=_0x4eeba7;}),currentCoins[_0x3d4ac1(0x322)](_0x384815=>{const _0x3bf5d9=_0x3d4ac1;let _0x4ceac5=config['portfolio'][_0x3bf5d9(0x26d)](_0x542746=>_0x542746[_0x3bf5d9(0x2f7)]==_0x384815['coin']),_0x15e7f6=Number(_0x4ceac5[_0x3bf5d9(0x187)]),_0x5b3ac6=_0x384815[_0x3bf5d9(0x183)]/_0x388ea5*0x64,_0x548020=_0x15e7f6*_0x388ea5/0x64/_0x384815['last']-_0x384815[_0x3bf5d9(0x21d)];_0x384815[_0x3bf5d9(0x187)]=formatResult(_0x5b3ac6,0x3),_0x384815[_0x3bf5d9(0x2d5)]=formatResult(_0x15e7f6,0x3),_0x384815[_0x3bf5d9(0x2b3)]=formatResult(_0x548020,0x8),_0x384815[_0x3bf5d9(0x317)]='',_0x384815[_0x3bf5d9(0x201)]=![];if(_0x384815[_0x3bf5d9(0x2f7)]!=config['basecoin']){if(_0x384815['distribution']>_0x15e7f6)_0x384815['side']=_0x3bf5d9(0x20d),_0x384815[_0x3bf5d9(0x201)]=checkMinimums(_0x384815);else _0x384815[_0x3bf5d9(0x187)]<_0x15e7f6&&(_0x384815[_0x3bf5d9(0x317)]=_0x3bf5d9(0x28d),_0x384815[_0x3bf5d9(0x201)]=checkMinimums(_0x384815));}_0x384815[_0x3bf5d9(0x2b8)]=_0x384815[_0x3bf5d9(0x187)]/_0x384815['target']-0x1;if(_0x384815[_0x3bf5d9(0x232)]==_0x3bf5d9(0x257)||_0x384815[_0x3bf5d9(0x232)]=='canceled')_0x384815['orderstatus']=_0x3bf5d9(0x185);}),currentCoins[_0x3d4ac1(0x291)]((_0x54744f,_0x534bbf)=>_0x54744f[_0x3d4ac1(0x2b8)]<_0x534bbf['delta']?0x1:_0x534bbf[_0x3d4ac1(0x2b8)]<_0x54744f[_0x3d4ac1(0x2b8)]?-0x1:0x0);const _0xe8dbb3=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0xe8dbb3[_0x3d4ac1(0x2af)],'usd':_0xe8dbb3['usd'],'portfolio':JSON[_0x3d4ac1(0x266)](currentCoins),'threshold':_0x16597a},proxyEmit(_0x3d4ac1(0x29e),{'serverversion':serverversion,'balances':lastBalances});if(_0x4e2e79){if(config[_0x3d4ac1(0x1a4)])headlessMode({'portfolio':currentCoins,'threshold':_0x16597a});else lockOrders==ORDERS[_0x3d4ac1(0x292)]&&!coolingDown&&notifyBalance({'portfolio':currentCoins,'threshold':_0x16597a});}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x19c443=getNormalizedPerformance();getStartingBalances(_0x19c443),emitPerformance(_0x19c443);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}function getPnL(){const _0x2ac3e7=_0x183ff5;let _0x8f59e5=dbCoinResults[_0x2ac3e7(0x16e)](_0x2ac3e7(0x190))[_0x2ac3e7(0x183)](),_0x5ae941=0x0;return Object[_0x2ac3e7(0x23e)](_0x8f59e5)[_0x2ac3e7(0x322)](([_0x349e6d,_0x4e3a91])=>{_0x5ae941+=_0x4e3a91['realizedPnL'];}),_0x5ae941;}async function storePerformance(){const _0x11869e=_0x183ff5;if(!lastBalances)return;let _0x13f756=[],_0x16669c;const _0x282b34=getPnL();let _0x5c887e=JSON[_0x11869e(0x1d6)](lastBalances[_0x11869e(0x1ad)]);_0x5c887e[_0x11869e(0x291)]((_0x5dba1a,_0x28d9be)=>_0x5dba1a[_0x11869e(0x2f7)]>_0x28d9be[_0x11869e(0x2f7)]?0x1:_0x28d9be['coin']>_0x5dba1a[_0x11869e(0x2f7)]?-0x1:0x0),_0x5c887e[_0x11869e(0x322)](_0x5a1154=>{const _0x94d394=_0x11869e;let _0x56c3ed={'coin':_0x5a1154[_0x94d394(0x2f7)],'number':_0x5a1154[_0x94d394(0x21d)],'price':_0x5a1154[_0x94d394(0x242)]};_0x13f756['push'](_0x56c3ed);});const _0x48bc81=await getFiat(),_0x560002=getTimeStamp()[_0x11869e(0x176)]('\x20')[0x0],_0x71fe63=dbPerformance['get'](_0x11869e(0x256))[_0x11869e(0x26d)]({'date':_0x560002})[_0x11869e(0x183)]();_0x16669c={'date':_0x560002,'eur':_0x48bc81[_0x11869e(0x2af)],'usd':_0x48bc81[_0x11869e(0x1e6)],'coins':_0x13f756,'pnl':_0x282b34},_0x71fe63?_0x16669c['date']!=config[_0x11869e(0x2cf)]&&dbPerformance[_0x11869e(0x16e)](_0x11869e(0x256))[_0x11869e(0x26d)]({'date':_0x560002})[_0x11869e(0x304)](_0x16669c)[_0x11869e(0x2fa)]():dbPerformance['get']('data')[_0x11869e(0x290)](_0x16669c)[_0x11869e(0x2fa)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x5013df=_0x183ff5;let _0x2de582=[];if(dbPerformance[_0x5013df(0x1a1)]('data')['value']()){let _0x549431=dbPerformance[_0x5013df(0x16e)]('data')[_0x5013df(0x18e)]()[_0x5013df(0x2ce)](_0x3fd4a1=>{const _0x5868aa=_0x5013df;if(_0x3fd4a1[_0x5868aa(0x190)][_0x5868aa(0x234)]==0x0)return![];else return!![];})['sortBy'](_0x5013df(0x2a0))[_0x5013df(0x183)](),_0x49aa4e=[...config[_0x5013df(0x1aa)]];_0x49aa4e[_0x5013df(0x291)]((_0xe8e865,_0x2703e2)=>_0xe8e865['date']>_0x2703e2['date']?-0x1:_0x2703e2[_0x5013df(0x2a0)]>_0xe8e865[_0x5013df(0x2a0)]?0x1:0x0);let _0x36dce2=0x1,_0x360359=[],_0xca6769=0x0;_0x549431[_0x5013df(0x310)]()[_0x5013df(0x196)]()['forEach']((_0xd3e9c1,_0x590a46)=>{const _0x24bc02=_0x5013df;if(_0x49aa4e[_0xca6769]){if(_0x549431[_0x549431[_0x24bc02(0x234)]-_0x590a46]&&_0x49aa4e[_0xca6769][_0x24bc02(0x2a0)]==_0x549431[_0x549431[_0x24bc02(0x234)]-_0x590a46]['date']){if(_0x590a46<_0x549431[_0x24bc02(0x234)]){let _0x51062f=0x0,_0x3e4a51=0x0;_0x549431[_0x549431['length']-_0x590a46][_0x24bc02(0x190)][_0x24bc02(0x322)](_0x9a09a9=>{const _0xd13c9e=_0x24bc02;_0x3e4a51+=_0x9a09a9[_0xd13c9e(0x21d)]*_0x9a09a9[_0xd13c9e(0x28b)];}),_0x49aa4e[_0xca6769][_0x24bc02(0x2de)][_0x24bc02(0x322)](_0x47f16e=>{_0x51062f+=_0x47f16e['number']*_0x47f16e['price'];}),_0x36dce2*=_0x51062f/(_0x3e4a51-_0x51062f)+0x1;}_0xca6769++;}}let _0x1dfc70=0x0;_0xd3e9c1[_0x24bc02(0x190)][_0x24bc02(0x322)](_0x1576c0=>{const _0x3bb5e3=_0x24bc02;_0x1dfc70+=_0x1576c0[_0x3bb5e3(0x21d)]*_0x1576c0[_0x3bb5e3(0x28b)];}),_0x360359[_0x549431[_0x24bc02(0x234)]-_0x590a46-0x1]=_0x1dfc70*(_0x36dce2-0x1);});let _0x5eb844=[];_0x49aa4e=[...config[_0x5013df(0x1aa)]]||[];let _0x21dce0=0x0;_0xca6769=0x0,_0x549431['forEach']((_0x1e6f98,_0x6652c6)=>{const _0x1ba854=_0x5013df;if(_0x49aa4e[_0xca6769]){const _0x301c9b=fns[_0x1ba854(0x1d6)](_0x49aa4e[_0xca6769]['date'],_0x1ba854(0x17d),new Date()),_0x5807d2=fns['parse'](_0x1e6f98[_0x1ba854(0x2a0)],_0x1ba854(0x17d),new Date());if(fns[_0x1ba854(0x299)](_0x301c9b,_0x5807d2)){let _0x2620eb=0x0;_0x49aa4e[_0xca6769][_0x1ba854(0x2de)][_0x1ba854(0x322)](_0x2aa430=>{const _0x585808=_0x1ba854;!_0x5eb844[_0x2aa430[_0x585808(0x2f7)]]?_0x5eb844[_0x2aa430[_0x585808(0x2f7)]]=_0x2aa430[_0x585808(0x21d)]:(_0x2620eb=_0x5eb844[_0x2aa430['coin']],_0x5eb844[_0x2aa430[_0x585808(0x2f7)]]+=_0x2aa430[_0x585808(0x21d)]);const _0x4ffaa5=_0x1e6f98[_0x585808(0x190)]['find'](_0xed61de=>_0xed61de[_0x585808(0x2f7)]==_0x2aa430[_0x585808(0x2f7)]);(!_0x4ffaa5||_0x4ffaa5['number']==0x0)&&(_0x21dce0+=(-_0x2aa430['number']-_0x2620eb)*_0x2aa430['price']);}),_0xca6769++;}}_0x1e6f98[_0x1ba854(0x190)][_0x1ba854(0x322)]((_0x593418,_0x11bc18)=>{const _0x574b44=_0x1ba854;_0x5eb844[_0x593418[_0x574b44(0x2f7)]]&&(_0x593418[_0x574b44(0x220)]=_0x5eb844[_0x593418[_0x574b44(0x2f7)]]);}),_0x2de582[_0x1ba854(0x290)]({'date':_0x1e6f98[_0x1ba854(0x2a0)],'eur':_0x1e6f98[_0x1ba854(0x2af)],'usd':_0x1e6f98[_0x1ba854(0x1e6)],'offset':_0x360359[_0x6652c6],'netoffset':_0x21dce0,'coins':_0x1e6f98[_0x1ba854(0x190)],'pnl':_0x1e6f98[_0x1ba854(0x214)]});});}return _0x2de582;}function emitPerformance(_0x3f9633){const _0x8efdad=_0x183ff5;_0x3f9633[_0x8efdad(0x234)]!==0x0?(proxyEmit(_0x8efdad(0x203),_0x3f9633),lastPerformanceEmitted=getDate()):proxyEmit(_0x8efdad(0x203),[]);}function getPerf(_0x18f2c1,_0x5b9dc5){const _0x29e667=_0x183ff5;let _0x1166f2=0x0,_0x39ff7f=0x0,_0x511718=0x0;_0x18f2c1[_0x29e667(0x190)][_0x29e667(0x322)](_0x52da1e=>{const _0x322479=_0x29e667;_0x1166f2+=_0x52da1e[_0x322479(0x21d)]*_0x52da1e[_0x322479(0x28b)];});_0x5b9dc5&&(_0x1166f2+=_0x18f2c1[_0x29e667(0x17b)]);if(config['basecoin']===_0x29e667(0x2e3)||config[_0x29e667(0x259)]===_0x29e667(0x1ab)||config[_0x29e667(0x259)]===_0x29e667(0x1ec))_0x39ff7f=_0x1166f2*_0x18f2c1[_0x29e667(0x2af)],_0x511718=_0x1166f2*_0x18f2c1[_0x29e667(0x1e6)];else{if(usdBasecoins[_0x29e667(0x2d4)](config[_0x29e667(0x259)]))_0x39ff7f=_0x1166f2*_0x18f2c1[_0x29e667(0x2af)]/_0x18f2c1[_0x29e667(0x1e6)],_0x511718=_0x1166f2;else config[_0x29e667(0x259)]===_0x29e667(0x1df)&&(_0x39ff7f=_0x1166f2,_0x511718=_0x1166f2*_0x18f2c1['usd']/_0x18f2c1['eur']);}return[_0x1166f2,_0x39ff7f,_0x511718];}function CurrencyFactor(_0x2bf05c,_0x34eeb1,_0x3b7e25){const _0x2ecc8e=_0x183ff5;let _0xfb6944;if(_0x34eeb1===_0x2ecc8e(0x2e3)||_0x34eeb1===_0x2ecc8e(0x1ab)||_0x34eeb1==='PAXG')_0xfb6944=_0x3b7e25===_0x2ecc8e(0x1df)?_0x2bf05c[_0x2ecc8e(0x2af)]:_0x2bf05c[_0x2ecc8e(0x1e6)];else{if(usdBasecoins[_0x2ecc8e(0x2d4)](_0x34eeb1))_0xfb6944=_0x3b7e25===_0x2ecc8e(0x1df)?_0x2bf05c[_0x2ecc8e(0x2af)]/_0x2bf05c['usd']:0x1;else _0x34eeb1==='EUR'&&(_0xfb6944=_0x3b7e25===_0x2ecc8e(0x1df)?0x1:_0x2bf05c[_0x2ecc8e(0x1e6)]/_0x2bf05c[_0x2ecc8e(0x2af)]);}return _0xfb6944;}function getKPIs(_0xbf1afe,_0xf264af=_0x183ff5(0x1df)){const _0x4889b0=_0x183ff5,_0x4c3fa5=config[_0x4889b0(0x259)],_0x5cb318=lastBalances,_0x2aad94=currentCoins,_0x4a6d57=getNormalizedPerformance(),_0x3584aa=CurrencyFactor(_0x5cb318,config['basecoin'],_0xf264af);let _0x3fdb94=0x0;_0x2aad94[_0x4889b0(0x322)](_0x50f732=>{const _0x519600=_0x4889b0;_0x3fdb94+=_0x50f732[_0x519600(0x21d)]*_0x50f732[_0x519600(0x242)];});_0xbf1afe[_0x4889b0(0x2d4)](_0x4889b0(0x240))&&(_0x3fdb94*=_0x3584aa);let _0x3c583a;if(_0x3fdb94!==0x0){if(_0xbf1afe===_0x4889b0(0x259)||_0xbf1afe===_0x4889b0(0x240)){if(_0xbf1afe===_0x4889b0(0x259))_0x3c583a=(_0x3fdb94/startingBalances[_0x4889b0(0x259)]-0x1)*0x64;else{if(_0xf264af===_0x4889b0(0x1df))_0x3c583a=(_0x3fdb94/startingBalances['eur']-0x1)*0x64;else _0x3c583a=(_0x3fdb94/startingBalances[_0x4889b0(0x1e6)]-0x1)*0x64;}}if(_0xbf1afe[_0x4889b0(0x2d4)](_0x4889b0(0x2b0))){let _0x4cb0bc=0x0;if(startingBalances[_0x4889b0(0x190)])_0x2aad94[_0x4889b0(0x322)](_0x2d6ca5=>{const _0x3b3ae2=_0x4889b0;let _0x55de54=startingBalances['coins'][_0x3b3ae2(0x26d)](_0x1b418c=>_0x1b418c[_0x3b3ae2(0x2f7)]===_0x2d6ca5[_0x3b3ae2(0x2f7)]);if(_0x55de54&&_0x55de54[_0x3b3ae2(0x2f7)]&&_0x2d6ca5[_0x3b3ae2(0x21d)]!==0x0)_0x4cb0bc+=_0x55de54['number']*_0x2d6ca5[_0x3b3ae2(0x242)];});let _0x53bc74=0x0;if(_0x4a6d57[_0x4889b0(0x234)]!==0x0){let _0x4dedd6=_0x4a6d57[_0x4a6d57[_0x4889b0(0x234)]-0x1];_0x53bc74=_0x4dedd6[_0x4889b0(0x1a7)];}_0x4cb0bc-=_0x53bc74;let _0x1bf28b;_0xbf1afe===_0x4889b0(0x1da)&&(_0x1bf28b=startingBalances[_0x4889b0(0x259)]),_0xbf1afe==='net-fiat'&&(_0x1bf28b=_0xf264af==='EUR'?startingBalances['eur']:startingBalances[_0x4889b0(0x1e6)],_0x4cb0bc*=_0x3584aa),_0x3c583a=(_0x3fdb94-_0x4cb0bc)/_0x1bf28b*0x64,_0x3fdb94=_0x3fdb94-_0x4cb0bc;}if(_0xbf1afe[_0x4889b0(0x2d4)](_0x4889b0(0x214))){if(_0x4a6d57[_0x4889b0(0x234)]!==0x0&&_0x2aad94[_0x4889b0(0x234)]!==0x0){let _0x316829,_0x45618d=_0x4a6d57[_0x4a6d57[_0x4889b0(0x234)]-0x1][_0x4889b0(0x214)];_0xbf1afe['includes'](_0x4889b0(0x240))?(_0x316829=_0xf264af===_0x4889b0(0x1df)?startingBalances[_0x4889b0(0x2af)]:startingBalances[_0x4889b0(0x1e6)],_0x45618d*=CurrencyFactor(_0x5cb318,_0x4c3fa5,_0xf264af)):_0x316829=startingBalances[_0x4889b0(0x259)],_0x3c583a=_0x45618d/_0x316829*0x64,_0x3fdb94=_0x45618d;}}if(_0x3c583a){if(_0x3c583a<0x64)_0x3c583a=_0x3c583a[_0x4889b0(0x31b)](0x2);else{if(_0x3c583a<0x3e8)_0x3c583a=_0x3c583a[_0x4889b0(0x31b)](0x1);else _0x3c583a=_0x3c583a[_0x4889b0(0x31b)](0x0);}}else _0x3c583a=Number('0')[_0x4889b0(0x31b)](0x2);if(_0x3fdb94){if(Math['abs'](_0x3fdb94)<0.000001)_0x3fdb94=_0x3fdb94[_0x4889b0(0x31b)](0x2);else{if(Math['abs'](_0x3fdb94)<0.1)_0x3fdb94=_0x3fdb94[_0x4889b0(0x31b)](0x6);else{if(Math[_0x4889b0(0x31d)](_0x3fdb94)<0x1)_0x3fdb94=_0x3fdb94['toFixed'](0x5);else{if(Math[_0x4889b0(0x31d)](_0x3fdb94)<0xa)_0x3fdb94=_0x3fdb94[_0x4889b0(0x31b)](0x4);else{if(Math['abs'](_0x3fdb94)<0x64)_0x3fdb94=_0x3fdb94['toFixed'](0x3);else{if(Math[_0x4889b0(0x31d)](_0x3fdb94)<0x3e8)_0x3fdb94=_0x3fdb94[_0x4889b0(0x31b)](0x2);else _0x3fdb94=_0x3fdb94[_0x4889b0(0x31b)](0x2);}}}}}}else _0x3fdb94=Number('0')['toFixed'](0x2);}else _0x3c583a=Number('0')[_0x4889b0(0x31b)](0x2);if(_0x3c583a>=0x0)_0x3c583a='+'+_0x3c583a;return{'value':_0x3fdb94,'change':_0x3c583a};}async function getStartingBalances(_0x21b568,_0x581759=!![]){const _0x39cde9=_0x183ff5;if(_0x21b568['length']!==0x0){const [_0xe9d3ae,_0x5d3153,_0x1d1fd0]=getPerf(_0x21b568[0x0],!![]);let _0x2e513d=[];config['portfolio']['forEach'](_0x274709=>{const _0x2d0608=_0x4e8e;let _0x3119a6=0x0,_0x2f5a77;config[_0x2d0608(0x1aa)][_0x2d0608(0x322)](_0x3a171a=>{const _0x38588f=_0x2d0608;let _0x276664=_0x3a171a['changes'][_0x38588f(0x26d)](_0x2be4f8=>_0x2be4f8[_0x38588f(0x2f7)]==_0x274709[_0x38588f(0x2f7)]);if(_0x276664){_0x3119a6+=_0x276664[_0x38588f(0x21d)];if(!_0x2f5a77)_0x2f5a77=_0x276664[_0x38588f(0x28b)];}}),_0x2e513d[_0x2d0608(0x290)]({'coin':_0x274709[_0x2d0608(0x2f7)],'number':_0x3119a6,'initialprice':_0x2f5a77});});const _0x4ed4bf={'basecoin':_0xe9d3ae,'eur':_0x5d3153,'usd':_0x1d1fd0,'coins':_0x2e513d};if(_0x581759)proxyEmit(_0x39cde9(0x173),_0x4ed4bf);startingBalances=_0x4ed4bf;}}function headlessMode(_0x561b29){const _0x584489=_0x183ff5;let _0x7bee0f=_0x561b29[_0x584489(0x1ad)],_0x485cb9=_0x561b29[_0x584489(0x19a)],_0x4ba914=[];for(let _0x309c43 of _0x7bee0f){if(_0x309c43['coin']!=config['basecoin']){if(_0x309c43[_0x584489(0x2b8)]>=_0x485cb9/0x64){if(_0x309c43[_0x584489(0x201)])_0x4ba914[_0x584489(0x290)](_0x309c43);}else{if(_0x309c43[_0x584489(0x2b8)]<=-_0x485cb9/0x64){if(_0x309c43[_0x584489(0x201)])_0x4ba914[_0x584489(0x290)](_0x309c43);}}}}_0x4ba914[_0x584489(0x234)]>0x0&&placeOrder(_0x4ba914);}function notifyBalance(_0x294cde){const _0x387049=_0x183ff5;let _0x458a67=_0x294cde['portfolio'],_0x131458=_0x294cde[_0x387049(0x19a)],_0xabcedc=[];for(let _0xbcbbec of _0x458a67){if(_0xbcbbec[_0x387049(0x2f7)]!=config['basecoin']){if(_0xbcbbec[_0x387049(0x2b8)]>=_0x131458/0x64){if(_0xbcbbec[_0x387049(0x201)])_0xabcedc['push'](_0xbcbbec);}else{if(_0xbcbbec[_0x387049(0x2b8)]<=-_0x131458/0x64){if(_0xbcbbec[_0x387049(0x201)])_0xabcedc[_0x387049(0x290)](_0xbcbbec);}}}}if(_0xabcedc[_0x387049(0x234)]>0x0){let _0x3baaca=_0xabcedc[_0x387049(0x284)](_0x1b1991=>_0x1b1991[_0x387049(0x2f7)]);_0x3baaca['sort']();let _0x13b249=_0x3baaca['join'](',\x20');if(!lastCoinsToBalance)logHistory(_0x387049(0x1c8),_0x387049(0x267));lastCoinsToBalance=_0x13b249;}}function symbolToCoin(_0x73fb77){const _0x539ee4=_0x183ff5;let _0x55c21f;if(_0x73fb77['includes']('/'+config[_0x539ee4(0x259)]))_0x55c21f=_0x73fb77[_0x539ee4(0x237)]('/'+config['basecoin'],'');if(_0x73fb77[_0x539ee4(0x2d4)](config[_0x539ee4(0x259)]+'/'))_0x55c21f=_0x73fb77[_0x539ee4(0x237)](config[_0x539ee4(0x259)]+'/','');return _0x55c21f;}function setLockOrders(_0x2ae5f3){const _0x11309e=_0x183ff5;lockOrders=_0x2ae5f3,logger[_0x11309e(0x2ff)](_0x11309e(0x1ee)+Object[_0x11309e(0x275)](ORDERS)[lockOrders]);}async function unlockOrders(_0x3ff29e=![]){const _0x455573=_0x183ff5;if(allOrdersPlaced&&lockOrders==ORDERS['LOCKED']){setLockOrders(ORDERS[_0x455573(0x17c)]);if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);if(_0x3ff29e){const _0x33a76e=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x33a76e,setBlockTransactionDetection(![]);}validateOrdersState=_0x455573(0x220),persistOpenOrders([]),setLockOrders(ORDERS['UNLOCKED']);}}async function validateOrders(_0x1f8a2a){const _0x4c49e1=_0x183ff5;if(_0x1f8a2a)validateOrdersState=_0x1f8a2a;logger[_0x4c49e1(0x2ff)](_0x4c49e1(0x332)+validateOrdersState+_0x4c49e1(0x231)+Object[_0x4c49e1(0x275)](ORDERS)[lockOrders]);let _0x4cd4e8=[],_0x1a36e1=config[_0x4c49e1(0x33d)]=='market'?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x4c49e1(0x22b)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x4c49e1(0x2fb)])return;logger[_0x4c49e1(0x2ff)](_0x4c49e1(0x336)+validateOrdersState);for(let _0x3166d7=lastOrders['length']-0x1;_0x3166d7>=0x0;_0x3166d7--){let _0x1aa746=lastOrders[_0x3166d7],_0x13b562=![];_0x1aa746[_0x4c49e1(0x257)]>0x0&&(_0x13b562=!![]),_0x4cd4e8[_0x4c49e1(0x290)](_0x13b562),_0x13b562&&config['ordertype']!=_0x4c49e1(0x32b)&&logHistory(_0x4c49e1(0x1a0),_0x4c49e1(0x2cb)+_0x1aa746[_0x4c49e1(0x287)]+'\x20'+_0x1aa746['side']+'\x20#'+formatResult(_0x1aa746[_0x4c49e1(0x257)],0x8)+'\x20@'+formatResult(_0x1aa746[_0x4c49e1(0x28b)],0x8)),_0x13b562&&lastOrders[_0x4c49e1(0x253)](_0x3166d7,0x1);}persistOpenOrders(lastOrders);const _0x2af8d6=coolingDown?_0x4c49e1(0x30c):_0x4c49e1(0x1d2);if(validateOrdersState==_0x4c49e1(0x220)){validateOrdersState=_0x4c49e1(0x1dc);if(_0x4cd4e8['includes'](![])){}else await unlockOrders();}else{if(validateOrdersState=='ongoing'){if(_0x4cd4e8[_0x4c49e1(0x2d4)](![])){}else await unlockOrders();}else{if(validateOrdersState=='final')_0x4cd4e8[_0x4c49e1(0x2d4)](![])&&(config[_0x4c49e1(0x33d)]==_0x4c49e1(0x32b)?logHistory('success',_0x4c49e1(0x269)+Math['round'](_0x1a36e1*validateOrderInterval/0xea60)+_0x4c49e1(0x1b7)+_0x2af8d6):(await cancelOrders(),logHistory(_0x4c49e1(0x2e6),'Unfilled\x20order(s)\x20canceled\x20after\x20'+Math[_0x4c49e1(0x2a4)](_0x1a36e1*validateOrderInterval/0xea60)+_0x4c49e1(0x1b7)+_0x2af8d6))),await unlockOrders(!![]);else{if(validateOrdersState==_0x4c49e1(0x30e)){if(config[_0x4c49e1(0x33d)]!='market')logHistory(_0x4c49e1(0x2e6),_0x4c49e1(0x2dc)+_0x2af8d6);await unlockOrders(!![]);}}}}}async function cancelOrders(){lastOrders['forEach'](async _0x10bfea=>{const _0x366255=_0x4e8e;try{const _0x2bcb7a=await exchange[_0x366255(0x23f)](_0x10bfea['orderId'],_0x10bfea[_0x366255(0x287)]);}catch(_0x288e0b){if(_0x288e0b[_0x366255(0x25c)]()[_0x366255(0x2d4)]('OrderNotFound')){}else await handleError(_0x288e0b,_0x366255(0x1d9));}});}async function initCoinResults(_0x286b8d){const _0x3dfea9=_0x183ff5;_0x286b8d?logger[_0x3dfea9(0x2ff)](_0x3dfea9(0x217)+_0x286b8d):logger[_0x3dfea9(0x2ff)](_0x3dfea9(0x21b)),config['portfolio'][_0x3dfea9(0x322)](_0x5acb34=>{const _0x1cd051=_0x3dfea9;if(!_0x5acb34[_0x1cd051(0x32a)]&&_0x5acb34[_0x1cd051(0x2f7)]!=config[_0x1cd051(0x259)]){const _0x35a08a=currentCoins[_0x1cd051(0x26d)](_0x20b679=>_0x20b679[_0x1cd051(0x2f7)]==_0x5acb34[_0x1cd051(0x2f7)]),_0x291ec8=gTicker[noslash(_0x5acb34[_0x1cd051(0x287)])];let _0x2873f7=_0x35a08a?_0x35a08a['number']:null,_0x59786c=_0x5acb34[_0x1cd051(0x196)]?0x1/_0x291ec8:_0x291ec8,_0x1c6b4a;config['liquidity'][_0x1cd051(0x322)](_0x4171ab=>{const _0x2a5f67=_0x1cd051;!_0x1c6b4a&&(_0x1c6b4a=_0x4171ab[_0x2a5f67(0x2de)]['find'](_0x14da07=>_0x14da07[_0x2a5f67(0x2f7)]==_0x5acb34[_0x2a5f67(0x2f7)]),_0x1c6b4a&&(_0x2873f7=_0x1c6b4a[_0x2a5f67(0x21d)],_0x59786c=_0x1c6b4a[_0x2a5f67(0x28b)]));});let _0x3e386d=dbCoinResults[_0x1cd051(0x16e)](_0x1cd051(0x190))[_0x1cd051(0x26d)]({'coin':_0x5acb34[_0x1cd051(0x2f7)]})[_0x1cd051(0x183)]();if(!_0x3e386d){const _0x30f8ec={'coin':_0x5acb34[_0x1cd051(0x2f7)],'number':_0x2873f7,'breakeven':_0x59786c,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x1cd051(0x16e)](_0x1cd051(0x190))[_0x1cd051(0x290)](_0x30f8ec)[_0x1cd051(0x2fa)]();}else{if(_0x286b8d&&_0x5acb34['coin']==_0x286b8d){const _0x287463={'coin':_0x5acb34['coin'],'number':_0x2873f7,'breakeven':_0x59786c,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x1cd051(0x16e)]('coins')[_0x1cd051(0x26d)]({'coin':_0x5acb34['coin']})[_0x1cd051(0x304)](_0x287463)['write']();}}}});}async function placeOrder(_0xcec430){const _0x161a98=_0x183ff5,_0x2e071e=config['ordertype']=='market'?'market':_0x161a98(0x2f5);if(lockOrders==ORDERS[_0x161a98(0x292)]&&!coolingDown){setLockOrders(ORDERS[_0x161a98(0x2fb)]);while(transactionDetectionOngoing){await sleep(0x64);}logger['debug'](_0x161a98(0x19d)+_0xcec430['map'](_0x4dfc08=>_0x4dfc08[_0x161a98(0x2f7)])[_0x161a98(0x191)](',\x20')),lastCoinsToBalance='',allOrdersPlaced=![],validateOrdersState=_0x161a98(0x220);let _0x350bca=![];lastOrders=[];const _0x46923d=config['threshold'];for(const _0x5900d5 of _0xcec430){let _0x4a8135,_0x439a36,_0x1a984c,_0x50996c,_0x5beda7,_0x4bc563=_0x5900d5[_0x161a98(0x287)];logger[_0x161a98(0x2ff)](_0x161a98(0x249)+_0x5900d5[_0x161a98(0x2f7)]+'\x20'+_0x5900d5['number']+'\x20'+_0x5900d5[_0x161a98(0x242)]+'\x20'+_0x5900d5[_0x161a98(0x187)]+'%\x20'+_0x5900d5[_0x161a98(0x2d5)]+'%\x20'+(0x64*_0x5900d5[_0x161a98(0x2b8)])[_0x161a98(0x31b)](0x2)+_0x161a98(0x1d4)+_0x46923d[_0x161a98(0x31b)](0x2)+'%)');const _0x2b7354=currentCoins[_0x161a98(0x26d)](_0x1a1eaf=>_0x1a1eaf[_0x161a98(0x2f7)]==_0x5900d5['coin']);_0x2b7354&&(_0x2b7354[_0x161a98(0x16f)]=_0x5900d5[_0x161a98(0x21d)]);try{const _0x262af5=await exchange[_0x161a98(0x1b0)](_0x4bc563);_0x4a8135=_0x5900d5[_0x161a98(0x196)]?0x1/_0x5900d5['last']:_0x5900d5[_0x161a98(0x242)],_0x439a36=_0x262af5[_0x161a98(0x1bc)],_0x1a984c=_0x262af5[_0x161a98(0x2a2)];_0x5900d5['reverse']?(_0x50996c=_0x5900d5[_0x161a98(0x317)]=='buy'?_0x161a98(0x20d):_0x161a98(0x28d),_0x5beda7=Math[_0x161a98(0x31d)](_0x5900d5[_0x161a98(0x2b3)])/_0x4a8135):(_0x50996c=_0x5900d5['side'],_0x5beda7=Math[_0x161a98(0x31d)](_0x5900d5[_0x161a98(0x2b3)]));_0x2e071e==_0x161a98(0x2f5)&&(config[_0x161a98(0x33d)]=='limit-high'&&(_0x4a8135=_0x50996c=='buy'?_0x439a36:_0x1a984c),config[_0x161a98(0x33d)]==_0x161a98(0x1e4)&&(_0x4a8135=_0x50996c=='buy'?_0x1a984c:_0x439a36));_0x5beda7=formatResult(_0x5beda7,0x8),_0x4a8135=formatResult(_0x4a8135,0x8);const _0x38e3b2=_0x50996c=='sell'?config['emojisell']?String['fromCodePoint']('0x'+config[_0x161a98(0x2d8)])+'\x20':'':config['emojibuy']?String[_0x161a98(0x333)]('0x'+config[_0x161a98(0x2e9)])+'\x20':'',_0x3168e9=_0x2e071e==_0x161a98(0x32b)?_0x161a98(0x288):config[_0x161a98(0x33d)]==_0x161a98(0x29d)?_0x161a98(0x31f):_0x161a98(0x20a),_0x748d88=(Math[_0x161a98(0x1f4)](Math['random']()*0x35a4e900)+0x5f5e100)[_0x161a98(0x25c)]();lastOrders[_0x161a98(0x290)]({'customId':_0x748d88,'symbol':_0x4bc563,'coin':_0x5900d5[_0x161a98(0x2f7)],'amount':_0x5beda7,'price':_0x4a8135,'side':_0x50996c,'reverse':_0x5900d5[_0x161a98(0x196)],'filled':0x0});let _0x3a4793;_0x2e071e==_0x161a98(0x32b)?_0x50996c==_0x161a98(0x28d)&&[_0x161a98(0x238),_0x161a98(0x316),_0x161a98(0x1db),_0x161a98(0x2e1),'Huobipro']['includes'](config[_0x161a98(0x1cf)])?_0x3a4793=await exchange['createOrder'](_0x4bc563,_0x2e071e,_0x50996c,_0x5beda7,_0x4a8135):_0x3a4793=await exchange[_0x161a98(0x17e)](_0x4bc563,_0x2e071e,_0x50996c,_0x5beda7,undefined):_0x3a4793=await exchange[_0x161a98(0x17e)](_0x4bc563,_0x2e071e,_0x50996c,_0x5beda7,_0x4a8135);const _0x17d575=lastOrders[_0x161a98(0x234)]-0x1;if(_0x17d575>=0x0&&lastOrders[_0x17d575][_0x161a98(0x22d)]==_0x748d88){lastOrders[_0x17d575][_0x161a98(0x2dd)]=_0x3a4793['id'];if(_0x3a4793['amount'])lastOrders[_0x17d575][_0x161a98(0x241)]=_0x3a4793[_0x161a98(0x241)];if(_0x3a4793[_0x161a98(0x28b)])lastOrders[_0x17d575][_0x161a98(0x28b)]=_0x3a4793['price'];lastOrders[_0x17d575]['fee']=_0x3a4793[_0x161a98(0x2aa)];}if(_0x3a4793['amount'])_0x5beda7=_0x3a4793[_0x161a98(0x241)];if(_0x3a4793[_0x161a98(0x28b)])_0x4a8135=_0x3a4793[_0x161a98(0x28b)];if(_0x2e071e==_0x161a98(0x32b))logHistory('order',''+_0x38e3b2+_0x3168e9+'\x20order:\x20'+_0x4bc563+'\x20'+_0x50996c+'\x20#'+formatResult(_0x5beda7,0x8)+'\x20@'+formatResult(_0x4a8135,0x8));else logHistory(_0x161a98(0x1a0),''+_0x38e3b2+_0x3168e9+'\x20order:\x20'+_0x4bc563+'\x20'+_0x50996c+'\x20#'+formatResult(_0x5beda7,0x8)+'\x20@'+formatResult(_0x4a8135,0x8));logger[_0x161a98(0x2ff)](_0x161a98(0x2d1)+_0x3a4793['id']+_0x161a98(0x318)+_0x748d88);if(config['cooldown']!=0x0){let _0x473b99=null;if(cooldownTracker[_0x161a98(0x234)]==config[_0x161a98(0x327)]-0x1)_0x473b99=cooldownTracker[_0x161a98(0x16a)]();const _0x13700f=getTimeStamp();cooldownTracker[_0x161a98(0x290)](_0x13700f);if(_0x473b99){const _0x1eae7a=fns['differenceInSeconds'](new Date(_0x13700f),new Date(_0x473b99));if(_0x1eae7a<cooldownInterval){logHistory(_0x161a98(0x194),_0x161a98(0x254)+config['cooldown']+_0x161a98(0x325)+cooldownInterval/0x3c+'\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20'+cooldownPeriod/(0xe10*0x3e8)+_0x161a98(0x33f)),coolingDown=!![];break;}}}}catch(_0x3bf50c){if(_0x3bf50c[_0x161a98(0x25c)]()['includes']('MIN_NOTIONAL'))lastOrders=lastOrders[_0x161a98(0x2ce)](_0x598a78=>_0x598a78[_0x161a98(0x287)]!=_0x4bc563),logHistory(_0x161a98(0x194),'Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x4bc563),_0x350bca=!![];else{if(_0x3bf50c[_0x161a98(0x25c)]()[_0x161a98(0x2d4)](_0x161a98(0x1a3)))lastOrders=lastOrders[_0x161a98(0x2ce)](_0x2587c5=>_0x2587c5['symbol']!=_0x4bc563),logHistory(_0x161a98(0x194),'Order\x20amount\x20is\x20invalid:\x20'+_0x4bc563),_0x350bca=!![];else{if(_0x3bf50c['toString']()['includes'](_0x161a98(0x2c4)))lastOrders=lastOrders[_0x161a98(0x2ce)](_0x363701=>_0x363701[_0x161a98(0x287)]!=_0x4bc563),logHistory(_0x161a98(0x194),_0x161a98(0x1b2)+_0x4bc563),logger['debug'](_0x3bf50c),_0x350bca=!![];else _0x3bf50c['toString']()[_0x161a98(0x2d4)](_0x161a98(0x2ab))?(lastOrders=lastOrders['filter'](_0x1fa01a=>_0x1fa01a[_0x161a98(0x287)]!=_0x4bc563),logHistory(_0x161a98(0x194),_0x161a98(0x276)+_0x4bc563),_0x350bca=!![]):(lastOrders=lastOrders['filter'](_0x131980=>_0x131980['symbol']!=_0x4bc563),await handleError(_0x3bf50c,'placeOrder()',_0x4bc563));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x161a98(0x234)]>0x0){const _0x5a5368=config[_0x161a98(0x33d)]==_0x161a98(0x32b)?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x1aa81b=_0x161a98;validateOrders(_0x1aa81b(0x17f));},_0x5a5368);}else unlockOrders();_0x350bca&&config['headless']&&(logHistory(_0x161a98(0x194),_0x161a98(0x19c)+pauseBotMsg),await pauseBot(pauseBotInterval)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x161a98(0x2e6),_0x161a98(0x28f)));}else{if(coolingDown)!config['headless']&&logHistory('error',_0x161a98(0x171));else lockOrders!=ORDERS[_0x161a98(0x292)]&&(!config[_0x161a98(0x1a4)]&&(config[_0x161a98(0x33d)]==_0x161a98(0x32b)?logHistory(_0x161a98(0x194),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated'):logHistory(_0x161a98(0x194),_0x161a98(0x1cb))));}}function persistOpenOrders(_0x171d12){const _0x3498ee=_0x183ff5,_0x163bd7={...config,'openOrders':_0x171d12};let _0x24ce8b=dbConfig[_0x3498ee(0x16e)](_0x3498ee(0x251))[_0x3498ee(0x26d)]({'botID':botID})[_0x3498ee(0x183)]();_0x24ce8b&&dbConfig[_0x3498ee(0x16e)](_0x3498ee(0x251))[_0x3498ee(0x26d)]({'botID':botID})[_0x3498ee(0x304)](_0x163bd7)[_0x3498ee(0x2fa)]();}function restoreOrders(){const _0x4cc3e5=_0x183ff5;let _0x5be484;config[_0x4cc3e5(0x1d5)]&&allOpenOrders[_0x4cc3e5(0x322)](_0x68a22e=>{const _0x8ef54a=_0x4cc3e5,_0x52bf5d=config['openOrders']['find'](_0x4c74aa=>_0x4c74aa['orderId']==_0x68a22e['id']);_0x52bf5d&&(lastOrders[_0x8ef54a(0x290)](_0x52bf5d),_0x5be484=_0x68a22e['timestamp']);});if(lastOrders['length']>0x0){setLockOrders(ORDERS[_0x4cc3e5(0x2fb)]),validateOrdersState='ongoing',allOrdersPlaced=!![];const _0x3f29be=new Date()['getTime'](),_0x30ad26=config['ordertype']==_0x4cc3e5(0x32b)?validateOrderTimeout*0x3c*0x3e8:config[_0x4cc3e5(0x22b)]*0x3c*0x3e8;if(_0x5be484+_0x30ad26>_0x3f29be){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x393895=_0x4cc3e5;validateOrders(_0x393895(0x17f));},_0x5be484+_0x30ad26-_0x3f29be);}else validateOrders(_0x4cc3e5(0x17f));}}async function sendMetricsTelegram(){const _0x26a949=_0x183ff5;if(!coinsLoaded){process[_0x26a949(0x282)]({'telegrammsg':_0x26a949(0x2f8)},_0x478baa=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x24551d='';if(config['showname'])_0x24551d=_0x26a949(0x300)+config['botname']+_0x26a949(0x2c2);else _0x24551d='<b>Bot\x20'+botID+'\x20metrics:</b>\x20\x0a\x0a';const _0x3996fc=config['basecoin'],_0x55ddf0=config[_0x26a949(0x240)],_0x419b1b=getKPIs(_0x26a949(0x259)),_0x1dfbab=getKPIs(_0x26a949(0x240),_0x55ddf0),_0x5e08de=getKPIs(_0x26a949(0x1da)),_0x291594=getKPIs(_0x26a949(0x1f7),_0x55ddf0),_0x57b942=getKPIs(_0x26a949(0x25e)),_0x8ee3df=getKPIs('pnl-fiat',_0x55ddf0);_0x3996fc[_0x26a949(0x2d4)](_0x55ddf0)?(_0x24551d+=_0x26a949(0x199),_0x24551d+='Value\x20'+_0x3996fc+':\x20'+_0x419b1b['value']+'\x20('+_0x419b1b[_0x26a949(0x1bb)]+_0x26a949(0x2be),_0x24551d+=_0x26a949(0x227)+_0x3996fc+':\x20'+_0x5e08de[_0x26a949(0x183)]+'\x20('+_0x5e08de['change']+'%)\x0a',_0x24551d+=_0x26a949(0x200)+_0x3996fc+':\x20'+_0x57b942[_0x26a949(0x183)]+'\x20('+_0x57b942['change']+'%)\x0a',_0x24551d+=_0x26a949(0x18f)):(_0x24551d+=_0x26a949(0x199),_0x24551d+=_0x26a949(0x177)+_0x3996fc+':\x20'+_0x419b1b[_0x26a949(0x183)]+'\x20('+_0x419b1b[_0x26a949(0x1bb)]+_0x26a949(0x2be),_0x24551d+=_0x26a949(0x177)+_0x55ddf0+':\x20'+_0x1dfbab[_0x26a949(0x183)]+'\x20('+_0x1dfbab[_0x26a949(0x1bb)]+_0x26a949(0x2be),_0x24551d+=_0x26a949(0x227)+_0x3996fc+':\x20'+_0x5e08de['value']+'\x20('+_0x5e08de[_0x26a949(0x1bb)]+'%)\x0a',_0x24551d+=_0x26a949(0x227)+_0x55ddf0+':\x20'+_0x291594[_0x26a949(0x183)]+'\x20('+_0x291594[_0x26a949(0x1bb)]+_0x26a949(0x2be),_0x24551d+=_0x26a949(0x200)+_0x3996fc+':\x20'+_0x57b942[_0x26a949(0x183)]+'\x20('+_0x57b942[_0x26a949(0x1bb)]+_0x26a949(0x2be),_0x24551d+='PnL\x20'+_0x55ddf0+':\x20'+_0x8ee3df[_0x26a949(0x183)]+'\x20('+_0x8ee3df[_0x26a949(0x1bb)]+_0x26a949(0x2be),_0x24551d+=_0x26a949(0x18f)),process[_0x26a949(0x282)]({'telegrammsg':_0x24551d},_0x585135=>{});}async function sendPortfolioTelegram(){const _0x42a32e=_0x183ff5;if(!coinsLoaded||!currentCoins[0x0][_0x42a32e(0x187)]){process['send']({'telegrammsg':_0x42a32e(0x2f8)},_0x17929e=>{});return;}let _0x3c6a82='';if(config['showname'])_0x3c6a82=_0x42a32e(0x300)+config[_0x42a32e(0x23d)]+_0x42a32e(0x339);else _0x3c6a82=_0x42a32e(0x1c9)+botID+_0x42a32e(0x339);_0x3c6a82+='<pre>',_0x3c6a82+=_0x42a32e(0x2d7),_0x3c6a82+=_0x42a32e(0x1b9),_0x3c6a82+=_0x42a32e(0x2d7),currentCoins[_0x42a32e(0x322)](_0x612544=>{const _0x1976d8=_0x42a32e;_0x3c6a82+=_0x612544[_0x1976d8(0x2f7)]['padEnd'](0x7)+'|\x20'+formatPad(_0x612544['distribution'],0x2,0x6)+'|\x20'+formatPad(_0x612544[_0x1976d8(0x2d5)],0x2,0x6)+'|\x20'+formatPad(_0x612544[_0x1976d8(0x2b8)]*0x64,0x2,0x6)+'\x0a';}),_0x3c6a82+=_0x42a32e(0x18f),process[_0x42a32e(0x282)]({'telegrammsg':_0x3c6a82},_0x20cf40=>{});}function formatPad(_0x201f01,_0x1c29d8,_0x54dbf5){const _0x4b49aa=_0x183ff5,_0x20486a=formatResultString(_0x201f01,_0x1c29d8);return _0x20486a?_0x20486a[_0x4b49aa(0x264)](_0x54dbf5):''['padStart'](_0x54dbf5);}function logHistory(_0x1d7c5d,_0x4da502,_0x3e40ab=''){const _0x254c63=_0x183ff5;logger[_0x254c63(0x31c)](''+_0x4da502);let _0x3efd9b={'time':getTimeStamp(),'type':_0x1d7c5d,'event':_0x4da502};dbLogs['get'](_0x254c63(0x278))[_0x254c63(0x290)](_0x3efd9b)[_0x254c63(0x2fa)]();if(_0x3e40ab=='')_0x3e40ab=_0x4da502;proxyEmit(_0x254c63(0x2b9),{'log':_0x3efd9b,'summary':_0x3e40ab}),process['send']({'telegram':{..._0x3efd9b,'botname':config[_0x254c63(0x23d)],'showname':config[_0x254c63(0x2a1)]}},_0x2f759a=>{});}function emitHistory(_0x1fb5dc={}){const _0x55ce5f=_0x183ff5;Object['keys'](_0x1fb5dc)['length']==0x0&&(_0x1fb5dc={'type':[_0x55ce5f(0x1a0),_0x55ce5f(0x2b9)],'event':'','page':0x1});if(_0x1fb5dc[_0x55ce5f(0x32f)][_0x55ce5f(0x2d4)](_0x55ce5f(0x2b9)))_0x1fb5dc[_0x55ce5f(0x32f)][_0x55ce5f(0x253)](_0x1fb5dc[_0x55ce5f(0x32f)][_0x55ce5f(0x306)]('event'),0x1,'error',_0x55ce5f(0x1c8),_0x55ce5f(0x2e6));if(dbLogs[_0x55ce5f(0x1a1)](_0x55ce5f(0x278))[_0x55ce5f(0x183)]()){let _0x3fe125=dbLogs['get']('logs')[_0x55ce5f(0x2ce)](_0x6a0a3d=>{const _0x2ca49e=_0x55ce5f;if(_0x1fb5dc[_0x2ca49e(0x32f)][_0x2ca49e(0x234)]==0x0)return![];else return _0x1fb5dc[_0x2ca49e(0x32f)][_0x2ca49e(0x2d4)](_0x6a0a3d[_0x2ca49e(0x32f)]);})['filter'](_0x59a8bc=>{const _0x1fed95=_0x55ce5f;if(_0x1fb5dc[_0x1fed95(0x2b9)]=='')return!![];else return _0x59a8bc[_0x1fed95(0x2b9)][_0x1fed95(0x2d2)]()[_0x1fed95(0x2d4)](_0x1fb5dc[_0x1fed95(0x2b9)][_0x1fed95(0x2d2)]());})[_0x55ce5f(0x197)](_0x55ce5f(0x198)),_0x3b992d=_0x3fe125['value']()[_0x55ce5f(0x234)];_0x3fe125=_0x3fe125[_0x55ce5f(0x196)]()[_0x55ce5f(0x310)]((_0x1fb5dc[_0x55ce5f(0x28c)]-0x1)*logPageSize,_0x1fb5dc[_0x55ce5f(0x28c)]*logPageSize-0x1)[_0x55ce5f(0x196)]()[_0x55ce5f(0x183)](),proxyEmit('event-history',{'logs':_0x3fe125,'total':_0x3b992d});}else proxyEmit(_0x55ce5f(0x2c0),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x29294c){const _0x1a3d4c=_0x183ff5;if(dbLogs[_0x1a3d4c(0x1a1)](_0x1a3d4c(0x278))[_0x1a3d4c(0x183)]()){const _0x1c3c6a=dbLogs[_0x1a3d4c(0x16e)]('logs')['sortBy'](_0x1a3d4c(0x198))[_0x1a3d4c(0x2ce)](_0x6e417e=>{const _0x5d132e=_0x1a3d4c;return _0x6e417e[_0x5d132e(0x32f)]=='order';})[_0x1a3d4c(0x183)]();dbLogs['get'](_0x1a3d4c(0x278))[_0x1a3d4c(0x29b)]()[_0x1a3d4c(0x2fa)](),dbLogs['get'](_0x1a3d4c(0x278))[_0x1a3d4c(0x304)](_0x1c3c6a)[_0x1a3d4c(0x2fa)](),emitHistory(_0x29294c);}}async function pauseBot(_0x8192d6=pauseBotIntervalShort,_0x538ea8,_0x5580d3,_0x4641da=![]){const _0x1ebfb8=_0x183ff5,_0x2e99f1=new Date()[_0x1ebfb8(0x1eb)]();if(!lastErrorShown||_0x2e99f1-lastErrorShown>=_0x8192d6){lastErrorShown=_0x2e99f1;if(!lastBotPause)lastBotPause=_0x2e99f1,consecutivePauses=0x1;else{if(_0x2e99f1-lastBotPause-_0x8192d6<0x5a*0x3e8){consecutivePauses++;if(consecutivePauses>maxPauseRetries){if(_0x4641da){logHistory(_0x1ebfb8(0x194),_0x538ea8+_0x1ebfb8(0x230)),await killBot();return;}else logHistory(_0x1ebfb8(0x194),_0x538ea8+pauseBotMsg),_0x8192d6=pauseBotInterval;}}else consecutivePauses=0x1;lastBotPause=_0x2e99f1;}_0x5580d3?logger[_0x1ebfb8(0x2ff)]('('+consecutivePauses+')\x20'+_0x538ea8+_0x1ebfb8(0x2c3),_0x5580d3):logger[_0x1ebfb8(0x2ff)]('('+consecutivePauses+')\x20'+_0x538ea8);if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);await sleep(_0x8192d6),botPaused=![],_0x8192d6==pauseBotIntervalShort?resumeBot(!![]):resumeBot(![]);}}}async function killBot(){const _0x3664c6=_0x183ff5;botPaused=!![],await sleep(0x3e8),process[_0x3664c6(0x282)]({'stop':_0x3664c6(0x338)},_0x4cdb32=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x4926cc,_0x34f043,_0x570354=![]){const _0x3d39b9=_0x183ff5;if(botPaused)return;let _0x27a528;const _0x201050=config[_0x3d39b9(0x1cf)]||'Exchange';if(_0x34f043)logger[_0x3d39b9(0x2ff)](_0x3d39b9(0x2ba)+_0x34f043);const _0x3eb35b=()=>{const _0x55be7e=_0x3d39b9;loading[_0x55be7e(0x194)]=_0x55be7e(0x1e8),emitLoadingProgress();};if(_0x4926cc[_0x3d39b9(0x25c)]()['includes'](_0x3d39b9(0x2bc)))logHistory(_0x3d39b9(0x194),_0x201050+_0x3d39b9(0x1e2)),_0x3eb35b();else{if(_0x4926cc['toString']()[_0x3d39b9(0x2d4)](_0x3d39b9(0x246)))logHistory(_0x3d39b9(0x194),_0x201050+_0x3d39b9(0x2a8)),_0x3eb35b();else{if(_0x4926cc[_0x3d39b9(0x25c)]()[_0x3d39b9(0x2d4)]('AuthenticationError'))config[_0x3d39b9(0x2ea)]?_0x27a528=_0x201050+'\x20API\x20key,\x20secret\x20or\x20password\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange':_0x27a528=_0x201050+_0x3d39b9(0x283),logHistory(_0x3d39b9(0x194),_0x27a528+_0x3d39b9(0x2ac)),_0x3eb35b();else{if(_0x4926cc['toString']()[_0x3d39b9(0x2d4)]('PermissionDenied'))logHistory('error',_0x201050+'\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)'),_0x3eb35b();else{if(!_0x570354)await handleError(_0x4926cc,null);}}}}}async function handleError(_0xb4a783,_0x35b1a8,_0x570eb6=''){const _0xbae672=_0x183ff5;if(botPaused)return;let _0x402a3f;const _0x49fb30=config[_0xbae672(0x1cf)]||'Exchange';if(_0x35b1a8)logger[_0xbae672(0x2ff)](_0xbae672(0x2ba)+_0x35b1a8);if(_0xb4a783[_0xbae672(0x25c)]()[_0xbae672(0x2d4)](_0xbae672(0x258)))_0x402a3f=_0x49fb30+'\x20blocked\x20API\x20(DDoSProtection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading',await pauseBot(undefined,_0x402a3f,_0xb4a783);else{if(_0xb4a783[_0xbae672(0x25c)]()[_0xbae672(0x2d4)](_0xbae672(0x229)))_0x402a3f=_0x49fb30+'\x20blocked\x20API\x20(RateLimitExceeded)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading',await pauseBot(undefined,_0x402a3f,_0xb4a783);else{if(_0xb4a783[_0xbae672(0x25c)]()['includes'](_0xbae672(0x277))||_0xb4a783[_0xbae672(0x25c)]()[_0xbae672(0x2d4)]('OnMaintenance'))_0x402a3f=_0x49fb30+_0xbae672(0x1a9),await pauseBot(undefined,_0x402a3f,_0xb4a783[_0xbae672(0x25c)]());else{if(_0xb4a783[_0xbae672(0x25c)]()[_0xbae672(0x2d4)](_0xbae672(0x19f)))_0x402a3f=_0x49fb30+_0xbae672(0x252),await pauseBot(undefined,_0x402a3f,_0xb4a783['toString']());else{if(_0xb4a783['toString']()[_0xbae672(0x2d4)](_0xbae672(0x2a3)))_0x402a3f=_0x49fb30+_0xbae672(0x21e),await pauseBot(undefined,_0x402a3f,_0xb4a783['toString']());else{if(_0xb4a783['toString']()[_0xbae672(0x2d2)]()['includes'](_0xbae672(0x213))||_0xb4a783[_0xbae672(0x25c)]()['toLowerCase']()[_0xbae672(0x2d4)](_0xbae672(0x31e)))_0x402a3f=_0xbae672(0x1fc),await pauseBot(undefined,_0x402a3f,_0xb4a783[_0xbae672(0x25c)]());else{if(_0xb4a783[_0xbae672(0x25c)]()[_0xbae672(0x2d4)]('InvalidNonce'))_0x402a3f=_0x49fb30+_0xbae672(0x1c2),await pauseBot(undefined,_0x402a3f,_0xb4a783[_0xbae672(0x25c)]());else{if(_0xb4a783 instanceof ccxt['NetworkError'])_0x402a3f=_0x49fb30+_0xbae672(0x1fb)+_0xb4a783[_0xbae672(0x25c)](),logger['debug'](_0xbae672(0x204),_0xb4a783),await pauseBot(undefined,_0x402a3f,_0xb4a783);else{if(_0xb4a783[_0xbae672(0x25c)]()['includes']('API-key\x20format\x20invalid'))logHistory(_0xbae672(0x194),_0x49fb30+_0xbae672(0x20e)),logHistory('error',_0xbae672(0x192)),await killBot();else{if(_0xb4a783[_0xbae672(0x25c)]()['includes']('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory('error',_0x49fb30+'\x20API\x20secret\x20is\x20invalid'),logHistory(_0xbae672(0x194),_0xbae672(0x192)),await killBot();else{if(_0xb4a783[_0xbae672(0x25c)]()[_0xbae672(0x2d4)](_0xbae672(0x2cd))&&_0xb4a783[_0xbae672(0x25c)]()[_0xbae672(0x2d4)](_0xbae672(0x205)))_0x402a3f=_0x49fb30+'\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)',await pauseBot(undefined,_0x402a3f,_0xb4a783,!![]);else{if(_0xb4a783['toString']()[_0xbae672(0x2d4)]('AuthenticationError'))config[_0xbae672(0x2ea)]?_0x402a3f=_0x49fb30+_0xbae672(0x2b4):_0x402a3f=_0x49fb30+_0xbae672(0x283),logHistory('error',_0x402a3f),logHistory(_0xbae672(0x194),_0xbae672(0x192)),await killBot();else{if(_0xb4a783[_0xbae672(0x25c)]()[_0xbae672(0x2d4)]('PermissionDenied'))logHistory('error',_0x49fb30+_0xbae672(0x184)),logHistory(_0xbae672(0x194),_0xbae672(0x192)),await killBot();else{if(_0xb4a783[_0xbae672(0x25c)]()['includes'](_0xbae672(0x2f9)))logHistory(_0xbae672(0x194),_0xbae672(0x180)+_0x570eb6),logger[_0xbae672(0x2ff)](_0xbae672(0x274),_0xb4a783);else{if(_0xb4a783 instanceof ccxt[_0xbae672(0x1d8)]){_0x402a3f=_0x49fb30+_0xbae672(0x20f)+_0xb4a783[_0xbae672(0x25c)]();if(_0x570eb6)_0x402a3f+=_0xbae672(0x2ec)+_0x570eb6;await pauseBot(undefined,_0x402a3f,_0xb4a783);}else{_0x402a3f=_0xbae672(0x271)+_0xb4a783[_0xbae672(0x25c)]();if(_0x570eb6)_0x402a3f+=_0xbae672(0x2ec)+_0x570eb6;await pauseBot(undefined,_0x402a3f);}}}}}}}}}}}}}}}}function decryptRSA(_0x3d47b3,_0x383388){const _0x55b30f=_0x183ff5,_0x110885=forge[_0x55b30f(0x33c)][_0x55b30f(0x24c)](_0x3d47b3),_0x28166e=_0x110885[_0x55b30f(0x189)](forge[_0x55b30f(0x1ed)]['decode64'](_0x383388),_0x55b30f(0x1e0),{'md':forge['md']['sha256']['create'](),'mgf1':{'md':forge['md'][_0x55b30f(0x245)][_0x55b30f(0x26b)]()}});return _0x28166e;}async function withRetry(_0x534b3b,_0x1aa17f){const _0x28a685=_0x183ff5;let _0xba648e=![],_0x816a91=0x0,_0x43dcb5,_0x33e74f;while(_0x816a91<maxRetries){try{_0x43dcb5=await _0x1aa17f();break;}catch(_0x275283){_0x33e74f=_0x275283,!_0xba648e?(_0xba648e=!![],logger[_0x28a685(0x2ff)](_0x28a685(0x186)+_0x534b3b+':',_0x275283[_0x28a685(0x25c)]())):await sleep(retryInterval);}_0x816a91++;}if(_0x816a91==0x0)return _0x43dcb5;if(_0x816a91>=maxRetries)throw _0x33e74f;else return logger['debug'](_0x28a685(0x1e1)+_0x816a91+'\x20attempts'),_0x43dcb5;}function formatResult(_0x516025,_0x2e1614){const _0x5e7491=_0x183ff5;return parseFloat(_0x516025[_0x5e7491(0x31b)](_0x2e1614));}function formatResultTruncate(_0x268ded,_0x3685a7){const _0x3a3776=_0x183ff5;let _0x252a62=formatResultString(_0x268ded,0xa),_0x17d0d8=_0x252a62[_0x3a3776(0x306)]('.');return _0x17d0d8!=-0x1&&(_0x252a62=_0x252a62['slice'](0x0,_0x17d0d8+_0x3685a7+0x1)),Number(_0x252a62);}function formatResultString(_0x3f423f,_0xfde8df){const _0x2e3cb2=_0x183ff5;let _0x504a7b;if(!(''+_0x3f423f)[_0x2e3cb2(0x2d4)]('e'))_0x504a7b=+(Math[_0x2e3cb2(0x2a4)](_0x3f423f+'e+'+_0xfde8df)+'e-'+_0xfde8df);else{let _0xb202a1=(''+_0x3f423f)[_0x2e3cb2(0x176)]('e'),_0x127522='';+_0xb202a1[0x1]+_0xfde8df>0x0&&(_0x127522='+'),_0x504a7b=+(Math[_0x2e3cb2(0x2a4)](+_0xb202a1[0x0]+'e'+_0x127522+(+_0xb202a1[0x1]+_0xfde8df))+'e-'+_0xfde8df);}return Number(_0x504a7b)[_0x2e3cb2(0x31b)](_0xfde8df);}function getServerTime(){const _0x1b532e=_0x183ff5,_0xa6f5f1=new Date();return _0xa6f5f1[_0x1b532e(0x22c)]()+'/'+(_0xa6f5f1['getMonth']()+0x1)[_0x1b532e(0x25c)]()[_0x1b532e(0x264)](0x2,'0')+'/'+_0xa6f5f1[_0x1b532e(0x18d)]()['toString']()['padStart'](0x2,'0')+'\x20'+_0xa6f5f1['getHours']()[_0x1b532e(0x25c)]()[_0x1b532e(0x264)](0x2,'0')+':'+_0xa6f5f1['getMinutes']()[_0x1b532e(0x25c)]()[_0x1b532e(0x264)](0x2,'0')+':'+_0xa6f5f1[_0x1b532e(0x30a)]()[_0x1b532e(0x25c)]()[_0x1b532e(0x264)](0x2,'0');}function getTimeStamp(){const _0x3e9803=_0x183ff5,_0x27d6ff=shiftedTime();return _0x27d6ff[_0x3e9803(0x22c)]()+'/'+(_0x27d6ff[_0x3e9803(0x179)]()+0x1)[_0x3e9803(0x25c)]()[_0x3e9803(0x264)](0x2,'0')+'/'+_0x27d6ff[_0x3e9803(0x18d)]()[_0x3e9803(0x25c)]()[_0x3e9803(0x264)](0x2,'0')+'\x20'+_0x27d6ff['getHours']()[_0x3e9803(0x25c)]()['padStart'](0x2,'0')+':'+_0x27d6ff[_0x3e9803(0x2fe)]()['toString']()[_0x3e9803(0x264)](0x2,'0')+':'+_0x27d6ff['getSeconds']()[_0x3e9803(0x25c)]()[_0x3e9803(0x264)](0x2,'0');}function getDate(){const _0xc7bfc5=_0x183ff5,_0x172c1e=shiftedTime();return _0x172c1e[_0xc7bfc5(0x22c)]()+'/'+(_0x172c1e[_0xc7bfc5(0x179)]()+0x1)[_0xc7bfc5(0x25c)]()[_0xc7bfc5(0x264)](0x2,'0')+'/'+_0x172c1e[_0xc7bfc5(0x18d)]()[_0xc7bfc5(0x25c)]()[_0xc7bfc5(0x264)](0x2,'0');}function getHour(){const _0x20db93=_0x183ff5,_0x341a8e=shiftedTime();return _0x341a8e[_0x20db93(0x308)]()[_0x20db93(0x25c)]()[_0x20db93(0x264)](0x2,'0');}function sleep(_0x12ff41){return new Promise(_0x8d2b7a=>setTimeout(_0x8d2b7a,_0x12ff41));}function shiftedTime(){const _0x132b68=_0x183ff5,_0x19de6a=new Date();let _0x7cc3c2=_0x19de6a;if(config&&config[_0x132b68(0x1dd)]!==0x0)_0x7cc3c2=fns[_0x132b68(0x289)](_0x19de6a,{'hours':config['timeshift']});return _0x7cc3c2;}function timer(_0x3232dc){const _0x1ac7df=_0x183ff5,_0x19f2d5=new Date();!lasttime?console[_0x1ac7df(0x296)](getTimeStamp()+_0x1ac7df(0x33e),_0x3232dc,_0x19f2d5):console[_0x1ac7df(0x296)](getTimeStamp()+_0x1ac7df(0x33e),_0x3232dc,(_0x19f2d5-lasttime)/0x3e8),lasttime=_0x19f2d5;}