const _0x4a79e6=_0x3714;(function(_0x1334b5,_0x5c86d3){const _0x32cd31=_0x3714,_0x5dd212=_0x1334b5();while(!![]){try{const _0x45af4f=-parseInt(_0x32cd31(0x15d))/0x1+parseInt(_0x32cd31(0x18e))/0x2+parseInt(_0x32cd31(0x16c))/0x3*(parseInt(_0x32cd31(0x215))/0x4)+parseInt(_0x32cd31(0x22e))/0x5*(parseInt(_0x32cd31(0x1ad))/0x6)+parseInt(_0x32cd31(0x244))/0x7+parseInt(_0x32cd31(0x1d0))/0x8+-parseInt(_0x32cd31(0x25f))/0x9*(parseInt(_0x32cd31(0x17e))/0xa);if(_0x45af4f===_0x5c86d3)break;else _0x5dd212['push'](_0x5dd212['shift']());}catch(_0x42090a){_0x5dd212['push'](_0x5dd212['shift']());}}}(_0x52ac,0xdceae));const _0x595085=function(){let _0x54e6c6=!![];return function(_0x45d0e0,_0x505c31){const _0x1f2c5c=_0x54e6c6?function(){const _0x3e04d6=_0x3714;if(_0x505c31){const _0xd4bfe0=_0x505c31[_0x3e04d6(0x1bd)](_0x45d0e0,arguments);return _0x505c31=null,_0xd4bfe0;}}:function(){};return _0x54e6c6=![],_0x1f2c5c;};}(),_0x132dfb=_0x595085(this,function(){const _0x16b1d7=_0x3714;return _0x132dfb['toString']()[_0x16b1d7(0x241)]('(((.+)+)+)+$')[_0x16b1d7(0x10c)]()[_0x16b1d7(0x1bc)](_0x132dfb)[_0x16b1d7(0x241)](_0x16b1d7(0x1cb));});_0x132dfb();'use strict';const ccxt=require(_0x4a79e6(0x190)),low=require(_0x4a79e6(0x19f)),FileSync=require(_0x4a79e6(0x2a9)),fs=require('fs'),fns=require(_0x4a79e6(0x2a4)),forge=require(_0x4a79e6(0x1f1)),util=require(_0x4a79e6(0x109)),argv=require(_0x4a79e6(0x21b))(process[_0x4a79e6(0x1b0)]['slice'](0x2))[_0x4a79e6(0x1b0)],path=require(_0x4a79e6(0x2b5)),axios=require(_0x4a79e6(0x21e));let exchange,gTicker={},gChange={};const usdBasecoins=[_0x4a79e6(0x233),'BUSD','TUSD',_0x4a79e6(0x1ea),_0x4a79e6(0x2ae),_0x4a79e6(0x25c)],excludedExchanges=['bitmex'],debugging=argv['d']||![];let pnlGenerationNeeded=argv['r']||![],config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x4a79e6(0x1bb)]({'LOCKED':0x0,'UNLOCKING':0x1,'UNLOCKED':0x2});let lockOrders=ORDERS[_0x4a79e6(0x25b)],validateOrdersState,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotIntervalShort=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0x4a79e6(0x175)+pauseBotInterval/0xea60+_0x4a79e6(0x275),maxPauseRetries=0x6,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,watchTransactionsInterval=0x3c*0x3e8,schedulerInterval=0x3c*0x3c*0x3e8,retryInterval=0x3e8,maxRetries=0x5,logPageSize=0x14,defaultFee=0.003;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidOrdersInitialTimeout,pidOrdersTimeout,botPaused=![],transactionDetectionOngoing=![],lastCoinsToBalance='',insufficientFundsWarningSent=[],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x5dc,balanceUpdateRetries=0x5;let enableFiatToggle;const serverversion=require('./version.json')[_0x4a79e6(0x141)],environment=require(_0x4a79e6(0x27b))[_0x4a79e6(0x26c)]||_0x4a79e6(0x1db),botID=process[_0x4a79e6(0x1b0)][0x2]||'001',pattern=/^[0-9]{3}$/;!pattern['test'](botID)&&(console['log'](_0x4a79e6(0x10d)+botID+_0x4a79e6(0x116)),killBot());const userID=process[_0x4a79e6(0x1b0)][0x3]||'',configpath=userID?_0x4a79e6(0x299)+userID+'/':_0x4a79e6(0x299),logspath=userID?_0x4a79e6(0x171)+userID+'/':_0x4a79e6(0x171),loggerfile=fs[_0x4a79e6(0x2a7)](logspath+'/output-000.log',{'flags':'a'});!fs[_0x4a79e6(0x130)](configpath)&&fs[_0x4a79e6(0x2a5)](configpath);!fs[_0x4a79e6(0x130)](logspath)&&fs[_0x4a79e6(0x2a5)](logspath);const configfile=configpath+'bot-'+botID+'-config.json',logfile=configpath+_0x4a79e6(0x147)+botID+_0x4a79e6(0x194),performancefile=configpath+_0x4a79e6(0x147)+botID+_0x4a79e6(0x149),coinresultsfile=configpath+'bot-'+botID+_0x4a79e6(0x153),settingsfile=configpath+_0x4a79e6(0x261),securefile=configpath+'bb-secure.json',configbackuppath=configpath+'/backup/',adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x4a79e6(0x145)]({'logs':[],'version':serverversion})[_0x4a79e6(0x264)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x4a79e6(0x145)]({'data':[],'version':serverversion})[_0x4a79e6(0x264)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x4a79e6(0x145)]({'bot':[],'version':serverversion})[_0x4a79e6(0x264)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x4a79e6(0x145)]({'coins':{},'version':serverversion})['write']();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0,settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x320307=>{const _0x2b646a=_0x4a79e6;console[_0x2b646a(0x114)](_0x320307);},'simple':_0x37dbe6=>{const _0x157e88=_0x4a79e6;console[_0x157e88(0x114)](_0x37dbe6),loggerfile['write'](util['format'](_0x37dbe6)+'\x0a');},'full':async(_0x1f5c1e,_0x5a49b0='')=>{const _0x887609=_0x4a79e6;let _0x5d556e;if(config[_0x887609(0x25a)])_0x5d556e=getTimeStamp()+':\x20'+config[_0x887609(0x209)]+'\x20>\x20'+_0x1f5c1e;else _0x5d556e=getTimeStamp()+_0x887609(0x14e)+botID+_0x887609(0x1ab)+_0x1f5c1e;console[_0x887609(0x114)](_0x5d556e),loggerfile[_0x887609(0x264)](util[_0x887609(0x15c)](_0x5d556e)+'\x0a'),_0x5a49b0&&(console['log'](_0x5a49b0),loggerfile[_0x887609(0x264)](util[_0x887609(0x15c)](_0x5a49b0)+'\x0a'));},'debug':async(_0x242606,_0x7376e1='')=>{const _0x23aba2=_0x4a79e6;let _0x3b9a36;if(config[_0x23aba2(0x25a)])_0x3b9a36=getTimeStamp()+':\x20'+config['botname']+_0x23aba2(0x24f)+_0x242606;else _0x3b9a36=getTimeStamp()+':\x20Bot\x20'+botID+_0x23aba2(0x24f)+_0x242606;if(debugging)console[_0x23aba2(0x114)](_0x3b9a36);loggerfile[_0x23aba2(0x264)](util['format'](_0x3b9a36)+'\x0a');if(_0x7376e1){if(debugging)console[_0x23aba2(0x114)](_0x7376e1);loggerfile[_0x23aba2(0x264)](util[_0x23aba2(0x15c)](_0x7376e1)+'\x0a');}}};process['on'](_0x4a79e6(0x226),function(_0x38051a){handleError(_0x38051a['stack'],'uncaughtException');});settings[_0x4a79e6(0x227)]!=config[_0x4a79e6(0x227)]&&updateTimeshift(settings[_0x4a79e6(0x227)]);settings[_0x4a79e6(0xf0)]!=config['onepagemode']&&updateOnepagemode(settings[_0x4a79e6(0xf0)]);(settings[_0x4a79e6(0x143)]&&!config[_0x4a79e6(0x143)]||!settings[_0x4a79e6(0x143)]&&config['marketcapApi'])&&updateMarketcapApi(settings['marketcapApi']);process[_0x4a79e6(0x123)]({'started':'running'},_0x2a7968=>{}),initializeProcessListeners();function proxyEmit(_0x3debf9,_0x57cd3a=null){process['send']({'function':_0x3debf9,'args':_0x57cd3a},_0x2c563c=>{});}function initializeProcessListeners(){const _0x6b9b17=_0x4a79e6;process['on'](_0x6b9b17(0x249),_0x15bb9a=>{const _0x4cc32e=_0x6b9b17;switch(Object[_0x4cc32e(0x295)](_0x15bb9a)[0x0]){case'timeshift':_0x15bb9a[_0x4cc32e(0x227)]!=undefined&&(settings['timeshift']=_0x15bb9a[_0x4cc32e(0x227)],updateTimeshift(settings['timeshift']));break;case _0x4cc32e(0xf0):_0x15bb9a[_0x4cc32e(0xf0)]!=undefined&&(settings[_0x4cc32e(0xf0)]=_0x15bb9a[_0x4cc32e(0xf0)],updateOnepagemode(settings['onepagemode']));break;case _0x4cc32e(0x143):_0x15bb9a[_0x4cc32e(0x143)]!=undefined&&(settings[_0x4cc32e(0x143)]=_0x15bb9a[_0x4cc32e(0x143)],updateMarketcapApi(settings[_0x4cc32e(0x143)]));break;case _0x4cc32e(0x204):_0x15bb9a['bots']!=undefined&&(bots=JSON[_0x4cc32e(0x297)](_0x15bb9a[_0x4cc32e(0x204)]),proxyEmit(_0x4cc32e(0x204),bots));break;case _0x4cc32e(0x108):switch(_0x15bb9a[_0x4cc32e(0x108)]){case _0x4cc32e(0x12d):initclient();break;case _0x4cc32e(0x1a6):toggleBotMode();break;case _0x4cc32e(0x18a):emitHistory(_0x15bb9a[_0x4cc32e(0x10b)]);break;case _0x4cc32e(0x202):deleteHistoryAlerts(_0x15bb9a[_0x4cc32e(0x10b)]);break;case _0x4cc32e(0x105):getPortfolio(_0x15bb9a[_0x4cc32e(0x10b)]);break;case'storeConfiguration':storeConfiguration(_0x15bb9a[_0x4cc32e(0x10b)]);break;case'storeHeadless':storeHeadless(_0x15bb9a[_0x4cc32e(0x10b)]);break;case _0x4cc32e(0x1f8):storeFiat(_0x15bb9a[_0x4cc32e(0x10b)]);break;case _0x4cc32e(0x159):resetHistory();break;case _0x4cc32e(0x1de):getStartingBalances(getNormalizedPerformance());break;case _0x4cc32e(0x13b):placeOrder(_0x15bb9a[_0x4cc32e(0x10b)]);break;case _0x4cc32e(0x1c1):cancelLoading();break;case _0x4cc32e(0x20c):showConfig();break;case _0x4cc32e(0x237):sendMetricsTelegram();break;case'sendPortfolioTelegram':sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x46201e=![]){const _0x51bba8=_0x4a79e6;logger[_0x51bba8(0x243)](_0x51bba8(0x1e5)+(_0x46201e?_0x51bba8(0x20a):_0x51bba8(0x250))+_0x51bba8(0x29c)+config[_0x51bba8(0xfc)]);if(pidBalances)clearTimeout(pidBalances);lastCoinsToBalance='',insufficientFundsWarningSent=[],coinsLoaded=![];if(config[_0x51bba8(0x17f)]!=''&&config['apiKey']!=_0x51bba8(0x1f4)){loadingProgress=0x0;if(_0x46201e){await initExchange();const _0x5099f2=await testAPI();if(!_0x5099f2)return;await loadSymbols(),loadingProgress=0x1,setStableCoins(),proxyEmit(_0x51bba8(0x1fe),emittedConfiguration()),initialPerformanceStored=![];}const _0x1921f0=await getCoins();[currentCoins,currentCoinsAll]=_0x1921f0,setBlockTransactionDetection(![]),startScheduler(),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x51bba8(0x243)]('Loading\x20completed'),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x51bba8(0x229)]==0x0&&allOpenOrders['length']!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(pnlGenerationNeeded)await generatePnL();}}async function resumeBot(_0x39e80b=![]){const _0x596a25=_0x4a79e6;logger[_0x596a25(0x243)](_0x596a25(0x289)+(_0x39e80b?_0x596a25(0x132):_0x596a25(0x207))+_0x596a25(0x293)+config[_0x596a25(0xfc)]);if(pidBalances)clearTimeout(pidBalances);if(_0x39e80b){getBalances();return;}coinsLoaded=![];if(config['apiKey']!=''&&config[_0x596a25(0x17f)]!=_0x596a25(0x1f4)){loadingProgress=0x1;const _0x5ad006=await getCoins();[currentCoins,currentCoinsAll]=_0x5ad006,setBlockTransactionDetection(![]),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger['debug'](_0x596a25(0x196)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x596a25(0x229)]==0x0&&allOpenOrders[_0x596a25(0x229)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();}}async function getMarketCap(_0x8c2dd8){const _0x25c605=_0x4a79e6;let _0x770238=![];if(_0x8c2dd8)_0x770238=!![];const _0x2f944e=_0x770238?_0x8c2dd8:currentCoins,_0x4c04ae=_0x2f944e[_0x25c605(0x20d)](_0x1fb9f5=>_0x1fb9f5['coin']);if(!config[_0x25c605(0x143)]||!_0x770238&&!config[_0x25c605(0x29e)]||_0x4c04ae[_0x25c605(0x229)]==0x0)return;let _0x360c03=null;try{_0x360c03=await axios[_0x25c605(0x26f)](_0x25c605(0x198),{'headers':{'X-CMC_PRO_API_KEY':settings[_0x25c605(0x143)]},'params':{'symbol':_0x4c04ae[_0x25c605(0x10c)]()}});}catch(_0x5b60b0){_0x360c03=null,_0x5b60b0[_0x25c605(0x10c)]()[_0x25c605(0x168)](_0x25c605(0xf3))?(config[_0x25c605(0x143)]=![],updateConfig(),proxyEmit(_0x25c605(0x1fe),emittedConfiguration()),logHistory('error','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager')):(logHistory(_0x25c605(0x122),'CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20trying\x20again\x20in\x20'+schedulerInterval/(0x3c*0x3e8)+_0x25c605(0x275)),logger['debug']('Error\x20details:',_0x5b60b0[_0x25c605(0x10c)]()+_0x25c605(0x1d2)+_0x5b60b0['code']));}let _0x4f15c1=!![];if(_0x360c03){let _0x14ff11=0x0;const _0x204caf=_0x360c03[_0x25c605(0x232)];_0x4c04ae[_0x25c605(0x1d8)](_0xcefdc0=>{const _0x5bb872=_0x25c605;if(_0x204caf[_0x5bb872(0x232)][_0xcefdc0][0x0]&&_0x204caf[_0x5bb872(0x232)][_0xcefdc0][0x0][_0x5bb872(0x20b)][_0x5bb872(0x233)][_0x5bb872(0xf1)])_0x14ff11+=_0x204caf[_0x5bb872(0x232)][_0xcefdc0][0x0][_0x5bb872(0x20b)][_0x5bb872(0x233)][_0x5bb872(0xf1)];else{if(![_0x5bb872(0x1a3),'USD'][_0x5bb872(0x168)](_0xcefdc0)){if(_0x770238)logHistory(_0x5bb872(0x122),_0x5bb872(0x1ca)+_0xcefdc0+'\x20-\x20go\x20back\x20and\x20try\x20again');else{const _0x3661a8=config[_0x5bb872(0x15a)][_0x5bb872(0x1a0)](_0x3f852b=>_0x3f852b[_0x5bb872(0x252)]==_0xcefdc0);_0x3661a8&&!_0x3661a8['excluded']&&_0x3661a8[_0x5bb872(0x285)]==-0x1&&(_0x4f15c1=![],logHistory('error','CoinMarketCap\x20data\x20could\x20not\x20be\x20updated\x20-\x20will\x20try\x20again\x20in\x201\x20hour'),logger[_0x5bb872(0x243)](_0x5bb872(0x1ca)+_0xcefdc0));}}}});if(!_0x4f15c1)return;_0x4c04ae['forEach'](_0x5246b9=>{const _0x532cd2=_0x25c605,_0x572b06=_0x204caf[_0x532cd2(0x232)][_0x5246b9][0x0]?_0x204caf[_0x532cd2(0x232)][_0x5246b9][0x0][_0x532cd2(0x20b)][_0x532cd2(0x233)][_0x532cd2(0xf1)]:0x0;if(_0x770238){const _0x1ce276=_0x8c2dd8[_0x532cd2(0x1a0)](_0x1aacc1=>_0x1aacc1['coin']==_0x5246b9);_0x1ce276&&(_0x1ce276[_0x532cd2(0x278)]=_0x572b06);}else{const _0x4032c0=currentCoins['find'](_0x32202d=>_0x32202d[_0x532cd2(0x252)]==_0x5246b9);_0x4032c0&&(_0x4032c0[_0x532cd2(0x278)]=_0x572b06);const _0x2f44c3=currentCoinsAll[_0x532cd2(0x1a0)](_0x2c1834=>_0x2c1834[_0x532cd2(0x252)]==_0x5246b9);_0x2f44c3&&(_0x2f44c3[_0x532cd2(0x278)]=_0x572b06);}}),!_0x770238&&updateTargetDistribution();}}function updateTargetDistribution(){const _0x2fa659=_0x4a79e6,_0x4b5179=0x2;let _0x6701df=0x0,_0x5b9ff2=0x0,_0x35e030=0x0,_0x42519f=0x0,_0x3f760d=0x0;config[_0x2fa659(0x15a)][_0x2fa659(0x1d8)](_0x276e6b=>{const _0x3a5115=_0x2fa659;if(!_0x276e6b[_0x3a5115(0x23a)]){_0x35e030++,_0x6701df+=_0x276e6b[_0x3a5115(0x285)];if(_0x276e6b['slider']===-0x1){_0x6701df++;const _0x1a0978=currentCoinsAll[_0x3a5115(0x1a0)](_0x29fda6=>_0x29fda6[_0x3a5115(0x252)]==_0x276e6b[_0x3a5115(0x252)]);_0x1a0978&&(_0x42519f+=_0x1a0978['marketcap'],_0x3f760d+=Math[_0x3a5115(0x225)](_0x1a0978[_0x3a5115(0x278)]));}if(_0x276e6b[_0x3a5115(0x285)]!==-0x1)_0x5b9ff2++;}});let _0x4ded5e;const _0x13c370=0x64-_0x6701df,_0x44e8fc=_0x35e030-_0x5b9ff2;_0x4ded5e=_0x44e8fc===0x0?_0x6701df:Math['max'](0x64,_0x6701df),config[_0x2fa659(0x15a)][_0x2fa659(0x1d8)](_0x53e2ec=>{const _0x1a7079=_0x2fa659,_0x4492c5=currentCoinsAll[_0x1a7079(0x1a0)](_0x4bb180=>_0x4bb180[_0x1a7079(0x252)]==_0x53e2ec['coin']);_0x4492c5&&(_0x53e2ec[_0x1a7079(0x278)]=_0x4492c5['marketcap']);if(!_0x53e2ec[_0x1a7079(0x23a)]){if(_0x4ded5e<=0x64){if(_0x53e2ec[_0x1a7079(0x285)]===-0x1){if(_0x42519f!==0x0&&config[_0x1a7079(0x29e)]){if(_0x4492c5){if(config[_0x1a7079(0x29e)]==_0x1a7079(0x278))_0x53e2ec[_0x1a7079(0x1da)]=(_0x13c370/(_0x42519f/_0x4492c5['marketcap']))[_0x1a7079(0x24a)](_0x4b5179);else config[_0x1a7079(0x29e)]==_0x1a7079(0xee)&&(_0x53e2ec[_0x1a7079(0x1da)]=(_0x13c370/(_0x3f760d/Math[_0x1a7079(0x225)](_0x4492c5[_0x1a7079(0x278)])))[_0x1a7079(0x24a)](_0x4b5179));}}}}}}),updateConfig();}function updateConfig(){const _0x159790=_0x4a79e6;let _0x54d682=dbConfig['get']('bot')['find']({'botID':botID})[_0x159790(0x19b)]();_0x54d682&&dbConfig[_0x159790(0x26f)](_0x159790(0x206))['find']({'botID':botID})[_0x159790(0x21d)](config)[_0x159790(0x264)]();}function logMemory(){const _0x135ce6=_0x4a79e6;if(environment!='staging')return;const _0x52f183=process[_0x135ce6(0x176)]()[_0x135ce6(0xfd)]/0x400/0x400;logger['debug'](_0x135ce6(0x1f2)+process[_0x135ce6(0x14f)]+'\x20uses\x20'+formatResult(_0x52f183,0x1)+_0x135ce6(0x268));}async function startScheduler(){const _0x4ffd5d=_0x4a79e6,_0x433eaf=shiftedTime()[_0x4ffd5d(0x2b3)]();getMarketCap(),loadSymbols(),_0x433eaf==0x1&&logMemory(),await sleep(schedulerInterval),startScheduler();}async function restartBot(_0x3fa60c=![]){const _0x5be6b0=_0x4a79e6;logger[_0x5be6b0(0x243)](_0x5be6b0(0xf2));if(!_0x3fa60c)while(lockOrders!=ORDERS[_0x5be6b0(0x25b)]||coolingDown){await sleep(0x3e8);}process[_0x5be6b0(0x123)]({'stop':'restart'},_0xb06b60=>{});}async function initExchange(_0x510e50=config[_0x4a79e6(0xfc)],_0x406cec=config[_0x4a79e6(0x17f)],_0x34315a=config[_0x4a79e6(0x16a)],_0xda889b=config[_0x4a79e6(0x1a4)],_0x327171=config[_0x4a79e6(0x195)]){const _0x551195=_0x4a79e6;if(exchange){logger[_0x551195(0x243)](_0x551195(0x254));return;}logger[_0x551195(0x243)]('Initializing\x20exchange');!supportedExchanges()['includes'](_0x510e50)&&(logHistory(_0x551195(0x122),'Balance\x20Bot\x20does\x20not\x20support\x20the\x20'+_0x510e50+_0x551195(0x1c8)),killBot());const _0x29979a=ccxt['pro'][_0x510e50[_0x551195(0x124)]()];exchange=new _0x29979a({'apiKey':_0x406cec,'secret':_0x34315a,'options':{'defaultType':_0x551195(0x1e1)}});if(_0xda889b)exchange['password']=_0xda889b;if(exchange['has'][_0x551195(0x195)])exchange[_0x551195(0x265)](_0x327171);}function updateExchange(_0x2f70c9,_0x492256,_0x3aa9e0=null){const _0x268e3a=_0x4a79e6;exchange[_0x268e3a(0x17f)]=_0x2f70c9,exchange[_0x268e3a(0x211)]=_0x492256,exchange['password']=_0x3aa9e0,logger[_0x268e3a(0x243)]('Updating\x20API\x20key\x20(not\x20saved\x20in\x20config\x20file\x20yet)');}function setStableCoins(){const _0x3f69ef=_0x4a79e6;let _0x3f09d2=config['basecoin']==_0x3f69ef(0x1dc)?_0x3f69ef(0x1dc):config[_0x3f69ef(0x192)]==_0x3f69ef(0x24c)?_0x3f69ef(0x24c):_0x3f69ef(0x13f),_0x44aa4c=allSymbols[_0x3f69ef(0x168)](_0x3f09d2+_0x3f69ef(0x1ba))?_0x3f69ef(0x233):allSymbols[_0x3f69ef(0x168)](_0x3f09d2+_0x3f69ef(0x127))?_0x3f69ef(0x1ea):_0x3f69ef(0x1a3),_0x485ac6=allSymbols[_0x3f69ef(0x168)](_0x3f09d2+_0x3f69ef(0x13c))?_0x3f69ef(0x1a3):_0x44aa4c;enableFiatToggle=!![],_0x44aa4c==_0x3f69ef(0x1a3)&&(enableFiatToggle=![],storeFiat('EUR')),_0x485ac6!='EUR'&&(enableFiatToggle=![],storeFiat(_0x3f69ef(0x233))),stablecoins={'eur':{'coin':''+_0x3f09d2+_0x485ac6,'symbol':_0x3f09d2+'/'+_0x485ac6},'usd':{'coin':''+_0x3f09d2+_0x44aa4c,'symbol':_0x3f09d2+'/'+_0x44aa4c}};}async function initwsCcxt(){const _0x182eda=_0x4a79e6;initCycle++;const _0x59748a=initCycle;let _0x139e75=[];config[_0x182eda(0x15a)][_0x182eda(0x1d8)](_0x4e07c2=>{const _0x378b19=_0x182eda;if(!_0x4e07c2[_0x378b19(0x23a)]&&_0x4e07c2[_0x378b19(0x252)]!=config['basecoin'])_0x139e75[_0x378b19(0x134)](_0x4e07c2[_0x378b19(0x20f)]);});if(!_0x139e75['includes'](stablecoins['eur'][_0x182eda(0x20f)]))_0x139e75[_0x182eda(0x134)](stablecoins['eur'][_0x182eda(0x20f)]);if(!_0x139e75[_0x182eda(0x168)](stablecoins[_0x182eda(0x166)]['symbol']))_0x139e75[_0x182eda(0x134)](stablecoins[_0x182eda(0x166)][_0x182eda(0x20f)]);loadCoins(_0x139e75),_0x139e75=validateSymbols(_0x139e75);const _0x1d5bd1=async _0x3fdafb=>{const _0xe4798f=_0x182eda;let _0x10a71c;try{const _0x3ff9f8=await getTickers(_0x3fdafb);Object['entries'](_0x3ff9f8)[_0xe4798f(0x1d8)](_0x5865d7=>{const _0x3ee7ff=_0xe4798f;_0x10a71c=_0x5865d7[0x1]['symbol'],gTicker[noslash(_0x10a71c)]=_0x5865d7[0x1][_0x3ee7ff(0x201)],gChange[_0x10a71c]=_0x5865d7[0x1]['percentage'];});}catch(_0x3aac37){await handleError(_0x3aac37,'initTickers()',_0x10a71c);}},_0x3a5720=async _0x6b574a=>{const _0x54f6bb=_0x182eda;while(initCycle==_0x59748a){if(!botPaused)try{const _0x24791f=await exchange[_0x54f6bb(0x255)](_0x6b574a);gTicker[noslash(_0x24791f[0x0][_0x54f6bb(0x20f)])]=_0x24791f[0x0][_0x54f6bb(0x18d)];}catch(_0x1f0204){if(!exchangeStopped)await handleError(_0x1f0204,'watchTrades()',_0x6b574a);}else await sleep(0x64);}},_0x4414d2=async _0xaeebbc=>{const _0x556ec8=_0x182eda;while(initCycle==_0x59748a){if(!botPaused)try{const _0x4cf99d=await exchange['watchTradesForSymbols'](_0xaeebbc),_0x571d51=_0x4cf99d[_0x556ec8(0x150)]();gTicker[noslash(_0x571d51[_0x556ec8(0x20f)])]=_0x571d51['price'];}catch(_0x38b507){if(!exchangeStopped)await handleError(_0x38b507,_0x556ec8(0x1f9),_0xaeebbc[_0x556ec8(0x10c)]());}else await sleep(0x64);}},_0x5257bd=async _0x33059b=>{const _0x12e30c=_0x182eda;while(initCycle==_0x59748a){if(!botPaused){let _0x3bf613;try{await sleep(0x3c*0x3e8);const _0x3b737a=await getTickers(_0x33059b);Object['entries'](_0x3b737a)['forEach'](_0x4ceb07=>{const _0x189f76=_0x3714;_0x3bf613=_0x4ceb07[0x1]['symbol'],gChange[_0x3bf613]=_0x4ceb07[0x1][_0x189f76(0xff)];});}catch(_0x18c079){if(!exchangeStopped)await handleError(_0x18c079,_0x12e30c(0x1b4),_0x3bf613);}}else await sleep(0x64);}},_0x30e2c2=async _0x12dc38=>{const _0x2bd703=_0x182eda;while(initCycle==_0x59748a){if(!botPaused)try{const _0x21a7bf=await exchange['watchOrders'](_0x12dc38);initCycle==_0x59748a&&_0x21a7bf[_0x2bd703(0x1d8)](_0x549d36=>{updateNumberCoinsCcxt(_0x549d36);});}catch(_0x3d0124){if(!exchangeStopped)await handleError(_0x3d0124,_0x2bd703(0x1f3));}else await sleep(0x64);}};_0x1d5bd1(_0x139e75),_0x5257bd(_0x139e75),exchange[_0x182eda(0x228)][_0x182eda(0x151)]&&!(config[_0x182eda(0xfc)]==_0x182eda(0x120)&&_0x139e75['length']>0xa)?_0x4414d2(_0x139e75):_0x139e75[_0x182eda(0x1d8)](_0x5dc33d=>{_0x3a5720(_0x5dc33d);}),_0x139e75[_0x182eda(0x1d8)](_0x11333f=>{_0x30e2c2(_0x11333f);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x5ec5a8){const _0xb567d5=_0x4a79e6;let _0x562f63={};try{if(config[_0xb567d5(0xfc)]!='Cryptocom')_0x562f63=await exchange[_0xb567d5(0x1d7)](_0x5ec5a8);else for(const _0x18559 of _0x5ec5a8){const _0x2c72db=await exchange[_0xb567d5(0x24d)](_0x18559);_0x562f63[_0x18559]=_0x2c72db;}return _0x562f63;}catch(_0x5b4647){throw _0x5b4647;}}function setBlockTransactionDetection(_0x157749){const _0x232e27=_0x4a79e6;blockTransactionDetection=_0x157749,logger[_0x232e27(0x243)](_0x232e27(0x26e)+blockTransactionDetection);}async function detectLiquidityChange(_0x454c4d=0x0){const _0x4ee0fb=_0x4a79e6;transactionDetectionOngoing=!![];try{const _0x5ab02f=await getCoins(_0x454c4d),[_0xde04fb,_0xfd713d]=_0x5ab02f;let _0xd1d2d6=[];currentCoins[_0x4ee0fb(0x1d8)](_0x2f27cb=>{const _0x545fae=_0x4ee0fb,_0x316609=_0xde04fb[_0x545fae(0x1a0)](_0x5a2fd5=>_0x5a2fd5[_0x545fae(0x252)]==_0x2f27cb[_0x545fae(0x252)]);if(_0x316609){if(_0x2f27cb[_0x545fae(0x137)]!=_0x316609['number']){let _0x40094f;if(_0x2f27cb[_0x545fae(0x252)]!=config['basecoin']){const _0x268a72=gTicker[noslash(_0x2f27cb[_0x545fae(0x20f)])];_0x40094f=_0x2f27cb[_0x545fae(0x186)]?0x1/_0x268a72:_0x268a72;}else _0x40094f=0x1;_0xd1d2d6['push']({'coin':_0x2f27cb[_0x545fae(0x252)],'symbol':_0x2f27cb[_0x545fae(0x20f)],'price':_0x40094f,'number':Number(formatResult(_0x316609[_0x545fae(0x137)]-_0x2f27cb[_0x545fae(0x137)],0x8)),'basecoinvalue':_0x40094f*(_0x316609[_0x545fae(0x137)]-_0x2f27cb[_0x545fae(0x137)])});}}});if(_0xd1d2d6[_0x4ee0fb(0x229)]>0x0&&!blockTransactionDetection){for(const _0xc547a0 of _0xd1d2d6){if(config['autoliquidity']){logger['debug'](_0x4ee0fb(0x242)+_0xc547a0[_0x4ee0fb(0x103)]+'\x20|\x20highest\x20fee:\x20'+lastFees[_0x4ee0fb(0x2aa)]);if(lastFees[_0x4ee0fb(0x2aa)]==0x0||Math[_0x4ee0fb(0x129)](_0xc547a0[_0x4ee0fb(0x103)])>lastFees[_0x4ee0fb(0x2aa)]*0x3){if(config[_0x4ee0fb(0x1cd)]==_0x4ee0fb(0x112)){delete _0xc547a0[_0x4ee0fb(0x20f)],delete _0xc547a0['basecoinvalue'];let _0x3de242=[],_0x116948=[...config[_0x4ee0fb(0x146)]]||[],_0x279fae=config[_0x4ee0fb(0x146)];_0x116948['sort']((_0x1dde28,_0x4fbda7)=>_0x1dde28['date']>_0x4fbda7['date']?-0x1:_0x4fbda7[_0x4ee0fb(0x12c)]>_0x1dde28[_0x4ee0fb(0x12c)]?0x1:0x0);const _0x18a75e=getDate();if(_0x116948[0x0]){const _0x35156e=fns[_0x4ee0fb(0x297)](_0x116948[0x0][_0x4ee0fb(0x12c)],'yyyy/MM/dd',new Date()),_0x148384=fns[_0x4ee0fb(0x297)](_0x18a75e,_0x4ee0fb(0x23f),new Date());if(fns[_0x4ee0fb(0x113)](_0x35156e,_0x148384)){_0x3de242=_0x116948[0x0]['changes'];const _0x11d3e1=_0x3de242[_0x4ee0fb(0x1a0)](_0x37e57f=>_0x37e57f[_0x4ee0fb(0x252)]==_0xc547a0[_0x4ee0fb(0x252)]);_0x11d3e1?(_0x11d3e1[_0x4ee0fb(0x137)]+=_0xc547a0[_0x4ee0fb(0x137)],_0x11d3e1[_0x4ee0fb(0x137)]==0x0&&(_0x3de242=_0x3de242['filter'](_0x5092b1=>{const _0x5775f0=_0x4ee0fb;return _0x5092b1[_0x5775f0(0x252)]!=_0xc547a0['coin'];}))):_0x3de242['push'](_0xc547a0);const _0x4bed07=_0x279fae[_0x4ee0fb(0x1a0)](_0x274a3b=>_0x274a3b[_0x4ee0fb(0x12c)]==_0x18a75e);_0x4bed07['changes']=_0x3de242;}else _0x279fae['push']({'date':_0x18a75e,'changes':[_0xc547a0]});}const _0x4a2933=_0x279fae[_0x4ee0fb(0x1a0)](_0x38f2b6=>_0x38f2b6[_0x4ee0fb(0x12c)]==_0x18a75e);if(_0x4a2933){let _0x2d9e64=!![];_0x4a2933[_0x4ee0fb(0x154)][_0x4ee0fb(0x1d8)](_0xbd7359=>{if(_0xbd7359['number']!=0x0)_0x2d9e64=![];}),_0x2d9e64&&(_0x279fae=_0x279fae[_0x4ee0fb(0x170)](_0x113237=>{const _0x2497f7=_0x4ee0fb;return _0x113237[_0x2497f7(0x12c)]!=_0x18a75e;}));}let _0x4d927f=dbConfig[_0x4ee0fb(0x26f)](_0x4ee0fb(0x206))[_0x4ee0fb(0x1a0)]({'botID':botID})[_0x4ee0fb(0x19b)]();_0x4d927f&&(dbConfig[_0x4ee0fb(0x26f)](_0x4ee0fb(0x206))['find']({'botID':botID})['assign']({'liquidity':_0x279fae})['write'](),config['liquidity']=_0x279fae);logHistory(_0x4ee0fb(0x1d1),'Portfolio\x20change\x20detected:\x20'+Math[_0x4ee0fb(0x129)](_0xc547a0[_0x4ee0fb(0x137)])+'\x20'+_0xc547a0['coin']+'\x20'+(_0xc547a0[_0x4ee0fb(0x137)]>0x0?_0x4ee0fb(0x2a2):_0x4ee0fb(0x1ee))+'\x20-\x20liquidity\x20settings\x20updated\x20accordingly'),proxyEmit('configuration',emittedConfiguration());const _0x5e2a90=getNormalizedPerformance();emitPerformance(_0x5e2a90),getStartingBalances(_0x5e2a90),logger['debug'](_0x4ee0fb(0x188));}else config['autoliquidity']==_0x4ee0fb(0x184)&&(config[_0x4ee0fb(0x1b7)]?(await storeHeadless({'headless':![]}),logHistory(_0x4ee0fb(0x1d1),_0x4ee0fb(0x1df)+Math[_0x4ee0fb(0x129)](_0xc547a0[_0x4ee0fb(0x137)])+'\x20'+_0xc547a0[_0x4ee0fb(0x252)]+'\x20'+(_0xc547a0[_0x4ee0fb(0x137)]>0x0?_0x4ee0fb(0x2a2):_0x4ee0fb(0x1ee))+_0x4ee0fb(0x2b4))):logger['debug']('Portfolio\x20change\x20detected:\x20'+Math['abs'](_0xc547a0[_0x4ee0fb(0x137)])+'\x20'+_0xc547a0[_0x4ee0fb(0x252)]+'\x20'+(_0xc547a0['number']>0x0?_0x4ee0fb(0x2a2):_0x4ee0fb(0x1ee))+_0x4ee0fb(0x185)));}else logger[_0x4ee0fb(0x243)](_0x4ee0fb(0x273)+Math[_0x4ee0fb(0x129)](_0xc547a0[_0x4ee0fb(0x137)])+'\x20'+_0xc547a0[_0x4ee0fb(0x252)]+'\x20'+(_0xc547a0[_0x4ee0fb(0x137)]>0x0?_0x4ee0fb(0x2a2):_0x4ee0fb(0x1ee)));}else logger[_0x4ee0fb(0x243)](_0x4ee0fb(0x1df)+Math[_0x4ee0fb(0x129)](_0xc547a0[_0x4ee0fb(0x137)])+'\x20'+_0xc547a0[_0x4ee0fb(0x252)]+'\x20'+(_0xc547a0[_0x4ee0fb(0x137)]>0x0?_0x4ee0fb(0x2a2):_0x4ee0fb(0x1ee))+_0x4ee0fb(0x1d9));}currentCoins=_0xde04fb,currentCoinsAll=_0xfd713d;}}catch(_0x53f612){if(!exchangeStopped)await handleError(_0x53f612,_0x4ee0fb(0x111));}transactionDetectionOngoing=![];}async function watchTransactions(){await sleep(0x14*0x3e8);while(!![]){!botPaused&&!blockTransactionDetection&&coinsLoaded?(detectLiquidityChange(),await sleep(watchTransactionsInterval)):await sleep(0x3e8);}}async function loadSymbols(){const _0x3321b7=_0x4a79e6;try{markets=await exchange['loadMarkets'](!![]),allSymbols=[],Object[_0x3321b7(0x180)](markets)[_0x3321b7(0x1d8)](_0x2ce2cd=>{const _0x3d054e=_0x3321b7;_0x2ce2cd[0x1][_0x3d054e(0x22a)]&&_0x2ce2cd[0x1][_0x3d054e(0x1e1)]&&allSymbols[_0x3d054e(0x134)](_0x2ce2cd[0x0]);});}catch(_0x14fc4c){markets?logger[_0x3321b7(0x243)](_0x3321b7(0x1e7)+_0x14fc4c[_0x3321b7(0x10c)]()):(loading[_0x3321b7(0x279)]=!![],_0x14fc4c['toString']()['toLowerCase']()[_0x3321b7(0x168)]('timestamp')||_0x14fc4c[_0x3321b7(0x10c)]()[_0x3321b7(0x124)]()[_0x3321b7(0x168)](_0x3321b7(0x12e))?(logHistory(_0x3321b7(0x122),_0x3321b7(0xf7)),loading[_0x3321b7(0x122)]='timestamp-issue'):handleErrorNoStop(_0x14fc4c,_0x3321b7(0x16d),!![]),logHistory(_0x3321b7(0x122),'Failed\x20to\x20load\x20market\x20data\x20-\x20bot\x20not\x20started'),logHistory(_0x3321b7(0x122),'Pausing\x20for\x20'+loadCoinsRetryInterval/0xea60+_0x3321b7(0x270)),logger[_0x3321b7(0x243)](_0x3321b7(0x271),_0x14fc4c),emitLoadingProgress(),botPaused=!![],await sleep(loadCoinsRetryInterval),restartBot());}}function validateSymbols(_0x3d9097){const _0x438729=_0x4a79e6;let _0x14ecb4=[];return _0x3d9097[_0x438729(0x1d8)](_0x102005=>{const _0x3d7788=_0x438729;!allSymbols['includes'](_0x102005)?(logHistory(_0x3d7788(0x122),_0x3d7788(0x2af)+_0x102005+_0x3d7788(0x1a2)),loading[_0x3d7788(0x208)]=!![],emitLoadingProgress()):_0x14ecb4[_0x3d7788(0x134)](_0x102005);}),_0x14ecb4;}async function initclient(){const _0xae3112=_0x4a79e6;proxyEmit('configuration',emittedConfiguration()),proxyEmit(_0xae3112(0x2ac),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0xae3112(0x29a),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x1624ce=getNormalizedPerformance();emitPerformance(_0x1624ce),getStartingBalances(_0x1624ce);}async function toggleBotMode(){const _0x12c3f3=_0x4a79e6;let _0x1c61fd=dbConfig[_0x12c3f3(0x26f)](_0x12c3f3(0x206))[_0x12c3f3(0x1a0)]({'botID':botID})[_0x12c3f3(0x19b)]();if(_0x1c61fd){const _0x5af6d5=!_0x1c61fd[_0x12c3f3(0x1b7)];dbConfig['get'](_0x12c3f3(0x206))[_0x12c3f3(0x1a0)]({'botID':botID})[_0x12c3f3(0x21d)]({'headless':_0x5af6d5})[_0x12c3f3(0x264)](),config[_0x12c3f3(0x1b7)]=_0x5af6d5,proxyEmit('configuration',emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x5c4b52=_0x4a79e6;process['send']({'updatebotmanager':!![]},_0x887d40=>{}),logger[_0x5c4b52(0x243)]('Headless:\x20'+config[_0x5c4b52(0x1b7)]);}async function loadCoins(_0x19f45d){const _0x1d3177=_0x4a79e6;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x5535d4,_0x5820bd=0x0,_0x169e47=0x0;_0x19f45d['forEach'](_0x37c1ab=>{const _0x46bb39=_0x3714;loading[_0x46bb39(0x152)][_0x46bb39(0x134)](_0x37c1ab);}),loadingCanceled=![];let _0xca478c=![];while(_0x5535d4!=_0x19f45d[_0x1d3177(0x229)]+maxLoadingProgress){_0x5535d4=loadingProgress,_0x19f45d['forEach'](_0x46f220=>{const _0x7b083=_0x1d3177;if(gTicker[noslash(_0x46f220)]){loading[_0x7b083(0x152)]=loading[_0x7b083(0x152)][_0x7b083(0x170)](_0x2448bc=>_0x2448bc!=_0x46f220);if(!watchedSymbols['includes'](_0x46f220))watchedSymbols[_0x7b083(0x134)](_0x46f220);_0x5535d4++;}}),loading[_0x1d3177(0x1b8)]=Math['round'](_0x5535d4/(_0x19f45d[_0x1d3177(0x229)]+maxLoadingProgress)*0x64);loading[_0x1d3177(0x1b8)]!=0x64&&(_0x169e47>0x1e*0x5&&(loading[_0x1d3177(0x208)]=!![],emitLoadingProgress()),_0x169e47>0x78*0x5&&!_0xca478c&&(_0xca478c=!![],logHistory('error',_0x1d3177(0x1e8)+loading['remainingSymbols']['join'](',\x20')+_0x1d3177(0x260)),logHistory(_0x1d3177(0x122),_0x1d3177(0x294)+loadCoinsRetryInterval/0xea60+_0x1d3177(0x270)),loadingCanceled=!![],await sleep(loadCoinsRetryInterval),restartBot()));if(loadingCanceled){loading[_0x1d3177(0x279)]=!![],emitLoadingProgress();break;}else _0x5820bd!=loading['progress']&&(_0x5820bd=loading[_0x1d3177(0x1b8)],emitLoadingProgress()),_0x169e47++,await sleep(0xc8);}_0x5535d4==_0x19f45d[_0x1d3177(0x229)]+maxLoadingProgress&&(coinsLoaded=!![],process[_0x1d3177(0x123)]({'status':_0x1d3177(0x281),'live':_0x1d3177(0x1e6)},_0x19a6b0=>{}),_0xca478c&&logHistory(_0x1d3177(0x1d1),_0x1d3177(0x247)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x4d54a7=_0x4a79e6;proxyEmit(_0x4d54a7(0x1fe),{...emittedConfiguration(),'configstate':_0x4d54a7(0x25d)});}function emitLoadingProgress(){const _0x5b8bbb=_0x4a79e6;proxyEmit(_0x5b8bbb(0x158),loading);}async function getFiat(){const _0x3936b9=_0x4a79e6;let _0x33926a=gTicker[stablecoins[_0x3936b9(0x230)][_0x3936b9(0x252)]],_0x3df2fc=gTicker[stablecoins['usd'][_0x3936b9(0x252)]];return{'eur':Number(_0x33926a),'usd':Number(_0x3df2fc)};}function capitalize(_0xad15a6){const _0x49b60e=_0x4a79e6;return _0xad15a6[_0x49b60e(0x167)](0x0,0x1)['toUpperCase']()+_0xad15a6[_0x49b60e(0x167)](0x1);}function supportedExchanges(){const _0x33c2bb=_0x4a79e6,_0x786a29=['ws',_0x33c2bb(0x1d7),_0x33c2bb(0x24d),'watchTrades',_0x33c2bb(0x17d),'cancelOrder','createOrder',_0x33c2bb(0x148),_0x33c2bb(0x2b1)];let _0x5d7e5=[],_0x519c0b=[],_0x33ee22=ccxt[_0x33c2bb(0x161)]['exchanges'];_0x33ee22[_0x33c2bb(0x1d8)](_0x1b8de8=>{const _0x56aaae=_0x33c2bb;try{const _0x4ce068=new ccxt[(_0x56aaae(0x161))][_0x1b8de8]();_0x519c0b[_0x56aaae(0x134)](_0x4ce068);}catch(_0x355218){}}),_0x519c0b[_0x33c2bb(0x1d8)](_0x42e58d=>{const _0x55abb6=_0x33c2bb;let _0x34872c=0x0;_0x786a29[_0x55abb6(0x1d8)](_0x4546aa=>{const _0x16d2d3=_0x55abb6;_0x4546aa in _0x42e58d[_0x16d2d3(0x228)]&&_0x42e58d[_0x16d2d3(0x228)][_0x4546aa]&&_0x34872c++;}),_0x34872c==_0x786a29['length']&&(!excludedExchanges[_0x55abb6(0x168)](_0x42e58d['id'])&&_0x5d7e5[_0x55abb6(0x134)](capitalize(_0x42e58d['id'])));});let _0x2e6a67=[];return _0x33ee22[_0x33c2bb(0x1d8)](_0x371c86=>{const _0x1603fd=_0x33c2bb;_0x371c86=capitalize(_0x371c86);if(!_0x5d7e5[_0x1603fd(0x168)](_0x371c86))_0x2e6a67[_0x1603fd(0x134)](_0x371c86);}),_0x5d7e5;}function setStartDatePerformance(){const _0x37a7b7=_0x4a79e6;if(config&&config['liquidity'][0x0]['changes'][_0x37a7b7(0x229)]!=0x0){const _0x5dbd73=config['liquidity'][0x0][_0x37a7b7(0x154)];dbPerformance[_0x37a7b7(0x26f)](_0x37a7b7(0x232))['find']({'date':config[_0x37a7b7(0x178)]})['assign']({'coins':_0x5dbd73})[_0x37a7b7(0x264)]();}}function calculatePnL(_0x4aabe4,_0x1e4d5c,_0xf03599,_0x49990d,_0x228b32,_0x560567){const _0x4a88c5=_0x4a79e6;!_0x4aabe4['includes']('/'+config[_0x4a88c5(0x192)])&&(_0xf03599=_0xf03599=='buy'?'sell':_0x4a88c5(0x267));!_0x560567[_0x1e4d5c]&&(_0x560567[_0x1e4d5c]={'number':0x0,'sells':0x0,'buys':0x0,'breakeven':0x0,'realizedPnL':0x0});let _0x225dc6=0x0,_0x1b3841,_0x19e8eb;if(_0xf03599==_0x4a88c5(0x267))_0x19e8eb=_0x560567[_0x1e4d5c]['number']*_0x560567[_0x1e4d5c]['breakeven']+_0x228b32*_0x49990d,_0x560567[_0x1e4d5c]['number']+=_0x49990d,_0x560567[_0x1e4d5c][_0x4a88c5(0x2a3)]=_0x560567[_0x1e4d5c][_0x4a88c5(0x137)]!=0x0?_0x19e8eb/_0x560567[_0x1e4d5c]['number']:0x0,_0x560567[_0x1e4d5c]['buys']++;else _0xf03599=='sell'&&(_0x1b3841=Math[_0x4a88c5(0x13d)](_0x560567[_0x1e4d5c][_0x4a88c5(0x137)],_0x49990d),_0x225dc6=(_0x228b32-_0x560567[_0x1e4d5c][_0x4a88c5(0x2a3)])*_0x1b3841,_0x19e8eb=Math[_0x4a88c5(0x256)](_0x560567[_0x1e4d5c]['number']*_0x560567[_0x1e4d5c][_0x4a88c5(0x2a3)]-_0x1b3841*_0x560567[_0x1e4d5c][_0x4a88c5(0x2a3)],0x0),_0x560567[_0x1e4d5c]['number']-=_0x1b3841,_0x560567[_0x1e4d5c]['breakeven']=_0x560567[_0x1e4d5c][_0x4a88c5(0x137)]!=0x0?_0x19e8eb/_0x560567[_0x1e4d5c][_0x4a88c5(0x137)]:0x0,_0x560567[_0x1e4d5c]['realizedPnL']+=_0x225dc6,_0x560567[_0x1e4d5c][_0x4a88c5(0x276)]++);return _0x225dc6;}async function generatePnL(){const _0x3df96b=_0x4a79e6;pnlGenerationNeeded=![],logger[_0x3df96b(0x243)]('Generating\x20PnL\x20data');const _0x2e1266=dbLogs[_0x3df96b(0x26f)](_0x3df96b(0x1d6))[_0x3df96b(0x19b)]();let _0x4ae62e={},_0x340995=0x0,_0x52b624=0x0,_0x57c17e=config[_0x3df96b(0x178)];const _0x479929=fns[_0x3df96b(0x297)](_0x57c17e,_0x3df96b(0x23f),new Date()),_0x2df8bc=new Date();let _0x57bb7f=0x0;for(let _0x166828=_0x479929;!fns[_0x3df96b(0x144)](_0x2df8bc,_0x166828);_0x166828=fns[_0x3df96b(0x16f)](_0x166828,0x1)){const _0x127146=fns[_0x3df96b(0x15c)](_0x166828,_0x3df96b(0x23f));while(_0x340995<_0x2e1266[_0x3df96b(0x229)]){const _0x29206b=new Date(_0x2e1266[_0x340995][_0x3df96b(0x25e)]);if(fns[_0x3df96b(0x144)](_0x29206b,_0x166828))_0x340995++;else{if(_0x2e1266[_0x340995][_0x3df96b(0x25e)]['includes'](_0x127146)){const _0x2e65e8=_0x2e1266[_0x340995];if(_0x2e65e8[_0x3df96b(0x100)]==='order'&&(_0x2e65e8[_0x3df96b(0x28f)][_0x3df96b(0x168)](_0x3df96b(0x11d))||_0x2e65e8['event'][_0x3df96b(0x168)](_0x3df96b(0x1c4)))){const _0x2be2d7=_0x2e65e8[_0x3df96b(0x28f)]['match'](/([A-Z]+\/[A-Z]+) (sell|buy) #([\d.]+) @([\d.]+)/);if(_0x2be2d7){const [,_0x29b233,_0x224ecb,_0x5b0615,_0x33e617]=_0x2be2d7,_0x115bc3=_0x29b233[_0x3df96b(0x168)]('/'+config[_0x3df96b(0x192)])?_0x29b233['split']('/')[0x0]:_0x29b233[_0x3df96b(0x240)]('/')[0x1],_0x15a525=calculatePnL(_0x29b233,_0x115bc3,_0x224ecb,parseFloat(_0x5b0615),parseFloat(_0x33e617),_0x4ae62e);_0x52b624+=_0x15a525;}}_0x340995++;}else break;}}dbPerformance[_0x3df96b(0x26f)](_0x3df96b(0x232))[_0x3df96b(0x1a0)]({'date':_0x127146})[_0x3df96b(0x21d)]({'pnl':_0x52b624})['write']();}dbCoinResults['set']('coins',_0x4ae62e)[_0x3df96b(0x264)](),logger[_0x3df96b(0x243)](_0x3df96b(0x1c2));const _0xbd6648=getNormalizedPerformance();emitPerformance(_0xbd6648);}async function updatePnL(_0x4d6efe){const _0x16717e=_0x4a79e6,{symbol:_0x5ef44e,coin:_0x5dd89a,amount:_0x42000e,price:_0x2a6c0d,side:_0xaa47c,reverse:_0x4e710f}=_0x4d6efe;let _0x4c3fea=dbCoinResults[_0x16717e(0x26f)](_0x16717e(0x236))[_0x16717e(0x19b)]();const _0x26d469=calculatePnL(_0x5ef44e,_0x5dd89a,_0xaa47c,_0x42000e,_0x2a6c0d,_0x4c3fea);dbCoinResults[_0x16717e(0x155)](_0x16717e(0x236),_0x4c3fea)[_0x16717e(0x264)]();const _0x495c82=getTimeStamp()[_0x16717e(0x240)]('\x20')[0x0];let _0x231b3c=dbPerformance[_0x16717e(0x26f)](_0x16717e(0x232))[_0x16717e(0x1a0)]({'date':_0x495c82})[_0x16717e(0x19b)]();_0x231b3c?(_0x231b3c['pnl']+=_0x26d469,dbPerformance[_0x16717e(0x26f)](_0x16717e(0x232))['find']({'date':_0x495c82})['assign'](_0x231b3c)[_0x16717e(0x264)]()):await storePerformance();const _0x5e5b29=getNormalizedPerformance();emitPerformance(_0x5e5b29);}async function validate24hChanges(){const _0x340e95=_0x4a79e6;for(const _0x17ce77 of currentCoins){if(_0x17ce77[_0x340e95(0x252)]!=config[_0x340e95(0x192)]){let _0xef524c;_0x17ce77[_0x340e95(0x186)]?_0xef524c=formatResult((0x1/(gChange[_0x17ce77['symbol']]/0x64+0x1)-0x1)*0x64,0x3):_0xef524c=gChange[_0x17ce77[_0x340e95(0x20f)]],_0xef524c<config['change24h']&&(logHistory(_0x340e95(0x122),_0x17ce77['coin']+'\x20has\x20a\x2024h\x20drop\x20of\x20'+_0xef524c+'%'),logHistory(_0x340e95(0x122),_0x340e95(0x2a1)),logHistory('error',_0x340e95(0x133)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x3b56ae,_0x5a299c){const _0xc7a26e=_0x4a79e6;if(!_0x3b56ae)return!![];const _0x1ffbd7=_0x5a299c[_0xc7a26e(0x240)]('.'),_0x6a340b=_0x3b56ae['split']('.');for(var _0x2aa2aa=0x0;_0x2aa2aa<_0x6a340b[_0xc7a26e(0x229)];_0x2aa2aa++){const _0x298fe8=~~_0x6a340b[_0x2aa2aa],_0x5f4c0f=~~_0x1ffbd7[_0x2aa2aa];if(_0x298fe8<_0x5f4c0f)return!![];if(_0x298fe8>_0x5f4c0f)return![];}return![];}async function oneTimeMigration(){const _0x28b51f=_0x4a79e6;let _0x283356=dbLogs[_0x28b51f(0x26f)](_0x28b51f(0x141))[_0x28b51f(0x19b)]();if(isOlderVersion(_0x283356,_0x28b51f(0x218))){let _0x18bb00=[];const _0x535578=dbLogs[_0x28b51f(0x26f)](_0x28b51f(0x1d6))['value']();_0x535578[_0x28b51f(0x1d8)](_0x3198a0=>{const _0x1d58f9=_0x28b51f;_0x18bb00[_0x1d58f9(0x134)]({'time':_0x3198a0[_0x1d58f9(0x25e)],'type':_0x3198a0[_0x1d58f9(0x100)],'event':_0x3198a0[_0x1d58f9(0x28f)]});}),dbLogs[_0x28b51f(0x26f)]('logs')['assign'](_0x18bb00)['write']();}let _0xbcf61c=dbConfig[_0x28b51f(0x26f)](_0x28b51f(0x141))[_0x28b51f(0x19b)]();if(isOlderVersion(_0xbcf61c,_0x28b51f(0x218))){let _0x51fcfd=dbConfig[_0x28b51f(0x26f)](_0x28b51f(0x206))[_0x28b51f(0x1a0)]({'botID':botID})[_0x28b51f(0x19b)]();if(_0x51fcfd){let _0x415167=[];_0x51fcfd[_0x28b51f(0x15a)][_0x28b51f(0x1d8)](_0x404468=>{const _0x3aeb51=_0x28b51f;_0x415167[_0x3aeb51(0x134)]({'coin':_0x404468[_0x3aeb51(0x252)],'number':_0x404468[_0x3aeb51(0x11b)],'price':_0x404468[_0x3aeb51(0x1b2)]}),delete _0x404468[_0x3aeb51(0x11b)],delete _0x404468['startprice'];});if(_0x415167[_0x28b51f(0x229)]!==0x0)fs[_0x28b51f(0x1ac)](configbackuppath+(_0x28b51f(0x220)+botID+_0x28b51f(0x219)),JSON[_0x28b51f(0x102)](_0x415167,null,0x4),function(_0x365e1d){if(_0x365e1d){}});const _0x2031be=(_0x2de328,_0x11952d)=>{const _0x281665=_0x28b51f;let _0x4ad206=[];_0x11952d['forEach'](_0x5e4c43=>{const _0x4b373c=_0x3714,_0x1c9792=_0x2de328['find'](_0x2b735c=>_0x2b735c[_0x4b373c(0x252)]==_0x5e4c43[_0x4b373c(0x252)]);if(!_0x1c9792)_0x4ad206[_0x4b373c(0x134)](_0x5e4c43);});let _0x55049e=[];return _0x2de328[_0x281665(0x1d8)](_0x12515c=>{const _0x5155da=_0x281665,_0x56728f=_0x11952d[_0x5155da(0x1a0)](_0x493ceb=>_0x493ceb[_0x5155da(0x252)]==_0x12515c[_0x5155da(0x252)]);if(!_0x56728f||_0x56728f['number']==0x0&&_0x12515c['number']!=0x0)_0x55049e[_0x5155da(0x134)](_0x12515c);}),{'missingDay1':_0x4ad206,'notInDay2':_0x55049e};},_0xadeddc=dbPerformance[_0x28b51f(0x26f)](_0x28b51f(0x232))['cloneDeep']()[_0x28b51f(0x19b)]();if(_0xadeddc['length']>0x1){const {missingDay1:_0x4cb9ad,notInDay2:_0x51a35b}=_0x2031be(_0x415167,_0xadeddc[0x1][_0x28b51f(0x236)]);_0x415167=[..._0x415167,..._0x4cb9ad],_0x51a35b[_0x28b51f(0x1d8)](_0x2d8253=>{const _0x23aae0=_0x28b51f;let _0x2cb2a1=_0x415167[_0x23aae0(0x1f7)](_0xfba922=>_0xfba922[_0x23aae0(0x252)]==_0x2d8253['coin']);_0x2cb2a1!=-0x1&&_0x415167[_0x23aae0(0x223)](_0x2cb2a1,0x1);});}_0x415167[_0x28b51f(0x1ed)]((_0x1072e6,_0x735eae)=>_0x1072e6[_0x28b51f(0x252)]>_0x735eae['coin']?0x1:_0x735eae[_0x28b51f(0x252)]>_0x1072e6[_0x28b51f(0x252)]?-0x1:0x0);let _0x9344d8=[{'date':_0x51fcfd[_0x28b51f(0x178)],'changes':_0x415167}];_0xadeddc[_0x28b51f(0x229)]>0x2&&_0xadeddc[_0x28b51f(0x1d8)]((_0x389032,_0x5583eb)=>{const _0x29fd99=_0x28b51f;if(_0x5583eb>0x0&&_0x5583eb<_0xadeddc[_0x29fd99(0x229)]-0x1){const {missingDay1:_0x3c78d5,notInDay2:_0x38d581}=_0x2031be(_0xadeddc[_0x5583eb][_0x29fd99(0x236)],_0xadeddc[_0x5583eb+0x1]['coins']);_0x415167=[],(_0x3c78d5[_0x29fd99(0x229)]!=0x0||_0x38d581[_0x29fd99(0x229)]!=0x0)&&(_0x3c78d5['length']!=0x0&&_0x415167[_0x29fd99(0x134)](..._0x3c78d5),_0x38d581[_0x29fd99(0x229)]!=0x0&&(_0x38d581[_0x29fd99(0x1d8)](_0x41dc09=>{const _0x5a773d=_0x29fd99;_0x41dc09[_0x5a773d(0x137)]=-_0x41dc09[_0x5a773d(0x137)];}),_0x415167[_0x29fd99(0x134)](..._0x38d581)),_0x415167[_0x29fd99(0x1ed)]((_0x1d6eb8,_0x593f01)=>_0x1d6eb8[_0x29fd99(0x252)]>_0x593f01['coin']?0x1:_0x593f01[_0x29fd99(0x252)]>_0x1d6eb8[_0x29fd99(0x252)]?-0x1:0x0),_0x9344d8['push']({'date':_0xadeddc[_0x5583eb+0x1][_0x29fd99(0x12c)],'changes':_0x415167}));}}),dbConfig['get'](_0x28b51f(0x206))[_0x28b51f(0x1a0)]({'botID':botID})['assign']({..._0x51fcfd,'liquidity':_0x9344d8})[_0x28b51f(0x264)]();}}if(isOlderVersion(_0xbcf61c,'2.6.0')){let _0x14dc9d=dbConfig[_0x28b51f(0x26f)](_0x28b51f(0x206))[_0x28b51f(0x1a0)]({'botID':botID})['value']();if(_0x14dc9d){const _0x4e9bc8=_0x14dc9d[_0x28b51f(0xfc)],_0x3cc3bf=_0x4e9bc8?capitalize(_0x4e9bc8):'Binance';dbConfig[_0x28b51f(0x26f)](_0x28b51f(0x206))[_0x28b51f(0x1a0)]({'botID':botID})['assign']({'exchange':_0x3cc3bf})[_0x28b51f(0x264)]();}}if(isOlderVersion(_0xbcf61c,'2.6.22')){let _0x2ebdfd=dbConfig[_0x28b51f(0x26f)](_0x28b51f(0x206))[_0x28b51f(0x1a0)]({'botID':botID})[_0x28b51f(0x19b)]();if(_0x2ebdfd){const _0x33d010=_0x2ebdfd[_0x28b51f(0x29e)],_0x5a74c0=_0x33d010?_0x28b51f(0x278):![];dbConfig[_0x28b51f(0x26f)](_0x28b51f(0x206))[_0x28b51f(0x1a0)]({'botID':botID})[_0x28b51f(0x21d)]({'marketcapEnabled':_0x5a74c0})[_0x28b51f(0x264)]();}}if(isOlderVersion(_0xbcf61c,_0x28b51f(0x239))){let _0x2e01c5=dbConfig[_0x28b51f(0x26f)](_0x28b51f(0x206))['find']({'botID':botID})['value']();if(_0x2e01c5){const _0x1370ab=_0x2e01c5[_0x28b51f(0x1cd)],_0xa7f1db=_0x1370ab?'update-liquidity':![];dbConfig[_0x28b51f(0x26f)](_0x28b51f(0x206))[_0x28b51f(0x1a0)]({'botID':botID})[_0x28b51f(0x21d)]({'autoliquidity':_0xa7f1db})['write']();}}let _0x10f65f=dbPerformance[_0x28b51f(0x26f)](_0x28b51f(0x141))[_0x28b51f(0x19b)]();isOlderVersion(_0x10f65f,_0x28b51f(0x218))&&setStartDatePerformance();let _0x43bf47=dbCoinResults[_0x28b51f(0x26f)](_0x28b51f(0x141))[_0x28b51f(0x19b)]();if(isOlderVersion(_0x43bf47,'2.7.1')){let _0x4f735d=dbCoinResults['get'](_0x28b51f(0x236))[_0x28b51f(0x19b)]();if(_0x4f735d[_0x28b51f(0x229)]!=0x0)pnlGenerationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x540f02=_0x4a79e6;dbConfig['set']('version',serverversion)[_0x540f02(0x264)](),dbPerformance['set'](_0x540f02(0x141),serverversion)[_0x540f02(0x264)](),dbLogs[_0x540f02(0x155)](_0x540f02(0x141),serverversion)[_0x540f02(0x264)](),dbCoinResults[_0x540f02(0x155)](_0x540f02(0x141),serverversion)['write']();}function getConfiguration(_0x1f1cc1){const _0xd07590=_0x4a79e6;let _0x470a67=dbConfig[_0xd07590(0x26f)]('bot')[_0xd07590(0x1a0)]({'botID':_0x1f1cc1})[_0xd07590(0x19b)]();if(_0x470a67){let _0x2190e8=![];typeof _0x470a67['threshold']==_0xd07590(0x15b)&&(_0x470a67={..._0x470a67,'threshold':Number(_0x470a67['threshold'])},_0x2190e8=!![]),_0x470a67[_0xd07590(0x165)]==undefined&&(_0x470a67={..._0x470a67,'change24h':-0x14},_0x2190e8=!![]),_0x470a67[_0xd07590(0x10e)]==undefined&&(_0x470a67={..._0x470a67,'fiat':_0xd07590(0x233)},_0x2190e8=!![]),_0x470a67[_0xd07590(0xf0)]==undefined&&(_0x470a67={..._0x470a67,'onepagemode':settings['onepagemode']},_0x2190e8=!![]),_0x470a67['colorscheme']==undefined&&(_0x470a67={..._0x470a67,'colorscheme':_0xd07590(0x1e4)},_0x2190e8=!![]),_0x470a67[_0xd07590(0x1cd)]==undefined&&(_0x470a67={..._0x470a67,'autoliquidity':_0xd07590(0x112)},_0x2190e8=!![]),_0x470a67[_0xd07590(0x143)]==undefined&&(_0x470a67={..._0x470a67,'marketcapApi':settings[_0xd07590(0x143)]?!![]:![]},_0x2190e8=!![]),_0x470a67[_0xd07590(0x29e)]==undefined&&(_0x470a67={..._0x470a67,'marketcapEnabled':![]},_0x2190e8=!![]),_0x470a67[_0xd07590(0x195)]==undefined&&(_0x470a67={..._0x470a67,'sandbox':![]},_0x2190e8=!![]),_0x2190e8&&(_0x470a67={'botID':_0x470a67[_0xd07590(0x181)],'exchange':_0x470a67['exchange'],'apiKey':_0x470a67[_0xd07590(0x17f)],'apiSecret':_0x470a67[_0xd07590(0x16a)],'apiPassword':_0x470a67['apiPassword'],'basecoin':_0x470a67[_0xd07590(0x192)],'botname':_0x470a67[_0xd07590(0x209)],'showname':_0x470a67[_0xd07590(0x25a)],'threshold':_0x470a67[_0xd07590(0x23b)],'ordertype':_0x470a67[_0xd07590(0x272)],'timeout':_0x470a67['timeout'],'fiat':_0x470a67[_0xd07590(0x10e)],'startdate':_0x470a67[_0xd07590(0x178)],'recreate':_0x470a67[_0xd07590(0x203)],'timeshift':_0x470a67[_0xd07590(0x227)],'onepagemode':_0x470a67['onepagemode'],'headless':_0x470a67[_0xd07590(0x1b7)],'cooldown':_0x470a67[_0xd07590(0x19c)],'change24h':_0x470a67[_0xd07590(0x165)],'emojibuy':_0x470a67[_0xd07590(0x251)],'emojisell':_0x470a67[_0xd07590(0x1d3)],'colorscheme':_0x470a67[_0xd07590(0x22c)],'marketcapApi':_0x470a67[_0xd07590(0x143)],'marketcapEnabled':_0x470a67[_0xd07590(0x29e)],'sandbox':_0x470a67['sandbox'],'portfolio':_0x470a67[_0xd07590(0x15a)],'autoliquidity':_0x470a67[_0xd07590(0x1cd)],'liquidity':_0x470a67[_0xd07590(0x146)],'openOrders':_0x470a67[_0xd07590(0x1a1)]},dbConfig[_0xd07590(0x26f)](_0xd07590(0x206))['remove']()[_0xd07590(0x264)](),dbConfig['get'](_0xd07590(0x206))[_0xd07590(0x134)](_0x470a67)[_0xd07590(0x264)]());}else _0x470a67={'botID':_0x1f1cc1,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0xd07590(0xf4)+_0x1f1cc1,'showname':![],'threshold':0x3,'ordertype':_0xd07590(0x10a),'timeout':0x14,'fiat':_0xd07590(0x233),'startdate':getDate(),'recreate':![],'timeshift':settings[_0xd07590(0x227)],'onepagemode':settings[_0xd07590(0xf0)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0xd07590(0x1e4),'marketcapApi':settings['marketcapApi']?!![]:![],'marketcapEnabled':![],'sandbox':![],'portfolio':[],'autoliquidity':'update-liquidity','liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x470a67;}function emittedConfiguration(){const _0x4e99b1=_0x4a79e6;let _0x374d84;if(config['apiKey']=='')_0x374d84={...config,'configstate':_0x4e99b1(0x27d)};else config[_0x4e99b1(0x17f)]=='***'?_0x374d84={...config,'configstate':'recovery'}:(_0x374d84={...config,'apiKey':_0x4e99b1(0x1e3),'apiSecret':_0x4e99b1(0x1e3)},config[_0x4e99b1(0x1a4)]&&(_0x374d84[_0x4e99b1(0x1a4)]='************'));return _0x374d84[_0x4e99b1(0x189)]=enableFiatToggle,_0x374d84;}function getSettings(){const _0x38c503=_0x4a79e6;return dbSettings['get'](_0x38c503(0x1ec))[_0x38c503(0x19b)]();}function getSecure(){const _0x262c7e=_0x4a79e6;return dbSecure['get'](_0x262c7e(0x296))[_0x262c7e(0x19b)]()||{};}function updateTimeshift(_0x53223c){const _0x43c5bd=_0x4a79e6;let _0x340f9a=dbConfig[_0x43c5bd(0x26f)](_0x43c5bd(0x206))['find']({'botID':botID})['value']();_0x340f9a&&dbConfig['get'](_0x43c5bd(0x206))[_0x43c5bd(0x1a0)]({'botID':botID})['assign']({'timeshift':_0x53223c})[_0x43c5bd(0x264)](),config[_0x43c5bd(0x227)]=_0x53223c,proxyEmit(_0x43c5bd(0x1fe),emittedConfiguration());}function updateOnepagemode(_0x44e898){const _0xb42ffd=_0x4a79e6;let _0x210478=dbConfig[_0xb42ffd(0x26f)](_0xb42ffd(0x206))[_0xb42ffd(0x1a0)]({'botID':botID})[_0xb42ffd(0x19b)]();_0x210478&&dbConfig[_0xb42ffd(0x26f)](_0xb42ffd(0x206))[_0xb42ffd(0x1a0)]({'botID':botID})[_0xb42ffd(0x21d)]({'onepagemode':_0x44e898})[_0xb42ffd(0x264)](),config[_0xb42ffd(0xf0)]=_0x44e898,proxyEmit(_0xb42ffd(0x1fe),emittedConfiguration());}function updateMarketcapApi(_0x4463f7){const _0x5b7376=_0x4a79e6,_0x32b328=_0x4463f7?!![]:![];let _0x3649f9=dbConfig['get'](_0x5b7376(0x206))[_0x5b7376(0x1a0)]({'botID':botID})[_0x5b7376(0x19b)]();_0x3649f9&&dbConfig[_0x5b7376(0x26f)](_0x5b7376(0x206))[_0x5b7376(0x1a0)]({'botID':botID})[_0x5b7376(0x21d)]({'marketcapApi':_0x32b328})[_0x5b7376(0x264)](),config[_0x5b7376(0x143)]=_0x32b328,getMarketCap(),proxyEmit('configuration',emittedConfiguration());}async function storeConfiguration(_0x43d3e4){const _0x28bafb=_0x4a79e6;logger['debug'](_0x28bafb(0x23c));_0x43d3e4[_0x28bafb(0x274)]&&delete _0x43d3e4[_0x28bafb(0x274)];if(pidBalances)clearTimeout(pidBalances);setBlockTransactionDetection(!![]);let _0x4be8b5=![],_0x25fac8=![],_0x1be299=[];_0x43d3e4[_0x28bafb(0x15a)]['forEach'](_0x37365f=>{const _0x4bed00=_0x28bafb;if(!_0x37365f['excluded']&&_0x37365f[_0x4bed00(0x252)]!=_0x43d3e4[_0x4bed00(0x192)])_0x1be299[_0x4bed00(0x134)](_0x37365f['symbol']);}),_0x1be299[_0x28bafb(0x1d8)](_0x55ec4f=>{const _0x5f4e8c=_0x28bafb,_0x1cea43=currentCoins[_0x5f4e8c(0x1a0)](_0x41bf90=>_0x41bf90['symbol']==_0x55ec4f);!_0x1cea43&&(_0x4be8b5=!![]);}),currentCoins['forEach'](_0x461e7b=>{const _0x1a7942=_0x28bafb;if(_0x461e7b[_0x1a7942(0x252)]!=config['basecoin']){const _0x33aa55=_0x1be299[_0x1a7942(0x1a0)](_0x5a5829=>_0x5a5829==_0x461e7b[_0x1a7942(0x20f)]);!_0x33aa55&&(_0x4be8b5=!![]);}}),_0x43d3e4[_0x28bafb(0x15a)][_0x28bafb(0x1d8)](_0x2cc316=>{const _0x233dcb=_0x28bafb,_0x3996ed=config[_0x233dcb(0x15a)][_0x233dcb(0x1a0)](_0x4c31d5=>_0x4c31d5[_0x233dcb(0x252)]==_0x2cc316[_0x233dcb(0x252)]);if(_0x3996ed&&_0x2cc316[_0x233dcb(0x12b)]!=_0x3996ed['offset'])_0x25fac8=!![];});let _0x50b0ca=dbConfig[_0x28bafb(0x26f)](_0x28bafb(0x206))['find']({'botID':botID})[_0x28bafb(0x19b)]();_0x43d3e4={..._0x43d3e4,'apiKey':decryptRSA(secure[_0x28bafb(0x1af)],_0x43d3e4['apiKey']),'apiSecret':decryptRSA(secure[_0x28bafb(0x1af)],_0x43d3e4[_0x28bafb(0x16a)])};_0x43d3e4['apiPassword']&&(_0x43d3e4['apiPassword']=decryptRSA(secure[_0x28bafb(0x1af)],_0x43d3e4[_0x28bafb(0x1a4)]));let _0x2a6f17=![];if(_0x50b0ca){_0x43d3e4[_0x28bafb(0x17f)]==_0x28bafb(0x1e3)?_0x43d3e4[_0x28bafb(0x17f)]=config[_0x28bafb(0x17f)]:_0x2a6f17=!![];_0x43d3e4[_0x28bafb(0x16a)]=='************'?_0x43d3e4[_0x28bafb(0x16a)]=config['apiSecret']:_0x2a6f17=!![];if(_0x43d3e4[_0x28bafb(0x1a4)]==_0x28bafb(0x1e3))_0x43d3e4['apiPassword']=config['apiPassword'];else{if(_0x43d3e4[_0x28bafb(0x1a4)])_0x2a6f17=!![];}dbConfig[_0x28bafb(0x26f)](_0x28bafb(0x206))[_0x28bafb(0x1a0)]({'botID':botID})[_0x28bafb(0x21d)](_0x43d3e4)['write']();}else dbConfig['get'](_0x28bafb(0x206))[_0x28bafb(0x134)](_0x43d3e4)[_0x28bafb(0x264)](),_0x2a6f17=!![],process[_0x28bafb(0x123)]({'status':'enabled','live':_0x28bafb(0x1e6)},_0x2d7304=>{});process[_0x28bafb(0x123)]({'botname':_0x43d3e4[_0x28bafb(0x209)]},_0x55d6f4=>{}),config={..._0x43d3e4},updateBotManager(),proxyEmit(_0x28bafb(0x286)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x2a6f17)await reset(!![]);else _0x4be8b5||_0x25fac8?await reset(![]):getBalances();setBlockTransactionDetection(![]);}async function storeHeadless(_0x56f11a){const _0x13ea62=_0x4a79e6,_0x5bd25d={...config,'headless':_0x56f11a[_0x13ea62(0x1b7)]};let _0x2120a6=dbConfig[_0x13ea62(0x26f)]('bot')[_0x13ea62(0x1a0)]({'botID':botID})[_0x13ea62(0x19b)]();_0x2120a6&&dbConfig[_0x13ea62(0x26f)](_0x13ea62(0x206))[_0x13ea62(0x1a0)]({'botID':botID})['assign'](_0x5bd25d)['write'](),config={..._0x5bd25d},updateBotManager(),proxyEmit(_0x13ea62(0x1fe),emittedConfiguration());}async function storeFiat(_0x578be9){const _0x49cb9e=_0x4a79e6,_0x150e99={...config,'fiat':_0x578be9};let _0x51d252=dbConfig[_0x49cb9e(0x26f)](_0x49cb9e(0x206))[_0x49cb9e(0x1a0)]({'botID':botID})[_0x49cb9e(0x19b)]();_0x51d252&&dbConfig[_0x49cb9e(0x26f)]('bot')[_0x49cb9e(0x1a0)]({'botID':botID})[_0x49cb9e(0x21d)](_0x150e99)[_0x49cb9e(0x264)](),config={..._0x150e99},proxyEmit(_0x49cb9e(0x1fe),emittedConfiguration());}function resetHistory(){const _0x20f282=_0x4a79e6;logger[_0x20f282(0x29d)]('Resetting\x20bot\x20history');try{if(fs[_0x20f282(0x130)](path[_0x20f282(0x1b9)](configpath,_0x20f282(0x147)+botID+_0x20f282(0x194))))fs['unlinkSync'](path[_0x20f282(0x1b9)](configpath,_0x20f282(0x147)+botID+_0x20f282(0x194)));if(fs['existsSync'](path[_0x20f282(0x1b9)](configpath,_0x20f282(0x147)+botID+_0x20f282(0x149))))fs[_0x20f282(0x14a)](path[_0x20f282(0x1b9)](configpath,_0x20f282(0x147)+botID+_0x20f282(0x149)));if(fs[_0x20f282(0x130)](path['join'](configpath,_0x20f282(0x147)+botID+_0x20f282(0x153))))fs[_0x20f282(0x14a)](path[_0x20f282(0x1b9)](configpath,'bot-'+botID+'-results.json'));}catch(_0x3ef399){if(_0x3ef399)logger['full']('Error\x20while\x20deleting\x20files:\x20',_0x3ef399);}const _0x145070=getDate();let _0x5e7e1a=[];currentCoins['forEach'](_0x82d736=>{const _0x1c0794=_0x20f282;_0x5e7e1a[_0x1c0794(0x134)]({'coin':_0x82d736[_0x1c0794(0x252)],'number':_0x82d736[_0x1c0794(0x137)],'price':_0x82d736[_0x1c0794(0x201)]});});let _0x35a011=dbConfig[_0x20f282(0x26f)](_0x20f282(0x206))['find']({'botID':botID})['value']();_0x35a011&&(dbConfig[_0x20f282(0x26f)]('bot')[_0x20f282(0x1a0)]({'botID':botID})[_0x20f282(0x21d)]({'liquidity':[{'date':_0x145070,'changes':_0x5e7e1a}]})['write'](),config[_0x20f282(0x146)]=[]),restartBot(!![]);}function noslash(_0xc58343){return _0xc58343['replace']('/','');}function updateHighestFee(_0x65d757){const _0x5d37c7=_0x4a79e6;if(_0x65d757[_0x5d37c7(0x186)]){let _0x3d2204={'filled':_0x65d757[_0x5d37c7(0x1ef)]*_0x65d757['price'],'amount':_0x65d757['filled']*_0x65d757[_0x5d37c7(0x18d)],'side':_0x65d757['side']==_0x5d37c7(0x15f)?_0x5d37c7(0x267):_0x5d37c7(0x15f),'price':0x1/_0x65d757[_0x5d37c7(0x18d)]};_0x65d757={..._0x65d757,..._0x3d2204};}const _0x480800=defaultFee*_0x65d757[_0x5d37c7(0x1ef)]*_0x65d757['price'];lastFees[_0x5d37c7(0x245)][_0x5d37c7(0x229)]===0x14&&lastFees[_0x5d37c7(0x245)][_0x5d37c7(0x1b5)](),lastFees['recent20'][_0x5d37c7(0x134)](_0x480800),lastFees[_0x5d37c7(0x2aa)]=Math['max'](...lastFees[_0x5d37c7(0x245)]);}async function updateNumberCoinsCcxt(_0x2f42c1){const _0x3175be=_0x4a79e6;logger['debug'](_0x3175be(0x187)+_0x2f42c1[_0x3175be(0x20f)]+_0x3175be(0x1fd)+_0x2f42c1[_0x3175be(0x283)]+'\x20|\x20'+_0x2f42c1[_0x3175be(0x1ef)]+_0x3175be(0x14d)+_0x2f42c1[_0x3175be(0x290)]+_0x3175be(0x1fd)+_0x2f42c1['id']);let _0x1a50be=_0x2f42c1[_0x3175be(0x283)],_0x42ed25=![];currentCoins[_0x3175be(0x1d8)](_0x3a94fd=>{const _0x4add0d=_0x3175be;_0x3a94fd[_0x4add0d(0x20f)]==_0x2f42c1[_0x4add0d(0x20f)]&&(_0x42ed25=!![]);});if(!_0x42ed25)return;const _0x858a00=currentCoins[_0x3175be(0x1a0)](_0x569ace=>_0x569ace[_0x3175be(0x20f)]==_0x2f42c1['symbol']),_0x3ef7fe=_0x858a00['coin'],_0xe9f85b=_0x696b5b=>{const _0xcaa7be=_0x3175be,_0x17621f=currentCoins[_0xcaa7be(0x1a0)](_0x3d180d=>_0x3d180d[_0xcaa7be(0x20f)]==_0x2f42c1[_0xcaa7be(0x20f)]);if(_0x17621f)_0x17621f[_0xcaa7be(0x29f)]=_0x696b5b;};let _0x571bf1=![];for(const _0x267af1 of lastOrders){const _0xf2b81c=0x64,_0xbcd275=0x1388;let _0x46eb0f=0x0;while(!_0x267af1[_0x3175be(0x1fc)]&&_0x46eb0f*_0xf2b81c<_0xbcd275){_0x46eb0f++,await sleep(_0xf2b81c);}if(_0x46eb0f>0x0)logger[_0x3175be(0x243)](_0x3175be(0x104)+_0x46eb0f*_0xf2b81c/0x3e8+_0x3175be(0x26a));_0x267af1[_0x3175be(0x1fc)]==_0x2f42c1['id']&&(_0x571bf1=!![]);}if(_0x1a50be==_0x3175be(0x29b)){_0xe9f85b(_0x3175be(0x29b));if(_0x2f42c1['filled']>0x0&&_0x2f42c1['filled']<_0x2f42c1['amount']){if(_0x571bf1){setBlockTransactionDetection(!![]),logger[_0x3175be(0x243)](_0x3175be(0x216)+_0x2f42c1[_0x3175be(0x1ef)]+')\x20known\x20order:\x20'+_0x2f42c1['id']);const _0x5638e8=await getCoins(balanceUpdateDelay,undefined,undefined,_0x3ef7fe);[currentCoins,currentCoinsAll]=_0x5638e8,setBlockTransactionDetection(![]);}else logger[_0x3175be(0x243)](_0x3175be(0x216)+_0x2f42c1[_0x3175be(0x1ef)]+_0x3175be(0x136)+_0x2f42c1['id']),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay);}}else{if(_0x1a50be==_0x3175be(0x266)){_0xe9f85b(_0x3175be(0x266)),lastOrders=lastOrders[_0x3175be(0x170)](_0x4d8540=>_0x4d8540[_0x3175be(0x20f)]!=_0x2f42c1['symbol']);const _0x615e95=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x615e95,setBlockTransactionDetection(![]),await getOpenOrders(),handleOpenOrders();}else{if(_0x1a50be=='closed'){if(lastOrders)for(const _0x5059aa of lastOrders){if(_0x5059aa[_0x3175be(0x1fc)]==_0x2f42c1['id']){logger[_0x3175be(0x243)](_0x3175be(0x138)+_0x2f42c1['id']),_0x571bf1=!![];if(_0x5059aa[_0x3175be(0x1ef)]==0x0){setBlockTransactionDetection(!![]),logger[_0x3175be(0x243)](_0x3175be(0x193)+_0x2f42c1['id']);if(_0x2f42c1[_0x3175be(0x121)])_0x5059aa[_0x3175be(0x18d)]=_0x2f42c1[_0x3175be(0x121)];else{if(_0x2f42c1[_0x3175be(0x18d)])_0x5059aa[_0x3175be(0x18d)]=_0x2f42c1[_0x3175be(0x18d)];else{}}_0x5059aa[_0x3175be(0x1ef)]=_0x2f42c1['filled'],updateHighestFee(_0x5059aa);const _0x506d75=await getCoins(balanceUpdateDelay,undefined,undefined,_0x3ef7fe);[currentCoins,currentCoinsAll]=_0x506d75,setBlockTransactionDetection(![]),await validateOrders(),_0xe9f85b(_0x3175be(0x1ef)),_0x5059aa[_0x3175be(0x115)]={'currency':_0x2f42c1[_0x3175be(0x115)]?_0x2f42c1['fee'][_0x3175be(0x117)]:null,'cost':_0x2f42c1[_0x3175be(0x115)]?_0x2f42c1[_0x3175be(0x115)][_0x3175be(0x28b)]:0x0},await updatePnL(_0x5059aa);}}}!_0x571bf1&&(logger[_0x3175be(0x243)](_0x3175be(0x13e)+_0x2f42c1['id']),_0xe9f85b(_0x3175be(0x1ef)),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay),await updateOpenOrders(),handleOpenOrders());}}}if(lastBalances){let _0x15c71b=JSON[_0x3175be(0x297)](lastBalances['portfolio']);const _0x1c6371=_0x15c71b['find'](_0x42aa06=>_0x42aa06['symbol']==_0x2f42c1[_0x3175be(0x20f)]);if(_0x1c6371){if(_0x1a50be==_0x3175be(0x29b))_0x1c6371['orderstatus']=_0x1c6371['orderstatus']=='filled'?_0x3175be(0x1ef):_0x3175be(0x29b);else{if(_0x1a50be=='canceled')_0x1c6371[_0x3175be(0x29f)]=_0x1c6371[_0x3175be(0x29f)]=='filled'?_0x3175be(0x1ef):_0x3175be(0x266);else _0x1a50be==_0x3175be(0x212)&&(_0x1c6371[_0x3175be(0x29f)]='filled');}}lastBalances={...lastBalances,'portfolio':JSON[_0x3175be(0x102)](_0x15c71b)},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x379213=_0x4a79e6;await getOpenOrders();let _0x34f56a=![];currentCoins[_0x379213(0x1d8)](_0x488801=>{const _0x3b40d4=_0x379213;_0x34f56a=allOpenOrders['find'](_0xcad1d8=>_0xcad1d8[_0x3b40d4(0x20f)]==_0x488801[_0x3b40d4(0x20f)]),_0x488801['orderstatus']=_0x34f56a?_0x3b40d4(0x29b):_0x3b40d4(0x263);});}async function fetchBalance(_0x141208=!![]){const _0x2e9d51=_0x4a79e6;let _0x1302b9,_0x1ba686,_0xa0f0,_0x5bc3da=0x0;while(!_0x1ba686&&_0x5bc3da<maxRetries){try{return _0x1302b9=await exchange[_0x2e9d51(0x2b1)](),_0x1ba686=_0x1302b9[_0x2e9d51(0x1bf)],_0x1ba686;}catch(_0x41b2d0){_0xa0f0=_0x41b2d0,_0x5bc3da++,await sleep(retryInterval);}}return!_0x141208?handleErrorNoStop(_0xa0f0,_0x2e9d51(0x10f)):await handleError(_0xa0f0,'fetchBalance()'),![];}async function getCoins(_0xc87530=0x0,_0x23629c=!![],_0x4d1c6d=config['basecoin'],_0x935493){const _0x1cb333=_0x4a79e6;let _0x3834d8=[],_0x300c2c=[],_0x49508a=[],_0x590070;if(_0xc87530)await sleep(_0xc87530);if(botPaused)return[currentCoins,currentCoinsAll];let _0x43f9d4=![],_0x21ea1e=0x0,_0x1c8635,_0x12c69a;_0x935493&&(_0x1c8635=currentCoins[_0x1cb333(0x1a0)](_0x4b59ed=>_0x4b59ed[_0x1cb333(0x252)]==_0x935493),_0x1c8635&&(_0x12c69a=_0x1c8635[_0x1cb333(0x1f6)],delete _0x1c8635['prevnumber']));while(!_0x43f9d4){_0x590070=await fetchBalance(_0x23629c);if(_0x590070){if(_0x935493){if(_0x590070[_0x935493]!=_0x12c69a)logger[_0x1cb333(0x243)]('Valid\x20balance\x20for\x20'+_0x935493+':\x20'+_0x590070[_0x935493]+'\x20('+_0x12c69a+')'),_0x43f9d4=!![];else{logger['debug']('Invalid\x20balance\x20for\x20'+_0x935493+':\x20'+_0x590070[_0x935493]+'\x20('+_0x12c69a+')'),_0x21ea1e++;if(_0x21ea1e<balanceUpdateRetries)await sleep(balanceUpdateDelay);else{logger[_0x1cb333(0x243)](_0x1cb333(0x258)+_0x21ea1e+'\x20attempts');break;}}}else break;}else return[currentCoins,currentCoinsAll];}for(const [_0x755ad3,_0x4c988b]of Object[_0x1cb333(0x180)](_0x590070)){_0x49508a[_0x1cb333(0x134)](_0x755ad3);}config[_0x1cb333(0x15a)]['forEach'](_0x376b5e=>{const _0x2df005=_0x1cb333;!_0x49508a['includes'](_0x376b5e[_0x2df005(0x252)])&&(_0x590070[_0x376b5e[_0x2df005(0x252)]]=0x0);});if(_0x4d1c6d=='')for(const [_0x2065a,_0x3ce957]of Object[_0x1cb333(0x180)](_0x590070)){_0x3ce957!=0x0&&_0x3834d8[_0x1cb333(0x134)]({'coin':_0x2065a});}else for(const [_0x4e1f51,_0x118d11]of Object[_0x1cb333(0x180)](_0x590070)){const _0x22b740=config[_0x1cb333(0x15a)][_0x1cb333(0x1a0)](_0x10a2d1=>_0x10a2d1['coin']==_0x4e1f51),_0x19240e=_0x4e1f51+'/'+_0x4d1c6d,_0x4dbac4=_0x4d1c6d+'/'+_0x4e1f51,_0x2e625c=currentCoins[_0x1cb333(0x1a0)](_0x5c1ab9=>_0x5c1ab9[_0x1cb333(0x252)]==_0x4e1f51);if((_0x118d11!=0x0||_0x22b740)&&(allSymbols[_0x1cb333(0x168)](_0x19240e)||_0x4e1f51==_0x4d1c6d))_0x2e625c?_0x3834d8[_0x1cb333(0x134)]({..._0x2e625c,'number':Math[_0x1cb333(0x256)](_0x118d11+(_0x22b740&&_0x22b740[_0x1cb333(0x12b)]||0x0),0x0)}):_0x3834d8['push']({'coin':_0x4e1f51,'symbol':_0x19240e,'reverse':![],'number':Math[_0x1cb333(0x256)](_0x118d11+(_0x22b740&&_0x22b740[_0x1cb333(0x12b)]||0x0),0x0),'orderstatus':_0x1cb333(0x263)});else{if((_0x118d11!=0x0||_0x22b740)&&allSymbols[_0x1cb333(0x168)](_0x4dbac4))_0x2e625c?_0x3834d8[_0x1cb333(0x134)]({..._0x2e625c,'number':Math['max'](_0x118d11+(_0x22b740&&_0x22b740[_0x1cb333(0x12b)]||0x0),0x0)}):_0x3834d8[_0x1cb333(0x134)]({'coin':_0x4e1f51,'symbol':_0x4dbac4,'reverse':!![],'number':Math[_0x1cb333(0x256)](_0x118d11+(_0x22b740&&_0x22b740[_0x1cb333(0x12b)]||0x0),0x0),'orderstatus':_0x1cb333(0x263)});else _0x22b740&&_0x3834d8[_0x1cb333(0x134)]({'coin':_0x22b740[_0x1cb333(0x252)],'symbol':_0x22b740['symbol'],'reverse':_0x22b740['reverse'],'number':0x0,'orderstatus':_0x1cb333(0x263)});}}return _0x3834d8[_0x1cb333(0x1ed)]((_0x572a00,_0x413b07)=>_0x572a00[_0x1cb333(0x156)]<_0x413b07['delta']?0x1:_0x413b07[_0x1cb333(0x156)]<_0x572a00[_0x1cb333(0x156)]?-0x1:0x0),_0x300c2c=cloneDeep(_0x3834d8),_0x3834d8=_0x3834d8[_0x1cb333(0x170)](_0x53c68a=>{const _0x3fbf22=_0x1cb333,_0x50d3b2=config[_0x3fbf22(0x15a)][_0x3fbf22(0x1a0)](_0x9bfbd3=>_0x9bfbd3[_0x3fbf22(0x252)]==_0x53c68a['coin']);return _0x50d3b2&&!_0x50d3b2['excluded'];}),[_0x3834d8,_0x300c2c];}async function getOpenOrders(){const _0x4cf069=_0x4a79e6;let _0x5c9d20;allOpenOrders=[];try{for(const _0x5f5490 of config['portfolio']){!_0x5f5490[_0x4cf069(0x23a)]&&_0x5f5490[_0x4cf069(0x252)]!=config[_0x4cf069(0x192)]&&(_0x5c9d20=await exchange[_0x4cf069(0x148)](_0x5f5490[_0x4cf069(0x20f)]),_0x5c9d20[_0x4cf069(0x229)]>0x0&&allOpenOrders[_0x4cf069(0x134)](_0x5c9d20[0x0]));}}catch(_0x1ab282){await handleError(_0x1ab282,_0x4cf069(0x172));}}async function handleOpenOrders(_0x2f061b=0x0){const _0x18bfdc=_0x4a79e6;allOpenOrders[_0x18bfdc(0x229)]==0x0&&lockOrders==ORDERS['LOCKED']&&allOrdersPlaced&&(_0x2f061b==0x0?(logger[_0x18bfdc(0x243)](_0x18bfdc(0x160)),_0x2f061b++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x18bfdc(0x243)]('2\x20-\x20Handled\x20open\x20orders'),validateOrders(_0x18bfdc(0x1b3))));}async function testAPI(){const _0x269f57=_0x4a79e6;try{return await exchange[_0x269f57(0x2b1)](),!![];}catch(_0x2c2aa2){loading[_0x269f57(0x279)]=!![],_0x2c2aa2['toString']()[_0x269f57(0x124)]()[_0x269f57(0x168)](_0x269f57(0xef))||_0x2c2aa2[_0x269f57(0x10c)]()['toLowerCase']()[_0x269f57(0x168)](_0x269f57(0x12e))?(logHistory(_0x269f57(0x122),_0x269f57(0xf7)),loading[_0x269f57(0x122)]='timestamp-issue'):handleErrorNoStop(_0x2c2aa2,'testAPI()',!![]),logHistory(_0x269f57(0x122),'Failed\x20to\x20connect\x20to\x20the\x20exchange\x20-\x20bot\x20not\x20started'),logHistory(_0x269f57(0x122),_0x269f57(0x294)+loadCoinsRetryInterval/0xea60+_0x269f57(0x270)),logger[_0x269f57(0x243)](_0x269f57(0x271),_0x2c2aa2),emitLoadingProgress(),botPaused=!![],await sleep(loadCoinsRetryInterval),restartBot();}}function _0x52ac(){const _0xcfece2=['unlinkSync','Will\x20continue\x20to\x20wait\x20for\x20order(s)\x20to\x20be\x20filled\x20and\x20try\x20to\x20cancel\x20again\x20later','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','\x20/\x20',':\x20Bot\x20','pid','pop','watchTradesForSymbols','remainingSymbols','-results.json','changes','set','delta','RETRY\x20-\x20Error\x20in\x20','coin-loading-progress','resetHistory','portfolio','string','format','370035hqprMY','\x20hour','sell','1\x20-\x20Handle\x20open\x20orders','pro','Exchange\x20permission\x20denied\x20-\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','slice','Manual\x20balancing\x20required','change24h','usd','substring','includes','padStart','apiSecret','getSeconds','30909qWlzNG','loadSymbols()','Insufficient\x20funds\x20to\x20execute\x20order:\x20','addDays','filter','./logs/','getOpenOrders()','PermissionDenied','Huobipro','\x20>\x20pausing\x20bot\x20for\x20','memoryUsage','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','startdate','trade','Limit\x20(high-margin)','portfolio2','round','watchOrders','1340WpFSHM','apiKey','entries','botID','testApi','Net\x20','switch-manual','\x20-\x20bot\x20already\x20running\x20in\x20manual\x20mode','reverse','0\x20-\x20EXECUTION:\x20','Portfolio\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','enableFiatToggle','emitHistory','MIN_NOTIONAL','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','price','651672ksCihv','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)','ccxt','Invalid\x20API\x20details,\x20please\x20try\x20again\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','basecoin','2\x20-\x20handling\x20FILLED\x20order:\x20','-events.json','sandbox','Loading\x20completed','Unfilled\x20order(s)\x20canceled\x20after\x20','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','%\x20(','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','value','cooldown','padEnd','net-fiat','lowdb','find','openOrders','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','EUR','apiPassword','getMonth','toggleBotMode','event-history','ask','OrderNotFound','</pre>','\x20>\x20','writeFile','1776966OftcuV','ExchangeError','privateKey','argv','decode64','startprice','no\x20open\x20orders','fetchTickers()','shift','\x20>\x20details:','headless','progress','join','/USD','freeze','constructor','apply','InsufficientFunds','total','must\x20be\x20greater\x20than\x20minimum\x20amount','cancelLoading','Generated\x20PnL\x20data','Error\x20details:\x20','Market\x20order','-------------------------------\x0a','Avoiding\x20continuous\x20order\x20attempts','Error\x20in\x20testNewAPI():\x20','\x20exchange','Trigger:\x20','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20for\x20','(((.+)+)+)+$','Bitget','autoliquidity','replace','PnL\x20','5775016TBInEn','success','\x20-\x20','emojisell','\x20due\x20to\x20offset','balancing\x20resumes\x20when\x20cooldown\x20ends','logs','fetchTickers','forEach','\x20-\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','distribution','production','ETH','\x20API\x20key\x20is\x20invalid','getStartingBalances','Portfolio\x20change\x20detected:\x20','<b>Bot\x20','spot','cloneDeep','************','red_yellow_blue','Reset\x20|\x20','running','Error\x20in\x20loadSymbols():\x20','Failed\x20to\x20load\x20coin\x20data\x20for\x20','<pre>','USDT','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','settings','sort','removed','filled','limit-low','node-forge','process\x20','watchOrders()','***','ongoing','prevnumber','findIndex','storeFiat','watchTradesForSymbols()','Invalid\x20quantity','LOCKED','orderId','\x20|\x20','configuration','Unfilled\x20order(s)\x20could\x20not\x20be\x20canceled\x20after\x20','getDate','last','deleteHistoryAlerts','recreate','bots','sha256','bot','complete','timeout','botname','exchange\x20reload','quote','showConfig','map','sortBy','symbol','ExchangeNotAvailable','secret','closed','\x20not\x20responding\x20(see:\x20hodlerhacks.com/fix/5)','decrypt','268FtQeov','1\x20-\x20partially\x20FILLED\x20(','\x20portfolio:</b>\x20\x0a\x0a','2.3.5','.json','limit','yargs/yargs','RSA-OAEP','assign','axios','limits','starting-balance-','Network\x20error\x20details:','pnl','splice','No\x20more\x20open\x20orders\x20-\x20','sqrt','uncaughtException','timeshift','has','length','active','createOrder','colorscheme','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','20UihWBf','Exception\x20thrown\x20in\x20','eur','getFullYear','data','USD','net-basecoin','Unknown\x20error:\x20','coins','sendMetricsTelegram','pnl-basecoin','2.6.23','excluded','threshold','Saving\x20configuration','DDoSProtection','\x0aSymbol(s):\x20','yyyy/MM/dd','split','search','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','debug','1150359fCZlaa','recent20','%)\x0a','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','customId','message','toFixed','\x20order:\x20','PAXG','fetchTicker','final','\x20>\x20[DEBUG]\x20','no\x20exchange\x20reloaded','emojibuy','coin','InvalidOrder','Initializing\x20exchange:\x20already\x20done','watchTrades','max','\x20metrics:</b>\x20\x0a\x0a','Stopped\x20fetching\x20balance\x20after\x20','remove','showname','UNLOCKED','USDP','loading-canceled','time','121707ceZpMC','\x20-\x20bot\x20not\x20started','bb-settings.json','\x20blocked\x20API\x20(RateLimitExceeded)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','none','write','setSandboxMode','canceled','buy','\x20MB','AuthenticationError','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','\x20network\x20error:\x20','environment',':\x20timer\x20>','Block\x20transaction\x20detection:\x20','get','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','Error\x20details:','ordertype','Fee\x20discount\x20refund\x20detected:\x20','configstate','\x20minutes','sells','warning','marketcap','cancel','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','./version.json','kill','initial','fromCodePoint','differenceInSeconds','Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute','enabled','\x20exchange\x20error:\x20','status','privateKeyFromPem','slider','configuration-stored','pnl-fiat','getMinutes','Resuming\x20(','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','cost','getTime','Executed\x20','netoffset','event','amount','indexOf','balancing\x20resumed',')\x20|\x20exchange:\x20','Pausing\x20for\x20','keys','secure','parse','floor','./config/','balances','open','\x20|\x20exchange:\x20','full','marketcapEnabled','orderstatus','Cex','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','added','breakeven','date-fns','mkdirSync','amountToPrecision','createWriteStream','Order\x20amount\x20is\x20invalid:\x20','lowdb/adapters/FileSync','highest','Error\x20occurred:\x20','exchanges','Value\x20','USDC','Invalid\x20symbol:\x20','net','fetchBalance','Exchange','getHours','\x20-\x20bot\x20switched\x20to\x20manual\x20mode','path','marketcapsqrt','timestamp','onepagemode','market_cap','Initiating\x20bot\x20restart','status\x20code\x20401','Bot\x20','order','Limit\x20(low-margin)','Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)','limit-high','Insufficient\x20funds\x20to\x20place\x20order\x20for\x20','cancelOrders()','\x20API\x20key,\x20secret\x20or\x20password\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','exchange','heapUsed','bid','percentage','type','<b>','stringify','basecoinvalue','Waited\x20','getPortfolio','\x20not\x20available\x20(see:\x20hodlerhacks.com/fix/5)','OnMaintenance','function','util','market','args','toString','Error:\x20Invalid\x20argument\x20','fiat','fetchBalance()','Market','detectLiquidityChange()','update-liquidity','isEqual','log','fee',',\x20must\x20be\x20a\x203\x20digit\x20number','currency','RequestTimeout','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','performance','startnumber','starting-balances','Order\x20filled','pki','Gateio','Bybit','average','error','send','toLowerCase','valid','side','/USDT','portfolio1','abs','page','offset','date','initclient','request-time','2\x20-\x20Validate\x20orders:\x20','existsSync','\x20minutes\x20-\x20','quick','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','push','API-key\x20format\x20invalid',')\x20unknown\x20order:\x20','number','1\x20-\x20FILLED\x20known\x20order:\x20','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','target','placeOrder','/EUR','min','1\x20-\x20FILLED\x20unknown\x20order:\x20','BTC','\x20orders\x20in\x20less\x20than\x20','version','change','marketcapApi','isBefore','defaults','liquidity','bot-','fetchOpenOrders','-performance.json'];_0x52ac=function(){return _0xcfece2;};return _0x52ac();}async function testNewAPI(_0x1ee589){const _0x2ec3d2=_0x4a79e6;logger[_0x2ec3d2(0x243)]('Test\x20new\x20API');const _0x1ed72c=ccxt[_0x2ec3d2(0x161)][_0x1ee589[_0x2ec3d2(0xfc)][_0x2ec3d2(0x124)]()],_0x1a6a70=new _0x1ed72c({'apiKey':_0x1ee589[_0x2ec3d2(0x17f)],'secret':_0x1ee589[_0x2ec3d2(0x16a)],'options':{'defaultType':_0x2ec3d2(0x1e1)}});if(_0x1ee589[_0x2ec3d2(0x1a4)])_0x1a6a70['password']=_0x1ee589[_0x2ec3d2(0x1a4)];if(_0x1a6a70[_0x2ec3d2(0x228)]['sandbox'])_0x1a6a70['setSandboxMode'](_0x1ee589[_0x2ec3d2(0x195)]);try{await _0x1a6a70[_0x2ec3d2(0x2b1)](),botPaused=![];}catch(_0x5abc15){logger[_0x2ec3d2(0x243)](_0x2ec3d2(0x1c7)+_0x5abc15[_0x2ec3d2(0x10c)]());throw _0x5abc15;}}function cloneDeep(_0x3d77cd){const _0x3683c4=_0x4a79e6;return JSON[_0x3683c4(0x297)](JSON['stringify'](_0x3d77cd));}async function getPortfolio(_0x209984){const _0xa8a059=_0x4a79e6;let _0x427b09=[],_0x1d8619=[],_0x465ce3=[],_0x4933f2;_0x209984[_0xa8a059(0x17f)]=decryptRSA(secure[_0xa8a059(0x1af)],_0x209984[_0xa8a059(0x17f)]),_0x209984[_0xa8a059(0x16a)]=decryptRSA(secure[_0xa8a059(0x1af)],_0x209984[_0xa8a059(0x16a)]);if(_0x209984[_0xa8a059(0x1a4)])_0x209984[_0xa8a059(0x1a4)]=decryptRSA(secure[_0xa8a059(0x1af)],_0x209984[_0xa8a059(0x1a4)]);if(_0x209984[_0xa8a059(0x17f)]!==_0xa8a059(0x1e3)||_0x209984[_0xa8a059(0x16a)]!==_0xa8a059(0x1e3)||_0x209984['apiPassword']&&_0x209984['apiPassword']!==_0xa8a059(0x1e3)){if(config['exchange']){if(_0x209984[_0xa8a059(0x17f)]==_0xa8a059(0x1e3))_0x209984['apiKey']=config[_0xa8a059(0x17f)];if(_0x209984[_0xa8a059(0x16a)]==_0xa8a059(0x1e3))_0x209984['apiSecret']=config[_0xa8a059(0x16a)];if(_0x209984[_0xa8a059(0x1a4)]==_0xa8a059(0x1e3))_0x209984[_0xa8a059(0x1a4)]=config[_0xa8a059(0x1a4)];}try{if(_0x209984[_0xa8a059(0x182)])await testNewAPI(_0x209984);}catch(_0x4aafd6){if(_0x4aafd6[_0xa8a059(0x10c)]()['includes'](_0xa8a059(0x269))){logHistory('error',_0xa8a059(0x191)),logHistory(_0xa8a059(0x122),_0xa8a059(0x1c3)+_0x4aafd6['toString']()),proxyEmit(_0xa8a059(0x128),![]);return;}else{if(_0x4aafd6['toString']()[_0xa8a059(0x168)](_0xa8a059(0x173))){logHistory('error',_0xa8a059(0x162)),logHistory('error',_0xa8a059(0x1c3)+_0x4aafd6[_0xa8a059(0x10c)]()),proxyEmit(_0xa8a059(0x128),![]);return;}else{logHistory(_0xa8a059(0x122),_0xa8a059(0x2ab)+_0x4aafd6[_0xa8a059(0x10c)]()),logger['debug'](_0xa8a059(0x271),_0x4aafd6),proxyEmit(_0xa8a059(0x128),![]);return;}}}exchange?updateExchange(_0x209984[_0xa8a059(0x17f)],_0x209984['apiSecret'],_0x209984[_0xa8a059(0x1a4)]):await initExchange(_0x209984[_0xa8a059(0xfc)],_0x209984['apiKey'],_0x209984[_0xa8a059(0x16a)],_0x209984[_0xa8a059(0x1a4)],_0x209984[_0xa8a059(0x195)]);await loadSymbols();const _0x16af6f=await getCoins(0x0,![],_0x209984[_0xa8a059(0x192)]);_0x465ce3=cloneDeep(_0x16af6f[0x1]);}else{const _0x112be7=await getCoins();_0x465ce3=cloneDeep(_0x112be7[0x1]);}if(_0x209984[_0xa8a059(0x192)]=='')proxyEmit(_0xa8a059(0x128),!![]),proxyEmit(_0xa8a059(0x17b),_0x465ce3);else{_0x465ce3[_0xa8a059(0x1d8)](_0x3a71c2=>{const _0x2bc083=_0xa8a059;if(_0x3a71c2[_0x2bc083(0x252)]!=_0x209984[_0x2bc083(0x192)]&&allSymbols[_0x2bc083(0x168)](_0x3a71c2['symbol']))_0x427b09['push'](_0x3a71c2['symbol']);});if(_0x427b09[_0xa8a059(0x229)]==0x0)logHistory(_0xa8a059(0x122),_0xa8a059(0x19a));else{try{_0x1d8619=await getTickers(_0x427b09);}catch(_0x3f1202){logHistory(_0xa8a059(0x122),'Unknown\x20error\x20-\x20check\x20logs'),logger['debug'](_0xa8a059(0x271),_0x3f1202),proxyEmit(_0xa8a059(0x128),![]);return;}_0x465ce3[_0xa8a059(0x1d8)](_0x2b591d=>{const _0x4891d0=_0xa8a059;_0x2b591d[_0x4891d0(0x252)]!=_0x209984['basecoin']?_0x1d8619[_0x2b591d[_0x4891d0(0x20f)]]?_0x1d8619[_0x2b591d[_0x4891d0(0x20f)]]['last']?_0x4933f2=_0x2b591d[_0x4891d0(0x186)]?0x1/_0x1d8619[_0x2b591d[_0x4891d0(0x20f)]][_0x4891d0(0x201)]:_0x1d8619[_0x2b591d[_0x4891d0(0x20f)]]['last']:_0x4933f2=0x0:_0x4933f2=0x0:_0x4933f2=0x1,_0x2b591d[_0x4891d0(0x18d)]=formatResult(_0x4933f2,0x8);}),await getMarketCap(_0x465ce3),proxyEmit(_0xa8a059(0x128),!![]),proxyEmit(_0xa8a059(0x17b),_0x465ce3);}}}function truncateTradeAmount(_0x4baeda,_0x1a08bb){const _0x420f5f=_0x4a79e6;let _0xf9d1cb=0x0;try{_0xf9d1cb=exchange[_0x420f5f(0x2a6)](_0x4baeda,_0x1a08bb);}catch(_0x941cd4){}return _0xf9d1cb;}function checkMinimums(_0x59f77e){const _0x3b367c=_0x4a79e6;let _0x16a244=!![];const _0x9b31d2=!_0x59f77e[_0x3b367c(0x186)]?markets[_0x59f77e['symbol']]['limits'][_0x3b367c(0x290)]['min']:markets[_0x59f77e[_0x3b367c(0x20f)]][_0x3b367c(0x21f)][_0x3b367c(0x28b)][_0x3b367c(0x13d)],_0x1d8124=!_0x59f77e[_0x3b367c(0x186)]?markets[_0x59f77e[_0x3b367c(0x20f)]][_0x3b367c(0x21f)][_0x3b367c(0x28b)][_0x3b367c(0x13d)]:markets[_0x59f77e[_0x3b367c(0x20f)]][_0x3b367c(0x21f)][_0x3b367c(0x290)]['min'],_0x5bbd82=truncateTradeAmount(_0x59f77e[_0x3b367c(0x20f)],_0x59f77e[_0x3b367c(0x179)]);_0x59f77e[_0x3b367c(0x179)]=_0x5bbd82;if(Math[_0x3b367c(0x129)](_0x5bbd82)<_0x9b31d2)_0x16a244=![];if(Math['abs'](_0x5bbd82)*_0x59f77e[_0x3b367c(0x201)]<_0x1d8124)_0x16a244=![];let _0x51c9b2='';if(_0x59f77e[_0x3b367c(0x126)]==_0x3b367c(0x15f)){let _0x1ac0f0=config[_0x3b367c(0x15a)][_0x3b367c(0x1a0)](_0x5704f4=>_0x5704f4[_0x3b367c(0x252)]==_0x59f77e[_0x3b367c(0x252)]);_0x1ac0f0[_0x3b367c(0x12b)]>0x0?Math[_0x3b367c(0x129)](_0x5bbd82)>_0x59f77e[_0x3b367c(0x137)]-_0x1ac0f0['offset']&&(_0x16a244=![],_0x51c9b2='Insufficient\x20funds\x20to\x20place\x20order\x20for\x20'+_0x1ac0f0['coin']+_0x3b367c(0x1d4)):Math[_0x3b367c(0x129)](_0x5bbd82)>_0x59f77e[_0x3b367c(0x137)]&&(_0x16a244=![]);}if(_0x59f77e[_0x3b367c(0x126)]==_0x3b367c(0x267)){let _0x5ada6c=config[_0x3b367c(0x15a)][_0x3b367c(0x1a0)](_0x29446e=>_0x29446e[_0x3b367c(0x252)]==config['basecoin']),_0x4710f6=currentCoins[_0x3b367c(0x1a0)](_0x55672c=>_0x55672c[_0x3b367c(0x252)]==config[_0x3b367c(0x192)]);_0x5ada6c['offset']>0x0?Math[_0x3b367c(0x129)](_0x5bbd82)*_0x59f77e[_0x3b367c(0x201)]>_0x4710f6[_0x3b367c(0x137)]-_0x5ada6c[_0x3b367c(0x12b)]&&(_0x16a244=![],_0x51c9b2=_0x3b367c(0xf9)+config[_0x3b367c(0x192)]+_0x3b367c(0x1d4)):Math[_0x3b367c(0x129)](_0x5bbd82)*_0x59f77e[_0x3b367c(0x201)]>_0x4710f6[_0x3b367c(0x137)]&&(_0x16a244=![]);}return!_0x16a244&&_0x51c9b2&&!insufficientFundsWarningSent[_0x3b367c(0x168)](_0x59f77e['coin'])&&(logHistory('warning',_0x51c9b2),insufficientFundsWarningSent[_0x3b367c(0x134)](_0x59f77e[_0x3b367c(0x252)])),_0x16a244;}async function getBalances(_0x482441=!![]){const _0x5f1ea0=_0x4a79e6;if(botPaused)return;let _0x2dccc1=0x0,_0x1eb6ac;const _0xeaea2f=config['threshold'];if(config[_0x5f1ea0(0x1b7)]&&config[_0x5f1ea0(0x165)]<0x0)await validate24hChanges();currentCoins[_0x5f1ea0(0x1d8)](_0x33b427=>{const _0x454212=_0x5f1ea0;if(_0x33b427[_0x454212(0x252)]!=config['basecoin']){let _0xca96b8=gTicker[noslash(_0x33b427[_0x454212(0x20f)])];_0x1eb6ac=_0x33b427[_0x454212(0x186)]?0x1/_0xca96b8:_0xca96b8;}else _0x1eb6ac=0x1;let _0x1b0573=_0x33b427[_0x454212(0x137)]*_0x1eb6ac;_0x2dccc1+=_0x1b0573,_0x33b427[_0x454212(0x201)]=formatResult(Number(_0x1eb6ac),0x8),_0x33b427[_0x454212(0x19b)]=_0x1b0573;}),currentCoins[_0x5f1ea0(0x1d8)](_0x38f574=>{const _0x4442ce=_0x5f1ea0;let _0x215e38=config['portfolio'][_0x4442ce(0x1a0)](_0x4ac5f5=>_0x4ac5f5[_0x4442ce(0x252)]==_0x38f574[_0x4442ce(0x252)]),_0x3c3ddc=Number(_0x215e38[_0x4442ce(0x1da)]),_0x1b4122=_0x38f574['value']/_0x2dccc1*0x64,_0x6d8fb2=_0x3c3ddc*_0x2dccc1/0x64/_0x38f574[_0x4442ce(0x201)]-_0x38f574['number'];_0x38f574['distribution']=formatResult(_0x1b4122,0x3),_0x38f574['target']=formatResult(_0x3c3ddc,0x3),_0x38f574['trade']=formatResult(_0x6d8fb2,0x8),_0x38f574[_0x4442ce(0x126)]='',_0x38f574[_0x4442ce(0x125)]=![];if(_0x38f574[_0x4442ce(0x252)]!=config[_0x4442ce(0x192)]){if(_0x38f574[_0x4442ce(0x1da)]>_0x3c3ddc)_0x38f574[_0x4442ce(0x126)]='sell',_0x38f574[_0x4442ce(0x125)]=checkMinimums(_0x38f574);else _0x38f574[_0x4442ce(0x1da)]<_0x3c3ddc&&(_0x38f574['side']=_0x4442ce(0x267),_0x38f574[_0x4442ce(0x125)]=checkMinimums(_0x38f574));}_0x38f574[_0x4442ce(0x156)]=_0x38f574[_0x4442ce(0x1da)]/_0x38f574[_0x4442ce(0x13a)]-0x1;if(_0x38f574[_0x4442ce(0x29f)]=='filled'||_0x38f574[_0x4442ce(0x29f)]=='canceled')_0x38f574[_0x4442ce(0x29f)]=_0x4442ce(0x263);}),currentCoins['sort']((_0x3873f2,_0x2c655c)=>_0x3873f2[_0x5f1ea0(0x156)]<_0x2c655c[_0x5f1ea0(0x156)]?0x1:_0x2c655c[_0x5f1ea0(0x156)]<_0x3873f2[_0x5f1ea0(0x156)]?-0x1:0x0);const _0x1c6ef7=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x1c6ef7[_0x5f1ea0(0x230)],'usd':_0x1c6ef7[_0x5f1ea0(0x166)],'portfolio':JSON['stringify'](currentCoins),'threshold':_0xeaea2f},proxyEmit(_0x5f1ea0(0x29a),{'serverversion':serverversion,'balances':lastBalances});if(_0x482441){if(config['headless'])headlessMode({'portfolio':currentCoins,'threshold':_0xeaea2f});else lockOrders==ORDERS['UNLOCKED']&&!coolingDown&&notifyBalance({'portfolio':currentCoins,'threshold':_0xeaea2f});}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x16375f=getNormalizedPerformance();getStartingBalances(_0x16375f),emitPerformance(_0x16375f);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}function getPnL(){const _0x22a473=_0x4a79e6;let _0x487eea=dbCoinResults[_0x22a473(0x26f)](_0x22a473(0x236))[_0x22a473(0x19b)](),_0x31b9fb=0x0;return Object[_0x22a473(0x180)](_0x487eea)['forEach'](([_0x1561c6,_0x5b6f7f])=>{_0x31b9fb+=_0x5b6f7f['realizedPnL'];}),_0x31b9fb;}async function storePerformance(){const _0x395df1=_0x4a79e6;if(!lastBalances)return;let _0x5204c3=[],_0x55309a;const _0x3b4269=getPnL();let _0x306415=JSON[_0x395df1(0x297)](lastBalances[_0x395df1(0x15a)]);_0x306415[_0x395df1(0x1ed)]((_0x353635,_0x5d8c9a)=>_0x353635[_0x395df1(0x252)]>_0x5d8c9a[_0x395df1(0x252)]?0x1:_0x5d8c9a['coin']>_0x353635['coin']?-0x1:0x0),_0x306415['forEach'](_0x4c4685=>{const _0x415a75=_0x395df1;let _0x4249eb={'coin':_0x4c4685[_0x415a75(0x252)],'number':_0x4c4685[_0x415a75(0x137)],'price':_0x4c4685[_0x415a75(0x201)]};_0x5204c3[_0x415a75(0x134)](_0x4249eb);});const _0xb16bc=await getFiat(),_0x22313c=getTimeStamp()[_0x395df1(0x240)]('\x20')[0x0],_0x59ef46=dbPerformance[_0x395df1(0x26f)](_0x395df1(0x232))[_0x395df1(0x1a0)]({'date':_0x22313c})[_0x395df1(0x19b)]();_0x55309a={'date':_0x22313c,'eur':_0xb16bc['eur'],'usd':_0xb16bc['usd'],'coins':_0x5204c3,'pnl':_0x3b4269},_0x59ef46?_0x55309a[_0x395df1(0x12c)]!=config[_0x395df1(0x178)]&&dbPerformance[_0x395df1(0x26f)](_0x395df1(0x232))[_0x395df1(0x1a0)]({'date':_0x22313c})[_0x395df1(0x21d)](_0x55309a)[_0x395df1(0x264)]():dbPerformance['get'](_0x395df1(0x232))[_0x395df1(0x134)](_0x55309a)['write'](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x304920=_0x4a79e6;let _0x411cf9=[];if(dbPerformance[_0x304920(0x228)]('data')['value']()){let _0xa90457=dbPerformance['get'](_0x304920(0x232))[_0x304920(0x1e2)]()[_0x304920(0x170)](_0x2e80ec=>{const _0x4a8a3d=_0x304920;if(_0x2e80ec[_0x4a8a3d(0x236)][_0x4a8a3d(0x229)]==0x0)return![];else return!![];})[_0x304920(0x20e)]('date')[_0x304920(0x19b)](),_0x33af5d=[...config['liquidity']];_0x33af5d[_0x304920(0x1ed)]((_0x5ad0a4,_0x569216)=>_0x5ad0a4[_0x304920(0x12c)]>_0x569216['date']?-0x1:_0x569216[_0x304920(0x12c)]>_0x5ad0a4[_0x304920(0x12c)]?0x1:0x0);let _0x31ebd9=0x1,_0x4641f2=[],_0x46a15a=0x0;_0xa90457[_0x304920(0x163)]()['reverse']()[_0x304920(0x1d8)]((_0x21d6ae,_0x142e61)=>{const _0x29e3b1=_0x304920;if(_0x33af5d[_0x46a15a]){if(_0xa90457[_0xa90457[_0x29e3b1(0x229)]-_0x142e61]&&_0x33af5d[_0x46a15a][_0x29e3b1(0x12c)]==_0xa90457[_0xa90457[_0x29e3b1(0x229)]-_0x142e61][_0x29e3b1(0x12c)]){if(_0x142e61<_0xa90457['length']){let _0x1d0063=0x0,_0x4f4654=0x0;_0xa90457[_0xa90457['length']-_0x142e61][_0x29e3b1(0x236)][_0x29e3b1(0x1d8)](_0x1c0c28=>{const _0x455e92=_0x29e3b1;_0x4f4654+=_0x1c0c28[_0x455e92(0x137)]*_0x1c0c28[_0x455e92(0x18d)];}),_0x33af5d[_0x46a15a][_0x29e3b1(0x154)][_0x29e3b1(0x1d8)](_0x41356f=>{const _0x5bdf55=_0x29e3b1;_0x1d0063+=_0x41356f[_0x5bdf55(0x137)]*_0x41356f[_0x5bdf55(0x18d)];}),_0x31ebd9*=_0x1d0063/(_0x4f4654-_0x1d0063)+0x1;}_0x46a15a++;}}let _0x192b32=0x0;_0x21d6ae['coins'][_0x29e3b1(0x1d8)](_0x1331b8=>{const _0x4ac730=_0x29e3b1;_0x192b32+=_0x1331b8[_0x4ac730(0x137)]*_0x1331b8[_0x4ac730(0x18d)];}),_0x4641f2[_0xa90457[_0x29e3b1(0x229)]-_0x142e61-0x1]=_0x192b32*(_0x31ebd9-0x1);});let _0x3d7692=[];_0x33af5d=[...config['liquidity']]||[];let _0x256071=0x0;_0x46a15a=0x0,_0xa90457[_0x304920(0x1d8)]((_0x50c068,_0xcf71f5)=>{const _0x24c457=_0x304920;if(_0x33af5d[_0x46a15a]){const _0x32cb59=fns[_0x24c457(0x297)](_0x33af5d[_0x46a15a][_0x24c457(0x12c)],_0x24c457(0x23f),new Date()),_0x1d9806=fns[_0x24c457(0x297)](_0x50c068[_0x24c457(0x12c)],_0x24c457(0x23f),new Date());if(fns[_0x24c457(0x113)](_0x32cb59,_0x1d9806)){let _0x5de56e=0x0;_0x33af5d[_0x46a15a][_0x24c457(0x154)][_0x24c457(0x1d8)](_0x568c09=>{const _0x1f281d=_0x24c457;!_0x3d7692[_0x568c09[_0x1f281d(0x252)]]?_0x3d7692[_0x568c09[_0x1f281d(0x252)]]=_0x568c09['number']:(_0x5de56e=_0x3d7692[_0x568c09[_0x1f281d(0x252)]],_0x3d7692[_0x568c09[_0x1f281d(0x252)]]+=_0x568c09['number']);const _0x414bf4=_0x50c068[_0x1f281d(0x236)]['find'](_0x549d17=>_0x549d17[_0x1f281d(0x252)]==_0x568c09[_0x1f281d(0x252)]);(!_0x414bf4||_0x414bf4[_0x1f281d(0x137)]==0x0)&&(_0x256071+=(-_0x568c09[_0x1f281d(0x137)]-_0x5de56e)*_0x568c09[_0x1f281d(0x18d)]);}),_0x46a15a++;}}_0x50c068[_0x24c457(0x236)]['forEach']((_0x5812fb,_0x20cee3)=>{const _0xc41bf7=_0x24c457;_0x3d7692[_0x5812fb[_0xc41bf7(0x252)]]&&(_0x5812fb['initial']=_0x3d7692[_0x5812fb['coin']]);}),_0x411cf9[_0x24c457(0x134)]({'date':_0x50c068[_0x24c457(0x12c)],'eur':_0x50c068['eur'],'usd':_0x50c068[_0x24c457(0x166)],'offset':_0x4641f2[_0xcf71f5],'netoffset':_0x256071,'coins':_0x50c068[_0x24c457(0x236)],'pnl':_0x50c068['pnl']});});}return _0x411cf9;}function emitPerformance(_0x12f5ae){const _0x250ba0=_0x4a79e6;_0x12f5ae[_0x250ba0(0x229)]!==0x0?(proxyEmit(_0x250ba0(0x11a),_0x12f5ae),lastPerformanceEmitted=getDate()):proxyEmit(_0x250ba0(0x11a),[]);}function getPerf(_0x533014,_0x1decbe){const _0x67993d=_0x4a79e6;let _0x1c5f4a=0x0,_0x4e266e=0x0,_0x3bd2df=0x0;_0x533014['coins'][_0x67993d(0x1d8)](_0x353aac=>{const _0x2c818e=_0x67993d;_0x1c5f4a+=_0x353aac[_0x2c818e(0x137)]*_0x353aac[_0x2c818e(0x18d)];});_0x1decbe&&(_0x1c5f4a+=_0x533014[_0x67993d(0x12b)]);if(config[_0x67993d(0x192)]===_0x67993d(0x13f)||config[_0x67993d(0x192)]===_0x67993d(0x1dc)||config[_0x67993d(0x192)]===_0x67993d(0x24c))_0x4e266e=_0x1c5f4a*_0x533014['eur'],_0x3bd2df=_0x1c5f4a*_0x533014[_0x67993d(0x166)];else{if(usdBasecoins[_0x67993d(0x168)](config[_0x67993d(0x192)]))_0x4e266e=_0x1c5f4a*_0x533014[_0x67993d(0x230)]/_0x533014[_0x67993d(0x166)],_0x3bd2df=_0x1c5f4a;else config[_0x67993d(0x192)]==='EUR'&&(_0x4e266e=_0x1c5f4a,_0x3bd2df=_0x1c5f4a*_0x533014['usd']/_0x533014[_0x67993d(0x230)]);}return[_0x1c5f4a,_0x4e266e,_0x3bd2df];}function CurrencyFactor(_0x4a9509,_0x4276e7,_0x4d7ac8){const _0x48f887=_0x4a79e6;let _0x4ea3ab;if(_0x4276e7===_0x48f887(0x13f)||_0x4276e7==='ETH'||_0x4276e7===_0x48f887(0x24c))_0x4ea3ab=_0x4d7ac8===_0x48f887(0x1a3)?_0x4a9509[_0x48f887(0x230)]:_0x4a9509[_0x48f887(0x166)];else{if(usdBasecoins[_0x48f887(0x168)](_0x4276e7))_0x4ea3ab=_0x4d7ac8===_0x48f887(0x1a3)?_0x4a9509[_0x48f887(0x230)]/_0x4a9509['usd']:0x1;else _0x4276e7===_0x48f887(0x1a3)&&(_0x4ea3ab=_0x4d7ac8==='EUR'?0x1:_0x4a9509[_0x48f887(0x166)]/_0x4a9509[_0x48f887(0x230)]);}return _0x4ea3ab;}function getKPIs(_0x316698,_0x567852=_0x4a79e6(0x1a3)){const _0x519dad=_0x4a79e6,_0xa61a34=config[_0x519dad(0x192)],_0x5af24c=lastBalances,_0x452edf=currentCoins,_0x6d024a=getNormalizedPerformance(),_0xde166d=CurrencyFactor(_0x5af24c,config[_0x519dad(0x192)],_0x567852);let _0x3fc6d4=0x0;_0x452edf['forEach'](_0x5af412=>{const _0x25950b=_0x519dad;_0x3fc6d4+=_0x5af412[_0x25950b(0x137)]*_0x5af412[_0x25950b(0x201)];});_0x316698[_0x519dad(0x168)](_0x519dad(0x10e))&&(_0x3fc6d4*=_0xde166d);let _0x42381b;if(_0x3fc6d4!==0x0){if(_0x316698===_0x519dad(0x192)||_0x316698===_0x519dad(0x10e)){if(_0x316698===_0x519dad(0x192))_0x42381b=(_0x3fc6d4/startingBalances[_0x519dad(0x192)]-0x1)*0x64;else{if(_0x567852===_0x519dad(0x1a3))_0x42381b=(_0x3fc6d4/startingBalances[_0x519dad(0x230)]-0x1)*0x64;else _0x42381b=(_0x3fc6d4/startingBalances[_0x519dad(0x166)]-0x1)*0x64;}}if(_0x316698[_0x519dad(0x168)](_0x519dad(0x2b0))){let _0x38a137=0x0;if(startingBalances[_0x519dad(0x236)])_0x452edf[_0x519dad(0x1d8)](_0x143c3b=>{const _0x3426bf=_0x519dad;let _0x10a01d=startingBalances[_0x3426bf(0x236)][_0x3426bf(0x1a0)](_0x55c517=>_0x55c517['coin']===_0x143c3b[_0x3426bf(0x252)]);if(_0x10a01d&&_0x10a01d[_0x3426bf(0x252)]&&_0x143c3b[_0x3426bf(0x137)]!==0x0)_0x38a137+=_0x10a01d['number']*_0x143c3b[_0x3426bf(0x201)];});let _0x5f5c51=0x0;if(_0x6d024a[_0x519dad(0x229)]!==0x0){let _0x1c2bce=_0x6d024a[_0x6d024a['length']-0x1];_0x5f5c51=_0x1c2bce[_0x519dad(0x28e)];}_0x38a137-=_0x5f5c51;let _0x1bbecf;_0x316698==='net-basecoin'&&(_0x1bbecf=startingBalances[_0x519dad(0x192)]),_0x316698===_0x519dad(0x19e)&&(_0x1bbecf=_0x567852===_0x519dad(0x1a3)?startingBalances[_0x519dad(0x230)]:startingBalances[_0x519dad(0x166)],_0x38a137*=_0xde166d),_0x42381b=(_0x3fc6d4-_0x38a137)/_0x1bbecf*0x64,_0x3fc6d4=_0x3fc6d4-_0x38a137;}if(_0x316698[_0x519dad(0x168)](_0x519dad(0x222))){if(_0x6d024a[_0x519dad(0x229)]!==0x0&&_0x452edf[_0x519dad(0x229)]!==0x0){let _0x1bccf4,_0x50d4f3=_0x6d024a[_0x6d024a['length']-0x1]['pnl'];_0x316698[_0x519dad(0x168)](_0x519dad(0x10e))?(_0x1bccf4=_0x567852==='EUR'?startingBalances[_0x519dad(0x230)]:startingBalances[_0x519dad(0x166)],_0x50d4f3*=CurrencyFactor(_0x5af24c,_0xa61a34,_0x567852)):_0x1bccf4=startingBalances[_0x519dad(0x192)],_0x42381b=_0x50d4f3/_0x1bccf4*0x64,_0x3fc6d4=_0x50d4f3;}}if(_0x42381b){if(_0x42381b<0x64)_0x42381b=_0x42381b[_0x519dad(0x24a)](0x2);else{if(_0x42381b<0x3e8)_0x42381b=_0x42381b[_0x519dad(0x24a)](0x1);else _0x42381b=_0x42381b['toFixed'](0x0);}}else _0x42381b=Number('0')['toFixed'](0x2);if(_0x3fc6d4){if(Math['abs'](_0x3fc6d4)<0.000001)_0x3fc6d4=_0x3fc6d4[_0x519dad(0x24a)](0x2);else{if(Math[_0x519dad(0x129)](_0x3fc6d4)<0.1)_0x3fc6d4=_0x3fc6d4[_0x519dad(0x24a)](0x6);else{if(Math[_0x519dad(0x129)](_0x3fc6d4)<0x1)_0x3fc6d4=_0x3fc6d4[_0x519dad(0x24a)](0x5);else{if(Math[_0x519dad(0x129)](_0x3fc6d4)<0xa)_0x3fc6d4=_0x3fc6d4[_0x519dad(0x24a)](0x4);else{if(Math[_0x519dad(0x129)](_0x3fc6d4)<0x64)_0x3fc6d4=_0x3fc6d4[_0x519dad(0x24a)](0x3);else{if(Math['abs'](_0x3fc6d4)<0x3e8)_0x3fc6d4=_0x3fc6d4[_0x519dad(0x24a)](0x2);else _0x3fc6d4=_0x3fc6d4[_0x519dad(0x24a)](0x2);}}}}}}else _0x3fc6d4=Number('0')[_0x519dad(0x24a)](0x2);}else _0x42381b=Number('0')[_0x519dad(0x24a)](0x2);if(_0x42381b>=0x0)_0x42381b='+'+_0x42381b;return{'value':_0x3fc6d4,'change':_0x42381b};}async function getStartingBalances(_0x41410f,_0x199d31=!![]){const _0xa6209d=_0x4a79e6;if(_0x41410f[_0xa6209d(0x229)]!==0x0){const [_0x2621e7,_0x133d5a,_0x286860]=getPerf(_0x41410f[0x0],!![]);let _0x3b8acb=[];config[_0xa6209d(0x15a)][_0xa6209d(0x1d8)](_0x10af3d=>{const _0x111c8e=_0xa6209d;let _0x105ed4=0x0,_0x5a4bd8;config[_0x111c8e(0x146)][_0x111c8e(0x1d8)](_0x586727=>{const _0x23cf86=_0x111c8e;let _0x37a9d8=_0x586727[_0x23cf86(0x154)][_0x23cf86(0x1a0)](_0x246fe5=>_0x246fe5[_0x23cf86(0x252)]==_0x10af3d['coin']);if(_0x37a9d8){_0x105ed4+=_0x37a9d8[_0x23cf86(0x137)];if(!_0x5a4bd8)_0x5a4bd8=_0x37a9d8[_0x23cf86(0x18d)];}}),_0x3b8acb[_0x111c8e(0x134)]({'coin':_0x10af3d[_0x111c8e(0x252)],'number':_0x105ed4,'initialprice':_0x5a4bd8});});const _0x33175d={'basecoin':_0x2621e7,'eur':_0x133d5a,'usd':_0x286860,'coins':_0x3b8acb};if(_0x199d31)proxyEmit(_0xa6209d(0x11c),_0x33175d);startingBalances=_0x33175d;}}function headlessMode(_0x361db8){const _0xf0871e=_0x4a79e6;let _0x4b3450=_0x361db8[_0xf0871e(0x15a)],_0xd64b9c=_0x361db8['threshold'],_0x4e8ac6=[];for(let _0x1ee520 of _0x4b3450){if(_0x1ee520[_0xf0871e(0x252)]!=config[_0xf0871e(0x192)]){if(_0x1ee520['delta']>=_0xd64b9c/0x64){if(_0x1ee520[_0xf0871e(0x125)])_0x4e8ac6[_0xf0871e(0x134)](_0x1ee520);}else{if(_0x1ee520['delta']<=-_0xd64b9c/0x64){if(_0x1ee520[_0xf0871e(0x125)])_0x4e8ac6[_0xf0871e(0x134)](_0x1ee520);}}}}_0x4e8ac6[_0xf0871e(0x229)]>0x0&&placeOrder(_0x4e8ac6);}function notifyBalance(_0x33ce75){const _0x3b3f95=_0x4a79e6;let _0x1f2bf8=_0x33ce75[_0x3b3f95(0x15a)],_0x56a8b4=_0x33ce75[_0x3b3f95(0x23b)],_0x242ab5=[];for(let _0x4a5aa1 of _0x1f2bf8){if(_0x4a5aa1[_0x3b3f95(0x252)]!=config[_0x3b3f95(0x192)]){if(_0x4a5aa1[_0x3b3f95(0x156)]>=_0x56a8b4/0x64){if(_0x4a5aa1[_0x3b3f95(0x125)])_0x242ab5[_0x3b3f95(0x134)](_0x4a5aa1);}else{if(_0x4a5aa1[_0x3b3f95(0x156)]<=-_0x56a8b4/0x64){if(_0x4a5aa1['valid'])_0x242ab5[_0x3b3f95(0x134)](_0x4a5aa1);}}}}if(_0x242ab5['length']>0x0){let _0x8b397e=_0x242ab5['map'](_0x9982cc=>_0x9982cc[_0x3b3f95(0x252)]);_0x8b397e[_0x3b3f95(0x1ed)]();let _0x2fe608=_0x8b397e['join'](',\x20');if(!lastCoinsToBalance)logHistory(_0x3b3f95(0x277),_0x3b3f95(0x164));lastCoinsToBalance=_0x2fe608;}}function symbolToCoin(_0x232810){const _0x49a1dc=_0x4a79e6;let _0x399837;if(_0x232810['includes']('/'+config[_0x49a1dc(0x192)]))_0x399837=_0x232810[_0x49a1dc(0x1ce)]('/'+config[_0x49a1dc(0x192)],'');if(_0x232810[_0x49a1dc(0x168)](config[_0x49a1dc(0x192)]+'/'))_0x399837=_0x232810['replace'](config[_0x49a1dc(0x192)]+'/','');return _0x399837;}function setLockOrders(_0x3e3dd4){const _0x51de63=_0x4a79e6;lockOrders=_0x3e3dd4,logger[_0x51de63(0x243)]('Set\x20lock\x20orders\x20to:\x20'+Object[_0x51de63(0x295)](ORDERS)[lockOrders]);}async function unlockOrders(_0x4f6ea5=![]){const _0x2fdd9f=_0x4a79e6;if(allOrdersPlaced&&lockOrders==ORDERS[_0x2fdd9f(0x1fb)]){setLockOrders(ORDERS['UNLOCKING']);if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);if(_0x4f6ea5){const _0x53fba7=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x53fba7,setBlockTransactionDetection(![]);}validateOrdersState=_0x2fdd9f(0x27d),persistOpenOrders([]),setLockOrders(ORDERS[_0x2fdd9f(0x25b)]);}}async function validateOrders(_0x5b71c1){const _0x172536=_0x4a79e6;if(_0x5b71c1)validateOrdersState=_0x5b71c1;logger[_0x172536(0x243)]('1\x20-\x20Validate\x20orders:\x20'+validateOrdersState+'\x20|\x20lock\x20orders:\x20'+Object[_0x172536(0x295)](ORDERS)[lockOrders]);let _0x54a5b5=[],_0x14b4e6=config[_0x172536(0x272)]==_0x172536(0x10a)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x172536(0x208)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x172536(0x1fb)])return;logger[_0x172536(0x243)](_0x172536(0x12f)+validateOrdersState);for(let _0x53256a=lastOrders['length']-0x1;_0x53256a>=0x0;_0x53256a--){let _0x1c97a7=lastOrders[_0x53256a],_0x45320a=![];_0x1c97a7['filled']>0x0&&(_0x45320a=!![]),_0x54a5b5['push'](_0x45320a),_0x45320a&&config[_0x172536(0x272)]!='market'&&logHistory(_0x172536(0xf5),'Order\x20filled:\x20'+_0x1c97a7[_0x172536(0x20f)]+'\x20'+_0x1c97a7[_0x172536(0x126)]+'\x20#'+formatResult(_0x1c97a7[_0x172536(0x1ef)],0x8)+'\x20@'+formatResult(_0x1c97a7[_0x172536(0x18d)],0x8)),_0x45320a&&lastOrders[_0x172536(0x223)](_0x53256a,0x1);}persistOpenOrders(lastOrders);const _0x5ec873=coolingDown?_0x172536(0x1d5):_0x172536(0x292);if(validateOrdersState==_0x172536(0x27d)){validateOrdersState=_0x172536(0x1f5);if(_0x54a5b5[_0x172536(0x168)](![])){}else await unlockOrders();}else{if(validateOrdersState==_0x172536(0x1f5)){if(_0x54a5b5[_0x172536(0x168)](![])){}else await unlockOrders();}else{if(validateOrdersState==_0x172536(0x24e)){let _0x435c17=!![];if(_0x54a5b5[_0x172536(0x168)](![])){if(config[_0x172536(0x272)]==_0x172536(0x10a))logHistory(_0x172536(0x1d1),'Order(s)\x20not\x20validated\x20after\x20'+Math[_0x172536(0x17c)](_0x14b4e6*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x5ec873),await unlockOrders(!![]);else{_0x435c17=await cancelOrders();if(_0x435c17)logHistory(_0x172536(0x1d1),_0x172536(0x197)+Math[_0x172536(0x17c)](_0x14b4e6*validateOrderInterval/0xea60)+_0x172536(0x131)+_0x5ec873),await unlockOrders(!![]);else{validateOrdersState=_0x172536(0x1f5),logHistory(_0x172536(0x122),_0x172536(0x1ff)+Math[_0x172536(0x17c)](_0x14b4e6*validateOrderInterval/0xea60)+_0x172536(0x131)+_0x5ec873),logHistory('error',_0x172536(0x14b));const _0x38c4b8=config[_0x172536(0x272)]==_0x172536(0x10a)?validateOrderTimeout*0x3c*0x3e8:config[_0x172536(0x208)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x19a3f5=_0x172536;validateOrders(_0x19a3f5(0x24e));},_0x38c4b8);}}}else await unlockOrders(!![]);}else{if(validateOrdersState==_0x172536(0x1b3)){if(config[_0x172536(0x272)]!='market')logHistory(_0x172536(0x1d1),_0x172536(0x224)+_0x5ec873);await unlockOrders(!![]);}}}}}async function cancelOrders(){const _0x33fc33=_0x4a79e6;let _0x37f8ab=!![],_0x40925f;for(const _0x2cdb83 of lastOrders){let _0x23d014=![],_0x45946c=0x0;while(!_0x23d014&&_0x45946c<maxRetries){try{const _0x242c91=await exchange['cancelOrder'](_0x2cdb83[_0x33fc33(0x1fc)],_0x2cdb83[_0x33fc33(0x20f)]);_0x23d014=!![];}catch(_0x35fe0f){_0x35fe0f['toString']()['includes'](_0x33fc33(0x1a9))||_0x35fe0f[_0x33fc33(0x10c)]()[_0x33fc33(0x168)]('InvalidOrder')?_0x23d014=!![]:(_0x40925f=_0x35fe0f,_0x23d014=![]);}!_0x23d014&&(_0x45946c++,await sleep(retryInterval));}_0x37f8ab=_0x37f8ab&&_0x23d014;}return!_0x37f8ab&&await handleError(_0x40925f,_0x33fc33(0xfa)),_0x37f8ab;}async function initCoinResults(_0x20a1b4){const _0x505e3e=_0x4a79e6;_0x20a1b4?logger[_0x505e3e(0x243)]('Resetting\x20coin\x20results:\x20'+_0x20a1b4):logger['debug']('Initializing\x20coin\x20results'),config[_0x505e3e(0x15a)]['forEach'](_0x2cb1f5=>{const _0x264f07=_0x505e3e;if(!_0x2cb1f5[_0x264f07(0x23a)]&&_0x2cb1f5['coin']!=config[_0x264f07(0x192)]){const _0x599998=currentCoins[_0x264f07(0x1a0)](_0x55fe63=>_0x55fe63[_0x264f07(0x252)]==_0x2cb1f5[_0x264f07(0x252)]),_0xec2b79=gTicker[noslash(_0x2cb1f5[_0x264f07(0x20f)])];let _0xf0f4f9=_0x599998?_0x599998['number']:null,_0x51750a=_0x2cb1f5[_0x264f07(0x186)]?0x1/_0xec2b79:_0xec2b79,_0x944d8e;config[_0x264f07(0x146)][_0x264f07(0x1d8)](_0x481aff=>{const _0x1c3d9b=_0x264f07;!_0x944d8e&&(_0x944d8e=_0x481aff[_0x1c3d9b(0x154)][_0x1c3d9b(0x1a0)](_0x12351c=>_0x12351c['coin']==_0x2cb1f5[_0x1c3d9b(0x252)]),_0x944d8e&&(_0xf0f4f9=_0x944d8e[_0x1c3d9b(0x137)],_0x51750a=_0x944d8e[_0x1c3d9b(0x18d)]));});let _0x226210=dbCoinResults[_0x264f07(0x26f)]('coins')['find']({'coin':_0x2cb1f5[_0x264f07(0x252)]})[_0x264f07(0x19b)]();if(!_0x226210){const _0x529901={'coin':_0x2cb1f5[_0x264f07(0x252)],'number':_0xf0f4f9,'breakeven':_0x51750a,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x264f07(0x26f)](_0x264f07(0x236))[_0x264f07(0x134)](_0x529901)['write']();}else{if(_0x20a1b4&&_0x2cb1f5[_0x264f07(0x252)]==_0x20a1b4){const _0x324d3={'coin':_0x2cb1f5[_0x264f07(0x252)],'number':_0xf0f4f9,'breakeven':_0x51750a,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get']('coins')[_0x264f07(0x1a0)]({'coin':_0x2cb1f5[_0x264f07(0x252)]})[_0x264f07(0x21d)](_0x324d3)[_0x264f07(0x264)]();}}}});}function _0x3714(_0x4cb6a0,_0x1fae7f){const _0x3d2b79=_0x52ac();return _0x3714=function(_0x132dfb,_0x595085){_0x132dfb=_0x132dfb-0xee;let _0x52acdd=_0x3d2b79[_0x132dfb];return _0x52acdd;},_0x3714(_0x4cb6a0,_0x1fae7f);}async function placeOrder(_0x25eef1){const _0x3097d1=_0x4a79e6,_0x323099=config[_0x3097d1(0x272)]==_0x3097d1(0x10a)?'market':_0x3097d1(0x21a);if(lockOrders==ORDERS['UNLOCKED']&&!coolingDown){setLockOrders(ORDERS[_0x3097d1(0x1fb)]);while(transactionDetectionOngoing){await sleep(0x64);}logger[_0x3097d1(0x243)]('Placing\x20order\x20for:\x20'+_0x25eef1[_0x3097d1(0x20d)](_0x2baf9f=>_0x2baf9f[_0x3097d1(0x252)])[_0x3097d1(0x1b9)](',\x20')),lastCoinsToBalance='',allOrdersPlaced=![],validateOrdersState=_0x3097d1(0x27d);let _0x5a92ab=![];lastOrders=[];const _0x378e0e=config['threshold'];for(const _0x9ea1ed of _0x25eef1){let _0x2d19f3,_0x2dbc24,_0x380ddf,_0x26fee8,_0x2c29c6,_0x82736d=_0x9ea1ed[_0x3097d1(0x20f)];logger['debug'](_0x3097d1(0x1c9)+_0x9ea1ed[_0x3097d1(0x252)]+'\x20'+_0x9ea1ed[_0x3097d1(0x137)]+'\x20'+_0x9ea1ed[_0x3097d1(0x201)]+'\x20'+_0x9ea1ed['distribution']+'%\x20'+_0x9ea1ed['target']+'%\x20'+(0x64*_0x9ea1ed[_0x3097d1(0x156)])[_0x3097d1(0x24a)](0x2)+_0x3097d1(0x199)+_0x378e0e[_0x3097d1(0x24a)](0x2)+'%)'),insufficientFundsWarningSent=insufficientFundsWarningSent[_0x3097d1(0x170)](_0xf15114=>_0xf15114!==_0x9ea1ed[_0x3097d1(0x252)]);const _0x483794=currentCoins[_0x3097d1(0x1a0)](_0x52305c=>_0x52305c[_0x3097d1(0x252)]==_0x9ea1ed['coin']);_0x483794&&(_0x483794[_0x3097d1(0x1f6)]=_0x9ea1ed[_0x3097d1(0x137)]);try{const _0xe2dd44=await exchange[_0x3097d1(0x24d)](_0x82736d);_0x2d19f3=_0x9ea1ed[_0x3097d1(0x186)]?0x1/_0x9ea1ed[_0x3097d1(0x201)]:_0x9ea1ed[_0x3097d1(0x201)],_0x2dbc24=_0xe2dd44[_0x3097d1(0xfe)],_0x380ddf=_0xe2dd44[_0x3097d1(0x1a8)];_0x9ea1ed[_0x3097d1(0x186)]?(_0x26fee8=_0x9ea1ed[_0x3097d1(0x126)]==_0x3097d1(0x267)?'sell':_0x3097d1(0x267),_0x2c29c6=Math[_0x3097d1(0x129)](_0x9ea1ed[_0x3097d1(0x179)])/_0x2d19f3):(_0x26fee8=_0x9ea1ed['side'],_0x2c29c6=Math['abs'](_0x9ea1ed['trade']));_0x323099==_0x3097d1(0x21a)&&(config[_0x3097d1(0x272)]==_0x3097d1(0xf8)&&(_0x2d19f3=_0x26fee8=='buy'?_0x2dbc24:_0x380ddf),config['ordertype']==_0x3097d1(0x1f0)&&(_0x2d19f3=_0x26fee8==_0x3097d1(0x267)?_0x380ddf:_0x2dbc24));_0x2c29c6=formatResult(_0x2c29c6,0x8),_0x2d19f3=formatResult(_0x2d19f3,0x8);const _0x38aecf=_0x26fee8==_0x3097d1(0x15f)?config[_0x3097d1(0x1d3)]?String[_0x3097d1(0x27e)]('0x'+config[_0x3097d1(0x1d3)])+'\x20':'':config[_0x3097d1(0x251)]?String[_0x3097d1(0x27e)]('0x'+config[_0x3097d1(0x251)])+'\x20':'',_0x518c55=_0x323099==_0x3097d1(0x10a)?_0x3097d1(0x110):config[_0x3097d1(0x272)]=='limit-high'?_0x3097d1(0x17a):_0x3097d1(0xf6),_0x54c204=(Math[_0x3097d1(0x298)](Math['random']()*0x35a4e900)+0x5f5e100)[_0x3097d1(0x10c)]();lastOrders['push']({'customId':_0x54c204,'symbol':_0x82736d,'coin':_0x9ea1ed[_0x3097d1(0x252)],'amount':_0x2c29c6,'price':_0x2d19f3,'side':_0x26fee8,'reverse':_0x9ea1ed[_0x3097d1(0x186)],'filled':0x0});let _0x37bdb9;_0x323099=='market'?_0x26fee8=='buy'&&[_0x3097d1(0x120),_0x3097d1(0x1cc),_0x3097d1(0x2a0),_0x3097d1(0x11f),'Huobi',_0x3097d1(0x174)][_0x3097d1(0x168)](config[_0x3097d1(0xfc)])?_0x37bdb9=await exchange[_0x3097d1(0x22b)](_0x82736d,_0x323099,_0x26fee8,_0x2c29c6,_0x2d19f3):_0x37bdb9=await exchange[_0x3097d1(0x22b)](_0x82736d,_0x323099,_0x26fee8,_0x2c29c6,undefined):_0x37bdb9=await exchange[_0x3097d1(0x22b)](_0x82736d,_0x323099,_0x26fee8,_0x2c29c6,_0x2d19f3);const _0xf14dfa=lastOrders['length']-0x1;if(_0xf14dfa>=0x0&&lastOrders[_0xf14dfa][_0x3097d1(0x248)]==_0x54c204){lastOrders[_0xf14dfa][_0x3097d1(0x1fc)]=_0x37bdb9['id'];if(_0x37bdb9[_0x3097d1(0x290)])lastOrders[_0xf14dfa][_0x3097d1(0x290)]=_0x37bdb9[_0x3097d1(0x290)];if(_0x37bdb9[_0x3097d1(0x18d)])lastOrders[_0xf14dfa][_0x3097d1(0x18d)]=_0x37bdb9['price'];lastOrders[_0xf14dfa][_0x3097d1(0x115)]=_0x37bdb9[_0x3097d1(0x115)];}if(_0x37bdb9[_0x3097d1(0x290)])_0x2c29c6=_0x37bdb9['amount'];if(_0x37bdb9[_0x3097d1(0x18d)])_0x2d19f3=_0x37bdb9[_0x3097d1(0x18d)];if(_0x323099=='market')logHistory(_0x3097d1(0xf5),''+_0x38aecf+_0x518c55+'\x20order:\x20'+_0x82736d+'\x20'+_0x26fee8+'\x20#'+formatResult(_0x2c29c6,0x8)+'\x20@'+formatResult(_0x2d19f3,0x8));else logHistory(_0x3097d1(0xf5),''+_0x38aecf+_0x518c55+_0x3097d1(0x24b)+_0x82736d+'\x20'+_0x26fee8+'\x20#'+formatResult(_0x2c29c6,0x8)+'\x20@'+formatResult(_0x2d19f3,0x8));logger[_0x3097d1(0x243)]('ID:\x20'+_0x37bdb9['id']+'\x20|\x20Custom\x20ID:\x20'+_0x54c204);if(config[_0x3097d1(0x19c)]!=0x0){let _0x7f27f=null;if(cooldownTracker[_0x3097d1(0x229)]==config[_0x3097d1(0x19c)]-0x1)_0x7f27f=cooldownTracker[_0x3097d1(0x1b5)]();const _0x580143=getTimeStamp();cooldownTracker['push'](_0x580143);if(_0x7f27f){const _0x12f2c4=fns[_0x3097d1(0x27f)](new Date(_0x580143),new Date(_0x7f27f));if(_0x12f2c4<cooldownInterval){logHistory(_0x3097d1(0x122),_0x3097d1(0x28d)+config['cooldown']+_0x3097d1(0x140)+cooldownInterval/0x3c+'\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20'+cooldownPeriod/(0xe10*0x3e8)+_0x3097d1(0x15e)),coolingDown=!![];break;}}}}catch(_0x2d6197){if(_0x2d6197[_0x3097d1(0x10c)]()[_0x3097d1(0x168)](_0x3097d1(0x18b)))lastOrders=lastOrders[_0x3097d1(0x170)](_0x1774df=>_0x1774df[_0x3097d1(0x20f)]!=_0x82736d),logHistory(_0x3097d1(0x122),_0x3097d1(0x1eb)+_0x82736d),_0x5a92ab=!![];else{if(_0x2d6197[_0x3097d1(0x10c)]()[_0x3097d1(0x168)](_0x3097d1(0x1fa)))lastOrders=lastOrders[_0x3097d1(0x170)](_0x4f0632=>_0x4f0632[_0x3097d1(0x20f)]!=_0x82736d),logHistory(_0x3097d1(0x122),_0x3097d1(0x2a8)+_0x82736d),_0x5a92ab=!![];else{if(_0x2d6197[_0x3097d1(0x10c)]()[_0x3097d1(0x168)](_0x3097d1(0x253)))lastOrders=lastOrders[_0x3097d1(0x170)](_0x15a1f8=>_0x15a1f8[_0x3097d1(0x20f)]!=_0x82736d),logHistory('error','Order\x20is\x20invalid:\x20'+_0x82736d),logger['debug'](_0x2d6197),_0x5a92ab=!![];else _0x2d6197[_0x3097d1(0x10c)]()[_0x3097d1(0x168)](_0x3097d1(0x1c0))?(lastOrders=lastOrders[_0x3097d1(0x170)](_0xc24812=>_0xc24812[_0x3097d1(0x20f)]!=_0x82736d),logHistory(_0x3097d1(0x122),_0x3097d1(0x1eb)+_0x82736d),_0x5a92ab=!![]):(lastOrders=lastOrders[_0x3097d1(0x170)](_0x458160=>_0x458160[_0x3097d1(0x20f)]!=_0x82736d),await handleError(_0x2d6197,'placeOrder()',_0x82736d));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x3097d1(0x229)]>0x0){const _0x59a425=config[_0x3097d1(0x272)]=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0x3097d1(0x208)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x10a0c0=_0x3097d1;validateOrders(_0x10a0c0(0x24e));},_0x59a425);}else unlockOrders();_0x5a92ab&&config['headless']&&(logHistory('error',_0x3097d1(0x1c6)+pauseBotMsg),await pauseBot(pauseBotInterval)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x3097d1(0x1d1),'Cooldown\x20ended\x20-\x20balancing\x20resumed'));}else{if(coolingDown)!config['headless']&&logHistory(_0x3097d1(0x122),_0x3097d1(0x177));else lockOrders!=ORDERS[_0x3097d1(0x25b)]&&(!config[_0x3097d1(0x1b7)]&&(config['ordertype']==_0x3097d1(0x10a)?logHistory(_0x3097d1(0x122),_0x3097d1(0x27a)):logHistory(_0x3097d1(0x122),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled')));}}function persistOpenOrders(_0x231915){const _0x38d8ec=_0x4a79e6,_0x2ea7ee={...config,'openOrders':_0x231915};let _0xb118ca=dbConfig[_0x38d8ec(0x26f)](_0x38d8ec(0x206))['find']({'botID':botID})[_0x38d8ec(0x19b)]();_0xb118ca&&dbConfig[_0x38d8ec(0x26f)](_0x38d8ec(0x206))[_0x38d8ec(0x1a0)]({'botID':botID})['assign'](_0x2ea7ee)[_0x38d8ec(0x264)]();}function restoreOrders(){const _0x272dbb=_0x4a79e6;let _0x423e49;config[_0x272dbb(0x1a1)]&&allOpenOrders['forEach'](_0x379ed5=>{const _0x54de51=_0x272dbb,_0x418c27=config[_0x54de51(0x1a1)][_0x54de51(0x1a0)](_0x467084=>_0x467084['orderId']==_0x379ed5['id']);_0x418c27&&(lastOrders['push'](_0x418c27),_0x423e49=_0x379ed5[_0x54de51(0xef)]);});if(lastOrders[_0x272dbb(0x229)]>0x0){setLockOrders(ORDERS['LOCKED']),validateOrdersState=_0x272dbb(0x1f5),allOrdersPlaced=!![];const _0x3a3c29=new Date()[_0x272dbb(0x28c)](),_0x4a65fd=config['ordertype']==_0x272dbb(0x10a)?validateOrderTimeout*0x3c*0x3e8:config[_0x272dbb(0x208)]*0x3c*0x3e8;if(_0x423e49+_0x4a65fd>_0x3a3c29){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x33fc90=_0x272dbb;validateOrders(_0x33fc90(0x24e));},_0x423e49+_0x4a65fd-_0x3a3c29);}else validateOrders(_0x272dbb(0x24e));}}async function sendMetricsTelegram(){const _0x2e1b36=_0x4a79e6;if(!coinsLoaded){process[_0x2e1b36(0x123)]({'telegrammsg':'Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute'},_0x4d69a2=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x10149a='';if(config[_0x2e1b36(0x25a)])_0x10149a=_0x2e1b36(0x101)+config[_0x2e1b36(0x209)]+'\x20metrics:</b>\x20\x0a\x0a';else _0x10149a=_0x2e1b36(0x1e0)+botID+_0x2e1b36(0x257);const _0x12ed19=config[_0x2e1b36(0x192)],_0x3f5e86=config[_0x2e1b36(0x10e)],_0x5d31e1=getKPIs('basecoin'),_0x3e39bc=getKPIs(_0x2e1b36(0x10e),_0x3f5e86),_0x4ab31b=getKPIs(_0x2e1b36(0x234)),_0x16eb10=getKPIs(_0x2e1b36(0x19e),_0x3f5e86),_0x963fb0=getKPIs(_0x2e1b36(0x238)),_0x2b2e7d=getKPIs(_0x2e1b36(0x287),_0x3f5e86);_0x12ed19[_0x2e1b36(0x168)](_0x3f5e86)?(_0x10149a+=_0x2e1b36(0x1e9),_0x10149a+=_0x2e1b36(0x2ad)+_0x12ed19+':\x20'+_0x5d31e1[_0x2e1b36(0x19b)]+'\x20('+_0x5d31e1['change']+_0x2e1b36(0x246),_0x10149a+=_0x2e1b36(0x183)+_0x12ed19+':\x20'+_0x4ab31b[_0x2e1b36(0x19b)]+'\x20('+_0x4ab31b[_0x2e1b36(0x142)]+_0x2e1b36(0x246),_0x10149a+='PnL\x20'+_0x12ed19+':\x20'+_0x963fb0[_0x2e1b36(0x19b)]+'\x20('+_0x963fb0[_0x2e1b36(0x142)]+_0x2e1b36(0x246),_0x10149a+=_0x2e1b36(0x1aa)):(_0x10149a+=_0x2e1b36(0x1e9),_0x10149a+=_0x2e1b36(0x2ad)+_0x12ed19+':\x20'+_0x5d31e1['value']+'\x20('+_0x5d31e1[_0x2e1b36(0x142)]+_0x2e1b36(0x246),_0x10149a+='Value\x20'+_0x3f5e86+':\x20'+_0x3e39bc['value']+'\x20('+_0x3e39bc['change']+_0x2e1b36(0x246),_0x10149a+='Net\x20'+_0x12ed19+':\x20'+_0x4ab31b[_0x2e1b36(0x19b)]+'\x20('+_0x4ab31b[_0x2e1b36(0x142)]+'%)\x0a',_0x10149a+=_0x2e1b36(0x183)+_0x3f5e86+':\x20'+_0x16eb10[_0x2e1b36(0x19b)]+'\x20('+_0x16eb10[_0x2e1b36(0x142)]+'%)\x0a',_0x10149a+=_0x2e1b36(0x1cf)+_0x12ed19+':\x20'+_0x963fb0[_0x2e1b36(0x19b)]+'\x20('+_0x963fb0['change']+_0x2e1b36(0x246),_0x10149a+=_0x2e1b36(0x1cf)+_0x3f5e86+':\x20'+_0x2b2e7d[_0x2e1b36(0x19b)]+'\x20('+_0x2b2e7d[_0x2e1b36(0x142)]+_0x2e1b36(0x246),_0x10149a+=_0x2e1b36(0x1aa)),process[_0x2e1b36(0x123)]({'telegrammsg':_0x10149a},_0x225d53=>{});}async function sendPortfolioTelegram(){const _0x32cc5a=_0x4a79e6;if(!coinsLoaded||!currentCoins[0x0][_0x32cc5a(0x1da)]){process['send']({'telegrammsg':_0x32cc5a(0x280)},_0x497fba=>{});return;}let _0x4751ef='';if(config[_0x32cc5a(0x25a)])_0x4751ef=_0x32cc5a(0x101)+config['botname']+_0x32cc5a(0x217);else _0x4751ef=_0x32cc5a(0x1e0)+botID+'\x20portfolio:</b>\x20\x0a\x0a';_0x4751ef+='<pre>',_0x4751ef+='-------------------------------\x0a',_0x4751ef+=_0x32cc5a(0x28a),_0x4751ef+=_0x32cc5a(0x1c5),currentCoins[_0x32cc5a(0x1d8)](_0x23e1af=>{const _0x480718=_0x32cc5a;_0x4751ef+=_0x23e1af[_0x480718(0x252)][_0x480718(0x19d)](0x7)+'|\x20'+formatPad(_0x23e1af[_0x480718(0x1da)],0x2,0x6)+'|\x20'+formatPad(_0x23e1af[_0x480718(0x13a)],0x2,0x6)+'|\x20'+formatPad(_0x23e1af[_0x480718(0x156)]*0x64,0x2,0x6)+'\x0a';}),_0x4751ef+=_0x32cc5a(0x1aa),process[_0x32cc5a(0x123)]({'telegrammsg':_0x4751ef},_0x133da5=>{});}function formatPad(_0x150c02,_0x47c833,_0x35cd49){const _0x54ec69=_0x4a79e6,_0x42def5=formatResultString(_0x150c02,_0x47c833);return _0x42def5?_0x42def5[_0x54ec69(0x169)](_0x35cd49):''[_0x54ec69(0x169)](_0x35cd49);}function logHistory(_0x4f4e53,_0x521a4e,_0x5a0bec=''){const _0x147f11=_0x4a79e6;logger[_0x147f11(0x29d)](''+_0x521a4e);let _0x296680={'time':getTimeStamp(),'type':_0x4f4e53,'event':_0x521a4e};dbLogs[_0x147f11(0x26f)](_0x147f11(0x1d6))[_0x147f11(0x134)](_0x296680)[_0x147f11(0x264)]();if(_0x5a0bec=='')_0x5a0bec=_0x521a4e;proxyEmit(_0x147f11(0x28f),{'log':_0x296680,'summary':_0x5a0bec}),process[_0x147f11(0x123)]({'telegram':{..._0x296680,'botname':config[_0x147f11(0x209)],'showname':config[_0x147f11(0x25a)]}},_0xe4945c=>{});}function emitHistory(_0x25a216={}){const _0xc30823=_0x4a79e6;Object[_0xc30823(0x295)](_0x25a216)[_0xc30823(0x229)]==0x0&&(_0x25a216={'type':[_0xc30823(0xf5),_0xc30823(0x28f)],'event':'','page':0x1});if(_0x25a216[_0xc30823(0x100)][_0xc30823(0x168)](_0xc30823(0x28f)))_0x25a216[_0xc30823(0x100)][_0xc30823(0x223)](_0x25a216[_0xc30823(0x100)]['indexOf'](_0xc30823(0x28f)),0x1,'error',_0xc30823(0x277),'success');if(dbLogs[_0xc30823(0x228)](_0xc30823(0x1d6))[_0xc30823(0x19b)]()){let _0xaf61eb=dbLogs['get']('logs')[_0xc30823(0x170)](_0x1bb6b5=>{const _0x301191=_0xc30823;if(_0x25a216[_0x301191(0x100)][_0x301191(0x229)]==0x0)return![];else return _0x25a216[_0x301191(0x100)][_0x301191(0x168)](_0x1bb6b5['type']);})[_0xc30823(0x170)](_0x324bb5=>{const _0x3169fa=_0xc30823;if(_0x25a216[_0x3169fa(0x28f)]=='')return!![];else return _0x324bb5[_0x3169fa(0x28f)][_0x3169fa(0x124)]()[_0x3169fa(0x168)](_0x25a216[_0x3169fa(0x28f)][_0x3169fa(0x124)]());})[_0xc30823(0x20e)](_0xc30823(0x25e)),_0x4a1992=_0xaf61eb[_0xc30823(0x19b)]()[_0xc30823(0x229)];_0xaf61eb=_0xaf61eb[_0xc30823(0x186)]()[_0xc30823(0x163)]((_0x25a216[_0xc30823(0x12a)]-0x1)*logPageSize,_0x25a216['page']*logPageSize-0x1)[_0xc30823(0x186)]()[_0xc30823(0x19b)](),proxyEmit(_0xc30823(0x1a7),{'logs':_0xaf61eb,'total':_0x4a1992});}else proxyEmit('event-history',{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0xe6978a){const _0x16851e=_0x4a79e6;if(dbLogs[_0x16851e(0x228)](_0x16851e(0x1d6))[_0x16851e(0x19b)]()){const _0x1e4168=dbLogs[_0x16851e(0x26f)](_0x16851e(0x1d6))[_0x16851e(0x20e)](_0x16851e(0x25e))[_0x16851e(0x170)](_0xf08708=>{const _0x283cd3=_0x16851e;return _0xf08708[_0x283cd3(0x100)]==_0x283cd3(0xf5);})['value']();dbLogs[_0x16851e(0x26f)]('logs')[_0x16851e(0x259)]()['write'](),dbLogs[_0x16851e(0x26f)]('logs')[_0x16851e(0x21d)](_0x1e4168)['write'](),emitHistory(_0xe6978a);}}async function pauseBot(_0x2fc891=pauseBotIntervalShort,_0xed1a75,_0x27b4ad,_0x3b387e=![]){const _0x307054=_0x4a79e6,_0x5ccc3c=new Date()[_0x307054(0x28c)]();if(!lastErrorShown||_0x5ccc3c-lastErrorShown>=_0x2fc891){lastErrorShown=_0x5ccc3c;if(!lastBotPause)lastBotPause=_0x5ccc3c,consecutivePauses=0x1;else{if(_0x5ccc3c-lastBotPause-_0x2fc891<0x5a*0x3e8){consecutivePauses++;if(consecutivePauses>maxPauseRetries){if(_0x3b387e){logHistory(_0x307054(0x122),_0xed1a75+'\x20>\x20stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();return;}else logHistory(_0x307054(0x122),_0xed1a75+pauseBotMsg),_0x2fc891=pauseBotInterval;}}else consecutivePauses=0x1;lastBotPause=_0x5ccc3c;}_0x27b4ad?logger[_0x307054(0x243)]('('+consecutivePauses+')\x20'+_0xed1a75+_0x307054(0x1b6),_0x27b4ad):logger[_0x307054(0x243)]('('+consecutivePauses+')\x20'+_0xed1a75);if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);await sleep(_0x2fc891),botPaused=![],_0x2fc891==pauseBotIntervalShort?resumeBot(!![]):resumeBot(![]);}}}async function killBot(){const _0x249d0f=_0x4a79e6;botPaused=!![],await sleep(0x3e8),process['send']({'stop':_0x249d0f(0x27c)},_0x5a5b78=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x44691c,_0x14ebdf,_0x214ebb=![]){const _0x15d0c9=_0x4a79e6;if(botPaused)return;let _0x18ecd6;const _0x197f9a=config[_0x15d0c9(0xfc)]||_0x15d0c9(0x2b2);if(_0x14ebdf)logger[_0x15d0c9(0x243)](_0x15d0c9(0x22f)+_0x14ebdf);const _0xb9e7d4=()=>{const _0x220883=_0x15d0c9;loading[_0x220883(0x122)]='api-issue',emitLoadingProgress();};if(_0x44691c['toString']()[_0x15d0c9(0x168)](_0x15d0c9(0x135)))logHistory(_0x15d0c9(0x122),_0x197f9a+_0x15d0c9(0x139)),_0xb9e7d4();else{if(_0x44691c['toString']()[_0x15d0c9(0x168)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory(_0x15d0c9(0x122),_0x197f9a+'\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)'),_0xb9e7d4();else{if(_0x44691c[_0x15d0c9(0x10c)]()[_0x15d0c9(0x168)](_0x15d0c9(0x269)))config[_0x15d0c9(0x1a4)]?_0x18ecd6=_0x197f9a+_0x15d0c9(0xfb):_0x18ecd6=_0x197f9a+_0x15d0c9(0x119),logHistory('error',_0x18ecd6+'\x20(see:\x20hodlerhacks.com/fix/1)'),_0xb9e7d4();else{if(_0x44691c[_0x15d0c9(0x10c)]()[_0x15d0c9(0x168)](_0x15d0c9(0x173)))logHistory(_0x15d0c9(0x122),_0x197f9a+'\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)'),_0xb9e7d4();else{if(!_0x214ebb)await handleError(_0x44691c,null);}}}}}async function handleError(_0x31da12,_0x584284,_0x23ed25=''){const _0xe1e2fa=_0x4a79e6;if(botPaused)return;let _0x4efdc0;const _0x562c0b=config[_0xe1e2fa(0xfc)]||_0xe1e2fa(0x2b2);if(_0x584284)logger[_0xe1e2fa(0x243)](_0xe1e2fa(0x22f)+_0x584284);if(_0x31da12[_0xe1e2fa(0x10c)]()['includes'](_0xe1e2fa(0x23d)))_0x4efdc0=_0x562c0b+'\x20blocked\x20API\x20(DDoSProtection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading',await pauseBot(undefined,_0x4efdc0,_0x31da12);else{if(_0x31da12['toString']()[_0xe1e2fa(0x168)]('RateLimitExceeded'))_0x4efdc0=_0x562c0b+_0xe1e2fa(0x262),await pauseBot(undefined,_0x4efdc0,_0x31da12);else{if(_0x31da12[_0xe1e2fa(0x10c)]()[_0xe1e2fa(0x168)](_0xe1e2fa(0x210))||_0x31da12[_0xe1e2fa(0x10c)]()[_0xe1e2fa(0x168)](_0xe1e2fa(0x107)))_0x4efdc0=_0x562c0b+_0xe1e2fa(0x106),await pauseBot(undefined,_0x4efdc0,_0x31da12[_0xe1e2fa(0x10c)]());else{if(_0x31da12[_0xe1e2fa(0x10c)]()[_0xe1e2fa(0x168)](_0xe1e2fa(0x118)))_0x4efdc0=_0x562c0b+_0xe1e2fa(0x213),await pauseBot(undefined,_0x4efdc0,_0x31da12['toString']());else{if(_0x31da12[_0xe1e2fa(0x10c)]()[_0xe1e2fa(0x168)](_0xe1e2fa(0x14c)))_0x4efdc0=_0x562c0b+'\x20closed\x20the\x20connection\x20(see:\x20hodlerhacks.com/fix/5)',await pauseBot(undefined,_0x4efdc0,_0x31da12[_0xe1e2fa(0x10c)]());else{if(_0x31da12[_0xe1e2fa(0x10c)]()[_0xe1e2fa(0x124)]()['includes'](_0xe1e2fa(0xef))||_0x31da12['toString']()['toLowerCase']()[_0xe1e2fa(0x168)](_0xe1e2fa(0x12e)))_0x4efdc0='Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)',await pauseBot(undefined,_0x4efdc0,_0x31da12[_0xe1e2fa(0x10c)]());else{if(_0x31da12[_0xe1e2fa(0x10c)]()[_0xe1e2fa(0x168)]('InvalidNonce'))_0x4efdc0=_0x562c0b+'\x20rejected\x20your\x20API\x20request\x20(see:\x20hodlerhacks.com/fix/4)',await pauseBot(undefined,_0x4efdc0,_0x31da12[_0xe1e2fa(0x10c)]());else{if(_0x31da12 instanceof ccxt['NetworkError'])_0x4efdc0=_0x562c0b+_0xe1e2fa(0x26b)+_0x31da12['toString'](),logger['debug'](_0xe1e2fa(0x221),_0x31da12),await pauseBot(undefined,_0x4efdc0,_0x31da12);else{if(_0x31da12[_0xe1e2fa(0x10c)]()[_0xe1e2fa(0x168)]('API-key\x20format\x20invalid'))logHistory(_0xe1e2fa(0x122),_0x562c0b+_0xe1e2fa(0x1dd)),logHistory(_0xe1e2fa(0x122),_0xe1e2fa(0x18f)),await killBot();else{if(_0x31da12[_0xe1e2fa(0x10c)]()[_0xe1e2fa(0x168)](_0xe1e2fa(0x22d)))logHistory(_0xe1e2fa(0x122),_0x562c0b+'\x20API\x20secret\x20is\x20invalid'),logHistory(_0xe1e2fa(0x122),_0xe1e2fa(0x18f)),await killBot();else{if(_0x31da12[_0xe1e2fa(0x10c)]()[_0xe1e2fa(0x168)]('AuthenticationError')&&_0x31da12['toString']()[_0xe1e2fa(0x168)]('token\x20is\x20expired'))_0x4efdc0=_0x562c0b+_0xe1e2fa(0x18c),await pauseBot(undefined,_0x4efdc0,_0x31da12,!![]);else{if(_0x31da12[_0xe1e2fa(0x10c)]()[_0xe1e2fa(0x168)]('AuthenticationError'))config['apiPassword']?_0x4efdc0=_0x562c0b+_0xe1e2fa(0xfb):_0x4efdc0=_0x562c0b+_0xe1e2fa(0x119),logHistory('error',_0x4efdc0),logHistory(_0xe1e2fa(0x122),_0xe1e2fa(0x18f)),await killBot();else{if(_0x31da12['toString']()[_0xe1e2fa(0x168)](_0xe1e2fa(0x173)))logHistory(_0xe1e2fa(0x122),_0x562c0b+'\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange'),logHistory(_0xe1e2fa(0x122),_0xe1e2fa(0x18f)),await killBot();else{if(_0x31da12[_0xe1e2fa(0x10c)]()[_0xe1e2fa(0x168)](_0xe1e2fa(0x1be)))logHistory(_0xe1e2fa(0x122),_0xe1e2fa(0x16e)+_0x23ed25),logger[_0xe1e2fa(0x243)](_0xe1e2fa(0x271),_0x31da12);else{if(_0x31da12 instanceof ccxt[_0xe1e2fa(0x1ae)]){_0x4efdc0=_0x562c0b+_0xe1e2fa(0x282)+_0x31da12['toString']();if(_0x23ed25)_0x4efdc0+='\x0aSymbol(s):\x20'+_0x23ed25;await pauseBot(undefined,_0x4efdc0,_0x31da12);}else{_0x4efdc0=_0xe1e2fa(0x235)+_0x31da12[_0xe1e2fa(0x10c)]();if(_0x23ed25)_0x4efdc0+=_0xe1e2fa(0x23e)+_0x23ed25;await pauseBot(undefined,_0x4efdc0);}}}}}}}}}}}}}}}}function decryptRSA(_0x466dd7,_0x3a7968){const _0x5c2d10=_0x4a79e6,_0x2827d1=forge[_0x5c2d10(0x11e)][_0x5c2d10(0x284)](_0x466dd7),_0x2b56a4=_0x2827d1[_0x5c2d10(0x214)](forge[_0x5c2d10(0x109)][_0x5c2d10(0x1b1)](_0x3a7968),_0x5c2d10(0x21c),{'md':forge['md'][_0x5c2d10(0x205)]['create'](),'mgf1':{'md':forge['md'][_0x5c2d10(0x205)]['create']()}});return _0x2b56a4;}async function withRetry(_0x5e84bb,_0x2bd435){const _0x3c24bd=_0x4a79e6;let _0x34e29c=![],_0x5e9b16=0x0,_0x2cb101,_0x1acbc0;while(_0x5e9b16<maxRetries){try{_0x2cb101=await _0x2bd435();break;}catch(_0x3f0855){_0x1acbc0=_0x3f0855,!_0x34e29c?(_0x34e29c=!![],logger[_0x3c24bd(0x243)](_0x3c24bd(0x157)+_0x5e84bb+':',_0x3f0855[_0x3c24bd(0x10c)]())):await sleep(retryInterval);}_0x5e9b16++;}if(_0x5e9b16==0x0)return _0x2cb101;if(_0x5e9b16>=maxRetries)throw _0x1acbc0;else return logger[_0x3c24bd(0x243)]('RETRY\x20-\x20Problem\x20resolved\x20after\x20'+_0x5e9b16+'\x20attempts'),_0x2cb101;}function formatResult(_0x16dd3a,_0x4507c9){const _0x327e0a=_0x4a79e6;return parseFloat(_0x16dd3a[_0x327e0a(0x24a)](_0x4507c9));}function formatResultTruncate(_0x36e0e1,_0x1a710c){const _0x333bc5=_0x4a79e6;let _0x375eeb=formatResultString(_0x36e0e1,0xa),_0x5b7471=_0x375eeb[_0x333bc5(0x291)]('.');return _0x5b7471!=-0x1&&(_0x375eeb=_0x375eeb[_0x333bc5(0x163)](0x0,_0x5b7471+_0x1a710c+0x1)),Number(_0x375eeb);}function formatResultString(_0x40e749,_0x5ac5a7){const _0x3fa614=_0x4a79e6;let _0x443c7e;if(!(''+_0x40e749)[_0x3fa614(0x168)]('e'))_0x443c7e=+(Math[_0x3fa614(0x17c)](_0x40e749+'e+'+_0x5ac5a7)+'e-'+_0x5ac5a7);else{let _0x32dadc=(''+_0x40e749)[_0x3fa614(0x240)]('e'),_0xfdc658='';+_0x32dadc[0x1]+_0x5ac5a7>0x0&&(_0xfdc658='+'),_0x443c7e=+(Math[_0x3fa614(0x17c)](+_0x32dadc[0x0]+'e'+_0xfdc658+(+_0x32dadc[0x1]+_0x5ac5a7))+'e-'+_0x5ac5a7);}return Number(_0x443c7e)[_0x3fa614(0x24a)](_0x5ac5a7);}function getServerTime(){const _0x3cae62=_0x4a79e6,_0x1f2603=new Date();return _0x1f2603[_0x3cae62(0x231)]()+'/'+(_0x1f2603[_0x3cae62(0x1a5)]()+0x1)['toString']()[_0x3cae62(0x169)](0x2,'0')+'/'+_0x1f2603['getDate']()[_0x3cae62(0x10c)]()[_0x3cae62(0x169)](0x2,'0')+'\x20'+_0x1f2603['getHours']()['toString']()['padStart'](0x2,'0')+':'+_0x1f2603[_0x3cae62(0x288)]()[_0x3cae62(0x10c)]()[_0x3cae62(0x169)](0x2,'0')+':'+_0x1f2603[_0x3cae62(0x16b)]()[_0x3cae62(0x10c)]()[_0x3cae62(0x169)](0x2,'0');}function getTimeStamp(){const _0x5dbd24=_0x4a79e6,_0xfb89ba=shiftedTime();return _0xfb89ba['getFullYear']()+'/'+(_0xfb89ba['getMonth']()+0x1)[_0x5dbd24(0x10c)]()['padStart'](0x2,'0')+'/'+_0xfb89ba[_0x5dbd24(0x200)]()[_0x5dbd24(0x10c)]()['padStart'](0x2,'0')+'\x20'+_0xfb89ba[_0x5dbd24(0x2b3)]()[_0x5dbd24(0x10c)]()[_0x5dbd24(0x169)](0x2,'0')+':'+_0xfb89ba[_0x5dbd24(0x288)]()[_0x5dbd24(0x10c)]()[_0x5dbd24(0x169)](0x2,'0')+':'+_0xfb89ba['getSeconds']()[_0x5dbd24(0x10c)]()[_0x5dbd24(0x169)](0x2,'0');}function getDate(){const _0x67835c=_0x4a79e6,_0x5a7943=shiftedTime();return _0x5a7943[_0x67835c(0x231)]()+'/'+(_0x5a7943[_0x67835c(0x1a5)]()+0x1)[_0x67835c(0x10c)]()[_0x67835c(0x169)](0x2,'0')+'/'+_0x5a7943[_0x67835c(0x200)]()['toString']()[_0x67835c(0x169)](0x2,'0');}function getHour(){const _0xc2ce97=_0x4a79e6,_0x33dcdf=shiftedTime();return _0x33dcdf[_0xc2ce97(0x2b3)]()[_0xc2ce97(0x10c)]()[_0xc2ce97(0x169)](0x2,'0');}function sleep(_0xc19c56){return new Promise(_0x102888=>setTimeout(_0x102888,_0xc19c56));}function shiftedTime(){const _0x4584d6=_0x4a79e6,_0x2c2d96=new Date();let _0x496bd6=_0x2c2d96;if(config&&config[_0x4584d6(0x227)]!==0x0)_0x496bd6=fns['add'](_0x2c2d96,{'hours':config[_0x4584d6(0x227)]});return _0x496bd6;}function timer(_0x4894da){const _0x397f6d=_0x4a79e6,_0x5ae36e=new Date();!lasttime?console[_0x397f6d(0x114)](getTimeStamp()+_0x397f6d(0x26d),_0x4894da,_0x5ae36e):console[_0x397f6d(0x114)](getTimeStamp()+':\x20timer\x20>',_0x4894da,(_0x5ae36e-lasttime)/0x3e8),lasttime=_0x5ae36e;}