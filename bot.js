const _0x1e4d39=_0x3b0b;(function(_0x4ddbbc,_0x5113f4){const _0x4d455f=_0x3b0b,_0x12ce62=_0x4ddbbc();while(!![]){try{const _0x651926=-parseInt(_0x4d455f(0x38d))/0x1*(-parseInt(_0x4d455f(0x324))/0x2)+parseInt(_0x4d455f(0x396))/0x3*(-parseInt(_0x4d455f(0x208))/0x4)+-parseInt(_0x4d455f(0x34c))/0x5+parseInt(_0x4d455f(0x2d7))/0x6+-parseInt(_0x4d455f(0x256))/0x7+-parseInt(_0x4d455f(0x39b))/0x8*(parseInt(_0x4d455f(0x2f7))/0x9)+parseInt(_0x4d455f(0x235))/0xa*(parseInt(_0x4d455f(0x20c))/0xb);if(_0x651926===_0x5113f4)break;else _0x12ce62['push'](_0x12ce62['shift']());}catch(_0x12d44c){_0x12ce62['push'](_0x12ce62['shift']());}}}(_0x3835,0xf41d8));const _0x47340c=function(){let _0x11c67e=!![];return function(_0x4d0e1d,_0x9c6e4e){const _0x15d9b1=_0x11c67e?function(){const _0x28f872=_0x3b0b;if(_0x9c6e4e){const _0x580fc8=_0x9c6e4e[_0x28f872(0x21a)](_0x4d0e1d,arguments);return _0x9c6e4e=null,_0x580fc8;}}:function(){};return _0x11c67e=![],_0x15d9b1;};}(),_0xdc88eb=_0x47340c(this,function(){const _0x4e3a3e=_0x3b0b;return _0xdc88eb[_0x4e3a3e(0x259)]()[_0x4e3a3e(0x322)](_0x4e3a3e(0x3c2))[_0x4e3a3e(0x259)]()[_0x4e3a3e(0x3cd)](_0xdc88eb)[_0x4e3a3e(0x322)](_0x4e3a3e(0x3c2));});_0xdc88eb();'use strict';const ccxt=require(_0x1e4d39(0x3b9)),low=require(_0x1e4d39(0x274)),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require(_0x1e4d39(0x353)),forge=require(_0x1e4d39(0x2a3)),util=require(_0x1e4d39(0x241)),argv=require(_0x1e4d39(0x37e))(process[_0x1e4d39(0x1f5)][_0x1e4d39(0x3cc)](0x2))[_0x1e4d39(0x1f5)],path=require(_0x1e4d39(0x394)),axios=require('axios');let exchange,gTicker={},gChange={};const usdBasecoins=[_0x1e4d39(0x39f),_0x1e4d39(0x2bd),_0x1e4d39(0x3d2),_0x1e4d39(0x395),'USDC','USDP'],excludedExchanges=[_0x1e4d39(0x225)],debugging=argv['d']||![];let pnlGenerationNeeded=argv['r']||![],config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x1e4d39(0x217)]({'LOCKED':0x0,'UNLOCKING':0x1,'UNLOCKED':0x2});let lockOrders=ORDERS[_0x1e4d39(0x2b2)],validateOrdersState,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotIntervalShort=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0x1e4d39(0x257)+pauseBotInterval/0xea60+'\x20minutes',maxPauseRetries=0x6,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,watchTransactionsInterval=0x3c*0x3e8,schedulerInterval=0x3c*0x3c*0x3e8,retryInterval=0x3e8,maxRetries=0x5,logPageSize=0x14,defaultFee=0.003;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidOrdersInitialTimeout,pidOrdersTimeout,botPaused=![],transactionDetectionOngoing=![],lastCoinsToBalance='',exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x5dc,balanceUpdateRetries=0x5;let enableFiatToggle;const serverversion=require(_0x1e4d39(0x267))[_0x1e4d39(0x2e3)],environment=require(_0x1e4d39(0x267))[_0x1e4d39(0x2c5)]||_0x1e4d39(0x326),botID=process['argv'][0x2]||_0x1e4d39(0x268),pattern=/^[0-9]{3}$/;!pattern[_0x1e4d39(0x340)](botID)&&(console[_0x1e4d39(0x221)](_0x1e4d39(0x27c)+botID+_0x1e4d39(0x2f4)),killBot());const userID=process[_0x1e4d39(0x1f5)][0x3]||'',configpath=userID?'./config/'+userID+'/':_0x1e4d39(0x374),logspath=userID?_0x1e4d39(0x232)+userID+'/':_0x1e4d39(0x232),loggerfile=fs[_0x1e4d39(0x284)](logspath+_0x1e4d39(0x2cb),{'flags':'a'});!fs[_0x1e4d39(0x384)](configpath)&&fs[_0x1e4d39(0x2e4)](configpath);!fs[_0x1e4d39(0x384)](logspath)&&fs[_0x1e4d39(0x2e4)](logspath);const configfile=configpath+_0x1e4d39(0x307)+botID+_0x1e4d39(0x2cd),logfile=configpath+_0x1e4d39(0x307)+botID+_0x1e4d39(0x323),performancefile=configpath+'bot-'+botID+_0x1e4d39(0x1fc),coinresultsfile=configpath+'bot-'+botID+_0x1e4d39(0x2a0),settingsfile=configpath+_0x1e4d39(0x2db),securefile=configpath+_0x1e4d39(0x37b),configbackuppath=configpath+_0x1e4d39(0x2c3),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x1e4d39(0x362)]({'logs':[],'version':serverversion})[_0x1e4d39(0x2a1)]();function _0x3b0b(_0x3b4cfa,_0x3868f3){const _0x4d5f3c=_0x3835();return _0x3b0b=function(_0xdc88eb,_0x47340c){_0xdc88eb=_0xdc88eb-0x1f1;let _0x3835e0=_0x4d5f3c[_0xdc88eb];return _0x3835e0;},_0x3b0b(_0x3b4cfa,_0x3868f3);}const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x1e4d39(0x362)]({'data':[],'version':serverversion})[_0x1e4d39(0x2a1)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x1e4d39(0x362)]({'bot':[],'version':serverversion})[_0x1e4d39(0x2a1)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults['defaults']({'coins':{},'version':serverversion})['write']();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0,settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x403787=>{const _0x561766=_0x1e4d39;console[_0x561766(0x221)](_0x403787);},'simple':_0x319b11=>{const _0x15e6fb=_0x1e4d39;console['log'](_0x319b11),loggerfile[_0x15e6fb(0x2a1)](util['format'](_0x319b11)+'\x0a');},'full':async(_0x402b01,_0x4e8fc5='')=>{const _0x257372=_0x1e4d39;let _0x41a461;if(config['showname'])_0x41a461=getTimeStamp()+':\x20'+config[_0x257372(0x3a3)]+'\x20>\x20'+_0x402b01;else _0x41a461=getTimeStamp()+_0x257372(0x391)+botID+_0x257372(0x276)+_0x402b01;console[_0x257372(0x221)](_0x41a461),loggerfile[_0x257372(0x2a1)](util[_0x257372(0x38c)](_0x41a461)+'\x0a'),_0x4e8fc5&&(console[_0x257372(0x221)](_0x4e8fc5),loggerfile[_0x257372(0x2a1)](util[_0x257372(0x38c)](_0x4e8fc5)+'\x0a'));},'debug':async(_0x2c6a75,_0x3627e9='')=>{const _0x399e4f=_0x1e4d39;let _0xca862;if(config[_0x399e4f(0x3c0)])_0xca862=getTimeStamp()+':\x20'+config[_0x399e4f(0x3a3)]+_0x399e4f(0x204)+_0x2c6a75;else _0xca862=getTimeStamp()+':\x20Bot\x20'+botID+_0x399e4f(0x204)+_0x2c6a75;if(debugging)console[_0x399e4f(0x221)](_0xca862);loggerfile[_0x399e4f(0x2a1)](util['format'](_0xca862)+'\x0a');if(_0x3627e9){if(debugging)console[_0x399e4f(0x221)](_0x3627e9);loggerfile[_0x399e4f(0x2a1)](util[_0x399e4f(0x38c)](_0x3627e9)+'\x0a');}}};process['on'](_0x1e4d39(0x1f4),function(_0x19da50){const _0x53f72e=_0x1e4d39;handleError(_0x19da50[_0x53f72e(0x351)],'uncaughtException');});settings['timeshift']!=config['timeshift']&&updateTimeshift(settings[_0x1e4d39(0x2ac)]);settings[_0x1e4d39(0x2fd)]!=config[_0x1e4d39(0x2fd)]&&updateOnepagemode(settings[_0x1e4d39(0x2fd)]);(settings[_0x1e4d39(0x25e)]&&!config[_0x1e4d39(0x25e)]||!settings[_0x1e4d39(0x25e)]&&config[_0x1e4d39(0x25e)])&&updateMarketcapApi(settings[_0x1e4d39(0x25e)]);process['send']({'started':'running'},_0xe48835=>{}),initializeProcessListeners();function proxyEmit(_0x2f217c,_0x228291=null){const _0x3a72ef=_0x1e4d39;process[_0x3a72ef(0x28e)]({'function':_0x2f217c,'args':_0x228291},_0x1220c5=>{});}function initializeProcessListeners(){process['on']('message',_0x406ab6=>{const _0x31b48e=_0x3b0b;switch(Object[_0x31b48e(0x2f0)](_0x406ab6)[0x0]){case'timeshift':_0x406ab6['timeshift']!=undefined&&(settings[_0x31b48e(0x2ac)]=_0x406ab6[_0x31b48e(0x2ac)],updateTimeshift(settings[_0x31b48e(0x2ac)]));break;case _0x31b48e(0x2fd):_0x406ab6[_0x31b48e(0x2fd)]!=undefined&&(settings[_0x31b48e(0x2fd)]=_0x406ab6[_0x31b48e(0x2fd)],updateOnepagemode(settings[_0x31b48e(0x2fd)]));break;case _0x31b48e(0x25e):_0x406ab6['marketcapApi']!=undefined&&(settings[_0x31b48e(0x25e)]=_0x406ab6[_0x31b48e(0x25e)],updateMarketcapApi(settings[_0x31b48e(0x25e)]));break;case _0x31b48e(0x297):_0x406ab6[_0x31b48e(0x297)]!=undefined&&(bots=JSON[_0x31b48e(0x31d)](_0x406ab6[_0x31b48e(0x297)]),proxyEmit(_0x31b48e(0x297),bots));break;case _0x31b48e(0x273):switch(_0x406ab6['function']){case _0x31b48e(0x223):initclient();break;case _0x31b48e(0x3c3):toggleBotMode();break;case _0x31b48e(0x319):emitHistory(_0x406ab6[_0x31b48e(0x2b8)]);break;case _0x31b48e(0x289):deleteHistoryAlerts(_0x406ab6[_0x31b48e(0x2b8)]);break;case _0x31b48e(0x29b):getPortfolio(_0x406ab6['args']);break;case _0x31b48e(0x32f):storeConfiguration(_0x406ab6[_0x31b48e(0x2b8)]);break;case _0x31b48e(0x32d):storeHeadless(_0x406ab6[_0x31b48e(0x2b8)]);break;case'storeFiat':storeFiat(_0x406ab6[_0x31b48e(0x2b8)]);break;case _0x31b48e(0x33f):resetHistory();break;case _0x31b48e(0x1fb):getStartingBalances(getNormalizedPerformance());break;case _0x31b48e(0x2c0):placeOrder(_0x406ab6[_0x31b48e(0x2b8)]);break;case _0x31b48e(0x293):cancelLoading();break;case _0x31b48e(0x316):showConfig();break;case _0x31b48e(0x2f1):sendMetricsTelegram();break;case _0x31b48e(0x282):sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x541414=![]){const _0xf21a6e=_0x1e4d39;logger[_0xf21a6e(0x3c8)](_0xf21a6e(0x287)+(_0x541414?_0xf21a6e(0x37a):_0xf21a6e(0x22b))+_0xf21a6e(0x266)+config['exchange']);if(pidBalances)clearTimeout(pidBalances);if(!_0x541414)lastCoinsToBalance='';coinsLoaded=![];if(config[_0xf21a6e(0x2bf)]!=''&&config[_0xf21a6e(0x2bf)]!='***'){loadingProgress=0x0;if(_0x541414){await initExchange();const _0xef4bde=await testAPI();if(!_0xef4bde)return;await loadSymbols(),loadingProgress=0x1,setStableCoins(),proxyEmit(_0xf21a6e(0x234),emittedConfiguration()),initialPerformanceStored=![];}const _0x47d23a=await getCoins();[currentCoins,currentCoinsAll]=_0x47d23a,setBlockTransactionDetection(![]),startScheduler(),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger['debug'](_0xf21a6e(0x3ae)),getBalances(![]),await updateOpenOrders();if(lastOrders['length']==0x0&&allOpenOrders[_0xf21a6e(0x253)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(pnlGenerationNeeded)await generatePnL();}}async function resumeBot(_0x4bb6b8=![]){const _0x59116d=_0x1e4d39;logger['debug']('Resuming\x20('+(_0x4bb6b8?'quick':_0x59116d(0x2d5))+')\x20|\x20exchange:\x20'+config[_0x59116d(0x2e7)]);if(pidBalances)clearTimeout(pidBalances);if(_0x4bb6b8){getBalances();return;}coinsLoaded=![];if(config[_0x59116d(0x2bf)]!=''&&config[_0x59116d(0x2bf)]!=_0x59116d(0x213)){loadingProgress=0x1;const _0x4bc457=await getCoins();[currentCoins,currentCoinsAll]=_0x4bc457,setBlockTransactionDetection(![]),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x59116d(0x3c8)](_0x59116d(0x3ae)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x59116d(0x253)]==0x0&&allOpenOrders[_0x59116d(0x253)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();}}async function getMarketCap(_0x1b3cba){const _0x27191f=_0x1e4d39;let _0x307cf5=![];if(_0x1b3cba)_0x307cf5=!![];const _0x432090=_0x307cf5?_0x1b3cba:currentCoins,_0x23f301=_0x432090[_0x27191f(0x33e)](_0x393bfd=>_0x393bfd[_0x27191f(0x3a6)]);if(!config['marketcapApi']||!_0x307cf5&&!config[_0x27191f(0x2d2)]||_0x23f301[_0x27191f(0x253)]==0x0)return;let _0x570dca=null;try{_0x570dca=await axios[_0x27191f(0x219)](_0x27191f(0x378),{'headers':{'X-CMC_PRO_API_KEY':settings['marketcapApi']},'params':{'symbol':_0x23f301[_0x27191f(0x259)]()}});}catch(_0x1de1eb){_0x570dca=null,_0x1de1eb[_0x27191f(0x259)]()['includes'](_0x27191f(0x3bd))?(config[_0x27191f(0x25e)]=![],updateConfig(),proxyEmit(_0x27191f(0x234),emittedConfiguration()),logHistory('error',_0x27191f(0x2f9))):(logHistory(_0x27191f(0x30b),_0x27191f(0x294)+schedulerInterval/(0x3c*0x3e8)+_0x27191f(0x354)),logger[_0x27191f(0x3c8)](_0x27191f(0x3b7),_0x1de1eb['toString']()+_0x27191f(0x34d)+_0x1de1eb[_0x27191f(0x333)]));}let _0x47426a=!![];if(_0x570dca){let _0x2acf95=0x0;const _0x18588f=_0x570dca[_0x27191f(0x2c2)];_0x23f301['forEach'](_0x8090c7=>{const _0x1f182b=_0x27191f;if(_0x18588f[_0x1f182b(0x2c2)][_0x8090c7][0x0]&&_0x18588f[_0x1f182b(0x2c2)][_0x8090c7][0x0][_0x1f182b(0x279)][_0x1f182b(0x39f)][_0x1f182b(0x207)])_0x2acf95+=_0x18588f[_0x1f182b(0x2c2)][_0x8090c7][0x0][_0x1f182b(0x279)][_0x1f182b(0x39f)][_0x1f182b(0x207)];else{if(![_0x1f182b(0x356),_0x1f182b(0x39f)][_0x1f182b(0x36e)](_0x8090c7)){if(_0x307cf5)logHistory(_0x1f182b(0x30b),_0x1f182b(0x36a)+_0x8090c7+_0x1f182b(0x220));else{const _0x529496=config[_0x1f182b(0x201)][_0x1f182b(0x25d)](_0x3cd8ce=>_0x3cd8ce[_0x1f182b(0x3a6)]==_0x8090c7);_0x529496&&!_0x529496['excluded']&&_0x529496[_0x1f182b(0x2b0)]==-0x1&&(_0x47426a=![],logHistory(_0x1f182b(0x30b),_0x1f182b(0x347)),logger['debug']('CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20for\x20'+_0x8090c7));}}}});if(!_0x47426a)return;_0x23f301[_0x27191f(0x3a9)](_0x4dd56a=>{const _0x20530c=_0x27191f,_0xfa0691=_0x18588f[_0x20530c(0x2c2)][_0x4dd56a][0x0]?_0x18588f[_0x20530c(0x2c2)][_0x4dd56a][0x0][_0x20530c(0x279)][_0x20530c(0x39f)]['market_cap']:0x0;if(_0x307cf5){const _0x1d9eb9=_0x1b3cba[_0x20530c(0x25d)](_0x5a8c82=>_0x5a8c82[_0x20530c(0x3a6)]==_0x4dd56a);_0x1d9eb9&&(_0x1d9eb9['marketcap']=_0xfa0691);}else{const _0x54718f=currentCoins[_0x20530c(0x25d)](_0x285184=>_0x285184[_0x20530c(0x3a6)]==_0x4dd56a);_0x54718f&&(_0x54718f[_0x20530c(0x393)]=_0xfa0691);const _0x32eae1=currentCoinsAll[_0x20530c(0x25d)](_0x46d30a=>_0x46d30a[_0x20530c(0x3a6)]==_0x4dd56a);_0x32eae1&&(_0x32eae1[_0x20530c(0x393)]=_0xfa0691);}}),!_0x307cf5&&updateTargetDistribution();}}function updateTargetDistribution(){const _0x322c00=_0x1e4d39,_0x28118c=0x2;let _0x2be467=0x0,_0x5acf54=0x0,_0x5cecca=0x0,_0x21a9d8=0x0,_0x4a71c7=0x0;config[_0x322c00(0x201)][_0x322c00(0x3a9)](_0x25638=>{const _0x1be1a0=_0x322c00;if(!_0x25638[_0x1be1a0(0x2e2)]){_0x5cecca++,_0x2be467+=_0x25638['slider'];if(_0x25638['slider']===-0x1){_0x2be467++;const _0x3cb70d=currentCoinsAll['find'](_0x5becd9=>_0x5becd9[_0x1be1a0(0x3a6)]==_0x25638[_0x1be1a0(0x3a6)]);_0x3cb70d&&(_0x21a9d8+=_0x3cb70d['marketcap'],_0x4a71c7+=Math['sqrt'](_0x3cb70d[_0x1be1a0(0x393)]));}if(_0x25638['slider']!==-0x1)_0x5acf54++;}});let _0x2ae6da;const _0x437740=0x64-_0x2be467,_0x495db2=_0x5cecca-_0x5acf54;_0x2ae6da=_0x495db2===0x0?_0x2be467:Math['max'](0x64,_0x2be467),config[_0x322c00(0x201)]['forEach'](_0x56da3e=>{const _0x487d1e=_0x322c00,_0x30d20a=currentCoinsAll[_0x487d1e(0x25d)](_0x45b767=>_0x45b767[_0x487d1e(0x3a6)]==_0x56da3e[_0x487d1e(0x3a6)]);_0x30d20a&&(_0x56da3e['marketcap']=_0x30d20a[_0x487d1e(0x393)]);if(!_0x56da3e['excluded']){if(_0x2ae6da<=0x64){if(_0x56da3e[_0x487d1e(0x2b0)]===-0x1){if(_0x21a9d8!==0x0&&config[_0x487d1e(0x2d2)]){if(_0x30d20a){if(config['marketcapEnabled']==_0x487d1e(0x393))_0x56da3e[_0x487d1e(0x236)]=(_0x437740/(_0x21a9d8/_0x30d20a[_0x487d1e(0x393)]))[_0x487d1e(0x3bc)](_0x28118c);else config['marketcapEnabled']==_0x487d1e(0x23e)&&(_0x56da3e[_0x487d1e(0x236)]=(_0x437740/(_0x4a71c7/Math['sqrt'](_0x30d20a[_0x487d1e(0x393)])))[_0x487d1e(0x3bc)](_0x28118c));}}}}}}),updateConfig();}function updateConfig(){const _0x4e4a56=_0x1e4d39;let _0x5733a6=dbConfig[_0x4e4a56(0x219)]('bot')[_0x4e4a56(0x25d)]({'botID':botID})[_0x4e4a56(0x321)]();_0x5733a6&&dbConfig[_0x4e4a56(0x219)]('bot')['find']({'botID':botID})[_0x4e4a56(0x345)](config)[_0x4e4a56(0x2a1)]();}function logMemory(){const _0x1e30fe=_0x1e4d39;if(environment!=_0x1e30fe(0x212))return;const _0x201780=process['memoryUsage']()[_0x1e30fe(0x298)]/0x400/0x400;logger['debug'](_0x1e30fe(0x361)+process['pid']+'\x20uses\x20'+formatResult(_0x201780,0x1)+'\x20MB');}async function startScheduler(){const _0x22f288=shiftedTime()['getHours']();getMarketCap(),loadSymbols(),_0x22f288==0x1&&logMemory(),await sleep(schedulerInterval),startScheduler();}async function restartBot(_0x35f10a=![]){const _0x3e6d32=_0x1e4d39;logger[_0x3e6d32(0x3c8)](_0x3e6d32(0x2b4));if(!_0x35f10a)while(lockOrders!=ORDERS['UNLOCKED']||coolingDown){await sleep(0x3e8);}process[_0x3e6d32(0x28e)]({'stop':_0x3e6d32(0x2ab)},_0x139bf1=>{});}async function initExchange(_0x7d8d5d=config[_0x1e4d39(0x2e7)],_0x467f0b=config[_0x1e4d39(0x2bf)],_0x1adfc1=config[_0x1e4d39(0x397)],_0x3feaab=config[_0x1e4d39(0x302)],_0xdd5ff7=config['sandbox']){const _0x2f927f=_0x1e4d39;if(exchange){logger['debug']('Initializing\x20exchange:\x20already\x20done');return;}logger['debug'](_0x2f927f(0x383));!supportedExchanges()[_0x2f927f(0x36e)](_0x7d8d5d)&&(logHistory(_0x2f927f(0x30b),_0x2f927f(0x272)+_0x7d8d5d+_0x2f927f(0x36c)),killBot());const _0x59dbfe=ccxt[_0x2f927f(0x26f)][_0x7d8d5d[_0x2f927f(0x305)]()];exchange=new _0x59dbfe({'apiKey':_0x467f0b,'secret':_0x1adfc1,'options':{'defaultType':_0x2f927f(0x28f)}});if(_0x3feaab)exchange[_0x2f927f(0x2dd)]=_0x3feaab;if(exchange['has'][_0x2f927f(0x36f)])exchange[_0x2f927f(0x379)](_0xdd5ff7);}function updateExchange(_0x19116b,_0xb0553d,_0x4ddfbf=null){const _0x5d730a=_0x1e4d39;exchange[_0x5d730a(0x2bf)]=_0x19116b,exchange['secret']=_0xb0553d,exchange[_0x5d730a(0x2dd)]=_0x4ddfbf,logger[_0x5d730a(0x3c8)](_0x5d730a(0x24e));}function setStableCoins(){const _0x4a6a14=_0x1e4d39;let _0x1353a6=config['basecoin']==_0x4a6a14(0x300)?'ETH':config[_0x4a6a14(0x233)]==_0x4a6a14(0x2a7)?'PAXG':'BTC',_0xa394da=allSymbols[_0x4a6a14(0x36e)](_0x1353a6+_0x4a6a14(0x270))?'USD':allSymbols[_0x4a6a14(0x36e)](_0x1353a6+_0x4a6a14(0x27d))?_0x4a6a14(0x395):_0x4a6a14(0x356),_0x273389=allSymbols['includes'](_0x1353a6+'/EUR')?_0x4a6a14(0x356):_0xa394da;enableFiatToggle=!![],_0xa394da==_0x4a6a14(0x356)&&(enableFiatToggle=![],storeFiat(_0x4a6a14(0x356))),_0x273389!='EUR'&&(enableFiatToggle=![],storeFiat(_0x4a6a14(0x39f))),stablecoins={'eur':{'coin':''+_0x1353a6+_0x273389,'symbol':_0x1353a6+'/'+_0x273389},'usd':{'coin':''+_0x1353a6+_0xa394da,'symbol':_0x1353a6+'/'+_0xa394da}};}async function initwsCcxt(){const _0x44f889=_0x1e4d39;initCycle++;const _0x190ebb=initCycle;let _0x206da2=[];config[_0x44f889(0x201)][_0x44f889(0x3a9)](_0x376c74=>{const _0x3c42a4=_0x44f889;if(!_0x376c74[_0x3c42a4(0x2e2)]&&_0x376c74[_0x3c42a4(0x3a6)]!=config[_0x3c42a4(0x233)])_0x206da2[_0x3c42a4(0x263)](_0x376c74[_0x3c42a4(0x296)]);});if(!_0x206da2['includes'](stablecoins[_0x44f889(0x1f7)][_0x44f889(0x296)]))_0x206da2['push'](stablecoins['eur']['symbol']);if(!_0x206da2[_0x44f889(0x36e)](stablecoins[_0x44f889(0x329)][_0x44f889(0x296)]))_0x206da2[_0x44f889(0x263)](stablecoins['usd'][_0x44f889(0x296)]);loadCoins(_0x206da2),_0x206da2=validateSymbols(_0x206da2);const _0x25dfa1=async _0x4c586c=>{const _0x83bd2a=_0x44f889;let _0x49563f;try{const _0x16d0f9=await getTickers(_0x4c586c);Object[_0x83bd2a(0x205)](_0x16d0f9)[_0x83bd2a(0x3a9)](_0x3ed79b=>{const _0x544715=_0x83bd2a;_0x49563f=_0x3ed79b[0x1]['symbol'],gTicker[noslash(_0x49563f)]=_0x3ed79b[0x1][_0x544715(0x214)],gChange[_0x49563f]=_0x3ed79b[0x1][_0x544715(0x1f3)];});}catch(_0x3074e5){await handleError(_0x3074e5,_0x83bd2a(0x21d),_0x49563f);}},_0x438059=async _0x34fb3f=>{const _0xad93a0=_0x44f889;while(initCycle==_0x190ebb){if(!botPaused)try{const _0x13120e=await exchange[_0xad93a0(0x328)](_0x34fb3f);gTicker[noslash(_0x13120e[0x0][_0xad93a0(0x296)])]=_0x13120e[0x0]['price'];}catch(_0x1a4a22){if(!exchangeStopped)await handleError(_0x1a4a22,_0xad93a0(0x2ef),_0x34fb3f);}else await sleep(0x64);}},_0x214194=async _0x31cb5d=>{const _0x86646c=_0x44f889;while(initCycle==_0x190ebb){if(!botPaused)try{const _0x11a690=await exchange[_0x86646c(0x336)](_0x31cb5d),_0x5e8832=_0x11a690[_0x86646c(0x38e)]();gTicker[noslash(_0x5e8832['symbol'])]=_0x5e8832[_0x86646c(0x370)];}catch(_0x518570){if(!exchangeStopped)await handleError(_0x518570,_0x86646c(0x20b),_0x31cb5d['toString']());}else await sleep(0x64);}},_0x2d3af7=async _0x11cd96=>{const _0x32bb71=_0x44f889;while(initCycle==_0x190ebb){if(!botPaused){let _0xfd130f;try{await sleep(0x3c*0x3e8);const _0x44c8ba=await getTickers(_0x11cd96);Object[_0x32bb71(0x205)](_0x44c8ba)[_0x32bb71(0x3a9)](_0x5a724f=>{const _0x8db31f=_0x32bb71;_0xfd130f=_0x5a724f[0x1][_0x8db31f(0x296)],gChange[_0xfd130f]=_0x5a724f[0x1][_0x8db31f(0x1f3)];});}catch(_0x306b27){if(!exchangeStopped)await handleError(_0x306b27,'fetchTickers()',_0xfd130f);}}else await sleep(0x64);}},_0x5c5594=async _0x2e9e8d=>{const _0x13548b=_0x44f889;while(initCycle==_0x190ebb){if(!botPaused)try{const _0x1f29f6=await exchange[_0x13548b(0x349)](_0x2e9e8d);initCycle==_0x190ebb&&_0x1f29f6[_0x13548b(0x3a9)](_0x4dc5f4=>{updateNumberCoinsCcxt(_0x4dc5f4);});}catch(_0x10e587){if(!exchangeStopped)await handleError(_0x10e587,_0x13548b(0x301));}else await sleep(0x64);}};_0x25dfa1(_0x206da2),_0x2d3af7(_0x206da2),exchange[_0x44f889(0x22f)][_0x44f889(0x336)]&&!(config[_0x44f889(0x2e7)]==_0x44f889(0x22a)&&_0x206da2['length']>0xa)?_0x214194(_0x206da2):_0x206da2['forEach'](_0x156565=>{_0x438059(_0x156565);}),_0x206da2[_0x44f889(0x3a9)](_0x3734af=>{_0x5c5594(_0x3734af);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x553b23){const _0xfa2895=_0x1e4d39;let _0x45ea89={};try{if(config['exchange']!=_0xfa2895(0x348))_0x45ea89=await exchange[_0xfa2895(0x2c7)](_0x553b23);else for(const _0x1e039b of _0x553b23){const _0x251dac=await exchange[_0xfa2895(0x372)](_0x1e039b);_0x45ea89[_0x1e039b]=_0x251dac;}return _0x45ea89;}catch(_0x359872){throw _0x359872;}}function setBlockTransactionDetection(_0x975a45){const _0x1a2da1=_0x1e4d39;blockTransactionDetection=_0x975a45,logger[_0x1a2da1(0x3c8)](_0x1a2da1(0x386)+blockTransactionDetection);}async function detectLiquidityChange(_0x316301=0x0){const _0x2a6900=_0x1e4d39;transactionDetectionOngoing=!![];try{const _0x56bf47=await getCoins(_0x316301),[_0xfe9b93,_0x186280]=_0x56bf47;let _0x314f17=[];currentCoins['forEach'](_0x218aa8=>{const _0x45693b=_0x3b0b,_0x440aa1=_0xfe9b93[_0x45693b(0x25d)](_0x5468da=>_0x5468da['coin']==_0x218aa8[_0x45693b(0x3a6)]);if(_0x440aa1){if(_0x218aa8[_0x45693b(0x3c4)]!=_0x440aa1[_0x45693b(0x3c4)]){let _0x2e61e7;if(_0x218aa8[_0x45693b(0x3a6)]!=config[_0x45693b(0x233)]){const _0x45c882=gTicker[noslash(_0x218aa8[_0x45693b(0x296)])];_0x2e61e7=_0x218aa8[_0x45693b(0x22e)]?0x1/_0x45c882:_0x45c882;}else _0x2e61e7=0x1;_0x314f17[_0x45693b(0x263)]({'coin':_0x218aa8[_0x45693b(0x3a6)],'symbol':_0x218aa8[_0x45693b(0x296)],'price':_0x2e61e7,'number':Number(formatResult(_0x440aa1[_0x45693b(0x3c4)]-_0x218aa8[_0x45693b(0x3c4)],0x8)),'basecoinvalue':_0x2e61e7*(_0x440aa1['number']-_0x218aa8[_0x45693b(0x3c4)])});}}});if(_0x314f17[_0x2a6900(0x253)]>0x0&&!blockTransactionDetection){for(const _0xdf3d2e of _0x314f17){if(config['autoliquidity']){logger['debug']('Liquidity\x20change\x20|\x20basecoin\x20value:\x20'+_0xdf3d2e['basecoinvalue']+_0x2a6900(0x3cf)+lastFees[_0x2a6900(0x3ac)]);if(lastFees[_0x2a6900(0x3ac)]==0x0||Math['abs'](_0xdf3d2e[_0x2a6900(0x218)])>lastFees[_0x2a6900(0x3ac)]*0x3){if(config[_0x2a6900(0x202)]==_0x2a6900(0x291)){delete _0xdf3d2e['symbol'],delete _0xdf3d2e['basecoinvalue'];let _0x19c01d=[],_0x183195=[...config['liquidity']]||[],_0x41779c=config[_0x2a6900(0x2b1)];_0x183195[_0x2a6900(0x2f3)]((_0xd688fe,_0x319443)=>_0xd688fe[_0x2a6900(0x2b6)]>_0x319443[_0x2a6900(0x2b6)]?-0x1:_0x319443[_0x2a6900(0x2b6)]>_0xd688fe[_0x2a6900(0x2b6)]?0x1:0x0);const _0x116289=getDate();if(_0x183195[0x0]){const _0x10f1a4=fns[_0x2a6900(0x31d)](_0x183195[0x0]['date'],_0x2a6900(0x38f),new Date()),_0x4bf9b9=fns[_0x2a6900(0x31d)](_0x116289,'yyyy/MM/dd',new Date());if(fns[_0x2a6900(0x2af)](_0x10f1a4,_0x4bf9b9)){_0x19c01d=_0x183195[0x0][_0x2a6900(0x2ea)];const _0x46d6f9=_0x19c01d[_0x2a6900(0x25d)](_0x48ab7e=>_0x48ab7e['coin']==_0xdf3d2e[_0x2a6900(0x3a6)]);_0x46d6f9?(_0x46d6f9[_0x2a6900(0x3c4)]+=_0xdf3d2e['number'],_0x46d6f9[_0x2a6900(0x3c4)]==0x0&&(_0x19c01d=_0x19c01d[_0x2a6900(0x35f)](_0x1a25ab=>{return _0x1a25ab['coin']!=_0xdf3d2e['coin'];}))):_0x19c01d['push'](_0xdf3d2e);const _0x18e20d=_0x41779c[_0x2a6900(0x25d)](_0x15cc41=>_0x15cc41[_0x2a6900(0x2b6)]==_0x116289);_0x18e20d['changes']=_0x19c01d;}else _0x41779c[_0x2a6900(0x263)]({'date':_0x116289,'changes':[_0xdf3d2e]});}const _0x14ec83=_0x41779c[_0x2a6900(0x25d)](_0x29bbef=>_0x29bbef['date']==_0x116289);if(_0x14ec83){let _0x5e5909=!![];_0x14ec83[_0x2a6900(0x2ea)][_0x2a6900(0x3a9)](_0x5d025b=>{if(_0x5d025b['number']!=0x0)_0x5e5909=![];}),_0x5e5909&&(_0x41779c=_0x41779c[_0x2a6900(0x35f)](_0x46f2d5=>{const _0x10d78f=_0x2a6900;return _0x46f2d5[_0x10d78f(0x2b6)]!=_0x116289;}));}let _0x19cfdd=dbConfig['get'](_0x2a6900(0x2d1))['find']({'botID':botID})[_0x2a6900(0x321)]();_0x19cfdd&&(dbConfig['get'](_0x2a6900(0x2d1))[_0x2a6900(0x25d)]({'botID':botID})[_0x2a6900(0x345)]({'liquidity':_0x41779c})['write'](),config['liquidity']=_0x41779c);logHistory(_0x2a6900(0x20e),_0x2a6900(0x341)+Math['abs'](_0xdf3d2e[_0x2a6900(0x3c4)])+'\x20'+_0xdf3d2e[_0x2a6900(0x3a6)]+'\x20'+(_0xdf3d2e[_0x2a6900(0x3c4)]>0x0?_0x2a6900(0x269):_0x2a6900(0x365))+_0x2a6900(0x332)),proxyEmit('configuration',emittedConfiguration());const _0x3bda03=getNormalizedPerformance();emitPerformance(_0x3bda03),getStartingBalances(_0x3bda03),logger[_0x2a6900(0x3c8)](_0x2a6900(0x255));}else config[_0x2a6900(0x202)]==_0x2a6900(0x1f1)&&(config[_0x2a6900(0x2aa)]?(await storeHeadless({'headless':![]}),logHistory(_0x2a6900(0x20e),_0x2a6900(0x341)+Math[_0x2a6900(0x3b8)](_0xdf3d2e[_0x2a6900(0x3c4)])+'\x20'+_0xdf3d2e[_0x2a6900(0x3a6)]+'\x20'+(_0xdf3d2e[_0x2a6900(0x3c4)]>0x0?_0x2a6900(0x269):_0x2a6900(0x365))+_0x2a6900(0x28b))):logger[_0x2a6900(0x3c8)](_0x2a6900(0x341)+Math[_0x2a6900(0x3b8)](_0xdf3d2e[_0x2a6900(0x3c4)])+'\x20'+_0xdf3d2e[_0x2a6900(0x3a6)]+'\x20'+(_0xdf3d2e[_0x2a6900(0x3c4)]>0x0?'added':'removed')+_0x2a6900(0x229)));}else logger[_0x2a6900(0x3c8)](_0x2a6900(0x30d)+Math['abs'](_0xdf3d2e[_0x2a6900(0x3c4)])+'\x20'+_0xdf3d2e[_0x2a6900(0x3a6)]+'\x20'+(_0xdf3d2e[_0x2a6900(0x3c4)]>0x0?_0x2a6900(0x269):_0x2a6900(0x365)));}else logger[_0x2a6900(0x3c8)](_0x2a6900(0x341)+Math[_0x2a6900(0x3b8)](_0xdf3d2e['number'])+'\x20'+_0xdf3d2e[_0x2a6900(0x3a6)]+'\x20'+(_0xdf3d2e['number']>0x0?_0x2a6900(0x269):_0x2a6900(0x365))+'\x20-\x20auto\x20adjusting\x20liquidity\x20is\x20disabled');}currentCoins=_0xfe9b93,currentCoinsAll=_0x186280;}}catch(_0x597183){if(!exchangeStopped)await handleError(_0x597183,_0x2a6900(0x29f));}transactionDetectionOngoing=![];}async function watchTransactions(){await sleep(0x14*0x3e8);while(!![]){!botPaused&&!blockTransactionDetection&&coinsLoaded?(detectLiquidityChange(),await sleep(watchTransactionsInterval)):await sleep(0x3e8);}}async function loadSymbols(){const _0x36830f=_0x1e4d39;try{markets=await exchange[_0x36830f(0x2b9)](!![]),allSymbols=[],Object[_0x36830f(0x205)](markets)[_0x36830f(0x3a9)](_0x33a3c5=>{const _0x4f9efa=_0x36830f;_0x33a3c5[0x1][_0x4f9efa(0x317)]&&_0x33a3c5[0x1][_0x4f9efa(0x28f)]&&allSymbols[_0x4f9efa(0x263)](_0x33a3c5[0x0]);});}catch(_0x3ba660){markets?logger[_0x36830f(0x3c8)](_0x36830f(0x343)+_0x3ba660[_0x36830f(0x259)]()):(loading[_0x36830f(0x21c)]=!![],_0x3ba660['toString']()[_0x36830f(0x305)]()['includes']('timestamp')||_0x3ba660['toString']()['toLowerCase']()[_0x36830f(0x36e)](_0x36830f(0x360))?(logHistory(_0x36830f(0x30b),_0x36830f(0x210)),loading[_0x36830f(0x30b)]=_0x36830f(0x32c)):handleErrorNoStop(_0x3ba660,_0x36830f(0x2d8),!![]),logHistory(_0x36830f(0x30b),_0x36830f(0x381)),logHistory(_0x36830f(0x30b),_0x36830f(0x3ca)+loadCoinsRetryInterval/0xea60+_0x36830f(0x2ad)),logger[_0x36830f(0x3c8)](_0x36830f(0x3b7),_0x3ba660),emitLoadingProgress(),botPaused=!![],await sleep(loadCoinsRetryInterval),restartBot());}}function validateSymbols(_0x2e26c5){const _0x56ab8f=_0x1e4d39;let _0x11ce88=[];return _0x2e26c5[_0x56ab8f(0x3a9)](_0x1fd391=>{const _0x518a8c=_0x56ab8f;!allSymbols[_0x518a8c(0x36e)](_0x1fd391)?(logHistory('error',_0x518a8c(0x2b7)+_0x1fd391+_0x518a8c(0x26b)),loading[_0x518a8c(0x35b)]=!![],emitLoadingProgress()):_0x11ce88[_0x518a8c(0x263)](_0x1fd391);}),_0x11ce88;}async function initclient(){const _0x2e15a4=_0x1e4d39;proxyEmit('configuration',emittedConfiguration()),proxyEmit(_0x2e15a4(0x2e5),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x2e15a4(0x34f),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x470551=getNormalizedPerformance();emitPerformance(_0x470551),getStartingBalances(_0x470551);}async function toggleBotMode(){const _0x1ad198=_0x1e4d39;let _0x5db851=dbConfig[_0x1ad198(0x219)](_0x1ad198(0x2d1))[_0x1ad198(0x25d)]({'botID':botID})[_0x1ad198(0x321)]();if(_0x5db851){const _0x3cafbe=!_0x5db851['headless'];dbConfig[_0x1ad198(0x219)](_0x1ad198(0x2d1))[_0x1ad198(0x25d)]({'botID':botID})[_0x1ad198(0x345)]({'headless':_0x3cafbe})[_0x1ad198(0x2a1)](),config[_0x1ad198(0x2aa)]=_0x3cafbe,proxyEmit(_0x1ad198(0x234),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x237d79=_0x1e4d39;process[_0x237d79(0x28e)]({'updatebotmanager':!![]},_0x50778b=>{}),logger[_0x237d79(0x3c8)](_0x237d79(0x37f)+config[_0x237d79(0x2aa)]);}function _0x3835(){const _0x2fbca8=['enableFiatToggle','\x20API\x20secret\x20is\x20invalid','realizedPnL','\x20API\x20key,\x20secret\x20or\x20password\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute','BTC','Value\x20','getSeconds','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','\x20/\x20','Invalid\x20API\x20details,\x20please\x20try\x20again\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','Updating\x20API\x20key\x20(not\x20saved\x20in\x20config\x20file\x20yet)','net','page','match','\x20minutes\x20-\x20','length','Market\x20order','Portfolio\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','7561092sfTRsH','\x20>\x20pausing\x20bot\x20for\x20','Will\x20continue\x20to\x20wait\x20for\x20order(s)\x20to\x20be\x20filled\x20and\x20try\x20to\x20cancel\x20again\x20later','toString','Exchange\x20permission\x20denied\x20-\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','coin-loading-progress','\x20closed\x20the\x20connection\x20(see:\x20hodlerhacks.com/fix/5)','find','marketcapApi','starting-balance-','cancelOrder',')\x20known\x20order:\x20','delta','push','addDays','\x20attempts','\x20|\x20exchange:\x20','./version.json','001','added','round','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','net-basecoin','sha256','getOpenOrders()','pro','/USD','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','function','lowdb','balancing\x20resumed','\x20>\x20','coins','2\x20-\x20Handled\x20open\x20orders','quote','Order\x20filled','Test\x20new\x20API','Error:\x20Invalid\x20argument\x20','/USDT','stringify','cost','pki','\x20has\x20a\x2024h\x20drop\x20of\x20','sendPortfolioTelegram','Error\x20details:\x20','createWriteStream','getMonth','Stopped\x20fetching\x20balance\x20after\x20','Reset\x20|\x20','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','deleteHistoryAlerts','startprice','\x20-\x20bot\x20switched\x20to\x20manual\x20mode','currency','API-key\x20format\x20invalid','send','spot','canceled','update-liquidity','fetchOpenOrders','cancelLoading','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20trying\x20again\x20in\x20','amountToPrecision','symbol','bots','heapUsed','PermissionDenied','Insufficient\x20funds\x20to\x20execute\x20order:\x20','getPortfolio','amount','string','Error\x20in\x20testNewAPI():\x20','detectLiquidityChange()','-results.json','write','limit-high','node-forge','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','indexOf','status','PAXG','logs','red_yellow_blue','headless','restart','timeshift','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','Order\x20amount\x20is\x20invalid:\x20','isEqual','slider','liquidity','UNLOCKED','limit','Initiating\x20bot\x20restart','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','date','Invalid\x20symbol:\x20','args','loadMarkets','loading-canceled','portfolio2','\x20not\x20responding\x20(see:\x20hodlerhacks.com/fix/5)','BUSD','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','apiKey','placeOrder','token\x20is\x20expired','data','/backup/','ExchangeNotAvailable','environment','getTime','fetchTickers','getFullYear','join','Avoiding\x20continuous\x20order\x20attempts','/output-000.log','recent20','-config.json','Waited\x20','configuration-stored','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','bot','marketcapEnabled','progress','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','complete','remove','6250512OKYUZi','loadSymbols()','<pre>','random','bb-settings.json','\x20-\x20bot\x20not\x20started','password','UNLOCKING','substring','full','Order\x20is\x20invalid:\x20','excluded','version','mkdirSync','exchanges','orderstatus','exchange','emojibuy','closed','changes','ongoing','\x20|\x20lock\x20orders:\x20','replace','privateKeyFromPem','watchTrades()','keys','sendMetricsTelegram','type','sort',',\x20must\x20be\x20a\x203\x20digit\x20number','side','time','612090SPxVQt','none','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','MIN_NOTIONAL','Limit\x20(high-margin)','Market','onepagemode','Order\x20filled:\x20','pnl-basecoin','ETH','watchOrders()','apiPassword','Invalid\x20quantity','final','toLowerCase','Exchange','bot-','************','threshold','timestamp','error','startdate','Fee\x20discount\x20refund\x20detected:\x20','.json','\x20|\x20','LOCKED','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)','ask','2.6.22','configstate','enabled','showConfig','active','kill','emitHistory','split','AuthenticationError','getHours','parse','OrderNotFound','differenceInSeconds','Network\x20error\x20details:','value','search','-events.json','16866zxwzez','1\x20-\x20partially\x20FILLED\x20(','production','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','watchTrades','usd','max','\x20blocked\x20API\x20(RateLimitExceeded)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','timestamp-issue','storeHeadless','openOrders','storeConfiguration','min','breakeven','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','code','Manual\x20balancing\x20required','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','watchTradesForSymbols','decrypt','emojisell','Set\x20lock\x20orders\x20to:\x20','event-history','orderId','padStart','remainingSymbols','map','resetHistory','test','Portfolio\x20change\x20detected:\x20','colorscheme','Error\x20in\x20loadSymbols():\x20','findIndex','assign','Placing\x20order\x20for:\x20','CoinMarketCap\x20data\x20could\x20not\x20be\x20updated\x20-\x20will\x20try\x20again\x20in\x201\x20hour','Cryptocom','watchOrders','create',':\x20timer\x20>','6020965rsudMB','\x20-\x20','\x20>\x20stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','balances','prevnumber','stack','Unfilled\x20order(s)\x20could\x20not\x20be\x20canceled\x20after\x20','date-fns','\x20minutes','Cex','EUR','DDoSProtection','open','Binance','writeFile','timeout','\x0aSymbol(s):\x20','unlinkSync','testApi','filter','request-time','process\x20','defaults','fee','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','removed','trade','\x20(see:\x20hodlerhacks.com/fix/1)','PnL\x20','<b>Bot\x20','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20for\x20','InvalidOrder','\x20exchange','event','includes','sandbox','price','%\x20(','fetchTicker','OnMaintenance','./config/','NetworkError','sell','isBefore','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','setSandboxMode','exchange\x20reload','bb-secure.json','Generating\x20PnL\x20data','performance','yargs/yargs','Headless:\x20','floor','Failed\x20to\x20load\x20market\x20data\x20-\x20bot\x20not\x20started','\x20API\x20key\x20is\x20invalid','Initializing\x20exchange','existsSync','change24h','Block\x20transaction\x20detection:\x20','ID:\x20','RateLimitExceeded','splice','</pre>','\x20order:\x20','format','173VDASsN','pop','yyyy/MM/dd','average',':\x20Bot\x20','Bot\x20','marketcap','path','USDT','164436rpepTg','apiSecret','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange',')\x20unknown\x20order:\x20','Unknown\x20error:\x20','16HRfroz','toUpperCase','set','filled','USD','sells','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','limits','botname','fiat','market','coin','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','Generated\x20PnL\x20data','forEach','ordertype','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','highest','2.3.5','Loading\x20completed','decode64','pnl','net-fiat','fetchBalance','api-issue','settings','warning','no\x20open\x20orders','Error\x20details:','abs','ccxt','Net\x20','fetchBalance()','toFixed','status\x20code\x20401','\x20hour','cancelOrders()','showname','Executed\x20','(((.+)+)+)+$','toggleBotMode','number','order','%)\x0a','portfolio1','debug','1\x20-\x20FILLED\x20known\x20order:\x20','Pausing\x20for\x20','initial','slice','constructor','change','\x20|\x20highest\x20fee:\x20','getMinutes','\x20|\x20Custom\x20ID:\x20','TUSD','switch-manual','customId','percentage','uncaughtException','argv','running','eur','cooldown','total','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','getStartingBalances','-performance.json','privateKey','2\x20-\x20Validate\x20orders:\x20','sortBy','offset','portfolio','autoliquidity','\x20network\x20error:\x20','\x20>\x20[DEBUG]\x20','entries','\x20metrics:</b>\x20\x0a\x0a','market_cap','76mERGFS','Huobi','shift','watchTradesForSymbols()','88GBOGSA','InsufficientFunds','success','RSA-OAEP','Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)','\x20portfolio:</b>\x20\x0a\x0a','staging','***','last','Valid\x20balance\x20for\x20','add','freeze','basecoinvalue','get','apply','Invalid\x20balance\x20for\x20','cancel','initTickers()','valid','Order(s)\x20not\x20validated\x20after\x20','\x20-\x20go\x20back\x20and\x20try\x20again','log','Cooldown\x20ended\x20-\x20balancing\x20resumed','initclient','getDate','bitmex','Saving\x20configuration','fromCodePoint','<b>','\x20-\x20bot\x20already\x20running\x20in\x20manual\x20mode','Bybit','no\x20exchange\x20reloaded','Resetting\x20bot\x20history','\x20blocked\x20API\x20(DDoSProtection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','reverse','has','1\x20-\x20Validate\x20orders:\x20','Trigger:\x20','./logs/','basecoin','configuration','2451290DgIbJe','distribution','buy','\x20not\x20available\x20(see:\x20hodlerhacks.com/fix/5)','-------------------------------\x0a','Initializing\x20coin\x20results','startnumber','2.7.1','cloneDeep','marketcapsqrt','createOrder','target','util','Error\x20occurred:\x20'];_0x3835=function(){return _0x2fbca8;};return _0x3835();}async function loadCoins(_0x23ba3b){const _0x242b35=_0x1e4d39;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x3c6ac0,_0x221ab8=0x0,_0x1abc1e=0x0;_0x23ba3b['forEach'](_0xc33618=>{const _0x1acb73=_0x3b0b;loading[_0x1acb73(0x33d)][_0x1acb73(0x263)](_0xc33618);}),loadingCanceled=![];let _0x401468=![];while(_0x3c6ac0!=_0x23ba3b['length']+maxLoadingProgress){_0x3c6ac0=loadingProgress,_0x23ba3b[_0x242b35(0x3a9)](_0x16b486=>{const _0x2210b0=_0x242b35;if(gTicker[noslash(_0x16b486)]){loading[_0x2210b0(0x33d)]=loading['remainingSymbols'][_0x2210b0(0x35f)](_0x50eb2d=>_0x50eb2d!=_0x16b486);if(!watchedSymbols[_0x2210b0(0x36e)](_0x16b486))watchedSymbols[_0x2210b0(0x263)](_0x16b486);_0x3c6ac0++;}}),loading[_0x242b35(0x2d3)]=Math[_0x242b35(0x26a)](_0x3c6ac0/(_0x23ba3b[_0x242b35(0x253)]+maxLoadingProgress)*0x64);loading['progress']!=0x64&&(_0x1abc1e>0x1e*0x5&&(loading[_0x242b35(0x35b)]=!![],emitLoadingProgress()),_0x1abc1e>0x78*0x5&&!_0x401468&&(_0x401468=!![],logHistory(_0x242b35(0x30b),'Failed\x20to\x20load\x20coin\x20data\x20for\x20'+loading[_0x242b35(0x33d)][_0x242b35(0x2c9)](',\x20')+_0x242b35(0x2dc)),logHistory('error',_0x242b35(0x3ca)+loadCoinsRetryInterval/0xea60+_0x242b35(0x2ad)),loadingCanceled=!![],await sleep(loadCoinsRetryInterval),restartBot()));if(loadingCanceled){loading[_0x242b35(0x21c)]=!![],emitLoadingProgress();break;}else _0x221ab8!=loading['progress']&&(_0x221ab8=loading[_0x242b35(0x2d3)],emitLoadingProgress()),_0x1abc1e++,await sleep(0xc8);}_0x3c6ac0==_0x23ba3b[_0x242b35(0x253)]+maxLoadingProgress&&(coinsLoaded=!![],process[_0x242b35(0x28e)]({'status':_0x242b35(0x315),'live':'running'},_0x369db4=>{}),_0x401468&&logHistory(_0x242b35(0x20e),'All\x20coin\x20data\x20loaded\x20-\x20bot\x20started'));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x84e6aa=_0x1e4d39;proxyEmit(_0x84e6aa(0x234),{...emittedConfiguration(),'configstate':_0x84e6aa(0x2ba)});}function emitLoadingProgress(){const _0x12df08=_0x1e4d39;proxyEmit(_0x12df08(0x25b),loading);}async function getFiat(){const _0x45bfce=_0x1e4d39;let _0x5ca7ea=gTicker[stablecoins[_0x45bfce(0x1f7)][_0x45bfce(0x3a6)]],_0x55408f=gTicker[stablecoins[_0x45bfce(0x329)]['coin']];return{'eur':Number(_0x5ca7ea),'usd':Number(_0x55408f)};}function capitalize(_0x49de0e){const _0x1b60ed=_0x1e4d39;return _0x49de0e['substring'](0x0,0x1)[_0x1b60ed(0x39c)]()+_0x49de0e[_0x1b60ed(0x2df)](0x1);}function supportedExchanges(){const _0x108e77=_0x1e4d39,_0x4b6267=['ws','fetchTickers',_0x108e77(0x372),_0x108e77(0x328),_0x108e77(0x349),'cancelOrder',_0x108e77(0x23f),_0x108e77(0x292),_0x108e77(0x3b2)];let _0x5ac7ec=[],_0x2b6d51=[],_0x24c911=ccxt[_0x108e77(0x26f)][_0x108e77(0x2e5)];_0x24c911[_0x108e77(0x3a9)](_0x835d30=>{const _0x4020d2=_0x108e77;try{const _0x477b41=new ccxt['pro'][_0x835d30]();_0x2b6d51[_0x4020d2(0x263)](_0x477b41);}catch(_0x53605a){}}),_0x2b6d51[_0x108e77(0x3a9)](_0x1a849c=>{const _0x5639df=_0x108e77;let _0x4041df=0x0;_0x4b6267[_0x5639df(0x3a9)](_0x3c3a09=>{const _0x519c2b=_0x5639df;_0x3c3a09 in _0x1a849c[_0x519c2b(0x22f)]&&_0x1a849c[_0x519c2b(0x22f)][_0x3c3a09]&&_0x4041df++;}),_0x4041df==_0x4b6267[_0x5639df(0x253)]&&(!excludedExchanges[_0x5639df(0x36e)](_0x1a849c['id'])&&_0x5ac7ec[_0x5639df(0x263)](capitalize(_0x1a849c['id'])));});let _0x14bbe0=[];return _0x24c911[_0x108e77(0x3a9)](_0x31385e=>{const _0x5c59f7=_0x108e77;_0x31385e=capitalize(_0x31385e);if(!_0x5ac7ec[_0x5c59f7(0x36e)](_0x31385e))_0x14bbe0[_0x5c59f7(0x263)](_0x31385e);}),_0x5ac7ec;}function setStartDatePerformance(){const _0x18ca68=_0x1e4d39;if(config&&config[_0x18ca68(0x2b1)][0x0][_0x18ca68(0x2ea)][_0x18ca68(0x253)]!=0x0){const _0x2974d4=config[_0x18ca68(0x2b1)][0x0]['changes'];dbPerformance[_0x18ca68(0x219)](_0x18ca68(0x2c2))[_0x18ca68(0x25d)]({'date':config[_0x18ca68(0x30c)]})[_0x18ca68(0x345)]({'coins':_0x2974d4})[_0x18ca68(0x2a1)]();}}function calculatePnL(_0x2c7f70,_0x317cf,_0x9bf6fd,_0x5c9689,_0x21ff9f,_0x98fab7){const _0x2a7458=_0x1e4d39;!_0x2c7f70[_0x2a7458(0x36e)]('/'+config['basecoin'])&&(_0x9bf6fd=_0x9bf6fd==_0x2a7458(0x237)?_0x2a7458(0x376):_0x2a7458(0x237));!_0x98fab7[_0x317cf]&&(_0x98fab7[_0x317cf]={'number':0x0,'sells':0x0,'buys':0x0,'breakeven':0x0,'realizedPnL':0x0});let _0x11654b=0x0,_0x4c0f36,_0x1b2e02;if(_0x9bf6fd==_0x2a7458(0x237))_0x1b2e02=_0x98fab7[_0x317cf][_0x2a7458(0x3c4)]*_0x98fab7[_0x317cf][_0x2a7458(0x331)]+_0x21ff9f*_0x5c9689,_0x98fab7[_0x317cf]['number']+=_0x5c9689,_0x98fab7[_0x317cf][_0x2a7458(0x331)]=_0x98fab7[_0x317cf][_0x2a7458(0x3c4)]!=0x0?_0x1b2e02/_0x98fab7[_0x317cf][_0x2a7458(0x3c4)]:0x0,_0x98fab7[_0x317cf]['buys']++;else _0x9bf6fd==_0x2a7458(0x376)&&(_0x4c0f36=Math[_0x2a7458(0x330)](_0x98fab7[_0x317cf]['number'],_0x5c9689),_0x11654b=(_0x21ff9f-_0x98fab7[_0x317cf][_0x2a7458(0x331)])*_0x4c0f36,_0x1b2e02=Math[_0x2a7458(0x32a)](_0x98fab7[_0x317cf][_0x2a7458(0x3c4)]*_0x98fab7[_0x317cf]['breakeven']-_0x4c0f36*_0x98fab7[_0x317cf]['breakeven'],0x0),_0x98fab7[_0x317cf][_0x2a7458(0x3c4)]-=_0x4c0f36,_0x98fab7[_0x317cf][_0x2a7458(0x331)]=_0x98fab7[_0x317cf]['number']!=0x0?_0x1b2e02/_0x98fab7[_0x317cf]['number']:0x0,_0x98fab7[_0x317cf][_0x2a7458(0x245)]+=_0x11654b,_0x98fab7[_0x317cf][_0x2a7458(0x3a0)]++);return _0x11654b;}async function generatePnL(){const _0x55a969=_0x1e4d39;pnlGenerationNeeded=![],logger[_0x55a969(0x3c8)](_0x55a969(0x37c));const _0x5935bf=dbLogs[_0x55a969(0x219)]('logs')[_0x55a969(0x321)]();let _0x4c093b={},_0xb6d02a=0x0,_0x110904=0x0,_0x5554fe=config['startdate'];const _0x5d06a9=fns['parse'](_0x5554fe,_0x55a969(0x38f),new Date()),_0x3e15c6=new Date();let _0x2d0029=0x0;for(let _0x544100=_0x5d06a9;!fns[_0x55a969(0x377)](_0x3e15c6,_0x544100);_0x544100=fns[_0x55a969(0x264)](_0x544100,0x1)){const _0x3e10c=fns[_0x55a969(0x38c)](_0x544100,_0x55a969(0x38f));while(_0xb6d02a<_0x5935bf['length']){const _0x1abb19=new Date(_0x5935bf[_0xb6d02a][_0x55a969(0x2f6)]);if(fns[_0x55a969(0x377)](_0x1abb19,_0x544100))_0xb6d02a++;else{if(_0x5935bf[_0xb6d02a][_0x55a969(0x2f6)][_0x55a969(0x36e)](_0x3e10c)){const _0x3c0575=_0x5935bf[_0xb6d02a];if(_0x3c0575[_0x55a969(0x2f2)]===_0x55a969(0x3c5)&&(_0x3c0575[_0x55a969(0x36d)][_0x55a969(0x36e)](_0x55a969(0x27a))||_0x3c0575['event'][_0x55a969(0x36e)](_0x55a969(0x254)))){const _0x33aeaa=_0x3c0575[_0x55a969(0x36d)][_0x55a969(0x251)](/([A-Z]+\/[A-Z]+) (sell|buy) #([\d.]+) @([\d.]+)/);if(_0x33aeaa){const [,_0x20cb66,_0xbc9838,_0x58f45f,_0x333510]=_0x33aeaa,_0x7b79a=_0x20cb66[_0x55a969(0x36e)]('/'+config[_0x55a969(0x233)])?_0x20cb66[_0x55a969(0x31a)]('/')[0x0]:_0x20cb66['split']('/')[0x1],_0xab4bfe=calculatePnL(_0x20cb66,_0x7b79a,_0xbc9838,parseFloat(_0x58f45f),parseFloat(_0x333510),_0x4c093b);_0x110904+=_0xab4bfe;}}_0xb6d02a++;}else break;}}dbPerformance[_0x55a969(0x219)]('data')['find']({'date':_0x3e10c})[_0x55a969(0x345)]({'pnl':_0x110904})[_0x55a969(0x2a1)]();}dbCoinResults[_0x55a969(0x39d)](_0x55a969(0x277),_0x4c093b)[_0x55a969(0x2a1)](),logger[_0x55a969(0x3c8)](_0x55a969(0x3a8));const _0xaa607=getNormalizedPerformance();emitPerformance(_0xaa607);}async function updatePnL(_0x5cb498){const _0x21121a=_0x1e4d39,{symbol:_0x154280,coin:_0x36c43e,amount:_0xe87cb9,price:_0x357bd1,side:_0x2ae40e,reverse:_0x316642}=_0x5cb498;let _0x36e95d=dbCoinResults[_0x21121a(0x219)]('coins')[_0x21121a(0x321)]();const _0x204e7d=calculatePnL(_0x154280,_0x36c43e,_0x2ae40e,_0xe87cb9,_0x357bd1,_0x36e95d);dbCoinResults['set']('coins',_0x36e95d)[_0x21121a(0x2a1)]();const _0x2498c1=getTimeStamp()[_0x21121a(0x31a)]('\x20')[0x0];let _0x3c7d36=dbPerformance['get'](_0x21121a(0x2c2))[_0x21121a(0x25d)]({'date':_0x2498c1})['value']();_0x3c7d36?(_0x3c7d36[_0x21121a(0x3b0)]+=_0x204e7d,dbPerformance[_0x21121a(0x219)]('data')[_0x21121a(0x25d)]({'date':_0x2498c1})[_0x21121a(0x345)](_0x3c7d36)[_0x21121a(0x2a1)]()):await storePerformance();const _0x1ae893=getNormalizedPerformance();emitPerformance(_0x1ae893);}async function validate24hChanges(){const _0x350bdd=_0x1e4d39;for(const _0x1d307a of currentCoins){if(_0x1d307a[_0x350bdd(0x3a6)]!=config[_0x350bdd(0x233)]){let _0x2991b2;_0x1d307a[_0x350bdd(0x22e)]?_0x2991b2=formatResult((0x1/(gChange[_0x1d307a[_0x350bdd(0x296)]]/0x64+0x1)-0x1)*0x64,0x3):_0x2991b2=gChange[_0x1d307a[_0x350bdd(0x296)]],_0x2991b2<config['change24h']&&(logHistory(_0x350bdd(0x30b),_0x1d307a['coin']+_0x350bdd(0x281)+_0x2991b2+'%'),logHistory(_0x350bdd(0x30b),'Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses'),logHistory(_0x350bdd(0x30b),_0x350bdd(0x335)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x2670af,_0x230ef8){const _0x13a53b=_0x1e4d39;if(!_0x2670af)return!![];const _0x5e2b28=_0x230ef8[_0x13a53b(0x31a)]('.'),_0x6c2ee8=_0x2670af[_0x13a53b(0x31a)]('.');for(var _0x5d8525=0x0;_0x5d8525<_0x6c2ee8[_0x13a53b(0x253)];_0x5d8525++){const _0x2ad185=~~_0x6c2ee8[_0x5d8525],_0x36fe30=~~_0x5e2b28[_0x5d8525];if(_0x2ad185<_0x36fe30)return!![];if(_0x2ad185>_0x36fe30)return![];}return![];}async function oneTimeMigration(){const _0x5a821d=_0x1e4d39;let _0x2b0793=dbLogs[_0x5a821d(0x219)]('version')[_0x5a821d(0x321)]();if(isOlderVersion(_0x2b0793,_0x5a821d(0x3ad))){let _0x1f8cb9=[];const _0x134812=dbLogs[_0x5a821d(0x219)](_0x5a821d(0x2a8))[_0x5a821d(0x321)]();_0x134812[_0x5a821d(0x3a9)](_0x38fe36=>{const _0x2c36cf=_0x5a821d;_0x1f8cb9[_0x2c36cf(0x263)]({'time':_0x38fe36['time'],'type':_0x38fe36[_0x2c36cf(0x2f2)],'event':_0x38fe36['event']});}),dbLogs[_0x5a821d(0x219)]('logs')['assign'](_0x1f8cb9)[_0x5a821d(0x2a1)]();}let _0xf9ad0b=dbConfig['get']('version')[_0x5a821d(0x321)]();if(isOlderVersion(_0xf9ad0b,'2.3.5')){let _0x1a6179=dbConfig[_0x5a821d(0x219)](_0x5a821d(0x2d1))[_0x5a821d(0x25d)]({'botID':botID})[_0x5a821d(0x321)]();if(_0x1a6179){let _0x422831=[];_0x1a6179['portfolio'][_0x5a821d(0x3a9)](_0x53926a=>{const _0x3e0022=_0x5a821d;_0x422831[_0x3e0022(0x263)]({'coin':_0x53926a[_0x3e0022(0x3a6)],'number':_0x53926a[_0x3e0022(0x23b)],'price':_0x53926a[_0x3e0022(0x28a)]}),delete _0x53926a[_0x3e0022(0x23b)],delete _0x53926a['startprice'];});if(_0x422831['length']!==0x0)fs[_0x5a821d(0x35a)](configbackuppath+(_0x5a821d(0x25f)+botID+_0x5a821d(0x30e)),JSON[_0x5a821d(0x27e)](_0x422831,null,0x4),function(_0x242b58){if(_0x242b58){}});const _0x5e6aa8=(_0x257f31,_0x138f7d)=>{const _0x11881d=_0x5a821d;let _0x578cbc=[];_0x138f7d['forEach'](_0xdb0a13=>{const _0x54bb35=_0x3b0b,_0x2a56f1=_0x257f31[_0x54bb35(0x25d)](_0x152a79=>_0x152a79['coin']==_0xdb0a13['coin']);if(!_0x2a56f1)_0x578cbc[_0x54bb35(0x263)](_0xdb0a13);});let _0x4ad1ff=[];return _0x257f31[_0x11881d(0x3a9)](_0x1bb304=>{const _0x3f8289=_0x11881d,_0x19bc5e=_0x138f7d['find'](_0x2c8d9b=>_0x2c8d9b[_0x3f8289(0x3a6)]==_0x1bb304[_0x3f8289(0x3a6)]);if(!_0x19bc5e||_0x19bc5e[_0x3f8289(0x3c4)]==0x0&&_0x1bb304[_0x3f8289(0x3c4)]!=0x0)_0x4ad1ff['push'](_0x1bb304);}),{'missingDay1':_0x578cbc,'notInDay2':_0x4ad1ff};},_0x4e52ae=dbPerformance[_0x5a821d(0x219)](_0x5a821d(0x2c2))[_0x5a821d(0x23d)]()[_0x5a821d(0x321)]();if(_0x4e52ae[_0x5a821d(0x253)]>0x1){const {missingDay1:_0x48b650,notInDay2:_0x23b725}=_0x5e6aa8(_0x422831,_0x4e52ae[0x1]['coins']);_0x422831=[..._0x422831,..._0x48b650],_0x23b725[_0x5a821d(0x3a9)](_0x2866a8=>{const _0x31b490=_0x5a821d;let _0x509f96=_0x422831[_0x31b490(0x344)](_0x5f0b52=>_0x5f0b52['coin']==_0x2866a8['coin']);_0x509f96!=-0x1&&_0x422831['splice'](_0x509f96,0x1);});}_0x422831[_0x5a821d(0x2f3)]((_0x288411,_0x4fb071)=>_0x288411[_0x5a821d(0x3a6)]>_0x4fb071['coin']?0x1:_0x4fb071[_0x5a821d(0x3a6)]>_0x288411[_0x5a821d(0x3a6)]?-0x1:0x0);let _0x53c9d5=[{'date':_0x1a6179[_0x5a821d(0x30c)],'changes':_0x422831}];_0x4e52ae['length']>0x2&&_0x4e52ae['forEach']((_0x45415b,_0x103a44)=>{const _0x513a3c=_0x5a821d;if(_0x103a44>0x0&&_0x103a44<_0x4e52ae[_0x513a3c(0x253)]-0x1){const {missingDay1:_0x3b25ba,notInDay2:_0x193be7}=_0x5e6aa8(_0x4e52ae[_0x103a44]['coins'],_0x4e52ae[_0x103a44+0x1]['coins']);_0x422831=[],(_0x3b25ba[_0x513a3c(0x253)]!=0x0||_0x193be7[_0x513a3c(0x253)]!=0x0)&&(_0x3b25ba[_0x513a3c(0x253)]!=0x0&&_0x422831['push'](..._0x3b25ba),_0x193be7[_0x513a3c(0x253)]!=0x0&&(_0x193be7[_0x513a3c(0x3a9)](_0x1d151d=>{const _0x4881fd=_0x513a3c;_0x1d151d[_0x4881fd(0x3c4)]=-_0x1d151d[_0x4881fd(0x3c4)];}),_0x422831[_0x513a3c(0x263)](..._0x193be7)),_0x422831[_0x513a3c(0x2f3)]((_0x1fee35,_0x55728f)=>_0x1fee35['coin']>_0x55728f[_0x513a3c(0x3a6)]?0x1:_0x55728f[_0x513a3c(0x3a6)]>_0x1fee35[_0x513a3c(0x3a6)]?-0x1:0x0),_0x53c9d5[_0x513a3c(0x263)]({'date':_0x4e52ae[_0x103a44+0x1][_0x513a3c(0x2b6)],'changes':_0x422831}));}}),dbConfig[_0x5a821d(0x219)](_0x5a821d(0x2d1))['find']({'botID':botID})[_0x5a821d(0x345)]({..._0x1a6179,'liquidity':_0x53c9d5})[_0x5a821d(0x2a1)]();}}if(isOlderVersion(_0xf9ad0b,'2.6.0')){let _0x337208=dbConfig['get'](_0x5a821d(0x2d1))[_0x5a821d(0x25d)]({'botID':botID})[_0x5a821d(0x321)]();if(_0x337208){const _0x5e83f6=_0x337208[_0x5a821d(0x2e7)],_0x3aea91=_0x5e83f6?capitalize(_0x5e83f6):_0x5a821d(0x359);dbConfig[_0x5a821d(0x219)](_0x5a821d(0x2d1))['find']({'botID':botID})['assign']({'exchange':_0x3aea91})['write']();}}if(isOlderVersion(_0xf9ad0b,_0x5a821d(0x313))){let _0x5b01a4=dbConfig[_0x5a821d(0x219)](_0x5a821d(0x2d1))['find']({'botID':botID})[_0x5a821d(0x321)]();if(_0x5b01a4){const _0x4e01bf=_0x5b01a4[_0x5a821d(0x2d2)],_0x11c7e5=_0x4e01bf?_0x5a821d(0x393):![];dbConfig[_0x5a821d(0x219)](_0x5a821d(0x2d1))['find']({'botID':botID})[_0x5a821d(0x345)]({'marketcapEnabled':_0x11c7e5})['write']();}}if(isOlderVersion(_0xf9ad0b,'2.6.23')){let _0x4d6f33=dbConfig[_0x5a821d(0x219)](_0x5a821d(0x2d1))[_0x5a821d(0x25d)]({'botID':botID})[_0x5a821d(0x321)]();if(_0x4d6f33){const _0x4884f8=_0x4d6f33[_0x5a821d(0x202)],_0x588314=_0x4884f8?_0x5a821d(0x291):![];dbConfig['get'](_0x5a821d(0x2d1))[_0x5a821d(0x25d)]({'botID':botID})[_0x5a821d(0x345)]({'autoliquidity':_0x588314})[_0x5a821d(0x2a1)]();}}let _0x3c7e18=dbPerformance[_0x5a821d(0x219)]('version')['value']();isOlderVersion(_0x3c7e18,'2.3.5')&&setStartDatePerformance();let _0x54bb4f=dbCoinResults[_0x5a821d(0x219)]('version')[_0x5a821d(0x321)]();if(isOlderVersion(_0x54bb4f,_0x5a821d(0x23c))){let _0x52e1f0=dbCoinResults[_0x5a821d(0x219)]('coins')[_0x5a821d(0x321)]();if(_0x52e1f0[_0x5a821d(0x253)]!=0x0)pnlGenerationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x3502b9=_0x1e4d39;dbConfig['set'](_0x3502b9(0x2e3),serverversion)[_0x3502b9(0x2a1)](),dbPerformance[_0x3502b9(0x39d)]('version',serverversion)['write'](),dbLogs[_0x3502b9(0x39d)](_0x3502b9(0x2e3),serverversion)[_0x3502b9(0x2a1)](),dbCoinResults[_0x3502b9(0x39d)]('version',serverversion)[_0x3502b9(0x2a1)]();}function getConfiguration(_0x38c32a){const _0x43eb8e=_0x1e4d39;let _0x4ee395=dbConfig['get'](_0x43eb8e(0x2d1))[_0x43eb8e(0x25d)]({'botID':_0x38c32a})[_0x43eb8e(0x321)]();if(_0x4ee395){let _0x2bd03c=![];typeof _0x4ee395['threshold']==_0x43eb8e(0x29d)&&(_0x4ee395={..._0x4ee395,'threshold':Number(_0x4ee395[_0x43eb8e(0x309)])},_0x2bd03c=!![]),_0x4ee395[_0x43eb8e(0x385)]==undefined&&(_0x4ee395={..._0x4ee395,'change24h':-0x14},_0x2bd03c=!![]),_0x4ee395['fiat']==undefined&&(_0x4ee395={..._0x4ee395,'fiat':_0x43eb8e(0x39f)},_0x2bd03c=!![]),_0x4ee395[_0x43eb8e(0x2fd)]==undefined&&(_0x4ee395={..._0x4ee395,'onepagemode':settings['onepagemode']},_0x2bd03c=!![]),_0x4ee395['colorscheme']==undefined&&(_0x4ee395={..._0x4ee395,'colorscheme':_0x43eb8e(0x2a9)},_0x2bd03c=!![]),_0x4ee395['autoliquidity']==undefined&&(_0x4ee395={..._0x4ee395,'autoliquidity':_0x43eb8e(0x291)},_0x2bd03c=!![]),_0x4ee395[_0x43eb8e(0x25e)]==undefined&&(_0x4ee395={..._0x4ee395,'marketcapApi':settings[_0x43eb8e(0x25e)]?!![]:![]},_0x2bd03c=!![]),_0x4ee395[_0x43eb8e(0x2d2)]==undefined&&(_0x4ee395={..._0x4ee395,'marketcapEnabled':![]},_0x2bd03c=!![]),_0x4ee395[_0x43eb8e(0x36f)]==undefined&&(_0x4ee395={..._0x4ee395,'sandbox':![]},_0x2bd03c=!![]),_0x2bd03c&&(_0x4ee395={'botID':_0x4ee395['botID'],'exchange':_0x4ee395['exchange'],'apiKey':_0x4ee395[_0x43eb8e(0x2bf)],'apiSecret':_0x4ee395[_0x43eb8e(0x397)],'apiPassword':_0x4ee395['apiPassword'],'basecoin':_0x4ee395['basecoin'],'botname':_0x4ee395['botname'],'showname':_0x4ee395[_0x43eb8e(0x3c0)],'threshold':_0x4ee395[_0x43eb8e(0x309)],'ordertype':_0x4ee395['ordertype'],'timeout':_0x4ee395[_0x43eb8e(0x35b)],'fiat':_0x4ee395[_0x43eb8e(0x3a4)],'startdate':_0x4ee395['startdate'],'recreate':_0x4ee395['recreate'],'timeshift':_0x4ee395[_0x43eb8e(0x2ac)],'onepagemode':_0x4ee395[_0x43eb8e(0x2fd)],'headless':_0x4ee395['headless'],'cooldown':_0x4ee395[_0x43eb8e(0x1f8)],'change24h':_0x4ee395[_0x43eb8e(0x385)],'emojibuy':_0x4ee395[_0x43eb8e(0x2e8)],'emojisell':_0x4ee395[_0x43eb8e(0x338)],'colorscheme':_0x4ee395[_0x43eb8e(0x342)],'marketcapApi':_0x4ee395[_0x43eb8e(0x25e)],'marketcapEnabled':_0x4ee395[_0x43eb8e(0x2d2)],'sandbox':_0x4ee395[_0x43eb8e(0x36f)],'portfolio':_0x4ee395[_0x43eb8e(0x201)],'autoliquidity':_0x4ee395['autoliquidity'],'liquidity':_0x4ee395[_0x43eb8e(0x2b1)],'openOrders':_0x4ee395[_0x43eb8e(0x32e)]},dbConfig[_0x43eb8e(0x219)](_0x43eb8e(0x2d1))[_0x43eb8e(0x2d6)]()['write'](),dbConfig['get'](_0x43eb8e(0x2d1))[_0x43eb8e(0x263)](_0x4ee395)[_0x43eb8e(0x2a1)]());}else _0x4ee395={'botID':_0x38c32a,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x43eb8e(0x392)+_0x38c32a,'showname':![],'threshold':0x3,'ordertype':_0x43eb8e(0x3a5),'timeout':0x14,'fiat':_0x43eb8e(0x39f),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x43eb8e(0x2ac)],'onepagemode':settings[_0x43eb8e(0x2fd)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x43eb8e(0x2a9),'marketcapApi':settings[_0x43eb8e(0x25e)]?!![]:![],'marketcapEnabled':![],'sandbox':![],'portfolio':[],'autoliquidity':_0x43eb8e(0x291),'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x4ee395;}function emittedConfiguration(){const _0x4814c8=_0x1e4d39;let _0x1980fe;if(config[_0x4814c8(0x2bf)]=='')_0x1980fe={...config,'configstate':_0x4814c8(0x3cb)};else config[_0x4814c8(0x2bf)]==_0x4814c8(0x213)?_0x1980fe={...config,'configstate':'recovery'}:(_0x1980fe={...config,'apiKey':_0x4814c8(0x308),'apiSecret':'************'},config['apiPassword']&&(_0x1980fe[_0x4814c8(0x302)]=_0x4814c8(0x308)));return _0x1980fe[_0x4814c8(0x243)]=enableFiatToggle,_0x1980fe;}function getSettings(){const _0xbdd246=_0x1e4d39;return dbSettings[_0xbdd246(0x219)](_0xbdd246(0x3b4))[_0xbdd246(0x321)]();}function getSecure(){return dbSecure['get']('secure')['value']()||{};}function updateTimeshift(_0x3f3b85){const _0x2b3005=_0x1e4d39;let _0x40648d=dbConfig['get']('bot')[_0x2b3005(0x25d)]({'botID':botID})[_0x2b3005(0x321)]();_0x40648d&&dbConfig[_0x2b3005(0x219)](_0x2b3005(0x2d1))[_0x2b3005(0x25d)]({'botID':botID})[_0x2b3005(0x345)]({'timeshift':_0x3f3b85})['write'](),config['timeshift']=_0x3f3b85,proxyEmit(_0x2b3005(0x234),emittedConfiguration());}function updateOnepagemode(_0x1ccda8){const _0x1ac25d=_0x1e4d39;let _0x2712cb=dbConfig['get']('bot')[_0x1ac25d(0x25d)]({'botID':botID})[_0x1ac25d(0x321)]();_0x2712cb&&dbConfig['get'](_0x1ac25d(0x2d1))['find']({'botID':botID})[_0x1ac25d(0x345)]({'onepagemode':_0x1ccda8})[_0x1ac25d(0x2a1)](),config[_0x1ac25d(0x2fd)]=_0x1ccda8,proxyEmit(_0x1ac25d(0x234),emittedConfiguration());}function updateMarketcapApi(_0x4bce4c){const _0x4ce430=_0x1e4d39,_0x266e96=_0x4bce4c?!![]:![];let _0x3322a6=dbConfig[_0x4ce430(0x219)](_0x4ce430(0x2d1))[_0x4ce430(0x25d)]({'botID':botID})[_0x4ce430(0x321)]();_0x3322a6&&dbConfig['get'](_0x4ce430(0x2d1))[_0x4ce430(0x25d)]({'botID':botID})[_0x4ce430(0x345)]({'marketcapApi':_0x266e96})['write'](),config[_0x4ce430(0x25e)]=_0x266e96,getMarketCap(),proxyEmit(_0x4ce430(0x234),emittedConfiguration());}async function storeConfiguration(_0x4b2421){const _0x51448c=_0x1e4d39;logger[_0x51448c(0x3c8)](_0x51448c(0x226));_0x4b2421['configstate']&&delete _0x4b2421[_0x51448c(0x314)];if(pidBalances)clearTimeout(pidBalances);setBlockTransactionDetection(!![]);let _0x264c37=![],_0x5d6eea=![],_0x5ef257=[];_0x4b2421['portfolio'][_0x51448c(0x3a9)](_0x1b6b08=>{const _0x180e17=_0x51448c;if(!_0x1b6b08[_0x180e17(0x2e2)]&&_0x1b6b08[_0x180e17(0x3a6)]!=_0x4b2421[_0x180e17(0x233)])_0x5ef257[_0x180e17(0x263)](_0x1b6b08[_0x180e17(0x296)]);}),_0x5ef257[_0x51448c(0x3a9)](_0x17a192=>{const _0x21a0e9=currentCoins['find'](_0x596896=>_0x596896['symbol']==_0x17a192);!_0x21a0e9&&(_0x264c37=!![]);}),currentCoins[_0x51448c(0x3a9)](_0x38afdd=>{const _0xb33213=_0x51448c;if(_0x38afdd['coin']!=config[_0xb33213(0x233)]){const _0xc2c59a=_0x5ef257[_0xb33213(0x25d)](_0x49796a=>_0x49796a==_0x38afdd['symbol']);!_0xc2c59a&&(_0x264c37=!![]);}}),_0x4b2421[_0x51448c(0x201)]['forEach'](_0x4e195b=>{const _0x559e16=_0x51448c,_0x5a7c6d=config[_0x559e16(0x201)][_0x559e16(0x25d)](_0x4a2cd1=>_0x4a2cd1[_0x559e16(0x3a6)]==_0x4e195b[_0x559e16(0x3a6)]);if(_0x5a7c6d&&_0x4e195b['offset']!=_0x5a7c6d[_0x559e16(0x200)])_0x5d6eea=!![];});let _0x2e0fe1=dbConfig[_0x51448c(0x219)](_0x51448c(0x2d1))[_0x51448c(0x25d)]({'botID':botID})['value']();_0x4b2421={..._0x4b2421,'apiKey':decryptRSA(secure[_0x51448c(0x1fd)],_0x4b2421[_0x51448c(0x2bf)]),'apiSecret':decryptRSA(secure[_0x51448c(0x1fd)],_0x4b2421[_0x51448c(0x397)])};_0x4b2421[_0x51448c(0x302)]&&(_0x4b2421[_0x51448c(0x302)]=decryptRSA(secure[_0x51448c(0x1fd)],_0x4b2421[_0x51448c(0x302)]));let _0x25a72f=![];if(_0x2e0fe1){_0x4b2421[_0x51448c(0x2bf)]==_0x51448c(0x308)?_0x4b2421['apiKey']=config[_0x51448c(0x2bf)]:_0x25a72f=!![];_0x4b2421['apiSecret']==_0x51448c(0x308)?_0x4b2421[_0x51448c(0x397)]=config[_0x51448c(0x397)]:_0x25a72f=!![];if(_0x4b2421[_0x51448c(0x302)]==_0x51448c(0x308))_0x4b2421[_0x51448c(0x302)]=config[_0x51448c(0x302)];else{if(_0x4b2421[_0x51448c(0x302)])_0x25a72f=!![];}dbConfig[_0x51448c(0x219)](_0x51448c(0x2d1))[_0x51448c(0x25d)]({'botID':botID})[_0x51448c(0x345)](_0x4b2421)[_0x51448c(0x2a1)]();}else dbConfig[_0x51448c(0x219)](_0x51448c(0x2d1))[_0x51448c(0x263)](_0x4b2421)['write'](),_0x25a72f=!![],process['send']({'status':_0x51448c(0x315),'live':_0x51448c(0x1f6)},_0x13c679=>{});process['send']({'botname':_0x4b2421[_0x51448c(0x3a3)]},_0x21fd5b=>{}),config={..._0x4b2421},updateBotManager(),proxyEmit(_0x51448c(0x2cf)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x25a72f)await reset(!![]);else _0x264c37||_0x5d6eea?await reset(![]):getBalances();setBlockTransactionDetection(![]);}async function storeHeadless(_0x536035){const _0x2e1404=_0x1e4d39,_0x5288bd={...config,'headless':_0x536035['headless']};let _0x4b0e71=dbConfig['get'](_0x2e1404(0x2d1))[_0x2e1404(0x25d)]({'botID':botID})['value']();_0x4b0e71&&dbConfig[_0x2e1404(0x219)]('bot')[_0x2e1404(0x25d)]({'botID':botID})[_0x2e1404(0x345)](_0x5288bd)[_0x2e1404(0x2a1)](),config={..._0x5288bd},updateBotManager(),proxyEmit(_0x2e1404(0x234),emittedConfiguration());}async function storeFiat(_0x46fdd2){const _0x2576d9=_0x1e4d39,_0x22f7b3={...config,'fiat':_0x46fdd2};let _0x240df2=dbConfig[_0x2576d9(0x219)](_0x2576d9(0x2d1))['find']({'botID':botID})[_0x2576d9(0x321)]();_0x240df2&&dbConfig[_0x2576d9(0x219)](_0x2576d9(0x2d1))['find']({'botID':botID})[_0x2576d9(0x345)](_0x22f7b3)[_0x2576d9(0x2a1)](),config={..._0x22f7b3},proxyEmit(_0x2576d9(0x234),emittedConfiguration());}function resetHistory(){const _0x5cb0f8=_0x1e4d39;logger[_0x5cb0f8(0x2e0)](_0x5cb0f8(0x22c));try{if(fs['existsSync'](path['join'](configpath,_0x5cb0f8(0x307)+botID+'-events.json')))fs[_0x5cb0f8(0x35d)](path[_0x5cb0f8(0x2c9)](configpath,_0x5cb0f8(0x307)+botID+_0x5cb0f8(0x323)));if(fs[_0x5cb0f8(0x384)](path['join'](configpath,'bot-'+botID+'-performance.json')))fs[_0x5cb0f8(0x35d)](path[_0x5cb0f8(0x2c9)](configpath,_0x5cb0f8(0x307)+botID+_0x5cb0f8(0x1fc)));if(fs['existsSync'](path[_0x5cb0f8(0x2c9)](configpath,_0x5cb0f8(0x307)+botID+_0x5cb0f8(0x2a0))))fs[_0x5cb0f8(0x35d)](path[_0x5cb0f8(0x2c9)](configpath,'bot-'+botID+_0x5cb0f8(0x2a0)));}catch(_0x455b0f){if(_0x455b0f)logger[_0x5cb0f8(0x2e0)]('Error\x20while\x20deleting\x20files:\x20',_0x455b0f);}const _0x34693e=getDate();let _0x135fab=[];currentCoins['forEach'](_0x2a78a5=>{const _0x35aa5c=_0x5cb0f8;_0x135fab[_0x35aa5c(0x263)]({'coin':_0x2a78a5[_0x35aa5c(0x3a6)],'number':_0x2a78a5['number'],'price':_0x2a78a5['last']});});let _0x38d86f=dbConfig[_0x5cb0f8(0x219)](_0x5cb0f8(0x2d1))[_0x5cb0f8(0x25d)]({'botID':botID})[_0x5cb0f8(0x321)]();_0x38d86f&&(dbConfig[_0x5cb0f8(0x219)](_0x5cb0f8(0x2d1))['find']({'botID':botID})[_0x5cb0f8(0x345)]({'liquidity':[{'date':_0x34693e,'changes':_0x135fab}]})[_0x5cb0f8(0x2a1)](),config[_0x5cb0f8(0x2b1)]=[]),restartBot(!![]);}function noslash(_0x40fd9a){const _0x323c43=_0x1e4d39;return _0x40fd9a[_0x323c43(0x2ed)]('/','');}function updateHighestFee(_0x5ecdf3){const _0x197c16=_0x1e4d39;if(_0x5ecdf3[_0x197c16(0x22e)]){let _0x43c11d={'filled':_0x5ecdf3[_0x197c16(0x39e)]*_0x5ecdf3[_0x197c16(0x370)],'amount':_0x5ecdf3[_0x197c16(0x39e)]*_0x5ecdf3['price'],'side':_0x5ecdf3[_0x197c16(0x2f5)]==_0x197c16(0x376)?_0x197c16(0x237):_0x197c16(0x376),'price':0x1/_0x5ecdf3['price']};_0x5ecdf3={..._0x5ecdf3,..._0x43c11d};}const _0x39a768=defaultFee*_0x5ecdf3[_0x197c16(0x39e)]*_0x5ecdf3['price'];lastFees[_0x197c16(0x2cc)][_0x197c16(0x253)]===0x14&&lastFees[_0x197c16(0x2cc)][_0x197c16(0x20a)](),lastFees[_0x197c16(0x2cc)][_0x197c16(0x263)](_0x39a768),lastFees[_0x197c16(0x3ac)]=Math[_0x197c16(0x32a)](...lastFees[_0x197c16(0x2cc)]);}async function updateNumberCoinsCcxt(_0x259f89){const _0x5f3f0d=_0x1e4d39;logger[_0x5f3f0d(0x3c8)]('0\x20-\x20EXECUTION:\x20'+_0x259f89[_0x5f3f0d(0x296)]+_0x5f3f0d(0x30f)+_0x259f89['status']+_0x5f3f0d(0x30f)+_0x259f89[_0x5f3f0d(0x39e)]+_0x5f3f0d(0x24c)+_0x259f89[_0x5f3f0d(0x29c)]+_0x5f3f0d(0x30f)+_0x259f89['id']);let _0x38ff35=_0x259f89[_0x5f3f0d(0x2a6)],_0x2212cc=![];currentCoins['forEach'](_0x36b7ee=>{const _0x18f3d7=_0x5f3f0d;_0x36b7ee[_0x18f3d7(0x296)]==_0x259f89['symbol']&&(_0x2212cc=!![]);});if(!_0x2212cc)return;const _0x5ba84f=currentCoins[_0x5f3f0d(0x25d)](_0x54e3f4=>_0x54e3f4[_0x5f3f0d(0x296)]==_0x259f89[_0x5f3f0d(0x296)]),_0x17b693=_0x5ba84f[_0x5f3f0d(0x3a6)],_0x5cf061=_0x120991=>{const _0x3d7f18=_0x5f3f0d,_0x4850e1=currentCoins[_0x3d7f18(0x25d)](_0xd5c22a=>_0xd5c22a[_0x3d7f18(0x296)]==_0x259f89[_0x3d7f18(0x296)]);if(_0x4850e1)_0x4850e1['orderstatus']=_0x120991;};let _0x53f81c=![];for(const _0x24c0ca of lastOrders){const _0x5cd5bc=0x64,_0x4097a0=0x1388;let _0xf7bda3=0x0;while(!_0x24c0ca[_0x5f3f0d(0x33b)]&&_0xf7bda3*_0x5cd5bc<_0x4097a0){_0xf7bda3++,await sleep(_0x5cd5bc);}if(_0xf7bda3>0x0)logger[_0x5f3f0d(0x3c8)](_0x5f3f0d(0x2ce)+_0xf7bda3*_0x5cd5bc/0x3e8+_0x5f3f0d(0x271));_0x24c0ca['orderId']==_0x259f89['id']&&(_0x53f81c=!![]);}if(_0x38ff35==_0x5f3f0d(0x358)){_0x5cf061('open');if(_0x259f89['filled']>0x0&&_0x259f89['filled']<_0x259f89[_0x5f3f0d(0x29c)]){if(_0x53f81c){setBlockTransactionDetection(!![]),logger[_0x5f3f0d(0x3c8)]('1\x20-\x20partially\x20FILLED\x20('+_0x259f89[_0x5f3f0d(0x39e)]+_0x5f3f0d(0x261)+_0x259f89['id']);const _0x186df0=await getCoins(balanceUpdateDelay,undefined,undefined,_0x17b693);[currentCoins,currentCoinsAll]=_0x186df0,setBlockTransactionDetection(![]);}else logger[_0x5f3f0d(0x3c8)](_0x5f3f0d(0x325)+_0x259f89[_0x5f3f0d(0x39e)]+_0x5f3f0d(0x399)+_0x259f89['id']),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay);}}else{if(_0x38ff35==_0x5f3f0d(0x290)){_0x5cf061(_0x5f3f0d(0x290)),lastOrders=lastOrders[_0x5f3f0d(0x35f)](_0x395ab1=>_0x395ab1[_0x5f3f0d(0x296)]!=_0x259f89['symbol']);const _0x2deb29=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x2deb29,setBlockTransactionDetection(![]),await getOpenOrders(),handleOpenOrders();}else{if(_0x38ff35==_0x5f3f0d(0x2e9)){if(lastOrders)for(const _0x15d785 of lastOrders){if(_0x15d785[_0x5f3f0d(0x33b)]==_0x259f89['id']){logger[_0x5f3f0d(0x3c8)](_0x5f3f0d(0x3c9)+_0x259f89['id']),_0x53f81c=!![];if(_0x15d785[_0x5f3f0d(0x39e)]==0x0){setBlockTransactionDetection(!![]),logger[_0x5f3f0d(0x3c8)]('2\x20-\x20handling\x20FILLED\x20order:\x20'+_0x259f89['id']);if(_0x259f89[_0x5f3f0d(0x390)])_0x15d785[_0x5f3f0d(0x370)]=_0x259f89[_0x5f3f0d(0x390)];else{if(_0x259f89['price'])_0x15d785[_0x5f3f0d(0x370)]=_0x259f89[_0x5f3f0d(0x370)];else{}}_0x15d785[_0x5f3f0d(0x39e)]=_0x259f89['filled'],updateHighestFee(_0x15d785);const _0x89dc17=await getCoins(balanceUpdateDelay,undefined,undefined,_0x17b693);[currentCoins,currentCoinsAll]=_0x89dc17,setBlockTransactionDetection(![]),await validateOrders(),_0x5cf061(_0x5f3f0d(0x39e)),_0x15d785[_0x5f3f0d(0x363)]={'currency':_0x259f89['fee']?_0x259f89[_0x5f3f0d(0x363)][_0x5f3f0d(0x28c)]:null,'cost':_0x259f89[_0x5f3f0d(0x363)]?_0x259f89[_0x5f3f0d(0x363)][_0x5f3f0d(0x27f)]:0x0},await updatePnL(_0x15d785);}}}!_0x53f81c&&(logger[_0x5f3f0d(0x3c8)]('1\x20-\x20FILLED\x20unknown\x20order:\x20'+_0x259f89['id']),_0x5cf061(_0x5f3f0d(0x39e)),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay),await updateOpenOrders(),handleOpenOrders());}}}if(lastBalances){let _0xfd1f3e=JSON[_0x5f3f0d(0x31d)](lastBalances[_0x5f3f0d(0x201)]);const _0x4f2750=_0xfd1f3e[_0x5f3f0d(0x25d)](_0x5e9a04=>_0x5e9a04[_0x5f3f0d(0x296)]==_0x259f89[_0x5f3f0d(0x296)]);if(_0x4f2750){if(_0x38ff35=='open')_0x4f2750[_0x5f3f0d(0x2e6)]=_0x4f2750[_0x5f3f0d(0x2e6)]==_0x5f3f0d(0x39e)?_0x5f3f0d(0x39e):_0x5f3f0d(0x358);else{if(_0x38ff35==_0x5f3f0d(0x290))_0x4f2750[_0x5f3f0d(0x2e6)]=_0x4f2750[_0x5f3f0d(0x2e6)]==_0x5f3f0d(0x39e)?'filled':_0x5f3f0d(0x290);else _0x38ff35==_0x5f3f0d(0x2e9)&&(_0x4f2750[_0x5f3f0d(0x2e6)]=_0x5f3f0d(0x39e));}}lastBalances={...lastBalances,'portfolio':JSON[_0x5f3f0d(0x27e)](_0xfd1f3e)},proxyEmit(_0x5f3f0d(0x34f),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){await getOpenOrders();let _0x3ebd51=![];currentCoins['forEach'](_0x1e45e1=>{const _0x1f4583=_0x3b0b;_0x3ebd51=allOpenOrders['find'](_0x2bfc2f=>_0x2bfc2f[_0x1f4583(0x296)]==_0x1e45e1[_0x1f4583(0x296)]),_0x1e45e1['orderstatus']=_0x3ebd51?'open':_0x1f4583(0x2f8);});}async function fetchBalance(_0x105c96=!![]){const _0x12fdc2=_0x1e4d39;let _0x38c7bf,_0x26e138,_0x268ec6,_0x415c0a=0x0;while(!_0x26e138&&_0x415c0a<maxRetries){try{return _0x38c7bf=await exchange['fetchBalance'](),_0x26e138=_0x38c7bf[_0x12fdc2(0x1f9)],_0x26e138;}catch(_0x10d477){_0x268ec6=_0x10d477,_0x415c0a++,await sleep(retryInterval);}}return!_0x105c96?handleErrorNoStop(_0x268ec6,_0x12fdc2(0x3bb)):await handleError(_0x268ec6,_0x12fdc2(0x3bb)),![];}async function getCoins(_0x5dbef5=0x0,_0x1c2771=!![],_0x46d770=config[_0x1e4d39(0x233)],_0x4fb5f1){const _0x568ac6=_0x1e4d39;let _0x214687=[],_0x4210e1=[],_0x5c57fd=[],_0x495fdd;if(_0x5dbef5)await sleep(_0x5dbef5);if(botPaused)return[currentCoins,currentCoinsAll];let _0x312ecd=![],_0x51e8da=0x0,_0x42aa53,_0x5d5c72;_0x4fb5f1&&(_0x42aa53=currentCoins[_0x568ac6(0x25d)](_0x151cbf=>_0x151cbf[_0x568ac6(0x3a6)]==_0x4fb5f1),_0x42aa53&&(_0x5d5c72=_0x42aa53['prevnumber'],delete _0x42aa53[_0x568ac6(0x350)]));while(!_0x312ecd){_0x495fdd=await fetchBalance(_0x1c2771);if(_0x495fdd){if(_0x4fb5f1){if(_0x495fdd[_0x4fb5f1]!=_0x5d5c72)logger[_0x568ac6(0x3c8)](_0x568ac6(0x215)+_0x4fb5f1+':\x20'+_0x495fdd[_0x4fb5f1]+'\x20('+_0x5d5c72+')'),_0x312ecd=!![];else{logger[_0x568ac6(0x3c8)](_0x568ac6(0x21b)+_0x4fb5f1+':\x20'+_0x495fdd[_0x4fb5f1]+'\x20('+_0x5d5c72+')'),_0x51e8da++;if(_0x51e8da<balanceUpdateRetries)await sleep(balanceUpdateDelay);else{logger['debug'](_0x568ac6(0x286)+_0x51e8da+'\x20attempts');break;}}}else break;}else return[currentCoins,currentCoinsAll];}for(const [_0x1965e6,_0x5e420d]of Object[_0x568ac6(0x205)](_0x495fdd)){_0x5c57fd[_0x568ac6(0x263)](_0x1965e6);}config[_0x568ac6(0x201)][_0x568ac6(0x3a9)](_0x29631a=>{const _0x584737=_0x568ac6;!_0x5c57fd[_0x584737(0x36e)](_0x29631a['coin'])&&(_0x495fdd[_0x29631a[_0x584737(0x3a6)]]=0x0);});if(_0x46d770=='')for(const [_0x5dfc70,_0x987a3]of Object['entries'](_0x495fdd)){_0x987a3!=0x0&&_0x214687['push']({'coin':_0x5dfc70});}else for(const [_0x32de64,_0x31a778]of Object[_0x568ac6(0x205)](_0x495fdd)){const _0x4606da=config['portfolio'][_0x568ac6(0x25d)](_0x3b9c33=>_0x3b9c33[_0x568ac6(0x3a6)]==_0x32de64),_0x32b09d=_0x32de64+'/'+_0x46d770,_0xc3073=_0x46d770+'/'+_0x32de64,_0x484ffe=currentCoins[_0x568ac6(0x25d)](_0x379291=>_0x379291[_0x568ac6(0x3a6)]==_0x32de64);if((_0x31a778!=0x0||_0x4606da)&&(allSymbols[_0x568ac6(0x36e)](_0x32b09d)||_0x32de64==_0x46d770))_0x484ffe?_0x214687[_0x568ac6(0x263)]({..._0x484ffe,'number':Math['max'](_0x31a778+(_0x4606da&&_0x4606da[_0x568ac6(0x200)]||0x0),0x0)}):_0x214687[_0x568ac6(0x263)]({'coin':_0x32de64,'symbol':_0x32b09d,'reverse':![],'number':Math['max'](_0x31a778+(_0x4606da&&_0x4606da[_0x568ac6(0x200)]||0x0),0x0),'orderstatus':_0x568ac6(0x2f8)});else{if((_0x31a778!=0x0||_0x4606da)&&allSymbols[_0x568ac6(0x36e)](_0xc3073))_0x484ffe?_0x214687[_0x568ac6(0x263)]({..._0x484ffe,'number':Math[_0x568ac6(0x32a)](_0x31a778+(_0x4606da&&_0x4606da['offset']||0x0),0x0)}):_0x214687[_0x568ac6(0x263)]({'coin':_0x32de64,'symbol':_0xc3073,'reverse':!![],'number':Math['max'](_0x31a778+(_0x4606da&&_0x4606da[_0x568ac6(0x200)]||0x0),0x0),'orderstatus':_0x568ac6(0x2f8)});else _0x4606da&&_0x214687['push']({'coin':_0x4606da[_0x568ac6(0x3a6)],'symbol':_0x4606da[_0x568ac6(0x296)],'reverse':_0x4606da[_0x568ac6(0x22e)],'number':0x0,'orderstatus':'none'});}}return _0x214687['sort']((_0xabf0e4,_0x35403b)=>_0xabf0e4['delta']<_0x35403b[_0x568ac6(0x262)]?0x1:_0x35403b[_0x568ac6(0x262)]<_0xabf0e4[_0x568ac6(0x262)]?-0x1:0x0),_0x4210e1=cloneDeep(_0x214687),_0x214687=_0x214687[_0x568ac6(0x35f)](_0x219860=>{const _0x540679=_0x568ac6,_0x576a45=config['portfolio'][_0x540679(0x25d)](_0x99c10b=>_0x99c10b[_0x540679(0x3a6)]==_0x219860[_0x540679(0x3a6)]);return _0x576a45&&!_0x576a45[_0x540679(0x2e2)];}),[_0x214687,_0x4210e1];}async function getOpenOrders(){const _0x2d1687=_0x1e4d39;let _0x3562e3;allOpenOrders=[];try{for(const _0x1f2834 of config[_0x2d1687(0x201)]){!_0x1f2834[_0x2d1687(0x2e2)]&&_0x1f2834[_0x2d1687(0x3a6)]!=config['basecoin']&&(_0x3562e3=await exchange[_0x2d1687(0x292)](_0x1f2834['symbol']),_0x3562e3[_0x2d1687(0x253)]>0x0&&allOpenOrders[_0x2d1687(0x263)](_0x3562e3[0x0]));}}catch(_0x441b09){await handleError(_0x441b09,_0x2d1687(0x26e));}}async function handleOpenOrders(_0xf11e82=0x0){const _0x177bd9=_0x1e4d39;allOpenOrders['length']==0x0&&lockOrders==ORDERS[_0x177bd9(0x310)]&&allOrdersPlaced&&(_0xf11e82==0x0?(logger[_0x177bd9(0x3c8)]('1\x20-\x20Handle\x20open\x20orders'),_0xf11e82++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x177bd9(0x3c8)](_0x177bd9(0x278)),validateOrders(_0x177bd9(0x3b6))));}async function testAPI(){const _0x37402f=_0x1e4d39;try{return await exchange['fetchBalance'](),!![];}catch(_0x1eb6a4){return loading['cancel']=!![],_0x1eb6a4[_0x37402f(0x259)]()['toLowerCase']()['includes'](_0x37402f(0x30a))||_0x1eb6a4[_0x37402f(0x259)]()[_0x37402f(0x305)]()[_0x37402f(0x36e)](_0x37402f(0x360))?(logHistory(_0x37402f(0x30b),'Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)'),loading[_0x37402f(0x30b)]=_0x37402f(0x32c)):(handleErrorNoStop(_0x1eb6a4,'testAPI()'),logger[_0x37402f(0x3c8)](_0x37402f(0x3b7),_0x1eb6a4)),emitLoadingProgress(),botPaused=!![],![];}}async function testNewAPI(_0x30b003){const _0x141c96=_0x1e4d39;logger[_0x141c96(0x3c8)](_0x141c96(0x27b));const _0x3f03ea=ccxt[_0x141c96(0x26f)][_0x30b003[_0x141c96(0x2e7)][_0x141c96(0x305)]()],_0x1ce3d2=new _0x3f03ea({'apiKey':_0x30b003['apiKey'],'secret':_0x30b003[_0x141c96(0x397)],'options':{'defaultType':_0x141c96(0x28f)}});if(_0x30b003['apiPassword'])_0x1ce3d2[_0x141c96(0x2dd)]=_0x30b003[_0x141c96(0x302)];if(_0x1ce3d2['has']['sandbox'])_0x1ce3d2['setSandboxMode'](_0x30b003[_0x141c96(0x36f)]);try{await _0x1ce3d2[_0x141c96(0x3b2)](),botPaused=![];}catch(_0xb813b9){logger[_0x141c96(0x3c8)](_0x141c96(0x29e)+_0xb813b9[_0x141c96(0x259)]());throw _0xb813b9;}}function cloneDeep(_0x37d8ca){const _0x38748b=_0x1e4d39;return JSON[_0x38748b(0x31d)](JSON[_0x38748b(0x27e)](_0x37d8ca));}async function getPortfolio(_0x13a39d){const _0x16cafb=_0x1e4d39;let _0xff3a87=[],_0x52903c=[],_0x40a736=[],_0x27e14d;_0x13a39d['apiKey']=decryptRSA(secure[_0x16cafb(0x1fd)],_0x13a39d[_0x16cafb(0x2bf)]),_0x13a39d[_0x16cafb(0x397)]=decryptRSA(secure[_0x16cafb(0x1fd)],_0x13a39d[_0x16cafb(0x397)]);if(_0x13a39d[_0x16cafb(0x302)])_0x13a39d[_0x16cafb(0x302)]=decryptRSA(secure['privateKey'],_0x13a39d[_0x16cafb(0x302)]);if(_0x13a39d[_0x16cafb(0x2bf)]!==_0x16cafb(0x308)||_0x13a39d[_0x16cafb(0x397)]!==_0x16cafb(0x308)||_0x13a39d[_0x16cafb(0x302)]&&_0x13a39d[_0x16cafb(0x302)]!==_0x16cafb(0x308)){if(config[_0x16cafb(0x2e7)]){if(_0x13a39d[_0x16cafb(0x2bf)]==_0x16cafb(0x308))_0x13a39d[_0x16cafb(0x2bf)]=config[_0x16cafb(0x2bf)];if(_0x13a39d[_0x16cafb(0x397)]=='************')_0x13a39d[_0x16cafb(0x397)]=config[_0x16cafb(0x397)];if(_0x13a39d[_0x16cafb(0x302)]=='************')_0x13a39d['apiPassword']=config[_0x16cafb(0x302)];}try{if(_0x13a39d[_0x16cafb(0x35e)])await testNewAPI(_0x13a39d);}catch(_0x1478eb){if(_0x1478eb[_0x16cafb(0x259)]()[_0x16cafb(0x36e)]('AuthenticationError')){logHistory(_0x16cafb(0x30b),_0x16cafb(0x24d)),logHistory('error',_0x16cafb(0x283)+_0x1478eb[_0x16cafb(0x259)]()),proxyEmit(_0x16cafb(0x3c7),![]);return;}else{if(_0x1478eb[_0x16cafb(0x259)]()['includes']('PermissionDenied')){logHistory(_0x16cafb(0x30b),_0x16cafb(0x25a)),logHistory(_0x16cafb(0x30b),_0x16cafb(0x283)+_0x1478eb[_0x16cafb(0x259)]()),proxyEmit(_0x16cafb(0x3c7),![]);return;}else{logHistory(_0x16cafb(0x30b),_0x16cafb(0x242)+_0x1478eb[_0x16cafb(0x259)]()),logger[_0x16cafb(0x3c8)]('Error\x20details:',_0x1478eb),proxyEmit(_0x16cafb(0x3c7),![]);return;}}}exchange?updateExchange(_0x13a39d['apiKey'],_0x13a39d[_0x16cafb(0x397)],_0x13a39d['apiPassword']):await initExchange(_0x13a39d[_0x16cafb(0x2e7)],_0x13a39d[_0x16cafb(0x2bf)],_0x13a39d[_0x16cafb(0x397)],_0x13a39d[_0x16cafb(0x302)],_0x13a39d[_0x16cafb(0x36f)]);await loadSymbols();const _0x1b4f85=await getCoins(0x0,![],_0x13a39d[_0x16cafb(0x233)]);_0x40a736=cloneDeep(_0x1b4f85[0x1]);}else{const _0x233985=await getCoins();_0x40a736=cloneDeep(_0x233985[0x1]);}if(_0x13a39d[_0x16cafb(0x233)]=='')proxyEmit(_0x16cafb(0x3c7),!![]),proxyEmit(_0x16cafb(0x2bb),_0x40a736);else{_0x40a736[_0x16cafb(0x3a9)](_0xe318be=>{const _0x433721=_0x16cafb;if(_0xe318be[_0x433721(0x3a6)]!=_0x13a39d[_0x433721(0x233)]&&allSymbols[_0x433721(0x36e)](_0xe318be[_0x433721(0x296)]))_0xff3a87[_0x433721(0x263)](_0xe318be[_0x433721(0x296)]);});if(_0xff3a87[_0x16cafb(0x253)]==0x0)logHistory(_0x16cafb(0x30b),_0x16cafb(0x2d0));else{try{_0x52903c=await getTickers(_0xff3a87);}catch(_0x576cbd){logHistory('error','Unknown\x20error\x20-\x20check\x20logs'),logger[_0x16cafb(0x3c8)](_0x16cafb(0x3b7),_0x576cbd),proxyEmit(_0x16cafb(0x3c7),![]);return;}_0x40a736[_0x16cafb(0x3a9)](_0x53117c=>{const _0x3f41f0=_0x16cafb;_0x53117c[_0x3f41f0(0x3a6)]!=_0x13a39d[_0x3f41f0(0x233)]?_0x52903c[_0x53117c[_0x3f41f0(0x296)]]?_0x52903c[_0x53117c['symbol']][_0x3f41f0(0x214)]?_0x27e14d=_0x53117c[_0x3f41f0(0x22e)]?0x1/_0x52903c[_0x53117c[_0x3f41f0(0x296)]][_0x3f41f0(0x214)]:_0x52903c[_0x53117c[_0x3f41f0(0x296)]][_0x3f41f0(0x214)]:_0x27e14d=0x0:_0x27e14d=0x0:_0x27e14d=0x1,_0x53117c[_0x3f41f0(0x370)]=formatResult(_0x27e14d,0x8);}),await getMarketCap(_0x40a736),proxyEmit(_0x16cafb(0x3c7),!![]),proxyEmit(_0x16cafb(0x2bb),_0x40a736);}}}function truncateTradeAmount(_0x54899c,_0x49457d){const _0x361b40=_0x1e4d39;let _0x5721b3=0x0;try{_0x5721b3=exchange[_0x361b40(0x295)](_0x54899c,_0x49457d);}catch(_0x1aa3a8){}return _0x5721b3;}function checkMinimums(_0x2c26ee){const _0x426101=_0x1e4d39;let _0x4048f7=!![];const _0x353303=!_0x2c26ee['reverse']?markets[_0x2c26ee[_0x426101(0x296)]][_0x426101(0x3a2)][_0x426101(0x29c)][_0x426101(0x330)]:markets[_0x2c26ee[_0x426101(0x296)]][_0x426101(0x3a2)]['cost'][_0x426101(0x330)],_0x149a25=!_0x2c26ee[_0x426101(0x22e)]?markets[_0x2c26ee[_0x426101(0x296)]][_0x426101(0x3a2)][_0x426101(0x27f)][_0x426101(0x330)]:markets[_0x2c26ee['symbol']]['limits'][_0x426101(0x29c)]['min'],_0x2c28e3=truncateTradeAmount(_0x2c26ee[_0x426101(0x296)],_0x2c26ee[_0x426101(0x366)]);_0x2c26ee[_0x426101(0x366)]=_0x2c28e3;if(Math[_0x426101(0x3b8)](_0x2c28e3)<_0x353303)_0x4048f7=![];if(Math[_0x426101(0x3b8)](_0x2c28e3)*_0x2c26ee['last']<_0x149a25)_0x4048f7=![];if(_0x2c26ee[_0x426101(0x2f5)]==_0x426101(0x376)){let _0x20f869=config['portfolio'][_0x426101(0x25d)](_0x257908=>_0x257908[_0x426101(0x3a6)]==_0x2c26ee[_0x426101(0x3a6)]);if(_0x20f869[_0x426101(0x200)]>0x0){if(Math[_0x426101(0x3b8)](_0x2c28e3)>_0x2c26ee['number']-_0x20f869[_0x426101(0x200)])_0x4048f7=![];}else{if(Math[_0x426101(0x3b8)](_0x2c28e3)>_0x2c26ee[_0x426101(0x3c4)])_0x4048f7=![];}}if(_0x2c26ee[_0x426101(0x2f5)]==_0x426101(0x237)){let _0x2783e3=config['portfolio'][_0x426101(0x25d)](_0x11afde=>_0x11afde[_0x426101(0x3a6)]==config['basecoin']),_0x18fa57=currentCoins[_0x426101(0x25d)](_0x26691f=>_0x26691f[_0x426101(0x3a6)]==config[_0x426101(0x233)]);if(_0x2783e3[_0x426101(0x200)]>0x0){if(Math[_0x426101(0x3b8)](_0x2c28e3)*_0x2c26ee[_0x426101(0x214)]>_0x18fa57[_0x426101(0x3c4)]-_0x2783e3[_0x426101(0x200)])_0x4048f7=![];}else{if(Math[_0x426101(0x3b8)](_0x2c28e3)*_0x2c26ee[_0x426101(0x214)]>_0x18fa57['number'])_0x4048f7=![];}}return _0x4048f7;}async function getBalances(_0x472fd2=!![]){const _0x3e97bc=_0x1e4d39;if(botPaused)return;let _0x579c49=0x0,_0x10e0a9;const _0x44b883=config[_0x3e97bc(0x309)];if(config[_0x3e97bc(0x2aa)]&&config['change24h']<0x0)await validate24hChanges();currentCoins[_0x3e97bc(0x3a9)](_0x2166bd=>{const _0xe57d6f=_0x3e97bc;if(_0x2166bd[_0xe57d6f(0x3a6)]!=config[_0xe57d6f(0x233)]){let _0x3656be=gTicker[noslash(_0x2166bd[_0xe57d6f(0x296)])];_0x10e0a9=_0x2166bd[_0xe57d6f(0x22e)]?0x1/_0x3656be:_0x3656be;}else _0x10e0a9=0x1;let _0x221e35=_0x2166bd[_0xe57d6f(0x3c4)]*_0x10e0a9;_0x579c49+=_0x221e35,_0x2166bd['last']=formatResult(Number(_0x10e0a9),0x8),_0x2166bd[_0xe57d6f(0x321)]=_0x221e35;}),currentCoins[_0x3e97bc(0x3a9)](_0x5c4f87=>{const _0x55e38c=_0x3e97bc;let _0x384b71=config[_0x55e38c(0x201)][_0x55e38c(0x25d)](_0x384aee=>_0x384aee[_0x55e38c(0x3a6)]==_0x5c4f87['coin']),_0x4243d6=Number(_0x384b71[_0x55e38c(0x236)]),_0x29945b=_0x5c4f87[_0x55e38c(0x321)]/_0x579c49*0x64,_0x48508b=_0x4243d6*_0x579c49/0x64/_0x5c4f87[_0x55e38c(0x214)]-_0x5c4f87[_0x55e38c(0x3c4)];_0x5c4f87[_0x55e38c(0x236)]=formatResult(_0x29945b,0x3),_0x5c4f87[_0x55e38c(0x240)]=formatResult(_0x4243d6,0x3),_0x5c4f87[_0x55e38c(0x366)]=formatResult(_0x48508b,0x8),_0x5c4f87[_0x55e38c(0x2f5)]='',_0x5c4f87['valid']=![];if(_0x5c4f87[_0x55e38c(0x3a6)]!=config[_0x55e38c(0x233)]){if(_0x5c4f87['distribution']>_0x4243d6)_0x5c4f87['side']=_0x55e38c(0x376),_0x5c4f87['valid']=checkMinimums(_0x5c4f87);else _0x5c4f87[_0x55e38c(0x236)]<_0x4243d6&&(_0x5c4f87[_0x55e38c(0x2f5)]=_0x55e38c(0x237),_0x5c4f87[_0x55e38c(0x21e)]=checkMinimums(_0x5c4f87));}_0x5c4f87[_0x55e38c(0x262)]=_0x5c4f87['distribution']/_0x5c4f87[_0x55e38c(0x240)]-0x1;if(_0x5c4f87[_0x55e38c(0x2e6)]=='filled'||_0x5c4f87[_0x55e38c(0x2e6)]=='canceled')_0x5c4f87['orderstatus']=_0x55e38c(0x2f8);}),currentCoins['sort']((_0x4d3926,_0x1b5d88)=>_0x4d3926[_0x3e97bc(0x262)]<_0x1b5d88[_0x3e97bc(0x262)]?0x1:_0x1b5d88[_0x3e97bc(0x262)]<_0x4d3926[_0x3e97bc(0x262)]?-0x1:0x0);const _0x4e550c=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x4e550c[_0x3e97bc(0x1f7)],'usd':_0x4e550c[_0x3e97bc(0x329)],'portfolio':JSON[_0x3e97bc(0x27e)](currentCoins),'threshold':_0x44b883},proxyEmit(_0x3e97bc(0x34f),{'serverversion':serverversion,'balances':lastBalances});if(_0x472fd2){if(config[_0x3e97bc(0x2aa)])headlessMode({'portfolio':currentCoins,'threshold':_0x44b883});else lockOrders==ORDERS['UNLOCKED']&&!coolingDown&&notifyBalance({'portfolio':currentCoins,'threshold':_0x44b883});}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x4fa41e=getNormalizedPerformance();getStartingBalances(_0x4fa41e),emitPerformance(_0x4fa41e);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}function getPnL(){const _0x2cfef5=_0x1e4d39;let _0x18d78f=dbCoinResults[_0x2cfef5(0x219)]('coins')[_0x2cfef5(0x321)](),_0x13902a=0x0;return Object['entries'](_0x18d78f)[_0x2cfef5(0x3a9)](([_0x270416,_0x2e707e])=>{const _0x5f0015=_0x2cfef5;_0x13902a+=_0x2e707e[_0x5f0015(0x245)];}),_0x13902a;}async function storePerformance(){const _0x358bc8=_0x1e4d39;if(!lastBalances)return;let _0x520a63=[],_0x12aa3e;const _0x4af525=getPnL();let _0x322829=JSON[_0x358bc8(0x31d)](lastBalances[_0x358bc8(0x201)]);_0x322829[_0x358bc8(0x2f3)]((_0x546401,_0x424894)=>_0x546401['coin']>_0x424894[_0x358bc8(0x3a6)]?0x1:_0x424894[_0x358bc8(0x3a6)]>_0x546401[_0x358bc8(0x3a6)]?-0x1:0x0),_0x322829[_0x358bc8(0x3a9)](_0x24aaad=>{const _0x7d7c1d=_0x358bc8;let _0x3a3900={'coin':_0x24aaad[_0x7d7c1d(0x3a6)],'number':_0x24aaad[_0x7d7c1d(0x3c4)],'price':_0x24aaad['last']};_0x520a63[_0x7d7c1d(0x263)](_0x3a3900);});const _0x4a953c=await getFiat(),_0x441f22=getTimeStamp()[_0x358bc8(0x31a)]('\x20')[0x0],_0x2c3c1b=dbPerformance[_0x358bc8(0x219)](_0x358bc8(0x2c2))['find']({'date':_0x441f22})[_0x358bc8(0x321)]();_0x12aa3e={'date':_0x441f22,'eur':_0x4a953c[_0x358bc8(0x1f7)],'usd':_0x4a953c['usd'],'coins':_0x520a63,'pnl':_0x4af525},_0x2c3c1b?_0x12aa3e[_0x358bc8(0x2b6)]!=config[_0x358bc8(0x30c)]&&dbPerformance[_0x358bc8(0x219)](_0x358bc8(0x2c2))[_0x358bc8(0x25d)]({'date':_0x441f22})['assign'](_0x12aa3e)['write']():dbPerformance[_0x358bc8(0x219)](_0x358bc8(0x2c2))[_0x358bc8(0x263)](_0x12aa3e)[_0x358bc8(0x2a1)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0xaa1fd8=_0x1e4d39;let _0xfd79ef=[];if(dbPerformance[_0xaa1fd8(0x22f)](_0xaa1fd8(0x2c2))[_0xaa1fd8(0x321)]()){let _0x3a4ad7=dbPerformance[_0xaa1fd8(0x219)](_0xaa1fd8(0x2c2))['cloneDeep']()[_0xaa1fd8(0x35f)](_0x317ae3=>{const _0x433238=_0xaa1fd8;if(_0x317ae3[_0x433238(0x277)][_0x433238(0x253)]==0x0)return![];else return!![];})[_0xaa1fd8(0x1ff)](_0xaa1fd8(0x2b6))[_0xaa1fd8(0x321)](),_0x31166a=[...config['liquidity']];_0x31166a['sort']((_0x48319d,_0x291c9b)=>_0x48319d[_0xaa1fd8(0x2b6)]>_0x291c9b['date']?-0x1:_0x291c9b[_0xaa1fd8(0x2b6)]>_0x48319d['date']?0x1:0x0);let _0x5cddda=0x1,_0x2722fc=[],_0xfd2c14=0x0;_0x3a4ad7[_0xaa1fd8(0x3cc)]()[_0xaa1fd8(0x22e)]()['forEach']((_0x2b39bb,_0x50810b)=>{const _0x1624a4=_0xaa1fd8;if(_0x31166a[_0xfd2c14]){if(_0x3a4ad7[_0x3a4ad7[_0x1624a4(0x253)]-_0x50810b]&&_0x31166a[_0xfd2c14][_0x1624a4(0x2b6)]==_0x3a4ad7[_0x3a4ad7[_0x1624a4(0x253)]-_0x50810b][_0x1624a4(0x2b6)]){if(_0x50810b<_0x3a4ad7[_0x1624a4(0x253)]){let _0x3b2b5e=0x0,_0x3a20d1=0x0;_0x3a4ad7[_0x3a4ad7[_0x1624a4(0x253)]-_0x50810b][_0x1624a4(0x277)][_0x1624a4(0x3a9)](_0x2f61ed=>{const _0x33e31a=_0x1624a4;_0x3a20d1+=_0x2f61ed[_0x33e31a(0x3c4)]*_0x2f61ed['price'];}),_0x31166a[_0xfd2c14][_0x1624a4(0x2ea)][_0x1624a4(0x3a9)](_0x5eb641=>{const _0x5906bb=_0x1624a4;_0x3b2b5e+=_0x5eb641[_0x5906bb(0x3c4)]*_0x5eb641['price'];}),_0x5cddda*=_0x3b2b5e/(_0x3a20d1-_0x3b2b5e)+0x1;}_0xfd2c14++;}}let _0x32f8cd=0x0;_0x2b39bb[_0x1624a4(0x277)][_0x1624a4(0x3a9)](_0xe8bec2=>{_0x32f8cd+=_0xe8bec2['number']*_0xe8bec2['price'];}),_0x2722fc[_0x3a4ad7[_0x1624a4(0x253)]-_0x50810b-0x1]=_0x32f8cd*(_0x5cddda-0x1);});let _0x1cfb5b=[];_0x31166a=[...config[_0xaa1fd8(0x2b1)]]||[];let _0x1d02b5=0x0;_0xfd2c14=0x0,_0x3a4ad7['forEach']((_0x5b362f,_0x4e1e11)=>{const _0xe18015=_0xaa1fd8;if(_0x31166a[_0xfd2c14]){const _0x5ac4f8=fns[_0xe18015(0x31d)](_0x31166a[_0xfd2c14]['date'],'yyyy/MM/dd',new Date()),_0x431bca=fns[_0xe18015(0x31d)](_0x5b362f['date'],'yyyy/MM/dd',new Date());if(fns[_0xe18015(0x2af)](_0x5ac4f8,_0x431bca)){let _0xb5b435=0x0;_0x31166a[_0xfd2c14][_0xe18015(0x2ea)][_0xe18015(0x3a9)](_0x347fb5=>{const _0x4f4dfc=_0xe18015;!_0x1cfb5b[_0x347fb5['coin']]?_0x1cfb5b[_0x347fb5[_0x4f4dfc(0x3a6)]]=_0x347fb5[_0x4f4dfc(0x3c4)]:(_0xb5b435=_0x1cfb5b[_0x347fb5[_0x4f4dfc(0x3a6)]],_0x1cfb5b[_0x347fb5[_0x4f4dfc(0x3a6)]]+=_0x347fb5[_0x4f4dfc(0x3c4)]);const _0x5f5849=_0x5b362f['coins'][_0x4f4dfc(0x25d)](_0x417fc5=>_0x417fc5['coin']==_0x347fb5[_0x4f4dfc(0x3a6)]);(!_0x5f5849||_0x5f5849[_0x4f4dfc(0x3c4)]==0x0)&&(_0x1d02b5+=(-_0x347fb5[_0x4f4dfc(0x3c4)]-_0xb5b435)*_0x347fb5[_0x4f4dfc(0x370)]);}),_0xfd2c14++;}}_0x5b362f[_0xe18015(0x277)][_0xe18015(0x3a9)]((_0x5f3fd9,_0x42feab)=>{const _0x28f10d=_0xe18015;_0x1cfb5b[_0x5f3fd9[_0x28f10d(0x3a6)]]&&(_0x5f3fd9[_0x28f10d(0x3cb)]=_0x1cfb5b[_0x5f3fd9[_0x28f10d(0x3a6)]]);}),_0xfd79ef[_0xe18015(0x263)]({'date':_0x5b362f[_0xe18015(0x2b6)],'eur':_0x5b362f[_0xe18015(0x1f7)],'usd':_0x5b362f[_0xe18015(0x329)],'offset':_0x2722fc[_0x4e1e11],'netoffset':_0x1d02b5,'coins':_0x5b362f[_0xe18015(0x277)],'pnl':_0x5b362f['pnl']});});}return _0xfd79ef;}function emitPerformance(_0x1fdfd0){const _0x2c858e=_0x1e4d39;_0x1fdfd0['length']!==0x0?(proxyEmit(_0x2c858e(0x37d),_0x1fdfd0),lastPerformanceEmitted=getDate()):proxyEmit(_0x2c858e(0x37d),[]);}function getPerf(_0x121533,_0x4cc8c6){const _0x247700=_0x1e4d39;let _0x307bd6=0x0,_0x4d7366=0x0,_0x495ee5=0x0;_0x121533[_0x247700(0x277)][_0x247700(0x3a9)](_0x2bdf50=>{_0x307bd6+=_0x2bdf50['number']*_0x2bdf50['price'];});_0x4cc8c6&&(_0x307bd6+=_0x121533[_0x247700(0x200)]);if(config[_0x247700(0x233)]===_0x247700(0x248)||config[_0x247700(0x233)]===_0x247700(0x300)||config['basecoin']==='PAXG')_0x4d7366=_0x307bd6*_0x121533['eur'],_0x495ee5=_0x307bd6*_0x121533[_0x247700(0x329)];else{if(usdBasecoins[_0x247700(0x36e)](config[_0x247700(0x233)]))_0x4d7366=_0x307bd6*_0x121533['eur']/_0x121533[_0x247700(0x329)],_0x495ee5=_0x307bd6;else config[_0x247700(0x233)]===_0x247700(0x356)&&(_0x4d7366=_0x307bd6,_0x495ee5=_0x307bd6*_0x121533['usd']/_0x121533[_0x247700(0x1f7)]);}return[_0x307bd6,_0x4d7366,_0x495ee5];}function CurrencyFactor(_0x207a73,_0x2e401c,_0xfdd31e){const _0x865aa6=_0x1e4d39;let _0x110370;if(_0x2e401c===_0x865aa6(0x248)||_0x2e401c===_0x865aa6(0x300)||_0x2e401c===_0x865aa6(0x2a7))_0x110370=_0xfdd31e==='EUR'?_0x207a73[_0x865aa6(0x1f7)]:_0x207a73['usd'];else{if(usdBasecoins['includes'](_0x2e401c))_0x110370=_0xfdd31e===_0x865aa6(0x356)?_0x207a73['eur']/_0x207a73[_0x865aa6(0x329)]:0x1;else _0x2e401c==='EUR'&&(_0x110370=_0xfdd31e===_0x865aa6(0x356)?0x1:_0x207a73[_0x865aa6(0x329)]/_0x207a73[_0x865aa6(0x1f7)]);}return _0x110370;}function getKPIs(_0x146181,_0x2079d6=_0x1e4d39(0x356)){const _0x2ae228=_0x1e4d39,_0x58b1b1=config['basecoin'],_0x427ab4=lastBalances,_0x1a97d8=currentCoins,_0x4c1ff7=getNormalizedPerformance(),_0x3929ba=CurrencyFactor(_0x427ab4,config[_0x2ae228(0x233)],_0x2079d6);let _0x3261e2=0x0;_0x1a97d8['forEach'](_0x57b075=>{const _0x5d7ce5=_0x2ae228;_0x3261e2+=_0x57b075['number']*_0x57b075[_0x5d7ce5(0x214)];});_0x146181['includes'](_0x2ae228(0x3a4))&&(_0x3261e2*=_0x3929ba);let _0x5c0615;if(_0x3261e2!==0x0){if(_0x146181===_0x2ae228(0x233)||_0x146181===_0x2ae228(0x3a4)){if(_0x146181==='basecoin')_0x5c0615=(_0x3261e2/startingBalances[_0x2ae228(0x233)]-0x1)*0x64;else{if(_0x2079d6===_0x2ae228(0x356))_0x5c0615=(_0x3261e2/startingBalances[_0x2ae228(0x1f7)]-0x1)*0x64;else _0x5c0615=(_0x3261e2/startingBalances[_0x2ae228(0x329)]-0x1)*0x64;}}if(_0x146181[_0x2ae228(0x36e)](_0x2ae228(0x24f))){let _0x1b16a6=0x0;if(startingBalances[_0x2ae228(0x277)])_0x1a97d8[_0x2ae228(0x3a9)](_0x3fd189=>{const _0x4dd6ce=_0x2ae228;let _0xf68196=startingBalances[_0x4dd6ce(0x277)][_0x4dd6ce(0x25d)](_0x2fb0a5=>_0x2fb0a5[_0x4dd6ce(0x3a6)]===_0x3fd189[_0x4dd6ce(0x3a6)]);if(_0xf68196&&_0xf68196['coin']&&_0x3fd189[_0x4dd6ce(0x3c4)]!==0x0)_0x1b16a6+=_0xf68196[_0x4dd6ce(0x3c4)]*_0x3fd189['last'];});let _0x33772d=0x0;if(_0x4c1ff7[_0x2ae228(0x253)]!==0x0){let _0x58c068=_0x4c1ff7[_0x4c1ff7[_0x2ae228(0x253)]-0x1];_0x33772d=_0x58c068['netoffset'];}_0x1b16a6-=_0x33772d;let _0x4879;_0x146181===_0x2ae228(0x26c)&&(_0x4879=startingBalances[_0x2ae228(0x233)]),_0x146181===_0x2ae228(0x3b1)&&(_0x4879=_0x2079d6===_0x2ae228(0x356)?startingBalances[_0x2ae228(0x1f7)]:startingBalances['usd'],_0x1b16a6*=_0x3929ba),_0x5c0615=(_0x3261e2-_0x1b16a6)/_0x4879*0x64,_0x3261e2=_0x3261e2-_0x1b16a6;}if(_0x146181[_0x2ae228(0x36e)](_0x2ae228(0x3b0))){if(_0x4c1ff7[_0x2ae228(0x253)]!==0x0&&_0x1a97d8['length']!==0x0){let _0x17e669,_0x3deb88=_0x4c1ff7[_0x4c1ff7[_0x2ae228(0x253)]-0x1][_0x2ae228(0x3b0)];_0x146181[_0x2ae228(0x36e)](_0x2ae228(0x3a4))?(_0x17e669=_0x2079d6===_0x2ae228(0x356)?startingBalances['eur']:startingBalances[_0x2ae228(0x329)],_0x3deb88*=CurrencyFactor(_0x427ab4,_0x58b1b1,_0x2079d6)):_0x17e669=startingBalances['basecoin'],_0x5c0615=_0x3deb88/_0x17e669*0x64,_0x3261e2=_0x3deb88;}}if(_0x5c0615){if(_0x5c0615<0x64)_0x5c0615=_0x5c0615[_0x2ae228(0x3bc)](0x2);else{if(_0x5c0615<0x3e8)_0x5c0615=_0x5c0615['toFixed'](0x1);else _0x5c0615=_0x5c0615['toFixed'](0x0);}}else _0x5c0615=Number('0')[_0x2ae228(0x3bc)](0x2);if(_0x3261e2){if(Math[_0x2ae228(0x3b8)](_0x3261e2)<0.000001)_0x3261e2=_0x3261e2['toFixed'](0x2);else{if(Math[_0x2ae228(0x3b8)](_0x3261e2)<0.1)_0x3261e2=_0x3261e2[_0x2ae228(0x3bc)](0x6);else{if(Math[_0x2ae228(0x3b8)](_0x3261e2)<0x1)_0x3261e2=_0x3261e2[_0x2ae228(0x3bc)](0x5);else{if(Math['abs'](_0x3261e2)<0xa)_0x3261e2=_0x3261e2[_0x2ae228(0x3bc)](0x4);else{if(Math[_0x2ae228(0x3b8)](_0x3261e2)<0x64)_0x3261e2=_0x3261e2[_0x2ae228(0x3bc)](0x3);else{if(Math[_0x2ae228(0x3b8)](_0x3261e2)<0x3e8)_0x3261e2=_0x3261e2[_0x2ae228(0x3bc)](0x2);else _0x3261e2=_0x3261e2[_0x2ae228(0x3bc)](0x2);}}}}}}else _0x3261e2=Number('0')[_0x2ae228(0x3bc)](0x2);}else _0x5c0615=Number('0')[_0x2ae228(0x3bc)](0x2);if(_0x5c0615>=0x0)_0x5c0615='+'+_0x5c0615;return{'value':_0x3261e2,'change':_0x5c0615};}async function getStartingBalances(_0x7eebde,_0xe7831d=!![]){const _0x2b12c2=_0x1e4d39;if(_0x7eebde[_0x2b12c2(0x253)]!==0x0){const [_0x7e5f4b,_0x5bc68c,_0x36b36e]=getPerf(_0x7eebde[0x0],!![]);let _0x2d4210=[];config[_0x2b12c2(0x201)][_0x2b12c2(0x3a9)](_0x238274=>{const _0x55918c=_0x2b12c2;let _0xb985b1=0x0,_0x8296a9;config[_0x55918c(0x2b1)][_0x55918c(0x3a9)](_0xb0622=>{const _0x27a9ac=_0x55918c;let _0x5ea41e=_0xb0622['changes'][_0x27a9ac(0x25d)](_0x499477=>_0x499477['coin']==_0x238274[_0x27a9ac(0x3a6)]);if(_0x5ea41e){_0xb985b1+=_0x5ea41e[_0x27a9ac(0x3c4)];if(!_0x8296a9)_0x8296a9=_0x5ea41e[_0x27a9ac(0x370)];}}),_0x2d4210['push']({'coin':_0x238274['coin'],'number':_0xb985b1,'initialprice':_0x8296a9});});const _0x4769e5={'basecoin':_0x7e5f4b,'eur':_0x5bc68c,'usd':_0x36b36e,'coins':_0x2d4210};if(_0xe7831d)proxyEmit('starting-balances',_0x4769e5);startingBalances=_0x4769e5;}}function headlessMode(_0x3aa40f){const _0x28bdcf=_0x1e4d39;let _0xb57175=_0x3aa40f[_0x28bdcf(0x201)],_0x113281=_0x3aa40f[_0x28bdcf(0x309)],_0x17054f=[];for(let _0x1eef05 of _0xb57175){if(_0x1eef05[_0x28bdcf(0x3a6)]!=config[_0x28bdcf(0x233)]){if(_0x1eef05[_0x28bdcf(0x262)]>=_0x113281/0x64){if(_0x1eef05[_0x28bdcf(0x21e)])_0x17054f[_0x28bdcf(0x263)](_0x1eef05);}else{if(_0x1eef05['delta']<=-_0x113281/0x64){if(_0x1eef05[_0x28bdcf(0x21e)])_0x17054f[_0x28bdcf(0x263)](_0x1eef05);}}}}_0x17054f[_0x28bdcf(0x253)]>0x0&&placeOrder(_0x17054f);}function notifyBalance(_0x426dc1){const _0x2980f1=_0x1e4d39;let _0x179370=_0x426dc1['portfolio'],_0x3a7c61=_0x426dc1[_0x2980f1(0x309)],_0x258f70=[];for(let _0x9c662c of _0x179370){if(_0x9c662c[_0x2980f1(0x3a6)]!=config['basecoin']){if(_0x9c662c['delta']>=_0x3a7c61/0x64){if(_0x9c662c[_0x2980f1(0x21e)])_0x258f70[_0x2980f1(0x263)](_0x9c662c);}else{if(_0x9c662c[_0x2980f1(0x262)]<=-_0x3a7c61/0x64){if(_0x9c662c[_0x2980f1(0x21e)])_0x258f70['push'](_0x9c662c);}}}}if(_0x258f70[_0x2980f1(0x253)]>0x0){let _0x4ce171=_0x258f70[_0x2980f1(0x33e)](_0x48c9c6=>_0x48c9c6[_0x2980f1(0x3a6)]);_0x4ce171[_0x2980f1(0x2f3)]();let _0x829238=_0x4ce171[_0x2980f1(0x2c9)](',\x20');if(!lastCoinsToBalance)logHistory('warning',_0x2980f1(0x334));lastCoinsToBalance=_0x829238;}}function symbolToCoin(_0x1aa0ce){const _0x47b3ad=_0x1e4d39;let _0x3043d4;if(_0x1aa0ce[_0x47b3ad(0x36e)]('/'+config[_0x47b3ad(0x233)]))_0x3043d4=_0x1aa0ce[_0x47b3ad(0x2ed)]('/'+config[_0x47b3ad(0x233)],'');if(_0x1aa0ce[_0x47b3ad(0x36e)](config[_0x47b3ad(0x233)]+'/'))_0x3043d4=_0x1aa0ce[_0x47b3ad(0x2ed)](config['basecoin']+'/','');return _0x3043d4;}function setLockOrders(_0x1f201a){const _0x45b669=_0x1e4d39;lockOrders=_0x1f201a,logger[_0x45b669(0x3c8)](_0x45b669(0x339)+Object[_0x45b669(0x2f0)](ORDERS)[lockOrders]);}async function unlockOrders(_0x5653f6=![]){const _0x5159e1=_0x1e4d39;if(allOrdersPlaced&&lockOrders==ORDERS[_0x5159e1(0x310)]){setLockOrders(ORDERS[_0x5159e1(0x2de)]);if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);if(_0x5653f6){const _0x4c5daa=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x4c5daa,setBlockTransactionDetection(![]);}validateOrdersState=_0x5159e1(0x3cb),persistOpenOrders([]),setLockOrders(ORDERS[_0x5159e1(0x2b2)]);}}async function validateOrders(_0x5ac393){const _0x122d8a=_0x1e4d39;if(_0x5ac393)validateOrdersState=_0x5ac393;logger[_0x122d8a(0x3c8)](_0x122d8a(0x230)+validateOrdersState+_0x122d8a(0x2ec)+Object[_0x122d8a(0x2f0)](ORDERS)[lockOrders]);let _0x2e878b=[],_0x2edc29=config[_0x122d8a(0x3aa)]==_0x122d8a(0x3a5)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x122d8a(0x35b)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x122d8a(0x310)])return;logger[_0x122d8a(0x3c8)](_0x122d8a(0x1fe)+validateOrdersState);for(let _0x11e5a5=lastOrders[_0x122d8a(0x253)]-0x1;_0x11e5a5>=0x0;_0x11e5a5--){let _0x30cbf7=lastOrders[_0x11e5a5],_0x101f48=![];_0x30cbf7[_0x122d8a(0x39e)]>0x0&&(_0x101f48=!![]),_0x2e878b['push'](_0x101f48),_0x101f48&&config[_0x122d8a(0x3aa)]!=_0x122d8a(0x3a5)&&logHistory(_0x122d8a(0x3c5),_0x122d8a(0x2fe)+_0x30cbf7['symbol']+'\x20'+_0x30cbf7[_0x122d8a(0x2f5)]+'\x20#'+formatResult(_0x30cbf7['filled'],0x8)+'\x20@'+formatResult(_0x30cbf7[_0x122d8a(0x370)],0x8)),_0x101f48&&lastOrders[_0x122d8a(0x389)](_0x11e5a5,0x1);}persistOpenOrders(lastOrders);const _0x785eea=coolingDown?'balancing\x20resumes\x20when\x20cooldown\x20ends':_0x122d8a(0x275);if(validateOrdersState=='initial'){validateOrdersState=_0x122d8a(0x2eb);if(_0x2e878b[_0x122d8a(0x36e)](![])){}else await unlockOrders();}else{if(validateOrdersState==_0x122d8a(0x2eb)){if(_0x2e878b[_0x122d8a(0x36e)](![])){}else await unlockOrders();}else{if(validateOrdersState==_0x122d8a(0x304)){let _0x405278=!![];if(_0x2e878b[_0x122d8a(0x36e)](![])){if(config[_0x122d8a(0x3aa)]==_0x122d8a(0x3a5))logHistory('success',_0x122d8a(0x21f)+Math[_0x122d8a(0x26a)](_0x2edc29*validateOrderInterval/0xea60)+_0x122d8a(0x252)+_0x785eea),await unlockOrders(!![]);else{_0x405278=await cancelOrders();if(_0x405278)logHistory(_0x122d8a(0x20e),'Unfilled\x20order(s)\x20canceled\x20after\x20'+Math['round'](_0x2edc29*validateOrderInterval/0xea60)+_0x122d8a(0x252)+_0x785eea),await unlockOrders(!![]);else{validateOrdersState=_0x122d8a(0x2eb),logHistory(_0x122d8a(0x30b),_0x122d8a(0x352)+Math[_0x122d8a(0x26a)](_0x2edc29*validateOrderInterval/0xea60)+_0x122d8a(0x252)+_0x785eea),logHistory('error',_0x122d8a(0x258));const _0xc1044=config[_0x122d8a(0x3aa)]==_0x122d8a(0x3a5)?validateOrderTimeout*0x3c*0x3e8:config[_0x122d8a(0x35b)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0xc1044);}}}else await unlockOrders(!![]);}else{if(validateOrdersState==_0x122d8a(0x3b6)){if(config[_0x122d8a(0x3aa)]!=_0x122d8a(0x3a5))logHistory('success','No\x20more\x20open\x20orders\x20-\x20'+_0x785eea);await unlockOrders(!![]);}}}}}async function cancelOrders(){const _0x48b3e6=_0x1e4d39;let _0x260a44=!![],_0x1800e9;for(const _0x1dc047 of lastOrders){let _0x24ce1c=![],_0x7195c8=0x0;while(!_0x24ce1c&&_0x7195c8<maxRetries){try{const _0x489f93=await exchange[_0x48b3e6(0x260)](_0x1dc047[_0x48b3e6(0x33b)],_0x1dc047[_0x48b3e6(0x296)]);_0x24ce1c=!![];}catch(_0x4858c2){_0x4858c2[_0x48b3e6(0x259)]()[_0x48b3e6(0x36e)](_0x48b3e6(0x31e))||_0x4858c2[_0x48b3e6(0x259)]()['includes'](_0x48b3e6(0x36b))?_0x24ce1c=!![]:(_0x1800e9=_0x4858c2,_0x24ce1c=![]);}!_0x24ce1c&&(_0x7195c8++,await sleep(retryInterval));}_0x260a44=_0x260a44&&_0x24ce1c;}return!_0x260a44&&await handleError(_0x1800e9,_0x48b3e6(0x3bf)),_0x260a44;}async function initCoinResults(_0x3e48ff){const _0x3e5b17=_0x1e4d39;_0x3e48ff?logger['debug']('Resetting\x20coin\x20results:\x20'+_0x3e48ff):logger['debug'](_0x3e5b17(0x23a)),config[_0x3e5b17(0x201)]['forEach'](_0x46e349=>{const _0x392bc0=_0x3e5b17;if(!_0x46e349['excluded']&&_0x46e349[_0x392bc0(0x3a6)]!=config[_0x392bc0(0x233)]){const _0x516abe=currentCoins['find'](_0x3616ca=>_0x3616ca[_0x392bc0(0x3a6)]==_0x46e349['coin']),_0x575147=gTicker[noslash(_0x46e349[_0x392bc0(0x296)])];let _0x460095=_0x516abe?_0x516abe[_0x392bc0(0x3c4)]:null,_0x54dd18=_0x46e349['reverse']?0x1/_0x575147:_0x575147,_0x463514;config[_0x392bc0(0x2b1)][_0x392bc0(0x3a9)](_0x4366ad=>{const _0x31c4b1=_0x392bc0;!_0x463514&&(_0x463514=_0x4366ad[_0x31c4b1(0x2ea)][_0x31c4b1(0x25d)](_0x167209=>_0x167209[_0x31c4b1(0x3a6)]==_0x46e349[_0x31c4b1(0x3a6)]),_0x463514&&(_0x460095=_0x463514[_0x31c4b1(0x3c4)],_0x54dd18=_0x463514['price']));});let _0x157687=dbCoinResults[_0x392bc0(0x219)]('coins')[_0x392bc0(0x25d)]({'coin':_0x46e349[_0x392bc0(0x3a6)]})[_0x392bc0(0x321)]();if(!_0x157687){const _0x1f370a={'coin':_0x46e349[_0x392bc0(0x3a6)],'number':_0x460095,'breakeven':_0x54dd18,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x392bc0(0x219)](_0x392bc0(0x277))[_0x392bc0(0x263)](_0x1f370a)[_0x392bc0(0x2a1)]();}else{if(_0x3e48ff&&_0x46e349[_0x392bc0(0x3a6)]==_0x3e48ff){const _0x112c87={'coin':_0x46e349[_0x392bc0(0x3a6)],'number':_0x460095,'breakeven':_0x54dd18,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x392bc0(0x219)](_0x392bc0(0x277))[_0x392bc0(0x25d)]({'coin':_0x46e349[_0x392bc0(0x3a6)]})[_0x392bc0(0x345)](_0x112c87)[_0x392bc0(0x2a1)]();}}}});}async function placeOrder(_0x2f997f){const _0xb67b9e=_0x1e4d39,_0x505c35=config[_0xb67b9e(0x3aa)]==_0xb67b9e(0x3a5)?_0xb67b9e(0x3a5):_0xb67b9e(0x2b3);if(lockOrders==ORDERS[_0xb67b9e(0x2b2)]&&!coolingDown){setLockOrders(ORDERS[_0xb67b9e(0x310)]);while(transactionDetectionOngoing){await sleep(0x64);}logger['debug'](_0xb67b9e(0x346)+_0x2f997f[_0xb67b9e(0x33e)](_0x5203e0=>_0x5203e0['coin'])[_0xb67b9e(0x2c9)](',\x20')),lastCoinsToBalance='',allOrdersPlaced=![],validateOrdersState=_0xb67b9e(0x3cb);let _0x1f4148=![];lastOrders=[];const _0x58ff7e=config[_0xb67b9e(0x309)];for(const _0x10e86f of _0x2f997f){let _0x51019e,_0x5e59a7,_0x1a7cb9,_0x1443cd,_0x409184,_0x561ab9=_0x10e86f[_0xb67b9e(0x296)];logger[_0xb67b9e(0x3c8)](_0xb67b9e(0x231)+_0x10e86f[_0xb67b9e(0x3a6)]+'\x20'+_0x10e86f[_0xb67b9e(0x3c4)]+'\x20'+_0x10e86f[_0xb67b9e(0x214)]+'\x20'+_0x10e86f[_0xb67b9e(0x236)]+'%\x20'+_0x10e86f[_0xb67b9e(0x240)]+'%\x20'+(0x64*_0x10e86f[_0xb67b9e(0x262)])[_0xb67b9e(0x3bc)](0x2)+_0xb67b9e(0x371)+_0x58ff7e[_0xb67b9e(0x3bc)](0x2)+'%)');const _0x86bbf8=currentCoins[_0xb67b9e(0x25d)](_0x3a07e2=>_0x3a07e2['coin']==_0x10e86f['coin']);_0x86bbf8&&(_0x86bbf8[_0xb67b9e(0x350)]=_0x10e86f[_0xb67b9e(0x3c4)]);try{const _0x1467ff=await exchange[_0xb67b9e(0x372)](_0x561ab9);_0x51019e=_0x10e86f[_0xb67b9e(0x22e)]?0x1/_0x10e86f[_0xb67b9e(0x214)]:_0x10e86f[_0xb67b9e(0x214)],_0x5e59a7=_0x1467ff['bid'],_0x1a7cb9=_0x1467ff[_0xb67b9e(0x312)];_0x10e86f[_0xb67b9e(0x22e)]?(_0x1443cd=_0x10e86f[_0xb67b9e(0x2f5)]==_0xb67b9e(0x237)?_0xb67b9e(0x376):_0xb67b9e(0x237),_0x409184=Math['abs'](_0x10e86f[_0xb67b9e(0x366)])/_0x51019e):(_0x1443cd=_0x10e86f[_0xb67b9e(0x2f5)],_0x409184=Math[_0xb67b9e(0x3b8)](_0x10e86f['trade']));_0x505c35==_0xb67b9e(0x2b3)&&(config[_0xb67b9e(0x3aa)]==_0xb67b9e(0x2a2)&&(_0x51019e=_0x1443cd==_0xb67b9e(0x237)?_0x5e59a7:_0x1a7cb9),config[_0xb67b9e(0x3aa)]=='limit-low'&&(_0x51019e=_0x1443cd==_0xb67b9e(0x237)?_0x1a7cb9:_0x5e59a7));_0x409184=formatResult(_0x409184,0x8),_0x51019e=formatResult(_0x51019e,0x8);const _0xa88b83=_0x1443cd==_0xb67b9e(0x376)?config['emojisell']?String[_0xb67b9e(0x227)]('0x'+config[_0xb67b9e(0x338)])+'\x20':'':config[_0xb67b9e(0x2e8)]?String[_0xb67b9e(0x227)]('0x'+config['emojibuy'])+'\x20':'',_0x39ad5f=_0x505c35==_0xb67b9e(0x3a5)?_0xb67b9e(0x2fc):config[_0xb67b9e(0x3aa)]==_0xb67b9e(0x2a2)?_0xb67b9e(0x2fb):'Limit\x20(low-margin)',_0x170fe3=(Math[_0xb67b9e(0x380)](Math[_0xb67b9e(0x2da)]()*0x35a4e900)+0x5f5e100)[_0xb67b9e(0x259)]();lastOrders[_0xb67b9e(0x263)]({'customId':_0x170fe3,'symbol':_0x561ab9,'coin':_0x10e86f[_0xb67b9e(0x3a6)],'amount':_0x409184,'price':_0x51019e,'side':_0x1443cd,'reverse':_0x10e86f[_0xb67b9e(0x22e)],'filled':0x0});let _0x242319;_0x505c35==_0xb67b9e(0x3a5)?_0x1443cd=='buy'&&[_0xb67b9e(0x22a),'Bitget',_0xb67b9e(0x355),_0xb67b9e(0x209),'Huobipro'][_0xb67b9e(0x36e)](config[_0xb67b9e(0x2e7)])?_0x242319=await exchange[_0xb67b9e(0x23f)](_0x561ab9,_0x505c35,_0x1443cd,_0x409184,_0x51019e):_0x242319=await exchange['createOrder'](_0x561ab9,_0x505c35,_0x1443cd,_0x409184,undefined):_0x242319=await exchange['createOrder'](_0x561ab9,_0x505c35,_0x1443cd,_0x409184,_0x51019e);const _0x274f57=lastOrders['length']-0x1;if(_0x274f57>=0x0&&lastOrders[_0x274f57][_0xb67b9e(0x1f2)]==_0x170fe3){lastOrders[_0x274f57][_0xb67b9e(0x33b)]=_0x242319['id'];if(_0x242319[_0xb67b9e(0x29c)])lastOrders[_0x274f57]['amount']=_0x242319[_0xb67b9e(0x29c)];if(_0x242319['price'])lastOrders[_0x274f57][_0xb67b9e(0x370)]=_0x242319[_0xb67b9e(0x370)];lastOrders[_0x274f57][_0xb67b9e(0x363)]=_0x242319[_0xb67b9e(0x363)];}if(_0x242319[_0xb67b9e(0x29c)])_0x409184=_0x242319[_0xb67b9e(0x29c)];if(_0x242319['price'])_0x51019e=_0x242319['price'];if(_0x505c35==_0xb67b9e(0x3a5))logHistory(_0xb67b9e(0x3c5),''+_0xa88b83+_0x39ad5f+_0xb67b9e(0x38b)+_0x561ab9+'\x20'+_0x1443cd+'\x20#'+formatResult(_0x409184,0x8)+'\x20@'+formatResult(_0x51019e,0x8));else logHistory(_0xb67b9e(0x3c5),''+_0xa88b83+_0x39ad5f+'\x20order:\x20'+_0x561ab9+'\x20'+_0x1443cd+'\x20#'+formatResult(_0x409184,0x8)+'\x20@'+formatResult(_0x51019e,0x8));logger[_0xb67b9e(0x3c8)](_0xb67b9e(0x387)+_0x242319['id']+_0xb67b9e(0x3d1)+_0x170fe3);if(config['cooldown']!=0x0){let _0x5360c1=null;if(cooldownTracker['length']==config['cooldown']-0x1)_0x5360c1=cooldownTracker[_0xb67b9e(0x20a)]();const _0x22f5d2=getTimeStamp();cooldownTracker['push'](_0x22f5d2);if(_0x5360c1){const _0x5731c7=fns[_0xb67b9e(0x31f)](new Date(_0x22f5d2),new Date(_0x5360c1));if(_0x5731c7<cooldownInterval){logHistory(_0xb67b9e(0x30b),_0xb67b9e(0x3c1)+config[_0xb67b9e(0x1f8)]+'\x20orders\x20in\x20less\x20than\x20'+cooldownInterval/0x3c+_0xb67b9e(0x327)+cooldownPeriod/(0xe10*0x3e8)+_0xb67b9e(0x3be)),coolingDown=!![];break;}}}}catch(_0x222588){if(_0x222588[_0xb67b9e(0x259)]()['includes'](_0xb67b9e(0x2fa)))lastOrders=lastOrders[_0xb67b9e(0x35f)](_0x21c4a6=>_0x21c4a6[_0xb67b9e(0x296)]!=_0x561ab9),logHistory(_0xb67b9e(0x30b),_0xb67b9e(0x1fa)+_0x561ab9),_0x1f4148=!![];else{if(_0x222588[_0xb67b9e(0x259)]()['includes'](_0xb67b9e(0x303)))lastOrders=lastOrders[_0xb67b9e(0x35f)](_0x1bd543=>_0x1bd543[_0xb67b9e(0x296)]!=_0x561ab9),logHistory(_0xb67b9e(0x30b),_0xb67b9e(0x2ae)+_0x561ab9),_0x1f4148=!![];else{if(_0x222588[_0xb67b9e(0x259)]()[_0xb67b9e(0x36e)](_0xb67b9e(0x36b)))lastOrders=lastOrders[_0xb67b9e(0x35f)](_0x3d93f2=>_0x3d93f2[_0xb67b9e(0x296)]!=_0x561ab9),logHistory(_0xb67b9e(0x30b),_0xb67b9e(0x2e1)+_0x561ab9),logger[_0xb67b9e(0x3c8)](_0x222588),_0x1f4148=!![];else _0x222588['toString']()[_0xb67b9e(0x36e)]('must\x20be\x20greater\x20than\x20minimum\x20amount')?(lastOrders=lastOrders[_0xb67b9e(0x35f)](_0x2421a8=>_0x2421a8['symbol']!=_0x561ab9),logHistory(_0xb67b9e(0x30b),_0xb67b9e(0x1fa)+_0x561ab9),_0x1f4148=!![]):(lastOrders=lastOrders[_0xb67b9e(0x35f)](_0x7f3e2d=>_0x7f3e2d[_0xb67b9e(0x296)]!=_0x561ab9),await handleError(_0x222588,'placeOrder()',_0x561ab9));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0xb67b9e(0x253)]>0x0){const _0x552e1d=config[_0xb67b9e(0x3aa)]==_0xb67b9e(0x3a5)?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x39503a=_0xb67b9e;validateOrders(_0x39503a(0x304));},_0x552e1d);}else unlockOrders();_0x1f4148&&config[_0xb67b9e(0x2aa)]&&(logHistory(_0xb67b9e(0x30b),_0xb67b9e(0x2ca)+pauseBotMsg),await pauseBot(pauseBotInterval)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0xb67b9e(0x20e),_0xb67b9e(0x222)));}else{if(coolingDown)!config['headless']&&logHistory(_0xb67b9e(0x30b),_0xb67b9e(0x2b5));else lockOrders!=ORDERS[_0xb67b9e(0x2b2)]&&(!config['headless']&&(config[_0xb67b9e(0x3aa)]==_0xb67b9e(0x3a5)?logHistory(_0xb67b9e(0x30b),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated'):logHistory(_0xb67b9e(0x30b),_0xb67b9e(0x24b))));}}function persistOpenOrders(_0x41eaa3){const _0x2b5983=_0x1e4d39,_0x1f2da4={...config,'openOrders':_0x41eaa3};let _0x501041=dbConfig[_0x2b5983(0x219)]('bot')[_0x2b5983(0x25d)]({'botID':botID})['value']();_0x501041&&dbConfig[_0x2b5983(0x219)](_0x2b5983(0x2d1))[_0x2b5983(0x25d)]({'botID':botID})[_0x2b5983(0x345)](_0x1f2da4)['write']();}function restoreOrders(){const _0x38f576=_0x1e4d39;let _0x4a03fd;config[_0x38f576(0x32e)]&&allOpenOrders[_0x38f576(0x3a9)](_0x7c5e4e=>{const _0x314605=_0x38f576,_0x106848=config[_0x314605(0x32e)][_0x314605(0x25d)](_0x40034d=>_0x40034d[_0x314605(0x33b)]==_0x7c5e4e['id']);_0x106848&&(lastOrders[_0x314605(0x263)](_0x106848),_0x4a03fd=_0x7c5e4e[_0x314605(0x30a)]);});if(lastOrders['length']>0x0){setLockOrders(ORDERS[_0x38f576(0x310)]),validateOrdersState='ongoing',allOrdersPlaced=!![];const _0x592943=new Date()[_0x38f576(0x2c6)](),_0x5766fb=config[_0x38f576(0x3aa)]=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0x38f576(0x35b)]*0x3c*0x3e8;if(_0x4a03fd+_0x5766fb>_0x592943){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x15998c=_0x38f576;validateOrders(_0x15998c(0x304));},_0x4a03fd+_0x5766fb-_0x592943);}else validateOrders('final');}}async function sendMetricsTelegram(){const _0x4a55e1=_0x1e4d39;if(!coinsLoaded){process[_0x4a55e1(0x28e)]({'telegrammsg':'Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute'},_0x3746d2=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x5c7268='';if(config[_0x4a55e1(0x3c0)])_0x5c7268='<b>'+config[_0x4a55e1(0x3a3)]+_0x4a55e1(0x206);else _0x5c7268=_0x4a55e1(0x369)+botID+_0x4a55e1(0x206);const _0xbac7ec=config['basecoin'],_0x3793e0=config[_0x4a55e1(0x3a4)],_0x209d99=getKPIs(_0x4a55e1(0x233)),_0x2fa3db=getKPIs(_0x4a55e1(0x3a4),_0x3793e0),_0x4d3003=getKPIs(_0x4a55e1(0x26c)),_0x379704=getKPIs(_0x4a55e1(0x3b1),_0x3793e0),_0x1829ce=getKPIs(_0x4a55e1(0x2ff)),_0x26c738=getKPIs('pnl-fiat',_0x3793e0);_0xbac7ec[_0x4a55e1(0x36e)](_0x3793e0)?(_0x5c7268+='<pre>',_0x5c7268+=_0x4a55e1(0x249)+_0xbac7ec+':\x20'+_0x209d99[_0x4a55e1(0x321)]+'\x20('+_0x209d99[_0x4a55e1(0x3ce)]+_0x4a55e1(0x3c6),_0x5c7268+=_0x4a55e1(0x3ba)+_0xbac7ec+':\x20'+_0x4d3003[_0x4a55e1(0x321)]+'\x20('+_0x4d3003[_0x4a55e1(0x3ce)]+_0x4a55e1(0x3c6),_0x5c7268+=_0x4a55e1(0x368)+_0xbac7ec+':\x20'+_0x1829ce[_0x4a55e1(0x321)]+'\x20('+_0x1829ce[_0x4a55e1(0x3ce)]+_0x4a55e1(0x3c6),_0x5c7268+='</pre>'):(_0x5c7268+=_0x4a55e1(0x2d9),_0x5c7268+=_0x4a55e1(0x249)+_0xbac7ec+':\x20'+_0x209d99[_0x4a55e1(0x321)]+'\x20('+_0x209d99[_0x4a55e1(0x3ce)]+_0x4a55e1(0x3c6),_0x5c7268+=_0x4a55e1(0x249)+_0x3793e0+':\x20'+_0x2fa3db['value']+'\x20('+_0x2fa3db['change']+_0x4a55e1(0x3c6),_0x5c7268+=_0x4a55e1(0x3ba)+_0xbac7ec+':\x20'+_0x4d3003[_0x4a55e1(0x321)]+'\x20('+_0x4d3003[_0x4a55e1(0x3ce)]+_0x4a55e1(0x3c6),_0x5c7268+=_0x4a55e1(0x3ba)+_0x3793e0+':\x20'+_0x379704['value']+'\x20('+_0x379704['change']+_0x4a55e1(0x3c6),_0x5c7268+='PnL\x20'+_0xbac7ec+':\x20'+_0x1829ce[_0x4a55e1(0x321)]+'\x20('+_0x1829ce[_0x4a55e1(0x3ce)]+_0x4a55e1(0x3c6),_0x5c7268+='PnL\x20'+_0x3793e0+':\x20'+_0x26c738[_0x4a55e1(0x321)]+'\x20('+_0x26c738[_0x4a55e1(0x3ce)]+'%)\x0a',_0x5c7268+=_0x4a55e1(0x38a)),process[_0x4a55e1(0x28e)]({'telegrammsg':_0x5c7268},_0x16fa92=>{});}async function sendPortfolioTelegram(){const _0x1f40e6=_0x1e4d39;if(!coinsLoaded||!currentCoins[0x0][_0x1f40e6(0x236)]){process['send']({'telegrammsg':_0x1f40e6(0x247)},_0x2bf293=>{});return;}let _0x1b4ab3='';if(config['showname'])_0x1b4ab3=_0x1f40e6(0x228)+config['botname']+'\x20portfolio:</b>\x20\x0a\x0a';else _0x1b4ab3='<b>Bot\x20'+botID+_0x1f40e6(0x211);_0x1b4ab3+=_0x1f40e6(0x2d9),_0x1b4ab3+='-------------------------------\x0a',_0x1b4ab3+=_0x1f40e6(0x3a7),_0x1b4ab3+=_0x1f40e6(0x239),currentCoins[_0x1f40e6(0x3a9)](_0x581f97=>{const _0x2f3c72=_0x1f40e6;_0x1b4ab3+=_0x581f97[_0x2f3c72(0x3a6)]['padEnd'](0x7)+'|\x20'+formatPad(_0x581f97['distribution'],0x2,0x6)+'|\x20'+formatPad(_0x581f97[_0x2f3c72(0x240)],0x2,0x6)+'|\x20'+formatPad(_0x581f97['delta']*0x64,0x2,0x6)+'\x0a';}),_0x1b4ab3+=_0x1f40e6(0x38a),process[_0x1f40e6(0x28e)]({'telegrammsg':_0x1b4ab3},_0x3c6371=>{});}function formatPad(_0x51cf42,_0x58789a,_0x160263){const _0x3908a5=_0x1e4d39,_0x12ab5a=formatResultString(_0x51cf42,_0x58789a);return _0x12ab5a?_0x12ab5a[_0x3908a5(0x33c)](_0x160263):''['padStart'](_0x160263);}function logHistory(_0x44b8df,_0x166ad5,_0x5e6701=''){const _0x3e1b0e=_0x1e4d39;logger['full'](''+_0x166ad5);let _0x2a1b2b={'time':getTimeStamp(),'type':_0x44b8df,'event':_0x166ad5};dbLogs[_0x3e1b0e(0x219)]('logs')[_0x3e1b0e(0x263)](_0x2a1b2b)[_0x3e1b0e(0x2a1)]();if(_0x5e6701=='')_0x5e6701=_0x166ad5;proxyEmit(_0x3e1b0e(0x36d),{'log':_0x2a1b2b,'summary':_0x5e6701}),process['send']({'telegram':{..._0x2a1b2b,'botname':config[_0x3e1b0e(0x3a3)],'showname':config['showname']}},_0x3c17d7=>{});}function emitHistory(_0x54ca48={}){const _0x38f12b=_0x1e4d39;Object[_0x38f12b(0x2f0)](_0x54ca48)['length']==0x0&&(_0x54ca48={'type':[_0x38f12b(0x3c5),_0x38f12b(0x36d)],'event':'','page':0x1});if(_0x54ca48[_0x38f12b(0x2f2)]['includes']('event'))_0x54ca48['type'][_0x38f12b(0x389)](_0x54ca48[_0x38f12b(0x2f2)][_0x38f12b(0x2a5)](_0x38f12b(0x36d)),0x1,'error',_0x38f12b(0x3b5),_0x38f12b(0x20e));if(dbLogs['has'](_0x38f12b(0x2a8))['value']()){let _0x550f59=dbLogs[_0x38f12b(0x219)](_0x38f12b(0x2a8))[_0x38f12b(0x35f)](_0x6dedb4=>{const _0x37bb26=_0x38f12b;if(_0x54ca48[_0x37bb26(0x2f2)][_0x37bb26(0x253)]==0x0)return![];else return _0x54ca48[_0x37bb26(0x2f2)]['includes'](_0x6dedb4[_0x37bb26(0x2f2)]);})[_0x38f12b(0x35f)](_0x5cd86f=>{const _0x4e7f79=_0x38f12b;if(_0x54ca48['event']=='')return!![];else return _0x5cd86f[_0x4e7f79(0x36d)][_0x4e7f79(0x305)]()[_0x4e7f79(0x36e)](_0x54ca48[_0x4e7f79(0x36d)][_0x4e7f79(0x305)]());})[_0x38f12b(0x1ff)](_0x38f12b(0x2f6)),_0x32a104=_0x550f59['value']()[_0x38f12b(0x253)];_0x550f59=_0x550f59['reverse']()['slice']((_0x54ca48['page']-0x1)*logPageSize,_0x54ca48[_0x38f12b(0x250)]*logPageSize-0x1)[_0x38f12b(0x22e)]()[_0x38f12b(0x321)](),proxyEmit('event-history',{'logs':_0x550f59,'total':_0x32a104});}else proxyEmit(_0x38f12b(0x33a),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x1b39b7){const _0x22f15a=_0x1e4d39;if(dbLogs[_0x22f15a(0x22f)]('logs')[_0x22f15a(0x321)]()){const _0x2eacb4=dbLogs[_0x22f15a(0x219)](_0x22f15a(0x2a8))[_0x22f15a(0x1ff)]('time')[_0x22f15a(0x35f)](_0xeebc89=>{const _0x479f10=_0x22f15a;return _0xeebc89[_0x479f10(0x2f2)]==_0x479f10(0x3c5);})['value']();dbLogs[_0x22f15a(0x219)](_0x22f15a(0x2a8))[_0x22f15a(0x2d6)]()[_0x22f15a(0x2a1)](),dbLogs[_0x22f15a(0x219)](_0x22f15a(0x2a8))[_0x22f15a(0x345)](_0x2eacb4)[_0x22f15a(0x2a1)](),emitHistory(_0x1b39b7);}}async function pauseBot(_0x1fd2f4=pauseBotIntervalShort,_0x38149b,_0x1acbb7,_0xdf1fe1=![]){const _0x407740=_0x1e4d39,_0xa4f21e=new Date()['getTime']();if(!lastErrorShown||_0xa4f21e-lastErrorShown>=_0x1fd2f4){lastErrorShown=_0xa4f21e;if(!lastBotPause)lastBotPause=_0xa4f21e,consecutivePauses=0x1;else{if(_0xa4f21e-lastBotPause-_0x1fd2f4<0x5a*0x3e8){consecutivePauses++;if(consecutivePauses>maxPauseRetries){if(_0xdf1fe1){logHistory(_0x407740(0x30b),_0x38149b+_0x407740(0x34e)),await killBot();return;}else logHistory(_0x407740(0x30b),_0x38149b+pauseBotMsg),_0x1fd2f4=pauseBotInterval;}}else consecutivePauses=0x1;lastBotPause=_0xa4f21e;}_0x1acbb7?logger['debug']('('+consecutivePauses+')\x20'+_0x38149b+'\x20>\x20details:',_0x1acbb7):logger[_0x407740(0x3c8)]('('+consecutivePauses+')\x20'+_0x38149b);if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);await sleep(_0x1fd2f4),botPaused=![],_0x1fd2f4==pauseBotIntervalShort?resumeBot(!![]):resumeBot(![]);}}}async function killBot(){const _0x52f144=_0x1e4d39;botPaused=!![],await sleep(0x3e8),process[_0x52f144(0x28e)]({'stop':_0x52f144(0x318)},_0x4e2d28=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x59782d,_0x6f246c,_0x38c5d5=![]){const _0x4a3b1e=_0x1e4d39;if(botPaused)return;let _0x4976ce;const _0x4547be=config['exchange']||_0x4a3b1e(0x306);if(_0x6f246c)logger['debug']('Exception\x20thrown\x20in\x20'+_0x6f246c);const _0x3f4d00=()=>{const _0x2bdd93=_0x4a3b1e;loading[_0x2bdd93(0x30b)]=_0x2bdd93(0x3b3),emitLoadingProgress();};if(_0x59782d[_0x4a3b1e(0x259)]()[_0x4a3b1e(0x36e)](_0x4a3b1e(0x28d)))logHistory(_0x4a3b1e(0x30b),_0x4547be+_0x4a3b1e(0x3ab)),_0x3f4d00();else{if(_0x59782d[_0x4a3b1e(0x259)]()[_0x4a3b1e(0x36e)](_0x4a3b1e(0x3a1)))logHistory(_0x4a3b1e(0x30b),_0x4547be+_0x4a3b1e(0x2be)),_0x3f4d00();else{if(_0x59782d['toString']()[_0x4a3b1e(0x36e)](_0x4a3b1e(0x31b)))config[_0x4a3b1e(0x302)]?_0x4976ce=_0x4547be+_0x4a3b1e(0x246):_0x4976ce=_0x4547be+_0x4a3b1e(0x288),logHistory(_0x4a3b1e(0x30b),_0x4976ce+_0x4a3b1e(0x367)),_0x3f4d00();else{if(_0x59782d[_0x4a3b1e(0x259)]()[_0x4a3b1e(0x36e)]('PermissionDenied'))logHistory(_0x4a3b1e(0x30b),_0x4547be+_0x4a3b1e(0x2d4)),_0x3f4d00();else{if(!_0x38c5d5)await handleError(_0x59782d,null);}}}}}async function handleError(_0x13ac9f,_0xfc3919,_0x1e7038=''){const _0x3ae722=_0x1e4d39;if(botPaused)return;let _0x3de11a;const _0x499927=config[_0x3ae722(0x2e7)]||_0x3ae722(0x306);if(_0xfc3919)logger['debug']('Exception\x20thrown\x20in\x20'+_0xfc3919);if(_0x13ac9f[_0x3ae722(0x259)]()[_0x3ae722(0x36e)](_0x3ae722(0x357)))_0x3de11a=_0x499927+_0x3ae722(0x22d),await pauseBot(undefined,_0x3de11a,_0x13ac9f);else{if(_0x13ac9f['toString']()[_0x3ae722(0x36e)](_0x3ae722(0x388)))_0x3de11a=_0x499927+_0x3ae722(0x32b),await pauseBot(undefined,_0x3de11a,_0x13ac9f);else{if(_0x13ac9f[_0x3ae722(0x259)]()[_0x3ae722(0x36e)](_0x3ae722(0x2c4))||_0x13ac9f[_0x3ae722(0x259)]()[_0x3ae722(0x36e)](_0x3ae722(0x373)))_0x3de11a=_0x499927+_0x3ae722(0x238),await pauseBot(undefined,_0x3de11a,_0x13ac9f[_0x3ae722(0x259)]());else{if(_0x13ac9f[_0x3ae722(0x259)]()[_0x3ae722(0x36e)]('RequestTimeout'))_0x3de11a=_0x499927+_0x3ae722(0x2bc),await pauseBot(undefined,_0x3de11a,_0x13ac9f[_0x3ae722(0x259)]());else{if(_0x13ac9f[_0x3ae722(0x259)]()[_0x3ae722(0x36e)](_0x3ae722(0x364)))_0x3de11a=_0x499927+_0x3ae722(0x25c),await pauseBot(undefined,_0x3de11a,_0x13ac9f[_0x3ae722(0x259)]());else{if(_0x13ac9f[_0x3ae722(0x259)]()['toLowerCase']()[_0x3ae722(0x36e)](_0x3ae722(0x30a))||_0x13ac9f[_0x3ae722(0x259)]()[_0x3ae722(0x305)]()[_0x3ae722(0x36e)](_0x3ae722(0x360)))_0x3de11a=_0x3ae722(0x210),await pauseBot(undefined,_0x3de11a,_0x13ac9f[_0x3ae722(0x259)]());else{if(_0x13ac9f['toString']()[_0x3ae722(0x36e)]('InvalidNonce'))_0x3de11a=_0x499927+'\x20rejected\x20your\x20API\x20request\x20(see:\x20hodlerhacks.com/fix/4)',await pauseBot(undefined,_0x3de11a,_0x13ac9f[_0x3ae722(0x259)]());else{if(_0x13ac9f instanceof ccxt[_0x3ae722(0x375)])_0x3de11a=_0x499927+_0x3ae722(0x203)+_0x13ac9f[_0x3ae722(0x259)](),logger['debug'](_0x3ae722(0x320),_0x13ac9f),await pauseBot(undefined,_0x3de11a,_0x13ac9f);else{if(_0x13ac9f[_0x3ae722(0x259)]()[_0x3ae722(0x36e)]('API-key\x20format\x20invalid'))logHistory(_0x3ae722(0x30b),_0x499927+_0x3ae722(0x382)),logHistory(_0x3ae722(0x30b),_0x3ae722(0x311)),await killBot();else{if(_0x13ac9f[_0x3ae722(0x259)]()[_0x3ae722(0x36e)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory(_0x3ae722(0x30b),_0x499927+_0x3ae722(0x244)),logHistory(_0x3ae722(0x30b),_0x3ae722(0x311)),await killBot();else{if(_0x13ac9f[_0x3ae722(0x259)]()[_0x3ae722(0x36e)]('AuthenticationError')&&_0x13ac9f[_0x3ae722(0x259)]()[_0x3ae722(0x36e)](_0x3ae722(0x2c1)))_0x3de11a=_0x499927+_0x3ae722(0x2a4),await pauseBot(undefined,_0x3de11a,_0x13ac9f,!![]);else{if(_0x13ac9f[_0x3ae722(0x259)]()['includes'](_0x3ae722(0x31b)))config['apiPassword']?_0x3de11a=_0x499927+_0x3ae722(0x246):_0x3de11a=_0x499927+_0x3ae722(0x288),logHistory('error',_0x3de11a),logHistory('error',_0x3ae722(0x311)),await killBot();else{if(_0x13ac9f[_0x3ae722(0x259)]()[_0x3ae722(0x36e)](_0x3ae722(0x299)))logHistory(_0x3ae722(0x30b),_0x499927+_0x3ae722(0x398)),logHistory(_0x3ae722(0x30b),_0x3ae722(0x311)),await killBot();else{if(_0x13ac9f[_0x3ae722(0x259)]()[_0x3ae722(0x36e)](_0x3ae722(0x20d)))logHistory(_0x3ae722(0x30b),_0x3ae722(0x29a)+_0x1e7038),logger['debug']('Error\x20details:',_0x13ac9f);else{if(_0x13ac9f instanceof ccxt['ExchangeError']){_0x3de11a=_0x499927+'\x20exchange\x20error:\x20'+_0x13ac9f[_0x3ae722(0x259)]();if(_0x1e7038)_0x3de11a+=_0x3ae722(0x35c)+_0x1e7038;await pauseBot(undefined,_0x3de11a,_0x13ac9f);}else{_0x3de11a=_0x3ae722(0x39a)+_0x13ac9f[_0x3ae722(0x259)]();if(_0x1e7038)_0x3de11a+='\x0aSymbol(s):\x20'+_0x1e7038;await pauseBot(undefined,_0x3de11a);}}}}}}}}}}}}}}}}function decryptRSA(_0x42de10,_0x1c68c3){const _0x5a60a5=_0x1e4d39,_0x2c7407=forge[_0x5a60a5(0x280)][_0x5a60a5(0x2ee)](_0x42de10),_0x1eef5f=_0x2c7407[_0x5a60a5(0x337)](forge['util'][_0x5a60a5(0x3af)](_0x1c68c3),_0x5a60a5(0x20f),{'md':forge['md'][_0x5a60a5(0x26d)][_0x5a60a5(0x34a)](),'mgf1':{'md':forge['md'][_0x5a60a5(0x26d)]['create']()}});return _0x1eef5f;}async function withRetry(_0x192b91,_0x43f98b){const _0x51e309=_0x1e4d39;let _0x13f832=![],_0x4a11e9=0x0,_0x26e016,_0x1da18b;while(_0x4a11e9<maxRetries){try{_0x26e016=await _0x43f98b();break;}catch(_0x227df1){_0x1da18b=_0x227df1,!_0x13f832?(_0x13f832=!![],logger[_0x51e309(0x3c8)]('RETRY\x20-\x20Error\x20in\x20'+_0x192b91+':',_0x227df1[_0x51e309(0x259)]())):await sleep(retryInterval);}_0x4a11e9++;}if(_0x4a11e9==0x0)return _0x26e016;if(_0x4a11e9>=maxRetries)throw _0x1da18b;else return logger[_0x51e309(0x3c8)]('RETRY\x20-\x20Problem\x20resolved\x20after\x20'+_0x4a11e9+_0x51e309(0x265)),_0x26e016;}function formatResult(_0x53350f,_0x3622ae){const _0x5c8382=_0x1e4d39;return parseFloat(_0x53350f[_0x5c8382(0x3bc)](_0x3622ae));}function formatResultTruncate(_0x3779f9,_0x51c1cb){const _0x15ccee=_0x1e4d39;let _0xd048d3=formatResultString(_0x3779f9,0xa),_0xcd0dfd=_0xd048d3[_0x15ccee(0x2a5)]('.');return _0xcd0dfd!=-0x1&&(_0xd048d3=_0xd048d3[_0x15ccee(0x3cc)](0x0,_0xcd0dfd+_0x51c1cb+0x1)),Number(_0xd048d3);}function formatResultString(_0x30932c,_0x121b5c){const _0x2b67b4=_0x1e4d39;let _0x43b2cd;if(!(''+_0x30932c)['includes']('e'))_0x43b2cd=+(Math[_0x2b67b4(0x26a)](_0x30932c+'e+'+_0x121b5c)+'e-'+_0x121b5c);else{let _0x4b4532=(''+_0x30932c)[_0x2b67b4(0x31a)]('e'),_0x5c61b5='';+_0x4b4532[0x1]+_0x121b5c>0x0&&(_0x5c61b5='+'),_0x43b2cd=+(Math[_0x2b67b4(0x26a)](+_0x4b4532[0x0]+'e'+_0x5c61b5+(+_0x4b4532[0x1]+_0x121b5c))+'e-'+_0x121b5c);}return Number(_0x43b2cd)[_0x2b67b4(0x3bc)](_0x121b5c);}function getServerTime(){const _0x4fe192=_0x1e4d39,_0x2b12f0=new Date();return _0x2b12f0[_0x4fe192(0x2c8)]()+'/'+(_0x2b12f0['getMonth']()+0x1)[_0x4fe192(0x259)]()[_0x4fe192(0x33c)](0x2,'0')+'/'+_0x2b12f0[_0x4fe192(0x224)]()[_0x4fe192(0x259)]()['padStart'](0x2,'0')+'\x20'+_0x2b12f0[_0x4fe192(0x31c)]()[_0x4fe192(0x259)]()[_0x4fe192(0x33c)](0x2,'0')+':'+_0x2b12f0[_0x4fe192(0x3d0)]()[_0x4fe192(0x259)]()[_0x4fe192(0x33c)](0x2,'0')+':'+_0x2b12f0[_0x4fe192(0x24a)]()[_0x4fe192(0x259)]()[_0x4fe192(0x33c)](0x2,'0');}function getTimeStamp(){const _0x9766af=_0x1e4d39,_0x539f08=shiftedTime();return _0x539f08[_0x9766af(0x2c8)]()+'/'+(_0x539f08[_0x9766af(0x285)]()+0x1)['toString']()[_0x9766af(0x33c)](0x2,'0')+'/'+_0x539f08[_0x9766af(0x224)]()[_0x9766af(0x259)]()[_0x9766af(0x33c)](0x2,'0')+'\x20'+_0x539f08[_0x9766af(0x31c)]()[_0x9766af(0x259)]()['padStart'](0x2,'0')+':'+_0x539f08[_0x9766af(0x3d0)]()[_0x9766af(0x259)]()[_0x9766af(0x33c)](0x2,'0')+':'+_0x539f08[_0x9766af(0x24a)]()['toString']()[_0x9766af(0x33c)](0x2,'0');}function getDate(){const _0x404ec9=_0x1e4d39,_0x28fdc8=shiftedTime();return _0x28fdc8[_0x404ec9(0x2c8)]()+'/'+(_0x28fdc8['getMonth']()+0x1)[_0x404ec9(0x259)]()['padStart'](0x2,'0')+'/'+_0x28fdc8[_0x404ec9(0x224)]()[_0x404ec9(0x259)]()[_0x404ec9(0x33c)](0x2,'0');}function getHour(){const _0x3b92a0=_0x1e4d39,_0x55a58e=shiftedTime();return _0x55a58e[_0x3b92a0(0x31c)]()[_0x3b92a0(0x259)]()['padStart'](0x2,'0');}function sleep(_0xa50738){return new Promise(_0x518772=>setTimeout(_0x518772,_0xa50738));}function shiftedTime(){const _0x120939=_0x1e4d39,_0x542ed3=new Date();let _0x2de313=_0x542ed3;if(config&&config['timeshift']!==0x0)_0x2de313=fns[_0x120939(0x216)](_0x542ed3,{'hours':config[_0x120939(0x2ac)]});return _0x2de313;}function timer(_0x279d5c){const _0x6187a=_0x1e4d39,_0x411ccb=new Date();!lasttime?console[_0x6187a(0x221)](getTimeStamp()+':\x20timer\x20>',_0x279d5c,_0x411ccb):console[_0x6187a(0x221)](getTimeStamp()+_0x6187a(0x34b),_0x279d5c,(_0x411ccb-lasttime)/0x3e8),lasttime=_0x411ccb;}