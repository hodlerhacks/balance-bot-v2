const _0x18ae9a=_0x1cad;(function(_0x3b04e1,_0xdf0f0e){const _0x24dc82=_0x1cad,_0x4fe008=_0x3b04e1();while(!![]){try{const _0x1414e9=parseInt(_0x24dc82(0x2b2))/0x1*(parseInt(_0x24dc82(0x2b4))/0x2)+-parseInt(_0x24dc82(0x284))/0x3+parseInt(_0x24dc82(0x28b))/0x4+parseInt(_0x24dc82(0x352))/0x5+parseInt(_0x24dc82(0x30a))/0x6*(parseInt(_0x24dc82(0x231))/0x7)+parseInt(_0x24dc82(0x2ae))/0x8*(-parseInt(_0x24dc82(0x281))/0x9)+-parseInt(_0x24dc82(0x395))/0xa*(parseInt(_0x24dc82(0x328))/0xb);if(_0x1414e9===_0xdf0f0e)break;else _0x4fe008['push'](_0x4fe008['shift']());}catch(_0x1aceec){_0x4fe008['push'](_0x4fe008['shift']());}}}(_0xe091,0xeb6d4));const _0x263611=function(){let _0x3dbb98=!![];return function(_0x312cda,_0x2197ea){const _0x794f56=_0x3dbb98?function(){const _0x5681a6=_0x1cad;if(_0x2197ea){const _0x3c5b68=_0x2197ea[_0x5681a6(0x2a1)](_0x312cda,arguments);return _0x2197ea=null,_0x3c5b68;}}:function(){};return _0x3dbb98=![],_0x794f56;};}(),_0x46d2b2=_0x263611(this,function(){const _0x1078d1=_0x1cad;return _0x46d2b2[_0x1078d1(0x243)]()['search'](_0x1078d1(0x2bd))[_0x1078d1(0x243)]()[_0x1078d1(0x2bc)](_0x46d2b2)[_0x1078d1(0x347)]('(((.+)+)+)+$');});_0x46d2b2();'use strict';const ccxt=require(_0x18ae9a(0x20f)),low=require(_0x18ae9a(0x25e)),FileSync=require(_0x18ae9a(0x38e)),fs=require('fs'),fns=require(_0x18ae9a(0x331)),forge=require(_0x18ae9a(0x25a)),util=require(_0x18ae9a(0x1f2)),argv=require(_0x18ae9a(0x2cf))(process[_0x18ae9a(0x353)]['slice'](0x2))[_0x18ae9a(0x353)],path=require(_0x18ae9a(0x378)),axios=require(_0x18ae9a(0x2f5));let exchange,gTicker={},gChange={};const usdBasecoins=['USD','BUSD',_0x18ae9a(0x2bf),'USDT',_0x18ae9a(0x1db),'USDP'],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x18ae9a(0x23f)]({'LOCKED':0x0,'UNLOCKING':0x1,'UNLOCKED':0x2});let lockOrders=ORDERS[_0x18ae9a(0x247)],validateOrdersState,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotIntervalShort=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0x18ae9a(0x25d)+pauseBotInterval/0xea60+_0x18ae9a(0x208),maxPauseRetries=0x6,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,watchTransactionsInterval=0x3c*0x3e8,schedulerInterval=0x3c*0x3c*0x3e8,retryInterval=0x3e8,maxRetries=0x5,logPageSize=0x14,defaultFee=0.003;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidOrdersInitialTimeout,pidOrdersTimeout,botPaused=![],transactionDetectionOngoing=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x5dc,balanceUpdateRetries=0x5;let enableFiatToggle;const serverversion=require(_0x18ae9a(0x33d))[_0x18ae9a(0x25c)],environment=require(_0x18ae9a(0x33d))['environment']||'production',botID=process[_0x18ae9a(0x353)][0x2]||_0x18ae9a(0x26e),pattern=/^[0-9]{3}$/;!pattern['test'](botID)&&(console['log'](_0x18ae9a(0x26f)+botID+',\x20must\x20be\x20a\x203\x20digit\x20number'),killBot());const userID=process['argv'][0x3]||'',configpath=userID?_0x18ae9a(0x213)+userID+'/':_0x18ae9a(0x213),logspath=userID?'./logs/'+userID+'/':_0x18ae9a(0x337),loggerfile=fs[_0x18ae9a(0x29f)](logspath+_0x18ae9a(0x369),{'flags':'a'});!fs[_0x18ae9a(0x2b9)](configpath)&&fs['mkdirSync'](configpath);!fs['existsSync'](logspath)&&fs['mkdirSync'](logspath);const configfile=configpath+_0x18ae9a(0x307)+botID+_0x18ae9a(0x244),logfile=configpath+_0x18ae9a(0x307)+botID+_0x18ae9a(0x321),performancefile=configpath+_0x18ae9a(0x307)+botID+'-performance.json',coinresultsfile=configpath+'bot-'+botID+_0x18ae9a(0x2c0),settingsfile=configpath+_0x18ae9a(0x1e6),securefile=configpath+_0x18ae9a(0x358),configbackuppath=configpath+_0x18ae9a(0x27d),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs['defaults']({'logs':[],'version':serverversion})[_0x18ae9a(0x333)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x18ae9a(0x206)]({'data':[],'version':serverversion})[_0x18ae9a(0x333)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x18ae9a(0x206)]({'bot':[],'version':serverversion})[_0x18ae9a(0x333)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x18ae9a(0x206)]({'coins':[],'version':serverversion})['write']();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0,settings=getSettings(),secure=getSecure();function _0x1cad(_0x297465,_0x22f9e0){const _0x3f871d=_0xe091();return _0x1cad=function(_0x46d2b2,_0x263611){_0x46d2b2=_0x46d2b2-0x1d7;let _0xe0912=_0x3f871d[_0x46d2b2];return _0xe0912;},_0x1cad(_0x297465,_0x22f9e0);}oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x5df037=>{const _0x4fda8f=_0x18ae9a;console[_0x4fda8f(0x2cd)](_0x5df037);},'simple':_0x13b37a=>{const _0x5977a0=_0x18ae9a;console[_0x5977a0(0x2cd)](_0x13b37a),loggerfile[_0x5977a0(0x333)](util[_0x5977a0(0x2da)](_0x13b37a)+'\x0a');},'full':async(_0x4335ee,_0x4aefd8='')=>{const _0x2caba3=_0x18ae9a;let _0x11bdb5;if(config[_0x2caba3(0x2a5)])_0x11bdb5=getTimeStamp()+':\x20'+config[_0x2caba3(0x22a)]+_0x2caba3(0x394)+_0x4335ee;else _0x11bdb5=getTimeStamp()+_0x2caba3(0x2a0)+botID+'\x20>\x20'+_0x4335ee;console[_0x2caba3(0x2cd)](_0x11bdb5),loggerfile['write'](util[_0x2caba3(0x2da)](_0x11bdb5)+'\x0a'),_0x4aefd8&&(console[_0x2caba3(0x2cd)](_0x4aefd8),loggerfile[_0x2caba3(0x333)](util[_0x2caba3(0x2da)](_0x4aefd8)+'\x0a'));},'debug':async(_0x1d73bb,_0x4dda40='')=>{const _0x165336=_0x18ae9a;let _0x664888;if(config[_0x165336(0x2a5)])_0x664888=getTimeStamp()+':\x20'+config[_0x165336(0x22a)]+_0x165336(0x379)+_0x1d73bb;else _0x664888=getTimeStamp()+_0x165336(0x2a0)+botID+_0x165336(0x379)+_0x1d73bb;if(debugging)console[_0x165336(0x2cd)](_0x664888);loggerfile[_0x165336(0x333)](util[_0x165336(0x2da)](_0x664888)+'\x0a');if(_0x4dda40){if(debugging)console[_0x165336(0x2cd)](_0x4dda40);loggerfile[_0x165336(0x333)](util[_0x165336(0x2da)](_0x4dda40)+'\x0a');}}};process['on'](_0x18ae9a(0x377),function(_0x358f5b){const _0x1d8c13=_0x18ae9a;handleError(_0x358f5b,_0x1d8c13(0x377));});settings[_0x18ae9a(0x35e)]!=config[_0x18ae9a(0x35e)]&&updateTimeshift(settings['timeshift']);settings[_0x18ae9a(0x210)]!=config['onepagemode']&&updateOnepagemode(settings[_0x18ae9a(0x210)]);(settings[_0x18ae9a(0x2b8)]&&!config[_0x18ae9a(0x2b8)]||!settings[_0x18ae9a(0x2b8)]&&config[_0x18ae9a(0x2b8)])&&updateMarketcapApi(settings[_0x18ae9a(0x2b8)]);process[_0x18ae9a(0x2fe)]({'started':_0x18ae9a(0x301)},_0x416329=>{}),initializeProcessListeners();function proxyEmit(_0x46834b,_0x272cee=null){process['send']({'function':_0x46834b,'args':_0x272cee},_0x3d3cbc=>{});}function initializeProcessListeners(){const _0x42bfd3=_0x18ae9a;process['on'](_0x42bfd3(0x362),_0x20500a=>{const _0x1bd8e4=_0x42bfd3;switch(Object[_0x1bd8e4(0x39a)](_0x20500a)[0x0]){case _0x1bd8e4(0x35e):_0x20500a[_0x1bd8e4(0x35e)]!=undefined&&(settings['timeshift']=_0x20500a[_0x1bd8e4(0x35e)],updateTimeshift(settings[_0x1bd8e4(0x35e)]));break;case _0x1bd8e4(0x210):_0x20500a[_0x1bd8e4(0x210)]!=undefined&&(settings[_0x1bd8e4(0x210)]=_0x20500a[_0x1bd8e4(0x210)],updateOnepagemode(settings['onepagemode']));break;case'marketcapApi':_0x20500a[_0x1bd8e4(0x2b8)]!=undefined&&(settings[_0x1bd8e4(0x2b8)]=_0x20500a[_0x1bd8e4(0x2b8)],updateMarketcapApi(settings[_0x1bd8e4(0x2b8)]));break;case _0x1bd8e4(0x1e2):_0x20500a[_0x1bd8e4(0x1e2)]!=undefined&&(bots=JSON[_0x1bd8e4(0x264)](_0x20500a[_0x1bd8e4(0x1e2)]),proxyEmit(_0x1bd8e4(0x1e2),bots));break;case _0x1bd8e4(0x327):switch(_0x20500a[_0x1bd8e4(0x327)]){case _0x1bd8e4(0x224):initclient();break;case _0x1bd8e4(0x31b):toggleBotMode();break;case _0x1bd8e4(0x35d):emitHistory(_0x20500a['args']);break;case'deleteHistoryAlerts':deleteHistoryAlerts(_0x20500a['args']);break;case _0x1bd8e4(0x248):getPortfolio(_0x20500a['args']);break;case _0x1bd8e4(0x270):storeConfiguration(_0x20500a['args']);break;case _0x1bd8e4(0x325):storeHeadless(_0x20500a[_0x1bd8e4(0x30f)]);break;case _0x1bd8e4(0x33f):storeFiat(_0x20500a[_0x1bd8e4(0x30f)]);break;case _0x1bd8e4(0x219):resetHistory();break;case _0x1bd8e4(0x397):getStartingBalances(getNormalizedPerformance());break;case _0x1bd8e4(0x39e):placeOrder(_0x20500a[_0x1bd8e4(0x30f)]);break;case _0x1bd8e4(0x310):cancelLoading();break;case _0x1bd8e4(0x39d):showConfig();break;case _0x1bd8e4(0x1f1):sendMetricsTelegram();break;case'sendPortfolioTelegram':sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x3dd6b8=![]){const _0x12b3f0=_0x18ae9a;logger[_0x12b3f0(0x276)]('Reset\x20|\x20'+(_0x3dd6b8?'exchange\x20reload':'no\x20exchange\x20reloaded')+_0x12b3f0(0x39f)+config[_0x12b3f0(0x2af)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x3dd6b8)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x12b3f0(0x289)]!=''&&config['apiKey']!=_0x12b3f0(0x32b)){loadingProgress=0x0;_0x3dd6b8&&(await initExchange(),await loadSymbols(),loadingProgress=0x1,setStableCoins(),proxyEmit(_0x12b3f0(0x319),emittedConfiguration()),initialPerformanceStored=![]);const _0x1d5dd4=await getCoins();[currentCoins,currentCoinsAll]=_0x1d5dd4,setBlockTransactionDetection(![]),startScheduler(),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x12b3f0(0x276)](_0x12b3f0(0x350)),getBalances(![]),await updateOpenOrders();if(lastOrders['length']==0x0&&allOpenOrders['length']!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function resumeBot(_0x1f8e12=![]){const _0x3ce1a9=_0x18ae9a;logger['debug'](_0x3ce1a9(0x28c)+(_0x1f8e12?_0x3ce1a9(0x2b6):'complete')+_0x3ce1a9(0x2db)+config[_0x3ce1a9(0x2af)]);if(pidBalances)clearTimeout(pidBalances);if(_0x1f8e12){getBalances();return;}coinsLoaded=![];if(config[_0x3ce1a9(0x289)]!=''&&config[_0x3ce1a9(0x289)]!=_0x3ce1a9(0x32b)){loadingProgress=0x1;const _0x1e2c31=await getCoins();[currentCoins,currentCoinsAll]=_0x1e2c31,setBlockTransactionDetection(![]),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x3ce1a9(0x276)](_0x3ce1a9(0x350)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x3ce1a9(0x398)]==0x0&&allOpenOrders[_0x3ce1a9(0x398)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();}}async function getMarketCap(_0x3ebeba){const _0x20557c=_0x18ae9a;let _0x5c88cd=![];if(_0x3ebeba)_0x5c88cd=!![];let _0x552c90;_0x5c88cd?_0x552c90=_0x3ebeba[_0x20557c(0x26b)](_0x441042=>_0x441042[_0x20557c(0x285)]):_0x552c90=currentCoinsAll['map'](_0x2edb51=>_0x2edb51[_0x20557c(0x285)]);if(!config[_0x20557c(0x2b8)]||!_0x5c88cd&&!config[_0x20557c(0x2fb)]||_0x552c90[_0x20557c(0x398)]==0x0)return;let _0x27fa00=null;try{_0x27fa00=await axios[_0x20557c(0x235)](_0x20557c(0x2c7),{'headers':{'X-CMC_PRO_API_KEY':settings['marketcapApi']},'params':{'symbol':_0x552c90[_0x20557c(0x243)]()}});}catch(_0x13cb5b){_0x27fa00=null,_0x13cb5b[_0x20557c(0x243)]()[_0x20557c(0x359)](_0x20557c(0x363))?(config['marketcapApi']=![],updateConfig(),proxyEmit('configuration',emittedConfiguration()),logHistory('error',_0x20557c(0x23d))):(logHistory(_0x20557c(0x32e),_0x20557c(0x278)+schedulerInterval/(0x3c*0x3e8)+_0x20557c(0x208)),logger[_0x20557c(0x276)](_0x20557c(0x2c9),_0x13cb5b['toString']()+_0x20557c(0x2ee)+_0x13cb5b['code']));}if(_0x27fa00){let _0x4f1116=0x0;const _0x1d8068=_0x27fa00[_0x20557c(0x1dd)];_0x552c90[_0x20557c(0x375)](_0x3d00a4=>{const _0x504ea5=_0x20557c;if(_0x1d8068[_0x504ea5(0x1dd)][_0x3d00a4][0x0])_0x4f1116+=_0x1d8068[_0x504ea5(0x1dd)][_0x3d00a4][0x0][_0x504ea5(0x364)][_0x504ea5(0x222)][_0x504ea5(0x255)];}),_0x552c90[_0x20557c(0x375)](_0x912b2b=>{const _0x5a0c6c=_0x20557c,_0x3be315=_0x1d8068['data'][_0x912b2b][0x0]?_0x1d8068[_0x5a0c6c(0x1dd)][_0x912b2b][0x0][_0x5a0c6c(0x364)][_0x5a0c6c(0x222)][_0x5a0c6c(0x255)]:0x0;if(_0x5c88cd){const _0x382ca5=_0x3ebeba[_0x5a0c6c(0x27e)](_0x2d9cca=>_0x2d9cca[_0x5a0c6c(0x285)]==_0x912b2b);_0x382ca5&&(_0x382ca5[_0x5a0c6c(0x259)]=_0x3be315);}else{const _0x49f15e=currentCoins[_0x5a0c6c(0x27e)](_0x3a8be8=>_0x3a8be8[_0x5a0c6c(0x285)]==_0x912b2b);_0x49f15e&&(_0x49f15e[_0x5a0c6c(0x259)]=_0x3be315);const _0xd7132c=currentCoinsAll[_0x5a0c6c(0x27e)](_0x16bb4a=>_0x16bb4a['coin']==_0x912b2b);_0xd7132c&&(_0xd7132c['marketcap']=_0x3be315);}}),!_0x5c88cd&&updateTargetDistribution();}}function updateTargetDistribution(){const _0xf2f695=_0x18ae9a,_0x40d857=0x2;let _0x3f9272=0x0,_0x96b2=0x0,_0x43edcf=0x0,_0x1e465b=0x0,_0x3d0283=0x0;config[_0xf2f695(0x36b)]['forEach'](_0x2914c7=>{const _0x82a3b4=_0xf2f695;if(!_0x2914c7[_0x82a3b4(0x372)]){_0x43edcf++,_0x3f9272+=_0x2914c7[_0x82a3b4(0x22c)];if(_0x2914c7[_0x82a3b4(0x22c)]===-0x1){_0x3f9272++;const _0x2cae73=currentCoinsAll['find'](_0x4bf0e6=>_0x4bf0e6['coin']==_0x2914c7[_0x82a3b4(0x285)]);_0x2cae73&&(_0x1e465b+=_0x2cae73['marketcap'],_0x3d0283+=Math['sqrt'](_0x2cae73[_0x82a3b4(0x259)]));}if(_0x2914c7[_0x82a3b4(0x22c)]!==-0x1)_0x96b2++;}});let _0x57c0a6;const _0x4da519=0x64-_0x3f9272,_0x503eec=_0x43edcf-_0x96b2;_0x57c0a6=_0x503eec===0x0?_0x3f9272:Math[_0xf2f695(0x22d)](0x64,_0x3f9272),config[_0xf2f695(0x36b)][_0xf2f695(0x375)](_0x20e178=>{const _0xaa0a17=_0xf2f695,_0x29bec6=currentCoinsAll[_0xaa0a17(0x27e)](_0x152bf3=>_0x152bf3[_0xaa0a17(0x285)]==_0x20e178[_0xaa0a17(0x285)]);_0x29bec6&&(_0x20e178[_0xaa0a17(0x259)]=_0x29bec6[_0xaa0a17(0x259)]);if(!_0x20e178[_0xaa0a17(0x372)]){if(_0x57c0a6<=0x64){if(_0x20e178[_0xaa0a17(0x22c)]===-0x1){if(_0x1e465b!==0x0&&config[_0xaa0a17(0x2fb)]){if(_0x29bec6){if(config['marketcapEnabled']=='marketcap')_0x20e178[_0xaa0a17(0x37f)]=(_0x4da519/(_0x1e465b/_0x29bec6[_0xaa0a17(0x259)]))['toFixed'](_0x40d857);else config[_0xaa0a17(0x2fb)]=='marketcapsqrt'&&(_0x20e178[_0xaa0a17(0x37f)]=(_0x4da519/(_0x3d0283/Math[_0xaa0a17(0x29c)](_0x29bec6[_0xaa0a17(0x259)])))[_0xaa0a17(0x298)](_0x40d857));}}}}}}),updateConfig();}function updateConfig(){const _0x5a8bf3=_0x18ae9a;let _0x5326ad=dbConfig[_0x5a8bf3(0x235)](_0x5a8bf3(0x31e))[_0x5a8bf3(0x27e)]({'botID':botID})[_0x5a8bf3(0x332)]();_0x5326ad&&dbConfig[_0x5a8bf3(0x235)]('bot')[_0x5a8bf3(0x27e)]({'botID':botID})['assign'](config)['write']();}function logMemory(){const _0x564ea1=_0x18ae9a;if(environment!=_0x564ea1(0x1d9))return;const _0x26e6a7=process[_0x564ea1(0x345)]()[_0x564ea1(0x1f7)]/0x400/0x400;logger[_0x564ea1(0x276)](_0x564ea1(0x2d6)+process['pid']+_0x564ea1(0x2bb)+formatResult(_0x26e6a7,0x1)+_0x564ea1(0x29b));}async function startScheduler(){const _0x49168f=_0x18ae9a,_0x12958d=shiftedTime()[_0x49168f(0x32a)]();getMarketCap(),loadSymbols(),_0x12958d==0x1&&logMemory(),await sleep(schedulerInterval),startScheduler();}async function restartBot(_0x23320c=![]){const _0x10d394=_0x18ae9a;logger['debug'](_0x10d394(0x330));if(!_0x23320c)while(lockOrders!=ORDERS[_0x10d394(0x247)]||coolingDown){await sleep(0x3e8);}process[_0x10d394(0x2fe)]({'stop':_0x10d394(0x2a3)},_0xee6031=>{});}async function initExchange(_0x2f90e4=config[_0x18ae9a(0x2af)],_0x31935a=config[_0x18ae9a(0x289)],_0x49d483=config[_0x18ae9a(0x200)],_0x3d62f7=config[_0x18ae9a(0x220)]){const _0x17f1d8=_0x18ae9a;if(exchange){logger['debug']('Initializing\x20exchange:\x20already\x20done');return;}logger[_0x17f1d8(0x276)](_0x17f1d8(0x20c));!supportedExchanges()[_0x17f1d8(0x359)](_0x2f90e4)&&(logHistory(_0x17f1d8(0x32e),_0x17f1d8(0x34a)+_0x2f90e4+'\x20exchange'),killBot());const _0x832292=ccxt[_0x17f1d8(0x271)][_0x2f90e4['toLowerCase']()];exchange=new _0x832292({'apiKey':_0x31935a,'secret':_0x49d483,'options':{'defaultType':_0x17f1d8(0x28e)}});if(_0x3d62f7)exchange[_0x17f1d8(0x1e9)]=_0x3d62f7;}function updateExchange(_0x1e79a3,_0x4010cb,_0x22a9fc=null){const _0x2b5025=_0x18ae9a;exchange[_0x2b5025(0x289)]=_0x1e79a3,exchange[_0x2b5025(0x200)]=_0x4010cb,exchange[_0x2b5025(0x220)]=_0x22a9fc,logger[_0x2b5025(0x276)]('Updating\x20API\x20key\x20(not\x20saved\x20in\x20config\x20file\x20yet)');}function setStableCoins(){const _0x1e8fdd=_0x18ae9a;let _0x282ec3=config[_0x1e8fdd(0x374)]==_0x1e8fdd(0x33c)?_0x1e8fdd(0x33c):config[_0x1e8fdd(0x374)]==_0x1e8fdd(0x1fe)?_0x1e8fdd(0x1fe):_0x1e8fdd(0x205),_0xce9ff1=allSymbols[_0x1e8fdd(0x359)](_0x282ec3+_0x1e8fdd(0x262))?'USD':allSymbols[_0x1e8fdd(0x359)](_0x282ec3+_0x1e8fdd(0x367))?_0x1e8fdd(0x311):'EUR',_0x478f12=allSymbols['includes'](_0x282ec3+_0x1e8fdd(0x349))?_0x1e8fdd(0x2ce):_0xce9ff1;enableFiatToggle=!![],_0xce9ff1==_0x1e8fdd(0x2ce)&&(enableFiatToggle=![],storeFiat('EUR')),_0x478f12!=_0x1e8fdd(0x2ce)&&(enableFiatToggle=![],storeFiat(_0x1e8fdd(0x222))),stablecoins={'eur':{'coin':''+_0x282ec3+_0x478f12,'symbol':_0x282ec3+'/'+_0x478f12},'usd':{'coin':''+_0x282ec3+_0xce9ff1,'symbol':_0x282ec3+'/'+_0xce9ff1}};}async function initwsCcxt(){const _0x4141e1=_0x18ae9a;initCycle++;const _0x2cf4e8=initCycle;let _0x5df761=[];config[_0x4141e1(0x36b)]['forEach'](_0x463412=>{const _0x528c9a=_0x4141e1;if(!_0x463412[_0x528c9a(0x372)]&&_0x463412[_0x528c9a(0x285)]!=config['basecoin'])_0x5df761[_0x528c9a(0x2c2)](_0x463412[_0x528c9a(0x386)]);});if(!_0x5df761[_0x4141e1(0x359)](stablecoins[_0x4141e1(0x2ec)][_0x4141e1(0x386)]))_0x5df761[_0x4141e1(0x2c2)](stablecoins['eur'][_0x4141e1(0x386)]);if(!_0x5df761['includes'](stablecoins['usd'][_0x4141e1(0x386)]))_0x5df761['push'](stablecoins[_0x4141e1(0x214)][_0x4141e1(0x386)]);if(config[_0x4141e1(0x2af)][_0x4141e1(0x2cc)]('Binance')&&config[_0x4141e1(0x374)]!=_0x4141e1(0x1fe)){if(!_0x5df761['includes']('BNB/'+config[_0x4141e1(0x374)]))_0x5df761['push'](_0x4141e1(0x288)+config['basecoin']);}loadCoins(_0x5df761),_0x5df761=validateSymbols(_0x5df761);const _0x1ea4ac=async _0x34a69f=>{const _0x4b54bd=_0x4141e1;let _0x2123cd;try{const _0x1d965b=await getTickers(_0x34a69f);Object[_0x4b54bd(0x2e3)](_0x1d965b)[_0x4b54bd(0x375)](_0x384de3=>{const _0x75da23=_0x4b54bd;_0x2123cd=_0x384de3[0x1][_0x75da23(0x386)],gTicker[noslash(_0x2123cd)]=_0x384de3[0x1][_0x75da23(0x371)],gChange[_0x2123cd]=_0x384de3[0x1][_0x75da23(0x1e3)];});}catch(_0x49ba2a){await handleError(_0x49ba2a,_0x4b54bd(0x37b),_0x2123cd);}},_0x3f801a=async _0x48b075=>{const _0x35101f=_0x4141e1;while(initCycle==_0x2cf4e8){if(!botPaused)try{const _0x41d619=await exchange['watchTrades'](_0x48b075);gTicker[noslash(_0x41d619[0x0][_0x35101f(0x386)])]=_0x41d619[0x0][_0x35101f(0x388)];}catch(_0x522297){if(!exchangeStopped)await handleError(_0x522297,_0x35101f(0x273),_0x48b075);}else await sleep(0x64);}},_0x49ceaf=async _0x3193e6=>{const _0x2425ba=_0x4141e1;while(initCycle==_0x2cf4e8){if(!botPaused)try{const _0x2c4c1a=await exchange['watchTradesForSymbols'](_0x3193e6),_0x597e4e=_0x2c4c1a[_0x2425ba(0x2aa)]();gTicker[noslash(_0x597e4e[_0x2425ba(0x386)])]=_0x597e4e[_0x2425ba(0x388)];}catch(_0x3d149b){if(!exchangeStopped)await handleError(_0x3d149b,_0x2425ba(0x357),_0x3193e6['toString']());}else await sleep(0x64);}},_0x275548=async _0x21ba5d=>{const _0x5f47a9=_0x4141e1;while(initCycle==_0x2cf4e8){if(!botPaused){let _0x5ae3c2;try{await sleep(0x3c*0x3e8);const _0x276cb3=await getTickers(_0x21ba5d);Object[_0x5f47a9(0x2e3)](_0x276cb3)[_0x5f47a9(0x375)](_0x290e51=>{const _0x5e6ffd=_0x5f47a9;_0x5ae3c2=_0x290e51[0x1][_0x5e6ffd(0x386)],gChange[_0x5ae3c2]=_0x290e51[0x1][_0x5e6ffd(0x1e3)];});}catch(_0x3302c4){if(!exchangeStopped)await handleError(_0x3302c4,_0x5f47a9(0x234),_0x5ae3c2);}}else await sleep(0x64);}},_0x55b1cb=async _0x39a9d0=>{const _0x4281ec=_0x4141e1;while(initCycle==_0x2cf4e8){if(!botPaused)try{const _0x5e372b=await exchange[_0x4281ec(0x26a)](_0x39a9d0);initCycle==_0x2cf4e8&&_0x5e372b['forEach'](_0x536e7b=>{updateNumberCoinsCcxt(_0x536e7b);});}catch(_0x4f0418){if(!exchangeStopped)await handleError(_0x4f0418,'watchOrders()');}else await sleep(0x64);}};_0x1ea4ac(_0x5df761),_0x275548(_0x5df761),exchange[_0x4141e1(0x316)]['watchTradesForSymbols']&&!(config['exchange']=='Bybit'&&_0x5df761[_0x4141e1(0x398)]>0xa)?_0x49ceaf(_0x5df761):_0x5df761[_0x4141e1(0x375)](_0xfec564=>{_0x3f801a(_0xfec564);}),_0x5df761[_0x4141e1(0x375)](_0x1966c7=>{_0x55b1cb(_0x1966c7);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x199cc6){const _0x29cb35=_0x18ae9a;let _0x26d555={};try{if(config[_0x29cb35(0x2af)]!=_0x29cb35(0x336))_0x26d555=await exchange[_0x29cb35(0x1fb)](_0x199cc6);else for(const _0x23cfd0 of _0x199cc6){const _0x1ee92a=await exchange[_0x29cb35(0x21f)](_0x23cfd0);_0x26d555[_0x23cfd0]=_0x1ee92a;}return _0x26d555;}catch(_0x10dd89){throw _0x10dd89;}}function setBlockTransactionDetection(_0x226f1c){const _0x9e5cc2=_0x18ae9a;blockTransactionDetection=_0x226f1c,logger['debug'](_0x9e5cc2(0x1fc)+blockTransactionDetection);}async function detectLiquidityChange(_0x4bd634=0x0){const _0xb92e92=_0x18ae9a;transactionDetectionOngoing=!![];try{const _0x32eb19=await getCoins(_0x4bd634),[_0x22b0c4,_0x15edf0]=_0x32eb19;let _0x1465b2=[];currentCoins['forEach'](_0x2f70ef=>{const _0x347c44=_0x1cad,_0x31a21a=_0x22b0c4['find'](_0x5810ed=>_0x5810ed[_0x347c44(0x285)]==_0x2f70ef[_0x347c44(0x285)]);if(_0x31a21a){if(_0x2f70ef[_0x347c44(0x28a)]!=_0x31a21a[_0x347c44(0x28a)]){let _0x55e0a8;if(_0x2f70ef[_0x347c44(0x285)]!=config['basecoin']){const _0x5f0435=gTicker[noslash(_0x2f70ef[_0x347c44(0x386)])];_0x55e0a8=_0x2f70ef[_0x347c44(0x241)]?0x1/_0x5f0435:_0x5f0435;}else _0x55e0a8=0x1;_0x1465b2['push']({'coin':_0x2f70ef[_0x347c44(0x285)],'symbol':_0x2f70ef[_0x347c44(0x386)],'price':_0x55e0a8,'number':Number(formatResult(_0x31a21a[_0x347c44(0x28a)]-_0x2f70ef['number'],0x8)),'basecoinvalue':_0x55e0a8*(_0x31a21a[_0x347c44(0x28a)]-_0x2f70ef[_0x347c44(0x28a)])});}}});if(_0x1465b2[_0xb92e92(0x398)]>0x0&&!blockTransactionDetection){for(const _0x3b5264 of _0x1465b2){if(config[_0xb92e92(0x1e0)]){logger['debug'](_0xb92e92(0x335)+_0x3b5264[_0xb92e92(0x351)]+_0xb92e92(0x32f)+lastFees['highest']);if(lastFees[_0xb92e92(0x2b0)]==0x0||Math['abs'](_0x3b5264[_0xb92e92(0x351)])>lastFees['highest']*0x3){if(config['autoliquidity']==_0xb92e92(0x256)){delete _0x3b5264[_0xb92e92(0x386)],delete _0x3b5264[_0xb92e92(0x351)];let _0x6b64bc=[],_0x525769=[...config[_0xb92e92(0x312)]]||[],_0x1cac52=config[_0xb92e92(0x312)];_0x525769[_0xb92e92(0x254)]((_0x745c29,_0x125bd7)=>_0x745c29[_0xb92e92(0x38d)]>_0x125bd7[_0xb92e92(0x38d)]?-0x1:_0x125bd7[_0xb92e92(0x38d)]>_0x745c29['date']?0x1:0x0);const _0x45eaca=getDate();if(_0x525769[0x0]){const _0x258caa=fns[_0xb92e92(0x264)](_0x525769[0x0][_0xb92e92(0x38d)],_0xb92e92(0x391),new Date()),_0x3afe34=fns[_0xb92e92(0x264)](_0x45eaca,'yyyy/MM/dd',new Date());if(fns[_0xb92e92(0x2e1)](_0x258caa,_0x3afe34)){_0x6b64bc=_0x525769[0x0][_0xb92e92(0x2d5)];const _0x17711e=_0x6b64bc[_0xb92e92(0x27e)](_0x6ac574=>_0x6ac574['coin']==_0x3b5264[_0xb92e92(0x285)]);_0x17711e?(_0x17711e['number']+=_0x3b5264['number'],_0x17711e['number']==0x0&&(_0x6b64bc=_0x6b64bc[_0xb92e92(0x24a)](_0x5c02e3=>{const _0x12178d=_0xb92e92;return _0x5c02e3[_0x12178d(0x285)]!=_0x3b5264['coin'];}))):_0x6b64bc['push'](_0x3b5264);const _0x207f1f=_0x1cac52[_0xb92e92(0x27e)](_0x1422a7=>_0x1422a7[_0xb92e92(0x38d)]==_0x45eaca);_0x207f1f['changes']=_0x6b64bc;}else _0x1cac52['push']({'date':_0x45eaca,'changes':[_0x3b5264]});}const _0x5c5f1d=_0x1cac52[_0xb92e92(0x27e)](_0xf47fba=>_0xf47fba[_0xb92e92(0x38d)]==_0x45eaca);if(_0x5c5f1d){let _0xe0e2f4=!![];_0x5c5f1d[_0xb92e92(0x2d5)]['forEach'](_0x184144=>{const _0x29f2c4=_0xb92e92;if(_0x184144[_0x29f2c4(0x28a)]!=0x0)_0xe0e2f4=![];}),_0xe0e2f4&&(_0x1cac52=_0x1cac52[_0xb92e92(0x24a)](_0x427826=>{const _0x3c829e=_0xb92e92;return _0x427826[_0x3c829e(0x38d)]!=_0x45eaca;}));}let _0x1bceb7=dbConfig[_0xb92e92(0x235)](_0xb92e92(0x31e))['find']({'botID':botID})['value']();_0x1bceb7&&(dbConfig[_0xb92e92(0x235)](_0xb92e92(0x31e))['find']({'botID':botID})[_0xb92e92(0x1da)]({'liquidity':_0x1cac52})[_0xb92e92(0x333)](),config[_0xb92e92(0x312)]=_0x1cac52);logHistory('success',_0xb92e92(0x1ee)+Math[_0xb92e92(0x269)](_0x3b5264[_0xb92e92(0x28a)])+'\x20'+_0x3b5264[_0xb92e92(0x285)]+'\x20'+(_0x3b5264[_0xb92e92(0x28a)]>0x0?_0xb92e92(0x334):_0xb92e92(0x21c))+_0xb92e92(0x2ca)),proxyEmit(_0xb92e92(0x319),emittedConfiguration());const _0x276c87=getNormalizedPerformance();emitPerformance(_0x276c87),getStartingBalances(_0x276c87),logger['debug']('Portfolio\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated');}else config[_0xb92e92(0x1e0)]=='switch-manual'&&(config['headless']?(await storeHeadless({'headless':![]}),logHistory(_0xb92e92(0x368),_0xb92e92(0x1ee)+Math[_0xb92e92(0x269)](_0x3b5264[_0xb92e92(0x28a)])+'\x20'+_0x3b5264[_0xb92e92(0x285)]+'\x20'+(_0x3b5264[_0xb92e92(0x28a)]>0x0?_0xb92e92(0x334):_0xb92e92(0x21c))+_0xb92e92(0x34b))):logger[_0xb92e92(0x276)](_0xb92e92(0x1ee)+Math['abs'](_0x3b5264[_0xb92e92(0x28a)])+'\x20'+_0x3b5264[_0xb92e92(0x285)]+'\x20'+(_0x3b5264[_0xb92e92(0x28a)]>0x0?_0xb92e92(0x334):_0xb92e92(0x21c))+_0xb92e92(0x27c)));}else logger['debug']('Fee\x20discount\x20refund\x20detected:\x20'+Math[_0xb92e92(0x269)](_0x3b5264['number'])+'\x20'+_0x3b5264[_0xb92e92(0x285)]+'\x20'+(_0x3b5264[_0xb92e92(0x28a)]>0x0?_0xb92e92(0x334):_0xb92e92(0x21c)));}else logger[_0xb92e92(0x276)]('Portfolio\x20change\x20detected:\x20'+Math[_0xb92e92(0x269)](_0x3b5264[_0xb92e92(0x28a)])+'\x20'+_0x3b5264[_0xb92e92(0x285)]+'\x20'+(_0x3b5264['number']>0x0?_0xb92e92(0x334):_0xb92e92(0x21c))+_0xb92e92(0x33e));}currentCoins=_0x22b0c4,currentCoinsAll=_0x15edf0;}}catch(_0x24164d){if(!exchangeStopped)await handleError(_0x24164d,_0xb92e92(0x38a));}transactionDetectionOngoing=![];}async function watchTransactions(){await sleep(0x14*0x3e8);while(!![]){!botPaused&&!blockTransactionDetection&&coinsLoaded?(detectLiquidityChange(),await sleep(watchTransactionsInterval)):await sleep(0x3e8);}}async function loadSymbols(){const _0x56e72f=_0x18ae9a;try{markets=await exchange[_0x56e72f(0x23c)](!![]),allSymbols=[],Object[_0x56e72f(0x2e3)](markets)[_0x56e72f(0x375)](_0x5d8689=>{const _0x582e57=_0x56e72f;_0x5d8689[0x1]['active']&&_0x5d8689[0x1][_0x582e57(0x28e)]&&allSymbols[_0x582e57(0x2c2)](_0x5d8689[0x0]);});}catch(_0x3c88d5){markets?logger[_0x56e72f(0x276)](_0x56e72f(0x2c3)+_0x3c88d5[_0x56e72f(0x243)]()):(loading[_0x56e72f(0x2d3)]=!![],emitLoadingProgress(),_0x3c88d5['toString']()[_0x56e72f(0x2e5)]()['includes'](_0x56e72f(0x303))||_0x3c88d5[_0x56e72f(0x243)]()[_0x56e72f(0x2e5)]()['includes'](_0x56e72f(0x36e))?logHistory(_0x56e72f(0x32e),_0x56e72f(0x1e1)):handleErrorNoStop(_0x3c88d5,_0x56e72f(0x1fd),!![]),logHistory('error',_0x56e72f(0x35c)),logHistory(_0x56e72f(0x32e),'Pausing\x20for\x20'+loadCoinsRetryInterval/0xea60+'\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again'),logger[_0x56e72f(0x276)](_0x56e72f(0x2c9),_0x3c88d5),botPaused=!![],await sleep(loadCoinsRetryInterval),restartBot());}}function validateSymbols(_0x46995f){const _0x5f315e=_0x18ae9a;let _0x5c6da8=[];return _0x46995f[_0x5f315e(0x375)](_0x41af51=>{const _0x15f478=_0x5f315e;!allSymbols[_0x15f478(0x359)](_0x41af51)?logHistory(_0x15f478(0x32e),'Invalid\x20symbol:\x20'+_0x41af51+_0x15f478(0x28f)):_0x5c6da8[_0x15f478(0x2c2)](_0x41af51);}),_0x5c6da8;}async function initclient(){proxyEmit('configuration',emittedConfiguration()),proxyEmit('exchanges',supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x59ac25=getNormalizedPerformance();emitPerformance(_0x59ac25),getStartingBalances(_0x59ac25);}async function toggleBotMode(){const _0x49bfe7=_0x18ae9a;let _0xfa136e=dbConfig[_0x49bfe7(0x235)](_0x49bfe7(0x31e))[_0x49bfe7(0x27e)]({'botID':botID})[_0x49bfe7(0x332)]();if(_0xfa136e){const _0x6f43fe=!_0xfa136e[_0x49bfe7(0x34d)];dbConfig['get']('bot')['find']({'botID':botID})['assign']({'headless':_0x6f43fe})['write'](),config[_0x49bfe7(0x34d)]=_0x6f43fe,proxyEmit(_0x49bfe7(0x319),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x1a039b=_0x18ae9a;process[_0x1a039b(0x2fe)]({'updatebotmanager':!![]},_0x36b7cb=>{}),logger['debug'](_0x1a039b(0x295)+config['headless']);}async function loadCoins(_0x9b3fd4){const _0x3f2845=_0x18ae9a;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x475ed1,_0x1868ae=0x0,_0x5de10f=0x0;_0x9b3fd4[_0x3f2845(0x375)](_0x3d591e=>{const _0x14a3c4=_0x3f2845;loading[_0x14a3c4(0x225)][_0x14a3c4(0x2c2)](_0x3d591e);}),loadingCanceled=![];let _0x4fd0c4=![];while(_0x475ed1!=_0x9b3fd4[_0x3f2845(0x398)]+maxLoadingProgress){_0x475ed1=loadingProgress,_0x9b3fd4[_0x3f2845(0x375)](_0x2edb3e=>{const _0x1987a1=_0x3f2845;if(gTicker[noslash(_0x2edb3e)]){loading[_0x1987a1(0x225)]=loading[_0x1987a1(0x225)][_0x1987a1(0x24a)](_0x3b049e=>_0x3b049e!=_0x2edb3e);if(!watchedSymbols['includes'](_0x2edb3e))watchedSymbols[_0x1987a1(0x2c2)](_0x2edb3e);_0x475ed1++;}}),loading['progress']=Math['round'](_0x475ed1/(_0x9b3fd4[_0x3f2845(0x398)]+maxLoadingProgress)*0x64);loading[_0x3f2845(0x2a9)]!=0x64&&(_0x5de10f>0x1e*0x5&&(loading[_0x3f2845(0x1eb)]=!![],emitLoadingProgress()),_0x5de10f>0x78*0x5&&!_0x4fd0c4&&(_0x4fd0c4=!![],logHistory(_0x3f2845(0x32e),_0x3f2845(0x20e)+loading['remainingSymbols']['join'](',\x20')+_0x3f2845(0x233)),logHistory(_0x3f2845(0x32e),_0x3f2845(0x361)+loadCoinsRetryInterval/0xea60+'\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again'),loadingCanceled=!![],await sleep(loadCoinsRetryInterval),restartBot()));if(loadingCanceled){loading[_0x3f2845(0x2d3)]=!![],emitLoadingProgress();break;}else _0x1868ae!=loading[_0x3f2845(0x2a9)]&&(_0x1868ae=loading[_0x3f2845(0x2a9)],emitLoadingProgress()),_0x5de10f++,await sleep(0xc8);}_0x475ed1==_0x9b3fd4[_0x3f2845(0x398)]+maxLoadingProgress&&(coinsLoaded=!![],process['send']({'status':_0x3f2845(0x2e9),'live':_0x3f2845(0x301)},_0xccdc70=>{}),_0x4fd0c4&&logHistory(_0x3f2845(0x368),_0x3f2845(0x2f1)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x1a940d=_0x18ae9a;proxyEmit(_0x1a940d(0x319),{...emittedConfiguration(),'configstate':'loading-canceled'});}function emitLoadingProgress(){const _0xe02376=_0x18ae9a;proxyEmit(_0xe02376(0x323),loading);}async function getFiat(){const _0x30b20a=_0x18ae9a;let _0x1f0122=gTicker[stablecoins[_0x30b20a(0x2ec)][_0x30b20a(0x285)]],_0x2157de=gTicker[stablecoins[_0x30b20a(0x214)]['coin']];return{'eur':Number(_0x1f0122),'usd':Number(_0x2157de)};}function capitalize(_0x4f2560){const _0x5956a3=_0x18ae9a;return _0x4f2560[_0x5956a3(0x1de)](0x0,0x1)[_0x5956a3(0x354)]()+_0x4f2560['substring'](0x1);}function supportedExchanges(){const _0x2cc514=_0x18ae9a,_0x209ebb=['ws',_0x2cc514(0x1fb),'fetchTicker',_0x2cc514(0x297),_0x2cc514(0x26a),_0x2cc514(0x36d),_0x2cc514(0x37c),_0x2cc514(0x2dc),_0x2cc514(0x218)];let _0x240ce5=[],_0x198b5c=[],_0x1ada22=ccxt['pro'][_0x2cc514(0x226)];_0x1ada22['forEach'](_0x487838=>{const _0x14f0ff=_0x2cc514;try{const _0x453e72=new ccxt['pro'][_0x487838]();_0x198b5c[_0x14f0ff(0x2c2)](_0x453e72);}catch(_0x55c247){}}),_0x198b5c['forEach'](_0x55ea94=>{const _0x3dca06=_0x2cc514;let _0x48e338=0x0;_0x209ebb[_0x3dca06(0x375)](_0x113d81=>{const _0x52eb40=_0x3dca06;_0x113d81 in _0x55ea94['has']&&_0x55ea94[_0x52eb40(0x316)][_0x113d81]&&_0x48e338++;}),_0x48e338==_0x209ebb['length']&&_0x240ce5[_0x3dca06(0x2c2)](capitalize(_0x55ea94['id']));});let _0x4a5867=[];return _0x1ada22[_0x2cc514(0x375)](_0x42a473=>{const _0x131402=_0x2cc514;_0x42a473=capitalize(_0x42a473);if(!_0x240ce5[_0x131402(0x359)](_0x42a473))_0x4a5867[_0x131402(0x2c2)](_0x42a473);}),_0x240ce5;}function setStartDatePerformance(){const _0x50ecde=_0x18ae9a;if(config&&config[_0x50ecde(0x312)][0x0]['changes'][_0x50ecde(0x398)]!=0x0){const _0x507600=config['liquidity'][0x0][_0x50ecde(0x2d5)];dbPerformance[_0x50ecde(0x235)](_0x50ecde(0x1dd))[_0x50ecde(0x27e)]({'date':config['startdate']})[_0x50ecde(0x1da)]({'coins':_0x507600})['write']();}}async function recreateCoinResults(){const _0x480bf0=_0x18ae9a;recreationNeeded=![];let _0x41d122,_0xd33f1e=[];try{for(const _0x249357 of currentCoins){if(_0x249357[_0x480bf0(0x285)]!=config[_0x480bf0(0x374)]){let _0x402c7a=0x0,_0x4167f0,_0x47b9f8;_0x41d122=await getAllEventOrders(_0x249357[_0x480bf0(0x386)]);if(_0x41d122['length']>0x0)_0x41d122[_0x480bf0(0x375)](_0x3380d4=>{const _0x26d57d=_0x480bf0,_0x22f1f9=_0x249357[_0x26d57d(0x386)][_0x26d57d(0x359)](config['basecoin']+'/');_0xd33f1e[_0x26d57d(0x2c2)]({'datetime':_0x3380d4['datetime'],'coin':_0x249357['coin'],'symbol':_0x249357['symbol'],'side':_0x3380d4['side'],'reverse':_0x22f1f9,'amount':formatResult(_0x3380d4[_0x26d57d(0x2f8)],0x8),'filled':formatResult(_0x3380d4[_0x26d57d(0x2f8)],0x8),'price':formatResult(_0x3380d4['price'],0x8)}),_0x402c7a=_0x3380d4[_0x26d57d(0x1f0)]==_0x26d57d(0x236)?_0x402c7a+_0x3380d4[_0x26d57d(0x2f8)]:_0x402c7a-_0x3380d4['filled'];if(!_0x47b9f8)_0x47b9f8=_0x3380d4['price'];});_0x4167f0=_0x249357['number']-_0x402c7a;let _0x20590a;config[_0x480bf0(0x312)][_0x480bf0(0x375)](_0x1e4973=>{const _0x44ffe4=_0x480bf0;!_0x20590a&&(_0x20590a=_0x1e4973[_0x44ffe4(0x2d5)][_0x44ffe4(0x27e)](_0xb0458b=>_0xb0458b[_0x44ffe4(0x285)]==_0x249357[_0x44ffe4(0x285)]),_0x20590a&&(_0x4167f0=_0x20590a[_0x44ffe4(0x28a)],_0x47b9f8=_0x20590a[_0x44ffe4(0x388)]));});let _0x530861=dbCoinResults[_0x480bf0(0x235)](_0x480bf0(0x263))['find']({'coin':_0x249357[_0x480bf0(0x285)]})[_0x480bf0(0x332)]();_0x530861={'coin':_0x249357['coin'],'number':_0x4167f0,'breakeven':_0x47b9f8,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x480bf0(0x235)](_0x480bf0(0x263))[_0x480bf0(0x27e)]({'coin':_0x249357[_0x480bf0(0x285)]})[_0x480bf0(0x1da)](_0x530861)[_0x480bf0(0x333)]();}}_0xd33f1e['sort']((_0x3233f4,_0x208a03)=>_0x3233f4[_0x480bf0(0x29e)]>_0x208a03[_0x480bf0(0x29e)]?0x1:_0x208a03[_0x480bf0(0x29e)]>_0x3233f4[_0x480bf0(0x29e)]?-0x1:0x0);let _0x2d2de4=0x0;for(let _0x4992c9 of _0xd33f1e){await updateCoinResults(_0x4992c9,!![]);}}catch(_0x35733b){await handleError(_0x35733b,_0x480bf0(0x308));}}async function getAllEventOrders(_0x513d50){const _0x2101b6=_0x18ae9a;let _0x52dfeb=[],_0x46cf43=dbLogs[_0x2101b6(0x235)](_0x2101b6(0x204))['filter'](_0x220662=>{const _0x3ba5c2=_0x2101b6,_0x2eca3d=_0x220662[_0x3ba5c2(0x249)][_0x3ba5c2(0x2e5)]();return _0x2eca3d['includes'](_0x513d50[_0x3ba5c2(0x2e5)]())&&(_0x2eca3d[_0x3ba5c2(0x359)]('market')&&_0x2eca3d[_0x3ba5c2(0x359)](_0x3ba5c2(0x387))||_0x2eca3d['includes'](_0x3ba5c2(0x2f8))&&_0x2eca3d[_0x3ba5c2(0x359)](_0x3ba5c2(0x387)));})['sortBy']('time')['value']();return _0x46cf43[_0x2101b6(0x375)](_0x3e53a6=>{const _0x56b42b=_0x2101b6,_0x189e02=_0x3e53a6['event']['includes'](_0x56b42b(0x33b))?_0x56b42b(0x33b):_0x56b42b(0x236),_0x31442c=/#([0-9]|\.)+\s/i,_0x33db37=Number(_0x31442c[_0x56b42b(0x2a6)](_0x3e53a6[_0x56b42b(0x249)])[0x0]['slice'](0x1)),_0x7c1a1e=/@([0-9]|\.)+$/i,_0xeeb62c=Number(_0x7c1a1e[_0x56b42b(0x2a6)](_0x3e53a6['event'])[0x0][_0x56b42b(0x38b)](0x1));_0x52dfeb['push']({'datetime':_0x3e53a6[_0x56b42b(0x2a7)],'coin':symbolToCoin(_0x513d50),'symbol':_0x513d50,'side':_0x189e02,'amount':_0x33db37,'filled':_0x33db37,'price':_0xeeb62c});}),_0x52dfeb;}async function validate24hChanges(){const _0x278820=_0x18ae9a;for(const _0x36ef4a of currentCoins){if(_0x36ef4a['coin']!=config[_0x278820(0x374)]){let _0x4a559c;_0x36ef4a[_0x278820(0x241)]?_0x4a559c=formatResult((0x1/(gChange[_0x36ef4a[_0x278820(0x386)]]/0x64+0x1)-0x1)*0x64,0x3):_0x4a559c=gChange[_0x36ef4a[_0x278820(0x386)]],_0x4a559c<config[_0x278820(0x1f9)]&&(logHistory(_0x278820(0x32e),_0x36ef4a[_0x278820(0x285)]+'\x20has\x20a\x2024h\x20drop\x20of\x20'+_0x4a559c+'%'),logHistory('error','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses'),logHistory(_0x278820(0x32e),_0x278820(0x376)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x24a61d,_0x74b189){const _0x1f77e8=_0x18ae9a;if(!_0x24a61d)return!![];const _0x484589=_0x74b189[_0x1f77e8(0x212)]('.'),_0x30352f=_0x24a61d[_0x1f77e8(0x212)]('.');for(var _0x3029bc=0x0;_0x3029bc<_0x30352f[_0x1f77e8(0x398)];_0x3029bc++){const _0x36494a=~~_0x30352f[_0x3029bc],_0x15d35e=~~_0x484589[_0x3029bc];if(_0x36494a<_0x15d35e)return!![];if(_0x36494a>_0x15d35e)return![];}return![];}async function oneTimeMigration(){const _0x4f1705=_0x18ae9a;let _0x2be771=dbLogs[_0x4f1705(0x235)](_0x4f1705(0x25c))[_0x4f1705(0x332)]();if(isOlderVersion(_0x2be771,_0x4f1705(0x339))){let _0x307eb9=[];const _0x3bc4d4=dbLogs[_0x4f1705(0x235)](_0x4f1705(0x204))[_0x4f1705(0x332)]();_0x3bc4d4[_0x4f1705(0x375)](_0x5b0975=>{const _0x3531e2=_0x4f1705;_0x307eb9[_0x3531e2(0x2c2)]({'time':_0x5b0975[_0x3531e2(0x2a7)],'type':_0x5b0975[_0x3531e2(0x24f)],'event':_0x5b0975[_0x3531e2(0x249)]});}),dbLogs[_0x4f1705(0x235)]('logs')[_0x4f1705(0x1da)](_0x307eb9)[_0x4f1705(0x333)]();}let _0x3a48d1=dbConfig[_0x4f1705(0x235)]('version')['value']();if(isOlderVersion(_0x3a48d1,_0x4f1705(0x339))){let _0x155075=dbConfig[_0x4f1705(0x235)]('bot')['find']({'botID':botID})[_0x4f1705(0x332)]();if(_0x155075){let _0x29fdc0=[];_0x155075[_0x4f1705(0x36b)][_0x4f1705(0x375)](_0xb2ee34=>{const _0x51b147=_0x4f1705;_0x29fdc0['push']({'coin':_0xb2ee34[_0x51b147(0x285)],'number':_0xb2ee34['startnumber'],'price':_0xb2ee34[_0x51b147(0x2eb)]}),delete _0xb2ee34['startnumber'],delete _0xb2ee34[_0x51b147(0x2eb)];});if(_0x29fdc0[_0x4f1705(0x398)]!==0x0)fs[_0x4f1705(0x25f)](configbackuppath+(_0x4f1705(0x318)+botID+_0x4f1705(0x36c)),JSON[_0x4f1705(0x365)](_0x29fdc0,null,0x4),function(_0x511b96){if(_0x511b96){}});const _0x20efe6=(_0x126d2c,_0x1530f8)=>{let _0x1cdb4c=[];_0x1530f8['forEach'](_0x3c6995=>{const _0x5f4a77=_0x1cad,_0x4a16d8=_0x126d2c['find'](_0x35bb67=>_0x35bb67[_0x5f4a77(0x285)]==_0x3c6995['coin']);if(!_0x4a16d8)_0x1cdb4c['push'](_0x3c6995);});let _0x260c09=[];return _0x126d2c['forEach'](_0x363739=>{const _0x1f3090=_0x1cad,_0x25b039=_0x1530f8[_0x1f3090(0x27e)](_0xc586bb=>_0xc586bb['coin']==_0x363739['coin']);if(!_0x25b039||_0x25b039[_0x1f3090(0x28a)]==0x0&&_0x363739[_0x1f3090(0x28a)]!=0x0)_0x260c09[_0x1f3090(0x2c2)](_0x363739);}),{'missingDay1':_0x1cdb4c,'notInDay2':_0x260c09};},_0x31d27d=dbPerformance[_0x4f1705(0x235)](_0x4f1705(0x1dd))[_0x4f1705(0x2d9)]()[_0x4f1705(0x332)]();if(_0x31d27d[_0x4f1705(0x398)]>0x1){const {missingDay1:_0x6a31d1,notInDay2:_0x12a5d2}=_0x20efe6(_0x29fdc0,_0x31d27d[0x1][_0x4f1705(0x263)]);_0x29fdc0=[..._0x29fdc0,..._0x6a31d1],_0x12a5d2['forEach'](_0x188a69=>{const _0xe3782b=_0x4f1705;let _0x3fa8d4=_0x29fdc0['findIndex'](_0x4e5a84=>_0x4e5a84[_0xe3782b(0x285)]==_0x188a69[_0xe3782b(0x285)]);_0x3fa8d4!=-0x1&&_0x29fdc0[_0xe3782b(0x393)](_0x3fa8d4,0x1);});}_0x29fdc0[_0x4f1705(0x254)]((_0x52dd6f,_0x16f42e)=>_0x52dd6f['coin']>_0x16f42e[_0x4f1705(0x285)]?0x1:_0x16f42e[_0x4f1705(0x285)]>_0x52dd6f[_0x4f1705(0x285)]?-0x1:0x0);let _0x3b8047=[{'date':_0x155075[_0x4f1705(0x392)],'changes':_0x29fdc0}];_0x31d27d[_0x4f1705(0x398)]>0x2&&_0x31d27d[_0x4f1705(0x375)]((_0x1c1ad8,_0x22a75b)=>{const _0x38703b=_0x4f1705;if(_0x22a75b>0x0&&_0x22a75b<_0x31d27d['length']-0x1){const {missingDay1:_0xdfbf91,notInDay2:_0x368b14}=_0x20efe6(_0x31d27d[_0x22a75b]['coins'],_0x31d27d[_0x22a75b+0x1][_0x38703b(0x263)]);_0x29fdc0=[],(_0xdfbf91['length']!=0x0||_0x368b14[_0x38703b(0x398)]!=0x0)&&(_0xdfbf91[_0x38703b(0x398)]!=0x0&&_0x29fdc0[_0x38703b(0x2c2)](..._0xdfbf91),_0x368b14[_0x38703b(0x398)]!=0x0&&(_0x368b14[_0x38703b(0x375)](_0x2408a2=>{const _0x5e79e5=_0x38703b;_0x2408a2[_0x5e79e5(0x28a)]=-_0x2408a2[_0x5e79e5(0x28a)];}),_0x29fdc0[_0x38703b(0x2c2)](..._0x368b14)),_0x29fdc0[_0x38703b(0x254)]((_0x124367,_0x4efb5b)=>_0x124367[_0x38703b(0x285)]>_0x4efb5b[_0x38703b(0x285)]?0x1:_0x4efb5b[_0x38703b(0x285)]>_0x124367[_0x38703b(0x285)]?-0x1:0x0),_0x3b8047[_0x38703b(0x2c2)]({'date':_0x31d27d[_0x22a75b+0x1][_0x38703b(0x38d)],'changes':_0x29fdc0}));}}),dbConfig[_0x4f1705(0x235)](_0x4f1705(0x31e))[_0x4f1705(0x27e)]({'botID':botID})[_0x4f1705(0x1da)]({..._0x155075,'liquidity':_0x3b8047})[_0x4f1705(0x333)]();}}if(isOlderVersion(_0x3a48d1,_0x4f1705(0x355))){let _0x29c307=dbConfig[_0x4f1705(0x235)](_0x4f1705(0x31e))[_0x4f1705(0x27e)]({'botID':botID})[_0x4f1705(0x332)]();if(_0x29c307){const _0x495891=_0x29c307[_0x4f1705(0x2af)],_0x23a8a3=_0x495891?capitalize(_0x495891):_0x4f1705(0x2f9);dbConfig[_0x4f1705(0x235)](_0x4f1705(0x31e))[_0x4f1705(0x27e)]({'botID':botID})[_0x4f1705(0x1da)]({'exchange':_0x23a8a3})['write']();}}if(isOlderVersion(_0x3a48d1,_0x4f1705(0x30e))){let _0x44bc59=dbConfig[_0x4f1705(0x235)](_0x4f1705(0x31e))[_0x4f1705(0x27e)]({'botID':botID})[_0x4f1705(0x332)]();if(_0x44bc59){const _0x58c672=_0x44bc59['marketcapEnabled'],_0x3e095a=_0x58c672?_0x4f1705(0x259):![];dbConfig['get'](_0x4f1705(0x31e))[_0x4f1705(0x27e)]({'botID':botID})['assign']({'marketcapEnabled':_0x3e095a})['write']();}}if(isOlderVersion(_0x3a48d1,_0x4f1705(0x1dc))){let _0x5bbd75=dbConfig[_0x4f1705(0x235)](_0x4f1705(0x31e))[_0x4f1705(0x27e)]({'botID':botID})['value']();if(_0x5bbd75){const _0x8981f9=_0x5bbd75[_0x4f1705(0x1e0)],_0x4bc6ac=_0x8981f9?_0x4f1705(0x256):![];dbConfig[_0x4f1705(0x235)](_0x4f1705(0x31e))[_0x4f1705(0x27e)]({'botID':botID})['assign']({'autoliquidity':_0x4bc6ac})[_0x4f1705(0x333)]();}}let _0x5778e5=dbPerformance[_0x4f1705(0x235)](_0x4f1705(0x25c))['value']();isOlderVersion(_0x5778e5,_0x4f1705(0x339))&&setStartDatePerformance();let _0x4e89cd=dbCoinResults[_0x4f1705(0x235)](_0x4f1705(0x25c))[_0x4f1705(0x332)]();if(isOlderVersion(_0x4e89cd,'2.5.0')){let _0x424369=dbCoinResults[_0x4f1705(0x235)](_0x4f1705(0x263))['value']();if(_0x424369['length']!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x44c43d=_0x18ae9a;dbConfig[_0x44c43d(0x389)]('version',serverversion)[_0x44c43d(0x333)](),dbPerformance['set'](_0x44c43d(0x25c),serverversion)['write'](),dbLogs[_0x44c43d(0x389)]('version',serverversion)['write'](),dbCoinResults[_0x44c43d(0x389)](_0x44c43d(0x25c),serverversion)['write']();}function getConfiguration(_0x26c243){const _0x7034d9=_0x18ae9a;let _0x4db38b=dbConfig[_0x7034d9(0x235)](_0x7034d9(0x31e))['find']({'botID':_0x26c243})[_0x7034d9(0x332)]();if(_0x4db38b){let _0x5aba7e=![];typeof _0x4db38b[_0x7034d9(0x258)]==_0x7034d9(0x240)&&(_0x4db38b={..._0x4db38b,'threshold':Number(_0x4db38b['threshold'])},_0x5aba7e=!![]),_0x4db38b[_0x7034d9(0x1f9)]==undefined&&(_0x4db38b={..._0x4db38b,'change24h':-0x14},_0x5aba7e=!![]),_0x4db38b[_0x7034d9(0x384)]==undefined&&(_0x4db38b={..._0x4db38b,'fiat':_0x7034d9(0x222)},_0x5aba7e=!![]),_0x4db38b[_0x7034d9(0x210)]==undefined&&(_0x4db38b={..._0x4db38b,'onepagemode':settings['onepagemode']},_0x5aba7e=!![]),_0x4db38b[_0x7034d9(0x37d)]==undefined&&(_0x4db38b={..._0x4db38b,'colorscheme':'red_yellow_blue'},_0x5aba7e=!![]),_0x4db38b[_0x7034d9(0x1e0)]==undefined&&(_0x4db38b={..._0x4db38b,'autoliquidity':_0x7034d9(0x256)},_0x5aba7e=!![]),_0x4db38b[_0x7034d9(0x2b8)]==undefined&&(_0x4db38b={..._0x4db38b,'marketcapApi':settings[_0x7034d9(0x2b8)]?!![]:![]},_0x5aba7e=!![]),_0x4db38b['marketcapEnabled']==undefined&&(_0x4db38b={..._0x4db38b,'marketcapEnabled':![]},_0x5aba7e=!![]),_0x5aba7e&&(_0x4db38b={'botID':_0x4db38b['botID'],'exchange':_0x4db38b[_0x7034d9(0x2af)],'apiKey':_0x4db38b[_0x7034d9(0x289)],'apiSecret':_0x4db38b[_0x7034d9(0x200)],'apiPassword':_0x4db38b[_0x7034d9(0x220)],'basecoin':_0x4db38b['basecoin'],'botname':_0x4db38b[_0x7034d9(0x22a)],'showname':_0x4db38b[_0x7034d9(0x2a5)],'threshold':_0x4db38b[_0x7034d9(0x258)],'ordertype':_0x4db38b[_0x7034d9(0x237)],'timeout':_0x4db38b['timeout'],'fiat':_0x4db38b[_0x7034d9(0x384)],'startdate':_0x4db38b[_0x7034d9(0x392)],'recreate':_0x4db38b[_0x7034d9(0x253)],'timeshift':_0x4db38b['timeshift'],'onepagemode':_0x4db38b[_0x7034d9(0x210)],'headless':_0x4db38b[_0x7034d9(0x34d)],'cooldown':_0x4db38b[_0x7034d9(0x35f)],'change24h':_0x4db38b[_0x7034d9(0x1f9)],'emojibuy':_0x4db38b[_0x7034d9(0x300)],'emojisell':_0x4db38b[_0x7034d9(0x2d2)],'colorscheme':_0x4db38b[_0x7034d9(0x37d)],'marketcapApi':_0x4db38b[_0x7034d9(0x2b8)],'marketcapEnabled':_0x4db38b[_0x7034d9(0x2fb)],'portfolio':_0x4db38b[_0x7034d9(0x36b)],'autoliquidity':_0x4db38b[_0x7034d9(0x1e0)],'liquidity':_0x4db38b['liquidity'],'openOrders':_0x4db38b[_0x7034d9(0x31c)]},dbConfig[_0x7034d9(0x235)](_0x7034d9(0x31e))[_0x7034d9(0x27b)]()[_0x7034d9(0x333)](),dbConfig[_0x7034d9(0x235)](_0x7034d9(0x31e))[_0x7034d9(0x2c2)](_0x4db38b)[_0x7034d9(0x333)]());}else _0x4db38b={'botID':_0x26c243,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x7034d9(0x251)+_0x26c243,'showname':![],'threshold':0x3,'ordertype':'market','timeout':0x14,'fiat':'USD','startdate':getDate(),'recreate':![],'timeshift':settings[_0x7034d9(0x35e)],'onepagemode':settings[_0x7034d9(0x210)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x7034d9(0x23b),'marketcapApi':settings['marketcapApi']?!![]:![],'marketcapEnabled':![],'portfolio':[],'autoliquidity':'update-liquidity','liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x4db38b;}function emittedConfiguration(){const _0x4e5c62=_0x18ae9a;let _0x82ea62;if(config[_0x4e5c62(0x289)]=='')_0x82ea62={...config,'configstate':_0x4e5c62(0x23a)};else config[_0x4e5c62(0x289)]==_0x4e5c62(0x32b)?_0x82ea62={...config,'configstate':_0x4e5c62(0x2f4)}:(_0x82ea62={...config,'apiKey':_0x4e5c62(0x324),'apiSecret':_0x4e5c62(0x324)},config[_0x4e5c62(0x220)]&&(_0x82ea62[_0x4e5c62(0x220)]=_0x4e5c62(0x324)));return _0x82ea62['enableFiatToggle']=enableFiatToggle,_0x82ea62;}function getSettings(){const _0x51f53f=_0x18ae9a;return dbSettings[_0x51f53f(0x235)]('settings')['value']();}function getSecure(){const _0x55e8d0=_0x18ae9a;return dbSecure[_0x55e8d0(0x235)](_0x55e8d0(0x2ba))[_0x55e8d0(0x332)]()||{};}function updateTimeshift(_0x4bcf31){const _0x3cd858=_0x18ae9a;let _0x1ad8f4=dbConfig[_0x3cd858(0x235)](_0x3cd858(0x31e))[_0x3cd858(0x27e)]({'botID':botID})[_0x3cd858(0x332)]();_0x1ad8f4&&dbConfig['get']('bot')[_0x3cd858(0x27e)]({'botID':botID})['assign']({'timeshift':_0x4bcf31})[_0x3cd858(0x333)](),config[_0x3cd858(0x35e)]=_0x4bcf31,proxyEmit(_0x3cd858(0x319),emittedConfiguration());}function _0xe091(){const _0x247fde=['Stopped\x20fetching\x20balance\x20after\x20','send','Order(s)\x20not\x20validated\x20after\x20','emojibuy','running','unlinkSync','timestamp','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','Net\x20effect','currency','bot-','recreateCoinResults()','\x20order:\x20','62058GOvgqx','testApi','round','amountToPrecision','2.6.22','args','cancelLoading','USDT','liquidity','Waited\x20','orderId','realized','has','page','starting-balance-','configuration','Exchange\x20permission\x20denied\x20-\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','toggleBotMode','openOrders','status','bot','limit','Huobi','-events.json','final','coin-loading-progress','************','storeHeadless','getFullYear','function','15961SycOgK','LOCKED','getHours','***','Executed\x20','target','error','\x20|\x20highest\x20fee:\x20','Initiating\x20bot\x20restart','date-fns','value','write','added','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','Cryptocom','./logs/','differenceInSeconds','2.3.5','rightTxt','sell','ETH','./version.json','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','storeFiat','%\x20(','decode64','privateKeyFromPem','net-fiat','getMonth','memoryUsage','No\x20more\x20open\x20orders\x20-\x20','search','limit-high','/EUR','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','\x20-\x20bot\x20switched\x20to\x20manual\x20mode','floor','headless','InsufficientFunds','token\x20is\x20expired','Loading\x20completed','basecoinvalue','4213965KHkuSd','argv','toUpperCase','2.6.0','full','watchTradesForSymbols()','bb-secure.json','includes','Unknown\x20error:\x20','Error\x20while\x20deleting\x20files:\x20','Failed\x20to\x20load\x20market\x20data\x20-\x20bot\x20not\x20started','emitHistory','timeshift','cooldown','padStart','Pausing\x20for\x20','message','status\x20code\x20401','quote','stringify','\x20metrics:</b>\x20\x0a\x0a','/USDT','success','/output-000.log','InvalidOrder','portfolio','.json','cancelOrder','request-time','delta','replace','last','excluded','none','basecoin','forEach','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','uncaughtException','path','\x20>\x20[DEBUG]\x20','Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute','initTickers()','createOrder','colorscheme','\x20>\x20details:','distribution','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','portfolio2','\x20:\x20','DDoSProtection','fiat','getTime','symbol','order','price','set','detectLiquidityChange()','slice','must\x20be\x20greater\x20than\x20minimum\x20amount','date','lowdb/adapters/FileSync','balances','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','yyyy/MM/dd','startdate','splice','\x20>\x20','6340eaPsnl','\x20minutes\x20-\x20','getStartingBalances','length','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','keys','\x20API\x20key,\x20secret\x20or\x20password\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','random','showConfig','placeOrder','\x20|\x20exchange:\x20','indexOf','sells','closed','Invalid\x20quantity','staging','assign','USDC','2.6.23','data','substring','amount','autoliquidity','Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)','bots','percentage','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','\x20/\x20','bb-settings.json','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','RETRY\x20-\x20Problem\x20resolved\x20after\x20','password','\x20not\x20responding\x20(see:\x20hodlerhacks.com/fix/5)','timeout','performance','warning','Portfolio\x20change\x20detected:\x20','limits','side','sendMetricsTelegram','util','</pre>','<b>','Order\x20filled:\x20','Error\x20details:\x20','heapUsed','Set\x20lock\x20orders\x20to:\x20','change24h',':\x20timer\x20>','fetchTickers','Block\x20transaction\x20detection:\x20','loadSymbols()','PAXG','ExchangeNotAvailable','apiSecret','ExchangeError','OrderNotFound','\x20rejected\x20your\x20API\x20request\x20(see:\x20hodlerhacks.com/fix/4)','logs','BTC','defaults','balancing\x20resumes\x20when\x20cooldown\x20ends','\x20minutes','\x20|\x20Custom\x20ID:\x20','prevnumber','average','Initializing\x20exchange','Trigger:\x20','Failed\x20to\x20load\x20coin\x20data\x20for\x20','ccxt','onepagemode','Valid\x20balance\x20for\x20','split','./config/','usd','Bitget','Huobipro','fees','fetchBalance','resetHistory','pki','net-basecoin','removed','ongoing','padEnd','fetchTicker','apiPassword','Exception\x20thrown\x20in\x20','USD','\x20|\x20lock\x20orders:\x20','initclient','remainingSymbols','exchanges','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','open','Symbol(s):\x20','botname','1\x20-\x20FILLED\x20unknown\x20order:\x20','slider','max','offset','getMinutes','cost','1260UxAXnf','Saving\x20configuration','\x20-\x20bot\x20not\x20started','fetchTickers()','get','buy','ordertype','<b>Bot\x20','\x20|\x20','initial','red_yellow_blue','loadMarkets','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','Avoiding\x20continuous\x20order\x20attempts','freeze','string','reverse','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)','toString','-config.json','min','Manual\x20balancing\x20required','UNLOCKED','getPortfolio','event','filter','API-key\x20format\x20invalid','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','fetchBalance()','valid','type','leftTxt','Bot\x20','create','recreate','sort','market_cap','update-liquidity','privateKey','threshold','marketcap','node-forge','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','version','\x20>\x20pausing\x20bot\x20for\x20','lowdb','writeFile','kill','Cex','/USD','coins','parse','1\x20-\x20FILLED\x20known\x20order:\x20','netoffset','-performance.json','Initializing\x20coin\x20results','abs','watchOrders','map','orderstatus','BNB','001','Error:\x20Invalid\x20argument\x20','storeConfiguration','pro','PermissionDenied','watchTrades()','balancing\x20resumed','Exchange\x20error\x20details:','debug','2\x20-\x20Handled\x20open\x20orders','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20trying\x20again\x20in\x20','market','Limit\x20(high-margin)','remove','\x20-\x20bot\x20already\x20running\x20in\x20manual\x20mode','/backup/','find','getCoinNumber()','OnMaintenance','171EVYbJz','Unfilled\x20order(s)\x20canceled\x20after\x20','Placing\x20order\x20for:\x20','1845747OEpYwU','coin','Limit\x20(low-margin)','ask','BNB/','apiKey','number','3085704jPaiHR','Resuming\x20(','decrypt','spot','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','NetworkError','\x20orders\x20in\x20less\x20than\x20','recent20','\x20hour','\x20exchange\x20error:\x20','Headless:\x20','sha256','watchTrades','toFixed','total','RETRY\x20-\x20Error\x20in\x20','\x20MB','sqrt','getDate','datetime','createWriteStream',':\x20Bot\x20','apply','trade','restart','Exchange','showname','exec','time','\x20blocked\x20API\x20(DDoSProtection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','progress','pop','portfolio1','\x20>\x20stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','shift','668504HgsFVY','exchange','highest','join','611229PnYrdV','buys','2oFkbXg','AuthenticationError','quick','add','marketcapApi','existsSync','secure','\x20uses\x20','constructor','(((.+)+)+)+$','fee','TUSD','-results.json','1\x20-\x20partially\x20FILLED\x20(','push','Error\x20in\x20loadSymbols():\x20','event-history','\x20network\x20error:\x20','Net\x20','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','bid','Error\x20details:','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','\x20closed\x20the\x20connection\x20(see:\x20hodlerhacks.com/fix/5)','startsWith','log','EUR','yargs/yargs','-------------------------------\x0a',')\x20unknown\x20order:\x20','emojisell','cancel','Insufficient\x20funds\x20to\x20execute\x20order:\x20','changes','process\x20','Invalid\x20API\x20details,\x20please\x20try\x20again\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','\x20portfolio:</b>\x20\x0a\x0a','cloneDeep','format',')\x20|\x20exchange:\x20','fetchOpenOrders','sortBy','Invalid\x20balance\x20for\x20','canceled','2\x20-\x20handling\x20FILLED\x20order:\x20','isEqual','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','entries','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','toLowerCase','\x20attempts','0\x20-\x20EXECUTION:\x20','Bybit','enabled','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','startprice','eur','breakeven','\x20-\x20','\x20change','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','no\x20open\x20orders','Unknown\x20error\x20-\x20check\x20logs','recovery','axios','<pre>','getSeconds','filled','Binance','change','marketcapEnabled','starting-balances'];_0xe091=function(){return _0x247fde;};return _0xe091();}function updateOnepagemode(_0x3abfe5){const _0x45cde1=_0x18ae9a;let _0x2af77f=dbConfig[_0x45cde1(0x235)]('bot')[_0x45cde1(0x27e)]({'botID':botID})[_0x45cde1(0x332)]();_0x2af77f&&dbConfig[_0x45cde1(0x235)](_0x45cde1(0x31e))['find']({'botID':botID})[_0x45cde1(0x1da)]({'onepagemode':_0x3abfe5})['write'](),config['onepagemode']=_0x3abfe5,proxyEmit(_0x45cde1(0x319),emittedConfiguration());}function updateMarketcapApi(_0x4450ed){const _0x3d64fc=_0x18ae9a,_0x1c1475=_0x4450ed?!![]:![];let _0x42a745=dbConfig[_0x3d64fc(0x235)]('bot')['find']({'botID':botID})[_0x3d64fc(0x332)]();_0x42a745&&dbConfig[_0x3d64fc(0x235)](_0x3d64fc(0x31e))['find']({'botID':botID})['assign']({'marketcapApi':_0x1c1475})[_0x3d64fc(0x333)](),config[_0x3d64fc(0x2b8)]=_0x1c1475,getMarketCap(),proxyEmit(_0x3d64fc(0x319),emittedConfiguration());}async function storeConfiguration(_0x17a5cf){const _0x186cca=_0x18ae9a;logger[_0x186cca(0x276)](_0x186cca(0x232));if(pidBalances)clearTimeout(pidBalances);setBlockTransactionDetection(!![]);let _0x1c3993=![],_0x678218=![],_0x47f75c=[];_0x17a5cf[_0x186cca(0x36b)][_0x186cca(0x375)](_0x4f3378=>{const _0x5c7ad1=_0x186cca;if(!_0x4f3378[_0x5c7ad1(0x372)]&&_0x4f3378['coin']!=_0x17a5cf[_0x5c7ad1(0x374)])_0x47f75c[_0x5c7ad1(0x2c2)](_0x4f3378['symbol']);}),_0x47f75c['forEach'](_0x3a4c5e=>{const _0x3a50b1=_0x186cca,_0x5f3382=currentCoins[_0x3a50b1(0x27e)](_0x2dad7c=>_0x2dad7c[_0x3a50b1(0x386)]==_0x3a4c5e);!_0x5f3382&&(_0x1c3993=!![]);}),currentCoins[_0x186cca(0x375)](_0x559a3d=>{const _0x1064a4=_0x186cca;if(_0x559a3d['coin']!=config[_0x1064a4(0x374)]){const _0x285c4c=_0x47f75c[_0x1064a4(0x27e)](_0x331def=>_0x331def==_0x559a3d[_0x1064a4(0x386)]);!_0x285c4c&&(_0x1c3993=!![]);}}),_0x17a5cf['portfolio'][_0x186cca(0x375)](_0x563d7a=>{const _0x1ec0c7=_0x186cca,_0x4e689d=config[_0x1ec0c7(0x36b)][_0x1ec0c7(0x27e)](_0x205262=>_0x205262[_0x1ec0c7(0x285)]==_0x563d7a['coin']);if(_0x4e689d&&_0x563d7a[_0x1ec0c7(0x22e)]!=_0x4e689d['offset'])_0x678218=!![];});let _0x44656a=dbConfig[_0x186cca(0x235)](_0x186cca(0x31e))['find']({'botID':botID})[_0x186cca(0x332)]();_0x17a5cf={..._0x17a5cf,'apiKey':decryptRSA(secure[_0x186cca(0x257)],_0x17a5cf['apiKey']),'apiSecret':decryptRSA(secure[_0x186cca(0x257)],_0x17a5cf['apiSecret'])};_0x17a5cf[_0x186cca(0x220)]&&(_0x17a5cf['apiPassword']=decryptRSA(secure[_0x186cca(0x257)],_0x17a5cf[_0x186cca(0x220)]));let _0x9578ae=![];if(_0x44656a){_0x17a5cf[_0x186cca(0x289)]=='************'?_0x17a5cf[_0x186cca(0x289)]=config[_0x186cca(0x289)]:_0x9578ae=!![];_0x17a5cf['apiSecret']==_0x186cca(0x324)?_0x17a5cf[_0x186cca(0x200)]=config[_0x186cca(0x200)]:_0x9578ae=!![];if(_0x17a5cf[_0x186cca(0x220)]=='************')_0x17a5cf[_0x186cca(0x220)]=config[_0x186cca(0x220)];else{if(_0x17a5cf[_0x186cca(0x220)])_0x9578ae=!![];}dbConfig['get'](_0x186cca(0x31e))[_0x186cca(0x27e)]({'botID':botID})['assign'](_0x17a5cf)[_0x186cca(0x333)]();}else dbConfig[_0x186cca(0x235)](_0x186cca(0x31e))[_0x186cca(0x2c2)](_0x17a5cf)[_0x186cca(0x333)](),_0x9578ae=!![],process[_0x186cca(0x2fe)]({'status':'enabled','live':_0x186cca(0x301)},_0x474b46=>{});process[_0x186cca(0x2fe)]({'botname':_0x17a5cf['botname']},_0x14f21a=>{}),config={..._0x17a5cf},updateBotManager(),proxyEmit('configuration-stored'),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x9578ae)!_0x44656a?await reset(!![]):getBalances();else _0x1c3993||_0x678218?await reset(![]):getBalances();setBlockTransactionDetection(![]);}async function storeHeadless(_0x254019){const _0x36fbbc=_0x18ae9a,_0x2061e8={...config,'headless':_0x254019[_0x36fbbc(0x34d)]};let _0x5e0fef=dbConfig[_0x36fbbc(0x235)]('bot')['find']({'botID':botID})[_0x36fbbc(0x332)]();_0x5e0fef&&dbConfig['get'](_0x36fbbc(0x31e))[_0x36fbbc(0x27e)]({'botID':botID})[_0x36fbbc(0x1da)](_0x2061e8)[_0x36fbbc(0x333)](),config={..._0x2061e8},updateBotManager(),proxyEmit(_0x36fbbc(0x319),emittedConfiguration());}async function storeFiat(_0x164a87){const _0x2f3e40=_0x18ae9a,_0x281c5b={...config,'fiat':_0x164a87};let _0x596782=dbConfig['get']('bot')[_0x2f3e40(0x27e)]({'botID':botID})['value']();_0x596782&&dbConfig[_0x2f3e40(0x235)](_0x2f3e40(0x31e))[_0x2f3e40(0x27e)]({'botID':botID})[_0x2f3e40(0x1da)](_0x281c5b)[_0x2f3e40(0x333)](),config={..._0x281c5b},proxyEmit('configuration',emittedConfiguration());}function resetHistory(){const _0x1bc20a=_0x18ae9a;logger[_0x1bc20a(0x356)]('Resetting\x20bot\x20history');try{if(fs[_0x1bc20a(0x2b9)](path[_0x1bc20a(0x2b1)](configpath,'bot-'+botID+'-events.json')))fs[_0x1bc20a(0x302)](path[_0x1bc20a(0x2b1)](configpath,_0x1bc20a(0x307)+botID+_0x1bc20a(0x321)));if(fs[_0x1bc20a(0x2b9)](path['join'](configpath,_0x1bc20a(0x307)+botID+_0x1bc20a(0x267))))fs['unlinkSync'](path[_0x1bc20a(0x2b1)](configpath,_0x1bc20a(0x307)+botID+_0x1bc20a(0x267)));if(fs[_0x1bc20a(0x2b9)](path[_0x1bc20a(0x2b1)](configpath,_0x1bc20a(0x307)+botID+_0x1bc20a(0x2c0))))fs[_0x1bc20a(0x302)](path[_0x1bc20a(0x2b1)](configpath,_0x1bc20a(0x307)+botID+_0x1bc20a(0x2c0)));}catch(_0xa7f767){if(_0xa7f767)logger[_0x1bc20a(0x356)](_0x1bc20a(0x35b),_0xa7f767);}const _0x52bddf=getDate();let _0x50868e=[];currentCoins[_0x1bc20a(0x375)](_0x546f89=>{const _0xf4a5ef=_0x1bc20a;_0x50868e['push']({'coin':_0x546f89['coin'],'number':_0x546f89[_0xf4a5ef(0x28a)],'price':_0x546f89[_0xf4a5ef(0x371)]});});let _0x8193f9=dbConfig[_0x1bc20a(0x235)]('bot')['find']({'botID':botID})[_0x1bc20a(0x332)]();_0x8193f9&&(dbConfig['get'](_0x1bc20a(0x31e))[_0x1bc20a(0x27e)]({'botID':botID})[_0x1bc20a(0x1da)]({'liquidity':[{'date':_0x52bddf,'changes':_0x50868e}]})['write'](),config['liquidity']=[]),restartBot(!![]);}function noslash(_0x44f5a4){const _0x5e5d01=_0x18ae9a;return _0x44f5a4[_0x5e5d01(0x370)]('/','');}function updateHighestFee(_0x239826){const _0x12351d=_0x18ae9a;if(_0x239826[_0x12351d(0x241)]){let _0x34b107={'filled':_0x239826[_0x12351d(0x2f8)]*_0x239826[_0x12351d(0x388)],'amount':_0x239826[_0x12351d(0x2f8)]*_0x239826[_0x12351d(0x388)],'side':_0x239826['side']==_0x12351d(0x33b)?_0x12351d(0x236):_0x12351d(0x33b),'price':0x1/_0x239826['price']};_0x239826={..._0x239826,..._0x34b107};}const _0x1a4c47=defaultFee*_0x239826[_0x12351d(0x2f8)]*_0x239826[_0x12351d(0x388)];lastFees[_0x12351d(0x292)]['length']===0x14&&lastFees[_0x12351d(0x292)][_0x12351d(0x2ad)](),lastFees['recent20'][_0x12351d(0x2c2)](_0x1a4c47),lastFees[_0x12351d(0x2b0)]=Math['max'](...lastFees[_0x12351d(0x292)]);}async function updateNumberCoinsCcxt(_0x32ef15){const _0x25d3a5=_0x18ae9a;logger[_0x25d3a5(0x276)](_0x25d3a5(0x2e7)+_0x32ef15['symbol']+'\x20|\x20'+_0x32ef15[_0x25d3a5(0x31d)]+'\x20|\x20'+_0x32ef15[_0x25d3a5(0x2f8)]+_0x25d3a5(0x1e5)+_0x32ef15[_0x25d3a5(0x1df)]+_0x25d3a5(0x239)+_0x32ef15['id']);let _0x1af4b9=_0x32ef15[_0x25d3a5(0x31d)],_0x49a5db=![];currentCoins[_0x25d3a5(0x375)](_0x4e69de=>{const _0x4d54ad=_0x25d3a5;_0x4e69de['symbol']==_0x32ef15[_0x4d54ad(0x386)]&&(_0x49a5db=!![]);});if(!_0x49a5db)return;const _0x2a7548=currentCoins['find'](_0x14daf5=>_0x14daf5[_0x25d3a5(0x386)]==_0x32ef15[_0x25d3a5(0x386)]),_0x1b2da6=_0x2a7548[_0x25d3a5(0x285)],_0x4f0108=_0x4c7342=>{const _0x14c588=_0x25d3a5,_0x390bb2=currentCoins[_0x14c588(0x27e)](_0x16ce3b=>_0x16ce3b['symbol']==_0x32ef15[_0x14c588(0x386)]);if(_0x390bb2)_0x390bb2['orderstatus']=_0x4c7342;};let _0x2f00fc=![];for(const _0x1f2abd of lastOrders){const _0x10f107=0x64,_0x3452b3=0x1388;let _0x34a7fc=0x0;while(!_0x1f2abd['orderId']&&_0x34a7fc*_0x10f107<_0x3452b3){_0x34a7fc++,await sleep(_0x10f107);}if(_0x34a7fc>0x0)logger['debug'](_0x25d3a5(0x313)+_0x34a7fc*_0x10f107/0x3e8+_0x25d3a5(0x25b));_0x1f2abd[_0x25d3a5(0x314)]==_0x32ef15['id']&&(_0x2f00fc=!![]);}if(_0x1af4b9=='open'){_0x4f0108(_0x25d3a5(0x228));if(_0x32ef15[_0x25d3a5(0x2f8)]>0x0&&_0x32ef15['filled']<_0x32ef15[_0x25d3a5(0x1df)]){if(_0x2f00fc){setBlockTransactionDetection(!![]),logger[_0x25d3a5(0x276)]('1\x20-\x20partially\x20FILLED\x20('+_0x32ef15['filled']+')\x20known\x20order:\x20'+_0x32ef15['id']);const _0x1a03a4=await getCoins(balanceUpdateDelay,undefined,undefined,_0x1b2da6);[currentCoins,currentCoinsAll]=_0x1a03a4,setBlockTransactionDetection(![]);}else logger[_0x25d3a5(0x276)](_0x25d3a5(0x2c1)+_0x32ef15[_0x25d3a5(0x2f8)]+_0x25d3a5(0x2d1)+_0x32ef15['id']),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay);}}else{if(_0x1af4b9=='canceled'){_0x4f0108(_0x25d3a5(0x2df)),lastOrders=lastOrders['filter'](_0x252ff1=>_0x252ff1[_0x25d3a5(0x386)]!=_0x32ef15[_0x25d3a5(0x386)]);const _0x4bea82=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x4bea82,setBlockTransactionDetection(![]),await getOpenOrders(),handleOpenOrders();}else{if(_0x1af4b9==_0x25d3a5(0x1d7)){if(lastOrders)for(const _0x441881 of lastOrders){if(_0x441881[_0x25d3a5(0x314)]==_0x32ef15['id']){logger['debug'](_0x25d3a5(0x265)+_0x32ef15['id']),_0x2f00fc=!![];if(_0x441881[_0x25d3a5(0x2f8)]==0x0){setBlockTransactionDetection(!![]),logger[_0x25d3a5(0x276)](_0x25d3a5(0x2e0)+_0x32ef15['id']);if(_0x32ef15[_0x25d3a5(0x20b)])_0x441881[_0x25d3a5(0x388)]=_0x32ef15[_0x25d3a5(0x20b)];else{if(_0x32ef15[_0x25d3a5(0x388)])_0x441881[_0x25d3a5(0x388)]=_0x32ef15[_0x25d3a5(0x388)];else{}}_0x441881[_0x25d3a5(0x2f8)]=_0x32ef15[_0x25d3a5(0x2f8)],updateHighestFee(_0x441881);const _0xfa5af9=await getCoins(balanceUpdateDelay,undefined,undefined,_0x1b2da6);[currentCoins,currentCoinsAll]=_0xfa5af9,setBlockTransactionDetection(![]),await validateOrders(),_0x4f0108('filled'),_0x441881['fee']={'currency':_0x32ef15[_0x25d3a5(0x2be)]?_0x32ef15[_0x25d3a5(0x2be)][_0x25d3a5(0x306)]:null,'cost':_0x32ef15[_0x25d3a5(0x2be)]?_0x32ef15['fee'][_0x25d3a5(0x230)]:0x0},await updateCoinResults(_0x441881);}}}!_0x2f00fc&&(logger[_0x25d3a5(0x276)](_0x25d3a5(0x22b)+_0x32ef15['id']),_0x4f0108(_0x25d3a5(0x2f8)),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay),await updateOpenOrders(),handleOpenOrders());}}}if(lastBalances){let _0x32a616=JSON[_0x25d3a5(0x264)](lastBalances[_0x25d3a5(0x36b)]);const _0x5a6f23=_0x32a616['find'](_0x5b2c34=>_0x5b2c34[_0x25d3a5(0x386)]==_0x32ef15[_0x25d3a5(0x386)]);if(_0x5a6f23){if(_0x1af4b9=='open')_0x5a6f23[_0x25d3a5(0x26c)]=_0x5a6f23['orderstatus']==_0x25d3a5(0x2f8)?_0x25d3a5(0x2f8):_0x25d3a5(0x228);else{if(_0x1af4b9==_0x25d3a5(0x2df))_0x5a6f23[_0x25d3a5(0x26c)]=_0x5a6f23[_0x25d3a5(0x26c)]==_0x25d3a5(0x2f8)?'filled':_0x25d3a5(0x2df);else _0x1af4b9=='closed'&&(_0x5a6f23['orderstatus']=_0x25d3a5(0x2f8));}}lastBalances={...lastBalances,'portfolio':JSON['stringify'](_0x32a616)},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x333637=_0x18ae9a;await getOpenOrders();let _0x56cd7a=![];currentCoins[_0x333637(0x375)](_0x3923a4=>{const _0x47e5a1=_0x333637;_0x56cd7a=allOpenOrders['find'](_0x4f78f1=>_0x4f78f1[_0x47e5a1(0x386)]==_0x3923a4[_0x47e5a1(0x386)]),_0x3923a4[_0x47e5a1(0x26c)]=_0x56cd7a?_0x47e5a1(0x228):'none';});}async function fetchBalance(_0x48a22a=!![]){const _0x756bd0=_0x18ae9a;let _0x3fa5e7,_0x41a0df;try{return _0x3fa5e7=await exchange[_0x756bd0(0x218)](),_0x41a0df=_0x3fa5e7['total'],_0x41a0df;}catch(_0x246f62){return!_0x48a22a?handleErrorNoStop(_0x246f62,_0x756bd0(0x24d)):await handleError(_0x246f62,'fetchBalance()'),![];}}async function getCoins(_0x136960=0x0,_0x124805=!![],_0x385c95=config[_0x18ae9a(0x374)],_0x15a8c0){const _0x1d3185=_0x18ae9a;let _0x461981=[],_0x15c2c9=[],_0x620769=[],_0x1e0aed;if(_0x136960)await sleep(_0x136960);if(botPaused)return[currentCoins,currentCoinsAll];let _0x50ddbf=![],_0x599224=0x0,_0x4229ec,_0x14f19d;_0x15a8c0&&(_0x4229ec=currentCoins[_0x1d3185(0x27e)](_0x40ef56=>_0x40ef56[_0x1d3185(0x285)]==_0x15a8c0),_0x4229ec&&(_0x14f19d=_0x4229ec['prevnumber'],delete _0x4229ec[_0x1d3185(0x20a)]));while(!_0x50ddbf){_0x1e0aed=await fetchBalance(_0x124805);if(_0x1e0aed){if(_0x15a8c0){if(_0x1e0aed[_0x15a8c0]!=_0x14f19d)logger[_0x1d3185(0x276)](_0x1d3185(0x211)+_0x15a8c0+':\x20'+_0x1e0aed[_0x15a8c0]+'\x20('+_0x14f19d+')'),_0x50ddbf=!![];else{logger[_0x1d3185(0x276)](_0x1d3185(0x2de)+_0x15a8c0+':\x20'+_0x1e0aed[_0x15a8c0]+'\x20('+_0x14f19d+')'),_0x599224++;if(_0x599224<balanceUpdateRetries)await sleep(balanceUpdateDelay);else{logger[_0x1d3185(0x276)](_0x1d3185(0x2fd)+_0x599224+'\x20attempts');break;}}}else break;}else return[currentCoins,currentCoinsAll];}for(const [_0x4c11be,_0x1c2396]of Object[_0x1d3185(0x2e3)](_0x1e0aed)){_0x620769[_0x1d3185(0x2c2)](_0x4c11be);}config[_0x1d3185(0x36b)]['forEach'](_0x593a0e=>{const _0x182b38=_0x1d3185;!_0x620769['includes'](_0x593a0e[_0x182b38(0x285)])&&(_0x1e0aed[_0x593a0e[_0x182b38(0x285)]]=0x0);});if(_0x385c95=='')for(const [_0xcc8335,_0x1bd462]of Object[_0x1d3185(0x2e3)](_0x1e0aed)){_0x1bd462!=0x0&&_0x461981['push']({'coin':_0xcc8335});}else for(const [_0x59434e,_0x110a3e]of Object[_0x1d3185(0x2e3)](_0x1e0aed)){const _0x588af1=config[_0x1d3185(0x36b)][_0x1d3185(0x27e)](_0x18855c=>_0x18855c[_0x1d3185(0x285)]==_0x59434e),_0x4ba27f=_0x59434e+'/'+_0x385c95,_0x2ef8ba=_0x385c95+'/'+_0x59434e,_0x196a9e=currentCoins[_0x1d3185(0x27e)](_0x204291=>_0x204291[_0x1d3185(0x285)]==_0x59434e);if((_0x110a3e!=0x0||_0x588af1)&&(allSymbols[_0x1d3185(0x359)](_0x4ba27f)||_0x59434e==_0x385c95))_0x196a9e?_0x461981[_0x1d3185(0x2c2)]({..._0x196a9e,'number':Math[_0x1d3185(0x22d)](_0x110a3e+(_0x588af1&&_0x588af1['offset']||0x0),0x0)}):_0x461981[_0x1d3185(0x2c2)]({'coin':_0x59434e,'symbol':_0x4ba27f,'reverse':![],'number':Math[_0x1d3185(0x22d)](_0x110a3e+(_0x588af1&&_0x588af1[_0x1d3185(0x22e)]||0x0),0x0),'orderstatus':'none'});else{if((_0x110a3e!=0x0||_0x588af1)&&allSymbols['includes'](_0x2ef8ba))_0x196a9e?_0x461981[_0x1d3185(0x2c2)]({..._0x196a9e,'number':Math[_0x1d3185(0x22d)](_0x110a3e+(_0x588af1&&_0x588af1[_0x1d3185(0x22e)]||0x0),0x0)}):_0x461981[_0x1d3185(0x2c2)]({'coin':_0x59434e,'symbol':_0x2ef8ba,'reverse':!![],'number':Math[_0x1d3185(0x22d)](_0x110a3e+(_0x588af1&&_0x588af1[_0x1d3185(0x22e)]||0x0),0x0),'orderstatus':_0x1d3185(0x373)});else _0x588af1&&_0x461981[_0x1d3185(0x2c2)]({'coin':_0x588af1[_0x1d3185(0x285)],'symbol':_0x588af1[_0x1d3185(0x386)],'reverse':_0x588af1['reverse'],'number':0x0,'orderstatus':_0x1d3185(0x373)});}}return _0x461981[_0x1d3185(0x254)]((_0x1166b7,_0x4dbd4e)=>_0x1166b7[_0x1d3185(0x36f)]<_0x4dbd4e[_0x1d3185(0x36f)]?0x1:_0x4dbd4e[_0x1d3185(0x36f)]<_0x1166b7[_0x1d3185(0x36f)]?-0x1:0x0),_0x15c2c9=cloneDeep(_0x461981),_0x461981=_0x461981[_0x1d3185(0x24a)](_0x388bd1=>{const _0x284332=_0x1d3185,_0xad151d=config['portfolio']['find'](_0x29da60=>_0x29da60[_0x284332(0x285)]==_0x388bd1['coin']);return _0xad151d&&!_0xad151d['excluded'];}),[_0x461981,_0x15c2c9];}async function getCoinNumber(_0x52c10d){const _0x3a83b2=_0x18ae9a;let _0x3c362c;try{const _0x20bdb7=await exchange[_0x3a83b2(0x218)]();_0x3c362c=_0x20bdb7[_0x3a83b2(0x299)][_0x52c10d];}catch(_0x45bb64){await handleError(_0x45bb64,_0x3a83b2(0x27f));}return _0x3c362c;}async function getOpenOrders(){const _0x1dd939=_0x18ae9a;let _0x52ad1e;allOpenOrders=[];try{for(const _0x50b47d of config[_0x1dd939(0x36b)]){!_0x50b47d[_0x1dd939(0x372)]&&_0x50b47d[_0x1dd939(0x285)]!=config['basecoin']&&(_0x52ad1e=await exchange[_0x1dd939(0x2dc)](_0x50b47d[_0x1dd939(0x386)]),_0x52ad1e['length']>0x0&&allOpenOrders[_0x1dd939(0x2c2)](_0x52ad1e[0x0]));}}catch(_0xc1d368){await handleError(_0xc1d368,'getOpenOrders()');}}async function handleOpenOrders(_0x3cf565=0x0){const _0xdeb682=_0x18ae9a;allOpenOrders[_0xdeb682(0x398)]==0x0&&lockOrders==ORDERS[_0xdeb682(0x329)]&&allOrdersPlaced&&(_0x3cf565==0x0?(logger['debug']('1\x20-\x20Handle\x20open\x20orders'),_0x3cf565++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0xdeb682(0x276)](_0xdeb682(0x277)),validateOrders(_0xdeb682(0x2f2))));}async function testAPI(_0x250a08){const _0x1e0071=_0x18ae9a;logger[_0x1e0071(0x276)]('Test\x20API');const _0xfb5652=ccxt[_0x1e0071(0x271)][_0x250a08[_0x1e0071(0x2af)][_0x1e0071(0x2e5)]()],_0x440110=new _0xfb5652({'apiKey':_0x250a08['apiKey'],'secret':_0x250a08[_0x1e0071(0x200)],'options':{'defaultType':_0x1e0071(0x28e)}});if(_0x250a08[_0x1e0071(0x220)])_0x440110[_0x1e0071(0x1e9)]=_0x250a08[_0x1e0071(0x220)];try{await _0x440110[_0x1e0071(0x218)]();}catch(_0x269ced){logger[_0x1e0071(0x276)]('Error\x20in\x20testAPI():\x20'+_0x269ced[_0x1e0071(0x243)]());throw _0x269ced;}}function cloneDeep(_0x495134){const _0x579e2a=_0x18ae9a;return JSON[_0x579e2a(0x264)](JSON[_0x579e2a(0x365)](_0x495134));}async function getPortfolio(_0x1e2c02){const _0x492133=_0x18ae9a;let _0x48edab=[],_0x26ef9d=[],_0x2ad8d9=[],_0x253108;_0x1e2c02[_0x492133(0x289)]=decryptRSA(secure[_0x492133(0x257)],_0x1e2c02[_0x492133(0x289)]),_0x1e2c02[_0x492133(0x200)]=decryptRSA(secure['privateKey'],_0x1e2c02[_0x492133(0x200)]);if(_0x1e2c02[_0x492133(0x220)])_0x1e2c02[_0x492133(0x220)]=decryptRSA(secure[_0x492133(0x257)],_0x1e2c02[_0x492133(0x220)]);if(_0x1e2c02[_0x492133(0x289)]!==_0x492133(0x324)||_0x1e2c02[_0x492133(0x200)]!==_0x492133(0x324)||_0x1e2c02['apiPassword']&&_0x1e2c02[_0x492133(0x220)]!=='************'){if(config['exchange']){if(_0x1e2c02[_0x492133(0x289)]==_0x492133(0x324))_0x1e2c02[_0x492133(0x289)]=config['apiKey'];if(_0x1e2c02[_0x492133(0x200)]==_0x492133(0x324))_0x1e2c02[_0x492133(0x200)]=config[_0x492133(0x200)];if(_0x1e2c02[_0x492133(0x220)]==_0x492133(0x324))_0x1e2c02[_0x492133(0x220)]=config[_0x492133(0x220)];}try{if(_0x1e2c02[_0x492133(0x30b)])await testAPI(_0x1e2c02);}catch(_0x1a3e10){if(_0x1a3e10['toString']()[_0x492133(0x359)]('AuthenticationError')){logHistory(_0x492133(0x32e),_0x492133(0x2d7)),logHistory(_0x492133(0x32e),_0x492133(0x1f6)+_0x1a3e10['toString']()),proxyEmit('portfolio1',![]);return;}else{if(_0x1a3e10[_0x492133(0x243)]()[_0x492133(0x359)](_0x492133(0x272))){logHistory(_0x492133(0x32e),_0x492133(0x31a)),logHistory(_0x492133(0x32e),_0x492133(0x1f6)+_0x1a3e10['toString']()),proxyEmit(_0x492133(0x2ab),![]);return;}else{logHistory(_0x492133(0x32e),'Error\x20occurred:\x20'+_0x1a3e10[_0x492133(0x243)]()),logger[_0x492133(0x276)](_0x492133(0x2c9),_0x1a3e10),proxyEmit(_0x492133(0x2ab),![]);return;}}}exchange?updateExchange(_0x1e2c02[_0x492133(0x289)],_0x1e2c02[_0x492133(0x200)],_0x1e2c02[_0x492133(0x220)]):await initExchange(_0x1e2c02[_0x492133(0x2af)],_0x1e2c02[_0x492133(0x289)],_0x1e2c02[_0x492133(0x200)],_0x1e2c02['apiPassword']);await loadSymbols();const _0x41698d=await getCoins(0x0,![],_0x1e2c02[_0x492133(0x374)]);_0x2ad8d9=cloneDeep(_0x41698d[0x1]);}else{const _0x9f8537=await getCoins();_0x2ad8d9=cloneDeep(_0x9f8537[0x1]);}if(_0x1e2c02['basecoin']=='')proxyEmit(_0x492133(0x2ab),!![]),proxyEmit('portfolio2',_0x2ad8d9);else{_0x2ad8d9[_0x492133(0x375)](_0xde3d92=>{const _0x51d708=_0x492133;if(_0xde3d92[_0x51d708(0x285)]!=_0x1e2c02[_0x51d708(0x374)]&&allSymbols[_0x51d708(0x359)](_0xde3d92[_0x51d708(0x386)]))_0x48edab[_0x51d708(0x2c2)](_0xde3d92[_0x51d708(0x386)]);});if(_0x48edab[_0x492133(0x398)]==0x0)logHistory(_0x492133(0x32e),_0x492133(0x2e4));else{try{_0x26ef9d=await getTickers(_0x48edab);}catch(_0x4e5e26){logHistory('error',_0x492133(0x2f3)),logger[_0x492133(0x276)]('Error\x20details:',_0x4e5e26),proxyEmit(_0x492133(0x2ab),![]);return;}_0x2ad8d9[_0x492133(0x375)](_0x345afd=>{const _0x3627c7=_0x492133;_0x345afd['coin']!=_0x1e2c02[_0x3627c7(0x374)]?_0x26ef9d[_0x345afd['symbol']]?_0x253108=_0x345afd[_0x3627c7(0x241)]?0x1/_0x26ef9d[_0x345afd[_0x3627c7(0x386)]][_0x3627c7(0x371)]:_0x26ef9d[_0x345afd[_0x3627c7(0x386)]][_0x3627c7(0x371)]:_0x253108=0x0:_0x253108=0x1,_0x345afd['price']=formatResult(_0x253108,0x8);}),await getMarketCap(_0x2ad8d9),proxyEmit(_0x492133(0x2ab),!![]),proxyEmit(_0x492133(0x381),_0x2ad8d9);}}}function truncateTradeAmount(_0x56bf8d,_0x51b535){const _0x345774=_0x18ae9a;let _0x1864ea=0x0;try{_0x1864ea=exchange[_0x345774(0x30d)](_0x56bf8d,_0x51b535);}catch(_0x1fa6a1){}return _0x1864ea;}function checkMinimums(_0x2bc679){const _0x1c4144=_0x18ae9a;let _0xa65521=!![];const _0x49d4d1=!_0x2bc679[_0x1c4144(0x241)]?markets[_0x2bc679[_0x1c4144(0x386)]]['limits'][_0x1c4144(0x1df)]['min']:markets[_0x2bc679[_0x1c4144(0x386)]]['limits'][_0x1c4144(0x230)]['min'],_0x203d29=!_0x2bc679[_0x1c4144(0x241)]?markets[_0x2bc679['symbol']]['limits'][_0x1c4144(0x230)][_0x1c4144(0x245)]:markets[_0x2bc679['symbol']][_0x1c4144(0x1ef)]['amount']['min'],_0x1e1f6a=truncateTradeAmount(_0x2bc679[_0x1c4144(0x386)],_0x2bc679['trade']);_0x2bc679[_0x1c4144(0x2a2)]=_0x1e1f6a;if(Math['abs'](_0x1e1f6a)<_0x49d4d1)_0xa65521=![];if(Math[_0x1c4144(0x269)](_0x1e1f6a)*_0x2bc679['last']<_0x203d29)_0xa65521=![];if(_0x2bc679[_0x1c4144(0x1f0)]=='sell'){let _0x56fa7b=config[_0x1c4144(0x36b)][_0x1c4144(0x27e)](_0x2d3dad=>_0x2d3dad[_0x1c4144(0x285)]==_0x2bc679[_0x1c4144(0x285)]);if(_0x56fa7b[_0x1c4144(0x22e)]>0x0){if(Math[_0x1c4144(0x269)](_0x1e1f6a)>_0x2bc679[_0x1c4144(0x28a)]-_0x56fa7b[_0x1c4144(0x22e)])_0xa65521=![];}else{if(Math['abs'](_0x1e1f6a)>_0x2bc679['number'])_0xa65521=![];}}if(_0x2bc679[_0x1c4144(0x1f0)]==_0x1c4144(0x236)){let _0x446823=config[_0x1c4144(0x36b)][_0x1c4144(0x27e)](_0xcf123e=>_0xcf123e['coin']==config[_0x1c4144(0x374)]),_0x1e842b=currentCoins['find'](_0x5e7318=>_0x5e7318[_0x1c4144(0x285)]==config[_0x1c4144(0x374)]);if(_0x446823[_0x1c4144(0x22e)]>0x0){if(Math[_0x1c4144(0x269)](_0x1e1f6a)*_0x2bc679[_0x1c4144(0x371)]>_0x1e842b[_0x1c4144(0x28a)]-_0x446823[_0x1c4144(0x22e)])_0xa65521=![];}else{if(Math[_0x1c4144(0x269)](_0x1e1f6a)*_0x2bc679['last']>_0x1e842b['number'])_0xa65521=![];}}return _0xa65521;}async function getBalances(_0x38be34=!![]){const _0x542ba6=_0x18ae9a;if(botPaused)return;let _0x35fd41=0x0,_0x48eaf6;const _0x334e08=config['threshold'];if(config[_0x542ba6(0x34d)]&&config[_0x542ba6(0x1f9)]<0x0)await validate24hChanges();currentCoins[_0x542ba6(0x375)](_0x587054=>{const _0x952d1c=_0x542ba6;if(_0x587054[_0x952d1c(0x285)]!=config[_0x952d1c(0x374)]){let _0x2300ef=gTicker[noslash(_0x587054['symbol'])];_0x48eaf6=_0x587054[_0x952d1c(0x241)]?0x1/_0x2300ef:_0x2300ef;}else _0x48eaf6=0x1;let _0x1887ac=_0x587054[_0x952d1c(0x28a)]*_0x48eaf6;_0x35fd41+=_0x1887ac,_0x587054[_0x952d1c(0x371)]=formatResult(Number(_0x48eaf6),0x8),_0x587054['value']=_0x1887ac;}),currentCoins[_0x542ba6(0x375)](_0x49d3f0=>{const _0x33d441=_0x542ba6;let _0x239637=config[_0x33d441(0x36b)][_0x33d441(0x27e)](_0x101e50=>_0x101e50[_0x33d441(0x285)]==_0x49d3f0[_0x33d441(0x285)]),_0x458d9e=Number(_0x239637[_0x33d441(0x37f)]),_0x102e99=_0x49d3f0['value']/_0x35fd41*0x64,_0x38bc77=_0x458d9e*_0x35fd41/0x64/_0x49d3f0[_0x33d441(0x371)]-_0x49d3f0[_0x33d441(0x28a)];_0x49d3f0[_0x33d441(0x37f)]=formatResult(_0x102e99,0x3),_0x49d3f0[_0x33d441(0x32d)]=formatResult(_0x458d9e,0x3),_0x49d3f0['trade']=formatResult(_0x38bc77,0x8),_0x49d3f0[_0x33d441(0x1f0)]='',_0x49d3f0['valid']=![];if(_0x49d3f0[_0x33d441(0x285)]!=config[_0x33d441(0x374)]){if(_0x49d3f0[_0x33d441(0x37f)]>_0x458d9e)_0x49d3f0[_0x33d441(0x1f0)]=_0x33d441(0x33b),_0x49d3f0[_0x33d441(0x24e)]=checkMinimums(_0x49d3f0);else _0x49d3f0[_0x33d441(0x37f)]<_0x458d9e&&(_0x49d3f0['side']='buy',_0x49d3f0['valid']=checkMinimums(_0x49d3f0));}_0x49d3f0[_0x33d441(0x36f)]=_0x49d3f0['distribution']/_0x49d3f0[_0x33d441(0x32d)]-0x1;if(_0x49d3f0[_0x33d441(0x26c)]==_0x33d441(0x2f8)||_0x49d3f0[_0x33d441(0x26c)]==_0x33d441(0x2df))_0x49d3f0[_0x33d441(0x26c)]=_0x33d441(0x373);}),currentCoins['sort']((_0x2faa28,_0x50eecf)=>_0x2faa28[_0x542ba6(0x36f)]<_0x50eecf['delta']?0x1:_0x50eecf[_0x542ba6(0x36f)]<_0x2faa28['delta']?-0x1:0x0);const _0x203ed4=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x203ed4['eur'],'usd':_0x203ed4['usd'],'portfolio':JSON[_0x542ba6(0x365)](currentCoins),'threshold':_0x334e08},proxyEmit(_0x542ba6(0x38f),{'serverversion':serverversion,'balances':lastBalances});if(_0x38be34){if(config[_0x542ba6(0x34d)])headlessMode({'portfolio':currentCoins,'threshold':_0x334e08});else lockOrders==ORDERS[_0x542ba6(0x247)]&&!coolingDown&&notifyBalance({'portfolio':currentCoins,'threshold':_0x334e08});}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x4c00f2=getNormalizedPerformance();getStartingBalances(_0x4c00f2),emitPerformance(_0x4c00f2);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x543f25=_0x18ae9a;if(!lastBalances)return;let _0x565452=[],_0x58994d,_0x5420ff=JSON[_0x543f25(0x264)](lastBalances['portfolio']);_0x5420ff[_0x543f25(0x254)]((_0x229d5c,_0x1a10f9)=>_0x229d5c[_0x543f25(0x285)]>_0x1a10f9[_0x543f25(0x285)]?0x1:_0x1a10f9['coin']>_0x229d5c['coin']?-0x1:0x0),_0x5420ff[_0x543f25(0x375)](_0x40323a=>{const _0x481bee=_0x543f25;let _0x5178d3={'coin':_0x40323a[_0x481bee(0x285)],'number':_0x40323a[_0x481bee(0x28a)],'price':_0x40323a[_0x481bee(0x371)]};_0x565452[_0x481bee(0x2c2)](_0x5178d3);});const _0x1d2bfe=await getFiat();_0x58994d={'date':lastBalances[_0x543f25(0x2a7)][_0x543f25(0x212)]('\x20')[0x0],'eur':_0x1d2bfe[_0x543f25(0x2ec)],'usd':_0x1d2bfe[_0x543f25(0x214)],'coins':_0x565452};let _0x33f4d8=dbPerformance[_0x543f25(0x235)](_0x543f25(0x1dd))['find']({'date':_0x58994d[_0x543f25(0x38d)]})[_0x543f25(0x332)]();_0x33f4d8?_0x58994d['date']!=config[_0x543f25(0x392)]&&dbPerformance[_0x543f25(0x235)](_0x543f25(0x1dd))[_0x543f25(0x27e)]({'date':_0x58994d[_0x543f25(0x38d)]})[_0x543f25(0x1da)](_0x58994d)[_0x543f25(0x333)]():dbPerformance[_0x543f25(0x235)]('data')['push'](_0x58994d)[_0x543f25(0x333)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x180c01=_0x18ae9a;let _0x1687a0=[];if(dbPerformance[_0x180c01(0x316)](_0x180c01(0x1dd))[_0x180c01(0x332)]()){let _0x537755=dbPerformance[_0x180c01(0x235)](_0x180c01(0x1dd))[_0x180c01(0x2d9)]()[_0x180c01(0x24a)](_0x11044c=>{const _0x41f4b0=_0x180c01;if(_0x11044c[_0x41f4b0(0x263)][_0x41f4b0(0x398)]==0x0)return![];else return!![];})[_0x180c01(0x2dd)](_0x180c01(0x38d))[_0x180c01(0x332)](),_0x14345e=[...config[_0x180c01(0x312)]];_0x14345e['sort']((_0x50f0ce,_0x174723)=>_0x50f0ce[_0x180c01(0x38d)]>_0x174723[_0x180c01(0x38d)]?-0x1:_0x174723['date']>_0x50f0ce['date']?0x1:0x0);let _0x359aab=0x1,_0x18bee3=[],_0x8e071c=0x0;_0x537755[_0x180c01(0x38b)]()[_0x180c01(0x241)]()[_0x180c01(0x375)]((_0x40de54,_0x1302b4)=>{const _0x5e1f05=_0x180c01;if(_0x14345e[_0x8e071c]){if(_0x537755[_0x537755[_0x5e1f05(0x398)]-_0x1302b4]&&_0x14345e[_0x8e071c][_0x5e1f05(0x38d)]==_0x537755[_0x537755[_0x5e1f05(0x398)]-_0x1302b4]['date']){if(_0x1302b4<_0x537755[_0x5e1f05(0x398)]){let _0x593af6=0x0,_0x440faf=0x0;_0x537755[_0x537755[_0x5e1f05(0x398)]-_0x1302b4][_0x5e1f05(0x263)][_0x5e1f05(0x375)](_0x159c2a=>{const _0x551af5=_0x5e1f05;_0x440faf+=_0x159c2a['number']*_0x159c2a[_0x551af5(0x388)];}),_0x14345e[_0x8e071c][_0x5e1f05(0x2d5)][_0x5e1f05(0x375)](_0x210fba=>{const _0x35f8e5=_0x5e1f05;_0x593af6+=_0x210fba[_0x35f8e5(0x28a)]*_0x210fba['price'];}),_0x359aab*=_0x593af6/(_0x440faf-_0x593af6)+0x1;}_0x8e071c++;}}let _0x4d8de8=0x0;_0x40de54[_0x5e1f05(0x263)]['forEach'](_0x504b90=>{_0x4d8de8+=_0x504b90['number']*_0x504b90['price'];}),_0x18bee3[_0x537755[_0x5e1f05(0x398)]-_0x1302b4-0x1]=_0x4d8de8*(_0x359aab-0x1);});let _0xde6aeb=[];_0x14345e=[...config[_0x180c01(0x312)]]||[];let _0x809a78=0x0;_0x8e071c=0x0,_0x537755[_0x180c01(0x375)]((_0x1def90,_0x1ee972)=>{const _0x3e10e5=_0x180c01;if(_0x14345e[_0x8e071c]){const _0x227bc6=fns['parse'](_0x14345e[_0x8e071c][_0x3e10e5(0x38d)],_0x3e10e5(0x391),new Date()),_0x177d8=fns[_0x3e10e5(0x264)](_0x1def90[_0x3e10e5(0x38d)],_0x3e10e5(0x391),new Date());if(fns[_0x3e10e5(0x2e1)](_0x227bc6,_0x177d8)){let _0x5bd648=0x0;_0x14345e[_0x8e071c][_0x3e10e5(0x2d5)]['forEach'](_0x14f5d0=>{const _0x2b222a=_0x3e10e5;!_0xde6aeb[_0x14f5d0[_0x2b222a(0x285)]]?_0xde6aeb[_0x14f5d0[_0x2b222a(0x285)]]=_0x14f5d0[_0x2b222a(0x28a)]:(_0x5bd648=_0xde6aeb[_0x14f5d0[_0x2b222a(0x285)]],_0xde6aeb[_0x14f5d0[_0x2b222a(0x285)]]+=_0x14f5d0[_0x2b222a(0x28a)]);const _0x3af9ef=_0x1def90[_0x2b222a(0x263)][_0x2b222a(0x27e)](_0x2b2b62=>_0x2b2b62[_0x2b222a(0x285)]==_0x14f5d0[_0x2b222a(0x285)]);(!_0x3af9ef||_0x3af9ef[_0x2b222a(0x28a)]==0x0)&&(_0x809a78+=(-_0x14f5d0[_0x2b222a(0x28a)]-_0x5bd648)*_0x14f5d0[_0x2b222a(0x388)]);}),_0x8e071c++;}}_0x1def90[_0x3e10e5(0x263)]['forEach']((_0x208f82,_0x38a0e5)=>{const _0x4cb215=_0x3e10e5;_0xde6aeb[_0x208f82[_0x4cb215(0x285)]]&&(_0x208f82[_0x4cb215(0x23a)]=_0xde6aeb[_0x208f82[_0x4cb215(0x285)]]);}),_0x1687a0[_0x3e10e5(0x2c2)]({'date':_0x1def90[_0x3e10e5(0x38d)],'eur':_0x1def90[_0x3e10e5(0x2ec)],'usd':_0x1def90[_0x3e10e5(0x214)],'offset':_0x18bee3[_0x1ee972],'netoffset':_0x809a78,'coins':_0x1def90[_0x3e10e5(0x263)]});});}return _0x1687a0;}function emitPerformance(_0xb7e152){const _0x4e3598=_0x18ae9a;_0xb7e152[_0x4e3598(0x398)]!==0x0?(proxyEmit(_0x4e3598(0x1ec),_0xb7e152),lastPerformanceEmitted=getDate()):proxyEmit('performance',[]);}function getPerf(_0x42eaf6,_0x2b3815){const _0xadea0f=_0x18ae9a;let _0x57970d=0x0,_0x52910a=0x0,_0x7000a7=0x0;_0x42eaf6[_0xadea0f(0x263)]['forEach'](_0x9fb82f=>{const _0x2ce4a8=_0xadea0f;_0x57970d+=_0x9fb82f[_0x2ce4a8(0x28a)]*_0x9fb82f[_0x2ce4a8(0x388)];});_0x2b3815&&(_0x57970d+=_0x42eaf6[_0xadea0f(0x22e)]);if(config[_0xadea0f(0x374)]==='BTC'||config[_0xadea0f(0x374)]==='ETH'||config[_0xadea0f(0x374)]==='PAXG')_0x52910a=_0x57970d*_0x42eaf6[_0xadea0f(0x2ec)],_0x7000a7=_0x57970d*_0x42eaf6[_0xadea0f(0x214)];else{if(usdBasecoins[_0xadea0f(0x359)](config[_0xadea0f(0x374)]))_0x52910a=_0x57970d*_0x42eaf6['eur']/_0x42eaf6['usd'],_0x7000a7=_0x57970d;else config[_0xadea0f(0x374)]===_0xadea0f(0x2ce)&&(_0x52910a=_0x57970d,_0x7000a7=_0x57970d*_0x42eaf6[_0xadea0f(0x214)]/_0x42eaf6['eur']);}return[_0x57970d,_0x52910a,_0x7000a7];}function getKPIs(_0xce8399,_0x84519c=_0x18ae9a(0x2ce)){const _0x3a7ec2=_0x18ae9a,_0x3c2642=config[_0x3a7ec2(0x374)],_0x372a56=lastBalances,_0x50be3a=currentCoins,_0x2e5715=getNormalizedPerformance(),_0x51af77=_0xce8399==='basecoin'?_0x3c2642:_0xce8399===_0x3a7ec2(0x384)||_0xce8399===_0x3a7ec2(0x343)?_0x84519c:_0x3a7ec2(0x2c6)+_0x3c2642,_0x52814b=_0xce8399===_0x3a7ec2(0x21b)?_0x3a7ec2(0x305):_0xce8399===_0x3a7ec2(0x343)?_0x3a7ec2(0x305):_0x51af77+'\x20value',_0x11a3b1=_0xce8399===_0x3a7ec2(0x21b)||_0xce8399==='net-fiat'?_0x3a7ec2(0x305):_0x51af77+_0x3a7ec2(0x2ef);let _0xa1cbcf=0x0;_0x50be3a[_0x3a7ec2(0x375)](_0x5f1d7d=>{const _0x662421=_0x3a7ec2;_0xa1cbcf+=_0x5f1d7d[_0x662421(0x28a)]*_0x5f1d7d['last'];});if(_0xce8399===_0x3a7ec2(0x384)||_0xce8399===_0x3a7ec2(0x343)){if(_0x3c2642===_0x3a7ec2(0x205)||_0x3c2642===_0x3a7ec2(0x33c)||_0x3c2642===_0x3a7ec2(0x1fe))_0xa1cbcf=_0xa1cbcf*(_0x84519c==='EUR'?_0x372a56[_0x3a7ec2(0x2ec)]:_0x372a56[_0x3a7ec2(0x214)]);else{if(usdBasecoins[_0x3a7ec2(0x359)](_0x3c2642))_0xa1cbcf=_0xa1cbcf*(_0x84519c==='EUR'?_0x372a56[_0x3a7ec2(0x2ec)]/_0x372a56['usd']:0x1);else _0x3c2642===_0x3a7ec2(0x2ce)&&(_0xa1cbcf=_0xa1cbcf*(_0x84519c==='EUR'?0x1:_0x372a56[_0x3a7ec2(0x214)]/_0x372a56['eur']));}}let _0x3b5065;if(_0xa1cbcf!==0x0){if(_0xce8399===_0x3a7ec2(0x374))_0x3b5065=(_0xa1cbcf/startingBalances[_0x3a7ec2(0x374)]-0x1)*0x64;else{if(_0x84519c===_0x3a7ec2(0x2ce))_0x3b5065=(_0xa1cbcf/startingBalances[_0x3a7ec2(0x2ec)]-0x1)*0x64;else _0x3b5065=(_0xa1cbcf/startingBalances[_0x3a7ec2(0x214)]-0x1)*0x64;}let _0x37abdd=0x0;if(startingBalances[_0x3a7ec2(0x263)])_0x50be3a['forEach'](_0x1210ac=>{const _0x5cd8bf=_0x3a7ec2;let _0x2585dd=startingBalances[_0x5cd8bf(0x263)][_0x5cd8bf(0x27e)](_0x343f9b=>_0x343f9b['coin']===_0x1210ac[_0x5cd8bf(0x285)]);if(_0x2585dd&&_0x2585dd[_0x5cd8bf(0x285)]&&_0x1210ac[_0x5cd8bf(0x28a)]!==0x0)_0x37abdd+=_0x2585dd[_0x5cd8bf(0x28a)]*_0x1210ac[_0x5cd8bf(0x371)];});let _0x3be455=0x0;if(_0x2e5715[_0x3a7ec2(0x398)]!==0x0){let _0x2df09a=_0x2e5715[_0x2e5715[_0x3a7ec2(0x398)]-0x1];_0x3be455=_0x2df09a[_0x3a7ec2(0x266)];}_0x37abdd-=_0x3be455;_0xce8399===_0x3a7ec2(0x21b)&&(_0x3b5065=(_0xa1cbcf-_0x37abdd)/startingBalances['basecoin']*0x64,_0xa1cbcf=_0xa1cbcf-_0x37abdd);if(_0xce8399===_0x3a7ec2(0x343)){let _0x30d8f9=_0x84519c==='EUR'?startingBalances[_0x3a7ec2(0x2ec)]:startingBalances[_0x3a7ec2(0x214)];if(_0x3c2642===_0x3a7ec2(0x205)||_0x3c2642===_0x3a7ec2(0x33c)||_0x3c2642===_0x3a7ec2(0x1fe))_0x37abdd=_0x84519c===_0x3a7ec2(0x2ce)?_0x37abdd*_0x372a56[_0x3a7ec2(0x2ec)]:_0x37abdd*_0x372a56[_0x3a7ec2(0x214)];else{if(usdBasecoins['includes'](_0x3c2642))_0x37abdd=_0x84519c===_0x3a7ec2(0x2ce)?_0x37abdd*_0x372a56[_0x3a7ec2(0x2ec)]/_0x372a56[_0x3a7ec2(0x214)]:_0x37abdd;else _0x3c2642==='EUR'&&(_0x37abdd=_0x84519c===_0x3a7ec2(0x2ce)?_0x37abdd:_0x37abdd*_0x372a56[_0x3a7ec2(0x214)]/_0x372a56[_0x3a7ec2(0x2ec)]);}_0x3b5065=(_0xa1cbcf-_0x37abdd)/_0x30d8f9*0x64,_0xa1cbcf=_0xa1cbcf-_0x37abdd;}if(_0x3b5065){if(_0x3b5065<0x64)_0x3b5065=_0x3b5065['toFixed'](0x2);else{if(_0x3b5065<0x3e8)_0x3b5065=_0x3b5065[_0x3a7ec2(0x298)](0x1);else _0x3b5065=_0x3b5065['toFixed'](0x0);}}else _0x3b5065=Number('0')[_0x3a7ec2(0x298)](0x2);if(_0xa1cbcf){if(Math[_0x3a7ec2(0x269)](_0xa1cbcf)<0.000001)_0xa1cbcf=_0xa1cbcf[_0x3a7ec2(0x298)](0x2);else{if(Math[_0x3a7ec2(0x269)](_0xa1cbcf)<0.1)_0xa1cbcf=_0xa1cbcf[_0x3a7ec2(0x298)](0x6);else{if(Math[_0x3a7ec2(0x269)](_0xa1cbcf)<0x1)_0xa1cbcf=_0xa1cbcf['toFixed'](0x5);else{if(Math[_0x3a7ec2(0x269)](_0xa1cbcf)<0xa)_0xa1cbcf=_0xa1cbcf['toFixed'](0x4);else{if(Math['abs'](_0xa1cbcf)<0x64)_0xa1cbcf=_0xa1cbcf[_0x3a7ec2(0x298)](0x3);else{if(Math[_0x3a7ec2(0x269)](_0xa1cbcf)<0x3e8)_0xa1cbcf=_0xa1cbcf[_0x3a7ec2(0x298)](0x2);else _0xa1cbcf=_0xa1cbcf['toFixed'](0x2);}}}}}}else _0xa1cbcf=Number('0')[_0x3a7ec2(0x298)](0x2);}else _0x3b5065=Number('0')[_0x3a7ec2(0x298)](0x2);return{'value':_0xa1cbcf,'change':_0x3b5065,'leftTxt':_0x52814b,'rightTxt':_0x11a3b1};}async function getStartingBalances(_0x510c0f,_0x3fa87b=!![]){const _0x46d2ce=_0x18ae9a;if(_0x510c0f['length']!==0x0){const [_0x22b6be,_0x1a1ec3,_0xfb35d]=getPerf(_0x510c0f[0x0],!![]);let _0x311564=[];config[_0x46d2ce(0x36b)][_0x46d2ce(0x375)](_0x4f100b=>{const _0x55f8a8=_0x46d2ce;let _0x1ac0c6=0x0,_0x32b183;config[_0x55f8a8(0x312)]['forEach'](_0xe95906=>{const _0x360168=_0x55f8a8;let _0x4d16a2=_0xe95906[_0x360168(0x2d5)]['find'](_0x32b5d7=>_0x32b5d7['coin']==_0x4f100b[_0x360168(0x285)]);if(_0x4d16a2){_0x1ac0c6+=_0x4d16a2['number'];if(!_0x32b183)_0x32b183=_0x4d16a2['price'];}}),_0x311564[_0x55f8a8(0x2c2)]({'coin':_0x4f100b['coin'],'number':_0x1ac0c6,'initialprice':_0x32b183});});const _0xe73630={'basecoin':_0x22b6be,'eur':_0x1a1ec3,'usd':_0xfb35d,'coins':_0x311564};if(_0x3fa87b)proxyEmit(_0x46d2ce(0x2fc),_0xe73630);startingBalances=_0xe73630;}}function headlessMode(_0x51bf55){const _0x230e27=_0x18ae9a;let _0x2b6cf6=_0x51bf55['portfolio'],_0x2aab77=_0x51bf55[_0x230e27(0x258)],_0x8a546a=[];for(let _0x39375b of _0x2b6cf6){if(_0x39375b[_0x230e27(0x285)]!=config[_0x230e27(0x374)]){if(_0x39375b[_0x230e27(0x36f)]>=_0x2aab77/0x64){if(_0x39375b[_0x230e27(0x24e)])_0x8a546a[_0x230e27(0x2c2)](_0x39375b);}else{if(_0x39375b[_0x230e27(0x36f)]<=-_0x2aab77/0x64){if(_0x39375b[_0x230e27(0x24e)])_0x8a546a[_0x230e27(0x2c2)](_0x39375b);}}}}_0x8a546a[_0x230e27(0x398)]>0x0&&placeOrder(_0x8a546a);}function notifyBalance(_0x534b48){const _0x5063fc=_0x18ae9a;let _0x323b51=_0x534b48[_0x5063fc(0x36b)],_0x5135b9=_0x534b48[_0x5063fc(0x258)],_0x363b56=[];for(let _0x11e911 of _0x323b51){if(_0x11e911[_0x5063fc(0x285)]!=config['basecoin']){if(_0x11e911[_0x5063fc(0x36f)]>=_0x5135b9/0x64){if(_0x11e911[_0x5063fc(0x24e)])_0x363b56[_0x5063fc(0x2c2)](_0x11e911);}else{if(_0x11e911['delta']<=-_0x5135b9/0x64){if(_0x11e911[_0x5063fc(0x24e)])_0x363b56[_0x5063fc(0x2c2)](_0x11e911);}}}}if(_0x363b56['length']>0x0){let _0x3696ee=_0x363b56['map'](_0x49cb1a=>_0x49cb1a[_0x5063fc(0x285)]);_0x3696ee[_0x5063fc(0x254)]();let _0x426c74=_0x3696ee['join'](',\x20');if(!lastCoinsToBalance)logHistory(_0x5063fc(0x1ed),_0x5063fc(0x246));lastCoinsToBalance=_0x426c74;}}function symbolToCoin(_0x11711e){const _0x144120=_0x18ae9a;let _0x1ac52f;if(_0x11711e['includes']('/'+config[_0x144120(0x374)]))_0x1ac52f=_0x11711e['replace']('/'+config[_0x144120(0x374)],'');if(_0x11711e[_0x144120(0x359)](config[_0x144120(0x374)]+'/'))_0x1ac52f=_0x11711e[_0x144120(0x370)](config[_0x144120(0x374)]+'/','');return _0x1ac52f;}function setLockOrders(_0x4c6df9){const _0x3e88fc=_0x18ae9a;lockOrders=_0x4c6df9,logger[_0x3e88fc(0x276)](_0x3e88fc(0x1f8)+Object[_0x3e88fc(0x39a)](ORDERS)[lockOrders]);}async function unlockOrders(_0x14ad55=![]){const _0x1ea920=_0x18ae9a;if(allOrdersPlaced&&lockOrders==ORDERS[_0x1ea920(0x329)]){setLockOrders(ORDERS['UNLOCKING']);if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);if(_0x14ad55){const _0x15f312=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x15f312,setBlockTransactionDetection(![]);}validateOrdersState=_0x1ea920(0x23a),persistOpenOrders([]),setLockOrders(ORDERS['UNLOCKED']);}}async function validateOrders(_0x18e9f5){const _0x447b3d=_0x18ae9a;if(_0x18e9f5)validateOrdersState=_0x18e9f5;logger[_0x447b3d(0x276)]('1\x20-\x20Validate\x20orders:\x20'+validateOrdersState+_0x447b3d(0x223)+Object[_0x447b3d(0x39a)](ORDERS)[lockOrders]);let _0x177ee2=[],_0x5d81b3=config['ordertype']=='market'?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x447b3d(0x1eb)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x447b3d(0x329)])return;logger[_0x447b3d(0x276)]('2\x20-\x20Validate\x20orders:\x20'+validateOrdersState);for(let _0x2f53cf=lastOrders[_0x447b3d(0x398)]-0x1;_0x2f53cf>=0x0;_0x2f53cf--){let _0x14edf9=lastOrders[_0x2f53cf],_0x55b953=![];_0x14edf9[_0x447b3d(0x2f8)]>0x0&&(_0x55b953=!![]),_0x177ee2[_0x447b3d(0x2c2)](_0x55b953),_0x55b953&&config[_0x447b3d(0x237)]!='market'&&logHistory(_0x447b3d(0x387),_0x447b3d(0x1f5)+_0x14edf9[_0x447b3d(0x386)]+'\x20'+_0x14edf9[_0x447b3d(0x1f0)]+'\x20#'+formatResult(_0x14edf9[_0x447b3d(0x2f8)],0x8)+'\x20@'+formatResult(_0x14edf9['price'],0x8)),_0x55b953&&lastOrders['splice'](_0x2f53cf,0x1);}persistOpenOrders(lastOrders);const _0x123c7b=coolingDown?_0x447b3d(0x207):_0x447b3d(0x274);if(validateOrdersState==_0x447b3d(0x23a)){validateOrdersState=_0x447b3d(0x21d);if(_0x177ee2[_0x447b3d(0x359)](![])){}else await unlockOrders();}else{if(validateOrdersState==_0x447b3d(0x21d)){if(_0x177ee2[_0x447b3d(0x359)](![])){}else await unlockOrders();}else{if(validateOrdersState==_0x447b3d(0x322))_0x177ee2['includes'](![])&&(config[_0x447b3d(0x237)]=='market'?logHistory('success',_0x447b3d(0x2ff)+Math[_0x447b3d(0x30c)](_0x5d81b3*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x123c7b):(await cancelOrders(),logHistory(_0x447b3d(0x368),_0x447b3d(0x282)+Math[_0x447b3d(0x30c)](_0x5d81b3*validateOrderInterval/0xea60)+_0x447b3d(0x396)+_0x123c7b))),await unlockOrders(!![]);else{if(validateOrdersState==_0x447b3d(0x2f2)){if(config[_0x447b3d(0x237)]!='market')logHistory('success',_0x447b3d(0x346)+_0x123c7b);await unlockOrders(!![]);}}}}}async function cancelOrders(){const _0x329091=_0x18ae9a;lastOrders[_0x329091(0x375)](async _0xa00fab=>{const _0x153bb1=_0x329091;try{const _0x57d209=await exchange[_0x153bb1(0x36d)](_0xa00fab['orderId'],_0xa00fab[_0x153bb1(0x386)]);}catch(_0x438da9){if(_0x438da9[_0x153bb1(0x243)]()[_0x153bb1(0x359)](_0x153bb1(0x202))){}else await handleError(_0x438da9,'cancelOrders()');}});}async function initCoinResults(_0x480f98){const _0x428725=_0x18ae9a;_0x480f98?logger['debug']('Resetting\x20coin\x20results:\x20'+_0x480f98):logger[_0x428725(0x276)](_0x428725(0x268)),config['portfolio']['forEach'](_0x9a730a=>{const _0x46c259=_0x428725;if(!_0x9a730a['excluded']&&_0x9a730a[_0x46c259(0x285)]!=config[_0x46c259(0x374)]){const _0x3740d1=currentCoins[_0x46c259(0x27e)](_0x396144=>_0x396144[_0x46c259(0x285)]==_0x9a730a[_0x46c259(0x285)]),_0x212e83=gTicker[noslash(_0x9a730a[_0x46c259(0x386)])];let _0x5b90ac=_0x3740d1?_0x3740d1[_0x46c259(0x28a)]:null,_0x405a38=_0x9a730a[_0x46c259(0x241)]?0x1/_0x212e83:_0x212e83,_0x40733d;config[_0x46c259(0x312)][_0x46c259(0x375)](_0x25af3e=>{const _0x38ec8f=_0x46c259;!_0x40733d&&(_0x40733d=_0x25af3e['changes'][_0x38ec8f(0x27e)](_0x2e851d=>_0x2e851d['coin']==_0x9a730a[_0x38ec8f(0x285)]),_0x40733d&&(_0x5b90ac=_0x40733d[_0x38ec8f(0x28a)],_0x405a38=_0x40733d[_0x38ec8f(0x388)]));});let _0x657413=dbCoinResults[_0x46c259(0x235)](_0x46c259(0x263))['find']({'coin':_0x9a730a[_0x46c259(0x285)]})[_0x46c259(0x332)]();if(!_0x657413){const _0x3af623={'coin':_0x9a730a['coin'],'number':_0x5b90ac,'breakeven':_0x405a38,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x46c259(0x235)](_0x46c259(0x263))['push'](_0x3af623)[_0x46c259(0x333)]();}else{if(_0x480f98&&_0x9a730a[_0x46c259(0x285)]==_0x480f98){const _0x25a4d4={'coin':_0x9a730a[_0x46c259(0x285)],'number':_0x5b90ac,'breakeven':_0x405a38,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x46c259(0x235)]('coins')[_0x46c259(0x27e)]({'coin':_0x9a730a['coin']})['assign'](_0x25a4d4)[_0x46c259(0x333)]();}}}});}async function updateCoinResults(_0x2d48a1,_0x1c65fe=![]){const _0xabc882=_0x18ae9a;let _0x57cbd0,_0x57eb08,_0x2d989c,_0x16320b,_0x2b2c5a,_0x4cfdd,_0x102b35=dbCoinResults['get'](_0xabc882(0x263))[_0xabc882(0x27e)]({'coin':_0x2d48a1[_0xabc882(0x285)]})['value'](),_0x14d9cf=![];_0x102b35&&Object[_0xabc882(0x2e3)](_0x102b35)[_0xabc882(0x375)](([_0x127632,_0x4459ed])=>{if(_0x4459ed==null)_0x14d9cf=!![];});(!_0x102b35||_0x14d9cf)&&(await initCoinResults(_0x2d48a1['coin']),_0x102b35=dbCoinResults[_0xabc882(0x235)](_0xabc882(0x263))[_0xabc882(0x27e)]({'coin':_0x2d48a1[_0xabc882(0x285)]})[_0xabc882(0x332)]());_0x2d48a1[_0xabc882(0x241)]&&(_0x4cfdd={'filled':_0x2d48a1[_0xabc882(0x2f8)]*_0x2d48a1['price'],'amount':_0x2d48a1[_0xabc882(0x2f8)]*_0x2d48a1[_0xabc882(0x388)],'side':_0x2d48a1['side']=='sell'?_0xabc882(0x236):_0xabc882(0x33b),'price':0x1/_0x2d48a1[_0xabc882(0x388)]},_0x2d48a1={..._0x2d48a1,..._0x4cfdd});_0x1c65fe?_0x57eb08=_0x2d48a1['side']==_0xabc882(0x236)?_0x102b35['number']+_0x2d48a1[_0xabc882(0x2f8)]:_0x102b35[_0xabc882(0x28a)]-_0x2d48a1['filled']:_0x57eb08=await getCoinNumber(_0x2d48a1[_0xabc882(0x285)]);if(_0x2d48a1[_0xabc882(0x2be)]&&_0x2d48a1[_0xabc882(0x2be)][_0xabc882(0x306)]==config[_0xabc882(0x374)])_0x57cbd0=Number(_0x2d48a1[_0xabc882(0x2be)][_0xabc882(0x230)]);else{if(_0x2d48a1[_0xabc882(0x2be)]&&_0x2d48a1[_0xabc882(0x2be)][_0xabc882(0x306)]==_0xabc882(0x26d)&&!_0x1c65fe&&config[_0xabc882(0x374)]!='PAXG')_0x57cbd0=Number(_0x2d48a1[_0xabc882(0x2be)]['cost'])*gTicker[_0xabc882(0x26d)+config['basecoin']];else _0x57cbd0=defaultFee*_0x2d48a1[_0xabc882(0x2f8)]*_0x2d48a1[_0xabc882(0x388)];}_0x2d48a1['side']==_0xabc882(0x236)?(_0x2d989c=_0x57eb08!=0x0?(_0x102b35['breakeven']*_0x102b35[_0xabc882(0x28a)]+_0x2d48a1[_0xabc882(0x388)]*(_0x57eb08-_0x102b35['number'])+_0x57cbd0)/_0x57eb08:0x0,_0x16320b=_0x102b35[_0xabc882(0x315)]):(_0x2d989c=_0x57eb08!=0x0?(_0x102b35[_0xabc882(0x2ed)]*_0x102b35[_0xabc882(0x28a)]-_0x2d48a1['price']*(_0x102b35[_0xabc882(0x28a)]-_0x57eb08)+_0x57cbd0)/_0x57eb08:0x0,_0x16320b=_0x102b35[_0xabc882(0x315)]+(_0x2d48a1[_0xabc882(0x388)]-_0x102b35[_0xabc882(0x2ed)])*_0x2d48a1[_0xabc882(0x2f8)]);_0x2b2c5a=(_0x2d48a1['price']-_0x2d989c-_0x57cbd0/_0x2d48a1['filled'])*_0x57eb08;let _0x1b487f={'coin':_0x2d48a1[_0xabc882(0x285)],'number':_0x57eb08,'breakeven':formatResult(_0x2d989c,0x8),'realized':formatResult(_0x16320b,0x8),'unrealized':formatResult(_0x2b2c5a,0x8),'fees':formatResult(_0x102b35[_0xabc882(0x217)]+_0x57cbd0,0x8),'sells':_0x2d48a1['side']=='sell'?_0x102b35[_0xabc882(0x3a1)]+0x1:_0x102b35[_0xabc882(0x3a1)],'buys':_0x2d48a1[_0xabc882(0x1f0)]==_0xabc882(0x236)?_0x102b35[_0xabc882(0x2b3)]+0x1:_0x102b35[_0xabc882(0x2b3)]};dbCoinResults[_0xabc882(0x235)](_0xabc882(0x263))[_0xabc882(0x27e)]({'coin':_0x2d48a1[_0xabc882(0x285)]})[_0xabc882(0x1da)](_0x1b487f)['write']();if(!_0x1c65fe){if(_0x2d48a1[_0xabc882(0x2be)]&&_0x2d48a1[_0xabc882(0x2be)][_0xabc882(0x306)]==_0xabc882(0x26d)){const _0x409969=currentCoins[_0xabc882(0x27e)](_0x36d8f4=>_0x36d8f4['coin']=='BNB');if(_0x409969){let _0x3fa927=dbCoinResults[_0xabc882(0x235)](_0xabc882(0x263))['find']({'coin':_0xabc882(0x26d)})[_0xabc882(0x332)]();_0x1b487f={..._0x3fa927,'number':_0x409969['number']},dbCoinResults[_0xabc882(0x235)](_0xabc882(0x263))[_0xabc882(0x27e)]({'coin':_0xabc882(0x26d)})[_0xabc882(0x1da)](_0x1b487f)['write']();}}}}async function placeOrder(_0x92cfd4){const _0x2d9a51=_0x18ae9a,_0xc0b18e=config[_0x2d9a51(0x237)]=='market'?_0x2d9a51(0x279):'limit';if(lockOrders==ORDERS[_0x2d9a51(0x247)]&&!coolingDown){setLockOrders(ORDERS[_0x2d9a51(0x329)]);while(transactionDetectionOngoing){await sleep(0x64);}logger[_0x2d9a51(0x276)](_0x2d9a51(0x283)+_0x92cfd4[_0x2d9a51(0x26b)](_0x11628d=>_0x11628d[_0x2d9a51(0x285)])['join'](',\x20')),lastCoinsToBalance='',allOrdersPlaced=![],validateOrdersState='initial';let _0x26af82=![];lastOrders=[];const _0x253590=config[_0x2d9a51(0x258)];for(const _0x9668c1 of _0x92cfd4){let _0x4221f5,_0xd2c4f9,_0x1f6724,_0x51887c,_0x1524a6,_0x50cef1=_0x9668c1[_0x2d9a51(0x386)];logger[_0x2d9a51(0x276)](_0x2d9a51(0x20d)+_0x9668c1['coin']+'\x20'+_0x9668c1['number']+'\x20'+_0x9668c1[_0x2d9a51(0x371)]+'\x20'+_0x9668c1[_0x2d9a51(0x37f)]+'%\x20'+_0x9668c1[_0x2d9a51(0x32d)]+'%\x20'+(0x64*_0x9668c1[_0x2d9a51(0x36f)])[_0x2d9a51(0x298)](0x2)+'%\x20('+_0x253590[_0x2d9a51(0x298)](0x2)+'%)');const _0x22f050=currentCoins['find'](_0x177644=>_0x177644['coin']==_0x9668c1[_0x2d9a51(0x285)]);_0x22f050&&(_0x22f050[_0x2d9a51(0x20a)]=_0x9668c1[_0x2d9a51(0x28a)]);try{const _0x4740dc=await exchange[_0x2d9a51(0x21f)](_0x50cef1);_0x4221f5=_0x9668c1['reverse']?0x1/_0x9668c1['last']:_0x9668c1[_0x2d9a51(0x371)],_0xd2c4f9=_0x4740dc[_0x2d9a51(0x2c8)],_0x1f6724=_0x4740dc[_0x2d9a51(0x287)];_0x9668c1[_0x2d9a51(0x241)]?(_0x51887c=_0x9668c1[_0x2d9a51(0x1f0)]==_0x2d9a51(0x236)?_0x2d9a51(0x33b):_0x2d9a51(0x236),_0x1524a6=Math[_0x2d9a51(0x269)](_0x9668c1[_0x2d9a51(0x2a2)])/_0x4221f5):(_0x51887c=_0x9668c1[_0x2d9a51(0x1f0)],_0x1524a6=Math['abs'](_0x9668c1[_0x2d9a51(0x2a2)]));_0xc0b18e==_0x2d9a51(0x31f)&&(config[_0x2d9a51(0x237)]==_0x2d9a51(0x348)&&(_0x4221f5=_0x51887c==_0x2d9a51(0x236)?_0xd2c4f9:_0x1f6724),config[_0x2d9a51(0x237)]=='limit-low'&&(_0x4221f5=_0x51887c=='buy'?_0x1f6724:_0xd2c4f9));_0x1524a6=formatResult(_0x1524a6,0x8),_0x4221f5=formatResult(_0x4221f5,0x8);const _0x2fdd38=_0x51887c==_0x2d9a51(0x33b)?config[_0x2d9a51(0x2d2)]?String['fromCodePoint']('0x'+config[_0x2d9a51(0x2d2)])+'\x20':'':config[_0x2d9a51(0x300)]?String['fromCodePoint']('0x'+config['emojibuy'])+'\x20':'',_0x5ab3cb=_0xc0b18e=='market'?'Market':config[_0x2d9a51(0x237)]=='limit-high'?_0x2d9a51(0x27a):_0x2d9a51(0x286),_0x579a13=(Math[_0x2d9a51(0x34c)](Math[_0x2d9a51(0x39c)]()*0x35a4e900)+0x5f5e100)[_0x2d9a51(0x243)]();lastOrders[_0x2d9a51(0x2c2)]({'customId':_0x579a13,'symbol':_0x50cef1,'coin':_0x9668c1[_0x2d9a51(0x285)],'amount':_0x1524a6,'price':_0x4221f5,'side':_0x51887c,'reverse':_0x9668c1[_0x2d9a51(0x241)],'filled':0x0});if(_0xc0b18e==_0x2d9a51(0x279))logHistory(_0x2d9a51(0x387),''+_0x2fdd38+_0x5ab3cb+_0x2d9a51(0x309)+_0x50cef1+'\x20'+_0x51887c+'\x20#'+formatResult(_0x1524a6,0x8)+'\x20@'+formatResult(_0x4221f5,0x8));else logHistory(_0x2d9a51(0x387),''+_0x2fdd38+_0x5ab3cb+'\x20order:\x20'+_0x50cef1+'\x20'+_0x51887c+'\x20#'+formatResult(_0x1524a6,0x8)+'\x20@'+formatResult(_0x4221f5,0x8));let _0x3f5158;_0xc0b18e==_0x2d9a51(0x279)?_0x51887c==_0x2d9a51(0x236)&&[_0x2d9a51(0x2e8),_0x2d9a51(0x215),_0x2d9a51(0x261),_0x2d9a51(0x320),_0x2d9a51(0x216)][_0x2d9a51(0x359)](config[_0x2d9a51(0x2af)])?_0x3f5158=await exchange[_0x2d9a51(0x37c)](_0x50cef1,_0xc0b18e,_0x51887c,_0x1524a6,_0x4221f5):_0x3f5158=await exchange['createOrder'](_0x50cef1,_0xc0b18e,_0x51887c,_0x1524a6,undefined):_0x3f5158=await exchange[_0x2d9a51(0x37c)](_0x50cef1,_0xc0b18e,_0x51887c,_0x1524a6,_0x4221f5);logger[_0x2d9a51(0x276)]('ID:\x20'+_0x3f5158['id']+_0x2d9a51(0x209)+_0x579a13);const _0x3c8a0d=lastOrders['length']-0x1;if(_0x3c8a0d>=0x0&&lastOrders[_0x3c8a0d]['customId']==_0x579a13){lastOrders[_0x3c8a0d][_0x2d9a51(0x314)]=_0x3f5158['id'];if(_0x3f5158[_0x2d9a51(0x1df)])lastOrders[_0x3c8a0d][_0x2d9a51(0x1df)]=_0x3f5158[_0x2d9a51(0x1df)];if(_0x3f5158['price'])lastOrders[_0x3c8a0d][_0x2d9a51(0x388)]=_0x3f5158[_0x2d9a51(0x388)];lastOrders[_0x3c8a0d][_0x2d9a51(0x2be)]=_0x3f5158[_0x2d9a51(0x2be)];}if(config[_0x2d9a51(0x35f)]!=0x0){let _0x166f33=null;if(cooldownTracker[_0x2d9a51(0x398)]==config[_0x2d9a51(0x35f)]-0x1)_0x166f33=cooldownTracker['shift']();const _0x1e0ccb=getTimeStamp();cooldownTracker[_0x2d9a51(0x2c2)](_0x1e0ccb);if(_0x166f33){const _0x3d1353=fns[_0x2d9a51(0x338)](new Date(_0x1e0ccb),new Date(_0x166f33));if(_0x3d1353<cooldownInterval){logHistory(_0x2d9a51(0x32e),_0x2d9a51(0x32c)+config['cooldown']+_0x2d9a51(0x291)+cooldownInterval/0x3c+_0x2d9a51(0x2f0)+cooldownPeriod/(0xe10*0x3e8)+_0x2d9a51(0x293)),coolingDown=!![];break;}}}}catch(_0x31655e){if(_0x31655e[_0x2d9a51(0x243)]()[_0x2d9a51(0x359)]('MIN_NOTIONAL'))lastOrders=lastOrders[_0x2d9a51(0x24a)](_0x357c15=>_0x357c15[_0x2d9a51(0x386)]!=_0x50cef1),logHistory(_0x2d9a51(0x32e),_0x2d9a51(0x1e7)+_0x50cef1),_0x26af82=!![];else{if(_0x31655e[_0x2d9a51(0x243)]()[_0x2d9a51(0x359)](_0x2d9a51(0x1d8)))lastOrders=lastOrders[_0x2d9a51(0x24a)](_0x14fed9=>_0x14fed9[_0x2d9a51(0x386)]!=_0x50cef1),logHistory(_0x2d9a51(0x32e),'Order\x20amount\x20is\x20invalid:\x20'+_0x50cef1),_0x26af82=!![];else{if(_0x31655e['toString']()[_0x2d9a51(0x359)](_0x2d9a51(0x36a)))lastOrders=lastOrders[_0x2d9a51(0x24a)](_0x16d05b=>_0x16d05b[_0x2d9a51(0x386)]!=_0x50cef1),logHistory(_0x2d9a51(0x32e),'Order\x20is\x20invalid:\x20'+_0x50cef1),logger[_0x2d9a51(0x276)](_0x31655e),_0x26af82=!![];else _0x31655e['toString']()[_0x2d9a51(0x359)](_0x2d9a51(0x38c))?(lastOrders=lastOrders['filter'](_0x479c41=>_0x479c41[_0x2d9a51(0x386)]!=_0x50cef1),logHistory(_0x2d9a51(0x32e),'Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x50cef1),_0x26af82=!![]):(lastOrders=lastOrders[_0x2d9a51(0x24a)](_0x5abf70=>_0x5abf70['symbol']!=_0x50cef1),await handleError(_0x31655e,'placeOrder()',_0x50cef1));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x2d9a51(0x398)]>0x0){const _0x527901=config['ordertype']==_0x2d9a51(0x279)?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x2b73ca=_0x2d9a51;validateOrders(_0x2b73ca(0x322));},_0x527901);}else unlockOrders();_0x26af82&&config[_0x2d9a51(0x34d)]&&(logHistory(_0x2d9a51(0x32e),_0x2d9a51(0x23e)+pauseBotMsg),await pauseBot(pauseBotInterval)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x2d9a51(0x368),'Cooldown\x20ended\x20-\x20balancing\x20resumed'));}else{if(coolingDown)!config[_0x2d9a51(0x34d)]&&logHistory('error',_0x2d9a51(0x227));else lockOrders!=ORDERS[_0x2d9a51(0x247)]&&(!config['headless']&&(config[_0x2d9a51(0x237)]==_0x2d9a51(0x279)?logHistory(_0x2d9a51(0x32e),_0x2d9a51(0x24c)):logHistory(_0x2d9a51(0x32e),_0x2d9a51(0x2e2))));}}function persistOpenOrders(_0x34ec2e){const _0x11b170=_0x18ae9a,_0x3a9f9f={...config,'openOrders':_0x34ec2e};let _0xea2298=dbConfig[_0x11b170(0x235)](_0x11b170(0x31e))[_0x11b170(0x27e)]({'botID':botID})[_0x11b170(0x332)]();_0xea2298&&dbConfig['get'](_0x11b170(0x31e))[_0x11b170(0x27e)]({'botID':botID})[_0x11b170(0x1da)](_0x3a9f9f)['write']();}function restoreOrders(){const _0xefdf6d=_0x18ae9a;let _0x2c7d4e;config[_0xefdf6d(0x31c)]&&allOpenOrders[_0xefdf6d(0x375)](_0x516abd=>{const _0xdf0130=_0xefdf6d,_0x28c5ce=config[_0xdf0130(0x31c)]['find'](_0x57b34f=>_0x57b34f['orderId']==_0x516abd['id']);_0x28c5ce&&(lastOrders[_0xdf0130(0x2c2)](_0x28c5ce),_0x2c7d4e=_0x516abd[_0xdf0130(0x303)]);});if(lastOrders[_0xefdf6d(0x398)]>0x0){setLockOrders(ORDERS[_0xefdf6d(0x329)]),validateOrdersState='ongoing',allOrdersPlaced=!![];const _0x4cbc05=new Date()['getTime'](),_0x2e5325=config['ordertype']==_0xefdf6d(0x279)?validateOrderTimeout*0x3c*0x3e8:config[_0xefdf6d(0x1eb)]*0x3c*0x3e8;if(_0x2c7d4e+_0x2e5325>_0x4cbc05){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x2e4bf3=_0xefdf6d;validateOrders(_0x2e4bf3(0x322));},_0x2c7d4e+_0x2e5325-_0x4cbc05);}else validateOrders(_0xefdf6d(0x322));}}async function sendMetricsTelegram(){const _0x2db9a4=_0x18ae9a;if(!coinsLoaded){process[_0x2db9a4(0x2fe)]({'telegrammsg':_0x2db9a4(0x37a)},_0x36bf81=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x328169='';if(config[_0x2db9a4(0x2a5)])_0x328169=_0x2db9a4(0x1f4)+config[_0x2db9a4(0x22a)]+_0x2db9a4(0x366);else _0x328169=_0x2db9a4(0x238)+botID+_0x2db9a4(0x366);const _0x43cf44=getKPIs(_0x2db9a4(0x374)),_0x219359=getKPIs('fiat',config[_0x2db9a4(0x384)]),_0x32e142=getKPIs(_0x2db9a4(0x21b)),_0x5449a7=getKPIs(_0x2db9a4(0x343),config[_0x2db9a4(0x384)]);_0x328169+=_0x2db9a4(0x2f6),_0x328169+=_0x43cf44[_0x2db9a4(0x250)]+_0x2db9a4(0x382)+_0x43cf44[_0x2db9a4(0x332)]+'\x0a',_0x328169+=_0x43cf44[_0x2db9a4(0x33a)]+':\x20'+_0x43cf44[_0x2db9a4(0x2fa)]+'%\x0a',_0x328169+=_0x219359[_0x2db9a4(0x250)]+_0x2db9a4(0x382)+_0x219359[_0x2db9a4(0x332)]+'\x0a',_0x328169+=_0x219359[_0x2db9a4(0x33a)]+':\x20'+_0x219359['change']+'%\x0a',_0x328169+=_0x32e142['leftTxt']+':\x20'+_0x32e142['value']+'\x20('+config[_0x2db9a4(0x374)]+')\x0a',_0x328169+=_0x32e142[_0x2db9a4(0x33a)]+':\x20'+_0x32e142['change']+_0x2db9a4(0x340)+config[_0x2db9a4(0x374)]+')\x0a',_0x328169+=_0x5449a7['leftTxt']+':\x20'+_0x5449a7[_0x2db9a4(0x332)]+'\x20('+config[_0x2db9a4(0x384)]+')\x0a',_0x328169+=_0x5449a7[_0x2db9a4(0x33a)]+':\x20'+_0x5449a7[_0x2db9a4(0x2fa)]+'%\x20('+config['fiat']+')\x0a',_0x328169+=_0x2db9a4(0x1f3),process['send']({'telegrammsg':_0x328169},_0x3bf7a5=>{});}async function sendPortfolioTelegram(){const _0x2f0f00=_0x18ae9a;if(!coinsLoaded||!currentCoins[0x0][_0x2f0f00(0x37f)]){process['send']({'telegrammsg':'Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute'},_0x1094ee=>{});return;}let _0x1aaeed='';if(config['showname'])_0x1aaeed=_0x2f0f00(0x1f4)+config[_0x2f0f00(0x22a)]+_0x2f0f00(0x2d8);else _0x1aaeed=_0x2f0f00(0x238)+botID+_0x2f0f00(0x2d8);_0x1aaeed+=_0x2f0f00(0x2f6),_0x1aaeed+=_0x2f0f00(0x2d0),_0x1aaeed+='Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a',_0x1aaeed+=_0x2f0f00(0x2d0),currentCoins[_0x2f0f00(0x375)](_0x46f63a=>{const _0x345bc0=_0x2f0f00;_0x1aaeed+=_0x46f63a[_0x345bc0(0x285)][_0x345bc0(0x21e)](0x7)+'|\x20'+formatPad(_0x46f63a[_0x345bc0(0x37f)],0x2,0x6)+'|\x20'+formatPad(_0x46f63a[_0x345bc0(0x32d)],0x2,0x6)+'|\x20'+formatPad(_0x46f63a[_0x345bc0(0x36f)]*0x64,0x2,0x6)+'\x0a';}),_0x1aaeed+='</pre>',process[_0x2f0f00(0x2fe)]({'telegrammsg':_0x1aaeed},_0x4097f7=>{});}function formatPad(_0x20861b,_0x4b42af,_0x214d96){const _0x646fc2=_0x18ae9a,_0x512bb5=formatResultString(_0x20861b,_0x4b42af);return _0x512bb5?_0x512bb5[_0x646fc2(0x360)](_0x214d96):''[_0x646fc2(0x360)](_0x214d96);}function logHistory(_0x4f4fa4,_0x32178f,_0x174b47=''){const _0x27f026=_0x18ae9a;logger[_0x27f026(0x356)](''+_0x32178f);let _0x590868={'time':getTimeStamp(),'type':_0x4f4fa4,'event':_0x32178f};dbLogs[_0x27f026(0x235)]('logs')[_0x27f026(0x2c2)](_0x590868)[_0x27f026(0x333)]();if(_0x174b47=='')_0x174b47=_0x32178f;proxyEmit(_0x27f026(0x249),{'log':_0x590868,'summary':_0x174b47}),process['send']({'telegram':{..._0x590868,'botname':config['botname'],'showname':config['showname']}},_0x108b23=>{});}function emitHistory(_0x392e4d={}){const _0x52fdd3=_0x18ae9a;Object['keys'](_0x392e4d)[_0x52fdd3(0x398)]==0x0&&(_0x392e4d={'type':[_0x52fdd3(0x387),_0x52fdd3(0x249)],'event':'','page':0x1});if(_0x392e4d[_0x52fdd3(0x24f)][_0x52fdd3(0x359)]('event'))_0x392e4d[_0x52fdd3(0x24f)][_0x52fdd3(0x393)](_0x392e4d[_0x52fdd3(0x24f)][_0x52fdd3(0x3a0)](_0x52fdd3(0x249)),0x1,'error',_0x52fdd3(0x1ed),'success');if(dbLogs[_0x52fdd3(0x316)](_0x52fdd3(0x204))[_0x52fdd3(0x332)]()){let _0x264ac1=dbLogs['get'](_0x52fdd3(0x204))[_0x52fdd3(0x24a)](_0x4a5845=>{const _0x129cdf=_0x52fdd3;if(_0x392e4d['type'][_0x129cdf(0x398)]==0x0)return![];else return _0x392e4d[_0x129cdf(0x24f)][_0x129cdf(0x359)](_0x4a5845['type']);})[_0x52fdd3(0x24a)](_0x53d066=>{const _0x2189be=_0x52fdd3;if(_0x392e4d[_0x2189be(0x249)]=='')return!![];else return _0x53d066[_0x2189be(0x249)]['toLowerCase']()['includes'](_0x392e4d[_0x2189be(0x249)][_0x2189be(0x2e5)]());})[_0x52fdd3(0x2dd)](_0x52fdd3(0x2a7)),_0x289c4e=_0x264ac1[_0x52fdd3(0x332)]()[_0x52fdd3(0x398)];_0x264ac1=_0x264ac1[_0x52fdd3(0x241)]()[_0x52fdd3(0x38b)]((_0x392e4d[_0x52fdd3(0x317)]-0x1)*logPageSize,_0x392e4d['page']*logPageSize-0x1)['reverse']()['value'](),proxyEmit(_0x52fdd3(0x2c4),{'logs':_0x264ac1,'total':_0x289c4e});}else proxyEmit(_0x52fdd3(0x2c4),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x481852){const _0x413fe6=_0x18ae9a;if(dbLogs['has'](_0x413fe6(0x204))[_0x413fe6(0x332)]()){const _0x5703e5=dbLogs[_0x413fe6(0x235)](_0x413fe6(0x204))[_0x413fe6(0x2dd)](_0x413fe6(0x2a7))['filter'](_0x26c5d8=>{const _0x478724=_0x413fe6;return _0x26c5d8[_0x478724(0x24f)]=='order';})[_0x413fe6(0x332)]();dbLogs['get']('logs')['remove']()['write'](),dbLogs[_0x413fe6(0x235)](_0x413fe6(0x204))[_0x413fe6(0x1da)](_0x5703e5)[_0x413fe6(0x333)](),emitHistory(_0x481852);}}async function pauseBot(_0x5b4a44=pauseBotIntervalShort,_0x43b53c,_0x183e54,_0x251657=![]){const _0x4b6e56=_0x18ae9a,_0x58bd00=new Date()[_0x4b6e56(0x385)]();if(!lastErrorShown||_0x58bd00-lastErrorShown>=_0x5b4a44){lastErrorShown=_0x58bd00;if(!lastBotPause)lastBotPause=_0x58bd00,consecutivePauses=0x1;else{if(_0x58bd00-lastBotPause-_0x5b4a44<0x5a*0x3e8){consecutivePauses++;if(consecutivePauses>maxPauseRetries){if(_0x251657){logHistory(_0x4b6e56(0x32e),_0x43b53c+_0x4b6e56(0x2ac)),await killBot();return;}else logHistory(_0x4b6e56(0x32e),_0x43b53c+pauseBotMsg),_0x5b4a44=pauseBotInterval;}}else consecutivePauses=0x1;lastBotPause=_0x58bd00;}_0x183e54?logger['debug']('('+consecutivePauses+')\x20'+_0x43b53c+'\x20>\x20details:',_0x183e54):logger[_0x4b6e56(0x276)]('('+consecutivePauses+')\x20'+_0x43b53c);if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);await sleep(_0x5b4a44),botPaused=![],_0x5b4a44==pauseBotIntervalShort?resumeBot(!![]):resumeBot(![]);}}}async function killBot(){const _0x267cd2=_0x18ae9a;botPaused=!![],await sleep(0x3e8),process[_0x267cd2(0x2fe)]({'stop':_0x267cd2(0x260)},_0x6d65e5=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x59321a,_0x508366,_0x2d809e=![]){const _0x227751=_0x18ae9a;if(botPaused)return;let _0x516016;const _0x5b9bf6=config[_0x227751(0x2af)]||'Exchange';if(_0x508366)logger[_0x227751(0x276)](_0x227751(0x221)+_0x508366);const _0x5b7678=()=>{const _0xf68443=_0x227751;loading[_0xf68443(0x32e)]=!![],emitLoadingProgress();};if(_0x59321a['toString']()[_0x227751(0x359)](_0x227751(0x24b)))logHistory(_0x227751(0x32e),_0x5b9bf6+_0x227751(0x399)),_0x5b7678();else{if(_0x59321a[_0x227751(0x243)]()[_0x227751(0x359)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory('error',_0x5b9bf6+_0x227751(0x1e4)),_0x5b7678();else{if(_0x59321a[_0x227751(0x243)]()[_0x227751(0x359)](_0x227751(0x2b5)))config['apiPassword']?_0x516016=_0x5b9bf6+_0x227751(0x39b):_0x516016=_0x5b9bf6+_0x227751(0x380),logHistory(_0x227751(0x32e),_0x516016+'\x20(see:\x20hodlerhacks.com/fix/1)'),_0x5b7678();else{if(_0x59321a[_0x227751(0x243)]()['includes']('PermissionDenied'))logHistory('error',_0x5b9bf6+'\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)'),_0x5b7678();else{if(!_0x2d809e)await handleError(_0x59321a,null);}}}}}async function handleError(_0x85baad,_0x31b5dc,_0x223238=''){const _0xcc02d4=_0x18ae9a;if(botPaused)return;let _0x335aa4;const _0x2004e6=config['exchange']||_0xcc02d4(0x2a4);if(_0x31b5dc)logger['debug'](_0xcc02d4(0x221)+_0x31b5dc);if(_0x85baad[_0xcc02d4(0x243)]()['includes'](_0xcc02d4(0x383)))_0x335aa4=_0x2004e6+_0xcc02d4(0x2a8),await pauseBot(undefined,_0x335aa4,_0x85baad);else{if(_0x85baad[_0xcc02d4(0x243)]()[_0xcc02d4(0x359)]('RateLimitExceeded'))_0x335aa4=_0x2004e6+'\x20blocked\x20API\x20(RateLimitExceeded)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading',await pauseBot(undefined,_0x335aa4,_0x85baad);else{if(_0x85baad[_0xcc02d4(0x243)]()[_0xcc02d4(0x359)](_0xcc02d4(0x1ff))||_0x85baad['toString']()[_0xcc02d4(0x359)](_0xcc02d4(0x280)))_0x335aa4=_0x2004e6+'\x20not\x20available\x20(see:\x20hodlerhacks.com/fix/5)',await pauseBot(undefined,_0x335aa4,_0x85baad[_0xcc02d4(0x243)]());else{if(_0x85baad['toString']()[_0xcc02d4(0x359)]('RequestTimeout'))_0x335aa4=_0x2004e6+_0xcc02d4(0x1ea),await pauseBot(undefined,_0x335aa4,_0x85baad['toString']());else{if(_0x85baad[_0xcc02d4(0x243)]()[_0xcc02d4(0x359)](_0xcc02d4(0x390)))_0x335aa4=_0x2004e6+_0xcc02d4(0x2cb),await pauseBot(undefined,_0x335aa4,_0x85baad[_0xcc02d4(0x243)]());else{if(_0x85baad[_0xcc02d4(0x243)]()[_0xcc02d4(0x2e5)]()['includes'](_0xcc02d4(0x303))||_0x85baad[_0xcc02d4(0x243)]()[_0xcc02d4(0x2e5)]()[_0xcc02d4(0x359)](_0xcc02d4(0x36e)))_0x335aa4=_0xcc02d4(0x1e1),await pauseBot(undefined,_0x335aa4,_0x85baad[_0xcc02d4(0x243)]());else{if(_0x85baad[_0xcc02d4(0x243)]()[_0xcc02d4(0x359)]('InvalidNonce'))_0x335aa4=_0x2004e6+_0xcc02d4(0x203),await pauseBot(undefined,_0x335aa4,_0x85baad[_0xcc02d4(0x243)]());else{if(_0x85baad instanceof ccxt[_0xcc02d4(0x290)])_0x335aa4=_0x2004e6+_0xcc02d4(0x2c5)+_0x85baad[_0xcc02d4(0x243)](),logger[_0xcc02d4(0x276)]('Network\x20error\x20details:',_0x85baad),await pauseBot(undefined,_0x335aa4,_0x85baad);else{if(_0x85baad[_0xcc02d4(0x243)]()[_0xcc02d4(0x359)]('API-key\x20format\x20invalid'))logHistory(_0xcc02d4(0x32e),_0x2004e6+'\x20API\x20key\x20is\x20invalid'),logHistory('error',_0xcc02d4(0x242)),await killBot();else{if(_0x85baad[_0xcc02d4(0x243)]()['includes'](_0xcc02d4(0x2ea)))logHistory(_0xcc02d4(0x32e),_0x2004e6+'\x20API\x20secret\x20is\x20invalid'),logHistory(_0xcc02d4(0x32e),_0xcc02d4(0x242)),await killBot();else{if(_0x85baad[_0xcc02d4(0x243)]()[_0xcc02d4(0x359)](_0xcc02d4(0x2b5))&&_0x85baad['toString']()[_0xcc02d4(0x359)](_0xcc02d4(0x34f)))_0x335aa4=_0x2004e6+'\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)',await pauseBot(undefined,_0x335aa4,_0x85baad,!![]);else{if(_0x85baad[_0xcc02d4(0x243)]()[_0xcc02d4(0x359)](_0xcc02d4(0x2b5)))config[_0xcc02d4(0x220)]?_0x335aa4=_0x2004e6+_0xcc02d4(0x39b):_0x335aa4=_0x2004e6+'\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange',logHistory(_0xcc02d4(0x32e),_0x335aa4),logHistory('error','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)'),await killBot();else{if(_0x85baad['toString']()[_0xcc02d4(0x359)](_0xcc02d4(0x272)))logHistory('error',_0x2004e6+_0xcc02d4(0x304)),logHistory('error',_0xcc02d4(0x242)),await killBot();else{if(_0x85baad[_0xcc02d4(0x243)]()[_0xcc02d4(0x359)](_0xcc02d4(0x34e)))logHistory(_0xcc02d4(0x32e),_0xcc02d4(0x2d4)+_0x223238),logger['debug'](_0xcc02d4(0x2c9),_0x85baad);else{if(_0x85baad instanceof ccxt[_0xcc02d4(0x201)]){_0x335aa4=_0x2004e6+_0xcc02d4(0x294)+_0x85baad[_0xcc02d4(0x243)](),logHistory(_0xcc02d4(0x32e),_0x335aa4),logger[_0xcc02d4(0x276)](_0xcc02d4(0x275),_0x85baad);if(_0x223238)logger[_0xcc02d4(0x276)](_0xcc02d4(0x229)+_0x223238);await pauseBot(undefined,_0x335aa4,_0x85baad);}else{_0x335aa4=_0xcc02d4(0x35a)+_0x85baad['toString'](),logHistory(_0xcc02d4(0x32e),_0x335aa4),logger[_0xcc02d4(0x276)](_0x335aa4+_0xcc02d4(0x37e),_0x85baad);if(_0x223238)logger[_0xcc02d4(0x276)]('Symbol(s):\x20'+_0x223238);await pauseBot(undefined,_0x335aa4);}}}}}}}}}}}}}}}}function decryptRSA(_0x44b27c,_0x5a5c97){const _0x3194d2=_0x18ae9a,_0xd590d=forge[_0x3194d2(0x21a)][_0x3194d2(0x342)](_0x44b27c),_0x5d4f5a=_0xd590d[_0x3194d2(0x28d)](forge[_0x3194d2(0x1f2)][_0x3194d2(0x341)](_0x5a5c97),'RSA-OAEP',{'md':forge['md'][_0x3194d2(0x296)][_0x3194d2(0x252)](),'mgf1':{'md':forge['md'][_0x3194d2(0x296)][_0x3194d2(0x252)]()}});return _0x5d4f5a;}async function withRetry(_0x294ce1,_0x1aa4b6){const _0x6f42a7=_0x18ae9a;let _0x222677=![],_0x540370=0x0,_0x205f20,_0x416629;while(_0x540370<maxRetries){try{_0x205f20=await _0x1aa4b6();break;}catch(_0x4bb8aa){_0x416629=_0x4bb8aa,!_0x222677?(_0x222677=!![],logger[_0x6f42a7(0x276)](_0x6f42a7(0x29a)+_0x294ce1+':',_0x4bb8aa[_0x6f42a7(0x243)]())):await sleep(retryInterval);}_0x540370++;}if(_0x540370==0x0)return _0x205f20;if(_0x540370>=maxRetries)throw _0x416629;else return logger['debug'](_0x6f42a7(0x1e8)+_0x540370+_0x6f42a7(0x2e6)),_0x205f20;}function formatResult(_0x56505b,_0x23430d){const _0x3ef27a=_0x18ae9a;return parseFloat(_0x56505b[_0x3ef27a(0x298)](_0x23430d));}function formatResultTruncate(_0x5c7f07,_0x1d8cc3){const _0x4968ea=_0x18ae9a;let _0x47074b=formatResultString(_0x5c7f07,0xa),_0x2a0271=_0x47074b['indexOf']('.');return _0x2a0271!=-0x1&&(_0x47074b=_0x47074b[_0x4968ea(0x38b)](0x0,_0x2a0271+_0x1d8cc3+0x1)),Number(_0x47074b);}function formatResultString(_0x461f8d,_0x4e13f2){const _0x1130aa=_0x18ae9a;let _0x2550ef;if(!(''+_0x461f8d)[_0x1130aa(0x359)]('e'))_0x2550ef=+(Math[_0x1130aa(0x30c)](_0x461f8d+'e+'+_0x4e13f2)+'e-'+_0x4e13f2);else{let _0x3b847e=(''+_0x461f8d)[_0x1130aa(0x212)]('e'),_0x28a152='';+_0x3b847e[0x1]+_0x4e13f2>0x0&&(_0x28a152='+'),_0x2550ef=+(Math[_0x1130aa(0x30c)](+_0x3b847e[0x0]+'e'+_0x28a152+(+_0x3b847e[0x1]+_0x4e13f2))+'e-'+_0x4e13f2);}return Number(_0x2550ef)['toFixed'](_0x4e13f2);}function getServerTime(){const _0x4df2fd=_0x18ae9a,_0x540fbb=new Date();return _0x540fbb[_0x4df2fd(0x326)]()+'/'+(_0x540fbb[_0x4df2fd(0x344)]()+0x1)[_0x4df2fd(0x243)]()['padStart'](0x2,'0')+'/'+_0x540fbb['getDate']()[_0x4df2fd(0x243)]()[_0x4df2fd(0x360)](0x2,'0')+'\x20'+_0x540fbb[_0x4df2fd(0x32a)]()['toString']()['padStart'](0x2,'0')+':'+_0x540fbb[_0x4df2fd(0x22f)]()[_0x4df2fd(0x243)]()[_0x4df2fd(0x360)](0x2,'0')+':'+_0x540fbb[_0x4df2fd(0x2f7)]()['toString']()[_0x4df2fd(0x360)](0x2,'0');}function getTimeStamp(){const _0x4f12d0=_0x18ae9a,_0x592690=shiftedTime();return _0x592690[_0x4f12d0(0x326)]()+'/'+(_0x592690[_0x4f12d0(0x344)]()+0x1)[_0x4f12d0(0x243)]()[_0x4f12d0(0x360)](0x2,'0')+'/'+_0x592690[_0x4f12d0(0x29d)]()[_0x4f12d0(0x243)]()[_0x4f12d0(0x360)](0x2,'0')+'\x20'+_0x592690[_0x4f12d0(0x32a)]()[_0x4f12d0(0x243)]()[_0x4f12d0(0x360)](0x2,'0')+':'+_0x592690[_0x4f12d0(0x22f)]()[_0x4f12d0(0x243)]()[_0x4f12d0(0x360)](0x2,'0')+':'+_0x592690[_0x4f12d0(0x2f7)]()[_0x4f12d0(0x243)]()['padStart'](0x2,'0');}function getDate(){const _0x29a917=_0x18ae9a,_0x17c1c6=shiftedTime();return _0x17c1c6['getFullYear']()+'/'+(_0x17c1c6[_0x29a917(0x344)]()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x17c1c6[_0x29a917(0x29d)]()[_0x29a917(0x243)]()[_0x29a917(0x360)](0x2,'0');}function getHour(){const _0x47195d=_0x18ae9a,_0x2c4b9f=shiftedTime();return _0x2c4b9f[_0x47195d(0x32a)]()[_0x47195d(0x243)]()[_0x47195d(0x360)](0x2,'0');}function sleep(_0x5dd0d1){return new Promise(_0x2c1cd4=>setTimeout(_0x2c1cd4,_0x5dd0d1));}function shiftedTime(){const _0x56552c=_0x18ae9a,_0x56bb5d=new Date();let _0x551ed6=_0x56bb5d;if(config&&config[_0x56552c(0x35e)]!==0x0)_0x551ed6=fns[_0x56552c(0x2b7)](_0x56bb5d,{'hours':config[_0x56552c(0x35e)]});return _0x551ed6;}function timer(_0x29db1f){const _0x2ed6e4=_0x18ae9a,_0x5bf4cb=new Date();!lasttime?console[_0x2ed6e4(0x2cd)](getTimeStamp()+_0x2ed6e4(0x1fa),_0x29db1f,_0x5bf4cb):console[_0x2ed6e4(0x2cd)](getTimeStamp()+_0x2ed6e4(0x1fa),_0x29db1f,(_0x5bf4cb-lasttime)/0x3e8),lasttime=_0x5bf4cb;}