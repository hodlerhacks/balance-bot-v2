const _0x58eec8=_0xc75c;(function(_0x382334,_0x22ce50){const _0x381e55=_0xc75c,_0x419e52=_0x382334();while(!![]){try{const _0x564dcc=-parseInt(_0x381e55(0x1c0))/0x1*(-parseInt(_0x381e55(0xc1))/0x2)+-parseInt(_0x381e55(0x138))/0x3*(-parseInt(_0x381e55(0x191))/0x4)+parseInt(_0x381e55(0x117))/0x5+parseInt(_0x381e55(0x1a6))/0x6+parseInt(_0x381e55(0xc5))/0x7+parseInt(_0x381e55(0x104))/0x8+-parseInt(_0x381e55(0xd2))/0x9*(parseInt(_0x381e55(0x1e9))/0xa);if(_0x564dcc===_0x22ce50)break;else _0x419e52['push'](_0x419e52['shift']());}catch(_0x1203a2){_0x419e52['push'](_0x419e52['shift']());}}}(_0x447f,0x651cf));const _0x3a679f=function(){let _0x582af0=!![];return function(_0x11aafe,_0x50fb0f){const _0x49eb33=_0x582af0?function(){const _0x5403e0=_0xc75c;if(_0x50fb0f){const _0x5a4112=_0x50fb0f[_0x5403e0(0x1ff)](_0x11aafe,arguments);return _0x50fb0f=null,_0x5a4112;}}:function(){};return _0x582af0=![],_0x49eb33;};}(),_0x368516=_0x3a679f(this,function(){const _0x31aac5=_0xc75c;return _0x368516[_0x31aac5(0x14b)]()[_0x31aac5(0x23b)](_0x31aac5(0x1fe))['toString']()[_0x31aac5(0x28f)](_0x368516)['search']('(((.+)+)+)+$');});_0x368516();'use strict';const ccxt=require(_0x58eec8(0x1fc)),low=require('lowdb'),FileSync=require(_0x58eec8(0x184)),fs=require('fs'),fns=require(_0x58eec8(0x24a)),forge=require(_0x58eec8(0x286)),util=require(_0x58eec8(0x278)),argv=require(_0x58eec8(0x293))(process[_0x58eec8(0x292)][_0x58eec8(0x113)](0x2))['argv'],path=require('path'),axios=require(_0x58eec8(0x22e));let exchange,gTicker={},gChange={};const usdBasecoins=['USD',_0x58eec8(0x15a),_0x58eec8(0xe0),_0x58eec8(0x13e),_0x58eec8(0x207),_0x58eec8(0x144)],excludedExchanges=[_0x58eec8(0x1a7)],debugging=argv['d']||![];let pnlGenerationNeeded=argv['r']||![],config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object['freeze']({'LOCKED':0x0,'UNLOCKING':0x1,'UNLOCKED':0x2});let lockOrders=ORDERS[_0x58eec8(0x1f2)],validateOrdersState,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotIntervalShort=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0x58eec8(0x16a)+pauseBotInterval/0xea60+'\x20minutes',maxPauseRetries=0x6,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,watchTransactionsInterval=0x3c*0x3e8,schedulerInterval=0x3c*0x3c*0x3e8,retryInterval=0x3e8,maxRetries=0x5,logPageSize=0x14,defaultFee=0.003;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidOrdersInitialTimeout,pidOrdersTimeout,botPaused=![],transactionDetectionOngoing=![],lastCoinsToBalance='',insufficientFundsWarningSent=[],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x5dc,balanceUpdateRetries=0x5;let enableFiatToggle;const serverversion=require(_0x58eec8(0x275))['version'],environment=require(_0x58eec8(0x275))[_0x58eec8(0x129)]||_0x58eec8(0x294),botID=process[_0x58eec8(0x292)][0x2]||'001',pattern=/^[0-9]{3}$/;!pattern[_0x58eec8(0x156)](botID)&&(console[_0x58eec8(0xc6)](_0x58eec8(0x111)+botID+_0x58eec8(0x19b)),killBot());const userID=process[_0x58eec8(0x292)][0x3]||'',configpath=userID?_0x58eec8(0x1d9)+userID+'/':_0x58eec8(0x1d9),logspath=userID?_0x58eec8(0xd8)+userID+'/':_0x58eec8(0xd8),loggerfile=fs[_0x58eec8(0x26a)](logspath+_0x58eec8(0x1e5),{'flags':'a'});!fs[_0x58eec8(0xf6)](configpath)&&fs['mkdirSync'](configpath);!fs[_0x58eec8(0xf6)](logspath)&&fs['mkdirSync'](logspath);const configfile=configpath+_0x58eec8(0x262)+botID+_0x58eec8(0x265),logfile=configpath+_0x58eec8(0x262)+botID+_0x58eec8(0x17f),performancefile=configpath+_0x58eec8(0x262)+botID+_0x58eec8(0x187),coinresultsfile=configpath+_0x58eec8(0x262)+botID+_0x58eec8(0xe7),settingsfile=configpath+_0x58eec8(0x173),securefile=configpath+'bb-secure.json',configbackuppath=configpath+'/backup/',adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x58eec8(0x220)]({'logs':[],'version':serverversion})[_0x58eec8(0xfb)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x58eec8(0x220)]({'data':[],'version':serverversion})[_0x58eec8(0xfb)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x58eec8(0x220)]({'bot':[],'version':serverversion})[_0x58eec8(0xfb)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x58eec8(0x220)]({'coins':{},'version':serverversion})[_0x58eec8(0xfb)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const operatorId=0x200f1;let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x4433c9=>{console['log'](_0x4433c9);},'simple':_0x2e9e2e=>{const _0x2ddc35=_0x58eec8;console[_0x2ddc35(0xc6)](_0x2e9e2e),loggerfile[_0x2ddc35(0xfb)](util[_0x2ddc35(0x1f4)](_0x2e9e2e)+'\x0a');},'full':async(_0x7de7b7,_0x3f3452='')=>{const _0x5477df=_0x58eec8;let _0x1a76a9;if(config[_0x5477df(0x167)])_0x1a76a9=getTimeStamp()+':\x20'+config[_0x5477df(0x1ac)]+'\x20>\x20'+_0x7de7b7;else _0x1a76a9=getTimeStamp()+':\x20Bot\x20'+botID+_0x5477df(0x19a)+_0x7de7b7;console[_0x5477df(0xc6)](_0x1a76a9),loggerfile[_0x5477df(0xfb)](util[_0x5477df(0x1f4)](_0x1a76a9)+'\x0a'),_0x3f3452&&(console[_0x5477df(0xc6)](_0x3f3452),loggerfile[_0x5477df(0xfb)](util[_0x5477df(0x1f4)](_0x3f3452)+'\x0a'));},'debug':async(_0x29c8db,_0x10e537='')=>{const _0x2c51ee=_0x58eec8;let _0x71d22c;if(config[_0x2c51ee(0x167)])_0x71d22c=getTimeStamp()+':\x20'+config[_0x2c51ee(0x1ac)]+_0x2c51ee(0x242)+_0x29c8db;else _0x71d22c=getTimeStamp()+_0x2c51ee(0x17e)+botID+_0x2c51ee(0x242)+_0x29c8db;if(debugging)console['log'](_0x71d22c);loggerfile['write'](util['format'](_0x71d22c)+'\x0a');if(_0x10e537){if(debugging)console['log'](_0x10e537);loggerfile[_0x2c51ee(0xfb)](util[_0x2c51ee(0x1f4)](_0x10e537)+'\x0a');}}};process['on'](_0x58eec8(0xf8),function(_0x4bf6ed){const _0x35d020=_0x58eec8;handleError(_0x4bf6ed[_0x35d020(0x13c)],_0x35d020(0xf8));});settings[_0x58eec8(0xcd)]!=config[_0x58eec8(0xcd)]&&updateTimeshift(settings[_0x58eec8(0xcd)]);settings[_0x58eec8(0x258)]!=config['onepagemode']&&updateOnepagemode(settings[_0x58eec8(0x258)]);(settings[_0x58eec8(0xbe)]&&!config[_0x58eec8(0xbe)]||!settings['marketcapApi']&&config[_0x58eec8(0xbe)])&&updateMarketcapApi(settings[_0x58eec8(0xbe)]);process[_0x58eec8(0x274)]({'started':_0x58eec8(0x1d3)},_0x3fb67c=>{}),initializeProcessListeners();function proxyEmit(_0x4f1264,_0x24559d=null){const _0x37f30d=_0x58eec8;process[_0x37f30d(0x274)]({'function':_0x4f1264,'args':_0x24559d},_0x1d0ee9=>{});}function initializeProcessListeners(){const _0x19e9eb=_0x58eec8;process['on'](_0x19e9eb(0xd6),_0x222cf6=>{const _0x95e0ab=_0x19e9eb;switch(Object[_0x95e0ab(0x110)](_0x222cf6)[0x0]){case _0x95e0ab(0xcd):_0x222cf6[_0x95e0ab(0xcd)]!=undefined&&(settings[_0x95e0ab(0xcd)]=_0x222cf6[_0x95e0ab(0xcd)],updateTimeshift(settings['timeshift']));break;case _0x95e0ab(0x258):_0x222cf6[_0x95e0ab(0x258)]!=undefined&&(settings[_0x95e0ab(0x258)]=_0x222cf6[_0x95e0ab(0x258)],updateOnepagemode(settings[_0x95e0ab(0x258)]));break;case _0x95e0ab(0xbe):_0x222cf6['marketcapApi']!=undefined&&(settings['marketcapApi']=_0x222cf6[_0x95e0ab(0xbe)],updateMarketcapApi(settings[_0x95e0ab(0xbe)]));break;case _0x95e0ab(0x208):_0x222cf6['bots']!=undefined&&(bots=JSON[_0x95e0ab(0x154)](_0x222cf6[_0x95e0ab(0x208)]),proxyEmit(_0x95e0ab(0x208),bots));break;case _0x95e0ab(0x201):switch(_0x222cf6[_0x95e0ab(0x201)]){case _0x95e0ab(0x197):initclient();break;case _0x95e0ab(0x188):toggleBotMode();break;case'emitHistory':emitHistory(_0x222cf6[_0x95e0ab(0x192)]);break;case'deleteHistoryAlerts':deleteHistoryAlerts(_0x222cf6[_0x95e0ab(0x192)]);break;case _0x95e0ab(0x118):getPortfolio(_0x222cf6[_0x95e0ab(0x192)]);break;case _0x95e0ab(0x1b4):storeConfiguration(_0x222cf6['args']);break;case _0x95e0ab(0x1ee):storeHeadless(_0x222cf6[_0x95e0ab(0x192)]);break;case'storeFiat':storeFiat(_0x222cf6[_0x95e0ab(0x192)]);break;case _0x95e0ab(0x143):resetHistory();break;case _0x95e0ab(0xdb):getStartingBalances(getNormalizedPerformance());break;case _0x95e0ab(0x269):placeOrder(_0x222cf6['args']);break;case _0x95e0ab(0x131):cancelLoading();break;case _0x95e0ab(0x25d):showConfig();break;case _0x95e0ab(0x229):sendMetricsTelegram();break;case _0x95e0ab(0xfd):sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x394497=![]){const _0x2996c7=_0x58eec8;logger['debug'](_0x2996c7(0xca)+(_0x394497?_0x2996c7(0x21a):_0x2996c7(0x12e))+_0x2996c7(0x285)+config['exchange']);if(pidBalances)clearTimeout(pidBalances);lastCoinsToBalance='',insufficientFundsWarningSent=[],coinsLoaded=![];if(config[_0x2996c7(0x130)]!=''&&config[_0x2996c7(0x130)]!=_0x2996c7(0x1f6)){loadingProgress=0x0;if(_0x394497){await initExchange();const _0x3e06d4=await testAPI();if(!_0x3e06d4)return;await loadSymbols(),loadingProgress=0x1,setStableCoins(),proxyEmit('configuration',emittedConfiguration()),initialPerformanceStored=![];}const _0x5f0039=await getCoins();[currentCoins,currentCoinsAll]=_0x5f0039,setBlockTransactionDetection(![]),startScheduler(),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x2996c7(0x225)]('Loading\x20completed'),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x2996c7(0x16c)]==0x0&&allOpenOrders[_0x2996c7(0x16c)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(pnlGenerationNeeded)await generatePnL();}}async function resumeBot(_0xe76679=![]){const _0x2a0127=_0x58eec8;logger['debug'](_0x2a0127(0x1c9)+(_0xe76679?_0x2a0127(0x209):'complete')+_0x2a0127(0x25c)+config[_0x2a0127(0x26c)]);if(pidBalances)clearTimeout(pidBalances);if(_0xe76679){getBalances();return;}coinsLoaded=![];if(config[_0x2a0127(0x130)]!=''&&config[_0x2a0127(0x130)]!=_0x2a0127(0x1f6)){loadingProgress=0x1;const _0x573dbc=await getCoins();[currentCoins,currentCoinsAll]=_0x573dbc,setBlockTransactionDetection(![]),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x2a0127(0x225)](_0x2a0127(0x127)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x2a0127(0x16c)]==0x0&&allOpenOrders[_0x2a0127(0x16c)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();}}async function getMarketCap(_0x1b5502){const _0x10b675=_0x58eec8;let _0x4edd1d=![];if(_0x1b5502)_0x4edd1d=!![];const _0x525954=_0x4edd1d?_0x1b5502:currentCoins,_0xc3963b=_0x525954[_0x10b675(0x12c)](_0x110d3a=>_0x110d3a[_0x10b675(0x162)]);if(!config[_0x10b675(0xbe)]||!_0x4edd1d&&!config['marketcapEnabled']||_0xc3963b[_0x10b675(0x16c)]==0x0)return;let _0x14f719=null;try{_0x14f719=await axios[_0x10b675(0x16d)](_0x10b675(0x199),{'headers':{'X-CMC_PRO_API_KEY':settings[_0x10b675(0xbe)]},'params':{'symbol':_0xc3963b[_0x10b675(0x14b)]()}});}catch(_0x594b09){_0x14f719=null,_0x594b09[_0x10b675(0x14b)]()[_0x10b675(0x25e)](_0x10b675(0x1bd))?(config['marketcapApi']=![],updateConfig(),proxyEmit(_0x10b675(0xe6),emittedConfiguration()),logHistory(_0x10b675(0xde),_0x10b675(0xf9))):(logHistory(_0x10b675(0xde),_0x10b675(0x260)+schedulerInterval/(0x3c*0x3e8)+_0x10b675(0x21c)),logger['debug'](_0x10b675(0x24c),_0x594b09[_0x10b675(0x14b)]()+_0x10b675(0x264)+_0x594b09[_0x10b675(0xec)]));}const _0x57bfad=new Map();let _0x37d7b2=!![];if(_0x14f719){let _0x50b5ed=0x0;const _0x990d06=_0x14f719[_0x10b675(0x174)];_0xc3963b[_0x10b675(0x252)](_0x2f26dd=>{const _0x2d6061=_0x10b675;if(_0x990d06[_0x2d6061(0x174)][_0x2f26dd][0x0]&&_0x990d06[_0x2d6061(0x174)][_0x2f26dd][0x0][_0x2d6061(0x1f7)][_0x2d6061(0x10b)][_0x2d6061(0x1e0)])_0x57bfad[_0x2d6061(0xdc)](_0x2f26dd,_0x990d06[_0x2d6061(0x174)][_0x2f26dd][0x0][_0x2d6061(0x1f7)][_0x2d6061(0x10b)][_0x2d6061(0x1e0)]),_0x50b5ed+=_0x990d06[_0x2d6061(0x174)][_0x2f26dd][0x0][_0x2d6061(0x1f7)][_0x2d6061(0x10b)][_0x2d6061(0x1e0)];else{if(_0x990d06[_0x2d6061(0x174)][_0x2f26dd][0x0]&&_0x990d06['data'][_0x2f26dd][0x0][_0x2d6061(0x11b)])_0x57bfad[_0x2d6061(0xdc)](_0x2f26dd,_0x990d06[_0x2d6061(0x174)][_0x2f26dd][0x0]['self_reported_market_cap']),_0x50b5ed+=_0x990d06['data'][_0x2f26dd][0x0][_0x2d6061(0x11b)];else{if(![_0x2d6061(0x193),_0x2d6061(0x10b)][_0x2d6061(0x25e)](_0x2f26dd)){if(_0x4edd1d)logHistory('error','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20for\x20'+_0x2f26dd+_0x2d6061(0x283));else{const _0x233174=config[_0x2d6061(0x126)]['find'](_0x30d771=>_0x30d771[_0x2d6061(0x162)]==_0x2f26dd);_0x233174&&!_0x233174[_0x2d6061(0x226)]&&_0x233174[_0x2d6061(0xf4)]==-0x1&&(_0x37d7b2=![],logHistory(_0x2d6061(0xde),'CoinMarketCap\x20data\x20could\x20not\x20be\x20updated\x20-\x20will\x20try\x20again\x20in\x201\x20hour'),logger[_0x2d6061(0x225)](_0x2d6061(0x266)+_0x2f26dd));}}}}});if(!_0x37d7b2)return;_0xc3963b[_0x10b675(0x252)](_0x203ab0=>{const _0x117c61=_0x10b675,_0x176b78=_0x57bfad[_0x117c61(0x16d)](_0x203ab0)?_0x57bfad[_0x117c61(0x16d)](_0x203ab0):0x0;if(_0x4edd1d){const _0x4836ae=_0x1b5502[_0x117c61(0x164)](_0xbea96f=>_0xbea96f[_0x117c61(0x162)]==_0x203ab0);_0x4836ae&&(_0x4836ae[_0x117c61(0x203)]=_0x176b78);}else{const _0x1a8aec=currentCoins['find'](_0x147175=>_0x147175[_0x117c61(0x162)]==_0x203ab0);_0x1a8aec&&(_0x1a8aec[_0x117c61(0x203)]=_0x176b78);const _0xf196ff=currentCoinsAll[_0x117c61(0x164)](_0x10f9c1=>_0x10f9c1[_0x117c61(0x162)]==_0x203ab0);_0xf196ff&&(_0xf196ff[_0x117c61(0x203)]=_0x176b78);}}),!_0x4edd1d&&updateTargetDistribution();}}function updateTargetDistribution(){const _0x434ab5=_0x58eec8,_0x326d56=0x2;let _0x15b662=0x0,_0x20d822=0x0,_0x4b6aa8=0x0,_0x110265=0x0,_0x38d5a4=0x0;config[_0x434ab5(0x126)][_0x434ab5(0x252)](_0x51eae4=>{const _0x2d9682=_0x434ab5;if(!_0x51eae4['excluded']){_0x4b6aa8++,_0x15b662+=_0x51eae4[_0x2d9682(0xf4)];if(_0x51eae4[_0x2d9682(0xf4)]===-0x1){_0x15b662++;const _0x500d97=currentCoinsAll[_0x2d9682(0x164)](_0x4eb8a7=>_0x4eb8a7[_0x2d9682(0x162)]==_0x51eae4[_0x2d9682(0x162)]);_0x500d97&&(_0x110265+=_0x500d97['marketcap'],_0x38d5a4+=Math['sqrt'](_0x500d97[_0x2d9682(0x203)]));}if(_0x51eae4[_0x2d9682(0xf4)]!==-0x1)_0x20d822++;}});let _0x21374f;const _0x590a9d=0x64-_0x15b662,_0x439112=_0x4b6aa8-_0x20d822;_0x21374f=_0x439112===0x0?_0x15b662:Math[_0x434ab5(0x28b)](0x64,_0x15b662),config[_0x434ab5(0x126)]['forEach'](_0x220b88=>{const _0x4792f4=_0x434ab5,_0x4b04c8=currentCoinsAll[_0x4792f4(0x164)](_0x766b15=>_0x766b15[_0x4792f4(0x162)]==_0x220b88['coin']);_0x4b04c8&&(_0x220b88[_0x4792f4(0x203)]=_0x4b04c8['marketcap']);if(!_0x220b88[_0x4792f4(0x226)]){if(_0x21374f<=0x64){if(_0x220b88['slider']===-0x1){if(_0x110265!==0x0&&config[_0x4792f4(0x239)]){if(_0x4b04c8){if(config['marketcapEnabled']==_0x4792f4(0x203))_0x220b88['distribution']=(_0x590a9d/(_0x110265/_0x4b04c8['marketcap']))[_0x4792f4(0x1fa)](_0x326d56);else config[_0x4792f4(0x239)]==_0x4792f4(0xe9)&&(_0x220b88[_0x4792f4(0x245)]=(_0x590a9d/(_0x38d5a4/Math[_0x4792f4(0x1ea)](_0x4b04c8[_0x4792f4(0x203)])))[_0x4792f4(0x1fa)](_0x326d56));}}}}}}),updateConfig();}function updateConfig(){const _0x4f29f1=_0x58eec8;let _0x1dd7b8=dbConfig['get'](_0x4f29f1(0x18c))[_0x4f29f1(0x164)]({'botID':botID})[_0x4f29f1(0x246)]();_0x1dd7b8&&dbConfig[_0x4f29f1(0x16d)](_0x4f29f1(0x18c))['find']({'botID':botID})[_0x4f29f1(0xf3)](config)[_0x4f29f1(0xfb)]();}function logMemory(){const _0x2813c2=_0x58eec8;if(environment!='staging')return;const _0x2e3c61=process['memoryUsage']()[_0x2813c2(0xce)]/0x400/0x400;logger['debug'](_0x2813c2(0x1a9)+process[_0x2813c2(0x248)]+_0x2813c2(0x1c7)+formatResult(_0x2e3c61,0x1)+_0x2813c2(0x1cb));}async function startScheduler(){const _0xd38173=_0x58eec8,_0x2b05a9=shiftedTime()[_0xd38173(0x281)]();getMarketCap(),loadSymbols(),_0x2b05a9==0x1&&logMemory(),await sleep(schedulerInterval),startScheduler();}async function restartBot(_0x4238ea=![]){const _0x29d50e=_0x58eec8;logger[_0x29d50e(0x225)](_0x29d50e(0x1db));if(!_0x4238ea)while(lockOrders!=ORDERS['UNLOCKED']||coolingDown){await sleep(0x3e8);}process[_0x29d50e(0x274)]({'stop':'restart'},_0x128e0c=>{});}async function initExchange(_0x423b80=config['exchange'],_0x5819d5=config[_0x58eec8(0x130)],_0x2745f3=config[_0x58eec8(0x26e)],_0x10b5b3=config[_0x58eec8(0x205)],_0x3fe1c7=config[_0x58eec8(0x268)]){const _0x1ff9dd=_0x58eec8;if(exchange){logger[_0x1ff9dd(0x225)](_0x1ff9dd(0x14d));return;}logger[_0x1ff9dd(0x225)](_0x1ff9dd(0x165));!supportedExchanges()[_0x1ff9dd(0x25e)](_0x423b80)&&(logHistory(_0x1ff9dd(0xde),_0x1ff9dd(0x17d)+_0x423b80+_0x1ff9dd(0xc2)),killBot());const _0x3d862d=ccxt[_0x1ff9dd(0x25b)][_0x423b80[_0x1ff9dd(0x13a)]()];exchange=new _0x3d862d({'apiKey':_0x5819d5,'secret':_0x2745f3,'options':{'defaultType':'spot'}});if(_0x10b5b3)exchange[_0x1ff9dd(0x123)]=_0x10b5b3;if(exchange[_0x1ff9dd(0x25f)][_0x1ff9dd(0x268)])exchange[_0x1ff9dd(0x1d4)](_0x3fe1c7);if(_0x423b80['toLowerCase']()==_0x1ff9dd(0x19c))exchange['options'][_0x1ff9dd(0x103)]=operatorId;}function updateExchange(_0x3a9428,_0x58461d,_0x23bcbe=null){const _0xcb974d=_0x58eec8;exchange[_0xcb974d(0x130)]=_0x3a9428,exchange[_0xcb974d(0x255)]=_0x58461d,exchange['password']=_0x23bcbe,logger[_0xcb974d(0x225)](_0xcb974d(0x12f));}function setStableCoins(){const _0x3c508f=_0x58eec8;let _0x24b3b9=config[_0x3c508f(0x135)]=='ETH'?_0x3c508f(0x1c6):config[_0x3c508f(0x135)]==_0x3c508f(0x279)?_0x3c508f(0x279):_0x3c508f(0x20e),_0x307b70=allSymbols[_0x3c508f(0x25e)](_0x24b3b9+'/USD')?'USD':allSymbols[_0x3c508f(0x25e)](_0x24b3b9+_0x3c508f(0x175))?_0x3c508f(0x13e):'EUR',_0x777f69=allSymbols[_0x3c508f(0x25e)](_0x24b3b9+'/EUR')?_0x3c508f(0x193):_0x307b70;enableFiatToggle=!![],_0x307b70==_0x3c508f(0x193)&&(enableFiatToggle=![],storeFiat(_0x3c508f(0x193))),_0x777f69!='EUR'&&(enableFiatToggle=![],storeFiat(_0x3c508f(0x10b))),stablecoins={'eur':{'coin':''+_0x24b3b9+_0x777f69,'symbol':_0x24b3b9+'/'+_0x777f69},'usd':{'coin':''+_0x24b3b9+_0x307b70,'symbol':_0x24b3b9+'/'+_0x307b70}};}async function initwsCcxt(){const _0x17d5fd=_0x58eec8;initCycle++;const _0x308200=initCycle;let _0x16aa5e=[];config[_0x17d5fd(0x126)][_0x17d5fd(0x252)](_0x56d089=>{const _0x1f453e=_0x17d5fd;if(!_0x56d089[_0x1f453e(0x226)]&&_0x56d089[_0x1f453e(0x162)]!=config[_0x1f453e(0x135)])_0x16aa5e[_0x1f453e(0x121)](_0x56d089[_0x1f453e(0x1cd)]);});if(!_0x16aa5e[_0x17d5fd(0x25e)](stablecoins[_0x17d5fd(0x1dd)]['symbol']))_0x16aa5e['push'](stablecoins['eur'][_0x17d5fd(0x1cd)]);if(!_0x16aa5e['includes'](stablecoins[_0x17d5fd(0x1c2)][_0x17d5fd(0x1cd)]))_0x16aa5e[_0x17d5fd(0x121)](stablecoins['usd'][_0x17d5fd(0x1cd)]);loadCoins(_0x16aa5e),_0x16aa5e=validateSymbols(_0x16aa5e);const _0x5c02fa=async _0xfe9490=>{const _0x47a1ab=_0x17d5fd;let _0x4536aa;try{const _0x1b2469=await getTickers(_0xfe9490);Object[_0x47a1ab(0x198)](_0x1b2469)[_0x47a1ab(0x252)](_0x3aabb5=>{const _0x2a2d86=_0x47a1ab;_0x4536aa=_0x3aabb5[0x1][_0x2a2d86(0x1cd)],gTicker[noslash(_0x4536aa)]=_0x3aabb5[0x1][_0x2a2d86(0x1a3)],gChange[_0x4536aa]=_0x3aabb5[0x1][_0x2a2d86(0x27b)];});}catch(_0x5f1732){await handleError(_0x5f1732,'initTickers()',_0x4536aa);}},_0x34930b=async _0x422b6d=>{const _0x3f438b=_0x17d5fd;while(initCycle==_0x308200){if(!botPaused)try{const _0x1d47e0=await exchange[_0x3f438b(0x1d5)](_0x422b6d);gTicker[noslash(_0x1d47e0[0x0][_0x3f438b(0x1cd)])]=_0x1d47e0[0x0][_0x3f438b(0x128)];}catch(_0x3268c4){if(!exchangeStopped)await handleError(_0x3268c4,'watchTrades()',_0x422b6d);}else await sleep(0x64);}},_0x493d69=async _0x961741=>{const _0x49e36e=_0x17d5fd;while(initCycle==_0x308200){if(!botPaused)try{const _0xd85f14=await exchange[_0x49e36e(0x277)](_0x961741),_0x335002=_0xd85f14[_0x49e36e(0x18d)]();gTicker[noslash(_0x335002['symbol'])]=_0x335002[_0x49e36e(0x128)];}catch(_0x427ad0){if(!exchangeStopped)await handleError(_0x427ad0,'watchTradesForSymbols()',_0x961741[_0x49e36e(0x14b)]());}else await sleep(0x64);}},_0x27689e=async _0x495f71=>{const _0x55f035=_0x17d5fd;while(initCycle==_0x308200){if(!botPaused){let _0x167639;try{await sleep(0x3c*0x3e8);const _0x2c09ca=await getTickers(_0x495f71);Object[_0x55f035(0x198)](_0x2c09ca)[_0x55f035(0x252)](_0x1a95b8=>{const _0x3f573f=_0x55f035;_0x167639=_0x1a95b8[0x1][_0x3f573f(0x1cd)],gChange[_0x167639]=_0x1a95b8[0x1][_0x3f573f(0x27b)];});}catch(_0x3cfb81){if(!exchangeStopped)await handleError(_0x3cfb81,_0x55f035(0x15e),_0x167639);}}else await sleep(0x64);}},_0x2363fb=async _0x329098=>{const _0x9a20da=_0x17d5fd;while(initCycle==_0x308200){if(!botPaused)try{const _0x3b4b94=await exchange[_0x9a20da(0x11f)](_0x329098);initCycle==_0x308200&&_0x3b4b94['forEach'](_0x4b0a06=>{updateNumberCoinsCcxt(_0x4b0a06);});}catch(_0x2b7e88){if(!exchangeStopped)await handleError(_0x2b7e88,_0x9a20da(0x15c));}else await sleep(0x64);}};_0x5c02fa(_0x16aa5e),_0x27689e(_0x16aa5e),exchange['has'][_0x17d5fd(0x277)]&&!(config[_0x17d5fd(0x26c)]==_0x17d5fd(0xf1)&&_0x16aa5e['length']>0xa)?_0x493d69(_0x16aa5e):_0x16aa5e['forEach'](_0x4503f2=>{_0x34930b(_0x4503f2);}),_0x16aa5e['forEach'](_0x50fbe5=>{_0x2363fb(_0x50fbe5);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x40af55){const _0x26a712=_0x58eec8;let _0x2f6a5a={};try{if(config[_0x26a712(0x26c)]!='Cryptocom')_0x2f6a5a=await exchange[_0x26a712(0xfc)](_0x40af55);else for(const _0x415e17 of _0x40af55){const _0x777af=await exchange[_0x26a712(0x228)](_0x415e17);_0x2f6a5a[_0x415e17]=_0x777af;}return _0x2f6a5a;}catch(_0x4029c2){throw _0x4029c2;}}function setBlockTransactionDetection(_0x2dbe77){const _0x5e6652=_0x58eec8;blockTransactionDetection=_0x2dbe77,logger[_0x5e6652(0x225)](_0x5e6652(0xd3)+blockTransactionDetection);}async function detectLiquidityChange(_0xf42355=0x0){const _0x36b76f=_0x58eec8;transactionDetectionOngoing=!![];try{const _0x40eac2=await getCoins(_0xf42355),[_0x5d2edf,_0xefa841]=_0x40eac2;let _0x1ef721=[];currentCoins[_0x36b76f(0x252)](_0x211f5f=>{const _0x465168=_0x36b76f,_0x455a36=_0x5d2edf[_0x465168(0x164)](_0x33dbd7=>_0x33dbd7[_0x465168(0x162)]==_0x211f5f[_0x465168(0x162)]);if(_0x455a36){if(_0x211f5f['number']!=_0x455a36['number']){let _0x3681ed;if(_0x211f5f[_0x465168(0x162)]!=config[_0x465168(0x135)]){const _0x3320d2=gTicker[noslash(_0x211f5f['symbol'])];_0x3681ed=_0x211f5f[_0x465168(0xda)]?0x1/_0x3320d2:_0x3320d2;}else _0x3681ed=0x1;_0x1ef721['push']({'coin':_0x211f5f[_0x465168(0x162)],'symbol':_0x211f5f['symbol'],'price':_0x3681ed,'number':Number(formatResult(_0x455a36[_0x465168(0x1aa)]-_0x211f5f[_0x465168(0x1aa)],0x8)),'basecoinvalue':_0x3681ed*(_0x455a36[_0x465168(0x1aa)]-_0x211f5f['number'])});}}});if(_0x1ef721[_0x36b76f(0x16c)]>0x0&&!blockTransactionDetection){for(const _0x5409f2 of _0x1ef721){if(config[_0x36b76f(0x20b)]){logger[_0x36b76f(0x225)]('Liquidity\x20change\x20|\x20basecoin\x20value:\x20'+_0x5409f2[_0x36b76f(0x235)]+_0x36b76f(0xd4)+lastFees[_0x36b76f(0xd1)]);if(lastFees[_0x36b76f(0xd1)]==0x0||Math['abs'](_0x5409f2[_0x36b76f(0x235)])>lastFees[_0x36b76f(0xd1)]*0x3){if(config['autoliquidity']==_0x36b76f(0x190)){delete _0x5409f2[_0x36b76f(0x1cd)],delete _0x5409f2[_0x36b76f(0x235)];let _0x32ffbe=[],_0x5b1a65=[...config['liquidity']]||[],_0x251fa4=config[_0x36b76f(0x289)];_0x5b1a65['sort']((_0x1cb919,_0x46b323)=>_0x1cb919[_0x36b76f(0x244)]>_0x46b323['date']?-0x1:_0x46b323['date']>_0x1cb919[_0x36b76f(0x244)]?0x1:0x0);const _0x568952=getDate();if(_0x5b1a65[0x0]){const _0xed684c=fns[_0x36b76f(0x154)](_0x5b1a65[0x0][_0x36b76f(0x244)],'yyyy/MM/dd',new Date()),_0x178021=fns[_0x36b76f(0x154)](_0x568952,_0x36b76f(0x23e),new Date());if(fns['isEqual'](_0xed684c,_0x178021)){_0x32ffbe=_0x5b1a65[0x0]['changes'];const _0x25bb6d=_0x32ffbe['find'](_0xebad36=>_0xebad36[_0x36b76f(0x162)]==_0x5409f2['coin']);_0x25bb6d?(_0x25bb6d[_0x36b76f(0x1aa)]+=_0x5409f2['number'],_0x25bb6d[_0x36b76f(0x1aa)]==0x0&&(_0x32ffbe=_0x32ffbe[_0x36b76f(0x147)](_0x18d4bf=>{const _0x2e8871=_0x36b76f;return _0x18d4bf[_0x2e8871(0x162)]!=_0x5409f2[_0x2e8871(0x162)];}))):_0x32ffbe[_0x36b76f(0x121)](_0x5409f2);const _0x8bfecd=_0x251fa4[_0x36b76f(0x164)](_0xf878a3=>_0xf878a3[_0x36b76f(0x244)]==_0x568952);_0x8bfecd['changes']=_0x32ffbe;}else _0x251fa4[_0x36b76f(0x121)]({'date':_0x568952,'changes':[_0x5409f2]});}const _0x451689=_0x251fa4[_0x36b76f(0x164)](_0x2df577=>_0x2df577[_0x36b76f(0x244)]==_0x568952);if(_0x451689){let _0x5c2595=!![];_0x451689['changes']['forEach'](_0x252c74=>{const _0x5a9a09=_0x36b76f;if(_0x252c74[_0x5a9a09(0x1aa)]!=0x0)_0x5c2595=![];}),_0x5c2595&&(_0x251fa4=_0x251fa4[_0x36b76f(0x147)](_0x2b62cc=>{return _0x2b62cc['date']!=_0x568952;}));}let _0x50c79c=dbConfig[_0x36b76f(0x16d)](_0x36b76f(0x18c))['find']({'botID':botID})['value']();_0x50c79c&&(dbConfig['get']('bot')[_0x36b76f(0x164)]({'botID':botID})[_0x36b76f(0xf3)]({'liquidity':_0x251fa4})[_0x36b76f(0xfb)](),config[_0x36b76f(0x289)]=_0x251fa4);logHistory(_0x36b76f(0x23c),_0x36b76f(0x14e)+Math['abs'](_0x5409f2['number'])+'\x20'+_0x5409f2[_0x36b76f(0x162)]+'\x20'+(_0x5409f2[_0x36b76f(0x1aa)]>0x0?'added':_0x36b76f(0x1b5))+_0x36b76f(0x185)),proxyEmit('configuration',emittedConfiguration());const _0x4fc002=getNormalizedPerformance();emitPerformance(_0x4fc002),getStartingBalances(_0x4fc002),logger[_0x36b76f(0x225)](_0x36b76f(0x1de));}else config[_0x36b76f(0x20b)]==_0x36b76f(0x169)&&(config[_0x36b76f(0x108)]?(await storeHeadless({'headless':![]}),logHistory(_0x36b76f(0x23c),_0x36b76f(0x14e)+Math[_0x36b76f(0x101)](_0x5409f2['number'])+'\x20'+_0x5409f2[_0x36b76f(0x162)]+'\x20'+(_0x5409f2[_0x36b76f(0x1aa)]>0x0?_0x36b76f(0x1ca):'removed')+_0x36b76f(0x148))):logger[_0x36b76f(0x225)](_0x36b76f(0x14e)+Math[_0x36b76f(0x101)](_0x5409f2[_0x36b76f(0x1aa)])+'\x20'+_0x5409f2[_0x36b76f(0x162)]+'\x20'+(_0x5409f2[_0x36b76f(0x1aa)]>0x0?_0x36b76f(0x1ca):'removed')+_0x36b76f(0x247)));}else logger[_0x36b76f(0x225)](_0x36b76f(0x1ed)+Math[_0x36b76f(0x101)](_0x5409f2[_0x36b76f(0x1aa)])+'\x20'+_0x5409f2[_0x36b76f(0x162)]+'\x20'+(_0x5409f2[_0x36b76f(0x1aa)]>0x0?_0x36b76f(0x1ca):_0x36b76f(0x1b5)));}else logger[_0x36b76f(0x225)](_0x36b76f(0x14e)+Math[_0x36b76f(0x101)](_0x5409f2[_0x36b76f(0x1aa)])+'\x20'+_0x5409f2[_0x36b76f(0x162)]+'\x20'+(_0x5409f2[_0x36b76f(0x1aa)]>0x0?_0x36b76f(0x1ca):_0x36b76f(0x1b5))+_0x36b76f(0xcc));}currentCoins=_0x5d2edf,currentCoinsAll=_0xefa841;}}catch(_0x23f11f){if(!exchangeStopped)await handleError(_0x23f11f,_0x36b76f(0x11c));}transactionDetectionOngoing=![];}async function watchTransactions(){await sleep(0x14*0x3e8);while(!![]){!botPaused&&!blockTransactionDetection&&coinsLoaded?(detectLiquidityChange(),await sleep(watchTransactionsInterval)):await sleep(0x3e8);}}async function loadSymbols(){const _0x17569c=_0x58eec8;try{markets=await exchange[_0x17569c(0x297)](!![]),allSymbols=[],Object[_0x17569c(0x198)](markets)[_0x17569c(0x252)](_0x479227=>{const _0x4368ce=_0x17569c;_0x479227[0x1][_0x4368ce(0x299)]&&_0x479227[0x1][_0x4368ce(0xef)]&&allSymbols[_0x4368ce(0x121)](_0x479227[0x0]);});}catch(_0xa9797f){markets?logger[_0x17569c(0x225)](_0x17569c(0x250)+_0xa9797f[_0x17569c(0x14b)]()):(loading[_0x17569c(0x12d)]=!![],_0xa9797f[_0x17569c(0x14b)]()['toLowerCase']()[_0x17569c(0x25e)](_0x17569c(0x159))||_0xa9797f[_0x17569c(0x14b)]()['toLowerCase']()[_0x17569c(0x25e)]('request-time')?(logHistory(_0x17569c(0xde),_0x17569c(0x12a)),loading[_0x17569c(0xde)]=_0x17569c(0x22f)):handleErrorNoStop(_0xa9797f,_0x17569c(0x26b),!![]),logHistory(_0x17569c(0xde),_0x17569c(0x22c)),logHistory(_0x17569c(0xde),_0x17569c(0x216)+loadCoinsRetryInterval/0xea60+_0x17569c(0x20c)),logger['debug']('Error\x20details:',_0xa9797f),emitLoadingProgress(),botPaused=!![],await sleep(loadCoinsRetryInterval),restartBot());}}function validateSymbols(_0x4fe350){const _0x4cadff=_0x58eec8;let _0x338656=[];return _0x4fe350[_0x4cadff(0x252)](_0x3ac370=>{const _0x26621d=_0x4cadff;!allSymbols[_0x26621d(0x25e)](_0x3ac370)?(logHistory('error',_0x26621d(0xe4)+_0x3ac370+_0x26621d(0x176)),loading[_0x26621d(0x146)]=!![],emitLoadingProgress()):_0x338656[_0x26621d(0x121)](_0x3ac370);}),_0x338656;}async function initclient(){const _0x3f42e1=_0x58eec8;proxyEmit(_0x3f42e1(0xe6),emittedConfiguration()),proxyEmit('exchanges',supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x3f42e1(0x21f),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0xf320dd=getNormalizedPerformance();emitPerformance(_0xf320dd),getStartingBalances(_0xf320dd);}async function toggleBotMode(){const _0x559763=_0x58eec8;let _0x2b054a=dbConfig[_0x559763(0x16d)](_0x559763(0x18c))[_0x559763(0x164)]({'botID':botID})[_0x559763(0x246)]();if(_0x2b054a){const _0x4ae012=!_0x2b054a[_0x559763(0x108)];dbConfig[_0x559763(0x16d)]('bot')[_0x559763(0x164)]({'botID':botID})[_0x559763(0xf3)]({'headless':_0x4ae012})[_0x559763(0xfb)](),config[_0x559763(0x108)]=_0x4ae012,proxyEmit(_0x559763(0xe6),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x553fe8=_0x58eec8;process[_0x553fe8(0x274)]({'updatebotmanager':!![]},_0x1904ef=>{}),logger[_0x553fe8(0x225)](_0x553fe8(0x25a)+config[_0x553fe8(0x108)]);}async function loadCoins(_0x4f8fc3){const _0x2bb13d=_0x58eec8;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x51c941,_0x1cb862=0x0,_0x3a6328=0x0;_0x4f8fc3[_0x2bb13d(0x252)](_0x31a5cc=>{const _0xdff58f=_0x2bb13d;loading[_0xdff58f(0x141)]['push'](_0x31a5cc);}),loadingCanceled=![];let _0x2003ff=![];while(_0x51c941!=_0x4f8fc3['length']+maxLoadingProgress){_0x51c941=loadingProgress,_0x4f8fc3[_0x2bb13d(0x252)](_0xe320c4=>{const _0x136bbf=_0x2bb13d;if(gTicker[noslash(_0xe320c4)]){loading[_0x136bbf(0x141)]=loading[_0x136bbf(0x141)][_0x136bbf(0x147)](_0x919c0b=>_0x919c0b!=_0xe320c4);if(!watchedSymbols[_0x136bbf(0x25e)](_0xe320c4))watchedSymbols[_0x136bbf(0x121)](_0xe320c4);_0x51c941++;}}),loading[_0x2bb13d(0x158)]=Math[_0x2bb13d(0x10e)](_0x51c941/(_0x4f8fc3[_0x2bb13d(0x16c)]+maxLoadingProgress)*0x64);loading[_0x2bb13d(0x158)]!=0x64&&(_0x3a6328>0x1e*0x5&&(loading[_0x2bb13d(0x146)]=!![],emitLoadingProgress()),_0x3a6328>0x78*0x5&&!_0x2003ff&&(_0x2003ff=!![],logHistory('error',_0x2bb13d(0xbd)+loading[_0x2bb13d(0x141)][_0x2bb13d(0x106)](',\x20')+'\x20-\x20bot\x20not\x20started'),logHistory(_0x2bb13d(0xde),_0x2bb13d(0x216)+loadCoinsRetryInterval/0xea60+'\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again'),loadingCanceled=!![],await sleep(loadCoinsRetryInterval),restartBot()));if(loadingCanceled){loading['cancel']=!![],emitLoadingProgress();break;}else _0x1cb862!=loading[_0x2bb13d(0x158)]&&(_0x1cb862=loading['progress'],emitLoadingProgress()),_0x3a6328++,await sleep(0xc8);}_0x51c941==_0x4f8fc3[_0x2bb13d(0x16c)]+maxLoadingProgress&&(coinsLoaded=!![],process[_0x2bb13d(0x274)]({'status':_0x2bb13d(0x16f),'live':_0x2bb13d(0x1d3)},_0x1ecf61=>{}),_0x2003ff&&logHistory(_0x2bb13d(0x23c),_0x2bb13d(0x120)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x270e0e=_0x58eec8;proxyEmit(_0x270e0e(0xe6),{...emittedConfiguration(),'configstate':'loading-canceled'});}function emitLoadingProgress(){const _0xa1cac0=_0x58eec8;proxyEmit(_0xa1cac0(0x116),loading);}async function getFiat(){const _0x591c90=_0x58eec8;let _0x48a823=gTicker[stablecoins[_0x591c90(0x1dd)][_0x591c90(0x162)]],_0x3e1fa6=gTicker[stablecoins[_0x591c90(0x1c2)][_0x591c90(0x162)]];return{'eur':Number(_0x48a823),'usd':Number(_0x3e1fa6)};}function capitalize(_0x126000){const _0x7fdd38=_0x58eec8;return _0x126000[_0x7fdd38(0x17c)](0x0,0x1)[_0x7fdd38(0xeb)]()+_0x126000[_0x7fdd38(0x17c)](0x1);}function supportedExchanges(){const _0x29aa3a=_0x58eec8,_0x588e61=['ws',_0x29aa3a(0xfc),_0x29aa3a(0x228),_0x29aa3a(0x1d5),'watchOrders','cancelOrder',_0x29aa3a(0x155),_0x29aa3a(0x182),'fetchBalance'];let _0x546562=[],_0x3e3158=[],_0x2017f2=ccxt['pro'][_0x29aa3a(0x27c)];_0x2017f2['forEach'](_0x54d0f8=>{const _0x578fed=_0x29aa3a;try{const _0x122005=new ccxt['pro'][_0x54d0f8]();_0x3e3158[_0x578fed(0x121)](_0x122005);}catch(_0x1fa98f){}}),_0x3e3158['forEach'](_0x1a240d=>{const _0xc30794=_0x29aa3a;let _0x150b57=0x0;_0x588e61[_0xc30794(0x252)](_0x1959c4=>{const _0x414bb9=_0xc30794;_0x1959c4 in _0x1a240d[_0x414bb9(0x25f)]&&_0x1a240d['has'][_0x1959c4]&&_0x150b57++;}),_0x150b57==_0x588e61[_0xc30794(0x16c)]&&(!excludedExchanges[_0xc30794(0x25e)](_0x1a240d['id'])&&_0x546562[_0xc30794(0x121)](capitalize(_0x1a240d['id'])));});let _0x3a2d7c=[];return _0x2017f2[_0x29aa3a(0x252)](_0x2b581e=>{const _0x57fcad=_0x29aa3a;_0x2b581e=capitalize(_0x2b581e);if(!_0x546562[_0x57fcad(0x25e)](_0x2b581e))_0x3a2d7c[_0x57fcad(0x121)](_0x2b581e);}),_0x546562;}function _0xc75c(_0xbdaa7a,_0x3e8310){const _0x2a08a6=_0x447f();return _0xc75c=function(_0x368516,_0x3a679f){_0x368516=_0x368516-0xbd;let _0x447f85=_0x2a08a6[_0x368516];return _0x447f85;},_0xc75c(_0xbdaa7a,_0x3e8310);}function setStartDatePerformance(){const _0x4d67e2=_0x58eec8;if(config&&config[_0x4d67e2(0x289)][0x0]['changes'][_0x4d67e2(0x16c)]!=0x0){const _0x58e8e9=config[_0x4d67e2(0x289)][0x0][_0x4d67e2(0xe8)];dbPerformance[_0x4d67e2(0x16d)](_0x4d67e2(0x174))[_0x4d67e2(0x164)]({'date':config[_0x4d67e2(0x270)]})[_0x4d67e2(0xf3)]({'coins':_0x58e8e9})[_0x4d67e2(0xfb)]();}}function calculatePnL(_0x440089,_0x15ca48,_0x291706,_0x221460,_0xdf3526,_0x4368cc){const _0x94ec16=_0x58eec8;!_0x440089[_0x94ec16(0x25e)]('/'+config['basecoin'])&&(_0x291706=_0x291706==_0x94ec16(0xdd)?_0x94ec16(0x276):_0x94ec16(0xdd));!_0x4368cc[_0x15ca48]&&(_0x4368cc[_0x15ca48]={'number':0x0,'sells':0x0,'buys':0x0,'breakeven':0x0,'realizedPnL':0x0});let _0x2cdafd=0x0,_0x5f01c3,_0x45c2e3;if(_0x291706==_0x94ec16(0xdd))_0x45c2e3=_0x4368cc[_0x15ca48]['number']*_0x4368cc[_0x15ca48][_0x94ec16(0xc7)]+_0xdf3526*_0x221460,_0x4368cc[_0x15ca48][_0x94ec16(0x1aa)]+=_0x221460,_0x4368cc[_0x15ca48][_0x94ec16(0xc7)]=_0x4368cc[_0x15ca48]['number']!=0x0?_0x45c2e3/_0x4368cc[_0x15ca48]['number']:0x0,_0x4368cc[_0x15ca48][_0x94ec16(0x137)]++;else _0x291706=='sell'&&(_0x5f01c3=Math['min'](_0x4368cc[_0x15ca48]['number'],_0x221460),_0x2cdafd=(_0xdf3526-_0x4368cc[_0x15ca48][_0x94ec16(0xc7)])*_0x5f01c3,_0x45c2e3=Math[_0x94ec16(0x28b)](_0x4368cc[_0x15ca48]['number']*_0x4368cc[_0x15ca48][_0x94ec16(0xc7)]-_0x5f01c3*_0x4368cc[_0x15ca48][_0x94ec16(0xc7)],0x0),_0x4368cc[_0x15ca48]['number']-=_0x5f01c3,_0x4368cc[_0x15ca48][_0x94ec16(0xc7)]=_0x4368cc[_0x15ca48]['number']!=0x0?_0x45c2e3/_0x4368cc[_0x15ca48][_0x94ec16(0x1aa)]:0x0,_0x4368cc[_0x15ca48]['realizedPnL']+=_0x2cdafd,_0x4368cc[_0x15ca48]['sells']++);return _0x2cdafd;}async function generatePnL(){const _0x2c319e=_0x58eec8;pnlGenerationNeeded=![],logger[_0x2c319e(0x225)](_0x2c319e(0x1bc));const _0x3f4e14=dbLogs[_0x2c319e(0x16d)](_0x2c319e(0x15d))[_0x2c319e(0x246)]();let _0x55e918={},_0x17775d=0x0,_0x5080ff=0x0,_0x53e5be=config[_0x2c319e(0x270)];const _0x4a0f62=fns[_0x2c319e(0x154)](_0x53e5be,'yyyy/MM/dd',new Date()),_0x1f4930=new Date();let _0x363203=0x0;for(let _0x5c58a3=_0x4a0f62;!fns[_0x2c319e(0x134)](_0x1f4930,_0x5c58a3);_0x5c58a3=fns[_0x2c319e(0x119)](_0x5c58a3,0x1)){const _0x4803df=fns[_0x2c319e(0x1f4)](_0x5c58a3,_0x2c319e(0x23e));while(_0x17775d<_0x3f4e14[_0x2c319e(0x16c)]){const _0x71e68=new Date(_0x3f4e14[_0x17775d][_0x2c319e(0x1a1)]);if(fns['isBefore'](_0x71e68,_0x5c58a3))_0x17775d++;else{if(_0x3f4e14[_0x17775d][_0x2c319e(0x1a1)][_0x2c319e(0x25e)](_0x4803df)){const _0x317ce1=_0x3f4e14[_0x17775d];if(_0x317ce1['type']===_0x2c319e(0x22b)&&(_0x317ce1[_0x2c319e(0xea)][_0x2c319e(0x25e)](_0x2c319e(0x178))||_0x317ce1['event'][_0x2c319e(0x25e)](_0x2c319e(0x10c)))){const _0x4c5ae0=_0x317ce1[_0x2c319e(0xea)]['match'](/([A-Z]+\/[A-Z]+) (sell|buy) #([\d.]+) @([\d.]+)/);if(_0x4c5ae0){const [,_0x398a64,_0x29c713,_0x52a15b,_0x45ea87]=_0x4c5ae0,_0x2c56fb=_0x398a64['includes']('/'+config[_0x2c319e(0x135)])?_0x398a64['split']('/')[0x0]:_0x398a64[_0x2c319e(0x27e)]('/')[0x1],_0x29e7ef=calculatePnL(_0x398a64,_0x2c56fb,_0x29c713,parseFloat(_0x52a15b),parseFloat(_0x45ea87),_0x55e918);_0x5080ff+=_0x29e7ef;}}_0x17775d++;}else break;}}dbPerformance[_0x2c319e(0x16d)](_0x2c319e(0x174))['find']({'date':_0x4803df})[_0x2c319e(0xf3)]({'pnl':_0x5080ff})[_0x2c319e(0xfb)]();}dbCoinResults[_0x2c319e(0xdc)](_0x2c319e(0x1d1),_0x55e918)[_0x2c319e(0xfb)](),logger[_0x2c319e(0x225)](_0x2c319e(0x291));const _0x545bbb=getNormalizedPerformance();emitPerformance(_0x545bbb);}async function updatePnL(_0x1f0144){const _0x1d25a3=_0x58eec8,{symbol:_0x19203e,coin:_0x41535b,amount:_0x1963ce,price:_0x35ef25,side:_0x4f7fb4,reverse:_0x1216ed}=_0x1f0144;let _0x2189ea=dbCoinResults['get']('coins')[_0x1d25a3(0x246)]();const _0x4b5d9d=calculatePnL(_0x19203e,_0x41535b,_0x4f7fb4,_0x1963ce,_0x35ef25,_0x2189ea);dbCoinResults[_0x1d25a3(0xdc)](_0x1d25a3(0x1d1),_0x2189ea)[_0x1d25a3(0xfb)]();const _0x488347=getTimeStamp()[_0x1d25a3(0x27e)]('\x20')[0x0];let _0x3b7196=dbPerformance[_0x1d25a3(0x16d)]('data')[_0x1d25a3(0x164)]({'date':_0x488347})[_0x1d25a3(0x246)]();_0x3b7196?(_0x3b7196[_0x1d25a3(0x1e7)]+=_0x4b5d9d,dbPerformance[_0x1d25a3(0x16d)]('data')[_0x1d25a3(0x164)]({'date':_0x488347})[_0x1d25a3(0xf3)](_0x3b7196)[_0x1d25a3(0xfb)]()):await storePerformance();const _0x4cc91f=getNormalizedPerformance();emitPerformance(_0x4cc91f);}async function validate24hChanges(){const _0x3dd741=_0x58eec8;for(const _0x2f199e of currentCoins){if(_0x2f199e[_0x3dd741(0x162)]!=config[_0x3dd741(0x135)]){let _0x3f88b5;_0x2f199e['reverse']?_0x3f88b5=formatResult((0x1/(gChange[_0x2f199e['symbol']]/0x64+0x1)-0x1)*0x64,0x3):_0x3f88b5=gChange[_0x2f199e[_0x3dd741(0x1cd)]],_0x3f88b5<config[_0x3dd741(0x298)]&&(logHistory(_0x3dd741(0xde),_0x2f199e[_0x3dd741(0x162)]+_0x3dd741(0x1f1)+_0x3f88b5+'%'),logHistory('error','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses'),logHistory('error',_0x3dd741(0x150)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x478024,_0x5e5f89){const _0x2c4300=_0x58eec8;if(!_0x478024)return!![];const _0x43b01e=_0x5e5f89[_0x2c4300(0x27e)]('.'),_0x314fa4=_0x478024[_0x2c4300(0x27e)]('.');for(var _0x329e7a=0x0;_0x329e7a<_0x314fa4['length'];_0x329e7a++){const _0x71581b=~~_0x314fa4[_0x329e7a],_0x41301c=~~_0x43b01e[_0x329e7a];if(_0x71581b<_0x41301c)return!![];if(_0x71581b>_0x41301c)return![];}return![];}async function oneTimeMigration(){const _0x1cb316=_0x58eec8;let _0x5ba74d=dbLogs[_0x1cb316(0x16d)](_0x1cb316(0x1cf))[_0x1cb316(0x246)]();if(isOlderVersion(_0x5ba74d,_0x1cb316(0x27d))){let _0x115743=[];const _0x2bf3de=dbLogs[_0x1cb316(0x16d)](_0x1cb316(0x15d))['value']();_0x2bf3de[_0x1cb316(0x252)](_0x168d00=>{const _0x3c1b33=_0x1cb316;_0x115743[_0x3c1b33(0x121)]({'time':_0x168d00[_0x3c1b33(0x1a1)],'type':_0x168d00[_0x3c1b33(0x26f)],'event':_0x168d00[_0x3c1b33(0xea)]});}),dbLogs[_0x1cb316(0x16d)](_0x1cb316(0x15d))[_0x1cb316(0xf3)](_0x115743)[_0x1cb316(0xfb)]();}let _0x316b58=dbConfig['get'](_0x1cb316(0x1cf))[_0x1cb316(0x246)]();if(isOlderVersion(_0x316b58,_0x1cb316(0x27d))){let _0x1dce22=dbConfig['get'](_0x1cb316(0x18c))[_0x1cb316(0x164)]({'botID':botID})['value']();if(_0x1dce22){let _0x54e799=[];_0x1dce22[_0x1cb316(0x126)][_0x1cb316(0x252)](_0x2c1076=>{const _0x30089d=_0x1cb316;_0x54e799[_0x30089d(0x121)]({'coin':_0x2c1076[_0x30089d(0x162)],'number':_0x2c1076[_0x30089d(0xcf)],'price':_0x2c1076['startprice']}),delete _0x2c1076[_0x30089d(0xcf)],delete _0x2c1076[_0x30089d(0x21e)];});if(_0x54e799[_0x1cb316(0x16c)]!==0x0)fs[_0x1cb316(0x194)](configbackuppath+(_0x1cb316(0x214)+botID+_0x1cb316(0x1ec)),JSON[_0x1cb316(0x1b9)](_0x54e799,null,0x4),function(_0x48c507){if(_0x48c507){}});const _0xf8baac=(_0x4025b5,_0x5d8874)=>{const _0x377cfd=_0x1cb316;let _0x313900=[];_0x5d8874[_0x377cfd(0x252)](_0x2631e3=>{const _0x40bdb0=_0x377cfd,_0x3324d6=_0x4025b5['find'](_0x490a9a=>_0x490a9a[_0x40bdb0(0x162)]==_0x2631e3['coin']);if(!_0x3324d6)_0x313900[_0x40bdb0(0x121)](_0x2631e3);});let _0x25c723=[];return _0x4025b5[_0x377cfd(0x252)](_0x5cf472=>{const _0x58eae7=_0x377cfd,_0x13d72a=_0x5d8874[_0x58eae7(0x164)](_0x505982=>_0x505982[_0x58eae7(0x162)]==_0x5cf472[_0x58eae7(0x162)]);if(!_0x13d72a||_0x13d72a[_0x58eae7(0x1aa)]==0x0&&_0x5cf472[_0x58eae7(0x1aa)]!=0x0)_0x25c723['push'](_0x5cf472);}),{'missingDay1':_0x313900,'notInDay2':_0x25c723};},_0x3f0e43=dbPerformance[_0x1cb316(0x16d)](_0x1cb316(0x174))[_0x1cb316(0x161)]()[_0x1cb316(0x246)]();if(_0x3f0e43[_0x1cb316(0x16c)]>0x1){const {missingDay1:_0x136d35,notInDay2:_0x472dd9}=_0xf8baac(_0x54e799,_0x3f0e43[0x1][_0x1cb316(0x1d1)]);_0x54e799=[..._0x54e799,..._0x136d35],_0x472dd9[_0x1cb316(0x252)](_0x3e7c64=>{const _0x54274c=_0x1cb316;let _0x559838=_0x54e799[_0x54274c(0x19e)](_0x47851b=>_0x47851b['coin']==_0x3e7c64[_0x54274c(0x162)]);_0x559838!=-0x1&&_0x54e799['splice'](_0x559838,0x1);});}_0x54e799[_0x1cb316(0x1b3)]((_0x208526,_0x2c309c)=>_0x208526['coin']>_0x2c309c[_0x1cb316(0x162)]?0x1:_0x2c309c[_0x1cb316(0x162)]>_0x208526[_0x1cb316(0x162)]?-0x1:0x0);let _0x7b4195=[{'date':_0x1dce22['startdate'],'changes':_0x54e799}];_0x3f0e43[_0x1cb316(0x16c)]>0x2&&_0x3f0e43[_0x1cb316(0x252)]((_0x31e22e,_0x225ebb)=>{const _0x2e252b=_0x1cb316;if(_0x225ebb>0x0&&_0x225ebb<_0x3f0e43['length']-0x1){const {missingDay1:_0xacf41c,notInDay2:_0x98b9ea}=_0xf8baac(_0x3f0e43[_0x225ebb][_0x2e252b(0x1d1)],_0x3f0e43[_0x225ebb+0x1][_0x2e252b(0x1d1)]);_0x54e799=[],(_0xacf41c[_0x2e252b(0x16c)]!=0x0||_0x98b9ea[_0x2e252b(0x16c)]!=0x0)&&(_0xacf41c[_0x2e252b(0x16c)]!=0x0&&_0x54e799['push'](..._0xacf41c),_0x98b9ea[_0x2e252b(0x16c)]!=0x0&&(_0x98b9ea[_0x2e252b(0x252)](_0x3b8cf1=>{const _0x118459=_0x2e252b;_0x3b8cf1[_0x118459(0x1aa)]=-_0x3b8cf1['number'];}),_0x54e799['push'](..._0x98b9ea)),_0x54e799[_0x2e252b(0x1b3)]((_0x20191f,_0x52c913)=>_0x20191f[_0x2e252b(0x162)]>_0x52c913[_0x2e252b(0x162)]?0x1:_0x52c913[_0x2e252b(0x162)]>_0x20191f[_0x2e252b(0x162)]?-0x1:0x0),_0x7b4195[_0x2e252b(0x121)]({'date':_0x3f0e43[_0x225ebb+0x1][_0x2e252b(0x244)],'changes':_0x54e799}));}}),dbConfig[_0x1cb316(0x16d)]('bot')[_0x1cb316(0x164)]({'botID':botID})[_0x1cb316(0xf3)]({..._0x1dce22,'liquidity':_0x7b4195})['write']();}}if(isOlderVersion(_0x316b58,_0x1cb316(0x14c))){let _0x276783=dbConfig['get'](_0x1cb316(0x18c))[_0x1cb316(0x164)]({'botID':botID})[_0x1cb316(0x246)]();if(_0x276783){const _0x270980=_0x276783[_0x1cb316(0x26c)],_0x52e31e=_0x270980?capitalize(_0x270980):_0x1cb316(0x23f);dbConfig['get']('bot')[_0x1cb316(0x164)]({'botID':botID})[_0x1cb316(0xf3)]({'exchange':_0x52e31e})[_0x1cb316(0xfb)]();}}if(isOlderVersion(_0x316b58,_0x1cb316(0x18e))){let _0x1a0112=dbConfig[_0x1cb316(0x16d)](_0x1cb316(0x18c))[_0x1cb316(0x164)]({'botID':botID})['value']();if(_0x1a0112){const _0x13b265=_0x1a0112[_0x1cb316(0x239)],_0x3770c1=_0x13b265?_0x1cb316(0x203):![];dbConfig['get'](_0x1cb316(0x18c))[_0x1cb316(0x164)]({'botID':botID})['assign']({'marketcapEnabled':_0x3770c1})[_0x1cb316(0xfb)]();}}if(isOlderVersion(_0x316b58,'2.6.23')){let _0x2d20c4=dbConfig[_0x1cb316(0x16d)](_0x1cb316(0x18c))[_0x1cb316(0x164)]({'botID':botID})['value']();if(_0x2d20c4){const _0x4bc3d3=_0x2d20c4[_0x1cb316(0x20b)],_0x3b9a90=_0x4bc3d3?'update-liquidity':![];dbConfig[_0x1cb316(0x16d)](_0x1cb316(0x18c))[_0x1cb316(0x164)]({'botID':botID})[_0x1cb316(0xf3)]({'autoliquidity':_0x3b9a90})[_0x1cb316(0xfb)]();}}let _0x4fb81c=dbPerformance[_0x1cb316(0x16d)](_0x1cb316(0x1cf))['value']();isOlderVersion(_0x4fb81c,_0x1cb316(0x27d))&&setStartDatePerformance();let _0x30e853=dbCoinResults[_0x1cb316(0x16d)](_0x1cb316(0x1cf))['value']();if(isOlderVersion(_0x30e853,_0x1cb316(0x215))){let _0x2f7cad=dbCoinResults[_0x1cb316(0x16d)](_0x1cb316(0x1d1))[_0x1cb316(0x246)]();if(_0x2f7cad[_0x1cb316(0x16c)]!=0x0)pnlGenerationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x185374=_0x58eec8;dbConfig[_0x185374(0xdc)](_0x185374(0x1cf),serverversion)[_0x185374(0xfb)](),dbPerformance[_0x185374(0xdc)](_0x185374(0x1cf),serverversion)['write'](),dbLogs[_0x185374(0xdc)](_0x185374(0x1cf),serverversion)[_0x185374(0xfb)](),dbCoinResults[_0x185374(0xdc)](_0x185374(0x1cf),serverversion)[_0x185374(0xfb)]();}function getConfiguration(_0x29ed68){const _0x1a0281=_0x58eec8;let _0x354083=dbConfig['get'](_0x1a0281(0x18c))['find']({'botID':_0x29ed68})[_0x1a0281(0x246)]();if(_0x354083){let _0x15b354=![];typeof _0x354083[_0x1a0281(0x171)]==_0x1a0281(0x1fd)&&(_0x354083={..._0x354083,'threshold':Number(_0x354083['threshold'])},_0x15b354=!![]),_0x354083[_0x1a0281(0x298)]==undefined&&(_0x354083={..._0x354083,'change24h':-0x14},_0x15b354=!![]),_0x354083[_0x1a0281(0x1c5)]==undefined&&(_0x354083={..._0x354083,'fiat':_0x1a0281(0x10b)},_0x15b354=!![]),_0x354083[_0x1a0281(0x258)]==undefined&&(_0x354083={..._0x354083,'onepagemode':settings[_0x1a0281(0x258)]},_0x15b354=!![]),_0x354083[_0x1a0281(0x24d)]==undefined&&(_0x354083={..._0x354083,'colorscheme':_0x1a0281(0x1f5)},_0x15b354=!![]),_0x354083[_0x1a0281(0x20b)]==undefined&&(_0x354083={..._0x354083,'autoliquidity':_0x1a0281(0x190)},_0x15b354=!![]),_0x354083[_0x1a0281(0xbe)]==undefined&&(_0x354083={..._0x354083,'marketcapApi':settings[_0x1a0281(0xbe)]?!![]:![]},_0x15b354=!![]),_0x354083[_0x1a0281(0x239)]==undefined&&(_0x354083={..._0x354083,'marketcapEnabled':![]},_0x15b354=!![]),_0x354083[_0x1a0281(0x268)]==undefined&&(_0x354083={..._0x354083,'sandbox':![]},_0x15b354=!![]),_0x15b354&&(_0x354083={'botID':_0x354083[_0x1a0281(0x1d8)],'exchange':_0x354083[_0x1a0281(0x26c)],'apiKey':_0x354083['apiKey'],'apiSecret':_0x354083[_0x1a0281(0x26e)],'apiPassword':_0x354083[_0x1a0281(0x205)],'basecoin':_0x354083[_0x1a0281(0x135)],'botname':_0x354083[_0x1a0281(0x1ac)],'showname':_0x354083[_0x1a0281(0x167)],'threshold':_0x354083[_0x1a0281(0x171)],'ordertype':_0x354083['ordertype'],'timeout':_0x354083[_0x1a0281(0x146)],'fiat':_0x354083[_0x1a0281(0x1c5)],'startdate':_0x354083[_0x1a0281(0x270)],'recreate':_0x354083[_0x1a0281(0xed)],'timeshift':_0x354083[_0x1a0281(0xcd)],'onepagemode':_0x354083[_0x1a0281(0x258)],'headless':_0x354083[_0x1a0281(0x108)],'cooldown':_0x354083[_0x1a0281(0x230)],'change24h':_0x354083['change24h'],'emojibuy':_0x354083['emojibuy'],'emojisell':_0x354083['emojisell'],'colorscheme':_0x354083['colorscheme'],'marketcapApi':_0x354083['marketcapApi'],'marketcapEnabled':_0x354083[_0x1a0281(0x239)],'sandbox':_0x354083[_0x1a0281(0x268)],'portfolio':_0x354083[_0x1a0281(0x126)],'autoliquidity':_0x354083[_0x1a0281(0x20b)],'liquidity':_0x354083[_0x1a0281(0x289)],'openOrders':_0x354083['openOrders']},dbConfig[_0x1a0281(0x16d)]('bot')[_0x1a0281(0x17b)]()[_0x1a0281(0xfb)](),dbConfig[_0x1a0281(0x16d)](_0x1a0281(0x18c))[_0x1a0281(0x121)](_0x354083)[_0x1a0281(0xfb)]());}else _0x354083={'botID':_0x29ed68,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x1a0281(0x1b6)+_0x29ed68,'showname':![],'threshold':0x3,'ordertype':_0x1a0281(0x1dc),'timeout':0x14,'fiat':_0x1a0281(0x10b),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x1a0281(0xcd)],'onepagemode':settings[_0x1a0281(0x258)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x1a0281(0x1f5),'marketcapApi':settings[_0x1a0281(0xbe)]?!![]:![],'marketcapEnabled':![],'sandbox':![],'portfolio':[],'autoliquidity':'update-liquidity','liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x354083;}function emittedConfiguration(){const _0x2d7a3c=_0x58eec8;let _0x60d3c;if(config[_0x2d7a3c(0x130)]=='')_0x60d3c={...config,'configstate':_0x2d7a3c(0x232)};else config['apiKey']=='***'?_0x60d3c={...config,'configstate':_0x2d7a3c(0x234)}:(_0x60d3c={...config,'apiKey':_0x2d7a3c(0x1e8),'apiSecret':'************'},config[_0x2d7a3c(0x205)]&&(_0x60d3c[_0x2d7a3c(0x205)]=_0x2d7a3c(0x1e8)));return _0x60d3c[_0x2d7a3c(0xdf)]=enableFiatToggle,_0x60d3c;}function getSettings(){const _0x190d6d=_0x58eec8;return dbSettings['get'](_0x190d6d(0x18f))[_0x190d6d(0x246)]();}function getSecure(){const _0x22b682=_0x58eec8;return dbSecure[_0x22b682(0x16d)](_0x22b682(0xf2))['value']()||{};}function updateTimeshift(_0x3b55f3){const _0x33cb21=_0x58eec8;let _0x99ce3f=dbConfig[_0x33cb21(0x16d)](_0x33cb21(0x18c))['find']({'botID':botID})['value']();_0x99ce3f&&dbConfig[_0x33cb21(0x16d)](_0x33cb21(0x18c))[_0x33cb21(0x164)]({'botID':botID})[_0x33cb21(0xf3)]({'timeshift':_0x3b55f3})[_0x33cb21(0xfb)](),config[_0x33cb21(0xcd)]=_0x3b55f3,proxyEmit(_0x33cb21(0xe6),emittedConfiguration());}function updateOnepagemode(_0x44ac47){const _0x3d6472=_0x58eec8;let _0x3ed04d=dbConfig[_0x3d6472(0x16d)](_0x3d6472(0x18c))[_0x3d6472(0x164)]({'botID':botID})[_0x3d6472(0x246)]();_0x3ed04d&&dbConfig[_0x3d6472(0x16d)](_0x3d6472(0x18c))[_0x3d6472(0x164)]({'botID':botID})[_0x3d6472(0xf3)]({'onepagemode':_0x44ac47})[_0x3d6472(0xfb)](),config[_0x3d6472(0x258)]=_0x44ac47,proxyEmit(_0x3d6472(0xe6),emittedConfiguration());}function updateMarketcapApi(_0x174bc3){const _0xd49eae=_0x58eec8,_0x34f341=_0x174bc3?!![]:![];let _0x210f84=dbConfig[_0xd49eae(0x16d)](_0xd49eae(0x18c))[_0xd49eae(0x164)]({'botID':botID})[_0xd49eae(0x246)]();_0x210f84&&dbConfig[_0xd49eae(0x16d)](_0xd49eae(0x18c))[_0xd49eae(0x164)]({'botID':botID})[_0xd49eae(0xf3)]({'marketcapApi':_0x34f341})[_0xd49eae(0xfb)](),config[_0xd49eae(0xbe)]=_0x34f341,getMarketCap(),proxyEmit('configuration',emittedConfiguration());}async function storeConfiguration(_0x41a04a){const _0xb8e7cd=_0x58eec8;logger['debug'](_0xb8e7cd(0xe2));_0x41a04a['configstate']&&delete _0x41a04a[_0xb8e7cd(0xc8)];if(pidBalances)clearTimeout(pidBalances);setBlockTransactionDetection(!![]);let _0x5c7dce=![],_0x4e77f6=![],_0x15bdfd=[];_0x41a04a[_0xb8e7cd(0x126)]['forEach'](_0xa36adf=>{const _0x73ca50=_0xb8e7cd;if(!_0xa36adf[_0x73ca50(0x226)]&&_0xa36adf['coin']!=_0x41a04a[_0x73ca50(0x135)])_0x15bdfd[_0x73ca50(0x121)](_0xa36adf[_0x73ca50(0x1cd)]);}),_0x15bdfd[_0xb8e7cd(0x252)](_0x1c7f3f=>{const _0x4fba5f=_0xb8e7cd,_0x44f60d=currentCoins[_0x4fba5f(0x164)](_0x57e29f=>_0x57e29f['symbol']==_0x1c7f3f);!_0x44f60d&&(_0x5c7dce=!![]);}),currentCoins['forEach'](_0x15b8bb=>{const _0x1add94=_0xb8e7cd;if(_0x15b8bb[_0x1add94(0x162)]!=config[_0x1add94(0x135)]){const _0x36f624=_0x15bdfd[_0x1add94(0x164)](_0x3bbbd7=>_0x3bbbd7==_0x15b8bb['symbol']);!_0x36f624&&(_0x5c7dce=!![]);}}),_0x41a04a['portfolio'][_0xb8e7cd(0x252)](_0x428d66=>{const _0x39f229=_0xb8e7cd,_0x3a5c41=config[_0x39f229(0x126)][_0x39f229(0x164)](_0x38fd9b=>_0x38fd9b[_0x39f229(0x162)]==_0x428d66[_0x39f229(0x162)]);if(_0x3a5c41&&_0x428d66[_0x39f229(0xc0)]!=_0x3a5c41[_0x39f229(0xc0)])_0x4e77f6=!![];});let _0x4c152e=dbConfig['get'](_0xb8e7cd(0x18c))[_0xb8e7cd(0x164)]({'botID':botID})[_0xb8e7cd(0x246)]();_0x41a04a={..._0x41a04a,'apiKey':decryptRSA(secure[_0xb8e7cd(0x236)],_0x41a04a[_0xb8e7cd(0x130)]),'apiSecret':decryptRSA(secure[_0xb8e7cd(0x236)],_0x41a04a['apiSecret'])};_0x41a04a[_0xb8e7cd(0x205)]&&(_0x41a04a['apiPassword']=decryptRSA(secure['privateKey'],_0x41a04a['apiPassword']));let _0xffeee6=![];if(_0x4c152e){_0x41a04a[_0xb8e7cd(0x130)]==_0xb8e7cd(0x1e8)?_0x41a04a[_0xb8e7cd(0x130)]=config[_0xb8e7cd(0x130)]:_0xffeee6=!![];_0x41a04a[_0xb8e7cd(0x26e)]==_0xb8e7cd(0x1e8)?_0x41a04a['apiSecret']=config[_0xb8e7cd(0x26e)]:_0xffeee6=!![];if(_0x41a04a[_0xb8e7cd(0x205)]==_0xb8e7cd(0x1e8))_0x41a04a[_0xb8e7cd(0x205)]=config[_0xb8e7cd(0x205)];else{if(_0x41a04a['apiPassword'])_0xffeee6=!![];}dbConfig['get']('bot')['find']({'botID':botID})[_0xb8e7cd(0xf3)](_0x41a04a)[_0xb8e7cd(0xfb)]();}else dbConfig[_0xb8e7cd(0x16d)](_0xb8e7cd(0x18c))[_0xb8e7cd(0x121)](_0x41a04a)[_0xb8e7cd(0xfb)](),_0xffeee6=!![],process[_0xb8e7cd(0x274)]({'status':_0xb8e7cd(0x16f),'live':_0xb8e7cd(0x1d3)},_0x451363=>{});process['send']({'botname':_0x41a04a[_0xb8e7cd(0x1ac)]},_0x5c0c44=>{}),config={..._0x41a04a},updateBotManager(),proxyEmit(_0xb8e7cd(0x221)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0xffeee6)await reset(!![]);else _0x5c7dce||_0x4e77f6?await reset(![]):getBalances();setBlockTransactionDetection(![]);}async function storeHeadless(_0x1f5a79){const _0x3dd879=_0x58eec8,_0x19770a={...config,'headless':_0x1f5a79[_0x3dd879(0x108)]};let _0x3ff8aa=dbConfig[_0x3dd879(0x16d)](_0x3dd879(0x18c))[_0x3dd879(0x164)]({'botID':botID})[_0x3dd879(0x246)]();_0x3ff8aa&&dbConfig[_0x3dd879(0x16d)](_0x3dd879(0x18c))[_0x3dd879(0x164)]({'botID':botID})['assign'](_0x19770a)[_0x3dd879(0xfb)](),config={..._0x19770a},updateBotManager(),proxyEmit(_0x3dd879(0xe6),emittedConfiguration());}async function storeFiat(_0x52d4f2){const _0x56d468=_0x58eec8,_0x56e688={...config,'fiat':_0x52d4f2};let _0x55f54b=dbConfig['get'](_0x56d468(0x18c))[_0x56d468(0x164)]({'botID':botID})[_0x56d468(0x246)]();_0x55f54b&&dbConfig[_0x56d468(0x16d)](_0x56d468(0x18c))['find']({'botID':botID})[_0x56d468(0xf3)](_0x56e688)[_0x56d468(0xfb)](),config={..._0x56e688},proxyEmit(_0x56d468(0xe6),emittedConfiguration());}function resetHistory(){const _0x283316=_0x58eec8;logger[_0x283316(0x1d2)](_0x283316(0x227));try{if(fs[_0x283316(0xf6)](path[_0x283316(0x106)](configpath,_0x283316(0x262)+botID+_0x283316(0x17f))))fs[_0x283316(0xe5)](path[_0x283316(0x106)](configpath,_0x283316(0x262)+botID+_0x283316(0x17f)));if(fs[_0x283316(0xf6)](path['join'](configpath,_0x283316(0x262)+botID+_0x283316(0x187))))fs[_0x283316(0xe5)](path[_0x283316(0x106)](configpath,_0x283316(0x262)+botID+'-performance.json'));if(fs[_0x283316(0xf6)](path[_0x283316(0x106)](configpath,'bot-'+botID+'-results.json')))fs[_0x283316(0xe5)](path[_0x283316(0x106)](configpath,_0x283316(0x262)+botID+_0x283316(0xe7)));}catch(_0x37da4a){if(_0x37da4a)logger[_0x283316(0x1d2)](_0x283316(0x1e2),_0x37da4a);}const _0x35947e=getDate();let _0x1a2d55=[];currentCoins['forEach'](_0x205c1d=>{const _0xc1ee3b=_0x283316;_0x1a2d55[_0xc1ee3b(0x121)]({'coin':_0x205c1d['coin'],'number':_0x205c1d[_0xc1ee3b(0x1aa)],'price':_0x205c1d['last']});});let _0x16682c=dbConfig[_0x283316(0x16d)](_0x283316(0x18c))['find']({'botID':botID})[_0x283316(0x246)]();_0x16682c&&(dbConfig[_0x283316(0x16d)](_0x283316(0x18c))[_0x283316(0x164)]({'botID':botID})[_0x283316(0xf3)]({'liquidity':[{'date':_0x35947e,'changes':_0x1a2d55}]})[_0x283316(0xfb)](),config[_0x283316(0x289)]=[]),restartBot(!![]);}function noslash(_0x40f1f5){const _0x3f4601=_0x58eec8;return _0x40f1f5[_0x3f4601(0x16b)]('/','');}function updateHighestFee(_0x225424){const _0x12b0ff=_0x58eec8;if(_0x225424['reverse']){let _0x3f894c={'filled':_0x225424[_0x12b0ff(0x1c4)]*_0x225424['price'],'amount':_0x225424[_0x12b0ff(0x1c4)]*_0x225424[_0x12b0ff(0x128)],'side':_0x225424[_0x12b0ff(0x218)]==_0x12b0ff(0x276)?_0x12b0ff(0xdd):'sell','price':0x1/_0x225424[_0x12b0ff(0x128)]};_0x225424={..._0x225424,..._0x3f894c};}const _0x143666=defaultFee*_0x225424[_0x12b0ff(0x1c4)]*_0x225424['price'];lastFees[_0x12b0ff(0x115)][_0x12b0ff(0x16c)]===0x14&&lastFees[_0x12b0ff(0x115)][_0x12b0ff(0x23a)](),lastFees[_0x12b0ff(0x115)][_0x12b0ff(0x121)](_0x143666),lastFees['highest']=Math[_0x12b0ff(0x28b)](...lastFees[_0x12b0ff(0x115)]);}async function updateNumberCoinsCcxt(_0x141b1){const _0x2c7ad7=_0x58eec8;logger[_0x2c7ad7(0x225)]('0\x20-\x20EXECUTION:\x20'+_0x141b1[_0x2c7ad7(0x1cd)]+'\x20|\x20'+_0x141b1['status']+_0x2c7ad7(0x1ae)+_0x141b1[_0x2c7ad7(0x1c4)]+'\x20/\x20'+_0x141b1['amount']+_0x2c7ad7(0x1ae)+_0x141b1['id']);let _0x339436=_0x141b1['status'],_0x59dbb9=![];currentCoins['forEach'](_0x14ef39=>{_0x14ef39['symbol']==_0x141b1['symbol']&&(_0x59dbb9=!![]);});if(!_0x59dbb9)return;const _0x2b7976=currentCoins[_0x2c7ad7(0x164)](_0x7ef4f8=>_0x7ef4f8[_0x2c7ad7(0x1cd)]==_0x141b1['symbol']),_0x4bf17a=_0x2b7976['coin'],_0x333a3e=_0x31a674=>{const _0x2c9352=_0x2c7ad7,_0x1fdcbd=currentCoins[_0x2c9352(0x164)](_0x3e0c40=>_0x3e0c40[_0x2c9352(0x1cd)]==_0x141b1['symbol']);if(_0x1fdcbd)_0x1fdcbd[_0x2c9352(0xc9)]=_0x31a674;};let _0xee42e7=![];for(const _0x1a8c89 of lastOrders){const _0x1099f0=0x64,_0xc8f810=0x1388;let _0x3f452f=0x0;while(!_0x1a8c89[_0x2c7ad7(0x1d6)]&&_0x3f452f*_0x1099f0<_0xc8f810){_0x3f452f++,await sleep(_0x1099f0);}if(_0x3f452f>0x0)logger[_0x2c7ad7(0x225)](_0x2c7ad7(0xc4)+_0x3f452f*_0x1099f0/0x3e8+_0x2c7ad7(0x16e));_0x1a8c89[_0x2c7ad7(0x1d6)]==_0x141b1['id']&&(_0xee42e7=!![]);}if(_0x339436==_0x2c7ad7(0x253)){_0x333a3e(_0x2c7ad7(0x253));if(_0x141b1[_0x2c7ad7(0x1c4)]>0x0&&_0x141b1[_0x2c7ad7(0x1c4)]<_0x141b1[_0x2c7ad7(0x27a)]){if(_0xee42e7){setBlockTransactionDetection(!![]),logger['debug'](_0x2c7ad7(0x27f)+_0x141b1[_0x2c7ad7(0x1c4)]+')\x20known\x20order:\x20'+_0x141b1['id']);const _0x5b325b=await getCoins(balanceUpdateDelay,undefined,undefined,_0x4bf17a);[currentCoins,currentCoinsAll]=_0x5b325b,setBlockTransactionDetection(![]);}else logger[_0x2c7ad7(0x225)]('1\x20-\x20partially\x20FILLED\x20('+_0x141b1['filled']+_0x2c7ad7(0x19d)+_0x141b1['id']),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay);}}else{if(_0x339436=='canceled'){_0x333a3e('canceled'),lastOrders=lastOrders[_0x2c7ad7(0x147)](_0x333580=>_0x333580['symbol']!=_0x141b1[_0x2c7ad7(0x1cd)]);const _0x52d839=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x52d839,setBlockTransactionDetection(![]),await getOpenOrders(),handleOpenOrders();}else{if(_0x339436==_0x2c7ad7(0x124)){if(lastOrders)for(const _0x333088 of lastOrders){if(_0x333088[_0x2c7ad7(0x1d6)]==_0x141b1['id']){logger[_0x2c7ad7(0x225)]('1\x20-\x20FILLED\x20known\x20order:\x20'+_0x141b1['id']),_0xee42e7=!![];if(_0x333088['filled']==0x0){setBlockTransactionDetection(!![]),logger[_0x2c7ad7(0x225)]('2\x20-\x20handling\x20FILLED\x20order:\x20'+_0x141b1['id']);if(_0x141b1['average'])_0x333088[_0x2c7ad7(0x128)]=_0x141b1[_0x2c7ad7(0xf0)];else{if(_0x141b1[_0x2c7ad7(0x128)])_0x333088[_0x2c7ad7(0x128)]=_0x141b1['price'];else{}}_0x333088[_0x2c7ad7(0x1c4)]=_0x141b1['filled'],updateHighestFee(_0x333088);const _0x5dbaf6=await getCoins(balanceUpdateDelay,undefined,undefined,_0x4bf17a);[currentCoins,currentCoinsAll]=_0x5dbaf6,setBlockTransactionDetection(![]),await validateOrders(),_0x333a3e(_0x2c7ad7(0x1c4)),_0x333088[_0x2c7ad7(0x257)]={'currency':_0x141b1[_0x2c7ad7(0x257)]?_0x141b1['fee'][_0x2c7ad7(0x1d0)]:null,'cost':_0x141b1[_0x2c7ad7(0x257)]?_0x141b1[_0x2c7ad7(0x257)][_0x2c7ad7(0x271)]:0x0},await updatePnL(_0x333088);}}}!_0xee42e7&&(logger[_0x2c7ad7(0x225)]('1\x20-\x20FILLED\x20unknown\x20order:\x20'+_0x141b1['id']),_0x333a3e(_0x2c7ad7(0x1c4)),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay),await updateOpenOrders(),handleOpenOrders());}}}if(lastBalances){let _0x41b62d=JSON[_0x2c7ad7(0x154)](lastBalances[_0x2c7ad7(0x126)]);const _0x519fef=_0x41b62d[_0x2c7ad7(0x164)](_0x580176=>_0x580176[_0x2c7ad7(0x1cd)]==_0x141b1[_0x2c7ad7(0x1cd)]);if(_0x519fef){if(_0x339436=='open')_0x519fef['orderstatus']=_0x519fef[_0x2c7ad7(0xc9)]=='filled'?'filled':_0x2c7ad7(0x253);else{if(_0x339436==_0x2c7ad7(0xc3))_0x519fef[_0x2c7ad7(0xc9)]=_0x519fef[_0x2c7ad7(0xc9)]==_0x2c7ad7(0x1c4)?_0x2c7ad7(0x1c4):_0x2c7ad7(0xc3);else _0x339436==_0x2c7ad7(0x124)&&(_0x519fef[_0x2c7ad7(0xc9)]=_0x2c7ad7(0x1c4));}}lastBalances={...lastBalances,'portfolio':JSON[_0x2c7ad7(0x1b9)](_0x41b62d)},proxyEmit(_0x2c7ad7(0x21f),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x5791d9=_0x58eec8;await getOpenOrders();let _0x16f1ee=![];currentCoins[_0x5791d9(0x252)](_0x54d757=>{const _0x5dc1d6=_0x5791d9;_0x16f1ee=allOpenOrders[_0x5dc1d6(0x164)](_0x1c9271=>_0x1c9271[_0x5dc1d6(0x1cd)]==_0x54d757[_0x5dc1d6(0x1cd)]),_0x54d757[_0x5dc1d6(0xc9)]=_0x16f1ee?_0x5dc1d6(0x253):_0x5dc1d6(0x1f0);});}async function fetchBalance(_0x11087e=!![]){const _0xb46876=_0x58eec8;let _0x3189d4,_0xafc693,_0x2a9476,_0x16f779=0x0;while(!_0xafc693&&_0x16f779<maxRetries){try{return _0x3189d4=await exchange[_0xb46876(0x21b)](),_0xafc693=_0x3189d4[_0xb46876(0x28e)],_0xafc693;}catch(_0x36da7c){_0x2a9476=_0x36da7c,_0x16f779++,await sleep(retryInterval);}}return!_0x11087e?handleErrorNoStop(_0x2a9476,'fetchBalance()'):await handleError(_0x2a9476,_0xb46876(0x11e)),![];}async function getCoins(_0x960c36=0x0,_0x1888c2=!![],_0x1aafe6=config['basecoin'],_0x554f49){const _0x3d3182=_0x58eec8;let _0x48585d=[],_0x14e3b6=[],_0x22f9f8=[],_0x3157be;if(_0x960c36)await sleep(_0x960c36);if(botPaused)return[currentCoins,currentCoinsAll];let _0x4825fa=![],_0x1bcd6e=0x0,_0x4a9e80,_0xfd3fec;_0x554f49&&(_0x4a9e80=currentCoins[_0x3d3182(0x164)](_0x46a850=>_0x46a850[_0x3d3182(0x162)]==_0x554f49),_0x4a9e80&&(_0xfd3fec=_0x4a9e80['prevnumber'],delete _0x4a9e80[_0x3d3182(0xe1)]));while(!_0x4825fa){_0x3157be=await fetchBalance(_0x1888c2);if(_0x3157be){if(_0x554f49){if(_0x3157be[_0x554f49]!=_0xfd3fec)logger[_0x3d3182(0x225)](_0x3d3182(0x240)+_0x554f49+':\x20'+_0x3157be[_0x554f49]+'\x20('+_0xfd3fec+')'),_0x4825fa=!![];else{logger[_0x3d3182(0x225)](_0x3d3182(0x20f)+_0x554f49+':\x20'+_0x3157be[_0x554f49]+'\x20('+_0xfd3fec+')'),_0x1bcd6e++;if(_0x1bcd6e<balanceUpdateRetries)await sleep(balanceUpdateDelay);else{logger[_0x3d3182(0x225)](_0x3d3182(0x241)+_0x1bcd6e+_0x3d3182(0x1a2));break;}}}else break;}else return[currentCoins,currentCoinsAll];}for(const [_0x507304,_0x148fca]of Object[_0x3d3182(0x198)](_0x3157be)){_0x22f9f8[_0x3d3182(0x121)](_0x507304);}config[_0x3d3182(0x126)][_0x3d3182(0x252)](_0x205131=>{const _0x26c52b=_0x3d3182;!_0x22f9f8[_0x26c52b(0x25e)](_0x205131[_0x26c52b(0x162)])&&(_0x3157be[_0x205131[_0x26c52b(0x162)]]=0x0);});if(_0x1aafe6=='')for(const [_0x290ade,_0x32279c]of Object['entries'](_0x3157be)){_0x32279c!=0x0&&_0x48585d[_0x3d3182(0x121)]({'coin':_0x290ade});}else for(const [_0xe4cd11,_0x51d841]of Object[_0x3d3182(0x198)](_0x3157be)){const _0x53061e=config[_0x3d3182(0x126)][_0x3d3182(0x164)](_0x2751ac=>_0x2751ac[_0x3d3182(0x162)]==_0xe4cd11),_0x476ed4=_0xe4cd11+'/'+_0x1aafe6,_0x513b92=_0x1aafe6+'/'+_0xe4cd11,_0x1aa4b6=currentCoins['find'](_0x2131e6=>_0x2131e6[_0x3d3182(0x162)]==_0xe4cd11);if((_0x51d841!=0x0||_0x53061e)&&(allSymbols[_0x3d3182(0x25e)](_0x476ed4)||_0xe4cd11==_0x1aafe6))_0x1aa4b6?_0x48585d['push']({..._0x1aa4b6,'number':Math[_0x3d3182(0x28b)](_0x51d841+(_0x53061e&&_0x53061e['offset']||0x0),0x0)}):_0x48585d[_0x3d3182(0x121)]({'coin':_0xe4cd11,'symbol':_0x476ed4,'reverse':![],'number':Math[_0x3d3182(0x28b)](_0x51d841+(_0x53061e&&_0x53061e[_0x3d3182(0xc0)]||0x0),0x0),'orderstatus':_0x3d3182(0x1f0)});else{if((_0x51d841!=0x0||_0x53061e)&&allSymbols[_0x3d3182(0x25e)](_0x513b92))_0x1aa4b6?_0x48585d[_0x3d3182(0x121)]({..._0x1aa4b6,'number':Math[_0x3d3182(0x28b)](_0x51d841+(_0x53061e&&_0x53061e[_0x3d3182(0xc0)]||0x0),0x0)}):_0x48585d['push']({'coin':_0xe4cd11,'symbol':_0x513b92,'reverse':!![],'number':Math[_0x3d3182(0x28b)](_0x51d841+(_0x53061e&&_0x53061e[_0x3d3182(0xc0)]||0x0),0x0),'orderstatus':_0x3d3182(0x1f0)});else _0x53061e&&_0x48585d[_0x3d3182(0x121)]({'coin':_0x53061e['coin'],'symbol':_0x53061e[_0x3d3182(0x1cd)],'reverse':_0x53061e[_0x3d3182(0xda)],'number':0x0,'orderstatus':_0x3d3182(0x1f0)});}}return _0x48585d[_0x3d3182(0x1b3)]((_0xacc950,_0x4a60ee)=>_0xacc950[_0x3d3182(0x13b)]<_0x4a60ee[_0x3d3182(0x13b)]?0x1:_0x4a60ee['delta']<_0xacc950[_0x3d3182(0x13b)]?-0x1:0x0),_0x14e3b6=cloneDeep(_0x48585d),_0x48585d=_0x48585d['filter'](_0x28b746=>{const _0x389ff2=_0x3d3182,_0x2724e0=config[_0x389ff2(0x126)][_0x389ff2(0x164)](_0x488aee=>_0x488aee['coin']==_0x28b746[_0x389ff2(0x162)]);return _0x2724e0&&!_0x2724e0[_0x389ff2(0x226)];}),[_0x48585d,_0x14e3b6];}async function getOpenOrders(){const _0x502899=_0x58eec8;let _0x3d283b;allOpenOrders=[];try{for(const _0x231fe7 of config[_0x502899(0x126)]){!_0x231fe7[_0x502899(0x226)]&&_0x231fe7['coin']!=config[_0x502899(0x135)]&&(_0x3d283b=await exchange[_0x502899(0x182)](_0x231fe7[_0x502899(0x1cd)]),_0x3d283b[_0x502899(0x16c)]>0x0&&allOpenOrders[_0x502899(0x121)](_0x3d283b[0x0]));}}catch(_0x25f145){await handleError(_0x25f145,'getOpenOrders()');}}function _0x447f(){const _0x4f942d=['fetchBalance','\x20minutes','Set\x20lock\x20orders\x20to:\x20','startprice','balances','defaults','configuration-stored','isEqual','\x20minutes\x20-\x20','Limit\x20(high-margin)','debug','excluded','Resetting\x20bot\x20history','fetchTicker','sendMetricsTelegram','MIN_NOTIONAL','order','Failed\x20to\x20load\x20market\x20data\x20-\x20bot\x20not\x20started','limit-high','axios','timestamp-issue','cooldown','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','initial','Unfilled\x20order(s)\x20canceled\x20after\x20','recovery','basecoinvalue','privateKey','</pre>','Exchange','marketcapEnabled','shift','search','success','request-time','yyyy/MM/dd','Binance','Valid\x20balance\x20for\x20','Stopped\x20fetching\x20balance\x20after\x20','\x20>\x20[DEBUG]\x20','min','date','distribution','value','\x20-\x20bot\x20already\x20running\x20in\x20manual\x20mode','pid','floor','date-fns','\x20portfolio:</b>\x20\x0a\x0a','Error\x20details:','colorscheme','\x0aSymbol(s):\x20','trade','Error\x20in\x20loadSymbols():\x20','\x20closed\x20the\x20connection\x20(see:\x20hodlerhacks.com/fix/5)','forEach','open','placeOrder()','secret','Invalid\x20API\x20details,\x20please\x20try\x20again\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','fee','onepagemode','privateKeyFromPem','Headless:\x20','pro',')\x20|\x20exchange:\x20','showConfig','includes','has','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20trying\x20again\x20in\x20','\x20metrics:</b>\x20\x0a\x0a','bot-','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','\x20-\x20','-config.json','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20for\x20','Executed\x20','sandbox','placeOrder','createWriteStream','loadSymbols()','exchange','\x20not\x20responding\x20(see:\x20hodlerhacks.com/fix/5)','apiSecret','type','startdate','cost','Order\x20is\x20invalid:\x20','ask','send','./version.json','sell','watchTradesForSymbols','util','PAXG','amount','percentage','exchanges','2.3.5','split','1\x20-\x20partially\x20FILLED\x20(','balancing\x20resumed','getHours','Failed\x20to\x20connect\x20to\x20the\x20exchange\x20-\x20bot\x20not\x20started','\x20-\x20go\x20back\x20and\x20try\x20again','testApi','\x20|\x20exchange:\x20','node-forge','\x20not\x20available\x20(see:\x20hodlerhacks.com/fix/5)','Gateio','liquidity','valid','max','api-issue','\x20(see:\x20hodlerhacks.com/fix/1)','total','constructor','RETRY\x20-\x20Problem\x20resolved\x20after\x20','Generated\x20PnL\x20data','argv','yargs/yargs','production','fromCodePoint','decrypt','loadMarkets','change24h','active','Failed\x20to\x20load\x20coin\x20data\x20for\x20','marketcapApi','Error\x20details:\x20','offset','48590yGWLQe','\x20exchange','canceled','Waited\x20','4558666cMxJSq','log','breakeven','configstate','orderstatus','Reset\x20|\x20','ID:\x20','\x20-\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','timeshift','heapUsed','startnumber',':\x20timer\x20>','highest','36NPcwEC','Block\x20transaction\x20detection:\x20','\x20|\x20highest\x20fee:\x20','Huobi','message','\x20|\x20Custom\x20ID:\x20','./logs/','token\x20is\x20expired','reverse','getStartingBalances','set','buy','error','enableFiatToggle','TUSD','prevnumber','Saving\x20configuration','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','Invalid\x20symbol:\x20','unlinkSync','configuration','-results.json','changes','marketcapsqrt','event','toUpperCase','code','recreate','Avoiding\x20continuous\x20order\x20attempts','spot','average','Bybit','secure','assign','slider','Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute','existsSync','2\x20-\x20Handled\x20open\x20orders','uncaughtException','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','padStart','write','fetchTickers','sendPortfolioTelegram','portfolio2','InvalidOrder','getTime','abs','openOrders','operatorId','793856kNgXqh','starting-balances','join','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','headless','<b>','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','USD','Market\x20order','Exchange\x20permission\x20denied\x20-\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','round','realizedPnL','keys','Error:\x20Invalid\x20argument\x20','Network\x20error\x20details:','slice','event-history','recent20','coin-loading-progress','2104220ixMNHW','getPortfolio','addDays','target','self_reported_market_cap','detectLiquidityChange()','RETRY\x20-\x20Error\x20in\x20','fetchBalance()','watchOrders','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','push','kill','password','closed','InvalidNonce','portfolio','Loading\x20completed','price','environment','Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)','Order\x20amount\x20is\x20invalid:\x20','map','cancel','no\x20exchange\x20reloaded','Updating\x20API\x20key\x20(not\x20saved\x20in\x20config\x20file\x20yet)','apiKey','cancelLoading','PnL\x20','change','isBefore','basecoin','ongoing','buys','516mPwQdV','bid','toLowerCase','delta','stack','API-key\x20format\x20invalid','USDT','portfolio1','2\x20-\x20Validate\x20orders:\x20','remainingSymbols','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)','resetHistory','USDP','%)\x0a','timeout','filter','\x20-\x20bot\x20switched\x20to\x20manual\x20mode','1\x20-\x20Handle\x20open\x20orders','getMonth','toString','2.6.0','Initializing\x20exchange:\x20already\x20done','Portfolio\x20change\x20detected:\x20','1\x20-\x20Validate\x20orders:\x20','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','\x20API\x20secret\x20is\x20invalid','customId','Error\x20in\x20testNewAPI():\x20','parse','createOrder','test','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','progress','timestamp','BUSD','final','watchOrders()','logs','fetchTickers()','PermissionDenied','emojisell','cloneDeep','coin','\x20hour','find','Initializing\x20exchange','limits','showname','Huobipro','switch-manual','\x20>\x20pausing\x20bot\x20for\x20','replace','length','get','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','enabled','Insufficient\x20funds\x20to\x20execute\x20order:\x20','threshold','\x20>\x20stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','bb-settings.json','data','/USDT','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','Cooldown\x20ended\x20-\x20balancing\x20resumed','Order\x20filled','splice','net-basecoin','remove','substring','Balance\x20Bot\x20does\x20not\x20support\x20the\x20',':\x20Bot\x20','-events.json','\x20due\x20to\x20offset','Placing\x20order\x20for:\x20','fetchOpenOrders','getSeconds','lowdb/adapters/FileSync','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','\x20>\x20details:','-performance.json','toggleBotMode','<b>Bot\x20','\x20|\x20lock\x20orders:\x20','create','bot','pop','2.6.22','settings','update-liquidity','1332oHNFmK','args','EUR','writeFile','Resetting\x20coin\x20results:\x20','Trigger:\x20','initclient','entries','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','\x20>\x20',',\x20must\x20be\x20a\x203\x20digit\x20number','bitvavo',')\x20unknown\x20order:\x20','findIndex','Insufficient\x20funds\x20to\x20place\x20order\x20for\x20','ordertype','time','\x20attempts','last','\x20API\x20key,\x20secret\x20or\x20password\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','warning','958248aOlJXw','bitmex','Initializing\x20coin\x20results','process\x20','number','emojibuy','botname','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','\x20|\x20','Bitget','no\x20open\x20orders','getMinutes','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','sort','storeConfiguration','removed','Bot\x20','ExchangeError','sortBy','stringify','Order(s)\x20not\x20validated\x20after\x20','Will\x20continue\x20to\x20wait\x20for\x20order(s)\x20to\x20be\x20filled\x20and\x20try\x20to\x20cancel\x20again\x20later','Generating\x20PnL\x20data','status\x20code\x20401','Value\x20','<pre>','23mBbQiM','testAPI()','usd','NetworkError','filled','fiat','ETH','\x20uses\x20','indexOf','Resuming\x20(','added','\x20MB','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','symbol','Net\x20','version','currency','coins','full','running','setSandboxMode','watchTrades','orderId','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','botID','./config/','net-fiat','Initiating\x20bot\x20restart','market','eur','Portfolio\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','market_cap','performance','Error\x20while\x20deleting\x20files:\x20','\x20network\x20error:\x20','options','/output-000.log','\x20blocked\x20API\x20(DDoSProtection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','pnl','************','3832310gaaOmY','sqrt','Exception\x20thrown\x20in\x20','.json','Fee\x20discount\x20refund\x20detected:\x20','storeHeadless','cancelOrder','none','\x20has\x20a\x2024h\x20drop\x20of\x20','UNLOCKED','AuthenticationError','format','red_yellow_blue','***','quote','page','getFullYear','toFixed','Manual\x20balancing\x20required','ccxt','string','(((.+)+)+)+$','apply','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','function','InsufficientFunds','marketcap','limit','apiPassword','DDoSProtection','USDC','bots','quick','Unknown\x20error:\x20','autoliquidity','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','must\x20be\x20greater\x20than\x20minimum\x20amount','BTC','Invalid\x20balance\x20for\x20','\x20order:\x20','LOCKED','-------------------------------\x0a','pnl-basecoin','starting-balance-','2.7.1','Pausing\x20for\x20','RateLimitExceeded','side','getDate','exchange\x20reload'];_0x447f=function(){return _0x4f942d;};return _0x447f();}async function handleOpenOrders(_0x45f114=0x0){const _0x190914=_0x58eec8;allOpenOrders[_0x190914(0x16c)]==0x0&&lockOrders==ORDERS[_0x190914(0x211)]&&allOrdersPlaced&&(_0x45f114==0x0?(logger[_0x190914(0x225)](_0x190914(0x149)),_0x45f114++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x190914(0x225)](_0x190914(0xf7)),validateOrders(_0x190914(0x1b0))));}async function testAPI(){const _0x356289=_0x58eec8;try{return await exchange[_0x356289(0x21b)](),!![];}catch(_0x430c64){loading[_0x356289(0x12d)]=!![],_0x430c64[_0x356289(0x14b)]()[_0x356289(0x13a)]()[_0x356289(0x25e)]('timestamp')||_0x430c64[_0x356289(0x14b)]()['toLowerCase']()['includes'](_0x356289(0x23d))?(logHistory(_0x356289(0xde),_0x356289(0x12a)),loading['error']=_0x356289(0x22f)):handleErrorNoStop(_0x430c64,_0x356289(0x1c1),!![]),logHistory('error',_0x356289(0x282)),logHistory(_0x356289(0xde),'Pausing\x20for\x20'+loadCoinsRetryInterval/0xea60+_0x356289(0x20c)),logger[_0x356289(0x225)]('Error\x20details:',_0x430c64),emitLoadingProgress(),botPaused=!![],await sleep(loadCoinsRetryInterval),restartBot();}}async function testNewAPI(_0x1e5c38){const _0x5dd2c5=_0x58eec8;logger['debug']('Test\x20new\x20API');const _0x56fe40=ccxt[_0x5dd2c5(0x25b)][_0x1e5c38['exchange'][_0x5dd2c5(0x13a)]()],_0x2ce1ae=new _0x56fe40({'apiKey':_0x1e5c38[_0x5dd2c5(0x130)],'secret':_0x1e5c38[_0x5dd2c5(0x26e)],'options':{'defaultType':_0x5dd2c5(0xef)}});if(_0x1e5c38['apiPassword'])_0x2ce1ae[_0x5dd2c5(0x123)]=_0x1e5c38['apiPassword'];if(_0x2ce1ae[_0x5dd2c5(0x25f)][_0x5dd2c5(0x268)])_0x2ce1ae[_0x5dd2c5(0x1d4)](_0x1e5c38[_0x5dd2c5(0x268)]);if(_0x1e5c38[_0x5dd2c5(0x26c)][_0x5dd2c5(0x13a)]()==_0x5dd2c5(0x19c))exchange[_0x5dd2c5(0x1e4)][_0x5dd2c5(0x103)]=operatorId;try{await _0x2ce1ae[_0x5dd2c5(0x21b)](),botPaused=![];}catch(_0x58dfa7){logger['debug'](_0x5dd2c5(0x153)+_0x58dfa7['toString']());throw _0x58dfa7;}}function cloneDeep(_0x782ab0){const _0x3afd75=_0x58eec8;return JSON[_0x3afd75(0x154)](JSON['stringify'](_0x782ab0));}async function getPortfolio(_0x320745){const _0x21ae22=_0x58eec8;let _0x3f4bc7=[],_0x37d174=[],_0x1862bb=[],_0x311f6b;_0x320745[_0x21ae22(0x130)]=decryptRSA(secure['privateKey'],_0x320745['apiKey']),_0x320745[_0x21ae22(0x26e)]=decryptRSA(secure[_0x21ae22(0x236)],_0x320745['apiSecret']);if(_0x320745[_0x21ae22(0x205)])_0x320745['apiPassword']=decryptRSA(secure[_0x21ae22(0x236)],_0x320745['apiPassword']);if(_0x320745[_0x21ae22(0x130)]!==_0x21ae22(0x1e8)||_0x320745[_0x21ae22(0x26e)]!==_0x21ae22(0x1e8)||_0x320745[_0x21ae22(0x205)]&&_0x320745['apiPassword']!==_0x21ae22(0x1e8)){if(config[_0x21ae22(0x26c)]){if(_0x320745['apiKey']==_0x21ae22(0x1e8))_0x320745[_0x21ae22(0x130)]=config['apiKey'];if(_0x320745[_0x21ae22(0x26e)]=='************')_0x320745[_0x21ae22(0x26e)]=config['apiSecret'];if(_0x320745[_0x21ae22(0x205)]==_0x21ae22(0x1e8))_0x320745[_0x21ae22(0x205)]=config[_0x21ae22(0x205)];}try{if(_0x320745[_0x21ae22(0x284)])await testNewAPI(_0x320745);}catch(_0x1af5fd){if(_0x1af5fd[_0x21ae22(0x14b)]()[_0x21ae22(0x25e)](_0x21ae22(0x1f3))){logHistory(_0x21ae22(0xde),_0x21ae22(0x256)),logHistory(_0x21ae22(0xde),_0x21ae22(0xbf)+_0x1af5fd[_0x21ae22(0x14b)]()),proxyEmit(_0x21ae22(0x13f),![]);return;}else{if(_0x1af5fd[_0x21ae22(0x14b)]()[_0x21ae22(0x25e)](_0x21ae22(0x15f))){logHistory(_0x21ae22(0xde),_0x21ae22(0x10d)),logHistory(_0x21ae22(0xde),'Error\x20details:\x20'+_0x1af5fd[_0x21ae22(0x14b)]()),proxyEmit(_0x21ae22(0x13f),![]);return;}else{logHistory(_0x21ae22(0xde),'Error\x20occurred:\x20'+_0x1af5fd[_0x21ae22(0x14b)]()),logger[_0x21ae22(0x225)](_0x21ae22(0x24c),_0x1af5fd),proxyEmit(_0x21ae22(0x13f),![]);return;}}}exchange?updateExchange(_0x320745['apiKey'],_0x320745[_0x21ae22(0x26e)],_0x320745[_0x21ae22(0x205)]):await initExchange(_0x320745[_0x21ae22(0x26c)],_0x320745[_0x21ae22(0x130)],_0x320745[_0x21ae22(0x26e)],_0x320745[_0x21ae22(0x205)],_0x320745['sandbox']);await loadSymbols();const _0x342a86=await getCoins(0x0,![],_0x320745[_0x21ae22(0x135)]);_0x1862bb=cloneDeep(_0x342a86[0x1]);}else{const _0x516569=await getCoins();_0x1862bb=cloneDeep(_0x516569[0x1]);}if(_0x320745[_0x21ae22(0x135)]=='')proxyEmit(_0x21ae22(0x13f),!![]),proxyEmit(_0x21ae22(0xfe),_0x1862bb);else{_0x1862bb[_0x21ae22(0x252)](_0xb2a6f=>{const _0x2137e4=_0x21ae22;if(_0xb2a6f['coin']!=_0x320745['basecoin']&&allSymbols[_0x2137e4(0x25e)](_0xb2a6f[_0x2137e4(0x1cd)]))_0x3f4bc7[_0x2137e4(0x121)](_0xb2a6f['symbol']);});if(_0x3f4bc7[_0x21ae22(0x16c)]==0x0)logHistory(_0x21ae22(0xde),_0x21ae22(0xe3));else{try{_0x37d174=await getTickers(_0x3f4bc7);}catch(_0x257c6e){logHistory(_0x21ae22(0xde),'Unknown\x20error\x20-\x20check\x20logs'),logger[_0x21ae22(0x225)]('Error\x20details:',_0x257c6e),proxyEmit(_0x21ae22(0x13f),![]);return;}_0x1862bb[_0x21ae22(0x252)](_0x357a7a=>{const _0x139290=_0x21ae22;_0x357a7a[_0x139290(0x162)]!=_0x320745[_0x139290(0x135)]?_0x37d174[_0x357a7a[_0x139290(0x1cd)]]?_0x37d174[_0x357a7a[_0x139290(0x1cd)]]['last']?_0x311f6b=_0x357a7a[_0x139290(0xda)]?0x1/_0x37d174[_0x357a7a[_0x139290(0x1cd)]][_0x139290(0x1a3)]:_0x37d174[_0x357a7a[_0x139290(0x1cd)]][_0x139290(0x1a3)]:_0x311f6b=0x0:_0x311f6b=0x0:_0x311f6b=0x1,_0x357a7a[_0x139290(0x128)]=formatResult(_0x311f6b,0x8);}),await getMarketCap(_0x1862bb),proxyEmit('portfolio1',!![]),proxyEmit(_0x21ae22(0xfe),_0x1862bb);}}}function truncateTradeAmount(_0x11e422,_0x243593){let _0x17e2bf=0x0;try{_0x17e2bf=exchange['amountToPrecision'](_0x11e422,_0x243593);}catch(_0x1cbf99){}return _0x17e2bf;}function checkMinimums(_0x5360a0){const _0xf6bb39=_0x58eec8;let _0x554fb0=!![];const _0x2010ca=!_0x5360a0[_0xf6bb39(0xda)]?markets[_0x5360a0[_0xf6bb39(0x1cd)]]['limits'][_0xf6bb39(0x27a)]['min']:markets[_0x5360a0[_0xf6bb39(0x1cd)]][_0xf6bb39(0x166)][_0xf6bb39(0x271)][_0xf6bb39(0x243)],_0x5b986c=!_0x5360a0['reverse']?markets[_0x5360a0['symbol']][_0xf6bb39(0x166)][_0xf6bb39(0x271)][_0xf6bb39(0x243)]:markets[_0x5360a0[_0xf6bb39(0x1cd)]][_0xf6bb39(0x166)][_0xf6bb39(0x27a)][_0xf6bb39(0x243)],_0x54df83=truncateTradeAmount(_0x5360a0[_0xf6bb39(0x1cd)],_0x5360a0['trade']);_0x5360a0[_0xf6bb39(0x24f)]=_0x54df83;if(Math[_0xf6bb39(0x101)](_0x54df83)<_0x2010ca)_0x554fb0=![];if(Math[_0xf6bb39(0x101)](_0x54df83)*_0x5360a0[_0xf6bb39(0x1a3)]<_0x5b986c)_0x554fb0=![];let _0x43c376='';if(_0x5360a0[_0xf6bb39(0x218)]==_0xf6bb39(0x276)){let _0x137d04=config['portfolio']['find'](_0x3040e3=>_0x3040e3['coin']==_0x5360a0[_0xf6bb39(0x162)]);_0x137d04[_0xf6bb39(0xc0)]>0x0?Math[_0xf6bb39(0x101)](_0x54df83)>_0x5360a0[_0xf6bb39(0x1aa)]-_0x137d04['offset']&&(_0x554fb0=![],_0x43c376=_0xf6bb39(0x19f)+_0x137d04[_0xf6bb39(0x162)]+_0xf6bb39(0x180)):Math['abs'](_0x54df83)>_0x5360a0[_0xf6bb39(0x1aa)]&&(_0x554fb0=![]);}if(_0x5360a0[_0xf6bb39(0x218)]==_0xf6bb39(0xdd)){let _0x1e1232=config[_0xf6bb39(0x126)]['find'](_0x587df5=>_0x587df5[_0xf6bb39(0x162)]==config[_0xf6bb39(0x135)]),_0x1e4f62=currentCoins[_0xf6bb39(0x164)](_0x299774=>_0x299774[_0xf6bb39(0x162)]==config[_0xf6bb39(0x135)]);_0x1e1232[_0xf6bb39(0xc0)]>0x0?Math['abs'](_0x54df83)*_0x5360a0[_0xf6bb39(0x1a3)]>_0x1e4f62['number']-_0x1e1232[_0xf6bb39(0xc0)]&&(_0x554fb0=![],_0x43c376=_0xf6bb39(0x19f)+config[_0xf6bb39(0x135)]+'\x20due\x20to\x20offset'):Math[_0xf6bb39(0x101)](_0x54df83)*_0x5360a0['last']>_0x1e4f62[_0xf6bb39(0x1aa)]&&(_0x554fb0=![]);}return!_0x554fb0&&_0x43c376&&!insufficientFundsWarningSent[_0xf6bb39(0x25e)](_0x5360a0['coin'])&&(logHistory(_0xf6bb39(0x1a5),_0x43c376),insufficientFundsWarningSent[_0xf6bb39(0x121)](_0x5360a0[_0xf6bb39(0x162)])),_0x554fb0;}async function getBalances(_0x42a3a8=!![]){const _0xa41fc7=_0x58eec8;if(botPaused)return;let _0x56e193=0x0,_0x3033ae;const _0x3b907=config['threshold'];if(config[_0xa41fc7(0x108)]&&config[_0xa41fc7(0x298)]<0x0)await validate24hChanges();currentCoins[_0xa41fc7(0x252)](_0x12c492=>{const _0x57004c=_0xa41fc7;if(_0x12c492[_0x57004c(0x162)]!=config[_0x57004c(0x135)]){let _0x40cf13=gTicker[noslash(_0x12c492['symbol'])];_0x3033ae=_0x12c492['reverse']?0x1/_0x40cf13:_0x40cf13;}else _0x3033ae=0x1;let _0x3cdd9a=_0x12c492[_0x57004c(0x1aa)]*_0x3033ae;_0x56e193+=_0x3cdd9a,_0x12c492[_0x57004c(0x1a3)]=formatResult(Number(_0x3033ae),0x8),_0x12c492[_0x57004c(0x246)]=_0x3cdd9a;}),currentCoins[_0xa41fc7(0x252)](_0x565e2c=>{const _0x3c2746=_0xa41fc7;let _0x2eba06=config[_0x3c2746(0x126)]['find'](_0xd85f3a=>_0xd85f3a[_0x3c2746(0x162)]==_0x565e2c[_0x3c2746(0x162)]),_0x1a49b1=Number(_0x2eba06['distribution']),_0x5dce99=_0x565e2c[_0x3c2746(0x246)]/_0x56e193*0x64,_0x116477=_0x1a49b1*_0x56e193/0x64/_0x565e2c[_0x3c2746(0x1a3)]-_0x565e2c[_0x3c2746(0x1aa)];_0x565e2c[_0x3c2746(0x245)]=formatResult(_0x5dce99,0x3),_0x565e2c[_0x3c2746(0x11a)]=formatResult(_0x1a49b1,0x3),_0x565e2c[_0x3c2746(0x24f)]=formatResult(_0x116477,0x8),_0x565e2c[_0x3c2746(0x218)]='',_0x565e2c[_0x3c2746(0x28a)]=![];if(_0x565e2c[_0x3c2746(0x162)]!=config['basecoin']){if(_0x565e2c[_0x3c2746(0x245)]>_0x1a49b1)_0x565e2c[_0x3c2746(0x218)]=_0x3c2746(0x276),_0x565e2c[_0x3c2746(0x28a)]=checkMinimums(_0x565e2c);else _0x565e2c[_0x3c2746(0x245)]<_0x1a49b1&&(_0x565e2c[_0x3c2746(0x218)]=_0x3c2746(0xdd),_0x565e2c['valid']=checkMinimums(_0x565e2c));}_0x565e2c['delta']=_0x565e2c[_0x3c2746(0x11a)]==0x0?0x270f:_0x565e2c[_0x3c2746(0x245)]/_0x565e2c[_0x3c2746(0x11a)]-0x1;if(_0x565e2c[_0x3c2746(0xc9)]==_0x3c2746(0x1c4)||_0x565e2c[_0x3c2746(0xc9)]==_0x3c2746(0xc3))_0x565e2c[_0x3c2746(0xc9)]=_0x3c2746(0x1f0);}),currentCoins[_0xa41fc7(0x1b3)]((_0x43e1ac,_0x2a7038)=>_0x43e1ac['delta']<_0x2a7038['delta']?0x1:_0x2a7038[_0xa41fc7(0x13b)]<_0x43e1ac[_0xa41fc7(0x13b)]?-0x1:0x0);const _0x27a6b7=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x27a6b7[_0xa41fc7(0x1dd)],'usd':_0x27a6b7['usd'],'portfolio':JSON[_0xa41fc7(0x1b9)](currentCoins),'threshold':_0x3b907},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});if(_0x42a3a8){if(config['headless'])headlessMode({'portfolio':currentCoins,'threshold':_0x3b907});else lockOrders==ORDERS['UNLOCKED']&&!coolingDown&&notifyBalance({'portfolio':currentCoins,'threshold':_0x3b907});}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x8b4fd=getNormalizedPerformance();getStartingBalances(_0x8b4fd),emitPerformance(_0x8b4fd);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}function getPnL(){const _0x3e210d=_0x58eec8;let _0x37890e=dbCoinResults[_0x3e210d(0x16d)](_0x3e210d(0x1d1))[_0x3e210d(0x246)](),_0x1a00bd=0x0;return Object[_0x3e210d(0x198)](_0x37890e)[_0x3e210d(0x252)](([_0x433095,_0xf01efe])=>{const _0x400a51=_0x3e210d;_0x1a00bd+=_0xf01efe[_0x400a51(0x10f)];}),_0x1a00bd;}async function storePerformance(){const _0x50ad9c=_0x58eec8;if(!lastBalances)return;let _0x45ef1b=[],_0x4e6d2d;const _0x5864ff=getPnL();let _0x4d03b6=JSON['parse'](lastBalances[_0x50ad9c(0x126)]);_0x4d03b6[_0x50ad9c(0x1b3)]((_0x210cc5,_0x3cae62)=>_0x210cc5[_0x50ad9c(0x162)]>_0x3cae62['coin']?0x1:_0x3cae62['coin']>_0x210cc5[_0x50ad9c(0x162)]?-0x1:0x0),_0x4d03b6[_0x50ad9c(0x252)](_0x29d28a=>{const _0x553c23=_0x50ad9c;let _0x2071e3={'coin':_0x29d28a[_0x553c23(0x162)],'number':_0x29d28a[_0x553c23(0x1aa)],'price':_0x29d28a[_0x553c23(0x1a3)]};_0x45ef1b[_0x553c23(0x121)](_0x2071e3);});const _0x119eef=await getFiat(),_0x68d9a7=getTimeStamp()[_0x50ad9c(0x27e)]('\x20')[0x0],_0x42ec11=dbPerformance[_0x50ad9c(0x16d)]('data')[_0x50ad9c(0x164)]({'date':_0x68d9a7})[_0x50ad9c(0x246)]();_0x4e6d2d={'date':_0x68d9a7,'eur':_0x119eef['eur'],'usd':_0x119eef[_0x50ad9c(0x1c2)],'coins':_0x45ef1b,'pnl':_0x5864ff},_0x42ec11?_0x4e6d2d[_0x50ad9c(0x244)]!=config[_0x50ad9c(0x270)]&&dbPerformance[_0x50ad9c(0x16d)](_0x50ad9c(0x174))['find']({'date':_0x68d9a7})[_0x50ad9c(0xf3)](_0x4e6d2d)[_0x50ad9c(0xfb)]():dbPerformance[_0x50ad9c(0x16d)](_0x50ad9c(0x174))['push'](_0x4e6d2d)[_0x50ad9c(0xfb)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x2828f2=_0x58eec8;let _0x1d457c=[];if(dbPerformance[_0x2828f2(0x25f)](_0x2828f2(0x174))[_0x2828f2(0x246)]()){let _0x5c096a=dbPerformance['get']('data')[_0x2828f2(0x161)]()['filter'](_0x4d8cae=>{const _0x1103a4=_0x2828f2;if(_0x4d8cae[_0x1103a4(0x1d1)]['length']==0x0)return![];else return!![];})[_0x2828f2(0x1b8)]('date')[_0x2828f2(0x246)](),_0x42d3a3=[...config[_0x2828f2(0x289)]];_0x42d3a3[_0x2828f2(0x1b3)]((_0x193e03,_0x21cb3f)=>_0x193e03['date']>_0x21cb3f[_0x2828f2(0x244)]?-0x1:_0x21cb3f['date']>_0x193e03[_0x2828f2(0x244)]?0x1:0x0);let _0xb8cf94=0x1,_0xfe7682=[],_0x58465a=0x0;_0x5c096a[_0x2828f2(0x113)]()[_0x2828f2(0xda)]()[_0x2828f2(0x252)]((_0x333435,_0x379188)=>{const _0x5ca039=_0x2828f2;if(_0x42d3a3[_0x58465a]){if(_0x5c096a[_0x5c096a[_0x5ca039(0x16c)]-_0x379188]&&_0x42d3a3[_0x58465a][_0x5ca039(0x244)]==_0x5c096a[_0x5c096a['length']-_0x379188][_0x5ca039(0x244)]){if(_0x379188<_0x5c096a[_0x5ca039(0x16c)]){let _0x36b093=0x0,_0x321d9d=0x0;_0x5c096a[_0x5c096a['length']-_0x379188][_0x5ca039(0x1d1)][_0x5ca039(0x252)](_0x9959de=>{_0x321d9d+=_0x9959de['number']*_0x9959de['price'];}),_0x42d3a3[_0x58465a]['changes']['forEach'](_0x4b2cc0=>{const _0x4e7a6b=_0x5ca039;_0x36b093+=_0x4b2cc0['number']*_0x4b2cc0[_0x4e7a6b(0x128)];}),_0xb8cf94*=_0x36b093/(_0x321d9d-_0x36b093)+0x1;}_0x58465a++;}}let _0x1fef6e=0x0;_0x333435[_0x5ca039(0x1d1)][_0x5ca039(0x252)](_0x4345ca=>{const _0x3d6e23=_0x5ca039;_0x1fef6e+=_0x4345ca[_0x3d6e23(0x1aa)]*_0x4345ca[_0x3d6e23(0x128)];}),_0xfe7682[_0x5c096a['length']-_0x379188-0x1]=_0x1fef6e*(_0xb8cf94-0x1);});let _0x4294ae=[];_0x42d3a3=[...config[_0x2828f2(0x289)]]||[];let _0x49e027=0x0;_0x58465a=0x0,_0x5c096a[_0x2828f2(0x252)]((_0x177aca,_0x3ede85)=>{const _0x223467=_0x2828f2;if(_0x42d3a3[_0x58465a]){const _0xc4479b=fns[_0x223467(0x154)](_0x42d3a3[_0x58465a]['date'],_0x223467(0x23e),new Date()),_0x493b88=fns[_0x223467(0x154)](_0x177aca[_0x223467(0x244)],'yyyy/MM/dd',new Date());if(fns[_0x223467(0x222)](_0xc4479b,_0x493b88)){let _0x885987=0x0;_0x42d3a3[_0x58465a][_0x223467(0xe8)]['forEach'](_0x13e4c8=>{const _0x155034=_0x223467;!_0x4294ae[_0x13e4c8[_0x155034(0x162)]]?_0x4294ae[_0x13e4c8[_0x155034(0x162)]]=_0x13e4c8[_0x155034(0x1aa)]:(_0x885987=_0x4294ae[_0x13e4c8[_0x155034(0x162)]],_0x4294ae[_0x13e4c8['coin']]+=_0x13e4c8['number']);const _0x23d9d5=_0x177aca[_0x155034(0x1d1)][_0x155034(0x164)](_0x1aa716=>_0x1aa716['coin']==_0x13e4c8[_0x155034(0x162)]);(!_0x23d9d5||_0x23d9d5[_0x155034(0x1aa)]==0x0)&&(_0x49e027+=(-_0x13e4c8[_0x155034(0x1aa)]-_0x885987)*_0x13e4c8[_0x155034(0x128)]);}),_0x58465a++;}}_0x177aca[_0x223467(0x1d1)][_0x223467(0x252)]((_0xf423d,_0x355a5b)=>{const _0x16b1e1=_0x223467;_0x4294ae[_0xf423d[_0x16b1e1(0x162)]]&&(_0xf423d['initial']=_0x4294ae[_0xf423d[_0x16b1e1(0x162)]]);}),_0x1d457c[_0x223467(0x121)]({'date':_0x177aca[_0x223467(0x244)],'eur':_0x177aca['eur'],'usd':_0x177aca[_0x223467(0x1c2)],'offset':_0xfe7682[_0x3ede85],'netoffset':_0x49e027,'coins':_0x177aca[_0x223467(0x1d1)],'pnl':_0x177aca[_0x223467(0x1e7)]});});}return _0x1d457c;}function emitPerformance(_0x306cb4){const _0x4cd4a5=_0x58eec8;_0x306cb4[_0x4cd4a5(0x16c)]!==0x0?(proxyEmit(_0x4cd4a5(0x1e1),_0x306cb4),lastPerformanceEmitted=getDate()):proxyEmit('performance',[]);}function getPerf(_0x85ab8f,_0x2fc9ab){const _0x353deb=_0x58eec8;let _0x43ce54=0x0,_0x384e8c=0x0,_0x39e947=0x0;_0x85ab8f[_0x353deb(0x1d1)][_0x353deb(0x252)](_0x3e8a7d=>{const _0x2cacfd=_0x353deb;_0x43ce54+=_0x3e8a7d[_0x2cacfd(0x1aa)]*_0x3e8a7d[_0x2cacfd(0x128)];});_0x2fc9ab&&(_0x43ce54+=_0x85ab8f['offset']);if(config[_0x353deb(0x135)]===_0x353deb(0x20e)||config[_0x353deb(0x135)]==='ETH'||config[_0x353deb(0x135)]===_0x353deb(0x279))_0x384e8c=_0x43ce54*_0x85ab8f[_0x353deb(0x1dd)],_0x39e947=_0x43ce54*_0x85ab8f[_0x353deb(0x1c2)];else{if(usdBasecoins[_0x353deb(0x25e)](config['basecoin']))_0x384e8c=_0x43ce54*_0x85ab8f[_0x353deb(0x1dd)]/_0x85ab8f[_0x353deb(0x1c2)],_0x39e947=_0x43ce54;else config[_0x353deb(0x135)]===_0x353deb(0x193)&&(_0x384e8c=_0x43ce54,_0x39e947=_0x43ce54*_0x85ab8f[_0x353deb(0x1c2)]/_0x85ab8f[_0x353deb(0x1dd)]);}return[_0x43ce54,_0x384e8c,_0x39e947];}function CurrencyFactor(_0x585287,_0x1217f4,_0x26f285){const _0x3203ba=_0x58eec8;let _0x27b0bd;if(_0x1217f4===_0x3203ba(0x20e)||_0x1217f4==='ETH'||_0x1217f4===_0x3203ba(0x279))_0x27b0bd=_0x26f285===_0x3203ba(0x193)?_0x585287[_0x3203ba(0x1dd)]:_0x585287[_0x3203ba(0x1c2)];else{if(usdBasecoins[_0x3203ba(0x25e)](_0x1217f4))_0x27b0bd=_0x26f285==='EUR'?_0x585287['eur']/_0x585287[_0x3203ba(0x1c2)]:0x1;else _0x1217f4==='EUR'&&(_0x27b0bd=_0x26f285===_0x3203ba(0x193)?0x1:_0x585287[_0x3203ba(0x1c2)]/_0x585287['eur']);}return _0x27b0bd;}function getKPIs(_0x1e1fc8,_0x2bb05f=_0x58eec8(0x193)){const _0x1d893d=_0x58eec8,_0x44e1a6=config[_0x1d893d(0x135)],_0x2dfb3b=lastBalances,_0x44aee2=currentCoins,_0x4e7bb2=getNormalizedPerformance(),_0x5bcdd7=CurrencyFactor(_0x2dfb3b,config[_0x1d893d(0x135)],_0x2bb05f);let _0x867397=0x0;_0x44aee2[_0x1d893d(0x252)](_0x2c81b6=>{const _0x2f317e=_0x1d893d;_0x867397+=_0x2c81b6[_0x2f317e(0x1aa)]*_0x2c81b6['last'];});_0x1e1fc8['includes'](_0x1d893d(0x1c5))&&(_0x867397*=_0x5bcdd7);let _0x32c4c4;if(_0x867397!==0x0){if(_0x1e1fc8===_0x1d893d(0x135)||_0x1e1fc8===_0x1d893d(0x1c5)){if(_0x1e1fc8==='basecoin')_0x32c4c4=(_0x867397/startingBalances[_0x1d893d(0x135)]-0x1)*0x64;else{if(_0x2bb05f==='EUR')_0x32c4c4=(_0x867397/startingBalances[_0x1d893d(0x1dd)]-0x1)*0x64;else _0x32c4c4=(_0x867397/startingBalances['usd']-0x1)*0x64;}}if(_0x1e1fc8[_0x1d893d(0x25e)]('net')){let _0x305e65=0x0;if(startingBalances['coins'])_0x44aee2[_0x1d893d(0x252)](_0x31c26=>{const _0x3670ca=_0x1d893d;let _0x412732=startingBalances['coins']['find'](_0x2ca541=>_0x2ca541[_0x3670ca(0x162)]===_0x31c26[_0x3670ca(0x162)]);if(_0x412732&&_0x412732[_0x3670ca(0x162)]&&_0x31c26['number']!==0x0)_0x305e65+=_0x412732[_0x3670ca(0x1aa)]*_0x31c26[_0x3670ca(0x1a3)];});let _0x348e9d=0x0;if(_0x4e7bb2['length']!==0x0){let _0x595c6d=_0x4e7bb2[_0x4e7bb2[_0x1d893d(0x16c)]-0x1];_0x348e9d=_0x595c6d['netoffset'];}_0x305e65-=_0x348e9d;let _0x40ed8e;_0x1e1fc8===_0x1d893d(0x17a)&&(_0x40ed8e=startingBalances[_0x1d893d(0x135)]),_0x1e1fc8==='net-fiat'&&(_0x40ed8e=_0x2bb05f==='EUR'?startingBalances['eur']:startingBalances[_0x1d893d(0x1c2)],_0x305e65*=_0x5bcdd7),_0x32c4c4=(_0x867397-_0x305e65)/_0x40ed8e*0x64,_0x867397=_0x867397-_0x305e65;}if(_0x1e1fc8[_0x1d893d(0x25e)](_0x1d893d(0x1e7))){if(_0x4e7bb2[_0x1d893d(0x16c)]!==0x0&&_0x44aee2['length']!==0x0){let _0x41916c,_0x5632dd=_0x4e7bb2[_0x4e7bb2[_0x1d893d(0x16c)]-0x1][_0x1d893d(0x1e7)];_0x1e1fc8[_0x1d893d(0x25e)](_0x1d893d(0x1c5))?(_0x41916c=_0x2bb05f===_0x1d893d(0x193)?startingBalances[_0x1d893d(0x1dd)]:startingBalances['usd'],_0x5632dd*=CurrencyFactor(_0x2dfb3b,_0x44e1a6,_0x2bb05f)):_0x41916c=startingBalances['basecoin'],_0x32c4c4=_0x5632dd/_0x41916c*0x64,_0x867397=_0x5632dd;}}if(_0x32c4c4){if(_0x32c4c4<0x64)_0x32c4c4=_0x32c4c4['toFixed'](0x2);else{if(_0x32c4c4<0x3e8)_0x32c4c4=_0x32c4c4[_0x1d893d(0x1fa)](0x1);else _0x32c4c4=_0x32c4c4[_0x1d893d(0x1fa)](0x0);}}else _0x32c4c4=Number('0')[_0x1d893d(0x1fa)](0x2);if(_0x867397){if(Math['abs'](_0x867397)<0.000001)_0x867397=_0x867397[_0x1d893d(0x1fa)](0x2);else{if(Math['abs'](_0x867397)<0.1)_0x867397=_0x867397[_0x1d893d(0x1fa)](0x6);else{if(Math[_0x1d893d(0x101)](_0x867397)<0x1)_0x867397=_0x867397[_0x1d893d(0x1fa)](0x5);else{if(Math['abs'](_0x867397)<0xa)_0x867397=_0x867397[_0x1d893d(0x1fa)](0x4);else{if(Math[_0x1d893d(0x101)](_0x867397)<0x64)_0x867397=_0x867397['toFixed'](0x3);else{if(Math[_0x1d893d(0x101)](_0x867397)<0x3e8)_0x867397=_0x867397[_0x1d893d(0x1fa)](0x2);else _0x867397=_0x867397[_0x1d893d(0x1fa)](0x2);}}}}}}else _0x867397=Number('0')[_0x1d893d(0x1fa)](0x2);}else _0x32c4c4=Number('0')[_0x1d893d(0x1fa)](0x2);if(_0x32c4c4>=0x0)_0x32c4c4='+'+_0x32c4c4;return{'value':_0x867397,'change':_0x32c4c4};}async function getStartingBalances(_0x757756,_0x58b395=!![]){const _0x2cf039=_0x58eec8;if(_0x757756[_0x2cf039(0x16c)]!==0x0){const [_0x179e77,_0x4959e2,_0x33c9a4]=getPerf(_0x757756[0x0],!![]);let _0x419a88=[];config[_0x2cf039(0x126)]['forEach'](_0x13d3f5=>{const _0x54aeea=_0x2cf039;let _0x178007=0x0,_0x40bc8e;config[_0x54aeea(0x289)][_0x54aeea(0x252)](_0xe989eb=>{const _0x4a7b37=_0x54aeea;let _0x210f0a=_0xe989eb[_0x4a7b37(0xe8)]['find'](_0x20bb62=>_0x20bb62[_0x4a7b37(0x162)]==_0x13d3f5[_0x4a7b37(0x162)]);if(_0x210f0a){_0x178007+=_0x210f0a[_0x4a7b37(0x1aa)];if(!_0x40bc8e)_0x40bc8e=_0x210f0a['price'];}}),_0x419a88['push']({'coin':_0x13d3f5['coin'],'number':_0x178007,'initialprice':_0x40bc8e});});const _0x4d3bf5={'basecoin':_0x179e77,'eur':_0x4959e2,'usd':_0x33c9a4,'coins':_0x419a88};if(_0x58b395)proxyEmit(_0x2cf039(0x105),_0x4d3bf5);startingBalances=_0x4d3bf5;}}function headlessMode(_0x175d5d){const _0x121cbf=_0x58eec8;let _0x5aede8=_0x175d5d['portfolio'],_0x4b0cd8=_0x175d5d[_0x121cbf(0x171)],_0x50be82=[];for(let _0x105d81 of _0x5aede8){if(_0x105d81[_0x121cbf(0x162)]!=config[_0x121cbf(0x135)]){if(_0x105d81['delta']>=_0x4b0cd8/0x64){if(_0x105d81['valid'])_0x50be82['push'](_0x105d81);}else{if(_0x105d81['delta']<=-_0x4b0cd8/0x64){if(_0x105d81[_0x121cbf(0x28a)])_0x50be82['push'](_0x105d81);}}}}_0x50be82[_0x121cbf(0x16c)]>0x0&&placeOrder(_0x50be82);}function notifyBalance(_0x29e0e5){const _0x33afd0=_0x58eec8;let _0x73492c=_0x29e0e5[_0x33afd0(0x126)],_0x3e8592=_0x29e0e5[_0x33afd0(0x171)],_0xf3e63d=[];for(let _0x13b7d3 of _0x73492c){if(_0x13b7d3['coin']!=config[_0x33afd0(0x135)]){if(_0x13b7d3[_0x33afd0(0x13b)]>=_0x3e8592/0x64){if(_0x13b7d3[_0x33afd0(0x28a)])_0xf3e63d[_0x33afd0(0x121)](_0x13b7d3);}else{if(_0x13b7d3[_0x33afd0(0x13b)]<=-_0x3e8592/0x64){if(_0x13b7d3['valid'])_0xf3e63d['push'](_0x13b7d3);}}}}if(_0xf3e63d[_0x33afd0(0x16c)]>0x0){let _0x2468b8=_0xf3e63d[_0x33afd0(0x12c)](_0x5ca716=>_0x5ca716[_0x33afd0(0x162)]);_0x2468b8[_0x33afd0(0x1b3)]();let _0x35a39c=_0x2468b8[_0x33afd0(0x106)](',\x20');if(!lastCoinsToBalance)logHistory('warning',_0x33afd0(0x1fb));lastCoinsToBalance=_0x35a39c;}}function symbolToCoin(_0x5f07b0){const _0x239df2=_0x58eec8;let _0x1e8004;if(_0x5f07b0[_0x239df2(0x25e)]('/'+config[_0x239df2(0x135)]))_0x1e8004=_0x5f07b0[_0x239df2(0x16b)]('/'+config['basecoin'],'');if(_0x5f07b0[_0x239df2(0x25e)](config[_0x239df2(0x135)]+'/'))_0x1e8004=_0x5f07b0[_0x239df2(0x16b)](config['basecoin']+'/','');return _0x1e8004;}function setLockOrders(_0x32770d){const _0x3b4523=_0x58eec8;lockOrders=_0x32770d,logger[_0x3b4523(0x225)](_0x3b4523(0x21d)+Object[_0x3b4523(0x110)](ORDERS)[lockOrders]);}async function unlockOrders(_0x8743be=![]){const _0x6397af=_0x58eec8;if(allOrdersPlaced&&lockOrders==ORDERS[_0x6397af(0x211)]){setLockOrders(ORDERS['UNLOCKING']);if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);if(_0x8743be){const _0x5894c6=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x5894c6,setBlockTransactionDetection(![]);}validateOrdersState='initial',persistOpenOrders([]),setLockOrders(ORDERS[_0x6397af(0x1f2)]);}}async function validateOrders(_0x4cfb40){const _0xe39137=_0x58eec8;if(_0x4cfb40)validateOrdersState=_0x4cfb40;logger[_0xe39137(0x225)](_0xe39137(0x14f)+validateOrdersState+_0xe39137(0x18a)+Object[_0xe39137(0x110)](ORDERS)[lockOrders]);let _0x50810d=[],_0x402bcd=config[_0xe39137(0x1a0)]==_0xe39137(0x1dc)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0xe39137(0x146)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0xe39137(0x211)])return;logger[_0xe39137(0x225)](_0xe39137(0x140)+validateOrdersState);for(let _0x392c1f=lastOrders[_0xe39137(0x16c)]-0x1;_0x392c1f>=0x0;_0x392c1f--){let _0x5827d2=lastOrders[_0x392c1f],_0x325de7=![];_0x5827d2['filled']>0x0&&(_0x325de7=!![]),_0x50810d[_0xe39137(0x121)](_0x325de7),_0x325de7&&config['ordertype']!=_0xe39137(0x1dc)&&logHistory(_0xe39137(0x22b),'Order\x20filled:\x20'+_0x5827d2[_0xe39137(0x1cd)]+'\x20'+_0x5827d2[_0xe39137(0x218)]+'\x20#'+formatResult(_0x5827d2[_0xe39137(0x1c4)],0x8)+'\x20@'+formatResult(_0x5827d2['price'],0x8)),_0x325de7&&lastOrders[_0xe39137(0x179)](_0x392c1f,0x1);}persistOpenOrders(lastOrders);const _0x18e5ee=coolingDown?'balancing\x20resumes\x20when\x20cooldown\x20ends':_0xe39137(0x280);if(validateOrdersState==_0xe39137(0x232)){validateOrdersState=_0xe39137(0x136);if(_0x50810d[_0xe39137(0x25e)](![])){}else await unlockOrders();}else{if(validateOrdersState=='ongoing'){if(_0x50810d['includes'](![])){}else await unlockOrders();}else{if(validateOrdersState=='final'){let _0x34889d=!![];if(_0x50810d['includes'](![])){if(config[_0xe39137(0x1a0)]=='market')logHistory(_0xe39137(0x23c),_0xe39137(0x1ba)+Math[_0xe39137(0x10e)](_0x402bcd*validateOrderInterval/0xea60)+_0xe39137(0x223)+_0x18e5ee),await unlockOrders(!![]);else{_0x34889d=await cancelOrders();if(_0x34889d)logHistory('success',_0xe39137(0x233)+Math['round'](_0x402bcd*validateOrderInterval/0xea60)+_0xe39137(0x223)+_0x18e5ee),await unlockOrders(!![]);else{validateOrdersState=_0xe39137(0x136),logHistory(_0xe39137(0xde),'Unfilled\x20order(s)\x20could\x20not\x20be\x20canceled\x20after\x20'+Math[_0xe39137(0x10e)](_0x402bcd*validateOrderInterval/0xea60)+_0xe39137(0x223)+_0x18e5ee),logHistory(_0xe39137(0xde),_0xe39137(0x1bb));const _0x4777f9=config[_0xe39137(0x1a0)]==_0xe39137(0x1dc)?validateOrderTimeout*0x3c*0x3e8:config[_0xe39137(0x146)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x32a411=_0xe39137;validateOrders(_0x32a411(0x15b));},_0x4777f9);}}}else await unlockOrders(!![]);}else{if(validateOrdersState=='no\x20open\x20orders'){if(config[_0xe39137(0x1a0)]!=_0xe39137(0x1dc))logHistory(_0xe39137(0x23c),'No\x20more\x20open\x20orders\x20-\x20'+_0x18e5ee);await unlockOrders(!![]);}}}}}async function cancelOrders(){const _0x2709a5=_0x58eec8;let _0x39fca5=!![],_0x3f9d4a;for(const _0x11f42f of lastOrders){let _0x56e671=![],_0x2e9c9c=0x0;while(!_0x56e671&&_0x2e9c9c<maxRetries){try{const _0xb3f031=await exchange[_0x2709a5(0x1ef)](_0x11f42f[_0x2709a5(0x1d6)],_0x11f42f[_0x2709a5(0x1cd)]);_0x56e671=!![];}catch(_0x2deb3f){_0x2deb3f['toString']()[_0x2709a5(0x25e)]('OrderNotFound')||_0x2deb3f[_0x2709a5(0x14b)]()['includes'](_0x2709a5(0xff))?_0x56e671=!![]:(_0x3f9d4a=_0x2deb3f,_0x56e671=![]);}!_0x56e671&&(_0x2e9c9c++,await sleep(retryInterval));}_0x39fca5=_0x39fca5&&_0x56e671;}return!_0x39fca5&&await handleError(_0x3f9d4a,'cancelOrders()'),_0x39fca5;}async function initCoinResults(_0x4bd094){const _0x21d76e=_0x58eec8;_0x4bd094?logger[_0x21d76e(0x225)](_0x21d76e(0x195)+_0x4bd094):logger[_0x21d76e(0x225)](_0x21d76e(0x1a8)),config['portfolio']['forEach'](_0x53e535=>{const _0x52e176=_0x21d76e;if(!_0x53e535['excluded']&&_0x53e535[_0x52e176(0x162)]!=config[_0x52e176(0x135)]){const _0x3f90ff=currentCoins['find'](_0x46ccd9=>_0x46ccd9[_0x52e176(0x162)]==_0x53e535['coin']),_0x20e1a5=gTicker[noslash(_0x53e535['symbol'])];let _0x4fa390=_0x3f90ff?_0x3f90ff['number']:null,_0x3f3895=_0x53e535['reverse']?0x1/_0x20e1a5:_0x20e1a5,_0x21a5a7;config[_0x52e176(0x289)][_0x52e176(0x252)](_0x3181ae=>{const _0x2214c3=_0x52e176;!_0x21a5a7&&(_0x21a5a7=_0x3181ae[_0x2214c3(0xe8)][_0x2214c3(0x164)](_0xa5d390=>_0xa5d390[_0x2214c3(0x162)]==_0x53e535[_0x2214c3(0x162)]),_0x21a5a7&&(_0x4fa390=_0x21a5a7[_0x2214c3(0x1aa)],_0x3f3895=_0x21a5a7[_0x2214c3(0x128)]));});let _0x4e68cf=dbCoinResults[_0x52e176(0x16d)]('coins')[_0x52e176(0x164)]({'coin':_0x53e535[_0x52e176(0x162)]})[_0x52e176(0x246)]();if(!_0x4e68cf){const _0x4a9a54={'coin':_0x53e535['coin'],'number':_0x4fa390,'breakeven':_0x3f3895,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get']('coins')['push'](_0x4a9a54)[_0x52e176(0xfb)]();}else{if(_0x4bd094&&_0x53e535[_0x52e176(0x162)]==_0x4bd094){const _0x107e8f={'coin':_0x53e535[_0x52e176(0x162)],'number':_0x4fa390,'breakeven':_0x3f3895,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x52e176(0x16d)]('coins')[_0x52e176(0x164)]({'coin':_0x53e535[_0x52e176(0x162)]})[_0x52e176(0xf3)](_0x107e8f)[_0x52e176(0xfb)]();}}}});}async function placeOrder(_0x1145e9){const _0x51a5f6=_0x58eec8,_0x101856=config['ordertype']==_0x51a5f6(0x1dc)?_0x51a5f6(0x1dc):'limit';if(lockOrders==ORDERS[_0x51a5f6(0x1f2)]&&!coolingDown){setLockOrders(ORDERS[_0x51a5f6(0x211)]);while(transactionDetectionOngoing){await sleep(0x64);}logger['debug'](_0x51a5f6(0x181)+_0x1145e9[_0x51a5f6(0x12c)](_0x3f6580=>_0x3f6580[_0x51a5f6(0x162)])[_0x51a5f6(0x106)](',\x20')),lastCoinsToBalance='',allOrdersPlaced=![],validateOrdersState=_0x51a5f6(0x232);let _0x4f6cd4=![];lastOrders=[];const _0x109101=config['threshold'];for(const _0x513fa2 of _0x1145e9){let _0x6a5c7e,_0x665b0c,_0xf32def,_0x10d70e,_0x459229,_0x1f75dd=_0x513fa2['symbol'];logger[_0x51a5f6(0x225)](_0x51a5f6(0x196)+_0x513fa2[_0x51a5f6(0x162)]+'\x20'+_0x513fa2[_0x51a5f6(0x1aa)]+'\x20'+_0x513fa2[_0x51a5f6(0x1a3)]+'\x20'+_0x513fa2[_0x51a5f6(0x245)]+'%\x20'+_0x513fa2[_0x51a5f6(0x11a)]+'%\x20'+(0x64*_0x513fa2[_0x51a5f6(0x13b)])[_0x51a5f6(0x1fa)](0x2)+'%\x20('+_0x109101['toFixed'](0x2)+'%)'),insufficientFundsWarningSent=insufficientFundsWarningSent[_0x51a5f6(0x147)](_0x3c304a=>_0x3c304a!==_0x513fa2[_0x51a5f6(0x162)]);const _0x42055c=currentCoins[_0x51a5f6(0x164)](_0xbae283=>_0xbae283[_0x51a5f6(0x162)]==_0x513fa2[_0x51a5f6(0x162)]);_0x42055c&&(_0x42055c['prevnumber']=_0x513fa2[_0x51a5f6(0x1aa)]);try{const _0x44598c=await exchange[_0x51a5f6(0x228)](_0x1f75dd);_0x6a5c7e=_0x513fa2[_0x51a5f6(0xda)]?0x1/_0x513fa2['last']:_0x513fa2[_0x51a5f6(0x1a3)],_0x665b0c=_0x44598c[_0x51a5f6(0x139)],_0xf32def=_0x44598c[_0x51a5f6(0x273)];_0x513fa2[_0x51a5f6(0xda)]?(_0x10d70e=_0x513fa2[_0x51a5f6(0x218)]==_0x51a5f6(0xdd)?'sell':_0x51a5f6(0xdd),_0x459229=Math[_0x51a5f6(0x101)](_0x513fa2['trade'])/_0x6a5c7e):(_0x10d70e=_0x513fa2[_0x51a5f6(0x218)],_0x459229=Math[_0x51a5f6(0x101)](_0x513fa2[_0x51a5f6(0x24f)]));_0x101856==_0x51a5f6(0x204)&&(config[_0x51a5f6(0x1a0)]==_0x51a5f6(0x22d)&&(_0x6a5c7e=_0x10d70e==_0x51a5f6(0xdd)?_0x665b0c:_0xf32def),config[_0x51a5f6(0x1a0)]=='limit-low'&&(_0x6a5c7e=_0x10d70e=='buy'?_0xf32def:_0x665b0c));_0x459229=formatResult(_0x459229,0x8),_0x6a5c7e=formatResult(_0x6a5c7e,0x8);const _0x3eaa9d=_0x10d70e==_0x51a5f6(0x276)?config[_0x51a5f6(0x160)]?String['fromCodePoint']('0x'+config[_0x51a5f6(0x160)])+'\x20':'':config[_0x51a5f6(0x1ab)]?String[_0x51a5f6(0x295)]('0x'+config[_0x51a5f6(0x1ab)])+'\x20':'',_0x1039e3=_0x101856=='market'?'Market':config[_0x51a5f6(0x1a0)]=='limit-high'?_0x51a5f6(0x224):'Limit\x20(low-margin)',_0x10d236=(Math[_0x51a5f6(0x249)](Math['random']()*0x35a4e900)+0x5f5e100)[_0x51a5f6(0x14b)]();lastOrders['push']({'customId':_0x10d236,'symbol':_0x1f75dd,'coin':_0x513fa2[_0x51a5f6(0x162)],'amount':_0x459229,'price':_0x6a5c7e,'side':_0x10d70e,'reverse':_0x513fa2['reverse'],'filled':0x0});let _0xd33c31;_0x101856==_0x51a5f6(0x1dc)?_0x10d70e=='buy'&&[_0x51a5f6(0xf1),_0x51a5f6(0x1af),'Cex',_0x51a5f6(0x288),_0x51a5f6(0xd5),_0x51a5f6(0x168)][_0x51a5f6(0x25e)](config[_0x51a5f6(0x26c)])?_0xd33c31=await exchange['createOrder'](_0x1f75dd,_0x101856,_0x10d70e,_0x459229,_0x6a5c7e):_0xd33c31=await exchange[_0x51a5f6(0x155)](_0x1f75dd,_0x101856,_0x10d70e,_0x459229,undefined):_0xd33c31=await exchange[_0x51a5f6(0x155)](_0x1f75dd,_0x101856,_0x10d70e,_0x459229,_0x6a5c7e);const _0x57ec5f=lastOrders['length']-0x1;if(_0x57ec5f>=0x0&&lastOrders[_0x57ec5f][_0x51a5f6(0x152)]==_0x10d236){lastOrders[_0x57ec5f]['orderId']=_0xd33c31['id'];if(_0xd33c31['amount'])lastOrders[_0x57ec5f][_0x51a5f6(0x27a)]=_0xd33c31['amount'];if(_0xd33c31[_0x51a5f6(0x128)])lastOrders[_0x57ec5f][_0x51a5f6(0x128)]=_0xd33c31[_0x51a5f6(0x128)];lastOrders[_0x57ec5f][_0x51a5f6(0x257)]=_0xd33c31[_0x51a5f6(0x257)];}if(_0xd33c31[_0x51a5f6(0x27a)])_0x459229=_0xd33c31[_0x51a5f6(0x27a)];if(_0xd33c31['price'])_0x6a5c7e=_0xd33c31[_0x51a5f6(0x128)];if(_0x101856==_0x51a5f6(0x1dc))logHistory('order',''+_0x3eaa9d+_0x1039e3+'\x20order:\x20'+_0x1f75dd+'\x20'+_0x10d70e+'\x20#'+formatResult(_0x459229,0x8)+'\x20@'+formatResult(_0x6a5c7e,0x8));else logHistory(_0x51a5f6(0x22b),''+_0x3eaa9d+_0x1039e3+_0x51a5f6(0x210)+_0x1f75dd+'\x20'+_0x10d70e+'\x20#'+formatResult(_0x459229,0x8)+'\x20@'+formatResult(_0x6a5c7e,0x8));logger[_0x51a5f6(0x225)](_0x51a5f6(0xcb)+_0xd33c31['id']+_0x51a5f6(0xd7)+_0x10d236);if(config[_0x51a5f6(0x230)]!=0x0){let _0x12b96f=null;if(cooldownTracker[_0x51a5f6(0x16c)]==config[_0x51a5f6(0x230)]-0x1)_0x12b96f=cooldownTracker[_0x51a5f6(0x23a)]();const _0x566f3f=getTimeStamp();cooldownTracker['push'](_0x566f3f);if(_0x12b96f){const _0x13bdfd=fns['differenceInSeconds'](new Date(_0x566f3f),new Date(_0x12b96f));if(_0x13bdfd<cooldownInterval){logHistory(_0x51a5f6(0xde),_0x51a5f6(0x267)+config[_0x51a5f6(0x230)]+'\x20orders\x20in\x20less\x20than\x20'+cooldownInterval/0x3c+'\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20'+cooldownPeriod/(0xe10*0x3e8)+_0x51a5f6(0x163)),coolingDown=!![];break;}}}}catch(_0x4eeab4){if(_0x4eeab4[_0x51a5f6(0x14b)]()['includes'](_0x51a5f6(0x22a)))lastOrders=lastOrders[_0x51a5f6(0x147)](_0x4cee0e=>_0x4cee0e[_0x51a5f6(0x1cd)]!=_0x1f75dd),logHistory(_0x51a5f6(0xde),_0x51a5f6(0x107)+_0x1f75dd),_0x4f6cd4=!![];else{if(_0x4eeab4[_0x51a5f6(0x14b)]()[_0x51a5f6(0x25e)]('Invalid\x20quantity'))lastOrders=lastOrders['filter'](_0x560d22=>_0x560d22['symbol']!=_0x1f75dd),logHistory('error',_0x51a5f6(0x12b)+_0x1f75dd),_0x4f6cd4=!![];else{if(_0x4eeab4['toString']()['includes'](_0x51a5f6(0xff)))lastOrders=lastOrders[_0x51a5f6(0x147)](_0x4b8e09=>_0x4b8e09[_0x51a5f6(0x1cd)]!=_0x1f75dd),logHistory('error',_0x51a5f6(0x272)+_0x1f75dd),logger[_0x51a5f6(0x225)](_0x4eeab4),_0x4f6cd4=!![];else _0x4eeab4[_0x51a5f6(0x14b)]()[_0x51a5f6(0x25e)](_0x51a5f6(0x20d))?(lastOrders=lastOrders[_0x51a5f6(0x147)](_0x23e5cf=>_0x23e5cf[_0x51a5f6(0x1cd)]!=_0x1f75dd),logHistory(_0x51a5f6(0xde),_0x51a5f6(0x107)+_0x1f75dd),_0x4f6cd4=!![]):(lastOrders=lastOrders[_0x51a5f6(0x147)](_0x2f8864=>_0x2f8864[_0x51a5f6(0x1cd)]!=_0x1f75dd),await handleError(_0x4eeab4,_0x51a5f6(0x254),_0x1f75dd));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders['length']>0x0){const _0x77c8be=config[_0x51a5f6(0x1a0)]=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0x51a5f6(0x146)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x18c5dd=_0x51a5f6;validateOrders(_0x18c5dd(0x15b));},_0x77c8be);}else unlockOrders();_0x4f6cd4&&config[_0x51a5f6(0x108)]&&(logHistory(_0x51a5f6(0xde),_0x51a5f6(0xee)+pauseBotMsg),await pauseBot(pauseBotInterval)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x51a5f6(0x23c),_0x51a5f6(0x177)));}else{if(coolingDown)!config[_0x51a5f6(0x108)]&&logHistory(_0x51a5f6(0xde),_0x51a5f6(0x1cc));else lockOrders!=ORDERS[_0x51a5f6(0x1f2)]&&(!config[_0x51a5f6(0x108)]&&(config[_0x51a5f6(0x1a0)]=='market'?logHistory('error',_0x51a5f6(0x10a)):logHistory(_0x51a5f6(0xde),_0x51a5f6(0x1ad))));}}function persistOpenOrders(_0x49d486){const _0x391809=_0x58eec8,_0x58792b={...config,'openOrders':_0x49d486};let _0x2534d2=dbConfig[_0x391809(0x16d)]('bot')['find']({'botID':botID})[_0x391809(0x246)]();_0x2534d2&&dbConfig['get'](_0x391809(0x18c))[_0x391809(0x164)]({'botID':botID})[_0x391809(0xf3)](_0x58792b)['write']();}function restoreOrders(){const _0x523589=_0x58eec8;let _0xc77b94;config[_0x523589(0x102)]&&allOpenOrders[_0x523589(0x252)](_0x2e6d37=>{const _0x149715=_0x523589,_0x59ba2c=config[_0x149715(0x102)]['find'](_0x41177b=>_0x41177b[_0x149715(0x1d6)]==_0x2e6d37['id']);_0x59ba2c&&(lastOrders['push'](_0x59ba2c),_0xc77b94=_0x2e6d37[_0x149715(0x159)]);});if(lastOrders[_0x523589(0x16c)]>0x0){setLockOrders(ORDERS['LOCKED']),validateOrdersState=_0x523589(0x136),allOrdersPlaced=!![];const _0x3216eb=new Date()[_0x523589(0x100)](),_0x357ee0=config['ordertype']==_0x523589(0x1dc)?validateOrderTimeout*0x3c*0x3e8:config[_0x523589(0x146)]*0x3c*0x3e8;if(_0xc77b94+_0x357ee0>_0x3216eb){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x441f0a=_0x523589;validateOrders(_0x441f0a(0x15b));},_0xc77b94+_0x357ee0-_0x3216eb);}else validateOrders('final');}}async function sendMetricsTelegram(){const _0x355348=_0x58eec8;if(!coinsLoaded){process[_0x355348(0x274)]({'telegrammsg':_0x355348(0xf5)},_0x3453be=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0xf9bdc6='';if(config['showname'])_0xf9bdc6=_0x355348(0x109)+config['botname']+_0x355348(0x261);else _0xf9bdc6=_0x355348(0x189)+botID+_0x355348(0x261);const _0x4eca60=config[_0x355348(0x135)],_0x270299=config[_0x355348(0x1c5)],_0x2bc3ce=getKPIs(_0x355348(0x135)),_0x14c721=getKPIs(_0x355348(0x1c5),_0x270299),_0x4e6c71=getKPIs(_0x355348(0x17a)),_0x392cc8=getKPIs(_0x355348(0x1da),_0x270299),_0x1a7594=getKPIs(_0x355348(0x213)),_0x5d45da=getKPIs('pnl-fiat',_0x270299);_0x4eca60[_0x355348(0x25e)](_0x270299)?(_0xf9bdc6+='<pre>',_0xf9bdc6+='Value\x20'+_0x4eca60+':\x20'+_0x2bc3ce[_0x355348(0x246)]+'\x20('+_0x2bc3ce['change']+'%)\x0a',_0xf9bdc6+='Net\x20'+_0x4eca60+':\x20'+_0x4e6c71[_0x355348(0x246)]+'\x20('+_0x4e6c71[_0x355348(0x133)]+_0x355348(0x145),_0xf9bdc6+=_0x355348(0x132)+_0x4eca60+':\x20'+_0x1a7594[_0x355348(0x246)]+'\x20('+_0x1a7594['change']+_0x355348(0x145),_0xf9bdc6+=_0x355348(0x237)):(_0xf9bdc6+=_0x355348(0x1bf),_0xf9bdc6+='Value\x20'+_0x4eca60+':\x20'+_0x2bc3ce[_0x355348(0x246)]+'\x20('+_0x2bc3ce[_0x355348(0x133)]+_0x355348(0x145),_0xf9bdc6+=_0x355348(0x1be)+_0x270299+':\x20'+_0x14c721[_0x355348(0x246)]+'\x20('+_0x14c721['change']+_0x355348(0x145),_0xf9bdc6+='Net\x20'+_0x4eca60+':\x20'+_0x4e6c71[_0x355348(0x246)]+'\x20('+_0x4e6c71[_0x355348(0x133)]+_0x355348(0x145),_0xf9bdc6+=_0x355348(0x1ce)+_0x270299+':\x20'+_0x392cc8['value']+'\x20('+_0x392cc8[_0x355348(0x133)]+_0x355348(0x145),_0xf9bdc6+=_0x355348(0x132)+_0x4eca60+':\x20'+_0x1a7594[_0x355348(0x246)]+'\x20('+_0x1a7594[_0x355348(0x133)]+'%)\x0a',_0xf9bdc6+=_0x355348(0x132)+_0x270299+':\x20'+_0x5d45da['value']+'\x20('+_0x5d45da['change']+_0x355348(0x145),_0xf9bdc6+='</pre>'),process[_0x355348(0x274)]({'telegrammsg':_0xf9bdc6},_0x1fc0bc=>{});}async function sendPortfolioTelegram(){const _0x2a127d=_0x58eec8;if(!coinsLoaded||!currentCoins[0x0]['distribution']){process[_0x2a127d(0x274)]({'telegrammsg':_0x2a127d(0xf5)},_0x24e023=>{});return;}let _0x3cc5f5='';if(config[_0x2a127d(0x167)])_0x3cc5f5='<b>'+config[_0x2a127d(0x1ac)]+_0x2a127d(0x24b);else _0x3cc5f5=_0x2a127d(0x189)+botID+'\x20portfolio:</b>\x20\x0a\x0a';_0x3cc5f5+=_0x2a127d(0x1bf),_0x3cc5f5+=_0x2a127d(0x212),_0x3cc5f5+=_0x2a127d(0x231),_0x3cc5f5+=_0x2a127d(0x212),currentCoins[_0x2a127d(0x252)](_0x38ffb9=>{const _0x188dc6=_0x2a127d;_0x3cc5f5+=_0x38ffb9[_0x188dc6(0x162)]['padEnd'](0x7)+'|\x20'+formatPad(_0x38ffb9[_0x188dc6(0x245)],0x2,0x6)+'|\x20'+formatPad(_0x38ffb9['target'],0x2,0x6)+'|\x20'+(_0x38ffb9[_0x188dc6(0x11a)]==0x0?'∞'[_0x188dc6(0xfa)](0x6):formatPad(_0x38ffb9[_0x188dc6(0x13b)]*0x64,0x2,0x6))+'\x0a';}),_0x3cc5f5+=_0x2a127d(0x237),process[_0x2a127d(0x274)]({'telegrammsg':_0x3cc5f5},_0x51d056=>{});}function formatPad(_0xa33b4d,_0x4eaae7,_0x8cc270){const _0x1927be=_0x58eec8,_0xd52b9e=formatResultString(_0xa33b4d,_0x4eaae7);return _0xd52b9e?_0xd52b9e[_0x1927be(0xfa)](_0x8cc270):''[_0x1927be(0xfa)](_0x8cc270);}function logHistory(_0x6b9aeb,_0x285563,_0x39f810=''){const _0xd9723e=_0x58eec8;logger[_0xd9723e(0x1d2)](''+_0x285563);let _0x4d94b3={'time':getTimeStamp(),'type':_0x6b9aeb,'event':_0x285563};dbLogs[_0xd9723e(0x16d)](_0xd9723e(0x15d))[_0xd9723e(0x121)](_0x4d94b3)['write']();if(_0x39f810=='')_0x39f810=_0x285563;proxyEmit(_0xd9723e(0xea),{'log':_0x4d94b3,'summary':_0x39f810}),process[_0xd9723e(0x274)]({'telegram':{..._0x4d94b3,'botname':config[_0xd9723e(0x1ac)],'showname':config[_0xd9723e(0x167)]}},_0x4fa29f=>{});}function emitHistory(_0x281cda={}){const _0x3172ee=_0x58eec8;Object[_0x3172ee(0x110)](_0x281cda)[_0x3172ee(0x16c)]==0x0&&(_0x281cda={'type':[_0x3172ee(0x22b),_0x3172ee(0xea)],'event':'','page':0x1});if(_0x281cda['type'][_0x3172ee(0x25e)](_0x3172ee(0xea)))_0x281cda[_0x3172ee(0x26f)][_0x3172ee(0x179)](_0x281cda[_0x3172ee(0x26f)][_0x3172ee(0x1c8)](_0x3172ee(0xea)),0x1,_0x3172ee(0xde),_0x3172ee(0x1a5),'success');if(dbLogs[_0x3172ee(0x25f)](_0x3172ee(0x15d))[_0x3172ee(0x246)]()){let _0x158038=dbLogs[_0x3172ee(0x16d)](_0x3172ee(0x15d))[_0x3172ee(0x147)](_0x32820b=>{const _0x4bfeb6=_0x3172ee;if(_0x281cda[_0x4bfeb6(0x26f)][_0x4bfeb6(0x16c)]==0x0)return![];else return _0x281cda[_0x4bfeb6(0x26f)][_0x4bfeb6(0x25e)](_0x32820b[_0x4bfeb6(0x26f)]);})[_0x3172ee(0x147)](_0xf92bca=>{const _0x4d80b4=_0x3172ee;if(_0x281cda[_0x4d80b4(0xea)]=='')return!![];else return _0xf92bca[_0x4d80b4(0xea)]['toLowerCase']()[_0x4d80b4(0x25e)](_0x281cda[_0x4d80b4(0xea)][_0x4d80b4(0x13a)]());})[_0x3172ee(0x1b8)](_0x3172ee(0x1a1)),_0x598e9e=_0x158038[_0x3172ee(0x246)]()[_0x3172ee(0x16c)];_0x158038=_0x158038['reverse']()['slice']((_0x281cda[_0x3172ee(0x1f8)]-0x1)*logPageSize,_0x281cda['page']*logPageSize-0x1)[_0x3172ee(0xda)]()[_0x3172ee(0x246)](),proxyEmit(_0x3172ee(0x114),{'logs':_0x158038,'total':_0x598e9e});}else proxyEmit(_0x3172ee(0x114),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x56536b){const _0x296201=_0x58eec8;if(dbLogs['has'](_0x296201(0x15d))[_0x296201(0x246)]()){const _0x33c0bb=dbLogs[_0x296201(0x16d)]('logs')['sortBy']('time')[_0x296201(0x147)](_0x2743e2=>{const _0x5e1b76=_0x296201;return _0x2743e2['type']==_0x5e1b76(0x22b);})[_0x296201(0x246)]();dbLogs[_0x296201(0x16d)](_0x296201(0x15d))[_0x296201(0x17b)]()[_0x296201(0xfb)](),dbLogs['get'](_0x296201(0x15d))[_0x296201(0xf3)](_0x33c0bb)[_0x296201(0xfb)](),emitHistory(_0x56536b);}}async function pauseBot(_0x49e151=pauseBotIntervalShort,_0x27a9aa,_0x461b27,_0x430b95=![]){const _0x54bb12=_0x58eec8,_0x7b3669=new Date()['getTime']();if(!lastErrorShown||_0x7b3669-lastErrorShown>=_0x49e151){lastErrorShown=_0x7b3669;if(!lastBotPause)lastBotPause=_0x7b3669,consecutivePauses=0x1;else{if(_0x7b3669-lastBotPause-_0x49e151<0x5a*0x3e8){consecutivePauses++;if(consecutivePauses>maxPauseRetries){if(_0x430b95){logHistory('error',_0x27a9aa+_0x54bb12(0x172)),await killBot();return;}else logHistory(_0x54bb12(0xde),_0x27a9aa+pauseBotMsg),_0x49e151=pauseBotInterval;}}else consecutivePauses=0x1;lastBotPause=_0x7b3669;}_0x461b27?logger[_0x54bb12(0x225)]('('+consecutivePauses+')\x20'+_0x27a9aa+_0x54bb12(0x186),_0x461b27):logger['debug']('('+consecutivePauses+')\x20'+_0x27a9aa);if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);await sleep(_0x49e151),botPaused=![],_0x49e151==pauseBotIntervalShort?resumeBot(!![]):resumeBot(![]);}}}async function killBot(){const _0x1c01a3=_0x58eec8;botPaused=!![],await sleep(0x3e8),process['send']({'stop':_0x1c01a3(0x122)},_0x1637aa=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x291530,_0x514341,_0x67c827=![]){const _0x2f2a7b=_0x58eec8;if(botPaused)return;let _0x1d8377;const _0x421e95=config[_0x2f2a7b(0x26c)]||_0x2f2a7b(0x238);if(_0x514341)logger['debug'](_0x2f2a7b(0x1eb)+_0x514341);const _0x365692=()=>{const _0x38b062=_0x2f2a7b;loading[_0x38b062(0xde)]=_0x38b062(0x28c),emitLoadingProgress();};if(_0x291530[_0x2f2a7b(0x14b)]()[_0x2f2a7b(0x25e)](_0x2f2a7b(0x13d)))logHistory(_0x2f2a7b(0xde),_0x421e95+'\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)'),_0x365692();else{if(_0x291530[_0x2f2a7b(0x14b)]()['includes'](_0x2f2a7b(0x1df)))logHistory('error',_0x421e95+_0x2f2a7b(0x200)),_0x365692();else{if(_0x291530[_0x2f2a7b(0x14b)]()[_0x2f2a7b(0x25e)]('AuthenticationError'))config[_0x2f2a7b(0x205)]?_0x1d8377=_0x421e95+_0x2f2a7b(0x1a4):_0x1d8377=_0x421e95+_0x2f2a7b(0x157),logHistory('error',_0x1d8377+_0x2f2a7b(0x28d)),_0x365692();else{if(_0x291530[_0x2f2a7b(0x14b)]()[_0x2f2a7b(0x25e)](_0x2f2a7b(0x15f)))logHistory(_0x2f2a7b(0xde),_0x421e95+_0x2f2a7b(0x263)),_0x365692();else{if(!_0x67c827)await handleError(_0x291530,null);}}}}}async function handleError(_0x5a734c,_0x2cdd60,_0x30f566=''){const _0x4ca99f=_0x58eec8;if(botPaused)return;let _0x96791;const _0x146dbe=config[_0x4ca99f(0x26c)]||_0x4ca99f(0x238);if(_0x2cdd60)logger[_0x4ca99f(0x225)]('Exception\x20thrown\x20in\x20'+_0x2cdd60);if(_0x5a734c['toString']()[_0x4ca99f(0x25e)](_0x4ca99f(0x206)))_0x96791=_0x146dbe+_0x4ca99f(0x1e6),await pauseBot(undefined,_0x96791,_0x5a734c);else{if(_0x5a734c['toString']()[_0x4ca99f(0x25e)](_0x4ca99f(0x217)))_0x96791=_0x146dbe+'\x20blocked\x20API\x20(RateLimitExceeded)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading',await pauseBot(undefined,_0x96791,_0x5a734c);else{if(_0x5a734c[_0x4ca99f(0x14b)]()[_0x4ca99f(0x25e)]('ExchangeNotAvailable')||_0x5a734c[_0x4ca99f(0x14b)]()[_0x4ca99f(0x25e)]('OnMaintenance'))_0x96791=_0x146dbe+_0x4ca99f(0x287),await pauseBot(undefined,_0x96791,_0x5a734c['toString']());else{if(_0x5a734c[_0x4ca99f(0x14b)]()[_0x4ca99f(0x25e)]('RequestTimeout'))_0x96791=_0x146dbe+_0x4ca99f(0x26d),await pauseBot(undefined,_0x96791,_0x5a734c[_0x4ca99f(0x14b)]());else{if(_0x5a734c[_0x4ca99f(0x14b)]()[_0x4ca99f(0x25e)](_0x4ca99f(0x1d7)))_0x96791=_0x146dbe+_0x4ca99f(0x251),await pauseBot(undefined,_0x96791,_0x5a734c['toString']());else{if(_0x5a734c['toString']()[_0x4ca99f(0x13a)]()[_0x4ca99f(0x25e)](_0x4ca99f(0x159))||_0x5a734c[_0x4ca99f(0x14b)]()[_0x4ca99f(0x13a)]()[_0x4ca99f(0x25e)](_0x4ca99f(0x23d)))_0x96791=_0x4ca99f(0x12a),await pauseBot(undefined,_0x96791,_0x5a734c[_0x4ca99f(0x14b)]());else{if(_0x5a734c[_0x4ca99f(0x14b)]()[_0x4ca99f(0x25e)](_0x4ca99f(0x125)))_0x96791=_0x146dbe+'\x20rejected\x20your\x20API\x20request\x20(see:\x20hodlerhacks.com/fix/4)',await pauseBot(undefined,_0x96791,_0x5a734c['toString']());else{if(_0x5a734c instanceof ccxt[_0x4ca99f(0x1c3)])_0x96791=_0x146dbe+_0x4ca99f(0x1e3)+_0x5a734c[_0x4ca99f(0x14b)](),logger['debug'](_0x4ca99f(0x112),_0x5a734c),await pauseBot(undefined,_0x96791,_0x5a734c);else{if(_0x5a734c[_0x4ca99f(0x14b)]()[_0x4ca99f(0x25e)](_0x4ca99f(0x13d)))logHistory('error',_0x146dbe+'\x20API\x20key\x20is\x20invalid'),logHistory(_0x4ca99f(0xde),_0x4ca99f(0x142)),await killBot();else{if(_0x5a734c[_0x4ca99f(0x14b)]()[_0x4ca99f(0x25e)](_0x4ca99f(0x1df)))logHistory(_0x4ca99f(0xde),_0x146dbe+_0x4ca99f(0x151)),logHistory('error',_0x4ca99f(0x142)),await killBot();else{if(_0x5a734c[_0x4ca99f(0x14b)]()[_0x4ca99f(0x25e)](_0x4ca99f(0x1f3))&&_0x5a734c[_0x4ca99f(0x14b)]()[_0x4ca99f(0x25e)](_0x4ca99f(0xd9)))_0x96791=_0x146dbe+_0x4ca99f(0x1b2),await pauseBot(undefined,_0x96791,_0x5a734c,!![]);else{if(_0x5a734c[_0x4ca99f(0x14b)]()['includes'](_0x4ca99f(0x1f3)))config['apiPassword']?_0x96791=_0x146dbe+_0x4ca99f(0x1a4):_0x96791=_0x146dbe+'\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange',logHistory('error',_0x96791),logHistory(_0x4ca99f(0xde),_0x4ca99f(0x142)),await killBot();else{if(_0x5a734c[_0x4ca99f(0x14b)]()[_0x4ca99f(0x25e)](_0x4ca99f(0x15f)))logHistory('error',_0x146dbe+'\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange'),logHistory('error',_0x4ca99f(0x142)),await killBot();else{if(_0x5a734c[_0x4ca99f(0x14b)]()[_0x4ca99f(0x25e)](_0x4ca99f(0x202)))logHistory('error',_0x4ca99f(0x170)+_0x30f566),logger[_0x4ca99f(0x225)]('Error\x20details:',_0x5a734c);else{if(_0x5a734c instanceof ccxt[_0x4ca99f(0x1b7)]){_0x96791=_0x146dbe+'\x20exchange\x20error:\x20'+_0x5a734c[_0x4ca99f(0x14b)]();if(_0x30f566)_0x96791+=_0x4ca99f(0x24e)+_0x30f566;await pauseBot(undefined,_0x96791,_0x5a734c);}else{_0x96791=_0x4ca99f(0x20a)+_0x5a734c[_0x4ca99f(0x14b)]();if(_0x30f566)_0x96791+=_0x4ca99f(0x24e)+_0x30f566;await pauseBot(undefined,_0x96791);}}}}}}}}}}}}}}}}function decryptRSA(_0x113d6e,_0x4a72b4){const _0x3f9c51=_0x58eec8,_0x8104ed=forge['pki'][_0x3f9c51(0x259)](_0x113d6e),_0x373454=_0x8104ed[_0x3f9c51(0x296)](forge[_0x3f9c51(0x278)]['decode64'](_0x4a72b4),'RSA-OAEP',{'md':forge['md']['sha256'][_0x3f9c51(0x18b)](),'mgf1':{'md':forge['md']['sha256']['create']()}});return _0x373454;}async function withRetry(_0x1b86eb,_0x31ddff){const _0x5124c8=_0x58eec8;let _0x41b8da=![],_0x3c8fa2=0x0,_0x2b7a2e,_0x414b25;while(_0x3c8fa2<maxRetries){try{_0x2b7a2e=await _0x31ddff();break;}catch(_0x3f5341){_0x414b25=_0x3f5341,!_0x41b8da?(_0x41b8da=!![],logger[_0x5124c8(0x225)](_0x5124c8(0x11d)+_0x1b86eb+':',_0x3f5341[_0x5124c8(0x14b)]())):await sleep(retryInterval);}_0x3c8fa2++;}if(_0x3c8fa2==0x0)return _0x2b7a2e;if(_0x3c8fa2>=maxRetries)throw _0x414b25;else return logger['debug'](_0x5124c8(0x290)+_0x3c8fa2+_0x5124c8(0x1a2)),_0x2b7a2e;}function formatResult(_0x81d79a,_0x530ccb){const _0x3eec96=_0x58eec8;return parseFloat(_0x81d79a[_0x3eec96(0x1fa)](_0x530ccb));}function formatResultTruncate(_0x453f1b,_0x2dcfd8){const _0x32dbaf=_0x58eec8;let _0x576f5f=formatResultString(_0x453f1b,0xa),_0xdb7a32=_0x576f5f[_0x32dbaf(0x1c8)]('.');return _0xdb7a32!=-0x1&&(_0x576f5f=_0x576f5f[_0x32dbaf(0x113)](0x0,_0xdb7a32+_0x2dcfd8+0x1)),Number(_0x576f5f);}function formatResultString(_0xfb478c,_0x857cc5){const _0x1794fb=_0x58eec8;let _0x1339be;if(!(''+_0xfb478c)[_0x1794fb(0x25e)]('e'))_0x1339be=+(Math['round'](_0xfb478c+'e+'+_0x857cc5)+'e-'+_0x857cc5);else{let _0x3aa6e3=(''+_0xfb478c)[_0x1794fb(0x27e)]('e'),_0x3fb7d1='';+_0x3aa6e3[0x1]+_0x857cc5>0x0&&(_0x3fb7d1='+'),_0x1339be=+(Math['round'](+_0x3aa6e3[0x0]+'e'+_0x3fb7d1+(+_0x3aa6e3[0x1]+_0x857cc5))+'e-'+_0x857cc5);}return Number(_0x1339be)['toFixed'](_0x857cc5);}function getServerTime(){const _0x678b7a=_0x58eec8,_0x16c113=new Date();return _0x16c113[_0x678b7a(0x1f9)]()+'/'+(_0x16c113[_0x678b7a(0x14a)]()+0x1)[_0x678b7a(0x14b)]()[_0x678b7a(0xfa)](0x2,'0')+'/'+_0x16c113[_0x678b7a(0x219)]()[_0x678b7a(0x14b)]()[_0x678b7a(0xfa)](0x2,'0')+'\x20'+_0x16c113[_0x678b7a(0x281)]()[_0x678b7a(0x14b)]()[_0x678b7a(0xfa)](0x2,'0')+':'+_0x16c113[_0x678b7a(0x1b1)]()['toString']()[_0x678b7a(0xfa)](0x2,'0')+':'+_0x16c113[_0x678b7a(0x183)]()[_0x678b7a(0x14b)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x4c0d29=_0x58eec8,_0x128119=shiftedTime();return _0x128119['getFullYear']()+'/'+(_0x128119[_0x4c0d29(0x14a)]()+0x1)[_0x4c0d29(0x14b)]()[_0x4c0d29(0xfa)](0x2,'0')+'/'+_0x128119[_0x4c0d29(0x219)]()[_0x4c0d29(0x14b)]()[_0x4c0d29(0xfa)](0x2,'0')+'\x20'+_0x128119[_0x4c0d29(0x281)]()[_0x4c0d29(0x14b)]()[_0x4c0d29(0xfa)](0x2,'0')+':'+_0x128119['getMinutes']()[_0x4c0d29(0x14b)]()['padStart'](0x2,'0')+':'+_0x128119[_0x4c0d29(0x183)]()[_0x4c0d29(0x14b)]()[_0x4c0d29(0xfa)](0x2,'0');}function getDate(){const _0x14bb3f=_0x58eec8,_0x3f8a7a=shiftedTime();return _0x3f8a7a['getFullYear']()+'/'+(_0x3f8a7a[_0x14bb3f(0x14a)]()+0x1)[_0x14bb3f(0x14b)]()['padStart'](0x2,'0')+'/'+_0x3f8a7a[_0x14bb3f(0x219)]()[_0x14bb3f(0x14b)]()[_0x14bb3f(0xfa)](0x2,'0');}function getHour(){const _0x5a2c34=_0x58eec8,_0x3cdacb=shiftedTime();return _0x3cdacb[_0x5a2c34(0x281)]()[_0x5a2c34(0x14b)]()['padStart'](0x2,'0');}function sleep(_0xcc4445){return new Promise(_0x3fef2b=>setTimeout(_0x3fef2b,_0xcc4445));}function shiftedTime(){const _0x58d59e=_0x58eec8,_0x107f0e=new Date();let _0x443584=_0x107f0e;if(config&&config[_0x58d59e(0xcd)]!==0x0)_0x443584=fns['add'](_0x107f0e,{'hours':config[_0x58d59e(0xcd)]});return _0x443584;}function timer(_0x3c7700){const _0x7cfedc=_0x58eec8,_0x133bbd=new Date();!lasttime?console[_0x7cfedc(0xc6)](getTimeStamp()+_0x7cfedc(0xd0),_0x3c7700,_0x133bbd):console['log'](getTimeStamp()+':\x20timer\x20>',_0x3c7700,(_0x133bbd-lasttime)/0x3e8),lasttime=_0x133bbd;}