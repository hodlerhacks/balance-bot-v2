const _0x44a322=_0x49c2;(function(_0x407371,_0x59368c){const _0x5a8598=_0x49c2,_0x3872f5=_0x407371();while(!![]){try{const _0x3b49d4=parseInt(_0x5a8598(0x10b))/0x1*(-parseInt(_0x5a8598(0x1c8))/0x2)+parseInt(_0x5a8598(0xcf))/0x3*(parseInt(_0x5a8598(0x1e9))/0x4)+-parseInt(_0x5a8598(0xbd))/0x5*(parseInt(_0x5a8598(0x1f5))/0x6)+-parseInt(_0x5a8598(0x173))/0x7+parseInt(_0x5a8598(0x101))/0x8+parseInt(_0x5a8598(0xb3))/0x9+parseInt(_0x5a8598(0x23e))/0xa;if(_0x3b49d4===_0x59368c)break;else _0x3872f5['push'](_0x3872f5['shift']());}catch(_0x10504a){_0x3872f5['push'](_0x3872f5['shift']());}}}(_0x9856,0x5ccce));const _0x4557b2=function(){let _0x3a9e79=!![];return function(_0x1c8be5,_0x4ababe){const _0x302aa8=_0x3a9e79?function(){if(_0x4ababe){const _0x15bc9e=_0x4ababe['apply'](_0x1c8be5,arguments);return _0x4ababe=null,_0x15bc9e;}}:function(){};return _0x3a9e79=![],_0x302aa8;};}(),_0x391c1c=_0x4557b2(this,function(){const _0x52f90b=_0x49c2;return _0x391c1c['toString']()[_0x52f90b(0x215)](_0x52f90b(0xb7))[_0x52f90b(0x144)]()['constructor'](_0x391c1c)['search'](_0x52f90b(0xb7));});_0x391c1c();'use strict';const ccxt=require('ccxt'),low=require(_0x44a322(0x1b6)),FileSync=require(_0x44a322(0xbf)),fs=require('fs'),fns=require(_0x44a322(0x192)),forge=require(_0x44a322(0x13e)),util=require(_0x44a322(0x181)),argv=require(_0x44a322(0xfa))(process[_0x44a322(0x1f0)][_0x44a322(0x1ed)](0x2))[_0x44a322(0x1f0)],path=require(_0x44a322(0x13c)),axios=require(_0x44a322(0x115));let exchange,gTicker={},gChange={};const usdBasecoins=[_0x44a322(0x22e),_0x44a322(0x237),'TUSD',_0x44a322(0x1e6),_0x44a322(0x139),_0x44a322(0x24e)],excludedExchanges=[_0x44a322(0x222)],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x44a322(0x174)]({'LOCKED':0x0,'UNLOCKING':0x1,'UNLOCKED':0x2});let lockOrders=ORDERS['UNLOCKED'],validateOrdersState,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotIntervalShort=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0x44a322(0x166)+pauseBotInterval/0xea60+_0x44a322(0x129),maxPauseRetries=0x6,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,watchTransactionsInterval=0x3c*0x3e8,schedulerInterval=0x3c*0x3c*0x3e8,retryInterval=0x3e8,maxRetries=0x5,logPageSize=0x14,defaultFee=0.003;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidOrdersInitialTimeout,pidOrdersTimeout,botPaused=![],transactionDetectionOngoing=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x5dc,balanceUpdateRetries=0x5;let enableFiatToggle;const serverversion=require(_0x44a322(0x1a1))[_0x44a322(0xe3)],environment=require(_0x44a322(0x1a1))[_0x44a322(0x15a)]||_0x44a322(0x1ee),botID=process['argv'][0x2]||_0x44a322(0x1e4),pattern=/^[0-9]{3}$/;!pattern['test'](botID)&&(console['log'](_0x44a322(0x155)+botID+_0x44a322(0x175)),killBot());const userID=process[_0x44a322(0x1f0)][0x3]||'',configpath=userID?_0x44a322(0x221)+userID+'/':_0x44a322(0x221),logspath=userID?_0x44a322(0x100)+userID+'/':_0x44a322(0x100),loggerfile=fs['createWriteStream'](logspath+_0x44a322(0xfc),{'flags':'a'});!fs[_0x44a322(0x213)](configpath)&&fs[_0x44a322(0x1ae)](configpath);!fs['existsSync'](logspath)&&fs[_0x44a322(0x1ae)](logspath);const configfile=configpath+_0x44a322(0x22c)+botID+_0x44a322(0x1fe),logfile=configpath+_0x44a322(0x22c)+botID+_0x44a322(0x236),performancefile=configpath+_0x44a322(0x22c)+botID+_0x44a322(0x193),coinresultsfile=configpath+_0x44a322(0x22c)+botID+_0x44a322(0x1dc),settingsfile=configpath+_0x44a322(0x232),securefile=configpath+'bb-secure.json',configbackuppath=configpath+_0x44a322(0x10d),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x44a322(0x200)]({'logs':[],'version':serverversion})[_0x44a322(0x247)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x44a322(0x200)]({'data':[],'version':serverversion})[_0x44a322(0x247)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x44a322(0x200)]({'bot':[],'version':serverversion})['write']();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults['defaults']({'coins':[],'version':serverversion})[_0x44a322(0x247)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0,settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x52580c=>{const _0x56aec6=_0x44a322;console[_0x56aec6(0x1e8)](_0x52580c);},'simple':_0x1e6592=>{const _0x4aa27b=_0x44a322;console[_0x4aa27b(0x1e8)](_0x1e6592),loggerfile['write'](util['format'](_0x1e6592)+'\x0a');},'full':async(_0x33460e,_0x546478='')=>{const _0x4fe2f3=_0x44a322;let _0x1233a7;if(config[_0x4fe2f3(0x121)])_0x1233a7=getTimeStamp()+':\x20'+config[_0x4fe2f3(0x13d)]+'\x20>\x20'+_0x33460e;else _0x1233a7=getTimeStamp()+_0x4fe2f3(0x109)+botID+_0x4fe2f3(0xcc)+_0x33460e;console['log'](_0x1233a7),loggerfile[_0x4fe2f3(0x247)](util[_0x4fe2f3(0x202)](_0x1233a7)+'\x0a'),_0x546478&&(console['log'](_0x546478),loggerfile[_0x4fe2f3(0x247)](util[_0x4fe2f3(0x202)](_0x546478)+'\x0a'));},'debug':async(_0x1b4f6b,_0x5a4e5f='')=>{const _0x1caed4=_0x44a322;let _0x2157d9;if(config[_0x1caed4(0x121)])_0x2157d9=getTimeStamp()+':\x20'+config[_0x1caed4(0x13d)]+_0x1caed4(0x23d)+_0x1b4f6b;else _0x2157d9=getTimeStamp()+_0x1caed4(0x109)+botID+_0x1caed4(0x23d)+_0x1b4f6b;if(debugging)console[_0x1caed4(0x1e8)](_0x2157d9);loggerfile[_0x1caed4(0x247)](util['format'](_0x2157d9)+'\x0a');if(_0x5a4e5f){if(debugging)console['log'](_0x5a4e5f);loggerfile[_0x1caed4(0x247)](util[_0x1caed4(0x202)](_0x5a4e5f)+'\x0a');}}};process['on']('uncaughtException',function(_0x268867){const _0x1ed2e0=_0x44a322;handleError(_0x268867,_0x1ed2e0(0x17a));});settings[_0x44a322(0x19a)]!=config[_0x44a322(0x19a)]&&updateTimeshift(settings['timeshift']);settings[_0x44a322(0xf3)]!=config[_0x44a322(0xf3)]&&updateOnepagemode(settings[_0x44a322(0xf3)]);(settings[_0x44a322(0x26e)]&&!config[_0x44a322(0x26e)]||!settings[_0x44a322(0x26e)]&&config[_0x44a322(0x26e)])&&updateMarketcapApi(settings[_0x44a322(0x26e)]);process[_0x44a322(0x20c)]({'started':'running'},_0x23738d=>{}),initializeProcessListeners();function proxyEmit(_0x5bcb41,_0x3a11bc=null){process['send']({'function':_0x5bcb41,'args':_0x3a11bc},_0x4eb38a=>{});}function initializeProcessListeners(){const _0x53af64=_0x44a322;process['on'](_0x53af64(0x157),_0x6655b4=>{const _0x37b47=_0x53af64;switch(Object[_0x37b47(0xf2)](_0x6655b4)[0x0]){case _0x37b47(0x19a):_0x6655b4[_0x37b47(0x19a)]!=undefined&&(settings[_0x37b47(0x19a)]=_0x6655b4[_0x37b47(0x19a)],updateTimeshift(settings[_0x37b47(0x19a)]));break;case _0x37b47(0xf3):_0x6655b4['onepagemode']!=undefined&&(settings['onepagemode']=_0x6655b4[_0x37b47(0xf3)],updateOnepagemode(settings[_0x37b47(0xf3)]));break;case _0x37b47(0x26e):_0x6655b4['marketcapApi']!=undefined&&(settings['marketcapApi']=_0x6655b4['marketcapApi'],updateMarketcapApi(settings[_0x37b47(0x26e)]));break;case _0x37b47(0x253):_0x6655b4['bots']!=undefined&&(bots=JSON[_0x37b47(0x11b)](_0x6655b4[_0x37b47(0x253)]),proxyEmit(_0x37b47(0x253),bots));break;case _0x37b47(0x111):switch(_0x6655b4['function']){case _0x37b47(0x246):initclient();break;case _0x37b47(0x141):toggleBotMode();break;case _0x37b47(0x126):emitHistory(_0x6655b4[_0x37b47(0x22a)]);break;case _0x37b47(0x1eb):deleteHistoryAlerts(_0x6655b4['args']);break;case _0x37b47(0x1e7):getPortfolio(_0x6655b4['args']);break;case'storeConfiguration':storeConfiguration(_0x6655b4[_0x37b47(0x22a)]);break;case _0x37b47(0x217):storeHeadless(_0x6655b4['args']);break;case _0x37b47(0xe6):storeFiat(_0x6655b4['args']);break;case _0x37b47(0x114):resetHistory();break;case'getStartingBalances':getStartingBalances(getNormalizedPerformance());break;case _0x37b47(0x1f7):placeOrder(_0x6655b4[_0x37b47(0x22a)]);break;case _0x37b47(0xb8):cancelLoading();break;case _0x37b47(0x197):showConfig();break;case'sendMetricsTelegram':sendMetricsTelegram();break;case _0x37b47(0x179):sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x211f4e=![]){const _0x3c57a6=_0x44a322;logger[_0x3c57a6(0x199)]('Reset\x20|\x20'+(_0x211f4e?_0x3c57a6(0x1bf):'no\x20exchange\x20reloaded')+_0x3c57a6(0x165)+config['exchange']);if(pidBalances)clearTimeout(pidBalances);if(!_0x211f4e)lastCoinsToBalance='';coinsLoaded=![];if(config['apiKey']!=''&&config[_0x3c57a6(0x20e)]!='***'){loadingProgress=0x0;_0x211f4e&&(await initExchange(),await loadSymbols(),loadingProgress=0x1,setStableCoins(),proxyEmit(_0x3c57a6(0x255),emittedConfiguration()),initialPerformanceStored=![]);const _0x39dfcb=await getCoins();[currentCoins,currentCoinsAll]=_0x39dfcb,setBlockTransactionDetection(![]),startScheduler(),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x3c57a6(0x199)](_0x3c57a6(0xdd)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x3c57a6(0x1de)]==0x0&&allOpenOrders['length']!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function resumeBot(_0x528ae1=![]){const _0x2cc73d=_0x44a322;logger[_0x2cc73d(0x199)](_0x2cc73d(0xb9)+(_0x528ae1?_0x2cc73d(0x10e):_0x2cc73d(0x216))+_0x2cc73d(0x171)+config['exchange']);if(pidBalances)clearTimeout(pidBalances);if(_0x528ae1){getBalances();return;}coinsLoaded=![];if(config[_0x2cc73d(0x20e)]!=''&&config['apiKey']!=_0x2cc73d(0x1e2)){loadingProgress=0x1;const _0x27eb86=await getCoins();[currentCoins,currentCoinsAll]=_0x27eb86,setBlockTransactionDetection(![]),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x2cc73d(0x199)]('Loading\x20completed'),getBalances(![]),await updateOpenOrders();if(lastOrders['length']==0x0&&allOpenOrders[_0x2cc73d(0x1de)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();}}async function getMarketCap(_0x3d63e8){const _0x587b03=_0x44a322;let _0x360ad9=![];if(_0x3d63e8)_0x360ad9=!![];let _0x92916f;_0x360ad9?_0x92916f=_0x3d63e8[_0x587b03(0x22d)](_0x4ddf50=>_0x4ddf50[_0x587b03(0x1ec)]):_0x92916f=currentCoinsAll[_0x587b03(0x22d)](_0x472273=>_0x472273[_0x587b03(0x1ec)]);if(!config['marketcapApi']||!_0x360ad9&&!config[_0x587b03(0x254)]||_0x92916f[_0x587b03(0x1de)]==0x0)return;let _0x3def05=null;try{_0x3def05=await axios[_0x587b03(0x1dd)](_0x587b03(0xeb),{'headers':{'X-CMC_PRO_API_KEY':settings[_0x587b03(0x26e)]},'params':{'symbol':_0x92916f[_0x587b03(0x144)]()}});}catch(_0x34a4f4){_0x3def05=null,_0x34a4f4[_0x587b03(0x144)]()[_0x587b03(0x1df)](_0x587b03(0x188))?(config['marketcapApi']=![],updateConfig(),proxyEmit(_0x587b03(0x255),emittedConfiguration()),logHistory(_0x587b03(0x205),_0x587b03(0x234))):(logHistory(_0x587b03(0x205),_0x587b03(0x102)+schedulerInterval/(0x3c*0x3e8)+'\x20minutes'),logger[_0x587b03(0x199)](_0x587b03(0x1b4),_0x34a4f4[_0x587b03(0x144)]()+_0x587b03(0x127)+_0x34a4f4['code']));}if(_0x3def05){let _0x4e43ef=0x0;const _0xf748d6=_0x3def05['data'];_0x92916f['forEach'](_0x371148=>{const _0x563bb5=_0x587b03;if(_0xf748d6[_0x563bb5(0x239)][_0x371148][0x0])_0x4e43ef+=_0xf748d6[_0x563bb5(0x239)][_0x371148][0x0][_0x563bb5(0x1e1)][_0x563bb5(0x22e)][_0x563bb5(0x219)];}),_0x92916f[_0x587b03(0x1aa)](_0x3cbac7=>{const _0x25831f=_0x587b03,_0x3fed68=_0xf748d6[_0x25831f(0x239)][_0x3cbac7][0x0]?_0xf748d6['data'][_0x3cbac7][0x0][_0x25831f(0x1e1)]['USD'][_0x25831f(0x219)]:0x0;if(_0x360ad9){const _0x467c0c=_0x3d63e8['find'](_0x382a45=>_0x382a45['coin']==_0x3cbac7);_0x467c0c&&(_0x467c0c[_0x25831f(0x12a)]=_0x3fed68);}else{const _0xf93710=currentCoins[_0x25831f(0x112)](_0x3cc49a=>_0x3cc49a[_0x25831f(0x1ec)]==_0x3cbac7);_0xf93710&&(_0xf93710[_0x25831f(0x12a)]=_0x3fed68);const _0x354065=currentCoinsAll['find'](_0x581931=>_0x581931[_0x25831f(0x1ec)]==_0x3cbac7);_0x354065&&(_0x354065[_0x25831f(0x12a)]=_0x3fed68);}}),!_0x360ad9&&updateTargetDistribution();}}function updateTargetDistribution(){const _0x1b4f98=_0x44a322,_0x34f374=0x2;let _0x191484=0x0,_0x4c157e=0x0,_0x247b31=0x0,_0x1a118e=0x0,_0x25db8a=0x0;config[_0x1b4f98(0xfe)]['forEach'](_0x544c6c=>{const _0x35aaec=_0x1b4f98;if(!_0x544c6c[_0x35aaec(0xbb)]){_0x247b31++,_0x191484+=_0x544c6c[_0x35aaec(0x26d)];if(_0x544c6c[_0x35aaec(0x26d)]===-0x1){_0x191484++;const _0x418e2f=currentCoinsAll[_0x35aaec(0x112)](_0xe4c6dc=>_0xe4c6dc[_0x35aaec(0x1ec)]==_0x544c6c[_0x35aaec(0x1ec)]);_0x418e2f&&(_0x1a118e+=_0x418e2f[_0x35aaec(0x12a)],_0x25db8a+=Math['sqrt'](_0x418e2f['marketcap']));}if(_0x544c6c['slider']!==-0x1)_0x4c157e++;}});let _0x4c5e26;const _0x527f45=0x64-_0x191484,_0x5a4490=_0x247b31-_0x4c157e;_0x4c5e26=_0x5a4490===0x0?_0x191484:Math[_0x1b4f98(0xd3)](0x64,_0x191484),config[_0x1b4f98(0xfe)][_0x1b4f98(0x1aa)](_0x397ed7=>{const _0x5c8792=_0x1b4f98,_0x1ee89f=currentCoinsAll[_0x5c8792(0x112)](_0x5e6feb=>_0x5e6feb['coin']==_0x397ed7[_0x5c8792(0x1ec)]);_0x1ee89f&&(_0x397ed7[_0x5c8792(0x12a)]=_0x1ee89f[_0x5c8792(0x12a)]);if(!_0x397ed7[_0x5c8792(0xbb)]){if(_0x4c5e26<=0x64){if(_0x397ed7[_0x5c8792(0x26d)]===-0x1){if(_0x1a118e!==0x0&&config['marketcapEnabled']){if(_0x1ee89f){if(config[_0x5c8792(0x254)]==_0x5c8792(0x12a))_0x397ed7[_0x5c8792(0x16c)]=(_0x527f45/(_0x1a118e/_0x1ee89f[_0x5c8792(0x12a)]))['toFixed'](_0x34f374);else config[_0x5c8792(0x254)]==_0x5c8792(0x210)&&(_0x397ed7[_0x5c8792(0x16c)]=(_0x527f45/(_0x25db8a/Math['sqrt'](_0x1ee89f[_0x5c8792(0x12a)])))[_0x5c8792(0x1a2)](_0x34f374));}}}}}}),updateConfig();}function updateConfig(){const _0x605c74=_0x44a322;let _0x77ec23=dbConfig[_0x605c74(0x1dd)](_0x605c74(0x1b2))[_0x605c74(0x112)]({'botID':botID})[_0x605c74(0x23f)]();_0x77ec23&&dbConfig[_0x605c74(0x1dd)](_0x605c74(0x1b2))[_0x605c74(0x112)]({'botID':botID})[_0x605c74(0x1ea)](config)['write']();}function logMemory(){const _0x5275df=_0x44a322;if(environment!=_0x5275df(0x266))return;const _0x14108f=process['memoryUsage']()['heapUsed']/0x400/0x400;logger[_0x5275df(0x199)](_0x5275df(0x163)+process[_0x5275df(0x11e)]+'\x20uses\x20'+formatResult(_0x14108f,0x1)+_0x5275df(0x18a));}async function startScheduler(){const _0x2e5541=_0x44a322,_0x180e0a=shiftedTime()[_0x2e5541(0x1fa)]();getMarketCap(),loadSymbols(),_0x180e0a==0x1&&logMemory(),await sleep(schedulerInterval),startScheduler();}async function restartBot(_0x583af7=![]){const _0xebe21c=_0x44a322;logger[_0xebe21c(0x199)](_0xebe21c(0x11a));if(!_0x583af7)while(lockOrders!=ORDERS['UNLOCKED']||coolingDown){await sleep(0x3e8);}process[_0xebe21c(0x20c)]({'stop':_0xebe21c(0x16e)},_0x34f7c2=>{});}async function initExchange(_0x868fb6=config[_0x44a322(0xe2)],_0x3d5688=config['apiKey'],_0x336ba6=config['apiSecret'],_0x6dca8e=config[_0x44a322(0x1c2)]){const _0x733aed=_0x44a322;if(exchange){logger['debug'](_0x733aed(0x198));return;}logger[_0x733aed(0x199)](_0x733aed(0x131));!supportedExchanges()[_0x733aed(0x1df)](_0x868fb6)&&(logHistory(_0x733aed(0x205),_0x733aed(0x15f)+_0x868fb6+_0x733aed(0x10a)),killBot());const _0x2711a9=ccxt[_0x733aed(0x17f)][_0x868fb6[_0x733aed(0xd2)]()];exchange=new _0x2711a9({'apiKey':_0x3d5688,'secret':_0x336ba6,'options':{'defaultType':_0x733aed(0x12c)}});if(_0x6dca8e)exchange['password']=_0x6dca8e;}function updateExchange(_0x157f0b,_0x4abfbe,_0x2e565b=null){const _0x5a357b=_0x44a322;exchange[_0x5a357b(0x20e)]=_0x157f0b,exchange[_0x5a357b(0x252)]=_0x4abfbe,exchange[_0x5a357b(0x1c2)]=_0x2e565b,logger[_0x5a357b(0x199)](_0x5a357b(0x117));}function setStableCoins(){const _0x45d0ee=_0x44a322;let _0x4793d2=config[_0x45d0ee(0x17e)]=='ETH'?_0x45d0ee(0x19e):config['basecoin']==_0x45d0ee(0x154)?_0x45d0ee(0x154):_0x45d0ee(0x204),_0x148809=allSymbols[_0x45d0ee(0x1df)](_0x4793d2+'/USD')?_0x45d0ee(0x22e):allSymbols['includes'](_0x4793d2+'/USDT')?_0x45d0ee(0x1e6):'EUR',_0x87c645=allSymbols[_0x45d0ee(0x1df)](_0x4793d2+'/EUR')?'EUR':_0x148809;enableFiatToggle=!![],_0x148809==_0x45d0ee(0x14b)&&(enableFiatToggle=![],storeFiat(_0x45d0ee(0x14b))),_0x87c645!='EUR'&&(enableFiatToggle=![],storeFiat(_0x45d0ee(0x22e))),stablecoins={'eur':{'coin':''+_0x4793d2+_0x87c645,'symbol':_0x4793d2+'/'+_0x87c645},'usd':{'coin':''+_0x4793d2+_0x148809,'symbol':_0x4793d2+'/'+_0x148809}};}async function initwsCcxt(){const _0x2c97c0=_0x44a322;initCycle++;const _0x2da25f=initCycle;let _0x3a4594=[];config[_0x2c97c0(0xfe)][_0x2c97c0(0x1aa)](_0x270847=>{const _0x416ed0=_0x2c97c0;if(!_0x270847[_0x416ed0(0xbb)]&&_0x270847[_0x416ed0(0x1ec)]!=config[_0x416ed0(0x17e)])_0x3a4594[_0x416ed0(0x25e)](_0x270847[_0x416ed0(0x228)]);});if(!_0x3a4594[_0x2c97c0(0x1df)](stablecoins['eur']['symbol']))_0x3a4594[_0x2c97c0(0x25e)](stablecoins['eur'][_0x2c97c0(0x228)]);if(!_0x3a4594[_0x2c97c0(0x1df)](stablecoins[_0x2c97c0(0x149)]['symbol']))_0x3a4594[_0x2c97c0(0x25e)](stablecoins[_0x2c97c0(0x149)][_0x2c97c0(0x228)]);if(config[_0x2c97c0(0xe2)]['startsWith'](_0x2c97c0(0x124))&&config[_0x2c97c0(0x17e)]!=_0x2c97c0(0x154)){if(!_0x3a4594[_0x2c97c0(0x1df)](_0x2c97c0(0x118)+config['basecoin']))_0x3a4594[_0x2c97c0(0x25e)](_0x2c97c0(0x118)+config[_0x2c97c0(0x17e)]);}loadCoins(_0x3a4594),_0x3a4594=validateSymbols(_0x3a4594);const _0x1a2ac4=async _0x28bae9=>{const _0x1626bc=_0x2c97c0;let _0x293dce;try{const _0xe3557d=await getTickers(_0x28bae9);Object[_0x1626bc(0x24c)](_0xe3557d)['forEach'](_0x560085=>{const _0x1d2c41=_0x1626bc;_0x293dce=_0x560085[0x1][_0x1d2c41(0x228)],gTicker[noslash(_0x293dce)]=_0x560085[0x1][_0x1d2c41(0x120)],gChange[_0x293dce]=_0x560085[0x1][_0x1d2c41(0x13b)];});}catch(_0x596c49){await handleError(_0x596c49,'initTickers()',_0x293dce);}},_0x2e9e67=async _0x4e6f48=>{const _0xdabe19=_0x2c97c0;while(initCycle==_0x2da25f){if(!botPaused)try{const _0x46fd7d=await exchange[_0xdabe19(0x1ad)](_0x4e6f48);gTicker[noslash(_0x46fd7d[0x0][_0xdabe19(0x228)])]=_0x46fd7d[0x0][_0xdabe19(0x113)];}catch(_0x48cbc0){if(!exchangeStopped)await handleError(_0x48cbc0,_0xdabe19(0x1bb),_0x4e6f48);}else await sleep(0x64);}},_0x59b486=async _0x145fb5=>{const _0x5ef7e9=_0x2c97c0;while(initCycle==_0x2da25f){if(!botPaused)try{const _0x745836=await exchange[_0x5ef7e9(0x191)](_0x145fb5),_0x26861d=_0x745836[_0x5ef7e9(0xd6)]();gTicker[noslash(_0x26861d['symbol'])]=_0x26861d[_0x5ef7e9(0x113)];}catch(_0x4ee6e0){if(!exchangeStopped)await handleError(_0x4ee6e0,'watchTradesForSymbols()',_0x145fb5[_0x5ef7e9(0x144)]());}else await sleep(0x64);}},_0x240ea9=async _0x24c216=>{const _0x3b52ce=_0x2c97c0;while(initCycle==_0x2da25f){if(!botPaused){let _0x153903;try{await sleep(0x3c*0x3e8);const _0x3c24aa=await getTickers(_0x24c216);Object[_0x3b52ce(0x24c)](_0x3c24aa)['forEach'](_0x1214ef=>{const _0xc6afb7=_0x3b52ce;_0x153903=_0x1214ef[0x1][_0xc6afb7(0x228)],gChange[_0x153903]=_0x1214ef[0x1][_0xc6afb7(0x13b)];});}catch(_0x42b22f){if(!exchangeStopped)await handleError(_0x42b22f,_0x3b52ce(0x258),_0x153903);}}else await sleep(0x64);}},_0x3bb6ef=async _0x56ff98=>{const _0x207eab=_0x2c97c0;while(initCycle==_0x2da25f){if(!botPaused)try{const _0x733973=await exchange[_0x207eab(0xf8)](_0x56ff98);initCycle==_0x2da25f&&_0x733973['forEach'](_0x208bdc=>{updateNumberCoinsCcxt(_0x208bdc);});}catch(_0x2e6ce2){if(!exchangeStopped)await handleError(_0x2e6ce2,_0x207eab(0x1b9));}else await sleep(0x64);}};_0x1a2ac4(_0x3a4594),_0x240ea9(_0x3a4594),exchange[_0x2c97c0(0x128)][_0x2c97c0(0x191)]&&!(config[_0x2c97c0(0xe2)]==_0x2c97c0(0x264)&&_0x3a4594[_0x2c97c0(0x1de)]>0xa)?_0x59b486(_0x3a4594):_0x3a4594['forEach'](_0x5ed63d=>{_0x2e9e67(_0x5ed63d);}),_0x3a4594[_0x2c97c0(0x1aa)](_0x1ffe82=>{_0x3bb6ef(_0x1ffe82);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x593269){const _0x304fac=_0x44a322;let _0x26b2a4={};try{if(config[_0x304fac(0xe2)]!=_0x304fac(0x14d))_0x26b2a4=await exchange['fetchTickers'](_0x593269);else for(const _0x155297 of _0x593269){const _0x4295de=await exchange[_0x304fac(0xd1)](_0x155297);_0x26b2a4[_0x155297]=_0x4295de;}return _0x26b2a4;}catch(_0x2b9c3d){throw _0x2b9c3d;}}function setBlockTransactionDetection(_0x4dc4ba){const _0x36878a=_0x44a322;blockTransactionDetection=_0x4dc4ba,logger[_0x36878a(0x199)](_0x36878a(0xe7)+blockTransactionDetection);}async function detectLiquidityChange(_0x492134=0x0){const _0x5015f7=_0x44a322;transactionDetectionOngoing=!![];try{const _0x5c3368=await getCoins(_0x492134),[_0x5b7e4a,_0xb1152b]=_0x5c3368;let _0x273a55=[];currentCoins[_0x5015f7(0x1aa)](_0x27831f=>{const _0x5969f0=_0x5015f7,_0x127bdb=_0x5b7e4a['find'](_0x18496a=>_0x18496a[_0x5969f0(0x1ec)]==_0x27831f[_0x5969f0(0x1ec)]);if(_0x127bdb){if(_0x27831f[_0x5969f0(0xfb)]!=_0x127bdb[_0x5969f0(0xfb)]){let _0x1276fd;if(_0x27831f[_0x5969f0(0x1ec)]!=config[_0x5969f0(0x17e)]){const _0x2f2f3d=gTicker[noslash(_0x27831f[_0x5969f0(0x228)])];_0x1276fd=_0x27831f[_0x5969f0(0x11c)]?0x1/_0x2f2f3d:_0x2f2f3d;}else _0x1276fd=0x1;_0x273a55[_0x5969f0(0x25e)]({'coin':_0x27831f[_0x5969f0(0x1ec)],'symbol':_0x27831f[_0x5969f0(0x228)],'price':_0x1276fd,'number':Number(formatResult(_0x127bdb['number']-_0x27831f[_0x5969f0(0xfb)],0x8)),'basecoinvalue':_0x1276fd*(_0x127bdb[_0x5969f0(0xfb)]-_0x27831f[_0x5969f0(0xfb)])});}}});if(_0x273a55[_0x5015f7(0x1de)]>0x0&&!blockTransactionDetection){for(const _0x314c16 of _0x273a55){if(config[_0x5015f7(0x147)]){logger[_0x5015f7(0x199)]('Liquidity\x20change\x20|\x20basecoin\x20value:\x20'+_0x314c16[_0x5015f7(0x22f)]+_0x5015f7(0x1a7)+lastFees['highest']);if(lastFees[_0x5015f7(0xe5)]==0x0||Math['abs'](_0x314c16[_0x5015f7(0x22f)])>lastFees[_0x5015f7(0xe5)]*0x3){if(config[_0x5015f7(0x147)]==_0x5015f7(0x1a4)){delete _0x314c16['symbol'],delete _0x314c16[_0x5015f7(0x22f)];let _0x5ac223=[],_0x891790=[...config['liquidity']]||[],_0xd2ed8=config[_0x5015f7(0x248)];_0x891790[_0x5015f7(0x260)]((_0x54029e,_0x56953a)=>_0x54029e[_0x5015f7(0x132)]>_0x56953a[_0x5015f7(0x132)]?-0x1:_0x56953a[_0x5015f7(0x132)]>_0x54029e[_0x5015f7(0x132)]?0x1:0x0);const _0x456b10=getDate();if(_0x891790[0x0]){const _0x41b27c=fns[_0x5015f7(0x11b)](_0x891790[0x0][_0x5015f7(0x132)],_0x5015f7(0x178),new Date()),_0x45824f=fns[_0x5015f7(0x11b)](_0x456b10,_0x5015f7(0x178),new Date());if(fns[_0x5015f7(0xd5)](_0x41b27c,_0x45824f)){_0x5ac223=_0x891790[0x0]['changes'];const _0x35e8eb=_0x5ac223[_0x5015f7(0x112)](_0xdb8ebd=>_0xdb8ebd[_0x5015f7(0x1ec)]==_0x314c16['coin']);_0x35e8eb?(_0x35e8eb['number']+=_0x314c16[_0x5015f7(0xfb)],_0x35e8eb[_0x5015f7(0xfb)]==0x0&&(_0x5ac223=_0x5ac223[_0x5015f7(0x1be)](_0x272762=>{const _0x4d2daf=_0x5015f7;return _0x272762[_0x4d2daf(0x1ec)]!=_0x314c16[_0x4d2daf(0x1ec)];}))):_0x5ac223[_0x5015f7(0x25e)](_0x314c16);const _0x195ba2=_0xd2ed8[_0x5015f7(0x112)](_0x16c137=>_0x16c137[_0x5015f7(0x132)]==_0x456b10);_0x195ba2[_0x5015f7(0x26b)]=_0x5ac223;}else _0xd2ed8[_0x5015f7(0x25e)]({'date':_0x456b10,'changes':[_0x314c16]});}const _0xc3a31a=_0xd2ed8[_0x5015f7(0x112)](_0x4f8b20=>_0x4f8b20[_0x5015f7(0x132)]==_0x456b10);if(_0xc3a31a){let _0xc20913=!![];_0xc3a31a[_0x5015f7(0x26b)]['forEach'](_0x35b717=>{const _0x1428d4=_0x5015f7;if(_0x35b717[_0x1428d4(0xfb)]!=0x0)_0xc20913=![];}),_0xc20913&&(_0xd2ed8=_0xd2ed8[_0x5015f7(0x1be)](_0x5ac133=>{const _0x4bfb60=_0x5015f7;return _0x5ac133[_0x4bfb60(0x132)]!=_0x456b10;}));}let _0x1c8381=dbConfig[_0x5015f7(0x1dd)](_0x5015f7(0x1b2))[_0x5015f7(0x112)]({'botID':botID})[_0x5015f7(0x23f)]();_0x1c8381&&(dbConfig['get'](_0x5015f7(0x1b2))[_0x5015f7(0x112)]({'botID':botID})['assign']({'liquidity':_0xd2ed8})[_0x5015f7(0x247)](),config['liquidity']=_0xd2ed8);logHistory('success',_0x5015f7(0x172)+Math[_0x5015f7(0x158)](_0x314c16[_0x5015f7(0xfb)])+'\x20'+_0x314c16[_0x5015f7(0x1ec)]+'\x20'+(_0x314c16['number']>0x0?_0x5015f7(0x249):_0x5015f7(0x105))+_0x5015f7(0x116)),proxyEmit(_0x5015f7(0x255),emittedConfiguration());const _0x45c73c=getNormalizedPerformance();emitPerformance(_0x45c73c),getStartingBalances(_0x45c73c),logger[_0x5015f7(0x199)](_0x5015f7(0x1b1));}else config[_0x5015f7(0x147)]==_0x5015f7(0x189)&&(config['headless']?(await storeHeadless({'headless':![]}),logHistory(_0x5015f7(0x1d4),_0x5015f7(0x172)+Math[_0x5015f7(0x158)](_0x314c16[_0x5015f7(0xfb)])+'\x20'+_0x314c16[_0x5015f7(0x1ec)]+'\x20'+(_0x314c16[_0x5015f7(0xfb)]>0x0?_0x5015f7(0x249):_0x5015f7(0x105))+'\x20-\x20bot\x20switched\x20to\x20manual\x20mode')):logger[_0x5015f7(0x199)](_0x5015f7(0x172)+Math[_0x5015f7(0x158)](_0x314c16[_0x5015f7(0xfb)])+'\x20'+_0x314c16['coin']+'\x20'+(_0x314c16[_0x5015f7(0xfb)]>0x0?_0x5015f7(0x249):_0x5015f7(0x105))+_0x5015f7(0x19f)));}else logger[_0x5015f7(0x199)]('Fee\x20discount\x20refund\x20detected:\x20'+Math[_0x5015f7(0x158)](_0x314c16[_0x5015f7(0xfb)])+'\x20'+_0x314c16[_0x5015f7(0x1ec)]+'\x20'+(_0x314c16['number']>0x0?_0x5015f7(0x249):_0x5015f7(0x105)));}else logger[_0x5015f7(0x199)](_0x5015f7(0x172)+Math[_0x5015f7(0x158)](_0x314c16[_0x5015f7(0xfb)])+'\x20'+_0x314c16[_0x5015f7(0x1ec)]+'\x20'+(_0x314c16[_0x5015f7(0xfb)]>0x0?_0x5015f7(0x249):_0x5015f7(0x105))+'\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled');}currentCoins=_0x5b7e4a,currentCoinsAll=_0xb1152b;}}catch(_0x540c3e){if(!exchangeStopped)await handleError(_0x540c3e,'detectLiquidityChange()');}transactionDetectionOngoing=![];}async function watchTransactions(){await sleep(0x14*0x3e8);while(!![]){!botPaused&&!blockTransactionDetection&&coinsLoaded?(detectLiquidityChange(),await sleep(watchTransactionsInterval)):await sleep(0x3e8);}}async function loadSymbols(){const _0x177405=_0x44a322;try{markets=await exchange['loadMarkets'](!![]),allSymbols=[],Object[_0x177405(0x24c)](markets)['forEach'](_0x555b66=>{const _0x15b85d=_0x177405;_0x555b66[0x1][_0x15b85d(0x137)]&&_0x555b66[0x1][_0x15b85d(0x12c)]&&allSymbols[_0x15b85d(0x25e)](_0x555b66[0x0]);});}catch(_0x368721){markets?logger[_0x177405(0x199)](_0x177405(0x14e)+_0x368721[_0x177405(0x144)]()):(loading[_0x177405(0xd0)]=!![],emitLoadingProgress(),_0x368721['toString']()[_0x177405(0xd2)]()[_0x177405(0x1df)](_0x177405(0x271))||_0x368721[_0x177405(0x144)]()[_0x177405(0xd2)]()[_0x177405(0x1df)](_0x177405(0x1e0))?logHistory('error',_0x177405(0x12f)):handleErrorNoStop(_0x368721,_0x177405(0x223),!![]),logHistory(_0x177405(0x205),'Failed\x20to\x20load\x20market\x20data\x20-\x20bot\x20not\x20started'),logHistory(_0x177405(0x205),_0x177405(0x241)+loadCoinsRetryInterval/0xea60+'\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again'),logger[_0x177405(0x199)](_0x177405(0x1b4),_0x368721),botPaused=!![],await sleep(loadCoinsRetryInterval),restartBot());}}function validateSymbols(_0xd2dfbf){const _0x1f5139=_0x44a322;let _0x556c88=[];return _0xd2dfbf[_0x1f5139(0x1aa)](_0x75a600=>{const _0x476cf0=_0x1f5139;!allSymbols[_0x476cf0(0x1df)](_0x75a600)?logHistory(_0x476cf0(0x205),_0x476cf0(0x170)+_0x75a600+_0x476cf0(0x14a)):_0x556c88[_0x476cf0(0x25e)](_0x75a600);}),_0x556c88;}async function initclient(){const _0x48e7da=_0x44a322;proxyEmit('configuration',emittedConfiguration()),proxyEmit(_0x48e7da(0xf4),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x48e7da(0xd8),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0xd6a4df=getNormalizedPerformance();emitPerformance(_0xd6a4df),getStartingBalances(_0xd6a4df);}async function toggleBotMode(){const _0x3dba98=_0x44a322;let _0x381552=dbConfig[_0x3dba98(0x1dd)](_0x3dba98(0x1b2))[_0x3dba98(0x112)]({'botID':botID})[_0x3dba98(0x23f)]();if(_0x381552){const _0x485076=!_0x381552[_0x3dba98(0x26a)];dbConfig['get'](_0x3dba98(0x1b2))[_0x3dba98(0x112)]({'botID':botID})[_0x3dba98(0x1ea)]({'headless':_0x485076})[_0x3dba98(0x247)](),config['headless']=_0x485076,proxyEmit(_0x3dba98(0x255),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x45eb0b=_0x44a322;process[_0x45eb0b(0x20c)]({'updatebotmanager':!![]},_0x9989e4=>{}),logger[_0x45eb0b(0x199)](_0x45eb0b(0x1bc)+config[_0x45eb0b(0x26a)]);}async function loadCoins(_0x4232b8){const _0x511f81=_0x44a322;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x4f28dc,_0x5498e4=0x0,_0x150bba=0x0;_0x4232b8[_0x511f81(0x1aa)](_0xdc7f=>{const _0x25e13d=_0x511f81;loading[_0x25e13d(0x140)][_0x25e13d(0x25e)](_0xdc7f);}),loadingCanceled=![];let _0x2001c2=![];while(_0x4f28dc!=_0x4232b8[_0x511f81(0x1de)]+maxLoadingProgress){_0x4f28dc=loadingProgress,_0x4232b8[_0x511f81(0x1aa)](_0x22c2a9=>{const _0x35c695=_0x511f81;if(gTicker[noslash(_0x22c2a9)]){loading[_0x35c695(0x140)]=loading[_0x35c695(0x140)]['filter'](_0x1ae2c9=>_0x1ae2c9!=_0x22c2a9);if(!watchedSymbols[_0x35c695(0x1df)](_0x22c2a9))watchedSymbols[_0x35c695(0x25e)](_0x22c2a9);_0x4f28dc++;}}),loading[_0x511f81(0x1f9)]=Math[_0x511f81(0xc5)](_0x4f28dc/(_0x4232b8[_0x511f81(0x1de)]+maxLoadingProgress)*0x64);loading[_0x511f81(0x1f9)]!=0x64&&(_0x150bba>0x1e*0x5&&(loading[_0x511f81(0x1b5)]=!![],emitLoadingProgress()),_0x150bba>0x78*0x5&&!_0x2001c2&&(_0x2001c2=!![],logHistory('error',_0x511f81(0x24a)+loading['remainingSymbols'][_0x511f81(0x1fb)](',\x20')+_0x511f81(0x1fd)),logHistory(_0x511f81(0x205),_0x511f81(0x241)+loadCoinsRetryInterval/0xea60+'\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again'),loadingCanceled=!![],await sleep(loadCoinsRetryInterval),restartBot()));if(loadingCanceled){loading[_0x511f81(0xd0)]=!![],emitLoadingProgress();break;}else _0x5498e4!=loading[_0x511f81(0x1f9)]&&(_0x5498e4=loading['progress'],emitLoadingProgress()),_0x150bba++,await sleep(0xc8);}_0x4f28dc==_0x4232b8[_0x511f81(0x1de)]+maxLoadingProgress&&(coinsLoaded=!![],process[_0x511f81(0x20c)]({'status':_0x511f81(0x1d9),'live':_0x511f81(0x268)},_0x178030=>{}),_0x2001c2&&logHistory(_0x511f81(0x1d4),_0x511f81(0x1c6)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0xdc10bb=_0x44a322;proxyEmit('configuration',{...emittedConfiguration(),'configstate':_0xdc10bb(0x22b)});}function emitLoadingProgress(){const _0x2975b1=_0x44a322;proxyEmit(_0x2975b1(0x20f),loading);}async function getFiat(){const _0x4326b5=_0x44a322;let _0x32ea53=gTicker[stablecoins['eur'][_0x4326b5(0x1ec)]],_0x1e77b3=gTicker[stablecoins[_0x4326b5(0x149)][_0x4326b5(0x1ec)]];return{'eur':Number(_0x32ea53),'usd':Number(_0x1e77b3)};}function capitalize(_0xed28fc){const _0xccb71f=_0x44a322;return _0xed28fc[_0xccb71f(0xf1)](0x0,0x1)[_0xccb71f(0x224)]()+_0xed28fc[_0xccb71f(0xf1)](0x1);}function supportedExchanges(){const _0x435616=_0x44a322,_0x541dac=['ws',_0x435616(0xee),_0x435616(0xd1),_0x435616(0x1ad),_0x435616(0xf8),_0x435616(0x108),_0x435616(0x19c),_0x435616(0x125),_0x435616(0x107)];let _0x4d2598=[],_0x3e441f=[],_0x220f87=ccxt[_0x435616(0x17f)][_0x435616(0xf4)];_0x220f87['forEach'](_0x43bc1a=>{const _0x5a5998=_0x435616;try{const _0x33e378=new ccxt[(_0x5a5998(0x17f))][_0x43bc1a]();_0x3e441f[_0x5a5998(0x25e)](_0x33e378);}catch(_0xd57247){}}),_0x3e441f[_0x435616(0x1aa)](_0x55fa72=>{const _0x4356df=_0x435616;let _0x2ca09e=0x0;_0x541dac['forEach'](_0x3bf095=>{const _0x411161=_0x49c2;_0x3bf095 in _0x55fa72[_0x411161(0x128)]&&_0x55fa72['has'][_0x3bf095]&&_0x2ca09e++;}),_0x2ca09e==_0x541dac[_0x4356df(0x1de)]&&(!excludedExchanges[_0x4356df(0x1df)](_0x55fa72['id'])&&_0x4d2598[_0x4356df(0x25e)](capitalize(_0x55fa72['id'])));});let _0x91ca5a=[];return _0x220f87['forEach'](_0x1c1670=>{const _0x412369=_0x435616;_0x1c1670=capitalize(_0x1c1670);if(!_0x4d2598['includes'](_0x1c1670))_0x91ca5a[_0x412369(0x25e)](_0x1c1670);}),_0x4d2598;}function setStartDatePerformance(){const _0x42d9b5=_0x44a322;if(config&&config[_0x42d9b5(0x248)][0x0]['changes'][_0x42d9b5(0x1de)]!=0x0){const _0x3c595c=config['liquidity'][0x0]['changes'];dbPerformance[_0x42d9b5(0x1dd)]('data')['find']({'date':config['startdate']})[_0x42d9b5(0x1ea)]({'coins':_0x3c595c})['write']();}}async function recreateCoinResults(){const _0x416f12=_0x44a322;recreationNeeded=![];let _0x68a568,_0x58186d=[];try{for(const _0x413b66 of currentCoins){if(_0x413b66[_0x416f12(0x1ec)]!=config[_0x416f12(0x17e)]){let _0x3f06da=0x0,_0x594c56,_0x3acfee;_0x68a568=await getAllEventOrders(_0x413b66[_0x416f12(0x228)]);if(_0x68a568[_0x416f12(0x1de)]>0x0)_0x68a568['forEach'](_0x324f0b=>{const _0x149e10=_0x416f12,_0x2c2bbe=_0x413b66[_0x149e10(0x228)][_0x149e10(0x1df)](config[_0x149e10(0x17e)]+'/');_0x58186d[_0x149e10(0x25e)]({'datetime':_0x324f0b[_0x149e10(0x21c)],'coin':_0x413b66['coin'],'symbol':_0x413b66['symbol'],'side':_0x324f0b[_0x149e10(0x186)],'reverse':_0x2c2bbe,'amount':formatResult(_0x324f0b['filled'],0x8),'filled':formatResult(_0x324f0b[_0x149e10(0x1cd)],0x8),'price':formatResult(_0x324f0b[_0x149e10(0x113)],0x8)}),_0x3f06da=_0x324f0b['side']==_0x149e10(0x24f)?_0x3f06da+_0x324f0b[_0x149e10(0x1cd)]:_0x3f06da-_0x324f0b[_0x149e10(0x1cd)];if(!_0x3acfee)_0x3acfee=_0x324f0b[_0x149e10(0x113)];});_0x594c56=_0x413b66[_0x416f12(0xfb)]-_0x3f06da;let _0x53399d;config[_0x416f12(0x248)][_0x416f12(0x1aa)](_0x3c6379=>{const _0x5f35c0=_0x416f12;!_0x53399d&&(_0x53399d=_0x3c6379[_0x5f35c0(0x26b)][_0x5f35c0(0x112)](_0x3996bc=>_0x3996bc[_0x5f35c0(0x1ec)]==_0x413b66['coin']),_0x53399d&&(_0x594c56=_0x53399d[_0x5f35c0(0xfb)],_0x3acfee=_0x53399d['price']));});let _0x19ef98=dbCoinResults['get']('coins')['find']({'coin':_0x413b66[_0x416f12(0x1ec)]})[_0x416f12(0x23f)]();_0x19ef98={'coin':_0x413b66['coin'],'number':_0x594c56,'breakeven':_0x3acfee,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults['get'](_0x416f12(0x190))[_0x416f12(0x112)]({'coin':_0x413b66[_0x416f12(0x1ec)]})[_0x416f12(0x1ea)](_0x19ef98)[_0x416f12(0x247)]();}}_0x58186d[_0x416f12(0x260)]((_0x2c6e58,_0x279785)=>_0x2c6e58['datetime']>_0x279785[_0x416f12(0x21c)]?0x1:_0x279785['datetime']>_0x2c6e58[_0x416f12(0x21c)]?-0x1:0x0);let _0x30b8c5=0x0;for(let _0x2f2c73 of _0x58186d){await updateCoinResults(_0x2f2c73,!![]);}}catch(_0x8383d4){await handleError(_0x8383d4,'recreateCoinResults()');}}async function getAllEventOrders(_0x2b3fe3){const _0x959141=_0x44a322;let _0x4f9f3f=[],_0x4921b3=dbLogs[_0x959141(0x1dd)](_0x959141(0x1af))[_0x959141(0x1be)](_0x5d637c=>{const _0x2942a7=_0x959141,_0x493a7f=_0x5d637c[_0x2942a7(0x1d1)][_0x2942a7(0xd2)]();return _0x493a7f[_0x2942a7(0x1df)](_0x2b3fe3['toLowerCase']())&&(_0x493a7f[_0x2942a7(0x1df)](_0x2942a7(0x1d5))&&_0x493a7f[_0x2942a7(0x1df)](_0x2942a7(0x211))||_0x493a7f[_0x2942a7(0x1df)](_0x2942a7(0x1cd))&&_0x493a7f['includes'](_0x2942a7(0x211)));})[_0x959141(0x26f)](_0x959141(0x25f))[_0x959141(0x23f)]();return _0x4921b3[_0x959141(0x1aa)](_0x57e367=>{const _0x37405b=_0x959141,_0xa9c728=_0x57e367[_0x37405b(0x1d1)][_0x37405b(0x1df)]('sell')?_0x37405b(0x1cf):'buy',_0x33cc4a=/#([0-9]|\.)+\s/i,_0x596ca0=Number(_0x33cc4a['exec'](_0x57e367[_0x37405b(0x1d1)])[0x0][_0x37405b(0x1ed)](0x1)),_0x17072c=/@([0-9]|\.)+$/i,_0x2e0096=Number(_0x17072c[_0x37405b(0x1ef)](_0x57e367[_0x37405b(0x1d1)])[0x0][_0x37405b(0x1ed)](0x1));_0x4f9f3f[_0x37405b(0x25e)]({'datetime':_0x57e367[_0x37405b(0x25f)],'coin':symbolToCoin(_0x2b3fe3),'symbol':_0x2b3fe3,'side':_0xa9c728,'amount':_0x596ca0,'filled':_0x596ca0,'price':_0x2e0096});}),_0x4f9f3f;}async function validate24hChanges(){const _0x18e2f3=_0x44a322;for(const _0x4fd81d of currentCoins){if(_0x4fd81d[_0x18e2f3(0x1ec)]!=config[_0x18e2f3(0x17e)]){let _0x401670;_0x4fd81d[_0x18e2f3(0x11c)]?_0x401670=formatResult((0x1/(gChange[_0x4fd81d['symbol']]/0x64+0x1)-0x1)*0x64,0x3):_0x401670=gChange[_0x4fd81d[_0x18e2f3(0x228)]],_0x401670<config[_0x18e2f3(0xce)]&&(logHistory(_0x18e2f3(0x205),_0x4fd81d[_0x18e2f3(0x1ec)]+_0x18e2f3(0x123)+_0x401670+'%'),logHistory(_0x18e2f3(0x205),_0x18e2f3(0x19d)),logHistory(_0x18e2f3(0x205),_0x18e2f3(0x1f4)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x21022c,_0x3c8da7){const _0x2e64ef=_0x44a322;if(!_0x21022c)return!![];const _0x1aee04=_0x3c8da7['split']('.'),_0x2250db=_0x21022c[_0x2e64ef(0x1d6)]('.');for(var _0x5c1c05=0x0;_0x5c1c05<_0x2250db[_0x2e64ef(0x1de)];_0x5c1c05++){const _0x1d8725=~~_0x2250db[_0x5c1c05],_0x3766ce=~~_0x1aee04[_0x5c1c05];if(_0x1d8725<_0x3766ce)return!![];if(_0x1d8725>_0x3766ce)return![];}return![];}async function oneTimeMigration(){const _0x374997=_0x44a322;let _0x4df640=dbLogs['get']('version')[_0x374997(0x23f)]();if(isOlderVersion(_0x4df640,'2.3.5')){let _0x177847=[];const _0x1bbbe0=dbLogs[_0x374997(0x1dd)](_0x374997(0x1af))[_0x374997(0x23f)]();_0x1bbbe0['forEach'](_0x569436=>{const _0x38d571=_0x374997;_0x177847['push']({'time':_0x569436['time'],'type':_0x569436[_0x38d571(0x270)],'event':_0x569436[_0x38d571(0x1d1)]});}),dbLogs['get'](_0x374997(0x1af))[_0x374997(0x1ea)](_0x177847)[_0x374997(0x247)]();}let _0x3ad57a=dbConfig[_0x374997(0x1dd)](_0x374997(0xe3))[_0x374997(0x23f)]();if(isOlderVersion(_0x3ad57a,_0x374997(0x183))){let _0x3c8843=dbConfig[_0x374997(0x1dd)](_0x374997(0x1b2))[_0x374997(0x112)]({'botID':botID})['value']();if(_0x3c8843){let _0x588cf0=[];_0x3c8843[_0x374997(0xfe)][_0x374997(0x1aa)](_0x32174c=>{const _0x2a91c8=_0x374997;_0x588cf0[_0x2a91c8(0x25e)]({'coin':_0x32174c[_0x2a91c8(0x1ec)],'number':_0x32174c[_0x2a91c8(0x1c9)],'price':_0x32174c[_0x2a91c8(0xc4)]}),delete _0x32174c[_0x2a91c8(0x1c9)],delete _0x32174c[_0x2a91c8(0xc4)];});if(_0x588cf0[_0x374997(0x1de)]!==0x0)fs[_0x374997(0x203)](configbackuppath+('starting-balance-'+botID+_0x374997(0x242)),JSON[_0x374997(0x23c)](_0x588cf0,null,0x4),function(_0x17d19d){if(_0x17d19d){}});const _0x2f3f7b=(_0x482f53,_0x3a4f28)=>{let _0x2d58e4=[];_0x3a4f28['forEach'](_0x85904f=>{const _0x39c4fe=_0x49c2,_0x2fe038=_0x482f53[_0x39c4fe(0x112)](_0x248413=>_0x248413['coin']==_0x85904f[_0x39c4fe(0x1ec)]);if(!_0x2fe038)_0x2d58e4[_0x39c4fe(0x25e)](_0x85904f);});let _0x245328=[];return _0x482f53['forEach'](_0x28a25d=>{const _0x26fd18=_0x49c2,_0x27a517=_0x3a4f28[_0x26fd18(0x112)](_0x78b341=>_0x78b341[_0x26fd18(0x1ec)]==_0x28a25d[_0x26fd18(0x1ec)]);if(!_0x27a517||_0x27a517[_0x26fd18(0xfb)]==0x0&&_0x28a25d[_0x26fd18(0xfb)]!=0x0)_0x245328['push'](_0x28a25d);}),{'missingDay1':_0x2d58e4,'notInDay2':_0x245328};},_0x1e9143=dbPerformance[_0x374997(0x1dd)](_0x374997(0x239))['cloneDeep']()[_0x374997(0x23f)]();if(_0x1e9143[_0x374997(0x1de)]>0x1){const {missingDay1:_0x30da1c,notInDay2:_0x18aeee}=_0x2f3f7b(_0x588cf0,_0x1e9143[0x1][_0x374997(0x190)]);_0x588cf0=[..._0x588cf0,..._0x30da1c],_0x18aeee[_0x374997(0x1aa)](_0x509111=>{const _0x454f99=_0x374997;let _0x1b6e4d=_0x588cf0[_0x454f99(0x262)](_0x3f104f=>_0x3f104f[_0x454f99(0x1ec)]==_0x509111[_0x454f99(0x1ec)]);_0x1b6e4d!=-0x1&&_0x588cf0[_0x454f99(0x21b)](_0x1b6e4d,0x1);});}_0x588cf0[_0x374997(0x260)]((_0x2d4820,_0x1b2122)=>_0x2d4820[_0x374997(0x1ec)]>_0x1b2122[_0x374997(0x1ec)]?0x1:_0x1b2122[_0x374997(0x1ec)]>_0x2d4820[_0x374997(0x1ec)]?-0x1:0x0);let _0x38bc8a=[{'date':_0x3c8843[_0x374997(0x24d)],'changes':_0x588cf0}];_0x1e9143['length']>0x2&&_0x1e9143['forEach']((_0x5b0a1e,_0x520e84)=>{const _0x5e9007=_0x374997;if(_0x520e84>0x0&&_0x520e84<_0x1e9143[_0x5e9007(0x1de)]-0x1){const {missingDay1:_0x5d7b74,notInDay2:_0x1802bd}=_0x2f3f7b(_0x1e9143[_0x520e84][_0x5e9007(0x190)],_0x1e9143[_0x520e84+0x1][_0x5e9007(0x190)]);_0x588cf0=[],(_0x5d7b74[_0x5e9007(0x1de)]!=0x0||_0x1802bd[_0x5e9007(0x1de)]!=0x0)&&(_0x5d7b74['length']!=0x0&&_0x588cf0[_0x5e9007(0x25e)](..._0x5d7b74),_0x1802bd[_0x5e9007(0x1de)]!=0x0&&(_0x1802bd[_0x5e9007(0x1aa)](_0x3ef7f9=>{const _0x38db18=_0x5e9007;_0x3ef7f9['number']=-_0x3ef7f9[_0x38db18(0xfb)];}),_0x588cf0[_0x5e9007(0x25e)](..._0x1802bd)),_0x588cf0[_0x5e9007(0x260)]((_0x189bdf,_0x2c0a5b)=>_0x189bdf['coin']>_0x2c0a5b[_0x5e9007(0x1ec)]?0x1:_0x2c0a5b[_0x5e9007(0x1ec)]>_0x189bdf[_0x5e9007(0x1ec)]?-0x1:0x0),_0x38bc8a[_0x5e9007(0x25e)]({'date':_0x1e9143[_0x520e84+0x1][_0x5e9007(0x132)],'changes':_0x588cf0}));}}),dbConfig[_0x374997(0x1dd)]('bot')[_0x374997(0x112)]({'botID':botID})[_0x374997(0x1ea)]({..._0x3c8843,'liquidity':_0x38bc8a})[_0x374997(0x247)]();}}if(isOlderVersion(_0x3ad57a,_0x374997(0x1a0))){let _0x35bc11=dbConfig['get'](_0x374997(0x1b2))[_0x374997(0x112)]({'botID':botID})[_0x374997(0x23f)]();if(_0x35bc11){const _0x109aaf=_0x35bc11[_0x374997(0xe2)],_0x382ec0=_0x109aaf?capitalize(_0x109aaf):_0x374997(0x124);dbConfig[_0x374997(0x1dd)]('bot')[_0x374997(0x112)]({'botID':botID})[_0x374997(0x1ea)]({'exchange':_0x382ec0})['write']();}}if(isOlderVersion(_0x3ad57a,_0x374997(0x278))){let _0x562dc2=dbConfig[_0x374997(0x1dd)]('bot')[_0x374997(0x112)]({'botID':botID})[_0x374997(0x23f)]();if(_0x562dc2){const _0x31a699=_0x562dc2[_0x374997(0x254)],_0x1fc90e=_0x31a699?_0x374997(0x12a):![];dbConfig['get'](_0x374997(0x1b2))['find']({'botID':botID})[_0x374997(0x1ea)]({'marketcapEnabled':_0x1fc90e})['write']();}}if(isOlderVersion(_0x3ad57a,_0x374997(0x1d7))){let _0x4a36ff=dbConfig[_0x374997(0x1dd)](_0x374997(0x1b2))['find']({'botID':botID})[_0x374997(0x23f)]();if(_0x4a36ff){const _0x8d0cb4=_0x4a36ff[_0x374997(0x147)],_0x14b5e2=_0x8d0cb4?_0x374997(0x1a4):![];dbConfig['get'](_0x374997(0x1b2))[_0x374997(0x112)]({'botID':botID})['assign']({'autoliquidity':_0x14b5e2})[_0x374997(0x247)]();}}let _0x2c7151=dbPerformance[_0x374997(0x1dd)]('version')['value']();isOlderVersion(_0x2c7151,_0x374997(0x183))&&setStartDatePerformance();let _0x4ee628=dbCoinResults['get']('version')[_0x374997(0x23f)]();if(isOlderVersion(_0x4ee628,_0x374997(0x152))){let _0x2bf13b=dbCoinResults[_0x374997(0x1dd)](_0x374997(0x190))[_0x374997(0x23f)]();if(_0x2bf13b['length']!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x171a26=_0x44a322;dbConfig[_0x171a26(0x194)](_0x171a26(0xe3),serverversion)[_0x171a26(0x247)](),dbPerformance['set'](_0x171a26(0xe3),serverversion)[_0x171a26(0x247)](),dbLogs[_0x171a26(0x194)]('version',serverversion)['write'](),dbCoinResults['set'](_0x171a26(0xe3),serverversion)[_0x171a26(0x247)]();}function getConfiguration(_0x26e1f4){const _0x41cafb=_0x44a322;let _0x1d2787=dbConfig['get'](_0x41cafb(0x1b2))[_0x41cafb(0x112)]({'botID':_0x26e1f4})[_0x41cafb(0x23f)]();if(_0x1d2787){let _0x10caa7=![];typeof _0x1d2787[_0x41cafb(0x1f2)]==_0x41cafb(0x136)&&(_0x1d2787={..._0x1d2787,'threshold':Number(_0x1d2787['threshold'])},_0x10caa7=!![]),_0x1d2787[_0x41cafb(0xce)]==undefined&&(_0x1d2787={..._0x1d2787,'change24h':-0x14},_0x10caa7=!![]),_0x1d2787[_0x41cafb(0xf7)]==undefined&&(_0x1d2787={..._0x1d2787,'fiat':'USD'},_0x10caa7=!![]),_0x1d2787['onepagemode']==undefined&&(_0x1d2787={..._0x1d2787,'onepagemode':settings[_0x41cafb(0xf3)]},_0x10caa7=!![]),_0x1d2787[_0x41cafb(0xff)]==undefined&&(_0x1d2787={..._0x1d2787,'colorscheme':_0x41cafb(0xbc)},_0x10caa7=!![]),_0x1d2787[_0x41cafb(0x147)]==undefined&&(_0x1d2787={..._0x1d2787,'autoliquidity':_0x41cafb(0x1a4)},_0x10caa7=!![]),_0x1d2787[_0x41cafb(0x26e)]==undefined&&(_0x1d2787={..._0x1d2787,'marketcapApi':settings[_0x41cafb(0x26e)]?!![]:![]},_0x10caa7=!![]),_0x1d2787[_0x41cafb(0x254)]==undefined&&(_0x1d2787={..._0x1d2787,'marketcapEnabled':![]},_0x10caa7=!![]),_0x10caa7&&(_0x1d2787={'botID':_0x1d2787[_0x41cafb(0xf6)],'exchange':_0x1d2787[_0x41cafb(0xe2)],'apiKey':_0x1d2787[_0x41cafb(0x20e)],'apiSecret':_0x1d2787[_0x41cafb(0x252)],'apiPassword':_0x1d2787[_0x41cafb(0x1c2)],'basecoin':_0x1d2787[_0x41cafb(0x17e)],'botname':_0x1d2787[_0x41cafb(0x13d)],'showname':_0x1d2787[_0x41cafb(0x121)],'threshold':_0x1d2787[_0x41cafb(0x1f2)],'ordertype':_0x1d2787['ordertype'],'timeout':_0x1d2787['timeout'],'fiat':_0x1d2787[_0x41cafb(0xf7)],'startdate':_0x1d2787[_0x41cafb(0x24d)],'recreate':_0x1d2787[_0x41cafb(0x176)],'timeshift':_0x1d2787[_0x41cafb(0x19a)],'onepagemode':_0x1d2787['onepagemode'],'headless':_0x1d2787[_0x41cafb(0x26a)],'cooldown':_0x1d2787[_0x41cafb(0xb5)],'change24h':_0x1d2787['change24h'],'emojibuy':_0x1d2787[_0x41cafb(0x1b8)],'emojisell':_0x1d2787[_0x41cafb(0x119)],'colorscheme':_0x1d2787[_0x41cafb(0xff)],'marketcapApi':_0x1d2787[_0x41cafb(0x26e)],'marketcapEnabled':_0x1d2787['marketcapEnabled'],'portfolio':_0x1d2787[_0x41cafb(0xfe)],'autoliquidity':_0x1d2787[_0x41cafb(0x147)],'liquidity':_0x1d2787[_0x41cafb(0x248)],'openOrders':_0x1d2787[_0x41cafb(0xc9)]},dbConfig['get'](_0x41cafb(0x1b2))[_0x41cafb(0x218)]()['write'](),dbConfig['get'](_0x41cafb(0x1b2))[_0x41cafb(0x25e)](_0x1d2787)[_0x41cafb(0x247)]());}else _0x1d2787={'botID':_0x26e1f4,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':'Bot\x20'+_0x26e1f4,'showname':![],'threshold':0x3,'ordertype':_0x41cafb(0x1d5),'timeout':0x14,'fiat':'USD','startdate':getDate(),'recreate':![],'timeshift':settings[_0x41cafb(0x19a)],'onepagemode':settings['onepagemode'],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x41cafb(0xbc),'marketcapApi':settings[_0x41cafb(0x26e)]?!![]:![],'marketcapEnabled':![],'portfolio':[],'autoliquidity':'update-liquidity','liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x1d2787;}function emittedConfiguration(){const _0x26ee8e=_0x44a322;let _0x1298f7;if(config[_0x26ee8e(0x20e)]=='')_0x1298f7={...config,'configstate':_0x26ee8e(0x250)};else config['apiKey']==_0x26ee8e(0x1e2)?_0x1298f7={...config,'configstate':_0x26ee8e(0x269)}:(_0x1298f7={...config,'apiKey':_0x26ee8e(0x23a),'apiSecret':_0x26ee8e(0x23a)},config['apiPassword']&&(_0x1298f7[_0x26ee8e(0x1c2)]='************'));return _0x1298f7[_0x26ee8e(0x15b)]=enableFiatToggle,_0x1298f7;}function getSettings(){const _0x3c243c=_0x44a322;return dbSettings['get']('settings')[_0x3c243c(0x23f)]();}function getSecure(){const _0x2b80b1=_0x44a322;return dbSecure[_0x2b80b1(0x1dd)](_0x2b80b1(0x143))['value']()||{};}function updateTimeshift(_0x20b5c2){const _0x339014=_0x44a322;let _0x1db1b4=dbConfig[_0x339014(0x1dd)](_0x339014(0x1b2))[_0x339014(0x112)]({'botID':botID})[_0x339014(0x23f)]();_0x1db1b4&&dbConfig['get']('bot')[_0x339014(0x112)]({'botID':botID})[_0x339014(0x1ea)]({'timeshift':_0x20b5c2})[_0x339014(0x247)](),config[_0x339014(0x19a)]=_0x20b5c2,proxyEmit('configuration',emittedConfiguration());}function updateOnepagemode(_0x20e649){const _0x61d54f=_0x44a322;let _0x29b1bb=dbConfig[_0x61d54f(0x1dd)]('bot')['find']({'botID':botID})[_0x61d54f(0x23f)]();_0x29b1bb&&dbConfig[_0x61d54f(0x1dd)](_0x61d54f(0x1b2))[_0x61d54f(0x112)]({'botID':botID})['assign']({'onepagemode':_0x20e649})[_0x61d54f(0x247)](),config['onepagemode']=_0x20e649,proxyEmit(_0x61d54f(0x255),emittedConfiguration());}function updateMarketcapApi(_0x27f390){const _0x46e49d=_0x44a322,_0x4935b3=_0x27f390?!![]:![];let _0x2267d0=dbConfig['get'](_0x46e49d(0x1b2))['find']({'botID':botID})['value']();_0x2267d0&&dbConfig[_0x46e49d(0x1dd)]('bot')[_0x46e49d(0x112)]({'botID':botID})[_0x46e49d(0x1ea)]({'marketcapApi':_0x4935b3})[_0x46e49d(0x247)](),config[_0x46e49d(0x26e)]=_0x4935b3,getMarketCap(),proxyEmit('configuration',emittedConfiguration());}async function storeConfiguration(_0x2d6da7){const _0x4e52a6=_0x44a322;logger['debug'](_0x4e52a6(0xc2));let _0x3d9049=![];_0x2d6da7[_0x4e52a6(0x1d3)]&&(_0x2d6da7[_0x4e52a6(0x1d3)]==_0x4e52a6(0x269)&&(_0x3d9049=!![]),delete _0x2d6da7['configstate']);if(pidBalances)clearTimeout(pidBalances);setBlockTransactionDetection(!![]);let _0x521df0=![],_0x2a139c=![],_0x53b7bb=[];_0x2d6da7['portfolio']['forEach'](_0x518f7f=>{const _0x3a73de=_0x4e52a6;if(!_0x518f7f[_0x3a73de(0xbb)]&&_0x518f7f[_0x3a73de(0x1ec)]!=_0x2d6da7[_0x3a73de(0x17e)])_0x53b7bb[_0x3a73de(0x25e)](_0x518f7f[_0x3a73de(0x228)]);}),_0x53b7bb[_0x4e52a6(0x1aa)](_0x218e41=>{const _0x505d29=_0x4e52a6,_0x12be6c=currentCoins[_0x505d29(0x112)](_0x396ad3=>_0x396ad3['symbol']==_0x218e41);!_0x12be6c&&(_0x521df0=!![]);}),currentCoins[_0x4e52a6(0x1aa)](_0x4f9a2e=>{const _0x301204=_0x4e52a6;if(_0x4f9a2e[_0x301204(0x1ec)]!=config[_0x301204(0x17e)]){const _0x231b1d=_0x53b7bb[_0x301204(0x112)](_0x22f59b=>_0x22f59b==_0x4f9a2e[_0x301204(0x228)]);!_0x231b1d&&(_0x521df0=!![]);}}),_0x2d6da7[_0x4e52a6(0xfe)]['forEach'](_0x226ad4=>{const _0x1325bc=_0x4e52a6,_0x5912ef=config['portfolio'][_0x1325bc(0x112)](_0x125e45=>_0x125e45[_0x1325bc(0x1ec)]==_0x226ad4[_0x1325bc(0x1ec)]);if(_0x5912ef&&_0x226ad4[_0x1325bc(0x156)]!=_0x5912ef[_0x1325bc(0x156)])_0x2a139c=!![];});let _0x104dd0=dbConfig[_0x4e52a6(0x1dd)]('bot')[_0x4e52a6(0x112)]({'botID':botID})[_0x4e52a6(0x23f)]();_0x2d6da7={..._0x2d6da7,'apiKey':decryptRSA(secure['privateKey'],_0x2d6da7['apiKey']),'apiSecret':decryptRSA(secure[_0x4e52a6(0xd9)],_0x2d6da7[_0x4e52a6(0x252)])};_0x2d6da7[_0x4e52a6(0x1c2)]&&(_0x2d6da7[_0x4e52a6(0x1c2)]=decryptRSA(secure[_0x4e52a6(0xd9)],_0x2d6da7['apiPassword']));let _0x3a42c0=![];if(_0x104dd0){_0x2d6da7[_0x4e52a6(0x20e)]=='************'?_0x2d6da7['apiKey']=config[_0x4e52a6(0x20e)]:_0x3a42c0=!![];_0x2d6da7[_0x4e52a6(0x252)]==_0x4e52a6(0x23a)?_0x2d6da7[_0x4e52a6(0x252)]=config['apiSecret']:_0x3a42c0=!![];if(_0x2d6da7[_0x4e52a6(0x1c2)]==_0x4e52a6(0x23a))_0x2d6da7[_0x4e52a6(0x1c2)]=config[_0x4e52a6(0x1c2)];else{if(_0x2d6da7[_0x4e52a6(0x1c2)])_0x3a42c0=!![];}dbConfig['get'](_0x4e52a6(0x1b2))['find']({'botID':botID})['assign'](_0x2d6da7)[_0x4e52a6(0x247)]();}else dbConfig[_0x4e52a6(0x1dd)]('bot')['push'](_0x2d6da7)['write'](),_0x3a42c0=!![],process[_0x4e52a6(0x20c)]({'status':'enabled','live':'running'},_0x9955cd=>{});process[_0x4e52a6(0x20c)]({'botname':_0x2d6da7['botname']},_0x47d4e0=>{}),config={..._0x2d6da7},updateBotManager(),proxyEmit(_0x4e52a6(0xec)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x3a42c0)!_0x104dd0||_0x3d9049?await reset(!![]):getBalances();else _0x521df0||_0x2a139c?await reset(![]):getBalances();setBlockTransactionDetection(![]);}async function storeHeadless(_0xe84067){const _0x5992c1=_0x44a322,_0x486d39={...config,'headless':_0xe84067[_0x5992c1(0x26a)]};let _0x359fe9=dbConfig[_0x5992c1(0x1dd)]('bot')[_0x5992c1(0x112)]({'botID':botID})['value']();_0x359fe9&&dbConfig[_0x5992c1(0x1dd)](_0x5992c1(0x1b2))[_0x5992c1(0x112)]({'botID':botID})[_0x5992c1(0x1ea)](_0x486d39)[_0x5992c1(0x247)](),config={..._0x486d39},updateBotManager(),proxyEmit(_0x5992c1(0x255),emittedConfiguration());}async function storeFiat(_0x2c9411){const _0x59df97=_0x44a322,_0x322983={...config,'fiat':_0x2c9411};let _0x23e85c=dbConfig[_0x59df97(0x1dd)](_0x59df97(0x1b2))[_0x59df97(0x112)]({'botID':botID})[_0x59df97(0x23f)]();_0x23e85c&&dbConfig[_0x59df97(0x1dd)]('bot')[_0x59df97(0x112)]({'botID':botID})[_0x59df97(0x1ea)](_0x322983)['write'](),config={..._0x322983},proxyEmit(_0x59df97(0x255),emittedConfiguration());}function resetHistory(){const _0x1248bf=_0x44a322;logger[_0x1248bf(0x11f)](_0x1248bf(0x230));try{if(fs['existsSync'](path[_0x1248bf(0x1fb)](configpath,_0x1248bf(0x22c)+botID+_0x1248bf(0x236))))fs[_0x1248bf(0x16b)](path[_0x1248bf(0x1fb)](configpath,_0x1248bf(0x22c)+botID+_0x1248bf(0x236)));if(fs[_0x1248bf(0x213)](path[_0x1248bf(0x1fb)](configpath,_0x1248bf(0x22c)+botID+_0x1248bf(0x193))))fs[_0x1248bf(0x16b)](path[_0x1248bf(0x1fb)](configpath,_0x1248bf(0x22c)+botID+'-performance.json'));if(fs[_0x1248bf(0x213)](path[_0x1248bf(0x1fb)](configpath,_0x1248bf(0x22c)+botID+_0x1248bf(0x1dc))))fs['unlinkSync'](path['join'](configpath,_0x1248bf(0x22c)+botID+_0x1248bf(0x1dc)));}catch(_0x39c8a8){if(_0x39c8a8)logger[_0x1248bf(0x11f)](_0x1248bf(0x26c),_0x39c8a8);}const _0x1c9975=getDate();let _0xb0e66d=[];currentCoins[_0x1248bf(0x1aa)](_0xe4c3fc=>{const _0x116c5b=_0x1248bf;_0xb0e66d['push']({'coin':_0xe4c3fc['coin'],'number':_0xe4c3fc['number'],'price':_0xe4c3fc[_0x116c5b(0x120)]});});let _0x5f252a=dbConfig[_0x1248bf(0x1dd)](_0x1248bf(0x1b2))['find']({'botID':botID})[_0x1248bf(0x23f)]();_0x5f252a&&(dbConfig[_0x1248bf(0x1dd)](_0x1248bf(0x1b2))[_0x1248bf(0x112)]({'botID':botID})[_0x1248bf(0x1ea)]({'liquidity':[{'date':_0x1c9975,'changes':_0xb0e66d}]})['write'](),config['liquidity']=[]),restartBot(!![]);}function noslash(_0x3ba56d){return _0x3ba56d['replace']('/','');}function _0x9856(){const _0x3e90b4=['USDT','getPortfolio','log','2352016ALsTgA','assign','deleteHistoryAlerts','coin','slice','production','exec','argv',')\x20unknown\x20order:\x20','threshold','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','1887948adJszS','amount','placeOrder','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','progress','getHours','join','leftTxt','\x20-\x20bot\x20not\x20started','-config.json','Manual\x20balancing\x20required','defaults','none','format','writeFile','BTC','error','Waited\x20','\x20value','\x20closed\x20the\x20connection\x20(see:\x20hodlerhacks.com/fix/5)','Unknown\x20error\x20-\x20check\x20logs','Executed\x20','Huobipro','send','event-history','apiKey','coin-loading-progress','marketcapsqrt','order','net-basecoin','existsSync','\x20network\x20error:\x20','search','complete','storeHeadless','remove','market_cap','fromCodePoint','splice','datetime','currency','create','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','./config/','bitmex','loadSymbols()','toUpperCase','Net\x20effect','RateLimitExceeded','eur','symbol','\x20blocked\x20API\x20(DDoSProtection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','args','loading-canceled','bot-','map','USD','basecoinvalue','Resetting\x20bot\x20history','getSeconds','bb-settings.json','Stopped\x20fetching\x20balance\x20after\x20','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','min','-events.json','BUSD','starting-balances','data','************','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','stringify','\x20>\x20[DEBUG]\x20','1274300RAHJkh','value','sells','Pausing\x20for\x20','.json','getFullYear','NetworkError','limit-high','initclient','write','liquidity','added','Failed\x20to\x20load\x20coin\x20data\x20for\x20','\x20order:\x20','entries','startdate','USDP','buy','initial','Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute','apiSecret','bots','marketcapEnabled','configuration','DDoSProtection','\x20metrics:</b>\x20\x0a\x0a','fetchTickers()','Placing\x20order\x20for:\x20','buys','LOCKED','UNLOCKED','Invalid\x20API\x20details,\x20please\x20try\x20again\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','push','time','sort','pki','findIndex','password','Bybit','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','staging','\x20not\x20responding\x20(see:\x20hodlerhacks.com/fix/5)','running','recovery','headless','changes','Error\x20while\x20deleting\x20files:\x20','slider','marketcapApi','sortBy','type','timestamp','\x20:\x20','trade','bid','padStart','\x20>\x20details:','delta','2.6.22','Resetting\x20coin\x20results:\x20','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)','portfolio2','3321063ApnDjd','1\x20-\x20partially\x20FILLED\x20(','cooldown','\x20rejected\x20your\x20API\x20request\x20(see:\x20hodlerhacks.com/fix/4)','(((.+)+)+)+$','cancelLoading','Resuming\x20(','warning','excluded','red_yellow_blue','5XLuLCg','<b>','lowdb/adapters/FileSync','open','privateKeyFromPem','Saving\x20configuration','page','startprice','round','API-key\x20format\x20invalid','indexOf','amountToPrecision','openOrders','ordertype','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','\x20>\x20','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','change24h','3VTFEod','cancel','fetchTicker','toLowerCase','max','shift','isEqual','pop','1\x20-\x20Validate\x20orders:\x20','balances','privateKey','fees','decrypt','cost','Loading\x20completed','Insufficient\x20funds\x20to\x20execute\x20order:\x20','getTime','limits','sha256','exchange','version','BNB','highest','storeFiat','Block\x20transaction\x20detection:\x20','\x20|\x20Custom\x20ID:\x20','RETRY\x20-\x20Problem\x20resolved\x20after\x20','Invalid\x20quantity','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','configuration-stored','orderId','fetchTickers','Limit\x20(high-margin)','Cooldown\x20ended\x20-\x20balancing\x20resumed','substring','keys','onepagemode','exchanges','Valid\x20balance\x20for\x20','botID','fiat','watchOrders','Avoiding\x20continuous\x20order\x20attempts','yargs/yargs','number','/output-000.log','\x20(see:\x20hodlerhacks.com/fix/1)','portfolio','colorscheme','./logs/','2145904BYcetp','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20trying\x20again\x20in\x20','No\x20more\x20open\x20orders\x20-\x20','AuthenticationError','removed','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','fetchBalance','cancelOrder',':\x20Bot\x20','\x20exchange','27751UtHBVV','\x20blocked\x20API\x20(RateLimitExceeded)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','/backup/','quick','Network\x20error\x20details:','MIN_NOTIONAL','function','find','price','resetHistory','axios','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','Updating\x20API\x20key\x20(not\x20saved\x20in\x20config\x20file\x20yet)','BNB/','emojisell','Initiating\x20bot\x20restart','parse','reverse','1\x20-\x20FILLED\x20unknown\x20order:\x20','pid','full','last','showname','2\x20-\x20Handled\x20open\x20orders','\x20has\x20a\x2024h\x20drop\x20of\x20','Binance','fetchOpenOrders','emitHistory','\x20-\x20','has','\x20minutes','marketcap','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','spot','OnMaintenance','limit-low','Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)','differenceInSeconds','Initializing\x20exchange','date','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','replace','<b>Bot\x20','string','active','Error\x20occurred:\x20','USDC','Invalid\x20balance\x20for\x20','percentage','path','botname','node-forge','rightTxt','remainingSymbols','toggleBotMode','average','secure','toString','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','fetchBalance()','autoliquidity','Trigger:\x20','usd','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','EUR','\x0aSymbol(s):\x20','Cryptocom','Error\x20in\x20loadSymbols():\x20','Exception\x20thrown\x20in\x20','\x20API\x20key\x20is\x20invalid','canceled','2.5.0','getMinutes','PAXG','Error:\x20Invalid\x20argument\x20','offset','message','abs','target','environment','enableFiatToggle','random','\x20minutes\x20-\x20','<pre>','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','token\x20is\x20expired','add','prevnumber','process\x20','InsufficientFunds','\x20|\x20exchange:\x20','\x20>\x20pausing\x20bot\x20for\x20','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','cancelOrders()','%\x20(','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','unlinkSync','distribution','1\x20-\x20Handle\x20open\x20orders','restart','Order\x20filled:\x20','Invalid\x20symbol:\x20',')\x20|\x20exchange:\x20','Portfolio\x20change\x20detected:\x20','2857064ubPDDg','freeze',',\x20must\x20be\x20a\x203\x20digit\x20number','recreate','\x20|\x20','yyyy/MM/dd','sendPortfolioTelegram','uncaughtException','change','</pre>','Huobi','basecoin','pro','balancing\x20resumes\x20when\x20cooldown\x20ends','util','realized','2.3.5','Cex','Order(s)\x20not\x20validated\x20after\x20','side','no\x20open\x20orders','status\x20code\x20401','switch-manual','\x20MB','getDate','customId','\x20API\x20key,\x20secret\x20or\x20password\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','\x20|\x20lock\x20orders:\x20','ongoing','coins','watchTradesForSymbols','date-fns','-performance.json','set','ExchangeNotAvailable','portfolio1','showConfig','Initializing\x20exchange:\x20already\x20done','debug','timeshift',':\x20timer\x20>','createOrder','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','ETH','\x20-\x20bot\x20already\x20running\x20in\x20manual\x20mode','2.6.0','./version.json','toFixed','getMonth','update-liquidity','fee','limit','\x20|\x20highest\x20fee:\x20','\x20/\x20','0\x20-\x20EXECUTION:\x20','forEach','net-fiat','placeOrder()','watchTrades','mkdirSync','logs','total','Portfolio\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','bot','breakeven','Error\x20details:','timeout','lowdb','InvalidOrder','emojibuy','watchOrders()','Exchange\x20permission\x20denied\x20-\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','watchTrades()','Headless:\x20','performance','filter','exchange\x20reload','final','must\x20be\x20greater\x20than\x20minimum\x20amount','apiPassword','orderstatus','Bitget','padEnd','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','\x20portfolio:</b>\x20\x0a\x0a','18wRxTtB','startnumber','Error\x20details:\x20','closed','status','filled','valid','sell','RSA-OAEP','event','\x20hour','configstate','success','market','split','2.6.23','kill','enabled','2\x20-\x20Validate\x20orders:\x20','recent20','-results.json','get','length','includes','request-time','quote','***','Unknown\x20error:\x20','001','ID:\x20'];_0x9856=function(){return _0x3e90b4;};return _0x9856();}function updateHighestFee(_0x36c592){const _0x515f96=_0x44a322;if(_0x36c592[_0x515f96(0x11c)]){let _0x51499b={'filled':_0x36c592[_0x515f96(0x1cd)]*_0x36c592[_0x515f96(0x113)],'amount':_0x36c592['filled']*_0x36c592[_0x515f96(0x113)],'side':_0x36c592[_0x515f96(0x186)]==_0x515f96(0x1cf)?'buy':_0x515f96(0x1cf),'price':0x1/_0x36c592['price']};_0x36c592={..._0x36c592,..._0x51499b};}const _0x27f397=defaultFee*_0x36c592[_0x515f96(0x1cd)]*_0x36c592[_0x515f96(0x113)];lastFees['recent20'][_0x515f96(0x1de)]===0x14&&lastFees[_0x515f96(0x1db)][_0x515f96(0xd4)](),lastFees[_0x515f96(0x1db)][_0x515f96(0x25e)](_0x27f397),lastFees[_0x515f96(0xe5)]=Math[_0x515f96(0xd3)](...lastFees['recent20']);}async function updateNumberCoinsCcxt(_0xc5816a){const _0x254c1c=_0x44a322;logger['debug'](_0x254c1c(0x1a9)+_0xc5816a['symbol']+_0x254c1c(0x177)+_0xc5816a['status']+_0x254c1c(0x177)+_0xc5816a[_0x254c1c(0x1cd)]+_0x254c1c(0x1a8)+_0xc5816a[_0x254c1c(0x1f6)]+_0x254c1c(0x177)+_0xc5816a['id']);let _0x37b44f=_0xc5816a[_0x254c1c(0x1cc)],_0x30eb63=![];currentCoins[_0x254c1c(0x1aa)](_0x3994a6=>{const _0x3c3484=_0x254c1c;_0x3994a6[_0x3c3484(0x228)]==_0xc5816a[_0x3c3484(0x228)]&&(_0x30eb63=!![]);});if(!_0x30eb63)return;const _0x26c467=currentCoins['find'](_0x173d3f=>_0x173d3f['symbol']==_0xc5816a[_0x254c1c(0x228)]),_0x18a01f=_0x26c467[_0x254c1c(0x1ec)],_0x4752c1=_0x4f9d76=>{const _0x14c129=_0x254c1c,_0x30c10a=currentCoins[_0x14c129(0x112)](_0x41ad46=>_0x41ad46['symbol']==_0xc5816a[_0x14c129(0x228)]);if(_0x30c10a)_0x30c10a[_0x14c129(0x1c3)]=_0x4f9d76;};let _0x12cb08=![];for(const _0x3ab3d3 of lastOrders){const _0x53e786=0x64,_0x2c06c2=0x1388;let _0x27f2c6=0x0;while(!_0x3ab3d3[_0x254c1c(0xed)]&&_0x27f2c6*_0x53e786<_0x2c06c2){_0x27f2c6++,await sleep(_0x53e786);}if(_0x27f2c6>0x0)logger[_0x254c1c(0x199)](_0x254c1c(0x206)+_0x27f2c6*_0x53e786/0x3e8+_0x254c1c(0x167));_0x3ab3d3[_0x254c1c(0xed)]==_0xc5816a['id']&&(_0x12cb08=!![]);}if(_0x37b44f==_0x254c1c(0xc0)){_0x4752c1(_0x254c1c(0xc0));if(_0xc5816a[_0x254c1c(0x1cd)]>0x0&&_0xc5816a[_0x254c1c(0x1cd)]<_0xc5816a[_0x254c1c(0x1f6)]){if(_0x12cb08){setBlockTransactionDetection(!![]),logger[_0x254c1c(0x199)]('1\x20-\x20partially\x20FILLED\x20('+_0xc5816a[_0x254c1c(0x1cd)]+')\x20known\x20order:\x20'+_0xc5816a['id']);const _0x5ca52e=await getCoins(balanceUpdateDelay,undefined,undefined,_0x18a01f);[currentCoins,currentCoinsAll]=_0x5ca52e,setBlockTransactionDetection(![]);}else logger['debug'](_0x254c1c(0xb4)+_0xc5816a['filled']+_0x254c1c(0x1f1)+_0xc5816a['id']),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay);}}else{if(_0x37b44f=='canceled'){_0x4752c1(_0x254c1c(0x151)),lastOrders=lastOrders['filter'](_0x11a476=>_0x11a476['symbol']!=_0xc5816a['symbol']);const _0x58a52f=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x58a52f,setBlockTransactionDetection(![]),await getOpenOrders(),handleOpenOrders();}else{if(_0x37b44f==_0x254c1c(0x1cb)){if(lastOrders)for(const _0x38d858 of lastOrders){if(_0x38d858[_0x254c1c(0xed)]==_0xc5816a['id']){logger[_0x254c1c(0x199)]('1\x20-\x20FILLED\x20known\x20order:\x20'+_0xc5816a['id']),_0x12cb08=!![];if(_0x38d858[_0x254c1c(0x1cd)]==0x0){setBlockTransactionDetection(!![]),logger[_0x254c1c(0x199)]('2\x20-\x20handling\x20FILLED\x20order:\x20'+_0xc5816a['id']);if(_0xc5816a[_0x254c1c(0x142)])_0x38d858[_0x254c1c(0x113)]=_0xc5816a[_0x254c1c(0x142)];else{if(_0xc5816a[_0x254c1c(0x113)])_0x38d858[_0x254c1c(0x113)]=_0xc5816a[_0x254c1c(0x113)];else{}}_0x38d858[_0x254c1c(0x1cd)]=_0xc5816a['filled'],updateHighestFee(_0x38d858);const _0x2ad23b=await getCoins(balanceUpdateDelay,undefined,undefined,_0x18a01f);[currentCoins,currentCoinsAll]=_0x2ad23b,setBlockTransactionDetection(![]),await validateOrders(),_0x4752c1(_0x254c1c(0x1cd)),_0x38d858['fee']={'currency':_0xc5816a[_0x254c1c(0x1a5)]?_0xc5816a[_0x254c1c(0x1a5)][_0x254c1c(0x21d)]:null,'cost':_0xc5816a['fee']?_0xc5816a[_0x254c1c(0x1a5)][_0x254c1c(0xdc)]:0x0},await updateCoinResults(_0x38d858);}}}!_0x12cb08&&(logger[_0x254c1c(0x199)](_0x254c1c(0x11d)+_0xc5816a['id']),_0x4752c1(_0x254c1c(0x1cd)),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay),await updateOpenOrders(),handleOpenOrders());}}}if(lastBalances){let _0x5a00da=JSON[_0x254c1c(0x11b)](lastBalances[_0x254c1c(0xfe)]);const _0x1a6418=_0x5a00da[_0x254c1c(0x112)](_0x521a0f=>_0x521a0f[_0x254c1c(0x228)]==_0xc5816a['symbol']);if(_0x1a6418){if(_0x37b44f==_0x254c1c(0xc0))_0x1a6418['orderstatus']=_0x1a6418['orderstatus']==_0x254c1c(0x1cd)?_0x254c1c(0x1cd):_0x254c1c(0xc0);else{if(_0x37b44f=='canceled')_0x1a6418[_0x254c1c(0x1c3)]=_0x1a6418[_0x254c1c(0x1c3)]==_0x254c1c(0x1cd)?_0x254c1c(0x1cd):'canceled';else _0x37b44f==_0x254c1c(0x1cb)&&(_0x1a6418['orderstatus']=_0x254c1c(0x1cd));}}lastBalances={...lastBalances,'portfolio':JSON[_0x254c1c(0x23c)](_0x5a00da)},proxyEmit(_0x254c1c(0xd8),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){await getOpenOrders();let _0x4d9934=![];currentCoins['forEach'](_0x1f3abc=>{const _0x1d2d08=_0x49c2;_0x4d9934=allOpenOrders[_0x1d2d08(0x112)](_0x1da38e=>_0x1da38e[_0x1d2d08(0x228)]==_0x1f3abc[_0x1d2d08(0x228)]),_0x1f3abc[_0x1d2d08(0x1c3)]=_0x4d9934?_0x1d2d08(0xc0):_0x1d2d08(0x201);});}async function fetchBalance(_0x527362=!![]){const _0x5b24e4=_0x44a322;let _0x59602a,_0x1a6d57;try{return _0x59602a=await exchange[_0x5b24e4(0x107)](),_0x1a6d57=_0x59602a[_0x5b24e4(0x1b0)],_0x1a6d57;}catch(_0x5c6797){return!_0x527362?handleErrorNoStop(_0x5c6797,'fetchBalance()'):await handleError(_0x5c6797,_0x5b24e4(0x146)),![];}}async function getCoins(_0x38d0ac=0x0,_0x54a76e=!![],_0x2f81bb=config['basecoin'],_0x318862){const _0x104c0b=_0x44a322;let _0x5a7ade=[],_0x192c7e=[],_0x2e8603=[],_0x58799a;if(_0x38d0ac)await sleep(_0x38d0ac);if(botPaused)return[currentCoins,currentCoinsAll];let _0x55b3f8=![],_0x50008e=0x0,_0x5306e0,_0x22ea4d;_0x318862&&(_0x5306e0=currentCoins[_0x104c0b(0x112)](_0x45db7a=>_0x45db7a[_0x104c0b(0x1ec)]==_0x318862),_0x5306e0&&(_0x22ea4d=_0x5306e0[_0x104c0b(0x162)],delete _0x5306e0['prevnumber']));while(!_0x55b3f8){_0x58799a=await fetchBalance(_0x54a76e);if(_0x58799a){if(_0x318862){if(_0x58799a[_0x318862]!=_0x22ea4d)logger[_0x104c0b(0x199)](_0x104c0b(0xf5)+_0x318862+':\x20'+_0x58799a[_0x318862]+'\x20('+_0x22ea4d+')'),_0x55b3f8=!![];else{logger['debug'](_0x104c0b(0x13a)+_0x318862+':\x20'+_0x58799a[_0x318862]+'\x20('+_0x22ea4d+')'),_0x50008e++;if(_0x50008e<balanceUpdateRetries)await sleep(balanceUpdateDelay);else{logger['debug'](_0x104c0b(0x233)+_0x50008e+'\x20attempts');break;}}}else break;}else return[currentCoins,currentCoinsAll];}for(const [_0x6c3105,_0xc5435]of Object[_0x104c0b(0x24c)](_0x58799a)){_0x2e8603[_0x104c0b(0x25e)](_0x6c3105);}config[_0x104c0b(0xfe)][_0x104c0b(0x1aa)](_0x26bca7=>{const _0x128c23=_0x104c0b;!_0x2e8603[_0x128c23(0x1df)](_0x26bca7[_0x128c23(0x1ec)])&&(_0x58799a[_0x26bca7['coin']]=0x0);});if(_0x2f81bb=='')for(const [_0x917f10,_0x22bac9]of Object[_0x104c0b(0x24c)](_0x58799a)){_0x22bac9!=0x0&&_0x5a7ade['push']({'coin':_0x917f10});}else for(const [_0x2d2bde,_0x491d9b]of Object[_0x104c0b(0x24c)](_0x58799a)){const _0x57325=config[_0x104c0b(0xfe)][_0x104c0b(0x112)](_0x3665b4=>_0x3665b4['coin']==_0x2d2bde),_0x3ff24f=_0x2d2bde+'/'+_0x2f81bb,_0x2612ba=_0x2f81bb+'/'+_0x2d2bde,_0x11d51b=currentCoins['find'](_0x50e75b=>_0x50e75b[_0x104c0b(0x1ec)]==_0x2d2bde);if((_0x491d9b!=0x0||_0x57325)&&(allSymbols[_0x104c0b(0x1df)](_0x3ff24f)||_0x2d2bde==_0x2f81bb))_0x11d51b?_0x5a7ade['push']({..._0x11d51b,'number':Math[_0x104c0b(0xd3)](_0x491d9b+(_0x57325&&_0x57325[_0x104c0b(0x156)]||0x0),0x0)}):_0x5a7ade['push']({'coin':_0x2d2bde,'symbol':_0x3ff24f,'reverse':![],'number':Math['max'](_0x491d9b+(_0x57325&&_0x57325['offset']||0x0),0x0),'orderstatus':'none'});else{if((_0x491d9b!=0x0||_0x57325)&&allSymbols[_0x104c0b(0x1df)](_0x2612ba))_0x11d51b?_0x5a7ade[_0x104c0b(0x25e)]({..._0x11d51b,'number':Math[_0x104c0b(0xd3)](_0x491d9b+(_0x57325&&_0x57325['offset']||0x0),0x0)}):_0x5a7ade[_0x104c0b(0x25e)]({'coin':_0x2d2bde,'symbol':_0x2612ba,'reverse':!![],'number':Math[_0x104c0b(0xd3)](_0x491d9b+(_0x57325&&_0x57325['offset']||0x0),0x0),'orderstatus':_0x104c0b(0x201)});else _0x57325&&_0x5a7ade[_0x104c0b(0x25e)]({'coin':_0x57325['coin'],'symbol':_0x57325['symbol'],'reverse':_0x57325[_0x104c0b(0x11c)],'number':0x0,'orderstatus':'none'});}}return _0x5a7ade[_0x104c0b(0x260)]((_0x29178a,_0x5afa38)=>_0x29178a[_0x104c0b(0x277)]<_0x5afa38['delta']?0x1:_0x5afa38['delta']<_0x29178a[_0x104c0b(0x277)]?-0x1:0x0),_0x192c7e=cloneDeep(_0x5a7ade),_0x5a7ade=_0x5a7ade[_0x104c0b(0x1be)](_0x393daa=>{const _0x30369b=_0x104c0b,_0x567293=config[_0x30369b(0xfe)]['find'](_0xfede23=>_0xfede23[_0x30369b(0x1ec)]==_0x393daa[_0x30369b(0x1ec)]);return _0x567293&&!_0x567293[_0x30369b(0xbb)];}),[_0x5a7ade,_0x192c7e];}async function getCoinNumber(_0x2d3ee6){const _0x58944a=_0x44a322;let _0x28e844;try{const _0x43376f=await exchange[_0x58944a(0x107)]();_0x28e844=_0x43376f[_0x58944a(0x1b0)][_0x2d3ee6];}catch(_0x18100d){await handleError(_0x18100d,'getCoinNumber()');}return _0x28e844;}async function getOpenOrders(){const _0x3ee46d=_0x44a322;let _0x2e87b1;allOpenOrders=[];try{for(const _0xe747e8 of config[_0x3ee46d(0xfe)]){!_0xe747e8[_0x3ee46d(0xbb)]&&_0xe747e8[_0x3ee46d(0x1ec)]!=config['basecoin']&&(_0x2e87b1=await exchange[_0x3ee46d(0x125)](_0xe747e8[_0x3ee46d(0x228)]),_0x2e87b1['length']>0x0&&allOpenOrders[_0x3ee46d(0x25e)](_0x2e87b1[0x0]));}}catch(_0x1c155e){await handleError(_0x1c155e,'getOpenOrders()');}}async function handleOpenOrders(_0x16a548=0x0){const _0x579ae0=_0x44a322;allOpenOrders[_0x579ae0(0x1de)]==0x0&&lockOrders==ORDERS[_0x579ae0(0x25b)]&&allOrdersPlaced&&(_0x16a548==0x0?(logger[_0x579ae0(0x199)](_0x579ae0(0x16d)),_0x16a548++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x579ae0(0x199)](_0x579ae0(0x122)),validateOrders(_0x579ae0(0x187))));}async function testAPI(_0x129826){const _0x40e7b2=_0x44a322;logger['debug']('Test\x20API');const _0x23981e=ccxt[_0x40e7b2(0x17f)][_0x129826[_0x40e7b2(0xe2)][_0x40e7b2(0xd2)]()],_0x4c7a2e=new _0x23981e({'apiKey':_0x129826[_0x40e7b2(0x20e)],'secret':_0x129826['apiSecret'],'options':{'defaultType':_0x40e7b2(0x12c)}});if(_0x129826[_0x40e7b2(0x1c2)])_0x4c7a2e[_0x40e7b2(0x263)]=_0x129826[_0x40e7b2(0x1c2)];try{await _0x4c7a2e[_0x40e7b2(0x107)]();}catch(_0x324cac){logger[_0x40e7b2(0x199)]('Error\x20in\x20testAPI():\x20'+_0x324cac[_0x40e7b2(0x144)]());throw _0x324cac;}}function cloneDeep(_0x4b2ffa){const _0x3b9ff9=_0x44a322;return JSON[_0x3b9ff9(0x11b)](JSON[_0x3b9ff9(0x23c)](_0x4b2ffa));}async function getPortfolio(_0x4f421a){const _0x17bb65=_0x44a322;let _0x4b9df6=[],_0x51e2d3=[],_0x308df6=[],_0x2920f6;_0x4f421a['apiKey']=decryptRSA(secure[_0x17bb65(0xd9)],_0x4f421a[_0x17bb65(0x20e)]),_0x4f421a[_0x17bb65(0x252)]=decryptRSA(secure[_0x17bb65(0xd9)],_0x4f421a[_0x17bb65(0x252)]);if(_0x4f421a[_0x17bb65(0x1c2)])_0x4f421a[_0x17bb65(0x1c2)]=decryptRSA(secure[_0x17bb65(0xd9)],_0x4f421a[_0x17bb65(0x1c2)]);if(_0x4f421a['apiKey']!=='************'||_0x4f421a[_0x17bb65(0x252)]!==_0x17bb65(0x23a)||_0x4f421a['apiPassword']&&_0x4f421a[_0x17bb65(0x1c2)]!==_0x17bb65(0x23a)){if(config['exchange']){if(_0x4f421a[_0x17bb65(0x20e)]==_0x17bb65(0x23a))_0x4f421a[_0x17bb65(0x20e)]=config[_0x17bb65(0x20e)];if(_0x4f421a[_0x17bb65(0x252)]==_0x17bb65(0x23a))_0x4f421a['apiSecret']=config[_0x17bb65(0x252)];if(_0x4f421a[_0x17bb65(0x1c2)]==_0x17bb65(0x23a))_0x4f421a[_0x17bb65(0x1c2)]=config[_0x17bb65(0x1c2)];}try{if(_0x4f421a['testApi'])await testAPI(_0x4f421a);}catch(_0xbe51ac){if(_0xbe51ac[_0x17bb65(0x144)]()[_0x17bb65(0x1df)]('AuthenticationError')){logHistory(_0x17bb65(0x205),_0x17bb65(0x25d)),logHistory('error',_0x17bb65(0x1ca)+_0xbe51ac['toString']()),proxyEmit(_0x17bb65(0x196),![]);return;}else{if(_0xbe51ac[_0x17bb65(0x144)]()[_0x17bb65(0x1df)]('PermissionDenied')){logHistory(_0x17bb65(0x205),_0x17bb65(0x1ba)),logHistory('error',_0x17bb65(0x1ca)+_0xbe51ac[_0x17bb65(0x144)]()),proxyEmit('portfolio1',![]);return;}else{logHistory(_0x17bb65(0x205),_0x17bb65(0x138)+_0xbe51ac[_0x17bb65(0x144)]()),logger[_0x17bb65(0x199)]('Error\x20details:',_0xbe51ac),proxyEmit(_0x17bb65(0x196),![]);return;}}}exchange?updateExchange(_0x4f421a[_0x17bb65(0x20e)],_0x4f421a['apiSecret'],_0x4f421a[_0x17bb65(0x1c2)]):await initExchange(_0x4f421a[_0x17bb65(0xe2)],_0x4f421a[_0x17bb65(0x20e)],_0x4f421a['apiSecret'],_0x4f421a[_0x17bb65(0x1c2)]);await loadSymbols();const _0x3529b5=await getCoins(0x0,![],_0x4f421a['basecoin']);_0x308df6=cloneDeep(_0x3529b5[0x1]);}else{const _0x5aefb4=await getCoins();_0x308df6=cloneDeep(_0x5aefb4[0x1]);}if(_0x4f421a[_0x17bb65(0x17e)]=='')proxyEmit(_0x17bb65(0x196),!![]),proxyEmit(_0x17bb65(0xb2),_0x308df6);else{_0x308df6[_0x17bb65(0x1aa)](_0x187b2f=>{const _0x3b487f=_0x17bb65;if(_0x187b2f[_0x3b487f(0x1ec)]!=_0x4f421a['basecoin']&&allSymbols[_0x3b487f(0x1df)](_0x187b2f['symbol']))_0x4b9df6[_0x3b487f(0x25e)](_0x187b2f['symbol']);});if(_0x4b9df6[_0x17bb65(0x1de)]==0x0)logHistory(_0x17bb65(0x205),_0x17bb65(0x21f));else{try{_0x51e2d3=await getTickers(_0x4b9df6);}catch(_0x5a59e2){logHistory(_0x17bb65(0x205),_0x17bb65(0x209)),logger['debug']('Error\x20details:',_0x5a59e2),proxyEmit(_0x17bb65(0x196),![]);return;}_0x308df6['forEach'](_0x1e7f7=>{const _0x5b0957=_0x17bb65;_0x1e7f7[_0x5b0957(0x1ec)]!=_0x4f421a[_0x5b0957(0x17e)]?_0x51e2d3[_0x1e7f7[_0x5b0957(0x228)]]?_0x2920f6=_0x1e7f7[_0x5b0957(0x11c)]?0x1/_0x51e2d3[_0x1e7f7[_0x5b0957(0x228)]][_0x5b0957(0x120)]:_0x51e2d3[_0x1e7f7[_0x5b0957(0x228)]][_0x5b0957(0x120)]:_0x2920f6=0x0:_0x2920f6=0x1,_0x1e7f7[_0x5b0957(0x113)]=formatResult(_0x2920f6,0x8);}),await getMarketCap(_0x308df6),proxyEmit(_0x17bb65(0x196),!![]),proxyEmit(_0x17bb65(0xb2),_0x308df6);}}}function truncateTradeAmount(_0x38b0a5,_0xb1e8b7){const _0x15c670=_0x44a322;let _0x4e313f=0x0;try{_0x4e313f=exchange[_0x15c670(0xc8)](_0x38b0a5,_0xb1e8b7);}catch(_0x1eedb3){}return _0x4e313f;}function checkMinimums(_0x4f3861){const _0x5973c7=_0x44a322;let _0xddd1f=!![];const _0x56de7d=!_0x4f3861['reverse']?markets[_0x4f3861[_0x5973c7(0x228)]][_0x5973c7(0xe0)]['amount'][_0x5973c7(0x235)]:markets[_0x4f3861['symbol']]['limits'][_0x5973c7(0xdc)]['min'],_0x56dc63=!_0x4f3861[_0x5973c7(0x11c)]?markets[_0x4f3861[_0x5973c7(0x228)]]['limits'][_0x5973c7(0xdc)][_0x5973c7(0x235)]:markets[_0x4f3861[_0x5973c7(0x228)]][_0x5973c7(0xe0)][_0x5973c7(0x1f6)][_0x5973c7(0x235)],_0x5b1ef6=truncateTradeAmount(_0x4f3861[_0x5973c7(0x228)],_0x4f3861['trade']);_0x4f3861[_0x5973c7(0x273)]=_0x5b1ef6;if(Math[_0x5973c7(0x158)](_0x5b1ef6)<_0x56de7d)_0xddd1f=![];if(Math['abs'](_0x5b1ef6)*_0x4f3861[_0x5973c7(0x120)]<_0x56dc63)_0xddd1f=![];if(_0x4f3861[_0x5973c7(0x186)]==_0x5973c7(0x1cf)){let _0xe57b10=config[_0x5973c7(0xfe)][_0x5973c7(0x112)](_0x4a0678=>_0x4a0678['coin']==_0x4f3861[_0x5973c7(0x1ec)]);if(_0xe57b10['offset']>0x0){if(Math[_0x5973c7(0x158)](_0x5b1ef6)>_0x4f3861[_0x5973c7(0xfb)]-_0xe57b10['offset'])_0xddd1f=![];}else{if(Math['abs'](_0x5b1ef6)>_0x4f3861[_0x5973c7(0xfb)])_0xddd1f=![];}}if(_0x4f3861['side']==_0x5973c7(0x24f)){let _0x58736e=config[_0x5973c7(0xfe)][_0x5973c7(0x112)](_0x2eab3b=>_0x2eab3b[_0x5973c7(0x1ec)]==config['basecoin']),_0x363ac2=currentCoins['find'](_0xdd179b=>_0xdd179b[_0x5973c7(0x1ec)]==config[_0x5973c7(0x17e)]);if(_0x58736e[_0x5973c7(0x156)]>0x0){if(Math[_0x5973c7(0x158)](_0x5b1ef6)*_0x4f3861['last']>_0x363ac2[_0x5973c7(0xfb)]-_0x58736e[_0x5973c7(0x156)])_0xddd1f=![];}else{if(Math['abs'](_0x5b1ef6)*_0x4f3861['last']>_0x363ac2[_0x5973c7(0xfb)])_0xddd1f=![];}}return _0xddd1f;}async function getBalances(_0x28f083=!![]){const _0x3c9421=_0x44a322;if(botPaused)return;let _0x295726=0x0,_0x3da8fc;const _0x1362b3=config[_0x3c9421(0x1f2)];if(config[_0x3c9421(0x26a)]&&config[_0x3c9421(0xce)]<0x0)await validate24hChanges();currentCoins[_0x3c9421(0x1aa)](_0x32da00=>{const _0x5edc29=_0x3c9421;if(_0x32da00[_0x5edc29(0x1ec)]!=config[_0x5edc29(0x17e)]){let _0x4d59f1=gTicker[noslash(_0x32da00[_0x5edc29(0x228)])];_0x3da8fc=_0x32da00[_0x5edc29(0x11c)]?0x1/_0x4d59f1:_0x4d59f1;}else _0x3da8fc=0x1;let _0x3dbccf=_0x32da00[_0x5edc29(0xfb)]*_0x3da8fc;_0x295726+=_0x3dbccf,_0x32da00[_0x5edc29(0x120)]=formatResult(Number(_0x3da8fc),0x8),_0x32da00[_0x5edc29(0x23f)]=_0x3dbccf;}),currentCoins[_0x3c9421(0x1aa)](_0x268a35=>{const _0x2d5080=_0x3c9421;let _0x2650c9=config[_0x2d5080(0xfe)]['find'](_0xb128fa=>_0xb128fa[_0x2d5080(0x1ec)]==_0x268a35[_0x2d5080(0x1ec)]),_0x1b12f4=Number(_0x2650c9['distribution']),_0xd3a88e=_0x268a35[_0x2d5080(0x23f)]/_0x295726*0x64,_0x12d511=_0x1b12f4*_0x295726/0x64/_0x268a35['last']-_0x268a35[_0x2d5080(0xfb)];_0x268a35[_0x2d5080(0x16c)]=formatResult(_0xd3a88e,0x3),_0x268a35[_0x2d5080(0x159)]=formatResult(_0x1b12f4,0x3),_0x268a35[_0x2d5080(0x273)]=formatResult(_0x12d511,0x8),_0x268a35[_0x2d5080(0x186)]='',_0x268a35[_0x2d5080(0x1ce)]=![];if(_0x268a35['coin']!=config[_0x2d5080(0x17e)]){if(_0x268a35[_0x2d5080(0x16c)]>_0x1b12f4)_0x268a35[_0x2d5080(0x186)]=_0x2d5080(0x1cf),_0x268a35[_0x2d5080(0x1ce)]=checkMinimums(_0x268a35);else _0x268a35[_0x2d5080(0x16c)]<_0x1b12f4&&(_0x268a35[_0x2d5080(0x186)]=_0x2d5080(0x24f),_0x268a35[_0x2d5080(0x1ce)]=checkMinimums(_0x268a35));}_0x268a35[_0x2d5080(0x277)]=_0x268a35[_0x2d5080(0x16c)]/_0x268a35['target']-0x1;if(_0x268a35[_0x2d5080(0x1c3)]==_0x2d5080(0x1cd)||_0x268a35[_0x2d5080(0x1c3)]==_0x2d5080(0x151))_0x268a35['orderstatus']=_0x2d5080(0x201);}),currentCoins[_0x3c9421(0x260)]((_0x5c3d42,_0x139971)=>_0x5c3d42['delta']<_0x139971[_0x3c9421(0x277)]?0x1:_0x139971[_0x3c9421(0x277)]<_0x5c3d42[_0x3c9421(0x277)]?-0x1:0x0);const _0x295730=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x295730[_0x3c9421(0x227)],'usd':_0x295730[_0x3c9421(0x149)],'portfolio':JSON[_0x3c9421(0x23c)](currentCoins),'threshold':_0x1362b3},proxyEmit(_0x3c9421(0xd8),{'serverversion':serverversion,'balances':lastBalances});if(_0x28f083){if(config[_0x3c9421(0x26a)])headlessMode({'portfolio':currentCoins,'threshold':_0x1362b3});else lockOrders==ORDERS['UNLOCKED']&&!coolingDown&&notifyBalance({'portfolio':currentCoins,'threshold':_0x1362b3});}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x221f64=getNormalizedPerformance();getStartingBalances(_0x221f64),emitPerformance(_0x221f64);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x1c8e22=_0x44a322;if(!lastBalances)return;let _0x42c440=[],_0x34dfb5,_0x37c9b5=JSON[_0x1c8e22(0x11b)](lastBalances[_0x1c8e22(0xfe)]);_0x37c9b5['sort']((_0x23ad94,_0x264aa8)=>_0x23ad94[_0x1c8e22(0x1ec)]>_0x264aa8['coin']?0x1:_0x264aa8[_0x1c8e22(0x1ec)]>_0x23ad94[_0x1c8e22(0x1ec)]?-0x1:0x0),_0x37c9b5[_0x1c8e22(0x1aa)](_0x12e52b=>{const _0x4939c7=_0x1c8e22;let _0x420e86={'coin':_0x12e52b[_0x4939c7(0x1ec)],'number':_0x12e52b['number'],'price':_0x12e52b[_0x4939c7(0x120)]};_0x42c440[_0x4939c7(0x25e)](_0x420e86);});const _0x40c504=await getFiat();_0x34dfb5={'date':lastBalances[_0x1c8e22(0x25f)][_0x1c8e22(0x1d6)]('\x20')[0x0],'eur':_0x40c504['eur'],'usd':_0x40c504[_0x1c8e22(0x149)],'coins':_0x42c440};let _0x34063d=dbPerformance[_0x1c8e22(0x1dd)](_0x1c8e22(0x239))[_0x1c8e22(0x112)]({'date':_0x34dfb5[_0x1c8e22(0x132)]})[_0x1c8e22(0x23f)]();_0x34063d?_0x34dfb5[_0x1c8e22(0x132)]!=config[_0x1c8e22(0x24d)]&&dbPerformance['get'](_0x1c8e22(0x239))['find']({'date':_0x34dfb5[_0x1c8e22(0x132)]})[_0x1c8e22(0x1ea)](_0x34dfb5)[_0x1c8e22(0x247)]():dbPerformance[_0x1c8e22(0x1dd)]('data')[_0x1c8e22(0x25e)](_0x34dfb5)[_0x1c8e22(0x247)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x248707=_0x44a322;let _0x43333d=[];if(dbPerformance[_0x248707(0x128)](_0x248707(0x239))[_0x248707(0x23f)]()){let _0x3ed1ca=dbPerformance[_0x248707(0x1dd)](_0x248707(0x239))['cloneDeep']()[_0x248707(0x1be)](_0x1d83f4=>{const _0x149390=_0x248707;if(_0x1d83f4[_0x149390(0x190)]['length']==0x0)return![];else return!![];})['sortBy']('date')[_0x248707(0x23f)](),_0x2c8d73=[...config[_0x248707(0x248)]];_0x2c8d73['sort']((_0x260986,_0x4d49a4)=>_0x260986[_0x248707(0x132)]>_0x4d49a4[_0x248707(0x132)]?-0x1:_0x4d49a4['date']>_0x260986[_0x248707(0x132)]?0x1:0x0);let _0x2b0e80=0x1,_0xae7be7=[],_0x47ded2=0x0;_0x3ed1ca['slice']()[_0x248707(0x11c)]()[_0x248707(0x1aa)]((_0x349580,_0x20885d)=>{const _0x149fcc=_0x248707;if(_0x2c8d73[_0x47ded2]){if(_0x3ed1ca[_0x3ed1ca[_0x149fcc(0x1de)]-_0x20885d]&&_0x2c8d73[_0x47ded2][_0x149fcc(0x132)]==_0x3ed1ca[_0x3ed1ca['length']-_0x20885d]['date']){if(_0x20885d<_0x3ed1ca['length']){let _0x525f97=0x0,_0xb10460=0x0;_0x3ed1ca[_0x3ed1ca['length']-_0x20885d]['coins'][_0x149fcc(0x1aa)](_0x3fd617=>{_0xb10460+=_0x3fd617['number']*_0x3fd617['price'];}),_0x2c8d73[_0x47ded2]['changes'][_0x149fcc(0x1aa)](_0x5a864f=>{const _0x269c51=_0x149fcc;_0x525f97+=_0x5a864f[_0x269c51(0xfb)]*_0x5a864f['price'];}),_0x2b0e80*=_0x525f97/(_0xb10460-_0x525f97)+0x1;}_0x47ded2++;}}let _0x2a8c8f=0x0;_0x349580['coins'][_0x149fcc(0x1aa)](_0x1c55c8=>{const _0x1a693d=_0x149fcc;_0x2a8c8f+=_0x1c55c8[_0x1a693d(0xfb)]*_0x1c55c8['price'];}),_0xae7be7[_0x3ed1ca['length']-_0x20885d-0x1]=_0x2a8c8f*(_0x2b0e80-0x1);});let _0x11107a=[];_0x2c8d73=[...config['liquidity']]||[];let _0x40dadf=0x0;_0x47ded2=0x0,_0x3ed1ca[_0x248707(0x1aa)]((_0x3754b6,_0x5bfdbc)=>{const _0x4a45bd=_0x248707;if(_0x2c8d73[_0x47ded2]){const _0x3374d5=fns[_0x4a45bd(0x11b)](_0x2c8d73[_0x47ded2]['date'],_0x4a45bd(0x178),new Date()),_0xc53a2f=fns['parse'](_0x3754b6[_0x4a45bd(0x132)],_0x4a45bd(0x178),new Date());if(fns[_0x4a45bd(0xd5)](_0x3374d5,_0xc53a2f)){let _0x145754=0x0;_0x2c8d73[_0x47ded2][_0x4a45bd(0x26b)][_0x4a45bd(0x1aa)](_0x2c9a4f=>{const _0x1aaeba=_0x4a45bd;!_0x11107a[_0x2c9a4f['coin']]?_0x11107a[_0x2c9a4f[_0x1aaeba(0x1ec)]]=_0x2c9a4f[_0x1aaeba(0xfb)]:(_0x145754=_0x11107a[_0x2c9a4f[_0x1aaeba(0x1ec)]],_0x11107a[_0x2c9a4f[_0x1aaeba(0x1ec)]]+=_0x2c9a4f[_0x1aaeba(0xfb)]);const _0x1c36ca=_0x3754b6[_0x1aaeba(0x190)][_0x1aaeba(0x112)](_0x2fd8f6=>_0x2fd8f6[_0x1aaeba(0x1ec)]==_0x2c9a4f[_0x1aaeba(0x1ec)]);(!_0x1c36ca||_0x1c36ca[_0x1aaeba(0xfb)]==0x0)&&(_0x40dadf+=(-_0x2c9a4f[_0x1aaeba(0xfb)]-_0x145754)*_0x2c9a4f[_0x1aaeba(0x113)]);}),_0x47ded2++;}}_0x3754b6['coins']['forEach']((_0x54e1af,_0x168859)=>{_0x11107a[_0x54e1af['coin']]&&(_0x54e1af['initial']=_0x11107a[_0x54e1af['coin']]);}),_0x43333d['push']({'date':_0x3754b6[_0x4a45bd(0x132)],'eur':_0x3754b6[_0x4a45bd(0x227)],'usd':_0x3754b6[_0x4a45bd(0x149)],'offset':_0xae7be7[_0x5bfdbc],'netoffset':_0x40dadf,'coins':_0x3754b6[_0x4a45bd(0x190)]});});}return _0x43333d;}function emitPerformance(_0x4277b4){const _0x345774=_0x44a322;_0x4277b4[_0x345774(0x1de)]!==0x0?(proxyEmit('performance',_0x4277b4),lastPerformanceEmitted=getDate()):proxyEmit(_0x345774(0x1bd),[]);}function getPerf(_0x5db1c6,_0x4ef206){const _0x12f37b=_0x44a322;let _0x2cfd33=0x0,_0x485011=0x0,_0x5c2de9=0x0;_0x5db1c6[_0x12f37b(0x190)][_0x12f37b(0x1aa)](_0x417058=>{_0x2cfd33+=_0x417058['number']*_0x417058['price'];});_0x4ef206&&(_0x2cfd33+=_0x5db1c6[_0x12f37b(0x156)]);if(config[_0x12f37b(0x17e)]==='BTC'||config[_0x12f37b(0x17e)]==='ETH'||config[_0x12f37b(0x17e)]==='PAXG')_0x485011=_0x2cfd33*_0x5db1c6['eur'],_0x5c2de9=_0x2cfd33*_0x5db1c6['usd'];else{if(usdBasecoins[_0x12f37b(0x1df)](config[_0x12f37b(0x17e)]))_0x485011=_0x2cfd33*_0x5db1c6[_0x12f37b(0x227)]/_0x5db1c6[_0x12f37b(0x149)],_0x5c2de9=_0x2cfd33;else config[_0x12f37b(0x17e)]===_0x12f37b(0x14b)&&(_0x485011=_0x2cfd33,_0x5c2de9=_0x2cfd33*_0x5db1c6[_0x12f37b(0x149)]/_0x5db1c6[_0x12f37b(0x227)]);}return[_0x2cfd33,_0x485011,_0x5c2de9];}function getKPIs(_0x2f507b,_0x38b6bc=_0x44a322(0x14b)){const _0x5556f4=_0x44a322,_0x352a53=config['basecoin'],_0x3c2353=lastBalances,_0x506212=currentCoins,_0x113ee0=getNormalizedPerformance(),_0x475929=_0x2f507b==='basecoin'?_0x352a53:_0x2f507b===_0x5556f4(0xf7)||_0x2f507b==='net-fiat'?_0x38b6bc:'Net\x20'+_0x352a53,_0x4ed378=_0x2f507b==='net-basecoin'?_0x5556f4(0x225):_0x2f507b===_0x5556f4(0x1ab)?_0x5556f4(0x225):_0x475929+_0x5556f4(0x207),_0x323e03=_0x2f507b===_0x5556f4(0x212)||_0x2f507b===_0x5556f4(0x1ab)?_0x5556f4(0x225):_0x475929+'\x20change';let _0x545c1f=0x0;_0x506212[_0x5556f4(0x1aa)](_0x272d75=>{const _0x223332=_0x5556f4;_0x545c1f+=_0x272d75[_0x223332(0xfb)]*_0x272d75[_0x223332(0x120)];});if(_0x2f507b===_0x5556f4(0xf7)||_0x2f507b===_0x5556f4(0x1ab)){if(_0x352a53===_0x5556f4(0x204)||_0x352a53===_0x5556f4(0x19e)||_0x352a53===_0x5556f4(0x154))_0x545c1f=_0x545c1f*(_0x38b6bc===_0x5556f4(0x14b)?_0x3c2353[_0x5556f4(0x227)]:_0x3c2353[_0x5556f4(0x149)]);else{if(usdBasecoins['includes'](_0x352a53))_0x545c1f=_0x545c1f*(_0x38b6bc===_0x5556f4(0x14b)?_0x3c2353['eur']/_0x3c2353['usd']:0x1);else _0x352a53===_0x5556f4(0x14b)&&(_0x545c1f=_0x545c1f*(_0x38b6bc==='EUR'?0x1:_0x3c2353[_0x5556f4(0x149)]/_0x3c2353[_0x5556f4(0x227)]));}}let _0x1b231b;if(_0x545c1f!==0x0){if(_0x2f507b==='basecoin')_0x1b231b=(_0x545c1f/startingBalances[_0x5556f4(0x17e)]-0x1)*0x64;else{if(_0x38b6bc===_0x5556f4(0x14b))_0x1b231b=(_0x545c1f/startingBalances[_0x5556f4(0x227)]-0x1)*0x64;else _0x1b231b=(_0x545c1f/startingBalances[_0x5556f4(0x149)]-0x1)*0x64;}let _0x59e5e3=0x0;if(startingBalances['coins'])_0x506212['forEach'](_0x178170=>{const _0x374d49=_0x5556f4;let _0x247916=startingBalances['coins'][_0x374d49(0x112)](_0x4ae69a=>_0x4ae69a[_0x374d49(0x1ec)]===_0x178170[_0x374d49(0x1ec)]);if(_0x247916&&_0x247916['coin']&&_0x178170[_0x374d49(0xfb)]!==0x0)_0x59e5e3+=_0x247916[_0x374d49(0xfb)]*_0x178170[_0x374d49(0x120)];});let _0x441d93=0x0;if(_0x113ee0[_0x5556f4(0x1de)]!==0x0){let _0x2ffb87=_0x113ee0[_0x113ee0[_0x5556f4(0x1de)]-0x1];_0x441d93=_0x2ffb87['netoffset'];}_0x59e5e3-=_0x441d93;_0x2f507b===_0x5556f4(0x212)&&(_0x1b231b=(_0x545c1f-_0x59e5e3)/startingBalances[_0x5556f4(0x17e)]*0x64,_0x545c1f=_0x545c1f-_0x59e5e3);if(_0x2f507b===_0x5556f4(0x1ab)){let _0x302361=_0x38b6bc===_0x5556f4(0x14b)?startingBalances[_0x5556f4(0x227)]:startingBalances[_0x5556f4(0x149)];if(_0x352a53==='BTC'||_0x352a53===_0x5556f4(0x19e)||_0x352a53===_0x5556f4(0x154))_0x59e5e3=_0x38b6bc==='EUR'?_0x59e5e3*_0x3c2353[_0x5556f4(0x227)]:_0x59e5e3*_0x3c2353[_0x5556f4(0x149)];else{if(usdBasecoins[_0x5556f4(0x1df)](_0x352a53))_0x59e5e3=_0x38b6bc===_0x5556f4(0x14b)?_0x59e5e3*_0x3c2353[_0x5556f4(0x227)]/_0x3c2353['usd']:_0x59e5e3;else _0x352a53===_0x5556f4(0x14b)&&(_0x59e5e3=_0x38b6bc===_0x5556f4(0x14b)?_0x59e5e3:_0x59e5e3*_0x3c2353[_0x5556f4(0x149)]/_0x3c2353[_0x5556f4(0x227)]);}_0x1b231b=(_0x545c1f-_0x59e5e3)/_0x302361*0x64,_0x545c1f=_0x545c1f-_0x59e5e3;}if(_0x1b231b){if(_0x1b231b<0x64)_0x1b231b=_0x1b231b[_0x5556f4(0x1a2)](0x2);else{if(_0x1b231b<0x3e8)_0x1b231b=_0x1b231b['toFixed'](0x1);else _0x1b231b=_0x1b231b[_0x5556f4(0x1a2)](0x0);}}else _0x1b231b=Number('0')[_0x5556f4(0x1a2)](0x2);if(_0x545c1f){if(Math[_0x5556f4(0x158)](_0x545c1f)<0.000001)_0x545c1f=_0x545c1f['toFixed'](0x2);else{if(Math[_0x5556f4(0x158)](_0x545c1f)<0.1)_0x545c1f=_0x545c1f[_0x5556f4(0x1a2)](0x6);else{if(Math[_0x5556f4(0x158)](_0x545c1f)<0x1)_0x545c1f=_0x545c1f[_0x5556f4(0x1a2)](0x5);else{if(Math[_0x5556f4(0x158)](_0x545c1f)<0xa)_0x545c1f=_0x545c1f[_0x5556f4(0x1a2)](0x4);else{if(Math[_0x5556f4(0x158)](_0x545c1f)<0x64)_0x545c1f=_0x545c1f[_0x5556f4(0x1a2)](0x3);else{if(Math[_0x5556f4(0x158)](_0x545c1f)<0x3e8)_0x545c1f=_0x545c1f[_0x5556f4(0x1a2)](0x2);else _0x545c1f=_0x545c1f[_0x5556f4(0x1a2)](0x2);}}}}}}else _0x545c1f=Number('0')[_0x5556f4(0x1a2)](0x2);}else _0x1b231b=Number('0')[_0x5556f4(0x1a2)](0x2);return{'value':_0x545c1f,'change':_0x1b231b,'leftTxt':_0x4ed378,'rightTxt':_0x323e03};}async function getStartingBalances(_0x3b50bd,_0x23e6e2=!![]){const _0xca2ad0=_0x44a322;if(_0x3b50bd[_0xca2ad0(0x1de)]!==0x0){const [_0x1cbc9e,_0x5835fd,_0x3d3e3b]=getPerf(_0x3b50bd[0x0],!![]);let _0x45fde4=[];config[_0xca2ad0(0xfe)]['forEach'](_0xf29d0a=>{const _0x65af5a=_0xca2ad0;let _0x46e76a=0x0,_0x487fd3;config['liquidity'][_0x65af5a(0x1aa)](_0x2f803d=>{const _0x3a89e3=_0x65af5a;let _0x23d7d4=_0x2f803d[_0x3a89e3(0x26b)][_0x3a89e3(0x112)](_0x54ede2=>_0x54ede2['coin']==_0xf29d0a[_0x3a89e3(0x1ec)]);if(_0x23d7d4){_0x46e76a+=_0x23d7d4['number'];if(!_0x487fd3)_0x487fd3=_0x23d7d4[_0x3a89e3(0x113)];}}),_0x45fde4['push']({'coin':_0xf29d0a[_0x65af5a(0x1ec)],'number':_0x46e76a,'initialprice':_0x487fd3});});const _0x36226c={'basecoin':_0x1cbc9e,'eur':_0x5835fd,'usd':_0x3d3e3b,'coins':_0x45fde4};if(_0x23e6e2)proxyEmit(_0xca2ad0(0x238),_0x36226c);startingBalances=_0x36226c;}}function headlessMode(_0x30a9cd){const _0xc8b862=_0x44a322;let _0x378ada=_0x30a9cd[_0xc8b862(0xfe)],_0x4301c3=_0x30a9cd[_0xc8b862(0x1f2)],_0x374062=[];for(let _0x3a23e2 of _0x378ada){if(_0x3a23e2[_0xc8b862(0x1ec)]!=config[_0xc8b862(0x17e)]){if(_0x3a23e2[_0xc8b862(0x277)]>=_0x4301c3/0x64){if(_0x3a23e2[_0xc8b862(0x1ce)])_0x374062[_0xc8b862(0x25e)](_0x3a23e2);}else{if(_0x3a23e2[_0xc8b862(0x277)]<=-_0x4301c3/0x64){if(_0x3a23e2[_0xc8b862(0x1ce)])_0x374062[_0xc8b862(0x25e)](_0x3a23e2);}}}}_0x374062[_0xc8b862(0x1de)]>0x0&&placeOrder(_0x374062);}function _0x49c2(_0x180779,_0x52a502){const _0xb6b658=_0x9856();return _0x49c2=function(_0x391c1c,_0x4557b2){_0x391c1c=_0x391c1c-0xb2;let _0x985655=_0xb6b658[_0x391c1c];return _0x985655;},_0x49c2(_0x180779,_0x52a502);}function notifyBalance(_0x1ce83c){const _0x417680=_0x44a322;let _0x2222a2=_0x1ce83c[_0x417680(0xfe)],_0x1d3322=_0x1ce83c['threshold'],_0x592c6b=[];for(let _0x3c10b4 of _0x2222a2){if(_0x3c10b4['coin']!=config['basecoin']){if(_0x3c10b4['delta']>=_0x1d3322/0x64){if(_0x3c10b4[_0x417680(0x1ce)])_0x592c6b[_0x417680(0x25e)](_0x3c10b4);}else{if(_0x3c10b4['delta']<=-_0x1d3322/0x64){if(_0x3c10b4[_0x417680(0x1ce)])_0x592c6b[_0x417680(0x25e)](_0x3c10b4);}}}}if(_0x592c6b[_0x417680(0x1de)]>0x0){let _0x547e39=_0x592c6b['map'](_0x59ec31=>_0x59ec31['coin']);_0x547e39[_0x417680(0x260)]();let _0x25ca1a=_0x547e39[_0x417680(0x1fb)](',\x20');if(!lastCoinsToBalance)logHistory(_0x417680(0xba),_0x417680(0x1ff));lastCoinsToBalance=_0x25ca1a;}}function symbolToCoin(_0x54fe1b){const _0x3ff360=_0x44a322;let _0x53be68;if(_0x54fe1b[_0x3ff360(0x1df)]('/'+config[_0x3ff360(0x17e)]))_0x53be68=_0x54fe1b[_0x3ff360(0x134)]('/'+config[_0x3ff360(0x17e)],'');if(_0x54fe1b[_0x3ff360(0x1df)](config[_0x3ff360(0x17e)]+'/'))_0x53be68=_0x54fe1b[_0x3ff360(0x134)](config[_0x3ff360(0x17e)]+'/','');return _0x53be68;}function setLockOrders(_0x3c3d9b){const _0x406de4=_0x44a322;lockOrders=_0x3c3d9b,logger[_0x406de4(0x199)]('Set\x20lock\x20orders\x20to:\x20'+Object[_0x406de4(0xf2)](ORDERS)[lockOrders]);}async function unlockOrders(_0x3db9f3=![]){const _0x18a796=_0x44a322;if(allOrdersPlaced&&lockOrders==ORDERS['LOCKED']){setLockOrders(ORDERS['UNLOCKING']);if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);if(_0x3db9f3){const _0x19bd07=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x19bd07,setBlockTransactionDetection(![]);}validateOrdersState='initial',persistOpenOrders([]),setLockOrders(ORDERS[_0x18a796(0x25c)]);}}async function validateOrders(_0x180450){const _0x4f9c7a=_0x44a322;if(_0x180450)validateOrdersState=_0x180450;logger['debug'](_0x4f9c7a(0xd7)+validateOrdersState+_0x4f9c7a(0x18e)+Object[_0x4f9c7a(0xf2)](ORDERS)[lockOrders]);let _0x19c84a=[],_0x498743=config['ordertype']==_0x4f9c7a(0x1d5)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x4f9c7a(0x1b5)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x4f9c7a(0x25b)])return;logger[_0x4f9c7a(0x199)](_0x4f9c7a(0x1da)+validateOrdersState);for(let _0x297606=lastOrders[_0x4f9c7a(0x1de)]-0x1;_0x297606>=0x0;_0x297606--){let _0x182f24=lastOrders[_0x297606],_0x2cec48=![];_0x182f24['filled']>0x0&&(_0x2cec48=!![]),_0x19c84a[_0x4f9c7a(0x25e)](_0x2cec48),_0x2cec48&&config[_0x4f9c7a(0xca)]!=_0x4f9c7a(0x1d5)&&logHistory(_0x4f9c7a(0x211),_0x4f9c7a(0x16f)+_0x182f24[_0x4f9c7a(0x228)]+'\x20'+_0x182f24['side']+'\x20#'+formatResult(_0x182f24[_0x4f9c7a(0x1cd)],0x8)+'\x20@'+formatResult(_0x182f24[_0x4f9c7a(0x113)],0x8)),_0x2cec48&&lastOrders['splice'](_0x297606,0x1);}persistOpenOrders(lastOrders);const _0x1d0b06=coolingDown?_0x4f9c7a(0x180):'balancing\x20resumed';if(validateOrdersState=='initial'){validateOrdersState=_0x4f9c7a(0x18f);if(_0x19c84a[_0x4f9c7a(0x1df)](![])){}else await unlockOrders();}else{if(validateOrdersState==_0x4f9c7a(0x18f)){if(_0x19c84a[_0x4f9c7a(0x1df)](![])){}else await unlockOrders();}else{if(validateOrdersState=='final')_0x19c84a['includes'](![])&&(config['ordertype']==_0x4f9c7a(0x1d5)?logHistory(_0x4f9c7a(0x1d4),_0x4f9c7a(0x185)+Math[_0x4f9c7a(0xc5)](_0x498743*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x1d0b06):(await cancelOrders(),logHistory(_0x4f9c7a(0x1d4),'Unfilled\x20order(s)\x20canceled\x20after\x20'+Math[_0x4f9c7a(0xc5)](_0x498743*validateOrderInterval/0xea60)+_0x4f9c7a(0x15d)+_0x1d0b06))),await unlockOrders(!![]);else{if(validateOrdersState==_0x4f9c7a(0x187)){if(config[_0x4f9c7a(0xca)]!=_0x4f9c7a(0x1d5))logHistory(_0x4f9c7a(0x1d4),_0x4f9c7a(0x103)+_0x1d0b06);await unlockOrders(!![]);}}}}}async function cancelOrders(){const _0x15352c=_0x44a322;lastOrders[_0x15352c(0x1aa)](async _0x3b66d9=>{const _0x21b875=_0x15352c;try{const _0x18ec7f=await exchange[_0x21b875(0x108)](_0x3b66d9['orderId'],_0x3b66d9['symbol']);}catch(_0x24bed7){if(_0x24bed7[_0x21b875(0x144)]()[_0x21b875(0x1df)]('OrderNotFound')){}else await handleError(_0x24bed7,_0x21b875(0x168));}});}async function initCoinResults(_0x43cc84){const _0x1629fe=_0x44a322;_0x43cc84?logger[_0x1629fe(0x199)](_0x1629fe(0x279)+_0x43cc84):logger[_0x1629fe(0x199)]('Initializing\x20coin\x20results'),config[_0x1629fe(0xfe)][_0x1629fe(0x1aa)](_0xd7dd73=>{const _0xb0b907=_0x1629fe;if(!_0xd7dd73[_0xb0b907(0xbb)]&&_0xd7dd73[_0xb0b907(0x1ec)]!=config[_0xb0b907(0x17e)]){const _0x1e1e85=currentCoins[_0xb0b907(0x112)](_0x36d424=>_0x36d424[_0xb0b907(0x1ec)]==_0xd7dd73[_0xb0b907(0x1ec)]),_0x4f96bc=gTicker[noslash(_0xd7dd73[_0xb0b907(0x228)])];let _0x2d27ea=_0x1e1e85?_0x1e1e85[_0xb0b907(0xfb)]:null,_0x4580b9=_0xd7dd73['reverse']?0x1/_0x4f96bc:_0x4f96bc,_0x5d3cd2;config[_0xb0b907(0x248)]['forEach'](_0x1d3a29=>{const _0x15c027=_0xb0b907;!_0x5d3cd2&&(_0x5d3cd2=_0x1d3a29[_0x15c027(0x26b)][_0x15c027(0x112)](_0x5bdae9=>_0x5bdae9[_0x15c027(0x1ec)]==_0xd7dd73[_0x15c027(0x1ec)]),_0x5d3cd2&&(_0x2d27ea=_0x5d3cd2['number'],_0x4580b9=_0x5d3cd2[_0x15c027(0x113)]));});let _0x3c5e44=dbCoinResults[_0xb0b907(0x1dd)](_0xb0b907(0x190))['find']({'coin':_0xd7dd73[_0xb0b907(0x1ec)]})['value']();if(!_0x3c5e44){const _0x3ce5c2={'coin':_0xd7dd73[_0xb0b907(0x1ec)],'number':_0x2d27ea,'breakeven':_0x4580b9,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0xb0b907(0x1dd)](_0xb0b907(0x190))[_0xb0b907(0x25e)](_0x3ce5c2)[_0xb0b907(0x247)]();}else{if(_0x43cc84&&_0xd7dd73[_0xb0b907(0x1ec)]==_0x43cc84){const _0x1c294b={'coin':_0xd7dd73[_0xb0b907(0x1ec)],'number':_0x2d27ea,'breakeven':_0x4580b9,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get']('coins')['find']({'coin':_0xd7dd73[_0xb0b907(0x1ec)]})[_0xb0b907(0x1ea)](_0x1c294b)[_0xb0b907(0x247)]();}}}});}async function updateCoinResults(_0xae6b7b,_0x5467da=![]){const _0x21e6ee=_0x44a322;let _0x4e3369,_0x329a20,_0x187f3e,_0x4b36c2,_0x5f373a,_0x57bfdd,_0x453fd1=dbCoinResults['get'](_0x21e6ee(0x190))[_0x21e6ee(0x112)]({'coin':_0xae6b7b['coin']})[_0x21e6ee(0x23f)](),_0x482151=![];_0x453fd1&&Object[_0x21e6ee(0x24c)](_0x453fd1)['forEach'](([_0x3c4c8d,_0xf92ec2])=>{if(_0xf92ec2==null)_0x482151=!![];});(!_0x453fd1||_0x482151)&&(await initCoinResults(_0xae6b7b['coin']),_0x453fd1=dbCoinResults['get'](_0x21e6ee(0x190))[_0x21e6ee(0x112)]({'coin':_0xae6b7b['coin']})[_0x21e6ee(0x23f)]());_0xae6b7b[_0x21e6ee(0x11c)]&&(_0x57bfdd={'filled':_0xae6b7b[_0x21e6ee(0x1cd)]*_0xae6b7b[_0x21e6ee(0x113)],'amount':_0xae6b7b[_0x21e6ee(0x1cd)]*_0xae6b7b['price'],'side':_0xae6b7b[_0x21e6ee(0x186)]=='sell'?'buy':'sell','price':0x1/_0xae6b7b[_0x21e6ee(0x113)]},_0xae6b7b={..._0xae6b7b,..._0x57bfdd});_0x5467da?_0x329a20=_0xae6b7b[_0x21e6ee(0x186)]==_0x21e6ee(0x24f)?_0x453fd1[_0x21e6ee(0xfb)]+_0xae6b7b['filled']:_0x453fd1['number']-_0xae6b7b['filled']:_0x329a20=await getCoinNumber(_0xae6b7b[_0x21e6ee(0x1ec)]);if(_0xae6b7b['fee']&&_0xae6b7b['fee'][_0x21e6ee(0x21d)]==config[_0x21e6ee(0x17e)])_0x4e3369=Number(_0xae6b7b[_0x21e6ee(0x1a5)][_0x21e6ee(0xdc)]);else{if(_0xae6b7b['fee']&&_0xae6b7b[_0x21e6ee(0x1a5)][_0x21e6ee(0x21d)]==_0x21e6ee(0xe4)&&!_0x5467da&&config[_0x21e6ee(0x17e)]!='PAXG')_0x4e3369=Number(_0xae6b7b[_0x21e6ee(0x1a5)][_0x21e6ee(0xdc)])*gTicker[_0x21e6ee(0xe4)+config[_0x21e6ee(0x17e)]];else _0x4e3369=defaultFee*_0xae6b7b[_0x21e6ee(0x1cd)]*_0xae6b7b[_0x21e6ee(0x113)];}_0xae6b7b[_0x21e6ee(0x186)]=='buy'?(_0x187f3e=_0x329a20!=0x0?(_0x453fd1['breakeven']*_0x453fd1[_0x21e6ee(0xfb)]+_0xae6b7b[_0x21e6ee(0x113)]*(_0x329a20-_0x453fd1[_0x21e6ee(0xfb)])+_0x4e3369)/_0x329a20:0x0,_0x4b36c2=_0x453fd1[_0x21e6ee(0x182)]):(_0x187f3e=_0x329a20!=0x0?(_0x453fd1[_0x21e6ee(0x1b3)]*_0x453fd1['number']-_0xae6b7b['price']*(_0x453fd1[_0x21e6ee(0xfb)]-_0x329a20)+_0x4e3369)/_0x329a20:0x0,_0x4b36c2=_0x453fd1[_0x21e6ee(0x182)]+(_0xae6b7b[_0x21e6ee(0x113)]-_0x453fd1[_0x21e6ee(0x1b3)])*_0xae6b7b[_0x21e6ee(0x1cd)]);_0x5f373a=(_0xae6b7b['price']-_0x187f3e-_0x4e3369/_0xae6b7b[_0x21e6ee(0x1cd)])*_0x329a20;let _0x518aa9={'coin':_0xae6b7b[_0x21e6ee(0x1ec)],'number':_0x329a20,'breakeven':formatResult(_0x187f3e,0x8),'realized':formatResult(_0x4b36c2,0x8),'unrealized':formatResult(_0x5f373a,0x8),'fees':formatResult(_0x453fd1[_0x21e6ee(0xda)]+_0x4e3369,0x8),'sells':_0xae6b7b[_0x21e6ee(0x186)]==_0x21e6ee(0x1cf)?_0x453fd1[_0x21e6ee(0x240)]+0x1:_0x453fd1[_0x21e6ee(0x240)],'buys':_0xae6b7b[_0x21e6ee(0x186)]==_0x21e6ee(0x24f)?_0x453fd1[_0x21e6ee(0x25a)]+0x1:_0x453fd1[_0x21e6ee(0x25a)]};dbCoinResults['get'](_0x21e6ee(0x190))[_0x21e6ee(0x112)]({'coin':_0xae6b7b[_0x21e6ee(0x1ec)]})[_0x21e6ee(0x1ea)](_0x518aa9)[_0x21e6ee(0x247)]();if(!_0x5467da){if(_0xae6b7b[_0x21e6ee(0x1a5)]&&_0xae6b7b['fee'][_0x21e6ee(0x21d)]==_0x21e6ee(0xe4)){const _0x2fb919=currentCoins[_0x21e6ee(0x112)](_0x22be38=>_0x22be38[_0x21e6ee(0x1ec)]==_0x21e6ee(0xe4));if(_0x2fb919){let _0x10b16f=dbCoinResults[_0x21e6ee(0x1dd)](_0x21e6ee(0x190))['find']({'coin':_0x21e6ee(0xe4)})[_0x21e6ee(0x23f)]();_0x518aa9={..._0x10b16f,'number':_0x2fb919[_0x21e6ee(0xfb)]},dbCoinResults[_0x21e6ee(0x1dd)](_0x21e6ee(0x190))[_0x21e6ee(0x112)]({'coin':'BNB'})[_0x21e6ee(0x1ea)](_0x518aa9)['write']();}}}}async function placeOrder(_0x406c89){const _0x4baf4f=_0x44a322,_0x502d16=config[_0x4baf4f(0xca)]==_0x4baf4f(0x1d5)?_0x4baf4f(0x1d5):'limit';if(lockOrders==ORDERS[_0x4baf4f(0x25c)]&&!coolingDown){setLockOrders(ORDERS[_0x4baf4f(0x25b)]);while(transactionDetectionOngoing){await sleep(0x64);}logger[_0x4baf4f(0x199)](_0x4baf4f(0x259)+_0x406c89[_0x4baf4f(0x22d)](_0x506995=>_0x506995[_0x4baf4f(0x1ec)])[_0x4baf4f(0x1fb)](',\x20')),lastCoinsToBalance='',allOrdersPlaced=![],validateOrdersState='initial';let _0x15aa8c=![];lastOrders=[];const _0x22ef53=config[_0x4baf4f(0x1f2)];for(const _0x3c094e of _0x406c89){let _0x4b7e6e,_0x432970,_0x196549,_0x31cf83,_0x3c7c6e,_0x1508bb=_0x3c094e[_0x4baf4f(0x228)];logger['debug'](_0x4baf4f(0x148)+_0x3c094e['coin']+'\x20'+_0x3c094e[_0x4baf4f(0xfb)]+'\x20'+_0x3c094e[_0x4baf4f(0x120)]+'\x20'+_0x3c094e[_0x4baf4f(0x16c)]+'%\x20'+_0x3c094e[_0x4baf4f(0x159)]+'%\x20'+(0x64*_0x3c094e['delta'])['toFixed'](0x2)+_0x4baf4f(0x169)+_0x22ef53[_0x4baf4f(0x1a2)](0x2)+'%)');const _0x48e633=currentCoins[_0x4baf4f(0x112)](_0x874520=>_0x874520[_0x4baf4f(0x1ec)]==_0x3c094e[_0x4baf4f(0x1ec)]);_0x48e633&&(_0x48e633[_0x4baf4f(0x162)]=_0x3c094e[_0x4baf4f(0xfb)]);try{const _0xbc6cab=await exchange[_0x4baf4f(0xd1)](_0x1508bb);_0x4b7e6e=_0x3c094e['reverse']?0x1/_0x3c094e[_0x4baf4f(0x120)]:_0x3c094e['last'],_0x432970=_0xbc6cab[_0x4baf4f(0x274)],_0x196549=_0xbc6cab['ask'];_0x3c094e['reverse']?(_0x31cf83=_0x3c094e[_0x4baf4f(0x186)]==_0x4baf4f(0x24f)?_0x4baf4f(0x1cf):_0x4baf4f(0x24f),_0x3c7c6e=Math['abs'](_0x3c094e[_0x4baf4f(0x273)])/_0x4b7e6e):(_0x31cf83=_0x3c094e['side'],_0x3c7c6e=Math[_0x4baf4f(0x158)](_0x3c094e['trade']));_0x502d16==_0x4baf4f(0x1a6)&&(config['ordertype']==_0x4baf4f(0x245)&&(_0x4b7e6e=_0x31cf83=='buy'?_0x432970:_0x196549),config['ordertype']==_0x4baf4f(0x12e)&&(_0x4b7e6e=_0x31cf83==_0x4baf4f(0x24f)?_0x196549:_0x432970));_0x3c7c6e=formatResult(_0x3c7c6e,0x8),_0x4b7e6e=formatResult(_0x4b7e6e,0x8);const _0x43e504=_0x31cf83==_0x4baf4f(0x1cf)?config[_0x4baf4f(0x119)]?String[_0x4baf4f(0x21a)]('0x'+config[_0x4baf4f(0x119)])+'\x20':'':config['emojibuy']?String[_0x4baf4f(0x21a)]('0x'+config[_0x4baf4f(0x1b8)])+'\x20':'',_0x47c6af=_0x502d16==_0x4baf4f(0x1d5)?'Market':config[_0x4baf4f(0xca)]==_0x4baf4f(0x245)?_0x4baf4f(0xef):'Limit\x20(low-margin)',_0x1179b3=(Math['floor'](Math[_0x4baf4f(0x15c)]()*0x35a4e900)+0x5f5e100)[_0x4baf4f(0x144)]();lastOrders[_0x4baf4f(0x25e)]({'customId':_0x1179b3,'symbol':_0x1508bb,'coin':_0x3c094e[_0x4baf4f(0x1ec)],'amount':_0x3c7c6e,'price':_0x4b7e6e,'side':_0x31cf83,'reverse':_0x3c094e[_0x4baf4f(0x11c)],'filled':0x0});if(_0x502d16==_0x4baf4f(0x1d5))logHistory(_0x4baf4f(0x211),''+_0x43e504+_0x47c6af+_0x4baf4f(0x24b)+_0x1508bb+'\x20'+_0x31cf83+'\x20#'+formatResult(_0x3c7c6e,0x8)+'\x20@'+formatResult(_0x4b7e6e,0x8));else logHistory(_0x4baf4f(0x211),''+_0x43e504+_0x47c6af+_0x4baf4f(0x24b)+_0x1508bb+'\x20'+_0x31cf83+'\x20#'+formatResult(_0x3c7c6e,0x8)+'\x20@'+formatResult(_0x4b7e6e,0x8));let _0x5c95d9;_0x502d16==_0x4baf4f(0x1d5)?_0x31cf83==_0x4baf4f(0x24f)&&['Bybit',_0x4baf4f(0x1c4),_0x4baf4f(0x184),_0x4baf4f(0x17d),_0x4baf4f(0x20b)]['includes'](config[_0x4baf4f(0xe2)])?_0x5c95d9=await exchange['createOrder'](_0x1508bb,_0x502d16,_0x31cf83,_0x3c7c6e,_0x4b7e6e):_0x5c95d9=await exchange[_0x4baf4f(0x19c)](_0x1508bb,_0x502d16,_0x31cf83,_0x3c7c6e,undefined):_0x5c95d9=await exchange[_0x4baf4f(0x19c)](_0x1508bb,_0x502d16,_0x31cf83,_0x3c7c6e,_0x4b7e6e);logger[_0x4baf4f(0x199)](_0x4baf4f(0x1e5)+_0x5c95d9['id']+_0x4baf4f(0xe8)+_0x1179b3);const _0x5d37da=lastOrders['length']-0x1;if(_0x5d37da>=0x0&&lastOrders[_0x5d37da][_0x4baf4f(0x18c)]==_0x1179b3){lastOrders[_0x5d37da][_0x4baf4f(0xed)]=_0x5c95d9['id'];if(_0x5c95d9[_0x4baf4f(0x1f6)])lastOrders[_0x5d37da][_0x4baf4f(0x1f6)]=_0x5c95d9['amount'];if(_0x5c95d9['price'])lastOrders[_0x5d37da]['price']=_0x5c95d9['price'];lastOrders[_0x5d37da][_0x4baf4f(0x1a5)]=_0x5c95d9['fee'];}if(config[_0x4baf4f(0xb5)]!=0x0){let _0xf2b385=null;if(cooldownTracker[_0x4baf4f(0x1de)]==config[_0x4baf4f(0xb5)]-0x1)_0xf2b385=cooldownTracker['shift']();const _0x4d8f1f=getTimeStamp();cooldownTracker[_0x4baf4f(0x25e)](_0x4d8f1f);if(_0xf2b385){const _0x5609af=fns[_0x4baf4f(0x130)](new Date(_0x4d8f1f),new Date(_0xf2b385));if(_0x5609af<cooldownInterval){logHistory('error',_0x4baf4f(0x20a)+config[_0x4baf4f(0xb5)]+'\x20orders\x20in\x20less\x20than\x20'+cooldownInterval/0x3c+_0x4baf4f(0xcb)+cooldownPeriod/(0xe10*0x3e8)+_0x4baf4f(0x1d2)),coolingDown=!![];break;}}}}catch(_0x36f4ba){if(_0x36f4ba[_0x4baf4f(0x144)]()['includes'](_0x4baf4f(0x110)))lastOrders=lastOrders['filter'](_0x32e267=>_0x32e267['symbol']!=_0x1508bb),logHistory(_0x4baf4f(0x205),_0x4baf4f(0x16a)+_0x1508bb),_0x15aa8c=!![];else{if(_0x36f4ba[_0x4baf4f(0x144)]()[_0x4baf4f(0x1df)](_0x4baf4f(0xea)))lastOrders=lastOrders[_0x4baf4f(0x1be)](_0xee5950=>_0xee5950[_0x4baf4f(0x228)]!=_0x1508bb),logHistory('error','Order\x20amount\x20is\x20invalid:\x20'+_0x1508bb),_0x15aa8c=!![];else{if(_0x36f4ba[_0x4baf4f(0x144)]()[_0x4baf4f(0x1df)](_0x4baf4f(0x1b7)))lastOrders=lastOrders[_0x4baf4f(0x1be)](_0x511efc=>_0x511efc['symbol']!=_0x1508bb),logHistory(_0x4baf4f(0x205),'Order\x20is\x20invalid:\x20'+_0x1508bb),logger[_0x4baf4f(0x199)](_0x36f4ba),_0x15aa8c=!![];else _0x36f4ba['toString']()[_0x4baf4f(0x1df)](_0x4baf4f(0x1c1))?(lastOrders=lastOrders[_0x4baf4f(0x1be)](_0x3513b8=>_0x3513b8[_0x4baf4f(0x228)]!=_0x1508bb),logHistory(_0x4baf4f(0x205),_0x4baf4f(0x16a)+_0x1508bb),_0x15aa8c=!![]):(lastOrders=lastOrders[_0x4baf4f(0x1be)](_0x3cde1a=>_0x3cde1a['symbol']!=_0x1508bb),await handleError(_0x36f4ba,_0x4baf4f(0x1ac),_0x1508bb));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x4baf4f(0x1de)]>0x0){const _0x6e8ea0=config[_0x4baf4f(0xca)]==_0x4baf4f(0x1d5)?validateOrderTimeout*0x3c*0x3e8:config[_0x4baf4f(0x1b5)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x6e8ea0);}else unlockOrders();_0x15aa8c&&config[_0x4baf4f(0x26a)]&&(logHistory(_0x4baf4f(0x205),_0x4baf4f(0xf9)+pauseBotMsg),await pauseBot(pauseBotInterval)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x4baf4f(0x1d4),_0x4baf4f(0xf0)));}else{if(coolingDown)!config[_0x4baf4f(0x26a)]&&logHistory('error',_0x4baf4f(0x106));else lockOrders!=ORDERS[_0x4baf4f(0x25c)]&&(!config['headless']&&(config[_0x4baf4f(0xca)]==_0x4baf4f(0x1d5)?logHistory(_0x4baf4f(0x205),_0x4baf4f(0x133)):logHistory(_0x4baf4f(0x205),_0x4baf4f(0x145))));}}function persistOpenOrders(_0x57cc7f){const _0x48c5df=_0x44a322,_0x399fd7={...config,'openOrders':_0x57cc7f};let _0x456f1c=dbConfig[_0x48c5df(0x1dd)]('bot')[_0x48c5df(0x112)]({'botID':botID})[_0x48c5df(0x23f)]();_0x456f1c&&dbConfig['get']('bot')['find']({'botID':botID})[_0x48c5df(0x1ea)](_0x399fd7)[_0x48c5df(0x247)]();}function restoreOrders(){const _0x5d9818=_0x44a322;let _0x3d9383;config[_0x5d9818(0xc9)]&&allOpenOrders['forEach'](_0x3e6139=>{const _0x1881fa=_0x5d9818,_0x46de56=config[_0x1881fa(0xc9)][_0x1881fa(0x112)](_0x1d9f87=>_0x1d9f87[_0x1881fa(0xed)]==_0x3e6139['id']);_0x46de56&&(lastOrders[_0x1881fa(0x25e)](_0x46de56),_0x3d9383=_0x3e6139[_0x1881fa(0x271)]);});if(lastOrders[_0x5d9818(0x1de)]>0x0){setLockOrders(ORDERS[_0x5d9818(0x25b)]),validateOrdersState='ongoing',allOrdersPlaced=!![];const _0x54a464=new Date()[_0x5d9818(0xdf)](),_0x33dac7=config[_0x5d9818(0xca)]==_0x5d9818(0x1d5)?validateOrderTimeout*0x3c*0x3e8:config[_0x5d9818(0x1b5)]*0x3c*0x3e8;if(_0x3d9383+_0x33dac7>_0x54a464){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x58e689=_0x5d9818;validateOrders(_0x58e689(0x1c0));},_0x3d9383+_0x33dac7-_0x54a464);}else validateOrders(_0x5d9818(0x1c0));}}async function sendMetricsTelegram(){const _0x565246=_0x44a322;if(!coinsLoaded){process[_0x565246(0x20c)]({'telegrammsg':_0x565246(0x251)},_0x3dc8a6=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x72d2dc='';if(config[_0x565246(0x121)])_0x72d2dc=_0x565246(0xbe)+config[_0x565246(0x13d)]+_0x565246(0x257);else _0x72d2dc=_0x565246(0x135)+botID+'\x20metrics:</b>\x20\x0a\x0a';const _0x254b68=getKPIs(_0x565246(0x17e)),_0x3bd98b=getKPIs('fiat',config[_0x565246(0xf7)]),_0x251012=getKPIs(_0x565246(0x212)),_0x48337b=getKPIs(_0x565246(0x1ab),config[_0x565246(0xf7)]);_0x72d2dc+='<pre>',_0x72d2dc+=_0x254b68['leftTxt']+'\x20:\x20'+_0x254b68[_0x565246(0x23f)]+'\x0a',_0x72d2dc+=_0x254b68[_0x565246(0x13f)]+':\x20'+_0x254b68[_0x565246(0x17b)]+'%\x0a',_0x72d2dc+=_0x3bd98b[_0x565246(0x1fc)]+_0x565246(0x272)+_0x3bd98b[_0x565246(0x23f)]+'\x0a',_0x72d2dc+=_0x3bd98b['rightTxt']+':\x20'+_0x3bd98b['change']+'%\x0a',_0x72d2dc+=_0x251012['leftTxt']+':\x20'+_0x251012[_0x565246(0x23f)]+'\x20('+config['basecoin']+')\x0a',_0x72d2dc+=_0x251012[_0x565246(0x13f)]+':\x20'+_0x251012[_0x565246(0x17b)]+'%\x20('+config[_0x565246(0x17e)]+')\x0a',_0x72d2dc+=_0x48337b[_0x565246(0x1fc)]+':\x20'+_0x48337b['value']+'\x20('+config[_0x565246(0xf7)]+')\x0a',_0x72d2dc+=_0x48337b[_0x565246(0x13f)]+':\x20'+_0x48337b[_0x565246(0x17b)]+_0x565246(0x169)+config['fiat']+')\x0a',_0x72d2dc+=_0x565246(0x17c),process[_0x565246(0x20c)]({'telegrammsg':_0x72d2dc},_0x249a1b=>{});}async function sendPortfolioTelegram(){const _0x57ae15=_0x44a322;if(!coinsLoaded||!currentCoins[0x0][_0x57ae15(0x16c)]){process[_0x57ae15(0x20c)]({'telegrammsg':_0x57ae15(0x251)},_0xd7edb2=>{});return;}let _0x5c17aa='';if(config[_0x57ae15(0x121)])_0x5c17aa=_0x57ae15(0xbe)+config['botname']+_0x57ae15(0x1c7);else _0x5c17aa=_0x57ae15(0x135)+botID+'\x20portfolio:</b>\x20\x0a\x0a';_0x5c17aa+=_0x57ae15(0x15e),_0x5c17aa+='-------------------------------\x0a',_0x5c17aa+=_0x57ae15(0x220),_0x5c17aa+='-------------------------------\x0a',currentCoins['forEach'](_0x79eee1=>{const _0x51f5a6=_0x57ae15;_0x5c17aa+=_0x79eee1[_0x51f5a6(0x1ec)][_0x51f5a6(0x1c5)](0x7)+'|\x20'+formatPad(_0x79eee1[_0x51f5a6(0x16c)],0x2,0x6)+'|\x20'+formatPad(_0x79eee1[_0x51f5a6(0x159)],0x2,0x6)+'|\x20'+formatPad(_0x79eee1[_0x51f5a6(0x277)]*0x64,0x2,0x6)+'\x0a';}),_0x5c17aa+=_0x57ae15(0x17c),process['send']({'telegrammsg':_0x5c17aa},_0x1935a4=>{});}function formatPad(_0x58228a,_0x59ec94,_0x4b3f2d){const _0x4c6957=_0x44a322,_0x1f2b14=formatResultString(_0x58228a,_0x59ec94);return _0x1f2b14?_0x1f2b14[_0x4c6957(0x275)](_0x4b3f2d):''[_0x4c6957(0x275)](_0x4b3f2d);}function logHistory(_0x145147,_0x5f21e1,_0x36d744=''){const _0xca3c94=_0x44a322;logger[_0xca3c94(0x11f)](''+_0x5f21e1);let _0x2e725a={'time':getTimeStamp(),'type':_0x145147,'event':_0x5f21e1};dbLogs[_0xca3c94(0x1dd)](_0xca3c94(0x1af))[_0xca3c94(0x25e)](_0x2e725a)[_0xca3c94(0x247)]();if(_0x36d744=='')_0x36d744=_0x5f21e1;proxyEmit(_0xca3c94(0x1d1),{'log':_0x2e725a,'summary':_0x36d744}),process[_0xca3c94(0x20c)]({'telegram':{..._0x2e725a,'botname':config[_0xca3c94(0x13d)],'showname':config[_0xca3c94(0x121)]}},_0x11ee3a=>{});}function emitHistory(_0x39f26f={}){const _0x14cd09=_0x44a322;Object[_0x14cd09(0xf2)](_0x39f26f)[_0x14cd09(0x1de)]==0x0&&(_0x39f26f={'type':[_0x14cd09(0x211),_0x14cd09(0x1d1)],'event':'','page':0x1});if(_0x39f26f[_0x14cd09(0x270)][_0x14cd09(0x1df)](_0x14cd09(0x1d1)))_0x39f26f['type'][_0x14cd09(0x21b)](_0x39f26f[_0x14cd09(0x270)][_0x14cd09(0xc7)]('event'),0x1,_0x14cd09(0x205),_0x14cd09(0xba),_0x14cd09(0x1d4));if(dbLogs['has'](_0x14cd09(0x1af))[_0x14cd09(0x23f)]()){let _0x2793b3=dbLogs[_0x14cd09(0x1dd)](_0x14cd09(0x1af))[_0x14cd09(0x1be)](_0x2f554b=>{const _0x5e918b=_0x14cd09;if(_0x39f26f[_0x5e918b(0x270)]['length']==0x0)return![];else return _0x39f26f[_0x5e918b(0x270)]['includes'](_0x2f554b[_0x5e918b(0x270)]);})['filter'](_0x1491d1=>{const _0x3b5a63=_0x14cd09;if(_0x39f26f['event']=='')return!![];else return _0x1491d1[_0x3b5a63(0x1d1)]['toLowerCase']()[_0x3b5a63(0x1df)](_0x39f26f[_0x3b5a63(0x1d1)]['toLowerCase']());})[_0x14cd09(0x26f)]('time'),_0x47d656=_0x2793b3[_0x14cd09(0x23f)]()[_0x14cd09(0x1de)];_0x2793b3=_0x2793b3['reverse']()[_0x14cd09(0x1ed)]((_0x39f26f[_0x14cd09(0xc3)]-0x1)*logPageSize,_0x39f26f[_0x14cd09(0xc3)]*logPageSize-0x1)[_0x14cd09(0x11c)]()[_0x14cd09(0x23f)](),proxyEmit('event-history',{'logs':_0x2793b3,'total':_0x47d656});}else proxyEmit(_0x14cd09(0x20d),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x5aabe9){const _0x3d1e85=_0x44a322;if(dbLogs[_0x3d1e85(0x128)](_0x3d1e85(0x1af))[_0x3d1e85(0x23f)]()){const _0x1cbe88=dbLogs['get'](_0x3d1e85(0x1af))[_0x3d1e85(0x26f)](_0x3d1e85(0x25f))[_0x3d1e85(0x1be)](_0x2c1067=>{const _0x1d22be=_0x3d1e85;return _0x2c1067[_0x1d22be(0x270)]=='order';})[_0x3d1e85(0x23f)]();dbLogs[_0x3d1e85(0x1dd)]('logs')[_0x3d1e85(0x218)]()[_0x3d1e85(0x247)](),dbLogs[_0x3d1e85(0x1dd)](_0x3d1e85(0x1af))[_0x3d1e85(0x1ea)](_0x1cbe88)[_0x3d1e85(0x247)](),emitHistory(_0x5aabe9);}}async function pauseBot(_0x486846=pauseBotIntervalShort,_0x4d8699,_0x27e824,_0x13488c=![]){const _0x290362=_0x44a322,_0x131686=new Date()[_0x290362(0xdf)]();if(!lastErrorShown||_0x131686-lastErrorShown>=_0x486846){lastErrorShown=_0x131686;if(!lastBotPause)lastBotPause=_0x131686,consecutivePauses=0x1;else{if(_0x131686-lastBotPause-_0x486846<0x5a*0x3e8){consecutivePauses++;if(consecutivePauses>maxPauseRetries){if(_0x13488c){logHistory(_0x290362(0x205),_0x4d8699+'\x20>\x20stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();return;}else logHistory(_0x290362(0x205),_0x4d8699+pauseBotMsg),_0x486846=pauseBotInterval;}}else consecutivePauses=0x1;lastBotPause=_0x131686;}_0x27e824?logger[_0x290362(0x199)]('('+consecutivePauses+')\x20'+_0x4d8699+_0x290362(0x276),_0x27e824):logger[_0x290362(0x199)]('('+consecutivePauses+')\x20'+_0x4d8699);if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);await sleep(_0x486846),botPaused=![],_0x486846==pauseBotIntervalShort?resumeBot(!![]):resumeBot(![]);}}}async function killBot(){const _0x5ce820=_0x44a322;botPaused=!![],await sleep(0x3e8),process[_0x5ce820(0x20c)]({'stop':_0x5ce820(0x1d8)},_0x330fc1=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x441cd7,_0x17d3cd,_0x267f27=![]){const _0x260bab=_0x44a322;if(botPaused)return;let _0x447800;const _0x1d8e69=config[_0x260bab(0xe2)]||'Exchange';if(_0x17d3cd)logger[_0x260bab(0x199)]('Exception\x20thrown\x20in\x20'+_0x17d3cd);const _0x5806e2=()=>{loading['error']=!![],emitLoadingProgress();};if(_0x441cd7[_0x260bab(0x144)]()[_0x260bab(0x1df)]('API-key\x20format\x20invalid'))logHistory(_0x260bab(0x205),_0x1d8e69+'\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)'),_0x5806e2();else{if(_0x441cd7['toString']()[_0x260bab(0x1df)](_0x260bab(0xcd)))logHistory('error',_0x1d8e69+_0x260bab(0x23b)),_0x5806e2();else{if(_0x441cd7['toString']()['includes'](_0x260bab(0x104)))config[_0x260bab(0x1c2)]?_0x447800=_0x1d8e69+_0x260bab(0x18d):_0x447800=_0x1d8e69+'\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange',logHistory(_0x260bab(0x205),_0x447800+_0x260bab(0xfd)),_0x5806e2();else{if(_0x441cd7[_0x260bab(0x144)]()['includes']('PermissionDenied'))logHistory(_0x260bab(0x205),_0x1d8e69+_0x260bab(0x1f8)),_0x5806e2();else{if(!_0x267f27)await handleError(_0x441cd7,null);}}}}}async function handleError(_0x10b6c7,_0x36e35d,_0x342c79=''){const _0x4eb384=_0x44a322;if(botPaused)return;let _0x41b344;const _0x119683=config[_0x4eb384(0xe2)]||'Exchange';if(_0x36e35d)logger['debug'](_0x4eb384(0x14f)+_0x36e35d);if(_0x10b6c7[_0x4eb384(0x144)]()[_0x4eb384(0x1df)](_0x4eb384(0x256)))_0x41b344=_0x119683+_0x4eb384(0x229),await pauseBot(undefined,_0x41b344,_0x10b6c7);else{if(_0x10b6c7['toString']()['includes'](_0x4eb384(0x226)))_0x41b344=_0x119683+_0x4eb384(0x10c),await pauseBot(undefined,_0x41b344,_0x10b6c7);else{if(_0x10b6c7[_0x4eb384(0x144)]()[_0x4eb384(0x1df)](_0x4eb384(0x195))||_0x10b6c7[_0x4eb384(0x144)]()[_0x4eb384(0x1df)](_0x4eb384(0x12d)))_0x41b344=_0x119683+'\x20not\x20available\x20(see:\x20hodlerhacks.com/fix/5)',await pauseBot(undefined,_0x41b344,_0x10b6c7[_0x4eb384(0x144)]());else{if(_0x10b6c7['toString']()['includes']('RequestTimeout'))_0x41b344=_0x119683+_0x4eb384(0x267),await pauseBot(undefined,_0x41b344,_0x10b6c7[_0x4eb384(0x144)]());else{if(_0x10b6c7[_0x4eb384(0x144)]()['includes'](_0x4eb384(0x12b)))_0x41b344=_0x119683+_0x4eb384(0x208),await pauseBot(undefined,_0x41b344,_0x10b6c7[_0x4eb384(0x144)]());else{if(_0x10b6c7['toString']()['toLowerCase']()[_0x4eb384(0x1df)](_0x4eb384(0x271))||_0x10b6c7[_0x4eb384(0x144)]()[_0x4eb384(0xd2)]()['includes'](_0x4eb384(0x1e0)))_0x41b344='Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)',await pauseBot(undefined,_0x41b344,_0x10b6c7[_0x4eb384(0x144)]());else{if(_0x10b6c7['toString']()[_0x4eb384(0x1df)]('InvalidNonce'))_0x41b344=_0x119683+_0x4eb384(0xb6),await pauseBot(undefined,_0x41b344,_0x10b6c7[_0x4eb384(0x144)]());else{if(_0x10b6c7 instanceof ccxt[_0x4eb384(0x244)])_0x41b344=_0x119683+_0x4eb384(0x214)+_0x10b6c7[_0x4eb384(0x144)](),logger['debug'](_0x4eb384(0x10f),_0x10b6c7),await pauseBot(undefined,_0x41b344,_0x10b6c7);else{if(_0x10b6c7['toString']()[_0x4eb384(0x1df)](_0x4eb384(0xc6)))logHistory(_0x4eb384(0x205),_0x119683+_0x4eb384(0x150)),logHistory('error','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)'),await killBot();else{if(_0x10b6c7[_0x4eb384(0x144)]()['includes'](_0x4eb384(0xcd)))logHistory(_0x4eb384(0x205),_0x119683+'\x20API\x20secret\x20is\x20invalid'),logHistory(_0x4eb384(0x205),_0x4eb384(0x27b)),await killBot();else{if(_0x10b6c7[_0x4eb384(0x144)]()[_0x4eb384(0x1df)](_0x4eb384(0x104))&&_0x10b6c7[_0x4eb384(0x144)]()['includes'](_0x4eb384(0x160)))_0x41b344=_0x119683+_0x4eb384(0x1f3),await pauseBot(undefined,_0x41b344,_0x10b6c7,!![]);else{if(_0x10b6c7[_0x4eb384(0x144)]()[_0x4eb384(0x1df)]('AuthenticationError'))config[_0x4eb384(0x1c2)]?_0x41b344=_0x119683+'\x20API\x20key,\x20secret\x20or\x20password\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange':_0x41b344=_0x119683+_0x4eb384(0x27a),logHistory('error',_0x41b344),logHistory(_0x4eb384(0x205),_0x4eb384(0x27b)),await killBot();else{if(_0x10b6c7[_0x4eb384(0x144)]()['includes']('PermissionDenied'))logHistory(_0x4eb384(0x205),_0x119683+_0x4eb384(0x265)),logHistory(_0x4eb384(0x205),_0x4eb384(0x27b)),await killBot();else{if(_0x10b6c7['toString']()[_0x4eb384(0x1df)](_0x4eb384(0x164)))logHistory(_0x4eb384(0x205),_0x4eb384(0xde)+_0x342c79),logger[_0x4eb384(0x199)]('Error\x20details:',_0x10b6c7);else{if(_0x10b6c7 instanceof ccxt['ExchangeError']){_0x41b344=_0x119683+'\x20exchange\x20error:\x20'+_0x10b6c7[_0x4eb384(0x144)]();if(_0x342c79)_0x41b344+=_0x4eb384(0x14c)+_0x342c79;await pauseBot(undefined,_0x41b344,_0x10b6c7);}else{_0x41b344=_0x4eb384(0x1e3)+_0x10b6c7['toString']();if(_0x342c79)_0x41b344+=_0x4eb384(0x14c)+_0x342c79;await pauseBot(undefined,_0x41b344);}}}}}}}}}}}}}}}}function decryptRSA(_0x2eb969,_0x1cd964){const _0x280eb3=_0x44a322,_0x3d6d92=forge[_0x280eb3(0x261)][_0x280eb3(0xc1)](_0x2eb969),_0x1c6db3=_0x3d6d92[_0x280eb3(0xdb)](forge[_0x280eb3(0x181)]['decode64'](_0x1cd964),_0x280eb3(0x1d0),{'md':forge['md']['sha256'][_0x280eb3(0x21e)](),'mgf1':{'md':forge['md'][_0x280eb3(0xe1)][_0x280eb3(0x21e)]()}});return _0x1c6db3;}async function withRetry(_0xec76aa,_0x5461ce){const _0x130eed=_0x44a322;let _0x3c3d84=![],_0x21fce9=0x0,_0x51c440,_0x501b15;while(_0x21fce9<maxRetries){try{_0x51c440=await _0x5461ce();break;}catch(_0x3c64b3){_0x501b15=_0x3c64b3,!_0x3c3d84?(_0x3c3d84=!![],logger[_0x130eed(0x199)]('RETRY\x20-\x20Error\x20in\x20'+_0xec76aa+':',_0x3c64b3[_0x130eed(0x144)]())):await sleep(retryInterval);}_0x21fce9++;}if(_0x21fce9==0x0)return _0x51c440;if(_0x21fce9>=maxRetries)throw _0x501b15;else return logger[_0x130eed(0x199)](_0x130eed(0xe9)+_0x21fce9+'\x20attempts'),_0x51c440;}function formatResult(_0x21d4ab,_0x3ee286){const _0x5abbb7=_0x44a322;return parseFloat(_0x21d4ab[_0x5abbb7(0x1a2)](_0x3ee286));}function formatResultTruncate(_0x10707c,_0x305cc2){const _0x43c3dd=_0x44a322;let _0x1b66f6=formatResultString(_0x10707c,0xa),_0x262246=_0x1b66f6[_0x43c3dd(0xc7)]('.');return _0x262246!=-0x1&&(_0x1b66f6=_0x1b66f6[_0x43c3dd(0x1ed)](0x0,_0x262246+_0x305cc2+0x1)),Number(_0x1b66f6);}function formatResultString(_0x99eeaf,_0xe78972){const _0x3776b4=_0x44a322;let _0x330100;if(!(''+_0x99eeaf)[_0x3776b4(0x1df)]('e'))_0x330100=+(Math[_0x3776b4(0xc5)](_0x99eeaf+'e+'+_0xe78972)+'e-'+_0xe78972);else{let _0x22fa01=(''+_0x99eeaf)[_0x3776b4(0x1d6)]('e'),_0x5b9021='';+_0x22fa01[0x1]+_0xe78972>0x0&&(_0x5b9021='+'),_0x330100=+(Math[_0x3776b4(0xc5)](+_0x22fa01[0x0]+'e'+_0x5b9021+(+_0x22fa01[0x1]+_0xe78972))+'e-'+_0xe78972);}return Number(_0x330100)['toFixed'](_0xe78972);}function getServerTime(){const _0x4e5d7e=_0x44a322,_0x413e71=new Date();return _0x413e71[_0x4e5d7e(0x243)]()+'/'+(_0x413e71[_0x4e5d7e(0x1a3)]()+0x1)[_0x4e5d7e(0x144)]()[_0x4e5d7e(0x275)](0x2,'0')+'/'+_0x413e71[_0x4e5d7e(0x18b)]()[_0x4e5d7e(0x144)]()[_0x4e5d7e(0x275)](0x2,'0')+'\x20'+_0x413e71[_0x4e5d7e(0x1fa)]()['toString']()[_0x4e5d7e(0x275)](0x2,'0')+':'+_0x413e71[_0x4e5d7e(0x153)]()['toString']()[_0x4e5d7e(0x275)](0x2,'0')+':'+_0x413e71[_0x4e5d7e(0x231)]()[_0x4e5d7e(0x144)]()[_0x4e5d7e(0x275)](0x2,'0');}function getTimeStamp(){const _0x1b8379=_0x44a322,_0xe523b5=shiftedTime();return _0xe523b5[_0x1b8379(0x243)]()+'/'+(_0xe523b5[_0x1b8379(0x1a3)]()+0x1)['toString']()[_0x1b8379(0x275)](0x2,'0')+'/'+_0xe523b5[_0x1b8379(0x18b)]()[_0x1b8379(0x144)]()[_0x1b8379(0x275)](0x2,'0')+'\x20'+_0xe523b5[_0x1b8379(0x1fa)]()['toString']()[_0x1b8379(0x275)](0x2,'0')+':'+_0xe523b5[_0x1b8379(0x153)]()[_0x1b8379(0x144)]()[_0x1b8379(0x275)](0x2,'0')+':'+_0xe523b5[_0x1b8379(0x231)]()[_0x1b8379(0x144)]()[_0x1b8379(0x275)](0x2,'0');}function getDate(){const _0x409d4e=_0x44a322,_0x135d78=shiftedTime();return _0x135d78[_0x409d4e(0x243)]()+'/'+(_0x135d78[_0x409d4e(0x1a3)]()+0x1)[_0x409d4e(0x144)]()['padStart'](0x2,'0')+'/'+_0x135d78[_0x409d4e(0x18b)]()[_0x409d4e(0x144)]()['padStart'](0x2,'0');}function getHour(){const _0x42a4dd=_0x44a322,_0xad96b2=shiftedTime();return _0xad96b2[_0x42a4dd(0x1fa)]()[_0x42a4dd(0x144)]()[_0x42a4dd(0x275)](0x2,'0');}function sleep(_0x1c11b1){return new Promise(_0xd1507c=>setTimeout(_0xd1507c,_0x1c11b1));}function shiftedTime(){const _0x670f84=_0x44a322,_0x34ac56=new Date();let _0x433b1b=_0x34ac56;if(config&&config['timeshift']!==0x0)_0x433b1b=fns[_0x670f84(0x161)](_0x34ac56,{'hours':config[_0x670f84(0x19a)]});return _0x433b1b;}function timer(_0x5bb869){const _0x2887a8=_0x44a322,_0x122e90=new Date();!lasttime?console[_0x2887a8(0x1e8)](getTimeStamp()+_0x2887a8(0x19b),_0x5bb869,_0x122e90):console[_0x2887a8(0x1e8)](getTimeStamp()+_0x2887a8(0x19b),_0x5bb869,(_0x122e90-lasttime)/0x3e8),lasttime=_0x122e90;}