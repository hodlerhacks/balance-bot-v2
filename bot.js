const _0x33e8cb=_0x38ec;(function(_0xc19ddc,_0x1253ee){const _0x3d73e2=_0x38ec,_0x616d58=_0xc19ddc();while(!![]){try{const _0x557f48=parseInt(_0x3d73e2(0x2c4))/0x1+parseInt(_0x3d73e2(0x22a))/0x2*(-parseInt(_0x3d73e2(0x351))/0x3)+-parseInt(_0x3d73e2(0x2fb))/0x4*(-parseInt(_0x3d73e2(0x19b))/0x5)+parseInt(_0x3d73e2(0x289))/0x6*(-parseInt(_0x3d73e2(0x32e))/0x7)+parseInt(_0x3d73e2(0x32b))/0x8+parseInt(_0x3d73e2(0x210))/0x9*(-parseInt(_0x3d73e2(0x2c0))/0xa)+parseInt(_0x3d73e2(0x247))/0xb*(parseInt(_0x3d73e2(0x203))/0xc);if(_0x557f48===_0x1253ee)break;else _0x616d58['push'](_0x616d58['shift']());}catch(_0x980cdc){_0x616d58['push'](_0x616d58['shift']());}}}(_0x4aba,0xee10b));const _0x503d21=function(){let _0x3a5415=!![];return function(_0x2878d0,_0x261c27){const _0xee185f=_0x3a5415?function(){if(_0x261c27){const _0x23e259=_0x261c27['apply'](_0x2878d0,arguments);return _0x261c27=null,_0x23e259;}}:function(){};return _0x3a5415=![],_0xee185f;};}(),_0xdcd550=_0x503d21(this,function(){const _0x4af69d=_0x38ec;return _0xdcd550[_0x4af69d(0x2ee)]()[_0x4af69d(0x205)](_0x4af69d(0x1d8))[_0x4af69d(0x2ee)]()[_0x4af69d(0x1e5)](_0xdcd550)[_0x4af69d(0x205)](_0x4af69d(0x1d8));});_0xdcd550();'use strict';const ccxt=require('ccxt'),low=require(_0x33e8cb(0x277)),FileSync=require(_0x33e8cb(0x325)),fs=require('fs'),fns=require(_0x33e8cb(0x1a9)),forge=require('node-forge'),util=require('util'),argv=require(_0x33e8cb(0x279))(process[_0x33e8cb(0x20b)][_0x33e8cb(0x19f)](0x2))[_0x33e8cb(0x20b)],path=require(_0x33e8cb(0x25b)),axios=require(_0x33e8cb(0x222));let exchange,gTicker={},gChange={};const usdBasecoins=['USD','BUSD',_0x33e8cb(0x1c5),_0x33e8cb(0x282),'USDC',_0x33e8cb(0x1df)],excludedExchanges=[_0x33e8cb(0x255)],debugging=argv['d']||![];let pnlGenerationNeeded=argv['r']||![],config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x33e8cb(0x2bf)]({'LOCKED':0x0,'UNLOCKING':0x1,'UNLOCKED':0x2});let lockOrders=ORDERS[_0x33e8cb(0x21b)],validateOrdersState,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotIntervalShort=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg='\x20>\x20pausing\x20bot\x20for\x20'+pauseBotInterval/0xea60+_0x33e8cb(0x2f5),maxPauseRetries=0x6,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,watchTransactionsInterval=0x3c*0x3e8,schedulerInterval=0x3c*0x3c*0x3e8,retryInterval=0x3e8,maxRetries=0x5,logPageSize=0x14,defaultFee=0.003;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidOrdersInitialTimeout,pidOrdersTimeout,botPaused=![],transactionDetectionOngoing=![],lastCoinsToBalance='',insufficientFundsWarningSent=[],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x5dc,balanceUpdateRetries=0x5;let enableFiatToggle;const serverversion=require(_0x33e8cb(0x2fd))['version'],environment=require(_0x33e8cb(0x2fd))['environment']||_0x33e8cb(0x2c2),botID=process['argv'][0x2]||'001',pattern=/^[0-9]{3}$/;!pattern[_0x33e8cb(0x2b0)](botID)&&(console[_0x33e8cb(0x21d)]('Error:\x20Invalid\x20argument\x20'+botID+_0x33e8cb(0x1bd)),killBot());const userID=process[_0x33e8cb(0x20b)][0x3]||'',configpath=userID?'./config/'+userID+'/':_0x33e8cb(0x299),logspath=userID?_0x33e8cb(0x26b)+userID+'/':_0x33e8cb(0x26b),loggerfile=fs[_0x33e8cb(0x276)](logspath+'/output-000.log',{'flags':'a'});!fs[_0x33e8cb(0x2fe)](configpath)&&fs[_0x33e8cb(0x28e)](configpath);!fs['existsSync'](logspath)&&fs['mkdirSync'](logspath);const configfile=configpath+_0x33e8cb(0x338)+botID+'-config.json',logfile=configpath+_0x33e8cb(0x338)+botID+_0x33e8cb(0x1cf),performancefile=configpath+_0x33e8cb(0x338)+botID+'-performance.json',coinresultsfile=configpath+'bot-'+botID+_0x33e8cb(0x2df),settingsfile=configpath+_0x33e8cb(0x223),securefile=configpath+_0x33e8cb(0x29e),configbackuppath=configpath+_0x33e8cb(0x1d4),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x33e8cb(0x348)]({'logs':[],'version':serverversion})[_0x33e8cb(0x20c)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance['defaults']({'data':[],'version':serverversion})[_0x33e8cb(0x20c)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x33e8cb(0x348)]({'bot':[],'version':serverversion})[_0x33e8cb(0x20c)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x33e8cb(0x348)]({'coins':{},'version':serverversion})[_0x33e8cb(0x20c)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0,settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x581305=>{const _0x4a6234=_0x33e8cb;console[_0x4a6234(0x21d)](_0x581305);},'simple':_0x470813=>{const _0xfb2693=_0x33e8cb;console['log'](_0x470813),loggerfile[_0xfb2693(0x20c)](util[_0xfb2693(0x2dd)](_0x470813)+'\x0a');},'full':async(_0x1c0d18,_0x13da3b='')=>{const _0x47f97d=_0x33e8cb;let _0x5e36f7;if(config[_0x47f97d(0x29a)])_0x5e36f7=getTimeStamp()+':\x20'+config[_0x47f97d(0x1be)]+'\x20>\x20'+_0x1c0d18;else _0x5e36f7=getTimeStamp()+_0x47f97d(0x1f1)+botID+_0x47f97d(0x1a5)+_0x1c0d18;console[_0x47f97d(0x21d)](_0x5e36f7),loggerfile[_0x47f97d(0x20c)](util['format'](_0x5e36f7)+'\x0a'),_0x13da3b&&(console['log'](_0x13da3b),loggerfile['write'](util[_0x47f97d(0x2dd)](_0x13da3b)+'\x0a'));},'debug':async(_0x2c5a36,_0x55affd='')=>{const _0x293505=_0x33e8cb;let _0x2ab8ba;if(config[_0x293505(0x29a)])_0x2ab8ba=getTimeStamp()+':\x20'+config[_0x293505(0x1be)]+_0x293505(0x311)+_0x2c5a36;else _0x2ab8ba=getTimeStamp()+_0x293505(0x1f1)+botID+_0x293505(0x311)+_0x2c5a36;if(debugging)console[_0x293505(0x21d)](_0x2ab8ba);loggerfile['write'](util[_0x293505(0x2dd)](_0x2ab8ba)+'\x0a');if(_0x55affd){if(debugging)console[_0x293505(0x21d)](_0x55affd);loggerfile[_0x293505(0x20c)](util[_0x293505(0x2dd)](_0x55affd)+'\x0a');}}};process['on']('uncaughtException',function(_0x5db9eb){const _0x31da70=_0x33e8cb;handleError(_0x5db9eb['stack'],_0x31da70(0x206));});settings['timeshift']!=config[_0x33e8cb(0x1fd)]&&updateTimeshift(settings[_0x33e8cb(0x1fd)]);settings['onepagemode']!=config[_0x33e8cb(0x298)]&&updateOnepagemode(settings[_0x33e8cb(0x298)]);(settings[_0x33e8cb(0x1d2)]&&!config[_0x33e8cb(0x1d2)]||!settings['marketcapApi']&&config[_0x33e8cb(0x1d2)])&&updateMarketcapApi(settings[_0x33e8cb(0x1d2)]);process[_0x33e8cb(0x2e5)]({'started':_0x33e8cb(0x33f)},_0x32fa7e=>{}),initializeProcessListeners();function proxyEmit(_0x4dec32,_0x5efdbb=null){process['send']({'function':_0x4dec32,'args':_0x5efdbb},_0x58c05e=>{});}function initializeProcessListeners(){const _0x304d67=_0x33e8cb;process['on'](_0x304d67(0x30e),_0x39e026=>{const _0x3f3b44=_0x304d67;switch(Object[_0x3f3b44(0x1dc)](_0x39e026)[0x0]){case'timeshift':_0x39e026[_0x3f3b44(0x1fd)]!=undefined&&(settings[_0x3f3b44(0x1fd)]=_0x39e026[_0x3f3b44(0x1fd)],updateTimeshift(settings[_0x3f3b44(0x1fd)]));break;case _0x3f3b44(0x298):_0x39e026[_0x3f3b44(0x298)]!=undefined&&(settings['onepagemode']=_0x39e026[_0x3f3b44(0x298)],updateOnepagemode(settings['onepagemode']));break;case _0x3f3b44(0x1d2):_0x39e026[_0x3f3b44(0x1d2)]!=undefined&&(settings[_0x3f3b44(0x1d2)]=_0x39e026[_0x3f3b44(0x1d2)],updateMarketcapApi(settings[_0x3f3b44(0x1d2)]));break;case _0x3f3b44(0x32d):_0x39e026[_0x3f3b44(0x32d)]!=undefined&&(bots=JSON[_0x3f3b44(0x244)](_0x39e026[_0x3f3b44(0x32d)]),proxyEmit('bots',bots));break;case _0x3f3b44(0x1d5):switch(_0x39e026[_0x3f3b44(0x1d5)]){case _0x3f3b44(0x318):initclient();break;case'toggleBotMode':toggleBotMode();break;case _0x3f3b44(0x266):emitHistory(_0x39e026[_0x3f3b44(0x341)]);break;case _0x3f3b44(0x1d3):deleteHistoryAlerts(_0x39e026['args']);break;case _0x3f3b44(0x29c):getPortfolio(_0x39e026[_0x3f3b44(0x341)]);break;case _0x3f3b44(0x2ed):storeConfiguration(_0x39e026[_0x3f3b44(0x341)]);break;case _0x3f3b44(0x1f7):storeHeadless(_0x39e026[_0x3f3b44(0x341)]);break;case _0x3f3b44(0x2c6):storeFiat(_0x39e026['args']);break;case _0x3f3b44(0x2f9):resetHistory();break;case _0x3f3b44(0x2ad):getStartingBalances(getNormalizedPerformance());break;case _0x3f3b44(0x1fe):placeOrder(_0x39e026[_0x3f3b44(0x341)]);break;case _0x3f3b44(0x1e9):cancelLoading();break;case _0x3f3b44(0x257):showConfig();break;case _0x3f3b44(0x265):sendMetricsTelegram();break;case _0x3f3b44(0x1f6):sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x1cee20=![]){const _0xcafcee=_0x33e8cb;logger[_0xcafcee(0x22e)]('Reset\x20|\x20'+(_0x1cee20?'exchange\x20reload':'no\x20exchange\x20reloaded')+_0xcafcee(0x200)+config[_0xcafcee(0x288)]);if(pidBalances)clearTimeout(pidBalances);lastCoinsToBalance='',insufficientFundsWarningSent=[],coinsLoaded=![];if(config[_0xcafcee(0x286)]!=''&&config[_0xcafcee(0x286)]!=_0xcafcee(0x22c)){loadingProgress=0x0;if(_0x1cee20){await initExchange();const _0x5f1904=await testAPI();if(!_0x5f1904)return;await loadSymbols(),loadingProgress=0x1,setStableCoins(),proxyEmit('configuration',emittedConfiguration()),initialPerformanceStored=![];}const _0x22ced4=await getCoins();[currentCoins,currentCoinsAll]=_0x22ced4,setBlockTransactionDetection(![]),startScheduler(),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0xcafcee(0x22e)](_0xcafcee(0x31a)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0xcafcee(0x2d5)]==0x0&&allOpenOrders['length']!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(pnlGenerationNeeded)await generatePnL();}}async function resumeBot(_0x177f4e=![]){const _0x376e65=_0x33e8cb;logger[_0x376e65(0x22e)](_0x376e65(0x2b7)+(_0x177f4e?_0x376e65(0x1d7):'complete')+')\x20|\x20exchange:\x20'+config['exchange']);if(pidBalances)clearTimeout(pidBalances);if(_0x177f4e){getBalances();return;}coinsLoaded=![];if(config['apiKey']!=''&&config[_0x376e65(0x286)]!=_0x376e65(0x22c)){loadingProgress=0x1;const _0x4cfb89=await getCoins();[currentCoins,currentCoinsAll]=_0x4cfb89,setBlockTransactionDetection(![]),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger['debug']('Loading\x20completed'),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x376e65(0x2d5)]==0x0&&allOpenOrders[_0x376e65(0x2d5)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();}}async function getMarketCap(_0x174773){const _0x5aa5bb=_0x33e8cb;let _0x36565e=![];if(_0x174773)_0x36565e=!![];const _0x2c00d2=_0x36565e?_0x174773:currentCoins,_0x33d6d7=_0x2c00d2['map'](_0x2421a3=>_0x2421a3[_0x5aa5bb(0x29b)]);if(!config[_0x5aa5bb(0x1d2)]||!_0x36565e&&!config['marketcapEnabled']||_0x33d6d7[_0x5aa5bb(0x2d5)]==0x0)return;let _0x57a729=null;try{_0x57a729=await axios['get'](_0x5aa5bb(0x2a0),{'headers':{'X-CMC_PRO_API_KEY':settings[_0x5aa5bb(0x1d2)]},'params':{'symbol':_0x33d6d7[_0x5aa5bb(0x2ee)]()}});}catch(_0x3094a5){_0x57a729=null,_0x3094a5['toString']()[_0x5aa5bb(0x2ac)](_0x5aa5bb(0x2e9))?(config[_0x5aa5bb(0x1d2)]=![],updateConfig(),proxyEmit(_0x5aa5bb(0x21c),emittedConfiguration()),logHistory(_0x5aa5bb(0x29d),_0x5aa5bb(0x2f1))):(logHistory(_0x5aa5bb(0x29d),'CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20trying\x20again\x20in\x20'+schedulerInterval/(0x3c*0x3e8)+_0x5aa5bb(0x2f5)),logger['debug'](_0x5aa5bb(0x1ca),_0x3094a5[_0x5aa5bb(0x2ee)]()+'\x20-\x20'+_0x3094a5[_0x5aa5bb(0x337)]));}let _0x4b3f15=!![];if(_0x57a729){let _0x41d0c9=0x0;const _0x139786=_0x57a729[_0x5aa5bb(0x31b)];_0x33d6d7[_0x5aa5bb(0x304)](_0x3ef95c=>{const _0x5982e9=_0x5aa5bb;if(_0x139786[_0x5982e9(0x31b)][_0x3ef95c][0x0]&&_0x139786[_0x5982e9(0x31b)][_0x3ef95c][0x0][_0x5982e9(0x28c)][_0x5982e9(0x185)][_0x5982e9(0x23f)])_0x41d0c9+=_0x139786[_0x5982e9(0x31b)][_0x3ef95c][0x0][_0x5982e9(0x28c)][_0x5982e9(0x185)][_0x5982e9(0x23f)];else{if(![_0x5982e9(0x2b2),_0x5982e9(0x185)]['includes'](_0x3ef95c)){if(_0x36565e)logHistory(_0x5982e9(0x29d),_0x5982e9(0x28b)+_0x3ef95c+_0x5982e9(0x1a0));else{const _0x26dfd7=config[_0x5982e9(0x189)]['find'](_0x2d4016=>_0x2d4016[_0x5982e9(0x29b)]==_0x3ef95c);_0x26dfd7&&!_0x26dfd7[_0x5982e9(0x228)]&&_0x26dfd7[_0x5982e9(0x19a)]==-0x1&&(_0x4b3f15=![],logHistory('error',_0x5982e9(0x2a1)),logger[_0x5982e9(0x22e)](_0x5982e9(0x28b)+_0x3ef95c));}}}});if(!_0x4b3f15)return;_0x33d6d7[_0x5aa5bb(0x304)](_0x59c425=>{const _0x45653c=_0x5aa5bb,_0x584bfa=_0x139786[_0x45653c(0x31b)][_0x59c425][0x0]?_0x139786[_0x45653c(0x31b)][_0x59c425][0x0][_0x45653c(0x28c)][_0x45653c(0x185)][_0x45653c(0x23f)]:0x0;if(_0x36565e){const _0x342d77=_0x174773[_0x45653c(0x2d6)](_0x4c3d3a=>_0x4c3d3a['coin']==_0x59c425);_0x342d77&&(_0x342d77[_0x45653c(0x284)]=_0x584bfa);}else{const _0x4f68a1=currentCoins['find'](_0x43e3da=>_0x43e3da[_0x45653c(0x29b)]==_0x59c425);_0x4f68a1&&(_0x4f68a1[_0x45653c(0x284)]=_0x584bfa);const _0x444901=currentCoinsAll['find'](_0x497f6d=>_0x497f6d[_0x45653c(0x29b)]==_0x59c425);_0x444901&&(_0x444901[_0x45653c(0x284)]=_0x584bfa);}}),!_0x36565e&&updateTargetDistribution();}}function updateTargetDistribution(){const _0x164cfb=_0x33e8cb,_0x39758d=0x2;let _0x2b3817=0x0,_0x572afa=0x0,_0x42b96a=0x0,_0x1e7f5b=0x0,_0x480602=0x0;config[_0x164cfb(0x189)]['forEach'](_0x2dccb9=>{const _0x309eab=_0x164cfb;if(!_0x2dccb9[_0x309eab(0x228)]){_0x42b96a++,_0x2b3817+=_0x2dccb9[_0x309eab(0x19a)];if(_0x2dccb9[_0x309eab(0x19a)]===-0x1){_0x2b3817++;const _0x307d45=currentCoinsAll[_0x309eab(0x2d6)](_0x21bac9=>_0x21bac9['coin']==_0x2dccb9['coin']);_0x307d45&&(_0x1e7f5b+=_0x307d45[_0x309eab(0x284)],_0x480602+=Math[_0x309eab(0x2ce)](_0x307d45[_0x309eab(0x284)]));}if(_0x2dccb9[_0x309eab(0x19a)]!==-0x1)_0x572afa++;}});let _0x5478ed;const _0x371f45=0x64-_0x2b3817,_0x3552a2=_0x42b96a-_0x572afa;_0x5478ed=_0x3552a2===0x0?_0x2b3817:Math[_0x164cfb(0x1c7)](0x64,_0x2b3817),config[_0x164cfb(0x189)]['forEach'](_0xd5f507=>{const _0x5c5e84=_0x164cfb,_0x26d1e6=currentCoinsAll[_0x5c5e84(0x2d6)](_0x305823=>_0x305823['coin']==_0xd5f507[_0x5c5e84(0x29b)]);_0x26d1e6&&(_0xd5f507['marketcap']=_0x26d1e6['marketcap']);if(!_0xd5f507[_0x5c5e84(0x228)]){if(_0x5478ed<=0x64){if(_0xd5f507[_0x5c5e84(0x19a)]===-0x1){if(_0x1e7f5b!==0x0&&config[_0x5c5e84(0x321)]){if(_0x26d1e6){if(config[_0x5c5e84(0x321)]==_0x5c5e84(0x284))_0xd5f507[_0x5c5e84(0x291)]=(_0x371f45/(_0x1e7f5b/_0x26d1e6[_0x5c5e84(0x284)]))[_0x5c5e84(0x32a)](_0x39758d);else config['marketcapEnabled']==_0x5c5e84(0x193)&&(_0xd5f507[_0x5c5e84(0x291)]=(_0x371f45/(_0x480602/Math[_0x5c5e84(0x2ce)](_0x26d1e6[_0x5c5e84(0x284)])))[_0x5c5e84(0x32a)](_0x39758d));}}}}}}),updateConfig();}function updateConfig(){const _0x366adb=_0x33e8cb;let _0x53fdc2=dbConfig[_0x366adb(0x1d0)](_0x366adb(0x262))[_0x366adb(0x2d6)]({'botID':botID})[_0x366adb(0x2b6)]();_0x53fdc2&&dbConfig[_0x366adb(0x1d0)](_0x366adb(0x262))[_0x366adb(0x2d6)]({'botID':botID})[_0x366adb(0x216)](config)['write']();}function logMemory(){const _0x14e231=_0x33e8cb;if(environment!='staging')return;const _0x232dc=process[_0x14e231(0x1b9)]()[_0x14e231(0x1b3)]/0x400/0x400;logger[_0x14e231(0x22e)]('process\x20'+process[_0x14e231(0x229)]+_0x14e231(0x1d6)+formatResult(_0x232dc,0x1)+_0x14e231(0x1a4));}async function startScheduler(){const _0x1536ca=_0x33e8cb,_0x573533=shiftedTime()[_0x1536ca(0x2dc)]();getMarketCap(),loadSymbols(),_0x573533==0x1&&logMemory(),await sleep(schedulerInterval),startScheduler();}async function restartBot(_0x4ed418=![]){const _0x59dd13=_0x33e8cb;logger[_0x59dd13(0x22e)](_0x59dd13(0x1b5));if(!_0x4ed418)while(lockOrders!=ORDERS[_0x59dd13(0x21b)]||coolingDown){await sleep(0x3e8);}process[_0x59dd13(0x2e5)]({'stop':_0x59dd13(0x1a7)},_0x1ada29=>{});}async function initExchange(_0x5bccff=config[_0x33e8cb(0x288)],_0x13fe9a=config[_0x33e8cb(0x286)],_0x388634=config[_0x33e8cb(0x225)],_0x11bcf1=config['apiPassword'],_0x5efc2e=config[_0x33e8cb(0x22f)]){const _0xa54fa9=_0x33e8cb;if(exchange){logger[_0xa54fa9(0x22e)](_0xa54fa9(0x356));return;}logger[_0xa54fa9(0x22e)](_0xa54fa9(0x242));!supportedExchanges()[_0xa54fa9(0x2ac)](_0x5bccff)&&(logHistory(_0xa54fa9(0x29d),_0xa54fa9(0x28f)+_0x5bccff+'\x20exchange'),killBot());const _0x4a20b4=ccxt[_0xa54fa9(0x20f)][_0x5bccff[_0xa54fa9(0x342)]()];exchange=new _0x4a20b4({'apiKey':_0x13fe9a,'secret':_0x388634,'options':{'defaultType':_0xa54fa9(0x343)}});if(_0x11bcf1)exchange['password']=_0x11bcf1;if(exchange['has'][_0xa54fa9(0x22f)])exchange['setSandboxMode'](_0x5efc2e);}function updateExchange(_0x29666e,_0x10bfd9,_0x3fe6bd=null){const _0x4494ed=_0x33e8cb;exchange[_0x4494ed(0x286)]=_0x29666e,exchange[_0x4494ed(0x194)]=_0x10bfd9,exchange[_0x4494ed(0x1eb)]=_0x3fe6bd,logger[_0x4494ed(0x22e)](_0x4494ed(0x214));}function setStableCoins(){const _0x5478aa=_0x33e8cb;let _0x806521=config[_0x5478aa(0x27b)]=='ETH'?_0x5478aa(0x1c4):config['basecoin']==_0x5478aa(0x2bc)?_0x5478aa(0x2bc):_0x5478aa(0x31d),_0x15d27d=allSymbols[_0x5478aa(0x2ac)](_0x806521+'/USD')?_0x5478aa(0x185):allSymbols[_0x5478aa(0x2ac)](_0x806521+_0x5478aa(0x268))?'USDT':_0x5478aa(0x2b2),_0x4b25e0=allSymbols['includes'](_0x806521+_0x5478aa(0x2d3))?'EUR':_0x15d27d;enableFiatToggle=!![],_0x15d27d==_0x5478aa(0x2b2)&&(enableFiatToggle=![],storeFiat(_0x5478aa(0x2b2))),_0x4b25e0!=_0x5478aa(0x2b2)&&(enableFiatToggle=![],storeFiat('USD')),stablecoins={'eur':{'coin':''+_0x806521+_0x4b25e0,'symbol':_0x806521+'/'+_0x4b25e0},'usd':{'coin':''+_0x806521+_0x15d27d,'symbol':_0x806521+'/'+_0x15d27d}};}async function initwsCcxt(){const _0x3b13d1=_0x33e8cb;initCycle++;const _0x4e73b3=initCycle;let _0x4de2ba=[];config[_0x3b13d1(0x189)][_0x3b13d1(0x304)](_0x1d8c34=>{const _0x1617e4=_0x3b13d1;if(!_0x1d8c34[_0x1617e4(0x228)]&&_0x1d8c34[_0x1617e4(0x29b)]!=config[_0x1617e4(0x27b)])_0x4de2ba[_0x1617e4(0x33e)](_0x1d8c34[_0x1617e4(0x340)]);});if(!_0x4de2ba[_0x3b13d1(0x2ac)](stablecoins[_0x3b13d1(0x2a8)][_0x3b13d1(0x340)]))_0x4de2ba[_0x3b13d1(0x33e)](stablecoins['eur'][_0x3b13d1(0x340)]);if(!_0x4de2ba[_0x3b13d1(0x2ac)](stablecoins[_0x3b13d1(0x2b5)][_0x3b13d1(0x340)]))_0x4de2ba[_0x3b13d1(0x33e)](stablecoins[_0x3b13d1(0x2b5)][_0x3b13d1(0x340)]);loadCoins(_0x4de2ba),_0x4de2ba=validateSymbols(_0x4de2ba);const _0x69eb0c=async _0x323f32=>{const _0x16a1e3=_0x3b13d1;let _0x367dcf;try{const _0x12fae0=await getTickers(_0x323f32);Object[_0x16a1e3(0x1ad)](_0x12fae0)[_0x16a1e3(0x304)](_0x949039=>{const _0x22aa0a=_0x16a1e3;_0x367dcf=_0x949039[0x1][_0x22aa0a(0x340)],gTicker[noslash(_0x367dcf)]=_0x949039[0x1]['last'],gChange[_0x367dcf]=_0x949039[0x1][_0x22aa0a(0x33d)];});}catch(_0x1dbbf0){await handleError(_0x1dbbf0,_0x16a1e3(0x267),_0x367dcf);}},_0xb56635=async _0x198bd5=>{const _0x43259b=_0x3b13d1;while(initCycle==_0x4e73b3){if(!botPaused)try{const _0x2640e2=await exchange[_0x43259b(0x217)](_0x198bd5);gTicker[noslash(_0x2640e2[0x0][_0x43259b(0x340)])]=_0x2640e2[0x0][_0x43259b(0x309)];}catch(_0x10ae6d){if(!exchangeStopped)await handleError(_0x10ae6d,'watchTrades()',_0x198bd5);}else await sleep(0x64);}},_0x28255d=async _0x32b2a2=>{const _0x54f158=_0x3b13d1;while(initCycle==_0x4e73b3){if(!botPaused)try{const _0x32b475=await exchange['watchTradesForSymbols'](_0x32b2a2),_0xe37211=_0x32b475['pop']();gTicker[noslash(_0xe37211['symbol'])]=_0xe37211[_0x54f158(0x309)];}catch(_0x115f99){if(!exchangeStopped)await handleError(_0x115f99,_0x54f158(0x2a3),_0x32b2a2[_0x54f158(0x2ee)]());}else await sleep(0x64);}},_0x23eed9=async _0x56675b=>{const _0x5187fc=_0x3b13d1;while(initCycle==_0x4e73b3){if(!botPaused){let _0x3db178;try{await sleep(0x3c*0x3e8);const _0x509c28=await getTickers(_0x56675b);Object['entries'](_0x509c28)['forEach'](_0x1c5abc=>{_0x3db178=_0x1c5abc[0x1]['symbol'],gChange[_0x3db178]=_0x1c5abc[0x1]['percentage'];});}catch(_0x896a29){if(!exchangeStopped)await handleError(_0x896a29,_0x5187fc(0x31f),_0x3db178);}}else await sleep(0x64);}},_0x19e95d=async _0x41d6a1=>{const _0x42a157=_0x3b13d1;while(initCycle==_0x4e73b3){if(!botPaused)try{const _0x9ed415=await exchange['watchOrders'](_0x41d6a1);initCycle==_0x4e73b3&&_0x9ed415[_0x42a157(0x304)](_0x53dd3e=>{updateNumberCoinsCcxt(_0x53dd3e);});}catch(_0xf8d3bd){if(!exchangeStopped)await handleError(_0xf8d3bd,_0x42a157(0x204));}else await sleep(0x64);}};_0x69eb0c(_0x4de2ba),_0x23eed9(_0x4de2ba),exchange[_0x3b13d1(0x24e)][_0x3b13d1(0x251)]&&!(config['exchange']==_0x3b13d1(0x30f)&&_0x4de2ba[_0x3b13d1(0x2d5)]>0xa)?_0x28255d(_0x4de2ba):_0x4de2ba[_0x3b13d1(0x304)](_0x245a55=>{_0xb56635(_0x245a55);}),_0x4de2ba[_0x3b13d1(0x304)](_0x659622=>{_0x19e95d(_0x659622);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x42d8ee){const _0x3d8bd3=_0x33e8cb;let _0x539dc9={};try{if(config[_0x3d8bd3(0x288)]!=_0x3d8bd3(0x2e3))_0x539dc9=await exchange[_0x3d8bd3(0x187)](_0x42d8ee);else for(const _0x2023e7 of _0x42d8ee){const _0x5839e9=await exchange['fetchTicker'](_0x2023e7);_0x539dc9[_0x2023e7]=_0x5839e9;}return _0x539dc9;}catch(_0x136169){throw _0x136169;}}function setBlockTransactionDetection(_0x3e75a7){const _0x7840cb=_0x33e8cb;blockTransactionDetection=_0x3e75a7,logger['debug'](_0x7840cb(0x2d4)+blockTransactionDetection);}async function detectLiquidityChange(_0x2a3144=0x0){const _0x572990=_0x33e8cb;transactionDetectionOngoing=!![];try{const _0x40d8df=await getCoins(_0x2a3144),[_0x1cf45e,_0x3fd1fd]=_0x40d8df;let _0x18e30a=[];currentCoins[_0x572990(0x304)](_0x229b88=>{const _0x192660=_0x572990,_0x1fe8c9=_0x1cf45e[_0x192660(0x2d6)](_0x4f98b2=>_0x4f98b2[_0x192660(0x29b)]==_0x229b88[_0x192660(0x29b)]);if(_0x1fe8c9){if(_0x229b88['number']!=_0x1fe8c9[_0x192660(0x1ec)]){let _0x28f8d2;if(_0x229b88[_0x192660(0x29b)]!=config['basecoin']){const _0x41d85c=gTicker[noslash(_0x229b88['symbol'])];_0x28f8d2=_0x229b88[_0x192660(0x19d)]?0x1/_0x41d85c:_0x41d85c;}else _0x28f8d2=0x1;_0x18e30a[_0x192660(0x33e)]({'coin':_0x229b88['coin'],'symbol':_0x229b88[_0x192660(0x340)],'price':_0x28f8d2,'number':Number(formatResult(_0x1fe8c9['number']-_0x229b88[_0x192660(0x1ec)],0x8)),'basecoinvalue':_0x28f8d2*(_0x1fe8c9[_0x192660(0x1ec)]-_0x229b88[_0x192660(0x1ec)])});}}});if(_0x18e30a['length']>0x0&&!blockTransactionDetection){for(const _0x40b711 of _0x18e30a){if(config[_0x572990(0x334)]){logger[_0x572990(0x22e)](_0x572990(0x199)+_0x40b711[_0x572990(0x246)]+_0x572990(0x2fc)+lastFees[_0x572990(0x33c)]);if(lastFees[_0x572990(0x33c)]==0x0||Math[_0x572990(0x271)](_0x40b711[_0x572990(0x246)])>lastFees['highest']*0x3){if(config['autoliquidity']==_0x572990(0x215)){delete _0x40b711['symbol'],delete _0x40b711['basecoinvalue'];let _0x43ac04=[],_0x23923f=[...config['liquidity']]||[],_0x5a9a61=config[_0x572990(0x237)];_0x23923f[_0x572990(0x294)]((_0x4e646c,_0x238acd)=>_0x4e646c[_0x572990(0x25d)]>_0x238acd[_0x572990(0x25d)]?-0x1:_0x238acd['date']>_0x4e646c['date']?0x1:0x0);const _0x4ba77f=getDate();if(_0x23923f[0x0]){const _0x1623c5=fns[_0x572990(0x244)](_0x23923f[0x0]['date'],_0x572990(0x26f),new Date()),_0x10fd5b=fns[_0x572990(0x244)](_0x4ba77f,_0x572990(0x26f),new Date());if(fns[_0x572990(0x23e)](_0x1623c5,_0x10fd5b)){_0x43ac04=_0x23923f[0x0]['changes'];const _0x468173=_0x43ac04[_0x572990(0x2d6)](_0x2a03bf=>_0x2a03bf[_0x572990(0x29b)]==_0x40b711['coin']);_0x468173?(_0x468173['number']+=_0x40b711['number'],_0x468173['number']==0x0&&(_0x43ac04=_0x43ac04['filter'](_0x22dc3f=>{const _0x3cc48a=_0x572990;return _0x22dc3f[_0x3cc48a(0x29b)]!=_0x40b711[_0x3cc48a(0x29b)];}))):_0x43ac04[_0x572990(0x33e)](_0x40b711);const _0x2e51d2=_0x5a9a61[_0x572990(0x2d6)](_0x1d55db=>_0x1d55db[_0x572990(0x25d)]==_0x4ba77f);_0x2e51d2[_0x572990(0x1ce)]=_0x43ac04;}else _0x5a9a61[_0x572990(0x33e)]({'date':_0x4ba77f,'changes':[_0x40b711]});}const _0x1d3113=_0x5a9a61[_0x572990(0x2d6)](_0x4e1980=>_0x4e1980[_0x572990(0x25d)]==_0x4ba77f);if(_0x1d3113){let _0x2a9e07=!![];_0x1d3113[_0x572990(0x1ce)][_0x572990(0x304)](_0x13a43b=>{const _0x427340=_0x572990;if(_0x13a43b[_0x427340(0x1ec)]!=0x0)_0x2a9e07=![];}),_0x2a9e07&&(_0x5a9a61=_0x5a9a61[_0x572990(0x1c3)](_0x1d9389=>{const _0x3c6585=_0x572990;return _0x1d9389[_0x3c6585(0x25d)]!=_0x4ba77f;}));}let _0xda3ba6=dbConfig[_0x572990(0x1d0)](_0x572990(0x262))[_0x572990(0x2d6)]({'botID':botID})[_0x572990(0x2b6)]();_0xda3ba6&&(dbConfig['get'](_0x572990(0x262))[_0x572990(0x2d6)]({'botID':botID})[_0x572990(0x216)]({'liquidity':_0x5a9a61})[_0x572990(0x20c)](),config[_0x572990(0x237)]=_0x5a9a61);logHistory(_0x572990(0x1f9),'Portfolio\x20change\x20detected:\x20'+Math[_0x572990(0x271)](_0x40b711[_0x572990(0x1ec)])+'\x20'+_0x40b711[_0x572990(0x29b)]+'\x20'+(_0x40b711[_0x572990(0x1ec)]>0x0?'added':'removed')+_0x572990(0x1db)),proxyEmit(_0x572990(0x21c),emittedConfiguration());const _0x484e20=getNormalizedPerformance();emitPerformance(_0x484e20),getStartingBalances(_0x484e20),logger[_0x572990(0x22e)](_0x572990(0x1b1));}else config[_0x572990(0x334)]==_0x572990(0x290)&&(config[_0x572990(0x209)]?(await storeHeadless({'headless':![]}),logHistory(_0x572990(0x1f9),_0x572990(0x30b)+Math['abs'](_0x40b711[_0x572990(0x1ec)])+'\x20'+_0x40b711['coin']+'\x20'+(_0x40b711['number']>0x0?'added':_0x572990(0x1f2))+_0x572990(0x1c0))):logger[_0x572990(0x22e)](_0x572990(0x30b)+Math[_0x572990(0x271)](_0x40b711[_0x572990(0x1ec)])+'\x20'+_0x40b711['coin']+'\x20'+(_0x40b711['number']>0x0?'added':_0x572990(0x1f2))+_0x572990(0x296)));}else logger['debug'](_0x572990(0x253)+Math[_0x572990(0x271)](_0x40b711[_0x572990(0x1ec)])+'\x20'+_0x40b711[_0x572990(0x29b)]+'\x20'+(_0x40b711[_0x572990(0x1ec)]>0x0?_0x572990(0x1c2):_0x572990(0x1f2)));}else logger[_0x572990(0x22e)](_0x572990(0x30b)+Math[_0x572990(0x271)](_0x40b711[_0x572990(0x1ec)])+'\x20'+_0x40b711[_0x572990(0x29b)]+'\x20'+(_0x40b711[_0x572990(0x1ec)]>0x0?_0x572990(0x1c2):'removed')+_0x572990(0x297));}currentCoins=_0x1cf45e,currentCoinsAll=_0x3fd1fd;}}catch(_0x3fb237){if(!exchangeStopped)await handleError(_0x3fb237,_0x572990(0x2a2));}transactionDetectionOngoing=![];}async function watchTransactions(){await sleep(0x14*0x3e8);while(!![]){!botPaused&&!blockTransactionDetection&&coinsLoaded?(detectLiquidityChange(),await sleep(watchTransactionsInterval)):await sleep(0x3e8);}}async function loadSymbols(){const _0x58434a=_0x33e8cb;try{markets=await exchange[_0x58434a(0x312)](!![]),allSymbols=[],Object[_0x58434a(0x1ad)](markets)['forEach'](_0x505c1b=>{const _0x348ca8=_0x58434a;_0x505c1b[0x1][_0x348ca8(0x1c1)]&&_0x505c1b[0x1][_0x348ca8(0x343)]&&allSymbols['push'](_0x505c1b[0x0]);});}catch(_0x4e9473){markets?logger[_0x58434a(0x22e)]('Error\x20in\x20loadSymbols():\x20'+_0x4e9473['toString']()):(loading[_0x58434a(0x26d)]=!![],_0x4e9473[_0x58434a(0x2ee)]()['toLowerCase']()[_0x58434a(0x2ac)](_0x58434a(0x1b6))||_0x4e9473[_0x58434a(0x2ee)]()['toLowerCase']()[_0x58434a(0x2ac)]('request-time')?(logHistory(_0x58434a(0x29d),_0x58434a(0x2ab)),loading[_0x58434a(0x29d)]=_0x58434a(0x250)):handleErrorNoStop(_0x4e9473,_0x58434a(0x357),!![]),logHistory(_0x58434a(0x29d),_0x58434a(0x1f3)),logHistory(_0x58434a(0x29d),_0x58434a(0x25e)+loadCoinsRetryInterval/0xea60+_0x58434a(0x2ea)),logger[_0x58434a(0x22e)](_0x58434a(0x1ca),_0x4e9473),emitLoadingProgress(),botPaused=!![],await sleep(loadCoinsRetryInterval),restartBot());}}function validateSymbols(_0x39da46){const _0x25dc9b=_0x33e8cb;let _0x1cfdd0=[];return _0x39da46[_0x25dc9b(0x304)](_0x242b8c=>{const _0x42ecf7=_0x25dc9b;!allSymbols[_0x42ecf7(0x2ac)](_0x242b8c)?(logHistory('error','Invalid\x20symbol:\x20'+_0x242b8c+_0x42ecf7(0x1cb)),loading[_0x42ecf7(0x310)]=!![],emitLoadingProgress()):_0x1cfdd0[_0x42ecf7(0x33e)](_0x242b8c);}),_0x1cfdd0;}async function initclient(){const _0x1d0a63=_0x33e8cb;proxyEmit('configuration',emittedConfiguration()),proxyEmit(_0x1d0a63(0x18b),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x1d0a63(0x19c),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x1a4145=getNormalizedPerformance();emitPerformance(_0x1a4145),getStartingBalances(_0x1a4145);}async function toggleBotMode(){const _0x244cdf=_0x33e8cb;let _0x36c5fb=dbConfig['get'](_0x244cdf(0x262))[_0x244cdf(0x2d6)]({'botID':botID})[_0x244cdf(0x2b6)]();if(_0x36c5fb){const _0x4a6678=!_0x36c5fb[_0x244cdf(0x209)];dbConfig[_0x244cdf(0x1d0)](_0x244cdf(0x262))['find']({'botID':botID})[_0x244cdf(0x216)]({'headless':_0x4a6678})[_0x244cdf(0x20c)](),config[_0x244cdf(0x209)]=_0x4a6678,proxyEmit(_0x244cdf(0x21c),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x5e6809=_0x33e8cb;process[_0x5e6809(0x2e5)]({'updatebotmanager':!![]},_0x2e3dd0=>{}),logger[_0x5e6809(0x22e)](_0x5e6809(0x219)+config[_0x5e6809(0x209)]);}async function loadCoins(_0x42884e){const _0x5b62e3=_0x33e8cb;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x284c95,_0x2bd973=0x0,_0x50b2a7=0x0;_0x42884e['forEach'](_0x46c789=>{const _0x26ecc6=_0x38ec;loading['remainingSymbols'][_0x26ecc6(0x33e)](_0x46c789);}),loadingCanceled=![];let _0x780296=![];while(_0x284c95!=_0x42884e[_0x5b62e3(0x2d5)]+maxLoadingProgress){_0x284c95=loadingProgress,_0x42884e[_0x5b62e3(0x304)](_0x4ed65c=>{const _0x2247bd=_0x5b62e3;if(gTicker[noslash(_0x4ed65c)]){loading[_0x2247bd(0x2ba)]=loading[_0x2247bd(0x2ba)][_0x2247bd(0x1c3)](_0x37e214=>_0x37e214!=_0x4ed65c);if(!watchedSymbols[_0x2247bd(0x2ac)](_0x4ed65c))watchedSymbols[_0x2247bd(0x33e)](_0x4ed65c);_0x284c95++;}}),loading['progress']=Math[_0x5b62e3(0x31c)](_0x284c95/(_0x42884e[_0x5b62e3(0x2d5)]+maxLoadingProgress)*0x64);loading[_0x5b62e3(0x192)]!=0x64&&(_0x50b2a7>0x1e*0x5&&(loading[_0x5b62e3(0x310)]=!![],emitLoadingProgress()),_0x50b2a7>0x78*0x5&&!_0x780296&&(_0x780296=!![],logHistory(_0x5b62e3(0x29d),_0x5b62e3(0x280)+loading[_0x5b62e3(0x2ba)]['join'](',\x20')+'\x20-\x20bot\x20not\x20started'),logHistory(_0x5b62e3(0x29d),_0x5b62e3(0x25e)+loadCoinsRetryInterval/0xea60+'\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again'),loadingCanceled=!![],await sleep(loadCoinsRetryInterval),restartBot()));if(loadingCanceled){loading[_0x5b62e3(0x26d)]=!![],emitLoadingProgress();break;}else _0x2bd973!=loading[_0x5b62e3(0x192)]&&(_0x2bd973=loading[_0x5b62e3(0x192)],emitLoadingProgress()),_0x50b2a7++,await sleep(0xc8);}_0x284c95==_0x42884e[_0x5b62e3(0x2d5)]+maxLoadingProgress&&(coinsLoaded=!![],process['send']({'status':_0x5b62e3(0x238),'live':'running'},_0x515e86=>{}),_0x780296&&logHistory(_0x5b62e3(0x1f9),'All\x20coin\x20data\x20loaded\x20-\x20bot\x20started'));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x509d9d=_0x33e8cb;proxyEmit('configuration',{...emittedConfiguration(),'configstate':_0x509d9d(0x240)});}function emitLoadingProgress(){const _0x1faaf0=_0x33e8cb;proxyEmit(_0x1faaf0(0x195),loading);}async function getFiat(){const _0x2f59cb=_0x33e8cb;let _0x19d773=gTicker[stablecoins[_0x2f59cb(0x2a8)][_0x2f59cb(0x29b)]],_0x1b39b3=gTicker[stablecoins['usd']['coin']];return{'eur':Number(_0x19d773),'usd':Number(_0x1b39b3)};}function capitalize(_0x3e5b52){const _0x408c5e=_0x33e8cb;return _0x3e5b52[_0x408c5e(0x1b2)](0x0,0x1)[_0x408c5e(0x272)]()+_0x3e5b52[_0x408c5e(0x1b2)](0x1);}function _0x38ec(_0x534c6e,_0x8d80b5){const _0x39db52=_0x4aba();return _0x38ec=function(_0xdcd550,_0x503d21){_0xdcd550=_0xdcd550-0x182;let _0x4aba60=_0x39db52[_0xdcd550];return _0x4aba60;},_0x38ec(_0x534c6e,_0x8d80b5);}function supportedExchanges(){const _0x1e4c57=_0x33e8cb,_0x1967e1=['ws',_0x1e4c57(0x187),_0x1e4c57(0x1cc),_0x1e4c57(0x217),_0x1e4c57(0x190),_0x1e4c57(0x2f3),_0x1e4c57(0x34d),_0x1e4c57(0x322),_0x1e4c57(0x275)];let _0x1cde61=[],_0x18f3be=[],_0x3aeee9=ccxt[_0x1e4c57(0x20f)][_0x1e4c57(0x18b)];_0x3aeee9[_0x1e4c57(0x304)](_0x999ae1=>{const _0xbccbcf=_0x1e4c57;try{const _0x2fe17a=new ccxt[(_0xbccbcf(0x20f))][_0x999ae1]();_0x18f3be[_0xbccbcf(0x33e)](_0x2fe17a);}catch(_0xb6190f){}}),_0x18f3be[_0x1e4c57(0x304)](_0x2b8255=>{const _0x45e242=_0x1e4c57;let _0x32338a=0x0;_0x1967e1[_0x45e242(0x304)](_0x24e968=>{const _0x5d6e1b=_0x45e242;_0x24e968 in _0x2b8255[_0x5d6e1b(0x24e)]&&_0x2b8255[_0x5d6e1b(0x24e)][_0x24e968]&&_0x32338a++;}),_0x32338a==_0x1967e1[_0x45e242(0x2d5)]&&(!excludedExchanges[_0x45e242(0x2ac)](_0x2b8255['id'])&&_0x1cde61[_0x45e242(0x33e)](capitalize(_0x2b8255['id'])));});let _0x1e2486=[];return _0x3aeee9[_0x1e4c57(0x304)](_0x19d320=>{const _0x56ceec=_0x1e4c57;_0x19d320=capitalize(_0x19d320);if(!_0x1cde61[_0x56ceec(0x2ac)](_0x19d320))_0x1e2486[_0x56ceec(0x33e)](_0x19d320);}),_0x1cde61;}function setStartDatePerformance(){const _0x33cde4=_0x33e8cb;if(config&&config[_0x33cde4(0x237)][0x0][_0x33cde4(0x1ce)][_0x33cde4(0x2d5)]!=0x0){const _0xe0987a=config[_0x33cde4(0x237)][0x0][_0x33cde4(0x1ce)];dbPerformance['get'](_0x33cde4(0x31b))[_0x33cde4(0x2d6)]({'date':config[_0x33cde4(0x2a5)]})['assign']({'coins':_0xe0987a})[_0x33cde4(0x20c)]();}}function calculatePnL(_0x2b7ea0,_0x590343,_0x3c5f68,_0x4727ca,_0x32eea3,_0x1d82e6){const _0x29dd12=_0x33e8cb;!_0x2b7ea0[_0x29dd12(0x2ac)]('/'+config[_0x29dd12(0x27b)])&&(_0x3c5f68=_0x3c5f68==_0x29dd12(0x34c)?_0x29dd12(0x281):_0x29dd12(0x34c));!_0x1d82e6[_0x590343]&&(_0x1d82e6[_0x590343]={'number':0x0,'sells':0x0,'buys':0x0,'breakeven':0x0,'realizedPnL':0x0});let _0x1fe72e=0x0,_0x31fdda,_0x3b0474;if(_0x3c5f68==_0x29dd12(0x34c))_0x3b0474=_0x1d82e6[_0x590343][_0x29dd12(0x1ec)]*_0x1d82e6[_0x590343][_0x29dd12(0x182)]+_0x32eea3*_0x4727ca,_0x1d82e6[_0x590343]['number']+=_0x4727ca,_0x1d82e6[_0x590343][_0x29dd12(0x182)]=_0x1d82e6[_0x590343][_0x29dd12(0x1ec)]!=0x0?_0x3b0474/_0x1d82e6[_0x590343][_0x29dd12(0x1ec)]:0x0,_0x1d82e6[_0x590343][_0x29dd12(0x33b)]++;else _0x3c5f68==_0x29dd12(0x281)&&(_0x31fdda=Math[_0x29dd12(0x332)](_0x1d82e6[_0x590343]['number'],_0x4727ca),_0x1fe72e=(_0x32eea3-_0x1d82e6[_0x590343][_0x29dd12(0x182)])*_0x31fdda,_0x3b0474=Math[_0x29dd12(0x1c7)](_0x1d82e6[_0x590343][_0x29dd12(0x1ec)]*_0x1d82e6[_0x590343][_0x29dd12(0x182)]-_0x31fdda*_0x1d82e6[_0x590343][_0x29dd12(0x182)],0x0),_0x1d82e6[_0x590343][_0x29dd12(0x1ec)]-=_0x31fdda,_0x1d82e6[_0x590343][_0x29dd12(0x182)]=_0x1d82e6[_0x590343][_0x29dd12(0x1ec)]!=0x0?_0x3b0474/_0x1d82e6[_0x590343][_0x29dd12(0x1ec)]:0x0,_0x1d82e6[_0x590343][_0x29dd12(0x295)]+=_0x1fe72e,_0x1d82e6[_0x590343]['sells']++);return _0x1fe72e;}async function generatePnL(){const _0x481661=_0x33e8cb;pnlGenerationNeeded=![],logger[_0x481661(0x22e)](_0x481661(0x1fb));const _0x17ee16=dbLogs['get'](_0x481661(0x287))[_0x481661(0x2b6)]();let _0x37c91a={},_0x409493=0x0,_0x3b3fdf=0x0,_0x424adf=config[_0x481661(0x2a5)];const _0x121356=fns[_0x481661(0x244)](_0x424adf,_0x481661(0x26f),new Date()),_0x5673a7=new Date();let _0x2058ec=0x0;for(let _0x559fc3=_0x121356;!fns[_0x481661(0x18d)](_0x5673a7,_0x559fc3);_0x559fc3=fns[_0x481661(0x1b8)](_0x559fc3,0x1)){const _0x1cfd43=fns[_0x481661(0x2dd)](_0x559fc3,'yyyy/MM/dd');while(_0x409493<_0x17ee16['length']){const _0x1a2766=new Date(_0x17ee16[_0x409493][_0x481661(0x1a3)]);if(fns[_0x481661(0x18d)](_0x1a2766,_0x559fc3))_0x409493++;else{if(_0x17ee16[_0x409493][_0x481661(0x1a3)][_0x481661(0x2ac)](_0x1cfd43)){const _0x4a68c5=_0x17ee16[_0x409493];if(_0x4a68c5[_0x481661(0x2f0)]===_0x481661(0x2f4)&&(_0x4a68c5[_0x481661(0x1cd)][_0x481661(0x2ac)](_0x481661(0x2f8))||_0x4a68c5[_0x481661(0x1cd)][_0x481661(0x2ac)](_0x481661(0x230)))){const _0x4dcb69=_0x4a68c5['event'][_0x481661(0x260)](/([A-Z]+\/[A-Z]+) (sell|buy) #([\d.]+) @([\d.]+)/);if(_0x4dcb69){const [,_0x3406d9,_0x5308f9,_0x286998,_0x5c1b9d]=_0x4dcb69,_0x42a19f=_0x3406d9[_0x481661(0x2ac)]('/'+config['basecoin'])?_0x3406d9['split']('/')[0x0]:_0x3406d9[_0x481661(0x285)]('/')[0x1],_0x221b23=calculatePnL(_0x3406d9,_0x42a19f,_0x5308f9,parseFloat(_0x286998),parseFloat(_0x5c1b9d),_0x37c91a);_0x3b3fdf+=_0x221b23;}}_0x409493++;}else break;}}dbPerformance[_0x481661(0x1d0)](_0x481661(0x31b))['find']({'date':_0x1cfd43})[_0x481661(0x216)]({'pnl':_0x3b3fdf})['write']();}dbCoinResults[_0x481661(0x355)]('coins',_0x37c91a)[_0x481661(0x20c)](),logger[_0x481661(0x22e)]('Generated\x20PnL\x20data');const _0x357e56=getNormalizedPerformance();emitPerformance(_0x357e56);}async function updatePnL(_0x134431){const _0x34a746=_0x33e8cb,{symbol:_0x225d06,coin:_0x557313,amount:_0x20a12a,price:_0x4da573,side:_0x74dade,reverse:_0x1ce83e}=_0x134431;let _0x16dadc=dbCoinResults[_0x34a746(0x1d0)](_0x34a746(0x259))[_0x34a746(0x2b6)]();const _0x449d2e=calculatePnL(_0x225d06,_0x557313,_0x74dade,_0x20a12a,_0x4da573,_0x16dadc);dbCoinResults['set'](_0x34a746(0x259),_0x16dadc)[_0x34a746(0x20c)]();const _0x42b768=getTimeStamp()[_0x34a746(0x285)]('\x20')[0x0];let _0x5bc6a5=dbPerformance[_0x34a746(0x1d0)](_0x34a746(0x31b))[_0x34a746(0x2d6)]({'date':_0x42b768})[_0x34a746(0x2b6)]();_0x5bc6a5?(_0x5bc6a5['pnl']+=_0x449d2e,dbPerformance[_0x34a746(0x1d0)](_0x34a746(0x31b))[_0x34a746(0x2d6)]({'date':_0x42b768})[_0x34a746(0x216)](_0x5bc6a5)[_0x34a746(0x20c)]()):await storePerformance();const _0x2da937=getNormalizedPerformance();emitPerformance(_0x2da937);}async function validate24hChanges(){const _0x1b69d8=_0x33e8cb;for(const _0x46361b of currentCoins){if(_0x46361b[_0x1b69d8(0x29b)]!=config[_0x1b69d8(0x27b)]){let _0x474f5f;_0x46361b[_0x1b69d8(0x19d)]?_0x474f5f=formatResult((0x1/(gChange[_0x46361b[_0x1b69d8(0x340)]]/0x64+0x1)-0x1)*0x64,0x3):_0x474f5f=gChange[_0x46361b[_0x1b69d8(0x340)]],_0x474f5f<config[_0x1b69d8(0x326)]&&(logHistory(_0x1b69d8(0x29d),_0x46361b[_0x1b69d8(0x29b)]+_0x1b69d8(0x24f)+_0x474f5f+'%'),logHistory(_0x1b69d8(0x29d),_0x1b69d8(0x1e3)),logHistory('error',_0x1b69d8(0x2d8)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x301682,_0x4d2a16){const _0x293dbe=_0x33e8cb;if(!_0x301682)return!![];const _0x57a539=_0x4d2a16[_0x293dbe(0x285)]('.'),_0x59d9e0=_0x301682[_0x293dbe(0x285)]('.');for(var _0x5693ee=0x0;_0x5693ee<_0x59d9e0[_0x293dbe(0x2d5)];_0x5693ee++){const _0x17b87f=~~_0x59d9e0[_0x5693ee],_0x37e783=~~_0x57a539[_0x5693ee];if(_0x17b87f<_0x37e783)return!![];if(_0x17b87f>_0x37e783)return![];}return![];}async function oneTimeMigration(){const _0x172dfd=_0x33e8cb;let _0x5a8bdc=dbLogs[_0x172dfd(0x1d0)](_0x172dfd(0x2ef))[_0x172dfd(0x2b6)]();if(isOlderVersion(_0x5a8bdc,_0x172dfd(0x2bd))){let _0x3cfe37=[];const _0x272e40=dbLogs['get'](_0x172dfd(0x287))[_0x172dfd(0x2b6)]();_0x272e40[_0x172dfd(0x304)](_0x2c97e1=>{const _0x2e1156=_0x172dfd;_0x3cfe37['push']({'time':_0x2c97e1[_0x2e1156(0x1a3)],'type':_0x2c97e1[_0x2e1156(0x2f0)],'event':_0x2c97e1['event']});}),dbLogs[_0x172dfd(0x1d0)](_0x172dfd(0x287))['assign'](_0x3cfe37)[_0x172dfd(0x20c)]();}let _0x2e7d0d=dbConfig['get']('version')['value']();if(isOlderVersion(_0x2e7d0d,_0x172dfd(0x2bd))){let _0x57c041=dbConfig[_0x172dfd(0x1d0)](_0x172dfd(0x262))['find']({'botID':botID})['value']();if(_0x57c041){let _0x238f85=[];_0x57c041[_0x172dfd(0x189)][_0x172dfd(0x304)](_0x553188=>{const _0x35a025=_0x172dfd;_0x238f85[_0x35a025(0x33e)]({'coin':_0x553188[_0x35a025(0x29b)],'number':_0x553188[_0x35a025(0x263)],'price':_0x553188['startprice']}),delete _0x553188['startnumber'],delete _0x553188[_0x35a025(0x2c1)];});if(_0x238f85[_0x172dfd(0x2d5)]!==0x0)fs[_0x172dfd(0x1e7)](configbackuppath+('starting-balance-'+botID+'.json'),JSON[_0x172dfd(0x346)](_0x238f85,null,0x4),function(_0x4b775f){if(_0x4b775f){}});const _0x4ffd99=(_0x13154e,_0x3a1050)=>{const _0x4e404c=_0x172dfd;let _0x4ae716=[];_0x3a1050['forEach'](_0x166286=>{const _0x384eb9=_0x38ec,_0x1480c1=_0x13154e[_0x384eb9(0x2d6)](_0xcf31fc=>_0xcf31fc[_0x384eb9(0x29b)]==_0x166286['coin']);if(!_0x1480c1)_0x4ae716[_0x384eb9(0x33e)](_0x166286);});let _0x421e8e=[];return _0x13154e[_0x4e404c(0x304)](_0x2b4420=>{const _0xa18390=_0x4e404c,_0x23de84=_0x3a1050['find'](_0x401d30=>_0x401d30['coin']==_0x2b4420['coin']);if(!_0x23de84||_0x23de84[_0xa18390(0x1ec)]==0x0&&_0x2b4420[_0xa18390(0x1ec)]!=0x0)_0x421e8e[_0xa18390(0x33e)](_0x2b4420);}),{'missingDay1':_0x4ae716,'notInDay2':_0x421e8e};},_0x1a5c80=dbPerformance[_0x172dfd(0x1d0)]('data')['cloneDeep']()['value']();if(_0x1a5c80['length']>0x1){const {missingDay1:_0x24794b,notInDay2:_0xc6810e}=_0x4ffd99(_0x238f85,_0x1a5c80[0x1]['coins']);_0x238f85=[..._0x238f85,..._0x24794b],_0xc6810e['forEach'](_0x27ac2e=>{const _0x2c3279=_0x172dfd;let _0x9418a6=_0x238f85[_0x2c3279(0x1dd)](_0x3bc691=>_0x3bc691[_0x2c3279(0x29b)]==_0x27ac2e[_0x2c3279(0x29b)]);_0x9418a6!=-0x1&&_0x238f85['splice'](_0x9418a6,0x1);});}_0x238f85['sort']((_0x5163a4,_0x2e282e)=>_0x5163a4[_0x172dfd(0x29b)]>_0x2e282e['coin']?0x1:_0x2e282e[_0x172dfd(0x29b)]>_0x5163a4[_0x172dfd(0x29b)]?-0x1:0x0);let _0x419cc5=[{'date':_0x57c041[_0x172dfd(0x2a5)],'changes':_0x238f85}];_0x1a5c80[_0x172dfd(0x2d5)]>0x2&&_0x1a5c80[_0x172dfd(0x304)]((_0x34a957,_0x4c5122)=>{const _0xc5fef3=_0x172dfd;if(_0x4c5122>0x0&&_0x4c5122<_0x1a5c80[_0xc5fef3(0x2d5)]-0x1){const {missingDay1:_0x433ecc,notInDay2:_0x45296e}=_0x4ffd99(_0x1a5c80[_0x4c5122][_0xc5fef3(0x259)],_0x1a5c80[_0x4c5122+0x1][_0xc5fef3(0x259)]);_0x238f85=[],(_0x433ecc[_0xc5fef3(0x2d5)]!=0x0||_0x45296e[_0xc5fef3(0x2d5)]!=0x0)&&(_0x433ecc[_0xc5fef3(0x2d5)]!=0x0&&_0x238f85[_0xc5fef3(0x33e)](..._0x433ecc),_0x45296e[_0xc5fef3(0x2d5)]!=0x0&&(_0x45296e['forEach'](_0x5714d9=>{const _0x50b6bc=_0xc5fef3;_0x5714d9['number']=-_0x5714d9[_0x50b6bc(0x1ec)];}),_0x238f85[_0xc5fef3(0x33e)](..._0x45296e)),_0x238f85['sort']((_0x33b05d,_0x2fa8f9)=>_0x33b05d[_0xc5fef3(0x29b)]>_0x2fa8f9[_0xc5fef3(0x29b)]?0x1:_0x2fa8f9['coin']>_0x33b05d[_0xc5fef3(0x29b)]?-0x1:0x0),_0x419cc5[_0xc5fef3(0x33e)]({'date':_0x1a5c80[_0x4c5122+0x1][_0xc5fef3(0x25d)],'changes':_0x238f85}));}}),dbConfig[_0x172dfd(0x1d0)]('bot')[_0x172dfd(0x2d6)]({'botID':botID})['assign']({..._0x57c041,'liquidity':_0x419cc5})[_0x172dfd(0x20c)]();}}if(isOlderVersion(_0x2e7d0d,_0x172dfd(0x315))){let _0x24d92d=dbConfig[_0x172dfd(0x1d0)](_0x172dfd(0x262))[_0x172dfd(0x2d6)]({'botID':botID})['value']();if(_0x24d92d){const _0x207ce1=_0x24d92d[_0x172dfd(0x288)],_0x2ce2e2=_0x207ce1?capitalize(_0x207ce1):_0x172dfd(0x303);dbConfig['get']('bot')[_0x172dfd(0x2d6)]({'botID':botID})[_0x172dfd(0x216)]({'exchange':_0x2ce2e2})[_0x172dfd(0x20c)]();}}if(isOlderVersion(_0x2e7d0d,_0x172dfd(0x2c3))){let _0x42b6c6=dbConfig[_0x172dfd(0x1d0)](_0x172dfd(0x262))[_0x172dfd(0x2d6)]({'botID':botID})[_0x172dfd(0x2b6)]();if(_0x42b6c6){const _0x4b1673=_0x42b6c6[_0x172dfd(0x321)],_0x4c931b=_0x4b1673?'marketcap':![];dbConfig['get'](_0x172dfd(0x262))['find']({'botID':botID})[_0x172dfd(0x216)]({'marketcapEnabled':_0x4c931b})[_0x172dfd(0x20c)]();}}if(isOlderVersion(_0x2e7d0d,_0x172dfd(0x31e))){let _0x3f8a74=dbConfig['get'](_0x172dfd(0x262))['find']({'botID':botID})[_0x172dfd(0x2b6)]();if(_0x3f8a74){const _0x4f9793=_0x3f8a74['autoliquidity'],_0xe5221b=_0x4f9793?_0x172dfd(0x215):![];dbConfig[_0x172dfd(0x1d0)](_0x172dfd(0x262))['find']({'botID':botID})['assign']({'autoliquidity':_0xe5221b})['write']();}}let _0x551dd6=dbPerformance[_0x172dfd(0x1d0)](_0x172dfd(0x2ef))[_0x172dfd(0x2b6)]();isOlderVersion(_0x551dd6,_0x172dfd(0x2bd))&&setStartDatePerformance();let _0x2827b6=dbCoinResults[_0x172dfd(0x1d0)](_0x172dfd(0x2ef))['value']();if(isOlderVersion(_0x2827b6,_0x172dfd(0x353))){let _0x2ccc0a=dbCoinResults[_0x172dfd(0x1d0)]('coins')[_0x172dfd(0x2b6)]();if(_0x2ccc0a[_0x172dfd(0x2d5)]!=0x0)pnlGenerationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x101a31=_0x33e8cb;dbConfig[_0x101a31(0x355)]('version',serverversion)[_0x101a31(0x20c)](),dbPerformance[_0x101a31(0x355)](_0x101a31(0x2ef),serverversion)['write'](),dbLogs[_0x101a31(0x355)]('version',serverversion)[_0x101a31(0x20c)](),dbCoinResults['set'](_0x101a31(0x2ef),serverversion)[_0x101a31(0x20c)]();}function getConfiguration(_0x1ae3e9){const _0x5b9cc2=_0x33e8cb;let _0x4ad552=dbConfig['get'](_0x5b9cc2(0x262))[_0x5b9cc2(0x2d6)]({'botID':_0x1ae3e9})['value']();if(_0x4ad552){let _0x39175c=![];typeof _0x4ad552[_0x5b9cc2(0x22b)]==_0x5b9cc2(0x231)&&(_0x4ad552={..._0x4ad552,'threshold':Number(_0x4ad552[_0x5b9cc2(0x22b)])},_0x39175c=!![]),_0x4ad552[_0x5b9cc2(0x326)]==undefined&&(_0x4ad552={..._0x4ad552,'change24h':-0x14},_0x39175c=!![]),_0x4ad552[_0x5b9cc2(0x18f)]==undefined&&(_0x4ad552={..._0x4ad552,'fiat':_0x5b9cc2(0x185)},_0x39175c=!![]),_0x4ad552['onepagemode']==undefined&&(_0x4ad552={..._0x4ad552,'onepagemode':settings[_0x5b9cc2(0x298)]},_0x39175c=!![]),_0x4ad552[_0x5b9cc2(0x1e4)]==undefined&&(_0x4ad552={..._0x4ad552,'colorscheme':_0x5b9cc2(0x2de)},_0x39175c=!![]),_0x4ad552['autoliquidity']==undefined&&(_0x4ad552={..._0x4ad552,'autoliquidity':'update-liquidity'},_0x39175c=!![]),_0x4ad552['marketcapApi']==undefined&&(_0x4ad552={..._0x4ad552,'marketcapApi':settings[_0x5b9cc2(0x1d2)]?!![]:![]},_0x39175c=!![]),_0x4ad552[_0x5b9cc2(0x321)]==undefined&&(_0x4ad552={..._0x4ad552,'marketcapEnabled':![]},_0x39175c=!![]),_0x4ad552['sandbox']==undefined&&(_0x4ad552={..._0x4ad552,'sandbox':![]},_0x39175c=!![]),_0x39175c&&(_0x4ad552={'botID':_0x4ad552[_0x5b9cc2(0x2ff)],'exchange':_0x4ad552[_0x5b9cc2(0x288)],'apiKey':_0x4ad552[_0x5b9cc2(0x286)],'apiSecret':_0x4ad552[_0x5b9cc2(0x225)],'apiPassword':_0x4ad552[_0x5b9cc2(0x19e)],'basecoin':_0x4ad552[_0x5b9cc2(0x27b)],'botname':_0x4ad552[_0x5b9cc2(0x1be)],'showname':_0x4ad552[_0x5b9cc2(0x29a)],'threshold':_0x4ad552[_0x5b9cc2(0x22b)],'ordertype':_0x4ad552[_0x5b9cc2(0x323)],'timeout':_0x4ad552[_0x5b9cc2(0x310)],'fiat':_0x4ad552[_0x5b9cc2(0x18f)],'startdate':_0x4ad552[_0x5b9cc2(0x2a5)],'recreate':_0x4ad552[_0x5b9cc2(0x328)],'timeshift':_0x4ad552[_0x5b9cc2(0x1fd)],'onepagemode':_0x4ad552['onepagemode'],'headless':_0x4ad552[_0x5b9cc2(0x209)],'cooldown':_0x4ad552[_0x5b9cc2(0x327)],'change24h':_0x4ad552[_0x5b9cc2(0x326)],'emojibuy':_0x4ad552[_0x5b9cc2(0x184)],'emojisell':_0x4ad552[_0x5b9cc2(0x24d)],'colorscheme':_0x4ad552['colorscheme'],'marketcapApi':_0x4ad552['marketcapApi'],'marketcapEnabled':_0x4ad552[_0x5b9cc2(0x321)],'sandbox':_0x4ad552[_0x5b9cc2(0x22f)],'portfolio':_0x4ad552[_0x5b9cc2(0x189)],'autoliquidity':_0x4ad552[_0x5b9cc2(0x334)],'liquidity':_0x4ad552[_0x5b9cc2(0x237)],'openOrders':_0x4ad552[_0x5b9cc2(0x2da)]},dbConfig['get'](_0x5b9cc2(0x262))[_0x5b9cc2(0x2a9)]()['write'](),dbConfig[_0x5b9cc2(0x1d0)](_0x5b9cc2(0x262))['push'](_0x4ad552)[_0x5b9cc2(0x20c)]());}else _0x4ad552={'botID':_0x1ae3e9,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x5b9cc2(0x1b4)+_0x1ae3e9,'showname':![],'threshold':0x3,'ordertype':_0x5b9cc2(0x207),'timeout':0x14,'fiat':_0x5b9cc2(0x185),'startdate':getDate(),'recreate':![],'timeshift':settings['timeshift'],'onepagemode':settings[_0x5b9cc2(0x298)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x5b9cc2(0x2de),'marketcapApi':settings['marketcapApi']?!![]:![],'marketcapEnabled':![],'sandbox':![],'portfolio':[],'autoliquidity':_0x5b9cc2(0x215),'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x4ad552;}function emittedConfiguration(){const _0x32215f=_0x33e8cb;let _0x25da75;if(config[_0x32215f(0x286)]=='')_0x25da75={...config,'configstate':'initial'};else config['apiKey']==_0x32215f(0x22c)?_0x25da75={...config,'configstate':'recovery'}:(_0x25da75={...config,'apiKey':_0x32215f(0x221),'apiSecret':_0x32215f(0x221)},config['apiPassword']&&(_0x25da75['apiPassword']=_0x32215f(0x221)));return _0x25da75[_0x32215f(0x234)]=enableFiatToggle,_0x25da75;}function getSettings(){const _0x527999=_0x33e8cb;return dbSettings[_0x527999(0x1d0)](_0x527999(0x2e0))[_0x527999(0x2b6)]();}function getSecure(){const _0x3cba28=_0x33e8cb;return dbSecure[_0x3cba28(0x1d0)](_0x3cba28(0x278))['value']()||{};}function updateTimeshift(_0x38cf5b){const _0x1633e2=_0x33e8cb;let _0xde99be=dbConfig['get'](_0x1633e2(0x262))[_0x1633e2(0x2d6)]({'botID':botID})[_0x1633e2(0x2b6)]();_0xde99be&&dbConfig[_0x1633e2(0x1d0)](_0x1633e2(0x262))[_0x1633e2(0x2d6)]({'botID':botID})[_0x1633e2(0x216)]({'timeshift':_0x38cf5b})['write'](),config[_0x1633e2(0x1fd)]=_0x38cf5b,proxyEmit('configuration',emittedConfiguration());}function updateOnepagemode(_0x26ee76){const _0x2d15ed=_0x33e8cb;let _0x4833fe=dbConfig[_0x2d15ed(0x1d0)](_0x2d15ed(0x262))[_0x2d15ed(0x2d6)]({'botID':botID})['value']();_0x4833fe&&dbConfig['get'](_0x2d15ed(0x262))['find']({'botID':botID})[_0x2d15ed(0x216)]({'onepagemode':_0x26ee76})[_0x2d15ed(0x20c)](),config['onepagemode']=_0x26ee76,proxyEmit(_0x2d15ed(0x21c),emittedConfiguration());}function updateMarketcapApi(_0x14a462){const _0x50de93=_0x33e8cb,_0x4e82fd=_0x14a462?!![]:![];let _0x4bd74e=dbConfig[_0x50de93(0x1d0)](_0x50de93(0x262))[_0x50de93(0x2d6)]({'botID':botID})[_0x50de93(0x2b6)]();_0x4bd74e&&dbConfig[_0x50de93(0x1d0)](_0x50de93(0x262))[_0x50de93(0x2d6)]({'botID':botID})['assign']({'marketcapApi':_0x4e82fd})[_0x50de93(0x20c)](),config['marketcapApi']=_0x4e82fd,getMarketCap(),proxyEmit(_0x50de93(0x21c),emittedConfiguration());}async function storeConfiguration(_0x1f7ebc){const _0x263958=_0x33e8cb;logger[_0x263958(0x22e)](_0x263958(0x1ed));_0x1f7ebc['configstate']&&delete _0x1f7ebc['configstate'];if(pidBalances)clearTimeout(pidBalances);setBlockTransactionDetection(!![]);let _0xa38ee7=![],_0x706d59=![],_0x47b5e2=[];_0x1f7ebc['portfolio'][_0x263958(0x304)](_0x5273a9=>{const _0x2c6d8d=_0x263958;if(!_0x5273a9[_0x2c6d8d(0x228)]&&_0x5273a9[_0x2c6d8d(0x29b)]!=_0x1f7ebc[_0x2c6d8d(0x27b)])_0x47b5e2[_0x2c6d8d(0x33e)](_0x5273a9[_0x2c6d8d(0x340)]);}),_0x47b5e2[_0x263958(0x304)](_0x35b932=>{const _0x475cef=_0x263958,_0x565c46=currentCoins['find'](_0x3a37ac=>_0x3a37ac[_0x475cef(0x340)]==_0x35b932);!_0x565c46&&(_0xa38ee7=!![]);}),currentCoins['forEach'](_0x57d306=>{const _0x5b5ba9=_0x263958;if(_0x57d306[_0x5b5ba9(0x29b)]!=config[_0x5b5ba9(0x27b)]){const _0x3140ca=_0x47b5e2[_0x5b5ba9(0x2d6)](_0x1eed31=>_0x1eed31==_0x57d306[_0x5b5ba9(0x340)]);!_0x3140ca&&(_0xa38ee7=!![]);}}),_0x1f7ebc[_0x263958(0x189)][_0x263958(0x304)](_0x59f3cd=>{const _0x48d08c=_0x263958,_0xd10032=config['portfolio'][_0x48d08c(0x2d6)](_0x49243d=>_0x49243d['coin']==_0x59f3cd['coin']);if(_0xd10032&&_0x59f3cd[_0x48d08c(0x1d9)]!=_0xd10032[_0x48d08c(0x1d9)])_0x706d59=!![];});let _0x2971c5=dbConfig[_0x263958(0x1d0)](_0x263958(0x262))[_0x263958(0x2d6)]({'botID':botID})['value']();_0x1f7ebc={..._0x1f7ebc,'apiKey':decryptRSA(secure[_0x263958(0x239)],_0x1f7ebc[_0x263958(0x286)]),'apiSecret':decryptRSA(secure[_0x263958(0x239)],_0x1f7ebc['apiSecret'])};_0x1f7ebc[_0x263958(0x19e)]&&(_0x1f7ebc[_0x263958(0x19e)]=decryptRSA(secure['privateKey'],_0x1f7ebc[_0x263958(0x19e)]));let _0x106739=![];if(_0x2971c5){_0x1f7ebc[_0x263958(0x286)]=='************'?_0x1f7ebc['apiKey']=config[_0x263958(0x286)]:_0x106739=!![];_0x1f7ebc['apiSecret']==_0x263958(0x221)?_0x1f7ebc[_0x263958(0x225)]=config[_0x263958(0x225)]:_0x106739=!![];if(_0x1f7ebc['apiPassword']==_0x263958(0x221))_0x1f7ebc[_0x263958(0x19e)]=config['apiPassword'];else{if(_0x1f7ebc[_0x263958(0x19e)])_0x106739=!![];}dbConfig[_0x263958(0x1d0)]('bot')[_0x263958(0x2d6)]({'botID':botID})[_0x263958(0x216)](_0x1f7ebc)[_0x263958(0x20c)]();}else dbConfig[_0x263958(0x1d0)]('bot')['push'](_0x1f7ebc)[_0x263958(0x20c)](),_0x106739=!![],process[_0x263958(0x2e5)]({'status':_0x263958(0x238),'live':_0x263958(0x33f)},_0x285391=>{});process[_0x263958(0x2e5)]({'botname':_0x1f7ebc['botname']},_0x3dfa0c=>{}),config={..._0x1f7ebc},updateBotManager(),proxyEmit('configuration-stored'),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x106739)await reset(!![]);else _0xa38ee7||_0x706d59?await reset(![]):getBalances();setBlockTransactionDetection(![]);}async function storeHeadless(_0x21b306){const _0x45aad3=_0x33e8cb,_0x3d4fad={...config,'headless':_0x21b306[_0x45aad3(0x209)]};let _0x25dd23=dbConfig['get'](_0x45aad3(0x262))[_0x45aad3(0x2d6)]({'botID':botID})[_0x45aad3(0x2b6)]();_0x25dd23&&dbConfig[_0x45aad3(0x1d0)](_0x45aad3(0x262))[_0x45aad3(0x2d6)]({'botID':botID})[_0x45aad3(0x216)](_0x3d4fad)[_0x45aad3(0x20c)](),config={..._0x3d4fad},updateBotManager(),proxyEmit('configuration',emittedConfiguration());}async function storeFiat(_0x2b733c){const _0x255882=_0x33e8cb,_0x2cf94d={...config,'fiat':_0x2b733c};let _0x4eec14=dbConfig[_0x255882(0x1d0)](_0x255882(0x262))[_0x255882(0x2d6)]({'botID':botID})['value']();_0x4eec14&&dbConfig[_0x255882(0x1d0)](_0x255882(0x262))[_0x255882(0x2d6)]({'botID':botID})['assign'](_0x2cf94d)[_0x255882(0x20c)](),config={..._0x2cf94d},proxyEmit(_0x255882(0x21c),emittedConfiguration());}function resetHistory(){const _0x1e8304=_0x33e8cb;logger[_0x1e8304(0x331)]('Resetting\x20bot\x20history');try{if(fs[_0x1e8304(0x2fe)](path[_0x1e8304(0x2f7)](configpath,'bot-'+botID+_0x1e8304(0x1cf))))fs[_0x1e8304(0x28a)](path[_0x1e8304(0x2f7)](configpath,_0x1e8304(0x338)+botID+_0x1e8304(0x1cf)));if(fs[_0x1e8304(0x2fe)](path[_0x1e8304(0x2f7)](configpath,_0x1e8304(0x338)+botID+_0x1e8304(0x1a1))))fs[_0x1e8304(0x28a)](path[_0x1e8304(0x2f7)](configpath,_0x1e8304(0x338)+botID+_0x1e8304(0x1a1)));if(fs[_0x1e8304(0x2fe)](path['join'](configpath,_0x1e8304(0x338)+botID+'-results.json')))fs['unlinkSync'](path[_0x1e8304(0x2f7)](configpath,'bot-'+botID+_0x1e8304(0x2df)));}catch(_0x5a45df){if(_0x5a45df)logger['full'](_0x1e8304(0x258),_0x5a45df);}const _0x1f8fee=getDate();let _0x418ec2=[];currentCoins['forEach'](_0x5332b3=>{const _0x1369b8=_0x1e8304;_0x418ec2[_0x1369b8(0x33e)]({'coin':_0x5332b3['coin'],'number':_0x5332b3[_0x1369b8(0x1ec)],'price':_0x5332b3[_0x1369b8(0x270)]});});let _0xe6de3f=dbConfig[_0x1e8304(0x1d0)]('bot')[_0x1e8304(0x2d6)]({'botID':botID})[_0x1e8304(0x2b6)]();_0xe6de3f&&(dbConfig[_0x1e8304(0x1d0)]('bot')['find']({'botID':botID})[_0x1e8304(0x216)]({'liquidity':[{'date':_0x1f8fee,'changes':_0x418ec2}]})['write'](),config[_0x1e8304(0x237)]=[]),restartBot(!![]);}function noslash(_0x28bbfc){const _0x37f70d=_0x33e8cb;return _0x28bbfc[_0x37f70d(0x2e6)]('/','');}function updateHighestFee(_0x1a0c79){const _0x507cf3=_0x33e8cb;if(_0x1a0c79[_0x507cf3(0x19d)]){let _0x22be82={'filled':_0x1a0c79['filled']*_0x1a0c79['price'],'amount':_0x1a0c79[_0x507cf3(0x196)]*_0x1a0c79[_0x507cf3(0x309)],'side':_0x1a0c79[_0x507cf3(0x30d)]==_0x507cf3(0x281)?_0x507cf3(0x34c):_0x507cf3(0x281),'price':0x1/_0x1a0c79[_0x507cf3(0x309)]};_0x1a0c79={..._0x1a0c79,..._0x22be82};}const _0x389924=defaultFee*_0x1a0c79[_0x507cf3(0x196)]*_0x1a0c79[_0x507cf3(0x309)];lastFees[_0x507cf3(0x243)][_0x507cf3(0x2d5)]===0x14&&lastFees[_0x507cf3(0x243)][_0x507cf3(0x320)](),lastFees[_0x507cf3(0x243)][_0x507cf3(0x33e)](_0x389924),lastFees[_0x507cf3(0x33c)]=Math['max'](...lastFees[_0x507cf3(0x243)]);}async function updateNumberCoinsCcxt(_0x5675b9){const _0x233c08=_0x33e8cb;logger[_0x233c08(0x22e)](_0x233c08(0x301)+_0x5675b9['symbol']+_0x233c08(0x34b)+_0x5675b9[_0x233c08(0x324)]+_0x233c08(0x34b)+_0x5675b9[_0x233c08(0x196)]+_0x233c08(0x2be)+_0x5675b9[_0x233c08(0x319)]+_0x233c08(0x34b)+_0x5675b9['id']);let _0x241eb3=_0x5675b9[_0x233c08(0x324)],_0x256a0a=![];currentCoins[_0x233c08(0x304)](_0x3e634f=>{const _0x3a0b2a=_0x233c08;_0x3e634f[_0x3a0b2a(0x340)]==_0x5675b9[_0x3a0b2a(0x340)]&&(_0x256a0a=!![]);});if(!_0x256a0a)return;const _0x570f70=currentCoins[_0x233c08(0x2d6)](_0x307f21=>_0x307f21['symbol']==_0x5675b9[_0x233c08(0x340)]),_0x121c43=_0x570f70[_0x233c08(0x29b)],_0x1c1cb3=_0x47023c=>{const _0x4d5fea=_0x233c08,_0x1a35e7=currentCoins[_0x4d5fea(0x2d6)](_0x5f2599=>_0x5f2599[_0x4d5fea(0x340)]==_0x5675b9[_0x4d5fea(0x340)]);if(_0x1a35e7)_0x1a35e7[_0x4d5fea(0x2d1)]=_0x47023c;};let _0x19d983=![];for(const _0x257f62 of lastOrders){const _0x2fc067=0x64,_0x4a4fee=0x1388;let _0x375a51=0x0;while(!_0x257f62['orderId']&&_0x375a51*_0x2fc067<_0x4a4fee){_0x375a51++,await sleep(_0x2fc067);}if(_0x375a51>0x0)logger[_0x233c08(0x22e)]('Waited\x20'+_0x375a51*_0x2fc067/0x3e8+_0x233c08(0x2e2));_0x257f62[_0x233c08(0x347)]==_0x5675b9['id']&&(_0x19d983=!![]);}if(_0x241eb3=='open'){_0x1c1cb3('open');if(_0x5675b9[_0x233c08(0x196)]>0x0&&_0x5675b9['filled']<_0x5675b9['amount']){if(_0x19d983){setBlockTransactionDetection(!![]),logger[_0x233c08(0x22e)](_0x233c08(0x21a)+_0x5675b9[_0x233c08(0x196)]+_0x233c08(0x2d2)+_0x5675b9['id']);const _0x33d081=await getCoins(balanceUpdateDelay,undefined,undefined,_0x121c43);[currentCoins,currentCoinsAll]=_0x33d081,setBlockTransactionDetection(![]);}else logger[_0x233c08(0x22e)](_0x233c08(0x21a)+_0x5675b9[_0x233c08(0x196)]+_0x233c08(0x305)+_0x5675b9['id']),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay);}}else{if(_0x241eb3==_0x233c08(0x273)){_0x1c1cb3('canceled'),lastOrders=lastOrders[_0x233c08(0x1c3)](_0x47c6e9=>_0x47c6e9[_0x233c08(0x340)]!=_0x5675b9['symbol']);const _0x58e23b=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x58e23b,setBlockTransactionDetection(![]),await getOpenOrders(),handleOpenOrders();}else{if(_0x241eb3==_0x233c08(0x224)){if(lastOrders)for(const _0x22a0cd of lastOrders){if(_0x22a0cd[_0x233c08(0x347)]==_0x5675b9['id']){logger['debug']('1\x20-\x20FILLED\x20known\x20order:\x20'+_0x5675b9['id']),_0x19d983=!![];if(_0x22a0cd[_0x233c08(0x196)]==0x0){setBlockTransactionDetection(!![]),logger[_0x233c08(0x22e)](_0x233c08(0x2cc)+_0x5675b9['id']);if(_0x5675b9[_0x233c08(0x1bb)])_0x22a0cd[_0x233c08(0x309)]=_0x5675b9[_0x233c08(0x1bb)];else{if(_0x5675b9['price'])_0x22a0cd['price']=_0x5675b9['price'];else{}}_0x22a0cd[_0x233c08(0x196)]=_0x5675b9[_0x233c08(0x196)],updateHighestFee(_0x22a0cd);const _0x1f813c=await getCoins(balanceUpdateDelay,undefined,undefined,_0x121c43);[currentCoins,currentCoinsAll]=_0x1f813c,setBlockTransactionDetection(![]),await validateOrders(),_0x1c1cb3(_0x233c08(0x196)),_0x22a0cd[_0x233c08(0x23b)]={'currency':_0x5675b9[_0x233c08(0x23b)]?_0x5675b9[_0x233c08(0x23b)][_0x233c08(0x339)]:null,'cost':_0x5675b9[_0x233c08(0x23b)]?_0x5675b9[_0x233c08(0x23b)][_0x233c08(0x358)]:0x0},await updatePnL(_0x22a0cd);}}}!_0x19d983&&(logger[_0x233c08(0x22e)](_0x233c08(0x1de)+_0x5675b9['id']),_0x1c1cb3('filled'),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay),await updateOpenOrders(),handleOpenOrders());}}}if(lastBalances){let _0x33d44a=JSON[_0x233c08(0x244)](lastBalances[_0x233c08(0x189)]);const _0x12c268=_0x33d44a[_0x233c08(0x2d6)](_0x26ac1c=>_0x26ac1c[_0x233c08(0x340)]==_0x5675b9[_0x233c08(0x340)]);if(_0x12c268){if(_0x241eb3==_0x233c08(0x2e4))_0x12c268[_0x233c08(0x2d1)]=_0x12c268[_0x233c08(0x2d1)]=='filled'?_0x233c08(0x196):'open';else{if(_0x241eb3==_0x233c08(0x273))_0x12c268['orderstatus']=_0x12c268['orderstatus']==_0x233c08(0x196)?'filled':'canceled';else _0x241eb3==_0x233c08(0x224)&&(_0x12c268[_0x233c08(0x2d1)]=_0x233c08(0x196));}}lastBalances={...lastBalances,'portfolio':JSON[_0x233c08(0x346)](_0x33d44a)},proxyEmit(_0x233c08(0x19c),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x238ab7=_0x33e8cb;await getOpenOrders();let _0x3323eb=![];currentCoins[_0x238ab7(0x304)](_0xe02083=>{const _0x413b6f=_0x238ab7;_0x3323eb=allOpenOrders[_0x413b6f(0x2d6)](_0x21ff93=>_0x21ff93[_0x413b6f(0x340)]==_0xe02083[_0x413b6f(0x340)]),_0xe02083[_0x413b6f(0x2d1)]=_0x3323eb?_0x413b6f(0x2e4):_0x413b6f(0x27f);});}async function fetchBalance(_0x6f7bd4=!![]){const _0x17f5f0=_0x33e8cb;let _0x6cdb6b,_0x173580,_0x4e6222,_0x23b27=0x0;while(!_0x173580&&_0x23b27<maxRetries){try{return _0x6cdb6b=await exchange[_0x17f5f0(0x275)](),_0x173580=_0x6cdb6b[_0x17f5f0(0x1e1)],_0x173580;}catch(_0x24d33f){_0x4e6222=_0x24d33f,_0x23b27++,await sleep(retryInterval);}}return!_0x6f7bd4?handleErrorNoStop(_0x4e6222,_0x17f5f0(0x27a)):await handleError(_0x4e6222,_0x17f5f0(0x27a)),![];}async function getCoins(_0x4f2262=0x0,_0xb820ae=!![],_0x1e2fe3=config['basecoin'],_0x260996){const _0x3e04c7=_0x33e8cb;let _0x2eb97d=[],_0x193544=[],_0x42559c=[],_0x4ae3c5;if(_0x4f2262)await sleep(_0x4f2262);if(botPaused)return[currentCoins,currentCoinsAll];let _0x36381a=![],_0x5c23e3=0x0,_0x311884,_0x4b341f;_0x260996&&(_0x311884=currentCoins[_0x3e04c7(0x2d6)](_0xc482a7=>_0xc482a7['coin']==_0x260996),_0x311884&&(_0x4b341f=_0x311884[_0x3e04c7(0x2eb)],delete _0x311884[_0x3e04c7(0x2eb)]));while(!_0x36381a){_0x4ae3c5=await fetchBalance(_0xb820ae);if(_0x4ae3c5){if(_0x260996){if(_0x4ae3c5[_0x260996]!=_0x4b341f)logger[_0x3e04c7(0x22e)](_0x3e04c7(0x208)+_0x260996+':\x20'+_0x4ae3c5[_0x260996]+'\x20('+_0x4b341f+')'),_0x36381a=!![];else{logger[_0x3e04c7(0x22e)](_0x3e04c7(0x18a)+_0x260996+':\x20'+_0x4ae3c5[_0x260996]+'\x20('+_0x4b341f+')'),_0x5c23e3++;if(_0x5c23e3<balanceUpdateRetries)await sleep(balanceUpdateDelay);else{logger['debug'](_0x3e04c7(0x1e6)+_0x5c23e3+_0x3e04c7(0x256));break;}}}else break;}else return[currentCoins,currentCoinsAll];}for(const [_0x549751,_0x50433b]of Object[_0x3e04c7(0x1ad)](_0x4ae3c5)){_0x42559c[_0x3e04c7(0x33e)](_0x549751);}config[_0x3e04c7(0x189)][_0x3e04c7(0x304)](_0x1f86d4=>{const _0xd60f02=_0x3e04c7;!_0x42559c[_0xd60f02(0x2ac)](_0x1f86d4['coin'])&&(_0x4ae3c5[_0x1f86d4['coin']]=0x0);});if(_0x1e2fe3=='')for(const [_0x65e97d,_0x330658]of Object['entries'](_0x4ae3c5)){_0x330658!=0x0&&_0x2eb97d[_0x3e04c7(0x33e)]({'coin':_0x65e97d});}else for(const [_0x15a956,_0x445ad7]of Object[_0x3e04c7(0x1ad)](_0x4ae3c5)){const _0x4eb3aa=config[_0x3e04c7(0x189)]['find'](_0x25b77e=>_0x25b77e['coin']==_0x15a956),_0x4f00a9=_0x15a956+'/'+_0x1e2fe3,_0x2d4d37=_0x1e2fe3+'/'+_0x15a956,_0x14bcc9=currentCoins[_0x3e04c7(0x2d6)](_0x270e8e=>_0x270e8e[_0x3e04c7(0x29b)]==_0x15a956);if((_0x445ad7!=0x0||_0x4eb3aa)&&(allSymbols[_0x3e04c7(0x2ac)](_0x4f00a9)||_0x15a956==_0x1e2fe3))_0x14bcc9?_0x2eb97d[_0x3e04c7(0x33e)]({..._0x14bcc9,'number':Math['max'](_0x445ad7+(_0x4eb3aa&&_0x4eb3aa[_0x3e04c7(0x1d9)]||0x0),0x0)}):_0x2eb97d[_0x3e04c7(0x33e)]({'coin':_0x15a956,'symbol':_0x4f00a9,'reverse':![],'number':Math[_0x3e04c7(0x1c7)](_0x445ad7+(_0x4eb3aa&&_0x4eb3aa['offset']||0x0),0x0),'orderstatus':_0x3e04c7(0x27f)});else{if((_0x445ad7!=0x0||_0x4eb3aa)&&allSymbols[_0x3e04c7(0x2ac)](_0x2d4d37))_0x14bcc9?_0x2eb97d[_0x3e04c7(0x33e)]({..._0x14bcc9,'number':Math[_0x3e04c7(0x1c7)](_0x445ad7+(_0x4eb3aa&&_0x4eb3aa[_0x3e04c7(0x1d9)]||0x0),0x0)}):_0x2eb97d['push']({'coin':_0x15a956,'symbol':_0x2d4d37,'reverse':!![],'number':Math[_0x3e04c7(0x1c7)](_0x445ad7+(_0x4eb3aa&&_0x4eb3aa[_0x3e04c7(0x1d9)]||0x0),0x0),'orderstatus':_0x3e04c7(0x27f)});else _0x4eb3aa&&_0x2eb97d[_0x3e04c7(0x33e)]({'coin':_0x4eb3aa[_0x3e04c7(0x29b)],'symbol':_0x4eb3aa[_0x3e04c7(0x340)],'reverse':_0x4eb3aa[_0x3e04c7(0x19d)],'number':0x0,'orderstatus':_0x3e04c7(0x27f)});}}return _0x2eb97d[_0x3e04c7(0x294)]((_0x235c13,_0x5643d9)=>_0x235c13['delta']<_0x5643d9[_0x3e04c7(0x24c)]?0x1:_0x5643d9[_0x3e04c7(0x24c)]<_0x235c13[_0x3e04c7(0x24c)]?-0x1:0x0),_0x193544=cloneDeep(_0x2eb97d),_0x2eb97d=_0x2eb97d[_0x3e04c7(0x1c3)](_0x20e64a=>{const _0x17ed55=_0x3e04c7,_0x5378e1=config[_0x17ed55(0x189)][_0x17ed55(0x2d6)](_0x3c23f2=>_0x3c23f2[_0x17ed55(0x29b)]==_0x20e64a['coin']);return _0x5378e1&&!_0x5378e1[_0x17ed55(0x228)];}),[_0x2eb97d,_0x193544];}async function getOpenOrders(){const _0xcf5d1e=_0x33e8cb;let _0xb3661;allOpenOrders=[];try{for(const _0x54fd64 of config['portfolio']){!_0x54fd64['excluded']&&_0x54fd64['coin']!=config[_0xcf5d1e(0x27b)]&&(_0xb3661=await exchange[_0xcf5d1e(0x322)](_0x54fd64[_0xcf5d1e(0x340)]),_0xb3661[_0xcf5d1e(0x2d5)]>0x0&&allOpenOrders['push'](_0xb3661[0x0]));}}catch(_0x3643f7){await handleError(_0x3643f7,_0xcf5d1e(0x2f2));}}async function handleOpenOrders(_0x54c761=0x0){const _0x4e957a=_0x33e8cb;allOpenOrders['length']==0x0&&lockOrders==ORDERS['LOCKED']&&allOrdersPlaced&&(_0x54c761==0x0?(logger[_0x4e957a(0x22e)]('1\x20-\x20Handle\x20open\x20orders'),_0x54c761++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x4e957a(0x22e)](_0x4e957a(0x1a8)),validateOrders(_0x4e957a(0x283))));}async function testAPI(){const _0x158b8b=_0x33e8cb;try{return await exchange[_0x158b8b(0x275)](),!![];}catch(_0x3fac12){loading[_0x158b8b(0x26d)]=!![],_0x3fac12[_0x158b8b(0x2ee)]()[_0x158b8b(0x342)]()['includes'](_0x158b8b(0x1b6))||_0x3fac12[_0x158b8b(0x2ee)]()[_0x158b8b(0x342)]()[_0x158b8b(0x2ac)](_0x158b8b(0x2b1))?(logHistory('error',_0x158b8b(0x2ab)),loading[_0x158b8b(0x29d)]=_0x158b8b(0x250)):handleErrorNoStop(_0x3fac12,'testAPI()',!![]),logHistory(_0x158b8b(0x29d),_0x158b8b(0x2cf)),logHistory('error','Pausing\x20for\x20'+loadCoinsRetryInterval/0xea60+_0x158b8b(0x2ea)),logger[_0x158b8b(0x22e)](_0x158b8b(0x1ca),_0x3fac12),emitLoadingProgress(),botPaused=!![],await sleep(loadCoinsRetryInterval),restartBot();}}async function testNewAPI(_0x20a097){const _0x683528=_0x33e8cb;logger[_0x683528(0x22e)](_0x683528(0x1b0));const _0x4b91da=ccxt[_0x683528(0x20f)][_0x20a097[_0x683528(0x288)][_0x683528(0x342)]()],_0x2097e8=new _0x4b91da({'apiKey':_0x20a097[_0x683528(0x286)],'secret':_0x20a097[_0x683528(0x225)],'options':{'defaultType':'spot'}});if(_0x20a097[_0x683528(0x19e)])_0x2097e8[_0x683528(0x1eb)]=_0x20a097[_0x683528(0x19e)];if(_0x2097e8[_0x683528(0x24e)]['sandbox'])_0x2097e8[_0x683528(0x329)](_0x20a097[_0x683528(0x22f)]);try{await _0x2097e8[_0x683528(0x275)](),botPaused=![];}catch(_0x3b56ff){logger[_0x683528(0x22e)](_0x683528(0x261)+_0x3b56ff[_0x683528(0x2ee)]());throw _0x3b56ff;}}function cloneDeep(_0x27534e){const _0x3226dc=_0x33e8cb;return JSON[_0x3226dc(0x244)](JSON[_0x3226dc(0x346)](_0x27534e));}async function getPortfolio(_0x32cbd9){const _0x3c52cd=_0x33e8cb;let _0x270907=[],_0x4ede9e=[],_0x28707=[],_0x511c50;_0x32cbd9[_0x3c52cd(0x286)]=decryptRSA(secure[_0x3c52cd(0x239)],_0x32cbd9[_0x3c52cd(0x286)]),_0x32cbd9[_0x3c52cd(0x225)]=decryptRSA(secure[_0x3c52cd(0x239)],_0x32cbd9[_0x3c52cd(0x225)]);if(_0x32cbd9['apiPassword'])_0x32cbd9[_0x3c52cd(0x19e)]=decryptRSA(secure[_0x3c52cd(0x239)],_0x32cbd9['apiPassword']);if(_0x32cbd9[_0x3c52cd(0x286)]!=='************'||_0x32cbd9['apiSecret']!==_0x3c52cd(0x221)||_0x32cbd9['apiPassword']&&_0x32cbd9[_0x3c52cd(0x19e)]!==_0x3c52cd(0x221)){if(config[_0x3c52cd(0x288)]){if(_0x32cbd9[_0x3c52cd(0x286)]==_0x3c52cd(0x221))_0x32cbd9[_0x3c52cd(0x286)]=config[_0x3c52cd(0x286)];if(_0x32cbd9[_0x3c52cd(0x225)]==_0x3c52cd(0x221))_0x32cbd9[_0x3c52cd(0x225)]=config[_0x3c52cd(0x225)];if(_0x32cbd9[_0x3c52cd(0x19e)]==_0x3c52cd(0x221))_0x32cbd9[_0x3c52cd(0x19e)]=config[_0x3c52cd(0x19e)];}try{if(_0x32cbd9[_0x3c52cd(0x202)])await testNewAPI(_0x32cbd9);}catch(_0xcc4e3a){if(_0xcc4e3a[_0x3c52cd(0x2ee)]()['includes'](_0x3c52cd(0x226))){logHistory(_0x3c52cd(0x29d),'Invalid\x20API\x20details,\x20please\x20try\x20again\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange'),logHistory(_0x3c52cd(0x29d),_0x3c52cd(0x21f)+_0xcc4e3a['toString']()),proxyEmit('portfolio1',![]);return;}else{if(_0xcc4e3a[_0x3c52cd(0x2ee)]()['includes']('PermissionDenied')){logHistory('error',_0x3c52cd(0x241)),logHistory('error',_0x3c52cd(0x21f)+_0xcc4e3a[_0x3c52cd(0x2ee)]()),proxyEmit(_0x3c52cd(0x264),![]);return;}else{logHistory('error',_0x3c52cd(0x2d7)+_0xcc4e3a[_0x3c52cd(0x2ee)]()),logger[_0x3c52cd(0x22e)]('Error\x20details:',_0xcc4e3a),proxyEmit('portfolio1',![]);return;}}}exchange?updateExchange(_0x32cbd9[_0x3c52cd(0x286)],_0x32cbd9['apiSecret'],_0x32cbd9['apiPassword']):await initExchange(_0x32cbd9[_0x3c52cd(0x288)],_0x32cbd9[_0x3c52cd(0x286)],_0x32cbd9[_0x3c52cd(0x225)],_0x32cbd9[_0x3c52cd(0x19e)],_0x32cbd9[_0x3c52cd(0x22f)]);await loadSymbols();const _0x5f09d7=await getCoins(0x0,![],_0x32cbd9['basecoin']);_0x28707=cloneDeep(_0x5f09d7[0x1]);}else{const _0x30ceda=await getCoins();_0x28707=cloneDeep(_0x30ceda[0x1]);}if(_0x32cbd9[_0x3c52cd(0x27b)]=='')proxyEmit(_0x3c52cd(0x264),!![]),proxyEmit(_0x3c52cd(0x26c),_0x28707);else{_0x28707[_0x3c52cd(0x304)](_0x5943f3=>{const _0x141298=_0x3c52cd;if(_0x5943f3['coin']!=_0x32cbd9['basecoin']&&allSymbols[_0x141298(0x2ac)](_0x5943f3[_0x141298(0x340)]))_0x270907['push'](_0x5943f3[_0x141298(0x340)]);});if(_0x270907[_0x3c52cd(0x2d5)]==0x0)logHistory(_0x3c52cd(0x29d),_0x3c52cd(0x213));else{try{_0x4ede9e=await getTickers(_0x270907);}catch(_0x5a8583){logHistory(_0x3c52cd(0x29d),_0x3c52cd(0x2ae)),logger[_0x3c52cd(0x22e)]('Error\x20details:',_0x5a8583),proxyEmit('portfolio1',![]);return;}_0x28707['forEach'](_0x45266d=>{const _0x485d16=_0x3c52cd;_0x45266d[_0x485d16(0x29b)]!=_0x32cbd9[_0x485d16(0x27b)]?_0x4ede9e[_0x45266d['symbol']]?_0x4ede9e[_0x45266d[_0x485d16(0x340)]][_0x485d16(0x270)]?_0x511c50=_0x45266d[_0x485d16(0x19d)]?0x1/_0x4ede9e[_0x45266d[_0x485d16(0x340)]][_0x485d16(0x270)]:_0x4ede9e[_0x45266d[_0x485d16(0x340)]][_0x485d16(0x270)]:_0x511c50=0x0:_0x511c50=0x0:_0x511c50=0x1,_0x45266d[_0x485d16(0x309)]=formatResult(_0x511c50,0x8);}),await getMarketCap(_0x28707),proxyEmit(_0x3c52cd(0x264),!![]),proxyEmit(_0x3c52cd(0x26c),_0x28707);}}}function truncateTradeAmount(_0x3007af,_0x2e6597){let _0x4fb84e=0x0;try{_0x4fb84e=exchange['amountToPrecision'](_0x3007af,_0x2e6597);}catch(_0x37f322){}return _0x4fb84e;}function checkMinimums(_0x2da21e){const _0x55c31c=_0x33e8cb;let _0x5d8bc5=!![];const _0xa58731=!_0x2da21e[_0x55c31c(0x19d)]?markets[_0x2da21e[_0x55c31c(0x340)]]['limits'][_0x55c31c(0x319)][_0x55c31c(0x332)]:markets[_0x2da21e[_0x55c31c(0x340)]][_0x55c31c(0x201)][_0x55c31c(0x358)]['min'],_0x10cf5d=!_0x2da21e['reverse']?markets[_0x2da21e[_0x55c31c(0x340)]][_0x55c31c(0x201)]['cost'][_0x55c31c(0x332)]:markets[_0x2da21e[_0x55c31c(0x340)]][_0x55c31c(0x201)][_0x55c31c(0x319)][_0x55c31c(0x332)],_0x17c891=truncateTradeAmount(_0x2da21e[_0x55c31c(0x340)],_0x2da21e[_0x55c31c(0x2aa)]);_0x2da21e[_0x55c31c(0x2aa)]=_0x17c891;if(Math[_0x55c31c(0x271)](_0x17c891)<_0xa58731)_0x5d8bc5=![];if(Math['abs'](_0x17c891)*_0x2da21e['last']<_0x10cf5d)_0x5d8bc5=![];let _0x4b1e83='';if(_0x2da21e[_0x55c31c(0x30d)]=='sell'){let _0x47ea70=config[_0x55c31c(0x189)][_0x55c31c(0x2d6)](_0x7a08fa=>_0x7a08fa[_0x55c31c(0x29b)]==_0x2da21e[_0x55c31c(0x29b)]);_0x47ea70[_0x55c31c(0x1d9)]>0x0?Math[_0x55c31c(0x271)](_0x17c891)>_0x2da21e['number']-_0x47ea70[_0x55c31c(0x1d9)]&&(_0x5d8bc5=![],_0x4b1e83=_0x55c31c(0x302)+_0x47ea70[_0x55c31c(0x29b)]+_0x55c31c(0x2c5)):Math['abs'](_0x17c891)>_0x2da21e[_0x55c31c(0x1ec)]&&(_0x5d8bc5=![]);}if(_0x2da21e[_0x55c31c(0x30d)]==_0x55c31c(0x34c)){let _0x211402=config['portfolio'][_0x55c31c(0x2d6)](_0x68d140=>_0x68d140[_0x55c31c(0x29b)]==config['basecoin']),_0xbd5fc1=currentCoins[_0x55c31c(0x2d6)](_0x180b2a=>_0x180b2a['coin']==config[_0x55c31c(0x27b)]);_0x211402[_0x55c31c(0x1d9)]>0x0?Math[_0x55c31c(0x271)](_0x17c891)*_0x2da21e[_0x55c31c(0x270)]>_0xbd5fc1[_0x55c31c(0x1ec)]-_0x211402[_0x55c31c(0x1d9)]&&(_0x5d8bc5=![],_0x4b1e83=_0x55c31c(0x302)+config['basecoin']+_0x55c31c(0x2c5)):Math[_0x55c31c(0x271)](_0x17c891)*_0x2da21e['last']>_0xbd5fc1['number']&&(_0x5d8bc5=![]);}return!_0x5d8bc5&&_0x4b1e83&&!insufficientFundsWarningSent['includes'](_0x2da21e['coin'])&&(logHistory(_0x55c31c(0x34f),_0x4b1e83),insufficientFundsWarningSent['push'](_0x2da21e[_0x55c31c(0x29b)])),_0x5d8bc5;}async function getBalances(_0x23a7ba=!![]){const _0x5d6f96=_0x33e8cb;if(botPaused)return;let _0x4e0020=0x0,_0x1bff83;const _0x1689f5=config[_0x5d6f96(0x22b)];if(config[_0x5d6f96(0x209)]&&config[_0x5d6f96(0x326)]<0x0)await validate24hChanges();currentCoins['forEach'](_0x26786b=>{const _0x4937e3=_0x5d6f96;if(_0x26786b['coin']!=config[_0x4937e3(0x27b)]){let _0x4e2c06=gTicker[noslash(_0x26786b[_0x4937e3(0x340)])];_0x1bff83=_0x26786b['reverse']?0x1/_0x4e2c06:_0x4e2c06;}else _0x1bff83=0x1;let _0x182477=_0x26786b[_0x4937e3(0x1ec)]*_0x1bff83;_0x4e0020+=_0x182477,_0x26786b['last']=formatResult(Number(_0x1bff83),0x8),_0x26786b[_0x4937e3(0x2b6)]=_0x182477;}),currentCoins[_0x5d6f96(0x304)](_0x5056c5=>{const _0x3c7138=_0x5d6f96;let _0x1b2d3a=config['portfolio']['find'](_0x4dc7ad=>_0x4dc7ad[_0x3c7138(0x29b)]==_0x5056c5[_0x3c7138(0x29b)]),_0x458163=Number(_0x1b2d3a[_0x3c7138(0x291)]),_0x7b3957=_0x5056c5[_0x3c7138(0x2b6)]/_0x4e0020*0x64,_0x358d0f=_0x458163*_0x4e0020/0x64/_0x5056c5[_0x3c7138(0x270)]-_0x5056c5[_0x3c7138(0x1ec)];_0x5056c5['distribution']=formatResult(_0x7b3957,0x3),_0x5056c5['target']=formatResult(_0x458163,0x3),_0x5056c5[_0x3c7138(0x2aa)]=formatResult(_0x358d0f,0x8),_0x5056c5['side']='',_0x5056c5[_0x3c7138(0x1af)]=![];if(_0x5056c5[_0x3c7138(0x29b)]!=config[_0x3c7138(0x27b)]){if(_0x5056c5['distribution']>_0x458163)_0x5056c5['side']=_0x3c7138(0x281),_0x5056c5[_0x3c7138(0x1af)]=checkMinimums(_0x5056c5);else _0x5056c5[_0x3c7138(0x291)]<_0x458163&&(_0x5056c5[_0x3c7138(0x30d)]=_0x3c7138(0x34c),_0x5056c5[_0x3c7138(0x1af)]=checkMinimums(_0x5056c5));}_0x5056c5['delta']=_0x5056c5['distribution']/_0x5056c5['target']-0x1;if(_0x5056c5[_0x3c7138(0x2d1)]=='filled'||_0x5056c5['orderstatus']==_0x3c7138(0x273))_0x5056c5[_0x3c7138(0x2d1)]='none';}),currentCoins['sort']((_0x33242a,_0x1d4436)=>_0x33242a[_0x5d6f96(0x24c)]<_0x1d4436[_0x5d6f96(0x24c)]?0x1:_0x1d4436[_0x5d6f96(0x24c)]<_0x33242a[_0x5d6f96(0x24c)]?-0x1:0x0);const _0x552aaa=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x552aaa[_0x5d6f96(0x2a8)],'usd':_0x552aaa['usd'],'portfolio':JSON[_0x5d6f96(0x346)](currentCoins),'threshold':_0x1689f5},proxyEmit(_0x5d6f96(0x19c),{'serverversion':serverversion,'balances':lastBalances});if(_0x23a7ba){if(config[_0x5d6f96(0x209)])headlessMode({'portfolio':currentCoins,'threshold':_0x1689f5});else lockOrders==ORDERS[_0x5d6f96(0x21b)]&&!coolingDown&&notifyBalance({'portfolio':currentCoins,'threshold':_0x1689f5});}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0xd1b487=getNormalizedPerformance();getStartingBalances(_0xd1b487),emitPerformance(_0xd1b487);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}function getPnL(){const _0x2e669b=_0x33e8cb;let _0x4585a8=dbCoinResults[_0x2e669b(0x1d0)]('coins')['value'](),_0x53b751=0x0;return Object[_0x2e669b(0x1ad)](_0x4585a8)[_0x2e669b(0x304)](([_0x1d68db,_0x2bee99])=>{const _0x3213ec=_0x2e669b;_0x53b751+=_0x2bee99[_0x3213ec(0x295)];}),_0x53b751;}async function storePerformance(){const _0x45275f=_0x33e8cb;if(!lastBalances)return;let _0x47c2f2=[],_0x1ea9c9;const _0xfac8d6=getPnL();let _0x13123d=JSON[_0x45275f(0x244)](lastBalances[_0x45275f(0x189)]);_0x13123d[_0x45275f(0x294)]((_0x3602d8,_0x387b29)=>_0x3602d8[_0x45275f(0x29b)]>_0x387b29[_0x45275f(0x29b)]?0x1:_0x387b29[_0x45275f(0x29b)]>_0x3602d8[_0x45275f(0x29b)]?-0x1:0x0),_0x13123d[_0x45275f(0x304)](_0x189131=>{const _0x37f50c=_0x45275f;let _0x431692={'coin':_0x189131[_0x37f50c(0x29b)],'number':_0x189131[_0x37f50c(0x1ec)],'price':_0x189131[_0x37f50c(0x270)]};_0x47c2f2['push'](_0x431692);});const _0x24116a=await getFiat(),_0x3cd9d7=getTimeStamp()['split']('\x20')[0x0],_0x190b40=dbPerformance['get'](_0x45275f(0x31b))[_0x45275f(0x2d6)]({'date':_0x3cd9d7})[_0x45275f(0x2b6)]();_0x1ea9c9={'date':_0x3cd9d7,'eur':_0x24116a[_0x45275f(0x2a8)],'usd':_0x24116a['usd'],'coins':_0x47c2f2,'pnl':_0xfac8d6},_0x190b40?_0x1ea9c9[_0x45275f(0x25d)]!=config['startdate']&&dbPerformance['get'](_0x45275f(0x31b))['find']({'date':_0x3cd9d7})[_0x45275f(0x216)](_0x1ea9c9)[_0x45275f(0x20c)]():dbPerformance[_0x45275f(0x1d0)]('data')[_0x45275f(0x33e)](_0x1ea9c9)[_0x45275f(0x20c)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x4ba6ff=_0x33e8cb;let _0x34392a=[];if(dbPerformance[_0x4ba6ff(0x24e)](_0x4ba6ff(0x31b))['value']()){let _0x276ad8=dbPerformance['get'](_0x4ba6ff(0x31b))[_0x4ba6ff(0x350)]()[_0x4ba6ff(0x1c3)](_0x101a33=>{const _0x53aa5d=_0x4ba6ff;if(_0x101a33[_0x53aa5d(0x259)][_0x53aa5d(0x2d5)]==0x0)return![];else return!![];})[_0x4ba6ff(0x308)]('date')['value'](),_0x4af88e=[...config[_0x4ba6ff(0x237)]];_0x4af88e[_0x4ba6ff(0x294)]((_0x14bc37,_0x3c4362)=>_0x14bc37['date']>_0x3c4362['date']?-0x1:_0x3c4362[_0x4ba6ff(0x25d)]>_0x14bc37[_0x4ba6ff(0x25d)]?0x1:0x0);let _0x17ea45=0x1,_0x232ca6=[],_0x1579d1=0x0;_0x276ad8['slice']()[_0x4ba6ff(0x19d)]()[_0x4ba6ff(0x304)]((_0x3d1ce0,_0x3596bb)=>{const _0x28127c=_0x4ba6ff;if(_0x4af88e[_0x1579d1]){if(_0x276ad8[_0x276ad8[_0x28127c(0x2d5)]-_0x3596bb]&&_0x4af88e[_0x1579d1][_0x28127c(0x25d)]==_0x276ad8[_0x276ad8[_0x28127c(0x2d5)]-_0x3596bb][_0x28127c(0x25d)]){if(_0x3596bb<_0x276ad8['length']){let _0x5db8d3=0x0,_0x4dfeca=0x0;_0x276ad8[_0x276ad8[_0x28127c(0x2d5)]-_0x3596bb][_0x28127c(0x259)][_0x28127c(0x304)](_0x39e629=>{const _0x230339=_0x28127c;_0x4dfeca+=_0x39e629[_0x230339(0x1ec)]*_0x39e629[_0x230339(0x309)];}),_0x4af88e[_0x1579d1]['changes']['forEach'](_0x271982=>{const _0x5ca62c=_0x28127c;_0x5db8d3+=_0x271982['number']*_0x271982[_0x5ca62c(0x309)];}),_0x17ea45*=_0x5db8d3/(_0x4dfeca-_0x5db8d3)+0x1;}_0x1579d1++;}}let _0x2d0efe=0x0;_0x3d1ce0['coins'][_0x28127c(0x304)](_0x318aa5=>{const _0x1ceb44=_0x28127c;_0x2d0efe+=_0x318aa5[_0x1ceb44(0x1ec)]*_0x318aa5['price'];}),_0x232ca6[_0x276ad8[_0x28127c(0x2d5)]-_0x3596bb-0x1]=_0x2d0efe*(_0x17ea45-0x1);});let _0xd9c77c=[];_0x4af88e=[...config['liquidity']]||[];let _0x45437b=0x0;_0x1579d1=0x0,_0x276ad8[_0x4ba6ff(0x304)]((_0x377783,_0x154461)=>{const _0xda3c1b=_0x4ba6ff;if(_0x4af88e[_0x1579d1]){const _0x8c6097=fns[_0xda3c1b(0x244)](_0x4af88e[_0x1579d1]['date'],'yyyy/MM/dd',new Date()),_0x4539a5=fns['parse'](_0x377783['date'],_0xda3c1b(0x26f),new Date());if(fns[_0xda3c1b(0x23e)](_0x8c6097,_0x4539a5)){let _0xa9c868=0x0;_0x4af88e[_0x1579d1]['changes'][_0xda3c1b(0x304)](_0x5d698f=>{const _0x24ac93=_0xda3c1b;!_0xd9c77c[_0x5d698f['coin']]?_0xd9c77c[_0x5d698f[_0x24ac93(0x29b)]]=_0x5d698f[_0x24ac93(0x1ec)]:(_0xa9c868=_0xd9c77c[_0x5d698f[_0x24ac93(0x29b)]],_0xd9c77c[_0x5d698f[_0x24ac93(0x29b)]]+=_0x5d698f['number']);const _0x404b12=_0x377783[_0x24ac93(0x259)][_0x24ac93(0x2d6)](_0x2fe069=>_0x2fe069[_0x24ac93(0x29b)]==_0x5d698f[_0x24ac93(0x29b)]);(!_0x404b12||_0x404b12[_0x24ac93(0x1ec)]==0x0)&&(_0x45437b+=(-_0x5d698f[_0x24ac93(0x1ec)]-_0xa9c868)*_0x5d698f['price']);}),_0x1579d1++;}}_0x377783[_0xda3c1b(0x259)][_0xda3c1b(0x304)]((_0x1d2a7b,_0x123cd0)=>{const _0x2e076e=_0xda3c1b;_0xd9c77c[_0x1d2a7b[_0x2e076e(0x29b)]]&&(_0x1d2a7b[_0x2e076e(0x2b8)]=_0xd9c77c[_0x1d2a7b[_0x2e076e(0x29b)]]);}),_0x34392a[_0xda3c1b(0x33e)]({'date':_0x377783['date'],'eur':_0x377783[_0xda3c1b(0x2a8)],'usd':_0x377783[_0xda3c1b(0x2b5)],'offset':_0x232ca6[_0x154461],'netoffset':_0x45437b,'coins':_0x377783[_0xda3c1b(0x259)],'pnl':_0x377783['pnl']});});}return _0x34392a;}function emitPerformance(_0x16760d){const _0x4bde46=_0x33e8cb;_0x16760d[_0x4bde46(0x2d5)]!==0x0?(proxyEmit(_0x4bde46(0x27c),_0x16760d),lastPerformanceEmitted=getDate()):proxyEmit('performance',[]);}function getPerf(_0x3b4272,_0x5bcab6){const _0x196940=_0x33e8cb;let _0x44f81c=0x0,_0x4b6b3f=0x0,_0x59a553=0x0;_0x3b4272['coins']['forEach'](_0x29350d=>{const _0x2704af=_0x38ec;_0x44f81c+=_0x29350d[_0x2704af(0x1ec)]*_0x29350d[_0x2704af(0x309)];});_0x5bcab6&&(_0x44f81c+=_0x3b4272[_0x196940(0x1d9)]);if(config[_0x196940(0x27b)]===_0x196940(0x31d)||config[_0x196940(0x27b)]===_0x196940(0x1c4)||config['basecoin']===_0x196940(0x2bc))_0x4b6b3f=_0x44f81c*_0x3b4272[_0x196940(0x2a8)],_0x59a553=_0x44f81c*_0x3b4272['usd'];else{if(usdBasecoins[_0x196940(0x2ac)](config['basecoin']))_0x4b6b3f=_0x44f81c*_0x3b4272[_0x196940(0x2a8)]/_0x3b4272[_0x196940(0x2b5)],_0x59a553=_0x44f81c;else config[_0x196940(0x27b)]===_0x196940(0x2b2)&&(_0x4b6b3f=_0x44f81c,_0x59a553=_0x44f81c*_0x3b4272['usd']/_0x3b4272[_0x196940(0x2a8)]);}return[_0x44f81c,_0x4b6b3f,_0x59a553];}function CurrencyFactor(_0x5434e1,_0x94e94,_0x5d2596){const _0x43e70f=_0x33e8cb;let _0x5171d3;if(_0x94e94==='BTC'||_0x94e94===_0x43e70f(0x1c4)||_0x94e94===_0x43e70f(0x2bc))_0x5171d3=_0x5d2596==='EUR'?_0x5434e1[_0x43e70f(0x2a8)]:_0x5434e1[_0x43e70f(0x2b5)];else{if(usdBasecoins[_0x43e70f(0x2ac)](_0x94e94))_0x5171d3=_0x5d2596===_0x43e70f(0x2b2)?_0x5434e1[_0x43e70f(0x2a8)]/_0x5434e1[_0x43e70f(0x2b5)]:0x1;else _0x94e94==='EUR'&&(_0x5171d3=_0x5d2596===_0x43e70f(0x2b2)?0x1:_0x5434e1[_0x43e70f(0x2b5)]/_0x5434e1[_0x43e70f(0x2a8)]);}return _0x5171d3;}function getKPIs(_0x208eb0,_0x36665d=_0x33e8cb(0x2b2)){const _0x45d5af=_0x33e8cb,_0x6ae67e=config['basecoin'],_0x4386b5=lastBalances,_0x3acac9=currentCoins,_0x54300d=getNormalizedPerformance(),_0x4f7cbd=CurrencyFactor(_0x4386b5,config[_0x45d5af(0x27b)],_0x36665d);let _0x10e4ac=0x0;_0x3acac9[_0x45d5af(0x304)](_0x4efa62=>{const _0x2aaca9=_0x45d5af;_0x10e4ac+=_0x4efa62['number']*_0x4efa62[_0x2aaca9(0x270)];});_0x208eb0['includes'](_0x45d5af(0x18f))&&(_0x10e4ac*=_0x4f7cbd);let _0x4f3281;if(_0x10e4ac!==0x0){if(_0x208eb0===_0x45d5af(0x27b)||_0x208eb0==='fiat'){if(_0x208eb0===_0x45d5af(0x27b))_0x4f3281=(_0x10e4ac/startingBalances['basecoin']-0x1)*0x64;else{if(_0x36665d===_0x45d5af(0x2b2))_0x4f3281=(_0x10e4ac/startingBalances[_0x45d5af(0x2a8)]-0x1)*0x64;else _0x4f3281=(_0x10e4ac/startingBalances[_0x45d5af(0x2b5)]-0x1)*0x64;}}if(_0x208eb0[_0x45d5af(0x2ac)](_0x45d5af(0x218))){let _0x3a49a3=0x0;if(startingBalances[_0x45d5af(0x259)])_0x3acac9[_0x45d5af(0x304)](_0xdb91da=>{const _0x41c71b=_0x45d5af;let _0x346672=startingBalances[_0x41c71b(0x259)][_0x41c71b(0x2d6)](_0x269cd3=>_0x269cd3[_0x41c71b(0x29b)]===_0xdb91da['coin']);if(_0x346672&&_0x346672[_0x41c71b(0x29b)]&&_0xdb91da[_0x41c71b(0x1ec)]!==0x0)_0x3a49a3+=_0x346672[_0x41c71b(0x1ec)]*_0xdb91da['last'];});let _0x244f68=0x0;if(_0x54300d[_0x45d5af(0x2d5)]!==0x0){let _0x347b75=_0x54300d[_0x54300d[_0x45d5af(0x2d5)]-0x1];_0x244f68=_0x347b75[_0x45d5af(0x330)];}_0x3a49a3-=_0x244f68;let _0x5f5252;_0x208eb0==='net-basecoin'&&(_0x5f5252=startingBalances['basecoin']),_0x208eb0===_0x45d5af(0x2c7)&&(_0x5f5252=_0x36665d===_0x45d5af(0x2b2)?startingBalances[_0x45d5af(0x2a8)]:startingBalances['usd'],_0x3a49a3*=_0x4f7cbd),_0x4f3281=(_0x10e4ac-_0x3a49a3)/_0x5f5252*0x64,_0x10e4ac=_0x10e4ac-_0x3a49a3;}if(_0x208eb0[_0x45d5af(0x2ac)](_0x45d5af(0x1ef))){if(_0x54300d[_0x45d5af(0x2d5)]!==0x0&&_0x3acac9[_0x45d5af(0x2d5)]!==0x0){let _0x5b773d,_0x256656=_0x54300d[_0x54300d[_0x45d5af(0x2d5)]-0x1][_0x45d5af(0x1ef)];_0x208eb0['includes'](_0x45d5af(0x18f))?(_0x5b773d=_0x36665d===_0x45d5af(0x2b2)?startingBalances[_0x45d5af(0x2a8)]:startingBalances['usd'],_0x256656*=CurrencyFactor(_0x4386b5,_0x6ae67e,_0x36665d)):_0x5b773d=startingBalances[_0x45d5af(0x27b)],_0x4f3281=_0x256656/_0x5b773d*0x64,_0x10e4ac=_0x256656;}}if(_0x4f3281){if(_0x4f3281<0x64)_0x4f3281=_0x4f3281[_0x45d5af(0x32a)](0x2);else{if(_0x4f3281<0x3e8)_0x4f3281=_0x4f3281[_0x45d5af(0x32a)](0x1);else _0x4f3281=_0x4f3281['toFixed'](0x0);}}else _0x4f3281=Number('0')[_0x45d5af(0x32a)](0x2);if(_0x10e4ac){if(Math['abs'](_0x10e4ac)<0.000001)_0x10e4ac=_0x10e4ac[_0x45d5af(0x32a)](0x2);else{if(Math[_0x45d5af(0x271)](_0x10e4ac)<0.1)_0x10e4ac=_0x10e4ac['toFixed'](0x6);else{if(Math['abs'](_0x10e4ac)<0x1)_0x10e4ac=_0x10e4ac['toFixed'](0x5);else{if(Math[_0x45d5af(0x271)](_0x10e4ac)<0xa)_0x10e4ac=_0x10e4ac['toFixed'](0x4);else{if(Math['abs'](_0x10e4ac)<0x64)_0x10e4ac=_0x10e4ac[_0x45d5af(0x32a)](0x3);else{if(Math[_0x45d5af(0x271)](_0x10e4ac)<0x3e8)_0x10e4ac=_0x10e4ac[_0x45d5af(0x32a)](0x2);else _0x10e4ac=_0x10e4ac[_0x45d5af(0x32a)](0x2);}}}}}}else _0x10e4ac=Number('0')[_0x45d5af(0x32a)](0x2);}else _0x4f3281=Number('0')[_0x45d5af(0x32a)](0x2);if(_0x4f3281>=0x0)_0x4f3281='+'+_0x4f3281;return{'value':_0x10e4ac,'change':_0x4f3281};}async function getStartingBalances(_0x38a459,_0x4aeac7=!![]){const _0x3c1206=_0x33e8cb;if(_0x38a459['length']!==0x0){const [_0x3cebd2,_0x50fcaa,_0x592ed0]=getPerf(_0x38a459[0x0],!![]);let _0x531931=[];config[_0x3c1206(0x189)][_0x3c1206(0x304)](_0x17dfd3=>{const _0xb870cd=_0x3c1206;let _0x509025=0x0,_0x488e34;config[_0xb870cd(0x237)][_0xb870cd(0x304)](_0x154f5c=>{const _0x4b347c=_0xb870cd;let _0x572b99=_0x154f5c['changes'][_0x4b347c(0x2d6)](_0x112fe2=>_0x112fe2[_0x4b347c(0x29b)]==_0x17dfd3['coin']);if(_0x572b99){_0x509025+=_0x572b99[_0x4b347c(0x1ec)];if(!_0x488e34)_0x488e34=_0x572b99[_0x4b347c(0x309)];}}),_0x531931[_0xb870cd(0x33e)]({'coin':_0x17dfd3[_0xb870cd(0x29b)],'number':_0x509025,'initialprice':_0x488e34});});const _0xd99f08={'basecoin':_0x3cebd2,'eur':_0x50fcaa,'usd':_0x592ed0,'coins':_0x531931};if(_0x4aeac7)proxyEmit(_0x3c1206(0x2a6),_0xd99f08);startingBalances=_0xd99f08;}}function headlessMode(_0x4f889d){const _0x348a34=_0x33e8cb;let _0x48f4e2=_0x4f889d[_0x348a34(0x189)],_0x488fba=_0x4f889d[_0x348a34(0x22b)],_0x986d2c=[];for(let _0x509b91 of _0x48f4e2){if(_0x509b91[_0x348a34(0x29b)]!=config['basecoin']){if(_0x509b91[_0x348a34(0x24c)]>=_0x488fba/0x64){if(_0x509b91[_0x348a34(0x1af)])_0x986d2c[_0x348a34(0x33e)](_0x509b91);}else{if(_0x509b91['delta']<=-_0x488fba/0x64){if(_0x509b91[_0x348a34(0x1af)])_0x986d2c['push'](_0x509b91);}}}}_0x986d2c['length']>0x0&&placeOrder(_0x986d2c);}function notifyBalance(_0x5db110){const _0x57d310=_0x33e8cb;let _0x5d7222=_0x5db110[_0x57d310(0x189)],_0x4a4402=_0x5db110[_0x57d310(0x22b)],_0x3a36be=[];for(let _0x553e33 of _0x5d7222){if(_0x553e33[_0x57d310(0x29b)]!=config['basecoin']){if(_0x553e33['delta']>=_0x4a4402/0x64){if(_0x553e33[_0x57d310(0x1af)])_0x3a36be[_0x57d310(0x33e)](_0x553e33);}else{if(_0x553e33[_0x57d310(0x24c)]<=-_0x4a4402/0x64){if(_0x553e33[_0x57d310(0x1af)])_0x3a36be[_0x57d310(0x33e)](_0x553e33);}}}}if(_0x3a36be[_0x57d310(0x2d5)]>0x0){let _0x7b49e2=_0x3a36be[_0x57d310(0x316)](_0x557db1=>_0x557db1[_0x57d310(0x29b)]);_0x7b49e2[_0x57d310(0x294)]();let _0x53cc45=_0x7b49e2[_0x57d310(0x2f7)](',\x20');if(!lastCoinsToBalance)logHistory(_0x57d310(0x34f),_0x57d310(0x1ee));lastCoinsToBalance=_0x53cc45;}}function symbolToCoin(_0x5b077e){const _0x5ecea9=_0x33e8cb;let _0x3ecff2;if(_0x5b077e[_0x5ecea9(0x2ac)]('/'+config[_0x5ecea9(0x27b)]))_0x3ecff2=_0x5b077e[_0x5ecea9(0x2e6)]('/'+config[_0x5ecea9(0x27b)],'');if(_0x5b077e[_0x5ecea9(0x2ac)](config['basecoin']+'/'))_0x3ecff2=_0x5b077e[_0x5ecea9(0x2e6)](config['basecoin']+'/','');return _0x3ecff2;}function setLockOrders(_0xa70b36){const _0x6c91eb=_0x33e8cb;lockOrders=_0xa70b36,logger[_0x6c91eb(0x22e)]('Set\x20lock\x20orders\x20to:\x20'+Object[_0x6c91eb(0x1dc)](ORDERS)[lockOrders]);}async function unlockOrders(_0x2313ab=![]){const _0x169ccf=_0x33e8cb;if(allOrdersPlaced&&lockOrders==ORDERS[_0x169ccf(0x317)]){setLockOrders(ORDERS['UNLOCKING']);if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);if(_0x2313ab){const _0x2d51bb=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x2d51bb,setBlockTransactionDetection(![]);}validateOrdersState=_0x169ccf(0x2b8),persistOpenOrders([]),setLockOrders(ORDERS[_0x169ccf(0x21b)]);}}async function validateOrders(_0x5a03d8){const _0x14bc47=_0x33e8cb;if(_0x5a03d8)validateOrdersState=_0x5a03d8;logger[_0x14bc47(0x22e)](_0x14bc47(0x25a)+validateOrdersState+_0x14bc47(0x20e)+Object['keys'](ORDERS)[lockOrders]);let _0x991f2c=[],_0x45e67e=config['ordertype']=='market'?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x14bc47(0x310)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x14bc47(0x317)])return;logger[_0x14bc47(0x22e)](_0x14bc47(0x1c8)+validateOrdersState);for(let _0x1eb21c=lastOrders[_0x14bc47(0x2d5)]-0x1;_0x1eb21c>=0x0;_0x1eb21c--){let _0x158f71=lastOrders[_0x1eb21c],_0x114406=![];_0x158f71[_0x14bc47(0x196)]>0x0&&(_0x114406=!![]),_0x991f2c[_0x14bc47(0x33e)](_0x114406),_0x114406&&config['ordertype']!=_0x14bc47(0x207)&&logHistory(_0x14bc47(0x2f4),'Order\x20filled:\x20'+_0x158f71['symbol']+'\x20'+_0x158f71[_0x14bc47(0x30d)]+'\x20#'+formatResult(_0x158f71[_0x14bc47(0x196)],0x8)+'\x20@'+formatResult(_0x158f71[_0x14bc47(0x309)],0x8)),_0x114406&&lastOrders[_0x14bc47(0x269)](_0x1eb21c,0x1);}persistOpenOrders(lastOrders);const _0x416dd2=coolingDown?_0x14bc47(0x2db):'balancing\x20resumed';if(validateOrdersState==_0x14bc47(0x2b8)){validateOrdersState='ongoing';if(_0x991f2c[_0x14bc47(0x2ac)](![])){}else await unlockOrders();}else{if(validateOrdersState==_0x14bc47(0x20a)){if(_0x991f2c['includes'](![])){}else await unlockOrders();}else{if(validateOrdersState=='final'){let _0x553091=!![];if(_0x991f2c[_0x14bc47(0x2ac)](![])){if(config['ordertype']=='market')logHistory('success',_0x14bc47(0x22d)+Math[_0x14bc47(0x31c)](_0x45e67e*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x416dd2),await unlockOrders(!![]);else{_0x553091=await cancelOrders();if(_0x553091)logHistory(_0x14bc47(0x1f9),'Unfilled\x20order(s)\x20canceled\x20after\x20'+Math[_0x14bc47(0x31c)](_0x45e67e*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x416dd2),await unlockOrders(!![]);else{validateOrdersState='ongoing',logHistory(_0x14bc47(0x29d),'Unfilled\x20order(s)\x20could\x20not\x20be\x20canceled\x20after\x20'+Math[_0x14bc47(0x31c)](_0x45e67e*validateOrderInterval/0xea60)+_0x14bc47(0x2f6)+_0x416dd2),logHistory('error',_0x14bc47(0x1bf));const _0x3804fe=config['ordertype']==_0x14bc47(0x207)?validateOrderTimeout*0x3c*0x3e8:config[_0x14bc47(0x310)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x13ea79=_0x14bc47;validateOrders(_0x13ea79(0x307));},_0x3804fe);}}}else await unlockOrders(!![]);}else{if(validateOrdersState==_0x14bc47(0x283)){if(config['ordertype']!=_0x14bc47(0x207))logHistory(_0x14bc47(0x1f9),_0x14bc47(0x2a4)+_0x416dd2);await unlockOrders(!![]);}}}}}async function cancelOrders(){const _0x4e7127=_0x33e8cb;let _0x4eee47=!![],_0x2e5651;for(const _0xf6445d of lastOrders){let _0x82d48a=![],_0x23affa=0x0;while(!_0x82d48a&&_0x23affa<maxRetries){try{const _0x561dc5=await exchange[_0x4e7127(0x2f3)](_0xf6445d[_0x4e7127(0x347)],_0xf6445d[_0x4e7127(0x340)]);_0x82d48a=!![];}catch(_0x29050c){_0x29050c[_0x4e7127(0x2ee)]()[_0x4e7127(0x2ac)](_0x4e7127(0x29f))||_0x29050c[_0x4e7127(0x2ee)]()[_0x4e7127(0x2ac)](_0x4e7127(0x27d))?_0x82d48a=!![]:(_0x2e5651=_0x29050c,_0x82d48a=![]);}!_0x82d48a&&(_0x23affa++,await sleep(retryInterval));}_0x4eee47=_0x4eee47&&_0x82d48a;}return!_0x4eee47&&await handleError(_0x2e5651,_0x4e7127(0x227)),_0x4eee47;}async function initCoinResults(_0x9d5b32){const _0x586b44=_0x33e8cb;_0x9d5b32?logger[_0x586b44(0x22e)](_0x586b44(0x24b)+_0x9d5b32):logger['debug']('Initializing\x20coin\x20results'),config[_0x586b44(0x189)]['forEach'](_0x10af5b=>{const _0x302adb=_0x586b44;if(!_0x10af5b['excluded']&&_0x10af5b['coin']!=config[_0x302adb(0x27b)]){const _0x1e9e37=currentCoins[_0x302adb(0x2d6)](_0x106098=>_0x106098['coin']==_0x10af5b[_0x302adb(0x29b)]),_0x483100=gTicker[noslash(_0x10af5b[_0x302adb(0x340)])];let _0x2d944f=_0x1e9e37?_0x1e9e37[_0x302adb(0x1ec)]:null,_0x24b7ac=_0x10af5b['reverse']?0x1/_0x483100:_0x483100,_0x115e1b;config['liquidity']['forEach'](_0x1ba25f=>{const _0xf6a23b=_0x302adb;!_0x115e1b&&(_0x115e1b=_0x1ba25f[_0xf6a23b(0x1ce)][_0xf6a23b(0x2d6)](_0x2042bd=>_0x2042bd['coin']==_0x10af5b[_0xf6a23b(0x29b)]),_0x115e1b&&(_0x2d944f=_0x115e1b[_0xf6a23b(0x1ec)],_0x24b7ac=_0x115e1b[_0xf6a23b(0x309)]));});let _0x31880a=dbCoinResults[_0x302adb(0x1d0)](_0x302adb(0x259))['find']({'coin':_0x10af5b[_0x302adb(0x29b)]})[_0x302adb(0x2b6)]();if(!_0x31880a){const _0x44cf7f={'coin':_0x10af5b[_0x302adb(0x29b)],'number':_0x2d944f,'breakeven':_0x24b7ac,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x302adb(0x1d0)]('coins')[_0x302adb(0x33e)](_0x44cf7f)[_0x302adb(0x20c)]();}else{if(_0x9d5b32&&_0x10af5b['coin']==_0x9d5b32){const _0x632373={'coin':_0x10af5b[_0x302adb(0x29b)],'number':_0x2d944f,'breakeven':_0x24b7ac,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x302adb(0x1d0)](_0x302adb(0x259))[_0x302adb(0x2d6)]({'coin':_0x10af5b[_0x302adb(0x29b)]})[_0x302adb(0x216)](_0x632373)[_0x302adb(0x20c)]();}}}});}async function placeOrder(_0x34fd38){const _0x536eed=_0x33e8cb,_0x32d15b=config[_0x536eed(0x323)]==_0x536eed(0x207)?_0x536eed(0x207):_0x536eed(0x336);if(lockOrders==ORDERS['UNLOCKED']&&!coolingDown){setLockOrders(ORDERS[_0x536eed(0x317)]);while(transactionDetectionOngoing){await sleep(0x64);}logger[_0x536eed(0x22e)]('Placing\x20order\x20for:\x20'+_0x34fd38[_0x536eed(0x316)](_0x4c8b90=>_0x4c8b90[_0x536eed(0x29b)])[_0x536eed(0x2f7)](',\x20')),lastCoinsToBalance='',allOrdersPlaced=![],validateOrdersState=_0x536eed(0x2b8);let _0x3284fc=![];lastOrders=[];const _0x2d43d4=config[_0x536eed(0x22b)];for(const _0x19005f of _0x34fd38){let _0x49662e,_0x571c72,_0x5266ee,_0x1cb0c0,_0x387e86,_0x581716=_0x19005f[_0x536eed(0x340)];logger[_0x536eed(0x22e)](_0x536eed(0x245)+_0x19005f[_0x536eed(0x29b)]+'\x20'+_0x19005f[_0x536eed(0x1ec)]+'\x20'+_0x19005f[_0x536eed(0x270)]+'\x20'+_0x19005f['distribution']+'%\x20'+_0x19005f[_0x536eed(0x248)]+'%\x20'+(0x64*_0x19005f[_0x536eed(0x24c)])[_0x536eed(0x32a)](0x2)+_0x536eed(0x32c)+_0x2d43d4[_0x536eed(0x32a)](0x2)+'%)'),insufficientFundsWarningSent=insufficientFundsWarningSent[_0x536eed(0x1c3)](_0x2857fe=>_0x2857fe!==_0x19005f[_0x536eed(0x29b)]);const _0x2c40c3=currentCoins[_0x536eed(0x2d6)](_0x286c86=>_0x286c86[_0x536eed(0x29b)]==_0x19005f[_0x536eed(0x29b)]);_0x2c40c3&&(_0x2c40c3[_0x536eed(0x2eb)]=_0x19005f[_0x536eed(0x1ec)]);try{const _0x3c8859=await exchange['fetchTicker'](_0x581716);_0x49662e=_0x19005f[_0x536eed(0x19d)]?0x1/_0x19005f[_0x536eed(0x270)]:_0x19005f[_0x536eed(0x270)],_0x571c72=_0x3c8859['bid'],_0x5266ee=_0x3c8859[_0x536eed(0x26e)];_0x19005f[_0x536eed(0x19d)]?(_0x1cb0c0=_0x19005f[_0x536eed(0x30d)]==_0x536eed(0x34c)?'sell':'buy',_0x387e86=Math[_0x536eed(0x271)](_0x19005f[_0x536eed(0x2aa)])/_0x49662e):(_0x1cb0c0=_0x19005f[_0x536eed(0x30d)],_0x387e86=Math[_0x536eed(0x271)](_0x19005f[_0x536eed(0x2aa)]));_0x32d15b==_0x536eed(0x336)&&(config[_0x536eed(0x323)]==_0x536eed(0x2b4)&&(_0x49662e=_0x1cb0c0==_0x536eed(0x34c)?_0x571c72:_0x5266ee),config[_0x536eed(0x323)]==_0x536eed(0x212)&&(_0x49662e=_0x1cb0c0==_0x536eed(0x34c)?_0x5266ee:_0x571c72));_0x387e86=formatResult(_0x387e86,0x8),_0x49662e=formatResult(_0x49662e,0x8);const _0x5127c3=_0x1cb0c0=='sell'?config[_0x536eed(0x24d)]?String[_0x536eed(0x24a)]('0x'+config[_0x536eed(0x24d)])+'\x20':'':config['emojibuy']?String[_0x536eed(0x24a)]('0x'+config[_0x536eed(0x184)])+'\x20':'',_0x3a7f08=_0x32d15b==_0x536eed(0x207)?_0x536eed(0x1f8):config[_0x536eed(0x323)]==_0x536eed(0x2b4)?'Limit\x20(high-margin)':_0x536eed(0x30c),_0x42ff21=(Math[_0x536eed(0x188)](Math[_0x536eed(0x2fa)]()*0x35a4e900)+0x5f5e100)[_0x536eed(0x2ee)]();lastOrders[_0x536eed(0x33e)]({'customId':_0x42ff21,'symbol':_0x581716,'coin':_0x19005f[_0x536eed(0x29b)],'amount':_0x387e86,'price':_0x49662e,'side':_0x1cb0c0,'reverse':_0x19005f[_0x536eed(0x19d)],'filled':0x0});let _0x5a8aa3;_0x32d15b=='market'?_0x1cb0c0=='buy'&&[_0x536eed(0x30f),_0x536eed(0x2b9),'Cex',_0x536eed(0x30a),_0x536eed(0x2ca)][_0x536eed(0x2ac)](config[_0x536eed(0x288)])?_0x5a8aa3=await exchange[_0x536eed(0x34d)](_0x581716,_0x32d15b,_0x1cb0c0,_0x387e86,_0x49662e):_0x5a8aa3=await exchange[_0x536eed(0x34d)](_0x581716,_0x32d15b,_0x1cb0c0,_0x387e86,undefined):_0x5a8aa3=await exchange['createOrder'](_0x581716,_0x32d15b,_0x1cb0c0,_0x387e86,_0x49662e);const _0x48adf9=lastOrders[_0x536eed(0x2d5)]-0x1;if(_0x48adf9>=0x0&&lastOrders[_0x48adf9]['customId']==_0x42ff21){lastOrders[_0x48adf9][_0x536eed(0x347)]=_0x5a8aa3['id'];if(_0x5a8aa3[_0x536eed(0x319)])lastOrders[_0x48adf9][_0x536eed(0x319)]=_0x5a8aa3['amount'];if(_0x5a8aa3[_0x536eed(0x309)])lastOrders[_0x48adf9]['price']=_0x5a8aa3[_0x536eed(0x309)];lastOrders[_0x48adf9][_0x536eed(0x23b)]=_0x5a8aa3[_0x536eed(0x23b)];}if(_0x5a8aa3[_0x536eed(0x319)])_0x387e86=_0x5a8aa3[_0x536eed(0x319)];if(_0x5a8aa3['price'])_0x49662e=_0x5a8aa3[_0x536eed(0x309)];if(_0x32d15b=='market')logHistory(_0x536eed(0x2f4),''+_0x5127c3+_0x3a7f08+_0x536eed(0x23c)+_0x581716+'\x20'+_0x1cb0c0+'\x20#'+formatResult(_0x387e86,0x8)+'\x20@'+formatResult(_0x49662e,0x8));else logHistory(_0x536eed(0x2f4),''+_0x5127c3+_0x3a7f08+'\x20order:\x20'+_0x581716+'\x20'+_0x1cb0c0+'\x20#'+formatResult(_0x387e86,0x8)+'\x20@'+formatResult(_0x49662e,0x8));logger[_0x536eed(0x22e)]('ID:\x20'+_0x5a8aa3['id']+'\x20|\x20Custom\x20ID:\x20'+_0x42ff21);if(config[_0x536eed(0x327)]!=0x0){let _0x12c18b=null;if(cooldownTracker[_0x536eed(0x2d5)]==config[_0x536eed(0x327)]-0x1)_0x12c18b=cooldownTracker[_0x536eed(0x320)]();const _0x1ee410=getTimeStamp();cooldownTracker['push'](_0x1ee410);if(_0x12c18b){const _0x2202a1=fns[_0x536eed(0x345)](new Date(_0x1ee410),new Date(_0x12c18b));if(_0x2202a1<cooldownInterval){logHistory(_0x536eed(0x29d),_0x536eed(0x2cd)+config[_0x536eed(0x327)]+_0x536eed(0x220)+cooldownInterval/0x3c+_0x536eed(0x33a)+cooldownPeriod/(0xe10*0x3e8)+'\x20hour'),coolingDown=!![];break;}}}}catch(_0x2e6b2e){if(_0x2e6b2e[_0x536eed(0x2ee)]()[_0x536eed(0x2ac)](_0x536eed(0x198)))lastOrders=lastOrders[_0x536eed(0x1c3)](_0x30ce41=>_0x30ce41['symbol']!=_0x581716),logHistory(_0x536eed(0x29d),_0x536eed(0x191)+_0x581716),_0x3284fc=!![];else{if(_0x2e6b2e[_0x536eed(0x2ee)]()[_0x536eed(0x2ac)](_0x536eed(0x25c)))lastOrders=lastOrders[_0x536eed(0x1c3)](_0x48ff0d=>_0x48ff0d[_0x536eed(0x340)]!=_0x581716),logHistory(_0x536eed(0x29d),_0x536eed(0x1a2)+_0x581716),_0x3284fc=!![];else{if(_0x2e6b2e[_0x536eed(0x2ee)]()[_0x536eed(0x2ac)](_0x536eed(0x27d)))lastOrders=lastOrders[_0x536eed(0x1c3)](_0x18a3a3=>_0x18a3a3[_0x536eed(0x340)]!=_0x581716),logHistory(_0x536eed(0x29d),'Order\x20is\x20invalid:\x20'+_0x581716),logger[_0x536eed(0x22e)](_0x2e6b2e),_0x3284fc=!![];else _0x2e6b2e[_0x536eed(0x2ee)]()[_0x536eed(0x2ac)]('must\x20be\x20greater\x20than\x20minimum\x20amount')?(lastOrders=lastOrders[_0x536eed(0x1c3)](_0x39dc92=>_0x39dc92['symbol']!=_0x581716),logHistory(_0x536eed(0x29d),_0x536eed(0x191)+_0x581716),_0x3284fc=!![]):(lastOrders=lastOrders[_0x536eed(0x1c3)](_0x4d1827=>_0x4d1827[_0x536eed(0x340)]!=_0x581716),await handleError(_0x2e6b2e,'placeOrder()',_0x581716));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders['length']>0x0){const _0x33882b=config[_0x536eed(0x323)]==_0x536eed(0x207)?validateOrderTimeout*0x3c*0x3e8:config[_0x536eed(0x310)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x5ae7d2=_0x536eed;validateOrders(_0x5ae7d2(0x307));},_0x33882b);}else unlockOrders();_0x3284fc&&config[_0x536eed(0x209)]&&(logHistory(_0x536eed(0x29d),'Avoiding\x20continuous\x20order\x20attempts'+pauseBotMsg),await pauseBot(pauseBotInterval)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory('success',_0x536eed(0x1a6)));}else{if(coolingDown)!config[_0x536eed(0x209)]&&logHistory(_0x536eed(0x29d),_0x536eed(0x1e2));else lockOrders!=ORDERS[_0x536eed(0x21b)]&&(!config['headless']&&(config[_0x536eed(0x323)]==_0x536eed(0x207)?logHistory('error',_0x536eed(0x2d9)):logHistory(_0x536eed(0x29d),_0x536eed(0x1c9))));}}function persistOpenOrders(_0x4f83f6){const _0x57f043=_0x33e8cb,_0x320a21={...config,'openOrders':_0x4f83f6};let _0x2b21f0=dbConfig[_0x57f043(0x1d0)](_0x57f043(0x262))[_0x57f043(0x2d6)]({'botID':botID})[_0x57f043(0x2b6)]();_0x2b21f0&&dbConfig['get'](_0x57f043(0x262))[_0x57f043(0x2d6)]({'botID':botID})['assign'](_0x320a21)[_0x57f043(0x20c)]();}function restoreOrders(){const _0x41bdc1=_0x33e8cb;let _0x33f786;config[_0x41bdc1(0x2da)]&&allOpenOrders[_0x41bdc1(0x304)](_0x39611b=>{const _0x3b0fcc=_0x41bdc1,_0x76e58f=config[_0x3b0fcc(0x2da)][_0x3b0fcc(0x2d6)](_0x1da7f1=>_0x1da7f1[_0x3b0fcc(0x347)]==_0x39611b['id']);_0x76e58f&&(lastOrders[_0x3b0fcc(0x33e)](_0x76e58f),_0x33f786=_0x39611b['timestamp']);});if(lastOrders[_0x41bdc1(0x2d5)]>0x0){setLockOrders(ORDERS[_0x41bdc1(0x317)]),validateOrdersState=_0x41bdc1(0x20a),allOrdersPlaced=!![];const _0x3bc17e=new Date()[_0x41bdc1(0x1e8)](),_0x1c71c0=config[_0x41bdc1(0x323)]=='market'?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(_0x33f786+_0x1c71c0>_0x3bc17e){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x29fdbc=_0x41bdc1;validateOrders(_0x29fdbc(0x307));},_0x33f786+_0x1c71c0-_0x3bc17e);}else validateOrders(_0x41bdc1(0x307));}}async function sendMetricsTelegram(){const _0x403af9=_0x33e8cb;if(!coinsLoaded){process[_0x403af9(0x2e5)]({'telegrammsg':_0x403af9(0x232)},_0x2fa8d2=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x530f01='';if(config[_0x403af9(0x29a)])_0x530f01=_0x403af9(0x1d1)+config[_0x403af9(0x1be)]+_0x403af9(0x1e0);else _0x530f01=_0x403af9(0x197)+botID+_0x403af9(0x1e0);const _0x58362b=config[_0x403af9(0x27b)],_0x10acc8=config['fiat'],_0x57275f=getKPIs(_0x403af9(0x27b)),_0xd4cba8=getKPIs(_0x403af9(0x18f),_0x10acc8),_0xa01ca9=getKPIs(_0x403af9(0x314)),_0x197a63=getKPIs(_0x403af9(0x2c7),_0x10acc8),_0x4273bc=getKPIs(_0x403af9(0x236)),_0x47dafb=getKPIs(_0x403af9(0x2cb),_0x10acc8);_0x58362b['includes'](_0x10acc8)?(_0x530f01+='<pre>',_0x530f01+='Value\x20'+_0x58362b+':\x20'+_0x57275f[_0x403af9(0x2b6)]+'\x20('+_0x57275f[_0x403af9(0x233)]+_0x403af9(0x352),_0x530f01+=_0x403af9(0x32f)+_0x58362b+':\x20'+_0xa01ca9[_0x403af9(0x2b6)]+'\x20('+_0xa01ca9[_0x403af9(0x233)]+_0x403af9(0x352),_0x530f01+=_0x403af9(0x313)+_0x58362b+':\x20'+_0x4273bc[_0x403af9(0x2b6)]+'\x20('+_0x4273bc[_0x403af9(0x233)]+_0x403af9(0x352),_0x530f01+=_0x403af9(0x1c6)):(_0x530f01+='<pre>',_0x530f01+='Value\x20'+_0x58362b+':\x20'+_0x57275f[_0x403af9(0x2b6)]+'\x20('+_0x57275f[_0x403af9(0x233)]+_0x403af9(0x352),_0x530f01+=_0x403af9(0x18c)+_0x10acc8+':\x20'+_0xd4cba8[_0x403af9(0x2b6)]+'\x20('+_0xd4cba8[_0x403af9(0x233)]+_0x403af9(0x352),_0x530f01+=_0x403af9(0x32f)+_0x58362b+':\x20'+_0xa01ca9[_0x403af9(0x2b6)]+'\x20('+_0xa01ca9[_0x403af9(0x233)]+_0x403af9(0x352),_0x530f01+=_0x403af9(0x32f)+_0x10acc8+':\x20'+_0x197a63['value']+'\x20('+_0x197a63['change']+'%)\x0a',_0x530f01+=_0x403af9(0x313)+_0x58362b+':\x20'+_0x4273bc[_0x403af9(0x2b6)]+'\x20('+_0x4273bc[_0x403af9(0x233)]+'%)\x0a',_0x530f01+='PnL\x20'+_0x10acc8+':\x20'+_0x47dafb[_0x403af9(0x2b6)]+'\x20('+_0x47dafb['change']+'%)\x0a',_0x530f01+=_0x403af9(0x1c6)),process[_0x403af9(0x2e5)]({'telegrammsg':_0x530f01},_0xaf0b58=>{});}async function sendPortfolioTelegram(){const _0x58f410=_0x33e8cb;if(!coinsLoaded||!currentCoins[0x0][_0x58f410(0x291)]){process[_0x58f410(0x2e5)]({'telegrammsg':_0x58f410(0x232)},_0x13fb45=>{});return;}let _0x3fba18='';if(config['showname'])_0x3fba18=_0x58f410(0x1d1)+config[_0x58f410(0x1be)]+_0x58f410(0x2a7);else _0x3fba18=_0x58f410(0x197)+botID+'\x20portfolio:</b>\x20\x0a\x0a';_0x3fba18+=_0x58f410(0x2e1),_0x3fba18+=_0x58f410(0x1bc),_0x3fba18+='Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a',_0x3fba18+=_0x58f410(0x1bc),currentCoins['forEach'](_0x5a4afe=>{const _0x42bff6=_0x58f410;_0x3fba18+=_0x5a4afe[_0x42bff6(0x29b)][_0x42bff6(0x1fa)](0x7)+'|\x20'+formatPad(_0x5a4afe['distribution'],0x2,0x6)+'|\x20'+formatPad(_0x5a4afe['target'],0x2,0x6)+'|\x20'+formatPad(_0x5a4afe[_0x42bff6(0x24c)]*0x64,0x2,0x6)+'\x0a';}),_0x3fba18+=_0x58f410(0x1c6),process[_0x58f410(0x2e5)]({'telegrammsg':_0x3fba18},_0x40c359=>{});}function formatPad(_0x3738e7,_0x1868a9,_0x57d519){const _0x35f33c=_0x33e8cb,_0x3f7f6c=formatResultString(_0x3738e7,_0x1868a9);return _0x3f7f6c?_0x3f7f6c['padStart'](_0x57d519):''[_0x35f33c(0x211)](_0x57d519);}function logHistory(_0x32bff6,_0x9b183,_0x3a2580=''){const _0x5a8df8=_0x33e8cb;logger[_0x5a8df8(0x331)](''+_0x9b183);let _0x3ea2f3={'time':getTimeStamp(),'type':_0x32bff6,'event':_0x9b183};dbLogs[_0x5a8df8(0x1d0)](_0x5a8df8(0x287))[_0x5a8df8(0x33e)](_0x3ea2f3)['write']();if(_0x3a2580=='')_0x3a2580=_0x9b183;proxyEmit(_0x5a8df8(0x1cd),{'log':_0x3ea2f3,'summary':_0x3a2580}),process['send']({'telegram':{..._0x3ea2f3,'botname':config[_0x5a8df8(0x1be)],'showname':config['showname']}},_0x4f7f60=>{});}function emitHistory(_0x24826b={}){const _0x3a69af=_0x33e8cb;Object[_0x3a69af(0x1dc)](_0x24826b)[_0x3a69af(0x2d5)]==0x0&&(_0x24826b={'type':[_0x3a69af(0x2f4),_0x3a69af(0x1cd)],'event':'','page':0x1});if(_0x24826b['type'][_0x3a69af(0x2ac)]('event'))_0x24826b['type'][_0x3a69af(0x269)](_0x24826b['type'][_0x3a69af(0x349)](_0x3a69af(0x1cd)),0x1,_0x3a69af(0x29d),_0x3a69af(0x34f),'success');if(dbLogs[_0x3a69af(0x24e)](_0x3a69af(0x287))[_0x3a69af(0x2b6)]()){let _0x2991b0=dbLogs[_0x3a69af(0x1d0)]('logs')['filter'](_0x4fb82a=>{const _0x1a5a05=_0x3a69af;if(_0x24826b['type'][_0x1a5a05(0x2d5)]==0x0)return![];else return _0x24826b[_0x1a5a05(0x2f0)]['includes'](_0x4fb82a[_0x1a5a05(0x2f0)]);})['filter'](_0x69c382=>{const _0x4b3612=_0x3a69af;if(_0x24826b[_0x4b3612(0x1cd)]=='')return!![];else return _0x69c382[_0x4b3612(0x1cd)][_0x4b3612(0x342)]()[_0x4b3612(0x2ac)](_0x24826b[_0x4b3612(0x1cd)][_0x4b3612(0x342)]());})[_0x3a69af(0x308)](_0x3a69af(0x1a3)),_0x3b5365=_0x2991b0[_0x3a69af(0x2b6)]()['length'];_0x2991b0=_0x2991b0[_0x3a69af(0x19d)]()[_0x3a69af(0x19f)]((_0x24826b[_0x3a69af(0x249)]-0x1)*logPageSize,_0x24826b[_0x3a69af(0x249)]*logPageSize-0x1)[_0x3a69af(0x19d)]()['value'](),proxyEmit(_0x3a69af(0x26a),{'logs':_0x2991b0,'total':_0x3b5365});}else proxyEmit(_0x3a69af(0x26a),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x1916d3){const _0x2fe725=_0x33e8cb;if(dbLogs[_0x2fe725(0x24e)](_0x2fe725(0x287))[_0x2fe725(0x2b6)]()){const _0x5e8c1f=dbLogs[_0x2fe725(0x1d0)](_0x2fe725(0x287))[_0x2fe725(0x308)](_0x2fe725(0x1a3))['filter'](_0x5e530a=>{const _0xf9db90=_0x2fe725;return _0x5e530a[_0xf9db90(0x2f0)]==_0xf9db90(0x2f4);})[_0x2fe725(0x2b6)]();dbLogs[_0x2fe725(0x1d0)](_0x2fe725(0x287))[_0x2fe725(0x2a9)]()[_0x2fe725(0x20c)](),dbLogs[_0x2fe725(0x1d0)](_0x2fe725(0x287))[_0x2fe725(0x216)](_0x5e8c1f)['write'](),emitHistory(_0x1916d3);}}function _0x4aba(){const _0x123156=['active','added','filter','ETH','TUSD','</pre>','max','2\x20-\x20Validate\x20orders:\x20','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','Error\x20details:','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','fetchTicker','event','changes','-events.json','get','<b>','marketcapApi','deleteHistoryAlerts','/backup/','function','\x20uses\x20','quick','(((.+)+)+)+$','offset','util','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','keys','findIndex','1\x20-\x20FILLED\x20unknown\x20order:\x20','USDP','\x20metrics:</b>\x20\x0a\x0a','total','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','colorscheme','constructor','Stopped\x20fetching\x20balance\x20after\x20','writeFile','getTime','cancelLoading','\x20closed\x20the\x20connection\x20(see:\x20hodlerhacks.com/fix/5)','password','number','Saving\x20configuration','Manual\x20balancing\x20required','pnl','Signature\x20for\x20this\x20request\x20is\x20not\x20valid',':\x20Bot\x20','removed','Failed\x20to\x20load\x20market\x20data\x20-\x20bot\x20not\x20started','Insufficient\x20funds\x20to\x20execute\x20order:\x20','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','sendPortfolioTelegram','storeHeadless','Market','success','padEnd','Generating\x20PnL\x20data','sha256','timeshift','placeOrder','ExchangeNotAvailable','\x20|\x20exchange:\x20','limits','testApi','1788MIRJCz','watchOrders()','search','uncaughtException','market','Valid\x20balance\x20for\x20','headless','ongoing','argv','write','getMinutes','\x20|\x20lock\x20orders:\x20','pro','9JGdBHu','padStart','limit-low','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','Updating\x20API\x20key\x20(not\x20saved\x20in\x20config\x20file\x20yet)','update-liquidity','assign','watchTrades','net','Headless:\x20','1\x20-\x20partially\x20FILLED\x20(','UNLOCKED','configuration','log','getFullYear','Error\x20details:\x20','\x20orders\x20in\x20less\x20than\x20','************','axios','bb-settings.json','closed','apiSecret','AuthenticationError','cancelOrders()','excluded','pid','3699576INWfNb','threshold','***','Order(s)\x20not\x20validated\x20after\x20','debug','sandbox','Market\x20order','string','Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute','change','enableFiatToggle','Exception\x20thrown\x20in\x20','pnl-basecoin','liquidity','enabled','privateKey','kill','fee','\x20order:\x20','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','isEqual','market_cap','loading-canceled','Exchange\x20permission\x20denied\x20-\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','Initializing\x20exchange','recent20','parse','Trigger:\x20','basecoinvalue','211255AAZXPV','target','page','fromCodePoint','Resetting\x20coin\x20results:\x20','delta','emojisell','has','\x20has\x20a\x2024h\x20drop\x20of\x20','timestamp-issue','watchTradesForSymbols','\x20exchange\x20error:\x20','Fee\x20discount\x20refund\x20detected:\x20','\x20blocked\x20API\x20(RateLimitExceeded)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','bitmex','\x20attempts','showConfig','Error\x20while\x20deleting\x20files:\x20','coins','1\x20-\x20Validate\x20orders:\x20','path','Invalid\x20quantity','date','Pausing\x20for\x20','\x20not\x20available\x20(see:\x20hodlerhacks.com/fix/5)','match','Error\x20in\x20testNewAPI():\x20','bot','startnumber','portfolio1','sendMetricsTelegram','emitHistory','initTickers()','/USDT','splice','event-history','./logs/','portfolio2','cancel','ask','yyyy/MM/dd','last','abs','toUpperCase','canceled','Unknown\x20error:\x20','fetchBalance','createWriteStream','lowdb','secure','yargs/yargs','fetchBalance()','basecoin','performance','InvalidOrder','RateLimitExceeded','none','Failed\x20to\x20load\x20coin\x20data\x20for\x20','sell','USDT','no\x20open\x20orders','marketcap','split','apiKey','logs','exchange','1014YXJPjr','unlinkSync','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20for\x20','quote','ExchangeError','mkdirSync','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','switch-manual','distribution','pki','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','sort','realizedPnL','\x20-\x20bot\x20already\x20running\x20in\x20manual\x20mode','\x20-\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','onepagemode','./config/','showname','coin','getPortfolio','error','bb-secure.json','OrderNotFound','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','CoinMarketCap\x20data\x20could\x20not\x20be\x20updated\x20-\x20will\x20try\x20again\x20in\x201\x20hour','detectLiquidityChange()','watchTradesForSymbols()','No\x20more\x20open\x20orders\x20-\x20','startdate','starting-balances','\x20portfolio:</b>\x20\x0a\x0a','eur','remove','trade','Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)','includes','getStartingBalances','Unknown\x20error\x20-\x20check\x20logs','OnMaintenance','test','request-time','EUR','\x0aSymbol(s):\x20','limit-high','usd','value','Resuming\x20(','initial','Bitget','remainingSymbols','PermissionDenied','PAXG','2.3.5','\x20/\x20','freeze','11140340aekoKD','startprice','production','2.6.22','1403747paJcWd','\x20due\x20to\x20offset','storeFiat','net-fiat','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','InsufficientFunds','Huobipro','pnl-fiat','2\x20-\x20handling\x20FILLED\x20order:\x20','Executed\x20','sqrt','Failed\x20to\x20connect\x20to\x20the\x20exchange\x20-\x20bot\x20not\x20started','create','orderstatus',')\x20known\x20order:\x20','/EUR','Block\x20transaction\x20detection:\x20','length','find','Error\x20occurred:\x20','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','openOrders','balancing\x20resumes\x20when\x20cooldown\x20ends','getHours','format','red_yellow_blue','-results.json','settings','<pre>','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','Cryptocom','open','send','replace','RETRY\x20-\x20Problem\x20resolved\x20after\x20','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)','status\x20code\x20401','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','prevnumber','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','storeConfiguration','toString','version','type','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','getOpenOrders()','cancelOrder','order','\x20minutes','\x20minutes\x20-\x20','join','Order\x20filled','resetHistory','random','4FNUuMW','\x20|\x20highest\x20fee:\x20','./version.json','existsSync','botID','RSA-OAEP','0\x20-\x20EXECUTION:\x20','Insufficient\x20funds\x20to\x20place\x20order\x20for\x20','Binance','forEach',')\x20unknown\x20order:\x20',':\x20timer\x20>','final','sortBy','price','Huobi','Portfolio\x20change\x20detected:\x20','Limit\x20(low-margin)','side','message','Bybit','timeout','\x20>\x20[DEBUG]\x20','loadMarkets','PnL\x20','net-basecoin','2.6.0','map','LOCKED','initclient','amount','Loading\x20completed','data','round','BTC','2.6.23','fetchTickers()','shift','marketcapEnabled','fetchOpenOrders','ordertype','status','lowdb/adapters/FileSync','change24h','cooldown','recreate','setSandboxMode','toFixed','5489304oNWogr','%\x20(','bots','42154QbBIVd','Net\x20','netoffset','full','min','\x20>\x20details:','autoliquidity','\x20not\x20responding\x20(see:\x20hodlerhacks.com/fix/5)','limit','code','bot-','currency','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','buys','highest','percentage','push','running','symbol','args','toLowerCase','spot','InvalidNonce','differenceInSeconds','stringify','orderId','defaults','indexOf','privateKeyFromPem','\x20|\x20','buy','createOrder','getMonth','warning','cloneDeep','3RbPWEf','%)\x0a','2.7.1','NetworkError','set','Initializing\x20exchange:\x20already\x20done','loadSymbols()','cost','breakeven','token\x20is\x20expired','emojibuy','USD','Network\x20error\x20details:','fetchTickers','floor','portfolio','Invalid\x20balance\x20for\x20','exchanges','Value\x20','isBefore','Exchange','fiat','watchOrders','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','progress','marketcapsqrt','secret','coin-loading-progress','filled','<b>Bot\x20','MIN_NOTIONAL','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','slider','26000lvzxTI','balances','reverse','apiPassword','slice','\x20-\x20go\x20back\x20and\x20try\x20again','-performance.json','Order\x20amount\x20is\x20invalid:\x20','time','\x20MB','\x20>\x20','Cooldown\x20ended\x20-\x20balancing\x20resumed','restart','2\x20-\x20Handled\x20open\x20orders','date-fns','decode64','RETRY\x20-\x20Error\x20in\x20','getDate','entries','\x20blocked\x20API\x20(DDoSProtection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','valid','Test\x20new\x20API','Portfolio\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','substring','heapUsed','Bot\x20','Initiating\x20bot\x20restart','timestamp','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','addDays','memoryUsage','\x20network\x20error:\x20','average','-------------------------------\x0a',',\x20must\x20be\x20a\x203\x20digit\x20number','botname','Will\x20continue\x20to\x20wait\x20for\x20order(s)\x20to\x20be\x20filled\x20and\x20try\x20to\x20cancel\x20again\x20later','\x20-\x20bot\x20switched\x20to\x20manual\x20mode'];_0x4aba=function(){return _0x123156;};return _0x4aba();}async function pauseBot(_0x279a5b=pauseBotIntervalShort,_0x35749f,_0x2ad613,_0x9d844e=![]){const _0x4a3737=_0x33e8cb,_0x4a4537=new Date()[_0x4a3737(0x1e8)]();if(!lastErrorShown||_0x4a4537-lastErrorShown>=_0x279a5b){lastErrorShown=_0x4a4537;if(!lastBotPause)lastBotPause=_0x4a4537,consecutivePauses=0x1;else{if(_0x4a4537-lastBotPause-_0x279a5b<0x5a*0x3e8){consecutivePauses++;if(consecutivePauses>maxPauseRetries){if(_0x9d844e){logHistory('error',_0x35749f+'\x20>\x20stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();return;}else logHistory(_0x4a3737(0x29d),_0x35749f+pauseBotMsg),_0x279a5b=pauseBotInterval;}}else consecutivePauses=0x1;lastBotPause=_0x4a4537;}_0x2ad613?logger[_0x4a3737(0x22e)]('('+consecutivePauses+')\x20'+_0x35749f+_0x4a3737(0x333),_0x2ad613):logger[_0x4a3737(0x22e)]('('+consecutivePauses+')\x20'+_0x35749f);if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);await sleep(_0x279a5b),botPaused=![],_0x279a5b==pauseBotIntervalShort?resumeBot(!![]):resumeBot(![]);}}}async function killBot(){const _0xb44e88=_0x33e8cb;botPaused=!![],await sleep(0x3e8),process['send']({'stop':_0xb44e88(0x23a)},_0xe5cfc0=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x11c207,_0x206832,_0x27573f=![]){const _0x491ea8=_0x33e8cb;if(botPaused)return;let _0x54879b;const _0x59bcb1=config[_0x491ea8(0x288)]||_0x491ea8(0x18e);if(_0x206832)logger[_0x491ea8(0x22e)](_0x491ea8(0x235)+_0x206832);const _0x2a088a=()=>{const _0x5351bb=_0x491ea8;loading[_0x5351bb(0x29d)]='api-issue',emitLoadingProgress();};if(_0x11c207['toString']()[_0x491ea8(0x2ac)]('API-key\x20format\x20invalid'))logHistory('error',_0x59bcb1+_0x491ea8(0x1f5)),_0x2a088a();else{if(_0x11c207[_0x491ea8(0x2ee)]()[_0x491ea8(0x2ac)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory('error',_0x59bcb1+_0x491ea8(0x23d)),_0x2a088a();else{if(_0x11c207[_0x491ea8(0x2ee)]()[_0x491ea8(0x2ac)](_0x491ea8(0x226)))config[_0x491ea8(0x19e)]?_0x54879b=_0x59bcb1+'\x20API\x20key,\x20secret\x20or\x20password\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange':_0x54879b=_0x59bcb1+_0x491ea8(0x293),logHistory(_0x491ea8(0x29d),_0x54879b+'\x20(see:\x20hodlerhacks.com/fix/1)'),_0x2a088a();else{if(_0x11c207['toString']()[_0x491ea8(0x2ac)](_0x491ea8(0x2bb)))logHistory(_0x491ea8(0x29d),_0x59bcb1+_0x491ea8(0x2c8)),_0x2a088a();else{if(!_0x27573f)await handleError(_0x11c207,null);}}}}}async function handleError(_0x556e70,_0x5531b1,_0x557f14=''){const _0x25f495=_0x33e8cb;if(botPaused)return;let _0x4475ce;const _0x3a31bb=config[_0x25f495(0x288)]||_0x25f495(0x18e);if(_0x5531b1)logger['debug'](_0x25f495(0x235)+_0x5531b1);if(_0x556e70[_0x25f495(0x2ee)]()[_0x25f495(0x2ac)]('DDoSProtection'))_0x4475ce=_0x3a31bb+_0x25f495(0x1ae),await pauseBot(undefined,_0x4475ce,_0x556e70);else{if(_0x556e70[_0x25f495(0x2ee)]()[_0x25f495(0x2ac)](_0x25f495(0x27e)))_0x4475ce=_0x3a31bb+_0x25f495(0x254),await pauseBot(undefined,_0x4475ce,_0x556e70);else{if(_0x556e70[_0x25f495(0x2ee)]()[_0x25f495(0x2ac)](_0x25f495(0x1ff))||_0x556e70[_0x25f495(0x2ee)]()[_0x25f495(0x2ac)](_0x25f495(0x2af)))_0x4475ce=_0x3a31bb+_0x25f495(0x25f),await pauseBot(undefined,_0x4475ce,_0x556e70['toString']());else{if(_0x556e70['toString']()['includes']('RequestTimeout'))_0x4475ce=_0x3a31bb+_0x25f495(0x335),await pauseBot(undefined,_0x4475ce,_0x556e70[_0x25f495(0x2ee)]());else{if(_0x556e70[_0x25f495(0x2ee)]()[_0x25f495(0x2ac)]('NetworkError:\x20connection\x20closed\x20by\x20remote\x20server'))_0x4475ce=_0x3a31bb+_0x25f495(0x1ea),await pauseBot(undefined,_0x4475ce,_0x556e70[_0x25f495(0x2ee)]());else{if(_0x556e70[_0x25f495(0x2ee)]()[_0x25f495(0x342)]()['includes']('timestamp')||_0x556e70[_0x25f495(0x2ee)]()[_0x25f495(0x342)]()['includes']('request-time'))_0x4475ce=_0x25f495(0x2ab),await pauseBot(undefined,_0x4475ce,_0x556e70['toString']());else{if(_0x556e70[_0x25f495(0x2ee)]()[_0x25f495(0x2ac)](_0x25f495(0x344)))_0x4475ce=_0x3a31bb+'\x20rejected\x20your\x20API\x20request\x20(see:\x20hodlerhacks.com/fix/4)',await pauseBot(undefined,_0x4475ce,_0x556e70[_0x25f495(0x2ee)]());else{if(_0x556e70 instanceof ccxt[_0x25f495(0x354)])_0x4475ce=_0x3a31bb+_0x25f495(0x1ba)+_0x556e70[_0x25f495(0x2ee)](),logger[_0x25f495(0x22e)](_0x25f495(0x186),_0x556e70),await pauseBot(undefined,_0x4475ce,_0x556e70);else{if(_0x556e70[_0x25f495(0x2ee)]()['includes']('API-key\x20format\x20invalid'))logHistory(_0x25f495(0x29d),_0x3a31bb+'\x20API\x20key\x20is\x20invalid'),logHistory(_0x25f495(0x29d),_0x25f495(0x2e8)),await killBot();else{if(_0x556e70[_0x25f495(0x2ee)]()['includes'](_0x25f495(0x1f0)))logHistory(_0x25f495(0x29d),_0x3a31bb+'\x20API\x20secret\x20is\x20invalid'),logHistory(_0x25f495(0x29d),_0x25f495(0x2e8)),await killBot();else{if(_0x556e70[_0x25f495(0x2ee)]()[_0x25f495(0x2ac)](_0x25f495(0x226))&&_0x556e70[_0x25f495(0x2ee)]()['includes'](_0x25f495(0x183)))_0x4475ce=_0x3a31bb+_0x25f495(0x2ec),await pauseBot(undefined,_0x4475ce,_0x556e70,!![]);else{if(_0x556e70[_0x25f495(0x2ee)]()[_0x25f495(0x2ac)](_0x25f495(0x226)))config['apiPassword']?_0x4475ce=_0x3a31bb+'\x20API\x20key,\x20secret\x20or\x20password\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange':_0x4475ce=_0x3a31bb+_0x25f495(0x293),logHistory('error',_0x4475ce),logHistory(_0x25f495(0x29d),_0x25f495(0x2e8)),await killBot();else{if(_0x556e70['toString']()[_0x25f495(0x2ac)](_0x25f495(0x2bb)))logHistory(_0x25f495(0x29d),_0x3a31bb+_0x25f495(0x1b7)),logHistory('error','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)'),await killBot();else{if(_0x556e70[_0x25f495(0x2ee)]()['includes'](_0x25f495(0x2c9)))logHistory(_0x25f495(0x29d),_0x25f495(0x1f4)+_0x557f14),logger[_0x25f495(0x22e)](_0x25f495(0x1ca),_0x556e70);else{if(_0x556e70 instanceof ccxt[_0x25f495(0x28d)]){_0x4475ce=_0x3a31bb+_0x25f495(0x252)+_0x556e70[_0x25f495(0x2ee)]();if(_0x557f14)_0x4475ce+=_0x25f495(0x2b3)+_0x557f14;await pauseBot(undefined,_0x4475ce,_0x556e70);}else{_0x4475ce=_0x25f495(0x274)+_0x556e70[_0x25f495(0x2ee)]();if(_0x557f14)_0x4475ce+='\x0aSymbol(s):\x20'+_0x557f14;await pauseBot(undefined,_0x4475ce);}}}}}}}}}}}}}}}}function decryptRSA(_0xfc6939,_0x2dbacf){const _0x56d26c=_0x33e8cb,_0x1ebd91=forge[_0x56d26c(0x292)][_0x56d26c(0x34a)](_0xfc6939),_0x448287=_0x1ebd91['decrypt'](forge[_0x56d26c(0x1da)][_0x56d26c(0x1aa)](_0x2dbacf),_0x56d26c(0x300),{'md':forge['md'][_0x56d26c(0x1fc)][_0x56d26c(0x2d0)](),'mgf1':{'md':forge['md'][_0x56d26c(0x1fc)][_0x56d26c(0x2d0)]()}});return _0x448287;}async function withRetry(_0x4ce823,_0x1f4b08){const _0x156194=_0x33e8cb;let _0x16ae18=![],_0x5170a3=0x0,_0x318f6d,_0x875748;while(_0x5170a3<maxRetries){try{_0x318f6d=await _0x1f4b08();break;}catch(_0x1db026){_0x875748=_0x1db026,!_0x16ae18?(_0x16ae18=!![],logger[_0x156194(0x22e)](_0x156194(0x1ab)+_0x4ce823+':',_0x1db026[_0x156194(0x2ee)]())):await sleep(retryInterval);}_0x5170a3++;}if(_0x5170a3==0x0)return _0x318f6d;if(_0x5170a3>=maxRetries)throw _0x875748;else return logger[_0x156194(0x22e)](_0x156194(0x2e7)+_0x5170a3+_0x156194(0x256)),_0x318f6d;}function formatResult(_0x58be87,_0x162e54){return parseFloat(_0x58be87['toFixed'](_0x162e54));}function formatResultTruncate(_0x5ece23,_0x5d54c0){const _0x15aca3=_0x33e8cb;let _0x3dec64=formatResultString(_0x5ece23,0xa),_0x36ac54=_0x3dec64[_0x15aca3(0x349)]('.');return _0x36ac54!=-0x1&&(_0x3dec64=_0x3dec64[_0x15aca3(0x19f)](0x0,_0x36ac54+_0x5d54c0+0x1)),Number(_0x3dec64);}function formatResultString(_0x202a0f,_0x144776){const _0x55ba63=_0x33e8cb;let _0x3951e5;if(!(''+_0x202a0f)[_0x55ba63(0x2ac)]('e'))_0x3951e5=+(Math[_0x55ba63(0x31c)](_0x202a0f+'e+'+_0x144776)+'e-'+_0x144776);else{let _0x464288=(''+_0x202a0f)[_0x55ba63(0x285)]('e'),_0xba32bd='';+_0x464288[0x1]+_0x144776>0x0&&(_0xba32bd='+'),_0x3951e5=+(Math['round'](+_0x464288[0x0]+'e'+_0xba32bd+(+_0x464288[0x1]+_0x144776))+'e-'+_0x144776);}return Number(_0x3951e5)[_0x55ba63(0x32a)](_0x144776);}function getServerTime(){const _0x128cce=_0x33e8cb,_0x34213c=new Date();return _0x34213c[_0x128cce(0x21e)]()+'/'+(_0x34213c[_0x128cce(0x34e)]()+0x1)[_0x128cce(0x2ee)]()['padStart'](0x2,'0')+'/'+_0x34213c[_0x128cce(0x1ac)]()[_0x128cce(0x2ee)]()[_0x128cce(0x211)](0x2,'0')+'\x20'+_0x34213c[_0x128cce(0x2dc)]()[_0x128cce(0x2ee)]()[_0x128cce(0x211)](0x2,'0')+':'+_0x34213c[_0x128cce(0x20d)]()[_0x128cce(0x2ee)]()[_0x128cce(0x211)](0x2,'0')+':'+_0x34213c['getSeconds']()[_0x128cce(0x2ee)]()[_0x128cce(0x211)](0x2,'0');}function getTimeStamp(){const _0x10d9ed=_0x33e8cb,_0x8aa591=shiftedTime();return _0x8aa591[_0x10d9ed(0x21e)]()+'/'+(_0x8aa591[_0x10d9ed(0x34e)]()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x8aa591[_0x10d9ed(0x1ac)]()[_0x10d9ed(0x2ee)]()[_0x10d9ed(0x211)](0x2,'0')+'\x20'+_0x8aa591[_0x10d9ed(0x2dc)]()[_0x10d9ed(0x2ee)]()['padStart'](0x2,'0')+':'+_0x8aa591['getMinutes']()[_0x10d9ed(0x2ee)]()[_0x10d9ed(0x211)](0x2,'0')+':'+_0x8aa591['getSeconds']()[_0x10d9ed(0x2ee)]()['padStart'](0x2,'0');}function getDate(){const _0x41b1ee=_0x33e8cb,_0x524209=shiftedTime();return _0x524209[_0x41b1ee(0x21e)]()+'/'+(_0x524209[_0x41b1ee(0x34e)]()+0x1)[_0x41b1ee(0x2ee)]()[_0x41b1ee(0x211)](0x2,'0')+'/'+_0x524209['getDate']()[_0x41b1ee(0x2ee)]()[_0x41b1ee(0x211)](0x2,'0');}function getHour(){const _0x1a41b4=_0x33e8cb,_0x318d16=shiftedTime();return _0x318d16[_0x1a41b4(0x2dc)]()[_0x1a41b4(0x2ee)]()[_0x1a41b4(0x211)](0x2,'0');}function sleep(_0x435f25){return new Promise(_0x2d7638=>setTimeout(_0x2d7638,_0x435f25));}function shiftedTime(){const _0x4df8e3=_0x33e8cb,_0xab0837=new Date();let _0x3748bd=_0xab0837;if(config&&config['timeshift']!==0x0)_0x3748bd=fns['add'](_0xab0837,{'hours':config[_0x4df8e3(0x1fd)]});return _0x3748bd;}function timer(_0x25fcf0){const _0x45025b=_0x33e8cb,_0x524797=new Date();!lasttime?console[_0x45025b(0x21d)](getTimeStamp()+':\x20timer\x20>',_0x25fcf0,_0x524797):console[_0x45025b(0x21d)](getTimeStamp()+_0x45025b(0x306),_0x25fcf0,(_0x524797-lasttime)/0x3e8),lasttime=_0x524797;}