const _0x5c0674=_0x52df;(function(_0x4a9b10,_0x56794c){const _0x1c874f=_0x52df,_0x3836ff=_0x4a9b10();while(!![]){try{const _0xa1f4c8=-parseInt(_0x1c874f(0xc2))/0x1*(-parseInt(_0x1c874f(0xce))/0x2)+parseInt(_0x1c874f(0xe2))/0x3*(parseInt(_0x1c874f(0x20a))/0x4)+-parseInt(_0x1c874f(0x1f9))/0x5+parseInt(_0x1c874f(0x277))/0x6*(parseInt(_0x1c874f(0x14e))/0x7)+-parseInt(_0x1c874f(0x142))/0x8+-parseInt(_0x1c874f(0x128))/0x9*(-parseInt(_0x1c874f(0x137))/0xa)+-parseInt(_0x1c874f(0x199))/0xb;if(_0xa1f4c8===_0x56794c)break;else _0x3836ff['push'](_0x3836ff['shift']());}catch(_0x44adaa){_0x3836ff['push'](_0x3836ff['shift']());}}}(_0x5f46,0xd3b19));const _0x1a0b2b=function(){let _0x10620d=!![];return function(_0x4abeaa,_0x1a3795){const _0x5d31aa=_0x10620d?function(){if(_0x1a3795){const _0x103b5a=_0x1a3795['apply'](_0x4abeaa,arguments);return _0x1a3795=null,_0x103b5a;}}:function(){};return _0x10620d=![],_0x5d31aa;};}(),_0xedade5=_0x1a0b2b(this,function(){const _0x3ecb8c=_0x52df;return _0xedade5['toString']()['search'](_0x3ecb8c(0x10d))['toString']()[_0x3ecb8c(0x1f4)](_0xedade5)[_0x3ecb8c(0x163)](_0x3ecb8c(0x10d));});_0xedade5();'use strict';const ccxt=require(_0x5c0674(0x25f)),low=require(_0x5c0674(0x280)),FileSync=require(_0x5c0674(0xff)),fs=require('fs'),fns=require(_0x5c0674(0x288)),forge=require('node-forge'),util=require(_0x5c0674(0x25d)),argv=require(_0x5c0674(0x1e4))(process['argv']['slice'](0x2))['argv'],path=require(_0x5c0674(0xe6)),axios=require(_0x5c0674(0x26a));let exchange,gTicker={},gChange={};const usdBasecoins=[_0x5c0674(0x1c9),_0x5c0674(0x1a5),_0x5c0674(0x256),_0x5c0674(0x103),_0x5c0674(0x1ca),_0x5c0674(0x144)],excludedExchanges=['bitmex'],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x5c0674(0x12b)]({'LOCKED':0x0,'UNLOCKING':0x1,'UNLOCKED':0x2});let lockOrders=ORDERS[_0x5c0674(0x1b6)],validateOrdersState,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotIntervalShort=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0x5c0674(0x1be)+pauseBotInterval/0xea60+_0x5c0674(0x201),maxPauseRetries=0x6,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,watchTransactionsInterval=0x3c*0x3e8,schedulerInterval=0x3c*0x3c*0x3e8,retryInterval=0x3e8,maxRetries=0x5,logPageSize=0x14,defaultFee=0.003;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidOrdersInitialTimeout,pidOrdersTimeout,botPaused=![],transactionDetectionOngoing=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x5dc,balanceUpdateRetries=0x5;let enableFiatToggle;const serverversion=require(_0x5c0674(0xee))[_0x5c0674(0x1d5)],environment=require('./version.json')[_0x5c0674(0x241)]||'production',botID=process[_0x5c0674(0xdd)][0x2]||_0x5c0674(0x203),pattern=/^[0-9]{3}$/;function _0x52df(_0x5db651,_0x1f6662){const _0x409915=_0x5f46();return _0x52df=function(_0xedade5,_0x1a0b2b){_0xedade5=_0xedade5-0xc1;let _0x5f46b1=_0x409915[_0xedade5];return _0x5f46b1;},_0x52df(_0x5db651,_0x1f6662);}!pattern['test'](botID)&&(console[_0x5c0674(0x257)]('Error:\x20Invalid\x20argument\x20'+botID+_0x5c0674(0x105)),killBot());const userID=process[_0x5c0674(0xdd)][0x3]||'',configpath=userID?_0x5c0674(0x19c)+userID+'/':'./config/',logspath=userID?_0x5c0674(0x225)+userID+'/':_0x5c0674(0x225),loggerfile=fs['createWriteStream'](logspath+_0x5c0674(0x10c),{'flags':'a'});!fs[_0x5c0674(0xd6)](configpath)&&fs['mkdirSync'](configpath);!fs[_0x5c0674(0xd6)](logspath)&&fs['mkdirSync'](logspath);const configfile=configpath+_0x5c0674(0x16d)+botID+_0x5c0674(0xfe),logfile=configpath+_0x5c0674(0x16d)+botID+_0x5c0674(0xd2),performancefile=configpath+_0x5c0674(0x16d)+botID+_0x5c0674(0x1bf),coinresultsfile=configpath+_0x5c0674(0x16d)+botID+_0x5c0674(0xe3),settingsfile=configpath+_0x5c0674(0x1e3),securefile=configpath+_0x5c0674(0x1f2),configbackuppath=configpath+'/backup/',adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs['defaults']({'logs':[],'version':serverversion})[_0x5c0674(0x1b1)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x5c0674(0xf5)]({'data':[],'version':serverversion})[_0x5c0674(0x1b1)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig['defaults']({'bot':[],'version':serverversion})[_0x5c0674(0x1b1)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults['defaults']({'coins':[],'version':serverversion})[_0x5c0674(0x1b1)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0,settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x37b5b3=>{const _0x27c68b=_0x5c0674;console[_0x27c68b(0x257)](_0x37b5b3);},'simple':_0x3913a1=>{const _0x2ba073=_0x5c0674;console[_0x2ba073(0x257)](_0x3913a1),loggerfile[_0x2ba073(0x1b1)](util[_0x2ba073(0x251)](_0x3913a1)+'\x0a');},'full':async(_0x4ec18f,_0x310a38='')=>{const _0xd9a564=_0x5c0674;let _0xed0918;if(config['showname'])_0xed0918=getTimeStamp()+':\x20'+config[_0xd9a564(0xef)]+_0xd9a564(0x1a0)+_0x4ec18f;else _0xed0918=getTimeStamp()+_0xd9a564(0x16b)+botID+_0xd9a564(0x1a0)+_0x4ec18f;console['log'](_0xed0918),loggerfile[_0xd9a564(0x1b1)](util[_0xd9a564(0x251)](_0xed0918)+'\x0a'),_0x310a38&&(console['log'](_0x310a38),loggerfile[_0xd9a564(0x1b1)](util['format'](_0x310a38)+'\x0a'));},'debug':async(_0x2ca16d,_0x1ec697='')=>{const _0x57fe5e=_0x5c0674;let _0x136f00;if(config[_0x57fe5e(0xd8)])_0x136f00=getTimeStamp()+':\x20'+config['botname']+_0x57fe5e(0xd4)+_0x2ca16d;else _0x136f00=getTimeStamp()+_0x57fe5e(0x16b)+botID+'\x20>\x20[DEBUG]\x20'+_0x2ca16d;if(debugging)console[_0x57fe5e(0x257)](_0x136f00);loggerfile[_0x57fe5e(0x1b1)](util[_0x57fe5e(0x251)](_0x136f00)+'\x0a');if(_0x1ec697){if(debugging)console[_0x57fe5e(0x257)](_0x1ec697);loggerfile[_0x57fe5e(0x1b1)](util[_0x57fe5e(0x251)](_0x1ec697)+'\x0a');}}};process['on']('uncaughtException',function(_0x5773dd){const _0x40ed67=_0x5c0674;handleError(_0x5773dd,_0x40ed67(0x14c));});settings['timeshift']!=config[_0x5c0674(0x1d0)]&&updateTimeshift(settings[_0x5c0674(0x1d0)]);settings[_0x5c0674(0xfa)]!=config[_0x5c0674(0xfa)]&&updateOnepagemode(settings['onepagemode']);(settings[_0x5c0674(0x1c4)]&&!config[_0x5c0674(0x1c4)]||!settings[_0x5c0674(0x1c4)]&&config[_0x5c0674(0x1c4)])&&updateMarketcapApi(settings['marketcapApi']);process[_0x5c0674(0x115)]({'started':'running'},_0x38c9fd=>{}),initializeProcessListeners();function proxyEmit(_0x43d4b1,_0x56f4ce=null){const _0x2fb80=_0x5c0674;process[_0x2fb80(0x115)]({'function':_0x43d4b1,'args':_0x56f4ce},_0x3b4d54=>{});}function initializeProcessListeners(){const _0x1a3488=_0x5c0674;process['on'](_0x1a3488(0x180),_0x363777=>{const _0xf2c442=_0x1a3488;switch(Object[_0xf2c442(0x101)](_0x363777)[0x0]){case _0xf2c442(0x1d0):_0x363777[_0xf2c442(0x1d0)]!=undefined&&(settings[_0xf2c442(0x1d0)]=_0x363777[_0xf2c442(0x1d0)],updateTimeshift(settings['timeshift']));break;case _0xf2c442(0xfa):_0x363777['onepagemode']!=undefined&&(settings[_0xf2c442(0xfa)]=_0x363777[_0xf2c442(0xfa)],updateOnepagemode(settings[_0xf2c442(0xfa)]));break;case _0xf2c442(0x1c4):_0x363777['marketcapApi']!=undefined&&(settings[_0xf2c442(0x1c4)]=_0x363777[_0xf2c442(0x1c4)],updateMarketcapApi(settings[_0xf2c442(0x1c4)]));break;case'bots':_0x363777[_0xf2c442(0x196)]!=undefined&&(bots=JSON['parse'](_0x363777['bots']),proxyEmit(_0xf2c442(0x196),bots));break;case _0xf2c442(0x20f):switch(_0x363777[_0xf2c442(0x20f)]){case _0xf2c442(0xe0):initclient();break;case _0xf2c442(0x284):toggleBotMode();break;case'emitHistory':emitHistory(_0x363777['args']);break;case'deleteHistoryAlerts':deleteHistoryAlerts(_0x363777[_0xf2c442(0xdf)]);break;case _0xf2c442(0x17a):getPortfolio(_0x363777[_0xf2c442(0xdf)]);break;case _0xf2c442(0x166):storeConfiguration(_0x363777['args']);break;case _0xf2c442(0x18a):storeHeadless(_0x363777[_0xf2c442(0xdf)]);break;case _0xf2c442(0x1ce):storeFiat(_0x363777[_0xf2c442(0xdf)]);break;case _0xf2c442(0xea):resetHistory();break;case _0xf2c442(0x26d):getStartingBalances(getNormalizedPerformance());break;case _0xf2c442(0x21f):placeOrder(_0x363777['args']);break;case _0xf2c442(0x262):cancelLoading();break;case _0xf2c442(0x15b):showConfig();break;case'sendMetricsTelegram':sendMetricsTelegram();break;case'sendPortfolioTelegram':sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x4dad47=![]){const _0x2ab5e1=_0x5c0674;logger[_0x2ab5e1(0x276)](_0x2ab5e1(0xd7)+(_0x4dad47?_0x2ab5e1(0x1da):_0x2ab5e1(0x261))+_0x2ab5e1(0x116)+config[_0x2ab5e1(0x216)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x4dad47)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x2ab5e1(0x22e)]!=''&&config[_0x2ab5e1(0x22e)]!=_0x2ab5e1(0x1bd)){loadingProgress=0x0;_0x4dad47&&(await initExchange(),await loadSymbols(),loadingProgress=0x1,setStableCoins(),proxyEmit(_0x2ab5e1(0x15f),emittedConfiguration()),initialPerformanceStored=![]);const _0x30670f=await getCoins();[currentCoins,currentCoinsAll]=_0x30670f,setBlockTransactionDetection(![]),startScheduler(),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x2ab5e1(0x276)](_0x2ab5e1(0xfb)),getBalances(![]),await updateOpenOrders();if(lastOrders['length']==0x0&&allOpenOrders[_0x2ab5e1(0x1a6)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function resumeBot(_0x4a0285=![]){const _0x190695=_0x5c0674;logger[_0x190695(0x276)](_0x190695(0x126)+(_0x4a0285?_0x190695(0x127):_0x190695(0x17f))+_0x190695(0x119)+config[_0x190695(0x216)]);if(pidBalances)clearTimeout(pidBalances);if(_0x4a0285){getBalances();return;}coinsLoaded=![];if(config[_0x190695(0x22e)]!=''&&config[_0x190695(0x22e)]!=_0x190695(0x1bd)){loadingProgress=0x1;const _0x3ecfc6=await getCoins();[currentCoins,currentCoinsAll]=_0x3ecfc6,setBlockTransactionDetection(![]),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x190695(0x276)](_0x190695(0xfb)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x190695(0x1a6)]==0x0&&allOpenOrders[_0x190695(0x1a6)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();}}async function getMarketCap(_0xcc9476){const _0x149b89=_0x5c0674;let _0x3def34=![];if(_0xcc9476)_0x3def34=!![];let _0x2bf1dc;_0x3def34?_0x2bf1dc=_0xcc9476[_0x149b89(0xf2)](_0x4e3237=>_0x4e3237[_0x149b89(0x20e)]):_0x2bf1dc=currentCoinsAll[_0x149b89(0xf2)](_0x1d1b6b=>_0x1d1b6b[_0x149b89(0x20e)]);if(!config[_0x149b89(0x1c4)]||!_0x3def34&&!config[_0x149b89(0xcf)]||_0x2bf1dc[_0x149b89(0x1a6)]==0x0)return;let _0x3058cf=null;try{_0x3058cf=await axios[_0x149b89(0x21d)](_0x149b89(0x1c6),{'headers':{'X-CMC_PRO_API_KEY':settings[_0x149b89(0x1c4)]},'params':{'symbol':_0x2bf1dc[_0x149b89(0x213)]()}});}catch(_0x3c71d1){_0x3058cf=null,_0x3c71d1['toString']()[_0x149b89(0x1fd)]('status\x20code\x20401')?(config['marketcapApi']=![],updateConfig(),proxyEmit(_0x149b89(0x15f),emittedConfiguration()),logHistory(_0x149b89(0x13d),_0x149b89(0x1ec))):(logHistory(_0x149b89(0x13d),_0x149b89(0x1f1)+schedulerInterval/(0x3c*0x3e8)+_0x149b89(0x201)),logger[_0x149b89(0x276)](_0x149b89(0x171),_0x3c71d1[_0x149b89(0x213)]()+_0x149b89(0x109)+_0x3c71d1[_0x149b89(0x254)]));}if(_0x3058cf){let _0xcc91ab=0x0;const _0x1407bd=_0x3058cf['data'];_0x2bf1dc[_0x149b89(0x110)](_0x47d3a5=>{const _0x5c0013=_0x149b89;if(_0x1407bd['data'][_0x47d3a5][0x0])_0xcc91ab+=_0x1407bd['data'][_0x47d3a5][0x0][_0x5c0013(0x159)]['USD'][_0x5c0013(0x10e)];}),_0x2bf1dc[_0x149b89(0x110)](_0x44d21c=>{const _0x6b5860=_0x149b89,_0x2e0a59=_0x1407bd[_0x6b5860(0x178)][_0x44d21c][0x0]?_0x1407bd[_0x6b5860(0x178)][_0x44d21c][0x0]['quote'][_0x6b5860(0x1c9)][_0x6b5860(0x10e)]:0x0;if(_0x3def34){const _0x31d6e2=_0xcc9476[_0x6b5860(0x182)](_0x353a5a=>_0x353a5a['coin']==_0x44d21c);_0x31d6e2&&(_0x31d6e2[_0x6b5860(0x1d4)]=_0x2e0a59);}else{const _0x22b874=currentCoins[_0x6b5860(0x182)](_0x1fd53d=>_0x1fd53d['coin']==_0x44d21c);_0x22b874&&(_0x22b874[_0x6b5860(0x1d4)]=_0x2e0a59);const _0x1ebea1=currentCoinsAll[_0x6b5860(0x182)](_0x529a63=>_0x529a63[_0x6b5860(0x20e)]==_0x44d21c);_0x1ebea1&&(_0x1ebea1[_0x6b5860(0x1d4)]=_0x2e0a59);}}),!_0x3def34&&updateTargetDistribution();}}function updateTargetDistribution(){const _0x1d10cc=_0x5c0674,_0x2ec889=0x2;let _0x1dce51=0x0,_0x532842=0x0,_0x4e0d1e=0x0,_0x138f22=0x0,_0x26e901=0x0;config['portfolio'][_0x1d10cc(0x110)](_0x27cb68=>{const _0x443a04=_0x1d10cc;if(!_0x27cb68['excluded']){_0x4e0d1e++,_0x1dce51+=_0x27cb68['slider'];if(_0x27cb68[_0x443a04(0xf4)]===-0x1){_0x1dce51++;const _0x1cf6b4=currentCoinsAll[_0x443a04(0x182)](_0x5ab4a8=>_0x5ab4a8['coin']==_0x27cb68[_0x443a04(0x20e)]);_0x1cf6b4&&(_0x138f22+=_0x1cf6b4[_0x443a04(0x1d4)],_0x26e901+=Math[_0x443a04(0x1d7)](_0x1cf6b4[_0x443a04(0x1d4)]));}if(_0x27cb68['slider']!==-0x1)_0x532842++;}});let _0x2b4cc6;const _0x56100f=0x64-_0x1dce51,_0x122a49=_0x4e0d1e-_0x532842;_0x2b4cc6=_0x122a49===0x0?_0x1dce51:Math['max'](0x64,_0x1dce51),config[_0x1d10cc(0x161)][_0x1d10cc(0x110)](_0x4d6665=>{const _0x421ecb=_0x1d10cc,_0x3fcd21=currentCoinsAll[_0x421ecb(0x182)](_0x4a201a=>_0x4a201a[_0x421ecb(0x20e)]==_0x4d6665[_0x421ecb(0x20e)]);_0x3fcd21&&(_0x4d6665['marketcap']=_0x3fcd21[_0x421ecb(0x1d4)]);if(!_0x4d6665[_0x421ecb(0x28b)]){if(_0x2b4cc6<=0x64){if(_0x4d6665[_0x421ecb(0xf4)]===-0x1){if(_0x138f22!==0x0&&config[_0x421ecb(0xcf)]){if(_0x3fcd21){if(config['marketcapEnabled']==_0x421ecb(0x1d4))_0x4d6665[_0x421ecb(0x135)]=(_0x56100f/(_0x138f22/_0x3fcd21[_0x421ecb(0x1d4)]))[_0x421ecb(0x1f8)](_0x2ec889);else config['marketcapEnabled']==_0x421ecb(0x1cf)&&(_0x4d6665[_0x421ecb(0x135)]=(_0x56100f/(_0x26e901/Math[_0x421ecb(0x1d7)](_0x3fcd21[_0x421ecb(0x1d4)])))[_0x421ecb(0x1f8)](_0x2ec889));}}}}}}),updateConfig();}function updateConfig(){const _0x386474=_0x5c0674;let _0x7becac=dbConfig[_0x386474(0x21d)](_0x386474(0x202))['find']({'botID':botID})['value']();_0x7becac&&dbConfig[_0x386474(0x21d)](_0x386474(0x202))[_0x386474(0x182)]({'botID':botID})[_0x386474(0x279)](config)[_0x386474(0x1b1)]();}function logMemory(){const _0x5ae553=_0x5c0674;if(environment!='staging')return;const _0xa43557=process[_0x5ae553(0x11d)]()['heapUsed']/0x400/0x400;logger[_0x5ae553(0x276)](_0x5ae553(0x26f)+process[_0x5ae553(0x1a2)]+_0x5ae553(0xc6)+formatResult(_0xa43557,0x1)+'\x20MB');}async function startScheduler(){const _0xd55f88=_0x5c0674,_0x658a5f=shiftedTime()[_0xd55f88(0x23f)]();getMarketCap(),loadSymbols(),_0x658a5f==0x1&&logMemory(),await sleep(schedulerInterval),startScheduler();}async function restartBot(_0x27dcf7=![]){const _0x249bc8=_0x5c0674;logger[_0x249bc8(0x276)](_0x249bc8(0x281));if(!_0x27dcf7)while(lockOrders!=ORDERS['UNLOCKED']||coolingDown){await sleep(0x3e8);}process['send']({'stop':_0x249bc8(0x186)},_0x2bd9d7=>{});}async function initExchange(_0xb72ec7=config['exchange'],_0xd35f25=config[_0x5c0674(0x22e)],_0x3893e=config['apiSecret'],_0x2dd359=config['apiPassword']){const _0x18f0e7=_0x5c0674;if(exchange){logger[_0x18f0e7(0x276)](_0x18f0e7(0x188));return;}logger[_0x18f0e7(0x276)](_0x18f0e7(0x190));!supportedExchanges()[_0x18f0e7(0x1fd)](_0xb72ec7)&&(logHistory(_0x18f0e7(0x13d),'Balance\x20Bot\x20does\x20not\x20support\x20the\x20'+_0xb72ec7+_0x18f0e7(0x1df)),killBot());const _0x4e6a32=ccxt[_0x18f0e7(0x1a4)][_0xb72ec7[_0x18f0e7(0x10f)]()];exchange=new _0x4e6a32({'apiKey':_0xd35f25,'secret':_0x3893e,'options':{'defaultType':_0x18f0e7(0x13f)}});if(_0x2dd359)exchange['password']=_0x2dd359;}function updateExchange(_0x365480,_0x256130,_0x541b6a=null){const _0x2619b8=_0x5c0674;exchange['apiKey']=_0x365480,exchange[_0x2619b8(0x26c)]=_0x256130,exchange['apiPassword']=_0x541b6a,logger[_0x2619b8(0x276)]('Updating\x20API\x20key\x20(not\x20saved\x20in\x20config\x20file\x20yet)');}function setStableCoins(){const _0x96fc1b=_0x5c0674;let _0x1fc3be=config[_0x96fc1b(0x1f7)]==_0x96fc1b(0x15d)?_0x96fc1b(0x15d):config[_0x96fc1b(0x1f7)]==_0x96fc1b(0x1d9)?'PAXG':_0x96fc1b(0x1c5),_0xa726bc=allSymbols[_0x96fc1b(0x1fd)](_0x1fc3be+_0x96fc1b(0x157))?'USD':allSymbols[_0x96fc1b(0x1fd)](_0x1fc3be+_0x96fc1b(0x148))?'USDT':'EUR',_0x30de2d=allSymbols['includes'](_0x1fc3be+_0x96fc1b(0x1e0))?_0x96fc1b(0x23a):_0xa726bc;enableFiatToggle=!![],_0xa726bc==_0x96fc1b(0x23a)&&(enableFiatToggle=![],storeFiat(_0x96fc1b(0x23a))),_0x30de2d!=_0x96fc1b(0x23a)&&(enableFiatToggle=![],storeFiat(_0x96fc1b(0x1c9))),stablecoins={'eur':{'coin':''+_0x1fc3be+_0x30de2d,'symbol':_0x1fc3be+'/'+_0x30de2d},'usd':{'coin':''+_0x1fc3be+_0xa726bc,'symbol':_0x1fc3be+'/'+_0xa726bc}};}async function initwsCcxt(){const _0x5b018b=_0x5c0674;initCycle++;const _0x3bc6de=initCycle;let _0x2c78c3=[];config[_0x5b018b(0x161)][_0x5b018b(0x110)](_0x103387=>{const _0xdf462c=_0x5b018b;if(!_0x103387['excluded']&&_0x103387[_0xdf462c(0x20e)]!=config[_0xdf462c(0x1f7)])_0x2c78c3['push'](_0x103387[_0xdf462c(0x14d)]);});if(!_0x2c78c3[_0x5b018b(0x1fd)](stablecoins[_0x5b018b(0x1d8)][_0x5b018b(0x14d)]))_0x2c78c3[_0x5b018b(0x107)](stablecoins[_0x5b018b(0x1d8)][_0x5b018b(0x14d)]);if(!_0x2c78c3[_0x5b018b(0x1fd)](stablecoins[_0x5b018b(0x1ee)][_0x5b018b(0x14d)]))_0x2c78c3['push'](stablecoins[_0x5b018b(0x1ee)][_0x5b018b(0x14d)]);if(config[_0x5b018b(0x216)][_0x5b018b(0x23d)]('Binance')&&config['basecoin']!=_0x5b018b(0x1d9)){if(!_0x2c78c3[_0x5b018b(0x1fd)]('BNB/'+config[_0x5b018b(0x1f7)]))_0x2c78c3[_0x5b018b(0x107)](_0x5b018b(0x204)+config[_0x5b018b(0x1f7)]);}loadCoins(_0x2c78c3),_0x2c78c3=validateSymbols(_0x2c78c3);const _0x3b3e15=async _0x5735b5=>{const _0x4d085b=_0x5b018b;let _0x2a0f74;try{const _0xa51b63=await getTickers(_0x5735b5);Object[_0x4d085b(0x233)](_0xa51b63)['forEach'](_0x34b8d2=>{const _0x46bd60=_0x4d085b;_0x2a0f74=_0x34b8d2[0x1]['symbol'],gTicker[noslash(_0x2a0f74)]=_0x34b8d2[0x1][_0x46bd60(0x11e)],gChange[_0x2a0f74]=_0x34b8d2[0x1]['percentage'];});}catch(_0x401573){await handleError(_0x401573,_0x4d085b(0x264),_0x2a0f74);}},_0x77cbd0=async _0xd2d14a=>{const _0x4753d5=_0x5b018b;while(initCycle==_0x3bc6de){if(!botPaused)try{const _0x479338=await exchange['watchTrades'](_0xd2d14a);gTicker[noslash(_0x479338[0x0]['symbol'])]=_0x479338[0x0][_0x4753d5(0x14a)];}catch(_0x831d6d){if(!exchangeStopped)await handleError(_0x831d6d,_0x4753d5(0x249),_0xd2d14a);}else await sleep(0x64);}},_0x22266a=async _0x2a3295=>{const _0x5ecb37=_0x5b018b;while(initCycle==_0x3bc6de){if(!botPaused)try{const _0x39759c=await exchange[_0x5ecb37(0x16f)](_0x2a3295),_0x13c528=_0x39759c[_0x5ecb37(0x283)]();gTicker[noslash(_0x13c528[_0x5ecb37(0x14d)])]=_0x13c528[_0x5ecb37(0x14a)];}catch(_0x37a26c){if(!exchangeStopped)await handleError(_0x37a26c,_0x5ecb37(0x1c1),_0x2a3295['toString']());}else await sleep(0x64);}},_0x37901f=async _0x10267d=>{const _0xb391f3=_0x5b018b;while(initCycle==_0x3bc6de){if(!botPaused){let _0x340a77;try{await sleep(0x3c*0x3e8);const _0x4b0056=await getTickers(_0x10267d);Object['entries'](_0x4b0056)['forEach'](_0x1e8a4b=>{const _0x4c6065=_0x52df;_0x340a77=_0x1e8a4b[0x1]['symbol'],gChange[_0x340a77]=_0x1e8a4b[0x1][_0x4c6065(0x1cc)];});}catch(_0x25e095){if(!exchangeStopped)await handleError(_0x25e095,_0xb391f3(0x152),_0x340a77);}}else await sleep(0x64);}},_0x36724e=async _0x1b62a8=>{const _0x49bd8d=_0x5b018b;while(initCycle==_0x3bc6de){if(!botPaused)try{const _0x55d4b5=await exchange['watchOrders'](_0x1b62a8);initCycle==_0x3bc6de&&_0x55d4b5[_0x49bd8d(0x110)](_0x32070e=>{updateNumberCoinsCcxt(_0x32070e);});}catch(_0x4573ae){if(!exchangeStopped)await handleError(_0x4573ae,_0x49bd8d(0x232));}else await sleep(0x64);}};_0x3b3e15(_0x2c78c3),_0x37901f(_0x2c78c3),exchange['has'][_0x5b018b(0x16f)]&&!(config[_0x5b018b(0x216)]==_0x5b018b(0x25b)&&_0x2c78c3['length']>0xa)?_0x22266a(_0x2c78c3):_0x2c78c3[_0x5b018b(0x110)](_0x3d381e=>{_0x77cbd0(_0x3d381e);}),_0x2c78c3[_0x5b018b(0x110)](_0x4ce572=>{_0x36724e(_0x4ce572);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x43aa90){const _0x5d7c46=_0x5c0674;let _0xa3082d={};try{if(config['exchange']!=_0x5d7c46(0x113))_0xa3082d=await exchange['fetchTickers'](_0x43aa90);else for(const _0x206131 of _0x43aa90){const _0x411f68=await exchange[_0x5d7c46(0x19a)](_0x206131);_0xa3082d[_0x206131]=_0x411f68;}return _0xa3082d;}catch(_0x531af6){throw _0x531af6;}}function setBlockTransactionDetection(_0x22cebc){const _0x1deeab=_0x5c0674;blockTransactionDetection=_0x22cebc,logger[_0x1deeab(0x276)](_0x1deeab(0x222)+blockTransactionDetection);}async function detectLiquidityChange(_0x55f74d=0x0){const _0x32ce28=_0x5c0674;transactionDetectionOngoing=!![];try{const _0x5e16ab=await getCoins(_0x55f74d),[_0xa7e008,_0x42efdd]=_0x5e16ab;let _0x11f809=[];currentCoins['forEach'](_0x300504=>{const _0x37b753=_0x52df,_0x4a16be=_0xa7e008[_0x37b753(0x182)](_0x5e790c=>_0x5e790c['coin']==_0x300504[_0x37b753(0x20e)]);if(_0x4a16be){if(_0x300504[_0x37b753(0x141)]!=_0x4a16be[_0x37b753(0x141)]){let _0x4ad3dd;if(_0x300504[_0x37b753(0x20e)]!=config[_0x37b753(0x1f7)]){const _0x2c448d=gTicker[noslash(_0x300504[_0x37b753(0x14d)])];_0x4ad3dd=_0x300504[_0x37b753(0x131)]?0x1/_0x2c448d:_0x2c448d;}else _0x4ad3dd=0x1;_0x11f809['push']({'coin':_0x300504[_0x37b753(0x20e)],'symbol':_0x300504[_0x37b753(0x14d)],'price':_0x4ad3dd,'number':Number(formatResult(_0x4a16be['number']-_0x300504[_0x37b753(0x141)],0x8)),'basecoinvalue':_0x4ad3dd*(_0x4a16be[_0x37b753(0x141)]-_0x300504[_0x37b753(0x141)])});}}});if(_0x11f809[_0x32ce28(0x1a6)]>0x0&&!blockTransactionDetection){for(const _0x832d1 of _0x11f809){if(config[_0x32ce28(0x187)]){logger['debug']('Liquidity\x20change\x20|\x20basecoin\x20value:\x20'+_0x832d1['basecoinvalue']+'\x20|\x20highest\x20fee:\x20'+lastFees[_0x32ce28(0x172)]);if(lastFees[_0x32ce28(0x172)]==0x0||Math[_0x32ce28(0x17d)](_0x832d1['basecoinvalue'])>lastFees[_0x32ce28(0x172)]*0x3){if(config[_0x32ce28(0x187)]==_0x32ce28(0x24d)){delete _0x832d1['symbol'],delete _0x832d1[_0x32ce28(0x149)];let _0x47fc37=[],_0x50b18d=[...config['liquidity']]||[],_0x411228=config['liquidity'];_0x50b18d[_0x32ce28(0x1f5)]((_0x3d757c,_0xae9508)=>_0x3d757c[_0x32ce28(0x286)]>_0xae9508[_0x32ce28(0x286)]?-0x1:_0xae9508['date']>_0x3d757c[_0x32ce28(0x286)]?0x1:0x0);const _0x135579=getDate();if(_0x50b18d[0x0]){const _0x49ccc5=fns['parse'](_0x50b18d[0x0][_0x32ce28(0x286)],_0x32ce28(0x23c),new Date()),_0x9871a9=fns['parse'](_0x135579,_0x32ce28(0x23c),new Date());if(fns['isEqual'](_0x49ccc5,_0x9871a9)){_0x47fc37=_0x50b18d[0x0][_0x32ce28(0x13e)];const _0x47f4ad=_0x47fc37[_0x32ce28(0x182)](_0x49d183=>_0x49d183[_0x32ce28(0x20e)]==_0x832d1['coin']);_0x47f4ad?(_0x47f4ad['number']+=_0x832d1[_0x32ce28(0x141)],_0x47f4ad[_0x32ce28(0x141)]==0x0&&(_0x47fc37=_0x47fc37[_0x32ce28(0x1b7)](_0x33ceb2=>{const _0x194796=_0x32ce28;return _0x33ceb2[_0x194796(0x20e)]!=_0x832d1['coin'];}))):_0x47fc37[_0x32ce28(0x107)](_0x832d1);const _0x24490c=_0x411228[_0x32ce28(0x182)](_0x1f877a=>_0x1f877a[_0x32ce28(0x286)]==_0x135579);_0x24490c['changes']=_0x47fc37;}else _0x411228[_0x32ce28(0x107)]({'date':_0x135579,'changes':[_0x832d1]});}const _0x16384f=_0x411228[_0x32ce28(0x182)](_0x3d6cee=>_0x3d6cee['date']==_0x135579);if(_0x16384f){let _0x4d9695=!![];_0x16384f[_0x32ce28(0x13e)][_0x32ce28(0x110)](_0x2675cd=>{const _0x54bae7=_0x32ce28;if(_0x2675cd[_0x54bae7(0x141)]!=0x0)_0x4d9695=![];}),_0x4d9695&&(_0x411228=_0x411228['filter'](_0x41c41e=>{return _0x41c41e['date']!=_0x135579;}));}let _0x4e62c2=dbConfig['get'](_0x32ce28(0x202))[_0x32ce28(0x182)]({'botID':botID})[_0x32ce28(0x181)]();_0x4e62c2&&(dbConfig['get'](_0x32ce28(0x202))[_0x32ce28(0x182)]({'botID':botID})[_0x32ce28(0x279)]({'liquidity':_0x411228})[_0x32ce28(0x1b1)](),config[_0x32ce28(0x191)]=_0x411228);logHistory(_0x32ce28(0x146),_0x32ce28(0x174)+Math[_0x32ce28(0x17d)](_0x832d1[_0x32ce28(0x141)])+'\x20'+_0x832d1[_0x32ce28(0x20e)]+'\x20'+(_0x832d1[_0x32ce28(0x141)]>0x0?_0x32ce28(0x1e9):_0x32ce28(0xfc))+_0x32ce28(0x212)),proxyEmit('configuration',emittedConfiguration());const _0x363afa=getNormalizedPerformance();emitPerformance(_0x363afa),getStartingBalances(_0x363afa),logger['debug'](_0x32ce28(0xdb));}else config[_0x32ce28(0x187)]==_0x32ce28(0x153)&&(config['headless']?(await storeHeadless({'headless':![]}),logHistory(_0x32ce28(0x146),_0x32ce28(0x174)+Math['abs'](_0x832d1[_0x32ce28(0x141)])+'\x20'+_0x832d1[_0x32ce28(0x20e)]+'\x20'+(_0x832d1[_0x32ce28(0x141)]>0x0?_0x32ce28(0x1e9):_0x32ce28(0xfc))+_0x32ce28(0x1c3))):logger[_0x32ce28(0x276)](_0x32ce28(0x174)+Math[_0x32ce28(0x17d)](_0x832d1['number'])+'\x20'+_0x832d1[_0x32ce28(0x20e)]+'\x20'+(_0x832d1[_0x32ce28(0x141)]>0x0?'added':_0x32ce28(0xfc))+_0x32ce28(0x27e)));}else logger['debug'](_0x32ce28(0x247)+Math[_0x32ce28(0x17d)](_0x832d1[_0x32ce28(0x141)])+'\x20'+_0x832d1[_0x32ce28(0x20e)]+'\x20'+(_0x832d1[_0x32ce28(0x141)]>0x0?_0x32ce28(0x1e9):'removed'));}else logger[_0x32ce28(0x276)]('Portfolio\x20change\x20detected:\x20'+Math[_0x32ce28(0x17d)](_0x832d1['number'])+'\x20'+_0x832d1[_0x32ce28(0x20e)]+'\x20'+(_0x832d1[_0x32ce28(0x141)]>0x0?'added':_0x32ce28(0xfc))+_0x32ce28(0xc7));}currentCoins=_0xa7e008,currentCoinsAll=_0x42efdd;}}catch(_0x288310){if(!exchangeStopped)await handleError(_0x288310,_0x32ce28(0x12c));}transactionDetectionOngoing=![];}async function watchTransactions(){await sleep(0x14*0x3e8);while(!![]){!botPaused&&!blockTransactionDetection&&coinsLoaded?(detectLiquidityChange(),await sleep(watchTransactionsInterval)):await sleep(0x3e8);}}async function loadSymbols(){const _0x1ac164=_0x5c0674;try{markets=await exchange[_0x1ac164(0x18e)](!![]),allSymbols=[],Object[_0x1ac164(0x233)](markets)['forEach'](_0x4ce444=>{const _0x24c4d9=_0x1ac164;_0x4ce444[0x1][_0x24c4d9(0x18d)]&&_0x4ce444[0x1]['spot']&&allSymbols['push'](_0x4ce444[0x0]);});}catch(_0x43a37b){markets?logger[_0x1ac164(0x276)](_0x1ac164(0xda)+_0x43a37b[_0x1ac164(0x213)]()):(loading[_0x1ac164(0x16c)]=!![],emitLoadingProgress(),_0x43a37b[_0x1ac164(0x213)]()[_0x1ac164(0x10f)]()[_0x1ac164(0x1fd)](_0x1ac164(0x263))||_0x43a37b[_0x1ac164(0x213)]()['toLowerCase']()[_0x1ac164(0x1fd)](_0x1ac164(0x224))?logHistory(_0x1ac164(0x13d),_0x1ac164(0x18b)):handleErrorNoStop(_0x43a37b,_0x1ac164(0x27a),!![]),logHistory(_0x1ac164(0x13d),_0x1ac164(0x1dc)),logHistory('error',_0x1ac164(0x117)+loadCoinsRetryInterval/0xea60+_0x1ac164(0x132)),logger['debug'](_0x1ac164(0x171),_0x43a37b),botPaused=!![],await sleep(loadCoinsRetryInterval),restartBot());}}function validateSymbols(_0x2cf3a3){const _0x4b5dac=_0x5c0674;let _0x15d7cd=[];return _0x2cf3a3[_0x4b5dac(0x110)](_0x172336=>{const _0x4d261b=_0x4b5dac;!allSymbols[_0x4d261b(0x1fd)](_0x172336)?logHistory(_0x4d261b(0x13d),_0x4d261b(0x235)+_0x172336+_0x4d261b(0x12f)):_0x15d7cd[_0x4d261b(0x107)](_0x172336);}),_0x15d7cd;}async function initclient(){const _0x28c2c4=_0x5c0674;proxyEmit(_0x28c2c4(0x15f),emittedConfiguration()),proxyEmit(_0x28c2c4(0x1c8),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x28c2c4(0x22d),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x194e92=getNormalizedPerformance();emitPerformance(_0x194e92),getStartingBalances(_0x194e92);}async function toggleBotMode(){const _0x280407=_0x5c0674;let _0x56a56b=dbConfig['get'](_0x280407(0x202))[_0x280407(0x182)]({'botID':botID})[_0x280407(0x181)]();if(_0x56a56b){const _0x10df9b=!_0x56a56b[_0x280407(0x1e8)];dbConfig['get'](_0x280407(0x202))[_0x280407(0x182)]({'botID':botID})['assign']({'headless':_0x10df9b})['write'](),config['headless']=_0x10df9b,proxyEmit(_0x280407(0x15f),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x495a2c=_0x5c0674;process['send']({'updatebotmanager':!![]},_0x2bda32=>{}),logger['debug'](_0x495a2c(0x278)+config[_0x495a2c(0x1e8)]);}async function loadCoins(_0x5e4c11){const _0x359c0b=_0x5c0674;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x29fe51,_0x3ab002=0x0,_0xa1d85a=0x0;_0x5e4c11[_0x359c0b(0x110)](_0x3a0711=>{const _0x390317=_0x359c0b;loading[_0x390317(0x158)][_0x390317(0x107)](_0x3a0711);}),loadingCanceled=![];let _0x49d232=![];while(_0x29fe51!=_0x5e4c11[_0x359c0b(0x1a6)]+maxLoadingProgress){_0x29fe51=loadingProgress,_0x5e4c11['forEach'](_0x374443=>{const _0x2e430c=_0x359c0b;if(gTicker[noslash(_0x374443)]){loading[_0x2e430c(0x158)]=loading[_0x2e430c(0x158)]['filter'](_0x108062=>_0x108062!=_0x374443);if(!watchedSymbols[_0x2e430c(0x1fd)](_0x374443))watchedSymbols['push'](_0x374443);_0x29fe51++;}}),loading['progress']=Math[_0x359c0b(0x1f0)](_0x29fe51/(_0x5e4c11[_0x359c0b(0x1a6)]+maxLoadingProgress)*0x64);loading[_0x359c0b(0x16a)]!=0x64&&(_0xa1d85a>0x1e*0x5&&(loading[_0x359c0b(0x210)]=!![],emitLoadingProgress()),_0xa1d85a>0x78*0x5&&!_0x49d232&&(_0x49d232=!![],logHistory(_0x359c0b(0x13d),'Failed\x20to\x20load\x20coin\x20data\x20for\x20'+loading['remainingSymbols'][_0x359c0b(0x211)](',\x20')+_0x359c0b(0x1c7)),logHistory(_0x359c0b(0x13d),_0x359c0b(0x117)+loadCoinsRetryInterval/0xea60+_0x359c0b(0x132)),loadingCanceled=!![],await sleep(loadCoinsRetryInterval),restartBot()));if(loadingCanceled){loading[_0x359c0b(0x16c)]=!![],emitLoadingProgress();break;}else _0x3ab002!=loading[_0x359c0b(0x16a)]&&(_0x3ab002=loading['progress'],emitLoadingProgress()),_0xa1d85a++,await sleep(0xc8);}_0x29fe51==_0x5e4c11[_0x359c0b(0x1a6)]+maxLoadingProgress&&(coinsLoaded=!![],process['send']({'status':_0x359c0b(0x1ed),'live':_0x359c0b(0x259)},_0x15ec17=>{}),_0x49d232&&logHistory('success',_0x359c0b(0x133)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){proxyEmit('configuration',{...emittedConfiguration(),'configstate':'loading-canceled'});}function emitLoadingProgress(){const _0x1e2ec8=_0x5c0674;proxyEmit(_0x1e2ec8(0x11f),loading);}async function getFiat(){const _0x14a5de=_0x5c0674;let _0x2f1629=gTicker[stablecoins[_0x14a5de(0x1d8)][_0x14a5de(0x20e)]],_0x5b0875=gTicker[stablecoins[_0x14a5de(0x1ee)][_0x14a5de(0x20e)]];return{'eur':Number(_0x2f1629),'usd':Number(_0x5b0875)};}function capitalize(_0x3cda3a){const _0xa990df=_0x5c0674;return _0x3cda3a[_0xa990df(0x1ea)](0x0,0x1)[_0xa990df(0x17e)]()+_0x3cda3a[_0xa990df(0x1ea)](0x1);}function supportedExchanges(){const _0x505257=_0x5c0674,_0x263af3=['ws',_0x505257(0x287),'fetchTicker','watchTrades',_0x505257(0x1b4),_0x505257(0x1f6),'createOrder',_0x505257(0x19b),_0x505257(0x28c)];let _0x409ff1=[],_0x393d45=[],_0x9a5215=ccxt[_0x505257(0x1a4)]['exchanges'];_0x9a5215['forEach'](_0x4c47b9=>{const _0x1837fc=_0x505257;try{const _0x3de1a1=new ccxt[(_0x1837fc(0x1a4))][_0x4c47b9]();_0x393d45['push'](_0x3de1a1);}catch(_0x50d7b6){}}),_0x393d45[_0x505257(0x110)](_0x26d4f2=>{const _0x282848=_0x505257;let _0x404b98=0x0;_0x263af3['forEach'](_0x16242b=>{const _0x1bc39c=_0x52df;_0x16242b in _0x26d4f2['has']&&_0x26d4f2[_0x1bc39c(0x228)][_0x16242b]&&_0x404b98++;}),_0x404b98==_0x263af3[_0x282848(0x1a6)]&&(!excludedExchanges[_0x282848(0x1fd)](_0x26d4f2['id'])&&_0x409ff1[_0x282848(0x107)](capitalize(_0x26d4f2['id'])));});let _0x11926d=[];return _0x9a5215[_0x505257(0x110)](_0x3039d3=>{const _0x5eadc4=_0x505257;_0x3039d3=capitalize(_0x3039d3);if(!_0x409ff1[_0x5eadc4(0x1fd)](_0x3039d3))_0x11926d['push'](_0x3039d3);}),_0x409ff1;}function setStartDatePerformance(){const _0xbe1d85=_0x5c0674;if(config&&config[_0xbe1d85(0x191)][0x0][_0xbe1d85(0x13e)][_0xbe1d85(0x1a6)]!=0x0){const _0x5101d0=config[_0xbe1d85(0x191)][0x0][_0xbe1d85(0x13e)];dbPerformance[_0xbe1d85(0x21d)](_0xbe1d85(0x178))[_0xbe1d85(0x182)]({'date':config[_0xbe1d85(0x176)]})[_0xbe1d85(0x279)]({'coins':_0x5101d0})['write']();}}async function recreateCoinResults(){const _0x1da495=_0x5c0674;recreationNeeded=![];let _0x508d89,_0x550309=[];try{for(const _0x2f1f8a of currentCoins){if(_0x2f1f8a[_0x1da495(0x20e)]!=config[_0x1da495(0x1f7)]){let _0x1d1138=0x0,_0x2b850b,_0x2678c6;_0x508d89=await getAllEventOrders(_0x2f1f8a[_0x1da495(0x14d)]);if(_0x508d89[_0x1da495(0x1a6)]>0x0)_0x508d89['forEach'](_0x446ba5=>{const _0x2c6564=_0x1da495,_0x5e3dc6=_0x2f1f8a[_0x2c6564(0x14d)][_0x2c6564(0x1fd)](config['basecoin']+'/');_0x550309['push']({'datetime':_0x446ba5[_0x2c6564(0x258)],'coin':_0x2f1f8a[_0x2c6564(0x20e)],'symbol':_0x2f1f8a[_0x2c6564(0x14d)],'side':_0x446ba5['side'],'reverse':_0x5e3dc6,'amount':formatResult(_0x446ba5[_0x2c6564(0x274)],0x8),'filled':formatResult(_0x446ba5[_0x2c6564(0x274)],0x8),'price':formatResult(_0x446ba5[_0x2c6564(0x14a)],0x8)}),_0x1d1138=_0x446ba5['side']==_0x2c6564(0xc4)?_0x1d1138+_0x446ba5[_0x2c6564(0x274)]:_0x1d1138-_0x446ba5['filled'];if(!_0x2678c6)_0x2678c6=_0x446ba5['price'];});_0x2b850b=_0x2f1f8a[_0x1da495(0x141)]-_0x1d1138;let _0x2a4b94;config[_0x1da495(0x191)][_0x1da495(0x110)](_0x2afaf0=>{const _0x4aa22e=_0x1da495;!_0x2a4b94&&(_0x2a4b94=_0x2afaf0[_0x4aa22e(0x13e)]['find'](_0x3a18d3=>_0x3a18d3['coin']==_0x2f1f8a[_0x4aa22e(0x20e)]),_0x2a4b94&&(_0x2b850b=_0x2a4b94[_0x4aa22e(0x141)],_0x2678c6=_0x2a4b94[_0x4aa22e(0x14a)]));});let _0x4de73b=dbCoinResults[_0x1da495(0x21d)](_0x1da495(0x139))[_0x1da495(0x182)]({'coin':_0x2f1f8a[_0x1da495(0x20e)]})['value']();_0x4de73b={'coin':_0x2f1f8a[_0x1da495(0x20e)],'number':_0x2b850b,'breakeven':_0x2678c6,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x1da495(0x21d)](_0x1da495(0x139))['find']({'coin':_0x2f1f8a[_0x1da495(0x20e)]})[_0x1da495(0x279)](_0x4de73b)[_0x1da495(0x1b1)]();}}_0x550309['sort']((_0x4ba1de,_0x478780)=>_0x4ba1de['datetime']>_0x478780[_0x1da495(0x258)]?0x1:_0x478780[_0x1da495(0x258)]>_0x4ba1de[_0x1da495(0x258)]?-0x1:0x0);let _0x3b9342=0x0;for(let _0x39970b of _0x550309){await updateCoinResults(_0x39970b,!![]);}}catch(_0x10254b){await handleError(_0x10254b,_0x1da495(0x1ab));}}async function getAllEventOrders(_0x1ba699){const _0x539a20=_0x5c0674;let _0x47ea5e=[],_0x3533e7=dbLogs[_0x539a20(0x21d)]('logs')[_0x539a20(0x1b7)](_0x58ebdf=>{const _0x1aa207=_0x539a20,_0x58f05c=_0x58ebdf['event'][_0x1aa207(0x10f)]();return _0x58f05c[_0x1aa207(0x1fd)](_0x1ba699[_0x1aa207(0x10f)]())&&(_0x58f05c[_0x1aa207(0x1fd)](_0x1aa207(0x1e1))&&_0x58f05c[_0x1aa207(0x1fd)](_0x1aa207(0x244))||_0x58f05c['includes']('filled')&&_0x58f05c['includes']('order'));})[_0x539a20(0x1ef)](_0x539a20(0x18f))[_0x539a20(0x181)]();return _0x3533e7[_0x539a20(0x110)](_0x393ecf=>{const _0x5c7212=_0x539a20,_0x469559=_0x393ecf[_0x5c7212(0x282)]['includes'](_0x5c7212(0x289))?_0x5c7212(0x289):_0x5c7212(0xc4),_0x1a6d97=/#([0-9]|\.)+\s/i,_0x253f54=Number(_0x1a6d97[_0x5c7212(0x20d)](_0x393ecf[_0x5c7212(0x282)])[0x0]['slice'](0x1)),_0x31a3cd=/@([0-9]|\.)+$/i,_0x565d37=Number(_0x31a3cd[_0x5c7212(0x20d)](_0x393ecf[_0x5c7212(0x282)])[0x0][_0x5c7212(0x24e)](0x1));_0x47ea5e[_0x5c7212(0x107)]({'datetime':_0x393ecf[_0x5c7212(0x18f)],'coin':symbolToCoin(_0x1ba699),'symbol':_0x1ba699,'side':_0x469559,'amount':_0x253f54,'filled':_0x253f54,'price':_0x565d37});}),_0x47ea5e;}async function validate24hChanges(){const _0x229922=_0x5c0674;for(const _0x48518c of currentCoins){if(_0x48518c[_0x229922(0x20e)]!=config[_0x229922(0x1f7)]){let _0x55b4e0;_0x48518c[_0x229922(0x131)]?_0x55b4e0=formatResult((0x1/(gChange[_0x48518c[_0x229922(0x14d)]]/0x64+0x1)-0x1)*0x64,0x3):_0x55b4e0=gChange[_0x48518c[_0x229922(0x14d)]],_0x55b4e0<config[_0x229922(0x271)]&&(logHistory('error',_0x48518c[_0x229922(0x20e)]+'\x20has\x20a\x2024h\x20drop\x20of\x20'+_0x55b4e0+'%'),logHistory(_0x229922(0x13d),_0x229922(0xc8)),logHistory(_0x229922(0x13d),_0x229922(0xd1)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x101c26,_0xfb9388){const _0x3fc6ae=_0x5c0674;if(!_0x101c26)return!![];const _0x4fdf61=_0xfb9388[_0x3fc6ae(0x1e5)]('.'),_0x215746=_0x101c26[_0x3fc6ae(0x1e5)]('.');for(var _0x1fd9db=0x0;_0x1fd9db<_0x215746['length'];_0x1fd9db++){const _0x2add1b=~~_0x215746[_0x1fd9db],_0x6da67=~~_0x4fdf61[_0x1fd9db];if(_0x2add1b<_0x6da67)return!![];if(_0x2add1b>_0x6da67)return![];}return![];}async function oneTimeMigration(){const _0x3f1108=_0x5c0674;let _0x56ce30=dbLogs[_0x3f1108(0x21d)](_0x3f1108(0x1d5))[_0x3f1108(0x181)]();if(isOlderVersion(_0x56ce30,_0x3f1108(0x1b8))){let _0x1fec1e=[];const _0x3d3c8a=dbLogs[_0x3f1108(0x21d)](_0x3f1108(0x12d))[_0x3f1108(0x181)]();_0x3d3c8a[_0x3f1108(0x110)](_0x8098b6=>{const _0x4de132=_0x3f1108;_0x1fec1e[_0x4de132(0x107)]({'time':_0x8098b6[_0x4de132(0x18f)],'type':_0x8098b6['type'],'event':_0x8098b6['event']});}),dbLogs['get'](_0x3f1108(0x12d))['assign'](_0x1fec1e)[_0x3f1108(0x1b1)]();}let _0x3cc38d=dbConfig[_0x3f1108(0x21d)](_0x3f1108(0x1d5))[_0x3f1108(0x181)]();if(isOlderVersion(_0x3cc38d,_0x3f1108(0x1b8))){let _0x5a5de4=dbConfig['get']('bot')[_0x3f1108(0x182)]({'botID':botID})[_0x3f1108(0x181)]();if(_0x5a5de4){let _0x47a821=[];_0x5a5de4[_0x3f1108(0x161)][_0x3f1108(0x110)](_0x5eef77=>{const _0x138caa=_0x3f1108;_0x47a821[_0x138caa(0x107)]({'coin':_0x5eef77[_0x138caa(0x20e)],'number':_0x5eef77['startnumber'],'price':_0x5eef77[_0x138caa(0xf6)]}),delete _0x5eef77[_0x138caa(0x13a)],delete _0x5eef77[_0x138caa(0xf6)];});if(_0x47a821[_0x3f1108(0x1a6)]!==0x0)fs['writeFile'](configbackuppath+(_0x3f1108(0x236)+botID+_0x3f1108(0x193)),JSON['stringify'](_0x47a821,null,0x4),function(_0x5e34b1){if(_0x5e34b1){}});const _0x7a3b56=(_0x365e05,_0x546a34)=>{const _0x26b9e3=_0x3f1108;let _0x157399=[];_0x546a34[_0x26b9e3(0x110)](_0x53aac8=>{const _0x54a79d=_0x26b9e3,_0x4f4b51=_0x365e05[_0x54a79d(0x182)](_0x3db190=>_0x3db190[_0x54a79d(0x20e)]==_0x53aac8[_0x54a79d(0x20e)]);if(!_0x4f4b51)_0x157399['push'](_0x53aac8);});let _0x1cb253=[];return _0x365e05['forEach'](_0x374f36=>{const _0x5e1612=_0x26b9e3,_0x10f40d=_0x546a34[_0x5e1612(0x182)](_0x1fa172=>_0x1fa172[_0x5e1612(0x20e)]==_0x374f36['coin']);if(!_0x10f40d||_0x10f40d[_0x5e1612(0x141)]==0x0&&_0x374f36['number']!=0x0)_0x1cb253['push'](_0x374f36);}),{'missingDay1':_0x157399,'notInDay2':_0x1cb253};},_0x208b87=dbPerformance[_0x3f1108(0x21d)]('data')[_0x3f1108(0x112)]()[_0x3f1108(0x181)]();if(_0x208b87[_0x3f1108(0x1a6)]>0x1){const {missingDay1:_0x171c68,notInDay2:_0x3fe53f}=_0x7a3b56(_0x47a821,_0x208b87[0x1][_0x3f1108(0x139)]);_0x47a821=[..._0x47a821,..._0x171c68],_0x3fe53f[_0x3f1108(0x110)](_0x2113fc=>{const _0x4d9b9e=_0x3f1108;let _0x59486b=_0x47a821[_0x4d9b9e(0x136)](_0x3af6d2=>_0x3af6d2[_0x4d9b9e(0x20e)]==_0x2113fc[_0x4d9b9e(0x20e)]);_0x59486b!=-0x1&&_0x47a821[_0x4d9b9e(0x1d2)](_0x59486b,0x1);});}_0x47a821[_0x3f1108(0x1f5)]((_0x59c359,_0x3e0ba1)=>_0x59c359[_0x3f1108(0x20e)]>_0x3e0ba1[_0x3f1108(0x20e)]?0x1:_0x3e0ba1['coin']>_0x59c359[_0x3f1108(0x20e)]?-0x1:0x0);let _0x45e98b=[{'date':_0x5a5de4[_0x3f1108(0x176)],'changes':_0x47a821}];_0x208b87[_0x3f1108(0x1a6)]>0x2&&_0x208b87[_0x3f1108(0x110)]((_0x4d9f72,_0x40073a)=>{const _0xa7ad9f=_0x3f1108;if(_0x40073a>0x0&&_0x40073a<_0x208b87[_0xa7ad9f(0x1a6)]-0x1){const {missingDay1:_0x59ed06,notInDay2:_0x8f59e1}=_0x7a3b56(_0x208b87[_0x40073a][_0xa7ad9f(0x139)],_0x208b87[_0x40073a+0x1][_0xa7ad9f(0x139)]);_0x47a821=[],(_0x59ed06[_0xa7ad9f(0x1a6)]!=0x0||_0x8f59e1[_0xa7ad9f(0x1a6)]!=0x0)&&(_0x59ed06[_0xa7ad9f(0x1a6)]!=0x0&&_0x47a821[_0xa7ad9f(0x107)](..._0x59ed06),_0x8f59e1[_0xa7ad9f(0x1a6)]!=0x0&&(_0x8f59e1['forEach'](_0x2098eb=>{const _0x12a835=_0xa7ad9f;_0x2098eb[_0x12a835(0x141)]=-_0x2098eb[_0x12a835(0x141)];}),_0x47a821[_0xa7ad9f(0x107)](..._0x8f59e1)),_0x47a821[_0xa7ad9f(0x1f5)]((_0xe72098,_0x505ac1)=>_0xe72098[_0xa7ad9f(0x20e)]>_0x505ac1['coin']?0x1:_0x505ac1[_0xa7ad9f(0x20e)]>_0xe72098[_0xa7ad9f(0x20e)]?-0x1:0x0),_0x45e98b[_0xa7ad9f(0x107)]({'date':_0x208b87[_0x40073a+0x1][_0xa7ad9f(0x286)],'changes':_0x47a821}));}}),dbConfig[_0x3f1108(0x21d)]('bot')['find']({'botID':botID})[_0x3f1108(0x279)]({..._0x5a5de4,'liquidity':_0x45e98b})[_0x3f1108(0x1b1)]();}}if(isOlderVersion(_0x3cc38d,_0x3f1108(0x240))){let _0x3a8dfb=dbConfig['get']('bot')[_0x3f1108(0x182)]({'botID':botID})['value']();if(_0x3a8dfb){const _0x4bd1e7=_0x3a8dfb[_0x3f1108(0x216)],_0x9fd9b1=_0x4bd1e7?capitalize(_0x4bd1e7):'Binance';dbConfig[_0x3f1108(0x21d)](_0x3f1108(0x202))[_0x3f1108(0x182)]({'botID':botID})['assign']({'exchange':_0x9fd9b1})[_0x3f1108(0x1b1)]();}}if(isOlderVersion(_0x3cc38d,'2.6.22')){let _0x1d436a=dbConfig['get'](_0x3f1108(0x202))['find']({'botID':botID})[_0x3f1108(0x181)]();if(_0x1d436a){const _0xef3fc5=_0x1d436a[_0x3f1108(0xcf)],_0x496862=_0xef3fc5?_0x3f1108(0x1d4):![];dbConfig[_0x3f1108(0x21d)]('bot')['find']({'botID':botID})[_0x3f1108(0x279)]({'marketcapEnabled':_0x496862})[_0x3f1108(0x1b1)]();}}if(isOlderVersion(_0x3cc38d,'2.6.23')){let _0x585376=dbConfig['get'](_0x3f1108(0x202))[_0x3f1108(0x182)]({'botID':botID})[_0x3f1108(0x181)]();if(_0x585376){const _0x41cf68=_0x585376['autoliquidity'],_0x290d34=_0x41cf68?'update-liquidity':![];dbConfig[_0x3f1108(0x21d)]('bot')['find']({'botID':botID})[_0x3f1108(0x279)]({'autoliquidity':_0x290d34})[_0x3f1108(0x1b1)]();}}let _0x5d4f25=dbPerformance['get'](_0x3f1108(0x1d5))[_0x3f1108(0x181)]();isOlderVersion(_0x5d4f25,_0x3f1108(0x1b8))&&setStartDatePerformance();let _0xd0d2aa=dbCoinResults[_0x3f1108(0x21d)](_0x3f1108(0x1d5))[_0x3f1108(0x181)]();if(isOlderVersion(_0xd0d2aa,'2.5.0')){let _0x15bb8b=dbCoinResults['get'](_0x3f1108(0x139))['value']();if(_0x15bb8b[_0x3f1108(0x1a6)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x19815b=_0x5c0674;dbConfig[_0x19815b(0x273)]('version',serverversion)[_0x19815b(0x1b1)](),dbPerformance[_0x19815b(0x273)]('version',serverversion)[_0x19815b(0x1b1)](),dbLogs[_0x19815b(0x273)]('version',serverversion)[_0x19815b(0x1b1)](),dbCoinResults['set'](_0x19815b(0x1d5),serverversion)[_0x19815b(0x1b1)]();}function getConfiguration(_0x315aed){const _0x432936=_0x5c0674;let _0x176f8f=dbConfig[_0x432936(0x21d)](_0x432936(0x202))[_0x432936(0x182)]({'botID':_0x315aed})[_0x432936(0x181)]();if(_0x176f8f){let _0x552c79=![];typeof _0x176f8f[_0x432936(0xf1)]==_0x432936(0x1b0)&&(_0x176f8f={..._0x176f8f,'threshold':Number(_0x176f8f[_0x432936(0xf1)])},_0x552c79=!![]),_0x176f8f[_0x432936(0x271)]==undefined&&(_0x176f8f={..._0x176f8f,'change24h':-0x14},_0x552c79=!![]),_0x176f8f['fiat']==undefined&&(_0x176f8f={..._0x176f8f,'fiat':'USD'},_0x552c79=!![]),_0x176f8f[_0x432936(0xfa)]==undefined&&(_0x176f8f={..._0x176f8f,'onepagemode':settings['onepagemode']},_0x552c79=!![]),_0x176f8f[_0x432936(0x231)]==undefined&&(_0x176f8f={..._0x176f8f,'colorscheme':'red_yellow_blue'},_0x552c79=!![]),_0x176f8f['autoliquidity']==undefined&&(_0x176f8f={..._0x176f8f,'autoliquidity':_0x432936(0x24d)},_0x552c79=!![]),_0x176f8f[_0x432936(0x1c4)]==undefined&&(_0x176f8f={..._0x176f8f,'marketcapApi':settings[_0x432936(0x1c4)]?!![]:![]},_0x552c79=!![]),_0x176f8f[_0x432936(0xcf)]==undefined&&(_0x176f8f={..._0x176f8f,'marketcapEnabled':![]},_0x552c79=!![]),_0x552c79&&(_0x176f8f={'botID':_0x176f8f['botID'],'exchange':_0x176f8f[_0x432936(0x216)],'apiKey':_0x176f8f['apiKey'],'apiSecret':_0x176f8f[_0x432936(0x26c)],'apiPassword':_0x176f8f['apiPassword'],'basecoin':_0x176f8f[_0x432936(0x1f7)],'botname':_0x176f8f[_0x432936(0xef)],'showname':_0x176f8f['showname'],'threshold':_0x176f8f[_0x432936(0xf1)],'ordertype':_0x176f8f[_0x432936(0x1b2)],'timeout':_0x176f8f[_0x432936(0x210)],'fiat':_0x176f8f[_0x432936(0x14b)],'startdate':_0x176f8f['startdate'],'recreate':_0x176f8f[_0x432936(0xf3)],'timeshift':_0x176f8f['timeshift'],'onepagemode':_0x176f8f[_0x432936(0xfa)],'headless':_0x176f8f['headless'],'cooldown':_0x176f8f['cooldown'],'change24h':_0x176f8f[_0x432936(0x271)],'emojibuy':_0x176f8f['emojibuy'],'emojisell':_0x176f8f[_0x432936(0x106)],'colorscheme':_0x176f8f[_0x432936(0x231)],'marketcapApi':_0x176f8f[_0x432936(0x1c4)],'marketcapEnabled':_0x176f8f[_0x432936(0xcf)],'portfolio':_0x176f8f[_0x432936(0x161)],'autoliquidity':_0x176f8f[_0x432936(0x187)],'liquidity':_0x176f8f['liquidity'],'openOrders':_0x176f8f[_0x432936(0xc5)]},dbConfig['get'](_0x432936(0x202))['remove']()[_0x432936(0x1b1)](),dbConfig[_0x432936(0x21d)](_0x432936(0x202))[_0x432936(0x107)](_0x176f8f)[_0x432936(0x1b1)]());}else _0x176f8f={'botID':_0x315aed,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':'Bot\x20'+_0x315aed,'showname':![],'threshold':0x3,'ordertype':_0x432936(0x1e1),'timeout':0x14,'fiat':_0x432936(0x1c9),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x432936(0x1d0)],'onepagemode':settings[_0x432936(0xfa)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x432936(0x1e2),'marketcapApi':settings['marketcapApi']?!![]:![],'marketcapEnabled':![],'portfolio':[],'autoliquidity':'update-liquidity','liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x176f8f;}function emittedConfiguration(){const _0xf6b73=_0x5c0674;let _0x49d39a;if(config[_0xf6b73(0x22e)]=='')_0x49d39a={...config,'configstate':_0xf6b73(0xd9)};else config[_0xf6b73(0x22e)]==_0xf6b73(0x1bd)?_0x49d39a={...config,'configstate':_0xf6b73(0x219)}:(_0x49d39a={...config,'apiKey':_0xf6b73(0x269),'apiSecret':_0xf6b73(0x269)},config['apiPassword']&&(_0x49d39a[_0xf6b73(0x1ae)]='************'));return _0x49d39a[_0xf6b73(0x1e7)]=enableFiatToggle,_0x49d39a;}function getSettings(){const _0x474c1b=_0x5c0674;return dbSettings[_0x474c1b(0x21d)](_0x474c1b(0x12a))[_0x474c1b(0x181)]();}function getSecure(){const _0x488233=_0x5c0674;return dbSecure[_0x488233(0x21d)](_0x488233(0x207))['value']()||{};}function updateTimeshift(_0x478eaa){const _0x4d12c7=_0x5c0674;let _0x1a2819=dbConfig[_0x4d12c7(0x21d)](_0x4d12c7(0x202))[_0x4d12c7(0x182)]({'botID':botID})[_0x4d12c7(0x181)]();_0x1a2819&&dbConfig[_0x4d12c7(0x21d)](_0x4d12c7(0x202))[_0x4d12c7(0x182)]({'botID':botID})['assign']({'timeshift':_0x478eaa})[_0x4d12c7(0x1b1)](),config['timeshift']=_0x478eaa,proxyEmit(_0x4d12c7(0x15f),emittedConfiguration());}function updateOnepagemode(_0xffb088){const _0x27f319=_0x5c0674;let _0x11fa44=dbConfig['get'](_0x27f319(0x202))[_0x27f319(0x182)]({'botID':botID})[_0x27f319(0x181)]();_0x11fa44&&dbConfig[_0x27f319(0x21d)](_0x27f319(0x202))['find']({'botID':botID})[_0x27f319(0x279)]({'onepagemode':_0xffb088})[_0x27f319(0x1b1)](),config[_0x27f319(0xfa)]=_0xffb088,proxyEmit(_0x27f319(0x15f),emittedConfiguration());}function updateMarketcapApi(_0x2c4d21){const _0x3e76f7=_0x5c0674,_0x12ad78=_0x2c4d21?!![]:![];let _0x8aedcd=dbConfig['get'](_0x3e76f7(0x202))[_0x3e76f7(0x182)]({'botID':botID})[_0x3e76f7(0x181)]();_0x8aedcd&&dbConfig[_0x3e76f7(0x21d)]('bot')[_0x3e76f7(0x182)]({'botID':botID})[_0x3e76f7(0x279)]({'marketcapApi':_0x12ad78})[_0x3e76f7(0x1b1)](),config[_0x3e76f7(0x1c4)]=_0x12ad78,getMarketCap(),proxyEmit('configuration',emittedConfiguration());}async function storeConfiguration(_0x1b95a6){const _0x522cff=_0x5c0674;logger[_0x522cff(0x276)](_0x522cff(0x27d));if(pidBalances)clearTimeout(pidBalances);setBlockTransactionDetection(!![]);let _0x19e896=![],_0x499bfb=![],_0x2d7512=[];_0x1b95a6[_0x522cff(0x161)]['forEach'](_0x3a65a8=>{const _0x4df6d3=_0x522cff;if(!_0x3a65a8[_0x4df6d3(0x28b)]&&_0x3a65a8[_0x4df6d3(0x20e)]!=_0x1b95a6[_0x4df6d3(0x1f7)])_0x2d7512[_0x4df6d3(0x107)](_0x3a65a8[_0x4df6d3(0x14d)]);}),_0x2d7512[_0x522cff(0x110)](_0x1ca143=>{const _0x5e828d=_0x522cff,_0x11d66b=currentCoins[_0x5e828d(0x182)](_0xfc107e=>_0xfc107e[_0x5e828d(0x14d)]==_0x1ca143);!_0x11d66b&&(_0x19e896=!![]);}),currentCoins[_0x522cff(0x110)](_0x442e25=>{const _0x58ab8b=_0x522cff;if(_0x442e25[_0x58ab8b(0x20e)]!=config['basecoin']){const _0x2ea104=_0x2d7512[_0x58ab8b(0x182)](_0x270f16=>_0x270f16==_0x442e25[_0x58ab8b(0x14d)]);!_0x2ea104&&(_0x19e896=!![]);}}),_0x1b95a6[_0x522cff(0x161)][_0x522cff(0x110)](_0x1a954a=>{const _0x48f8b7=_0x522cff,_0x27dbca=config['portfolio']['find'](_0x53b577=>_0x53b577[_0x48f8b7(0x20e)]==_0x1a954a['coin']);if(_0x27dbca&&_0x1a954a[_0x48f8b7(0x229)]!=_0x27dbca[_0x48f8b7(0x229)])_0x499bfb=!![];});let _0x2dc2ed=dbConfig[_0x522cff(0x21d)]('bot')[_0x522cff(0x182)]({'botID':botID})[_0x522cff(0x181)]();_0x1b95a6={..._0x1b95a6,'apiKey':decryptRSA(secure[_0x522cff(0x189)],_0x1b95a6['apiKey']),'apiSecret':decryptRSA(secure['privateKey'],_0x1b95a6[_0x522cff(0x26c)])};_0x1b95a6[_0x522cff(0x1ae)]&&(_0x1b95a6[_0x522cff(0x1ae)]=decryptRSA(secure[_0x522cff(0x189)],_0x1b95a6[_0x522cff(0x1ae)]));let _0x1aa7f8=![];if(_0x2dc2ed){_0x1b95a6[_0x522cff(0x22e)]==_0x522cff(0x269)?_0x1b95a6[_0x522cff(0x22e)]=config[_0x522cff(0x22e)]:_0x1aa7f8=!![];_0x1b95a6[_0x522cff(0x26c)]==_0x522cff(0x269)?_0x1b95a6[_0x522cff(0x26c)]=config[_0x522cff(0x26c)]:_0x1aa7f8=!![];if(_0x1b95a6[_0x522cff(0x1ae)]==_0x522cff(0x269))_0x1b95a6[_0x522cff(0x1ae)]=config['apiPassword'];else{if(_0x1b95a6[_0x522cff(0x1ae)])_0x1aa7f8=!![];}dbConfig[_0x522cff(0x21d)](_0x522cff(0x202))[_0x522cff(0x182)]({'botID':botID})[_0x522cff(0x279)](_0x1b95a6)[_0x522cff(0x1b1)]();}else dbConfig[_0x522cff(0x21d)](_0x522cff(0x202))['push'](_0x1b95a6)[_0x522cff(0x1b1)](),_0x1aa7f8=!![],process[_0x522cff(0x115)]({'status':_0x522cff(0x1ed),'live':_0x522cff(0x259)},_0x2ef48c=>{});process['send']({'botname':_0x1b95a6['botname']},_0x123dde=>{}),config={..._0x1b95a6},updateBotManager(),proxyEmit('configuration-stored'),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x1aa7f8)!_0x2dc2ed?await reset(!![]):getBalances();else _0x19e896||_0x499bfb?await reset(![]):getBalances();setBlockTransactionDetection(![]);}async function storeHeadless(_0x2a15cf){const _0x9dd4c7=_0x5c0674,_0x23b7b6={...config,'headless':_0x2a15cf[_0x9dd4c7(0x1e8)]};let _0x140b3c=dbConfig[_0x9dd4c7(0x21d)](_0x9dd4c7(0x202))[_0x9dd4c7(0x182)]({'botID':botID})['value']();_0x140b3c&&dbConfig['get']('bot')[_0x9dd4c7(0x182)]({'botID':botID})[_0x9dd4c7(0x279)](_0x23b7b6)[_0x9dd4c7(0x1b1)](),config={..._0x23b7b6},updateBotManager(),proxyEmit(_0x9dd4c7(0x15f),emittedConfiguration());}async function storeFiat(_0x1cb328){const _0x4add4b=_0x5c0674,_0x31bc99={...config,'fiat':_0x1cb328};let _0x5d945d=dbConfig[_0x4add4b(0x21d)]('bot')[_0x4add4b(0x182)]({'botID':botID})[_0x4add4b(0x181)]();_0x5d945d&&dbConfig['get'](_0x4add4b(0x202))[_0x4add4b(0x182)]({'botID':botID})['assign'](_0x31bc99)[_0x4add4b(0x1b1)](),config={..._0x31bc99},proxyEmit('configuration',emittedConfiguration());}function resetHistory(){const _0x59f368=_0x5c0674;logger['full']('Resetting\x20bot\x20history');try{if(fs[_0x59f368(0xd6)](path[_0x59f368(0x211)](configpath,'bot-'+botID+'-events.json')))fs['unlinkSync'](path[_0x59f368(0x211)](configpath,_0x59f368(0x16d)+botID+_0x59f368(0xd2)));if(fs['existsSync'](path['join'](configpath,_0x59f368(0x16d)+botID+_0x59f368(0x1bf))))fs[_0x59f368(0x21a)](path[_0x59f368(0x211)](configpath,'bot-'+botID+'-performance.json'));if(fs[_0x59f368(0xd6)](path['join'](configpath,_0x59f368(0x16d)+botID+_0x59f368(0xe3))))fs[_0x59f368(0x21a)](path[_0x59f368(0x211)](configpath,_0x59f368(0x16d)+botID+'-results.json'));}catch(_0x3b5a07){if(_0x3b5a07)logger[_0x59f368(0x123)](_0x59f368(0x1cb),_0x3b5a07);}const _0x2bacbe=getDate();let _0x527721=[];currentCoins['forEach'](_0x401871=>{const _0xe664ab=_0x59f368;_0x527721[_0xe664ab(0x107)]({'coin':_0x401871[_0xe664ab(0x20e)],'number':_0x401871['number'],'price':_0x401871[_0xe664ab(0x11e)]});});let _0xd63c0f=dbConfig[_0x59f368(0x21d)](_0x59f368(0x202))[_0x59f368(0x182)]({'botID':botID})[_0x59f368(0x181)]();_0xd63c0f&&(dbConfig[_0x59f368(0x21d)](_0x59f368(0x202))['find']({'botID':botID})['assign']({'liquidity':[{'date':_0x2bacbe,'changes':_0x527721}]})[_0x59f368(0x1b1)](),config['liquidity']=[]),restartBot(!![]);}function noslash(_0x42fd78){const _0x307ae6=_0x5c0674;return _0x42fd78[_0x307ae6(0x1d1)]('/','');}function updateHighestFee(_0x59c295){const _0x390611=_0x5c0674;if(_0x59c295[_0x390611(0x131)]){let _0x271913={'filled':_0x59c295[_0x390611(0x274)]*_0x59c295['price'],'amount':_0x59c295[_0x390611(0x274)]*_0x59c295[_0x390611(0x14a)],'side':_0x59c295[_0x390611(0xf0)]==_0x390611(0x289)?'buy':_0x390611(0x289),'price':0x1/_0x59c295[_0x390611(0x14a)]};_0x59c295={..._0x59c295,..._0x271913};}const _0x723cb6=defaultFee*_0x59c295['filled']*_0x59c295[_0x390611(0x14a)];lastFees[_0x390611(0x147)][_0x390611(0x1a6)]===0x14&&lastFees['recent20'][_0x390611(0x25c)](),lastFees[_0x390611(0x147)][_0x390611(0x107)](_0x723cb6),lastFees[_0x390611(0x172)]=Math[_0x390611(0x140)](...lastFees[_0x390611(0x147)]);}async function updateNumberCoinsCcxt(_0x4e9c90){const _0x131616=_0x5c0674;logger[_0x131616(0x276)](_0x131616(0x215)+_0x4e9c90[_0x131616(0x14d)]+_0x131616(0x184)+_0x4e9c90['status']+'\x20|\x20'+_0x4e9c90['filled']+_0x131616(0x246)+_0x4e9c90[_0x131616(0x15c)]+_0x131616(0x184)+_0x4e9c90['id']);let _0x247ab2=_0x4e9c90[_0x131616(0xfd)],_0x1b7d7e=![];currentCoins['forEach'](_0x431af0=>{const _0x1f540e=_0x131616;_0x431af0[_0x1f540e(0x14d)]==_0x4e9c90['symbol']&&(_0x1b7d7e=!![]);});if(!_0x1b7d7e)return;const _0x34d5ae=currentCoins['find'](_0x1ac809=>_0x1ac809[_0x131616(0x14d)]==_0x4e9c90['symbol']),_0xcb7016=_0x34d5ae[_0x131616(0x20e)],_0x1c5282=_0x3d3ba4=>{const _0x4ac155=_0x131616,_0xaf8545=currentCoins[_0x4ac155(0x182)](_0x91a23c=>_0x91a23c[_0x4ac155(0x14d)]==_0x4e9c90[_0x4ac155(0x14d)]);if(_0xaf8545)_0xaf8545[_0x4ac155(0xf8)]=_0x3d3ba4;};let _0x22367a=![];for(const _0x10f09a of lastOrders){const _0x2a4b13=0x64,_0x3f3b09=0x1388;let _0x420745=0x0;while(!_0x10f09a[_0x131616(0x134)]&&_0x420745*_0x2a4b13<_0x3f3b09){_0x420745++,await sleep(_0x2a4b13);}if(_0x420745>0x0)logger['debug'](_0x131616(0xc9)+_0x420745*_0x2a4b13/0x3e8+_0x131616(0x217));_0x10f09a[_0x131616(0x134)]==_0x4e9c90['id']&&(_0x22367a=!![]);}if(_0x247ab2=='open'){_0x1c5282('open');if(_0x4e9c90['filled']>0x0&&_0x4e9c90[_0x131616(0x274)]<_0x4e9c90[_0x131616(0x15c)]){if(_0x22367a){setBlockTransactionDetection(!![]),logger[_0x131616(0x276)](_0x131616(0x248)+_0x4e9c90['filled']+_0x131616(0x243)+_0x4e9c90['id']);const _0x1869c2=await getCoins(balanceUpdateDelay,undefined,undefined,_0xcb7016);[currentCoins,currentCoinsAll]=_0x1869c2,setBlockTransactionDetection(![]);}else logger[_0x131616(0x276)](_0x131616(0x248)+_0x4e9c90['filled']+_0x131616(0x266)+_0x4e9c90['id']),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay);}}else{if(_0x247ab2==_0x131616(0x1b9)){_0x1c5282(_0x131616(0x1b9)),lastOrders=lastOrders[_0x131616(0x1b7)](_0x1099d2=>_0x1099d2[_0x131616(0x14d)]!=_0x4e9c90['symbol']);const _0x3cb081=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x3cb081,setBlockTransactionDetection(![]),await getOpenOrders(),handleOpenOrders();}else{if(_0x247ab2==_0x131616(0x1a3)){if(lastOrders)for(const _0xa3c349 of lastOrders){if(_0xa3c349['orderId']==_0x4e9c90['id']){logger['debug'](_0x131616(0x27b)+_0x4e9c90['id']),_0x22367a=!![];if(_0xa3c349[_0x131616(0x274)]==0x0){setBlockTransactionDetection(!![]),logger[_0x131616(0x276)](_0x131616(0x173)+_0x4e9c90['id']);if(_0x4e9c90[_0x131616(0x1bc)])_0xa3c349['price']=_0x4e9c90[_0x131616(0x1bc)];else{if(_0x4e9c90[_0x131616(0x14a)])_0xa3c349[_0x131616(0x14a)]=_0x4e9c90[_0x131616(0x14a)];else{}}_0xa3c349[_0x131616(0x274)]=_0x4e9c90[_0x131616(0x274)],updateHighestFee(_0xa3c349);const _0x438698=await getCoins(balanceUpdateDelay,undefined,undefined,_0xcb7016);[currentCoins,currentCoinsAll]=_0x438698,setBlockTransactionDetection(![]),await validateOrders(),_0x1c5282('filled'),_0xa3c349[_0x131616(0x19f)]={'currency':_0x4e9c90[_0x131616(0x19f)]?_0x4e9c90[_0x131616(0x19f)]['currency']:null,'cost':_0x4e9c90[_0x131616(0x19f)]?_0x4e9c90['fee'][_0x131616(0x22b)]:0x0},await updateCoinResults(_0xa3c349);}}}!_0x22367a&&(logger['debug']('1\x20-\x20FILLED\x20unknown\x20order:\x20'+_0x4e9c90['id']),_0x1c5282(_0x131616(0x274)),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay),await updateOpenOrders(),handleOpenOrders());}}}if(lastBalances){let _0x4115c4=JSON[_0x131616(0xe8)](lastBalances['portfolio']);const _0x3c193d=_0x4115c4[_0x131616(0x182)](_0x5e34d6=>_0x5e34d6['symbol']==_0x4e9c90[_0x131616(0x14d)]);if(_0x3c193d){if(_0x247ab2=='open')_0x3c193d[_0x131616(0xf8)]=_0x3c193d[_0x131616(0xf8)]=='filled'?_0x131616(0x274):'open';else{if(_0x247ab2==_0x131616(0x1b9))_0x3c193d['orderstatus']=_0x3c193d[_0x131616(0xf8)]==_0x131616(0x274)?'filled':_0x131616(0x1b9);else _0x247ab2==_0x131616(0x1a3)&&(_0x3c193d[_0x131616(0xf8)]=_0x131616(0x274));}}lastBalances={...lastBalances,'portfolio':JSON[_0x131616(0x21b)](_0x4115c4)},proxyEmit(_0x131616(0x22d),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){await getOpenOrders();let _0x211f15=![];currentCoins['forEach'](_0x229ebf=>{const _0x3e8d6e=_0x52df;_0x211f15=allOpenOrders[_0x3e8d6e(0x182)](_0xf32301=>_0xf32301['symbol']==_0x229ebf[_0x3e8d6e(0x14d)]),_0x229ebf[_0x3e8d6e(0xf8)]=_0x211f15?_0x3e8d6e(0x252):_0x3e8d6e(0x265);});}async function fetchBalance(_0xf8a45f=!![]){const _0x1837f4=_0x5c0674;let _0x51b1cb,_0x2c8b1b;try{return _0x51b1cb=await exchange[_0x1837f4(0x28c)](),_0x2c8b1b=_0x51b1cb['total'],_0x2c8b1b;}catch(_0x497d0b){return!_0xf8a45f?handleErrorNoStop(_0x497d0b,_0x1837f4(0x124)):await handleError(_0x497d0b,_0x1837f4(0x124)),![];}}async function getCoins(_0x16f630=0x0,_0x63cc82=!![],_0x16222b=config[_0x5c0674(0x1f7)],_0x5e255a){const _0x328e2e=_0x5c0674;let _0x5942dd=[],_0x210cf0=[],_0x24c581=[],_0x3fe7e9;if(_0x16f630)await sleep(_0x16f630);if(botPaused)return[currentCoins,currentCoinsAll];let _0x5cbb7a=![],_0x3600e6=0x0,_0x16c3e0,_0x18ed8e;_0x5e255a&&(_0x16c3e0=currentCoins[_0x328e2e(0x182)](_0x7885d3=>_0x7885d3[_0x328e2e(0x20e)]==_0x5e255a),_0x16c3e0&&(_0x18ed8e=_0x16c3e0['prevnumber'],delete _0x16c3e0[_0x328e2e(0xf7)]));while(!_0x5cbb7a){_0x3fe7e9=await fetchBalance(_0x63cc82);if(_0x3fe7e9){if(_0x5e255a){if(_0x3fe7e9[_0x5e255a]!=_0x18ed8e)logger[_0x328e2e(0x276)]('Valid\x20balance\x20for\x20'+_0x5e255a+':\x20'+_0x3fe7e9[_0x5e255a]+'\x20('+_0x18ed8e+')'),_0x5cbb7a=!![];else{logger[_0x328e2e(0x276)](_0x328e2e(0x214)+_0x5e255a+':\x20'+_0x3fe7e9[_0x5e255a]+'\x20('+_0x18ed8e+')'),_0x3600e6++;if(_0x3600e6<balanceUpdateRetries)await sleep(balanceUpdateDelay);else{logger[_0x328e2e(0x276)]('Stopped\x20fetching\x20balance\x20after\x20'+_0x3600e6+'\x20attempts');break;}}}else break;}else return[currentCoins,currentCoinsAll];}for(const [_0x8ef582,_0x41e245]of Object[_0x328e2e(0x233)](_0x3fe7e9)){_0x24c581[_0x328e2e(0x107)](_0x8ef582);}config[_0x328e2e(0x161)][_0x328e2e(0x110)](_0x52b535=>{const _0xd8b9=_0x328e2e;!_0x24c581[_0xd8b9(0x1fd)](_0x52b535[_0xd8b9(0x20e)])&&(_0x3fe7e9[_0x52b535['coin']]=0x0);});if(_0x16222b=='')for(const [_0x1dc915,_0x444651]of Object[_0x328e2e(0x233)](_0x3fe7e9)){_0x444651!=0x0&&_0x5942dd[_0x328e2e(0x107)]({'coin':_0x1dc915});}else for(const [_0xa337fb,_0x51bc33]of Object[_0x328e2e(0x233)](_0x3fe7e9)){const _0x3893f6=config[_0x328e2e(0x161)][_0x328e2e(0x182)](_0x3a0bbf=>_0x3a0bbf[_0x328e2e(0x20e)]==_0xa337fb),_0x202336=_0xa337fb+'/'+_0x16222b,_0x1547a7=_0x16222b+'/'+_0xa337fb,_0x7975a=currentCoins[_0x328e2e(0x182)](_0x1170e2=>_0x1170e2['coin']==_0xa337fb);if((_0x51bc33!=0x0||_0x3893f6)&&(allSymbols[_0x328e2e(0x1fd)](_0x202336)||_0xa337fb==_0x16222b))_0x7975a?_0x5942dd[_0x328e2e(0x107)]({..._0x7975a,'number':Math[_0x328e2e(0x140)](_0x51bc33+(_0x3893f6&&_0x3893f6[_0x328e2e(0x229)]||0x0),0x0)}):_0x5942dd[_0x328e2e(0x107)]({'coin':_0xa337fb,'symbol':_0x202336,'reverse':![],'number':Math[_0x328e2e(0x140)](_0x51bc33+(_0x3893f6&&_0x3893f6[_0x328e2e(0x229)]||0x0),0x0),'orderstatus':_0x328e2e(0x265)});else{if((_0x51bc33!=0x0||_0x3893f6)&&allSymbols[_0x328e2e(0x1fd)](_0x1547a7))_0x7975a?_0x5942dd['push']({..._0x7975a,'number':Math[_0x328e2e(0x140)](_0x51bc33+(_0x3893f6&&_0x3893f6[_0x328e2e(0x229)]||0x0),0x0)}):_0x5942dd[_0x328e2e(0x107)]({'coin':_0xa337fb,'symbol':_0x1547a7,'reverse':!![],'number':Math['max'](_0x51bc33+(_0x3893f6&&_0x3893f6[_0x328e2e(0x229)]||0x0),0x0),'orderstatus':_0x328e2e(0x265)});else _0x3893f6&&_0x5942dd[_0x328e2e(0x107)]({'coin':_0x3893f6['coin'],'symbol':_0x3893f6[_0x328e2e(0x14d)],'reverse':_0x3893f6[_0x328e2e(0x131)],'number':0x0,'orderstatus':_0x328e2e(0x265)});}}return _0x5942dd['sort']((_0x170bdd,_0x5bf834)=>_0x170bdd[_0x328e2e(0x1ff)]<_0x5bf834[_0x328e2e(0x1ff)]?0x1:_0x5bf834[_0x328e2e(0x1ff)]<_0x170bdd[_0x328e2e(0x1ff)]?-0x1:0x0),_0x210cf0=cloneDeep(_0x5942dd),_0x5942dd=_0x5942dd['filter'](_0x595615=>{const _0x3eb91c=_0x328e2e,_0x53bb97=config[_0x3eb91c(0x161)][_0x3eb91c(0x182)](_0x3fbe84=>_0x3fbe84[_0x3eb91c(0x20e)]==_0x595615[_0x3eb91c(0x20e)]);return _0x53bb97&&!_0x53bb97[_0x3eb91c(0x28b)];}),[_0x5942dd,_0x210cf0];}async function getCoinNumber(_0x2c141f){const _0x542cb0=_0x5c0674;let _0x15baa8;try{const _0x542581=await exchange[_0x542cb0(0x28c)]();_0x15baa8=_0x542581[_0x542cb0(0x22a)][_0x2c141f];}catch(_0xee41c7){await handleError(_0xee41c7,'getCoinNumber()');}return _0x15baa8;}async function getOpenOrders(){const _0x3f6f84=_0x5c0674;let _0x3e8762;allOpenOrders=[];try{for(const _0x3c2e62 of config[_0x3f6f84(0x161)]){!_0x3c2e62[_0x3f6f84(0x28b)]&&_0x3c2e62[_0x3f6f84(0x20e)]!=config[_0x3f6f84(0x1f7)]&&(_0x3e8762=await exchange[_0x3f6f84(0x19b)](_0x3c2e62[_0x3f6f84(0x14d)]),_0x3e8762[_0x3f6f84(0x1a6)]>0x0&&allOpenOrders['push'](_0x3e8762[0x0]));}}catch(_0x1b48ef){await handleError(_0x1b48ef,_0x3f6f84(0x15e));}}async function handleOpenOrders(_0x4ca0be=0x0){const _0x2b9cc1=_0x5c0674;allOpenOrders['length']==0x0&&lockOrders==ORDERS['LOCKED']&&allOrdersPlaced&&(_0x4ca0be==0x0?(logger[_0x2b9cc1(0x276)]('1\x20-\x20Handle\x20open\x20orders'),_0x4ca0be++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger['debug']('2\x20-\x20Handled\x20open\x20orders'),validateOrders(_0x2b9cc1(0x22f))));}async function testAPI(_0x3d62f6){const _0x167e2a=_0x5c0674;logger[_0x167e2a(0x276)](_0x167e2a(0x1eb));const _0x58b105=ccxt[_0x167e2a(0x1a4)][_0x3d62f6['exchange'][_0x167e2a(0x10f)]()],_0x9f2f3d=new _0x58b105({'apiKey':_0x3d62f6[_0x167e2a(0x22e)],'secret':_0x3d62f6[_0x167e2a(0x26c)],'options':{'defaultType':'spot'}});if(_0x3d62f6[_0x167e2a(0x1ae)])_0x9f2f3d['password']=_0x3d62f6['apiPassword'];try{await _0x9f2f3d[_0x167e2a(0x28c)]();}catch(_0x4c98e9){logger['debug'](_0x167e2a(0x253)+_0x4c98e9[_0x167e2a(0x213)]());throw _0x4c98e9;}}function cloneDeep(_0x3ba106){return JSON['parse'](JSON['stringify'](_0x3ba106));}async function getPortfolio(_0x462268){const _0x5d4733=_0x5c0674;let _0xc4e758=[],_0xc3c06f=[],_0x19144c=[],_0x164a8c;_0x462268[_0x5d4733(0x22e)]=decryptRSA(secure[_0x5d4733(0x189)],_0x462268[_0x5d4733(0x22e)]),_0x462268['apiSecret']=decryptRSA(secure[_0x5d4733(0x189)],_0x462268[_0x5d4733(0x26c)]);if(_0x462268[_0x5d4733(0x1ae)])_0x462268[_0x5d4733(0x1ae)]=decryptRSA(secure['privateKey'],_0x462268['apiPassword']);if(_0x462268[_0x5d4733(0x22e)]!==_0x5d4733(0x269)||_0x462268[_0x5d4733(0x26c)]!=='************'||_0x462268['apiPassword']&&_0x462268[_0x5d4733(0x1ae)]!=='************'){if(config[_0x5d4733(0x216)]){if(_0x462268[_0x5d4733(0x22e)]=='************')_0x462268[_0x5d4733(0x22e)]=config[_0x5d4733(0x22e)];if(_0x462268[_0x5d4733(0x26c)]==_0x5d4733(0x269))_0x462268[_0x5d4733(0x26c)]=config[_0x5d4733(0x26c)];if(_0x462268['apiPassword']==_0x5d4733(0x269))_0x462268[_0x5d4733(0x1ae)]=config[_0x5d4733(0x1ae)];}try{if(_0x462268[_0x5d4733(0x121)])await testAPI(_0x462268);}catch(_0x597ba6){if(_0x597ba6[_0x5d4733(0x213)]()[_0x5d4733(0x1fd)]('AuthenticationError')){logHistory(_0x5d4733(0x13d),_0x5d4733(0xec)),logHistory(_0x5d4733(0x13d),_0x5d4733(0x20c)+_0x597ba6['toString']()),proxyEmit(_0x5d4733(0xe5),![]);return;}else{if(_0x597ba6[_0x5d4733(0x213)]()['includes'](_0x5d4733(0x221))){logHistory('error',_0x5d4733(0x206)),logHistory(_0x5d4733(0x13d),_0x5d4733(0x20c)+_0x597ba6[_0x5d4733(0x213)]()),proxyEmit(_0x5d4733(0xe5),![]);return;}else{logHistory(_0x5d4733(0x13d),_0x5d4733(0x164)+_0x597ba6[_0x5d4733(0x213)]()),logger[_0x5d4733(0x276)](_0x5d4733(0x171),_0x597ba6),proxyEmit(_0x5d4733(0xe5),![]);return;}}}exchange?updateExchange(_0x462268['apiKey'],_0x462268[_0x5d4733(0x26c)],_0x462268[_0x5d4733(0x1ae)]):await initExchange(_0x462268[_0x5d4733(0x216)],_0x462268[_0x5d4733(0x22e)],_0x462268[_0x5d4733(0x26c)],_0x462268[_0x5d4733(0x1ae)]);await loadSymbols();const _0x5a610a=await getCoins(0x0,![],_0x462268[_0x5d4733(0x1f7)]);_0x19144c=cloneDeep(_0x5a610a[0x1]);}else{const _0x3f7593=await getCoins();_0x19144c=cloneDeep(_0x3f7593[0x1]);}if(_0x462268[_0x5d4733(0x1f7)]=='')proxyEmit(_0x5d4733(0xe5),!![]),proxyEmit(_0x5d4733(0x272),_0x19144c);else{_0x19144c[_0x5d4733(0x110)](_0x1cc462=>{const _0x2e93b5=_0x5d4733;if(_0x1cc462['coin']!=_0x462268['basecoin']&&allSymbols[_0x2e93b5(0x1fd)](_0x1cc462['symbol']))_0xc4e758[_0x2e93b5(0x107)](_0x1cc462['symbol']);});if(_0xc4e758[_0x5d4733(0x1a6)]==0x0)logHistory('error',_0x5d4733(0x270));else{try{_0xc3c06f=await getTickers(_0xc4e758);}catch(_0x4e07ee){logHistory(_0x5d4733(0x13d),_0x5d4733(0x12e)),logger[_0x5d4733(0x276)](_0x5d4733(0x171),_0x4e07ee),proxyEmit(_0x5d4733(0xe5),![]);return;}_0x19144c['forEach'](_0x1862ce=>{const _0x3238c5=_0x5d4733;_0x1862ce[_0x3238c5(0x20e)]!=_0x462268[_0x3238c5(0x1f7)]?_0xc3c06f[_0x1862ce[_0x3238c5(0x14d)]]?_0x164a8c=_0x1862ce[_0x3238c5(0x131)]?0x1/_0xc3c06f[_0x1862ce[_0x3238c5(0x14d)]][_0x3238c5(0x11e)]:_0xc3c06f[_0x1862ce[_0x3238c5(0x14d)]]['last']:_0x164a8c=0x0:_0x164a8c=0x1,_0x1862ce[_0x3238c5(0x14a)]=formatResult(_0x164a8c,0x8);}),await getMarketCap(_0x19144c),proxyEmit('portfolio1',!![]),proxyEmit('portfolio2',_0x19144c);}}}function truncateTradeAmount(_0x31cb14,_0x35e1fd){const _0xddbae3=_0x5c0674;let _0x2a24a8=0x0;try{_0x2a24a8=exchange[_0xddbae3(0x26e)](_0x31cb14,_0x35e1fd);}catch(_0x305025){}return _0x2a24a8;}function checkMinimums(_0x2fe901){const _0x57e4b7=_0x5c0674;let _0x498174=!![];const _0x3973c4=!_0x2fe901[_0x57e4b7(0x131)]?markets[_0x2fe901['symbol']][_0x57e4b7(0x267)]['amount'][_0x57e4b7(0x162)]:markets[_0x2fe901[_0x57e4b7(0x14d)]][_0x57e4b7(0x267)][_0x57e4b7(0x22b)][_0x57e4b7(0x162)],_0x269ec5=!_0x2fe901[_0x57e4b7(0x131)]?markets[_0x2fe901[_0x57e4b7(0x14d)]][_0x57e4b7(0x267)][_0x57e4b7(0x22b)][_0x57e4b7(0x162)]:markets[_0x2fe901['symbol']][_0x57e4b7(0x267)][_0x57e4b7(0x15c)][_0x57e4b7(0x162)],_0x512a4c=truncateTradeAmount(_0x2fe901['symbol'],_0x2fe901[_0x57e4b7(0x156)]);_0x2fe901['trade']=_0x512a4c;if(Math[_0x57e4b7(0x17d)](_0x512a4c)<_0x3973c4)_0x498174=![];if(Math[_0x57e4b7(0x17d)](_0x512a4c)*_0x2fe901['last']<_0x269ec5)_0x498174=![];if(_0x2fe901[_0x57e4b7(0xf0)]==_0x57e4b7(0x289)){let _0x4adf55=config[_0x57e4b7(0x161)][_0x57e4b7(0x182)](_0xccba29=>_0xccba29['coin']==_0x2fe901[_0x57e4b7(0x20e)]);if(_0x4adf55[_0x57e4b7(0x229)]>0x0){if(Math['abs'](_0x512a4c)>_0x2fe901['number']-_0x4adf55['offset'])_0x498174=![];}else{if(Math[_0x57e4b7(0x17d)](_0x512a4c)>_0x2fe901[_0x57e4b7(0x141)])_0x498174=![];}}if(_0x2fe901[_0x57e4b7(0xf0)]==_0x57e4b7(0xc4)){let _0x3cb84c=config[_0x57e4b7(0x161)][_0x57e4b7(0x182)](_0x47a0a5=>_0x47a0a5['coin']==config[_0x57e4b7(0x1f7)]),_0xddafc7=currentCoins['find'](_0xd16e99=>_0xd16e99['coin']==config[_0x57e4b7(0x1f7)]);if(_0x3cb84c[_0x57e4b7(0x229)]>0x0){if(Math[_0x57e4b7(0x17d)](_0x512a4c)*_0x2fe901[_0x57e4b7(0x11e)]>_0xddafc7[_0x57e4b7(0x141)]-_0x3cb84c['offset'])_0x498174=![];}else{if(Math[_0x57e4b7(0x17d)](_0x512a4c)*_0x2fe901['last']>_0xddafc7[_0x57e4b7(0x141)])_0x498174=![];}}return _0x498174;}async function getBalances(_0x4f6ba4=!![]){const _0x333193=_0x5c0674;if(botPaused)return;let _0x2574b8=0x0,_0x53c314;const _0x2bb24c=config[_0x333193(0xf1)];if(config[_0x333193(0x1e8)]&&config['change24h']<0x0)await validate24hChanges();currentCoins[_0x333193(0x110)](_0x391701=>{const _0x5eff8e=_0x333193;if(_0x391701['coin']!=config[_0x5eff8e(0x1f7)]){let _0x3a1875=gTicker[noslash(_0x391701[_0x5eff8e(0x14d)])];_0x53c314=_0x391701[_0x5eff8e(0x131)]?0x1/_0x3a1875:_0x3a1875;}else _0x53c314=0x1;let _0x1863da=_0x391701[_0x5eff8e(0x141)]*_0x53c314;_0x2574b8+=_0x1863da,_0x391701[_0x5eff8e(0x11e)]=formatResult(Number(_0x53c314),0x8),_0x391701[_0x5eff8e(0x181)]=_0x1863da;}),currentCoins['forEach'](_0x2394f5=>{const _0x36df66=_0x333193;let _0x397f99=config['portfolio'][_0x36df66(0x182)](_0x54dd78=>_0x54dd78['coin']==_0x2394f5[_0x36df66(0x20e)]),_0x1d293c=Number(_0x397f99['distribution']),_0x488c17=_0x2394f5[_0x36df66(0x181)]/_0x2574b8*0x64,_0x4a33ad=_0x1d293c*_0x2574b8/0x64/_0x2394f5['last']-_0x2394f5[_0x36df66(0x141)];_0x2394f5[_0x36df66(0x135)]=formatResult(_0x488c17,0x3),_0x2394f5[_0x36df66(0x10a)]=formatResult(_0x1d293c,0x3),_0x2394f5[_0x36df66(0x156)]=formatResult(_0x4a33ad,0x8),_0x2394f5[_0x36df66(0xf0)]='',_0x2394f5[_0x36df66(0x26b)]=![];if(_0x2394f5[_0x36df66(0x20e)]!=config['basecoin']){if(_0x2394f5[_0x36df66(0x135)]>_0x1d293c)_0x2394f5[_0x36df66(0xf0)]=_0x36df66(0x289),_0x2394f5[_0x36df66(0x26b)]=checkMinimums(_0x2394f5);else _0x2394f5[_0x36df66(0x135)]<_0x1d293c&&(_0x2394f5[_0x36df66(0xf0)]=_0x36df66(0xc4),_0x2394f5['valid']=checkMinimums(_0x2394f5));}_0x2394f5[_0x36df66(0x1ff)]=_0x2394f5[_0x36df66(0x135)]/_0x2394f5[_0x36df66(0x10a)]-0x1;if(_0x2394f5['orderstatus']=='filled'||_0x2394f5[_0x36df66(0xf8)]=='canceled')_0x2394f5['orderstatus']='none';}),currentCoins[_0x333193(0x1f5)]((_0x6d3298,_0x6e3d44)=>_0x6d3298[_0x333193(0x1ff)]<_0x6e3d44[_0x333193(0x1ff)]?0x1:_0x6e3d44[_0x333193(0x1ff)]<_0x6d3298[_0x333193(0x1ff)]?-0x1:0x0);const _0x637d07=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x637d07[_0x333193(0x1d8)],'usd':_0x637d07[_0x333193(0x1ee)],'portfolio':JSON[_0x333193(0x21b)](currentCoins),'threshold':_0x2bb24c},proxyEmit(_0x333193(0x22d),{'serverversion':serverversion,'balances':lastBalances});if(_0x4f6ba4){if(config[_0x333193(0x1e8)])headlessMode({'portfolio':currentCoins,'threshold':_0x2bb24c});else lockOrders==ORDERS[_0x333193(0x1b6)]&&!coolingDown&&notifyBalance({'portfolio':currentCoins,'threshold':_0x2bb24c});}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x284846=getNormalizedPerformance();getStartingBalances(_0x284846),emitPerformance(_0x284846);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x50c25b=_0x5c0674;if(!lastBalances)return;let _0x5707d5=[],_0x4d499a,_0x32dde3=JSON[_0x50c25b(0xe8)](lastBalances[_0x50c25b(0x161)]);_0x32dde3[_0x50c25b(0x1f5)]((_0x2a0a98,_0x4c0e7c)=>_0x2a0a98[_0x50c25b(0x20e)]>_0x4c0e7c['coin']?0x1:_0x4c0e7c['coin']>_0x2a0a98[_0x50c25b(0x20e)]?-0x1:0x0),_0x32dde3[_0x50c25b(0x110)](_0x2fba9b=>{const _0x58bb65=_0x50c25b;let _0x2fc169={'coin':_0x2fba9b['coin'],'number':_0x2fba9b[_0x58bb65(0x141)],'price':_0x2fba9b[_0x58bb65(0x11e)]};_0x5707d5[_0x58bb65(0x107)](_0x2fc169);});const _0x346e55=await getFiat();_0x4d499a={'date':lastBalances[_0x50c25b(0x18f)][_0x50c25b(0x1e5)]('\x20')[0x0],'eur':_0x346e55[_0x50c25b(0x1d8)],'usd':_0x346e55[_0x50c25b(0x1ee)],'coins':_0x5707d5};let _0x10425f=dbPerformance[_0x50c25b(0x21d)](_0x50c25b(0x178))[_0x50c25b(0x182)]({'date':_0x4d499a['date']})[_0x50c25b(0x181)]();_0x10425f?_0x4d499a[_0x50c25b(0x286)]!=config[_0x50c25b(0x176)]&&dbPerformance[_0x50c25b(0x21d)]('data')['find']({'date':_0x4d499a[_0x50c25b(0x286)]})[_0x50c25b(0x279)](_0x4d499a)[_0x50c25b(0x1b1)]():dbPerformance[_0x50c25b(0x21d)](_0x50c25b(0x178))[_0x50c25b(0x107)](_0x4d499a)['write'](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x3bc9ad=_0x5c0674;let _0x565366=[];if(dbPerformance[_0x3bc9ad(0x228)]('data')[_0x3bc9ad(0x181)]()){let _0x3cc09e=dbPerformance[_0x3bc9ad(0x21d)](_0x3bc9ad(0x178))[_0x3bc9ad(0x112)]()[_0x3bc9ad(0x1b7)](_0x9911=>{const _0x52d9e5=_0x3bc9ad;if(_0x9911[_0x52d9e5(0x139)][_0x52d9e5(0x1a6)]==0x0)return![];else return!![];})[_0x3bc9ad(0x1ef)]('date')[_0x3bc9ad(0x181)](),_0x4b5bd1=[...config[_0x3bc9ad(0x191)]];_0x4b5bd1[_0x3bc9ad(0x1f5)]((_0x5efed4,_0x5b7765)=>_0x5efed4[_0x3bc9ad(0x286)]>_0x5b7765[_0x3bc9ad(0x286)]?-0x1:_0x5b7765[_0x3bc9ad(0x286)]>_0x5efed4[_0x3bc9ad(0x286)]?0x1:0x0);let _0x472033=0x1,_0xd3d41c=[],_0x342667=0x0;_0x3cc09e[_0x3bc9ad(0x24e)]()['reverse']()[_0x3bc9ad(0x110)]((_0x4a688a,_0x3c201d)=>{const _0x45263e=_0x3bc9ad;if(_0x4b5bd1[_0x342667]){if(_0x3cc09e[_0x3cc09e['length']-_0x3c201d]&&_0x4b5bd1[_0x342667][_0x45263e(0x286)]==_0x3cc09e[_0x3cc09e[_0x45263e(0x1a6)]-_0x3c201d][_0x45263e(0x286)]){if(_0x3c201d<_0x3cc09e[_0x45263e(0x1a6)]){let _0x53dd5b=0x0,_0x2cf3a6=0x0;_0x3cc09e[_0x3cc09e['length']-_0x3c201d][_0x45263e(0x139)]['forEach'](_0x23d81d=>{const _0x1eba39=_0x45263e;_0x2cf3a6+=_0x23d81d[_0x1eba39(0x141)]*_0x23d81d[_0x1eba39(0x14a)];}),_0x4b5bd1[_0x342667][_0x45263e(0x13e)][_0x45263e(0x110)](_0x825d6d=>{const _0xf36c5c=_0x45263e;_0x53dd5b+=_0x825d6d[_0xf36c5c(0x141)]*_0x825d6d[_0xf36c5c(0x14a)];}),_0x472033*=_0x53dd5b/(_0x2cf3a6-_0x53dd5b)+0x1;}_0x342667++;}}let _0x4c1bdc=0x0;_0x4a688a[_0x45263e(0x139)][_0x45263e(0x110)](_0xd41aca=>{const _0x27763a=_0x45263e;_0x4c1bdc+=_0xd41aca[_0x27763a(0x141)]*_0xd41aca[_0x27763a(0x14a)];}),_0xd3d41c[_0x3cc09e[_0x45263e(0x1a6)]-_0x3c201d-0x1]=_0x4c1bdc*(_0x472033-0x1);});let _0x3784d3=[];_0x4b5bd1=[...config['liquidity']]||[];let _0x15aa2f=0x0;_0x342667=0x0,_0x3cc09e[_0x3bc9ad(0x110)]((_0x4cbca0,_0x5c8a0c)=>{const _0x2a19bd=_0x3bc9ad;if(_0x4b5bd1[_0x342667]){const _0x37a3d5=fns[_0x2a19bd(0xe8)](_0x4b5bd1[_0x342667][_0x2a19bd(0x286)],_0x2a19bd(0x23c),new Date()),_0x5a8c09=fns[_0x2a19bd(0xe8)](_0x4cbca0['date'],_0x2a19bd(0x23c),new Date());if(fns[_0x2a19bd(0x24b)](_0x37a3d5,_0x5a8c09)){let _0x3c7070=0x0;_0x4b5bd1[_0x342667]['changes'][_0x2a19bd(0x110)](_0x4aaf51=>{const _0x50ad92=_0x2a19bd;!_0x3784d3[_0x4aaf51['coin']]?_0x3784d3[_0x4aaf51[_0x50ad92(0x20e)]]=_0x4aaf51[_0x50ad92(0x141)]:(_0x3c7070=_0x3784d3[_0x4aaf51[_0x50ad92(0x20e)]],_0x3784d3[_0x4aaf51[_0x50ad92(0x20e)]]+=_0x4aaf51['number']);const _0x11067c=_0x4cbca0['coins'][_0x50ad92(0x182)](_0x17b947=>_0x17b947['coin']==_0x4aaf51[_0x50ad92(0x20e)]);(!_0x11067c||_0x11067c['number']==0x0)&&(_0x15aa2f+=(-_0x4aaf51[_0x50ad92(0x141)]-_0x3c7070)*_0x4aaf51[_0x50ad92(0x14a)]);}),_0x342667++;}}_0x4cbca0[_0x2a19bd(0x139)][_0x2a19bd(0x110)]((_0x36fd1a,_0x47917a)=>{const _0x5d1a0f=_0x2a19bd;_0x3784d3[_0x36fd1a[_0x5d1a0f(0x20e)]]&&(_0x36fd1a[_0x5d1a0f(0xd9)]=_0x3784d3[_0x36fd1a['coin']]);}),_0x565366[_0x2a19bd(0x107)]({'date':_0x4cbca0[_0x2a19bd(0x286)],'eur':_0x4cbca0[_0x2a19bd(0x1d8)],'usd':_0x4cbca0[_0x2a19bd(0x1ee)],'offset':_0xd3d41c[_0x5c8a0c],'netoffset':_0x15aa2f,'coins':_0x4cbca0[_0x2a19bd(0x139)]});});}return _0x565366;}function emitPerformance(_0x3b507a){const _0x43d2ae=_0x5c0674;_0x3b507a[_0x43d2ae(0x1a6)]!==0x0?(proxyEmit('performance',_0x3b507a),lastPerformanceEmitted=getDate()):proxyEmit(_0x43d2ae(0x13b),[]);}function getPerf(_0x2d431e,_0x4ae852){const _0x2c49ac=_0x5c0674;let _0x28bcfe=0x0,_0x58397b=0x0,_0xb1afc=0x0;_0x2d431e[_0x2c49ac(0x139)]['forEach'](_0x192638=>{const _0x4b96a2=_0x2c49ac;_0x28bcfe+=_0x192638[_0x4b96a2(0x141)]*_0x192638['price'];});_0x4ae852&&(_0x28bcfe+=_0x2d431e[_0x2c49ac(0x229)]);if(config[_0x2c49ac(0x1f7)]===_0x2c49ac(0x1c5)||config['basecoin']===_0x2c49ac(0x15d)||config[_0x2c49ac(0x1f7)]==='PAXG')_0x58397b=_0x28bcfe*_0x2d431e[_0x2c49ac(0x1d8)],_0xb1afc=_0x28bcfe*_0x2d431e[_0x2c49ac(0x1ee)];else{if(usdBasecoins[_0x2c49ac(0x1fd)](config[_0x2c49ac(0x1f7)]))_0x58397b=_0x28bcfe*_0x2d431e[_0x2c49ac(0x1d8)]/_0x2d431e[_0x2c49ac(0x1ee)],_0xb1afc=_0x28bcfe;else config['basecoin']===_0x2c49ac(0x23a)&&(_0x58397b=_0x28bcfe,_0xb1afc=_0x28bcfe*_0x2d431e[_0x2c49ac(0x1ee)]/_0x2d431e[_0x2c49ac(0x1d8)]);}return[_0x28bcfe,_0x58397b,_0xb1afc];}function getKPIs(_0x47ab97,_0x1f2cc5=_0x5c0674(0x23a)){const _0x114600=_0x5c0674,_0x403424=config['basecoin'],_0xd57e0b=lastBalances,_0x59e4c1=currentCoins,_0x3810ca=getNormalizedPerformance(),_0x16b25b=_0x47ab97===_0x114600(0x1f7)?_0x403424:_0x47ab97===_0x114600(0x14b)||_0x47ab97===_0x114600(0xe7)?_0x1f2cc5:_0x114600(0x22c)+_0x403424,_0x5622c1=_0x47ab97===_0x114600(0x17c)?'Net\x20effect':_0x47ab97==='net-fiat'?_0x114600(0x27c):_0x16b25b+_0x114600(0x122),_0x171178=_0x47ab97==='net-basecoin'||_0x47ab97===_0x114600(0xe7)?'Net\x20effect':_0x16b25b+_0x114600(0x205);let _0x2561d9=0x0;_0x59e4c1[_0x114600(0x110)](_0x247eb3=>{const _0x9853ab=_0x114600;_0x2561d9+=_0x247eb3[_0x9853ab(0x141)]*_0x247eb3[_0x9853ab(0x11e)];});if(_0x47ab97==='fiat'||_0x47ab97==='net-fiat'){if(_0x403424===_0x114600(0x1c5)||_0x403424===_0x114600(0x15d)||_0x403424==='PAXG')_0x2561d9=_0x2561d9*(_0x1f2cc5==='EUR'?_0xd57e0b[_0x114600(0x1d8)]:_0xd57e0b[_0x114600(0x1ee)]);else{if(usdBasecoins[_0x114600(0x1fd)](_0x403424))_0x2561d9=_0x2561d9*(_0x1f2cc5==='EUR'?_0xd57e0b[_0x114600(0x1d8)]/_0xd57e0b[_0x114600(0x1ee)]:0x1);else _0x403424===_0x114600(0x23a)&&(_0x2561d9=_0x2561d9*(_0x1f2cc5===_0x114600(0x23a)?0x1:_0xd57e0b['usd']/_0xd57e0b['eur']));}}let _0x21fdc6;if(_0x2561d9!==0x0){if(_0x47ab97===_0x114600(0x1f7))_0x21fdc6=(_0x2561d9/startingBalances[_0x114600(0x1f7)]-0x1)*0x64;else{if(_0x1f2cc5===_0x114600(0x23a))_0x21fdc6=(_0x2561d9/startingBalances[_0x114600(0x1d8)]-0x1)*0x64;else _0x21fdc6=(_0x2561d9/startingBalances[_0x114600(0x1ee)]-0x1)*0x64;}let _0x2020bb=0x0;if(startingBalances['coins'])_0x59e4c1[_0x114600(0x110)](_0x24c234=>{const _0x1ab9e2=_0x114600;let _0x2f2947=startingBalances['coins'][_0x1ab9e2(0x182)](_0x2b071f=>_0x2b071f[_0x1ab9e2(0x20e)]===_0x24c234[_0x1ab9e2(0x20e)]);if(_0x2f2947&&_0x2f2947[_0x1ab9e2(0x20e)]&&_0x24c234[_0x1ab9e2(0x141)]!==0x0)_0x2020bb+=_0x2f2947['number']*_0x24c234[_0x1ab9e2(0x11e)];});let _0x8fd607=0x0;if(_0x3810ca['length']!==0x0){let _0x194631=_0x3810ca[_0x3810ca['length']-0x1];_0x8fd607=_0x194631['netoffset'];}_0x2020bb-=_0x8fd607;_0x47ab97==='net-basecoin'&&(_0x21fdc6=(_0x2561d9-_0x2020bb)/startingBalances[_0x114600(0x1f7)]*0x64,_0x2561d9=_0x2561d9-_0x2020bb);if(_0x47ab97===_0x114600(0xe7)){let _0x213933=_0x1f2cc5===_0x114600(0x23a)?startingBalances[_0x114600(0x1d8)]:startingBalances[_0x114600(0x1ee)];if(_0x403424===_0x114600(0x1c5)||_0x403424===_0x114600(0x15d)||_0x403424===_0x114600(0x1d9))_0x2020bb=_0x1f2cc5===_0x114600(0x23a)?_0x2020bb*_0xd57e0b[_0x114600(0x1d8)]:_0x2020bb*_0xd57e0b[_0x114600(0x1ee)];else{if(usdBasecoins[_0x114600(0x1fd)](_0x403424))_0x2020bb=_0x1f2cc5===_0x114600(0x23a)?_0x2020bb*_0xd57e0b['eur']/_0xd57e0b[_0x114600(0x1ee)]:_0x2020bb;else _0x403424===_0x114600(0x23a)&&(_0x2020bb=_0x1f2cc5===_0x114600(0x23a)?_0x2020bb:_0x2020bb*_0xd57e0b[_0x114600(0x1ee)]/_0xd57e0b[_0x114600(0x1d8)]);}_0x21fdc6=(_0x2561d9-_0x2020bb)/_0x213933*0x64,_0x2561d9=_0x2561d9-_0x2020bb;}if(_0x21fdc6){if(_0x21fdc6<0x64)_0x21fdc6=_0x21fdc6['toFixed'](0x2);else{if(_0x21fdc6<0x3e8)_0x21fdc6=_0x21fdc6[_0x114600(0x1f8)](0x1);else _0x21fdc6=_0x21fdc6[_0x114600(0x1f8)](0x0);}}else _0x21fdc6=Number('0')[_0x114600(0x1f8)](0x2);if(_0x2561d9){if(Math[_0x114600(0x17d)](_0x2561d9)<0.000001)_0x2561d9=_0x2561d9[_0x114600(0x1f8)](0x2);else{if(Math[_0x114600(0x17d)](_0x2561d9)<0.1)_0x2561d9=_0x2561d9[_0x114600(0x1f8)](0x6);else{if(Math[_0x114600(0x17d)](_0x2561d9)<0x1)_0x2561d9=_0x2561d9[_0x114600(0x1f8)](0x5);else{if(Math['abs'](_0x2561d9)<0xa)_0x2561d9=_0x2561d9[_0x114600(0x1f8)](0x4);else{if(Math[_0x114600(0x17d)](_0x2561d9)<0x64)_0x2561d9=_0x2561d9[_0x114600(0x1f8)](0x3);else{if(Math['abs'](_0x2561d9)<0x3e8)_0x2561d9=_0x2561d9[_0x114600(0x1f8)](0x2);else _0x2561d9=_0x2561d9['toFixed'](0x2);}}}}}}else _0x2561d9=Number('0')[_0x114600(0x1f8)](0x2);}else _0x21fdc6=Number('0')['toFixed'](0x2);return{'value':_0x2561d9,'change':_0x21fdc6,'leftTxt':_0x5622c1,'rightTxt':_0x171178};}async function getStartingBalances(_0xa782a0,_0x46a481=!![]){const _0x3a480b=_0x5c0674;if(_0xa782a0[_0x3a480b(0x1a6)]!==0x0){const [_0x2dc63a,_0x364b71,_0x1ce5c9]=getPerf(_0xa782a0[0x0],!![]);let _0x4651ed=[];config[_0x3a480b(0x161)][_0x3a480b(0x110)](_0x53cba4=>{const _0x3fa836=_0x3a480b;let _0x33ab65=0x0,_0x20f0a8;config[_0x3fa836(0x191)][_0x3fa836(0x110)](_0x4c92d1=>{const _0x456303=_0x3fa836;let _0xaac236=_0x4c92d1['changes'][_0x456303(0x182)](_0x1e8908=>_0x1e8908['coin']==_0x53cba4[_0x456303(0x20e)]);if(_0xaac236){_0x33ab65+=_0xaac236[_0x456303(0x141)];if(!_0x20f0a8)_0x20f0a8=_0xaac236[_0x456303(0x14a)];}}),_0x4651ed[_0x3fa836(0x107)]({'coin':_0x53cba4[_0x3fa836(0x20e)],'number':_0x33ab65,'initialprice':_0x20f0a8});});const _0x3644e6={'basecoin':_0x2dc63a,'eur':_0x364b71,'usd':_0x1ce5c9,'coins':_0x4651ed};if(_0x46a481)proxyEmit(_0x3a480b(0x11c),_0x3644e6);startingBalances=_0x3644e6;}}function _0x5f46(){const _0x1ecfdb=['Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute','success','recent20','/USDT','basecoinvalue','price','fiat','uncaughtException','symbol','210FLzlSs','No\x20more\x20open\x20orders\x20-\x20','Unfilled\x20order(s)\x20canceled\x20after\x20','getMonth','fetchTickers()','switch-manual','LOCKED','\x20rejected\x20your\x20API\x20request\x20(see:\x20hodlerhacks.com/fix/4)','trade','/USD','remainingSymbols','quote','leftTxt','showConfig','amount','ETH','getOpenOrders()','configuration','Cex','portfolio','min','search','Error\x20occurred:\x20','\x20closed\x20the\x20connection\x20(see:\x20hodlerhacks.com/fix/5)','storeConfiguration','InsufficientFunds','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','type','progress',':\x20Bot\x20','cancel','bot-','currency','watchTradesForSymbols','realized','Error\x20details:','highest','2\x20-\x20handling\x20FILLED\x20order:\x20','Portfolio\x20change\x20detected:\x20','\x20API\x20key,\x20secret\x20or\x20password\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','startdate','bid','data','remove','getPortfolio','Limit\x20(high-margin)','net-basecoin','abs','toUpperCase','complete','message','value','find','Order\x20amount\x20is\x20invalid:\x20','\x20|\x20','Exchange\x20error\x20details:','restart','autoliquidity','Initializing\x20exchange:\x20already\x20done','privateKey','storeHeadless','Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)','Trigger:\x20','active','loadMarkets','time','Initializing\x20exchange','liquidity','pki','.json','InvalidOrder','ask','bots','MIN_NOTIONAL','ongoing','24783814xYjCYF','fetchTicker','fetchOpenOrders','./config/','\x20blocked\x20API\x20(RateLimitExceeded)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','add','fee','\x20>\x20','getDate','pid','closed','pro','BUSD','length','Order(s)\x20not\x20validated\x20after\x20','getSeconds','token\x20is\x20expired','\x20API\x20secret\x20is\x20invalid','recreateCoinResults()','2\x20-\x20Validate\x20orders:\x20','Cooldown\x20ended\x20-\x20balancing\x20resumed','apiPassword','\x20API\x20key\x20is\x20invalid','string','write','ordertype','\x20not\x20responding\x20(see:\x20hodlerhacks.com/fix/5)','watchOrders','getTime','UNLOCKED','filter','2.3.5','canceled','event-history','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)','average','***','\x20>\x20pausing\x20bot\x20for\x20','-performance.json','Insufficient\x20funds\x20to\x20execute\x20order:\x20','watchTradesForSymbols()','\x20order:\x20','\x20-\x20bot\x20switched\x20to\x20manual\x20mode','marketcapApi','BTC','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','\x20-\x20bot\x20not\x20started','exchanges','USD','USDC','Error\x20while\x20deleting\x20files:\x20','percentage','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','storeFiat','marketcapsqrt','timeshift','replace','splice','\x20:\x20','marketcap','version','%\x20(','sqrt','eur','PAXG','exchange\x20reload','Executed\x20','Failed\x20to\x20load\x20market\x20data\x20-\x20bot\x20not\x20started','RateLimitExceeded','ExchangeError','\x20exchange','/EUR','market','red_yellow_blue','bb-settings.json','yargs/yargs','split','customId','enableFiatToggle','headless','added','substring','Test\x20API','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','enabled','usd','sortBy','round','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20trying\x20again\x20in\x20','bb-secure.json','\x20>\x20details:','constructor','sort','cancelOrder','basecoin','toFixed','4914710JXieZj','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','\x20minutes\x20-\x20','\x20>\x20stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','includes','Exchange','delta','ExchangeNotAvailable','\x20minutes','bot','001','BNB/','\x20change','Exchange\x20permission\x20denied\x20-\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','secure','indexOf','decode64','6261196BxUJuc','RETRY\x20-\x20Error\x20in\x20','Error\x20details:\x20','exec','coin','function','timeout','join','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','toString','Invalid\x20balance\x20for\x20','0\x20-\x20EXECUTION:\x20','exchange','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','RETRY\x20-\x20Problem\x20resolved\x20after\x20','recovery','unlinkSync','stringify','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','get','buys','placeOrder','BNB','PermissionDenied','Block\x20transaction\x20detection:\x20','Symbol(s):\x20','request-time','./logs/','final','balancing\x20resumed','has','offset','total','cost','Net\x20','balances','apiKey','no\x20open\x20orders','\x20orders\x20in\x20less\x20than\x20','colorscheme','watchOrders()','entries','Exception\x20thrown\x20in\x20','Invalid\x20symbol:\x20','starting-balance-','Invalid\x20quantity','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','\x20hour','EUR','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','yyyy/MM/dd','startsWith','padStart','getHours','2.6.0','environment',':\x20timer\x20>',')\x20known\x20order:\x20','order','sha256','\x20/\x20','Fee\x20discount\x20refund\x20detected:\x20','1\x20-\x20partially\x20FILLED\x20(','watchTrades()','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','isEqual','kill','update-liquidity','slice','breakeven','Resetting\x20coin\x20results:\x20','format','open','Error\x20in\x20testAPI():\x20','code','OnMaintenance','TUSD','log','datetime','running','Unknown\x20error:\x20','Bybit','shift','util','limit-high','ccxt','createOrder','no\x20exchange\x20reloaded','cancelLoading','timestamp','initTickers()','none',')\x20unknown\x20order:\x20','limits','create','************','axios','valid','apiSecret','getStartingBalances','amountToPrecision','process\x20','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','change24h','portfolio2','set','filled','Limit\x20(low-margin)','debug','46470eySoHK','Headless:\x20','assign','loadSymbols()','1\x20-\x20FILLED\x20known\x20order:\x20','Net\x20effect','Saving\x20configuration','\x20-\x20bot\x20already\x20running\x20in\x20manual\x20mode','Order\x20filled:\x20','lowdb','Initiating\x20bot\x20restart','event','pop','toggleBotMode','\x20not\x20available\x20(see:\x20hodlerhacks.com/fix/5)','date','fetchTickers','date-fns','sell','Network\x20error\x20details:','excluded','fetchBalance','Huobipro','250hYvBBs','limit','buy','openOrders','\x20uses\x20','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','Waited\x20','Manual\x20balancing\x20required','Set\x20lock\x20orders\x20to:\x20','AuthenticationError','\x20metrics:</b>\x20\x0a\x0a','7630MpFRQH','marketcapEnabled','emojibuy','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','-events.json','getFullYear','\x20>\x20[DEBUG]\x20','</pre>','existsSync','Reset\x20|\x20','showname','initial','Error\x20in\x20loadSymbols():\x20','Portfolio\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','-------------------------------\x0a','argv','warning','args','initclient','\x20blocked\x20API\x20(DDoSProtection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','3GsAeSO','-results.json','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','portfolio1','path','net-fiat','parse','DDoSProtection','resetHistory','getMinutes','Invalid\x20API\x20details,\x20please\x20try\x20again\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','\x20portfolio:</b>\x20\x0a\x0a','./version.json','botname','side','threshold','map','recreate','slider','defaults','startprice','prevnumber','orderstatus','<b>Bot\x20','onepagemode','Loading\x20completed','removed','status','-config.json','lowdb/adapters/FileSync','\x20(see:\x20hodlerhacks.com/fix/1)','keys','\x20attempts','USDT','API-key\x20format\x20invalid',',\x20must\x20be\x20a\x203\x20digit\x20number','emojisell','push','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','\x20-\x20','target','sells','/output-000.log','(((.+)+)+)+$','market_cap','toLowerCase','forEach','fees','cloneDeep','Cryptocom','balancing\x20resumes\x20when\x20cooldown\x20ends','send','\x20|\x20exchange:\x20','Pausing\x20for\x20','UNLOCKING',')\x20|\x20exchange:\x20','OrderNotFound','random','starting-balances','memoryUsage','last','coin-loading-progress','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','testApi','\x20value','full','fetchBalance()','padEnd','Resuming\x20(','quick','27fhcrVq','cooldown','settings','freeze','detectLiquidityChange()','logs','Unknown\x20error\x20-\x20check\x20logs','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','change','reverse','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','orderId','distribution','findIndex','5386190aZnZgb','placeOrder()','coins','startnumber','performance','Huobi','error','changes','spot','max','number','2113144giMWFB','rightTxt','USDP'];_0x5f46=function(){return _0x1ecfdb;};return _0x5f46();}function headlessMode(_0x2aa830){const _0x2ae2e5=_0x5c0674;let _0x4621e6=_0x2aa830[_0x2ae2e5(0x161)],_0x5eb3ff=_0x2aa830['threshold'],_0x31e2ec=[];for(let _0x49b82a of _0x4621e6){if(_0x49b82a[_0x2ae2e5(0x20e)]!=config[_0x2ae2e5(0x1f7)]){if(_0x49b82a[_0x2ae2e5(0x1ff)]>=_0x5eb3ff/0x64){if(_0x49b82a[_0x2ae2e5(0x26b)])_0x31e2ec['push'](_0x49b82a);}else{if(_0x49b82a[_0x2ae2e5(0x1ff)]<=-_0x5eb3ff/0x64){if(_0x49b82a['valid'])_0x31e2ec[_0x2ae2e5(0x107)](_0x49b82a);}}}}_0x31e2ec[_0x2ae2e5(0x1a6)]>0x0&&placeOrder(_0x31e2ec);}function notifyBalance(_0x4acbdc){const _0x5346cb=_0x5c0674;let _0x59c9bb=_0x4acbdc[_0x5346cb(0x161)],_0x4943b8=_0x4acbdc[_0x5346cb(0xf1)],_0x689e78=[];for(let _0xfd8716 of _0x59c9bb){if(_0xfd8716[_0x5346cb(0x20e)]!=config['basecoin']){if(_0xfd8716['delta']>=_0x4943b8/0x64){if(_0xfd8716[_0x5346cb(0x26b)])_0x689e78[_0x5346cb(0x107)](_0xfd8716);}else{if(_0xfd8716[_0x5346cb(0x1ff)]<=-_0x4943b8/0x64){if(_0xfd8716[_0x5346cb(0x26b)])_0x689e78['push'](_0xfd8716);}}}}if(_0x689e78['length']>0x0){let _0x4baa33=_0x689e78[_0x5346cb(0xf2)](_0x386bff=>_0x386bff['coin']);_0x4baa33[_0x5346cb(0x1f5)]();let _0x5697c3=_0x4baa33[_0x5346cb(0x211)](',\x20');if(!lastCoinsToBalance)logHistory(_0x5346cb(0xde),_0x5346cb(0xca));lastCoinsToBalance=_0x5697c3;}}function symbolToCoin(_0x410eed){const _0x540b2f=_0x5c0674;let _0x4a33b8;if(_0x410eed['includes']('/'+config[_0x540b2f(0x1f7)]))_0x4a33b8=_0x410eed[_0x540b2f(0x1d1)]('/'+config[_0x540b2f(0x1f7)],'');if(_0x410eed[_0x540b2f(0x1fd)](config[_0x540b2f(0x1f7)]+'/'))_0x4a33b8=_0x410eed[_0x540b2f(0x1d1)](config[_0x540b2f(0x1f7)]+'/','');return _0x4a33b8;}function setLockOrders(_0x40dc5a){const _0x4b575b=_0x5c0674;lockOrders=_0x40dc5a,logger[_0x4b575b(0x276)](_0x4b575b(0xcb)+Object[_0x4b575b(0x101)](ORDERS)[lockOrders]);}async function unlockOrders(_0x36f58f=![]){const _0x5ecf3a=_0x5c0674;if(allOrdersPlaced&&lockOrders==ORDERS['LOCKED']){setLockOrders(ORDERS[_0x5ecf3a(0x118)]);if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);if(_0x36f58f){const _0x212801=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x212801,setBlockTransactionDetection(![]);}validateOrdersState=_0x5ecf3a(0xd9),persistOpenOrders([]),setLockOrders(ORDERS[_0x5ecf3a(0x1b6)]);}}async function validateOrders(_0x2db447){const _0x1cf3a8=_0x5c0674;if(_0x2db447)validateOrdersState=_0x2db447;logger[_0x1cf3a8(0x276)]('1\x20-\x20Validate\x20orders:\x20'+validateOrdersState+'\x20|\x20lock\x20orders:\x20'+Object[_0x1cf3a8(0x101)](ORDERS)[lockOrders]);let _0x5d8e7c=[],_0x5e6aa1=config[_0x1cf3a8(0x1b2)]=='market'?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x1cf3a8(0x210)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x1cf3a8(0x154)])return;logger['debug'](_0x1cf3a8(0x1ac)+validateOrdersState);for(let _0x3ebb54=lastOrders['length']-0x1;_0x3ebb54>=0x0;_0x3ebb54--){let _0xe956f=lastOrders[_0x3ebb54],_0x16e5bc=![];_0xe956f[_0x1cf3a8(0x274)]>0x0&&(_0x16e5bc=!![]),_0x5d8e7c[_0x1cf3a8(0x107)](_0x16e5bc),_0x16e5bc&&config['ordertype']!=_0x1cf3a8(0x1e1)&&logHistory(_0x1cf3a8(0x244),_0x1cf3a8(0x27f)+_0xe956f[_0x1cf3a8(0x14d)]+'\x20'+_0xe956f[_0x1cf3a8(0xf0)]+'\x20#'+formatResult(_0xe956f[_0x1cf3a8(0x274)],0x8)+'\x20@'+formatResult(_0xe956f[_0x1cf3a8(0x14a)],0x8)),_0x16e5bc&&lastOrders[_0x1cf3a8(0x1d2)](_0x3ebb54,0x1);}persistOpenOrders(lastOrders);const _0x6ea7e8=coolingDown?_0x1cf3a8(0x114):_0x1cf3a8(0x227);if(validateOrdersState==_0x1cf3a8(0xd9)){validateOrdersState=_0x1cf3a8(0x198);if(_0x5d8e7c[_0x1cf3a8(0x1fd)](![])){}else await unlockOrders();}else{if(validateOrdersState==_0x1cf3a8(0x198)){if(_0x5d8e7c[_0x1cf3a8(0x1fd)](![])){}else await unlockOrders();}else{if(validateOrdersState==_0x1cf3a8(0x226))_0x5d8e7c[_0x1cf3a8(0x1fd)](![])&&(config[_0x1cf3a8(0x1b2)]=='market'?logHistory('success',_0x1cf3a8(0x1a7)+Math[_0x1cf3a8(0x1f0)](_0x5e6aa1*validateOrderInterval/0xea60)+_0x1cf3a8(0x1fb)+_0x6ea7e8):(await cancelOrders(),logHistory('success',_0x1cf3a8(0x150)+Math['round'](_0x5e6aa1*validateOrderInterval/0xea60)+_0x1cf3a8(0x1fb)+_0x6ea7e8))),await unlockOrders(!![]);else{if(validateOrdersState=='no\x20open\x20orders'){if(config[_0x1cf3a8(0x1b2)]!='market')logHistory('success',_0x1cf3a8(0x14f)+_0x6ea7e8);await unlockOrders(!![]);}}}}}async function cancelOrders(){const _0x5407bc=_0x5c0674;lastOrders[_0x5407bc(0x110)](async _0x143931=>{const _0x3a1327=_0x5407bc;try{const _0x29e20f=await exchange[_0x3a1327(0x1f6)](_0x143931[_0x3a1327(0x134)],_0x143931[_0x3a1327(0x14d)]);}catch(_0x593414){if(_0x593414[_0x3a1327(0x213)]()[_0x3a1327(0x1fd)](_0x3a1327(0x11a))){}else await handleError(_0x593414,'cancelOrders()');}});}async function initCoinResults(_0x5ea009){const _0x252706=_0x5c0674;_0x5ea009?logger['debug'](_0x252706(0x250)+_0x5ea009):logger['debug']('Initializing\x20coin\x20results'),config[_0x252706(0x161)]['forEach'](_0x1c8de5=>{const _0x5a7f56=_0x252706;if(!_0x1c8de5[_0x5a7f56(0x28b)]&&_0x1c8de5['coin']!=config[_0x5a7f56(0x1f7)]){const _0x485da0=currentCoins['find'](_0x488175=>_0x488175[_0x5a7f56(0x20e)]==_0x1c8de5[_0x5a7f56(0x20e)]),_0x5ddc58=gTicker[noslash(_0x1c8de5[_0x5a7f56(0x14d)])];let _0xf21303=_0x485da0?_0x485da0[_0x5a7f56(0x141)]:null,_0x16d68b=_0x1c8de5['reverse']?0x1/_0x5ddc58:_0x5ddc58,_0x14bb8d;config['liquidity'][_0x5a7f56(0x110)](_0x4c580=>{const _0x357c7a=_0x5a7f56;!_0x14bb8d&&(_0x14bb8d=_0x4c580[_0x357c7a(0x13e)][_0x357c7a(0x182)](_0x3c1c90=>_0x3c1c90['coin']==_0x1c8de5[_0x357c7a(0x20e)]),_0x14bb8d&&(_0xf21303=_0x14bb8d[_0x357c7a(0x141)],_0x16d68b=_0x14bb8d['price']));});let _0x2fd73d=dbCoinResults['get'](_0x5a7f56(0x139))['find']({'coin':_0x1c8de5[_0x5a7f56(0x20e)]})['value']();if(!_0x2fd73d){const _0x25d767={'coin':_0x1c8de5['coin'],'number':_0xf21303,'breakeven':_0x16d68b,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x5a7f56(0x21d)](_0x5a7f56(0x139))['push'](_0x25d767)[_0x5a7f56(0x1b1)]();}else{if(_0x5ea009&&_0x1c8de5[_0x5a7f56(0x20e)]==_0x5ea009){const _0x39d155={'coin':_0x1c8de5['coin'],'number':_0xf21303,'breakeven':_0x16d68b,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get']('coins')[_0x5a7f56(0x182)]({'coin':_0x1c8de5[_0x5a7f56(0x20e)]})[_0x5a7f56(0x279)](_0x39d155)[_0x5a7f56(0x1b1)]();}}}});}async function updateCoinResults(_0x33e17d,_0x5855f9=![]){const _0x3435c9=_0x5c0674;let _0x78a3ed,_0x30c70d,_0x39f6d1,_0x12eb5d,_0x5c5af1,_0x4b00a9,_0x5df609=dbCoinResults[_0x3435c9(0x21d)]('coins')[_0x3435c9(0x182)]({'coin':_0x33e17d[_0x3435c9(0x20e)]})['value'](),_0xbf97dc=![];_0x5df609&&Object[_0x3435c9(0x233)](_0x5df609)['forEach'](([_0xd5707f,_0x358805])=>{if(_0x358805==null)_0xbf97dc=!![];});(!_0x5df609||_0xbf97dc)&&(await initCoinResults(_0x33e17d[_0x3435c9(0x20e)]),_0x5df609=dbCoinResults[_0x3435c9(0x21d)](_0x3435c9(0x139))['find']({'coin':_0x33e17d[_0x3435c9(0x20e)]})[_0x3435c9(0x181)]());_0x33e17d['reverse']&&(_0x4b00a9={'filled':_0x33e17d[_0x3435c9(0x274)]*_0x33e17d['price'],'amount':_0x33e17d[_0x3435c9(0x274)]*_0x33e17d[_0x3435c9(0x14a)],'side':_0x33e17d[_0x3435c9(0xf0)]==_0x3435c9(0x289)?'buy':_0x3435c9(0x289),'price':0x1/_0x33e17d['price']},_0x33e17d={..._0x33e17d,..._0x4b00a9});_0x5855f9?_0x30c70d=_0x33e17d[_0x3435c9(0xf0)]=='buy'?_0x5df609[_0x3435c9(0x141)]+_0x33e17d[_0x3435c9(0x274)]:_0x5df609[_0x3435c9(0x141)]-_0x33e17d[_0x3435c9(0x274)]:_0x30c70d=await getCoinNumber(_0x33e17d[_0x3435c9(0x20e)]);if(_0x33e17d[_0x3435c9(0x19f)]&&_0x33e17d['fee'][_0x3435c9(0x16e)]==config['basecoin'])_0x78a3ed=Number(_0x33e17d['fee']['cost']);else{if(_0x33e17d['fee']&&_0x33e17d[_0x3435c9(0x19f)][_0x3435c9(0x16e)]==_0x3435c9(0x220)&&!_0x5855f9&&config[_0x3435c9(0x1f7)]!=_0x3435c9(0x1d9))_0x78a3ed=Number(_0x33e17d[_0x3435c9(0x19f)][_0x3435c9(0x22b)])*gTicker[_0x3435c9(0x220)+config[_0x3435c9(0x1f7)]];else _0x78a3ed=defaultFee*_0x33e17d[_0x3435c9(0x274)]*_0x33e17d[_0x3435c9(0x14a)];}_0x33e17d[_0x3435c9(0xf0)]==_0x3435c9(0xc4)?(_0x39f6d1=_0x30c70d!=0x0?(_0x5df609[_0x3435c9(0x24f)]*_0x5df609[_0x3435c9(0x141)]+_0x33e17d['price']*(_0x30c70d-_0x5df609[_0x3435c9(0x141)])+_0x78a3ed)/_0x30c70d:0x0,_0x12eb5d=_0x5df609[_0x3435c9(0x170)]):(_0x39f6d1=_0x30c70d!=0x0?(_0x5df609[_0x3435c9(0x24f)]*_0x5df609['number']-_0x33e17d['price']*(_0x5df609['number']-_0x30c70d)+_0x78a3ed)/_0x30c70d:0x0,_0x12eb5d=_0x5df609[_0x3435c9(0x170)]+(_0x33e17d[_0x3435c9(0x14a)]-_0x5df609[_0x3435c9(0x24f)])*_0x33e17d['filled']);_0x5c5af1=(_0x33e17d[_0x3435c9(0x14a)]-_0x39f6d1-_0x78a3ed/_0x33e17d[_0x3435c9(0x274)])*_0x30c70d;let _0x10f8a0={'coin':_0x33e17d[_0x3435c9(0x20e)],'number':_0x30c70d,'breakeven':formatResult(_0x39f6d1,0x8),'realized':formatResult(_0x12eb5d,0x8),'unrealized':formatResult(_0x5c5af1,0x8),'fees':formatResult(_0x5df609[_0x3435c9(0x111)]+_0x78a3ed,0x8),'sells':_0x33e17d[_0x3435c9(0xf0)]==_0x3435c9(0x289)?_0x5df609[_0x3435c9(0x10b)]+0x1:_0x5df609[_0x3435c9(0x10b)],'buys':_0x33e17d[_0x3435c9(0xf0)]=='buy'?_0x5df609['buys']+0x1:_0x5df609[_0x3435c9(0x21e)]};dbCoinResults['get'](_0x3435c9(0x139))[_0x3435c9(0x182)]({'coin':_0x33e17d['coin']})['assign'](_0x10f8a0)[_0x3435c9(0x1b1)]();if(!_0x5855f9){if(_0x33e17d[_0x3435c9(0x19f)]&&_0x33e17d[_0x3435c9(0x19f)][_0x3435c9(0x16e)]==_0x3435c9(0x220)){const _0x46e7b8=currentCoins['find'](_0x15d84e=>_0x15d84e[_0x3435c9(0x20e)]==_0x3435c9(0x220));if(_0x46e7b8){let _0x246646=dbCoinResults['get'](_0x3435c9(0x139))[_0x3435c9(0x182)]({'coin':_0x3435c9(0x220)})[_0x3435c9(0x181)]();_0x10f8a0={..._0x246646,'number':_0x46e7b8[_0x3435c9(0x141)]},dbCoinResults[_0x3435c9(0x21d)]('coins')[_0x3435c9(0x182)]({'coin':_0x3435c9(0x220)})['assign'](_0x10f8a0)[_0x3435c9(0x1b1)]();}}}}async function placeOrder(_0x5d6be3){const _0x83cf38=_0x5c0674,_0x260eff=config[_0x83cf38(0x1b2)]==_0x83cf38(0x1e1)?_0x83cf38(0x1e1):_0x83cf38(0xc3);if(lockOrders==ORDERS[_0x83cf38(0x1b6)]&&!coolingDown){setLockOrders(ORDERS[_0x83cf38(0x154)]);while(transactionDetectionOngoing){await sleep(0x64);}logger['debug']('Placing\x20order\x20for:\x20'+_0x5d6be3[_0x83cf38(0xf2)](_0x4064db=>_0x4064db[_0x83cf38(0x20e)])['join'](',\x20')),lastCoinsToBalance='',allOrdersPlaced=![],validateOrdersState=_0x83cf38(0xd9);let _0x47a645=![];lastOrders=[];const _0x297eae=config[_0x83cf38(0xf1)];for(const _0x1de7ab of _0x5d6be3){let _0x426aa8,_0x4246e3,_0x1d8dc9,_0x3f8210,_0x491b7c,_0x3115b9=_0x1de7ab[_0x83cf38(0x14d)];logger[_0x83cf38(0x276)](_0x83cf38(0x18c)+_0x1de7ab[_0x83cf38(0x20e)]+'\x20'+_0x1de7ab[_0x83cf38(0x141)]+'\x20'+_0x1de7ab[_0x83cf38(0x11e)]+'\x20'+_0x1de7ab[_0x83cf38(0x135)]+'%\x20'+_0x1de7ab['target']+'%\x20'+(0x64*_0x1de7ab[_0x83cf38(0x1ff)])[_0x83cf38(0x1f8)](0x2)+_0x83cf38(0x1d6)+_0x297eae[_0x83cf38(0x1f8)](0x2)+'%)');const _0xb7f472=currentCoins['find'](_0x4d4907=>_0x4d4907[_0x83cf38(0x20e)]==_0x1de7ab[_0x83cf38(0x20e)]);_0xb7f472&&(_0xb7f472[_0x83cf38(0xf7)]=_0x1de7ab[_0x83cf38(0x141)]);try{const _0x1036ec=await exchange[_0x83cf38(0x19a)](_0x3115b9);_0x426aa8=_0x1de7ab[_0x83cf38(0x131)]?0x1/_0x1de7ab[_0x83cf38(0x11e)]:_0x1de7ab[_0x83cf38(0x11e)],_0x4246e3=_0x1036ec[_0x83cf38(0x177)],_0x1d8dc9=_0x1036ec[_0x83cf38(0x195)];_0x1de7ab['reverse']?(_0x3f8210=_0x1de7ab[_0x83cf38(0xf0)]==_0x83cf38(0xc4)?'sell':_0x83cf38(0xc4),_0x491b7c=Math['abs'](_0x1de7ab[_0x83cf38(0x156)])/_0x426aa8):(_0x3f8210=_0x1de7ab[_0x83cf38(0xf0)],_0x491b7c=Math['abs'](_0x1de7ab['trade']));_0x260eff==_0x83cf38(0xc3)&&(config[_0x83cf38(0x1b2)]==_0x83cf38(0x25e)&&(_0x426aa8=_0x3f8210==_0x83cf38(0xc4)?_0x4246e3:_0x1d8dc9),config[_0x83cf38(0x1b2)]=='limit-low'&&(_0x426aa8=_0x3f8210==_0x83cf38(0xc4)?_0x1d8dc9:_0x4246e3));_0x491b7c=formatResult(_0x491b7c,0x8),_0x426aa8=formatResult(_0x426aa8,0x8);const _0x3b8544=_0x3f8210==_0x83cf38(0x289)?config[_0x83cf38(0x106)]?String['fromCodePoint']('0x'+config[_0x83cf38(0x106)])+'\x20':'':config[_0x83cf38(0xd0)]?String['fromCodePoint']('0x'+config[_0x83cf38(0xd0)])+'\x20':'',_0x5f1e6e=_0x260eff==_0x83cf38(0x1e1)?'Market':config['ordertype']==_0x83cf38(0x25e)?_0x83cf38(0x17b):_0x83cf38(0x275),_0x135bd2=(Math['floor'](Math[_0x83cf38(0x11b)]()*0x35a4e900)+0x5f5e100)[_0x83cf38(0x213)]();lastOrders[_0x83cf38(0x107)]({'customId':_0x135bd2,'symbol':_0x3115b9,'coin':_0x1de7ab[_0x83cf38(0x20e)],'amount':_0x491b7c,'price':_0x426aa8,'side':_0x3f8210,'reverse':_0x1de7ab[_0x83cf38(0x131)],'filled':0x0});if(_0x260eff==_0x83cf38(0x1e1))logHistory(_0x83cf38(0x244),''+_0x3b8544+_0x5f1e6e+_0x83cf38(0x1c2)+_0x3115b9+'\x20'+_0x3f8210+'\x20#'+formatResult(_0x491b7c,0x8)+'\x20@'+formatResult(_0x426aa8,0x8));else logHistory(_0x83cf38(0x244),''+_0x3b8544+_0x5f1e6e+_0x83cf38(0x1c2)+_0x3115b9+'\x20'+_0x3f8210+'\x20#'+formatResult(_0x491b7c,0x8)+'\x20@'+formatResult(_0x426aa8,0x8));let _0x210f51;_0x260eff==_0x83cf38(0x1e1)?_0x3f8210=='buy'&&[_0x83cf38(0x25b),'Bitget',_0x83cf38(0x160),_0x83cf38(0x13c),_0x83cf38(0xc1)][_0x83cf38(0x1fd)](config['exchange'])?_0x210f51=await exchange[_0x83cf38(0x260)](_0x3115b9,_0x260eff,_0x3f8210,_0x491b7c,_0x426aa8):_0x210f51=await exchange[_0x83cf38(0x260)](_0x3115b9,_0x260eff,_0x3f8210,_0x491b7c,undefined):_0x210f51=await exchange['createOrder'](_0x3115b9,_0x260eff,_0x3f8210,_0x491b7c,_0x426aa8);logger[_0x83cf38(0x276)]('ID:\x20'+_0x210f51['id']+'\x20|\x20Custom\x20ID:\x20'+_0x135bd2);const _0x5dc585=lastOrders[_0x83cf38(0x1a6)]-0x1;if(_0x5dc585>=0x0&&lastOrders[_0x5dc585][_0x83cf38(0x1e6)]==_0x135bd2){lastOrders[_0x5dc585]['orderId']=_0x210f51['id'];if(_0x210f51[_0x83cf38(0x15c)])lastOrders[_0x5dc585][_0x83cf38(0x15c)]=_0x210f51['amount'];if(_0x210f51['price'])lastOrders[_0x5dc585][_0x83cf38(0x14a)]=_0x210f51[_0x83cf38(0x14a)];lastOrders[_0x5dc585][_0x83cf38(0x19f)]=_0x210f51[_0x83cf38(0x19f)];}if(config[_0x83cf38(0x129)]!=0x0){let _0x1b5ae8=null;if(cooldownTracker[_0x83cf38(0x1a6)]==config[_0x83cf38(0x129)]-0x1)_0x1b5ae8=cooldownTracker[_0x83cf38(0x25c)]();const _0x27abc6=getTimeStamp();cooldownTracker[_0x83cf38(0x107)](_0x27abc6);if(_0x1b5ae8){const _0xb7238e=fns['differenceInSeconds'](new Date(_0x27abc6),new Date(_0x1b5ae8));if(_0xb7238e<cooldownInterval){logHistory(_0x83cf38(0x13d),_0x83cf38(0x1db)+config[_0x83cf38(0x129)]+_0x83cf38(0x230)+cooldownInterval/0x3c+_0x83cf38(0x238)+cooldownPeriod/(0xe10*0x3e8)+_0x83cf38(0x239)),coolingDown=!![];break;}}}}catch(_0x173257){if(_0x173257[_0x83cf38(0x213)]()[_0x83cf38(0x1fd)](_0x83cf38(0x197)))lastOrders=lastOrders['filter'](_0x35c2a6=>_0x35c2a6[_0x83cf38(0x14d)]!=_0x3115b9),logHistory(_0x83cf38(0x13d),_0x83cf38(0x120)+_0x3115b9),_0x47a645=!![];else{if(_0x173257['toString']()[_0x83cf38(0x1fd)](_0x83cf38(0x237)))lastOrders=lastOrders[_0x83cf38(0x1b7)](_0x5ac065=>_0x5ac065[_0x83cf38(0x14d)]!=_0x3115b9),logHistory('error',_0x83cf38(0x183)+_0x3115b9),_0x47a645=!![];else{if(_0x173257[_0x83cf38(0x213)]()[_0x83cf38(0x1fd)](_0x83cf38(0x194)))lastOrders=lastOrders['filter'](_0x579418=>_0x579418[_0x83cf38(0x14d)]!=_0x3115b9),logHistory('error','Order\x20is\x20invalid:\x20'+_0x3115b9),logger[_0x83cf38(0x276)](_0x173257),_0x47a645=!![];else _0x173257[_0x83cf38(0x213)]()[_0x83cf38(0x1fd)]('must\x20be\x20greater\x20than\x20minimum\x20amount')?(lastOrders=lastOrders['filter'](_0x40d965=>_0x40d965[_0x83cf38(0x14d)]!=_0x3115b9),logHistory(_0x83cf38(0x13d),_0x83cf38(0x120)+_0x3115b9),_0x47a645=!![]):(lastOrders=lastOrders[_0x83cf38(0x1b7)](_0x1a821b=>_0x1a821b['symbol']!=_0x3115b9),await handleError(_0x173257,_0x83cf38(0x138),_0x3115b9));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x83cf38(0x1a6)]>0x0){const _0x5e3e56=config[_0x83cf38(0x1b2)]=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0x83cf38(0x210)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x557dec=_0x83cf38;validateOrders(_0x557dec(0x226));},_0x5e3e56);}else unlockOrders();_0x47a645&&config[_0x83cf38(0x1e8)]&&(logHistory(_0x83cf38(0x13d),'Avoiding\x20continuous\x20order\x20attempts'+pauseBotMsg),await pauseBot(pauseBotInterval)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x83cf38(0x146),_0x83cf38(0x1ad)));}else{if(coolingDown)!config[_0x83cf38(0x1e8)]&&logHistory(_0x83cf38(0x13d),_0x83cf38(0x1fa));else lockOrders!=ORDERS['UNLOCKED']&&(!config[_0x83cf38(0x1e8)]&&(config[_0x83cf38(0x1b2)]==_0x83cf38(0x1e1)?logHistory('error',_0x83cf38(0x24a)):logHistory(_0x83cf38(0x13d),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled')));}}function persistOpenOrders(_0x3017f9){const _0x17e7dc=_0x5c0674,_0x5ec951={...config,'openOrders':_0x3017f9};let _0x3cc7f3=dbConfig[_0x17e7dc(0x21d)]('bot')['find']({'botID':botID})[_0x17e7dc(0x181)]();_0x3cc7f3&&dbConfig['get'](_0x17e7dc(0x202))[_0x17e7dc(0x182)]({'botID':botID})[_0x17e7dc(0x279)](_0x5ec951)[_0x17e7dc(0x1b1)]();}function restoreOrders(){const _0x49a740=_0x5c0674;let _0x6bf78b;config[_0x49a740(0xc5)]&&allOpenOrders[_0x49a740(0x110)](_0x5dee69=>{const _0x869315=_0x49a740,_0x5781b5=config['openOrders'][_0x869315(0x182)](_0x2ff280=>_0x2ff280[_0x869315(0x134)]==_0x5dee69['id']);_0x5781b5&&(lastOrders[_0x869315(0x107)](_0x5781b5),_0x6bf78b=_0x5dee69[_0x869315(0x263)]);});if(lastOrders[_0x49a740(0x1a6)]>0x0){setLockOrders(ORDERS[_0x49a740(0x154)]),validateOrdersState=_0x49a740(0x198),allOrdersPlaced=!![];const _0x12fb43=new Date()[_0x49a740(0x1b5)](),_0x15de22=config['ordertype']==_0x49a740(0x1e1)?validateOrderTimeout*0x3c*0x3e8:config[_0x49a740(0x210)]*0x3c*0x3e8;if(_0x6bf78b+_0x15de22>_0x12fb43){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x3fd098=_0x49a740;validateOrders(_0x3fd098(0x226));},_0x6bf78b+_0x15de22-_0x12fb43);}else validateOrders(_0x49a740(0x226));}}async function sendMetricsTelegram(){const _0x52d814=_0x5c0674;if(!coinsLoaded){process['send']({'telegrammsg':_0x52d814(0x145)},_0x31c5b0=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x4cc056='';if(config[_0x52d814(0xd8)])_0x4cc056='<b>'+config[_0x52d814(0xef)]+_0x52d814(0xcd);else _0x4cc056=_0x52d814(0xf9)+botID+_0x52d814(0xcd);const _0x633227=getKPIs('basecoin'),_0x177946=getKPIs(_0x52d814(0x14b),config[_0x52d814(0x14b)]),_0x52e85e=getKPIs(_0x52d814(0x17c)),_0x496104=getKPIs(_0x52d814(0xe7),config['fiat']);_0x4cc056+='<pre>',_0x4cc056+=_0x633227[_0x52d814(0x15a)]+'\x20:\x20'+_0x633227[_0x52d814(0x181)]+'\x0a',_0x4cc056+=_0x633227['rightTxt']+':\x20'+_0x633227[_0x52d814(0x130)]+'%\x0a',_0x4cc056+=_0x177946[_0x52d814(0x15a)]+_0x52d814(0x1d3)+_0x177946['value']+'\x0a',_0x4cc056+=_0x177946[_0x52d814(0x143)]+':\x20'+_0x177946[_0x52d814(0x130)]+'%\x0a',_0x4cc056+=_0x52e85e['leftTxt']+':\x20'+_0x52e85e[_0x52d814(0x181)]+'\x20('+config[_0x52d814(0x1f7)]+')\x0a',_0x4cc056+=_0x52e85e[_0x52d814(0x143)]+':\x20'+_0x52e85e['change']+_0x52d814(0x1d6)+config[_0x52d814(0x1f7)]+')\x0a',_0x4cc056+=_0x496104[_0x52d814(0x15a)]+':\x20'+_0x496104[_0x52d814(0x181)]+'\x20('+config[_0x52d814(0x14b)]+')\x0a',_0x4cc056+=_0x496104[_0x52d814(0x143)]+':\x20'+_0x496104[_0x52d814(0x130)]+_0x52d814(0x1d6)+config['fiat']+')\x0a',_0x4cc056+=_0x52d814(0xd5),process['send']({'telegrammsg':_0x4cc056},_0x1247cc=>{});}async function sendPortfolioTelegram(){const _0x48e76b=_0x5c0674;if(!coinsLoaded||!currentCoins[0x0][_0x48e76b(0x135)]){process[_0x48e76b(0x115)]({'telegrammsg':_0x48e76b(0x145)},_0x3e68c5=>{});return;}let _0x25bb01='';if(config[_0x48e76b(0xd8)])_0x25bb01='<b>'+config['botname']+_0x48e76b(0xed);else _0x25bb01=_0x48e76b(0xf9)+botID+_0x48e76b(0xed);_0x25bb01+='<pre>',_0x25bb01+=_0x48e76b(0xdc),_0x25bb01+='Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a',_0x25bb01+=_0x48e76b(0xdc),currentCoins[_0x48e76b(0x110)](_0x39ec72=>{const _0x4e5cfc=_0x48e76b;_0x25bb01+=_0x39ec72[_0x4e5cfc(0x20e)][_0x4e5cfc(0x125)](0x7)+'|\x20'+formatPad(_0x39ec72[_0x4e5cfc(0x135)],0x2,0x6)+'|\x20'+formatPad(_0x39ec72['target'],0x2,0x6)+'|\x20'+formatPad(_0x39ec72[_0x4e5cfc(0x1ff)]*0x64,0x2,0x6)+'\x0a';}),_0x25bb01+=_0x48e76b(0xd5),process[_0x48e76b(0x115)]({'telegrammsg':_0x25bb01},_0xd537de=>{});}function formatPad(_0x240651,_0x4d1ada,_0x3d5599){const _0x29d631=_0x5c0674,_0x149d3a=formatResultString(_0x240651,_0x4d1ada);return _0x149d3a?_0x149d3a[_0x29d631(0x23e)](_0x3d5599):''[_0x29d631(0x23e)](_0x3d5599);}function logHistory(_0x1df38f,_0x329409,_0xc9d72e=''){const _0x42721d=_0x5c0674;logger['full'](''+_0x329409);let _0x18b7ef={'time':getTimeStamp(),'type':_0x1df38f,'event':_0x329409};dbLogs[_0x42721d(0x21d)]('logs')[_0x42721d(0x107)](_0x18b7ef)[_0x42721d(0x1b1)]();if(_0xc9d72e=='')_0xc9d72e=_0x329409;proxyEmit(_0x42721d(0x282),{'log':_0x18b7ef,'summary':_0xc9d72e}),process['send']({'telegram':{..._0x18b7ef,'botname':config[_0x42721d(0xef)],'showname':config[_0x42721d(0xd8)]}},_0x4af633=>{});}function emitHistory(_0x1fe86e={}){const _0x262888=_0x5c0674;Object['keys'](_0x1fe86e)[_0x262888(0x1a6)]==0x0&&(_0x1fe86e={'type':['order',_0x262888(0x282)],'event':'','page':0x1});if(_0x1fe86e[_0x262888(0x169)][_0x262888(0x1fd)](_0x262888(0x282)))_0x1fe86e[_0x262888(0x169)][_0x262888(0x1d2)](_0x1fe86e['type'][_0x262888(0x208)](_0x262888(0x282)),0x1,_0x262888(0x13d),_0x262888(0xde),_0x262888(0x146));if(dbLogs['has']('logs')[_0x262888(0x181)]()){let _0x491932=dbLogs['get'](_0x262888(0x12d))['filter'](_0x361176=>{const _0xd023ef=_0x262888;if(_0x1fe86e[_0xd023ef(0x169)][_0xd023ef(0x1a6)]==0x0)return![];else return _0x1fe86e[_0xd023ef(0x169)]['includes'](_0x361176[_0xd023ef(0x169)]);})[_0x262888(0x1b7)](_0x31120f=>{const _0x34a285=_0x262888;if(_0x1fe86e[_0x34a285(0x282)]=='')return!![];else return _0x31120f[_0x34a285(0x282)][_0x34a285(0x10f)]()[_0x34a285(0x1fd)](_0x1fe86e[_0x34a285(0x282)][_0x34a285(0x10f)]());})[_0x262888(0x1ef)]('time'),_0x30497d=_0x491932['value']()[_0x262888(0x1a6)];_0x491932=_0x491932[_0x262888(0x131)]()[_0x262888(0x24e)]((_0x1fe86e['page']-0x1)*logPageSize,_0x1fe86e['page']*logPageSize-0x1)[_0x262888(0x131)]()[_0x262888(0x181)](),proxyEmit('event-history',{'logs':_0x491932,'total':_0x30497d});}else proxyEmit(_0x262888(0x1ba),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0xdec1b3){const _0x54a308=_0x5c0674;if(dbLogs['has'](_0x54a308(0x12d))[_0x54a308(0x181)]()){const _0x143687=dbLogs['get'](_0x54a308(0x12d))[_0x54a308(0x1ef)](_0x54a308(0x18f))[_0x54a308(0x1b7)](_0x2afd85=>{const _0x1acbd5=_0x54a308;return _0x2afd85[_0x1acbd5(0x169)]==_0x1acbd5(0x244);})['value']();dbLogs[_0x54a308(0x21d)]('logs')[_0x54a308(0x179)]()[_0x54a308(0x1b1)](),dbLogs[_0x54a308(0x21d)](_0x54a308(0x12d))[_0x54a308(0x279)](_0x143687)[_0x54a308(0x1b1)](),emitHistory(_0xdec1b3);}}async function pauseBot(_0x4dccaa=pauseBotIntervalShort,_0x37a437,_0x353f46,_0x4930e2=![]){const _0x9ed77b=_0x5c0674,_0x5d4f47=new Date()[_0x9ed77b(0x1b5)]();if(!lastErrorShown||_0x5d4f47-lastErrorShown>=_0x4dccaa){lastErrorShown=_0x5d4f47;if(!lastBotPause)lastBotPause=_0x5d4f47,consecutivePauses=0x1;else{if(_0x5d4f47-lastBotPause-_0x4dccaa<0x5a*0x3e8){consecutivePauses++;if(consecutivePauses>maxPauseRetries){if(_0x4930e2){logHistory(_0x9ed77b(0x13d),_0x37a437+_0x9ed77b(0x1fc)),await killBot();return;}else logHistory('error',_0x37a437+pauseBotMsg),_0x4dccaa=pauseBotInterval;}}else consecutivePauses=0x1;lastBotPause=_0x5d4f47;}_0x353f46?logger['debug']('('+consecutivePauses+')\x20'+_0x37a437+_0x9ed77b(0x1f3),_0x353f46):logger[_0x9ed77b(0x276)]('('+consecutivePauses+')\x20'+_0x37a437);if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);await sleep(_0x4dccaa),botPaused=![],_0x4dccaa==pauseBotIntervalShort?resumeBot(!![]):resumeBot(![]);}}}async function killBot(){const _0x3e7971=_0x5c0674;botPaused=!![],await sleep(0x3e8),process[_0x3e7971(0x115)]({'stop':_0x3e7971(0x24c)},_0x19bbbe=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x1bd108,_0x41e7ea,_0xfd977a=![]){const _0x515674=_0x5c0674;if(botPaused)return;let _0x208c6e;const _0x1d5aad=config[_0x515674(0x216)]||_0x515674(0x1fe);if(_0x41e7ea)logger['debug'](_0x515674(0x234)+_0x41e7ea);const _0x520f07=()=>{const _0x473110=_0x515674;loading[_0x473110(0x13d)]=!![],emitLoadingProgress();};if(_0x1bd108[_0x515674(0x213)]()[_0x515674(0x1fd)](_0x515674(0x104)))logHistory(_0x515674(0x13d),_0x1d5aad+_0x515674(0x21c)),_0x520f07();else{if(_0x1bd108[_0x515674(0x213)]()[_0x515674(0x1fd)](_0x515674(0x1cd)))logHistory(_0x515674(0x13d),_0x1d5aad+'\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)'),_0x520f07();else{if(_0x1bd108[_0x515674(0x213)]()[_0x515674(0x1fd)]('AuthenticationError'))config[_0x515674(0x1ae)]?_0x208c6e=_0x1d5aad+_0x515674(0x175):_0x208c6e=_0x1d5aad+'\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange',logHistory(_0x515674(0x13d),_0x208c6e+_0x515674(0x100)),_0x520f07();else{if(_0x1bd108[_0x515674(0x213)]()['includes']('PermissionDenied'))logHistory(_0x515674(0x13d),_0x1d5aad+_0x515674(0x23b)),_0x520f07();else{if(!_0xfd977a)await handleError(_0x1bd108,null);}}}}}async function handleError(_0x581967,_0x405cf6,_0x2fca2d=''){const _0x182098=_0x5c0674;if(botPaused)return;let _0x27955c;const _0x3ed038=config[_0x182098(0x216)]||_0x182098(0x1fe);if(_0x405cf6)logger[_0x182098(0x276)](_0x182098(0x234)+_0x405cf6);if(_0x581967[_0x182098(0x213)]()[_0x182098(0x1fd)](_0x182098(0xe9)))_0x27955c=_0x3ed038+_0x182098(0xe1),await pauseBot(undefined,_0x27955c,_0x581967);else{if(_0x581967[_0x182098(0x213)]()[_0x182098(0x1fd)](_0x182098(0x1dd)))_0x27955c=_0x3ed038+_0x182098(0x19d),await pauseBot(undefined,_0x27955c,_0x581967);else{if(_0x581967[_0x182098(0x213)]()[_0x182098(0x1fd)](_0x182098(0x200))||_0x581967[_0x182098(0x213)]()[_0x182098(0x1fd)](_0x182098(0x255)))_0x27955c=_0x3ed038+_0x182098(0x285),await pauseBot(undefined,_0x27955c,_0x581967[_0x182098(0x213)]());else{if(_0x581967[_0x182098(0x213)]()[_0x182098(0x1fd)]('RequestTimeout'))_0x27955c=_0x3ed038+_0x182098(0x1b3),await pauseBot(undefined,_0x27955c,_0x581967[_0x182098(0x213)]());else{if(_0x581967[_0x182098(0x213)]()[_0x182098(0x1fd)]('NetworkError:\x20connection\x20closed\x20by\x20remote\x20server'))_0x27955c=_0x3ed038+_0x182098(0x165),await pauseBot(undefined,_0x27955c,_0x581967[_0x182098(0x213)]());else{if(_0x581967[_0x182098(0x213)]()[_0x182098(0x10f)]()[_0x182098(0x1fd)](_0x182098(0x263))||_0x581967[_0x182098(0x213)]()[_0x182098(0x10f)]()[_0x182098(0x1fd)](_0x182098(0x224)))_0x27955c=_0x182098(0x18b),await pauseBot(undefined,_0x27955c,_0x581967[_0x182098(0x213)]());else{if(_0x581967[_0x182098(0x213)]()[_0x182098(0x1fd)]('InvalidNonce'))_0x27955c=_0x3ed038+_0x182098(0x155),await pauseBot(undefined,_0x27955c,_0x581967['toString']());else{if(_0x581967 instanceof ccxt['NetworkError'])_0x27955c=_0x3ed038+'\x20network\x20error:\x20'+_0x581967['toString'](),logger['debug'](_0x182098(0x28a),_0x581967),await pauseBot(undefined,_0x27955c,_0x581967);else{if(_0x581967['toString']()[_0x182098(0x1fd)]('API-key\x20format\x20invalid'))logHistory('error',_0x3ed038+_0x182098(0x1af)),logHistory(_0x182098(0x13d),_0x182098(0x1bb)),await killBot();else{if(_0x581967[_0x182098(0x213)]()[_0x182098(0x1fd)](_0x182098(0x1cd)))logHistory('error',_0x3ed038+_0x182098(0x1aa)),logHistory(_0x182098(0x13d),_0x182098(0x1bb)),await killBot();else{if(_0x581967[_0x182098(0x213)]()[_0x182098(0x1fd)](_0x182098(0xcc))&&_0x581967[_0x182098(0x213)]()[_0x182098(0x1fd)](_0x182098(0x1a9)))_0x27955c=_0x3ed038+_0x182098(0x108),await pauseBot(undefined,_0x27955c,_0x581967,!![]);else{if(_0x581967['toString']()[_0x182098(0x1fd)](_0x182098(0xcc)))config['apiPassword']?_0x27955c=_0x3ed038+_0x182098(0x175):_0x27955c=_0x3ed038+_0x182098(0x168),logHistory(_0x182098(0x13d),_0x27955c),logHistory('error',_0x182098(0x1bb)),await killBot();else{if(_0x581967[_0x182098(0x213)]()[_0x182098(0x1fd)](_0x182098(0x221)))logHistory('error',_0x3ed038+_0x182098(0xe4)),logHistory(_0x182098(0x13d),_0x182098(0x1bb)),await killBot();else{if(_0x581967[_0x182098(0x213)]()[_0x182098(0x1fd)](_0x182098(0x167)))logHistory(_0x182098(0x13d),_0x182098(0x1c0)+_0x2fca2d),logger['debug'](_0x182098(0x171),_0x581967);else{if(_0x581967 instanceof ccxt[_0x182098(0x1de)]){_0x27955c=_0x3ed038+'\x20exchange\x20error:\x20'+_0x581967['toString'](),logHistory('error',_0x27955c),logger['debug'](_0x182098(0x185),_0x581967);if(_0x2fca2d)logger[_0x182098(0x276)](_0x182098(0x223)+_0x2fca2d);await pauseBot(undefined,_0x27955c,_0x581967);}else{_0x27955c=_0x182098(0x25a)+_0x581967['toString'](),logHistory(_0x182098(0x13d),_0x27955c),logger['debug'](_0x27955c+_0x182098(0x1f3),_0x581967);if(_0x2fca2d)logger[_0x182098(0x276)](_0x182098(0x223)+_0x2fca2d);await pauseBot(undefined,_0x27955c);}}}}}}}}}}}}}}}}function decryptRSA(_0x132672,_0x3b2eec){const _0x5e943f=_0x5c0674,_0x31e4e3=forge[_0x5e943f(0x192)]['privateKeyFromPem'](_0x132672),_0x205315=_0x31e4e3['decrypt'](forge['util'][_0x5e943f(0x209)](_0x3b2eec),'RSA-OAEP',{'md':forge['md'][_0x5e943f(0x245)][_0x5e943f(0x268)](),'mgf1':{'md':forge['md'][_0x5e943f(0x245)][_0x5e943f(0x268)]()}});return _0x205315;}async function withRetry(_0x52a653,_0x588ab9){const _0x560444=_0x5c0674;let _0x28390b=![],_0x3db2d9=0x0,_0xbcaed4,_0x613816;while(_0x3db2d9<maxRetries){try{_0xbcaed4=await _0x588ab9();break;}catch(_0x28cc96){_0x613816=_0x28cc96,!_0x28390b?(_0x28390b=!![],logger['debug'](_0x560444(0x20b)+_0x52a653+':',_0x28cc96[_0x560444(0x213)]())):await sleep(retryInterval);}_0x3db2d9++;}if(_0x3db2d9==0x0)return _0xbcaed4;if(_0x3db2d9>=maxRetries)throw _0x613816;else return logger[_0x560444(0x276)](_0x560444(0x218)+_0x3db2d9+_0x560444(0x102)),_0xbcaed4;}function formatResult(_0x2c1a70,_0x3c7793){return parseFloat(_0x2c1a70['toFixed'](_0x3c7793));}function formatResultTruncate(_0x2c751e,_0x4d3ca7){const _0x2ea68d=_0x5c0674;let _0x2fb312=formatResultString(_0x2c751e,0xa),_0x33dd3b=_0x2fb312['indexOf']('.');return _0x33dd3b!=-0x1&&(_0x2fb312=_0x2fb312[_0x2ea68d(0x24e)](0x0,_0x33dd3b+_0x4d3ca7+0x1)),Number(_0x2fb312);}function formatResultString(_0x581a83,_0x2f62ff){const _0x39b1e9=_0x5c0674;let _0x2d6cf5;if(!(''+_0x581a83)['includes']('e'))_0x2d6cf5=+(Math[_0x39b1e9(0x1f0)](_0x581a83+'e+'+_0x2f62ff)+'e-'+_0x2f62ff);else{let _0xc37ede=(''+_0x581a83)['split']('e'),_0x48ab3d='';+_0xc37ede[0x1]+_0x2f62ff>0x0&&(_0x48ab3d='+'),_0x2d6cf5=+(Math[_0x39b1e9(0x1f0)](+_0xc37ede[0x0]+'e'+_0x48ab3d+(+_0xc37ede[0x1]+_0x2f62ff))+'e-'+_0x2f62ff);}return Number(_0x2d6cf5)['toFixed'](_0x2f62ff);}function getServerTime(){const _0x543367=_0x5c0674,_0x42a4e5=new Date();return _0x42a4e5[_0x543367(0xd3)]()+'/'+(_0x42a4e5['getMonth']()+0x1)['toString']()[_0x543367(0x23e)](0x2,'0')+'/'+_0x42a4e5[_0x543367(0x1a1)]()[_0x543367(0x213)]()[_0x543367(0x23e)](0x2,'0')+'\x20'+_0x42a4e5['getHours']()['toString']()['padStart'](0x2,'0')+':'+_0x42a4e5[_0x543367(0xeb)]()['toString']()[_0x543367(0x23e)](0x2,'0')+':'+_0x42a4e5['getSeconds']()[_0x543367(0x213)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x1ac140=_0x5c0674,_0x34c818=shiftedTime();return _0x34c818[_0x1ac140(0xd3)]()+'/'+(_0x34c818[_0x1ac140(0x151)]()+0x1)[_0x1ac140(0x213)]()['padStart'](0x2,'0')+'/'+_0x34c818[_0x1ac140(0x1a1)]()[_0x1ac140(0x213)]()[_0x1ac140(0x23e)](0x2,'0')+'\x20'+_0x34c818[_0x1ac140(0x23f)]()[_0x1ac140(0x213)]()[_0x1ac140(0x23e)](0x2,'0')+':'+_0x34c818[_0x1ac140(0xeb)]()[_0x1ac140(0x213)]()[_0x1ac140(0x23e)](0x2,'0')+':'+_0x34c818[_0x1ac140(0x1a8)]()['toString']()[_0x1ac140(0x23e)](0x2,'0');}function getDate(){const _0x35a929=_0x5c0674,_0x24d592=shiftedTime();return _0x24d592['getFullYear']()+'/'+(_0x24d592['getMonth']()+0x1)[_0x35a929(0x213)]()[_0x35a929(0x23e)](0x2,'0')+'/'+_0x24d592[_0x35a929(0x1a1)]()[_0x35a929(0x213)]()[_0x35a929(0x23e)](0x2,'0');}function getHour(){const _0xc787e1=_0x5c0674,_0x42a46e=shiftedTime();return _0x42a46e[_0xc787e1(0x23f)]()[_0xc787e1(0x213)]()['padStart'](0x2,'0');}function sleep(_0x3a902d){return new Promise(_0x2b8c8e=>setTimeout(_0x2b8c8e,_0x3a902d));}function shiftedTime(){const _0x35f675=_0x5c0674,_0xcc1e2f=new Date();let _0x71ac69=_0xcc1e2f;if(config&&config[_0x35f675(0x1d0)]!==0x0)_0x71ac69=fns[_0x35f675(0x19e)](_0xcc1e2f,{'hours':config['timeshift']});return _0x71ac69;}function timer(_0x33b9d0){const _0x526135=_0x5c0674,_0x1e043d=new Date();!lasttime?console[_0x526135(0x257)](getTimeStamp()+':\x20timer\x20>',_0x33b9d0,_0x1e043d):console[_0x526135(0x257)](getTimeStamp()+_0x526135(0x242),_0x33b9d0,(_0x1e043d-lasttime)/0x3e8),lasttime=_0x1e043d;}