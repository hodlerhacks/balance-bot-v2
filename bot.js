const _0x13a2d5=_0x130f;(function(_0xf13b64,_0x2c896e){const _0x2327ac=_0x130f,_0x4cfa95=_0xf13b64();while(!![]){try{const _0x59b203=parseInt(_0x2327ac(0x221))/0x1*(parseInt(_0x2327ac(0x2ea))/0x2)+-parseInt(_0x2327ac(0x201))/0x3+-parseInt(_0x2327ac(0x2ac))/0x4*(parseInt(_0x2327ac(0x314))/0x5)+-parseInt(_0x2327ac(0x255))/0x6*(-parseInt(_0x2327ac(0x301))/0x7)+parseInt(_0x2327ac(0x361))/0x8*(-parseInt(_0x2327ac(0x30f))/0x9)+parseInt(_0x2327ac(0x2d5))/0xa*(-parseInt(_0x2327ac(0x1ee))/0xb)+parseInt(_0x2327ac(0x267))/0xc;if(_0x59b203===_0x2c896e)break;else _0x4cfa95['push'](_0x4cfa95['shift']());}catch(_0x3a10d5){_0x4cfa95['push'](_0x4cfa95['shift']());}}}(_0x4c83,0x5a650));const _0x5d8eb4=function(){let _0x10e3db=!![];return function(_0x2c515e,_0x34d44a){const _0x4a0e62=_0x10e3db?function(){if(_0x34d44a){const _0x2d7b16=_0x34d44a['apply'](_0x2c515e,arguments);return _0x34d44a=null,_0x2d7b16;}}:function(){};return _0x10e3db=![],_0x4a0e62;};}(),_0x1a4439=_0x5d8eb4(this,function(){const _0x180851=_0x130f;return _0x1a4439[_0x180851(0x260)]()[_0x180851(0x359)](_0x180851(0x20a))['toString']()[_0x180851(0x1b4)](_0x1a4439)[_0x180851(0x359)](_0x180851(0x20a));});_0x1a4439();'use strict';const ccxt=require(_0x13a2d5(0x1d6)),low=require(_0x13a2d5(0x30e)),FileSync=require(_0x13a2d5(0x25a)),fs=require('fs'),fns=require('date-fns'),forge=require(_0x13a2d5(0x22b)),util=require('util'),argv=require('yargs/yargs')(process[_0x13a2d5(0x2e1)][_0x13a2d5(0x31e)](0x2))[_0x13a2d5(0x2e1)],path=require('path'),axios=require('axios');let exchange,gTicker={},gChange={};const usdBasecoins=[_0x13a2d5(0x348),_0x13a2d5(0x1b0),_0x13a2d5(0x1cc),_0x13a2d5(0x1dd),_0x13a2d5(0x35d),_0x13a2d5(0x30b)],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object['freeze']({'LOCKED':0x0,'UNLOCKING':0x1,'UNLOCKED':0x2});let lockOrders=ORDERS[_0x13a2d5(0x20d)],validateOrdersState,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotIntervalShort=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0x13a2d5(0x1b9)+pauseBotInterval/0xea60+_0x13a2d5(0x238),maxPauseRetries=0x6,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,watchTransactionsInterval=0x3c*0x3e8,schedulerInterval=0x3c*0x3c*0x3e8,retryInterval=0x3e8,maxRetries=0x5,logPageSize=0x14,defaultFee=0.003;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidOrdersInitialTimeout,pidOrdersTimeout,botPaused=![],transactionDetectionOngoing=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x5dc,balanceUpdateRetries=0x5;let enableFiatToggle;const serverversion=require('./version.json')[_0x13a2d5(0x1f3)],environment=require(_0x13a2d5(0x309))['environment']||_0x13a2d5(0x316),botID=process[_0x13a2d5(0x2e1)][0x2]||'001',pattern=/^[0-9]{3}$/;!pattern[_0x13a2d5(0x246)](botID)&&(console[_0x13a2d5(0x297)]('Error:\x20Invalid\x20argument\x20'+botID+',\x20must\x20be\x20a\x203\x20digit\x20number'),killBot());const userID=process[_0x13a2d5(0x2e1)][0x3]||'',configpath=userID?_0x13a2d5(0x1ce)+userID+'/':_0x13a2d5(0x1ce),logspath=userID?_0x13a2d5(0x288)+userID+'/':_0x13a2d5(0x288),loggerfile=fs[_0x13a2d5(0x1e7)](logspath+'/output-000.log',{'flags':'a'});!fs[_0x13a2d5(0x21a)](configpath)&&fs[_0x13a2d5(0x1e8)](configpath);!fs[_0x13a2d5(0x21a)](logspath)&&fs[_0x13a2d5(0x1e8)](logspath);const configfile=configpath+_0x13a2d5(0x252)+botID+_0x13a2d5(0x22d),logfile=configpath+_0x13a2d5(0x252)+botID+_0x13a2d5(0x2d2),performancefile=configpath+_0x13a2d5(0x252)+botID+_0x13a2d5(0x286),coinresultsfile=configpath+_0x13a2d5(0x252)+botID+_0x13a2d5(0x1a6),settingsfile=configpath+'bb-settings.json',securefile=configpath+_0x13a2d5(0x325),configbackuppath=configpath+_0x13a2d5(0x2c0),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x13a2d5(0x2bb)]({'logs':[],'version':serverversion})[_0x13a2d5(0x23d)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x13a2d5(0x2bb)]({'data':[],'version':serverversion})[_0x13a2d5(0x23d)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x13a2d5(0x2bb)]({'bot':[],'version':serverversion})['write']();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x13a2d5(0x2bb)]({'coins':[],'version':serverversion})[_0x13a2d5(0x23d)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0,settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x44da0b=>{console['log'](_0x44da0b);},'simple':_0x488657=>{const _0x216c9c=_0x13a2d5;console[_0x216c9c(0x297)](_0x488657),loggerfile['write'](util[_0x216c9c(0x296)](_0x488657)+'\x0a');},'full':async(_0x5d0e43,_0x34fd98='')=>{const _0x1971e8=_0x13a2d5;let _0x521985;if(config['showname'])_0x521985=getTimeStamp()+':\x20'+config[_0x1971e8(0x234)]+_0x1971e8(0x1da)+_0x5d0e43;else _0x521985=getTimeStamp()+_0x1971e8(0x349)+botID+_0x1971e8(0x1da)+_0x5d0e43;console[_0x1971e8(0x297)](_0x521985),loggerfile['write'](util['format'](_0x521985)+'\x0a'),_0x34fd98&&(console[_0x1971e8(0x297)](_0x34fd98),loggerfile[_0x1971e8(0x23d)](util['format'](_0x34fd98)+'\x0a'));},'debug':async(_0x291cdb,_0x3c7572='')=>{const _0x4b876f=_0x13a2d5;let _0x2b0c68;if(config[_0x4b876f(0x1a3)])_0x2b0c68=getTimeStamp()+':\x20'+config[_0x4b876f(0x234)]+'\x20>\x20[DEBUG]\x20'+_0x291cdb;else _0x2b0c68=getTimeStamp()+_0x4b876f(0x349)+botID+'\x20>\x20[DEBUG]\x20'+_0x291cdb;if(debugging)console['log'](_0x2b0c68);loggerfile[_0x4b876f(0x23d)](util[_0x4b876f(0x296)](_0x2b0c68)+'\x0a');if(_0x3c7572){if(debugging)console[_0x4b876f(0x297)](_0x3c7572);loggerfile[_0x4b876f(0x23d)](util[_0x4b876f(0x296)](_0x3c7572)+'\x0a');}}};process['on'](_0x13a2d5(0x2ba),function(_0x21b7f9){handleError(_0x21b7f9,'uncaughtException');});function _0x130f(_0x42e754,_0x771d96){const _0x2853e4=_0x4c83();return _0x130f=function(_0x1a4439,_0x5d8eb4){_0x1a4439=_0x1a4439-0x19b;let _0x4c83d1=_0x2853e4[_0x1a4439];return _0x4c83d1;},_0x130f(_0x42e754,_0x771d96);}settings[_0x13a2d5(0x338)]!=config[_0x13a2d5(0x338)]&&updateTimeshift(settings['timeshift']);settings[_0x13a2d5(0x331)]!=config['onepagemode']&&updateOnepagemode(settings[_0x13a2d5(0x331)]);(settings[_0x13a2d5(0x270)]&&!config['marketcapApi']||!settings[_0x13a2d5(0x270)]&&config['marketcapApi'])&&updateMarketcapApi(settings[_0x13a2d5(0x270)]);process[_0x13a2d5(0x295)]({'started':_0x13a2d5(0x1f1)},_0x4be3c3=>{}),initializeProcessListeners();function proxyEmit(_0x4e8a12,_0x316ccc=null){const _0xe38948=_0x13a2d5;process[_0xe38948(0x295)]({'function':_0x4e8a12,'args':_0x316ccc},_0x3e3fda=>{});}function initializeProcessListeners(){process['on']('message',_0x258bf3=>{const _0x5eb596=_0x130f;switch(Object[_0x5eb596(0x1df)](_0x258bf3)[0x0]){case'timeshift':_0x258bf3[_0x5eb596(0x338)]!=undefined&&(settings[_0x5eb596(0x338)]=_0x258bf3[_0x5eb596(0x338)],updateTimeshift(settings['timeshift']));break;case _0x5eb596(0x331):_0x258bf3[_0x5eb596(0x331)]!=undefined&&(settings[_0x5eb596(0x331)]=_0x258bf3[_0x5eb596(0x331)],updateOnepagemode(settings[_0x5eb596(0x331)]));break;case _0x5eb596(0x270):_0x258bf3[_0x5eb596(0x270)]!=undefined&&(settings[_0x5eb596(0x270)]=_0x258bf3[_0x5eb596(0x270)],updateMarketcapApi(settings[_0x5eb596(0x270)]));break;case _0x5eb596(0x2aa):_0x258bf3[_0x5eb596(0x2aa)]!=undefined&&(bots=JSON['parse'](_0x258bf3['bots']),proxyEmit('bots',bots));break;case _0x5eb596(0x34f):switch(_0x258bf3['function']){case'initclient':initclient();break;case _0x5eb596(0x330):toggleBotMode();break;case _0x5eb596(0x2c3):emitHistory(_0x258bf3['args']);break;case'deleteHistoryAlerts':deleteHistoryAlerts(_0x258bf3[_0x5eb596(0x289)]);break;case _0x5eb596(0x1ff):getPortfolio(_0x258bf3['args']);break;case'storeConfiguration':storeConfiguration(_0x258bf3[_0x5eb596(0x289)]);break;case _0x5eb596(0x20c):storeHeadless(_0x258bf3[_0x5eb596(0x289)]);break;case _0x5eb596(0x25e):storeFiat(_0x258bf3[_0x5eb596(0x289)]);break;case _0x5eb596(0x237):resetHistory();break;case _0x5eb596(0x1e4):getStartingBalances(getNormalizedPerformance());break;case _0x5eb596(0x232):placeOrder(_0x258bf3[_0x5eb596(0x289)]);break;case'cancelLoading':cancelLoading();break;case _0x5eb596(0x226):showConfig();break;case _0x5eb596(0x2e6):sendMetricsTelegram();break;case _0x5eb596(0x2ce):sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x53d146=![]){const _0x48407e=_0x13a2d5;logger[_0x48407e(0x1dc)](_0x48407e(0x258)+(_0x53d146?_0x48407e(0x266):_0x48407e(0x213))+_0x48407e(0x2d7)+config[_0x48407e(0x27d)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x53d146)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x48407e(0x356)]!=''&&config[_0x48407e(0x356)]!=_0x48407e(0x2a2)){loadingProgress=0x0;_0x53d146&&(await initExchange(),await loadSymbols(),loadingProgress=0x1,setStableCoins(),proxyEmit(_0x48407e(0x26b),emittedConfiguration()),initialPerformanceStored=![]);const _0x59353b=await getCoins();[currentCoins,currentCoinsAll]=_0x59353b,setBlockTransactionDetection(![]),startScheduler(),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x48407e(0x1dc)](_0x48407e(0x342)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x48407e(0x27a)]==0x0&&allOpenOrders['length']!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function resumeBot(_0x1b8ba9=![]){const _0x89d01a=_0x13a2d5;logger[_0x89d01a(0x1dc)](_0x89d01a(0x312)+(_0x1b8ba9?'quick':_0x89d01a(0x34b))+_0x89d01a(0x2c1)+config[_0x89d01a(0x27d)]);if(pidBalances)clearTimeout(pidBalances);if(_0x1b8ba9){getBalances();return;}coinsLoaded=![];if(config['apiKey']!=''&&config[_0x89d01a(0x356)]!=_0x89d01a(0x2a2)){loadingProgress=0x1;const _0x636f96=await getCoins();[currentCoins,currentCoinsAll]=_0x636f96,setBlockTransactionDetection(![]),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x89d01a(0x1dc)](_0x89d01a(0x342)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x89d01a(0x27a)]==0x0&&allOpenOrders['length']!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();}}async function getMarketCap(_0x46ad1e){const _0x2307e0=_0x13a2d5;let _0x4ffc93=![];if(_0x46ad1e)_0x4ffc93=!![];let _0x11df9b;_0x4ffc93?_0x11df9b=_0x46ad1e[_0x2307e0(0x1e9)](_0x4b5935=>_0x4b5935[_0x2307e0(0x27f)]):_0x11df9b=currentCoinsAll['map'](_0x3112db=>_0x3112db['coin']);if(!config['marketcapApi']||!_0x4ffc93&&!config['marketcapEnabled']||_0x11df9b[_0x2307e0(0x27a)]==0x0)return;let _0x2a8feb=null;try{_0x2a8feb=await axios[_0x2307e0(0x1be)](_0x2307e0(0x2fe),{'headers':{'X-CMC_PRO_API_KEY':settings[_0x2307e0(0x270)]},'params':{'symbol':_0x11df9b[_0x2307e0(0x260)]()}});}catch(_0x43a92a){_0x2a8feb=null,_0x43a92a[_0x2307e0(0x260)]()[_0x2307e0(0x24a)](_0x2307e0(0x33f))?(config[_0x2307e0(0x270)]=![],updateConfig(),proxyEmit(_0x2307e0(0x26b),emittedConfiguration()),logHistory('error',_0x2307e0(0x26a))):(logHistory(_0x2307e0(0x236),_0x2307e0(0x243)+schedulerInterval/(0x3c*0x3e8)+_0x2307e0(0x238)),logger['debug'](_0x2307e0(0x35e),_0x43a92a[_0x2307e0(0x260)]()+_0x2307e0(0x2ec)+_0x43a92a[_0x2307e0(0x263)]));}if(_0x2a8feb){let _0x1a7c47=0x0;const _0x309a88=_0x2a8feb['data'];_0x11df9b['forEach'](_0xc72516=>{const _0x7d7b05=_0x2307e0;if(_0x309a88['data'][_0xc72516][0x0])_0x1a7c47+=_0x309a88[_0x7d7b05(0x30d)][_0xc72516][0x0][_0x7d7b05(0x2d0)][_0x7d7b05(0x348)][_0x7d7b05(0x32d)];}),_0x11df9b[_0x2307e0(0x274)](_0x3301e8=>{const _0x11e166=_0x2307e0,_0x217229=_0x309a88['data'][_0x3301e8][0x0]?_0x309a88[_0x11e166(0x30d)][_0x3301e8][0x0][_0x11e166(0x2d0)][_0x11e166(0x348)]['market_cap']:0x0;if(_0x4ffc93){const _0x3ec602=_0x46ad1e[_0x11e166(0x22e)](_0x3fb7e9=>_0x3fb7e9[_0x11e166(0x27f)]==_0x3301e8);_0x3ec602&&(_0x3ec602[_0x11e166(0x334)]=_0x217229);}else{const _0x39b4b4=currentCoins[_0x11e166(0x22e)](_0x32c18b=>_0x32c18b[_0x11e166(0x27f)]==_0x3301e8);_0x39b4b4&&(_0x39b4b4[_0x11e166(0x334)]=_0x217229);const _0x585710=currentCoinsAll[_0x11e166(0x22e)](_0x175c3e=>_0x175c3e['coin']==_0x3301e8);_0x585710&&(_0x585710[_0x11e166(0x334)]=_0x217229);}}),!_0x4ffc93&&updateTargetDistribution();}}function updateTargetDistribution(){const _0x207e51=_0x13a2d5,_0x5d19af=0x2;let _0x2e58c4=0x0,_0xa037fb=0x0,_0x17dca7=0x0,_0x4933fc=0x0,_0x1df5a8=0x0;config[_0x207e51(0x324)]['forEach'](_0x3a8343=>{const _0x1c767e=_0x207e51;if(!_0x3a8343[_0x1c767e(0x23c)]){_0x17dca7++,_0x2e58c4+=_0x3a8343[_0x1c767e(0x23e)];if(_0x3a8343[_0x1c767e(0x23e)]===-0x1){_0x2e58c4++;const _0x18ece4=currentCoinsAll[_0x1c767e(0x22e)](_0x30fc2c=>_0x30fc2c[_0x1c767e(0x27f)]==_0x3a8343[_0x1c767e(0x27f)]);_0x18ece4&&(_0x4933fc+=_0x18ece4[_0x1c767e(0x334)],_0x1df5a8+=Math[_0x1c767e(0x1d2)](_0x18ece4[_0x1c767e(0x334)]));}if(_0x3a8343[_0x1c767e(0x23e)]!==-0x1)_0xa037fb++;}});let _0x264969;const _0x4eb989=0x64-_0x2e58c4,_0xb3ebcc=_0x17dca7-_0xa037fb;_0x264969=_0xb3ebcc===0x0?_0x2e58c4:Math['max'](0x64,_0x2e58c4),config[_0x207e51(0x324)][_0x207e51(0x274)](_0x19deea=>{const _0x3f8d63=_0x207e51,_0x3d70b2=currentCoinsAll[_0x3f8d63(0x22e)](_0x86bd52=>_0x86bd52[_0x3f8d63(0x27f)]==_0x19deea['coin']);_0x3d70b2&&(_0x19deea['marketcap']=_0x3d70b2[_0x3f8d63(0x334)]);if(!_0x19deea['excluded']){if(_0x264969<=0x64){if(_0x19deea[_0x3f8d63(0x23e)]===-0x1){if(_0x4933fc!==0x0&&config[_0x3f8d63(0x2c6)]){if(_0x3d70b2){if(config[_0x3f8d63(0x2c6)]==_0x3f8d63(0x334))_0x19deea['distribution']=(_0x4eb989/(_0x4933fc/_0x3d70b2[_0x3f8d63(0x334)]))[_0x3f8d63(0x1c5)](_0x5d19af);else config['marketcapEnabled']=='marketcapsqrt'&&(_0x19deea[_0x3f8d63(0x250)]=(_0x4eb989/(_0x1df5a8/Math['sqrt'](_0x3d70b2['marketcap'])))[_0x3f8d63(0x1c5)](_0x5d19af));}}}}}}),updateConfig();}function updateConfig(){const _0x24ad73=_0x13a2d5;let _0x205d15=dbConfig[_0x24ad73(0x1be)](_0x24ad73(0x354))[_0x24ad73(0x22e)]({'botID':botID})['value']();_0x205d15&&dbConfig[_0x24ad73(0x1be)]('bot')[_0x24ad73(0x22e)]({'botID':botID})[_0x24ad73(0x2af)](config)[_0x24ad73(0x23d)]();}function logMemory(){const _0xa8df88=_0x13a2d5;if(environment!='staging')return;const _0x11564c=process[_0xa8df88(0x1ed)]()[_0xa8df88(0x346)]/0x400/0x400;logger[_0xa8df88(0x1dc)](_0xa8df88(0x31b)+process[_0xa8df88(0x247)]+'\x20uses\x20'+formatResult(_0x11564c,0x1)+_0xa8df88(0x241));}async function startScheduler(){const _0x39fdae=_0x13a2d5,_0x4b5930=shiftedTime()[_0x39fdae(0x360)]();getMarketCap(),loadSymbols(),_0x4b5930==0x1&&logMemory(),await sleep(schedulerInterval),startScheduler();}async function restartBot(_0x45954e=![]){const _0x131233=_0x13a2d5;logger[_0x131233(0x1dc)]('Initiating\x20bot\x20restart');if(!_0x45954e)while(lockOrders!=ORDERS['UNLOCKED']||coolingDown){await sleep(0x3e8);}process['send']({'stop':_0x131233(0x352)},_0x55ae53=>{});}async function initExchange(_0x5c8781=config['exchange'],_0x17d09e=config['apiKey'],_0x3b180b=config[_0x13a2d5(0x35f)],_0x38c0b5=config['apiPassword']){const _0x22ff61=_0x13a2d5;if(exchange){logger[_0x22ff61(0x1dc)](_0x22ff61(0x34a));return;}logger['debug'](_0x22ff61(0x33c));!supportedExchanges()[_0x22ff61(0x24a)](_0x5c8781)&&(logHistory(_0x22ff61(0x236),_0x22ff61(0x293)+_0x5c8781+_0x22ff61(0x358)),killBot());const _0x39169b=ccxt[_0x22ff61(0x1f5)][_0x5c8781[_0x22ff61(0x2be)]()];exchange=new _0x39169b({'apiKey':_0x17d09e,'secret':_0x3b180b,'options':{'defaultType':_0x22ff61(0x2bf)}});if(_0x38c0b5)exchange[_0x22ff61(0x19d)]=_0x38c0b5;}function updateExchange(_0x3ecc10,_0x3e4e7e,_0x180148=null){const _0x33e03e=_0x13a2d5;exchange['apiKey']=_0x3ecc10,exchange['apiSecret']=_0x3e4e7e,exchange[_0x33e03e(0x1f8)]=_0x180148,logger['debug'](_0x33e03e(0x2d1));}function setStableCoins(){const _0x184993=_0x13a2d5;let _0x2af824=config[_0x184993(0x204)]==_0x184993(0x1ba)?_0x184993(0x1ba):config[_0x184993(0x204)]=='PAXG'?_0x184993(0x33b):_0x184993(0x265),_0x54ca61=allSymbols[_0x184993(0x24a)](_0x2af824+_0x184993(0x2fc))?'USD':allSymbols['includes'](_0x2af824+'/USDT')?_0x184993(0x1dd):_0x184993(0x253),_0x275abf=allSymbols[_0x184993(0x24a)](_0x2af824+_0x184993(0x26e))?'EUR':_0x54ca61;enableFiatToggle=!![],_0x54ca61==_0x184993(0x253)&&(enableFiatToggle=![],storeFiat(_0x184993(0x253))),_0x275abf!=_0x184993(0x253)&&(enableFiatToggle=![],storeFiat('USD')),stablecoins={'eur':{'coin':''+_0x2af824+_0x275abf,'symbol':_0x2af824+'/'+_0x275abf},'usd':{'coin':''+_0x2af824+_0x54ca61,'symbol':_0x2af824+'/'+_0x54ca61}};}async function initwsCcxt(){const _0xc8f80e=_0x13a2d5;initCycle++;const _0x208e37=initCycle;let _0x45282e=[];config['portfolio'][_0xc8f80e(0x274)](_0x1ae9db=>{const _0x1db40e=_0xc8f80e;if(!_0x1ae9db[_0x1db40e(0x23c)]&&_0x1ae9db[_0x1db40e(0x27f)]!=config[_0x1db40e(0x204)])_0x45282e[_0x1db40e(0x239)](_0x1ae9db[_0x1db40e(0x24b)]);});if(!_0x45282e[_0xc8f80e(0x24a)](stablecoins['eur'][_0xc8f80e(0x24b)]))_0x45282e['push'](stablecoins[_0xc8f80e(0x28b)][_0xc8f80e(0x24b)]);if(!_0x45282e[_0xc8f80e(0x24a)](stablecoins[_0xc8f80e(0x303)][_0xc8f80e(0x24b)]))_0x45282e[_0xc8f80e(0x239)](stablecoins[_0xc8f80e(0x303)][_0xc8f80e(0x24b)]);if(config[_0xc8f80e(0x27d)][_0xc8f80e(0x1a4)](_0xc8f80e(0x2fa))&&config[_0xc8f80e(0x204)]!=_0xc8f80e(0x33b)){if(!_0x45282e['includes']('BNB/'+config[_0xc8f80e(0x204)]))_0x45282e[_0xc8f80e(0x239)](_0xc8f80e(0x214)+config[_0xc8f80e(0x204)]);}loadCoins(_0x45282e),_0x45282e=validateSymbols(_0x45282e);const _0x390aea=async _0x55193f=>{const _0x35b476=_0xc8f80e;let _0x431030;try{const _0x1d5fda=await getTickers(_0x55193f);Object[_0x35b476(0x294)](_0x1d5fda)[_0x35b476(0x274)](_0x273f25=>{const _0x50c381=_0x35b476;_0x431030=_0x273f25[0x1][_0x50c381(0x24b)],gTicker[noslash(_0x431030)]=_0x273f25[0x1][_0x50c381(0x306)],gChange[_0x431030]=_0x273f25[0x1]['percentage'];});}catch(_0xa2f176){await handleError(_0xa2f176,_0x35b476(0x300),_0x431030);}},_0x3329f3=async _0x146827=>{const _0x8d3d9e=_0xc8f80e;while(initCycle==_0x208e37){if(!botPaused)try{const _0x45c63a=await exchange[_0x8d3d9e(0x2dc)](_0x146827);gTicker[noslash(_0x45c63a[0x0][_0x8d3d9e(0x24b)])]=_0x45c63a[0x0][_0x8d3d9e(0x225)];}catch(_0x14e8bd){if(!exchangeStopped)await handleError(_0x14e8bd,_0x8d3d9e(0x23a),_0x146827);}else await sleep(0x64);}},_0x373458=async _0x209029=>{const _0x265f12=_0xc8f80e;while(initCycle==_0x208e37){if(!botPaused)try{const _0x1aeb0a=await exchange[_0x265f12(0x24d)](_0x209029),_0x529c74=_0x1aeb0a[_0x265f12(0x308)]();gTicker[noslash(_0x529c74[_0x265f12(0x24b)])]=_0x529c74[_0x265f12(0x225)];}catch(_0x344918){if(!exchangeStopped)await handleError(_0x344918,_0x265f12(0x24e),_0x209029['toString']());}else await sleep(0x64);}},_0x9b016=async _0x142060=>{const _0x46f8fd=_0xc8f80e;while(initCycle==_0x208e37){if(!botPaused){let _0x4682e1;try{await sleep(0x3c*0x3e8);const _0x385413=await getTickers(_0x142060);Object[_0x46f8fd(0x294)](_0x385413)[_0x46f8fd(0x274)](_0xb87acc=>{const _0x903bd3=_0x46f8fd;_0x4682e1=_0xb87acc[0x1]['symbol'],gChange[_0x4682e1]=_0xb87acc[0x1][_0x903bd3(0x1a1)];});}catch(_0x5bf172){if(!exchangeStopped)await handleError(_0x5bf172,_0x46f8fd(0x2b4),_0x4682e1);}}else await sleep(0x64);}},_0x5e051c=async _0x7a6ee4=>{const _0x23c490=_0xc8f80e;while(initCycle==_0x208e37){if(!botPaused)try{const _0x238dda=await exchange[_0x23c490(0x207)](_0x7a6ee4);initCycle==_0x208e37&&_0x238dda[_0x23c490(0x274)](_0x1a4316=>{updateNumberCoinsCcxt(_0x1a4316);});}catch(_0x1ab588){if(!exchangeStopped)await handleError(_0x1ab588,_0x23c490(0x1b8));}else await sleep(0x64);}};_0x390aea(_0x45282e),_0x9b016(_0x45282e),exchange[_0xc8f80e(0x22c)][_0xc8f80e(0x24d)]&&!(config[_0xc8f80e(0x27d)]==_0xc8f80e(0x20e)&&_0x45282e[_0xc8f80e(0x27a)]>0xa)?_0x373458(_0x45282e):_0x45282e['forEach'](_0x405c25=>{_0x3329f3(_0x405c25);}),_0x45282e['forEach'](_0x2031f5=>{_0x5e051c(_0x2031f5);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x28a5b9){const _0x2c44fb=_0x13a2d5;let _0x4095e6={};try{if(config[_0x2c44fb(0x27d)]!='Cryptocom')_0x4095e6=await exchange[_0x2c44fb(0x332)](_0x28a5b9);else for(const _0x2fda57 of _0x28a5b9){const _0x20bfd0=await exchange[_0x2c44fb(0x1db)](_0x2fda57);_0x4095e6[_0x2fda57]=_0x20bfd0;}return _0x4095e6;}catch(_0x5317f7){throw _0x5317f7;}}function setBlockTransactionDetection(_0x31e8c9){const _0x29bde0=_0x13a2d5;blockTransactionDetection=_0x31e8c9,logger['debug'](_0x29bde0(0x2bc)+blockTransactionDetection);}async function detectLiquidityChange(_0x22ad7c=0x0){const _0x359946=_0x13a2d5;transactionDetectionOngoing=!![];try{const _0x56cc40=await getCoins(_0x22ad7c),[_0x152a9c,_0x15d997]=_0x56cc40;let _0x392b7d=[];currentCoins[_0x359946(0x274)](_0x2b10b3=>{const _0x44fbe5=_0x359946,_0x5d4213=_0x152a9c[_0x44fbe5(0x22e)](_0x472abf=>_0x472abf[_0x44fbe5(0x27f)]==_0x2b10b3['coin']);if(_0x5d4213){if(_0x2b10b3[_0x44fbe5(0x2bd)]!=_0x5d4213[_0x44fbe5(0x2bd)]){let _0x28045e;if(_0x2b10b3['coin']!=config[_0x44fbe5(0x204)]){const _0x59feb2=gTicker[noslash(_0x2b10b3[_0x44fbe5(0x24b)])];_0x28045e=_0x2b10b3[_0x44fbe5(0x276)]?0x1/_0x59feb2:_0x59feb2;}else _0x28045e=0x1;_0x392b7d[_0x44fbe5(0x239)]({'coin':_0x2b10b3[_0x44fbe5(0x27f)],'symbol':_0x2b10b3['symbol'],'price':_0x28045e,'number':Number(formatResult(_0x5d4213[_0x44fbe5(0x2bd)]-_0x2b10b3[_0x44fbe5(0x2bd)],0x8)),'basecoinvalue':_0x28045e*(_0x5d4213['number']-_0x2b10b3[_0x44fbe5(0x2bd)])});}}});if(_0x392b7d[_0x359946(0x27a)]>0x0&&!blockTransactionDetection){for(const _0x5de3b7 of _0x392b7d){if(config[_0x359946(0x2b5)]){logger[_0x359946(0x1dc)](_0x359946(0x35c)+_0x5de3b7[_0x359946(0x1de)]+_0x359946(0x2da)+lastFees[_0x359946(0x1a9)]);if(lastFees[_0x359946(0x1a9)]==0x0||Math['abs'](_0x5de3b7[_0x359946(0x1de)])>lastFees[_0x359946(0x1a9)]*0x3){if(config[_0x359946(0x2b5)]==_0x359946(0x202)){delete _0x5de3b7[_0x359946(0x24b)],delete _0x5de3b7[_0x359946(0x1de)];let _0x5eff34=[],_0xb087fc=[...config['liquidity']]||[],_0x1de57a=config[_0x359946(0x2f2)];_0xb087fc['sort']((_0x1fbab3,_0x454bc0)=>_0x1fbab3['date']>_0x454bc0[_0x359946(0x200)]?-0x1:_0x454bc0[_0x359946(0x200)]>_0x1fbab3['date']?0x1:0x0);const _0x4ba68d=getDate();if(_0xb087fc[0x0]){const _0x23e0d5=fns['parse'](_0xb087fc[0x0]['date'],'yyyy/MM/dd',new Date()),_0x4f195c=fns[_0x359946(0x35a)](_0x4ba68d,_0x359946(0x2b0),new Date());if(fns['isEqual'](_0x23e0d5,_0x4f195c)){_0x5eff34=_0xb087fc[0x0][_0x359946(0x2a8)];const _0x4e763f=_0x5eff34['find'](_0x31359a=>_0x31359a['coin']==_0x5de3b7[_0x359946(0x27f)]);_0x4e763f?(_0x4e763f['number']+=_0x5de3b7['number'],_0x4e763f[_0x359946(0x2bd)]==0x0&&(_0x5eff34=_0x5eff34[_0x359946(0x317)](_0xaf4b7a=>{const _0x397b8c=_0x359946;return _0xaf4b7a[_0x397b8c(0x27f)]!=_0x5de3b7[_0x397b8c(0x27f)];}))):_0x5eff34[_0x359946(0x239)](_0x5de3b7);const _0x1847a2=_0x1de57a['find'](_0x33e2b5=>_0x33e2b5[_0x359946(0x200)]==_0x4ba68d);_0x1847a2[_0x359946(0x2a8)]=_0x5eff34;}else _0x1de57a[_0x359946(0x239)]({'date':_0x4ba68d,'changes':[_0x5de3b7]});}const _0x1274b4=_0x1de57a[_0x359946(0x22e)](_0x45d914=>_0x45d914['date']==_0x4ba68d);if(_0x1274b4){let _0x131f56=!![];_0x1274b4[_0x359946(0x2a8)]['forEach'](_0x5b516a=>{const _0xeb05a0=_0x359946;if(_0x5b516a[_0xeb05a0(0x2bd)]!=0x0)_0x131f56=![];}),_0x131f56&&(_0x1de57a=_0x1de57a[_0x359946(0x317)](_0x2f1fad=>{const _0x1b2c44=_0x359946;return _0x2f1fad[_0x1b2c44(0x200)]!=_0x4ba68d;}));}let _0x3314f0=dbConfig['get']('bot')[_0x359946(0x22e)]({'botID':botID})[_0x359946(0x242)]();_0x3314f0&&(dbConfig['get'](_0x359946(0x354))[_0x359946(0x22e)]({'botID':botID})[_0x359946(0x2af)]({'liquidity':_0x1de57a})['write'](),config['liquidity']=_0x1de57a);logHistory(_0x359946(0x249),_0x359946(0x31d)+Math['abs'](_0x5de3b7[_0x359946(0x2bd)])+'\x20'+_0x5de3b7[_0x359946(0x27f)]+'\x20'+(_0x5de3b7[_0x359946(0x2bd)]>0x0?_0x359946(0x1a7):_0x359946(0x1a0))+_0x359946(0x35b)),proxyEmit(_0x359946(0x26b),emittedConfiguration());const _0x58194f=getNormalizedPerformance();emitPerformance(_0x58194f),getStartingBalances(_0x58194f),logger[_0x359946(0x1dc)]('Portfolio\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated');}else config['autoliquidity']==_0x359946(0x1d1)&&(config[_0x359946(0x27c)]?(await storeHeadless({'headless':![]}),logHistory(_0x359946(0x249),_0x359946(0x31d)+Math[_0x359946(0x27b)](_0x5de3b7['number'])+'\x20'+_0x5de3b7[_0x359946(0x27f)]+'\x20'+(_0x5de3b7[_0x359946(0x2bd)]>0x0?_0x359946(0x1a7):_0x359946(0x1a0))+_0x359946(0x302))):logger[_0x359946(0x1dc)](_0x359946(0x31d)+Math[_0x359946(0x27b)](_0x5de3b7['number'])+'\x20'+_0x5de3b7[_0x359946(0x27f)]+'\x20'+(_0x5de3b7['number']>0x0?_0x359946(0x1a7):_0x359946(0x1a0))+_0x359946(0x235)));}else logger['debug'](_0x359946(0x2e4)+Math[_0x359946(0x27b)](_0x5de3b7[_0x359946(0x2bd)])+'\x20'+_0x5de3b7[_0x359946(0x27f)]+'\x20'+(_0x5de3b7[_0x359946(0x2bd)]>0x0?_0x359946(0x1a7):'removed'));}else logger[_0x359946(0x1dc)]('Portfolio\x20change\x20detected:\x20'+Math[_0x359946(0x27b)](_0x5de3b7[_0x359946(0x2bd)])+'\x20'+_0x5de3b7['coin']+'\x20'+(_0x5de3b7[_0x359946(0x2bd)]>0x0?_0x359946(0x1a7):_0x359946(0x1a0))+_0x359946(0x2a9));}currentCoins=_0x152a9c,currentCoinsAll=_0x15d997;}}catch(_0x1771c5){if(!exchangeStopped)await handleError(_0x1771c5,_0x359946(0x20b));}transactionDetectionOngoing=![];}async function watchTransactions(){await sleep(0x14*0x3e8);while(!![]){!botPaused&&!blockTransactionDetection&&coinsLoaded?(detectLiquidityChange(),await sleep(watchTransactionsInterval)):await sleep(0x3e8);}}async function loadSymbols(){const _0x528ae2=_0x13a2d5;try{markets=await exchange[_0x528ae2(0x254)](!![]),allSymbols=[],Object[_0x528ae2(0x294)](markets)[_0x528ae2(0x274)](_0x26d1cb=>{const _0x4df527=_0x528ae2;_0x26d1cb[0x1][_0x4df527(0x1ea)]&&_0x26d1cb[0x1][_0x4df527(0x2bf)]&&allSymbols[_0x4df527(0x239)](_0x26d1cb[0x0]);});}catch(_0x43830f){markets?logger['debug'](_0x528ae2(0x30a)+_0x43830f['toString']()):(loading[_0x528ae2(0x26c)]=!![],emitLoadingProgress(),_0x43830f['toString']()['toLowerCase']()[_0x528ae2(0x24a)](_0x528ae2(0x25d))||_0x43830f[_0x528ae2(0x260)]()[_0x528ae2(0x2be)]()[_0x528ae2(0x24a)](_0x528ae2(0x31c))?logHistory(_0x528ae2(0x236),_0x528ae2(0x351)):handleErrorNoStop(_0x43830f,_0x528ae2(0x353),!![]),logHistory(_0x528ae2(0x236),'Failed\x20to\x20load\x20market\x20data\x20-\x20bot\x20not\x20started'),logHistory(_0x528ae2(0x236),'Pausing\x20for\x20'+loadCoinsRetryInterval/0xea60+'\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again'),logger[_0x528ae2(0x1dc)]('Error\x20details:',_0x43830f),botPaused=!![],await sleep(loadCoinsRetryInterval),restartBot());}}function validateSymbols(_0x293ddc){const _0x2054fc=_0x13a2d5;let _0x32b14c=[];return _0x293ddc[_0x2054fc(0x274)](_0x4c38c2=>{const _0x53c03b=_0x2054fc;!allSymbols['includes'](_0x4c38c2)?logHistory(_0x53c03b(0x236),_0x53c03b(0x19e)+_0x4c38c2+_0x53c03b(0x2c9)):_0x32b14c['push'](_0x4c38c2);}),_0x32b14c;}async function initclient(){const _0x1f3ad8=_0x13a2d5;proxyEmit(_0x1f3ad8(0x26b),emittedConfiguration()),proxyEmit(_0x1f3ad8(0x282),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x1f3ad8(0x2fd),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x3468a0=getNormalizedPerformance();emitPerformance(_0x3468a0),getStartingBalances(_0x3468a0);}async function toggleBotMode(){const _0x30ad3f=_0x13a2d5;let _0xcb6b56=dbConfig[_0x30ad3f(0x1be)]('bot')[_0x30ad3f(0x22e)]({'botID':botID})['value']();if(_0xcb6b56){const _0x4321a4=!_0xcb6b56[_0x30ad3f(0x27c)];dbConfig[_0x30ad3f(0x1be)](_0x30ad3f(0x354))[_0x30ad3f(0x22e)]({'botID':botID})[_0x30ad3f(0x2af)]({'headless':_0x4321a4})[_0x30ad3f(0x23d)](),config[_0x30ad3f(0x27c)]=_0x4321a4,proxyEmit(_0x30ad3f(0x26b),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x29320b=_0x13a2d5;process[_0x29320b(0x295)]({'updatebotmanager':!![]},_0x252921=>{}),logger[_0x29320b(0x1dc)](_0x29320b(0x1cd)+config[_0x29320b(0x27c)]);}async function loadCoins(_0x32831d){const _0x50f2c5=_0x13a2d5;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x1e40f2,_0x18d7a1=0x0,_0x4f7b94=0x0;_0x32831d[_0x50f2c5(0x274)](_0x1d174d=>{const _0x1dfb2d=_0x50f2c5;loading[_0x1dfb2d(0x209)][_0x1dfb2d(0x239)](_0x1d174d);}),loadingCanceled=![];let _0x3b808=![];while(_0x1e40f2!=_0x32831d['length']+maxLoadingProgress){_0x1e40f2=loadingProgress,_0x32831d['forEach'](_0x537efb=>{const _0x29c47c=_0x50f2c5;if(gTicker[noslash(_0x537efb)]){loading['remainingSymbols']=loading[_0x29c47c(0x209)]['filter'](_0x58dc78=>_0x58dc78!=_0x537efb);if(!watchedSymbols[_0x29c47c(0x24a)](_0x537efb))watchedSymbols['push'](_0x537efb);_0x1e40f2++;}}),loading[_0x50f2c5(0x1d7)]=Math[_0x50f2c5(0x1b6)](_0x1e40f2/(_0x32831d[_0x50f2c5(0x27a)]+maxLoadingProgress)*0x64);loading[_0x50f2c5(0x1d7)]!=0x64&&(_0x4f7b94>0x1e*0x5&&(loading[_0x50f2c5(0x290)]=!![],emitLoadingProgress()),_0x4f7b94>0x78*0x5&&!_0x3b808&&(_0x3b808=!![],logHistory(_0x50f2c5(0x236),_0x50f2c5(0x26d)+loading[_0x50f2c5(0x209)][_0x50f2c5(0x281)](',\x20')+'\x20-\x20bot\x20not\x20started'),logHistory(_0x50f2c5(0x236),_0x50f2c5(0x1aa)+loadCoinsRetryInterval/0xea60+_0x50f2c5(0x261)),loadingCanceled=!![],await sleep(loadCoinsRetryInterval),restartBot()));if(loadingCanceled){loading[_0x50f2c5(0x26c)]=!![],emitLoadingProgress();break;}else _0x18d7a1!=loading[_0x50f2c5(0x1d7)]&&(_0x18d7a1=loading[_0x50f2c5(0x1d7)],emitLoadingProgress()),_0x4f7b94++,await sleep(0xc8);}_0x1e40f2==_0x32831d[_0x50f2c5(0x27a)]+maxLoadingProgress&&(coinsLoaded=!![],process[_0x50f2c5(0x295)]({'status':_0x50f2c5(0x212),'live':_0x50f2c5(0x1f1)},_0x198a1c=>{}),_0x3b808&&logHistory(_0x50f2c5(0x249),_0x50f2c5(0x1ef)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x4ed334=_0x13a2d5;proxyEmit('configuration',{...emittedConfiguration(),'configstate':_0x4ed334(0x328)});}function emitLoadingProgress(){const _0x39a604=_0x13a2d5;proxyEmit(_0x39a604(0x2de),loading);}async function getFiat(){const _0x42b699=_0x13a2d5;let _0x5c9a42=gTicker[stablecoins[_0x42b699(0x28b)]['coin']],_0x360d37=gTicker[stablecoins[_0x42b699(0x303)]['coin']];return{'eur':Number(_0x5c9a42),'usd':Number(_0x360d37)};}function capitalize(_0x28405b){const _0x5537ed=_0x13a2d5;return _0x28405b[_0x5537ed(0x2ad)](0x0,0x1)['toUpperCase']()+_0x28405b['substring'](0x1);}function supportedExchanges(){const _0x46ed58=_0x13a2d5,_0x1411b9=['ws',_0x46ed58(0x332),_0x46ed58(0x1db),_0x46ed58(0x2dc),_0x46ed58(0x207),_0x46ed58(0x1d5),_0x46ed58(0x32e),'fetchOpenOrders',_0x46ed58(0x2cb)];let _0x3bed75=[],_0x1f289f=[],_0x25d2b3=ccxt['pro'][_0x46ed58(0x282)];_0x25d2b3[_0x46ed58(0x274)](_0x7c8e12=>{const _0x4c864b=_0x46ed58;try{const _0x2410ed=new ccxt[(_0x4c864b(0x1f5))][_0x7c8e12]();_0x1f289f[_0x4c864b(0x239)](_0x2410ed);}catch(_0x5475eb){}}),_0x1f289f[_0x46ed58(0x274)](_0x4355f9=>{const _0x3bb79d=_0x46ed58;let _0x23e5d2=0x0;_0x1411b9[_0x3bb79d(0x274)](_0x45369c=>{const _0x123811=_0x3bb79d;_0x45369c in _0x4355f9['has']&&_0x4355f9[_0x123811(0x22c)][_0x45369c]&&_0x23e5d2++;}),_0x23e5d2==_0x1411b9[_0x3bb79d(0x27a)]&&_0x3bed75[_0x3bb79d(0x239)](capitalize(_0x4355f9['id']));});let _0x5ce91f=[];return _0x25d2b3[_0x46ed58(0x274)](_0x504bf5=>{const _0x33d0ba=_0x46ed58;_0x504bf5=capitalize(_0x504bf5);if(!_0x3bed75[_0x33d0ba(0x24a)](_0x504bf5))_0x5ce91f[_0x33d0ba(0x239)](_0x504bf5);}),_0x3bed75;}function setStartDatePerformance(){const _0x53224f=_0x13a2d5;if(config&&config[_0x53224f(0x2f2)][0x0]['changes'][_0x53224f(0x27a)]!=0x0){const _0x1fb927=config[_0x53224f(0x2f2)][0x0][_0x53224f(0x2a8)];dbPerformance[_0x53224f(0x1be)](_0x53224f(0x30d))['find']({'date':config[_0x53224f(0x244)]})[_0x53224f(0x2af)]({'coins':_0x1fb927})['write']();}}async function recreateCoinResults(){const _0x21d083=_0x13a2d5;recreationNeeded=![];let _0x4f3687,_0x4c7a2b=[];try{for(const _0x299d51 of currentCoins){if(_0x299d51[_0x21d083(0x27f)]!=config[_0x21d083(0x204)]){let _0x248ffc=0x0,_0x4af465,_0xb2b5eb;_0x4f3687=await getAllEventOrders(_0x299d51[_0x21d083(0x24b)]);if(_0x4f3687[_0x21d083(0x27a)]>0x0)_0x4f3687[_0x21d083(0x274)](_0x5b0ee8=>{const _0x36472a=_0x21d083,_0x97e336=_0x299d51[_0x36472a(0x24b)]['includes'](config[_0x36472a(0x204)]+'/');_0x4c7a2b['push']({'datetime':_0x5b0ee8['datetime'],'coin':_0x299d51[_0x36472a(0x27f)],'symbol':_0x299d51[_0x36472a(0x24b)],'side':_0x5b0ee8[_0x36472a(0x2e2)],'reverse':_0x97e336,'amount':formatResult(_0x5b0ee8[_0x36472a(0x343)],0x8),'filled':formatResult(_0x5b0ee8[_0x36472a(0x343)],0x8),'price':formatResult(_0x5b0ee8[_0x36472a(0x225)],0x8)}),_0x248ffc=_0x5b0ee8[_0x36472a(0x2e2)]==_0x36472a(0x299)?_0x248ffc+_0x5b0ee8[_0x36472a(0x343)]:_0x248ffc-_0x5b0ee8[_0x36472a(0x343)];if(!_0xb2b5eb)_0xb2b5eb=_0x5b0ee8[_0x36472a(0x225)];});_0x4af465=_0x299d51[_0x21d083(0x2bd)]-_0x248ffc;let _0x24023e;config[_0x21d083(0x2f2)][_0x21d083(0x274)](_0x4159cc=>{const _0x2a4beb=_0x21d083;!_0x24023e&&(_0x24023e=_0x4159cc[_0x2a4beb(0x2a8)]['find'](_0x227797=>_0x227797['coin']==_0x299d51[_0x2a4beb(0x27f)]),_0x24023e&&(_0x4af465=_0x24023e[_0x2a4beb(0x2bd)],_0xb2b5eb=_0x24023e[_0x2a4beb(0x225)]));});let _0x19256f=dbCoinResults[_0x21d083(0x1be)](_0x21d083(0x1f0))['find']({'coin':_0x299d51['coin']})[_0x21d083(0x242)]();_0x19256f={'coin':_0x299d51[_0x21d083(0x27f)],'number':_0x4af465,'breakeven':_0xb2b5eb,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x21d083(0x1be)]('coins')[_0x21d083(0x22e)]({'coin':_0x299d51[_0x21d083(0x27f)]})['assign'](_0x19256f)['write']();}}_0x4c7a2b[_0x21d083(0x22a)]((_0x126e95,_0x3c963b)=>_0x126e95[_0x21d083(0x1c6)]>_0x3c963b[_0x21d083(0x1c6)]?0x1:_0x3c963b['datetime']>_0x126e95['datetime']?-0x1:0x0);let _0x442d1d=0x0;for(let _0x3d26d5 of _0x4c7a2b){await updateCoinResults(_0x3d26d5,!![]);}}catch(_0x683f65){await handleError(_0x683f65,'recreateCoinResults()');}}async function getAllEventOrders(_0x570162){const _0x51f58a=_0x13a2d5;let _0x24cdce=[],_0x587c95=dbLogs[_0x51f58a(0x1be)](_0x51f58a(0x278))[_0x51f58a(0x317)](_0xa5bbf4=>{const _0x3714a0=_0x51f58a,_0x412183=_0xa5bbf4[_0x3714a0(0x2c2)][_0x3714a0(0x2be)]();return _0x412183[_0x3714a0(0x24a)](_0x570162[_0x3714a0(0x2be)]())&&(_0x412183[_0x3714a0(0x24a)]('market')&&_0x412183[_0x3714a0(0x24a)]('order')||_0x412183[_0x3714a0(0x24a)](_0x3714a0(0x343))&&_0x412183['includes']('order'));})[_0x51f58a(0x2eb)](_0x51f58a(0x298))[_0x51f58a(0x242)]();return _0x587c95['forEach'](_0x5ec812=>{const _0x1219d1=_0x51f58a,_0x2cd8b4=_0x5ec812[_0x1219d1(0x2c2)]['includes'](_0x1219d1(0x2f4))?_0x1219d1(0x2f4):_0x1219d1(0x299),_0xde5dd5=/#([0-9]|\.)+\s/i,_0x43912f=Number(_0xde5dd5[_0x1219d1(0x2ef)](_0x5ec812[_0x1219d1(0x2c2)])[0x0][_0x1219d1(0x31e)](0x1)),_0x4e6323=/@([0-9]|\.)+$/i,_0x51ab41=Number(_0x4e6323[_0x1219d1(0x2ef)](_0x5ec812['event'])[0x0][_0x1219d1(0x31e)](0x1));_0x24cdce[_0x1219d1(0x239)]({'datetime':_0x5ec812[_0x1219d1(0x298)],'coin':symbolToCoin(_0x570162),'symbol':_0x570162,'side':_0x2cd8b4,'amount':_0x43912f,'filled':_0x43912f,'price':_0x51ab41});}),_0x24cdce;}async function validate24hChanges(){const _0x3d7115=_0x13a2d5;for(const _0xeb2fe9 of currentCoins){if(_0xeb2fe9[_0x3d7115(0x27f)]!=config[_0x3d7115(0x204)]){let _0xcf965b;_0xeb2fe9[_0x3d7115(0x276)]?_0xcf965b=formatResult((0x1/(gChange[_0xeb2fe9[_0x3d7115(0x24b)]]/0x64+0x1)-0x1)*0x64,0x3):_0xcf965b=gChange[_0xeb2fe9[_0x3d7115(0x24b)]],_0xcf965b<config[_0x3d7115(0x1a8)]&&(logHistory('error',_0xeb2fe9['coin']+_0x3d7115(0x210)+_0xcf965b+'%'),logHistory(_0x3d7115(0x236),'Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses'),logHistory(_0x3d7115(0x236),_0x3d7115(0x315)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x23017f,_0x4680a6){const _0x4a956c=_0x13a2d5;if(!_0x23017f)return!![];const _0x38f39d=_0x4680a6[_0x4a956c(0x357)]('.'),_0x52f3b5=_0x23017f[_0x4a956c(0x357)]('.');for(var _0x397971=0x0;_0x397971<_0x52f3b5[_0x4a956c(0x27a)];_0x397971++){const _0xc8de47=~~_0x52f3b5[_0x397971],_0x5292ac=~~_0x38f39d[_0x397971];if(_0xc8de47<_0x5292ac)return!![];if(_0xc8de47>_0x5292ac)return![];}return![];}async function oneTimeMigration(){const _0x59d7c6=_0x13a2d5;let _0x40f17b=dbLogs['get'](_0x59d7c6(0x1f3))[_0x59d7c6(0x242)]();if(isOlderVersion(_0x40f17b,'2.3.5')){let _0x1bb4f0=[];const _0x3dae1c=dbLogs[_0x59d7c6(0x1be)](_0x59d7c6(0x278))['value']();_0x3dae1c[_0x59d7c6(0x274)](_0x240972=>{const _0x16007f=_0x59d7c6;_0x1bb4f0['push']({'time':_0x240972[_0x16007f(0x298)],'type':_0x240972['type'],'event':_0x240972['event']});}),dbLogs[_0x59d7c6(0x1be)](_0x59d7c6(0x278))[_0x59d7c6(0x2af)](_0x1bb4f0)[_0x59d7c6(0x23d)]();}let _0x212a72=dbConfig[_0x59d7c6(0x1be)](_0x59d7c6(0x1f3))['value']();if(isOlderVersion(_0x212a72,_0x59d7c6(0x333))){let _0x1871a5=dbConfig[_0x59d7c6(0x1be)]('bot')['find']({'botID':botID})[_0x59d7c6(0x242)]();if(_0x1871a5){let _0x2db176=[];_0x1871a5[_0x59d7c6(0x324)][_0x59d7c6(0x274)](_0x239be0=>{const _0x4631f9=_0x59d7c6;_0x2db176[_0x4631f9(0x239)]({'coin':_0x239be0['coin'],'number':_0x239be0[_0x4631f9(0x1c3)],'price':_0x239be0[_0x4631f9(0x1b2)]}),delete _0x239be0['startnumber'],delete _0x239be0[_0x4631f9(0x1b2)];});if(_0x2db176[_0x59d7c6(0x27a)]!==0x0)fs[_0x59d7c6(0x32b)](configbackuppath+(_0x59d7c6(0x2dd)+botID+'.json'),JSON['stringify'](_0x2db176,null,0x4),function(_0x4690e9){if(_0x4690e9){}});const _0x48edec=(_0x5a3ceb,_0x2d8b0d)=>{const _0x2dc538=_0x59d7c6;let _0x36c41a=[];_0x2d8b0d[_0x2dc538(0x274)](_0xc2eeb6=>{const _0x51de28=_0x2dc538,_0x3d374c=_0x5a3ceb['find'](_0x3a63ec=>_0x3a63ec[_0x51de28(0x27f)]==_0xc2eeb6[_0x51de28(0x27f)]);if(!_0x3d374c)_0x36c41a[_0x51de28(0x239)](_0xc2eeb6);});let _0xf35306=[];return _0x5a3ceb[_0x2dc538(0x274)](_0x481d02=>{const _0x142720=_0x2dc538,_0x341c1b=_0x2d8b0d['find'](_0x31cdad=>_0x31cdad['coin']==_0x481d02[_0x142720(0x27f)]);if(!_0x341c1b||_0x341c1b[_0x142720(0x2bd)]==0x0&&_0x481d02[_0x142720(0x2bd)]!=0x0)_0xf35306[_0x142720(0x239)](_0x481d02);}),{'missingDay1':_0x36c41a,'notInDay2':_0xf35306};},_0x370c13=dbPerformance[_0x59d7c6(0x1be)]('data')[_0x59d7c6(0x203)]()['value']();if(_0x370c13['length']>0x1){const {missingDay1:_0x234491,notInDay2:_0x3ca4fc}=_0x48edec(_0x2db176,_0x370c13[0x1][_0x59d7c6(0x1f0)]);_0x2db176=[..._0x2db176,..._0x234491],_0x3ca4fc['forEach'](_0x24103f=>{const _0x5e1f5d=_0x59d7c6;let _0x1640da=_0x2db176[_0x5e1f5d(0x2cf)](_0x4d2a7d=>_0x4d2a7d[_0x5e1f5d(0x27f)]==_0x24103f[_0x5e1f5d(0x27f)]);_0x1640da!=-0x1&&_0x2db176['splice'](_0x1640da,0x1);});}_0x2db176['sort']((_0x142303,_0x1c58ab)=>_0x142303[_0x59d7c6(0x27f)]>_0x1c58ab[_0x59d7c6(0x27f)]?0x1:_0x1c58ab[_0x59d7c6(0x27f)]>_0x142303[_0x59d7c6(0x27f)]?-0x1:0x0);let _0x358daf=[{'date':_0x1871a5[_0x59d7c6(0x244)],'changes':_0x2db176}];_0x370c13[_0x59d7c6(0x27a)]>0x2&&_0x370c13[_0x59d7c6(0x274)]((_0x18e231,_0x4baa70)=>{const _0x2094c4=_0x59d7c6;if(_0x4baa70>0x0&&_0x4baa70<_0x370c13[_0x2094c4(0x27a)]-0x1){const {missingDay1:_0x54840e,notInDay2:_0x461c40}=_0x48edec(_0x370c13[_0x4baa70]['coins'],_0x370c13[_0x4baa70+0x1][_0x2094c4(0x1f0)]);_0x2db176=[],(_0x54840e[_0x2094c4(0x27a)]!=0x0||_0x461c40[_0x2094c4(0x27a)]!=0x0)&&(_0x54840e[_0x2094c4(0x27a)]!=0x0&&_0x2db176[_0x2094c4(0x239)](..._0x54840e),_0x461c40['length']!=0x0&&(_0x461c40['forEach'](_0x3054d6=>{const _0x2b51b6=_0x2094c4;_0x3054d6[_0x2b51b6(0x2bd)]=-_0x3054d6['number'];}),_0x2db176['push'](..._0x461c40)),_0x2db176[_0x2094c4(0x22a)]((_0x1827c3,_0x23c891)=>_0x1827c3[_0x2094c4(0x27f)]>_0x23c891['coin']?0x1:_0x23c891[_0x2094c4(0x27f)]>_0x1827c3[_0x2094c4(0x27f)]?-0x1:0x0),_0x358daf[_0x2094c4(0x239)]({'date':_0x370c13[_0x4baa70+0x1][_0x2094c4(0x200)],'changes':_0x2db176}));}}),dbConfig['get'](_0x59d7c6(0x354))[_0x59d7c6(0x22e)]({'botID':botID})[_0x59d7c6(0x2af)]({..._0x1871a5,'liquidity':_0x358daf})['write']();}}if(isOlderVersion(_0x212a72,_0x59d7c6(0x21c))){let _0x45f914=dbConfig['get'](_0x59d7c6(0x354))[_0x59d7c6(0x22e)]({'botID':botID})[_0x59d7c6(0x242)]();if(_0x45f914){const _0x29d9c1=_0x45f914[_0x59d7c6(0x27d)],_0x55bfc9=_0x29d9c1?capitalize(_0x29d9c1):_0x59d7c6(0x2fa);dbConfig['get'](_0x59d7c6(0x354))[_0x59d7c6(0x22e)]({'botID':botID})['assign']({'exchange':_0x55bfc9})[_0x59d7c6(0x23d)]();}}if(isOlderVersion(_0x212a72,'2.6.22')){let _0x58d7b6=dbConfig[_0x59d7c6(0x1be)](_0x59d7c6(0x354))['find']({'botID':botID})[_0x59d7c6(0x242)]();if(_0x58d7b6){const _0x24e704=_0x58d7b6['marketcapEnabled'],_0x2e2524=_0x24e704?_0x59d7c6(0x334):![];dbConfig[_0x59d7c6(0x1be)](_0x59d7c6(0x354))[_0x59d7c6(0x22e)]({'botID':botID})[_0x59d7c6(0x2af)]({'marketcapEnabled':_0x2e2524})[_0x59d7c6(0x23d)]();}}if(isOlderVersion(_0x212a72,_0x59d7c6(0x285))){let _0x5806d3=dbConfig['get']('bot')['find']({'botID':botID})[_0x59d7c6(0x242)]();if(_0x5806d3){const _0x580553=_0x5806d3[_0x59d7c6(0x2b5)],_0x1485d8=_0x580553?_0x59d7c6(0x202):![];dbConfig['get'](_0x59d7c6(0x354))[_0x59d7c6(0x22e)]({'botID':botID})[_0x59d7c6(0x2af)]({'autoliquidity':_0x1485d8})[_0x59d7c6(0x23d)]();}}let _0x3da6ae=dbPerformance[_0x59d7c6(0x1be)](_0x59d7c6(0x1f3))['value']();isOlderVersion(_0x3da6ae,_0x59d7c6(0x333))&&setStartDatePerformance();let _0x458cbd=dbCoinResults['get'](_0x59d7c6(0x1f3))[_0x59d7c6(0x242)]();if(isOlderVersion(_0x458cbd,_0x59d7c6(0x224))){let _0x3ec96c=dbCoinResults[_0x59d7c6(0x1be)](_0x59d7c6(0x1f0))[_0x59d7c6(0x242)]();if(_0x3ec96c[_0x59d7c6(0x27a)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x2b75db=_0x13a2d5;dbConfig[_0x2b75db(0x344)](_0x2b75db(0x1f3),serverversion)[_0x2b75db(0x23d)](),dbPerformance[_0x2b75db(0x344)](_0x2b75db(0x1f3),serverversion)[_0x2b75db(0x23d)](),dbLogs[_0x2b75db(0x344)](_0x2b75db(0x1f3),serverversion)['write'](),dbCoinResults['set'](_0x2b75db(0x1f3),serverversion)[_0x2b75db(0x23d)]();}function getConfiguration(_0x52114b){const _0x5d5a89=_0x13a2d5;let _0x2e105e=dbConfig[_0x5d5a89(0x1be)](_0x5d5a89(0x354))[_0x5d5a89(0x22e)]({'botID':_0x52114b})[_0x5d5a89(0x242)]();if(_0x2e105e){let _0x1ddf6d=![];typeof _0x2e105e[_0x5d5a89(0x233)]==_0x5d5a89(0x2b2)&&(_0x2e105e={..._0x2e105e,'threshold':Number(_0x2e105e[_0x5d5a89(0x233)])},_0x1ddf6d=!![]),_0x2e105e['change24h']==undefined&&(_0x2e105e={..._0x2e105e,'change24h':-0x14},_0x1ddf6d=!![]),_0x2e105e[_0x5d5a89(0x326)]==undefined&&(_0x2e105e={..._0x2e105e,'fiat':'USD'},_0x1ddf6d=!![]),_0x2e105e[_0x5d5a89(0x331)]==undefined&&(_0x2e105e={..._0x2e105e,'onepagemode':settings[_0x5d5a89(0x331)]},_0x1ddf6d=!![]),_0x2e105e[_0x5d5a89(0x1e2)]==undefined&&(_0x2e105e={..._0x2e105e,'colorscheme':_0x5d5a89(0x323)},_0x1ddf6d=!![]),_0x2e105e[_0x5d5a89(0x2b5)]==undefined&&(_0x2e105e={..._0x2e105e,'autoliquidity':_0x5d5a89(0x202)},_0x1ddf6d=!![]),_0x2e105e[_0x5d5a89(0x270)]==undefined&&(_0x2e105e={..._0x2e105e,'marketcapApi':settings[_0x5d5a89(0x270)]?!![]:![]},_0x1ddf6d=!![]),_0x2e105e[_0x5d5a89(0x2c6)]==undefined&&(_0x2e105e={..._0x2e105e,'marketcapEnabled':![]},_0x1ddf6d=!![]),_0x1ddf6d&&(_0x2e105e={'botID':_0x2e105e['botID'],'exchange':_0x2e105e['exchange'],'apiKey':_0x2e105e[_0x5d5a89(0x356)],'apiSecret':_0x2e105e[_0x5d5a89(0x35f)],'apiPassword':_0x2e105e['apiPassword'],'basecoin':_0x2e105e[_0x5d5a89(0x204)],'botname':_0x2e105e[_0x5d5a89(0x234)],'showname':_0x2e105e['showname'],'threshold':_0x2e105e[_0x5d5a89(0x233)],'ordertype':_0x2e105e[_0x5d5a89(0x29d)],'timeout':_0x2e105e[_0x5d5a89(0x290)],'fiat':_0x2e105e['fiat'],'startdate':_0x2e105e['startdate'],'recreate':_0x2e105e['recreate'],'timeshift':_0x2e105e[_0x5d5a89(0x338)],'onepagemode':_0x2e105e[_0x5d5a89(0x331)],'headless':_0x2e105e[_0x5d5a89(0x27c)],'cooldown':_0x2e105e[_0x5d5a89(0x28d)],'change24h':_0x2e105e[_0x5d5a89(0x1a8)],'emojibuy':_0x2e105e[_0x5d5a89(0x248)],'emojisell':_0x2e105e[_0x5d5a89(0x1cb)],'colorscheme':_0x2e105e['colorscheme'],'marketcapApi':_0x2e105e[_0x5d5a89(0x270)],'marketcapEnabled':_0x2e105e[_0x5d5a89(0x2c6)],'portfolio':_0x2e105e[_0x5d5a89(0x324)],'autoliquidity':_0x2e105e['autoliquidity'],'liquidity':_0x2e105e[_0x5d5a89(0x2f2)],'openOrders':_0x2e105e[_0x5d5a89(0x240)]},dbConfig[_0x5d5a89(0x1be)](_0x5d5a89(0x354))[_0x5d5a89(0x1b5)]()[_0x5d5a89(0x23d)](),dbConfig[_0x5d5a89(0x1be)](_0x5d5a89(0x354))[_0x5d5a89(0x239)](_0x2e105e)[_0x5d5a89(0x23d)]());}else _0x2e105e={'botID':_0x52114b,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x5d5a89(0x259)+_0x52114b,'showname':![],'threshold':0x3,'ordertype':_0x5d5a89(0x345),'timeout':0x14,'fiat':_0x5d5a89(0x348),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x5d5a89(0x338)],'onepagemode':settings[_0x5d5a89(0x331)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':'red_yellow_blue','marketcapApi':settings[_0x5d5a89(0x270)]?!![]:![],'marketcapEnabled':![],'portfolio':[],'autoliquidity':_0x5d5a89(0x202),'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x2e105e;}function emittedConfiguration(){const _0x348280=_0x13a2d5;let _0x4b77d5;if(config[_0x348280(0x356)]=='')_0x4b77d5={...config,'configstate':_0x348280(0x29f)};else config[_0x348280(0x356)]==_0x348280(0x2a2)?_0x4b77d5={...config,'configstate':_0x348280(0x1bd)}:(_0x4b77d5={...config,'apiKey':'************','apiSecret':_0x348280(0x307)},config['apiPassword']&&(_0x4b77d5[_0x348280(0x1f8)]=_0x348280(0x307)));return _0x4b77d5['enableFiatToggle']=enableFiatToggle,_0x4b77d5;}function getSettings(){const _0x29ba79=_0x13a2d5;return dbSettings[_0x29ba79(0x1be)](_0x29ba79(0x34d))[_0x29ba79(0x242)]();}function getSecure(){const _0x3675c5=_0x13a2d5;return dbSecure[_0x3675c5(0x1be)](_0x3675c5(0x2ca))[_0x3675c5(0x242)]()||{};}function updateTimeshift(_0x10a5ab){const _0x4737f6=_0x13a2d5;let _0x23b4a1=dbConfig[_0x4737f6(0x1be)]('bot')['find']({'botID':botID})[_0x4737f6(0x242)]();_0x23b4a1&&dbConfig[_0x4737f6(0x1be)](_0x4737f6(0x354))[_0x4737f6(0x22e)]({'botID':botID})['assign']({'timeshift':_0x10a5ab})['write'](),config[_0x4737f6(0x338)]=_0x10a5ab,proxyEmit('configuration',emittedConfiguration());}function updateOnepagemode(_0x57a3ec){const _0x131101=_0x13a2d5;let _0x569eb6=dbConfig['get'](_0x131101(0x354))[_0x131101(0x22e)]({'botID':botID})[_0x131101(0x242)]();_0x569eb6&&dbConfig[_0x131101(0x1be)]('bot')[_0x131101(0x22e)]({'botID':botID})[_0x131101(0x2af)]({'onepagemode':_0x57a3ec})[_0x131101(0x23d)](),config[_0x131101(0x331)]=_0x57a3ec,proxyEmit('configuration',emittedConfiguration());}function updateMarketcapApi(_0x26e2a9){const _0x3f984c=_0x13a2d5,_0x1ce9f2=_0x26e2a9?!![]:![];let _0x210b26=dbConfig['get'](_0x3f984c(0x354))[_0x3f984c(0x22e)]({'botID':botID})['value']();_0x210b26&&dbConfig[_0x3f984c(0x1be)]('bot')[_0x3f984c(0x22e)]({'botID':botID})[_0x3f984c(0x2af)]({'marketcapApi':_0x1ce9f2})['write'](),config[_0x3f984c(0x270)]=_0x1ce9f2,getMarketCap(),proxyEmit(_0x3f984c(0x26b),emittedConfiguration());}async function storeConfiguration(_0x322ee2){const _0x42e86a=_0x13a2d5;logger[_0x42e86a(0x1dc)](_0x42e86a(0x2a3));if(pidBalances)clearTimeout(pidBalances);setBlockTransactionDetection(!![]);let _0x11b068=![],_0x25fbc5=![],_0x4692d4=[];_0x322ee2[_0x42e86a(0x324)][_0x42e86a(0x274)](_0x2e3074=>{const _0x219a9c=_0x42e86a;if(!_0x2e3074[_0x219a9c(0x23c)]&&_0x2e3074[_0x219a9c(0x27f)]!=_0x322ee2['basecoin'])_0x4692d4[_0x219a9c(0x239)](_0x2e3074['symbol']);}),_0x4692d4[_0x42e86a(0x274)](_0x2f0b70=>{const _0x2cbeb1=_0x42e86a,_0x5fc416=currentCoins[_0x2cbeb1(0x22e)](_0x5c655e=>_0x5c655e[_0x2cbeb1(0x24b)]==_0x2f0b70);!_0x5fc416&&(_0x11b068=!![]);}),currentCoins[_0x42e86a(0x274)](_0xd6ba0c=>{const _0x307ff7=_0x42e86a;if(_0xd6ba0c[_0x307ff7(0x27f)]!=config[_0x307ff7(0x204)]){const _0x58d1db=_0x4692d4['find'](_0xe0fd27=>_0xe0fd27==_0xd6ba0c[_0x307ff7(0x24b)]);!_0x58d1db&&(_0x11b068=!![]);}}),_0x322ee2[_0x42e86a(0x324)][_0x42e86a(0x274)](_0x5bc627=>{const _0x4b22c3=_0x42e86a,_0x2c0f15=config[_0x4b22c3(0x324)][_0x4b22c3(0x22e)](_0x507f9=>_0x507f9[_0x4b22c3(0x27f)]==_0x5bc627['coin']);if(_0x2c0f15&&_0x5bc627[_0x4b22c3(0x2a6)]!=_0x2c0f15[_0x4b22c3(0x2a6)])_0x25fbc5=!![];});let _0x563d19=dbConfig[_0x42e86a(0x1be)](_0x42e86a(0x354))[_0x42e86a(0x22e)]({'botID':botID})[_0x42e86a(0x242)]();_0x322ee2={..._0x322ee2,'apiKey':decryptRSA(secure[_0x42e86a(0x2e3)],_0x322ee2['apiKey']),'apiSecret':decryptRSA(secure[_0x42e86a(0x2e3)],_0x322ee2[_0x42e86a(0x35f)])};_0x322ee2[_0x42e86a(0x1f8)]&&(_0x322ee2[_0x42e86a(0x1f8)]=decryptRSA(secure[_0x42e86a(0x2e3)],_0x322ee2[_0x42e86a(0x1f8)]));let _0x4e14fd=![];if(_0x563d19){_0x322ee2[_0x42e86a(0x356)]==_0x42e86a(0x307)?_0x322ee2[_0x42e86a(0x356)]=config['apiKey']:_0x4e14fd=!![];_0x322ee2[_0x42e86a(0x35f)]==_0x42e86a(0x307)?_0x322ee2[_0x42e86a(0x35f)]=config[_0x42e86a(0x35f)]:_0x4e14fd=!![];if(_0x322ee2[_0x42e86a(0x1f8)]==_0x42e86a(0x307))_0x322ee2['apiPassword']=config['apiPassword'];else{if(_0x322ee2[_0x42e86a(0x1f8)])_0x4e14fd=!![];}dbConfig[_0x42e86a(0x1be)](_0x42e86a(0x354))[_0x42e86a(0x22e)]({'botID':botID})[_0x42e86a(0x2af)](_0x322ee2)[_0x42e86a(0x23d)]();}else dbConfig[_0x42e86a(0x1be)]('bot')[_0x42e86a(0x239)](_0x322ee2)['write'](),_0x4e14fd=!![],process[_0x42e86a(0x295)]({'status':_0x42e86a(0x212),'live':_0x42e86a(0x1f1)},_0x576696=>{});process[_0x42e86a(0x295)]({'botname':_0x322ee2[_0x42e86a(0x234)]},_0x454ebd=>{}),config={..._0x322ee2},updateBotManager(),proxyEmit('configuration-stored'),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x4e14fd)!_0x563d19?await reset(!![]):getBalances();else _0x11b068||_0x25fbc5?await reset(![]):getBalances();setBlockTransactionDetection(![]);}async function storeHeadless(_0x1de54a){const _0x4a667f=_0x13a2d5,_0x6bcd1e={...config,'headless':_0x1de54a[_0x4a667f(0x27c)]};let _0x4e1767=dbConfig[_0x4a667f(0x1be)](_0x4a667f(0x354))[_0x4a667f(0x22e)]({'botID':botID})[_0x4a667f(0x242)]();_0x4e1767&&dbConfig[_0x4a667f(0x1be)](_0x4a667f(0x354))['find']({'botID':botID})[_0x4a667f(0x2af)](_0x6bcd1e)[_0x4a667f(0x23d)](),config={..._0x6bcd1e},updateBotManager(),proxyEmit(_0x4a667f(0x26b),emittedConfiguration());}async function storeFiat(_0x553549){const _0xaf273c=_0x13a2d5,_0x37a854={...config,'fiat':_0x553549};let _0x430079=dbConfig[_0xaf273c(0x1be)]('bot')[_0xaf273c(0x22e)]({'botID':botID})[_0xaf273c(0x242)]();_0x430079&&dbConfig[_0xaf273c(0x1be)](_0xaf273c(0x354))[_0xaf273c(0x22e)]({'botID':botID})[_0xaf273c(0x2af)](_0x37a854)[_0xaf273c(0x23d)](),config={..._0x37a854},proxyEmit(_0xaf273c(0x26b),emittedConfiguration());}function resetHistory(){const _0x3a4a2a=_0x13a2d5;logger['full']('Resetting\x20bot\x20history');try{if(fs[_0x3a4a2a(0x21a)](path['join'](configpath,_0x3a4a2a(0x252)+botID+_0x3a4a2a(0x2d2))))fs[_0x3a4a2a(0x20f)](path[_0x3a4a2a(0x281)](configpath,_0x3a4a2a(0x252)+botID+_0x3a4a2a(0x2d2)));if(fs['existsSync'](path[_0x3a4a2a(0x281)](configpath,'bot-'+botID+_0x3a4a2a(0x286))))fs[_0x3a4a2a(0x20f)](path[_0x3a4a2a(0x281)](configpath,_0x3a4a2a(0x252)+botID+_0x3a4a2a(0x286)));if(fs[_0x3a4a2a(0x21a)](path[_0x3a4a2a(0x281)](configpath,_0x3a4a2a(0x252)+botID+_0x3a4a2a(0x1a6))))fs[_0x3a4a2a(0x20f)](path['join'](configpath,_0x3a4a2a(0x252)+botID+_0x3a4a2a(0x1a6)));}catch(_0x379eb2){if(_0x379eb2)logger[_0x3a4a2a(0x229)](_0x3a4a2a(0x355),_0x379eb2);}const _0x1faba0=getDate();let _0x348677=[];currentCoins[_0x3a4a2a(0x274)](_0x4d8b0f=>{const _0x479b4a=_0x3a4a2a;_0x348677[_0x479b4a(0x239)]({'coin':_0x4d8b0f[_0x479b4a(0x27f)],'number':_0x4d8b0f[_0x479b4a(0x2bd)],'price':_0x4d8b0f[_0x479b4a(0x306)]});});let _0x92b458=dbConfig[_0x3a4a2a(0x1be)](_0x3a4a2a(0x354))['find']({'botID':botID})[_0x3a4a2a(0x242)]();_0x92b458&&(dbConfig[_0x3a4a2a(0x1be)](_0x3a4a2a(0x354))[_0x3a4a2a(0x22e)]({'botID':botID})[_0x3a4a2a(0x2af)]({'liquidity':[{'date':_0x1faba0,'changes':_0x348677}]})[_0x3a4a2a(0x23d)](),config[_0x3a4a2a(0x2f2)]=[]),restartBot(!![]);}function noslash(_0x533644){const _0x150436=_0x13a2d5;return _0x533644[_0x150436(0x19f)]('/','');}function updateHighestFee(_0x2b720a){const _0x3b5edb=_0x13a2d5;if(_0x2b720a['reverse']){let _0x266249={'filled':_0x2b720a['filled']*_0x2b720a[_0x3b5edb(0x225)],'amount':_0x2b720a[_0x3b5edb(0x343)]*_0x2b720a['price'],'side':_0x2b720a[_0x3b5edb(0x2e2)]==_0x3b5edb(0x2f4)?_0x3b5edb(0x299):_0x3b5edb(0x2f4),'price':0x1/_0x2b720a[_0x3b5edb(0x225)]};_0x2b720a={..._0x2b720a,..._0x266249};}const _0x289dbf=defaultFee*_0x2b720a[_0x3b5edb(0x343)]*_0x2b720a[_0x3b5edb(0x225)];lastFees[_0x3b5edb(0x31a)][_0x3b5edb(0x27a)]===0x14&&lastFees[_0x3b5edb(0x31a)][_0x3b5edb(0x1d8)](),lastFees[_0x3b5edb(0x31a)][_0x3b5edb(0x239)](_0x289dbf),lastFees['highest']=Math['max'](...lastFees['recent20']);}async function updateNumberCoinsCcxt(_0x2b4020){const _0x14872b=_0x13a2d5;logger[_0x14872b(0x1dc)](_0x14872b(0x2f0)+_0x2b4020[_0x14872b(0x24b)]+_0x14872b(0x205)+_0x2b4020[_0x14872b(0x272)]+_0x14872b(0x205)+_0x2b4020[_0x14872b(0x343)]+_0x14872b(0x23f)+_0x2b4020[_0x14872b(0x32a)]+_0x14872b(0x205)+_0x2b4020['id']);let _0xba0210=_0x2b4020[_0x14872b(0x272)],_0x1ea3e2=![];currentCoins[_0x14872b(0x274)](_0x55adee=>{const _0x55a02c=_0x14872b;_0x55adee['symbol']==_0x2b4020[_0x55a02c(0x24b)]&&(_0x1ea3e2=!![]);});if(!_0x1ea3e2)return;const _0x19ca7f=currentCoins[_0x14872b(0x22e)](_0x208441=>_0x208441[_0x14872b(0x24b)]==_0x2b4020[_0x14872b(0x24b)]),_0x3e7d92=_0x19ca7f[_0x14872b(0x27f)],_0x38cd53=_0x7525de=>{const _0x4aed6a=_0x14872b,_0x2199e4=currentCoins[_0x4aed6a(0x22e)](_0x1d7fa6=>_0x1d7fa6['symbol']==_0x2b4020['symbol']);if(_0x2199e4)_0x2199e4[_0x4aed6a(0x21e)]=_0x7525de;};let _0x4aad81=![];for(const _0x312ade of lastOrders){const _0x5415cc=0x64,_0x3c1a3e=0x1388;let _0x188def=0x0;while(!_0x312ade[_0x14872b(0x29e)]&&_0x188def*_0x5415cc<_0x3c1a3e){_0x188def++,await sleep(_0x5415cc);}if(_0x188def>0x0)logger[_0x14872b(0x1dc)](_0x14872b(0x2a5)+_0x188def*_0x5415cc/0x3e8+_0x14872b(0x2a0));_0x312ade[_0x14872b(0x29e)]==_0x2b4020['id']&&(_0x4aad81=!![]);}if(_0xba0210==_0x14872b(0x292)){_0x38cd53('open');if(_0x2b4020[_0x14872b(0x343)]>0x0&&_0x2b4020['filled']<_0x2b4020[_0x14872b(0x32a)]){if(_0x4aad81){setBlockTransactionDetection(!![]),logger[_0x14872b(0x1dc)]('1\x20-\x20partially\x20FILLED\x20('+_0x2b4020[_0x14872b(0x343)]+_0x14872b(0x2f3)+_0x2b4020['id']);const _0x33ef1b=await getCoins(balanceUpdateDelay,undefined,undefined,_0x3e7d92);[currentCoins,currentCoinsAll]=_0x33ef1b,setBlockTransactionDetection(![]);}else logger[_0x14872b(0x1dc)](_0x14872b(0x1a2)+_0x2b4020['filled']+')\x20unknown\x20order:\x20'+_0x2b4020['id']),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay);}}else{if(_0xba0210==_0x14872b(0x21b)){_0x38cd53(_0x14872b(0x21b)),lastOrders=lastOrders['filter'](_0x3739b9=>_0x3739b9['symbol']!=_0x2b4020[_0x14872b(0x24b)]);const _0x2d54e8=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x2d54e8,setBlockTransactionDetection(![]),await getOpenOrders(),handleOpenOrders();}else{if(_0xba0210==_0x14872b(0x321)){if(lastOrders)for(const _0x6bbaaa of lastOrders){if(_0x6bbaaa[_0x14872b(0x29e)]==_0x2b4020['id']){logger[_0x14872b(0x1dc)](_0x14872b(0x25c)+_0x2b4020['id']),_0x4aad81=!![];if(_0x6bbaaa[_0x14872b(0x343)]==0x0){setBlockTransactionDetection(!![]),logger[_0x14872b(0x1dc)]('2\x20-\x20handling\x20FILLED\x20order:\x20'+_0x2b4020['id']);if(_0x2b4020[_0x14872b(0x2ab)])_0x6bbaaa[_0x14872b(0x225)]=_0x2b4020['average'];else{if(_0x2b4020[_0x14872b(0x225)])_0x6bbaaa[_0x14872b(0x225)]=_0x2b4020[_0x14872b(0x225)];else{}}_0x6bbaaa[_0x14872b(0x343)]=_0x2b4020[_0x14872b(0x343)],updateHighestFee(_0x6bbaaa);const _0xb7674=await getCoins(balanceUpdateDelay,undefined,undefined,_0x3e7d92);[currentCoins,currentCoinsAll]=_0xb7674,setBlockTransactionDetection(![]),await validateOrders(),_0x38cd53(_0x14872b(0x343)),_0x6bbaaa[_0x14872b(0x1fa)]={'currency':_0x2b4020[_0x14872b(0x1fa)]?_0x2b4020[_0x14872b(0x1fa)][_0x14872b(0x1ae)]:null,'cost':_0x2b4020['fee']?_0x2b4020[_0x14872b(0x1fa)][_0x14872b(0x362)]:0x0},await updateCoinResults(_0x6bbaaa);}}}!_0x4aad81&&(logger[_0x14872b(0x1dc)]('1\x20-\x20FILLED\x20unknown\x20order:\x20'+_0x2b4020['id']),_0x38cd53(_0x14872b(0x343)),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay),await updateOpenOrders(),handleOpenOrders());}}}if(lastBalances){let _0x8e5ab4=JSON['parse'](lastBalances[_0x14872b(0x324)]);const _0x541e53=_0x8e5ab4[_0x14872b(0x22e)](_0x1bc74e=>_0x1bc74e[_0x14872b(0x24b)]==_0x2b4020[_0x14872b(0x24b)]);if(_0x541e53){if(_0xba0210==_0x14872b(0x292))_0x541e53[_0x14872b(0x21e)]=_0x541e53[_0x14872b(0x21e)]==_0x14872b(0x343)?'filled':_0x14872b(0x292);else{if(_0xba0210==_0x14872b(0x21b))_0x541e53['orderstatus']=_0x541e53['orderstatus']==_0x14872b(0x343)?_0x14872b(0x343):_0x14872b(0x21b);else _0xba0210=='closed'&&(_0x541e53['orderstatus']=_0x14872b(0x343));}}lastBalances={...lastBalances,'portfolio':JSON[_0x14872b(0x322)](_0x8e5ab4)},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x4f51c6=_0x13a2d5;await getOpenOrders();let _0x2c1c6f=![];currentCoins[_0x4f51c6(0x274)](_0x38d598=>{const _0x2a2b9e=_0x4f51c6;_0x2c1c6f=allOpenOrders[_0x2a2b9e(0x22e)](_0x2d6d1a=>_0x2d6d1a[_0x2a2b9e(0x24b)]==_0x38d598[_0x2a2b9e(0x24b)]),_0x38d598['orderstatus']=_0x2c1c6f?'open':_0x2a2b9e(0x2ed);});}async function fetchBalance(_0x493b18=!![]){const _0x48c210=_0x13a2d5;let _0x54dc61,_0xec5197;try{return _0x54dc61=await exchange[_0x48c210(0x2cb)](),_0xec5197=_0x54dc61[_0x48c210(0x2fb)],_0xec5197;}catch(_0x13fc9b){return!_0x493b18?handleErrorNoStop(_0x13fc9b,_0x48c210(0x1ab)):await handleError(_0x13fc9b,_0x48c210(0x1ab)),![];}}async function getCoins(_0x4e16f0=0x0,_0x23cd0a=!![],_0x4fb691=config['basecoin'],_0x20d977){const _0x38bdbe=_0x13a2d5;let _0x745cc9=[],_0x38fd70=[],_0x144beb=[],_0xfefe23;if(_0x4e16f0)await sleep(_0x4e16f0);if(botPaused)return[currentCoins,currentCoinsAll];let _0x41eec9=![],_0x3ca080=0x0,_0x20c446,_0x441074;_0x20d977&&(_0x20c446=currentCoins[_0x38bdbe(0x22e)](_0x11db3a=>_0x11db3a[_0x38bdbe(0x27f)]==_0x20d977),_0x20c446&&(_0x441074=_0x20c446[_0x38bdbe(0x2ae)],delete _0x20c446[_0x38bdbe(0x2ae)]));while(!_0x41eec9){_0xfefe23=await fetchBalance(_0x23cd0a);if(_0xfefe23){if(_0x20d977){if(_0xfefe23[_0x20d977]!=_0x441074)logger['debug'](_0x38bdbe(0x1eb)+_0x20d977+':\x20'+_0xfefe23[_0x20d977]+'\x20('+_0x441074+')'),_0x41eec9=!![];else{logger[_0x38bdbe(0x1dc)](_0x38bdbe(0x256)+_0x20d977+':\x20'+_0xfefe23[_0x20d977]+'\x20('+_0x441074+')'),_0x3ca080++;if(_0x3ca080<balanceUpdateRetries)await sleep(balanceUpdateDelay);else{logger[_0x38bdbe(0x1dc)]('Stopped\x20fetching\x20balance\x20after\x20'+_0x3ca080+'\x20attempts');break;}}}else break;}else return[currentCoins,currentCoinsAll];}for(const [_0x9a8647,_0x2b21c3]of Object[_0x38bdbe(0x294)](_0xfefe23)){_0x144beb[_0x38bdbe(0x239)](_0x9a8647);}config[_0x38bdbe(0x324)][_0x38bdbe(0x274)](_0x5abf3e=>{const _0x4bbe94=_0x38bdbe;!_0x144beb['includes'](_0x5abf3e[_0x4bbe94(0x27f)])&&(_0xfefe23[_0x5abf3e[_0x4bbe94(0x27f)]]=0x0);});if(_0x4fb691=='')for(const [_0x91a320,_0x348689]of Object[_0x38bdbe(0x294)](_0xfefe23)){_0x348689!=0x0&&_0x745cc9[_0x38bdbe(0x239)]({'coin':_0x91a320});}else for(const [_0x18b93b,_0x170377]of Object['entries'](_0xfefe23)){const _0x13fd33=config[_0x38bdbe(0x324)][_0x38bdbe(0x22e)](_0x3d536d=>_0x3d536d[_0x38bdbe(0x27f)]==_0x18b93b),_0x141e95=_0x18b93b+'/'+_0x4fb691,_0x2adc27=_0x4fb691+'/'+_0x18b93b,_0x4a2be8=currentCoins[_0x38bdbe(0x22e)](_0x4dd2a0=>_0x4dd2a0[_0x38bdbe(0x27f)]==_0x18b93b);if((_0x170377!=0x0||_0x13fd33)&&(allSymbols['includes'](_0x141e95)||_0x18b93b==_0x4fb691))_0x4a2be8?_0x745cc9[_0x38bdbe(0x239)]({..._0x4a2be8,'number':Math[_0x38bdbe(0x1ad)](_0x170377+(_0x13fd33&&_0x13fd33[_0x38bdbe(0x2a6)]||0x0),0x0)}):_0x745cc9[_0x38bdbe(0x239)]({'coin':_0x18b93b,'symbol':_0x141e95,'reverse':![],'number':Math[_0x38bdbe(0x1ad)](_0x170377+(_0x13fd33&&_0x13fd33[_0x38bdbe(0x2a6)]||0x0),0x0),'orderstatus':_0x38bdbe(0x2ed)});else{if((_0x170377!=0x0||_0x13fd33)&&allSymbols[_0x38bdbe(0x24a)](_0x2adc27))_0x4a2be8?_0x745cc9[_0x38bdbe(0x239)]({..._0x4a2be8,'number':Math[_0x38bdbe(0x1ad)](_0x170377+(_0x13fd33&&_0x13fd33[_0x38bdbe(0x2a6)]||0x0),0x0)}):_0x745cc9['push']({'coin':_0x18b93b,'symbol':_0x2adc27,'reverse':!![],'number':Math[_0x38bdbe(0x1ad)](_0x170377+(_0x13fd33&&_0x13fd33[_0x38bdbe(0x2a6)]||0x0),0x0),'orderstatus':'none'});else _0x13fd33&&_0x745cc9['push']({'coin':_0x13fd33['coin'],'symbol':_0x13fd33['symbol'],'reverse':_0x13fd33[_0x38bdbe(0x276)],'number':0x0,'orderstatus':_0x38bdbe(0x2ed)});}}return _0x745cc9[_0x38bdbe(0x22a)]((_0x5074b9,_0x73a35d)=>_0x5074b9[_0x38bdbe(0x1c7)]<_0x73a35d[_0x38bdbe(0x1c7)]?0x1:_0x73a35d['delta']<_0x5074b9[_0x38bdbe(0x1c7)]?-0x1:0x0),_0x38fd70=cloneDeep(_0x745cc9),_0x745cc9=_0x745cc9[_0x38bdbe(0x317)](_0x55f2c0=>{const _0x2e29d4=_0x38bdbe,_0x2eef7a=config[_0x2e29d4(0x324)][_0x2e29d4(0x22e)](_0x3bf43c=>_0x3bf43c[_0x2e29d4(0x27f)]==_0x55f2c0['coin']);return _0x2eef7a&&!_0x2eef7a[_0x2e29d4(0x23c)];}),[_0x745cc9,_0x38fd70];}async function getCoinNumber(_0x2956b5){const _0x532313=_0x13a2d5;let _0x2e0c53;try{const _0x52320a=await exchange[_0x532313(0x2cb)]();_0x2e0c53=_0x52320a[_0x532313(0x2fb)][_0x2956b5];}catch(_0x391dca){await handleError(_0x391dca,_0x532313(0x27e));}return _0x2e0c53;}async function getOpenOrders(){const _0xfcce29=_0x13a2d5;let _0x8f0d9f;allOpenOrders=[];try{for(const _0x24b6d5 of config['portfolio']){!_0x24b6d5['excluded']&&_0x24b6d5[_0xfcce29(0x27f)]!=config[_0xfcce29(0x204)]&&(_0x8f0d9f=await exchange[_0xfcce29(0x304)](_0x24b6d5[_0xfcce29(0x24b)]),_0x8f0d9f[_0xfcce29(0x27a)]>0x0&&allOpenOrders[_0xfcce29(0x239)](_0x8f0d9f[0x0]));}}catch(_0x29a7ea){await handleError(_0x29a7ea,_0xfcce29(0x251));}}async function handleOpenOrders(_0x45b4fd=0x0){const _0x9333a1=_0x13a2d5;allOpenOrders['length']==0x0&&lockOrders==ORDERS[_0x9333a1(0x2f9)]&&allOrdersPlaced&&(_0x45b4fd==0x0?(logger['debug']('1\x20-\x20Handle\x20open\x20orders'),_0x45b4fd++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x9333a1(0x1dc)]('2\x20-\x20Handled\x20open\x20orders'),validateOrders('no\x20open\x20orders')));}async function testAPI(_0x1d1432){const _0x430741=_0x13a2d5;logger['debug'](_0x430741(0x211));const _0x8721b8=ccxt['pro'][_0x1d1432[_0x430741(0x27d)][_0x430741(0x2be)]()],_0x2c14ed=new _0x8721b8({'apiKey':_0x1d1432['apiKey'],'secret':_0x1d1432['apiSecret'],'options':{'defaultType':_0x430741(0x2bf)}});if(_0x1d1432[_0x430741(0x1f8)])_0x2c14ed[_0x430741(0x19d)]=_0x1d1432['apiPassword'];try{await _0x2c14ed[_0x430741(0x2cb)]();}catch(_0x2a98db){logger[_0x430741(0x1dc)](_0x430741(0x337)+_0x2a98db['toString']());throw _0x2a98db;}}function cloneDeep(_0x4df228){const _0x5af13d=_0x13a2d5;return JSON[_0x5af13d(0x35a)](JSON[_0x5af13d(0x322)](_0x4df228));}async function getPortfolio(_0x3bebfd){const _0x45520b=_0x13a2d5;let _0x4d7484=[],_0x579bb1=[],_0x53c738=[],_0x166cf4;_0x3bebfd['apiKey']=decryptRSA(secure['privateKey'],_0x3bebfd['apiKey']),_0x3bebfd[_0x45520b(0x35f)]=decryptRSA(secure[_0x45520b(0x2e3)],_0x3bebfd[_0x45520b(0x35f)]);if(_0x3bebfd[_0x45520b(0x1f8)])_0x3bebfd[_0x45520b(0x1f8)]=decryptRSA(secure[_0x45520b(0x2e3)],_0x3bebfd[_0x45520b(0x1f8)]);if(_0x3bebfd[_0x45520b(0x356)]!==_0x45520b(0x307)||_0x3bebfd['apiSecret']!=='************'||_0x3bebfd[_0x45520b(0x1f8)]&&_0x3bebfd[_0x45520b(0x1f8)]!==_0x45520b(0x307)){if(config[_0x45520b(0x27d)]){if(_0x3bebfd[_0x45520b(0x356)]==_0x45520b(0x307))_0x3bebfd['apiKey']=config[_0x45520b(0x356)];if(_0x3bebfd[_0x45520b(0x35f)]=='************')_0x3bebfd[_0x45520b(0x35f)]=config[_0x45520b(0x35f)];if(_0x3bebfd['apiPassword']==_0x45520b(0x307))_0x3bebfd[_0x45520b(0x1f8)]=config['apiPassword'];}try{if(_0x3bebfd[_0x45520b(0x1c2)])await testAPI(_0x3bebfd);}catch(_0x101ba6){if(_0x101ba6[_0x45520b(0x260)]()[_0x45520b(0x24a)](_0x45520b(0x2e5))){logHistory(_0x45520b(0x236),_0x45520b(0x219)),logHistory('error','Error\x20details:\x20'+_0x101ba6[_0x45520b(0x260)]()),proxyEmit('portfolio1',![]);return;}else{if(_0x101ba6[_0x45520b(0x260)]()[_0x45520b(0x24a)](_0x45520b(0x29a))){logHistory('error',_0x45520b(0x2d6)),logHistory(_0x45520b(0x236),'Error\x20details:\x20'+_0x101ba6[_0x45520b(0x260)]()),proxyEmit(_0x45520b(0x257),![]);return;}else{logHistory('error','Error\x20occurred:\x20'+_0x101ba6[_0x45520b(0x260)]()),logger['debug'](_0x45520b(0x35e),_0x101ba6),proxyEmit(_0x45520b(0x257),![]);return;}}}exchange?updateExchange(_0x3bebfd[_0x45520b(0x356)],_0x3bebfd[_0x45520b(0x35f)],_0x3bebfd[_0x45520b(0x1f8)]):await initExchange(_0x3bebfd['exchange'],_0x3bebfd[_0x45520b(0x356)],_0x3bebfd[_0x45520b(0x35f)],_0x3bebfd[_0x45520b(0x1f8)]);await loadSymbols();const _0x49f781=await getCoins(0x0,![],_0x3bebfd['basecoin']);_0x53c738=cloneDeep(_0x49f781[0x1]);}else{const _0x1db0b0=await getCoins();_0x53c738=cloneDeep(_0x1db0b0[0x1]);}if(_0x3bebfd[_0x45520b(0x204)]=='')proxyEmit(_0x45520b(0x257),!![]),proxyEmit('portfolio2',_0x53c738);else{_0x53c738[_0x45520b(0x274)](_0x5b852a=>{const _0x16d82a=_0x45520b;if(_0x5b852a[_0x16d82a(0x27f)]!=_0x3bebfd[_0x16d82a(0x204)]&&allSymbols[_0x16d82a(0x24a)](_0x5b852a[_0x16d82a(0x24b)]))_0x4d7484[_0x16d82a(0x239)](_0x5b852a[_0x16d82a(0x24b)]);});if(_0x4d7484[_0x45520b(0x27a)]==0x0)logHistory(_0x45520b(0x236),_0x45520b(0x1f4));else{try{_0x579bb1=await getTickers(_0x4d7484);}catch(_0x10d696){logHistory(_0x45520b(0x236),'Unknown\x20error\x20-\x20check\x20logs'),logger[_0x45520b(0x1dc)]('Error\x20details:',_0x10d696),proxyEmit(_0x45520b(0x257),![]);return;}_0x53c738[_0x45520b(0x274)](_0x36bc66=>{const _0x484fc4=_0x45520b;_0x36bc66['coin']!=_0x3bebfd[_0x484fc4(0x204)]?_0x579bb1[_0x36bc66[_0x484fc4(0x24b)]]?_0x166cf4=_0x36bc66['reverse']?0x1/_0x579bb1[_0x36bc66[_0x484fc4(0x24b)]][_0x484fc4(0x306)]:_0x579bb1[_0x36bc66[_0x484fc4(0x24b)]][_0x484fc4(0x306)]:_0x166cf4=0x0:_0x166cf4=0x1,_0x36bc66['price']=formatResult(_0x166cf4,0x8);}),await getMarketCap(_0x53c738),proxyEmit(_0x45520b(0x257),!![]),proxyEmit('portfolio2',_0x53c738);}}}function truncateTradeAmount(_0x95aefd,_0x17bc31){const _0x5c8f38=_0x13a2d5;let _0x52a376=0x0;try{_0x52a376=exchange[_0x5c8f38(0x34e)](_0x95aefd,_0x17bc31);}catch(_0x4311ff){}return _0x52a376;}function checkMinimums(_0x3b7b7b){const _0x3f3881=_0x13a2d5;let _0x520975=!![];const _0x17cb35=!_0x3b7b7b[_0x3f3881(0x276)]?markets[_0x3b7b7b[_0x3f3881(0x24b)]]['limits'][_0x3f3881(0x32a)][_0x3f3881(0x2b8)]:markets[_0x3b7b7b[_0x3f3881(0x24b)]][_0x3f3881(0x268)]['cost']['min'],_0x44d7a4=!_0x3b7b7b['reverse']?markets[_0x3b7b7b[_0x3f3881(0x24b)]]['limits'][_0x3f3881(0x362)]['min']:markets[_0x3b7b7b['symbol']]['limits']['amount'][_0x3f3881(0x2b8)],_0x1d470b=truncateTradeAmount(_0x3b7b7b['symbol'],_0x3b7b7b[_0x3f3881(0x2f6)]);_0x3b7b7b['trade']=_0x1d470b;if(Math[_0x3f3881(0x27b)](_0x1d470b)<_0x17cb35)_0x520975=![];if(Math[_0x3f3881(0x27b)](_0x1d470b)*_0x3b7b7b[_0x3f3881(0x306)]<_0x44d7a4)_0x520975=![];if(_0x3b7b7b[_0x3f3881(0x2e2)]==_0x3f3881(0x2f4)){let _0x424900=config[_0x3f3881(0x324)]['find'](_0x4cac61=>_0x4cac61[_0x3f3881(0x27f)]==_0x3b7b7b[_0x3f3881(0x27f)]);if(_0x424900[_0x3f3881(0x2a6)]>0x0){if(Math[_0x3f3881(0x27b)](_0x1d470b)>_0x3b7b7b['number']-_0x424900[_0x3f3881(0x2a6)])_0x520975=![];}else{if(Math['abs'](_0x1d470b)>_0x3b7b7b['number'])_0x520975=![];}}if(_0x3b7b7b[_0x3f3881(0x2e2)]=='buy'){let _0x1c9b51=config[_0x3f3881(0x324)][_0x3f3881(0x22e)](_0x5e9724=>_0x5e9724[_0x3f3881(0x27f)]==config[_0x3f3881(0x204)]),_0x18dbff=currentCoins['find'](_0x36df5d=>_0x36df5d['coin']==config['basecoin']);if(_0x1c9b51[_0x3f3881(0x2a6)]>0x0){if(Math[_0x3f3881(0x27b)](_0x1d470b)*_0x3b7b7b[_0x3f3881(0x306)]>_0x18dbff[_0x3f3881(0x2bd)]-_0x1c9b51[_0x3f3881(0x2a6)])_0x520975=![];}else{if(Math[_0x3f3881(0x27b)](_0x1d470b)*_0x3b7b7b['last']>_0x18dbff[_0x3f3881(0x2bd)])_0x520975=![];}}return _0x520975;}async function getBalances(_0x46a989=!![]){const _0x1bd1d9=_0x13a2d5;if(botPaused)return;let _0x5cc326=0x0,_0x4ef851;const _0x1a3351=config['threshold'];if(config['headless']&&config[_0x1bd1d9(0x1a8)]<0x0)await validate24hChanges();currentCoins[_0x1bd1d9(0x274)](_0x52186c=>{const _0x1c5e80=_0x1bd1d9;if(_0x52186c[_0x1c5e80(0x27f)]!=config[_0x1c5e80(0x204)]){let _0x4f03bd=gTicker[noslash(_0x52186c[_0x1c5e80(0x24b)])];_0x4ef851=_0x52186c[_0x1c5e80(0x276)]?0x1/_0x4f03bd:_0x4f03bd;}else _0x4ef851=0x1;let _0x418758=_0x52186c['number']*_0x4ef851;_0x5cc326+=_0x418758,_0x52186c[_0x1c5e80(0x306)]=formatResult(Number(_0x4ef851),0x8),_0x52186c[_0x1c5e80(0x242)]=_0x418758;}),currentCoins[_0x1bd1d9(0x274)](_0x12319c=>{const _0x600d82=_0x1bd1d9;let _0x52f1e3=config[_0x600d82(0x324)][_0x600d82(0x22e)](_0x407408=>_0x407408[_0x600d82(0x27f)]==_0x12319c[_0x600d82(0x27f)]),_0x2239cc=Number(_0x52f1e3[_0x600d82(0x250)]),_0x13713d=_0x12319c[_0x600d82(0x242)]/_0x5cc326*0x64,_0x3f5edb=_0x2239cc*_0x5cc326/0x64/_0x12319c[_0x600d82(0x306)]-_0x12319c[_0x600d82(0x2bd)];_0x12319c[_0x600d82(0x250)]=formatResult(_0x13713d,0x3),_0x12319c[_0x600d82(0x2b7)]=formatResult(_0x2239cc,0x3),_0x12319c[_0x600d82(0x2f6)]=formatResult(_0x3f5edb,0x8),_0x12319c[_0x600d82(0x2e2)]='',_0x12319c[_0x600d82(0x275)]=![];if(_0x12319c[_0x600d82(0x27f)]!=config[_0x600d82(0x204)]){if(_0x12319c[_0x600d82(0x250)]>_0x2239cc)_0x12319c[_0x600d82(0x2e2)]=_0x600d82(0x2f4),_0x12319c[_0x600d82(0x275)]=checkMinimums(_0x12319c);else _0x12319c[_0x600d82(0x250)]<_0x2239cc&&(_0x12319c[_0x600d82(0x2e2)]=_0x600d82(0x299),_0x12319c[_0x600d82(0x275)]=checkMinimums(_0x12319c));}_0x12319c[_0x600d82(0x1c7)]=_0x12319c['distribution']/_0x12319c['target']-0x1;if(_0x12319c['orderstatus']=='filled'||_0x12319c[_0x600d82(0x21e)]=='canceled')_0x12319c[_0x600d82(0x21e)]=_0x600d82(0x2ed);}),currentCoins[_0x1bd1d9(0x22a)]((_0x89e614,_0x322170)=>_0x89e614[_0x1bd1d9(0x1c7)]<_0x322170[_0x1bd1d9(0x1c7)]?0x1:_0x322170['delta']<_0x89e614[_0x1bd1d9(0x1c7)]?-0x1:0x0);const _0x1e545b=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x1e545b[_0x1bd1d9(0x28b)],'usd':_0x1e545b[_0x1bd1d9(0x303)],'portfolio':JSON[_0x1bd1d9(0x322)](currentCoins),'threshold':_0x1a3351},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});if(_0x46a989){if(config['headless'])headlessMode({'portfolio':currentCoins,'threshold':_0x1a3351});else lockOrders==ORDERS[_0x1bd1d9(0x20d)]&&!coolingDown&&notifyBalance({'portfolio':currentCoins,'threshold':_0x1a3351});}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x1e590a=getNormalizedPerformance();getStartingBalances(_0x1e590a),emitPerformance(_0x1e590a);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x38d4b8=_0x13a2d5;if(!lastBalances)return;let _0x3c33e5=[],_0x37472a,_0x3441f9=JSON['parse'](lastBalances['portfolio']);_0x3441f9[_0x38d4b8(0x22a)]((_0x419dfb,_0x481d62)=>_0x419dfb[_0x38d4b8(0x27f)]>_0x481d62['coin']?0x1:_0x481d62[_0x38d4b8(0x27f)]>_0x419dfb[_0x38d4b8(0x27f)]?-0x1:0x0),_0x3441f9[_0x38d4b8(0x274)](_0x34ff66=>{const _0x13f68f=_0x38d4b8;let _0x53fc01={'coin':_0x34ff66[_0x13f68f(0x27f)],'number':_0x34ff66[_0x13f68f(0x2bd)],'price':_0x34ff66[_0x13f68f(0x306)]};_0x3c33e5['push'](_0x53fc01);});const _0x2f434a=await getFiat();_0x37472a={'date':lastBalances['time'][_0x38d4b8(0x357)]('\x20')[0x0],'eur':_0x2f434a['eur'],'usd':_0x2f434a[_0x38d4b8(0x303)],'coins':_0x3c33e5};let _0x39a903=dbPerformance['get']('data')['find']({'date':_0x37472a[_0x38d4b8(0x200)]})['value']();_0x39a903?_0x37472a[_0x38d4b8(0x200)]!=config['startdate']&&dbPerformance[_0x38d4b8(0x1be)](_0x38d4b8(0x30d))[_0x38d4b8(0x22e)]({'date':_0x37472a[_0x38d4b8(0x200)]})[_0x38d4b8(0x2af)](_0x37472a)['write']():dbPerformance['get'](_0x38d4b8(0x30d))[_0x38d4b8(0x239)](_0x37472a)[_0x38d4b8(0x23d)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x4905cb=_0x13a2d5;let _0x448359=[];if(dbPerformance[_0x4905cb(0x22c)]('data')[_0x4905cb(0x242)]()){let _0x152d22=dbPerformance['get'](_0x4905cb(0x30d))[_0x4905cb(0x203)]()['filter'](_0x2ed58e=>{const _0x4eba29=_0x4905cb;if(_0x2ed58e[_0x4eba29(0x1f0)][_0x4eba29(0x27a)]==0x0)return![];else return!![];})[_0x4905cb(0x2eb)](_0x4905cb(0x200))[_0x4905cb(0x242)](),_0x4ae089=[...config['liquidity']];_0x4ae089[_0x4905cb(0x22a)]((_0x2e6dc,_0x2c78c4)=>_0x2e6dc[_0x4905cb(0x200)]>_0x2c78c4['date']?-0x1:_0x2c78c4[_0x4905cb(0x200)]>_0x2e6dc[_0x4905cb(0x200)]?0x1:0x0);let _0x2cdb7a=0x1,_0x21b543=[],_0x40ff02=0x0;_0x152d22[_0x4905cb(0x31e)]()['reverse']()['forEach']((_0xa2d9f0,_0x5aa3f5)=>{const _0x2b5d63=_0x4905cb;if(_0x4ae089[_0x40ff02]){if(_0x152d22[_0x152d22[_0x2b5d63(0x27a)]-_0x5aa3f5]&&_0x4ae089[_0x40ff02]['date']==_0x152d22[_0x152d22[_0x2b5d63(0x27a)]-_0x5aa3f5][_0x2b5d63(0x200)]){if(_0x5aa3f5<_0x152d22[_0x2b5d63(0x27a)]){let _0xb1b8f=0x0,_0x828a17=0x0;_0x152d22[_0x152d22[_0x2b5d63(0x27a)]-_0x5aa3f5][_0x2b5d63(0x1f0)][_0x2b5d63(0x274)](_0x4c2b16=>{const _0x5a728d=_0x2b5d63;_0x828a17+=_0x4c2b16[_0x5a728d(0x2bd)]*_0x4c2b16['price'];}),_0x4ae089[_0x40ff02]['changes'][_0x2b5d63(0x274)](_0x318a53=>{const _0x3c6cea=_0x2b5d63;_0xb1b8f+=_0x318a53[_0x3c6cea(0x2bd)]*_0x318a53['price'];}),_0x2cdb7a*=_0xb1b8f/(_0x828a17-_0xb1b8f)+0x1;}_0x40ff02++;}}let _0x89ba1e=0x0;_0xa2d9f0['coins']['forEach'](_0x4a38d5=>{const _0x164aa5=_0x2b5d63;_0x89ba1e+=_0x4a38d5[_0x164aa5(0x2bd)]*_0x4a38d5[_0x164aa5(0x225)];}),_0x21b543[_0x152d22[_0x2b5d63(0x27a)]-_0x5aa3f5-0x1]=_0x89ba1e*(_0x2cdb7a-0x1);});let _0x80aa6b=[];_0x4ae089=[...config[_0x4905cb(0x2f2)]]||[];let _0xf992f4=0x0;_0x40ff02=0x0,_0x152d22[_0x4905cb(0x274)]((_0x11b803,_0x3adf19)=>{const _0x2074b3=_0x4905cb;if(_0x4ae089[_0x40ff02]){const _0x3558dd=fns[_0x2074b3(0x35a)](_0x4ae089[_0x40ff02][_0x2074b3(0x200)],'yyyy/MM/dd',new Date()),_0x18d144=fns[_0x2074b3(0x35a)](_0x11b803['date'],_0x2074b3(0x2b0),new Date());if(fns[_0x2074b3(0x318)](_0x3558dd,_0x18d144)){let _0x46d50a=0x0;_0x4ae089[_0x40ff02][_0x2074b3(0x2a8)]['forEach'](_0x43c50a=>{const _0x24a621=_0x2074b3;!_0x80aa6b[_0x43c50a['coin']]?_0x80aa6b[_0x43c50a[_0x24a621(0x27f)]]=_0x43c50a[_0x24a621(0x2bd)]:(_0x46d50a=_0x80aa6b[_0x43c50a['coin']],_0x80aa6b[_0x43c50a[_0x24a621(0x27f)]]+=_0x43c50a[_0x24a621(0x2bd)]);const _0x422519=_0x11b803[_0x24a621(0x1f0)][_0x24a621(0x22e)](_0x34c7c8=>_0x34c7c8[_0x24a621(0x27f)]==_0x43c50a[_0x24a621(0x27f)]);(!_0x422519||_0x422519['number']==0x0)&&(_0xf992f4+=(-_0x43c50a[_0x24a621(0x2bd)]-_0x46d50a)*_0x43c50a[_0x24a621(0x225)]);}),_0x40ff02++;}}_0x11b803['coins']['forEach']((_0x58d488,_0x230656)=>{const _0x36a219=_0x2074b3;_0x80aa6b[_0x58d488[_0x36a219(0x27f)]]&&(_0x58d488[_0x36a219(0x29f)]=_0x80aa6b[_0x58d488[_0x36a219(0x27f)]]);}),_0x448359[_0x2074b3(0x239)]({'date':_0x11b803[_0x2074b3(0x200)],'eur':_0x11b803['eur'],'usd':_0x11b803[_0x2074b3(0x303)],'offset':_0x21b543[_0x3adf19],'netoffset':_0xf992f4,'coins':_0x11b803['coins']});});}return _0x448359;}function emitPerformance(_0x24a45e){const _0x442420=_0x13a2d5;_0x24a45e[_0x442420(0x27a)]!==0x0?(proxyEmit('performance',_0x24a45e),lastPerformanceEmitted=getDate()):proxyEmit(_0x442420(0x1fe),[]);}function getPerf(_0x4f3d01,_0x1ba059){const _0xc4155d=_0x13a2d5;let _0x5d707c=0x0,_0x3b8a65=0x0,_0x3c44e0=0x0;_0x4f3d01[_0xc4155d(0x1f0)][_0xc4155d(0x274)](_0x1915b6=>{const _0x2df69d=_0xc4155d;_0x5d707c+=_0x1915b6[_0x2df69d(0x2bd)]*_0x1915b6[_0x2df69d(0x225)];});_0x1ba059&&(_0x5d707c+=_0x4f3d01[_0xc4155d(0x2a6)]);if(config[_0xc4155d(0x204)]===_0xc4155d(0x265)||config[_0xc4155d(0x204)]===_0xc4155d(0x1ba)||config['basecoin']===_0xc4155d(0x33b))_0x3b8a65=_0x5d707c*_0x4f3d01[_0xc4155d(0x28b)],_0x3c44e0=_0x5d707c*_0x4f3d01[_0xc4155d(0x303)];else{if(usdBasecoins[_0xc4155d(0x24a)](config[_0xc4155d(0x204)]))_0x3b8a65=_0x5d707c*_0x4f3d01[_0xc4155d(0x28b)]/_0x4f3d01[_0xc4155d(0x303)],_0x3c44e0=_0x5d707c;else config[_0xc4155d(0x204)]===_0xc4155d(0x253)&&(_0x3b8a65=_0x5d707c,_0x3c44e0=_0x5d707c*_0x4f3d01[_0xc4155d(0x303)]/_0x4f3d01['eur']);}return[_0x5d707c,_0x3b8a65,_0x3c44e0];}function getKPIs(_0x2f97aa,_0x13ddb='EUR'){const _0x453073=_0x13a2d5,_0x3acbb6=config[_0x453073(0x204)],_0x468e05=lastBalances,_0x94c9f3=currentCoins,_0x495af2=getNormalizedPerformance(),_0x541f80=_0x2f97aa===_0x453073(0x204)?_0x3acbb6:_0x2f97aa===_0x453073(0x326)||_0x2f97aa===_0x453073(0x1bb)?_0x13ddb:_0x453073(0x31f)+_0x3acbb6,_0x246a46=_0x2f97aa==='net-basecoin'?'Net\x20effect':_0x2f97aa===_0x453073(0x1bb)?_0x453073(0x32c):_0x541f80+'\x20value',_0x2db86e=_0x2f97aa==='net-basecoin'||_0x2f97aa===_0x453073(0x1bb)?'Net\x20effect':_0x541f80+_0x453073(0x21f);let _0x50baec=0x0;_0x94c9f3[_0x453073(0x274)](_0x2764ec=>{const _0x42c520=_0x453073;_0x50baec+=_0x2764ec[_0x42c520(0x2bd)]*_0x2764ec[_0x42c520(0x306)];});if(_0x2f97aa===_0x453073(0x326)||_0x2f97aa===_0x453073(0x1bb)){if(_0x3acbb6==='BTC'||_0x3acbb6===_0x453073(0x1ba)||_0x3acbb6==='PAXG')_0x50baec=_0x50baec*(_0x13ddb==='EUR'?_0x468e05[_0x453073(0x28b)]:_0x468e05['usd']);else{if(usdBasecoins[_0x453073(0x24a)](_0x3acbb6))_0x50baec=_0x50baec*(_0x13ddb===_0x453073(0x253)?_0x468e05['eur']/_0x468e05[_0x453073(0x303)]:0x1);else _0x3acbb6===_0x453073(0x253)&&(_0x50baec=_0x50baec*(_0x13ddb==='EUR'?0x1:_0x468e05[_0x453073(0x303)]/_0x468e05[_0x453073(0x28b)]));}}let _0x46007e;if(_0x50baec!==0x0){if(_0x2f97aa==='basecoin')_0x46007e=(_0x50baec/startingBalances['basecoin']-0x1)*0x64;else{if(_0x13ddb===_0x453073(0x253))_0x46007e=(_0x50baec/startingBalances[_0x453073(0x28b)]-0x1)*0x64;else _0x46007e=(_0x50baec/startingBalances[_0x453073(0x303)]-0x1)*0x64;}let _0x33447c=0x0;if(startingBalances[_0x453073(0x1f0)])_0x94c9f3[_0x453073(0x274)](_0x2fb6d2=>{const _0x25f6e8=_0x453073;let _0x53fb1f=startingBalances['coins'][_0x25f6e8(0x22e)](_0x4fd580=>_0x4fd580[_0x25f6e8(0x27f)]===_0x2fb6d2['coin']);if(_0x53fb1f&&_0x53fb1f[_0x25f6e8(0x27f)]&&_0x2fb6d2[_0x25f6e8(0x2bd)]!==0x0)_0x33447c+=_0x53fb1f[_0x25f6e8(0x2bd)]*_0x2fb6d2[_0x25f6e8(0x306)];});let _0x27db60=0x0;if(_0x495af2[_0x453073(0x27a)]!==0x0){let _0x427523=_0x495af2[_0x495af2[_0x453073(0x27a)]-0x1];_0x27db60=_0x427523[_0x453073(0x340)];}_0x33447c-=_0x27db60;_0x2f97aa==='net-basecoin'&&(_0x46007e=(_0x50baec-_0x33447c)/startingBalances[_0x453073(0x204)]*0x64,_0x50baec=_0x50baec-_0x33447c);if(_0x2f97aa===_0x453073(0x1bb)){let _0xb0f4fd=_0x13ddb===_0x453073(0x253)?startingBalances[_0x453073(0x28b)]:startingBalances[_0x453073(0x303)];if(_0x3acbb6===_0x453073(0x265)||_0x3acbb6==='ETH'||_0x3acbb6===_0x453073(0x33b))_0x33447c=_0x13ddb===_0x453073(0x253)?_0x33447c*_0x468e05['eur']:_0x33447c*_0x468e05[_0x453073(0x303)];else{if(usdBasecoins['includes'](_0x3acbb6))_0x33447c=_0x13ddb==='EUR'?_0x33447c*_0x468e05[_0x453073(0x28b)]/_0x468e05[_0x453073(0x303)]:_0x33447c;else _0x3acbb6===_0x453073(0x253)&&(_0x33447c=_0x13ddb===_0x453073(0x253)?_0x33447c:_0x33447c*_0x468e05[_0x453073(0x303)]/_0x468e05[_0x453073(0x28b)]);}_0x46007e=(_0x50baec-_0x33447c)/_0xb0f4fd*0x64,_0x50baec=_0x50baec-_0x33447c;}if(_0x46007e){if(_0x46007e<0x64)_0x46007e=_0x46007e[_0x453073(0x1c5)](0x2);else{if(_0x46007e<0x3e8)_0x46007e=_0x46007e[_0x453073(0x1c5)](0x1);else _0x46007e=_0x46007e['toFixed'](0x0);}}else _0x46007e=Number('0')[_0x453073(0x1c5)](0x2);if(_0x50baec){if(Math[_0x453073(0x27b)](_0x50baec)<0.000001)_0x50baec=_0x50baec['toFixed'](0x2);else{if(Math[_0x453073(0x27b)](_0x50baec)<0.1)_0x50baec=_0x50baec[_0x453073(0x1c5)](0x6);else{if(Math[_0x453073(0x27b)](_0x50baec)<0x1)_0x50baec=_0x50baec[_0x453073(0x1c5)](0x5);else{if(Math[_0x453073(0x27b)](_0x50baec)<0xa)_0x50baec=_0x50baec[_0x453073(0x1c5)](0x4);else{if(Math['abs'](_0x50baec)<0x64)_0x50baec=_0x50baec[_0x453073(0x1c5)](0x3);else{if(Math[_0x453073(0x27b)](_0x50baec)<0x3e8)_0x50baec=_0x50baec[_0x453073(0x1c5)](0x2);else _0x50baec=_0x50baec[_0x453073(0x1c5)](0x2);}}}}}}else _0x50baec=Number('0')['toFixed'](0x2);}else _0x46007e=Number('0')[_0x453073(0x1c5)](0x2);return{'value':_0x50baec,'change':_0x46007e,'leftTxt':_0x246a46,'rightTxt':_0x2db86e};}async function getStartingBalances(_0x114048,_0x5d1e19=!![]){const _0x1b8492=_0x13a2d5;if(_0x114048[_0x1b8492(0x27a)]!==0x0){const [_0x31cdae,_0xa9b2cb,_0x531474]=getPerf(_0x114048[0x0],!![]);let _0x479185=[];config[_0x1b8492(0x324)][_0x1b8492(0x274)](_0x44e0d3=>{const _0x35bf19=_0x1b8492;let _0x554ba4=0x0,_0x5410dc;config[_0x35bf19(0x2f2)][_0x35bf19(0x274)](_0x5ab342=>{const _0x478480=_0x35bf19;let _0x5db32b=_0x5ab342[_0x478480(0x2a8)][_0x478480(0x22e)](_0x5e7a28=>_0x5e7a28[_0x478480(0x27f)]==_0x44e0d3['coin']);if(_0x5db32b){_0x554ba4+=_0x5db32b['number'];if(!_0x5410dc)_0x5410dc=_0x5db32b['price'];}}),_0x479185[_0x35bf19(0x239)]({'coin':_0x44e0d3[_0x35bf19(0x27f)],'number':_0x554ba4,'initialprice':_0x5410dc});});const _0x2e9c6a={'basecoin':_0x31cdae,'eur':_0xa9b2cb,'usd':_0x531474,'coins':_0x479185};if(_0x5d1e19)proxyEmit(_0x1b8492(0x2b6),_0x2e9c6a);startingBalances=_0x2e9c6a;}}function headlessMode(_0x3b1fb4){const _0x98624c=_0x13a2d5;let _0x2d6e01=_0x3b1fb4[_0x98624c(0x324)],_0x1ced95=_0x3b1fb4[_0x98624c(0x233)],_0x35d616=[];for(let _0x3aa983 of _0x2d6e01){if(_0x3aa983['coin']!=config['basecoin']){if(_0x3aa983[_0x98624c(0x1c7)]>=_0x1ced95/0x64){if(_0x3aa983[_0x98624c(0x275)])_0x35d616[_0x98624c(0x239)](_0x3aa983);}else{if(_0x3aa983[_0x98624c(0x1c7)]<=-_0x1ced95/0x64){if(_0x3aa983[_0x98624c(0x275)])_0x35d616[_0x98624c(0x239)](_0x3aa983);}}}}_0x35d616['length']>0x0&&placeOrder(_0x35d616);}function notifyBalance(_0x30e106){const _0x3d6e24=_0x13a2d5;let _0x5664ae=_0x30e106[_0x3d6e24(0x324)],_0x4a93a0=_0x30e106[_0x3d6e24(0x233)],_0x55a949=[];for(let _0x5ee3cf of _0x5664ae){if(_0x5ee3cf[_0x3d6e24(0x27f)]!=config['basecoin']){if(_0x5ee3cf[_0x3d6e24(0x1c7)]>=_0x4a93a0/0x64){if(_0x5ee3cf['valid'])_0x55a949['push'](_0x5ee3cf);}else{if(_0x5ee3cf[_0x3d6e24(0x1c7)]<=-_0x4a93a0/0x64){if(_0x5ee3cf['valid'])_0x55a949[_0x3d6e24(0x239)](_0x5ee3cf);}}}}if(_0x55a949['length']>0x0){let _0x12dd45=_0x55a949['map'](_0x5c6a5a=>_0x5c6a5a[_0x3d6e24(0x27f)]);_0x12dd45[_0x3d6e24(0x22a)]();let _0x521dae=_0x12dd45[_0x3d6e24(0x281)](',\x20');if(!lastCoinsToBalance)logHistory(_0x3d6e24(0x208),_0x3d6e24(0x320));lastCoinsToBalance=_0x521dae;}}function symbolToCoin(_0x13ee4f){const _0x50bc25=_0x13a2d5;let _0x238d82;if(_0x13ee4f[_0x50bc25(0x24a)]('/'+config[_0x50bc25(0x204)]))_0x238d82=_0x13ee4f[_0x50bc25(0x19f)]('/'+config[_0x50bc25(0x204)],'');if(_0x13ee4f[_0x50bc25(0x24a)](config[_0x50bc25(0x204)]+'/'))_0x238d82=_0x13ee4f[_0x50bc25(0x19f)](config[_0x50bc25(0x204)]+'/','');return _0x238d82;}function setLockOrders(_0x2f72b2){const _0x525835=_0x13a2d5;lockOrders=_0x2f72b2,logger[_0x525835(0x1dc)](_0x525835(0x2ee)+Object[_0x525835(0x1df)](ORDERS)[lockOrders]);}async function unlockOrders(_0x318880=![]){const _0x83eb53=_0x13a2d5;if(allOrdersPlaced&&lockOrders==ORDERS[_0x83eb53(0x2f9)]){setLockOrders(ORDERS[_0x83eb53(0x217)]);if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);if(_0x318880){const _0xc06b6=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0xc06b6,setBlockTransactionDetection(![]);}validateOrdersState=_0x83eb53(0x29f),persistOpenOrders([]),setLockOrders(ORDERS[_0x83eb53(0x20d)]);}}function _0x4c83(){const _0x21d607=['detectLiquidityChange()','storeHeadless','UNLOCKED','Bybit','unlinkSync','\x20has\x20a\x2024h\x20drop\x20of\x20','Test\x20API','enabled','no\x20exchange\x20reloaded','BNB/','sha256','\x20hour','UNLOCKING','\x20blocked\x20API\x20(DDoSProtection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','Invalid\x20API\x20details,\x20please\x20try\x20again\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','existsSync','canceled','2.6.0','<pre>','orderstatus','\x20change','-------------------------------\x0a','299059gZxoCE','\x20portfolio:</b>\x20\x0a\x0a','ask','2.5.0','price','showConfig','ongoing','\x20not\x20available\x20(see:\x20hodlerhacks.com/fix/5)','full','sort','node-forge','has','-config.json','find','balancing\x20resumed','OnMaintenance','\x20API\x20key,\x20secret\x20or\x20password\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','placeOrder','threshold','botname','\x20-\x20bot\x20already\x20running\x20in\x20manual\x20mode','error','resetHistory','\x20minutes','push','watchTrades()','\x20blocked\x20API\x20(RateLimitExceeded)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','excluded','write','slider','\x20/\x20','openOrders','\x20MB','value','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20trying\x20again\x20in\x20','startdate','Market','test','pid','emojibuy','success','includes','symbol','breakeven','watchTradesForSymbols','watchTradesForSymbols()','%\x20(','distribution','getOpenOrders()','bot-','EUR','loadMarkets','2654058wNBURt','Invalid\x20balance\x20for\x20','portfolio1','Reset\x20|\x20','Bot\x20','lowdb/adapters/FileSync','limit','1\x20-\x20FILLED\x20known\x20order:\x20','timestamp','storeFiat','BNB','toString','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','type','code','padStart','BTC','exchange\x20reload','15414588NovmgP','limits','change','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','configuration','cancel','Failed\x20to\x20load\x20coin\x20data\x20for\x20','/EUR','differenceInSeconds','marketcapApi','splice','status','rightTxt','forEach','valid','reverse','leftTxt','logs','getDate','length','abs','headless','exchange','getCoinNumber()','coin','add','join','exchanges','\x20>\x20stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','customId','2.6.23','-performance.json','Unknown\x20error:\x20','./logs/','args','InvalidOrder','eur',':\x20timer\x20>','cooldown','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','Exception\x20thrown\x20in\x20','timeout','InsufficientFunds','open','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','entries','send','format','log','time','buy','PermissionDenied','No\x20more\x20open\x20orders\x20-\x20','API-key\x20format\x20invalid','ordertype','orderId','initial','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','Order\x20is\x20invalid:\x20','***','Saving\x20configuration','Trigger:\x20','Waited\x20','offset','\x20|\x20Custom\x20ID:\x20','changes','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','bots','average','28828ebwbCC','substring','prevnumber','assign','yyyy/MM/dd','event-history','string','sells','fetchTickers()','autoliquidity','starting-balances','target','min','order','uncaughtException','defaults','Block\x20transaction\x20detection:\x20','number','toLowerCase','spot','/backup/',')\x20|\x20exchange:\x20','event','emitHistory','Placing\x20order\x20for:\x20','Exchange','marketcapEnabled','Bitget','util','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','secure','fetchBalance','getSeconds','\x20network\x20error:\x20','sendPortfolioTelegram','findIndex','quote','Updating\x20API\x20key\x20(not\x20saved\x20in\x20config\x20file\x20yet)','-events.json','Huobipro','getFullYear','10pUiRnw','Exchange\x20permission\x20denied\x20-\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','\x20|\x20exchange:\x20','Symbol(s):\x20','ID:\x20','\x20|\x20highest\x20fee:\x20','Resetting\x20coin\x20results:\x20','watchTrades','starting-balance-','coin-loading-progress','\x20API\x20key\x20is\x20invalid','getTime','argv','side','privateKey','Fee\x20discount\x20refund\x20detected:\x20','AuthenticationError','sendMetricsTelegram','kill','realized','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','2xlchCy','sortBy','\x20-\x20','none','Set\x20lock\x20orders\x20to:\x20','exec','0\x20-\x20EXECUTION:\x20','indexOf','liquidity',')\x20known\x20order:\x20','sell','NetworkError','trade','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','buys','LOCKED','Binance','total','/USD','balances','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','padEnd','initTickers()','7xTgItG','\x20-\x20bot\x20switched\x20to\x20manual\x20mode','usd','fetchOpenOrders','page','last','************','pop','./version.json','Error\x20in\x20loadSymbols():\x20','USDP','limit-low','data','lowdb','999YJhYQd','net-basecoin','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','Resuming\x20(','\x20attempts','275FMzzlA','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','production','filter','isEqual','RETRY\x20-\x20Error\x20in\x20','recent20','process\x20','request-time','Portfolio\x20change\x20detected:\x20','slice','Net\x20','Manual\x20balancing\x20required','closed','stringify','red_yellow_blue','portfolio','bb-secure.json','fiat','\x20:\x20','loading-canceled','Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute','amount','writeFile','Net\x20effect','market_cap','createOrder','\x20metrics:</b>\x20\x0a\x0a','toggleBotMode','onepagemode','fetchTickers','2.3.5','marketcap','\x20not\x20responding\x20(see:\x20hodlerhacks.com/fix/5)','getMonth','Error\x20in\x20testAPI():\x20','timeshift','\x20|\x20lock\x20orders:\x20','placeOrder()','PAXG','Initializing\x20exchange','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','limit-high','status\x20code\x20401','netoffset','\x20>\x20details:','Loading\x20completed','filled','set','market','heapUsed','fees','USD',':\x20Bot\x20','Initializing\x20exchange:\x20already\x20done','complete','decrypt','settings','amountToPrecision','function','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)','restart','loadSymbols()','bot','Error\x20while\x20deleting\x20files:\x20','apiKey','split','\x20exchange','search','parse','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','USDC','Error\x20details:','apiSecret','getHours','20248gjpIdp','cost','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)','\x20orders\x20in\x20less\x20than\x20','password','Invalid\x20symbol:\x20','replace','removed','percentage','1\x20-\x20partially\x20FILLED\x20(','showname','startsWith','\x20rejected\x20your\x20API\x20request\x20(see:\x20hodlerhacks.com/fix/4)','-results.json','added','change24h','highest','Pausing\x20for\x20','fetchBalance()','Order\x20filled:\x20','max','currency','\x20(see:\x20hodlerhacks.com/fix/1)','BUSD','getMinutes','startprice','Network\x20error\x20details:','constructor','remove','round','Avoiding\x20continuous\x20order\x20attempts','watchOrders()','\x20>\x20pausing\x20bot\x20for\x20','ETH','net-fiat','token\x20is\x20expired','recovery','get','\x20order:\x20','<b>','2\x20-\x20Validate\x20orders:\x20','testApi','startnumber','DDoSProtection','toFixed','datetime','delta','floor','</pre>','Exchange\x20error\x20details:','emojisell','TUSD','Headless:\x20','./config/','Order\x20amount\x20is\x20invalid:\x20','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','switch-manual','sqrt','Invalid\x20quantity','ExchangeError','cancelOrder','ccxt','progress','shift','RETRY\x20-\x20Problem\x20resolved\x20after\x20','\x20>\x20','fetchTicker','debug','USDT','basecoinvalue','keys','RSA-OAEP','Huobi','colorscheme','final','getStartingBalances','Initializing\x20coin\x20results','Unfilled\x20order(s)\x20canceled\x20after\x20','createWriteStream','mkdirSync','map','active','Valid\x20balance\x20for\x20','must\x20be\x20greater\x20than\x20minimum\x20amount','memoryUsage','3996201olPuWB','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','coins','running','pki','version','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','pro','\x20exchange\x20error:\x20','\x20API\x20secret\x20is\x20invalid','apiPassword','Insufficient\x20funds\x20to\x20execute\x20order:\x20','fee','cancelOrders()','Executed\x20','\x20minutes\x20-\x20','performance','getPortfolio','date','1845234AQcZKF','update-liquidity','cloneDeep','basecoin','\x20|\x20','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','watchOrders','warning','remainingSymbols','(((.+)+)+)+$'];_0x4c83=function(){return _0x21d607;};return _0x4c83();}async function validateOrders(_0x17f4e8){const _0x494c42=_0x13a2d5;if(_0x17f4e8)validateOrdersState=_0x17f4e8;logger[_0x494c42(0x1dc)]('1\x20-\x20Validate\x20orders:\x20'+validateOrdersState+_0x494c42(0x339)+Object[_0x494c42(0x1df)](ORDERS)[lockOrders]);let _0x25e5af=[],_0xbbd636=config[_0x494c42(0x29d)]==_0x494c42(0x345)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config['timeout']*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x494c42(0x2f9)])return;logger[_0x494c42(0x1dc)](_0x494c42(0x1c1)+validateOrdersState);for(let _0x2004b1=lastOrders[_0x494c42(0x27a)]-0x1;_0x2004b1>=0x0;_0x2004b1--){let _0x258d26=lastOrders[_0x2004b1],_0x276001=![];_0x258d26['filled']>0x0&&(_0x276001=!![]),_0x25e5af[_0x494c42(0x239)](_0x276001),_0x276001&&config[_0x494c42(0x29d)]!=_0x494c42(0x345)&&logHistory(_0x494c42(0x2b9),_0x494c42(0x1ac)+_0x258d26[_0x494c42(0x24b)]+'\x20'+_0x258d26[_0x494c42(0x2e2)]+'\x20#'+formatResult(_0x258d26[_0x494c42(0x343)],0x8)+'\x20@'+formatResult(_0x258d26[_0x494c42(0x225)],0x8)),_0x276001&&lastOrders[_0x494c42(0x271)](_0x2004b1,0x1);}persistOpenOrders(lastOrders);const _0x25c11a=coolingDown?'balancing\x20resumes\x20when\x20cooldown\x20ends':_0x494c42(0x22f);if(validateOrdersState=='initial'){validateOrdersState=_0x494c42(0x227);if(_0x25e5af['includes'](![])){}else await unlockOrders();}else{if(validateOrdersState=='ongoing'){if(_0x25e5af[_0x494c42(0x24a)](![])){}else await unlockOrders();}else{if(validateOrdersState==_0x494c42(0x1e3))_0x25e5af[_0x494c42(0x24a)](![])&&(config[_0x494c42(0x29d)]==_0x494c42(0x345)?logHistory(_0x494c42(0x249),'Order(s)\x20not\x20validated\x20after\x20'+Math['round'](_0xbbd636*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x25c11a):(await cancelOrders(),logHistory('success',_0x494c42(0x1e6)+Math['round'](_0xbbd636*validateOrderInterval/0xea60)+_0x494c42(0x1fd)+_0x25c11a))),await unlockOrders(!![]);else{if(validateOrdersState=='no\x20open\x20orders'){if(config[_0x494c42(0x29d)]!=_0x494c42(0x345))logHistory(_0x494c42(0x249),_0x494c42(0x29b)+_0x25c11a);await unlockOrders(!![]);}}}}}async function cancelOrders(){lastOrders['forEach'](async _0x13986d=>{const _0x50e5e1=_0x130f;try{const _0x4a4e98=await exchange[_0x50e5e1(0x1d5)](_0x13986d[_0x50e5e1(0x29e)],_0x13986d[_0x50e5e1(0x24b)]);}catch(_0x1aa54f){if(_0x1aa54f[_0x50e5e1(0x260)]()[_0x50e5e1(0x24a)]('OrderNotFound')){}else await handleError(_0x1aa54f,_0x50e5e1(0x1fb));}});}async function initCoinResults(_0x569f92){const _0x389236=_0x13a2d5;_0x569f92?logger[_0x389236(0x1dc)](_0x389236(0x2db)+_0x569f92):logger[_0x389236(0x1dc)](_0x389236(0x1e5)),config[_0x389236(0x324)][_0x389236(0x274)](_0x5cb645=>{const _0x17c2f1=_0x389236;if(!_0x5cb645[_0x17c2f1(0x23c)]&&_0x5cb645['coin']!=config['basecoin']){const _0x386700=currentCoins[_0x17c2f1(0x22e)](_0xe5dfb=>_0xe5dfb[_0x17c2f1(0x27f)]==_0x5cb645[_0x17c2f1(0x27f)]),_0x2ad506=gTicker[noslash(_0x5cb645[_0x17c2f1(0x24b)])];let _0x42bbb5=_0x386700?_0x386700[_0x17c2f1(0x2bd)]:null,_0x1de050=_0x5cb645[_0x17c2f1(0x276)]?0x1/_0x2ad506:_0x2ad506,_0x9f0d69;config[_0x17c2f1(0x2f2)][_0x17c2f1(0x274)](_0x420114=>{const _0x3ec4da=_0x17c2f1;!_0x9f0d69&&(_0x9f0d69=_0x420114[_0x3ec4da(0x2a8)]['find'](_0x41774c=>_0x41774c[_0x3ec4da(0x27f)]==_0x5cb645[_0x3ec4da(0x27f)]),_0x9f0d69&&(_0x42bbb5=_0x9f0d69[_0x3ec4da(0x2bd)],_0x1de050=_0x9f0d69['price']));});let _0x4c0bd2=dbCoinResults['get'](_0x17c2f1(0x1f0))[_0x17c2f1(0x22e)]({'coin':_0x5cb645['coin']})[_0x17c2f1(0x242)]();if(!_0x4c0bd2){const _0x46d349={'coin':_0x5cb645[_0x17c2f1(0x27f)],'number':_0x42bbb5,'breakeven':_0x1de050,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x17c2f1(0x1be)](_0x17c2f1(0x1f0))[_0x17c2f1(0x239)](_0x46d349)['write']();}else{if(_0x569f92&&_0x5cb645[_0x17c2f1(0x27f)]==_0x569f92){const _0x5668a2={'coin':_0x5cb645[_0x17c2f1(0x27f)],'number':_0x42bbb5,'breakeven':_0x1de050,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get'](_0x17c2f1(0x1f0))['find']({'coin':_0x5cb645[_0x17c2f1(0x27f)]})[_0x17c2f1(0x2af)](_0x5668a2)[_0x17c2f1(0x23d)]();}}}});}async function updateCoinResults(_0x12f91b,_0x37db45=![]){const _0x253460=_0x13a2d5;let _0x271acc,_0x3406bb,_0x2bd448,_0x48372b,_0x598eeb,_0x352ec5,_0x24e551=dbCoinResults[_0x253460(0x1be)](_0x253460(0x1f0))[_0x253460(0x22e)]({'coin':_0x12f91b[_0x253460(0x27f)]})['value'](),_0x44ee05=![];_0x24e551&&Object[_0x253460(0x294)](_0x24e551)[_0x253460(0x274)](([_0x506c85,_0x3f7a6b])=>{if(_0x3f7a6b==null)_0x44ee05=!![];});(!_0x24e551||_0x44ee05)&&(await initCoinResults(_0x12f91b['coin']),_0x24e551=dbCoinResults[_0x253460(0x1be)](_0x253460(0x1f0))[_0x253460(0x22e)]({'coin':_0x12f91b[_0x253460(0x27f)]})[_0x253460(0x242)]());_0x12f91b[_0x253460(0x276)]&&(_0x352ec5={'filled':_0x12f91b[_0x253460(0x343)]*_0x12f91b[_0x253460(0x225)],'amount':_0x12f91b[_0x253460(0x343)]*_0x12f91b[_0x253460(0x225)],'side':_0x12f91b[_0x253460(0x2e2)]==_0x253460(0x2f4)?'buy':'sell','price':0x1/_0x12f91b[_0x253460(0x225)]},_0x12f91b={..._0x12f91b,..._0x352ec5});_0x37db45?_0x3406bb=_0x12f91b[_0x253460(0x2e2)]=='buy'?_0x24e551[_0x253460(0x2bd)]+_0x12f91b['filled']:_0x24e551[_0x253460(0x2bd)]-_0x12f91b[_0x253460(0x343)]:_0x3406bb=await getCoinNumber(_0x12f91b[_0x253460(0x27f)]);if(_0x12f91b[_0x253460(0x1fa)]&&_0x12f91b[_0x253460(0x1fa)]['currency']==config[_0x253460(0x204)])_0x271acc=Number(_0x12f91b[_0x253460(0x1fa)][_0x253460(0x362)]);else{if(_0x12f91b[_0x253460(0x1fa)]&&_0x12f91b[_0x253460(0x1fa)][_0x253460(0x1ae)]==_0x253460(0x25f)&&!_0x37db45&&config['basecoin']!=_0x253460(0x33b))_0x271acc=Number(_0x12f91b[_0x253460(0x1fa)][_0x253460(0x362)])*gTicker[_0x253460(0x25f)+config['basecoin']];else _0x271acc=defaultFee*_0x12f91b['filled']*_0x12f91b['price'];}_0x12f91b[_0x253460(0x2e2)]==_0x253460(0x299)?(_0x2bd448=_0x3406bb!=0x0?(_0x24e551['breakeven']*_0x24e551['number']+_0x12f91b['price']*(_0x3406bb-_0x24e551[_0x253460(0x2bd)])+_0x271acc)/_0x3406bb:0x0,_0x48372b=_0x24e551[_0x253460(0x2e8)]):(_0x2bd448=_0x3406bb!=0x0?(_0x24e551[_0x253460(0x24c)]*_0x24e551[_0x253460(0x2bd)]-_0x12f91b['price']*(_0x24e551[_0x253460(0x2bd)]-_0x3406bb)+_0x271acc)/_0x3406bb:0x0,_0x48372b=_0x24e551[_0x253460(0x2e8)]+(_0x12f91b[_0x253460(0x225)]-_0x24e551[_0x253460(0x24c)])*_0x12f91b[_0x253460(0x343)]);_0x598eeb=(_0x12f91b[_0x253460(0x225)]-_0x2bd448-_0x271acc/_0x12f91b[_0x253460(0x343)])*_0x3406bb;let _0x2409e2={'coin':_0x12f91b[_0x253460(0x27f)],'number':_0x3406bb,'breakeven':formatResult(_0x2bd448,0x8),'realized':formatResult(_0x48372b,0x8),'unrealized':formatResult(_0x598eeb,0x8),'fees':formatResult(_0x24e551[_0x253460(0x347)]+_0x271acc,0x8),'sells':_0x12f91b[_0x253460(0x2e2)]==_0x253460(0x2f4)?_0x24e551[_0x253460(0x2b3)]+0x1:_0x24e551[_0x253460(0x2b3)],'buys':_0x12f91b[_0x253460(0x2e2)]==_0x253460(0x299)?_0x24e551['buys']+0x1:_0x24e551[_0x253460(0x2f8)]};dbCoinResults[_0x253460(0x1be)](_0x253460(0x1f0))['find']({'coin':_0x12f91b[_0x253460(0x27f)]})[_0x253460(0x2af)](_0x2409e2)['write']();if(!_0x37db45){if(_0x12f91b[_0x253460(0x1fa)]&&_0x12f91b[_0x253460(0x1fa)][_0x253460(0x1ae)]=='BNB'){const _0x395fc8=currentCoins[_0x253460(0x22e)](_0x513c66=>_0x513c66[_0x253460(0x27f)]==_0x253460(0x25f));if(_0x395fc8){let _0x2df154=dbCoinResults[_0x253460(0x1be)](_0x253460(0x1f0))[_0x253460(0x22e)]({'coin':_0x253460(0x25f)})[_0x253460(0x242)]();_0x2409e2={..._0x2df154,'number':_0x395fc8['number']},dbCoinResults[_0x253460(0x1be)]('coins')[_0x253460(0x22e)]({'coin':_0x253460(0x25f)})[_0x253460(0x2af)](_0x2409e2)[_0x253460(0x23d)]();}}}}async function placeOrder(_0x5e1b44){const _0x1327f5=_0x13a2d5,_0x4123e3=config[_0x1327f5(0x29d)]==_0x1327f5(0x345)?'market':_0x1327f5(0x25b);if(lockOrders==ORDERS[_0x1327f5(0x20d)]&&!coolingDown){setLockOrders(ORDERS[_0x1327f5(0x2f9)]);while(transactionDetectionOngoing){await sleep(0x64);}logger[_0x1327f5(0x1dc)](_0x1327f5(0x2c4)+_0x5e1b44['map'](_0x39adbc=>_0x39adbc[_0x1327f5(0x27f)])[_0x1327f5(0x281)](',\x20')),lastCoinsToBalance='',allOrdersPlaced=![],validateOrdersState=_0x1327f5(0x29f);let _0x5ef444=![];lastOrders=[];const _0x5d842b=config[_0x1327f5(0x233)];for(const _0x3119e6 of _0x5e1b44){let _0x1d42ef,_0x546059,_0x4d7732,_0x4e0b28,_0x2afc68,_0x89566d=_0x3119e6[_0x1327f5(0x24b)];logger[_0x1327f5(0x1dc)](_0x1327f5(0x2a4)+_0x3119e6[_0x1327f5(0x27f)]+'\x20'+_0x3119e6['number']+'\x20'+_0x3119e6[_0x1327f5(0x306)]+'\x20'+_0x3119e6[_0x1327f5(0x250)]+'%\x20'+_0x3119e6[_0x1327f5(0x2b7)]+'%\x20'+(0x64*_0x3119e6[_0x1327f5(0x1c7)])[_0x1327f5(0x1c5)](0x2)+_0x1327f5(0x24f)+_0x5d842b[_0x1327f5(0x1c5)](0x2)+'%)');const _0x2a78eb=currentCoins[_0x1327f5(0x22e)](_0x43af83=>_0x43af83[_0x1327f5(0x27f)]==_0x3119e6[_0x1327f5(0x27f)]);_0x2a78eb&&(_0x2a78eb[_0x1327f5(0x2ae)]=_0x3119e6['number']);try{const _0x49c6b8=await exchange[_0x1327f5(0x1db)](_0x89566d);_0x1d42ef=_0x3119e6[_0x1327f5(0x276)]?0x1/_0x3119e6[_0x1327f5(0x306)]:_0x3119e6[_0x1327f5(0x306)],_0x546059=_0x49c6b8['bid'],_0x4d7732=_0x49c6b8[_0x1327f5(0x223)];_0x3119e6['reverse']?(_0x4e0b28=_0x3119e6['side']==_0x1327f5(0x299)?_0x1327f5(0x2f4):_0x1327f5(0x299),_0x2afc68=Math[_0x1327f5(0x27b)](_0x3119e6[_0x1327f5(0x2f6)])/_0x1d42ef):(_0x4e0b28=_0x3119e6['side'],_0x2afc68=Math[_0x1327f5(0x27b)](_0x3119e6[_0x1327f5(0x2f6)]));_0x4123e3=='limit'&&(config[_0x1327f5(0x29d)]==_0x1327f5(0x33e)&&(_0x1d42ef=_0x4e0b28==_0x1327f5(0x299)?_0x546059:_0x4d7732),config[_0x1327f5(0x29d)]==_0x1327f5(0x30c)&&(_0x1d42ef=_0x4e0b28==_0x1327f5(0x299)?_0x4d7732:_0x546059));_0x2afc68=formatResult(_0x2afc68,0x8),_0x1d42ef=formatResult(_0x1d42ef,0x8);const _0x5c4d10=_0x4e0b28==_0x1327f5(0x2f4)?config[_0x1327f5(0x1cb)]?String['fromCodePoint']('0x'+config['emojisell'])+'\x20':'':config[_0x1327f5(0x248)]?String['fromCodePoint']('0x'+config[_0x1327f5(0x248)])+'\x20':'',_0x24f54a=_0x4123e3==_0x1327f5(0x345)?_0x1327f5(0x245):config['ordertype']==_0x1327f5(0x33e)?'Limit\x20(high-margin)':'Limit\x20(low-margin)',_0x3cddf2=(Math[_0x1327f5(0x1c8)](Math['random']()*0x35a4e900)+0x5f5e100)[_0x1327f5(0x260)]();lastOrders[_0x1327f5(0x239)]({'customId':_0x3cddf2,'symbol':_0x89566d,'coin':_0x3119e6['coin'],'amount':_0x2afc68,'price':_0x1d42ef,'side':_0x4e0b28,'reverse':_0x3119e6[_0x1327f5(0x276)],'filled':0x0});if(_0x4123e3==_0x1327f5(0x345))logHistory(_0x1327f5(0x2b9),''+_0x5c4d10+_0x24f54a+_0x1327f5(0x1bf)+_0x89566d+'\x20'+_0x4e0b28+'\x20#'+formatResult(_0x2afc68,0x8)+'\x20@'+formatResult(_0x1d42ef,0x8));else logHistory(_0x1327f5(0x2b9),''+_0x5c4d10+_0x24f54a+'\x20order:\x20'+_0x89566d+'\x20'+_0x4e0b28+'\x20#'+formatResult(_0x2afc68,0x8)+'\x20@'+formatResult(_0x1d42ef,0x8));let _0x34e290;_0x4123e3=='market'?_0x4e0b28==_0x1327f5(0x299)&&['Bybit',_0x1327f5(0x2c7),'Cex',_0x1327f5(0x1e1),_0x1327f5(0x2d3)]['includes'](config['exchange'])?_0x34e290=await exchange[_0x1327f5(0x32e)](_0x89566d,_0x4123e3,_0x4e0b28,_0x2afc68,_0x1d42ef):_0x34e290=await exchange['createOrder'](_0x89566d,_0x4123e3,_0x4e0b28,_0x2afc68,undefined):_0x34e290=await exchange[_0x1327f5(0x32e)](_0x89566d,_0x4123e3,_0x4e0b28,_0x2afc68,_0x1d42ef);logger[_0x1327f5(0x1dc)](_0x1327f5(0x2d9)+_0x34e290['id']+_0x1327f5(0x2a7)+_0x3cddf2);const _0x4e7496=lastOrders[_0x1327f5(0x27a)]-0x1;if(_0x4e7496>=0x0&&lastOrders[_0x4e7496][_0x1327f5(0x284)]==_0x3cddf2){lastOrders[_0x4e7496][_0x1327f5(0x29e)]=_0x34e290['id'];if(_0x34e290['amount'])lastOrders[_0x4e7496]['amount']=_0x34e290[_0x1327f5(0x32a)];if(_0x34e290[_0x1327f5(0x225)])lastOrders[_0x4e7496][_0x1327f5(0x225)]=_0x34e290[_0x1327f5(0x225)];lastOrders[_0x4e7496][_0x1327f5(0x1fa)]=_0x34e290['fee'];}if(config['cooldown']!=0x0){let _0x1846ae=null;if(cooldownTracker[_0x1327f5(0x27a)]==config[_0x1327f5(0x28d)]-0x1)_0x1846ae=cooldownTracker[_0x1327f5(0x1d8)]();const _0x1fe1d9=getTimeStamp();cooldownTracker[_0x1327f5(0x239)](_0x1fe1d9);if(_0x1846ae){const _0x59e25c=fns[_0x1327f5(0x26f)](new Date(_0x1fe1d9),new Date(_0x1846ae));if(_0x59e25c<cooldownInterval){logHistory(_0x1327f5(0x236),_0x1327f5(0x1fc)+config[_0x1327f5(0x28d)]+_0x1327f5(0x19c)+cooldownInterval/0x3c+_0x1327f5(0x1d0)+cooldownPeriod/(0xe10*0x3e8)+_0x1327f5(0x216)),coolingDown=!![];break;}}}}catch(_0x1bf528){if(_0x1bf528[_0x1327f5(0x260)]()[_0x1327f5(0x24a)]('MIN_NOTIONAL'))lastOrders=lastOrders[_0x1327f5(0x317)](_0x484753=>_0x484753[_0x1327f5(0x24b)]!=_0x89566d),logHistory('error',_0x1327f5(0x206)+_0x89566d),_0x5ef444=!![];else{if(_0x1bf528[_0x1327f5(0x260)]()[_0x1327f5(0x24a)](_0x1327f5(0x1d3)))lastOrders=lastOrders[_0x1327f5(0x317)](_0x30a3e0=>_0x30a3e0[_0x1327f5(0x24b)]!=_0x89566d),logHistory(_0x1327f5(0x236),_0x1327f5(0x1cf)+_0x89566d),_0x5ef444=!![];else{if(_0x1bf528['toString']()[_0x1327f5(0x24a)](_0x1327f5(0x28a)))lastOrders=lastOrders['filter'](_0x47cd22=>_0x47cd22[_0x1327f5(0x24b)]!=_0x89566d),logHistory('error',_0x1327f5(0x2a1)+_0x89566d),logger[_0x1327f5(0x1dc)](_0x1bf528),_0x5ef444=!![];else _0x1bf528['toString']()[_0x1327f5(0x24a)](_0x1327f5(0x1ec))?(lastOrders=lastOrders['filter'](_0x19dc85=>_0x19dc85[_0x1327f5(0x24b)]!=_0x89566d),logHistory(_0x1327f5(0x236),_0x1327f5(0x206)+_0x89566d),_0x5ef444=!![]):(lastOrders=lastOrders[_0x1327f5(0x317)](_0x47a7db=>_0x47a7db[_0x1327f5(0x24b)]!=_0x89566d),await handleError(_0x1bf528,_0x1327f5(0x33a),_0x89566d));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders['length']>0x0){const _0x516c2e=config[_0x1327f5(0x29d)]=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0x1327f5(0x290)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x516c2e);}else unlockOrders();_0x5ef444&&config['headless']&&(logHistory(_0x1327f5(0x236),_0x1327f5(0x1b7)+pauseBotMsg),await pauseBot(pauseBotInterval)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory('success','Cooldown\x20ended\x20-\x20balancing\x20resumed'));}else{if(coolingDown)!config[_0x1327f5(0x27c)]&&logHistory(_0x1327f5(0x236),_0x1327f5(0x350));else lockOrders!=ORDERS['UNLOCKED']&&(!config[_0x1327f5(0x27c)]&&(config['ordertype']=='market'?logHistory(_0x1327f5(0x236),_0x1327f5(0x2e9)):logHistory(_0x1327f5(0x236),_0x1327f5(0x28e))));}}function persistOpenOrders(_0x605335){const _0x4a9116=_0x13a2d5,_0x164476={...config,'openOrders':_0x605335};let _0x2cf4e2=dbConfig[_0x4a9116(0x1be)](_0x4a9116(0x354))['find']({'botID':botID})[_0x4a9116(0x242)]();_0x2cf4e2&&dbConfig[_0x4a9116(0x1be)](_0x4a9116(0x354))[_0x4a9116(0x22e)]({'botID':botID})[_0x4a9116(0x2af)](_0x164476)[_0x4a9116(0x23d)]();}function restoreOrders(){const _0x2d7c75=_0x13a2d5;let _0x135219;config[_0x2d7c75(0x240)]&&allOpenOrders[_0x2d7c75(0x274)](_0x48b96a=>{const _0x2cdc52=_0x2d7c75,_0x2ad20e=config[_0x2cdc52(0x240)][_0x2cdc52(0x22e)](_0x25ad64=>_0x25ad64[_0x2cdc52(0x29e)]==_0x48b96a['id']);_0x2ad20e&&(lastOrders[_0x2cdc52(0x239)](_0x2ad20e),_0x135219=_0x48b96a[_0x2cdc52(0x25d)]);});if(lastOrders['length']>0x0){setLockOrders(ORDERS[_0x2d7c75(0x2f9)]),validateOrdersState='ongoing',allOrdersPlaced=!![];const _0x233aff=new Date()[_0x2d7c75(0x2e0)](),_0x1528c7=config[_0x2d7c75(0x29d)]==_0x2d7c75(0x345)?validateOrderTimeout*0x3c*0x3e8:config[_0x2d7c75(0x290)]*0x3c*0x3e8;if(_0x135219+_0x1528c7>_0x233aff){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x2e0d79=_0x2d7c75;validateOrders(_0x2e0d79(0x1e3));},_0x135219+_0x1528c7-_0x233aff);}else validateOrders('final');}}async function sendMetricsTelegram(){const _0x1e7fe8=_0x13a2d5;if(!coinsLoaded){process[_0x1e7fe8(0x295)]({'telegrammsg':_0x1e7fe8(0x329)},_0x256ad0=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x4c2bdf='';if(config['showname'])_0x4c2bdf=_0x1e7fe8(0x1c0)+config[_0x1e7fe8(0x234)]+_0x1e7fe8(0x32f);else _0x4c2bdf='<b>Bot\x20'+botID+_0x1e7fe8(0x32f);const _0x4bd607=getKPIs(_0x1e7fe8(0x204)),_0xd222aa=getKPIs('fiat',config[_0x1e7fe8(0x326)]),_0x5aeab8=getKPIs(_0x1e7fe8(0x310)),_0x59d1d2=getKPIs(_0x1e7fe8(0x1bb),config[_0x1e7fe8(0x326)]);_0x4c2bdf+=_0x1e7fe8(0x21d),_0x4c2bdf+=_0x4bd607[_0x1e7fe8(0x277)]+_0x1e7fe8(0x327)+_0x4bd607['value']+'\x0a',_0x4c2bdf+=_0x4bd607[_0x1e7fe8(0x273)]+':\x20'+_0x4bd607[_0x1e7fe8(0x269)]+'%\x0a',_0x4c2bdf+=_0xd222aa[_0x1e7fe8(0x277)]+_0x1e7fe8(0x327)+_0xd222aa['value']+'\x0a',_0x4c2bdf+=_0xd222aa[_0x1e7fe8(0x273)]+':\x20'+_0xd222aa[_0x1e7fe8(0x269)]+'%\x0a',_0x4c2bdf+=_0x5aeab8[_0x1e7fe8(0x277)]+':\x20'+_0x5aeab8[_0x1e7fe8(0x242)]+'\x20('+config[_0x1e7fe8(0x204)]+')\x0a',_0x4c2bdf+=_0x5aeab8[_0x1e7fe8(0x273)]+':\x20'+_0x5aeab8[_0x1e7fe8(0x269)]+'%\x20('+config['basecoin']+')\x0a',_0x4c2bdf+=_0x59d1d2[_0x1e7fe8(0x277)]+':\x20'+_0x59d1d2[_0x1e7fe8(0x242)]+'\x20('+config[_0x1e7fe8(0x326)]+')\x0a',_0x4c2bdf+=_0x59d1d2['rightTxt']+':\x20'+_0x59d1d2[_0x1e7fe8(0x269)]+_0x1e7fe8(0x24f)+config[_0x1e7fe8(0x326)]+')\x0a',_0x4c2bdf+='</pre>',process['send']({'telegrammsg':_0x4c2bdf},_0xc4656e=>{});}async function sendPortfolioTelegram(){const _0x160406=_0x13a2d5;if(!coinsLoaded||!currentCoins[0x0]['distribution']){process[_0x160406(0x295)]({'telegrammsg':_0x160406(0x329)},_0x3a1b81=>{});return;}let _0x348b46='';if(config[_0x160406(0x1a3)])_0x348b46=_0x160406(0x1c0)+config['botname']+_0x160406(0x222);else _0x348b46='<b>Bot\x20'+botID+_0x160406(0x222);_0x348b46+=_0x160406(0x21d),_0x348b46+=_0x160406(0x220),_0x348b46+=_0x160406(0x311),_0x348b46+='-------------------------------\x0a',currentCoins['forEach'](_0x229025=>{const _0x5d5afe=_0x160406;_0x348b46+=_0x229025[_0x5d5afe(0x27f)][_0x5d5afe(0x2ff)](0x7)+'|\x20'+formatPad(_0x229025[_0x5d5afe(0x250)],0x2,0x6)+'|\x20'+formatPad(_0x229025['target'],0x2,0x6)+'|\x20'+formatPad(_0x229025[_0x5d5afe(0x1c7)]*0x64,0x2,0x6)+'\x0a';}),_0x348b46+=_0x160406(0x1c9),process['send']({'telegrammsg':_0x348b46},_0x301904=>{});}function formatPad(_0x7b2d62,_0x3ec034,_0x2eb14f){const _0x739dc=_0x13a2d5,_0x1109e1=formatResultString(_0x7b2d62,_0x3ec034);return _0x1109e1?_0x1109e1[_0x739dc(0x264)](_0x2eb14f):''['padStart'](_0x2eb14f);}function logHistory(_0x23c7f6,_0x4224a2,_0xa84afe=''){const _0x2ba3c7=_0x13a2d5;logger['full'](''+_0x4224a2);let _0xfd38e9={'time':getTimeStamp(),'type':_0x23c7f6,'event':_0x4224a2};dbLogs['get'](_0x2ba3c7(0x278))[_0x2ba3c7(0x239)](_0xfd38e9)[_0x2ba3c7(0x23d)]();if(_0xa84afe=='')_0xa84afe=_0x4224a2;proxyEmit('event',{'log':_0xfd38e9,'summary':_0xa84afe}),process[_0x2ba3c7(0x295)]({'telegram':{..._0xfd38e9,'botname':config[_0x2ba3c7(0x234)],'showname':config[_0x2ba3c7(0x1a3)]}},_0x20e9e4=>{});}function emitHistory(_0x1b3952={}){const _0x55177f=_0x13a2d5;Object['keys'](_0x1b3952)[_0x55177f(0x27a)]==0x0&&(_0x1b3952={'type':['order','event'],'event':'','page':0x1});if(_0x1b3952[_0x55177f(0x262)][_0x55177f(0x24a)](_0x55177f(0x2c2)))_0x1b3952[_0x55177f(0x262)]['splice'](_0x1b3952[_0x55177f(0x262)][_0x55177f(0x2f1)](_0x55177f(0x2c2)),0x1,_0x55177f(0x236),_0x55177f(0x208),_0x55177f(0x249));if(dbLogs[_0x55177f(0x22c)](_0x55177f(0x278))[_0x55177f(0x242)]()){let _0x2b97dc=dbLogs[_0x55177f(0x1be)](_0x55177f(0x278))[_0x55177f(0x317)](_0x40b545=>{const _0xb084e0=_0x55177f;if(_0x1b3952[_0xb084e0(0x262)][_0xb084e0(0x27a)]==0x0)return![];else return _0x1b3952[_0xb084e0(0x262)]['includes'](_0x40b545['type']);})[_0x55177f(0x317)](_0xe4d22c=>{const _0x172a35=_0x55177f;if(_0x1b3952[_0x172a35(0x2c2)]=='')return!![];else return _0xe4d22c['event'][_0x172a35(0x2be)]()[_0x172a35(0x24a)](_0x1b3952[_0x172a35(0x2c2)]['toLowerCase']());})[_0x55177f(0x2eb)](_0x55177f(0x298)),_0x3d3154=_0x2b97dc['value']()[_0x55177f(0x27a)];_0x2b97dc=_0x2b97dc[_0x55177f(0x276)]()[_0x55177f(0x31e)]((_0x1b3952[_0x55177f(0x305)]-0x1)*logPageSize,_0x1b3952[_0x55177f(0x305)]*logPageSize-0x1)[_0x55177f(0x276)]()['value'](),proxyEmit(_0x55177f(0x2b1),{'logs':_0x2b97dc,'total':_0x3d3154});}else proxyEmit('event-history',{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x475cff){const _0x355f9e=_0x13a2d5;if(dbLogs[_0x355f9e(0x22c)](_0x355f9e(0x278))[_0x355f9e(0x242)]()){const _0x422f99=dbLogs[_0x355f9e(0x1be)]('logs')['sortBy'](_0x355f9e(0x298))[_0x355f9e(0x317)](_0x2dbc6f=>{const _0x4869e2=_0x355f9e;return _0x2dbc6f[_0x4869e2(0x262)]==_0x4869e2(0x2b9);})['value']();dbLogs[_0x355f9e(0x1be)](_0x355f9e(0x278))[_0x355f9e(0x1b5)]()[_0x355f9e(0x23d)](),dbLogs[_0x355f9e(0x1be)](_0x355f9e(0x278))[_0x355f9e(0x2af)](_0x422f99)['write'](),emitHistory(_0x475cff);}}async function pauseBot(_0x396039=pauseBotIntervalShort,_0x36a6c4,_0x59d400,_0xadf4d3=![]){const _0x43d8b2=_0x13a2d5,_0x407b5b=new Date()['getTime']();if(!lastErrorShown||_0x407b5b-lastErrorShown>=_0x396039){lastErrorShown=_0x407b5b;if(!lastBotPause)lastBotPause=_0x407b5b,consecutivePauses=0x1;else{if(_0x407b5b-lastBotPause-_0x396039<0x5a*0x3e8){consecutivePauses++;if(consecutivePauses>maxPauseRetries){if(_0xadf4d3){logHistory(_0x43d8b2(0x236),_0x36a6c4+_0x43d8b2(0x283)),await killBot();return;}else logHistory(_0x43d8b2(0x236),_0x36a6c4+pauseBotMsg),_0x396039=pauseBotInterval;}}else consecutivePauses=0x1;lastBotPause=_0x407b5b;}_0x59d400?logger[_0x43d8b2(0x1dc)]('('+consecutivePauses+')\x20'+_0x36a6c4+_0x43d8b2(0x341),_0x59d400):logger['debug']('('+consecutivePauses+')\x20'+_0x36a6c4);if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);await sleep(_0x396039),botPaused=![],_0x396039==pauseBotIntervalShort?resumeBot(!![]):resumeBot(![]);}}}async function killBot(){const _0x14631b=_0x13a2d5;botPaused=!![],await sleep(0x3e8),process['send']({'stop':_0x14631b(0x2e7)},_0x3e28fe=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x5bd76e,_0x41bc84,_0x209a76=![]){const _0x22e78a=_0x13a2d5;if(botPaused)return;let _0x5425ab;const _0x52bf89=config[_0x22e78a(0x27d)]||_0x22e78a(0x2c5);if(_0x41bc84)logger[_0x22e78a(0x1dc)](_0x22e78a(0x28f)+_0x41bc84);const _0x26b42=()=>{loading['error']=!![],emitLoadingProgress();};if(_0x5bd76e[_0x22e78a(0x260)]()[_0x22e78a(0x24a)]('API-key\x20format\x20invalid'))logHistory(_0x22e78a(0x236),_0x52bf89+'\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)'),_0x26b42();else{if(_0x5bd76e[_0x22e78a(0x260)]()[_0x22e78a(0x24a)](_0x22e78a(0x33d)))logHistory(_0x22e78a(0x236),_0x52bf89+'\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)'),_0x26b42();else{if(_0x5bd76e[_0x22e78a(0x260)]()[_0x22e78a(0x24a)](_0x22e78a(0x2e5)))config[_0x22e78a(0x1f8)]?_0x5425ab=_0x52bf89+'\x20API\x20key,\x20secret\x20or\x20password\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange':_0x5425ab=_0x52bf89+'\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange',logHistory(_0x22e78a(0x236),_0x5425ab+_0x22e78a(0x1af)),_0x26b42();else{if(_0x5bd76e[_0x22e78a(0x260)]()[_0x22e78a(0x24a)]('PermissionDenied'))logHistory('error',_0x52bf89+'\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)'),_0x26b42();else{if(!_0x209a76)await handleError(_0x5bd76e,null);}}}}}async function handleError(_0x1dbab4,_0x455203,_0x40643c=''){const _0x54d431=_0x13a2d5;if(botPaused)return;let _0x29b33a;const _0x13ebd5=config[_0x54d431(0x27d)]||_0x54d431(0x2c5);if(_0x455203)logger[_0x54d431(0x1dc)](_0x54d431(0x28f)+_0x455203);if(_0x1dbab4[_0x54d431(0x260)]()[_0x54d431(0x24a)](_0x54d431(0x1c4)))_0x29b33a=_0x13ebd5+_0x54d431(0x218),await pauseBot(undefined,_0x29b33a,_0x1dbab4);else{if(_0x1dbab4['toString']()[_0x54d431(0x24a)]('RateLimitExceeded'))_0x29b33a=_0x13ebd5+_0x54d431(0x23b),await pauseBot(undefined,_0x29b33a,_0x1dbab4);else{if(_0x1dbab4[_0x54d431(0x260)]()[_0x54d431(0x24a)]('ExchangeNotAvailable')||_0x1dbab4['toString']()[_0x54d431(0x24a)](_0x54d431(0x230)))_0x29b33a=_0x13ebd5+_0x54d431(0x228),await pauseBot(undefined,_0x29b33a,_0x1dbab4[_0x54d431(0x260)]());else{if(_0x1dbab4['toString']()[_0x54d431(0x24a)]('RequestTimeout'))_0x29b33a=_0x13ebd5+_0x54d431(0x335),await pauseBot(undefined,_0x29b33a,_0x1dbab4[_0x54d431(0x260)]());else{if(_0x1dbab4[_0x54d431(0x260)]()[_0x54d431(0x24a)](_0x54d431(0x2f7)))_0x29b33a=_0x13ebd5+'\x20closed\x20the\x20connection\x20(see:\x20hodlerhacks.com/fix/5)',await pauseBot(undefined,_0x29b33a,_0x1dbab4[_0x54d431(0x260)]());else{if(_0x1dbab4[_0x54d431(0x260)]()[_0x54d431(0x2be)]()[_0x54d431(0x24a)]('timestamp')||_0x1dbab4[_0x54d431(0x260)]()[_0x54d431(0x2be)]()[_0x54d431(0x24a)](_0x54d431(0x31c)))_0x29b33a=_0x54d431(0x351),await pauseBot(undefined,_0x29b33a,_0x1dbab4[_0x54d431(0x260)]());else{if(_0x1dbab4['toString']()[_0x54d431(0x24a)]('InvalidNonce'))_0x29b33a=_0x13ebd5+_0x54d431(0x1a5),await pauseBot(undefined,_0x29b33a,_0x1dbab4['toString']());else{if(_0x1dbab4 instanceof ccxt[_0x54d431(0x2f5)])_0x29b33a=_0x13ebd5+_0x54d431(0x2cd)+_0x1dbab4[_0x54d431(0x260)](),logger[_0x54d431(0x1dc)](_0x54d431(0x1b3),_0x1dbab4),await pauseBot(undefined,_0x29b33a,_0x1dbab4);else{if(_0x1dbab4[_0x54d431(0x260)]()[_0x54d431(0x24a)](_0x54d431(0x29c)))logHistory(_0x54d431(0x236),_0x13ebd5+_0x54d431(0x2df)),logHistory(_0x54d431(0x236),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)'),await killBot();else{if(_0x1dbab4[_0x54d431(0x260)]()[_0x54d431(0x24a)](_0x54d431(0x33d)))logHistory(_0x54d431(0x236),_0x13ebd5+_0x54d431(0x1f7)),logHistory(_0x54d431(0x236),_0x54d431(0x19b)),await killBot();else{if(_0x1dbab4[_0x54d431(0x260)]()[_0x54d431(0x24a)](_0x54d431(0x2e5))&&_0x1dbab4[_0x54d431(0x260)]()[_0x54d431(0x24a)](_0x54d431(0x1bc)))_0x29b33a=_0x13ebd5+'\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)',await pauseBot(undefined,_0x29b33a,_0x1dbab4,!![]);else{if(_0x1dbab4[_0x54d431(0x260)]()[_0x54d431(0x24a)](_0x54d431(0x2e5)))config[_0x54d431(0x1f8)]?_0x29b33a=_0x13ebd5+_0x54d431(0x231):_0x29b33a=_0x13ebd5+'\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange',logHistory(_0x54d431(0x236),_0x29b33a),logHistory(_0x54d431(0x236),_0x54d431(0x19b)),await killBot();else{if(_0x1dbab4['toString']()[_0x54d431(0x24a)]('PermissionDenied'))logHistory(_0x54d431(0x236),_0x13ebd5+'\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange'),logHistory(_0x54d431(0x236),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)'),await killBot();else{if(_0x1dbab4[_0x54d431(0x260)]()[_0x54d431(0x24a)](_0x54d431(0x291)))logHistory(_0x54d431(0x236),_0x54d431(0x1f9)+_0x40643c),logger[_0x54d431(0x1dc)]('Error\x20details:',_0x1dbab4);else{if(_0x1dbab4 instanceof ccxt[_0x54d431(0x1d4)]){_0x29b33a=_0x13ebd5+_0x54d431(0x1f6)+_0x1dbab4[_0x54d431(0x260)](),logHistory(_0x54d431(0x236),_0x29b33a),logger[_0x54d431(0x1dc)](_0x54d431(0x1ca),_0x1dbab4);if(_0x40643c)logger[_0x54d431(0x1dc)](_0x54d431(0x2d8)+_0x40643c);await pauseBot(undefined,_0x29b33a,_0x1dbab4);}else{_0x29b33a=_0x54d431(0x287)+_0x1dbab4['toString'](),logHistory(_0x54d431(0x236),_0x29b33a),logger[_0x54d431(0x1dc)](_0x29b33a+'\x20>\x20details:',_0x1dbab4);if(_0x40643c)logger[_0x54d431(0x1dc)](_0x54d431(0x2d8)+_0x40643c);await pauseBot(undefined,_0x29b33a);}}}}}}}}}}}}}}}}function decryptRSA(_0xdff329,_0x4e6e9f){const _0x15803c=_0x13a2d5,_0x17c48d=forge[_0x15803c(0x1f2)]['privateKeyFromPem'](_0xdff329),_0x41096d=_0x17c48d[_0x15803c(0x34c)](forge[_0x15803c(0x2c8)]['decode64'](_0x4e6e9f),_0x15803c(0x1e0),{'md':forge['md'][_0x15803c(0x215)]['create'](),'mgf1':{'md':forge['md'][_0x15803c(0x215)]['create']()}});return _0x41096d;}async function withRetry(_0x234871,_0x4082af){const _0x3442dd=_0x13a2d5;let _0x18d19a=![],_0x5f0bea=0x0,_0x4c8078,_0x247cb6;while(_0x5f0bea<maxRetries){try{_0x4c8078=await _0x4082af();break;}catch(_0x3aa535){_0x247cb6=_0x3aa535,!_0x18d19a?(_0x18d19a=!![],logger[_0x3442dd(0x1dc)](_0x3442dd(0x319)+_0x234871+':',_0x3aa535['toString']())):await sleep(retryInterval);}_0x5f0bea++;}if(_0x5f0bea==0x0)return _0x4c8078;if(_0x5f0bea>=maxRetries)throw _0x247cb6;else return logger['debug'](_0x3442dd(0x1d9)+_0x5f0bea+_0x3442dd(0x313)),_0x4c8078;}function formatResult(_0x57e63e,_0x26b1c3){const _0x379da2=_0x13a2d5;return parseFloat(_0x57e63e[_0x379da2(0x1c5)](_0x26b1c3));}function formatResultTruncate(_0x522f7a,_0x3dba8c){const _0x41fc4a=_0x13a2d5;let _0x50b80c=formatResultString(_0x522f7a,0xa),_0x5d8ec4=_0x50b80c['indexOf']('.');return _0x5d8ec4!=-0x1&&(_0x50b80c=_0x50b80c[_0x41fc4a(0x31e)](0x0,_0x5d8ec4+_0x3dba8c+0x1)),Number(_0x50b80c);}function formatResultString(_0x510492,_0x256083){const _0x145147=_0x13a2d5;let _0x577352;if(!(''+_0x510492)['includes']('e'))_0x577352=+(Math['round'](_0x510492+'e+'+_0x256083)+'e-'+_0x256083);else{let _0x14208f=(''+_0x510492)[_0x145147(0x357)]('e'),_0xf3e49c='';+_0x14208f[0x1]+_0x256083>0x0&&(_0xf3e49c='+'),_0x577352=+(Math[_0x145147(0x1b6)](+_0x14208f[0x0]+'e'+_0xf3e49c+(+_0x14208f[0x1]+_0x256083))+'e-'+_0x256083);}return Number(_0x577352)['toFixed'](_0x256083);}function getServerTime(){const _0x5040e6=_0x13a2d5,_0x25997a=new Date();return _0x25997a[_0x5040e6(0x2d4)]()+'/'+(_0x25997a[_0x5040e6(0x336)]()+0x1)['toString']()[_0x5040e6(0x264)](0x2,'0')+'/'+_0x25997a[_0x5040e6(0x279)]()['toString']()['padStart'](0x2,'0')+'\x20'+_0x25997a[_0x5040e6(0x360)]()['toString']()['padStart'](0x2,'0')+':'+_0x25997a['getMinutes']()['toString']()['padStart'](0x2,'0')+':'+_0x25997a[_0x5040e6(0x2cc)]()[_0x5040e6(0x260)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x2dacd0=_0x13a2d5,_0xe91433=shiftedTime();return _0xe91433[_0x2dacd0(0x2d4)]()+'/'+(_0xe91433[_0x2dacd0(0x336)]()+0x1)[_0x2dacd0(0x260)]()[_0x2dacd0(0x264)](0x2,'0')+'/'+_0xe91433[_0x2dacd0(0x279)]()[_0x2dacd0(0x260)]()['padStart'](0x2,'0')+'\x20'+_0xe91433[_0x2dacd0(0x360)]()[_0x2dacd0(0x260)]()[_0x2dacd0(0x264)](0x2,'0')+':'+_0xe91433[_0x2dacd0(0x1b1)]()['toString']()['padStart'](0x2,'0')+':'+_0xe91433[_0x2dacd0(0x2cc)]()[_0x2dacd0(0x260)]()[_0x2dacd0(0x264)](0x2,'0');}function getDate(){const _0x249c13=_0x13a2d5,_0x578796=shiftedTime();return _0x578796['getFullYear']()+'/'+(_0x578796[_0x249c13(0x336)]()+0x1)['toString']()[_0x249c13(0x264)](0x2,'0')+'/'+_0x578796[_0x249c13(0x279)]()['toString']()[_0x249c13(0x264)](0x2,'0');}function getHour(){const _0x138e90=_0x13a2d5,_0x38927f=shiftedTime();return _0x38927f[_0x138e90(0x360)]()['toString']()[_0x138e90(0x264)](0x2,'0');}function sleep(_0x30390b){return new Promise(_0x3778f9=>setTimeout(_0x3778f9,_0x30390b));}function shiftedTime(){const _0x45057b=_0x13a2d5,_0x35d662=new Date();let _0x31538a=_0x35d662;if(config&&config[_0x45057b(0x338)]!==0x0)_0x31538a=fns[_0x45057b(0x280)](_0x35d662,{'hours':config[_0x45057b(0x338)]});return _0x31538a;}function timer(_0x240c37){const _0x3c18fb=_0x13a2d5,_0x46c0f8=new Date();!lasttime?console['log'](getTimeStamp()+_0x3c18fb(0x28c),_0x240c37,_0x46c0f8):console[_0x3c18fb(0x297)](getTimeStamp()+_0x3c18fb(0x28c),_0x240c37,(_0x46c0f8-lasttime)/0x3e8),lasttime=_0x46c0f8;}