const _0x831beb=_0x29eb;(function(_0x4feb8d,_0x4fa833){const _0x377c82=_0x29eb,_0x177be0=_0x4feb8d();while(!![]){try{const _0x1e61e6=-parseInt(_0x377c82(0x2e4))/0x1+parseInt(_0x377c82(0x29d))/0x2*(parseInt(_0x377c82(0x19f))/0x3)+-parseInt(_0x377c82(0x299))/0x4+-parseInt(_0x377c82(0x1f2))/0x5*(parseInt(_0x377c82(0x241))/0x6)+parseInt(_0x377c82(0x1fa))/0x7*(-parseInt(_0x377c82(0x2fc))/0x8)+parseInt(_0x377c82(0x2d8))/0x9+parseInt(_0x377c82(0x2fa))/0xa*(parseInt(_0x377c82(0x2c9))/0xb);if(_0x1e61e6===_0x4fa833)break;else _0x177be0['push'](_0x177be0['shift']());}catch(_0x42ae41){_0x177be0['push'](_0x177be0['shift']());}}}(_0x4efe,0x3749a));const _0x1c1f75=function(){let _0x331c85=!![];return function(_0x4d04cf,_0x4e6ec2){const _0x3eea58=_0x331c85?function(){const _0x1ddb2b=_0x29eb;if(_0x4e6ec2){const _0x5d8b56=_0x4e6ec2[_0x1ddb2b(0x182)](_0x4d04cf,arguments);return _0x4e6ec2=null,_0x5d8b56;}}:function(){};return _0x331c85=![],_0x3eea58;};}(),_0xd18aad=_0x1c1f75(this,function(){const _0x17b8f3=_0x29eb;return _0xd18aad['toString']()[_0x17b8f3(0x337)](_0x17b8f3(0x2ef))[_0x17b8f3(0x2bf)]()[_0x17b8f3(0x1a2)](_0xd18aad)['search'](_0x17b8f3(0x2ef));});_0xd18aad();'use strict';const ccxt=require(_0x831beb(0x184)),low=require('lowdb'),FileSync=require(_0x831beb(0x2d9)),fs=require('fs'),fns=require('date-fns'),forge=require(_0x831beb(0x2e0)),util=require(_0x831beb(0x22d)),argv=require('yargs/yargs')(process[_0x831beb(0x254)][_0x831beb(0x267)](0x2))['argv'],path=require(_0x831beb(0x202)),axios=require(_0x831beb(0x284));let exchange,gTicker={},gChange={};const usdBasecoins=['USD','BUSD',_0x831beb(0x1f4),'USDT',_0x831beb(0x33b),'USDP'],excludedExchanges=['bitmex'],debugging=argv['d']||![];function _0x29eb(_0x4fe7e0,_0x4fc2a9){const _0x4e4e60=_0x4efe();return _0x29eb=function(_0xd18aad,_0x1c1f75){_0xd18aad=_0xd18aad-0x174;let _0x4efefa=_0x4e4e60[_0xd18aad];return _0x4efefa;},_0x29eb(_0x4fe7e0,_0x4fc2a9);}let pnlGenerationNeeded=argv['r']||![],config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x831beb(0x1d8)]({'LOCKED':0x0,'UNLOCKING':0x1,'UNLOCKED':0x2});let lockOrders=ORDERS['UNLOCKED'],validateOrdersState,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotIntervalShort=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg='\x20>\x20pausing\x20bot\x20for\x20'+pauseBotInterval/0xea60+_0x831beb(0x318),maxPauseRetries=0x6,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,watchTransactionsInterval=0x3c*0x3e8,schedulerInterval=0x3c*0x3c*0x3e8,retryInterval=0x3e8,maxRetries=0x5,logPageSize=0x14,defaultFee=0.003;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidOrdersInitialTimeout,pidOrdersTimeout,botPaused=![],transactionDetectionOngoing=![],lastCoinsToBalance='',insufficientFundsWarningSent=[],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x5dc,balanceUpdateRetries=0x5;let enableFiatToggle;const serverversion=require(_0x831beb(0x1e3))['version'],environment=require(_0x831beb(0x1e3))[_0x831beb(0x1cc)]||_0x831beb(0x2c3),botID=process[_0x831beb(0x254)][0x2]||_0x831beb(0x198),pattern=/^[0-9]{3}$/;!pattern['test'](botID)&&(console[_0x831beb(0x33a)](_0x831beb(0x1cf)+botID+_0x831beb(0x1fe)),killBot());const userID=process['argv'][0x3]||'',configpath=userID?'./config/'+userID+'/':_0x831beb(0x19c),logspath=userID?_0x831beb(0x27f)+userID+'/':_0x831beb(0x27f),loggerfile=fs['createWriteStream'](logspath+_0x831beb(0x28d),{'flags':'a'});!fs[_0x831beb(0x29a)](configpath)&&fs[_0x831beb(0x348)](configpath);function _0x4efe(){const _0x38f4e5=['findIndex','quick','balancing\x20resumes\x20when\x20cooldown\x20ends','\x20>\x20','USD','changes','event','fetchBalance()','padEnd','toString','1\x20-\x20Handle\x20open\x20orders','timeout','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','production','ask','openOrders','data','pki','PnL\x20','536338otWube','Error\x20while\x20deleting\x20files:\x20','sell','Set\x20lock\x20orders\x20to:\x20','switch-manual','Huobi','<pre>','enabled','\x20-\x20bot\x20not\x20started','getDate','showname','watchTrades()','recent20','write','remainingSymbols','318717jolwal','lowdb/adapters/FileSync','open','2.6.22','prevnumber','balancing\x20resumed','version','\x20not\x20available\x20(see:\x20hodlerhacks.com/fix/5)','node-forge','bitvavo','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20trying\x20again\x20in\x20','running','183998bDCqvH','startdate','round','/backup/','\x20API\x20key,\x20secret\x20or\x20password\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','getFullYear','side','entries','status\x20code\x20401','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','onepagemode','(((.+)+)+)+$','unlinkSync','1\x20-\x20Validate\x20orders:\x20','portfolio','keys','marketcapApi','exchange\x20reload','Pausing\x20for\x20','Manual\x20balancing\x20required','testApi','must\x20be\x20greater\x20than\x20minimum\x20amount','110DkMyQL','Order(s)\x20not\x20validated\x20after\x20','312PrLJTg','%\x20(','event-history','date','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','Value\x20','-config.json','watchOrders','Binance','Resetting\x20coin\x20results:\x20','cost','Invalid\x20balance\x20for\x20','-results.json','\x20rejected\x20your\x20API\x20request\x20(see:\x20hodlerhacks.com/fix/4)','\x20blocked\x20API\x20(DDoSProtection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','************','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','sqrt','reverse','Valid\x20balance\x20for\x20','price','Initializing\x20coin\x20results','emojisell','send','abs','progress','Error\x20in\x20loadSymbols():\x20','\x20minutes','symbol','Error\x20details:','DDoSProtection','watchTradesForSymbols','Exception\x20thrown\x20in\x20','/USD','RETRY\x20-\x20Problem\x20resolved\x20after\x20','removed','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','breakeven','UNLOCKING','Order\x20filled','InsufficientFunds','setSandboxMode','api-issue','indexOf','assign','staging','bots','bb-secure.json','orderId','recreate','Unknown\x20error:\x20','Initializing\x20exchange:\x20already\x20done','Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','USDT','complete','liquidity','/EUR','search','InvalidNonce','buy','log','USDC','added',':\x20timer\x20>','\x20uses\x20','\x20attempts','Failed\x20to\x20connect\x20to\x20the\x20exchange\x20-\x20bot\x20not\x20started','Bitget','splice','password','Order\x20amount\x20is\x20invalid:\x20','net-fiat','bid','message','mkdirSync','realizedPnL','kill','OnMaintenance','length','target','pro','token\x20is\x20expired','getHours','Trigger:\x20','coins','Cooldown\x20ended\x20-\x20balancing\x20resumed','Initializing\x20exchange','quote','ordertype','showConfig','Portfolio\x20change\x20detected:\x20','format','apply','0\x20-\x20EXECUTION:\x20','ccxt','operatorId','ExchangeNotAvailable','Error\x20in\x20testNewAPI():\x20','replace','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','balances','fee','average','2\x20-\x20handling\x20FILLED\x20order:\x20','sortBy','Insufficient\x20funds\x20to\x20place\x20order\x20for\x20','autoliquidity','LOCKED','1\x20-\x20FILLED\x20unknown\x20order:\x20','defaults','Block\x20transaction\x20detection:\x20','push','getStartingBalances','apiSecret','001','decode64','orderstatus','\x20exchange\x20error:\x20','./config/','Unfilled\x20order(s)\x20canceled\x20after\x20','fromCodePoint','587658vTSqcm','loadMarkets','logs','constructor','privateKey','get','delta','-events.json','change','\x20metrics:</b>\x20\x0a\x0a','\x20minutes\x20-\x20','secure','debug','performance','enableFiatToggle','fetchTickers','createOrder','currency','max','bot','API-key\x20format\x20invalid','total','\x20|\x20','yyyy/MM/dd','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','split','RETRY\x20-\x20Error\x20in\x20','Test\x20new\x20API','Gateio','distribution','fetchTicker','placeOrder','\x20exchange',')\x20known\x20order:\x20','basecoin','watchOrders()','writeFile','stringify','pnl','pnl-fiat','-performance.json','final','isEqual','Fee\x20discount\x20refund\x20detected:\x20','starting-balance-','environment','Unknown\x20error\x20-\x20check\x20logs','Initiating\x20bot\x20restart','Error:\x20Invalid\x20argument\x20','exchange','marketcap','value','AuthenticationError','portfolio1','Executed\x20','netoffset','cancelOrders()','freeze','filter','BTC','fetchBalance','args','change24h','\x20-\x20','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','headless','fetchOpenOrders','<b>Bot\x20','./version.json','substring','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','forEach','padStart','marketcapEnabled','2.3.5','status','Failed\x20to\x20load\x20market\x20data\x20-\x20bot\x20not\x20started','canceled','Invalid\x20symbol:\x20','fiat','Headless:\x20','initial','ETH','13165pSjHZG','\x20hour','TUSD','eur','\x20>\x20stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','join',':\x20Bot\x20','Waited\x20','29092iSXDNa','portfolio2','Bybit','min',',\x20must\x20be\x20a\x203\x20digit\x20number','pop','Unfilled\x20order(s)\x20could\x20not\x20be\x20canceled\x20after\x20','net','path','2\x20-\x20Validate\x20orders:\x20','net-basecoin','1\x20-\x20partially\x20FILLED\x20(','Order\x20is\x20invalid:\x20','isBefore','testAPI()','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','bot-','sort','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','-------------------------------\x0a','getMinutes','\x20portfolio:</b>\x20\x0a\x0a','privateKeyFromPem','getMonth','shift','deleteHistoryAlerts','PermissionDenied','\x20|\x20lock\x20orders:\x20','has','Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)','parse','Portfolio\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','EUR',')\x20|\x20exchange:\x20','\x20>\x20details:','timestamp-issue','PAXG','2.6.23','InvalidOrder','coin','%)\x0a','ongoing','\x0aSymbol(s):\x20','usd','error','closed','apiKey','request-time','map','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','cancelOrder','util','loading-canceled','starting-balances','valid','configuration','\x20|\x20highest\x20fee:\x20','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','create','\x20>\x20[DEBUG]\x20','</pre>','Invalid\x20API\x20details,\x20please\x20try\x20again\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','emitHistory','RequestTimeout','\x20-\x20bot\x20switched\x20to\x20manual\x20mode','configuration-stored','set','emojibuy','limit','timeshift','426xQcpyh','filled','Resetting\x20bot\x20history','\x20closed\x20the\x20connection\x20(see:\x20hodlerhacks.com/fix/5)','amountToPrecision','market_cap','full','type','Market\x20order','2.6.0','none','getOpenOrders()','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20for\x20','pid','storeFiat','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','exchanges','market','toggleBotMode','argv','sells','order','ID:\x20','options','Error\x20details:\x20','trade','basecoinvalue','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','Loading\x20completed','Exchange\x20permission\x20denied\x20-\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','function','OrderNotFound','buys','\x20network\x20error:\x20','sandbox','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','success','\x20-\x20go\x20back\x20and\x20try\x20again','slice','\x20MB','apiPassword','colorscheme','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','red_yellow_blue','\x20order:\x20','self_reported_market_cap','cooldown','***','uncaughtException','secret','toFixed','Reset\x20|\x20','customId','Resuming\x20(','watchTrades','warning','coin-loading-progress','2.7.1','getTime','limits','\x20API\x20key\x20is\x20invalid','settings','./logs/','recovery','Exchange','NetworkError','sendPortfolioTelegram','axios','No\x20more\x20open\x20orders\x20-\x20','Failed\x20to\x20load\x20coin\x20data\x20for\x20','MIN_NOTIONAL','excluded','add','<b>','cancel','Cryptocom','/output-000.log','threshold','Net\x20','active','number','match','string','RSA-OAEP','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','\x20due\x20to\x20offset','UNLOCKED','offset','816160uvUcNa','existsSync','botname','time','4liCdTG','Invalid\x20quantity','page','remove','no\x20open\x20orders','Bot\x20','timestamp','toLowerCase','highest','configstate','includes','heapUsed','.json','startprice','update-liquidity','amount','addDays','find','spot','cloneDeep','last','limit-low','detectLiquidityChange()','\x20orders\x20in\x20less\x20than\x20','slider'];_0x4efe=function(){return _0x38f4e5;};return _0x4efe();}!fs[_0x831beb(0x29a)](logspath)&&fs['mkdirSync'](logspath);const configfile=configpath+_0x831beb(0x20a)+botID+_0x831beb(0x302),logfile=configpath+_0x831beb(0x20a)+botID+_0x831beb(0x1a6),performancefile=configpath+_0x831beb(0x20a)+botID+_0x831beb(0x1c7),coinresultsfile=configpath+_0x831beb(0x20a)+botID+_0x831beb(0x308),settingsfile=configpath+'bb-settings.json',securefile=configpath+_0x831beb(0x32c),configbackuppath=configpath+_0x831beb(0x2e7),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x831beb(0x193)]({'logs':[],'version':serverversion})[_0x831beb(0x2d6)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance['defaults']({'data':[],'version':serverversion})[_0x831beb(0x2d6)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig['defaults']({'bot':[],'version':serverversion})[_0x831beb(0x2d6)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x831beb(0x193)]({'coins':{},'version':serverversion})[_0x831beb(0x2d6)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const operatorId=0x200f1;let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x434f2a=>{const _0x2106a1=_0x831beb;console[_0x2106a1(0x33a)](_0x434f2a);},'simple':_0x5dec42=>{const _0x1dbc09=_0x831beb;console[_0x1dbc09(0x33a)](_0x5dec42),loggerfile[_0x1dbc09(0x2d6)](util['format'](_0x5dec42)+'\x0a');},'full':async(_0xf3c54d,_0x29e610='')=>{const _0x5b2a44=_0x831beb;let _0x2c4d1d;if(config[_0x5b2a44(0x2d3)])_0x2c4d1d=getTimeStamp()+':\x20'+config['botname']+'\x20>\x20'+_0xf3c54d;else _0x2c4d1d=getTimeStamp()+_0x5b2a44(0x1f8)+botID+_0x5b2a44(0x2b9)+_0xf3c54d;console[_0x5b2a44(0x33a)](_0x2c4d1d),loggerfile[_0x5b2a44(0x2d6)](util['format'](_0x2c4d1d)+'\x0a'),_0x29e610&&(console[_0x5b2a44(0x33a)](_0x29e610),loggerfile['write'](util['format'](_0x29e610)+'\x0a'));},'debug':async(_0x3131b4,_0x486256='')=>{const _0x55336f=_0x831beb;let _0x1fb72a;if(config[_0x55336f(0x2d3)])_0x1fb72a=getTimeStamp()+':\x20'+config[_0x55336f(0x29b)]+_0x55336f(0x235)+_0x3131b4;else _0x1fb72a=getTimeStamp()+_0x55336f(0x1f8)+botID+_0x55336f(0x235)+_0x3131b4;if(debugging)console['log'](_0x1fb72a);loggerfile['write'](util[_0x55336f(0x181)](_0x1fb72a)+'\x0a');if(_0x486256){if(debugging)console[_0x55336f(0x33a)](_0x486256);loggerfile['write'](util[_0x55336f(0x181)](_0x486256)+'\x0a');}}};process['on']('uncaughtException',function(_0x1fea30){const _0x533fe5=_0x831beb;handleError(_0x1fea30['stack'],_0x533fe5(0x271));});settings['timeshift']!=config[_0x831beb(0x240)]&&updateTimeshift(settings['timeshift']);settings[_0x831beb(0x2ee)]!=config['onepagemode']&&updateOnepagemode(settings[_0x831beb(0x2ee)]);(settings[_0x831beb(0x2f4)]&&!config[_0x831beb(0x2f4)]||!settings['marketcapApi']&&config[_0x831beb(0x2f4)])&&updateMarketcapApi(settings[_0x831beb(0x2f4)]);process[_0x831beb(0x314)]({'started':_0x831beb(0x2e3)},_0x48769c=>{}),initializeProcessListeners();function proxyEmit(_0x2218d3,_0x35e42b=null){const _0x45a4ad=_0x831beb;process[_0x45a4ad(0x314)]({'function':_0x2218d3,'args':_0x35e42b},_0xe828fc=>{});}function initializeProcessListeners(){const _0x49c444=_0x831beb;process['on'](_0x49c444(0x347),_0x4d699f=>{const _0x182283=_0x49c444;switch(Object[_0x182283(0x2f3)](_0x4d699f)[0x0]){case'timeshift':_0x4d699f[_0x182283(0x240)]!=undefined&&(settings['timeshift']=_0x4d699f[_0x182283(0x240)],updateTimeshift(settings[_0x182283(0x240)]));break;case _0x182283(0x2ee):_0x4d699f[_0x182283(0x2ee)]!=undefined&&(settings[_0x182283(0x2ee)]=_0x4d699f[_0x182283(0x2ee)],updateOnepagemode(settings[_0x182283(0x2ee)]));break;case _0x182283(0x2f4):_0x4d699f[_0x182283(0x2f4)]!=undefined&&(settings['marketcapApi']=_0x4d699f[_0x182283(0x2f4)],updateMarketcapApi(settings[_0x182283(0x2f4)]));break;case _0x182283(0x32b):_0x4d699f[_0x182283(0x32b)]!=undefined&&(bots=JSON[_0x182283(0x218)](_0x4d699f[_0x182283(0x32b)]),proxyEmit(_0x182283(0x32b),bots));break;case _0x182283(0x25f):switch(_0x4d699f[_0x182283(0x25f)]){case'initclient':initclient();break;case _0x182283(0x253):toggleBotMode();break;case _0x182283(0x239):emitHistory(_0x4d699f[_0x182283(0x1dc)]);break;case _0x182283(0x213):deleteHistoryAlerts(_0x4d699f[_0x182283(0x1dc)]);break;case'getPortfolio':getPortfolio(_0x4d699f['args']);break;case'storeConfiguration':storeConfiguration(_0x4d699f[_0x182283(0x1dc)]);break;case'storeHeadless':storeHeadless(_0x4d699f[_0x182283(0x1dc)]);break;case _0x182283(0x24f):storeFiat(_0x4d699f[_0x182283(0x1dc)]);break;case'resetHistory':resetHistory();break;case _0x182283(0x196):getStartingBalances(getNormalizedPerformance());break;case _0x182283(0x1be):placeOrder(_0x4d699f['args']);break;case'cancelLoading':cancelLoading();break;case _0x182283(0x17f):showConfig();break;case'sendMetricsTelegram':sendMetricsTelegram();break;case _0x182283(0x283):sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x30f2f4=![]){const _0x328e21=_0x831beb;logger[_0x328e21(0x1ab)](_0x328e21(0x274)+(_0x30f2f4?_0x328e21(0x2f5):'no\x20exchange\x20reloaded')+'\x20|\x20exchange:\x20'+config[_0x328e21(0x1d0)]);if(pidBalances)clearTimeout(pidBalances);lastCoinsToBalance='',insufficientFundsWarningSent=[],coinsLoaded=![];if(config[_0x328e21(0x228)]!=''&&config[_0x328e21(0x228)]!='***'){loadingProgress=0x0;if(_0x30f2f4){await initExchange();const _0x5ef424=await testAPI();if(!_0x5ef424)return;await loadSymbols(),loadingProgress=0x1,setStableCoins(),proxyEmit(_0x328e21(0x231),emittedConfiguration()),initialPerformanceStored=![];}const _0x5c8dae=await getCoins();[currentCoins,currentCoinsAll]=_0x5c8dae,setBlockTransactionDetection(![]),startScheduler(),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x328e21(0x1ab)](_0x328e21(0x25d)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x328e21(0x174)]==0x0&&allOpenOrders['length']!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(pnlGenerationNeeded)await generatePnL();}}async function resumeBot(_0x2bf9db=![]){const _0x530825=_0x831beb;logger['debug'](_0x530825(0x276)+(_0x2bf9db?_0x530825(0x2b7):_0x530825(0x334))+_0x530825(0x21b)+config['exchange']);if(pidBalances)clearTimeout(pidBalances);if(_0x2bf9db){getBalances();return;}coinsLoaded=![];if(config[_0x530825(0x228)]!=''&&config[_0x530825(0x228)]!='***'){loadingProgress=0x1;const _0x5ca861=await getCoins();[currentCoins,currentCoinsAll]=_0x5ca861,setBlockTransactionDetection(![]),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x530825(0x1ab)]('Loading\x20completed'),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x530825(0x174)]==0x0&&allOpenOrders[_0x530825(0x174)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();}}async function getMarketCap(_0x4c9d46){const _0x50c943=_0x831beb;let _0xfd1cc9=![];if(_0x4c9d46)_0xfd1cc9=!![];const _0x3f91fc=_0xfd1cc9?_0x4c9d46:currentCoins,_0x59df25=_0x3f91fc['map'](_0x1bf246=>_0x1bf246[_0x50c943(0x221)]);if(!config['marketcapApi']||!_0xfd1cc9&&!config['marketcapEnabled']||_0x59df25[_0x50c943(0x174)]==0x0)return;let _0x20de91=null;try{_0x20de91=await axios['get'](_0x50c943(0x20c),{'headers':{'X-CMC_PRO_API_KEY':settings[_0x50c943(0x2f4)]},'params':{'symbol':_0x59df25[_0x50c943(0x2bf)]()}});}catch(_0x4d2168){_0x20de91=null,_0x4d2168[_0x50c943(0x2bf)]()[_0x50c943(0x2a7)](_0x50c943(0x2ec))?(config[_0x50c943(0x2f4)]=![],updateConfig(),proxyEmit(_0x50c943(0x231),emittedConfiguration()),logHistory(_0x50c943(0x226),'CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager')):(logHistory(_0x50c943(0x226),_0x50c943(0x2e2)+schedulerInterval/(0x3c*0x3e8)+_0x50c943(0x318)),logger['debug'](_0x50c943(0x31a),_0x4d2168[_0x50c943(0x2bf)]()+_0x50c943(0x1de)+_0x4d2168['code']));}const _0x2d5aac=new Map();let _0x245153=!![];if(_0x20de91){let _0x5ad6c5=0x0;const _0x5ebb94=_0x20de91[_0x50c943(0x2c6)];_0x59df25[_0x50c943(0x1e6)](_0x18ff1f=>{const _0x417baf=_0x50c943;if(_0x5ebb94[_0x417baf(0x2c6)][_0x18ff1f][0x0]&&_0x5ebb94[_0x417baf(0x2c6)][_0x18ff1f][0x0][_0x417baf(0x17d)]['USD']['market_cap'])_0x2d5aac[_0x417baf(0x23d)](_0x18ff1f,_0x5ebb94['data'][_0x18ff1f][0x0][_0x417baf(0x17d)]['USD'][_0x417baf(0x246)]),_0x5ad6c5+=_0x5ebb94[_0x417baf(0x2c6)][_0x18ff1f][0x0]['quote']['USD'][_0x417baf(0x246)];else{if(_0x5ebb94[_0x417baf(0x2c6)][_0x18ff1f][0x0]&&_0x5ebb94[_0x417baf(0x2c6)][_0x18ff1f][0x0][_0x417baf(0x26e)])_0x2d5aac[_0x417baf(0x23d)](_0x18ff1f,_0x5ebb94[_0x417baf(0x2c6)][_0x18ff1f][0x0][_0x417baf(0x26e)]),_0x5ad6c5+=_0x5ebb94[_0x417baf(0x2c6)][_0x18ff1f][0x0][_0x417baf(0x26e)];else{if(![_0x417baf(0x21a),_0x417baf(0x2ba)]['includes'](_0x18ff1f)){if(_0xfd1cc9)logHistory(_0x417baf(0x226),_0x417baf(0x24d)+_0x18ff1f+_0x417baf(0x266));else{const _0x43bd1d=config[_0x417baf(0x2f2)][_0x417baf(0x2ae)](_0xb0e80a=>_0xb0e80a['coin']==_0x18ff1f);_0x43bd1d&&!_0x43bd1d['excluded']&&_0x43bd1d[_0x417baf(0x2b5)]==-0x1&&(_0x245153=![],logHistory('error','CoinMarketCap\x20data\x20could\x20not\x20be\x20updated\x20-\x20will\x20try\x20again\x20in\x201\x20hour'),logger[_0x417baf(0x1ab)](_0x417baf(0x24d)+_0x18ff1f));}}}}});if(!_0x245153)return;_0x59df25[_0x50c943(0x1e6)](_0x26dcc8=>{const _0x589cc5=_0x50c943,_0x361632=_0x2d5aac[_0x589cc5(0x1a4)](_0x26dcc8)?_0x2d5aac[_0x589cc5(0x1a4)](_0x26dcc8):0x0;if(_0xfd1cc9){const _0x4ae56e=_0x4c9d46[_0x589cc5(0x2ae)](_0x1ceab9=>_0x1ceab9['coin']==_0x26dcc8);_0x4ae56e&&(_0x4ae56e['marketcap']=_0x361632);}else{const _0xfa15d0=currentCoins[_0x589cc5(0x2ae)](_0x3106a1=>_0x3106a1['coin']==_0x26dcc8);_0xfa15d0&&(_0xfa15d0[_0x589cc5(0x1d1)]=_0x361632);const _0x4d3afe=currentCoinsAll[_0x589cc5(0x2ae)](_0x199b59=>_0x199b59[_0x589cc5(0x221)]==_0x26dcc8);_0x4d3afe&&(_0x4d3afe['marketcap']=_0x361632);}}),!_0xfd1cc9&&updateTargetDistribution();}}function updateTargetDistribution(){const _0x539f40=_0x831beb,_0x7a7e59=0x2;let _0x47d7d1=0x0,_0x5c1d3d=0x0,_0x946a16=0x0,_0x25dffd=0x0,_0x2ea945=0x0;config[_0x539f40(0x2f2)][_0x539f40(0x1e6)](_0x5503e7=>{const _0x100962=_0x539f40;if(!_0x5503e7[_0x100962(0x288)]){_0x946a16++,_0x47d7d1+=_0x5503e7['slider'];if(_0x5503e7['slider']===-0x1){_0x47d7d1++;const _0x511297=currentCoinsAll[_0x100962(0x2ae)](_0x16eb5e=>_0x16eb5e[_0x100962(0x221)]==_0x5503e7['coin']);_0x511297&&(_0x25dffd+=_0x511297[_0x100962(0x1d1)],_0x2ea945+=Math[_0x100962(0x30e)](_0x511297[_0x100962(0x1d1)]));}if(_0x5503e7['slider']!==-0x1)_0x5c1d3d++;}});let _0x3035f5;const _0x1e09be=0x64-_0x47d7d1,_0x4279ba=_0x946a16-_0x5c1d3d;_0x3035f5=_0x4279ba===0x0?_0x47d7d1:Math[_0x539f40(0x1b1)](0x64,_0x47d7d1),config['portfolio'][_0x539f40(0x1e6)](_0x29c599=>{const _0x1ca74b=_0x539f40,_0x1b6dfe=currentCoinsAll[_0x1ca74b(0x2ae)](_0x98237c=>_0x98237c[_0x1ca74b(0x221)]==_0x29c599[_0x1ca74b(0x221)]);_0x1b6dfe&&(_0x29c599[_0x1ca74b(0x1d1)]=_0x1b6dfe[_0x1ca74b(0x1d1)]);if(!_0x29c599[_0x1ca74b(0x288)]){if(_0x3035f5<=0x64){if(_0x29c599['slider']===-0x1){if(_0x25dffd!==0x0&&config[_0x1ca74b(0x1e8)]){if(_0x1b6dfe){if(config[_0x1ca74b(0x1e8)]==_0x1ca74b(0x1d1))_0x29c599[_0x1ca74b(0x1bc)]=(_0x1e09be/(_0x25dffd/_0x1b6dfe[_0x1ca74b(0x1d1)]))[_0x1ca74b(0x273)](_0x7a7e59);else config[_0x1ca74b(0x1e8)]=='marketcapsqrt'&&(_0x29c599['distribution']=(_0x1e09be/(_0x2ea945/Math[_0x1ca74b(0x30e)](_0x1b6dfe['marketcap'])))[_0x1ca74b(0x273)](_0x7a7e59));}}}}}}),updateConfig();}function updateConfig(){const _0x550cf1=_0x831beb;let _0x68fced=dbConfig[_0x550cf1(0x1a4)](_0x550cf1(0x1b2))[_0x550cf1(0x2ae)]({'botID':botID})[_0x550cf1(0x1d2)]();_0x68fced&&dbConfig['get']('bot')[_0x550cf1(0x2ae)]({'botID':botID})[_0x550cf1(0x329)](config)[_0x550cf1(0x2d6)]();}function logMemory(){const _0x5a218d=_0x831beb;if(environment!=_0x5a218d(0x32a))return;const _0x4086e6=process['memoryUsage']()[_0x5a218d(0x2a8)]/0x400/0x400;logger[_0x5a218d(0x1ab)]('process\x20'+process[_0x5a218d(0x24e)]+_0x5a218d(0x33e)+formatResult(_0x4086e6,0x1)+_0x5a218d(0x268));}async function startScheduler(){const _0x42f6e8=_0x831beb,_0x4d6a8b=shiftedTime()[_0x42f6e8(0x178)]();getMarketCap(),loadSymbols(),_0x4d6a8b==0x1&&logMemory(),await sleep(schedulerInterval),startScheduler();}async function restartBot(_0x1c45c0=![]){const _0x3bc917=_0x831beb;logger[_0x3bc917(0x1ab)](_0x3bc917(0x1ce));if(!_0x1c45c0)while(lockOrders!=ORDERS[_0x3bc917(0x297)]||coolingDown){await sleep(0x3e8);}process[_0x3bc917(0x314)]({'stop':'restart'},_0x177d6d=>{});}async function initExchange(_0x10aa82=config['exchange'],_0x302e51=config[_0x831beb(0x228)],_0x2fed2e=config[_0x831beb(0x197)],_0x21e227=config['apiPassword'],_0x2d0cdc=config[_0x831beb(0x263)]){const _0x2a3611=_0x831beb;if(exchange){logger[_0x2a3611(0x1ab)](_0x2a3611(0x330));return;}logger[_0x2a3611(0x1ab)](_0x2a3611(0x17c));!supportedExchanges()['includes'](_0x10aa82)&&(logHistory(_0x2a3611(0x226),_0x2a3611(0x295)+_0x10aa82+_0x2a3611(0x1bf)),killBot());const _0x51427f=ccxt[_0x2a3611(0x176)][_0x10aa82['toLowerCase']()];exchange=new _0x51427f({'apiKey':_0x302e51,'secret':_0x2fed2e,'options':{'defaultType':_0x2a3611(0x2af)}});if(_0x21e227)exchange[_0x2a3611(0x343)]=_0x21e227;if(exchange[_0x2a3611(0x216)][_0x2a3611(0x263)])exchange[_0x2a3611(0x326)](_0x2d0cdc);if(_0x10aa82[_0x2a3611(0x2a4)]()==_0x2a3611(0x2e1))exchange[_0x2a3611(0x258)][_0x2a3611(0x185)]=operatorId;}function updateExchange(_0x53cbb3,_0x356ef1,_0xbd0231=null){const _0x163a0c=_0x831beb;exchange['apiKey']=_0x53cbb3,exchange[_0x163a0c(0x272)]=_0x356ef1,exchange[_0x163a0c(0x343)]=_0xbd0231,logger[_0x163a0c(0x1ab)]('Updating\x20API\x20key\x20(not\x20saved\x20in\x20config\x20file\x20yet)');}function setStableCoins(){const _0xdd02c4=_0x831beb;let _0x58a508=config['basecoin']==_0xdd02c4(0x1f1)?'ETH':config['basecoin']==_0xdd02c4(0x21e)?_0xdd02c4(0x21e):_0xdd02c4(0x1da),_0x3a086e=allSymbols[_0xdd02c4(0x2a7)](_0x58a508+_0xdd02c4(0x31e))?_0xdd02c4(0x2ba):allSymbols[_0xdd02c4(0x2a7)](_0x58a508+'/USDT')?_0xdd02c4(0x333):_0xdd02c4(0x21a),_0x42c545=allSymbols[_0xdd02c4(0x2a7)](_0x58a508+_0xdd02c4(0x336))?_0xdd02c4(0x21a):_0x3a086e;enableFiatToggle=!![],_0x3a086e=='EUR'&&(enableFiatToggle=![],storeFiat('EUR')),_0x42c545!=_0xdd02c4(0x21a)&&(enableFiatToggle=![],storeFiat(_0xdd02c4(0x2ba))),stablecoins={'eur':{'coin':''+_0x58a508+_0x42c545,'symbol':_0x58a508+'/'+_0x42c545},'usd':{'coin':''+_0x58a508+_0x3a086e,'symbol':_0x58a508+'/'+_0x3a086e}};}async function initwsCcxt(){const _0x13b199=_0x831beb;initCycle++;const _0x492c23=initCycle;let _0x31320d=[];config[_0x13b199(0x2f2)][_0x13b199(0x1e6)](_0x556dda=>{const _0x28b419=_0x13b199;if(!_0x556dda[_0x28b419(0x288)]&&_0x556dda[_0x28b419(0x221)]!=config[_0x28b419(0x1c1)])_0x31320d[_0x28b419(0x195)](_0x556dda[_0x28b419(0x319)]);});if(!_0x31320d[_0x13b199(0x2a7)](stablecoins[_0x13b199(0x1f5)]['symbol']))_0x31320d[_0x13b199(0x195)](stablecoins['eur'][_0x13b199(0x319)]);if(!_0x31320d[_0x13b199(0x2a7)](stablecoins[_0x13b199(0x225)][_0x13b199(0x319)]))_0x31320d[_0x13b199(0x195)](stablecoins['usd'][_0x13b199(0x319)]);loadCoins(_0x31320d),_0x31320d=validateSymbols(_0x31320d);const _0x430685=async _0x4fbd01=>{const _0x2672e5=_0x13b199;let _0xe5788b;try{const _0x4cc661=await getTickers(_0x4fbd01);Object[_0x2672e5(0x2eb)](_0x4cc661)[_0x2672e5(0x1e6)](_0x321a76=>{const _0x90d5fb=_0x2672e5;_0xe5788b=_0x321a76[0x1][_0x90d5fb(0x319)],gTicker[noslash(_0xe5788b)]=_0x321a76[0x1][_0x90d5fb(0x2b1)],gChange[_0xe5788b]=_0x321a76[0x1]['percentage'];});}catch(_0xc75487){await handleError(_0xc75487,'initTickers()',_0xe5788b);}},_0x4e1826=async _0x12261a=>{const _0x2f4817=_0x13b199;while(initCycle==_0x492c23){if(!botPaused)try{const _0x1e26b9=await exchange['watchTrades'](_0x12261a);gTicker[noslash(_0x1e26b9[0x0][_0x2f4817(0x319)])]=_0x1e26b9[0x0][_0x2f4817(0x311)];}catch(_0x5a05d8){if(!exchangeStopped)await handleError(_0x5a05d8,_0x2f4817(0x2d4),_0x12261a);}else await sleep(0x64);}},_0x58a5c6=async _0x17c4d4=>{const _0x3a2910=_0x13b199;while(initCycle==_0x492c23){if(!botPaused)try{const _0x45dc0a=await exchange[_0x3a2910(0x31c)](_0x17c4d4),_0x59ce30=_0x45dc0a[_0x3a2910(0x1ff)]();gTicker[noslash(_0x59ce30['symbol'])]=_0x59ce30['price'];}catch(_0xa1b667){if(!exchangeStopped)await handleError(_0xa1b667,'watchTradesForSymbols()',_0x17c4d4[_0x3a2910(0x2bf)]());}else await sleep(0x64);}},_0x29bb9b=async _0x5b33c5=>{const _0x34d195=_0x13b199;while(initCycle==_0x492c23){if(!botPaused){let _0x32b0e5;try{await sleep(0x3c*0x3e8);const _0x14e205=await getTickers(_0x5b33c5);Object[_0x34d195(0x2eb)](_0x14e205)['forEach'](_0x2d9120=>{const _0x12d2fb=_0x34d195;_0x32b0e5=_0x2d9120[0x1][_0x12d2fb(0x319)],gChange[_0x32b0e5]=_0x2d9120[0x1]['percentage'];});}catch(_0x9ee0d){if(!exchangeStopped)await handleError(_0x9ee0d,'fetchTickers()',_0x32b0e5);}}else await sleep(0x64);}},_0x52752f=async _0x22f37b=>{const _0x4e1ab0=_0x13b199;while(initCycle==_0x492c23){if(!botPaused)try{const _0x26df8f=await exchange[_0x4e1ab0(0x303)](_0x22f37b);initCycle==_0x492c23&&_0x26df8f['forEach'](_0x144a64=>{updateNumberCoinsCcxt(_0x144a64);});}catch(_0x358387){if(!exchangeStopped)await handleError(_0x358387,_0x4e1ab0(0x1c2));}else await sleep(0x64);}};_0x430685(_0x31320d),_0x29bb9b(_0x31320d),exchange[_0x13b199(0x216)][_0x13b199(0x31c)]&&!(config[_0x13b199(0x1d0)]==_0x13b199(0x1fc)&&_0x31320d['length']>0xa)?_0x58a5c6(_0x31320d):_0x31320d[_0x13b199(0x1e6)](_0x4352c6=>{_0x4e1826(_0x4352c6);}),_0x31320d[_0x13b199(0x1e6)](_0x42b2a8=>{_0x52752f(_0x42b2a8);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x7be8b0){const _0x1b3610=_0x831beb;let _0x4b9070={};try{if(config['exchange']!=_0x1b3610(0x28c))_0x4b9070=await exchange['fetchTickers'](_0x7be8b0);else for(const _0x2cf831 of _0x7be8b0){const _0x47b8f0=await exchange['fetchTicker'](_0x2cf831);_0x4b9070[_0x2cf831]=_0x47b8f0;}return _0x4b9070;}catch(_0x38fb27){throw _0x38fb27;}}function setBlockTransactionDetection(_0x558baf){const _0x1f0209=_0x831beb;blockTransactionDetection=_0x558baf,logger[_0x1f0209(0x1ab)](_0x1f0209(0x194)+blockTransactionDetection);}async function detectLiquidityChange(_0x2f22f2=0x0){const _0x86c864=_0x831beb;transactionDetectionOngoing=!![];try{const _0x1c4478=await getCoins(_0x2f22f2),[_0x23213a,_0x54d9e1]=_0x1c4478;let _0x1ef55f=[];currentCoins[_0x86c864(0x1e6)](_0x46790a=>{const _0x76688a=_0x86c864,_0x1f410e=_0x23213a[_0x76688a(0x2ae)](_0x33de84=>_0x33de84[_0x76688a(0x221)]==_0x46790a[_0x76688a(0x221)]);if(_0x1f410e){if(_0x46790a[_0x76688a(0x291)]!=_0x1f410e['number']){let _0x5e2067;if(_0x46790a['coin']!=config[_0x76688a(0x1c1)]){const _0x369271=gTicker[noslash(_0x46790a[_0x76688a(0x319)])];_0x5e2067=_0x46790a[_0x76688a(0x30f)]?0x1/_0x369271:_0x369271;}else _0x5e2067=0x1;_0x1ef55f['push']({'coin':_0x46790a[_0x76688a(0x221)],'symbol':_0x46790a[_0x76688a(0x319)],'price':_0x5e2067,'number':Number(formatResult(_0x1f410e[_0x76688a(0x291)]-_0x46790a[_0x76688a(0x291)],0x8)),'basecoinvalue':_0x5e2067*(_0x1f410e[_0x76688a(0x291)]-_0x46790a[_0x76688a(0x291)])});}}});if(_0x1ef55f[_0x86c864(0x174)]>0x0&&!blockTransactionDetection){for(const _0x3bacc4 of _0x1ef55f){if(config[_0x86c864(0x190)]){logger[_0x86c864(0x1ab)]('Liquidity\x20change\x20|\x20basecoin\x20value:\x20'+_0x3bacc4[_0x86c864(0x25b)]+_0x86c864(0x232)+lastFees[_0x86c864(0x2a5)]);if(lastFees['highest']==0x0||Math[_0x86c864(0x315)](_0x3bacc4['basecoinvalue'])>lastFees[_0x86c864(0x2a5)]*0x3){if(config['autoliquidity']==_0x86c864(0x2ab)){delete _0x3bacc4['symbol'],delete _0x3bacc4[_0x86c864(0x25b)];let _0x2456ab=[],_0x4cb6bf=[...config['liquidity']]||[],_0x206631=config['liquidity'];_0x4cb6bf[_0x86c864(0x20b)]((_0x2e1429,_0x3dad89)=>_0x2e1429[_0x86c864(0x2ff)]>_0x3dad89['date']?-0x1:_0x3dad89[_0x86c864(0x2ff)]>_0x2e1429['date']?0x1:0x0);const _0x2dbba5=getDate();if(_0x4cb6bf[0x0]){const _0x4c233d=fns[_0x86c864(0x218)](_0x4cb6bf[0x0][_0x86c864(0x2ff)],'yyyy/MM/dd',new Date()),_0x1331f4=fns[_0x86c864(0x218)](_0x2dbba5,'yyyy/MM/dd',new Date());if(fns[_0x86c864(0x1c9)](_0x4c233d,_0x1331f4)){_0x2456ab=_0x4cb6bf[0x0][_0x86c864(0x2bb)];const _0x1506b9=_0x2456ab[_0x86c864(0x2ae)](_0x40f543=>_0x40f543['coin']==_0x3bacc4[_0x86c864(0x221)]);_0x1506b9?(_0x1506b9['number']+=_0x3bacc4['number'],_0x1506b9[_0x86c864(0x291)]==0x0&&(_0x2456ab=_0x2456ab[_0x86c864(0x1d9)](_0x2c8c13=>{const _0x4d03b3=_0x86c864;return _0x2c8c13[_0x4d03b3(0x221)]!=_0x3bacc4[_0x4d03b3(0x221)];}))):_0x2456ab['push'](_0x3bacc4);const _0x4b0311=_0x206631[_0x86c864(0x2ae)](_0x5eb0cc=>_0x5eb0cc['date']==_0x2dbba5);_0x4b0311[_0x86c864(0x2bb)]=_0x2456ab;}else _0x206631[_0x86c864(0x195)]({'date':_0x2dbba5,'changes':[_0x3bacc4]});}const _0x202ce8=_0x206631[_0x86c864(0x2ae)](_0x5f2121=>_0x5f2121['date']==_0x2dbba5);if(_0x202ce8){let _0x3453b7=!![];_0x202ce8[_0x86c864(0x2bb)]['forEach'](_0xd29e8c=>{const _0xaec2d9=_0x86c864;if(_0xd29e8c[_0xaec2d9(0x291)]!=0x0)_0x3453b7=![];}),_0x3453b7&&(_0x206631=_0x206631['filter'](_0x41f37a=>{const _0x38a985=_0x86c864;return _0x41f37a[_0x38a985(0x2ff)]!=_0x2dbba5;}));}let _0x1f7429=dbConfig['get']('bot')[_0x86c864(0x2ae)]({'botID':botID})[_0x86c864(0x1d2)]();_0x1f7429&&(dbConfig[_0x86c864(0x1a4)](_0x86c864(0x1b2))[_0x86c864(0x2ae)]({'botID':botID})[_0x86c864(0x329)]({'liquidity':_0x206631})[_0x86c864(0x2d6)](),config[_0x86c864(0x335)]=_0x206631);logHistory(_0x86c864(0x265),_0x86c864(0x180)+Math[_0x86c864(0x315)](_0x3bacc4[_0x86c864(0x291)])+'\x20'+_0x3bacc4[_0x86c864(0x221)]+'\x20'+(_0x3bacc4['number']>0x0?_0x86c864(0x33c):_0x86c864(0x320))+_0x86c864(0x189)),proxyEmit('configuration',emittedConfiguration());const _0x166143=getNormalizedPerformance();emitPerformance(_0x166143),getStartingBalances(_0x166143),logger[_0x86c864(0x1ab)](_0x86c864(0x219));}else config['autoliquidity']==_0x86c864(0x2cd)&&(config[_0x86c864(0x1e0)]?(await storeHeadless({'headless':![]}),logHistory('success',_0x86c864(0x180)+Math[_0x86c864(0x315)](_0x3bacc4[_0x86c864(0x291)])+'\x20'+_0x3bacc4[_0x86c864(0x221)]+'\x20'+(_0x3bacc4[_0x86c864(0x291)]>0x0?_0x86c864(0x33c):_0x86c864(0x320))+_0x86c864(0x23b))):logger['debug'](_0x86c864(0x180)+Math[_0x86c864(0x315)](_0x3bacc4[_0x86c864(0x291)])+'\x20'+_0x3bacc4['coin']+'\x20'+(_0x3bacc4[_0x86c864(0x291)]>0x0?_0x86c864(0x33c):'removed')+'\x20-\x20bot\x20already\x20running\x20in\x20manual\x20mode'));}else logger[_0x86c864(0x1ab)](_0x86c864(0x1ca)+Math[_0x86c864(0x315)](_0x3bacc4['number'])+'\x20'+_0x3bacc4['coin']+'\x20'+(_0x3bacc4['number']>0x0?'added':_0x86c864(0x320)));}else logger['debug'](_0x86c864(0x180)+Math['abs'](_0x3bacc4['number'])+'\x20'+_0x3bacc4[_0x86c864(0x221)]+'\x20'+(_0x3bacc4['number']>0x0?_0x86c864(0x33c):_0x86c864(0x320))+'\x20-\x20auto\x20adjusting\x20liquidity\x20is\x20disabled');}currentCoins=_0x23213a,currentCoinsAll=_0x54d9e1;}}catch(_0x961483){if(!exchangeStopped)await handleError(_0x961483,_0x86c864(0x2b3));}transactionDetectionOngoing=![];}async function watchTransactions(){await sleep(0x14*0x3e8);while(!![]){!botPaused&&!blockTransactionDetection&&coinsLoaded?(detectLiquidityChange(),await sleep(watchTransactionsInterval)):await sleep(0x3e8);}}async function loadSymbols(){const _0x484013=_0x831beb;try{markets=await exchange[_0x484013(0x1a0)](!![]),allSymbols=[],Object[_0x484013(0x2eb)](markets)[_0x484013(0x1e6)](_0x1c23b8=>{const _0x8868c2=_0x484013;_0x1c23b8[0x1][_0x8868c2(0x290)]&&_0x1c23b8[0x1]['spot']&&allSymbols['push'](_0x1c23b8[0x0]);});}catch(_0x3b7944){markets?logger[_0x484013(0x1ab)](_0x484013(0x317)+_0x3b7944[_0x484013(0x2bf)]()):(loading['cancel']=!![],_0x3b7944['toString']()[_0x484013(0x2a4)]()[_0x484013(0x2a7)]('timestamp')||_0x3b7944[_0x484013(0x2bf)]()[_0x484013(0x2a4)]()[_0x484013(0x2a7)](_0x484013(0x229))?(logHistory(_0x484013(0x226),_0x484013(0x217)),loading[_0x484013(0x226)]=_0x484013(0x21d)):handleErrorNoStop(_0x3b7944,'loadSymbols()',!![]),logHistory('error',_0x484013(0x1eb)),logHistory(_0x484013(0x226),_0x484013(0x2f6)+loadCoinsRetryInterval/0xea60+'\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again'),logger[_0x484013(0x1ab)](_0x484013(0x31a),_0x3b7944),emitLoadingProgress(),botPaused=!![],await sleep(loadCoinsRetryInterval),restartBot());}}function validateSymbols(_0xc13b9a){const _0x460b99=_0x831beb;let _0x3b9ef6=[];return _0xc13b9a[_0x460b99(0x1e6)](_0x2e9bc4=>{const _0x22ae78=_0x460b99;!allSymbols['includes'](_0x2e9bc4)?(logHistory('error',_0x22ae78(0x1ed)+_0x2e9bc4+_0x22ae78(0x1df)),loading[_0x22ae78(0x2c1)]=!![],emitLoadingProgress()):_0x3b9ef6[_0x22ae78(0x195)](_0x2e9bc4);}),_0x3b9ef6;}async function initclient(){const _0xd9f6a7=_0x831beb;proxyEmit('configuration',emittedConfiguration()),proxyEmit(_0xd9f6a7(0x251),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0xd9f6a7(0x18a),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x337fdd=getNormalizedPerformance();emitPerformance(_0x337fdd),getStartingBalances(_0x337fdd);}async function toggleBotMode(){const _0x7687d2=_0x831beb;let _0x25b8f1=dbConfig[_0x7687d2(0x1a4)]('bot')[_0x7687d2(0x2ae)]({'botID':botID})[_0x7687d2(0x1d2)]();if(_0x25b8f1){const _0xe1fda8=!_0x25b8f1[_0x7687d2(0x1e0)];dbConfig[_0x7687d2(0x1a4)](_0x7687d2(0x1b2))['find']({'botID':botID})[_0x7687d2(0x329)]({'headless':_0xe1fda8})[_0x7687d2(0x2d6)](),config[_0x7687d2(0x1e0)]=_0xe1fda8,proxyEmit(_0x7687d2(0x231),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x4345b3=_0x831beb;process[_0x4345b3(0x314)]({'updatebotmanager':!![]},_0x2033df=>{}),logger[_0x4345b3(0x1ab)](_0x4345b3(0x1ef)+config[_0x4345b3(0x1e0)]);}async function loadCoins(_0x3b09ca){const _0x241023=_0x831beb;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x31fc2c,_0x35e7c4=0x0,_0x2590b4=0x0;_0x3b09ca[_0x241023(0x1e6)](_0x14ea71=>{const _0x1feefe=_0x241023;loading[_0x1feefe(0x2d7)][_0x1feefe(0x195)](_0x14ea71);}),loadingCanceled=![];let _0x20f7cb=![];while(_0x31fc2c!=_0x3b09ca[_0x241023(0x174)]+maxLoadingProgress){_0x31fc2c=loadingProgress,_0x3b09ca[_0x241023(0x1e6)](_0x4519ee=>{const _0x558197=_0x241023;if(gTicker[noslash(_0x4519ee)]){loading[_0x558197(0x2d7)]=loading[_0x558197(0x2d7)][_0x558197(0x1d9)](_0x468fa=>_0x468fa!=_0x4519ee);if(!watchedSymbols[_0x558197(0x2a7)](_0x4519ee))watchedSymbols[_0x558197(0x195)](_0x4519ee);_0x31fc2c++;}}),loading[_0x241023(0x316)]=Math[_0x241023(0x2e6)](_0x31fc2c/(_0x3b09ca[_0x241023(0x174)]+maxLoadingProgress)*0x64);loading[_0x241023(0x316)]!=0x64&&(_0x2590b4>0x1e*0x5&&(loading['timeout']=!![],emitLoadingProgress()),_0x2590b4>0x78*0x5&&!_0x20f7cb&&(_0x20f7cb=!![],logHistory(_0x241023(0x226),_0x241023(0x286)+loading[_0x241023(0x2d7)]['join'](',\x20')+_0x241023(0x2d1)),logHistory(_0x241023(0x226),'Pausing\x20for\x20'+loadCoinsRetryInterval/0xea60+_0x241023(0x30d)),loadingCanceled=!![],await sleep(loadCoinsRetryInterval),restartBot()));if(loadingCanceled){loading['cancel']=!![],emitLoadingProgress();break;}else _0x35e7c4!=loading[_0x241023(0x316)]&&(_0x35e7c4=loading[_0x241023(0x316)],emitLoadingProgress()),_0x2590b4++,await sleep(0xc8);}_0x31fc2c==_0x3b09ca[_0x241023(0x174)]+maxLoadingProgress&&(coinsLoaded=!![],process[_0x241023(0x314)]({'status':_0x241023(0x2d0),'live':_0x241023(0x2e3)},_0x542494=>{}),_0x20f7cb&&logHistory('success',_0x241023(0x25c)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x5ac572=_0x831beb;proxyEmit(_0x5ac572(0x231),{...emittedConfiguration(),'configstate':_0x5ac572(0x22e)});}function emitLoadingProgress(){const _0x2d6f67=_0x831beb;proxyEmit(_0x2d6f67(0x279),loading);}async function getFiat(){const _0x5b385a=_0x831beb;let _0x2b86bb=gTicker[stablecoins[_0x5b385a(0x1f5)][_0x5b385a(0x221)]],_0x145047=gTicker[stablecoins[_0x5b385a(0x225)][_0x5b385a(0x221)]];return{'eur':Number(_0x2b86bb),'usd':Number(_0x145047)};}function capitalize(_0x142628){const _0x64057e=_0x831beb;return _0x142628[_0x64057e(0x1e4)](0x0,0x1)['toUpperCase']()+_0x142628['substring'](0x1);}function supportedExchanges(){const _0x3ad6f4=_0x831beb,_0x5f2d55=['ws',_0x3ad6f4(0x1ae),_0x3ad6f4(0x1bd),_0x3ad6f4(0x277),_0x3ad6f4(0x303),_0x3ad6f4(0x22c),_0x3ad6f4(0x1af),_0x3ad6f4(0x1e1),'fetchBalance'];let _0x20ddfc=[],_0x4b9715=[],_0x498f3c=ccxt[_0x3ad6f4(0x176)][_0x3ad6f4(0x251)];_0x498f3c[_0x3ad6f4(0x1e6)](_0x39634c=>{const _0x485e93=_0x3ad6f4;try{const _0x5eed5c=new ccxt[(_0x485e93(0x176))][_0x39634c]();_0x4b9715[_0x485e93(0x195)](_0x5eed5c);}catch(_0x5631e8){}}),_0x4b9715[_0x3ad6f4(0x1e6)](_0x4112b0=>{const _0x2f9c03=_0x3ad6f4;let _0x11447c=0x0;_0x5f2d55['forEach'](_0x61dc6e=>{const _0x4f5398=_0x29eb;_0x61dc6e in _0x4112b0[_0x4f5398(0x216)]&&_0x4112b0[_0x4f5398(0x216)][_0x61dc6e]&&_0x11447c++;}),_0x11447c==_0x5f2d55[_0x2f9c03(0x174)]&&(!excludedExchanges[_0x2f9c03(0x2a7)](_0x4112b0['id'])&&_0x20ddfc[_0x2f9c03(0x195)](capitalize(_0x4112b0['id'])));});let _0x1175f4=[];return _0x498f3c[_0x3ad6f4(0x1e6)](_0x3949dd=>{const _0x4664c5=_0x3ad6f4;_0x3949dd=capitalize(_0x3949dd);if(!_0x20ddfc[_0x4664c5(0x2a7)](_0x3949dd))_0x1175f4[_0x4664c5(0x195)](_0x3949dd);}),_0x20ddfc;}function setStartDatePerformance(){const _0x1bce65=_0x831beb;if(config&&config[_0x1bce65(0x335)][0x0]['changes'][_0x1bce65(0x174)]!=0x0){const _0x39ca1d=config[_0x1bce65(0x335)][0x0]['changes'];dbPerformance[_0x1bce65(0x1a4)](_0x1bce65(0x2c6))[_0x1bce65(0x2ae)]({'date':config['startdate']})['assign']({'coins':_0x39ca1d})[_0x1bce65(0x2d6)]();}}function calculatePnL(_0x176956,_0x58f317,_0x3dd036,_0x1c18f0,_0x59800e,_0x30e8de){const _0x83125a=_0x831beb;!_0x176956[_0x83125a(0x2a7)]('/'+config[_0x83125a(0x1c1)])&&(_0x3dd036=_0x3dd036==_0x83125a(0x339)?_0x83125a(0x2cb):_0x83125a(0x339));!_0x30e8de[_0x58f317]&&(_0x30e8de[_0x58f317]={'number':0x0,'sells':0x0,'buys':0x0,'breakeven':0x0,'realizedPnL':0x0});let _0x18da2b=0x0,_0x200594,_0x5c06fb;if(_0x3dd036=='buy')_0x5c06fb=_0x30e8de[_0x58f317]['number']*_0x30e8de[_0x58f317]['breakeven']+_0x59800e*_0x1c18f0,_0x30e8de[_0x58f317][_0x83125a(0x291)]+=_0x1c18f0,_0x30e8de[_0x58f317][_0x83125a(0x322)]=_0x30e8de[_0x58f317]['number']!=0x0?_0x5c06fb/_0x30e8de[_0x58f317][_0x83125a(0x291)]:0x0,_0x30e8de[_0x58f317][_0x83125a(0x261)]++;else _0x3dd036=='sell'&&(_0x200594=Math[_0x83125a(0x1fd)](_0x30e8de[_0x58f317][_0x83125a(0x291)],_0x1c18f0),_0x18da2b=(_0x59800e-_0x30e8de[_0x58f317]['breakeven'])*_0x200594,_0x5c06fb=Math[_0x83125a(0x1b1)](_0x30e8de[_0x58f317][_0x83125a(0x291)]*_0x30e8de[_0x58f317][_0x83125a(0x322)]-_0x200594*_0x30e8de[_0x58f317]['breakeven'],0x0),_0x30e8de[_0x58f317]['number']-=_0x200594,_0x30e8de[_0x58f317][_0x83125a(0x322)]=_0x30e8de[_0x58f317][_0x83125a(0x291)]!=0x0?_0x5c06fb/_0x30e8de[_0x58f317]['number']:0x0,_0x30e8de[_0x58f317][_0x83125a(0x349)]+=_0x18da2b,_0x30e8de[_0x58f317][_0x83125a(0x255)]++);return _0x18da2b;}async function generatePnL(){const _0xb8b1d6=_0x831beb;pnlGenerationNeeded=![],logger[_0xb8b1d6(0x1ab)]('Generating\x20PnL\x20data');const _0x116795=dbLogs[_0xb8b1d6(0x1a4)](_0xb8b1d6(0x1a1))['value']();let _0x137b04={},_0x3bca0d=0x0,_0x262477=0x0,_0xc405ef=config['startdate'];const _0x327eec=fns[_0xb8b1d6(0x218)](_0xc405ef,_0xb8b1d6(0x1b6),new Date()),_0x49b6e3=new Date();let _0x3d4c16=0x0;for(let _0x24c78c=_0x327eec;!fns[_0xb8b1d6(0x207)](_0x49b6e3,_0x24c78c);_0x24c78c=fns[_0xb8b1d6(0x2ad)](_0x24c78c,0x1)){const _0x382250=fns[_0xb8b1d6(0x181)](_0x24c78c,_0xb8b1d6(0x1b6));while(_0x3bca0d<_0x116795[_0xb8b1d6(0x174)]){const _0x20c7a7=new Date(_0x116795[_0x3bca0d][_0xb8b1d6(0x29c)]);if(fns[_0xb8b1d6(0x207)](_0x20c7a7,_0x24c78c))_0x3bca0d++;else{if(_0x116795[_0x3bca0d][_0xb8b1d6(0x29c)][_0xb8b1d6(0x2a7)](_0x382250)){const _0x4125b2=_0x116795[_0x3bca0d];if(_0x4125b2[_0xb8b1d6(0x248)]==='order'&&(_0x4125b2['event'][_0xb8b1d6(0x2a7)](_0xb8b1d6(0x324))||_0x4125b2[_0xb8b1d6(0x2bc)][_0xb8b1d6(0x2a7)](_0xb8b1d6(0x249)))){const _0x50b038=_0x4125b2[_0xb8b1d6(0x2bc)][_0xb8b1d6(0x292)](/([A-Z]+\/[A-Z]+) (sell|buy) #([\d.]+) @([\d.]+)/);if(_0x50b038){const [,_0x350e56,_0x25f1a2,_0xa4eadd,_0x12b2f2]=_0x50b038,_0x41f843=_0x350e56['includes']('/'+config['basecoin'])?_0x350e56[_0xb8b1d6(0x1b8)]('/')[0x0]:_0x350e56[_0xb8b1d6(0x1b8)]('/')[0x1],_0x48105d=calculatePnL(_0x350e56,_0x41f843,_0x25f1a2,parseFloat(_0xa4eadd),parseFloat(_0x12b2f2),_0x137b04);_0x262477+=_0x48105d;}}_0x3bca0d++;}else break;}}dbPerformance[_0xb8b1d6(0x1a4)](_0xb8b1d6(0x2c6))[_0xb8b1d6(0x2ae)]({'date':_0x382250})[_0xb8b1d6(0x329)]({'pnl':_0x262477})[_0xb8b1d6(0x2d6)]();}dbCoinResults[_0xb8b1d6(0x23d)](_0xb8b1d6(0x17a),_0x137b04)[_0xb8b1d6(0x2d6)](),logger[_0xb8b1d6(0x1ab)]('Generated\x20PnL\x20data');const _0x54e0dd=getNormalizedPerformance();emitPerformance(_0x54e0dd);}async function updatePnL(_0x20103e){const _0xd64ab5=_0x831beb,{symbol:_0x3dee59,coin:_0x4b929a,amount:_0x445b02,price:_0x145f8f,side:_0x36e65f,reverse:_0x2c8474}=_0x20103e;let _0x313233=dbCoinResults[_0xd64ab5(0x1a4)](_0xd64ab5(0x17a))[_0xd64ab5(0x1d2)]();const _0x4ab17a=calculatePnL(_0x3dee59,_0x4b929a,_0x36e65f,_0x445b02,_0x145f8f,_0x313233);dbCoinResults[_0xd64ab5(0x23d)]('coins',_0x313233)[_0xd64ab5(0x2d6)]();const _0x350289=getTimeStamp()[_0xd64ab5(0x1b8)]('\x20')[0x0];let _0x3a307a=dbPerformance[_0xd64ab5(0x1a4)](_0xd64ab5(0x2c6))['find']({'date':_0x350289})[_0xd64ab5(0x1d2)]();_0x3a307a?(_0x3a307a[_0xd64ab5(0x1c5)]+=_0x4ab17a,dbPerformance[_0xd64ab5(0x1a4)](_0xd64ab5(0x2c6))[_0xd64ab5(0x2ae)]({'date':_0x350289})['assign'](_0x3a307a)['write']()):await storePerformance();const _0x15e3cc=getNormalizedPerformance();emitPerformance(_0x15e3cc);}async function validate24hChanges(){const _0x255362=_0x831beb;for(const _0x45cc1a of currentCoins){if(_0x45cc1a[_0x255362(0x221)]!=config[_0x255362(0x1c1)]){let _0x419655;_0x45cc1a[_0x255362(0x30f)]?_0x419655=formatResult((0x1/(gChange[_0x45cc1a[_0x255362(0x319)]]/0x64+0x1)-0x1)*0x64,0x3):_0x419655=gChange[_0x45cc1a['symbol']],_0x419655<config[_0x255362(0x1dd)]&&(logHistory(_0x255362(0x226),_0x45cc1a[_0x255362(0x221)]+'\x20has\x20a\x2024h\x20drop\x20of\x20'+_0x419655+'%'),logHistory(_0x255362(0x226),_0x255362(0x238)),logHistory(_0x255362(0x226),_0x255362(0x2c2)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x5db398,_0x19ca2b){const _0x5c80a0=_0x831beb;if(!_0x5db398)return!![];const _0x1184e9=_0x19ca2b[_0x5c80a0(0x1b8)]('.'),_0x277b57=_0x5db398['split']('.');for(var _0x5f3c37=0x0;_0x5f3c37<_0x277b57[_0x5c80a0(0x174)];_0x5f3c37++){const _0x6b04ef=~~_0x277b57[_0x5f3c37],_0x3343f1=~~_0x1184e9[_0x5f3c37];if(_0x6b04ef<_0x3343f1)return!![];if(_0x6b04ef>_0x3343f1)return![];}return![];}async function oneTimeMigration(){const _0x465c01=_0x831beb;let _0x1d5c32=dbLogs[_0x465c01(0x1a4)](_0x465c01(0x2de))[_0x465c01(0x1d2)]();if(isOlderVersion(_0x1d5c32,_0x465c01(0x1e9))){let _0x357679=[];const _0x385e86=dbLogs[_0x465c01(0x1a4)](_0x465c01(0x1a1))[_0x465c01(0x1d2)]();_0x385e86[_0x465c01(0x1e6)](_0x42ec12=>{const _0x2cdff6=_0x465c01;_0x357679[_0x2cdff6(0x195)]({'time':_0x42ec12[_0x2cdff6(0x29c)],'type':_0x42ec12[_0x2cdff6(0x248)],'event':_0x42ec12[_0x2cdff6(0x2bc)]});}),dbLogs['get'](_0x465c01(0x1a1))[_0x465c01(0x329)](_0x357679)[_0x465c01(0x2d6)]();}let _0x55f9be=dbConfig[_0x465c01(0x1a4)]('version')['value']();if(isOlderVersion(_0x55f9be,_0x465c01(0x1e9))){let _0x7da0a6=dbConfig['get'](_0x465c01(0x1b2))[_0x465c01(0x2ae)]({'botID':botID})[_0x465c01(0x1d2)]();if(_0x7da0a6){let _0x22b418=[];_0x7da0a6[_0x465c01(0x2f2)][_0x465c01(0x1e6)](_0x2b1c29=>{const _0x21cfe3=_0x465c01;_0x22b418[_0x21cfe3(0x195)]({'coin':_0x2b1c29[_0x21cfe3(0x221)],'number':_0x2b1c29['startnumber'],'price':_0x2b1c29['startprice']}),delete _0x2b1c29['startnumber'],delete _0x2b1c29[_0x21cfe3(0x2aa)];});if(_0x22b418[_0x465c01(0x174)]!==0x0)fs[_0x465c01(0x1c3)](configbackuppath+(_0x465c01(0x1cb)+botID+_0x465c01(0x2a9)),JSON[_0x465c01(0x1c4)](_0x22b418,null,0x4),function(_0x563998){if(_0x563998){}});const _0x2f7df0=(_0x20ecff,_0x23608e)=>{const _0x51268c=_0x465c01;let _0x167a5f=[];_0x23608e['forEach'](_0x9ff94e=>{const _0x1d4a2a=_0x29eb,_0xe1ebeb=_0x20ecff[_0x1d4a2a(0x2ae)](_0x4028e8=>_0x4028e8[_0x1d4a2a(0x221)]==_0x9ff94e[_0x1d4a2a(0x221)]);if(!_0xe1ebeb)_0x167a5f[_0x1d4a2a(0x195)](_0x9ff94e);});let _0x1f34a0=[];return _0x20ecff[_0x51268c(0x1e6)](_0x32835b=>{const _0x331392=_0x51268c,_0x5a671e=_0x23608e[_0x331392(0x2ae)](_0x26bf47=>_0x26bf47[_0x331392(0x221)]==_0x32835b[_0x331392(0x221)]);if(!_0x5a671e||_0x5a671e['number']==0x0&&_0x32835b[_0x331392(0x291)]!=0x0)_0x1f34a0[_0x331392(0x195)](_0x32835b);}),{'missingDay1':_0x167a5f,'notInDay2':_0x1f34a0};},_0x15f0d7=dbPerformance[_0x465c01(0x1a4)](_0x465c01(0x2c6))[_0x465c01(0x2b0)]()['value']();if(_0x15f0d7[_0x465c01(0x174)]>0x1){const {missingDay1:_0x36885e,notInDay2:_0x42ad6d}=_0x2f7df0(_0x22b418,_0x15f0d7[0x1][_0x465c01(0x17a)]);_0x22b418=[..._0x22b418,..._0x36885e],_0x42ad6d[_0x465c01(0x1e6)](_0x43af1f=>{const _0x2139d9=_0x465c01;let _0x26c246=_0x22b418[_0x2139d9(0x2b6)](_0x3b0811=>_0x3b0811[_0x2139d9(0x221)]==_0x43af1f[_0x2139d9(0x221)]);_0x26c246!=-0x1&&_0x22b418[_0x2139d9(0x342)](_0x26c246,0x1);});}_0x22b418[_0x465c01(0x20b)]((_0x471951,_0x32d6f7)=>_0x471951['coin']>_0x32d6f7[_0x465c01(0x221)]?0x1:_0x32d6f7['coin']>_0x471951[_0x465c01(0x221)]?-0x1:0x0);let _0x3d8ccd=[{'date':_0x7da0a6[_0x465c01(0x2e5)],'changes':_0x22b418}];_0x15f0d7[_0x465c01(0x174)]>0x2&&_0x15f0d7['forEach']((_0x12ee47,_0xbda0de)=>{const _0xc0c476=_0x465c01;if(_0xbda0de>0x0&&_0xbda0de<_0x15f0d7[_0xc0c476(0x174)]-0x1){const {missingDay1:_0x372ffa,notInDay2:_0x418450}=_0x2f7df0(_0x15f0d7[_0xbda0de]['coins'],_0x15f0d7[_0xbda0de+0x1][_0xc0c476(0x17a)]);_0x22b418=[],(_0x372ffa[_0xc0c476(0x174)]!=0x0||_0x418450[_0xc0c476(0x174)]!=0x0)&&(_0x372ffa[_0xc0c476(0x174)]!=0x0&&_0x22b418['push'](..._0x372ffa),_0x418450[_0xc0c476(0x174)]!=0x0&&(_0x418450[_0xc0c476(0x1e6)](_0x2bf8b0=>{const _0x4fe4c3=_0xc0c476;_0x2bf8b0[_0x4fe4c3(0x291)]=-_0x2bf8b0[_0x4fe4c3(0x291)];}),_0x22b418[_0xc0c476(0x195)](..._0x418450)),_0x22b418['sort']((_0x35d3d4,_0x9ba09f)=>_0x35d3d4[_0xc0c476(0x221)]>_0x9ba09f['coin']?0x1:_0x9ba09f[_0xc0c476(0x221)]>_0x35d3d4[_0xc0c476(0x221)]?-0x1:0x0),_0x3d8ccd[_0xc0c476(0x195)]({'date':_0x15f0d7[_0xbda0de+0x1][_0xc0c476(0x2ff)],'changes':_0x22b418}));}}),dbConfig['get'](_0x465c01(0x1b2))['find']({'botID':botID})[_0x465c01(0x329)]({..._0x7da0a6,'liquidity':_0x3d8ccd})[_0x465c01(0x2d6)]();}}if(isOlderVersion(_0x55f9be,_0x465c01(0x24a))){let _0x1a8377=dbConfig[_0x465c01(0x1a4)](_0x465c01(0x1b2))[_0x465c01(0x2ae)]({'botID':botID})[_0x465c01(0x1d2)]();if(_0x1a8377){const _0x5e8535=_0x1a8377[_0x465c01(0x1d0)],_0x24dece=_0x5e8535?capitalize(_0x5e8535):_0x465c01(0x304);dbConfig[_0x465c01(0x1a4)]('bot')[_0x465c01(0x2ae)]({'botID':botID})[_0x465c01(0x329)]({'exchange':_0x24dece})[_0x465c01(0x2d6)]();}}if(isOlderVersion(_0x55f9be,_0x465c01(0x2db))){let _0x374437=dbConfig[_0x465c01(0x1a4)]('bot')[_0x465c01(0x2ae)]({'botID':botID})[_0x465c01(0x1d2)]();if(_0x374437){const _0x3bfb49=_0x374437[_0x465c01(0x1e8)],_0x42f049=_0x3bfb49?_0x465c01(0x1d1):![];dbConfig[_0x465c01(0x1a4)]('bot')[_0x465c01(0x2ae)]({'botID':botID})[_0x465c01(0x329)]({'marketcapEnabled':_0x42f049})['write']();}}if(isOlderVersion(_0x55f9be,_0x465c01(0x21f))){let _0x2a3f34=dbConfig[_0x465c01(0x1a4)]('bot')['find']({'botID':botID})['value']();if(_0x2a3f34){const _0x1ed1eb=_0x2a3f34[_0x465c01(0x190)],_0x31537e=_0x1ed1eb?_0x465c01(0x2ab):![];dbConfig[_0x465c01(0x1a4)]('bot')['find']({'botID':botID})[_0x465c01(0x329)]({'autoliquidity':_0x31537e})['write']();}}let _0x41e5a5=dbPerformance[_0x465c01(0x1a4)]('version')[_0x465c01(0x1d2)]();isOlderVersion(_0x41e5a5,_0x465c01(0x1e9))&&setStartDatePerformance();let _0x5a3e31=dbCoinResults['get']('version')[_0x465c01(0x1d2)]();if(isOlderVersion(_0x5a3e31,_0x465c01(0x27a))){let _0x23e94f=dbCoinResults[_0x465c01(0x1a4)](_0x465c01(0x17a))[_0x465c01(0x1d2)]();if(_0x23e94f[_0x465c01(0x174)]!=0x0)pnlGenerationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x4160f3=_0x831beb;dbConfig[_0x4160f3(0x23d)](_0x4160f3(0x2de),serverversion)[_0x4160f3(0x2d6)](),dbPerformance[_0x4160f3(0x23d)]('version',serverversion)['write'](),dbLogs[_0x4160f3(0x23d)](_0x4160f3(0x2de),serverversion)[_0x4160f3(0x2d6)](),dbCoinResults[_0x4160f3(0x23d)](_0x4160f3(0x2de),serverversion)[_0x4160f3(0x2d6)]();}function getConfiguration(_0x325b00){const _0x54d463=_0x831beb;let _0x37ce75=dbConfig[_0x54d463(0x1a4)]('bot')[_0x54d463(0x2ae)]({'botID':_0x325b00})[_0x54d463(0x1d2)]();if(_0x37ce75){let _0x55c2f3=![];typeof _0x37ce75[_0x54d463(0x28e)]==_0x54d463(0x293)&&(_0x37ce75={..._0x37ce75,'threshold':Number(_0x37ce75[_0x54d463(0x28e)])},_0x55c2f3=!![]),_0x37ce75[_0x54d463(0x1dd)]==undefined&&(_0x37ce75={..._0x37ce75,'change24h':-0x14},_0x55c2f3=!![]),_0x37ce75[_0x54d463(0x1ee)]==undefined&&(_0x37ce75={..._0x37ce75,'fiat':_0x54d463(0x2ba)},_0x55c2f3=!![]),_0x37ce75['onepagemode']==undefined&&(_0x37ce75={..._0x37ce75,'onepagemode':settings[_0x54d463(0x2ee)]},_0x55c2f3=!![]),_0x37ce75[_0x54d463(0x26a)]==undefined&&(_0x37ce75={..._0x37ce75,'colorscheme':_0x54d463(0x26c)},_0x55c2f3=!![]),_0x37ce75['autoliquidity']==undefined&&(_0x37ce75={..._0x37ce75,'autoliquidity':_0x54d463(0x2ab)},_0x55c2f3=!![]),_0x37ce75[_0x54d463(0x2f4)]==undefined&&(_0x37ce75={..._0x37ce75,'marketcapApi':settings[_0x54d463(0x2f4)]?!![]:![]},_0x55c2f3=!![]),_0x37ce75['marketcapEnabled']==undefined&&(_0x37ce75={..._0x37ce75,'marketcapEnabled':![]},_0x55c2f3=!![]),_0x37ce75[_0x54d463(0x263)]==undefined&&(_0x37ce75={..._0x37ce75,'sandbox':![]},_0x55c2f3=!![]),_0x55c2f3&&(_0x37ce75={'botID':_0x37ce75['botID'],'exchange':_0x37ce75[_0x54d463(0x1d0)],'apiKey':_0x37ce75[_0x54d463(0x228)],'apiSecret':_0x37ce75[_0x54d463(0x197)],'apiPassword':_0x37ce75['apiPassword'],'basecoin':_0x37ce75[_0x54d463(0x1c1)],'botname':_0x37ce75[_0x54d463(0x29b)],'showname':_0x37ce75[_0x54d463(0x2d3)],'threshold':_0x37ce75[_0x54d463(0x28e)],'ordertype':_0x37ce75[_0x54d463(0x17e)],'timeout':_0x37ce75['timeout'],'fiat':_0x37ce75[_0x54d463(0x1ee)],'startdate':_0x37ce75[_0x54d463(0x2e5)],'recreate':_0x37ce75[_0x54d463(0x32e)],'timeshift':_0x37ce75[_0x54d463(0x240)],'onepagemode':_0x37ce75[_0x54d463(0x2ee)],'headless':_0x37ce75[_0x54d463(0x1e0)],'cooldown':_0x37ce75[_0x54d463(0x26f)],'change24h':_0x37ce75[_0x54d463(0x1dd)],'emojibuy':_0x37ce75[_0x54d463(0x23e)],'emojisell':_0x37ce75['emojisell'],'colorscheme':_0x37ce75[_0x54d463(0x26a)],'marketcapApi':_0x37ce75[_0x54d463(0x2f4)],'marketcapEnabled':_0x37ce75[_0x54d463(0x1e8)],'sandbox':_0x37ce75[_0x54d463(0x263)],'portfolio':_0x37ce75[_0x54d463(0x2f2)],'autoliquidity':_0x37ce75['autoliquidity'],'liquidity':_0x37ce75[_0x54d463(0x335)],'openOrders':_0x37ce75[_0x54d463(0x2c5)]},dbConfig[_0x54d463(0x1a4)]('bot')[_0x54d463(0x2a0)]()[_0x54d463(0x2d6)](),dbConfig[_0x54d463(0x1a4)](_0x54d463(0x1b2))[_0x54d463(0x195)](_0x37ce75)[_0x54d463(0x2d6)]());}else _0x37ce75={'botID':_0x325b00,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x54d463(0x2a2)+_0x325b00,'showname':![],'threshold':0x3,'ordertype':_0x54d463(0x252),'timeout':0x14,'fiat':_0x54d463(0x2ba),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x54d463(0x240)],'onepagemode':settings[_0x54d463(0x2ee)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x54d463(0x26c),'marketcapApi':settings['marketcapApi']?!![]:![],'marketcapEnabled':![],'sandbox':![],'portfolio':[],'autoliquidity':_0x54d463(0x2ab),'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x37ce75;}function emittedConfiguration(){const _0xad4562=_0x831beb;let _0x4da8a4;if(config[_0xad4562(0x228)]=='')_0x4da8a4={...config,'configstate':_0xad4562(0x1f0)};else config[_0xad4562(0x228)]==_0xad4562(0x270)?_0x4da8a4={...config,'configstate':_0xad4562(0x280)}:(_0x4da8a4={...config,'apiKey':'************','apiSecret':_0xad4562(0x30b)},config['apiPassword']&&(_0x4da8a4[_0xad4562(0x269)]='************'));return _0x4da8a4[_0xad4562(0x1ad)]=enableFiatToggle,_0x4da8a4;}function getSettings(){const _0x1d7fe2=_0x831beb;return dbSettings['get'](_0x1d7fe2(0x27e))[_0x1d7fe2(0x1d2)]();}function getSecure(){const _0x2bcd6b=_0x831beb;return dbSecure[_0x2bcd6b(0x1a4)](_0x2bcd6b(0x1aa))['value']()||{};}function updateTimeshift(_0x532d1f){const _0x4180d5=_0x831beb;let _0x325c28=dbConfig[_0x4180d5(0x1a4)](_0x4180d5(0x1b2))['find']({'botID':botID})['value']();_0x325c28&&dbConfig[_0x4180d5(0x1a4)]('bot')[_0x4180d5(0x2ae)]({'botID':botID})[_0x4180d5(0x329)]({'timeshift':_0x532d1f})['write'](),config['timeshift']=_0x532d1f,proxyEmit(_0x4180d5(0x231),emittedConfiguration());}function updateOnepagemode(_0x487132){const _0x1a9d0e=_0x831beb;let _0x1eb74c=dbConfig[_0x1a9d0e(0x1a4)]('bot')[_0x1a9d0e(0x2ae)]({'botID':botID})[_0x1a9d0e(0x1d2)]();_0x1eb74c&&dbConfig[_0x1a9d0e(0x1a4)]('bot')[_0x1a9d0e(0x2ae)]({'botID':botID})['assign']({'onepagemode':_0x487132})[_0x1a9d0e(0x2d6)](),config[_0x1a9d0e(0x2ee)]=_0x487132,proxyEmit('configuration',emittedConfiguration());}function updateMarketcapApi(_0x1390fe){const _0x4d116a=_0x831beb,_0x21fffa=_0x1390fe?!![]:![];let _0x2ef703=dbConfig[_0x4d116a(0x1a4)](_0x4d116a(0x1b2))['find']({'botID':botID})['value']();_0x2ef703&&dbConfig['get'](_0x4d116a(0x1b2))['find']({'botID':botID})[_0x4d116a(0x329)]({'marketcapApi':_0x21fffa})[_0x4d116a(0x2d6)](),config['marketcapApi']=_0x21fffa,getMarketCap(),proxyEmit('configuration',emittedConfiguration());}async function storeConfiguration(_0x2e38a3){const _0x304f43=_0x831beb;logger['debug']('Saving\x20configuration');_0x2e38a3[_0x304f43(0x2a6)]&&delete _0x2e38a3['configstate'];if(pidBalances)clearTimeout(pidBalances);setBlockTransactionDetection(!![]);let _0x270d2f=![],_0x478647=![],_0x965103=[];_0x2e38a3[_0x304f43(0x2f2)][_0x304f43(0x1e6)](_0x48772e=>{const _0x5552c1=_0x304f43;if(!_0x48772e[_0x5552c1(0x288)]&&_0x48772e[_0x5552c1(0x221)]!=_0x2e38a3[_0x5552c1(0x1c1)])_0x965103[_0x5552c1(0x195)](_0x48772e[_0x5552c1(0x319)]);}),_0x965103[_0x304f43(0x1e6)](_0x1f213c=>{const _0x2e64bc=_0x304f43,_0x5d11a2=currentCoins[_0x2e64bc(0x2ae)](_0x54b606=>_0x54b606[_0x2e64bc(0x319)]==_0x1f213c);!_0x5d11a2&&(_0x270d2f=!![]);}),currentCoins[_0x304f43(0x1e6)](_0x29ecc8=>{const _0x369226=_0x304f43;if(_0x29ecc8[_0x369226(0x221)]!=config[_0x369226(0x1c1)]){const _0x81db22=_0x965103[_0x369226(0x2ae)](_0x569233=>_0x569233==_0x29ecc8[_0x369226(0x319)]);!_0x81db22&&(_0x270d2f=!![]);}}),_0x2e38a3[_0x304f43(0x2f2)][_0x304f43(0x1e6)](_0x303992=>{const _0x2a1802=_0x304f43,_0x52b60d=config['portfolio']['find'](_0x3807e8=>_0x3807e8['coin']==_0x303992[_0x2a1802(0x221)]);if(_0x52b60d&&_0x303992['offset']!=_0x52b60d[_0x2a1802(0x298)])_0x478647=!![];});let _0x2abe8e=dbConfig[_0x304f43(0x1a4)](_0x304f43(0x1b2))[_0x304f43(0x2ae)]({'botID':botID})[_0x304f43(0x1d2)]();_0x2e38a3={..._0x2e38a3,'apiKey':decryptRSA(secure[_0x304f43(0x1a3)],_0x2e38a3[_0x304f43(0x228)]),'apiSecret':decryptRSA(secure[_0x304f43(0x1a3)],_0x2e38a3[_0x304f43(0x197)])};_0x2e38a3['apiPassword']&&(_0x2e38a3[_0x304f43(0x269)]=decryptRSA(secure[_0x304f43(0x1a3)],_0x2e38a3[_0x304f43(0x269)]));let _0x368cab=![];if(_0x2abe8e){_0x2e38a3[_0x304f43(0x228)]==_0x304f43(0x30b)?_0x2e38a3['apiKey']=config[_0x304f43(0x228)]:_0x368cab=!![];_0x2e38a3[_0x304f43(0x197)]==_0x304f43(0x30b)?_0x2e38a3[_0x304f43(0x197)]=config[_0x304f43(0x197)]:_0x368cab=!![];if(_0x2e38a3[_0x304f43(0x269)]==_0x304f43(0x30b))_0x2e38a3[_0x304f43(0x269)]=config[_0x304f43(0x269)];else{if(_0x2e38a3[_0x304f43(0x269)])_0x368cab=!![];}dbConfig['get'](_0x304f43(0x1b2))[_0x304f43(0x2ae)]({'botID':botID})[_0x304f43(0x329)](_0x2e38a3)['write']();}else dbConfig['get'](_0x304f43(0x1b2))[_0x304f43(0x195)](_0x2e38a3)[_0x304f43(0x2d6)](),_0x368cab=!![],process[_0x304f43(0x314)]({'status':_0x304f43(0x2d0),'live':_0x304f43(0x2e3)},_0x18d2ed=>{});process[_0x304f43(0x314)]({'botname':_0x2e38a3['botname']},_0x461b8a=>{}),config={..._0x2e38a3},updateBotManager(),proxyEmit(_0x304f43(0x23c)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x368cab)await reset(!![]);else _0x270d2f||_0x478647?await reset(![]):getBalances();setBlockTransactionDetection(![]);}async function storeHeadless(_0x24a018){const _0x44bb52=_0x831beb,_0x5ea7ea={...config,'headless':_0x24a018[_0x44bb52(0x1e0)]};let _0x4ba13f=dbConfig[_0x44bb52(0x1a4)]('bot')['find']({'botID':botID})[_0x44bb52(0x1d2)]();_0x4ba13f&&dbConfig[_0x44bb52(0x1a4)](_0x44bb52(0x1b2))[_0x44bb52(0x2ae)]({'botID':botID})[_0x44bb52(0x329)](_0x5ea7ea)[_0x44bb52(0x2d6)](),config={..._0x5ea7ea},updateBotManager(),proxyEmit(_0x44bb52(0x231),emittedConfiguration());}async function storeFiat(_0x1b2b47){const _0x1549ab=_0x831beb,_0x19d05c={...config,'fiat':_0x1b2b47};let _0xd54ee4=dbConfig[_0x1549ab(0x1a4)](_0x1549ab(0x1b2))['find']({'botID':botID})['value']();_0xd54ee4&&dbConfig[_0x1549ab(0x1a4)]('bot')[_0x1549ab(0x2ae)]({'botID':botID})['assign'](_0x19d05c)['write'](),config={..._0x19d05c},proxyEmit(_0x1549ab(0x231),emittedConfiguration());}function resetHistory(){const _0x215137=_0x831beb;logger[_0x215137(0x247)](_0x215137(0x243));try{if(fs['existsSync'](path['join'](configpath,'bot-'+botID+'-events.json')))fs['unlinkSync'](path['join'](configpath,_0x215137(0x20a)+botID+'-events.json'));if(fs[_0x215137(0x29a)](path[_0x215137(0x1f7)](configpath,_0x215137(0x20a)+botID+'-performance.json')))fs['unlinkSync'](path[_0x215137(0x1f7)](configpath,_0x215137(0x20a)+botID+'-performance.json'));if(fs['existsSync'](path[_0x215137(0x1f7)](configpath,_0x215137(0x20a)+botID+_0x215137(0x308))))fs[_0x215137(0x2f0)](path[_0x215137(0x1f7)](configpath,_0x215137(0x20a)+botID+_0x215137(0x308)));}catch(_0x3c7564){if(_0x3c7564)logger[_0x215137(0x247)](_0x215137(0x2ca),_0x3c7564);}const _0x49537c=getDate();let _0x2d81bb=[];currentCoins[_0x215137(0x1e6)](_0xfde136=>{const _0x1c1a86=_0x215137;_0x2d81bb['push']({'coin':_0xfde136[_0x1c1a86(0x221)],'number':_0xfde136[_0x1c1a86(0x291)],'price':_0xfde136[_0x1c1a86(0x2b1)]});});let _0x5c0168=dbConfig[_0x215137(0x1a4)](_0x215137(0x1b2))[_0x215137(0x2ae)]({'botID':botID})[_0x215137(0x1d2)]();_0x5c0168&&(dbConfig[_0x215137(0x1a4)](_0x215137(0x1b2))[_0x215137(0x2ae)]({'botID':botID})[_0x215137(0x329)]({'liquidity':[{'date':_0x49537c,'changes':_0x2d81bb}]})[_0x215137(0x2d6)](),config['liquidity']=[]),restartBot(!![]);}function noslash(_0x3255bc){return _0x3255bc['replace']('/','');}function updateHighestFee(_0x3b867d){const _0x4d3cdf=_0x831beb;if(_0x3b867d['reverse']){let _0xaa77fc={'filled':_0x3b867d[_0x4d3cdf(0x242)]*_0x3b867d['price'],'amount':_0x3b867d[_0x4d3cdf(0x242)]*_0x3b867d[_0x4d3cdf(0x311)],'side':_0x3b867d[_0x4d3cdf(0x2ea)]==_0x4d3cdf(0x2cb)?'buy':'sell','price':0x1/_0x3b867d[_0x4d3cdf(0x311)]};_0x3b867d={..._0x3b867d,..._0xaa77fc};}const _0x37913d=defaultFee*_0x3b867d[_0x4d3cdf(0x242)]*_0x3b867d[_0x4d3cdf(0x311)];lastFees[_0x4d3cdf(0x2d5)][_0x4d3cdf(0x174)]===0x14&&lastFees[_0x4d3cdf(0x2d5)][_0x4d3cdf(0x212)](),lastFees[_0x4d3cdf(0x2d5)][_0x4d3cdf(0x195)](_0x37913d),lastFees['highest']=Math[_0x4d3cdf(0x1b1)](...lastFees[_0x4d3cdf(0x2d5)]);}async function updateNumberCoinsCcxt(_0x29221e){const _0x22a50b=_0x831beb;logger[_0x22a50b(0x1ab)](_0x22a50b(0x183)+_0x29221e[_0x22a50b(0x319)]+'\x20|\x20'+_0x29221e[_0x22a50b(0x1ea)]+_0x22a50b(0x1b5)+_0x29221e[_0x22a50b(0x242)]+'\x20/\x20'+_0x29221e[_0x22a50b(0x2ac)]+'\x20|\x20'+_0x29221e['id']);let _0x187291=_0x29221e[_0x22a50b(0x1ea)],_0x4b8df6=![];currentCoins['forEach'](_0x4cf142=>{const _0x3c4c00=_0x22a50b;_0x4cf142[_0x3c4c00(0x319)]==_0x29221e[_0x3c4c00(0x319)]&&(_0x4b8df6=!![]);});if(!_0x4b8df6)return;const _0x1b236b=currentCoins[_0x22a50b(0x2ae)](_0x3b0f50=>_0x3b0f50[_0x22a50b(0x319)]==_0x29221e[_0x22a50b(0x319)]),_0x1f81f6=_0x1b236b[_0x22a50b(0x221)],_0x3a72f4=_0xeeb916=>{const _0x21c9f0=_0x22a50b,_0x16163b=currentCoins[_0x21c9f0(0x2ae)](_0x4e136f=>_0x4e136f[_0x21c9f0(0x319)]==_0x29221e['symbol']);if(_0x16163b)_0x16163b[_0x21c9f0(0x19a)]=_0xeeb916;};let _0x2f6705=![];for(const _0x2708e8 of lastOrders){const _0x5c9f82=0x64,_0x123a66=0x1388;let _0x3bcbb0=0x0;while(!_0x2708e8['orderId']&&_0x3bcbb0*_0x5c9f82<_0x123a66){_0x3bcbb0++,await sleep(_0x5c9f82);}if(_0x3bcbb0>0x0)logger['debug'](_0x22a50b(0x1f9)+_0x3bcbb0*_0x5c9f82/0x3e8+_0x22a50b(0x250));_0x2708e8['orderId']==_0x29221e['id']&&(_0x2f6705=!![]);}if(_0x187291==_0x22a50b(0x2da)){_0x3a72f4(_0x22a50b(0x2da));if(_0x29221e[_0x22a50b(0x242)]>0x0&&_0x29221e[_0x22a50b(0x242)]<_0x29221e[_0x22a50b(0x2ac)]){if(_0x2f6705){setBlockTransactionDetection(!![]),logger[_0x22a50b(0x1ab)](_0x22a50b(0x205)+_0x29221e[_0x22a50b(0x242)]+_0x22a50b(0x1c0)+_0x29221e['id']);const _0x121c08=await getCoins(balanceUpdateDelay,undefined,undefined,_0x1f81f6);[currentCoins,currentCoinsAll]=_0x121c08,setBlockTransactionDetection(![]);}else logger[_0x22a50b(0x1ab)](_0x22a50b(0x205)+_0x29221e['filled']+')\x20unknown\x20order:\x20'+_0x29221e['id']),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay);}}else{if(_0x187291==_0x22a50b(0x1ec)){_0x3a72f4(_0x22a50b(0x1ec)),lastOrders=lastOrders['filter'](_0xa1b246=>_0xa1b246[_0x22a50b(0x319)]!=_0x29221e['symbol']);const _0x4f0ba8=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x4f0ba8,setBlockTransactionDetection(![]),await getOpenOrders(),handleOpenOrders();}else{if(_0x187291==_0x22a50b(0x227)){if(lastOrders)for(const _0x456972 of lastOrders){if(_0x456972[_0x22a50b(0x32d)]==_0x29221e['id']){logger[_0x22a50b(0x1ab)]('1\x20-\x20FILLED\x20known\x20order:\x20'+_0x29221e['id']),_0x2f6705=!![];if(_0x456972['filled']==0x0){setBlockTransactionDetection(!![]),logger[_0x22a50b(0x1ab)](_0x22a50b(0x18d)+_0x29221e['id']);if(_0x29221e[_0x22a50b(0x18c)])_0x456972[_0x22a50b(0x311)]=_0x29221e[_0x22a50b(0x18c)];else{if(_0x29221e['price'])_0x456972[_0x22a50b(0x311)]=_0x29221e[_0x22a50b(0x311)];else{}}_0x456972[_0x22a50b(0x242)]=_0x29221e[_0x22a50b(0x242)],updateHighestFee(_0x456972);const _0xa6fd8d=await getCoins(balanceUpdateDelay,undefined,undefined,_0x1f81f6);[currentCoins,currentCoinsAll]=_0xa6fd8d,setBlockTransactionDetection(![]),await validateOrders(),_0x3a72f4(_0x22a50b(0x242)),_0x456972[_0x22a50b(0x18b)]={'currency':_0x29221e[_0x22a50b(0x18b)]?_0x29221e[_0x22a50b(0x18b)][_0x22a50b(0x1b0)]:null,'cost':_0x29221e['fee']?_0x29221e[_0x22a50b(0x18b)][_0x22a50b(0x306)]:0x0},await updatePnL(_0x456972);}}}!_0x2f6705&&(logger['debug'](_0x22a50b(0x192)+_0x29221e['id']),_0x3a72f4(_0x22a50b(0x242)),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay),await updateOpenOrders(),handleOpenOrders());}}}if(lastBalances){let _0xcf067a=JSON[_0x22a50b(0x218)](lastBalances[_0x22a50b(0x2f2)]);const _0x18bb88=_0xcf067a[_0x22a50b(0x2ae)](_0x513ab3=>_0x513ab3[_0x22a50b(0x319)]==_0x29221e[_0x22a50b(0x319)]);if(_0x18bb88){if(_0x187291=='open')_0x18bb88[_0x22a50b(0x19a)]=_0x18bb88[_0x22a50b(0x19a)]=='filled'?_0x22a50b(0x242):'open';else{if(_0x187291==_0x22a50b(0x1ec))_0x18bb88[_0x22a50b(0x19a)]=_0x18bb88[_0x22a50b(0x19a)]==_0x22a50b(0x242)?'filled':_0x22a50b(0x1ec);else _0x187291=='closed'&&(_0x18bb88[_0x22a50b(0x19a)]=_0x22a50b(0x242));}}lastBalances={...lastBalances,'portfolio':JSON[_0x22a50b(0x1c4)](_0xcf067a)},proxyEmit(_0x22a50b(0x18a),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x37ecc3=_0x831beb;await getOpenOrders();let _0x22aa88=![];currentCoins[_0x37ecc3(0x1e6)](_0x57b29a=>{const _0x527f09=_0x37ecc3;_0x22aa88=allOpenOrders[_0x527f09(0x2ae)](_0x240dc9=>_0x240dc9[_0x527f09(0x319)]==_0x57b29a['symbol']),_0x57b29a[_0x527f09(0x19a)]=_0x22aa88?_0x527f09(0x2da):_0x527f09(0x24b);});}async function fetchBalance(_0x19b9bc=!![]){const _0xdfa58a=_0x831beb;let _0x451acb,_0x59dff0,_0x2fbb4b,_0x54c6aa=0x0;while(!_0x59dff0&&_0x54c6aa<maxRetries){try{return _0x451acb=await exchange[_0xdfa58a(0x1db)](),_0x59dff0=_0x451acb[_0xdfa58a(0x1b4)],_0x59dff0;}catch(_0x1d3212){_0x2fbb4b=_0x1d3212,_0x54c6aa++,await sleep(retryInterval);}}return!_0x19b9bc?handleErrorNoStop(_0x2fbb4b,_0xdfa58a(0x2bd)):await handleError(_0x2fbb4b,_0xdfa58a(0x2bd)),![];}async function getCoins(_0xa42c67=0x0,_0x510862=!![],_0x1bb28b=config['basecoin'],_0x4825e8){const _0x6ecb74=_0x831beb;let _0x10dec0=[],_0x27e8b8=[],_0x53e19d=[],_0x3c2cd9;if(_0xa42c67)await sleep(_0xa42c67);if(botPaused)return[currentCoins,currentCoinsAll];let _0xcd979f=![],_0x414e4e=0x0,_0x455fcd,_0x319edc;_0x4825e8&&(_0x455fcd=currentCoins['find'](_0x4e7c6b=>_0x4e7c6b[_0x6ecb74(0x221)]==_0x4825e8),_0x455fcd&&(_0x319edc=_0x455fcd[_0x6ecb74(0x2dc)],delete _0x455fcd[_0x6ecb74(0x2dc)]));while(!_0xcd979f){_0x3c2cd9=await fetchBalance(_0x510862);if(_0x3c2cd9){if(_0x4825e8){if(_0x3c2cd9[_0x4825e8]!=_0x319edc)logger[_0x6ecb74(0x1ab)](_0x6ecb74(0x310)+_0x4825e8+':\x20'+_0x3c2cd9[_0x4825e8]+'\x20('+_0x319edc+')'),_0xcd979f=!![];else{logger[_0x6ecb74(0x1ab)](_0x6ecb74(0x307)+_0x4825e8+':\x20'+_0x3c2cd9[_0x4825e8]+'\x20('+_0x319edc+')'),_0x414e4e++;if(_0x414e4e<balanceUpdateRetries)await sleep(balanceUpdateDelay);else{logger[_0x6ecb74(0x1ab)]('Stopped\x20fetching\x20balance\x20after\x20'+_0x414e4e+_0x6ecb74(0x33f));break;}}}else break;}else return[currentCoins,currentCoinsAll];}for(const [_0x35cf25,_0x485096]of Object[_0x6ecb74(0x2eb)](_0x3c2cd9)){_0x53e19d[_0x6ecb74(0x195)](_0x35cf25);}config[_0x6ecb74(0x2f2)]['forEach'](_0x397f45=>{const _0x10a7f7=_0x6ecb74;!_0x53e19d[_0x10a7f7(0x2a7)](_0x397f45[_0x10a7f7(0x221)])&&(_0x3c2cd9[_0x397f45['coin']]=0x0);});if(_0x1bb28b=='')for(const [_0x15c937,_0xcd5c95]of Object[_0x6ecb74(0x2eb)](_0x3c2cd9)){_0xcd5c95!=0x0&&_0x10dec0['push']({'coin':_0x15c937});}else for(const [_0x3b234d,_0x1603df]of Object[_0x6ecb74(0x2eb)](_0x3c2cd9)){const _0x45a1bd=config[_0x6ecb74(0x2f2)]['find'](_0x428814=>_0x428814[_0x6ecb74(0x221)]==_0x3b234d),_0x58bf9a=_0x3b234d+'/'+_0x1bb28b,_0x468d9d=_0x1bb28b+'/'+_0x3b234d,_0x437cf2=currentCoins[_0x6ecb74(0x2ae)](_0x1a85ac=>_0x1a85ac[_0x6ecb74(0x221)]==_0x3b234d);if((_0x1603df!=0x0||_0x45a1bd)&&(allSymbols['includes'](_0x58bf9a)||_0x3b234d==_0x1bb28b))_0x437cf2?_0x10dec0[_0x6ecb74(0x195)]({..._0x437cf2,'number':Math[_0x6ecb74(0x1b1)](_0x1603df+(_0x45a1bd&&_0x45a1bd[_0x6ecb74(0x298)]||0x0),0x0)}):_0x10dec0[_0x6ecb74(0x195)]({'coin':_0x3b234d,'symbol':_0x58bf9a,'reverse':![],'number':Math[_0x6ecb74(0x1b1)](_0x1603df+(_0x45a1bd&&_0x45a1bd[_0x6ecb74(0x298)]||0x0),0x0),'orderstatus':_0x6ecb74(0x24b)});else{if((_0x1603df!=0x0||_0x45a1bd)&&allSymbols[_0x6ecb74(0x2a7)](_0x468d9d))_0x437cf2?_0x10dec0[_0x6ecb74(0x195)]({..._0x437cf2,'number':Math[_0x6ecb74(0x1b1)](_0x1603df+(_0x45a1bd&&_0x45a1bd['offset']||0x0),0x0)}):_0x10dec0[_0x6ecb74(0x195)]({'coin':_0x3b234d,'symbol':_0x468d9d,'reverse':!![],'number':Math[_0x6ecb74(0x1b1)](_0x1603df+(_0x45a1bd&&_0x45a1bd[_0x6ecb74(0x298)]||0x0),0x0),'orderstatus':_0x6ecb74(0x24b)});else _0x45a1bd&&_0x10dec0[_0x6ecb74(0x195)]({'coin':_0x45a1bd[_0x6ecb74(0x221)],'symbol':_0x45a1bd[_0x6ecb74(0x319)],'reverse':_0x45a1bd['reverse'],'number':0x0,'orderstatus':_0x6ecb74(0x24b)});}}return _0x10dec0[_0x6ecb74(0x20b)]((_0x51a1ff,_0x27d83d)=>_0x51a1ff['delta']<_0x27d83d[_0x6ecb74(0x1a5)]?0x1:_0x27d83d[_0x6ecb74(0x1a5)]<_0x51a1ff[_0x6ecb74(0x1a5)]?-0x1:0x0),_0x27e8b8=cloneDeep(_0x10dec0),_0x10dec0=_0x10dec0[_0x6ecb74(0x1d9)](_0x24b8c7=>{const _0x541327=_0x6ecb74,_0x34b81b=config[_0x541327(0x2f2)][_0x541327(0x2ae)](_0x40ee99=>_0x40ee99[_0x541327(0x221)]==_0x24b8c7[_0x541327(0x221)]);return _0x34b81b&&!_0x34b81b[_0x541327(0x288)];}),[_0x10dec0,_0x27e8b8];}async function getOpenOrders(){const _0x2c731b=_0x831beb;let _0x391e8b;allOpenOrders=[];try{for(const _0xbf103 of config[_0x2c731b(0x2f2)]){!_0xbf103[_0x2c731b(0x288)]&&_0xbf103[_0x2c731b(0x221)]!=config[_0x2c731b(0x1c1)]&&(_0x391e8b=await exchange[_0x2c731b(0x1e1)](_0xbf103['symbol']),_0x391e8b[_0x2c731b(0x174)]>0x0&&allOpenOrders[_0x2c731b(0x195)](_0x391e8b[0x0]));}}catch(_0x5c852c){await handleError(_0x5c852c,_0x2c731b(0x24c));}}async function handleOpenOrders(_0x5c4e55=0x0){const _0x29e549=_0x831beb;allOpenOrders['length']==0x0&&lockOrders==ORDERS[_0x29e549(0x191)]&&allOrdersPlaced&&(_0x5c4e55==0x0?(logger[_0x29e549(0x1ab)](_0x29e549(0x2c0)),_0x5c4e55++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x29e549(0x1ab)]('2\x20-\x20Handled\x20open\x20orders'),validateOrders('no\x20open\x20orders')));}async function testAPI(){const _0x422294=_0x831beb;try{return await exchange[_0x422294(0x1db)](),!![];}catch(_0xcfb98e){loading[_0x422294(0x28b)]=!![],_0xcfb98e[_0x422294(0x2bf)]()[_0x422294(0x2a4)]()[_0x422294(0x2a7)](_0x422294(0x2a3))||_0xcfb98e[_0x422294(0x2bf)]()[_0x422294(0x2a4)]()[_0x422294(0x2a7)](_0x422294(0x229))?(logHistory(_0x422294(0x226),_0x422294(0x217)),loading[_0x422294(0x226)]=_0x422294(0x21d)):handleErrorNoStop(_0xcfb98e,_0x422294(0x208),!![]),logHistory('error',_0x422294(0x340)),logHistory(_0x422294(0x226),_0x422294(0x2f6)+loadCoinsRetryInterval/0xea60+_0x422294(0x30d)),logger['debug']('Error\x20details:',_0xcfb98e),emitLoadingProgress(),botPaused=!![],await sleep(loadCoinsRetryInterval),restartBot();}}async function testNewAPI(_0x21994){const _0x58bf5b=_0x831beb;logger[_0x58bf5b(0x1ab)](_0x58bf5b(0x1ba));const _0x5d3106=ccxt[_0x58bf5b(0x176)][_0x21994[_0x58bf5b(0x1d0)][_0x58bf5b(0x2a4)]()],_0x41dfb9=new _0x5d3106({'apiKey':_0x21994[_0x58bf5b(0x228)],'secret':_0x21994['apiSecret'],'options':{'defaultType':'spot'}});if(_0x21994[_0x58bf5b(0x269)])_0x41dfb9[_0x58bf5b(0x343)]=_0x21994[_0x58bf5b(0x269)];if(_0x41dfb9['has'][_0x58bf5b(0x263)])_0x41dfb9['setSandboxMode'](_0x21994[_0x58bf5b(0x263)]);if(_0x21994['exchange'][_0x58bf5b(0x2a4)]()==_0x58bf5b(0x2e1))_0x41dfb9[_0x58bf5b(0x258)][_0x58bf5b(0x185)]=operatorId;try{await _0x41dfb9['fetchBalance'](),botPaused=![];}catch(_0x3a7a27){logger[_0x58bf5b(0x1ab)](_0x58bf5b(0x187)+_0x3a7a27[_0x58bf5b(0x2bf)]());throw _0x3a7a27;}}function cloneDeep(_0x3915e2){const _0x4989c6=_0x831beb;return JSON[_0x4989c6(0x218)](JSON['stringify'](_0x3915e2));}async function getPortfolio(_0x39d12c){const _0x3499cb=_0x831beb;let _0x351248=[],_0x4c6c8d=[],_0xe3ba52=[],_0x560442;_0x39d12c[_0x3499cb(0x228)]=decryptRSA(secure[_0x3499cb(0x1a3)],_0x39d12c[_0x3499cb(0x228)]),_0x39d12c[_0x3499cb(0x197)]=decryptRSA(secure[_0x3499cb(0x1a3)],_0x39d12c['apiSecret']);if(_0x39d12c[_0x3499cb(0x269)])_0x39d12c[_0x3499cb(0x269)]=decryptRSA(secure[_0x3499cb(0x1a3)],_0x39d12c[_0x3499cb(0x269)]);if(_0x39d12c[_0x3499cb(0x228)]!=='************'||_0x39d12c[_0x3499cb(0x197)]!==_0x3499cb(0x30b)||_0x39d12c[_0x3499cb(0x269)]&&_0x39d12c['apiPassword']!==_0x3499cb(0x30b)){if(config[_0x3499cb(0x1d0)]){if(_0x39d12c['apiKey']=='************')_0x39d12c[_0x3499cb(0x228)]=config[_0x3499cb(0x228)];if(_0x39d12c['apiSecret']==_0x3499cb(0x30b))_0x39d12c[_0x3499cb(0x197)]=config[_0x3499cb(0x197)];if(_0x39d12c[_0x3499cb(0x269)]=='************')_0x39d12c[_0x3499cb(0x269)]=config[_0x3499cb(0x269)];}try{if(_0x39d12c[_0x3499cb(0x2f8)])await testNewAPI(_0x39d12c);}catch(_0x3de5cf){if(_0x3de5cf[_0x3499cb(0x2bf)]()[_0x3499cb(0x2a7)]('AuthenticationError')){logHistory(_0x3499cb(0x226),_0x3499cb(0x237)),logHistory('error','Error\x20details:\x20'+_0x3de5cf[_0x3499cb(0x2bf)]()),proxyEmit(_0x3499cb(0x1d4),![]);return;}else{if(_0x3de5cf['toString']()[_0x3499cb(0x2a7)](_0x3499cb(0x214))){logHistory('error',_0x3499cb(0x25e)),logHistory(_0x3499cb(0x226),_0x3499cb(0x259)+_0x3de5cf['toString']()),proxyEmit(_0x3499cb(0x1d4),![]);return;}else{logHistory('error','Error\x20occurred:\x20'+_0x3de5cf[_0x3499cb(0x2bf)]()),logger[_0x3499cb(0x1ab)](_0x3499cb(0x31a),_0x3de5cf),proxyEmit(_0x3499cb(0x1d4),![]);return;}}}exchange?updateExchange(_0x39d12c[_0x3499cb(0x228)],_0x39d12c[_0x3499cb(0x197)],_0x39d12c[_0x3499cb(0x269)]):await initExchange(_0x39d12c['exchange'],_0x39d12c[_0x3499cb(0x228)],_0x39d12c[_0x3499cb(0x197)],_0x39d12c[_0x3499cb(0x269)],_0x39d12c[_0x3499cb(0x263)]);await loadSymbols();const _0x21818f=await getCoins(0x0,![],_0x39d12c['basecoin']);_0xe3ba52=cloneDeep(_0x21818f[0x1]);}else{const _0x4766e1=await getCoins();_0xe3ba52=cloneDeep(_0x4766e1[0x1]);}if(_0x39d12c['basecoin']=='')proxyEmit(_0x3499cb(0x1d4),!![]),proxyEmit(_0x3499cb(0x1fb),_0xe3ba52);else{_0xe3ba52[_0x3499cb(0x1e6)](_0x2a492e=>{const _0x5b1d18=_0x3499cb;if(_0x2a492e[_0x5b1d18(0x221)]!=_0x39d12c[_0x5b1d18(0x1c1)]&&allSymbols['includes'](_0x2a492e[_0x5b1d18(0x319)]))_0x351248[_0x5b1d18(0x195)](_0x2a492e[_0x5b1d18(0x319)]);});if(_0x351248[_0x3499cb(0x174)]==0x0)logHistory(_0x3499cb(0x226),_0x3499cb(0x1e5));else{try{_0x4c6c8d=await getTickers(_0x351248);}catch(_0x14aff8){logHistory(_0x3499cb(0x226),_0x3499cb(0x1cd)),logger[_0x3499cb(0x1ab)](_0x3499cb(0x31a),_0x14aff8),proxyEmit(_0x3499cb(0x1d4),![]);return;}_0xe3ba52[_0x3499cb(0x1e6)](_0x4ab45a=>{const _0x20aecf=_0x3499cb;_0x4ab45a[_0x20aecf(0x221)]!=_0x39d12c[_0x20aecf(0x1c1)]?_0x4c6c8d[_0x4ab45a[_0x20aecf(0x319)]]?_0x4c6c8d[_0x4ab45a[_0x20aecf(0x319)]]['last']?_0x560442=_0x4ab45a['reverse']?0x1/_0x4c6c8d[_0x4ab45a[_0x20aecf(0x319)]][_0x20aecf(0x2b1)]:_0x4c6c8d[_0x4ab45a[_0x20aecf(0x319)]][_0x20aecf(0x2b1)]:_0x560442=0x0:_0x560442=0x0:_0x560442=0x1,_0x4ab45a[_0x20aecf(0x311)]=formatResult(_0x560442,0x8);}),await getMarketCap(_0xe3ba52),proxyEmit(_0x3499cb(0x1d4),!![]),proxyEmit(_0x3499cb(0x1fb),_0xe3ba52);}}}function truncateTradeAmount(_0x410fcf,_0x10ef85){const _0x5cddf9=_0x831beb;let _0x38c615=0x0;try{_0x38c615=exchange[_0x5cddf9(0x245)](_0x410fcf,_0x10ef85);}catch(_0x4ab54f){}return _0x38c615;}function checkMinimums(_0x3791ed){const _0x566b95=_0x831beb;let _0x54e457=!![];const _0xcfb757=!_0x3791ed[_0x566b95(0x30f)]?markets[_0x3791ed[_0x566b95(0x319)]][_0x566b95(0x27c)][_0x566b95(0x2ac)][_0x566b95(0x1fd)]:markets[_0x3791ed[_0x566b95(0x319)]][_0x566b95(0x27c)][_0x566b95(0x306)]['min'],_0x21304d=!_0x3791ed[_0x566b95(0x30f)]?markets[_0x3791ed[_0x566b95(0x319)]][_0x566b95(0x27c)][_0x566b95(0x306)][_0x566b95(0x1fd)]:markets[_0x3791ed[_0x566b95(0x319)]][_0x566b95(0x27c)][_0x566b95(0x2ac)]['min'],_0x46b462=truncateTradeAmount(_0x3791ed['symbol'],_0x3791ed['trade']);_0x3791ed['trade']=_0x46b462;if(Math[_0x566b95(0x315)](_0x46b462)<_0xcfb757)_0x54e457=![];if(Math[_0x566b95(0x315)](_0x46b462)*_0x3791ed[_0x566b95(0x2b1)]<_0x21304d)_0x54e457=![];let _0x17f1c5='';if(_0x3791ed[_0x566b95(0x2ea)]==_0x566b95(0x2cb)){let _0xbbe0a6=config[_0x566b95(0x2f2)][_0x566b95(0x2ae)](_0xd06b03=>_0xd06b03[_0x566b95(0x221)]==_0x3791ed[_0x566b95(0x221)]);_0xbbe0a6[_0x566b95(0x298)]>0x0?Math[_0x566b95(0x315)](_0x46b462)>_0x3791ed['number']-_0xbbe0a6[_0x566b95(0x298)]&&(_0x54e457=![],_0x17f1c5=_0x566b95(0x18f)+_0xbbe0a6['coin']+_0x566b95(0x296)):Math['abs'](_0x46b462)>_0x3791ed[_0x566b95(0x291)]&&(_0x54e457=![]);}if(_0x3791ed[_0x566b95(0x2ea)]=='buy'){let _0x1308a0=config[_0x566b95(0x2f2)][_0x566b95(0x2ae)](_0x405fea=>_0x405fea[_0x566b95(0x221)]==config[_0x566b95(0x1c1)]),_0x379147=currentCoins['find'](_0x1f986d=>_0x1f986d[_0x566b95(0x221)]==config[_0x566b95(0x1c1)]);_0x1308a0['offset']>0x0?Math['abs'](_0x46b462)*_0x3791ed['last']>_0x379147[_0x566b95(0x291)]-_0x1308a0[_0x566b95(0x298)]&&(_0x54e457=![],_0x17f1c5=_0x566b95(0x18f)+config[_0x566b95(0x1c1)]+_0x566b95(0x296)):Math['abs'](_0x46b462)*_0x3791ed['last']>_0x379147[_0x566b95(0x291)]&&(_0x54e457=![]);}return!_0x54e457&&_0x17f1c5&&!insufficientFundsWarningSent['includes'](_0x3791ed[_0x566b95(0x221)])&&(logHistory(_0x566b95(0x278),_0x17f1c5),insufficientFundsWarningSent[_0x566b95(0x195)](_0x3791ed['coin'])),_0x54e457;}async function getBalances(_0x1d3bbf=!![]){const _0x195e6a=_0x831beb;if(botPaused)return;let _0x2293d0=0x0,_0x55bd6c;const _0x39bef9=config['threshold'];if(config['headless']&&config[_0x195e6a(0x1dd)]<0x0)await validate24hChanges();currentCoins[_0x195e6a(0x1e6)](_0x51dbb4=>{const _0x56b3a2=_0x195e6a;if(_0x51dbb4['coin']!=config[_0x56b3a2(0x1c1)]){let _0x1bbc9e=gTicker[noslash(_0x51dbb4[_0x56b3a2(0x319)])];_0x55bd6c=_0x51dbb4[_0x56b3a2(0x30f)]?0x1/_0x1bbc9e:_0x1bbc9e;}else _0x55bd6c=0x1;let _0x15bf0b=_0x51dbb4[_0x56b3a2(0x291)]*_0x55bd6c;_0x2293d0+=_0x15bf0b,_0x51dbb4[_0x56b3a2(0x2b1)]=formatResult(Number(_0x55bd6c),0x8),_0x51dbb4[_0x56b3a2(0x1d2)]=_0x15bf0b;}),currentCoins[_0x195e6a(0x1e6)](_0x3e0718=>{const _0x258dbc=_0x195e6a;let _0x4a2c6e=config[_0x258dbc(0x2f2)][_0x258dbc(0x2ae)](_0x490635=>_0x490635[_0x258dbc(0x221)]==_0x3e0718['coin']),_0x193cb0=Number(_0x4a2c6e[_0x258dbc(0x1bc)]),_0x4e941a=_0x3e0718['value']/_0x2293d0*0x64,_0x5a1813=_0x193cb0*_0x2293d0/0x64/_0x3e0718[_0x258dbc(0x2b1)]-_0x3e0718['number'];_0x3e0718[_0x258dbc(0x1bc)]=formatResult(_0x4e941a,0x3),_0x3e0718[_0x258dbc(0x175)]=formatResult(_0x193cb0,0x3),_0x3e0718['trade']=formatResult(_0x5a1813,0x8),_0x3e0718[_0x258dbc(0x2ea)]='',_0x3e0718[_0x258dbc(0x230)]=![];if(_0x3e0718[_0x258dbc(0x221)]!=config['basecoin']){if(_0x3e0718[_0x258dbc(0x1bc)]>_0x193cb0)_0x3e0718[_0x258dbc(0x2ea)]=_0x258dbc(0x2cb),_0x3e0718[_0x258dbc(0x230)]=checkMinimums(_0x3e0718);else _0x3e0718[_0x258dbc(0x1bc)]<_0x193cb0&&(_0x3e0718[_0x258dbc(0x2ea)]=_0x258dbc(0x339),_0x3e0718[_0x258dbc(0x230)]=checkMinimums(_0x3e0718));}_0x3e0718[_0x258dbc(0x1a5)]=_0x3e0718[_0x258dbc(0x175)]==0x0?0x270f:_0x3e0718['distribution']/_0x3e0718[_0x258dbc(0x175)]-0x1;if(_0x3e0718[_0x258dbc(0x19a)]==_0x258dbc(0x242)||_0x3e0718[_0x258dbc(0x19a)]=='canceled')_0x3e0718[_0x258dbc(0x19a)]='none';}),currentCoins[_0x195e6a(0x20b)]((_0x5de38b,_0x3e4236)=>_0x5de38b[_0x195e6a(0x1a5)]<_0x3e4236[_0x195e6a(0x1a5)]?0x1:_0x3e4236[_0x195e6a(0x1a5)]<_0x5de38b[_0x195e6a(0x1a5)]?-0x1:0x0);const _0x3071ad=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x3071ad[_0x195e6a(0x1f5)],'usd':_0x3071ad[_0x195e6a(0x225)],'portfolio':JSON[_0x195e6a(0x1c4)](currentCoins),'threshold':_0x39bef9},proxyEmit(_0x195e6a(0x18a),{'serverversion':serverversion,'balances':lastBalances});if(_0x1d3bbf){if(config[_0x195e6a(0x1e0)])headlessMode({'portfolio':currentCoins,'threshold':_0x39bef9});else lockOrders==ORDERS[_0x195e6a(0x297)]&&!coolingDown&&notifyBalance({'portfolio':currentCoins,'threshold':_0x39bef9});}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x211cb1=getNormalizedPerformance();getStartingBalances(_0x211cb1),emitPerformance(_0x211cb1);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}function getPnL(){const _0x22d611=_0x831beb;let _0x4abcf3=dbCoinResults[_0x22d611(0x1a4)](_0x22d611(0x17a))[_0x22d611(0x1d2)](),_0x5d66d1=0x0;return Object[_0x22d611(0x2eb)](_0x4abcf3)[_0x22d611(0x1e6)](([_0x1811d8,_0x5adcaa])=>{const _0x23fce7=_0x22d611;_0x5d66d1+=_0x5adcaa[_0x23fce7(0x349)];}),_0x5d66d1;}async function storePerformance(){const _0x41483c=_0x831beb;if(!lastBalances)return;let _0xcec0c9=[],_0x158f14;const _0x3daded=getPnL();let _0x10b12e=JSON[_0x41483c(0x218)](lastBalances[_0x41483c(0x2f2)]);_0x10b12e[_0x41483c(0x20b)]((_0x30d1ae,_0x4a9384)=>_0x30d1ae['coin']>_0x4a9384[_0x41483c(0x221)]?0x1:_0x4a9384[_0x41483c(0x221)]>_0x30d1ae[_0x41483c(0x221)]?-0x1:0x0),_0x10b12e[_0x41483c(0x1e6)](_0x549a15=>{const _0x3dfe3e=_0x41483c;let _0x1d0e3f={'coin':_0x549a15['coin'],'number':_0x549a15[_0x3dfe3e(0x291)],'price':_0x549a15[_0x3dfe3e(0x2b1)]};_0xcec0c9[_0x3dfe3e(0x195)](_0x1d0e3f);});const _0x4f83ac=await getFiat(),_0x459112=getTimeStamp()['split']('\x20')[0x0],_0x3d0bdb=dbPerformance[_0x41483c(0x1a4)]('data')['find']({'date':_0x459112})[_0x41483c(0x1d2)]();_0x158f14={'date':_0x459112,'eur':_0x4f83ac[_0x41483c(0x1f5)],'usd':_0x4f83ac[_0x41483c(0x225)],'coins':_0xcec0c9,'pnl':_0x3daded},_0x3d0bdb?_0x158f14['date']!=config['startdate']&&dbPerformance[_0x41483c(0x1a4)]('data')[_0x41483c(0x2ae)]({'date':_0x459112})[_0x41483c(0x329)](_0x158f14)[_0x41483c(0x2d6)]():dbPerformance[_0x41483c(0x1a4)](_0x41483c(0x2c6))[_0x41483c(0x195)](_0x158f14)[_0x41483c(0x2d6)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x148790=_0x831beb;let _0x515ad7=[];if(dbPerformance[_0x148790(0x216)](_0x148790(0x2c6))[_0x148790(0x1d2)]()){let _0x27094b=dbPerformance[_0x148790(0x1a4)](_0x148790(0x2c6))[_0x148790(0x2b0)]()[_0x148790(0x1d9)](_0x59d91a=>{const _0x26674b=_0x148790;if(_0x59d91a['coins'][_0x26674b(0x174)]==0x0)return![];else return!![];})['sortBy'](_0x148790(0x2ff))[_0x148790(0x1d2)](),_0x161ccc=[...config[_0x148790(0x335)]];_0x161ccc[_0x148790(0x20b)]((_0x1c04b6,_0x5f4444)=>_0x1c04b6[_0x148790(0x2ff)]>_0x5f4444['date']?-0x1:_0x5f4444[_0x148790(0x2ff)]>_0x1c04b6['date']?0x1:0x0);let _0x5254d3=0x1,_0x20322f=[],_0x1324e2=0x0;_0x27094b[_0x148790(0x267)]()[_0x148790(0x30f)]()[_0x148790(0x1e6)]((_0x59ae27,_0x54db08)=>{const _0x3a7bee=_0x148790;if(_0x161ccc[_0x1324e2]){if(_0x27094b[_0x27094b[_0x3a7bee(0x174)]-_0x54db08]&&_0x161ccc[_0x1324e2]['date']==_0x27094b[_0x27094b[_0x3a7bee(0x174)]-_0x54db08][_0x3a7bee(0x2ff)]){if(_0x54db08<_0x27094b[_0x3a7bee(0x174)]){let _0xc83b16=0x0,_0x4867cb=0x0;_0x27094b[_0x27094b[_0x3a7bee(0x174)]-_0x54db08][_0x3a7bee(0x17a)]['forEach'](_0x2400c7=>{const _0x378006=_0x3a7bee;_0x4867cb+=_0x2400c7[_0x378006(0x291)]*_0x2400c7[_0x378006(0x311)];}),_0x161ccc[_0x1324e2][_0x3a7bee(0x2bb)]['forEach'](_0x34f5c2=>{_0xc83b16+=_0x34f5c2['number']*_0x34f5c2['price'];}),_0x5254d3*=_0xc83b16/(_0x4867cb-_0xc83b16)+0x1;}_0x1324e2++;}}let _0x2d8c18=0x0;_0x59ae27[_0x3a7bee(0x17a)]['forEach'](_0x2b9a97=>{const _0xce7a58=_0x3a7bee;_0x2d8c18+=_0x2b9a97[_0xce7a58(0x291)]*_0x2b9a97[_0xce7a58(0x311)];}),_0x20322f[_0x27094b[_0x3a7bee(0x174)]-_0x54db08-0x1]=_0x2d8c18*(_0x5254d3-0x1);});let _0x232931=[];_0x161ccc=[...config[_0x148790(0x335)]]||[];let _0x3e9ac8=0x0;_0x1324e2=0x0,_0x27094b['forEach']((_0x34ee1b,_0x47d432)=>{const _0x7bceca=_0x148790;if(_0x161ccc[_0x1324e2]){const _0xa7cfe9=fns[_0x7bceca(0x218)](_0x161ccc[_0x1324e2][_0x7bceca(0x2ff)],_0x7bceca(0x1b6),new Date()),_0x397f62=fns[_0x7bceca(0x218)](_0x34ee1b[_0x7bceca(0x2ff)],'yyyy/MM/dd',new Date());if(fns[_0x7bceca(0x1c9)](_0xa7cfe9,_0x397f62)){let _0x96c603=0x0;_0x161ccc[_0x1324e2]['changes'][_0x7bceca(0x1e6)](_0x5dc4dd=>{const _0x4d8bf3=_0x7bceca;!_0x232931[_0x5dc4dd[_0x4d8bf3(0x221)]]?_0x232931[_0x5dc4dd[_0x4d8bf3(0x221)]]=_0x5dc4dd[_0x4d8bf3(0x291)]:(_0x96c603=_0x232931[_0x5dc4dd[_0x4d8bf3(0x221)]],_0x232931[_0x5dc4dd[_0x4d8bf3(0x221)]]+=_0x5dc4dd[_0x4d8bf3(0x291)]);const _0x1e8f12=_0x34ee1b[_0x4d8bf3(0x17a)]['find'](_0x12ae72=>_0x12ae72['coin']==_0x5dc4dd[_0x4d8bf3(0x221)]);(!_0x1e8f12||_0x1e8f12[_0x4d8bf3(0x291)]==0x0)&&(_0x3e9ac8+=(-_0x5dc4dd[_0x4d8bf3(0x291)]-_0x96c603)*_0x5dc4dd[_0x4d8bf3(0x311)]);}),_0x1324e2++;}}_0x34ee1b[_0x7bceca(0x17a)][_0x7bceca(0x1e6)]((_0x2da2da,_0x5c8a39)=>{const _0x414b6b=_0x7bceca;_0x232931[_0x2da2da[_0x414b6b(0x221)]]&&(_0x2da2da[_0x414b6b(0x1f0)]=_0x232931[_0x2da2da[_0x414b6b(0x221)]]);}),_0x515ad7[_0x7bceca(0x195)]({'date':_0x34ee1b[_0x7bceca(0x2ff)],'eur':_0x34ee1b[_0x7bceca(0x1f5)],'usd':_0x34ee1b[_0x7bceca(0x225)],'offset':_0x20322f[_0x47d432],'netoffset':_0x3e9ac8,'coins':_0x34ee1b[_0x7bceca(0x17a)],'pnl':_0x34ee1b[_0x7bceca(0x1c5)]});});}return _0x515ad7;}function emitPerformance(_0x22e64f){const _0x3a1b5d=_0x831beb;_0x22e64f['length']!==0x0?(proxyEmit('performance',_0x22e64f),lastPerformanceEmitted=getDate()):proxyEmit(_0x3a1b5d(0x1ac),[]);}function getPerf(_0x5c0824,_0x54c3ef){const _0xd19bbb=_0x831beb;let _0xc92d69=0x0,_0x1503f5=0x0,_0x2d78cc=0x0;_0x5c0824[_0xd19bbb(0x17a)]['forEach'](_0x21109c=>{const _0x20305f=_0xd19bbb;_0xc92d69+=_0x21109c['number']*_0x21109c[_0x20305f(0x311)];});_0x54c3ef&&(_0xc92d69+=_0x5c0824[_0xd19bbb(0x298)]);if(config['basecoin']===_0xd19bbb(0x1da)||config[_0xd19bbb(0x1c1)]==='ETH'||config[_0xd19bbb(0x1c1)]==='PAXG')_0x1503f5=_0xc92d69*_0x5c0824[_0xd19bbb(0x1f5)],_0x2d78cc=_0xc92d69*_0x5c0824['usd'];else{if(usdBasecoins['includes'](config['basecoin']))_0x1503f5=_0xc92d69*_0x5c0824['eur']/_0x5c0824[_0xd19bbb(0x225)],_0x2d78cc=_0xc92d69;else config[_0xd19bbb(0x1c1)]===_0xd19bbb(0x21a)&&(_0x1503f5=_0xc92d69,_0x2d78cc=_0xc92d69*_0x5c0824[_0xd19bbb(0x225)]/_0x5c0824[_0xd19bbb(0x1f5)]);}return[_0xc92d69,_0x1503f5,_0x2d78cc];}function CurrencyFactor(_0x23c75b,_0xd8b03c,_0x496023){const _0x3c11a9=_0x831beb;let _0x1c4b74;if(_0xd8b03c==='BTC'||_0xd8b03c===_0x3c11a9(0x1f1)||_0xd8b03c==='PAXG')_0x1c4b74=_0x496023===_0x3c11a9(0x21a)?_0x23c75b['eur']:_0x23c75b[_0x3c11a9(0x225)];else{if(usdBasecoins[_0x3c11a9(0x2a7)](_0xd8b03c))_0x1c4b74=_0x496023==='EUR'?_0x23c75b[_0x3c11a9(0x1f5)]/_0x23c75b[_0x3c11a9(0x225)]:0x1;else _0xd8b03c==='EUR'&&(_0x1c4b74=_0x496023==='EUR'?0x1:_0x23c75b[_0x3c11a9(0x225)]/_0x23c75b['eur']);}return _0x1c4b74;}function getKPIs(_0x455a69,_0xa83572='EUR'){const _0x3cf6d7=_0x831beb,_0x52d596=config[_0x3cf6d7(0x1c1)],_0x90d7d2=lastBalances,_0xde137f=currentCoins,_0x188df7=getNormalizedPerformance(),_0x3b5840=CurrencyFactor(_0x90d7d2,config['basecoin'],_0xa83572);let _0x46b2c8=0x0;_0xde137f['forEach'](_0x48c965=>{const _0x560bd2=_0x3cf6d7;_0x46b2c8+=_0x48c965[_0x560bd2(0x291)]*_0x48c965[_0x560bd2(0x2b1)];});_0x455a69[_0x3cf6d7(0x2a7)](_0x3cf6d7(0x1ee))&&(_0x46b2c8*=_0x3b5840);let _0x3739b3;if(_0x46b2c8!==0x0){if(_0x455a69==='basecoin'||_0x455a69===_0x3cf6d7(0x1ee)){if(_0x455a69==='basecoin')_0x3739b3=(_0x46b2c8/startingBalances[_0x3cf6d7(0x1c1)]-0x1)*0x64;else{if(_0xa83572===_0x3cf6d7(0x21a))_0x3739b3=(_0x46b2c8/startingBalances[_0x3cf6d7(0x1f5)]-0x1)*0x64;else _0x3739b3=(_0x46b2c8/startingBalances['usd']-0x1)*0x64;}}if(_0x455a69[_0x3cf6d7(0x2a7)](_0x3cf6d7(0x201))){let _0x3bc03a=0x0;if(startingBalances[_0x3cf6d7(0x17a)])_0xde137f[_0x3cf6d7(0x1e6)](_0x32d4ed=>{const _0x398f39=_0x3cf6d7;let _0xdddffd=startingBalances[_0x398f39(0x17a)][_0x398f39(0x2ae)](_0x37f68c=>_0x37f68c['coin']===_0x32d4ed[_0x398f39(0x221)]);if(_0xdddffd&&_0xdddffd['coin']&&_0x32d4ed[_0x398f39(0x291)]!==0x0)_0x3bc03a+=_0xdddffd[_0x398f39(0x291)]*_0x32d4ed[_0x398f39(0x2b1)];});let _0x497ee6=0x0;if(_0x188df7[_0x3cf6d7(0x174)]!==0x0){let _0x24bcb5=_0x188df7[_0x188df7[_0x3cf6d7(0x174)]-0x1];_0x497ee6=_0x24bcb5[_0x3cf6d7(0x1d6)];}_0x3bc03a-=_0x497ee6;let _0x4d8ae0;_0x455a69==='net-basecoin'&&(_0x4d8ae0=startingBalances[_0x3cf6d7(0x1c1)]),_0x455a69===_0x3cf6d7(0x345)&&(_0x4d8ae0=_0xa83572==='EUR'?startingBalances[_0x3cf6d7(0x1f5)]:startingBalances['usd'],_0x3bc03a*=_0x3b5840),_0x3739b3=(_0x46b2c8-_0x3bc03a)/_0x4d8ae0*0x64,_0x46b2c8=_0x46b2c8-_0x3bc03a;}if(_0x455a69[_0x3cf6d7(0x2a7)](_0x3cf6d7(0x1c5))){if(_0x188df7[_0x3cf6d7(0x174)]!==0x0&&_0xde137f['length']!==0x0){let _0x29ad69,_0x3e08af=_0x188df7[_0x188df7[_0x3cf6d7(0x174)]-0x1][_0x3cf6d7(0x1c5)];_0x455a69[_0x3cf6d7(0x2a7)]('fiat')?(_0x29ad69=_0xa83572===_0x3cf6d7(0x21a)?startingBalances[_0x3cf6d7(0x1f5)]:startingBalances[_0x3cf6d7(0x225)],_0x3e08af*=CurrencyFactor(_0x90d7d2,_0x52d596,_0xa83572)):_0x29ad69=startingBalances['basecoin'],_0x3739b3=_0x3e08af/_0x29ad69*0x64,_0x46b2c8=_0x3e08af;}}if(_0x3739b3){if(_0x3739b3<0x64)_0x3739b3=_0x3739b3[_0x3cf6d7(0x273)](0x2);else{if(_0x3739b3<0x3e8)_0x3739b3=_0x3739b3[_0x3cf6d7(0x273)](0x1);else _0x3739b3=_0x3739b3[_0x3cf6d7(0x273)](0x0);}}else _0x3739b3=Number('0')[_0x3cf6d7(0x273)](0x2);if(_0x46b2c8){if(Math[_0x3cf6d7(0x315)](_0x46b2c8)<0.000001)_0x46b2c8=_0x46b2c8['toFixed'](0x2);else{if(Math['abs'](_0x46b2c8)<0.1)_0x46b2c8=_0x46b2c8[_0x3cf6d7(0x273)](0x6);else{if(Math[_0x3cf6d7(0x315)](_0x46b2c8)<0x1)_0x46b2c8=_0x46b2c8[_0x3cf6d7(0x273)](0x5);else{if(Math['abs'](_0x46b2c8)<0xa)_0x46b2c8=_0x46b2c8[_0x3cf6d7(0x273)](0x4);else{if(Math[_0x3cf6d7(0x315)](_0x46b2c8)<0x64)_0x46b2c8=_0x46b2c8['toFixed'](0x3);else{if(Math[_0x3cf6d7(0x315)](_0x46b2c8)<0x3e8)_0x46b2c8=_0x46b2c8['toFixed'](0x2);else _0x46b2c8=_0x46b2c8[_0x3cf6d7(0x273)](0x2);}}}}}}else _0x46b2c8=Number('0')[_0x3cf6d7(0x273)](0x2);}else _0x3739b3=Number('0')[_0x3cf6d7(0x273)](0x2);if(_0x3739b3>=0x0)_0x3739b3='+'+_0x3739b3;return{'value':_0x46b2c8,'change':_0x3739b3};}async function getStartingBalances(_0x23c96e,_0x1c1ffa=!![]){const _0x188571=_0x831beb;if(_0x23c96e[_0x188571(0x174)]!==0x0){const [_0x1ff8a3,_0x37dd38,_0x416ca6]=getPerf(_0x23c96e[0x0],!![]);let _0x3e556c=[];config[_0x188571(0x2f2)][_0x188571(0x1e6)](_0x4e6afa=>{const _0x4d74dc=_0x188571;let _0x29d6da=0x0,_0x1d64ee;config[_0x4d74dc(0x335)][_0x4d74dc(0x1e6)](_0xae0830=>{const _0x5379d9=_0x4d74dc;let _0x58c1e3=_0xae0830['changes'][_0x5379d9(0x2ae)](_0x8d1fb=>_0x8d1fb['coin']==_0x4e6afa[_0x5379d9(0x221)]);if(_0x58c1e3){_0x29d6da+=_0x58c1e3[_0x5379d9(0x291)];if(!_0x1d64ee)_0x1d64ee=_0x58c1e3[_0x5379d9(0x311)];}}),_0x3e556c['push']({'coin':_0x4e6afa[_0x4d74dc(0x221)],'number':_0x29d6da,'initialprice':_0x1d64ee});});const _0x20d9a8={'basecoin':_0x1ff8a3,'eur':_0x37dd38,'usd':_0x416ca6,'coins':_0x3e556c};if(_0x1c1ffa)proxyEmit(_0x188571(0x22f),_0x20d9a8);startingBalances=_0x20d9a8;}}function headlessMode(_0x2ef0fd){const _0x5bb9c6=_0x831beb;let _0x172869=_0x2ef0fd[_0x5bb9c6(0x2f2)],_0x2f7ee0=_0x2ef0fd['threshold'],_0x18711e=[];for(let _0x5828d8 of _0x172869){if(_0x5828d8['coin']!=config[_0x5bb9c6(0x1c1)]){if(_0x5828d8['delta']>=_0x2f7ee0/0x64){if(_0x5828d8['valid'])_0x18711e[_0x5bb9c6(0x195)](_0x5828d8);}else{if(_0x5828d8[_0x5bb9c6(0x1a5)]<=-_0x2f7ee0/0x64){if(_0x5828d8[_0x5bb9c6(0x230)])_0x18711e[_0x5bb9c6(0x195)](_0x5828d8);}}}}_0x18711e[_0x5bb9c6(0x174)]>0x0&&placeOrder(_0x18711e);}function notifyBalance(_0x55019d){const _0x41e729=_0x831beb;let _0x24f209=_0x55019d[_0x41e729(0x2f2)],_0xb6d212=_0x55019d[_0x41e729(0x28e)],_0x17d2f0=[];for(let _0x3cdc29 of _0x24f209){if(_0x3cdc29['coin']!=config[_0x41e729(0x1c1)]){if(_0x3cdc29[_0x41e729(0x1a5)]>=_0xb6d212/0x64){if(_0x3cdc29[_0x41e729(0x230)])_0x17d2f0[_0x41e729(0x195)](_0x3cdc29);}else{if(_0x3cdc29[_0x41e729(0x1a5)]<=-_0xb6d212/0x64){if(_0x3cdc29[_0x41e729(0x230)])_0x17d2f0[_0x41e729(0x195)](_0x3cdc29);}}}}if(_0x17d2f0[_0x41e729(0x174)]>0x0){let _0x16b712=_0x17d2f0[_0x41e729(0x22a)](_0x19d52d=>_0x19d52d[_0x41e729(0x221)]);_0x16b712[_0x41e729(0x20b)]();let _0x3f0c12=_0x16b712[_0x41e729(0x1f7)](',\x20');if(!lastCoinsToBalance)logHistory('warning',_0x41e729(0x2f7));lastCoinsToBalance=_0x3f0c12;}}function symbolToCoin(_0x319c44){const _0x567e96=_0x831beb;let _0x25c30c;if(_0x319c44[_0x567e96(0x2a7)]('/'+config[_0x567e96(0x1c1)]))_0x25c30c=_0x319c44[_0x567e96(0x188)]('/'+config['basecoin'],'');if(_0x319c44[_0x567e96(0x2a7)](config[_0x567e96(0x1c1)]+'/'))_0x25c30c=_0x319c44['replace'](config[_0x567e96(0x1c1)]+'/','');return _0x25c30c;}function setLockOrders(_0x4ff15e){const _0x1c2324=_0x831beb;lockOrders=_0x4ff15e,logger[_0x1c2324(0x1ab)](_0x1c2324(0x2cc)+Object[_0x1c2324(0x2f3)](ORDERS)[lockOrders]);}async function unlockOrders(_0x239a58=![]){const _0x4b7ad5=_0x831beb;if(allOrdersPlaced&&lockOrders==ORDERS[_0x4b7ad5(0x191)]){setLockOrders(ORDERS[_0x4b7ad5(0x323)]);if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);if(_0x239a58){const _0x614342=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x614342,setBlockTransactionDetection(![]);}validateOrdersState=_0x4b7ad5(0x1f0),persistOpenOrders([]),setLockOrders(ORDERS['UNLOCKED']);}}async function validateOrders(_0x186f76){const _0x784db=_0x831beb;if(_0x186f76)validateOrdersState=_0x186f76;logger[_0x784db(0x1ab)](_0x784db(0x2f1)+validateOrdersState+_0x784db(0x215)+Object[_0x784db(0x2f3)](ORDERS)[lockOrders]);let _0x32b772=[],_0x3adf2e=config['ordertype']==_0x784db(0x252)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x784db(0x2c1)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x784db(0x191)])return;logger[_0x784db(0x1ab)](_0x784db(0x203)+validateOrdersState);for(let _0x4862f8=lastOrders[_0x784db(0x174)]-0x1;_0x4862f8>=0x0;_0x4862f8--){let _0x304856=lastOrders[_0x4862f8],_0x3b20ee=![];_0x304856[_0x784db(0x242)]>0x0&&(_0x3b20ee=!![]),_0x32b772[_0x784db(0x195)](_0x3b20ee),_0x3b20ee&&config['ordertype']!=_0x784db(0x252)&&logHistory('order','Order\x20filled:\x20'+_0x304856['symbol']+'\x20'+_0x304856[_0x784db(0x2ea)]+'\x20#'+formatResult(_0x304856['filled'],0x8)+'\x20@'+formatResult(_0x304856[_0x784db(0x311)],0x8)),_0x3b20ee&&lastOrders['splice'](_0x4862f8,0x1);}persistOpenOrders(lastOrders);const _0x2c664f=coolingDown?_0x784db(0x2b8):_0x784db(0x2dd);if(validateOrdersState==_0x784db(0x1f0)){validateOrdersState='ongoing';if(_0x32b772[_0x784db(0x2a7)](![])){}else await unlockOrders();}else{if(validateOrdersState==_0x784db(0x223)){if(_0x32b772[_0x784db(0x2a7)](![])){}else await unlockOrders();}else{if(validateOrdersState=='final'){let _0x2f7fc3=!![];if(_0x32b772[_0x784db(0x2a7)](![])){if(config[_0x784db(0x17e)]==_0x784db(0x252))logHistory(_0x784db(0x265),_0x784db(0x2fb)+Math[_0x784db(0x2e6)](_0x3adf2e*validateOrderInterval/0xea60)+_0x784db(0x1a9)+_0x2c664f),await unlockOrders(!![]);else{_0x2f7fc3=await cancelOrders();if(_0x2f7fc3)logHistory(_0x784db(0x265),_0x784db(0x19d)+Math[_0x784db(0x2e6)](_0x3adf2e*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x2c664f),await unlockOrders(!![]);else{validateOrdersState=_0x784db(0x223),logHistory('error',_0x784db(0x200)+Math[_0x784db(0x2e6)](_0x3adf2e*validateOrderInterval/0xea60)+_0x784db(0x1a9)+_0x2c664f),logHistory('error','Will\x20continue\x20to\x20wait\x20for\x20order(s)\x20to\x20be\x20filled\x20and\x20try\x20to\x20cancel\x20again\x20later');const _0x4331fe=config[_0x784db(0x17e)]==_0x784db(0x252)?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x4d82fe=_0x784db;validateOrders(_0x4d82fe(0x1c8));},_0x4331fe);}}}else await unlockOrders(!![]);}else{if(validateOrdersState==_0x784db(0x2a1)){if(config['ordertype']!=_0x784db(0x252))logHistory(_0x784db(0x265),_0x784db(0x285)+_0x2c664f);await unlockOrders(!![]);}}}}}async function cancelOrders(){const _0xb566d6=_0x831beb;let _0x490338=!![],_0x52b0af;for(const _0x20eefd of lastOrders){let _0xff7d66=![],_0xd5c0fb=0x0;while(!_0xff7d66&&_0xd5c0fb<maxRetries){try{const _0x4be241=await exchange[_0xb566d6(0x22c)](_0x20eefd['orderId'],_0x20eefd['symbol']);_0xff7d66=!![];}catch(_0x385d13){_0x385d13[_0xb566d6(0x2bf)]()[_0xb566d6(0x2a7)](_0xb566d6(0x260))||_0x385d13['toString']()['includes'](_0xb566d6(0x220))?_0xff7d66=!![]:(_0x52b0af=_0x385d13,_0xff7d66=![]);}!_0xff7d66&&(_0xd5c0fb++,await sleep(retryInterval));}_0x490338=_0x490338&&_0xff7d66;}return!_0x490338&&await handleError(_0x52b0af,_0xb566d6(0x1d7)),_0x490338;}async function initCoinResults(_0x59cde4){const _0x3a3cbf=_0x831beb;_0x59cde4?logger[_0x3a3cbf(0x1ab)](_0x3a3cbf(0x305)+_0x59cde4):logger[_0x3a3cbf(0x1ab)](_0x3a3cbf(0x312)),config['portfolio'][_0x3a3cbf(0x1e6)](_0x3c0c0a=>{const _0x37cf77=_0x3a3cbf;if(!_0x3c0c0a['excluded']&&_0x3c0c0a[_0x37cf77(0x221)]!=config[_0x37cf77(0x1c1)]){const _0x3beb7a=currentCoins[_0x37cf77(0x2ae)](_0x464427=>_0x464427['coin']==_0x3c0c0a[_0x37cf77(0x221)]),_0x3a91f0=gTicker[noslash(_0x3c0c0a['symbol'])];let _0x472bf1=_0x3beb7a?_0x3beb7a[_0x37cf77(0x291)]:null,_0x4f51b2=_0x3c0c0a['reverse']?0x1/_0x3a91f0:_0x3a91f0,_0x3c6992;config[_0x37cf77(0x335)]['forEach'](_0xed9024=>{const _0x4a9110=_0x37cf77;!_0x3c6992&&(_0x3c6992=_0xed9024[_0x4a9110(0x2bb)][_0x4a9110(0x2ae)](_0x4cc6d4=>_0x4cc6d4[_0x4a9110(0x221)]==_0x3c0c0a[_0x4a9110(0x221)]),_0x3c6992&&(_0x472bf1=_0x3c6992['number'],_0x4f51b2=_0x3c6992[_0x4a9110(0x311)]));});let _0x5889e8=dbCoinResults[_0x37cf77(0x1a4)](_0x37cf77(0x17a))[_0x37cf77(0x2ae)]({'coin':_0x3c0c0a[_0x37cf77(0x221)]})[_0x37cf77(0x1d2)]();if(!_0x5889e8){const _0x209c9c={'coin':_0x3c0c0a[_0x37cf77(0x221)],'number':_0x472bf1,'breakeven':_0x4f51b2,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x37cf77(0x1a4)](_0x37cf77(0x17a))[_0x37cf77(0x195)](_0x209c9c)[_0x37cf77(0x2d6)]();}else{if(_0x59cde4&&_0x3c0c0a[_0x37cf77(0x221)]==_0x59cde4){const _0x105b42={'coin':_0x3c0c0a[_0x37cf77(0x221)],'number':_0x472bf1,'breakeven':_0x4f51b2,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x37cf77(0x1a4)]('coins')[_0x37cf77(0x2ae)]({'coin':_0x3c0c0a[_0x37cf77(0x221)]})[_0x37cf77(0x329)](_0x105b42)[_0x37cf77(0x2d6)]();}}}});}async function placeOrder(_0x1914b3){const _0x231b81=_0x831beb,_0x804b3d=config['ordertype']==_0x231b81(0x252)?'market':_0x231b81(0x23f);if(lockOrders==ORDERS[_0x231b81(0x297)]&&!coolingDown){setLockOrders(ORDERS[_0x231b81(0x191)]);while(transactionDetectionOngoing){await sleep(0x64);}logger[_0x231b81(0x1ab)]('Placing\x20order\x20for:\x20'+_0x1914b3[_0x231b81(0x22a)](_0x13525c=>_0x13525c[_0x231b81(0x221)])[_0x231b81(0x1f7)](',\x20')),lastCoinsToBalance='',allOrdersPlaced=![],validateOrdersState=_0x231b81(0x1f0);let _0x346809=![];lastOrders=[];const _0xe58bf8=config['threshold'];for(const _0x45cf5d of _0x1914b3){let _0x48a27d,_0x421b93,_0x214da2,_0x3bf8a5,_0x2e11bb,_0x3a4684=_0x45cf5d[_0x231b81(0x319)];logger[_0x231b81(0x1ab)](_0x231b81(0x179)+_0x45cf5d['coin']+'\x20'+_0x45cf5d[_0x231b81(0x291)]+'\x20'+_0x45cf5d['last']+'\x20'+_0x45cf5d[_0x231b81(0x1bc)]+'%\x20'+_0x45cf5d[_0x231b81(0x175)]+'%\x20'+(0x64*_0x45cf5d[_0x231b81(0x1a5)])[_0x231b81(0x273)](0x2)+_0x231b81(0x2fd)+_0xe58bf8[_0x231b81(0x273)](0x2)+'%)'),insufficientFundsWarningSent=insufficientFundsWarningSent[_0x231b81(0x1d9)](_0x2f0a43=>_0x2f0a43!==_0x45cf5d[_0x231b81(0x221)]);const _0x38ba17=currentCoins[_0x231b81(0x2ae)](_0x354f4e=>_0x354f4e[_0x231b81(0x221)]==_0x45cf5d[_0x231b81(0x221)]);_0x38ba17&&(_0x38ba17['prevnumber']=_0x45cf5d['number']);try{const _0x3728dc=await exchange[_0x231b81(0x1bd)](_0x3a4684);_0x48a27d=_0x45cf5d[_0x231b81(0x30f)]?0x1/_0x45cf5d[_0x231b81(0x2b1)]:_0x45cf5d[_0x231b81(0x2b1)],_0x421b93=_0x3728dc[_0x231b81(0x346)],_0x214da2=_0x3728dc[_0x231b81(0x2c4)];_0x45cf5d[_0x231b81(0x30f)]?(_0x3bf8a5=_0x45cf5d[_0x231b81(0x2ea)]==_0x231b81(0x339)?'sell':_0x231b81(0x339),_0x2e11bb=Math[_0x231b81(0x315)](_0x45cf5d[_0x231b81(0x25a)])/_0x48a27d):(_0x3bf8a5=_0x45cf5d[_0x231b81(0x2ea)],_0x2e11bb=Math[_0x231b81(0x315)](_0x45cf5d[_0x231b81(0x25a)]));_0x804b3d==_0x231b81(0x23f)&&(config[_0x231b81(0x17e)]=='limit-high'&&(_0x48a27d=_0x3bf8a5==_0x231b81(0x339)?_0x421b93:_0x214da2),config[_0x231b81(0x17e)]==_0x231b81(0x2b2)&&(_0x48a27d=_0x3bf8a5==_0x231b81(0x339)?_0x214da2:_0x421b93));_0x2e11bb=formatResult(_0x2e11bb,0x8),_0x48a27d=formatResult(_0x48a27d,0x8);const _0x1bdd50=_0x3bf8a5==_0x231b81(0x2cb)?config[_0x231b81(0x313)]?String[_0x231b81(0x19e)]('0x'+config[_0x231b81(0x313)])+'\x20':'':config[_0x231b81(0x23e)]?String[_0x231b81(0x19e)]('0x'+config[_0x231b81(0x23e)])+'\x20':'',_0x51a231=_0x804b3d==_0x231b81(0x252)?'Market':config[_0x231b81(0x17e)]=='limit-high'?'Limit\x20(high-margin)':'Limit\x20(low-margin)',_0x52e1f1=(Math['floor'](Math['random']()*0x35a4e900)+0x5f5e100)[_0x231b81(0x2bf)]();lastOrders['push']({'customId':_0x52e1f1,'symbol':_0x3a4684,'coin':_0x45cf5d[_0x231b81(0x221)],'amount':_0x2e11bb,'price':_0x48a27d,'side':_0x3bf8a5,'reverse':_0x45cf5d[_0x231b81(0x30f)],'filled':0x0});let _0x49135e;_0x804b3d=='market'?_0x3bf8a5==_0x231b81(0x339)&&[_0x231b81(0x1fc),_0x231b81(0x341),'Cex',_0x231b81(0x1bb),_0x231b81(0x2ce),'Huobipro']['includes'](config['exchange'])?_0x49135e=await exchange[_0x231b81(0x1af)](_0x3a4684,_0x804b3d,_0x3bf8a5,_0x2e11bb,_0x48a27d):_0x49135e=await exchange['createOrder'](_0x3a4684,_0x804b3d,_0x3bf8a5,_0x2e11bb,undefined):_0x49135e=await exchange[_0x231b81(0x1af)](_0x3a4684,_0x804b3d,_0x3bf8a5,_0x2e11bb,_0x48a27d);const _0x4f2316=lastOrders['length']-0x1;if(_0x4f2316>=0x0&&lastOrders[_0x4f2316][_0x231b81(0x275)]==_0x52e1f1){lastOrders[_0x4f2316]['orderId']=_0x49135e['id'];if(_0x49135e[_0x231b81(0x2ac)])lastOrders[_0x4f2316][_0x231b81(0x2ac)]=_0x49135e[_0x231b81(0x2ac)];if(_0x49135e['price'])lastOrders[_0x4f2316][_0x231b81(0x311)]=_0x49135e[_0x231b81(0x311)];lastOrders[_0x4f2316][_0x231b81(0x18b)]=_0x49135e['fee'];}if(_0x49135e[_0x231b81(0x2ac)])_0x2e11bb=_0x49135e[_0x231b81(0x2ac)];if(_0x49135e[_0x231b81(0x311)])_0x48a27d=_0x49135e[_0x231b81(0x311)];if(_0x804b3d==_0x231b81(0x252))logHistory(_0x231b81(0x256),''+_0x1bdd50+_0x51a231+_0x231b81(0x26d)+_0x3a4684+'\x20'+_0x3bf8a5+'\x20#'+formatResult(_0x2e11bb,0x8)+'\x20@'+formatResult(_0x48a27d,0x8));else logHistory('order',''+_0x1bdd50+_0x51a231+_0x231b81(0x26d)+_0x3a4684+'\x20'+_0x3bf8a5+'\x20#'+formatResult(_0x2e11bb,0x8)+'\x20@'+formatResult(_0x48a27d,0x8));logger[_0x231b81(0x1ab)](_0x231b81(0x257)+_0x49135e['id']+'\x20|\x20Custom\x20ID:\x20'+_0x52e1f1);if(config[_0x231b81(0x26f)]!=0x0){let _0x221e0c=null;if(cooldownTracker[_0x231b81(0x174)]==config[_0x231b81(0x26f)]-0x1)_0x221e0c=cooldownTracker['shift']();const _0x59f6ea=getTimeStamp();cooldownTracker[_0x231b81(0x195)](_0x59f6ea);if(_0x221e0c){const _0x573d36=fns['differenceInSeconds'](new Date(_0x59f6ea),new Date(_0x221e0c));if(_0x573d36<cooldownInterval){logHistory('error',_0x231b81(0x1d5)+config[_0x231b81(0x26f)]+_0x231b81(0x2b4)+cooldownInterval/0x3c+'\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20'+cooldownPeriod/(0xe10*0x3e8)+_0x231b81(0x1f3)),coolingDown=!![];break;}}}}catch(_0x142820){if(_0x142820[_0x231b81(0x2bf)]()[_0x231b81(0x2a7)](_0x231b81(0x287)))lastOrders=lastOrders[_0x231b81(0x1d9)](_0x287790=>_0x287790[_0x231b81(0x319)]!=_0x3a4684),logHistory('error','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x3a4684),_0x346809=!![];else{if(_0x142820['toString']()[_0x231b81(0x2a7)](_0x231b81(0x29e)))lastOrders=lastOrders[_0x231b81(0x1d9)](_0x17c854=>_0x17c854[_0x231b81(0x319)]!=_0x3a4684),logHistory('error',_0x231b81(0x344)+_0x3a4684),_0x346809=!![];else{if(_0x142820['toString']()['includes']('InvalidOrder'))lastOrders=lastOrders[_0x231b81(0x1d9)](_0x5d9cb1=>_0x5d9cb1[_0x231b81(0x319)]!=_0x3a4684),logHistory(_0x231b81(0x226),_0x231b81(0x206)+_0x3a4684),logger[_0x231b81(0x1ab)](_0x142820),_0x346809=!![];else _0x142820[_0x231b81(0x2bf)]()[_0x231b81(0x2a7)](_0x231b81(0x2f9))?(lastOrders=lastOrders[_0x231b81(0x1d9)](_0x3318c0=>_0x3318c0[_0x231b81(0x319)]!=_0x3a4684),logHistory(_0x231b81(0x226),_0x231b81(0x2ed)+_0x3a4684),_0x346809=!![]):(lastOrders=lastOrders[_0x231b81(0x1d9)](_0x4d13b0=>_0x4d13b0[_0x231b81(0x319)]!=_0x3a4684),await handleError(_0x142820,'placeOrder()',_0x3a4684));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x231b81(0x174)]>0x0){const _0x4b55dd=config['ordertype']==_0x231b81(0x252)?validateOrderTimeout*0x3c*0x3e8:config[_0x231b81(0x2c1)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x4b55dd);}else unlockOrders();_0x346809&&config[_0x231b81(0x1e0)]&&(logHistory(_0x231b81(0x226),'Avoiding\x20continuous\x20order\x20attempts'+pauseBotMsg),await pauseBot(pauseBotInterval)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x231b81(0x265),_0x231b81(0x17b)));}else{if(coolingDown)!config['headless']&&logHistory(_0x231b81(0x226),_0x231b81(0x321));else lockOrders!=ORDERS['UNLOCKED']&&(!config[_0x231b81(0x1e0)]&&(config[_0x231b81(0x17e)]==_0x231b81(0x252)?logHistory('error',_0x231b81(0x300)):logHistory(_0x231b81(0x226),_0x231b81(0x264))));}}function persistOpenOrders(_0x25aef5){const _0x38b505=_0x831beb,_0x29d6bd={...config,'openOrders':_0x25aef5};let _0x557d71=dbConfig[_0x38b505(0x1a4)](_0x38b505(0x1b2))['find']({'botID':botID})[_0x38b505(0x1d2)]();_0x557d71&&dbConfig[_0x38b505(0x1a4)](_0x38b505(0x1b2))[_0x38b505(0x2ae)]({'botID':botID})['assign'](_0x29d6bd)['write']();}function restoreOrders(){const _0x160af3=_0x831beb;let _0x44b08b;config[_0x160af3(0x2c5)]&&allOpenOrders[_0x160af3(0x1e6)](_0x40c7c3=>{const _0x5cbdfb=_0x160af3,_0x40a67b=config['openOrders'][_0x5cbdfb(0x2ae)](_0x9d4ce4=>_0x9d4ce4['orderId']==_0x40c7c3['id']);_0x40a67b&&(lastOrders[_0x5cbdfb(0x195)](_0x40a67b),_0x44b08b=_0x40c7c3[_0x5cbdfb(0x2a3)]);});if(lastOrders[_0x160af3(0x174)]>0x0){setLockOrders(ORDERS[_0x160af3(0x191)]),validateOrdersState=_0x160af3(0x223),allOrdersPlaced=!![];const _0x54c13e=new Date()['getTime'](),_0x52111d=config[_0x160af3(0x17e)]==_0x160af3(0x252)?validateOrderTimeout*0x3c*0x3e8:config[_0x160af3(0x2c1)]*0x3c*0x3e8;if(_0x44b08b+_0x52111d>_0x54c13e){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0xe3fd1a=_0x160af3;validateOrders(_0xe3fd1a(0x1c8));},_0x44b08b+_0x52111d-_0x54c13e);}else validateOrders(_0x160af3(0x1c8));}}async function sendMetricsTelegram(){const _0x60e1b8=_0x831beb;if(!coinsLoaded){process[_0x60e1b8(0x314)]({'telegrammsg':_0x60e1b8(0x331)},_0x3f063c=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0xf16657='';if(config[_0x60e1b8(0x2d3)])_0xf16657=_0x60e1b8(0x28a)+config[_0x60e1b8(0x29b)]+'\x20metrics:</b>\x20\x0a\x0a';else _0xf16657=_0x60e1b8(0x1e2)+botID+_0x60e1b8(0x1a8);const _0x1531ba=config[_0x60e1b8(0x1c1)],_0x2d484f=config['fiat'],_0x25f7fa=getKPIs(_0x60e1b8(0x1c1)),_0x14eff9=getKPIs(_0x60e1b8(0x1ee),_0x2d484f),_0x18af24=getKPIs(_0x60e1b8(0x204)),_0x571c70=getKPIs(_0x60e1b8(0x345),_0x2d484f),_0x24ec0a=getKPIs('pnl-basecoin'),_0x1e64e5=getKPIs(_0x60e1b8(0x1c6),_0x2d484f);_0x1531ba[_0x60e1b8(0x2a7)](_0x2d484f)?(_0xf16657+=_0x60e1b8(0x2cf),_0xf16657+=_0x60e1b8(0x301)+_0x1531ba+':\x20'+_0x25f7fa[_0x60e1b8(0x1d2)]+'\x20('+_0x25f7fa[_0x60e1b8(0x1a7)]+_0x60e1b8(0x222),_0xf16657+=_0x60e1b8(0x28f)+_0x1531ba+':\x20'+_0x18af24[_0x60e1b8(0x1d2)]+'\x20('+_0x18af24[_0x60e1b8(0x1a7)]+_0x60e1b8(0x222),_0xf16657+=_0x60e1b8(0x2c8)+_0x1531ba+':\x20'+_0x24ec0a[_0x60e1b8(0x1d2)]+'\x20('+_0x24ec0a[_0x60e1b8(0x1a7)]+_0x60e1b8(0x222),_0xf16657+=_0x60e1b8(0x236)):(_0xf16657+=_0x60e1b8(0x2cf),_0xf16657+=_0x60e1b8(0x301)+_0x1531ba+':\x20'+_0x25f7fa['value']+'\x20('+_0x25f7fa['change']+_0x60e1b8(0x222),_0xf16657+=_0x60e1b8(0x301)+_0x2d484f+':\x20'+_0x14eff9[_0x60e1b8(0x1d2)]+'\x20('+_0x14eff9[_0x60e1b8(0x1a7)]+_0x60e1b8(0x222),_0xf16657+='Net\x20'+_0x1531ba+':\x20'+_0x18af24[_0x60e1b8(0x1d2)]+'\x20('+_0x18af24[_0x60e1b8(0x1a7)]+'%)\x0a',_0xf16657+=_0x60e1b8(0x28f)+_0x2d484f+':\x20'+_0x571c70[_0x60e1b8(0x1d2)]+'\x20('+_0x571c70[_0x60e1b8(0x1a7)]+_0x60e1b8(0x222),_0xf16657+=_0x60e1b8(0x2c8)+_0x1531ba+':\x20'+_0x24ec0a['value']+'\x20('+_0x24ec0a[_0x60e1b8(0x1a7)]+'%)\x0a',_0xf16657+='PnL\x20'+_0x2d484f+':\x20'+_0x1e64e5['value']+'\x20('+_0x1e64e5['change']+_0x60e1b8(0x222),_0xf16657+=_0x60e1b8(0x236)),process[_0x60e1b8(0x314)]({'telegrammsg':_0xf16657},_0x5cf6df=>{});}async function sendPortfolioTelegram(){const _0x2499c9=_0x831beb;if(!coinsLoaded||!currentCoins[0x0]['distribution']){process['send']({'telegrammsg':_0x2499c9(0x331)},_0x3d212e=>{});return;}let _0x34a5f8='';if(config[_0x2499c9(0x2d3)])_0x34a5f8='<b>'+config[_0x2499c9(0x29b)]+'\x20portfolio:</b>\x20\x0a\x0a';else _0x34a5f8=_0x2499c9(0x1e2)+botID+_0x2499c9(0x20f);_0x34a5f8+=_0x2499c9(0x2cf),_0x34a5f8+='-------------------------------\x0a',_0x34a5f8+=_0x2499c9(0x233),_0x34a5f8+=_0x2499c9(0x20d),currentCoins['forEach'](_0x40d694=>{const _0x3a75bd=_0x2499c9;_0x34a5f8+=_0x40d694[_0x3a75bd(0x221)][_0x3a75bd(0x2be)](0x7)+'|\x20'+formatPad(_0x40d694[_0x3a75bd(0x1bc)],0x2,0x6)+'|\x20'+formatPad(_0x40d694['target'],0x2,0x6)+'|\x20'+(_0x40d694['target']==0x0?''['padStart'](0x6):formatPad(_0x40d694[_0x3a75bd(0x1a5)]*0x64,0x2,0x6))+'\x0a';}),_0x34a5f8+=_0x2499c9(0x236),process[_0x2499c9(0x314)]({'telegrammsg':_0x34a5f8},_0x1699af=>{});}function formatPad(_0x20d1cd,_0x45136c,_0x14d266){const _0x701eeb=_0x831beb,_0x2b1542=formatResultString(_0x20d1cd,_0x45136c);return _0x2b1542?_0x2b1542[_0x701eeb(0x1e7)](_0x14d266):''[_0x701eeb(0x1e7)](_0x14d266);}function logHistory(_0x38ef31,_0x547957,_0x31107b=''){const _0x1968f9=_0x831beb;logger[_0x1968f9(0x247)](''+_0x547957);let _0x2676af={'time':getTimeStamp(),'type':_0x38ef31,'event':_0x547957};dbLogs[_0x1968f9(0x1a4)]('logs')[_0x1968f9(0x195)](_0x2676af)[_0x1968f9(0x2d6)]();if(_0x31107b=='')_0x31107b=_0x547957;proxyEmit(_0x1968f9(0x2bc),{'log':_0x2676af,'summary':_0x31107b}),process[_0x1968f9(0x314)]({'telegram':{..._0x2676af,'botname':config[_0x1968f9(0x29b)],'showname':config[_0x1968f9(0x2d3)]}},_0x1c064e=>{});}function emitHistory(_0xf0cef7={}){const _0x74a374=_0x831beb;Object[_0x74a374(0x2f3)](_0xf0cef7)[_0x74a374(0x174)]==0x0&&(_0xf0cef7={'type':[_0x74a374(0x256),_0x74a374(0x2bc)],'event':'','page':0x1});if(_0xf0cef7[_0x74a374(0x248)]['includes']('event'))_0xf0cef7[_0x74a374(0x248)][_0x74a374(0x342)](_0xf0cef7[_0x74a374(0x248)][_0x74a374(0x328)](_0x74a374(0x2bc)),0x1,_0x74a374(0x226),_0x74a374(0x278),_0x74a374(0x265));if(dbLogs['has']('logs')[_0x74a374(0x1d2)]()){let _0x5c927b=dbLogs[_0x74a374(0x1a4)](_0x74a374(0x1a1))[_0x74a374(0x1d9)](_0x59dcde=>{const _0x19863c=_0x74a374;if(_0xf0cef7[_0x19863c(0x248)][_0x19863c(0x174)]==0x0)return![];else return _0xf0cef7[_0x19863c(0x248)][_0x19863c(0x2a7)](_0x59dcde[_0x19863c(0x248)]);})['filter'](_0x10ba4e=>{const _0x4a2cc7=_0x74a374;if(_0xf0cef7[_0x4a2cc7(0x2bc)]=='')return!![];else return _0x10ba4e[_0x4a2cc7(0x2bc)][_0x4a2cc7(0x2a4)]()[_0x4a2cc7(0x2a7)](_0xf0cef7[_0x4a2cc7(0x2bc)][_0x4a2cc7(0x2a4)]());})['sortBy'](_0x74a374(0x29c)),_0x5dc051=_0x5c927b[_0x74a374(0x1d2)]()[_0x74a374(0x174)];_0x5c927b=_0x5c927b[_0x74a374(0x30f)]()[_0x74a374(0x267)]((_0xf0cef7[_0x74a374(0x29f)]-0x1)*logPageSize,_0xf0cef7[_0x74a374(0x29f)]*logPageSize-0x1)[_0x74a374(0x30f)]()[_0x74a374(0x1d2)](),proxyEmit(_0x74a374(0x2fe),{'logs':_0x5c927b,'total':_0x5dc051});}else proxyEmit(_0x74a374(0x2fe),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x5aa65b){const _0x48a479=_0x831beb;if(dbLogs[_0x48a479(0x216)](_0x48a479(0x1a1))[_0x48a479(0x1d2)]()){const _0x547362=dbLogs[_0x48a479(0x1a4)](_0x48a479(0x1a1))[_0x48a479(0x18e)](_0x48a479(0x29c))[_0x48a479(0x1d9)](_0x34e045=>{const _0xd3c91b=_0x48a479;return _0x34e045[_0xd3c91b(0x248)]=='order';})['value']();dbLogs['get'](_0x48a479(0x1a1))['remove']()[_0x48a479(0x2d6)](),dbLogs['get']('logs')[_0x48a479(0x329)](_0x547362)[_0x48a479(0x2d6)](),emitHistory(_0x5aa65b);}}async function pauseBot(_0x570e3c=pauseBotIntervalShort,_0x24e8f0,_0x4891f5,_0x28d3b9=![]){const _0x3dda9c=_0x831beb,_0x3968e6=new Date()[_0x3dda9c(0x27b)]();if(!lastErrorShown||_0x3968e6-lastErrorShown>=_0x570e3c){lastErrorShown=_0x3968e6;if(!lastBotPause)lastBotPause=_0x3968e6,consecutivePauses=0x1;else{if(_0x3968e6-lastBotPause-_0x570e3c<0x5a*0x3e8){consecutivePauses++;if(consecutivePauses>maxPauseRetries){if(_0x28d3b9){logHistory(_0x3dda9c(0x226),_0x24e8f0+_0x3dda9c(0x1f6)),await killBot();return;}else logHistory(_0x3dda9c(0x226),_0x24e8f0+pauseBotMsg),_0x570e3c=pauseBotInterval;}}else consecutivePauses=0x1;lastBotPause=_0x3968e6;}_0x4891f5?logger[_0x3dda9c(0x1ab)]('('+consecutivePauses+')\x20'+_0x24e8f0+_0x3dda9c(0x21c),_0x4891f5):logger[_0x3dda9c(0x1ab)]('('+consecutivePauses+')\x20'+_0x24e8f0);if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);await sleep(_0x570e3c),botPaused=![],_0x570e3c==pauseBotIntervalShort?resumeBot(!![]):resumeBot(![]);}}}async function killBot(){const _0x132884=_0x831beb;botPaused=!![],await sleep(0x3e8),process['send']({'stop':_0x132884(0x34a)},_0x586956=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x3010d3,_0x530078,_0x592eb3=![]){const _0x585877=_0x831beb;if(botPaused)return;let _0x2f46f1;const _0x4fc22c=config[_0x585877(0x1d0)]||'Exchange';if(_0x530078)logger['debug']('Exception\x20thrown\x20in\x20'+_0x530078);const _0x36f16d=()=>{const _0x503ef5=_0x585877;loading['error']=_0x503ef5(0x327),emitLoadingProgress();};if(_0x3010d3[_0x585877(0x2bf)]()[_0x585877(0x2a7)](_0x585877(0x1b3)))logHistory(_0x585877(0x226),_0x4fc22c+'\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)'),_0x36f16d();else{if(_0x3010d3[_0x585877(0x2bf)]()[_0x585877(0x2a7)](_0x585877(0x22b)))logHistory(_0x585877(0x226),_0x4fc22c+_0x585877(0x209)),_0x36f16d();else{if(_0x3010d3[_0x585877(0x2bf)]()['includes'](_0x585877(0x1d3)))config[_0x585877(0x269)]?_0x2f46f1=_0x4fc22c+_0x585877(0x2e8):_0x2f46f1=_0x4fc22c+_0x585877(0x1b7),logHistory(_0x585877(0x226),_0x2f46f1+'\x20(see:\x20hodlerhacks.com/fix/1)'),_0x36f16d();else{if(_0x3010d3[_0x585877(0x2bf)]()[_0x585877(0x2a7)]('PermissionDenied'))logHistory(_0x585877(0x226),_0x4fc22c+'\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)'),_0x36f16d();else{if(!_0x592eb3)await handleError(_0x3010d3,null);}}}}}async function handleError(_0x3bbd3e,_0x568ba1,_0x2cc3d6=''){const _0xee1186=_0x831beb;if(botPaused)return;let _0x4a6bde;const _0x548aae=config[_0xee1186(0x1d0)]||_0xee1186(0x281);if(_0x568ba1)logger['debug'](_0xee1186(0x31d)+_0x568ba1);if(_0x3bbd3e[_0xee1186(0x2bf)]()[_0xee1186(0x2a7)](_0xee1186(0x31b)))_0x4a6bde=_0x548aae+_0xee1186(0x30a),await pauseBot(undefined,_0x4a6bde,_0x3bbd3e);else{if(_0x3bbd3e[_0xee1186(0x2bf)]()[_0xee1186(0x2a7)]('RateLimitExceeded'))_0x4a6bde=_0x548aae+'\x20blocked\x20API\x20(RateLimitExceeded)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading',await pauseBot(undefined,_0x4a6bde,_0x3bbd3e);else{if(_0x3bbd3e[_0xee1186(0x2bf)]()[_0xee1186(0x2a7)](_0xee1186(0x186))||_0x3bbd3e[_0xee1186(0x2bf)]()['includes'](_0xee1186(0x34b)))_0x4a6bde=_0x548aae+_0xee1186(0x2df),await pauseBot(undefined,_0x4a6bde,_0x3bbd3e[_0xee1186(0x2bf)]());else{if(_0x3bbd3e[_0xee1186(0x2bf)]()[_0xee1186(0x2a7)](_0xee1186(0x23a)))_0x4a6bde=_0x548aae+'\x20not\x20responding\x20(see:\x20hodlerhacks.com/fix/5)',await pauseBot(undefined,_0x4a6bde,_0x3bbd3e[_0xee1186(0x2bf)]());else{if(_0x3bbd3e[_0xee1186(0x2bf)]()[_0xee1186(0x2a7)](_0xee1186(0x332)))_0x4a6bde=_0x548aae+_0xee1186(0x244),await pauseBot(undefined,_0x4a6bde,_0x3bbd3e[_0xee1186(0x2bf)]());else{if(_0x3bbd3e['toString']()[_0xee1186(0x2a4)]()[_0xee1186(0x2a7)](_0xee1186(0x2a3))||_0x3bbd3e[_0xee1186(0x2bf)]()[_0xee1186(0x2a4)]()[_0xee1186(0x2a7)](_0xee1186(0x229)))_0x4a6bde=_0xee1186(0x217),await pauseBot(undefined,_0x4a6bde,_0x3bbd3e['toString']());else{if(_0x3bbd3e[_0xee1186(0x2bf)]()['includes'](_0xee1186(0x338)))_0x4a6bde=_0x548aae+_0xee1186(0x309),await pauseBot(undefined,_0x4a6bde,_0x3bbd3e[_0xee1186(0x2bf)]());else{if(_0x3bbd3e instanceof ccxt[_0xee1186(0x282)])_0x4a6bde=_0x548aae+_0xee1186(0x262)+_0x3bbd3e['toString'](),logger[_0xee1186(0x1ab)]('Network\x20error\x20details:',_0x3bbd3e),await pauseBot(undefined,_0x4a6bde,_0x3bbd3e);else{if(_0x3bbd3e[_0xee1186(0x2bf)]()[_0xee1186(0x2a7)](_0xee1186(0x1b3)))logHistory(_0xee1186(0x226),_0x548aae+_0xee1186(0x27d)),logHistory(_0xee1186(0x226),_0xee1186(0x30c)),await killBot();else{if(_0x3bbd3e[_0xee1186(0x2bf)]()[_0xee1186(0x2a7)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory('error',_0x548aae+'\x20API\x20secret\x20is\x20invalid'),logHistory('error',_0xee1186(0x30c)),await killBot();else{if(_0x3bbd3e['toString']()[_0xee1186(0x2a7)](_0xee1186(0x1d3))&&_0x3bbd3e[_0xee1186(0x2bf)]()[_0xee1186(0x2a7)](_0xee1186(0x177)))_0x4a6bde=_0x548aae+'\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)',await pauseBot(undefined,_0x4a6bde,_0x3bbd3e,!![]);else{if(_0x3bbd3e[_0xee1186(0x2bf)]()['includes'](_0xee1186(0x1d3)))config[_0xee1186(0x269)]?_0x4a6bde=_0x548aae+_0xee1186(0x2e8):_0x4a6bde=_0x548aae+_0xee1186(0x1b7),logHistory(_0xee1186(0x226),_0x4a6bde),logHistory(_0xee1186(0x226),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)'),await killBot();else{if(_0x3bbd3e[_0xee1186(0x2bf)]()['includes'](_0xee1186(0x214)))logHistory(_0xee1186(0x226),_0x548aae+_0xee1186(0x26b)),logHistory(_0xee1186(0x226),_0xee1186(0x30c)),await killBot();else{if(_0x3bbd3e[_0xee1186(0x2bf)]()[_0xee1186(0x2a7)](_0xee1186(0x325)))logHistory(_0xee1186(0x226),'Insufficient\x20funds\x20to\x20execute\x20order:\x20'+_0x2cc3d6),logger[_0xee1186(0x1ab)](_0xee1186(0x31a),_0x3bbd3e);else{if(_0x3bbd3e instanceof ccxt['ExchangeError']){_0x4a6bde=_0x548aae+_0xee1186(0x19b)+_0x3bbd3e[_0xee1186(0x2bf)]();if(_0x2cc3d6)_0x4a6bde+=_0xee1186(0x224)+_0x2cc3d6;await pauseBot(undefined,_0x4a6bde,_0x3bbd3e);}else{_0x4a6bde=_0xee1186(0x32f)+_0x3bbd3e['toString']();if(_0x2cc3d6)_0x4a6bde+='\x0aSymbol(s):\x20'+_0x2cc3d6;await pauseBot(undefined,_0x4a6bde);}}}}}}}}}}}}}}}}function decryptRSA(_0x5b8ce6,_0xf32bf5){const _0x1dfaff=_0x831beb,_0x47e1f3=forge[_0x1dfaff(0x2c7)][_0x1dfaff(0x210)](_0x5b8ce6),_0x49acf4=_0x47e1f3['decrypt'](forge[_0x1dfaff(0x22d)][_0x1dfaff(0x199)](_0xf32bf5),_0x1dfaff(0x294),{'md':forge['md']['sha256'][_0x1dfaff(0x234)](),'mgf1':{'md':forge['md']['sha256'][_0x1dfaff(0x234)]()}});return _0x49acf4;}async function withRetry(_0x5259b3,_0x5185a0){const _0x32c1e4=_0x831beb;let _0x147213=![],_0x5ea246=0x0,_0x485325,_0x2c900a;while(_0x5ea246<maxRetries){try{_0x485325=await _0x5185a0();break;}catch(_0xcf4975){_0x2c900a=_0xcf4975,!_0x147213?(_0x147213=!![],logger['debug'](_0x32c1e4(0x1b9)+_0x5259b3+':',_0xcf4975[_0x32c1e4(0x2bf)]())):await sleep(retryInterval);}_0x5ea246++;}if(_0x5ea246==0x0)return _0x485325;if(_0x5ea246>=maxRetries)throw _0x2c900a;else return logger[_0x32c1e4(0x1ab)](_0x32c1e4(0x31f)+_0x5ea246+'\x20attempts'),_0x485325;}function formatResult(_0x53e411,_0x2e3998){const _0x2a885e=_0x831beb;return parseFloat(_0x53e411[_0x2a885e(0x273)](_0x2e3998));}function formatResultTruncate(_0x376608,_0x2a130e){const _0x1ad78a=_0x831beb;let _0xe5bb38=formatResultString(_0x376608,0xa),_0x5984e0=_0xe5bb38[_0x1ad78a(0x328)]('.');return _0x5984e0!=-0x1&&(_0xe5bb38=_0xe5bb38[_0x1ad78a(0x267)](0x0,_0x5984e0+_0x2a130e+0x1)),Number(_0xe5bb38);}function formatResultString(_0x55f34f,_0x376a21){const _0x5b9cb5=_0x831beb;let _0xc49222;if(!(''+_0x55f34f)[_0x5b9cb5(0x2a7)]('e'))_0xc49222=+(Math[_0x5b9cb5(0x2e6)](_0x55f34f+'e+'+_0x376a21)+'e-'+_0x376a21);else{let _0x441293=(''+_0x55f34f)['split']('e'),_0x189d11='';+_0x441293[0x1]+_0x376a21>0x0&&(_0x189d11='+'),_0xc49222=+(Math[_0x5b9cb5(0x2e6)](+_0x441293[0x0]+'e'+_0x189d11+(+_0x441293[0x1]+_0x376a21))+'e-'+_0x376a21);}return Number(_0xc49222)[_0x5b9cb5(0x273)](_0x376a21);}function getServerTime(){const _0x24aed3=_0x831beb,_0x5f18fb=new Date();return _0x5f18fb[_0x24aed3(0x2e9)]()+'/'+(_0x5f18fb[_0x24aed3(0x211)]()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x5f18fb['getDate']()[_0x24aed3(0x2bf)]()['padStart'](0x2,'0')+'\x20'+_0x5f18fb['getHours']()['toString']()[_0x24aed3(0x1e7)](0x2,'0')+':'+_0x5f18fb[_0x24aed3(0x20e)]()['toString']()[_0x24aed3(0x1e7)](0x2,'0')+':'+_0x5f18fb['getSeconds']()[_0x24aed3(0x2bf)]()[_0x24aed3(0x1e7)](0x2,'0');}function getTimeStamp(){const _0x3c3298=_0x831beb,_0x56bb00=shiftedTime();return _0x56bb00[_0x3c3298(0x2e9)]()+'/'+(_0x56bb00['getMonth']()+0x1)[_0x3c3298(0x2bf)]()['padStart'](0x2,'0')+'/'+_0x56bb00[_0x3c3298(0x2d2)]()[_0x3c3298(0x2bf)]()[_0x3c3298(0x1e7)](0x2,'0')+'\x20'+_0x56bb00[_0x3c3298(0x178)]()[_0x3c3298(0x2bf)]()[_0x3c3298(0x1e7)](0x2,'0')+':'+_0x56bb00['getMinutes']()[_0x3c3298(0x2bf)]()['padStart'](0x2,'0')+':'+_0x56bb00['getSeconds']()[_0x3c3298(0x2bf)]()[_0x3c3298(0x1e7)](0x2,'0');}function getDate(){const _0x528bfc=_0x831beb,_0x2bac4a=shiftedTime();return _0x2bac4a['getFullYear']()+'/'+(_0x2bac4a[_0x528bfc(0x211)]()+0x1)[_0x528bfc(0x2bf)]()['padStart'](0x2,'0')+'/'+_0x2bac4a[_0x528bfc(0x2d2)]()[_0x528bfc(0x2bf)]()[_0x528bfc(0x1e7)](0x2,'0');}function getHour(){const _0xe37397=_0x831beb,_0x543cf4=shiftedTime();return _0x543cf4[_0xe37397(0x178)]()[_0xe37397(0x2bf)]()[_0xe37397(0x1e7)](0x2,'0');}function sleep(_0x36097e){return new Promise(_0x317188=>setTimeout(_0x317188,_0x36097e));}function shiftedTime(){const _0x446538=_0x831beb,_0xb62cf2=new Date();let _0x15f7c2=_0xb62cf2;if(config&&config[_0x446538(0x240)]!==0x0)_0x15f7c2=fns[_0x446538(0x289)](_0xb62cf2,{'hours':config[_0x446538(0x240)]});return _0x15f7c2;}function timer(_0x2f01d5){const _0x4f2c32=_0x831beb,_0x5e2041=new Date();!lasttime?console[_0x4f2c32(0x33a)](getTimeStamp()+_0x4f2c32(0x33d),_0x2f01d5,_0x5e2041):console['log'](getTimeStamp()+':\x20timer\x20>',_0x2f01d5,(_0x5e2041-lasttime)/0x3e8),lasttime=_0x5e2041;}