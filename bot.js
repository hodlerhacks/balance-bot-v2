const _0x2b499f=_0x3436;(function(_0x56d606,_0x1d356f){const _0x3653c7=_0x3436,_0xf9ce4e=_0x56d606();while(!![]){try{const _0x2c6313=parseInt(_0x3653c7(0x1c1))/0x1*(-parseInt(_0x3653c7(0x32c))/0x2)+parseInt(_0x3653c7(0x1b3))/0x3+parseInt(_0x3653c7(0x1ca))/0x4*(-parseInt(_0x3653c7(0x234))/0x5)+-parseInt(_0x3653c7(0x1bf))/0x6*(parseInt(_0x3653c7(0x230))/0x7)+parseInt(_0x3653c7(0x304))/0x8+parseInt(_0x3653c7(0x223))/0x9+parseInt(_0x3653c7(0x285))/0xa*(parseInt(_0x3653c7(0x2ed))/0xb);if(_0x2c6313===_0x1d356f)break;else _0xf9ce4e['push'](_0xf9ce4e['shift']());}catch(_0x1976ca){_0xf9ce4e['push'](_0xf9ce4e['shift']());}}}(_0x5a30,0x23ae2));const _0x484e38=function(){let _0x4c33ac=!![];return function(_0x257955,_0x2eab08){const _0x58026e=_0x4c33ac?function(){const _0x3d15bd=_0x3436;if(_0x2eab08){const _0x408622=_0x2eab08[_0x3d15bd(0x1f4)](_0x257955,arguments);return _0x2eab08=null,_0x408622;}}:function(){};return _0x4c33ac=![],_0x58026e;};}(),_0x41df5b=_0x484e38(this,function(){const _0x43b5a4=_0x3436;return _0x41df5b[_0x43b5a4(0x344)]()[_0x43b5a4(0x28c)](_0x43b5a4(0x2be))[_0x43b5a4(0x344)]()[_0x43b5a4(0x333)](_0x41df5b)['search'](_0x43b5a4(0x2be));});_0x41df5b();'use strict';const ccxt=require(_0x2b499f(0x34f)),low=require(_0x2b499f(0x2f4)),FileSync=require(_0x2b499f(0x36b)),fs=require('fs'),fns=require(_0x2b499f(0x278)),forge=require(_0x2b499f(0x338)),util=require(_0x2b499f(0x2d1)),argv=require(_0x2b499f(0x297))(process[_0x2b499f(0x2b1)][_0x2b499f(0x1be)](0x2))[_0x2b499f(0x2b1)],path=require(_0x2b499f(0x2fb)),axios=require(_0x2b499f(0x34b));let exchange,gTicker={},gChange={};const usdBasecoins=[_0x2b499f(0x329),_0x2b499f(0x30d),_0x2b499f(0x330),_0x2b499f(0x22b),_0x2b499f(0x2fc),'USDP'],excludedExchanges=[_0x2b499f(0x2cb)],debugging=argv['d']||![];let pnlGenerationNeeded=argv['r']||![],config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x2b499f(0x356)]({'LOCKED':0x0,'UNLOCKING':0x1,'UNLOCKED':0x2});let lockOrders=ORDERS[_0x2b499f(0x346)],validateOrdersState,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotIntervalShort=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0x2b499f(0x35a)+pauseBotInterval/0xea60+_0x2b499f(0x241),maxPauseRetries=0x6,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,watchTransactionsInterval=0x3c*0x3e8,schedulerInterval=0x3c*0x3c*0x3e8,retryInterval=0x3e8,maxRetries=0x5,logPageSize=0x14,defaultFee=0.003;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidOrdersInitialTimeout,pidOrdersTimeout,botPaused=![],transactionDetectionOngoing=![],lastCoinsToBalance='',exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;function _0x5a30(){const _0x34e31=[')\x20known\x20order:\x20','last','match','red_yellow_blue','\x20MB','changes','\x20metrics:</b>\x20\x0a\x0a','has','372633ljJFSz','keys','price','Generating\x20PnL\x20data','Saving\x20configuration','Headless:\x20','coin','kill','status\x20code\x20401','writeFile','date','slice','6dLfaBf','Resuming\x20(','395WNRnjY','coin-loading-progress','fiat','Cooldown\x20ended\x20-\x20balancing\x20resumed','cost','Bot\x20','existsSync','cooldown','getTime','2200jzHPSJ','defaults','time','initial','uncaughtException','getDate','Initializing\x20exchange','basecoin','\x20>\x20details:','version','\x20change','<b>Bot\x20','limit-high','\x20|\x20lock\x20orders:\x20','ordertype','status','watchTrades','isBefore','./version.json','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','Initializing\x20coin\x20results','startnumber','LOCKED','\x20has\x20a\x2024h\x20drop\x20of\x20','delta','cancel','Net\x20','spot','Bitget','\x20:\x20','amountToPrecision','Error\x20occurred:\x20','unlinkSync','\x20-\x20bot\x20switched\x20to\x20manual\x20mode','UNLOCKING','sortBy','RateLimitExceeded','Updating\x20API\x20key\x20(not\x20saved\x20in\x20config\x20file\x20yet)','loading-canceled','RSA-OAEP','fetchTicker','\x20minutes\x20-\x20','apply','Error\x20details:\x20','storeConfiguration','net-fiat','\x20blocked\x20API\x20(DDoSProtection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','onepagemode','showConfig','balances','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','getPortfolio','getSeconds','\x20>\x20[DEBUG]\x20','quote','fromCodePoint','BNB','Valid\x20balance\x20for\x20','ETH','1\x20-\x20Handle\x20open\x20orders','\x20|\x20highest\x20fee:\x20','detectLiquidityChange()','success','get','Limit\x20(high-margin)','\x20not\x20responding\x20(see:\x20hodlerhacks.com/fix/5)','filter','page','DDoSProtection','timeout','001','Order(s)\x20not\x20validated\x20after\x20','\x20order:\x20','fetchBalance','cancelOrders()','percentage','distribution','number','\x0aSymbol(s):\x20','function','Invalid\x20balance\x20for\x20','usd','Block\x20transaction\x20detection:\x20','\x20orders\x20in\x20less\x20than\x20','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','watchOrders','-performance.json','Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)','\x20attempts','419859OsVtFA','update-liquidity','testApi','orderId','-results.json','Order\x20filled','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)','average','USDT','No\x20more\x20open\x20orders\x20-\x20','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','ask','Unknown\x20error:\x20','1766121yAAxAk','Failed\x20to\x20load\x20market\x20data\x20-\x20bot\x20not\x20started','closed','limit-low','460QKQSeJ','apiPassword','Placing\x20order\x20for:\x20','autoliquidity','pki','Resetting\x20coin\x20results:\x20','log','Bybit','exchanges','sha256','Huobipro','loadMarkets','configstate','\x20minutes','change','random','highest','bot','OnMaintenance','privateKey','starting-balance-','RequestTimeout','decode64','currency','rightTxt','</pre>','environment','/USD','colorscheme','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','message','PAXG','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','orderstatus','add','bot-','1\x20-\x20partially\x20FILLED\x20(','added','includes','Cryptocom','starting-balances','Error\x20in\x20loadSymbols():\x20','Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute','Order\x20is\x20invalid:\x20','buys','differenceInSeconds','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','Binance','pnl','process\x20','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','coins','no\x20open\x20orders','Resetting\x20bot\x20history','quick','order','create','watchOrders()','map','\x20API\x20key\x20is\x20invalid','getOpenOrders()','%\x20(','exchange','\x20hour','InvalidNonce','startdate','remainingSymbols','warning','date-fns','createOrder','getMinutes','<b>','forEach','none','limit','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','Invalid\x20quantity','placeOrder','portfolio1','***','Exception\x20thrown\x20in\x20','142490bkKICU','reverse','showname','must\x20be\x20greater\x20than\x20minimum\x20amount','configuration','min','resetHistory','search','isEqual','2.6.22','Unknown\x20error\x20-\x20check\x20logs',':\x20timer\x20>','buy','\x20-\x20bot\x20not\x20started','\x20(see:\x20hodlerhacks.com/fix/1)','fetchBalance()','deleteHistoryAlerts','change24h','yargs/yargs','************','Market\x20order','sendMetricsTelegram','portfolio2','2.3.5','Limit\x20(low-margin)','threshold','-config.json','staging','event','indexOf','round','mkdirSync','net-basecoin','running','marketcapApi','getStartingBalances','realizedPnL','botname','symbol','splice','total','final','\x20API\x20secret\x20is\x20invalid','-events.json','argv','Fee\x20discount\x20refund\x20detected:\x20','InsufficientFunds','marketcapsqrt','leftTxt','cancelOrder','ExchangeError','EUR','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','market','Unfilled\x20order(s)\x20canceled\x20after\x20','pro','basecoinvalue','(((.+)+)+)+$','yyyy/MM/dd','Initializing\x20exchange:\x20already\x20done','marketcapEnabled','replace','abs','shift','2.6.23','sells','data','ID:\x20','args','sell','bitmex','pop','password','Pausing\x20for\x20','getMonth','bots','util','/backup/','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','max','breakeven','1\x20-\x20Validate\x20orders:\x20','Error:\x20Invalid\x20argument\x20','parse','Trigger:\x20','\x20-\x20','watchTradesForSymbols()','Network\x20error\x20details:','NetworkError','createWriteStream','ongoing','\x20|\x20Custom\x20ID:\x20','\x20>\x20stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','cancelLoading','-------------------------------\x0a','\x20closed\x20the\x20connection\x20(see:\x20hodlerhacks.com/fix/5)','\x20rejected\x20your\x20API\x20request\x20(see:\x20hodlerhacks.com/fix/4)','join','valid','\x20|\x20','headless','\x20value','logs','209SOrkEm','token\x20is\x20expired','apiSecret','floor','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','Exchange','watchTrades()','lowdb','sendPortfolioTelegram','toggleBotMode','cloneDeep','2.6.0','stringify','filled','path','USDC','./config/','Insufficient\x20funds\x20to\x20execute\x20order:\x20','bb-settings.json','limits','initTickers()','substring','format','1516408NiRGpA','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','toLowerCase','code','eur','startprice','BNB/','botID','<pre>','BUSD','.json','push','getFullYear','amount','excluded','prevnumber','Avoiding\x20continuous\x20order\x20attempts','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','addDays','debug','fetchTickers','target','recreate','Loading\x20completed','sort','canceled','1\x20-\x20FILLED\x20unknown\x20order:\x20','padEnd','PermissionDenied','enabled','\x20blocked\x20API\x20(RateLimitExceeded)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','privateKeyFromPem','2.7.1','complete','./logs/','portfolio','0\x20-\x20EXECUTION:\x20','USD','findIndex','Reset\x20|\x20','922OoBiEm','side','toFixed','timeshift','TUSD','fee','Portfolio\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','constructor','storeHeadless','entries','\x20uses\x20','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','node-forge','\x20not\x20available\x20(see:\x20hodlerhacks.com/fix/5)','progress','realized','\x20>\x20','toUpperCase','type','recovery','write','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','liquidity','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','toString','market_cap','UNLOCKED','storeFiat','restart','Portfolio\x20change\x20detected:\x20','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','axios','Net\x20effect','startsWith','fetchTickers()','ccxt','Order\x20filled:\x20','send','Cex','openOrders','Error\x20details:','getHours','freeze','heapUsed','2\x20-\x20Handled\x20open\x20orders','active','\x20>\x20pausing\x20bot\x20for\x20','fees','enableFiatToggle','open','slider','split','placeOrder()','length','apiKey','fetchOpenOrders','trade','value','ExchangeNotAvailable','getCoinNumber()','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','\x20API\x20key,\x20secret\x20or\x20password\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','offset','lowdb/adapters/FileSync','assign','set','Order\x20amount\x20is\x20invalid:\x20','find','padStart','API-key\x20format\x20invalid','sqrt','marketcap','configuration-stored','recent20','removed','full','memoryUsage','\x20portfolio:</b>\x20\x0a\x0a','emojisell','timestamp','BTC','error','emojibuy','decrypt','Initiating\x20bot\x20restart','AuthenticationError'];_0x5a30=function(){return _0x34e31;};return _0x5a30();}const balanceUpdateDelay=0x5dc,balanceUpdateRetries=0x5;let enableFiatToggle;const serverversion=require('./version.json')[_0x2b499f(0x1d3)],environment=require(_0x2b499f(0x1dc))[_0x2b499f(0x24e)]||'production',botID=process[_0x2b499f(0x2b1)][0x2]||_0x2b499f(0x210),pattern=/^[0-9]{3}$/;!pattern['test'](botID)&&(console[_0x2b499f(0x23a)](_0x2b499f(0x2d7)+botID+',\x20must\x20be\x20a\x203\x20digit\x20number'),killBot());function _0x3436(_0x120692,_0x304bcb){const _0x54d74d=_0x5a30();return _0x3436=function(_0x41df5b,_0x484e38){_0x41df5b=_0x41df5b-0x197;let _0x5a3038=_0x54d74d[_0x41df5b];return _0x5a3038;},_0x3436(_0x120692,_0x304bcb);}const userID=process['argv'][0x3]||'',configpath=userID?_0x2b499f(0x2fd)+userID+'/':_0x2b499f(0x2fd),logspath=userID?_0x2b499f(0x326)+userID+'/':_0x2b499f(0x326),loggerfile=fs[_0x2b499f(0x2de)](logspath+'/output-000.log',{'flags':'a'});!fs[_0x2b499f(0x1c7)](configpath)&&fs[_0x2b499f(0x2a4)](configpath);!fs[_0x2b499f(0x1c7)](logspath)&&fs[_0x2b499f(0x2a4)](logspath);const configfile=configpath+_0x2b499f(0x257)+botID+_0x2b499f(0x29f),logfile=configpath+_0x2b499f(0x257)+botID+'-events.json',performancefile=configpath+'bot-'+botID+'-performance.json',coinresultsfile=configpath+'bot-'+botID+_0x2b499f(0x227),settingsfile=configpath+_0x2b499f(0x2ff),securefile=configpath+'bb-secure.json',configbackuppath=configpath+_0x2b499f(0x2d2),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x2b499f(0x1cb)]({'logs':[],'version':serverversion})[_0x2b499f(0x340)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x2b499f(0x1cb)]({'data':[],'version':serverversion})[_0x2b499f(0x340)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x2b499f(0x1cb)]({'bot':[],'version':serverversion})[_0x2b499f(0x340)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x2b499f(0x1cb)]({'coins':{},'version':serverversion})[_0x2b499f(0x340)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0,settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x5660f7=>{console['log'](_0x5660f7);},'simple':_0x4ac051=>{const _0x331ea8=_0x2b499f;console[_0x331ea8(0x23a)](_0x4ac051),loggerfile[_0x331ea8(0x340)](util[_0x331ea8(0x303)](_0x4ac051)+'\x0a');},'full':async(_0x350814,_0x5a660f='')=>{const _0x3f71ce=_0x2b499f;let _0x21db3e;if(config[_0x3f71ce(0x287)])_0x21db3e=getTimeStamp()+':\x20'+config[_0x3f71ce(0x2aa)]+_0x3f71ce(0x33c)+_0x350814;else _0x21db3e=getTimeStamp()+':\x20Bot\x20'+botID+_0x3f71ce(0x33c)+_0x350814;console[_0x3f71ce(0x23a)](_0x21db3e),loggerfile[_0x3f71ce(0x340)](util[_0x3f71ce(0x303)](_0x21db3e)+'\x0a'),_0x5a660f&&(console['log'](_0x5a660f),loggerfile[_0x3f71ce(0x340)](util['format'](_0x5a660f)+'\x0a'));},'debug':async(_0x4866d0,_0x446a4b='')=>{const _0x17980f=_0x2b499f;let _0x40324a;if(config[_0x17980f(0x287)])_0x40324a=getTimeStamp()+':\x20'+config[_0x17980f(0x2aa)]+_0x17980f(0x1ff)+_0x4866d0;else _0x40324a=getTimeStamp()+':\x20Bot\x20'+botID+_0x17980f(0x1ff)+_0x4866d0;if(debugging)console[_0x17980f(0x23a)](_0x40324a);loggerfile[_0x17980f(0x340)](util['format'](_0x40324a)+'\x0a');if(_0x446a4b){if(debugging)console['log'](_0x446a4b);loggerfile[_0x17980f(0x340)](util[_0x17980f(0x303)](_0x446a4b)+'\x0a');}}};process['on'](_0x2b499f(0x1ce),function(_0x475ded){const _0x383234=_0x2b499f;handleError(_0x475ded['stack'],_0x383234(0x1ce));});settings['timeshift']!=config['timeshift']&&updateTimeshift(settings[_0x2b499f(0x32f)]);settings['onepagemode']!=config[_0x2b499f(0x1f9)]&&updateOnepagemode(settings[_0x2b499f(0x1f9)]);(settings[_0x2b499f(0x2a7)]&&!config[_0x2b499f(0x2a7)]||!settings[_0x2b499f(0x2a7)]&&config[_0x2b499f(0x2a7)])&&updateMarketcapApi(settings[_0x2b499f(0x2a7)]);process[_0x2b499f(0x351)]({'started':'running'},_0x540624=>{}),initializeProcessListeners();function proxyEmit(_0x3f4423,_0x2f2321=null){const _0x1b38f2=_0x2b499f;process[_0x1b38f2(0x351)]({'function':_0x3f4423,'args':_0x2f2321},_0x2456db=>{});}function initializeProcessListeners(){const _0x48e3e8=_0x2b499f;process['on'](_0x48e3e8(0x252),_0x2e4034=>{const _0x4bb5c8=_0x48e3e8;switch(Object[_0x4bb5c8(0x1b4)](_0x2e4034)[0x0]){case _0x4bb5c8(0x32f):_0x2e4034['timeshift']!=undefined&&(settings[_0x4bb5c8(0x32f)]=_0x2e4034[_0x4bb5c8(0x32f)],updateTimeshift(settings[_0x4bb5c8(0x32f)]));break;case _0x4bb5c8(0x1f9):_0x2e4034[_0x4bb5c8(0x1f9)]!=undefined&&(settings[_0x4bb5c8(0x1f9)]=_0x2e4034[_0x4bb5c8(0x1f9)],updateOnepagemode(settings[_0x4bb5c8(0x1f9)]));break;case _0x4bb5c8(0x2a7):_0x2e4034[_0x4bb5c8(0x2a7)]!=undefined&&(settings[_0x4bb5c8(0x2a7)]=_0x2e4034['marketcapApi'],updateMarketcapApi(settings[_0x4bb5c8(0x2a7)]));break;case _0x4bb5c8(0x2d0):_0x2e4034['bots']!=undefined&&(bots=JSON[_0x4bb5c8(0x2d8)](_0x2e4034[_0x4bb5c8(0x2d0)]),proxyEmit(_0x4bb5c8(0x2d0),bots));break;case _0x4bb5c8(0x219):switch(_0x2e4034[_0x4bb5c8(0x219)]){case'initclient':initclient();break;case _0x4bb5c8(0x2f6):toggleBotMode();break;case'emitHistory':emitHistory(_0x2e4034[_0x4bb5c8(0x2c9)]);break;case _0x4bb5c8(0x295):deleteHistoryAlerts(_0x2e4034[_0x4bb5c8(0x2c9)]);break;case _0x4bb5c8(0x1fd):getPortfolio(_0x2e4034[_0x4bb5c8(0x2c9)]);break;case _0x4bb5c8(0x1f6):storeConfiguration(_0x2e4034[_0x4bb5c8(0x2c9)]);break;case _0x4bb5c8(0x334):storeHeadless(_0x2e4034[_0x4bb5c8(0x2c9)]);break;case _0x4bb5c8(0x347):storeFiat(_0x2e4034['args']);break;case _0x4bb5c8(0x28b):resetHistory();break;case _0x4bb5c8(0x2a8):getStartingBalances(getNormalizedPerformance());break;case _0x4bb5c8(0x281):placeOrder(_0x2e4034[_0x4bb5c8(0x2c9)]);break;case _0x4bb5c8(0x2e3):cancelLoading();break;case _0x4bb5c8(0x1fa):showConfig();break;case _0x4bb5c8(0x29a):sendMetricsTelegram();break;case _0x4bb5c8(0x2f5):sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0xd7e77=![]){const _0x47b5f9=_0x2b499f;logger['debug'](_0x47b5f9(0x32b)+(_0xd7e77?'exchange\x20reload':'no\x20exchange\x20reloaded')+'\x20|\x20exchange:\x20'+config['exchange']);if(pidBalances)clearTimeout(pidBalances);if(!_0xd7e77)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x47b5f9(0x362)]!=''&&config[_0x47b5f9(0x362)]!=_0x47b5f9(0x283)){loadingProgress=0x0;_0xd7e77&&(await initExchange(),await loadSymbols(),loadingProgress=0x1,setStableCoins(),proxyEmit(_0x47b5f9(0x289),emittedConfiguration()),initialPerformanceStored=![]);const _0x35069d=await getCoins();[currentCoins,currentCoinsAll]=_0x35069d,setBlockTransactionDetection(![]),startScheduler(),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x47b5f9(0x317)]('Loading\x20completed'),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x47b5f9(0x361)]==0x0&&allOpenOrders[_0x47b5f9(0x361)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(pnlGenerationNeeded)await generatePnL();}}async function resumeBot(_0x35b05c=![]){const _0x78eddd=_0x2b499f;logger['debug'](_0x78eddd(0x1c0)+(_0x35b05c?_0x78eddd(0x26a):_0x78eddd(0x325))+')\x20|\x20exchange:\x20'+config[_0x78eddd(0x272)]);if(pidBalances)clearTimeout(pidBalances);if(_0x35b05c){getBalances();return;}coinsLoaded=![];if(config[_0x78eddd(0x362)]!=''&&config[_0x78eddd(0x362)]!=_0x78eddd(0x283)){loadingProgress=0x1;const _0x5919fa=await getCoins();[currentCoins,currentCoinsAll]=_0x5919fa,setBlockTransactionDetection(![]),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger['debug'](_0x78eddd(0x31b)),getBalances(![]),await updateOpenOrders();if(lastOrders['length']==0x0&&allOpenOrders[_0x78eddd(0x361)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();}}async function getMarketCap(_0x140307){const _0x1e8ba0=_0x2b499f;let _0xade18c=![];if(_0x140307)_0xade18c=!![];let _0x4c289c;_0xade18c?_0x4c289c=_0x140307[_0x1e8ba0(0x26e)](_0x397cee=>_0x397cee[_0x1e8ba0(0x1b9)]):_0x4c289c=currentCoinsAll[_0x1e8ba0(0x26e)](_0x539ba7=>_0x539ba7[_0x1e8ba0(0x1b9)]);if(!config[_0x1e8ba0(0x2a7)]||!_0xade18c&&!config[_0x1e8ba0(0x2c1)]||_0x4c289c[_0x1e8ba0(0x361)]==0x0)return;let _0x576b08=null;try{_0x576b08=await axios['get']('https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest',{'headers':{'X-CMC_PRO_API_KEY':settings[_0x1e8ba0(0x2a7)]},'params':{'symbol':_0x4c289c[_0x1e8ba0(0x344)]()}});}catch(_0x2b866f){_0x576b08=null,_0x2b866f[_0x1e8ba0(0x344)]()[_0x1e8ba0(0x25a)](_0x1e8ba0(0x1bb))?(config[_0x1e8ba0(0x2a7)]=![],updateConfig(),proxyEmit(_0x1e8ba0(0x289),emittedConfiguration()),logHistory(_0x1e8ba0(0x1a6),'CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager')):(logHistory(_0x1e8ba0(0x1a6),'CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20trying\x20again\x20in\x20'+schedulerInterval/(0x3c*0x3e8)+_0x1e8ba0(0x241)),logger['debug'](_0x1e8ba0(0x354),_0x2b866f['toString']()+_0x1e8ba0(0x2da)+_0x2b866f[_0x1e8ba0(0x307)]));}if(_0x576b08){let _0x52bfed=0x0;const _0x11ff6c=_0x576b08[_0x1e8ba0(0x2c7)];_0x4c289c[_0x1e8ba0(0x27c)](_0x47b232=>{const _0x2f765b=_0x1e8ba0;if(_0x11ff6c[_0x2f765b(0x2c7)][_0x47b232][0x0])_0x52bfed+=_0x11ff6c[_0x2f765b(0x2c7)][_0x47b232][0x0][_0x2f765b(0x200)][_0x2f765b(0x329)]['market_cap'];}),_0x4c289c[_0x1e8ba0(0x27c)](_0x7b84ad=>{const _0x3ced1d=_0x1e8ba0,_0x1abcde=_0x11ff6c['data'][_0x7b84ad][0x0]?_0x11ff6c[_0x3ced1d(0x2c7)][_0x7b84ad][0x0][_0x3ced1d(0x200)][_0x3ced1d(0x329)][_0x3ced1d(0x345)]:0x0;if(_0xade18c){const _0x19403e=_0x140307['find'](_0x2bdf97=>_0x2bdf97[_0x3ced1d(0x1b9)]==_0x7b84ad);_0x19403e&&(_0x19403e[_0x3ced1d(0x19c)]=_0x1abcde);}else{const _0x3460e1=currentCoins[_0x3ced1d(0x198)](_0x1ad757=>_0x1ad757['coin']==_0x7b84ad);_0x3460e1&&(_0x3460e1[_0x3ced1d(0x19c)]=_0x1abcde);const _0x4e6e31=currentCoinsAll[_0x3ced1d(0x198)](_0x5cd01e=>_0x5cd01e[_0x3ced1d(0x1b9)]==_0x7b84ad);_0x4e6e31&&(_0x4e6e31['marketcap']=_0x1abcde);}}),!_0xade18c&&updateTargetDistribution();}}function updateTargetDistribution(){const _0x320a89=_0x2b499f,_0x11e60a=0x2;let _0x1c4725=0x0,_0x25464c=0x0,_0x39c0b5=0x0,_0x296e5b=0x0,_0x3a38c8=0x0;config[_0x320a89(0x327)]['forEach'](_0x5bde64=>{const _0x2964fd=_0x320a89;if(!_0x5bde64[_0x2964fd(0x312)]){_0x39c0b5++,_0x1c4725+=_0x5bde64[_0x2964fd(0x35e)];if(_0x5bde64[_0x2964fd(0x35e)]===-0x1){_0x1c4725++;const _0x37cc78=currentCoinsAll['find'](_0x25db66=>_0x25db66[_0x2964fd(0x1b9)]==_0x5bde64[_0x2964fd(0x1b9)]);_0x37cc78&&(_0x296e5b+=_0x37cc78[_0x2964fd(0x19c)],_0x3a38c8+=Math[_0x2964fd(0x19b)](_0x37cc78[_0x2964fd(0x19c)]));}if(_0x5bde64[_0x2964fd(0x35e)]!==-0x1)_0x25464c++;}});let _0x563d45;const _0x41372f=0x64-_0x1c4725,_0x267f7c=_0x39c0b5-_0x25464c;_0x563d45=_0x267f7c===0x0?_0x1c4725:Math[_0x320a89(0x2d4)](0x64,_0x1c4725),config[_0x320a89(0x327)][_0x320a89(0x27c)](_0x455c0b=>{const _0x5d73a5=_0x320a89,_0x1845c4=currentCoinsAll[_0x5d73a5(0x198)](_0x232c46=>_0x232c46[_0x5d73a5(0x1b9)]==_0x455c0b[_0x5d73a5(0x1b9)]);_0x1845c4&&(_0x455c0b['marketcap']=_0x1845c4[_0x5d73a5(0x19c)]);if(!_0x455c0b['excluded']){if(_0x563d45<=0x64){if(_0x455c0b[_0x5d73a5(0x35e)]===-0x1){if(_0x296e5b!==0x0&&config[_0x5d73a5(0x2c1)]){if(_0x1845c4){if(config['marketcapEnabled']==_0x5d73a5(0x19c))_0x455c0b['distribution']=(_0x41372f/(_0x296e5b/_0x1845c4['marketcap']))[_0x5d73a5(0x32e)](_0x11e60a);else config[_0x5d73a5(0x2c1)]==_0x5d73a5(0x2b4)&&(_0x455c0b[_0x5d73a5(0x216)]=(_0x41372f/(_0x3a38c8/Math[_0x5d73a5(0x19b)](_0x1845c4[_0x5d73a5(0x19c)])))[_0x5d73a5(0x32e)](_0x11e60a));}}}}}}),updateConfig();}function updateConfig(){const _0x1f6ffa=_0x2b499f;let _0x50d266=dbConfig[_0x1f6ffa(0x209)](_0x1f6ffa(0x245))[_0x1f6ffa(0x198)]({'botID':botID})[_0x1f6ffa(0x365)]();_0x50d266&&dbConfig[_0x1f6ffa(0x209)](_0x1f6ffa(0x245))['find']({'botID':botID})['assign'](config)[_0x1f6ffa(0x340)]();}function logMemory(){const _0x394cb2=_0x2b499f;if(environment!=_0x394cb2(0x2a0))return;const _0x2b555c=process[_0x394cb2(0x1a1)]()[_0x394cb2(0x357)]/0x400/0x400;logger['debug'](_0x394cb2(0x265)+process['pid']+_0x394cb2(0x336)+formatResult(_0x2b555c,0x1)+_0x394cb2(0x1af));}async function startScheduler(){const _0x205cc1=_0x2b499f,_0x332594=shiftedTime()[_0x205cc1(0x355)]();getMarketCap(),loadSymbols(),_0x332594==0x1&&logMemory(),await sleep(schedulerInterval),startScheduler();}async function restartBot(_0x91710e=![]){const _0x525f95=_0x2b499f;logger['debug'](_0x525f95(0x1a9));if(!_0x91710e)while(lockOrders!=ORDERS[_0x525f95(0x346)]||coolingDown){await sleep(0x3e8);}process[_0x525f95(0x351)]({'stop':_0x525f95(0x348)},_0xf44ed7=>{});}async function initExchange(_0x417803=config['exchange'],_0xe0757d=config[_0x2b499f(0x362)],_0x2e6a2c=config[_0x2b499f(0x2ef)],_0x3e33b5=config[_0x2b499f(0x235)]){const _0x224b07=_0x2b499f;if(exchange){logger[_0x224b07(0x317)](_0x224b07(0x2c0));return;}logger['debug'](_0x224b07(0x1d0));!supportedExchanges()[_0x224b07(0x25a)](_0x417803)&&(logHistory(_0x224b07(0x1a6),'Balance\x20Bot\x20does\x20not\x20support\x20the\x20'+_0x417803+'\x20exchange'),killBot());const _0x1409bf=ccxt[_0x224b07(0x2bc)][_0x417803[_0x224b07(0x306)]()];exchange=new _0x1409bf({'apiKey':_0xe0757d,'secret':_0x2e6a2c,'options':{'defaultType':'spot'}});if(_0x3e33b5)exchange[_0x224b07(0x2cd)]=_0x3e33b5;}function updateExchange(_0x360902,_0x5f54e3,_0x211bdf=null){const _0x261ef0=_0x2b499f;exchange['apiKey']=_0x360902,exchange['apiSecret']=_0x5f54e3,exchange[_0x261ef0(0x235)]=_0x211bdf,logger[_0x261ef0(0x317)](_0x261ef0(0x1ef));}function setStableCoins(){const _0x4ed6ca=_0x2b499f;let _0x4fe396=config['basecoin']==_0x4ed6ca(0x204)?_0x4ed6ca(0x204):config[_0x4ed6ca(0x1d1)]==_0x4ed6ca(0x253)?'PAXG':_0x4ed6ca(0x1a5),_0x101197=allSymbols['includes'](_0x4fe396+_0x4ed6ca(0x24f))?_0x4ed6ca(0x329):allSymbols[_0x4ed6ca(0x25a)](_0x4fe396+'/USDT')?_0x4ed6ca(0x22b):'EUR',_0x1b9d54=allSymbols[_0x4ed6ca(0x25a)](_0x4fe396+'/EUR')?_0x4ed6ca(0x2b8):_0x101197;enableFiatToggle=!![],_0x101197==_0x4ed6ca(0x2b8)&&(enableFiatToggle=![],storeFiat('EUR')),_0x1b9d54!=_0x4ed6ca(0x2b8)&&(enableFiatToggle=![],storeFiat('USD')),stablecoins={'eur':{'coin':''+_0x4fe396+_0x1b9d54,'symbol':_0x4fe396+'/'+_0x1b9d54},'usd':{'coin':''+_0x4fe396+_0x101197,'symbol':_0x4fe396+'/'+_0x101197}};}async function initwsCcxt(){const _0x93879=_0x2b499f;initCycle++;const _0xdfd28e=initCycle;let _0x2e80b8=[];config[_0x93879(0x327)][_0x93879(0x27c)](_0x49a697=>{const _0x2448ad=_0x93879;if(!_0x49a697[_0x2448ad(0x312)]&&_0x49a697['coin']!=config[_0x2448ad(0x1d1)])_0x2e80b8[_0x2448ad(0x30f)](_0x49a697['symbol']);});if(!_0x2e80b8[_0x93879(0x25a)](stablecoins[_0x93879(0x308)][_0x93879(0x2ab)]))_0x2e80b8[_0x93879(0x30f)](stablecoins[_0x93879(0x308)][_0x93879(0x2ab)]);if(!_0x2e80b8[_0x93879(0x25a)](stablecoins[_0x93879(0x21b)]['symbol']))_0x2e80b8['push'](stablecoins[_0x93879(0x21b)][_0x93879(0x2ab)]);if(config[_0x93879(0x272)][_0x93879(0x34d)](_0x93879(0x263))&&config[_0x93879(0x1d1)]!=_0x93879(0x253)){if(!_0x2e80b8[_0x93879(0x25a)](_0x93879(0x30a)+config['basecoin']))_0x2e80b8[_0x93879(0x30f)](_0x93879(0x30a)+config[_0x93879(0x1d1)]);}loadCoins(_0x2e80b8),_0x2e80b8=validateSymbols(_0x2e80b8);const _0x36398e=async _0x1e0f3e=>{const _0x49a6a7=_0x93879;let _0x888e10;try{const _0x575ec9=await getTickers(_0x1e0f3e);Object[_0x49a6a7(0x335)](_0x575ec9)[_0x49a6a7(0x27c)](_0x59ab56=>{const _0x27a78e=_0x49a6a7;_0x888e10=_0x59ab56[0x1]['symbol'],gTicker[noslash(_0x888e10)]=_0x59ab56[0x1][_0x27a78e(0x1ac)],gChange[_0x888e10]=_0x59ab56[0x1][_0x27a78e(0x215)];});}catch(_0x34a652){await handleError(_0x34a652,_0x49a6a7(0x301),_0x888e10);}},_0x44e764=async _0x2af8f7=>{const _0x525f94=_0x93879;while(initCycle==_0xdfd28e){if(!botPaused)try{const _0x11ef3a=await exchange['watchTrades'](_0x2af8f7);gTicker[noslash(_0x11ef3a[0x0][_0x525f94(0x2ab)])]=_0x11ef3a[0x0][_0x525f94(0x1b5)];}catch(_0x4c5323){if(!exchangeStopped)await handleError(_0x4c5323,_0x525f94(0x2f3),_0x2af8f7);}else await sleep(0x64);}},_0x195b15=async _0x3abe88=>{const _0x17fdb8=_0x93879;while(initCycle==_0xdfd28e){if(!botPaused)try{const _0x135324=await exchange['watchTradesForSymbols'](_0x3abe88),_0x270aa0=_0x135324[_0x17fdb8(0x2cc)]();gTicker[noslash(_0x270aa0[_0x17fdb8(0x2ab)])]=_0x270aa0[_0x17fdb8(0x1b5)];}catch(_0x1cbb5c){if(!exchangeStopped)await handleError(_0x1cbb5c,_0x17fdb8(0x2db),_0x3abe88[_0x17fdb8(0x344)]());}else await sleep(0x64);}},_0x3b7300=async _0x461b22=>{const _0x117467=_0x93879;while(initCycle==_0xdfd28e){if(!botPaused){let _0x5c9409;try{await sleep(0x3c*0x3e8);const _0x537e41=await getTickers(_0x461b22);Object[_0x117467(0x335)](_0x537e41)[_0x117467(0x27c)](_0x36868c=>{const _0x3436ac=_0x117467;_0x5c9409=_0x36868c[0x1][_0x3436ac(0x2ab)],gChange[_0x5c9409]=_0x36868c[0x1][_0x3436ac(0x215)];});}catch(_0xeaafd3){if(!exchangeStopped)await handleError(_0xeaafd3,_0x117467(0x34e),_0x5c9409);}}else await sleep(0x64);}},_0x1c439b=async _0x4ca8e0=>{const _0x1f8a02=_0x93879;while(initCycle==_0xdfd28e){if(!botPaused)try{const _0x27aa15=await exchange[_0x1f8a02(0x21f)](_0x4ca8e0);initCycle==_0xdfd28e&&_0x27aa15[_0x1f8a02(0x27c)](_0x250167=>{updateNumberCoinsCcxt(_0x250167);});}catch(_0x37a255){if(!exchangeStopped)await handleError(_0x37a255,_0x1f8a02(0x26d));}else await sleep(0x64);}};_0x36398e(_0x2e80b8),_0x3b7300(_0x2e80b8),exchange[_0x93879(0x1b2)]['watchTradesForSymbols']&&!(config[_0x93879(0x272)]=='Bybit'&&_0x2e80b8[_0x93879(0x361)]>0xa)?_0x195b15(_0x2e80b8):_0x2e80b8[_0x93879(0x27c)](_0x25ce74=>{_0x44e764(_0x25ce74);}),_0x2e80b8[_0x93879(0x27c)](_0x1690a5=>{_0x1c439b(_0x1690a5);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0xd33721){const _0x1cf849=_0x2b499f;let _0x48369f={};try{if(config[_0x1cf849(0x272)]!=_0x1cf849(0x25b))_0x48369f=await exchange[_0x1cf849(0x318)](_0xd33721);else for(const _0x5c9d86 of _0xd33721){const _0x5b894c=await exchange[_0x1cf849(0x1f2)](_0x5c9d86);_0x48369f[_0x5c9d86]=_0x5b894c;}return _0x48369f;}catch(_0x3f6a80){throw _0x3f6a80;}}function setBlockTransactionDetection(_0x2d11f0){const _0x3e45c4=_0x2b499f;blockTransactionDetection=_0x2d11f0,logger[_0x3e45c4(0x317)](_0x3e45c4(0x21c)+blockTransactionDetection);}async function detectLiquidityChange(_0x510a54=0x0){const _0x1d3cda=_0x2b499f;transactionDetectionOngoing=!![];try{const _0xcde8a3=await getCoins(_0x510a54),[_0x315f3d,_0x304415]=_0xcde8a3;let _0xdfb408=[];currentCoins['forEach'](_0x8c02c7=>{const _0x5376e6=_0x3436,_0xca7c1d=_0x315f3d[_0x5376e6(0x198)](_0x5d086f=>_0x5d086f[_0x5376e6(0x1b9)]==_0x8c02c7[_0x5376e6(0x1b9)]);if(_0xca7c1d){if(_0x8c02c7['number']!=_0xca7c1d[_0x5376e6(0x217)]){let _0x501a2b;if(_0x8c02c7[_0x5376e6(0x1b9)]!=config['basecoin']){const _0xe50006=gTicker[noslash(_0x8c02c7[_0x5376e6(0x2ab)])];_0x501a2b=_0x8c02c7['reverse']?0x1/_0xe50006:_0xe50006;}else _0x501a2b=0x1;_0xdfb408[_0x5376e6(0x30f)]({'coin':_0x8c02c7[_0x5376e6(0x1b9)],'symbol':_0x8c02c7['symbol'],'price':_0x501a2b,'number':Number(formatResult(_0xca7c1d[_0x5376e6(0x217)]-_0x8c02c7[_0x5376e6(0x217)],0x8)),'basecoinvalue':_0x501a2b*(_0xca7c1d['number']-_0x8c02c7[_0x5376e6(0x217)])});}}});if(_0xdfb408[_0x1d3cda(0x361)]>0x0&&!blockTransactionDetection){for(const _0x461472 of _0xdfb408){if(config[_0x1d3cda(0x237)]){logger[_0x1d3cda(0x317)](_0x1d3cda(0x34a)+_0x461472[_0x1d3cda(0x2bd)]+_0x1d3cda(0x206)+lastFees['highest']);if(lastFees[_0x1d3cda(0x244)]==0x0||Math['abs'](_0x461472['basecoinvalue'])>lastFees[_0x1d3cda(0x244)]*0x3){if(config['autoliquidity']==_0x1d3cda(0x224)){delete _0x461472[_0x1d3cda(0x2ab)],delete _0x461472['basecoinvalue'];let _0x3958a3=[],_0x2b4ac9=[...config[_0x1d3cda(0x342)]]||[],_0x533a79=config[_0x1d3cda(0x342)];_0x2b4ac9[_0x1d3cda(0x31c)]((_0x52ea6a,_0x2e220e)=>_0x52ea6a[_0x1d3cda(0x1bd)]>_0x2e220e[_0x1d3cda(0x1bd)]?-0x1:_0x2e220e[_0x1d3cda(0x1bd)]>_0x52ea6a[_0x1d3cda(0x1bd)]?0x1:0x0);const _0x379cc8=getDate();if(_0x2b4ac9[0x0]){const _0x5a02d1=fns[_0x1d3cda(0x2d8)](_0x2b4ac9[0x0][_0x1d3cda(0x1bd)],_0x1d3cda(0x2bf),new Date()),_0x94938a=fns[_0x1d3cda(0x2d8)](_0x379cc8,_0x1d3cda(0x2bf),new Date());if(fns[_0x1d3cda(0x28d)](_0x5a02d1,_0x94938a)){_0x3958a3=_0x2b4ac9[0x0]['changes'];const _0x27f814=_0x3958a3['find'](_0x2f195a=>_0x2f195a['coin']==_0x461472['coin']);_0x27f814?(_0x27f814[_0x1d3cda(0x217)]+=_0x461472[_0x1d3cda(0x217)],_0x27f814[_0x1d3cda(0x217)]==0x0&&(_0x3958a3=_0x3958a3[_0x1d3cda(0x20c)](_0x430ea2=>{const _0x49fe4b=_0x1d3cda;return _0x430ea2['coin']!=_0x461472[_0x49fe4b(0x1b9)];}))):_0x3958a3[_0x1d3cda(0x30f)](_0x461472);const _0xea7359=_0x533a79[_0x1d3cda(0x198)](_0x5f43a0=>_0x5f43a0[_0x1d3cda(0x1bd)]==_0x379cc8);_0xea7359[_0x1d3cda(0x1b0)]=_0x3958a3;}else _0x533a79[_0x1d3cda(0x30f)]({'date':_0x379cc8,'changes':[_0x461472]});}const _0x16e400=_0x533a79[_0x1d3cda(0x198)](_0x31d353=>_0x31d353[_0x1d3cda(0x1bd)]==_0x379cc8);if(_0x16e400){let _0x3584dd=!![];_0x16e400[_0x1d3cda(0x1b0)]['forEach'](_0x5a4957=>{const _0x190f19=_0x1d3cda;if(_0x5a4957[_0x190f19(0x217)]!=0x0)_0x3584dd=![];}),_0x3584dd&&(_0x533a79=_0x533a79['filter'](_0x52b85f=>{const _0x223ee3=_0x1d3cda;return _0x52b85f[_0x223ee3(0x1bd)]!=_0x379cc8;}));}let _0x1e8060=dbConfig[_0x1d3cda(0x209)]('bot')[_0x1d3cda(0x198)]({'botID':botID})[_0x1d3cda(0x365)]();_0x1e8060&&(dbConfig[_0x1d3cda(0x209)](_0x1d3cda(0x245))[_0x1d3cda(0x198)]({'botID':botID})[_0x1d3cda(0x36c)]({'liquidity':_0x533a79})[_0x1d3cda(0x340)](),config['liquidity']=_0x533a79);logHistory('success',_0x1d3cda(0x349)+Math[_0x1d3cda(0x2c3)](_0x461472[_0x1d3cda(0x217)])+'\x20'+_0x461472[_0x1d3cda(0x1b9)]+'\x20'+(_0x461472[_0x1d3cda(0x217)]>0x0?_0x1d3cda(0x259):_0x1d3cda(0x19f))+'\x20-\x20liquidity\x20settings\x20updated\x20accordingly'),proxyEmit(_0x1d3cda(0x289),emittedConfiguration());const _0x3fa6ec=getNormalizedPerformance();emitPerformance(_0x3fa6ec),getStartingBalances(_0x3fa6ec),logger[_0x1d3cda(0x317)](_0x1d3cda(0x332));}else config['autoliquidity']=='switch-manual'&&(config['headless']?(await storeHeadless({'headless':![]}),logHistory('success',_0x1d3cda(0x349)+Math['abs'](_0x461472['number'])+'\x20'+_0x461472[_0x1d3cda(0x1b9)]+'\x20'+(_0x461472[_0x1d3cda(0x217)]>0x0?_0x1d3cda(0x259):_0x1d3cda(0x19f))+_0x1d3cda(0x1eb))):logger[_0x1d3cda(0x317)](_0x1d3cda(0x349)+Math[_0x1d3cda(0x2c3)](_0x461472['number'])+'\x20'+_0x461472['coin']+'\x20'+(_0x461472[_0x1d3cda(0x217)]>0x0?_0x1d3cda(0x259):'removed')+'\x20-\x20bot\x20already\x20running\x20in\x20manual\x20mode'));}else logger[_0x1d3cda(0x317)](_0x1d3cda(0x2b2)+Math[_0x1d3cda(0x2c3)](_0x461472['number'])+'\x20'+_0x461472['coin']+'\x20'+(_0x461472[_0x1d3cda(0x217)]>0x0?_0x1d3cda(0x259):_0x1d3cda(0x19f)));}else logger[_0x1d3cda(0x317)](_0x1d3cda(0x349)+Math[_0x1d3cda(0x2c3)](_0x461472[_0x1d3cda(0x217)])+'\x20'+_0x461472['coin']+'\x20'+(_0x461472['number']>0x0?_0x1d3cda(0x259):'removed')+'\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled');}currentCoins=_0x315f3d,currentCoinsAll=_0x304415;}}catch(_0x403de7){if(!exchangeStopped)await handleError(_0x403de7,_0x1d3cda(0x207));}transactionDetectionOngoing=![];}async function watchTransactions(){await sleep(0x14*0x3e8);while(!![]){!botPaused&&!blockTransactionDetection&&coinsLoaded?(detectLiquidityChange(),await sleep(watchTransactionsInterval)):await sleep(0x3e8);}}async function loadSymbols(){const _0x16d327=_0x2b499f;try{markets=await exchange[_0x16d327(0x23f)](!![]),allSymbols=[],Object['entries'](markets)[_0x16d327(0x27c)](_0xefe59=>{const _0x2c3be9=_0x16d327;_0xefe59[0x1][_0x2c3be9(0x359)]&&_0xefe59[0x1][_0x2c3be9(0x1e5)]&&allSymbols[_0x2c3be9(0x30f)](_0xefe59[0x0]);});}catch(_0x2508c7){markets?logger[_0x16d327(0x317)](_0x16d327(0x25d)+_0x2508c7[_0x16d327(0x344)]()):(loading[_0x16d327(0x1e3)]=!![],emitLoadingProgress(),_0x2508c7[_0x16d327(0x344)]()['toLowerCase']()[_0x16d327(0x25a)](_0x16d327(0x1a4))||_0x2508c7[_0x16d327(0x344)]()['toLowerCase']()['includes']('request-time')?logHistory(_0x16d327(0x1a6),_0x16d327(0x221)):handleErrorNoStop(_0x2508c7,'loadSymbols()',!![]),logHistory('error',_0x16d327(0x231)),logHistory(_0x16d327(0x1a6),_0x16d327(0x2ce)+loadCoinsRetryInterval/0xea60+_0x16d327(0x1fc)),logger['debug'](_0x16d327(0x354),_0x2508c7),botPaused=!![],await sleep(loadCoinsRetryInterval),restartBot());}}function validateSymbols(_0x104894){const _0x472a1b=_0x2b499f;let _0x5eb8c1=[];return _0x104894[_0x472a1b(0x27c)](_0x2e748a=>{const _0xcd75c=_0x472a1b;!allSymbols[_0xcd75c(0x25a)](_0x2e748a)?logHistory(_0xcd75c(0x1a6),'Invalid\x20symbol:\x20'+_0x2e748a+_0xcd75c(0x368)):_0x5eb8c1[_0xcd75c(0x30f)](_0x2e748a);}),_0x5eb8c1;}async function initclient(){const _0x1637b1=_0x2b499f;proxyEmit(_0x1637b1(0x289),emittedConfiguration()),proxyEmit(_0x1637b1(0x23c),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x1637b1(0x1fb),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x3ea2db=getNormalizedPerformance();emitPerformance(_0x3ea2db),getStartingBalances(_0x3ea2db);}async function toggleBotMode(){const _0x29e8f3=_0x2b499f;let _0x398ab9=dbConfig[_0x29e8f3(0x209)](_0x29e8f3(0x245))['find']({'botID':botID})[_0x29e8f3(0x365)]();if(_0x398ab9){const _0x43acef=!_0x398ab9[_0x29e8f3(0x2ea)];dbConfig[_0x29e8f3(0x209)](_0x29e8f3(0x245))['find']({'botID':botID})[_0x29e8f3(0x36c)]({'headless':_0x43acef})[_0x29e8f3(0x340)](),config[_0x29e8f3(0x2ea)]=_0x43acef,proxyEmit(_0x29e8f3(0x289),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x5dbb49=_0x2b499f;process[_0x5dbb49(0x351)]({'updatebotmanager':!![]},_0x584eca=>{}),logger[_0x5dbb49(0x317)](_0x5dbb49(0x1b8)+config[_0x5dbb49(0x2ea)]);}async function loadCoins(_0x4b1771){const _0x1699dd=_0x2b499f;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x1bc70a,_0x5b71f9=0x0,_0x53a5a1=0x0;_0x4b1771[_0x1699dd(0x27c)](_0x2618ec=>{const _0x4bf3b1=_0x1699dd;loading[_0x4bf3b1(0x276)][_0x4bf3b1(0x30f)](_0x2618ec);}),loadingCanceled=![];let _0x3737c3=![];while(_0x1bc70a!=_0x4b1771[_0x1699dd(0x361)]+maxLoadingProgress){_0x1bc70a=loadingProgress,_0x4b1771['forEach'](_0x112856=>{const _0x5e3a77=_0x1699dd;if(gTicker[noslash(_0x112856)]){loading[_0x5e3a77(0x276)]=loading[_0x5e3a77(0x276)]['filter'](_0x497400=>_0x497400!=_0x112856);if(!watchedSymbols['includes'](_0x112856))watchedSymbols[_0x5e3a77(0x30f)](_0x112856);_0x1bc70a++;}}),loading[_0x1699dd(0x33a)]=Math['round'](_0x1bc70a/(_0x4b1771[_0x1699dd(0x361)]+maxLoadingProgress)*0x64);loading[_0x1699dd(0x33a)]!=0x64&&(_0x53a5a1>0x1e*0x5&&(loading['timeout']=!![],emitLoadingProgress()),_0x53a5a1>0x78*0x5&&!_0x3737c3&&(_0x3737c3=!![],logHistory(_0x1699dd(0x1a6),'Failed\x20to\x20load\x20coin\x20data\x20for\x20'+loading[_0x1699dd(0x276)]['join'](',\x20')+_0x1699dd(0x292)),logHistory(_0x1699dd(0x1a6),_0x1699dd(0x2ce)+loadCoinsRetryInterval/0xea60+_0x1699dd(0x1fc)),loadingCanceled=!![],await sleep(loadCoinsRetryInterval),restartBot()));if(loadingCanceled){loading[_0x1699dd(0x1e3)]=!![],emitLoadingProgress();break;}else _0x5b71f9!=loading[_0x1699dd(0x33a)]&&(_0x5b71f9=loading['progress'],emitLoadingProgress()),_0x53a5a1++,await sleep(0xc8);}_0x1bc70a==_0x4b1771[_0x1699dd(0x361)]+maxLoadingProgress&&(coinsLoaded=!![],process['send']({'status':'enabled','live':_0x1699dd(0x2a6)},_0x23d718=>{}),_0x3737c3&&logHistory(_0x1699dd(0x208),_0x1699dd(0x305)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x589f28=_0x2b499f;proxyEmit(_0x589f28(0x289),{...emittedConfiguration(),'configstate':_0x589f28(0x1f0)});}function emitLoadingProgress(){const _0xddddc9=_0x2b499f;proxyEmit(_0xddddc9(0x1c2),loading);}async function getFiat(){const _0x284307=_0x2b499f;let _0x5de2e8=gTicker[stablecoins['eur'][_0x284307(0x1b9)]],_0x309f0e=gTicker[stablecoins[_0x284307(0x21b)][_0x284307(0x1b9)]];return{'eur':Number(_0x5de2e8),'usd':Number(_0x309f0e)};}function capitalize(_0x1adc3a){const _0x24bc6e=_0x2b499f;return _0x1adc3a[_0x24bc6e(0x302)](0x0,0x1)[_0x24bc6e(0x33d)]()+_0x1adc3a['substring'](0x1);}function supportedExchanges(){const _0x477d74=_0x2b499f,_0x173145=['ws',_0x477d74(0x318),_0x477d74(0x1f2),_0x477d74(0x1da),'watchOrders',_0x477d74(0x2b6),_0x477d74(0x279),_0x477d74(0x363),_0x477d74(0x213)];let _0x16de4a=[],_0x66ff66=[],_0x61e7a1=ccxt[_0x477d74(0x2bc)][_0x477d74(0x23c)];_0x61e7a1['forEach'](_0xe3493=>{const _0xf833d8=_0x477d74;try{const _0x25ac28=new ccxt[(_0xf833d8(0x2bc))][_0xe3493]();_0x66ff66['push'](_0x25ac28);}catch(_0x6a5aca){}}),_0x66ff66[_0x477d74(0x27c)](_0x11d06b=>{const _0x2073dd=_0x477d74;let _0x3231bd=0x0;_0x173145['forEach'](_0x3a0d4c=>{const _0x5703f2=_0x3436;_0x3a0d4c in _0x11d06b[_0x5703f2(0x1b2)]&&_0x11d06b[_0x5703f2(0x1b2)][_0x3a0d4c]&&_0x3231bd++;}),_0x3231bd==_0x173145[_0x2073dd(0x361)]&&(!excludedExchanges[_0x2073dd(0x25a)](_0x11d06b['id'])&&_0x16de4a[_0x2073dd(0x30f)](capitalize(_0x11d06b['id'])));});let _0x458d40=[];return _0x61e7a1[_0x477d74(0x27c)](_0x3fba77=>{const _0x58393a=_0x477d74;_0x3fba77=capitalize(_0x3fba77);if(!_0x16de4a[_0x58393a(0x25a)](_0x3fba77))_0x458d40[_0x58393a(0x30f)](_0x3fba77);}),_0x16de4a;}function setStartDatePerformance(){const _0x6cf7c8=_0x2b499f;if(config&&config['liquidity'][0x0]['changes'][_0x6cf7c8(0x361)]!=0x0){const _0x5d96b5=config[_0x6cf7c8(0x342)][0x0]['changes'];dbPerformance[_0x6cf7c8(0x209)](_0x6cf7c8(0x2c7))[_0x6cf7c8(0x198)]({'date':config[_0x6cf7c8(0x275)]})[_0x6cf7c8(0x36c)]({'coins':_0x5d96b5})[_0x6cf7c8(0x340)]();}}function calculatePnL(_0x3e6e0d,_0x50feac,_0x135355,_0x4fb0d5,_0x9826df,_0x2d9d14){const _0x57037f=_0x2b499f;!_0x3e6e0d[_0x57037f(0x25a)]('/'+config[_0x57037f(0x1d1)])&&(_0x135355=_0x135355==_0x57037f(0x291)?_0x57037f(0x2ca):_0x57037f(0x291));!_0x2d9d14[_0x50feac]&&(_0x2d9d14[_0x50feac]={'number':0x0,'sells':0x0,'buys':0x0,'breakeven':0x0,'realizedPnL':0x0});let _0x45fb4b=0x0,_0x986872,_0x23a1d6;if(_0x135355==_0x57037f(0x291))_0x23a1d6=_0x2d9d14[_0x50feac]['number']*_0x2d9d14[_0x50feac]['breakeven']+_0x9826df*_0x4fb0d5,_0x2d9d14[_0x50feac]['number']+=_0x4fb0d5,_0x2d9d14[_0x50feac][_0x57037f(0x2d5)]=_0x2d9d14[_0x50feac][_0x57037f(0x217)]!=0x0?_0x23a1d6/_0x2d9d14[_0x50feac]['number']:0x0,_0x2d9d14[_0x50feac][_0x57037f(0x260)]++;else _0x135355==_0x57037f(0x2ca)&&(_0x986872=Math[_0x57037f(0x28a)](_0x2d9d14[_0x50feac][_0x57037f(0x217)],_0x4fb0d5),_0x45fb4b=(_0x9826df-_0x2d9d14[_0x50feac][_0x57037f(0x2d5)])*_0x986872,_0x23a1d6=Math[_0x57037f(0x2d4)](_0x2d9d14[_0x50feac][_0x57037f(0x217)]*_0x2d9d14[_0x50feac][_0x57037f(0x2d5)]-_0x986872*_0x2d9d14[_0x50feac][_0x57037f(0x2d5)],0x0),_0x2d9d14[_0x50feac][_0x57037f(0x217)]-=_0x986872,_0x2d9d14[_0x50feac][_0x57037f(0x2d5)]=_0x2d9d14[_0x50feac]['number']!=0x0?_0x23a1d6/_0x2d9d14[_0x50feac][_0x57037f(0x217)]:0x0,_0x2d9d14[_0x50feac][_0x57037f(0x2a9)]+=_0x45fb4b,_0x2d9d14[_0x50feac]['sells']++);return _0x45fb4b;}async function generatePnL(){const _0x32511d=_0x2b499f;pnlGenerationNeeded=![],logger[_0x32511d(0x317)](_0x32511d(0x1b6));const _0x25b496=dbLogs[_0x32511d(0x209)]('logs')['value']();let _0x1dce28={},_0x1a231b=0x0,_0x53c19b=0x0,_0x2d25cb=config[_0x32511d(0x275)];const _0x20efc1=fns['parse'](_0x2d25cb,_0x32511d(0x2bf),new Date()),_0x6ee4da=new Date();for(let _0x27d74e=_0x20efc1;!fns[_0x32511d(0x1db)](_0x6ee4da,_0x27d74e);_0x27d74e=fns[_0x32511d(0x316)](_0x27d74e,0x1)){const _0xe30a1a=fns[_0x32511d(0x303)](_0x27d74e,_0x32511d(0x2bf));while(_0x1a231b<_0x25b496[_0x32511d(0x361)]){const _0x400693=new Date(_0x25b496[_0x1a231b][_0x32511d(0x1cc)]);if(fns[_0x32511d(0x1db)](_0x400693,_0x27d74e))_0x1a231b++;else{if(_0x25b496[_0x1a231b][_0x32511d(0x1cc)][_0x32511d(0x25a)](_0xe30a1a)){const _0x311ff0=_0x25b496[_0x1a231b];if(_0x311ff0[_0x32511d(0x33e)]===_0x32511d(0x26b)&&(_0x311ff0[_0x32511d(0x2a1)][_0x32511d(0x25a)](_0x32511d(0x228))||_0x311ff0['event']['includes'](_0x32511d(0x299)))){const _0x1a7fa3=_0x311ff0[_0x32511d(0x2a1)][_0x32511d(0x1ad)](/([A-Z]+\/[A-Z]+) (sell|buy) #([\d.]+) @([\d.]+)/);if(_0x1a7fa3){const [,_0x4fbadf,_0x14b185,_0x573bc7,_0x252bbc]=_0x1a7fa3,_0x26d00a=_0x4fbadf[_0x32511d(0x25a)]('/'+config['basecoin'])?_0x4fbadf['split']('/')[0x0]:_0x4fbadf[_0x32511d(0x35f)]('/')[0x1],_0x406e78=calculatePnL(_0x4fbadf,_0x26d00a,_0x14b185,parseFloat(_0x573bc7),parseFloat(_0x252bbc),_0x1dce28);_0x53c19b+=_0x406e78;}}_0x1a231b++;}else break;}}dbPerformance[_0x32511d(0x209)]('data')[_0x32511d(0x198)]({'date':_0xe30a1a})['assign']({'pnl':_0x53c19b})[_0x32511d(0x340)]();}dbCoinResults[_0x32511d(0x36d)](_0x32511d(0x267),_0x1dce28)[_0x32511d(0x340)]();}async function updatePnL(_0x5d6eec){const _0x58b376=_0x2b499f,{symbol:_0x4918a7,coin:_0x2bc3a4,amount:_0x3f6f20,price:_0x336058,side:_0x2cb482,reverse:_0x279076}=_0x5d6eec;let _0x33ecb0=dbCoinResults[_0x58b376(0x209)]('coins')['value']();const _0x278581=calculatePnL(_0x4918a7,_0x2bc3a4,_0x2cb482,_0x3f6f20,_0x336058,_0x33ecb0);dbCoinResults[_0x58b376(0x36d)](_0x58b376(0x267),_0x33ecb0)['write']();const _0x4eaeef=getTimeStamp()[_0x58b376(0x35f)]('\x20')[0x0];let _0x4a8952=dbPerformance[_0x58b376(0x209)](_0x58b376(0x2c7))['find']({'date':_0x4eaeef})[_0x58b376(0x365)]();_0x4a8952?(_0x4a8952['pnl']+=_0x278581,dbPerformance[_0x58b376(0x209)]('data')['find']({'date':_0x4eaeef})[_0x58b376(0x36c)](_0x4a8952)[_0x58b376(0x340)]()):await storePerformance();const _0x28bf97=getNormalizedPerformance();emitPerformance(_0x28bf97);}async function validate24hChanges(){const _0x20ad5d=_0x2b499f;for(const _0x43008b of currentCoins){if(_0x43008b[_0x20ad5d(0x1b9)]!=config['basecoin']){let _0x56f700;_0x43008b[_0x20ad5d(0x286)]?_0x56f700=formatResult((0x1/(gChange[_0x43008b[_0x20ad5d(0x2ab)]]/0x64+0x1)-0x1)*0x64,0x3):_0x56f700=gChange[_0x43008b['symbol']],_0x56f700<config[_0x20ad5d(0x296)]&&(logHistory(_0x20ad5d(0x1a6),_0x43008b[_0x20ad5d(0x1b9)]+_0x20ad5d(0x1e1)+_0x56f700+'%'),logHistory('error','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses'),logHistory(_0x20ad5d(0x1a6),_0x20ad5d(0x343)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x486369,_0x4e959d){const _0x24ac01=_0x2b499f;if(!_0x486369)return!![];const _0x476f2f=_0x4e959d['split']('.'),_0x2901ec=_0x486369[_0x24ac01(0x35f)]('.');for(var _0x5c07c9=0x0;_0x5c07c9<_0x2901ec[_0x24ac01(0x361)];_0x5c07c9++){const _0x583036=~~_0x2901ec[_0x5c07c9],_0x395b31=~~_0x476f2f[_0x5c07c9];if(_0x583036<_0x395b31)return!![];if(_0x583036>_0x395b31)return![];}return![];}async function oneTimeMigration(){const _0x28c59f=_0x2b499f;let _0x5a336c=dbLogs[_0x28c59f(0x209)](_0x28c59f(0x1d3))[_0x28c59f(0x365)]();if(isOlderVersion(_0x5a336c,_0x28c59f(0x29c))){let _0xa32b25=[];const _0x584f57=dbLogs[_0x28c59f(0x209)](_0x28c59f(0x2ec))[_0x28c59f(0x365)]();_0x584f57[_0x28c59f(0x27c)](_0x19b136=>{const _0x1603d0=_0x28c59f;_0xa32b25[_0x1603d0(0x30f)]({'time':_0x19b136[_0x1603d0(0x1cc)],'type':_0x19b136[_0x1603d0(0x33e)],'event':_0x19b136['event']});}),dbLogs['get'](_0x28c59f(0x2ec))['assign'](_0xa32b25)[_0x28c59f(0x340)]();}let _0x5324c6=dbConfig['get'](_0x28c59f(0x1d3))[_0x28c59f(0x365)]();if(isOlderVersion(_0x5324c6,_0x28c59f(0x29c))){let _0x3db07d=dbConfig[_0x28c59f(0x209)](_0x28c59f(0x245))[_0x28c59f(0x198)]({'botID':botID})[_0x28c59f(0x365)]();if(_0x3db07d){let _0x3a1d8d=[];_0x3db07d[_0x28c59f(0x327)][_0x28c59f(0x27c)](_0x28828c=>{const _0x44b82=_0x28c59f;_0x3a1d8d[_0x44b82(0x30f)]({'coin':_0x28828c[_0x44b82(0x1b9)],'number':_0x28828c[_0x44b82(0x1df)],'price':_0x28828c[_0x44b82(0x309)]}),delete _0x28828c[_0x44b82(0x1df)],delete _0x28828c['startprice'];});if(_0x3a1d8d[_0x28c59f(0x361)]!==0x0)fs[_0x28c59f(0x1bc)](configbackuppath+(_0x28c59f(0x248)+botID+_0x28c59f(0x30e)),JSON[_0x28c59f(0x2f9)](_0x3a1d8d,null,0x4),function(_0x923cae){if(_0x923cae){}});const _0x15f672=(_0x1f2ef4,_0x5b5738)=>{const _0x47639b=_0x28c59f;let _0x2ad8=[];_0x5b5738[_0x47639b(0x27c)](_0xb0dfcc=>{const _0x3a42cc=_0x47639b,_0x1b1007=_0x1f2ef4['find'](_0x5a8c90=>_0x5a8c90[_0x3a42cc(0x1b9)]==_0xb0dfcc[_0x3a42cc(0x1b9)]);if(!_0x1b1007)_0x2ad8[_0x3a42cc(0x30f)](_0xb0dfcc);});let _0x1663c3=[];return _0x1f2ef4[_0x47639b(0x27c)](_0x202ef7=>{const _0x4db004=_0x47639b,_0x1f5910=_0x5b5738[_0x4db004(0x198)](_0x34e538=>_0x34e538[_0x4db004(0x1b9)]==_0x202ef7['coin']);if(!_0x1f5910||_0x1f5910[_0x4db004(0x217)]==0x0&&_0x202ef7[_0x4db004(0x217)]!=0x0)_0x1663c3[_0x4db004(0x30f)](_0x202ef7);}),{'missingDay1':_0x2ad8,'notInDay2':_0x1663c3};},_0x28d94f=dbPerformance['get'](_0x28c59f(0x2c7))[_0x28c59f(0x2f7)]()['value']();if(_0x28d94f[_0x28c59f(0x361)]>0x1){const {missingDay1:_0x3ce38d,notInDay2:_0x35f7ca}=_0x15f672(_0x3a1d8d,_0x28d94f[0x1][_0x28c59f(0x267)]);_0x3a1d8d=[..._0x3a1d8d,..._0x3ce38d],_0x35f7ca[_0x28c59f(0x27c)](_0x21b0cd=>{const _0x33683b=_0x28c59f;let _0x4e936c=_0x3a1d8d[_0x33683b(0x32a)](_0x4eedd7=>_0x4eedd7[_0x33683b(0x1b9)]==_0x21b0cd[_0x33683b(0x1b9)]);_0x4e936c!=-0x1&&_0x3a1d8d[_0x33683b(0x2ac)](_0x4e936c,0x1);});}_0x3a1d8d[_0x28c59f(0x31c)]((_0x1f7c41,_0x3a8720)=>_0x1f7c41[_0x28c59f(0x1b9)]>_0x3a8720[_0x28c59f(0x1b9)]?0x1:_0x3a8720[_0x28c59f(0x1b9)]>_0x1f7c41[_0x28c59f(0x1b9)]?-0x1:0x0);let _0x5d82d2=[{'date':_0x3db07d[_0x28c59f(0x275)],'changes':_0x3a1d8d}];_0x28d94f[_0x28c59f(0x361)]>0x2&&_0x28d94f['forEach']((_0x14c2b3,_0xc3670)=>{const _0x3021ed=_0x28c59f;if(_0xc3670>0x0&&_0xc3670<_0x28d94f['length']-0x1){const {missingDay1:_0xdda38,notInDay2:_0x1660d9}=_0x15f672(_0x28d94f[_0xc3670][_0x3021ed(0x267)],_0x28d94f[_0xc3670+0x1][_0x3021ed(0x267)]);_0x3a1d8d=[],(_0xdda38[_0x3021ed(0x361)]!=0x0||_0x1660d9[_0x3021ed(0x361)]!=0x0)&&(_0xdda38[_0x3021ed(0x361)]!=0x0&&_0x3a1d8d[_0x3021ed(0x30f)](..._0xdda38),_0x1660d9[_0x3021ed(0x361)]!=0x0&&(_0x1660d9[_0x3021ed(0x27c)](_0x25f8a6=>{const _0x181b16=_0x3021ed;_0x25f8a6['number']=-_0x25f8a6[_0x181b16(0x217)];}),_0x3a1d8d[_0x3021ed(0x30f)](..._0x1660d9)),_0x3a1d8d[_0x3021ed(0x31c)]((_0x4d1cc0,_0x27184a)=>_0x4d1cc0[_0x3021ed(0x1b9)]>_0x27184a[_0x3021ed(0x1b9)]?0x1:_0x27184a[_0x3021ed(0x1b9)]>_0x4d1cc0[_0x3021ed(0x1b9)]?-0x1:0x0),_0x5d82d2[_0x3021ed(0x30f)]({'date':_0x28d94f[_0xc3670+0x1][_0x3021ed(0x1bd)],'changes':_0x3a1d8d}));}}),dbConfig['get'](_0x28c59f(0x245))[_0x28c59f(0x198)]({'botID':botID})['assign']({..._0x3db07d,'liquidity':_0x5d82d2})[_0x28c59f(0x340)]();}}if(isOlderVersion(_0x5324c6,_0x28c59f(0x2f8))){let _0x42aabd=dbConfig[_0x28c59f(0x209)]('bot')['find']({'botID':botID})[_0x28c59f(0x365)]();if(_0x42aabd){const _0x3a2f28=_0x42aabd['exchange'],_0x54d610=_0x3a2f28?capitalize(_0x3a2f28):'Binance';dbConfig[_0x28c59f(0x209)](_0x28c59f(0x245))[_0x28c59f(0x198)]({'botID':botID})[_0x28c59f(0x36c)]({'exchange':_0x54d610})[_0x28c59f(0x340)]();}}if(isOlderVersion(_0x5324c6,_0x28c59f(0x28e))){let _0x1a8201=dbConfig[_0x28c59f(0x209)](_0x28c59f(0x245))['find']({'botID':botID})[_0x28c59f(0x365)]();if(_0x1a8201){const _0x99d7de=_0x1a8201['marketcapEnabled'],_0x9ebdd8=_0x99d7de?_0x28c59f(0x19c):![];dbConfig[_0x28c59f(0x209)]('bot')[_0x28c59f(0x198)]({'botID':botID})[_0x28c59f(0x36c)]({'marketcapEnabled':_0x9ebdd8})[_0x28c59f(0x340)]();}}if(isOlderVersion(_0x5324c6,_0x28c59f(0x2c5))){let _0x3866fb=dbConfig[_0x28c59f(0x209)]('bot')[_0x28c59f(0x198)]({'botID':botID})[_0x28c59f(0x365)]();if(_0x3866fb){const _0xd51892=_0x3866fb[_0x28c59f(0x237)],_0x4de98d=_0xd51892?_0x28c59f(0x224):![];dbConfig[_0x28c59f(0x209)](_0x28c59f(0x245))[_0x28c59f(0x198)]({'botID':botID})[_0x28c59f(0x36c)]({'autoliquidity':_0x4de98d})[_0x28c59f(0x340)]();}}let _0x5dc6ec=dbPerformance[_0x28c59f(0x209)]('version')['value']();isOlderVersion(_0x5dc6ec,_0x28c59f(0x29c))&&setStartDatePerformance();let _0x4fd66a=dbCoinResults[_0x28c59f(0x209)](_0x28c59f(0x1d3))[_0x28c59f(0x365)]();if(isOlderVersion(_0x4fd66a,_0x28c59f(0x324))){let _0x545eb0=dbCoinResults[_0x28c59f(0x209)](_0x28c59f(0x267))['value']();if(_0x545eb0[_0x28c59f(0x361)]!=0x0)pnlGenerationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x3187ad=_0x2b499f;dbConfig[_0x3187ad(0x36d)]('version',serverversion)[_0x3187ad(0x340)](),dbPerformance[_0x3187ad(0x36d)](_0x3187ad(0x1d3),serverversion)['write'](),dbLogs[_0x3187ad(0x36d)](_0x3187ad(0x1d3),serverversion)[_0x3187ad(0x340)](),dbCoinResults[_0x3187ad(0x36d)](_0x3187ad(0x1d3),serverversion)[_0x3187ad(0x340)]();}function getConfiguration(_0x4d0522){const _0x13f9b1=_0x2b499f;let _0x108ec2=dbConfig[_0x13f9b1(0x209)](_0x13f9b1(0x245))[_0x13f9b1(0x198)]({'botID':_0x4d0522})[_0x13f9b1(0x365)]();if(_0x108ec2){let _0x43a23e=![];typeof _0x108ec2[_0x13f9b1(0x29e)]=='string'&&(_0x108ec2={..._0x108ec2,'threshold':Number(_0x108ec2[_0x13f9b1(0x29e)])},_0x43a23e=!![]),_0x108ec2[_0x13f9b1(0x296)]==undefined&&(_0x108ec2={..._0x108ec2,'change24h':-0x14},_0x43a23e=!![]),_0x108ec2[_0x13f9b1(0x1c3)]==undefined&&(_0x108ec2={..._0x108ec2,'fiat':_0x13f9b1(0x329)},_0x43a23e=!![]),_0x108ec2[_0x13f9b1(0x1f9)]==undefined&&(_0x108ec2={..._0x108ec2,'onepagemode':settings[_0x13f9b1(0x1f9)]},_0x43a23e=!![]),_0x108ec2[_0x13f9b1(0x250)]==undefined&&(_0x108ec2={..._0x108ec2,'colorscheme':_0x13f9b1(0x1ae)},_0x43a23e=!![]),_0x108ec2[_0x13f9b1(0x237)]==undefined&&(_0x108ec2={..._0x108ec2,'autoliquidity':_0x13f9b1(0x224)},_0x43a23e=!![]),_0x108ec2[_0x13f9b1(0x2a7)]==undefined&&(_0x108ec2={..._0x108ec2,'marketcapApi':settings[_0x13f9b1(0x2a7)]?!![]:![]},_0x43a23e=!![]),_0x108ec2[_0x13f9b1(0x2c1)]==undefined&&(_0x108ec2={..._0x108ec2,'marketcapEnabled':![]},_0x43a23e=!![]),_0x43a23e&&(_0x108ec2={'botID':_0x108ec2[_0x13f9b1(0x30b)],'exchange':_0x108ec2[_0x13f9b1(0x272)],'apiKey':_0x108ec2[_0x13f9b1(0x362)],'apiSecret':_0x108ec2[_0x13f9b1(0x2ef)],'apiPassword':_0x108ec2['apiPassword'],'basecoin':_0x108ec2['basecoin'],'botname':_0x108ec2[_0x13f9b1(0x2aa)],'showname':_0x108ec2[_0x13f9b1(0x287)],'threshold':_0x108ec2[_0x13f9b1(0x29e)],'ordertype':_0x108ec2[_0x13f9b1(0x1d8)],'timeout':_0x108ec2[_0x13f9b1(0x20f)],'fiat':_0x108ec2[_0x13f9b1(0x1c3)],'startdate':_0x108ec2[_0x13f9b1(0x275)],'recreate':_0x108ec2[_0x13f9b1(0x31a)],'timeshift':_0x108ec2[_0x13f9b1(0x32f)],'onepagemode':_0x108ec2['onepagemode'],'headless':_0x108ec2[_0x13f9b1(0x2ea)],'cooldown':_0x108ec2['cooldown'],'change24h':_0x108ec2[_0x13f9b1(0x296)],'emojibuy':_0x108ec2[_0x13f9b1(0x1a7)],'emojisell':_0x108ec2['emojisell'],'colorscheme':_0x108ec2[_0x13f9b1(0x250)],'marketcapApi':_0x108ec2['marketcapApi'],'marketcapEnabled':_0x108ec2[_0x13f9b1(0x2c1)],'portfolio':_0x108ec2[_0x13f9b1(0x327)],'autoliquidity':_0x108ec2[_0x13f9b1(0x237)],'liquidity':_0x108ec2[_0x13f9b1(0x342)],'openOrders':_0x108ec2[_0x13f9b1(0x353)]},dbConfig[_0x13f9b1(0x209)](_0x13f9b1(0x245))['remove']()[_0x13f9b1(0x340)](),dbConfig['get'](_0x13f9b1(0x245))[_0x13f9b1(0x30f)](_0x108ec2)[_0x13f9b1(0x340)]());}else _0x108ec2={'botID':_0x4d0522,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x13f9b1(0x1c6)+_0x4d0522,'showname':![],'threshold':0x3,'ordertype':_0x13f9b1(0x2ba),'timeout':0x14,'fiat':_0x13f9b1(0x329),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x13f9b1(0x32f)],'onepagemode':settings['onepagemode'],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x13f9b1(0x1ae),'marketcapApi':settings[_0x13f9b1(0x2a7)]?!![]:![],'marketcapEnabled':![],'portfolio':[],'autoliquidity':_0x13f9b1(0x224),'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x108ec2;}function emittedConfiguration(){const _0x2f8ae6=_0x2b499f;let _0x39fd5e;if(config[_0x2f8ae6(0x362)]=='')_0x39fd5e={...config,'configstate':_0x2f8ae6(0x1cd)};else config[_0x2f8ae6(0x362)]==_0x2f8ae6(0x283)?_0x39fd5e={...config,'configstate':_0x2f8ae6(0x33f)}:(_0x39fd5e={...config,'apiKey':_0x2f8ae6(0x298),'apiSecret':_0x2f8ae6(0x298)},config[_0x2f8ae6(0x235)]&&(_0x39fd5e[_0x2f8ae6(0x235)]=_0x2f8ae6(0x298)));return _0x39fd5e[_0x2f8ae6(0x35c)]=enableFiatToggle,_0x39fd5e;}function getSettings(){const _0x3518ef=_0x2b499f;return dbSettings[_0x3518ef(0x209)]('settings')[_0x3518ef(0x365)]();}function getSecure(){const _0x1ea243=_0x2b499f;return dbSecure[_0x1ea243(0x209)]('secure')[_0x1ea243(0x365)]()||{};}function updateTimeshift(_0x325caf){const _0x4e7cae=_0x2b499f;let _0x132ebe=dbConfig[_0x4e7cae(0x209)](_0x4e7cae(0x245))[_0x4e7cae(0x198)]({'botID':botID})['value']();_0x132ebe&&dbConfig[_0x4e7cae(0x209)](_0x4e7cae(0x245))[_0x4e7cae(0x198)]({'botID':botID})[_0x4e7cae(0x36c)]({'timeshift':_0x325caf})[_0x4e7cae(0x340)](),config[_0x4e7cae(0x32f)]=_0x325caf,proxyEmit('configuration',emittedConfiguration());}function updateOnepagemode(_0x33a0e5){const _0x997dbb=_0x2b499f;let _0x149bbe=dbConfig['get'](_0x997dbb(0x245))[_0x997dbb(0x198)]({'botID':botID})[_0x997dbb(0x365)]();_0x149bbe&&dbConfig[_0x997dbb(0x209)]('bot')[_0x997dbb(0x198)]({'botID':botID})[_0x997dbb(0x36c)]({'onepagemode':_0x33a0e5})['write'](),config[_0x997dbb(0x1f9)]=_0x33a0e5,proxyEmit(_0x997dbb(0x289),emittedConfiguration());}function updateMarketcapApi(_0x214b68){const _0x58c4f0=_0x2b499f,_0x5ed2b2=_0x214b68?!![]:![];let _0xea3812=dbConfig['get'](_0x58c4f0(0x245))[_0x58c4f0(0x198)]({'botID':botID})[_0x58c4f0(0x365)]();_0xea3812&&dbConfig[_0x58c4f0(0x209)]('bot')['find']({'botID':botID})[_0x58c4f0(0x36c)]({'marketcapApi':_0x5ed2b2})[_0x58c4f0(0x340)](),config[_0x58c4f0(0x2a7)]=_0x5ed2b2,getMarketCap(),proxyEmit('configuration',emittedConfiguration());}async function storeConfiguration(_0x22f7bf){const _0x551724=_0x2b499f;logger['debug'](_0x551724(0x1b7));let _0x10d614=![];_0x22f7bf['configstate']&&(_0x22f7bf[_0x551724(0x240)]==_0x551724(0x33f)&&(_0x10d614=!![]),delete _0x22f7bf['configstate']);if(pidBalances)clearTimeout(pidBalances);setBlockTransactionDetection(!![]);let _0x327fc8=![],_0x359492=![],_0x1e608f=[];_0x22f7bf[_0x551724(0x327)][_0x551724(0x27c)](_0x4642d3=>{const _0x216b83=_0x551724;if(!_0x4642d3['excluded']&&_0x4642d3[_0x216b83(0x1b9)]!=_0x22f7bf[_0x216b83(0x1d1)])_0x1e608f[_0x216b83(0x30f)](_0x4642d3['symbol']);}),_0x1e608f['forEach'](_0x32e851=>{const _0x5572ec=_0x551724,_0x383aaa=currentCoins['find'](_0x323d2b=>_0x323d2b[_0x5572ec(0x2ab)]==_0x32e851);!_0x383aaa&&(_0x327fc8=!![]);}),currentCoins[_0x551724(0x27c)](_0x4cc9de=>{const _0x17574d=_0x551724;if(_0x4cc9de[_0x17574d(0x1b9)]!=config[_0x17574d(0x1d1)]){const _0x572ce1=_0x1e608f[_0x17574d(0x198)](_0x16d66e=>_0x16d66e==_0x4cc9de[_0x17574d(0x2ab)]);!_0x572ce1&&(_0x327fc8=!![]);}}),_0x22f7bf[_0x551724(0x327)][_0x551724(0x27c)](_0x346979=>{const _0x551df9=_0x551724,_0xb6bb14=config[_0x551df9(0x327)][_0x551df9(0x198)](_0x2374a7=>_0x2374a7[_0x551df9(0x1b9)]==_0x346979[_0x551df9(0x1b9)]);if(_0xb6bb14&&_0x346979[_0x551df9(0x36a)]!=_0xb6bb14[_0x551df9(0x36a)])_0x359492=!![];});let _0x3c3be6=dbConfig[_0x551724(0x209)](_0x551724(0x245))['find']({'botID':botID})[_0x551724(0x365)]();_0x22f7bf={..._0x22f7bf,'apiKey':decryptRSA(secure[_0x551724(0x247)],_0x22f7bf['apiKey']),'apiSecret':decryptRSA(secure[_0x551724(0x247)],_0x22f7bf[_0x551724(0x2ef)])};_0x22f7bf[_0x551724(0x235)]&&(_0x22f7bf[_0x551724(0x235)]=decryptRSA(secure[_0x551724(0x247)],_0x22f7bf[_0x551724(0x235)]));let _0x2da079=![];if(_0x3c3be6){_0x22f7bf[_0x551724(0x362)]=='************'?_0x22f7bf[_0x551724(0x362)]=config['apiKey']:_0x2da079=!![];_0x22f7bf[_0x551724(0x2ef)]=='************'?_0x22f7bf[_0x551724(0x2ef)]=config[_0x551724(0x2ef)]:_0x2da079=!![];if(_0x22f7bf[_0x551724(0x235)]=='************')_0x22f7bf[_0x551724(0x235)]=config['apiPassword'];else{if(_0x22f7bf[_0x551724(0x235)])_0x2da079=!![];}dbConfig[_0x551724(0x209)](_0x551724(0x245))['find']({'botID':botID})[_0x551724(0x36c)](_0x22f7bf)[_0x551724(0x340)]();}else dbConfig[_0x551724(0x209)]('bot')[_0x551724(0x30f)](_0x22f7bf)[_0x551724(0x340)](),_0x2da079=!![],process[_0x551724(0x351)]({'status':_0x551724(0x321),'live':_0x551724(0x2a6)},_0x227301=>{});process[_0x551724(0x351)]({'botname':_0x22f7bf['botname']},_0x3eeeb8=>{}),config={..._0x22f7bf},updateBotManager(),proxyEmit(_0x551724(0x19d)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x2da079)!_0x3c3be6||_0x10d614?await reset(!![]):getBalances();else _0x327fc8||_0x359492?await reset(![]):getBalances();setBlockTransactionDetection(![]);}async function storeHeadless(_0x4bed53){const _0x2331c5=_0x2b499f,_0x5b15b4={...config,'headless':_0x4bed53[_0x2331c5(0x2ea)]};let _0x5251e1=dbConfig[_0x2331c5(0x209)](_0x2331c5(0x245))[_0x2331c5(0x198)]({'botID':botID})[_0x2331c5(0x365)]();_0x5251e1&&dbConfig[_0x2331c5(0x209)]('bot')['find']({'botID':botID})[_0x2331c5(0x36c)](_0x5b15b4)[_0x2331c5(0x340)](),config={..._0x5b15b4},updateBotManager(),proxyEmit(_0x2331c5(0x289),emittedConfiguration());}async function storeFiat(_0x3fb359){const _0x581016=_0x2b499f,_0x2cb5f1={...config,'fiat':_0x3fb359};let _0x299a12=dbConfig[_0x581016(0x209)](_0x581016(0x245))[_0x581016(0x198)]({'botID':botID})[_0x581016(0x365)]();_0x299a12&&dbConfig['get'](_0x581016(0x245))[_0x581016(0x198)]({'botID':botID})[_0x581016(0x36c)](_0x2cb5f1)[_0x581016(0x340)](),config={..._0x2cb5f1},proxyEmit('configuration',emittedConfiguration());}function resetHistory(){const _0x5212d6=_0x2b499f;logger[_0x5212d6(0x1a0)](_0x5212d6(0x269));try{if(fs[_0x5212d6(0x1c7)](path[_0x5212d6(0x2e7)](configpath,_0x5212d6(0x257)+botID+_0x5212d6(0x2b0))))fs[_0x5212d6(0x1ea)](path[_0x5212d6(0x2e7)](configpath,_0x5212d6(0x257)+botID+_0x5212d6(0x2b0)));if(fs[_0x5212d6(0x1c7)](path[_0x5212d6(0x2e7)](configpath,_0x5212d6(0x257)+botID+_0x5212d6(0x220))))fs['unlinkSync'](path[_0x5212d6(0x2e7)](configpath,_0x5212d6(0x257)+botID+_0x5212d6(0x220)));if(fs[_0x5212d6(0x1c7)](path[_0x5212d6(0x2e7)](configpath,'bot-'+botID+'-results.json')))fs[_0x5212d6(0x1ea)](path[_0x5212d6(0x2e7)](configpath,_0x5212d6(0x257)+botID+_0x5212d6(0x227)));}catch(_0xac90e8){if(_0xac90e8)logger[_0x5212d6(0x1a0)]('Error\x20while\x20deleting\x20files:\x20',_0xac90e8);}const _0xe27384=getDate();let _0x232aec=[];currentCoins[_0x5212d6(0x27c)](_0x24aa64=>{const _0x4eead8=_0x5212d6;_0x232aec[_0x4eead8(0x30f)]({'coin':_0x24aa64[_0x4eead8(0x1b9)],'number':_0x24aa64['number'],'price':_0x24aa64[_0x4eead8(0x1ac)]});});let _0x5415c6=dbConfig[_0x5212d6(0x209)]('bot')['find']({'botID':botID})[_0x5212d6(0x365)]();_0x5415c6&&(dbConfig['get'](_0x5212d6(0x245))['find']({'botID':botID})[_0x5212d6(0x36c)]({'liquidity':[{'date':_0xe27384,'changes':_0x232aec}]})['write'](),config['liquidity']=[]),restartBot(!![]);}function noslash(_0x46192a){return _0x46192a['replace']('/','');}function updateHighestFee(_0x15eb46){const _0x13e070=_0x2b499f;if(_0x15eb46['reverse']){let _0x5cd8a9={'filled':_0x15eb46[_0x13e070(0x2fa)]*_0x15eb46[_0x13e070(0x1b5)],'amount':_0x15eb46[_0x13e070(0x2fa)]*_0x15eb46[_0x13e070(0x1b5)],'side':_0x15eb46[_0x13e070(0x32d)]==_0x13e070(0x2ca)?_0x13e070(0x291):_0x13e070(0x2ca),'price':0x1/_0x15eb46['price']};_0x15eb46={..._0x15eb46,..._0x5cd8a9};}const _0x4eb9c8=defaultFee*_0x15eb46['filled']*_0x15eb46[_0x13e070(0x1b5)];lastFees[_0x13e070(0x19e)][_0x13e070(0x361)]===0x14&&lastFees[_0x13e070(0x19e)][_0x13e070(0x2c4)](),lastFees[_0x13e070(0x19e)][_0x13e070(0x30f)](_0x4eb9c8),lastFees[_0x13e070(0x244)]=Math['max'](...lastFees[_0x13e070(0x19e)]);}async function updateNumberCoinsCcxt(_0xfba2d8){const _0x2647ec=_0x2b499f;logger[_0x2647ec(0x317)](_0x2647ec(0x328)+_0xfba2d8[_0x2647ec(0x2ab)]+_0x2647ec(0x2e9)+_0xfba2d8[_0x2647ec(0x1d9)]+_0x2647ec(0x2e9)+_0xfba2d8['filled']+'\x20/\x20'+_0xfba2d8[_0x2647ec(0x311)]+_0x2647ec(0x2e9)+_0xfba2d8['id']);let _0x5a1c48=_0xfba2d8[_0x2647ec(0x1d9)],_0x2d1bb7=![];currentCoins['forEach'](_0x1cf314=>{const _0x25a16d=_0x2647ec;_0x1cf314[_0x25a16d(0x2ab)]==_0xfba2d8['symbol']&&(_0x2d1bb7=!![]);});if(!_0x2d1bb7)return;const _0x2c3522=currentCoins[_0x2647ec(0x198)](_0x25abdc=>_0x25abdc[_0x2647ec(0x2ab)]==_0xfba2d8[_0x2647ec(0x2ab)]),_0xec66d4=_0x2c3522['coin'],_0x5acca2=_0x5b78da=>{const _0x34d3da=_0x2647ec,_0x144662=currentCoins[_0x34d3da(0x198)](_0x2fbe08=>_0x2fbe08[_0x34d3da(0x2ab)]==_0xfba2d8[_0x34d3da(0x2ab)]);if(_0x144662)_0x144662['orderstatus']=_0x5b78da;};let _0x47da3b=![];for(const _0x4fe5b1 of lastOrders){const _0x430a01=0x64,_0x11c473=0x1388;let _0x2fc12f=0x0;while(!_0x4fe5b1[_0x2647ec(0x226)]&&_0x2fc12f*_0x430a01<_0x11c473){_0x2fc12f++,await sleep(_0x430a01);}if(_0x2fc12f>0x0)logger[_0x2647ec(0x317)]('Waited\x20'+_0x2fc12f*_0x430a01/0x3e8+_0x2647ec(0x337));_0x4fe5b1['orderId']==_0xfba2d8['id']&&(_0x47da3b=!![]);}if(_0x5a1c48==_0x2647ec(0x35d)){_0x5acca2(_0x2647ec(0x35d));if(_0xfba2d8[_0x2647ec(0x2fa)]>0x0&&_0xfba2d8['filled']<_0xfba2d8['amount']){if(_0x47da3b){setBlockTransactionDetection(!![]),logger[_0x2647ec(0x317)](_0x2647ec(0x258)+_0xfba2d8['filled']+_0x2647ec(0x1ab)+_0xfba2d8['id']);const _0x173f82=await getCoins(balanceUpdateDelay,undefined,undefined,_0xec66d4);[currentCoins,currentCoinsAll]=_0x173f82,setBlockTransactionDetection(![]);}else logger[_0x2647ec(0x317)](_0x2647ec(0x258)+_0xfba2d8[_0x2647ec(0x2fa)]+')\x20unknown\x20order:\x20'+_0xfba2d8['id']),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay);}}else{if(_0x5a1c48==_0x2647ec(0x31d)){_0x5acca2(_0x2647ec(0x31d)),lastOrders=lastOrders['filter'](_0x18c860=>_0x18c860[_0x2647ec(0x2ab)]!=_0xfba2d8[_0x2647ec(0x2ab)]);const _0x1f52a7=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x1f52a7,setBlockTransactionDetection(![]),await getOpenOrders(),handleOpenOrders();}else{if(_0x5a1c48=='closed'){if(lastOrders)for(const _0x4f7a8b of lastOrders){if(_0x4f7a8b['orderId']==_0xfba2d8['id']){logger['debug']('1\x20-\x20FILLED\x20known\x20order:\x20'+_0xfba2d8['id']),_0x47da3b=!![];if(_0x4f7a8b[_0x2647ec(0x2fa)]==0x0){setBlockTransactionDetection(!![]),logger[_0x2647ec(0x317)]('2\x20-\x20handling\x20FILLED\x20order:\x20'+_0xfba2d8['id']);if(_0xfba2d8['average'])_0x4f7a8b['price']=_0xfba2d8[_0x2647ec(0x22a)];else{if(_0xfba2d8['price'])_0x4f7a8b[_0x2647ec(0x1b5)]=_0xfba2d8['price'];else{}}_0x4f7a8b[_0x2647ec(0x2fa)]=_0xfba2d8['filled'],updateHighestFee(_0x4f7a8b);const _0x5e234e=await getCoins(balanceUpdateDelay,undefined,undefined,_0xec66d4);[currentCoins,currentCoinsAll]=_0x5e234e,setBlockTransactionDetection(![]),await validateOrders(),_0x5acca2('filled'),_0x4f7a8b[_0x2647ec(0x331)]={'currency':_0xfba2d8['fee']?_0xfba2d8[_0x2647ec(0x331)][_0x2647ec(0x24b)]:null,'cost':_0xfba2d8[_0x2647ec(0x331)]?_0xfba2d8[_0x2647ec(0x331)][_0x2647ec(0x1c5)]:0x0},await updatePnL(_0x4f7a8b);}}}!_0x47da3b&&(logger[_0x2647ec(0x317)](_0x2647ec(0x31e)+_0xfba2d8['id']),_0x5acca2('filled'),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay),await updateOpenOrders(),handleOpenOrders());}}}if(lastBalances){let _0x42bd1c=JSON[_0x2647ec(0x2d8)](lastBalances['portfolio']);const _0x29b7b0=_0x42bd1c[_0x2647ec(0x198)](_0x215dde=>_0x215dde[_0x2647ec(0x2ab)]==_0xfba2d8[_0x2647ec(0x2ab)]);if(_0x29b7b0){if(_0x5a1c48==_0x2647ec(0x35d))_0x29b7b0['orderstatus']=_0x29b7b0[_0x2647ec(0x255)]==_0x2647ec(0x2fa)?_0x2647ec(0x2fa):'open';else{if(_0x5a1c48==_0x2647ec(0x31d))_0x29b7b0[_0x2647ec(0x255)]=_0x29b7b0[_0x2647ec(0x255)]==_0x2647ec(0x2fa)?_0x2647ec(0x2fa):_0x2647ec(0x31d);else _0x5a1c48==_0x2647ec(0x232)&&(_0x29b7b0[_0x2647ec(0x255)]=_0x2647ec(0x2fa));}}lastBalances={...lastBalances,'portfolio':JSON[_0x2647ec(0x2f9)](_0x42bd1c)},proxyEmit(_0x2647ec(0x1fb),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x2ceaf1=_0x2b499f;await getOpenOrders();let _0x4388f9=![];currentCoins[_0x2ceaf1(0x27c)](_0x1b621c=>{const _0x5b1890=_0x2ceaf1;_0x4388f9=allOpenOrders[_0x5b1890(0x198)](_0x579d99=>_0x579d99[_0x5b1890(0x2ab)]==_0x1b621c[_0x5b1890(0x2ab)]),_0x1b621c[_0x5b1890(0x255)]=_0x4388f9?_0x5b1890(0x35d):_0x5b1890(0x27d);});}async function fetchBalance(_0x10b132=!![]){const _0x2937c5=_0x2b499f;let _0x33be95,_0x9c02ba;try{return _0x33be95=await exchange['fetchBalance'](),_0x9c02ba=_0x33be95['total'],_0x9c02ba;}catch(_0x51729a){return!_0x10b132?handleErrorNoStop(_0x51729a,'fetchBalance()'):await handleError(_0x51729a,_0x2937c5(0x294)),![];}}async function getCoins(_0x31dac2=0x0,_0x24c6bf=!![],_0x17269f=config[_0x2b499f(0x1d1)],_0x1d9f8b){const _0x534dc7=_0x2b499f;let _0x5e210c=[],_0x472093=[],_0x75c006=[],_0x3fc783;if(_0x31dac2)await sleep(_0x31dac2);if(botPaused)return[currentCoins,currentCoinsAll];let _0x2565ae=![],_0x261861=0x0,_0x4c4e2f,_0x3dde72;_0x1d9f8b&&(_0x4c4e2f=currentCoins[_0x534dc7(0x198)](_0x61ded4=>_0x61ded4['coin']==_0x1d9f8b),_0x4c4e2f&&(_0x3dde72=_0x4c4e2f['prevnumber'],delete _0x4c4e2f[_0x534dc7(0x313)]));while(!_0x2565ae){_0x3fc783=await fetchBalance(_0x24c6bf);if(_0x3fc783){if(_0x1d9f8b){if(_0x3fc783[_0x1d9f8b]!=_0x3dde72)logger[_0x534dc7(0x317)](_0x534dc7(0x203)+_0x1d9f8b+':\x20'+_0x3fc783[_0x1d9f8b]+'\x20('+_0x3dde72+')'),_0x2565ae=!![];else{logger[_0x534dc7(0x317)](_0x534dc7(0x21a)+_0x1d9f8b+':\x20'+_0x3fc783[_0x1d9f8b]+'\x20('+_0x3dde72+')'),_0x261861++;if(_0x261861<balanceUpdateRetries)await sleep(balanceUpdateDelay);else{logger[_0x534dc7(0x317)]('Stopped\x20fetching\x20balance\x20after\x20'+_0x261861+_0x534dc7(0x222));break;}}}else break;}else return[currentCoins,currentCoinsAll];}for(const [_0x42e35b,_0x555f5a]of Object[_0x534dc7(0x335)](_0x3fc783)){_0x75c006[_0x534dc7(0x30f)](_0x42e35b);}config[_0x534dc7(0x327)][_0x534dc7(0x27c)](_0x181012=>{const _0x58a75a=_0x534dc7;!_0x75c006[_0x58a75a(0x25a)](_0x181012[_0x58a75a(0x1b9)])&&(_0x3fc783[_0x181012[_0x58a75a(0x1b9)]]=0x0);});if(_0x17269f=='')for(const [_0x4c73b7,_0x5b2b52]of Object[_0x534dc7(0x335)](_0x3fc783)){_0x5b2b52!=0x0&&_0x5e210c[_0x534dc7(0x30f)]({'coin':_0x4c73b7});}else for(const [_0x45f8cf,_0xc15fad]of Object[_0x534dc7(0x335)](_0x3fc783)){const _0x45bd98=config['portfolio'][_0x534dc7(0x198)](_0x401787=>_0x401787[_0x534dc7(0x1b9)]==_0x45f8cf),_0x4be0ce=_0x45f8cf+'/'+_0x17269f,_0x1759f5=_0x17269f+'/'+_0x45f8cf,_0x40c064=currentCoins['find'](_0x45b313=>_0x45b313['coin']==_0x45f8cf);if((_0xc15fad!=0x0||_0x45bd98)&&(allSymbols[_0x534dc7(0x25a)](_0x4be0ce)||_0x45f8cf==_0x17269f))_0x40c064?_0x5e210c['push']({..._0x40c064,'number':Math[_0x534dc7(0x2d4)](_0xc15fad+(_0x45bd98&&_0x45bd98['offset']||0x0),0x0)}):_0x5e210c['push']({'coin':_0x45f8cf,'symbol':_0x4be0ce,'reverse':![],'number':Math['max'](_0xc15fad+(_0x45bd98&&_0x45bd98[_0x534dc7(0x36a)]||0x0),0x0),'orderstatus':'none'});else{if((_0xc15fad!=0x0||_0x45bd98)&&allSymbols[_0x534dc7(0x25a)](_0x1759f5))_0x40c064?_0x5e210c['push']({..._0x40c064,'number':Math['max'](_0xc15fad+(_0x45bd98&&_0x45bd98[_0x534dc7(0x36a)]||0x0),0x0)}):_0x5e210c['push']({'coin':_0x45f8cf,'symbol':_0x1759f5,'reverse':!![],'number':Math['max'](_0xc15fad+(_0x45bd98&&_0x45bd98[_0x534dc7(0x36a)]||0x0),0x0),'orderstatus':_0x534dc7(0x27d)});else _0x45bd98&&_0x5e210c[_0x534dc7(0x30f)]({'coin':_0x45bd98[_0x534dc7(0x1b9)],'symbol':_0x45bd98['symbol'],'reverse':_0x45bd98[_0x534dc7(0x286)],'number':0x0,'orderstatus':_0x534dc7(0x27d)});}}return _0x5e210c[_0x534dc7(0x31c)]((_0x552cc1,_0x32167a)=>_0x552cc1[_0x534dc7(0x1e2)]<_0x32167a[_0x534dc7(0x1e2)]?0x1:_0x32167a['delta']<_0x552cc1[_0x534dc7(0x1e2)]?-0x1:0x0),_0x472093=cloneDeep(_0x5e210c),_0x5e210c=_0x5e210c[_0x534dc7(0x20c)](_0x39d9b5=>{const _0x528801=_0x534dc7,_0x8993cf=config[_0x528801(0x327)]['find'](_0x2bb8f5=>_0x2bb8f5[_0x528801(0x1b9)]==_0x39d9b5['coin']);return _0x8993cf&&!_0x8993cf[_0x528801(0x312)];}),[_0x5e210c,_0x472093];}async function getCoinNumber(_0x264cf3){const _0x4d7df2=_0x2b499f;let _0x58c573;try{const _0x216f3d=await exchange[_0x4d7df2(0x213)]();_0x58c573=_0x216f3d[_0x4d7df2(0x2ad)][_0x264cf3];}catch(_0x2891ff){await handleError(_0x2891ff,_0x4d7df2(0x367));}return _0x58c573;}async function getOpenOrders(){const _0x4538a3=_0x2b499f;let _0x4f6681;allOpenOrders=[];try{for(const _0x9937f1 of config[_0x4538a3(0x327)]){!_0x9937f1[_0x4538a3(0x312)]&&_0x9937f1['coin']!=config[_0x4538a3(0x1d1)]&&(_0x4f6681=await exchange['fetchOpenOrders'](_0x9937f1[_0x4538a3(0x2ab)]),_0x4f6681[_0x4538a3(0x361)]>0x0&&allOpenOrders[_0x4538a3(0x30f)](_0x4f6681[0x0]));}}catch(_0x3ad5a2){await handleError(_0x3ad5a2,_0x4538a3(0x270));}}async function handleOpenOrders(_0x4db320=0x0){const _0x185151=_0x2b499f;allOpenOrders[_0x185151(0x361)]==0x0&&lockOrders==ORDERS[_0x185151(0x1e0)]&&allOrdersPlaced&&(_0x4db320==0x0?(logger['debug'](_0x185151(0x205)),_0x4db320++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x185151(0x317)](_0x185151(0x358)),validateOrders(_0x185151(0x268))));}async function testAPI(_0x547109){const _0x570780=_0x2b499f;logger[_0x570780(0x317)]('Test\x20API');const _0x47705f=ccxt[_0x570780(0x2bc)][_0x547109[_0x570780(0x272)][_0x570780(0x306)]()],_0x1cf748=new _0x47705f({'apiKey':_0x547109['apiKey'],'secret':_0x547109[_0x570780(0x2ef)],'options':{'defaultType':'spot'}});if(_0x547109[_0x570780(0x235)])_0x1cf748[_0x570780(0x2cd)]=_0x547109[_0x570780(0x235)];try{await _0x1cf748[_0x570780(0x213)]();}catch(_0x4406d3){logger['debug']('Error\x20in\x20testAPI():\x20'+_0x4406d3[_0x570780(0x344)]());throw _0x4406d3;}}function cloneDeep(_0x2c3e5e){const _0x5b6081=_0x2b499f;return JSON[_0x5b6081(0x2d8)](JSON['stringify'](_0x2c3e5e));}async function getPortfolio(_0x15d662){const _0x4a12bc=_0x2b499f;let _0x39df1c=[],_0x2a0b5f=[],_0x23bbcc=[],_0x300b32;_0x15d662[_0x4a12bc(0x362)]=decryptRSA(secure[_0x4a12bc(0x247)],_0x15d662['apiKey']),_0x15d662[_0x4a12bc(0x2ef)]=decryptRSA(secure['privateKey'],_0x15d662[_0x4a12bc(0x2ef)]);if(_0x15d662[_0x4a12bc(0x235)])_0x15d662['apiPassword']=decryptRSA(secure[_0x4a12bc(0x247)],_0x15d662[_0x4a12bc(0x235)]);if(_0x15d662[_0x4a12bc(0x362)]!==_0x4a12bc(0x298)||_0x15d662[_0x4a12bc(0x2ef)]!==_0x4a12bc(0x298)||_0x15d662[_0x4a12bc(0x235)]&&_0x15d662[_0x4a12bc(0x235)]!==_0x4a12bc(0x298)){if(config[_0x4a12bc(0x272)]){if(_0x15d662[_0x4a12bc(0x362)]==_0x4a12bc(0x298))_0x15d662['apiKey']=config[_0x4a12bc(0x362)];if(_0x15d662[_0x4a12bc(0x2ef)]==_0x4a12bc(0x298))_0x15d662['apiSecret']=config[_0x4a12bc(0x2ef)];if(_0x15d662[_0x4a12bc(0x235)]=='************')_0x15d662['apiPassword']=config[_0x4a12bc(0x235)];}try{if(_0x15d662[_0x4a12bc(0x225)])await testAPI(_0x15d662);}catch(_0x4e5303){if(_0x4e5303['toString']()[_0x4a12bc(0x25a)](_0x4a12bc(0x1aa))){logHistory(_0x4a12bc(0x1a6),'Invalid\x20API\x20details,\x20please\x20try\x20again\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange'),logHistory(_0x4a12bc(0x1a6),_0x4a12bc(0x1f5)+_0x4e5303[_0x4a12bc(0x344)]()),proxyEmit(_0x4a12bc(0x282),![]);return;}else{if(_0x4e5303[_0x4a12bc(0x344)]()[_0x4a12bc(0x25a)]('PermissionDenied')){logHistory(_0x4a12bc(0x1a6),'Exchange\x20permission\x20denied\x20-\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange'),logHistory(_0x4a12bc(0x1a6),_0x4a12bc(0x1f5)+_0x4e5303[_0x4a12bc(0x344)]()),proxyEmit(_0x4a12bc(0x282),![]);return;}else{logHistory('error',_0x4a12bc(0x1e9)+_0x4e5303[_0x4a12bc(0x344)]()),logger[_0x4a12bc(0x317)](_0x4a12bc(0x354),_0x4e5303),proxyEmit('portfolio1',![]);return;}}}exchange?updateExchange(_0x15d662[_0x4a12bc(0x362)],_0x15d662[_0x4a12bc(0x2ef)],_0x15d662[_0x4a12bc(0x235)]):await initExchange(_0x15d662[_0x4a12bc(0x272)],_0x15d662['apiKey'],_0x15d662[_0x4a12bc(0x2ef)],_0x15d662['apiPassword']);await loadSymbols();const _0x38d151=await getCoins(0x0,![],_0x15d662['basecoin']);_0x23bbcc=cloneDeep(_0x38d151[0x1]);}else{const _0x323fda=await getCoins();_0x23bbcc=cloneDeep(_0x323fda[0x1]);}if(_0x15d662[_0x4a12bc(0x1d1)]=='')proxyEmit(_0x4a12bc(0x282),!![]),proxyEmit(_0x4a12bc(0x29b),_0x23bbcc);else{_0x23bbcc[_0x4a12bc(0x27c)](_0x42fcfc=>{const _0x24b3e5=_0x4a12bc;if(_0x42fcfc['coin']!=_0x15d662[_0x24b3e5(0x1d1)]&&allSymbols[_0x24b3e5(0x25a)](_0x42fcfc[_0x24b3e5(0x2ab)]))_0x39df1c[_0x24b3e5(0x30f)](_0x42fcfc[_0x24b3e5(0x2ab)]);});if(_0x39df1c[_0x4a12bc(0x361)]==0x0)logHistory(_0x4a12bc(0x1a6),_0x4a12bc(0x1dd));else{try{_0x2a0b5f=await getTickers(_0x39df1c);}catch(_0x2259d6){logHistory('error',_0x4a12bc(0x28f)),logger['debug']('Error\x20details:',_0x2259d6),proxyEmit(_0x4a12bc(0x282),![]);return;}_0x23bbcc[_0x4a12bc(0x27c)](_0x2926f1=>{const _0x23e0cd=_0x4a12bc;_0x2926f1[_0x23e0cd(0x1b9)]!=_0x15d662[_0x23e0cd(0x1d1)]?_0x2a0b5f[_0x2926f1['symbol']]?_0x300b32=_0x2926f1[_0x23e0cd(0x286)]?0x1/_0x2a0b5f[_0x2926f1['symbol']][_0x23e0cd(0x1ac)]:_0x2a0b5f[_0x2926f1['symbol']][_0x23e0cd(0x1ac)]:_0x300b32=0x0:_0x300b32=0x1,_0x2926f1[_0x23e0cd(0x1b5)]=formatResult(_0x300b32,0x8);}),await getMarketCap(_0x23bbcc),proxyEmit('portfolio1',!![]),proxyEmit(_0x4a12bc(0x29b),_0x23bbcc);}}}function truncateTradeAmount(_0x70819b,_0x20d2bd){const _0x54d194=_0x2b499f;let _0x12ff66=0x0;try{_0x12ff66=exchange[_0x54d194(0x1e8)](_0x70819b,_0x20d2bd);}catch(_0x26081e){}return _0x12ff66;}function checkMinimums(_0x24dc98){const _0x339ec2=_0x2b499f;let _0x4676ac=!![];const _0x2f326c=!_0x24dc98['reverse']?markets[_0x24dc98[_0x339ec2(0x2ab)]][_0x339ec2(0x300)][_0x339ec2(0x311)]['min']:markets[_0x24dc98[_0x339ec2(0x2ab)]][_0x339ec2(0x300)][_0x339ec2(0x1c5)][_0x339ec2(0x28a)],_0x480b33=!_0x24dc98[_0x339ec2(0x286)]?markets[_0x24dc98[_0x339ec2(0x2ab)]][_0x339ec2(0x300)]['cost']['min']:markets[_0x24dc98['symbol']][_0x339ec2(0x300)][_0x339ec2(0x311)][_0x339ec2(0x28a)],_0x4482ab=truncateTradeAmount(_0x24dc98[_0x339ec2(0x2ab)],_0x24dc98[_0x339ec2(0x364)]);_0x24dc98[_0x339ec2(0x364)]=_0x4482ab;if(Math[_0x339ec2(0x2c3)](_0x4482ab)<_0x2f326c)_0x4676ac=![];if(Math['abs'](_0x4482ab)*_0x24dc98['last']<_0x480b33)_0x4676ac=![];if(_0x24dc98['side']==_0x339ec2(0x2ca)){let _0x23b3d5=config[_0x339ec2(0x327)]['find'](_0x1930f1=>_0x1930f1[_0x339ec2(0x1b9)]==_0x24dc98[_0x339ec2(0x1b9)]);if(_0x23b3d5['offset']>0x0){if(Math[_0x339ec2(0x2c3)](_0x4482ab)>_0x24dc98['number']-_0x23b3d5[_0x339ec2(0x36a)])_0x4676ac=![];}else{if(Math['abs'](_0x4482ab)>_0x24dc98['number'])_0x4676ac=![];}}if(_0x24dc98['side']==_0x339ec2(0x291)){let _0x256a3b=config[_0x339ec2(0x327)][_0x339ec2(0x198)](_0x29a4a8=>_0x29a4a8[_0x339ec2(0x1b9)]==config[_0x339ec2(0x1d1)]),_0x3012dd=currentCoins['find'](_0x3ab830=>_0x3ab830[_0x339ec2(0x1b9)]==config[_0x339ec2(0x1d1)]);if(_0x256a3b[_0x339ec2(0x36a)]>0x0){if(Math[_0x339ec2(0x2c3)](_0x4482ab)*_0x24dc98[_0x339ec2(0x1ac)]>_0x3012dd['number']-_0x256a3b[_0x339ec2(0x36a)])_0x4676ac=![];}else{if(Math['abs'](_0x4482ab)*_0x24dc98[_0x339ec2(0x1ac)]>_0x3012dd[_0x339ec2(0x217)])_0x4676ac=![];}}return _0x4676ac;}async function getBalances(_0x32f778=!![]){const _0x1360f4=_0x2b499f;if(botPaused)return;let _0x542a91=0x0,_0x4c34b3;const _0x13ea41=config['threshold'];if(config[_0x1360f4(0x2ea)]&&config[_0x1360f4(0x296)]<0x0)await validate24hChanges();currentCoins[_0x1360f4(0x27c)](_0x208cca=>{const _0x3d9c14=_0x1360f4;if(_0x208cca[_0x3d9c14(0x1b9)]!=config[_0x3d9c14(0x1d1)]){let _0x293890=gTicker[noslash(_0x208cca[_0x3d9c14(0x2ab)])];_0x4c34b3=_0x208cca[_0x3d9c14(0x286)]?0x1/_0x293890:_0x293890;}else _0x4c34b3=0x1;let _0x376cf0=_0x208cca[_0x3d9c14(0x217)]*_0x4c34b3;_0x542a91+=_0x376cf0,_0x208cca[_0x3d9c14(0x1ac)]=formatResult(Number(_0x4c34b3),0x8),_0x208cca[_0x3d9c14(0x365)]=_0x376cf0;}),currentCoins[_0x1360f4(0x27c)](_0xdfa7da=>{const _0x5a85e1=_0x1360f4;let _0x206adc=config[_0x5a85e1(0x327)]['find'](_0x353f7e=>_0x353f7e[_0x5a85e1(0x1b9)]==_0xdfa7da[_0x5a85e1(0x1b9)]),_0x4ec683=Number(_0x206adc[_0x5a85e1(0x216)]),_0x5508b0=_0xdfa7da[_0x5a85e1(0x365)]/_0x542a91*0x64,_0xdae728=_0x4ec683*_0x542a91/0x64/_0xdfa7da['last']-_0xdfa7da[_0x5a85e1(0x217)];_0xdfa7da[_0x5a85e1(0x216)]=formatResult(_0x5508b0,0x3),_0xdfa7da[_0x5a85e1(0x319)]=formatResult(_0x4ec683,0x3),_0xdfa7da[_0x5a85e1(0x364)]=formatResult(_0xdae728,0x8),_0xdfa7da['side']='',_0xdfa7da[_0x5a85e1(0x2e8)]=![];if(_0xdfa7da[_0x5a85e1(0x1b9)]!=config['basecoin']){if(_0xdfa7da['distribution']>_0x4ec683)_0xdfa7da[_0x5a85e1(0x32d)]=_0x5a85e1(0x2ca),_0xdfa7da['valid']=checkMinimums(_0xdfa7da);else _0xdfa7da['distribution']<_0x4ec683&&(_0xdfa7da[_0x5a85e1(0x32d)]='buy',_0xdfa7da[_0x5a85e1(0x2e8)]=checkMinimums(_0xdfa7da));}_0xdfa7da['delta']=_0xdfa7da[_0x5a85e1(0x216)]/_0xdfa7da[_0x5a85e1(0x319)]-0x1;if(_0xdfa7da[_0x5a85e1(0x255)]==_0x5a85e1(0x2fa)||_0xdfa7da[_0x5a85e1(0x255)]==_0x5a85e1(0x31d))_0xdfa7da[_0x5a85e1(0x255)]=_0x5a85e1(0x27d);}),currentCoins[_0x1360f4(0x31c)]((_0x39a3a3,_0x142ef0)=>_0x39a3a3[_0x1360f4(0x1e2)]<_0x142ef0[_0x1360f4(0x1e2)]?0x1:_0x142ef0[_0x1360f4(0x1e2)]<_0x39a3a3[_0x1360f4(0x1e2)]?-0x1:0x0);const _0xcd511c=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0xcd511c[_0x1360f4(0x308)],'usd':_0xcd511c[_0x1360f4(0x21b)],'portfolio':JSON[_0x1360f4(0x2f9)](currentCoins),'threshold':_0x13ea41},proxyEmit(_0x1360f4(0x1fb),{'serverversion':serverversion,'balances':lastBalances});if(_0x32f778){if(config[_0x1360f4(0x2ea)])headlessMode({'portfolio':currentCoins,'threshold':_0x13ea41});else lockOrders==ORDERS[_0x1360f4(0x346)]&&!coolingDown&&notifyBalance({'portfolio':currentCoins,'threshold':_0x13ea41});}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x128ca7=getNormalizedPerformance();getStartingBalances(_0x128ca7),emitPerformance(_0x128ca7);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}function getPnL(){const _0x20771f=_0x2b499f;let _0x417ab1=dbCoinResults['get']('coins')[_0x20771f(0x365)](),_0x363e32=0x0;return Object['entries'](_0x417ab1)[_0x20771f(0x27c)](([_0x107325,_0x1e1692])=>{_0x363e32+=_0x1e1692['realizedPnL'];}),_0x363e32;}async function storePerformance(){const _0x12f342=_0x2b499f;if(!lastBalances)return;let _0x5c343b=[],_0x2466c4;const _0xe87c77=getPnL();let _0x5652ef=JSON[_0x12f342(0x2d8)](lastBalances[_0x12f342(0x327)]);_0x5652ef[_0x12f342(0x31c)]((_0x13f969,_0x4412b8)=>_0x13f969['coin']>_0x4412b8[_0x12f342(0x1b9)]?0x1:_0x4412b8[_0x12f342(0x1b9)]>_0x13f969[_0x12f342(0x1b9)]?-0x1:0x0),_0x5652ef[_0x12f342(0x27c)](_0x56d8a3=>{const _0x16db4b=_0x12f342;let _0x546650={'coin':_0x56d8a3[_0x16db4b(0x1b9)],'number':_0x56d8a3[_0x16db4b(0x217)],'price':_0x56d8a3[_0x16db4b(0x1ac)]};_0x5c343b[_0x16db4b(0x30f)](_0x546650);});const _0xfa8760=await getFiat(),_0x469020=getTimeStamp()['split']('\x20')[0x0],_0x3039e4=dbPerformance[_0x12f342(0x209)]('data')[_0x12f342(0x198)]({'date':_0x469020})[_0x12f342(0x365)]();_0x2466c4={'date':_0x469020,'eur':_0xfa8760['eur'],'usd':_0xfa8760[_0x12f342(0x21b)],'coins':_0x5c343b,'pnl':_0xe87c77},_0x3039e4?_0x2466c4[_0x12f342(0x1bd)]!=config['startdate']&&dbPerformance[_0x12f342(0x209)](_0x12f342(0x2c7))['find']({'date':_0x469020})[_0x12f342(0x36c)](_0x2466c4)[_0x12f342(0x340)]():dbPerformance[_0x12f342(0x209)](_0x12f342(0x2c7))[_0x12f342(0x30f)](_0x2466c4)[_0x12f342(0x340)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x509332=_0x2b499f;let _0x36e847=[];if(dbPerformance[_0x509332(0x1b2)](_0x509332(0x2c7))[_0x509332(0x365)]()){let _0x458e92=dbPerformance[_0x509332(0x209)](_0x509332(0x2c7))[_0x509332(0x2f7)]()['filter'](_0x2df459=>{const _0x58f0c7=_0x509332;if(_0x2df459[_0x58f0c7(0x267)][_0x58f0c7(0x361)]==0x0)return![];else return!![];})[_0x509332(0x1ed)](_0x509332(0x1bd))['value'](),_0x34c274=[...config['liquidity']];_0x34c274[_0x509332(0x31c)]((_0x342efa,_0x28a906)=>_0x342efa[_0x509332(0x1bd)]>_0x28a906[_0x509332(0x1bd)]?-0x1:_0x28a906[_0x509332(0x1bd)]>_0x342efa[_0x509332(0x1bd)]?0x1:0x0);let _0x24ea26=0x1,_0x44d5aa=[],_0x1682e2=0x0;_0x458e92['slice']()[_0x509332(0x286)]()[_0x509332(0x27c)]((_0x20870f,_0x61254b)=>{const _0x201f33=_0x509332;if(_0x34c274[_0x1682e2]){if(_0x458e92[_0x458e92[_0x201f33(0x361)]-_0x61254b]&&_0x34c274[_0x1682e2][_0x201f33(0x1bd)]==_0x458e92[_0x458e92[_0x201f33(0x361)]-_0x61254b]['date']){if(_0x61254b<_0x458e92[_0x201f33(0x361)]){let _0x123ae5=0x0,_0x29d12e=0x0;_0x458e92[_0x458e92[_0x201f33(0x361)]-_0x61254b][_0x201f33(0x267)][_0x201f33(0x27c)](_0x997f9d=>{const _0x4ce23d=_0x201f33;_0x29d12e+=_0x997f9d['number']*_0x997f9d[_0x4ce23d(0x1b5)];}),_0x34c274[_0x1682e2][_0x201f33(0x1b0)][_0x201f33(0x27c)](_0x5ccdbb=>{const _0x40e67c=_0x201f33;_0x123ae5+=_0x5ccdbb[_0x40e67c(0x217)]*_0x5ccdbb[_0x40e67c(0x1b5)];}),_0x24ea26*=_0x123ae5/(_0x29d12e-_0x123ae5)+0x1;}_0x1682e2++;}}let _0x55af36=0x0;_0x20870f[_0x201f33(0x267)][_0x201f33(0x27c)](_0x3446a1=>{const _0x3a7f5c=_0x201f33;_0x55af36+=_0x3446a1[_0x3a7f5c(0x217)]*_0x3446a1[_0x3a7f5c(0x1b5)];}),_0x44d5aa[_0x458e92[_0x201f33(0x361)]-_0x61254b-0x1]=_0x55af36*(_0x24ea26-0x1);});let _0x19ccc9=[];_0x34c274=[...config[_0x509332(0x342)]]||[];let _0x3e1473=0x0;_0x1682e2=0x0,_0x458e92['forEach']((_0x524ff0,_0x1e9069)=>{const _0x4371f4=_0x509332;if(_0x34c274[_0x1682e2]){const _0x420626=fns[_0x4371f4(0x2d8)](_0x34c274[_0x1682e2][_0x4371f4(0x1bd)],_0x4371f4(0x2bf),new Date()),_0x5993da=fns[_0x4371f4(0x2d8)](_0x524ff0[_0x4371f4(0x1bd)],_0x4371f4(0x2bf),new Date());if(fns[_0x4371f4(0x28d)](_0x420626,_0x5993da)){let _0x179171=0x0;_0x34c274[_0x1682e2][_0x4371f4(0x1b0)][_0x4371f4(0x27c)](_0x58ee8e=>{const _0xc26e76=_0x4371f4;!_0x19ccc9[_0x58ee8e[_0xc26e76(0x1b9)]]?_0x19ccc9[_0x58ee8e[_0xc26e76(0x1b9)]]=_0x58ee8e[_0xc26e76(0x217)]:(_0x179171=_0x19ccc9[_0x58ee8e['coin']],_0x19ccc9[_0x58ee8e[_0xc26e76(0x1b9)]]+=_0x58ee8e['number']);const _0x28c2de=_0x524ff0[_0xc26e76(0x267)]['find'](_0x507221=>_0x507221[_0xc26e76(0x1b9)]==_0x58ee8e['coin']);(!_0x28c2de||_0x28c2de[_0xc26e76(0x217)]==0x0)&&(_0x3e1473+=(-_0x58ee8e[_0xc26e76(0x217)]-_0x179171)*_0x58ee8e['price']);}),_0x1682e2++;}}_0x524ff0[_0x4371f4(0x267)][_0x4371f4(0x27c)]((_0x2ee98c,_0x537f68)=>{const _0x45b635=_0x4371f4;_0x19ccc9[_0x2ee98c[_0x45b635(0x1b9)]]&&(_0x2ee98c['initial']=_0x19ccc9[_0x2ee98c[_0x45b635(0x1b9)]]);}),_0x36e847[_0x4371f4(0x30f)]({'date':_0x524ff0[_0x4371f4(0x1bd)],'eur':_0x524ff0[_0x4371f4(0x308)],'usd':_0x524ff0[_0x4371f4(0x21b)],'offset':_0x44d5aa[_0x1e9069],'netoffset':_0x3e1473,'coins':_0x524ff0['coins'],'pnl':_0x524ff0[_0x4371f4(0x264)]});});}return _0x36e847;}function emitPerformance(_0x1146d0){const _0x316602=_0x2b499f;_0x1146d0[_0x316602(0x361)]!==0x0?(proxyEmit('performance',_0x1146d0),lastPerformanceEmitted=getDate()):proxyEmit('performance',[]);}function getPerf(_0x217461,_0x1ab4b8){const _0xfba767=_0x2b499f;let _0x24b720=0x0,_0x12d5a2=0x0,_0x2d2263=0x0;_0x217461[_0xfba767(0x267)][_0xfba767(0x27c)](_0x22e9cf=>{const _0x1a1f75=_0xfba767;_0x24b720+=_0x22e9cf[_0x1a1f75(0x217)]*_0x22e9cf[_0x1a1f75(0x1b5)];});_0x1ab4b8&&(_0x24b720+=_0x217461['offset']);if(config['basecoin']===_0xfba767(0x1a5)||config['basecoin']===_0xfba767(0x204)||config[_0xfba767(0x1d1)]===_0xfba767(0x253))_0x12d5a2=_0x24b720*_0x217461[_0xfba767(0x308)],_0x2d2263=_0x24b720*_0x217461[_0xfba767(0x21b)];else{if(usdBasecoins[_0xfba767(0x25a)](config[_0xfba767(0x1d1)]))_0x12d5a2=_0x24b720*_0x217461[_0xfba767(0x308)]/_0x217461[_0xfba767(0x21b)],_0x2d2263=_0x24b720;else config[_0xfba767(0x1d1)]==='EUR'&&(_0x12d5a2=_0x24b720,_0x2d2263=_0x24b720*_0x217461[_0xfba767(0x21b)]/_0x217461['eur']);}return[_0x24b720,_0x12d5a2,_0x2d2263];}function getKPIs(_0x1e7214,_0x41913b=_0x2b499f(0x2b8)){const _0x1d2053=_0x2b499f,_0x424fab=config[_0x1d2053(0x1d1)],_0x4a7e65=lastBalances,_0x7fb606=currentCoins,_0x32b668=getNormalizedPerformance(),_0x4e17ab=_0x1e7214===_0x1d2053(0x1d1)?_0x424fab:_0x1e7214==='fiat'||_0x1e7214===_0x1d2053(0x1f7)?_0x41913b:_0x1d2053(0x1e4)+_0x424fab,_0x4efd33=_0x1e7214===_0x1d2053(0x2a5)?_0x1d2053(0x34c):_0x1e7214===_0x1d2053(0x1f7)?_0x1d2053(0x34c):_0x4e17ab+_0x1d2053(0x2eb),_0x31d1ef=_0x1e7214==='net-basecoin'||_0x1e7214===_0x1d2053(0x1f7)?_0x1d2053(0x34c):_0x4e17ab+_0x1d2053(0x1d4);let _0x4f5a0f=0x0;_0x7fb606['forEach'](_0x203e79=>{const _0xec33c5=_0x1d2053;_0x4f5a0f+=_0x203e79[_0xec33c5(0x217)]*_0x203e79['last'];});if(_0x1e7214===_0x1d2053(0x1c3)||_0x1e7214===_0x1d2053(0x1f7)){if(_0x424fab==='BTC'||_0x424fab===_0x1d2053(0x204)||_0x424fab===_0x1d2053(0x253))_0x4f5a0f=_0x4f5a0f*(_0x41913b===_0x1d2053(0x2b8)?_0x4a7e65[_0x1d2053(0x308)]:_0x4a7e65[_0x1d2053(0x21b)]);else{if(usdBasecoins['includes'](_0x424fab))_0x4f5a0f=_0x4f5a0f*(_0x41913b===_0x1d2053(0x2b8)?_0x4a7e65[_0x1d2053(0x308)]/_0x4a7e65[_0x1d2053(0x21b)]:0x1);else _0x424fab===_0x1d2053(0x2b8)&&(_0x4f5a0f=_0x4f5a0f*(_0x41913b===_0x1d2053(0x2b8)?0x1:_0x4a7e65[_0x1d2053(0x21b)]/_0x4a7e65[_0x1d2053(0x308)]));}}let _0x299db8;if(_0x4f5a0f!==0x0){if(_0x1e7214===_0x1d2053(0x1d1))_0x299db8=(_0x4f5a0f/startingBalances[_0x1d2053(0x1d1)]-0x1)*0x64;else{if(_0x41913b===_0x1d2053(0x2b8))_0x299db8=(_0x4f5a0f/startingBalances[_0x1d2053(0x308)]-0x1)*0x64;else _0x299db8=(_0x4f5a0f/startingBalances[_0x1d2053(0x21b)]-0x1)*0x64;}let _0x10296b=0x0;if(startingBalances[_0x1d2053(0x267)])_0x7fb606[_0x1d2053(0x27c)](_0x3edbd7=>{const _0x4bfb19=_0x1d2053;let _0x134622=startingBalances['coins'][_0x4bfb19(0x198)](_0x42b538=>_0x42b538[_0x4bfb19(0x1b9)]===_0x3edbd7[_0x4bfb19(0x1b9)]);if(_0x134622&&_0x134622[_0x4bfb19(0x1b9)]&&_0x3edbd7['number']!==0x0)_0x10296b+=_0x134622[_0x4bfb19(0x217)]*_0x3edbd7[_0x4bfb19(0x1ac)];});let _0x49f77c=0x0;if(_0x32b668[_0x1d2053(0x361)]!==0x0){let _0x75f211=_0x32b668[_0x32b668['length']-0x1];_0x49f77c=_0x75f211['netoffset'];}_0x10296b-=_0x49f77c;_0x1e7214===_0x1d2053(0x2a5)&&(_0x299db8=(_0x4f5a0f-_0x10296b)/startingBalances[_0x1d2053(0x1d1)]*0x64,_0x4f5a0f=_0x4f5a0f-_0x10296b);if(_0x1e7214===_0x1d2053(0x1f7)){let _0x1f04f9=_0x41913b===_0x1d2053(0x2b8)?startingBalances[_0x1d2053(0x308)]:startingBalances[_0x1d2053(0x21b)];if(_0x424fab===_0x1d2053(0x1a5)||_0x424fab===_0x1d2053(0x204)||_0x424fab===_0x1d2053(0x253))_0x10296b=_0x41913b===_0x1d2053(0x2b8)?_0x10296b*_0x4a7e65['eur']:_0x10296b*_0x4a7e65['usd'];else{if(usdBasecoins['includes'](_0x424fab))_0x10296b=_0x41913b===_0x1d2053(0x2b8)?_0x10296b*_0x4a7e65[_0x1d2053(0x308)]/_0x4a7e65[_0x1d2053(0x21b)]:_0x10296b;else _0x424fab===_0x1d2053(0x2b8)&&(_0x10296b=_0x41913b===_0x1d2053(0x2b8)?_0x10296b:_0x10296b*_0x4a7e65[_0x1d2053(0x21b)]/_0x4a7e65[_0x1d2053(0x308)]);}_0x299db8=(_0x4f5a0f-_0x10296b)/_0x1f04f9*0x64,_0x4f5a0f=_0x4f5a0f-_0x10296b;}if(_0x299db8){if(_0x299db8<0x64)_0x299db8=_0x299db8['toFixed'](0x2);else{if(_0x299db8<0x3e8)_0x299db8=_0x299db8[_0x1d2053(0x32e)](0x1);else _0x299db8=_0x299db8[_0x1d2053(0x32e)](0x0);}}else _0x299db8=Number('0')[_0x1d2053(0x32e)](0x2);if(_0x4f5a0f){if(Math[_0x1d2053(0x2c3)](_0x4f5a0f)<0.000001)_0x4f5a0f=_0x4f5a0f['toFixed'](0x2);else{if(Math[_0x1d2053(0x2c3)](_0x4f5a0f)<0.1)_0x4f5a0f=_0x4f5a0f[_0x1d2053(0x32e)](0x6);else{if(Math['abs'](_0x4f5a0f)<0x1)_0x4f5a0f=_0x4f5a0f[_0x1d2053(0x32e)](0x5);else{if(Math[_0x1d2053(0x2c3)](_0x4f5a0f)<0xa)_0x4f5a0f=_0x4f5a0f['toFixed'](0x4);else{if(Math[_0x1d2053(0x2c3)](_0x4f5a0f)<0x64)_0x4f5a0f=_0x4f5a0f[_0x1d2053(0x32e)](0x3);else{if(Math[_0x1d2053(0x2c3)](_0x4f5a0f)<0x3e8)_0x4f5a0f=_0x4f5a0f[_0x1d2053(0x32e)](0x2);else _0x4f5a0f=_0x4f5a0f['toFixed'](0x2);}}}}}}else _0x4f5a0f=Number('0')[_0x1d2053(0x32e)](0x2);}else _0x299db8=Number('0')[_0x1d2053(0x32e)](0x2);return{'value':_0x4f5a0f,'change':_0x299db8,'leftTxt':_0x4efd33,'rightTxt':_0x31d1ef};}async function getStartingBalances(_0x5a4d7d,_0x46beac=!![]){const _0x862f11=_0x2b499f;if(_0x5a4d7d['length']!==0x0){const [_0x4016eb,_0x47a641,_0x43d7cd]=getPerf(_0x5a4d7d[0x0],!![]);let _0x52fc78=[];config[_0x862f11(0x327)]['forEach'](_0x258bfe=>{const _0x143624=_0x862f11;let _0x3cf354=0x0,_0x5acfba;config[_0x143624(0x342)][_0x143624(0x27c)](_0x5e6ea7=>{const _0x5d1a72=_0x143624;let _0xeaeecd=_0x5e6ea7[_0x5d1a72(0x1b0)]['find'](_0x3dd06d=>_0x3dd06d[_0x5d1a72(0x1b9)]==_0x258bfe[_0x5d1a72(0x1b9)]);if(_0xeaeecd){_0x3cf354+=_0xeaeecd['number'];if(!_0x5acfba)_0x5acfba=_0xeaeecd['price'];}}),_0x52fc78[_0x143624(0x30f)]({'coin':_0x258bfe[_0x143624(0x1b9)],'number':_0x3cf354,'initialprice':_0x5acfba});});const _0x1acff5={'basecoin':_0x4016eb,'eur':_0x47a641,'usd':_0x43d7cd,'coins':_0x52fc78};if(_0x46beac)proxyEmit(_0x862f11(0x25c),_0x1acff5);startingBalances=_0x1acff5;}}function headlessMode(_0xd3e180){const _0x184a73=_0x2b499f;let _0x3008b0=_0xd3e180[_0x184a73(0x327)],_0x1d69b2=_0xd3e180['threshold'],_0x44408e=[];for(let _0x407353 of _0x3008b0){if(_0x407353[_0x184a73(0x1b9)]!=config[_0x184a73(0x1d1)]){if(_0x407353['delta']>=_0x1d69b2/0x64){if(_0x407353['valid'])_0x44408e[_0x184a73(0x30f)](_0x407353);}else{if(_0x407353[_0x184a73(0x1e2)]<=-_0x1d69b2/0x64){if(_0x407353[_0x184a73(0x2e8)])_0x44408e[_0x184a73(0x30f)](_0x407353);}}}}_0x44408e['length']>0x0&&placeOrder(_0x44408e);}function notifyBalance(_0x270e61){const _0x52563b=_0x2b499f;let _0x5cdb41=_0x270e61['portfolio'],_0x4ef102=_0x270e61[_0x52563b(0x29e)],_0x22d6cc=[];for(let _0x71f4c1 of _0x5cdb41){if(_0x71f4c1[_0x52563b(0x1b9)]!=config[_0x52563b(0x1d1)]){if(_0x71f4c1[_0x52563b(0x1e2)]>=_0x4ef102/0x64){if(_0x71f4c1[_0x52563b(0x2e8)])_0x22d6cc[_0x52563b(0x30f)](_0x71f4c1);}else{if(_0x71f4c1['delta']<=-_0x4ef102/0x64){if(_0x71f4c1['valid'])_0x22d6cc[_0x52563b(0x30f)](_0x71f4c1);}}}}if(_0x22d6cc['length']>0x0){let _0x214394=_0x22d6cc['map'](_0x5be6e3=>_0x5be6e3['coin']);_0x214394['sort']();let _0x4ff590=_0x214394[_0x52563b(0x2e7)](',\x20');if(!lastCoinsToBalance)logHistory(_0x52563b(0x277),'Manual\x20balancing\x20required');lastCoinsToBalance=_0x4ff590;}}function symbolToCoin(_0x4a95f0){const _0x47084a=_0x2b499f;let _0x3d1cfc;if(_0x4a95f0[_0x47084a(0x25a)]('/'+config[_0x47084a(0x1d1)]))_0x3d1cfc=_0x4a95f0[_0x47084a(0x2c2)]('/'+config[_0x47084a(0x1d1)],'');if(_0x4a95f0[_0x47084a(0x25a)](config[_0x47084a(0x1d1)]+'/'))_0x3d1cfc=_0x4a95f0['replace'](config['basecoin']+'/','');return _0x3d1cfc;}function setLockOrders(_0x15ce6d){const _0xce12f7=_0x2b499f;lockOrders=_0x15ce6d,logger[_0xce12f7(0x317)]('Set\x20lock\x20orders\x20to:\x20'+Object[_0xce12f7(0x1b4)](ORDERS)[lockOrders]);}async function unlockOrders(_0x73da5c=![]){const _0x2a11eb=_0x2b499f;if(allOrdersPlaced&&lockOrders==ORDERS[_0x2a11eb(0x1e0)]){setLockOrders(ORDERS[_0x2a11eb(0x1ec)]);if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);if(_0x73da5c){const _0x25f6a2=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x25f6a2,setBlockTransactionDetection(![]);}validateOrdersState=_0x2a11eb(0x1cd),persistOpenOrders([]),setLockOrders(ORDERS[_0x2a11eb(0x346)]);}}async function validateOrders(_0x597e0a){const _0x2ff251=_0x2b499f;if(_0x597e0a)validateOrdersState=_0x597e0a;logger[_0x2ff251(0x317)](_0x2ff251(0x2d6)+validateOrdersState+_0x2ff251(0x1d7)+Object['keys'](ORDERS)[lockOrders]);let _0x2b0fa5=[],_0x3d8f36=config[_0x2ff251(0x1d8)]==_0x2ff251(0x2ba)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x2ff251(0x20f)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x2ff251(0x1e0)])return;logger[_0x2ff251(0x317)]('2\x20-\x20Validate\x20orders:\x20'+validateOrdersState);for(let _0x451fb7=lastOrders['length']-0x1;_0x451fb7>=0x0;_0x451fb7--){let _0x418072=lastOrders[_0x451fb7],_0x423293=![];_0x418072[_0x2ff251(0x2fa)]>0x0&&(_0x423293=!![]),_0x2b0fa5[_0x2ff251(0x30f)](_0x423293),_0x423293&&config[_0x2ff251(0x1d8)]!=_0x2ff251(0x2ba)&&logHistory(_0x2ff251(0x26b),_0x2ff251(0x350)+_0x418072['symbol']+'\x20'+_0x418072[_0x2ff251(0x32d)]+'\x20#'+formatResult(_0x418072[_0x2ff251(0x2fa)],0x8)+'\x20@'+formatResult(_0x418072[_0x2ff251(0x1b5)],0x8)),_0x423293&&lastOrders['splice'](_0x451fb7,0x1);}persistOpenOrders(lastOrders);const _0xbac129=coolingDown?'balancing\x20resumes\x20when\x20cooldown\x20ends':'balancing\x20resumed';if(validateOrdersState==_0x2ff251(0x1cd)){validateOrdersState=_0x2ff251(0x2df);if(_0x2b0fa5['includes'](![])){}else await unlockOrders();}else{if(validateOrdersState=='ongoing'){if(_0x2b0fa5[_0x2ff251(0x25a)](![])){}else await unlockOrders();}else{if(validateOrdersState=='final')_0x2b0fa5[_0x2ff251(0x25a)](![])&&(config[_0x2ff251(0x1d8)]=='market'?logHistory('success',_0x2ff251(0x211)+Math[_0x2ff251(0x2a3)](_0x3d8f36*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0xbac129):(await cancelOrders(),logHistory(_0x2ff251(0x208),_0x2ff251(0x2bb)+Math['round'](_0x3d8f36*validateOrderInterval/0xea60)+_0x2ff251(0x1f3)+_0xbac129))),await unlockOrders(!![]);else{if(validateOrdersState==_0x2ff251(0x268)){if(config[_0x2ff251(0x1d8)]!='market')logHistory('success',_0x2ff251(0x22c)+_0xbac129);await unlockOrders(!![]);}}}}}async function cancelOrders(){const _0x2f3c2c=_0x2b499f;lastOrders[_0x2f3c2c(0x27c)](async _0x317ee1=>{const _0x447dd4=_0x2f3c2c;try{const _0x57b80d=await exchange['cancelOrder'](_0x317ee1[_0x447dd4(0x226)],_0x317ee1[_0x447dd4(0x2ab)]);}catch(_0x5e0f0f){if(_0x5e0f0f[_0x447dd4(0x344)]()[_0x447dd4(0x25a)]('OrderNotFound')){}else await handleError(_0x5e0f0f,_0x447dd4(0x214));}});}async function initCoinResults(_0x27cebf){const _0x55df64=_0x2b499f;_0x27cebf?logger[_0x55df64(0x317)](_0x55df64(0x239)+_0x27cebf):logger[_0x55df64(0x317)](_0x55df64(0x1de)),config[_0x55df64(0x327)]['forEach'](_0xfd8f67=>{const _0x4c2987=_0x55df64;if(!_0xfd8f67[_0x4c2987(0x312)]&&_0xfd8f67['coin']!=config[_0x4c2987(0x1d1)]){const _0x1602c7=currentCoins['find'](_0x1c5f39=>_0x1c5f39[_0x4c2987(0x1b9)]==_0xfd8f67[_0x4c2987(0x1b9)]),_0x38ea21=gTicker[noslash(_0xfd8f67[_0x4c2987(0x2ab)])];let _0x175aec=_0x1602c7?_0x1602c7['number']:null,_0x3a6d4f=_0xfd8f67[_0x4c2987(0x286)]?0x1/_0x38ea21:_0x38ea21,_0x340029;config[_0x4c2987(0x342)]['forEach'](_0x1e8724=>{const _0x74c46d=_0x4c2987;!_0x340029&&(_0x340029=_0x1e8724[_0x74c46d(0x1b0)][_0x74c46d(0x198)](_0x7b9168=>_0x7b9168[_0x74c46d(0x1b9)]==_0xfd8f67['coin']),_0x340029&&(_0x175aec=_0x340029[_0x74c46d(0x217)],_0x3a6d4f=_0x340029[_0x74c46d(0x1b5)]));});let _0x1cd99e=dbCoinResults[_0x4c2987(0x209)](_0x4c2987(0x267))['find']({'coin':_0xfd8f67[_0x4c2987(0x1b9)]})[_0x4c2987(0x365)]();if(!_0x1cd99e){const _0x18dde9={'coin':_0xfd8f67[_0x4c2987(0x1b9)],'number':_0x175aec,'breakeven':_0x3a6d4f,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x4c2987(0x209)](_0x4c2987(0x267))[_0x4c2987(0x30f)](_0x18dde9)[_0x4c2987(0x340)]();}else{if(_0x27cebf&&_0xfd8f67['coin']==_0x27cebf){const _0x328211={'coin':_0xfd8f67['coin'],'number':_0x175aec,'breakeven':_0x3a6d4f,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get'](_0x4c2987(0x267))[_0x4c2987(0x198)]({'coin':_0xfd8f67[_0x4c2987(0x1b9)]})[_0x4c2987(0x36c)](_0x328211)[_0x4c2987(0x340)]();}}}});}async function updateCoinResults(_0x4254f9,_0x50a6b6=![]){const _0x58212d=_0x2b499f;let _0x18877f,_0x5ed4da,_0x5d0296,_0x572bad,_0x546e0b,_0x216bd3,_0x1ba29b=dbCoinResults[_0x58212d(0x209)]('coins')[_0x58212d(0x198)]({'coin':_0x4254f9[_0x58212d(0x1b9)]})[_0x58212d(0x365)](),_0x5dd6a3=![];_0x1ba29b&&Object[_0x58212d(0x335)](_0x1ba29b)['forEach'](([_0x4f8b72,_0x464990])=>{if(_0x464990==null)_0x5dd6a3=!![];});(!_0x1ba29b||_0x5dd6a3)&&(await initCoinResults(_0x4254f9[_0x58212d(0x1b9)]),_0x1ba29b=dbCoinResults[_0x58212d(0x209)](_0x58212d(0x267))[_0x58212d(0x198)]({'coin':_0x4254f9['coin']})[_0x58212d(0x365)]());_0x4254f9[_0x58212d(0x286)]&&(_0x216bd3={'filled':_0x4254f9[_0x58212d(0x2fa)]*_0x4254f9[_0x58212d(0x1b5)],'amount':_0x4254f9[_0x58212d(0x2fa)]*_0x4254f9[_0x58212d(0x1b5)],'side':_0x4254f9[_0x58212d(0x32d)]==_0x58212d(0x2ca)?_0x58212d(0x291):_0x58212d(0x2ca),'price':0x1/_0x4254f9[_0x58212d(0x1b5)]},_0x4254f9={..._0x4254f9,..._0x216bd3});_0x50a6b6?_0x5ed4da=_0x4254f9[_0x58212d(0x32d)]==_0x58212d(0x291)?_0x1ba29b[_0x58212d(0x217)]+_0x4254f9[_0x58212d(0x2fa)]:_0x1ba29b[_0x58212d(0x217)]-_0x4254f9[_0x58212d(0x2fa)]:_0x5ed4da=await getCoinNumber(_0x4254f9[_0x58212d(0x1b9)]);if(_0x4254f9['fee']&&_0x4254f9[_0x58212d(0x331)][_0x58212d(0x24b)]==config['basecoin'])_0x18877f=Number(_0x4254f9['fee']['cost']);else{if(_0x4254f9[_0x58212d(0x331)]&&_0x4254f9[_0x58212d(0x331)][_0x58212d(0x24b)]==_0x58212d(0x202)&&!_0x50a6b6&&config[_0x58212d(0x1d1)]!=_0x58212d(0x253))_0x18877f=Number(_0x4254f9[_0x58212d(0x331)]['cost'])*gTicker[_0x58212d(0x202)+config[_0x58212d(0x1d1)]];else _0x18877f=defaultFee*_0x4254f9[_0x58212d(0x2fa)]*_0x4254f9[_0x58212d(0x1b5)];}_0x4254f9[_0x58212d(0x32d)]==_0x58212d(0x291)?(_0x5d0296=_0x5ed4da!=0x0?(_0x1ba29b['breakeven']*_0x1ba29b[_0x58212d(0x217)]+_0x4254f9[_0x58212d(0x1b5)]*(_0x5ed4da-_0x1ba29b[_0x58212d(0x217)])+_0x18877f)/_0x5ed4da:0x0,_0x572bad=_0x1ba29b[_0x58212d(0x33b)]):(_0x5d0296=_0x5ed4da!=0x0?(_0x1ba29b[_0x58212d(0x2d5)]*_0x1ba29b[_0x58212d(0x217)]-_0x4254f9[_0x58212d(0x1b5)]*(_0x1ba29b['number']-_0x5ed4da)+_0x18877f)/_0x5ed4da:0x0,_0x572bad=_0x1ba29b['realized']+(_0x4254f9['price']-_0x1ba29b['breakeven'])*_0x4254f9['filled']);_0x546e0b=(_0x4254f9[_0x58212d(0x1b5)]-_0x5d0296-_0x18877f/_0x4254f9[_0x58212d(0x2fa)])*_0x5ed4da;let _0x1831a4={'coin':_0x4254f9['coin'],'number':_0x5ed4da,'breakeven':formatResult(_0x5d0296,0x8),'realized':formatResult(_0x572bad,0x8),'unrealized':formatResult(_0x546e0b,0x8),'fees':formatResult(_0x1ba29b[_0x58212d(0x35b)]+_0x18877f,0x8),'sells':_0x4254f9[_0x58212d(0x32d)]==_0x58212d(0x2ca)?_0x1ba29b['sells']+0x1:_0x1ba29b[_0x58212d(0x2c6)],'buys':_0x4254f9[_0x58212d(0x32d)]=='buy'?_0x1ba29b[_0x58212d(0x260)]+0x1:_0x1ba29b[_0x58212d(0x260)]};dbCoinResults[_0x58212d(0x209)](_0x58212d(0x267))[_0x58212d(0x198)]({'coin':_0x4254f9[_0x58212d(0x1b9)]})[_0x58212d(0x36c)](_0x1831a4)[_0x58212d(0x340)]();if(!_0x50a6b6){if(_0x4254f9[_0x58212d(0x331)]&&_0x4254f9[_0x58212d(0x331)][_0x58212d(0x24b)]=='BNB'){const _0x4b1c83=currentCoins[_0x58212d(0x198)](_0x8c20bb=>_0x8c20bb[_0x58212d(0x1b9)]==_0x58212d(0x202));if(_0x4b1c83){let _0x41b093=dbCoinResults[_0x58212d(0x209)](_0x58212d(0x267))[_0x58212d(0x198)]({'coin':_0x58212d(0x202)})['value']();_0x1831a4={..._0x41b093,'number':_0x4b1c83[_0x58212d(0x217)]},dbCoinResults[_0x58212d(0x209)](_0x58212d(0x267))[_0x58212d(0x198)]({'coin':_0x58212d(0x202)})[_0x58212d(0x36c)](_0x1831a4)['write']();}}}}async function placeOrder(_0x22be23){const _0x23805f=_0x2b499f,_0x366c2b=config[_0x23805f(0x1d8)]==_0x23805f(0x2ba)?_0x23805f(0x2ba):_0x23805f(0x27e);if(lockOrders==ORDERS['UNLOCKED']&&!coolingDown){setLockOrders(ORDERS[_0x23805f(0x1e0)]);while(transactionDetectionOngoing){await sleep(0x64);}logger[_0x23805f(0x317)](_0x23805f(0x236)+_0x22be23['map'](_0xd662b8=>_0xd662b8[_0x23805f(0x1b9)])[_0x23805f(0x2e7)](',\x20')),lastCoinsToBalance='',allOrdersPlaced=![],validateOrdersState=_0x23805f(0x1cd);let _0xbeed66=![];lastOrders=[];const _0x41ec01=config[_0x23805f(0x29e)];for(const _0x28a5e3 of _0x22be23){let _0x2feaa9,_0x24ee0d,_0x8f2905,_0x5e484e,_0x10bdfa,_0x2010ba=_0x28a5e3['symbol'];logger[_0x23805f(0x317)](_0x23805f(0x2d9)+_0x28a5e3['coin']+'\x20'+_0x28a5e3[_0x23805f(0x217)]+'\x20'+_0x28a5e3[_0x23805f(0x1ac)]+'\x20'+_0x28a5e3[_0x23805f(0x216)]+'%\x20'+_0x28a5e3[_0x23805f(0x319)]+'%\x20'+(0x64*_0x28a5e3[_0x23805f(0x1e2)])[_0x23805f(0x32e)](0x2)+_0x23805f(0x271)+_0x41ec01[_0x23805f(0x32e)](0x2)+'%)');const _0x12a8de=currentCoins['find'](_0x3f47d6=>_0x3f47d6[_0x23805f(0x1b9)]==_0x28a5e3[_0x23805f(0x1b9)]);_0x12a8de&&(_0x12a8de['prevnumber']=_0x28a5e3[_0x23805f(0x217)]);try{const _0x1b8f1d=await exchange[_0x23805f(0x1f2)](_0x2010ba);_0x2feaa9=_0x28a5e3[_0x23805f(0x286)]?0x1/_0x28a5e3[_0x23805f(0x1ac)]:_0x28a5e3[_0x23805f(0x1ac)],_0x24ee0d=_0x1b8f1d['bid'],_0x8f2905=_0x1b8f1d[_0x23805f(0x22e)];_0x28a5e3[_0x23805f(0x286)]?(_0x5e484e=_0x28a5e3['side']==_0x23805f(0x291)?'sell':'buy',_0x10bdfa=Math['abs'](_0x28a5e3[_0x23805f(0x364)])/_0x2feaa9):(_0x5e484e=_0x28a5e3['side'],_0x10bdfa=Math['abs'](_0x28a5e3[_0x23805f(0x364)]));_0x366c2b==_0x23805f(0x27e)&&(config[_0x23805f(0x1d8)]==_0x23805f(0x1d6)&&(_0x2feaa9=_0x5e484e==_0x23805f(0x291)?_0x24ee0d:_0x8f2905),config['ordertype']==_0x23805f(0x233)&&(_0x2feaa9=_0x5e484e==_0x23805f(0x291)?_0x8f2905:_0x24ee0d));_0x10bdfa=formatResult(_0x10bdfa,0x8),_0x2feaa9=formatResult(_0x2feaa9,0x8);const _0x880902=_0x5e484e==_0x23805f(0x2ca)?config[_0x23805f(0x1a3)]?String[_0x23805f(0x201)]('0x'+config[_0x23805f(0x1a3)])+'\x20':'':config[_0x23805f(0x1a7)]?String[_0x23805f(0x201)]('0x'+config[_0x23805f(0x1a7)])+'\x20':'',_0x56e665=_0x366c2b=='market'?'Market':config[_0x23805f(0x1d8)]==_0x23805f(0x1d6)?_0x23805f(0x20a):_0x23805f(0x29d),_0x527690=(Math[_0x23805f(0x2f0)](Math[_0x23805f(0x243)]()*0x35a4e900)+0x5f5e100)[_0x23805f(0x344)]();lastOrders[_0x23805f(0x30f)]({'customId':_0x527690,'symbol':_0x2010ba,'coin':_0x28a5e3[_0x23805f(0x1b9)],'amount':_0x10bdfa,'price':_0x2feaa9,'side':_0x5e484e,'reverse':_0x28a5e3[_0x23805f(0x286)],'filled':0x0});let _0x4a6b2c;_0x366c2b==_0x23805f(0x2ba)?_0x5e484e==_0x23805f(0x291)&&[_0x23805f(0x23b),_0x23805f(0x1e6),_0x23805f(0x352),'Huobi',_0x23805f(0x23e)]['includes'](config['exchange'])?_0x4a6b2c=await exchange[_0x23805f(0x279)](_0x2010ba,_0x366c2b,_0x5e484e,_0x10bdfa,_0x2feaa9):_0x4a6b2c=await exchange[_0x23805f(0x279)](_0x2010ba,_0x366c2b,_0x5e484e,_0x10bdfa,undefined):_0x4a6b2c=await exchange['createOrder'](_0x2010ba,_0x366c2b,_0x5e484e,_0x10bdfa,_0x2feaa9);const _0x3b1aa7=lastOrders[_0x23805f(0x361)]-0x1;if(_0x3b1aa7>=0x0&&lastOrders[_0x3b1aa7]['customId']==_0x527690){lastOrders[_0x3b1aa7]['orderId']=_0x4a6b2c['id'];if(_0x4a6b2c['amount'])lastOrders[_0x3b1aa7][_0x23805f(0x311)]=_0x4a6b2c[_0x23805f(0x311)];if(_0x4a6b2c[_0x23805f(0x1b5)])lastOrders[_0x3b1aa7][_0x23805f(0x1b5)]=_0x4a6b2c[_0x23805f(0x1b5)];lastOrders[_0x3b1aa7][_0x23805f(0x331)]=_0x4a6b2c[_0x23805f(0x331)];}if(_0x4a6b2c[_0x23805f(0x311)])_0x10bdfa=_0x4a6b2c[_0x23805f(0x311)];if(_0x4a6b2c[_0x23805f(0x1b5)])_0x2feaa9=_0x4a6b2c['price'];if(_0x366c2b==_0x23805f(0x2ba))logHistory(_0x23805f(0x26b),''+_0x880902+_0x56e665+'\x20order:\x20'+_0x2010ba+'\x20'+_0x5e484e+'\x20#'+formatResult(_0x10bdfa,0x8)+'\x20@'+formatResult(_0x2feaa9,0x8));else logHistory('order',''+_0x880902+_0x56e665+_0x23805f(0x212)+_0x2010ba+'\x20'+_0x5e484e+'\x20#'+formatResult(_0x10bdfa,0x8)+'\x20@'+formatResult(_0x2feaa9,0x8));logger[_0x23805f(0x317)](_0x23805f(0x2c8)+_0x4a6b2c['id']+_0x23805f(0x2e0)+_0x527690);if(config[_0x23805f(0x1c8)]!=0x0){let _0x4f3181=null;if(cooldownTracker[_0x23805f(0x361)]==config[_0x23805f(0x1c8)]-0x1)_0x4f3181=cooldownTracker['shift']();const _0x199d49=getTimeStamp();cooldownTracker[_0x23805f(0x30f)](_0x199d49);if(_0x4f3181){const _0x47db48=fns[_0x23805f(0x261)](new Date(_0x199d49),new Date(_0x4f3181));if(_0x47db48<cooldownInterval){logHistory(_0x23805f(0x1a6),'Executed\x20'+config[_0x23805f(0x1c8)]+_0x23805f(0x21d)+cooldownInterval/0x3c+_0x23805f(0x251)+cooldownPeriod/(0xe10*0x3e8)+_0x23805f(0x273)),coolingDown=!![];break;}}}}catch(_0x51c4db){if(_0x51c4db[_0x23805f(0x344)]()[_0x23805f(0x25a)]('MIN_NOTIONAL'))lastOrders=lastOrders[_0x23805f(0x20c)](_0x4eb955=>_0x4eb955[_0x23805f(0x2ab)]!=_0x2010ba),logHistory(_0x23805f(0x1a6),_0x23805f(0x2e2)+_0x2010ba),_0xbeed66=!![];else{if(_0x51c4db[_0x23805f(0x344)]()[_0x23805f(0x25a)](_0x23805f(0x280)))lastOrders=lastOrders['filter'](_0x33f91a=>_0x33f91a['symbol']!=_0x2010ba),logHistory(_0x23805f(0x1a6),_0x23805f(0x197)+_0x2010ba),_0xbeed66=!![];else{if(_0x51c4db[_0x23805f(0x344)]()[_0x23805f(0x25a)]('InvalidOrder'))lastOrders=lastOrders[_0x23805f(0x20c)](_0x247700=>_0x247700[_0x23805f(0x2ab)]!=_0x2010ba),logHistory('error',_0x23805f(0x25f)+_0x2010ba),logger['debug'](_0x51c4db),_0xbeed66=!![];else _0x51c4db['toString']()[_0x23805f(0x25a)](_0x23805f(0x288))?(lastOrders=lastOrders[_0x23805f(0x20c)](_0x55e917=>_0x55e917['symbol']!=_0x2010ba),logHistory(_0x23805f(0x1a6),_0x23805f(0x2e2)+_0x2010ba),_0xbeed66=!![]):(lastOrders=lastOrders[_0x23805f(0x20c)](_0x335bcc=>_0x335bcc[_0x23805f(0x2ab)]!=_0x2010ba),await handleError(_0x51c4db,_0x23805f(0x360),_0x2010ba));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders['length']>0x0){const _0x468f09=config['ordertype']==_0x23805f(0x2ba)?validateOrderTimeout*0x3c*0x3e8:config[_0x23805f(0x20f)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x468f09);}else unlockOrders();_0xbeed66&&config[_0x23805f(0x2ea)]&&(logHistory(_0x23805f(0x1a6),_0x23805f(0x314)+pauseBotMsg),await pauseBot(pauseBotInterval)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory('success',_0x23805f(0x1c4)));}else{if(coolingDown)!config[_0x23805f(0x2ea)]&&logHistory('error',_0x23805f(0x341));else lockOrders!=ORDERS[_0x23805f(0x346)]&&(!config[_0x23805f(0x2ea)]&&(config[_0x23805f(0x1d8)]==_0x23805f(0x2ba)?logHistory('error',_0x23805f(0x21e)):logHistory(_0x23805f(0x1a6),_0x23805f(0x2d3))));}}function persistOpenOrders(_0x233648){const _0x137c5b=_0x2b499f,_0x410624={...config,'openOrders':_0x233648};let _0x31d61e=dbConfig[_0x137c5b(0x209)](_0x137c5b(0x245))[_0x137c5b(0x198)]({'botID':botID})[_0x137c5b(0x365)]();_0x31d61e&&dbConfig[_0x137c5b(0x209)]('bot')[_0x137c5b(0x198)]({'botID':botID})[_0x137c5b(0x36c)](_0x410624)['write']();}function restoreOrders(){const _0x34bf4e=_0x2b499f;let _0xaa8428;config[_0x34bf4e(0x353)]&&allOpenOrders['forEach'](_0x1ebd22=>{const _0x1dc4a8=_0x34bf4e,_0x4eb1eb=config[_0x1dc4a8(0x353)][_0x1dc4a8(0x198)](_0x579235=>_0x579235[_0x1dc4a8(0x226)]==_0x1ebd22['id']);_0x4eb1eb&&(lastOrders['push'](_0x4eb1eb),_0xaa8428=_0x1ebd22['timestamp']);});if(lastOrders[_0x34bf4e(0x361)]>0x0){setLockOrders(ORDERS[_0x34bf4e(0x1e0)]),validateOrdersState=_0x34bf4e(0x2df),allOrdersPlaced=!![];const _0x4edecf=new Date()[_0x34bf4e(0x1c9)](),_0x135a5e=config[_0x34bf4e(0x1d8)]==_0x34bf4e(0x2ba)?validateOrderTimeout*0x3c*0x3e8:config[_0x34bf4e(0x20f)]*0x3c*0x3e8;if(_0xaa8428+_0x135a5e>_0x4edecf){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x5e8c30=_0x34bf4e;validateOrders(_0x5e8c30(0x2ae));},_0xaa8428+_0x135a5e-_0x4edecf);}else validateOrders(_0x34bf4e(0x2ae));}}async function sendMetricsTelegram(){const _0xa794f=_0x2b499f;if(!coinsLoaded){process[_0xa794f(0x351)]({'telegrammsg':_0xa794f(0x25e)},_0x3728c4=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x41cd38='';if(config[_0xa794f(0x287)])_0x41cd38=_0xa794f(0x27b)+config[_0xa794f(0x2aa)]+'\x20metrics:</b>\x20\x0a\x0a';else _0x41cd38=_0xa794f(0x1d5)+botID+_0xa794f(0x1b1);const _0x362a7f=getKPIs(_0xa794f(0x1d1)),_0x4d8f8e=getKPIs(_0xa794f(0x1c3),config[_0xa794f(0x1c3)]),_0x125397=getKPIs(_0xa794f(0x2a5)),_0x25e027=getKPIs(_0xa794f(0x1f7),config[_0xa794f(0x1c3)]);_0x41cd38+='<pre>',_0x41cd38+=_0x362a7f[_0xa794f(0x2b5)]+_0xa794f(0x1e7)+_0x362a7f[_0xa794f(0x365)]+'\x0a',_0x41cd38+=_0x362a7f[_0xa794f(0x24c)]+':\x20'+_0x362a7f['change']+'%\x0a',_0x41cd38+=_0x4d8f8e[_0xa794f(0x2b5)]+'\x20:\x20'+_0x4d8f8e[_0xa794f(0x365)]+'\x0a',_0x41cd38+=_0x4d8f8e[_0xa794f(0x24c)]+':\x20'+_0x4d8f8e['change']+'%\x0a',_0x41cd38+=_0x125397[_0xa794f(0x2b5)]+':\x20'+_0x125397[_0xa794f(0x365)]+'\x20('+config[_0xa794f(0x1d1)]+')\x0a',_0x41cd38+=_0x125397[_0xa794f(0x24c)]+':\x20'+_0x125397[_0xa794f(0x242)]+_0xa794f(0x271)+config['basecoin']+')\x0a',_0x41cd38+=_0x25e027['leftTxt']+':\x20'+_0x25e027[_0xa794f(0x365)]+'\x20('+config['fiat']+')\x0a',_0x41cd38+=_0x25e027[_0xa794f(0x24c)]+':\x20'+_0x25e027['change']+_0xa794f(0x271)+config[_0xa794f(0x1c3)]+')\x0a',_0x41cd38+=_0xa794f(0x24d),process[_0xa794f(0x351)]({'telegrammsg':_0x41cd38},_0x4d4976=>{});}async function sendPortfolioTelegram(){const _0x11aa17=_0x2b499f;if(!coinsLoaded||!currentCoins[0x0]['distribution']){process['send']({'telegrammsg':'Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute'},_0x2b1530=>{});return;}let _0x3ec7f9='';if(config['showname'])_0x3ec7f9='<b>'+config[_0x11aa17(0x2aa)]+_0x11aa17(0x1a2);else _0x3ec7f9=_0x11aa17(0x1d5)+botID+_0x11aa17(0x1a2);_0x3ec7f9+=_0x11aa17(0x30c),_0x3ec7f9+=_0x11aa17(0x2e4),_0x3ec7f9+=_0x11aa17(0x2b9),_0x3ec7f9+=_0x11aa17(0x2e4),currentCoins['forEach'](_0x29e782=>{const _0x2e287c=_0x11aa17;_0x3ec7f9+=_0x29e782['coin'][_0x2e287c(0x31f)](0x7)+'|\x20'+formatPad(_0x29e782[_0x2e287c(0x216)],0x2,0x6)+'|\x20'+formatPad(_0x29e782['target'],0x2,0x6)+'|\x20'+formatPad(_0x29e782[_0x2e287c(0x1e2)]*0x64,0x2,0x6)+'\x0a';}),_0x3ec7f9+=_0x11aa17(0x24d),process[_0x11aa17(0x351)]({'telegrammsg':_0x3ec7f9},_0x490a16=>{});}function formatPad(_0x445143,_0x34277f,_0xbdaeed){const _0x5e5529=formatResultString(_0x445143,_0x34277f);return _0x5e5529?_0x5e5529['padStart'](_0xbdaeed):''['padStart'](_0xbdaeed);}function logHistory(_0x23da40,_0x224ec6,_0x241622=''){const _0x438901=_0x2b499f;logger['full'](''+_0x224ec6);let _0x10c869={'time':getTimeStamp(),'type':_0x23da40,'event':_0x224ec6};dbLogs[_0x438901(0x209)](_0x438901(0x2ec))[_0x438901(0x30f)](_0x10c869)[_0x438901(0x340)]();if(_0x241622=='')_0x241622=_0x224ec6;proxyEmit(_0x438901(0x2a1),{'log':_0x10c869,'summary':_0x241622}),process['send']({'telegram':{..._0x10c869,'botname':config[_0x438901(0x2aa)],'showname':config[_0x438901(0x287)]}},_0x45474b=>{});}function emitHistory(_0x3d25c9={}){const _0x3f6ff2=_0x2b499f;Object[_0x3f6ff2(0x1b4)](_0x3d25c9)[_0x3f6ff2(0x361)]==0x0&&(_0x3d25c9={'type':[_0x3f6ff2(0x26b),'event'],'event':'','page':0x1});if(_0x3d25c9[_0x3f6ff2(0x33e)][_0x3f6ff2(0x25a)](_0x3f6ff2(0x2a1)))_0x3d25c9[_0x3f6ff2(0x33e)][_0x3f6ff2(0x2ac)](_0x3d25c9['type'][_0x3f6ff2(0x2a2)](_0x3f6ff2(0x2a1)),0x1,'error','warning','success');if(dbLogs['has'](_0x3f6ff2(0x2ec))[_0x3f6ff2(0x365)]()){let _0x1e3699=dbLogs['get'](_0x3f6ff2(0x2ec))[_0x3f6ff2(0x20c)](_0x38d259=>{const _0x31d922=_0x3f6ff2;if(_0x3d25c9['type'][_0x31d922(0x361)]==0x0)return![];else return _0x3d25c9[_0x31d922(0x33e)][_0x31d922(0x25a)](_0x38d259[_0x31d922(0x33e)]);})['filter'](_0x3906ef=>{const _0x43f888=_0x3f6ff2;if(_0x3d25c9[_0x43f888(0x2a1)]=='')return!![];else return _0x3906ef[_0x43f888(0x2a1)]['toLowerCase']()[_0x43f888(0x25a)](_0x3d25c9['event'][_0x43f888(0x306)]());})[_0x3f6ff2(0x1ed)](_0x3f6ff2(0x1cc)),_0x214c7e=_0x1e3699[_0x3f6ff2(0x365)]()['length'];_0x1e3699=_0x1e3699['reverse']()['slice']((_0x3d25c9[_0x3f6ff2(0x20d)]-0x1)*logPageSize,_0x3d25c9[_0x3f6ff2(0x20d)]*logPageSize-0x1)[_0x3f6ff2(0x286)]()[_0x3f6ff2(0x365)](),proxyEmit('event-history',{'logs':_0x1e3699,'total':_0x214c7e});}else proxyEmit('event-history',{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x5e50bf){const _0x2941ea=_0x2b499f;if(dbLogs[_0x2941ea(0x1b2)](_0x2941ea(0x2ec))[_0x2941ea(0x365)]()){const _0x2c3fa2=dbLogs['get']('logs')[_0x2941ea(0x1ed)]('time')[_0x2941ea(0x20c)](_0x4ce3c7=>{const _0x3a2fbc=_0x2941ea;return _0x4ce3c7['type']==_0x3a2fbc(0x26b);})[_0x2941ea(0x365)]();dbLogs[_0x2941ea(0x209)](_0x2941ea(0x2ec))['remove']()['write'](),dbLogs[_0x2941ea(0x209)](_0x2941ea(0x2ec))[_0x2941ea(0x36c)](_0x2c3fa2)[_0x2941ea(0x340)](),emitHistory(_0x5e50bf);}}async function pauseBot(_0x56c401=pauseBotIntervalShort,_0x3c861c,_0x592ac8,_0x78c09d=![]){const _0x51d613=_0x2b499f,_0x570254=new Date()[_0x51d613(0x1c9)]();if(!lastErrorShown||_0x570254-lastErrorShown>=_0x56c401){lastErrorShown=_0x570254;if(!lastBotPause)lastBotPause=_0x570254,consecutivePauses=0x1;else{if(_0x570254-lastBotPause-_0x56c401<0x5a*0x3e8){consecutivePauses++;if(consecutivePauses>maxPauseRetries){if(_0x78c09d){logHistory('error',_0x3c861c+_0x51d613(0x2e1)),await killBot();return;}else logHistory(_0x51d613(0x1a6),_0x3c861c+pauseBotMsg),_0x56c401=pauseBotInterval;}}else consecutivePauses=0x1;lastBotPause=_0x570254;}_0x592ac8?logger[_0x51d613(0x317)]('('+consecutivePauses+')\x20'+_0x3c861c+_0x51d613(0x1d2),_0x592ac8):logger[_0x51d613(0x317)]('('+consecutivePauses+')\x20'+_0x3c861c);if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);await sleep(_0x56c401),botPaused=![],_0x56c401==pauseBotIntervalShort?resumeBot(!![]):resumeBot(![]);}}}async function killBot(){const _0x1efb04=_0x2b499f;botPaused=!![],await sleep(0x3e8),process[_0x1efb04(0x351)]({'stop':_0x1efb04(0x1ba)},_0x3d6f77=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x5a4736,_0x2cf4f8,_0x533158=![]){const _0x18d21c=_0x2b499f;if(botPaused)return;let _0x49f003;const _0x2fbb80=config['exchange']||'Exchange';if(_0x2cf4f8)logger[_0x18d21c(0x317)](_0x18d21c(0x284)+_0x2cf4f8);const _0x1beec4=()=>{const _0xa73c44=_0x18d21c;loading[_0xa73c44(0x1a6)]=!![],emitLoadingProgress();};if(_0x5a4736[_0x18d21c(0x344)]()[_0x18d21c(0x25a)](_0x18d21c(0x19a)))logHistory(_0x18d21c(0x1a6),_0x2fbb80+_0x18d21c(0x315)),_0x1beec4();else{if(_0x5a4736[_0x18d21c(0x344)]()[_0x18d21c(0x25a)](_0x18d21c(0x266)))logHistory(_0x18d21c(0x1a6),_0x2fbb80+_0x18d21c(0x2f1)),_0x1beec4();else{if(_0x5a4736[_0x18d21c(0x344)]()['includes'](_0x18d21c(0x1aa)))config[_0x18d21c(0x235)]?_0x49f003=_0x2fbb80+'\x20API\x20key,\x20secret\x20or\x20password\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange':_0x49f003=_0x2fbb80+'\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange',logHistory(_0x18d21c(0x1a6),_0x49f003+_0x18d21c(0x293)),_0x1beec4();else{if(_0x5a4736[_0x18d21c(0x344)]()[_0x18d21c(0x25a)](_0x18d21c(0x320)))logHistory(_0x18d21c(0x1a6),_0x2fbb80+_0x18d21c(0x262)),_0x1beec4();else{if(!_0x533158)await handleError(_0x5a4736,null);}}}}}async function handleError(_0x25aa77,_0x176093,_0x4a7c68=''){const _0x184d51=_0x2b499f;if(botPaused)return;let _0x166631;const _0x119f9e=config[_0x184d51(0x272)]||_0x184d51(0x2f2);if(_0x176093)logger['debug']('Exception\x20thrown\x20in\x20'+_0x176093);if(_0x25aa77[_0x184d51(0x344)]()[_0x184d51(0x25a)](_0x184d51(0x20e)))_0x166631=_0x119f9e+_0x184d51(0x1f8),await pauseBot(undefined,_0x166631,_0x25aa77);else{if(_0x25aa77[_0x184d51(0x344)]()[_0x184d51(0x25a)](_0x184d51(0x1ee)))_0x166631=_0x119f9e+_0x184d51(0x322),await pauseBot(undefined,_0x166631,_0x25aa77);else{if(_0x25aa77[_0x184d51(0x344)]()[_0x184d51(0x25a)](_0x184d51(0x366))||_0x25aa77['toString']()['includes'](_0x184d51(0x246)))_0x166631=_0x119f9e+_0x184d51(0x339),await pauseBot(undefined,_0x166631,_0x25aa77[_0x184d51(0x344)]());else{if(_0x25aa77['toString']()[_0x184d51(0x25a)](_0x184d51(0x249)))_0x166631=_0x119f9e+_0x184d51(0x20b),await pauseBot(undefined,_0x166631,_0x25aa77[_0x184d51(0x344)]());else{if(_0x25aa77[_0x184d51(0x344)]()['includes']('NetworkError:\x20connection\x20closed\x20by\x20remote\x20server'))_0x166631=_0x119f9e+_0x184d51(0x2e5),await pauseBot(undefined,_0x166631,_0x25aa77[_0x184d51(0x344)]());else{if(_0x25aa77[_0x184d51(0x344)]()[_0x184d51(0x306)]()['includes']('timestamp')||_0x25aa77[_0x184d51(0x344)]()['toLowerCase']()[_0x184d51(0x25a)]('request-time'))_0x166631='Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)',await pauseBot(undefined,_0x166631,_0x25aa77[_0x184d51(0x344)]());else{if(_0x25aa77[_0x184d51(0x344)]()[_0x184d51(0x25a)](_0x184d51(0x274)))_0x166631=_0x119f9e+_0x184d51(0x2e6),await pauseBot(undefined,_0x166631,_0x25aa77[_0x184d51(0x344)]());else{if(_0x25aa77 instanceof ccxt[_0x184d51(0x2dd)])_0x166631=_0x119f9e+'\x20network\x20error:\x20'+_0x25aa77['toString'](),logger['debug'](_0x184d51(0x2dc),_0x25aa77),await pauseBot(undefined,_0x166631,_0x25aa77);else{if(_0x25aa77[_0x184d51(0x344)]()[_0x184d51(0x25a)](_0x184d51(0x19a)))logHistory(_0x184d51(0x1a6),_0x119f9e+_0x184d51(0x26f)),logHistory(_0x184d51(0x1a6),_0x184d51(0x229)),await killBot();else{if(_0x25aa77['toString']()[_0x184d51(0x25a)](_0x184d51(0x266)))logHistory(_0x184d51(0x1a6),_0x119f9e+_0x184d51(0x2af)),logHistory(_0x184d51(0x1a6),_0x184d51(0x229)),await killBot();else{if(_0x25aa77[_0x184d51(0x344)]()[_0x184d51(0x25a)](_0x184d51(0x1aa))&&_0x25aa77[_0x184d51(0x344)]()[_0x184d51(0x25a)](_0x184d51(0x2ee)))_0x166631=_0x119f9e+_0x184d51(0x254),await pauseBot(undefined,_0x166631,_0x25aa77,!![]);else{if(_0x25aa77[_0x184d51(0x344)]()['includes']('AuthenticationError'))config[_0x184d51(0x235)]?_0x166631=_0x119f9e+_0x184d51(0x369):_0x166631=_0x119f9e+_0x184d51(0x22d),logHistory('error',_0x166631),logHistory('error','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)'),await killBot();else{if(_0x25aa77[_0x184d51(0x344)]()['includes'](_0x184d51(0x320)))logHistory(_0x184d51(0x1a6),_0x119f9e+_0x184d51(0x27f)),logHistory('error',_0x184d51(0x229)),await killBot();else{if(_0x25aa77['toString']()[_0x184d51(0x25a)](_0x184d51(0x2b3)))logHistory(_0x184d51(0x1a6),_0x184d51(0x2fe)+_0x4a7c68),logger['debug']('Error\x20details:',_0x25aa77);else{if(_0x25aa77 instanceof ccxt[_0x184d51(0x2b7)]){_0x166631=_0x119f9e+'\x20exchange\x20error:\x20'+_0x25aa77['toString']();if(_0x4a7c68)_0x166631+=_0x184d51(0x218)+_0x4a7c68;await pauseBot(undefined,_0x166631,_0x25aa77);}else{_0x166631=_0x184d51(0x22f)+_0x25aa77[_0x184d51(0x344)]();if(_0x4a7c68)_0x166631+=_0x184d51(0x218)+_0x4a7c68;await pauseBot(undefined,_0x166631);}}}}}}}}}}}}}}}}function decryptRSA(_0x4741ff,_0x281623){const _0x1e66a9=_0x2b499f,_0x2fafce=forge[_0x1e66a9(0x238)][_0x1e66a9(0x323)](_0x4741ff),_0x5a5fa4=_0x2fafce[_0x1e66a9(0x1a8)](forge[_0x1e66a9(0x2d1)][_0x1e66a9(0x24a)](_0x281623),_0x1e66a9(0x1f1),{'md':forge['md'][_0x1e66a9(0x23d)][_0x1e66a9(0x26c)](),'mgf1':{'md':forge['md'][_0x1e66a9(0x23d)][_0x1e66a9(0x26c)]()}});return _0x5a5fa4;}async function withRetry(_0x30a24c,_0x396f63){const _0x1dbbcf=_0x2b499f;let _0x1d74e1=![],_0x3491cc=0x0,_0x52da20,_0x465e04;while(_0x3491cc<maxRetries){try{_0x52da20=await _0x396f63();break;}catch(_0x187f43){_0x465e04=_0x187f43,!_0x1d74e1?(_0x1d74e1=!![],logger['debug']('RETRY\x20-\x20Error\x20in\x20'+_0x30a24c+':',_0x187f43[_0x1dbbcf(0x344)]())):await sleep(retryInterval);}_0x3491cc++;}if(_0x3491cc==0x0)return _0x52da20;if(_0x3491cc>=maxRetries)throw _0x465e04;else return logger[_0x1dbbcf(0x317)]('RETRY\x20-\x20Problem\x20resolved\x20after\x20'+_0x3491cc+_0x1dbbcf(0x222)),_0x52da20;}function formatResult(_0x4606cb,_0x3a67b0){const _0x1ffcf4=_0x2b499f;return parseFloat(_0x4606cb[_0x1ffcf4(0x32e)](_0x3a67b0));}function formatResultTruncate(_0x1999a1,_0x2f8ad1){const _0x306afa=_0x2b499f;let _0x254df2=formatResultString(_0x1999a1,0xa),_0x1927ea=_0x254df2[_0x306afa(0x2a2)]('.');return _0x1927ea!=-0x1&&(_0x254df2=_0x254df2[_0x306afa(0x1be)](0x0,_0x1927ea+_0x2f8ad1+0x1)),Number(_0x254df2);}function formatResultString(_0x118e5f,_0x5962ec){const _0x3a1dd1=_0x2b499f;let _0x404743;if(!(''+_0x118e5f)[_0x3a1dd1(0x25a)]('e'))_0x404743=+(Math[_0x3a1dd1(0x2a3)](_0x118e5f+'e+'+_0x5962ec)+'e-'+_0x5962ec);else{let _0x40400c=(''+_0x118e5f)['split']('e'),_0x4dca65='';+_0x40400c[0x1]+_0x5962ec>0x0&&(_0x4dca65='+'),_0x404743=+(Math[_0x3a1dd1(0x2a3)](+_0x40400c[0x0]+'e'+_0x4dca65+(+_0x40400c[0x1]+_0x5962ec))+'e-'+_0x5962ec);}return Number(_0x404743)['toFixed'](_0x5962ec);}function getServerTime(){const _0x146735=_0x2b499f,_0x4d3ad7=new Date();return _0x4d3ad7[_0x146735(0x310)]()+'/'+(_0x4d3ad7[_0x146735(0x2cf)]()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x4d3ad7[_0x146735(0x1cf)]()[_0x146735(0x344)]()['padStart'](0x2,'0')+'\x20'+_0x4d3ad7['getHours']()['toString']()[_0x146735(0x199)](0x2,'0')+':'+_0x4d3ad7['getMinutes']()[_0x146735(0x344)]()[_0x146735(0x199)](0x2,'0')+':'+_0x4d3ad7[_0x146735(0x1fe)]()[_0x146735(0x344)]()[_0x146735(0x199)](0x2,'0');}function getTimeStamp(){const _0x166d7a=_0x2b499f,_0x138f9f=shiftedTime();return _0x138f9f['getFullYear']()+'/'+(_0x138f9f['getMonth']()+0x1)[_0x166d7a(0x344)]()[_0x166d7a(0x199)](0x2,'0')+'/'+_0x138f9f[_0x166d7a(0x1cf)]()['toString']()[_0x166d7a(0x199)](0x2,'0')+'\x20'+_0x138f9f[_0x166d7a(0x355)]()[_0x166d7a(0x344)]()[_0x166d7a(0x199)](0x2,'0')+':'+_0x138f9f[_0x166d7a(0x27a)]()[_0x166d7a(0x344)]()[_0x166d7a(0x199)](0x2,'0')+':'+_0x138f9f['getSeconds']()[_0x166d7a(0x344)]()[_0x166d7a(0x199)](0x2,'0');}function getDate(){const _0x2b9ed8=_0x2b499f,_0x2665d6=shiftedTime();return _0x2665d6[_0x2b9ed8(0x310)]()+'/'+(_0x2665d6[_0x2b9ed8(0x2cf)]()+0x1)['toString']()[_0x2b9ed8(0x199)](0x2,'0')+'/'+_0x2665d6[_0x2b9ed8(0x1cf)]()[_0x2b9ed8(0x344)]()[_0x2b9ed8(0x199)](0x2,'0');}function getHour(){const _0x14c759=_0x2b499f,_0x77859f=shiftedTime();return _0x77859f['getHours']()[_0x14c759(0x344)]()[_0x14c759(0x199)](0x2,'0');}function sleep(_0x5f27ed){return new Promise(_0x190dc9=>setTimeout(_0x190dc9,_0x5f27ed));}function shiftedTime(){const _0x3b101b=_0x2b499f,_0x103b23=new Date();let _0x1dfdb8=_0x103b23;if(config&&config[_0x3b101b(0x32f)]!==0x0)_0x1dfdb8=fns[_0x3b101b(0x256)](_0x103b23,{'hours':config['timeshift']});return _0x1dfdb8;}function timer(_0x37a3d9){const _0x5d44c7=_0x2b499f,_0x1c246c=new Date();!lasttime?console[_0x5d44c7(0x23a)](getTimeStamp()+_0x5d44c7(0x290),_0x37a3d9,_0x1c246c):console[_0x5d44c7(0x23a)](getTimeStamp()+_0x5d44c7(0x290),_0x37a3d9,(_0x1c246c-lasttime)/0x3e8),lasttime=_0x1c246c;}