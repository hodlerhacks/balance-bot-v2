const _0x3d847a=_0x4351;(function(_0x5407c8,_0xea7224){const _0x7c120d=_0x4351,_0x516f60=_0x5407c8();while(!![]){try{const _0x21b107=-parseInt(_0x7c120d(0x264))/0x1*(parseInt(_0x7c120d(0x25f))/0x2)+parseInt(_0x7c120d(0x2f3))/0x3*(-parseInt(_0x7c120d(0x2f6))/0x4)+-parseInt(_0x7c120d(0x2bf))/0x5+-parseInt(_0x7c120d(0x361))/0x6*(-parseInt(_0x7c120d(0x346))/0x7)+parseInt(_0x7c120d(0x265))/0x8+-parseInt(_0x7c120d(0x2d7))/0x9*(parseInt(_0x7c120d(0x2ae))/0xa)+parseInt(_0x7c120d(0x226))/0xb*(parseInt(_0x7c120d(0x25c))/0xc);if(_0x21b107===_0xea7224)break;else _0x516f60['push'](_0x516f60['shift']());}catch(_0x5e6c13){_0x516f60['push'](_0x516f60['shift']());}}}(_0x44e1,0xa8ad4));const _0x1d8ec2=function(){let _0x40e575=!![];return function(_0x24b514,_0x1542a3){const _0x5bceec=_0x40e575?function(){const _0x371cab=_0x4351;if(_0x1542a3){const _0x48f3ff=_0x1542a3[_0x371cab(0x1c0)](_0x24b514,arguments);return _0x1542a3=null,_0x48f3ff;}}:function(){};return _0x40e575=![],_0x5bceec;};}(),_0x149a28=_0x1d8ec2(this,function(){const _0x329dfd=_0x4351;return _0x149a28[_0x329dfd(0x31b)]()[_0x329dfd(0x1d4)](_0x329dfd(0x1fa))['toString']()[_0x329dfd(0x1e3)](_0x149a28)['search'](_0x329dfd(0x1fa));});_0x149a28();'use strict';const ccxt=require(_0x3d847a(0x2c8)),low=require(_0x3d847a(0x1f1)),FileSync=require(_0x3d847a(0x207)),fs=require('fs'),fns=require(_0x3d847a(0x27f)),forge=require(_0x3d847a(0x2cc)),util=require('util'),argv=require(_0x3d847a(0x236))(process[_0x3d847a(0x2ed)][_0x3d847a(0x2e5)](0x2))[_0x3d847a(0x2ed)],path=require(_0x3d847a(0x1d6)),axios=require(_0x3d847a(0x211));let exchange,gTicker={},gChange={};const usdBasecoins=['USD',_0x3d847a(0x2bd),'TUSD',_0x3d847a(0x1d3),_0x3d847a(0x237),_0x3d847a(0x22d)],excludedExchanges=[_0x3d847a(0x2ab)],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x3d847a(0x22c)]({'LOCKED':0x0,'UNLOCKING':0x1,'UNLOCKED':0x2});let lockOrders=ORDERS[_0x3d847a(0x2c9)],validateOrdersState,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotIntervalShort=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0x3d847a(0x241)+pauseBotInterval/0xea60+_0x3d847a(0x268),maxPauseRetries=0x6,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,watchTransactionsInterval=0x3c*0x3e8,schedulerInterval=0x3c*0x3c*0x3e8,retryInterval=0x3e8,maxRetries=0x5,logPageSize=0x14,defaultFee=0.003;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidOrdersInitialTimeout,pidOrdersTimeout,botPaused=![],transactionDetectionOngoing=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x5dc,balanceUpdateRetries=0x5;let enableFiatToggle;const serverversion=require(_0x3d847a(0x289))[_0x3d847a(0x2cd)],environment=require(_0x3d847a(0x289))[_0x3d847a(0x30d)]||'production',botID=process[_0x3d847a(0x2ed)][0x2]||'001',pattern=/^[0-9]{3}$/;!pattern[_0x3d847a(0x356)](botID)&&(console[_0x3d847a(0x2bc)](_0x3d847a(0x2f5)+botID+',\x20must\x20be\x20a\x203\x20digit\x20number'),killBot());const userID=process[_0x3d847a(0x2ed)][0x3]||'',configpath=userID?_0x3d847a(0x1ff)+userID+'/':_0x3d847a(0x1ff),logspath=userID?_0x3d847a(0x2d4)+userID+'/':_0x3d847a(0x2d4),loggerfile=fs[_0x3d847a(0x1a2)](logspath+_0x3d847a(0x257),{'flags':'a'});!fs[_0x3d847a(0x31d)](configpath)&&fs[_0x3d847a(0x230)](configpath);!fs[_0x3d847a(0x31d)](logspath)&&fs[_0x3d847a(0x230)](logspath);const configfile=configpath+_0x3d847a(0x27d)+botID+_0x3d847a(0x1af),logfile=configpath+_0x3d847a(0x27d)+botID+_0x3d847a(0x274),performancefile=configpath+_0x3d847a(0x27d)+botID+_0x3d847a(0x2e6),coinresultsfile=configpath+_0x3d847a(0x27d)+botID+'-results.json',settingsfile=configpath+_0x3d847a(0x2be),securefile=configpath+_0x3d847a(0x1b0),configbackuppath=configpath+_0x3d847a(0x2dc),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x3d847a(0x279)]({'logs':[],'version':serverversion})[_0x3d847a(0x1ca)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x3d847a(0x279)]({'data':[],'version':serverversion})[_0x3d847a(0x1ca)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x3d847a(0x279)]({'bot':[],'version':serverversion})['write']();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults['defaults']({'coins':[],'version':serverversion})[_0x3d847a(0x1ca)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0,settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x33848e=>{console['log'](_0x33848e);},'simple':_0x5ddc9a=>{const _0x3ae7c5=_0x3d847a;console[_0x3ae7c5(0x2bc)](_0x5ddc9a),loggerfile[_0x3ae7c5(0x1ca)](util['format'](_0x5ddc9a)+'\x0a');},'full':async(_0xaf42e,_0x35036b='')=>{const _0x5b47cf=_0x3d847a;let _0xe89e6;if(config['showname'])_0xe89e6=getTimeStamp()+':\x20'+config['botname']+_0x5b47cf(0x332)+_0xaf42e;else _0xe89e6=getTimeStamp()+':\x20Bot\x20'+botID+'\x20>\x20'+_0xaf42e;console[_0x5b47cf(0x2bc)](_0xe89e6),loggerfile[_0x5b47cf(0x1ca)](util[_0x5b47cf(0x2da)](_0xe89e6)+'\x0a'),_0x35036b&&(console['log'](_0x35036b),loggerfile[_0x5b47cf(0x1ca)](util[_0x5b47cf(0x2da)](_0x35036b)+'\x0a'));},'debug':async(_0x4510df,_0xe2a80='')=>{const _0x23a3c8=_0x3d847a;let _0x18394e;if(config[_0x23a3c8(0x254)])_0x18394e=getTimeStamp()+':\x20'+config[_0x23a3c8(0x1bd)]+_0x23a3c8(0x1ea)+_0x4510df;else _0x18394e=getTimeStamp()+_0x23a3c8(0x1b8)+botID+_0x23a3c8(0x1ea)+_0x4510df;if(debugging)console[_0x23a3c8(0x2bc)](_0x18394e);loggerfile[_0x23a3c8(0x1ca)](util['format'](_0x18394e)+'\x0a');if(_0xe2a80){if(debugging)console[_0x23a3c8(0x2bc)](_0xe2a80);loggerfile[_0x23a3c8(0x1ca)](util[_0x23a3c8(0x2da)](_0xe2a80)+'\x0a');}}};process['on']('uncaughtException',function(_0x2065a2){handleError(_0x2065a2,'uncaughtException');});settings[_0x3d847a(0x253)]!=config[_0x3d847a(0x253)]&&updateTimeshift(settings[_0x3d847a(0x253)]);settings['onepagemode']!=config[_0x3d847a(0x1ef)]&&updateOnepagemode(settings[_0x3d847a(0x1ef)]);(settings[_0x3d847a(0x304)]&&!config[_0x3d847a(0x304)]||!settings[_0x3d847a(0x304)]&&config['marketcapApi'])&&updateMarketcapApi(settings[_0x3d847a(0x304)]);process['send']({'started':'running'},_0x141ecd=>{}),initializeProcessListeners();function proxyEmit(_0x517bf0,_0x593dfa=null){const _0x252129=_0x3d847a;process[_0x252129(0x34e)]({'function':_0x517bf0,'args':_0x593dfa},_0x4611be=>{});}function initializeProcessListeners(){const _0x1e1b61=_0x3d847a;process['on'](_0x1e1b61(0x366),_0x52c105=>{const _0x17bc63=_0x1e1b61;switch(Object[_0x17bc63(0x205)](_0x52c105)[0x0]){case _0x17bc63(0x253):_0x52c105[_0x17bc63(0x253)]!=undefined&&(settings[_0x17bc63(0x253)]=_0x52c105[_0x17bc63(0x253)],updateTimeshift(settings[_0x17bc63(0x253)]));break;case'onepagemode':_0x52c105[_0x17bc63(0x1ef)]!=undefined&&(settings[_0x17bc63(0x1ef)]=_0x52c105[_0x17bc63(0x1ef)],updateOnepagemode(settings[_0x17bc63(0x1ef)]));break;case _0x17bc63(0x304):_0x52c105[_0x17bc63(0x304)]!=undefined&&(settings['marketcapApi']=_0x52c105[_0x17bc63(0x304)],updateMarketcapApi(settings[_0x17bc63(0x304)]));break;case _0x17bc63(0x32d):_0x52c105[_0x17bc63(0x32d)]!=undefined&&(bots=JSON[_0x17bc63(0x24f)](_0x52c105['bots']),proxyEmit(_0x17bc63(0x32d),bots));break;case _0x17bc63(0x203):switch(_0x52c105[_0x17bc63(0x203)]){case'initclient':initclient();break;case _0x17bc63(0x292):toggleBotMode();break;case _0x17bc63(0x2d3):emitHistory(_0x52c105[_0x17bc63(0x311)]);break;case _0x17bc63(0x2d1):deleteHistoryAlerts(_0x52c105[_0x17bc63(0x311)]);break;case _0x17bc63(0x1ab):getPortfolio(_0x52c105[_0x17bc63(0x311)]);break;case _0x17bc63(0x1e6):storeConfiguration(_0x52c105[_0x17bc63(0x311)]);break;case _0x17bc63(0x26f):storeHeadless(_0x52c105[_0x17bc63(0x311)]);break;case _0x17bc63(0x231):storeFiat(_0x52c105[_0x17bc63(0x311)]);break;case _0x17bc63(0x1f8):resetHistory();break;case _0x17bc63(0x215):getStartingBalances(getNormalizedPerformance());break;case _0x17bc63(0x25b):placeOrder(_0x52c105[_0x17bc63(0x311)]);break;case _0x17bc63(0x24d):cancelLoading();break;case _0x17bc63(0x300):showConfig();break;case _0x17bc63(0x322):sendMetricsTelegram();break;case _0x17bc63(0x365):sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x18905d=![]){const _0x635520=_0x3d847a;logger['debug'](_0x635520(0x1d2)+(_0x18905d?'exchange\x20reload':_0x635520(0x1a7))+_0x635520(0x28c)+config[_0x635520(0x306)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x18905d)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x635520(0x1d5)]!=''&&config[_0x635520(0x1d5)]!='***'){loadingProgress=0x0;_0x18905d&&(await initExchange(),await loadSymbols(),loadingProgress=0x1,setStableCoins(),proxyEmit('configuration',emittedConfiguration()),initialPerformanceStored=![]);const _0x59c166=await getCoins();[currentCoins,currentCoinsAll]=_0x59c166,setBlockTransactionDetection(![]),startScheduler(),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x635520(0x357)](_0x635520(0x270)),getBalances(![]),await updateOpenOrders();if(lastOrders['length']==0x0&&allOpenOrders[_0x635520(0x225)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function resumeBot(_0x140b7b=![]){const _0x12b32c=_0x3d847a;logger['debug'](_0x12b32c(0x229)+(_0x140b7b?_0x12b32c(0x1de):_0x12b32c(0x2ea))+_0x12b32c(0x287)+config[_0x12b32c(0x306)]);if(pidBalances)clearTimeout(pidBalances);if(_0x140b7b){getBalances();return;}coinsLoaded=![];if(config[_0x12b32c(0x1d5)]!=''&&config['apiKey']!=_0x12b32c(0x1aa)){loadingProgress=0x1;const _0x568911=await getCoins();[currentCoins,currentCoinsAll]=_0x568911,setBlockTransactionDetection(![]),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x12b32c(0x357)](_0x12b32c(0x270)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x12b32c(0x225)]==0x0&&allOpenOrders['length']!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();}}async function getMarketCap(_0x1b3b17){const _0x3e599c=_0x3d847a;let _0x3a750a=![];if(_0x1b3b17)_0x3a750a=!![];let _0x141961;_0x3a750a?_0x141961=_0x1b3b17['map'](_0x46a25c=>_0x46a25c[_0x3e599c(0x2f1)]):_0x141961=currentCoinsAll[_0x3e599c(0x2f9)](_0x3fad46=>_0x3fad46[_0x3e599c(0x2f1)]);if(!config[_0x3e599c(0x304)]||!_0x3a750a&&!config['marketcapEnabled']||_0x141961['length']==0x0)return;let _0x482261=null;try{_0x482261=await axios[_0x3e599c(0x1b4)]('https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest',{'headers':{'X-CMC_PRO_API_KEY':settings[_0x3e599c(0x304)]},'params':{'symbol':_0x141961[_0x3e599c(0x31b)]()}});}catch(_0x2fe97a){_0x482261=null,_0x2fe97a[_0x3e599c(0x31b)]()[_0x3e599c(0x319)](_0x3e599c(0x1ed))?(config[_0x3e599c(0x304)]=![],updateConfig(),proxyEmit('configuration',emittedConfiguration()),logHistory(_0x3e599c(0x34c),'CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager')):(logHistory(_0x3e599c(0x34c),_0x3e599c(0x32e)+schedulerInterval/(0x3c*0x3e8)+_0x3e599c(0x268)),logger['debug'](_0x3e599c(0x233),_0x2fe97a['toString']()+_0x3e599c(0x2eb)+_0x2fe97a[_0x3e599c(0x2e7)]));}if(_0x482261){let _0x585d1b=0x0;const _0x5954b5=_0x482261[_0x3e599c(0x28f)];_0x141961[_0x3e599c(0x234)](_0xd4106d=>{const _0x54d95a=_0x3e599c;if(_0x5954b5[_0x54d95a(0x28f)][_0xd4106d][0x0])_0x585d1b+=_0x5954b5[_0x54d95a(0x28f)][_0xd4106d][0x0][_0x54d95a(0x310)]['USD'][_0x54d95a(0x23f)];}),_0x141961[_0x3e599c(0x234)](_0x588add=>{const _0x5df43c=_0x3e599c,_0xcba6ca=_0x5954b5[_0x5df43c(0x28f)][_0x588add][0x0]?_0x5954b5[_0x5df43c(0x28f)][_0x588add][0x0][_0x5df43c(0x310)]['USD']['market_cap']:0x0;if(_0x3a750a){const _0x38e3c1=_0x1b3b17[_0x5df43c(0x298)](_0x46054a=>_0x46054a[_0x5df43c(0x2f1)]==_0x588add);_0x38e3c1&&(_0x38e3c1['marketcap']=_0xcba6ca);}else{const _0x5c07a4=currentCoins[_0x5df43c(0x298)](_0xe3cacf=>_0xe3cacf[_0x5df43c(0x2f1)]==_0x588add);_0x5c07a4&&(_0x5c07a4[_0x5df43c(0x1e5)]=_0xcba6ca);const _0x1dd5c3=currentCoinsAll['find'](_0x38b887=>_0x38b887[_0x5df43c(0x2f1)]==_0x588add);_0x1dd5c3&&(_0x1dd5c3['marketcap']=_0xcba6ca);}}),!_0x3a750a&&updateTargetDistribution();}}function updateTargetDistribution(){const _0x3124bb=_0x3d847a,_0x1d1401=0x2;let _0x5554fe=0x0,_0xfbb635=0x0,_0x2c5290=0x0,_0x319bef=0x0,_0x31b484=0x0;config['portfolio']['forEach'](_0x14ec84=>{const _0x2eda74=_0x4351;if(!_0x14ec84[_0x2eda74(0x1dc)]){_0x2c5290++,_0x5554fe+=_0x14ec84[_0x2eda74(0x1f5)];if(_0x14ec84[_0x2eda74(0x1f5)]===-0x1){_0x5554fe++;const _0xcc4d26=currentCoinsAll['find'](_0x48b3b4=>_0x48b3b4[_0x2eda74(0x2f1)]==_0x14ec84[_0x2eda74(0x2f1)]);_0xcc4d26&&(_0x319bef+=_0xcc4d26['marketcap'],_0x31b484+=Math['sqrt'](_0xcc4d26[_0x2eda74(0x1e5)]));}if(_0x14ec84[_0x2eda74(0x1f5)]!==-0x1)_0xfbb635++;}});let _0x10ded1;const _0x298b2b=0x64-_0x5554fe,_0xb4f920=_0x2c5290-_0xfbb635;_0x10ded1=_0xb4f920===0x0?_0x5554fe:Math[_0x3124bb(0x296)](0x64,_0x5554fe),config['portfolio'][_0x3124bb(0x234)](_0x493d8b=>{const _0x36d433=_0x3124bb,_0x9196b8=currentCoinsAll[_0x36d433(0x298)](_0xda38f8=>_0xda38f8[_0x36d433(0x2f1)]==_0x493d8b[_0x36d433(0x2f1)]);_0x9196b8&&(_0x493d8b['marketcap']=_0x9196b8[_0x36d433(0x1e5)]);if(!_0x493d8b['excluded']){if(_0x10ded1<=0x64){if(_0x493d8b['slider']===-0x1){if(_0x319bef!==0x0&&config['marketcapEnabled']){if(_0x9196b8){if(config[_0x36d433(0x1e2)]==_0x36d433(0x1e5))_0x493d8b[_0x36d433(0x352)]=(_0x298b2b/(_0x319bef/_0x9196b8[_0x36d433(0x1e5)]))[_0x36d433(0x320)](_0x1d1401);else config[_0x36d433(0x1e2)]=='marketcapsqrt'&&(_0x493d8b[_0x36d433(0x352)]=(_0x298b2b/(_0x31b484/Math['sqrt'](_0x9196b8['marketcap'])))[_0x36d433(0x320)](_0x1d1401));}}}}}}),updateConfig();}function updateConfig(){const _0x473e8a=_0x3d847a;let _0x4e005d=dbConfig[_0x473e8a(0x1b4)](_0x473e8a(0x2b3))[_0x473e8a(0x298)]({'botID':botID})[_0x473e8a(0x29c)]();_0x4e005d&&dbConfig[_0x473e8a(0x1b4)](_0x473e8a(0x2b3))[_0x473e8a(0x298)]({'botID':botID})[_0x473e8a(0x350)](config)[_0x473e8a(0x1ca)]();}function logMemory(){const _0x47527f=_0x3d847a;if(environment!=_0x47527f(0x359))return;const _0x38f847=process['memoryUsage']()[_0x47527f(0x280)]/0x400/0x400;logger[_0x47527f(0x357)]('process\x20'+process[_0x47527f(0x293)]+'\x20uses\x20'+formatResult(_0x38f847,0x1)+_0x47527f(0x318));}async function startScheduler(){const _0x5bffad=_0x3d847a,_0x4dcea4=shiftedTime()[_0x5bffad(0x21f)]();getMarketCap(),loadSymbols(),_0x4dcea4==0x1&&logMemory(),await sleep(schedulerInterval),startScheduler();}async function restartBot(_0xe79f97=![]){const _0x58a775=_0x3d847a;logger['debug'](_0x58a775(0x2dd));if(!_0xe79f97)while(lockOrders!=ORDERS[_0x58a775(0x2c9)]||coolingDown){await sleep(0x3e8);}process[_0x58a775(0x34e)]({'stop':_0x58a775(0x1e9)},_0x271a53=>{});}async function initExchange(_0x2ccb50=config['exchange'],_0x2a8b01=config['apiKey'],_0x35c258=config[_0x3d847a(0x20f)],_0x470e9c=config[_0x3d847a(0x26b)]){const _0x12f921=_0x3d847a;if(exchange){logger[_0x12f921(0x357)](_0x12f921(0x2ad));return;}logger[_0x12f921(0x357)](_0x12f921(0x266));!supportedExchanges()[_0x12f921(0x319)](_0x2ccb50)&&(logHistory(_0x12f921(0x34c),_0x12f921(0x1f0)+_0x2ccb50+'\x20exchange'),killBot());const _0x473577=ccxt[_0x12f921(0x1bf)][_0x2ccb50[_0x12f921(0x21e)]()];exchange=new _0x473577({'apiKey':_0x2a8b01,'secret':_0x35c258,'options':{'defaultType':'spot'}});if(_0x470e9c)exchange[_0x12f921(0x1bb)]=_0x470e9c;}function updateExchange(_0x3eaee7,_0x1ca9ed,_0x532c50=null){const _0xf3f93b=_0x3d847a;exchange[_0xf3f93b(0x1d5)]=_0x3eaee7,exchange[_0xf3f93b(0x20f)]=_0x1ca9ed,exchange['apiPassword']=_0x532c50,logger['debug'](_0xf3f93b(0x283));}function setStableCoins(){const _0x5ba5b1=_0x3d847a;let _0x1c5ba7=config['basecoin']==_0x5ba5b1(0x326)?_0x5ba5b1(0x326):config['basecoin']==_0x5ba5b1(0x1cc)?_0x5ba5b1(0x1cc):_0x5ba5b1(0x2e3),_0x39e128=allSymbols[_0x5ba5b1(0x319)](_0x1c5ba7+_0x5ba5b1(0x2a0))?'USD':allSymbols[_0x5ba5b1(0x319)](_0x1c5ba7+_0x5ba5b1(0x1d0))?_0x5ba5b1(0x1d3):_0x5ba5b1(0x325),_0x38b0b6=allSymbols[_0x5ba5b1(0x319)](_0x1c5ba7+_0x5ba5b1(0x220))?'EUR':_0x39e128;enableFiatToggle=!![],_0x39e128==_0x5ba5b1(0x325)&&(enableFiatToggle=![],storeFiat(_0x5ba5b1(0x325))),_0x38b0b6!=_0x5ba5b1(0x325)&&(enableFiatToggle=![],storeFiat(_0x5ba5b1(0x25a))),stablecoins={'eur':{'coin':''+_0x1c5ba7+_0x38b0b6,'symbol':_0x1c5ba7+'/'+_0x38b0b6},'usd':{'coin':''+_0x1c5ba7+_0x39e128,'symbol':_0x1c5ba7+'/'+_0x39e128}};}async function initwsCcxt(){const _0x6a8cbe=_0x3d847a;initCycle++;const _0x5a8b10=initCycle;let _0x525014=[];config['portfolio'][_0x6a8cbe(0x234)](_0x32b65a=>{const _0x5a4111=_0x6a8cbe;if(!_0x32b65a['excluded']&&_0x32b65a['coin']!=config['basecoin'])_0x525014[_0x5a4111(0x34b)](_0x32b65a[_0x5a4111(0x317)]);});if(!_0x525014[_0x6a8cbe(0x319)](stablecoins[_0x6a8cbe(0x1b9)][_0x6a8cbe(0x317)]))_0x525014['push'](stablecoins[_0x6a8cbe(0x1b9)][_0x6a8cbe(0x317)]);if(!_0x525014[_0x6a8cbe(0x319)](stablecoins[_0x6a8cbe(0x1a8)]['symbol']))_0x525014[_0x6a8cbe(0x34b)](stablecoins[_0x6a8cbe(0x1a8)][_0x6a8cbe(0x317)]);if(config['exchange'][_0x6a8cbe(0x2e4)](_0x6a8cbe(0x285))&&config[_0x6a8cbe(0x258)]!=_0x6a8cbe(0x1cc)){if(!_0x525014['includes'](_0x6a8cbe(0x32b)+config[_0x6a8cbe(0x258)]))_0x525014[_0x6a8cbe(0x34b)]('BNB/'+config[_0x6a8cbe(0x258)]);}loadCoins(_0x525014),_0x525014=validateSymbols(_0x525014);const _0x496171=async _0x36972e=>{const _0x50aff3=_0x6a8cbe;let _0x4289a7;try{const _0x16f2fa=await getTickers(_0x36972e);Object[_0x50aff3(0x2ff)](_0x16f2fa)[_0x50aff3(0x234)](_0x286bd3=>{const _0x43ce4d=_0x50aff3;_0x4289a7=_0x286bd3[0x1][_0x43ce4d(0x317)],gTicker[noslash(_0x4289a7)]=_0x286bd3[0x1][_0x43ce4d(0x21c)],gChange[_0x4289a7]=_0x286bd3[0x1]['percentage'];});}catch(_0x543e4e){await handleError(_0x543e4e,_0x50aff3(0x2b9),_0x4289a7);}},_0x82f97b=async _0x3a6dcd=>{const _0x21a2bf=_0x6a8cbe;while(initCycle==_0x5a8b10){if(!botPaused)try{const _0x10e4ef=await exchange[_0x21a2bf(0x1ce)](_0x3a6dcd);gTicker[noslash(_0x10e4ef[0x0][_0x21a2bf(0x317)])]=_0x10e4ef[0x0][_0x21a2bf(0x2c3)];}catch(_0x22e500){if(!exchangeStopped)await handleError(_0x22e500,_0x21a2bf(0x214),_0x3a6dcd);}else await sleep(0x64);}},_0x34e8bb=async _0x873603=>{const _0x119e45=_0x6a8cbe;while(initCycle==_0x5a8b10){if(!botPaused)try{const _0x217d0a=await exchange[_0x119e45(0x1a9)](_0x873603),_0x25c51f=_0x217d0a[_0x119e45(0x255)]();gTicker[noslash(_0x25c51f[_0x119e45(0x317)])]=_0x25c51f['price'];}catch(_0x340ef6){if(!exchangeStopped)await handleError(_0x340ef6,_0x119e45(0x1c9),_0x873603['toString']());}else await sleep(0x64);}},_0x58a84e=async _0x3bd8a2=>{const _0x4ee045=_0x6a8cbe;while(initCycle==_0x5a8b10){if(!botPaused){let _0x4198cd;try{await sleep(0x3c*0x3e8);const _0x2bdb20=await getTickers(_0x3bd8a2);Object[_0x4ee045(0x2ff)](_0x2bdb20)[_0x4ee045(0x234)](_0x5112e9=>{const _0x23d1f7=_0x4ee045;_0x4198cd=_0x5112e9[0x1][_0x23d1f7(0x317)],gChange[_0x4198cd]=_0x5112e9[0x1]['percentage'];});}catch(_0x487ed2){if(!exchangeStopped)await handleError(_0x487ed2,'fetchTickers()',_0x4198cd);}}else await sleep(0x64);}},_0x256861=async _0x1cbc60=>{const _0x48e67a=_0x6a8cbe;while(initCycle==_0x5a8b10){if(!botPaused)try{const _0x352ae2=await exchange['watchOrders'](_0x1cbc60);initCycle==_0x5a8b10&&_0x352ae2[_0x48e67a(0x234)](_0x1877f3=>{updateNumberCoinsCcxt(_0x1877f3);});}catch(_0x2b0780){if(!exchangeStopped)await handleError(_0x2b0780,_0x48e67a(0x284));}else await sleep(0x64);}};_0x496171(_0x525014),_0x58a84e(_0x525014),exchange[_0x6a8cbe(0x218)][_0x6a8cbe(0x1a9)]&&!(config['exchange']=='Bybit'&&_0x525014[_0x6a8cbe(0x225)]>0xa)?_0x34e8bb(_0x525014):_0x525014[_0x6a8cbe(0x234)](_0x4b2f82=>{_0x82f97b(_0x4b2f82);}),_0x525014[_0x6a8cbe(0x234)](_0x46796d=>{_0x256861(_0x46796d);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x45cc49){const _0x2b3e1a=_0x3d847a;let _0x251735={};try{if(config[_0x2b3e1a(0x306)]!=_0x2b3e1a(0x312))_0x251735=await exchange['fetchTickers'](_0x45cc49);else for(const _0x3843cf of _0x45cc49){const _0x14d28f=await exchange[_0x2b3e1a(0x248)](_0x3843cf);_0x251735[_0x3843cf]=_0x14d28f;}return _0x251735;}catch(_0x2ed79e){throw _0x2ed79e;}}function setBlockTransactionDetection(_0x2520d7){const _0x39d3b3=_0x3d847a;blockTransactionDetection=_0x2520d7,logger[_0x39d3b3(0x357)](_0x39d3b3(0x344)+blockTransactionDetection);}async function detectLiquidityChange(_0x455e01=0x0){const _0x243af1=_0x3d847a;transactionDetectionOngoing=!![];try{const _0x53fc68=await getCoins(_0x455e01),[_0x7a6db,_0x472798]=_0x53fc68;let _0x579da8=[];currentCoins[_0x243af1(0x234)](_0x1f0224=>{const _0x5353c8=_0x243af1,_0x331bae=_0x7a6db['find'](_0xb4fb77=>_0xb4fb77[_0x5353c8(0x2f1)]==_0x1f0224[_0x5353c8(0x2f1)]);if(_0x331bae){if(_0x1f0224[_0x5353c8(0x2a9)]!=_0x331bae['number']){let _0xf3e692;if(_0x1f0224['coin']!=config[_0x5353c8(0x258)]){const _0x5267c0=gTicker[noslash(_0x1f0224[_0x5353c8(0x317)])];_0xf3e692=_0x1f0224[_0x5353c8(0x1cd)]?0x1/_0x5267c0:_0x5267c0;}else _0xf3e692=0x1;_0x579da8['push']({'coin':_0x1f0224[_0x5353c8(0x2f1)],'symbol':_0x1f0224['symbol'],'price':_0xf3e692,'number':Number(formatResult(_0x331bae[_0x5353c8(0x2a9)]-_0x1f0224['number'],0x8)),'basecoinvalue':_0xf3e692*(_0x331bae[_0x5353c8(0x2a9)]-_0x1f0224[_0x5353c8(0x2a9)])});}}});if(_0x579da8['length']>0x0&&!blockTransactionDetection){for(const _0x4c1ee1 of _0x579da8){if(config[_0x243af1(0x221)]){logger['debug'](_0x243af1(0x294)+_0x4c1ee1[_0x243af1(0x22f)]+_0x243af1(0x329)+lastFees[_0x243af1(0x347)]);if(lastFees['highest']==0x0||Math[_0x243af1(0x1f3)](_0x4c1ee1[_0x243af1(0x22f)])>lastFees[_0x243af1(0x347)]*0x3){if(config[_0x243af1(0x221)]==_0x243af1(0x2b6)){delete _0x4c1ee1[_0x243af1(0x317)],delete _0x4c1ee1[_0x243af1(0x22f)];let _0x446e99=[],_0x584b94=[...config[_0x243af1(0x1d7)]]||[],_0x330844=config['liquidity'];_0x584b94['sort']((_0x20c7e7,_0x3e1659)=>_0x20c7e7[_0x243af1(0x2a3)]>_0x3e1659[_0x243af1(0x2a3)]?-0x1:_0x3e1659[_0x243af1(0x2a3)]>_0x20c7e7['date']?0x1:0x0);const _0x5ef7c0=getDate();if(_0x584b94[0x0]){const _0x3928c4=fns[_0x243af1(0x24f)](_0x584b94[0x0][_0x243af1(0x2a3)],_0x243af1(0x256),new Date()),_0x2bff5c=fns[_0x243af1(0x24f)](_0x5ef7c0,_0x243af1(0x256),new Date());if(fns[_0x243af1(0x35c)](_0x3928c4,_0x2bff5c)){_0x446e99=_0x584b94[0x0][_0x243af1(0x358)];const _0x533443=_0x446e99[_0x243af1(0x298)](_0x1b8f39=>_0x1b8f39[_0x243af1(0x2f1)]==_0x4c1ee1[_0x243af1(0x2f1)]);_0x533443?(_0x533443[_0x243af1(0x2a9)]+=_0x4c1ee1[_0x243af1(0x2a9)],_0x533443[_0x243af1(0x2a9)]==0x0&&(_0x446e99=_0x446e99['filter'](_0x163e47=>{const _0x55820f=_0x243af1;return _0x163e47[_0x55820f(0x2f1)]!=_0x4c1ee1['coin'];}))):_0x446e99[_0x243af1(0x34b)](_0x4c1ee1);const _0x45f2b5=_0x330844[_0x243af1(0x298)](_0x5093fe=>_0x5093fe[_0x243af1(0x2a3)]==_0x5ef7c0);_0x45f2b5[_0x243af1(0x358)]=_0x446e99;}else _0x330844[_0x243af1(0x34b)]({'date':_0x5ef7c0,'changes':[_0x4c1ee1]});}const _0x32f08d=_0x330844[_0x243af1(0x298)](_0x3c6355=>_0x3c6355[_0x243af1(0x2a3)]==_0x5ef7c0);if(_0x32f08d){let _0x33ceeb=!![];_0x32f08d['changes'][_0x243af1(0x234)](_0x4d5317=>{if(_0x4d5317['number']!=0x0)_0x33ceeb=![];}),_0x33ceeb&&(_0x330844=_0x330844[_0x243af1(0x28b)](_0x28660b=>{const _0x42ff39=_0x243af1;return _0x28660b[_0x42ff39(0x2a3)]!=_0x5ef7c0;}));}let _0x22d063=dbConfig[_0x243af1(0x1b4)](_0x243af1(0x2b3))[_0x243af1(0x298)]({'botID':botID})[_0x243af1(0x29c)]();_0x22d063&&(dbConfig[_0x243af1(0x1b4)](_0x243af1(0x2b3))[_0x243af1(0x298)]({'botID':botID})['assign']({'liquidity':_0x330844})['write'](),config[_0x243af1(0x1d7)]=_0x330844);logHistory('success',_0x243af1(0x1b7)+Math[_0x243af1(0x1f3)](_0x4c1ee1[_0x243af1(0x2a9)])+'\x20'+_0x4c1ee1[_0x243af1(0x2f1)]+'\x20'+(_0x4c1ee1[_0x243af1(0x2a9)]>0x0?_0x243af1(0x276):_0x243af1(0x368))+_0x243af1(0x2f4)),proxyEmit(_0x243af1(0x34f),emittedConfiguration());const _0x3d9003=getNormalizedPerformance();emitPerformance(_0x3d9003),getStartingBalances(_0x3d9003),logger[_0x243af1(0x357)]('Portfolio\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated');}else config[_0x243af1(0x221)]=='switch-manual'&&(config[_0x243af1(0x2a4)]?(await storeHeadless({'headless':![]}),logHistory('success',_0x243af1(0x1b7)+Math[_0x243af1(0x1f3)](_0x4c1ee1[_0x243af1(0x2a9)])+'\x20'+_0x4c1ee1[_0x243af1(0x2f1)]+'\x20'+(_0x4c1ee1[_0x243af1(0x2a9)]>0x0?_0x243af1(0x276):_0x243af1(0x368))+_0x243af1(0x2a8))):logger['debug']('Portfolio\x20change\x20detected:\x20'+Math['abs'](_0x4c1ee1[_0x243af1(0x2a9)])+'\x20'+_0x4c1ee1[_0x243af1(0x2f1)]+'\x20'+(_0x4c1ee1['number']>0x0?_0x243af1(0x276):_0x243af1(0x368))+_0x243af1(0x1b5)));}else logger[_0x243af1(0x357)](_0x243af1(0x24e)+Math[_0x243af1(0x1f3)](_0x4c1ee1['number'])+'\x20'+_0x4c1ee1[_0x243af1(0x2f1)]+'\x20'+(_0x4c1ee1[_0x243af1(0x2a9)]>0x0?'added':_0x243af1(0x368)));}else logger[_0x243af1(0x357)](_0x243af1(0x1b7)+Math[_0x243af1(0x1f3)](_0x4c1ee1[_0x243af1(0x2a9)])+'\x20'+_0x4c1ee1['coin']+'\x20'+(_0x4c1ee1['number']>0x0?_0x243af1(0x276):_0x243af1(0x368))+_0x243af1(0x2a7));}currentCoins=_0x7a6db,currentCoinsAll=_0x472798;}}catch(_0x112c79){if(!exchangeStopped)await handleError(_0x112c79,'detectLiquidityChange()');}transactionDetectionOngoing=![];}function _0x44e1(){const _0x34c8d7=['No\x20more\x20open\x20orders\x20-\x20','Exception\x20thrown\x20in\x20','botID','get','\x20-\x20bot\x20already\x20running\x20in\x20manual\x20mode','token\x20is\x20expired','Portfolio\x20change\x20detected:\x20',':\x20Bot\x20','eur','exec','password','net-basecoin','botname','time','pro','apply','recent20','getOpenOrders()','spot','\x20has\x20a\x2024h\x20drop\x20of\x20','timeout','pki','testApi','Huobipro','watchTradesForSymbols()','write','decode64','PAXG','reverse','watchTrades','2.3.5','/USDT','fetchBalance()','Reset\x20|\x20','USDT','search','apiKey','path','liquidity','InsufficientFunds','InvalidNonce','API-key\x20format\x20invalid','ordertype','excluded','<b>','quick','2.6.0','NetworkError','getSeconds','marketcapEnabled','constructor','getFullYear','marketcap','storeConfiguration','\x20order:\x20','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','restart','\x20>\x20[DEBUG]\x20','getTime','util','status\x20code\x20401','fetchOpenOrders','onepagemode','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','lowdb','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','abs','Order\x20filled:\x20','slider','realized','InvalidOrder','resetHistory','Valid\x20balance\x20for\x20','(((.+)+)+)+$','shift','Unknown\x20error\x20-\x20check\x20logs','Saving\x20configuration','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','./config/','fees','OrderNotFound','\x20|\x20','function','substring','keys','\x20-\x20bot\x20not\x20started','lowdb/adapters/FileSync','full','cancel','Error\x20while\x20deleting\x20files:\x20','market','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','orderstatus','sort','apiSecret','initial','axios','starting-balance-','privateKeyFromPem','watchTrades()','getStartingBalances','cost','\x20minutes\x20-\x20','has','MIN_NOTIONAL','<b>Bot\x20','Insufficient\x20funds\x20to\x20execute\x20order:\x20','last','cooldown','toLowerCase','getHours','/EUR','autoliquidity','active','create','min','length','2056252OnbJCW','final','Placing\x20order\x20for:\x20','Resuming\x20(','loadSymbols()','emojibuy','freeze','USDP','canceled','basecoinvalue','mkdirSync','storeFiat','fee','Error\x20details:','forEach','kill','yargs/yargs','USDC','</pre>','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','RETRY\x20-\x20Problem\x20resolved\x20after\x20','running','split','Exchange','\x20API\x20secret\x20is\x20invalid','market_cap','net-fiat','\x20>\x20pausing\x20bot\x20for\x20','\x20/\x20','threshold','\x20(see:\x20hodlerhacks.com/fix/1)','toUpperCase',')\x20unknown\x20order:\x20','delta','fetchTicker','buy','\x20>\x20details:','\x20API\x20key\x20is\x20invalid','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','cancelLoading','Fee\x20discount\x20refund\x20detected:\x20','parse','\x20:\x20','Failed\x20to\x20load\x20coin\x20data\x20for\x20','request-time','timeshift','showname','pop','yyyy/MM/dd','/output-000.log','basecoin','sells','USD','placeOrder','180itTkfs','timestamp','enabled','167298LJVAzb','page','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','red_yellow_blue','Waited\x20','16dUrMVi','7718560aLNzKE','Initializing\x20exchange','trade','\x20minutes','Net\x20effect','starting-balances','apiPassword','getMonth','success','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)','storeHeadless','Loading\x20completed','splice','-results.json','Pausing\x20for\x20','-events.json','cancelOrder','added','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','1\x20-\x20partially\x20FILLED\x20(','defaults','enableFiatToggle','1\x20-\x20FILLED\x20known\x20order:\x20','\x20blocked\x20API\x20(DDoSProtection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','bot-','balancing\x20resumed','date-fns','heapUsed','limit','orderId','Updating\x20API\x20key\x20(not\x20saved\x20in\x20config\x20file\x20yet)','watchOrders()','Binance','settings',')\x20|\x20exchange:\x20','0\x20-\x20EXECUTION:\x20','./version.json','loading-canceled','filter','\x20|\x20exchange:\x20','Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)','sha256','data','remainingSymbols','DDoSProtection','toggleBotMode','pid','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','round','max','privateKey','find','Bybit','OnMaintenance','unlinkSync','value','PermissionDenied','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','ask','/USD','Order\x20is\x20invalid:\x20','set','date','headless','startdate','ID:\x20','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','\x20-\x20bot\x20switched\x20to\x20manual\x20mode','number','prevnumber','bitmex','Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute','Initializing\x20exchange:\x20already\x20done','2653810grxdQl','Net\x20','ExchangeError','Bitget','buys','bot','\x20value','Avoiding\x20continuous\x20order\x20attempts','update-liquidity','************','total','initTickers()','fromCodePoint','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','log','BUSD','bb-settings.json','1711835udjSXu','padEnd','\x20hour','change24h','price','1\x20-\x20FILLED\x20unknown\x20order:\x20','datetime','loadMarkets','currency','ccxt','UNLOCKED','change','replace','node-forge','version','order','open','none','deleteHistoryAlerts','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','emitHistory','./logs/','balances','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','45dFGyBv','<pre>','startprice','format','stringify','/backup/','Initiating\x20bot\x20restart','portfolio','bid','status','remove','type','BTC','startsWith','slice','-performance.json','code','ExchangeNotAvailable','Cooldown\x20ended\x20-\x20balancing\x20resumed','complete','\x20-\x20','customId','argv','Resetting\x20bot\x20history','recovery','\x20>\x20stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','coin','writeFile','3GldnAs','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','Error:\x20Invalid\x20argument\x20','2842780jXtUWR','%\x20(','Unfilled\x20order(s)\x20canceled\x20after\x20','map','padStart','limits','fetchBalance','breakeven',')\x20known\x20order:\x20','entries','showConfig','filled','AuthenticationError','ongoing','marketcapApi','2\x20-\x20handling\x20FILLED\x20order:\x20','exchange','Executed\x20','Cex','leftTxt','differenceInSeconds','UNLOCKING','\x20closed\x20the\x20connection\x20(see:\x20hodlerhacks.com/fix/5)','environment','\x20API\x20key,\x20secret\x20or\x20password\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','Bot\x20','quote','args','Cryptocom','portfolio2','findIndex',':\x20timer\x20>','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','symbol','\x20MB','includes','event-history','toString','closed','existsSync','recreate','LOCKED','toFixed','\x20network\x20error:\x20','sendMetricsTelegram','target','configuration-stored','EUR','ETH','offset','indexOf','\x20|\x20highest\x20fee:\x20','watchOrders','BNB/','performance','bots','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20trying\x20again\x20in\x20','Huobi','amount','openOrders','\x20>\x20','add','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','coins','\x20exchange\x20error:\x20','sortBy','\x0aSymbol(s):\x20','join','\x20|\x20lock\x20orders:\x20','startnumber','side','colorscheme','Invalid\x20symbol:\x20','sell','Market','2.5.0','Unknown\x20error:\x20','Limit\x20(high-margin)','Block\x20transaction\x20detection:\x20','Resetting\x20coin\x20results:\x20','49qmDXyt','highest','getDate','Error\x20details:\x20','BNB','push','error','createOrder','send','configuration','assign','Invalid\x20quantity','distribution','progress','portfolio1','2.6.22','test','debug','changes','staging','average','floor','isEqual','-------------------------------\x0a','Manual\x20balancing\x20required','2\x20-\x20Validate\x20orders:\x20','getCoinNumber()','548958iOBsvK','Headless:\x20','Test\x20API','valid','sendPortfolioTelegram','message','event','removed','no\x20open\x20orders','limit-low','string','fiat','exchanges','\x20not\x20responding\x20(see:\x20hodlerhacks.com/fix/5)','createWriteStream','cloneDeep','must\x20be\x20greater\x20than\x20minimum\x20amount','rightTxt','\x20attempts','no\x20exchange\x20reloaded','usd','watchTradesForSymbols','***','getPortfolio','emojisell','logs','1\x20-\x20Handle\x20open\x20orders','-config.json','bb-secure.json'];_0x44e1=function(){return _0x34c8d7;};return _0x44e1();}async function watchTransactions(){await sleep(0x14*0x3e8);while(!![]){!botPaused&&!blockTransactionDetection&&coinsLoaded?(detectLiquidityChange(),await sleep(watchTransactionsInterval)):await sleep(0x3e8);}}async function loadSymbols(){const _0x5147e1=_0x3d847a;try{markets=await exchange[_0x5147e1(0x2c6)](!![]),allSymbols=[],Object[_0x5147e1(0x2ff)](markets)[_0x5147e1(0x234)](_0x3db0d2=>{const _0x322925=_0x5147e1;_0x3db0d2[0x1][_0x322925(0x222)]&&_0x3db0d2[0x1][_0x322925(0x1c3)]&&allSymbols['push'](_0x3db0d2[0x0]);});}catch(_0x193132){markets?logger[_0x5147e1(0x357)]('Error\x20in\x20loadSymbols():\x20'+_0x193132[_0x5147e1(0x31b)]()):(loading['cancel']=!![],emitLoadingProgress(),_0x193132[_0x5147e1(0x31b)]()[_0x5147e1(0x21e)]()[_0x5147e1(0x319)](_0x5147e1(0x25d))||_0x193132[_0x5147e1(0x31b)]()[_0x5147e1(0x21e)]()[_0x5147e1(0x319)]('request-time')?logHistory(_0x5147e1(0x34c),_0x5147e1(0x28d)):handleErrorNoStop(_0x193132,_0x5147e1(0x22a),!![]),logHistory(_0x5147e1(0x34c),'Failed\x20to\x20load\x20market\x20data\x20-\x20bot\x20not\x20started'),logHistory(_0x5147e1(0x34c),_0x5147e1(0x273)+loadCoinsRetryInterval/0xea60+_0x5147e1(0x2d2)),logger['debug'](_0x5147e1(0x233),_0x193132),botPaused=!![],await sleep(loadCoinsRetryInterval),restartBot());}}function validateSymbols(_0x434486){const _0x3fa114=_0x3d847a;let _0x6fd82b=[];return _0x434486[_0x3fa114(0x234)](_0x40d2af=>{const _0x1bcbef=_0x3fa114;!allSymbols['includes'](_0x40d2af)?logHistory(_0x1bcbef(0x34c),_0x1bcbef(0x33e)+_0x40d2af+'\x20-\x20exclude\x20coin\x20in\x20the\x20configuration'):_0x6fd82b[_0x1bcbef(0x34b)](_0x40d2af);}),_0x6fd82b;}async function initclient(){const _0x45028e=_0x3d847a;proxyEmit('configuration',emittedConfiguration()),proxyEmit(_0x45028e(0x1a0),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x140124=getNormalizedPerformance();emitPerformance(_0x140124),getStartingBalances(_0x140124);}async function toggleBotMode(){const _0x62a864=_0x3d847a;let _0x10d8e2=dbConfig[_0x62a864(0x1b4)](_0x62a864(0x2b3))['find']({'botID':botID})[_0x62a864(0x29c)]();if(_0x10d8e2){const _0x2e3ca2=!_0x10d8e2[_0x62a864(0x2a4)];dbConfig['get'](_0x62a864(0x2b3))[_0x62a864(0x298)]({'botID':botID})[_0x62a864(0x350)]({'headless':_0x2e3ca2})[_0x62a864(0x1ca)](),config['headless']=_0x2e3ca2,proxyEmit(_0x62a864(0x34f),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x4b7641=_0x3d847a;process[_0x4b7641(0x34e)]({'updatebotmanager':!![]},_0x508717=>{}),logger[_0x4b7641(0x357)](_0x4b7641(0x362)+config[_0x4b7641(0x2a4)]);}async function loadCoins(_0x1dc343){const _0xf126e2=_0x3d847a;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x1f96b8,_0xd7a1d0=0x0,_0x493705=0x0;_0x1dc343[_0xf126e2(0x234)](_0x2f8321=>{const _0xb77a4f=_0xf126e2;loading['remainingSymbols'][_0xb77a4f(0x34b)](_0x2f8321);}),loadingCanceled=![];let _0x37cda0=![];while(_0x1f96b8!=_0x1dc343[_0xf126e2(0x225)]+maxLoadingProgress){_0x1f96b8=loadingProgress,_0x1dc343[_0xf126e2(0x234)](_0x19b4e6=>{const _0xdaef8=_0xf126e2;if(gTicker[noslash(_0x19b4e6)]){loading[_0xdaef8(0x290)]=loading[_0xdaef8(0x290)][_0xdaef8(0x28b)](_0x615370=>_0x615370!=_0x19b4e6);if(!watchedSymbols[_0xdaef8(0x319)](_0x19b4e6))watchedSymbols['push'](_0x19b4e6);_0x1f96b8++;}}),loading['progress']=Math[_0xf126e2(0x295)](_0x1f96b8/(_0x1dc343[_0xf126e2(0x225)]+maxLoadingProgress)*0x64);loading[_0xf126e2(0x353)]!=0x64&&(_0x493705>0x1e*0x5&&(loading['timeout']=!![],emitLoadingProgress()),_0x493705>0x78*0x5&&!_0x37cda0&&(_0x37cda0=!![],logHistory('error',_0xf126e2(0x251)+loading[_0xf126e2(0x290)][_0xf126e2(0x339)](',\x20')+_0xf126e2(0x206)),logHistory(_0xf126e2(0x34c),'Pausing\x20for\x20'+loadCoinsRetryInterval/0xea60+'\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again'),loadingCanceled=!![],await sleep(loadCoinsRetryInterval),restartBot()));if(loadingCanceled){loading[_0xf126e2(0x209)]=!![],emitLoadingProgress();break;}else _0xd7a1d0!=loading[_0xf126e2(0x353)]&&(_0xd7a1d0=loading[_0xf126e2(0x353)],emitLoadingProgress()),_0x493705++,await sleep(0xc8);}_0x1f96b8==_0x1dc343['length']+maxLoadingProgress&&(coinsLoaded=!![],process[_0xf126e2(0x34e)]({'status':_0xf126e2(0x25e),'live':_0xf126e2(0x23b)},_0xd787=>{}),_0x37cda0&&logHistory(_0xf126e2(0x26d),'All\x20coin\x20data\x20loaded\x20-\x20bot\x20started'));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x2b6420=_0x3d847a;proxyEmit(_0x2b6420(0x34f),{...emittedConfiguration(),'configstate':_0x2b6420(0x28a)});}function emitLoadingProgress(){proxyEmit('coin-loading-progress',loading);}async function getFiat(){const _0x320991=_0x3d847a;let _0x3f4b3c=gTicker[stablecoins[_0x320991(0x1b9)][_0x320991(0x2f1)]],_0x203598=gTicker[stablecoins[_0x320991(0x1a8)][_0x320991(0x2f1)]];return{'eur':Number(_0x3f4b3c),'usd':Number(_0x203598)};}function capitalize(_0x5ade83){const _0xb55492=_0x3d847a;return _0x5ade83[_0xb55492(0x204)](0x0,0x1)[_0xb55492(0x245)]()+_0x5ade83[_0xb55492(0x204)](0x1);}function supportedExchanges(){const _0x3ae11a=_0x3d847a,_0x242b88=['ws','fetchTickers','fetchTicker',_0x3ae11a(0x1ce),_0x3ae11a(0x32a),_0x3ae11a(0x275),_0x3ae11a(0x34d),_0x3ae11a(0x1ee),_0x3ae11a(0x2fc)];let _0x4b8b8d=[],_0x17578b=[],_0x247388=ccxt[_0x3ae11a(0x1bf)][_0x3ae11a(0x1a0)];_0x247388[_0x3ae11a(0x234)](_0x45a499=>{const _0x5136d9=_0x3ae11a;try{const _0x709371=new ccxt[(_0x5136d9(0x1bf))][_0x45a499]();_0x17578b[_0x5136d9(0x34b)](_0x709371);}catch(_0x29e76c){}}),_0x17578b[_0x3ae11a(0x234)](_0xa6d0a4=>{const _0x31b1ea=_0x3ae11a;let _0x55891a=0x0;_0x242b88['forEach'](_0xe7af55=>{const _0xf41fe4=_0x4351;_0xe7af55 in _0xa6d0a4[_0xf41fe4(0x218)]&&_0xa6d0a4[_0xf41fe4(0x218)][_0xe7af55]&&_0x55891a++;}),_0x55891a==_0x242b88[_0x31b1ea(0x225)]&&(!excludedExchanges[_0x31b1ea(0x319)](_0xa6d0a4['id'])&&_0x4b8b8d[_0x31b1ea(0x34b)](capitalize(_0xa6d0a4['id'])));});let _0x14f92d=[];return _0x247388[_0x3ae11a(0x234)](_0x41c1e9=>{const _0x333bb1=_0x3ae11a;_0x41c1e9=capitalize(_0x41c1e9);if(!_0x4b8b8d[_0x333bb1(0x319)](_0x41c1e9))_0x14f92d[_0x333bb1(0x34b)](_0x41c1e9);}),_0x4b8b8d;}function setStartDatePerformance(){const _0x552b07=_0x3d847a;if(config&&config[_0x552b07(0x1d7)][0x0][_0x552b07(0x358)][_0x552b07(0x225)]!=0x0){const _0x33294b=config[_0x552b07(0x1d7)][0x0][_0x552b07(0x358)];dbPerformance[_0x552b07(0x1b4)]('data')[_0x552b07(0x298)]({'date':config[_0x552b07(0x2a5)]})[_0x552b07(0x350)]({'coins':_0x33294b})[_0x552b07(0x1ca)]();}}async function recreateCoinResults(){const _0x4ed076=_0x3d847a;recreationNeeded=![];let _0x2bcb23,_0x3c8439=[];try{for(const _0x373893 of currentCoins){if(_0x373893[_0x4ed076(0x2f1)]!=config[_0x4ed076(0x258)]){let _0xd992f2=0x0,_0x151993,_0x4b4f45;_0x2bcb23=await getAllEventOrders(_0x373893[_0x4ed076(0x317)]);if(_0x2bcb23[_0x4ed076(0x225)]>0x0)_0x2bcb23['forEach'](_0x2289ce=>{const _0x545eb7=_0x4ed076,_0x376b2a=_0x373893[_0x545eb7(0x317)][_0x545eb7(0x319)](config[_0x545eb7(0x258)]+'/');_0x3c8439[_0x545eb7(0x34b)]({'datetime':_0x2289ce[_0x545eb7(0x2c5)],'coin':_0x373893['coin'],'symbol':_0x373893[_0x545eb7(0x317)],'side':_0x2289ce[_0x545eb7(0x33c)],'reverse':_0x376b2a,'amount':formatResult(_0x2289ce[_0x545eb7(0x301)],0x8),'filled':formatResult(_0x2289ce[_0x545eb7(0x301)],0x8),'price':formatResult(_0x2289ce[_0x545eb7(0x2c3)],0x8)}),_0xd992f2=_0x2289ce['side']==_0x545eb7(0x249)?_0xd992f2+_0x2289ce[_0x545eb7(0x301)]:_0xd992f2-_0x2289ce[_0x545eb7(0x301)];if(!_0x4b4f45)_0x4b4f45=_0x2289ce[_0x545eb7(0x2c3)];});_0x151993=_0x373893[_0x4ed076(0x2a9)]-_0xd992f2;let _0x49f60f;config[_0x4ed076(0x1d7)][_0x4ed076(0x234)](_0x35d5b0=>{const _0x39f828=_0x4ed076;!_0x49f60f&&(_0x49f60f=_0x35d5b0[_0x39f828(0x358)][_0x39f828(0x298)](_0x336d43=>_0x336d43['coin']==_0x373893[_0x39f828(0x2f1)]),_0x49f60f&&(_0x151993=_0x49f60f[_0x39f828(0x2a9)],_0x4b4f45=_0x49f60f[_0x39f828(0x2c3)]));});let _0x9b7aa9=dbCoinResults[_0x4ed076(0x1b4)]('coins')[_0x4ed076(0x298)]({'coin':_0x373893['coin']})[_0x4ed076(0x29c)]();_0x9b7aa9={'coin':_0x373893[_0x4ed076(0x2f1)],'number':_0x151993,'breakeven':_0x4b4f45,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x4ed076(0x1b4)](_0x4ed076(0x335))[_0x4ed076(0x298)]({'coin':_0x373893[_0x4ed076(0x2f1)]})['assign'](_0x9b7aa9)[_0x4ed076(0x1ca)]();}}_0x3c8439[_0x4ed076(0x20e)]((_0x56bf7d,_0x1f0e25)=>_0x56bf7d[_0x4ed076(0x2c5)]>_0x1f0e25[_0x4ed076(0x2c5)]?0x1:_0x1f0e25['datetime']>_0x56bf7d['datetime']?-0x1:0x0);let _0x44108c=0x0;for(let _0x4587e0 of _0x3c8439){await updateCoinResults(_0x4587e0,!![]);}}catch(_0xcb50d2){await handleError(_0xcb50d2,'recreateCoinResults()');}}async function getAllEventOrders(_0x16367f){const _0x305a31=_0x3d847a;let _0x366baa=[],_0x34ec56=dbLogs['get'](_0x305a31(0x1ad))['filter'](_0x53da03=>{const _0x5bce08=_0x305a31,_0x64874c=_0x53da03[_0x5bce08(0x367)][_0x5bce08(0x21e)]();return _0x64874c[_0x5bce08(0x319)](_0x16367f[_0x5bce08(0x21e)]())&&(_0x64874c[_0x5bce08(0x319)](_0x5bce08(0x20b))&&_0x64874c[_0x5bce08(0x319)](_0x5bce08(0x2ce))||_0x64874c['includes'](_0x5bce08(0x301))&&_0x64874c[_0x5bce08(0x319)]('order'));})[_0x305a31(0x337)](_0x305a31(0x1be))[_0x305a31(0x29c)]();return _0x34ec56[_0x305a31(0x234)](_0x63cea4=>{const _0x260176=_0x305a31,_0x88ff66=_0x63cea4[_0x260176(0x367)][_0x260176(0x319)](_0x260176(0x33f))?'sell':_0x260176(0x249),_0x5049a9=/#([0-9]|\.)+\s/i,_0x2d510e=Number(_0x5049a9[_0x260176(0x1ba)](_0x63cea4[_0x260176(0x367)])[0x0][_0x260176(0x2e5)](0x1)),_0x5938d3=/@([0-9]|\.)+$/i,_0x2e9be8=Number(_0x5938d3[_0x260176(0x1ba)](_0x63cea4[_0x260176(0x367)])[0x0]['slice'](0x1));_0x366baa[_0x260176(0x34b)]({'datetime':_0x63cea4['time'],'coin':symbolToCoin(_0x16367f),'symbol':_0x16367f,'side':_0x88ff66,'amount':_0x2d510e,'filled':_0x2d510e,'price':_0x2e9be8});}),_0x366baa;}async function validate24hChanges(){const _0x5c4dfc=_0x3d847a;for(const _0x22ac28 of currentCoins){if(_0x22ac28[_0x5c4dfc(0x2f1)]!=config[_0x5c4dfc(0x258)]){let _0x1f5449;_0x22ac28[_0x5c4dfc(0x1cd)]?_0x1f5449=formatResult((0x1/(gChange[_0x22ac28[_0x5c4dfc(0x317)]]/0x64+0x1)-0x1)*0x64,0x3):_0x1f5449=gChange[_0x22ac28[_0x5c4dfc(0x317)]],_0x1f5449<config[_0x5c4dfc(0x2c2)]&&(logHistory('error',_0x22ac28[_0x5c4dfc(0x2f1)]+_0x5c4dfc(0x1c4)+_0x1f5449+'%'),logHistory('error',_0x5c4dfc(0x334)),logHistory(_0x5c4dfc(0x34c),_0x5c4dfc(0x1fe)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x35e82b,_0x5eef6b){const _0x233fa0=_0x3d847a;if(!_0x35e82b)return!![];const _0x43913b=_0x5eef6b[_0x233fa0(0x23c)]('.'),_0x288018=_0x35e82b[_0x233fa0(0x23c)]('.');for(var _0x110ea5=0x0;_0x110ea5<_0x288018[_0x233fa0(0x225)];_0x110ea5++){const _0x70d3f2=~~_0x288018[_0x110ea5],_0x3b0e24=~~_0x43913b[_0x110ea5];if(_0x70d3f2<_0x3b0e24)return!![];if(_0x70d3f2>_0x3b0e24)return![];}return![];}async function oneTimeMigration(){const _0xe0f3c1=_0x3d847a;let _0x3b5611=dbLogs[_0xe0f3c1(0x1b4)](_0xe0f3c1(0x2cd))['value']();if(isOlderVersion(_0x3b5611,_0xe0f3c1(0x1cf))){let _0x85a3=[];const _0x42ee1d=dbLogs[_0xe0f3c1(0x1b4)]('logs')[_0xe0f3c1(0x29c)]();_0x42ee1d[_0xe0f3c1(0x234)](_0x110ca4=>{const _0x31f36c=_0xe0f3c1;_0x85a3[_0x31f36c(0x34b)]({'time':_0x110ca4[_0x31f36c(0x1be)],'type':_0x110ca4[_0x31f36c(0x2e2)],'event':_0x110ca4['event']});}),dbLogs[_0xe0f3c1(0x1b4)]('logs')[_0xe0f3c1(0x350)](_0x85a3)[_0xe0f3c1(0x1ca)]();}let _0x56c959=dbConfig[_0xe0f3c1(0x1b4)](_0xe0f3c1(0x2cd))[_0xe0f3c1(0x29c)]();if(isOlderVersion(_0x56c959,_0xe0f3c1(0x1cf))){let _0x2b99ae=dbConfig[_0xe0f3c1(0x1b4)](_0xe0f3c1(0x2b3))[_0xe0f3c1(0x298)]({'botID':botID})[_0xe0f3c1(0x29c)]();if(_0x2b99ae){let _0x9ccd4d=[];_0x2b99ae[_0xe0f3c1(0x2de)][_0xe0f3c1(0x234)](_0x5c45ab=>{const _0x4d55f1=_0xe0f3c1;_0x9ccd4d['push']({'coin':_0x5c45ab[_0x4d55f1(0x2f1)],'number':_0x5c45ab[_0x4d55f1(0x33b)],'price':_0x5c45ab[_0x4d55f1(0x2d9)]}),delete _0x5c45ab[_0x4d55f1(0x33b)],delete _0x5c45ab[_0x4d55f1(0x2d9)];});if(_0x9ccd4d['length']!==0x0)fs[_0xe0f3c1(0x2f2)](configbackuppath+(_0xe0f3c1(0x212)+botID+'.json'),JSON[_0xe0f3c1(0x2db)](_0x9ccd4d,null,0x4),function(_0x21035e){if(_0x21035e){}});const _0x5ef3b0=(_0x5e479a,_0x2fcf48)=>{const _0x1a008d=_0xe0f3c1;let _0x681807=[];_0x2fcf48[_0x1a008d(0x234)](_0x2da054=>{const _0x529c2d=_0x1a008d,_0x1ef71c=_0x5e479a[_0x529c2d(0x298)](_0x4221ba=>_0x4221ba['coin']==_0x2da054[_0x529c2d(0x2f1)]);if(!_0x1ef71c)_0x681807['push'](_0x2da054);});let _0x10df9b=[];return _0x5e479a['forEach'](_0xfbf811=>{const _0x351e9f=_0x1a008d,_0xf95fe=_0x2fcf48[_0x351e9f(0x298)](_0x5720fb=>_0x5720fb[_0x351e9f(0x2f1)]==_0xfbf811[_0x351e9f(0x2f1)]);if(!_0xf95fe||_0xf95fe[_0x351e9f(0x2a9)]==0x0&&_0xfbf811[_0x351e9f(0x2a9)]!=0x0)_0x10df9b['push'](_0xfbf811);}),{'missingDay1':_0x681807,'notInDay2':_0x10df9b};},_0x13b5cb=dbPerformance[_0xe0f3c1(0x1b4)](_0xe0f3c1(0x28f))[_0xe0f3c1(0x1a3)]()['value']();if(_0x13b5cb[_0xe0f3c1(0x225)]>0x1){const {missingDay1:_0x44e8e4,notInDay2:_0x2e197b}=_0x5ef3b0(_0x9ccd4d,_0x13b5cb[0x1][_0xe0f3c1(0x335)]);_0x9ccd4d=[..._0x9ccd4d,..._0x44e8e4],_0x2e197b[_0xe0f3c1(0x234)](_0x10a5e3=>{const _0x5b2886=_0xe0f3c1;let _0x44d729=_0x9ccd4d[_0x5b2886(0x314)](_0x84a097=>_0x84a097['coin']==_0x10a5e3['coin']);_0x44d729!=-0x1&&_0x9ccd4d[_0x5b2886(0x271)](_0x44d729,0x1);});}_0x9ccd4d[_0xe0f3c1(0x20e)]((_0xe975da,_0x4e1607)=>_0xe975da[_0xe0f3c1(0x2f1)]>_0x4e1607[_0xe0f3c1(0x2f1)]?0x1:_0x4e1607[_0xe0f3c1(0x2f1)]>_0xe975da[_0xe0f3c1(0x2f1)]?-0x1:0x0);let _0x3f3826=[{'date':_0x2b99ae[_0xe0f3c1(0x2a5)],'changes':_0x9ccd4d}];_0x13b5cb[_0xe0f3c1(0x225)]>0x2&&_0x13b5cb[_0xe0f3c1(0x234)]((_0x2ec85c,_0xe413fb)=>{const _0x515fea=_0xe0f3c1;if(_0xe413fb>0x0&&_0xe413fb<_0x13b5cb[_0x515fea(0x225)]-0x1){const {missingDay1:_0x261df1,notInDay2:_0x241473}=_0x5ef3b0(_0x13b5cb[_0xe413fb][_0x515fea(0x335)],_0x13b5cb[_0xe413fb+0x1][_0x515fea(0x335)]);_0x9ccd4d=[],(_0x261df1['length']!=0x0||_0x241473[_0x515fea(0x225)]!=0x0)&&(_0x261df1[_0x515fea(0x225)]!=0x0&&_0x9ccd4d[_0x515fea(0x34b)](..._0x261df1),_0x241473[_0x515fea(0x225)]!=0x0&&(_0x241473['forEach'](_0x10b403=>{const _0x5d4566=_0x515fea;_0x10b403[_0x5d4566(0x2a9)]=-_0x10b403[_0x5d4566(0x2a9)];}),_0x9ccd4d['push'](..._0x241473)),_0x9ccd4d['sort']((_0x407026,_0x3b0d43)=>_0x407026['coin']>_0x3b0d43[_0x515fea(0x2f1)]?0x1:_0x3b0d43[_0x515fea(0x2f1)]>_0x407026[_0x515fea(0x2f1)]?-0x1:0x0),_0x3f3826[_0x515fea(0x34b)]({'date':_0x13b5cb[_0xe413fb+0x1]['date'],'changes':_0x9ccd4d}));}}),dbConfig['get'](_0xe0f3c1(0x2b3))['find']({'botID':botID})[_0xe0f3c1(0x350)]({..._0x2b99ae,'liquidity':_0x3f3826})['write']();}}if(isOlderVersion(_0x56c959,_0xe0f3c1(0x1df))){let _0x12eeca=dbConfig['get']('bot')[_0xe0f3c1(0x298)]({'botID':botID})['value']();if(_0x12eeca){const _0x577d63=_0x12eeca[_0xe0f3c1(0x306)],_0x24d62c=_0x577d63?capitalize(_0x577d63):_0xe0f3c1(0x285);dbConfig['get'](_0xe0f3c1(0x2b3))['find']({'botID':botID})[_0xe0f3c1(0x350)]({'exchange':_0x24d62c})[_0xe0f3c1(0x1ca)]();}}if(isOlderVersion(_0x56c959,_0xe0f3c1(0x355))){let _0x204f16=dbConfig[_0xe0f3c1(0x1b4)]('bot')['find']({'botID':botID})['value']();if(_0x204f16){const _0x1795ce=_0x204f16[_0xe0f3c1(0x1e2)],_0x3621e5=_0x1795ce?_0xe0f3c1(0x1e5):![];dbConfig[_0xe0f3c1(0x1b4)](_0xe0f3c1(0x2b3))['find']({'botID':botID})[_0xe0f3c1(0x350)]({'marketcapEnabled':_0x3621e5})[_0xe0f3c1(0x1ca)]();}}if(isOlderVersion(_0x56c959,'2.6.23')){let _0x5d0176=dbConfig[_0xe0f3c1(0x1b4)](_0xe0f3c1(0x2b3))[_0xe0f3c1(0x298)]({'botID':botID})[_0xe0f3c1(0x29c)]();if(_0x5d0176){const _0x3c03fd=_0x5d0176['autoliquidity'],_0x517bd6=_0x3c03fd?_0xe0f3c1(0x2b6):![];dbConfig[_0xe0f3c1(0x1b4)](_0xe0f3c1(0x2b3))[_0xe0f3c1(0x298)]({'botID':botID})[_0xe0f3c1(0x350)]({'autoliquidity':_0x517bd6})['write']();}}let _0x223e6b=dbPerformance['get'](_0xe0f3c1(0x2cd))[_0xe0f3c1(0x29c)]();isOlderVersion(_0x223e6b,_0xe0f3c1(0x1cf))&&setStartDatePerformance();let _0x3bd654=dbCoinResults[_0xe0f3c1(0x1b4)](_0xe0f3c1(0x2cd))[_0xe0f3c1(0x29c)]();if(isOlderVersion(_0x3bd654,_0xe0f3c1(0x341))){let _0x1db040=dbCoinResults['get'](_0xe0f3c1(0x335))[_0xe0f3c1(0x29c)]();if(_0x1db040['length']!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x8dba1c=_0x3d847a;dbConfig['set'](_0x8dba1c(0x2cd),serverversion)[_0x8dba1c(0x1ca)](),dbPerformance[_0x8dba1c(0x2a2)](_0x8dba1c(0x2cd),serverversion)[_0x8dba1c(0x1ca)](),dbLogs[_0x8dba1c(0x2a2)](_0x8dba1c(0x2cd),serverversion)[_0x8dba1c(0x1ca)](),dbCoinResults[_0x8dba1c(0x2a2)](_0x8dba1c(0x2cd),serverversion)[_0x8dba1c(0x1ca)]();}function getConfiguration(_0x51238a){const _0x496a64=_0x3d847a;let _0x3b0f74=dbConfig[_0x496a64(0x1b4)](_0x496a64(0x2b3))[_0x496a64(0x298)]({'botID':_0x51238a})[_0x496a64(0x29c)]();if(_0x3b0f74){let _0xcb57ea=![];typeof _0x3b0f74['threshold']==_0x496a64(0x36b)&&(_0x3b0f74={..._0x3b0f74,'threshold':Number(_0x3b0f74[_0x496a64(0x243)])},_0xcb57ea=!![]),_0x3b0f74[_0x496a64(0x2c2)]==undefined&&(_0x3b0f74={..._0x3b0f74,'change24h':-0x14},_0xcb57ea=!![]),_0x3b0f74[_0x496a64(0x19f)]==undefined&&(_0x3b0f74={..._0x3b0f74,'fiat':_0x496a64(0x25a)},_0xcb57ea=!![]),_0x3b0f74[_0x496a64(0x1ef)]==undefined&&(_0x3b0f74={..._0x3b0f74,'onepagemode':settings[_0x496a64(0x1ef)]},_0xcb57ea=!![]),_0x3b0f74['colorscheme']==undefined&&(_0x3b0f74={..._0x3b0f74,'colorscheme':_0x496a64(0x262)},_0xcb57ea=!![]),_0x3b0f74[_0x496a64(0x221)]==undefined&&(_0x3b0f74={..._0x3b0f74,'autoliquidity':'update-liquidity'},_0xcb57ea=!![]),_0x3b0f74[_0x496a64(0x304)]==undefined&&(_0x3b0f74={..._0x3b0f74,'marketcapApi':settings[_0x496a64(0x304)]?!![]:![]},_0xcb57ea=!![]),_0x3b0f74[_0x496a64(0x1e2)]==undefined&&(_0x3b0f74={..._0x3b0f74,'marketcapEnabled':![]},_0xcb57ea=!![]),_0xcb57ea&&(_0x3b0f74={'botID':_0x3b0f74[_0x496a64(0x1b3)],'exchange':_0x3b0f74[_0x496a64(0x306)],'apiKey':_0x3b0f74[_0x496a64(0x1d5)],'apiSecret':_0x3b0f74['apiSecret'],'apiPassword':_0x3b0f74['apiPassword'],'basecoin':_0x3b0f74['basecoin'],'botname':_0x3b0f74[_0x496a64(0x1bd)],'showname':_0x3b0f74[_0x496a64(0x254)],'threshold':_0x3b0f74[_0x496a64(0x243)],'ordertype':_0x3b0f74[_0x496a64(0x1db)],'timeout':_0x3b0f74[_0x496a64(0x1c5)],'fiat':_0x3b0f74['fiat'],'startdate':_0x3b0f74[_0x496a64(0x2a5)],'recreate':_0x3b0f74[_0x496a64(0x31e)],'timeshift':_0x3b0f74[_0x496a64(0x253)],'onepagemode':_0x3b0f74[_0x496a64(0x1ef)],'headless':_0x3b0f74[_0x496a64(0x2a4)],'cooldown':_0x3b0f74['cooldown'],'change24h':_0x3b0f74[_0x496a64(0x2c2)],'emojibuy':_0x3b0f74[_0x496a64(0x22b)],'emojisell':_0x3b0f74[_0x496a64(0x1ac)],'colorscheme':_0x3b0f74[_0x496a64(0x33d)],'marketcapApi':_0x3b0f74['marketcapApi'],'marketcapEnabled':_0x3b0f74['marketcapEnabled'],'portfolio':_0x3b0f74[_0x496a64(0x2de)],'autoliquidity':_0x3b0f74['autoliquidity'],'liquidity':_0x3b0f74[_0x496a64(0x1d7)],'openOrders':_0x3b0f74[_0x496a64(0x331)]},dbConfig[_0x496a64(0x1b4)]('bot')[_0x496a64(0x2e1)]()['write'](),dbConfig[_0x496a64(0x1b4)](_0x496a64(0x2b3))[_0x496a64(0x34b)](_0x3b0f74)[_0x496a64(0x1ca)]());}else _0x3b0f74={'botID':_0x51238a,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x496a64(0x30f)+_0x51238a,'showname':![],'threshold':0x3,'ordertype':_0x496a64(0x20b),'timeout':0x14,'fiat':_0x496a64(0x25a),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x496a64(0x253)],'onepagemode':settings[_0x496a64(0x1ef)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x496a64(0x262),'marketcapApi':settings['marketcapApi']?!![]:![],'marketcapEnabled':![],'portfolio':[],'autoliquidity':_0x496a64(0x2b6),'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x3b0f74;}function emittedConfiguration(){const _0x516735=_0x3d847a;let _0x191e84;if(config[_0x516735(0x1d5)]=='')_0x191e84={...config,'configstate':_0x516735(0x210)};else config[_0x516735(0x1d5)]==_0x516735(0x1aa)?_0x191e84={...config,'configstate':_0x516735(0x2ef)}:(_0x191e84={...config,'apiKey':'************','apiSecret':_0x516735(0x2b7)},config[_0x516735(0x26b)]&&(_0x191e84[_0x516735(0x26b)]=_0x516735(0x2b7)));return _0x191e84[_0x516735(0x27a)]=enableFiatToggle,_0x191e84;}function getSettings(){const _0x106111=_0x3d847a;return dbSettings[_0x106111(0x1b4)](_0x106111(0x286))[_0x106111(0x29c)]();}function _0x4351(_0x2fd62a,_0x166d04){const _0x3b1c8c=_0x44e1();return _0x4351=function(_0x149a28,_0x1d8ec2){_0x149a28=_0x149a28-0x19f;let _0x44e1bc=_0x3b1c8c[_0x149a28];return _0x44e1bc;},_0x4351(_0x2fd62a,_0x166d04);}function getSecure(){const _0xd84ea7=_0x3d847a;return dbSecure[_0xd84ea7(0x1b4)]('secure')[_0xd84ea7(0x29c)]()||{};}function updateTimeshift(_0x4089c1){const _0x26372f=_0x3d847a;let _0x715b04=dbConfig['get'](_0x26372f(0x2b3))[_0x26372f(0x298)]({'botID':botID})[_0x26372f(0x29c)]();_0x715b04&&dbConfig[_0x26372f(0x1b4)](_0x26372f(0x2b3))[_0x26372f(0x298)]({'botID':botID})[_0x26372f(0x350)]({'timeshift':_0x4089c1})['write'](),config['timeshift']=_0x4089c1,proxyEmit(_0x26372f(0x34f),emittedConfiguration());}function updateOnepagemode(_0x564d83){const _0x5238fc=_0x3d847a;let _0x3d8f61=dbConfig[_0x5238fc(0x1b4)](_0x5238fc(0x2b3))[_0x5238fc(0x298)]({'botID':botID})['value']();_0x3d8f61&&dbConfig[_0x5238fc(0x1b4)](_0x5238fc(0x2b3))[_0x5238fc(0x298)]({'botID':botID})[_0x5238fc(0x350)]({'onepagemode':_0x564d83})[_0x5238fc(0x1ca)](),config['onepagemode']=_0x564d83,proxyEmit(_0x5238fc(0x34f),emittedConfiguration());}function updateMarketcapApi(_0x48f351){const _0x1375b9=_0x3d847a,_0x123dc0=_0x48f351?!![]:![];let _0x122683=dbConfig[_0x1375b9(0x1b4)](_0x1375b9(0x2b3))[_0x1375b9(0x298)]({'botID':botID})['value']();_0x122683&&dbConfig['get'](_0x1375b9(0x2b3))[_0x1375b9(0x298)]({'botID':botID})[_0x1375b9(0x350)]({'marketcapApi':_0x123dc0})['write'](),config[_0x1375b9(0x304)]=_0x123dc0,getMarketCap(),proxyEmit(_0x1375b9(0x34f),emittedConfiguration());}async function storeConfiguration(_0x2cc73e){const _0x1c09db=_0x3d847a;logger[_0x1c09db(0x357)](_0x1c09db(0x1fd));if(pidBalances)clearTimeout(pidBalances);setBlockTransactionDetection(!![]);let _0x318121=![],_0x339a7d=![],_0x4eb074=[];_0x2cc73e[_0x1c09db(0x2de)][_0x1c09db(0x234)](_0x540386=>{const _0x33f137=_0x1c09db;if(!_0x540386[_0x33f137(0x1dc)]&&_0x540386[_0x33f137(0x2f1)]!=_0x2cc73e[_0x33f137(0x258)])_0x4eb074[_0x33f137(0x34b)](_0x540386['symbol']);}),_0x4eb074[_0x1c09db(0x234)](_0x26884d=>{const _0x890f6=_0x1c09db,_0x5b0453=currentCoins['find'](_0x372eac=>_0x372eac[_0x890f6(0x317)]==_0x26884d);!_0x5b0453&&(_0x318121=!![]);}),currentCoins['forEach'](_0x3ceed3=>{const _0x227aea=_0x1c09db;if(_0x3ceed3[_0x227aea(0x2f1)]!=config[_0x227aea(0x258)]){const _0x261756=_0x4eb074[_0x227aea(0x298)](_0x2f67e8=>_0x2f67e8==_0x3ceed3[_0x227aea(0x317)]);!_0x261756&&(_0x318121=!![]);}}),_0x2cc73e[_0x1c09db(0x2de)]['forEach'](_0x1c9899=>{const _0x3e2f67=_0x1c09db,_0x2aad4e=config['portfolio'][_0x3e2f67(0x298)](_0x3db034=>_0x3db034[_0x3e2f67(0x2f1)]==_0x1c9899[_0x3e2f67(0x2f1)]);if(_0x2aad4e&&_0x1c9899[_0x3e2f67(0x327)]!=_0x2aad4e[_0x3e2f67(0x327)])_0x339a7d=!![];});let _0x41b189=dbConfig['get'](_0x1c09db(0x2b3))['find']({'botID':botID})['value']();_0x2cc73e={..._0x2cc73e,'apiKey':decryptRSA(secure[_0x1c09db(0x297)],_0x2cc73e['apiKey']),'apiSecret':decryptRSA(secure[_0x1c09db(0x297)],_0x2cc73e[_0x1c09db(0x20f)])};_0x2cc73e[_0x1c09db(0x26b)]&&(_0x2cc73e[_0x1c09db(0x26b)]=decryptRSA(secure[_0x1c09db(0x297)],_0x2cc73e[_0x1c09db(0x26b)]));let _0xeaff16=![];if(_0x41b189){_0x2cc73e['apiKey']==_0x1c09db(0x2b7)?_0x2cc73e[_0x1c09db(0x1d5)]=config[_0x1c09db(0x1d5)]:_0xeaff16=!![];_0x2cc73e[_0x1c09db(0x20f)]==_0x1c09db(0x2b7)?_0x2cc73e['apiSecret']=config[_0x1c09db(0x20f)]:_0xeaff16=!![];if(_0x2cc73e['apiPassword']==_0x1c09db(0x2b7))_0x2cc73e[_0x1c09db(0x26b)]=config['apiPassword'];else{if(_0x2cc73e['apiPassword'])_0xeaff16=!![];}dbConfig[_0x1c09db(0x1b4)](_0x1c09db(0x2b3))[_0x1c09db(0x298)]({'botID':botID})[_0x1c09db(0x350)](_0x2cc73e)[_0x1c09db(0x1ca)]();}else dbConfig[_0x1c09db(0x1b4)](_0x1c09db(0x2b3))[_0x1c09db(0x34b)](_0x2cc73e)[_0x1c09db(0x1ca)](),_0xeaff16=!![],process['send']({'status':_0x1c09db(0x25e),'live':_0x1c09db(0x23b)},_0x1f378b=>{});process['send']({'botname':_0x2cc73e['botname']},_0x12996c=>{}),config={..._0x2cc73e},updateBotManager(),proxyEmit(_0x1c09db(0x324)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0xeaff16)!_0x41b189?await reset(!![]):getBalances();else _0x318121||_0x339a7d?await reset(![]):getBalances();setBlockTransactionDetection(![]);}async function storeHeadless(_0x511f8b){const _0x32d5bc=_0x3d847a,_0x2f3922={...config,'headless':_0x511f8b[_0x32d5bc(0x2a4)]};let _0x365247=dbConfig['get']('bot')[_0x32d5bc(0x298)]({'botID':botID})['value']();_0x365247&&dbConfig['get']('bot')[_0x32d5bc(0x298)]({'botID':botID})['assign'](_0x2f3922)[_0x32d5bc(0x1ca)](),config={..._0x2f3922},updateBotManager(),proxyEmit(_0x32d5bc(0x34f),emittedConfiguration());}async function storeFiat(_0x61d20b){const _0x224f55=_0x3d847a,_0x2ad163={...config,'fiat':_0x61d20b};let _0x42c3f5=dbConfig[_0x224f55(0x1b4)]('bot')[_0x224f55(0x298)]({'botID':botID})[_0x224f55(0x29c)]();_0x42c3f5&&dbConfig[_0x224f55(0x1b4)](_0x224f55(0x2b3))[_0x224f55(0x298)]({'botID':botID})['assign'](_0x2ad163)[_0x224f55(0x1ca)](),config={..._0x2ad163},proxyEmit('configuration',emittedConfiguration());}function resetHistory(){const _0x1e0fca=_0x3d847a;logger['full'](_0x1e0fca(0x2ee));try{if(fs['existsSync'](path[_0x1e0fca(0x339)](configpath,_0x1e0fca(0x27d)+botID+_0x1e0fca(0x274))))fs[_0x1e0fca(0x29b)](path[_0x1e0fca(0x339)](configpath,'bot-'+botID+'-events.json'));if(fs[_0x1e0fca(0x31d)](path[_0x1e0fca(0x339)](configpath,_0x1e0fca(0x27d)+botID+_0x1e0fca(0x2e6))))fs[_0x1e0fca(0x29b)](path[_0x1e0fca(0x339)](configpath,_0x1e0fca(0x27d)+botID+_0x1e0fca(0x2e6)));if(fs[_0x1e0fca(0x31d)](path[_0x1e0fca(0x339)](configpath,'bot-'+botID+_0x1e0fca(0x272))))fs[_0x1e0fca(0x29b)](path[_0x1e0fca(0x339)](configpath,_0x1e0fca(0x27d)+botID+_0x1e0fca(0x272)));}catch(_0x11ebc4){if(_0x11ebc4)logger[_0x1e0fca(0x208)](_0x1e0fca(0x20a),_0x11ebc4);}const _0x2cc356=getDate();let _0x6ae46d=[];currentCoins[_0x1e0fca(0x234)](_0x39444e=>{const _0x2f7c34=_0x1e0fca;_0x6ae46d[_0x2f7c34(0x34b)]({'coin':_0x39444e[_0x2f7c34(0x2f1)],'number':_0x39444e[_0x2f7c34(0x2a9)],'price':_0x39444e['last']});});let _0x35ae9e=dbConfig[_0x1e0fca(0x1b4)](_0x1e0fca(0x2b3))[_0x1e0fca(0x298)]({'botID':botID})['value']();_0x35ae9e&&(dbConfig[_0x1e0fca(0x1b4)](_0x1e0fca(0x2b3))[_0x1e0fca(0x298)]({'botID':botID})[_0x1e0fca(0x350)]({'liquidity':[{'date':_0x2cc356,'changes':_0x6ae46d}]})[_0x1e0fca(0x1ca)](),config[_0x1e0fca(0x1d7)]=[]),restartBot(!![]);}function noslash(_0x3dc29d){const _0x2af835=_0x3d847a;return _0x3dc29d[_0x2af835(0x2cb)]('/','');}function updateHighestFee(_0x1570e2){const _0x1b771b=_0x3d847a;if(_0x1570e2[_0x1b771b(0x1cd)]){let _0x336080={'filled':_0x1570e2[_0x1b771b(0x301)]*_0x1570e2[_0x1b771b(0x2c3)],'amount':_0x1570e2[_0x1b771b(0x301)]*_0x1570e2['price'],'side':_0x1570e2[_0x1b771b(0x33c)]==_0x1b771b(0x33f)?'buy':_0x1b771b(0x33f),'price':0x1/_0x1570e2['price']};_0x1570e2={..._0x1570e2,..._0x336080};}const _0x4a33b7=defaultFee*_0x1570e2[_0x1b771b(0x301)]*_0x1570e2[_0x1b771b(0x2c3)];lastFees[_0x1b771b(0x1c1)][_0x1b771b(0x225)]===0x14&&lastFees[_0x1b771b(0x1c1)]['shift'](),lastFees[_0x1b771b(0x1c1)][_0x1b771b(0x34b)](_0x4a33b7),lastFees['highest']=Math[_0x1b771b(0x296)](...lastFees['recent20']);}async function updateNumberCoinsCcxt(_0x3d68ed){const _0x758d70=_0x3d847a;logger[_0x758d70(0x357)](_0x758d70(0x288)+_0x3d68ed[_0x758d70(0x317)]+_0x758d70(0x202)+_0x3d68ed[_0x758d70(0x2e0)]+_0x758d70(0x202)+_0x3d68ed[_0x758d70(0x301)]+_0x758d70(0x242)+_0x3d68ed['amount']+_0x758d70(0x202)+_0x3d68ed['id']);let _0xb226fc=_0x3d68ed['status'],_0x5f1519=![];currentCoins[_0x758d70(0x234)](_0x44e0dd=>{const _0x355f51=_0x758d70;_0x44e0dd[_0x355f51(0x317)]==_0x3d68ed[_0x355f51(0x317)]&&(_0x5f1519=!![]);});if(!_0x5f1519)return;const _0x55d023=currentCoins[_0x758d70(0x298)](_0x2f7ff4=>_0x2f7ff4[_0x758d70(0x317)]==_0x3d68ed['symbol']),_0x2427c8=_0x55d023[_0x758d70(0x2f1)],_0x78e59d=_0x30e943=>{const _0x1ab970=_0x758d70,_0x3840c9=currentCoins['find'](_0x38ab2b=>_0x38ab2b['symbol']==_0x3d68ed[_0x1ab970(0x317)]);if(_0x3840c9)_0x3840c9[_0x1ab970(0x20d)]=_0x30e943;};let _0x1a3117=![];for(const _0x2b760e of lastOrders){const _0x3a6f9a=0x64,_0x42ecaa=0x1388;let _0x3e1c51=0x0;while(!_0x2b760e[_0x758d70(0x282)]&&_0x3e1c51*_0x3a6f9a<_0x42ecaa){_0x3e1c51++,await sleep(_0x3a6f9a);}if(_0x3e1c51>0x0)logger[_0x758d70(0x357)](_0x758d70(0x263)+_0x3e1c51*_0x3a6f9a/0x3e8+_0x758d70(0x1e8));_0x2b760e[_0x758d70(0x282)]==_0x3d68ed['id']&&(_0x1a3117=!![]);}if(_0xb226fc==_0x758d70(0x2cf)){_0x78e59d(_0x758d70(0x2cf));if(_0x3d68ed[_0x758d70(0x301)]>0x0&&_0x3d68ed[_0x758d70(0x301)]<_0x3d68ed['amount']){if(_0x1a3117){setBlockTransactionDetection(!![]),logger[_0x758d70(0x357)]('1\x20-\x20partially\x20FILLED\x20('+_0x3d68ed[_0x758d70(0x301)]+_0x758d70(0x2fe)+_0x3d68ed['id']);const _0x425f36=await getCoins(balanceUpdateDelay,undefined,undefined,_0x2427c8);[currentCoins,currentCoinsAll]=_0x425f36,setBlockTransactionDetection(![]);}else logger['debug'](_0x758d70(0x278)+_0x3d68ed[_0x758d70(0x301)]+_0x758d70(0x246)+_0x3d68ed['id']),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay);}}else{if(_0xb226fc==_0x758d70(0x22e)){_0x78e59d(_0x758d70(0x22e)),lastOrders=lastOrders[_0x758d70(0x28b)](_0x55679c=>_0x55679c[_0x758d70(0x317)]!=_0x3d68ed[_0x758d70(0x317)]);const _0x4e7a26=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x4e7a26,setBlockTransactionDetection(![]),await getOpenOrders(),handleOpenOrders();}else{if(_0xb226fc==_0x758d70(0x31c)){if(lastOrders)for(const _0x94c09b of lastOrders){if(_0x94c09b['orderId']==_0x3d68ed['id']){logger[_0x758d70(0x357)](_0x758d70(0x27b)+_0x3d68ed['id']),_0x1a3117=!![];if(_0x94c09b[_0x758d70(0x301)]==0x0){setBlockTransactionDetection(!![]),logger[_0x758d70(0x357)](_0x758d70(0x305)+_0x3d68ed['id']);if(_0x3d68ed[_0x758d70(0x35a)])_0x94c09b[_0x758d70(0x2c3)]=_0x3d68ed[_0x758d70(0x35a)];else{if(_0x3d68ed[_0x758d70(0x2c3)])_0x94c09b['price']=_0x3d68ed[_0x758d70(0x2c3)];else{}}_0x94c09b[_0x758d70(0x301)]=_0x3d68ed['filled'],updateHighestFee(_0x94c09b);const _0x4a311e=await getCoins(balanceUpdateDelay,undefined,undefined,_0x2427c8);[currentCoins,currentCoinsAll]=_0x4a311e,setBlockTransactionDetection(![]),await validateOrders(),_0x78e59d('filled'),_0x94c09b['fee']={'currency':_0x3d68ed[_0x758d70(0x232)]?_0x3d68ed['fee'][_0x758d70(0x2c7)]:null,'cost':_0x3d68ed[_0x758d70(0x232)]?_0x3d68ed['fee'][_0x758d70(0x216)]:0x0},await updateCoinResults(_0x94c09b);}}}!_0x1a3117&&(logger[_0x758d70(0x357)](_0x758d70(0x2c4)+_0x3d68ed['id']),_0x78e59d(_0x758d70(0x301)),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay),await updateOpenOrders(),handleOpenOrders());}}}if(lastBalances){let _0x3c935a=JSON[_0x758d70(0x24f)](lastBalances[_0x758d70(0x2de)]);const _0x71d89b=_0x3c935a[_0x758d70(0x298)](_0x52f44d=>_0x52f44d[_0x758d70(0x317)]==_0x3d68ed['symbol']);if(_0x71d89b){if(_0xb226fc=='open')_0x71d89b[_0x758d70(0x20d)]=_0x71d89b[_0x758d70(0x20d)]==_0x758d70(0x301)?_0x758d70(0x301):_0x758d70(0x2cf);else{if(_0xb226fc=='canceled')_0x71d89b[_0x758d70(0x20d)]=_0x71d89b['orderstatus']==_0x758d70(0x301)?'filled':'canceled';else _0xb226fc==_0x758d70(0x31c)&&(_0x71d89b[_0x758d70(0x20d)]=_0x758d70(0x301));}}lastBalances={...lastBalances,'portfolio':JSON[_0x758d70(0x2db)](_0x3c935a)},proxyEmit(_0x758d70(0x2d5),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x29b4c1=_0x3d847a;await getOpenOrders();let _0x4603e4=![];currentCoins[_0x29b4c1(0x234)](_0x378739=>{const _0x6fd4a4=_0x29b4c1;_0x4603e4=allOpenOrders[_0x6fd4a4(0x298)](_0x5c717b=>_0x5c717b['symbol']==_0x378739[_0x6fd4a4(0x317)]),_0x378739['orderstatus']=_0x4603e4?_0x6fd4a4(0x2cf):_0x6fd4a4(0x2d0);});}async function fetchBalance(_0x54fdb4=!![]){const _0x28032a=_0x3d847a;let _0x607fc,_0x153a7b;try{return _0x607fc=await exchange[_0x28032a(0x2fc)](),_0x153a7b=_0x607fc[_0x28032a(0x2b8)],_0x153a7b;}catch(_0x268463){return!_0x54fdb4?handleErrorNoStop(_0x268463,_0x28032a(0x1d1)):await handleError(_0x268463,_0x28032a(0x1d1)),![];}}async function getCoins(_0x260e2c=0x0,_0x22d102=!![],_0xd5266b=config[_0x3d847a(0x258)],_0x419422){const _0x13b2a2=_0x3d847a;let _0x22d40c=[],_0x5d11d2=[],_0x39f047=[],_0x3a22e4;if(_0x260e2c)await sleep(_0x260e2c);if(botPaused)return[currentCoins,currentCoinsAll];let _0x4c09e1=![],_0x14719f=0x0,_0x3ef487,_0x15cb03;_0x419422&&(_0x3ef487=currentCoins['find'](_0x5e8b8d=>_0x5e8b8d['coin']==_0x419422),_0x3ef487&&(_0x15cb03=_0x3ef487['prevnumber'],delete _0x3ef487[_0x13b2a2(0x2aa)]));while(!_0x4c09e1){_0x3a22e4=await fetchBalance(_0x22d102);if(_0x3a22e4){if(_0x419422){if(_0x3a22e4[_0x419422]!=_0x15cb03)logger['debug'](_0x13b2a2(0x1f9)+_0x419422+':\x20'+_0x3a22e4[_0x419422]+'\x20('+_0x15cb03+')'),_0x4c09e1=!![];else{logger['debug']('Invalid\x20balance\x20for\x20'+_0x419422+':\x20'+_0x3a22e4[_0x419422]+'\x20('+_0x15cb03+')'),_0x14719f++;if(_0x14719f<balanceUpdateRetries)await sleep(balanceUpdateDelay);else{logger[_0x13b2a2(0x357)]('Stopped\x20fetching\x20balance\x20after\x20'+_0x14719f+_0x13b2a2(0x1a6));break;}}}else break;}else return[currentCoins,currentCoinsAll];}for(const [_0x5f3c75,_0x469453]of Object[_0x13b2a2(0x2ff)](_0x3a22e4)){_0x39f047[_0x13b2a2(0x34b)](_0x5f3c75);}config[_0x13b2a2(0x2de)]['forEach'](_0x4b9263=>{const _0x3eb432=_0x13b2a2;!_0x39f047[_0x3eb432(0x319)](_0x4b9263[_0x3eb432(0x2f1)])&&(_0x3a22e4[_0x4b9263[_0x3eb432(0x2f1)]]=0x0);});if(_0xd5266b=='')for(const [_0x2a2b85,_0x2e811c]of Object['entries'](_0x3a22e4)){_0x2e811c!=0x0&&_0x22d40c[_0x13b2a2(0x34b)]({'coin':_0x2a2b85});}else for(const [_0x392351,_0x49197f]of Object['entries'](_0x3a22e4)){const _0xe0902d=config['portfolio'][_0x13b2a2(0x298)](_0x51816a=>_0x51816a[_0x13b2a2(0x2f1)]==_0x392351),_0x3f01ef=_0x392351+'/'+_0xd5266b,_0x37a7bb=_0xd5266b+'/'+_0x392351,_0x14f105=currentCoins[_0x13b2a2(0x298)](_0x3ab751=>_0x3ab751['coin']==_0x392351);if((_0x49197f!=0x0||_0xe0902d)&&(allSymbols[_0x13b2a2(0x319)](_0x3f01ef)||_0x392351==_0xd5266b))_0x14f105?_0x22d40c[_0x13b2a2(0x34b)]({..._0x14f105,'number':Math[_0x13b2a2(0x296)](_0x49197f+(_0xe0902d&&_0xe0902d[_0x13b2a2(0x327)]||0x0),0x0)}):_0x22d40c[_0x13b2a2(0x34b)]({'coin':_0x392351,'symbol':_0x3f01ef,'reverse':![],'number':Math[_0x13b2a2(0x296)](_0x49197f+(_0xe0902d&&_0xe0902d[_0x13b2a2(0x327)]||0x0),0x0),'orderstatus':_0x13b2a2(0x2d0)});else{if((_0x49197f!=0x0||_0xe0902d)&&allSymbols[_0x13b2a2(0x319)](_0x37a7bb))_0x14f105?_0x22d40c['push']({..._0x14f105,'number':Math['max'](_0x49197f+(_0xe0902d&&_0xe0902d[_0x13b2a2(0x327)]||0x0),0x0)}):_0x22d40c[_0x13b2a2(0x34b)]({'coin':_0x392351,'symbol':_0x37a7bb,'reverse':!![],'number':Math[_0x13b2a2(0x296)](_0x49197f+(_0xe0902d&&_0xe0902d[_0x13b2a2(0x327)]||0x0),0x0),'orderstatus':_0x13b2a2(0x2d0)});else _0xe0902d&&_0x22d40c[_0x13b2a2(0x34b)]({'coin':_0xe0902d[_0x13b2a2(0x2f1)],'symbol':_0xe0902d[_0x13b2a2(0x317)],'reverse':_0xe0902d[_0x13b2a2(0x1cd)],'number':0x0,'orderstatus':_0x13b2a2(0x2d0)});}}return _0x22d40c[_0x13b2a2(0x20e)]((_0x145f09,_0x406614)=>_0x145f09[_0x13b2a2(0x247)]<_0x406614[_0x13b2a2(0x247)]?0x1:_0x406614[_0x13b2a2(0x247)]<_0x145f09[_0x13b2a2(0x247)]?-0x1:0x0),_0x5d11d2=cloneDeep(_0x22d40c),_0x22d40c=_0x22d40c['filter'](_0x590138=>{const _0x320b05=_0x13b2a2,_0x4479f3=config[_0x320b05(0x2de)][_0x320b05(0x298)](_0x5668b6=>_0x5668b6['coin']==_0x590138[_0x320b05(0x2f1)]);return _0x4479f3&&!_0x4479f3[_0x320b05(0x1dc)];}),[_0x22d40c,_0x5d11d2];}async function getCoinNumber(_0x589925){const _0x4a0b49=_0x3d847a;let _0x1332d9;try{const _0x18942d=await exchange[_0x4a0b49(0x2fc)]();_0x1332d9=_0x18942d['total'][_0x589925];}catch(_0x5748fa){await handleError(_0x5748fa,_0x4a0b49(0x360));}return _0x1332d9;}async function getOpenOrders(){const _0x2ccb6e=_0x3d847a;let _0x1307cb;allOpenOrders=[];try{for(const _0x4940d5 of config['portfolio']){!_0x4940d5[_0x2ccb6e(0x1dc)]&&_0x4940d5['coin']!=config[_0x2ccb6e(0x258)]&&(_0x1307cb=await exchange[_0x2ccb6e(0x1ee)](_0x4940d5['symbol']),_0x1307cb[_0x2ccb6e(0x225)]>0x0&&allOpenOrders[_0x2ccb6e(0x34b)](_0x1307cb[0x0]));}}catch(_0x2c32a2){await handleError(_0x2c32a2,_0x2ccb6e(0x1c2));}}async function handleOpenOrders(_0x37a92a=0x0){const _0x43a180=_0x3d847a;allOpenOrders[_0x43a180(0x225)]==0x0&&lockOrders==ORDERS[_0x43a180(0x31f)]&&allOrdersPlaced&&(_0x37a92a==0x0?(logger[_0x43a180(0x357)](_0x43a180(0x1ae)),_0x37a92a++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger['debug']('2\x20-\x20Handled\x20open\x20orders'),validateOrders(_0x43a180(0x369))));}async function testAPI(_0x2da776){const _0x1c96a4=_0x3d847a;logger[_0x1c96a4(0x357)](_0x1c96a4(0x363));const _0x47d550=ccxt['pro'][_0x2da776[_0x1c96a4(0x306)][_0x1c96a4(0x21e)]()],_0x3176e2=new _0x47d550({'apiKey':_0x2da776[_0x1c96a4(0x1d5)],'secret':_0x2da776[_0x1c96a4(0x20f)],'options':{'defaultType':_0x1c96a4(0x1c3)}});if(_0x2da776[_0x1c96a4(0x26b)])_0x3176e2[_0x1c96a4(0x1bb)]=_0x2da776['apiPassword'];try{await _0x3176e2[_0x1c96a4(0x2fc)]();}catch(_0x1838b1){logger[_0x1c96a4(0x357)]('Error\x20in\x20testAPI():\x20'+_0x1838b1[_0x1c96a4(0x31b)]());throw _0x1838b1;}}function cloneDeep(_0xa9ff39){const _0x279d92=_0x3d847a;return JSON['parse'](JSON[_0x279d92(0x2db)](_0xa9ff39));}async function getPortfolio(_0x2ce27b){const _0x56cc9e=_0x3d847a;let _0x524e4b=[],_0x59b67a=[],_0x7a6670=[],_0xfd8990;_0x2ce27b[_0x56cc9e(0x1d5)]=decryptRSA(secure['privateKey'],_0x2ce27b[_0x56cc9e(0x1d5)]),_0x2ce27b[_0x56cc9e(0x20f)]=decryptRSA(secure[_0x56cc9e(0x297)],_0x2ce27b[_0x56cc9e(0x20f)]);if(_0x2ce27b[_0x56cc9e(0x26b)])_0x2ce27b['apiPassword']=decryptRSA(secure[_0x56cc9e(0x297)],_0x2ce27b['apiPassword']);if(_0x2ce27b[_0x56cc9e(0x1d5)]!==_0x56cc9e(0x2b7)||_0x2ce27b[_0x56cc9e(0x20f)]!==_0x56cc9e(0x2b7)||_0x2ce27b[_0x56cc9e(0x26b)]&&_0x2ce27b[_0x56cc9e(0x26b)]!=='************'){if(config['exchange']){if(_0x2ce27b[_0x56cc9e(0x1d5)]==_0x56cc9e(0x2b7))_0x2ce27b[_0x56cc9e(0x1d5)]=config[_0x56cc9e(0x1d5)];if(_0x2ce27b['apiSecret']==_0x56cc9e(0x2b7))_0x2ce27b[_0x56cc9e(0x20f)]=config[_0x56cc9e(0x20f)];if(_0x2ce27b[_0x56cc9e(0x26b)]==_0x56cc9e(0x2b7))_0x2ce27b[_0x56cc9e(0x26b)]=config[_0x56cc9e(0x26b)];}try{if(_0x2ce27b[_0x56cc9e(0x1c7)])await testAPI(_0x2ce27b);}catch(_0x29a561){if(_0x29a561[_0x56cc9e(0x31b)]()[_0x56cc9e(0x319)](_0x56cc9e(0x302))){logHistory(_0x56cc9e(0x34c),'Invalid\x20API\x20details,\x20please\x20try\x20again\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange'),logHistory(_0x56cc9e(0x34c),'Error\x20details:\x20'+_0x29a561[_0x56cc9e(0x31b)]()),proxyEmit(_0x56cc9e(0x354),![]);return;}else{if(_0x29a561[_0x56cc9e(0x31b)]()['includes'](_0x56cc9e(0x29d))){logHistory(_0x56cc9e(0x34c),'Exchange\x20permission\x20denied\x20-\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange'),logHistory(_0x56cc9e(0x34c),_0x56cc9e(0x349)+_0x29a561[_0x56cc9e(0x31b)]()),proxyEmit(_0x56cc9e(0x354),![]);return;}else{logHistory('error','Error\x20occurred:\x20'+_0x29a561['toString']()),logger[_0x56cc9e(0x357)](_0x56cc9e(0x233),_0x29a561),proxyEmit(_0x56cc9e(0x354),![]);return;}}}exchange?updateExchange(_0x2ce27b[_0x56cc9e(0x1d5)],_0x2ce27b[_0x56cc9e(0x20f)],_0x2ce27b[_0x56cc9e(0x26b)]):await initExchange(_0x2ce27b[_0x56cc9e(0x306)],_0x2ce27b[_0x56cc9e(0x1d5)],_0x2ce27b[_0x56cc9e(0x20f)],_0x2ce27b[_0x56cc9e(0x26b)]);await loadSymbols();const _0x2915aa=await getCoins(0x0,![],_0x2ce27b[_0x56cc9e(0x258)]);_0x7a6670=cloneDeep(_0x2915aa[0x1]);}else{const _0x50102d=await getCoins();_0x7a6670=cloneDeep(_0x50102d[0x1]);}if(_0x2ce27b['basecoin']=='')proxyEmit(_0x56cc9e(0x354),!![]),proxyEmit('portfolio2',_0x7a6670);else{_0x7a6670[_0x56cc9e(0x234)](_0x4c0878=>{const _0x27f545=_0x56cc9e;if(_0x4c0878[_0x27f545(0x2f1)]!=_0x2ce27b['basecoin']&&allSymbols[_0x27f545(0x319)](_0x4c0878['symbol']))_0x524e4b[_0x27f545(0x34b)](_0x4c0878[_0x27f545(0x317)]);});if(_0x524e4b[_0x56cc9e(0x225)]==0x0)logHistory(_0x56cc9e(0x34c),_0x56cc9e(0x20c));else{try{_0x59b67a=await getTickers(_0x524e4b);}catch(_0x387a54){logHistory(_0x56cc9e(0x34c),_0x56cc9e(0x1fc)),logger[_0x56cc9e(0x357)](_0x56cc9e(0x233),_0x387a54),proxyEmit(_0x56cc9e(0x354),![]);return;}_0x7a6670[_0x56cc9e(0x234)](_0x4f3e0f=>{const _0x5631e3=_0x56cc9e;_0x4f3e0f['coin']!=_0x2ce27b['basecoin']?_0x59b67a[_0x4f3e0f[_0x5631e3(0x317)]]?_0xfd8990=_0x4f3e0f[_0x5631e3(0x1cd)]?0x1/_0x59b67a[_0x4f3e0f[_0x5631e3(0x317)]]['last']:_0x59b67a[_0x4f3e0f['symbol']][_0x5631e3(0x21c)]:_0xfd8990=0x0:_0xfd8990=0x1,_0x4f3e0f['price']=formatResult(_0xfd8990,0x8);}),await getMarketCap(_0x7a6670),proxyEmit(_0x56cc9e(0x354),!![]),proxyEmit(_0x56cc9e(0x313),_0x7a6670);}}}function truncateTradeAmount(_0x448e05,_0x5cd60d){let _0xdcbbe9=0x0;try{_0xdcbbe9=exchange['amountToPrecision'](_0x448e05,_0x5cd60d);}catch(_0x6cade4){}return _0xdcbbe9;}function checkMinimums(_0x5b61c8){const _0x26abdf=_0x3d847a;let _0x425579=!![];const _0x45f593=!_0x5b61c8['reverse']?markets[_0x5b61c8[_0x26abdf(0x317)]][_0x26abdf(0x2fb)][_0x26abdf(0x330)]['min']:markets[_0x5b61c8[_0x26abdf(0x317)]]['limits']['cost'][_0x26abdf(0x224)],_0x249750=!_0x5b61c8[_0x26abdf(0x1cd)]?markets[_0x5b61c8['symbol']][_0x26abdf(0x2fb)][_0x26abdf(0x216)][_0x26abdf(0x224)]:markets[_0x5b61c8[_0x26abdf(0x317)]][_0x26abdf(0x2fb)][_0x26abdf(0x330)][_0x26abdf(0x224)],_0x39276f=truncateTradeAmount(_0x5b61c8[_0x26abdf(0x317)],_0x5b61c8[_0x26abdf(0x267)]);_0x5b61c8['trade']=_0x39276f;if(Math[_0x26abdf(0x1f3)](_0x39276f)<_0x45f593)_0x425579=![];if(Math['abs'](_0x39276f)*_0x5b61c8['last']<_0x249750)_0x425579=![];if(_0x5b61c8[_0x26abdf(0x33c)]==_0x26abdf(0x33f)){let _0xc181b4=config[_0x26abdf(0x2de)]['find'](_0x59582b=>_0x59582b[_0x26abdf(0x2f1)]==_0x5b61c8['coin']);if(_0xc181b4[_0x26abdf(0x327)]>0x0){if(Math[_0x26abdf(0x1f3)](_0x39276f)>_0x5b61c8[_0x26abdf(0x2a9)]-_0xc181b4[_0x26abdf(0x327)])_0x425579=![];}else{if(Math[_0x26abdf(0x1f3)](_0x39276f)>_0x5b61c8[_0x26abdf(0x2a9)])_0x425579=![];}}if(_0x5b61c8[_0x26abdf(0x33c)]==_0x26abdf(0x249)){let _0x596b96=config[_0x26abdf(0x2de)][_0x26abdf(0x298)](_0x39f771=>_0x39f771['coin']==config[_0x26abdf(0x258)]),_0x5af393=currentCoins[_0x26abdf(0x298)](_0xa7f15a=>_0xa7f15a[_0x26abdf(0x2f1)]==config['basecoin']);if(_0x596b96[_0x26abdf(0x327)]>0x0){if(Math[_0x26abdf(0x1f3)](_0x39276f)*_0x5b61c8['last']>_0x5af393[_0x26abdf(0x2a9)]-_0x596b96['offset'])_0x425579=![];}else{if(Math[_0x26abdf(0x1f3)](_0x39276f)*_0x5b61c8[_0x26abdf(0x21c)]>_0x5af393['number'])_0x425579=![];}}return _0x425579;}async function getBalances(_0x2ff61b=!![]){const _0x253d44=_0x3d847a;if(botPaused)return;let _0x2248fe=0x0,_0x17c3cb;const _0x4c9ba3=config[_0x253d44(0x243)];if(config['headless']&&config[_0x253d44(0x2c2)]<0x0)await validate24hChanges();currentCoins['forEach'](_0x4f1326=>{const _0x44d279=_0x253d44;if(_0x4f1326['coin']!=config['basecoin']){let _0x1597d4=gTicker[noslash(_0x4f1326[_0x44d279(0x317)])];_0x17c3cb=_0x4f1326[_0x44d279(0x1cd)]?0x1/_0x1597d4:_0x1597d4;}else _0x17c3cb=0x1;let _0x568bdc=_0x4f1326[_0x44d279(0x2a9)]*_0x17c3cb;_0x2248fe+=_0x568bdc,_0x4f1326[_0x44d279(0x21c)]=formatResult(Number(_0x17c3cb),0x8),_0x4f1326[_0x44d279(0x29c)]=_0x568bdc;}),currentCoins[_0x253d44(0x234)](_0x3678ba=>{const _0x3ac9f3=_0x253d44;let _0x5a1550=config['portfolio'][_0x3ac9f3(0x298)](_0x388f8f=>_0x388f8f[_0x3ac9f3(0x2f1)]==_0x3678ba[_0x3ac9f3(0x2f1)]),_0x155955=Number(_0x5a1550[_0x3ac9f3(0x352)]),_0x5387d2=_0x3678ba[_0x3ac9f3(0x29c)]/_0x2248fe*0x64,_0x24c6fd=_0x155955*_0x2248fe/0x64/_0x3678ba['last']-_0x3678ba[_0x3ac9f3(0x2a9)];_0x3678ba[_0x3ac9f3(0x352)]=formatResult(_0x5387d2,0x3),_0x3678ba[_0x3ac9f3(0x323)]=formatResult(_0x155955,0x3),_0x3678ba[_0x3ac9f3(0x267)]=formatResult(_0x24c6fd,0x8),_0x3678ba[_0x3ac9f3(0x33c)]='',_0x3678ba[_0x3ac9f3(0x364)]=![];if(_0x3678ba[_0x3ac9f3(0x2f1)]!=config['basecoin']){if(_0x3678ba[_0x3ac9f3(0x352)]>_0x155955)_0x3678ba['side']=_0x3ac9f3(0x33f),_0x3678ba['valid']=checkMinimums(_0x3678ba);else _0x3678ba['distribution']<_0x155955&&(_0x3678ba[_0x3ac9f3(0x33c)]=_0x3ac9f3(0x249),_0x3678ba[_0x3ac9f3(0x364)]=checkMinimums(_0x3678ba));}_0x3678ba[_0x3ac9f3(0x247)]=_0x3678ba[_0x3ac9f3(0x352)]/_0x3678ba[_0x3ac9f3(0x323)]-0x1;if(_0x3678ba['orderstatus']==_0x3ac9f3(0x301)||_0x3678ba[_0x3ac9f3(0x20d)]==_0x3ac9f3(0x22e))_0x3678ba[_0x3ac9f3(0x20d)]=_0x3ac9f3(0x2d0);}),currentCoins['sort']((_0x33b173,_0x54fcbb)=>_0x33b173[_0x253d44(0x247)]<_0x54fcbb['delta']?0x1:_0x54fcbb[_0x253d44(0x247)]<_0x33b173[_0x253d44(0x247)]?-0x1:0x0);const _0x30907d=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x30907d[_0x253d44(0x1b9)],'usd':_0x30907d[_0x253d44(0x1a8)],'portfolio':JSON[_0x253d44(0x2db)](currentCoins),'threshold':_0x4c9ba3},proxyEmit(_0x253d44(0x2d5),{'serverversion':serverversion,'balances':lastBalances});if(_0x2ff61b){if(config[_0x253d44(0x2a4)])headlessMode({'portfolio':currentCoins,'threshold':_0x4c9ba3});else lockOrders==ORDERS[_0x253d44(0x2c9)]&&!coolingDown&&notifyBalance({'portfolio':currentCoins,'threshold':_0x4c9ba3});}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x14f6ed=getNormalizedPerformance();getStartingBalances(_0x14f6ed),emitPerformance(_0x14f6ed);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x5f269d=_0x3d847a;if(!lastBalances)return;let _0x398e88=[],_0x483e2b,_0x1f993f=JSON[_0x5f269d(0x24f)](lastBalances[_0x5f269d(0x2de)]);_0x1f993f[_0x5f269d(0x20e)]((_0x553cce,_0x32fb28)=>_0x553cce[_0x5f269d(0x2f1)]>_0x32fb28['coin']?0x1:_0x32fb28['coin']>_0x553cce[_0x5f269d(0x2f1)]?-0x1:0x0),_0x1f993f['forEach'](_0x459e29=>{const _0x428e4a=_0x5f269d;let _0x48df8b={'coin':_0x459e29[_0x428e4a(0x2f1)],'number':_0x459e29[_0x428e4a(0x2a9)],'price':_0x459e29[_0x428e4a(0x21c)]};_0x398e88[_0x428e4a(0x34b)](_0x48df8b);});const _0x4c6eb0=await getFiat();_0x483e2b={'date':lastBalances[_0x5f269d(0x1be)]['split']('\x20')[0x0],'eur':_0x4c6eb0[_0x5f269d(0x1b9)],'usd':_0x4c6eb0[_0x5f269d(0x1a8)],'coins':_0x398e88};let _0xe828ed=dbPerformance['get'](_0x5f269d(0x28f))[_0x5f269d(0x298)]({'date':_0x483e2b['date']})[_0x5f269d(0x29c)]();_0xe828ed?_0x483e2b['date']!=config[_0x5f269d(0x2a5)]&&dbPerformance[_0x5f269d(0x1b4)]('data')['find']({'date':_0x483e2b[_0x5f269d(0x2a3)]})[_0x5f269d(0x350)](_0x483e2b)['write']():dbPerformance[_0x5f269d(0x1b4)](_0x5f269d(0x28f))['push'](_0x483e2b)[_0x5f269d(0x1ca)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x42670f=_0x3d847a;let _0x27d25c=[];if(dbPerformance[_0x42670f(0x218)](_0x42670f(0x28f))[_0x42670f(0x29c)]()){let _0x4fa661=dbPerformance['get'](_0x42670f(0x28f))[_0x42670f(0x1a3)]()['filter'](_0x46737b=>{const _0x57a870=_0x42670f;if(_0x46737b[_0x57a870(0x335)][_0x57a870(0x225)]==0x0)return![];else return!![];})['sortBy']('date')[_0x42670f(0x29c)](),_0x5b1998=[...config['liquidity']];_0x5b1998['sort']((_0x128527,_0x2ca3c6)=>_0x128527[_0x42670f(0x2a3)]>_0x2ca3c6[_0x42670f(0x2a3)]?-0x1:_0x2ca3c6[_0x42670f(0x2a3)]>_0x128527['date']?0x1:0x0);let _0x45666a=0x1,_0x27c633=[],_0x5bcec3=0x0;_0x4fa661['slice']()[_0x42670f(0x1cd)]()[_0x42670f(0x234)]((_0x35a54f,_0x335aa)=>{const _0x65714f=_0x42670f;if(_0x5b1998[_0x5bcec3]){if(_0x4fa661[_0x4fa661['length']-_0x335aa]&&_0x5b1998[_0x5bcec3]['date']==_0x4fa661[_0x4fa661[_0x65714f(0x225)]-_0x335aa]['date']){if(_0x335aa<_0x4fa661[_0x65714f(0x225)]){let _0x3d09f5=0x0,_0x3b15e9=0x0;_0x4fa661[_0x4fa661[_0x65714f(0x225)]-_0x335aa]['coins'][_0x65714f(0x234)](_0x6353b2=>{const _0x1d241a=_0x65714f;_0x3b15e9+=_0x6353b2[_0x1d241a(0x2a9)]*_0x6353b2[_0x1d241a(0x2c3)];}),_0x5b1998[_0x5bcec3]['changes'][_0x65714f(0x234)](_0xd8c20b=>{const _0x5e194e=_0x65714f;_0x3d09f5+=_0xd8c20b[_0x5e194e(0x2a9)]*_0xd8c20b[_0x5e194e(0x2c3)];}),_0x45666a*=_0x3d09f5/(_0x3b15e9-_0x3d09f5)+0x1;}_0x5bcec3++;}}let _0x59defb=0x0;_0x35a54f[_0x65714f(0x335)][_0x65714f(0x234)](_0x5fe1da=>{const _0x549340=_0x65714f;_0x59defb+=_0x5fe1da[_0x549340(0x2a9)]*_0x5fe1da['price'];}),_0x27c633[_0x4fa661[_0x65714f(0x225)]-_0x335aa-0x1]=_0x59defb*(_0x45666a-0x1);});let _0x5204f3=[];_0x5b1998=[...config[_0x42670f(0x1d7)]]||[];let _0x16e2fc=0x0;_0x5bcec3=0x0,_0x4fa661[_0x42670f(0x234)]((_0xfe86b1,_0x526084)=>{const _0x1df8a7=_0x42670f;if(_0x5b1998[_0x5bcec3]){const _0x43dddd=fns['parse'](_0x5b1998[_0x5bcec3][_0x1df8a7(0x2a3)],'yyyy/MM/dd',new Date()),_0x1ea3ae=fns['parse'](_0xfe86b1['date'],_0x1df8a7(0x256),new Date());if(fns[_0x1df8a7(0x35c)](_0x43dddd,_0x1ea3ae)){let _0x46a23d=0x0;_0x5b1998[_0x5bcec3]['changes'][_0x1df8a7(0x234)](_0x25c816=>{const _0x1152a5=_0x1df8a7;!_0x5204f3[_0x25c816['coin']]?_0x5204f3[_0x25c816[_0x1152a5(0x2f1)]]=_0x25c816['number']:(_0x46a23d=_0x5204f3[_0x25c816[_0x1152a5(0x2f1)]],_0x5204f3[_0x25c816['coin']]+=_0x25c816[_0x1152a5(0x2a9)]);const _0x158134=_0xfe86b1[_0x1152a5(0x335)][_0x1152a5(0x298)](_0x16e298=>_0x16e298[_0x1152a5(0x2f1)]==_0x25c816['coin']);(!_0x158134||_0x158134[_0x1152a5(0x2a9)]==0x0)&&(_0x16e2fc+=(-_0x25c816[_0x1152a5(0x2a9)]-_0x46a23d)*_0x25c816['price']);}),_0x5bcec3++;}}_0xfe86b1[_0x1df8a7(0x335)][_0x1df8a7(0x234)]((_0x237266,_0xf8d63e)=>{const _0xfc851=_0x1df8a7;_0x5204f3[_0x237266[_0xfc851(0x2f1)]]&&(_0x237266[_0xfc851(0x210)]=_0x5204f3[_0x237266[_0xfc851(0x2f1)]]);}),_0x27d25c[_0x1df8a7(0x34b)]({'date':_0xfe86b1[_0x1df8a7(0x2a3)],'eur':_0xfe86b1[_0x1df8a7(0x1b9)],'usd':_0xfe86b1[_0x1df8a7(0x1a8)],'offset':_0x27c633[_0x526084],'netoffset':_0x16e2fc,'coins':_0xfe86b1['coins']});});}return _0x27d25c;}function emitPerformance(_0x58ed90){const _0x304840=_0x3d847a;_0x58ed90[_0x304840(0x225)]!==0x0?(proxyEmit(_0x304840(0x32c),_0x58ed90),lastPerformanceEmitted=getDate()):proxyEmit(_0x304840(0x32c),[]);}function getPerf(_0x5efd41,_0x421d34){const _0x4c23fd=_0x3d847a;let _0x2af3d6=0x0,_0xfbb4b5=0x0,_0x442e28=0x0;_0x5efd41['coins'][_0x4c23fd(0x234)](_0x506f0b=>{const _0xbc9489=_0x4c23fd;_0x2af3d6+=_0x506f0b[_0xbc9489(0x2a9)]*_0x506f0b[_0xbc9489(0x2c3)];});_0x421d34&&(_0x2af3d6+=_0x5efd41[_0x4c23fd(0x327)]);if(config[_0x4c23fd(0x258)]===_0x4c23fd(0x2e3)||config[_0x4c23fd(0x258)]==='ETH'||config['basecoin']==='PAXG')_0xfbb4b5=_0x2af3d6*_0x5efd41[_0x4c23fd(0x1b9)],_0x442e28=_0x2af3d6*_0x5efd41['usd'];else{if(usdBasecoins['includes'](config[_0x4c23fd(0x258)]))_0xfbb4b5=_0x2af3d6*_0x5efd41[_0x4c23fd(0x1b9)]/_0x5efd41[_0x4c23fd(0x1a8)],_0x442e28=_0x2af3d6;else config['basecoin']==='EUR'&&(_0xfbb4b5=_0x2af3d6,_0x442e28=_0x2af3d6*_0x5efd41['usd']/_0x5efd41[_0x4c23fd(0x1b9)]);}return[_0x2af3d6,_0xfbb4b5,_0x442e28];}function getKPIs(_0xa72528,_0x360a9b=_0x3d847a(0x325)){const _0x446675=_0x3d847a,_0x45fcf3=config[_0x446675(0x258)],_0x382780=lastBalances,_0x24dc4c=currentCoins,_0x407dbb=getNormalizedPerformance(),_0x528118=_0xa72528==='basecoin'?_0x45fcf3:_0xa72528===_0x446675(0x19f)||_0xa72528==='net-fiat'?_0x360a9b:_0x446675(0x2af)+_0x45fcf3,_0x4f4bff=_0xa72528===_0x446675(0x1bc)?'Net\x20effect':_0xa72528==='net-fiat'?_0x446675(0x269):_0x528118+_0x446675(0x2b4),_0x620d5a=_0xa72528==='net-basecoin'||_0xa72528==='net-fiat'?_0x446675(0x269):_0x528118+'\x20change';let _0x3d1f3f=0x0;_0x24dc4c[_0x446675(0x234)](_0x574079=>{const _0x548564=_0x446675;_0x3d1f3f+=_0x574079[_0x548564(0x2a9)]*_0x574079['last'];});if(_0xa72528===_0x446675(0x19f)||_0xa72528===_0x446675(0x240)){if(_0x45fcf3==='BTC'||_0x45fcf3===_0x446675(0x326)||_0x45fcf3===_0x446675(0x1cc))_0x3d1f3f=_0x3d1f3f*(_0x360a9b===_0x446675(0x325)?_0x382780['eur']:_0x382780['usd']);else{if(usdBasecoins[_0x446675(0x319)](_0x45fcf3))_0x3d1f3f=_0x3d1f3f*(_0x360a9b===_0x446675(0x325)?_0x382780[_0x446675(0x1b9)]/_0x382780[_0x446675(0x1a8)]:0x1);else _0x45fcf3==='EUR'&&(_0x3d1f3f=_0x3d1f3f*(_0x360a9b===_0x446675(0x325)?0x1:_0x382780['usd']/_0x382780[_0x446675(0x1b9)]));}}let _0xf71993;if(_0x3d1f3f!==0x0){if(_0xa72528===_0x446675(0x258))_0xf71993=(_0x3d1f3f/startingBalances[_0x446675(0x258)]-0x1)*0x64;else{if(_0x360a9b===_0x446675(0x325))_0xf71993=(_0x3d1f3f/startingBalances[_0x446675(0x1b9)]-0x1)*0x64;else _0xf71993=(_0x3d1f3f/startingBalances['usd']-0x1)*0x64;}let _0x46b032=0x0;if(startingBalances[_0x446675(0x335)])_0x24dc4c[_0x446675(0x234)](_0x46935c=>{const _0x3ae900=_0x446675;let _0x3da74a=startingBalances['coins'][_0x3ae900(0x298)](_0x4584ab=>_0x4584ab[_0x3ae900(0x2f1)]===_0x46935c[_0x3ae900(0x2f1)]);if(_0x3da74a&&_0x3da74a['coin']&&_0x46935c['number']!==0x0)_0x46b032+=_0x3da74a[_0x3ae900(0x2a9)]*_0x46935c[_0x3ae900(0x21c)];});let _0x4e9270=0x0;if(_0x407dbb[_0x446675(0x225)]!==0x0){let _0xd901bc=_0x407dbb[_0x407dbb[_0x446675(0x225)]-0x1];_0x4e9270=_0xd901bc['netoffset'];}_0x46b032-=_0x4e9270;_0xa72528==='net-basecoin'&&(_0xf71993=(_0x3d1f3f-_0x46b032)/startingBalances[_0x446675(0x258)]*0x64,_0x3d1f3f=_0x3d1f3f-_0x46b032);if(_0xa72528===_0x446675(0x240)){let _0x577e5c=_0x360a9b==='EUR'?startingBalances[_0x446675(0x1b9)]:startingBalances[_0x446675(0x1a8)];if(_0x45fcf3===_0x446675(0x2e3)||_0x45fcf3===_0x446675(0x326)||_0x45fcf3===_0x446675(0x1cc))_0x46b032=_0x360a9b==='EUR'?_0x46b032*_0x382780[_0x446675(0x1b9)]:_0x46b032*_0x382780['usd'];else{if(usdBasecoins[_0x446675(0x319)](_0x45fcf3))_0x46b032=_0x360a9b===_0x446675(0x325)?_0x46b032*_0x382780[_0x446675(0x1b9)]/_0x382780[_0x446675(0x1a8)]:_0x46b032;else _0x45fcf3===_0x446675(0x325)&&(_0x46b032=_0x360a9b===_0x446675(0x325)?_0x46b032:_0x46b032*_0x382780[_0x446675(0x1a8)]/_0x382780[_0x446675(0x1b9)]);}_0xf71993=(_0x3d1f3f-_0x46b032)/_0x577e5c*0x64,_0x3d1f3f=_0x3d1f3f-_0x46b032;}if(_0xf71993){if(_0xf71993<0x64)_0xf71993=_0xf71993['toFixed'](0x2);else{if(_0xf71993<0x3e8)_0xf71993=_0xf71993[_0x446675(0x320)](0x1);else _0xf71993=_0xf71993[_0x446675(0x320)](0x0);}}else _0xf71993=Number('0')[_0x446675(0x320)](0x2);if(_0x3d1f3f){if(Math[_0x446675(0x1f3)](_0x3d1f3f)<0.000001)_0x3d1f3f=_0x3d1f3f[_0x446675(0x320)](0x2);else{if(Math[_0x446675(0x1f3)](_0x3d1f3f)<0.1)_0x3d1f3f=_0x3d1f3f['toFixed'](0x6);else{if(Math[_0x446675(0x1f3)](_0x3d1f3f)<0x1)_0x3d1f3f=_0x3d1f3f[_0x446675(0x320)](0x5);else{if(Math[_0x446675(0x1f3)](_0x3d1f3f)<0xa)_0x3d1f3f=_0x3d1f3f[_0x446675(0x320)](0x4);else{if(Math[_0x446675(0x1f3)](_0x3d1f3f)<0x64)_0x3d1f3f=_0x3d1f3f[_0x446675(0x320)](0x3);else{if(Math['abs'](_0x3d1f3f)<0x3e8)_0x3d1f3f=_0x3d1f3f[_0x446675(0x320)](0x2);else _0x3d1f3f=_0x3d1f3f[_0x446675(0x320)](0x2);}}}}}}else _0x3d1f3f=Number('0')['toFixed'](0x2);}else _0xf71993=Number('0')['toFixed'](0x2);return{'value':_0x3d1f3f,'change':_0xf71993,'leftTxt':_0x4f4bff,'rightTxt':_0x620d5a};}async function getStartingBalances(_0x5087e7,_0x80e713=!![]){const _0x2d06c6=_0x3d847a;if(_0x5087e7[_0x2d06c6(0x225)]!==0x0){const [_0xd5ac56,_0x24d0a6,_0x1bf217]=getPerf(_0x5087e7[0x0],!![]);let _0x2df57f=[];config[_0x2d06c6(0x2de)][_0x2d06c6(0x234)](_0x28bcdc=>{const _0x231363=_0x2d06c6;let _0x227af9=0x0,_0xb1b76c;config[_0x231363(0x1d7)]['forEach'](_0x187cb3=>{const _0x1d2a57=_0x231363;let _0x2cfc9b=_0x187cb3[_0x1d2a57(0x358)][_0x1d2a57(0x298)](_0x59fcfa=>_0x59fcfa[_0x1d2a57(0x2f1)]==_0x28bcdc[_0x1d2a57(0x2f1)]);if(_0x2cfc9b){_0x227af9+=_0x2cfc9b[_0x1d2a57(0x2a9)];if(!_0xb1b76c)_0xb1b76c=_0x2cfc9b[_0x1d2a57(0x2c3)];}}),_0x2df57f[_0x231363(0x34b)]({'coin':_0x28bcdc['coin'],'number':_0x227af9,'initialprice':_0xb1b76c});});const _0x2af787={'basecoin':_0xd5ac56,'eur':_0x24d0a6,'usd':_0x1bf217,'coins':_0x2df57f};if(_0x80e713)proxyEmit(_0x2d06c6(0x26a),_0x2af787);startingBalances=_0x2af787;}}function headlessMode(_0x3a8059){const _0x3e46f1=_0x3d847a;let _0x5ac173=_0x3a8059[_0x3e46f1(0x2de)],_0x592e6b=_0x3a8059['threshold'],_0x52a6df=[];for(let _0x22ba32 of _0x5ac173){if(_0x22ba32['coin']!=config[_0x3e46f1(0x258)]){if(_0x22ba32['delta']>=_0x592e6b/0x64){if(_0x22ba32[_0x3e46f1(0x364)])_0x52a6df['push'](_0x22ba32);}else{if(_0x22ba32[_0x3e46f1(0x247)]<=-_0x592e6b/0x64){if(_0x22ba32[_0x3e46f1(0x364)])_0x52a6df[_0x3e46f1(0x34b)](_0x22ba32);}}}}_0x52a6df['length']>0x0&&placeOrder(_0x52a6df);}function notifyBalance(_0x45007c){const _0x4379ec=_0x3d847a;let _0x38d65f=_0x45007c['portfolio'],_0x221937=_0x45007c[_0x4379ec(0x243)],_0x30f989=[];for(let _0x4bdff8 of _0x38d65f){if(_0x4bdff8['coin']!=config[_0x4379ec(0x258)]){if(_0x4bdff8[_0x4379ec(0x247)]>=_0x221937/0x64){if(_0x4bdff8['valid'])_0x30f989[_0x4379ec(0x34b)](_0x4bdff8);}else{if(_0x4bdff8[_0x4379ec(0x247)]<=-_0x221937/0x64){if(_0x4bdff8[_0x4379ec(0x364)])_0x30f989[_0x4379ec(0x34b)](_0x4bdff8);}}}}if(_0x30f989[_0x4379ec(0x225)]>0x0){let _0x384155=_0x30f989[_0x4379ec(0x2f9)](_0x59fb51=>_0x59fb51['coin']);_0x384155[_0x4379ec(0x20e)]();let _0x266488=_0x384155[_0x4379ec(0x339)](',\x20');if(!lastCoinsToBalance)logHistory('warning',_0x4379ec(0x35e));lastCoinsToBalance=_0x266488;}}function symbolToCoin(_0x38f1a2){const _0x2742d3=_0x3d847a;let _0x5738e5;if(_0x38f1a2[_0x2742d3(0x319)]('/'+config['basecoin']))_0x5738e5=_0x38f1a2[_0x2742d3(0x2cb)]('/'+config[_0x2742d3(0x258)],'');if(_0x38f1a2['includes'](config[_0x2742d3(0x258)]+'/'))_0x5738e5=_0x38f1a2[_0x2742d3(0x2cb)](config[_0x2742d3(0x258)]+'/','');return _0x5738e5;}function setLockOrders(_0x3b084b){const _0x171905=_0x3d847a;lockOrders=_0x3b084b,logger[_0x171905(0x357)]('Set\x20lock\x20orders\x20to:\x20'+Object[_0x171905(0x205)](ORDERS)[lockOrders]);}async function unlockOrders(_0x510744=![]){const _0x536d7c=_0x3d847a;if(allOrdersPlaced&&lockOrders==ORDERS[_0x536d7c(0x31f)]){setLockOrders(ORDERS[_0x536d7c(0x30b)]);if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);if(_0x510744){const _0x4fc414=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x4fc414,setBlockTransactionDetection(![]);}validateOrdersState=_0x536d7c(0x210),persistOpenOrders([]),setLockOrders(ORDERS[_0x536d7c(0x2c9)]);}}async function validateOrders(_0x5c3e8f){const _0x223742=_0x3d847a;if(_0x5c3e8f)validateOrdersState=_0x5c3e8f;logger[_0x223742(0x357)]('1\x20-\x20Validate\x20orders:\x20'+validateOrdersState+_0x223742(0x33a)+Object[_0x223742(0x205)](ORDERS)[lockOrders]);let _0x183fdb=[],_0x15c345=config[_0x223742(0x1db)]==_0x223742(0x20b)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x223742(0x1c5)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS['LOCKED'])return;logger[_0x223742(0x357)](_0x223742(0x35f)+validateOrdersState);for(let _0x156978=lastOrders[_0x223742(0x225)]-0x1;_0x156978>=0x0;_0x156978--){let _0x47b9e4=lastOrders[_0x156978],_0x25c813=![];_0x47b9e4['filled']>0x0&&(_0x25c813=!![]),_0x183fdb['push'](_0x25c813),_0x25c813&&config[_0x223742(0x1db)]!=_0x223742(0x20b)&&logHistory(_0x223742(0x2ce),_0x223742(0x1f4)+_0x47b9e4[_0x223742(0x317)]+'\x20'+_0x47b9e4['side']+'\x20#'+formatResult(_0x47b9e4[_0x223742(0x301)],0x8)+'\x20@'+formatResult(_0x47b9e4[_0x223742(0x2c3)],0x8)),_0x25c813&&lastOrders['splice'](_0x156978,0x1);}persistOpenOrders(lastOrders);const _0x2db1dc=coolingDown?'balancing\x20resumes\x20when\x20cooldown\x20ends':_0x223742(0x27e);if(validateOrdersState==_0x223742(0x210)){validateOrdersState=_0x223742(0x303);if(_0x183fdb[_0x223742(0x319)](![])){}else await unlockOrders();}else{if(validateOrdersState=='ongoing'){if(_0x183fdb[_0x223742(0x319)](![])){}else await unlockOrders();}else{if(validateOrdersState==_0x223742(0x227))_0x183fdb[_0x223742(0x319)](![])&&(config[_0x223742(0x1db)]==_0x223742(0x20b)?logHistory(_0x223742(0x26d),'Order(s)\x20not\x20validated\x20after\x20'+Math['round'](_0x15c345*validateOrderInterval/0xea60)+_0x223742(0x217)+_0x2db1dc):(await cancelOrders(),logHistory(_0x223742(0x26d),_0x223742(0x2f8)+Math[_0x223742(0x295)](_0x15c345*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x2db1dc))),await unlockOrders(!![]);else{if(validateOrdersState==_0x223742(0x369)){if(config[_0x223742(0x1db)]!='market')logHistory('success',_0x223742(0x1b1)+_0x2db1dc);await unlockOrders(!![]);}}}}}async function cancelOrders(){const _0x20ec8e=_0x3d847a;lastOrders[_0x20ec8e(0x234)](async _0x2a34df=>{const _0x256904=_0x20ec8e;try{const _0x40abc6=await exchange[_0x256904(0x275)](_0x2a34df[_0x256904(0x282)],_0x2a34df[_0x256904(0x317)]);}catch(_0x47ec9b){if(_0x47ec9b[_0x256904(0x31b)]()[_0x256904(0x319)](_0x256904(0x201))){}else await handleError(_0x47ec9b,'cancelOrders()');}});}async function initCoinResults(_0x4abc87){const _0x41da15=_0x3d847a;_0x4abc87?logger[_0x41da15(0x357)](_0x41da15(0x345)+_0x4abc87):logger[_0x41da15(0x357)]('Initializing\x20coin\x20results'),config[_0x41da15(0x2de)][_0x41da15(0x234)](_0xc1e73b=>{const _0x1adfd0=_0x41da15;if(!_0xc1e73b['excluded']&&_0xc1e73b[_0x1adfd0(0x2f1)]!=config[_0x1adfd0(0x258)]){const _0x159010=currentCoins[_0x1adfd0(0x298)](_0x52c62f=>_0x52c62f[_0x1adfd0(0x2f1)]==_0xc1e73b[_0x1adfd0(0x2f1)]),_0x139b12=gTicker[noslash(_0xc1e73b['symbol'])];let _0x280820=_0x159010?_0x159010[_0x1adfd0(0x2a9)]:null,_0x515ce7=_0xc1e73b[_0x1adfd0(0x1cd)]?0x1/_0x139b12:_0x139b12,_0x5c06e0;config['liquidity'][_0x1adfd0(0x234)](_0xefd3ba=>{const _0x5b4967=_0x1adfd0;!_0x5c06e0&&(_0x5c06e0=_0xefd3ba[_0x5b4967(0x358)][_0x5b4967(0x298)](_0x5f3b5a=>_0x5f3b5a['coin']==_0xc1e73b['coin']),_0x5c06e0&&(_0x280820=_0x5c06e0[_0x5b4967(0x2a9)],_0x515ce7=_0x5c06e0[_0x5b4967(0x2c3)]));});let _0x4eb3b7=dbCoinResults['get'](_0x1adfd0(0x335))[_0x1adfd0(0x298)]({'coin':_0xc1e73b[_0x1adfd0(0x2f1)]})[_0x1adfd0(0x29c)]();if(!_0x4eb3b7){const _0x174399={'coin':_0xc1e73b[_0x1adfd0(0x2f1)],'number':_0x280820,'breakeven':_0x515ce7,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get'](_0x1adfd0(0x335))[_0x1adfd0(0x34b)](_0x174399)[_0x1adfd0(0x1ca)]();}else{if(_0x4abc87&&_0xc1e73b['coin']==_0x4abc87){const _0x2d7fad={'coin':_0xc1e73b['coin'],'number':_0x280820,'breakeven':_0x515ce7,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get'](_0x1adfd0(0x335))[_0x1adfd0(0x298)]({'coin':_0xc1e73b[_0x1adfd0(0x2f1)]})['assign'](_0x2d7fad)[_0x1adfd0(0x1ca)]();}}}});}async function updateCoinResults(_0x2a76b6,_0x37988f=![]){const _0x1f2d70=_0x3d847a;let _0x5768b5,_0x179c61,_0x242762,_0x25c500,_0x4d5b58,_0x11591d,_0x5cf385=dbCoinResults[_0x1f2d70(0x1b4)](_0x1f2d70(0x335))[_0x1f2d70(0x298)]({'coin':_0x2a76b6['coin']})[_0x1f2d70(0x29c)](),_0x5e238b=![];_0x5cf385&&Object[_0x1f2d70(0x2ff)](_0x5cf385)[_0x1f2d70(0x234)](([_0x44c7ba,_0x4d30c3])=>{if(_0x4d30c3==null)_0x5e238b=!![];});(!_0x5cf385||_0x5e238b)&&(await initCoinResults(_0x2a76b6[_0x1f2d70(0x2f1)]),_0x5cf385=dbCoinResults[_0x1f2d70(0x1b4)](_0x1f2d70(0x335))[_0x1f2d70(0x298)]({'coin':_0x2a76b6[_0x1f2d70(0x2f1)]})[_0x1f2d70(0x29c)]());_0x2a76b6[_0x1f2d70(0x1cd)]&&(_0x11591d={'filled':_0x2a76b6[_0x1f2d70(0x301)]*_0x2a76b6[_0x1f2d70(0x2c3)],'amount':_0x2a76b6[_0x1f2d70(0x301)]*_0x2a76b6[_0x1f2d70(0x2c3)],'side':_0x2a76b6[_0x1f2d70(0x33c)]==_0x1f2d70(0x33f)?_0x1f2d70(0x249):'sell','price':0x1/_0x2a76b6[_0x1f2d70(0x2c3)]},_0x2a76b6={..._0x2a76b6,..._0x11591d});_0x37988f?_0x179c61=_0x2a76b6['side']==_0x1f2d70(0x249)?_0x5cf385['number']+_0x2a76b6[_0x1f2d70(0x301)]:_0x5cf385['number']-_0x2a76b6['filled']:_0x179c61=await getCoinNumber(_0x2a76b6[_0x1f2d70(0x2f1)]);if(_0x2a76b6[_0x1f2d70(0x232)]&&_0x2a76b6[_0x1f2d70(0x232)][_0x1f2d70(0x2c7)]==config[_0x1f2d70(0x258)])_0x5768b5=Number(_0x2a76b6[_0x1f2d70(0x232)][_0x1f2d70(0x216)]);else{if(_0x2a76b6[_0x1f2d70(0x232)]&&_0x2a76b6['fee']['currency']==_0x1f2d70(0x34a)&&!_0x37988f&&config[_0x1f2d70(0x258)]!='PAXG')_0x5768b5=Number(_0x2a76b6['fee'][_0x1f2d70(0x216)])*gTicker[_0x1f2d70(0x34a)+config['basecoin']];else _0x5768b5=defaultFee*_0x2a76b6['filled']*_0x2a76b6[_0x1f2d70(0x2c3)];}_0x2a76b6['side']==_0x1f2d70(0x249)?(_0x242762=_0x179c61!=0x0?(_0x5cf385[_0x1f2d70(0x2fd)]*_0x5cf385[_0x1f2d70(0x2a9)]+_0x2a76b6[_0x1f2d70(0x2c3)]*(_0x179c61-_0x5cf385[_0x1f2d70(0x2a9)])+_0x5768b5)/_0x179c61:0x0,_0x25c500=_0x5cf385[_0x1f2d70(0x1f6)]):(_0x242762=_0x179c61!=0x0?(_0x5cf385['breakeven']*_0x5cf385[_0x1f2d70(0x2a9)]-_0x2a76b6['price']*(_0x5cf385[_0x1f2d70(0x2a9)]-_0x179c61)+_0x5768b5)/_0x179c61:0x0,_0x25c500=_0x5cf385[_0x1f2d70(0x1f6)]+(_0x2a76b6['price']-_0x5cf385['breakeven'])*_0x2a76b6[_0x1f2d70(0x301)]);_0x4d5b58=(_0x2a76b6[_0x1f2d70(0x2c3)]-_0x242762-_0x5768b5/_0x2a76b6['filled'])*_0x179c61;let _0xa4af0e={'coin':_0x2a76b6[_0x1f2d70(0x2f1)],'number':_0x179c61,'breakeven':formatResult(_0x242762,0x8),'realized':formatResult(_0x25c500,0x8),'unrealized':formatResult(_0x4d5b58,0x8),'fees':formatResult(_0x5cf385[_0x1f2d70(0x200)]+_0x5768b5,0x8),'sells':_0x2a76b6[_0x1f2d70(0x33c)]==_0x1f2d70(0x33f)?_0x5cf385['sells']+0x1:_0x5cf385[_0x1f2d70(0x259)],'buys':_0x2a76b6['side']=='buy'?_0x5cf385[_0x1f2d70(0x2b2)]+0x1:_0x5cf385[_0x1f2d70(0x2b2)]};dbCoinResults[_0x1f2d70(0x1b4)](_0x1f2d70(0x335))[_0x1f2d70(0x298)]({'coin':_0x2a76b6[_0x1f2d70(0x2f1)]})[_0x1f2d70(0x350)](_0xa4af0e)[_0x1f2d70(0x1ca)]();if(!_0x37988f){if(_0x2a76b6[_0x1f2d70(0x232)]&&_0x2a76b6[_0x1f2d70(0x232)][_0x1f2d70(0x2c7)]==_0x1f2d70(0x34a)){const _0x3bbfde=currentCoins[_0x1f2d70(0x298)](_0x894780=>_0x894780[_0x1f2d70(0x2f1)]==_0x1f2d70(0x34a));if(_0x3bbfde){let _0x3d5ef8=dbCoinResults[_0x1f2d70(0x1b4)]('coins')[_0x1f2d70(0x298)]({'coin':_0x1f2d70(0x34a)})[_0x1f2d70(0x29c)]();_0xa4af0e={..._0x3d5ef8,'number':_0x3bbfde[_0x1f2d70(0x2a9)]},dbCoinResults[_0x1f2d70(0x1b4)]('coins')['find']({'coin':_0x1f2d70(0x34a)})[_0x1f2d70(0x350)](_0xa4af0e)[_0x1f2d70(0x1ca)]();}}}}async function placeOrder(_0x3fe1fc){const _0x48a663=_0x3d847a,_0x39f5f8=config[_0x48a663(0x1db)]==_0x48a663(0x20b)?'market':_0x48a663(0x281);if(lockOrders==ORDERS['UNLOCKED']&&!coolingDown){setLockOrders(ORDERS[_0x48a663(0x31f)]);while(transactionDetectionOngoing){await sleep(0x64);}logger[_0x48a663(0x357)](_0x48a663(0x228)+_0x3fe1fc[_0x48a663(0x2f9)](_0xc8f021=>_0xc8f021['coin'])[_0x48a663(0x339)](',\x20')),lastCoinsToBalance='',allOrdersPlaced=![],validateOrdersState=_0x48a663(0x210);let _0xd097a7=![];lastOrders=[];const _0x5d32d6=config[_0x48a663(0x243)];for(const _0x35937b of _0x3fe1fc){let _0x5f1e29,_0x1aa73b,_0x5b99a0,_0x4b62ee,_0x1ca001,_0x1d554b=_0x35937b['symbol'];logger[_0x48a663(0x357)]('Trigger:\x20'+_0x35937b[_0x48a663(0x2f1)]+'\x20'+_0x35937b[_0x48a663(0x2a9)]+'\x20'+_0x35937b[_0x48a663(0x21c)]+'\x20'+_0x35937b[_0x48a663(0x352)]+'%\x20'+_0x35937b[_0x48a663(0x323)]+'%\x20'+(0x64*_0x35937b[_0x48a663(0x247)])[_0x48a663(0x320)](0x2)+_0x48a663(0x2f7)+_0x5d32d6[_0x48a663(0x320)](0x2)+'%)');const _0x10a7a9=currentCoins[_0x48a663(0x298)](_0x1739e3=>_0x1739e3[_0x48a663(0x2f1)]==_0x35937b[_0x48a663(0x2f1)]);_0x10a7a9&&(_0x10a7a9[_0x48a663(0x2aa)]=_0x35937b[_0x48a663(0x2a9)]);try{const _0x316a88=await exchange['fetchTicker'](_0x1d554b);_0x5f1e29=_0x35937b[_0x48a663(0x1cd)]?0x1/_0x35937b[_0x48a663(0x21c)]:_0x35937b['last'],_0x1aa73b=_0x316a88[_0x48a663(0x2df)],_0x5b99a0=_0x316a88[_0x48a663(0x29f)];_0x35937b[_0x48a663(0x1cd)]?(_0x4b62ee=_0x35937b[_0x48a663(0x33c)]=='buy'?_0x48a663(0x33f):_0x48a663(0x249),_0x1ca001=Math[_0x48a663(0x1f3)](_0x35937b[_0x48a663(0x267)])/_0x5f1e29):(_0x4b62ee=_0x35937b['side'],_0x1ca001=Math['abs'](_0x35937b[_0x48a663(0x267)]));_0x39f5f8==_0x48a663(0x281)&&(config[_0x48a663(0x1db)]=='limit-high'&&(_0x5f1e29=_0x4b62ee==_0x48a663(0x249)?_0x1aa73b:_0x5b99a0),config[_0x48a663(0x1db)]==_0x48a663(0x36a)&&(_0x5f1e29=_0x4b62ee==_0x48a663(0x249)?_0x5b99a0:_0x1aa73b));_0x1ca001=formatResult(_0x1ca001,0x8),_0x5f1e29=formatResult(_0x5f1e29,0x8);const _0x3647fe=_0x4b62ee==_0x48a663(0x33f)?config[_0x48a663(0x1ac)]?String[_0x48a663(0x2ba)]('0x'+config[_0x48a663(0x1ac)])+'\x20':'':config['emojibuy']?String[_0x48a663(0x2ba)]('0x'+config[_0x48a663(0x22b)])+'\x20':'',_0x5a953a=_0x39f5f8==_0x48a663(0x20b)?_0x48a663(0x340):config[_0x48a663(0x1db)]=='limit-high'?_0x48a663(0x343):'Limit\x20(low-margin)',_0x3f917e=(Math[_0x48a663(0x35b)](Math['random']()*0x35a4e900)+0x5f5e100)[_0x48a663(0x31b)]();lastOrders['push']({'customId':_0x3f917e,'symbol':_0x1d554b,'coin':_0x35937b[_0x48a663(0x2f1)],'amount':_0x1ca001,'price':_0x5f1e29,'side':_0x4b62ee,'reverse':_0x35937b['reverse'],'filled':0x0});if(_0x39f5f8==_0x48a663(0x20b))logHistory('order',''+_0x3647fe+_0x5a953a+_0x48a663(0x1e7)+_0x1d554b+'\x20'+_0x4b62ee+'\x20#'+formatResult(_0x1ca001,0x8)+'\x20@'+formatResult(_0x5f1e29,0x8));else logHistory(_0x48a663(0x2ce),''+_0x3647fe+_0x5a953a+_0x48a663(0x1e7)+_0x1d554b+'\x20'+_0x4b62ee+'\x20#'+formatResult(_0x1ca001,0x8)+'\x20@'+formatResult(_0x5f1e29,0x8));let _0x2abb6a;_0x39f5f8==_0x48a663(0x20b)?_0x4b62ee==_0x48a663(0x249)&&[_0x48a663(0x299),_0x48a663(0x2b1),_0x48a663(0x308),_0x48a663(0x32f),_0x48a663(0x1c8)][_0x48a663(0x319)](config[_0x48a663(0x306)])?_0x2abb6a=await exchange[_0x48a663(0x34d)](_0x1d554b,_0x39f5f8,_0x4b62ee,_0x1ca001,_0x5f1e29):_0x2abb6a=await exchange[_0x48a663(0x34d)](_0x1d554b,_0x39f5f8,_0x4b62ee,_0x1ca001,undefined):_0x2abb6a=await exchange[_0x48a663(0x34d)](_0x1d554b,_0x39f5f8,_0x4b62ee,_0x1ca001,_0x5f1e29);logger[_0x48a663(0x357)](_0x48a663(0x2a6)+_0x2abb6a['id']+'\x20|\x20Custom\x20ID:\x20'+_0x3f917e);const _0x1908cb=lastOrders['length']-0x1;if(_0x1908cb>=0x0&&lastOrders[_0x1908cb][_0x48a663(0x2ec)]==_0x3f917e){lastOrders[_0x1908cb][_0x48a663(0x282)]=_0x2abb6a['id'];if(_0x2abb6a['amount'])lastOrders[_0x1908cb][_0x48a663(0x330)]=_0x2abb6a['amount'];if(_0x2abb6a[_0x48a663(0x2c3)])lastOrders[_0x1908cb][_0x48a663(0x2c3)]=_0x2abb6a[_0x48a663(0x2c3)];lastOrders[_0x1908cb][_0x48a663(0x232)]=_0x2abb6a['fee'];}if(config[_0x48a663(0x21d)]!=0x0){let _0x4f7731=null;if(cooldownTracker['length']==config[_0x48a663(0x21d)]-0x1)_0x4f7731=cooldownTracker[_0x48a663(0x1fb)]();const _0x25cdf4=getTimeStamp();cooldownTracker[_0x48a663(0x34b)](_0x25cdf4);if(_0x4f7731){const _0x13a796=fns[_0x48a663(0x30a)](new Date(_0x25cdf4),new Date(_0x4f7731));if(_0x13a796<cooldownInterval){logHistory('error',_0x48a663(0x307)+config[_0x48a663(0x21d)]+'\x20orders\x20in\x20less\x20than\x20'+cooldownInterval/0x3c+_0x48a663(0x29e)+cooldownPeriod/(0xe10*0x3e8)+_0x48a663(0x2c1)),coolingDown=!![];break;}}}}catch(_0x3a7c16){if(_0x3a7c16[_0x48a663(0x31b)]()[_0x48a663(0x319)](_0x48a663(0x219)))lastOrders=lastOrders['filter'](_0x322434=>_0x322434[_0x48a663(0x317)]!=_0x1d554b),logHistory('error',_0x48a663(0x2d6)+_0x1d554b),_0xd097a7=!![];else{if(_0x3a7c16[_0x48a663(0x31b)]()[_0x48a663(0x319)](_0x48a663(0x351)))lastOrders=lastOrders[_0x48a663(0x28b)](_0x108c8f=>_0x108c8f[_0x48a663(0x317)]!=_0x1d554b),logHistory('error','Order\x20amount\x20is\x20invalid:\x20'+_0x1d554b),_0xd097a7=!![];else{if(_0x3a7c16[_0x48a663(0x31b)]()[_0x48a663(0x319)](_0x48a663(0x1f7)))lastOrders=lastOrders[_0x48a663(0x28b)](_0xbb01d8=>_0xbb01d8[_0x48a663(0x317)]!=_0x1d554b),logHistory(_0x48a663(0x34c),_0x48a663(0x2a1)+_0x1d554b),logger[_0x48a663(0x357)](_0x3a7c16),_0xd097a7=!![];else _0x3a7c16[_0x48a663(0x31b)]()[_0x48a663(0x319)](_0x48a663(0x1a4))?(lastOrders=lastOrders[_0x48a663(0x28b)](_0x37742f=>_0x37742f[_0x48a663(0x317)]!=_0x1d554b),logHistory('error','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x1d554b),_0xd097a7=!![]):(lastOrders=lastOrders[_0x48a663(0x28b)](_0x33dd33=>_0x33dd33['symbol']!=_0x1d554b),await handleError(_0x3a7c16,'placeOrder()',_0x1d554b));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x48a663(0x225)]>0x0){const _0x42c8c1=config[_0x48a663(0x1db)]==_0x48a663(0x20b)?validateOrderTimeout*0x3c*0x3e8:config[_0x48a663(0x1c5)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x413e00=_0x48a663;validateOrders(_0x413e00(0x227));},_0x42c8c1);}else unlockOrders();_0xd097a7&&config[_0x48a663(0x2a4)]&&(logHistory(_0x48a663(0x34c),_0x48a663(0x2b5)+pauseBotMsg),await pauseBot(pauseBotInterval)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x48a663(0x26d),_0x48a663(0x2e9)));}else{if(coolingDown)!config['headless']&&logHistory(_0x48a663(0x34c),'Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode');else lockOrders!=ORDERS[_0x48a663(0x2c9)]&&(!config['headless']&&(config[_0x48a663(0x1db)]==_0x48a663(0x20b)?logHistory(_0x48a663(0x34c),_0x48a663(0x316)):logHistory(_0x48a663(0x34c),_0x48a663(0x24c))));}}function persistOpenOrders(_0x477d6f){const _0x2b7af9=_0x3d847a,_0x3084f7={...config,'openOrders':_0x477d6f};let _0x4e3fca=dbConfig[_0x2b7af9(0x1b4)](_0x2b7af9(0x2b3))[_0x2b7af9(0x298)]({'botID':botID})['value']();_0x4e3fca&&dbConfig['get'](_0x2b7af9(0x2b3))[_0x2b7af9(0x298)]({'botID':botID})[_0x2b7af9(0x350)](_0x3084f7)[_0x2b7af9(0x1ca)]();}function restoreOrders(){const _0x9491fb=_0x3d847a;let _0x4578ae;config[_0x9491fb(0x331)]&&allOpenOrders[_0x9491fb(0x234)](_0x4726ec=>{const _0x5c9a26=_0x9491fb,_0x5a87af=config['openOrders']['find'](_0x4da7d9=>_0x4da7d9[_0x5c9a26(0x282)]==_0x4726ec['id']);_0x5a87af&&(lastOrders[_0x5c9a26(0x34b)](_0x5a87af),_0x4578ae=_0x4726ec[_0x5c9a26(0x25d)]);});if(lastOrders['length']>0x0){setLockOrders(ORDERS[_0x9491fb(0x31f)]),validateOrdersState='ongoing',allOrdersPlaced=!![];const _0x5f3174=new Date()[_0x9491fb(0x1eb)](),_0xb01750=config['ordertype']==_0x9491fb(0x20b)?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(_0x4578ae+_0xb01750>_0x5f3174){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x4578ae+_0xb01750-_0x5f3174);}else validateOrders(_0x9491fb(0x227));}}async function sendMetricsTelegram(){const _0x5505f1=_0x3d847a;if(!coinsLoaded){process['send']({'telegrammsg':_0x5505f1(0x2ac)},_0x5628f6=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x77c25b='';if(config[_0x5505f1(0x254)])_0x77c25b=_0x5505f1(0x1dd)+config['botname']+'\x20metrics:</b>\x20\x0a\x0a';else _0x77c25b=_0x5505f1(0x21a)+botID+'\x20metrics:</b>\x20\x0a\x0a';const _0x4f001a=getKPIs('basecoin'),_0x51038f=getKPIs(_0x5505f1(0x19f),config[_0x5505f1(0x19f)]),_0x5f07e8=getKPIs('net-basecoin'),_0x4ed92b=getKPIs(_0x5505f1(0x240),config['fiat']);_0x77c25b+=_0x5505f1(0x2d8),_0x77c25b+=_0x4f001a[_0x5505f1(0x309)]+'\x20:\x20'+_0x4f001a['value']+'\x0a',_0x77c25b+=_0x4f001a[_0x5505f1(0x1a5)]+':\x20'+_0x4f001a[_0x5505f1(0x2ca)]+'%\x0a',_0x77c25b+=_0x51038f[_0x5505f1(0x309)]+_0x5505f1(0x250)+_0x51038f['value']+'\x0a',_0x77c25b+=_0x51038f[_0x5505f1(0x1a5)]+':\x20'+_0x51038f['change']+'%\x0a',_0x77c25b+=_0x5f07e8[_0x5505f1(0x309)]+':\x20'+_0x5f07e8[_0x5505f1(0x29c)]+'\x20('+config['basecoin']+')\x0a',_0x77c25b+=_0x5f07e8[_0x5505f1(0x1a5)]+':\x20'+_0x5f07e8[_0x5505f1(0x2ca)]+_0x5505f1(0x2f7)+config[_0x5505f1(0x258)]+')\x0a',_0x77c25b+=_0x4ed92b[_0x5505f1(0x309)]+':\x20'+_0x4ed92b[_0x5505f1(0x29c)]+'\x20('+config[_0x5505f1(0x19f)]+')\x0a',_0x77c25b+=_0x4ed92b[_0x5505f1(0x1a5)]+':\x20'+_0x4ed92b[_0x5505f1(0x2ca)]+_0x5505f1(0x2f7)+config[_0x5505f1(0x19f)]+')\x0a',_0x77c25b+=_0x5505f1(0x238),process[_0x5505f1(0x34e)]({'telegrammsg':_0x77c25b},_0xf9bb00=>{});}async function sendPortfolioTelegram(){const _0x3a8902=_0x3d847a;if(!coinsLoaded||!currentCoins[0x0][_0x3a8902(0x352)]){process[_0x3a8902(0x34e)]({'telegrammsg':_0x3a8902(0x2ac)},_0x23c2bb=>{});return;}let _0x205e4b='';if(config['showname'])_0x205e4b='<b>'+config[_0x3a8902(0x1bd)]+'\x20portfolio:</b>\x20\x0a\x0a';else _0x205e4b='<b>Bot\x20'+botID+'\x20portfolio:</b>\x20\x0a\x0a';_0x205e4b+=_0x3a8902(0x2d8),_0x205e4b+=_0x3a8902(0x35d),_0x205e4b+='Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a',_0x205e4b+=_0x3a8902(0x35d),currentCoins[_0x3a8902(0x234)](_0x7b582f=>{const _0xcc9fe9=_0x3a8902;_0x205e4b+=_0x7b582f[_0xcc9fe9(0x2f1)][_0xcc9fe9(0x2c0)](0x7)+'|\x20'+formatPad(_0x7b582f[_0xcc9fe9(0x352)],0x2,0x6)+'|\x20'+formatPad(_0x7b582f[_0xcc9fe9(0x323)],0x2,0x6)+'|\x20'+formatPad(_0x7b582f['delta']*0x64,0x2,0x6)+'\x0a';}),_0x205e4b+=_0x3a8902(0x238),process[_0x3a8902(0x34e)]({'telegrammsg':_0x205e4b},_0x540f32=>{});}function formatPad(_0x4768a0,_0x2f9d39,_0x382676){const _0x19140a=_0x3d847a,_0x56b0a1=formatResultString(_0x4768a0,_0x2f9d39);return _0x56b0a1?_0x56b0a1['padStart'](_0x382676):''[_0x19140a(0x2fa)](_0x382676);}function logHistory(_0x23641e,_0x56b85e,_0x5e4b45=''){const _0x55a92d=_0x3d847a;logger[_0x55a92d(0x208)](''+_0x56b85e);let _0x34463a={'time':getTimeStamp(),'type':_0x23641e,'event':_0x56b85e};dbLogs[_0x55a92d(0x1b4)](_0x55a92d(0x1ad))[_0x55a92d(0x34b)](_0x34463a)[_0x55a92d(0x1ca)]();if(_0x5e4b45=='')_0x5e4b45=_0x56b85e;proxyEmit(_0x55a92d(0x367),{'log':_0x34463a,'summary':_0x5e4b45}),process['send']({'telegram':{..._0x34463a,'botname':config[_0x55a92d(0x1bd)],'showname':config['showname']}},_0x4df87a=>{});}function emitHistory(_0x4ca3c6={}){const _0x9e607b=_0x3d847a;Object[_0x9e607b(0x205)](_0x4ca3c6)[_0x9e607b(0x225)]==0x0&&(_0x4ca3c6={'type':[_0x9e607b(0x2ce),_0x9e607b(0x367)],'event':'','page':0x1});if(_0x4ca3c6[_0x9e607b(0x2e2)][_0x9e607b(0x319)](_0x9e607b(0x367)))_0x4ca3c6[_0x9e607b(0x2e2)][_0x9e607b(0x271)](_0x4ca3c6[_0x9e607b(0x2e2)][_0x9e607b(0x328)](_0x9e607b(0x367)),0x1,'error','warning',_0x9e607b(0x26d));if(dbLogs[_0x9e607b(0x218)](_0x9e607b(0x1ad))[_0x9e607b(0x29c)]()){let _0x8ca395=dbLogs['get'](_0x9e607b(0x1ad))[_0x9e607b(0x28b)](_0x4e741=>{const _0x5a6c6f=_0x9e607b;if(_0x4ca3c6[_0x5a6c6f(0x2e2)][_0x5a6c6f(0x225)]==0x0)return![];else return _0x4ca3c6[_0x5a6c6f(0x2e2)][_0x5a6c6f(0x319)](_0x4e741['type']);})['filter'](_0x5b2667=>{const _0x1dc583=_0x9e607b;if(_0x4ca3c6['event']=='')return!![];else return _0x5b2667[_0x1dc583(0x367)][_0x1dc583(0x21e)]()[_0x1dc583(0x319)](_0x4ca3c6[_0x1dc583(0x367)]['toLowerCase']());})[_0x9e607b(0x337)](_0x9e607b(0x1be)),_0x2d2f1f=_0x8ca395[_0x9e607b(0x29c)]()['length'];_0x8ca395=_0x8ca395[_0x9e607b(0x1cd)]()[_0x9e607b(0x2e5)]((_0x4ca3c6[_0x9e607b(0x260)]-0x1)*logPageSize,_0x4ca3c6[_0x9e607b(0x260)]*logPageSize-0x1)[_0x9e607b(0x1cd)]()[_0x9e607b(0x29c)](),proxyEmit(_0x9e607b(0x31a),{'logs':_0x8ca395,'total':_0x2d2f1f});}else proxyEmit('event-history',{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x1ddba8){const _0x1e9730=_0x3d847a;if(dbLogs[_0x1e9730(0x218)](_0x1e9730(0x1ad))[_0x1e9730(0x29c)]()){const _0x2ad039=dbLogs[_0x1e9730(0x1b4)](_0x1e9730(0x1ad))['sortBy']('time')[_0x1e9730(0x28b)](_0x371447=>{const _0x2c506b=_0x1e9730;return _0x371447['type']==_0x2c506b(0x2ce);})['value']();dbLogs['get'](_0x1e9730(0x1ad))[_0x1e9730(0x2e1)]()[_0x1e9730(0x1ca)](),dbLogs[_0x1e9730(0x1b4)](_0x1e9730(0x1ad))[_0x1e9730(0x350)](_0x2ad039)['write'](),emitHistory(_0x1ddba8);}}async function pauseBot(_0x3e29eb=pauseBotIntervalShort,_0x1aa86d,_0x54d7fc,_0x14f1d8=![]){const _0x2ede76=_0x3d847a,_0x3e78e4=new Date()[_0x2ede76(0x1eb)]();if(!lastErrorShown||_0x3e78e4-lastErrorShown>=_0x3e29eb){lastErrorShown=_0x3e78e4;if(!lastBotPause)lastBotPause=_0x3e78e4,consecutivePauses=0x1;else{if(_0x3e78e4-lastBotPause-_0x3e29eb<0x5a*0x3e8){consecutivePauses++;if(consecutivePauses>maxPauseRetries){if(_0x14f1d8){logHistory(_0x2ede76(0x34c),_0x1aa86d+_0x2ede76(0x2f0)),await killBot();return;}else logHistory(_0x2ede76(0x34c),_0x1aa86d+pauseBotMsg),_0x3e29eb=pauseBotInterval;}}else consecutivePauses=0x1;lastBotPause=_0x3e78e4;}_0x54d7fc?logger['debug']('('+consecutivePauses+')\x20'+_0x1aa86d+_0x2ede76(0x24a),_0x54d7fc):logger[_0x2ede76(0x357)]('('+consecutivePauses+')\x20'+_0x1aa86d);if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);await sleep(_0x3e29eb),botPaused=![],_0x3e29eb==pauseBotIntervalShort?resumeBot(!![]):resumeBot(![]);}}}async function killBot(){const _0x51913a=_0x3d847a;botPaused=!![],await sleep(0x3e8),process[_0x51913a(0x34e)]({'stop':_0x51913a(0x235)},_0x670b8f=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x242df4,_0x160fd5,_0x1f03e0=![]){const _0x39f7ae=_0x3d847a;if(botPaused)return;let _0x5b6aa6;const _0x26e0bd=config[_0x39f7ae(0x306)]||_0x39f7ae(0x23d);if(_0x160fd5)logger['debug'](_0x39f7ae(0x1b2)+_0x160fd5);const _0x30888d=()=>{const _0x45ed12=_0x39f7ae;loading[_0x45ed12(0x34c)]=!![],emitLoadingProgress();};if(_0x242df4[_0x39f7ae(0x31b)]()[_0x39f7ae(0x319)](_0x39f7ae(0x1da)))logHistory('error',_0x26e0bd+_0x39f7ae(0x277)),_0x30888d();else{if(_0x242df4['toString']()['includes'](_0x39f7ae(0x2bb)))logHistory(_0x39f7ae(0x34c),_0x26e0bd+'\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)'),_0x30888d();else{if(_0x242df4['toString']()[_0x39f7ae(0x319)](_0x39f7ae(0x302)))config[_0x39f7ae(0x26b)]?_0x5b6aa6=_0x26e0bd+_0x39f7ae(0x30e):_0x5b6aa6=_0x26e0bd+_0x39f7ae(0x239),logHistory(_0x39f7ae(0x34c),_0x5b6aa6+_0x39f7ae(0x244)),_0x30888d();else{if(_0x242df4[_0x39f7ae(0x31b)]()['includes']('PermissionDenied'))logHistory(_0x39f7ae(0x34c),_0x26e0bd+'\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)'),_0x30888d();else{if(!_0x1f03e0)await handleError(_0x242df4,null);}}}}}async function handleError(_0x1e43fc,_0x738726,_0x1182e9=''){const _0x4ca6c9=_0x3d847a;if(botPaused)return;let _0x15d081;const _0x4fd2cf=config[_0x4ca6c9(0x306)]||'Exchange';if(_0x738726)logger[_0x4ca6c9(0x357)](_0x4ca6c9(0x1b2)+_0x738726);if(_0x1e43fc[_0x4ca6c9(0x31b)]()[_0x4ca6c9(0x319)](_0x4ca6c9(0x291)))_0x15d081=_0x4fd2cf+_0x4ca6c9(0x27c),await pauseBot(undefined,_0x15d081,_0x1e43fc);else{if(_0x1e43fc[_0x4ca6c9(0x31b)]()[_0x4ca6c9(0x319)]('RateLimitExceeded'))_0x15d081=_0x4fd2cf+'\x20blocked\x20API\x20(RateLimitExceeded)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading',await pauseBot(undefined,_0x15d081,_0x1e43fc);else{if(_0x1e43fc[_0x4ca6c9(0x31b)]()['includes'](_0x4ca6c9(0x2e8))||_0x1e43fc['toString']()[_0x4ca6c9(0x319)](_0x4ca6c9(0x29a)))_0x15d081=_0x4fd2cf+'\x20not\x20available\x20(see:\x20hodlerhacks.com/fix/5)',await pauseBot(undefined,_0x15d081,_0x1e43fc[_0x4ca6c9(0x31b)]());else{if(_0x1e43fc[_0x4ca6c9(0x31b)]()[_0x4ca6c9(0x319)]('RequestTimeout'))_0x15d081=_0x4fd2cf+_0x4ca6c9(0x1a1),await pauseBot(undefined,_0x15d081,_0x1e43fc[_0x4ca6c9(0x31b)]());else{if(_0x1e43fc[_0x4ca6c9(0x31b)]()[_0x4ca6c9(0x319)]('NetworkError:\x20connection\x20closed\x20by\x20remote\x20server'))_0x15d081=_0x4fd2cf+_0x4ca6c9(0x30c),await pauseBot(undefined,_0x15d081,_0x1e43fc[_0x4ca6c9(0x31b)]());else{if(_0x1e43fc[_0x4ca6c9(0x31b)]()['toLowerCase']()[_0x4ca6c9(0x319)](_0x4ca6c9(0x25d))||_0x1e43fc[_0x4ca6c9(0x31b)]()['toLowerCase']()[_0x4ca6c9(0x319)](_0x4ca6c9(0x252)))_0x15d081='Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)',await pauseBot(undefined,_0x15d081,_0x1e43fc[_0x4ca6c9(0x31b)]());else{if(_0x1e43fc[_0x4ca6c9(0x31b)]()[_0x4ca6c9(0x319)](_0x4ca6c9(0x1d9)))_0x15d081=_0x4fd2cf+'\x20rejected\x20your\x20API\x20request\x20(see:\x20hodlerhacks.com/fix/4)',await pauseBot(undefined,_0x15d081,_0x1e43fc['toString']());else{if(_0x1e43fc instanceof ccxt[_0x4ca6c9(0x1e0)])_0x15d081=_0x4fd2cf+_0x4ca6c9(0x321)+_0x1e43fc[_0x4ca6c9(0x31b)](),logger[_0x4ca6c9(0x357)]('Network\x20error\x20details:',_0x1e43fc),await pauseBot(undefined,_0x15d081,_0x1e43fc);else{if(_0x1e43fc['toString']()[_0x4ca6c9(0x319)](_0x4ca6c9(0x1da)))logHistory(_0x4ca6c9(0x34c),_0x4fd2cf+_0x4ca6c9(0x24b)),logHistory(_0x4ca6c9(0x34c),_0x4ca6c9(0x26e)),await killBot();else{if(_0x1e43fc[_0x4ca6c9(0x31b)]()[_0x4ca6c9(0x319)](_0x4ca6c9(0x2bb)))logHistory('error',_0x4fd2cf+_0x4ca6c9(0x23e)),logHistory('error',_0x4ca6c9(0x26e)),await killBot();else{if(_0x1e43fc['toString']()['includes'](_0x4ca6c9(0x302))&&_0x1e43fc[_0x4ca6c9(0x31b)]()[_0x4ca6c9(0x319)](_0x4ca6c9(0x1b6)))_0x15d081=_0x4fd2cf+_0x4ca6c9(0x1f2),await pauseBot(undefined,_0x15d081,_0x1e43fc,!![]);else{if(_0x1e43fc[_0x4ca6c9(0x31b)]()[_0x4ca6c9(0x319)]('AuthenticationError'))config[_0x4ca6c9(0x26b)]?_0x15d081=_0x4fd2cf+'\x20API\x20key,\x20secret\x20or\x20password\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange':_0x15d081=_0x4fd2cf+_0x4ca6c9(0x239),logHistory('error',_0x15d081),logHistory(_0x4ca6c9(0x34c),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)'),await killBot();else{if(_0x1e43fc[_0x4ca6c9(0x31b)]()[_0x4ca6c9(0x319)](_0x4ca6c9(0x29d)))logHistory('error',_0x4fd2cf+_0x4ca6c9(0x261)),logHistory(_0x4ca6c9(0x34c),_0x4ca6c9(0x26e)),await killBot();else{if(_0x1e43fc[_0x4ca6c9(0x31b)]()['includes'](_0x4ca6c9(0x1d8)))logHistory(_0x4ca6c9(0x34c),_0x4ca6c9(0x21b)+_0x1182e9),logger[_0x4ca6c9(0x357)](_0x4ca6c9(0x233),_0x1e43fc);else{if(_0x1e43fc instanceof ccxt[_0x4ca6c9(0x2b0)]){_0x15d081=_0x4fd2cf+_0x4ca6c9(0x336)+_0x1e43fc[_0x4ca6c9(0x31b)]();if(_0x1182e9)_0x15d081+=_0x4ca6c9(0x338)+_0x1182e9;await pauseBot(undefined,_0x15d081,_0x1e43fc);}else{_0x15d081=_0x4ca6c9(0x342)+_0x1e43fc['toString']();if(_0x1182e9)_0x15d081+=_0x4ca6c9(0x338)+_0x1182e9;await pauseBot(undefined,_0x15d081);}}}}}}}}}}}}}}}}function decryptRSA(_0x5ab77c,_0x4f04ae){const _0x1a6481=_0x3d847a,_0x121ebd=forge[_0x1a6481(0x1c6)][_0x1a6481(0x213)](_0x5ab77c),_0x27329d=_0x121ebd['decrypt'](forge[_0x1a6481(0x1ec)][_0x1a6481(0x1cb)](_0x4f04ae),'RSA-OAEP',{'md':forge['md'][_0x1a6481(0x28e)]['create'](),'mgf1':{'md':forge['md'][_0x1a6481(0x28e)][_0x1a6481(0x223)]()}});return _0x27329d;}async function withRetry(_0x4b8add,_0x29f208){const _0x40a473=_0x3d847a;let _0x87d8d3=![],_0xc1522e=0x0,_0x511022,_0x1f8bff;while(_0xc1522e<maxRetries){try{_0x511022=await _0x29f208();break;}catch(_0x55a53b){_0x1f8bff=_0x55a53b,!_0x87d8d3?(_0x87d8d3=!![],logger[_0x40a473(0x357)]('RETRY\x20-\x20Error\x20in\x20'+_0x4b8add+':',_0x55a53b[_0x40a473(0x31b)]())):await sleep(retryInterval);}_0xc1522e++;}if(_0xc1522e==0x0)return _0x511022;if(_0xc1522e>=maxRetries)throw _0x1f8bff;else return logger[_0x40a473(0x357)](_0x40a473(0x23a)+_0xc1522e+_0x40a473(0x1a6)),_0x511022;}function formatResult(_0x12fac8,_0x1d73ec){return parseFloat(_0x12fac8['toFixed'](_0x1d73ec));}function formatResultTruncate(_0x1f5d11,_0x4d4156){const _0x34e9ab=_0x3d847a;let _0x4f023d=formatResultString(_0x1f5d11,0xa),_0x299381=_0x4f023d[_0x34e9ab(0x328)]('.');return _0x299381!=-0x1&&(_0x4f023d=_0x4f023d[_0x34e9ab(0x2e5)](0x0,_0x299381+_0x4d4156+0x1)),Number(_0x4f023d);}function formatResultString(_0x2c8430,_0x126ecc){const _0x2ce97a=_0x3d847a;let _0x217c83;if(!(''+_0x2c8430)[_0x2ce97a(0x319)]('e'))_0x217c83=+(Math[_0x2ce97a(0x295)](_0x2c8430+'e+'+_0x126ecc)+'e-'+_0x126ecc);else{let _0x5ebe98=(''+_0x2c8430)[_0x2ce97a(0x23c)]('e'),_0x3404b3='';+_0x5ebe98[0x1]+_0x126ecc>0x0&&(_0x3404b3='+'),_0x217c83=+(Math[_0x2ce97a(0x295)](+_0x5ebe98[0x0]+'e'+_0x3404b3+(+_0x5ebe98[0x1]+_0x126ecc))+'e-'+_0x126ecc);}return Number(_0x217c83)[_0x2ce97a(0x320)](_0x126ecc);}function getServerTime(){const _0x3eb137=_0x3d847a,_0x2367e9=new Date();return _0x2367e9['getFullYear']()+'/'+(_0x2367e9[_0x3eb137(0x26c)]()+0x1)[_0x3eb137(0x31b)]()['padStart'](0x2,'0')+'/'+_0x2367e9['getDate']()[_0x3eb137(0x31b)]()[_0x3eb137(0x2fa)](0x2,'0')+'\x20'+_0x2367e9[_0x3eb137(0x21f)]()[_0x3eb137(0x31b)]()['padStart'](0x2,'0')+':'+_0x2367e9['getMinutes']()['toString']()[_0x3eb137(0x2fa)](0x2,'0')+':'+_0x2367e9[_0x3eb137(0x1e1)]()[_0x3eb137(0x31b)]()[_0x3eb137(0x2fa)](0x2,'0');}function getTimeStamp(){const _0x2da062=_0x3d847a,_0x5725f5=shiftedTime();return _0x5725f5[_0x2da062(0x1e4)]()+'/'+(_0x5725f5[_0x2da062(0x26c)]()+0x1)[_0x2da062(0x31b)]()[_0x2da062(0x2fa)](0x2,'0')+'/'+_0x5725f5[_0x2da062(0x348)]()[_0x2da062(0x31b)]()[_0x2da062(0x2fa)](0x2,'0')+'\x20'+_0x5725f5[_0x2da062(0x21f)]()[_0x2da062(0x31b)]()['padStart'](0x2,'0')+':'+_0x5725f5['getMinutes']()['toString']()['padStart'](0x2,'0')+':'+_0x5725f5['getSeconds']()[_0x2da062(0x31b)]()[_0x2da062(0x2fa)](0x2,'0');}function getDate(){const _0x3a804f=_0x3d847a,_0x194d3f=shiftedTime();return _0x194d3f['getFullYear']()+'/'+(_0x194d3f[_0x3a804f(0x26c)]()+0x1)['toString']()[_0x3a804f(0x2fa)](0x2,'0')+'/'+_0x194d3f[_0x3a804f(0x348)]()[_0x3a804f(0x31b)]()[_0x3a804f(0x2fa)](0x2,'0');}function getHour(){const _0x4d159c=_0x3d847a,_0x2d0f72=shiftedTime();return _0x2d0f72[_0x4d159c(0x21f)]()['toString']()[_0x4d159c(0x2fa)](0x2,'0');}function sleep(_0x466d56){return new Promise(_0x2e5737=>setTimeout(_0x2e5737,_0x466d56));}function shiftedTime(){const _0x629596=_0x3d847a,_0x3eb2dc=new Date();let _0x55051d=_0x3eb2dc;if(config&&config['timeshift']!==0x0)_0x55051d=fns[_0x629596(0x333)](_0x3eb2dc,{'hours':config[_0x629596(0x253)]});return _0x55051d;}function timer(_0x401e3c){const _0x53201a=_0x3d847a,_0x47e819=new Date();!lasttime?console[_0x53201a(0x2bc)](getTimeStamp()+_0x53201a(0x315),_0x401e3c,_0x47e819):console[_0x53201a(0x2bc)](getTimeStamp()+_0x53201a(0x315),_0x401e3c,(_0x47e819-lasttime)/0x3e8),lasttime=_0x47e819;}