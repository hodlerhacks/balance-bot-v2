const _0x28f3c2=_0x4189;(function(_0x36ce06,_0x46a8c3){const _0x329083=_0x4189,_0x2dd159=_0x36ce06();while(!![]){try{const _0x1944d0=-parseInt(_0x329083(0x20f))/0x1+parseInt(_0x329083(0x244))/0x2*(-parseInt(_0x329083(0x28e))/0x3)+-parseInt(_0x329083(0x269))/0x4*(parseInt(_0x329083(0x114))/0x5)+-parseInt(_0x329083(0x261))/0x6+-parseInt(_0x329083(0x233))/0x7*(parseInt(_0x329083(0x27e))/0x8)+parseInt(_0x329083(0x15e))/0x9+-parseInt(_0x329083(0x111))/0xa*(-parseInt(_0x329083(0x21f))/0xb);if(_0x1944d0===_0x46a8c3)break;else _0x2dd159['push'](_0x2dd159['shift']());}catch(_0x40aa02){_0x2dd159['push'](_0x2dd159['shift']());}}}(_0x5555,0x465cb));const _0x3f23cb=function(){let _0x1ad219=!![];return function(_0x96a5,_0x37a01a){const _0x31d76f=_0x1ad219?function(){const _0x3f85dd=_0x4189;if(_0x37a01a){const _0x2b07d0=_0x37a01a[_0x3f85dd(0x151)](_0x96a5,arguments);return _0x37a01a=null,_0x2b07d0;}}:function(){};return _0x1ad219=![],_0x31d76f;};}(),_0x5d1e7a=_0x3f23cb(this,function(){const _0x497ac7=_0x4189;return _0x5d1e7a[_0x497ac7(0x24f)]()[_0x497ac7(0x1a7)](_0x497ac7(0x131))[_0x497ac7(0x24f)]()[_0x497ac7(0x235)](_0x5d1e7a)[_0x497ac7(0x1a7)](_0x497ac7(0x131));});_0x5d1e7a();'use strict';const ccxt=require(_0x28f3c2(0x11a)),low=require(_0x28f3c2(0x278)),FileSync=require(_0x28f3c2(0x1de)),fs=require('fs'),fns=require(_0x28f3c2(0x1cd)),forge=require(_0x28f3c2(0x285)),util=require(_0x28f3c2(0x217)),argv=require('yargs/yargs')(process[_0x28f3c2(0x1a6)][_0x28f3c2(0x201)](0x2))[_0x28f3c2(0x1a6)],path=require(_0x28f3c2(0x11d)),axios=require(_0x28f3c2(0x1fc));function _0x4189(_0x3807bf,_0xe531c){const _0x1ab2c6=_0x5555();return _0x4189=function(_0x5d1e7a,_0x3f23cb){_0x5d1e7a=_0x5d1e7a-0xdf;let _0x555512=_0x1ab2c6[_0x5d1e7a];return _0x555512;},_0x4189(_0x3807bf,_0xe531c);}let exchange,gTicker={},gChange={};const usdBasecoins=[_0x28f3c2(0x1e4),_0x28f3c2(0x185),_0x28f3c2(0x1b6),_0x28f3c2(0x121),_0x28f3c2(0x28c),'USDP'],excludedExchanges=[_0x28f3c2(0x224)],debugging=argv['d']||![];let pnlGenerationNeeded=argv['r']||![],config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x28f3c2(0xec)]({'LOCKED':0x0,'UNLOCKING':0x1,'UNLOCKED':0x2});let lockOrders=ORDERS[_0x28f3c2(0x1e9)],validateOrdersState,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotIntervalShort=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0x28f3c2(0x116)+pauseBotInterval/0xea60+_0x28f3c2(0x197),maxPauseRetries=0x6,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,watchTransactionsInterval=0x3c*0x3e8,schedulerInterval=0x3c*0x3c*0x3e8,retryInterval=0x3e8,maxRetries=0x5,logPageSize=0x14,defaultFee=0.003;function _0x5555(){const _0x6cc041=['\x20|\x20exchange:\x20','\x20-\x20bot\x20already\x20running\x20in\x20manual\x20mode','Initializing\x20coin\x20results','open','log','success','version','1\x20-\x20Handle\x20open\x20orders','coin-loading-progress','95307vulwjR','\x20minutes\x20-\x20','value','\x20>\x20','no\x20open\x20orders','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','time','netoffset','util','colorscheme','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','sort','Cooldown\x20ended\x20-\x20balancing\x20resumed','unlinkSync','send','\x20blocked\x20API\x20(RateLimitExceeded)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','44fCbUPD','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','Huobipro','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','pid','bitmex','************','page','limit-low','UNLOCKING','toggleBotMode','initial','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','net-basecoin','prevnumber','progress','Market\x20order','EUR','\x20attempts','Initializing\x20exchange','7LLTRkm','write','constructor','excluded','push','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','2.6.0','showConfig','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','cancel','realizedPnL','balancing\x20resumed','reverse','Huobi','%\x20(','Stopped\x20fetching\x20balance\x20after\x20','get','2IrtZqe','isBefore','\x20metrics:</b>\x20\x0a\x0a','startnumber','red_yellow_blue','</pre>','showname','args','added','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','/backup/','toString','PAXG','test',':\x20timer\x20>','data','OrderNotFound','restart','\x20order:\x20','net-fiat','trade','total','fetchBalance()','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','distribution','timeout','botID','secret','emojisell','1946040LYGUUM','mkdirSync','2.3.5','threshold','limit','forEach','-results.json','apiPassword','4wkaPZC','assign','Invalid\x20balance\x20for\x20','Avoiding\x20continuous\x20order\x20attempts','filled','-config.json','includes','ordertype','currency','buys','pki','toFixed','createWriteStream','getMinutes','resetHistory','lowdb','pnl','\x20-\x20','has','remainingSymbols','basecoinvalue','3928096yxeRZL','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','<pre>','active','apiKey','enabled','\x20>\x20[DEBUG]\x20','node-forge','Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute','secure','RateLimitExceeded','production','2\x20-\x20Handled\x20open\x20orders','toLowerCase','USDC','canceled','862833ifhXFi','initclient','./config/','Order\x20filled:\x20','exchange','min','privateKeyFromPem','heapUsed','0\x20-\x20EXECUTION:\x20','\x20network\x20error:\x20','RequestTimeout','Block\x20transaction\x20detection:\x20','loading-canceled','market_cap','Pausing\x20for\x20','Bybit','basecoin','buy','starting-balance-','2.7.1','\x20not\x20responding\x20(see:\x20hodlerhacks.com/fix/5)','startprice','target','\x0aSymbol(s):\x20','\x20-\x20bot\x20switched\x20to\x20manual\x20mode','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','getDate','join','Error\x20in\x20testNewAPI():\x20','\x20exchange','map','Failed\x20to\x20load\x20coin\x20data\x20for\x20','warning','Portfolio\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','2.6.22','freeze','Invalid\x20quantity','sha256','change24h','valid','parse','token\x20is\x20expired','Value\x20',')\x20|\x20exchange:\x20','Valid\x20balance\x20for\x20','Market','Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)','function','string','headless','-performance.json','defaults','removed','storeHeadless','sendPortfolioTelegram','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','\x20>\x20details:','highest','kill','Portfolio\x20change\x20detected:\x20','getOpenOrders()','set','ExchangeError','ID:\x20','startdate','openOrders','BTC','watchTrades()','last','loadMarkets','performance','Fee\x20discount\x20refund\x20detected:\x20','4203530SFFvCf','entries','\x20blocked\x20API\x20(DDoSProtection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','2375745Ozgslh','1\x20-\x20FILLED\x20known\x20order:\x20','\x20>\x20pausing\x20bot\x20for\x20','bb-settings.json','match','InsufficientFunds','ccxt','date','Limit\x20(low-margin)','path','spot','fetchTickers','Exception\x20thrown\x20in\x20','USDT','uncaughtException','apiSecret','decode64','/USD','placeOrder()','ExchangeNotAvailable','Manual\x20balancing\x20required','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','Initiating\x20bot\x20restart','balancing\x20resumes\x20when\x20cooldown\x20ends','marketcapEnabled','-events.json','liquidity','Cex','fetchTicker','(((.+)+)+)+$','update-liquidity','<b>Bot\x20','closed','\x20|\x20','must\x20be\x20greater\x20than\x20minimum\x20amount','marketcap','Net\x20','type','Trigger:\x20','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)','\x20API\x20key\x20is\x20invalid','symbol','\x20portfolio:</b>\x20\x0a\x0a','privateKey','split','pro','replace','1\x20-\x20FILLED\x20unknown\x20order:\x20','changes','\x20>\x20stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','change','Error\x20occurred:\x20','cloneDeep','configstate','getSeconds','loadSymbols()','timestamp','complete','Invalid\x20API\x20details,\x20please\x20try\x20again\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','recovery','Error\x20in\x20loadSymbols():\x20','apply','addDays','max',':\x20Bot\x20','quote','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','%)\x0a','shift','decrypt','bot-','isEqual','createOrder','slider','2521890MBgbey','round','PermissionDenied','offset','marketcapsqrt','splice','ask','Bitget','order','pop','watchOrders()','fetchOpenOrders','timeshift','bb-secure.json','\x20|\x20Custom\x20ID:\x20','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','onepagemode','2.6.23','***','cooldown','usd','PnL\x20','fee','running','\x20/\x20','emojibuy','password','error','abs','Unknown\x20error\x20-\x20check\x20logs','\x20API\x20key,\x20secret\x20or\x20password\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange',',\x20must\x20be\x20a\x203\x20digit\x20number','amountToPrecision','Error\x20while\x20deleting\x20files:\x20','recreate','<b>','eur','Initializing\x20exchange:\x20already\x20done','recent20','BUSD','portfolio1','watchTrades','OnMaintenance','percentage','exchanges','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','001','portfolio','cancelLoading','marketcapApi','portfolio2','ETH','/output-000.log','Resetting\x20coin\x20results:\x20','autoliquidity','format','logs','\x20minutes','customId','\x20rejected\x20your\x20API\x20request\x20(see:\x20hodlerhacks.com/fix/4)','./logs/','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','Loading\x20completed','LOCKED','stack','code','amount','keys','event','orderstatus','Error\x20details:\x20','deleteHistoryAlerts','argv','search','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','yyyy/MM/dd','Cryptocom','Generating\x20PnL\x20data','1\x20-\x20partially\x20FILLED\x20(','InvalidNonce','pnl-fiat','watchOrders','getHours','storeConfiguration','starting-balances','orderId','cancelOrder','bot','TUSD','DDoSProtection','.json','event-history','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20trying\x20again\x20in\x20','staging','existsSync','detectLiquidityChange()','storeFiat','Generated\x20PnL\x20data','/EUR','sortBy','watchTradesForSymbols()','\x20MB','none','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','Exchange\x20permission\x20denied\x20-\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','botname','\x20not\x20available\x20(see:\x20hodlerhacks.com/fix/5)','create','findIndex','API-key\x20format\x20invalid','debug','date-fns','Executed\x20','\x20hour','market','ongoing','final','Error\x20details:','environment','length','RETRY\x20-\x20Error\x20in\x20',')\x20known\x20order:\x20','status','exchange\x20reload','2\x20-\x20handling\x20FILLED\x20order:\x20','fiat','getMonth','breakeven','lowdb/adapters/FileSync','MIN_NOTIONAL','price','bots','balances','Exchange','USD','getFullYear','configuration','watchTradesForSymbols','limits','UNLOCKED','pnl-basecoin','number','quick','padStart','fetchBalance','fromCodePoint','delta','AuthenticationError','\x20|\x20lock\x20orders:\x20','full','memoryUsage','coins','Order\x20is\x20invalid:\x20','side','\x20has\x20a\x2024h\x20drop\x20of\x20','find','substring','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','axios','coin','sell','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','bid','slice','sqrt','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','stringify','filter'];_0x5555=function(){return _0x6cc041;};return _0x5555();}let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidOrdersInitialTimeout,pidOrdersTimeout,botPaused=![],transactionDetectionOngoing=![],lastCoinsToBalance='',exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x5dc,balanceUpdateRetries=0x5;let enableFiatToggle;const serverversion=require('./version.json')[_0x28f3c2(0x20c)],environment=require('./version.json')[_0x28f3c2(0x1d4)]||_0x28f3c2(0x289),botID=process[_0x28f3c2(0x1a6)][0x2]||_0x28f3c2(0x18c),pattern=/^[0-9]{3}$/;!pattern[_0x28f3c2(0x251)](botID)&&(console['log']('Error:\x20Invalid\x20argument\x20'+botID+_0x28f3c2(0x17d)),killBot());const userID=process['argv'][0x3]||'',configpath=userID?_0x28f3c2(0x290)+userID+'/':'./config/',logspath=userID?_0x28f3c2(0x19a)+userID+'/':'./logs/',loggerfile=fs[_0x28f3c2(0x275)](logspath+_0x28f3c2(0x192),{'flags':'a'});!fs['existsSync'](configpath)&&fs[_0x28f3c2(0x262)](configpath);!fs[_0x28f3c2(0x1bc)](logspath)&&fs[_0x28f3c2(0x262)](logspath);const configfile=configpath+_0x28f3c2(0x15a)+botID+_0x28f3c2(0x26e),logfile=configpath+_0x28f3c2(0x15a)+botID+'-events.json',performancefile=configpath+_0x28f3c2(0x15a)+botID+'-performance.json',coinresultsfile=configpath+'bot-'+botID+'-results.json',settingsfile=configpath+_0x28f3c2(0x117),securefile=configpath+_0x28f3c2(0x16b),configbackuppath=configpath+_0x28f3c2(0x24e),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x28f3c2(0xfc)]({'logs':[],'version':serverversion})[_0x28f3c2(0x234)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x28f3c2(0xfc)]({'data':[],'version':serverversion})[_0x28f3c2(0x234)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x28f3c2(0xfc)]({'bot':[],'version':serverversion})[_0x28f3c2(0x234)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x28f3c2(0xfc)]({'coins':{},'version':serverversion})['write']();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0,settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x1dfff9=>{const _0x5507fd=_0x28f3c2;console[_0x5507fd(0x20a)](_0x1dfff9);},'simple':_0x4d8f5a=>{const _0x151bad=_0x28f3c2;console[_0x151bad(0x20a)](_0x4d8f5a),loggerfile[_0x151bad(0x234)](util[_0x151bad(0x195)](_0x4d8f5a)+'\x0a');},'full':async(_0x3f9fce,_0x1c4c92='')=>{const _0x4f2047=_0x28f3c2;let _0xa4eea7;if(config[_0x4f2047(0x24a)])_0xa4eea7=getTimeStamp()+':\x20'+config[_0x4f2047(0x1c7)]+_0x4f2047(0x212)+_0x3f9fce;else _0xa4eea7=getTimeStamp()+_0x4f2047(0x154)+botID+_0x4f2047(0x212)+_0x3f9fce;console[_0x4f2047(0x20a)](_0xa4eea7),loggerfile[_0x4f2047(0x234)](util[_0x4f2047(0x195)](_0xa4eea7)+'\x0a'),_0x1c4c92&&(console[_0x4f2047(0x20a)](_0x1c4c92),loggerfile[_0x4f2047(0x234)](util[_0x4f2047(0x195)](_0x1c4c92)+'\x0a'));},'debug':async(_0x505ee3,_0x1d3ae2='')=>{const _0x50600f=_0x28f3c2;let _0xd46f90;if(config[_0x50600f(0x24a)])_0xd46f90=getTimeStamp()+':\x20'+config[_0x50600f(0x1c7)]+_0x50600f(0x284)+_0x505ee3;else _0xd46f90=getTimeStamp()+':\x20Bot\x20'+botID+'\x20>\x20[DEBUG]\x20'+_0x505ee3;if(debugging)console[_0x50600f(0x20a)](_0xd46f90);loggerfile['write'](util[_0x50600f(0x195)](_0xd46f90)+'\x0a');if(_0x1d3ae2){if(debugging)console[_0x50600f(0x20a)](_0x1d3ae2);loggerfile[_0x50600f(0x234)](util[_0x50600f(0x195)](_0x1d3ae2)+'\x0a');}}};process['on']('uncaughtException',function(_0x18574d){const _0x4e32ee=_0x28f3c2;handleError(_0x18574d[_0x4e32ee(0x19e)],_0x4e32ee(0x122));});settings[_0x28f3c2(0x16a)]!=config[_0x28f3c2(0x16a)]&&updateTimeshift(settings[_0x28f3c2(0x16a)]);settings[_0x28f3c2(0x16e)]!=config['onepagemode']&&updateOnepagemode(settings[_0x28f3c2(0x16e)]);(settings[_0x28f3c2(0x18f)]&&!config[_0x28f3c2(0x18f)]||!settings[_0x28f3c2(0x18f)]&&config[_0x28f3c2(0x18f)])&&updateMarketcapApi(settings[_0x28f3c2(0x18f)]);process[_0x28f3c2(0x21d)]({'started':_0x28f3c2(0x175)},_0x18e40d=>{}),initializeProcessListeners();function proxyEmit(_0x47b7f2,_0x1a2166=null){const _0x4d0cf7=_0x28f3c2;process[_0x4d0cf7(0x21d)]({'function':_0x47b7f2,'args':_0x1a2166},_0x463c22=>{});}function initializeProcessListeners(){process['on']('message',_0x1588ae=>{const _0x56e798=_0x4189;switch(Object[_0x56e798(0x1a1)](_0x1588ae)[0x0]){case'timeshift':_0x1588ae[_0x56e798(0x16a)]!=undefined&&(settings[_0x56e798(0x16a)]=_0x1588ae[_0x56e798(0x16a)],updateTimeshift(settings[_0x56e798(0x16a)]));break;case _0x56e798(0x16e):_0x1588ae['onepagemode']!=undefined&&(settings[_0x56e798(0x16e)]=_0x1588ae['onepagemode'],updateOnepagemode(settings[_0x56e798(0x16e)]));break;case _0x56e798(0x18f):_0x1588ae[_0x56e798(0x18f)]!=undefined&&(settings[_0x56e798(0x18f)]=_0x1588ae[_0x56e798(0x18f)],updateMarketcapApi(settings[_0x56e798(0x18f)]));break;case _0x56e798(0x1e1):_0x1588ae[_0x56e798(0x1e1)]!=undefined&&(bots=JSON[_0x56e798(0xf1)](_0x1588ae['bots']),proxyEmit(_0x56e798(0x1e1),bots));break;case _0x56e798(0xf8):switch(_0x1588ae[_0x56e798(0xf8)]){case _0x56e798(0x28f):initclient();break;case _0x56e798(0x229):toggleBotMode();break;case'emitHistory':emitHistory(_0x1588ae[_0x56e798(0x24b)]);break;case _0x56e798(0x1a5):deleteHistoryAlerts(_0x1588ae[_0x56e798(0x24b)]);break;case'getPortfolio':getPortfolio(_0x1588ae[_0x56e798(0x24b)]);break;case _0x56e798(0x1b1):storeConfiguration(_0x1588ae[_0x56e798(0x24b)]);break;case _0x56e798(0xfe):storeHeadless(_0x1588ae[_0x56e798(0x24b)]);break;case _0x56e798(0x1be):storeFiat(_0x1588ae[_0x56e798(0x24b)]);break;case _0x56e798(0x277):resetHistory();break;case'getStartingBalances':getStartingBalances(getNormalizedPerformance());break;case'placeOrder':placeOrder(_0x1588ae[_0x56e798(0x24b)]);break;case _0x56e798(0x18e):cancelLoading();break;case _0x56e798(0x23a):showConfig();break;case'sendMetricsTelegram':sendMetricsTelegram();break;case _0x56e798(0xff):sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x27766f=![]){const _0x5e2b3d=_0x28f3c2;logger[_0x5e2b3d(0x1cc)]('Reset\x20|\x20'+(_0x27766f?_0x5e2b3d(0x1d9):'no\x20exchange\x20reloaded')+_0x5e2b3d(0x206)+config[_0x5e2b3d(0x292)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x27766f)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x5e2b3d(0x282)]!=''&&config[_0x5e2b3d(0x282)]!=_0x5e2b3d(0x170)){loadingProgress=0x0;if(_0x27766f){await initExchange();const _0x181765=await testAPI();if(!_0x181765)return;await loadSymbols(),loadingProgress=0x1,setStableCoins(),proxyEmit(_0x5e2b3d(0x1e6),emittedConfiguration()),initialPerformanceStored=![];}const _0x237ff9=await getCoins();[currentCoins,currentCoinsAll]=_0x237ff9,setBlockTransactionDetection(![]),startScheduler(),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger['debug'](_0x5e2b3d(0x19c)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x5e2b3d(0x1d5)]==0x0&&allOpenOrders[_0x5e2b3d(0x1d5)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(pnlGenerationNeeded)await generatePnL();}}async function resumeBot(_0x315210=![]){const _0xa28118=_0x28f3c2;logger[_0xa28118(0x1cc)]('Resuming\x20('+(_0x315210?_0xa28118(0x1ec):_0xa28118(0x14d))+_0xa28118(0xf4)+config[_0xa28118(0x292)]);if(pidBalances)clearTimeout(pidBalances);if(_0x315210){getBalances();return;}coinsLoaded=![];if(config[_0xa28118(0x282)]!=''&&config[_0xa28118(0x282)]!='***'){loadingProgress=0x1;const _0x113ad2=await getCoins();[currentCoins,currentCoinsAll]=_0x113ad2,setBlockTransactionDetection(![]),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0xa28118(0x1cc)](_0xa28118(0x19c)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0xa28118(0x1d5)]==0x0&&allOpenOrders[_0xa28118(0x1d5)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();}}async function getMarketCap(_0x5acff9){const _0x3dc81c=_0x28f3c2;let _0x393052=![];if(_0x5acff9)_0x393052=!![];let _0xb3a316;_0x393052?_0xb3a316=_0x5acff9[_0x3dc81c(0xe7)](_0x11e361=>_0x11e361[_0x3dc81c(0x1fd)]):_0xb3a316=currentCoinsAll[_0x3dc81c(0xe7)](_0x1a826c=>_0x1a826c[_0x3dc81c(0x1fd)]);if(!config[_0x3dc81c(0x18f)]||!_0x393052&&!config[_0x3dc81c(0x12c)]||_0xb3a316[_0x3dc81c(0x1d5)]==0x0)return;let _0x163963=null;try{_0x163963=await axios[_0x3dc81c(0x243)]('https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest',{'headers':{'X-CMC_PRO_API_KEY':settings[_0x3dc81c(0x18f)]},'params':{'symbol':_0xb3a316[_0x3dc81c(0x24f)]()}});}catch(_0x561510){_0x163963=null,_0x561510[_0x3dc81c(0x24f)]()[_0x3dc81c(0x26f)]('status\x20code\x20401')?(config[_0x3dc81c(0x18f)]=![],updateConfig(),proxyEmit(_0x3dc81c(0x1e6),emittedConfiguration()),logHistory(_0x3dc81c(0x179),_0x3dc81c(0x23b))):(logHistory(_0x3dc81c(0x179),_0x3dc81c(0x1ba)+schedulerInterval/(0x3c*0x3e8)+'\x20minutes'),logger['debug']('Error\x20details:',_0x561510['toString']()+_0x3dc81c(0x27a)+_0x561510[_0x3dc81c(0x19f)]));}if(_0x163963){let _0xa4bc40=0x0;const _0x3badff=_0x163963['data'];_0xb3a316[_0x3dc81c(0x266)](_0x156e23=>{const _0x7e355c=_0x3dc81c;if(_0x3badff[_0x7e355c(0x253)][_0x156e23][0x0])_0xa4bc40+=_0x3badff[_0x7e355c(0x253)][_0x156e23][0x0]['quote'][_0x7e355c(0x1e4)][_0x7e355c(0x29b)];}),_0xb3a316['forEach'](_0x469ee0=>{const _0xbec475=_0x3dc81c,_0x3916da=_0x3badff['data'][_0x469ee0][0x0]?_0x3badff['data'][_0x469ee0][0x0][_0xbec475(0x155)][_0xbec475(0x1e4)]['market_cap']:0x0;if(_0x393052){const _0x122643=_0x5acff9[_0xbec475(0x1f9)](_0x32dbba=>_0x32dbba[_0xbec475(0x1fd)]==_0x469ee0);_0x122643&&(_0x122643['marketcap']=_0x3916da);}else{const _0x34d717=currentCoins[_0xbec475(0x1f9)](_0x48514c=>_0x48514c[_0xbec475(0x1fd)]==_0x469ee0);_0x34d717&&(_0x34d717[_0xbec475(0x137)]=_0x3916da);const _0x2a31d0=currentCoinsAll['find'](_0x5d83c3=>_0x5d83c3[_0xbec475(0x1fd)]==_0x469ee0);_0x2a31d0&&(_0x2a31d0['marketcap']=_0x3916da);}}),!_0x393052&&updateTargetDistribution();}}function updateTargetDistribution(){const _0x1f632=_0x28f3c2,_0x2a5c05=0x2;let _0x29714d=0x0,_0x1accee=0x0,_0x1fa92c=0x0,_0xd84cba=0x0,_0x4af9f5=0x0;config['portfolio']['forEach'](_0x198da6=>{const _0x1a2491=_0x4189;if(!_0x198da6[_0x1a2491(0x236)]){_0x1fa92c++,_0x29714d+=_0x198da6['slider'];if(_0x198da6[_0x1a2491(0x15d)]===-0x1){_0x29714d++;const _0x396d6f=currentCoinsAll[_0x1a2491(0x1f9)](_0x3e2a0e=>_0x3e2a0e[_0x1a2491(0x1fd)]==_0x198da6['coin']);_0x396d6f&&(_0xd84cba+=_0x396d6f['marketcap'],_0x4af9f5+=Math[_0x1a2491(0x202)](_0x396d6f['marketcap']));}if(_0x198da6[_0x1a2491(0x15d)]!==-0x1)_0x1accee++;}});let _0x4172fe;const _0x4f1467=0x64-_0x29714d,_0x4550de=_0x1fa92c-_0x1accee;_0x4172fe=_0x4550de===0x0?_0x29714d:Math[_0x1f632(0x153)](0x64,_0x29714d),config[_0x1f632(0x18d)][_0x1f632(0x266)](_0x462045=>{const _0x33af5c=_0x1f632,_0x4d2661=currentCoinsAll[_0x33af5c(0x1f9)](_0x18190b=>_0x18190b[_0x33af5c(0x1fd)]==_0x462045[_0x33af5c(0x1fd)]);_0x4d2661&&(_0x462045[_0x33af5c(0x137)]=_0x4d2661[_0x33af5c(0x137)]);if(!_0x462045['excluded']){if(_0x4172fe<=0x64){if(_0x462045[_0x33af5c(0x15d)]===-0x1){if(_0xd84cba!==0x0&&config['marketcapEnabled']){if(_0x4d2661){if(config[_0x33af5c(0x12c)]=='marketcap')_0x462045[_0x33af5c(0x25c)]=(_0x4f1467/(_0xd84cba/_0x4d2661[_0x33af5c(0x137)]))[_0x33af5c(0x274)](_0x2a5c05);else config[_0x33af5c(0x12c)]==_0x33af5c(0x162)&&(_0x462045['distribution']=(_0x4f1467/(_0x4af9f5/Math[_0x33af5c(0x202)](_0x4d2661[_0x33af5c(0x137)])))[_0x33af5c(0x274)](_0x2a5c05));}}}}}}),updateConfig();}function updateConfig(){const _0x196deb=_0x28f3c2;let _0x562f4d=dbConfig['get'](_0x196deb(0x1b5))[_0x196deb(0x1f9)]({'botID':botID})[_0x196deb(0x211)]();_0x562f4d&&dbConfig[_0x196deb(0x243)](_0x196deb(0x1b5))[_0x196deb(0x1f9)]({'botID':botID})['assign'](config)[_0x196deb(0x234)]();}function logMemory(){const _0x312fc5=_0x28f3c2;if(environment!=_0x312fc5(0x1bb))return;const _0x5ea081=process[_0x312fc5(0x1f4)]()[_0x312fc5(0x295)]/0x400/0x400;logger['debug']('process\x20'+process[_0x312fc5(0x223)]+'\x20uses\x20'+formatResult(_0x5ea081,0x1)+_0x312fc5(0x1c3));}async function startScheduler(){const _0x16463c=_0x28f3c2,_0x270cae=shiftedTime()[_0x16463c(0x1b0)]();getMarketCap(),loadSymbols(),_0x270cae==0x1&&logMemory(),await sleep(schedulerInterval),startScheduler();}async function restartBot(_0x14a245=![]){const _0x1136d1=_0x28f3c2;logger['debug'](_0x1136d1(0x12a));if(!_0x14a245)while(lockOrders!=ORDERS['UNLOCKED']||coolingDown){await sleep(0x3e8);}process[_0x1136d1(0x21d)]({'stop':_0x1136d1(0x255)},_0x245623=>{});}async function initExchange(_0x1cbd79=config['exchange'],_0x2a3208=config[_0x28f3c2(0x282)],_0xadba00=config[_0x28f3c2(0x123)],_0x305094=config[_0x28f3c2(0x268)]){const _0x10d43b=_0x28f3c2;if(exchange){logger[_0x10d43b(0x1cc)](_0x10d43b(0x183));return;}logger[_0x10d43b(0x1cc)](_0x10d43b(0x232));!supportedExchanges()['includes'](_0x1cbd79)&&(logHistory(_0x10d43b(0x179),_0x10d43b(0x18b)+_0x1cbd79+_0x10d43b(0xe6)),killBot());const _0x43f864=ccxt[_0x10d43b(0x141)][_0x1cbd79[_0x10d43b(0x28b)]()];exchange=new _0x43f864({'apiKey':_0x2a3208,'secret':_0xadba00,'options':{'defaultType':_0x10d43b(0x11e)}});if(_0x305094)exchange[_0x10d43b(0x178)]=_0x305094;}function updateExchange(_0x44766d,_0x3c0c1c,_0x49d07b=null){const _0x23930b=_0x28f3c2;exchange[_0x23930b(0x282)]=_0x44766d,exchange[_0x23930b(0x25f)]=_0x3c0c1c,exchange[_0x23930b(0x178)]=_0x49d07b,logger[_0x23930b(0x1cc)]('Updating\x20API\x20key\x20(not\x20saved\x20in\x20config\x20file\x20yet)');}function setStableCoins(){const _0x1165f5=_0x28f3c2;let _0x5dcbff=config[_0x1165f5(0x29e)]==_0x1165f5(0x191)?'ETH':config[_0x1165f5(0x29e)]=='PAXG'?'PAXG':_0x1165f5(0x10b),_0x191410=allSymbols[_0x1165f5(0x26f)](_0x5dcbff+_0x1165f5(0x125))?'USD':allSymbols[_0x1165f5(0x26f)](_0x5dcbff+'/USDT')?_0x1165f5(0x121):'EUR',_0x3e9c62=allSymbols[_0x1165f5(0x26f)](_0x5dcbff+_0x1165f5(0x1c0))?_0x1165f5(0x230):_0x191410;enableFiatToggle=!![],_0x191410==_0x1165f5(0x230)&&(enableFiatToggle=![],storeFiat(_0x1165f5(0x230))),_0x3e9c62!=_0x1165f5(0x230)&&(enableFiatToggle=![],storeFiat(_0x1165f5(0x1e4))),stablecoins={'eur':{'coin':''+_0x5dcbff+_0x3e9c62,'symbol':_0x5dcbff+'/'+_0x3e9c62},'usd':{'coin':''+_0x5dcbff+_0x191410,'symbol':_0x5dcbff+'/'+_0x191410}};}async function initwsCcxt(){const _0xbd8906=_0x28f3c2;initCycle++;const _0x1ead7e=initCycle;let _0x4ed4c9=[];config[_0xbd8906(0x18d)][_0xbd8906(0x266)](_0x2f0f5a=>{const _0x3cba62=_0xbd8906;if(!_0x2f0f5a[_0x3cba62(0x236)]&&_0x2f0f5a[_0x3cba62(0x1fd)]!=config['basecoin'])_0x4ed4c9[_0x3cba62(0x237)](_0x2f0f5a['symbol']);});if(!_0x4ed4c9[_0xbd8906(0x26f)](stablecoins['eur']['symbol']))_0x4ed4c9['push'](stablecoins[_0xbd8906(0x182)][_0xbd8906(0x13d)]);if(!_0x4ed4c9[_0xbd8906(0x26f)](stablecoins[_0xbd8906(0x172)][_0xbd8906(0x13d)]))_0x4ed4c9[_0xbd8906(0x237)](stablecoins['usd'][_0xbd8906(0x13d)]);loadCoins(_0x4ed4c9),_0x4ed4c9=validateSymbols(_0x4ed4c9);const _0x207072=async _0xc873e7=>{let _0x173397;try{const _0xfaaa20=await getTickers(_0xc873e7);Object['entries'](_0xfaaa20)['forEach'](_0x2e33c5=>{const _0x100d62=_0x4189;_0x173397=_0x2e33c5[0x1][_0x100d62(0x13d)],gTicker[noslash(_0x173397)]=_0x2e33c5[0x1][_0x100d62(0x10d)],gChange[_0x173397]=_0x2e33c5[0x1][_0x100d62(0x189)];});}catch(_0x135188){await handleError(_0x135188,'initTickers()',_0x173397);}},_0x1cbb3b=async _0x40246d=>{const _0x539e9c=_0xbd8906;while(initCycle==_0x1ead7e){if(!botPaused)try{const _0x5eeed5=await exchange[_0x539e9c(0x187)](_0x40246d);gTicker[noslash(_0x5eeed5[0x0][_0x539e9c(0x13d)])]=_0x5eeed5[0x0]['price'];}catch(_0x867475){if(!exchangeStopped)await handleError(_0x867475,_0x539e9c(0x10c),_0x40246d);}else await sleep(0x64);}},_0x5c2606=async _0x49ec94=>{const _0x251cd1=_0xbd8906;while(initCycle==_0x1ead7e){if(!botPaused)try{const _0x3ac0a8=await exchange[_0x251cd1(0x1e7)](_0x49ec94),_0x36344f=_0x3ac0a8[_0x251cd1(0x167)]();gTicker[noslash(_0x36344f['symbol'])]=_0x36344f[_0x251cd1(0x1e0)];}catch(_0x3e3bf2){if(!exchangeStopped)await handleError(_0x3e3bf2,_0x251cd1(0x1c2),_0x49ec94[_0x251cd1(0x24f)]());}else await sleep(0x64);}},_0x12f47a=async _0x3d9cf5=>{while(initCycle==_0x1ead7e){if(!botPaused){let _0xc0049f;try{await sleep(0x3c*0x3e8);const _0x4bd9fd=await getTickers(_0x3d9cf5);Object['entries'](_0x4bd9fd)['forEach'](_0x1920fd=>{const _0x459012=_0x4189;_0xc0049f=_0x1920fd[0x1][_0x459012(0x13d)],gChange[_0xc0049f]=_0x1920fd[0x1]['percentage'];});}catch(_0x32ef2d){if(!exchangeStopped)await handleError(_0x32ef2d,'fetchTickers()',_0xc0049f);}}else await sleep(0x64);}},_0x4cff7f=async _0x6b7f2=>{const _0x127ef7=_0xbd8906;while(initCycle==_0x1ead7e){if(!botPaused)try{const _0x6f6456=await exchange[_0x127ef7(0x1af)](_0x6b7f2);initCycle==_0x1ead7e&&_0x6f6456[_0x127ef7(0x266)](_0x304ef9=>{updateNumberCoinsCcxt(_0x304ef9);});}catch(_0x1bb00c){if(!exchangeStopped)await handleError(_0x1bb00c,_0x127ef7(0x168));}else await sleep(0x64);}};_0x207072(_0x4ed4c9),_0x12f47a(_0x4ed4c9),exchange['has'][_0xbd8906(0x1e7)]&&!(config['exchange']==_0xbd8906(0x29d)&&_0x4ed4c9[_0xbd8906(0x1d5)]>0xa)?_0x5c2606(_0x4ed4c9):_0x4ed4c9[_0xbd8906(0x266)](_0x2fb5f8=>{_0x1cbb3b(_0x2fb5f8);}),_0x4ed4c9['forEach'](_0xbbabe6=>{_0x4cff7f(_0xbbabe6);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x447297){const _0x30a30b=_0x28f3c2;let _0x35990a={};try{if(config[_0x30a30b(0x292)]!=_0x30a30b(0x1aa))_0x35990a=await exchange[_0x30a30b(0x11f)](_0x447297);else for(const _0x473d1d of _0x447297){const _0x4c6ab8=await exchange[_0x30a30b(0x130)](_0x473d1d);_0x35990a[_0x473d1d]=_0x4c6ab8;}return _0x35990a;}catch(_0x252f16){throw _0x252f16;}}function setBlockTransactionDetection(_0x179186){const _0x2d9a65=_0x28f3c2;blockTransactionDetection=_0x179186,logger['debug'](_0x2d9a65(0x299)+blockTransactionDetection);}async function detectLiquidityChange(_0x255a88=0x0){const _0x5cd05d=_0x28f3c2;transactionDetectionOngoing=!![];try{const _0xd3385d=await getCoins(_0x255a88),[_0x38981d,_0x1ad467]=_0xd3385d;let _0x496e42=[];currentCoins[_0x5cd05d(0x266)](_0x22966f=>{const _0x1336e8=_0x5cd05d,_0xe1e41c=_0x38981d[_0x1336e8(0x1f9)](_0x3ef51c=>_0x3ef51c['coin']==_0x22966f[_0x1336e8(0x1fd)]);if(_0xe1e41c){if(_0x22966f['number']!=_0xe1e41c[_0x1336e8(0x1eb)]){let _0x39db4a;if(_0x22966f[_0x1336e8(0x1fd)]!=config[_0x1336e8(0x29e)]){const _0x18b53d=gTicker[noslash(_0x22966f['symbol'])];_0x39db4a=_0x22966f[_0x1336e8(0x23f)]?0x1/_0x18b53d:_0x18b53d;}else _0x39db4a=0x1;_0x496e42[_0x1336e8(0x237)]({'coin':_0x22966f[_0x1336e8(0x1fd)],'symbol':_0x22966f[_0x1336e8(0x13d)],'price':_0x39db4a,'number':Number(formatResult(_0xe1e41c[_0x1336e8(0x1eb)]-_0x22966f[_0x1336e8(0x1eb)],0x8)),'basecoinvalue':_0x39db4a*(_0xe1e41c[_0x1336e8(0x1eb)]-_0x22966f[_0x1336e8(0x1eb)])});}}});if(_0x496e42[_0x5cd05d(0x1d5)]>0x0&&!blockTransactionDetection){for(const _0x5dd1df of _0x496e42){if(config[_0x5cd05d(0x194)]){logger[_0x5cd05d(0x1cc)]('Liquidity\x20change\x20|\x20basecoin\x20value:\x20'+_0x5dd1df[_0x5cd05d(0x27d)]+'\x20|\x20highest\x20fee:\x20'+lastFees[_0x5cd05d(0x102)]);if(lastFees[_0x5cd05d(0x102)]==0x0||Math[_0x5cd05d(0x17a)](_0x5dd1df['basecoinvalue'])>lastFees[_0x5cd05d(0x102)]*0x3){if(config['autoliquidity']==_0x5cd05d(0x132)){delete _0x5dd1df['symbol'],delete _0x5dd1df['basecoinvalue'];let _0x55bef5=[],_0x5861db=[...config[_0x5cd05d(0x12e)]]||[],_0x4010a9=config[_0x5cd05d(0x12e)];_0x5861db[_0x5cd05d(0x21a)]((_0x57c638,_0x3cbc7c)=>_0x57c638[_0x5cd05d(0x11b)]>_0x3cbc7c[_0x5cd05d(0x11b)]?-0x1:_0x3cbc7c[_0x5cd05d(0x11b)]>_0x57c638[_0x5cd05d(0x11b)]?0x1:0x0);const _0x3de050=getDate();if(_0x5861db[0x0]){const _0x1002c3=fns[_0x5cd05d(0xf1)](_0x5861db[0x0][_0x5cd05d(0x11b)],_0x5cd05d(0x1a9),new Date()),_0x235e75=fns['parse'](_0x3de050,_0x5cd05d(0x1a9),new Date());if(fns[_0x5cd05d(0x15b)](_0x1002c3,_0x235e75)){_0x55bef5=_0x5861db[0x0][_0x5cd05d(0x144)];const _0x323846=_0x55bef5['find'](_0xee6e4c=>_0xee6e4c[_0x5cd05d(0x1fd)]==_0x5dd1df[_0x5cd05d(0x1fd)]);_0x323846?(_0x323846[_0x5cd05d(0x1eb)]+=_0x5dd1df[_0x5cd05d(0x1eb)],_0x323846[_0x5cd05d(0x1eb)]==0x0&&(_0x55bef5=_0x55bef5['filter'](_0x5e2de1=>{const _0x2ffc7a=_0x5cd05d;return _0x5e2de1[_0x2ffc7a(0x1fd)]!=_0x5dd1df[_0x2ffc7a(0x1fd)];}))):_0x55bef5[_0x5cd05d(0x237)](_0x5dd1df);const _0x572437=_0x4010a9[_0x5cd05d(0x1f9)](_0x5da9da=>_0x5da9da[_0x5cd05d(0x11b)]==_0x3de050);_0x572437['changes']=_0x55bef5;}else _0x4010a9[_0x5cd05d(0x237)]({'date':_0x3de050,'changes':[_0x5dd1df]});}const _0x49fcf1=_0x4010a9[_0x5cd05d(0x1f9)](_0x479829=>_0x479829[_0x5cd05d(0x11b)]==_0x3de050);if(_0x49fcf1){let _0x5c8ce0=!![];_0x49fcf1[_0x5cd05d(0x144)][_0x5cd05d(0x266)](_0x4130c9=>{const _0x48295f=_0x5cd05d;if(_0x4130c9[_0x48295f(0x1eb)]!=0x0)_0x5c8ce0=![];}),_0x5c8ce0&&(_0x4010a9=_0x4010a9[_0x5cd05d(0x205)](_0x40f63e=>{const _0xcf2a5=_0x5cd05d;return _0x40f63e[_0xcf2a5(0x11b)]!=_0x3de050;}));}let _0x236830=dbConfig[_0x5cd05d(0x243)](_0x5cd05d(0x1b5))['find']({'botID':botID})['value']();_0x236830&&(dbConfig['get'](_0x5cd05d(0x1b5))[_0x5cd05d(0x1f9)]({'botID':botID})['assign']({'liquidity':_0x4010a9})[_0x5cd05d(0x234)](),config['liquidity']=_0x4010a9);logHistory('success',_0x5cd05d(0x104)+Math[_0x5cd05d(0x17a)](_0x5dd1df[_0x5cd05d(0x1eb)])+'\x20'+_0x5dd1df[_0x5cd05d(0x1fd)]+'\x20'+(_0x5dd1df[_0x5cd05d(0x1eb)]>0x0?_0x5cd05d(0x24c):_0x5cd05d(0xfd))+_0x5cd05d(0x203)),proxyEmit(_0x5cd05d(0x1e6),emittedConfiguration());const _0x11cf50=getNormalizedPerformance();emitPerformance(_0x11cf50),getStartingBalances(_0x11cf50),logger['debug'](_0x5cd05d(0xea));}else config['autoliquidity']=='switch-manual'&&(config[_0x5cd05d(0xfa)]?(await storeHeadless({'headless':![]}),logHistory(_0x5cd05d(0x20b),'Portfolio\x20change\x20detected:\x20'+Math[_0x5cd05d(0x17a)](_0x5dd1df[_0x5cd05d(0x1eb)])+'\x20'+_0x5dd1df[_0x5cd05d(0x1fd)]+'\x20'+(_0x5dd1df[_0x5cd05d(0x1eb)]>0x0?_0x5cd05d(0x24c):_0x5cd05d(0xfd))+_0x5cd05d(0xe1))):logger[_0x5cd05d(0x1cc)]('Portfolio\x20change\x20detected:\x20'+Math[_0x5cd05d(0x17a)](_0x5dd1df[_0x5cd05d(0x1eb)])+'\x20'+_0x5dd1df[_0x5cd05d(0x1fd)]+'\x20'+(_0x5dd1df[_0x5cd05d(0x1eb)]>0x0?'added':_0x5cd05d(0xfd))+_0x5cd05d(0x207)));}else logger[_0x5cd05d(0x1cc)](_0x5cd05d(0x110)+Math[_0x5cd05d(0x17a)](_0x5dd1df[_0x5cd05d(0x1eb)])+'\x20'+_0x5dd1df['coin']+'\x20'+(_0x5dd1df[_0x5cd05d(0x1eb)]>0x0?'added':'removed'));}else logger['debug'](_0x5cd05d(0x104)+Math[_0x5cd05d(0x17a)](_0x5dd1df['number'])+'\x20'+_0x5dd1df[_0x5cd05d(0x1fd)]+'\x20'+(_0x5dd1df[_0x5cd05d(0x1eb)]>0x0?'added':_0x5cd05d(0xfd))+'\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled');}currentCoins=_0x38981d,currentCoinsAll=_0x1ad467;}}catch(_0x402cd5){if(!exchangeStopped)await handleError(_0x402cd5,_0x5cd05d(0x1bd));}transactionDetectionOngoing=![];}async function watchTransactions(){await sleep(0x14*0x3e8);while(!![]){!botPaused&&!blockTransactionDetection&&coinsLoaded?(detectLiquidityChange(),await sleep(watchTransactionsInterval)):await sleep(0x3e8);}}async function loadSymbols(){const _0x3e5276=_0x28f3c2;try{markets=await exchange[_0x3e5276(0x10e)](!![]),allSymbols=[],Object['entries'](markets)[_0x3e5276(0x266)](_0x371c21=>{const _0x2c92ee=_0x3e5276;_0x371c21[0x1][_0x2c92ee(0x281)]&&_0x371c21[0x1]['spot']&&allSymbols['push'](_0x371c21[0x0]);});}catch(_0x55e6f9){markets?logger[_0x3e5276(0x1cc)](_0x3e5276(0x150)+_0x55e6f9[_0x3e5276(0x24f)]()):(loading[_0x3e5276(0x23c)]=!![],emitLoadingProgress(),_0x55e6f9[_0x3e5276(0x24f)]()['toLowerCase']()[_0x3e5276(0x26f)](_0x3e5276(0x14c))||_0x55e6f9[_0x3e5276(0x24f)]()[_0x3e5276(0x28b)]()[_0x3e5276(0x26f)]('request-time')?logHistory(_0x3e5276(0x179),_0x3e5276(0xf7)):handleErrorNoStop(_0x55e6f9,_0x3e5276(0x14b),!![]),logHistory(_0x3e5276(0x179),'Failed\x20to\x20load\x20market\x20data\x20-\x20bot\x20not\x20started'),logHistory(_0x3e5276(0x179),_0x3e5276(0x29c)+loadCoinsRetryInterval/0xea60+'\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again'),logger[_0x3e5276(0x1cc)]('Error\x20details:',_0x55e6f9),botPaused=!![],await sleep(loadCoinsRetryInterval),restartBot());}}function validateSymbols(_0xe96b86){let _0xde01cf=[];return _0xe96b86['forEach'](_0x4cd9f0=>{const _0x445a70=_0x4189;!allSymbols[_0x445a70(0x26f)](_0x4cd9f0)?logHistory(_0x445a70(0x179),'Invalid\x20symbol:\x20'+_0x4cd9f0+_0x445a70(0x24d)):_0xde01cf['push'](_0x4cd9f0);}),_0xde01cf;}async function initclient(){const _0x43b914=_0x28f3c2;proxyEmit('configuration',emittedConfiguration()),proxyEmit(_0x43b914(0x18a),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x43b914(0x1e2),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x303c6a=getNormalizedPerformance();emitPerformance(_0x303c6a),getStartingBalances(_0x303c6a);}async function toggleBotMode(){const _0x965355=_0x28f3c2;let _0x3b8cac=dbConfig[_0x965355(0x243)](_0x965355(0x1b5))[_0x965355(0x1f9)]({'botID':botID})[_0x965355(0x211)]();if(_0x3b8cac){const _0x3aea55=!_0x3b8cac[_0x965355(0xfa)];dbConfig['get'](_0x965355(0x1b5))['find']({'botID':botID})[_0x965355(0x26a)]({'headless':_0x3aea55})[_0x965355(0x234)](),config[_0x965355(0xfa)]=_0x3aea55,proxyEmit(_0x965355(0x1e6),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x3d9be0=_0x28f3c2;process[_0x3d9be0(0x21d)]({'updatebotmanager':!![]},_0x294b96=>{}),logger['debug']('Headless:\x20'+config['headless']);}async function loadCoins(_0x38d75e){const _0xaf2d13=_0x28f3c2;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x218b7b,_0x1eebc0=0x0,_0x7e37dd=0x0;_0x38d75e[_0xaf2d13(0x266)](_0x4f0964=>{const _0x5ae6ac=_0xaf2d13;loading[_0x5ae6ac(0x27c)]['push'](_0x4f0964);}),loadingCanceled=![];let _0x5d4d55=![];while(_0x218b7b!=_0x38d75e[_0xaf2d13(0x1d5)]+maxLoadingProgress){_0x218b7b=loadingProgress,_0x38d75e[_0xaf2d13(0x266)](_0x2aad66=>{const _0x51d4e3=_0xaf2d13;if(gTicker[noslash(_0x2aad66)]){loading[_0x51d4e3(0x27c)]=loading[_0x51d4e3(0x27c)][_0x51d4e3(0x205)](_0x373962=>_0x373962!=_0x2aad66);if(!watchedSymbols[_0x51d4e3(0x26f)](_0x2aad66))watchedSymbols[_0x51d4e3(0x237)](_0x2aad66);_0x218b7b++;}}),loading[_0xaf2d13(0x22e)]=Math[_0xaf2d13(0x15f)](_0x218b7b/(_0x38d75e['length']+maxLoadingProgress)*0x64);loading['progress']!=0x64&&(_0x7e37dd>0x1e*0x5&&(loading[_0xaf2d13(0x25d)]=!![],emitLoadingProgress()),_0x7e37dd>0x78*0x5&&!_0x5d4d55&&(_0x5d4d55=!![],logHistory(_0xaf2d13(0x179),_0xaf2d13(0xe8)+loading[_0xaf2d13(0x27c)]['join'](',\x20')+'\x20-\x20bot\x20not\x20started'),logHistory(_0xaf2d13(0x179),_0xaf2d13(0x29c)+loadCoinsRetryInterval/0xea60+_0xaf2d13(0x156)),loadingCanceled=!![],await sleep(loadCoinsRetryInterval),restartBot()));if(loadingCanceled){loading[_0xaf2d13(0x23c)]=!![],emitLoadingProgress();break;}else _0x1eebc0!=loading[_0xaf2d13(0x22e)]&&(_0x1eebc0=loading[_0xaf2d13(0x22e)],emitLoadingProgress()),_0x7e37dd++,await sleep(0xc8);}_0x218b7b==_0x38d75e[_0xaf2d13(0x1d5)]+maxLoadingProgress&&(coinsLoaded=!![],process[_0xaf2d13(0x21d)]({'status':'enabled','live':_0xaf2d13(0x175)},_0x318bc7=>{}),_0x5d4d55&&logHistory(_0xaf2d13(0x20b),_0xaf2d13(0x238)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x1485d9=_0x28f3c2;proxyEmit(_0x1485d9(0x1e6),{...emittedConfiguration(),'configstate':_0x1485d9(0x29a)});}function emitLoadingProgress(){const _0x5da20d=_0x28f3c2;proxyEmit(_0x5da20d(0x20e),loading);}async function getFiat(){const _0x11060e=_0x28f3c2;let _0x26993e=gTicker[stablecoins[_0x11060e(0x182)]['coin']],_0x123e89=gTicker[stablecoins[_0x11060e(0x172)][_0x11060e(0x1fd)]];return{'eur':Number(_0x26993e),'usd':Number(_0x123e89)};}function capitalize(_0x17e2aa){const _0x228762=_0x28f3c2;return _0x17e2aa[_0x228762(0x1fa)](0x0,0x1)['toUpperCase']()+_0x17e2aa[_0x228762(0x1fa)](0x1);}function supportedExchanges(){const _0x4ad3a9=_0x28f3c2,_0x1213be=['ws',_0x4ad3a9(0x11f),'fetchTicker',_0x4ad3a9(0x187),_0x4ad3a9(0x1af),_0x4ad3a9(0x1b4),'createOrder',_0x4ad3a9(0x169),_0x4ad3a9(0x1ee)];let _0x30f390=[],_0x39e884=[],_0x2915b2=ccxt[_0x4ad3a9(0x141)][_0x4ad3a9(0x18a)];_0x2915b2[_0x4ad3a9(0x266)](_0xe3c3d5=>{const _0x29bbe2=_0x4ad3a9;try{const _0x29aba5=new ccxt[(_0x29bbe2(0x141))][_0xe3c3d5]();_0x39e884[_0x29bbe2(0x237)](_0x29aba5);}catch(_0x52db02){}}),_0x39e884[_0x4ad3a9(0x266)](_0x281e7d=>{const _0x381624=_0x4ad3a9;let _0x286794=0x0;_0x1213be[_0x381624(0x266)](_0x2b1527=>{const _0x3df7e4=_0x381624;_0x2b1527 in _0x281e7d['has']&&_0x281e7d[_0x3df7e4(0x27b)][_0x2b1527]&&_0x286794++;}),_0x286794==_0x1213be[_0x381624(0x1d5)]&&(!excludedExchanges['includes'](_0x281e7d['id'])&&_0x30f390[_0x381624(0x237)](capitalize(_0x281e7d['id'])));});let _0x1d973d=[];return _0x2915b2['forEach'](_0x20e0cb=>{const _0x2f7542=_0x4ad3a9;_0x20e0cb=capitalize(_0x20e0cb);if(!_0x30f390[_0x2f7542(0x26f)](_0x20e0cb))_0x1d973d[_0x2f7542(0x237)](_0x20e0cb);}),_0x30f390;}function setStartDatePerformance(){const _0x187802=_0x28f3c2;if(config&&config[_0x187802(0x12e)][0x0]['changes'][_0x187802(0x1d5)]!=0x0){const _0xf173e7=config[_0x187802(0x12e)][0x0][_0x187802(0x144)];dbPerformance[_0x187802(0x243)](_0x187802(0x253))['find']({'date':config['startdate']})[_0x187802(0x26a)]({'coins':_0xf173e7})[_0x187802(0x234)]();}}function calculatePnL(_0x5119b1,_0x82456d,_0x325232,_0x2b9ac1,_0x523543,_0x3d3550){const _0x1d3130=_0x28f3c2;!_0x5119b1[_0x1d3130(0x26f)]('/'+config[_0x1d3130(0x29e)])&&(_0x325232=_0x325232==_0x1d3130(0x29f)?_0x1d3130(0x1fe):'buy');!_0x3d3550[_0x82456d]&&(_0x3d3550[_0x82456d]={'number':0x0,'sells':0x0,'buys':0x0,'breakeven':0x0,'realizedPnL':0x0});let _0x2a275d=0x0,_0x1e5dbe,_0x44584d;if(_0x325232==_0x1d3130(0x29f))_0x44584d=_0x3d3550[_0x82456d][_0x1d3130(0x1eb)]*_0x3d3550[_0x82456d]['breakeven']+_0x523543*_0x2b9ac1,_0x3d3550[_0x82456d][_0x1d3130(0x1eb)]+=_0x2b9ac1,_0x3d3550[_0x82456d]['breakeven']=_0x3d3550[_0x82456d]['number']!=0x0?_0x44584d/_0x3d3550[_0x82456d][_0x1d3130(0x1eb)]:0x0,_0x3d3550[_0x82456d][_0x1d3130(0x272)]++;else _0x325232==_0x1d3130(0x1fe)&&(_0x1e5dbe=Math['min'](_0x3d3550[_0x82456d][_0x1d3130(0x1eb)],_0x2b9ac1),_0x2a275d=(_0x523543-_0x3d3550[_0x82456d]['breakeven'])*_0x1e5dbe,_0x44584d=Math[_0x1d3130(0x153)](_0x3d3550[_0x82456d][_0x1d3130(0x1eb)]*_0x3d3550[_0x82456d][_0x1d3130(0x1dd)]-_0x1e5dbe*_0x3d3550[_0x82456d][_0x1d3130(0x1dd)],0x0),_0x3d3550[_0x82456d]['number']-=_0x1e5dbe,_0x3d3550[_0x82456d][_0x1d3130(0x1dd)]=_0x3d3550[_0x82456d][_0x1d3130(0x1eb)]!=0x0?_0x44584d/_0x3d3550[_0x82456d][_0x1d3130(0x1eb)]:0x0,_0x3d3550[_0x82456d][_0x1d3130(0x23d)]+=_0x2a275d,_0x3d3550[_0x82456d]['sells']++);return _0x2a275d;}async function generatePnL(){const _0x575fa8=_0x28f3c2;pnlGenerationNeeded=![],logger[_0x575fa8(0x1cc)](_0x575fa8(0x1ab));const _0x4900e9=dbLogs['get'](_0x575fa8(0x196))[_0x575fa8(0x211)]();let _0x20fa51={},_0x3f2a19=0x0,_0x392ff1=0x0,_0x4a388e=config[_0x575fa8(0x109)];const _0x2e36c9=fns[_0x575fa8(0xf1)](_0x4a388e,_0x575fa8(0x1a9),new Date()),_0x354caf=new Date();let _0x20ef6b=0x0;for(let _0x2e35d3=_0x2e36c9;!fns[_0x575fa8(0x245)](_0x354caf,_0x2e35d3);_0x2e35d3=fns[_0x575fa8(0x152)](_0x2e35d3,0x1)){const _0x3e3c7d=fns[_0x575fa8(0x195)](_0x2e35d3,_0x575fa8(0x1a9));while(_0x3f2a19<_0x4900e9['length']){const _0x3f595a=new Date(_0x4900e9[_0x3f2a19][_0x575fa8(0x215)]);if(fns['isBefore'](_0x3f595a,_0x2e35d3))_0x3f2a19++;else{if(_0x4900e9[_0x3f2a19][_0x575fa8(0x215)]['includes'](_0x3e3c7d)){const _0x43316a=_0x4900e9[_0x3f2a19];if(_0x43316a[_0x575fa8(0x139)]===_0x575fa8(0x166)&&(_0x43316a['event'][_0x575fa8(0x26f)]('Order\x20filled')||_0x43316a['event'][_0x575fa8(0x26f)](_0x575fa8(0x22f)))){const _0x448698=_0x43316a[_0x575fa8(0x1a2)][_0x575fa8(0x118)](/([A-Z]+\/[A-Z]+) (sell|buy) #([\d.]+) @([\d.]+)/);if(_0x448698){const [,_0xdb98be,_0x250faa,_0x39a1ff,_0xf48f24]=_0x448698,_0x4d338b=_0xdb98be['includes']('/'+config[_0x575fa8(0x29e)])?_0xdb98be[_0x575fa8(0x140)]('/')[0x0]:_0xdb98be['split']('/')[0x1],_0x35ca72=calculatePnL(_0xdb98be,_0x4d338b,_0x250faa,parseFloat(_0x39a1ff),parseFloat(_0xf48f24),_0x20fa51);_0x392ff1+=_0x35ca72;}}_0x3f2a19++;}else break;}}dbPerformance['get'](_0x575fa8(0x253))[_0x575fa8(0x1f9)]({'date':_0x3e3c7d})['assign']({'pnl':_0x392ff1})[_0x575fa8(0x234)]();}dbCoinResults[_0x575fa8(0x106)](_0x575fa8(0x1f5),_0x20fa51)[_0x575fa8(0x234)](),logger[_0x575fa8(0x1cc)](_0x575fa8(0x1bf));const _0xeeb717=getNormalizedPerformance();emitPerformance(_0xeeb717);}async function updatePnL(_0x4f410c){const _0x54bdf9=_0x28f3c2,{symbol:_0x406071,coin:_0x42cdf8,amount:_0x2a84d7,price:_0xcae2b2,side:_0x2ff872,reverse:_0x53deb8}=_0x4f410c;let _0xef75c8=dbCoinResults['get'](_0x54bdf9(0x1f5))[_0x54bdf9(0x211)]();const _0x311b33=calculatePnL(_0x406071,_0x42cdf8,_0x2ff872,_0x2a84d7,_0xcae2b2,_0xef75c8);dbCoinResults['set'](_0x54bdf9(0x1f5),_0xef75c8)[_0x54bdf9(0x234)]();const _0x413b2e=getTimeStamp()['split']('\x20')[0x0];let _0x3cb747=dbPerformance[_0x54bdf9(0x243)](_0x54bdf9(0x253))['find']({'date':_0x413b2e})['value']();_0x3cb747?(_0x3cb747[_0x54bdf9(0x279)]+=_0x311b33,dbPerformance['get'](_0x54bdf9(0x253))[_0x54bdf9(0x1f9)]({'date':_0x413b2e})['assign'](_0x3cb747)[_0x54bdf9(0x234)]()):await storePerformance();const _0x5124b1=getNormalizedPerformance();emitPerformance(_0x5124b1);}async function validate24hChanges(){const _0xf7a017=_0x28f3c2;for(const _0x597022 of currentCoins){if(_0x597022[_0xf7a017(0x1fd)]!=config[_0xf7a017(0x29e)]){let _0x3f55f0;_0x597022[_0xf7a017(0x23f)]?_0x3f55f0=formatResult((0x1/(gChange[_0x597022[_0xf7a017(0x13d)]]/0x64+0x1)-0x1)*0x64,0x3):_0x3f55f0=gChange[_0x597022['symbol']],_0x3f55f0<config[_0xf7a017(0xef)]&&(logHistory(_0xf7a017(0x179),_0x597022[_0xf7a017(0x1fd)]+_0xf7a017(0x1f8)+_0x3f55f0+'%'),logHistory(_0xf7a017(0x179),_0xf7a017(0x19b)),logHistory(_0xf7a017(0x179),_0xf7a017(0x129)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x257190,_0x227fc0){const _0x59badd=_0x28f3c2;if(!_0x257190)return!![];const _0x5e76a3=_0x227fc0[_0x59badd(0x140)]('.'),_0x3ff7b8=_0x257190[_0x59badd(0x140)]('.');for(var _0x456706=0x0;_0x456706<_0x3ff7b8[_0x59badd(0x1d5)];_0x456706++){const _0xe8c930=~~_0x3ff7b8[_0x456706],_0x866343=~~_0x5e76a3[_0x456706];if(_0xe8c930<_0x866343)return!![];if(_0xe8c930>_0x866343)return![];}return![];}async function oneTimeMigration(){const _0x417b52=_0x28f3c2;let _0x76d21d=dbLogs[_0x417b52(0x243)]('version')['value']();if(isOlderVersion(_0x76d21d,_0x417b52(0x263))){let _0x3a49f6=[];const _0x3a896d=dbLogs[_0x417b52(0x243)](_0x417b52(0x196))[_0x417b52(0x211)]();_0x3a896d[_0x417b52(0x266)](_0x544014=>{const _0x17e21f=_0x417b52;_0x3a49f6[_0x17e21f(0x237)]({'time':_0x544014[_0x17e21f(0x215)],'type':_0x544014[_0x17e21f(0x139)],'event':_0x544014[_0x17e21f(0x1a2)]});}),dbLogs[_0x417b52(0x243)]('logs')[_0x417b52(0x26a)](_0x3a49f6)[_0x417b52(0x234)]();}let _0x44fb39=dbConfig[_0x417b52(0x243)](_0x417b52(0x20c))[_0x417b52(0x211)]();if(isOlderVersion(_0x44fb39,'2.3.5')){let _0x3cf891=dbConfig[_0x417b52(0x243)](_0x417b52(0x1b5))[_0x417b52(0x1f9)]({'botID':botID})[_0x417b52(0x211)]();if(_0x3cf891){let _0x89b697=[];_0x3cf891[_0x417b52(0x18d)][_0x417b52(0x266)](_0x53ac42=>{const _0x5549fc=_0x417b52;_0x89b697['push']({'coin':_0x53ac42[_0x5549fc(0x1fd)],'number':_0x53ac42[_0x5549fc(0x247)],'price':_0x53ac42['startprice']}),delete _0x53ac42[_0x5549fc(0x247)],delete _0x53ac42[_0x5549fc(0x2a3)];});if(_0x89b697[_0x417b52(0x1d5)]!==0x0)fs['writeFile'](configbackuppath+(_0x417b52(0x2a0)+botID+_0x417b52(0x1b8)),JSON[_0x417b52(0x204)](_0x89b697,null,0x4),function(_0x359d8d){if(_0x359d8d){}});const _0x22f222=(_0x28ad3b,_0x24af85)=>{let _0x884a87=[];_0x24af85['forEach'](_0x8d71df=>{const _0x571a83=_0x4189,_0x1d23f9=_0x28ad3b[_0x571a83(0x1f9)](_0x4a3b9e=>_0x4a3b9e[_0x571a83(0x1fd)]==_0x8d71df['coin']);if(!_0x1d23f9)_0x884a87[_0x571a83(0x237)](_0x8d71df);});let _0x42338c=[];return _0x28ad3b['forEach'](_0xe50a4c=>{const _0x3f87dc=_0x4189,_0x1b6e08=_0x24af85[_0x3f87dc(0x1f9)](_0x335d55=>_0x335d55[_0x3f87dc(0x1fd)]==_0xe50a4c[_0x3f87dc(0x1fd)]);if(!_0x1b6e08||_0x1b6e08[_0x3f87dc(0x1eb)]==0x0&&_0xe50a4c[_0x3f87dc(0x1eb)]!=0x0)_0x42338c[_0x3f87dc(0x237)](_0xe50a4c);}),{'missingDay1':_0x884a87,'notInDay2':_0x42338c};},_0x32e275=dbPerformance[_0x417b52(0x243)](_0x417b52(0x253))['cloneDeep']()['value']();if(_0x32e275['length']>0x1){const {missingDay1:_0x47d2ef,notInDay2:_0x59412c}=_0x22f222(_0x89b697,_0x32e275[0x1][_0x417b52(0x1f5)]);_0x89b697=[..._0x89b697,..._0x47d2ef],_0x59412c['forEach'](_0x40edb6=>{const _0x17c61e=_0x417b52;let _0x67e0ca=_0x89b697[_0x17c61e(0x1ca)](_0x122a84=>_0x122a84[_0x17c61e(0x1fd)]==_0x40edb6[_0x17c61e(0x1fd)]);_0x67e0ca!=-0x1&&_0x89b697[_0x17c61e(0x163)](_0x67e0ca,0x1);});}_0x89b697[_0x417b52(0x21a)]((_0x337a80,_0x353b6d)=>_0x337a80[_0x417b52(0x1fd)]>_0x353b6d[_0x417b52(0x1fd)]?0x1:_0x353b6d['coin']>_0x337a80[_0x417b52(0x1fd)]?-0x1:0x0);let _0x190886=[{'date':_0x3cf891[_0x417b52(0x109)],'changes':_0x89b697}];_0x32e275['length']>0x2&&_0x32e275[_0x417b52(0x266)]((_0x2c925d,_0x1d0dec)=>{const _0x19ded7=_0x417b52;if(_0x1d0dec>0x0&&_0x1d0dec<_0x32e275['length']-0x1){const {missingDay1:_0x256fd7,notInDay2:_0x12b484}=_0x22f222(_0x32e275[_0x1d0dec][_0x19ded7(0x1f5)],_0x32e275[_0x1d0dec+0x1][_0x19ded7(0x1f5)]);_0x89b697=[],(_0x256fd7[_0x19ded7(0x1d5)]!=0x0||_0x12b484[_0x19ded7(0x1d5)]!=0x0)&&(_0x256fd7[_0x19ded7(0x1d5)]!=0x0&&_0x89b697[_0x19ded7(0x237)](..._0x256fd7),_0x12b484[_0x19ded7(0x1d5)]!=0x0&&(_0x12b484['forEach'](_0x200ea6=>{const _0x1345d8=_0x19ded7;_0x200ea6['number']=-_0x200ea6[_0x1345d8(0x1eb)];}),_0x89b697['push'](..._0x12b484)),_0x89b697[_0x19ded7(0x21a)]((_0x585658,_0x3217d7)=>_0x585658[_0x19ded7(0x1fd)]>_0x3217d7[_0x19ded7(0x1fd)]?0x1:_0x3217d7[_0x19ded7(0x1fd)]>_0x585658[_0x19ded7(0x1fd)]?-0x1:0x0),_0x190886['push']({'date':_0x32e275[_0x1d0dec+0x1]['date'],'changes':_0x89b697}));}}),dbConfig[_0x417b52(0x243)](_0x417b52(0x1b5))[_0x417b52(0x1f9)]({'botID':botID})[_0x417b52(0x26a)]({..._0x3cf891,'liquidity':_0x190886})[_0x417b52(0x234)]();}}if(isOlderVersion(_0x44fb39,_0x417b52(0x239))){let _0x1384c6=dbConfig['get'](_0x417b52(0x1b5))[_0x417b52(0x1f9)]({'botID':botID})[_0x417b52(0x211)]();if(_0x1384c6){const _0x22bb4f=_0x1384c6['exchange'],_0x7233f=_0x22bb4f?capitalize(_0x22bb4f):'Binance';dbConfig[_0x417b52(0x243)]('bot')[_0x417b52(0x1f9)]({'botID':botID})[_0x417b52(0x26a)]({'exchange':_0x7233f})[_0x417b52(0x234)]();}}if(isOlderVersion(_0x44fb39,_0x417b52(0xeb))){let _0x22153e=dbConfig[_0x417b52(0x243)](_0x417b52(0x1b5))[_0x417b52(0x1f9)]({'botID':botID})[_0x417b52(0x211)]();if(_0x22153e){const _0x52e283=_0x22153e[_0x417b52(0x12c)],_0x56cd70=_0x52e283?'marketcap':![];dbConfig[_0x417b52(0x243)]('bot')['find']({'botID':botID})[_0x417b52(0x26a)]({'marketcapEnabled':_0x56cd70})[_0x417b52(0x234)]();}}if(isOlderVersion(_0x44fb39,_0x417b52(0x16f))){let _0x486217=dbConfig[_0x417b52(0x243)](_0x417b52(0x1b5))[_0x417b52(0x1f9)]({'botID':botID})[_0x417b52(0x211)]();if(_0x486217){const _0xed8af4=_0x486217['autoliquidity'],_0x5b4921=_0xed8af4?_0x417b52(0x132):![];dbConfig[_0x417b52(0x243)](_0x417b52(0x1b5))[_0x417b52(0x1f9)]({'botID':botID})[_0x417b52(0x26a)]({'autoliquidity':_0x5b4921})[_0x417b52(0x234)]();}}let _0x1ce516=dbPerformance[_0x417b52(0x243)](_0x417b52(0x20c))['value']();isOlderVersion(_0x1ce516,_0x417b52(0x263))&&setStartDatePerformance();let _0xad486=dbCoinResults['get'](_0x417b52(0x20c))[_0x417b52(0x211)]();if(isOlderVersion(_0xad486,_0x417b52(0x2a1))){let _0x399943=dbCoinResults[_0x417b52(0x243)](_0x417b52(0x1f5))[_0x417b52(0x211)]();if(_0x399943[_0x417b52(0x1d5)]!=0x0)pnlGenerationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x14a149=_0x28f3c2;dbConfig[_0x14a149(0x106)](_0x14a149(0x20c),serverversion)[_0x14a149(0x234)](),dbPerformance[_0x14a149(0x106)](_0x14a149(0x20c),serverversion)['write'](),dbLogs[_0x14a149(0x106)](_0x14a149(0x20c),serverversion)[_0x14a149(0x234)](),dbCoinResults[_0x14a149(0x106)](_0x14a149(0x20c),serverversion)[_0x14a149(0x234)]();}function getConfiguration(_0x5579c5){const _0x2e8a6c=_0x28f3c2;let _0x1f783b=dbConfig['get'](_0x2e8a6c(0x1b5))[_0x2e8a6c(0x1f9)]({'botID':_0x5579c5})[_0x2e8a6c(0x211)]();if(_0x1f783b){let _0xda53e9=![];typeof _0x1f783b['threshold']==_0x2e8a6c(0xf9)&&(_0x1f783b={..._0x1f783b,'threshold':Number(_0x1f783b[_0x2e8a6c(0x264)])},_0xda53e9=!![]),_0x1f783b[_0x2e8a6c(0xef)]==undefined&&(_0x1f783b={..._0x1f783b,'change24h':-0x14},_0xda53e9=!![]),_0x1f783b[_0x2e8a6c(0x1db)]==undefined&&(_0x1f783b={..._0x1f783b,'fiat':'USD'},_0xda53e9=!![]),_0x1f783b[_0x2e8a6c(0x16e)]==undefined&&(_0x1f783b={..._0x1f783b,'onepagemode':settings['onepagemode']},_0xda53e9=!![]),_0x1f783b[_0x2e8a6c(0x218)]==undefined&&(_0x1f783b={..._0x1f783b,'colorscheme':_0x2e8a6c(0x248)},_0xda53e9=!![]),_0x1f783b[_0x2e8a6c(0x194)]==undefined&&(_0x1f783b={..._0x1f783b,'autoliquidity':_0x2e8a6c(0x132)},_0xda53e9=!![]),_0x1f783b[_0x2e8a6c(0x18f)]==undefined&&(_0x1f783b={..._0x1f783b,'marketcapApi':settings[_0x2e8a6c(0x18f)]?!![]:![]},_0xda53e9=!![]),_0x1f783b['marketcapEnabled']==undefined&&(_0x1f783b={..._0x1f783b,'marketcapEnabled':![]},_0xda53e9=!![]),_0xda53e9&&(_0x1f783b={'botID':_0x1f783b[_0x2e8a6c(0x25e)],'exchange':_0x1f783b[_0x2e8a6c(0x292)],'apiKey':_0x1f783b[_0x2e8a6c(0x282)],'apiSecret':_0x1f783b['apiSecret'],'apiPassword':_0x1f783b[_0x2e8a6c(0x268)],'basecoin':_0x1f783b[_0x2e8a6c(0x29e)],'botname':_0x1f783b[_0x2e8a6c(0x1c7)],'showname':_0x1f783b[_0x2e8a6c(0x24a)],'threshold':_0x1f783b['threshold'],'ordertype':_0x1f783b[_0x2e8a6c(0x270)],'timeout':_0x1f783b[_0x2e8a6c(0x25d)],'fiat':_0x1f783b[_0x2e8a6c(0x1db)],'startdate':_0x1f783b[_0x2e8a6c(0x109)],'recreate':_0x1f783b[_0x2e8a6c(0x180)],'timeshift':_0x1f783b[_0x2e8a6c(0x16a)],'onepagemode':_0x1f783b[_0x2e8a6c(0x16e)],'headless':_0x1f783b[_0x2e8a6c(0xfa)],'cooldown':_0x1f783b['cooldown'],'change24h':_0x1f783b['change24h'],'emojibuy':_0x1f783b[_0x2e8a6c(0x177)],'emojisell':_0x1f783b['emojisell'],'colorscheme':_0x1f783b[_0x2e8a6c(0x218)],'marketcapApi':_0x1f783b[_0x2e8a6c(0x18f)],'marketcapEnabled':_0x1f783b[_0x2e8a6c(0x12c)],'portfolio':_0x1f783b[_0x2e8a6c(0x18d)],'autoliquidity':_0x1f783b[_0x2e8a6c(0x194)],'liquidity':_0x1f783b[_0x2e8a6c(0x12e)],'openOrders':_0x1f783b[_0x2e8a6c(0x10a)]},dbConfig[_0x2e8a6c(0x243)](_0x2e8a6c(0x1b5))['remove']()['write'](),dbConfig[_0x2e8a6c(0x243)]('bot')[_0x2e8a6c(0x237)](_0x1f783b)[_0x2e8a6c(0x234)]());}else _0x1f783b={'botID':_0x5579c5,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':'Bot\x20'+_0x5579c5,'showname':![],'threshold':0x3,'ordertype':_0x2e8a6c(0x1d0),'timeout':0x14,'fiat':_0x2e8a6c(0x1e4),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x2e8a6c(0x16a)],'onepagemode':settings['onepagemode'],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x2e8a6c(0x248),'marketcapApi':settings['marketcapApi']?!![]:![],'marketcapEnabled':![],'portfolio':[],'autoliquidity':'update-liquidity','liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x1f783b;}function emittedConfiguration(){const _0x32e8d6=_0x28f3c2;let _0x49fc3f;if(config[_0x32e8d6(0x282)]=='')_0x49fc3f={...config,'configstate':'initial'};else config[_0x32e8d6(0x282)]=='***'?_0x49fc3f={...config,'configstate':_0x32e8d6(0x14f)}:(_0x49fc3f={...config,'apiKey':'************','apiSecret':_0x32e8d6(0x225)},config[_0x32e8d6(0x268)]&&(_0x49fc3f[_0x32e8d6(0x268)]=_0x32e8d6(0x225)));return _0x49fc3f['enableFiatToggle']=enableFiatToggle,_0x49fc3f;}function getSettings(){const _0x2141fd=_0x28f3c2;return dbSettings[_0x2141fd(0x243)]('settings')[_0x2141fd(0x211)]();}function getSecure(){const _0x4dbff1=_0x28f3c2;return dbSecure['get'](_0x4dbff1(0x287))[_0x4dbff1(0x211)]()||{};}function updateTimeshift(_0x3052f7){const _0x39032f=_0x28f3c2;let _0x1ab05d=dbConfig['get'](_0x39032f(0x1b5))[_0x39032f(0x1f9)]({'botID':botID})['value']();_0x1ab05d&&dbConfig[_0x39032f(0x243)](_0x39032f(0x1b5))[_0x39032f(0x1f9)]({'botID':botID})[_0x39032f(0x26a)]({'timeshift':_0x3052f7})[_0x39032f(0x234)](),config['timeshift']=_0x3052f7,proxyEmit(_0x39032f(0x1e6),emittedConfiguration());}function updateOnepagemode(_0x5c7226){const _0x32c1ba=_0x28f3c2;let _0x4907a2=dbConfig[_0x32c1ba(0x243)]('bot')[_0x32c1ba(0x1f9)]({'botID':botID})[_0x32c1ba(0x211)]();_0x4907a2&&dbConfig[_0x32c1ba(0x243)](_0x32c1ba(0x1b5))['find']({'botID':botID})['assign']({'onepagemode':_0x5c7226})[_0x32c1ba(0x234)](),config['onepagemode']=_0x5c7226,proxyEmit('configuration',emittedConfiguration());}function updateMarketcapApi(_0x42f6e4){const _0x4b61b7=_0x28f3c2,_0x54f227=_0x42f6e4?!![]:![];let _0xb10199=dbConfig['get']('bot')[_0x4b61b7(0x1f9)]({'botID':botID})[_0x4b61b7(0x211)]();_0xb10199&&dbConfig[_0x4b61b7(0x243)]('bot')[_0x4b61b7(0x1f9)]({'botID':botID})[_0x4b61b7(0x26a)]({'marketcapApi':_0x54f227})[_0x4b61b7(0x234)](),config[_0x4b61b7(0x18f)]=_0x54f227,getMarketCap(),proxyEmit('configuration',emittedConfiguration());}async function storeConfiguration(_0x19a248){const _0x51720d=_0x28f3c2;logger[_0x51720d(0x1cc)]('Saving\x20configuration');let _0x2079f3=![];_0x19a248[_0x51720d(0x149)]&&(_0x19a248[_0x51720d(0x149)]=='recovery'&&(_0x2079f3=!![]),delete _0x19a248[_0x51720d(0x149)]);if(pidBalances)clearTimeout(pidBalances);setBlockTransactionDetection(!![]);let _0x26c165=![],_0x5d89cd=![],_0x5d9755=[];_0x19a248[_0x51720d(0x18d)][_0x51720d(0x266)](_0x3bbd7d=>{const _0x338cbf=_0x51720d;if(!_0x3bbd7d[_0x338cbf(0x236)]&&_0x3bbd7d[_0x338cbf(0x1fd)]!=_0x19a248['basecoin'])_0x5d9755[_0x338cbf(0x237)](_0x3bbd7d[_0x338cbf(0x13d)]);}),_0x5d9755[_0x51720d(0x266)](_0x4af776=>{const _0x22e548=_0x51720d,_0x1049cd=currentCoins['find'](_0x4f8d85=>_0x4f8d85[_0x22e548(0x13d)]==_0x4af776);!_0x1049cd&&(_0x26c165=!![]);}),currentCoins[_0x51720d(0x266)](_0x457fc5=>{const _0x290740=_0x51720d;if(_0x457fc5[_0x290740(0x1fd)]!=config[_0x290740(0x29e)]){const _0x4f391c=_0x5d9755[_0x290740(0x1f9)](_0xc545c1=>_0xc545c1==_0x457fc5['symbol']);!_0x4f391c&&(_0x26c165=!![]);}}),_0x19a248[_0x51720d(0x18d)][_0x51720d(0x266)](_0x3ab00b=>{const _0x50c755=_0x51720d,_0xb6e9d2=config[_0x50c755(0x18d)]['find'](_0x138ef9=>_0x138ef9[_0x50c755(0x1fd)]==_0x3ab00b[_0x50c755(0x1fd)]);if(_0xb6e9d2&&_0x3ab00b[_0x50c755(0x161)]!=_0xb6e9d2[_0x50c755(0x161)])_0x5d89cd=!![];});let _0x4e5601=dbConfig[_0x51720d(0x243)](_0x51720d(0x1b5))[_0x51720d(0x1f9)]({'botID':botID})[_0x51720d(0x211)]();_0x19a248={..._0x19a248,'apiKey':decryptRSA(secure[_0x51720d(0x13f)],_0x19a248[_0x51720d(0x282)]),'apiSecret':decryptRSA(secure[_0x51720d(0x13f)],_0x19a248[_0x51720d(0x123)])};_0x19a248['apiPassword']&&(_0x19a248[_0x51720d(0x268)]=decryptRSA(secure['privateKey'],_0x19a248[_0x51720d(0x268)]));let _0x59ad67=![];if(_0x4e5601){_0x19a248['apiKey']==_0x51720d(0x225)?_0x19a248[_0x51720d(0x282)]=config['apiKey']:_0x59ad67=!![];_0x19a248[_0x51720d(0x123)]==_0x51720d(0x225)?_0x19a248[_0x51720d(0x123)]=config[_0x51720d(0x123)]:_0x59ad67=!![];if(_0x19a248[_0x51720d(0x268)]=='************')_0x19a248[_0x51720d(0x268)]=config[_0x51720d(0x268)];else{if(_0x19a248[_0x51720d(0x268)])_0x59ad67=!![];}dbConfig['get'](_0x51720d(0x1b5))[_0x51720d(0x1f9)]({'botID':botID})[_0x51720d(0x26a)](_0x19a248)[_0x51720d(0x234)]();}else dbConfig[_0x51720d(0x243)](_0x51720d(0x1b5))[_0x51720d(0x237)](_0x19a248)[_0x51720d(0x234)](),_0x59ad67=!![],process[_0x51720d(0x21d)]({'status':_0x51720d(0x283),'live':_0x51720d(0x175)},_0x8bde8f=>{});process[_0x51720d(0x21d)]({'botname':_0x19a248[_0x51720d(0x1c7)]},_0x3eeac8=>{}),config={..._0x19a248},updateBotManager(),proxyEmit('configuration-stored'),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x59ad67)await reset(!![]);else _0x26c165||_0x5d89cd?await reset(![]):getBalances();setBlockTransactionDetection(![]);}async function storeHeadless(_0x5c7cda){const _0x49e46f=_0x28f3c2,_0x138195={...config,'headless':_0x5c7cda[_0x49e46f(0xfa)]};let _0x2038a2=dbConfig[_0x49e46f(0x243)](_0x49e46f(0x1b5))[_0x49e46f(0x1f9)]({'botID':botID})[_0x49e46f(0x211)]();_0x2038a2&&dbConfig['get']('bot')[_0x49e46f(0x1f9)]({'botID':botID})['assign'](_0x138195)[_0x49e46f(0x234)](),config={..._0x138195},updateBotManager(),proxyEmit(_0x49e46f(0x1e6),emittedConfiguration());}async function storeFiat(_0x2391fb){const _0x33fa86=_0x28f3c2,_0x4e9f4f={...config,'fiat':_0x2391fb};let _0x30e29f=dbConfig[_0x33fa86(0x243)]('bot')['find']({'botID':botID})[_0x33fa86(0x211)]();_0x30e29f&&dbConfig[_0x33fa86(0x243)](_0x33fa86(0x1b5))['find']({'botID':botID})[_0x33fa86(0x26a)](_0x4e9f4f)[_0x33fa86(0x234)](),config={..._0x4e9f4f},proxyEmit('configuration',emittedConfiguration());}function resetHistory(){const _0x1fc808=_0x28f3c2;logger[_0x1fc808(0x1f3)]('Resetting\x20bot\x20history');try{if(fs[_0x1fc808(0x1bc)](path['join'](configpath,_0x1fc808(0x15a)+botID+_0x1fc808(0x12d))))fs[_0x1fc808(0x21c)](path[_0x1fc808(0xe4)](configpath,_0x1fc808(0x15a)+botID+_0x1fc808(0x12d)));if(fs[_0x1fc808(0x1bc)](path[_0x1fc808(0xe4)](configpath,_0x1fc808(0x15a)+botID+_0x1fc808(0xfb))))fs[_0x1fc808(0x21c)](path['join'](configpath,_0x1fc808(0x15a)+botID+'-performance.json'));if(fs[_0x1fc808(0x1bc)](path[_0x1fc808(0xe4)](configpath,_0x1fc808(0x15a)+botID+_0x1fc808(0x267))))fs[_0x1fc808(0x21c)](path[_0x1fc808(0xe4)](configpath,_0x1fc808(0x15a)+botID+_0x1fc808(0x267)));}catch(_0x1aaca2){if(_0x1aaca2)logger[_0x1fc808(0x1f3)](_0x1fc808(0x17f),_0x1aaca2);}const _0x4bd7b2=getDate();let _0x472048=[];currentCoins[_0x1fc808(0x266)](_0xe44dc7=>{const _0x23e1e9=_0x1fc808;_0x472048[_0x23e1e9(0x237)]({'coin':_0xe44dc7[_0x23e1e9(0x1fd)],'number':_0xe44dc7[_0x23e1e9(0x1eb)],'price':_0xe44dc7[_0x23e1e9(0x10d)]});});let _0x2bfa82=dbConfig[_0x1fc808(0x243)](_0x1fc808(0x1b5))[_0x1fc808(0x1f9)]({'botID':botID})[_0x1fc808(0x211)]();_0x2bfa82&&(dbConfig['get'](_0x1fc808(0x1b5))[_0x1fc808(0x1f9)]({'botID':botID})[_0x1fc808(0x26a)]({'liquidity':[{'date':_0x4bd7b2,'changes':_0x472048}]})[_0x1fc808(0x234)](),config[_0x1fc808(0x12e)]=[]),restartBot(!![]);}function noslash(_0x54c1aa){return _0x54c1aa['replace']('/','');}function updateHighestFee(_0x472176){const _0x11deb3=_0x28f3c2;if(_0x472176['reverse']){let _0x235ab1={'filled':_0x472176[_0x11deb3(0x26d)]*_0x472176['price'],'amount':_0x472176[_0x11deb3(0x26d)]*_0x472176[_0x11deb3(0x1e0)],'side':_0x472176[_0x11deb3(0x1f7)]==_0x11deb3(0x1fe)?_0x11deb3(0x29f):_0x11deb3(0x1fe),'price':0x1/_0x472176[_0x11deb3(0x1e0)]};_0x472176={..._0x472176,..._0x235ab1};}const _0x4cb066=defaultFee*_0x472176[_0x11deb3(0x26d)]*_0x472176[_0x11deb3(0x1e0)];lastFees[_0x11deb3(0x184)][_0x11deb3(0x1d5)]===0x14&&lastFees[_0x11deb3(0x184)][_0x11deb3(0x158)](),lastFees['recent20'][_0x11deb3(0x237)](_0x4cb066),lastFees['highest']=Math[_0x11deb3(0x153)](...lastFees[_0x11deb3(0x184)]);}async function updateNumberCoinsCcxt(_0xb1cd16){const _0x3a6724=_0x28f3c2;logger[_0x3a6724(0x1cc)](_0x3a6724(0x296)+_0xb1cd16[_0x3a6724(0x13d)]+_0x3a6724(0x135)+_0xb1cd16[_0x3a6724(0x1d8)]+_0x3a6724(0x135)+_0xb1cd16[_0x3a6724(0x26d)]+_0x3a6724(0x176)+_0xb1cd16[_0x3a6724(0x1a0)]+_0x3a6724(0x135)+_0xb1cd16['id']);let _0x1be10c=_0xb1cd16[_0x3a6724(0x1d8)],_0x5e8082=![];currentCoins['forEach'](_0x35e8ef=>{_0x35e8ef['symbol']==_0xb1cd16['symbol']&&(_0x5e8082=!![]);});if(!_0x5e8082)return;const _0x2b8e1c=currentCoins['find'](_0xb6d0e5=>_0xb6d0e5[_0x3a6724(0x13d)]==_0xb1cd16[_0x3a6724(0x13d)]),_0x584d1d=_0x2b8e1c[_0x3a6724(0x1fd)],_0xb2982c=_0x54777b=>{const _0x86ac24=_0x3a6724,_0x43d1b3=currentCoins[_0x86ac24(0x1f9)](_0x241aad=>_0x241aad[_0x86ac24(0x13d)]==_0xb1cd16['symbol']);if(_0x43d1b3)_0x43d1b3['orderstatus']=_0x54777b;};let _0x1bfd6c=![];for(const _0x5211f3 of lastOrders){const _0x2cf06f=0x64,_0x26a5f4=0x1388;let _0x152f2f=0x0;while(!_0x5211f3[_0x3a6724(0x1b3)]&&_0x152f2f*_0x2cf06f<_0x26a5f4){_0x152f2f++,await sleep(_0x2cf06f);}if(_0x152f2f>0x0)logger[_0x3a6724(0x1cc)]('Waited\x20'+_0x152f2f*_0x2cf06f/0x3e8+_0x3a6724(0x222));_0x5211f3['orderId']==_0xb1cd16['id']&&(_0x1bfd6c=!![]);}if(_0x1be10c==_0x3a6724(0x209)){_0xb2982c(_0x3a6724(0x209));if(_0xb1cd16[_0x3a6724(0x26d)]>0x0&&_0xb1cd16[_0x3a6724(0x26d)]<_0xb1cd16['amount']){if(_0x1bfd6c){setBlockTransactionDetection(!![]),logger[_0x3a6724(0x1cc)](_0x3a6724(0x1ac)+_0xb1cd16[_0x3a6724(0x26d)]+_0x3a6724(0x1d7)+_0xb1cd16['id']);const _0x3e7878=await getCoins(balanceUpdateDelay,undefined,undefined,_0x584d1d);[currentCoins,currentCoinsAll]=_0x3e7878,setBlockTransactionDetection(![]);}else logger[_0x3a6724(0x1cc)](_0x3a6724(0x1ac)+_0xb1cd16['filled']+')\x20unknown\x20order:\x20'+_0xb1cd16['id']),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay);}}else{if(_0x1be10c==_0x3a6724(0x28d)){_0xb2982c('canceled'),lastOrders=lastOrders['filter'](_0x4b9ca1=>_0x4b9ca1[_0x3a6724(0x13d)]!=_0xb1cd16[_0x3a6724(0x13d)]);const _0x3a9e46=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x3a9e46,setBlockTransactionDetection(![]),await getOpenOrders(),handleOpenOrders();}else{if(_0x1be10c=='closed'){if(lastOrders)for(const _0x230673 of lastOrders){if(_0x230673[_0x3a6724(0x1b3)]==_0xb1cd16['id']){logger['debug'](_0x3a6724(0x115)+_0xb1cd16['id']),_0x1bfd6c=!![];if(_0x230673[_0x3a6724(0x26d)]==0x0){setBlockTransactionDetection(!![]),logger[_0x3a6724(0x1cc)](_0x3a6724(0x1da)+_0xb1cd16['id']);if(_0xb1cd16['average'])_0x230673['price']=_0xb1cd16['average'];else{if(_0xb1cd16[_0x3a6724(0x1e0)])_0x230673['price']=_0xb1cd16[_0x3a6724(0x1e0)];else{}}_0x230673['filled']=_0xb1cd16['filled'],updateHighestFee(_0x230673);const _0xe30ccf=await getCoins(balanceUpdateDelay,undefined,undefined,_0x584d1d);[currentCoins,currentCoinsAll]=_0xe30ccf,setBlockTransactionDetection(![]),await validateOrders(),_0xb2982c(_0x3a6724(0x26d)),_0x230673['fee']={'currency':_0xb1cd16[_0x3a6724(0x174)]?_0xb1cd16[_0x3a6724(0x174)][_0x3a6724(0x271)]:null,'cost':_0xb1cd16[_0x3a6724(0x174)]?_0xb1cd16['fee']['cost']:0x0},await updatePnL(_0x230673);}}}!_0x1bfd6c&&(logger[_0x3a6724(0x1cc)](_0x3a6724(0x143)+_0xb1cd16['id']),_0xb2982c(_0x3a6724(0x26d)),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay),await updateOpenOrders(),handleOpenOrders());}}}if(lastBalances){let _0x3ecd8e=JSON['parse'](lastBalances[_0x3a6724(0x18d)]);const _0x1b6c96=_0x3ecd8e[_0x3a6724(0x1f9)](_0x337697=>_0x337697[_0x3a6724(0x13d)]==_0xb1cd16['symbol']);if(_0x1b6c96){if(_0x1be10c==_0x3a6724(0x209))_0x1b6c96[_0x3a6724(0x1a3)]=_0x1b6c96[_0x3a6724(0x1a3)]==_0x3a6724(0x26d)?_0x3a6724(0x26d):_0x3a6724(0x209);else{if(_0x1be10c==_0x3a6724(0x28d))_0x1b6c96[_0x3a6724(0x1a3)]=_0x1b6c96[_0x3a6724(0x1a3)]==_0x3a6724(0x26d)?_0x3a6724(0x26d):_0x3a6724(0x28d);else _0x1be10c==_0x3a6724(0x134)&&(_0x1b6c96['orderstatus']=_0x3a6724(0x26d));}}lastBalances={...lastBalances,'portfolio':JSON['stringify'](_0x3ecd8e)},proxyEmit(_0x3a6724(0x1e2),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x4fe172=_0x28f3c2;await getOpenOrders();let _0x1d543d=![];currentCoins[_0x4fe172(0x266)](_0x50e8dd=>{const _0x99a3e0=_0x4fe172;_0x1d543d=allOpenOrders[_0x99a3e0(0x1f9)](_0x447a7d=>_0x447a7d['symbol']==_0x50e8dd[_0x99a3e0(0x13d)]),_0x50e8dd['orderstatus']=_0x1d543d?'open':'none';});}async function fetchBalance(_0x50c693=!![]){const _0x11678f=_0x28f3c2;let _0x3ff1ee,_0xc7aa9d;try{return _0x3ff1ee=await exchange['fetchBalance'](),_0xc7aa9d=_0x3ff1ee[_0x11678f(0x259)],_0xc7aa9d;}catch(_0x32bb25){return!_0x50c693?handleErrorNoStop(_0x32bb25,_0x11678f(0x25a)):await handleError(_0x32bb25,_0x11678f(0x25a)),![];}}async function getCoins(_0x4a9847=0x0,_0x31b63e=!![],_0x2ddb7a=config[_0x28f3c2(0x29e)],_0x34374c){const _0xf1cf94=_0x28f3c2;let _0x494e7c=[],_0xd7a417=[],_0x1f1fe0=[],_0x16ac44;if(_0x4a9847)await sleep(_0x4a9847);if(botPaused)return[currentCoins,currentCoinsAll];let _0x3a9113=![],_0x148eec=0x0,_0x1999f6,_0xcab106;_0x34374c&&(_0x1999f6=currentCoins[_0xf1cf94(0x1f9)](_0x4593c7=>_0x4593c7[_0xf1cf94(0x1fd)]==_0x34374c),_0x1999f6&&(_0xcab106=_0x1999f6[_0xf1cf94(0x22d)],delete _0x1999f6[_0xf1cf94(0x22d)]));while(!_0x3a9113){_0x16ac44=await fetchBalance(_0x31b63e);if(_0x16ac44){if(_0x34374c){if(_0x16ac44[_0x34374c]!=_0xcab106)logger[_0xf1cf94(0x1cc)](_0xf1cf94(0xf5)+_0x34374c+':\x20'+_0x16ac44[_0x34374c]+'\x20('+_0xcab106+')'),_0x3a9113=!![];else{logger[_0xf1cf94(0x1cc)](_0xf1cf94(0x26b)+_0x34374c+':\x20'+_0x16ac44[_0x34374c]+'\x20('+_0xcab106+')'),_0x148eec++;if(_0x148eec<balanceUpdateRetries)await sleep(balanceUpdateDelay);else{logger['debug'](_0xf1cf94(0x242)+_0x148eec+_0xf1cf94(0x231));break;}}}else break;}else return[currentCoins,currentCoinsAll];}for(const [_0x4d0eeb,_0x2191f5]of Object[_0xf1cf94(0x112)](_0x16ac44)){_0x1f1fe0['push'](_0x4d0eeb);}config['portfolio'][_0xf1cf94(0x266)](_0x5b2c11=>{const _0x57333a=_0xf1cf94;!_0x1f1fe0[_0x57333a(0x26f)](_0x5b2c11['coin'])&&(_0x16ac44[_0x5b2c11[_0x57333a(0x1fd)]]=0x0);});if(_0x2ddb7a=='')for(const [_0x18bcd2,_0x326b61]of Object[_0xf1cf94(0x112)](_0x16ac44)){_0x326b61!=0x0&&_0x494e7c['push']({'coin':_0x18bcd2});}else for(const [_0x132506,_0x450696]of Object[_0xf1cf94(0x112)](_0x16ac44)){const _0x51b556=config['portfolio'][_0xf1cf94(0x1f9)](_0x3a838c=>_0x3a838c[_0xf1cf94(0x1fd)]==_0x132506),_0x40d5a9=_0x132506+'/'+_0x2ddb7a,_0x1f1d02=_0x2ddb7a+'/'+_0x132506,_0x54ec47=currentCoins['find'](_0x5643ad=>_0x5643ad[_0xf1cf94(0x1fd)]==_0x132506);if((_0x450696!=0x0||_0x51b556)&&(allSymbols[_0xf1cf94(0x26f)](_0x40d5a9)||_0x132506==_0x2ddb7a))_0x54ec47?_0x494e7c[_0xf1cf94(0x237)]({..._0x54ec47,'number':Math[_0xf1cf94(0x153)](_0x450696+(_0x51b556&&_0x51b556[_0xf1cf94(0x161)]||0x0),0x0)}):_0x494e7c['push']({'coin':_0x132506,'symbol':_0x40d5a9,'reverse':![],'number':Math[_0xf1cf94(0x153)](_0x450696+(_0x51b556&&_0x51b556[_0xf1cf94(0x161)]||0x0),0x0),'orderstatus':_0xf1cf94(0x1c4)});else{if((_0x450696!=0x0||_0x51b556)&&allSymbols[_0xf1cf94(0x26f)](_0x1f1d02))_0x54ec47?_0x494e7c['push']({..._0x54ec47,'number':Math[_0xf1cf94(0x153)](_0x450696+(_0x51b556&&_0x51b556[_0xf1cf94(0x161)]||0x0),0x0)}):_0x494e7c[_0xf1cf94(0x237)]({'coin':_0x132506,'symbol':_0x1f1d02,'reverse':!![],'number':Math[_0xf1cf94(0x153)](_0x450696+(_0x51b556&&_0x51b556[_0xf1cf94(0x161)]||0x0),0x0),'orderstatus':_0xf1cf94(0x1c4)});else _0x51b556&&_0x494e7c[_0xf1cf94(0x237)]({'coin':_0x51b556[_0xf1cf94(0x1fd)],'symbol':_0x51b556[_0xf1cf94(0x13d)],'reverse':_0x51b556[_0xf1cf94(0x23f)],'number':0x0,'orderstatus':'none'});}}return _0x494e7c[_0xf1cf94(0x21a)]((_0x54fcea,_0x39f46f)=>_0x54fcea[_0xf1cf94(0x1f0)]<_0x39f46f[_0xf1cf94(0x1f0)]?0x1:_0x39f46f[_0xf1cf94(0x1f0)]<_0x54fcea['delta']?-0x1:0x0),_0xd7a417=cloneDeep(_0x494e7c),_0x494e7c=_0x494e7c[_0xf1cf94(0x205)](_0x3c1555=>{const _0x620541=_0xf1cf94,_0x19e7d1=config[_0x620541(0x18d)][_0x620541(0x1f9)](_0x538840=>_0x538840[_0x620541(0x1fd)]==_0x3c1555[_0x620541(0x1fd)]);return _0x19e7d1&&!_0x19e7d1[_0x620541(0x236)];}),[_0x494e7c,_0xd7a417];}async function getOpenOrders(){const _0x3313e9=_0x28f3c2;let _0x156cb3;allOpenOrders=[];try{for(const _0x12e19a of config[_0x3313e9(0x18d)]){!_0x12e19a['excluded']&&_0x12e19a['coin']!=config[_0x3313e9(0x29e)]&&(_0x156cb3=await exchange[_0x3313e9(0x169)](_0x12e19a['symbol']),_0x156cb3[_0x3313e9(0x1d5)]>0x0&&allOpenOrders[_0x3313e9(0x237)](_0x156cb3[0x0]));}}catch(_0x1df450){await handleError(_0x1df450,_0x3313e9(0x105));}}async function handleOpenOrders(_0x3eca4e=0x0){const _0x22bb77=_0x28f3c2;allOpenOrders['length']==0x0&&lockOrders==ORDERS['LOCKED']&&allOrdersPlaced&&(_0x3eca4e==0x0?(logger[_0x22bb77(0x1cc)](_0x22bb77(0x20d)),_0x3eca4e++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger['debug'](_0x22bb77(0x28a)),validateOrders(_0x22bb77(0x213))));}async function testAPI(){const _0x29026b=_0x28f3c2;try{return await exchange[_0x29026b(0x1ee)](),!![];}catch(_0x2099a6){return loading['cancel']=!![],emitLoadingProgress(),handleErrorNoStop(_0x2099a6,'testAPI()'),logger[_0x29026b(0x1cc)](_0x29026b(0x1d3),_0x2099a6),botPaused=!![],![];}}async function testNewAPI(_0x190211){const _0x48523d=_0x28f3c2;logger['debug']('Test\x20new\x20API');const _0x3931c5=ccxt['pro'][_0x190211['exchange']['toLowerCase']()],_0x270d03=new _0x3931c5({'apiKey':_0x190211[_0x48523d(0x282)],'secret':_0x190211[_0x48523d(0x123)],'options':{'defaultType':'spot'}});if(_0x190211[_0x48523d(0x268)])_0x270d03[_0x48523d(0x178)]=_0x190211[_0x48523d(0x268)];try{await _0x270d03[_0x48523d(0x1ee)](),botPaused=![];}catch(_0x489563){logger[_0x48523d(0x1cc)](_0x48523d(0xe5)+_0x489563[_0x48523d(0x24f)]());throw _0x489563;}}function cloneDeep(_0x4a1caa){const _0x320a6f=_0x28f3c2;return JSON[_0x320a6f(0xf1)](JSON[_0x320a6f(0x204)](_0x4a1caa));}async function getPortfolio(_0xd65ad6){const _0x2e58fe=_0x28f3c2;let _0x390bfb=[],_0x217582=[],_0x36c923=[],_0x4338d0;_0xd65ad6[_0x2e58fe(0x282)]=decryptRSA(secure[_0x2e58fe(0x13f)],_0xd65ad6['apiKey']),_0xd65ad6['apiSecret']=decryptRSA(secure[_0x2e58fe(0x13f)],_0xd65ad6['apiSecret']);if(_0xd65ad6['apiPassword'])_0xd65ad6[_0x2e58fe(0x268)]=decryptRSA(secure[_0x2e58fe(0x13f)],_0xd65ad6['apiPassword']);if(_0xd65ad6[_0x2e58fe(0x282)]!==_0x2e58fe(0x225)||_0xd65ad6['apiSecret']!=='************'||_0xd65ad6[_0x2e58fe(0x268)]&&_0xd65ad6[_0x2e58fe(0x268)]!==_0x2e58fe(0x225)){if(config[_0x2e58fe(0x292)]){if(_0xd65ad6[_0x2e58fe(0x282)]==_0x2e58fe(0x225))_0xd65ad6[_0x2e58fe(0x282)]=config[_0x2e58fe(0x282)];if(_0xd65ad6[_0x2e58fe(0x123)]==_0x2e58fe(0x225))_0xd65ad6[_0x2e58fe(0x123)]=config[_0x2e58fe(0x123)];if(_0xd65ad6['apiPassword']=='************')_0xd65ad6['apiPassword']=config[_0x2e58fe(0x268)];}try{if(_0xd65ad6['testApi'])await testNewAPI(_0xd65ad6);}catch(_0x51df44){if(_0x51df44['toString']()[_0x2e58fe(0x26f)](_0x2e58fe(0x1f1))){logHistory(_0x2e58fe(0x179),_0x2e58fe(0x14e)),logHistory(_0x2e58fe(0x179),_0x2e58fe(0x1a4)+_0x51df44[_0x2e58fe(0x24f)]()),proxyEmit(_0x2e58fe(0x186),![]);return;}else{if(_0x51df44['toString']()[_0x2e58fe(0x26f)]('PermissionDenied')){logHistory(_0x2e58fe(0x179),_0x2e58fe(0x1c6)),logHistory(_0x2e58fe(0x179),_0x2e58fe(0x1a4)+_0x51df44['toString']()),proxyEmit('portfolio1',![]);return;}else{logHistory('error',_0x2e58fe(0x147)+_0x51df44[_0x2e58fe(0x24f)]()),logger['debug']('Error\x20details:',_0x51df44),proxyEmit(_0x2e58fe(0x186),![]);return;}}}exchange?updateExchange(_0xd65ad6[_0x2e58fe(0x282)],_0xd65ad6[_0x2e58fe(0x123)],_0xd65ad6['apiPassword']):await initExchange(_0xd65ad6[_0x2e58fe(0x292)],_0xd65ad6['apiKey'],_0xd65ad6[_0x2e58fe(0x123)],_0xd65ad6[_0x2e58fe(0x268)]);await loadSymbols();const _0x2e3e80=await getCoins(0x0,![],_0xd65ad6[_0x2e58fe(0x29e)]);_0x36c923=cloneDeep(_0x2e3e80[0x1]);}else{const _0x1271e0=await getCoins();_0x36c923=cloneDeep(_0x1271e0[0x1]);}if(_0xd65ad6[_0x2e58fe(0x29e)]=='')proxyEmit(_0x2e58fe(0x186),!![]),proxyEmit('portfolio2',_0x36c923);else{_0x36c923[_0x2e58fe(0x266)](_0x3726c3=>{const _0x1657e9=_0x2e58fe;if(_0x3726c3[_0x1657e9(0x1fd)]!=_0xd65ad6['basecoin']&&allSymbols[_0x1657e9(0x26f)](_0x3726c3[_0x1657e9(0x13d)]))_0x390bfb[_0x1657e9(0x237)](_0x3726c3['symbol']);});if(_0x390bfb[_0x2e58fe(0x1d5)]==0x0)logHistory('error',_0x2e58fe(0x219));else{try{_0x217582=await getTickers(_0x390bfb);}catch(_0x2bc9ee){logHistory(_0x2e58fe(0x179),_0x2e58fe(0x17b)),logger[_0x2e58fe(0x1cc)]('Error\x20details:',_0x2bc9ee),proxyEmit(_0x2e58fe(0x186),![]);return;}_0x36c923[_0x2e58fe(0x266)](_0x46b5d1=>{const _0x57cb19=_0x2e58fe;_0x46b5d1[_0x57cb19(0x1fd)]!=_0xd65ad6[_0x57cb19(0x29e)]?_0x217582[_0x46b5d1['symbol']]?_0x4338d0=_0x46b5d1[_0x57cb19(0x23f)]?0x1/_0x217582[_0x46b5d1['symbol']][_0x57cb19(0x10d)]:_0x217582[_0x46b5d1['symbol']][_0x57cb19(0x10d)]:_0x4338d0=0x0:_0x4338d0=0x1,_0x46b5d1[_0x57cb19(0x1e0)]=formatResult(_0x4338d0,0x8);}),await getMarketCap(_0x36c923),proxyEmit(_0x2e58fe(0x186),!![]),proxyEmit(_0x2e58fe(0x190),_0x36c923);}}}function truncateTradeAmount(_0x36fbc3,_0x3dc3f1){const _0x1f8cbc=_0x28f3c2;let _0xebb4d1=0x0;try{_0xebb4d1=exchange[_0x1f8cbc(0x17e)](_0x36fbc3,_0x3dc3f1);}catch(_0x8f0c8a){}return _0xebb4d1;}function checkMinimums(_0x53fbf9){const _0x2c6d87=_0x28f3c2;let _0x164437=!![];const _0x1984da=!_0x53fbf9[_0x2c6d87(0x23f)]?markets[_0x53fbf9[_0x2c6d87(0x13d)]][_0x2c6d87(0x1e8)][_0x2c6d87(0x1a0)][_0x2c6d87(0x293)]:markets[_0x53fbf9['symbol']][_0x2c6d87(0x1e8)]['cost'][_0x2c6d87(0x293)],_0x1720c6=!_0x53fbf9[_0x2c6d87(0x23f)]?markets[_0x53fbf9['symbol']]['limits']['cost'][_0x2c6d87(0x293)]:markets[_0x53fbf9[_0x2c6d87(0x13d)]]['limits'][_0x2c6d87(0x1a0)]['min'],_0xcb1b5=truncateTradeAmount(_0x53fbf9[_0x2c6d87(0x13d)],_0x53fbf9[_0x2c6d87(0x258)]);_0x53fbf9[_0x2c6d87(0x258)]=_0xcb1b5;if(Math['abs'](_0xcb1b5)<_0x1984da)_0x164437=![];if(Math[_0x2c6d87(0x17a)](_0xcb1b5)*_0x53fbf9[_0x2c6d87(0x10d)]<_0x1720c6)_0x164437=![];if(_0x53fbf9[_0x2c6d87(0x1f7)]=='sell'){let _0xd1da98=config['portfolio'][_0x2c6d87(0x1f9)](_0x181731=>_0x181731['coin']==_0x53fbf9['coin']);if(_0xd1da98[_0x2c6d87(0x161)]>0x0){if(Math['abs'](_0xcb1b5)>_0x53fbf9[_0x2c6d87(0x1eb)]-_0xd1da98['offset'])_0x164437=![];}else{if(Math[_0x2c6d87(0x17a)](_0xcb1b5)>_0x53fbf9[_0x2c6d87(0x1eb)])_0x164437=![];}}if(_0x53fbf9[_0x2c6d87(0x1f7)]=='buy'){let _0x51360b=config['portfolio'][_0x2c6d87(0x1f9)](_0x5b3d66=>_0x5b3d66['coin']==config[_0x2c6d87(0x29e)]),_0x36e7f9=currentCoins[_0x2c6d87(0x1f9)](_0x5bdd4b=>_0x5bdd4b[_0x2c6d87(0x1fd)]==config[_0x2c6d87(0x29e)]);if(_0x51360b[_0x2c6d87(0x161)]>0x0){if(Math['abs'](_0xcb1b5)*_0x53fbf9['last']>_0x36e7f9[_0x2c6d87(0x1eb)]-_0x51360b['offset'])_0x164437=![];}else{if(Math[_0x2c6d87(0x17a)](_0xcb1b5)*_0x53fbf9[_0x2c6d87(0x10d)]>_0x36e7f9[_0x2c6d87(0x1eb)])_0x164437=![];}}return _0x164437;}async function getBalances(_0x217922=!![]){const _0x575856=_0x28f3c2;if(botPaused)return;let _0x523a0d=0x0,_0x2e3e93;const _0x27b263=config[_0x575856(0x264)];if(config[_0x575856(0xfa)]&&config[_0x575856(0xef)]<0x0)await validate24hChanges();currentCoins[_0x575856(0x266)](_0x8393ff=>{const _0x203080=_0x575856;if(_0x8393ff['coin']!=config[_0x203080(0x29e)]){let _0x1a0cd9=gTicker[noslash(_0x8393ff[_0x203080(0x13d)])];_0x2e3e93=_0x8393ff['reverse']?0x1/_0x1a0cd9:_0x1a0cd9;}else _0x2e3e93=0x1;let _0x29160d=_0x8393ff['number']*_0x2e3e93;_0x523a0d+=_0x29160d,_0x8393ff[_0x203080(0x10d)]=formatResult(Number(_0x2e3e93),0x8),_0x8393ff[_0x203080(0x211)]=_0x29160d;}),currentCoins[_0x575856(0x266)](_0x2118f5=>{const _0x305571=_0x575856;let _0x411f01=config[_0x305571(0x18d)][_0x305571(0x1f9)](_0x11fef2=>_0x11fef2[_0x305571(0x1fd)]==_0x2118f5['coin']),_0x29c779=Number(_0x411f01[_0x305571(0x25c)]),_0x5c6615=_0x2118f5[_0x305571(0x211)]/_0x523a0d*0x64,_0x185f97=_0x29c779*_0x523a0d/0x64/_0x2118f5[_0x305571(0x10d)]-_0x2118f5[_0x305571(0x1eb)];_0x2118f5['distribution']=formatResult(_0x5c6615,0x3),_0x2118f5[_0x305571(0xdf)]=formatResult(_0x29c779,0x3),_0x2118f5['trade']=formatResult(_0x185f97,0x8),_0x2118f5[_0x305571(0x1f7)]='',_0x2118f5[_0x305571(0xf0)]=![];if(_0x2118f5['coin']!=config[_0x305571(0x29e)]){if(_0x2118f5[_0x305571(0x25c)]>_0x29c779)_0x2118f5['side']=_0x305571(0x1fe),_0x2118f5['valid']=checkMinimums(_0x2118f5);else _0x2118f5['distribution']<_0x29c779&&(_0x2118f5[_0x305571(0x1f7)]='buy',_0x2118f5['valid']=checkMinimums(_0x2118f5));}_0x2118f5[_0x305571(0x1f0)]=_0x2118f5[_0x305571(0x25c)]/_0x2118f5['target']-0x1;if(_0x2118f5[_0x305571(0x1a3)]==_0x305571(0x26d)||_0x2118f5[_0x305571(0x1a3)]=='canceled')_0x2118f5[_0x305571(0x1a3)]=_0x305571(0x1c4);}),currentCoins[_0x575856(0x21a)]((_0x34f5ef,_0x144637)=>_0x34f5ef['delta']<_0x144637[_0x575856(0x1f0)]?0x1:_0x144637[_0x575856(0x1f0)]<_0x34f5ef['delta']?-0x1:0x0);const _0x1dc158=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x1dc158[_0x575856(0x182)],'usd':_0x1dc158['usd'],'portfolio':JSON[_0x575856(0x204)](currentCoins),'threshold':_0x27b263},proxyEmit(_0x575856(0x1e2),{'serverversion':serverversion,'balances':lastBalances});if(_0x217922){if(config['headless'])headlessMode({'portfolio':currentCoins,'threshold':_0x27b263});else lockOrders==ORDERS[_0x575856(0x1e9)]&&!coolingDown&&notifyBalance({'portfolio':currentCoins,'threshold':_0x27b263});}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x599f1b=getNormalizedPerformance();getStartingBalances(_0x599f1b),emitPerformance(_0x599f1b);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}function getPnL(){const _0x2163c3=_0x28f3c2;let _0x14606d=dbCoinResults[_0x2163c3(0x243)](_0x2163c3(0x1f5))['value'](),_0x7341c7=0x0;return Object[_0x2163c3(0x112)](_0x14606d)[_0x2163c3(0x266)](([_0x118bb7,_0x5ed7ff])=>{const _0x14158d=_0x2163c3;_0x7341c7+=_0x5ed7ff[_0x14158d(0x23d)];}),_0x7341c7;}async function storePerformance(){const _0x47ae6c=_0x28f3c2;if(!lastBalances)return;let _0x341062=[],_0x27edd4;const _0x52aca7=getPnL();let _0x1b1003=JSON[_0x47ae6c(0xf1)](lastBalances[_0x47ae6c(0x18d)]);_0x1b1003[_0x47ae6c(0x21a)]((_0x5b6219,_0x2211e8)=>_0x5b6219[_0x47ae6c(0x1fd)]>_0x2211e8[_0x47ae6c(0x1fd)]?0x1:_0x2211e8[_0x47ae6c(0x1fd)]>_0x5b6219['coin']?-0x1:0x0),_0x1b1003[_0x47ae6c(0x266)](_0x252cde=>{const _0x4c1e8b=_0x47ae6c;let _0x26af4a={'coin':_0x252cde[_0x4c1e8b(0x1fd)],'number':_0x252cde[_0x4c1e8b(0x1eb)],'price':_0x252cde[_0x4c1e8b(0x10d)]};_0x341062['push'](_0x26af4a);});const _0x566b86=await getFiat(),_0x3313b3=getTimeStamp()[_0x47ae6c(0x140)]('\x20')[0x0],_0x28490f=dbPerformance[_0x47ae6c(0x243)](_0x47ae6c(0x253))[_0x47ae6c(0x1f9)]({'date':_0x3313b3})[_0x47ae6c(0x211)]();_0x27edd4={'date':_0x3313b3,'eur':_0x566b86[_0x47ae6c(0x182)],'usd':_0x566b86[_0x47ae6c(0x172)],'coins':_0x341062,'pnl':_0x52aca7},_0x28490f?_0x27edd4[_0x47ae6c(0x11b)]!=config[_0x47ae6c(0x109)]&&dbPerformance[_0x47ae6c(0x243)](_0x47ae6c(0x253))[_0x47ae6c(0x1f9)]({'date':_0x3313b3})[_0x47ae6c(0x26a)](_0x27edd4)[_0x47ae6c(0x234)]():dbPerformance[_0x47ae6c(0x243)](_0x47ae6c(0x253))['push'](_0x27edd4)[_0x47ae6c(0x234)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x3dc65a=_0x28f3c2;let _0x2eda2b=[];if(dbPerformance['has']('data')[_0x3dc65a(0x211)]()){let _0x1df02c=dbPerformance[_0x3dc65a(0x243)](_0x3dc65a(0x253))[_0x3dc65a(0x148)]()[_0x3dc65a(0x205)](_0x1fba57=>{const _0x3fd72c=_0x3dc65a;if(_0x1fba57['coins'][_0x3fd72c(0x1d5)]==0x0)return![];else return!![];})[_0x3dc65a(0x1c1)](_0x3dc65a(0x11b))['value'](),_0x35d6b1=[...config[_0x3dc65a(0x12e)]];_0x35d6b1[_0x3dc65a(0x21a)]((_0x58b7c,_0x18a9d9)=>_0x58b7c['date']>_0x18a9d9[_0x3dc65a(0x11b)]?-0x1:_0x18a9d9[_0x3dc65a(0x11b)]>_0x58b7c[_0x3dc65a(0x11b)]?0x1:0x0);let _0x2494b3=0x1,_0x422f88=[],_0x1d0d56=0x0;_0x1df02c[_0x3dc65a(0x201)]()[_0x3dc65a(0x23f)]()[_0x3dc65a(0x266)]((_0x3c9c0c,_0x5983bf)=>{const _0x25b2c6=_0x3dc65a;if(_0x35d6b1[_0x1d0d56]){if(_0x1df02c[_0x1df02c[_0x25b2c6(0x1d5)]-_0x5983bf]&&_0x35d6b1[_0x1d0d56][_0x25b2c6(0x11b)]==_0x1df02c[_0x1df02c['length']-_0x5983bf][_0x25b2c6(0x11b)]){if(_0x5983bf<_0x1df02c[_0x25b2c6(0x1d5)]){let _0x21d90b=0x0,_0xad5007=0x0;_0x1df02c[_0x1df02c[_0x25b2c6(0x1d5)]-_0x5983bf]['coins'][_0x25b2c6(0x266)](_0x5889b3=>{const _0x9be4e6=_0x25b2c6;_0xad5007+=_0x5889b3['number']*_0x5889b3[_0x9be4e6(0x1e0)];}),_0x35d6b1[_0x1d0d56][_0x25b2c6(0x144)][_0x25b2c6(0x266)](_0x16a28f=>{const _0x5c2d79=_0x25b2c6;_0x21d90b+=_0x16a28f[_0x5c2d79(0x1eb)]*_0x16a28f['price'];}),_0x2494b3*=_0x21d90b/(_0xad5007-_0x21d90b)+0x1;}_0x1d0d56++;}}let _0x27d1a2=0x0;_0x3c9c0c[_0x25b2c6(0x1f5)][_0x25b2c6(0x266)](_0x5b7c41=>{const _0x266ee6=_0x25b2c6;_0x27d1a2+=_0x5b7c41[_0x266ee6(0x1eb)]*_0x5b7c41[_0x266ee6(0x1e0)];}),_0x422f88[_0x1df02c[_0x25b2c6(0x1d5)]-_0x5983bf-0x1]=_0x27d1a2*(_0x2494b3-0x1);});let _0x38cada=[];_0x35d6b1=[...config[_0x3dc65a(0x12e)]]||[];let _0x559b09=0x0;_0x1d0d56=0x0,_0x1df02c[_0x3dc65a(0x266)]((_0x12e95c,_0x443337)=>{const _0x140c37=_0x3dc65a;if(_0x35d6b1[_0x1d0d56]){const _0x26f096=fns['parse'](_0x35d6b1[_0x1d0d56][_0x140c37(0x11b)],_0x140c37(0x1a9),new Date()),_0x2d480f=fns['parse'](_0x12e95c['date'],_0x140c37(0x1a9),new Date());if(fns[_0x140c37(0x15b)](_0x26f096,_0x2d480f)){let _0x1b940a=0x0;_0x35d6b1[_0x1d0d56][_0x140c37(0x144)][_0x140c37(0x266)](_0x5ed07b=>{const _0x4bde5e=_0x140c37;!_0x38cada[_0x5ed07b[_0x4bde5e(0x1fd)]]?_0x38cada[_0x5ed07b[_0x4bde5e(0x1fd)]]=_0x5ed07b['number']:(_0x1b940a=_0x38cada[_0x5ed07b[_0x4bde5e(0x1fd)]],_0x38cada[_0x5ed07b[_0x4bde5e(0x1fd)]]+=_0x5ed07b[_0x4bde5e(0x1eb)]);const _0x5af582=_0x12e95c[_0x4bde5e(0x1f5)][_0x4bde5e(0x1f9)](_0x5865c1=>_0x5865c1['coin']==_0x5ed07b[_0x4bde5e(0x1fd)]);(!_0x5af582||_0x5af582['number']==0x0)&&(_0x559b09+=(-_0x5ed07b[_0x4bde5e(0x1eb)]-_0x1b940a)*_0x5ed07b[_0x4bde5e(0x1e0)]);}),_0x1d0d56++;}}_0x12e95c['coins'][_0x140c37(0x266)]((_0x5b142b,_0x4611a4)=>{const _0x138a48=_0x140c37;_0x38cada[_0x5b142b[_0x138a48(0x1fd)]]&&(_0x5b142b[_0x138a48(0x22a)]=_0x38cada[_0x5b142b[_0x138a48(0x1fd)]]);}),_0x2eda2b[_0x140c37(0x237)]({'date':_0x12e95c['date'],'eur':_0x12e95c[_0x140c37(0x182)],'usd':_0x12e95c[_0x140c37(0x172)],'offset':_0x422f88[_0x443337],'netoffset':_0x559b09,'coins':_0x12e95c[_0x140c37(0x1f5)],'pnl':_0x12e95c['pnl']});});}return _0x2eda2b;}function emitPerformance(_0x203f3){const _0x4c840=_0x28f3c2;_0x203f3[_0x4c840(0x1d5)]!==0x0?(proxyEmit(_0x4c840(0x10f),_0x203f3),lastPerformanceEmitted=getDate()):proxyEmit(_0x4c840(0x10f),[]);}function getPerf(_0x4b7aef,_0x1e9df5){const _0x52bf16=_0x28f3c2;let _0x1d978a=0x0,_0xee0ac9=0x0,_0x3dd85f=0x0;_0x4b7aef[_0x52bf16(0x1f5)]['forEach'](_0x4fa1ab=>{const _0x80b75d=_0x52bf16;_0x1d978a+=_0x4fa1ab[_0x80b75d(0x1eb)]*_0x4fa1ab['price'];});_0x1e9df5&&(_0x1d978a+=_0x4b7aef[_0x52bf16(0x161)]);if(config[_0x52bf16(0x29e)]===_0x52bf16(0x10b)||config[_0x52bf16(0x29e)]===_0x52bf16(0x191)||config[_0x52bf16(0x29e)]===_0x52bf16(0x250))_0xee0ac9=_0x1d978a*_0x4b7aef[_0x52bf16(0x182)],_0x3dd85f=_0x1d978a*_0x4b7aef[_0x52bf16(0x172)];else{if(usdBasecoins[_0x52bf16(0x26f)](config['basecoin']))_0xee0ac9=_0x1d978a*_0x4b7aef[_0x52bf16(0x182)]/_0x4b7aef[_0x52bf16(0x172)],_0x3dd85f=_0x1d978a;else config[_0x52bf16(0x29e)]===_0x52bf16(0x230)&&(_0xee0ac9=_0x1d978a,_0x3dd85f=_0x1d978a*_0x4b7aef[_0x52bf16(0x172)]/_0x4b7aef[_0x52bf16(0x182)]);}return[_0x1d978a,_0xee0ac9,_0x3dd85f];}function CurrencyFactor(_0x5bb007,_0x52d33f,_0x126ad9){const _0x46cd69=_0x28f3c2;let _0x608ce;if(_0x52d33f==='BTC'||_0x52d33f===_0x46cd69(0x191)||_0x52d33f===_0x46cd69(0x250))_0x608ce=_0x126ad9==='EUR'?_0x5bb007[_0x46cd69(0x182)]:_0x5bb007[_0x46cd69(0x172)];else{if(usdBasecoins[_0x46cd69(0x26f)](_0x52d33f))_0x608ce=_0x126ad9===_0x46cd69(0x230)?_0x5bb007['eur']/_0x5bb007[_0x46cd69(0x172)]:0x1;else _0x52d33f===_0x46cd69(0x230)&&(_0x608ce=_0x126ad9===_0x46cd69(0x230)?0x1:_0x5bb007[_0x46cd69(0x172)]/_0x5bb007[_0x46cd69(0x182)]);}return _0x608ce;}function getKPIs(_0x3a24c6,_0x3b4bec=_0x28f3c2(0x230)){const _0x42bee0=_0x28f3c2,_0x4e67fe=config['basecoin'],_0x534319=lastBalances,_0x1b9a08=currentCoins,_0x106aa8=getNormalizedPerformance(),_0x586015=CurrencyFactor(_0x534319,config[_0x42bee0(0x29e)],_0x3b4bec);let _0xeb73d7=0x0;_0x1b9a08[_0x42bee0(0x266)](_0x268c9e=>{const _0x3f9529=_0x42bee0;_0xeb73d7+=_0x268c9e[_0x3f9529(0x1eb)]*_0x268c9e[_0x3f9529(0x10d)];});_0x3a24c6[_0x42bee0(0x26f)](_0x42bee0(0x1db))&&(_0xeb73d7*=_0x586015);let _0x24cfbe;if(_0xeb73d7!==0x0){if(_0x3a24c6==='basecoin'||_0x3a24c6==='fiat'){if(_0x3a24c6===_0x42bee0(0x29e))_0x24cfbe=(_0xeb73d7/startingBalances[_0x42bee0(0x29e)]-0x1)*0x64;else{if(_0x3b4bec===_0x42bee0(0x230))_0x24cfbe=(_0xeb73d7/startingBalances['eur']-0x1)*0x64;else _0x24cfbe=(_0xeb73d7/startingBalances[_0x42bee0(0x172)]-0x1)*0x64;}}if(_0x3a24c6['includes']('net')){let _0x163649=0x0;if(startingBalances[_0x42bee0(0x1f5)])_0x1b9a08[_0x42bee0(0x266)](_0x39c536=>{const _0x228a66=_0x42bee0;let _0x5b530c=startingBalances['coins']['find'](_0x358e80=>_0x358e80[_0x228a66(0x1fd)]===_0x39c536[_0x228a66(0x1fd)]);if(_0x5b530c&&_0x5b530c[_0x228a66(0x1fd)]&&_0x39c536[_0x228a66(0x1eb)]!==0x0)_0x163649+=_0x5b530c[_0x228a66(0x1eb)]*_0x39c536[_0x228a66(0x10d)];});let _0x3000bd=0x0;if(_0x106aa8[_0x42bee0(0x1d5)]!==0x0){let _0x3f4ff8=_0x106aa8[_0x106aa8['length']-0x1];_0x3000bd=_0x3f4ff8[_0x42bee0(0x216)];}_0x163649-=_0x3000bd;let _0x369e96;_0x3a24c6===_0x42bee0(0x22c)&&(_0x369e96=startingBalances[_0x42bee0(0x29e)]),_0x3a24c6===_0x42bee0(0x257)&&(_0x369e96=_0x3b4bec===_0x42bee0(0x230)?startingBalances[_0x42bee0(0x182)]:startingBalances[_0x42bee0(0x172)],_0x163649*=_0x586015),_0x24cfbe=(_0xeb73d7-_0x163649)/_0x369e96*0x64,_0xeb73d7=_0xeb73d7-_0x163649;}if(_0x3a24c6[_0x42bee0(0x26f)]('pnl')){if(_0x106aa8[_0x42bee0(0x1d5)]!==0x0&&_0x1b9a08[_0x42bee0(0x1d5)]!==0x0){let _0x42adf0,_0x405211=_0x106aa8[_0x106aa8[_0x42bee0(0x1d5)]-0x1][_0x42bee0(0x279)];_0x3a24c6[_0x42bee0(0x26f)](_0x42bee0(0x1db))?(_0x42adf0=_0x3b4bec==='EUR'?startingBalances[_0x42bee0(0x182)]:startingBalances[_0x42bee0(0x172)],_0x405211*=CurrencyFactor(_0x534319,_0x4e67fe,_0x3b4bec)):_0x42adf0=startingBalances[_0x42bee0(0x29e)],_0x24cfbe=_0x405211/_0x42adf0*0x64,_0xeb73d7=_0x405211;}}if(_0x24cfbe){if(_0x24cfbe<0x64)_0x24cfbe=_0x24cfbe['toFixed'](0x2);else{if(_0x24cfbe<0x3e8)_0x24cfbe=_0x24cfbe[_0x42bee0(0x274)](0x1);else _0x24cfbe=_0x24cfbe[_0x42bee0(0x274)](0x0);}}else _0x24cfbe=Number('0')[_0x42bee0(0x274)](0x2);if(_0xeb73d7){if(Math[_0x42bee0(0x17a)](_0xeb73d7)<0.000001)_0xeb73d7=_0xeb73d7['toFixed'](0x2);else{if(Math[_0x42bee0(0x17a)](_0xeb73d7)<0.1)_0xeb73d7=_0xeb73d7['toFixed'](0x6);else{if(Math[_0x42bee0(0x17a)](_0xeb73d7)<0x1)_0xeb73d7=_0xeb73d7[_0x42bee0(0x274)](0x5);else{if(Math[_0x42bee0(0x17a)](_0xeb73d7)<0xa)_0xeb73d7=_0xeb73d7['toFixed'](0x4);else{if(Math[_0x42bee0(0x17a)](_0xeb73d7)<0x64)_0xeb73d7=_0xeb73d7[_0x42bee0(0x274)](0x3);else{if(Math[_0x42bee0(0x17a)](_0xeb73d7)<0x3e8)_0xeb73d7=_0xeb73d7[_0x42bee0(0x274)](0x2);else _0xeb73d7=_0xeb73d7[_0x42bee0(0x274)](0x2);}}}}}}else _0xeb73d7=Number('0')[_0x42bee0(0x274)](0x2);}else _0x24cfbe=Number('0')[_0x42bee0(0x274)](0x2);if(_0x24cfbe>=0x0)_0x24cfbe='+'+_0x24cfbe;return{'value':_0xeb73d7,'change':_0x24cfbe};}async function getStartingBalances(_0x186ec0,_0x44db14=!![]){const _0x1ac683=_0x28f3c2;if(_0x186ec0['length']!==0x0){const [_0x3a25ba,_0x29de64,_0x4ae22a]=getPerf(_0x186ec0[0x0],!![]);let _0x1b7148=[];config[_0x1ac683(0x18d)][_0x1ac683(0x266)](_0x518f42=>{const _0x1f9ffb=_0x1ac683;let _0x3b8b68=0x0,_0x4148a2;config[_0x1f9ffb(0x12e)][_0x1f9ffb(0x266)](_0x4af214=>{const _0x2ac86b=_0x1f9ffb;let _0x2ffcf5=_0x4af214['changes'][_0x2ac86b(0x1f9)](_0x160528=>_0x160528['coin']==_0x518f42[_0x2ac86b(0x1fd)]);if(_0x2ffcf5){_0x3b8b68+=_0x2ffcf5[_0x2ac86b(0x1eb)];if(!_0x4148a2)_0x4148a2=_0x2ffcf5[_0x2ac86b(0x1e0)];}}),_0x1b7148[_0x1f9ffb(0x237)]({'coin':_0x518f42[_0x1f9ffb(0x1fd)],'number':_0x3b8b68,'initialprice':_0x4148a2});});const _0x5667fa={'basecoin':_0x3a25ba,'eur':_0x29de64,'usd':_0x4ae22a,'coins':_0x1b7148};if(_0x44db14)proxyEmit(_0x1ac683(0x1b2),_0x5667fa);startingBalances=_0x5667fa;}}function headlessMode(_0x315d6f){const _0x3ee29e=_0x28f3c2;let _0x4e5319=_0x315d6f[_0x3ee29e(0x18d)],_0x7b550e=_0x315d6f[_0x3ee29e(0x264)],_0x3964f9=[];for(let _0x153bb1 of _0x4e5319){if(_0x153bb1[_0x3ee29e(0x1fd)]!=config[_0x3ee29e(0x29e)]){if(_0x153bb1[_0x3ee29e(0x1f0)]>=_0x7b550e/0x64){if(_0x153bb1[_0x3ee29e(0xf0)])_0x3964f9['push'](_0x153bb1);}else{if(_0x153bb1[_0x3ee29e(0x1f0)]<=-_0x7b550e/0x64){if(_0x153bb1[_0x3ee29e(0xf0)])_0x3964f9['push'](_0x153bb1);}}}}_0x3964f9['length']>0x0&&placeOrder(_0x3964f9);}function notifyBalance(_0x56c9f7){const _0x53bb85=_0x28f3c2;let _0x579f4c=_0x56c9f7['portfolio'],_0x4ab02c=_0x56c9f7[_0x53bb85(0x264)],_0x289e4e=[];for(let _0x581125 of _0x579f4c){if(_0x581125[_0x53bb85(0x1fd)]!=config[_0x53bb85(0x29e)]){if(_0x581125[_0x53bb85(0x1f0)]>=_0x4ab02c/0x64){if(_0x581125['valid'])_0x289e4e[_0x53bb85(0x237)](_0x581125);}else{if(_0x581125['delta']<=-_0x4ab02c/0x64){if(_0x581125['valid'])_0x289e4e[_0x53bb85(0x237)](_0x581125);}}}}if(_0x289e4e['length']>0x0){let _0x17ba0f=_0x289e4e['map'](_0x333b61=>_0x333b61[_0x53bb85(0x1fd)]);_0x17ba0f[_0x53bb85(0x21a)]();let _0x1b85f0=_0x17ba0f[_0x53bb85(0xe4)](',\x20');if(!lastCoinsToBalance)logHistory(_0x53bb85(0xe9),_0x53bb85(0x128));lastCoinsToBalance=_0x1b85f0;}}function symbolToCoin(_0x2158a0){const _0x58c2ac=_0x28f3c2;let _0x38b493;if(_0x2158a0[_0x58c2ac(0x26f)]('/'+config[_0x58c2ac(0x29e)]))_0x38b493=_0x2158a0['replace']('/'+config[_0x58c2ac(0x29e)],'');if(_0x2158a0['includes'](config[_0x58c2ac(0x29e)]+'/'))_0x38b493=_0x2158a0[_0x58c2ac(0x142)](config['basecoin']+'/','');return _0x38b493;}function setLockOrders(_0x3a9a92){const _0x404d8e=_0x28f3c2;lockOrders=_0x3a9a92,logger[_0x404d8e(0x1cc)]('Set\x20lock\x20orders\x20to:\x20'+Object[_0x404d8e(0x1a1)](ORDERS)[lockOrders]);}async function unlockOrders(_0x1df08e=![]){const _0x4961e8=_0x28f3c2;if(allOrdersPlaced&&lockOrders==ORDERS[_0x4961e8(0x19d)]){setLockOrders(ORDERS[_0x4961e8(0x228)]);if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);if(_0x1df08e){const _0x3ce04e=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x3ce04e,setBlockTransactionDetection(![]);}validateOrdersState=_0x4961e8(0x22a),persistOpenOrders([]),setLockOrders(ORDERS[_0x4961e8(0x1e9)]);}}async function validateOrders(_0x5e280e){const _0x556f7f=_0x28f3c2;if(_0x5e280e)validateOrdersState=_0x5e280e;logger[_0x556f7f(0x1cc)]('1\x20-\x20Validate\x20orders:\x20'+validateOrdersState+_0x556f7f(0x1f2)+Object['keys'](ORDERS)[lockOrders]);let _0x5595df=[],_0x162860=config[_0x556f7f(0x270)]=='market'?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config['timeout']*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x556f7f(0x19d)])return;logger[_0x556f7f(0x1cc)]('2\x20-\x20Validate\x20orders:\x20'+validateOrdersState);for(let _0x34d945=lastOrders[_0x556f7f(0x1d5)]-0x1;_0x34d945>=0x0;_0x34d945--){let _0x555033=lastOrders[_0x34d945],_0x59c915=![];_0x555033[_0x556f7f(0x26d)]>0x0&&(_0x59c915=!![]),_0x5595df[_0x556f7f(0x237)](_0x59c915),_0x59c915&&config[_0x556f7f(0x270)]!=_0x556f7f(0x1d0)&&logHistory(_0x556f7f(0x166),_0x556f7f(0x291)+_0x555033[_0x556f7f(0x13d)]+'\x20'+_0x555033[_0x556f7f(0x1f7)]+'\x20#'+formatResult(_0x555033[_0x556f7f(0x26d)],0x8)+'\x20@'+formatResult(_0x555033[_0x556f7f(0x1e0)],0x8)),_0x59c915&&lastOrders[_0x556f7f(0x163)](_0x34d945,0x1);}persistOpenOrders(lastOrders);const _0x249478=coolingDown?_0x556f7f(0x12b):_0x556f7f(0x23e);if(validateOrdersState==_0x556f7f(0x22a)){validateOrdersState=_0x556f7f(0x1d1);if(_0x5595df[_0x556f7f(0x26f)](![])){}else await unlockOrders();}else{if(validateOrdersState=='ongoing'){if(_0x5595df['includes'](![])){}else await unlockOrders();}else{if(validateOrdersState==_0x556f7f(0x1d2))_0x5595df[_0x556f7f(0x26f)](![])&&(config[_0x556f7f(0x270)]==_0x556f7f(0x1d0)?logHistory(_0x556f7f(0x20b),'Order(s)\x20not\x20validated\x20after\x20'+Math[_0x556f7f(0x15f)](_0x162860*validateOrderInterval/0xea60)+_0x556f7f(0x210)+_0x249478):(await cancelOrders(),logHistory(_0x556f7f(0x20b),'Unfilled\x20order(s)\x20canceled\x20after\x20'+Math[_0x556f7f(0x15f)](_0x162860*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x249478))),await unlockOrders(!![]);else{if(validateOrdersState==_0x556f7f(0x213)){if(config[_0x556f7f(0x270)]!=_0x556f7f(0x1d0))logHistory('success','No\x20more\x20open\x20orders\x20-\x20'+_0x249478);await unlockOrders(!![]);}}}}}async function cancelOrders(){const _0x639f2d=_0x28f3c2;lastOrders[_0x639f2d(0x266)](async _0x24080d=>{const _0xebfa34=_0x639f2d;try{const _0x305087=await exchange[_0xebfa34(0x1b4)](_0x24080d[_0xebfa34(0x1b3)],_0x24080d[_0xebfa34(0x13d)]);}catch(_0x138aec){if(_0x138aec['toString']()[_0xebfa34(0x26f)](_0xebfa34(0x254))){}else await handleError(_0x138aec,'cancelOrders()');}});}async function initCoinResults(_0x274337){const _0x3689a7=_0x28f3c2;_0x274337?logger[_0x3689a7(0x1cc)](_0x3689a7(0x193)+_0x274337):logger[_0x3689a7(0x1cc)](_0x3689a7(0x208)),config['portfolio'][_0x3689a7(0x266)](_0x445908=>{const _0x1ed6b1=_0x3689a7;if(!_0x445908[_0x1ed6b1(0x236)]&&_0x445908['coin']!=config['basecoin']){const _0x2b1b7c=currentCoins[_0x1ed6b1(0x1f9)](_0x38ae86=>_0x38ae86[_0x1ed6b1(0x1fd)]==_0x445908[_0x1ed6b1(0x1fd)]),_0xbe23cb=gTicker[noslash(_0x445908[_0x1ed6b1(0x13d)])];let _0x3fb8bf=_0x2b1b7c?_0x2b1b7c['number']:null,_0x3c75b8=_0x445908[_0x1ed6b1(0x23f)]?0x1/_0xbe23cb:_0xbe23cb,_0x4b6ea2;config['liquidity'][_0x1ed6b1(0x266)](_0x4853f9=>{const _0x362a9b=_0x1ed6b1;!_0x4b6ea2&&(_0x4b6ea2=_0x4853f9['changes']['find'](_0x5c1ec2=>_0x5c1ec2[_0x362a9b(0x1fd)]==_0x445908[_0x362a9b(0x1fd)]),_0x4b6ea2&&(_0x3fb8bf=_0x4b6ea2[_0x362a9b(0x1eb)],_0x3c75b8=_0x4b6ea2[_0x362a9b(0x1e0)]));});let _0x522a1c=dbCoinResults[_0x1ed6b1(0x243)](_0x1ed6b1(0x1f5))['find']({'coin':_0x445908['coin']})[_0x1ed6b1(0x211)]();if(!_0x522a1c){const _0x23fefe={'coin':_0x445908[_0x1ed6b1(0x1fd)],'number':_0x3fb8bf,'breakeven':_0x3c75b8,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x1ed6b1(0x243)](_0x1ed6b1(0x1f5))['push'](_0x23fefe)[_0x1ed6b1(0x234)]();}else{if(_0x274337&&_0x445908[_0x1ed6b1(0x1fd)]==_0x274337){const _0x2e2d61={'coin':_0x445908[_0x1ed6b1(0x1fd)],'number':_0x3fb8bf,'breakeven':_0x3c75b8,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x1ed6b1(0x243)](_0x1ed6b1(0x1f5))[_0x1ed6b1(0x1f9)]({'coin':_0x445908[_0x1ed6b1(0x1fd)]})[_0x1ed6b1(0x26a)](_0x2e2d61)[_0x1ed6b1(0x234)]();}}}});}async function placeOrder(_0xfff737){const _0x396850=_0x28f3c2,_0x43ff2f=config[_0x396850(0x270)]==_0x396850(0x1d0)?_0x396850(0x1d0):_0x396850(0x265);if(lockOrders==ORDERS[_0x396850(0x1e9)]&&!coolingDown){setLockOrders(ORDERS[_0x396850(0x19d)]);while(transactionDetectionOngoing){await sleep(0x64);}logger[_0x396850(0x1cc)]('Placing\x20order\x20for:\x20'+_0xfff737[_0x396850(0xe7)](_0x4319be=>_0x4319be[_0x396850(0x1fd)])[_0x396850(0xe4)](',\x20')),lastCoinsToBalance='',allOrdersPlaced=![],validateOrdersState=_0x396850(0x22a);let _0x363967=![];lastOrders=[];const _0x9a990=config[_0x396850(0x264)];for(const _0x4265ca of _0xfff737){let _0x43d5da,_0x46ef2b,_0x5b4d6d,_0x7495c,_0x4e33ef,_0x5958a7=_0x4265ca[_0x396850(0x13d)];logger[_0x396850(0x1cc)](_0x396850(0x13a)+_0x4265ca[_0x396850(0x1fd)]+'\x20'+_0x4265ca[_0x396850(0x1eb)]+'\x20'+_0x4265ca['last']+'\x20'+_0x4265ca[_0x396850(0x25c)]+'%\x20'+_0x4265ca['target']+'%\x20'+(0x64*_0x4265ca['delta'])[_0x396850(0x274)](0x2)+_0x396850(0x241)+_0x9a990['toFixed'](0x2)+'%)');const _0x2a9f78=currentCoins['find'](_0x45c764=>_0x45c764[_0x396850(0x1fd)]==_0x4265ca[_0x396850(0x1fd)]);_0x2a9f78&&(_0x2a9f78['prevnumber']=_0x4265ca[_0x396850(0x1eb)]);try{const _0xe24e42=await exchange[_0x396850(0x130)](_0x5958a7);_0x43d5da=_0x4265ca[_0x396850(0x23f)]?0x1/_0x4265ca[_0x396850(0x10d)]:_0x4265ca[_0x396850(0x10d)],_0x46ef2b=_0xe24e42[_0x396850(0x200)],_0x5b4d6d=_0xe24e42[_0x396850(0x164)];_0x4265ca[_0x396850(0x23f)]?(_0x7495c=_0x4265ca[_0x396850(0x1f7)]==_0x396850(0x29f)?_0x396850(0x1fe):_0x396850(0x29f),_0x4e33ef=Math[_0x396850(0x17a)](_0x4265ca[_0x396850(0x258)])/_0x43d5da):(_0x7495c=_0x4265ca[_0x396850(0x1f7)],_0x4e33ef=Math[_0x396850(0x17a)](_0x4265ca[_0x396850(0x258)]));_0x43ff2f==_0x396850(0x265)&&(config[_0x396850(0x270)]=='limit-high'&&(_0x43d5da=_0x7495c==_0x396850(0x29f)?_0x46ef2b:_0x5b4d6d),config['ordertype']==_0x396850(0x227)&&(_0x43d5da=_0x7495c==_0x396850(0x29f)?_0x5b4d6d:_0x46ef2b));_0x4e33ef=formatResult(_0x4e33ef,0x8),_0x43d5da=formatResult(_0x43d5da,0x8);const _0x1b2547=_0x7495c==_0x396850(0x1fe)?config[_0x396850(0x260)]?String[_0x396850(0x1ef)]('0x'+config[_0x396850(0x260)])+'\x20':'':config[_0x396850(0x177)]?String[_0x396850(0x1ef)]('0x'+config['emojibuy'])+'\x20':'',_0x2efaf4=_0x43ff2f=='market'?_0x396850(0xf6):config['ordertype']=='limit-high'?'Limit\x20(high-margin)':_0x396850(0x11c),_0x50c4e2=(Math['floor'](Math['random']()*0x35a4e900)+0x5f5e100)[_0x396850(0x24f)]();lastOrders[_0x396850(0x237)]({'customId':_0x50c4e2,'symbol':_0x5958a7,'coin':_0x4265ca[_0x396850(0x1fd)],'amount':_0x4e33ef,'price':_0x43d5da,'side':_0x7495c,'reverse':_0x4265ca[_0x396850(0x23f)],'filled':0x0});let _0xd64067;_0x43ff2f==_0x396850(0x1d0)?_0x7495c==_0x396850(0x29f)&&[_0x396850(0x29d),_0x396850(0x165),_0x396850(0x12f),_0x396850(0x240),_0x396850(0x221)][_0x396850(0x26f)](config['exchange'])?_0xd64067=await exchange[_0x396850(0x15c)](_0x5958a7,_0x43ff2f,_0x7495c,_0x4e33ef,_0x43d5da):_0xd64067=await exchange[_0x396850(0x15c)](_0x5958a7,_0x43ff2f,_0x7495c,_0x4e33ef,undefined):_0xd64067=await exchange['createOrder'](_0x5958a7,_0x43ff2f,_0x7495c,_0x4e33ef,_0x43d5da);const _0x2c28fa=lastOrders[_0x396850(0x1d5)]-0x1;if(_0x2c28fa>=0x0&&lastOrders[_0x2c28fa][_0x396850(0x198)]==_0x50c4e2){lastOrders[_0x2c28fa][_0x396850(0x1b3)]=_0xd64067['id'];if(_0xd64067['amount'])lastOrders[_0x2c28fa][_0x396850(0x1a0)]=_0xd64067[_0x396850(0x1a0)];if(_0xd64067[_0x396850(0x1e0)])lastOrders[_0x2c28fa]['price']=_0xd64067[_0x396850(0x1e0)];lastOrders[_0x2c28fa]['fee']=_0xd64067[_0x396850(0x174)];}if(_0xd64067['amount'])_0x4e33ef=_0xd64067['amount'];if(_0xd64067[_0x396850(0x1e0)])_0x43d5da=_0xd64067['price'];if(_0x43ff2f==_0x396850(0x1d0))logHistory(_0x396850(0x166),''+_0x1b2547+_0x2efaf4+'\x20order:\x20'+_0x5958a7+'\x20'+_0x7495c+'\x20#'+formatResult(_0x4e33ef,0x8)+'\x20@'+formatResult(_0x43d5da,0x8));else logHistory(_0x396850(0x166),''+_0x1b2547+_0x2efaf4+_0x396850(0x256)+_0x5958a7+'\x20'+_0x7495c+'\x20#'+formatResult(_0x4e33ef,0x8)+'\x20@'+formatResult(_0x43d5da,0x8));logger['debug'](_0x396850(0x108)+_0xd64067['id']+_0x396850(0x16c)+_0x50c4e2);if(config[_0x396850(0x171)]!=0x0){let _0x187fd9=null;if(cooldownTracker[_0x396850(0x1d5)]==config['cooldown']-0x1)_0x187fd9=cooldownTracker['shift']();const _0x38305e=getTimeStamp();cooldownTracker[_0x396850(0x237)](_0x38305e);if(_0x187fd9){const _0x5e4e2d=fns['differenceInSeconds'](new Date(_0x38305e),new Date(_0x187fd9));if(_0x5e4e2d<cooldownInterval){logHistory(_0x396850(0x179),_0x396850(0x1ce)+config[_0x396850(0x171)]+'\x20orders\x20in\x20less\x20than\x20'+cooldownInterval/0x3c+_0x396850(0x16d)+cooldownPeriod/(0xe10*0x3e8)+_0x396850(0x1cf)),coolingDown=!![];break;}}}}catch(_0x41361e){if(_0x41361e[_0x396850(0x24f)]()[_0x396850(0x26f)](_0x396850(0x1df)))lastOrders=lastOrders[_0x396850(0x205)](_0x34d3b4=>_0x34d3b4[_0x396850(0x13d)]!=_0x5958a7),logHistory(_0x396850(0x179),_0x396850(0x1fb)+_0x5958a7),_0x363967=!![];else{if(_0x41361e['toString']()[_0x396850(0x26f)](_0x396850(0xed)))lastOrders=lastOrders[_0x396850(0x205)](_0x30308a=>_0x30308a[_0x396850(0x13d)]!=_0x5958a7),logHistory(_0x396850(0x179),'Order\x20amount\x20is\x20invalid:\x20'+_0x5958a7),_0x363967=!![];else{if(_0x41361e[_0x396850(0x24f)]()[_0x396850(0x26f)]('InvalidOrder'))lastOrders=lastOrders['filter'](_0x1898a4=>_0x1898a4[_0x396850(0x13d)]!=_0x5958a7),logHistory('error',_0x396850(0x1f6)+_0x5958a7),logger[_0x396850(0x1cc)](_0x41361e),_0x363967=!![];else _0x41361e[_0x396850(0x24f)]()[_0x396850(0x26f)](_0x396850(0x136))?(lastOrders=lastOrders[_0x396850(0x205)](_0x509fd1=>_0x509fd1[_0x396850(0x13d)]!=_0x5958a7),logHistory(_0x396850(0x179),'Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x5958a7),_0x363967=!![]):(lastOrders=lastOrders[_0x396850(0x205)](_0x56081a=>_0x56081a['symbol']!=_0x5958a7),await handleError(_0x41361e,_0x396850(0x126),_0x5958a7));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders['length']>0x0){const _0x145332=config[_0x396850(0x270)]=='market'?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x1e44cd=_0x396850;validateOrders(_0x1e44cd(0x1d2));},_0x145332);}else unlockOrders();_0x363967&&config[_0x396850(0xfa)]&&(logHistory('error',_0x396850(0x26c)+pauseBotMsg),await pauseBot(pauseBotInterval)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory('success',_0x396850(0x21b)));}else{if(coolingDown)!config[_0x396850(0xfa)]&&logHistory(_0x396850(0x179),_0x396850(0x22b));else lockOrders!=ORDERS['UNLOCKED']&&(!config[_0x396850(0xfa)]&&(config[_0x396850(0x270)]==_0x396850(0x1d0)?logHistory(_0x396850(0x179),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated'):logHistory(_0x396850(0x179),_0x396850(0x27f))));}}function persistOpenOrders(_0x4c32fc){const _0x1794e6=_0x28f3c2,_0x2c9d9f={...config,'openOrders':_0x4c32fc};let _0x201bf7=dbConfig[_0x1794e6(0x243)](_0x1794e6(0x1b5))[_0x1794e6(0x1f9)]({'botID':botID})['value']();_0x201bf7&&dbConfig[_0x1794e6(0x243)]('bot')[_0x1794e6(0x1f9)]({'botID':botID})[_0x1794e6(0x26a)](_0x2c9d9f)[_0x1794e6(0x234)]();}function restoreOrders(){const _0x1b1ab9=_0x28f3c2;let _0x1cb0da;config['openOrders']&&allOpenOrders[_0x1b1ab9(0x266)](_0x42e42b=>{const _0x1e3014=_0x1b1ab9,_0x571f03=config[_0x1e3014(0x10a)]['find'](_0x385d3f=>_0x385d3f[_0x1e3014(0x1b3)]==_0x42e42b['id']);_0x571f03&&(lastOrders[_0x1e3014(0x237)](_0x571f03),_0x1cb0da=_0x42e42b[_0x1e3014(0x14c)]);});if(lastOrders[_0x1b1ab9(0x1d5)]>0x0){setLockOrders(ORDERS['LOCKED']),validateOrdersState=_0x1b1ab9(0x1d1),allOrdersPlaced=!![];const _0x1c72eb=new Date()['getTime'](),_0x1002f8=config[_0x1b1ab9(0x270)]==_0x1b1ab9(0x1d0)?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(_0x1cb0da+_0x1002f8>_0x1c72eb){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x538501=_0x1b1ab9;validateOrders(_0x538501(0x1d2));},_0x1cb0da+_0x1002f8-_0x1c72eb);}else validateOrders('final');}}async function sendMetricsTelegram(){const _0x37b65f=_0x28f3c2;if(!coinsLoaded){process[_0x37b65f(0x21d)]({'telegrammsg':_0x37b65f(0x286)},_0x37ee39=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x1a14cc='';if(config[_0x37b65f(0x24a)])_0x1a14cc=_0x37b65f(0x181)+config[_0x37b65f(0x1c7)]+_0x37b65f(0x246);else _0x1a14cc=_0x37b65f(0x133)+botID+_0x37b65f(0x246);const _0x2a6799=config[_0x37b65f(0x29e)],_0x347cd6=config[_0x37b65f(0x1db)],_0x51b250=getKPIs(_0x37b65f(0x29e)),_0x5df1aa=getKPIs('fiat',_0x347cd6),_0x15789b=getKPIs(_0x37b65f(0x22c)),_0x34b8f0=getKPIs(_0x37b65f(0x257),_0x347cd6),_0x2f007d=getKPIs(_0x37b65f(0x1ea)),_0x489d39=getKPIs(_0x37b65f(0x1ae),_0x347cd6);_0x2a6799[_0x37b65f(0x26f)](_0x347cd6)?(_0x1a14cc+=_0x37b65f(0x280),_0x1a14cc+=_0x37b65f(0xf3)+_0x2a6799+':\x20'+_0x51b250[_0x37b65f(0x211)]+'\x20('+_0x51b250['change']+_0x37b65f(0x157),_0x1a14cc+='Net\x20'+_0x2a6799+':\x20'+_0x15789b['value']+'\x20('+_0x15789b['change']+_0x37b65f(0x157),_0x1a14cc+=_0x37b65f(0x173)+_0x2a6799+':\x20'+_0x2f007d[_0x37b65f(0x211)]+'\x20('+_0x2f007d['change']+_0x37b65f(0x157),_0x1a14cc+=_0x37b65f(0x249)):(_0x1a14cc+=_0x37b65f(0x280),_0x1a14cc+=_0x37b65f(0xf3)+_0x2a6799+':\x20'+_0x51b250[_0x37b65f(0x211)]+'\x20('+_0x51b250[_0x37b65f(0x146)]+'%)\x0a',_0x1a14cc+=_0x37b65f(0xf3)+_0x347cd6+':\x20'+_0x5df1aa[_0x37b65f(0x211)]+'\x20('+_0x5df1aa[_0x37b65f(0x146)]+_0x37b65f(0x157),_0x1a14cc+=_0x37b65f(0x138)+_0x2a6799+':\x20'+_0x15789b[_0x37b65f(0x211)]+'\x20('+_0x15789b[_0x37b65f(0x146)]+'%)\x0a',_0x1a14cc+=_0x37b65f(0x138)+_0x347cd6+':\x20'+_0x34b8f0[_0x37b65f(0x211)]+'\x20('+_0x34b8f0[_0x37b65f(0x146)]+'%)\x0a',_0x1a14cc+=_0x37b65f(0x173)+_0x2a6799+':\x20'+_0x2f007d[_0x37b65f(0x211)]+'\x20('+_0x2f007d[_0x37b65f(0x146)]+_0x37b65f(0x157),_0x1a14cc+=_0x37b65f(0x173)+_0x347cd6+':\x20'+_0x489d39[_0x37b65f(0x211)]+'\x20('+_0x489d39['change']+_0x37b65f(0x157),_0x1a14cc+=_0x37b65f(0x249)),process[_0x37b65f(0x21d)]({'telegrammsg':_0x1a14cc},_0x467eb2=>{});}async function sendPortfolioTelegram(){const _0x4097c6=_0x28f3c2;if(!coinsLoaded||!currentCoins[0x0]['distribution']){process['send']({'telegrammsg':_0x4097c6(0x286)},_0x4f0553=>{});return;}let _0x1232de='';if(config[_0x4097c6(0x24a)])_0x1232de=_0x4097c6(0x181)+config[_0x4097c6(0x1c7)]+_0x4097c6(0x13e);else _0x1232de=_0x4097c6(0x133)+botID+'\x20portfolio:</b>\x20\x0a\x0a';_0x1232de+=_0x4097c6(0x280),_0x1232de+='-------------------------------\x0a',_0x1232de+=_0x4097c6(0x1a8),_0x1232de+='-------------------------------\x0a',currentCoins['forEach'](_0x19f19e=>{const _0x262dd7=_0x4097c6;_0x1232de+=_0x19f19e[_0x262dd7(0x1fd)]['padEnd'](0x7)+'|\x20'+formatPad(_0x19f19e['distribution'],0x2,0x6)+'|\x20'+formatPad(_0x19f19e['target'],0x2,0x6)+'|\x20'+formatPad(_0x19f19e['delta']*0x64,0x2,0x6)+'\x0a';}),_0x1232de+=_0x4097c6(0x249),process['send']({'telegrammsg':_0x1232de},_0x2a8992=>{});}function formatPad(_0x405bc7,_0x8da3bf,_0x1f1b0c){const _0x44c00d=_0x28f3c2,_0x185e01=formatResultString(_0x405bc7,_0x8da3bf);return _0x185e01?_0x185e01['padStart'](_0x1f1b0c):''[_0x44c00d(0x1ed)](_0x1f1b0c);}function logHistory(_0x5081cc,_0x2629dd,_0x567c48=''){const _0x4fa66a=_0x28f3c2;logger['full'](''+_0x2629dd);let _0x2bbc35={'time':getTimeStamp(),'type':_0x5081cc,'event':_0x2629dd};dbLogs[_0x4fa66a(0x243)](_0x4fa66a(0x196))[_0x4fa66a(0x237)](_0x2bbc35)[_0x4fa66a(0x234)]();if(_0x567c48=='')_0x567c48=_0x2629dd;proxyEmit(_0x4fa66a(0x1a2),{'log':_0x2bbc35,'summary':_0x567c48}),process[_0x4fa66a(0x21d)]({'telegram':{..._0x2bbc35,'botname':config[_0x4fa66a(0x1c7)],'showname':config[_0x4fa66a(0x24a)]}},_0x33c6ee=>{});}function emitHistory(_0x42e597={}){const _0x47f16d=_0x28f3c2;Object[_0x47f16d(0x1a1)](_0x42e597)[_0x47f16d(0x1d5)]==0x0&&(_0x42e597={'type':[_0x47f16d(0x166),_0x47f16d(0x1a2)],'event':'','page':0x1});if(_0x42e597[_0x47f16d(0x139)]['includes'](_0x47f16d(0x1a2)))_0x42e597[_0x47f16d(0x139)]['splice'](_0x42e597[_0x47f16d(0x139)]['indexOf'](_0x47f16d(0x1a2)),0x1,_0x47f16d(0x179),'warning','success');if(dbLogs[_0x47f16d(0x27b)](_0x47f16d(0x196))[_0x47f16d(0x211)]()){let _0x6e382b=dbLogs[_0x47f16d(0x243)](_0x47f16d(0x196))[_0x47f16d(0x205)](_0x28a54e=>{const _0x4429ac=_0x47f16d;if(_0x42e597[_0x4429ac(0x139)][_0x4429ac(0x1d5)]==0x0)return![];else return _0x42e597[_0x4429ac(0x139)][_0x4429ac(0x26f)](_0x28a54e[_0x4429ac(0x139)]);})[_0x47f16d(0x205)](_0x12e118=>{const _0x45b9da=_0x47f16d;if(_0x42e597[_0x45b9da(0x1a2)]=='')return!![];else return _0x12e118[_0x45b9da(0x1a2)]['toLowerCase']()[_0x45b9da(0x26f)](_0x42e597['event'][_0x45b9da(0x28b)]());})[_0x47f16d(0x1c1)](_0x47f16d(0x215)),_0x1e107b=_0x6e382b[_0x47f16d(0x211)]()[_0x47f16d(0x1d5)];_0x6e382b=_0x6e382b[_0x47f16d(0x23f)]()[_0x47f16d(0x201)]((_0x42e597[_0x47f16d(0x226)]-0x1)*logPageSize,_0x42e597['page']*logPageSize-0x1)[_0x47f16d(0x23f)]()[_0x47f16d(0x211)](),proxyEmit(_0x47f16d(0x1b9),{'logs':_0x6e382b,'total':_0x1e107b});}else proxyEmit(_0x47f16d(0x1b9),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x540876){const _0x5cee29=_0x28f3c2;if(dbLogs['has']('logs')[_0x5cee29(0x211)]()){const _0xe3127d=dbLogs[_0x5cee29(0x243)](_0x5cee29(0x196))[_0x5cee29(0x1c1)](_0x5cee29(0x215))['filter'](_0x5abc5e=>{const _0x2a2a70=_0x5cee29;return _0x5abc5e['type']==_0x2a2a70(0x166);})[_0x5cee29(0x211)]();dbLogs[_0x5cee29(0x243)](_0x5cee29(0x196))['remove']()['write'](),dbLogs['get'](_0x5cee29(0x196))['assign'](_0xe3127d)[_0x5cee29(0x234)](),emitHistory(_0x540876);}}async function pauseBot(_0x4c38f4=pauseBotIntervalShort,_0x4c5222,_0x1eec0e,_0x29bde9=![]){const _0xc52ca5=_0x28f3c2,_0x2edde0=new Date()['getTime']();if(!lastErrorShown||_0x2edde0-lastErrorShown>=_0x4c38f4){lastErrorShown=_0x2edde0;if(!lastBotPause)lastBotPause=_0x2edde0,consecutivePauses=0x1;else{if(_0x2edde0-lastBotPause-_0x4c38f4<0x5a*0x3e8){consecutivePauses++;if(consecutivePauses>maxPauseRetries){if(_0x29bde9){logHistory('error',_0x4c5222+_0xc52ca5(0x145)),await killBot();return;}else logHistory(_0xc52ca5(0x179),_0x4c5222+pauseBotMsg),_0x4c38f4=pauseBotInterval;}}else consecutivePauses=0x1;lastBotPause=_0x2edde0;}_0x1eec0e?logger[_0xc52ca5(0x1cc)]('('+consecutivePauses+')\x20'+_0x4c5222+_0xc52ca5(0x101),_0x1eec0e):logger[_0xc52ca5(0x1cc)]('('+consecutivePauses+')\x20'+_0x4c5222);if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);await sleep(_0x4c38f4),botPaused=![],_0x4c38f4==pauseBotIntervalShort?resumeBot(!![]):resumeBot(![]);}}}async function killBot(){const _0x176e51=_0x28f3c2;botPaused=!![],await sleep(0x3e8),process[_0x176e51(0x21d)]({'stop':_0x176e51(0x103)},_0x271fd0=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x41d025,_0x1bd9ad,_0x564bc0=![]){const _0x466280=_0x28f3c2;if(botPaused)return;let _0x5b26bb;const _0x2e9d6f=config[_0x466280(0x292)]||'Exchange';if(_0x1bd9ad)logger[_0x466280(0x1cc)](_0x466280(0x120)+_0x1bd9ad);const _0x10fab5=()=>{const _0x293bc8=_0x466280;loading[_0x293bc8(0x179)]=!![],emitLoadingProgress();};if(_0x41d025['toString']()[_0x466280(0x26f)](_0x466280(0x1cb)))logHistory(_0x466280(0x179),_0x2e9d6f+'\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)'),_0x10fab5();else{if(_0x41d025[_0x466280(0x24f)]()[_0x466280(0x26f)](_0x466280(0x25b)))logHistory('error',_0x2e9d6f+_0x466280(0x1ff)),_0x10fab5();else{if(_0x41d025[_0x466280(0x24f)]()['includes'](_0x466280(0x1f1)))config[_0x466280(0x268)]?_0x5b26bb=_0x2e9d6f+_0x466280(0x17c):_0x5b26bb=_0x2e9d6f+_0x466280(0x220),logHistory('error',_0x5b26bb+'\x20(see:\x20hodlerhacks.com/fix/1)'),_0x10fab5();else{if(_0x41d025[_0x466280(0x24f)]()['includes']('PermissionDenied'))logHistory('error',_0x2e9d6f+_0x466280(0x100)),_0x10fab5();else{if(!_0x564bc0)await handleError(_0x41d025,null);}}}}}async function handleError(_0x2900fb,_0x779bf3,_0x7a63e1=''){const _0x2f346a=_0x28f3c2;if(botPaused)return;let _0x4c42f2;const _0x27ba5a=config[_0x2f346a(0x292)]||_0x2f346a(0x1e3);if(_0x779bf3)logger[_0x2f346a(0x1cc)](_0x2f346a(0x120)+_0x779bf3);if(_0x2900fb[_0x2f346a(0x24f)]()[_0x2f346a(0x26f)](_0x2f346a(0x1b7)))_0x4c42f2=_0x27ba5a+_0x2f346a(0x113),await pauseBot(undefined,_0x4c42f2,_0x2900fb);else{if(_0x2900fb['toString']()[_0x2f346a(0x26f)](_0x2f346a(0x288)))_0x4c42f2=_0x27ba5a+_0x2f346a(0x21e),await pauseBot(undefined,_0x4c42f2,_0x2900fb);else{if(_0x2900fb['toString']()[_0x2f346a(0x26f)](_0x2f346a(0x127))||_0x2900fb[_0x2f346a(0x24f)]()['includes'](_0x2f346a(0x188)))_0x4c42f2=_0x27ba5a+_0x2f346a(0x1c8),await pauseBot(undefined,_0x4c42f2,_0x2900fb[_0x2f346a(0x24f)]());else{if(_0x2900fb[_0x2f346a(0x24f)]()[_0x2f346a(0x26f)](_0x2f346a(0x298)))_0x4c42f2=_0x27ba5a+_0x2f346a(0x2a2),await pauseBot(undefined,_0x4c42f2,_0x2900fb['toString']());else{if(_0x2900fb[_0x2f346a(0x24f)]()[_0x2f346a(0x26f)](_0x2f346a(0xe2)))_0x4c42f2=_0x27ba5a+'\x20closed\x20the\x20connection\x20(see:\x20hodlerhacks.com/fix/5)',await pauseBot(undefined,_0x4c42f2,_0x2900fb[_0x2f346a(0x24f)]());else{if(_0x2900fb[_0x2f346a(0x24f)]()['toLowerCase']()[_0x2f346a(0x26f)](_0x2f346a(0x14c))||_0x2900fb[_0x2f346a(0x24f)]()[_0x2f346a(0x28b)]()[_0x2f346a(0x26f)]('request-time'))_0x4c42f2=_0x2f346a(0xf7),await pauseBot(undefined,_0x4c42f2,_0x2900fb['toString']());else{if(_0x2900fb[_0x2f346a(0x24f)]()['includes'](_0x2f346a(0x1ad)))_0x4c42f2=_0x27ba5a+_0x2f346a(0x199),await pauseBot(undefined,_0x4c42f2,_0x2900fb[_0x2f346a(0x24f)]());else{if(_0x2900fb instanceof ccxt['NetworkError'])_0x4c42f2=_0x27ba5a+_0x2f346a(0x297)+_0x2900fb[_0x2f346a(0x24f)](),logger[_0x2f346a(0x1cc)]('Network\x20error\x20details:',_0x2900fb),await pauseBot(undefined,_0x4c42f2,_0x2900fb);else{if(_0x2900fb[_0x2f346a(0x24f)]()['includes']('API-key\x20format\x20invalid'))logHistory(_0x2f346a(0x179),_0x27ba5a+_0x2f346a(0x13c)),logHistory('error',_0x2f346a(0x13b)),await killBot();else{if(_0x2900fb[_0x2f346a(0x24f)]()[_0x2f346a(0x26f)](_0x2f346a(0x25b)))logHistory(_0x2f346a(0x179),_0x27ba5a+'\x20API\x20secret\x20is\x20invalid'),logHistory('error','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)'),await killBot();else{if(_0x2900fb[_0x2f346a(0x24f)]()['includes'](_0x2f346a(0x1f1))&&_0x2900fb[_0x2f346a(0x24f)]()[_0x2f346a(0x26f)](_0x2f346a(0xf2)))_0x4c42f2=_0x27ba5a+_0x2f346a(0x1c5),await pauseBot(undefined,_0x4c42f2,_0x2900fb,!![]);else{if(_0x2900fb[_0x2f346a(0x24f)]()[_0x2f346a(0x26f)](_0x2f346a(0x1f1)))config['apiPassword']?_0x4c42f2=_0x27ba5a+_0x2f346a(0x17c):_0x4c42f2=_0x27ba5a+_0x2f346a(0x220),logHistory(_0x2f346a(0x179),_0x4c42f2),logHistory('error','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)'),await killBot();else{if(_0x2900fb[_0x2f346a(0x24f)]()[_0x2f346a(0x26f)](_0x2f346a(0x160)))logHistory(_0x2f346a(0x179),_0x27ba5a+_0x2f346a(0x214)),logHistory(_0x2f346a(0x179),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)'),await killBot();else{if(_0x2900fb['toString']()[_0x2f346a(0x26f)](_0x2f346a(0x119)))logHistory(_0x2f346a(0x179),'Insufficient\x20funds\x20to\x20execute\x20order:\x20'+_0x7a63e1),logger[_0x2f346a(0x1cc)](_0x2f346a(0x1d3),_0x2900fb);else{if(_0x2900fb instanceof ccxt[_0x2f346a(0x107)]){_0x4c42f2=_0x27ba5a+'\x20exchange\x20error:\x20'+_0x2900fb['toString']();if(_0x7a63e1)_0x4c42f2+='\x0aSymbol(s):\x20'+_0x7a63e1;await pauseBot(undefined,_0x4c42f2,_0x2900fb);}else{_0x4c42f2='Unknown\x20error:\x20'+_0x2900fb['toString']();if(_0x7a63e1)_0x4c42f2+=_0x2f346a(0xe0)+_0x7a63e1;await pauseBot(undefined,_0x4c42f2);}}}}}}}}}}}}}}}}function decryptRSA(_0x5b45c7,_0x2808ba){const _0x27f2f6=_0x28f3c2,_0x56265a=forge[_0x27f2f6(0x273)][_0x27f2f6(0x294)](_0x5b45c7),_0xe3c6f8=_0x56265a[_0x27f2f6(0x159)](forge['util'][_0x27f2f6(0x124)](_0x2808ba),'RSA-OAEP',{'md':forge['md'][_0x27f2f6(0xee)][_0x27f2f6(0x1c9)](),'mgf1':{'md':forge['md'][_0x27f2f6(0xee)]['create']()}});return _0xe3c6f8;}async function withRetry(_0x48a066,_0x3f5f08){const _0x428197=_0x28f3c2;let _0xe8a9e8=![],_0x1999e8=0x0,_0x440e53,_0x41fd61;while(_0x1999e8<maxRetries){try{_0x440e53=await _0x3f5f08();break;}catch(_0x275957){_0x41fd61=_0x275957,!_0xe8a9e8?(_0xe8a9e8=!![],logger[_0x428197(0x1cc)](_0x428197(0x1d6)+_0x48a066+':',_0x275957[_0x428197(0x24f)]())):await sleep(retryInterval);}_0x1999e8++;}if(_0x1999e8==0x0)return _0x440e53;if(_0x1999e8>=maxRetries)throw _0x41fd61;else return logger['debug']('RETRY\x20-\x20Problem\x20resolved\x20after\x20'+_0x1999e8+_0x428197(0x231)),_0x440e53;}function formatResult(_0x4ffb05,_0x33d689){const _0x5e86bb=_0x28f3c2;return parseFloat(_0x4ffb05[_0x5e86bb(0x274)](_0x33d689));}function formatResultTruncate(_0xb60813,_0x34c6a7){let _0x26ac78=formatResultString(_0xb60813,0xa),_0x2a1296=_0x26ac78['indexOf']('.');return _0x2a1296!=-0x1&&(_0x26ac78=_0x26ac78['slice'](0x0,_0x2a1296+_0x34c6a7+0x1)),Number(_0x26ac78);}function formatResultString(_0x2f7188,_0x241b2c){const _0x5df3bd=_0x28f3c2;let _0x342218;if(!(''+_0x2f7188)['includes']('e'))_0x342218=+(Math[_0x5df3bd(0x15f)](_0x2f7188+'e+'+_0x241b2c)+'e-'+_0x241b2c);else{let _0x5f3b7f=(''+_0x2f7188)[_0x5df3bd(0x140)]('e'),_0x48d53c='';+_0x5f3b7f[0x1]+_0x241b2c>0x0&&(_0x48d53c='+'),_0x342218=+(Math[_0x5df3bd(0x15f)](+_0x5f3b7f[0x0]+'e'+_0x48d53c+(+_0x5f3b7f[0x1]+_0x241b2c))+'e-'+_0x241b2c);}return Number(_0x342218)['toFixed'](_0x241b2c);}function getServerTime(){const _0x4efad4=_0x28f3c2,_0x4a1710=new Date();return _0x4a1710[_0x4efad4(0x1e5)]()+'/'+(_0x4a1710['getMonth']()+0x1)[_0x4efad4(0x24f)]()['padStart'](0x2,'0')+'/'+_0x4a1710[_0x4efad4(0xe3)]()[_0x4efad4(0x24f)]()['padStart'](0x2,'0')+'\x20'+_0x4a1710['getHours']()[_0x4efad4(0x24f)]()['padStart'](0x2,'0')+':'+_0x4a1710[_0x4efad4(0x276)]()[_0x4efad4(0x24f)]()['padStart'](0x2,'0')+':'+_0x4a1710[_0x4efad4(0x14a)]()[_0x4efad4(0x24f)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x588770=_0x28f3c2,_0x22c607=shiftedTime();return _0x22c607[_0x588770(0x1e5)]()+'/'+(_0x22c607[_0x588770(0x1dc)]()+0x1)[_0x588770(0x24f)]()[_0x588770(0x1ed)](0x2,'0')+'/'+_0x22c607[_0x588770(0xe3)]()[_0x588770(0x24f)]()[_0x588770(0x1ed)](0x2,'0')+'\x20'+_0x22c607[_0x588770(0x1b0)]()[_0x588770(0x24f)]()[_0x588770(0x1ed)](0x2,'0')+':'+_0x22c607[_0x588770(0x276)]()[_0x588770(0x24f)]()['padStart'](0x2,'0')+':'+_0x22c607['getSeconds']()[_0x588770(0x24f)]()[_0x588770(0x1ed)](0x2,'0');}function getDate(){const _0x4f587c=_0x28f3c2,_0x524b21=shiftedTime();return _0x524b21['getFullYear']()+'/'+(_0x524b21['getMonth']()+0x1)[_0x4f587c(0x24f)]()[_0x4f587c(0x1ed)](0x2,'0')+'/'+_0x524b21[_0x4f587c(0xe3)]()[_0x4f587c(0x24f)]()[_0x4f587c(0x1ed)](0x2,'0');}function getHour(){const _0x2ea834=_0x28f3c2,_0x195664=shiftedTime();return _0x195664[_0x2ea834(0x1b0)]()[_0x2ea834(0x24f)]()['padStart'](0x2,'0');}function sleep(_0x201b3c){return new Promise(_0x493e61=>setTimeout(_0x493e61,_0x201b3c));}function shiftedTime(){const _0x25354b=_0x28f3c2,_0x4bc068=new Date();let _0x7e6e19=_0x4bc068;if(config&&config['timeshift']!==0x0)_0x7e6e19=fns['add'](_0x4bc068,{'hours':config[_0x25354b(0x16a)]});return _0x7e6e19;}function timer(_0x2a98c7){const _0x444e2d=_0x28f3c2,_0x3fb0e2=new Date();!lasttime?console[_0x444e2d(0x20a)](getTimeStamp()+_0x444e2d(0x252),_0x2a98c7,_0x3fb0e2):console[_0x444e2d(0x20a)](getTimeStamp()+_0x444e2d(0x252),_0x2a98c7,(_0x3fb0e2-lasttime)/0x3e8),lasttime=_0x3fb0e2;}