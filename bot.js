const _0x315a22=_0x2100;(function(_0x47c5e4,_0x458fa2){const _0x2db30c=_0x2100,_0x29536=_0x47c5e4();while(!![]){try{const _0x4f3c72=parseInt(_0x2db30c(0x212))/0x1+parseInt(_0x2db30c(0x30d))/0x2*(parseInt(_0x2db30c(0x242))/0x3)+parseInt(_0x2db30c(0x1df))/0x4+parseInt(_0x2db30c(0x226))/0x5*(-parseInt(_0x2db30c(0x282))/0x6)+parseInt(_0x2db30c(0x1c8))/0x7*(parseInt(_0x2db30c(0x173))/0x8)+parseInt(_0x2db30c(0x138))/0x9*(-parseInt(_0x2db30c(0x2cf))/0xa)+-parseInt(_0x2db30c(0x179))/0xb;if(_0x4f3c72===_0x458fa2)break;else _0x29536['push'](_0x29536['shift']());}catch(_0x2482e3){_0x29536['push'](_0x29536['shift']());}}}(_0x2c2b,0xd9b25));const _0x30e877=function(){let _0x298992=!![];return function(_0x48dc94,_0x1354e8){const _0x4a19ac=_0x298992?function(){const _0x7458dc=_0x2100;if(_0x1354e8){const _0x2c10d3=_0x1354e8[_0x7458dc(0x252)](_0x48dc94,arguments);return _0x1354e8=null,_0x2c10d3;}}:function(){};return _0x298992=![],_0x4a19ac;};}(),_0x16020b=_0x30e877(this,function(){const _0x48692d=_0x2100;return _0x16020b[_0x48692d(0x1e5)]()[_0x48692d(0x246)](_0x48692d(0x229))[_0x48692d(0x1e5)]()[_0x48692d(0x172)](_0x16020b)['search'](_0x48692d(0x229));});_0x16020b();'use strict';const ccxt=require(_0x315a22(0x1cf)),low=require(_0x315a22(0x1e7)),FileSync=require(_0x315a22(0x2cb)),fs=require('fs'),fns=require(_0x315a22(0x1a4)),forge=require(_0x315a22(0x28a)),util=require('util'),argv=require(_0x315a22(0x2b0))(process[_0x315a22(0x153)][_0x315a22(0x13d)](0x2))[_0x315a22(0x153)],path=require(_0x315a22(0x2af)),axios=require(_0x315a22(0x250));let exchange,gTicker={},gChange={};const usdBasecoins=[_0x315a22(0x174),_0x315a22(0x25a),'TUSD','USDT',_0x315a22(0x26f),_0x315a22(0x2df)],excludedExchanges=[_0x315a22(0x304)],debugging=argv['d']||![];let pnlGenerationNeeded=argv['r']||![],config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x315a22(0x1d3)]({'LOCKED':0x0,'UNLOCKING':0x1,'UNLOCKED':0x2});let lockOrders=ORDERS[_0x315a22(0x21a)],validateOrdersState,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotIntervalShort=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0x315a22(0x2d3)+pauseBotInterval/0xea60+_0x315a22(0x2cd),maxPauseRetries=0x6,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,watchTransactionsInterval=0x3c*0x3e8,schedulerInterval=0x3c*0x3c*0x3e8,retryInterval=0x3e8,maxRetries=0x5,logPageSize=0x14,defaultFee=0.003;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidOrdersInitialTimeout,pidOrdersTimeout,botPaused=![],transactionDetectionOngoing=![],lastCoinsToBalance='',exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x5dc,balanceUpdateRetries=0x5;let enableFiatToggle;const serverversion=require('./version.json')[_0x315a22(0x1e0)],environment=require(_0x315a22(0x14f))[_0x315a22(0x221)]||_0x315a22(0x131),botID=process[_0x315a22(0x153)][0x2]||'001',pattern=/^[0-9]{3}$/;!pattern[_0x315a22(0x269)](botID)&&(console[_0x315a22(0x1ce)](_0x315a22(0x1ff)+botID+_0x315a22(0x22c)),killBot());const userID=process[_0x315a22(0x153)][0x3]||'',configpath=userID?_0x315a22(0x1cc)+userID+'/':_0x315a22(0x1cc),logspath=userID?'./logs/'+userID+'/':_0x315a22(0x299),loggerfile=fs[_0x315a22(0x2fa)](logspath+_0x315a22(0x170),{'flags':'a'});!fs[_0x315a22(0x278)](configpath)&&fs[_0x315a22(0x149)](configpath);!fs[_0x315a22(0x278)](logspath)&&fs[_0x315a22(0x149)](logspath);const configfile=configpath+'bot-'+botID+'-config.json',logfile=configpath+_0x315a22(0x196)+botID+'-events.json',performancefile=configpath+'bot-'+botID+_0x315a22(0x266),coinresultsfile=configpath+_0x315a22(0x196)+botID+_0x315a22(0x28d),settingsfile=configpath+_0x315a22(0x268),securefile=configpath+_0x315a22(0x1ea),configbackuppath=configpath+'/backup/',adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x315a22(0x18e)]({'logs':[],'version':serverversion})[_0x315a22(0x194)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x315a22(0x18e)]({'data':[],'version':serverversion})[_0x315a22(0x194)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x315a22(0x18e)]({'bot':[],'version':serverversion})[_0x315a22(0x194)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x315a22(0x18e)]({'coins':{},'version':serverversion})[_0x315a22(0x194)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0,settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x11d37b=>{const _0x5a8581=_0x315a22;console[_0x5a8581(0x1ce)](_0x11d37b);},'simple':_0x1e0d96=>{const _0x20f889=_0x315a22;console['log'](_0x1e0d96),loggerfile[_0x20f889(0x194)](util[_0x20f889(0x180)](_0x1e0d96)+'\x0a');},'full':async(_0x20d000,_0x58de8a='')=>{const _0x3a6892=_0x315a22;let _0xaab2c2;if(config[_0x3a6892(0x2e8)])_0xaab2c2=getTimeStamp()+':\x20'+config[_0x3a6892(0x19f)]+_0x3a6892(0x151)+_0x20d000;else _0xaab2c2=getTimeStamp()+_0x3a6892(0x133)+botID+_0x3a6892(0x151)+_0x20d000;console[_0x3a6892(0x1ce)](_0xaab2c2),loggerfile[_0x3a6892(0x194)](util[_0x3a6892(0x180)](_0xaab2c2)+'\x0a'),_0x58de8a&&(console[_0x3a6892(0x1ce)](_0x58de8a),loggerfile[_0x3a6892(0x194)](util[_0x3a6892(0x180)](_0x58de8a)+'\x0a'));},'debug':async(_0x443292,_0x337692='')=>{const _0x333a20=_0x315a22;let _0x34ac28;if(config[_0x333a20(0x2e8)])_0x34ac28=getTimeStamp()+':\x20'+config['botname']+_0x333a20(0x2c9)+_0x443292;else _0x34ac28=getTimeStamp()+':\x20Bot\x20'+botID+_0x333a20(0x2c9)+_0x443292;if(debugging)console[_0x333a20(0x1ce)](_0x34ac28);loggerfile['write'](util[_0x333a20(0x180)](_0x34ac28)+'\x0a');if(_0x337692){if(debugging)console[_0x333a20(0x1ce)](_0x337692);loggerfile[_0x333a20(0x194)](util[_0x333a20(0x180)](_0x337692)+'\x0a');}}};process['on']('uncaughtException',function(_0x4b487d){const _0x494d8d=_0x315a22;handleError(_0x4b487d[_0x494d8d(0x2dd)],_0x494d8d(0x2aa));});settings[_0x315a22(0x1b3)]!=config[_0x315a22(0x1b3)]&&updateTimeshift(settings[_0x315a22(0x1b3)]);settings[_0x315a22(0x1e6)]!=config[_0x315a22(0x1e6)]&&updateOnepagemode(settings['onepagemode']);(settings['marketcapApi']&&!config['marketcapApi']||!settings[_0x315a22(0x25b)]&&config[_0x315a22(0x25b)])&&updateMarketcapApi(settings['marketcapApi']);process[_0x315a22(0x193)]({'started':_0x315a22(0x1ca)},_0x51d2b8=>{}),initializeProcessListeners();function proxyEmit(_0x2a4ae4,_0x50aab5=null){const _0x688e2b=_0x315a22;process[_0x688e2b(0x193)]({'function':_0x2a4ae4,'args':_0x50aab5},_0xc0c165=>{});}function initializeProcessListeners(){const _0x1ed195=_0x315a22;process['on'](_0x1ed195(0x2cc),_0x1486fc=>{const _0x493bf9=_0x1ed195;switch(Object[_0x493bf9(0x222)](_0x1486fc)[0x0]){case _0x493bf9(0x1b3):_0x1486fc[_0x493bf9(0x1b3)]!=undefined&&(settings[_0x493bf9(0x1b3)]=_0x1486fc[_0x493bf9(0x1b3)],updateTimeshift(settings['timeshift']));break;case _0x493bf9(0x1e6):_0x1486fc[_0x493bf9(0x1e6)]!=undefined&&(settings[_0x493bf9(0x1e6)]=_0x1486fc[_0x493bf9(0x1e6)],updateOnepagemode(settings['onepagemode']));break;case _0x493bf9(0x25b):_0x1486fc['marketcapApi']!=undefined&&(settings[_0x493bf9(0x25b)]=_0x1486fc['marketcapApi'],updateMarketcapApi(settings['marketcapApi']));break;case _0x493bf9(0x19c):_0x1486fc[_0x493bf9(0x19c)]!=undefined&&(bots=JSON[_0x493bf9(0x19a)](_0x1486fc[_0x493bf9(0x19c)]),proxyEmit(_0x493bf9(0x19c),bots));break;case _0x493bf9(0x161):switch(_0x1486fc[_0x493bf9(0x161)]){case'initclient':initclient();break;case'toggleBotMode':toggleBotMode();break;case _0x493bf9(0x24c):emitHistory(_0x1486fc[_0x493bf9(0x1f4)]);break;case _0x493bf9(0x1be):deleteHistoryAlerts(_0x1486fc[_0x493bf9(0x1f4)]);break;case'getPortfolio':getPortfolio(_0x1486fc['args']);break;case _0x493bf9(0x21b):storeConfiguration(_0x1486fc[_0x493bf9(0x1f4)]);break;case'storeHeadless':storeHeadless(_0x1486fc[_0x493bf9(0x1f4)]);break;case _0x493bf9(0x1bd):storeFiat(_0x1486fc[_0x493bf9(0x1f4)]);break;case'resetHistory':resetHistory();break;case'getStartingBalances':getStartingBalances(getNormalizedPerformance());break;case _0x493bf9(0x281):placeOrder(_0x1486fc['args']);break;case _0x493bf9(0x2b4):cancelLoading();break;case _0x493bf9(0x15f):showConfig();break;case _0x493bf9(0x285):sendMetricsTelegram();break;case _0x493bf9(0x2b3):sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x47afd3=![]){const _0xf29986=_0x315a22;logger[_0xf29986(0x2a4)](_0xf29986(0x20f)+(_0x47afd3?_0xf29986(0x223):_0xf29986(0x2a8))+_0xf29986(0x21f)+config['exchange']);if(pidBalances)clearTimeout(pidBalances);if(!_0x47afd3)lastCoinsToBalance='';coinsLoaded=![];if(config[_0xf29986(0x2dc)]!=''&&config[_0xf29986(0x2dc)]!='***'){loadingProgress=0x0;if(_0x47afd3){await initExchange();const _0x14de9f=await testAPI();if(!_0x14de9f)return;await loadSymbols(),loadingProgress=0x1,setStableCoins(),proxyEmit(_0xf29986(0x1ed),emittedConfiguration()),initialPerformanceStored=![];}const _0x5ebb52=await getCoins();[currentCoins,currentCoinsAll]=_0x5ebb52,setBlockTransactionDetection(![]),startScheduler(),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger['debug'](_0xf29986(0x2d8)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0xf29986(0x1ad)]==0x0&&allOpenOrders[_0xf29986(0x1ad)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(pnlGenerationNeeded)await generatePnL();}}async function resumeBot(_0x36bd29=![]){const _0x18da46=_0x315a22;logger[_0x18da46(0x2a4)]('Resuming\x20('+(_0x36bd29?'quick':_0x18da46(0x2a5))+_0x18da46(0x273)+config[_0x18da46(0x1b2)]);if(pidBalances)clearTimeout(pidBalances);if(_0x36bd29){getBalances();return;}coinsLoaded=![];if(config[_0x18da46(0x2dc)]!=''&&config[_0x18da46(0x2dc)]!=_0x18da46(0x1f7)){loadingProgress=0x1;const _0x4aa44c=await getCoins();[currentCoins,currentCoinsAll]=_0x4aa44c,setBlockTransactionDetection(![]),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x18da46(0x2a4)](_0x18da46(0x2d8)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x18da46(0x1ad)]==0x0&&allOpenOrders[_0x18da46(0x1ad)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();}}async function getMarketCap(_0x342cfa){const _0xde249=_0x315a22;let _0x54b008=![];if(_0x342cfa)_0x54b008=!![];const _0x563b62=_0x54b008?_0x342cfa:currentCoins,_0x41e29e=_0x563b62[_0xde249(0x184)](_0xe1934d=>_0xe1934d[_0xde249(0x17e)]);if(!config[_0xde249(0x25b)]||!_0x54b008&&!config['marketcapEnabled']||_0x41e29e[_0xde249(0x1ad)]==0x0)return;let _0x3a7d58=null;try{_0x3a7d58=await axios['get'](_0xde249(0x253),{'headers':{'X-CMC_PRO_API_KEY':settings['marketcapApi']},'params':{'symbol':_0x41e29e[_0xde249(0x1e5)]()}});}catch(_0x51f82c){_0x3a7d58=null,_0x51f82c['toString']()[_0xde249(0x24a)]('status\x20code\x20401')?(config[_0xde249(0x25b)]=![],updateConfig(),proxyEmit(_0xde249(0x1ed),emittedConfiguration()),logHistory('error',_0xde249(0x231))):(logHistory('error',_0xde249(0x1c3)+schedulerInterval/(0x3c*0x3e8)+_0xde249(0x2cd)),logger[_0xde249(0x2a4)](_0xde249(0x2d5),_0x51f82c[_0xde249(0x1e5)]()+_0xde249(0x2ba)+_0x51f82c[_0xde249(0x2e9)]));}let _0x3f4e70=!![];if(_0x3a7d58){let _0x3633f5=0x0;const _0x1370c4=_0x3a7d58[_0xde249(0x2c5)];_0x41e29e[_0xde249(0x24f)](_0xad2824=>{const _0x1a5e44=_0xde249;if(_0x1370c4[_0x1a5e44(0x2c5)][_0xad2824][0x0]&&_0x1370c4[_0x1a5e44(0x2c5)][_0xad2824][0x0][_0x1a5e44(0x305)][_0x1a5e44(0x174)]['market_cap'])_0x3633f5+=_0x1370c4[_0x1a5e44(0x2c5)][_0xad2824][0x0][_0x1a5e44(0x305)][_0x1a5e44(0x174)][_0x1a5e44(0x256)];else{if(![_0x1a5e44(0x2e1),_0x1a5e44(0x174)][_0x1a5e44(0x24a)](_0xad2824)){if(_0x54b008)logHistory(_0x1a5e44(0x2e7),_0x1a5e44(0x241)+_0xad2824+_0x1a5e44(0x2f1));else{const _0x30367f=config[_0x1a5e44(0x145)]['find'](_0x208912=>_0x208912['coin']==_0xad2824);_0x30367f&&!_0x30367f['excluded']&&_0x30367f[_0x1a5e44(0x26e)]==-0x1&&(_0x3f4e70=![],logHistory('error',_0x1a5e44(0x30b)),logger[_0x1a5e44(0x2a4)](_0x1a5e44(0x241)+_0xad2824));}}}});if(!_0x3f4e70)return;_0x41e29e[_0xde249(0x24f)](_0x5c730e=>{const _0x248299=_0xde249,_0x439523=_0x1370c4[_0x248299(0x2c5)][_0x5c730e][0x0]?_0x1370c4['data'][_0x5c730e][0x0][_0x248299(0x305)][_0x248299(0x174)][_0x248299(0x256)]:0x0;if(_0x54b008){const _0x4116fd=_0x342cfa[_0x248299(0x2e0)](_0x5bdb02=>_0x5bdb02[_0x248299(0x17e)]==_0x5c730e);_0x4116fd&&(_0x4116fd[_0x248299(0x303)]=_0x439523);}else{const _0x271855=currentCoins[_0x248299(0x2e0)](_0x271e94=>_0x271e94['coin']==_0x5c730e);_0x271855&&(_0x271855['marketcap']=_0x439523);const _0x1ce228=currentCoinsAll[_0x248299(0x2e0)](_0x27fcb1=>_0x27fcb1[_0x248299(0x17e)]==_0x5c730e);_0x1ce228&&(_0x1ce228[_0x248299(0x303)]=_0x439523);}}),!_0x54b008&&updateTargetDistribution();}}function updateTargetDistribution(){const _0x4fd887=_0x315a22,_0x318bb7=0x2;let _0x3de39f=0x0,_0x37f191=0x0,_0x21eaad=0x0,_0x332558=0x0,_0x3146d1=0x0;config['portfolio'][_0x4fd887(0x24f)](_0x3c3039=>{const _0x46bc56=_0x4fd887;if(!_0x3c3039[_0x46bc56(0x218)]){_0x21eaad++,_0x3de39f+=_0x3c3039[_0x46bc56(0x26e)];if(_0x3c3039[_0x46bc56(0x26e)]===-0x1){_0x3de39f++;const _0x10d532=currentCoinsAll[_0x46bc56(0x2e0)](_0x105109=>_0x105109['coin']==_0x3c3039[_0x46bc56(0x17e)]);_0x10d532&&(_0x332558+=_0x10d532[_0x46bc56(0x303)],_0x3146d1+=Math[_0x46bc56(0x213)](_0x10d532[_0x46bc56(0x303)]));}if(_0x3c3039['slider']!==-0x1)_0x37f191++;}});let _0x49ed94;const _0xb57b26=0x64-_0x3de39f,_0x360956=_0x21eaad-_0x37f191;_0x49ed94=_0x360956===0x0?_0x3de39f:Math[_0x4fd887(0x15b)](0x64,_0x3de39f),config['portfolio'][_0x4fd887(0x24f)](_0x171f41=>{const _0x40fbcb=_0x4fd887,_0x53395c=currentCoinsAll[_0x40fbcb(0x2e0)](_0x1f757f=>_0x1f757f['coin']==_0x171f41['coin']);_0x53395c&&(_0x171f41['marketcap']=_0x53395c[_0x40fbcb(0x303)]);if(!_0x171f41[_0x40fbcb(0x218)]){if(_0x49ed94<=0x64){if(_0x171f41[_0x40fbcb(0x26e)]===-0x1){if(_0x332558!==0x0&&config['marketcapEnabled']){if(_0x53395c){if(config[_0x40fbcb(0x1db)]=='marketcap')_0x171f41[_0x40fbcb(0x309)]=(_0xb57b26/(_0x332558/_0x53395c['marketcap']))[_0x40fbcb(0x30c)](_0x318bb7);else config[_0x40fbcb(0x1db)]=='marketcapsqrt'&&(_0x171f41[_0x40fbcb(0x309)]=(_0xb57b26/(_0x3146d1/Math[_0x40fbcb(0x213)](_0x53395c['marketcap'])))[_0x40fbcb(0x30c)](_0x318bb7));}}}}}}),updateConfig();}function updateConfig(){const _0x3512e4=_0x315a22;let _0x823eab=dbConfig['get'](_0x3512e4(0x2f7))[_0x3512e4(0x2e0)]({'botID':botID})['value']();_0x823eab&&dbConfig['get'](_0x3512e4(0x2f7))['find']({'botID':botID})[_0x3512e4(0x2d6)](config)[_0x3512e4(0x194)]();}function logMemory(){const _0x5a4126=_0x315a22;if(environment!=_0x5a4126(0x19b))return;const _0x51591e=process['memoryUsage']()[_0x5a4126(0x17f)]/0x400/0x400;logger[_0x5a4126(0x2a4)](_0x5a4126(0x2b6)+process[_0x5a4126(0x2a1)]+_0x5a4126(0x1b6)+formatResult(_0x51591e,0x1)+_0x5a4126(0x30e));}async function startScheduler(){const _0x40d48b=shiftedTime()['getHours']();getMarketCap(),loadSymbols(),_0x40d48b==0x1&&logMemory(),await sleep(schedulerInterval),startScheduler();}async function restartBot(_0x4d7a8d=![]){const _0x3c22a7=_0x315a22;logger[_0x3c22a7(0x2a4)]('Initiating\x20bot\x20restart');if(!_0x4d7a8d)while(lockOrders!=ORDERS[_0x3c22a7(0x21a)]||coolingDown){await sleep(0x3e8);}process[_0x3c22a7(0x193)]({'stop':_0x3c22a7(0x276)},_0x3f76f2=>{});}async function initExchange(_0x307845=config[_0x315a22(0x1b2)],_0x32c513=config['apiKey'],_0x23aa60=config[_0x315a22(0x236)],_0x22ad42=config[_0x315a22(0x22b)],_0x2e2b04=config[_0x315a22(0x306)]){const _0x45a422=_0x315a22;if(exchange){logger[_0x45a422(0x2a4)](_0x45a422(0x245));return;}logger[_0x45a422(0x2a4)](_0x45a422(0x25d));!supportedExchanges()[_0x45a422(0x24a)](_0x307845)&&(logHistory(_0x45a422(0x2e7),_0x45a422(0x206)+_0x307845+_0x45a422(0x2b7)),killBot());const _0x39ea94=ccxt[_0x45a422(0x156)][_0x307845['toLowerCase']()];exchange=new _0x39ea94({'apiKey':_0x32c513,'secret':_0x23aa60,'options':{'defaultType':_0x45a422(0x243)}});if(_0x22ad42)exchange['password']=_0x22ad42;if(exchange[_0x45a422(0x13c)]['sandbox'])exchange[_0x45a422(0x26d)](_0x2e2b04);}function updateExchange(_0x2a083e,_0x3bbbdb,_0x2a4925=null){const _0x227d06=_0x315a22;exchange[_0x227d06(0x2dc)]=_0x2a083e,exchange[_0x227d06(0x2fc)]=_0x3bbbdb,exchange[_0x227d06(0x2fe)]=_0x2a4925,logger['debug'](_0x227d06(0x2b2));}function setStableCoins(){const _0x3730fa=_0x315a22;let _0x34f8ba=config[_0x3730fa(0x1f8)]==_0x3730fa(0x264)?_0x3730fa(0x264):config['basecoin']==_0x3730fa(0x2a6)?_0x3730fa(0x2a6):_0x3730fa(0x192),_0x5da753=allSymbols[_0x3730fa(0x24a)](_0x34f8ba+_0x3730fa(0x2b9))?_0x3730fa(0x174):allSymbols[_0x3730fa(0x24a)](_0x34f8ba+_0x3730fa(0x27c))?_0x3730fa(0x1da):'EUR',_0x58338e=allSymbols[_0x3730fa(0x24a)](_0x34f8ba+_0x3730fa(0x2e6))?_0x3730fa(0x2e1):_0x5da753;enableFiatToggle=!![],_0x5da753=='EUR'&&(enableFiatToggle=![],storeFiat(_0x3730fa(0x2e1))),_0x58338e!=_0x3730fa(0x2e1)&&(enableFiatToggle=![],storeFiat('USD')),stablecoins={'eur':{'coin':''+_0x34f8ba+_0x58338e,'symbol':_0x34f8ba+'/'+_0x58338e},'usd':{'coin':''+_0x34f8ba+_0x5da753,'symbol':_0x34f8ba+'/'+_0x5da753}};}async function initwsCcxt(){const _0x4360f8=_0x315a22;initCycle++;const _0x43fc9d=initCycle;let _0x3e0a13=[];config['portfolio']['forEach'](_0x5cf5a8=>{const _0x137073=_0x2100;if(!_0x5cf5a8[_0x137073(0x218)]&&_0x5cf5a8['coin']!=config['basecoin'])_0x3e0a13[_0x137073(0x298)](_0x5cf5a8[_0x137073(0x224)]);});if(!_0x3e0a13[_0x4360f8(0x24a)](stablecoins[_0x4360f8(0x254)][_0x4360f8(0x224)]))_0x3e0a13[_0x4360f8(0x298)](stablecoins[_0x4360f8(0x254)]['symbol']);if(!_0x3e0a13[_0x4360f8(0x24a)](stablecoins[_0x4360f8(0x301)][_0x4360f8(0x224)]))_0x3e0a13[_0x4360f8(0x298)](stablecoins['usd'][_0x4360f8(0x224)]);loadCoins(_0x3e0a13),_0x3e0a13=validateSymbols(_0x3e0a13);const _0x1507eb=async _0x256921=>{const _0x45d85c=_0x4360f8;let _0x86c18a;try{const _0x25926a=await getTickers(_0x256921);Object[_0x45d85c(0x234)](_0x25926a)['forEach'](_0x34f91b=>{const _0x2c4b08=_0x45d85c;_0x86c18a=_0x34f91b[0x1]['symbol'],gTicker[noslash(_0x86c18a)]=_0x34f91b[0x1][_0x2c4b08(0x12e)],gChange[_0x86c18a]=_0x34f91b[0x1][_0x2c4b08(0x2be)];});}catch(_0x53cf14){await handleError(_0x53cf14,_0x45d85c(0x1e3),_0x86c18a);}},_0x5e9a96=async _0x3c7923=>{const _0x58ff76=_0x4360f8;while(initCycle==_0x43fc9d){if(!botPaused)try{const _0x4b3c8b=await exchange[_0x58ff76(0x14a)](_0x3c7923);gTicker[noslash(_0x4b3c8b[0x0][_0x58ff76(0x224)])]=_0x4b3c8b[0x0][_0x58ff76(0x164)];}catch(_0x45fdff){if(!exchangeStopped)await handleError(_0x45fdff,_0x58ff76(0x181),_0x3c7923);}else await sleep(0x64);}},_0x2c0261=async _0x22b6f8=>{const _0x4217e9=_0x4360f8;while(initCycle==_0x43fc9d){if(!botPaused)try{const _0x2ff693=await exchange['watchTradesForSymbols'](_0x22b6f8),_0x317adf=_0x2ff693[_0x4217e9(0x26c)]();gTicker[noslash(_0x317adf[_0x4217e9(0x224)])]=_0x317adf[_0x4217e9(0x164)];}catch(_0x1ca781){if(!exchangeStopped)await handleError(_0x1ca781,_0x4217e9(0x13e),_0x22b6f8[_0x4217e9(0x1e5)]());}else await sleep(0x64);}},_0x41511c=async _0x2b8413=>{const _0x470187=_0x4360f8;while(initCycle==_0x43fc9d){if(!botPaused){let _0x258a8c;try{await sleep(0x3c*0x3e8);const _0xdf0d95=await getTickers(_0x2b8413);Object[_0x470187(0x234)](_0xdf0d95)[_0x470187(0x24f)](_0x46c4a0=>{const _0x3c0068=_0x470187;_0x258a8c=_0x46c4a0[0x1][_0x3c0068(0x224)],gChange[_0x258a8c]=_0x46c4a0[0x1]['percentage'];});}catch(_0x51803b){if(!exchangeStopped)await handleError(_0x51803b,_0x470187(0x1d5),_0x258a8c);}}else await sleep(0x64);}},_0x1a2da6=async _0xd7ada6=>{const _0x35cad9=_0x4360f8;while(initCycle==_0x43fc9d){if(!botPaused)try{const _0x231c00=await exchange[_0x35cad9(0x17d)](_0xd7ada6);initCycle==_0x43fc9d&&_0x231c00[_0x35cad9(0x24f)](_0x270556=>{updateNumberCoinsCcxt(_0x270556);});}catch(_0x25f777){if(!exchangeStopped)await handleError(_0x25f777,_0x35cad9(0x2d2));}else await sleep(0x64);}};_0x1507eb(_0x3e0a13),_0x41511c(_0x3e0a13),exchange[_0x4360f8(0x13c)]['watchTradesForSymbols']&&!(config[_0x4360f8(0x1b2)]==_0x4360f8(0x29a)&&_0x3e0a13[_0x4360f8(0x1ad)]>0xa)?_0x2c0261(_0x3e0a13):_0x3e0a13[_0x4360f8(0x24f)](_0x3261da=>{_0x5e9a96(_0x3261da);}),_0x3e0a13[_0x4360f8(0x24f)](_0x22d582=>{_0x1a2da6(_0x22d582);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x54c230){const _0x4becb8=_0x315a22;let _0x315768={};try{if(config['exchange']!=_0x4becb8(0x187))_0x315768=await exchange['fetchTickers'](_0x54c230);else for(const _0x23b215 of _0x54c230){const _0x48a01f=await exchange[_0x4becb8(0x1ae)](_0x23b215);_0x315768[_0x23b215]=_0x48a01f;}return _0x315768;}catch(_0x301c30){throw _0x301c30;}}function setBlockTransactionDetection(_0x309853){const _0x43441d=_0x315a22;blockTransactionDetection=_0x309853,logger[_0x43441d(0x2a4)](_0x43441d(0x214)+blockTransactionDetection);}async function detectLiquidityChange(_0x2bdc45=0x0){const _0x3e49ea=_0x315a22;transactionDetectionOngoing=!![];try{const _0x112457=await getCoins(_0x2bdc45),[_0x247b15,_0x9b2f68]=_0x112457;let _0x5baa4b=[];currentCoins[_0x3e49ea(0x24f)](_0x2d34d1=>{const _0x3ea1d5=_0x3e49ea,_0x3312dc=_0x247b15['find'](_0x324c73=>_0x324c73['coin']==_0x2d34d1[_0x3ea1d5(0x17e)]);if(_0x3312dc){if(_0x2d34d1[_0x3ea1d5(0x2b5)]!=_0x3312dc[_0x3ea1d5(0x2b5)]){let _0x16afbd;if(_0x2d34d1['coin']!=config[_0x3ea1d5(0x1f8)]){const _0x58f326=gTicker[noslash(_0x2d34d1[_0x3ea1d5(0x224)])];_0x16afbd=_0x2d34d1[_0x3ea1d5(0x24e)]?0x1/_0x58f326:_0x58f326;}else _0x16afbd=0x1;_0x5baa4b[_0x3ea1d5(0x298)]({'coin':_0x2d34d1[_0x3ea1d5(0x17e)],'symbol':_0x2d34d1['symbol'],'price':_0x16afbd,'number':Number(formatResult(_0x3312dc[_0x3ea1d5(0x2b5)]-_0x2d34d1[_0x3ea1d5(0x2b5)],0x8)),'basecoinvalue':_0x16afbd*(_0x3312dc[_0x3ea1d5(0x2b5)]-_0x2d34d1[_0x3ea1d5(0x2b5)])});}}});if(_0x5baa4b[_0x3e49ea(0x1ad)]>0x0&&!blockTransactionDetection){for(const _0x133968 of _0x5baa4b){if(config['autoliquidity']){logger['debug'](_0x3e49ea(0x1c0)+_0x133968[_0x3e49ea(0x1d7)]+_0x3e49ea(0x284)+lastFees[_0x3e49ea(0x2f9)]);if(lastFees[_0x3e49ea(0x2f9)]==0x0||Math[_0x3e49ea(0x15a)](_0x133968[_0x3e49ea(0x1d7)])>lastFees[_0x3e49ea(0x2f9)]*0x3){if(config[_0x3e49ea(0x14e)]==_0x3e49ea(0x1b9)){delete _0x133968[_0x3e49ea(0x224)],delete _0x133968[_0x3e49ea(0x1d7)];let _0x8a0390=[],_0x464fb9=[...config[_0x3e49ea(0x1bc)]]||[],_0x38fe1e=config[_0x3e49ea(0x1bc)];_0x464fb9[_0x3e49ea(0x25e)]((_0x60e860,_0x551ae3)=>_0x60e860[_0x3e49ea(0x2ca)]>_0x551ae3[_0x3e49ea(0x2ca)]?-0x1:_0x551ae3['date']>_0x60e860[_0x3e49ea(0x2ca)]?0x1:0x0);const _0xe9da6e=getDate();if(_0x464fb9[0x0]){const _0xa11c6c=fns['parse'](_0x464fb9[0x0][_0x3e49ea(0x2ca)],'yyyy/MM/dd',new Date()),_0x100b53=fns['parse'](_0xe9da6e,_0x3e49ea(0x143),new Date());if(fns[_0x3e49ea(0x1a8)](_0xa11c6c,_0x100b53)){_0x8a0390=_0x464fb9[0x0][_0x3e49ea(0x1b8)];const _0x2dbd5d=_0x8a0390['find'](_0x5ef994=>_0x5ef994['coin']==_0x133968['coin']);_0x2dbd5d?(_0x2dbd5d[_0x3e49ea(0x2b5)]+=_0x133968[_0x3e49ea(0x2b5)],_0x2dbd5d[_0x3e49ea(0x2b5)]==0x0&&(_0x8a0390=_0x8a0390[_0x3e49ea(0x2c2)](_0x29d3f7=>{const _0x1ac7e7=_0x3e49ea;return _0x29d3f7[_0x1ac7e7(0x17e)]!=_0x133968[_0x1ac7e7(0x17e)];}))):_0x8a0390[_0x3e49ea(0x298)](_0x133968);const _0x1a7c89=_0x38fe1e[_0x3e49ea(0x2e0)](_0xa3c568=>_0xa3c568['date']==_0xe9da6e);_0x1a7c89[_0x3e49ea(0x1b8)]=_0x8a0390;}else _0x38fe1e[_0x3e49ea(0x298)]({'date':_0xe9da6e,'changes':[_0x133968]});}const _0x701a37=_0x38fe1e['find'](_0x5cb77e=>_0x5cb77e[_0x3e49ea(0x2ca)]==_0xe9da6e);if(_0x701a37){let _0x44158f=!![];_0x701a37[_0x3e49ea(0x1b8)][_0x3e49ea(0x24f)](_0x57aa02=>{if(_0x57aa02['number']!=0x0)_0x44158f=![];}),_0x44158f&&(_0x38fe1e=_0x38fe1e[_0x3e49ea(0x2c2)](_0x10bbc0=>{return _0x10bbc0['date']!=_0xe9da6e;}));}let _0x104db8=dbConfig[_0x3e49ea(0x263)](_0x3e49ea(0x2f7))[_0x3e49ea(0x2e0)]({'botID':botID})['value']();_0x104db8&&(dbConfig[_0x3e49ea(0x263)](_0x3e49ea(0x2f7))['find']({'botID':botID})[_0x3e49ea(0x2d6)]({'liquidity':_0x38fe1e})[_0x3e49ea(0x194)](),config['liquidity']=_0x38fe1e);logHistory(_0x3e49ea(0x248),_0x3e49ea(0x27a)+Math[_0x3e49ea(0x15a)](_0x133968[_0x3e49ea(0x2b5)])+'\x20'+_0x133968[_0x3e49ea(0x17e)]+'\x20'+(_0x133968['number']>0x0?'added':_0x3e49ea(0x188))+_0x3e49ea(0x2e4)),proxyEmit('configuration',emittedConfiguration());const _0x322ae3=getNormalizedPerformance();emitPerformance(_0x322ae3),getStartingBalances(_0x322ae3),logger[_0x3e49ea(0x2a4)](_0x3e49ea(0x23b));}else config[_0x3e49ea(0x14e)]==_0x3e49ea(0x160)&&(config[_0x3e49ea(0x182)]?(await storeHeadless({'headless':![]}),logHistory(_0x3e49ea(0x248),_0x3e49ea(0x27a)+Math[_0x3e49ea(0x15a)](_0x133968[_0x3e49ea(0x2b5)])+'\x20'+_0x133968[_0x3e49ea(0x17e)]+'\x20'+(_0x133968['number']>0x0?_0x3e49ea(0x227):_0x3e49ea(0x188))+_0x3e49ea(0x2db))):logger[_0x3e49ea(0x2a4)](_0x3e49ea(0x27a)+Math['abs'](_0x133968[_0x3e49ea(0x2b5)])+'\x20'+_0x133968[_0x3e49ea(0x17e)]+'\x20'+(_0x133968[_0x3e49ea(0x2b5)]>0x0?'added':'removed')+_0x3e49ea(0x255)));}else logger[_0x3e49ea(0x2a4)](_0x3e49ea(0x257)+Math['abs'](_0x133968[_0x3e49ea(0x2b5)])+'\x20'+_0x133968[_0x3e49ea(0x17e)]+'\x20'+(_0x133968[_0x3e49ea(0x2b5)]>0x0?_0x3e49ea(0x227):'removed'));}else logger['debug'](_0x3e49ea(0x27a)+Math['abs'](_0x133968[_0x3e49ea(0x2b5)])+'\x20'+_0x133968['coin']+'\x20'+(_0x133968[_0x3e49ea(0x2b5)]>0x0?_0x3e49ea(0x227):_0x3e49ea(0x188))+_0x3e49ea(0x1a9));}currentCoins=_0x247b15,currentCoinsAll=_0x9b2f68;}}catch(_0x212a68){if(!exchangeStopped)await handleError(_0x212a68,_0x3e49ea(0x191));}transactionDetectionOngoing=![];}async function watchTransactions(){await sleep(0x14*0x3e8);while(!![]){!botPaused&&!blockTransactionDetection&&coinsLoaded?(detectLiquidityChange(),await sleep(watchTransactionsInterval)):await sleep(0x3e8);}}async function loadSymbols(){const _0x147a4f=_0x315a22;try{markets=await exchange[_0x147a4f(0x30a)](!![]),allSymbols=[],Object[_0x147a4f(0x234)](markets)[_0x147a4f(0x24f)](_0x2aa830=>{const _0x355a81=_0x147a4f;_0x2aa830[0x1][_0x355a81(0x1de)]&&_0x2aa830[0x1]['spot']&&allSymbols[_0x355a81(0x298)](_0x2aa830[0x0]);});}catch(_0x22fbd7){markets?logger[_0x147a4f(0x2a4)](_0x147a4f(0x154)+_0x22fbd7['toString']()):(loading[_0x147a4f(0x200)]=!![],_0x22fbd7['toString']()[_0x147a4f(0x183)]()[_0x147a4f(0x24a)]('timestamp')||_0x22fbd7[_0x147a4f(0x1e5)]()[_0x147a4f(0x183)]()['includes'](_0x147a4f(0x13b))?(logHistory(_0x147a4f(0x2e7),'Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)'),loading['error']='timestamp-issue'):handleErrorNoStop(_0x22fbd7,_0x147a4f(0x2e3),!![]),logHistory('error','Failed\x20to\x20load\x20market\x20data\x20-\x20bot\x20not\x20started'),logHistory(_0x147a4f(0x2e7),_0x147a4f(0x17c)+loadCoinsRetryInterval/0xea60+_0x147a4f(0x185)),logger[_0x147a4f(0x2a4)](_0x147a4f(0x2d5),_0x22fbd7),emitLoadingProgress(),botPaused=!![],await sleep(loadCoinsRetryInterval),restartBot());}}function validateSymbols(_0x27acef){let _0xe111d=[];return _0x27acef['forEach'](_0xcaf998=>{const _0x5cd9df=_0x2100;!allSymbols[_0x5cd9df(0x24a)](_0xcaf998)?(logHistory('error',_0x5cd9df(0x175)+_0xcaf998+_0x5cd9df(0x20c)),loading[_0x5cd9df(0x23a)]=!![],emitLoadingProgress()):_0xe111d[_0x5cd9df(0x298)](_0xcaf998);}),_0xe111d;}async function initclient(){const _0x11e763=_0x315a22;proxyEmit(_0x11e763(0x1ed),emittedConfiguration()),proxyEmit(_0x11e763(0x265),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x11e763(0x237),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x4d371f=getNormalizedPerformance();emitPerformance(_0x4d371f),getStartingBalances(_0x4d371f);}async function toggleBotMode(){const _0x8ce3a7=_0x315a22;let _0x2f6e05=dbConfig[_0x8ce3a7(0x263)](_0x8ce3a7(0x2f7))[_0x8ce3a7(0x2e0)]({'botID':botID})[_0x8ce3a7(0x1fd)]();if(_0x2f6e05){const _0x3b0511=!_0x2f6e05[_0x8ce3a7(0x182)];dbConfig['get'](_0x8ce3a7(0x2f7))[_0x8ce3a7(0x2e0)]({'botID':botID})['assign']({'headless':_0x3b0511})['write'](),config[_0x8ce3a7(0x182)]=_0x3b0511,proxyEmit(_0x8ce3a7(0x1ed),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x3a2853=_0x315a22;process[_0x3a2853(0x193)]({'updatebotmanager':!![]},_0x37d470=>{}),logger[_0x3a2853(0x2a4)](_0x3a2853(0x167)+config[_0x3a2853(0x182)]);}async function loadCoins(_0x1987cf){const _0x359313=_0x315a22;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x11be5c,_0x3ebf43=0x0,_0x2d5590=0x0;_0x1987cf['forEach'](_0x4a44bc=>{const _0x45410c=_0x2100;loading[_0x45410c(0x25c)][_0x45410c(0x298)](_0x4a44bc);}),loadingCanceled=![];let _0x401898=![];while(_0x11be5c!=_0x1987cf[_0x359313(0x1ad)]+maxLoadingProgress){_0x11be5c=loadingProgress,_0x1987cf[_0x359313(0x24f)](_0x3c6faf=>{const _0x3fc434=_0x359313;if(gTicker[noslash(_0x3c6faf)]){loading[_0x3fc434(0x25c)]=loading[_0x3fc434(0x25c)][_0x3fc434(0x2c2)](_0x2b1db1=>_0x2b1db1!=_0x3c6faf);if(!watchedSymbols[_0x3fc434(0x24a)](_0x3c6faf))watchedSymbols[_0x3fc434(0x298)](_0x3c6faf);_0x11be5c++;}}),loading['progress']=Math[_0x359313(0x279)](_0x11be5c/(_0x1987cf[_0x359313(0x1ad)]+maxLoadingProgress)*0x64);loading['progress']!=0x64&&(_0x2d5590>0x1e*0x5&&(loading[_0x359313(0x23a)]=!![],emitLoadingProgress()),_0x2d5590>0x78*0x5&&!_0x401898&&(_0x401898=!![],logHistory(_0x359313(0x2e7),_0x359313(0x146)+loading[_0x359313(0x25c)][_0x359313(0x238)](',\x20')+_0x359313(0x1b7)),logHistory(_0x359313(0x2e7),_0x359313(0x17c)+loadCoinsRetryInterval/0xea60+'\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again'),loadingCanceled=!![],await sleep(loadCoinsRetryInterval),restartBot()));if(loadingCanceled){loading[_0x359313(0x200)]=!![],emitLoadingProgress();break;}else _0x3ebf43!=loading[_0x359313(0x18b)]&&(_0x3ebf43=loading[_0x359313(0x18b)],emitLoadingProgress()),_0x2d5590++,await sleep(0xc8);}_0x11be5c==_0x1987cf[_0x359313(0x1ad)]+maxLoadingProgress&&(coinsLoaded=!![],process[_0x359313(0x193)]({'status':_0x359313(0x1d6),'live':_0x359313(0x1ca)},_0x598b3a=>{}),_0x401898&&logHistory(_0x359313(0x248),_0x359313(0x22f)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x316917=_0x315a22;proxyEmit(_0x316917(0x1ed),{...emittedConfiguration(),'configstate':_0x316917(0x251)});}function emitLoadingProgress(){const _0x71255=_0x315a22;proxyEmit(_0x71255(0x25f),loading);}async function getFiat(){const _0x5b196e=_0x315a22;let _0x201bd4=gTicker[stablecoins[_0x5b196e(0x254)][_0x5b196e(0x17e)]],_0x543386=gTicker[stablecoins[_0x5b196e(0x301)][_0x5b196e(0x17e)]];return{'eur':Number(_0x201bd4),'usd':Number(_0x543386)};}function capitalize(_0x2154d1){const _0x305905=_0x315a22;return _0x2154d1['substring'](0x0,0x1)['toUpperCase']()+_0x2154d1[_0x305905(0x1fc)](0x1);}function supportedExchanges(){const _0x18a501=_0x315a22,_0x180287=['ws',_0x18a501(0x171),'fetchTicker',_0x18a501(0x14a),'watchOrders',_0x18a501(0x1f9),_0x18a501(0x140),_0x18a501(0x216),_0x18a501(0x1b4)];let _0x53332d=[],_0x1cecb2=[],_0x1a7064=ccxt['pro'][_0x18a501(0x265)];_0x1a7064[_0x18a501(0x24f)](_0x53be55=>{try{const _0x513cfd=new ccxt['pro'][_0x53be55]();_0x1cecb2['push'](_0x513cfd);}catch(_0x5cf2fd){}}),_0x1cecb2[_0x18a501(0x24f)](_0x1a89d4=>{const _0x1adc64=_0x18a501;let _0xfdb4d=0x0;_0x180287[_0x1adc64(0x24f)](_0x2af1ab=>{const _0x52728d=_0x1adc64;_0x2af1ab in _0x1a89d4[_0x52728d(0x13c)]&&_0x1a89d4[_0x52728d(0x13c)][_0x2af1ab]&&_0xfdb4d++;}),_0xfdb4d==_0x180287['length']&&(!excludedExchanges[_0x1adc64(0x24a)](_0x1a89d4['id'])&&_0x53332d[_0x1adc64(0x298)](capitalize(_0x1a89d4['id'])));});let _0xb75868=[];return _0x1a7064[_0x18a501(0x24f)](_0x292867=>{const _0x11e134=_0x18a501;_0x292867=capitalize(_0x292867);if(!_0x53332d[_0x11e134(0x24a)](_0x292867))_0xb75868[_0x11e134(0x298)](_0x292867);}),_0x53332d;}function setStartDatePerformance(){const _0x2e4a2c=_0x315a22;if(config&&config[_0x2e4a2c(0x1bc)][0x0][_0x2e4a2c(0x1b8)]['length']!=0x0){const _0x4b1c65=config['liquidity'][0x0][_0x2e4a2c(0x1b8)];dbPerformance[_0x2e4a2c(0x263)]('data')[_0x2e4a2c(0x2e0)]({'date':config[_0x2e4a2c(0x28f)]})[_0x2e4a2c(0x2d6)]({'coins':_0x4b1c65})[_0x2e4a2c(0x194)]();}}function calculatePnL(_0x3d8c00,_0x4a8912,_0x5c0ea1,_0x191cb4,_0xc58f00,_0x49fad7){const _0x213ac3=_0x315a22;!_0x3d8c00[_0x213ac3(0x24a)]('/'+config[_0x213ac3(0x1f8)])&&(_0x5c0ea1=_0x5c0ea1==_0x213ac3(0x142)?'sell':_0x213ac3(0x142));!_0x49fad7[_0x4a8912]&&(_0x49fad7[_0x4a8912]={'number':0x0,'sells':0x0,'buys':0x0,'breakeven':0x0,'realizedPnL':0x0});let _0x185385=0x0,_0x1196c5,_0x61c15;if(_0x5c0ea1==_0x213ac3(0x142))_0x61c15=_0x49fad7[_0x4a8912]['number']*_0x49fad7[_0x4a8912][_0x213ac3(0x21c)]+_0xc58f00*_0x191cb4,_0x49fad7[_0x4a8912]['number']+=_0x191cb4,_0x49fad7[_0x4a8912][_0x213ac3(0x21c)]=_0x49fad7[_0x4a8912][_0x213ac3(0x2b5)]!=0x0?_0x61c15/_0x49fad7[_0x4a8912]['number']:0x0,_0x49fad7[_0x4a8912][_0x213ac3(0x300)]++;else _0x5c0ea1==_0x213ac3(0x2ec)&&(_0x1196c5=Math[_0x213ac3(0x1f5)](_0x49fad7[_0x4a8912][_0x213ac3(0x2b5)],_0x191cb4),_0x185385=(_0xc58f00-_0x49fad7[_0x4a8912]['breakeven'])*_0x1196c5,_0x61c15=Math[_0x213ac3(0x15b)](_0x49fad7[_0x4a8912]['number']*_0x49fad7[_0x4a8912][_0x213ac3(0x21c)]-_0x1196c5*_0x49fad7[_0x4a8912]['breakeven'],0x0),_0x49fad7[_0x4a8912][_0x213ac3(0x2b5)]-=_0x1196c5,_0x49fad7[_0x4a8912][_0x213ac3(0x21c)]=_0x49fad7[_0x4a8912][_0x213ac3(0x2b5)]!=0x0?_0x61c15/_0x49fad7[_0x4a8912][_0x213ac3(0x2b5)]:0x0,_0x49fad7[_0x4a8912][_0x213ac3(0x1d8)]+=_0x185385,_0x49fad7[_0x4a8912]['sells']++);return _0x185385;}async function generatePnL(){const _0x2ada4e=_0x315a22;pnlGenerationNeeded=![],logger['debug'](_0x2ada4e(0x27d));const _0x2eefec=dbLogs[_0x2ada4e(0x263)](_0x2ada4e(0x1f6))[_0x2ada4e(0x1fd)]();let _0xc8f55a={},_0x17d3dd=0x0,_0x2d250=0x0,_0x3ba9cb=config['startdate'];const _0x1c5988=fns[_0x2ada4e(0x19a)](_0x3ba9cb,_0x2ada4e(0x143),new Date()),_0x56efce=new Date();let _0x238a53=0x0;for(let _0x16f03a=_0x1c5988;!fns[_0x2ada4e(0x155)](_0x56efce,_0x16f03a);_0x16f03a=fns[_0x2ada4e(0x30f)](_0x16f03a,0x1)){const _0x4438fe=fns['format'](_0x16f03a,_0x2ada4e(0x143));while(_0x17d3dd<_0x2eefec['length']){const _0x2da8fc=new Date(_0x2eefec[_0x17d3dd][_0x2ada4e(0x1e8)]);if(fns[_0x2ada4e(0x155)](_0x2da8fc,_0x16f03a))_0x17d3dd++;else{if(_0x2eefec[_0x17d3dd][_0x2ada4e(0x1e8)][_0x2ada4e(0x24a)](_0x4438fe)){const _0x5378f1=_0x2eefec[_0x17d3dd];if(_0x5378f1[_0x2ada4e(0x308)]==='order'&&(_0x5378f1['event']['includes']('Order\x20filled')||_0x5378f1[_0x2ada4e(0x144)]['includes']('Market\x20order'))){const _0x3a70a4=_0x5378f1[_0x2ada4e(0x144)][_0x2ada4e(0x1ac)](/([A-Z]+\/[A-Z]+) (sell|buy) #([\d.]+) @([\d.]+)/);if(_0x3a70a4){const [,_0xc39552,_0x951179,_0x5216c5,_0x41987d]=_0x3a70a4,_0x529a77=_0xc39552[_0x2ada4e(0x24a)]('/'+config[_0x2ada4e(0x1f8)])?_0xc39552['split']('/')[0x0]:_0xc39552[_0x2ada4e(0x1d0)]('/')[0x1],_0xae0030=calculatePnL(_0xc39552,_0x529a77,_0x951179,parseFloat(_0x5216c5),parseFloat(_0x41987d),_0xc8f55a);_0x2d250+=_0xae0030;}}_0x17d3dd++;}else break;}}dbPerformance[_0x2ada4e(0x263)]('data')[_0x2ada4e(0x2e0)]({'date':_0x4438fe})[_0x2ada4e(0x2d6)]({'pnl':_0x2d250})[_0x2ada4e(0x194)]();}dbCoinResults[_0x2ada4e(0x148)](_0x2ada4e(0x1cd),_0xc8f55a)[_0x2ada4e(0x194)](),logger['debug'](_0x2ada4e(0x178));const _0x235472=getNormalizedPerformance();emitPerformance(_0x235472);}async function updatePnL(_0x1d7c41){const _0x7a9c94=_0x315a22,{symbol:_0x245fd8,coin:_0x105af9,amount:_0x2fd320,price:_0x33b7a3,side:_0x13d53c,reverse:_0x537e83}=_0x1d7c41;let _0x58d47e=dbCoinResults[_0x7a9c94(0x263)]('coins')[_0x7a9c94(0x1fd)]();const _0x1153e2=calculatePnL(_0x245fd8,_0x105af9,_0x13d53c,_0x2fd320,_0x33b7a3,_0x58d47e);dbCoinResults[_0x7a9c94(0x148)](_0x7a9c94(0x1cd),_0x58d47e)[_0x7a9c94(0x194)]();const _0x463d6=getTimeStamp()[_0x7a9c94(0x1d0)]('\x20')[0x0];let _0x270ec9=dbPerformance[_0x7a9c94(0x263)](_0x7a9c94(0x2c5))[_0x7a9c94(0x2e0)]({'date':_0x463d6})[_0x7a9c94(0x1fd)]();_0x270ec9?(_0x270ec9[_0x7a9c94(0x2d1)]+=_0x1153e2,dbPerformance[_0x7a9c94(0x263)](_0x7a9c94(0x2c5))[_0x7a9c94(0x2e0)]({'date':_0x463d6})[_0x7a9c94(0x2d6)](_0x270ec9)[_0x7a9c94(0x194)]()):await storePerformance();const _0x2a5822=getNormalizedPerformance();emitPerformance(_0x2a5822);}async function validate24hChanges(){const _0x1f1bce=_0x315a22;for(const _0x2b7a71 of currentCoins){if(_0x2b7a71[_0x1f1bce(0x17e)]!=config[_0x1f1bce(0x1f8)]){let _0x4f32fc;_0x2b7a71[_0x1f1bce(0x24e)]?_0x4f32fc=formatResult((0x1/(gChange[_0x2b7a71[_0x1f1bce(0x224)]]/0x64+0x1)-0x1)*0x64,0x3):_0x4f32fc=gChange[_0x2b7a71[_0x1f1bce(0x224)]],_0x4f32fc<config[_0x1f1bce(0x28c)]&&(logHistory(_0x1f1bce(0x2e7),_0x2b7a71[_0x1f1bce(0x17e)]+_0x1f1bce(0x1a6)+_0x4f32fc+'%'),logHistory(_0x1f1bce(0x2e7),_0x1f1bce(0x13f)),logHistory(_0x1f1bce(0x2e7),_0x1f1bce(0x29f)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x1f404a,_0x18c680){const _0x4a6526=_0x315a22;if(!_0x1f404a)return!![];const _0x528deb=_0x18c680[_0x4a6526(0x1d0)]('.'),_0x2f2f7e=_0x1f404a[_0x4a6526(0x1d0)]('.');for(var _0x35c411=0x0;_0x35c411<_0x2f2f7e[_0x4a6526(0x1ad)];_0x35c411++){const _0x13b7e3=~~_0x2f2f7e[_0x35c411],_0x337cf1=~~_0x528deb[_0x35c411];if(_0x13b7e3<_0x337cf1)return!![];if(_0x13b7e3>_0x337cf1)return![];}return![];}async function oneTimeMigration(){const _0x505b3a=_0x315a22;let _0x4b5c83=dbLogs[_0x505b3a(0x263)](_0x505b3a(0x1e0))[_0x505b3a(0x1fd)]();if(isOlderVersion(_0x4b5c83,_0x505b3a(0x22d))){let _0x5385ec=[];const _0x4194fa=dbLogs[_0x505b3a(0x263)](_0x505b3a(0x1f6))['value']();_0x4194fa[_0x505b3a(0x24f)](_0x49ffe7=>{const _0x5cab21=_0x505b3a;_0x5385ec['push']({'time':_0x49ffe7[_0x5cab21(0x1e8)],'type':_0x49ffe7[_0x5cab21(0x308)],'event':_0x49ffe7[_0x5cab21(0x144)]});}),dbLogs[_0x505b3a(0x263)](_0x505b3a(0x1f6))['assign'](_0x5385ec)[_0x505b3a(0x194)]();}let _0x25bb13=dbConfig[_0x505b3a(0x263)](_0x505b3a(0x1e0))['value']();if(isOlderVersion(_0x25bb13,_0x505b3a(0x22d))){let _0x3ba341=dbConfig[_0x505b3a(0x263)](_0x505b3a(0x2f7))[_0x505b3a(0x2e0)]({'botID':botID})[_0x505b3a(0x1fd)]();if(_0x3ba341){let _0x2dfa65=[];_0x3ba341['portfolio'][_0x505b3a(0x24f)](_0x1215c9=>{const _0x2ee659=_0x505b3a;_0x2dfa65[_0x2ee659(0x298)]({'coin':_0x1215c9['coin'],'number':_0x1215c9[_0x2ee659(0x26b)],'price':_0x1215c9[_0x2ee659(0x235)]}),delete _0x1215c9[_0x2ee659(0x26b)],delete _0x1215c9['startprice'];});if(_0x2dfa65[_0x505b3a(0x1ad)]!==0x0)fs['writeFile'](configbackuppath+('starting-balance-'+botID+_0x505b3a(0x283)),JSON[_0x505b3a(0x22e)](_0x2dfa65,null,0x4),function(_0x10e12c){if(_0x10e12c){}});const _0x4984e4=(_0x127511,_0x12174d)=>{const _0x20f835=_0x505b3a;let _0x45f0a1=[];_0x12174d[_0x20f835(0x24f)](_0x442464=>{const _0x36a896=_0x20f835,_0x8ecb6f=_0x127511['find'](_0x2c7b8e=>_0x2c7b8e[_0x36a896(0x17e)]==_0x442464[_0x36a896(0x17e)]);if(!_0x8ecb6f)_0x45f0a1[_0x36a896(0x298)](_0x442464);});let _0x120a63=[];return _0x127511[_0x20f835(0x24f)](_0x1ddb48=>{const _0x4498e3=_0x20f835,_0xff12a5=_0x12174d[_0x4498e3(0x2e0)](_0xccd792=>_0xccd792[_0x4498e3(0x17e)]==_0x1ddb48[_0x4498e3(0x17e)]);if(!_0xff12a5||_0xff12a5[_0x4498e3(0x2b5)]==0x0&&_0x1ddb48[_0x4498e3(0x2b5)]!=0x0)_0x120a63[_0x4498e3(0x298)](_0x1ddb48);}),{'missingDay1':_0x45f0a1,'notInDay2':_0x120a63};},_0x182a6c=dbPerformance[_0x505b3a(0x263)](_0x505b3a(0x2c5))[_0x505b3a(0x2fd)]()['value']();if(_0x182a6c[_0x505b3a(0x1ad)]>0x1){const {missingDay1:_0x11d5d2,notInDay2:_0x2446e2}=_0x4984e4(_0x2dfa65,_0x182a6c[0x1][_0x505b3a(0x1cd)]);_0x2dfa65=[..._0x2dfa65,..._0x11d5d2],_0x2446e2[_0x505b3a(0x24f)](_0x366b2d=>{const _0x1a1fb8=_0x505b3a;let _0x3abe97=_0x2dfa65[_0x1a1fb8(0x1dc)](_0x4e281c=>_0x4e281c[_0x1a1fb8(0x17e)]==_0x366b2d[_0x1a1fb8(0x17e)]);_0x3abe97!=-0x1&&_0x2dfa65['splice'](_0x3abe97,0x1);});}_0x2dfa65[_0x505b3a(0x25e)]((_0x556175,_0x5a47ab)=>_0x556175[_0x505b3a(0x17e)]>_0x5a47ab[_0x505b3a(0x17e)]?0x1:_0x5a47ab[_0x505b3a(0x17e)]>_0x556175[_0x505b3a(0x17e)]?-0x1:0x0);let _0x19ae42=[{'date':_0x3ba341[_0x505b3a(0x28f)],'changes':_0x2dfa65}];_0x182a6c[_0x505b3a(0x1ad)]>0x2&&_0x182a6c[_0x505b3a(0x24f)]((_0x19b2cf,_0x5828f6)=>{const _0x174cdd=_0x505b3a;if(_0x5828f6>0x0&&_0x5828f6<_0x182a6c[_0x174cdd(0x1ad)]-0x1){const {missingDay1:_0x481f5e,notInDay2:_0x283fd5}=_0x4984e4(_0x182a6c[_0x5828f6][_0x174cdd(0x1cd)],_0x182a6c[_0x5828f6+0x1][_0x174cdd(0x1cd)]);_0x2dfa65=[],(_0x481f5e[_0x174cdd(0x1ad)]!=0x0||_0x283fd5[_0x174cdd(0x1ad)]!=0x0)&&(_0x481f5e[_0x174cdd(0x1ad)]!=0x0&&_0x2dfa65[_0x174cdd(0x298)](..._0x481f5e),_0x283fd5[_0x174cdd(0x1ad)]!=0x0&&(_0x283fd5[_0x174cdd(0x24f)](_0x2470cb=>{_0x2470cb['number']=-_0x2470cb['number'];}),_0x2dfa65[_0x174cdd(0x298)](..._0x283fd5)),_0x2dfa65[_0x174cdd(0x25e)]((_0x997926,_0x15b0c9)=>_0x997926[_0x174cdd(0x17e)]>_0x15b0c9[_0x174cdd(0x17e)]?0x1:_0x15b0c9['coin']>_0x997926[_0x174cdd(0x17e)]?-0x1:0x0),_0x19ae42['push']({'date':_0x182a6c[_0x5828f6+0x1][_0x174cdd(0x2ca)],'changes':_0x2dfa65}));}}),dbConfig[_0x505b3a(0x263)](_0x505b3a(0x2f7))['find']({'botID':botID})['assign']({..._0x3ba341,'liquidity':_0x19ae42})['write']();}}if(isOlderVersion(_0x25bb13,_0x505b3a(0x1f3))){let _0x270134=dbConfig[_0x505b3a(0x263)](_0x505b3a(0x2f7))[_0x505b3a(0x2e0)]({'botID':botID})[_0x505b3a(0x1fd)]();if(_0x270134){const _0x4e35a7=_0x270134[_0x505b3a(0x1b2)],_0x49c6e5=_0x4e35a7?capitalize(_0x4e35a7):_0x505b3a(0x2ad);dbConfig[_0x505b3a(0x263)](_0x505b3a(0x2f7))[_0x505b3a(0x2e0)]({'botID':botID})['assign']({'exchange':_0x49c6e5})[_0x505b3a(0x194)]();}}if(isOlderVersion(_0x25bb13,'2.6.22')){let _0x2b5d7c=dbConfig['get'](_0x505b3a(0x2f7))[_0x505b3a(0x2e0)]({'botID':botID})['value']();if(_0x2b5d7c){const _0x197547=_0x2b5d7c[_0x505b3a(0x1db)],_0x37bdbf=_0x197547?'marketcap':![];dbConfig['get']('bot')['find']({'botID':botID})[_0x505b3a(0x2d6)]({'marketcapEnabled':_0x37bdbf})[_0x505b3a(0x194)]();}}if(isOlderVersion(_0x25bb13,_0x505b3a(0x13a))){let _0x92b99=dbConfig[_0x505b3a(0x263)](_0x505b3a(0x2f7))[_0x505b3a(0x2e0)]({'botID':botID})['value']();if(_0x92b99){const _0xbd97bb=_0x92b99[_0x505b3a(0x14e)],_0x5c9cbd=_0xbd97bb?'update-liquidity':![];dbConfig['get'](_0x505b3a(0x2f7))[_0x505b3a(0x2e0)]({'botID':botID})['assign']({'autoliquidity':_0x5c9cbd})[_0x505b3a(0x194)]();}}let _0x5786b8=dbPerformance[_0x505b3a(0x263)](_0x505b3a(0x1e0))[_0x505b3a(0x1fd)]();isOlderVersion(_0x5786b8,_0x505b3a(0x22d))&&setStartDatePerformance();let _0x18e2a1=dbCoinResults['get'](_0x505b3a(0x1e0))['value']();if(isOlderVersion(_0x18e2a1,_0x505b3a(0x260))){let _0x8871be=dbCoinResults[_0x505b3a(0x263)](_0x505b3a(0x1cd))[_0x505b3a(0x1fd)]();if(_0x8871be[_0x505b3a(0x1ad)]!=0x0)pnlGenerationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x3ad6b4=_0x315a22;dbConfig[_0x3ad6b4(0x148)](_0x3ad6b4(0x1e0),serverversion)[_0x3ad6b4(0x194)](),dbPerformance[_0x3ad6b4(0x148)](_0x3ad6b4(0x1e0),serverversion)[_0x3ad6b4(0x194)](),dbLogs['set'](_0x3ad6b4(0x1e0),serverversion)['write'](),dbCoinResults[_0x3ad6b4(0x148)](_0x3ad6b4(0x1e0),serverversion)[_0x3ad6b4(0x194)]();}function getConfiguration(_0x227058){const _0x3893ec=_0x315a22;let _0x4b4f2f=dbConfig['get'](_0x3893ec(0x2f7))['find']({'botID':_0x227058})[_0x3893ec(0x1fd)]();if(_0x4b4f2f){let _0x15c96a=![];typeof _0x4b4f2f[_0x3893ec(0x1f2)]==_0x3893ec(0x225)&&(_0x4b4f2f={..._0x4b4f2f,'threshold':Number(_0x4b4f2f[_0x3893ec(0x1f2)])},_0x15c96a=!![]),_0x4b4f2f[_0x3893ec(0x28c)]==undefined&&(_0x4b4f2f={..._0x4b4f2f,'change24h':-0x14},_0x15c96a=!![]),_0x4b4f2f[_0x3893ec(0x289)]==undefined&&(_0x4b4f2f={..._0x4b4f2f,'fiat':_0x3893ec(0x174)},_0x15c96a=!![]),_0x4b4f2f[_0x3893ec(0x1e6)]==undefined&&(_0x4b4f2f={..._0x4b4f2f,'onepagemode':settings[_0x3893ec(0x1e6)]},_0x15c96a=!![]),_0x4b4f2f[_0x3893ec(0x16e)]==undefined&&(_0x4b4f2f={..._0x4b4f2f,'colorscheme':_0x3893ec(0x23d)},_0x15c96a=!![]),_0x4b4f2f[_0x3893ec(0x14e)]==undefined&&(_0x4b4f2f={..._0x4b4f2f,'autoliquidity':_0x3893ec(0x1b9)},_0x15c96a=!![]),_0x4b4f2f[_0x3893ec(0x25b)]==undefined&&(_0x4b4f2f={..._0x4b4f2f,'marketcapApi':settings[_0x3893ec(0x25b)]?!![]:![]},_0x15c96a=!![]),_0x4b4f2f[_0x3893ec(0x1db)]==undefined&&(_0x4b4f2f={..._0x4b4f2f,'marketcapEnabled':![]},_0x15c96a=!![]),_0x4b4f2f['sandbox']==undefined&&(_0x4b4f2f={..._0x4b4f2f,'sandbox':![]},_0x15c96a=!![]),_0x15c96a&&(_0x4b4f2f={'botID':_0x4b4f2f[_0x3893ec(0x1b1)],'exchange':_0x4b4f2f[_0x3893ec(0x1b2)],'apiKey':_0x4b4f2f[_0x3893ec(0x2dc)],'apiSecret':_0x4b4f2f[_0x3893ec(0x236)],'apiPassword':_0x4b4f2f[_0x3893ec(0x22b)],'basecoin':_0x4b4f2f[_0x3893ec(0x1f8)],'botname':_0x4b4f2f[_0x3893ec(0x19f)],'showname':_0x4b4f2f[_0x3893ec(0x2e8)],'threshold':_0x4b4f2f[_0x3893ec(0x1f2)],'ordertype':_0x4b4f2f[_0x3893ec(0x302)],'timeout':_0x4b4f2f[_0x3893ec(0x23a)],'fiat':_0x4b4f2f[_0x3893ec(0x289)],'startdate':_0x4b4f2f[_0x3893ec(0x28f)],'recreate':_0x4b4f2f[_0x3893ec(0x26a)],'timeshift':_0x4b4f2f[_0x3893ec(0x1b3)],'onepagemode':_0x4b4f2f['onepagemode'],'headless':_0x4b4f2f[_0x3893ec(0x182)],'cooldown':_0x4b4f2f[_0x3893ec(0x271)],'change24h':_0x4b4f2f[_0x3893ec(0x28c)],'emojibuy':_0x4b4f2f[_0x3893ec(0x288)],'emojisell':_0x4b4f2f['emojisell'],'colorscheme':_0x4b4f2f[_0x3893ec(0x16e)],'marketcapApi':_0x4b4f2f[_0x3893ec(0x25b)],'marketcapEnabled':_0x4b4f2f[_0x3893ec(0x1db)],'sandbox':_0x4b4f2f[_0x3893ec(0x306)],'portfolio':_0x4b4f2f[_0x3893ec(0x145)],'autoliquidity':_0x4b4f2f['autoliquidity'],'liquidity':_0x4b4f2f[_0x3893ec(0x1bc)],'openOrders':_0x4b4f2f[_0x3893ec(0x15e)]},dbConfig[_0x3893ec(0x263)](_0x3893ec(0x2f7))['remove']()[_0x3893ec(0x194)](),dbConfig[_0x3893ec(0x263)]('bot')[_0x3893ec(0x298)](_0x4b4f2f)[_0x3893ec(0x194)]());}else _0x4b4f2f={'botID':_0x227058,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x3893ec(0x18d)+_0x227058,'showname':![],'threshold':0x3,'ordertype':_0x3893ec(0x14c),'timeout':0x14,'fiat':_0x3893ec(0x174),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x3893ec(0x1b3)],'onepagemode':settings[_0x3893ec(0x1e6)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x3893ec(0x23d),'marketcapApi':settings['marketcapApi']?!![]:![],'marketcapEnabled':![],'sandbox':![],'portfolio':[],'autoliquidity':_0x3893ec(0x1b9),'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x4b4f2f;}function emittedConfiguration(){const _0x19c0a4=_0x315a22;let _0x51ab1d;if(config['apiKey']=='')_0x51ab1d={...config,'configstate':_0x19c0a4(0x280)};else config[_0x19c0a4(0x2dc)]=='***'?_0x51ab1d={...config,'configstate':'recovery'}:(_0x51ab1d={...config,'apiKey':'************','apiSecret':_0x19c0a4(0x2d7)},config[_0x19c0a4(0x22b)]&&(_0x51ab1d[_0x19c0a4(0x22b)]=_0x19c0a4(0x2d7)));return _0x51ab1d[_0x19c0a4(0x2e2)]=enableFiatToggle,_0x51ab1d;}function _0x2c2b(){const _0x581479=['loading-canceled','apply','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','eur','\x20-\x20bot\x20already\x20running\x20in\x20manual\x20mode','market_cap','Fee\x20discount\x20refund\x20detected:\x20','API-key\x20format\x20invalid','Unknown\x20error:\x20','BUSD','marketcapApi','remainingSymbols','Initializing\x20exchange','sort','coin-loading-progress','2.7.1','\x20API\x20key\x20is\x20invalid','configuration-stored','get','ETH','exchanges','-performance.json','privateKeyFromPem','bb-settings.json','test','recreate','startnumber','pop','setSandboxMode','slider','USDC','RSA-OAEP','cooldown','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange',')\x20|\x20exchange:\x20','Cooldown\x20ended\x20-\x20balancing\x20resumed','-events.json','restart','performance','existsSync','round','Portfolio\x20change\x20detected:\x20',')\x20unknown\x20order:\x20','/USDT','Generating\x20PnL\x20data','decrypt','1\x20-\x20Handle\x20open\x20orders','initial','placeOrder','3252WCFjvA','.json','\x20|\x20highest\x20fee:\x20','sendMetricsTelegram','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)','%\x20(','emojibuy','fiat','node-forge','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','change24h','-results.json','differenceInSeconds','startdate','page','unlinkSync','-------------------------------\x0a','Order(s)\x20not\x20validated\x20after\x20','Unfilled\x20order(s)\x20could\x20not\x20be\x20canceled\x20after\x20','Error\x20while\x20deleting\x20files:\x20','replace','MIN_NOTIONAL','push','./logs/','Bybit','\x20>\x20details:','1\x20-\x20partially\x20FILLED\x20(','cancelOrders()','padStart','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','prevnumber','pid','amount','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','debug','complete','PAXG','LOCKED','no\x20exchange\x20reloaded','fetchBalance()','uncaughtException','delta','Avoiding\x20continuous\x20order\x20attempts','Binance','2\x20-\x20handling\x20FILLED\x20order:\x20','path','yargs/yargs','sortBy','Updating\x20API\x20key\x20(not\x20saved\x20in\x20config\x20file\x20yet)','sendPortfolioTelegram','cancelLoading','number','process\x20','\x20exchange','warning','/USD','\x20-\x20','Exception\x20thrown\x20in\x20','side','none','percentage','\x20API\x20key,\x20secret\x20or\x20password\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','1\x20-\x20Validate\x20orders:\x20','Executed\x20','filter','\x20blocked\x20API\x20(DDoSProtection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','DDoSProtection','data','secure','valid','\x20hour','\x20>\x20[DEBUG]\x20','date','lowdb/adapters/FileSync','message','\x20minutes','splice','46670JifYqj','2\x20-\x20Validate\x20orders:\x20','pnl','watchOrders()','\x20>\x20pausing\x20bot\x20for\x20','\x20exchange\x20error:\x20','Error\x20details:','assign','************','Loading\x20completed','no\x20open\x20orders','Market','\x20-\x20bot\x20switched\x20to\x20manual\x20mode','apiKey','stack','getDate','USDP','find','EUR','enableFiatToggle','loadSymbols()','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','\x20not\x20responding\x20(see:\x20hodlerhacks.com/fix/5)','/EUR','error','showname','code','indexOf','Bitget','sell','limit','1\x20-\x20FILLED\x20known\x20order:\x20','2\x20-\x20Handled\x20open\x20orders','placeOrder()','\x20-\x20go\x20back\x20and\x20try\x20again','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','cost','event-history','balancing\x20resumes\x20when\x20cooldown\x20ends','Order\x20filled:\x20','bot','\x20>\x20stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','highest','createWriteStream','InsufficientFunds','secret','cloneDeep','password','Value\x20','buys','usd','ordertype','marketcap','bitmex','quote','sandbox','<pre>','type','distribution','loadMarkets','CoinMarketCap\x20data\x20could\x20not\x20be\x20updated\x20-\x20will\x20try\x20again\x20in\x201\x20hour','toFixed','2ajEMgM','\x20MB','addDays','Waited\x20','\x20rejected\x20your\x20API\x20request\x20(see:\x20hodlerhacks.com/fix/4)','recent20','last','configstate','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','production','Invalid\x20quantity',':\x20Bot\x20','bid','open','<b>','add','2367GsyaUr','\x20|\x20Custom\x20ID:\x20','2.6.23','request-time','has','slice','watchTradesForSymbols()','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','createOrder','Trigger:\x20','buy','yyyy/MM/dd','event','portfolio','Failed\x20to\x20load\x20coin\x20data\x20for\x20','orderId','set','mkdirSync','watchTrades','testApi','market','pnl-basecoin','autoliquidity','./version.json','Test\x20new\x20API','\x20>\x20','InvalidNonce','argv','Error\x20in\x20loadSymbols():\x20','isBefore','pro','ID:\x20','ExchangeNotAvailable','Initializing\x20coin\x20results','abs','max','Limit\x20(low-margin)','Network\x20error\x20details:','openOrders','showConfig','switch-manual','function','Huobi',':\x20timer\x20>','price','status','timestamp','Headless:\x20','getFullYear','getMonth','%)\x0a','RETRY\x20-\x20Error\x20in\x20','portfolio2','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','colorscheme','ask','/output-000.log','fetchTickers','constructor','1472KlJjoH','USD','Invalid\x20symbol:\x20','fee','limits','Generated\x20PnL\x20data','955427EyRrTX','floor','average','Pausing\x20for\x20','watchOrders','coin','heapUsed','format','watchTrades()','headless','toLowerCase','map','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','getMinutes','Cryptocom','removed','random','\x20portfolio:</b>\x20\x0a\x0a','progress','\x20closed\x20the\x20connection\x20(see:\x20hodlerhacks.com/fix/5)','Bot\x20','defaults','final','currency','detectLiquidityChange()','BTC','send','write','Cex','bot-','balancing\x20resumed','getTime','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','parse','staging','bots','AuthenticationError','Exchange','botname','Error\x20occurred:\x20','Valid\x20balance\x20for\x20','\x20attempts','Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute','date-fns','Order\x20amount\x20is\x20invalid:\x20','\x20has\x20a\x2024h\x20drop\x20of\x20','Net\x20','isEqual','\x20-\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','Huobipro','filled','match','length','fetchTicker','emojisell','padEnd','botID','exchange','timeshift','fetchBalance','Stopped\x20fetching\x20balance\x20after\x20','\x20uses\x20','\x20-\x20bot\x20not\x20started','changes','update-liquidity','canceled','<b>Bot\x20','liquidity','storeFiat','deleteHistoryAlerts','change','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','create','\x20minutes\x20-\x20','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20trying\x20again\x20in\x20',')\x20known\x20order:\x20','ExchangeError','Invalid\x20API\x20details,\x20please\x20try\x20again\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','1\x20-\x20FILLED\x20unknown\x20order:\x20','3647kKgJsC','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','running','Insufficient\x20funds\x20to\x20execute\x20order:\x20','./config/','coins','log','ccxt','split','testAPI()','full','freeze','Limit\x20(high-margin)','fetchTickers()','enabled','basecoinvalue','realizedPnL','PnL\x20','USDT','marketcapEnabled','findIndex','net-basecoin','active','4075768wNeemp','version','shift','starting-balances','initTickers()','getSeconds','toString','onepagemode','lowdb','time','Resetting\x20coin\x20results:\x20','bb-secure.json','settings','trade','configuration','getOpenOrders()','api-issue','\x20orders\x20in\x20less\x20than\x20','Will\x20continue\x20to\x20wait\x20for\x20order(s)\x20to\x20be\x20filled\x20and\x20try\x20to\x20cancel\x20again\x20later','threshold','2.6.0','args','min','logs','***','basecoin','cancelOrder','\x20|\x20','OnMaintenance','substring','value','privateKey','Error:\x20Invalid\x20argument\x20','cancel','closed','fromCodePoint','PermissionDenied','RateLimitExceeded','getHours','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','net-fiat','\x20(see:\x20hodlerhacks.com/fix/1)','\x20network\x20error:\x20','</pre>','customId','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','total','order','Reset\x20|\x20','target','Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)','1598989vwKYeN','sqrt','Block\x20transaction\x20detection:\x20','sha256','fetchOpenOrders','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','excluded','NetworkError','UNLOCKED','storeConfiguration','breakeven','portfolio1','remove','\x20|\x20exchange:\x20','orderstatus','environment','keys','exchange\x20reload','symbol','string','16235WotJHu','added','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','(((.+)+)+)+$','token\x20is\x20expired','apiPassword',',\x20must\x20be\x20a\x203\x20digit\x20number','2.3.5','stringify','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','util','\x20/\x20','entries','startprice','apiSecret','balances','join','Error\x20details:\x20','timeout','Portfolio\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','\x0aSymbol(s):\x20','red_yellow_blue','\x20metrics:</b>\x20\x0a\x0a','ongoing','0\x20-\x20EXECUTION:\x20','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20for\x20','3756126mhrbYZ','spot','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','Initializing\x20exchange:\x20already\x20done','search','\x20order:\x20','success','Placing\x20order\x20for:\x20','includes','offset','emitHistory','timestamp-issue','reverse','forEach','axios'];_0x2c2b=function(){return _0x581479;};return _0x2c2b();}function getSettings(){const _0x20e250=_0x315a22;return dbSettings[_0x20e250(0x263)](_0x20e250(0x1eb))['value']();}function getSecure(){const _0x48bf69=_0x315a22;return dbSecure['get'](_0x48bf69(0x2c6))[_0x48bf69(0x1fd)]()||{};}function updateTimeshift(_0x1311fc){const _0x4ebd30=_0x315a22;let _0x5ec075=dbConfig['get'](_0x4ebd30(0x2f7))[_0x4ebd30(0x2e0)]({'botID':botID})[_0x4ebd30(0x1fd)]();_0x5ec075&&dbConfig[_0x4ebd30(0x263)](_0x4ebd30(0x2f7))[_0x4ebd30(0x2e0)]({'botID':botID})[_0x4ebd30(0x2d6)]({'timeshift':_0x1311fc})[_0x4ebd30(0x194)](),config[_0x4ebd30(0x1b3)]=_0x1311fc,proxyEmit(_0x4ebd30(0x1ed),emittedConfiguration());}function updateOnepagemode(_0x3e89e3){const _0x318d3e=_0x315a22;let _0x140e37=dbConfig[_0x318d3e(0x263)]('bot')['find']({'botID':botID})[_0x318d3e(0x1fd)]();_0x140e37&&dbConfig['get'](_0x318d3e(0x2f7))['find']({'botID':botID})[_0x318d3e(0x2d6)]({'onepagemode':_0x3e89e3})[_0x318d3e(0x194)](),config[_0x318d3e(0x1e6)]=_0x3e89e3,proxyEmit('configuration',emittedConfiguration());}function updateMarketcapApi(_0x15a7f3){const _0x288a6d=_0x315a22,_0x32a090=_0x15a7f3?!![]:![];let _0x47aed8=dbConfig[_0x288a6d(0x263)](_0x288a6d(0x2f7))[_0x288a6d(0x2e0)]({'botID':botID})[_0x288a6d(0x1fd)]();_0x47aed8&&dbConfig[_0x288a6d(0x263)](_0x288a6d(0x2f7))[_0x288a6d(0x2e0)]({'botID':botID})['assign']({'marketcapApi':_0x32a090})['write'](),config[_0x288a6d(0x25b)]=_0x32a090,getMarketCap(),proxyEmit('configuration',emittedConfiguration());}async function storeConfiguration(_0x4a7ee2){const _0x214975=_0x315a22;logger[_0x214975(0x2a4)]('Saving\x20configuration');_0x4a7ee2[_0x214975(0x12f)]&&delete _0x4a7ee2[_0x214975(0x12f)];if(pidBalances)clearTimeout(pidBalances);setBlockTransactionDetection(!![]);let _0x4c52e9=![],_0x16f63c=![],_0xc96dc8=[];_0x4a7ee2[_0x214975(0x145)][_0x214975(0x24f)](_0x4b6927=>{const _0x222ad5=_0x214975;if(!_0x4b6927['excluded']&&_0x4b6927[_0x222ad5(0x17e)]!=_0x4a7ee2[_0x222ad5(0x1f8)])_0xc96dc8[_0x222ad5(0x298)](_0x4b6927['symbol']);}),_0xc96dc8['forEach'](_0x48189d=>{const _0x575735=_0x214975,_0x569c24=currentCoins[_0x575735(0x2e0)](_0x48b496=>_0x48b496['symbol']==_0x48189d);!_0x569c24&&(_0x4c52e9=!![]);}),currentCoins[_0x214975(0x24f)](_0x24b85d=>{const _0x2d3995=_0x214975;if(_0x24b85d[_0x2d3995(0x17e)]!=config[_0x2d3995(0x1f8)]){const _0x2703f9=_0xc96dc8[_0x2d3995(0x2e0)](_0x272d19=>_0x272d19==_0x24b85d[_0x2d3995(0x224)]);!_0x2703f9&&(_0x4c52e9=!![]);}}),_0x4a7ee2[_0x214975(0x145)][_0x214975(0x24f)](_0x423b02=>{const _0x2a00bc=_0x214975,_0x4cd9ca=config[_0x2a00bc(0x145)][_0x2a00bc(0x2e0)](_0x519291=>_0x519291[_0x2a00bc(0x17e)]==_0x423b02[_0x2a00bc(0x17e)]);if(_0x4cd9ca&&_0x423b02['offset']!=_0x4cd9ca['offset'])_0x16f63c=!![];});let _0x1a002a=dbConfig[_0x214975(0x263)]('bot')[_0x214975(0x2e0)]({'botID':botID})[_0x214975(0x1fd)]();_0x4a7ee2={..._0x4a7ee2,'apiKey':decryptRSA(secure[_0x214975(0x1fe)],_0x4a7ee2[_0x214975(0x2dc)]),'apiSecret':decryptRSA(secure[_0x214975(0x1fe)],_0x4a7ee2['apiSecret'])};_0x4a7ee2[_0x214975(0x22b)]&&(_0x4a7ee2['apiPassword']=decryptRSA(secure[_0x214975(0x1fe)],_0x4a7ee2[_0x214975(0x22b)]));let _0x5a59f=![];if(_0x1a002a){_0x4a7ee2['apiKey']==_0x214975(0x2d7)?_0x4a7ee2['apiKey']=config[_0x214975(0x2dc)]:_0x5a59f=!![];_0x4a7ee2['apiSecret']==_0x214975(0x2d7)?_0x4a7ee2[_0x214975(0x236)]=config[_0x214975(0x236)]:_0x5a59f=!![];if(_0x4a7ee2['apiPassword']==_0x214975(0x2d7))_0x4a7ee2[_0x214975(0x22b)]=config[_0x214975(0x22b)];else{if(_0x4a7ee2[_0x214975(0x22b)])_0x5a59f=!![];}dbConfig[_0x214975(0x263)](_0x214975(0x2f7))[_0x214975(0x2e0)]({'botID':botID})[_0x214975(0x2d6)](_0x4a7ee2)[_0x214975(0x194)]();}else dbConfig[_0x214975(0x263)]('bot')[_0x214975(0x298)](_0x4a7ee2)[_0x214975(0x194)](),_0x5a59f=!![],process['send']({'status':_0x214975(0x1d6),'live':_0x214975(0x1ca)},_0x424ce6=>{});process['send']({'botname':_0x4a7ee2[_0x214975(0x19f)]},_0x491f84=>{}),config={..._0x4a7ee2},updateBotManager(),proxyEmit(_0x214975(0x262)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x5a59f)await reset(!![]);else _0x4c52e9||_0x16f63c?await reset(![]):getBalances();setBlockTransactionDetection(![]);}async function storeHeadless(_0x334885){const _0x2b3966=_0x315a22,_0x5a2214={...config,'headless':_0x334885[_0x2b3966(0x182)]};let _0x19c649=dbConfig[_0x2b3966(0x263)]('bot')[_0x2b3966(0x2e0)]({'botID':botID})['value']();_0x19c649&&dbConfig[_0x2b3966(0x263)](_0x2b3966(0x2f7))[_0x2b3966(0x2e0)]({'botID':botID})[_0x2b3966(0x2d6)](_0x5a2214)[_0x2b3966(0x194)](),config={..._0x5a2214},updateBotManager(),proxyEmit(_0x2b3966(0x1ed),emittedConfiguration());}async function storeFiat(_0xef60c3){const _0x5a9a8e=_0x315a22,_0x3cb85a={...config,'fiat':_0xef60c3};let _0x5cdd86=dbConfig[_0x5a9a8e(0x263)](_0x5a9a8e(0x2f7))[_0x5a9a8e(0x2e0)]({'botID':botID})[_0x5a9a8e(0x1fd)]();_0x5cdd86&&dbConfig[_0x5a9a8e(0x263)](_0x5a9a8e(0x2f7))['find']({'botID':botID})[_0x5a9a8e(0x2d6)](_0x3cb85a)['write'](),config={..._0x3cb85a},proxyEmit(_0x5a9a8e(0x1ed),emittedConfiguration());}function resetHistory(){const _0x49261e=_0x315a22;logger[_0x49261e(0x1d2)]('Resetting\x20bot\x20history');try{if(fs[_0x49261e(0x278)](path['join'](configpath,_0x49261e(0x196)+botID+_0x49261e(0x275))))fs[_0x49261e(0x291)](path[_0x49261e(0x238)](configpath,_0x49261e(0x196)+botID+'-events.json'));if(fs[_0x49261e(0x278)](path[_0x49261e(0x238)](configpath,_0x49261e(0x196)+botID+_0x49261e(0x266))))fs[_0x49261e(0x291)](path[_0x49261e(0x238)](configpath,'bot-'+botID+_0x49261e(0x266)));if(fs[_0x49261e(0x278)](path[_0x49261e(0x238)](configpath,'bot-'+botID+_0x49261e(0x28d))))fs[_0x49261e(0x291)](path[_0x49261e(0x238)](configpath,_0x49261e(0x196)+botID+_0x49261e(0x28d)));}catch(_0x53ff0f){if(_0x53ff0f)logger['full'](_0x49261e(0x295),_0x53ff0f);}const _0x2d6a27=getDate();let _0x15af76=[];currentCoins[_0x49261e(0x24f)](_0x237966=>{const _0x295950=_0x49261e;_0x15af76[_0x295950(0x298)]({'coin':_0x237966[_0x295950(0x17e)],'number':_0x237966['number'],'price':_0x237966[_0x295950(0x12e)]});});let _0x3e5987=dbConfig['get'](_0x49261e(0x2f7))[_0x49261e(0x2e0)]({'botID':botID})[_0x49261e(0x1fd)]();_0x3e5987&&(dbConfig[_0x49261e(0x263)](_0x49261e(0x2f7))[_0x49261e(0x2e0)]({'botID':botID})['assign']({'liquidity':[{'date':_0x2d6a27,'changes':_0x15af76}]})[_0x49261e(0x194)](),config[_0x49261e(0x1bc)]=[]),restartBot(!![]);}function noslash(_0x2a5cb6){return _0x2a5cb6['replace']('/','');}function updateHighestFee(_0x21250d){const _0x4b20b7=_0x315a22;if(_0x21250d[_0x4b20b7(0x24e)]){let _0x501262={'filled':_0x21250d[_0x4b20b7(0x1ab)]*_0x21250d[_0x4b20b7(0x164)],'amount':_0x21250d[_0x4b20b7(0x1ab)]*_0x21250d[_0x4b20b7(0x164)],'side':_0x21250d[_0x4b20b7(0x2bc)]==_0x4b20b7(0x2ec)?_0x4b20b7(0x142):_0x4b20b7(0x2ec),'price':0x1/_0x21250d[_0x4b20b7(0x164)]};_0x21250d={..._0x21250d,..._0x501262};}const _0x5a34cd=defaultFee*_0x21250d['filled']*_0x21250d['price'];lastFees[_0x4b20b7(0x312)][_0x4b20b7(0x1ad)]===0x14&&lastFees['recent20'][_0x4b20b7(0x1e1)](),lastFees[_0x4b20b7(0x312)][_0x4b20b7(0x298)](_0x5a34cd),lastFees[_0x4b20b7(0x2f9)]=Math[_0x4b20b7(0x15b)](...lastFees[_0x4b20b7(0x312)]);}async function updateNumberCoinsCcxt(_0x21f1fa){const _0x182f7b=_0x315a22;logger[_0x182f7b(0x2a4)](_0x182f7b(0x240)+_0x21f1fa[_0x182f7b(0x224)]+'\x20|\x20'+_0x21f1fa[_0x182f7b(0x165)]+_0x182f7b(0x1fa)+_0x21f1fa['filled']+_0x182f7b(0x233)+_0x21f1fa[_0x182f7b(0x2a2)]+_0x182f7b(0x1fa)+_0x21f1fa['id']);let _0x25ff85=_0x21f1fa[_0x182f7b(0x165)],_0x3ecc98=![];currentCoins[_0x182f7b(0x24f)](_0xd88d8c=>{const _0x114608=_0x182f7b;_0xd88d8c['symbol']==_0x21f1fa[_0x114608(0x224)]&&(_0x3ecc98=!![]);});if(!_0x3ecc98)return;const _0x3797c1=currentCoins[_0x182f7b(0x2e0)](_0x45f18b=>_0x45f18b[_0x182f7b(0x224)]==_0x21f1fa[_0x182f7b(0x224)]),_0xda0fbf=_0x3797c1[_0x182f7b(0x17e)],_0x29ce99=_0x33cee7=>{const _0x449252=_0x182f7b,_0x5544b4=currentCoins[_0x449252(0x2e0)](_0x20ba2b=>_0x20ba2b['symbol']==_0x21f1fa['symbol']);if(_0x5544b4)_0x5544b4[_0x449252(0x220)]=_0x33cee7;};let _0x435500=![];for(const _0x1ff0e6 of lastOrders){const _0x4c987d=0x64,_0x26db5f=0x1388;let _0x36df28=0x0;while(!_0x1ff0e6[_0x182f7b(0x147)]&&_0x36df28*_0x4c987d<_0x26db5f){_0x36df28++,await sleep(_0x4c987d);}if(_0x36df28>0x0)logger[_0x182f7b(0x2a4)](_0x182f7b(0x310)+_0x36df28*_0x4c987d/0x3e8+'\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed');_0x1ff0e6[_0x182f7b(0x147)]==_0x21f1fa['id']&&(_0x435500=!![]);}if(_0x25ff85==_0x182f7b(0x135)){_0x29ce99(_0x182f7b(0x135));if(_0x21f1fa[_0x182f7b(0x1ab)]>0x0&&_0x21f1fa[_0x182f7b(0x1ab)]<_0x21f1fa['amount']){if(_0x435500){setBlockTransactionDetection(!![]),logger['debug'](_0x182f7b(0x29c)+_0x21f1fa[_0x182f7b(0x1ab)]+_0x182f7b(0x1c4)+_0x21f1fa['id']);const _0x316d95=await getCoins(balanceUpdateDelay,undefined,undefined,_0xda0fbf);[currentCoins,currentCoinsAll]=_0x316d95,setBlockTransactionDetection(![]);}else logger[_0x182f7b(0x2a4)]('1\x20-\x20partially\x20FILLED\x20('+_0x21f1fa[_0x182f7b(0x1ab)]+_0x182f7b(0x27b)+_0x21f1fa['id']),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay);}}else{if(_0x25ff85=='canceled'){_0x29ce99(_0x182f7b(0x1ba)),lastOrders=lastOrders[_0x182f7b(0x2c2)](_0x5583d1=>_0x5583d1['symbol']!=_0x21f1fa['symbol']);const _0x55f838=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x55f838,setBlockTransactionDetection(![]),await getOpenOrders(),handleOpenOrders();}else{if(_0x25ff85==_0x182f7b(0x201)){if(lastOrders)for(const _0x54d230 of lastOrders){if(_0x54d230[_0x182f7b(0x147)]==_0x21f1fa['id']){logger[_0x182f7b(0x2a4)](_0x182f7b(0x2ee)+_0x21f1fa['id']),_0x435500=!![];if(_0x54d230[_0x182f7b(0x1ab)]==0x0){setBlockTransactionDetection(!![]),logger[_0x182f7b(0x2a4)](_0x182f7b(0x2ae)+_0x21f1fa['id']);if(_0x21f1fa[_0x182f7b(0x17b)])_0x54d230['price']=_0x21f1fa['average'];else{if(_0x21f1fa[_0x182f7b(0x164)])_0x54d230[_0x182f7b(0x164)]=_0x21f1fa[_0x182f7b(0x164)];else{}}_0x54d230['filled']=_0x21f1fa[_0x182f7b(0x1ab)],updateHighestFee(_0x54d230);const _0x293426=await getCoins(balanceUpdateDelay,undefined,undefined,_0xda0fbf);[currentCoins,currentCoinsAll]=_0x293426,setBlockTransactionDetection(![]),await validateOrders(),_0x29ce99(_0x182f7b(0x1ab)),_0x54d230[_0x182f7b(0x176)]={'currency':_0x21f1fa[_0x182f7b(0x176)]?_0x21f1fa[_0x182f7b(0x176)][_0x182f7b(0x190)]:null,'cost':_0x21f1fa[_0x182f7b(0x176)]?_0x21f1fa['fee'][_0x182f7b(0x2f3)]:0x0},await updatePnL(_0x54d230);}}}!_0x435500&&(logger[_0x182f7b(0x2a4)](_0x182f7b(0x1c7)+_0x21f1fa['id']),_0x29ce99(_0x182f7b(0x1ab)),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay),await updateOpenOrders(),handleOpenOrders());}}}if(lastBalances){let _0x557acb=JSON[_0x182f7b(0x19a)](lastBalances[_0x182f7b(0x145)]);const _0xdc650a=_0x557acb[_0x182f7b(0x2e0)](_0x2cae88=>_0x2cae88['symbol']==_0x21f1fa[_0x182f7b(0x224)]);if(_0xdc650a){if(_0x25ff85=='open')_0xdc650a['orderstatus']=_0xdc650a['orderstatus']==_0x182f7b(0x1ab)?_0x182f7b(0x1ab):_0x182f7b(0x135);else{if(_0x25ff85==_0x182f7b(0x1ba))_0xdc650a[_0x182f7b(0x220)]=_0xdc650a[_0x182f7b(0x220)]==_0x182f7b(0x1ab)?'filled':'canceled';else _0x25ff85==_0x182f7b(0x201)&&(_0xdc650a[_0x182f7b(0x220)]=_0x182f7b(0x1ab));}}lastBalances={...lastBalances,'portfolio':JSON['stringify'](_0x557acb)},proxyEmit(_0x182f7b(0x237),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x1e55a0=_0x315a22;await getOpenOrders();let _0x5593ce=![];currentCoins[_0x1e55a0(0x24f)](_0x16bfed=>{const _0x2c6746=_0x1e55a0;_0x5593ce=allOpenOrders['find'](_0x49a5c7=>_0x49a5c7[_0x2c6746(0x224)]==_0x16bfed[_0x2c6746(0x224)]),_0x16bfed[_0x2c6746(0x220)]=_0x5593ce?_0x2c6746(0x135):_0x2c6746(0x2bd);});}async function fetchBalance(_0x2f573b=!![]){const _0x2f5f8b=_0x315a22;let _0x5c1dc0,_0xca380,_0x230036,_0x3dd48a=0x0;while(!_0xca380&&_0x3dd48a<maxRetries){try{return _0x5c1dc0=await exchange[_0x2f5f8b(0x1b4)](),_0xca380=_0x5c1dc0[_0x2f5f8b(0x20d)],_0xca380;}catch(_0x34e17b){_0x230036=_0x34e17b,_0x3dd48a++,await sleep(retryInterval);}}return!_0x2f573b?handleErrorNoStop(_0x230036,_0x2f5f8b(0x2a9)):await handleError(_0x230036,_0x2f5f8b(0x2a9)),![];}async function getCoins(_0x92a599=0x0,_0x5c9340=!![],_0x4be2ac=config[_0x315a22(0x1f8)],_0x3c346d){const _0x4ea0b7=_0x315a22;let _0x4ba681=[],_0x530935=[],_0x1822d0=[],_0x558a24;if(_0x92a599)await sleep(_0x92a599);if(botPaused)return[currentCoins,currentCoinsAll];let _0x6d2ffe=![],_0x53d83f=0x0,_0xa90ea7,_0x1a4407;_0x3c346d&&(_0xa90ea7=currentCoins[_0x4ea0b7(0x2e0)](_0x218649=>_0x218649['coin']==_0x3c346d),_0xa90ea7&&(_0x1a4407=_0xa90ea7[_0x4ea0b7(0x2a0)],delete _0xa90ea7[_0x4ea0b7(0x2a0)]));while(!_0x6d2ffe){_0x558a24=await fetchBalance(_0x5c9340);if(_0x558a24){if(_0x3c346d){if(_0x558a24[_0x3c346d]!=_0x1a4407)logger[_0x4ea0b7(0x2a4)](_0x4ea0b7(0x1a1)+_0x3c346d+':\x20'+_0x558a24[_0x3c346d]+'\x20('+_0x1a4407+')'),_0x6d2ffe=!![];else{logger['debug']('Invalid\x20balance\x20for\x20'+_0x3c346d+':\x20'+_0x558a24[_0x3c346d]+'\x20('+_0x1a4407+')'),_0x53d83f++;if(_0x53d83f<balanceUpdateRetries)await sleep(balanceUpdateDelay);else{logger[_0x4ea0b7(0x2a4)](_0x4ea0b7(0x1b5)+_0x53d83f+_0x4ea0b7(0x1a2));break;}}}else break;}else return[currentCoins,currentCoinsAll];}for(const [_0x27e12e,_0x5e6eb1]of Object['entries'](_0x558a24)){_0x1822d0[_0x4ea0b7(0x298)](_0x27e12e);}config['portfolio'][_0x4ea0b7(0x24f)](_0x39f05b=>{const _0xfe57d5=_0x4ea0b7;!_0x1822d0[_0xfe57d5(0x24a)](_0x39f05b['coin'])&&(_0x558a24[_0x39f05b['coin']]=0x0);});if(_0x4be2ac=='')for(const [_0x27efe4,_0x12fe2e]of Object[_0x4ea0b7(0x234)](_0x558a24)){_0x12fe2e!=0x0&&_0x4ba681[_0x4ea0b7(0x298)]({'coin':_0x27efe4});}else for(const [_0x564872,_0x4da1f0]of Object['entries'](_0x558a24)){const _0x148559=config[_0x4ea0b7(0x145)]['find'](_0x37f437=>_0x37f437[_0x4ea0b7(0x17e)]==_0x564872),_0x4127c3=_0x564872+'/'+_0x4be2ac,_0x2d4759=_0x4be2ac+'/'+_0x564872,_0x2221b8=currentCoins[_0x4ea0b7(0x2e0)](_0x4c0307=>_0x4c0307[_0x4ea0b7(0x17e)]==_0x564872);if((_0x4da1f0!=0x0||_0x148559)&&(allSymbols[_0x4ea0b7(0x24a)](_0x4127c3)||_0x564872==_0x4be2ac))_0x2221b8?_0x4ba681[_0x4ea0b7(0x298)]({..._0x2221b8,'number':Math[_0x4ea0b7(0x15b)](_0x4da1f0+(_0x148559&&_0x148559['offset']||0x0),0x0)}):_0x4ba681['push']({'coin':_0x564872,'symbol':_0x4127c3,'reverse':![],'number':Math[_0x4ea0b7(0x15b)](_0x4da1f0+(_0x148559&&_0x148559[_0x4ea0b7(0x24b)]||0x0),0x0),'orderstatus':_0x4ea0b7(0x2bd)});else{if((_0x4da1f0!=0x0||_0x148559)&&allSymbols[_0x4ea0b7(0x24a)](_0x2d4759))_0x2221b8?_0x4ba681['push']({..._0x2221b8,'number':Math[_0x4ea0b7(0x15b)](_0x4da1f0+(_0x148559&&_0x148559['offset']||0x0),0x0)}):_0x4ba681['push']({'coin':_0x564872,'symbol':_0x2d4759,'reverse':!![],'number':Math[_0x4ea0b7(0x15b)](_0x4da1f0+(_0x148559&&_0x148559[_0x4ea0b7(0x24b)]||0x0),0x0),'orderstatus':'none'});else _0x148559&&_0x4ba681[_0x4ea0b7(0x298)]({'coin':_0x148559[_0x4ea0b7(0x17e)],'symbol':_0x148559[_0x4ea0b7(0x224)],'reverse':_0x148559[_0x4ea0b7(0x24e)],'number':0x0,'orderstatus':_0x4ea0b7(0x2bd)});}}return _0x4ba681[_0x4ea0b7(0x25e)]((_0x5243a0,_0x4ca993)=>_0x5243a0[_0x4ea0b7(0x2ab)]<_0x4ca993[_0x4ea0b7(0x2ab)]?0x1:_0x4ca993[_0x4ea0b7(0x2ab)]<_0x5243a0[_0x4ea0b7(0x2ab)]?-0x1:0x0),_0x530935=cloneDeep(_0x4ba681),_0x4ba681=_0x4ba681['filter'](_0xba2194=>{const _0xcb9504=_0x4ea0b7,_0x48534e=config['portfolio'][_0xcb9504(0x2e0)](_0x763cc2=>_0x763cc2['coin']==_0xba2194[_0xcb9504(0x17e)]);return _0x48534e&&!_0x48534e[_0xcb9504(0x218)];}),[_0x4ba681,_0x530935];}async function getOpenOrders(){const _0x417b6a=_0x315a22;let _0x110f72;allOpenOrders=[];try{for(const _0x33ae27 of config[_0x417b6a(0x145)]){!_0x33ae27[_0x417b6a(0x218)]&&_0x33ae27['coin']!=config['basecoin']&&(_0x110f72=await exchange[_0x417b6a(0x216)](_0x33ae27['symbol']),_0x110f72[_0x417b6a(0x1ad)]>0x0&&allOpenOrders[_0x417b6a(0x298)](_0x110f72[0x0]));}}catch(_0x5b7c9e){await handleError(_0x5b7c9e,_0x417b6a(0x1ee));}}async function handleOpenOrders(_0x3e45a6=0x0){const _0x4043b6=_0x315a22;allOpenOrders[_0x4043b6(0x1ad)]==0x0&&lockOrders==ORDERS[_0x4043b6(0x2a7)]&&allOrdersPlaced&&(_0x3e45a6==0x0?(logger['debug'](_0x4043b6(0x27f)),_0x3e45a6++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x4043b6(0x2a4)](_0x4043b6(0x2ef)),validateOrders(_0x4043b6(0x2d9))));}async function testAPI(){const _0x4be69a=_0x315a22;try{return await exchange[_0x4be69a(0x1b4)](),!![];}catch(_0x13b792){return loading[_0x4be69a(0x200)]=!![],_0x13b792[_0x4be69a(0x1e5)]()['toLowerCase']()['includes'](_0x4be69a(0x166))||_0x13b792[_0x4be69a(0x1e5)]()[_0x4be69a(0x183)]()['includes']('request-time')?(logHistory(_0x4be69a(0x2e7),_0x4be69a(0x211)),loading[_0x4be69a(0x2e7)]=_0x4be69a(0x24d)):(handleErrorNoStop(_0x13b792,_0x4be69a(0x1d1)),logger[_0x4be69a(0x2a4)](_0x4be69a(0x2d5),_0x13b792)),emitLoadingProgress(),botPaused=!![],![];}}async function testNewAPI(_0x48fa6e){const _0x3d104e=_0x315a22;logger[_0x3d104e(0x2a4)](_0x3d104e(0x150));const _0x47be55=ccxt[_0x3d104e(0x156)][_0x48fa6e[_0x3d104e(0x1b2)][_0x3d104e(0x183)]()],_0x227271=new _0x47be55({'apiKey':_0x48fa6e[_0x3d104e(0x2dc)],'secret':_0x48fa6e[_0x3d104e(0x236)],'options':{'defaultType':_0x3d104e(0x243)}});if(_0x48fa6e[_0x3d104e(0x22b)])_0x227271[_0x3d104e(0x2fe)]=_0x48fa6e[_0x3d104e(0x22b)];if(_0x227271['has']['sandbox'])_0x227271[_0x3d104e(0x26d)](_0x48fa6e[_0x3d104e(0x306)]);try{await _0x227271['fetchBalance'](),botPaused=![];}catch(_0x5d6a21){logger['debug']('Error\x20in\x20testNewAPI():\x20'+_0x5d6a21[_0x3d104e(0x1e5)]());throw _0x5d6a21;}}function cloneDeep(_0x484d7c){const _0x652fa=_0x315a22;return JSON['parse'](JSON[_0x652fa(0x22e)](_0x484d7c));}async function getPortfolio(_0xf5c9f9){const _0x737eb0=_0x315a22;let _0x580c51=[],_0x52eb73=[],_0x276d14=[],_0x522a45;_0xf5c9f9['apiKey']=decryptRSA(secure['privateKey'],_0xf5c9f9['apiKey']),_0xf5c9f9[_0x737eb0(0x236)]=decryptRSA(secure[_0x737eb0(0x1fe)],_0xf5c9f9[_0x737eb0(0x236)]);if(_0xf5c9f9[_0x737eb0(0x22b)])_0xf5c9f9[_0x737eb0(0x22b)]=decryptRSA(secure[_0x737eb0(0x1fe)],_0xf5c9f9[_0x737eb0(0x22b)]);if(_0xf5c9f9[_0x737eb0(0x2dc)]!==_0x737eb0(0x2d7)||_0xf5c9f9[_0x737eb0(0x236)]!=='************'||_0xf5c9f9[_0x737eb0(0x22b)]&&_0xf5c9f9[_0x737eb0(0x22b)]!==_0x737eb0(0x2d7)){if(config['exchange']){if(_0xf5c9f9['apiKey']==_0x737eb0(0x2d7))_0xf5c9f9[_0x737eb0(0x2dc)]=config[_0x737eb0(0x2dc)];if(_0xf5c9f9[_0x737eb0(0x236)]==_0x737eb0(0x2d7))_0xf5c9f9[_0x737eb0(0x236)]=config[_0x737eb0(0x236)];if(_0xf5c9f9['apiPassword']==_0x737eb0(0x2d7))_0xf5c9f9[_0x737eb0(0x22b)]=config[_0x737eb0(0x22b)];}try{if(_0xf5c9f9[_0x737eb0(0x14b)])await testNewAPI(_0xf5c9f9);}catch(_0x3e5125){if(_0x3e5125[_0x737eb0(0x1e5)]()[_0x737eb0(0x24a)](_0x737eb0(0x19d))){logHistory(_0x737eb0(0x2e7),_0x737eb0(0x1c6)),logHistory('error',_0x737eb0(0x239)+_0x3e5125[_0x737eb0(0x1e5)]()),proxyEmit(_0x737eb0(0x21d),![]);return;}else{if(_0x3e5125[_0x737eb0(0x1e5)]()[_0x737eb0(0x24a)](_0x737eb0(0x203))){logHistory('error','Exchange\x20permission\x20denied\x20-\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange'),logHistory('error','Error\x20details:\x20'+_0x3e5125[_0x737eb0(0x1e5)]()),proxyEmit(_0x737eb0(0x21d),![]);return;}else{logHistory(_0x737eb0(0x2e7),_0x737eb0(0x1a0)+_0x3e5125[_0x737eb0(0x1e5)]()),logger[_0x737eb0(0x2a4)](_0x737eb0(0x2d5),_0x3e5125),proxyEmit('portfolio1',![]);return;}}}exchange?updateExchange(_0xf5c9f9[_0x737eb0(0x2dc)],_0xf5c9f9['apiSecret'],_0xf5c9f9[_0x737eb0(0x22b)]):await initExchange(_0xf5c9f9['exchange'],_0xf5c9f9[_0x737eb0(0x2dc)],_0xf5c9f9[_0x737eb0(0x236)],_0xf5c9f9[_0x737eb0(0x22b)],_0xf5c9f9[_0x737eb0(0x306)]);await loadSymbols();const _0x1cf306=await getCoins(0x0,![],_0xf5c9f9[_0x737eb0(0x1f8)]);_0x276d14=cloneDeep(_0x1cf306[0x1]);}else{const _0x164e8d=await getCoins();_0x276d14=cloneDeep(_0x164e8d[0x1]);}if(_0xf5c9f9[_0x737eb0(0x1f8)]=='')proxyEmit(_0x737eb0(0x21d),!![]),proxyEmit('portfolio2',_0x276d14);else{_0x276d14[_0x737eb0(0x24f)](_0x4b1479=>{const _0x13b28e=_0x737eb0;if(_0x4b1479[_0x13b28e(0x17e)]!=_0xf5c9f9['basecoin']&&allSymbols[_0x13b28e(0x24a)](_0x4b1479['symbol']))_0x580c51[_0x13b28e(0x298)](_0x4b1479[_0x13b28e(0x224)]);});if(_0x580c51['length']==0x0)logHistory(_0x737eb0(0x2e7),'Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot');else{try{_0x52eb73=await getTickers(_0x580c51);}catch(_0x5998dd){logHistory(_0x737eb0(0x2e7),'Unknown\x20error\x20-\x20check\x20logs'),logger[_0x737eb0(0x2a4)](_0x737eb0(0x2d5),_0x5998dd),proxyEmit(_0x737eb0(0x21d),![]);return;}_0x276d14[_0x737eb0(0x24f)](_0x168107=>{const _0x4d108e=_0x737eb0;_0x168107[_0x4d108e(0x17e)]!=_0xf5c9f9[_0x4d108e(0x1f8)]?_0x52eb73[_0x168107['symbol']]?_0x52eb73[_0x168107[_0x4d108e(0x224)]][_0x4d108e(0x12e)]?_0x522a45=_0x168107[_0x4d108e(0x24e)]?0x1/_0x52eb73[_0x168107[_0x4d108e(0x224)]]['last']:_0x52eb73[_0x168107[_0x4d108e(0x224)]]['last']:_0x522a45=0x0:_0x522a45=0x0:_0x522a45=0x1,_0x168107[_0x4d108e(0x164)]=formatResult(_0x522a45,0x8);}),await getMarketCap(_0x276d14),proxyEmit(_0x737eb0(0x21d),!![]),proxyEmit(_0x737eb0(0x16c),_0x276d14);}}}function truncateTradeAmount(_0x327648,_0xfe02be){let _0x2581f0=0x0;try{_0x2581f0=exchange['amountToPrecision'](_0x327648,_0xfe02be);}catch(_0x2d5636){}return _0x2581f0;}function checkMinimums(_0x26b5fc){const _0x46334e=_0x315a22;let _0x31362d=!![];const _0x1aed30=!_0x26b5fc[_0x46334e(0x24e)]?markets[_0x26b5fc[_0x46334e(0x224)]][_0x46334e(0x177)][_0x46334e(0x2a2)][_0x46334e(0x1f5)]:markets[_0x26b5fc['symbol']][_0x46334e(0x177)][_0x46334e(0x2f3)][_0x46334e(0x1f5)],_0x543cef=!_0x26b5fc[_0x46334e(0x24e)]?markets[_0x26b5fc[_0x46334e(0x224)]]['limits'][_0x46334e(0x2f3)][_0x46334e(0x1f5)]:markets[_0x26b5fc[_0x46334e(0x224)]][_0x46334e(0x177)][_0x46334e(0x2a2)][_0x46334e(0x1f5)],_0x15fdee=truncateTradeAmount(_0x26b5fc[_0x46334e(0x224)],_0x26b5fc[_0x46334e(0x1ec)]);_0x26b5fc[_0x46334e(0x1ec)]=_0x15fdee;if(Math[_0x46334e(0x15a)](_0x15fdee)<_0x1aed30)_0x31362d=![];if(Math[_0x46334e(0x15a)](_0x15fdee)*_0x26b5fc[_0x46334e(0x12e)]<_0x543cef)_0x31362d=![];if(_0x26b5fc['side']==_0x46334e(0x2ec)){let _0xe8403f=config[_0x46334e(0x145)][_0x46334e(0x2e0)](_0x1021ba=>_0x1021ba[_0x46334e(0x17e)]==_0x26b5fc['coin']);if(_0xe8403f[_0x46334e(0x24b)]>0x0){if(Math[_0x46334e(0x15a)](_0x15fdee)>_0x26b5fc[_0x46334e(0x2b5)]-_0xe8403f[_0x46334e(0x24b)])_0x31362d=![];}else{if(Math['abs'](_0x15fdee)>_0x26b5fc[_0x46334e(0x2b5)])_0x31362d=![];}}if(_0x26b5fc[_0x46334e(0x2bc)]==_0x46334e(0x142)){let _0x2280c2=config['portfolio'][_0x46334e(0x2e0)](_0x4ed1a6=>_0x4ed1a6['coin']==config[_0x46334e(0x1f8)]),_0xa7af88=currentCoins['find'](_0x2939cc=>_0x2939cc[_0x46334e(0x17e)]==config['basecoin']);if(_0x2280c2[_0x46334e(0x24b)]>0x0){if(Math['abs'](_0x15fdee)*_0x26b5fc['last']>_0xa7af88[_0x46334e(0x2b5)]-_0x2280c2['offset'])_0x31362d=![];}else{if(Math[_0x46334e(0x15a)](_0x15fdee)*_0x26b5fc['last']>_0xa7af88['number'])_0x31362d=![];}}return _0x31362d;}async function getBalances(_0xab09f1=!![]){const _0x5dff24=_0x315a22;if(botPaused)return;let _0x58fc59=0x0,_0x5b24d6;const _0x585de6=config[_0x5dff24(0x1f2)];if(config[_0x5dff24(0x182)]&&config[_0x5dff24(0x28c)]<0x0)await validate24hChanges();currentCoins[_0x5dff24(0x24f)](_0x2011c3=>{const _0x2582f6=_0x5dff24;if(_0x2011c3[_0x2582f6(0x17e)]!=config[_0x2582f6(0x1f8)]){let _0x259c92=gTicker[noslash(_0x2011c3[_0x2582f6(0x224)])];_0x5b24d6=_0x2011c3['reverse']?0x1/_0x259c92:_0x259c92;}else _0x5b24d6=0x1;let _0xc96fda=_0x2011c3[_0x2582f6(0x2b5)]*_0x5b24d6;_0x58fc59+=_0xc96fda,_0x2011c3['last']=formatResult(Number(_0x5b24d6),0x8),_0x2011c3['value']=_0xc96fda;}),currentCoins[_0x5dff24(0x24f)](_0x1cecb0=>{const _0x2781cc=_0x5dff24;let _0x7b3b57=config['portfolio']['find'](_0xf87719=>_0xf87719[_0x2781cc(0x17e)]==_0x1cecb0['coin']),_0x38daa3=Number(_0x7b3b57['distribution']),_0x10e959=_0x1cecb0['value']/_0x58fc59*0x64,_0x5cebae=_0x38daa3*_0x58fc59/0x64/_0x1cecb0[_0x2781cc(0x12e)]-_0x1cecb0[_0x2781cc(0x2b5)];_0x1cecb0[_0x2781cc(0x309)]=formatResult(_0x10e959,0x3),_0x1cecb0[_0x2781cc(0x210)]=formatResult(_0x38daa3,0x3),_0x1cecb0[_0x2781cc(0x1ec)]=formatResult(_0x5cebae,0x8),_0x1cecb0[_0x2781cc(0x2bc)]='',_0x1cecb0['valid']=![];if(_0x1cecb0['coin']!=config['basecoin']){if(_0x1cecb0[_0x2781cc(0x309)]>_0x38daa3)_0x1cecb0[_0x2781cc(0x2bc)]=_0x2781cc(0x2ec),_0x1cecb0['valid']=checkMinimums(_0x1cecb0);else _0x1cecb0['distribution']<_0x38daa3&&(_0x1cecb0[_0x2781cc(0x2bc)]=_0x2781cc(0x142),_0x1cecb0['valid']=checkMinimums(_0x1cecb0));}_0x1cecb0[_0x2781cc(0x2ab)]=_0x1cecb0[_0x2781cc(0x309)]/_0x1cecb0[_0x2781cc(0x210)]-0x1;if(_0x1cecb0[_0x2781cc(0x220)]==_0x2781cc(0x1ab)||_0x1cecb0[_0x2781cc(0x220)]==_0x2781cc(0x1ba))_0x1cecb0['orderstatus']=_0x2781cc(0x2bd);}),currentCoins['sort']((_0x548ba2,_0x1d4c33)=>_0x548ba2[_0x5dff24(0x2ab)]<_0x1d4c33[_0x5dff24(0x2ab)]?0x1:_0x1d4c33[_0x5dff24(0x2ab)]<_0x548ba2[_0x5dff24(0x2ab)]?-0x1:0x0);const _0x3cab9e=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x3cab9e[_0x5dff24(0x254)],'usd':_0x3cab9e[_0x5dff24(0x301)],'portfolio':JSON[_0x5dff24(0x22e)](currentCoins),'threshold':_0x585de6},proxyEmit(_0x5dff24(0x237),{'serverversion':serverversion,'balances':lastBalances});if(_0xab09f1){if(config[_0x5dff24(0x182)])headlessMode({'portfolio':currentCoins,'threshold':_0x585de6});else lockOrders==ORDERS[_0x5dff24(0x21a)]&&!coolingDown&&notifyBalance({'portfolio':currentCoins,'threshold':_0x585de6});}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x53286a=getNormalizedPerformance();getStartingBalances(_0x53286a),emitPerformance(_0x53286a);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}function getPnL(){const _0x2e1e18=_0x315a22;let _0x2a1b21=dbCoinResults[_0x2e1e18(0x263)]('coins')[_0x2e1e18(0x1fd)](),_0x13c436=0x0;return Object[_0x2e1e18(0x234)](_0x2a1b21)[_0x2e1e18(0x24f)](([_0x3c8247,_0x481e67])=>{_0x13c436+=_0x481e67['realizedPnL'];}),_0x13c436;}async function storePerformance(){const _0x480f86=_0x315a22;if(!lastBalances)return;let _0x407a96=[],_0x538703;const _0x10f5af=getPnL();let _0x207de7=JSON['parse'](lastBalances[_0x480f86(0x145)]);_0x207de7['sort']((_0x3fb58f,_0x8f4012)=>_0x3fb58f[_0x480f86(0x17e)]>_0x8f4012['coin']?0x1:_0x8f4012['coin']>_0x3fb58f['coin']?-0x1:0x0),_0x207de7[_0x480f86(0x24f)](_0x248507=>{const _0x2ce0b2=_0x480f86;let _0x225664={'coin':_0x248507['coin'],'number':_0x248507['number'],'price':_0x248507[_0x2ce0b2(0x12e)]};_0x407a96['push'](_0x225664);});const _0x2f1ab8=await getFiat(),_0x5747c2=getTimeStamp()[_0x480f86(0x1d0)]('\x20')[0x0],_0x427d89=dbPerformance[_0x480f86(0x263)](_0x480f86(0x2c5))[_0x480f86(0x2e0)]({'date':_0x5747c2})[_0x480f86(0x1fd)]();_0x538703={'date':_0x5747c2,'eur':_0x2f1ab8[_0x480f86(0x254)],'usd':_0x2f1ab8[_0x480f86(0x301)],'coins':_0x407a96,'pnl':_0x10f5af},_0x427d89?_0x538703[_0x480f86(0x2ca)]!=config[_0x480f86(0x28f)]&&dbPerformance['get'](_0x480f86(0x2c5))[_0x480f86(0x2e0)]({'date':_0x5747c2})['assign'](_0x538703)[_0x480f86(0x194)]():dbPerformance[_0x480f86(0x263)](_0x480f86(0x2c5))[_0x480f86(0x298)](_0x538703)[_0x480f86(0x194)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x2ea197=_0x315a22;let _0x1e2949=[];if(dbPerformance[_0x2ea197(0x13c)]('data')[_0x2ea197(0x1fd)]()){let _0x3e5025=dbPerformance[_0x2ea197(0x263)]('data')[_0x2ea197(0x2fd)]()[_0x2ea197(0x2c2)](_0x23148f=>{if(_0x23148f['coins']['length']==0x0)return![];else return!![];})[_0x2ea197(0x2b1)]('date')[_0x2ea197(0x1fd)](),_0x5d7800=[...config[_0x2ea197(0x1bc)]];_0x5d7800[_0x2ea197(0x25e)]((_0x2194f4,_0x59db1f)=>_0x2194f4[_0x2ea197(0x2ca)]>_0x59db1f[_0x2ea197(0x2ca)]?-0x1:_0x59db1f['date']>_0x2194f4['date']?0x1:0x0);let _0x110a52=0x1,_0x32f41f=[],_0x7b130=0x0;_0x3e5025[_0x2ea197(0x13d)]()[_0x2ea197(0x24e)]()[_0x2ea197(0x24f)]((_0x3db87b,_0x132856)=>{const _0x12195e=_0x2ea197;if(_0x5d7800[_0x7b130]){if(_0x3e5025[_0x3e5025[_0x12195e(0x1ad)]-_0x132856]&&_0x5d7800[_0x7b130][_0x12195e(0x2ca)]==_0x3e5025[_0x3e5025[_0x12195e(0x1ad)]-_0x132856][_0x12195e(0x2ca)]){if(_0x132856<_0x3e5025[_0x12195e(0x1ad)]){let _0x179357=0x0,_0x4a254e=0x0;_0x3e5025[_0x3e5025[_0x12195e(0x1ad)]-_0x132856][_0x12195e(0x1cd)][_0x12195e(0x24f)](_0x49b0c8=>{const _0x140d83=_0x12195e;_0x4a254e+=_0x49b0c8[_0x140d83(0x2b5)]*_0x49b0c8[_0x140d83(0x164)];}),_0x5d7800[_0x7b130][_0x12195e(0x1b8)][_0x12195e(0x24f)](_0x3d0585=>{const _0x11ec51=_0x12195e;_0x179357+=_0x3d0585[_0x11ec51(0x2b5)]*_0x3d0585[_0x11ec51(0x164)];}),_0x110a52*=_0x179357/(_0x4a254e-_0x179357)+0x1;}_0x7b130++;}}let _0xbf2fcd=0x0;_0x3db87b[_0x12195e(0x1cd)][_0x12195e(0x24f)](_0x12104f=>{const _0x2e5dfc=_0x12195e;_0xbf2fcd+=_0x12104f[_0x2e5dfc(0x2b5)]*_0x12104f['price'];}),_0x32f41f[_0x3e5025[_0x12195e(0x1ad)]-_0x132856-0x1]=_0xbf2fcd*(_0x110a52-0x1);});let _0x49b1fb=[];_0x5d7800=[...config[_0x2ea197(0x1bc)]]||[];let _0x29e25d=0x0;_0x7b130=0x0,_0x3e5025[_0x2ea197(0x24f)]((_0x1159d5,_0xbbb55b)=>{const _0x4ba8c5=_0x2ea197;if(_0x5d7800[_0x7b130]){const _0x111c53=fns[_0x4ba8c5(0x19a)](_0x5d7800[_0x7b130][_0x4ba8c5(0x2ca)],_0x4ba8c5(0x143),new Date()),_0x5b780b=fns['parse'](_0x1159d5[_0x4ba8c5(0x2ca)],_0x4ba8c5(0x143),new Date());if(fns[_0x4ba8c5(0x1a8)](_0x111c53,_0x5b780b)){let _0x2e1cbf=0x0;_0x5d7800[_0x7b130][_0x4ba8c5(0x1b8)][_0x4ba8c5(0x24f)](_0x789643=>{const _0x559dc3=_0x4ba8c5;!_0x49b1fb[_0x789643['coin']]?_0x49b1fb[_0x789643[_0x559dc3(0x17e)]]=_0x789643[_0x559dc3(0x2b5)]:(_0x2e1cbf=_0x49b1fb[_0x789643['coin']],_0x49b1fb[_0x789643[_0x559dc3(0x17e)]]+=_0x789643[_0x559dc3(0x2b5)]);const _0x254455=_0x1159d5['coins']['find'](_0x54d3f0=>_0x54d3f0[_0x559dc3(0x17e)]==_0x789643['coin']);(!_0x254455||_0x254455['number']==0x0)&&(_0x29e25d+=(-_0x789643[_0x559dc3(0x2b5)]-_0x2e1cbf)*_0x789643[_0x559dc3(0x164)]);}),_0x7b130++;}}_0x1159d5[_0x4ba8c5(0x1cd)][_0x4ba8c5(0x24f)]((_0x48b1e5,_0x1d70e1)=>{const _0x54b63e=_0x4ba8c5;_0x49b1fb[_0x48b1e5[_0x54b63e(0x17e)]]&&(_0x48b1e5[_0x54b63e(0x280)]=_0x49b1fb[_0x48b1e5[_0x54b63e(0x17e)]]);}),_0x1e2949[_0x4ba8c5(0x298)]({'date':_0x1159d5[_0x4ba8c5(0x2ca)],'eur':_0x1159d5['eur'],'usd':_0x1159d5[_0x4ba8c5(0x301)],'offset':_0x32f41f[_0xbbb55b],'netoffset':_0x29e25d,'coins':_0x1159d5[_0x4ba8c5(0x1cd)],'pnl':_0x1159d5[_0x4ba8c5(0x2d1)]});});}return _0x1e2949;}function emitPerformance(_0x492c10){const _0x28e014=_0x315a22;_0x492c10[_0x28e014(0x1ad)]!==0x0?(proxyEmit(_0x28e014(0x277),_0x492c10),lastPerformanceEmitted=getDate()):proxyEmit(_0x28e014(0x277),[]);}function _0x2100(_0x527f39,_0x589333){const _0x1186f7=_0x2c2b();return _0x2100=function(_0x16020b,_0x30e877){_0x16020b=_0x16020b-0x12e;let _0x2c2bb3=_0x1186f7[_0x16020b];return _0x2c2bb3;},_0x2100(_0x527f39,_0x589333);}function getPerf(_0xff81fc,_0x16040d){const _0x56ec72=_0x315a22;let _0x542ff0=0x0,_0x14f6e3=0x0,_0x3cfab4=0x0;_0xff81fc[_0x56ec72(0x1cd)][_0x56ec72(0x24f)](_0x143e08=>{const _0x473c8c=_0x56ec72;_0x542ff0+=_0x143e08[_0x473c8c(0x2b5)]*_0x143e08['price'];});_0x16040d&&(_0x542ff0+=_0xff81fc[_0x56ec72(0x24b)]);if(config['basecoin']===_0x56ec72(0x192)||config[_0x56ec72(0x1f8)]===_0x56ec72(0x264)||config[_0x56ec72(0x1f8)]===_0x56ec72(0x2a6))_0x14f6e3=_0x542ff0*_0xff81fc[_0x56ec72(0x254)],_0x3cfab4=_0x542ff0*_0xff81fc['usd'];else{if(usdBasecoins[_0x56ec72(0x24a)](config[_0x56ec72(0x1f8)]))_0x14f6e3=_0x542ff0*_0xff81fc[_0x56ec72(0x254)]/_0xff81fc[_0x56ec72(0x301)],_0x3cfab4=_0x542ff0;else config['basecoin']===_0x56ec72(0x2e1)&&(_0x14f6e3=_0x542ff0,_0x3cfab4=_0x542ff0*_0xff81fc[_0x56ec72(0x301)]/_0xff81fc[_0x56ec72(0x254)]);}return[_0x542ff0,_0x14f6e3,_0x3cfab4];}function CurrencyFactor(_0x131dc0,_0x26feec,_0x6fc73c){const _0x182970=_0x315a22;let _0x311225;if(_0x26feec===_0x182970(0x192)||_0x26feec===_0x182970(0x264)||_0x26feec===_0x182970(0x2a6))_0x311225=_0x6fc73c==='EUR'?_0x131dc0['eur']:_0x131dc0['usd'];else{if(usdBasecoins[_0x182970(0x24a)](_0x26feec))_0x311225=_0x6fc73c===_0x182970(0x2e1)?_0x131dc0['eur']/_0x131dc0[_0x182970(0x301)]:0x1;else _0x26feec===_0x182970(0x2e1)&&(_0x311225=_0x6fc73c===_0x182970(0x2e1)?0x1:_0x131dc0[_0x182970(0x301)]/_0x131dc0[_0x182970(0x254)]);}return _0x311225;}function getKPIs(_0x5327ce,_0x19dd03=_0x315a22(0x2e1)){const _0x4841ec=_0x315a22,_0x37f848=config[_0x4841ec(0x1f8)],_0x322a73=lastBalances,_0xe6bcf7=currentCoins,_0x4f5343=getNormalizedPerformance(),_0x4d4d21=CurrencyFactor(_0x322a73,config[_0x4841ec(0x1f8)],_0x19dd03);let _0x2fb2cf=0x0;_0xe6bcf7['forEach'](_0x74084a=>{_0x2fb2cf+=_0x74084a['number']*_0x74084a['last'];});_0x5327ce['includes'](_0x4841ec(0x289))&&(_0x2fb2cf*=_0x4d4d21);let _0x10aa83;if(_0x2fb2cf!==0x0){if(_0x5327ce===_0x4841ec(0x1f8)||_0x5327ce===_0x4841ec(0x289)){if(_0x5327ce===_0x4841ec(0x1f8))_0x10aa83=(_0x2fb2cf/startingBalances[_0x4841ec(0x1f8)]-0x1)*0x64;else{if(_0x19dd03==='EUR')_0x10aa83=(_0x2fb2cf/startingBalances[_0x4841ec(0x254)]-0x1)*0x64;else _0x10aa83=(_0x2fb2cf/startingBalances[_0x4841ec(0x301)]-0x1)*0x64;}}if(_0x5327ce['includes']('net')){let _0x22ef77=0x0;if(startingBalances[_0x4841ec(0x1cd)])_0xe6bcf7[_0x4841ec(0x24f)](_0x468f29=>{const _0x849a33=_0x4841ec;let _0x33164c=startingBalances[_0x849a33(0x1cd)][_0x849a33(0x2e0)](_0xdd7ed0=>_0xdd7ed0['coin']===_0x468f29[_0x849a33(0x17e)]);if(_0x33164c&&_0x33164c['coin']&&_0x468f29[_0x849a33(0x2b5)]!==0x0)_0x22ef77+=_0x33164c[_0x849a33(0x2b5)]*_0x468f29['last'];});let _0x2c753f=0x0;if(_0x4f5343[_0x4841ec(0x1ad)]!==0x0){let _0x2a8b65=_0x4f5343[_0x4f5343[_0x4841ec(0x1ad)]-0x1];_0x2c753f=_0x2a8b65['netoffset'];}_0x22ef77-=_0x2c753f;let _0x23248e;_0x5327ce===_0x4841ec(0x1dd)&&(_0x23248e=startingBalances[_0x4841ec(0x1f8)]),_0x5327ce===_0x4841ec(0x207)&&(_0x23248e=_0x19dd03===_0x4841ec(0x2e1)?startingBalances[_0x4841ec(0x254)]:startingBalances['usd'],_0x22ef77*=_0x4d4d21),_0x10aa83=(_0x2fb2cf-_0x22ef77)/_0x23248e*0x64,_0x2fb2cf=_0x2fb2cf-_0x22ef77;}if(_0x5327ce[_0x4841ec(0x24a)]('pnl')){if(_0x4f5343[_0x4841ec(0x1ad)]!==0x0&&_0xe6bcf7[_0x4841ec(0x1ad)]!==0x0){let _0x1b2e20,_0x7a6e7d=_0x4f5343[_0x4f5343[_0x4841ec(0x1ad)]-0x1]['pnl'];_0x5327ce['includes'](_0x4841ec(0x289))?(_0x1b2e20=_0x19dd03===_0x4841ec(0x2e1)?startingBalances['eur']:startingBalances[_0x4841ec(0x301)],_0x7a6e7d*=CurrencyFactor(_0x322a73,_0x37f848,_0x19dd03)):_0x1b2e20=startingBalances[_0x4841ec(0x1f8)],_0x10aa83=_0x7a6e7d/_0x1b2e20*0x64,_0x2fb2cf=_0x7a6e7d;}}if(_0x10aa83){if(_0x10aa83<0x64)_0x10aa83=_0x10aa83['toFixed'](0x2);else{if(_0x10aa83<0x3e8)_0x10aa83=_0x10aa83[_0x4841ec(0x30c)](0x1);else _0x10aa83=_0x10aa83[_0x4841ec(0x30c)](0x0);}}else _0x10aa83=Number('0')[_0x4841ec(0x30c)](0x2);if(_0x2fb2cf){if(Math[_0x4841ec(0x15a)](_0x2fb2cf)<0.000001)_0x2fb2cf=_0x2fb2cf[_0x4841ec(0x30c)](0x2);else{if(Math[_0x4841ec(0x15a)](_0x2fb2cf)<0.1)_0x2fb2cf=_0x2fb2cf[_0x4841ec(0x30c)](0x6);else{if(Math[_0x4841ec(0x15a)](_0x2fb2cf)<0x1)_0x2fb2cf=_0x2fb2cf[_0x4841ec(0x30c)](0x5);else{if(Math[_0x4841ec(0x15a)](_0x2fb2cf)<0xa)_0x2fb2cf=_0x2fb2cf[_0x4841ec(0x30c)](0x4);else{if(Math[_0x4841ec(0x15a)](_0x2fb2cf)<0x64)_0x2fb2cf=_0x2fb2cf[_0x4841ec(0x30c)](0x3);else{if(Math[_0x4841ec(0x15a)](_0x2fb2cf)<0x3e8)_0x2fb2cf=_0x2fb2cf[_0x4841ec(0x30c)](0x2);else _0x2fb2cf=_0x2fb2cf[_0x4841ec(0x30c)](0x2);}}}}}}else _0x2fb2cf=Number('0')[_0x4841ec(0x30c)](0x2);}else _0x10aa83=Number('0')[_0x4841ec(0x30c)](0x2);if(_0x10aa83>=0x0)_0x10aa83='+'+_0x10aa83;return{'value':_0x2fb2cf,'change':_0x10aa83};}async function getStartingBalances(_0x1ef932,_0x16bc2c=!![]){const _0x33d4a0=_0x315a22;if(_0x1ef932['length']!==0x0){const [_0x5c96cf,_0x24b60b,_0x574683]=getPerf(_0x1ef932[0x0],!![]);let _0x33795d=[];config[_0x33d4a0(0x145)][_0x33d4a0(0x24f)](_0x5747c5=>{const _0x20b564=_0x33d4a0;let _0x57e2df=0x0,_0x3f8d5e;config['liquidity'][_0x20b564(0x24f)](_0x590b18=>{const _0x2fc943=_0x20b564;let _0x5ee917=_0x590b18[_0x2fc943(0x1b8)]['find'](_0x17d305=>_0x17d305[_0x2fc943(0x17e)]==_0x5747c5[_0x2fc943(0x17e)]);if(_0x5ee917){_0x57e2df+=_0x5ee917[_0x2fc943(0x2b5)];if(!_0x3f8d5e)_0x3f8d5e=_0x5ee917['price'];}}),_0x33795d[_0x20b564(0x298)]({'coin':_0x5747c5[_0x20b564(0x17e)],'number':_0x57e2df,'initialprice':_0x3f8d5e});});const _0x405205={'basecoin':_0x5c96cf,'eur':_0x24b60b,'usd':_0x574683,'coins':_0x33795d};if(_0x16bc2c)proxyEmit(_0x33d4a0(0x1e2),_0x405205);startingBalances=_0x405205;}}function headlessMode(_0x4f0ee2){const _0x5ed2c5=_0x315a22;let _0x4d261e=_0x4f0ee2[_0x5ed2c5(0x145)],_0x356985=_0x4f0ee2[_0x5ed2c5(0x1f2)],_0x44b762=[];for(let _0x3119d9 of _0x4d261e){if(_0x3119d9[_0x5ed2c5(0x17e)]!=config[_0x5ed2c5(0x1f8)]){if(_0x3119d9[_0x5ed2c5(0x2ab)]>=_0x356985/0x64){if(_0x3119d9[_0x5ed2c5(0x2c7)])_0x44b762['push'](_0x3119d9);}else{if(_0x3119d9[_0x5ed2c5(0x2ab)]<=-_0x356985/0x64){if(_0x3119d9[_0x5ed2c5(0x2c7)])_0x44b762[_0x5ed2c5(0x298)](_0x3119d9);}}}}_0x44b762[_0x5ed2c5(0x1ad)]>0x0&&placeOrder(_0x44b762);}function notifyBalance(_0x28f957){const _0x54397a=_0x315a22;let _0x2b6e65=_0x28f957[_0x54397a(0x145)],_0x261770=_0x28f957[_0x54397a(0x1f2)],_0xc1a9b=[];for(let _0x483107 of _0x2b6e65){if(_0x483107[_0x54397a(0x17e)]!=config['basecoin']){if(_0x483107[_0x54397a(0x2ab)]>=_0x261770/0x64){if(_0x483107[_0x54397a(0x2c7)])_0xc1a9b['push'](_0x483107);}else{if(_0x483107['delta']<=-_0x261770/0x64){if(_0x483107['valid'])_0xc1a9b['push'](_0x483107);}}}}if(_0xc1a9b['length']>0x0){let _0x152323=_0xc1a9b[_0x54397a(0x184)](_0x25402b=>_0x25402b[_0x54397a(0x17e)]);_0x152323[_0x54397a(0x25e)]();let _0x220859=_0x152323['join'](',\x20');if(!lastCoinsToBalance)logHistory(_0x54397a(0x2b8),'Manual\x20balancing\x20required');lastCoinsToBalance=_0x220859;}}function symbolToCoin(_0x32ce25){const _0x196ec6=_0x315a22;let _0xfceecc;if(_0x32ce25[_0x196ec6(0x24a)]('/'+config['basecoin']))_0xfceecc=_0x32ce25[_0x196ec6(0x296)]('/'+config[_0x196ec6(0x1f8)],'');if(_0x32ce25['includes'](config[_0x196ec6(0x1f8)]+'/'))_0xfceecc=_0x32ce25[_0x196ec6(0x296)](config[_0x196ec6(0x1f8)]+'/','');return _0xfceecc;}function setLockOrders(_0xa7e79f){const _0x3ea46a=_0x315a22;lockOrders=_0xa7e79f,logger['debug']('Set\x20lock\x20orders\x20to:\x20'+Object[_0x3ea46a(0x222)](ORDERS)[lockOrders]);}async function unlockOrders(_0x3a51ff=![]){const _0x4f3331=_0x315a22;if(allOrdersPlaced&&lockOrders==ORDERS[_0x4f3331(0x2a7)]){setLockOrders(ORDERS['UNLOCKING']);if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);if(_0x3a51ff){const _0x520292=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x520292,setBlockTransactionDetection(![]);}validateOrdersState=_0x4f3331(0x280),persistOpenOrders([]),setLockOrders(ORDERS[_0x4f3331(0x21a)]);}}async function validateOrders(_0x310cf7){const _0x38f97b=_0x315a22;if(_0x310cf7)validateOrdersState=_0x310cf7;logger[_0x38f97b(0x2a4)](_0x38f97b(0x2c0)+validateOrdersState+'\x20|\x20lock\x20orders:\x20'+Object[_0x38f97b(0x222)](ORDERS)[lockOrders]);let _0xa3e8e=[],_0x4aeb9a=config[_0x38f97b(0x302)]==_0x38f97b(0x14c)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config['timeout']*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS['LOCKED'])return;logger[_0x38f97b(0x2a4)](_0x38f97b(0x2d0)+validateOrdersState);for(let _0x133087=lastOrders['length']-0x1;_0x133087>=0x0;_0x133087--){let _0x595d37=lastOrders[_0x133087],_0x36461e=![];_0x595d37[_0x38f97b(0x1ab)]>0x0&&(_0x36461e=!![]),_0xa3e8e['push'](_0x36461e),_0x36461e&&config['ordertype']!=_0x38f97b(0x14c)&&logHistory(_0x38f97b(0x20e),_0x38f97b(0x2f6)+_0x595d37['symbol']+'\x20'+_0x595d37[_0x38f97b(0x2bc)]+'\x20#'+formatResult(_0x595d37[_0x38f97b(0x1ab)],0x8)+'\x20@'+formatResult(_0x595d37[_0x38f97b(0x164)],0x8)),_0x36461e&&lastOrders[_0x38f97b(0x2ce)](_0x133087,0x1);}persistOpenOrders(lastOrders);const _0x44a4b0=coolingDown?_0x38f97b(0x2f5):_0x38f97b(0x197);if(validateOrdersState==_0x38f97b(0x280)){validateOrdersState=_0x38f97b(0x23f);if(_0xa3e8e[_0x38f97b(0x24a)](![])){}else await unlockOrders();}else{if(validateOrdersState==_0x38f97b(0x23f)){if(_0xa3e8e[_0x38f97b(0x24a)](![])){}else await unlockOrders();}else{if(validateOrdersState==_0x38f97b(0x18f)){let _0x3b9b16=!![];if(_0xa3e8e[_0x38f97b(0x24a)](![])){if(config[_0x38f97b(0x302)]==_0x38f97b(0x14c))logHistory(_0x38f97b(0x248),_0x38f97b(0x293)+Math[_0x38f97b(0x279)](_0x4aeb9a*validateOrderInterval/0xea60)+_0x38f97b(0x1c2)+_0x44a4b0),await unlockOrders(!![]);else{_0x3b9b16=await cancelOrders();if(_0x3b9b16)logHistory('success','Unfilled\x20order(s)\x20canceled\x20after\x20'+Math[_0x38f97b(0x279)](_0x4aeb9a*validateOrderInterval/0xea60)+_0x38f97b(0x1c2)+_0x44a4b0),await unlockOrders(!![]);else{validateOrdersState=_0x38f97b(0x23f),logHistory(_0x38f97b(0x2e7),_0x38f97b(0x294)+Math[_0x38f97b(0x279)](_0x4aeb9a*validateOrderInterval/0xea60)+_0x38f97b(0x1c2)+_0x44a4b0),logHistory(_0x38f97b(0x2e7),_0x38f97b(0x1f1));const _0x18f2a8=config[_0x38f97b(0x302)]==_0x38f97b(0x14c)?validateOrderTimeout*0x3c*0x3e8:config[_0x38f97b(0x23a)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x2ac792=_0x38f97b;validateOrders(_0x2ac792(0x18f));},_0x18f2a8);}}}else await unlockOrders(!![]);}else{if(validateOrdersState==_0x38f97b(0x2d9)){if(config[_0x38f97b(0x302)]!=_0x38f97b(0x14c))logHistory('success','No\x20more\x20open\x20orders\x20-\x20'+_0x44a4b0);await unlockOrders(!![]);}}}}}async function cancelOrders(){const _0x140c70=_0x315a22;let _0xb8b8ee=!![],_0x288d40;for(const _0x427f3c of lastOrders){let _0x5bea7b=![],_0x5f0ce1=0x0;while(!_0x5bea7b&&_0x5f0ce1<maxRetries){try{const _0x8d0d47=await exchange[_0x140c70(0x1f9)](_0x427f3c[_0x140c70(0x147)],_0x427f3c['symbol']);_0x5bea7b=!![];}catch(_0x2746cd){_0x2746cd[_0x140c70(0x1e5)]()[_0x140c70(0x24a)]('OrderNotFound')?_0x5bea7b=!![]:(_0x288d40=_0x2746cd,_0x5bea7b=![]);}!_0x5bea7b&&(_0x5f0ce1++,await sleep(retryInterval));}_0xb8b8ee=_0xb8b8ee&&_0x5bea7b;}return!_0xb8b8ee&&await handleError(_0x288d40,_0x140c70(0x29d)),_0xb8b8ee;}async function initCoinResults(_0x334ac9){const _0x181f23=_0x315a22;_0x334ac9?logger['debug'](_0x181f23(0x1e9)+_0x334ac9):logger['debug'](_0x181f23(0x159)),config[_0x181f23(0x145)][_0x181f23(0x24f)](_0x312787=>{const _0x5b8c4b=_0x181f23;if(!_0x312787[_0x5b8c4b(0x218)]&&_0x312787[_0x5b8c4b(0x17e)]!=config['basecoin']){const _0x16669f=currentCoins[_0x5b8c4b(0x2e0)](_0x41d892=>_0x41d892[_0x5b8c4b(0x17e)]==_0x312787['coin']),_0x1b33f4=gTicker[noslash(_0x312787[_0x5b8c4b(0x224)])];let _0x3b2821=_0x16669f?_0x16669f[_0x5b8c4b(0x2b5)]:null,_0x529853=_0x312787['reverse']?0x1/_0x1b33f4:_0x1b33f4,_0x14996a;config[_0x5b8c4b(0x1bc)][_0x5b8c4b(0x24f)](_0x4fefec=>{const _0x30f589=_0x5b8c4b;!_0x14996a&&(_0x14996a=_0x4fefec[_0x30f589(0x1b8)][_0x30f589(0x2e0)](_0x542b12=>_0x542b12[_0x30f589(0x17e)]==_0x312787[_0x30f589(0x17e)]),_0x14996a&&(_0x3b2821=_0x14996a[_0x30f589(0x2b5)],_0x529853=_0x14996a[_0x30f589(0x164)]));});let _0x26451f=dbCoinResults[_0x5b8c4b(0x263)]('coins')[_0x5b8c4b(0x2e0)]({'coin':_0x312787[_0x5b8c4b(0x17e)]})['value']();if(!_0x26451f){const _0xbba92d={'coin':_0x312787[_0x5b8c4b(0x17e)],'number':_0x3b2821,'breakeven':_0x529853,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x5b8c4b(0x263)]('coins')[_0x5b8c4b(0x298)](_0xbba92d)['write']();}else{if(_0x334ac9&&_0x312787[_0x5b8c4b(0x17e)]==_0x334ac9){const _0x2f362d={'coin':_0x312787[_0x5b8c4b(0x17e)],'number':_0x3b2821,'breakeven':_0x529853,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x5b8c4b(0x263)](_0x5b8c4b(0x1cd))['find']({'coin':_0x312787[_0x5b8c4b(0x17e)]})[_0x5b8c4b(0x2d6)](_0x2f362d)['write']();}}}});}async function placeOrder(_0x49e5a6){const _0x2749de=_0x315a22,_0x5c1a88=config['ordertype']==_0x2749de(0x14c)?_0x2749de(0x14c):_0x2749de(0x2ed);if(lockOrders==ORDERS[_0x2749de(0x21a)]&&!coolingDown){setLockOrders(ORDERS[_0x2749de(0x2a7)]);while(transactionDetectionOngoing){await sleep(0x64);}logger['debug'](_0x2749de(0x249)+_0x49e5a6[_0x2749de(0x184)](_0x4ef29e=>_0x4ef29e['coin'])[_0x2749de(0x238)](',\x20')),lastCoinsToBalance='',allOrdersPlaced=![],validateOrdersState=_0x2749de(0x280);let _0x183a82=![];lastOrders=[];const _0x5289ae=config[_0x2749de(0x1f2)];for(const _0x5162d8 of _0x49e5a6){let _0x46d788,_0x188db0,_0x28c70b,_0x59bb8b,_0x623920,_0x19b406=_0x5162d8['symbol'];logger[_0x2749de(0x2a4)](_0x2749de(0x141)+_0x5162d8[_0x2749de(0x17e)]+'\x20'+_0x5162d8['number']+'\x20'+_0x5162d8[_0x2749de(0x12e)]+'\x20'+_0x5162d8[_0x2749de(0x309)]+'%\x20'+_0x5162d8[_0x2749de(0x210)]+'%\x20'+(0x64*_0x5162d8[_0x2749de(0x2ab)])[_0x2749de(0x30c)](0x2)+_0x2749de(0x287)+_0x5289ae[_0x2749de(0x30c)](0x2)+'%)');const _0x2a8b34=currentCoins[_0x2749de(0x2e0)](_0x461763=>_0x461763['coin']==_0x5162d8[_0x2749de(0x17e)]);_0x2a8b34&&(_0x2a8b34[_0x2749de(0x2a0)]=_0x5162d8[_0x2749de(0x2b5)]);try{const _0x1fd781=await exchange[_0x2749de(0x1ae)](_0x19b406);_0x46d788=_0x5162d8['reverse']?0x1/_0x5162d8[_0x2749de(0x12e)]:_0x5162d8[_0x2749de(0x12e)],_0x188db0=_0x1fd781[_0x2749de(0x134)],_0x28c70b=_0x1fd781[_0x2749de(0x16f)];_0x5162d8[_0x2749de(0x24e)]?(_0x59bb8b=_0x5162d8[_0x2749de(0x2bc)]=='buy'?_0x2749de(0x2ec):_0x2749de(0x142),_0x623920=Math[_0x2749de(0x15a)](_0x5162d8[_0x2749de(0x1ec)])/_0x46d788):(_0x59bb8b=_0x5162d8[_0x2749de(0x2bc)],_0x623920=Math['abs'](_0x5162d8[_0x2749de(0x1ec)]));_0x5c1a88==_0x2749de(0x2ed)&&(config[_0x2749de(0x302)]=='limit-high'&&(_0x46d788=_0x59bb8b==_0x2749de(0x142)?_0x188db0:_0x28c70b),config[_0x2749de(0x302)]=='limit-low'&&(_0x46d788=_0x59bb8b==_0x2749de(0x142)?_0x28c70b:_0x188db0));_0x623920=formatResult(_0x623920,0x8),_0x46d788=formatResult(_0x46d788,0x8);const _0x11effa=_0x59bb8b==_0x2749de(0x2ec)?config[_0x2749de(0x1af)]?String['fromCodePoint']('0x'+config[_0x2749de(0x1af)])+'\x20':'':config[_0x2749de(0x288)]?String[_0x2749de(0x202)]('0x'+config[_0x2749de(0x288)])+'\x20':'',_0x1bf2b1=_0x5c1a88==_0x2749de(0x14c)?_0x2749de(0x2da):config[_0x2749de(0x302)]=='limit-high'?_0x2749de(0x1d4):_0x2749de(0x15c),_0x4570d8=(Math[_0x2749de(0x17a)](Math[_0x2749de(0x189)]()*0x35a4e900)+0x5f5e100)['toString']();lastOrders[_0x2749de(0x298)]({'customId':_0x4570d8,'symbol':_0x19b406,'coin':_0x5162d8[_0x2749de(0x17e)],'amount':_0x623920,'price':_0x46d788,'side':_0x59bb8b,'reverse':_0x5162d8[_0x2749de(0x24e)],'filled':0x0});let _0x563898;_0x5c1a88=='market'?_0x59bb8b=='buy'&&[_0x2749de(0x29a),_0x2749de(0x2eb),_0x2749de(0x195),_0x2749de(0x162),_0x2749de(0x1aa)][_0x2749de(0x24a)](config[_0x2749de(0x1b2)])?_0x563898=await exchange['createOrder'](_0x19b406,_0x5c1a88,_0x59bb8b,_0x623920,_0x46d788):_0x563898=await exchange['createOrder'](_0x19b406,_0x5c1a88,_0x59bb8b,_0x623920,undefined):_0x563898=await exchange[_0x2749de(0x140)](_0x19b406,_0x5c1a88,_0x59bb8b,_0x623920,_0x46d788);const _0x4aa56f=lastOrders[_0x2749de(0x1ad)]-0x1;if(_0x4aa56f>=0x0&&lastOrders[_0x4aa56f][_0x2749de(0x20b)]==_0x4570d8){lastOrders[_0x4aa56f][_0x2749de(0x147)]=_0x563898['id'];if(_0x563898['amount'])lastOrders[_0x4aa56f][_0x2749de(0x2a2)]=_0x563898[_0x2749de(0x2a2)];if(_0x563898[_0x2749de(0x164)])lastOrders[_0x4aa56f][_0x2749de(0x164)]=_0x563898[_0x2749de(0x164)];lastOrders[_0x4aa56f][_0x2749de(0x176)]=_0x563898['fee'];}if(_0x563898[_0x2749de(0x2a2)])_0x623920=_0x563898[_0x2749de(0x2a2)];if(_0x563898[_0x2749de(0x164)])_0x46d788=_0x563898[_0x2749de(0x164)];if(_0x5c1a88==_0x2749de(0x14c))logHistory('order',''+_0x11effa+_0x1bf2b1+'\x20order:\x20'+_0x19b406+'\x20'+_0x59bb8b+'\x20#'+formatResult(_0x623920,0x8)+'\x20@'+formatResult(_0x46d788,0x8));else logHistory('order',''+_0x11effa+_0x1bf2b1+_0x2749de(0x247)+_0x19b406+'\x20'+_0x59bb8b+'\x20#'+formatResult(_0x623920,0x8)+'\x20@'+formatResult(_0x46d788,0x8));logger[_0x2749de(0x2a4)](_0x2749de(0x157)+_0x563898['id']+_0x2749de(0x139)+_0x4570d8);if(config[_0x2749de(0x271)]!=0x0){let _0x2297a8=null;if(cooldownTracker[_0x2749de(0x1ad)]==config[_0x2749de(0x271)]-0x1)_0x2297a8=cooldownTracker[_0x2749de(0x1e1)]();const _0x76ee5b=getTimeStamp();cooldownTracker[_0x2749de(0x298)](_0x76ee5b);if(_0x2297a8){const _0x5edfc4=fns[_0x2749de(0x28e)](new Date(_0x76ee5b),new Date(_0x2297a8));if(_0x5edfc4<cooldownInterval){logHistory(_0x2749de(0x2e7),_0x2749de(0x2c1)+config[_0x2749de(0x271)]+_0x2749de(0x1f0)+cooldownInterval/0x3c+_0x2749de(0x2f2)+cooldownPeriod/(0xe10*0x3e8)+_0x2749de(0x2c8)),coolingDown=!![];break;}}}}catch(_0xbe6093){if(_0xbe6093[_0x2749de(0x1e5)]()[_0x2749de(0x24a)](_0x2749de(0x297)))lastOrders=lastOrders[_0x2749de(0x2c2)](_0x21c01=>_0x21c01[_0x2749de(0x224)]!=_0x19b406),logHistory(_0x2749de(0x2e7),'Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x19b406),_0x183a82=!![];else{if(_0xbe6093[_0x2749de(0x1e5)]()[_0x2749de(0x24a)](_0x2749de(0x132)))lastOrders=lastOrders[_0x2749de(0x2c2)](_0x2bcdf3=>_0x2bcdf3[_0x2749de(0x224)]!=_0x19b406),logHistory('error',_0x2749de(0x1a5)+_0x19b406),_0x183a82=!![];else{if(_0xbe6093[_0x2749de(0x1e5)]()[_0x2749de(0x24a)]('InvalidOrder'))lastOrders=lastOrders[_0x2749de(0x2c2)](_0x2d2c2a=>_0x2d2c2a[_0x2749de(0x224)]!=_0x19b406),logHistory(_0x2749de(0x2e7),'Order\x20is\x20invalid:\x20'+_0x19b406),logger[_0x2749de(0x2a4)](_0xbe6093),_0x183a82=!![];else _0xbe6093[_0x2749de(0x1e5)]()[_0x2749de(0x24a)]('must\x20be\x20greater\x20than\x20minimum\x20amount')?(lastOrders=lastOrders[_0x2749de(0x2c2)](_0x180a0a=>_0x180a0a['symbol']!=_0x19b406),logHistory(_0x2749de(0x2e7),_0x2749de(0x228)+_0x19b406),_0x183a82=!![]):(lastOrders=lastOrders[_0x2749de(0x2c2)](_0x353073=>_0x353073['symbol']!=_0x19b406),await handleError(_0xbe6093,_0x2749de(0x2f0),_0x19b406));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x2749de(0x1ad)]>0x0){const _0x179c6f=config[_0x2749de(0x302)]==_0x2749de(0x14c)?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x179c6f);}else unlockOrders();_0x183a82&&config[_0x2749de(0x182)]&&(logHistory(_0x2749de(0x2e7),_0x2749de(0x2ac)+pauseBotMsg),await pauseBot(pauseBotInterval)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x2749de(0x248),_0x2749de(0x274)));}else{if(coolingDown)!config[_0x2749de(0x182)]&&logHistory('error',_0x2749de(0x16d));else lockOrders!=ORDERS[_0x2749de(0x21a)]&&(!config[_0x2749de(0x182)]&&(config[_0x2749de(0x302)]==_0x2749de(0x14c)?logHistory(_0x2749de(0x2e7),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated'):logHistory(_0x2749de(0x2e7),_0x2749de(0x130))));}}function persistOpenOrders(_0x4a3126){const _0x98c2d1=_0x315a22,_0x47ac2e={...config,'openOrders':_0x4a3126};let _0x56fa2d=dbConfig[_0x98c2d1(0x263)](_0x98c2d1(0x2f7))[_0x98c2d1(0x2e0)]({'botID':botID})[_0x98c2d1(0x1fd)]();_0x56fa2d&&dbConfig[_0x98c2d1(0x263)](_0x98c2d1(0x2f7))[_0x98c2d1(0x2e0)]({'botID':botID})[_0x98c2d1(0x2d6)](_0x47ac2e)['write']();}function restoreOrders(){const _0x30145a=_0x315a22;let _0x42ffd7;config[_0x30145a(0x15e)]&&allOpenOrders[_0x30145a(0x24f)](_0x15c3bc=>{const _0x39166c=_0x30145a,_0x4c1366=config['openOrders'][_0x39166c(0x2e0)](_0x421cb0=>_0x421cb0[_0x39166c(0x147)]==_0x15c3bc['id']);_0x4c1366&&(lastOrders[_0x39166c(0x298)](_0x4c1366),_0x42ffd7=_0x15c3bc[_0x39166c(0x166)]);});if(lastOrders[_0x30145a(0x1ad)]>0x0){setLockOrders(ORDERS[_0x30145a(0x2a7)]),validateOrdersState='ongoing',allOrdersPlaced=!![];const _0x21819f=new Date()[_0x30145a(0x198)](),_0x584c6f=config['ordertype']==_0x30145a(0x14c)?validateOrderTimeout*0x3c*0x3e8:config[_0x30145a(0x23a)]*0x3c*0x3e8;if(_0x42ffd7+_0x584c6f>_0x21819f){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x42ffd7+_0x584c6f-_0x21819f);}else validateOrders(_0x30145a(0x18f));}}async function sendMetricsTelegram(){const _0x22607f=_0x315a22;if(!coinsLoaded){process[_0x22607f(0x193)]({'telegrammsg':_0x22607f(0x1a3)},_0x569e44=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x1887a0='';if(config[_0x22607f(0x2e8)])_0x1887a0='<b>'+config[_0x22607f(0x19f)]+'\x20metrics:</b>\x20\x0a\x0a';else _0x1887a0='<b>Bot\x20'+botID+_0x22607f(0x23e);const _0x3ee11b=config[_0x22607f(0x1f8)],_0x250562=config['fiat'],_0x50368d=getKPIs(_0x22607f(0x1f8)),_0x273d99=getKPIs(_0x22607f(0x289),_0x250562),_0x550bed=getKPIs(_0x22607f(0x1dd)),_0x4d58f8=getKPIs('net-fiat',_0x250562),_0x5e5d1d=getKPIs(_0x22607f(0x14d)),_0x14a9b7=getKPIs('pnl-fiat',_0x250562);_0x3ee11b[_0x22607f(0x24a)](_0x250562)?(_0x1887a0+=_0x22607f(0x307),_0x1887a0+=_0x22607f(0x2ff)+_0x3ee11b+':\x20'+_0x50368d[_0x22607f(0x1fd)]+'\x20('+_0x50368d[_0x22607f(0x1bf)]+_0x22607f(0x16a),_0x1887a0+=_0x22607f(0x1a7)+_0x3ee11b+':\x20'+_0x550bed['value']+'\x20('+_0x550bed['change']+'%)\x0a',_0x1887a0+='PnL\x20'+_0x3ee11b+':\x20'+_0x5e5d1d[_0x22607f(0x1fd)]+'\x20('+_0x5e5d1d[_0x22607f(0x1bf)]+_0x22607f(0x16a),_0x1887a0+=_0x22607f(0x20a)):(_0x1887a0+='<pre>',_0x1887a0+='Value\x20'+_0x3ee11b+':\x20'+_0x50368d['value']+'\x20('+_0x50368d['change']+_0x22607f(0x16a),_0x1887a0+=_0x22607f(0x2ff)+_0x250562+':\x20'+_0x273d99['value']+'\x20('+_0x273d99[_0x22607f(0x1bf)]+_0x22607f(0x16a),_0x1887a0+=_0x22607f(0x1a7)+_0x3ee11b+':\x20'+_0x550bed['value']+'\x20('+_0x550bed['change']+_0x22607f(0x16a),_0x1887a0+=_0x22607f(0x1a7)+_0x250562+':\x20'+_0x4d58f8[_0x22607f(0x1fd)]+'\x20('+_0x4d58f8[_0x22607f(0x1bf)]+'%)\x0a',_0x1887a0+=_0x22607f(0x1d9)+_0x3ee11b+':\x20'+_0x5e5d1d[_0x22607f(0x1fd)]+'\x20('+_0x5e5d1d['change']+_0x22607f(0x16a),_0x1887a0+='PnL\x20'+_0x250562+':\x20'+_0x14a9b7['value']+'\x20('+_0x14a9b7[_0x22607f(0x1bf)]+_0x22607f(0x16a),_0x1887a0+=_0x22607f(0x20a)),process[_0x22607f(0x193)]({'telegrammsg':_0x1887a0},_0x5bf3e9=>{});}async function sendPortfolioTelegram(){const _0x279c7e=_0x315a22;if(!coinsLoaded||!currentCoins[0x0][_0x279c7e(0x309)]){process[_0x279c7e(0x193)]({'telegrammsg':'Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute'},_0x5eee37=>{});return;}let _0x456f56='';if(config['showname'])_0x456f56=_0x279c7e(0x136)+config['botname']+_0x279c7e(0x18a);else _0x456f56=_0x279c7e(0x1bb)+botID+_0x279c7e(0x18a);_0x456f56+=_0x279c7e(0x307),_0x456f56+='-------------------------------\x0a',_0x456f56+=_0x279c7e(0x230),_0x456f56+=_0x279c7e(0x292),currentCoins[_0x279c7e(0x24f)](_0x299a79=>{const _0x4097b9=_0x279c7e;_0x456f56+=_0x299a79[_0x4097b9(0x17e)][_0x4097b9(0x1b0)](0x7)+'|\x20'+formatPad(_0x299a79[_0x4097b9(0x309)],0x2,0x6)+'|\x20'+formatPad(_0x299a79[_0x4097b9(0x210)],0x2,0x6)+'|\x20'+formatPad(_0x299a79[_0x4097b9(0x2ab)]*0x64,0x2,0x6)+'\x0a';}),_0x456f56+=_0x279c7e(0x20a),process['send']({'telegrammsg':_0x456f56},_0x222a2a=>{});}function formatPad(_0x2f9cea,_0x40455b,_0x2d6ae1){const _0x27ca8b=_0x315a22,_0xce4fea=formatResultString(_0x2f9cea,_0x40455b);return _0xce4fea?_0xce4fea[_0x27ca8b(0x29e)](_0x2d6ae1):''[_0x27ca8b(0x29e)](_0x2d6ae1);}function logHistory(_0x2af9d3,_0x5b29d5,_0xfddbe7=''){const _0x7b8c43=_0x315a22;logger[_0x7b8c43(0x1d2)](''+_0x5b29d5);let _0x2542f7={'time':getTimeStamp(),'type':_0x2af9d3,'event':_0x5b29d5};dbLogs[_0x7b8c43(0x263)](_0x7b8c43(0x1f6))[_0x7b8c43(0x298)](_0x2542f7)[_0x7b8c43(0x194)]();if(_0xfddbe7=='')_0xfddbe7=_0x5b29d5;proxyEmit('event',{'log':_0x2542f7,'summary':_0xfddbe7}),process[_0x7b8c43(0x193)]({'telegram':{..._0x2542f7,'botname':config['botname'],'showname':config[_0x7b8c43(0x2e8)]}},_0x335646=>{});}function emitHistory(_0x2bc4f6={}){const _0x8befc5=_0x315a22;Object[_0x8befc5(0x222)](_0x2bc4f6)[_0x8befc5(0x1ad)]==0x0&&(_0x2bc4f6={'type':[_0x8befc5(0x20e),_0x8befc5(0x144)],'event':'','page':0x1});if(_0x2bc4f6[_0x8befc5(0x308)][_0x8befc5(0x24a)]('event'))_0x2bc4f6[_0x8befc5(0x308)][_0x8befc5(0x2ce)](_0x2bc4f6[_0x8befc5(0x308)]['indexOf']('event'),0x1,_0x8befc5(0x2e7),_0x8befc5(0x2b8),_0x8befc5(0x248));if(dbLogs[_0x8befc5(0x13c)](_0x8befc5(0x1f6))[_0x8befc5(0x1fd)]()){let _0x421bf5=dbLogs['get'](_0x8befc5(0x1f6))['filter'](_0x4f5f2b=>{const _0x3c890b=_0x8befc5;if(_0x2bc4f6[_0x3c890b(0x308)][_0x3c890b(0x1ad)]==0x0)return![];else return _0x2bc4f6['type']['includes'](_0x4f5f2b['type']);})[_0x8befc5(0x2c2)](_0x5702fc=>{const _0x5be8ec=_0x8befc5;if(_0x2bc4f6['event']=='')return!![];else return _0x5702fc['event'][_0x5be8ec(0x183)]()['includes'](_0x2bc4f6['event']['toLowerCase']());})[_0x8befc5(0x2b1)](_0x8befc5(0x1e8)),_0x4055c6=_0x421bf5['value']()[_0x8befc5(0x1ad)];_0x421bf5=_0x421bf5[_0x8befc5(0x24e)]()[_0x8befc5(0x13d)]((_0x2bc4f6[_0x8befc5(0x290)]-0x1)*logPageSize,_0x2bc4f6[_0x8befc5(0x290)]*logPageSize-0x1)[_0x8befc5(0x24e)]()[_0x8befc5(0x1fd)](),proxyEmit(_0x8befc5(0x2f4),{'logs':_0x421bf5,'total':_0x4055c6});}else proxyEmit(_0x8befc5(0x2f4),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x2ac9eb){const _0x48386c=_0x315a22;if(dbLogs[_0x48386c(0x13c)]('logs')['value']()){const _0xfe1e62=dbLogs[_0x48386c(0x263)](_0x48386c(0x1f6))['sortBy'](_0x48386c(0x1e8))['filter'](_0x4f6d6c=>{const _0x3e4dce=_0x48386c;return _0x4f6d6c[_0x3e4dce(0x308)]==_0x3e4dce(0x20e);})[_0x48386c(0x1fd)]();dbLogs[_0x48386c(0x263)](_0x48386c(0x1f6))[_0x48386c(0x21e)]()[_0x48386c(0x194)](),dbLogs[_0x48386c(0x263)]('logs')[_0x48386c(0x2d6)](_0xfe1e62)['write'](),emitHistory(_0x2ac9eb);}}async function pauseBot(_0x3617ef=pauseBotIntervalShort,_0x466430,_0x452bf2,_0x5c65f3=![]){const _0x3c2bab=_0x315a22,_0x27e970=new Date()[_0x3c2bab(0x198)]();if(!lastErrorShown||_0x27e970-lastErrorShown>=_0x3617ef){lastErrorShown=_0x27e970;if(!lastBotPause)lastBotPause=_0x27e970,consecutivePauses=0x1;else{if(_0x27e970-lastBotPause-_0x3617ef<0x5a*0x3e8){consecutivePauses++;if(consecutivePauses>maxPauseRetries){if(_0x5c65f3){logHistory('error',_0x466430+_0x3c2bab(0x2f8)),await killBot();return;}else logHistory(_0x3c2bab(0x2e7),_0x466430+pauseBotMsg),_0x3617ef=pauseBotInterval;}}else consecutivePauses=0x1;lastBotPause=_0x27e970;}_0x452bf2?logger['debug']('('+consecutivePauses+')\x20'+_0x466430+_0x3c2bab(0x29b),_0x452bf2):logger['debug']('('+consecutivePauses+')\x20'+_0x466430);if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);await sleep(_0x3617ef),botPaused=![],_0x3617ef==pauseBotIntervalShort?resumeBot(!![]):resumeBot(![]);}}}async function killBot(){botPaused=!![],await sleep(0x3e8),process['send']({'stop':'kill'},_0x2bcb43=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x154e08,_0x26004c,_0x7f7cd=![]){const _0x3ea8af=_0x315a22;if(botPaused)return;let _0x231abd;const _0x6ac973=config['exchange']||_0x3ea8af(0x19e);if(_0x26004c)logger[_0x3ea8af(0x2a4)](_0x3ea8af(0x2bb)+_0x26004c);const _0x288ad9=()=>{const _0x3f0078=_0x3ea8af;loading[_0x3f0078(0x2e7)]=_0x3f0078(0x1ef),emitLoadingProgress();};if(_0x154e08[_0x3ea8af(0x1e5)]()['includes'](_0x3ea8af(0x258)))logHistory(_0x3ea8af(0x2e7),_0x6ac973+_0x3ea8af(0x1c9)),_0x288ad9();else{if(_0x154e08[_0x3ea8af(0x1e5)]()[_0x3ea8af(0x24a)](_0x3ea8af(0x244)))logHistory(_0x3ea8af(0x2e7),_0x6ac973+_0x3ea8af(0x199)),_0x288ad9();else{if(_0x154e08['toString']()[_0x3ea8af(0x24a)](_0x3ea8af(0x19d)))config['apiPassword']?_0x231abd=_0x6ac973+_0x3ea8af(0x2bf):_0x231abd=_0x6ac973+'\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange',logHistory('error',_0x231abd+_0x3ea8af(0x208)),_0x288ad9();else{if(_0x154e08['toString']()['includes'](_0x3ea8af(0x203)))logHistory('error',_0x6ac973+_0x3ea8af(0x28b)),_0x288ad9();else{if(!_0x7f7cd)await handleError(_0x154e08,null);}}}}}async function handleError(_0x234dbe,_0x35f04f,_0x370a27=''){const _0x317019=_0x315a22;if(botPaused)return;let _0x4869db;const _0xb631c3=config[_0x317019(0x1b2)]||'Exchange';if(_0x35f04f)logger[_0x317019(0x2a4)](_0x317019(0x2bb)+_0x35f04f);if(_0x234dbe[_0x317019(0x1e5)]()['includes'](_0x317019(0x2c4)))_0x4869db=_0xb631c3+_0x317019(0x2c3),await pauseBot(undefined,_0x4869db,_0x234dbe);else{if(_0x234dbe[_0x317019(0x1e5)]()[_0x317019(0x24a)](_0x317019(0x204)))_0x4869db=_0xb631c3+'\x20blocked\x20API\x20(RateLimitExceeded)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading',await pauseBot(undefined,_0x4869db,_0x234dbe);else{if(_0x234dbe[_0x317019(0x1e5)]()['includes'](_0x317019(0x158))||_0x234dbe[_0x317019(0x1e5)]()[_0x317019(0x24a)](_0x317019(0x1fb)))_0x4869db=_0xb631c3+'\x20not\x20available\x20(see:\x20hodlerhacks.com/fix/5)',await pauseBot(undefined,_0x4869db,_0x234dbe['toString']());else{if(_0x234dbe[_0x317019(0x1e5)]()[_0x317019(0x24a)]('RequestTimeout'))_0x4869db=_0xb631c3+_0x317019(0x2e5),await pauseBot(undefined,_0x4869db,_0x234dbe[_0x317019(0x1e5)]());else{if(_0x234dbe[_0x317019(0x1e5)]()[_0x317019(0x24a)]('NetworkError:\x20connection\x20closed\x20by\x20remote\x20server'))_0x4869db=_0xb631c3+_0x317019(0x18c),await pauseBot(undefined,_0x4869db,_0x234dbe[_0x317019(0x1e5)]());else{if(_0x234dbe[_0x317019(0x1e5)]()[_0x317019(0x183)]()['includes'](_0x317019(0x166))||_0x234dbe[_0x317019(0x1e5)]()['toLowerCase']()[_0x317019(0x24a)]('request-time'))_0x4869db=_0x317019(0x211),await pauseBot(undefined,_0x4869db,_0x234dbe[_0x317019(0x1e5)]());else{if(_0x234dbe['toString']()[_0x317019(0x24a)](_0x317019(0x152)))_0x4869db=_0xb631c3+_0x317019(0x311),await pauseBot(undefined,_0x4869db,_0x234dbe[_0x317019(0x1e5)]());else{if(_0x234dbe instanceof ccxt[_0x317019(0x219)])_0x4869db=_0xb631c3+_0x317019(0x209)+_0x234dbe[_0x317019(0x1e5)](),logger[_0x317019(0x2a4)](_0x317019(0x15d),_0x234dbe),await pauseBot(undefined,_0x4869db,_0x234dbe);else{if(_0x234dbe[_0x317019(0x1e5)]()[_0x317019(0x24a)](_0x317019(0x258)))logHistory(_0x317019(0x2e7),_0xb631c3+_0x317019(0x261)),logHistory('error',_0x317019(0x286)),await killBot();else{if(_0x234dbe[_0x317019(0x1e5)]()[_0x317019(0x24a)](_0x317019(0x244)))logHistory(_0x317019(0x2e7),_0xb631c3+'\x20API\x20secret\x20is\x20invalid'),logHistory(_0x317019(0x2e7),_0x317019(0x286)),await killBot();else{if(_0x234dbe[_0x317019(0x1e5)]()[_0x317019(0x24a)](_0x317019(0x19d))&&_0x234dbe['toString']()[_0x317019(0x24a)](_0x317019(0x22a)))_0x4869db=_0xb631c3+_0x317019(0x2a3),await pauseBot(undefined,_0x4869db,_0x234dbe,!![]);else{if(_0x234dbe['toString']()[_0x317019(0x24a)](_0x317019(0x19d)))config['apiPassword']?_0x4869db=_0xb631c3+_0x317019(0x2bf):_0x4869db=_0xb631c3+_0x317019(0x217),logHistory(_0x317019(0x2e7),_0x4869db),logHistory('error',_0x317019(0x286)),await killBot();else{if(_0x234dbe[_0x317019(0x1e5)]()['includes'](_0x317019(0x203)))logHistory(_0x317019(0x2e7),_0xb631c3+_0x317019(0x272)),logHistory('error',_0x317019(0x286)),await killBot();else{if(_0x234dbe[_0x317019(0x1e5)]()['includes'](_0x317019(0x2fb)))logHistory(_0x317019(0x2e7),_0x317019(0x1cb)+_0x370a27),logger[_0x317019(0x2a4)](_0x317019(0x2d5),_0x234dbe);else{if(_0x234dbe instanceof ccxt[_0x317019(0x1c5)]){_0x4869db=_0xb631c3+_0x317019(0x2d4)+_0x234dbe[_0x317019(0x1e5)]();if(_0x370a27)_0x4869db+=_0x317019(0x23c)+_0x370a27;await pauseBot(undefined,_0x4869db,_0x234dbe);}else{_0x4869db=_0x317019(0x259)+_0x234dbe['toString']();if(_0x370a27)_0x4869db+=_0x317019(0x23c)+_0x370a27;await pauseBot(undefined,_0x4869db);}}}}}}}}}}}}}}}}function decryptRSA(_0x432cf8,_0x511818){const _0x1800f6=_0x315a22,_0x119afc=forge['pki'][_0x1800f6(0x267)](_0x432cf8),_0x3d1b9a=_0x119afc[_0x1800f6(0x27e)](forge[_0x1800f6(0x232)]['decode64'](_0x511818),_0x1800f6(0x270),{'md':forge['md'][_0x1800f6(0x215)][_0x1800f6(0x1c1)](),'mgf1':{'md':forge['md'][_0x1800f6(0x215)]['create']()}});return _0x3d1b9a;}async function withRetry(_0x157588,_0x37c45){const _0x37117d=_0x315a22;let _0x373949=![],_0x847d78=0x0,_0x3d1fae,_0xa39570;while(_0x847d78<maxRetries){try{_0x3d1fae=await _0x37c45();break;}catch(_0x851d79){_0xa39570=_0x851d79,!_0x373949?(_0x373949=!![],logger[_0x37117d(0x2a4)](_0x37117d(0x16b)+_0x157588+':',_0x851d79['toString']())):await sleep(retryInterval);}_0x847d78++;}if(_0x847d78==0x0)return _0x3d1fae;if(_0x847d78>=maxRetries)throw _0xa39570;else return logger[_0x37117d(0x2a4)]('RETRY\x20-\x20Problem\x20resolved\x20after\x20'+_0x847d78+_0x37117d(0x1a2)),_0x3d1fae;}function formatResult(_0x3750a0,_0x1acd3b){const _0x582084=_0x315a22;return parseFloat(_0x3750a0[_0x582084(0x30c)](_0x1acd3b));}function formatResultTruncate(_0x549ee1,_0x2ca786){const _0x42b1f1=_0x315a22;let _0x2982db=formatResultString(_0x549ee1,0xa),_0x525d38=_0x2982db[_0x42b1f1(0x2ea)]('.');return _0x525d38!=-0x1&&(_0x2982db=_0x2982db[_0x42b1f1(0x13d)](0x0,_0x525d38+_0x2ca786+0x1)),Number(_0x2982db);}function formatResultString(_0x433fd1,_0x525834){const _0x326374=_0x315a22;let _0x554b91;if(!(''+_0x433fd1)['includes']('e'))_0x554b91=+(Math[_0x326374(0x279)](_0x433fd1+'e+'+_0x525834)+'e-'+_0x525834);else{let _0x39b666=(''+_0x433fd1)['split']('e'),_0x495f45='';+_0x39b666[0x1]+_0x525834>0x0&&(_0x495f45='+'),_0x554b91=+(Math[_0x326374(0x279)](+_0x39b666[0x0]+'e'+_0x495f45+(+_0x39b666[0x1]+_0x525834))+'e-'+_0x525834);}return Number(_0x554b91)[_0x326374(0x30c)](_0x525834);}function getServerTime(){const _0xe9ba2d=_0x315a22,_0x69e1f8=new Date();return _0x69e1f8[_0xe9ba2d(0x168)]()+'/'+(_0x69e1f8[_0xe9ba2d(0x169)]()+0x1)[_0xe9ba2d(0x1e5)]()[_0xe9ba2d(0x29e)](0x2,'0')+'/'+_0x69e1f8[_0xe9ba2d(0x2de)]()[_0xe9ba2d(0x1e5)]()['padStart'](0x2,'0')+'\x20'+_0x69e1f8[_0xe9ba2d(0x205)]()[_0xe9ba2d(0x1e5)]()[_0xe9ba2d(0x29e)](0x2,'0')+':'+_0x69e1f8[_0xe9ba2d(0x186)]()[_0xe9ba2d(0x1e5)]()[_0xe9ba2d(0x29e)](0x2,'0')+':'+_0x69e1f8[_0xe9ba2d(0x1e4)]()[_0xe9ba2d(0x1e5)]()[_0xe9ba2d(0x29e)](0x2,'0');}function getTimeStamp(){const _0x35e2d9=_0x315a22,_0x5e632a=shiftedTime();return _0x5e632a[_0x35e2d9(0x168)]()+'/'+(_0x5e632a[_0x35e2d9(0x169)]()+0x1)[_0x35e2d9(0x1e5)]()['padStart'](0x2,'0')+'/'+_0x5e632a[_0x35e2d9(0x2de)]()[_0x35e2d9(0x1e5)]()['padStart'](0x2,'0')+'\x20'+_0x5e632a[_0x35e2d9(0x205)]()[_0x35e2d9(0x1e5)]()[_0x35e2d9(0x29e)](0x2,'0')+':'+_0x5e632a[_0x35e2d9(0x186)]()[_0x35e2d9(0x1e5)]()[_0x35e2d9(0x29e)](0x2,'0')+':'+_0x5e632a[_0x35e2d9(0x1e4)]()[_0x35e2d9(0x1e5)]()[_0x35e2d9(0x29e)](0x2,'0');}function getDate(){const _0x25a1bb=_0x315a22,_0x5163d9=shiftedTime();return _0x5163d9[_0x25a1bb(0x168)]()+'/'+(_0x5163d9[_0x25a1bb(0x169)]()+0x1)[_0x25a1bb(0x1e5)]()['padStart'](0x2,'0')+'/'+_0x5163d9[_0x25a1bb(0x2de)]()[_0x25a1bb(0x1e5)]()[_0x25a1bb(0x29e)](0x2,'0');}function getHour(){const _0x6a3e3d=_0x315a22,_0x3bded4=shiftedTime();return _0x3bded4[_0x6a3e3d(0x205)]()[_0x6a3e3d(0x1e5)]()[_0x6a3e3d(0x29e)](0x2,'0');}function sleep(_0x37bb4b){return new Promise(_0xc6adfe=>setTimeout(_0xc6adfe,_0x37bb4b));}function shiftedTime(){const _0xfc451f=_0x315a22,_0x398238=new Date();let _0x2bdc6b=_0x398238;if(config&&config[_0xfc451f(0x1b3)]!==0x0)_0x2bdc6b=fns[_0xfc451f(0x137)](_0x398238,{'hours':config[_0xfc451f(0x1b3)]});return _0x2bdc6b;}function timer(_0x54d218){const _0x265aae=_0x315a22,_0x5a2bba=new Date();!lasttime?console['log'](getTimeStamp()+_0x265aae(0x163),_0x54d218,_0x5a2bba):console[_0x265aae(0x1ce)](getTimeStamp()+_0x265aae(0x163),_0x54d218,(_0x5a2bba-lasttime)/0x3e8),lasttime=_0x5a2bba;}