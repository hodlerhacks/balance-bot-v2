const _0x184583=_0x48ee;(function(_0x186c7f,_0x513f9e){const _0xb27f9c=_0x48ee,_0x252728=_0x186c7f();while(!![]){try{const _0xb5ae4b=parseInt(_0xb27f9c(0x1c1))/0x1*(parseInt(_0xb27f9c(0x15c))/0x2)+-parseInt(_0xb27f9c(0x101))/0x3*(parseInt(_0xb27f9c(0x1ff))/0x4)+-parseInt(_0xb27f9c(0x19e))/0x5*(parseInt(_0xb27f9c(0x157))/0x6)+-parseInt(_0xb27f9c(0x167))/0x7*(parseInt(_0xb27f9c(0x1ac))/0x8)+-parseInt(_0xb27f9c(0x124))/0x9+-parseInt(_0xb27f9c(0x204))/0xa+parseInt(_0xb27f9c(0x1c6))/0xb*(parseInt(_0xb27f9c(0x213))/0xc);if(_0xb5ae4b===_0x513f9e)break;else _0x252728['push'](_0x252728['shift']());}catch(_0x1f8949){_0x252728['push'](_0x252728['shift']());}}}(_0x2604,0xc6cb3));const _0x4c982a=function(){let _0x247a77=!![];return function(_0x326dd6,_0x142415){const _0x224239=_0x247a77?function(){const _0x350b39=_0x48ee;if(_0x142415){const _0x4539ca=_0x142415[_0x350b39(0x195)](_0x326dd6,arguments);return _0x142415=null,_0x4539ca;}}:function(){};return _0x247a77=![],_0x224239;};}(),_0x39d327=_0x4c982a(this,function(){const _0x57faa2=_0x48ee;return _0x39d327['toString']()[_0x57faa2(0x229)](_0x57faa2(0x261))[_0x57faa2(0xde)]()[_0x57faa2(0x22e)](_0x39d327)[_0x57faa2(0x229)]('(((.+)+)+)+$');});_0x39d327();'use strict';const ccxt=require(_0x184583(0x25d)),low=require(_0x184583(0xcc)),FileSync=require(_0x184583(0x14a)),fs=require('fs'),fns=require(_0x184583(0x1cc)),forge=require(_0x184583(0x24d)),util=require('util'),argv=require(_0x184583(0x12c))(process['argv'][_0x184583(0x13a)](0x2))[_0x184583(0x25b)],path=require(_0x184583(0x19d)),axios=require(_0x184583(0x259));let exchange,gTicker={},gChange={};function _0x2604(){const _0x341111=['watchTradesForSymbols()','path','3840235YVKhjc','no\x20open\x20orders','sha256','value','./version.json','-------------------------------\x0a','Generated\x20PnL\x20data','options','prevnumber','update-liquidity','LOCKED','padEnd','limits',')\x20|\x20exchange:\x20','12996656mihJLR','delta','DDoSProtection','cooldown','closed','\x20>\x20pausing\x20bot\x20for\x20','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','no\x20exchange\x20reloaded','Trigger:\x20','sqrt','CoinMarketCap\x20data\x20could\x20not\x20be\x20updated\x20-\x20will\x20try\x20again\x20in\x201\x20hour','./config/','Exception\x20thrown\x20in\x20','secure','Unfilled\x20order(s)\x20canceled\x20after\x20','AuthenticationError','\x20order:\x20','recreate','Market','distribution','apiSecret','144825GfpSMa','market','portfolio2','Executed\x20','Order\x20amount\x20is\x20invalid:\x20','11ltSWjP','2\x20-\x20handling\x20FILLED\x20order:\x20','switch-manual','valid','<b>','\x20-\x20go\x20back\x20and\x20try\x20again','date-fns','Manual\x20balancing\x20required','USDT','starting-balances','showConfig','assign','limit-low','Market\x20order','excluded','openOrders','testAPI()','Avoiding\x20continuous\x20order\x20attempts','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','Updating\x20API\x20key\x20(not\x20saved\x20in\x20config\x20file\x20yet)','entries','\x20|\x20Custom\x20ID:\x20','buys','showname','API-key\x20format\x20invalid','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','\x20|\x20lock\x20orders:\x20','random','ongoing','kill','%\x20(','basecoin','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','toFixed','startprice','toggleBotMode','enabled','shift','isBefore','-performance.json','netoffset','heapUsed','Error:\x20Invalid\x20argument\x20','unlinkSync','price','fromCodePoint','exchanges','toLowerCase','fee','\x20-\x20bot\x20switched\x20to\x20manual\x20mode','order','forEach','placeOrder()','portfolio1','TUSD','trade','PnL\x20','744564XoXKxM','getTime','Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute','Gateio','api-issue','7292210HRghDl','PermissionDenied','************','replace','Loading\x20completed','Error\x20occurred:\x20','privateKeyFromPem','set','buy','\x20API\x20key,\x20secret\x20or\x20password\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','final','filled','symbol','apiPassword','Order\x20filled:\x20','35466684PyitWC','MIN_NOTIONAL','bot-','create','watchTrades','loadMarkets','placeOrder','Unknown\x20error:\x20','Initializing\x20coin\x20results','split','initial','pki','active','limit-high','data','Resetting\x20bot\x20history','breakeven','cancel','red_yellow_blue','pnl-fiat','canceled','staging','search','Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)','createOrder','percentage','/backup/','constructor','Unfilled\x20order(s)\x20could\x20not\x20be\x20canceled\x20after\x20','changes','Net\x20','timeshift','coin','Portfolio\x20change\x20detected:\x20','USDC','\x20MB','Value\x20','InvalidOrder','util','bitvavo','001','Bitget','keys','uncaughtException','running','writeFile','watchTradesForSymbols','Huobi','Will\x20continue\x20to\x20wait\x20for\x20order(s)\x20to\x20be\x20filled\x20and\x20try\x20to\x20cancel\x20again\x20later','resetHistory','\x20-\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','getMinutes','colorscheme','Insufficient\x20funds\x20to\x20execute\x20order:\x20','join','removed','remainingSymbols','send','node-forge','2\x20-\x20Validate\x20orders:\x20','fiat','ETH','storeConfiguration','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','stack','substring','<pre>','test','</pre>','recovery','axios',',\x20must\x20be\x20a\x203\x20digit\x20number','argv','stringify','ccxt','Failed\x20to\x20load\x20coin\x20data\x20for\x20','coins','usd','(((.+)+)+)+$','progress','<b>Bot\x20','getPortfolio','basecoinvalue','mkdirSync','\x20closed\x20the\x20connection\x20(see:\x20hodlerhacks.com/fix/5)','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','ExchangeNotAvailable','\x20portfolio:</b>\x20\x0a\x0a','1\x20-\x20FILLED\x20unknown\x20order:\x20','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','date','\x20|\x20highest\x20fee:\x20','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','bot','privateKey','configstate','pro','OrderNotFound','get','sortBy','fetchTickers','EUR','1\x20-\x20partially\x20FILLED\x20(','Error\x20details:\x20','apiKey','max','total','error','net-fiat','quick','Initiating\x20bot\x20restart','Exchange','\x20exchange','Stopped\x20fetching\x20balance\x20after\x20','toUpperCase','2.6.0','quote','cancelOrder','storeHeadless','args','Binance','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','bb-secure.json','Invalid\x20balance\x20for\x20','balancing\x20resumes\x20when\x20cooldown\x20ends','UNLOCKED','getMonth','timeout','Limit\x20(low-margin)','version','Initializing\x20exchange:\x20already\x20done','\x20>\x20stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','eur','2.6.22','open','slider','sell','BUSD','spot','push','highest','amount','ordertype','padStart','Cooldown\x20ended\x20-\x20balancing\x20resumed','currency','cost','bots','\x20not\x20available\x20(see:\x20hodlerhacks.com/fix/5)','fetchBalance()','autoliquidity','initTickers()','/USD','\x0aSymbol(s):\x20','bb-settings.json','match','ask','lowdb','side','emojisell','offset','write','bid','none','1\x20-\x20Validate\x20orders:\x20','defaults','type','change','settings','Portfolio\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','cloneDeep','deleteHistoryAlerts','\x20>\x20','RateLimitExceeded','abs','toString','onepagemode','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','USD','Error\x20details:','getOpenOrders()','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','./logs/','Cex','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20trying\x20again\x20in\x20','***','\x20-\x20','addDays','configuration','\x20(see:\x20hodlerhacks.com/fix/1)','botname','storeFiat','-events.json','event','getDate','createWriteStream','success','orderId',')\x20known\x20order:\x20','/EUR','round','InsufficientFunds','fetchBalance','isEqual','fetchOpenOrders','1\x20-\x20FILLED\x20known\x20order:\x20','existsSync','add','balancing\x20resumed','token\x20is\x20expired','3CpUotw','indexOf','headless','\x20attempts','RSA-OAEP','\x20-\x20bot\x20already\x20running\x20in\x20manual\x20mode','target','startdate','logs','realizedPnL','Exchange\x20permission\x20denied\x20-\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','sells','decrypt','\x20|\x20exchange:\x20','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','restart','added','Order\x20filled','\x20due\x20to\x20offset','enableFiatToggle','Waited\x20','number','net-basecoin','Cryptocom','\x20network\x20error:\x20','starting-balance-','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)','balances','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','marketcapApi','%)\x0a','-results.json','includes','warning','2534013TCZBNu','InvalidNonce','amountToPrecision','change24h','format','cancelLoading','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','environment','yargs/yargs','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','Limit\x20(high-margin)','\x20metrics:</b>\x20\x0a\x0a','getHours','watchTrades()','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','has','getFullYear','average','botID','filter','debug','fetchTickers()','slice','.json','marketcapEnabled','performance','RETRY\x20-\x20Problem\x20resolved\x20after\x20','pnl',')\x20unknown\x20order:\x20','initclient','detectLiquidityChange()','full','sendMetricsTelegram','No\x20more\x20open\x20orders\x20-\x20','portfolio','find','min','exchange','lowdb/adapters/FileSync','marketcap',':\x20Bot\x20','Failed\x20to\x20load\x20market\x20data\x20-\x20bot\x20not\x20started','decode64','Resuming\x20(','function','Set\x20lock\x20orders\x20to:\x20','sandbox','freeze','reverse','2.7.1','\x20/\x20','6JKIwEE','BTC','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20for\x20','map','2\x20-\x20Handled\x20open\x20orders','20fYJhiy','\x20hour','Bybit','\x20>\x20[DEBUG]\x20','getSeconds','status','watchOrders','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','OnMaintenance','event-history','liquidity','7GmFTBB','parse','\x20orders\x20in\x20less\x20than\x20','startnumber','setSandboxMode','log','page','emojibuy',':\x20timer\x20>','timestamp','yyyy/MM/dd','fetchTicker','findIndex','loadSymbols()','ExchangeError','Resetting\x20coin\x20results:\x20','market_cap','string','\x20API\x20secret\x20is\x20invalid','status\x20code\x20401','Network\x20error\x20details:','USDP','Pausing\x20for\x20','limit','sort','orderstatus','0\x20-\x20EXECUTION:\x20','time','Insufficient\x20funds\x20to\x20place\x20order\x20for\x20','UNLOCKING','Fee\x20discount\x20refund\x20detected:\x20','emitHistory','Error\x20while\x20deleting\x20files:\x20','PAXG','self_reported_market_cap','\x20minutes','last','password','remove','must\x20be\x20greater\x20than\x20minimum\x20amount','threshold','request-time','2.3.5','splice','\x20minutes\x20-\x20','\x20|\x20','apply','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','recent20','Reset\x20|\x20','\x20not\x20responding\x20(see:\x20hodlerhacks.com/fix/5)','process\x20','length'];_0x2604=function(){return _0x341111;};return _0x2604();}const usdBasecoins=[_0x184583(0xe1),_0x184583(0x29c),_0x184583(0x1fc),_0x184583(0x1ce),_0x184583(0x235),_0x184583(0x17c)],excludedExchanges=['bitmex'],debugging=argv['d']||![];let pnlGenerationNeeded=argv['r']||![],config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x184583(0x153)]({'LOCKED':0x0,'UNLOCKING':0x1,'UNLOCKED':0x2});let lockOrders=ORDERS[_0x184583(0x290)],validateOrdersState,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotIntervalShort=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0x184583(0x1b1)+pauseBotInterval/0xea60+_0x184583(0x18a),maxPauseRetries=0x6,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,watchTransactionsInterval=0x3c*0x3e8,schedulerInterval=0x3c*0x3c*0x3e8,retryInterval=0x3e8,maxRetries=0x5,logPageSize=0x14,defaultFee=0.003;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidOrdersInitialTimeout,pidOrdersTimeout,botPaused=![],transactionDetectionOngoing=![],lastCoinsToBalance='',insufficientFundsWarningSent=[],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x5dc,balanceUpdateRetries=0x5;let enableFiatToggle;const serverversion=require(_0x184583(0x1a2))[_0x184583(0x294)],environment=require(_0x184583(0x1a2))[_0x184583(0x12b)]||'production',botID=process[_0x184583(0x25b)][0x2]||_0x184583(0x23b),pattern=/^[0-9]{3}$/;!pattern[_0x184583(0x256)](botID)&&(console[_0x184583(0x16c)](_0x184583(0x1f0)+botID+_0x184583(0x25a)),killBot());const userID=process[_0x184583(0x25b)][0x3]||'',configpath=userID?_0x184583(0x1b7)+userID+'/':_0x184583(0x1b7),logspath=userID?_0x184583(0xe5)+userID+'/':_0x184583(0xe5),loggerfile=fs[_0x184583(0xf2)](logspath+'/output-000.log',{'flags':'a'});!fs[_0x184583(0xfd)](configpath)&&fs[_0x184583(0x266)](configpath);!fs['existsSync'](logspath)&&fs[_0x184583(0x266)](logspath);const configfile=configpath+'bot-'+botID+'-config.json',logfile=configpath+'bot-'+botID+_0x184583(0xef),performancefile=configpath+_0x184583(0x215)+botID+'-performance.json',coinresultsfile=configpath+_0x184583(0x215)+botID+_0x184583(0x121),settingsfile=configpath+_0x184583(0xc9),securefile=configpath+_0x184583(0x28d),configbackuppath=configpath+_0x184583(0x22d),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x184583(0xd4)]({'logs':[],'version':serverversion})['write']();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x184583(0xd4)]({'data':[],'version':serverversion})['write']();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x184583(0xd4)]({'bot':[],'version':serverversion})[_0x184583(0xd0)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x184583(0xd4)]({'coins':{},'version':serverversion})[_0x184583(0xd0)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const operatorId=0x200f1;let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x5b73b5=>{const _0x5ae88a=_0x184583;console[_0x5ae88a(0x16c)](_0x5b73b5);},'simple':_0x3232e3=>{const _0x3e2515=_0x184583;console[_0x3e2515(0x16c)](_0x3232e3),loggerfile[_0x3e2515(0xd0)](util[_0x3e2515(0x128)](_0x3232e3)+'\x0a');},'full':async(_0x14e13d,_0x41b129='')=>{const _0x344737=_0x184583;let _0x1648e4;if(config['showname'])_0x1648e4=getTimeStamp()+':\x20'+config[_0x344737(0xed)]+_0x344737(0xdb)+_0x14e13d;else _0x1648e4=getTimeStamp()+_0x344737(0x14c)+botID+_0x344737(0xdb)+_0x14e13d;console[_0x344737(0x16c)](_0x1648e4),loggerfile[_0x344737(0xd0)](util[_0x344737(0x128)](_0x1648e4)+'\x0a'),_0x41b129&&(console[_0x344737(0x16c)](_0x41b129),loggerfile[_0x344737(0xd0)](util[_0x344737(0x128)](_0x41b129)+'\x0a'));},'debug':async(_0x182a85,_0x1e1ece='')=>{const _0xffe23=_0x184583;let _0x48a012;if(config[_0xffe23(0x1dd)])_0x48a012=getTimeStamp()+':\x20'+config[_0xffe23(0xed)]+_0xffe23(0x15f)+_0x182a85;else _0x48a012=getTimeStamp()+':\x20Bot\x20'+botID+_0xffe23(0x15f)+_0x182a85;if(debugging)console[_0xffe23(0x16c)](_0x48a012);loggerfile[_0xffe23(0xd0)](util['format'](_0x48a012)+'\x0a');if(_0x1e1ece){if(debugging)console[_0xffe23(0x16c)](_0x1e1ece);loggerfile[_0xffe23(0xd0)](util[_0xffe23(0x128)](_0x1e1ece)+'\x0a');}}};process['on']('uncaughtException',function(_0x405fde){const _0x28a482=_0x184583;handleError(_0x405fde[_0x28a482(0x253)],_0x28a482(0x23e));});settings[_0x184583(0x232)]!=config[_0x184583(0x232)]&&updateTimeshift(settings[_0x184583(0x232)]);settings[_0x184583(0xdf)]!=config[_0x184583(0xdf)]&&updateOnepagemode(settings[_0x184583(0xdf)]);(settings[_0x184583(0x11f)]&&!config[_0x184583(0x11f)]||!settings[_0x184583(0x11f)]&&config[_0x184583(0x11f)])&&updateMarketcapApi(settings[_0x184583(0x11f)]);process[_0x184583(0x24c)]({'started':_0x184583(0x23f)},_0x427e90=>{}),initializeProcessListeners();function proxyEmit(_0x2399c8,_0x427bb7=null){const _0x1b20ba=_0x184583;process[_0x1b20ba(0x24c)]({'function':_0x2399c8,'args':_0x427bb7},_0x4c5fa0=>{});}function initializeProcessListeners(){process['on']('message',_0x583753=>{const _0xf3af66=_0x48ee;switch(Object[_0xf3af66(0x23d)](_0x583753)[0x0]){case'timeshift':_0x583753['timeshift']!=undefined&&(settings[_0xf3af66(0x232)]=_0x583753['timeshift'],updateTimeshift(settings[_0xf3af66(0x232)]));break;case _0xf3af66(0xdf):_0x583753[_0xf3af66(0xdf)]!=undefined&&(settings[_0xf3af66(0xdf)]=_0x583753[_0xf3af66(0xdf)],updateOnepagemode(settings[_0xf3af66(0xdf)]));break;case _0xf3af66(0x11f):_0x583753[_0xf3af66(0x11f)]!=undefined&&(settings[_0xf3af66(0x11f)]=_0x583753['marketcapApi'],updateMarketcapApi(settings[_0xf3af66(0x11f)]));break;case _0xf3af66(0xc2):_0x583753[_0xf3af66(0xc2)]!=undefined&&(bots=JSON[_0xf3af66(0x168)](_0x583753[_0xf3af66(0xc2)]),proxyEmit(_0xf3af66(0xc2),bots));break;case _0xf3af66(0x150):switch(_0x583753[_0xf3af66(0x150)]){case _0xf3af66(0x141):initclient();break;case _0xf3af66(0x1e9):toggleBotMode();break;case _0xf3af66(0x186):emitHistory(_0x583753['args']);break;case _0xf3af66(0xda):deleteHistoryAlerts(_0x583753[_0xf3af66(0x28a)]);break;case _0xf3af66(0x264):getPortfolio(_0x583753['args']);break;case _0xf3af66(0x251):storeConfiguration(_0x583753['args']);break;case _0xf3af66(0x289):storeHeadless(_0x583753[_0xf3af66(0x28a)]);break;case _0xf3af66(0xee):storeFiat(_0x583753[_0xf3af66(0x28a)]);break;case _0xf3af66(0x244):resetHistory();break;case'getStartingBalances':getStartingBalances(getNormalizedPerformance());break;case _0xf3af66(0x219):placeOrder(_0x583753[_0xf3af66(0x28a)]);break;case _0xf3af66(0x129):cancelLoading();break;case _0xf3af66(0x1d0):showConfig();break;case _0xf3af66(0x144):sendMetricsTelegram();break;case'sendPortfolioTelegram':sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0xb23616=![]){const _0x3cedbf=_0x184583;logger[_0x3cedbf(0x138)](_0x3cedbf(0x198)+(_0xb23616?'exchange\x20reload':_0x3cedbf(0x1b3))+_0x3cedbf(0x10e)+config[_0x3cedbf(0x149)]);if(pidBalances)clearTimeout(pidBalances);lastCoinsToBalance='',insufficientFundsWarningSent=[],coinsLoaded=![];if(config[_0x3cedbf(0x27b)]!=''&&config[_0x3cedbf(0x27b)]!=_0x3cedbf(0xe8)){loadingProgress=0x0;if(_0xb23616){await initExchange();const _0x287894=await testAPI();if(!_0x287894)return;await loadSymbols(),loadingProgress=0x1,setStableCoins(),proxyEmit(_0x3cedbf(0xeb),emittedConfiguration()),initialPerformanceStored=![];}const _0x33ecaf=await getCoins();[currentCoins,currentCoinsAll]=_0x33ecaf,setBlockTransactionDetection(![]),startScheduler(),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger['debug'](_0x3cedbf(0x208)),getBalances(![]),await updateOpenOrders();if(lastOrders['length']==0x0&&allOpenOrders[_0x3cedbf(0x19b)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(pnlGenerationNeeded)await generatePnL();}}async function resumeBot(_0x53b309=![]){const _0x4b21b4=_0x184583;logger[_0x4b21b4(0x138)](_0x4b21b4(0x14f)+(_0x53b309?_0x4b21b4(0x280):'complete')+_0x4b21b4(0x1ab)+config['exchange']);if(pidBalances)clearTimeout(pidBalances);if(_0x53b309){getBalances();return;}coinsLoaded=![];if(config['apiKey']!=''&&config['apiKey']!='***'){loadingProgress=0x1;const _0x6c1e9=await getCoins();[currentCoins,currentCoinsAll]=_0x6c1e9,setBlockTransactionDetection(![]),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger['debug']('Loading\x20completed'),getBalances(![]),await updateOpenOrders();if(lastOrders['length']==0x0&&allOpenOrders[_0x4b21b4(0x19b)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();}}async function getMarketCap(_0x2e7ce3){const _0x9f279=_0x184583;let _0x5202b4=![];if(_0x2e7ce3)_0x5202b4=!![];const _0x483bcd=_0x5202b4?_0x2e7ce3:currentCoins,_0x24afa4=_0x483bcd['map'](_0x1dd135=>_0x1dd135[_0x9f279(0x233)]);if(!config[_0x9f279(0x11f)]||!_0x5202b4&&!config[_0x9f279(0x13c)]||_0x24afa4[_0x9f279(0x19b)]==0x0)return;let _0x21193e=null;try{_0x21193e=await axios[_0x9f279(0x275)](_0x9f279(0x12d),{'headers':{'X-CMC_PRO_API_KEY':settings['marketcapApi']},'params':{'symbol':_0x24afa4[_0x9f279(0xde)]()}});}catch(_0x1077be){_0x21193e=null,_0x1077be['toString']()['includes'](_0x9f279(0x17a))?(config['marketcapApi']=![],updateConfig(),proxyEmit(_0x9f279(0xeb),emittedConfiguration()),logHistory(_0x9f279(0x27e),_0x9f279(0x132))):(logHistory(_0x9f279(0x27e),_0x9f279(0xe7)+schedulerInterval/(0x3c*0x3e8)+_0x9f279(0x18a)),logger[_0x9f279(0x138)](_0x9f279(0xe2),_0x1077be[_0x9f279(0xde)]()+_0x9f279(0xe9)+_0x1077be['code']));}const _0x4b3c1f=new Map();let _0x375e5a=!![];if(_0x21193e){let _0x338b0d=0x0;const _0x627269=_0x21193e['data'];_0x24afa4[_0x9f279(0x1f9)](_0x1a5bbb=>{const _0x55535f=_0x9f279;if(_0x627269[_0x55535f(0x221)][_0x1a5bbb][0x0]&&_0x627269[_0x55535f(0x221)][_0x1a5bbb][0x0][_0x55535f(0x287)][_0x55535f(0xe1)]['market_cap'])_0x4b3c1f[_0x55535f(0x20b)](_0x1a5bbb,_0x627269[_0x55535f(0x221)][_0x1a5bbb][0x0][_0x55535f(0x287)][_0x55535f(0xe1)][_0x55535f(0x177)]),_0x338b0d+=_0x627269[_0x55535f(0x221)][_0x1a5bbb][0x0][_0x55535f(0x287)]['USD'][_0x55535f(0x177)];else{if(_0x627269[_0x55535f(0x221)][_0x1a5bbb][0x0]&&_0x627269[_0x55535f(0x221)][_0x1a5bbb][0x0][_0x55535f(0x189)])_0x4b3c1f[_0x55535f(0x20b)](_0x1a5bbb,_0x627269[_0x55535f(0x221)][_0x1a5bbb][0x0][_0x55535f(0x189)]),_0x338b0d+=_0x627269[_0x55535f(0x221)][_0x1a5bbb][0x0][_0x55535f(0x189)];else{if(![_0x55535f(0x278),_0x55535f(0xe1)][_0x55535f(0x122)](_0x1a5bbb)){if(_0x5202b4)logHistory(_0x55535f(0x27e),_0x55535f(0x159)+_0x1a5bbb+_0x55535f(0x1cb));else{const _0x4bf972=config[_0x55535f(0x146)][_0x55535f(0x147)](_0x24ef36=>_0x24ef36['coin']==_0x1a5bbb);_0x4bf972&&!_0x4bf972[_0x55535f(0x1d4)]&&_0x4bf972[_0x55535f(0x29a)]==-0x1&&(_0x375e5a=![],logHistory(_0x55535f(0x27e),_0x55535f(0x1b6)),logger['debug'](_0x55535f(0x159)+_0x1a5bbb));}}}}});if(!_0x375e5a)return;_0x24afa4[_0x9f279(0x1f9)](_0x3c15ee=>{const _0x290515=_0x9f279,_0x786fb0=_0x4b3c1f['get'](_0x3c15ee)?_0x4b3c1f[_0x290515(0x275)](_0x3c15ee):0x0;if(_0x5202b4){const _0x59b941=_0x2e7ce3['find'](_0x4d0eb8=>_0x4d0eb8[_0x290515(0x233)]==_0x3c15ee);_0x59b941&&(_0x59b941[_0x290515(0x14b)]=_0x786fb0);}else{const _0x5381ab=currentCoins[_0x290515(0x147)](_0x178c32=>_0x178c32[_0x290515(0x233)]==_0x3c15ee);_0x5381ab&&(_0x5381ab['marketcap']=_0x786fb0);const _0x2d371b=currentCoinsAll['find'](_0x302161=>_0x302161[_0x290515(0x233)]==_0x3c15ee);_0x2d371b&&(_0x2d371b[_0x290515(0x14b)]=_0x786fb0);}}),!_0x5202b4&&updateTargetDistribution();}}function updateTargetDistribution(){const _0x18ffe6=_0x184583,_0x4b5a24=0x2;let _0x445a12=0x0,_0x267679=0x0,_0x5de131=0x0,_0x35274b=0x0,_0x20d9a4=0x0;config[_0x18ffe6(0x146)][_0x18ffe6(0x1f9)](_0x99ef99=>{const _0x34113e=_0x18ffe6;if(!_0x99ef99[_0x34113e(0x1d4)]){_0x5de131++,_0x445a12+=_0x99ef99[_0x34113e(0x29a)];if(_0x99ef99[_0x34113e(0x29a)]===-0x1){_0x445a12++;const _0x17dc69=currentCoinsAll[_0x34113e(0x147)](_0x441c16=>_0x441c16[_0x34113e(0x233)]==_0x99ef99[_0x34113e(0x233)]);_0x17dc69&&(_0x35274b+=_0x17dc69['marketcap'],_0x20d9a4+=Math[_0x34113e(0x1b5)](_0x17dc69[_0x34113e(0x14b)]));}if(_0x99ef99[_0x34113e(0x29a)]!==-0x1)_0x267679++;}});let _0x55e183;const _0x413206=0x64-_0x445a12,_0x5c762e=_0x5de131-_0x267679;_0x55e183=_0x5c762e===0x0?_0x445a12:Math[_0x18ffe6(0x27c)](0x64,_0x445a12),config['portfolio'][_0x18ffe6(0x1f9)](_0xa0f48=>{const _0x5550f3=_0x18ffe6,_0x5aceaf=currentCoinsAll[_0x5550f3(0x147)](_0x556111=>_0x556111[_0x5550f3(0x233)]==_0xa0f48[_0x5550f3(0x233)]);_0x5aceaf&&(_0xa0f48[_0x5550f3(0x14b)]=_0x5aceaf[_0x5550f3(0x14b)]);if(!_0xa0f48[_0x5550f3(0x1d4)]){if(_0x55e183<=0x64){if(_0xa0f48[_0x5550f3(0x29a)]===-0x1){if(_0x35274b!==0x0&&config['marketcapEnabled']){if(_0x5aceaf){if(config['marketcapEnabled']==_0x5550f3(0x14b))_0xa0f48[_0x5550f3(0x1bf)]=(_0x413206/(_0x35274b/_0x5aceaf[_0x5550f3(0x14b)]))['toFixed'](_0x4b5a24);else config[_0x5550f3(0x13c)]=='marketcapsqrt'&&(_0xa0f48[_0x5550f3(0x1bf)]=(_0x413206/(_0x20d9a4/Math[_0x5550f3(0x1b5)](_0x5aceaf[_0x5550f3(0x14b)])))[_0x5550f3(0x1e7)](_0x4b5a24));}}}}}}),updateConfig();}function updateConfig(){const _0x38bfe8=_0x184583;let _0xa42151=dbConfig[_0x38bfe8(0x275)](_0x38bfe8(0x270))[_0x38bfe8(0x147)]({'botID':botID})[_0x38bfe8(0x1a1)]();_0xa42151&&dbConfig['get'](_0x38bfe8(0x270))[_0x38bfe8(0x147)]({'botID':botID})[_0x38bfe8(0x1d1)](config)[_0x38bfe8(0xd0)]();}function logMemory(){const _0x4a3c96=_0x184583;if(environment!=_0x4a3c96(0x228))return;const _0xa2ee84=process['memoryUsage']()[_0x4a3c96(0x1ef)]/0x400/0x400;logger[_0x4a3c96(0x138)](_0x4a3c96(0x19a)+process['pid']+'\x20uses\x20'+formatResult(_0xa2ee84,0x1)+_0x4a3c96(0x236));}async function startScheduler(){const _0xd40678=_0x184583,_0xe1ad65=shiftedTime()[_0xd40678(0x130)]();getMarketCap(),loadSymbols(),_0xe1ad65==0x1&&logMemory(),await sleep(schedulerInterval),startScheduler();}async function restartBot(_0x11f41c=![]){const _0x3ec46a=_0x184583;logger[_0x3ec46a(0x138)](_0x3ec46a(0x281));if(!_0x11f41c)while(lockOrders!=ORDERS[_0x3ec46a(0x290)]||coolingDown){await sleep(0x3e8);}process[_0x3ec46a(0x24c)]({'stop':_0x3ec46a(0x111)},_0x232aa8=>{});}async function initExchange(_0x5e2c81=config[_0x184583(0x149)],_0x21e534=config['apiKey'],_0x50b367=config[_0x184583(0x1c0)],_0x4f9f0f=config[_0x184583(0x211)],_0x3bb69d=config[_0x184583(0x152)]){const _0xdc1702=_0x184583;if(exchange){logger[_0xdc1702(0x138)](_0xdc1702(0x295));return;}logger[_0xdc1702(0x138)]('Initializing\x20exchange');!supportedExchanges()['includes'](_0x5e2c81)&&(logHistory(_0xdc1702(0x27e),_0xdc1702(0x26c)+_0x5e2c81+_0xdc1702(0x283)),killBot());const _0x3e89ba=ccxt[_0xdc1702(0x273)][_0x5e2c81[_0xdc1702(0x1f5)]()];exchange=new _0x3e89ba({'apiKey':_0x21e534,'secret':_0x50b367,'options':{'defaultType':'spot'}});if(_0x4f9f0f)exchange[_0xdc1702(0x18c)]=_0x4f9f0f;if(exchange[_0xdc1702(0x133)][_0xdc1702(0x152)])exchange[_0xdc1702(0x16b)](_0x3bb69d);if(_0x5e2c81[_0xdc1702(0x1f5)]()==_0xdc1702(0x23a))exchange[_0xdc1702(0x1a5)]['operatorId']=operatorId;}function updateExchange(_0x2d7f29,_0x2062c5,_0x2552ff=null){const _0x54a83=_0x184583;exchange['apiKey']=_0x2d7f29,exchange['secret']=_0x2062c5,exchange[_0x54a83(0x18c)]=_0x2552ff,logger['debug'](_0x54a83(0x1d9));}function setStableCoins(){const _0x4701b1=_0x184583;let _0xba8ad4=config[_0x4701b1(0x1e5)]==_0x4701b1(0x250)?_0x4701b1(0x250):config['basecoin']==_0x4701b1(0x188)?_0x4701b1(0x188):_0x4701b1(0x158),_0x2e443e=allSymbols[_0x4701b1(0x122)](_0xba8ad4+_0x4701b1(0xc7))?'USD':allSymbols[_0x4701b1(0x122)](_0xba8ad4+'/USDT')?_0x4701b1(0x1ce):_0x4701b1(0x278),_0x21782f=allSymbols[_0x4701b1(0x122)](_0xba8ad4+_0x4701b1(0xf6))?'EUR':_0x2e443e;enableFiatToggle=!![],_0x2e443e=='EUR'&&(enableFiatToggle=![],storeFiat(_0x4701b1(0x278))),_0x21782f!=_0x4701b1(0x278)&&(enableFiatToggle=![],storeFiat(_0x4701b1(0xe1))),stablecoins={'eur':{'coin':''+_0xba8ad4+_0x21782f,'symbol':_0xba8ad4+'/'+_0x21782f},'usd':{'coin':''+_0xba8ad4+_0x2e443e,'symbol':_0xba8ad4+'/'+_0x2e443e}};}async function initwsCcxt(){const _0x479e53=_0x184583;initCycle++;const _0x54519d=initCycle;let _0x3193e4=[];config['portfolio'][_0x479e53(0x1f9)](_0x7d149c=>{const _0x2ae599=_0x479e53;if(!_0x7d149c[_0x2ae599(0x1d4)]&&_0x7d149c[_0x2ae599(0x233)]!=config[_0x2ae599(0x1e5)])_0x3193e4['push'](_0x7d149c['symbol']);});if(!_0x3193e4[_0x479e53(0x122)](stablecoins[_0x479e53(0x297)]['symbol']))_0x3193e4[_0x479e53(0x29e)](stablecoins[_0x479e53(0x297)][_0x479e53(0x210)]);if(!_0x3193e4[_0x479e53(0x122)](stablecoins[_0x479e53(0x260)][_0x479e53(0x210)]))_0x3193e4[_0x479e53(0x29e)](stablecoins[_0x479e53(0x260)][_0x479e53(0x210)]);loadCoins(_0x3193e4),_0x3193e4=validateSymbols(_0x3193e4);const _0x3cfd7b=async _0xb25705=>{const _0x5bb540=_0x479e53;let _0x333ce6;try{const _0xdcf812=await getTickers(_0xb25705);Object['entries'](_0xdcf812)[_0x5bb540(0x1f9)](_0x5acf4e=>{const _0x24a19d=_0x5bb540;_0x333ce6=_0x5acf4e[0x1]['symbol'],gTicker[noslash(_0x333ce6)]=_0x5acf4e[0x1][_0x24a19d(0x18b)],gChange[_0x333ce6]=_0x5acf4e[0x1][_0x24a19d(0x22c)];});}catch(_0xa21b98){await handleError(_0xa21b98,_0x5bb540(0xc6),_0x333ce6);}},_0x1cc800=async _0x67c527=>{const _0x193045=_0x479e53;while(initCycle==_0x54519d){if(!botPaused)try{const _0x6f6ebf=await exchange['watchTrades'](_0x67c527);gTicker[noslash(_0x6f6ebf[0x0][_0x193045(0x210)])]=_0x6f6ebf[0x0][_0x193045(0x1f2)];}catch(_0x3c87a7){if(!exchangeStopped)await handleError(_0x3c87a7,_0x193045(0x131),_0x67c527);}else await sleep(0x64);}},_0xb1e88d=async _0x3891e4=>{const _0x1b9420=_0x479e53;while(initCycle==_0x54519d){if(!botPaused)try{const _0x129cf4=await exchange[_0x1b9420(0x241)](_0x3891e4),_0x323fd6=_0x129cf4['pop']();gTicker[noslash(_0x323fd6[_0x1b9420(0x210)])]=_0x323fd6['price'];}catch(_0x21c3f6){if(!exchangeStopped)await handleError(_0x21c3f6,_0x1b9420(0x19c),_0x3891e4[_0x1b9420(0xde)]());}else await sleep(0x64);}},_0xccd565=async _0x5eb9dc=>{const _0x1887a4=_0x479e53;while(initCycle==_0x54519d){if(!botPaused){let _0x247c38;try{await sleep(0x3c*0x3e8);const _0x1fbb08=await getTickers(_0x5eb9dc);Object[_0x1887a4(0x1da)](_0x1fbb08)['forEach'](_0x249ee9=>{const _0x27f13d=_0x1887a4;_0x247c38=_0x249ee9[0x1][_0x27f13d(0x210)],gChange[_0x247c38]=_0x249ee9[0x1][_0x27f13d(0x22c)];});}catch(_0x13ce9){if(!exchangeStopped)await handleError(_0x13ce9,_0x1887a4(0x139),_0x247c38);}}else await sleep(0x64);}},_0x1d423b=async _0xdd1d32=>{while(initCycle==_0x54519d){if(!botPaused)try{const _0x3c8a66=await exchange['watchOrders'](_0xdd1d32);initCycle==_0x54519d&&_0x3c8a66['forEach'](_0x554142=>{updateNumberCoinsCcxt(_0x554142);});}catch(_0x3cdb89){if(!exchangeStopped)await handleError(_0x3cdb89,'watchOrders()');}else await sleep(0x64);}};_0x3cfd7b(_0x3193e4),_0xccd565(_0x3193e4),exchange[_0x479e53(0x133)][_0x479e53(0x241)]&&!(config[_0x479e53(0x149)]==_0x479e53(0x15e)&&_0x3193e4[_0x479e53(0x19b)]>0xa)?_0xb1e88d(_0x3193e4):_0x3193e4[_0x479e53(0x1f9)](_0x415122=>{_0x1cc800(_0x415122);}),_0x3193e4[_0x479e53(0x1f9)](_0x16b300=>{_0x1d423b(_0x16b300);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x367e6f){const _0x573a50=_0x184583;let _0x9448cc={};try{if(config[_0x573a50(0x149)]!=_0x573a50(0x119))_0x9448cc=await exchange[_0x573a50(0x277)](_0x367e6f);else for(const _0x306588 of _0x367e6f){const _0x513675=await exchange[_0x573a50(0x172)](_0x306588);_0x9448cc[_0x306588]=_0x513675;}return _0x9448cc;}catch(_0x512a5a){throw _0x512a5a;}}function setBlockTransactionDetection(_0x59fc4e){blockTransactionDetection=_0x59fc4e,logger['debug']('Block\x20transaction\x20detection:\x20'+blockTransactionDetection);}async function detectLiquidityChange(_0x53f20e=0x0){const _0x4f998a=_0x184583;transactionDetectionOngoing=!![];try{const _0x184a07=await getCoins(_0x53f20e),[_0x562bec,_0xd83e6f]=_0x184a07;let _0x2723f8=[];currentCoins[_0x4f998a(0x1f9)](_0x20cb90=>{const _0x5c5132=_0x4f998a,_0x79e9c9=_0x562bec[_0x5c5132(0x147)](_0x7e17cf=>_0x7e17cf[_0x5c5132(0x233)]==_0x20cb90['coin']);if(_0x79e9c9){if(_0x20cb90[_0x5c5132(0x117)]!=_0x79e9c9[_0x5c5132(0x117)]){let _0x41ad6c;if(_0x20cb90[_0x5c5132(0x233)]!=config[_0x5c5132(0x1e5)]){const _0x505527=gTicker[noslash(_0x20cb90[_0x5c5132(0x210)])];_0x41ad6c=_0x20cb90['reverse']?0x1/_0x505527:_0x505527;}else _0x41ad6c=0x1;_0x2723f8['push']({'coin':_0x20cb90[_0x5c5132(0x233)],'symbol':_0x20cb90['symbol'],'price':_0x41ad6c,'number':Number(formatResult(_0x79e9c9[_0x5c5132(0x117)]-_0x20cb90[_0x5c5132(0x117)],0x8)),'basecoinvalue':_0x41ad6c*(_0x79e9c9['number']-_0x20cb90['number'])});}}});if(_0x2723f8[_0x4f998a(0x19b)]>0x0&&!blockTransactionDetection){for(const _0x46696e of _0x2723f8){if(config[_0x4f998a(0xc5)]){logger[_0x4f998a(0x138)](_0x4f998a(0x12a)+_0x46696e[_0x4f998a(0x265)]+_0x4f998a(0x26e)+lastFees['highest']);if(lastFees[_0x4f998a(0xbb)]==0x0||Math['abs'](_0x46696e['basecoinvalue'])>lastFees[_0x4f998a(0xbb)]*0x3){if(config[_0x4f998a(0xc5)]==_0x4f998a(0x1a7)){delete _0x46696e[_0x4f998a(0x210)],delete _0x46696e[_0x4f998a(0x265)];let _0x7a3624=[],_0x549274=[...config[_0x4f998a(0x166)]]||[],_0x147bb9=config[_0x4f998a(0x166)];_0x549274[_0x4f998a(0x17f)]((_0x444ffb,_0x168f54)=>_0x444ffb[_0x4f998a(0x26d)]>_0x168f54[_0x4f998a(0x26d)]?-0x1:_0x168f54[_0x4f998a(0x26d)]>_0x444ffb[_0x4f998a(0x26d)]?0x1:0x0);const _0x2b1628=getDate();if(_0x549274[0x0]){const _0x53bd12=fns[_0x4f998a(0x168)](_0x549274[0x0]['date'],_0x4f998a(0x171),new Date()),_0x351266=fns[_0x4f998a(0x168)](_0x2b1628,'yyyy/MM/dd',new Date());if(fns['isEqual'](_0x53bd12,_0x351266)){_0x7a3624=_0x549274[0x0][_0x4f998a(0x230)];const _0x3e99f9=_0x7a3624['find'](_0x3441d8=>_0x3441d8['coin']==_0x46696e[_0x4f998a(0x233)]);_0x3e99f9?(_0x3e99f9['number']+=_0x46696e[_0x4f998a(0x117)],_0x3e99f9[_0x4f998a(0x117)]==0x0&&(_0x7a3624=_0x7a3624[_0x4f998a(0x137)](_0x5ca20f=>{const _0x41834d=_0x4f998a;return _0x5ca20f[_0x41834d(0x233)]!=_0x46696e['coin'];}))):_0x7a3624[_0x4f998a(0x29e)](_0x46696e);const _0x5a6f4a=_0x147bb9[_0x4f998a(0x147)](_0x4914e0=>_0x4914e0[_0x4f998a(0x26d)]==_0x2b1628);_0x5a6f4a[_0x4f998a(0x230)]=_0x7a3624;}else _0x147bb9['push']({'date':_0x2b1628,'changes':[_0x46696e]});}const _0x402be3=_0x147bb9[_0x4f998a(0x147)](_0x2ba503=>_0x2ba503[_0x4f998a(0x26d)]==_0x2b1628);if(_0x402be3){let _0x2236ca=!![];_0x402be3[_0x4f998a(0x230)][_0x4f998a(0x1f9)](_0x5ae5c1=>{const _0x1046fa=_0x4f998a;if(_0x5ae5c1[_0x1046fa(0x117)]!=0x0)_0x2236ca=![];}),_0x2236ca&&(_0x147bb9=_0x147bb9[_0x4f998a(0x137)](_0x10e2cb=>{return _0x10e2cb['date']!=_0x2b1628;}));}let _0x74f4df=dbConfig[_0x4f998a(0x275)](_0x4f998a(0x270))[_0x4f998a(0x147)]({'botID':botID})[_0x4f998a(0x1a1)]();_0x74f4df&&(dbConfig['get'](_0x4f998a(0x270))[_0x4f998a(0x147)]({'botID':botID})['assign']({'liquidity':_0x147bb9})[_0x4f998a(0xd0)](),config[_0x4f998a(0x166)]=_0x147bb9);logHistory(_0x4f998a(0xf3),_0x4f998a(0x234)+Math[_0x4f998a(0xdd)](_0x46696e[_0x4f998a(0x117)])+'\x20'+_0x46696e[_0x4f998a(0x233)]+'\x20'+(_0x46696e['number']>0x0?_0x4f998a(0x112):_0x4f998a(0x24a))+_0x4f998a(0x268)),proxyEmit(_0x4f998a(0xeb),emittedConfiguration());const _0x279d40=getNormalizedPerformance();emitPerformance(_0x279d40),getStartingBalances(_0x279d40),logger['debug'](_0x4f998a(0xd8));}else config[_0x4f998a(0xc5)]==_0x4f998a(0x1c8)&&(config['headless']?(await storeHeadless({'headless':![]}),logHistory(_0x4f998a(0xf3),'Portfolio\x20change\x20detected:\x20'+Math[_0x4f998a(0xdd)](_0x46696e['number'])+'\x20'+_0x46696e['coin']+'\x20'+(_0x46696e[_0x4f998a(0x117)]>0x0?'added':_0x4f998a(0x24a))+_0x4f998a(0x1f7))):logger['debug'](_0x4f998a(0x234)+Math[_0x4f998a(0xdd)](_0x46696e[_0x4f998a(0x117)])+'\x20'+_0x46696e[_0x4f998a(0x233)]+'\x20'+(_0x46696e[_0x4f998a(0x117)]>0x0?_0x4f998a(0x112):_0x4f998a(0x24a))+_0x4f998a(0x106)));}else logger[_0x4f998a(0x138)](_0x4f998a(0x185)+Math[_0x4f998a(0xdd)](_0x46696e[_0x4f998a(0x117)])+'\x20'+_0x46696e['coin']+'\x20'+(_0x46696e['number']>0x0?_0x4f998a(0x112):_0x4f998a(0x24a)));}else logger[_0x4f998a(0x138)](_0x4f998a(0x234)+Math[_0x4f998a(0xdd)](_0x46696e[_0x4f998a(0x117)])+'\x20'+_0x46696e[_0x4f998a(0x233)]+'\x20'+(_0x46696e[_0x4f998a(0x117)]>0x0?'added':_0x4f998a(0x24a))+_0x4f998a(0x245));}currentCoins=_0x562bec,currentCoinsAll=_0xd83e6f;}}catch(_0x30b4c6){if(!exchangeStopped)await handleError(_0x30b4c6,_0x4f998a(0x142));}transactionDetectionOngoing=![];}async function watchTransactions(){await sleep(0x14*0x3e8);while(!![]){!botPaused&&!blockTransactionDetection&&coinsLoaded?(detectLiquidityChange(),await sleep(watchTransactionsInterval)):await sleep(0x3e8);}}async function loadSymbols(){const _0x251d29=_0x184583;try{markets=await exchange[_0x251d29(0x218)](!![]),allSymbols=[],Object[_0x251d29(0x1da)](markets)[_0x251d29(0x1f9)](_0x60277f=>{const _0x4d97f0=_0x251d29;_0x60277f[0x1][_0x4d97f0(0x21f)]&&_0x60277f[0x1][_0x4d97f0(0x29d)]&&allSymbols[_0x4d97f0(0x29e)](_0x60277f[0x0]);});}catch(_0x1590d6){markets?logger[_0x251d29(0x138)]('Error\x20in\x20loadSymbols():\x20'+_0x1590d6[_0x251d29(0xde)]()):(loading[_0x251d29(0x224)]=!![],_0x1590d6[_0x251d29(0xde)]()[_0x251d29(0x1f5)]()[_0x251d29(0x122)](_0x251d29(0x170))||_0x1590d6['toString']()[_0x251d29(0x1f5)]()[_0x251d29(0x122)](_0x251d29(0x190))?(logHistory(_0x251d29(0x27e),_0x251d29(0x22a)),loading[_0x251d29(0x27e)]='timestamp-issue'):handleErrorNoStop(_0x1590d6,_0x251d29(0x174),!![]),logHistory('error',_0x251d29(0x14d)),logHistory('error',_0x251d29(0x17d)+loadCoinsRetryInterval/0xea60+_0x251d29(0x28c)),logger['debug'](_0x251d29(0xe2),_0x1590d6),emitLoadingProgress(),botPaused=!![],await sleep(loadCoinsRetryInterval),restartBot());}}function validateSymbols(_0x5ada69){const _0x1c09a2=_0x184583;let _0x575773=[];return _0x5ada69[_0x1c09a2(0x1f9)](_0x29f936=>{const _0x1982a4=_0x1c09a2;!allSymbols[_0x1982a4(0x122)](_0x29f936)?(logHistory(_0x1982a4(0x27e),'Invalid\x20symbol:\x20'+_0x29f936+_0x1982a4(0x1df)),loading[_0x1982a4(0x292)]=!![],emitLoadingProgress()):_0x575773[_0x1982a4(0x29e)](_0x29f936);}),_0x575773;}async function initclient(){const _0x11d58c=_0x184583;proxyEmit(_0x11d58c(0xeb),emittedConfiguration()),proxyEmit('exchanges',supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x11d58c(0x11d),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x4b4662=getNormalizedPerformance();emitPerformance(_0x4b4662),getStartingBalances(_0x4b4662);}async function toggleBotMode(){const _0x3e8886=_0x184583;let _0x1e2d05=dbConfig[_0x3e8886(0x275)](_0x3e8886(0x270))[_0x3e8886(0x147)]({'botID':botID})['value']();if(_0x1e2d05){const _0x5269f6=!_0x1e2d05[_0x3e8886(0x103)];dbConfig[_0x3e8886(0x275)](_0x3e8886(0x270))['find']({'botID':botID})[_0x3e8886(0x1d1)]({'headless':_0x5269f6})[_0x3e8886(0xd0)](),config[_0x3e8886(0x103)]=_0x5269f6,proxyEmit(_0x3e8886(0xeb),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x17d660=_0x184583;process[_0x17d660(0x24c)]({'updatebotmanager':!![]},_0x8e0b4e=>{}),logger['debug']('Headless:\x20'+config[_0x17d660(0x103)]);}async function loadCoins(_0x52a03e){const _0x405bfa=_0x184583;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0xb162e9,_0xa1360c=0x0,_0x30c3ce=0x0;_0x52a03e['forEach'](_0x2b896a=>{const _0x3a25f2=_0x48ee;loading[_0x3a25f2(0x24b)]['push'](_0x2b896a);}),loadingCanceled=![];let _0x52a317=![];while(_0xb162e9!=_0x52a03e[_0x405bfa(0x19b)]+maxLoadingProgress){_0xb162e9=loadingProgress,_0x52a03e[_0x405bfa(0x1f9)](_0xd8517d=>{const _0x1a5052=_0x405bfa;if(gTicker[noslash(_0xd8517d)]){loading[_0x1a5052(0x24b)]=loading['remainingSymbols'][_0x1a5052(0x137)](_0x10d7d4=>_0x10d7d4!=_0xd8517d);if(!watchedSymbols[_0x1a5052(0x122)](_0xd8517d))watchedSymbols[_0x1a5052(0x29e)](_0xd8517d);_0xb162e9++;}}),loading[_0x405bfa(0x262)]=Math[_0x405bfa(0xf7)](_0xb162e9/(_0x52a03e[_0x405bfa(0x19b)]+maxLoadingProgress)*0x64);loading[_0x405bfa(0x262)]!=0x64&&(_0x30c3ce>0x1e*0x5&&(loading[_0x405bfa(0x292)]=!![],emitLoadingProgress()),_0x30c3ce>0x78*0x5&&!_0x52a317&&(_0x52a317=!![],logHistory(_0x405bfa(0x27e),_0x405bfa(0x25e)+loading['remainingSymbols']['join'](',\x20')+'\x20-\x20bot\x20not\x20started'),logHistory('error',_0x405bfa(0x17d)+loadCoinsRetryInterval/0xea60+'\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again'),loadingCanceled=!![],await sleep(loadCoinsRetryInterval),restartBot()));if(loadingCanceled){loading['cancel']=!![],emitLoadingProgress();break;}else _0xa1360c!=loading[_0x405bfa(0x262)]&&(_0xa1360c=loading[_0x405bfa(0x262)],emitLoadingProgress()),_0x30c3ce++,await sleep(0xc8);}_0xb162e9==_0x52a03e['length']+maxLoadingProgress&&(coinsLoaded=!![],process[_0x405bfa(0x24c)]({'status':_0x405bfa(0x1ea),'live':'running'},_0x520a45=>{}),_0x52a317&&logHistory(_0x405bfa(0xf3),'All\x20coin\x20data\x20loaded\x20-\x20bot\x20started'));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x18f524=_0x184583;proxyEmit(_0x18f524(0xeb),{...emittedConfiguration(),'configstate':'loading-canceled'});}function emitLoadingProgress(){proxyEmit('coin-loading-progress',loading);}async function getFiat(){const _0xb3e22e=_0x184583;let _0x2552f1=gTicker[stablecoins[_0xb3e22e(0x297)]['coin']],_0x3cf241=gTicker[stablecoins[_0xb3e22e(0x260)][_0xb3e22e(0x233)]];return{'eur':Number(_0x2552f1),'usd':Number(_0x3cf241)};}function capitalize(_0x368432){const _0x5ea675=_0x184583;return _0x368432[_0x5ea675(0x254)](0x0,0x1)[_0x5ea675(0x285)]()+_0x368432[_0x5ea675(0x254)](0x1);}function supportedExchanges(){const _0x3675d4=_0x184583,_0x51d958=['ws',_0x3675d4(0x277),_0x3675d4(0x172),_0x3675d4(0x217),_0x3675d4(0x162),_0x3675d4(0x288),'createOrder','fetchOpenOrders',_0x3675d4(0xf9)];let _0x15bb11=[],_0x475f46=[],_0x495c55=ccxt[_0x3675d4(0x273)][_0x3675d4(0x1f4)];_0x495c55[_0x3675d4(0x1f9)](_0x472534=>{const _0xe226e9=_0x3675d4;try{const _0x3d7d7d=new ccxt[(_0xe226e9(0x273))][_0x472534]();_0x475f46[_0xe226e9(0x29e)](_0x3d7d7d);}catch(_0x533325){}}),_0x475f46[_0x3675d4(0x1f9)](_0xfdb4d6=>{const _0x36bc03=_0x3675d4;let _0x5822c6=0x0;_0x51d958[_0x36bc03(0x1f9)](_0x207859=>{const _0x32b16e=_0x36bc03;_0x207859 in _0xfdb4d6[_0x32b16e(0x133)]&&_0xfdb4d6[_0x32b16e(0x133)][_0x207859]&&_0x5822c6++;}),_0x5822c6==_0x51d958[_0x36bc03(0x19b)]&&(!excludedExchanges['includes'](_0xfdb4d6['id'])&&_0x15bb11[_0x36bc03(0x29e)](capitalize(_0xfdb4d6['id'])));});let _0x4e391a=[];return _0x495c55[_0x3675d4(0x1f9)](_0x548429=>{const _0x9e3cff=_0x3675d4;_0x548429=capitalize(_0x548429);if(!_0x15bb11[_0x9e3cff(0x122)](_0x548429))_0x4e391a[_0x9e3cff(0x29e)](_0x548429);}),_0x15bb11;}function setStartDatePerformance(){const _0x4e30d1=_0x184583;if(config&&config['liquidity'][0x0]['changes'][_0x4e30d1(0x19b)]!=0x0){const _0x301e32=config[_0x4e30d1(0x166)][0x0][_0x4e30d1(0x230)];dbPerformance[_0x4e30d1(0x275)]('data')[_0x4e30d1(0x147)]({'date':config[_0x4e30d1(0x108)]})[_0x4e30d1(0x1d1)]({'coins':_0x301e32})[_0x4e30d1(0xd0)]();}}function calculatePnL(_0x36096f,_0x44065e,_0x5526d1,_0x5e153a,_0x148874,_0x5d08a0){const _0xa7328c=_0x184583;!_0x36096f[_0xa7328c(0x122)]('/'+config[_0xa7328c(0x1e5)])&&(_0x5526d1=_0x5526d1=='buy'?_0xa7328c(0x29b):_0xa7328c(0x20c));!_0x5d08a0[_0x44065e]&&(_0x5d08a0[_0x44065e]={'number':0x0,'sells':0x0,'buys':0x0,'breakeven':0x0,'realizedPnL':0x0});let _0x58114e=0x0,_0x292b57,_0x4dbd99;if(_0x5526d1==_0xa7328c(0x20c))_0x4dbd99=_0x5d08a0[_0x44065e]['number']*_0x5d08a0[_0x44065e][_0xa7328c(0x223)]+_0x148874*_0x5e153a,_0x5d08a0[_0x44065e][_0xa7328c(0x117)]+=_0x5e153a,_0x5d08a0[_0x44065e][_0xa7328c(0x223)]=_0x5d08a0[_0x44065e][_0xa7328c(0x117)]!=0x0?_0x4dbd99/_0x5d08a0[_0x44065e]['number']:0x0,_0x5d08a0[_0x44065e][_0xa7328c(0x1dc)]++;else _0x5526d1=='sell'&&(_0x292b57=Math[_0xa7328c(0x148)](_0x5d08a0[_0x44065e][_0xa7328c(0x117)],_0x5e153a),_0x58114e=(_0x148874-_0x5d08a0[_0x44065e][_0xa7328c(0x223)])*_0x292b57,_0x4dbd99=Math[_0xa7328c(0x27c)](_0x5d08a0[_0x44065e][_0xa7328c(0x117)]*_0x5d08a0[_0x44065e][_0xa7328c(0x223)]-_0x292b57*_0x5d08a0[_0x44065e][_0xa7328c(0x223)],0x0),_0x5d08a0[_0x44065e][_0xa7328c(0x117)]-=_0x292b57,_0x5d08a0[_0x44065e]['breakeven']=_0x5d08a0[_0x44065e][_0xa7328c(0x117)]!=0x0?_0x4dbd99/_0x5d08a0[_0x44065e][_0xa7328c(0x117)]:0x0,_0x5d08a0[_0x44065e][_0xa7328c(0x10a)]+=_0x58114e,_0x5d08a0[_0x44065e][_0xa7328c(0x10c)]++);return _0x58114e;}async function generatePnL(){const _0x1004f8=_0x184583;pnlGenerationNeeded=![],logger['debug']('Generating\x20PnL\x20data');const _0x5402ad=dbLogs[_0x1004f8(0x275)](_0x1004f8(0x109))['value']();let _0x2387e4={},_0x52ac83=0x0,_0x272f55=0x0,_0x2f0d33=config[_0x1004f8(0x108)];const _0x3f51a5=fns[_0x1004f8(0x168)](_0x2f0d33,_0x1004f8(0x171),new Date()),_0x5a8ace=new Date();let _0x5c9a08=0x0;for(let _0x32f669=_0x3f51a5;!fns[_0x1004f8(0x1ec)](_0x5a8ace,_0x32f669);_0x32f669=fns[_0x1004f8(0xea)](_0x32f669,0x1)){const _0x5d8f2b=fns[_0x1004f8(0x128)](_0x32f669,_0x1004f8(0x171));while(_0x52ac83<_0x5402ad[_0x1004f8(0x19b)]){const _0x197c20=new Date(_0x5402ad[_0x52ac83]['time']);if(fns[_0x1004f8(0x1ec)](_0x197c20,_0x32f669))_0x52ac83++;else{if(_0x5402ad[_0x52ac83][_0x1004f8(0x182)][_0x1004f8(0x122)](_0x5d8f2b)){const _0x58e026=_0x5402ad[_0x52ac83];if(_0x58e026[_0x1004f8(0xd5)]==='order'&&(_0x58e026[_0x1004f8(0xf0)]['includes'](_0x1004f8(0x113))||_0x58e026['event'][_0x1004f8(0x122)](_0x1004f8(0x1d3)))){const _0x3c3305=_0x58e026[_0x1004f8(0xf0)][_0x1004f8(0xca)](/([A-Z]+\/[A-Z]+) (sell|buy) #([\d.]+) @([\d.]+)/);if(_0x3c3305){const [,_0x227d64,_0xc4aa1e,_0x518e2b,_0x1195e1]=_0x3c3305,_0x481434=_0x227d64[_0x1004f8(0x122)]('/'+config['basecoin'])?_0x227d64['split']('/')[0x0]:_0x227d64[_0x1004f8(0x21c)]('/')[0x1],_0x55f368=calculatePnL(_0x227d64,_0x481434,_0xc4aa1e,parseFloat(_0x518e2b),parseFloat(_0x1195e1),_0x2387e4);_0x272f55+=_0x55f368;}}_0x52ac83++;}else break;}}dbPerformance['get']('data')[_0x1004f8(0x147)]({'date':_0x5d8f2b})[_0x1004f8(0x1d1)]({'pnl':_0x272f55})[_0x1004f8(0xd0)]();}dbCoinResults[_0x1004f8(0x20b)](_0x1004f8(0x25f),_0x2387e4)[_0x1004f8(0xd0)](),logger[_0x1004f8(0x138)](_0x1004f8(0x1a4));const _0x4e4a76=getNormalizedPerformance();emitPerformance(_0x4e4a76);}async function updatePnL(_0x1bdb8f){const _0x262435=_0x184583,{symbol:_0x54d98a,coin:_0xf113e,amount:_0x147f42,price:_0x3a4cb4,side:_0x43cf6e,reverse:_0x4a4bb5}=_0x1bdb8f;let _0x157abc=dbCoinResults[_0x262435(0x275)](_0x262435(0x25f))['value']();const _0x5b2680=calculatePnL(_0x54d98a,_0xf113e,_0x43cf6e,_0x147f42,_0x3a4cb4,_0x157abc);dbCoinResults[_0x262435(0x20b)](_0x262435(0x25f),_0x157abc)[_0x262435(0xd0)]();const _0x4cfc23=getTimeStamp()[_0x262435(0x21c)]('\x20')[0x0];let _0x151f4f=dbPerformance[_0x262435(0x275)](_0x262435(0x221))[_0x262435(0x147)]({'date':_0x4cfc23})[_0x262435(0x1a1)]();_0x151f4f?(_0x151f4f['pnl']+=_0x5b2680,dbPerformance[_0x262435(0x275)](_0x262435(0x221))[_0x262435(0x147)]({'date':_0x4cfc23})['assign'](_0x151f4f)[_0x262435(0xd0)]()):await storePerformance();const _0x51159f=getNormalizedPerformance();emitPerformance(_0x51159f);}async function validate24hChanges(){const _0x23a248=_0x184583;for(const _0x10be08 of currentCoins){if(_0x10be08[_0x23a248(0x233)]!=config[_0x23a248(0x1e5)]){let _0x1a4cb8;_0x10be08[_0x23a248(0x154)]?_0x1a4cb8=formatResult((0x1/(gChange[_0x10be08[_0x23a248(0x210)]]/0x64+0x1)-0x1)*0x64,0x3):_0x1a4cb8=gChange[_0x10be08[_0x23a248(0x210)]],_0x1a4cb8<config[_0x23a248(0x127)]&&(logHistory(_0x23a248(0x27e),_0x10be08['coin']+'\x20has\x20a\x2024h\x20drop\x20of\x20'+_0x1a4cb8+'%'),logHistory('error','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses'),logHistory(_0x23a248(0x27e),'Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again'),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x53fb2c,_0x3e4419){const _0x3c700c=_0x184583;if(!_0x53fb2c)return!![];const _0x29e56a=_0x3e4419[_0x3c700c(0x21c)]('.'),_0x4360eb=_0x53fb2c[_0x3c700c(0x21c)]('.');for(var _0x4f63f9=0x0;_0x4f63f9<_0x4360eb[_0x3c700c(0x19b)];_0x4f63f9++){const _0x5e173a=~~_0x4360eb[_0x4f63f9],_0x1048e6=~~_0x29e56a[_0x4f63f9];if(_0x5e173a<_0x1048e6)return!![];if(_0x5e173a>_0x1048e6)return![];}return![];}async function oneTimeMigration(){const _0x18e279=_0x184583;let _0xbbd36b=dbLogs[_0x18e279(0x275)](_0x18e279(0x294))[_0x18e279(0x1a1)]();if(isOlderVersion(_0xbbd36b,_0x18e279(0x191))){let _0x34ff97=[];const _0x3512f7=dbLogs['get'](_0x18e279(0x109))[_0x18e279(0x1a1)]();_0x3512f7[_0x18e279(0x1f9)](_0x2c1748=>{const _0x3f2f8d=_0x18e279;_0x34ff97[_0x3f2f8d(0x29e)]({'time':_0x2c1748[_0x3f2f8d(0x182)],'type':_0x2c1748[_0x3f2f8d(0xd5)],'event':_0x2c1748[_0x3f2f8d(0xf0)]});}),dbLogs[_0x18e279(0x275)](_0x18e279(0x109))[_0x18e279(0x1d1)](_0x34ff97)[_0x18e279(0xd0)]();}let _0x3f6661=dbConfig[_0x18e279(0x275)]('version')[_0x18e279(0x1a1)]();if(isOlderVersion(_0x3f6661,_0x18e279(0x191))){let _0x2c51d2=dbConfig[_0x18e279(0x275)](_0x18e279(0x270))[_0x18e279(0x147)]({'botID':botID})[_0x18e279(0x1a1)]();if(_0x2c51d2){let _0x48de4b=[];_0x2c51d2[_0x18e279(0x146)][_0x18e279(0x1f9)](_0x4dd28e=>{const _0xb7d66f=_0x18e279;_0x48de4b[_0xb7d66f(0x29e)]({'coin':_0x4dd28e[_0xb7d66f(0x233)],'number':_0x4dd28e['startnumber'],'price':_0x4dd28e[_0xb7d66f(0x1e8)]}),delete _0x4dd28e[_0xb7d66f(0x16a)],delete _0x4dd28e[_0xb7d66f(0x1e8)];});if(_0x48de4b[_0x18e279(0x19b)]!==0x0)fs[_0x18e279(0x240)](configbackuppath+(_0x18e279(0x11b)+botID+_0x18e279(0x13b)),JSON['stringify'](_0x48de4b,null,0x4),function(_0x1cc716){if(_0x1cc716){}});const _0x140e62=(_0x2859cd,_0x47e681)=>{const _0x3a022=_0x18e279;let _0x5d1c26=[];_0x47e681[_0x3a022(0x1f9)](_0x1c0688=>{const _0xc61d27=_0x3a022,_0x3c9fbe=_0x2859cd['find'](_0x1cfc22=>_0x1cfc22[_0xc61d27(0x233)]==_0x1c0688[_0xc61d27(0x233)]);if(!_0x3c9fbe)_0x5d1c26['push'](_0x1c0688);});let _0x128785=[];return _0x2859cd[_0x3a022(0x1f9)](_0x5991df=>{const _0x23295d=_0x3a022,_0x230fbd=_0x47e681[_0x23295d(0x147)](_0x5534a1=>_0x5534a1['coin']==_0x5991df[_0x23295d(0x233)]);if(!_0x230fbd||_0x230fbd[_0x23295d(0x117)]==0x0&&_0x5991df[_0x23295d(0x117)]!=0x0)_0x128785['push'](_0x5991df);}),{'missingDay1':_0x5d1c26,'notInDay2':_0x128785};},_0x22daa4=dbPerformance[_0x18e279(0x275)](_0x18e279(0x221))[_0x18e279(0xd9)]()[_0x18e279(0x1a1)]();if(_0x22daa4[_0x18e279(0x19b)]>0x1){const {missingDay1:_0x396d8f,notInDay2:_0x56ef02}=_0x140e62(_0x48de4b,_0x22daa4[0x1][_0x18e279(0x25f)]);_0x48de4b=[..._0x48de4b,..._0x396d8f],_0x56ef02['forEach'](_0x2b26a9=>{const _0x53d8f7=_0x18e279;let _0x160b63=_0x48de4b[_0x53d8f7(0x173)](_0x33daba=>_0x33daba[_0x53d8f7(0x233)]==_0x2b26a9[_0x53d8f7(0x233)]);_0x160b63!=-0x1&&_0x48de4b['splice'](_0x160b63,0x1);});}_0x48de4b[_0x18e279(0x17f)]((_0xcefae0,_0x3aa92d)=>_0xcefae0['coin']>_0x3aa92d[_0x18e279(0x233)]?0x1:_0x3aa92d['coin']>_0xcefae0[_0x18e279(0x233)]?-0x1:0x0);let _0x5ad7b4=[{'date':_0x2c51d2[_0x18e279(0x108)],'changes':_0x48de4b}];_0x22daa4[_0x18e279(0x19b)]>0x2&&_0x22daa4[_0x18e279(0x1f9)]((_0x4ab5f3,_0x4741fb)=>{const _0x3b9c1a=_0x18e279;if(_0x4741fb>0x0&&_0x4741fb<_0x22daa4[_0x3b9c1a(0x19b)]-0x1){const {missingDay1:_0xfed59b,notInDay2:_0x38dcae}=_0x140e62(_0x22daa4[_0x4741fb][_0x3b9c1a(0x25f)],_0x22daa4[_0x4741fb+0x1][_0x3b9c1a(0x25f)]);_0x48de4b=[],(_0xfed59b[_0x3b9c1a(0x19b)]!=0x0||_0x38dcae[_0x3b9c1a(0x19b)]!=0x0)&&(_0xfed59b[_0x3b9c1a(0x19b)]!=0x0&&_0x48de4b[_0x3b9c1a(0x29e)](..._0xfed59b),_0x38dcae[_0x3b9c1a(0x19b)]!=0x0&&(_0x38dcae[_0x3b9c1a(0x1f9)](_0x9fd3ef=>{const _0x311dd3=_0x3b9c1a;_0x9fd3ef[_0x311dd3(0x117)]=-_0x9fd3ef[_0x311dd3(0x117)];}),_0x48de4b['push'](..._0x38dcae)),_0x48de4b[_0x3b9c1a(0x17f)]((_0x4b7866,_0x1960c7)=>_0x4b7866[_0x3b9c1a(0x233)]>_0x1960c7[_0x3b9c1a(0x233)]?0x1:_0x1960c7[_0x3b9c1a(0x233)]>_0x4b7866[_0x3b9c1a(0x233)]?-0x1:0x0),_0x5ad7b4[_0x3b9c1a(0x29e)]({'date':_0x22daa4[_0x4741fb+0x1][_0x3b9c1a(0x26d)],'changes':_0x48de4b}));}}),dbConfig[_0x18e279(0x275)](_0x18e279(0x270))[_0x18e279(0x147)]({'botID':botID})['assign']({..._0x2c51d2,'liquidity':_0x5ad7b4})[_0x18e279(0xd0)]();}}if(isOlderVersion(_0x3f6661,_0x18e279(0x286))){let _0x17e020=dbConfig[_0x18e279(0x275)](_0x18e279(0x270))['find']({'botID':botID})['value']();if(_0x17e020){const _0x55fe31=_0x17e020[_0x18e279(0x149)],_0x15445b=_0x55fe31?capitalize(_0x55fe31):_0x18e279(0x28b);dbConfig[_0x18e279(0x275)](_0x18e279(0x270))['find']({'botID':botID})[_0x18e279(0x1d1)]({'exchange':_0x15445b})[_0x18e279(0xd0)]();}}if(isOlderVersion(_0x3f6661,_0x18e279(0x298))){let _0x254801=dbConfig[_0x18e279(0x275)](_0x18e279(0x270))['find']({'botID':botID})[_0x18e279(0x1a1)]();if(_0x254801){const _0xd46db=_0x254801['marketcapEnabled'],_0x49f4bf=_0xd46db?_0x18e279(0x14b):![];dbConfig[_0x18e279(0x275)](_0x18e279(0x270))[_0x18e279(0x147)]({'botID':botID})[_0x18e279(0x1d1)]({'marketcapEnabled':_0x49f4bf})['write']();}}if(isOlderVersion(_0x3f6661,'2.6.23')){let _0x47d0f4=dbConfig[_0x18e279(0x275)](_0x18e279(0x270))[_0x18e279(0x147)]({'botID':botID})[_0x18e279(0x1a1)]();if(_0x47d0f4){const _0x46d185=_0x47d0f4[_0x18e279(0xc5)],_0x587b8c=_0x46d185?'update-liquidity':![];dbConfig[_0x18e279(0x275)](_0x18e279(0x270))[_0x18e279(0x147)]({'botID':botID})[_0x18e279(0x1d1)]({'autoliquidity':_0x587b8c})[_0x18e279(0xd0)]();}}let _0x5e758c=dbPerformance[_0x18e279(0x275)](_0x18e279(0x294))[_0x18e279(0x1a1)]();isOlderVersion(_0x5e758c,_0x18e279(0x191))&&setStartDatePerformance();let _0x3bd519=dbCoinResults[_0x18e279(0x275)](_0x18e279(0x294))['value']();if(isOlderVersion(_0x3bd519,_0x18e279(0x155))){let _0x154db9=dbCoinResults['get'](_0x18e279(0x25f))[_0x18e279(0x1a1)]();if(_0x154db9[_0x18e279(0x19b)]!=0x0)pnlGenerationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x3100ce=_0x184583;dbConfig[_0x3100ce(0x20b)](_0x3100ce(0x294),serverversion)[_0x3100ce(0xd0)](),dbPerformance[_0x3100ce(0x20b)]('version',serverversion)[_0x3100ce(0xd0)](),dbLogs['set'](_0x3100ce(0x294),serverversion)[_0x3100ce(0xd0)](),dbCoinResults[_0x3100ce(0x20b)]('version',serverversion)[_0x3100ce(0xd0)]();}function getConfiguration(_0x1e1ae6){const _0x3eee42=_0x184583;let _0x562438=dbConfig[_0x3eee42(0x275)]('bot')[_0x3eee42(0x147)]({'botID':_0x1e1ae6})[_0x3eee42(0x1a1)]();if(_0x562438){let _0x328d1f=![];typeof _0x562438[_0x3eee42(0x18f)]==_0x3eee42(0x178)&&(_0x562438={..._0x562438,'threshold':Number(_0x562438[_0x3eee42(0x18f)])},_0x328d1f=!![]),_0x562438[_0x3eee42(0x127)]==undefined&&(_0x562438={..._0x562438,'change24h':-0x14},_0x328d1f=!![]),_0x562438[_0x3eee42(0x24f)]==undefined&&(_0x562438={..._0x562438,'fiat':_0x3eee42(0xe1)},_0x328d1f=!![]),_0x562438['onepagemode']==undefined&&(_0x562438={..._0x562438,'onepagemode':settings[_0x3eee42(0xdf)]},_0x328d1f=!![]),_0x562438[_0x3eee42(0x247)]==undefined&&(_0x562438={..._0x562438,'colorscheme':_0x3eee42(0x225)},_0x328d1f=!![]),_0x562438[_0x3eee42(0xc5)]==undefined&&(_0x562438={..._0x562438,'autoliquidity':_0x3eee42(0x1a7)},_0x328d1f=!![]),_0x562438[_0x3eee42(0x11f)]==undefined&&(_0x562438={..._0x562438,'marketcapApi':settings[_0x3eee42(0x11f)]?!![]:![]},_0x328d1f=!![]),_0x562438[_0x3eee42(0x13c)]==undefined&&(_0x562438={..._0x562438,'marketcapEnabled':![]},_0x328d1f=!![]),_0x562438[_0x3eee42(0x152)]==undefined&&(_0x562438={..._0x562438,'sandbox':![]},_0x328d1f=!![]),_0x328d1f&&(_0x562438={'botID':_0x562438[_0x3eee42(0x136)],'exchange':_0x562438['exchange'],'apiKey':_0x562438['apiKey'],'apiSecret':_0x562438[_0x3eee42(0x1c0)],'apiPassword':_0x562438[_0x3eee42(0x211)],'basecoin':_0x562438[_0x3eee42(0x1e5)],'botname':_0x562438['botname'],'showname':_0x562438[_0x3eee42(0x1dd)],'threshold':_0x562438[_0x3eee42(0x18f)],'ordertype':_0x562438['ordertype'],'timeout':_0x562438['timeout'],'fiat':_0x562438['fiat'],'startdate':_0x562438[_0x3eee42(0x108)],'recreate':_0x562438[_0x3eee42(0x1bd)],'timeshift':_0x562438[_0x3eee42(0x232)],'onepagemode':_0x562438[_0x3eee42(0xdf)],'headless':_0x562438[_0x3eee42(0x103)],'cooldown':_0x562438[_0x3eee42(0x1af)],'change24h':_0x562438[_0x3eee42(0x127)],'emojibuy':_0x562438['emojibuy'],'emojisell':_0x562438[_0x3eee42(0xce)],'colorscheme':_0x562438['colorscheme'],'marketcapApi':_0x562438[_0x3eee42(0x11f)],'marketcapEnabled':_0x562438[_0x3eee42(0x13c)],'sandbox':_0x562438[_0x3eee42(0x152)],'portfolio':_0x562438['portfolio'],'autoliquidity':_0x562438[_0x3eee42(0xc5)],'liquidity':_0x562438['liquidity'],'openOrders':_0x562438[_0x3eee42(0x1d5)]},dbConfig['get'](_0x3eee42(0x270))[_0x3eee42(0x18d)]()[_0x3eee42(0xd0)](),dbConfig[_0x3eee42(0x275)](_0x3eee42(0x270))[_0x3eee42(0x29e)](_0x562438)[_0x3eee42(0xd0)]());}else _0x562438={'botID':_0x1e1ae6,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':'Bot\x20'+_0x1e1ae6,'showname':![],'threshold':0x3,'ordertype':_0x3eee42(0x1c2),'timeout':0x14,'fiat':_0x3eee42(0xe1),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x3eee42(0x232)],'onepagemode':settings[_0x3eee42(0xdf)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':'red_yellow_blue','marketcapApi':settings[_0x3eee42(0x11f)]?!![]:![],'marketcapEnabled':![],'sandbox':![],'portfolio':[],'autoliquidity':'update-liquidity','liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x562438;}function emittedConfiguration(){const _0x2f1c2f=_0x184583;let _0x56b99b;if(config[_0x2f1c2f(0x27b)]=='')_0x56b99b={...config,'configstate':_0x2f1c2f(0x21d)};else config[_0x2f1c2f(0x27b)]==_0x2f1c2f(0xe8)?_0x56b99b={...config,'configstate':_0x2f1c2f(0x258)}:(_0x56b99b={...config,'apiKey':_0x2f1c2f(0x206),'apiSecret':_0x2f1c2f(0x206)},config[_0x2f1c2f(0x211)]&&(_0x56b99b['apiPassword']=_0x2f1c2f(0x206)));return _0x56b99b[_0x2f1c2f(0x115)]=enableFiatToggle,_0x56b99b;}function getSettings(){const _0x5ee89f=_0x184583;return dbSettings[_0x5ee89f(0x275)](_0x5ee89f(0xd7))[_0x5ee89f(0x1a1)]();}function getSecure(){const _0x2b707f=_0x184583;return dbSecure[_0x2b707f(0x275)](_0x2b707f(0x1b9))['value']()||{};}function updateTimeshift(_0x510b49){const _0x734de7=_0x184583;let _0x304397=dbConfig[_0x734de7(0x275)]('bot')[_0x734de7(0x147)]({'botID':botID})[_0x734de7(0x1a1)]();_0x304397&&dbConfig[_0x734de7(0x275)]('bot')[_0x734de7(0x147)]({'botID':botID})[_0x734de7(0x1d1)]({'timeshift':_0x510b49})[_0x734de7(0xd0)](),config[_0x734de7(0x232)]=_0x510b49,proxyEmit(_0x734de7(0xeb),emittedConfiguration());}function updateOnepagemode(_0x3b1528){const _0x4e7d21=_0x184583;let _0x435806=dbConfig[_0x4e7d21(0x275)](_0x4e7d21(0x270))[_0x4e7d21(0x147)]({'botID':botID})['value']();_0x435806&&dbConfig[_0x4e7d21(0x275)]('bot')[_0x4e7d21(0x147)]({'botID':botID})[_0x4e7d21(0x1d1)]({'onepagemode':_0x3b1528})['write'](),config[_0x4e7d21(0xdf)]=_0x3b1528,proxyEmit(_0x4e7d21(0xeb),emittedConfiguration());}function updateMarketcapApi(_0x39d5bd){const _0x537c9a=_0x184583,_0x460d15=_0x39d5bd?!![]:![];let _0x2de931=dbConfig[_0x537c9a(0x275)](_0x537c9a(0x270))[_0x537c9a(0x147)]({'botID':botID})['value']();_0x2de931&&dbConfig['get'](_0x537c9a(0x270))[_0x537c9a(0x147)]({'botID':botID})[_0x537c9a(0x1d1)]({'marketcapApi':_0x460d15})[_0x537c9a(0xd0)](),config[_0x537c9a(0x11f)]=_0x460d15,getMarketCap(),proxyEmit('configuration',emittedConfiguration());}async function storeConfiguration(_0x46451c){const _0xcc1e6e=_0x184583;logger['debug']('Saving\x20configuration');_0x46451c['configstate']&&delete _0x46451c[_0xcc1e6e(0x272)];if(pidBalances)clearTimeout(pidBalances);setBlockTransactionDetection(!![]);let _0x51ab20=![],_0x5a40ba=![],_0x595897=[];_0x46451c[_0xcc1e6e(0x146)][_0xcc1e6e(0x1f9)](_0x2284d2=>{const _0x1db198=_0xcc1e6e;if(!_0x2284d2[_0x1db198(0x1d4)]&&_0x2284d2[_0x1db198(0x233)]!=_0x46451c[_0x1db198(0x1e5)])_0x595897[_0x1db198(0x29e)](_0x2284d2[_0x1db198(0x210)]);}),_0x595897[_0xcc1e6e(0x1f9)](_0x208dfa=>{const _0x3da6fd=_0xcc1e6e,_0x32721f=currentCoins[_0x3da6fd(0x147)](_0x2862df=>_0x2862df['symbol']==_0x208dfa);!_0x32721f&&(_0x51ab20=!![]);}),currentCoins['forEach'](_0x20cedc=>{const _0xf8f14=_0xcc1e6e;if(_0x20cedc[_0xf8f14(0x233)]!=config[_0xf8f14(0x1e5)]){const _0x202fe5=_0x595897['find'](_0x227f73=>_0x227f73==_0x20cedc[_0xf8f14(0x210)]);!_0x202fe5&&(_0x51ab20=!![]);}}),_0x46451c['portfolio'][_0xcc1e6e(0x1f9)](_0x16b0cc=>{const _0xe27f6c=_0xcc1e6e,_0x46f83e=config[_0xe27f6c(0x146)]['find'](_0x5972f7=>_0x5972f7[_0xe27f6c(0x233)]==_0x16b0cc[_0xe27f6c(0x233)]);if(_0x46f83e&&_0x16b0cc[_0xe27f6c(0xcf)]!=_0x46f83e[_0xe27f6c(0xcf)])_0x5a40ba=!![];});let _0x2b36de=dbConfig['get'](_0xcc1e6e(0x270))[_0xcc1e6e(0x147)]({'botID':botID})[_0xcc1e6e(0x1a1)]();_0x46451c={..._0x46451c,'apiKey':decryptRSA(secure[_0xcc1e6e(0x271)],_0x46451c['apiKey']),'apiSecret':decryptRSA(secure['privateKey'],_0x46451c[_0xcc1e6e(0x1c0)])};_0x46451c[_0xcc1e6e(0x211)]&&(_0x46451c[_0xcc1e6e(0x211)]=decryptRSA(secure['privateKey'],_0x46451c['apiPassword']));let _0x266fa4=![];if(_0x2b36de){_0x46451c[_0xcc1e6e(0x27b)]==_0xcc1e6e(0x206)?_0x46451c[_0xcc1e6e(0x27b)]=config[_0xcc1e6e(0x27b)]:_0x266fa4=!![];_0x46451c[_0xcc1e6e(0x1c0)]==_0xcc1e6e(0x206)?_0x46451c[_0xcc1e6e(0x1c0)]=config['apiSecret']:_0x266fa4=!![];if(_0x46451c[_0xcc1e6e(0x211)]==_0xcc1e6e(0x206))_0x46451c[_0xcc1e6e(0x211)]=config[_0xcc1e6e(0x211)];else{if(_0x46451c[_0xcc1e6e(0x211)])_0x266fa4=!![];}dbConfig[_0xcc1e6e(0x275)]('bot')['find']({'botID':botID})[_0xcc1e6e(0x1d1)](_0x46451c)[_0xcc1e6e(0xd0)]();}else dbConfig['get'](_0xcc1e6e(0x270))[_0xcc1e6e(0x29e)](_0x46451c)[_0xcc1e6e(0xd0)](),_0x266fa4=!![],process[_0xcc1e6e(0x24c)]({'status':_0xcc1e6e(0x1ea),'live':'running'},_0xcacd53=>{});process[_0xcc1e6e(0x24c)]({'botname':_0x46451c['botname']},_0x10f458=>{}),config={..._0x46451c},updateBotManager(),proxyEmit('configuration-stored'),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x266fa4)await reset(!![]);else _0x51ab20||_0x5a40ba?await reset(![]):getBalances();setBlockTransactionDetection(![]);}async function storeHeadless(_0x14def7){const _0x302f93=_0x184583,_0x5cf1f1={...config,'headless':_0x14def7[_0x302f93(0x103)]};let _0x6fd43c=dbConfig['get'](_0x302f93(0x270))[_0x302f93(0x147)]({'botID':botID})['value']();_0x6fd43c&&dbConfig[_0x302f93(0x275)](_0x302f93(0x270))[_0x302f93(0x147)]({'botID':botID})['assign'](_0x5cf1f1)[_0x302f93(0xd0)](),config={..._0x5cf1f1},updateBotManager(),proxyEmit(_0x302f93(0xeb),emittedConfiguration());}async function storeFiat(_0x18c4f7){const _0x15b290=_0x184583,_0x4414b9={...config,'fiat':_0x18c4f7};let _0x3ca21a=dbConfig[_0x15b290(0x275)]('bot')['find']({'botID':botID})[_0x15b290(0x1a1)]();_0x3ca21a&&dbConfig[_0x15b290(0x275)](_0x15b290(0x270))[_0x15b290(0x147)]({'botID':botID})[_0x15b290(0x1d1)](_0x4414b9)[_0x15b290(0xd0)](),config={..._0x4414b9},proxyEmit(_0x15b290(0xeb),emittedConfiguration());}function resetHistory(){const _0x11ca7c=_0x184583;logger[_0x11ca7c(0x143)](_0x11ca7c(0x222));try{if(fs['existsSync'](path['join'](configpath,_0x11ca7c(0x215)+botID+'-events.json')))fs['unlinkSync'](path['join'](configpath,_0x11ca7c(0x215)+botID+_0x11ca7c(0xef)));if(fs[_0x11ca7c(0xfd)](path['join'](configpath,_0x11ca7c(0x215)+botID+_0x11ca7c(0x1ed))))fs['unlinkSync'](path[_0x11ca7c(0x249)](configpath,'bot-'+botID+_0x11ca7c(0x1ed)));if(fs[_0x11ca7c(0xfd)](path[_0x11ca7c(0x249)](configpath,_0x11ca7c(0x215)+botID+'-results.json')))fs[_0x11ca7c(0x1f1)](path[_0x11ca7c(0x249)](configpath,'bot-'+botID+_0x11ca7c(0x121)));}catch(_0x2438ca){if(_0x2438ca)logger[_0x11ca7c(0x143)](_0x11ca7c(0x187),_0x2438ca);}const _0xeee1e8=getDate();let _0x38e42f=[];currentCoins[_0x11ca7c(0x1f9)](_0x57c9d1=>{const _0x3d1676=_0x11ca7c;_0x38e42f['push']({'coin':_0x57c9d1['coin'],'number':_0x57c9d1[_0x3d1676(0x117)],'price':_0x57c9d1['last']});});let _0x2ed054=dbConfig[_0x11ca7c(0x275)](_0x11ca7c(0x270))[_0x11ca7c(0x147)]({'botID':botID})[_0x11ca7c(0x1a1)]();_0x2ed054&&(dbConfig[_0x11ca7c(0x275)](_0x11ca7c(0x270))[_0x11ca7c(0x147)]({'botID':botID})[_0x11ca7c(0x1d1)]({'liquidity':[{'date':_0xeee1e8,'changes':_0x38e42f}]})[_0x11ca7c(0xd0)](),config[_0x11ca7c(0x166)]=[]),restartBot(!![]);}function noslash(_0x5a3576){const _0x27ec48=_0x184583;return _0x5a3576[_0x27ec48(0x207)]('/','');}function updateHighestFee(_0x2a4ecf){const _0x27a8ed=_0x184583;if(_0x2a4ecf[_0x27a8ed(0x154)]){let _0x13585b={'filled':_0x2a4ecf['filled']*_0x2a4ecf[_0x27a8ed(0x1f2)],'amount':_0x2a4ecf[_0x27a8ed(0x20f)]*_0x2a4ecf[_0x27a8ed(0x1f2)],'side':_0x2a4ecf[_0x27a8ed(0xcd)]==_0x27a8ed(0x29b)?_0x27a8ed(0x20c):'sell','price':0x1/_0x2a4ecf[_0x27a8ed(0x1f2)]};_0x2a4ecf={..._0x2a4ecf,..._0x13585b};}const _0x22d92b=defaultFee*_0x2a4ecf[_0x27a8ed(0x20f)]*_0x2a4ecf[_0x27a8ed(0x1f2)];lastFees[_0x27a8ed(0x197)]['length']===0x14&&lastFees['recent20'][_0x27a8ed(0x1eb)](),lastFees[_0x27a8ed(0x197)][_0x27a8ed(0x29e)](_0x22d92b),lastFees[_0x27a8ed(0xbb)]=Math['max'](...lastFees[_0x27a8ed(0x197)]);}async function updateNumberCoinsCcxt(_0x221613){const _0x10ad8a=_0x184583;logger[_0x10ad8a(0x138)](_0x10ad8a(0x181)+_0x221613[_0x10ad8a(0x210)]+_0x10ad8a(0x194)+_0x221613[_0x10ad8a(0x161)]+_0x10ad8a(0x194)+_0x221613[_0x10ad8a(0x20f)]+_0x10ad8a(0x156)+_0x221613[_0x10ad8a(0xbc)]+'\x20|\x20'+_0x221613['id']);let _0x289d7c=_0x221613[_0x10ad8a(0x161)],_0x19a7d3=![];currentCoins[_0x10ad8a(0x1f9)](_0x5b9a7b=>{const _0x11ca0f=_0x10ad8a;_0x5b9a7b[_0x11ca0f(0x210)]==_0x221613[_0x11ca0f(0x210)]&&(_0x19a7d3=!![]);});if(!_0x19a7d3)return;const _0x277f30=currentCoins[_0x10ad8a(0x147)](_0x1b39d3=>_0x1b39d3['symbol']==_0x221613['symbol']),_0x420296=_0x277f30[_0x10ad8a(0x233)],_0x1724d4=_0xebe6cc=>{const _0x9c052c=_0x10ad8a,_0x88049=currentCoins[_0x9c052c(0x147)](_0x2f1bac=>_0x2f1bac['symbol']==_0x221613[_0x9c052c(0x210)]);if(_0x88049)_0x88049['orderstatus']=_0xebe6cc;};let _0x535132=![];for(const _0x399812 of lastOrders){const _0x47557a=0x64,_0x2fc84c=0x1388;let _0x4b5387=0x0;while(!_0x399812[_0x10ad8a(0xf4)]&&_0x4b5387*_0x47557a<_0x2fc84c){_0x4b5387++,await sleep(_0x47557a);}if(_0x4b5387>0x0)logger[_0x10ad8a(0x138)](_0x10ad8a(0x116)+_0x4b5387*_0x47557a/0x3e8+_0x10ad8a(0x110));_0x399812[_0x10ad8a(0xf4)]==_0x221613['id']&&(_0x535132=!![]);}if(_0x289d7c==_0x10ad8a(0x299)){_0x1724d4('open');if(_0x221613[_0x10ad8a(0x20f)]>0x0&&_0x221613['filled']<_0x221613[_0x10ad8a(0xbc)]){if(_0x535132){setBlockTransactionDetection(!![]),logger[_0x10ad8a(0x138)](_0x10ad8a(0x279)+_0x221613[_0x10ad8a(0x20f)]+_0x10ad8a(0xf5)+_0x221613['id']);const _0x5cadba=await getCoins(balanceUpdateDelay,undefined,undefined,_0x420296);[currentCoins,currentCoinsAll]=_0x5cadba,setBlockTransactionDetection(![]);}else logger[_0x10ad8a(0x138)](_0x10ad8a(0x279)+_0x221613['filled']+_0x10ad8a(0x140)+_0x221613['id']),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay);}}else{if(_0x289d7c==_0x10ad8a(0x227)){_0x1724d4(_0x10ad8a(0x227)),lastOrders=lastOrders[_0x10ad8a(0x137)](_0x39a750=>_0x39a750['symbol']!=_0x221613[_0x10ad8a(0x210)]);const _0x39efdd=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x39efdd,setBlockTransactionDetection(![]),await getOpenOrders(),handleOpenOrders();}else{if(_0x289d7c=='closed'){if(lastOrders)for(const _0x5c4ad6 of lastOrders){if(_0x5c4ad6[_0x10ad8a(0xf4)]==_0x221613['id']){logger['debug'](_0x10ad8a(0xfc)+_0x221613['id']),_0x535132=!![];if(_0x5c4ad6[_0x10ad8a(0x20f)]==0x0){setBlockTransactionDetection(!![]),logger[_0x10ad8a(0x138)](_0x10ad8a(0x1c7)+_0x221613['id']);if(_0x221613[_0x10ad8a(0x135)])_0x5c4ad6[_0x10ad8a(0x1f2)]=_0x221613[_0x10ad8a(0x135)];else{if(_0x221613[_0x10ad8a(0x1f2)])_0x5c4ad6[_0x10ad8a(0x1f2)]=_0x221613[_0x10ad8a(0x1f2)];else{}}_0x5c4ad6[_0x10ad8a(0x20f)]=_0x221613[_0x10ad8a(0x20f)],updateHighestFee(_0x5c4ad6);const _0x3fa763=await getCoins(balanceUpdateDelay,undefined,undefined,_0x420296);[currentCoins,currentCoinsAll]=_0x3fa763,setBlockTransactionDetection(![]),await validateOrders(),_0x1724d4(_0x10ad8a(0x20f)),_0x5c4ad6[_0x10ad8a(0x1f6)]={'currency':_0x221613[_0x10ad8a(0x1f6)]?_0x221613['fee'][_0x10ad8a(0xc0)]:null,'cost':_0x221613[_0x10ad8a(0x1f6)]?_0x221613[_0x10ad8a(0x1f6)][_0x10ad8a(0xc1)]:0x0},await updatePnL(_0x5c4ad6);}}}!_0x535132&&(logger['debug'](_0x10ad8a(0x26b)+_0x221613['id']),_0x1724d4(_0x10ad8a(0x20f)),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay),await updateOpenOrders(),handleOpenOrders());}}}if(lastBalances){let _0x2a6dba=JSON[_0x10ad8a(0x168)](lastBalances[_0x10ad8a(0x146)]);const _0x535dde=_0x2a6dba['find'](_0x47a43f=>_0x47a43f['symbol']==_0x221613[_0x10ad8a(0x210)]);if(_0x535dde){if(_0x289d7c==_0x10ad8a(0x299))_0x535dde['orderstatus']=_0x535dde['orderstatus']==_0x10ad8a(0x20f)?'filled':_0x10ad8a(0x299);else{if(_0x289d7c==_0x10ad8a(0x227))_0x535dde[_0x10ad8a(0x180)]=_0x535dde['orderstatus']==_0x10ad8a(0x20f)?_0x10ad8a(0x20f):_0x10ad8a(0x227);else _0x289d7c==_0x10ad8a(0x1b0)&&(_0x535dde['orderstatus']=_0x10ad8a(0x20f));}}lastBalances={...lastBalances,'portfolio':JSON[_0x10ad8a(0x25c)](_0x2a6dba)},proxyEmit(_0x10ad8a(0x11d),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x58f336=_0x184583;await getOpenOrders();let _0x1b7011=![];currentCoins[_0x58f336(0x1f9)](_0x27cdec=>{const _0x456137=_0x58f336;_0x1b7011=allOpenOrders[_0x456137(0x147)](_0x40871b=>_0x40871b[_0x456137(0x210)]==_0x27cdec['symbol']),_0x27cdec[_0x456137(0x180)]=_0x1b7011?'open':_0x456137(0xd2);});}async function fetchBalance(_0x284dbb=!![]){const _0x103aa4=_0x184583;let _0x4b1794,_0x7b7ff2,_0x258d25,_0x48ca89=0x0;while(!_0x7b7ff2&&_0x48ca89<maxRetries){try{return _0x4b1794=await exchange[_0x103aa4(0xf9)](),_0x7b7ff2=_0x4b1794[_0x103aa4(0x27d)],_0x7b7ff2;}catch(_0x55ec43){_0x258d25=_0x55ec43,_0x48ca89++,await sleep(retryInterval);}}return!_0x284dbb?handleErrorNoStop(_0x258d25,_0x103aa4(0xc4)):await handleError(_0x258d25,_0x103aa4(0xc4)),![];}async function getCoins(_0x19c0f2=0x0,_0xe1d2b=!![],_0x497583=config[_0x184583(0x1e5)],_0x4695eb){const _0x4a9136=_0x184583;let _0xb54716=[],_0x2b8490=[],_0x216360=[],_0x4aaf3b;if(_0x19c0f2)await sleep(_0x19c0f2);if(botPaused)return[currentCoins,currentCoinsAll];let _0x5ac2a6=![],_0x2204ee=0x0,_0x558490,_0x1dad18;_0x4695eb&&(_0x558490=currentCoins['find'](_0x11a937=>_0x11a937[_0x4a9136(0x233)]==_0x4695eb),_0x558490&&(_0x1dad18=_0x558490['prevnumber'],delete _0x558490[_0x4a9136(0x1a6)]));while(!_0x5ac2a6){_0x4aaf3b=await fetchBalance(_0xe1d2b);if(_0x4aaf3b){if(_0x4695eb){if(_0x4aaf3b[_0x4695eb]!=_0x1dad18)logger[_0x4a9136(0x138)]('Valid\x20balance\x20for\x20'+_0x4695eb+':\x20'+_0x4aaf3b[_0x4695eb]+'\x20('+_0x1dad18+')'),_0x5ac2a6=!![];else{logger[_0x4a9136(0x138)](_0x4a9136(0x28e)+_0x4695eb+':\x20'+_0x4aaf3b[_0x4695eb]+'\x20('+_0x1dad18+')'),_0x2204ee++;if(_0x2204ee<balanceUpdateRetries)await sleep(balanceUpdateDelay);else{logger[_0x4a9136(0x138)](_0x4a9136(0x284)+_0x2204ee+'\x20attempts');break;}}}else break;}else return[currentCoins,currentCoinsAll];}for(const [_0xee2a73,_0x6990b5]of Object[_0x4a9136(0x1da)](_0x4aaf3b)){_0x216360['push'](_0xee2a73);}config[_0x4a9136(0x146)][_0x4a9136(0x1f9)](_0x36d0b0=>{const _0x1bad66=_0x4a9136;!_0x216360[_0x1bad66(0x122)](_0x36d0b0['coin'])&&(_0x4aaf3b[_0x36d0b0[_0x1bad66(0x233)]]=0x0);});if(_0x497583=='')for(const [_0x3d64c9,_0x284c82]of Object[_0x4a9136(0x1da)](_0x4aaf3b)){_0x284c82!=0x0&&_0xb54716[_0x4a9136(0x29e)]({'coin':_0x3d64c9});}else for(const [_0x56989a,_0x43316f]of Object[_0x4a9136(0x1da)](_0x4aaf3b)){const _0x5e3811=config[_0x4a9136(0x146)][_0x4a9136(0x147)](_0xc8557d=>_0xc8557d[_0x4a9136(0x233)]==_0x56989a),_0x58c540=_0x56989a+'/'+_0x497583,_0x415bff=_0x497583+'/'+_0x56989a,_0x4b0245=currentCoins['find'](_0x23827e=>_0x23827e[_0x4a9136(0x233)]==_0x56989a);if((_0x43316f!=0x0||_0x5e3811)&&(allSymbols[_0x4a9136(0x122)](_0x58c540)||_0x56989a==_0x497583))_0x4b0245?_0xb54716[_0x4a9136(0x29e)]({..._0x4b0245,'number':Math[_0x4a9136(0x27c)](_0x43316f+(_0x5e3811&&_0x5e3811['offset']||0x0),0x0)}):_0xb54716[_0x4a9136(0x29e)]({'coin':_0x56989a,'symbol':_0x58c540,'reverse':![],'number':Math[_0x4a9136(0x27c)](_0x43316f+(_0x5e3811&&_0x5e3811['offset']||0x0),0x0),'orderstatus':'none'});else{if((_0x43316f!=0x0||_0x5e3811)&&allSymbols[_0x4a9136(0x122)](_0x415bff))_0x4b0245?_0xb54716['push']({..._0x4b0245,'number':Math[_0x4a9136(0x27c)](_0x43316f+(_0x5e3811&&_0x5e3811['offset']||0x0),0x0)}):_0xb54716['push']({'coin':_0x56989a,'symbol':_0x415bff,'reverse':!![],'number':Math[_0x4a9136(0x27c)](_0x43316f+(_0x5e3811&&_0x5e3811[_0x4a9136(0xcf)]||0x0),0x0),'orderstatus':'none'});else _0x5e3811&&_0xb54716[_0x4a9136(0x29e)]({'coin':_0x5e3811[_0x4a9136(0x233)],'symbol':_0x5e3811[_0x4a9136(0x210)],'reverse':_0x5e3811[_0x4a9136(0x154)],'number':0x0,'orderstatus':_0x4a9136(0xd2)});}}return _0xb54716[_0x4a9136(0x17f)]((_0xaea4de,_0x10e9b0)=>_0xaea4de[_0x4a9136(0x1ad)]<_0x10e9b0[_0x4a9136(0x1ad)]?0x1:_0x10e9b0[_0x4a9136(0x1ad)]<_0xaea4de['delta']?-0x1:0x0),_0x2b8490=cloneDeep(_0xb54716),_0xb54716=_0xb54716[_0x4a9136(0x137)](_0x4fdab7=>{const _0x5c4cc1=_0x4a9136,_0x5a87ef=config[_0x5c4cc1(0x146)][_0x5c4cc1(0x147)](_0x4adcd6=>_0x4adcd6['coin']==_0x4fdab7['coin']);return _0x5a87ef&&!_0x5a87ef[_0x5c4cc1(0x1d4)];}),[_0xb54716,_0x2b8490];}async function getOpenOrders(){const _0x33b090=_0x184583;let _0x330359;allOpenOrders=[];try{for(const _0x2ea303 of config['portfolio']){!_0x2ea303[_0x33b090(0x1d4)]&&_0x2ea303['coin']!=config['basecoin']&&(_0x330359=await exchange[_0x33b090(0xfb)](_0x2ea303[_0x33b090(0x210)]),_0x330359[_0x33b090(0x19b)]>0x0&&allOpenOrders[_0x33b090(0x29e)](_0x330359[0x0]));}}catch(_0x42143b){await handleError(_0x42143b,_0x33b090(0xe3));}}async function handleOpenOrders(_0x37fef0=0x0){const _0x4d75e8=_0x184583;allOpenOrders['length']==0x0&&lockOrders==ORDERS['LOCKED']&&allOrdersPlaced&&(_0x37fef0==0x0?(logger['debug']('1\x20-\x20Handle\x20open\x20orders'),_0x37fef0++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger['debug'](_0x4d75e8(0x15b)),validateOrders(_0x4d75e8(0x19f))));}async function testAPI(){const _0x35fd35=_0x184583;try{return await exchange['fetchBalance'](),!![];}catch(_0x1c9be7){loading[_0x35fd35(0x224)]=!![],_0x1c9be7[_0x35fd35(0xde)]()[_0x35fd35(0x1f5)]()['includes'](_0x35fd35(0x170))||_0x1c9be7[_0x35fd35(0xde)]()[_0x35fd35(0x1f5)]()[_0x35fd35(0x122)]('request-time')?(logHistory(_0x35fd35(0x27e),_0x35fd35(0x22a)),loading[_0x35fd35(0x27e)]='timestamp-issue'):handleErrorNoStop(_0x1c9be7,_0x35fd35(0x1d6),!![]),logHistory('error','Failed\x20to\x20connect\x20to\x20the\x20exchange\x20-\x20bot\x20not\x20started'),logHistory('error',_0x35fd35(0x17d)+loadCoinsRetryInterval/0xea60+_0x35fd35(0x28c)),logger[_0x35fd35(0x138)](_0x35fd35(0xe2),_0x1c9be7),emitLoadingProgress(),botPaused=!![],await sleep(loadCoinsRetryInterval),restartBot();}}async function testNewAPI(_0x50bfeb){const _0x929690=_0x184583;logger[_0x929690(0x138)]('Test\x20new\x20API');const _0x5a526e=ccxt[_0x929690(0x273)][_0x50bfeb[_0x929690(0x149)]['toLowerCase']()],_0x5bbea3=new _0x5a526e({'apiKey':_0x50bfeb[_0x929690(0x27b)],'secret':_0x50bfeb['apiSecret'],'options':{'defaultType':'spot'}});if(_0x50bfeb['apiPassword'])_0x5bbea3['password']=_0x50bfeb[_0x929690(0x211)];if(_0x5bbea3[_0x929690(0x133)][_0x929690(0x152)])_0x5bbea3[_0x929690(0x16b)](_0x50bfeb[_0x929690(0x152)]);if(_0x50bfeb[_0x929690(0x149)][_0x929690(0x1f5)]()==_0x929690(0x23a))exchange[_0x929690(0x1a5)]['operatorId']=operatorId;try{await _0x5bbea3[_0x929690(0xf9)](),botPaused=![];}catch(_0x4c178f){logger['debug']('Error\x20in\x20testNewAPI():\x20'+_0x4c178f[_0x929690(0xde)]());throw _0x4c178f;}}function cloneDeep(_0x31f988){const _0x4d250f=_0x184583;return JSON['parse'](JSON[_0x4d250f(0x25c)](_0x31f988));}async function getPortfolio(_0x2765a){const _0x1cb603=_0x184583;let _0x546ea0=[],_0x1d5946=[],_0x4e0d54=[],_0x3ceb83;_0x2765a[_0x1cb603(0x27b)]=decryptRSA(secure[_0x1cb603(0x271)],_0x2765a['apiKey']),_0x2765a[_0x1cb603(0x1c0)]=decryptRSA(secure[_0x1cb603(0x271)],_0x2765a[_0x1cb603(0x1c0)]);if(_0x2765a[_0x1cb603(0x211)])_0x2765a[_0x1cb603(0x211)]=decryptRSA(secure[_0x1cb603(0x271)],_0x2765a[_0x1cb603(0x211)]);if(_0x2765a[_0x1cb603(0x27b)]!==_0x1cb603(0x206)||_0x2765a['apiSecret']!==_0x1cb603(0x206)||_0x2765a[_0x1cb603(0x211)]&&_0x2765a[_0x1cb603(0x211)]!==_0x1cb603(0x206)){if(config[_0x1cb603(0x149)]){if(_0x2765a['apiKey']==_0x1cb603(0x206))_0x2765a[_0x1cb603(0x27b)]=config[_0x1cb603(0x27b)];if(_0x2765a[_0x1cb603(0x1c0)]==_0x1cb603(0x206))_0x2765a[_0x1cb603(0x1c0)]=config[_0x1cb603(0x1c0)];if(_0x2765a[_0x1cb603(0x211)]=='************')_0x2765a[_0x1cb603(0x211)]=config[_0x1cb603(0x211)];}try{if(_0x2765a['testApi'])await testNewAPI(_0x2765a);}catch(_0x3fa038){if(_0x3fa038[_0x1cb603(0xde)]()[_0x1cb603(0x122)](_0x1cb603(0x1bb))){logHistory(_0x1cb603(0x27e),'Invalid\x20API\x20details,\x20please\x20try\x20again\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange'),logHistory(_0x1cb603(0x27e),_0x1cb603(0x27a)+_0x3fa038[_0x1cb603(0xde)]()),proxyEmit('portfolio1',![]);return;}else{if(_0x3fa038[_0x1cb603(0xde)]()['includes']('PermissionDenied')){logHistory(_0x1cb603(0x27e),_0x1cb603(0x10b)),logHistory(_0x1cb603(0x27e),'Error\x20details:\x20'+_0x3fa038[_0x1cb603(0xde)]()),proxyEmit(_0x1cb603(0x1fb),![]);return;}else{logHistory(_0x1cb603(0x27e),_0x1cb603(0x209)+_0x3fa038[_0x1cb603(0xde)]()),logger[_0x1cb603(0x138)](_0x1cb603(0xe2),_0x3fa038),proxyEmit('portfolio1',![]);return;}}}exchange?updateExchange(_0x2765a[_0x1cb603(0x27b)],_0x2765a['apiSecret'],_0x2765a['apiPassword']):await initExchange(_0x2765a[_0x1cb603(0x149)],_0x2765a[_0x1cb603(0x27b)],_0x2765a[_0x1cb603(0x1c0)],_0x2765a[_0x1cb603(0x211)],_0x2765a[_0x1cb603(0x152)]);await loadSymbols();const _0x15796d=await getCoins(0x0,![],_0x2765a[_0x1cb603(0x1e5)]);_0x4e0d54=cloneDeep(_0x15796d[0x1]);}else{const _0x286591=await getCoins();_0x4e0d54=cloneDeep(_0x286591[0x1]);}if(_0x2765a[_0x1cb603(0x1e5)]=='')proxyEmit(_0x1cb603(0x1fb),!![]),proxyEmit(_0x1cb603(0x1c3),_0x4e0d54);else{_0x4e0d54[_0x1cb603(0x1f9)](_0x1346c5=>{const _0x125bd2=_0x1cb603;if(_0x1346c5[_0x125bd2(0x233)]!=_0x2765a[_0x125bd2(0x1e5)]&&allSymbols[_0x125bd2(0x122)](_0x1346c5[_0x125bd2(0x210)]))_0x546ea0[_0x125bd2(0x29e)](_0x1346c5[_0x125bd2(0x210)]);});if(_0x546ea0['length']==0x0)logHistory(_0x1cb603(0x27e),_0x1cb603(0x196));else{try{_0x1d5946=await getTickers(_0x546ea0);}catch(_0x38558f){logHistory('error','Unknown\x20error\x20-\x20check\x20logs'),logger[_0x1cb603(0x138)](_0x1cb603(0xe2),_0x38558f),proxyEmit(_0x1cb603(0x1fb),![]);return;}_0x4e0d54[_0x1cb603(0x1f9)](_0x3a5ce3=>{const _0x1c399e=_0x1cb603;_0x3a5ce3[_0x1c399e(0x233)]!=_0x2765a[_0x1c399e(0x1e5)]?_0x1d5946[_0x3a5ce3[_0x1c399e(0x210)]]?_0x1d5946[_0x3a5ce3[_0x1c399e(0x210)]][_0x1c399e(0x18b)]?_0x3ceb83=_0x3a5ce3['reverse']?0x1/_0x1d5946[_0x3a5ce3[_0x1c399e(0x210)]][_0x1c399e(0x18b)]:_0x1d5946[_0x3a5ce3[_0x1c399e(0x210)]][_0x1c399e(0x18b)]:_0x3ceb83=0x0:_0x3ceb83=0x0:_0x3ceb83=0x1,_0x3a5ce3[_0x1c399e(0x1f2)]=formatResult(_0x3ceb83,0x8);}),await getMarketCap(_0x4e0d54),proxyEmit(_0x1cb603(0x1fb),!![]),proxyEmit(_0x1cb603(0x1c3),_0x4e0d54);}}}function _0x48ee(_0x2db8a4,_0x1e7446){const _0x4683a7=_0x2604();return _0x48ee=function(_0x39d327,_0x4c982a){_0x39d327=_0x39d327-0xbb;let _0x260458=_0x4683a7[_0x39d327];return _0x260458;},_0x48ee(_0x2db8a4,_0x1e7446);}function truncateTradeAmount(_0x4330d7,_0x478494){const _0x17b399=_0x184583;let _0x492d95=0x0;try{_0x492d95=exchange[_0x17b399(0x126)](_0x4330d7,_0x478494);}catch(_0x1cfe35){}return _0x492d95;}function checkMinimums(_0x41086f){const _0x38ea0d=_0x184583;let _0x357ef5=!![];const _0x588783=!_0x41086f[_0x38ea0d(0x154)]?markets[_0x41086f['symbol']][_0x38ea0d(0x1aa)][_0x38ea0d(0xbc)]['min']:markets[_0x41086f['symbol']][_0x38ea0d(0x1aa)][_0x38ea0d(0xc1)][_0x38ea0d(0x148)],_0x41207d=!_0x41086f[_0x38ea0d(0x154)]?markets[_0x41086f[_0x38ea0d(0x210)]]['limits'][_0x38ea0d(0xc1)][_0x38ea0d(0x148)]:markets[_0x41086f['symbol']]['limits']['amount'][_0x38ea0d(0x148)],_0x1ed3a5=truncateTradeAmount(_0x41086f['symbol'],_0x41086f['trade']);_0x41086f[_0x38ea0d(0x1fd)]=_0x1ed3a5;if(Math[_0x38ea0d(0xdd)](_0x1ed3a5)<_0x588783)_0x357ef5=![];if(Math[_0x38ea0d(0xdd)](_0x1ed3a5)*_0x41086f['last']<_0x41207d)_0x357ef5=![];let _0x48e189='';if(_0x41086f[_0x38ea0d(0xcd)]==_0x38ea0d(0x29b)){let _0x32208a=config['portfolio'][_0x38ea0d(0x147)](_0x4087c4=>_0x4087c4[_0x38ea0d(0x233)]==_0x41086f[_0x38ea0d(0x233)]);_0x32208a[_0x38ea0d(0xcf)]>0x0?Math['abs'](_0x1ed3a5)>_0x41086f[_0x38ea0d(0x117)]-_0x32208a[_0x38ea0d(0xcf)]&&(_0x357ef5=![],_0x48e189=_0x38ea0d(0x183)+_0x32208a[_0x38ea0d(0x233)]+_0x38ea0d(0x114)):Math[_0x38ea0d(0xdd)](_0x1ed3a5)>_0x41086f[_0x38ea0d(0x117)]&&(_0x357ef5=![]);}if(_0x41086f[_0x38ea0d(0xcd)]==_0x38ea0d(0x20c)){let _0x13ba80=config[_0x38ea0d(0x146)]['find'](_0x3d4228=>_0x3d4228[_0x38ea0d(0x233)]==config['basecoin']),_0x312b72=currentCoins[_0x38ea0d(0x147)](_0x21e2e5=>_0x21e2e5['coin']==config[_0x38ea0d(0x1e5)]);_0x13ba80['offset']>0x0?Math[_0x38ea0d(0xdd)](_0x1ed3a5)*_0x41086f[_0x38ea0d(0x18b)]>_0x312b72[_0x38ea0d(0x117)]-_0x13ba80[_0x38ea0d(0xcf)]&&(_0x357ef5=![],_0x48e189=_0x38ea0d(0x183)+config[_0x38ea0d(0x1e5)]+_0x38ea0d(0x114)):Math['abs'](_0x1ed3a5)*_0x41086f[_0x38ea0d(0x18b)]>_0x312b72['number']&&(_0x357ef5=![]);}return!_0x357ef5&&_0x48e189&&!insufficientFundsWarningSent['includes'](_0x41086f[_0x38ea0d(0x233)])&&(logHistory(_0x38ea0d(0x123),_0x48e189),insufficientFundsWarningSent[_0x38ea0d(0x29e)](_0x41086f[_0x38ea0d(0x233)])),_0x357ef5;}async function getBalances(_0x435624=!![]){const _0x3a76e5=_0x184583;if(botPaused)return;let _0x30238a=0x0,_0x3dec5d;const _0x129e83=config[_0x3a76e5(0x18f)];if(config[_0x3a76e5(0x103)]&&config[_0x3a76e5(0x127)]<0x0)await validate24hChanges();currentCoins['forEach'](_0x397a09=>{const _0x334336=_0x3a76e5;if(_0x397a09[_0x334336(0x233)]!=config[_0x334336(0x1e5)]){let _0x47946b=gTicker[noslash(_0x397a09['symbol'])];_0x3dec5d=_0x397a09[_0x334336(0x154)]?0x1/_0x47946b:_0x47946b;}else _0x3dec5d=0x1;let _0x58c762=_0x397a09[_0x334336(0x117)]*_0x3dec5d;_0x30238a+=_0x58c762,_0x397a09[_0x334336(0x18b)]=formatResult(Number(_0x3dec5d),0x8),_0x397a09[_0x334336(0x1a1)]=_0x58c762;}),currentCoins[_0x3a76e5(0x1f9)](_0x5e2355=>{const _0x3cc600=_0x3a76e5;let _0x303a61=config['portfolio'][_0x3cc600(0x147)](_0x124cfe=>_0x124cfe[_0x3cc600(0x233)]==_0x5e2355[_0x3cc600(0x233)]),_0x2b09fa=Number(_0x303a61[_0x3cc600(0x1bf)]),_0x493ed5=_0x5e2355[_0x3cc600(0x1a1)]/_0x30238a*0x64,_0x801784=_0x2b09fa*_0x30238a/0x64/_0x5e2355[_0x3cc600(0x18b)]-_0x5e2355[_0x3cc600(0x117)];_0x5e2355[_0x3cc600(0x1bf)]=formatResult(_0x493ed5,0x3),_0x5e2355['target']=formatResult(_0x2b09fa,0x3),_0x5e2355[_0x3cc600(0x1fd)]=formatResult(_0x801784,0x8),_0x5e2355[_0x3cc600(0xcd)]='',_0x5e2355[_0x3cc600(0x1c9)]=![];if(_0x5e2355[_0x3cc600(0x233)]!=config['basecoin']){if(_0x5e2355[_0x3cc600(0x1bf)]>_0x2b09fa)_0x5e2355[_0x3cc600(0xcd)]=_0x3cc600(0x29b),_0x5e2355[_0x3cc600(0x1c9)]=checkMinimums(_0x5e2355);else _0x5e2355[_0x3cc600(0x1bf)]<_0x2b09fa&&(_0x5e2355[_0x3cc600(0xcd)]=_0x3cc600(0x20c),_0x5e2355['valid']=checkMinimums(_0x5e2355));}_0x5e2355[_0x3cc600(0x1ad)]=_0x5e2355[_0x3cc600(0x107)]==0x0?0x270f:_0x5e2355[_0x3cc600(0x1bf)]/_0x5e2355['target']-0x1;if(_0x5e2355[_0x3cc600(0x180)]==_0x3cc600(0x20f)||_0x5e2355[_0x3cc600(0x180)]=='canceled')_0x5e2355[_0x3cc600(0x180)]=_0x3cc600(0xd2);}),currentCoins[_0x3a76e5(0x17f)]((_0x7fddde,_0x53fc8a)=>_0x7fddde[_0x3a76e5(0x1ad)]<_0x53fc8a[_0x3a76e5(0x1ad)]?0x1:_0x53fc8a['delta']<_0x7fddde['delta']?-0x1:0x0);const _0x937b78=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x937b78['eur'],'usd':_0x937b78[_0x3a76e5(0x260)],'portfolio':JSON[_0x3a76e5(0x25c)](currentCoins),'threshold':_0x129e83},proxyEmit(_0x3a76e5(0x11d),{'serverversion':serverversion,'balances':lastBalances});if(_0x435624){if(config[_0x3a76e5(0x103)])headlessMode({'portfolio':currentCoins,'threshold':_0x129e83});else lockOrders==ORDERS['UNLOCKED']&&!coolingDown&&notifyBalance({'portfolio':currentCoins,'threshold':_0x129e83});}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x5b3b82=getNormalizedPerformance();getStartingBalances(_0x5b3b82),emitPerformance(_0x5b3b82);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}function getPnL(){const _0x1fa15d=_0x184583;let _0x8c61d6=dbCoinResults[_0x1fa15d(0x275)](_0x1fa15d(0x25f))['value'](),_0xa5296b=0x0;return Object[_0x1fa15d(0x1da)](_0x8c61d6)[_0x1fa15d(0x1f9)](([_0x48cefe,_0x327af5])=>{const _0x4d0934=_0x1fa15d;_0xa5296b+=_0x327af5[_0x4d0934(0x10a)];}),_0xa5296b;}async function storePerformance(){const _0x1485fb=_0x184583;if(!lastBalances)return;let _0x30298a=[],_0x800367;const _0x2576b5=getPnL();let _0x25574e=JSON[_0x1485fb(0x168)](lastBalances[_0x1485fb(0x146)]);_0x25574e['sort']((_0x2924b7,_0x1b7b3d)=>_0x2924b7[_0x1485fb(0x233)]>_0x1b7b3d[_0x1485fb(0x233)]?0x1:_0x1b7b3d['coin']>_0x2924b7['coin']?-0x1:0x0),_0x25574e[_0x1485fb(0x1f9)](_0x3dac2a=>{const _0x13b0a9=_0x1485fb;let _0x27f9a7={'coin':_0x3dac2a[_0x13b0a9(0x233)],'number':_0x3dac2a[_0x13b0a9(0x117)],'price':_0x3dac2a['last']};_0x30298a[_0x13b0a9(0x29e)](_0x27f9a7);});const _0x299cc0=await getFiat(),_0x1092d8=getTimeStamp()[_0x1485fb(0x21c)]('\x20')[0x0],_0x2526a7=dbPerformance[_0x1485fb(0x275)](_0x1485fb(0x221))['find']({'date':_0x1092d8})['value']();_0x800367={'date':_0x1092d8,'eur':_0x299cc0[_0x1485fb(0x297)],'usd':_0x299cc0[_0x1485fb(0x260)],'coins':_0x30298a,'pnl':_0x2576b5},_0x2526a7?_0x800367['date']!=config[_0x1485fb(0x108)]&&dbPerformance[_0x1485fb(0x275)]('data')[_0x1485fb(0x147)]({'date':_0x1092d8})[_0x1485fb(0x1d1)](_0x800367)[_0x1485fb(0xd0)]():dbPerformance['get'](_0x1485fb(0x221))[_0x1485fb(0x29e)](_0x800367)[_0x1485fb(0xd0)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x3bf449=_0x184583;let _0x1e437f=[];if(dbPerformance[_0x3bf449(0x133)](_0x3bf449(0x221))[_0x3bf449(0x1a1)]()){let _0x4c9b41=dbPerformance[_0x3bf449(0x275)](_0x3bf449(0x221))['cloneDeep']()[_0x3bf449(0x137)](_0xaff8b6=>{const _0x127930=_0x3bf449;if(_0xaff8b6['coins'][_0x127930(0x19b)]==0x0)return![];else return!![];})['sortBy'](_0x3bf449(0x26d))[_0x3bf449(0x1a1)](),_0x2645b9=[...config[_0x3bf449(0x166)]];_0x2645b9[_0x3bf449(0x17f)]((_0x51c0ef,_0x4c3dd8)=>_0x51c0ef['date']>_0x4c3dd8[_0x3bf449(0x26d)]?-0x1:_0x4c3dd8[_0x3bf449(0x26d)]>_0x51c0ef[_0x3bf449(0x26d)]?0x1:0x0);let _0x47864b=0x1,_0x29615f=[],_0x1304ff=0x0;_0x4c9b41[_0x3bf449(0x13a)]()[_0x3bf449(0x154)]()['forEach']((_0x22dead,_0x363273)=>{const _0x225ad0=_0x3bf449;if(_0x2645b9[_0x1304ff]){if(_0x4c9b41[_0x4c9b41[_0x225ad0(0x19b)]-_0x363273]&&_0x2645b9[_0x1304ff][_0x225ad0(0x26d)]==_0x4c9b41[_0x4c9b41[_0x225ad0(0x19b)]-_0x363273][_0x225ad0(0x26d)]){if(_0x363273<_0x4c9b41[_0x225ad0(0x19b)]){let _0x56a629=0x0,_0x3603fb=0x0;_0x4c9b41[_0x4c9b41[_0x225ad0(0x19b)]-_0x363273][_0x225ad0(0x25f)][_0x225ad0(0x1f9)](_0x2cedb8=>{const _0x4b2f2b=_0x225ad0;_0x3603fb+=_0x2cedb8[_0x4b2f2b(0x117)]*_0x2cedb8['price'];}),_0x2645b9[_0x1304ff][_0x225ad0(0x230)]['forEach'](_0x57cfcf=>{const _0x3fb21d=_0x225ad0;_0x56a629+=_0x57cfcf[_0x3fb21d(0x117)]*_0x57cfcf[_0x3fb21d(0x1f2)];}),_0x47864b*=_0x56a629/(_0x3603fb-_0x56a629)+0x1;}_0x1304ff++;}}let _0x1c4f22=0x0;_0x22dead[_0x225ad0(0x25f)]['forEach'](_0x488728=>{const _0xd811db=_0x225ad0;_0x1c4f22+=_0x488728[_0xd811db(0x117)]*_0x488728[_0xd811db(0x1f2)];}),_0x29615f[_0x4c9b41['length']-_0x363273-0x1]=_0x1c4f22*(_0x47864b-0x1);});let _0x5ea1e7=[];_0x2645b9=[...config['liquidity']]||[];let _0x5bd634=0x0;_0x1304ff=0x0,_0x4c9b41['forEach']((_0x3fcbb8,_0x55f579)=>{const _0x1207e8=_0x3bf449;if(_0x2645b9[_0x1304ff]){const _0x3c92a8=fns['parse'](_0x2645b9[_0x1304ff][_0x1207e8(0x26d)],_0x1207e8(0x171),new Date()),_0x5ba70c=fns['parse'](_0x3fcbb8['date'],_0x1207e8(0x171),new Date());if(fns[_0x1207e8(0xfa)](_0x3c92a8,_0x5ba70c)){let _0x349a8d=0x0;_0x2645b9[_0x1304ff]['changes'][_0x1207e8(0x1f9)](_0x54e56e=>{const _0x1c60c5=_0x1207e8;!_0x5ea1e7[_0x54e56e[_0x1c60c5(0x233)]]?_0x5ea1e7[_0x54e56e[_0x1c60c5(0x233)]]=_0x54e56e[_0x1c60c5(0x117)]:(_0x349a8d=_0x5ea1e7[_0x54e56e[_0x1c60c5(0x233)]],_0x5ea1e7[_0x54e56e[_0x1c60c5(0x233)]]+=_0x54e56e['number']);const _0x1279b9=_0x3fcbb8['coins'][_0x1c60c5(0x147)](_0x1fd673=>_0x1fd673[_0x1c60c5(0x233)]==_0x54e56e[_0x1c60c5(0x233)]);(!_0x1279b9||_0x1279b9[_0x1c60c5(0x117)]==0x0)&&(_0x5bd634+=(-_0x54e56e[_0x1c60c5(0x117)]-_0x349a8d)*_0x54e56e['price']);}),_0x1304ff++;}}_0x3fcbb8[_0x1207e8(0x25f)][_0x1207e8(0x1f9)]((_0x3ac694,_0xc55598)=>{const _0x5b784e=_0x1207e8;_0x5ea1e7[_0x3ac694['coin']]&&(_0x3ac694[_0x5b784e(0x21d)]=_0x5ea1e7[_0x3ac694['coin']]);}),_0x1e437f['push']({'date':_0x3fcbb8[_0x1207e8(0x26d)],'eur':_0x3fcbb8[_0x1207e8(0x297)],'usd':_0x3fcbb8[_0x1207e8(0x260)],'offset':_0x29615f[_0x55f579],'netoffset':_0x5bd634,'coins':_0x3fcbb8[_0x1207e8(0x25f)],'pnl':_0x3fcbb8[_0x1207e8(0x13f)]});});}return _0x1e437f;}function emitPerformance(_0x228d26){const _0xe57d85=_0x184583;_0x228d26[_0xe57d85(0x19b)]!==0x0?(proxyEmit(_0xe57d85(0x13d),_0x228d26),lastPerformanceEmitted=getDate()):proxyEmit(_0xe57d85(0x13d),[]);}function getPerf(_0x643204,_0x579a25){const _0x5d80cf=_0x184583;let _0x47c4ad=0x0,_0x4ddd1d=0x0,_0x1618ed=0x0;_0x643204[_0x5d80cf(0x25f)][_0x5d80cf(0x1f9)](_0x7b7797=>{const _0x51f735=_0x5d80cf;_0x47c4ad+=_0x7b7797[_0x51f735(0x117)]*_0x7b7797[_0x51f735(0x1f2)];});_0x579a25&&(_0x47c4ad+=_0x643204[_0x5d80cf(0xcf)]);if(config['basecoin']===_0x5d80cf(0x158)||config[_0x5d80cf(0x1e5)]===_0x5d80cf(0x250)||config['basecoin']==='PAXG')_0x4ddd1d=_0x47c4ad*_0x643204[_0x5d80cf(0x297)],_0x1618ed=_0x47c4ad*_0x643204['usd'];else{if(usdBasecoins['includes'](config[_0x5d80cf(0x1e5)]))_0x4ddd1d=_0x47c4ad*_0x643204['eur']/_0x643204[_0x5d80cf(0x260)],_0x1618ed=_0x47c4ad;else config[_0x5d80cf(0x1e5)]==='EUR'&&(_0x4ddd1d=_0x47c4ad,_0x1618ed=_0x47c4ad*_0x643204['usd']/_0x643204[_0x5d80cf(0x297)]);}return[_0x47c4ad,_0x4ddd1d,_0x1618ed];}function CurrencyFactor(_0x480301,_0x5486f5,_0x446c51){const _0x50d78e=_0x184583;let _0x2048d4;if(_0x5486f5==='BTC'||_0x5486f5===_0x50d78e(0x250)||_0x5486f5===_0x50d78e(0x188))_0x2048d4=_0x446c51==='EUR'?_0x480301[_0x50d78e(0x297)]:_0x480301['usd'];else{if(usdBasecoins[_0x50d78e(0x122)](_0x5486f5))_0x2048d4=_0x446c51===_0x50d78e(0x278)?_0x480301[_0x50d78e(0x297)]/_0x480301[_0x50d78e(0x260)]:0x1;else _0x5486f5===_0x50d78e(0x278)&&(_0x2048d4=_0x446c51===_0x50d78e(0x278)?0x1:_0x480301['usd']/_0x480301['eur']);}return _0x2048d4;}function getKPIs(_0x16e60e,_0x24dfdb=_0x184583(0x278)){const _0xce5d8c=_0x184583,_0x2bc217=config[_0xce5d8c(0x1e5)],_0x490420=lastBalances,_0x454337=currentCoins,_0x47acb7=getNormalizedPerformance(),_0x197b4f=CurrencyFactor(_0x490420,config['basecoin'],_0x24dfdb);let _0x33a139=0x0;_0x454337[_0xce5d8c(0x1f9)](_0x6e1706=>{const _0x219eb9=_0xce5d8c;_0x33a139+=_0x6e1706[_0x219eb9(0x117)]*_0x6e1706[_0x219eb9(0x18b)];});_0x16e60e['includes']('fiat')&&(_0x33a139*=_0x197b4f);let _0x4b339b;if(_0x33a139!==0x0){if(_0x16e60e===_0xce5d8c(0x1e5)||_0x16e60e===_0xce5d8c(0x24f)){if(_0x16e60e===_0xce5d8c(0x1e5))_0x4b339b=(_0x33a139/startingBalances[_0xce5d8c(0x1e5)]-0x1)*0x64;else{if(_0x24dfdb===_0xce5d8c(0x278))_0x4b339b=(_0x33a139/startingBalances[_0xce5d8c(0x297)]-0x1)*0x64;else _0x4b339b=(_0x33a139/startingBalances[_0xce5d8c(0x260)]-0x1)*0x64;}}if(_0x16e60e[_0xce5d8c(0x122)]('net')){let _0x535494=0x0;if(startingBalances['coins'])_0x454337[_0xce5d8c(0x1f9)](_0x26421e=>{const _0x45c622=_0xce5d8c;let _0x79ae40=startingBalances['coins']['find'](_0x3a1226=>_0x3a1226[_0x45c622(0x233)]===_0x26421e[_0x45c622(0x233)]);if(_0x79ae40&&_0x79ae40[_0x45c622(0x233)]&&_0x26421e['number']!==0x0)_0x535494+=_0x79ae40[_0x45c622(0x117)]*_0x26421e['last'];});let _0x2e3b66=0x0;if(_0x47acb7[_0xce5d8c(0x19b)]!==0x0){let _0x574f24=_0x47acb7[_0x47acb7[_0xce5d8c(0x19b)]-0x1];_0x2e3b66=_0x574f24[_0xce5d8c(0x1ee)];}_0x535494-=_0x2e3b66;let _0xda669b;_0x16e60e===_0xce5d8c(0x118)&&(_0xda669b=startingBalances[_0xce5d8c(0x1e5)]),_0x16e60e===_0xce5d8c(0x27f)&&(_0xda669b=_0x24dfdb==='EUR'?startingBalances['eur']:startingBalances[_0xce5d8c(0x260)],_0x535494*=_0x197b4f),_0x4b339b=(_0x33a139-_0x535494)/_0xda669b*0x64,_0x33a139=_0x33a139-_0x535494;}if(_0x16e60e[_0xce5d8c(0x122)]('pnl')){if(_0x47acb7[_0xce5d8c(0x19b)]!==0x0&&_0x454337[_0xce5d8c(0x19b)]!==0x0){let _0x133cf7,_0x227d16=_0x47acb7[_0x47acb7[_0xce5d8c(0x19b)]-0x1][_0xce5d8c(0x13f)];_0x16e60e[_0xce5d8c(0x122)](_0xce5d8c(0x24f))?(_0x133cf7=_0x24dfdb===_0xce5d8c(0x278)?startingBalances[_0xce5d8c(0x297)]:startingBalances[_0xce5d8c(0x260)],_0x227d16*=CurrencyFactor(_0x490420,_0x2bc217,_0x24dfdb)):_0x133cf7=startingBalances['basecoin'],_0x4b339b=_0x227d16/_0x133cf7*0x64,_0x33a139=_0x227d16;}}if(_0x4b339b){if(_0x4b339b<0x64)_0x4b339b=_0x4b339b[_0xce5d8c(0x1e7)](0x2);else{if(_0x4b339b<0x3e8)_0x4b339b=_0x4b339b[_0xce5d8c(0x1e7)](0x1);else _0x4b339b=_0x4b339b['toFixed'](0x0);}}else _0x4b339b=Number('0')[_0xce5d8c(0x1e7)](0x2);if(_0x33a139){if(Math['abs'](_0x33a139)<0.000001)_0x33a139=_0x33a139[_0xce5d8c(0x1e7)](0x2);else{if(Math[_0xce5d8c(0xdd)](_0x33a139)<0.1)_0x33a139=_0x33a139[_0xce5d8c(0x1e7)](0x6);else{if(Math['abs'](_0x33a139)<0x1)_0x33a139=_0x33a139[_0xce5d8c(0x1e7)](0x5);else{if(Math[_0xce5d8c(0xdd)](_0x33a139)<0xa)_0x33a139=_0x33a139[_0xce5d8c(0x1e7)](0x4);else{if(Math[_0xce5d8c(0xdd)](_0x33a139)<0x64)_0x33a139=_0x33a139[_0xce5d8c(0x1e7)](0x3);else{if(Math[_0xce5d8c(0xdd)](_0x33a139)<0x3e8)_0x33a139=_0x33a139['toFixed'](0x2);else _0x33a139=_0x33a139[_0xce5d8c(0x1e7)](0x2);}}}}}}else _0x33a139=Number('0')[_0xce5d8c(0x1e7)](0x2);}else _0x4b339b=Number('0')[_0xce5d8c(0x1e7)](0x2);if(_0x4b339b>=0x0)_0x4b339b='+'+_0x4b339b;return{'value':_0x33a139,'change':_0x4b339b};}async function getStartingBalances(_0xc49185,_0x5dfdd8=!![]){const _0x5d0d67=_0x184583;if(_0xc49185[_0x5d0d67(0x19b)]!==0x0){const [_0x2f0cfc,_0x17e770,_0x4ee8a8]=getPerf(_0xc49185[0x0],!![]);let _0x5b7422=[];config[_0x5d0d67(0x146)][_0x5d0d67(0x1f9)](_0x1b6432=>{const _0x37c869=_0x5d0d67;let _0x4232f0=0x0,_0x1b1824;config[_0x37c869(0x166)]['forEach'](_0x395987=>{const _0x27fc30=_0x37c869;let _0x2320fd=_0x395987[_0x27fc30(0x230)][_0x27fc30(0x147)](_0x36ecb5=>_0x36ecb5[_0x27fc30(0x233)]==_0x1b6432['coin']);if(_0x2320fd){_0x4232f0+=_0x2320fd['number'];if(!_0x1b1824)_0x1b1824=_0x2320fd[_0x27fc30(0x1f2)];}}),_0x5b7422[_0x37c869(0x29e)]({'coin':_0x1b6432[_0x37c869(0x233)],'number':_0x4232f0,'initialprice':_0x1b1824});});const _0x1a5fca={'basecoin':_0x2f0cfc,'eur':_0x17e770,'usd':_0x4ee8a8,'coins':_0x5b7422};if(_0x5dfdd8)proxyEmit(_0x5d0d67(0x1cf),_0x1a5fca);startingBalances=_0x1a5fca;}}function headlessMode(_0x19494e){const _0x4495c0=_0x184583;let _0x452a5d=_0x19494e['portfolio'],_0x2166d0=_0x19494e[_0x4495c0(0x18f)],_0xc70752=[];for(let _0x959f3f of _0x452a5d){if(_0x959f3f[_0x4495c0(0x233)]!=config[_0x4495c0(0x1e5)]){if(_0x959f3f[_0x4495c0(0x1ad)]>=_0x2166d0/0x64){if(_0x959f3f[_0x4495c0(0x1c9)])_0xc70752['push'](_0x959f3f);}else{if(_0x959f3f[_0x4495c0(0x1ad)]<=-_0x2166d0/0x64){if(_0x959f3f[_0x4495c0(0x1c9)])_0xc70752[_0x4495c0(0x29e)](_0x959f3f);}}}}_0xc70752[_0x4495c0(0x19b)]>0x0&&placeOrder(_0xc70752);}function notifyBalance(_0x49777c){const _0x55d0c=_0x184583;let _0x50cc1f=_0x49777c[_0x55d0c(0x146)],_0x4192cd=_0x49777c[_0x55d0c(0x18f)],_0xec019d=[];for(let _0x57fcc9 of _0x50cc1f){if(_0x57fcc9[_0x55d0c(0x233)]!=config['basecoin']){if(_0x57fcc9['delta']>=_0x4192cd/0x64){if(_0x57fcc9[_0x55d0c(0x1c9)])_0xec019d[_0x55d0c(0x29e)](_0x57fcc9);}else{if(_0x57fcc9['delta']<=-_0x4192cd/0x64){if(_0x57fcc9[_0x55d0c(0x1c9)])_0xec019d[_0x55d0c(0x29e)](_0x57fcc9);}}}}if(_0xec019d[_0x55d0c(0x19b)]>0x0){let _0x23c04e=_0xec019d[_0x55d0c(0x15a)](_0xdd87dd=>_0xdd87dd[_0x55d0c(0x233)]);_0x23c04e[_0x55d0c(0x17f)]();let _0x5babd9=_0x23c04e['join'](',\x20');if(!lastCoinsToBalance)logHistory(_0x55d0c(0x123),_0x55d0c(0x1cd));lastCoinsToBalance=_0x5babd9;}}function symbolToCoin(_0x32b418){const _0x7fdd66=_0x184583;let _0x3311cc;if(_0x32b418[_0x7fdd66(0x122)]('/'+config['basecoin']))_0x3311cc=_0x32b418[_0x7fdd66(0x207)]('/'+config['basecoin'],'');if(_0x32b418['includes'](config[_0x7fdd66(0x1e5)]+'/'))_0x3311cc=_0x32b418[_0x7fdd66(0x207)](config['basecoin']+'/','');return _0x3311cc;}function setLockOrders(_0xab9c75){const _0x2dfa91=_0x184583;lockOrders=_0xab9c75,logger['debug'](_0x2dfa91(0x151)+Object[_0x2dfa91(0x23d)](ORDERS)[lockOrders]);}async function unlockOrders(_0x1dcd76=![]){const _0x22eb5c=_0x184583;if(allOrdersPlaced&&lockOrders==ORDERS[_0x22eb5c(0x1a8)]){setLockOrders(ORDERS[_0x22eb5c(0x184)]);if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);if(_0x1dcd76){const _0x269ff3=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x269ff3,setBlockTransactionDetection(![]);}validateOrdersState=_0x22eb5c(0x21d),persistOpenOrders([]),setLockOrders(ORDERS['UNLOCKED']);}}async function validateOrders(_0x3f3235){const _0x388424=_0x184583;if(_0x3f3235)validateOrdersState=_0x3f3235;logger[_0x388424(0x138)](_0x388424(0xd3)+validateOrdersState+_0x388424(0x1e0)+Object[_0x388424(0x23d)](ORDERS)[lockOrders]);let _0x274c1d=[],_0x3e3ed6=config['ordertype']==_0x388424(0x1c2)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x388424(0x292)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x388424(0x1a8)])return;logger[_0x388424(0x138)](_0x388424(0x24e)+validateOrdersState);for(let _0x12b230=lastOrders['length']-0x1;_0x12b230>=0x0;_0x12b230--){let _0x574a46=lastOrders[_0x12b230],_0x34a30e=![];_0x574a46[_0x388424(0x20f)]>0x0&&(_0x34a30e=!![]),_0x274c1d[_0x388424(0x29e)](_0x34a30e),_0x34a30e&&config[_0x388424(0xbd)]!='market'&&logHistory(_0x388424(0x1f8),_0x388424(0x212)+_0x574a46[_0x388424(0x210)]+'\x20'+_0x574a46[_0x388424(0xcd)]+'\x20#'+formatResult(_0x574a46[_0x388424(0x20f)],0x8)+'\x20@'+formatResult(_0x574a46[_0x388424(0x1f2)],0x8)),_0x34a30e&&lastOrders['splice'](_0x12b230,0x1);}persistOpenOrders(lastOrders);const _0x43254f=coolingDown?_0x388424(0x28f):_0x388424(0xff);if(validateOrdersState==_0x388424(0x21d)){validateOrdersState=_0x388424(0x1e2);if(_0x274c1d[_0x388424(0x122)](![])){}else await unlockOrders();}else{if(validateOrdersState==_0x388424(0x1e2)){if(_0x274c1d[_0x388424(0x122)](![])){}else await unlockOrders();}else{if(validateOrdersState=='final'){let _0x88c02e=!![];if(_0x274c1d[_0x388424(0x122)](![])){if(config[_0x388424(0xbd)]=='market')logHistory('success','Order(s)\x20not\x20validated\x20after\x20'+Math[_0x388424(0xf7)](_0x3e3ed6*validateOrderInterval/0xea60)+_0x388424(0x193)+_0x43254f),await unlockOrders(!![]);else{_0x88c02e=await cancelOrders();if(_0x88c02e)logHistory('success',_0x388424(0x1ba)+Math[_0x388424(0xf7)](_0x3e3ed6*validateOrderInterval/0xea60)+_0x388424(0x193)+_0x43254f),await unlockOrders(!![]);else{validateOrdersState='ongoing',logHistory(_0x388424(0x27e),_0x388424(0x22f)+Math[_0x388424(0xf7)](_0x3e3ed6*validateOrderInterval/0xea60)+_0x388424(0x193)+_0x43254f),logHistory(_0x388424(0x27e),_0x388424(0x243));const _0x374a16=config[_0x388424(0xbd)]==_0x388424(0x1c2)?validateOrderTimeout*0x3c*0x3e8:config[_0x388424(0x292)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x19e191=_0x388424;validateOrders(_0x19e191(0x20e));},_0x374a16);}}}else await unlockOrders(!![]);}else{if(validateOrdersState=='no\x20open\x20orders'){if(config['ordertype']!=_0x388424(0x1c2))logHistory('success',_0x388424(0x145)+_0x43254f);await unlockOrders(!![]);}}}}}async function cancelOrders(){const _0xce1882=_0x184583;let _0x80f217=!![],_0x2e6122;for(const _0xb0c2ec of lastOrders){let _0x39b604=![],_0x2d6af9=0x0;while(!_0x39b604&&_0x2d6af9<maxRetries){try{const _0x26465a=await exchange['cancelOrder'](_0xb0c2ec[_0xce1882(0xf4)],_0xb0c2ec[_0xce1882(0x210)]);_0x39b604=!![];}catch(_0x422486){_0x422486[_0xce1882(0xde)]()[_0xce1882(0x122)](_0xce1882(0x274))||_0x422486[_0xce1882(0xde)]()[_0xce1882(0x122)](_0xce1882(0x238))?_0x39b604=!![]:(_0x2e6122=_0x422486,_0x39b604=![]);}!_0x39b604&&(_0x2d6af9++,await sleep(retryInterval));}_0x80f217=_0x80f217&&_0x39b604;}return!_0x80f217&&await handleError(_0x2e6122,'cancelOrders()'),_0x80f217;}async function initCoinResults(_0x54f9c2){const _0x5c2eb0=_0x184583;_0x54f9c2?logger['debug'](_0x5c2eb0(0x176)+_0x54f9c2):logger[_0x5c2eb0(0x138)](_0x5c2eb0(0x21b)),config[_0x5c2eb0(0x146)][_0x5c2eb0(0x1f9)](_0x43aea7=>{const _0x5b4e94=_0x5c2eb0;if(!_0x43aea7[_0x5b4e94(0x1d4)]&&_0x43aea7['coin']!=config[_0x5b4e94(0x1e5)]){const _0x3fe3ca=currentCoins[_0x5b4e94(0x147)](_0x2369c4=>_0x2369c4[_0x5b4e94(0x233)]==_0x43aea7['coin']),_0x481c69=gTicker[noslash(_0x43aea7[_0x5b4e94(0x210)])];let _0x3bcd0a=_0x3fe3ca?_0x3fe3ca['number']:null,_0x375ceb=_0x43aea7[_0x5b4e94(0x154)]?0x1/_0x481c69:_0x481c69,_0x31f537;config[_0x5b4e94(0x166)][_0x5b4e94(0x1f9)](_0x213a8f=>{const _0x476827=_0x5b4e94;!_0x31f537&&(_0x31f537=_0x213a8f['changes']['find'](_0x5992a4=>_0x5992a4[_0x476827(0x233)]==_0x43aea7['coin']),_0x31f537&&(_0x3bcd0a=_0x31f537[_0x476827(0x117)],_0x375ceb=_0x31f537[_0x476827(0x1f2)]));});let _0xd07275=dbCoinResults[_0x5b4e94(0x275)](_0x5b4e94(0x25f))['find']({'coin':_0x43aea7[_0x5b4e94(0x233)]})['value']();if(!_0xd07275){const _0x50aa59={'coin':_0x43aea7[_0x5b4e94(0x233)],'number':_0x3bcd0a,'breakeven':_0x375ceb,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x5b4e94(0x275)](_0x5b4e94(0x25f))['push'](_0x50aa59)[_0x5b4e94(0xd0)]();}else{if(_0x54f9c2&&_0x43aea7[_0x5b4e94(0x233)]==_0x54f9c2){const _0x401657={'coin':_0x43aea7[_0x5b4e94(0x233)],'number':_0x3bcd0a,'breakeven':_0x375ceb,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get'](_0x5b4e94(0x25f))[_0x5b4e94(0x147)]({'coin':_0x43aea7[_0x5b4e94(0x233)]})[_0x5b4e94(0x1d1)](_0x401657)[_0x5b4e94(0xd0)]();}}}});}async function placeOrder(_0x5330bb){const _0x523299=_0x184583,_0x124ea9=config['ordertype']==_0x523299(0x1c2)?_0x523299(0x1c2):_0x523299(0x17e);if(lockOrders==ORDERS['UNLOCKED']&&!coolingDown){setLockOrders(ORDERS['LOCKED']);while(transactionDetectionOngoing){await sleep(0x64);}logger[_0x523299(0x138)]('Placing\x20order\x20for:\x20'+_0x5330bb['map'](_0x220ce7=>_0x220ce7['coin'])[_0x523299(0x249)](',\x20')),lastCoinsToBalance='',allOrdersPlaced=![],validateOrdersState=_0x523299(0x21d);let _0x1dc397=![];lastOrders=[];const _0xd0285=config['threshold'];for(const _0x2b37de of _0x5330bb){let _0x382f16,_0x1ba3be,_0x226898,_0xd92870,_0xe75070,_0x4044e7=_0x2b37de[_0x523299(0x210)];logger['debug'](_0x523299(0x1b4)+_0x2b37de[_0x523299(0x233)]+'\x20'+_0x2b37de[_0x523299(0x117)]+'\x20'+_0x2b37de[_0x523299(0x18b)]+'\x20'+_0x2b37de[_0x523299(0x1bf)]+'%\x20'+_0x2b37de[_0x523299(0x107)]+'%\x20'+(0x64*_0x2b37de[_0x523299(0x1ad)])[_0x523299(0x1e7)](0x2)+_0x523299(0x1e4)+_0xd0285[_0x523299(0x1e7)](0x2)+'%)'),insufficientFundsWarningSent=insufficientFundsWarningSent[_0x523299(0x137)](_0x3c0635=>_0x3c0635!==_0x2b37de['coin']);const _0x565d92=currentCoins['find'](_0x498f35=>_0x498f35[_0x523299(0x233)]==_0x2b37de[_0x523299(0x233)]);_0x565d92&&(_0x565d92[_0x523299(0x1a6)]=_0x2b37de[_0x523299(0x117)]);try{const _0x46547b=await exchange[_0x523299(0x172)](_0x4044e7);_0x382f16=_0x2b37de[_0x523299(0x154)]?0x1/_0x2b37de[_0x523299(0x18b)]:_0x2b37de[_0x523299(0x18b)],_0x1ba3be=_0x46547b[_0x523299(0xd1)],_0x226898=_0x46547b[_0x523299(0xcb)];_0x2b37de[_0x523299(0x154)]?(_0xd92870=_0x2b37de[_0x523299(0xcd)]==_0x523299(0x20c)?_0x523299(0x29b):_0x523299(0x20c),_0xe75070=Math[_0x523299(0xdd)](_0x2b37de[_0x523299(0x1fd)])/_0x382f16):(_0xd92870=_0x2b37de[_0x523299(0xcd)],_0xe75070=Math['abs'](_0x2b37de[_0x523299(0x1fd)]));_0x124ea9==_0x523299(0x17e)&&(config[_0x523299(0xbd)]=='limit-high'&&(_0x382f16=_0xd92870=='buy'?_0x1ba3be:_0x226898),config['ordertype']==_0x523299(0x1d2)&&(_0x382f16=_0xd92870=='buy'?_0x226898:_0x1ba3be));_0xe75070=formatResult(_0xe75070,0x8),_0x382f16=formatResult(_0x382f16,0x8);const _0x251879=_0xd92870==_0x523299(0x29b)?config[_0x523299(0xce)]?String[_0x523299(0x1f3)]('0x'+config[_0x523299(0xce)])+'\x20':'':config[_0x523299(0x16e)]?String[_0x523299(0x1f3)]('0x'+config['emojibuy'])+'\x20':'',_0x422904=_0x124ea9==_0x523299(0x1c2)?_0x523299(0x1be):config[_0x523299(0xbd)]==_0x523299(0x220)?_0x523299(0x12e):_0x523299(0x293),_0x50c560=(Math['floor'](Math[_0x523299(0x1e1)]()*0x35a4e900)+0x5f5e100)[_0x523299(0xde)]();lastOrders[_0x523299(0x29e)]({'customId':_0x50c560,'symbol':_0x4044e7,'coin':_0x2b37de[_0x523299(0x233)],'amount':_0xe75070,'price':_0x382f16,'side':_0xd92870,'reverse':_0x2b37de[_0x523299(0x154)],'filled':0x0});let _0x4ab618;_0x124ea9==_0x523299(0x1c2)?_0xd92870==_0x523299(0x20c)&&[_0x523299(0x15e),_0x523299(0x23c),_0x523299(0xe6),_0x523299(0x202),_0x523299(0x242),'Huobipro'][_0x523299(0x122)](config['exchange'])?_0x4ab618=await exchange[_0x523299(0x22b)](_0x4044e7,_0x124ea9,_0xd92870,_0xe75070,_0x382f16):_0x4ab618=await exchange[_0x523299(0x22b)](_0x4044e7,_0x124ea9,_0xd92870,_0xe75070,undefined):_0x4ab618=await exchange['createOrder'](_0x4044e7,_0x124ea9,_0xd92870,_0xe75070,_0x382f16);const _0x591c9b=lastOrders['length']-0x1;if(_0x591c9b>=0x0&&lastOrders[_0x591c9b]['customId']==_0x50c560){lastOrders[_0x591c9b][_0x523299(0xf4)]=_0x4ab618['id'];if(_0x4ab618[_0x523299(0xbc)])lastOrders[_0x591c9b][_0x523299(0xbc)]=_0x4ab618['amount'];if(_0x4ab618[_0x523299(0x1f2)])lastOrders[_0x591c9b]['price']=_0x4ab618['price'];lastOrders[_0x591c9b][_0x523299(0x1f6)]=_0x4ab618[_0x523299(0x1f6)];}if(_0x4ab618[_0x523299(0xbc)])_0xe75070=_0x4ab618[_0x523299(0xbc)];if(_0x4ab618[_0x523299(0x1f2)])_0x382f16=_0x4ab618[_0x523299(0x1f2)];if(_0x124ea9==_0x523299(0x1c2))logHistory(_0x523299(0x1f8),''+_0x251879+_0x422904+'\x20order:\x20'+_0x4044e7+'\x20'+_0xd92870+'\x20#'+formatResult(_0xe75070,0x8)+'\x20@'+formatResult(_0x382f16,0x8));else logHistory(_0x523299(0x1f8),''+_0x251879+_0x422904+_0x523299(0x1bc)+_0x4044e7+'\x20'+_0xd92870+'\x20#'+formatResult(_0xe75070,0x8)+'\x20@'+formatResult(_0x382f16,0x8));logger[_0x523299(0x138)]('ID:\x20'+_0x4ab618['id']+_0x523299(0x1db)+_0x50c560);if(config[_0x523299(0x1af)]!=0x0){let _0x502e7e=null;if(cooldownTracker[_0x523299(0x19b)]==config[_0x523299(0x1af)]-0x1)_0x502e7e=cooldownTracker[_0x523299(0x1eb)]();const _0x12b02a=getTimeStamp();cooldownTracker[_0x523299(0x29e)](_0x12b02a);if(_0x502e7e){const _0x152996=fns['differenceInSeconds'](new Date(_0x12b02a),new Date(_0x502e7e));if(_0x152996<cooldownInterval){logHistory('error',_0x523299(0x1c4)+config[_0x523299(0x1af)]+_0x523299(0x169)+cooldownInterval/0x3c+'\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20'+cooldownPeriod/(0xe10*0x3e8)+_0x523299(0x15d)),coolingDown=!![];break;}}}}catch(_0x8f6487){if(_0x8f6487[_0x523299(0xde)]()[_0x523299(0x122)](_0x523299(0x214)))lastOrders=lastOrders['filter'](_0x39be92=>_0x39be92[_0x523299(0x210)]!=_0x4044e7),logHistory(_0x523299(0x27e),'Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x4044e7),_0x1dc397=!![];else{if(_0x8f6487[_0x523299(0xde)]()[_0x523299(0x122)]('Invalid\x20quantity'))lastOrders=lastOrders[_0x523299(0x137)](_0x185108=>_0x185108['symbol']!=_0x4044e7),logHistory(_0x523299(0x27e),_0x523299(0x1c5)+_0x4044e7),_0x1dc397=!![];else{if(_0x8f6487[_0x523299(0xde)]()['includes'](_0x523299(0x238)))lastOrders=lastOrders[_0x523299(0x137)](_0x4b1b04=>_0x4b1b04['symbol']!=_0x4044e7),logHistory(_0x523299(0x27e),'Order\x20is\x20invalid:\x20'+_0x4044e7),logger[_0x523299(0x138)](_0x8f6487),_0x1dc397=!![];else _0x8f6487[_0x523299(0xde)]()['includes'](_0x523299(0x18e))?(lastOrders=lastOrders[_0x523299(0x137)](_0x2c4d42=>_0x2c4d42[_0x523299(0x210)]!=_0x4044e7),logHistory(_0x523299(0x27e),_0x523299(0x10f)+_0x4044e7),_0x1dc397=!![]):(lastOrders=lastOrders[_0x523299(0x137)](_0x53dc93=>_0x53dc93['symbol']!=_0x4044e7),await handleError(_0x8f6487,_0x523299(0x1fa),_0x4044e7));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x523299(0x19b)]>0x0){const _0xe68959=config['ordertype']==_0x523299(0x1c2)?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x4cf2d2=_0x523299;validateOrders(_0x4cf2d2(0x20e));},_0xe68959);}else unlockOrders();_0x1dc397&&config[_0x523299(0x103)]&&(logHistory(_0x523299(0x27e),_0x523299(0x1d7)+pauseBotMsg),await pauseBot(pauseBotInterval)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x523299(0xf3),_0x523299(0xbf)));}else{if(coolingDown)!config[_0x523299(0x103)]&&logHistory('error',_0x523299(0x1e6));else lockOrders!=ORDERS[_0x523299(0x290)]&&(!config[_0x523299(0x103)]&&(config['ordertype']==_0x523299(0x1c2)?logHistory(_0x523299(0x27e),_0x523299(0xe4)):logHistory(_0x523299(0x27e),_0x523299(0x26f))));}}function persistOpenOrders(_0x5dcf1e){const _0xdfd2d9=_0x184583,_0x95e855={...config,'openOrders':_0x5dcf1e};let _0xf12f55=dbConfig[_0xdfd2d9(0x275)](_0xdfd2d9(0x270))['find']({'botID':botID})[_0xdfd2d9(0x1a1)]();_0xf12f55&&dbConfig['get'](_0xdfd2d9(0x270))['find']({'botID':botID})[_0xdfd2d9(0x1d1)](_0x95e855)[_0xdfd2d9(0xd0)]();}function restoreOrders(){const _0x36c6fd=_0x184583;let _0x4c0fa5;config[_0x36c6fd(0x1d5)]&&allOpenOrders[_0x36c6fd(0x1f9)](_0x59a03a=>{const _0x15a936=_0x36c6fd,_0x291616=config[_0x15a936(0x1d5)][_0x15a936(0x147)](_0x33a4ca=>_0x33a4ca[_0x15a936(0xf4)]==_0x59a03a['id']);_0x291616&&(lastOrders[_0x15a936(0x29e)](_0x291616),_0x4c0fa5=_0x59a03a[_0x15a936(0x170)]);});if(lastOrders[_0x36c6fd(0x19b)]>0x0){setLockOrders(ORDERS[_0x36c6fd(0x1a8)]),validateOrdersState=_0x36c6fd(0x1e2),allOrdersPlaced=!![];const _0x42d879=new Date()[_0x36c6fd(0x200)](),_0x3d3da4=config[_0x36c6fd(0xbd)]==_0x36c6fd(0x1c2)?validateOrderTimeout*0x3c*0x3e8:config[_0x36c6fd(0x292)]*0x3c*0x3e8;if(_0x4c0fa5+_0x3d3da4>_0x42d879){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x9211d=_0x36c6fd;validateOrders(_0x9211d(0x20e));},_0x4c0fa5+_0x3d3da4-_0x42d879);}else validateOrders(_0x36c6fd(0x20e));}}async function sendMetricsTelegram(){const _0x3a242d=_0x184583;if(!coinsLoaded){process[_0x3a242d(0x24c)]({'telegrammsg':'Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute'},_0x10e402=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x129aa2='';if(config['showname'])_0x129aa2=_0x3a242d(0x1ca)+config[_0x3a242d(0xed)]+_0x3a242d(0x12f);else _0x129aa2=_0x3a242d(0x263)+botID+'\x20metrics:</b>\x20\x0a\x0a';const _0x22829b=config['basecoin'],_0x5e22de=config[_0x3a242d(0x24f)],_0x43a748=getKPIs(_0x3a242d(0x1e5)),_0x25b2f4=getKPIs(_0x3a242d(0x24f),_0x5e22de),_0x37e2ed=getKPIs('net-basecoin'),_0x13227c=getKPIs('net-fiat',_0x5e22de),_0x479c2b=getKPIs('pnl-basecoin'),_0x2ed717=getKPIs(_0x3a242d(0x226),_0x5e22de);_0x22829b[_0x3a242d(0x122)](_0x5e22de)?(_0x129aa2+=_0x3a242d(0x255),_0x129aa2+=_0x3a242d(0x237)+_0x22829b+':\x20'+_0x43a748[_0x3a242d(0x1a1)]+'\x20('+_0x43a748[_0x3a242d(0xd6)]+_0x3a242d(0x120),_0x129aa2+=_0x3a242d(0x231)+_0x22829b+':\x20'+_0x37e2ed[_0x3a242d(0x1a1)]+'\x20('+_0x37e2ed[_0x3a242d(0xd6)]+'%)\x0a',_0x129aa2+=_0x3a242d(0x1fe)+_0x22829b+':\x20'+_0x479c2b['value']+'\x20('+_0x479c2b[_0x3a242d(0xd6)]+_0x3a242d(0x120),_0x129aa2+=_0x3a242d(0x257)):(_0x129aa2+='<pre>',_0x129aa2+=_0x3a242d(0x237)+_0x22829b+':\x20'+_0x43a748['value']+'\x20('+_0x43a748['change']+_0x3a242d(0x120),_0x129aa2+='Value\x20'+_0x5e22de+':\x20'+_0x25b2f4[_0x3a242d(0x1a1)]+'\x20('+_0x25b2f4[_0x3a242d(0xd6)]+'%)\x0a',_0x129aa2+=_0x3a242d(0x231)+_0x22829b+':\x20'+_0x37e2ed[_0x3a242d(0x1a1)]+'\x20('+_0x37e2ed[_0x3a242d(0xd6)]+_0x3a242d(0x120),_0x129aa2+='Net\x20'+_0x5e22de+':\x20'+_0x13227c[_0x3a242d(0x1a1)]+'\x20('+_0x13227c[_0x3a242d(0xd6)]+_0x3a242d(0x120),_0x129aa2+=_0x3a242d(0x1fe)+_0x22829b+':\x20'+_0x479c2b['value']+'\x20('+_0x479c2b[_0x3a242d(0xd6)]+_0x3a242d(0x120),_0x129aa2+='PnL\x20'+_0x5e22de+':\x20'+_0x2ed717[_0x3a242d(0x1a1)]+'\x20('+_0x2ed717[_0x3a242d(0xd6)]+'%)\x0a',_0x129aa2+='</pre>'),process[_0x3a242d(0x24c)]({'telegrammsg':_0x129aa2},_0x1382b5=>{});}async function sendPortfolioTelegram(){const _0x112141=_0x184583;if(!coinsLoaded||!currentCoins[0x0][_0x112141(0x1bf)]){process['send']({'telegrammsg':_0x112141(0x201)},_0xf47bdb=>{});return;}let _0x2d4cc3='';if(config[_0x112141(0x1dd)])_0x2d4cc3=_0x112141(0x1ca)+config[_0x112141(0xed)]+_0x112141(0x26a);else _0x2d4cc3=_0x112141(0x263)+botID+_0x112141(0x26a);_0x2d4cc3+=_0x112141(0x255),_0x2d4cc3+=_0x112141(0x1a3),_0x2d4cc3+=_0x112141(0xe0),_0x2d4cc3+=_0x112141(0x1a3),currentCoins[_0x112141(0x1f9)](_0x31626d=>{const _0x32cf52=_0x112141;_0x2d4cc3+=_0x31626d[_0x32cf52(0x233)][_0x32cf52(0x1a9)](0x7)+'|\x20'+formatPad(_0x31626d[_0x32cf52(0x1bf)],0x2,0x6)+'|\x20'+formatPad(_0x31626d[_0x32cf52(0x107)],0x2,0x6)+'|\x20'+(_0x31626d[_0x32cf52(0x107)]==0x0?''[_0x32cf52(0xbe)](0x6):formatPad(_0x31626d[_0x32cf52(0x1ad)]*0x64,0x2,0x6))+'\x0a';}),_0x2d4cc3+='</pre>',process[_0x112141(0x24c)]({'telegrammsg':_0x2d4cc3},_0x45e0ed=>{});}function formatPad(_0x4d15cc,_0x3ab542,_0x20121b){const _0x49408b=formatResultString(_0x4d15cc,_0x3ab542);return _0x49408b?_0x49408b['padStart'](_0x20121b):''['padStart'](_0x20121b);}function logHistory(_0x225550,_0x4e177d,_0x41e916=''){const _0x3aa53a=_0x184583;logger['full'](''+_0x4e177d);let _0x30b7e7={'time':getTimeStamp(),'type':_0x225550,'event':_0x4e177d};dbLogs['get'](_0x3aa53a(0x109))['push'](_0x30b7e7)[_0x3aa53a(0xd0)]();if(_0x41e916=='')_0x41e916=_0x4e177d;proxyEmit('event',{'log':_0x30b7e7,'summary':_0x41e916}),process['send']({'telegram':{..._0x30b7e7,'botname':config[_0x3aa53a(0xed)],'showname':config['showname']}},_0x2ae794=>{});}function emitHistory(_0x482764={}){const _0x244013=_0x184583;Object['keys'](_0x482764)[_0x244013(0x19b)]==0x0&&(_0x482764={'type':[_0x244013(0x1f8),_0x244013(0xf0)],'event':'','page':0x1});if(_0x482764[_0x244013(0xd5)]['includes'](_0x244013(0xf0)))_0x482764[_0x244013(0xd5)][_0x244013(0x192)](_0x482764[_0x244013(0xd5)]['indexOf'](_0x244013(0xf0)),0x1,_0x244013(0x27e),'warning','success');if(dbLogs[_0x244013(0x133)](_0x244013(0x109))['value']()){let _0x5ca780=dbLogs[_0x244013(0x275)](_0x244013(0x109))[_0x244013(0x137)](_0x59e333=>{const _0x4bfc75=_0x244013;if(_0x482764[_0x4bfc75(0xd5)]['length']==0x0)return![];else return _0x482764['type'][_0x4bfc75(0x122)](_0x59e333[_0x4bfc75(0xd5)]);})[_0x244013(0x137)](_0x5a4e7e=>{const _0x19cd2a=_0x244013;if(_0x482764[_0x19cd2a(0xf0)]=='')return!![];else return _0x5a4e7e[_0x19cd2a(0xf0)][_0x19cd2a(0x1f5)]()[_0x19cd2a(0x122)](_0x482764[_0x19cd2a(0xf0)][_0x19cd2a(0x1f5)]());})[_0x244013(0x276)](_0x244013(0x182)),_0x50bbd7=_0x5ca780[_0x244013(0x1a1)]()[_0x244013(0x19b)];_0x5ca780=_0x5ca780[_0x244013(0x154)]()[_0x244013(0x13a)]((_0x482764[_0x244013(0x16d)]-0x1)*logPageSize,_0x482764['page']*logPageSize-0x1)[_0x244013(0x154)]()[_0x244013(0x1a1)](),proxyEmit('event-history',{'logs':_0x5ca780,'total':_0x50bbd7});}else proxyEmit(_0x244013(0x165),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x384aed){const _0x5c8504=_0x184583;if(dbLogs['has'](_0x5c8504(0x109))['value']()){const _0x1f838c=dbLogs['get']('logs')[_0x5c8504(0x276)]('time')[_0x5c8504(0x137)](_0x2de62d=>{const _0x407900=_0x5c8504;return _0x2de62d[_0x407900(0xd5)]==_0x407900(0x1f8);})[_0x5c8504(0x1a1)]();dbLogs[_0x5c8504(0x275)]('logs')[_0x5c8504(0x18d)]()[_0x5c8504(0xd0)](),dbLogs[_0x5c8504(0x275)](_0x5c8504(0x109))['assign'](_0x1f838c)['write'](),emitHistory(_0x384aed);}}async function pauseBot(_0x481c7c=pauseBotIntervalShort,_0x378237,_0x4834b5,_0x37151e=![]){const _0x15de7f=_0x184583,_0x541be5=new Date()[_0x15de7f(0x200)]();if(!lastErrorShown||_0x541be5-lastErrorShown>=_0x481c7c){lastErrorShown=_0x541be5;if(!lastBotPause)lastBotPause=_0x541be5,consecutivePauses=0x1;else{if(_0x541be5-lastBotPause-_0x481c7c<0x5a*0x3e8){consecutivePauses++;if(consecutivePauses>maxPauseRetries){if(_0x37151e){logHistory('error',_0x378237+_0x15de7f(0x296)),await killBot();return;}else logHistory(_0x15de7f(0x27e),_0x378237+pauseBotMsg),_0x481c7c=pauseBotInterval;}}else consecutivePauses=0x1;lastBotPause=_0x541be5;}_0x4834b5?logger[_0x15de7f(0x138)]('('+consecutivePauses+')\x20'+_0x378237+'\x20>\x20details:',_0x4834b5):logger[_0x15de7f(0x138)]('('+consecutivePauses+')\x20'+_0x378237);if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);await sleep(_0x481c7c),botPaused=![],_0x481c7c==pauseBotIntervalShort?resumeBot(!![]):resumeBot(![]);}}}async function killBot(){const _0x638db1=_0x184583;botPaused=!![],await sleep(0x3e8),process['send']({'stop':_0x638db1(0x1e3)},_0x31815e=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0xeb980a,_0x2b2201,_0x234b89=![]){const _0xecf3c5=_0x184583;if(botPaused)return;let _0x141d52;const _0x1674fc=config['exchange']||_0xecf3c5(0x282);if(_0x2b2201)logger[_0xecf3c5(0x138)]('Exception\x20thrown\x20in\x20'+_0x2b2201);const _0x51df34=()=>{const _0x5896c2=_0xecf3c5;loading['error']=_0x5896c2(0x203),emitLoadingProgress();};if(_0xeb980a[_0xecf3c5(0xde)]()[_0xecf3c5(0x122)]('API-key\x20format\x20invalid'))logHistory(_0xecf3c5(0x27e),_0x1674fc+'\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)'),_0x51df34();else{if(_0xeb980a['toString']()[_0xecf3c5(0x122)](_0xecf3c5(0x163)))logHistory(_0xecf3c5(0x27e),_0x1674fc+_0xecf3c5(0x11e)),_0x51df34();else{if(_0xeb980a[_0xecf3c5(0xde)]()[_0xecf3c5(0x122)](_0xecf3c5(0x1bb)))config[_0xecf3c5(0x211)]?_0x141d52=_0x1674fc+_0xecf3c5(0x20d):_0x141d52=_0x1674fc+'\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange',logHistory('error',_0x141d52+_0xecf3c5(0xec)),_0x51df34();else{if(_0xeb980a[_0xecf3c5(0xde)]()[_0xecf3c5(0x122)](_0xecf3c5(0x205)))logHistory(_0xecf3c5(0x27e),_0x1674fc+_0xecf3c5(0x1b2)),_0x51df34();else{if(!_0x234b89)await handleError(_0xeb980a,null);}}}}}async function handleError(_0x116e86,_0x2f4f8a,_0x1335e4=''){const _0x4b90ce=_0x184583;if(botPaused)return;let _0x58fcff;const _0x5f02c3=config[_0x4b90ce(0x149)]||_0x4b90ce(0x282);if(_0x2f4f8a)logger[_0x4b90ce(0x138)](_0x4b90ce(0x1b8)+_0x2f4f8a);if(_0x116e86[_0x4b90ce(0xde)]()[_0x4b90ce(0x122)](_0x4b90ce(0x1ae)))_0x58fcff=_0x5f02c3+'\x20blocked\x20API\x20(DDoSProtection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading',await pauseBot(undefined,_0x58fcff,_0x116e86);else{if(_0x116e86[_0x4b90ce(0xde)]()['includes'](_0x4b90ce(0xdc)))_0x58fcff=_0x5f02c3+'\x20blocked\x20API\x20(RateLimitExceeded)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading',await pauseBot(undefined,_0x58fcff,_0x116e86);else{if(_0x116e86[_0x4b90ce(0xde)]()['includes'](_0x4b90ce(0x269))||_0x116e86['toString']()[_0x4b90ce(0x122)](_0x4b90ce(0x164)))_0x58fcff=_0x5f02c3+_0x4b90ce(0xc3),await pauseBot(undefined,_0x58fcff,_0x116e86['toString']());else{if(_0x116e86[_0x4b90ce(0xde)]()[_0x4b90ce(0x122)]('RequestTimeout'))_0x58fcff=_0x5f02c3+_0x4b90ce(0x199),await pauseBot(undefined,_0x58fcff,_0x116e86['toString']());else{if(_0x116e86[_0x4b90ce(0xde)]()['includes'](_0x4b90ce(0x1d8)))_0x58fcff=_0x5f02c3+_0x4b90ce(0x267),await pauseBot(undefined,_0x58fcff,_0x116e86[_0x4b90ce(0xde)]());else{if(_0x116e86[_0x4b90ce(0xde)]()[_0x4b90ce(0x1f5)]()[_0x4b90ce(0x122)]('timestamp')||_0x116e86[_0x4b90ce(0xde)]()['toLowerCase']()[_0x4b90ce(0x122)]('request-time'))_0x58fcff=_0x4b90ce(0x22a),await pauseBot(undefined,_0x58fcff,_0x116e86['toString']());else{if(_0x116e86[_0x4b90ce(0xde)]()[_0x4b90ce(0x122)](_0x4b90ce(0x125)))_0x58fcff=_0x5f02c3+'\x20rejected\x20your\x20API\x20request\x20(see:\x20hodlerhacks.com/fix/4)',await pauseBot(undefined,_0x58fcff,_0x116e86[_0x4b90ce(0xde)]());else{if(_0x116e86 instanceof ccxt['NetworkError'])_0x58fcff=_0x5f02c3+_0x4b90ce(0x11a)+_0x116e86['toString'](),logger['debug'](_0x4b90ce(0x17b),_0x116e86),await pauseBot(undefined,_0x58fcff,_0x116e86);else{if(_0x116e86['toString']()[_0x4b90ce(0x122)](_0x4b90ce(0x1de)))logHistory(_0x4b90ce(0x27e),_0x5f02c3+'\x20API\x20key\x20is\x20invalid'),logHistory('error',_0x4b90ce(0x11c)),await killBot();else{if(_0x116e86[_0x4b90ce(0xde)]()[_0x4b90ce(0x122)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory(_0x4b90ce(0x27e),_0x5f02c3+_0x4b90ce(0x179)),logHistory(_0x4b90ce(0x27e),_0x4b90ce(0x11c)),await killBot();else{if(_0x116e86[_0x4b90ce(0xde)]()[_0x4b90ce(0x122)](_0x4b90ce(0x1bb))&&_0x116e86['toString']()[_0x4b90ce(0x122)](_0x4b90ce(0x100)))_0x58fcff=_0x5f02c3+'\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)',await pauseBot(undefined,_0x58fcff,_0x116e86,!![]);else{if(_0x116e86[_0x4b90ce(0xde)]()[_0x4b90ce(0x122)](_0x4b90ce(0x1bb)))config[_0x4b90ce(0x211)]?_0x58fcff=_0x5f02c3+'\x20API\x20key,\x20secret\x20or\x20password\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange':_0x58fcff=_0x5f02c3+_0x4b90ce(0x252),logHistory(_0x4b90ce(0x27e),_0x58fcff),logHistory(_0x4b90ce(0x27e),_0x4b90ce(0x11c)),await killBot();else{if(_0x116e86[_0x4b90ce(0xde)]()[_0x4b90ce(0x122)](_0x4b90ce(0x205)))logHistory(_0x4b90ce(0x27e),_0x5f02c3+'\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange'),logHistory(_0x4b90ce(0x27e),_0x4b90ce(0x11c)),await killBot();else{if(_0x116e86[_0x4b90ce(0xde)]()[_0x4b90ce(0x122)](_0x4b90ce(0xf8)))logHistory(_0x4b90ce(0x27e),_0x4b90ce(0x248)+_0x1335e4),logger[_0x4b90ce(0x138)](_0x4b90ce(0xe2),_0x116e86);else{if(_0x116e86 instanceof ccxt[_0x4b90ce(0x175)]){_0x58fcff=_0x5f02c3+'\x20exchange\x20error:\x20'+_0x116e86['toString']();if(_0x1335e4)_0x58fcff+=_0x4b90ce(0xc8)+_0x1335e4;await pauseBot(undefined,_0x58fcff,_0x116e86);}else{_0x58fcff=_0x4b90ce(0x21a)+_0x116e86[_0x4b90ce(0xde)]();if(_0x1335e4)_0x58fcff+=_0x4b90ce(0xc8)+_0x1335e4;await pauseBot(undefined,_0x58fcff);}}}}}}}}}}}}}}}}function decryptRSA(_0x51e374,_0x2f1a1f){const _0x10849b=_0x184583,_0x459e85=forge[_0x10849b(0x21e)][_0x10849b(0x20a)](_0x51e374),_0x3a25c6=_0x459e85[_0x10849b(0x10d)](forge[_0x10849b(0x239)][_0x10849b(0x14e)](_0x2f1a1f),_0x10849b(0x105),{'md':forge['md'][_0x10849b(0x1a0)][_0x10849b(0x216)](),'mgf1':{'md':forge['md'][_0x10849b(0x1a0)][_0x10849b(0x216)]()}});return _0x3a25c6;}async function withRetry(_0x317d36,_0x188670){const _0x4fbebd=_0x184583;let _0x3c4c3e=![],_0x341aa1=0x0,_0x1a5c2b,_0x3aef28;while(_0x341aa1<maxRetries){try{_0x1a5c2b=await _0x188670();break;}catch(_0x185672){_0x3aef28=_0x185672,!_0x3c4c3e?(_0x3c4c3e=!![],logger['debug']('RETRY\x20-\x20Error\x20in\x20'+_0x317d36+':',_0x185672[_0x4fbebd(0xde)]())):await sleep(retryInterval);}_0x341aa1++;}if(_0x341aa1==0x0)return _0x1a5c2b;if(_0x341aa1>=maxRetries)throw _0x3aef28;else return logger['debug'](_0x4fbebd(0x13e)+_0x341aa1+_0x4fbebd(0x104)),_0x1a5c2b;}function formatResult(_0x4bd73a,_0x27230e){return parseFloat(_0x4bd73a['toFixed'](_0x27230e));}function formatResultTruncate(_0x427620,_0x56d7ad){const _0x28c34f=_0x184583;let _0x4a4f48=formatResultString(_0x427620,0xa),_0x4d7d64=_0x4a4f48[_0x28c34f(0x102)]('.');return _0x4d7d64!=-0x1&&(_0x4a4f48=_0x4a4f48[_0x28c34f(0x13a)](0x0,_0x4d7d64+_0x56d7ad+0x1)),Number(_0x4a4f48);}function formatResultString(_0x2e35fb,_0x2d9456){const _0x12e335=_0x184583;let _0x5f4c71;if(!(''+_0x2e35fb)[_0x12e335(0x122)]('e'))_0x5f4c71=+(Math[_0x12e335(0xf7)](_0x2e35fb+'e+'+_0x2d9456)+'e-'+_0x2d9456);else{let _0x414223=(''+_0x2e35fb)['split']('e'),_0x1fa3d5='';+_0x414223[0x1]+_0x2d9456>0x0&&(_0x1fa3d5='+'),_0x5f4c71=+(Math[_0x12e335(0xf7)](+_0x414223[0x0]+'e'+_0x1fa3d5+(+_0x414223[0x1]+_0x2d9456))+'e-'+_0x2d9456);}return Number(_0x5f4c71)['toFixed'](_0x2d9456);}function getServerTime(){const _0x3a7de4=_0x184583,_0x33912c=new Date();return _0x33912c['getFullYear']()+'/'+(_0x33912c[_0x3a7de4(0x291)]()+0x1)[_0x3a7de4(0xde)]()[_0x3a7de4(0xbe)](0x2,'0')+'/'+_0x33912c[_0x3a7de4(0xf1)]()[_0x3a7de4(0xde)]()[_0x3a7de4(0xbe)](0x2,'0')+'\x20'+_0x33912c[_0x3a7de4(0x130)]()[_0x3a7de4(0xde)]()['padStart'](0x2,'0')+':'+_0x33912c[_0x3a7de4(0x246)]()[_0x3a7de4(0xde)]()[_0x3a7de4(0xbe)](0x2,'0')+':'+_0x33912c[_0x3a7de4(0x160)]()['toString']()[_0x3a7de4(0xbe)](0x2,'0');}function getTimeStamp(){const _0x21d9c2=_0x184583,_0x3525a0=shiftedTime();return _0x3525a0['getFullYear']()+'/'+(_0x3525a0[_0x21d9c2(0x291)]()+0x1)[_0x21d9c2(0xde)]()['padStart'](0x2,'0')+'/'+_0x3525a0[_0x21d9c2(0xf1)]()['toString']()[_0x21d9c2(0xbe)](0x2,'0')+'\x20'+_0x3525a0['getHours']()[_0x21d9c2(0xde)]()[_0x21d9c2(0xbe)](0x2,'0')+':'+_0x3525a0[_0x21d9c2(0x246)]()[_0x21d9c2(0xde)]()[_0x21d9c2(0xbe)](0x2,'0')+':'+_0x3525a0[_0x21d9c2(0x160)]()['toString']()[_0x21d9c2(0xbe)](0x2,'0');}function getDate(){const _0x327520=_0x184583,_0x3d554e=shiftedTime();return _0x3d554e[_0x327520(0x134)]()+'/'+(_0x3d554e[_0x327520(0x291)]()+0x1)[_0x327520(0xde)]()[_0x327520(0xbe)](0x2,'0')+'/'+_0x3d554e[_0x327520(0xf1)]()[_0x327520(0xde)]()['padStart'](0x2,'0');}function getHour(){const _0x108c38=_0x184583,_0x509cdf=shiftedTime();return _0x509cdf[_0x108c38(0x130)]()[_0x108c38(0xde)]()['padStart'](0x2,'0');}function sleep(_0x20ee78){return new Promise(_0x5489fb=>setTimeout(_0x5489fb,_0x20ee78));}function shiftedTime(){const _0x540124=_0x184583,_0x3045c7=new Date();let _0x4bf2e7=_0x3045c7;if(config&&config['timeshift']!==0x0)_0x4bf2e7=fns[_0x540124(0xfe)](_0x3045c7,{'hours':config[_0x540124(0x232)]});return _0x4bf2e7;}function timer(_0xd5af92){const _0x16ee21=_0x184583,_0x5c9d77=new Date();!lasttime?console[_0x16ee21(0x16c)](getTimeStamp()+':\x20timer\x20>',_0xd5af92,_0x5c9d77):console[_0x16ee21(0x16c)](getTimeStamp()+_0x16ee21(0x16f),_0xd5af92,(_0x5c9d77-lasttime)/0x3e8),lasttime=_0x5c9d77;}