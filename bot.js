const _0x429b06=_0x2d2a;(function(_0x138170,_0x3ac8a0){const _0x3efd46=_0x2d2a,_0x292cd9=_0x138170();while(!![]){try{const _0xc40791=-parseInt(_0x3efd46(0x134))/0x1*(parseInt(_0x3efd46(0x288))/0x2)+-parseInt(_0x3efd46(0x279))/0x3+parseInt(_0x3efd46(0xfb))/0x4*(-parseInt(_0x3efd46(0x12e))/0x5)+parseInt(_0x3efd46(0x25f))/0x6+parseInt(_0x3efd46(0x166))/0x7+parseInt(_0x3efd46(0x187))/0x8*(parseInt(_0x3efd46(0x1d2))/0x9)+-parseInt(_0x3efd46(0x25a))/0xa*(-parseInt(_0x3efd46(0x21c))/0xb);if(_0xc40791===_0x3ac8a0)break;else _0x292cd9['push'](_0x292cd9['shift']());}catch(_0x299718){_0x292cd9['push'](_0x292cd9['shift']());}}}(_0x4243,0x9820a));const _0x848763=function(){let _0x1e5f3f=!![];return function(_0x10576e,_0x61e9e2){const _0x5b264f=_0x1e5f3f?function(){const _0x377bac=_0x2d2a;if(_0x61e9e2){const _0x32fd20=_0x61e9e2[_0x377bac(0x174)](_0x10576e,arguments);return _0x61e9e2=null,_0x32fd20;}}:function(){};return _0x1e5f3f=![],_0x5b264f;};}(),_0x36e1ac=_0x848763(this,function(){const _0x325c66=_0x2d2a;return _0x36e1ac[_0x325c66(0x144)]()['search'](_0x325c66(0x1cf))[_0x325c66(0x144)]()[_0x325c66(0xff)](_0x36e1ac)[_0x325c66(0x2a0)]('(((.+)+)+)+$');});_0x36e1ac();'use strict';const ccxt=require('ccxt'),low=require(_0x429b06(0x129)),FileSync=require(_0x429b06(0x226)),fs=require('fs'),fns=require(_0x429b06(0x19b)),forge=require(_0x429b06(0x162)),util=require(_0x429b06(0x1b0)),argv=require('yargs/yargs')(process[_0x429b06(0x249)][_0x429b06(0x121)](0x2))[_0x429b06(0x249)],path=require(_0x429b06(0x239)),axios=require(_0x429b06(0x228));let exchange,gTicker={},gChange={};const usdBasecoins=[_0x429b06(0x1bb),_0x429b06(0x200),_0x429b06(0x1ec),'USDT','USDC',_0x429b06(0x1e6)],excludedExchanges=[_0x429b06(0x27b)],debugging=argv['d']||![];let pnlGenerationNeeded=argv['r']||![],config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x429b06(0x1be)]({'LOCKED':0x0,'UNLOCKING':0x1,'UNLOCKED':0x2});let lockOrders=ORDERS['UNLOCKED'],validateOrdersState,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotIntervalShort=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0x429b06(0x2b4)+pauseBotInterval/0xea60+_0x429b06(0x152),maxPauseRetries=0x6,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,watchTransactionsInterval=0x3c*0x3e8,schedulerInterval=0x3c*0x3c*0x3e8,retryInterval=0x3e8,maxRetries=0x5,logPageSize=0x14,defaultFee=0.003;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidOrdersInitialTimeout,pidOrdersTimeout,botPaused=![],transactionDetectionOngoing=![],lastCoinsToBalance='',exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x5dc,balanceUpdateRetries=0x5;let enableFiatToggle;const serverversion=require(_0x429b06(0xfd))[_0x429b06(0x26a)],environment=require(_0x429b06(0xfd))['environment']||'production',botID=process[_0x429b06(0x249)][0x2]||'001',pattern=/^[0-9]{3}$/;!pattern[_0x429b06(0x12a)](botID)&&(console['log'](_0x429b06(0x2bc)+botID+_0x429b06(0x15d)),killBot());const userID=process[_0x429b06(0x249)][0x3]||'',configpath=userID?_0x429b06(0x1b1)+userID+'/':'./config/',logspath=userID?_0x429b06(0x1fa)+userID+'/':_0x429b06(0x1fa),loggerfile=fs[_0x429b06(0x246)](logspath+_0x429b06(0x21d),{'flags':'a'});!fs['existsSync'](configpath)&&fs[_0x429b06(0x1bd)](configpath);!fs[_0x429b06(0x137)](logspath)&&fs[_0x429b06(0x1bd)](logspath);const configfile=configpath+_0x429b06(0x22b)+botID+_0x429b06(0x256),logfile=configpath+'bot-'+botID+_0x429b06(0x126),performancefile=configpath+'bot-'+botID+_0x429b06(0x149),coinresultsfile=configpath+_0x429b06(0x22b)+botID+_0x429b06(0x133),settingsfile=configpath+_0x429b06(0x1a6),securefile=configpath+'bb-secure.json',configbackuppath=configpath+_0x429b06(0x15a),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x429b06(0x2b6)]({'logs':[],'version':serverversion})[_0x429b06(0x1c6)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x429b06(0x2b6)]({'data':[],'version':serverversion})[_0x429b06(0x1c6)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig['defaults']({'bot':[],'version':serverversion})[_0x429b06(0x1c6)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x429b06(0x2b6)]({'coins':{},'version':serverversion})[_0x429b06(0x1c6)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0,settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x530eb0=>{console['log'](_0x530eb0);},'simple':_0x52732f=>{const _0xe72500=_0x429b06;console['log'](_0x52732f),loggerfile[_0xe72500(0x1c6)](util['format'](_0x52732f)+'\x0a');},'full':async(_0xac82ec,_0x41f596='')=>{const _0x476edd=_0x429b06;let _0x413c38;if(config[_0x476edd(0x259)])_0x413c38=getTimeStamp()+':\x20'+config['botname']+_0x476edd(0x1ff)+_0xac82ec;else _0x413c38=getTimeStamp()+_0x476edd(0x280)+botID+_0x476edd(0x1ff)+_0xac82ec;console['log'](_0x413c38),loggerfile['write'](util[_0x476edd(0x28d)](_0x413c38)+'\x0a'),_0x41f596&&(console['log'](_0x41f596),loggerfile['write'](util[_0x476edd(0x28d)](_0x41f596)+'\x0a'));},'debug':async(_0x1e5d2e,_0x171c9a='')=>{const _0x5cb1e7=_0x429b06;let _0x37bd56;if(config[_0x5cb1e7(0x259)])_0x37bd56=getTimeStamp()+':\x20'+config[_0x5cb1e7(0x1d3)]+_0x5cb1e7(0x1ad)+_0x1e5d2e;else _0x37bd56=getTimeStamp()+':\x20Bot\x20'+botID+'\x20>\x20[DEBUG]\x20'+_0x1e5d2e;if(debugging)console['log'](_0x37bd56);loggerfile[_0x5cb1e7(0x1c6)](util['format'](_0x37bd56)+'\x0a');if(_0x171c9a){if(debugging)console['log'](_0x171c9a);loggerfile['write'](util['format'](_0x171c9a)+'\x0a');}}};process['on']('uncaughtException',function(_0x29cabc){const _0x16c065=_0x429b06;handleError(_0x29cabc[_0x16c065(0x217)],_0x16c065(0x107));});settings[_0x429b06(0x128)]!=config[_0x429b06(0x128)]&&updateTimeshift(settings[_0x429b06(0x128)]);settings[_0x429b06(0x116)]!=config[_0x429b06(0x116)]&&updateOnepagemode(settings[_0x429b06(0x116)]);(settings[_0x429b06(0x2b5)]&&!config['marketcapApi']||!settings[_0x429b06(0x2b5)]&&config[_0x429b06(0x2b5)])&&updateMarketcapApi(settings[_0x429b06(0x2b5)]);process[_0x429b06(0x164)]({'started':_0x429b06(0x1ea)},_0x585865=>{}),initializeProcessListeners();function proxyEmit(_0xea2553,_0x4fe4d3=null){process['send']({'function':_0xea2553,'args':_0x4fe4d3},_0x2e3845=>{});}function initializeProcessListeners(){process['on']('message',_0x1ec4a2=>{const _0x3470de=_0x2d2a;switch(Object[_0x3470de(0x123)](_0x1ec4a2)[0x0]){case _0x3470de(0x128):_0x1ec4a2[_0x3470de(0x128)]!=undefined&&(settings['timeshift']=_0x1ec4a2['timeshift'],updateTimeshift(settings[_0x3470de(0x128)]));break;case _0x3470de(0x116):_0x1ec4a2[_0x3470de(0x116)]!=undefined&&(settings[_0x3470de(0x116)]=_0x1ec4a2[_0x3470de(0x116)],updateOnepagemode(settings[_0x3470de(0x116)]));break;case'marketcapApi':_0x1ec4a2[_0x3470de(0x2b5)]!=undefined&&(settings[_0x3470de(0x2b5)]=_0x1ec4a2[_0x3470de(0x2b5)],updateMarketcapApi(settings['marketcapApi']));break;case _0x3470de(0x24e):_0x1ec4a2['bots']!=undefined&&(bots=JSON[_0x3470de(0x245)](_0x1ec4a2['bots']),proxyEmit(_0x3470de(0x24e),bots));break;case'function':switch(_0x1ec4a2[_0x3470de(0x168)]){case _0x3470de(0xf6):initclient();break;case'toggleBotMode':toggleBotMode();break;case _0x3470de(0x167):emitHistory(_0x1ec4a2['args']);break;case _0x3470de(0x114):deleteHistoryAlerts(_0x1ec4a2[_0x3470de(0x2aa)]);break;case _0x3470de(0x2a8):getPortfolio(_0x1ec4a2[_0x3470de(0x2aa)]);break;case'storeConfiguration':storeConfiguration(_0x1ec4a2['args']);break;case _0x3470de(0x2a5):storeHeadless(_0x1ec4a2[_0x3470de(0x2aa)]);break;case _0x3470de(0x1d6):storeFiat(_0x1ec4a2[_0x3470de(0x2aa)]);break;case'resetHistory':resetHistory();break;case _0x3470de(0x29e):getStartingBalances(getNormalizedPerformance());break;case _0x3470de(0x113):placeOrder(_0x1ec4a2['args']);break;case _0x3470de(0x177):cancelLoading();break;case'showConfig':showConfig();break;case'sendMetricsTelegram':sendMetricsTelegram();break;case _0x3470de(0x175):sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x281e6b=![]){const _0x4c60b8=_0x429b06;logger['debug'](_0x4c60b8(0x1ac)+(_0x281e6b?_0x4c60b8(0x1b9):_0x4c60b8(0x1f6))+_0x4c60b8(0x223)+config[_0x4c60b8(0x109)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x281e6b)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x4c60b8(0x198)]!=''&&config[_0x4c60b8(0x198)]!=_0x4c60b8(0x145)){loadingProgress=0x0;if(_0x281e6b){await initExchange();const _0x25c8fa=await testAPI();if(!_0x25c8fa)return;await loadSymbols(),loadingProgress=0x1,setStableCoins(),proxyEmit(_0x4c60b8(0x18f),emittedConfiguration()),initialPerformanceStored=![];}const _0x291195=await getCoins();[currentCoins,currentCoinsAll]=_0x291195,setBlockTransactionDetection(![]),startScheduler(),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x4c60b8(0x15e)]('Loading\x20completed'),getBalances(![]),await updateOpenOrders();if(lastOrders['length']==0x0&&allOpenOrders[_0x4c60b8(0x196)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(pnlGenerationNeeded)await generatePnL();}}async function resumeBot(_0x3de8cb=![]){const _0x5936bc=_0x429b06;logger[_0x5936bc(0x15e)](_0x5936bc(0x169)+(_0x3de8cb?_0x5936bc(0x23a):'complete')+_0x5936bc(0x2a4)+config[_0x5936bc(0x109)]);if(pidBalances)clearTimeout(pidBalances);if(_0x3de8cb){getBalances();return;}coinsLoaded=![];if(config[_0x5936bc(0x198)]!=''&&config[_0x5936bc(0x198)]!='***'){loadingProgress=0x1;const _0x5c7d25=await getCoins();[currentCoins,currentCoinsAll]=_0x5c7d25,setBlockTransactionDetection(![]),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x5936bc(0x15e)]('Loading\x20completed'),getBalances(![]),await updateOpenOrders();if(lastOrders['length']==0x0&&allOpenOrders[_0x5936bc(0x196)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();}}async function getMarketCap(_0x2abc0a){const _0x4f916c=_0x429b06;let _0x5eaafe=![];if(_0x2abc0a)_0x5eaafe=!![];const _0x9af47f=_0x5eaafe?_0x2abc0a:currentCoins,_0x851915=_0x9af47f[_0x4f916c(0x171)](_0xa6abc2=>_0xa6abc2['coin']);if(!config[_0x4f916c(0x2b5)]||!_0x5eaafe&&!config['marketcapEnabled']||_0x851915[_0x4f916c(0x196)]==0x0)return;let _0x1fb8d8=null;try{_0x1fb8d8=await axios['get']('https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest',{'headers':{'X-CMC_PRO_API_KEY':settings[_0x4f916c(0x2b5)]},'params':{'symbol':_0x851915[_0x4f916c(0x144)]()}});}catch(_0xade2f0){_0x1fb8d8=null,_0xade2f0[_0x4f916c(0x144)]()[_0x4f916c(0x1c4)](_0x4f916c(0x220))?(config[_0x4f916c(0x2b5)]=![],updateConfig(),proxyEmit('configuration',emittedConfiguration()),logHistory(_0x4f916c(0x233),_0x4f916c(0xf5))):(logHistory('error',_0x4f916c(0x1da)+schedulerInterval/(0x3c*0x3e8)+_0x4f916c(0x152)),logger[_0x4f916c(0x15e)]('Error\x20details:',_0xade2f0[_0x4f916c(0x144)]()+'\x20-\x20'+_0xade2f0['code']));}let _0x43f993=!![];if(_0x1fb8d8){let _0x39799d=0x0;const _0x30f0d1=_0x1fb8d8[_0x4f916c(0x1d8)];_0x851915[_0x4f916c(0x1e9)](_0xd52f96=>{const _0x49ec30=_0x4f916c;if(_0x30f0d1[_0x49ec30(0x1d8)][_0xd52f96][0x0]&&_0x30f0d1[_0x49ec30(0x1d8)][_0xd52f96][0x0][_0x49ec30(0x163)][_0x49ec30(0x1bb)][_0x49ec30(0x257)])_0x39799d+=_0x30f0d1[_0x49ec30(0x1d8)][_0xd52f96][0x0][_0x49ec30(0x163)][_0x49ec30(0x1bb)][_0x49ec30(0x257)];else{if(!['EUR',_0x49ec30(0x1bb)][_0x49ec30(0x1c4)](_0xd52f96)){if(_0x5eaafe)logHistory('error','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20for\x20'+_0xd52f96+_0x49ec30(0x194));else{const _0x2ef4f6=config[_0x49ec30(0x25b)][_0x49ec30(0x130)](_0x49c80d=>_0x49c80d[_0x49ec30(0x108)]==_0xd52f96);_0x2ef4f6&&!_0x2ef4f6[_0x49ec30(0x1a4)]&&_0x2ef4f6[_0x49ec30(0x1ce)]==-0x1&&(_0x43f993=![],logHistory('error',_0x49ec30(0x274)),logger[_0x49ec30(0x15e)]('CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20for\x20'+_0xd52f96));}}}});if(!_0x43f993)return;_0x851915['forEach'](_0x18d815=>{const _0x48b8f3=_0x4f916c,_0x4fbf28=_0x30f0d1['data'][_0x18d815][0x0]?_0x30f0d1['data'][_0x18d815][0x0][_0x48b8f3(0x163)][_0x48b8f3(0x1bb)]['market_cap']:0x0;if(_0x5eaafe){const _0x59714d=_0x2abc0a[_0x48b8f3(0x130)](_0x27d5a0=>_0x27d5a0[_0x48b8f3(0x108)]==_0x18d815);_0x59714d&&(_0x59714d[_0x48b8f3(0x1b4)]=_0x4fbf28);}else{const _0x4a575b=currentCoins[_0x48b8f3(0x130)](_0x1aa398=>_0x1aa398[_0x48b8f3(0x108)]==_0x18d815);_0x4a575b&&(_0x4a575b[_0x48b8f3(0x1b4)]=_0x4fbf28);const _0x12b14d=currentCoinsAll['find'](_0x433a78=>_0x433a78[_0x48b8f3(0x108)]==_0x18d815);_0x12b14d&&(_0x12b14d[_0x48b8f3(0x1b4)]=_0x4fbf28);}}),!_0x5eaafe&&updateTargetDistribution();}}function updateTargetDistribution(){const _0x324bf5=_0x429b06,_0xd2a0ef=0x2;let _0x3db43b=0x0,_0x4811b4=0x0,_0x161036=0x0,_0x5ac292=0x0,_0x3f620d=0x0;config[_0x324bf5(0x25b)][_0x324bf5(0x1e9)](_0x39f883=>{const _0x2e9126=_0x324bf5;if(!_0x39f883[_0x2e9126(0x1a4)]){_0x161036++,_0x3db43b+=_0x39f883[_0x2e9126(0x1ce)];if(_0x39f883[_0x2e9126(0x1ce)]===-0x1){_0x3db43b++;const _0x18bd04=currentCoinsAll[_0x2e9126(0x130)](_0x9469fc=>_0x9469fc['coin']==_0x39f883[_0x2e9126(0x108)]);_0x18bd04&&(_0x5ac292+=_0x18bd04[_0x2e9126(0x1b4)],_0x3f620d+=Math[_0x2e9126(0x247)](_0x18bd04['marketcap']));}if(_0x39f883[_0x2e9126(0x1ce)]!==-0x1)_0x4811b4++;}});let _0xfeb31c;const _0x4907b3=0x64-_0x3db43b,_0x1bf55e=_0x161036-_0x4811b4;_0xfeb31c=_0x1bf55e===0x0?_0x3db43b:Math['max'](0x64,_0x3db43b),config[_0x324bf5(0x25b)]['forEach'](_0x444a7b=>{const _0x4eb883=_0x324bf5,_0x9f1d41=currentCoinsAll[_0x4eb883(0x130)](_0x46246c=>_0x46246c[_0x4eb883(0x108)]==_0x444a7b[_0x4eb883(0x108)]);_0x9f1d41&&(_0x444a7b[_0x4eb883(0x1b4)]=_0x9f1d41[_0x4eb883(0x1b4)]);if(!_0x444a7b[_0x4eb883(0x1a4)]){if(_0xfeb31c<=0x64){if(_0x444a7b['slider']===-0x1){if(_0x5ac292!==0x0&&config[_0x4eb883(0x139)]){if(_0x9f1d41){if(config[_0x4eb883(0x139)]==_0x4eb883(0x1b4))_0x444a7b[_0x4eb883(0x29d)]=(_0x4907b3/(_0x5ac292/_0x9f1d41['marketcap']))['toFixed'](_0xd2a0ef);else config['marketcapEnabled']==_0x4eb883(0x1c3)&&(_0x444a7b[_0x4eb883(0x29d)]=(_0x4907b3/(_0x3f620d/Math[_0x4eb883(0x247)](_0x9f1d41[_0x4eb883(0x1b4)])))[_0x4eb883(0x271)](_0xd2a0ef));}}}}}}),updateConfig();}function updateConfig(){const _0x5c1c27=_0x429b06;let _0x2296c2=dbConfig[_0x5c1c27(0x186)]('bot')[_0x5c1c27(0x130)]({'botID':botID})['value']();_0x2296c2&&dbConfig[_0x5c1c27(0x186)](_0x5c1c27(0x1d7))[_0x5c1c27(0x130)]({'botID':botID})['assign'](config)['write']();}function logMemory(){const _0x5ee9d1=_0x429b06;if(environment!='staging')return;const _0x107b08=process['memoryUsage']()[_0x5ee9d1(0x1ab)]/0x400/0x400;logger['debug']('process\x20'+process[_0x5ee9d1(0x138)]+_0x5ee9d1(0x1fe)+formatResult(_0x107b08,0x1)+_0x5ee9d1(0x28e));}async function startScheduler(){const _0x527d62=_0x429b06,_0x574649=shiftedTime()[_0x527d62(0x1c1)]();getMarketCap(),loadSymbols(),_0x574649==0x1&&logMemory(),await sleep(schedulerInterval),startScheduler();}async function restartBot(_0xcae383=![]){const _0x497643=_0x429b06;logger[_0x497643(0x15e)]('Initiating\x20bot\x20restart');if(!_0xcae383)while(lockOrders!=ORDERS[_0x497643(0x10c)]||coolingDown){await sleep(0x3e8);}process[_0x497643(0x164)]({'stop':'restart'},_0x508341=>{});}async function initExchange(_0x5548d8=config[_0x429b06(0x109)],_0x494dd2=config[_0x429b06(0x198)],_0x59d95f=config['apiSecret'],_0xe4a2be=config[_0x429b06(0x2a6)],_0x33f4eb=config[_0x429b06(0x176)]){const _0x3b1281=_0x429b06;if(exchange){logger[_0x3b1281(0x15e)](_0x3b1281(0x142));return;}logger[_0x3b1281(0x15e)](_0x3b1281(0x208));!supportedExchanges()[_0x3b1281(0x1c4)](_0x5548d8)&&(logHistory(_0x3b1281(0x233),_0x3b1281(0x170)+_0x5548d8+_0x3b1281(0x1aa)),killBot());const _0x47fdd9=ccxt[_0x3b1281(0x27d)][_0x5548d8[_0x3b1281(0x27c)]()];exchange=new _0x47fdd9({'apiKey':_0x494dd2,'secret':_0x59d95f,'options':{'defaultType':_0x3b1281(0x1e0)}});if(_0xe4a2be)exchange[_0x3b1281(0x21e)]=_0xe4a2be;if(exchange[_0x3b1281(0x148)][_0x3b1281(0x176)])exchange[_0x3b1281(0x191)](_0x33f4eb);}function updateExchange(_0x5db259,_0x5b89c6,_0x27f6c5=null){const _0x23747e=_0x429b06;exchange[_0x23747e(0x198)]=_0x5db259,exchange[_0x23747e(0x281)]=_0x5b89c6,exchange['password']=_0x27f6c5,logger['debug'](_0x23747e(0x2b2));}function setStableCoins(){const _0x446cc0=_0x429b06;let _0x5e67eb=config[_0x446cc0(0x102)]==_0x446cc0(0x282)?_0x446cc0(0x282):config[_0x446cc0(0x102)]==_0x446cc0(0x201)?'PAXG':_0x446cc0(0x258),_0x299c43=allSymbols[_0x446cc0(0x1c4)](_0x5e67eb+_0x446cc0(0x20b))?_0x446cc0(0x1bb):allSymbols['includes'](_0x5e67eb+_0x446cc0(0x160))?_0x446cc0(0x19f):_0x446cc0(0x16a),_0x18f422=allSymbols[_0x446cc0(0x1c4)](_0x5e67eb+_0x446cc0(0x15c))?'EUR':_0x299c43;enableFiatToggle=!![],_0x299c43==_0x446cc0(0x16a)&&(enableFiatToggle=![],storeFiat(_0x446cc0(0x16a))),_0x18f422!=_0x446cc0(0x16a)&&(enableFiatToggle=![],storeFiat(_0x446cc0(0x1bb))),stablecoins={'eur':{'coin':''+_0x5e67eb+_0x18f422,'symbol':_0x5e67eb+'/'+_0x18f422},'usd':{'coin':''+_0x5e67eb+_0x299c43,'symbol':_0x5e67eb+'/'+_0x299c43}};}async function initwsCcxt(){const _0x4839c3=_0x429b06;initCycle++;const _0x4fe49c=initCycle;let _0x28bca4=[];config[_0x4839c3(0x25b)]['forEach'](_0x590b93=>{const _0x5c4e07=_0x4839c3;if(!_0x590b93[_0x5c4e07(0x1a4)]&&_0x590b93[_0x5c4e07(0x108)]!=config[_0x5c4e07(0x102)])_0x28bca4['push'](_0x590b93['symbol']);});if(!_0x28bca4['includes'](stablecoins[_0x4839c3(0x263)][_0x4839c3(0x231)]))_0x28bca4['push'](stablecoins['eur'][_0x4839c3(0x231)]);if(!_0x28bca4['includes'](stablecoins[_0x4839c3(0x11f)]['symbol']))_0x28bca4[_0x4839c3(0x22f)](stablecoins[_0x4839c3(0x11f)]['symbol']);loadCoins(_0x28bca4),_0x28bca4=validateSymbols(_0x28bca4);const _0x1b2d2f=async _0x312672=>{const _0x5a729a=_0x4839c3;let _0x424f73;try{const _0x57404e=await getTickers(_0x312672);Object[_0x5a729a(0x28c)](_0x57404e)[_0x5a729a(0x1e9)](_0xd8f776=>{const _0x952ac0=_0x5a729a;_0x424f73=_0xd8f776[0x1][_0x952ac0(0x231)],gTicker[noslash(_0x424f73)]=_0xd8f776[0x1]['last'],gChange[_0x424f73]=_0xd8f776[0x1]['percentage'];});}catch(_0x2da17f){await handleError(_0x2da17f,'initTickers()',_0x424f73);}},_0x378afe=async _0x47cc27=>{const _0x567795=_0x4839c3;while(initCycle==_0x4fe49c){if(!botPaused)try{const _0x9f2c3c=await exchange['watchTrades'](_0x47cc27);gTicker[noslash(_0x9f2c3c[0x0][_0x567795(0x231)])]=_0x9f2c3c[0x0][_0x567795(0x1b6)];}catch(_0x22ae1e){if(!exchangeStopped)await handleError(_0x22ae1e,_0x567795(0x1f2),_0x47cc27);}else await sleep(0x64);}},_0x1f0c14=async _0xbbe680=>{const _0xcce95=_0x4839c3;while(initCycle==_0x4fe49c){if(!botPaused)try{const _0x1cdc01=await exchange[_0xcce95(0x161)](_0xbbe680),_0x34b144=_0x1cdc01[_0xcce95(0x26c)]();gTicker[noslash(_0x34b144[_0xcce95(0x231)])]=_0x34b144[_0xcce95(0x1b6)];}catch(_0x4989f7){if(!exchangeStopped)await handleError(_0x4989f7,_0xcce95(0x203),_0xbbe680[_0xcce95(0x144)]());}else await sleep(0x64);}},_0x1f9702=async _0x2517ca=>{const _0xedcbf5=_0x4839c3;while(initCycle==_0x4fe49c){if(!botPaused){let _0x308c96;try{await sleep(0x3c*0x3e8);const _0x2aefff=await getTickers(_0x2517ca);Object['entries'](_0x2aefff)[_0xedcbf5(0x1e9)](_0x29035e=>{const _0x20db3b=_0xedcbf5;_0x308c96=_0x29035e[0x1][_0x20db3b(0x231)],gChange[_0x308c96]=_0x29035e[0x1][_0x20db3b(0x1c9)];});}catch(_0x28e323){if(!exchangeStopped)await handleError(_0x28e323,'fetchTickers()',_0x308c96);}}else await sleep(0x64);}},_0x316770=async _0x4c3866=>{const _0x546d25=_0x4839c3;while(initCycle==_0x4fe49c){if(!botPaused)try{const _0x2287fa=await exchange[_0x546d25(0x20d)](_0x4c3866);initCycle==_0x4fe49c&&_0x2287fa[_0x546d25(0x1e9)](_0x3e004e=>{updateNumberCoinsCcxt(_0x3e004e);});}catch(_0x342947){if(!exchangeStopped)await handleError(_0x342947,_0x546d25(0x16f));}else await sleep(0x64);}};_0x1b2d2f(_0x28bca4),_0x1f9702(_0x28bca4),exchange[_0x4839c3(0x148)][_0x4839c3(0x161)]&&!(config['exchange']==_0x4839c3(0x135)&&_0x28bca4['length']>0xa)?_0x1f0c14(_0x28bca4):_0x28bca4[_0x4839c3(0x1e9)](_0x5c6ec6=>{_0x378afe(_0x5c6ec6);}),_0x28bca4[_0x4839c3(0x1e9)](_0x304b08=>{_0x316770(_0x304b08);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x522aff){const _0x265294=_0x429b06;let _0x2b363e={};try{if(config[_0x265294(0x109)]!=_0x265294(0x1f9))_0x2b363e=await exchange[_0x265294(0x21f)](_0x522aff);else for(const _0x2b5197 of _0x522aff){const _0xee0ef4=await exchange[_0x265294(0x221)](_0x2b5197);_0x2b363e[_0x2b5197]=_0xee0ef4;}return _0x2b363e;}catch(_0x307fb9){throw _0x307fb9;}}function setBlockTransactionDetection(_0x70fa38){const _0x474030=_0x429b06;blockTransactionDetection=_0x70fa38,logger[_0x474030(0x15e)]('Block\x20transaction\x20detection:\x20'+blockTransactionDetection);}async function detectLiquidityChange(_0x1d4363=0x0){const _0x45d0f3=_0x429b06;transactionDetectionOngoing=!![];try{const _0x1bb6b6=await getCoins(_0x1d4363),[_0x4593dc,_0x4e3f00]=_0x1bb6b6;let _0x359d85=[];currentCoins['forEach'](_0x1b2e84=>{const _0x120f41=_0x2d2a,_0xf36c74=_0x4593dc['find'](_0x38118c=>_0x38118c[_0x120f41(0x108)]==_0x1b2e84[_0x120f41(0x108)]);if(_0xf36c74){if(_0x1b2e84[_0x120f41(0x20c)]!=_0xf36c74[_0x120f41(0x20c)]){let _0x59b5ad;if(_0x1b2e84[_0x120f41(0x108)]!=config[_0x120f41(0x102)]){const _0x299d75=gTicker[noslash(_0x1b2e84['symbol'])];_0x59b5ad=_0x1b2e84[_0x120f41(0x2b3)]?0x1/_0x299d75:_0x299d75;}else _0x59b5ad=0x1;_0x359d85[_0x120f41(0x22f)]({'coin':_0x1b2e84[_0x120f41(0x108)],'symbol':_0x1b2e84[_0x120f41(0x231)],'price':_0x59b5ad,'number':Number(formatResult(_0xf36c74['number']-_0x1b2e84[_0x120f41(0x20c)],0x8)),'basecoinvalue':_0x59b5ad*(_0xf36c74[_0x120f41(0x20c)]-_0x1b2e84[_0x120f41(0x20c)])});}}});if(_0x359d85['length']>0x0&&!blockTransactionDetection){for(const _0x54df5d of _0x359d85){if(config[_0x45d0f3(0x2bd)]){logger['debug'](_0x45d0f3(0x296)+_0x54df5d['basecoinvalue']+_0x45d0f3(0x11b)+lastFees[_0x45d0f3(0xfa)]);if(lastFees[_0x45d0f3(0xfa)]==0x0||Math[_0x45d0f3(0x195)](_0x54df5d[_0x45d0f3(0x287)])>lastFees[_0x45d0f3(0xfa)]*0x3){if(config[_0x45d0f3(0x2bd)]==_0x45d0f3(0x292)){delete _0x54df5d[_0x45d0f3(0x231)],delete _0x54df5d[_0x45d0f3(0x287)];let _0x5115ab=[],_0x5adeba=[...config[_0x45d0f3(0x26b)]]||[],_0x197e48=config[_0x45d0f3(0x26b)];_0x5adeba['sort']((_0x4e3173,_0x4dec84)=>_0x4e3173[_0x45d0f3(0x212)]>_0x4dec84[_0x45d0f3(0x212)]?-0x1:_0x4dec84[_0x45d0f3(0x212)]>_0x4e3173[_0x45d0f3(0x212)]?0x1:0x0);const _0x325d3b=getDate();if(_0x5adeba[0x0]){const _0x3f5942=fns[_0x45d0f3(0x245)](_0x5adeba[0x0][_0x45d0f3(0x212)],'yyyy/MM/dd',new Date()),_0x84be4c=fns['parse'](_0x325d3b,'yyyy/MM/dd',new Date());if(fns['isEqual'](_0x3f5942,_0x84be4c)){_0x5115ab=_0x5adeba[0x0]['changes'];const _0x18584d=_0x5115ab[_0x45d0f3(0x130)](_0x21d2fe=>_0x21d2fe[_0x45d0f3(0x108)]==_0x54df5d[_0x45d0f3(0x108)]);_0x18584d?(_0x18584d[_0x45d0f3(0x20c)]+=_0x54df5d['number'],_0x18584d[_0x45d0f3(0x20c)]==0x0&&(_0x5115ab=_0x5115ab[_0x45d0f3(0x211)](_0x3f056d=>{const _0x120efc=_0x45d0f3;return _0x3f056d[_0x120efc(0x108)]!=_0x54df5d[_0x120efc(0x108)];}))):_0x5115ab[_0x45d0f3(0x22f)](_0x54df5d);const _0xda941b=_0x197e48['find'](_0x478e21=>_0x478e21[_0x45d0f3(0x212)]==_0x325d3b);_0xda941b[_0x45d0f3(0x1fd)]=_0x5115ab;}else _0x197e48[_0x45d0f3(0x22f)]({'date':_0x325d3b,'changes':[_0x54df5d]});}const _0x26a6b6=_0x197e48[_0x45d0f3(0x130)](_0x1e8135=>_0x1e8135[_0x45d0f3(0x212)]==_0x325d3b);if(_0x26a6b6){let _0x221715=!![];_0x26a6b6[_0x45d0f3(0x1fd)][_0x45d0f3(0x1e9)](_0x6c100d=>{if(_0x6c100d['number']!=0x0)_0x221715=![];}),_0x221715&&(_0x197e48=_0x197e48[_0x45d0f3(0x211)](_0x979b1e=>{return _0x979b1e['date']!=_0x325d3b;}));}let _0x4c39a8=dbConfig[_0x45d0f3(0x186)](_0x45d0f3(0x1d7))[_0x45d0f3(0x130)]({'botID':botID})[_0x45d0f3(0x11a)]();_0x4c39a8&&(dbConfig['get']('bot')[_0x45d0f3(0x130)]({'botID':botID})[_0x45d0f3(0x278)]({'liquidity':_0x197e48})['write'](),config[_0x45d0f3(0x26b)]=_0x197e48);logHistory(_0x45d0f3(0x1d4),_0x45d0f3(0x19c)+Math[_0x45d0f3(0x195)](_0x54df5d[_0x45d0f3(0x20c)])+'\x20'+_0x54df5d[_0x45d0f3(0x108)]+'\x20'+(_0x54df5d['number']>0x0?'added':_0x45d0f3(0x27a))+_0x45d0f3(0x110)),proxyEmit('configuration',emittedConfiguration());const _0x2f6738=getNormalizedPerformance();emitPerformance(_0x2f6738),getStartingBalances(_0x2f6738),logger['debug'](_0x45d0f3(0x295));}else config['autoliquidity']=='switch-manual'&&(config['headless']?(await storeHeadless({'headless':![]}),logHistory('success',_0x45d0f3(0x19c)+Math['abs'](_0x54df5d[_0x45d0f3(0x20c)])+'\x20'+_0x54df5d[_0x45d0f3(0x108)]+'\x20'+(_0x54df5d[_0x45d0f3(0x20c)]>0x0?_0x45d0f3(0x24d):_0x45d0f3(0x27a))+_0x45d0f3(0x184))):logger['debug'](_0x45d0f3(0x19c)+Math[_0x45d0f3(0x195)](_0x54df5d[_0x45d0f3(0x20c)])+'\x20'+_0x54df5d[_0x45d0f3(0x108)]+'\x20'+(_0x54df5d['number']>0x0?_0x45d0f3(0x24d):_0x45d0f3(0x27a))+_0x45d0f3(0x1e8)));}else logger[_0x45d0f3(0x15e)](_0x45d0f3(0x127)+Math[_0x45d0f3(0x195)](_0x54df5d['number'])+'\x20'+_0x54df5d[_0x45d0f3(0x108)]+'\x20'+(_0x54df5d['number']>0x0?'added':_0x45d0f3(0x27a)));}else logger[_0x45d0f3(0x15e)](_0x45d0f3(0x19c)+Math[_0x45d0f3(0x195)](_0x54df5d[_0x45d0f3(0x20c)])+'\x20'+_0x54df5d[_0x45d0f3(0x108)]+'\x20'+(_0x54df5d[_0x45d0f3(0x20c)]>0x0?'added':'removed')+'\x20-\x20auto\x20adjusting\x20liquidity\x20is\x20disabled');}currentCoins=_0x4593dc,currentCoinsAll=_0x4e3f00;}}catch(_0x581bb0){if(!exchangeStopped)await handleError(_0x581bb0,_0x45d0f3(0x23c));}transactionDetectionOngoing=![];}async function watchTransactions(){await sleep(0x14*0x3e8);while(!![]){!botPaused&&!blockTransactionDetection&&coinsLoaded?(detectLiquidityChange(),await sleep(watchTransactionsInterval)):await sleep(0x3e8);}}async function loadSymbols(){const _0x1a008a=_0x429b06;try{markets=await exchange[_0x1a008a(0x18c)](!![]),allSymbols=[],Object['entries'](markets)[_0x1a008a(0x1e9)](_0x12fc26=>{const _0x46e827=_0x1a008a;_0x12fc26[0x1][_0x46e827(0x131)]&&_0x12fc26[0x1][_0x46e827(0x1e0)]&&allSymbols[_0x46e827(0x22f)](_0x12fc26[0x0]);});}catch(_0x32fcb8){markets?logger[_0x1a008a(0x15e)](_0x1a008a(0x1eb)+_0x32fcb8['toString']()):(loading['cancel']=!![],_0x32fcb8[_0x1a008a(0x144)]()[_0x1a008a(0x27c)]()[_0x1a008a(0x1c4)](_0x1a008a(0x20a))||_0x32fcb8[_0x1a008a(0x144)]()[_0x1a008a(0x27c)]()['includes'](_0x1a008a(0x122))?(logHistory('error',_0x1a008a(0xfe)),loading['error']=_0x1a008a(0x159)):handleErrorNoStop(_0x32fcb8,_0x1a008a(0x213),!![]),logHistory(_0x1a008a(0x233),_0x1a008a(0x1cb)),logHistory(_0x1a008a(0x233),_0x1a008a(0x21b)+loadCoinsRetryInterval/0xea60+'\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again'),logger[_0x1a008a(0x15e)](_0x1a008a(0x24c),_0x32fcb8),emitLoadingProgress(),botPaused=!![],await sleep(loadCoinsRetryInterval),restartBot());}}function validateSymbols(_0x1603ca){const _0x5ad451=_0x429b06;let _0x1c19b4=[];return _0x1603ca[_0x5ad451(0x1e9)](_0x28f284=>{const _0x12862d=_0x5ad451;!allSymbols[_0x12862d(0x1c4)](_0x28f284)?(logHistory('error',_0x12862d(0x181)+_0x28f284+_0x12862d(0x1cd)),loading[_0x12862d(0x1b3)]=!![],emitLoadingProgress()):_0x1c19b4[_0x12862d(0x22f)](_0x28f284);}),_0x1c19b4;}async function initclient(){const _0x1ffa4a=_0x429b06;proxyEmit('configuration',emittedConfiguration()),proxyEmit(_0x1ffa4a(0x29f),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x1ffa4a(0x12c),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x5e120b=getNormalizedPerformance();emitPerformance(_0x5e120b),getStartingBalances(_0x5e120b);}async function toggleBotMode(){const _0x106761=_0x429b06;let _0x2d1d40=dbConfig['get'](_0x106761(0x1d7))[_0x106761(0x130)]({'botID':botID})[_0x106761(0x11a)]();if(_0x2d1d40){const _0x345fb6=!_0x2d1d40[_0x106761(0x1e1)];dbConfig[_0x106761(0x186)](_0x106761(0x1d7))[_0x106761(0x130)]({'botID':botID})[_0x106761(0x278)]({'headless':_0x345fb6})['write'](),config['headless']=_0x345fb6,proxyEmit(_0x106761(0x18f),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x283fe8=_0x429b06;process[_0x283fe8(0x164)]({'updatebotmanager':!![]},_0x4e0222=>{}),logger['debug'](_0x283fe8(0x204)+config['headless']);}async function loadCoins(_0x1bfd7c){const _0x4aa660=_0x429b06;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x44a147,_0x53e2b4=0x0,_0x7ebffc=0x0;_0x1bfd7c[_0x4aa660(0x1e9)](_0x24fd0b=>{const _0xa48f5e=_0x4aa660;loading[_0xa48f5e(0x25e)]['push'](_0x24fd0b);}),loadingCanceled=![];let _0x2a9738=![];while(_0x44a147!=_0x1bfd7c[_0x4aa660(0x196)]+maxLoadingProgress){_0x44a147=loadingProgress,_0x1bfd7c[_0x4aa660(0x1e9)](_0x4bf2fb=>{const _0x58d3d9=_0x4aa660;if(gTicker[noslash(_0x4bf2fb)]){loading[_0x58d3d9(0x25e)]=loading[_0x58d3d9(0x25e)][_0x58d3d9(0x211)](_0x25dd49=>_0x25dd49!=_0x4bf2fb);if(!watchedSymbols['includes'](_0x4bf2fb))watchedSymbols[_0x58d3d9(0x22f)](_0x4bf2fb);_0x44a147++;}}),loading[_0x4aa660(0xf7)]=Math[_0x4aa660(0x125)](_0x44a147/(_0x1bfd7c[_0x4aa660(0x196)]+maxLoadingProgress)*0x64);loading[_0x4aa660(0xf7)]!=0x64&&(_0x7ebffc>0x1e*0x5&&(loading[_0x4aa660(0x1b3)]=!![],emitLoadingProgress()),_0x7ebffc>0x78*0x5&&!_0x2a9738&&(_0x2a9738=!![],logHistory(_0x4aa660(0x233),_0x4aa660(0x13b)+loading[_0x4aa660(0x25e)][_0x4aa660(0x255)](',\x20')+_0x4aa660(0x27e)),logHistory(_0x4aa660(0x233),'Pausing\x20for\x20'+loadCoinsRetryInterval/0xea60+'\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again'),loadingCanceled=!![],await sleep(loadCoinsRetryInterval),restartBot()));if(loadingCanceled){loading['cancel']=!![],emitLoadingProgress();break;}else _0x53e2b4!=loading[_0x4aa660(0xf7)]&&(_0x53e2b4=loading[_0x4aa660(0xf7)],emitLoadingProgress()),_0x7ebffc++,await sleep(0xc8);}_0x44a147==_0x1bfd7c[_0x4aa660(0x196)]+maxLoadingProgress&&(coinsLoaded=!![],process['send']({'status':_0x4aa660(0x230),'live':_0x4aa660(0x1ea)},_0x1839ef=>{}),_0x2a9738&&logHistory(_0x4aa660(0x1d4),_0x4aa660(0x1a1)));}function _0x2d2a(_0x2a1377,_0x51011c){const _0x34a5de=_0x4243();return _0x2d2a=function(_0x36e1ac,_0x848763){_0x36e1ac=_0x36e1ac-0xf5;let _0x4243e2=_0x34a5de[_0x36e1ac];return _0x4243e2;},_0x2d2a(_0x2a1377,_0x51011c);}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x3e830f=_0x429b06;proxyEmit('configuration',{...emittedConfiguration(),'configstate':_0x3e830f(0x2b7)});}function emitLoadingProgress(){const _0x3e8430=_0x429b06;proxyEmit(_0x3e8430(0x179),loading);}async function getFiat(){const _0x15977d=_0x429b06;let _0x253685=gTicker[stablecoins[_0x15977d(0x263)][_0x15977d(0x108)]],_0xff0934=gTicker[stablecoins[_0x15977d(0x11f)][_0x15977d(0x108)]];return{'eur':Number(_0x253685),'usd':Number(_0xff0934)};}function capitalize(_0x4ba9e1){const _0x52499e=_0x429b06;return _0x4ba9e1[_0x52499e(0x1db)](0x0,0x1)['toUpperCase']()+_0x4ba9e1[_0x52499e(0x1db)](0x1);}function supportedExchanges(){const _0x52c441=_0x429b06,_0x23bc74=['ws',_0x52c441(0x21f),_0x52c441(0x221),_0x52c441(0x210),_0x52c441(0x20d),'cancelOrder',_0x52c441(0x22d),_0x52c441(0x1c5),_0x52c441(0x2a3)];let _0x55c8f4=[],_0x2fd72f=[],_0x12e8e8=ccxt[_0x52c441(0x27d)][_0x52c441(0x29f)];_0x12e8e8[_0x52c441(0x1e9)](_0x71be3c=>{const _0x13c9f2=_0x52c441;try{const _0xca1488=new ccxt[(_0x13c9f2(0x27d))][_0x71be3c]();_0x2fd72f[_0x13c9f2(0x22f)](_0xca1488);}catch(_0x598d14){}}),_0x2fd72f[_0x52c441(0x1e9)](_0xa6737c=>{const _0x2a98de=_0x52c441;let _0xc29d9f=0x0;_0x23bc74[_0x2a98de(0x1e9)](_0x54e9e0=>{const _0xad7581=_0x2a98de;_0x54e9e0 in _0xa6737c[_0xad7581(0x148)]&&_0xa6737c[_0xad7581(0x148)][_0x54e9e0]&&_0xc29d9f++;}),_0xc29d9f==_0x23bc74[_0x2a98de(0x196)]&&(!excludedExchanges[_0x2a98de(0x1c4)](_0xa6737c['id'])&&_0x55c8f4[_0x2a98de(0x22f)](capitalize(_0xa6737c['id'])));});let _0x50d1e7=[];return _0x12e8e8[_0x52c441(0x1e9)](_0x44a3f5=>{const _0x49d4b0=_0x52c441;_0x44a3f5=capitalize(_0x44a3f5);if(!_0x55c8f4['includes'](_0x44a3f5))_0x50d1e7[_0x49d4b0(0x22f)](_0x44a3f5);}),_0x55c8f4;}function setStartDatePerformance(){const _0x4b540d=_0x429b06;if(config&&config[_0x4b540d(0x26b)][0x0][_0x4b540d(0x1fd)][_0x4b540d(0x196)]!=0x0){const _0x15c68e=config['liquidity'][0x0][_0x4b540d(0x1fd)];dbPerformance[_0x4b540d(0x186)]('data')[_0x4b540d(0x130)]({'date':config[_0x4b540d(0x2ad)]})['assign']({'coins':_0x15c68e})[_0x4b540d(0x1c6)]();}}function calculatePnL(_0x4bd9da,_0x262dda,_0x44e6e4,_0x5882b7,_0x5ec9c8,_0xd739c7){const _0x1bfb2b=_0x429b06;!_0x4bd9da[_0x1bfb2b(0x1c4)]('/'+config['basecoin'])&&(_0x44e6e4=_0x44e6e4==_0x1bfb2b(0x12d)?_0x1bfb2b(0x1a8):_0x1bfb2b(0x12d));!_0xd739c7[_0x262dda]&&(_0xd739c7[_0x262dda]={'number':0x0,'sells':0x0,'buys':0x0,'breakeven':0x0,'realizedPnL':0x0});let _0x30a7fc=0x0,_0x47e40d,_0x474922;if(_0x44e6e4==_0x1bfb2b(0x12d))_0x474922=_0xd739c7[_0x262dda][_0x1bfb2b(0x20c)]*_0xd739c7[_0x262dda][_0x1bfb2b(0x14a)]+_0x5ec9c8*_0x5882b7,_0xd739c7[_0x262dda][_0x1bfb2b(0x20c)]+=_0x5882b7,_0xd739c7[_0x262dda][_0x1bfb2b(0x14a)]=_0xd739c7[_0x262dda]['number']!=0x0?_0x474922/_0xd739c7[_0x262dda]['number']:0x0,_0xd739c7[_0x262dda]['buys']++;else _0x44e6e4==_0x1bfb2b(0x1a8)&&(_0x47e40d=Math[_0x1bfb2b(0x207)](_0xd739c7[_0x262dda]['number'],_0x5882b7),_0x30a7fc=(_0x5ec9c8-_0xd739c7[_0x262dda]['breakeven'])*_0x47e40d,_0x474922=Math[_0x1bfb2b(0x13f)](_0xd739c7[_0x262dda][_0x1bfb2b(0x20c)]*_0xd739c7[_0x262dda][_0x1bfb2b(0x14a)]-_0x47e40d*_0xd739c7[_0x262dda]['breakeven'],0x0),_0xd739c7[_0x262dda][_0x1bfb2b(0x20c)]-=_0x47e40d,_0xd739c7[_0x262dda][_0x1bfb2b(0x14a)]=_0xd739c7[_0x262dda]['number']!=0x0?_0x474922/_0xd739c7[_0x262dda][_0x1bfb2b(0x20c)]:0x0,_0xd739c7[_0x262dda]['realizedPnL']+=_0x30a7fc,_0xd739c7[_0x262dda][_0x1bfb2b(0x1af)]++);return _0x30a7fc;}async function generatePnL(){const _0x17774d=_0x429b06;pnlGenerationNeeded=![],logger[_0x17774d(0x15e)](_0x17774d(0x13d));const _0x3178df=dbLogs['get'](_0x17774d(0x1f5))[_0x17774d(0x11a)]();let _0x1970d1={},_0x2f3cea=0x0,_0x5ca375=0x0,_0x13b40a=config[_0x17774d(0x2ad)];const _0x14ddb5=fns['parse'](_0x13b40a,'yyyy/MM/dd',new Date()),_0x8225c8=new Date();let _0x5c0628=0x0;for(let _0x3eade2=_0x14ddb5;!fns[_0x17774d(0x1ee)](_0x8225c8,_0x3eade2);_0x3eade2=fns['addDays'](_0x3eade2,0x1)){const _0x4543be=fns[_0x17774d(0x28d)](_0x3eade2,_0x17774d(0x22a));while(_0x2f3cea<_0x3178df['length']){const _0x4997b7=new Date(_0x3178df[_0x2f3cea][_0x17774d(0x1d5)]);if(fns[_0x17774d(0x1ee)](_0x4997b7,_0x3eade2))_0x2f3cea++;else{if(_0x3178df[_0x2f3cea][_0x17774d(0x1d5)][_0x17774d(0x1c4)](_0x4543be)){const _0x579031=_0x3178df[_0x2f3cea];if(_0x579031['type']===_0x17774d(0x17f)&&(_0x579031['event'][_0x17774d(0x1c4)](_0x17774d(0x1a2))||_0x579031[_0x17774d(0x165)][_0x17774d(0x1c4)](_0x17774d(0x269)))){const _0x1788a5=_0x579031['event']['match'](/([A-Z]+\/[A-Z]+) (sell|buy) #([\d.]+) @([\d.]+)/);if(_0x1788a5){const [,_0x5ce03c,_0x55aea9,_0x5b6c1c,_0x290e3d]=_0x1788a5,_0x52d7ba=_0x5ce03c['includes']('/'+config[_0x17774d(0x102)])?_0x5ce03c[_0x17774d(0x2ac)]('/')[0x0]:_0x5ce03c[_0x17774d(0x2ac)]('/')[0x1],_0x293e96=calculatePnL(_0x5ce03c,_0x52d7ba,_0x55aea9,parseFloat(_0x5b6c1c),parseFloat(_0x290e3d),_0x1970d1);_0x5ca375+=_0x293e96;}}_0x2f3cea++;}else break;}}dbPerformance[_0x17774d(0x186)](_0x17774d(0x1d8))[_0x17774d(0x130)]({'date':_0x4543be})[_0x17774d(0x278)]({'pnl':_0x5ca375})[_0x17774d(0x1c6)]();}dbCoinResults[_0x17774d(0x22c)]('coins',_0x1970d1)[_0x17774d(0x1c6)](),logger[_0x17774d(0x15e)](_0x17774d(0x2bb));const _0x31e198=getNormalizedPerformance();emitPerformance(_0x31e198);}async function updatePnL(_0x2a8dd2){const _0x28d5e4=_0x429b06,{symbol:_0x183b33,coin:_0x5e2848,amount:_0x59972b,price:_0x543b2d,side:_0x2e4860,reverse:_0x3b72b9}=_0x2a8dd2;let _0x4b66c8=dbCoinResults[_0x28d5e4(0x186)](_0x28d5e4(0x254))['value']();const _0xf0cdcd=calculatePnL(_0x183b33,_0x5e2848,_0x2e4860,_0x59972b,_0x543b2d,_0x4b66c8);dbCoinResults[_0x28d5e4(0x22c)](_0x28d5e4(0x254),_0x4b66c8)[_0x28d5e4(0x1c6)]();const _0x3ac878=getTimeStamp()[_0x28d5e4(0x2ac)]('\x20')[0x0];let _0x2d7bfb=dbPerformance['get'](_0x28d5e4(0x1d8))[_0x28d5e4(0x130)]({'date':_0x3ac878})[_0x28d5e4(0x11a)]();_0x2d7bfb?(_0x2d7bfb[_0x28d5e4(0x173)]+=_0xf0cdcd,dbPerformance[_0x28d5e4(0x186)](_0x28d5e4(0x1d8))[_0x28d5e4(0x130)]({'date':_0x3ac878})[_0x28d5e4(0x278)](_0x2d7bfb)[_0x28d5e4(0x1c6)]()):await storePerformance();const _0x52f4a0=getNormalizedPerformance();emitPerformance(_0x52f4a0);}async function validate24hChanges(){const _0x21bfef=_0x429b06;for(const _0x1f4fb3 of currentCoins){if(_0x1f4fb3[_0x21bfef(0x108)]!=config['basecoin']){let _0x557163;_0x1f4fb3['reverse']?_0x557163=formatResult((0x1/(gChange[_0x1f4fb3[_0x21bfef(0x231)]]/0x64+0x1)-0x1)*0x64,0x3):_0x557163=gChange[_0x1f4fb3[_0x21bfef(0x231)]],_0x557163<config[_0x21bfef(0x14d)]&&(logHistory(_0x21bfef(0x233),_0x1f4fb3[_0x21bfef(0x108)]+_0x21bfef(0x24b)+_0x557163+'%'),logHistory('error',_0x21bfef(0x240)),logHistory(_0x21bfef(0x233),_0x21bfef(0x242)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x3a756e,_0x345074){const _0x527ad5=_0x429b06;if(!_0x3a756e)return!![];const _0x4158c2=_0x345074['split']('.'),_0x9ae298=_0x3a756e[_0x527ad5(0x2ac)]('.');for(var _0x165b1a=0x0;_0x165b1a<_0x9ae298[_0x527ad5(0x196)];_0x165b1a++){const _0x5736db=~~_0x9ae298[_0x165b1a],_0x296d4e=~~_0x4158c2[_0x165b1a];if(_0x5736db<_0x296d4e)return!![];if(_0x5736db>_0x296d4e)return![];}return![];}async function oneTimeMigration(){const _0x3cf3b4=_0x429b06;let _0x2e327d=dbLogs[_0x3cf3b4(0x186)](_0x3cf3b4(0x26a))[_0x3cf3b4(0x11a)]();if(isOlderVersion(_0x2e327d,_0x3cf3b4(0x188))){let _0x122b16=[];const _0x3f08b9=dbLogs[_0x3cf3b4(0x186)](_0x3cf3b4(0x1f5))[_0x3cf3b4(0x11a)]();_0x3f08b9[_0x3cf3b4(0x1e9)](_0x244e23=>{const _0x4eda15=_0x3cf3b4;_0x122b16[_0x4eda15(0x22f)]({'time':_0x244e23[_0x4eda15(0x1d5)],'type':_0x244e23['type'],'event':_0x244e23[_0x4eda15(0x165)]});}),dbLogs[_0x3cf3b4(0x186)](_0x3cf3b4(0x1f5))[_0x3cf3b4(0x278)](_0x122b16)[_0x3cf3b4(0x1c6)]();}let _0x3aea8d=dbConfig['get']('version')[_0x3cf3b4(0x11a)]();if(isOlderVersion(_0x3aea8d,_0x3cf3b4(0x188))){let _0x48e650=dbConfig[_0x3cf3b4(0x186)](_0x3cf3b4(0x1d7))[_0x3cf3b4(0x130)]({'botID':botID})[_0x3cf3b4(0x11a)]();if(_0x48e650){let _0x21bf1b=[];_0x48e650['portfolio'][_0x3cf3b4(0x1e9)](_0xad3134=>{const _0x4901f6=_0x3cf3b4;_0x21bf1b['push']({'coin':_0xad3134[_0x4901f6(0x108)],'number':_0xad3134[_0x4901f6(0x25c)],'price':_0xad3134['startprice']}),delete _0xad3134['startnumber'],delete _0xad3134['startprice'];});if(_0x21bf1b[_0x3cf3b4(0x196)]!==0x0)fs[_0x3cf3b4(0x10f)](configbackuppath+(_0x3cf3b4(0x16b)+botID+_0x3cf3b4(0x190)),JSON[_0x3cf3b4(0x2a2)](_0x21bf1b,null,0x4),function(_0x554d2c){if(_0x554d2c){}});const _0x5b44df=(_0x4b3156,_0x3edfd7)=>{const _0x473c27=_0x3cf3b4;let _0x15cde8=[];_0x3edfd7[_0x473c27(0x1e9)](_0x1e15ea=>{const _0x4fe7e9=_0x473c27,_0x7cbffe=_0x4b3156[_0x4fe7e9(0x130)](_0xe61442=>_0xe61442['coin']==_0x1e15ea[_0x4fe7e9(0x108)]);if(!_0x7cbffe)_0x15cde8['push'](_0x1e15ea);});let _0x47fce4=[];return _0x4b3156[_0x473c27(0x1e9)](_0x472335=>{const _0x4ac1f6=_0x473c27,_0x44ceb9=_0x3edfd7[_0x4ac1f6(0x130)](_0x1f9b10=>_0x1f9b10[_0x4ac1f6(0x108)]==_0x472335[_0x4ac1f6(0x108)]);if(!_0x44ceb9||_0x44ceb9[_0x4ac1f6(0x20c)]==0x0&&_0x472335[_0x4ac1f6(0x20c)]!=0x0)_0x47fce4[_0x4ac1f6(0x22f)](_0x472335);}),{'missingDay1':_0x15cde8,'notInDay2':_0x47fce4};},_0x46c686=dbPerformance[_0x3cf3b4(0x186)](_0x3cf3b4(0x1d8))['cloneDeep']()[_0x3cf3b4(0x11a)]();if(_0x46c686['length']>0x1){const {missingDay1:_0x303dd7,notInDay2:_0x14699b}=_0x5b44df(_0x21bf1b,_0x46c686[0x1][_0x3cf3b4(0x254)]);_0x21bf1b=[..._0x21bf1b,..._0x303dd7],_0x14699b[_0x3cf3b4(0x1e9)](_0x2f644a=>{const _0x2bf069=_0x3cf3b4;let _0x176ba7=_0x21bf1b[_0x2bf069(0x225)](_0x1c664d=>_0x1c664d['coin']==_0x2f644a[_0x2bf069(0x108)]);_0x176ba7!=-0x1&&_0x21bf1b['splice'](_0x176ba7,0x1);});}_0x21bf1b['sort']((_0x52ac35,_0x3259bd)=>_0x52ac35[_0x3cf3b4(0x108)]>_0x3259bd['coin']?0x1:_0x3259bd[_0x3cf3b4(0x108)]>_0x52ac35[_0x3cf3b4(0x108)]?-0x1:0x0);let _0x391d42=[{'date':_0x48e650[_0x3cf3b4(0x2ad)],'changes':_0x21bf1b}];_0x46c686[_0x3cf3b4(0x196)]>0x2&&_0x46c686['forEach']((_0x4a9771,_0xa4265e)=>{const _0x28b2db=_0x3cf3b4;if(_0xa4265e>0x0&&_0xa4265e<_0x46c686['length']-0x1){const {missingDay1:_0x4033af,notInDay2:_0x569b13}=_0x5b44df(_0x46c686[_0xa4265e]['coins'],_0x46c686[_0xa4265e+0x1][_0x28b2db(0x254)]);_0x21bf1b=[],(_0x4033af['length']!=0x0||_0x569b13['length']!=0x0)&&(_0x4033af[_0x28b2db(0x196)]!=0x0&&_0x21bf1b[_0x28b2db(0x22f)](..._0x4033af),_0x569b13[_0x28b2db(0x196)]!=0x0&&(_0x569b13[_0x28b2db(0x1e9)](_0x27ca0b=>{const _0x543ff6=_0x28b2db;_0x27ca0b[_0x543ff6(0x20c)]=-_0x27ca0b['number'];}),_0x21bf1b['push'](..._0x569b13)),_0x21bf1b['sort']((_0x18424a,_0x2ddf50)=>_0x18424a[_0x28b2db(0x108)]>_0x2ddf50[_0x28b2db(0x108)]?0x1:_0x2ddf50[_0x28b2db(0x108)]>_0x18424a[_0x28b2db(0x108)]?-0x1:0x0),_0x391d42[_0x28b2db(0x22f)]({'date':_0x46c686[_0xa4265e+0x1][_0x28b2db(0x212)],'changes':_0x21bf1b}));}}),dbConfig[_0x3cf3b4(0x186)](_0x3cf3b4(0x1d7))[_0x3cf3b4(0x130)]({'botID':botID})[_0x3cf3b4(0x278)]({..._0x48e650,'liquidity':_0x391d42})['write']();}}if(isOlderVersion(_0x3aea8d,_0x3cf3b4(0x298))){let _0x2418d0=dbConfig[_0x3cf3b4(0x186)](_0x3cf3b4(0x1d7))[_0x3cf3b4(0x130)]({'botID':botID})['value']();if(_0x2418d0){const _0x299be7=_0x2418d0['exchange'],_0x97501=_0x299be7?capitalize(_0x299be7):'Binance';dbConfig[_0x3cf3b4(0x186)](_0x3cf3b4(0x1d7))[_0x3cf3b4(0x130)]({'botID':botID})[_0x3cf3b4(0x278)]({'exchange':_0x97501})[_0x3cf3b4(0x1c6)]();}}if(isOlderVersion(_0x3aea8d,'2.6.22')){let _0x42901a=dbConfig['get'](_0x3cf3b4(0x1d7))['find']({'botID':botID})['value']();if(_0x42901a){const _0x1b38d5=_0x42901a[_0x3cf3b4(0x139)],_0x1ddad8=_0x1b38d5?_0x3cf3b4(0x1b4):![];dbConfig[_0x3cf3b4(0x186)](_0x3cf3b4(0x1d7))[_0x3cf3b4(0x130)]({'botID':botID})[_0x3cf3b4(0x278)]({'marketcapEnabled':_0x1ddad8})[_0x3cf3b4(0x1c6)]();}}if(isOlderVersion(_0x3aea8d,_0x3cf3b4(0x199))){let _0x5268d2=dbConfig[_0x3cf3b4(0x186)](_0x3cf3b4(0x1d7))[_0x3cf3b4(0x130)]({'botID':botID})[_0x3cf3b4(0x11a)]();if(_0x5268d2){const _0x337680=_0x5268d2[_0x3cf3b4(0x2bd)],_0x4f703d=_0x337680?_0x3cf3b4(0x292):![];dbConfig[_0x3cf3b4(0x186)](_0x3cf3b4(0x1d7))['find']({'botID':botID})[_0x3cf3b4(0x278)]({'autoliquidity':_0x4f703d})[_0x3cf3b4(0x1c6)]();}}let _0x38fd30=dbPerformance['get'](_0x3cf3b4(0x26a))['value']();isOlderVersion(_0x38fd30,_0x3cf3b4(0x188))&&setStartDatePerformance();let _0x500e19=dbCoinResults[_0x3cf3b4(0x186)]('version')[_0x3cf3b4(0x11a)]();if(isOlderVersion(_0x500e19,_0x3cf3b4(0x1ef))){let _0x19513c=dbCoinResults['get'](_0x3cf3b4(0x254))[_0x3cf3b4(0x11a)]();if(_0x19513c['length']!=0x0)pnlGenerationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x589a38=_0x429b06;dbConfig[_0x589a38(0x22c)](_0x589a38(0x26a),serverversion)['write'](),dbPerformance[_0x589a38(0x22c)]('version',serverversion)['write'](),dbLogs['set'](_0x589a38(0x26a),serverversion)[_0x589a38(0x1c6)](),dbCoinResults['set'](_0x589a38(0x26a),serverversion)[_0x589a38(0x1c6)]();}function getConfiguration(_0x489a1a){const _0x27de36=_0x429b06;let _0x7aaf65=dbConfig[_0x27de36(0x186)](_0x27de36(0x1d7))['find']({'botID':_0x489a1a})[_0x27de36(0x11a)]();if(_0x7aaf65){let _0x31a46e=![];typeof _0x7aaf65['threshold']=='string'&&(_0x7aaf65={..._0x7aaf65,'threshold':Number(_0x7aaf65[_0x27de36(0x20e)])},_0x31a46e=!![]),_0x7aaf65[_0x27de36(0x14d)]==undefined&&(_0x7aaf65={..._0x7aaf65,'change24h':-0x14},_0x31a46e=!![]),_0x7aaf65[_0x27de36(0x24f)]==undefined&&(_0x7aaf65={..._0x7aaf65,'fiat':'USD'},_0x31a46e=!![]),_0x7aaf65[_0x27de36(0x116)]==undefined&&(_0x7aaf65={..._0x7aaf65,'onepagemode':settings[_0x27de36(0x116)]},_0x31a46e=!![]),_0x7aaf65[_0x27de36(0x268)]==undefined&&(_0x7aaf65={..._0x7aaf65,'colorscheme':'red_yellow_blue'},_0x31a46e=!![]),_0x7aaf65[_0x27de36(0x2bd)]==undefined&&(_0x7aaf65={..._0x7aaf65,'autoliquidity':_0x27de36(0x292)},_0x31a46e=!![]),_0x7aaf65[_0x27de36(0x2b5)]==undefined&&(_0x7aaf65={..._0x7aaf65,'marketcapApi':settings[_0x27de36(0x2b5)]?!![]:![]},_0x31a46e=!![]),_0x7aaf65[_0x27de36(0x139)]==undefined&&(_0x7aaf65={..._0x7aaf65,'marketcapEnabled':![]},_0x31a46e=!![]),_0x7aaf65['sandbox']==undefined&&(_0x7aaf65={..._0x7aaf65,'sandbox':![]},_0x31a46e=!![]),_0x31a46e&&(_0x7aaf65={'botID':_0x7aaf65[_0x27de36(0x2b8)],'exchange':_0x7aaf65[_0x27de36(0x109)],'apiKey':_0x7aaf65['apiKey'],'apiSecret':_0x7aaf65[_0x27de36(0x26f)],'apiPassword':_0x7aaf65[_0x27de36(0x2a6)],'basecoin':_0x7aaf65[_0x27de36(0x102)],'botname':_0x7aaf65['botname'],'showname':_0x7aaf65[_0x27de36(0x259)],'threshold':_0x7aaf65[_0x27de36(0x20e)],'ordertype':_0x7aaf65[_0x27de36(0x232)],'timeout':_0x7aaf65[_0x27de36(0x1b3)],'fiat':_0x7aaf65[_0x27de36(0x24f)],'startdate':_0x7aaf65[_0x27de36(0x2ad)],'recreate':_0x7aaf65[_0x27de36(0x2b9)],'timeshift':_0x7aaf65[_0x27de36(0x128)],'onepagemode':_0x7aaf65[_0x27de36(0x116)],'headless':_0x7aaf65[_0x27de36(0x1e1)],'cooldown':_0x7aaf65[_0x27de36(0x216)],'change24h':_0x7aaf65[_0x27de36(0x14d)],'emojibuy':_0x7aaf65['emojibuy'],'emojisell':_0x7aaf65['emojisell'],'colorscheme':_0x7aaf65[_0x27de36(0x268)],'marketcapApi':_0x7aaf65[_0x27de36(0x2b5)],'marketcapEnabled':_0x7aaf65[_0x27de36(0x139)],'sandbox':_0x7aaf65[_0x27de36(0x176)],'portfolio':_0x7aaf65['portfolio'],'autoliquidity':_0x7aaf65['autoliquidity'],'liquidity':_0x7aaf65[_0x27de36(0x26b)],'openOrders':_0x7aaf65[_0x27de36(0x266)]},dbConfig[_0x27de36(0x186)](_0x27de36(0x1d7))[_0x27de36(0x1cc)]()[_0x27de36(0x1c6)](),dbConfig['get'](_0x27de36(0x1d7))[_0x27de36(0x22f)](_0x7aaf65)[_0x27de36(0x1c6)]());}else _0x7aaf65={'botID':_0x489a1a,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x27de36(0x1a5)+_0x489a1a,'showname':![],'threshold':0x3,'ordertype':_0x27de36(0x10a),'timeout':0x14,'fiat':_0x27de36(0x1bb),'startdate':getDate(),'recreate':![],'timeshift':settings['timeshift'],'onepagemode':settings['onepagemode'],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x27de36(0x265),'marketcapApi':settings['marketcapApi']?!![]:![],'marketcapEnabled':![],'sandbox':![],'portfolio':[],'autoliquidity':_0x27de36(0x292),'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x7aaf65;}function emittedConfiguration(){const _0x540835=_0x429b06;let _0x511f04;if(config[_0x540835(0x198)]=='')_0x511f04={...config,'configstate':_0x540835(0x19a)};else config[_0x540835(0x198)]==_0x540835(0x145)?_0x511f04={...config,'configstate':'recovery'}:(_0x511f04={...config,'apiKey':'************','apiSecret':_0x540835(0x26d)},config[_0x540835(0x2a6)]&&(_0x511f04['apiPassword']=_0x540835(0x26d)));return _0x511f04['enableFiatToggle']=enableFiatToggle,_0x511f04;}function getSettings(){const _0x326a9e=_0x429b06;return dbSettings[_0x326a9e(0x186)](_0x326a9e(0x275))[_0x326a9e(0x11a)]();}function getSecure(){const _0x52cbd3=_0x429b06;return dbSecure['get'](_0x52cbd3(0x197))[_0x52cbd3(0x11a)]()||{};}function updateTimeshift(_0x2fb445){const _0x49805b=_0x429b06;let _0x2c0a12=dbConfig[_0x49805b(0x186)](_0x49805b(0x1d7))['find']({'botID':botID})['value']();_0x2c0a12&&dbConfig[_0x49805b(0x186)](_0x49805b(0x1d7))[_0x49805b(0x130)]({'botID':botID})[_0x49805b(0x278)]({'timeshift':_0x2fb445})['write'](),config['timeshift']=_0x2fb445,proxyEmit(_0x49805b(0x18f),emittedConfiguration());}function updateOnepagemode(_0x2e1c02){const _0x106db8=_0x429b06;let _0x5dd7d7=dbConfig['get'](_0x106db8(0x1d7))[_0x106db8(0x130)]({'botID':botID})[_0x106db8(0x11a)]();_0x5dd7d7&&dbConfig[_0x106db8(0x186)](_0x106db8(0x1d7))['find']({'botID':botID})[_0x106db8(0x278)]({'onepagemode':_0x2e1c02})[_0x106db8(0x1c6)](),config[_0x106db8(0x116)]=_0x2e1c02,proxyEmit(_0x106db8(0x18f),emittedConfiguration());}function updateMarketcapApi(_0x554ce){const _0xaafa38=_0x429b06,_0x3c5074=_0x554ce?!![]:![];let _0x44e951=dbConfig[_0xaafa38(0x186)](_0xaafa38(0x1d7))[_0xaafa38(0x130)]({'botID':botID})[_0xaafa38(0x11a)]();_0x44e951&&dbConfig[_0xaafa38(0x186)](_0xaafa38(0x1d7))[_0xaafa38(0x130)]({'botID':botID})[_0xaafa38(0x278)]({'marketcapApi':_0x3c5074})[_0xaafa38(0x1c6)](),config[_0xaafa38(0x2b5)]=_0x3c5074,getMarketCap(),proxyEmit('configuration',emittedConfiguration());}async function storeConfiguration(_0x40b4bb){const _0x3f2f91=_0x429b06;logger[_0x3f2f91(0x15e)](_0x3f2f91(0x136));_0x40b4bb[_0x3f2f91(0x290)]&&delete _0x40b4bb[_0x3f2f91(0x290)];if(pidBalances)clearTimeout(pidBalances);setBlockTransactionDetection(!![]);let _0x1f2cee=![],_0xf2b105=![],_0x56e3ce=[];_0x40b4bb['portfolio'][_0x3f2f91(0x1e9)](_0x1538e=>{const _0x58144c=_0x3f2f91;if(!_0x1538e[_0x58144c(0x1a4)]&&_0x1538e[_0x58144c(0x108)]!=_0x40b4bb[_0x58144c(0x102)])_0x56e3ce[_0x58144c(0x22f)](_0x1538e[_0x58144c(0x231)]);}),_0x56e3ce['forEach'](_0x472bd6=>{const _0x4ed5d5=currentCoins['find'](_0x4594e7=>_0x4594e7['symbol']==_0x472bd6);!_0x4ed5d5&&(_0x1f2cee=!![]);}),currentCoins[_0x3f2f91(0x1e9)](_0x4e981d=>{const _0x4699f5=_0x3f2f91;if(_0x4e981d[_0x4699f5(0x108)]!=config['basecoin']){const _0x5cee20=_0x56e3ce[_0x4699f5(0x130)](_0x2ff1f7=>_0x2ff1f7==_0x4e981d['symbol']);!_0x5cee20&&(_0x1f2cee=!![]);}}),_0x40b4bb[_0x3f2f91(0x25b)][_0x3f2f91(0x1e9)](_0x50103b=>{const _0x3842a5=_0x3f2f91,_0x311c28=config['portfolio'][_0x3842a5(0x130)](_0x35206a=>_0x35206a[_0x3842a5(0x108)]==_0x50103b[_0x3842a5(0x108)]);if(_0x311c28&&_0x50103b[_0x3842a5(0xf9)]!=_0x311c28[_0x3842a5(0xf9)])_0xf2b105=!![];});let _0x205aa4=dbConfig[_0x3f2f91(0x186)](_0x3f2f91(0x1d7))[_0x3f2f91(0x130)]({'botID':botID})[_0x3f2f91(0x11a)]();_0x40b4bb={..._0x40b4bb,'apiKey':decryptRSA(secure[_0x3f2f91(0xfc)],_0x40b4bb[_0x3f2f91(0x198)]),'apiSecret':decryptRSA(secure[_0x3f2f91(0xfc)],_0x40b4bb[_0x3f2f91(0x26f)])};_0x40b4bb[_0x3f2f91(0x2a6)]&&(_0x40b4bb[_0x3f2f91(0x2a6)]=decryptRSA(secure[_0x3f2f91(0xfc)],_0x40b4bb[_0x3f2f91(0x2a6)]));let _0x5357e1=![];if(_0x205aa4){_0x40b4bb[_0x3f2f91(0x198)]==_0x3f2f91(0x26d)?_0x40b4bb[_0x3f2f91(0x198)]=config['apiKey']:_0x5357e1=!![];_0x40b4bb['apiSecret']=='************'?_0x40b4bb['apiSecret']=config[_0x3f2f91(0x26f)]:_0x5357e1=!![];if(_0x40b4bb['apiPassword']==_0x3f2f91(0x26d))_0x40b4bb[_0x3f2f91(0x2a6)]=config[_0x3f2f91(0x2a6)];else{if(_0x40b4bb[_0x3f2f91(0x2a6)])_0x5357e1=!![];}dbConfig['get'](_0x3f2f91(0x1d7))['find']({'botID':botID})['assign'](_0x40b4bb)[_0x3f2f91(0x1c6)]();}else dbConfig[_0x3f2f91(0x186)](_0x3f2f91(0x1d7))['push'](_0x40b4bb)[_0x3f2f91(0x1c6)](),_0x5357e1=!![],process[_0x3f2f91(0x164)]({'status':_0x3f2f91(0x230),'live':'running'},_0x5c9864=>{});process['send']({'botname':_0x40b4bb['botname']},_0x3be739=>{}),config={..._0x40b4bb},updateBotManager(),proxyEmit(_0x3f2f91(0x16e)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x5357e1)await reset(!![]);else _0x1f2cee||_0xf2b105?await reset(![]):getBalances();setBlockTransactionDetection(![]);}async function storeHeadless(_0x123399){const _0x12151d=_0x429b06,_0x12016d={...config,'headless':_0x123399['headless']};let _0xe79842=dbConfig['get'](_0x12151d(0x1d7))[_0x12151d(0x130)]({'botID':botID})[_0x12151d(0x11a)]();_0xe79842&&dbConfig[_0x12151d(0x186)](_0x12151d(0x1d7))[_0x12151d(0x130)]({'botID':botID})[_0x12151d(0x278)](_0x12016d)[_0x12151d(0x1c6)](),config={..._0x12016d},updateBotManager(),proxyEmit(_0x12151d(0x18f),emittedConfiguration());}async function storeFiat(_0x1a3e2b){const _0x4b5a46=_0x429b06,_0xe330b0={...config,'fiat':_0x1a3e2b};let _0xdb52f0=dbConfig['get'](_0x4b5a46(0x1d7))['find']({'botID':botID})['value']();_0xdb52f0&&dbConfig[_0x4b5a46(0x186)](_0x4b5a46(0x1d7))[_0x4b5a46(0x130)]({'botID':botID})[_0x4b5a46(0x278)](_0xe330b0)[_0x4b5a46(0x1c6)](),config={..._0xe330b0},proxyEmit(_0x4b5a46(0x18f),emittedConfiguration());}function resetHistory(){const _0x522d51=_0x429b06;logger[_0x522d51(0x16d)](_0x522d51(0x272));try{if(fs[_0x522d51(0x137)](path[_0x522d51(0x255)](configpath,_0x522d51(0x22b)+botID+'-events.json')))fs[_0x522d51(0x13e)](path[_0x522d51(0x255)](configpath,_0x522d51(0x22b)+botID+'-events.json'));if(fs[_0x522d51(0x137)](path[_0x522d51(0x255)](configpath,_0x522d51(0x22b)+botID+_0x522d51(0x149))))fs['unlinkSync'](path[_0x522d51(0x255)](configpath,'bot-'+botID+_0x522d51(0x149)));if(fs[_0x522d51(0x137)](path[_0x522d51(0x255)](configpath,_0x522d51(0x22b)+botID+_0x522d51(0x133))))fs['unlinkSync'](path[_0x522d51(0x255)](configpath,_0x522d51(0x22b)+botID+_0x522d51(0x133)));}catch(_0xe4266a){if(_0xe4266a)logger[_0x522d51(0x16d)](_0x522d51(0x11e),_0xe4266a);}const _0x547678=getDate();let _0x5192e2=[];currentCoins[_0x522d51(0x1e9)](_0x1d8236=>{const _0x5948d3=_0x522d51;_0x5192e2[_0x5948d3(0x22f)]({'coin':_0x1d8236[_0x5948d3(0x108)],'number':_0x1d8236[_0x5948d3(0x20c)],'price':_0x1d8236[_0x5948d3(0x29a)]});});let _0x17eee7=dbConfig[_0x522d51(0x186)](_0x522d51(0x1d7))[_0x522d51(0x130)]({'botID':botID})['value']();_0x17eee7&&(dbConfig[_0x522d51(0x186)](_0x522d51(0x1d7))[_0x522d51(0x130)]({'botID':botID})['assign']({'liquidity':[{'date':_0x547678,'changes':_0x5192e2}]})[_0x522d51(0x1c6)](),config[_0x522d51(0x26b)]=[]),restartBot(!![]);}function noslash(_0x6cb1b4){const _0x5a775f=_0x429b06;return _0x6cb1b4[_0x5a775f(0x101)]('/','');}function updateHighestFee(_0x346e78){const _0x425430=_0x429b06;if(_0x346e78[_0x425430(0x2b3)]){let _0x4d31c2={'filled':_0x346e78[_0x425430(0x17b)]*_0x346e78[_0x425430(0x1b6)],'amount':_0x346e78[_0x425430(0x17b)]*_0x346e78[_0x425430(0x1b6)],'side':_0x346e78[_0x425430(0x140)]==_0x425430(0x1a8)?_0x425430(0x12d):_0x425430(0x1a8),'price':0x1/_0x346e78[_0x425430(0x1b6)]};_0x346e78={..._0x346e78,..._0x4d31c2};}const _0x6a3495=defaultFee*_0x346e78['filled']*_0x346e78[_0x425430(0x1b6)];lastFees[_0x425430(0x153)]['length']===0x14&&lastFees['recent20'][_0x425430(0x1f0)](),lastFees[_0x425430(0x153)][_0x425430(0x22f)](_0x6a3495),lastFees[_0x425430(0xfa)]=Math[_0x425430(0x13f)](...lastFees[_0x425430(0x153)]);}async function updateNumberCoinsCcxt(_0x1f1dd8){const _0x6eaa22=_0x429b06;logger[_0x6eaa22(0x15e)](_0x6eaa22(0x28b)+_0x1f1dd8[_0x6eaa22(0x231)]+_0x6eaa22(0x28f)+_0x1f1dd8[_0x6eaa22(0x18d)]+_0x6eaa22(0x28f)+_0x1f1dd8[_0x6eaa22(0x17b)]+_0x6eaa22(0x273)+_0x1f1dd8['amount']+_0x6eaa22(0x28f)+_0x1f1dd8['id']);let _0x73445f=_0x1f1dd8[_0x6eaa22(0x18d)],_0x5e1e40=![];currentCoins[_0x6eaa22(0x1e9)](_0x217334=>{const _0x15f56d=_0x6eaa22;_0x217334[_0x15f56d(0x231)]==_0x1f1dd8[_0x15f56d(0x231)]&&(_0x5e1e40=!![]);});if(!_0x5e1e40)return;const _0x12406b=currentCoins[_0x6eaa22(0x130)](_0x1b3952=>_0x1b3952['symbol']==_0x1f1dd8[_0x6eaa22(0x231)]),_0x5e022c=_0x12406b[_0x6eaa22(0x108)],_0x4fc9cc=_0x5e1500=>{const _0x331928=_0x6eaa22,_0x2da098=currentCoins[_0x331928(0x130)](_0x41722e=>_0x41722e[_0x331928(0x231)]==_0x1f1dd8['symbol']);if(_0x2da098)_0x2da098[_0x331928(0xf8)]=_0x5e1500;};let _0x15d4c6=![];for(const _0x2cdb84 of lastOrders){const _0x1c378e=0x64,_0x30fffa=0x1388;let _0x564d59=0x0;while(!_0x2cdb84[_0x6eaa22(0x264)]&&_0x564d59*_0x1c378e<_0x30fffa){_0x564d59++,await sleep(_0x1c378e);}if(_0x564d59>0x0)logger[_0x6eaa22(0x15e)](_0x6eaa22(0x23e)+_0x564d59*_0x1c378e/0x3e8+_0x6eaa22(0x16c));_0x2cdb84[_0x6eaa22(0x264)]==_0x1f1dd8['id']&&(_0x15d4c6=!![]);}if(_0x73445f=='open'){_0x4fc9cc(_0x6eaa22(0x224));if(_0x1f1dd8[_0x6eaa22(0x17b)]>0x0&&_0x1f1dd8[_0x6eaa22(0x17b)]<_0x1f1dd8[_0x6eaa22(0x1f3)]){if(_0x15d4c6){setBlockTransactionDetection(!![]),logger[_0x6eaa22(0x15e)]('1\x20-\x20partially\x20FILLED\x20('+_0x1f1dd8['filled']+_0x6eaa22(0x141)+_0x1f1dd8['id']);const _0x15c700=await getCoins(balanceUpdateDelay,undefined,undefined,_0x5e022c);[currentCoins,currentCoinsAll]=_0x15c700,setBlockTransactionDetection(![]);}else logger['debug']('1\x20-\x20partially\x20FILLED\x20('+_0x1f1dd8[_0x6eaa22(0x17b)]+_0x6eaa22(0x1fb)+_0x1f1dd8['id']),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay);}}else{if(_0x73445f==_0x6eaa22(0x227)){_0x4fc9cc('canceled'),lastOrders=lastOrders[_0x6eaa22(0x211)](_0x356cce=>_0x356cce[_0x6eaa22(0x231)]!=_0x1f1dd8[_0x6eaa22(0x231)]);const _0x3691da=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x3691da,setBlockTransactionDetection(![]),await getOpenOrders(),handleOpenOrders();}else{if(_0x73445f==_0x6eaa22(0x1a9)){if(lastOrders)for(const _0x28a95b of lastOrders){if(_0x28a95b[_0x6eaa22(0x264)]==_0x1f1dd8['id']){logger['debug'](_0x6eaa22(0x229)+_0x1f1dd8['id']),_0x15d4c6=!![];if(_0x28a95b[_0x6eaa22(0x17b)]==0x0){setBlockTransactionDetection(!![]),logger['debug'](_0x6eaa22(0x297)+_0x1f1dd8['id']);if(_0x1f1dd8['average'])_0x28a95b[_0x6eaa22(0x1b6)]=_0x1f1dd8[_0x6eaa22(0x1c2)];else{if(_0x1f1dd8[_0x6eaa22(0x1b6)])_0x28a95b[_0x6eaa22(0x1b6)]=_0x1f1dd8[_0x6eaa22(0x1b6)];else{}}_0x28a95b[_0x6eaa22(0x17b)]=_0x1f1dd8[_0x6eaa22(0x17b)],updateHighestFee(_0x28a95b);const _0x1d84c2=await getCoins(balanceUpdateDelay,undefined,undefined,_0x5e022c);[currentCoins,currentCoinsAll]=_0x1d84c2,setBlockTransactionDetection(![]),await validateOrders(),_0x4fc9cc(_0x6eaa22(0x17b)),_0x28a95b[_0x6eaa22(0x244)]={'currency':_0x1f1dd8[_0x6eaa22(0x244)]?_0x1f1dd8['fee']['currency']:null,'cost':_0x1f1dd8[_0x6eaa22(0x244)]?_0x1f1dd8[_0x6eaa22(0x244)][_0x6eaa22(0x193)]:0x0},await updatePnL(_0x28a95b);}}}!_0x15d4c6&&(logger['debug'](_0x6eaa22(0x151)+_0x1f1dd8['id']),_0x4fc9cc(_0x6eaa22(0x17b)),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay),await updateOpenOrders(),handleOpenOrders());}}}if(lastBalances){let _0x435eb2=JSON['parse'](lastBalances[_0x6eaa22(0x25b)]);const _0x3b0dc4=_0x435eb2[_0x6eaa22(0x130)](_0x45e538=>_0x45e538[_0x6eaa22(0x231)]==_0x1f1dd8[_0x6eaa22(0x231)]);if(_0x3b0dc4){if(_0x73445f==_0x6eaa22(0x224))_0x3b0dc4[_0x6eaa22(0xf8)]=_0x3b0dc4[_0x6eaa22(0xf8)]==_0x6eaa22(0x17b)?_0x6eaa22(0x17b):'open';else{if(_0x73445f=='canceled')_0x3b0dc4['orderstatus']=_0x3b0dc4[_0x6eaa22(0xf8)]==_0x6eaa22(0x17b)?_0x6eaa22(0x17b):'canceled';else _0x73445f==_0x6eaa22(0x1a9)&&(_0x3b0dc4[_0x6eaa22(0xf8)]=_0x6eaa22(0x17b));}}lastBalances={...lastBalances,'portfolio':JSON['stringify'](_0x435eb2)},proxyEmit(_0x6eaa22(0x12c),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x1fe44d=_0x429b06;await getOpenOrders();let _0x4285d1=![];currentCoins[_0x1fe44d(0x1e9)](_0x5769af=>{const _0x4ab539=_0x1fe44d;_0x4285d1=allOpenOrders['find'](_0x1f8f3c=>_0x1f8f3c[_0x4ab539(0x231)]==_0x5769af[_0x4ab539(0x231)]),_0x5769af[_0x4ab539(0xf8)]=_0x4285d1?_0x4ab539(0x224):_0x4ab539(0x222);});}async function fetchBalance(_0x1baf99=!![]){const _0x3333a7=_0x429b06;let _0x6e8b38,_0x3da119,_0x1ff02f,_0x2b8f86=0x0;while(!_0x3da119&&_0x2b8f86<maxRetries){try{return _0x6e8b38=await exchange[_0x3333a7(0x2a3)](),_0x3da119=_0x6e8b38['total'],_0x3da119;}catch(_0x142bda){_0x1ff02f=_0x142bda,_0x2b8f86++,await sleep(retryInterval);}}return!_0x1baf99?handleErrorNoStop(_0x1ff02f,_0x3333a7(0x104)):await handleError(_0x1ff02f,_0x3333a7(0x104)),![];}async function getCoins(_0x50a1c6=0x0,_0x364bd0=!![],_0x3b3465=config['basecoin'],_0x593e9e){const _0x251141=_0x429b06;let _0x2dc574=[],_0x255ab1=[],_0x501f99=[],_0x25bece;if(_0x50a1c6)await sleep(_0x50a1c6);if(botPaused)return[currentCoins,currentCoinsAll];let _0x2c82c9=![],_0xc3d1e0=0x0,_0xe93d79,_0x421acd;_0x593e9e&&(_0xe93d79=currentCoins[_0x251141(0x130)](_0x5a7773=>_0x5a7773[_0x251141(0x108)]==_0x593e9e),_0xe93d79&&(_0x421acd=_0xe93d79[_0x251141(0x286)],delete _0xe93d79[_0x251141(0x286)]));while(!_0x2c82c9){_0x25bece=await fetchBalance(_0x364bd0);if(_0x25bece){if(_0x593e9e){if(_0x25bece[_0x593e9e]!=_0x421acd)logger[_0x251141(0x15e)](_0x251141(0x10d)+_0x593e9e+':\x20'+_0x25bece[_0x593e9e]+'\x20('+_0x421acd+')'),_0x2c82c9=!![];else{logger['debug'](_0x251141(0x2ae)+_0x593e9e+':\x20'+_0x25bece[_0x593e9e]+'\x20('+_0x421acd+')'),_0xc3d1e0++;if(_0xc3d1e0<balanceUpdateRetries)await sleep(balanceUpdateDelay);else{logger[_0x251141(0x15e)](_0x251141(0x11c)+_0xc3d1e0+'\x20attempts');break;}}}else break;}else return[currentCoins,currentCoinsAll];}for(const [_0x47567c,_0x2828bc]of Object[_0x251141(0x28c)](_0x25bece)){_0x501f99[_0x251141(0x22f)](_0x47567c);}config[_0x251141(0x25b)][_0x251141(0x1e9)](_0xba5fd9=>{const _0x1e1133=_0x251141;!_0x501f99[_0x1e1133(0x1c4)](_0xba5fd9[_0x1e1133(0x108)])&&(_0x25bece[_0xba5fd9[_0x1e1133(0x108)]]=0x0);});if(_0x3b3465=='')for(const [_0x4a8dac,_0x12900b]of Object[_0x251141(0x28c)](_0x25bece)){_0x12900b!=0x0&&_0x2dc574[_0x251141(0x22f)]({'coin':_0x4a8dac});}else for(const [_0x9a416,_0x318489]of Object[_0x251141(0x28c)](_0x25bece)){const _0x4e0cd3=config[_0x251141(0x25b)][_0x251141(0x130)](_0x78a065=>_0x78a065[_0x251141(0x108)]==_0x9a416),_0x492a83=_0x9a416+'/'+_0x3b3465,_0x40d349=_0x3b3465+'/'+_0x9a416,_0x242d5b=currentCoins[_0x251141(0x130)](_0x26064f=>_0x26064f[_0x251141(0x108)]==_0x9a416);if((_0x318489!=0x0||_0x4e0cd3)&&(allSymbols[_0x251141(0x1c4)](_0x492a83)||_0x9a416==_0x3b3465))_0x242d5b?_0x2dc574[_0x251141(0x22f)]({..._0x242d5b,'number':Math[_0x251141(0x13f)](_0x318489+(_0x4e0cd3&&_0x4e0cd3[_0x251141(0xf9)]||0x0),0x0)}):_0x2dc574['push']({'coin':_0x9a416,'symbol':_0x492a83,'reverse':![],'number':Math['max'](_0x318489+(_0x4e0cd3&&_0x4e0cd3[_0x251141(0xf9)]||0x0),0x0),'orderstatus':_0x251141(0x222)});else{if((_0x318489!=0x0||_0x4e0cd3)&&allSymbols[_0x251141(0x1c4)](_0x40d349))_0x242d5b?_0x2dc574['push']({..._0x242d5b,'number':Math['max'](_0x318489+(_0x4e0cd3&&_0x4e0cd3['offset']||0x0),0x0)}):_0x2dc574[_0x251141(0x22f)]({'coin':_0x9a416,'symbol':_0x40d349,'reverse':!![],'number':Math[_0x251141(0x13f)](_0x318489+(_0x4e0cd3&&_0x4e0cd3[_0x251141(0xf9)]||0x0),0x0),'orderstatus':_0x251141(0x222)});else _0x4e0cd3&&_0x2dc574[_0x251141(0x22f)]({'coin':_0x4e0cd3[_0x251141(0x108)],'symbol':_0x4e0cd3[_0x251141(0x231)],'reverse':_0x4e0cd3[_0x251141(0x2b3)],'number':0x0,'orderstatus':'none'});}}return _0x2dc574['sort']((_0x34da89,_0x2ec2f1)=>_0x34da89[_0x251141(0x118)]<_0x2ec2f1[_0x251141(0x118)]?0x1:_0x2ec2f1[_0x251141(0x118)]<_0x34da89[_0x251141(0x118)]?-0x1:0x0),_0x255ab1=cloneDeep(_0x2dc574),_0x2dc574=_0x2dc574[_0x251141(0x211)](_0x33362a=>{const _0x57e050=_0x251141,_0x51addb=config[_0x57e050(0x25b)]['find'](_0x19eb75=>_0x19eb75['coin']==_0x33362a['coin']);return _0x51addb&&!_0x51addb[_0x57e050(0x1a4)];}),[_0x2dc574,_0x255ab1];}async function getOpenOrders(){const _0x4abc92=_0x429b06;let _0x117145;allOpenOrders=[];try{for(const _0x3cc3a5 of config[_0x4abc92(0x25b)]){!_0x3cc3a5['excluded']&&_0x3cc3a5['coin']!=config[_0x4abc92(0x102)]&&(_0x117145=await exchange['fetchOpenOrders'](_0x3cc3a5[_0x4abc92(0x231)]),_0x117145['length']>0x0&&allOpenOrders[_0x4abc92(0x22f)](_0x117145[0x0]));}}catch(_0x4515f2){await handleError(_0x4515f2,_0x4abc92(0x17c));}}async function handleOpenOrders(_0x2d4d7b=0x0){const _0x2bf326=_0x429b06;allOpenOrders['length']==0x0&&lockOrders==ORDERS[_0x2bf326(0x14b)]&&allOrdersPlaced&&(_0x2d4d7b==0x0?(logger[_0x2bf326(0x15e)](_0x2bf326(0x17e)),_0x2d4d7b++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x2bf326(0x15e)](_0x2bf326(0x267)),validateOrders(_0x2bf326(0x238))));}async function testAPI(){const _0x2322f3=_0x429b06;try{return await exchange[_0x2322f3(0x2a3)](),!![];}catch(_0x9793ef){return loading[_0x2322f3(0x202)]=!![],_0x9793ef['toString']()[_0x2322f3(0x27c)]()[_0x2322f3(0x1c4)](_0x2322f3(0x20a))||_0x9793ef['toString']()['toLowerCase']()[_0x2322f3(0x1c4)](_0x2322f3(0x122))?(logHistory(_0x2322f3(0x233),_0x2322f3(0xfe)),loading[_0x2322f3(0x233)]='timestamp-issue'):(handleErrorNoStop(_0x9793ef,_0x2322f3(0x1f1)),logger[_0x2322f3(0x15e)](_0x2322f3(0x24c),_0x9793ef)),emitLoadingProgress(),botPaused=!![],![];}}async function testNewAPI(_0x3426d0){const _0x951c7c=_0x429b06;logger[_0x951c7c(0x15e)]('Test\x20new\x20API');const _0x124a35=ccxt[_0x951c7c(0x27d)][_0x3426d0[_0x951c7c(0x109)]['toLowerCase']()],_0x18be8c=new _0x124a35({'apiKey':_0x3426d0[_0x951c7c(0x198)],'secret':_0x3426d0['apiSecret'],'options':{'defaultType':'spot'}});if(_0x3426d0[_0x951c7c(0x2a6)])_0x18be8c['password']=_0x3426d0[_0x951c7c(0x2a6)];if(_0x18be8c['has'][_0x951c7c(0x176)])_0x18be8c[_0x951c7c(0x191)](_0x3426d0[_0x951c7c(0x176)]);try{await _0x18be8c[_0x951c7c(0x2a3)](),botPaused=![];}catch(_0x2edab1){logger[_0x951c7c(0x15e)](_0x951c7c(0x18e)+_0x2edab1['toString']());throw _0x2edab1;}}function cloneDeep(_0x58c873){const _0x40d603=_0x429b06;return JSON[_0x40d603(0x245)](JSON[_0x40d603(0x2a2)](_0x58c873));}async function getPortfolio(_0xea0bb4){const _0x2a9d07=_0x429b06;let _0x1fe1b9=[],_0x1ea363=[],_0x2ff052=[],_0x3d695e;_0xea0bb4[_0x2a9d07(0x198)]=decryptRSA(secure[_0x2a9d07(0xfc)],_0xea0bb4[_0x2a9d07(0x198)]),_0xea0bb4[_0x2a9d07(0x26f)]=decryptRSA(secure[_0x2a9d07(0xfc)],_0xea0bb4[_0x2a9d07(0x26f)]);if(_0xea0bb4['apiPassword'])_0xea0bb4[_0x2a9d07(0x2a6)]=decryptRSA(secure[_0x2a9d07(0xfc)],_0xea0bb4['apiPassword']);if(_0xea0bb4[_0x2a9d07(0x198)]!==_0x2a9d07(0x26d)||_0xea0bb4[_0x2a9d07(0x26f)]!==_0x2a9d07(0x26d)||_0xea0bb4['apiPassword']&&_0xea0bb4[_0x2a9d07(0x2a6)]!==_0x2a9d07(0x26d)){if(config[_0x2a9d07(0x109)]){if(_0xea0bb4[_0x2a9d07(0x198)]==_0x2a9d07(0x26d))_0xea0bb4[_0x2a9d07(0x198)]=config[_0x2a9d07(0x198)];if(_0xea0bb4[_0x2a9d07(0x26f)]==_0x2a9d07(0x26d))_0xea0bb4[_0x2a9d07(0x26f)]=config['apiSecret'];if(_0xea0bb4[_0x2a9d07(0x2a6)]==_0x2a9d07(0x26d))_0xea0bb4['apiPassword']=config['apiPassword'];}try{if(_0xea0bb4[_0x2a9d07(0x14e)])await testNewAPI(_0xea0bb4);}catch(_0x491246){if(_0x491246[_0x2a9d07(0x144)]()[_0x2a9d07(0x1c4)](_0x2a9d07(0x270))){logHistory(_0x2a9d07(0x233),'Invalid\x20API\x20details,\x20please\x20try\x20again\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange'),logHistory(_0x2a9d07(0x233),'Error\x20details:\x20'+_0x491246[_0x2a9d07(0x144)]()),proxyEmit(_0x2a9d07(0x103),![]);return;}else{if(_0x491246[_0x2a9d07(0x144)]()[_0x2a9d07(0x1c4)]('PermissionDenied')){logHistory('error',_0x2a9d07(0x132)),logHistory(_0x2a9d07(0x233),_0x2a9d07(0x1ba)+_0x491246[_0x2a9d07(0x144)]()),proxyEmit(_0x2a9d07(0x103),![]);return;}else{logHistory(_0x2a9d07(0x233),_0x2a9d07(0x155)+_0x491246[_0x2a9d07(0x144)]()),logger['debug'](_0x2a9d07(0x24c),_0x491246),proxyEmit(_0x2a9d07(0x103),![]);return;}}}exchange?updateExchange(_0xea0bb4[_0x2a9d07(0x198)],_0xea0bb4['apiSecret'],_0xea0bb4[_0x2a9d07(0x2a6)]):await initExchange(_0xea0bb4['exchange'],_0xea0bb4[_0x2a9d07(0x198)],_0xea0bb4['apiSecret'],_0xea0bb4[_0x2a9d07(0x2a6)],_0xea0bb4[_0x2a9d07(0x176)]);await loadSymbols();const _0x551528=await getCoins(0x0,![],_0xea0bb4['basecoin']);_0x2ff052=cloneDeep(_0x551528[0x1]);}else{const _0x955228=await getCoins();_0x2ff052=cloneDeep(_0x955228[0x1]);}if(_0xea0bb4[_0x2a9d07(0x102)]=='')proxyEmit(_0x2a9d07(0x103),!![]),proxyEmit(_0x2a9d07(0x12b),_0x2ff052);else{_0x2ff052['forEach'](_0x4a7c20=>{const _0x134aec=_0x2a9d07;if(_0x4a7c20[_0x134aec(0x108)]!=_0xea0bb4[_0x134aec(0x102)]&&allSymbols['includes'](_0x4a7c20[_0x134aec(0x231)]))_0x1fe1b9['push'](_0x4a7c20[_0x134aec(0x231)]);});if(_0x1fe1b9['length']==0x0)logHistory(_0x2a9d07(0x233),_0x2a9d07(0x1ae));else{try{_0x1ea363=await getTickers(_0x1fe1b9);}catch(_0x2e3aea){logHistory(_0x2a9d07(0x233),_0x2a9d07(0x1e5)),logger[_0x2a9d07(0x15e)](_0x2a9d07(0x24c),_0x2e3aea),proxyEmit(_0x2a9d07(0x103),![]);return;}_0x2ff052[_0x2a9d07(0x1e9)](_0x341ddc=>{const _0x50c3bd=_0x2a9d07;_0x341ddc['coin']!=_0xea0bb4[_0x50c3bd(0x102)]?_0x1ea363[_0x341ddc[_0x50c3bd(0x231)]]?_0x1ea363[_0x341ddc[_0x50c3bd(0x231)]]['last']?_0x3d695e=_0x341ddc[_0x50c3bd(0x2b3)]?0x1/_0x1ea363[_0x341ddc['symbol']][_0x50c3bd(0x29a)]:_0x1ea363[_0x341ddc[_0x50c3bd(0x231)]][_0x50c3bd(0x29a)]:_0x3d695e=0x0:_0x3d695e=0x0:_0x3d695e=0x1,_0x341ddc[_0x50c3bd(0x1b6)]=formatResult(_0x3d695e,0x8);}),await getMarketCap(_0x2ff052),proxyEmit(_0x2a9d07(0x103),!![]),proxyEmit(_0x2a9d07(0x12b),_0x2ff052);}}}function truncateTradeAmount(_0x4a1192,_0x4746a3){const _0x5cf427=_0x429b06;let _0x2f19bf=0x0;try{_0x2f19bf=exchange[_0x5cf427(0x1d0)](_0x4a1192,_0x4746a3);}catch(_0x1aef4a){}return _0x2f19bf;}function checkMinimums(_0x5e70c6){const _0x2dd4db=_0x429b06;let _0x31cf29=!![];const _0x17c5e0=!_0x5e70c6[_0x2dd4db(0x2b3)]?markets[_0x5e70c6[_0x2dd4db(0x231)]][_0x2dd4db(0x1b5)][_0x2dd4db(0x1f3)]['min']:markets[_0x5e70c6['symbol']][_0x2dd4db(0x1b5)][_0x2dd4db(0x193)][_0x2dd4db(0x207)],_0xa711c4=!_0x5e70c6['reverse']?markets[_0x5e70c6[_0x2dd4db(0x231)]][_0x2dd4db(0x1b5)][_0x2dd4db(0x193)][_0x2dd4db(0x207)]:markets[_0x5e70c6[_0x2dd4db(0x231)]][_0x2dd4db(0x1b5)][_0x2dd4db(0x1f3)][_0x2dd4db(0x207)],_0x48d9be=truncateTradeAmount(_0x5e70c6['symbol'],_0x5e70c6['trade']);_0x5e70c6[_0x2dd4db(0x158)]=_0x48d9be;if(Math[_0x2dd4db(0x195)](_0x48d9be)<_0x17c5e0)_0x31cf29=![];if(Math[_0x2dd4db(0x195)](_0x48d9be)*_0x5e70c6[_0x2dd4db(0x29a)]<_0xa711c4)_0x31cf29=![];if(_0x5e70c6[_0x2dd4db(0x140)]=='sell'){let _0x3c998e=config[_0x2dd4db(0x25b)]['find'](_0x97b7f6=>_0x97b7f6['coin']==_0x5e70c6[_0x2dd4db(0x108)]);if(_0x3c998e[_0x2dd4db(0xf9)]>0x0){if(Math[_0x2dd4db(0x195)](_0x48d9be)>_0x5e70c6['number']-_0x3c998e[_0x2dd4db(0xf9)])_0x31cf29=![];}else{if(Math[_0x2dd4db(0x195)](_0x48d9be)>_0x5e70c6[_0x2dd4db(0x20c)])_0x31cf29=![];}}if(_0x5e70c6[_0x2dd4db(0x140)]==_0x2dd4db(0x12d)){let _0x512dfd=config['portfolio']['find'](_0x4a1c0d=>_0x4a1c0d[_0x2dd4db(0x108)]==config[_0x2dd4db(0x102)]),_0x1765e5=currentCoins[_0x2dd4db(0x130)](_0x449c22=>_0x449c22[_0x2dd4db(0x108)]==config['basecoin']);if(_0x512dfd['offset']>0x0){if(Math['abs'](_0x48d9be)*_0x5e70c6['last']>_0x1765e5[_0x2dd4db(0x20c)]-_0x512dfd[_0x2dd4db(0xf9)])_0x31cf29=![];}else{if(Math['abs'](_0x48d9be)*_0x5e70c6[_0x2dd4db(0x29a)]>_0x1765e5[_0x2dd4db(0x20c)])_0x31cf29=![];}}return _0x31cf29;}async function getBalances(_0x3c2421=!![]){const _0x39e167=_0x429b06;if(botPaused)return;let _0x27545b=0x0,_0x1ce4e6;const _0x37275a=config['threshold'];if(config[_0x39e167(0x1e1)]&&config['change24h']<0x0)await validate24hChanges();currentCoins[_0x39e167(0x1e9)](_0x3f3adb=>{const _0x4b5059=_0x39e167;if(_0x3f3adb['coin']!=config[_0x4b5059(0x102)]){let _0x11cab4=gTicker[noslash(_0x3f3adb[_0x4b5059(0x231)])];_0x1ce4e6=_0x3f3adb[_0x4b5059(0x2b3)]?0x1/_0x11cab4:_0x11cab4;}else _0x1ce4e6=0x1;let _0x388c7c=_0x3f3adb[_0x4b5059(0x20c)]*_0x1ce4e6;_0x27545b+=_0x388c7c,_0x3f3adb[_0x4b5059(0x29a)]=formatResult(Number(_0x1ce4e6),0x8),_0x3f3adb[_0x4b5059(0x11a)]=_0x388c7c;}),currentCoins[_0x39e167(0x1e9)](_0x464ea4=>{const _0x5e2986=_0x39e167;let _0x56fdfd=config['portfolio'][_0x5e2986(0x130)](_0x4a1d31=>_0x4a1d31[_0x5e2986(0x108)]==_0x464ea4['coin']),_0x467f57=Number(_0x56fdfd[_0x5e2986(0x29d)]),_0x2ab75b=_0x464ea4[_0x5e2986(0x11a)]/_0x27545b*0x64,_0x4a2ecd=_0x467f57*_0x27545b/0x64/_0x464ea4[_0x5e2986(0x29a)]-_0x464ea4[_0x5e2986(0x20c)];_0x464ea4[_0x5e2986(0x29d)]=formatResult(_0x2ab75b,0x3),_0x464ea4[_0x5e2986(0x157)]=formatResult(_0x467f57,0x3),_0x464ea4[_0x5e2986(0x158)]=formatResult(_0x4a2ecd,0x8),_0x464ea4['side']='',_0x464ea4[_0x5e2986(0x276)]=![];if(_0x464ea4[_0x5e2986(0x108)]!=config[_0x5e2986(0x102)]){if(_0x464ea4[_0x5e2986(0x29d)]>_0x467f57)_0x464ea4[_0x5e2986(0x140)]='sell',_0x464ea4[_0x5e2986(0x276)]=checkMinimums(_0x464ea4);else _0x464ea4[_0x5e2986(0x29d)]<_0x467f57&&(_0x464ea4['side']=_0x5e2986(0x12d),_0x464ea4[_0x5e2986(0x276)]=checkMinimums(_0x464ea4));}_0x464ea4[_0x5e2986(0x118)]=_0x464ea4[_0x5e2986(0x29d)]/_0x464ea4['target']-0x1;if(_0x464ea4[_0x5e2986(0xf8)]==_0x5e2986(0x17b)||_0x464ea4['orderstatus']=='canceled')_0x464ea4[_0x5e2986(0xf8)]='none';}),currentCoins['sort']((_0x2a2974,_0x58a10b)=>_0x2a2974['delta']<_0x58a10b[_0x39e167(0x118)]?0x1:_0x58a10b[_0x39e167(0x118)]<_0x2a2974['delta']?-0x1:0x0);const _0x44dac8=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x44dac8[_0x39e167(0x263)],'usd':_0x44dac8[_0x39e167(0x11f)],'portfolio':JSON['stringify'](currentCoins),'threshold':_0x37275a},proxyEmit(_0x39e167(0x12c),{'serverversion':serverversion,'balances':lastBalances});if(_0x3c2421){if(config['headless'])headlessMode({'portfolio':currentCoins,'threshold':_0x37275a});else lockOrders==ORDERS[_0x39e167(0x10c)]&&!coolingDown&&notifyBalance({'portfolio':currentCoins,'threshold':_0x37275a});}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x57b814=getNormalizedPerformance();getStartingBalances(_0x57b814),emitPerformance(_0x57b814);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}function getPnL(){const _0x138701=_0x429b06;let _0x2cd4c7=dbCoinResults[_0x138701(0x186)]('coins')[_0x138701(0x11a)](),_0x40d6e3=0x0;return Object[_0x138701(0x28c)](_0x2cd4c7)['forEach'](([_0x4d2706,_0x112a14])=>{const _0x1d907c=_0x138701;_0x40d6e3+=_0x112a14[_0x1d907c(0x293)];}),_0x40d6e3;}async function storePerformance(){const _0x1a5126=_0x429b06;if(!lastBalances)return;let _0x42df8a=[],_0x2250cd;const _0x3dc4e3=getPnL();let _0x3a005a=JSON['parse'](lastBalances[_0x1a5126(0x25b)]);_0x3a005a[_0x1a5126(0x283)]((_0x27bb60,_0x4c5cf2)=>_0x27bb60[_0x1a5126(0x108)]>_0x4c5cf2[_0x1a5126(0x108)]?0x1:_0x4c5cf2['coin']>_0x27bb60['coin']?-0x1:0x0),_0x3a005a[_0x1a5126(0x1e9)](_0x56f05f=>{const _0x5ed0d7=_0x1a5126;let _0xcf1f27={'coin':_0x56f05f[_0x5ed0d7(0x108)],'number':_0x56f05f[_0x5ed0d7(0x20c)],'price':_0x56f05f[_0x5ed0d7(0x29a)]};_0x42df8a[_0x5ed0d7(0x22f)](_0xcf1f27);});const _0x291852=await getFiat(),_0x409141=getTimeStamp()['split']('\x20')[0x0],_0xb6398=dbPerformance[_0x1a5126(0x186)](_0x1a5126(0x1d8))['find']({'date':_0x409141})['value']();_0x2250cd={'date':_0x409141,'eur':_0x291852[_0x1a5126(0x263)],'usd':_0x291852[_0x1a5126(0x11f)],'coins':_0x42df8a,'pnl':_0x3dc4e3},_0xb6398?_0x2250cd[_0x1a5126(0x212)]!=config[_0x1a5126(0x2ad)]&&dbPerformance[_0x1a5126(0x186)](_0x1a5126(0x1d8))[_0x1a5126(0x130)]({'date':_0x409141})[_0x1a5126(0x278)](_0x2250cd)[_0x1a5126(0x1c6)]():dbPerformance[_0x1a5126(0x186)](_0x1a5126(0x1d8))[_0x1a5126(0x22f)](_0x2250cd)[_0x1a5126(0x1c6)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x5ddc1e=_0x429b06;let _0x58a66f=[];if(dbPerformance[_0x5ddc1e(0x148)](_0x5ddc1e(0x1d8))[_0x5ddc1e(0x11a)]()){let _0x2c2519=dbPerformance[_0x5ddc1e(0x186)](_0x5ddc1e(0x1d8))[_0x5ddc1e(0x115)]()['filter'](_0x1295a0=>{const _0x451fd0=_0x5ddc1e;if(_0x1295a0[_0x451fd0(0x254)]['length']==0x0)return![];else return!![];})['sortBy'](_0x5ddc1e(0x212))[_0x5ddc1e(0x11a)](),_0x368e7c=[...config[_0x5ddc1e(0x26b)]];_0x368e7c['sort']((_0x2cc884,_0x15302f)=>_0x2cc884[_0x5ddc1e(0x212)]>_0x15302f['date']?-0x1:_0x15302f[_0x5ddc1e(0x212)]>_0x2cc884['date']?0x1:0x0);let _0x170324=0x1,_0xdc2ddc=[],_0x22a2b5=0x0;_0x2c2519[_0x5ddc1e(0x121)]()[_0x5ddc1e(0x2b3)]()[_0x5ddc1e(0x1e9)]((_0x584f26,_0x2d0d26)=>{const _0xf7da17=_0x5ddc1e;if(_0x368e7c[_0x22a2b5]){if(_0x2c2519[_0x2c2519[_0xf7da17(0x196)]-_0x2d0d26]&&_0x368e7c[_0x22a2b5][_0xf7da17(0x212)]==_0x2c2519[_0x2c2519[_0xf7da17(0x196)]-_0x2d0d26][_0xf7da17(0x212)]){if(_0x2d0d26<_0x2c2519[_0xf7da17(0x196)]){let _0x415531=0x0,_0x335034=0x0;_0x2c2519[_0x2c2519[_0xf7da17(0x196)]-_0x2d0d26][_0xf7da17(0x254)][_0xf7da17(0x1e9)](_0x21efbc=>{const _0x44e598=_0xf7da17;_0x335034+=_0x21efbc[_0x44e598(0x20c)]*_0x21efbc[_0x44e598(0x1b6)];}),_0x368e7c[_0x22a2b5]['changes']['forEach'](_0x13f822=>{const _0x1c97c4=_0xf7da17;_0x415531+=_0x13f822[_0x1c97c4(0x20c)]*_0x13f822[_0x1c97c4(0x1b6)];}),_0x170324*=_0x415531/(_0x335034-_0x415531)+0x1;}_0x22a2b5++;}}let _0x55819d=0x0;_0x584f26[_0xf7da17(0x254)][_0xf7da17(0x1e9)](_0x10713f=>{const _0x5a04c9=_0xf7da17;_0x55819d+=_0x10713f['number']*_0x10713f[_0x5a04c9(0x1b6)];}),_0xdc2ddc[_0x2c2519[_0xf7da17(0x196)]-_0x2d0d26-0x1]=_0x55819d*(_0x170324-0x1);});let _0x5076bb=[];_0x368e7c=[...config[_0x5ddc1e(0x26b)]]||[];let _0x5a04b7=0x0;_0x22a2b5=0x0,_0x2c2519['forEach']((_0x2fd000,_0x22ea19)=>{const _0x5b9bba=_0x5ddc1e;if(_0x368e7c[_0x22a2b5]){const _0x5e4677=fns[_0x5b9bba(0x245)](_0x368e7c[_0x22a2b5][_0x5b9bba(0x212)],_0x5b9bba(0x22a),new Date()),_0x3af301=fns[_0x5b9bba(0x245)](_0x2fd000[_0x5b9bba(0x212)],_0x5b9bba(0x22a),new Date());if(fns['isEqual'](_0x5e4677,_0x3af301)){let _0x1d82fe=0x0;_0x368e7c[_0x22a2b5][_0x5b9bba(0x1fd)][_0x5b9bba(0x1e9)](_0x431ffc=>{const _0x397fd1=_0x5b9bba;!_0x5076bb[_0x431ffc[_0x397fd1(0x108)]]?_0x5076bb[_0x431ffc[_0x397fd1(0x108)]]=_0x431ffc[_0x397fd1(0x20c)]:(_0x1d82fe=_0x5076bb[_0x431ffc[_0x397fd1(0x108)]],_0x5076bb[_0x431ffc['coin']]+=_0x431ffc[_0x397fd1(0x20c)]);const _0x457919=_0x2fd000[_0x397fd1(0x254)][_0x397fd1(0x130)](_0x27fe53=>_0x27fe53[_0x397fd1(0x108)]==_0x431ffc[_0x397fd1(0x108)]);(!_0x457919||_0x457919[_0x397fd1(0x20c)]==0x0)&&(_0x5a04b7+=(-_0x431ffc[_0x397fd1(0x20c)]-_0x1d82fe)*_0x431ffc['price']);}),_0x22a2b5++;}}_0x2fd000[_0x5b9bba(0x254)]['forEach']((_0x34df25,_0x22d118)=>{const _0x143af5=_0x5b9bba;_0x5076bb[_0x34df25['coin']]&&(_0x34df25[_0x143af5(0x19a)]=_0x5076bb[_0x34df25[_0x143af5(0x108)]]);}),_0x58a66f[_0x5b9bba(0x22f)]({'date':_0x2fd000['date'],'eur':_0x2fd000[_0x5b9bba(0x263)],'usd':_0x2fd000[_0x5b9bba(0x11f)],'offset':_0xdc2ddc[_0x22ea19],'netoffset':_0x5a04b7,'coins':_0x2fd000[_0x5b9bba(0x254)],'pnl':_0x2fd000['pnl']});});}return _0x58a66f;}function emitPerformance(_0x4c1ab){const _0x5678f3=_0x429b06;_0x4c1ab[_0x5678f3(0x196)]!==0x0?(proxyEmit('performance',_0x4c1ab),lastPerformanceEmitted=getDate()):proxyEmit(_0x5678f3(0x1fc),[]);}function getPerf(_0x23a7d0,_0x453042){const _0x240447=_0x429b06;let _0x539e59=0x0,_0x108865=0x0,_0x325d5f=0x0;_0x23a7d0['coins'][_0x240447(0x1e9)](_0x2ee0d0=>{const _0x1130fd=_0x240447;_0x539e59+=_0x2ee0d0[_0x1130fd(0x20c)]*_0x2ee0d0[_0x1130fd(0x1b6)];});_0x453042&&(_0x539e59+=_0x23a7d0['offset']);if(config[_0x240447(0x102)]===_0x240447(0x258)||config[_0x240447(0x102)]===_0x240447(0x282)||config[_0x240447(0x102)]===_0x240447(0x201))_0x108865=_0x539e59*_0x23a7d0[_0x240447(0x263)],_0x325d5f=_0x539e59*_0x23a7d0['usd'];else{if(usdBasecoins[_0x240447(0x1c4)](config[_0x240447(0x102)]))_0x108865=_0x539e59*_0x23a7d0[_0x240447(0x263)]/_0x23a7d0[_0x240447(0x11f)],_0x325d5f=_0x539e59;else config[_0x240447(0x102)]===_0x240447(0x16a)&&(_0x108865=_0x539e59,_0x325d5f=_0x539e59*_0x23a7d0[_0x240447(0x11f)]/_0x23a7d0[_0x240447(0x263)]);}return[_0x539e59,_0x108865,_0x325d5f];}function CurrencyFactor(_0x5c0cd5,_0x46b7bb,_0x23e085){const _0x2e9ca3=_0x429b06;let _0x3a3ff9;if(_0x46b7bb===_0x2e9ca3(0x258)||_0x46b7bb===_0x2e9ca3(0x282)||_0x46b7bb===_0x2e9ca3(0x201))_0x3a3ff9=_0x23e085===_0x2e9ca3(0x16a)?_0x5c0cd5[_0x2e9ca3(0x263)]:_0x5c0cd5[_0x2e9ca3(0x11f)];else{if(usdBasecoins[_0x2e9ca3(0x1c4)](_0x46b7bb))_0x3a3ff9=_0x23e085===_0x2e9ca3(0x16a)?_0x5c0cd5[_0x2e9ca3(0x263)]/_0x5c0cd5['usd']:0x1;else _0x46b7bb===_0x2e9ca3(0x16a)&&(_0x3a3ff9=_0x23e085===_0x2e9ca3(0x16a)?0x1:_0x5c0cd5[_0x2e9ca3(0x11f)]/_0x5c0cd5[_0x2e9ca3(0x263)]);}return _0x3a3ff9;}function getKPIs(_0x4810d0,_0x4bbb47='EUR'){const _0x5e1f34=_0x429b06,_0x166c29=config[_0x5e1f34(0x102)],_0x1099d9=lastBalances,_0x5c48b4=currentCoins,_0x26d2f6=getNormalizedPerformance(),_0xb485ae=CurrencyFactor(_0x1099d9,config[_0x5e1f34(0x102)],_0x4bbb47);let _0x118657=0x0;_0x5c48b4[_0x5e1f34(0x1e9)](_0x4fb8e7=>{const _0x2e0949=_0x5e1f34;_0x118657+=_0x4fb8e7[_0x2e0949(0x20c)]*_0x4fb8e7['last'];});_0x4810d0[_0x5e1f34(0x1c4)](_0x5e1f34(0x24f))&&(_0x118657*=_0xb485ae);let _0x23f2ad;if(_0x118657!==0x0){if(_0x4810d0===_0x5e1f34(0x102)||_0x4810d0===_0x5e1f34(0x24f)){if(_0x4810d0===_0x5e1f34(0x102))_0x23f2ad=(_0x118657/startingBalances[_0x5e1f34(0x102)]-0x1)*0x64;else{if(_0x4bbb47===_0x5e1f34(0x16a))_0x23f2ad=(_0x118657/startingBalances[_0x5e1f34(0x263)]-0x1)*0x64;else _0x23f2ad=(_0x118657/startingBalances['usd']-0x1)*0x64;}}if(_0x4810d0[_0x5e1f34(0x1c4)](_0x5e1f34(0x1b8))){let _0x327f9e=0x0;if(startingBalances[_0x5e1f34(0x254)])_0x5c48b4[_0x5e1f34(0x1e9)](_0xd6cc80=>{const _0x1d5715=_0x5e1f34;let _0x177e84=startingBalances[_0x1d5715(0x254)][_0x1d5715(0x130)](_0x590a0b=>_0x590a0b[_0x1d5715(0x108)]===_0xd6cc80[_0x1d5715(0x108)]);if(_0x177e84&&_0x177e84['coin']&&_0xd6cc80[_0x1d5715(0x20c)]!==0x0)_0x327f9e+=_0x177e84[_0x1d5715(0x20c)]*_0xd6cc80[_0x1d5715(0x29a)];});let _0x425ee1=0x0;if(_0x26d2f6[_0x5e1f34(0x196)]!==0x0){let _0x39e449=_0x26d2f6[_0x26d2f6[_0x5e1f34(0x196)]-0x1];_0x425ee1=_0x39e449[_0x5e1f34(0x285)];}_0x327f9e-=_0x425ee1;let _0x1af976;_0x4810d0===_0x5e1f34(0x2b1)&&(_0x1af976=startingBalances[_0x5e1f34(0x102)]),_0x4810d0===_0x5e1f34(0x29c)&&(_0x1af976=_0x4bbb47==='EUR'?startingBalances[_0x5e1f34(0x263)]:startingBalances[_0x5e1f34(0x11f)],_0x327f9e*=_0xb485ae),_0x23f2ad=(_0x118657-_0x327f9e)/_0x1af976*0x64,_0x118657=_0x118657-_0x327f9e;}if(_0x4810d0[_0x5e1f34(0x1c4)](_0x5e1f34(0x173))){if(_0x26d2f6[_0x5e1f34(0x196)]!==0x0&&_0x5c48b4[_0x5e1f34(0x196)]!==0x0){let _0x34139a,_0x37f122=_0x26d2f6[_0x26d2f6['length']-0x1]['pnl'];_0x4810d0[_0x5e1f34(0x1c4)]('fiat')?(_0x34139a=_0x4bbb47===_0x5e1f34(0x16a)?startingBalances[_0x5e1f34(0x263)]:startingBalances[_0x5e1f34(0x11f)],_0x37f122*=CurrencyFactor(_0x1099d9,_0x166c29,_0x4bbb47)):_0x34139a=startingBalances['basecoin'],_0x23f2ad=_0x37f122/_0x34139a*0x64,_0x118657=_0x37f122;}}if(_0x23f2ad){if(_0x23f2ad<0x64)_0x23f2ad=_0x23f2ad[_0x5e1f34(0x271)](0x2);else{if(_0x23f2ad<0x3e8)_0x23f2ad=_0x23f2ad[_0x5e1f34(0x271)](0x1);else _0x23f2ad=_0x23f2ad['toFixed'](0x0);}}else _0x23f2ad=Number('0')[_0x5e1f34(0x271)](0x2);if(_0x118657){if(Math[_0x5e1f34(0x195)](_0x118657)<0.000001)_0x118657=_0x118657[_0x5e1f34(0x271)](0x2);else{if(Math['abs'](_0x118657)<0.1)_0x118657=_0x118657[_0x5e1f34(0x271)](0x6);else{if(Math[_0x5e1f34(0x195)](_0x118657)<0x1)_0x118657=_0x118657[_0x5e1f34(0x271)](0x5);else{if(Math[_0x5e1f34(0x195)](_0x118657)<0xa)_0x118657=_0x118657[_0x5e1f34(0x271)](0x4);else{if(Math[_0x5e1f34(0x195)](_0x118657)<0x64)_0x118657=_0x118657[_0x5e1f34(0x271)](0x3);else{if(Math[_0x5e1f34(0x195)](_0x118657)<0x3e8)_0x118657=_0x118657['toFixed'](0x2);else _0x118657=_0x118657['toFixed'](0x2);}}}}}}else _0x118657=Number('0')[_0x5e1f34(0x271)](0x2);}else _0x23f2ad=Number('0')[_0x5e1f34(0x271)](0x2);if(_0x23f2ad>=0x0)_0x23f2ad='+'+_0x23f2ad;return{'value':_0x118657,'change':_0x23f2ad};}async function getStartingBalances(_0x58d1c7,_0x140280=!![]){const _0x51e28f=_0x429b06;if(_0x58d1c7['length']!==0x0){const [_0x3b53d7,_0x1d71e2,_0x4bc162]=getPerf(_0x58d1c7[0x0],!![]);let _0x29019c=[];config[_0x51e28f(0x25b)][_0x51e28f(0x1e9)](_0x3eae0a=>{const _0x5d4d2c=_0x51e28f;let _0x299303=0x0,_0x365c28;config['liquidity']['forEach'](_0x450953=>{const _0xda6398=_0x2d2a;let _0xdaaa83=_0x450953['changes'][_0xda6398(0x130)](_0xa8f797=>_0xa8f797[_0xda6398(0x108)]==_0x3eae0a[_0xda6398(0x108)]);if(_0xdaaa83){_0x299303+=_0xdaaa83['number'];if(!_0x365c28)_0x365c28=_0xdaaa83['price'];}}),_0x29019c['push']({'coin':_0x3eae0a[_0x5d4d2c(0x108)],'number':_0x299303,'initialprice':_0x365c28});});const _0x3a6ec2={'basecoin':_0x3b53d7,'eur':_0x1d71e2,'usd':_0x4bc162,'coins':_0x29019c};if(_0x140280)proxyEmit(_0x51e28f(0x24a),_0x3a6ec2);startingBalances=_0x3a6ec2;}}function headlessMode(_0x40bd3b){const _0x594e71=_0x429b06;let _0x854956=_0x40bd3b[_0x594e71(0x25b)],_0x4803df=_0x40bd3b['threshold'],_0x2afc5c=[];for(let _0x153775 of _0x854956){if(_0x153775[_0x594e71(0x108)]!=config[_0x594e71(0x102)]){if(_0x153775[_0x594e71(0x118)]>=_0x4803df/0x64){if(_0x153775[_0x594e71(0x276)])_0x2afc5c[_0x594e71(0x22f)](_0x153775);}else{if(_0x153775['delta']<=-_0x4803df/0x64){if(_0x153775[_0x594e71(0x276)])_0x2afc5c[_0x594e71(0x22f)](_0x153775);}}}}_0x2afc5c['length']>0x0&&placeOrder(_0x2afc5c);}function notifyBalance(_0x490864){const _0x3dcf9e=_0x429b06;let _0x3e822e=_0x490864[_0x3dcf9e(0x25b)],_0x230ebc=_0x490864[_0x3dcf9e(0x20e)],_0x1e3a27=[];for(let _0x23ba2c of _0x3e822e){if(_0x23ba2c['coin']!=config['basecoin']){if(_0x23ba2c[_0x3dcf9e(0x118)]>=_0x230ebc/0x64){if(_0x23ba2c[_0x3dcf9e(0x276)])_0x1e3a27['push'](_0x23ba2c);}else{if(_0x23ba2c[_0x3dcf9e(0x118)]<=-_0x230ebc/0x64){if(_0x23ba2c[_0x3dcf9e(0x276)])_0x1e3a27['push'](_0x23ba2c);}}}}if(_0x1e3a27['length']>0x0){let _0x5aadd2=_0x1e3a27[_0x3dcf9e(0x171)](_0x2b74c7=>_0x2b74c7[_0x3dcf9e(0x108)]);_0x5aadd2[_0x3dcf9e(0x283)]();let _0x329d8f=_0x5aadd2[_0x3dcf9e(0x255)](',\x20');if(!lastCoinsToBalance)logHistory(_0x3dcf9e(0x2a1),_0x3dcf9e(0x1e7));lastCoinsToBalance=_0x329d8f;}}function symbolToCoin(_0x2ed416){const _0x56685e=_0x429b06;let _0x76593e;if(_0x2ed416[_0x56685e(0x1c4)]('/'+config[_0x56685e(0x102)]))_0x76593e=_0x2ed416['replace']('/'+config[_0x56685e(0x102)],'');if(_0x2ed416[_0x56685e(0x1c4)](config[_0x56685e(0x102)]+'/'))_0x76593e=_0x2ed416[_0x56685e(0x101)](config[_0x56685e(0x102)]+'/','');return _0x76593e;}function setLockOrders(_0x190e28){const _0x144670=_0x429b06;lockOrders=_0x190e28,logger[_0x144670(0x15e)](_0x144670(0x215)+Object[_0x144670(0x123)](ORDERS)[lockOrders]);}async function unlockOrders(_0xcb725c=![]){const _0x7a0b72=_0x429b06;if(allOrdersPlaced&&lockOrders==ORDERS['LOCKED']){setLockOrders(ORDERS['UNLOCKING']);if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);if(_0xcb725c){const _0x38803b=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x38803b,setBlockTransactionDetection(![]);}validateOrdersState=_0x7a0b72(0x19a),persistOpenOrders([]),setLockOrders(ORDERS[_0x7a0b72(0x10c)]);}}async function validateOrders(_0x48bd53){const _0x19d8be=_0x429b06;if(_0x48bd53)validateOrdersState=_0x48bd53;logger['debug']('1\x20-\x20Validate\x20orders:\x20'+validateOrdersState+_0x19d8be(0x2ba)+Object[_0x19d8be(0x123)](ORDERS)[lockOrders]);let _0x774374=[],_0x5aa608=config['ordertype']==_0x19d8be(0x10a)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config['timeout']*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS['LOCKED'])return;logger['debug'](_0x19d8be(0x1a3)+validateOrdersState);for(let _0x1739c6=lastOrders[_0x19d8be(0x196)]-0x1;_0x1739c6>=0x0;_0x1739c6--){let _0x29c025=lastOrders[_0x1739c6],_0x153bfe=![];_0x29c025[_0x19d8be(0x17b)]>0x0&&(_0x153bfe=!![]),_0x774374[_0x19d8be(0x22f)](_0x153bfe),_0x153bfe&&config['ordertype']!=_0x19d8be(0x10a)&&logHistory('order',_0x19d8be(0x154)+_0x29c025['symbol']+'\x20'+_0x29c025[_0x19d8be(0x140)]+'\x20#'+formatResult(_0x29c025[_0x19d8be(0x17b)],0x8)+'\x20@'+formatResult(_0x29c025[_0x19d8be(0x1b6)],0x8)),_0x153bfe&&lastOrders['splice'](_0x1739c6,0x1);}persistOpenOrders(lastOrders);const _0x36bbba=coolingDown?_0x19d8be(0x236):_0x19d8be(0x1d1);if(validateOrdersState=='initial'){validateOrdersState=_0x19d8be(0x11d);if(_0x774374[_0x19d8be(0x1c4)](![])){}else await unlockOrders();}else{if(validateOrdersState=='ongoing'){if(_0x774374[_0x19d8be(0x1c4)](![])){}else await unlockOrders();}else{if(validateOrdersState=='final'){let _0x2c0305=!![];if(_0x774374[_0x19d8be(0x1c4)](![])){if(config[_0x19d8be(0x232)]==_0x19d8be(0x10a))logHistory(_0x19d8be(0x1d4),_0x19d8be(0x14c)+Math[_0x19d8be(0x125)](_0x5aa608*validateOrderInterval/0xea60)+_0x19d8be(0x15f)+_0x36bbba),await unlockOrders(!![]);else{_0x2c0305=await cancelOrders();if(_0x2c0305)logHistory('success','Unfilled\x20order(s)\x20canceled\x20after\x20'+Math[_0x19d8be(0x125)](_0x5aa608*validateOrderInterval/0xea60)+_0x19d8be(0x15f)+_0x36bbba),await unlockOrders(!![]);else{validateOrdersState=_0x19d8be(0x11d),logHistory(_0x19d8be(0x233),'Unfilled\x20order(s)\x20could\x20not\x20be\x20canceled\x20after\x20'+Math[_0x19d8be(0x125)](_0x5aa608*validateOrderInterval/0xea60)+_0x19d8be(0x15f)+_0x36bbba),logHistory('error',_0x19d8be(0x17d));const _0x44485f=config['ordertype']==_0x19d8be(0x10a)?validateOrderTimeout*0x3c*0x3e8:config[_0x19d8be(0x1b3)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x44485f);}}}else await unlockOrders(!![]);}else{if(validateOrdersState==_0x19d8be(0x238)){if(config[_0x19d8be(0x232)]!='market')logHistory(_0x19d8be(0x1d4),_0x19d8be(0x143)+_0x36bbba);await unlockOrders(!![]);}}}}}async function cancelOrders(){const _0x1018cf=_0x429b06;let _0x26c14e=!![],_0xe44293;for(const _0x48b432 of lastOrders){let _0x250cf9=![],_0x3b9594=0x0;while(!_0x250cf9&&_0x3b9594<maxRetries){try{const _0x2d2faf=await exchange['cancelOrder'](_0x48b432[_0x1018cf(0x264)],_0x48b432['symbol']);_0x250cf9=!![];}catch(_0x408c9d){_0x408c9d[_0x1018cf(0x144)]()['includes']('OrderNotFound')?_0x250cf9=!![]:(_0xe44293=_0x408c9d,_0x250cf9=![]);}!_0x250cf9&&(_0x3b9594++,await sleep(retryInterval));}_0x26c14e=_0x26c14e&&_0x250cf9;}return!_0x26c14e&&await handleError(_0xe44293,_0x1018cf(0x1ed)),_0x26c14e;}async function initCoinResults(_0x46f69b){const _0x2fa5b7=_0x429b06;_0x46f69b?logger['debug']('Resetting\x20coin\x20results:\x20'+_0x46f69b):logger[_0x2fa5b7(0x15e)]('Initializing\x20coin\x20results'),config[_0x2fa5b7(0x25b)][_0x2fa5b7(0x1e9)](_0x5a15ff=>{const _0x16826d=_0x2fa5b7;if(!_0x5a15ff[_0x16826d(0x1a4)]&&_0x5a15ff['coin']!=config['basecoin']){const _0x3da214=currentCoins[_0x16826d(0x130)](_0x166b1f=>_0x166b1f[_0x16826d(0x108)]==_0x5a15ff[_0x16826d(0x108)]),_0x306648=gTicker[noslash(_0x5a15ff[_0x16826d(0x231)])];let _0x319f06=_0x3da214?_0x3da214[_0x16826d(0x20c)]:null,_0x265fb1=_0x5a15ff['reverse']?0x1/_0x306648:_0x306648,_0x31c7f5;config[_0x16826d(0x26b)][_0x16826d(0x1e9)](_0x505048=>{const _0x1f7ec9=_0x16826d;!_0x31c7f5&&(_0x31c7f5=_0x505048[_0x1f7ec9(0x1fd)][_0x1f7ec9(0x130)](_0x542722=>_0x542722[_0x1f7ec9(0x108)]==_0x5a15ff['coin']),_0x31c7f5&&(_0x319f06=_0x31c7f5['number'],_0x265fb1=_0x31c7f5['price']));});let _0x496e9c=dbCoinResults[_0x16826d(0x186)](_0x16826d(0x254))[_0x16826d(0x130)]({'coin':_0x5a15ff[_0x16826d(0x108)]})[_0x16826d(0x11a)]();if(!_0x496e9c){const _0x59d940={'coin':_0x5a15ff[_0x16826d(0x108)],'number':_0x319f06,'breakeven':_0x265fb1,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x16826d(0x186)](_0x16826d(0x254))[_0x16826d(0x22f)](_0x59d940)[_0x16826d(0x1c6)]();}else{if(_0x46f69b&&_0x5a15ff[_0x16826d(0x108)]==_0x46f69b){const _0x569958={'coin':_0x5a15ff[_0x16826d(0x108)],'number':_0x319f06,'breakeven':_0x265fb1,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get'](_0x16826d(0x254))[_0x16826d(0x130)]({'coin':_0x5a15ff['coin']})['assign'](_0x569958)[_0x16826d(0x1c6)]();}}}});}async function placeOrder(_0x17b016){const _0x32bcf0=_0x429b06,_0x2b8aae=config[_0x32bcf0(0x232)]==_0x32bcf0(0x10a)?_0x32bcf0(0x10a):_0x32bcf0(0x14f);if(lockOrders==ORDERS[_0x32bcf0(0x10c)]&&!coolingDown){setLockOrders(ORDERS['LOCKED']);while(transactionDetectionOngoing){await sleep(0x64);}logger[_0x32bcf0(0x15e)]('Placing\x20order\x20for:\x20'+_0x17b016[_0x32bcf0(0x171)](_0x353193=>_0x353193[_0x32bcf0(0x108)])['join'](',\x20')),lastCoinsToBalance='',allOrdersPlaced=![],validateOrdersState=_0x32bcf0(0x19a);let _0x3950a2=![];lastOrders=[];const _0x3988a9=config[_0x32bcf0(0x20e)];for(const _0x1a6c63 of _0x17b016){let _0x5d9bda,_0x2d1b7c,_0x39afa3,_0x27f095,_0x4c4d0a,_0x265e84=_0x1a6c63[_0x32bcf0(0x231)];logger[_0x32bcf0(0x15e)](_0x32bcf0(0x1b7)+_0x1a6c63[_0x32bcf0(0x108)]+'\x20'+_0x1a6c63[_0x32bcf0(0x20c)]+'\x20'+_0x1a6c63[_0x32bcf0(0x29a)]+'\x20'+_0x1a6c63[_0x32bcf0(0x29d)]+'%\x20'+_0x1a6c63['target']+'%\x20'+(0x64*_0x1a6c63[_0x32bcf0(0x118)])[_0x32bcf0(0x271)](0x2)+'%\x20('+_0x3988a9[_0x32bcf0(0x271)](0x2)+'%)');const _0x4b9f25=currentCoins[_0x32bcf0(0x130)](_0xc91e93=>_0xc91e93['coin']==_0x1a6c63[_0x32bcf0(0x108)]);_0x4b9f25&&(_0x4b9f25['prevnumber']=_0x1a6c63['number']);try{const _0xbecf14=await exchange[_0x32bcf0(0x221)](_0x265e84);_0x5d9bda=_0x1a6c63[_0x32bcf0(0x2b3)]?0x1/_0x1a6c63[_0x32bcf0(0x29a)]:_0x1a6c63[_0x32bcf0(0x29a)],_0x2d1b7c=_0xbecf14[_0x32bcf0(0x277)],_0x39afa3=_0xbecf14['ask'];_0x1a6c63[_0x32bcf0(0x2b3)]?(_0x27f095=_0x1a6c63['side']==_0x32bcf0(0x12d)?'sell':_0x32bcf0(0x12d),_0x4c4d0a=Math[_0x32bcf0(0x195)](_0x1a6c63[_0x32bcf0(0x158)])/_0x5d9bda):(_0x27f095=_0x1a6c63[_0x32bcf0(0x140)],_0x4c4d0a=Math[_0x32bcf0(0x195)](_0x1a6c63[_0x32bcf0(0x158)]));_0x2b8aae==_0x32bcf0(0x14f)&&(config[_0x32bcf0(0x232)]==_0x32bcf0(0x1e4)&&(_0x5d9bda=_0x27f095==_0x32bcf0(0x12d)?_0x2d1b7c:_0x39afa3),config['ordertype']=='limit-low'&&(_0x5d9bda=_0x27f095==_0x32bcf0(0x12d)?_0x39afa3:_0x2d1b7c));_0x4c4d0a=formatResult(_0x4c4d0a,0x8),_0x5d9bda=formatResult(_0x5d9bda,0x8);const _0x2c7533=_0x27f095==_0x32bcf0(0x1a8)?config['emojisell']?String[_0x32bcf0(0x1b2)]('0x'+config[_0x32bcf0(0x105)])+'\x20':'':config['emojibuy']?String['fromCodePoint']('0x'+config['emojibuy'])+'\x20':'',_0xb54ef6=_0x2b8aae==_0x32bcf0(0x10a)?_0x32bcf0(0x10b):config[_0x32bcf0(0x232)]==_0x32bcf0(0x1e4)?_0x32bcf0(0x234):_0x32bcf0(0x1c8),_0x45d114=(Math['floor'](Math['random']()*0x35a4e900)+0x5f5e100)[_0x32bcf0(0x144)]();lastOrders[_0x32bcf0(0x22f)]({'customId':_0x45d114,'symbol':_0x265e84,'coin':_0x1a6c63[_0x32bcf0(0x108)],'amount':_0x4c4d0a,'price':_0x5d9bda,'side':_0x27f095,'reverse':_0x1a6c63[_0x32bcf0(0x2b3)],'filled':0x0});let _0x33e050;_0x2b8aae==_0x32bcf0(0x10a)?_0x27f095==_0x32bcf0(0x12d)&&[_0x32bcf0(0x135),'Bitget','Cex','Huobi',_0x32bcf0(0x206)][_0x32bcf0(0x1c4)](config['exchange'])?_0x33e050=await exchange[_0x32bcf0(0x22d)](_0x265e84,_0x2b8aae,_0x27f095,_0x4c4d0a,_0x5d9bda):_0x33e050=await exchange[_0x32bcf0(0x22d)](_0x265e84,_0x2b8aae,_0x27f095,_0x4c4d0a,undefined):_0x33e050=await exchange['createOrder'](_0x265e84,_0x2b8aae,_0x27f095,_0x4c4d0a,_0x5d9bda);const _0x2e8d45=lastOrders['length']-0x1;if(_0x2e8d45>=0x0&&lastOrders[_0x2e8d45][_0x32bcf0(0x28a)]==_0x45d114){lastOrders[_0x2e8d45][_0x32bcf0(0x264)]=_0x33e050['id'];if(_0x33e050[_0x32bcf0(0x1f3)])lastOrders[_0x2e8d45][_0x32bcf0(0x1f3)]=_0x33e050['amount'];if(_0x33e050[_0x32bcf0(0x1b6)])lastOrders[_0x2e8d45]['price']=_0x33e050[_0x32bcf0(0x1b6)];lastOrders[_0x2e8d45][_0x32bcf0(0x244)]=_0x33e050['fee'];}if(_0x33e050[_0x32bcf0(0x1f3)])_0x4c4d0a=_0x33e050[_0x32bcf0(0x1f3)];if(_0x33e050['price'])_0x5d9bda=_0x33e050['price'];if(_0x2b8aae==_0x32bcf0(0x10a))logHistory(_0x32bcf0(0x17f),''+_0x2c7533+_0xb54ef6+_0x32bcf0(0x248)+_0x265e84+'\x20'+_0x27f095+'\x20#'+formatResult(_0x4c4d0a,0x8)+'\x20@'+formatResult(_0x5d9bda,0x8));else logHistory(_0x32bcf0(0x17f),''+_0x2c7533+_0xb54ef6+'\x20order:\x20'+_0x265e84+'\x20'+_0x27f095+'\x20#'+formatResult(_0x4c4d0a,0x8)+'\x20@'+formatResult(_0x5d9bda,0x8));logger[_0x32bcf0(0x15e)]('ID:\x20'+_0x33e050['id']+_0x32bcf0(0x27f)+_0x45d114);if(config[_0x32bcf0(0x216)]!=0x0){let _0x23df2c=null;if(cooldownTracker[_0x32bcf0(0x196)]==config[_0x32bcf0(0x216)]-0x1)_0x23df2c=cooldownTracker[_0x32bcf0(0x1f0)]();const _0x5f446f=getTimeStamp();cooldownTracker[_0x32bcf0(0x22f)](_0x5f446f);if(_0x23df2c){const _0x565b37=fns[_0x32bcf0(0x241)](new Date(_0x5f446f),new Date(_0x23df2c));if(_0x565b37<cooldownInterval){logHistory(_0x32bcf0(0x233),'Executed\x20'+config[_0x32bcf0(0x216)]+_0x32bcf0(0x13a)+cooldownInterval/0x3c+'\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20'+cooldownPeriod/(0xe10*0x3e8)+_0x32bcf0(0x25d)),coolingDown=!![];break;}}}}catch(_0xf50b45){if(_0xf50b45[_0x32bcf0(0x144)]()[_0x32bcf0(0x1c4)](_0x32bcf0(0x106)))lastOrders=lastOrders[_0x32bcf0(0x211)](_0x3f38cc=>_0x3f38cc[_0x32bcf0(0x231)]!=_0x265e84),logHistory(_0x32bcf0(0x233),_0x32bcf0(0x219)+_0x265e84),_0x3950a2=!![];else{if(_0xf50b45[_0x32bcf0(0x144)]()[_0x32bcf0(0x1c4)](_0x32bcf0(0x183)))lastOrders=lastOrders[_0x32bcf0(0x211)](_0x33884b=>_0x33884b[_0x32bcf0(0x231)]!=_0x265e84),logHistory('error',_0x32bcf0(0x284)+_0x265e84),_0x3950a2=!![];else{if(_0xf50b45[_0x32bcf0(0x144)]()[_0x32bcf0(0x1c4)](_0x32bcf0(0x1bf)))lastOrders=lastOrders[_0x32bcf0(0x211)](_0x2d7ac8=>_0x2d7ac8['symbol']!=_0x265e84),logHistory(_0x32bcf0(0x233),'Order\x20is\x20invalid:\x20'+_0x265e84),logger[_0x32bcf0(0x15e)](_0xf50b45),_0x3950a2=!![];else _0xf50b45[_0x32bcf0(0x144)]()['includes'](_0x32bcf0(0x112))?(lastOrders=lastOrders[_0x32bcf0(0x211)](_0x567927=>_0x567927['symbol']!=_0x265e84),logHistory(_0x32bcf0(0x233),_0x32bcf0(0x219)+_0x265e84),_0x3950a2=!![]):(lastOrders=lastOrders['filter'](_0x40f421=>_0x40f421[_0x32bcf0(0x231)]!=_0x265e84),await handleError(_0xf50b45,_0x32bcf0(0x180),_0x265e84));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x32bcf0(0x196)]>0x0){const _0x3ed491=config[_0x32bcf0(0x232)]=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0x32bcf0(0x1b3)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x21ab95=_0x32bcf0;validateOrders(_0x21ab95(0x1de));},_0x3ed491);}else unlockOrders();_0x3950a2&&config[_0x32bcf0(0x1e1)]&&(logHistory('error',_0x32bcf0(0x289)+pauseBotMsg),await pauseBot(pauseBotInterval)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x32bcf0(0x1d4),_0x32bcf0(0x117)));}else{if(coolingDown)!config[_0x32bcf0(0x1e1)]&&logHistory(_0x32bcf0(0x233),'Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode');else lockOrders!=ORDERS[_0x32bcf0(0x10c)]&&(!config[_0x32bcf0(0x1e1)]&&(config[_0x32bcf0(0x232)]==_0x32bcf0(0x10a)?logHistory('error',_0x32bcf0(0x2b0)):logHistory(_0x32bcf0(0x233),_0x32bcf0(0x299))));}}function _0x4243(){const _0x19930c=['getHours','average','marketcapsqrt','includes','fetchOpenOrders','write','sha256','Limit\x20(low-margin)','percentage','padStart','Failed\x20to\x20load\x20market\x20data\x20-\x20bot\x20not\x20started','remove','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','slider','(((.+)+)+)+$','amountToPrecision','balancing\x20resumed','63gtVQFt','botname','success','time','storeFiat','bot','data','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20trying\x20again\x20in\x20','substring','Net\x20','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','final','Exception\x20thrown\x20in\x20','spot','headless','\x20API\x20key\x20is\x20invalid','\x20network\x20error:\x20','limit-high','Unknown\x20error\x20-\x20check\x20logs','USDP','Manual\x20balancing\x20required','\x20-\x20bot\x20already\x20running\x20in\x20manual\x20mode','forEach','running','Error\x20in\x20loadSymbols():\x20','TUSD','cancelOrders()','isBefore','2.7.1','shift','testAPI()','watchTrades()','amount','getSeconds','logs','no\x20exchange\x20reloaded','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange',':\x20timer\x20>','Cryptocom','./logs/',')\x20unknown\x20order:\x20','performance','changes','\x20uses\x20','\x20>\x20','BUSD','PAXG','cancel','watchTradesForSymbols()','Headless:\x20','ExchangeError','Huobipro','min','Initializing\x20exchange','\x20closed\x20the\x20connection\x20(see:\x20hodlerhacks.com/fix/5)','timestamp','/USD','number','watchOrders','threshold','Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute','watchTrades','filter','date','loadSymbols()','RETRY\x20-\x20Error\x20in\x20','Set\x20lock\x20orders\x20to:\x20','cooldown','stack','getMinutes','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','\x0aSymbol(s):\x20','Pausing\x20for\x20','5808EobHBf','/output-000.log','password','fetchTickers','status\x20code\x20401','fetchTicker','none','\x20|\x20exchange:\x20','open','findIndex','lowdb/adapters/FileSync','canceled','axios','1\x20-\x20FILLED\x20known\x20order:\x20','yyyy/MM/dd','bot-','set','createOrder','\x20(see:\x20hodlerhacks.com/fix/1)','push','enabled','symbol','ordertype','error','Limit\x20(high-margin)','sortBy','balancing\x20resumes\x20when\x20cooldown\x20ends','PermissionDenied','no\x20open\x20orders','path','quick','log','detectLiquidityChange()','</pre>','Waited\x20','kill','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','differenceInSeconds','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','API-key\x20format\x20invalid','fee','parse','createWriteStream','sqrt','\x20order:\x20','argv','starting-balances','\x20has\x20a\x2024h\x20drop\x20of\x20','Error\x20details:','added','bots','fiat','InsufficientFunds','\x20metrics:</b>\x20\x0a\x0a','type','<b>Bot\x20','coins','join','-config.json','market_cap','BTC','showname','21430YSOaki','portfolio','startnumber','\x20hour','remainingSymbols','6813258GKEoDU','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','Network\x20error\x20details:','PnL\x20','eur','orderId','red_yellow_blue','openOrders','2\x20-\x20Handled\x20open\x20orders','colorscheme','Market\x20order','version','liquidity','pop','************','\x20exchange\x20error:\x20','apiSecret','AuthenticationError','toFixed','Resetting\x20bot\x20history','\x20/\x20','CoinMarketCap\x20data\x20could\x20not\x20be\x20updated\x20-\x20will\x20try\x20again\x20in\x201\x20hour','settings','valid','bid','assign','1560738YeqkRx','removed','bitmex','toLowerCase','pro','\x20-\x20bot\x20not\x20started','\x20|\x20Custom\x20ID:\x20',':\x20Bot\x20','secret','ETH','sort','Order\x20amount\x20is\x20invalid:\x20','netoffset','prevnumber','basecoinvalue','213626ErmaIq','Avoiding\x20continuous\x20order\x20attempts','customId','0\x20-\x20EXECUTION:\x20','entries','format','\x20MB','\x20|\x20','configstate','\x20API\x20secret\x20is\x20invalid','update-liquidity','realizedPnL','OnMaintenance','Portfolio\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','2\x20-\x20handling\x20FILLED\x20order:\x20','2.6.0','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','last','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','net-fiat','distribution','getStartingBalances','exchanges','search','warning','stringify','fetchBalance',')\x20|\x20exchange:\x20','storeHeadless','apiPassword','DDoSProtection','getPortfolio','RSA-OAEP','args','getDate','split','startdate','Invalid\x20balance\x20for\x20','\x20>\x20details:','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','net-basecoin','Updating\x20API\x20key\x20(not\x20saved\x20in\x20config\x20file\x20yet)','reverse','\x20>\x20pausing\x20bot\x20for\x20','marketcapApi','defaults','loading-canceled','botID','recreate','\x20|\x20lock\x20orders:\x20','Generated\x20PnL\x20data','Error:\x20Invalid\x20argument\x20','autoliquidity','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','initclient','progress','orderstatus','offset','highest','12XvDYeP','privateKey','./version.json','Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)','constructor','change','replace','basecoin','portfolio1','fetchBalance()','emojisell','MIN_NOTIONAL','uncaughtException','coin','exchange','market','Market','UNLOCKED','Valid\x20balance\x20for\x20','RETRY\x20-\x20Problem\x20resolved\x20after\x20','writeFile','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','must\x20be\x20greater\x20than\x20minimum\x20amount','placeOrder','deleteHistoryAlerts','cloneDeep','onepagemode','Cooldown\x20ended\x20-\x20balancing\x20resumed','delta','\x20not\x20available\x20(see:\x20hodlerhacks.com/fix/5)','value','\x20|\x20highest\x20fee:\x20','Stopped\x20fetching\x20balance\x20after\x20','ongoing','Error\x20while\x20deleting\x20files:\x20','usd','<pre>','slice','request-time','keys','padEnd','round','-events.json','Fee\x20discount\x20refund\x20detected:\x20','timeshift','lowdb','test','portfolio2','balances','buy','1895365GrbOOa','token\x20is\x20expired','find','active','Exchange\x20permission\x20denied\x20-\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','-results.json','4ZiUMyX','Bybit','Saving\x20configuration','existsSync','pid','marketcapEnabled','\x20orders\x20in\x20less\x20than\x20','Failed\x20to\x20load\x20coin\x20data\x20for\x20','NetworkError','Generating\x20PnL\x20data','unlinkSync','max','side',')\x20known\x20order:\x20','Initializing\x20exchange:\x20already\x20done','No\x20more\x20open\x20orders\x20-\x20','toString','***','Value\x20','add','has','-performance.json','breakeven','LOCKED','Order(s)\x20not\x20validated\x20after\x20','change24h','testApi','limit','RateLimitExceeded','1\x20-\x20FILLED\x20unknown\x20order:\x20','\x20minutes','recent20','Order\x20filled:\x20','Error\x20occurred:\x20','event-history','target','trade','timestamp-issue','/backup/','getTime','/EUR',',\x20must\x20be\x20a\x203\x20digit\x20number','debug','\x20minutes\x20-\x20','/USDT','watchTradesForSymbols','node-forge','quote','send','event','2601025zrOMzU','emitHistory','function','Resuming\x20(','EUR','starting-balance-','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','full','configuration-stored','watchOrders()','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','map','\x20>\x20stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','pnl','apply','sendPortfolioTelegram','sandbox','cancelLoading','Exchange','coin-loading-progress','indexOf','filled','getOpenOrders()','Will\x20continue\x20to\x20wait\x20for\x20order(s)\x20to\x20be\x20filled\x20and\x20try\x20to\x20cancel\x20again\x20later','1\x20-\x20Handle\x20open\x20orders','order','placeOrder()','Invalid\x20symbol:\x20','\x20portfolio:</b>\x20\x0a\x0a','Invalid\x20quantity','\x20-\x20bot\x20switched\x20to\x20manual\x20mode','pnl-fiat','get','79096orUVPB','2.3.5','getMonth','create','\x20API\x20key,\x20secret\x20or\x20password\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','loadMarkets','status','Error\x20in\x20testNewAPI():\x20','configuration','.json','setSandboxMode','<b>','cost','\x20-\x20go\x20back\x20and\x20try\x20again','abs','length','secure','apiKey','2.6.23','initial','date-fns','Portfolio\x20change\x20detected:\x20','\x20not\x20responding\x20(see:\x20hodlerhacks.com/fix/5)','%)\x0a','USDT','pnl-basecoin','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','Order\x20filled','2\x20-\x20Validate\x20orders:\x20','excluded','Bot\x20','bb-settings.json','page','sell','closed','\x20exchange','heapUsed','Reset\x20|\x20','\x20>\x20[DEBUG]\x20','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','sells','util','./config/','fromCodePoint','timeout','marketcap','limits','price','Trigger:\x20','net','exchange\x20reload','Error\x20details:\x20','USD','api-issue','mkdirSync','freeze','InvalidOrder','decode64'];_0x4243=function(){return _0x19930c;};return _0x4243();}function persistOpenOrders(_0x2754e2){const _0x51a4c8=_0x429b06,_0x41e421={...config,'openOrders':_0x2754e2};let _0x53a044=dbConfig['get'](_0x51a4c8(0x1d7))['find']({'botID':botID})[_0x51a4c8(0x11a)]();_0x53a044&&dbConfig[_0x51a4c8(0x186)](_0x51a4c8(0x1d7))[_0x51a4c8(0x130)]({'botID':botID})[_0x51a4c8(0x278)](_0x41e421)['write']();}function restoreOrders(){const _0x26637c=_0x429b06;let _0x3cde79;config[_0x26637c(0x266)]&&allOpenOrders[_0x26637c(0x1e9)](_0x39d1f1=>{const _0x413b97=_0x26637c,_0x5ed4ce=config[_0x413b97(0x266)][_0x413b97(0x130)](_0x383c0e=>_0x383c0e['orderId']==_0x39d1f1['id']);_0x5ed4ce&&(lastOrders[_0x413b97(0x22f)](_0x5ed4ce),_0x3cde79=_0x39d1f1[_0x413b97(0x20a)]);});if(lastOrders[_0x26637c(0x196)]>0x0){setLockOrders(ORDERS[_0x26637c(0x14b)]),validateOrdersState=_0x26637c(0x11d),allOrdersPlaced=!![];const _0x19fc78=new Date()[_0x26637c(0x15b)](),_0x1fa201=config[_0x26637c(0x232)]=='market'?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(_0x3cde79+_0x1fa201>_0x19fc78){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x414c40=_0x26637c;validateOrders(_0x414c40(0x1de));},_0x3cde79+_0x1fa201-_0x19fc78);}else validateOrders('final');}}async function sendMetricsTelegram(){const _0x111c55=_0x429b06;if(!coinsLoaded){process[_0x111c55(0x164)]({'telegrammsg':_0x111c55(0x20f)},_0x4242ed=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x266664='';if(config[_0x111c55(0x259)])_0x266664=_0x111c55(0x192)+config['botname']+_0x111c55(0x251);else _0x266664=_0x111c55(0x253)+botID+'\x20metrics:</b>\x20\x0a\x0a';const _0xc17325=config[_0x111c55(0x102)],_0x3462a1=config[_0x111c55(0x24f)],_0xf7b347=getKPIs(_0x111c55(0x102)),_0x12cdf1=getKPIs('fiat',_0x3462a1),_0x61cdee=getKPIs(_0x111c55(0x2b1)),_0x3eeff1=getKPIs(_0x111c55(0x29c),_0x3462a1),_0x18e77d=getKPIs(_0x111c55(0x1a0)),_0x441c5a=getKPIs(_0x111c55(0x185),_0x3462a1);_0xc17325[_0x111c55(0x1c4)](_0x3462a1)?(_0x266664+='<pre>',_0x266664+=_0x111c55(0x146)+_0xc17325+':\x20'+_0xf7b347[_0x111c55(0x11a)]+'\x20('+_0xf7b347[_0x111c55(0x100)]+_0x111c55(0x19e),_0x266664+=_0x111c55(0x1dc)+_0xc17325+':\x20'+_0x61cdee[_0x111c55(0x11a)]+'\x20('+_0x61cdee[_0x111c55(0x100)]+'%)\x0a',_0x266664+=_0x111c55(0x262)+_0xc17325+':\x20'+_0x18e77d[_0x111c55(0x11a)]+'\x20('+_0x18e77d[_0x111c55(0x100)]+_0x111c55(0x19e),_0x266664+='</pre>'):(_0x266664+=_0x111c55(0x120),_0x266664+='Value\x20'+_0xc17325+':\x20'+_0xf7b347[_0x111c55(0x11a)]+'\x20('+_0xf7b347[_0x111c55(0x100)]+'%)\x0a',_0x266664+='Value\x20'+_0x3462a1+':\x20'+_0x12cdf1[_0x111c55(0x11a)]+'\x20('+_0x12cdf1[_0x111c55(0x100)]+'%)\x0a',_0x266664+='Net\x20'+_0xc17325+':\x20'+_0x61cdee[_0x111c55(0x11a)]+'\x20('+_0x61cdee[_0x111c55(0x100)]+_0x111c55(0x19e),_0x266664+=_0x111c55(0x1dc)+_0x3462a1+':\x20'+_0x3eeff1[_0x111c55(0x11a)]+'\x20('+_0x3eeff1['change']+_0x111c55(0x19e),_0x266664+=_0x111c55(0x262)+_0xc17325+':\x20'+_0x18e77d['value']+'\x20('+_0x18e77d['change']+_0x111c55(0x19e),_0x266664+=_0x111c55(0x262)+_0x3462a1+':\x20'+_0x441c5a[_0x111c55(0x11a)]+'\x20('+_0x441c5a['change']+'%)\x0a',_0x266664+=_0x111c55(0x23d)),process['send']({'telegrammsg':_0x266664},_0x444850=>{});}async function sendPortfolioTelegram(){const _0x531e1a=_0x429b06;if(!coinsLoaded||!currentCoins[0x0][_0x531e1a(0x29d)]){process[_0x531e1a(0x164)]({'telegrammsg':_0x531e1a(0x20f)},_0x405ee3=>{});return;}let _0x5e20db='';if(config[_0x531e1a(0x259)])_0x5e20db=_0x531e1a(0x192)+config['botname']+_0x531e1a(0x182);else _0x5e20db=_0x531e1a(0x253)+botID+_0x531e1a(0x182);_0x5e20db+=_0x531e1a(0x120),_0x5e20db+='-------------------------------\x0a',_0x5e20db+='Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a',_0x5e20db+='-------------------------------\x0a',currentCoins['forEach'](_0x51ab9a=>{const _0x9e4742=_0x531e1a;_0x5e20db+=_0x51ab9a[_0x9e4742(0x108)][_0x9e4742(0x124)](0x7)+'|\x20'+formatPad(_0x51ab9a[_0x9e4742(0x29d)],0x2,0x6)+'|\x20'+formatPad(_0x51ab9a['target'],0x2,0x6)+'|\x20'+formatPad(_0x51ab9a[_0x9e4742(0x118)]*0x64,0x2,0x6)+'\x0a';}),_0x5e20db+=_0x531e1a(0x23d),process[_0x531e1a(0x164)]({'telegrammsg':_0x5e20db},_0x28af0a=>{});}function formatPad(_0x4820ce,_0xa836d5,_0xe5d593){const _0x4a7f7d=_0x429b06,_0x4a0949=formatResultString(_0x4820ce,_0xa836d5);return _0x4a0949?_0x4a0949['padStart'](_0xe5d593):''[_0x4a7f7d(0x1ca)](_0xe5d593);}function logHistory(_0x4ac62c,_0x4499f4,_0x2d1902=''){const _0x353e67=_0x429b06;logger[_0x353e67(0x16d)](''+_0x4499f4);let _0xc2bd2f={'time':getTimeStamp(),'type':_0x4ac62c,'event':_0x4499f4};dbLogs[_0x353e67(0x186)](_0x353e67(0x1f5))[_0x353e67(0x22f)](_0xc2bd2f)[_0x353e67(0x1c6)]();if(_0x2d1902=='')_0x2d1902=_0x4499f4;proxyEmit(_0x353e67(0x165),{'log':_0xc2bd2f,'summary':_0x2d1902}),process[_0x353e67(0x164)]({'telegram':{..._0xc2bd2f,'botname':config[_0x353e67(0x1d3)],'showname':config[_0x353e67(0x259)]}},_0x2c117b=>{});}function emitHistory(_0xe35853={}){const _0x4e3e30=_0x429b06;Object[_0x4e3e30(0x123)](_0xe35853)[_0x4e3e30(0x196)]==0x0&&(_0xe35853={'type':[_0x4e3e30(0x17f),_0x4e3e30(0x165)],'event':'','page':0x1});if(_0xe35853['type'][_0x4e3e30(0x1c4)](_0x4e3e30(0x165)))_0xe35853[_0x4e3e30(0x252)]['splice'](_0xe35853[_0x4e3e30(0x252)]['indexOf']('event'),0x1,_0x4e3e30(0x233),_0x4e3e30(0x2a1),_0x4e3e30(0x1d4));if(dbLogs[_0x4e3e30(0x148)](_0x4e3e30(0x1f5))[_0x4e3e30(0x11a)]()){let _0xd59490=dbLogs[_0x4e3e30(0x186)](_0x4e3e30(0x1f5))[_0x4e3e30(0x211)](_0x3b7e64=>{const _0x1be319=_0x4e3e30;if(_0xe35853[_0x1be319(0x252)]['length']==0x0)return![];else return _0xe35853[_0x1be319(0x252)][_0x1be319(0x1c4)](_0x3b7e64[_0x1be319(0x252)]);})[_0x4e3e30(0x211)](_0x543ad8=>{const _0x4feb6b=_0x4e3e30;if(_0xe35853['event']=='')return!![];else return _0x543ad8[_0x4feb6b(0x165)][_0x4feb6b(0x27c)]()['includes'](_0xe35853['event']['toLowerCase']());})['sortBy']('time'),_0x1d835c=_0xd59490[_0x4e3e30(0x11a)]()[_0x4e3e30(0x196)];_0xd59490=_0xd59490[_0x4e3e30(0x2b3)]()[_0x4e3e30(0x121)]((_0xe35853[_0x4e3e30(0x1a7)]-0x1)*logPageSize,_0xe35853[_0x4e3e30(0x1a7)]*logPageSize-0x1)[_0x4e3e30(0x2b3)]()['value'](),proxyEmit(_0x4e3e30(0x156),{'logs':_0xd59490,'total':_0x1d835c});}else proxyEmit(_0x4e3e30(0x156),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x33e2a6){const _0x3371fb=_0x429b06;if(dbLogs[_0x3371fb(0x148)](_0x3371fb(0x1f5))['value']()){const _0x150181=dbLogs['get'](_0x3371fb(0x1f5))[_0x3371fb(0x235)]('time')[_0x3371fb(0x211)](_0x3fc0a5=>{const _0x444dd8=_0x3371fb;return _0x3fc0a5[_0x444dd8(0x252)]==_0x444dd8(0x17f);})[_0x3371fb(0x11a)]();dbLogs[_0x3371fb(0x186)](_0x3371fb(0x1f5))[_0x3371fb(0x1cc)]()[_0x3371fb(0x1c6)](),dbLogs[_0x3371fb(0x186)](_0x3371fb(0x1f5))['assign'](_0x150181)[_0x3371fb(0x1c6)](),emitHistory(_0x33e2a6);}}async function pauseBot(_0x1a856c=pauseBotIntervalShort,_0x2ce8fb,_0x320055,_0x5ade11=![]){const _0x3ab193=_0x429b06,_0x192e0d=new Date()[_0x3ab193(0x15b)]();if(!lastErrorShown||_0x192e0d-lastErrorShown>=_0x1a856c){lastErrorShown=_0x192e0d;if(!lastBotPause)lastBotPause=_0x192e0d,consecutivePauses=0x1;else{if(_0x192e0d-lastBotPause-_0x1a856c<0x5a*0x3e8){consecutivePauses++;if(consecutivePauses>maxPauseRetries){if(_0x5ade11){logHistory(_0x3ab193(0x233),_0x2ce8fb+_0x3ab193(0x172)),await killBot();return;}else logHistory('error',_0x2ce8fb+pauseBotMsg),_0x1a856c=pauseBotInterval;}}else consecutivePauses=0x1;lastBotPause=_0x192e0d;}_0x320055?logger['debug']('('+consecutivePauses+')\x20'+_0x2ce8fb+_0x3ab193(0x2af),_0x320055):logger[_0x3ab193(0x15e)]('('+consecutivePauses+')\x20'+_0x2ce8fb);if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);await sleep(_0x1a856c),botPaused=![],_0x1a856c==pauseBotIntervalShort?resumeBot(!![]):resumeBot(![]);}}}async function killBot(){const _0x57daf3=_0x429b06;botPaused=!![],await sleep(0x3e8),process[_0x57daf3(0x164)]({'stop':_0x57daf3(0x23f)},_0x5622ed=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x3b380d,_0x5c7f3d,_0x41b933=![]){const _0x48bedf=_0x429b06;if(botPaused)return;let _0x558a10;const _0x111eec=config['exchange']||_0x48bedf(0x178);if(_0x5c7f3d)logger[_0x48bedf(0x15e)](_0x48bedf(0x1df)+_0x5c7f3d);const _0x478c55=()=>{const _0x13a8fc=_0x48bedf;loading[_0x13a8fc(0x233)]=_0x13a8fc(0x1bc),emitLoadingProgress();};if(_0x3b380d['toString']()[_0x48bedf(0x1c4)](_0x48bedf(0x243)))logHistory('error',_0x111eec+'\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)'),_0x478c55();else{if(_0x3b380d['toString']()[_0x48bedf(0x1c4)](_0x48bedf(0x29b)))logHistory('error',_0x111eec+_0x48bedf(0x1dd)),_0x478c55();else{if(_0x3b380d[_0x48bedf(0x144)]()['includes'](_0x48bedf(0x270)))config[_0x48bedf(0x2a6)]?_0x558a10=_0x111eec+_0x48bedf(0x18b):_0x558a10=_0x111eec+'\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange',logHistory('error',_0x558a10+_0x48bedf(0x22e)),_0x478c55();else{if(_0x3b380d[_0x48bedf(0x144)]()['includes'](_0x48bedf(0x237)))logHistory(_0x48bedf(0x233),_0x111eec+_0x48bedf(0x260)),_0x478c55();else{if(!_0x41b933)await handleError(_0x3b380d,null);}}}}}async function handleError(_0x303d47,_0x1f86c8,_0x2ef590=''){const _0x468e57=_0x429b06;if(botPaused)return;let _0x5913cd;const _0x4925b3=config[_0x468e57(0x109)]||_0x468e57(0x178);if(_0x1f86c8)logger[_0x468e57(0x15e)](_0x468e57(0x1df)+_0x1f86c8);if(_0x303d47[_0x468e57(0x144)]()[_0x468e57(0x1c4)](_0x468e57(0x2a7)))_0x5913cd=_0x4925b3+'\x20blocked\x20API\x20(DDoSProtection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading',await pauseBot(undefined,_0x5913cd,_0x303d47);else{if(_0x303d47[_0x468e57(0x144)]()[_0x468e57(0x1c4)](_0x468e57(0x150)))_0x5913cd=_0x4925b3+'\x20blocked\x20API\x20(RateLimitExceeded)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading',await pauseBot(undefined,_0x5913cd,_0x303d47);else{if(_0x303d47[_0x468e57(0x144)]()['includes']('ExchangeNotAvailable')||_0x303d47[_0x468e57(0x144)]()['includes'](_0x468e57(0x294)))_0x5913cd=_0x4925b3+_0x468e57(0x119),await pauseBot(undefined,_0x5913cd,_0x303d47[_0x468e57(0x144)]());else{if(_0x303d47[_0x468e57(0x144)]()['includes']('RequestTimeout'))_0x5913cd=_0x4925b3+_0x468e57(0x19d),await pauseBot(undefined,_0x5913cd,_0x303d47[_0x468e57(0x144)]());else{if(_0x303d47[_0x468e57(0x144)]()['includes']('NetworkError:\x20connection\x20closed\x20by\x20remote\x20server'))_0x5913cd=_0x4925b3+_0x468e57(0x209),await pauseBot(undefined,_0x5913cd,_0x303d47[_0x468e57(0x144)]());else{if(_0x303d47['toString']()['toLowerCase']()[_0x468e57(0x1c4)]('timestamp')||_0x303d47[_0x468e57(0x144)]()['toLowerCase']()[_0x468e57(0x1c4)]('request-time'))_0x5913cd=_0x468e57(0xfe),await pauseBot(undefined,_0x5913cd,_0x303d47[_0x468e57(0x144)]());else{if(_0x303d47['toString']()[_0x468e57(0x1c4)]('InvalidNonce'))_0x5913cd=_0x4925b3+'\x20rejected\x20your\x20API\x20request\x20(see:\x20hodlerhacks.com/fix/4)',await pauseBot(undefined,_0x5913cd,_0x303d47['toString']());else{if(_0x303d47 instanceof ccxt[_0x468e57(0x13c)])_0x5913cd=_0x4925b3+_0x468e57(0x1e3)+_0x303d47[_0x468e57(0x144)](),logger[_0x468e57(0x15e)](_0x468e57(0x261),_0x303d47),await pauseBot(undefined,_0x5913cd,_0x303d47);else{if(_0x303d47[_0x468e57(0x144)]()[_0x468e57(0x1c4)](_0x468e57(0x243)))logHistory(_0x468e57(0x233),_0x4925b3+_0x468e57(0x1e2)),logHistory('error',_0x468e57(0x1d9)),await killBot();else{if(_0x303d47[_0x468e57(0x144)]()[_0x468e57(0x1c4)](_0x468e57(0x29b)))logHistory(_0x468e57(0x233),_0x4925b3+_0x468e57(0x291)),logHistory(_0x468e57(0x233),_0x468e57(0x1d9)),await killBot();else{if(_0x303d47['toString']()['includes'](_0x468e57(0x270))&&_0x303d47[_0x468e57(0x144)]()['includes'](_0x468e57(0x12f)))_0x5913cd=_0x4925b3+_0x468e57(0x111),await pauseBot(undefined,_0x5913cd,_0x303d47,!![]);else{if(_0x303d47[_0x468e57(0x144)]()[_0x468e57(0x1c4)](_0x468e57(0x270)))config[_0x468e57(0x2a6)]?_0x5913cd=_0x4925b3+_0x468e57(0x18b):_0x5913cd=_0x4925b3+_0x468e57(0x1f7),logHistory('error',_0x5913cd),logHistory(_0x468e57(0x233),_0x468e57(0x1d9)),await killBot();else{if(_0x303d47[_0x468e57(0x144)]()[_0x468e57(0x1c4)](_0x468e57(0x237)))logHistory(_0x468e57(0x233),_0x4925b3+'\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange'),logHistory(_0x468e57(0x233),_0x468e57(0x1d9)),await killBot();else{if(_0x303d47['toString']()[_0x468e57(0x1c4)](_0x468e57(0x250)))logHistory(_0x468e57(0x233),'Insufficient\x20funds\x20to\x20execute\x20order:\x20'+_0x2ef590),logger['debug'](_0x468e57(0x24c),_0x303d47);else{if(_0x303d47 instanceof ccxt[_0x468e57(0x205)]){_0x5913cd=_0x4925b3+_0x468e57(0x26e)+_0x303d47[_0x468e57(0x144)]();if(_0x2ef590)_0x5913cd+=_0x468e57(0x21a)+_0x2ef590;await pauseBot(undefined,_0x5913cd,_0x303d47);}else{_0x5913cd='Unknown\x20error:\x20'+_0x303d47['toString']();if(_0x2ef590)_0x5913cd+=_0x468e57(0x21a)+_0x2ef590;await pauseBot(undefined,_0x5913cd);}}}}}}}}}}}}}}}}function decryptRSA(_0x12a313,_0x2a6322){const _0x18fd4a=_0x429b06,_0x3c04c7=forge['pki']['privateKeyFromPem'](_0x12a313),_0x70a70b=_0x3c04c7['decrypt'](forge[_0x18fd4a(0x1b0)][_0x18fd4a(0x1c0)](_0x2a6322),_0x18fd4a(0x2a9),{'md':forge['md'][_0x18fd4a(0x1c7)][_0x18fd4a(0x18a)](),'mgf1':{'md':forge['md']['sha256'][_0x18fd4a(0x18a)]()}});return _0x70a70b;}async function withRetry(_0x8dd9b,_0x2e8e2b){const _0x130725=_0x429b06;let _0x43e340=![],_0x107b88=0x0,_0x4058b0,_0x491178;while(_0x107b88<maxRetries){try{_0x4058b0=await _0x2e8e2b();break;}catch(_0x5cf29f){_0x491178=_0x5cf29f,!_0x43e340?(_0x43e340=!![],logger[_0x130725(0x15e)](_0x130725(0x214)+_0x8dd9b+':',_0x5cf29f[_0x130725(0x144)]())):await sleep(retryInterval);}_0x107b88++;}if(_0x107b88==0x0)return _0x4058b0;if(_0x107b88>=maxRetries)throw _0x491178;else return logger[_0x130725(0x15e)](_0x130725(0x10e)+_0x107b88+'\x20attempts'),_0x4058b0;}function formatResult(_0x46ef9d,_0x5b6131){const _0x488557=_0x429b06;return parseFloat(_0x46ef9d[_0x488557(0x271)](_0x5b6131));}function formatResultTruncate(_0x4a5b85,_0x49cf35){const _0x3c77f6=_0x429b06;let _0x1135ba=formatResultString(_0x4a5b85,0xa),_0x2182d7=_0x1135ba[_0x3c77f6(0x17a)]('.');return _0x2182d7!=-0x1&&(_0x1135ba=_0x1135ba[_0x3c77f6(0x121)](0x0,_0x2182d7+_0x49cf35+0x1)),Number(_0x1135ba);}function formatResultString(_0x2d93ee,_0x283225){const _0x5c2828=_0x429b06;let _0x4dce7c;if(!(''+_0x2d93ee)['includes']('e'))_0x4dce7c=+(Math[_0x5c2828(0x125)](_0x2d93ee+'e+'+_0x283225)+'e-'+_0x283225);else{let _0x31fbdf=(''+_0x2d93ee)[_0x5c2828(0x2ac)]('e'),_0x7e374a='';+_0x31fbdf[0x1]+_0x283225>0x0&&(_0x7e374a='+'),_0x4dce7c=+(Math[_0x5c2828(0x125)](+_0x31fbdf[0x0]+'e'+_0x7e374a+(+_0x31fbdf[0x1]+_0x283225))+'e-'+_0x283225);}return Number(_0x4dce7c)[_0x5c2828(0x271)](_0x283225);}function getServerTime(){const _0x16ddc2=_0x429b06,_0x398ae3=new Date();return _0x398ae3['getFullYear']()+'/'+(_0x398ae3[_0x16ddc2(0x189)]()+0x1)[_0x16ddc2(0x144)]()['padStart'](0x2,'0')+'/'+_0x398ae3['getDate']()['toString']()['padStart'](0x2,'0')+'\x20'+_0x398ae3[_0x16ddc2(0x1c1)]()[_0x16ddc2(0x144)]()[_0x16ddc2(0x1ca)](0x2,'0')+':'+_0x398ae3[_0x16ddc2(0x218)]()[_0x16ddc2(0x144)]()[_0x16ddc2(0x1ca)](0x2,'0')+':'+_0x398ae3[_0x16ddc2(0x1f4)]()['toString']()[_0x16ddc2(0x1ca)](0x2,'0');}function getTimeStamp(){const _0x44ad6a=_0x429b06,_0x597d51=shiftedTime();return _0x597d51['getFullYear']()+'/'+(_0x597d51[_0x44ad6a(0x189)]()+0x1)['toString']()[_0x44ad6a(0x1ca)](0x2,'0')+'/'+_0x597d51['getDate']()[_0x44ad6a(0x144)]()[_0x44ad6a(0x1ca)](0x2,'0')+'\x20'+_0x597d51[_0x44ad6a(0x1c1)]()[_0x44ad6a(0x144)]()[_0x44ad6a(0x1ca)](0x2,'0')+':'+_0x597d51[_0x44ad6a(0x218)]()[_0x44ad6a(0x144)]()[_0x44ad6a(0x1ca)](0x2,'0')+':'+_0x597d51[_0x44ad6a(0x1f4)]()[_0x44ad6a(0x144)]()[_0x44ad6a(0x1ca)](0x2,'0');}function getDate(){const _0x40a77b=_0x429b06,_0x45b344=shiftedTime();return _0x45b344['getFullYear']()+'/'+(_0x45b344[_0x40a77b(0x189)]()+0x1)[_0x40a77b(0x144)]()[_0x40a77b(0x1ca)](0x2,'0')+'/'+_0x45b344[_0x40a77b(0x2ab)]()[_0x40a77b(0x144)]()[_0x40a77b(0x1ca)](0x2,'0');}function getHour(){const _0x38e69b=_0x429b06,_0x4cc26a=shiftedTime();return _0x4cc26a[_0x38e69b(0x1c1)]()[_0x38e69b(0x144)]()[_0x38e69b(0x1ca)](0x2,'0');}function sleep(_0xc57ec0){return new Promise(_0x3049e8=>setTimeout(_0x3049e8,_0xc57ec0));}function shiftedTime(){const _0x4098ce=_0x429b06,_0x2a4373=new Date();let _0x52ab90=_0x2a4373;if(config&&config['timeshift']!==0x0)_0x52ab90=fns[_0x4098ce(0x147)](_0x2a4373,{'hours':config[_0x4098ce(0x128)]});return _0x52ab90;}function timer(_0xa24948){const _0x4b4567=_0x429b06,_0x827392=new Date();!lasttime?console['log'](getTimeStamp()+':\x20timer\x20>',_0xa24948,_0x827392):console[_0x4b4567(0x23b)](getTimeStamp()+_0x4b4567(0x1f8),_0xa24948,(_0x827392-lasttime)/0x3e8),lasttime=_0x827392;}