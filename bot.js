const _0xed67a2=_0xcfbb;(function(_0x430cce,_0x3883e3){const _0xfb3bff=_0xcfbb,_0x3026f4=_0x430cce();while(!![]){try{const _0x2338cc=parseInt(_0xfb3bff(0x1c3))/0x1+-parseInt(_0xfb3bff(0x12b))/0x2+parseInt(_0xfb3bff(0x14b))/0x3+-parseInt(_0xfb3bff(0x21d))/0x4*(parseInt(_0xfb3bff(0x1f9))/0x5)+parseInt(_0xfb3bff(0x1b9))/0x6*(-parseInt(_0xfb3bff(0x223))/0x7)+-parseInt(_0xfb3bff(0x22a))/0x8*(parseInt(_0xfb3bff(0x267))/0x9)+parseInt(_0xfb3bff(0x1bf))/0xa;if(_0x2338cc===_0x3883e3)break;else _0x3026f4['push'](_0x3026f4['shift']());}catch(_0x24c575){_0x3026f4['push'](_0x3026f4['shift']());}}}(_0x30cc,0x5875d));const _0x386c10=function(){let _0x1759d2=!![];return function(_0x249857,_0x4f044b){const _0x580168=_0x1759d2?function(){if(_0x4f044b){const _0x59693b=_0x4f044b['apply'](_0x249857,arguments);return _0x4f044b=null,_0x59693b;}}:function(){};return _0x1759d2=![],_0x580168;};}(),_0x22dd57=_0x386c10(this,function(){const _0x379acb=_0xcfbb;return _0x22dd57[_0x379acb(0x25f)]()[_0x379acb(0x277)]('(((.+)+)+)+$')[_0x379acb(0x25f)]()[_0x379acb(0x251)](_0x22dd57)[_0x379acb(0x277)](_0x379acb(0x27c));});_0x22dd57();'use strict';const ccxt=require(_0xed67a2(0x184)),low=require(_0xed67a2(0xb6)),FileSync=require(_0xed67a2(0x19e)),fs=require('fs'),fns=require('date-fns'),forge=require('node-forge'),util=require(_0xed67a2(0x1b7)),argv=require(_0xed67a2(0x124))(process[_0xed67a2(0x122)]['slice'](0x2))[_0xed67a2(0x122)],path=require(_0xed67a2(0x23e)),axios=require(_0xed67a2(0x1f3));let exchange,gTicker={},gChange={};const usdBasecoins=[_0xed67a2(0x24d),_0xed67a2(0xd2),_0xed67a2(0x284),'USDT','USDC',_0xed67a2(0x248)],excludedExchanges=[_0xed67a2(0x1d7)],debugging=argv['d']||![];let pnlGenerationNeeded=argv['r']||![],config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object['freeze']({'LOCKED':0x0,'UNLOCKING':0x1,'UNLOCKED':0x2});let lockOrders=ORDERS[_0xed67a2(0x26a)],validateOrdersState,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotIntervalShort=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0xed67a2(0x176)+pauseBotInterval/0xea60+_0xed67a2(0x148),maxPauseRetries=0x6,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,watchTransactionsInterval=0x3c*0x3e8,schedulerInterval=0x3c*0x3c*0x3e8,retryInterval=0x3e8,maxRetries=0x5,logPageSize=0x14,defaultFee=0.003;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidOrdersInitialTimeout,pidOrdersTimeout,botPaused=![],transactionDetectionOngoing=![],lastCoinsToBalance='',insufficientFundsWarningSent=[],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x5dc,balanceUpdateRetries=0x5;let enableFiatToggle;const serverversion=require(_0xed67a2(0x1a3))['version'],environment=require('./version.json')[_0xed67a2(0x1da)]||_0xed67a2(0x207),botID=process[_0xed67a2(0x122)][0x2]||_0xed67a2(0x155),pattern=/^[0-9]{3}$/;!pattern[_0xed67a2(0x220)](botID)&&(console[_0xed67a2(0x20d)](_0xed67a2(0x11c)+botID+',\x20must\x20be\x20a\x203\x20digit\x20number'),killBot());const userID=process[_0xed67a2(0x122)][0x3]||'',configpath=userID?_0xed67a2(0xca)+userID+'/':_0xed67a2(0xca),logspath=userID?_0xed67a2(0x161)+userID+'/':_0xed67a2(0x161),loggerfile=fs['createWriteStream'](logspath+'/output-000.log',{'flags':'a'});!fs['existsSync'](configpath)&&fs[_0xed67a2(0xe2)](configpath);function _0xcfbb(_0x73eef7,_0x1a319d){const _0x44d0e4=_0x30cc();return _0xcfbb=function(_0x22dd57,_0x386c10){_0x22dd57=_0x22dd57-0xa9;let _0x30cce4=_0x44d0e4[_0x22dd57];return _0x30cce4;},_0xcfbb(_0x73eef7,_0x1a319d);}!fs[_0xed67a2(0x262)](logspath)&&fs[_0xed67a2(0xe2)](logspath);const configfile=configpath+_0xed67a2(0x1f1)+botID+'-config.json',logfile=configpath+_0xed67a2(0x1f1)+botID+_0xed67a2(0xf5),performancefile=configpath+_0xed67a2(0x1f1)+botID+'-performance.json',coinresultsfile=configpath+'bot-'+botID+'-results.json',settingsfile=configpath+'bb-settings.json',securefile=configpath+_0xed67a2(0x1e3),configbackuppath=configpath+_0xed67a2(0x1d5),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs['defaults']({'logs':[],'version':serverversion})['write']();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0xed67a2(0x166)]({'data':[],'version':serverversion})[_0xed67a2(0x1e2)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0xed67a2(0x166)]({'bot':[],'version':serverversion})[_0xed67a2(0x1e2)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults['defaults']({'coins':{},'version':serverversion})[_0xed67a2(0x1e2)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const operatorId=0x200f1;let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x3ea475=>{const _0xf9d04e=_0xed67a2;console[_0xf9d04e(0x20d)](_0x3ea475);},'simple':_0x37dcdd=>{const _0xd04722=_0xed67a2;console['log'](_0x37dcdd),loggerfile[_0xd04722(0x1e2)](util[_0xd04722(0x1a8)](_0x37dcdd)+'\x0a');},'full':async(_0x144030,_0x149291='')=>{const _0x24a041=_0xed67a2;let _0x2cfbbc;if(config[_0x24a041(0xc4)])_0x2cfbbc=getTimeStamp()+':\x20'+config[_0x24a041(0x25d)]+_0x24a041(0x1c6)+_0x144030;else _0x2cfbbc=getTimeStamp()+_0x24a041(0x174)+botID+_0x24a041(0x1c6)+_0x144030;console[_0x24a041(0x20d)](_0x2cfbbc),loggerfile[_0x24a041(0x1e2)](util[_0x24a041(0x1a8)](_0x2cfbbc)+'\x0a'),_0x149291&&(console[_0x24a041(0x20d)](_0x149291),loggerfile[_0x24a041(0x1e2)](util[_0x24a041(0x1a8)](_0x149291)+'\x0a'));},'debug':async(_0x17d3e7,_0x35fd5e='')=>{const _0x5681b2=_0xed67a2;let _0x41dc31;if(config[_0x5681b2(0xc4)])_0x41dc31=getTimeStamp()+':\x20'+config['botname']+_0x5681b2(0x235)+_0x17d3e7;else _0x41dc31=getTimeStamp()+_0x5681b2(0x174)+botID+_0x5681b2(0x235)+_0x17d3e7;if(debugging)console[_0x5681b2(0x20d)](_0x41dc31);loggerfile['write'](util[_0x5681b2(0x1a8)](_0x41dc31)+'\x0a');if(_0x35fd5e){if(debugging)console['log'](_0x35fd5e);loggerfile['write'](util['format'](_0x35fd5e)+'\x0a');}}};process['on']('uncaughtException',function(_0x369622){const _0x357f17=_0xed67a2;handleError(_0x369622[_0x357f17(0x23f)],_0x357f17(0x192));});settings[_0xed67a2(0x11b)]!=config['timeshift']&&updateTimeshift(settings[_0xed67a2(0x11b)]);settings['onepagemode']!=config[_0xed67a2(0x10e)]&&updateOnepagemode(settings['onepagemode']);(settings['marketcapApi']&&!config[_0xed67a2(0x1e8)]||!settings[_0xed67a2(0x1e8)]&&config[_0xed67a2(0x1e8)])&&updateMarketcapApi(settings[_0xed67a2(0x1e8)]);process[_0xed67a2(0x181)]({'started':'running'},_0x52b172=>{}),initializeProcessListeners();function proxyEmit(_0x3f57a7,_0x2f5b92=null){process['send']({'function':_0x3f57a7,'args':_0x2f5b92},_0x106aed=>{});}function initializeProcessListeners(){const _0x2bc14c=_0xed67a2;process['on'](_0x2bc14c(0x278),_0x592a21=>{const _0x2a4a20=_0x2bc14c;switch(Object[_0x2a4a20(0xee)](_0x592a21)[0x0]){case'timeshift':_0x592a21[_0x2a4a20(0x11b)]!=undefined&&(settings[_0x2a4a20(0x11b)]=_0x592a21[_0x2a4a20(0x11b)],updateTimeshift(settings[_0x2a4a20(0x11b)]));break;case'onepagemode':_0x592a21['onepagemode']!=undefined&&(settings[_0x2a4a20(0x10e)]=_0x592a21['onepagemode'],updateOnepagemode(settings['onepagemode']));break;case _0x2a4a20(0x1e8):_0x592a21[_0x2a4a20(0x1e8)]!=undefined&&(settings['marketcapApi']=_0x592a21[_0x2a4a20(0x1e8)],updateMarketcapApi(settings['marketcapApi']));break;case _0x2a4a20(0xe8):_0x592a21[_0x2a4a20(0xe8)]!=undefined&&(bots=JSON[_0x2a4a20(0xc6)](_0x592a21[_0x2a4a20(0xe8)]),proxyEmit(_0x2a4a20(0xe8),bots));break;case'function':switch(_0x592a21[_0x2a4a20(0x1df)]){case _0x2a4a20(0x11d):initclient();break;case _0x2a4a20(0x1ce):toggleBotMode();break;case _0x2a4a20(0x10f):emitHistory(_0x592a21[_0x2a4a20(0x18c)]);break;case _0x2a4a20(0x180):deleteHistoryAlerts(_0x592a21[_0x2a4a20(0x18c)]);break;case _0x2a4a20(0x144):getPortfolio(_0x592a21[_0x2a4a20(0x18c)]);break;case'storeConfiguration':storeConfiguration(_0x592a21['args']);break;case'storeHeadless':storeHeadless(_0x592a21[_0x2a4a20(0x18c)]);break;case _0x2a4a20(0x109):storeFiat(_0x592a21[_0x2a4a20(0x18c)]);break;case _0x2a4a20(0x104):resetHistory();break;case _0x2a4a20(0x22b):getStartingBalances(getNormalizedPerformance());break;case _0x2a4a20(0xed):placeOrder(_0x592a21['args']);break;case _0x2a4a20(0x1c0):cancelLoading();break;case _0x2a4a20(0x213):showConfig();break;case _0x2a4a20(0x13e):sendMetricsTelegram();break;case'sendPortfolioTelegram':sendPortfolioTelegram();break;}}});}reset(!![]);function _0x30cc(){const _0x3ff82=['apiKey','<pre>','time','recovery','001','netoffset','bitvavo','page','Market','Will\x20continue\x20to\x20wait\x20for\x20order(s)\x20to\x20be\x20filled\x20and\x20try\x20to\x20cancel\x20again\x20later','getMinutes','token\x20is\x20expired','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','Loading\x20completed','ask','portfolio2','./logs/','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','Gateio','type','Failed\x20to\x20load\x20market\x20data\x20-\x20bot\x20not\x20started','defaults','Invalid\x20balance\x20for\x20','filled','\x20order:\x20','2.3.5','emojibuy','1\x20-\x20Validate\x20orders:\x20','timestamp','Cex','balancing\x20resumes\x20when\x20cooldown\x20ends','privateKeyFromPem','writeFile','\x20|\x20exchange:\x20','addDays',':\x20Bot\x20','limit-high','\x20>\x20pausing\x20bot\x20for\x20','coins','timeout','PnL\x20','no\x20open\x20orders','2\x20-\x20Validate\x20orders:\x20','headless','warning','toLowerCase','PAXG','deleteHistoryAlerts','send','highest','ordertype','ccxt','Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute','InvalidOrder','target','Limit\x20(high-margin)','marketcap','Placing\x20order\x20for:\x20','botID','args','toFixed','0\x20-\x20EXECUTION:\x20','getSeconds','configuration','Network\x20error\x20details:','uncaughtException','full','self_reported_market_cap','Value\x20','net-basecoin','operatorId','change24h','round','watchOrders()','fromCodePoint','enableFiatToggle','DDoSProtection','lowdb/adapters/FileSync','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','\x20network\x20error:\x20',')\x20|\x20exchange:\x20','2.6.23','./version.json','secret','RSA-OAEP','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','OnMaintenance','format','recent20','USDT','\x20attempts','Resetting\x20bot\x20history','\x20exchange','cost','Portfolio\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','Test\x20new\x20API','fiat','Initializing\x20coin\x20results','status','Generated\x20PnL\x20data','\x20API\x20secret\x20is\x20invalid','toUpperCase','util','find','130506YyJjUT','must\x20be\x20greater\x20than\x20minimum\x20amount','memoryUsage','\x20-\x20bot\x20already\x20running\x20in\x20manual\x20mode','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','Order\x20filled','13925770JYtgXD','cancelLoading','colorscheme','buy','233469uvOAWO','\x20|\x20Custom\x20ID:\x20','\x20not\x20available\x20(see:\x20hodlerhacks.com/fix/5)','\x20>\x20','getFullYear','watchTradesForSymbols','placeOrder()','fetchOpenOrders','basecoin','RETRY\x20-\x20Problem\x20resolved\x20after\x20','Exchange\x20permission\x20denied\x20-\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','toggleBotMode','progress','substring','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','push','getOpenOrders()','Manual\x20balancing\x20required','/backup/','starting-balances','bitmex','\x20(see:\x20hodlerhacks.com/fix/1)','isBefore','environment','pnl-fiat','Net\x20','options','\x20closed\x20the\x20connection\x20(see:\x20hodlerhacks.com/fix/5)','function','floor','amountToPrecision','write','bb-secure.json','number','date','delta','cancelOrder','marketcapApi','orderstatus','replace','\x20API\x20key\x20is\x20invalid','-performance.json','bot','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','cancel','percentage','bot-','MIN_NOTIONAL','axios','AuthenticationError','debug','quote','spot',')\x20unknown\x20order:\x20','1454060japfio','amount','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','password','Error\x20in\x20loadSymbols():\x20','closed','Initializing\x20exchange:\x20already\x20done','createOrder','yyyy/MM/dd','Insufficient\x20funds\x20to\x20execute\x20order:\x20','RETRY\x20-\x20Error\x20in\x20','ETH','Resetting\x20coin\x20results:\x20','apiPassword','production','cancelOrders()','2\x20-\x20handling\x20FILLED\x20order:\x20','eur','join','Exchange','log','Unfilled\x20order(s)\x20could\x20not\x20be\x20canceled\x20after\x20','loadSymbols()','watchTrades()','getTime','\x20orders\x20in\x20less\x20than\x20','showConfig','distribution','<b>','Set\x20lock\x20orders\x20to:\x20','running','detectLiquidityChange()','Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','usd','Invalid\x20symbol:\x20','4PmWQqR','Bot\x20','max','test','getDate','EUR','203QdVvxl','Cryptocom','breakeven','excluded','LOCKED','getHours','sqrt','664ptTpGq','getStartingBalances','slider','sell','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','Order\x20is\x20invalid:\x20','\x20API\x20key,\x20secret\x20or\x20password\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','\x20-\x20bot\x20not\x20started','version','openOrders','coin-loading-progress','\x20>\x20[DEBUG]\x20','\x20-\x20bot\x20switched\x20to\x20manual\x20mode','InsufficientFunds','\x20blocked\x20API\x20(RateLimitExceeded)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','sha256','value','1\x20-\x20FILLED\x20unknown\x20order:\x20','Pausing\x20for\x20','final','path','stack','sortBy','slice','split','buys','/EUR','filter','\x20portfolio:</b>\x20\x0a\x0a','get','USDP','padStart','create','shift','fetchTickers()','USD','1\x20-\x20FILLED\x20known\x20order:\x20','Error\x20details:','fetchTickers','constructor','decrypt','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','\x20minutes\x20-\x20','1\x20-\x20partially\x20FILLED\x20(','fee','/USD','Valid\x20balance\x20for\x20','timestamp-issue','price','Insufficient\x20funds\x20to\x20place\x20order\x20for\x20','switch-manual','botname','limit-low','toString','Unknown\x20error:\x20','settings','existsSync','configuration-stored','Huobipro','************','PermissionDenied','39582tAKGQK','code','open','UNLOCKED','active','Avoiding\x20continuous\x20order\x20attempts','initTickers()','recreate','pnl','reverse','assign','\x20MB','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','api-issue','pid','loadMarkets','search','message','ongoing','exchanges','Bybit','(((.+)+)+)+$','1\x20-\x20Handle\x20open\x20orders','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','prevnumber','abs','splice','fetchBalance','ExchangeNotAvailable','TUSD','configstate','symbol','realizedPnL','update-liquidity','\x0aSymbol(s):\x20',':\x20timer\x20>','\x20>\x20details:','trade','random','watchTradesForSymbols()','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','ExchangeError','\x20|\x20highest\x20fee:\x20','changes','\x20due\x20to\x20offset',')\x20known\x20order:\x20','order','marketcapsqrt','lowdb','\x20|\x20lock\x20orders:\x20','min','Binance','Market\x20order','bid','/USDT','liquidity','ID:\x20','event','\x20-\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','stringify','fetchTicker','none','showname','average','parse','exchange','includes','balancing\x20resumed','./config/','canceled','removed','logs','testApi','%\x20(','\x20blocked\x20API\x20(DDoSProtection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','portfolio','BUSD','Order\x20amount\x20is\x20invalid:\x20','offset','Huobi','red_yellow_blue','Error\x20details:\x20','startnumber','-------------------------------\x0a','BTC','Exception\x20thrown\x20in\x20','unlinkSync','change','balances','apiSecret','data','market_cap','mkdirSync','-results.json','map','heapUsed','Stopped\x20fetching\x20balance\x20after\x20','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','bots','***','has','market','decode64','placeOrder','keys','padEnd','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','sandbox','entries','set','pro','-events.json','initial','emojisell','orderId','</pre>','added','limits','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','getMonth','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)','request-time','\x20metrics:</b>\x20\x0a\x0a','valid','2.7.1','side','resetHistory','net-fiat','sort','\x20uses\x20','startdate','storeFiat','last','event-history','restart','Order\x20filled:\x20','onepagemode','emitHistory','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','cooldown','length','basecoinvalue','add','autoliquidity','API-key\x20format\x20invalid','error','2.6.0','performance','remainingSymbols','timeshift','Error:\x20Invalid\x20argument\x20','initclient','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20for\x20','portfolio1','Initializing\x20exchange','argv','loading-canceled','yargs/yargs','Order(s)\x20not\x20validated\x20after\x20','Trigger:\x20','2\x20-\x20Handled\x20open\x20orders','match','forEach','process\x20','840290TWDPSI','Reset\x20|\x20','setSandboxMode','\x20>\x20stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','privateKey','\x20has\x20a\x2024h\x20drop\x20of\x20','Error\x20while\x20deleting\x20files:\x20','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','RequestTimeout','fetchBalance()','Resuming\x20(','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','\x20exchange\x20error:\x20','pki','watchOrders','\x20rejected\x20your\x20API\x20request\x20(see:\x20hodlerhacks.com/fix/4)','threshold','Portfolio\x20change\x20detected:\x20','indexOf','sendMetricsTelegram','cloneDeep','customId','%)\x0a','enabled','coin','getPortfolio','secure','success','remove','\x20minutes','marketcapEnabled','Invalid\x20API\x20details,\x20please\x20try\x20again\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','1329171ZRMkJu','findIndex','\x20|\x20','pnl-basecoin','limit','\x20not\x20responding\x20(see:\x20hodlerhacks.com/fix/5)'];_0x30cc=function(){return _0x3ff82;};return _0x30cc();}async function reset(_0x1795d6=![]){const _0x26382f=_0xed67a2;logger['debug'](_0x26382f(0x12c)+(_0x1795d6?'exchange\x20reload':'no\x20exchange\x20reloaded')+_0x26382f(0x172)+config['exchange']);if(pidBalances)clearTimeout(pidBalances);lastCoinsToBalance='',insufficientFundsWarningSent=[],coinsLoaded=![];if(config[_0x26382f(0x151)]!=''&&config[_0x26382f(0x151)]!='***'){loadingProgress=0x0;if(_0x1795d6){await initExchange();const _0x5f538e=await testAPI();if(!_0x5f538e)return;await loadSymbols(),loadingProgress=0x1,setStableCoins(),proxyEmit(_0x26382f(0x190),emittedConfiguration()),initialPerformanceStored=![];}const _0xdd20b9=await getCoins();[currentCoins,currentCoinsAll]=_0xdd20b9,setBlockTransactionDetection(![]),startScheduler(),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x26382f(0x1f5)](_0x26382f(0x15e)),getBalances(![]),await updateOpenOrders();if(lastOrders['length']==0x0&&allOpenOrders['length']!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(pnlGenerationNeeded)await generatePnL();}}async function resumeBot(_0x434c0b=![]){const _0x456332=_0xed67a2;logger['debug'](_0x456332(0x135)+(_0x434c0b?'quick':'complete')+_0x456332(0x1a1)+config['exchange']);if(pidBalances)clearTimeout(pidBalances);if(_0x434c0b){getBalances();return;}coinsLoaded=![];if(config[_0x456332(0x151)]!=''&&config[_0x456332(0x151)]!=_0x456332(0xe9)){loadingProgress=0x1;const _0x2cb79b=await getCoins();[currentCoins,currentCoinsAll]=_0x2cb79b,setBlockTransactionDetection(![]),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x456332(0x1f5)](_0x456332(0x15e)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x456332(0x112)]==0x0&&allOpenOrders[_0x456332(0x112)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();}}async function getMarketCap(_0x23e503){const _0x1a6445=_0xed67a2;let _0x4a5886=![];if(_0x23e503)_0x4a5886=!![];const _0x795e9e=_0x4a5886?_0x23e503:currentCoins,_0x4c1c64=_0x795e9e[_0x1a6445(0xe4)](_0x4e0e51=>_0x4e0e51['coin']);if(!config[_0x1a6445(0x1e8)]||!_0x4a5886&&!config[_0x1a6445(0x149)]||_0x4c1c64['length']==0x0)return;let _0x2aaa23=null;try{_0x2aaa23=await axios['get'](_0x1a6445(0x19f),{'headers':{'X-CMC_PRO_API_KEY':settings[_0x1a6445(0x1e8)]},'params':{'symbol':_0x4c1c64[_0x1a6445(0x25f)]()}});}catch(_0x45693a){_0x2aaa23=null,_0x45693a[_0x1a6445(0x25f)]()[_0x1a6445(0xc8)]('status\x20code\x20401')?(config[_0x1a6445(0x1e8)]=![],updateConfig(),proxyEmit('configuration',emittedConfiguration()),logHistory(_0x1a6445(0x117),'CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager')):(logHistory('error','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20trying\x20again\x20in\x20'+schedulerInterval/(0x3c*0x3e8)+_0x1a6445(0x148)),logger[_0x1a6445(0x1f5)]('Error\x20details:',_0x45693a[_0x1a6445(0x25f)]()+'\x20-\x20'+_0x45693a[_0x1a6445(0x268)]));}const _0x4242ba=new Map();let _0x102d37=!![];if(_0x2aaa23){let _0x39e0f3=0x0;const _0x4da6c7=_0x2aaa23['data'];_0x4c1c64[_0x1a6445(0x129)](_0x53bba2=>{const _0x371010=_0x1a6445;if(_0x4da6c7[_0x371010(0xe0)][_0x53bba2][0x0]&&_0x4da6c7[_0x371010(0xe0)][_0x53bba2][0x0]['quote'][_0x371010(0x24d)][_0x371010(0xe1)])_0x4242ba[_0x371010(0xf3)](_0x53bba2,_0x4da6c7[_0x371010(0xe0)][_0x53bba2][0x0][_0x371010(0x1f6)][_0x371010(0x24d)][_0x371010(0xe1)]),_0x39e0f3+=_0x4da6c7['data'][_0x53bba2][0x0][_0x371010(0x1f6)]['USD'][_0x371010(0xe1)];else{if(_0x4da6c7[_0x371010(0xe0)][_0x53bba2][0x0]&&_0x4da6c7[_0x371010(0xe0)][_0x53bba2][0x0][_0x371010(0x194)])_0x4242ba['set'](_0x53bba2,_0x4da6c7[_0x371010(0xe0)][_0x53bba2][0x0]['self_reported_market_cap']),_0x39e0f3+=_0x4da6c7[_0x371010(0xe0)][_0x53bba2][0x0]['self_reported_market_cap'];else{if(![_0x371010(0x222),'USD'][_0x371010(0xc8)](_0x53bba2)){if(_0x4a5886)logHistory(_0x371010(0x117),_0x371010(0x11f)+_0x53bba2+'\x20-\x20go\x20back\x20and\x20try\x20again');else{const _0x415034=config['portfolio'][_0x371010(0x1b8)](_0x3d52dd=>_0x3d52dd[_0x371010(0x143)]==_0x53bba2);_0x415034&&!_0x415034['excluded']&&_0x415034[_0x371010(0x22c)]==-0x1&&(_0x102d37=![],logHistory('error','CoinMarketCap\x20data\x20could\x20not\x20be\x20updated\x20-\x20will\x20try\x20again\x20in\x201\x20hour'),logger['debug'](_0x371010(0x11f)+_0x53bba2));}}}}});if(!_0x102d37)return;_0x4c1c64[_0x1a6445(0x129)](_0x291b39=>{const _0x40dfe5=_0x1a6445,_0xa87f57=_0x4242ba[_0x40dfe5(0x247)](_0x291b39)?_0x4242ba['get'](_0x291b39):0x0;if(_0x4a5886){const _0x5d6aa0=_0x23e503[_0x40dfe5(0x1b8)](_0x5c409c=>_0x5c409c['coin']==_0x291b39);_0x5d6aa0&&(_0x5d6aa0[_0x40dfe5(0x189)]=_0xa87f57);}else{const _0x25cb8a=currentCoins[_0x40dfe5(0x1b8)](_0x2397e9=>_0x2397e9[_0x40dfe5(0x143)]==_0x291b39);_0x25cb8a&&(_0x25cb8a[_0x40dfe5(0x189)]=_0xa87f57);const _0x17a6aa=currentCoinsAll[_0x40dfe5(0x1b8)](_0x530c33=>_0x530c33[_0x40dfe5(0x143)]==_0x291b39);_0x17a6aa&&(_0x17a6aa[_0x40dfe5(0x189)]=_0xa87f57);}}),!_0x4a5886&&updateTargetDistribution();}}function updateTargetDistribution(){const _0x181496=_0xed67a2,_0x49f4ec=0x2;let _0x2d7bf0=0x0,_0x1c89fc=0x0,_0x5384c8=0x0,_0xdbc647=0x0,_0x24543c=0x0;config[_0x181496(0xd1)][_0x181496(0x129)](_0x14967a=>{const _0x3b4bd8=_0x181496;if(!_0x14967a['excluded']){_0x5384c8++,_0x2d7bf0+=_0x14967a[_0x3b4bd8(0x22c)];if(_0x14967a[_0x3b4bd8(0x22c)]===-0x1){_0x2d7bf0++;const _0x275f6c=currentCoinsAll[_0x3b4bd8(0x1b8)](_0x40b2b9=>_0x40b2b9['coin']==_0x14967a[_0x3b4bd8(0x143)]);_0x275f6c&&(_0xdbc647+=_0x275f6c[_0x3b4bd8(0x189)],_0x24543c+=Math['sqrt'](_0x275f6c[_0x3b4bd8(0x189)]));}if(_0x14967a[_0x3b4bd8(0x22c)]!==-0x1)_0x1c89fc++;}});let _0x1bf009;const _0x264a42=0x64-_0x2d7bf0,_0x4e5610=_0x5384c8-_0x1c89fc;_0x1bf009=_0x4e5610===0x0?_0x2d7bf0:Math[_0x181496(0x21f)](0x64,_0x2d7bf0),config[_0x181496(0xd1)][_0x181496(0x129)](_0x3a8ce1=>{const _0x46b3c3=_0x181496,_0x47bb67=currentCoinsAll['find'](_0x484159=>_0x484159[_0x46b3c3(0x143)]==_0x3a8ce1[_0x46b3c3(0x143)]);_0x47bb67&&(_0x3a8ce1['marketcap']=_0x47bb67[_0x46b3c3(0x189)]);if(!_0x3a8ce1[_0x46b3c3(0x226)]){if(_0x1bf009<=0x64){if(_0x3a8ce1['slider']===-0x1){if(_0xdbc647!==0x0&&config[_0x46b3c3(0x149)]){if(_0x47bb67){if(config[_0x46b3c3(0x149)]==_0x46b3c3(0x189))_0x3a8ce1[_0x46b3c3(0x214)]=(_0x264a42/(_0xdbc647/_0x47bb67[_0x46b3c3(0x189)]))[_0x46b3c3(0x18d)](_0x49f4ec);else config[_0x46b3c3(0x149)]==_0x46b3c3(0xb5)&&(_0x3a8ce1['distribution']=(_0x264a42/(_0x24543c/Math[_0x46b3c3(0x229)](_0x47bb67[_0x46b3c3(0x189)])))[_0x46b3c3(0x18d)](_0x49f4ec));}}}}}}),updateConfig();}function updateConfig(){const _0x4da048=_0xed67a2;let _0x21b19f=dbConfig['get'](_0x4da048(0x1ed))[_0x4da048(0x1b8)]({'botID':botID})[_0x4da048(0x23a)]();_0x21b19f&&dbConfig[_0x4da048(0x247)](_0x4da048(0x1ed))[_0x4da048(0x1b8)]({'botID':botID})[_0x4da048(0x271)](config)[_0x4da048(0x1e2)]();}function logMemory(){const _0x55194=_0xed67a2;if(environment!='staging')return;const _0x411457=process[_0x55194(0x1bb)]()[_0x55194(0xe5)]/0x400/0x400;logger['debug'](_0x55194(0x12a)+process[_0x55194(0x275)]+_0x55194(0x107)+formatResult(_0x411457,0x1)+_0x55194(0x272));}async function startScheduler(){const _0xcec913=_0xed67a2,_0x40ff2f=shiftedTime()[_0xcec913(0x228)]();getMarketCap(),loadSymbols(),_0x40ff2f==0x1&&logMemory(),await sleep(schedulerInterval),startScheduler();}async function restartBot(_0x51b6af=![]){const _0x442f82=_0xed67a2;logger[_0x442f82(0x1f5)]('Initiating\x20bot\x20restart');if(!_0x51b6af)while(lockOrders!=ORDERS['UNLOCKED']||coolingDown){await sleep(0x3e8);}process[_0x442f82(0x181)]({'stop':_0x442f82(0x10c)},_0x5b44df=>{});}async function initExchange(_0x5bd85b=config[_0xed67a2(0xc7)],_0x213775=config['apiKey'],_0x148d3f=config['apiSecret'],_0x548052=config[_0xed67a2(0x206)],_0x32bc32=config[_0xed67a2(0xf1)]){const _0x562670=_0xed67a2;if(exchange){logger[_0x562670(0x1f5)](_0x562670(0x1ff));return;}logger[_0x562670(0x1f5)](_0x562670(0x121));!supportedExchanges()['includes'](_0x5bd85b)&&(logHistory(_0x562670(0x117),_0x562670(0x273)+_0x5bd85b+_0x562670(0x1ad)),killBot());const _0x47d078=ccxt[_0x562670(0xf4)][_0x5bd85b['toLowerCase']()];exchange=new _0x47d078({'apiKey':_0x213775,'secret':_0x148d3f,'options':{'defaultType':_0x562670(0x1f7)}});if(_0x548052)exchange[_0x562670(0x1fc)]=_0x548052;if(exchange[_0x562670(0xea)][_0x562670(0xf1)])exchange['setSandboxMode'](_0x32bc32);if(_0x5bd85b['toLowerCase']()==_0x562670(0x157))exchange[_0x562670(0x1dd)][_0x562670(0x197)]=operatorId;}function updateExchange(_0x418447,_0x3ac83c,_0x19f149=null){const _0x4d99b4=_0xed67a2;exchange[_0x4d99b4(0x151)]=_0x418447,exchange[_0x4d99b4(0x1a4)]=_0x3ac83c,exchange[_0x4d99b4(0x1fc)]=_0x19f149,logger['debug']('Updating\x20API\x20key\x20(not\x20saved\x20in\x20config\x20file\x20yet)');}function setStableCoins(){const _0x18ab1e=_0xed67a2;let _0x987656=config[_0x18ab1e(0x1cb)]==_0x18ab1e(0x204)?_0x18ab1e(0x204):config[_0x18ab1e(0x1cb)]==_0x18ab1e(0x17f)?_0x18ab1e(0x17f):_0x18ab1e(0xda),_0x21f142=allSymbols[_0x18ab1e(0xc8)](_0x987656+_0x18ab1e(0x257))?_0x18ab1e(0x24d):allSymbols[_0x18ab1e(0xc8)](_0x987656+_0x18ab1e(0xbc))?_0x18ab1e(0x1aa):_0x18ab1e(0x222),_0x12b6ec=allSymbols[_0x18ab1e(0xc8)](_0x987656+_0x18ab1e(0x244))?_0x18ab1e(0x222):_0x21f142;enableFiatToggle=!![],_0x21f142==_0x18ab1e(0x222)&&(enableFiatToggle=![],storeFiat(_0x18ab1e(0x222))),_0x12b6ec!=_0x18ab1e(0x222)&&(enableFiatToggle=![],storeFiat(_0x18ab1e(0x24d))),stablecoins={'eur':{'coin':''+_0x987656+_0x12b6ec,'symbol':_0x987656+'/'+_0x12b6ec},'usd':{'coin':''+_0x987656+_0x21f142,'symbol':_0x987656+'/'+_0x21f142}};}async function initwsCcxt(){const _0x34091c=_0xed67a2;initCycle++;const _0xf07bcb=initCycle;let _0x1779f6=[];config['portfolio'][_0x34091c(0x129)](_0x46deb4=>{const _0x14f796=_0x34091c;if(!_0x46deb4['excluded']&&_0x46deb4[_0x14f796(0x143)]!=config['basecoin'])_0x1779f6['push'](_0x46deb4['symbol']);});if(!_0x1779f6[_0x34091c(0xc8)](stablecoins[_0x34091c(0x20a)]['symbol']))_0x1779f6[_0x34091c(0x1d2)](stablecoins[_0x34091c(0x20a)]['symbol']);if(!_0x1779f6['includes'](stablecoins[_0x34091c(0x21b)][_0x34091c(0x286)]))_0x1779f6[_0x34091c(0x1d2)](stablecoins['usd'][_0x34091c(0x286)]);loadCoins(_0x1779f6),_0x1779f6=validateSymbols(_0x1779f6);const _0x1d955e=async _0x222b6e=>{const _0x3d7783=_0x34091c;let _0x455fd5;try{const _0x1a295e=await getTickers(_0x222b6e);Object['entries'](_0x1a295e)[_0x3d7783(0x129)](_0x44b202=>{const _0x44e9a4=_0x3d7783;_0x455fd5=_0x44b202[0x1][_0x44e9a4(0x286)],gTicker[noslash(_0x455fd5)]=_0x44b202[0x1][_0x44e9a4(0x10a)],gChange[_0x455fd5]=_0x44b202[0x1][_0x44e9a4(0x1f0)];});}catch(_0x5eb8ee){await handleError(_0x5eb8ee,_0x3d7783(0x26d),_0x455fd5);}},_0x4d566c=async _0x574ad9=>{const _0x173461=_0x34091c;while(initCycle==_0xf07bcb){if(!botPaused)try{const _0x4ef8ae=await exchange['watchTrades'](_0x574ad9);gTicker[noslash(_0x4ef8ae[0x0][_0x173461(0x286)])]=_0x4ef8ae[0x0]['price'];}catch(_0x3490d5){if(!exchangeStopped)await handleError(_0x3490d5,_0x173461(0x210),_0x574ad9);}else await sleep(0x64);}},_0xdfd6e1=async _0x2b6cab=>{const _0x5d241c=_0x34091c;while(initCycle==_0xf07bcb){if(!botPaused)try{const _0x173e60=await exchange['watchTradesForSymbols'](_0x2b6cab),_0xec576a=_0x173e60['pop']();gTicker[noslash(_0xec576a[_0x5d241c(0x286)])]=_0xec576a[_0x5d241c(0x25a)];}catch(_0xe14f49){if(!exchangeStopped)await handleError(_0xe14f49,_0x5d241c(0xad),_0x2b6cab[_0x5d241c(0x25f)]());}else await sleep(0x64);}},_0x5d3ddb=async _0x24fd09=>{const _0x40efa3=_0x34091c;while(initCycle==_0xf07bcb){if(!botPaused){let _0x508e4e;try{await sleep(0x3c*0x3e8);const _0x237be2=await getTickers(_0x24fd09);Object[_0x40efa3(0xf2)](_0x237be2)[_0x40efa3(0x129)](_0xb1c36d=>{const _0x1142cb=_0x40efa3;_0x508e4e=_0xb1c36d[0x1][_0x1142cb(0x286)],gChange[_0x508e4e]=_0xb1c36d[0x1]['percentage'];});}catch(_0x191bf3){if(!exchangeStopped)await handleError(_0x191bf3,_0x40efa3(0x24c),_0x508e4e);}}else await sleep(0x64);}},_0x3866f5=async _0x2d925e=>{const _0x533605=_0x34091c;while(initCycle==_0xf07bcb){if(!botPaused)try{const _0x2a48a8=await exchange[_0x533605(0x139)](_0x2d925e);initCycle==_0xf07bcb&&_0x2a48a8['forEach'](_0x6783d6=>{updateNumberCoinsCcxt(_0x6783d6);});}catch(_0x1a2f14){if(!exchangeStopped)await handleError(_0x1a2f14,_0x533605(0x19a));}else await sleep(0x64);}};_0x1d955e(_0x1779f6),_0x5d3ddb(_0x1779f6),exchange[_0x34091c(0xea)][_0x34091c(0x1c8)]&&!(config[_0x34091c(0xc7)]==_0x34091c(0x27b)&&_0x1779f6['length']>0xa)?_0xdfd6e1(_0x1779f6):_0x1779f6['forEach'](_0x677974=>{_0x4d566c(_0x677974);}),_0x1779f6['forEach'](_0x574ca6=>{_0x3866f5(_0x574ca6);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x44b36b){const _0x41e94d=_0xed67a2;let _0x2bbc07={};try{if(config['exchange']!=_0x41e94d(0x224))_0x2bbc07=await exchange['fetchTickers'](_0x44b36b);else for(const _0x4ab29d of _0x44b36b){const _0xf6678=await exchange[_0x41e94d(0xc2)](_0x4ab29d);_0x2bbc07[_0x4ab29d]=_0xf6678;}return _0x2bbc07;}catch(_0x3860d1){throw _0x3860d1;}}function setBlockTransactionDetection(_0x39f122){blockTransactionDetection=_0x39f122,logger['debug']('Block\x20transaction\x20detection:\x20'+blockTransactionDetection);}async function detectLiquidityChange(_0x1fc1e2=0x0){const _0x56179d=_0xed67a2;transactionDetectionOngoing=!![];try{const _0x1e3ace=await getCoins(_0x1fc1e2),[_0x309efa,_0x42e584]=_0x1e3ace;let _0xb7c113=[];currentCoins['forEach'](_0x4010e4=>{const _0x41b58e=_0xcfbb,_0x325bc9=_0x309efa[_0x41b58e(0x1b8)](_0x2cd3e7=>_0x2cd3e7[_0x41b58e(0x143)]==_0x4010e4[_0x41b58e(0x143)]);if(_0x325bc9){if(_0x4010e4[_0x41b58e(0x1e4)]!=_0x325bc9[_0x41b58e(0x1e4)]){let _0x36d311;if(_0x4010e4['coin']!=config[_0x41b58e(0x1cb)]){const _0x1887b1=gTicker[noslash(_0x4010e4[_0x41b58e(0x286)])];_0x36d311=_0x4010e4[_0x41b58e(0x270)]?0x1/_0x1887b1:_0x1887b1;}else _0x36d311=0x1;_0xb7c113[_0x41b58e(0x1d2)]({'coin':_0x4010e4['coin'],'symbol':_0x4010e4[_0x41b58e(0x286)],'price':_0x36d311,'number':Number(formatResult(_0x325bc9['number']-_0x4010e4[_0x41b58e(0x1e4)],0x8)),'basecoinvalue':_0x36d311*(_0x325bc9[_0x41b58e(0x1e4)]-_0x4010e4[_0x41b58e(0x1e4)])});}}});if(_0xb7c113['length']>0x0&&!blockTransactionDetection){for(const _0x387ae5 of _0xb7c113){if(config['autoliquidity']){logger[_0x56179d(0x1f5)](_0x56179d(0xf0)+_0x387ae5[_0x56179d(0x113)]+_0x56179d(0xb0)+lastFees[_0x56179d(0x182)]);if(lastFees['highest']==0x0||Math['abs'](_0x387ae5['basecoinvalue'])>lastFees[_0x56179d(0x182)]*0x3){if(config['autoliquidity']=='update-liquidity'){delete _0x387ae5['symbol'],delete _0x387ae5[_0x56179d(0x113)];let _0x5d03a2=[],_0x36aef7=[...config[_0x56179d(0xbd)]]||[],_0x1631cf=config[_0x56179d(0xbd)];_0x36aef7['sort']((_0x51eaec,_0x12ae9c)=>_0x51eaec[_0x56179d(0x1e5)]>_0x12ae9c['date']?-0x1:_0x12ae9c[_0x56179d(0x1e5)]>_0x51eaec[_0x56179d(0x1e5)]?0x1:0x0);const _0x36feae=getDate();if(_0x36aef7[0x0]){const _0x482761=fns[_0x56179d(0xc6)](_0x36aef7[0x0]['date'],_0x56179d(0x201),new Date()),_0xb52d84=fns[_0x56179d(0xc6)](_0x36feae,_0x56179d(0x201),new Date());if(fns['isEqual'](_0x482761,_0xb52d84)){_0x5d03a2=_0x36aef7[0x0][_0x56179d(0xb1)];const _0x134b4f=_0x5d03a2[_0x56179d(0x1b8)](_0x3847cb=>_0x3847cb[_0x56179d(0x143)]==_0x387ae5[_0x56179d(0x143)]);_0x134b4f?(_0x134b4f[_0x56179d(0x1e4)]+=_0x387ae5[_0x56179d(0x1e4)],_0x134b4f['number']==0x0&&(_0x5d03a2=_0x5d03a2[_0x56179d(0x245)](_0x4e1c53=>{const _0x2ef945=_0x56179d;return _0x4e1c53[_0x2ef945(0x143)]!=_0x387ae5['coin'];}))):_0x5d03a2[_0x56179d(0x1d2)](_0x387ae5);const _0x2deab7=_0x1631cf[_0x56179d(0x1b8)](_0x109d60=>_0x109d60[_0x56179d(0x1e5)]==_0x36feae);_0x2deab7[_0x56179d(0xb1)]=_0x5d03a2;}else _0x1631cf['push']({'date':_0x36feae,'changes':[_0x387ae5]});}const _0x1f895c=_0x1631cf[_0x56179d(0x1b8)](_0xbac346=>_0xbac346[_0x56179d(0x1e5)]==_0x36feae);if(_0x1f895c){let _0x22c691=!![];_0x1f895c[_0x56179d(0xb1)][_0x56179d(0x129)](_0x4e0688=>{const _0x19348c=_0x56179d;if(_0x4e0688[_0x19348c(0x1e4)]!=0x0)_0x22c691=![];}),_0x22c691&&(_0x1631cf=_0x1631cf[_0x56179d(0x245)](_0x4281f5=>{const _0x2d30a7=_0x56179d;return _0x4281f5[_0x2d30a7(0x1e5)]!=_0x36feae;}));}let _0x2580c3=dbConfig[_0x56179d(0x247)](_0x56179d(0x1ed))['find']({'botID':botID})['value']();_0x2580c3&&(dbConfig[_0x56179d(0x247)](_0x56179d(0x1ed))[_0x56179d(0x1b8)]({'botID':botID})[_0x56179d(0x271)]({'liquidity':_0x1631cf})[_0x56179d(0x1e2)](),config[_0x56179d(0xbd)]=_0x1631cf);logHistory('success',_0x56179d(0x13c)+Math[_0x56179d(0x280)](_0x387ae5[_0x56179d(0x1e4)])+'\x20'+_0x387ae5[_0x56179d(0x143)]+'\x20'+(_0x387ae5[_0x56179d(0x1e4)]>0x0?'added':'removed')+_0x56179d(0x11e)),proxyEmit(_0x56179d(0x190),emittedConfiguration());const _0x2a95f8=getNormalizedPerformance();emitPerformance(_0x2a95f8),getStartingBalances(_0x2a95f8),logger[_0x56179d(0x1f5)](_0x56179d(0x1af));}else config['autoliquidity']==_0x56179d(0x25c)&&(config['headless']?(await storeHeadless({'headless':![]}),logHistory(_0x56179d(0x146),'Portfolio\x20change\x20detected:\x20'+Math[_0x56179d(0x280)](_0x387ae5[_0x56179d(0x1e4)])+'\x20'+_0x387ae5[_0x56179d(0x143)]+'\x20'+(_0x387ae5['number']>0x0?'added':_0x56179d(0xcc))+_0x56179d(0x236))):logger['debug'](_0x56179d(0x13c)+Math[_0x56179d(0x280)](_0x387ae5[_0x56179d(0x1e4)])+'\x20'+_0x387ae5['coin']+'\x20'+(_0x387ae5[_0x56179d(0x1e4)]>0x0?_0x56179d(0xfa):'removed')+_0x56179d(0x1bc)));}else logger['debug']('Fee\x20discount\x20refund\x20detected:\x20'+Math[_0x56179d(0x280)](_0x387ae5['number'])+'\x20'+_0x387ae5[_0x56179d(0x143)]+'\x20'+(_0x387ae5['number']>0x0?_0x56179d(0xfa):_0x56179d(0xcc)));}else logger[_0x56179d(0x1f5)](_0x56179d(0x13c)+Math[_0x56179d(0x280)](_0x387ae5['number'])+'\x20'+_0x387ae5['coin']+'\x20'+(_0x387ae5[_0x56179d(0x1e4)]>0x0?_0x56179d(0xfa):_0x56179d(0xcc))+_0x56179d(0xc0));}currentCoins=_0x309efa,currentCoinsAll=_0x42e584;}}catch(_0x28cea6){if(!exchangeStopped)await handleError(_0x28cea6,_0x56179d(0x218));}transactionDetectionOngoing=![];}async function watchTransactions(){await sleep(0x14*0x3e8);while(!![]){!botPaused&&!blockTransactionDetection&&coinsLoaded?(detectLiquidityChange(),await sleep(watchTransactionsInterval)):await sleep(0x3e8);}}async function loadSymbols(){const _0x4850b3=_0xed67a2;try{markets=await exchange[_0x4850b3(0x276)](!![]),allSymbols=[],Object[_0x4850b3(0xf2)](markets)['forEach'](_0x582814=>{const _0x2e5577=_0x4850b3;_0x582814[0x1][_0x2e5577(0x26b)]&&_0x582814[0x1][_0x2e5577(0x1f7)]&&allSymbols[_0x2e5577(0x1d2)](_0x582814[0x0]);});}catch(_0x596f09){markets?logger[_0x4850b3(0x1f5)](_0x4850b3(0x1fd)+_0x596f09[_0x4850b3(0x25f)]()):(loading[_0x4850b3(0x1ef)]=!![],_0x596f09[_0x4850b3(0x25f)]()[_0x4850b3(0x17e)]()[_0x4850b3(0xc8)](_0x4850b3(0x16d))||_0x596f09['toString']()[_0x4850b3(0x17e)]()[_0x4850b3(0xc8)](_0x4850b3(0xff))?(logHistory(_0x4850b3(0x117),_0x4850b3(0x219)),loading['error']=_0x4850b3(0x259)):handleErrorNoStop(_0x596f09,_0x4850b3(0x20f),!![]),logHistory(_0x4850b3(0x117),_0x4850b3(0x165)),logHistory(_0x4850b3(0x117),'Pausing\x20for\x20'+loadCoinsRetryInterval/0xea60+_0x4850b3(0x27e)),logger[_0x4850b3(0x1f5)](_0x4850b3(0x24f),_0x596f09),emitLoadingProgress(),botPaused=!![],await sleep(loadCoinsRetryInterval),restartBot());}}function validateSymbols(_0xd29ce2){const _0x1b4824=_0xed67a2;let _0x5d166f=[];return _0xd29ce2[_0x1b4824(0x129)](_0x5b6ee4=>{const _0x1ddc3c=_0x1b4824;!allSymbols[_0x1ddc3c(0xc8)](_0x5b6ee4)?(logHistory('error',_0x1ddc3c(0x21c)+_0x5b6ee4+_0x1ddc3c(0x1ee)),loading[_0x1ddc3c(0x178)]=!![],emitLoadingProgress()):_0x5d166f['push'](_0x5b6ee4);}),_0x5d166f;}async function initclient(){const _0x134da2=_0xed67a2;proxyEmit('configuration',emittedConfiguration()),proxyEmit('exchanges',supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x134da2(0xde),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x3a74eb=getNormalizedPerformance();emitPerformance(_0x3a74eb),getStartingBalances(_0x3a74eb);}async function toggleBotMode(){const _0x157852=_0xed67a2;let _0xa876db=dbConfig[_0x157852(0x247)]('bot')[_0x157852(0x1b8)]({'botID':botID})[_0x157852(0x23a)]();if(_0xa876db){const _0x4de076=!_0xa876db[_0x157852(0x17c)];dbConfig[_0x157852(0x247)](_0x157852(0x1ed))[_0x157852(0x1b8)]({'botID':botID})[_0x157852(0x271)]({'headless':_0x4de076})[_0x157852(0x1e2)](),config['headless']=_0x4de076,proxyEmit(_0x157852(0x190),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x1dc876=_0xed67a2;process[_0x1dc876(0x181)]({'updatebotmanager':!![]},_0x3bf94c=>{}),logger[_0x1dc876(0x1f5)]('Headless:\x20'+config['headless']);}async function loadCoins(_0x5be5a7){const _0x8f12c6=_0xed67a2;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x55f942,_0x31fdf6=0x0,_0x26c7fa=0x0;_0x5be5a7[_0x8f12c6(0x129)](_0x4ae2da=>{const _0x5c5a9b=_0x8f12c6;loading[_0x5c5a9b(0x11a)][_0x5c5a9b(0x1d2)](_0x4ae2da);}),loadingCanceled=![];let _0x4cb125=![];while(_0x55f942!=_0x5be5a7['length']+maxLoadingProgress){_0x55f942=loadingProgress,_0x5be5a7[_0x8f12c6(0x129)](_0x4bc9be=>{const _0x355f23=_0x8f12c6;if(gTicker[noslash(_0x4bc9be)]){loading[_0x355f23(0x11a)]=loading[_0x355f23(0x11a)][_0x355f23(0x245)](_0x531317=>_0x531317!=_0x4bc9be);if(!watchedSymbols[_0x355f23(0xc8)](_0x4bc9be))watchedSymbols[_0x355f23(0x1d2)](_0x4bc9be);_0x55f942++;}}),loading[_0x8f12c6(0x1cf)]=Math[_0x8f12c6(0x199)](_0x55f942/(_0x5be5a7[_0x8f12c6(0x112)]+maxLoadingProgress)*0x64);loading[_0x8f12c6(0x1cf)]!=0x64&&(_0x26c7fa>0x1e*0x5&&(loading[_0x8f12c6(0x178)]=!![],emitLoadingProgress()),_0x26c7fa>0x78*0x5&&!_0x4cb125&&(_0x4cb125=!![],logHistory(_0x8f12c6(0x117),'Failed\x20to\x20load\x20coin\x20data\x20for\x20'+loading[_0x8f12c6(0x11a)]['join'](',\x20')+_0x8f12c6(0x231)),logHistory(_0x8f12c6(0x117),_0x8f12c6(0x23c)+loadCoinsRetryInterval/0xea60+_0x8f12c6(0x27e)),loadingCanceled=!![],await sleep(loadCoinsRetryInterval),restartBot()));if(loadingCanceled){loading[_0x8f12c6(0x1ef)]=!![],emitLoadingProgress();break;}else _0x31fdf6!=loading[_0x8f12c6(0x1cf)]&&(_0x31fdf6=loading[_0x8f12c6(0x1cf)],emitLoadingProgress()),_0x26c7fa++,await sleep(0xc8);}_0x55f942==_0x5be5a7[_0x8f12c6(0x112)]+maxLoadingProgress&&(coinsLoaded=!![],process[_0x8f12c6(0x181)]({'status':_0x8f12c6(0x142),'live':_0x8f12c6(0x217)},_0x41e897=>{}),_0x4cb125&&logHistory('success',_0x8f12c6(0x1fb)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x4bef27=_0xed67a2;proxyEmit(_0x4bef27(0x190),{...emittedConfiguration(),'configstate':_0x4bef27(0x123)});}function emitLoadingProgress(){const _0x10eb37=_0xed67a2;proxyEmit(_0x10eb37(0x234),loading);}async function getFiat(){const _0x5dd7cf=_0xed67a2;let _0x35619b=gTicker[stablecoins[_0x5dd7cf(0x20a)][_0x5dd7cf(0x143)]],_0x25c439=gTicker[stablecoins[_0x5dd7cf(0x21b)]['coin']];return{'eur':Number(_0x35619b),'usd':Number(_0x25c439)};}function capitalize(_0x4f1093){const _0x500b03=_0xed67a2;return _0x4f1093[_0x500b03(0x1d0)](0x0,0x1)[_0x500b03(0x1b6)]()+_0x4f1093[_0x500b03(0x1d0)](0x1);}function supportedExchanges(){const _0x2971c1=_0xed67a2,_0x1082ee=['ws',_0x2971c1(0x250),_0x2971c1(0xc2),'watchTrades',_0x2971c1(0x139),_0x2971c1(0x1e7),_0x2971c1(0x200),_0x2971c1(0x1ca),_0x2971c1(0x282)];let _0x37d96c=[],_0x518102=[],_0x3a74ea=ccxt[_0x2971c1(0xf4)][_0x2971c1(0x27a)];_0x3a74ea[_0x2971c1(0x129)](_0x19472c=>{const _0x9cd229=_0x2971c1;try{const _0x131d0a=new ccxt[(_0x9cd229(0xf4))][_0x19472c]();_0x518102[_0x9cd229(0x1d2)](_0x131d0a);}catch(_0x31dbb0){}}),_0x518102[_0x2971c1(0x129)](_0x2b14cd=>{const _0x22a4d8=_0x2971c1;let _0x541896=0x0;_0x1082ee[_0x22a4d8(0x129)](_0x540d2d=>{const _0x43ae7b=_0x22a4d8;_0x540d2d in _0x2b14cd[_0x43ae7b(0xea)]&&_0x2b14cd[_0x43ae7b(0xea)][_0x540d2d]&&_0x541896++;}),_0x541896==_0x1082ee[_0x22a4d8(0x112)]&&(!excludedExchanges[_0x22a4d8(0xc8)](_0x2b14cd['id'])&&_0x37d96c['push'](capitalize(_0x2b14cd['id'])));});let _0x1ef1b6=[];return _0x3a74ea[_0x2971c1(0x129)](_0x3cbbc9=>{const _0x3e2760=_0x2971c1;_0x3cbbc9=capitalize(_0x3cbbc9);if(!_0x37d96c[_0x3e2760(0xc8)](_0x3cbbc9))_0x1ef1b6['push'](_0x3cbbc9);}),_0x37d96c;}function setStartDatePerformance(){const _0x4abce0=_0xed67a2;if(config&&config['liquidity'][0x0][_0x4abce0(0xb1)]['length']!=0x0){const _0x18d7c9=config[_0x4abce0(0xbd)][0x0][_0x4abce0(0xb1)];dbPerformance['get'](_0x4abce0(0xe0))[_0x4abce0(0x1b8)]({'date':config['startdate']})[_0x4abce0(0x271)]({'coins':_0x18d7c9})['write']();}}function calculatePnL(_0x29fb47,_0x14e581,_0x608e00,_0x4b61e9,_0x117ec7,_0x5bb90b){const _0xa27ff6=_0xed67a2;!_0x29fb47[_0xa27ff6(0xc8)]('/'+config[_0xa27ff6(0x1cb)])&&(_0x608e00=_0x608e00==_0xa27ff6(0x1c2)?_0xa27ff6(0x22d):_0xa27ff6(0x1c2));!_0x5bb90b[_0x14e581]&&(_0x5bb90b[_0x14e581]={'number':0x0,'sells':0x0,'buys':0x0,'breakeven':0x0,'realizedPnL':0x0});let _0x213802=0x0,_0x1c1435,_0xe7a0b2;if(_0x608e00=='buy')_0xe7a0b2=_0x5bb90b[_0x14e581][_0xa27ff6(0x1e4)]*_0x5bb90b[_0x14e581][_0xa27ff6(0x225)]+_0x117ec7*_0x4b61e9,_0x5bb90b[_0x14e581][_0xa27ff6(0x1e4)]+=_0x4b61e9,_0x5bb90b[_0x14e581][_0xa27ff6(0x225)]=_0x5bb90b[_0x14e581]['number']!=0x0?_0xe7a0b2/_0x5bb90b[_0x14e581][_0xa27ff6(0x1e4)]:0x0,_0x5bb90b[_0x14e581][_0xa27ff6(0x243)]++;else _0x608e00==_0xa27ff6(0x22d)&&(_0x1c1435=Math[_0xa27ff6(0xb8)](_0x5bb90b[_0x14e581][_0xa27ff6(0x1e4)],_0x4b61e9),_0x213802=(_0x117ec7-_0x5bb90b[_0x14e581]['breakeven'])*_0x1c1435,_0xe7a0b2=Math[_0xa27ff6(0x21f)](_0x5bb90b[_0x14e581]['number']*_0x5bb90b[_0x14e581][_0xa27ff6(0x225)]-_0x1c1435*_0x5bb90b[_0x14e581][_0xa27ff6(0x225)],0x0),_0x5bb90b[_0x14e581][_0xa27ff6(0x1e4)]-=_0x1c1435,_0x5bb90b[_0x14e581][_0xa27ff6(0x225)]=_0x5bb90b[_0x14e581]['number']!=0x0?_0xe7a0b2/_0x5bb90b[_0x14e581]['number']:0x0,_0x5bb90b[_0x14e581][_0xa27ff6(0x287)]+=_0x213802,_0x5bb90b[_0x14e581]['sells']++);return _0x213802;}async function generatePnL(){const _0xcf826a=_0xed67a2;pnlGenerationNeeded=![],logger[_0xcf826a(0x1f5)]('Generating\x20PnL\x20data');const _0xca8ac5=dbLogs[_0xcf826a(0x247)](_0xcf826a(0xcd))['value']();let _0x54ac37={},_0x198f38=0x0,_0x475422=0x0,_0x525dbf=config[_0xcf826a(0x108)];const _0x54d0d1=fns[_0xcf826a(0xc6)](_0x525dbf,'yyyy/MM/dd',new Date()),_0x38e5c9=new Date();let _0x5051ad=0x0;for(let _0x86f152=_0x54d0d1;!fns['isBefore'](_0x38e5c9,_0x86f152);_0x86f152=fns[_0xcf826a(0x173)](_0x86f152,0x1)){const _0x39b17d=fns[_0xcf826a(0x1a8)](_0x86f152,_0xcf826a(0x201));while(_0x198f38<_0xca8ac5[_0xcf826a(0x112)]){const _0x47bb25=new Date(_0xca8ac5[_0x198f38][_0xcf826a(0x153)]);if(fns[_0xcf826a(0x1d9)](_0x47bb25,_0x86f152))_0x198f38++;else{if(_0xca8ac5[_0x198f38]['time']['includes'](_0x39b17d)){const _0x25b079=_0xca8ac5[_0x198f38];if(_0x25b079['type']===_0xcf826a(0xb4)&&(_0x25b079[_0xcf826a(0xbf)][_0xcf826a(0xc8)](_0xcf826a(0x1be))||_0x25b079['event'][_0xcf826a(0xc8)](_0xcf826a(0xba)))){const _0x4b0916=_0x25b079[_0xcf826a(0xbf)][_0xcf826a(0x128)](/([A-Z]+\/[A-Z]+) (sell|buy) #([\d.]+) @([\d.]+)/);if(_0x4b0916){const [,_0x166a8c,_0x58844f,_0x25f0b3,_0x3ff2ce]=_0x4b0916,_0x1a4645=_0x166a8c[_0xcf826a(0xc8)]('/'+config[_0xcf826a(0x1cb)])?_0x166a8c[_0xcf826a(0x242)]('/')[0x0]:_0x166a8c['split']('/')[0x1],_0x1a4287=calculatePnL(_0x166a8c,_0x1a4645,_0x58844f,parseFloat(_0x25f0b3),parseFloat(_0x3ff2ce),_0x54ac37);_0x475422+=_0x1a4287;}}_0x198f38++;}else break;}}dbPerformance['get'](_0xcf826a(0xe0))['find']({'date':_0x39b17d})[_0xcf826a(0x271)]({'pnl':_0x475422})[_0xcf826a(0x1e2)]();}dbCoinResults[_0xcf826a(0xf3)](_0xcf826a(0x177),_0x54ac37)['write'](),logger['debug'](_0xcf826a(0x1b4));const _0x28bef3=getNormalizedPerformance();emitPerformance(_0x28bef3);}async function updatePnL(_0x40d72d){const _0x1fd29f=_0xed67a2,{symbol:_0x5c156d,coin:_0x149265,amount:_0x57754c,price:_0x4ad602,side:_0x231adb,reverse:_0x3c9377}=_0x40d72d;let _0x3b6d67=dbCoinResults[_0x1fd29f(0x247)](_0x1fd29f(0x177))[_0x1fd29f(0x23a)]();const _0xec7d74=calculatePnL(_0x5c156d,_0x149265,_0x231adb,_0x57754c,_0x4ad602,_0x3b6d67);dbCoinResults[_0x1fd29f(0xf3)]('coins',_0x3b6d67)[_0x1fd29f(0x1e2)]();const _0x5c02a4=getTimeStamp()[_0x1fd29f(0x242)]('\x20')[0x0];let _0x4162b0=dbPerformance[_0x1fd29f(0x247)](_0x1fd29f(0xe0))['find']({'date':_0x5c02a4})[_0x1fd29f(0x23a)]();_0x4162b0?(_0x4162b0[_0x1fd29f(0x26f)]+=_0xec7d74,dbPerformance[_0x1fd29f(0x247)](_0x1fd29f(0xe0))[_0x1fd29f(0x1b8)]({'date':_0x5c02a4})[_0x1fd29f(0x271)](_0x4162b0)[_0x1fd29f(0x1e2)]()):await storePerformance();const _0x171435=getNormalizedPerformance();emitPerformance(_0x171435);}async function validate24hChanges(){const _0x3dcd88=_0xed67a2;for(const _0x1f28c2 of currentCoins){if(_0x1f28c2[_0x3dcd88(0x143)]!=config[_0x3dcd88(0x1cb)]){let _0x341fe5;_0x1f28c2[_0x3dcd88(0x270)]?_0x341fe5=formatResult((0x1/(gChange[_0x1f28c2[_0x3dcd88(0x286)]]/0x64+0x1)-0x1)*0x64,0x3):_0x341fe5=gChange[_0x1f28c2[_0x3dcd88(0x286)]],_0x341fe5<config[_0x3dcd88(0x198)]&&(logHistory('error',_0x1f28c2['coin']+_0x3dcd88(0x130)+_0x341fe5+'%'),logHistory(_0x3dcd88(0x117),_0x3dcd88(0x15d)),logHistory(_0x3dcd88(0x117),'Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again'),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x2438a7,_0x40dbea){const _0x191e03=_0xed67a2;if(!_0x2438a7)return!![];const _0xebcc4=_0x40dbea[_0x191e03(0x242)]('.'),_0x4522c1=_0x2438a7['split']('.');for(var _0x2aaadb=0x0;_0x2aaadb<_0x4522c1[_0x191e03(0x112)];_0x2aaadb++){const _0x73c1d5=~~_0x4522c1[_0x2aaadb],_0x1add84=~~_0xebcc4[_0x2aaadb];if(_0x73c1d5<_0x1add84)return!![];if(_0x73c1d5>_0x1add84)return![];}return![];}async function oneTimeMigration(){const _0x1a4fb0=_0xed67a2;let _0x2fa9eb=dbLogs[_0x1a4fb0(0x247)](_0x1a4fb0(0x232))[_0x1a4fb0(0x23a)]();if(isOlderVersion(_0x2fa9eb,_0x1a4fb0(0x16a))){let _0x40788f=[];const _0x5172a7=dbLogs[_0x1a4fb0(0x247)](_0x1a4fb0(0xcd))[_0x1a4fb0(0x23a)]();_0x5172a7['forEach'](_0x550ad5=>{const _0x30068c=_0x1a4fb0;_0x40788f[_0x30068c(0x1d2)]({'time':_0x550ad5[_0x30068c(0x153)],'type':_0x550ad5[_0x30068c(0x164)],'event':_0x550ad5['event']});}),dbLogs['get'](_0x1a4fb0(0xcd))[_0x1a4fb0(0x271)](_0x40788f)[_0x1a4fb0(0x1e2)]();}let _0x322458=dbConfig[_0x1a4fb0(0x247)](_0x1a4fb0(0x232))[_0x1a4fb0(0x23a)]();if(isOlderVersion(_0x322458,_0x1a4fb0(0x16a))){let _0x17a8c5=dbConfig[_0x1a4fb0(0x247)](_0x1a4fb0(0x1ed))[_0x1a4fb0(0x1b8)]({'botID':botID})[_0x1a4fb0(0x23a)]();if(_0x17a8c5){let _0x2ba009=[];_0x17a8c5['portfolio'][_0x1a4fb0(0x129)](_0x3ef826=>{const _0x56d48b=_0x1a4fb0;_0x2ba009[_0x56d48b(0x1d2)]({'coin':_0x3ef826['coin'],'number':_0x3ef826['startnumber'],'price':_0x3ef826['startprice']}),delete _0x3ef826[_0x56d48b(0xd8)],delete _0x3ef826['startprice'];});if(_0x2ba009['length']!==0x0)fs[_0x1a4fb0(0x171)](configbackuppath+('starting-balance-'+botID+'.json'),JSON['stringify'](_0x2ba009,null,0x4),function(_0x105453){if(_0x105453){}});const _0x596391=(_0x13d91d,_0x1a8a02)=>{const _0x1880b2=_0x1a4fb0;let _0x193bde=[];_0x1a8a02['forEach'](_0x51de53=>{const _0x315935=_0xcfbb,_0x23e3d1=_0x13d91d[_0x315935(0x1b8)](_0xb872f5=>_0xb872f5[_0x315935(0x143)]==_0x51de53['coin']);if(!_0x23e3d1)_0x193bde[_0x315935(0x1d2)](_0x51de53);});let _0x46e8c0=[];return _0x13d91d[_0x1880b2(0x129)](_0x1f0e64=>{const _0x1f2fca=_0x1880b2,_0x29bcc0=_0x1a8a02[_0x1f2fca(0x1b8)](_0x321f9f=>_0x321f9f[_0x1f2fca(0x143)]==_0x1f0e64[_0x1f2fca(0x143)]);if(!_0x29bcc0||_0x29bcc0['number']==0x0&&_0x1f0e64[_0x1f2fca(0x1e4)]!=0x0)_0x46e8c0['push'](_0x1f0e64);}),{'missingDay1':_0x193bde,'notInDay2':_0x46e8c0};},_0x465287=dbPerformance['get']('data')[_0x1a4fb0(0x13f)]()[_0x1a4fb0(0x23a)]();if(_0x465287[_0x1a4fb0(0x112)]>0x1){const {missingDay1:_0xd6f537,notInDay2:_0x1bfbc3}=_0x596391(_0x2ba009,_0x465287[0x1][_0x1a4fb0(0x177)]);_0x2ba009=[..._0x2ba009,..._0xd6f537],_0x1bfbc3[_0x1a4fb0(0x129)](_0x14a170=>{const _0x3ab7cb=_0x1a4fb0;let _0x19b1a1=_0x2ba009[_0x3ab7cb(0x14c)](_0x327e14=>_0x327e14[_0x3ab7cb(0x143)]==_0x14a170[_0x3ab7cb(0x143)]);_0x19b1a1!=-0x1&&_0x2ba009['splice'](_0x19b1a1,0x1);});}_0x2ba009['sort']((_0x4177ac,_0x25039e)=>_0x4177ac[_0x1a4fb0(0x143)]>_0x25039e[_0x1a4fb0(0x143)]?0x1:_0x25039e[_0x1a4fb0(0x143)]>_0x4177ac['coin']?-0x1:0x0);let _0x149afb=[{'date':_0x17a8c5[_0x1a4fb0(0x108)],'changes':_0x2ba009}];_0x465287[_0x1a4fb0(0x112)]>0x2&&_0x465287['forEach']((_0x5ef0a3,_0x1d32ac)=>{const _0x2ed1b8=_0x1a4fb0;if(_0x1d32ac>0x0&&_0x1d32ac<_0x465287['length']-0x1){const {missingDay1:_0x2be9af,notInDay2:_0x3b610a}=_0x596391(_0x465287[_0x1d32ac][_0x2ed1b8(0x177)],_0x465287[_0x1d32ac+0x1][_0x2ed1b8(0x177)]);_0x2ba009=[],(_0x2be9af['length']!=0x0||_0x3b610a[_0x2ed1b8(0x112)]!=0x0)&&(_0x2be9af['length']!=0x0&&_0x2ba009['push'](..._0x2be9af),_0x3b610a[_0x2ed1b8(0x112)]!=0x0&&(_0x3b610a[_0x2ed1b8(0x129)](_0x42c749=>{const _0x4abfc0=_0x2ed1b8;_0x42c749[_0x4abfc0(0x1e4)]=-_0x42c749[_0x4abfc0(0x1e4)];}),_0x2ba009[_0x2ed1b8(0x1d2)](..._0x3b610a)),_0x2ba009['sort']((_0x57f844,_0x33d406)=>_0x57f844[_0x2ed1b8(0x143)]>_0x33d406['coin']?0x1:_0x33d406[_0x2ed1b8(0x143)]>_0x57f844['coin']?-0x1:0x0),_0x149afb['push']({'date':_0x465287[_0x1d32ac+0x1][_0x2ed1b8(0x1e5)],'changes':_0x2ba009}));}}),dbConfig[_0x1a4fb0(0x247)](_0x1a4fb0(0x1ed))[_0x1a4fb0(0x1b8)]({'botID':botID})[_0x1a4fb0(0x271)]({..._0x17a8c5,'liquidity':_0x149afb})[_0x1a4fb0(0x1e2)]();}}if(isOlderVersion(_0x322458,_0x1a4fb0(0x118))){let _0x2026f3=dbConfig[_0x1a4fb0(0x247)](_0x1a4fb0(0x1ed))[_0x1a4fb0(0x1b8)]({'botID':botID})[_0x1a4fb0(0x23a)]();if(_0x2026f3){const _0x5f4c48=_0x2026f3['exchange'],_0x248d54=_0x5f4c48?capitalize(_0x5f4c48):_0x1a4fb0(0xb9);dbConfig['get'](_0x1a4fb0(0x1ed))[_0x1a4fb0(0x1b8)]({'botID':botID})[_0x1a4fb0(0x271)]({'exchange':_0x248d54})['write']();}}if(isOlderVersion(_0x322458,'2.6.22')){let _0x4c3aff=dbConfig[_0x1a4fb0(0x247)]('bot')[_0x1a4fb0(0x1b8)]({'botID':botID})[_0x1a4fb0(0x23a)]();if(_0x4c3aff){const _0x37048c=_0x4c3aff[_0x1a4fb0(0x149)],_0x2e8e35=_0x37048c?_0x1a4fb0(0x189):![];dbConfig['get']('bot')['find']({'botID':botID})['assign']({'marketcapEnabled':_0x2e8e35})[_0x1a4fb0(0x1e2)]();}}if(isOlderVersion(_0x322458,_0x1a4fb0(0x1a2))){let _0x4c6d1a=dbConfig[_0x1a4fb0(0x247)](_0x1a4fb0(0x1ed))['find']({'botID':botID})[_0x1a4fb0(0x23a)]();if(_0x4c6d1a){const _0x2caba0=_0x4c6d1a[_0x1a4fb0(0x115)],_0x3c83af=_0x2caba0?_0x1a4fb0(0x288):![];dbConfig[_0x1a4fb0(0x247)]('bot')[_0x1a4fb0(0x1b8)]({'botID':botID})[_0x1a4fb0(0x271)]({'autoliquidity':_0x3c83af})[_0x1a4fb0(0x1e2)]();}}let _0x1bd9ce=dbPerformance[_0x1a4fb0(0x247)](_0x1a4fb0(0x232))[_0x1a4fb0(0x23a)]();isOlderVersion(_0x1bd9ce,_0x1a4fb0(0x16a))&&setStartDatePerformance();let _0x135c7b=dbCoinResults[_0x1a4fb0(0x247)](_0x1a4fb0(0x232))[_0x1a4fb0(0x23a)]();if(isOlderVersion(_0x135c7b,_0x1a4fb0(0x102))){let _0x59411b=dbCoinResults[_0x1a4fb0(0x247)]('coins')[_0x1a4fb0(0x23a)]();if(_0x59411b[_0x1a4fb0(0x112)]!=0x0)pnlGenerationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x137177=_0xed67a2;dbConfig[_0x137177(0xf3)]('version',serverversion)[_0x137177(0x1e2)](),dbPerformance['set'](_0x137177(0x232),serverversion)[_0x137177(0x1e2)](),dbLogs[_0x137177(0xf3)]('version',serverversion)[_0x137177(0x1e2)](),dbCoinResults[_0x137177(0xf3)](_0x137177(0x232),serverversion)[_0x137177(0x1e2)]();}function getConfiguration(_0x1ca1fc){const _0x5c0b1c=_0xed67a2;let _0x3dc8b0=dbConfig[_0x5c0b1c(0x247)](_0x5c0b1c(0x1ed))[_0x5c0b1c(0x1b8)]({'botID':_0x1ca1fc})[_0x5c0b1c(0x23a)]();if(_0x3dc8b0){let _0x18649a=![];typeof _0x3dc8b0[_0x5c0b1c(0x13b)]=='string'&&(_0x3dc8b0={..._0x3dc8b0,'threshold':Number(_0x3dc8b0[_0x5c0b1c(0x13b)])},_0x18649a=!![]),_0x3dc8b0[_0x5c0b1c(0x198)]==undefined&&(_0x3dc8b0={..._0x3dc8b0,'change24h':-0x14},_0x18649a=!![]),_0x3dc8b0[_0x5c0b1c(0x1b1)]==undefined&&(_0x3dc8b0={..._0x3dc8b0,'fiat':_0x5c0b1c(0x24d)},_0x18649a=!![]),_0x3dc8b0[_0x5c0b1c(0x10e)]==undefined&&(_0x3dc8b0={..._0x3dc8b0,'onepagemode':settings[_0x5c0b1c(0x10e)]},_0x18649a=!![]),_0x3dc8b0[_0x5c0b1c(0x1c1)]==undefined&&(_0x3dc8b0={..._0x3dc8b0,'colorscheme':_0x5c0b1c(0xd6)},_0x18649a=!![]),_0x3dc8b0['autoliquidity']==undefined&&(_0x3dc8b0={..._0x3dc8b0,'autoliquidity':_0x5c0b1c(0x288)},_0x18649a=!![]),_0x3dc8b0['marketcapApi']==undefined&&(_0x3dc8b0={..._0x3dc8b0,'marketcapApi':settings[_0x5c0b1c(0x1e8)]?!![]:![]},_0x18649a=!![]),_0x3dc8b0[_0x5c0b1c(0x149)]==undefined&&(_0x3dc8b0={..._0x3dc8b0,'marketcapEnabled':![]},_0x18649a=!![]),_0x3dc8b0[_0x5c0b1c(0xf1)]==undefined&&(_0x3dc8b0={..._0x3dc8b0,'sandbox':![]},_0x18649a=!![]),_0x18649a&&(_0x3dc8b0={'botID':_0x3dc8b0[_0x5c0b1c(0x18b)],'exchange':_0x3dc8b0['exchange'],'apiKey':_0x3dc8b0[_0x5c0b1c(0x151)],'apiSecret':_0x3dc8b0['apiSecret'],'apiPassword':_0x3dc8b0[_0x5c0b1c(0x206)],'basecoin':_0x3dc8b0[_0x5c0b1c(0x1cb)],'botname':_0x3dc8b0[_0x5c0b1c(0x25d)],'showname':_0x3dc8b0[_0x5c0b1c(0xc4)],'threshold':_0x3dc8b0[_0x5c0b1c(0x13b)],'ordertype':_0x3dc8b0[_0x5c0b1c(0x183)],'timeout':_0x3dc8b0[_0x5c0b1c(0x178)],'fiat':_0x3dc8b0[_0x5c0b1c(0x1b1)],'startdate':_0x3dc8b0[_0x5c0b1c(0x108)],'recreate':_0x3dc8b0[_0x5c0b1c(0x26e)],'timeshift':_0x3dc8b0[_0x5c0b1c(0x11b)],'onepagemode':_0x3dc8b0[_0x5c0b1c(0x10e)],'headless':_0x3dc8b0[_0x5c0b1c(0x17c)],'cooldown':_0x3dc8b0[_0x5c0b1c(0x111)],'change24h':_0x3dc8b0['change24h'],'emojibuy':_0x3dc8b0[_0x5c0b1c(0x16b)],'emojisell':_0x3dc8b0['emojisell'],'colorscheme':_0x3dc8b0[_0x5c0b1c(0x1c1)],'marketcapApi':_0x3dc8b0['marketcapApi'],'marketcapEnabled':_0x3dc8b0[_0x5c0b1c(0x149)],'sandbox':_0x3dc8b0[_0x5c0b1c(0xf1)],'portfolio':_0x3dc8b0[_0x5c0b1c(0xd1)],'autoliquidity':_0x3dc8b0['autoliquidity'],'liquidity':_0x3dc8b0[_0x5c0b1c(0xbd)],'openOrders':_0x3dc8b0[_0x5c0b1c(0x233)]},dbConfig[_0x5c0b1c(0x247)](_0x5c0b1c(0x1ed))[_0x5c0b1c(0x147)]()[_0x5c0b1c(0x1e2)](),dbConfig[_0x5c0b1c(0x247)](_0x5c0b1c(0x1ed))[_0x5c0b1c(0x1d2)](_0x3dc8b0)[_0x5c0b1c(0x1e2)]());}else _0x3dc8b0={'botID':_0x1ca1fc,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x5c0b1c(0x21e)+_0x1ca1fc,'showname':![],'threshold':0x3,'ordertype':_0x5c0b1c(0xeb),'timeout':0x14,'fiat':_0x5c0b1c(0x24d),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x5c0b1c(0x11b)],'onepagemode':settings[_0x5c0b1c(0x10e)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':'red_yellow_blue','marketcapApi':settings['marketcapApi']?!![]:![],'marketcapEnabled':![],'sandbox':![],'portfolio':[],'autoliquidity':_0x5c0b1c(0x288),'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x3dc8b0;}function emittedConfiguration(){const _0x5ccd4d=_0xed67a2;let _0x1b63e2;if(config['apiKey']=='')_0x1b63e2={...config,'configstate':_0x5ccd4d(0xf6)};else config[_0x5ccd4d(0x151)]==_0x5ccd4d(0xe9)?_0x1b63e2={...config,'configstate':_0x5ccd4d(0x154)}:(_0x1b63e2={...config,'apiKey':_0x5ccd4d(0x265),'apiSecret':_0x5ccd4d(0x265)},config[_0x5ccd4d(0x206)]&&(_0x1b63e2[_0x5ccd4d(0x206)]=_0x5ccd4d(0x265)));return _0x1b63e2[_0x5ccd4d(0x19c)]=enableFiatToggle,_0x1b63e2;}function getSettings(){const _0xf5c8b2=_0xed67a2;return dbSettings[_0xf5c8b2(0x247)](_0xf5c8b2(0x261))[_0xf5c8b2(0x23a)]();}function getSecure(){const _0x2f216a=_0xed67a2;return dbSecure[_0x2f216a(0x247)](_0x2f216a(0x145))[_0x2f216a(0x23a)]()||{};}function updateTimeshift(_0x22c157){const _0x448acb=_0xed67a2;let _0x277200=dbConfig['get'](_0x448acb(0x1ed))[_0x448acb(0x1b8)]({'botID':botID})[_0x448acb(0x23a)]();_0x277200&&dbConfig[_0x448acb(0x247)](_0x448acb(0x1ed))[_0x448acb(0x1b8)]({'botID':botID})['assign']({'timeshift':_0x22c157})[_0x448acb(0x1e2)](),config['timeshift']=_0x22c157,proxyEmit(_0x448acb(0x190),emittedConfiguration());}function updateOnepagemode(_0x32b2b9){const _0x1f64e9=_0xed67a2;let _0x5875fc=dbConfig[_0x1f64e9(0x247)]('bot')[_0x1f64e9(0x1b8)]({'botID':botID})[_0x1f64e9(0x23a)]();_0x5875fc&&dbConfig[_0x1f64e9(0x247)](_0x1f64e9(0x1ed))[_0x1f64e9(0x1b8)]({'botID':botID})[_0x1f64e9(0x271)]({'onepagemode':_0x32b2b9})[_0x1f64e9(0x1e2)](),config[_0x1f64e9(0x10e)]=_0x32b2b9,proxyEmit(_0x1f64e9(0x190),emittedConfiguration());}function updateMarketcapApi(_0x1172d2){const _0x427235=_0xed67a2,_0x335d76=_0x1172d2?!![]:![];let _0x436456=dbConfig[_0x427235(0x247)]('bot')[_0x427235(0x1b8)]({'botID':botID})[_0x427235(0x23a)]();_0x436456&&dbConfig[_0x427235(0x247)]('bot')[_0x427235(0x1b8)]({'botID':botID})[_0x427235(0x271)]({'marketcapApi':_0x335d76})[_0x427235(0x1e2)](),config['marketcapApi']=_0x335d76,getMarketCap(),proxyEmit(_0x427235(0x190),emittedConfiguration());}async function storeConfiguration(_0x155e1c){const _0x214a37=_0xed67a2;logger[_0x214a37(0x1f5)]('Saving\x20configuration');_0x155e1c[_0x214a37(0x285)]&&delete _0x155e1c[_0x214a37(0x285)];if(pidBalances)clearTimeout(pidBalances);setBlockTransactionDetection(!![]);let _0x57af77=![],_0x1d86e3=![],_0x528400=[];_0x155e1c[_0x214a37(0xd1)][_0x214a37(0x129)](_0x453528=>{const _0x4983c2=_0x214a37;if(!_0x453528[_0x4983c2(0x226)]&&_0x453528[_0x4983c2(0x143)]!=_0x155e1c['basecoin'])_0x528400[_0x4983c2(0x1d2)](_0x453528[_0x4983c2(0x286)]);}),_0x528400[_0x214a37(0x129)](_0x22f3a2=>{const _0x12ba2d=_0x214a37,_0x5490ee=currentCoins[_0x12ba2d(0x1b8)](_0x5bfc18=>_0x5bfc18[_0x12ba2d(0x286)]==_0x22f3a2);!_0x5490ee&&(_0x57af77=!![]);}),currentCoins[_0x214a37(0x129)](_0x47ab21=>{const _0x1ab5ed=_0x214a37;if(_0x47ab21[_0x1ab5ed(0x143)]!=config[_0x1ab5ed(0x1cb)]){const _0x2800be=_0x528400[_0x1ab5ed(0x1b8)](_0x344037=>_0x344037==_0x47ab21[_0x1ab5ed(0x286)]);!_0x2800be&&(_0x57af77=!![]);}}),_0x155e1c['portfolio'][_0x214a37(0x129)](_0x1729de=>{const _0x149fe3=_0x214a37,_0x40db99=config[_0x149fe3(0xd1)]['find'](_0x3a9463=>_0x3a9463[_0x149fe3(0x143)]==_0x1729de[_0x149fe3(0x143)]);if(_0x40db99&&_0x1729de[_0x149fe3(0xd4)]!=_0x40db99[_0x149fe3(0xd4)])_0x1d86e3=!![];});let _0x2a8719=dbConfig[_0x214a37(0x247)]('bot')[_0x214a37(0x1b8)]({'botID':botID})[_0x214a37(0x23a)]();_0x155e1c={..._0x155e1c,'apiKey':decryptRSA(secure[_0x214a37(0x12f)],_0x155e1c[_0x214a37(0x151)]),'apiSecret':decryptRSA(secure[_0x214a37(0x12f)],_0x155e1c[_0x214a37(0xdf)])};_0x155e1c[_0x214a37(0x206)]&&(_0x155e1c[_0x214a37(0x206)]=decryptRSA(secure[_0x214a37(0x12f)],_0x155e1c[_0x214a37(0x206)]));let _0x1a3aca=![];if(_0x2a8719){_0x155e1c['apiKey']==_0x214a37(0x265)?_0x155e1c['apiKey']=config[_0x214a37(0x151)]:_0x1a3aca=!![];_0x155e1c['apiSecret']==_0x214a37(0x265)?_0x155e1c['apiSecret']=config[_0x214a37(0xdf)]:_0x1a3aca=!![];if(_0x155e1c[_0x214a37(0x206)]==_0x214a37(0x265))_0x155e1c[_0x214a37(0x206)]=config[_0x214a37(0x206)];else{if(_0x155e1c[_0x214a37(0x206)])_0x1a3aca=!![];}dbConfig[_0x214a37(0x247)]('bot')['find']({'botID':botID})[_0x214a37(0x271)](_0x155e1c)['write']();}else dbConfig['get'](_0x214a37(0x1ed))['push'](_0x155e1c)[_0x214a37(0x1e2)](),_0x1a3aca=!![],process[_0x214a37(0x181)]({'status':_0x214a37(0x142),'live':_0x214a37(0x217)},_0x19ac1f=>{});process[_0x214a37(0x181)]({'botname':_0x155e1c[_0x214a37(0x25d)]},_0x27356e=>{}),config={..._0x155e1c},updateBotManager(),proxyEmit(_0x214a37(0x263)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x1a3aca)await reset(!![]);else _0x57af77||_0x1d86e3?await reset(![]):getBalances();setBlockTransactionDetection(![]);}async function storeHeadless(_0x164241){const _0x4b4d8d=_0xed67a2,_0x491287={...config,'headless':_0x164241[_0x4b4d8d(0x17c)]};let _0x10c78b=dbConfig['get']('bot')[_0x4b4d8d(0x1b8)]({'botID':botID})[_0x4b4d8d(0x23a)]();_0x10c78b&&dbConfig[_0x4b4d8d(0x247)]('bot')[_0x4b4d8d(0x1b8)]({'botID':botID})['assign'](_0x491287)[_0x4b4d8d(0x1e2)](),config={..._0x491287},updateBotManager(),proxyEmit(_0x4b4d8d(0x190),emittedConfiguration());}async function storeFiat(_0xb729d2){const _0x3cdf10=_0xed67a2,_0x47cb85={...config,'fiat':_0xb729d2};let _0x4d79f0=dbConfig['get'](_0x3cdf10(0x1ed))[_0x3cdf10(0x1b8)]({'botID':botID})[_0x3cdf10(0x23a)]();_0x4d79f0&&dbConfig[_0x3cdf10(0x247)]('bot')[_0x3cdf10(0x1b8)]({'botID':botID})[_0x3cdf10(0x271)](_0x47cb85)[_0x3cdf10(0x1e2)](),config={..._0x47cb85},proxyEmit(_0x3cdf10(0x190),emittedConfiguration());}function resetHistory(){const _0x3d94c0=_0xed67a2;logger[_0x3d94c0(0x193)](_0x3d94c0(0x1ac));try{if(fs[_0x3d94c0(0x262)](path[_0x3d94c0(0x20b)](configpath,'bot-'+botID+_0x3d94c0(0xf5))))fs['unlinkSync'](path[_0x3d94c0(0x20b)](configpath,_0x3d94c0(0x1f1)+botID+_0x3d94c0(0xf5)));if(fs['existsSync'](path[_0x3d94c0(0x20b)](configpath,_0x3d94c0(0x1f1)+botID+_0x3d94c0(0x1ec))))fs[_0x3d94c0(0xdc)](path[_0x3d94c0(0x20b)](configpath,_0x3d94c0(0x1f1)+botID+_0x3d94c0(0x1ec)));if(fs[_0x3d94c0(0x262)](path[_0x3d94c0(0x20b)](configpath,_0x3d94c0(0x1f1)+botID+'-results.json')))fs[_0x3d94c0(0xdc)](path[_0x3d94c0(0x20b)](configpath,'bot-'+botID+_0x3d94c0(0xe3)));}catch(_0x186837){if(_0x186837)logger[_0x3d94c0(0x193)](_0x3d94c0(0x131),_0x186837);}const _0x1ce8b0=getDate();let _0x279383=[];currentCoins['forEach'](_0x59fa99=>{const _0x5d2c82=_0x3d94c0;_0x279383[_0x5d2c82(0x1d2)]({'coin':_0x59fa99[_0x5d2c82(0x143)],'number':_0x59fa99[_0x5d2c82(0x1e4)],'price':_0x59fa99[_0x5d2c82(0x10a)]});});let _0xe7d12e=dbConfig[_0x3d94c0(0x247)](_0x3d94c0(0x1ed))[_0x3d94c0(0x1b8)]({'botID':botID})['value']();_0xe7d12e&&(dbConfig[_0x3d94c0(0x247)](_0x3d94c0(0x1ed))[_0x3d94c0(0x1b8)]({'botID':botID})['assign']({'liquidity':[{'date':_0x1ce8b0,'changes':_0x279383}]})[_0x3d94c0(0x1e2)](),config['liquidity']=[]),restartBot(!![]);}function noslash(_0x40e0ae){const _0x5e5491=_0xed67a2;return _0x40e0ae[_0x5e5491(0x1ea)]('/','');}function updateHighestFee(_0x31bca0){const _0x5976a6=_0xed67a2;if(_0x31bca0[_0x5976a6(0x270)]){let _0x156256={'filled':_0x31bca0[_0x5976a6(0x168)]*_0x31bca0[_0x5976a6(0x25a)],'amount':_0x31bca0[_0x5976a6(0x168)]*_0x31bca0[_0x5976a6(0x25a)],'side':_0x31bca0['side']==_0x5976a6(0x22d)?_0x5976a6(0x1c2):_0x5976a6(0x22d),'price':0x1/_0x31bca0['price']};_0x31bca0={..._0x31bca0,..._0x156256};}const _0x1c9db7=defaultFee*_0x31bca0[_0x5976a6(0x168)]*_0x31bca0['price'];lastFees['recent20']['length']===0x14&&lastFees[_0x5976a6(0x1a9)]['shift'](),lastFees[_0x5976a6(0x1a9)][_0x5976a6(0x1d2)](_0x1c9db7),lastFees[_0x5976a6(0x182)]=Math[_0x5976a6(0x21f)](...lastFees[_0x5976a6(0x1a9)]);}async function updateNumberCoinsCcxt(_0xc4db48){const _0x1eed75=_0xed67a2;logger[_0x1eed75(0x1f5)](_0x1eed75(0x18e)+_0xc4db48[_0x1eed75(0x286)]+'\x20|\x20'+_0xc4db48[_0x1eed75(0x1b3)]+_0x1eed75(0x14d)+_0xc4db48[_0x1eed75(0x168)]+'\x20/\x20'+_0xc4db48[_0x1eed75(0x1fa)]+_0x1eed75(0x14d)+_0xc4db48['id']);let _0x2ca58b=_0xc4db48[_0x1eed75(0x1b3)],_0xc72bc9=![];currentCoins['forEach'](_0x160e94=>{const _0x38bade=_0x1eed75;_0x160e94[_0x38bade(0x286)]==_0xc4db48[_0x38bade(0x286)]&&(_0xc72bc9=!![]);});if(!_0xc72bc9)return;const _0x1136b0=currentCoins[_0x1eed75(0x1b8)](_0x15edb2=>_0x15edb2[_0x1eed75(0x286)]==_0xc4db48[_0x1eed75(0x286)]),_0x39fb1a=_0x1136b0[_0x1eed75(0x143)],_0x14b74e=_0x5b241e=>{const _0x5c48ef=_0x1eed75,_0x468a79=currentCoins[_0x5c48ef(0x1b8)](_0x451982=>_0x451982[_0x5c48ef(0x286)]==_0xc4db48[_0x5c48ef(0x286)]);if(_0x468a79)_0x468a79[_0x5c48ef(0x1e9)]=_0x5b241e;};let _0xbf7285=![];for(const _0x2398af of lastOrders){const _0x3341b0=0x64,_0x4068c6=0x1388;let _0x27dfdd=0x0;while(!_0x2398af[_0x1eed75(0xf8)]&&_0x27dfdd*_0x3341b0<_0x4068c6){_0x27dfdd++,await sleep(_0x3341b0);}if(_0x27dfdd>0x0)logger[_0x1eed75(0x1f5)]('Waited\x20'+_0x27dfdd*_0x3341b0/0x3e8+_0x1eed75(0x253));_0x2398af[_0x1eed75(0xf8)]==_0xc4db48['id']&&(_0xbf7285=!![]);}if(_0x2ca58b==_0x1eed75(0x269)){_0x14b74e('open');if(_0xc4db48[_0x1eed75(0x168)]>0x0&&_0xc4db48[_0x1eed75(0x168)]<_0xc4db48['amount']){if(_0xbf7285){setBlockTransactionDetection(!![]),logger[_0x1eed75(0x1f5)](_0x1eed75(0x255)+_0xc4db48['filled']+_0x1eed75(0xb3)+_0xc4db48['id']);const _0x5ade64=await getCoins(balanceUpdateDelay,undefined,undefined,_0x39fb1a);[currentCoins,currentCoinsAll]=_0x5ade64,setBlockTransactionDetection(![]);}else logger[_0x1eed75(0x1f5)](_0x1eed75(0x255)+_0xc4db48[_0x1eed75(0x168)]+_0x1eed75(0x1f8)+_0xc4db48['id']),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay);}}else{if(_0x2ca58b=='canceled'){_0x14b74e(_0x1eed75(0xcb)),lastOrders=lastOrders['filter'](_0x52beaa=>_0x52beaa['symbol']!=_0xc4db48[_0x1eed75(0x286)]);const _0x4b3c41=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x4b3c41,setBlockTransactionDetection(![]),await getOpenOrders(),handleOpenOrders();}else{if(_0x2ca58b==_0x1eed75(0x1fe)){if(lastOrders)for(const _0x8552be of lastOrders){if(_0x8552be[_0x1eed75(0xf8)]==_0xc4db48['id']){logger[_0x1eed75(0x1f5)](_0x1eed75(0x24e)+_0xc4db48['id']),_0xbf7285=!![];if(_0x8552be[_0x1eed75(0x168)]==0x0){setBlockTransactionDetection(!![]),logger[_0x1eed75(0x1f5)](_0x1eed75(0x209)+_0xc4db48['id']);if(_0xc4db48[_0x1eed75(0xc5)])_0x8552be[_0x1eed75(0x25a)]=_0xc4db48[_0x1eed75(0xc5)];else{if(_0xc4db48[_0x1eed75(0x25a)])_0x8552be[_0x1eed75(0x25a)]=_0xc4db48[_0x1eed75(0x25a)];else{}}_0x8552be[_0x1eed75(0x168)]=_0xc4db48[_0x1eed75(0x168)],updateHighestFee(_0x8552be);const _0x10b2ab=await getCoins(balanceUpdateDelay,undefined,undefined,_0x39fb1a);[currentCoins,currentCoinsAll]=_0x10b2ab,setBlockTransactionDetection(![]),await validateOrders(),_0x14b74e(_0x1eed75(0x168)),_0x8552be[_0x1eed75(0x256)]={'currency':_0xc4db48[_0x1eed75(0x256)]?_0xc4db48['fee']['currency']:null,'cost':_0xc4db48['fee']?_0xc4db48[_0x1eed75(0x256)][_0x1eed75(0x1ae)]:0x0},await updatePnL(_0x8552be);}}}!_0xbf7285&&(logger[_0x1eed75(0x1f5)](_0x1eed75(0x23b)+_0xc4db48['id']),_0x14b74e(_0x1eed75(0x168)),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay),await updateOpenOrders(),handleOpenOrders());}}}if(lastBalances){let _0x29aef2=JSON['parse'](lastBalances[_0x1eed75(0xd1)]);const _0x17c1e6=_0x29aef2['find'](_0x23e6c7=>_0x23e6c7[_0x1eed75(0x286)]==_0xc4db48[_0x1eed75(0x286)]);if(_0x17c1e6){if(_0x2ca58b==_0x1eed75(0x269))_0x17c1e6[_0x1eed75(0x1e9)]=_0x17c1e6[_0x1eed75(0x1e9)]=='filled'?_0x1eed75(0x168):_0x1eed75(0x269);else{if(_0x2ca58b=='canceled')_0x17c1e6['orderstatus']=_0x17c1e6[_0x1eed75(0x1e9)]==_0x1eed75(0x168)?_0x1eed75(0x168):_0x1eed75(0xcb);else _0x2ca58b=='closed'&&(_0x17c1e6[_0x1eed75(0x1e9)]='filled');}}lastBalances={...lastBalances,'portfolio':JSON[_0x1eed75(0xc1)](_0x29aef2)},proxyEmit(_0x1eed75(0xde),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x3aa970=_0xed67a2;await getOpenOrders();let _0x56e971=![];currentCoins[_0x3aa970(0x129)](_0xde0eff=>{const _0x502659=_0x3aa970;_0x56e971=allOpenOrders[_0x502659(0x1b8)](_0x490b8b=>_0x490b8b[_0x502659(0x286)]==_0xde0eff['symbol']),_0xde0eff[_0x502659(0x1e9)]=_0x56e971?_0x502659(0x269):_0x502659(0xc3);});}async function fetchBalance(_0x3ccd13=!![]){const _0xfb0c3b=_0xed67a2;let _0x19dbf0,_0x36a73d,_0x33db33,_0x4751b7=0x0;while(!_0x36a73d&&_0x4751b7<maxRetries){try{return _0x19dbf0=await exchange[_0xfb0c3b(0x282)](),_0x36a73d=_0x19dbf0['total'],_0x36a73d;}catch(_0x468a4b){_0x33db33=_0x468a4b,_0x4751b7++,await sleep(retryInterval);}}return!_0x3ccd13?handleErrorNoStop(_0x33db33,'fetchBalance()'):await handleError(_0x33db33,_0xfb0c3b(0x134)),![];}async function getCoins(_0x5691a9=0x0,_0x344366=!![],_0x330129=config[_0xed67a2(0x1cb)],_0x14c7a0){const _0x438e38=_0xed67a2;let _0x618180=[],_0xc27965=[],_0x1e8f83=[],_0xa0defc;if(_0x5691a9)await sleep(_0x5691a9);if(botPaused)return[currentCoins,currentCoinsAll];let _0x3fff82=![],_0x36e769=0x0,_0x5d6642,_0x1ca65b;_0x14c7a0&&(_0x5d6642=currentCoins[_0x438e38(0x1b8)](_0x51ef5e=>_0x51ef5e[_0x438e38(0x143)]==_0x14c7a0),_0x5d6642&&(_0x1ca65b=_0x5d6642[_0x438e38(0x27f)],delete _0x5d6642[_0x438e38(0x27f)]));while(!_0x3fff82){_0xa0defc=await fetchBalance(_0x344366);if(_0xa0defc){if(_0x14c7a0){if(_0xa0defc[_0x14c7a0]!=_0x1ca65b)logger[_0x438e38(0x1f5)](_0x438e38(0x258)+_0x14c7a0+':\x20'+_0xa0defc[_0x14c7a0]+'\x20('+_0x1ca65b+')'),_0x3fff82=!![];else{logger[_0x438e38(0x1f5)](_0x438e38(0x167)+_0x14c7a0+':\x20'+_0xa0defc[_0x14c7a0]+'\x20('+_0x1ca65b+')'),_0x36e769++;if(_0x36e769<balanceUpdateRetries)await sleep(balanceUpdateDelay);else{logger[_0x438e38(0x1f5)](_0x438e38(0xe6)+_0x36e769+_0x438e38(0x1ab));break;}}}else break;}else return[currentCoins,currentCoinsAll];}for(const [_0x15b439,_0x4d0d93]of Object['entries'](_0xa0defc)){_0x1e8f83[_0x438e38(0x1d2)](_0x15b439);}config[_0x438e38(0xd1)][_0x438e38(0x129)](_0x196a55=>{const _0x59dacd=_0x438e38;!_0x1e8f83['includes'](_0x196a55[_0x59dacd(0x143)])&&(_0xa0defc[_0x196a55['coin']]=0x0);});if(_0x330129=='')for(const [_0x4276de,_0x4c15f9]of Object[_0x438e38(0xf2)](_0xa0defc)){_0x4c15f9!=0x0&&_0x618180[_0x438e38(0x1d2)]({'coin':_0x4276de});}else for(const [_0x2fe418,_0x4903ad]of Object[_0x438e38(0xf2)](_0xa0defc)){const _0x20e8f5=config['portfolio'][_0x438e38(0x1b8)](_0x2cb143=>_0x2cb143[_0x438e38(0x143)]==_0x2fe418),_0x945902=_0x2fe418+'/'+_0x330129,_0x43e192=_0x330129+'/'+_0x2fe418,_0x5cddab=currentCoins[_0x438e38(0x1b8)](_0x429661=>_0x429661[_0x438e38(0x143)]==_0x2fe418);if((_0x4903ad!=0x0||_0x20e8f5)&&(allSymbols['includes'](_0x945902)||_0x2fe418==_0x330129))_0x5cddab?_0x618180[_0x438e38(0x1d2)]({..._0x5cddab,'number':Math['max'](_0x4903ad+(_0x20e8f5&&_0x20e8f5[_0x438e38(0xd4)]||0x0),0x0)}):_0x618180[_0x438e38(0x1d2)]({'coin':_0x2fe418,'symbol':_0x945902,'reverse':![],'number':Math[_0x438e38(0x21f)](_0x4903ad+(_0x20e8f5&&_0x20e8f5['offset']||0x0),0x0),'orderstatus':_0x438e38(0xc3)});else{if((_0x4903ad!=0x0||_0x20e8f5)&&allSymbols['includes'](_0x43e192))_0x5cddab?_0x618180[_0x438e38(0x1d2)]({..._0x5cddab,'number':Math[_0x438e38(0x21f)](_0x4903ad+(_0x20e8f5&&_0x20e8f5[_0x438e38(0xd4)]||0x0),0x0)}):_0x618180[_0x438e38(0x1d2)]({'coin':_0x2fe418,'symbol':_0x43e192,'reverse':!![],'number':Math[_0x438e38(0x21f)](_0x4903ad+(_0x20e8f5&&_0x20e8f5[_0x438e38(0xd4)]||0x0),0x0),'orderstatus':_0x438e38(0xc3)});else _0x20e8f5&&_0x618180['push']({'coin':_0x20e8f5[_0x438e38(0x143)],'symbol':_0x20e8f5[_0x438e38(0x286)],'reverse':_0x20e8f5[_0x438e38(0x270)],'number':0x0,'orderstatus':_0x438e38(0xc3)});}}return _0x618180[_0x438e38(0x106)]((_0x2de05a,_0x55ce15)=>_0x2de05a['delta']<_0x55ce15['delta']?0x1:_0x55ce15[_0x438e38(0x1e6)]<_0x2de05a[_0x438e38(0x1e6)]?-0x1:0x0),_0xc27965=cloneDeep(_0x618180),_0x618180=_0x618180[_0x438e38(0x245)](_0x2d1058=>{const _0x16315e=_0x438e38,_0x7e4e4b=config[_0x16315e(0xd1)][_0x16315e(0x1b8)](_0x328fe5=>_0x328fe5['coin']==_0x2d1058[_0x16315e(0x143)]);return _0x7e4e4b&&!_0x7e4e4b[_0x16315e(0x226)];}),[_0x618180,_0xc27965];}async function getOpenOrders(){const _0x39758a=_0xed67a2;let _0x21b9da;allOpenOrders=[];try{for(const _0x34c680 of config['portfolio']){!_0x34c680[_0x39758a(0x226)]&&_0x34c680[_0x39758a(0x143)]!=config[_0x39758a(0x1cb)]&&(_0x21b9da=await exchange[_0x39758a(0x1ca)](_0x34c680[_0x39758a(0x286)]),_0x21b9da[_0x39758a(0x112)]>0x0&&allOpenOrders['push'](_0x21b9da[0x0]));}}catch(_0xb89608){await handleError(_0xb89608,_0x39758a(0x1d3));}}async function handleOpenOrders(_0x193ee4=0x0){const _0x180938=_0xed67a2;allOpenOrders[_0x180938(0x112)]==0x0&&lockOrders==ORDERS['LOCKED']&&allOrdersPlaced&&(_0x193ee4==0x0?(logger['debug'](_0x180938(0x27d)),_0x193ee4++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger['debug'](_0x180938(0x127)),validateOrders(_0x180938(0x17a))));}async function testAPI(){const _0x37fb70=_0xed67a2;try{return await exchange[_0x37fb70(0x282)](),!![];}catch(_0x16179b){loading[_0x37fb70(0x1ef)]=!![],_0x16179b[_0x37fb70(0x25f)]()[_0x37fb70(0x17e)]()[_0x37fb70(0xc8)](_0x37fb70(0x16d))||_0x16179b[_0x37fb70(0x25f)]()['toLowerCase']()[_0x37fb70(0xc8)]('request-time')?(logHistory(_0x37fb70(0x117),_0x37fb70(0x219)),loading[_0x37fb70(0x117)]=_0x37fb70(0x259)):handleErrorNoStop(_0x16179b,'testAPI()',!![]),logHistory('error','Failed\x20to\x20connect\x20to\x20the\x20exchange\x20-\x20bot\x20not\x20started'),logHistory(_0x37fb70(0x117),_0x37fb70(0x23c)+loadCoinsRetryInterval/0xea60+'\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again'),logger[_0x37fb70(0x1f5)](_0x37fb70(0x24f),_0x16179b),emitLoadingProgress(),botPaused=!![],await sleep(loadCoinsRetryInterval),restartBot();}}async function testNewAPI(_0x2aa743){const _0x2bb33d=_0xed67a2;logger[_0x2bb33d(0x1f5)](_0x2bb33d(0x1b0));const _0x1403f3=ccxt[_0x2bb33d(0xf4)][_0x2aa743[_0x2bb33d(0xc7)][_0x2bb33d(0x17e)]()],_0xf9f49f=new _0x1403f3({'apiKey':_0x2aa743[_0x2bb33d(0x151)],'secret':_0x2aa743['apiSecret'],'options':{'defaultType':_0x2bb33d(0x1f7)}});if(_0x2aa743[_0x2bb33d(0x206)])_0xf9f49f[_0x2bb33d(0x1fc)]=_0x2aa743['apiPassword'];if(_0xf9f49f[_0x2bb33d(0xea)][_0x2bb33d(0xf1)])_0xf9f49f[_0x2bb33d(0x12d)](_0x2aa743[_0x2bb33d(0xf1)]);if(_0x2aa743['exchange']['toLowerCase']()==_0x2bb33d(0x157))exchange[_0x2bb33d(0x1dd)][_0x2bb33d(0x197)]=operatorId;try{await _0xf9f49f['fetchBalance'](),botPaused=![];}catch(_0x29fce4){logger[_0x2bb33d(0x1f5)]('Error\x20in\x20testNewAPI():\x20'+_0x29fce4[_0x2bb33d(0x25f)]());throw _0x29fce4;}}function cloneDeep(_0x454e43){const _0x27c563=_0xed67a2;return JSON[_0x27c563(0xc6)](JSON[_0x27c563(0xc1)](_0x454e43));}async function getPortfolio(_0x4d77e6){const _0x4f0e70=_0xed67a2;let _0x450902=[],_0x31df84=[],_0x4eb185=[],_0xf52b67;_0x4d77e6[_0x4f0e70(0x151)]=decryptRSA(secure[_0x4f0e70(0x12f)],_0x4d77e6['apiKey']),_0x4d77e6[_0x4f0e70(0xdf)]=decryptRSA(secure[_0x4f0e70(0x12f)],_0x4d77e6['apiSecret']);if(_0x4d77e6['apiPassword'])_0x4d77e6['apiPassword']=decryptRSA(secure[_0x4f0e70(0x12f)],_0x4d77e6[_0x4f0e70(0x206)]);if(_0x4d77e6[_0x4f0e70(0x151)]!=='************'||_0x4d77e6[_0x4f0e70(0xdf)]!==_0x4f0e70(0x265)||_0x4d77e6['apiPassword']&&_0x4d77e6[_0x4f0e70(0x206)]!=='************'){if(config[_0x4f0e70(0xc7)]){if(_0x4d77e6[_0x4f0e70(0x151)]==_0x4f0e70(0x265))_0x4d77e6[_0x4f0e70(0x151)]=config[_0x4f0e70(0x151)];if(_0x4d77e6['apiSecret']=='************')_0x4d77e6[_0x4f0e70(0xdf)]=config[_0x4f0e70(0xdf)];if(_0x4d77e6[_0x4f0e70(0x206)]==_0x4f0e70(0x265))_0x4d77e6[_0x4f0e70(0x206)]=config[_0x4f0e70(0x206)];}try{if(_0x4d77e6[_0x4f0e70(0xce)])await testNewAPI(_0x4d77e6);}catch(_0x15634f){if(_0x15634f[_0x4f0e70(0x25f)]()[_0x4f0e70(0xc8)]('AuthenticationError')){logHistory('error',_0x4f0e70(0x14a)),logHistory(_0x4f0e70(0x117),'Error\x20details:\x20'+_0x15634f[_0x4f0e70(0x25f)]()),proxyEmit(_0x4f0e70(0x120),![]);return;}else{if(_0x15634f['toString']()[_0x4f0e70(0xc8)](_0x4f0e70(0x266))){logHistory(_0x4f0e70(0x117),_0x4f0e70(0x1cd)),logHistory(_0x4f0e70(0x117),_0x4f0e70(0xd7)+_0x15634f['toString']()),proxyEmit(_0x4f0e70(0x120),![]);return;}else{logHistory('error','Error\x20occurred:\x20'+_0x15634f[_0x4f0e70(0x25f)]()),logger['debug']('Error\x20details:',_0x15634f),proxyEmit(_0x4f0e70(0x120),![]);return;}}}exchange?updateExchange(_0x4d77e6['apiKey'],_0x4d77e6[_0x4f0e70(0xdf)],_0x4d77e6[_0x4f0e70(0x206)]):await initExchange(_0x4d77e6['exchange'],_0x4d77e6['apiKey'],_0x4d77e6[_0x4f0e70(0xdf)],_0x4d77e6[_0x4f0e70(0x206)],_0x4d77e6['sandbox']);await loadSymbols();const _0x478134=await getCoins(0x0,![],_0x4d77e6[_0x4f0e70(0x1cb)]);_0x4eb185=cloneDeep(_0x478134[0x1]);}else{const _0xace0f7=await getCoins();_0x4eb185=cloneDeep(_0xace0f7[0x1]);}if(_0x4d77e6[_0x4f0e70(0x1cb)]=='')proxyEmit('portfolio1',!![]),proxyEmit(_0x4f0e70(0x160),_0x4eb185);else{_0x4eb185['forEach'](_0x49ce6d=>{const _0x19ca05=_0x4f0e70;if(_0x49ce6d[_0x19ca05(0x143)]!=_0x4d77e6[_0x19ca05(0x1cb)]&&allSymbols[_0x19ca05(0xc8)](_0x49ce6d['symbol']))_0x450902['push'](_0x49ce6d[_0x19ca05(0x286)]);});if(_0x450902['length']==0x0)logHistory(_0x4f0e70(0x117),_0x4f0e70(0x22e));else{try{_0x31df84=await getTickers(_0x450902);}catch(_0x9ab9f2){logHistory(_0x4f0e70(0x117),'Unknown\x20error\x20-\x20check\x20logs'),logger[_0x4f0e70(0x1f5)](_0x4f0e70(0x24f),_0x9ab9f2),proxyEmit('portfolio1',![]);return;}_0x4eb185[_0x4f0e70(0x129)](_0x36f821=>{const _0xb8223c=_0x4f0e70;_0x36f821[_0xb8223c(0x143)]!=_0x4d77e6[_0xb8223c(0x1cb)]?_0x31df84[_0x36f821['symbol']]?_0x31df84[_0x36f821[_0xb8223c(0x286)]][_0xb8223c(0x10a)]?_0xf52b67=_0x36f821['reverse']?0x1/_0x31df84[_0x36f821['symbol']][_0xb8223c(0x10a)]:_0x31df84[_0x36f821[_0xb8223c(0x286)]][_0xb8223c(0x10a)]:_0xf52b67=0x0:_0xf52b67=0x0:_0xf52b67=0x1,_0x36f821['price']=formatResult(_0xf52b67,0x8);}),await getMarketCap(_0x4eb185),proxyEmit(_0x4f0e70(0x120),!![]),proxyEmit(_0x4f0e70(0x160),_0x4eb185);}}}function truncateTradeAmount(_0x9c8fee,_0x3f6723){const _0x5a692b=_0xed67a2;let _0x4cc29f=0x0;try{_0x4cc29f=exchange[_0x5a692b(0x1e1)](_0x9c8fee,_0x3f6723);}catch(_0x5cd71a){}return _0x4cc29f;}function checkMinimums(_0x3d96d6){const _0x1fc535=_0xed67a2;let _0x2fbbd5=!![];const _0x5e521b=!_0x3d96d6[_0x1fc535(0x270)]?markets[_0x3d96d6[_0x1fc535(0x286)]][_0x1fc535(0xfb)]['amount'][_0x1fc535(0xb8)]:markets[_0x3d96d6[_0x1fc535(0x286)]][_0x1fc535(0xfb)][_0x1fc535(0x1ae)][_0x1fc535(0xb8)],_0xf285a5=!_0x3d96d6[_0x1fc535(0x270)]?markets[_0x3d96d6[_0x1fc535(0x286)]][_0x1fc535(0xfb)][_0x1fc535(0x1ae)][_0x1fc535(0xb8)]:markets[_0x3d96d6[_0x1fc535(0x286)]][_0x1fc535(0xfb)]['amount'][_0x1fc535(0xb8)],_0x325263=truncateTradeAmount(_0x3d96d6[_0x1fc535(0x286)],_0x3d96d6[_0x1fc535(0xab)]);_0x3d96d6['trade']=_0x325263;if(Math[_0x1fc535(0x280)](_0x325263)<_0x5e521b)_0x2fbbd5=![];if(Math[_0x1fc535(0x280)](_0x325263)*_0x3d96d6['last']<_0xf285a5)_0x2fbbd5=![];let _0x1f4d94='';if(_0x3d96d6[_0x1fc535(0x103)]==_0x1fc535(0x22d)){let _0x2fe422=config[_0x1fc535(0xd1)][_0x1fc535(0x1b8)](_0x286bcc=>_0x286bcc['coin']==_0x3d96d6['coin']);_0x2fe422[_0x1fc535(0xd4)]>0x0?Math[_0x1fc535(0x280)](_0x325263)>_0x3d96d6['number']-_0x2fe422[_0x1fc535(0xd4)]&&(_0x2fbbd5=![],_0x1f4d94=_0x1fc535(0x25b)+_0x2fe422[_0x1fc535(0x143)]+_0x1fc535(0xb2)):Math[_0x1fc535(0x280)](_0x325263)>_0x3d96d6['number']&&(_0x2fbbd5=![]);}if(_0x3d96d6[_0x1fc535(0x103)]==_0x1fc535(0x1c2)){let _0x447b03=config[_0x1fc535(0xd1)][_0x1fc535(0x1b8)](_0x3ba605=>_0x3ba605['coin']==config[_0x1fc535(0x1cb)]),_0x5bbcc0=currentCoins[_0x1fc535(0x1b8)](_0x3dc8fd=>_0x3dc8fd[_0x1fc535(0x143)]==config['basecoin']);_0x447b03[_0x1fc535(0xd4)]>0x0?Math[_0x1fc535(0x280)](_0x325263)*_0x3d96d6[_0x1fc535(0x10a)]>_0x5bbcc0['number']-_0x447b03[_0x1fc535(0xd4)]&&(_0x2fbbd5=![],_0x1f4d94='Insufficient\x20funds\x20to\x20place\x20order\x20for\x20'+config['basecoin']+_0x1fc535(0xb2)):Math[_0x1fc535(0x280)](_0x325263)*_0x3d96d6[_0x1fc535(0x10a)]>_0x5bbcc0[_0x1fc535(0x1e4)]&&(_0x2fbbd5=![]);}return!_0x2fbbd5&&_0x1f4d94&&!insufficientFundsWarningSent[_0x1fc535(0xc8)](_0x3d96d6[_0x1fc535(0x143)])&&(logHistory('warning',_0x1f4d94),insufficientFundsWarningSent[_0x1fc535(0x1d2)](_0x3d96d6['coin'])),_0x2fbbd5;}async function getBalances(_0x363f2d=!![]){const _0x1a0e0a=_0xed67a2;if(botPaused)return;let _0x1c9575=0x0,_0x7819ca;const _0x2b4157=config['threshold'];if(config['headless']&&config[_0x1a0e0a(0x198)]<0x0)await validate24hChanges();currentCoins[_0x1a0e0a(0x129)](_0x15d5e3=>{const _0x13b742=_0x1a0e0a;if(_0x15d5e3[_0x13b742(0x143)]!=config[_0x13b742(0x1cb)]){let _0x302a4f=gTicker[noslash(_0x15d5e3[_0x13b742(0x286)])];_0x7819ca=_0x15d5e3[_0x13b742(0x270)]?0x1/_0x302a4f:_0x302a4f;}else _0x7819ca=0x1;let _0x3c5f8a=_0x15d5e3[_0x13b742(0x1e4)]*_0x7819ca;_0x1c9575+=_0x3c5f8a,_0x15d5e3['last']=formatResult(Number(_0x7819ca),0x8),_0x15d5e3[_0x13b742(0x23a)]=_0x3c5f8a;}),currentCoins['forEach'](_0x34fe77=>{const _0x154022=_0x1a0e0a;let _0x3cf7ac=config['portfolio'][_0x154022(0x1b8)](_0x1e198c=>_0x1e198c['coin']==_0x34fe77[_0x154022(0x143)]),_0x19f703=Number(_0x3cf7ac[_0x154022(0x214)]),_0xbd6af9=_0x34fe77['value']/_0x1c9575*0x64,_0x5aa3c3=_0x19f703*_0x1c9575/0x64/_0x34fe77[_0x154022(0x10a)]-_0x34fe77[_0x154022(0x1e4)];_0x34fe77[_0x154022(0x214)]=formatResult(_0xbd6af9,0x3),_0x34fe77[_0x154022(0x187)]=formatResult(_0x19f703,0x3),_0x34fe77[_0x154022(0xab)]=formatResult(_0x5aa3c3,0x8),_0x34fe77[_0x154022(0x103)]='',_0x34fe77['valid']=![];if(_0x34fe77[_0x154022(0x143)]!=config[_0x154022(0x1cb)]){if(_0x34fe77[_0x154022(0x214)]>_0x19f703)_0x34fe77[_0x154022(0x103)]=_0x154022(0x22d),_0x34fe77[_0x154022(0x101)]=checkMinimums(_0x34fe77);else _0x34fe77[_0x154022(0x214)]<_0x19f703&&(_0x34fe77['side']=_0x154022(0x1c2),_0x34fe77[_0x154022(0x101)]=checkMinimums(_0x34fe77));}_0x34fe77[_0x154022(0x1e6)]=_0x34fe77['target']==0x0?0x270f:_0x34fe77['distribution']/_0x34fe77[_0x154022(0x187)]-0x1;if(_0x34fe77[_0x154022(0x1e9)]==_0x154022(0x168)||_0x34fe77[_0x154022(0x1e9)]=='canceled')_0x34fe77['orderstatus']=_0x154022(0xc3);}),currentCoins[_0x1a0e0a(0x106)]((_0x5ce730,_0x2984a0)=>_0x5ce730[_0x1a0e0a(0x1e6)]<_0x2984a0['delta']?0x1:_0x2984a0[_0x1a0e0a(0x1e6)]<_0x5ce730['delta']?-0x1:0x0);const _0x4a4e1b=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x4a4e1b[_0x1a0e0a(0x20a)],'usd':_0x4a4e1b[_0x1a0e0a(0x21b)],'portfolio':JSON['stringify'](currentCoins),'threshold':_0x2b4157},proxyEmit(_0x1a0e0a(0xde),{'serverversion':serverversion,'balances':lastBalances});if(_0x363f2d){if(config[_0x1a0e0a(0x17c)])headlessMode({'portfolio':currentCoins,'threshold':_0x2b4157});else lockOrders==ORDERS['UNLOCKED']&&!coolingDown&&notifyBalance({'portfolio':currentCoins,'threshold':_0x2b4157});}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x11cd45=getNormalizedPerformance();getStartingBalances(_0x11cd45),emitPerformance(_0x11cd45);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}function getPnL(){const _0x583c05=_0xed67a2;let _0x2ebde7=dbCoinResults['get'](_0x583c05(0x177))[_0x583c05(0x23a)](),_0x1cacb7=0x0;return Object[_0x583c05(0xf2)](_0x2ebde7)[_0x583c05(0x129)](([_0x493a16,_0xbf4979])=>{_0x1cacb7+=_0xbf4979['realizedPnL'];}),_0x1cacb7;}async function storePerformance(){const _0x478d21=_0xed67a2;if(!lastBalances)return;let _0x20738e=[],_0x1e6e2c;const _0x5102e7=getPnL();let _0x1a9c86=JSON[_0x478d21(0xc6)](lastBalances[_0x478d21(0xd1)]);_0x1a9c86[_0x478d21(0x106)]((_0x17b5e1,_0x3375ff)=>_0x17b5e1[_0x478d21(0x143)]>_0x3375ff[_0x478d21(0x143)]?0x1:_0x3375ff[_0x478d21(0x143)]>_0x17b5e1[_0x478d21(0x143)]?-0x1:0x0),_0x1a9c86[_0x478d21(0x129)](_0x15f74b=>{const _0xfa9406=_0x478d21;let _0x4e32f4={'coin':_0x15f74b[_0xfa9406(0x143)],'number':_0x15f74b['number'],'price':_0x15f74b[_0xfa9406(0x10a)]};_0x20738e['push'](_0x4e32f4);});const _0x4b4bd0=await getFiat(),_0x24f1f=getTimeStamp()['split']('\x20')[0x0],_0x2faebf=dbPerformance[_0x478d21(0x247)](_0x478d21(0xe0))[_0x478d21(0x1b8)]({'date':_0x24f1f})['value']();_0x1e6e2c={'date':_0x24f1f,'eur':_0x4b4bd0[_0x478d21(0x20a)],'usd':_0x4b4bd0[_0x478d21(0x21b)],'coins':_0x20738e,'pnl':_0x5102e7},_0x2faebf?_0x1e6e2c[_0x478d21(0x1e5)]!=config[_0x478d21(0x108)]&&dbPerformance[_0x478d21(0x247)](_0x478d21(0xe0))[_0x478d21(0x1b8)]({'date':_0x24f1f})[_0x478d21(0x271)](_0x1e6e2c)[_0x478d21(0x1e2)]():dbPerformance[_0x478d21(0x247)]('data')['push'](_0x1e6e2c)[_0x478d21(0x1e2)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x4e19a6=_0xed67a2;let _0x379f27=[];if(dbPerformance[_0x4e19a6(0xea)](_0x4e19a6(0xe0))[_0x4e19a6(0x23a)]()){let _0x595589=dbPerformance['get'](_0x4e19a6(0xe0))[_0x4e19a6(0x13f)]()[_0x4e19a6(0x245)](_0x7ca515=>{const _0x58e199=_0x4e19a6;if(_0x7ca515['coins'][_0x58e199(0x112)]==0x0)return![];else return!![];})['sortBy']('date')[_0x4e19a6(0x23a)](),_0x3cf5e5=[...config[_0x4e19a6(0xbd)]];_0x3cf5e5[_0x4e19a6(0x106)]((_0x5edb47,_0x2be1fe)=>_0x5edb47[_0x4e19a6(0x1e5)]>_0x2be1fe['date']?-0x1:_0x2be1fe['date']>_0x5edb47['date']?0x1:0x0);let _0x244bad=0x1,_0x171c56=[],_0x2554f0=0x0;_0x595589['slice']()[_0x4e19a6(0x270)]()[_0x4e19a6(0x129)]((_0x24142d,_0x162a7d)=>{const _0x2e0f9a=_0x4e19a6;if(_0x3cf5e5[_0x2554f0]){if(_0x595589[_0x595589[_0x2e0f9a(0x112)]-_0x162a7d]&&_0x3cf5e5[_0x2554f0][_0x2e0f9a(0x1e5)]==_0x595589[_0x595589['length']-_0x162a7d][_0x2e0f9a(0x1e5)]){if(_0x162a7d<_0x595589['length']){let _0x4e4623=0x0,_0x3ad154=0x0;_0x595589[_0x595589[_0x2e0f9a(0x112)]-_0x162a7d][_0x2e0f9a(0x177)][_0x2e0f9a(0x129)](_0xab452f=>{const _0x5e338d=_0x2e0f9a;_0x3ad154+=_0xab452f[_0x5e338d(0x1e4)]*_0xab452f[_0x5e338d(0x25a)];}),_0x3cf5e5[_0x2554f0]['changes'][_0x2e0f9a(0x129)](_0x5b8b42=>{const _0x59730c=_0x2e0f9a;_0x4e4623+=_0x5b8b42[_0x59730c(0x1e4)]*_0x5b8b42[_0x59730c(0x25a)];}),_0x244bad*=_0x4e4623/(_0x3ad154-_0x4e4623)+0x1;}_0x2554f0++;}}let _0x2f47b2=0x0;_0x24142d['coins']['forEach'](_0x5b0b49=>{const _0x1efb4a=_0x2e0f9a;_0x2f47b2+=_0x5b0b49[_0x1efb4a(0x1e4)]*_0x5b0b49[_0x1efb4a(0x25a)];}),_0x171c56[_0x595589[_0x2e0f9a(0x112)]-_0x162a7d-0x1]=_0x2f47b2*(_0x244bad-0x1);});let _0x338e83=[];_0x3cf5e5=[...config['liquidity']]||[];let _0x4a3ad0=0x0;_0x2554f0=0x0,_0x595589[_0x4e19a6(0x129)]((_0x2f7ce0,_0x35c200)=>{const _0x45557b=_0x4e19a6;if(_0x3cf5e5[_0x2554f0]){const _0x579ae1=fns[_0x45557b(0xc6)](_0x3cf5e5[_0x2554f0][_0x45557b(0x1e5)],'yyyy/MM/dd',new Date()),_0x3e6abc=fns[_0x45557b(0xc6)](_0x2f7ce0[_0x45557b(0x1e5)],_0x45557b(0x201),new Date());if(fns['isEqual'](_0x579ae1,_0x3e6abc)){let _0x5eafd0=0x0;_0x3cf5e5[_0x2554f0][_0x45557b(0xb1)]['forEach'](_0x54a11e=>{const _0x34733c=_0x45557b;!_0x338e83[_0x54a11e[_0x34733c(0x143)]]?_0x338e83[_0x54a11e[_0x34733c(0x143)]]=_0x54a11e['number']:(_0x5eafd0=_0x338e83[_0x54a11e[_0x34733c(0x143)]],_0x338e83[_0x54a11e[_0x34733c(0x143)]]+=_0x54a11e[_0x34733c(0x1e4)]);const _0x2ae165=_0x2f7ce0[_0x34733c(0x177)]['find'](_0xc25586=>_0xc25586[_0x34733c(0x143)]==_0x54a11e['coin']);(!_0x2ae165||_0x2ae165[_0x34733c(0x1e4)]==0x0)&&(_0x4a3ad0+=(-_0x54a11e[_0x34733c(0x1e4)]-_0x5eafd0)*_0x54a11e[_0x34733c(0x25a)]);}),_0x2554f0++;}}_0x2f7ce0['coins'][_0x45557b(0x129)]((_0x1b0d0c,_0x287fd3)=>{const _0x4126a4=_0x45557b;_0x338e83[_0x1b0d0c[_0x4126a4(0x143)]]&&(_0x1b0d0c[_0x4126a4(0xf6)]=_0x338e83[_0x1b0d0c[_0x4126a4(0x143)]]);}),_0x379f27['push']({'date':_0x2f7ce0[_0x45557b(0x1e5)],'eur':_0x2f7ce0[_0x45557b(0x20a)],'usd':_0x2f7ce0[_0x45557b(0x21b)],'offset':_0x171c56[_0x35c200],'netoffset':_0x4a3ad0,'coins':_0x2f7ce0[_0x45557b(0x177)],'pnl':_0x2f7ce0[_0x45557b(0x26f)]});});}return _0x379f27;}function emitPerformance(_0x4ef04f){const _0xc1efab=_0xed67a2;_0x4ef04f[_0xc1efab(0x112)]!==0x0?(proxyEmit(_0xc1efab(0x119),_0x4ef04f),lastPerformanceEmitted=getDate()):proxyEmit('performance',[]);}function getPerf(_0x612fca,_0x2371e7){const _0x443686=_0xed67a2;let _0x4b7be3=0x0,_0x4cb655=0x0,_0x47d3c2=0x0;_0x612fca[_0x443686(0x177)]['forEach'](_0xc3da08=>{const _0x175818=_0x443686;_0x4b7be3+=_0xc3da08['number']*_0xc3da08[_0x175818(0x25a)];});_0x2371e7&&(_0x4b7be3+=_0x612fca[_0x443686(0xd4)]);if(config[_0x443686(0x1cb)]===_0x443686(0xda)||config[_0x443686(0x1cb)]===_0x443686(0x204)||config[_0x443686(0x1cb)]===_0x443686(0x17f))_0x4cb655=_0x4b7be3*_0x612fca['eur'],_0x47d3c2=_0x4b7be3*_0x612fca['usd'];else{if(usdBasecoins[_0x443686(0xc8)](config['basecoin']))_0x4cb655=_0x4b7be3*_0x612fca['eur']/_0x612fca[_0x443686(0x21b)],_0x47d3c2=_0x4b7be3;else config[_0x443686(0x1cb)]===_0x443686(0x222)&&(_0x4cb655=_0x4b7be3,_0x47d3c2=_0x4b7be3*_0x612fca[_0x443686(0x21b)]/_0x612fca[_0x443686(0x20a)]);}return[_0x4b7be3,_0x4cb655,_0x47d3c2];}function CurrencyFactor(_0x190e29,_0x376517,_0x29a367){const _0x582fef=_0xed67a2;let _0x45f8fb;if(_0x376517==='BTC'||_0x376517==='ETH'||_0x376517==='PAXG')_0x45f8fb=_0x29a367===_0x582fef(0x222)?_0x190e29[_0x582fef(0x20a)]:_0x190e29['usd'];else{if(usdBasecoins[_0x582fef(0xc8)](_0x376517))_0x45f8fb=_0x29a367===_0x582fef(0x222)?_0x190e29[_0x582fef(0x20a)]/_0x190e29[_0x582fef(0x21b)]:0x1;else _0x376517==='EUR'&&(_0x45f8fb=_0x29a367===_0x582fef(0x222)?0x1:_0x190e29[_0x582fef(0x21b)]/_0x190e29[_0x582fef(0x20a)]);}return _0x45f8fb;}function getKPIs(_0x52827f,_0x11f171=_0xed67a2(0x222)){const _0x87516e=_0xed67a2,_0x5c8fc7=config['basecoin'],_0x26e481=lastBalances,_0x2ceb63=currentCoins,_0x3dca46=getNormalizedPerformance(),_0x598985=CurrencyFactor(_0x26e481,config[_0x87516e(0x1cb)],_0x11f171);let _0xbd2030=0x0;_0x2ceb63[_0x87516e(0x129)](_0x53c65d=>{const _0x425d6f=_0x87516e;_0xbd2030+=_0x53c65d[_0x425d6f(0x1e4)]*_0x53c65d[_0x425d6f(0x10a)];});_0x52827f[_0x87516e(0xc8)](_0x87516e(0x1b1))&&(_0xbd2030*=_0x598985);let _0x1b7951;if(_0xbd2030!==0x0){if(_0x52827f===_0x87516e(0x1cb)||_0x52827f===_0x87516e(0x1b1)){if(_0x52827f==='basecoin')_0x1b7951=(_0xbd2030/startingBalances[_0x87516e(0x1cb)]-0x1)*0x64;else{if(_0x11f171===_0x87516e(0x222))_0x1b7951=(_0xbd2030/startingBalances[_0x87516e(0x20a)]-0x1)*0x64;else _0x1b7951=(_0xbd2030/startingBalances[_0x87516e(0x21b)]-0x1)*0x64;}}if(_0x52827f[_0x87516e(0xc8)]('net')){let _0x45dd3d=0x0;if(startingBalances[_0x87516e(0x177)])_0x2ceb63['forEach'](_0x1aa113=>{const _0x3d297f=_0x87516e;let _0x14f7d6=startingBalances[_0x3d297f(0x177)][_0x3d297f(0x1b8)](_0x3c8fb=>_0x3c8fb[_0x3d297f(0x143)]===_0x1aa113[_0x3d297f(0x143)]);if(_0x14f7d6&&_0x14f7d6['coin']&&_0x1aa113['number']!==0x0)_0x45dd3d+=_0x14f7d6[_0x3d297f(0x1e4)]*_0x1aa113[_0x3d297f(0x10a)];});let _0x2a493d=0x0;if(_0x3dca46['length']!==0x0){let _0xd2a7ca=_0x3dca46[_0x3dca46[_0x87516e(0x112)]-0x1];_0x2a493d=_0xd2a7ca[_0x87516e(0x156)];}_0x45dd3d-=_0x2a493d;let _0x2f5d42;_0x52827f===_0x87516e(0x196)&&(_0x2f5d42=startingBalances[_0x87516e(0x1cb)]),_0x52827f===_0x87516e(0x105)&&(_0x2f5d42=_0x11f171===_0x87516e(0x222)?startingBalances[_0x87516e(0x20a)]:startingBalances[_0x87516e(0x21b)],_0x45dd3d*=_0x598985),_0x1b7951=(_0xbd2030-_0x45dd3d)/_0x2f5d42*0x64,_0xbd2030=_0xbd2030-_0x45dd3d;}if(_0x52827f['includes'](_0x87516e(0x26f))){if(_0x3dca46[_0x87516e(0x112)]!==0x0&&_0x2ceb63[_0x87516e(0x112)]!==0x0){let _0x315088,_0x50ccdf=_0x3dca46[_0x3dca46[_0x87516e(0x112)]-0x1][_0x87516e(0x26f)];_0x52827f['includes']('fiat')?(_0x315088=_0x11f171===_0x87516e(0x222)?startingBalances['eur']:startingBalances[_0x87516e(0x21b)],_0x50ccdf*=CurrencyFactor(_0x26e481,_0x5c8fc7,_0x11f171)):_0x315088=startingBalances[_0x87516e(0x1cb)],_0x1b7951=_0x50ccdf/_0x315088*0x64,_0xbd2030=_0x50ccdf;}}if(_0x1b7951){if(_0x1b7951<0x64)_0x1b7951=_0x1b7951[_0x87516e(0x18d)](0x2);else{if(_0x1b7951<0x3e8)_0x1b7951=_0x1b7951[_0x87516e(0x18d)](0x1);else _0x1b7951=_0x1b7951[_0x87516e(0x18d)](0x0);}}else _0x1b7951=Number('0')[_0x87516e(0x18d)](0x2);if(_0xbd2030){if(Math['abs'](_0xbd2030)<0.000001)_0xbd2030=_0xbd2030[_0x87516e(0x18d)](0x2);else{if(Math[_0x87516e(0x280)](_0xbd2030)<0.1)_0xbd2030=_0xbd2030[_0x87516e(0x18d)](0x6);else{if(Math['abs'](_0xbd2030)<0x1)_0xbd2030=_0xbd2030[_0x87516e(0x18d)](0x5);else{if(Math[_0x87516e(0x280)](_0xbd2030)<0xa)_0xbd2030=_0xbd2030[_0x87516e(0x18d)](0x4);else{if(Math[_0x87516e(0x280)](_0xbd2030)<0x64)_0xbd2030=_0xbd2030['toFixed'](0x3);else{if(Math['abs'](_0xbd2030)<0x3e8)_0xbd2030=_0xbd2030[_0x87516e(0x18d)](0x2);else _0xbd2030=_0xbd2030[_0x87516e(0x18d)](0x2);}}}}}}else _0xbd2030=Number('0')[_0x87516e(0x18d)](0x2);}else _0x1b7951=Number('0')[_0x87516e(0x18d)](0x2);if(_0x1b7951>=0x0)_0x1b7951='+'+_0x1b7951;return{'value':_0xbd2030,'change':_0x1b7951};}async function getStartingBalances(_0x203a36,_0x5c83f0=!![]){const _0x3f657a=_0xed67a2;if(_0x203a36[_0x3f657a(0x112)]!==0x0){const [_0x25b4f1,_0x3597b6,_0x3035d3]=getPerf(_0x203a36[0x0],!![]);let _0x5c7705=[];config[_0x3f657a(0xd1)][_0x3f657a(0x129)](_0x278f47=>{const _0x560e31=_0x3f657a;let _0x5c8258=0x0,_0x45fe69;config[_0x560e31(0xbd)][_0x560e31(0x129)](_0x2c96e7=>{const _0x3420aa=_0x560e31;let _0x3dfcbe=_0x2c96e7[_0x3420aa(0xb1)][_0x3420aa(0x1b8)](_0xe7876b=>_0xe7876b['coin']==_0x278f47['coin']);if(_0x3dfcbe){_0x5c8258+=_0x3dfcbe[_0x3420aa(0x1e4)];if(!_0x45fe69)_0x45fe69=_0x3dfcbe[_0x3420aa(0x25a)];}}),_0x5c7705[_0x560e31(0x1d2)]({'coin':_0x278f47[_0x560e31(0x143)],'number':_0x5c8258,'initialprice':_0x45fe69});});const _0x399ad2={'basecoin':_0x25b4f1,'eur':_0x3597b6,'usd':_0x3035d3,'coins':_0x5c7705};if(_0x5c83f0)proxyEmit(_0x3f657a(0x1d6),_0x399ad2);startingBalances=_0x399ad2;}}function headlessMode(_0x274f7c){const _0x48d370=_0xed67a2;let _0x2f9796=_0x274f7c[_0x48d370(0xd1)],_0x3b69a9=_0x274f7c[_0x48d370(0x13b)],_0x27829b=[];for(let _0x40251d of _0x2f9796){if(_0x40251d['coin']!=config[_0x48d370(0x1cb)]){if(_0x40251d[_0x48d370(0x1e6)]>=_0x3b69a9/0x64){if(_0x40251d[_0x48d370(0x101)])_0x27829b[_0x48d370(0x1d2)](_0x40251d);}else{if(_0x40251d[_0x48d370(0x1e6)]<=-_0x3b69a9/0x64){if(_0x40251d[_0x48d370(0x101)])_0x27829b['push'](_0x40251d);}}}}_0x27829b['length']>0x0&&placeOrder(_0x27829b);}function notifyBalance(_0x13b93d){const _0x38dfcb=_0xed67a2;let _0xb7bde9=_0x13b93d['portfolio'],_0x1d8d7b=_0x13b93d[_0x38dfcb(0x13b)],_0x3ef06b=[];for(let _0xe72ab8 of _0xb7bde9){if(_0xe72ab8[_0x38dfcb(0x143)]!=config['basecoin']){if(_0xe72ab8['delta']>=_0x1d8d7b/0x64){if(_0xe72ab8[_0x38dfcb(0x101)])_0x3ef06b[_0x38dfcb(0x1d2)](_0xe72ab8);}else{if(_0xe72ab8[_0x38dfcb(0x1e6)]<=-_0x1d8d7b/0x64){if(_0xe72ab8[_0x38dfcb(0x101)])_0x3ef06b['push'](_0xe72ab8);}}}}if(_0x3ef06b[_0x38dfcb(0x112)]>0x0){let _0x166fe1=_0x3ef06b[_0x38dfcb(0xe4)](_0x378b01=>_0x378b01[_0x38dfcb(0x143)]);_0x166fe1[_0x38dfcb(0x106)]();let _0x51aa64=_0x166fe1[_0x38dfcb(0x20b)](',\x20');if(!lastCoinsToBalance)logHistory('warning',_0x38dfcb(0x1d4));lastCoinsToBalance=_0x51aa64;}}function symbolToCoin(_0x30fd4e){const _0x5cda14=_0xed67a2;let _0x44115b;if(_0x30fd4e[_0x5cda14(0xc8)]('/'+config[_0x5cda14(0x1cb)]))_0x44115b=_0x30fd4e[_0x5cda14(0x1ea)]('/'+config[_0x5cda14(0x1cb)],'');if(_0x30fd4e[_0x5cda14(0xc8)](config[_0x5cda14(0x1cb)]+'/'))_0x44115b=_0x30fd4e['replace'](config[_0x5cda14(0x1cb)]+'/','');return _0x44115b;}function setLockOrders(_0x14d7a3){const _0x15ba61=_0xed67a2;lockOrders=_0x14d7a3,logger[_0x15ba61(0x1f5)](_0x15ba61(0x216)+Object[_0x15ba61(0xee)](ORDERS)[lockOrders]);}async function unlockOrders(_0x395024=![]){const _0x26eb28=_0xed67a2;if(allOrdersPlaced&&lockOrders==ORDERS[_0x26eb28(0x227)]){setLockOrders(ORDERS['UNLOCKING']);if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);if(_0x395024){const _0x12afa2=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x12afa2,setBlockTransactionDetection(![]);}validateOrdersState=_0x26eb28(0xf6),persistOpenOrders([]),setLockOrders(ORDERS['UNLOCKED']);}}async function validateOrders(_0x1b8482){const _0x4ba03c=_0xed67a2;if(_0x1b8482)validateOrdersState=_0x1b8482;logger[_0x4ba03c(0x1f5)](_0x4ba03c(0x16c)+validateOrdersState+_0x4ba03c(0xb7)+Object[_0x4ba03c(0xee)](ORDERS)[lockOrders]);let _0x513b56=[],_0x220968=config[_0x4ba03c(0x183)]==_0x4ba03c(0xeb)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x4ba03c(0x178)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x4ba03c(0x227)])return;logger[_0x4ba03c(0x1f5)](_0x4ba03c(0x17b)+validateOrdersState);for(let _0x32221c=lastOrders['length']-0x1;_0x32221c>=0x0;_0x32221c--){let _0x147e5d=lastOrders[_0x32221c],_0x14261f=![];_0x147e5d[_0x4ba03c(0x168)]>0x0&&(_0x14261f=!![]),_0x513b56['push'](_0x14261f),_0x14261f&&config['ordertype']!=_0x4ba03c(0xeb)&&logHistory(_0x4ba03c(0xb4),_0x4ba03c(0x10d)+_0x147e5d['symbol']+'\x20'+_0x147e5d[_0x4ba03c(0x103)]+'\x20#'+formatResult(_0x147e5d[_0x4ba03c(0x168)],0x8)+'\x20@'+formatResult(_0x147e5d['price'],0x8)),_0x14261f&&lastOrders[_0x4ba03c(0x281)](_0x32221c,0x1);}persistOpenOrders(lastOrders);const _0x5c8175=coolingDown?_0x4ba03c(0x16f):_0x4ba03c(0xc9);if(validateOrdersState==_0x4ba03c(0xf6)){validateOrdersState=_0x4ba03c(0x279);if(_0x513b56['includes'](![])){}else await unlockOrders();}else{if(validateOrdersState==_0x4ba03c(0x279)){if(_0x513b56['includes'](![])){}else await unlockOrders();}else{if(validateOrdersState==_0x4ba03c(0x23d)){let _0x36c3d1=!![];if(_0x513b56['includes'](![])){if(config[_0x4ba03c(0x183)]=='market')logHistory('success',_0x4ba03c(0x125)+Math[_0x4ba03c(0x199)](_0x220968*validateOrderInterval/0xea60)+_0x4ba03c(0x254)+_0x5c8175),await unlockOrders(!![]);else{_0x36c3d1=await cancelOrders();if(_0x36c3d1)logHistory('success','Unfilled\x20order(s)\x20canceled\x20after\x20'+Math[_0x4ba03c(0x199)](_0x220968*validateOrderInterval/0xea60)+_0x4ba03c(0x254)+_0x5c8175),await unlockOrders(!![]);else{validateOrdersState=_0x4ba03c(0x279),logHistory('error',_0x4ba03c(0x20e)+Math[_0x4ba03c(0x199)](_0x220968*validateOrderInterval/0xea60)+_0x4ba03c(0x254)+_0x5c8175),logHistory(_0x4ba03c(0x117),_0x4ba03c(0x15a));const _0x103986=config[_0x4ba03c(0x183)]==_0x4ba03c(0xeb)?validateOrderTimeout*0x3c*0x3e8:config[_0x4ba03c(0x178)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x5af9b9=_0x4ba03c;validateOrders(_0x5af9b9(0x23d));},_0x103986);}}}else await unlockOrders(!![]);}else{if(validateOrdersState==_0x4ba03c(0x17a)){if(config['ordertype']!=_0x4ba03c(0xeb))logHistory(_0x4ba03c(0x146),'No\x20more\x20open\x20orders\x20-\x20'+_0x5c8175);await unlockOrders(!![]);}}}}}async function cancelOrders(){const _0x5d8594=_0xed67a2;let _0x18ef22=!![],_0xeac738;for(const _0x40f8ce of lastOrders){let _0x4cb730=![],_0x3cc631=0x0;while(!_0x4cb730&&_0x3cc631<maxRetries){try{const _0x3860b9=await exchange[_0x5d8594(0x1e7)](_0x40f8ce[_0x5d8594(0xf8)],_0x40f8ce[_0x5d8594(0x286)]);_0x4cb730=!![];}catch(_0x43631d){_0x43631d[_0x5d8594(0x25f)]()['includes']('OrderNotFound')||_0x43631d[_0x5d8594(0x25f)]()['includes']('InvalidOrder')?_0x4cb730=!![]:(_0xeac738=_0x43631d,_0x4cb730=![]);}!_0x4cb730&&(_0x3cc631++,await sleep(retryInterval));}_0x18ef22=_0x18ef22&&_0x4cb730;}return!_0x18ef22&&await handleError(_0xeac738,_0x5d8594(0x208)),_0x18ef22;}async function initCoinResults(_0x33f9cc){const _0x342cb9=_0xed67a2;_0x33f9cc?logger[_0x342cb9(0x1f5)](_0x342cb9(0x205)+_0x33f9cc):logger[_0x342cb9(0x1f5)](_0x342cb9(0x1b2)),config[_0x342cb9(0xd1)][_0x342cb9(0x129)](_0x3827e5=>{const _0x5f0f65=_0x342cb9;if(!_0x3827e5[_0x5f0f65(0x226)]&&_0x3827e5[_0x5f0f65(0x143)]!=config['basecoin']){const _0x2e504d=currentCoins['find'](_0x526eb9=>_0x526eb9['coin']==_0x3827e5[_0x5f0f65(0x143)]),_0x53fb48=gTicker[noslash(_0x3827e5['symbol'])];let _0xadb66f=_0x2e504d?_0x2e504d['number']:null,_0x3009e9=_0x3827e5[_0x5f0f65(0x270)]?0x1/_0x53fb48:_0x53fb48,_0x3a3885;config['liquidity'][_0x5f0f65(0x129)](_0xd664fc=>{const _0x356fdf=_0x5f0f65;!_0x3a3885&&(_0x3a3885=_0xd664fc[_0x356fdf(0xb1)]['find'](_0x434418=>_0x434418['coin']==_0x3827e5['coin']),_0x3a3885&&(_0xadb66f=_0x3a3885[_0x356fdf(0x1e4)],_0x3009e9=_0x3a3885[_0x356fdf(0x25a)]));});let _0x178f43=dbCoinResults['get'](_0x5f0f65(0x177))[_0x5f0f65(0x1b8)]({'coin':_0x3827e5[_0x5f0f65(0x143)]})[_0x5f0f65(0x23a)]();if(!_0x178f43){const _0x1d6245={'coin':_0x3827e5[_0x5f0f65(0x143)],'number':_0xadb66f,'breakeven':_0x3009e9,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x5f0f65(0x247)](_0x5f0f65(0x177))[_0x5f0f65(0x1d2)](_0x1d6245)[_0x5f0f65(0x1e2)]();}else{if(_0x33f9cc&&_0x3827e5[_0x5f0f65(0x143)]==_0x33f9cc){const _0x4b7e9d={'coin':_0x3827e5[_0x5f0f65(0x143)],'number':_0xadb66f,'breakeven':_0x3009e9,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x5f0f65(0x247)](_0x5f0f65(0x177))[_0x5f0f65(0x1b8)]({'coin':_0x3827e5[_0x5f0f65(0x143)]})[_0x5f0f65(0x271)](_0x4b7e9d)[_0x5f0f65(0x1e2)]();}}}});}async function placeOrder(_0x3eaa41){const _0x851701=_0xed67a2,_0x29b538=config[_0x851701(0x183)]==_0x851701(0xeb)?_0x851701(0xeb):_0x851701(0x14f);if(lockOrders==ORDERS[_0x851701(0x26a)]&&!coolingDown){setLockOrders(ORDERS['LOCKED']);while(transactionDetectionOngoing){await sleep(0x64);}logger['debug'](_0x851701(0x18a)+_0x3eaa41['map'](_0x3a56a0=>_0x3a56a0['coin'])['join'](',\x20')),lastCoinsToBalance='',allOrdersPlaced=![],validateOrdersState='initial';let _0x9830e2=![];lastOrders=[];const _0x54c168=config[_0x851701(0x13b)];for(const _0x4a07bf of _0x3eaa41){let _0x50730f,_0x5ecccb,_0x4465d3,_0x56223b,_0x4797f9,_0x212586=_0x4a07bf['symbol'];logger[_0x851701(0x1f5)](_0x851701(0x126)+_0x4a07bf[_0x851701(0x143)]+'\x20'+_0x4a07bf['number']+'\x20'+_0x4a07bf[_0x851701(0x10a)]+'\x20'+_0x4a07bf[_0x851701(0x214)]+'%\x20'+_0x4a07bf[_0x851701(0x187)]+'%\x20'+(0x64*_0x4a07bf['delta'])[_0x851701(0x18d)](0x2)+_0x851701(0xcf)+_0x54c168['toFixed'](0x2)+'%)'),insufficientFundsWarningSent=insufficientFundsWarningSent[_0x851701(0x245)](_0x2bf2ce=>_0x2bf2ce!==_0x4a07bf[_0x851701(0x143)]);const _0x2e0d80=currentCoins['find'](_0x431a3a=>_0x431a3a['coin']==_0x4a07bf[_0x851701(0x143)]);_0x2e0d80&&(_0x2e0d80[_0x851701(0x27f)]=_0x4a07bf[_0x851701(0x1e4)]);try{const _0x5b468d=await exchange[_0x851701(0xc2)](_0x212586);_0x50730f=_0x4a07bf[_0x851701(0x270)]?0x1/_0x4a07bf[_0x851701(0x10a)]:_0x4a07bf[_0x851701(0x10a)],_0x5ecccb=_0x5b468d[_0x851701(0xbb)],_0x4465d3=_0x5b468d[_0x851701(0x15f)];_0x4a07bf[_0x851701(0x270)]?(_0x56223b=_0x4a07bf[_0x851701(0x103)]=='buy'?_0x851701(0x22d):'buy',_0x4797f9=Math[_0x851701(0x280)](_0x4a07bf[_0x851701(0xab)])/_0x50730f):(_0x56223b=_0x4a07bf[_0x851701(0x103)],_0x4797f9=Math[_0x851701(0x280)](_0x4a07bf[_0x851701(0xab)]));_0x29b538=='limit'&&(config['ordertype']=='limit-high'&&(_0x50730f=_0x56223b==_0x851701(0x1c2)?_0x5ecccb:_0x4465d3),config[_0x851701(0x183)]==_0x851701(0x25e)&&(_0x50730f=_0x56223b==_0x851701(0x1c2)?_0x4465d3:_0x5ecccb));_0x4797f9=formatResult(_0x4797f9,0x8),_0x50730f=formatResult(_0x50730f,0x8);const _0x4da1f6=_0x56223b=='sell'?config['emojisell']?String[_0x851701(0x19b)]('0x'+config[_0x851701(0xf7)])+'\x20':'':config[_0x851701(0x16b)]?String['fromCodePoint']('0x'+config[_0x851701(0x16b)])+'\x20':'',_0x3553c8=_0x29b538==_0x851701(0xeb)?_0x851701(0x159):config[_0x851701(0x183)]==_0x851701(0x175)?_0x851701(0x188):'Limit\x20(low-margin)',_0x410025=(Math[_0x851701(0x1e0)](Math[_0x851701(0xac)]()*0x35a4e900)+0x5f5e100)[_0x851701(0x25f)]();lastOrders[_0x851701(0x1d2)]({'customId':_0x410025,'symbol':_0x212586,'coin':_0x4a07bf[_0x851701(0x143)],'amount':_0x4797f9,'price':_0x50730f,'side':_0x56223b,'reverse':_0x4a07bf['reverse'],'filled':0x0});let _0x425197;_0x29b538=='market'?_0x56223b=='buy'&&[_0x851701(0x27b),'Bitget',_0x851701(0x16e),_0x851701(0x163),_0x851701(0xd5),_0x851701(0x264)][_0x851701(0xc8)](config[_0x851701(0xc7)])?_0x425197=await exchange[_0x851701(0x200)](_0x212586,_0x29b538,_0x56223b,_0x4797f9,_0x50730f):_0x425197=await exchange[_0x851701(0x200)](_0x212586,_0x29b538,_0x56223b,_0x4797f9,undefined):_0x425197=await exchange[_0x851701(0x200)](_0x212586,_0x29b538,_0x56223b,_0x4797f9,_0x50730f);const _0x1fa095=lastOrders[_0x851701(0x112)]-0x1;if(_0x1fa095>=0x0&&lastOrders[_0x1fa095][_0x851701(0x140)]==_0x410025){lastOrders[_0x1fa095][_0x851701(0xf8)]=_0x425197['id'];if(_0x425197[_0x851701(0x1fa)])lastOrders[_0x1fa095][_0x851701(0x1fa)]=_0x425197['amount'];if(_0x425197[_0x851701(0x25a)])lastOrders[_0x1fa095][_0x851701(0x25a)]=_0x425197[_0x851701(0x25a)];lastOrders[_0x1fa095][_0x851701(0x256)]=_0x425197[_0x851701(0x256)];}if(_0x425197[_0x851701(0x1fa)])_0x4797f9=_0x425197[_0x851701(0x1fa)];if(_0x425197[_0x851701(0x25a)])_0x50730f=_0x425197[_0x851701(0x25a)];if(_0x29b538==_0x851701(0xeb))logHistory(_0x851701(0xb4),''+_0x4da1f6+_0x3553c8+_0x851701(0x169)+_0x212586+'\x20'+_0x56223b+'\x20#'+formatResult(_0x4797f9,0x8)+'\x20@'+formatResult(_0x50730f,0x8));else logHistory(_0x851701(0xb4),''+_0x4da1f6+_0x3553c8+'\x20order:\x20'+_0x212586+'\x20'+_0x56223b+'\x20#'+formatResult(_0x4797f9,0x8)+'\x20@'+formatResult(_0x50730f,0x8));logger[_0x851701(0x1f5)](_0x851701(0xbe)+_0x425197['id']+_0x851701(0x1c4)+_0x410025);if(config[_0x851701(0x111)]!=0x0){let _0x3ed55=null;if(cooldownTracker[_0x851701(0x112)]==config['cooldown']-0x1)_0x3ed55=cooldownTracker[_0x851701(0x24b)]();const _0x33b423=getTimeStamp();cooldownTracker['push'](_0x33b423);if(_0x3ed55){const _0x2b3985=fns['differenceInSeconds'](new Date(_0x33b423),new Date(_0x3ed55));if(_0x2b3985<cooldownInterval){logHistory(_0x851701(0x117),'Executed\x20'+config[_0x851701(0x111)]+_0x851701(0x212)+cooldownInterval/0x3c+_0x851701(0x162)+cooldownPeriod/(0xe10*0x3e8)+'\x20hour'),coolingDown=!![];break;}}}}catch(_0x1e3f0f){if(_0x1e3f0f[_0x851701(0x25f)]()[_0x851701(0xc8)](_0x851701(0x1f2)))lastOrders=lastOrders[_0x851701(0x245)](_0x46265e=>_0x46265e['symbol']!=_0x212586),logHistory(_0x851701(0x117),_0x851701(0x110)+_0x212586),_0x9830e2=!![];else{if(_0x1e3f0f[_0x851701(0x25f)]()[_0x851701(0xc8)]('Invalid\x20quantity'))lastOrders=lastOrders[_0x851701(0x245)](_0x19b76a=>_0x19b76a['symbol']!=_0x212586),logHistory(_0x851701(0x117),_0x851701(0xd3)+_0x212586),_0x9830e2=!![];else{if(_0x1e3f0f[_0x851701(0x25f)]()[_0x851701(0xc8)](_0x851701(0x186)))lastOrders=lastOrders[_0x851701(0x245)](_0xccddeb=>_0xccddeb[_0x851701(0x286)]!=_0x212586),logHistory(_0x851701(0x117),_0x851701(0x22f)+_0x212586),logger['debug'](_0x1e3f0f),_0x9830e2=!![];else _0x1e3f0f[_0x851701(0x25f)]()['includes'](_0x851701(0x1ba))?(lastOrders=lastOrders[_0x851701(0x245)](_0x19e323=>_0x19e323[_0x851701(0x286)]!=_0x212586),logHistory(_0x851701(0x117),_0x851701(0x110)+_0x212586),_0x9830e2=!![]):(lastOrders=lastOrders[_0x851701(0x245)](_0x2069ff=>_0x2069ff[_0x851701(0x286)]!=_0x212586),await handleError(_0x1e3f0f,_0x851701(0x1c9),_0x212586));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders['length']>0x0){const _0x567fc9=config[_0x851701(0x183)]==_0x851701(0xeb)?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0xd6b4c5=_0x851701;validateOrders(_0xd6b4c5(0x23d));},_0x567fc9);}else unlockOrders();_0x9830e2&&config[_0x851701(0x17c)]&&(logHistory('error',_0x851701(0x26c)+pauseBotMsg),await pauseBot(pauseBotInterval)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x851701(0x146),'Cooldown\x20ended\x20-\x20balancing\x20resumed'));}else{if(coolingDown)!config[_0x851701(0x17c)]&&logHistory('error',_0x851701(0xae));else lockOrders!=ORDERS[_0x851701(0x26a)]&&(!config['headless']&&(config[_0x851701(0x183)]=='market'?logHistory(_0x851701(0x117),_0x851701(0x21a)):logHistory(_0x851701(0x117),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled')));}}function persistOpenOrders(_0x5c4739){const _0xf4c223=_0xed67a2,_0x2a1281={...config,'openOrders':_0x5c4739};let _0x1379cb=dbConfig[_0xf4c223(0x247)](_0xf4c223(0x1ed))[_0xf4c223(0x1b8)]({'botID':botID})[_0xf4c223(0x23a)]();_0x1379cb&&dbConfig[_0xf4c223(0x247)](_0xf4c223(0x1ed))[_0xf4c223(0x1b8)]({'botID':botID})[_0xf4c223(0x271)](_0x2a1281)[_0xf4c223(0x1e2)]();}function restoreOrders(){const _0x4aa2e7=_0xed67a2;let _0x41e70d;config[_0x4aa2e7(0x233)]&&allOpenOrders[_0x4aa2e7(0x129)](_0x305aca=>{const _0xf219c4=_0x4aa2e7,_0x4b2dc0=config['openOrders'][_0xf219c4(0x1b8)](_0x438e87=>_0x438e87[_0xf219c4(0xf8)]==_0x305aca['id']);_0x4b2dc0&&(lastOrders[_0xf219c4(0x1d2)](_0x4b2dc0),_0x41e70d=_0x305aca[_0xf219c4(0x16d)]);});if(lastOrders[_0x4aa2e7(0x112)]>0x0){setLockOrders(ORDERS[_0x4aa2e7(0x227)]),validateOrdersState=_0x4aa2e7(0x279),allOrdersPlaced=!![];const _0xb899e5=new Date()[_0x4aa2e7(0x211)](),_0x186b11=config['ordertype']==_0x4aa2e7(0xeb)?validateOrderTimeout*0x3c*0x3e8:config[_0x4aa2e7(0x178)]*0x3c*0x3e8;if(_0x41e70d+_0x186b11>_0xb899e5){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x67e453=_0x4aa2e7;validateOrders(_0x67e453(0x23d));},_0x41e70d+_0x186b11-_0xb899e5);}else validateOrders(_0x4aa2e7(0x23d));}}async function sendMetricsTelegram(){const _0x5c9ece=_0xed67a2;if(!coinsLoaded){process['send']({'telegrammsg':_0x5c9ece(0x185)},_0x2eca69=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x117c8c='';if(config[_0x5c9ece(0xc4)])_0x117c8c=_0x5c9ece(0x215)+config[_0x5c9ece(0x25d)]+_0x5c9ece(0x100);else _0x117c8c='<b>Bot\x20'+botID+_0x5c9ece(0x100);const _0x55887c=config[_0x5c9ece(0x1cb)],_0x3a3099=config[_0x5c9ece(0x1b1)],_0x27cafa=getKPIs(_0x5c9ece(0x1cb)),_0x161323=getKPIs(_0x5c9ece(0x1b1),_0x3a3099),_0x5ba31f=getKPIs(_0x5c9ece(0x196)),_0x1d3ab7=getKPIs('net-fiat',_0x3a3099),_0x485977=getKPIs(_0x5c9ece(0x14e)),_0x268675=getKPIs(_0x5c9ece(0x1db),_0x3a3099);_0x55887c[_0x5c9ece(0xc8)](_0x3a3099)?(_0x117c8c+='<pre>',_0x117c8c+=_0x5c9ece(0x195)+_0x55887c+':\x20'+_0x27cafa['value']+'\x20('+_0x27cafa[_0x5c9ece(0xdd)]+_0x5c9ece(0x141),_0x117c8c+=_0x5c9ece(0x1dc)+_0x55887c+':\x20'+_0x5ba31f[_0x5c9ece(0x23a)]+'\x20('+_0x5ba31f[_0x5c9ece(0xdd)]+_0x5c9ece(0x141),_0x117c8c+=_0x5c9ece(0x179)+_0x55887c+':\x20'+_0x485977[_0x5c9ece(0x23a)]+'\x20('+_0x485977[_0x5c9ece(0xdd)]+_0x5c9ece(0x141),_0x117c8c+=_0x5c9ece(0xf9)):(_0x117c8c+=_0x5c9ece(0x152),_0x117c8c+='Value\x20'+_0x55887c+':\x20'+_0x27cafa[_0x5c9ece(0x23a)]+'\x20('+_0x27cafa[_0x5c9ece(0xdd)]+_0x5c9ece(0x141),_0x117c8c+=_0x5c9ece(0x195)+_0x3a3099+':\x20'+_0x161323[_0x5c9ece(0x23a)]+'\x20('+_0x161323['change']+_0x5c9ece(0x141),_0x117c8c+=_0x5c9ece(0x1dc)+_0x55887c+':\x20'+_0x5ba31f['value']+'\x20('+_0x5ba31f[_0x5c9ece(0xdd)]+_0x5c9ece(0x141),_0x117c8c+='Net\x20'+_0x3a3099+':\x20'+_0x1d3ab7[_0x5c9ece(0x23a)]+'\x20('+_0x1d3ab7[_0x5c9ece(0xdd)]+_0x5c9ece(0x141),_0x117c8c+=_0x5c9ece(0x179)+_0x55887c+':\x20'+_0x485977[_0x5c9ece(0x23a)]+'\x20('+_0x485977[_0x5c9ece(0xdd)]+'%)\x0a',_0x117c8c+='PnL\x20'+_0x3a3099+':\x20'+_0x268675[_0x5c9ece(0x23a)]+'\x20('+_0x268675[_0x5c9ece(0xdd)]+_0x5c9ece(0x141),_0x117c8c+='</pre>'),process[_0x5c9ece(0x181)]({'telegrammsg':_0x117c8c},_0x12d55c=>{});}async function sendPortfolioTelegram(){const _0x137a1f=_0xed67a2;if(!coinsLoaded||!currentCoins[0x0][_0x137a1f(0x214)]){process[_0x137a1f(0x181)]({'telegrammsg':'Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute'},_0xc88bcf=>{});return;}let _0x3ddf8e='';if(config['showname'])_0x3ddf8e='<b>'+config[_0x137a1f(0x25d)]+'\x20portfolio:</b>\x20\x0a\x0a';else _0x3ddf8e='<b>Bot\x20'+botID+_0x137a1f(0x246);_0x3ddf8e+=_0x137a1f(0x152),_0x3ddf8e+=_0x137a1f(0xd9),_0x3ddf8e+=_0x137a1f(0x1a6),_0x3ddf8e+=_0x137a1f(0xd9),currentCoins[_0x137a1f(0x129)](_0x25fb2a=>{const _0x2c1df2=_0x137a1f;_0x3ddf8e+=_0x25fb2a[_0x2c1df2(0x143)][_0x2c1df2(0xef)](0x7)+'|\x20'+formatPad(_0x25fb2a[_0x2c1df2(0x214)],0x2,0x6)+'|\x20'+formatPad(_0x25fb2a[_0x2c1df2(0x187)],0x2,0x6)+'|\x20'+(_0x25fb2a['target']==0x0?''[_0x2c1df2(0x249)](0x6):formatPad(_0x25fb2a[_0x2c1df2(0x1e6)]*0x64,0x2,0x6))+'\x0a';}),_0x3ddf8e+='</pre>',process[_0x137a1f(0x181)]({'telegrammsg':_0x3ddf8e},_0x168890=>{});}function formatPad(_0x5c75b5,_0x3a8772,_0x447002){const _0x40d1da=_0xed67a2,_0x189b7d=formatResultString(_0x5c75b5,_0x3a8772);return _0x189b7d?_0x189b7d['padStart'](_0x447002):''[_0x40d1da(0x249)](_0x447002);}function logHistory(_0x3f00a4,_0x3ec78d,_0x13b302=''){const _0x22b437=_0xed67a2;logger['full'](''+_0x3ec78d);let _0x24c3c2={'time':getTimeStamp(),'type':_0x3f00a4,'event':_0x3ec78d};dbLogs[_0x22b437(0x247)](_0x22b437(0xcd))[_0x22b437(0x1d2)](_0x24c3c2)[_0x22b437(0x1e2)]();if(_0x13b302=='')_0x13b302=_0x3ec78d;proxyEmit(_0x22b437(0xbf),{'log':_0x24c3c2,'summary':_0x13b302}),process['send']({'telegram':{..._0x24c3c2,'botname':config['botname'],'showname':config['showname']}},_0x5f56fd=>{});}function emitHistory(_0x3b96f4={}){const _0x3129ac=_0xed67a2;Object[_0x3129ac(0xee)](_0x3b96f4)[_0x3129ac(0x112)]==0x0&&(_0x3b96f4={'type':['order',_0x3129ac(0xbf)],'event':'','page':0x1});if(_0x3b96f4['type'][_0x3129ac(0xc8)](_0x3129ac(0xbf)))_0x3b96f4[_0x3129ac(0x164)][_0x3129ac(0x281)](_0x3b96f4['type'][_0x3129ac(0x13d)](_0x3129ac(0xbf)),0x1,'error',_0x3129ac(0x17d),'success');if(dbLogs['has'](_0x3129ac(0xcd))[_0x3129ac(0x23a)]()){let _0x4842da=dbLogs[_0x3129ac(0x247)]('logs')['filter'](_0x35b12d=>{const _0xce3dab=_0x3129ac;if(_0x3b96f4[_0xce3dab(0x164)][_0xce3dab(0x112)]==0x0)return![];else return _0x3b96f4['type']['includes'](_0x35b12d[_0xce3dab(0x164)]);})[_0x3129ac(0x245)](_0x3a285f=>{const _0x2bbede=_0x3129ac;if(_0x3b96f4['event']=='')return!![];else return _0x3a285f[_0x2bbede(0xbf)]['toLowerCase']()[_0x2bbede(0xc8)](_0x3b96f4[_0x2bbede(0xbf)]['toLowerCase']());})['sortBy'](_0x3129ac(0x153)),_0x1f3ccb=_0x4842da[_0x3129ac(0x23a)]()[_0x3129ac(0x112)];_0x4842da=_0x4842da['reverse']()[_0x3129ac(0x241)]((_0x3b96f4[_0x3129ac(0x158)]-0x1)*logPageSize,_0x3b96f4['page']*logPageSize-0x1)[_0x3129ac(0x270)]()[_0x3129ac(0x23a)](),proxyEmit(_0x3129ac(0x10b),{'logs':_0x4842da,'total':_0x1f3ccb});}else proxyEmit(_0x3129ac(0x10b),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x3ab6fc){const _0xcb63af=_0xed67a2;if(dbLogs[_0xcb63af(0xea)]('logs')['value']()){const _0x420883=dbLogs[_0xcb63af(0x247)](_0xcb63af(0xcd))[_0xcb63af(0x240)](_0xcb63af(0x153))[_0xcb63af(0x245)](_0x59f32f=>{const _0x3fafe5=_0xcb63af;return _0x59f32f[_0x3fafe5(0x164)]==_0x3fafe5(0xb4);})[_0xcb63af(0x23a)]();dbLogs[_0xcb63af(0x247)]('logs')[_0xcb63af(0x147)]()[_0xcb63af(0x1e2)](),dbLogs[_0xcb63af(0x247)](_0xcb63af(0xcd))['assign'](_0x420883)[_0xcb63af(0x1e2)](),emitHistory(_0x3ab6fc);}}async function pauseBot(_0x2e3780=pauseBotIntervalShort,_0x1288b4,_0x936ac7,_0x3fb4a8=![]){const _0x58498d=_0xed67a2,_0x602df0=new Date()[_0x58498d(0x211)]();if(!lastErrorShown||_0x602df0-lastErrorShown>=_0x2e3780){lastErrorShown=_0x602df0;if(!lastBotPause)lastBotPause=_0x602df0,consecutivePauses=0x1;else{if(_0x602df0-lastBotPause-_0x2e3780<0x5a*0x3e8){consecutivePauses++;if(consecutivePauses>maxPauseRetries){if(_0x3fb4a8){logHistory(_0x58498d(0x117),_0x1288b4+_0x58498d(0x12e)),await killBot();return;}else logHistory(_0x58498d(0x117),_0x1288b4+pauseBotMsg),_0x2e3780=pauseBotInterval;}}else consecutivePauses=0x1;lastBotPause=_0x602df0;}_0x936ac7?logger[_0x58498d(0x1f5)]('('+consecutivePauses+')\x20'+_0x1288b4+_0x58498d(0xaa),_0x936ac7):logger[_0x58498d(0x1f5)]('('+consecutivePauses+')\x20'+_0x1288b4);if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);await sleep(_0x2e3780),botPaused=![],_0x2e3780==pauseBotIntervalShort?resumeBot(!![]):resumeBot(![]);}}}async function killBot(){const _0x1c608a=_0xed67a2;botPaused=!![],await sleep(0x3e8),process[_0x1c608a(0x181)]({'stop':'kill'},_0x439085=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x29f7c4,_0x3a44b2,_0x3f5a41=![]){const _0x5ba8da=_0xed67a2;if(botPaused)return;let _0x44e646;const _0x1418ca=config['exchange']||_0x5ba8da(0x20c);if(_0x3a44b2)logger['debug'](_0x5ba8da(0xdb)+_0x3a44b2);const _0x3c107f=()=>{const _0x13b579=_0x5ba8da;loading['error']=_0x13b579(0x274),emitLoadingProgress();};if(_0x29f7c4[_0x5ba8da(0x25f)]()[_0x5ba8da(0xc8)](_0x5ba8da(0x116)))logHistory('error',_0x1418ca+_0x5ba8da(0x136)),_0x3c107f();else{if(_0x29f7c4[_0x5ba8da(0x25f)]()['includes']('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory(_0x5ba8da(0x117),_0x1418ca+'\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)'),_0x3c107f();else{if(_0x29f7c4['toString']()[_0x5ba8da(0xc8)](_0x5ba8da(0x1f4)))config[_0x5ba8da(0x206)]?_0x44e646=_0x1418ca+_0x5ba8da(0x230):_0x44e646=_0x1418ca+_0x5ba8da(0xe7),logHistory(_0x5ba8da(0x117),_0x44e646+_0x5ba8da(0x1d8)),_0x3c107f();else{if(_0x29f7c4[_0x5ba8da(0x25f)]()[_0x5ba8da(0xc8)](_0x5ba8da(0x266)))logHistory('error',_0x1418ca+_0x5ba8da(0x1d1)),_0x3c107f();else{if(!_0x3f5a41)await handleError(_0x29f7c4,null);}}}}}async function handleError(_0x573b07,_0x1341c9,_0x2ecb92=''){const _0x49f468=_0xed67a2;if(botPaused)return;let _0x132247;const _0x3d4c2e=config['exchange']||_0x49f468(0x20c);if(_0x1341c9)logger['debug'](_0x49f468(0xdb)+_0x1341c9);if(_0x573b07[_0x49f468(0x25f)]()['includes'](_0x49f468(0x19d)))_0x132247=_0x3d4c2e+_0x49f468(0xd0),await pauseBot(undefined,_0x132247,_0x573b07);else{if(_0x573b07['toString']()[_0x49f468(0xc8)]('RateLimitExceeded'))_0x132247=_0x3d4c2e+_0x49f468(0x238),await pauseBot(undefined,_0x132247,_0x573b07);else{if(_0x573b07[_0x49f468(0x25f)]()[_0x49f468(0xc8)](_0x49f468(0x283))||_0x573b07[_0x49f468(0x25f)]()[_0x49f468(0xc8)](_0x49f468(0x1a7)))_0x132247=_0x3d4c2e+_0x49f468(0x1c5),await pauseBot(undefined,_0x132247,_0x573b07[_0x49f468(0x25f)]());else{if(_0x573b07[_0x49f468(0x25f)]()[_0x49f468(0xc8)](_0x49f468(0x133)))_0x132247=_0x3d4c2e+_0x49f468(0x150),await pauseBot(undefined,_0x132247,_0x573b07[_0x49f468(0x25f)]());else{if(_0x573b07[_0x49f468(0x25f)]()[_0x49f468(0xc8)](_0x49f468(0xfc)))_0x132247=_0x3d4c2e+_0x49f468(0x1de),await pauseBot(undefined,_0x132247,_0x573b07[_0x49f468(0x25f)]());else{if(_0x573b07[_0x49f468(0x25f)]()['toLowerCase']()['includes'](_0x49f468(0x16d))||_0x573b07[_0x49f468(0x25f)]()[_0x49f468(0x17e)]()[_0x49f468(0xc8)](_0x49f468(0xff)))_0x132247=_0x49f468(0x219),await pauseBot(undefined,_0x132247,_0x573b07[_0x49f468(0x25f)]());else{if(_0x573b07['toString']()[_0x49f468(0xc8)]('InvalidNonce'))_0x132247=_0x3d4c2e+_0x49f468(0x13a),await pauseBot(undefined,_0x132247,_0x573b07[_0x49f468(0x25f)]());else{if(_0x573b07 instanceof ccxt['NetworkError'])_0x132247=_0x3d4c2e+_0x49f468(0x1a0)+_0x573b07[_0x49f468(0x25f)](),logger['debug'](_0x49f468(0x191),_0x573b07),await pauseBot(undefined,_0x132247,_0x573b07);else{if(_0x573b07[_0x49f468(0x25f)]()[_0x49f468(0xc8)](_0x49f468(0x116)))logHistory(_0x49f468(0x117),_0x3d4c2e+_0x49f468(0x1eb)),logHistory('error',_0x49f468(0xfe)),await killBot();else{if(_0x573b07['toString']()[_0x49f468(0xc8)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory(_0x49f468(0x117),_0x3d4c2e+_0x49f468(0x1b5)),logHistory(_0x49f468(0x117),_0x49f468(0xfe)),await killBot();else{if(_0x573b07['toString']()[_0x49f468(0xc8)](_0x49f468(0x1f4))&&_0x573b07[_0x49f468(0x25f)]()[_0x49f468(0xc8)](_0x49f468(0x15c)))_0x132247=_0x3d4c2e+_0x49f468(0x1bd),await pauseBot(undefined,_0x132247,_0x573b07,!![]);else{if(_0x573b07[_0x49f468(0x25f)]()['includes']('AuthenticationError'))config[_0x49f468(0x206)]?_0x132247=_0x3d4c2e+_0x49f468(0x230):_0x132247=_0x3d4c2e+_0x49f468(0xe7),logHistory(_0x49f468(0x117),_0x132247),logHistory('error','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)'),await killBot();else{if(_0x573b07[_0x49f468(0x25f)]()[_0x49f468(0xc8)]('PermissionDenied'))logHistory('error',_0x3d4c2e+_0x49f468(0x132)),logHistory(_0x49f468(0x117),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)'),await killBot();else{if(_0x573b07[_0x49f468(0x25f)]()[_0x49f468(0xc8)](_0x49f468(0x237)))logHistory(_0x49f468(0x117),_0x49f468(0x202)+_0x2ecb92),logger['debug'](_0x49f468(0x24f),_0x573b07);else{if(_0x573b07 instanceof ccxt[_0x49f468(0xaf)]){_0x132247=_0x3d4c2e+_0x49f468(0x137)+_0x573b07[_0x49f468(0x25f)]();if(_0x2ecb92)_0x132247+=_0x49f468(0x289)+_0x2ecb92;await pauseBot(undefined,_0x132247,_0x573b07);}else{_0x132247=_0x49f468(0x260)+_0x573b07['toString']();if(_0x2ecb92)_0x132247+=_0x49f468(0x289)+_0x2ecb92;await pauseBot(undefined,_0x132247);}}}}}}}}}}}}}}}}function decryptRSA(_0x4e9d63,_0x2547e0){const _0x4cc948=_0xed67a2,_0x1d72af=forge[_0x4cc948(0x138)][_0x4cc948(0x170)](_0x4e9d63),_0x344127=_0x1d72af[_0x4cc948(0x252)](forge[_0x4cc948(0x1b7)][_0x4cc948(0xec)](_0x2547e0),_0x4cc948(0x1a5),{'md':forge['md'][_0x4cc948(0x239)][_0x4cc948(0x24a)](),'mgf1':{'md':forge['md'][_0x4cc948(0x239)][_0x4cc948(0x24a)]()}});return _0x344127;}async function withRetry(_0x1ea58c,_0x50c98c){const _0xbbf5ab=_0xed67a2;let _0x93f24d=![],_0x749c49=0x0,_0x590773,_0x34355f;while(_0x749c49<maxRetries){try{_0x590773=await _0x50c98c();break;}catch(_0x20f284){_0x34355f=_0x20f284,!_0x93f24d?(_0x93f24d=!![],logger[_0xbbf5ab(0x1f5)](_0xbbf5ab(0x203)+_0x1ea58c+':',_0x20f284['toString']())):await sleep(retryInterval);}_0x749c49++;}if(_0x749c49==0x0)return _0x590773;if(_0x749c49>=maxRetries)throw _0x34355f;else return logger[_0xbbf5ab(0x1f5)](_0xbbf5ab(0x1cc)+_0x749c49+_0xbbf5ab(0x1ab)),_0x590773;}function formatResult(_0x4e3d1a,_0x1af89b){const _0x2c54fd=_0xed67a2;return parseFloat(_0x4e3d1a[_0x2c54fd(0x18d)](_0x1af89b));}function formatResultTruncate(_0x2988d5,_0x130b12){const _0x4c7bea=_0xed67a2;let _0x1488c1=formatResultString(_0x2988d5,0xa),_0x4d055a=_0x1488c1[_0x4c7bea(0x13d)]('.');return _0x4d055a!=-0x1&&(_0x1488c1=_0x1488c1[_0x4c7bea(0x241)](0x0,_0x4d055a+_0x130b12+0x1)),Number(_0x1488c1);}function formatResultString(_0x5a75b3,_0x35098b){const _0x4caab8=_0xed67a2;let _0x16d90a;if(!(''+_0x5a75b3)[_0x4caab8(0xc8)]('e'))_0x16d90a=+(Math['round'](_0x5a75b3+'e+'+_0x35098b)+'e-'+_0x35098b);else{let _0x2d0db2=(''+_0x5a75b3)[_0x4caab8(0x242)]('e'),_0x119d7a='';+_0x2d0db2[0x1]+_0x35098b>0x0&&(_0x119d7a='+'),_0x16d90a=+(Math[_0x4caab8(0x199)](+_0x2d0db2[0x0]+'e'+_0x119d7a+(+_0x2d0db2[0x1]+_0x35098b))+'e-'+_0x35098b);}return Number(_0x16d90a)[_0x4caab8(0x18d)](_0x35098b);}function getServerTime(){const _0x14cca0=_0xed67a2,_0x1120e3=new Date();return _0x1120e3[_0x14cca0(0x1c7)]()+'/'+(_0x1120e3[_0x14cca0(0xfd)]()+0x1)['toString']()[_0x14cca0(0x249)](0x2,'0')+'/'+_0x1120e3['getDate']()['toString']()['padStart'](0x2,'0')+'\x20'+_0x1120e3[_0x14cca0(0x228)]()['toString']()[_0x14cca0(0x249)](0x2,'0')+':'+_0x1120e3[_0x14cca0(0x15b)]()[_0x14cca0(0x25f)]()[_0x14cca0(0x249)](0x2,'0')+':'+_0x1120e3[_0x14cca0(0x18f)]()[_0x14cca0(0x25f)]()[_0x14cca0(0x249)](0x2,'0');}function getTimeStamp(){const _0x471a5d=_0xed67a2,_0x26d80b=shiftedTime();return _0x26d80b[_0x471a5d(0x1c7)]()+'/'+(_0x26d80b['getMonth']()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x26d80b[_0x471a5d(0x221)]()[_0x471a5d(0x25f)]()[_0x471a5d(0x249)](0x2,'0')+'\x20'+_0x26d80b[_0x471a5d(0x228)]()[_0x471a5d(0x25f)]()['padStart'](0x2,'0')+':'+_0x26d80b[_0x471a5d(0x15b)]()[_0x471a5d(0x25f)]()['padStart'](0x2,'0')+':'+_0x26d80b[_0x471a5d(0x18f)]()[_0x471a5d(0x25f)]()['padStart'](0x2,'0');}function getDate(){const _0x430c62=_0xed67a2,_0x428a68=shiftedTime();return _0x428a68[_0x430c62(0x1c7)]()+'/'+(_0x428a68[_0x430c62(0xfd)]()+0x1)['toString']()[_0x430c62(0x249)](0x2,'0')+'/'+_0x428a68[_0x430c62(0x221)]()['toString']()[_0x430c62(0x249)](0x2,'0');}function getHour(){const _0x4fc21a=_0xed67a2,_0x250072=shiftedTime();return _0x250072[_0x4fc21a(0x228)]()['toString']()[_0x4fc21a(0x249)](0x2,'0');}function sleep(_0x33d195){return new Promise(_0x2b16f5=>setTimeout(_0x2b16f5,_0x33d195));}function shiftedTime(){const _0x4b1a0b=_0xed67a2,_0x2ac3ad=new Date();let _0x59dac7=_0x2ac3ad;if(config&&config['timeshift']!==0x0)_0x59dac7=fns[_0x4b1a0b(0x114)](_0x2ac3ad,{'hours':config[_0x4b1a0b(0x11b)]});return _0x59dac7;}function timer(_0x1be49a){const _0x4231f0=_0xed67a2,_0x24b1f4=new Date();!lasttime?console[_0x4231f0(0x20d)](getTimeStamp()+':\x20timer\x20>',_0x1be49a,_0x24b1f4):console['log'](getTimeStamp()+_0x4231f0(0xa9),_0x1be49a,(_0x24b1f4-lasttime)/0x3e8),lasttime=_0x24b1f4;}