const _0x48d848=_0x5854;(function(_0x14a131,_0x29f20b){const _0x4d1aa7=_0x5854,_0xc2c230=_0x14a131();while(!![]){try{const _0x6e1228=-parseInt(_0x4d1aa7(0x2c4))/0x1+-parseInt(_0x4d1aa7(0x2c1))/0x2*(parseInt(_0x4d1aa7(0x172))/0x3)+parseInt(_0x4d1aa7(0x178))/0x4*(-parseInt(_0x4d1aa7(0x289))/0x5)+parseInt(_0x4d1aa7(0x273))/0x6+-parseInt(_0x4d1aa7(0x286))/0x7+-parseInt(_0x4d1aa7(0x250))/0x8*(parseInt(_0x4d1aa7(0x182))/0x9)+-parseInt(_0x4d1aa7(0x13c))/0xa*(-parseInt(_0x4d1aa7(0x2b9))/0xb);if(_0x6e1228===_0x29f20b)break;else _0xc2c230['push'](_0xc2c230['shift']());}catch(_0x125ef5){_0xc2c230['push'](_0xc2c230['shift']());}}}(_0x2213,0x8abc5));const _0x4ee768=function(){let _0x534d6e=!![];return function(_0x532cf6,_0x2633bd){const _0xa4c694=_0x534d6e?function(){const _0x5c316a=_0x5854;if(_0x2633bd){const _0x4cecbf=_0x2633bd[_0x5c316a(0x2a8)](_0x532cf6,arguments);return _0x2633bd=null,_0x4cecbf;}}:function(){};return _0x534d6e=![],_0xa4c694;};}(),_0x261cfa=_0x4ee768(this,function(){const _0x1949a3=_0x5854;return _0x261cfa[_0x1949a3(0x1c2)]()[_0x1949a3(0x211)](_0x1949a3(0x1c3))[_0x1949a3(0x1c2)]()['constructor'](_0x261cfa)['search'](_0x1949a3(0x1c3));});_0x261cfa();'use strict';const ccxt=require(_0x48d848(0x2f1)),low=require(_0x48d848(0x26c)),FileSync=require(_0x48d848(0x267)),fs=require('fs'),fns=require(_0x48d848(0x18c)),forge=require(_0x48d848(0x183)),util=require(_0x48d848(0x2d1)),argv=require('yargs/yargs')(process['argv'][_0x48d848(0x163)](0x2))[_0x48d848(0x216)],path=require('path'),axios=require(_0x48d848(0x1ed));function _0x5854(_0x25edd2,_0x44d9eb){const _0x1c391c=_0x2213();return _0x5854=function(_0x261cfa,_0x4ee768){_0x261cfa=_0x261cfa-0x123;let _0x2213d0=_0x1c391c[_0x261cfa];return _0x2213d0;},_0x5854(_0x25edd2,_0x44d9eb);}let exchange,gTicker={},gChange={};const usdBasecoins=[_0x48d848(0x298),_0x48d848(0x21b),_0x48d848(0x1e8),_0x48d848(0x18b),_0x48d848(0x194),_0x48d848(0x130)],excludedExchanges=[_0x48d848(0x2bb)],debugging=argv['d']||![];let pnlGenerationNeeded=argv['r']||![],config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x48d848(0x2e1)]({'LOCKED':0x0,'UNLOCKING':0x1,'UNLOCKED':0x2});let lockOrders=ORDERS[_0x48d848(0x2a5)],validateOrdersState,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotIntervalShort=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0x48d848(0x2fc)+pauseBotInterval/0xea60+_0x48d848(0x231),maxPauseRetries=0x6,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,watchTransactionsInterval=0x3c*0x3e8,schedulerInterval=0x3c*0x3c*0x3e8,retryInterval=0x3e8,maxRetries=0x5,logPageSize=0x14,defaultFee=0.003;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidOrdersInitialTimeout,pidOrdersTimeout,botPaused=![],transactionDetectionOngoing=![],lastCoinsToBalance='',exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x5dc,balanceUpdateRetries=0x5;let enableFiatToggle;const serverversion=require(_0x48d848(0x1f5))['version'],environment=require(_0x48d848(0x1f5))[_0x48d848(0x227)]||_0x48d848(0x2ce),botID=process[_0x48d848(0x216)][0x2]||_0x48d848(0x284),pattern=/^[0-9]{3}$/;!pattern[_0x48d848(0x209)](botID)&&(console[_0x48d848(0x2a0)](_0x48d848(0x1ea)+botID+_0x48d848(0x201)),killBot());const userID=process[_0x48d848(0x216)][0x3]||'',configpath=userID?'./config/'+userID+'/':'./config/',logspath=userID?_0x48d848(0x1cd)+userID+'/':_0x48d848(0x1cd),loggerfile=fs[_0x48d848(0x214)](logspath+_0x48d848(0x205),{'flags':'a'});function _0x2213(){const _0x503d6c=['cancelOrder','unlinkSync','Resetting\x20bot\x20history','basecoin','offset','trade','no\x20open\x20orders','botID','Initializing\x20coin\x20results','13955080BVGGlM','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','buys','getMonth',')\x20|\x20exchange:\x20','enabled','decode64','\x20exchange','performance','initial','valid','API-key\x20format\x20invalid','No\x20more\x20open\x20orders\x20-\x20','kill','OnMaintenance','removed','initTickers()','api-issue','getTime','changes','join','settings','prevnumber','date','\x20hour','closed','Error\x20in\x20loadSymbols():\x20','\x20portfolio:</b>\x20\x0a\x0a','Order\x20amount\x20is\x20invalid:\x20','timestamp','recent20','ETH','open','min','toFixed','%\x20(','\x20-\x20bot\x20switched\x20to\x20manual\x20mode','apiPassword','event-history','slice','amount','portfolio1','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','Unfilled\x20order(s)\x20could\x20not\x20be\x20canceled\x20after\x20','order','total','RSA-OAEP','get','autoliquidity','getOpenOrders()','limit-low','Valid\x20balance\x20for\x20','secure','Cooldown\x20ended\x20-\x20balancing\x20resumed','138mHfbMX','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','InvalidNonce','deleteHistoryAlerts','Stopped\x20fetching\x20balance\x20after\x20','sendPortfolioTelegram','88XrJqtV','cloneDeep','storeHeadless','emojibuy','1\x20-\x20FILLED\x20known\x20order:\x20','length','remainingSymbols','.json','random','configstate','4239CLUxLw','node-forge','write','ask','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','isBefore','loading-canceled','Market\x20order','portfolio2','USDT','date-fns','<pre>','price','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','%)\x0a','Error\x20details:\x20','getPortfolio','\x20-\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','USDC','Waited\x20','warning','change24h','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','cancel','number','match','error','Invalid\x20API\x20details,\x20please\x20try\x20again\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','/backup/','format','eur','\x20not\x20available\x20(see:\x20hodlerhacks.com/fix/5)','PermissionDenied','getFullYear','market_cap','\x20attempts','2.7.1','colorscheme','time','bot','toggleBotMode','string','NetworkError','type','fetchOpenOrders','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','pop','resetHistory','enableFiatToggle','<b>','\x0aSymbol(s):\x20','\x20>\x20','excluded','\x20order:\x20','Pausing\x20for\x20','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','watchTradesForSymbols','fromCodePoint','Exception\x20thrown\x20in\x20','Failed\x20to\x20load\x20market\x20data\x20-\x20bot\x20not\x20started','showConfig','Order(s)\x20not\x20validated\x20after\x20','success','fee','toString','(((.+)+)+)+$','-performance.json','LOCKED','\x20/\x20','\x20>\x20stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','Block\x20transaction\x20detection:\x20','Error\x20occurred:\x20','round','getMinutes','2\x20-\x20handling\x20FILLED\x20order:\x20','./logs/','createOrder','exchange\x20reload','sandbox','\x20|\x20Custom\x20ID:\x20','Generated\x20PnL\x20data','emojisell','netoffset','Placing\x20order\x20for:\x20','message','1\x20-\x20Validate\x20orders:\x20','Avoiding\x20continuous\x20order\x20attempts','Invalid\x20symbol:\x20','\x20has\x20a\x2024h\x20drop\x20of\x20','pro','\x20|\x20highest\x20fee:\x20','liquidity','setSandboxMode','-events.json','Resuming\x20(','2.6.0','canceled','balancing\x20resumes\x20when\x20cooldown\x20ends','parse','isEqual','storeConfiguration','orderstatus','TUSD','cancelOrders()','Error:\x20Invalid\x20argument\x20','Error\x20details:','marketcapApi','axios','bb-secure.json','2.6.23','Exchange','reverse','Network\x20error\x20details:','buy','sells','./version.json','Invalid\x20quantity','realizedPnL','MIN_NOTIONAL','Manual\x20balancing\x20required','final','watchTradesForSymbols()',':\x20Bot\x20','2.6.22','0\x20-\x20EXECUTION:\x20','spot','send',',\x20must\x20be\x20a\x203\x20digit\x20number','watchOrders','split','***','/output-000.log','detectLiquidityChange()','/EUR','-results.json','test','DDoSProtection','added','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','quote','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','BTC','Order\x20filled:\x20','search','replace','findIndex','createWriteStream','\x20not\x20responding\x20(see:\x20hodlerhacks.com/fix/5)','argv','request-time','entries','map','recreate','BUSD','switch-manual','Value\x20','configuration-stored','shift','event','change','padEnd','differenceInSeconds','\x20|\x20','assign','portfolio','environment','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','RateLimitExceeded','fetchTickers()','red_yellow_blue','breakeven','\x20network\x20error:\x20','floor','getHours','delta','\x20minutes','marketcapEnabled','slider','usd','side','Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)','addDays','ExchangeNotAvailable','\x20blocked\x20API\x20(RateLimitExceeded)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','net-fiat','marketcap','privateKey','status\x20code\x20401','\x20minutes\x20-\x20','orderId','timestamp-issue','value','cancelLoading','sell','net-basecoin','stack','heapUsed','\x20-\x20go\x20back\x20and\x20try\x20again','Trigger:\x20','limit-high','filter',')\x20unknown\x20order:\x20','balances','startnumber','process\x20','loadMarkets','10144ALJLsZ','recovery','\x20orders\x20in\x20less\x20than\x20','apiSecret','************','Will\x20continue\x20to\x20wait\x20for\x20order(s)\x20to\x20be\x20filled\x20and\x20try\x20to\x20cancel\x20again\x20later','getSeconds','Headless:\x20','distribution','fetchBalance()','EUR','existsSync','update-liquidity','target','<b>Bot\x20','Unfilled\x20order(s)\x20canceled\x20after\x20','threshold','Executed\x20','exchanges','testAPI()','Unknown\x20error\x20-\x20check\x20logs','Updating\x20API\x20key\x20(not\x20saved\x20in\x20config\x20file\x20yet)','amountToPrecision','lowdb/adapters/FileSync','RETRY\x20-\x20Error\x20in\x20','data','showname','symbol','lowdb','find','Bitget','Test\x20new\x20API','initclient','pnl-fiat','getStartingBalances','3964056QWtuSk','Huobipro','uncaughtException','Error\x20while\x20deleting\x20files:\x20','substring','basecoinvalue','exchange','mkdirSync','InvalidOrder','\x20>\x20[DEBUG]\x20','writeFile','\x20|\x20lock\x20orders:\x20','staging','active','loadSymbols()','placeOrder','filled','001','bb-settings.json','2259698iYAxaa','logs','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','182045RHIjiR','\x20closed\x20the\x20connection\x20(see:\x20hodlerhacks.com/fix/5)','net','push','keys','Bybit','debug','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','sqrt','none','highest','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','fetchBalance','\x20MB','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','USD',')\x20known\x20order:\x20','quick','Cex','sort','coin-loading-progress','balancing\x20resumed','create','log','progress','Initializing\x20exchange','currency','\x20API\x20key,\x20secret\x20or\x20password\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','UNLOCKED','storeFiat','configuration','apply','cooldown','2.3.5','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','pnl','Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute','PAXG','Insufficient\x20funds\x20to\x20execute\x20order:\x20',':\x20timer\x20>','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','forEach','fetchTicker','toLowerCase','coins','-------------------------------\x0a','startprice','status','22TdldgM','Portfolio\x20change\x20detected:\x20','bitmex','ongoing','function','cost','args','testApi','22430jkKbnT','watchTrades','stringify','646501ZutEHg','Reset\x20|\x20','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','complete','placeOrder()','coin','</pre>','\x20metrics:</b>\x20\x0a\x0a','onepagemode','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)','production','remove','Net\x20','util','starting-balances','watchTrades()','max','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','privateKeyFromPem','full','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','decrypt','Exchange\x20permission\x20denied\x20-\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20trying\x20again\x20in\x20','average','openOrders','Bot\x20','RequestTimeout','has','freeze','Order\x20is\x20invalid:\x20','password','timeout','padStart','includes','market','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','apiKey','\x20exchange\x20error:\x20','2\x20-\x20Handled\x20open\x20orders','limit','1\x20-\x20partially\x20FILLED\x20(','botname','limits','ID:\x20','ccxt','Market','headless','getDate','bots','fetchTickers','customId','yyyy/MM/dd','startdate','version','Limit\x20(low-margin)','\x20>\x20pausing\x20bot\x20for\x20','bid','watchOrders()','set','timeshift','percentage','2\x20-\x20Validate\x20orders:\x20','bot-','defaults','fiat','/USD','secret','ordertype','1\x20-\x20Handle\x20open\x20orders','sortBy','AuthenticationError','PnL\x20','abs','USDP','last','/USDT'];_0x2213=function(){return _0x503d6c;};return _0x2213();}!fs[_0x48d848(0x25b)](configpath)&&fs[_0x48d848(0x27a)](configpath);!fs[_0x48d848(0x25b)](logspath)&&fs[_0x48d848(0x27a)](logspath);const configfile=configpath+_0x48d848(0x125)+botID+'-config.json',logfile=configpath+_0x48d848(0x125)+botID+_0x48d848(0x1df),performancefile=configpath+_0x48d848(0x125)+botID+_0x48d848(0x1c4),coinresultsfile=configpath+_0x48d848(0x125)+botID+'-results.json',settingsfile=configpath+_0x48d848(0x285),securefile=configpath+_0x48d848(0x1ee),configbackuppath=configpath+_0x48d848(0x19e),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x48d848(0x126)]({'logs':[],'version':serverversion})['write']();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance['defaults']({'data':[],'version':serverversion})[_0x48d848(0x184)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x48d848(0x126)]({'bot':[],'version':serverversion})[_0x48d848(0x184)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x48d848(0x126)]({'coins':{},'version':serverversion})['write']();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0,settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x31e527=>{const _0x5544dd=_0x48d848;console[_0x5544dd(0x2a0)](_0x31e527);},'simple':_0x2335db=>{const _0x5b28b6=_0x48d848;console[_0x5b28b6(0x2a0)](_0x2335db),loggerfile[_0x5b28b6(0x184)](util[_0x5b28b6(0x19f)](_0x2335db)+'\x0a');},'full':async(_0x5b97dd,_0x5f2d68='')=>{const _0x4ff8fb=_0x48d848;let _0x5c1b52;if(config[_0x4ff8fb(0x26a)])_0x5c1b52=getTimeStamp()+':\x20'+config['botname']+_0x4ff8fb(0x1b5)+_0x5b97dd;else _0x5c1b52=getTimeStamp()+_0x4ff8fb(0x1fc)+botID+_0x4ff8fb(0x1b5)+_0x5b97dd;console[_0x4ff8fb(0x2a0)](_0x5c1b52),loggerfile[_0x4ff8fb(0x184)](util[_0x4ff8fb(0x19f)](_0x5c1b52)+'\x0a'),_0x5f2d68&&(console['log'](_0x5f2d68),loggerfile[_0x4ff8fb(0x184)](util[_0x4ff8fb(0x19f)](_0x5f2d68)+'\x0a'));},'debug':async(_0x595734,_0x51eb89='')=>{const _0x126ba7=_0x48d848;let _0x206802;if(config[_0x126ba7(0x26a)])_0x206802=getTimeStamp()+':\x20'+config[_0x126ba7(0x2ee)]+_0x126ba7(0x27c)+_0x595734;else _0x206802=getTimeStamp()+':\x20Bot\x20'+botID+_0x126ba7(0x27c)+_0x595734;if(debugging)console[_0x126ba7(0x2a0)](_0x206802);loggerfile[_0x126ba7(0x184)](util[_0x126ba7(0x19f)](_0x206802)+'\x0a');if(_0x51eb89){if(debugging)console[_0x126ba7(0x2a0)](_0x51eb89);loggerfile['write'](util[_0x126ba7(0x19f)](_0x51eb89)+'\x0a');}}};process['on'](_0x48d848(0x275),function(_0x3eb261){const _0x2ab6e6=_0x48d848;handleError(_0x3eb261[_0x2ab6e6(0x245)],_0x2ab6e6(0x275));});settings[_0x48d848(0x300)]!=config[_0x48d848(0x300)]&&updateTimeshift(settings[_0x48d848(0x300)]);settings[_0x48d848(0x2cc)]!=config[_0x48d848(0x2cc)]&&updateOnepagemode(settings[_0x48d848(0x2cc)]);(settings[_0x48d848(0x1ec)]&&!config[_0x48d848(0x1ec)]||!settings[_0x48d848(0x1ec)]&&config[_0x48d848(0x1ec)])&&updateMarketcapApi(settings[_0x48d848(0x1ec)]);process[_0x48d848(0x200)]({'started':'running'},_0x882a80=>{}),initializeProcessListeners();function proxyEmit(_0x17ce33,_0x2b6e3f=null){process['send']({'function':_0x17ce33,'args':_0x2b6e3f},_0x391b56=>{});}function initializeProcessListeners(){const _0x2f6d06=_0x48d848;process['on'](_0x2f6d06(0x1d6),_0x433dcf=>{const _0x4dbd88=_0x2f6d06;switch(Object[_0x4dbd88(0x28d)](_0x433dcf)[0x0]){case'timeshift':_0x433dcf[_0x4dbd88(0x300)]!=undefined&&(settings['timeshift']=_0x433dcf[_0x4dbd88(0x300)],updateTimeshift(settings[_0x4dbd88(0x300)]));break;case _0x4dbd88(0x2cc):_0x433dcf['onepagemode']!=undefined&&(settings[_0x4dbd88(0x2cc)]=_0x433dcf[_0x4dbd88(0x2cc)],updateOnepagemode(settings['onepagemode']));break;case _0x4dbd88(0x1ec):_0x433dcf[_0x4dbd88(0x1ec)]!=undefined&&(settings[_0x4dbd88(0x1ec)]=_0x433dcf[_0x4dbd88(0x1ec)],updateMarketcapApi(settings['marketcapApi']));break;case _0x4dbd88(0x2f5):_0x433dcf[_0x4dbd88(0x2f5)]!=undefined&&(bots=JSON[_0x4dbd88(0x1e4)](_0x433dcf['bots']),proxyEmit(_0x4dbd88(0x2f5),bots));break;case _0x4dbd88(0x2bd):switch(_0x433dcf['function']){case _0x4dbd88(0x270):initclient();break;case _0x4dbd88(0x1aa):toggleBotMode();break;case'emitHistory':emitHistory(_0x433dcf['args']);break;case _0x4dbd88(0x175):deleteHistoryAlerts(_0x433dcf[_0x4dbd88(0x2bf)]);break;case _0x4dbd88(0x192):getPortfolio(_0x433dcf[_0x4dbd88(0x2bf)]);break;case _0x4dbd88(0x1e6):storeConfiguration(_0x433dcf[_0x4dbd88(0x2bf)]);break;case _0x4dbd88(0x17a):storeHeadless(_0x433dcf[_0x4dbd88(0x2bf)]);break;case _0x4dbd88(0x2a6):storeFiat(_0x433dcf[_0x4dbd88(0x2bf)]);break;case _0x4dbd88(0x1b1):resetHistory();break;case _0x4dbd88(0x272):getStartingBalances(getNormalizedPerformance());break;case _0x4dbd88(0x282):placeOrder(_0x433dcf[_0x4dbd88(0x2bf)]);break;case _0x4dbd88(0x242):cancelLoading();break;case _0x4dbd88(0x1be):showConfig();break;case'sendMetricsTelegram':sendMetricsTelegram();break;case _0x4dbd88(0x177):sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x2673e1=![]){const _0x59f2ce=_0x48d848;logger['debug'](_0x59f2ce(0x2c5)+(_0x2673e1?_0x59f2ce(0x1cf):'no\x20exchange\x20reloaded')+'\x20|\x20exchange:\x20'+config[_0x59f2ce(0x279)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x2673e1)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x59f2ce(0x2e9)]!=''&&config['apiKey']!='***'){loadingProgress=0x0;if(_0x2673e1){await initExchange();const _0x4ceb97=await testAPI();if(!_0x4ceb97)return;await loadSymbols(),loadingProgress=0x1,setStableCoins(),proxyEmit(_0x59f2ce(0x2a7),emittedConfiguration()),initialPerformanceStored=![];}const _0x3a1183=await getCoins();[currentCoins,currentCoinsAll]=_0x3a1183,setBlockTransactionDetection(![]),startScheduler(),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x59f2ce(0x28f)]('Loading\x20completed'),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x59f2ce(0x17d)]==0x0&&allOpenOrders[_0x59f2ce(0x17d)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(pnlGenerationNeeded)await generatePnL();}}async function resumeBot(_0x242e23=![]){const _0x240af5=_0x48d848;logger[_0x240af5(0x28f)](_0x240af5(0x1e0)+(_0x242e23?_0x240af5(0x29a):_0x240af5(0x2c7))+_0x240af5(0x140)+config[_0x240af5(0x279)]);if(pidBalances)clearTimeout(pidBalances);if(_0x242e23){getBalances();return;}coinsLoaded=![];if(config['apiKey']!=''&&config[_0x240af5(0x2e9)]!=_0x240af5(0x204)){loadingProgress=0x1;const _0x240f5b=await getCoins();[currentCoins,currentCoinsAll]=_0x240f5b,setBlockTransactionDetection(![]),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger['debug']('Loading\x20completed'),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x240af5(0x17d)]==0x0&&allOpenOrders[_0x240af5(0x17d)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();}}async function getMarketCap(_0x5dbcd4){const _0x17479e=_0x48d848;let _0x167a1e=![];if(_0x5dbcd4)_0x167a1e=!![];const _0x504d46=_0x167a1e?_0x5dbcd4:currentCoins,_0x5e05cd=_0x504d46['map'](_0x56f0f2=>_0x56f0f2[_0x17479e(0x2c9)]);if(!config[_0x17479e(0x1ec)]||!_0x167a1e&&!config[_0x17479e(0x232)]||_0x5e05cd['length']==0x0)return;let _0x417a0c=null;try{_0x417a0c=await axios[_0x17479e(0x16b)]('https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest',{'headers':{'X-CMC_PRO_API_KEY':settings[_0x17479e(0x1ec)]},'params':{'symbol':_0x5e05cd['toString']()}});}catch(_0x2859f7){_0x417a0c=null,_0x2859f7[_0x17479e(0x1c2)]()[_0x17479e(0x2e6)](_0x17479e(0x23d))?(config[_0x17479e(0x1ec)]=![],updateConfig(),proxyEmit(_0x17479e(0x2a7),emittedConfiguration()),logHistory(_0x17479e(0x19c),_0x17479e(0x2e8))):(logHistory(_0x17479e(0x19c),_0x17479e(0x2db)+schedulerInterval/(0x3c*0x3e8)+'\x20minutes'),logger[_0x17479e(0x28f)](_0x17479e(0x1eb),_0x2859f7[_0x17479e(0x1c2)]()+'\x20-\x20'+_0x2859f7['code']));}let _0x5d02d5=!![];if(_0x417a0c){let _0x2d8cea=0x0;const _0x4cbff8=_0x417a0c['data'];_0x5e05cd['forEach'](_0x4dc400=>{const _0x4abd57=_0x17479e;if(_0x4cbff8['data'][_0x4dc400][0x0]&&_0x4cbff8[_0x4abd57(0x269)][_0x4dc400][0x0][_0x4abd57(0x20d)][_0x4abd57(0x298)][_0x4abd57(0x1a4)])_0x2d8cea+=_0x4cbff8[_0x4abd57(0x269)][_0x4dc400][0x0][_0x4abd57(0x20d)]['USD'][_0x4abd57(0x1a4)];else{if(![_0x4abd57(0x25a),_0x4abd57(0x298)]['includes'](_0x4dc400)){if(_0x167a1e)logHistory('error','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20for\x20'+_0x4dc400+_0x4abd57(0x247));else{const _0x55fb2a=config['portfolio'][_0x4abd57(0x26d)](_0x8921c6=>_0x8921c6['coin']==_0x4dc400);_0x55fb2a&&!_0x55fb2a['excluded']&&_0x55fb2a[_0x4abd57(0x233)]==-0x1&&(_0x5d02d5=![],logHistory(_0x4abd57(0x19c),'CoinMarketCap\x20data\x20could\x20not\x20be\x20updated\x20-\x20will\x20try\x20again\x20in\x201\x20hour'),logger[_0x4abd57(0x28f)]('CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20for\x20'+_0x4dc400));}}}});if(!_0x5d02d5)return;_0x5e05cd[_0x17479e(0x2b2)](_0xf2996a=>{const _0x11dafe=_0x17479e,_0x5d4aec=_0x4cbff8['data'][_0xf2996a][0x0]?_0x4cbff8[_0x11dafe(0x269)][_0xf2996a][0x0][_0x11dafe(0x20d)][_0x11dafe(0x298)][_0x11dafe(0x1a4)]:0x0;if(_0x167a1e){const _0x120f79=_0x5dbcd4[_0x11dafe(0x26d)](_0x414746=>_0x414746[_0x11dafe(0x2c9)]==_0xf2996a);_0x120f79&&(_0x120f79['marketcap']=_0x5d4aec);}else{const _0x248e59=currentCoins[_0x11dafe(0x26d)](_0x44fb11=>_0x44fb11[_0x11dafe(0x2c9)]==_0xf2996a);_0x248e59&&(_0x248e59[_0x11dafe(0x23b)]=_0x5d4aec);const _0x42f0d3=currentCoinsAll[_0x11dafe(0x26d)](_0x2e4689=>_0x2e4689[_0x11dafe(0x2c9)]==_0xf2996a);_0x42f0d3&&(_0x42f0d3[_0x11dafe(0x23b)]=_0x5d4aec);}}),!_0x167a1e&&updateTargetDistribution();}}function updateTargetDistribution(){const _0x1060ab=_0x48d848,_0x54885f=0x2;let _0x125db0=0x0,_0x3e4420=0x0,_0xdefa49=0x0,_0x18f63d=0x0,_0x5def9a=0x0;config['portfolio'][_0x1060ab(0x2b2)](_0x15a489=>{const _0x1b95d6=_0x1060ab;if(!_0x15a489[_0x1b95d6(0x1b6)]){_0xdefa49++,_0x125db0+=_0x15a489[_0x1b95d6(0x233)];if(_0x15a489[_0x1b95d6(0x233)]===-0x1){_0x125db0++;const _0x57c527=currentCoinsAll['find'](_0x1c4f05=>_0x1c4f05['coin']==_0x15a489['coin']);_0x57c527&&(_0x18f63d+=_0x57c527['marketcap'],_0x5def9a+=Math[_0x1b95d6(0x291)](_0x57c527[_0x1b95d6(0x23b)]));}if(_0x15a489['slider']!==-0x1)_0x3e4420++;}});let _0x41b3f5;const _0x34b99c=0x64-_0x125db0,_0x219db8=_0xdefa49-_0x3e4420;_0x41b3f5=_0x219db8===0x0?_0x125db0:Math['max'](0x64,_0x125db0),config[_0x1060ab(0x226)][_0x1060ab(0x2b2)](_0x3c301f=>{const _0x3acad2=_0x1060ab,_0x616a2b=currentCoinsAll[_0x3acad2(0x26d)](_0x517407=>_0x517407[_0x3acad2(0x2c9)]==_0x3c301f[_0x3acad2(0x2c9)]);_0x616a2b&&(_0x3c301f[_0x3acad2(0x23b)]=_0x616a2b[_0x3acad2(0x23b)]);if(!_0x3c301f[_0x3acad2(0x1b6)]){if(_0x41b3f5<=0x64){if(_0x3c301f['slider']===-0x1){if(_0x18f63d!==0x0&&config[_0x3acad2(0x232)]){if(_0x616a2b){if(config[_0x3acad2(0x232)]==_0x3acad2(0x23b))_0x3c301f[_0x3acad2(0x258)]=(_0x34b99c/(_0x18f63d/_0x616a2b[_0x3acad2(0x23b)]))[_0x3acad2(0x15e)](_0x54885f);else config[_0x3acad2(0x232)]=='marketcapsqrt'&&(_0x3c301f[_0x3acad2(0x258)]=(_0x34b99c/(_0x5def9a/Math[_0x3acad2(0x291)](_0x616a2b['marketcap'])))[_0x3acad2(0x15e)](_0x54885f));}}}}}}),updateConfig();}function updateConfig(){const _0x1bde82=_0x48d848;let _0x308fdb=dbConfig[_0x1bde82(0x16b)](_0x1bde82(0x1a9))[_0x1bde82(0x26d)]({'botID':botID})[_0x1bde82(0x241)]();_0x308fdb&&dbConfig['get'](_0x1bde82(0x1a9))[_0x1bde82(0x26d)]({'botID':botID})[_0x1bde82(0x225)](config)['write']();}function logMemory(){const _0x2fe4d8=_0x48d848;if(environment!=_0x2fe4d8(0x27f))return;const _0x479d9f=process['memoryUsage']()[_0x2fe4d8(0x246)]/0x400/0x400;logger['debug'](_0x2fe4d8(0x24e)+process['pid']+'\x20uses\x20'+formatResult(_0x479d9f,0x1)+_0x2fe4d8(0x296));}async function startScheduler(){const _0x2a1da3=_0x48d848,_0xd03b13=shiftedTime()[_0x2a1da3(0x22f)]();getMarketCap(),loadSymbols(),_0xd03b13==0x1&&logMemory(),await sleep(schedulerInterval),startScheduler();}async function restartBot(_0x243ebb=![]){const _0x1facd3=_0x48d848;logger['debug']('Initiating\x20bot\x20restart');if(!_0x243ebb)while(lockOrders!=ORDERS[_0x1facd3(0x2a5)]||coolingDown){await sleep(0x3e8);}process[_0x1facd3(0x200)]({'stop':'restart'},_0x296d57=>{});}async function initExchange(_0x475681=config[_0x48d848(0x279)],_0x366aee=config['apiKey'],_0x212ab3=config['apiSecret'],_0x178fef=config[_0x48d848(0x161)],_0xf4a899=config[_0x48d848(0x1d0)]){const _0x5e9385=_0x48d848;if(exchange){logger[_0x5e9385(0x28f)]('Initializing\x20exchange:\x20already\x20done');return;}logger[_0x5e9385(0x28f)](_0x5e9385(0x2a2));!supportedExchanges()[_0x5e9385(0x2e6)](_0x475681)&&(logHistory(_0x5e9385(0x19c),_0x5e9385(0x297)+_0x475681+_0x5e9385(0x143)),killBot());const _0x260fef=ccxt[_0x5e9385(0x1db)][_0x475681['toLowerCase']()];exchange=new _0x260fef({'apiKey':_0x366aee,'secret':_0x212ab3,'options':{'defaultType':_0x5e9385(0x1ff)}});if(_0x178fef)exchange[_0x5e9385(0x2e3)]=_0x178fef;if(exchange['has'][_0x5e9385(0x1d0)])exchange['setSandboxMode'](_0xf4a899);}function updateExchange(_0xa1a07b,_0x4c0b6f,_0x50a4be=null){const _0x303406=_0x48d848;exchange[_0x303406(0x2e9)]=_0xa1a07b,exchange[_0x303406(0x129)]=_0x4c0b6f,exchange[_0x303406(0x2e3)]=_0x50a4be,logger[_0x303406(0x28f)](_0x303406(0x265));}function setStableCoins(){const _0x5a4cb6=_0x48d848;let _0x32c625=config[_0x5a4cb6(0x136)]=='ETH'?_0x5a4cb6(0x15b):config[_0x5a4cb6(0x136)]==_0x5a4cb6(0x2ae)?_0x5a4cb6(0x2ae):_0x5a4cb6(0x20f),_0x48b559=allSymbols[_0x5a4cb6(0x2e6)](_0x32c625+_0x5a4cb6(0x128))?_0x5a4cb6(0x298):allSymbols[_0x5a4cb6(0x2e6)](_0x32c625+_0x5a4cb6(0x132))?_0x5a4cb6(0x18b):_0x5a4cb6(0x25a),_0x6972cb=allSymbols[_0x5a4cb6(0x2e6)](_0x32c625+_0x5a4cb6(0x207))?_0x5a4cb6(0x25a):_0x48b559;enableFiatToggle=!![],_0x48b559==_0x5a4cb6(0x25a)&&(enableFiatToggle=![],storeFiat(_0x5a4cb6(0x25a))),_0x6972cb!=_0x5a4cb6(0x25a)&&(enableFiatToggle=![],storeFiat(_0x5a4cb6(0x298))),stablecoins={'eur':{'coin':''+_0x32c625+_0x6972cb,'symbol':_0x32c625+'/'+_0x6972cb},'usd':{'coin':''+_0x32c625+_0x48b559,'symbol':_0x32c625+'/'+_0x48b559}};}async function initwsCcxt(){const _0x221e87=_0x48d848;initCycle++;const _0x6ff0af=initCycle;let _0x3e0a10=[];config[_0x221e87(0x226)][_0x221e87(0x2b2)](_0x47aa09=>{const _0x595eff=_0x221e87;if(!_0x47aa09[_0x595eff(0x1b6)]&&_0x47aa09[_0x595eff(0x2c9)]!=config[_0x595eff(0x136)])_0x3e0a10[_0x595eff(0x28c)](_0x47aa09[_0x595eff(0x26b)]);});if(!_0x3e0a10['includes'](stablecoins[_0x221e87(0x1a0)][_0x221e87(0x26b)]))_0x3e0a10[_0x221e87(0x28c)](stablecoins[_0x221e87(0x1a0)][_0x221e87(0x26b)]);if(!_0x3e0a10['includes'](stablecoins[_0x221e87(0x234)][_0x221e87(0x26b)]))_0x3e0a10[_0x221e87(0x28c)](stablecoins['usd']['symbol']);loadCoins(_0x3e0a10),_0x3e0a10=validateSymbols(_0x3e0a10);const _0x7ee15c=async _0x3a23ea=>{const _0x5b9b42=_0x221e87;let _0x23a1e5;try{const _0xdafb45=await getTickers(_0x3a23ea);Object[_0x5b9b42(0x218)](_0xdafb45)['forEach'](_0x16f7a8=>{const _0x37062f=_0x5b9b42;_0x23a1e5=_0x16f7a8[0x1][_0x37062f(0x26b)],gTicker[noslash(_0x23a1e5)]=_0x16f7a8[0x1]['last'],gChange[_0x23a1e5]=_0x16f7a8[0x1][_0x37062f(0x123)];});}catch(_0x290040){await handleError(_0x290040,_0x5b9b42(0x14c),_0x23a1e5);}},_0x76b88d=async _0x588d6d=>{const _0x5d22c4=_0x221e87;while(initCycle==_0x6ff0af){if(!botPaused)try{const _0xafe6ef=await exchange[_0x5d22c4(0x2c2)](_0x588d6d);gTicker[noslash(_0xafe6ef[0x0][_0x5d22c4(0x26b)])]=_0xafe6ef[0x0][_0x5d22c4(0x18e)];}catch(_0x167e21){if(!exchangeStopped)await handleError(_0x167e21,_0x5d22c4(0x2d3),_0x588d6d);}else await sleep(0x64);}},_0x1047e2=async _0x66ac3b=>{const _0x7ae727=_0x221e87;while(initCycle==_0x6ff0af){if(!botPaused)try{const _0xbd4176=await exchange[_0x7ae727(0x1ba)](_0x66ac3b),_0x33e959=_0xbd4176[_0x7ae727(0x1b0)]();gTicker[noslash(_0x33e959['symbol'])]=_0x33e959['price'];}catch(_0x33e67a){if(!exchangeStopped)await handleError(_0x33e67a,_0x7ae727(0x1fb),_0x66ac3b[_0x7ae727(0x1c2)]());}else await sleep(0x64);}},_0x8626f4=async _0x55a831=>{const _0x5a9579=_0x221e87;while(initCycle==_0x6ff0af){if(!botPaused){let _0x5f04af;try{await sleep(0x3c*0x3e8);const _0x151acf=await getTickers(_0x55a831);Object[_0x5a9579(0x218)](_0x151acf)[_0x5a9579(0x2b2)](_0x9b44fd=>{const _0x98643d=_0x5a9579;_0x5f04af=_0x9b44fd[0x1][_0x98643d(0x26b)],gChange[_0x5f04af]=_0x9b44fd[0x1][_0x98643d(0x123)];});}catch(_0x48a844){if(!exchangeStopped)await handleError(_0x48a844,_0x5a9579(0x22a),_0x5f04af);}}else await sleep(0x64);}},_0x3a9d01=async _0x158faa=>{const _0x384840=_0x221e87;while(initCycle==_0x6ff0af){if(!botPaused)try{const _0x351ac4=await exchange[_0x384840(0x202)](_0x158faa);initCycle==_0x6ff0af&&_0x351ac4[_0x384840(0x2b2)](_0x1fd61c=>{updateNumberCoinsCcxt(_0x1fd61c);});}catch(_0x4e65b0){if(!exchangeStopped)await handleError(_0x4e65b0,_0x384840(0x2fe));}else await sleep(0x64);}};_0x7ee15c(_0x3e0a10),_0x8626f4(_0x3e0a10),exchange['has'][_0x221e87(0x1ba)]&&!(config[_0x221e87(0x279)]==_0x221e87(0x28e)&&_0x3e0a10[_0x221e87(0x17d)]>0xa)?_0x1047e2(_0x3e0a10):_0x3e0a10[_0x221e87(0x2b2)](_0x1a9b44=>{_0x76b88d(_0x1a9b44);}),_0x3e0a10[_0x221e87(0x2b2)](_0x486437=>{_0x3a9d01(_0x486437);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x87931d){const _0x324d4c=_0x48d848;let _0x66815f={};try{if(config[_0x324d4c(0x279)]!='Cryptocom')_0x66815f=await exchange[_0x324d4c(0x2f6)](_0x87931d);else for(const _0x42ff78 of _0x87931d){const _0x294360=await exchange[_0x324d4c(0x2b3)](_0x42ff78);_0x66815f[_0x42ff78]=_0x294360;}return _0x66815f;}catch(_0x51becc){throw _0x51becc;}}function setBlockTransactionDetection(_0x110e0f){const _0xfb98d2=_0x48d848;blockTransactionDetection=_0x110e0f,logger[_0xfb98d2(0x28f)](_0xfb98d2(0x1c8)+blockTransactionDetection);}async function detectLiquidityChange(_0x56192c=0x0){const _0x407a7a=_0x48d848;transactionDetectionOngoing=!![];try{const _0x123860=await getCoins(_0x56192c),[_0x414f8b,_0x30d441]=_0x123860;let _0x1b67ab=[];currentCoins[_0x407a7a(0x2b2)](_0x1b7388=>{const _0x47ce54=_0x407a7a,_0x56f208=_0x414f8b[_0x47ce54(0x26d)](_0x49b037=>_0x49b037['coin']==_0x1b7388[_0x47ce54(0x2c9)]);if(_0x56f208){if(_0x1b7388[_0x47ce54(0x19a)]!=_0x56f208[_0x47ce54(0x19a)]){let _0x33adc9;if(_0x1b7388['coin']!=config[_0x47ce54(0x136)]){const _0x982890=gTicker[noslash(_0x1b7388[_0x47ce54(0x26b)])];_0x33adc9=_0x1b7388[_0x47ce54(0x1f1)]?0x1/_0x982890:_0x982890;}else _0x33adc9=0x1;_0x1b67ab[_0x47ce54(0x28c)]({'coin':_0x1b7388[_0x47ce54(0x2c9)],'symbol':_0x1b7388[_0x47ce54(0x26b)],'price':_0x33adc9,'number':Number(formatResult(_0x56f208[_0x47ce54(0x19a)]-_0x1b7388[_0x47ce54(0x19a)],0x8)),'basecoinvalue':_0x33adc9*(_0x56f208[_0x47ce54(0x19a)]-_0x1b7388[_0x47ce54(0x19a)])});}}});if(_0x1b67ab[_0x407a7a(0x17d)]>0x0&&!blockTransactionDetection){for(const _0x27aa04 of _0x1b67ab){if(config[_0x407a7a(0x16c)]){logger['debug'](_0x407a7a(0x18f)+_0x27aa04[_0x407a7a(0x278)]+_0x407a7a(0x1dc)+lastFees[_0x407a7a(0x293)]);if(lastFees[_0x407a7a(0x293)]==0x0||Math[_0x407a7a(0x12f)](_0x27aa04['basecoinvalue'])>lastFees[_0x407a7a(0x293)]*0x3){if(config['autoliquidity']==_0x407a7a(0x25c)){delete _0x27aa04['symbol'],delete _0x27aa04[_0x407a7a(0x278)];let _0x4465bb=[],_0x1efd0f=[...config['liquidity']]||[],_0x4af7bf=config[_0x407a7a(0x1dd)];_0x1efd0f[_0x407a7a(0x29c)]((_0x5e3317,_0x3ac293)=>_0x5e3317['date']>_0x3ac293[_0x407a7a(0x153)]?-0x1:_0x3ac293['date']>_0x5e3317[_0x407a7a(0x153)]?0x1:0x0);const _0x1765de=getDate();if(_0x1efd0f[0x0]){const _0x3e80be=fns[_0x407a7a(0x1e4)](_0x1efd0f[0x0][_0x407a7a(0x153)],_0x407a7a(0x2f8),new Date()),_0xc165a6=fns['parse'](_0x1765de,_0x407a7a(0x2f8),new Date());if(fns[_0x407a7a(0x1e5)](_0x3e80be,_0xc165a6)){_0x4465bb=_0x1efd0f[0x0][_0x407a7a(0x14f)];const _0x4ed844=_0x4465bb[_0x407a7a(0x26d)](_0x3fc08c=>_0x3fc08c['coin']==_0x27aa04['coin']);_0x4ed844?(_0x4ed844[_0x407a7a(0x19a)]+=_0x27aa04[_0x407a7a(0x19a)],_0x4ed844[_0x407a7a(0x19a)]==0x0&&(_0x4465bb=_0x4465bb[_0x407a7a(0x24a)](_0x2da5d1=>{const _0x54e123=_0x407a7a;return _0x2da5d1[_0x54e123(0x2c9)]!=_0x27aa04['coin'];}))):_0x4465bb[_0x407a7a(0x28c)](_0x27aa04);const _0x4ec279=_0x4af7bf[_0x407a7a(0x26d)](_0x5e837c=>_0x5e837c[_0x407a7a(0x153)]==_0x1765de);_0x4ec279['changes']=_0x4465bb;}else _0x4af7bf[_0x407a7a(0x28c)]({'date':_0x1765de,'changes':[_0x27aa04]});}const _0x150739=_0x4af7bf['find'](_0x4ed48f=>_0x4ed48f[_0x407a7a(0x153)]==_0x1765de);if(_0x150739){let _0x15c804=!![];_0x150739[_0x407a7a(0x14f)][_0x407a7a(0x2b2)](_0x5870d4=>{if(_0x5870d4['number']!=0x0)_0x15c804=![];}),_0x15c804&&(_0x4af7bf=_0x4af7bf[_0x407a7a(0x24a)](_0x450285=>{const _0x2688d9=_0x407a7a;return _0x450285[_0x2688d9(0x153)]!=_0x1765de;}));}let _0x186813=dbConfig[_0x407a7a(0x16b)](_0x407a7a(0x1a9))[_0x407a7a(0x26d)]({'botID':botID})[_0x407a7a(0x241)]();_0x186813&&(dbConfig[_0x407a7a(0x16b)](_0x407a7a(0x1a9))[_0x407a7a(0x26d)]({'botID':botID})['assign']({'liquidity':_0x4af7bf})[_0x407a7a(0x184)](),config[_0x407a7a(0x1dd)]=_0x4af7bf);logHistory('success',_0x407a7a(0x2ba)+Math[_0x407a7a(0x12f)](_0x27aa04['number'])+'\x20'+_0x27aa04['coin']+'\x20'+(_0x27aa04['number']>0x0?'added':_0x407a7a(0x14b))+_0x407a7a(0x186)),proxyEmit(_0x407a7a(0x2a7),emittedConfiguration());const _0x1aa936=getNormalizedPerformance();emitPerformance(_0x1aa936),getStartingBalances(_0x1aa936),logger[_0x407a7a(0x28f)]('Portfolio\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated');}else config[_0x407a7a(0x16c)]==_0x407a7a(0x21c)&&(config['headless']?(await storeHeadless({'headless':![]}),logHistory(_0x407a7a(0x1c0),_0x407a7a(0x2ba)+Math[_0x407a7a(0x12f)](_0x27aa04[_0x407a7a(0x19a)])+'\x20'+_0x27aa04[_0x407a7a(0x2c9)]+'\x20'+(_0x27aa04['number']>0x0?_0x407a7a(0x20b):'removed')+_0x407a7a(0x160))):logger['debug'](_0x407a7a(0x2ba)+Math[_0x407a7a(0x12f)](_0x27aa04[_0x407a7a(0x19a)])+'\x20'+_0x27aa04['coin']+'\x20'+(_0x27aa04['number']>0x0?_0x407a7a(0x20b):_0x407a7a(0x14b))+'\x20-\x20bot\x20already\x20running\x20in\x20manual\x20mode'));}else logger[_0x407a7a(0x28f)]('Fee\x20discount\x20refund\x20detected:\x20'+Math['abs'](_0x27aa04[_0x407a7a(0x19a)])+'\x20'+_0x27aa04['coin']+'\x20'+(_0x27aa04[_0x407a7a(0x19a)]>0x0?_0x407a7a(0x20b):'removed'));}else logger[_0x407a7a(0x28f)]('Portfolio\x20change\x20detected:\x20'+Math['abs'](_0x27aa04[_0x407a7a(0x19a)])+'\x20'+_0x27aa04[_0x407a7a(0x2c9)]+'\x20'+(_0x27aa04[_0x407a7a(0x19a)]>0x0?_0x407a7a(0x20b):_0x407a7a(0x14b))+_0x407a7a(0x193));}currentCoins=_0x414f8b,currentCoinsAll=_0x30d441;}}catch(_0x3580dc){if(!exchangeStopped)await handleError(_0x3580dc,_0x407a7a(0x206));}transactionDetectionOngoing=![];}async function watchTransactions(){await sleep(0x14*0x3e8);while(!![]){!botPaused&&!blockTransactionDetection&&coinsLoaded?(detectLiquidityChange(),await sleep(watchTransactionsInterval)):await sleep(0x3e8);}}async function loadSymbols(){const _0x41ed49=_0x48d848;try{markets=await exchange[_0x41ed49(0x24f)](!![]),allSymbols=[],Object[_0x41ed49(0x218)](markets)[_0x41ed49(0x2b2)](_0x2132c2=>{const _0x428be5=_0x41ed49;_0x2132c2[0x1][_0x428be5(0x280)]&&_0x2132c2[0x1]['spot']&&allSymbols['push'](_0x2132c2[0x0]);});}catch(_0x36ac17){markets?logger['debug'](_0x41ed49(0x156)+_0x36ac17['toString']()):(loading[_0x41ed49(0x199)]=!![],_0x36ac17[_0x41ed49(0x1c2)]()[_0x41ed49(0x2b4)]()['includes'](_0x41ed49(0x159))||_0x36ac17['toString']()[_0x41ed49(0x2b4)]()[_0x41ed49(0x2e6)](_0x41ed49(0x217))?(logHistory(_0x41ed49(0x19c),'Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)'),loading[_0x41ed49(0x19c)]=_0x41ed49(0x240)):handleErrorNoStop(_0x36ac17,_0x41ed49(0x281),!![]),logHistory(_0x41ed49(0x19c),_0x41ed49(0x1bd)),logHistory(_0x41ed49(0x19c),_0x41ed49(0x1b8)+loadCoinsRetryInterval/0xea60+_0x41ed49(0x2b1)),logger[_0x41ed49(0x28f)](_0x41ed49(0x1eb),_0x36ac17),emitLoadingProgress(),botPaused=!![],await sleep(loadCoinsRetryInterval),restartBot());}}function validateSymbols(_0x46a2e0){let _0x85f3e7=[];return _0x46a2e0['forEach'](_0x6d42d8=>{const _0x25699c=_0x5854;!allSymbols[_0x25699c(0x2e6)](_0x6d42d8)?(logHistory(_0x25699c(0x19c),_0x25699c(0x1d9)+_0x6d42d8+_0x25699c(0x198)),loading[_0x25699c(0x2e4)]=!![],emitLoadingProgress()):_0x85f3e7['push'](_0x6d42d8);}),_0x85f3e7;}async function initclient(){const _0x2c7c56=_0x48d848;proxyEmit('configuration',emittedConfiguration()),proxyEmit('exchanges',supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x2c7c56(0x24c),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x173a62=getNormalizedPerformance();emitPerformance(_0x173a62),getStartingBalances(_0x173a62);}async function toggleBotMode(){const _0x5bde4a=_0x48d848;let _0x2a9d4a=dbConfig[_0x5bde4a(0x16b)]('bot')[_0x5bde4a(0x26d)]({'botID':botID})[_0x5bde4a(0x241)]();if(_0x2a9d4a){const _0x438cd0=!_0x2a9d4a[_0x5bde4a(0x2f3)];dbConfig['get']('bot')[_0x5bde4a(0x26d)]({'botID':botID})[_0x5bde4a(0x225)]({'headless':_0x438cd0})[_0x5bde4a(0x184)](),config['headless']=_0x438cd0,proxyEmit('configuration',emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x3a2473=_0x48d848;process[_0x3a2473(0x200)]({'updatebotmanager':!![]},_0x4cfbe5=>{}),logger[_0x3a2473(0x28f)](_0x3a2473(0x257)+config[_0x3a2473(0x2f3)]);}async function loadCoins(_0x2824ff){const _0x3137e8=_0x48d848;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x2ce58b,_0x2f067d=0x0,_0xfe0724=0x0;_0x2824ff['forEach'](_0x424ba3=>{const _0x56f3b6=_0x5854;loading[_0x56f3b6(0x17e)][_0x56f3b6(0x28c)](_0x424ba3);}),loadingCanceled=![];let _0x1d6e0d=![];while(_0x2ce58b!=_0x2824ff[_0x3137e8(0x17d)]+maxLoadingProgress){_0x2ce58b=loadingProgress,_0x2824ff[_0x3137e8(0x2b2)](_0x4b3b40=>{const _0x3f3c9c=_0x3137e8;if(gTicker[noslash(_0x4b3b40)]){loading['remainingSymbols']=loading[_0x3f3c9c(0x17e)][_0x3f3c9c(0x24a)](_0x545c50=>_0x545c50!=_0x4b3b40);if(!watchedSymbols[_0x3f3c9c(0x2e6)](_0x4b3b40))watchedSymbols[_0x3f3c9c(0x28c)](_0x4b3b40);_0x2ce58b++;}}),loading['progress']=Math[_0x3137e8(0x1ca)](_0x2ce58b/(_0x2824ff['length']+maxLoadingProgress)*0x64);loading[_0x3137e8(0x2a1)]!=0x64&&(_0xfe0724>0x1e*0x5&&(loading[_0x3137e8(0x2e4)]=!![],emitLoadingProgress()),_0xfe0724>0x78*0x5&&!_0x1d6e0d&&(_0x1d6e0d=!![],logHistory('error','Failed\x20to\x20load\x20coin\x20data\x20for\x20'+loading['remainingSymbols']['join'](',\x20')+'\x20-\x20bot\x20not\x20started'),logHistory('error','Pausing\x20for\x20'+loadCoinsRetryInterval/0xea60+_0x3137e8(0x2b1)),loadingCanceled=!![],await sleep(loadCoinsRetryInterval),restartBot()));if(loadingCanceled){loading[_0x3137e8(0x199)]=!![],emitLoadingProgress();break;}else _0x2f067d!=loading[_0x3137e8(0x2a1)]&&(_0x2f067d=loading[_0x3137e8(0x2a1)],emitLoadingProgress()),_0xfe0724++,await sleep(0xc8);}_0x2ce58b==_0x2824ff[_0x3137e8(0x17d)]+maxLoadingProgress&&(coinsLoaded=!![],process[_0x3137e8(0x200)]({'status':_0x3137e8(0x141),'live':'running'},_0x477d9d=>{}),_0x1d6e0d&&logHistory(_0x3137e8(0x1c0),_0x3137e8(0x20e)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x17995e=_0x48d848;proxyEmit(_0x17995e(0x2a7),{...emittedConfiguration(),'configstate':_0x17995e(0x188)});}function emitLoadingProgress(){const _0x5519ad=_0x48d848;proxyEmit(_0x5519ad(0x29d),loading);}async function getFiat(){const _0xb0bb6f=_0x48d848;let _0x14accd=gTicker[stablecoins[_0xb0bb6f(0x1a0)][_0xb0bb6f(0x2c9)]],_0x38e7c9=gTicker[stablecoins['usd'][_0xb0bb6f(0x2c9)]];return{'eur':Number(_0x14accd),'usd':Number(_0x38e7c9)};}function capitalize(_0x332988){const _0x1b9f3e=_0x48d848;return _0x332988[_0x1b9f3e(0x277)](0x0,0x1)['toUpperCase']()+_0x332988['substring'](0x1);}function supportedExchanges(){const _0x567e9c=_0x48d848,_0x17b056=['ws',_0x567e9c(0x2f6),_0x567e9c(0x2b3),'watchTrades','watchOrders',_0x567e9c(0x133),_0x567e9c(0x1ce),_0x567e9c(0x1ae),_0x567e9c(0x295)];let _0x904ecf=[],_0x42f00c=[],_0x3e7881=ccxt[_0x567e9c(0x1db)][_0x567e9c(0x262)];_0x3e7881[_0x567e9c(0x2b2)](_0x323478=>{const _0x24f31d=_0x567e9c;try{const _0x14783b=new ccxt['pro'][_0x323478]();_0x42f00c[_0x24f31d(0x28c)](_0x14783b);}catch(_0x5aa76a){}}),_0x42f00c[_0x567e9c(0x2b2)](_0x31ae5a=>{const _0x20848e=_0x567e9c;let _0x2d3dc5=0x0;_0x17b056[_0x20848e(0x2b2)](_0x160122=>{const _0x35d060=_0x20848e;_0x160122 in _0x31ae5a[_0x35d060(0x2e0)]&&_0x31ae5a['has'][_0x160122]&&_0x2d3dc5++;}),_0x2d3dc5==_0x17b056[_0x20848e(0x17d)]&&(!excludedExchanges[_0x20848e(0x2e6)](_0x31ae5a['id'])&&_0x904ecf['push'](capitalize(_0x31ae5a['id'])));});let _0x200488=[];return _0x3e7881[_0x567e9c(0x2b2)](_0x3ae690=>{const _0x339669=_0x567e9c;_0x3ae690=capitalize(_0x3ae690);if(!_0x904ecf[_0x339669(0x2e6)](_0x3ae690))_0x200488['push'](_0x3ae690);}),_0x904ecf;}function setStartDatePerformance(){const _0x4fdff2=_0x48d848;if(config&&config[_0x4fdff2(0x1dd)][0x0][_0x4fdff2(0x14f)]['length']!=0x0){const _0x3d5dc4=config['liquidity'][0x0]['changes'];dbPerformance[_0x4fdff2(0x16b)](_0x4fdff2(0x269))[_0x4fdff2(0x26d)]({'date':config[_0x4fdff2(0x2f9)]})['assign']({'coins':_0x3d5dc4})[_0x4fdff2(0x184)]();}}function calculatePnL(_0x56914b,_0x287ecb,_0x167dcc,_0x2759fb,_0x286fe9,_0x46872c){const _0x1f97e7=_0x48d848;!_0x56914b[_0x1f97e7(0x2e6)]('/'+config['basecoin'])&&(_0x167dcc=_0x167dcc=='buy'?_0x1f97e7(0x243):'buy');!_0x46872c[_0x287ecb]&&(_0x46872c[_0x287ecb]={'number':0x0,'sells':0x0,'buys':0x0,'breakeven':0x0,'realizedPnL':0x0});let _0x2659c5=0x0,_0x232ef8,_0x53c76b;if(_0x167dcc==_0x1f97e7(0x1f3))_0x53c76b=_0x46872c[_0x287ecb][_0x1f97e7(0x19a)]*_0x46872c[_0x287ecb][_0x1f97e7(0x22c)]+_0x286fe9*_0x2759fb,_0x46872c[_0x287ecb][_0x1f97e7(0x19a)]+=_0x2759fb,_0x46872c[_0x287ecb]['breakeven']=_0x46872c[_0x287ecb][_0x1f97e7(0x19a)]!=0x0?_0x53c76b/_0x46872c[_0x287ecb]['number']:0x0,_0x46872c[_0x287ecb][_0x1f97e7(0x13e)]++;else _0x167dcc==_0x1f97e7(0x243)&&(_0x232ef8=Math[_0x1f97e7(0x15d)](_0x46872c[_0x287ecb]['number'],_0x2759fb),_0x2659c5=(_0x286fe9-_0x46872c[_0x287ecb][_0x1f97e7(0x22c)])*_0x232ef8,_0x53c76b=Math['max'](_0x46872c[_0x287ecb][_0x1f97e7(0x19a)]*_0x46872c[_0x287ecb][_0x1f97e7(0x22c)]-_0x232ef8*_0x46872c[_0x287ecb][_0x1f97e7(0x22c)],0x0),_0x46872c[_0x287ecb][_0x1f97e7(0x19a)]-=_0x232ef8,_0x46872c[_0x287ecb]['breakeven']=_0x46872c[_0x287ecb][_0x1f97e7(0x19a)]!=0x0?_0x53c76b/_0x46872c[_0x287ecb][_0x1f97e7(0x19a)]:0x0,_0x46872c[_0x287ecb][_0x1f97e7(0x1f7)]+=_0x2659c5,_0x46872c[_0x287ecb][_0x1f97e7(0x1f4)]++);return _0x2659c5;}async function generatePnL(){const _0x5c87d1=_0x48d848;pnlGenerationNeeded=![],logger['debug']('Generating\x20PnL\x20data');const _0x1dd856=dbLogs[_0x5c87d1(0x16b)](_0x5c87d1(0x287))['value']();let _0x4d3e01={},_0x17ea61=0x0,_0x4220bc=0x0,_0x9c704=config[_0x5c87d1(0x2f9)];const _0x9e3c09=fns[_0x5c87d1(0x1e4)](_0x9c704,_0x5c87d1(0x2f8),new Date()),_0x4d2a5e=new Date();let _0x3614d1=0x0;for(let _0x516859=_0x9e3c09;!fns[_0x5c87d1(0x187)](_0x4d2a5e,_0x516859);_0x516859=fns[_0x5c87d1(0x237)](_0x516859,0x1)){const _0x562787=fns['format'](_0x516859,_0x5c87d1(0x2f8));while(_0x17ea61<_0x1dd856[_0x5c87d1(0x17d)]){const _0x1c92cf=new Date(_0x1dd856[_0x17ea61]['time']);if(fns['isBefore'](_0x1c92cf,_0x516859))_0x17ea61++;else{if(_0x1dd856[_0x17ea61][_0x5c87d1(0x1a8)]['includes'](_0x562787)){const _0x2e7095=_0x1dd856[_0x17ea61];if(_0x2e7095[_0x5c87d1(0x1ad)]===_0x5c87d1(0x168)&&(_0x2e7095[_0x5c87d1(0x220)][_0x5c87d1(0x2e6)]('Order\x20filled')||_0x2e7095[_0x5c87d1(0x220)][_0x5c87d1(0x2e6)](_0x5c87d1(0x189)))){const _0x20db4c=_0x2e7095[_0x5c87d1(0x220)][_0x5c87d1(0x19b)](/([A-Z]+\/[A-Z]+) (sell|buy) #([\d.]+) @([\d.]+)/);if(_0x20db4c){const [,_0x5f37ef,_0x4111b1,_0x45e0cb,_0x11528f]=_0x20db4c,_0x4323c5=_0x5f37ef[_0x5c87d1(0x2e6)]('/'+config[_0x5c87d1(0x136)])?_0x5f37ef['split']('/')[0x0]:_0x5f37ef[_0x5c87d1(0x203)]('/')[0x1],_0x1f3e39=calculatePnL(_0x5f37ef,_0x4323c5,_0x4111b1,parseFloat(_0x45e0cb),parseFloat(_0x11528f),_0x4d3e01);_0x4220bc+=_0x1f3e39;}}_0x17ea61++;}else break;}}dbPerformance[_0x5c87d1(0x16b)](_0x5c87d1(0x269))['find']({'date':_0x562787})[_0x5c87d1(0x225)]({'pnl':_0x4220bc})[_0x5c87d1(0x184)]();}dbCoinResults[_0x5c87d1(0x2ff)](_0x5c87d1(0x2b5),_0x4d3e01)['write'](),logger[_0x5c87d1(0x28f)](_0x5c87d1(0x1d2));const _0x535a17=getNormalizedPerformance();emitPerformance(_0x535a17);}async function updatePnL(_0x3f9d72){const _0x27074e=_0x48d848,{symbol:_0x5ee99b,coin:_0x5d879b,amount:_0x52a210,price:_0x2e5bb2,side:_0x4f2269,reverse:_0x5c327b}=_0x3f9d72;let _0x2e864a=dbCoinResults[_0x27074e(0x16b)](_0x27074e(0x2b5))['value']();const _0x1261f4=calculatePnL(_0x5ee99b,_0x5d879b,_0x4f2269,_0x52a210,_0x2e5bb2,_0x2e864a);dbCoinResults[_0x27074e(0x2ff)](_0x27074e(0x2b5),_0x2e864a)[_0x27074e(0x184)]();const _0x22e3d4=getTimeStamp()['split']('\x20')[0x0];let _0x12ad01=dbPerformance[_0x27074e(0x16b)](_0x27074e(0x269))[_0x27074e(0x26d)]({'date':_0x22e3d4})[_0x27074e(0x241)]();_0x12ad01?(_0x12ad01[_0x27074e(0x2ac)]+=_0x1261f4,dbPerformance['get'](_0x27074e(0x269))[_0x27074e(0x26d)]({'date':_0x22e3d4})['assign'](_0x12ad01)[_0x27074e(0x184)]()):await storePerformance();const _0x5d5ca4=getNormalizedPerformance();emitPerformance(_0x5d5ca4);}async function validate24hChanges(){const _0x1d6465=_0x48d848;for(const _0x232e01 of currentCoins){if(_0x232e01[_0x1d6465(0x2c9)]!=config[_0x1d6465(0x136)]){let _0x2edcef;_0x232e01[_0x1d6465(0x1f1)]?_0x2edcef=formatResult((0x1/(gChange[_0x232e01[_0x1d6465(0x26b)]]/0x64+0x1)-0x1)*0x64,0x3):_0x2edcef=gChange[_0x232e01['symbol']],_0x2edcef<config[_0x1d6465(0x197)]&&(logHistory('error',_0x232e01[_0x1d6465(0x2c9)]+_0x1d6465(0x1da)+_0x2edcef+'%'),logHistory('error',_0x1d6465(0x2d8)),logHistory(_0x1d6465(0x19c),'Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again'),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x3d73be,_0x11a3d9){const _0x48f0d7=_0x48d848;if(!_0x3d73be)return!![];const _0x5763c5=_0x11a3d9[_0x48f0d7(0x203)]('.'),_0x544d75=_0x3d73be[_0x48f0d7(0x203)]('.');for(var _0x15c5fa=0x0;_0x15c5fa<_0x544d75[_0x48f0d7(0x17d)];_0x15c5fa++){const _0x3d2991=~~_0x544d75[_0x15c5fa],_0x3d2278=~~_0x5763c5[_0x15c5fa];if(_0x3d2991<_0x3d2278)return!![];if(_0x3d2991>_0x3d2278)return![];}return![];}async function oneTimeMigration(){const _0x2b3091=_0x48d848;let _0x318a4c=dbLogs[_0x2b3091(0x16b)](_0x2b3091(0x2fa))[_0x2b3091(0x241)]();if(isOlderVersion(_0x318a4c,'2.3.5')){let _0x12ff98=[];const _0x107c63=dbLogs['get'](_0x2b3091(0x287))[_0x2b3091(0x241)]();_0x107c63[_0x2b3091(0x2b2)](_0x77904a=>{const _0x2a086f=_0x2b3091;_0x12ff98[_0x2a086f(0x28c)]({'time':_0x77904a[_0x2a086f(0x1a8)],'type':_0x77904a[_0x2a086f(0x1ad)],'event':_0x77904a['event']});}),dbLogs['get'](_0x2b3091(0x287))['assign'](_0x12ff98)[_0x2b3091(0x184)]();}let _0x18fd53=dbConfig[_0x2b3091(0x16b)](_0x2b3091(0x2fa))['value']();if(isOlderVersion(_0x18fd53,'2.3.5')){let _0x303de0=dbConfig[_0x2b3091(0x16b)]('bot')[_0x2b3091(0x26d)]({'botID':botID})['value']();if(_0x303de0){let _0x115a0b=[];_0x303de0['portfolio'][_0x2b3091(0x2b2)](_0x4600b9=>{const _0x17a08b=_0x2b3091;_0x115a0b[_0x17a08b(0x28c)]({'coin':_0x4600b9[_0x17a08b(0x2c9)],'number':_0x4600b9[_0x17a08b(0x24d)],'price':_0x4600b9[_0x17a08b(0x2b7)]}),delete _0x4600b9['startnumber'],delete _0x4600b9[_0x17a08b(0x2b7)];});if(_0x115a0b[_0x2b3091(0x17d)]!==0x0)fs[_0x2b3091(0x27d)](configbackuppath+('starting-balance-'+botID+_0x2b3091(0x17f)),JSON[_0x2b3091(0x2c3)](_0x115a0b,null,0x4),function(_0x47448e){if(_0x47448e){}});const _0x3a051d=(_0x5d1a77,_0x40c286)=>{const _0x4a7248=_0x2b3091;let _0x57bf77=[];_0x40c286[_0x4a7248(0x2b2)](_0x7a5f6d=>{const _0x18e5a9=_0x4a7248,_0x58807c=_0x5d1a77['find'](_0xdbb033=>_0xdbb033[_0x18e5a9(0x2c9)]==_0x7a5f6d[_0x18e5a9(0x2c9)]);if(!_0x58807c)_0x57bf77[_0x18e5a9(0x28c)](_0x7a5f6d);});let _0x29bc17=[];return _0x5d1a77[_0x4a7248(0x2b2)](_0x150f85=>{const _0x137d3d=_0x4a7248,_0x571889=_0x40c286[_0x137d3d(0x26d)](_0x41d1e5=>_0x41d1e5[_0x137d3d(0x2c9)]==_0x150f85['coin']);if(!_0x571889||_0x571889[_0x137d3d(0x19a)]==0x0&&_0x150f85[_0x137d3d(0x19a)]!=0x0)_0x29bc17[_0x137d3d(0x28c)](_0x150f85);}),{'missingDay1':_0x57bf77,'notInDay2':_0x29bc17};},_0x17c09e=dbPerformance[_0x2b3091(0x16b)]('data')[_0x2b3091(0x179)]()['value']();if(_0x17c09e[_0x2b3091(0x17d)]>0x1){const {missingDay1:_0x555833,notInDay2:_0x332db2}=_0x3a051d(_0x115a0b,_0x17c09e[0x1][_0x2b3091(0x2b5)]);_0x115a0b=[..._0x115a0b,..._0x555833],_0x332db2[_0x2b3091(0x2b2)](_0x5a5eda=>{const _0x2e8ed1=_0x2b3091;let _0x469bea=_0x115a0b[_0x2e8ed1(0x213)](_0x274ed7=>_0x274ed7[_0x2e8ed1(0x2c9)]==_0x5a5eda['coin']);_0x469bea!=-0x1&&_0x115a0b['splice'](_0x469bea,0x1);});}_0x115a0b[_0x2b3091(0x29c)]((_0x4f071f,_0x57fe77)=>_0x4f071f['coin']>_0x57fe77[_0x2b3091(0x2c9)]?0x1:_0x57fe77[_0x2b3091(0x2c9)]>_0x4f071f[_0x2b3091(0x2c9)]?-0x1:0x0);let _0x1b0df4=[{'date':_0x303de0[_0x2b3091(0x2f9)],'changes':_0x115a0b}];_0x17c09e[_0x2b3091(0x17d)]>0x2&&_0x17c09e[_0x2b3091(0x2b2)]((_0x3ac40c,_0x5e41bf)=>{const _0x23547e=_0x2b3091;if(_0x5e41bf>0x0&&_0x5e41bf<_0x17c09e['length']-0x1){const {missingDay1:_0x3be3ba,notInDay2:_0x2db937}=_0x3a051d(_0x17c09e[_0x5e41bf][_0x23547e(0x2b5)],_0x17c09e[_0x5e41bf+0x1][_0x23547e(0x2b5)]);_0x115a0b=[],(_0x3be3ba['length']!=0x0||_0x2db937[_0x23547e(0x17d)]!=0x0)&&(_0x3be3ba['length']!=0x0&&_0x115a0b[_0x23547e(0x28c)](..._0x3be3ba),_0x2db937[_0x23547e(0x17d)]!=0x0&&(_0x2db937[_0x23547e(0x2b2)](_0x42198c=>{const _0x5966e0=_0x23547e;_0x42198c[_0x5966e0(0x19a)]=-_0x42198c['number'];}),_0x115a0b['push'](..._0x2db937)),_0x115a0b[_0x23547e(0x29c)]((_0x39d354,_0x4aa8d1)=>_0x39d354[_0x23547e(0x2c9)]>_0x4aa8d1[_0x23547e(0x2c9)]?0x1:_0x4aa8d1['coin']>_0x39d354[_0x23547e(0x2c9)]?-0x1:0x0),_0x1b0df4['push']({'date':_0x17c09e[_0x5e41bf+0x1][_0x23547e(0x153)],'changes':_0x115a0b}));}}),dbConfig['get'](_0x2b3091(0x1a9))[_0x2b3091(0x26d)]({'botID':botID})[_0x2b3091(0x225)]({..._0x303de0,'liquidity':_0x1b0df4})['write']();}}if(isOlderVersion(_0x18fd53,_0x2b3091(0x1e1))){let _0x52028d=dbConfig[_0x2b3091(0x16b)]('bot')[_0x2b3091(0x26d)]({'botID':botID})[_0x2b3091(0x241)]();if(_0x52028d){const _0xf114d9=_0x52028d['exchange'],_0x2b0bd4=_0xf114d9?capitalize(_0xf114d9):'Binance';dbConfig[_0x2b3091(0x16b)](_0x2b3091(0x1a9))['find']({'botID':botID})['assign']({'exchange':_0x2b0bd4})['write']();}}if(isOlderVersion(_0x18fd53,_0x2b3091(0x1fd))){let _0x74b33f=dbConfig[_0x2b3091(0x16b)](_0x2b3091(0x1a9))[_0x2b3091(0x26d)]({'botID':botID})['value']();if(_0x74b33f){const _0x358e75=_0x74b33f[_0x2b3091(0x232)],_0x1d0509=_0x358e75?_0x2b3091(0x23b):![];dbConfig[_0x2b3091(0x16b)](_0x2b3091(0x1a9))[_0x2b3091(0x26d)]({'botID':botID})['assign']({'marketcapEnabled':_0x1d0509})[_0x2b3091(0x184)]();}}if(isOlderVersion(_0x18fd53,_0x2b3091(0x1ef))){let _0x5e7d7b=dbConfig[_0x2b3091(0x16b)]('bot')['find']({'botID':botID})[_0x2b3091(0x241)]();if(_0x5e7d7b){const _0x5d6fbb=_0x5e7d7b[_0x2b3091(0x16c)],_0x32d754=_0x5d6fbb?_0x2b3091(0x25c):![];dbConfig[_0x2b3091(0x16b)]('bot')[_0x2b3091(0x26d)]({'botID':botID})[_0x2b3091(0x225)]({'autoliquidity':_0x32d754})['write']();}}let _0x382d9f=dbPerformance['get'](_0x2b3091(0x2fa))[_0x2b3091(0x241)]();isOlderVersion(_0x382d9f,_0x2b3091(0x2aa))&&setStartDatePerformance();let _0x12b652=dbCoinResults[_0x2b3091(0x16b)]('version')['value']();if(isOlderVersion(_0x12b652,_0x2b3091(0x1a6))){let _0x93a5db=dbCoinResults['get'](_0x2b3091(0x2b5))[_0x2b3091(0x241)]();if(_0x93a5db['length']!=0x0)pnlGenerationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x333933=_0x48d848;dbConfig[_0x333933(0x2ff)](_0x333933(0x2fa),serverversion)[_0x333933(0x184)](),dbPerformance[_0x333933(0x2ff)]('version',serverversion)['write'](),dbLogs[_0x333933(0x2ff)]('version',serverversion)[_0x333933(0x184)](),dbCoinResults[_0x333933(0x2ff)](_0x333933(0x2fa),serverversion)[_0x333933(0x184)]();}function getConfiguration(_0x1b4003){const _0x3fc06f=_0x48d848;let _0x4ff65d=dbConfig['get'](_0x3fc06f(0x1a9))[_0x3fc06f(0x26d)]({'botID':_0x1b4003})[_0x3fc06f(0x241)]();if(_0x4ff65d){let _0x122bab=![];typeof _0x4ff65d[_0x3fc06f(0x260)]==_0x3fc06f(0x1ab)&&(_0x4ff65d={..._0x4ff65d,'threshold':Number(_0x4ff65d[_0x3fc06f(0x260)])},_0x122bab=!![]),_0x4ff65d[_0x3fc06f(0x197)]==undefined&&(_0x4ff65d={..._0x4ff65d,'change24h':-0x14},_0x122bab=!![]),_0x4ff65d[_0x3fc06f(0x127)]==undefined&&(_0x4ff65d={..._0x4ff65d,'fiat':'USD'},_0x122bab=!![]),_0x4ff65d[_0x3fc06f(0x2cc)]==undefined&&(_0x4ff65d={..._0x4ff65d,'onepagemode':settings[_0x3fc06f(0x2cc)]},_0x122bab=!![]),_0x4ff65d[_0x3fc06f(0x1a7)]==undefined&&(_0x4ff65d={..._0x4ff65d,'colorscheme':_0x3fc06f(0x22b)},_0x122bab=!![]),_0x4ff65d[_0x3fc06f(0x16c)]==undefined&&(_0x4ff65d={..._0x4ff65d,'autoliquidity':_0x3fc06f(0x25c)},_0x122bab=!![]),_0x4ff65d['marketcapApi']==undefined&&(_0x4ff65d={..._0x4ff65d,'marketcapApi':settings[_0x3fc06f(0x1ec)]?!![]:![]},_0x122bab=!![]),_0x4ff65d[_0x3fc06f(0x232)]==undefined&&(_0x4ff65d={..._0x4ff65d,'marketcapEnabled':![]},_0x122bab=!![]),_0x4ff65d[_0x3fc06f(0x1d0)]==undefined&&(_0x4ff65d={..._0x4ff65d,'sandbox':![]},_0x122bab=!![]),_0x122bab&&(_0x4ff65d={'botID':_0x4ff65d[_0x3fc06f(0x13a)],'exchange':_0x4ff65d[_0x3fc06f(0x279)],'apiKey':_0x4ff65d[_0x3fc06f(0x2e9)],'apiSecret':_0x4ff65d[_0x3fc06f(0x253)],'apiPassword':_0x4ff65d[_0x3fc06f(0x161)],'basecoin':_0x4ff65d['basecoin'],'botname':_0x4ff65d[_0x3fc06f(0x2ee)],'showname':_0x4ff65d[_0x3fc06f(0x26a)],'threshold':_0x4ff65d['threshold'],'ordertype':_0x4ff65d['ordertype'],'timeout':_0x4ff65d['timeout'],'fiat':_0x4ff65d[_0x3fc06f(0x127)],'startdate':_0x4ff65d[_0x3fc06f(0x2f9)],'recreate':_0x4ff65d[_0x3fc06f(0x21a)],'timeshift':_0x4ff65d[_0x3fc06f(0x300)],'onepagemode':_0x4ff65d['onepagemode'],'headless':_0x4ff65d[_0x3fc06f(0x2f3)],'cooldown':_0x4ff65d[_0x3fc06f(0x2a9)],'change24h':_0x4ff65d['change24h'],'emojibuy':_0x4ff65d['emojibuy'],'emojisell':_0x4ff65d[_0x3fc06f(0x1d3)],'colorscheme':_0x4ff65d[_0x3fc06f(0x1a7)],'marketcapApi':_0x4ff65d[_0x3fc06f(0x1ec)],'marketcapEnabled':_0x4ff65d[_0x3fc06f(0x232)],'sandbox':_0x4ff65d[_0x3fc06f(0x1d0)],'portfolio':_0x4ff65d['portfolio'],'autoliquidity':_0x4ff65d[_0x3fc06f(0x16c)],'liquidity':_0x4ff65d[_0x3fc06f(0x1dd)],'openOrders':_0x4ff65d[_0x3fc06f(0x2dd)]},dbConfig[_0x3fc06f(0x16b)](_0x3fc06f(0x1a9))[_0x3fc06f(0x2cf)]()[_0x3fc06f(0x184)](),dbConfig[_0x3fc06f(0x16b)](_0x3fc06f(0x1a9))['push'](_0x4ff65d)[_0x3fc06f(0x184)]());}else _0x4ff65d={'botID':_0x1b4003,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x3fc06f(0x2de)+_0x1b4003,'showname':![],'threshold':0x3,'ordertype':_0x3fc06f(0x2e7),'timeout':0x14,'fiat':'USD','startdate':getDate(),'recreate':![],'timeshift':settings[_0x3fc06f(0x300)],'onepagemode':settings[_0x3fc06f(0x2cc)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x3fc06f(0x22b),'marketcapApi':settings['marketcapApi']?!![]:![],'marketcapEnabled':![],'sandbox':![],'portfolio':[],'autoliquidity':_0x3fc06f(0x25c),'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x4ff65d;}function emittedConfiguration(){const _0x3f98ee=_0x48d848;let _0x14ae9a;if(config[_0x3f98ee(0x2e9)]=='')_0x14ae9a={...config,'configstate':_0x3f98ee(0x145)};else config[_0x3f98ee(0x2e9)]==_0x3f98ee(0x204)?_0x14ae9a={...config,'configstate':_0x3f98ee(0x251)}:(_0x14ae9a={...config,'apiKey':_0x3f98ee(0x254),'apiSecret':_0x3f98ee(0x254)},config[_0x3f98ee(0x161)]&&(_0x14ae9a[_0x3f98ee(0x161)]='************'));return _0x14ae9a[_0x3f98ee(0x1b2)]=enableFiatToggle,_0x14ae9a;}function getSettings(){const _0x59f8ed=_0x48d848;return dbSettings['get'](_0x59f8ed(0x151))[_0x59f8ed(0x241)]();}function getSecure(){const _0xd25895=_0x48d848;return dbSecure[_0xd25895(0x16b)](_0xd25895(0x170))[_0xd25895(0x241)]()||{};}function updateTimeshift(_0x126f55){const _0x5a22e9=_0x48d848;let _0x2fca1a=dbConfig[_0x5a22e9(0x16b)](_0x5a22e9(0x1a9))[_0x5a22e9(0x26d)]({'botID':botID})[_0x5a22e9(0x241)]();_0x2fca1a&&dbConfig[_0x5a22e9(0x16b)](_0x5a22e9(0x1a9))[_0x5a22e9(0x26d)]({'botID':botID})[_0x5a22e9(0x225)]({'timeshift':_0x126f55})[_0x5a22e9(0x184)](),config[_0x5a22e9(0x300)]=_0x126f55,proxyEmit(_0x5a22e9(0x2a7),emittedConfiguration());}function updateOnepagemode(_0x4f33a0){const _0x16acb6=_0x48d848;let _0x33c5ac=dbConfig[_0x16acb6(0x16b)](_0x16acb6(0x1a9))['find']({'botID':botID})[_0x16acb6(0x241)]();_0x33c5ac&&dbConfig['get'](_0x16acb6(0x1a9))[_0x16acb6(0x26d)]({'botID':botID})[_0x16acb6(0x225)]({'onepagemode':_0x4f33a0})[_0x16acb6(0x184)](),config[_0x16acb6(0x2cc)]=_0x4f33a0,proxyEmit(_0x16acb6(0x2a7),emittedConfiguration());}function updateMarketcapApi(_0x209886){const _0x56f12f=_0x48d848,_0x42a48b=_0x209886?!![]:![];let _0x76c6e2=dbConfig[_0x56f12f(0x16b)](_0x56f12f(0x1a9))[_0x56f12f(0x26d)]({'botID':botID})['value']();_0x76c6e2&&dbConfig[_0x56f12f(0x16b)]('bot')[_0x56f12f(0x26d)]({'botID':botID})[_0x56f12f(0x225)]({'marketcapApi':_0x42a48b})['write'](),config['marketcapApi']=_0x42a48b,getMarketCap(),proxyEmit(_0x56f12f(0x2a7),emittedConfiguration());}async function storeConfiguration(_0x3bf0de){const _0x2d6e2c=_0x48d848;logger[_0x2d6e2c(0x28f)]('Saving\x20configuration');_0x3bf0de[_0x2d6e2c(0x181)]&&delete _0x3bf0de['configstate'];if(pidBalances)clearTimeout(pidBalances);setBlockTransactionDetection(!![]);let _0x131e83=![],_0x36e612=![],_0x54b576=[];_0x3bf0de[_0x2d6e2c(0x226)][_0x2d6e2c(0x2b2)](_0x2e30b9=>{const _0xccae89=_0x2d6e2c;if(!_0x2e30b9[_0xccae89(0x1b6)]&&_0x2e30b9[_0xccae89(0x2c9)]!=_0x3bf0de['basecoin'])_0x54b576['push'](_0x2e30b9[_0xccae89(0x26b)]);}),_0x54b576[_0x2d6e2c(0x2b2)](_0x4f45c9=>{const _0x5aa1e9=_0x2d6e2c,_0x44dfbb=currentCoins['find'](_0x517ce9=>_0x517ce9[_0x5aa1e9(0x26b)]==_0x4f45c9);!_0x44dfbb&&(_0x131e83=!![]);}),currentCoins[_0x2d6e2c(0x2b2)](_0x319500=>{const _0x2d5e30=_0x2d6e2c;if(_0x319500['coin']!=config[_0x2d5e30(0x136)]){const _0x455010=_0x54b576['find'](_0x21cc87=>_0x21cc87==_0x319500[_0x2d5e30(0x26b)]);!_0x455010&&(_0x131e83=!![]);}}),_0x3bf0de[_0x2d6e2c(0x226)][_0x2d6e2c(0x2b2)](_0x52b2f5=>{const _0x4b8d81=_0x2d6e2c,_0x44ee7f=config['portfolio'][_0x4b8d81(0x26d)](_0xc29c26=>_0xc29c26[_0x4b8d81(0x2c9)]==_0x52b2f5[_0x4b8d81(0x2c9)]);if(_0x44ee7f&&_0x52b2f5[_0x4b8d81(0x137)]!=_0x44ee7f[_0x4b8d81(0x137)])_0x36e612=!![];});let _0xd63c11=dbConfig[_0x2d6e2c(0x16b)]('bot')['find']({'botID':botID})[_0x2d6e2c(0x241)]();_0x3bf0de={..._0x3bf0de,'apiKey':decryptRSA(secure[_0x2d6e2c(0x23c)],_0x3bf0de[_0x2d6e2c(0x2e9)]),'apiSecret':decryptRSA(secure[_0x2d6e2c(0x23c)],_0x3bf0de[_0x2d6e2c(0x253)])};_0x3bf0de[_0x2d6e2c(0x161)]&&(_0x3bf0de['apiPassword']=decryptRSA(secure[_0x2d6e2c(0x23c)],_0x3bf0de['apiPassword']));let _0x137896=![];if(_0xd63c11){_0x3bf0de[_0x2d6e2c(0x2e9)]==_0x2d6e2c(0x254)?_0x3bf0de[_0x2d6e2c(0x2e9)]=config['apiKey']:_0x137896=!![];_0x3bf0de[_0x2d6e2c(0x253)]==_0x2d6e2c(0x254)?_0x3bf0de[_0x2d6e2c(0x253)]=config[_0x2d6e2c(0x253)]:_0x137896=!![];if(_0x3bf0de[_0x2d6e2c(0x161)]==_0x2d6e2c(0x254))_0x3bf0de[_0x2d6e2c(0x161)]=config[_0x2d6e2c(0x161)];else{if(_0x3bf0de[_0x2d6e2c(0x161)])_0x137896=!![];}dbConfig[_0x2d6e2c(0x16b)]('bot')['find']({'botID':botID})[_0x2d6e2c(0x225)](_0x3bf0de)['write']();}else dbConfig[_0x2d6e2c(0x16b)]('bot')[_0x2d6e2c(0x28c)](_0x3bf0de)[_0x2d6e2c(0x184)](),_0x137896=!![],process[_0x2d6e2c(0x200)]({'status':_0x2d6e2c(0x141),'live':'running'},_0x3ab5bf=>{});process[_0x2d6e2c(0x200)]({'botname':_0x3bf0de[_0x2d6e2c(0x2ee)]},_0xf1ded8=>{}),config={..._0x3bf0de},updateBotManager(),proxyEmit(_0x2d6e2c(0x21e)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x137896)await reset(!![]);else _0x131e83||_0x36e612?await reset(![]):getBalances();setBlockTransactionDetection(![]);}async function storeHeadless(_0x463f48){const _0x21867f=_0x48d848,_0x1065f5={...config,'headless':_0x463f48['headless']};let _0x2d0b47=dbConfig[_0x21867f(0x16b)](_0x21867f(0x1a9))[_0x21867f(0x26d)]({'botID':botID})[_0x21867f(0x241)]();_0x2d0b47&&dbConfig[_0x21867f(0x16b)](_0x21867f(0x1a9))[_0x21867f(0x26d)]({'botID':botID})['assign'](_0x1065f5)[_0x21867f(0x184)](),config={..._0x1065f5},updateBotManager(),proxyEmit(_0x21867f(0x2a7),emittedConfiguration());}async function storeFiat(_0x2d595c){const _0x2aeaa0=_0x48d848,_0x4b6760={...config,'fiat':_0x2d595c};let _0x550ab1=dbConfig['get'](_0x2aeaa0(0x1a9))[_0x2aeaa0(0x26d)]({'botID':botID})['value']();_0x550ab1&&dbConfig[_0x2aeaa0(0x16b)]('bot')[_0x2aeaa0(0x26d)]({'botID':botID})['assign'](_0x4b6760)[_0x2aeaa0(0x184)](),config={..._0x4b6760},proxyEmit(_0x2aeaa0(0x2a7),emittedConfiguration());}function resetHistory(){const _0x15056d=_0x48d848;logger[_0x15056d(0x2d7)](_0x15056d(0x135));try{if(fs[_0x15056d(0x25b)](path[_0x15056d(0x150)](configpath,_0x15056d(0x125)+botID+'-events.json')))fs[_0x15056d(0x134)](path[_0x15056d(0x150)](configpath,_0x15056d(0x125)+botID+_0x15056d(0x1df)));if(fs[_0x15056d(0x25b)](path[_0x15056d(0x150)](configpath,_0x15056d(0x125)+botID+_0x15056d(0x1c4))))fs[_0x15056d(0x134)](path[_0x15056d(0x150)](configpath,_0x15056d(0x125)+botID+_0x15056d(0x1c4)));if(fs[_0x15056d(0x25b)](path[_0x15056d(0x150)](configpath,_0x15056d(0x125)+botID+_0x15056d(0x208))))fs[_0x15056d(0x134)](path[_0x15056d(0x150)](configpath,_0x15056d(0x125)+botID+_0x15056d(0x208)));}catch(_0x54ee95){if(_0x54ee95)logger['full'](_0x15056d(0x276),_0x54ee95);}const _0x2daf7f=getDate();let _0x12a65a=[];currentCoins['forEach'](_0x46f10a=>{const _0x271462=_0x15056d;_0x12a65a['push']({'coin':_0x46f10a[_0x271462(0x2c9)],'number':_0x46f10a[_0x271462(0x19a)],'price':_0x46f10a[_0x271462(0x131)]});});let _0x49e63a=dbConfig[_0x15056d(0x16b)]('bot')['find']({'botID':botID})[_0x15056d(0x241)]();_0x49e63a&&(dbConfig['get']('bot')[_0x15056d(0x26d)]({'botID':botID})[_0x15056d(0x225)]({'liquidity':[{'date':_0x2daf7f,'changes':_0x12a65a}]})[_0x15056d(0x184)](),config['liquidity']=[]),restartBot(!![]);}function noslash(_0x2f764c){const _0x20def8=_0x48d848;return _0x2f764c[_0x20def8(0x212)]('/','');}function updateHighestFee(_0x41a9f0){const _0x4ac780=_0x48d848;if(_0x41a9f0[_0x4ac780(0x1f1)]){let _0x27d1a6={'filled':_0x41a9f0[_0x4ac780(0x283)]*_0x41a9f0['price'],'amount':_0x41a9f0['filled']*_0x41a9f0[_0x4ac780(0x18e)],'side':_0x41a9f0[_0x4ac780(0x235)]==_0x4ac780(0x243)?'buy':'sell','price':0x1/_0x41a9f0['price']};_0x41a9f0={..._0x41a9f0,..._0x27d1a6};}const _0x3acfca=defaultFee*_0x41a9f0[_0x4ac780(0x283)]*_0x41a9f0[_0x4ac780(0x18e)];lastFees[_0x4ac780(0x15a)][_0x4ac780(0x17d)]===0x14&&lastFees[_0x4ac780(0x15a)][_0x4ac780(0x21f)](),lastFees[_0x4ac780(0x15a)][_0x4ac780(0x28c)](_0x3acfca),lastFees[_0x4ac780(0x293)]=Math[_0x4ac780(0x2d4)](...lastFees[_0x4ac780(0x15a)]);}async function updateNumberCoinsCcxt(_0x18328b){const _0x52de0b=_0x48d848;logger[_0x52de0b(0x28f)](_0x52de0b(0x1fe)+_0x18328b['symbol']+_0x52de0b(0x224)+_0x18328b[_0x52de0b(0x2b8)]+_0x52de0b(0x224)+_0x18328b['filled']+_0x52de0b(0x1c6)+_0x18328b['amount']+_0x52de0b(0x224)+_0x18328b['id']);let _0x22b9ba=_0x18328b[_0x52de0b(0x2b8)],_0x299513=![];currentCoins[_0x52de0b(0x2b2)](_0x4bb7cd=>{const _0x928f36=_0x52de0b;_0x4bb7cd[_0x928f36(0x26b)]==_0x18328b[_0x928f36(0x26b)]&&(_0x299513=!![]);});if(!_0x299513)return;const _0x22844c=currentCoins[_0x52de0b(0x26d)](_0x58d3e9=>_0x58d3e9[_0x52de0b(0x26b)]==_0x18328b[_0x52de0b(0x26b)]),_0x2654b9=_0x22844c['coin'],_0x34eceb=_0x137e5b=>{const _0x1e9b3a=_0x52de0b,_0x5b5ca0=currentCoins[_0x1e9b3a(0x26d)](_0x10e412=>_0x10e412[_0x1e9b3a(0x26b)]==_0x18328b[_0x1e9b3a(0x26b)]);if(_0x5b5ca0)_0x5b5ca0[_0x1e9b3a(0x1e7)]=_0x137e5b;};let _0x3ec1c4=![];for(const _0x3eb5d4 of lastOrders){const _0x198e23=0x64,_0x14fc97=0x1388;let _0x57f6af=0x0;while(!_0x3eb5d4[_0x52de0b(0x23f)]&&_0x57f6af*_0x198e23<_0x14fc97){_0x57f6af++,await sleep(_0x198e23);}if(_0x57f6af>0x0)logger[_0x52de0b(0x28f)](_0x52de0b(0x195)+_0x57f6af*_0x198e23/0x3e8+_0x52de0b(0x1b9));_0x3eb5d4[_0x52de0b(0x23f)]==_0x18328b['id']&&(_0x3ec1c4=!![]);}if(_0x22b9ba==_0x52de0b(0x15c)){_0x34eceb(_0x52de0b(0x15c));if(_0x18328b[_0x52de0b(0x283)]>0x0&&_0x18328b[_0x52de0b(0x283)]<_0x18328b[_0x52de0b(0x164)]){if(_0x3ec1c4){setBlockTransactionDetection(!![]),logger['debug']('1\x20-\x20partially\x20FILLED\x20('+_0x18328b['filled']+_0x52de0b(0x299)+_0x18328b['id']);const _0x5949ad=await getCoins(balanceUpdateDelay,undefined,undefined,_0x2654b9);[currentCoins,currentCoinsAll]=_0x5949ad,setBlockTransactionDetection(![]);}else logger[_0x52de0b(0x28f)](_0x52de0b(0x2ed)+_0x18328b[_0x52de0b(0x283)]+_0x52de0b(0x24b)+_0x18328b['id']),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay);}}else{if(_0x22b9ba=='canceled'){_0x34eceb(_0x52de0b(0x1e2)),lastOrders=lastOrders[_0x52de0b(0x24a)](_0x2381b5=>_0x2381b5[_0x52de0b(0x26b)]!=_0x18328b['symbol']);const _0x163a11=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x163a11,setBlockTransactionDetection(![]),await getOpenOrders(),handleOpenOrders();}else{if(_0x22b9ba==_0x52de0b(0x155)){if(lastOrders)for(const _0xf9db53 of lastOrders){if(_0xf9db53[_0x52de0b(0x23f)]==_0x18328b['id']){logger[_0x52de0b(0x28f)](_0x52de0b(0x17c)+_0x18328b['id']),_0x3ec1c4=!![];if(_0xf9db53[_0x52de0b(0x283)]==0x0){setBlockTransactionDetection(!![]),logger[_0x52de0b(0x28f)](_0x52de0b(0x1cc)+_0x18328b['id']);if(_0x18328b[_0x52de0b(0x2dc)])_0xf9db53[_0x52de0b(0x18e)]=_0x18328b[_0x52de0b(0x2dc)];else{if(_0x18328b['price'])_0xf9db53['price']=_0x18328b[_0x52de0b(0x18e)];else{}}_0xf9db53[_0x52de0b(0x283)]=_0x18328b['filled'],updateHighestFee(_0xf9db53);const _0xad0ef9=await getCoins(balanceUpdateDelay,undefined,undefined,_0x2654b9);[currentCoins,currentCoinsAll]=_0xad0ef9,setBlockTransactionDetection(![]),await validateOrders(),_0x34eceb(_0x52de0b(0x283)),_0xf9db53[_0x52de0b(0x1c1)]={'currency':_0x18328b[_0x52de0b(0x1c1)]?_0x18328b[_0x52de0b(0x1c1)][_0x52de0b(0x2a3)]:null,'cost':_0x18328b['fee']?_0x18328b[_0x52de0b(0x1c1)][_0x52de0b(0x2be)]:0x0},await updatePnL(_0xf9db53);}}}!_0x3ec1c4&&(logger[_0x52de0b(0x28f)]('1\x20-\x20FILLED\x20unknown\x20order:\x20'+_0x18328b['id']),_0x34eceb(_0x52de0b(0x283)),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay),await updateOpenOrders(),handleOpenOrders());}}}if(lastBalances){let _0x26053c=JSON[_0x52de0b(0x1e4)](lastBalances[_0x52de0b(0x226)]);const _0x53adf9=_0x26053c['find'](_0x1e43aa=>_0x1e43aa['symbol']==_0x18328b[_0x52de0b(0x26b)]);if(_0x53adf9){if(_0x22b9ba=='open')_0x53adf9[_0x52de0b(0x1e7)]=_0x53adf9[_0x52de0b(0x1e7)]==_0x52de0b(0x283)?_0x52de0b(0x283):'open';else{if(_0x22b9ba==_0x52de0b(0x1e2))_0x53adf9['orderstatus']=_0x53adf9[_0x52de0b(0x1e7)]==_0x52de0b(0x283)?'filled':'canceled';else _0x22b9ba==_0x52de0b(0x155)&&(_0x53adf9[_0x52de0b(0x1e7)]='filled');}}lastBalances={...lastBalances,'portfolio':JSON[_0x52de0b(0x2c3)](_0x26053c)},proxyEmit(_0x52de0b(0x24c),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x3dc70a=_0x48d848;await getOpenOrders();let _0x32ec9a=![];currentCoins[_0x3dc70a(0x2b2)](_0x43e9fa=>{const _0x1e5ed3=_0x3dc70a;_0x32ec9a=allOpenOrders[_0x1e5ed3(0x26d)](_0x208417=>_0x208417[_0x1e5ed3(0x26b)]==_0x43e9fa[_0x1e5ed3(0x26b)]),_0x43e9fa[_0x1e5ed3(0x1e7)]=_0x32ec9a?_0x1e5ed3(0x15c):_0x1e5ed3(0x292);});}async function fetchBalance(_0x39a434=!![]){const _0x203ab5=_0x48d848;let _0x3488fe,_0x5e3b53,_0x2d5202,_0x2925e6=0x0;while(!_0x5e3b53&&_0x2925e6<maxRetries){try{return _0x3488fe=await exchange[_0x203ab5(0x295)](),_0x5e3b53=_0x3488fe[_0x203ab5(0x169)],_0x5e3b53;}catch(_0x4f015a){_0x2d5202=_0x4f015a,_0x2925e6++,await sleep(retryInterval);}}return!_0x39a434?handleErrorNoStop(_0x2d5202,'fetchBalance()'):await handleError(_0x2d5202,_0x203ab5(0x259)),![];}async function getCoins(_0x4e4928=0x0,_0x255231=!![],_0x1b16b4=config[_0x48d848(0x136)],_0x1eccd2){const _0x102053=_0x48d848;let _0x4565b5=[],_0x4d56d7=[],_0x18900d=[],_0x266852;if(_0x4e4928)await sleep(_0x4e4928);if(botPaused)return[currentCoins,currentCoinsAll];let _0x2b835a=![],_0x1ba567=0x0,_0x3f0b44,_0xc1290;_0x1eccd2&&(_0x3f0b44=currentCoins[_0x102053(0x26d)](_0x3005f5=>_0x3005f5['coin']==_0x1eccd2),_0x3f0b44&&(_0xc1290=_0x3f0b44['prevnumber'],delete _0x3f0b44[_0x102053(0x152)]));while(!_0x2b835a){_0x266852=await fetchBalance(_0x255231);if(_0x266852){if(_0x1eccd2){if(_0x266852[_0x1eccd2]!=_0xc1290)logger['debug'](_0x102053(0x16f)+_0x1eccd2+':\x20'+_0x266852[_0x1eccd2]+'\x20('+_0xc1290+')'),_0x2b835a=!![];else{logger[_0x102053(0x28f)]('Invalid\x20balance\x20for\x20'+_0x1eccd2+':\x20'+_0x266852[_0x1eccd2]+'\x20('+_0xc1290+')'),_0x1ba567++;if(_0x1ba567<balanceUpdateRetries)await sleep(balanceUpdateDelay);else{logger[_0x102053(0x28f)](_0x102053(0x176)+_0x1ba567+_0x102053(0x1a5));break;}}}else break;}else return[currentCoins,currentCoinsAll];}for(const [_0x5dbb15,_0x42b23a]of Object[_0x102053(0x218)](_0x266852)){_0x18900d[_0x102053(0x28c)](_0x5dbb15);}config[_0x102053(0x226)]['forEach'](_0xc9aabe=>{const _0x21070d=_0x102053;!_0x18900d[_0x21070d(0x2e6)](_0xc9aabe[_0x21070d(0x2c9)])&&(_0x266852[_0xc9aabe['coin']]=0x0);});if(_0x1b16b4=='')for(const [_0x4da0da,_0x41a364]of Object[_0x102053(0x218)](_0x266852)){_0x41a364!=0x0&&_0x4565b5[_0x102053(0x28c)]({'coin':_0x4da0da});}else for(const [_0x586c36,_0x3b36a8]of Object[_0x102053(0x218)](_0x266852)){const _0x3b458c=config[_0x102053(0x226)][_0x102053(0x26d)](_0x5a5d50=>_0x5a5d50[_0x102053(0x2c9)]==_0x586c36),_0x198a73=_0x586c36+'/'+_0x1b16b4,_0x5ae278=_0x1b16b4+'/'+_0x586c36,_0x26036e=currentCoins[_0x102053(0x26d)](_0x12cfe9=>_0x12cfe9[_0x102053(0x2c9)]==_0x586c36);if((_0x3b36a8!=0x0||_0x3b458c)&&(allSymbols['includes'](_0x198a73)||_0x586c36==_0x1b16b4))_0x26036e?_0x4565b5[_0x102053(0x28c)]({..._0x26036e,'number':Math[_0x102053(0x2d4)](_0x3b36a8+(_0x3b458c&&_0x3b458c[_0x102053(0x137)]||0x0),0x0)}):_0x4565b5[_0x102053(0x28c)]({'coin':_0x586c36,'symbol':_0x198a73,'reverse':![],'number':Math[_0x102053(0x2d4)](_0x3b36a8+(_0x3b458c&&_0x3b458c[_0x102053(0x137)]||0x0),0x0),'orderstatus':'none'});else{if((_0x3b36a8!=0x0||_0x3b458c)&&allSymbols[_0x102053(0x2e6)](_0x5ae278))_0x26036e?_0x4565b5[_0x102053(0x28c)]({..._0x26036e,'number':Math[_0x102053(0x2d4)](_0x3b36a8+(_0x3b458c&&_0x3b458c[_0x102053(0x137)]||0x0),0x0)}):_0x4565b5[_0x102053(0x28c)]({'coin':_0x586c36,'symbol':_0x5ae278,'reverse':!![],'number':Math[_0x102053(0x2d4)](_0x3b36a8+(_0x3b458c&&_0x3b458c[_0x102053(0x137)]||0x0),0x0),'orderstatus':_0x102053(0x292)});else _0x3b458c&&_0x4565b5['push']({'coin':_0x3b458c[_0x102053(0x2c9)],'symbol':_0x3b458c[_0x102053(0x26b)],'reverse':_0x3b458c[_0x102053(0x1f1)],'number':0x0,'orderstatus':_0x102053(0x292)});}}return _0x4565b5[_0x102053(0x29c)]((_0x385831,_0x3bfa60)=>_0x385831[_0x102053(0x230)]<_0x3bfa60['delta']?0x1:_0x3bfa60[_0x102053(0x230)]<_0x385831[_0x102053(0x230)]?-0x1:0x0),_0x4d56d7=cloneDeep(_0x4565b5),_0x4565b5=_0x4565b5[_0x102053(0x24a)](_0x2f8e57=>{const _0x313477=_0x102053,_0x32c037=config['portfolio'][_0x313477(0x26d)](_0x52bbec=>_0x52bbec[_0x313477(0x2c9)]==_0x2f8e57[_0x313477(0x2c9)]);return _0x32c037&&!_0x32c037[_0x313477(0x1b6)];}),[_0x4565b5,_0x4d56d7];}async function getOpenOrders(){const _0xf1c151=_0x48d848;let _0x3d5301;allOpenOrders=[];try{for(const _0x8f5509 of config['portfolio']){!_0x8f5509[_0xf1c151(0x1b6)]&&_0x8f5509['coin']!=config['basecoin']&&(_0x3d5301=await exchange[_0xf1c151(0x1ae)](_0x8f5509[_0xf1c151(0x26b)]),_0x3d5301[_0xf1c151(0x17d)]>0x0&&allOpenOrders[_0xf1c151(0x28c)](_0x3d5301[0x0]));}}catch(_0xa285bc){await handleError(_0xa285bc,_0xf1c151(0x16d));}}async function handleOpenOrders(_0x1df976=0x0){const _0x2147f7=_0x48d848;allOpenOrders[_0x2147f7(0x17d)]==0x0&&lockOrders==ORDERS[_0x2147f7(0x1c5)]&&allOrdersPlaced&&(_0x1df976==0x0?(logger[_0x2147f7(0x28f)](_0x2147f7(0x12b)),_0x1df976++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x2147f7(0x28f)](_0x2147f7(0x2eb)),validateOrders(_0x2147f7(0x139))));}async function testAPI(){const _0x23dd6a=_0x48d848;try{return await exchange[_0x23dd6a(0x295)](),!![];}catch(_0x2bfce9){return loading[_0x23dd6a(0x199)]=!![],_0x2bfce9[_0x23dd6a(0x1c2)]()['toLowerCase']()[_0x23dd6a(0x2e6)](_0x23dd6a(0x159))||_0x2bfce9['toString']()[_0x23dd6a(0x2b4)]()[_0x23dd6a(0x2e6)](_0x23dd6a(0x217))?(logHistory(_0x23dd6a(0x19c),_0x23dd6a(0x236)),loading['error']=_0x23dd6a(0x240)):(handleErrorNoStop(_0x2bfce9,_0x23dd6a(0x263)),logger[_0x23dd6a(0x28f)](_0x23dd6a(0x1eb),_0x2bfce9)),emitLoadingProgress(),botPaused=!![],![];}}async function testNewAPI(_0x2ec1f3){const _0x4a92c2=_0x48d848;logger[_0x4a92c2(0x28f)](_0x4a92c2(0x26f));const _0x27252e=ccxt['pro'][_0x2ec1f3[_0x4a92c2(0x279)][_0x4a92c2(0x2b4)]()],_0x1abf14=new _0x27252e({'apiKey':_0x2ec1f3['apiKey'],'secret':_0x2ec1f3[_0x4a92c2(0x253)],'options':{'defaultType':'spot'}});if(_0x2ec1f3[_0x4a92c2(0x161)])_0x1abf14['password']=_0x2ec1f3[_0x4a92c2(0x161)];if(_0x1abf14[_0x4a92c2(0x2e0)][_0x4a92c2(0x1d0)])_0x1abf14[_0x4a92c2(0x1de)](_0x2ec1f3[_0x4a92c2(0x1d0)]);try{await _0x1abf14['fetchBalance'](),botPaused=![];}catch(_0x1f41d8){logger[_0x4a92c2(0x28f)]('Error\x20in\x20testNewAPI():\x20'+_0x1f41d8[_0x4a92c2(0x1c2)]());throw _0x1f41d8;}}function cloneDeep(_0x516a9f){const _0xed6821=_0x48d848;return JSON[_0xed6821(0x1e4)](JSON[_0xed6821(0x2c3)](_0x516a9f));}async function getPortfolio(_0x45e52c){const _0x5eca32=_0x48d848;let _0x132c79=[],_0x53cb07=[],_0x11f967=[],_0x53641f;_0x45e52c['apiKey']=decryptRSA(secure['privateKey'],_0x45e52c['apiKey']),_0x45e52c['apiSecret']=decryptRSA(secure[_0x5eca32(0x23c)],_0x45e52c[_0x5eca32(0x253)]);if(_0x45e52c['apiPassword'])_0x45e52c[_0x5eca32(0x161)]=decryptRSA(secure['privateKey'],_0x45e52c[_0x5eca32(0x161)]);if(_0x45e52c[_0x5eca32(0x2e9)]!=='************'||_0x45e52c['apiSecret']!==_0x5eca32(0x254)||_0x45e52c['apiPassword']&&_0x45e52c[_0x5eca32(0x161)]!==_0x5eca32(0x254)){if(config[_0x5eca32(0x279)]){if(_0x45e52c[_0x5eca32(0x2e9)]==_0x5eca32(0x254))_0x45e52c['apiKey']=config[_0x5eca32(0x2e9)];if(_0x45e52c[_0x5eca32(0x253)]==_0x5eca32(0x254))_0x45e52c['apiSecret']=config[_0x5eca32(0x253)];if(_0x45e52c[_0x5eca32(0x161)]==_0x5eca32(0x254))_0x45e52c[_0x5eca32(0x161)]=config[_0x5eca32(0x161)];}try{if(_0x45e52c[_0x5eca32(0x2c0)])await testNewAPI(_0x45e52c);}catch(_0x39e1ab){if(_0x39e1ab[_0x5eca32(0x1c2)]()['includes'](_0x5eca32(0x12d))){logHistory('error',_0x5eca32(0x19d)),logHistory(_0x5eca32(0x19c),'Error\x20details:\x20'+_0x39e1ab['toString']()),proxyEmit(_0x5eca32(0x165),![]);return;}else{if(_0x39e1ab[_0x5eca32(0x1c2)]()['includes']('PermissionDenied')){logHistory(_0x5eca32(0x19c),_0x5eca32(0x2da)),logHistory(_0x5eca32(0x19c),_0x5eca32(0x191)+_0x39e1ab['toString']()),proxyEmit(_0x5eca32(0x165),![]);return;}else{logHistory('error',_0x5eca32(0x1c9)+_0x39e1ab['toString']()),logger[_0x5eca32(0x28f)](_0x5eca32(0x1eb),_0x39e1ab),proxyEmit('portfolio1',![]);return;}}}exchange?updateExchange(_0x45e52c[_0x5eca32(0x2e9)],_0x45e52c['apiSecret'],_0x45e52c['apiPassword']):await initExchange(_0x45e52c[_0x5eca32(0x279)],_0x45e52c[_0x5eca32(0x2e9)],_0x45e52c['apiSecret'],_0x45e52c[_0x5eca32(0x161)],_0x45e52c[_0x5eca32(0x1d0)]);await loadSymbols();const _0x21d1ed=await getCoins(0x0,![],_0x45e52c['basecoin']);_0x11f967=cloneDeep(_0x21d1ed[0x1]);}else{const _0x1f099a=await getCoins();_0x11f967=cloneDeep(_0x1f099a[0x1]);}if(_0x45e52c[_0x5eca32(0x136)]=='')proxyEmit(_0x5eca32(0x165),!![]),proxyEmit(_0x5eca32(0x18a),_0x11f967);else{_0x11f967['forEach'](_0x301d6b=>{const _0x2f51d2=_0x5eca32;if(_0x301d6b[_0x2f51d2(0x2c9)]!=_0x45e52c[_0x2f51d2(0x136)]&&allSymbols[_0x2f51d2(0x2e6)](_0x301d6b[_0x2f51d2(0x26b)]))_0x132c79['push'](_0x301d6b[_0x2f51d2(0x26b)]);});if(_0x132c79[_0x5eca32(0x17d)]==0x0)logHistory(_0x5eca32(0x19c),'Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot');else{try{_0x53cb07=await getTickers(_0x132c79);}catch(_0x31b031){logHistory(_0x5eca32(0x19c),_0x5eca32(0x264)),logger[_0x5eca32(0x28f)](_0x5eca32(0x1eb),_0x31b031),proxyEmit('portfolio1',![]);return;}_0x11f967['forEach'](_0x396d10=>{const _0x5c0f84=_0x5eca32;_0x396d10[_0x5c0f84(0x2c9)]!=_0x45e52c['basecoin']?_0x53cb07[_0x396d10[_0x5c0f84(0x26b)]]?_0x53cb07[_0x396d10[_0x5c0f84(0x26b)]]['last']?_0x53641f=_0x396d10['reverse']?0x1/_0x53cb07[_0x396d10[_0x5c0f84(0x26b)]][_0x5c0f84(0x131)]:_0x53cb07[_0x396d10[_0x5c0f84(0x26b)]]['last']:_0x53641f=0x0:_0x53641f=0x0:_0x53641f=0x1,_0x396d10[_0x5c0f84(0x18e)]=formatResult(_0x53641f,0x8);}),await getMarketCap(_0x11f967),proxyEmit(_0x5eca32(0x165),!![]),proxyEmit(_0x5eca32(0x18a),_0x11f967);}}}function truncateTradeAmount(_0xaf9125,_0x4e657f){const _0x21b6d9=_0x48d848;let _0x3f27a4=0x0;try{_0x3f27a4=exchange[_0x21b6d9(0x266)](_0xaf9125,_0x4e657f);}catch(_0x438739){}return _0x3f27a4;}function checkMinimums(_0x15a9df){const _0x3bf0f6=_0x48d848;let _0x2b714f=!![];const _0x751acd=!_0x15a9df[_0x3bf0f6(0x1f1)]?markets[_0x15a9df['symbol']]['limits'][_0x3bf0f6(0x164)][_0x3bf0f6(0x15d)]:markets[_0x15a9df[_0x3bf0f6(0x26b)]][_0x3bf0f6(0x2ef)][_0x3bf0f6(0x2be)][_0x3bf0f6(0x15d)],_0x36f6f5=!_0x15a9df[_0x3bf0f6(0x1f1)]?markets[_0x15a9df[_0x3bf0f6(0x26b)]][_0x3bf0f6(0x2ef)][_0x3bf0f6(0x2be)]['min']:markets[_0x15a9df['symbol']][_0x3bf0f6(0x2ef)]['amount'][_0x3bf0f6(0x15d)],_0x4cd7a5=truncateTradeAmount(_0x15a9df[_0x3bf0f6(0x26b)],_0x15a9df[_0x3bf0f6(0x138)]);_0x15a9df['trade']=_0x4cd7a5;if(Math['abs'](_0x4cd7a5)<_0x751acd)_0x2b714f=![];if(Math[_0x3bf0f6(0x12f)](_0x4cd7a5)*_0x15a9df[_0x3bf0f6(0x131)]<_0x36f6f5)_0x2b714f=![];if(_0x15a9df[_0x3bf0f6(0x235)]==_0x3bf0f6(0x243)){let _0x423ff4=config[_0x3bf0f6(0x226)][_0x3bf0f6(0x26d)](_0x336f7b=>_0x336f7b[_0x3bf0f6(0x2c9)]==_0x15a9df[_0x3bf0f6(0x2c9)]);if(_0x423ff4[_0x3bf0f6(0x137)]>0x0){if(Math[_0x3bf0f6(0x12f)](_0x4cd7a5)>_0x15a9df['number']-_0x423ff4[_0x3bf0f6(0x137)])_0x2b714f=![];}else{if(Math['abs'](_0x4cd7a5)>_0x15a9df[_0x3bf0f6(0x19a)])_0x2b714f=![];}}if(_0x15a9df[_0x3bf0f6(0x235)]=='buy'){let _0x1cdb8a=config[_0x3bf0f6(0x226)]['find'](_0x254815=>_0x254815[_0x3bf0f6(0x2c9)]==config[_0x3bf0f6(0x136)]),_0x1db4cb=currentCoins[_0x3bf0f6(0x26d)](_0x1c3c99=>_0x1c3c99['coin']==config[_0x3bf0f6(0x136)]);if(_0x1cdb8a[_0x3bf0f6(0x137)]>0x0){if(Math[_0x3bf0f6(0x12f)](_0x4cd7a5)*_0x15a9df['last']>_0x1db4cb[_0x3bf0f6(0x19a)]-_0x1cdb8a[_0x3bf0f6(0x137)])_0x2b714f=![];}else{if(Math[_0x3bf0f6(0x12f)](_0x4cd7a5)*_0x15a9df[_0x3bf0f6(0x131)]>_0x1db4cb['number'])_0x2b714f=![];}}return _0x2b714f;}async function getBalances(_0x43f759=!![]){const _0x4396f0=_0x48d848;if(botPaused)return;let _0x101869=0x0,_0x41c487;const _0x4623b0=config[_0x4396f0(0x260)];if(config['headless']&&config[_0x4396f0(0x197)]<0x0)await validate24hChanges();currentCoins[_0x4396f0(0x2b2)](_0x3bf109=>{const _0xbfe1c1=_0x4396f0;if(_0x3bf109['coin']!=config[_0xbfe1c1(0x136)]){let _0x40e89f=gTicker[noslash(_0x3bf109[_0xbfe1c1(0x26b)])];_0x41c487=_0x3bf109[_0xbfe1c1(0x1f1)]?0x1/_0x40e89f:_0x40e89f;}else _0x41c487=0x1;let _0x352a54=_0x3bf109[_0xbfe1c1(0x19a)]*_0x41c487;_0x101869+=_0x352a54,_0x3bf109['last']=formatResult(Number(_0x41c487),0x8),_0x3bf109['value']=_0x352a54;}),currentCoins[_0x4396f0(0x2b2)](_0x495ebb=>{const _0x486b66=_0x4396f0;let _0x4bbc00=config[_0x486b66(0x226)]['find'](_0x5d9da5=>_0x5d9da5['coin']==_0x495ebb['coin']),_0x1cd40a=Number(_0x4bbc00['distribution']),_0x4024d4=_0x495ebb[_0x486b66(0x241)]/_0x101869*0x64,_0x58d3ef=_0x1cd40a*_0x101869/0x64/_0x495ebb[_0x486b66(0x131)]-_0x495ebb[_0x486b66(0x19a)];_0x495ebb['distribution']=formatResult(_0x4024d4,0x3),_0x495ebb[_0x486b66(0x25d)]=formatResult(_0x1cd40a,0x3),_0x495ebb[_0x486b66(0x138)]=formatResult(_0x58d3ef,0x8),_0x495ebb[_0x486b66(0x235)]='',_0x495ebb[_0x486b66(0x146)]=![];if(_0x495ebb[_0x486b66(0x2c9)]!=config[_0x486b66(0x136)]){if(_0x495ebb[_0x486b66(0x258)]>_0x1cd40a)_0x495ebb[_0x486b66(0x235)]=_0x486b66(0x243),_0x495ebb['valid']=checkMinimums(_0x495ebb);else _0x495ebb['distribution']<_0x1cd40a&&(_0x495ebb[_0x486b66(0x235)]=_0x486b66(0x1f3),_0x495ebb['valid']=checkMinimums(_0x495ebb));}_0x495ebb[_0x486b66(0x230)]=_0x495ebb[_0x486b66(0x258)]/_0x495ebb['target']-0x1;if(_0x495ebb[_0x486b66(0x1e7)]==_0x486b66(0x283)||_0x495ebb[_0x486b66(0x1e7)]==_0x486b66(0x1e2))_0x495ebb[_0x486b66(0x1e7)]='none';}),currentCoins[_0x4396f0(0x29c)]((_0xc4d37a,_0x13dfab)=>_0xc4d37a[_0x4396f0(0x230)]<_0x13dfab[_0x4396f0(0x230)]?0x1:_0x13dfab[_0x4396f0(0x230)]<_0xc4d37a['delta']?-0x1:0x0);const _0x41a5bd=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x41a5bd[_0x4396f0(0x1a0)],'usd':_0x41a5bd['usd'],'portfolio':JSON['stringify'](currentCoins),'threshold':_0x4623b0},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});if(_0x43f759){if(config[_0x4396f0(0x2f3)])headlessMode({'portfolio':currentCoins,'threshold':_0x4623b0});else lockOrders==ORDERS['UNLOCKED']&&!coolingDown&&notifyBalance({'portfolio':currentCoins,'threshold':_0x4623b0});}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x191b62=getNormalizedPerformance();getStartingBalances(_0x191b62),emitPerformance(_0x191b62);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}function getPnL(){const _0x2a6853=_0x48d848;let _0x257ae9=dbCoinResults[_0x2a6853(0x16b)]('coins')[_0x2a6853(0x241)](),_0x3f3a50=0x0;return Object['entries'](_0x257ae9)[_0x2a6853(0x2b2)](([_0x543b31,_0x563cde])=>{const _0x549a7f=_0x2a6853;_0x3f3a50+=_0x563cde[_0x549a7f(0x1f7)];}),_0x3f3a50;}async function storePerformance(){const _0x224093=_0x48d848;if(!lastBalances)return;let _0x580a25=[],_0x51135e;const _0xaa76c1=getPnL();let _0xde073=JSON['parse'](lastBalances['portfolio']);_0xde073[_0x224093(0x29c)]((_0x829656,_0x65b5ba)=>_0x829656[_0x224093(0x2c9)]>_0x65b5ba[_0x224093(0x2c9)]?0x1:_0x65b5ba[_0x224093(0x2c9)]>_0x829656[_0x224093(0x2c9)]?-0x1:0x0),_0xde073[_0x224093(0x2b2)](_0x249343=>{const _0x3ed914=_0x224093;let _0x59485a={'coin':_0x249343[_0x3ed914(0x2c9)],'number':_0x249343[_0x3ed914(0x19a)],'price':_0x249343[_0x3ed914(0x131)]};_0x580a25[_0x3ed914(0x28c)](_0x59485a);});const _0x58a34b=await getFiat(),_0x417ae1=getTimeStamp()[_0x224093(0x203)]('\x20')[0x0],_0x327a75=dbPerformance[_0x224093(0x16b)](_0x224093(0x269))[_0x224093(0x26d)]({'date':_0x417ae1})[_0x224093(0x241)]();_0x51135e={'date':_0x417ae1,'eur':_0x58a34b['eur'],'usd':_0x58a34b[_0x224093(0x234)],'coins':_0x580a25,'pnl':_0xaa76c1},_0x327a75?_0x51135e['date']!=config[_0x224093(0x2f9)]&&dbPerformance[_0x224093(0x16b)](_0x224093(0x269))[_0x224093(0x26d)]({'date':_0x417ae1})[_0x224093(0x225)](_0x51135e)[_0x224093(0x184)]():dbPerformance[_0x224093(0x16b)](_0x224093(0x269))[_0x224093(0x28c)](_0x51135e)['write'](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x10e7cb=_0x48d848;let _0x318edf=[];if(dbPerformance['has'](_0x10e7cb(0x269))[_0x10e7cb(0x241)]()){let _0x2d5491=dbPerformance['get']('data')[_0x10e7cb(0x179)]()[_0x10e7cb(0x24a)](_0x1cd838=>{const _0x282090=_0x10e7cb;if(_0x1cd838[_0x282090(0x2b5)][_0x282090(0x17d)]==0x0)return![];else return!![];})[_0x10e7cb(0x12c)](_0x10e7cb(0x153))[_0x10e7cb(0x241)](),_0x6122e8=[...config[_0x10e7cb(0x1dd)]];_0x6122e8[_0x10e7cb(0x29c)]((_0x261c20,_0x426c7a)=>_0x261c20[_0x10e7cb(0x153)]>_0x426c7a['date']?-0x1:_0x426c7a[_0x10e7cb(0x153)]>_0x261c20[_0x10e7cb(0x153)]?0x1:0x0);let _0x1d640c=0x1,_0x282795=[],_0x2ae9d1=0x0;_0x2d5491[_0x10e7cb(0x163)]()['reverse']()[_0x10e7cb(0x2b2)]((_0x532280,_0x5925fa)=>{const _0x409f64=_0x10e7cb;if(_0x6122e8[_0x2ae9d1]){if(_0x2d5491[_0x2d5491[_0x409f64(0x17d)]-_0x5925fa]&&_0x6122e8[_0x2ae9d1][_0x409f64(0x153)]==_0x2d5491[_0x2d5491[_0x409f64(0x17d)]-_0x5925fa]['date']){if(_0x5925fa<_0x2d5491[_0x409f64(0x17d)]){let _0x37d020=0x0,_0x19c20e=0x0;_0x2d5491[_0x2d5491[_0x409f64(0x17d)]-_0x5925fa]['coins']['forEach'](_0x30ec2a=>{const _0x3a1326=_0x409f64;_0x19c20e+=_0x30ec2a[_0x3a1326(0x19a)]*_0x30ec2a[_0x3a1326(0x18e)];}),_0x6122e8[_0x2ae9d1][_0x409f64(0x14f)][_0x409f64(0x2b2)](_0x194df4=>{const _0x123de0=_0x409f64;_0x37d020+=_0x194df4[_0x123de0(0x19a)]*_0x194df4[_0x123de0(0x18e)];}),_0x1d640c*=_0x37d020/(_0x19c20e-_0x37d020)+0x1;}_0x2ae9d1++;}}let _0x1208cb=0x0;_0x532280[_0x409f64(0x2b5)]['forEach'](_0xbfcddf=>{const _0x3303ab=_0x409f64;_0x1208cb+=_0xbfcddf[_0x3303ab(0x19a)]*_0xbfcddf[_0x3303ab(0x18e)];}),_0x282795[_0x2d5491[_0x409f64(0x17d)]-_0x5925fa-0x1]=_0x1208cb*(_0x1d640c-0x1);});let _0x337f26=[];_0x6122e8=[...config['liquidity']]||[];let _0x351069=0x0;_0x2ae9d1=0x0,_0x2d5491['forEach']((_0x4d27c1,_0x95ca22)=>{const _0x584f0d=_0x10e7cb;if(_0x6122e8[_0x2ae9d1]){const _0x4da1e3=fns[_0x584f0d(0x1e4)](_0x6122e8[_0x2ae9d1]['date'],_0x584f0d(0x2f8),new Date()),_0xf911c=fns[_0x584f0d(0x1e4)](_0x4d27c1[_0x584f0d(0x153)],'yyyy/MM/dd',new Date());if(fns[_0x584f0d(0x1e5)](_0x4da1e3,_0xf911c)){let _0x3c5702=0x0;_0x6122e8[_0x2ae9d1]['changes'][_0x584f0d(0x2b2)](_0xd6f0d4=>{const _0xddede3=_0x584f0d;!_0x337f26[_0xd6f0d4[_0xddede3(0x2c9)]]?_0x337f26[_0xd6f0d4['coin']]=_0xd6f0d4[_0xddede3(0x19a)]:(_0x3c5702=_0x337f26[_0xd6f0d4['coin']],_0x337f26[_0xd6f0d4[_0xddede3(0x2c9)]]+=_0xd6f0d4[_0xddede3(0x19a)]);const _0x41fea0=_0x4d27c1[_0xddede3(0x2b5)][_0xddede3(0x26d)](_0x5f4f46=>_0x5f4f46[_0xddede3(0x2c9)]==_0xd6f0d4[_0xddede3(0x2c9)]);(!_0x41fea0||_0x41fea0[_0xddede3(0x19a)]==0x0)&&(_0x351069+=(-_0xd6f0d4[_0xddede3(0x19a)]-_0x3c5702)*_0xd6f0d4[_0xddede3(0x18e)]);}),_0x2ae9d1++;}}_0x4d27c1['coins'][_0x584f0d(0x2b2)]((_0x3cf71d,_0x3597ea)=>{const _0x325bbc=_0x584f0d;_0x337f26[_0x3cf71d['coin']]&&(_0x3cf71d[_0x325bbc(0x145)]=_0x337f26[_0x3cf71d['coin']]);}),_0x318edf['push']({'date':_0x4d27c1['date'],'eur':_0x4d27c1[_0x584f0d(0x1a0)],'usd':_0x4d27c1[_0x584f0d(0x234)],'offset':_0x282795[_0x95ca22],'netoffset':_0x351069,'coins':_0x4d27c1['coins'],'pnl':_0x4d27c1['pnl']});});}return _0x318edf;}function emitPerformance(_0x1b0924){const _0x22ceb3=_0x48d848;_0x1b0924[_0x22ceb3(0x17d)]!==0x0?(proxyEmit(_0x22ceb3(0x144),_0x1b0924),lastPerformanceEmitted=getDate()):proxyEmit(_0x22ceb3(0x144),[]);}function getPerf(_0x2c76f4,_0x196076){const _0x3b5a4e=_0x48d848;let _0x2f67a7=0x0,_0x2d91c0=0x0,_0x1c5984=0x0;_0x2c76f4[_0x3b5a4e(0x2b5)][_0x3b5a4e(0x2b2)](_0x1fd15b=>{const _0x88c479=_0x3b5a4e;_0x2f67a7+=_0x1fd15b[_0x88c479(0x19a)]*_0x1fd15b[_0x88c479(0x18e)];});_0x196076&&(_0x2f67a7+=_0x2c76f4['offset']);if(config[_0x3b5a4e(0x136)]===_0x3b5a4e(0x20f)||config['basecoin']===_0x3b5a4e(0x15b)||config[_0x3b5a4e(0x136)]===_0x3b5a4e(0x2ae))_0x2d91c0=_0x2f67a7*_0x2c76f4[_0x3b5a4e(0x1a0)],_0x1c5984=_0x2f67a7*_0x2c76f4[_0x3b5a4e(0x234)];else{if(usdBasecoins[_0x3b5a4e(0x2e6)](config[_0x3b5a4e(0x136)]))_0x2d91c0=_0x2f67a7*_0x2c76f4[_0x3b5a4e(0x1a0)]/_0x2c76f4[_0x3b5a4e(0x234)],_0x1c5984=_0x2f67a7;else config[_0x3b5a4e(0x136)]===_0x3b5a4e(0x25a)&&(_0x2d91c0=_0x2f67a7,_0x1c5984=_0x2f67a7*_0x2c76f4['usd']/_0x2c76f4['eur']);}return[_0x2f67a7,_0x2d91c0,_0x1c5984];}function CurrencyFactor(_0x43d373,_0x27cbcf,_0x3ee7ca){const _0x480e5f=_0x48d848;let _0x3e31c3;if(_0x27cbcf==='BTC'||_0x27cbcf===_0x480e5f(0x15b)||_0x27cbcf===_0x480e5f(0x2ae))_0x3e31c3=_0x3ee7ca===_0x480e5f(0x25a)?_0x43d373['eur']:_0x43d373[_0x480e5f(0x234)];else{if(usdBasecoins[_0x480e5f(0x2e6)](_0x27cbcf))_0x3e31c3=_0x3ee7ca===_0x480e5f(0x25a)?_0x43d373[_0x480e5f(0x1a0)]/_0x43d373['usd']:0x1;else _0x27cbcf===_0x480e5f(0x25a)&&(_0x3e31c3=_0x3ee7ca===_0x480e5f(0x25a)?0x1:_0x43d373[_0x480e5f(0x234)]/_0x43d373[_0x480e5f(0x1a0)]);}return _0x3e31c3;}function getKPIs(_0x42d857,_0x3be8f6='EUR'){const _0x59708a=_0x48d848,_0x230a81=config['basecoin'],_0xc8d0b0=lastBalances,_0x21708c=currentCoins,_0x5d86a2=getNormalizedPerformance(),_0x5b7600=CurrencyFactor(_0xc8d0b0,config[_0x59708a(0x136)],_0x3be8f6);let _0xf9d807=0x0;_0x21708c['forEach'](_0x2a4cee=>{const _0x4c028f=_0x59708a;_0xf9d807+=_0x2a4cee[_0x4c028f(0x19a)]*_0x2a4cee[_0x4c028f(0x131)];});_0x42d857[_0x59708a(0x2e6)](_0x59708a(0x127))&&(_0xf9d807*=_0x5b7600);let _0x5e5988;if(_0xf9d807!==0x0){if(_0x42d857==='basecoin'||_0x42d857===_0x59708a(0x127)){if(_0x42d857===_0x59708a(0x136))_0x5e5988=(_0xf9d807/startingBalances['basecoin']-0x1)*0x64;else{if(_0x3be8f6===_0x59708a(0x25a))_0x5e5988=(_0xf9d807/startingBalances[_0x59708a(0x1a0)]-0x1)*0x64;else _0x5e5988=(_0xf9d807/startingBalances[_0x59708a(0x234)]-0x1)*0x64;}}if(_0x42d857[_0x59708a(0x2e6)](_0x59708a(0x28b))){let _0x482694=0x0;if(startingBalances[_0x59708a(0x2b5)])_0x21708c['forEach'](_0xb7e76c=>{const _0x435d22=_0x59708a;let _0x59d085=startingBalances[_0x435d22(0x2b5)][_0x435d22(0x26d)](_0x400d11=>_0x400d11[_0x435d22(0x2c9)]===_0xb7e76c[_0x435d22(0x2c9)]);if(_0x59d085&&_0x59d085[_0x435d22(0x2c9)]&&_0xb7e76c[_0x435d22(0x19a)]!==0x0)_0x482694+=_0x59d085[_0x435d22(0x19a)]*_0xb7e76c[_0x435d22(0x131)];});let _0x534669=0x0;if(_0x5d86a2[_0x59708a(0x17d)]!==0x0){let _0x1cce1f=_0x5d86a2[_0x5d86a2[_0x59708a(0x17d)]-0x1];_0x534669=_0x1cce1f[_0x59708a(0x1d4)];}_0x482694-=_0x534669;let _0x78215c;_0x42d857==='net-basecoin'&&(_0x78215c=startingBalances[_0x59708a(0x136)]),_0x42d857==='net-fiat'&&(_0x78215c=_0x3be8f6===_0x59708a(0x25a)?startingBalances['eur']:startingBalances[_0x59708a(0x234)],_0x482694*=_0x5b7600),_0x5e5988=(_0xf9d807-_0x482694)/_0x78215c*0x64,_0xf9d807=_0xf9d807-_0x482694;}if(_0x42d857[_0x59708a(0x2e6)]('pnl')){if(_0x5d86a2['length']!==0x0&&_0x21708c[_0x59708a(0x17d)]!==0x0){let _0x28a0a0,_0x365ddd=_0x5d86a2[_0x5d86a2[_0x59708a(0x17d)]-0x1][_0x59708a(0x2ac)];_0x42d857[_0x59708a(0x2e6)](_0x59708a(0x127))?(_0x28a0a0=_0x3be8f6===_0x59708a(0x25a)?startingBalances[_0x59708a(0x1a0)]:startingBalances[_0x59708a(0x234)],_0x365ddd*=CurrencyFactor(_0xc8d0b0,_0x230a81,_0x3be8f6)):_0x28a0a0=startingBalances[_0x59708a(0x136)],_0x5e5988=_0x365ddd/_0x28a0a0*0x64,_0xf9d807=_0x365ddd;}}if(_0x5e5988){if(_0x5e5988<0x64)_0x5e5988=_0x5e5988[_0x59708a(0x15e)](0x2);else{if(_0x5e5988<0x3e8)_0x5e5988=_0x5e5988['toFixed'](0x1);else _0x5e5988=_0x5e5988[_0x59708a(0x15e)](0x0);}}else _0x5e5988=Number('0')[_0x59708a(0x15e)](0x2);if(_0xf9d807){if(Math[_0x59708a(0x12f)](_0xf9d807)<0.000001)_0xf9d807=_0xf9d807[_0x59708a(0x15e)](0x2);else{if(Math[_0x59708a(0x12f)](_0xf9d807)<0.1)_0xf9d807=_0xf9d807[_0x59708a(0x15e)](0x6);else{if(Math[_0x59708a(0x12f)](_0xf9d807)<0x1)_0xf9d807=_0xf9d807[_0x59708a(0x15e)](0x5);else{if(Math[_0x59708a(0x12f)](_0xf9d807)<0xa)_0xf9d807=_0xf9d807['toFixed'](0x4);else{if(Math['abs'](_0xf9d807)<0x64)_0xf9d807=_0xf9d807[_0x59708a(0x15e)](0x3);else{if(Math[_0x59708a(0x12f)](_0xf9d807)<0x3e8)_0xf9d807=_0xf9d807[_0x59708a(0x15e)](0x2);else _0xf9d807=_0xf9d807[_0x59708a(0x15e)](0x2);}}}}}}else _0xf9d807=Number('0')[_0x59708a(0x15e)](0x2);}else _0x5e5988=Number('0')['toFixed'](0x2);if(_0x5e5988>=0x0)_0x5e5988='+'+_0x5e5988;return{'value':_0xf9d807,'change':_0x5e5988};}async function getStartingBalances(_0x1b5718,_0x106db5=!![]){const _0x31f938=_0x48d848;if(_0x1b5718['length']!==0x0){const [_0x1c4494,_0x120e36,_0xcd6be6]=getPerf(_0x1b5718[0x0],!![]);let _0x5e0e53=[];config[_0x31f938(0x226)]['forEach'](_0x204b38=>{const _0x2562e9=_0x31f938;let _0x76695d=0x0,_0xad2cfe;config[_0x2562e9(0x1dd)][_0x2562e9(0x2b2)](_0x1be36b=>{const _0x4dd8f4=_0x2562e9;let _0x3c8ab4=_0x1be36b['changes'][_0x4dd8f4(0x26d)](_0x12f73a=>_0x12f73a[_0x4dd8f4(0x2c9)]==_0x204b38[_0x4dd8f4(0x2c9)]);if(_0x3c8ab4){_0x76695d+=_0x3c8ab4[_0x4dd8f4(0x19a)];if(!_0xad2cfe)_0xad2cfe=_0x3c8ab4[_0x4dd8f4(0x18e)];}}),_0x5e0e53['push']({'coin':_0x204b38[_0x2562e9(0x2c9)],'number':_0x76695d,'initialprice':_0xad2cfe});});const _0x4bc38a={'basecoin':_0x1c4494,'eur':_0x120e36,'usd':_0xcd6be6,'coins':_0x5e0e53};if(_0x106db5)proxyEmit(_0x31f938(0x2d2),_0x4bc38a);startingBalances=_0x4bc38a;}}function headlessMode(_0x3aeb1b){const _0x2be3a5=_0x48d848;let _0x55c1e1=_0x3aeb1b[_0x2be3a5(0x226)],_0x301dee=_0x3aeb1b['threshold'],_0x486f3a=[];for(let _0x59a1c0 of _0x55c1e1){if(_0x59a1c0[_0x2be3a5(0x2c9)]!=config[_0x2be3a5(0x136)]){if(_0x59a1c0[_0x2be3a5(0x230)]>=_0x301dee/0x64){if(_0x59a1c0['valid'])_0x486f3a['push'](_0x59a1c0);}else{if(_0x59a1c0[_0x2be3a5(0x230)]<=-_0x301dee/0x64){if(_0x59a1c0[_0x2be3a5(0x146)])_0x486f3a[_0x2be3a5(0x28c)](_0x59a1c0);}}}}_0x486f3a[_0x2be3a5(0x17d)]>0x0&&placeOrder(_0x486f3a);}function notifyBalance(_0x2f9eb4){const _0x4f6e44=_0x48d848;let _0x3d5316=_0x2f9eb4[_0x4f6e44(0x226)],_0x1a3967=_0x2f9eb4[_0x4f6e44(0x260)],_0x25e034=[];for(let _0x37ec83 of _0x3d5316){if(_0x37ec83[_0x4f6e44(0x2c9)]!=config[_0x4f6e44(0x136)]){if(_0x37ec83['delta']>=_0x1a3967/0x64){if(_0x37ec83[_0x4f6e44(0x146)])_0x25e034[_0x4f6e44(0x28c)](_0x37ec83);}else{if(_0x37ec83[_0x4f6e44(0x230)]<=-_0x1a3967/0x64){if(_0x37ec83[_0x4f6e44(0x146)])_0x25e034['push'](_0x37ec83);}}}}if(_0x25e034['length']>0x0){let _0x59993e=_0x25e034[_0x4f6e44(0x219)](_0x5ed9cf=>_0x5ed9cf[_0x4f6e44(0x2c9)]);_0x59993e[_0x4f6e44(0x29c)]();let _0x30b8f7=_0x59993e['join'](',\x20');if(!lastCoinsToBalance)logHistory(_0x4f6e44(0x196),_0x4f6e44(0x1f9));lastCoinsToBalance=_0x30b8f7;}}function symbolToCoin(_0x14eccf){const _0x5c2d8b=_0x48d848;let _0x1856af;if(_0x14eccf[_0x5c2d8b(0x2e6)]('/'+config[_0x5c2d8b(0x136)]))_0x1856af=_0x14eccf[_0x5c2d8b(0x212)]('/'+config['basecoin'],'');if(_0x14eccf[_0x5c2d8b(0x2e6)](config[_0x5c2d8b(0x136)]+'/'))_0x1856af=_0x14eccf[_0x5c2d8b(0x212)](config['basecoin']+'/','');return _0x1856af;}function setLockOrders(_0x26d37e){const _0x52fd36=_0x48d848;lockOrders=_0x26d37e,logger[_0x52fd36(0x28f)]('Set\x20lock\x20orders\x20to:\x20'+Object[_0x52fd36(0x28d)](ORDERS)[lockOrders]);}async function unlockOrders(_0x213aa2=![]){const _0x5e9f70=_0x48d848;if(allOrdersPlaced&&lockOrders==ORDERS['LOCKED']){setLockOrders(ORDERS['UNLOCKING']);if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);if(_0x213aa2){const _0x5098d2=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x5098d2,setBlockTransactionDetection(![]);}validateOrdersState='initial',persistOpenOrders([]),setLockOrders(ORDERS[_0x5e9f70(0x2a5)]);}}async function validateOrders(_0x5e664d){const _0x3a461f=_0x48d848;if(_0x5e664d)validateOrdersState=_0x5e664d;logger[_0x3a461f(0x28f)](_0x3a461f(0x1d7)+validateOrdersState+_0x3a461f(0x27e)+Object[_0x3a461f(0x28d)](ORDERS)[lockOrders]);let _0xa8e494=[],_0x56ac93=config[_0x3a461f(0x12a)]==_0x3a461f(0x2e7)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x3a461f(0x2e4)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x3a461f(0x1c5)])return;logger[_0x3a461f(0x28f)](_0x3a461f(0x124)+validateOrdersState);for(let _0xdb9bdb=lastOrders['length']-0x1;_0xdb9bdb>=0x0;_0xdb9bdb--){let _0x5c97dc=lastOrders[_0xdb9bdb],_0x881dda=![];_0x5c97dc[_0x3a461f(0x283)]>0x0&&(_0x881dda=!![]),_0xa8e494['push'](_0x881dda),_0x881dda&&config[_0x3a461f(0x12a)]!=_0x3a461f(0x2e7)&&logHistory(_0x3a461f(0x168),_0x3a461f(0x210)+_0x5c97dc[_0x3a461f(0x26b)]+'\x20'+_0x5c97dc['side']+'\x20#'+formatResult(_0x5c97dc[_0x3a461f(0x283)],0x8)+'\x20@'+formatResult(_0x5c97dc[_0x3a461f(0x18e)],0x8)),_0x881dda&&lastOrders['splice'](_0xdb9bdb,0x1);}persistOpenOrders(lastOrders);const _0x241cde=coolingDown?_0x3a461f(0x1e3):_0x3a461f(0x29e);if(validateOrdersState==_0x3a461f(0x145)){validateOrdersState=_0x3a461f(0x2bc);if(_0xa8e494[_0x3a461f(0x2e6)](![])){}else await unlockOrders();}else{if(validateOrdersState==_0x3a461f(0x2bc)){if(_0xa8e494[_0x3a461f(0x2e6)](![])){}else await unlockOrders();}else{if(validateOrdersState==_0x3a461f(0x1fa)){let _0x41fdf1=!![];if(_0xa8e494['includes'](![])){if(config[_0x3a461f(0x12a)]==_0x3a461f(0x2e7))logHistory('success',_0x3a461f(0x1bf)+Math[_0x3a461f(0x1ca)](_0x56ac93*validateOrderInterval/0xea60)+_0x3a461f(0x23e)+_0x241cde),await unlockOrders(!![]);else{_0x41fdf1=await cancelOrders();if(_0x41fdf1)logHistory(_0x3a461f(0x1c0),_0x3a461f(0x25f)+Math[_0x3a461f(0x1ca)](_0x56ac93*validateOrderInterval/0xea60)+_0x3a461f(0x23e)+_0x241cde),await unlockOrders(!![]);else{validateOrdersState=_0x3a461f(0x2bc),logHistory(_0x3a461f(0x19c),_0x3a461f(0x167)+Math[_0x3a461f(0x1ca)](_0x56ac93*validateOrderInterval/0xea60)+_0x3a461f(0x23e)+_0x241cde),logHistory(_0x3a461f(0x19c),_0x3a461f(0x255));const _0x41c027=config['ordertype']=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0x3a461f(0x2e4)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x36032d=_0x3a461f;validateOrders(_0x36032d(0x1fa));},_0x41c027);}}}else await unlockOrders(!![]);}else{if(validateOrdersState==_0x3a461f(0x139)){if(config[_0x3a461f(0x12a)]!=_0x3a461f(0x2e7))logHistory('success',_0x3a461f(0x148)+_0x241cde);await unlockOrders(!![]);}}}}}async function cancelOrders(){const _0x3cd32a=_0x48d848;let _0x45dd5f=!![],_0xda9849;for(const _0x4c8cd2 of lastOrders){let _0xbebeae=![],_0x1fa8be=0x0;while(!_0xbebeae&&_0x1fa8be<maxRetries){try{const _0x43deed=await exchange[_0x3cd32a(0x133)](_0x4c8cd2[_0x3cd32a(0x23f)],_0x4c8cd2[_0x3cd32a(0x26b)]);_0xbebeae=!![];}catch(_0x5e7826){_0x5e7826[_0x3cd32a(0x1c2)]()['includes']('OrderNotFound')||_0x5e7826[_0x3cd32a(0x1c2)]()['includes'](_0x3cd32a(0x27b))?_0xbebeae=!![]:(_0xda9849=_0x5e7826,_0xbebeae=![]);}!_0xbebeae&&(_0x1fa8be++,await sleep(retryInterval));}_0x45dd5f=_0x45dd5f&&_0xbebeae;}return!_0x45dd5f&&await handleError(_0xda9849,_0x3cd32a(0x1e9)),_0x45dd5f;}async function initCoinResults(_0x5812d5){const _0x5b30a0=_0x48d848;_0x5812d5?logger['debug']('Resetting\x20coin\x20results:\x20'+_0x5812d5):logger[_0x5b30a0(0x28f)](_0x5b30a0(0x13b)),config['portfolio'][_0x5b30a0(0x2b2)](_0x139239=>{const _0x33b1bd=_0x5b30a0;if(!_0x139239[_0x33b1bd(0x1b6)]&&_0x139239[_0x33b1bd(0x2c9)]!=config[_0x33b1bd(0x136)]){const _0x56511b=currentCoins[_0x33b1bd(0x26d)](_0x67fe8f=>_0x67fe8f[_0x33b1bd(0x2c9)]==_0x139239[_0x33b1bd(0x2c9)]),_0x2b5085=gTicker[noslash(_0x139239[_0x33b1bd(0x26b)])];let _0x10ee54=_0x56511b?_0x56511b[_0x33b1bd(0x19a)]:null,_0x3f3d90=_0x139239[_0x33b1bd(0x1f1)]?0x1/_0x2b5085:_0x2b5085,_0x4cfa55;config[_0x33b1bd(0x1dd)][_0x33b1bd(0x2b2)](_0x2413a6=>{const _0x48bed5=_0x33b1bd;!_0x4cfa55&&(_0x4cfa55=_0x2413a6[_0x48bed5(0x14f)]['find'](_0x3698ec=>_0x3698ec[_0x48bed5(0x2c9)]==_0x139239['coin']),_0x4cfa55&&(_0x10ee54=_0x4cfa55[_0x48bed5(0x19a)],_0x3f3d90=_0x4cfa55[_0x48bed5(0x18e)]));});let _0x49ebe4=dbCoinResults['get'](_0x33b1bd(0x2b5))[_0x33b1bd(0x26d)]({'coin':_0x139239[_0x33b1bd(0x2c9)]})[_0x33b1bd(0x241)]();if(!_0x49ebe4){const _0x34a495={'coin':_0x139239['coin'],'number':_0x10ee54,'breakeven':_0x3f3d90,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x33b1bd(0x16b)](_0x33b1bd(0x2b5))['push'](_0x34a495)[_0x33b1bd(0x184)]();}else{if(_0x5812d5&&_0x139239[_0x33b1bd(0x2c9)]==_0x5812d5){const _0x4cbba8={'coin':_0x139239[_0x33b1bd(0x2c9)],'number':_0x10ee54,'breakeven':_0x3f3d90,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x33b1bd(0x16b)]('coins')[_0x33b1bd(0x26d)]({'coin':_0x139239['coin']})[_0x33b1bd(0x225)](_0x4cbba8)[_0x33b1bd(0x184)]();}}}});}async function placeOrder(_0x22540d){const _0x30a5e6=_0x48d848,_0x5bd969=config[_0x30a5e6(0x12a)]==_0x30a5e6(0x2e7)?_0x30a5e6(0x2e7):_0x30a5e6(0x2ec);if(lockOrders==ORDERS[_0x30a5e6(0x2a5)]&&!coolingDown){setLockOrders(ORDERS[_0x30a5e6(0x1c5)]);while(transactionDetectionOngoing){await sleep(0x64);}logger[_0x30a5e6(0x28f)](_0x30a5e6(0x1d5)+_0x22540d[_0x30a5e6(0x219)](_0x5412d5=>_0x5412d5[_0x30a5e6(0x2c9)])[_0x30a5e6(0x150)](',\x20')),lastCoinsToBalance='',allOrdersPlaced=![],validateOrdersState='initial';let _0x2e281c=![];lastOrders=[];const _0x59ecd5=config['threshold'];for(const _0x155080 of _0x22540d){let _0x2c4c05,_0x591f3f,_0x1710f5,_0x339e36,_0x49c2e2,_0x1f80f6=_0x155080['symbol'];logger[_0x30a5e6(0x28f)](_0x30a5e6(0x248)+_0x155080[_0x30a5e6(0x2c9)]+'\x20'+_0x155080[_0x30a5e6(0x19a)]+'\x20'+_0x155080[_0x30a5e6(0x131)]+'\x20'+_0x155080[_0x30a5e6(0x258)]+'%\x20'+_0x155080['target']+'%\x20'+(0x64*_0x155080[_0x30a5e6(0x230)])[_0x30a5e6(0x15e)](0x2)+_0x30a5e6(0x15f)+_0x59ecd5['toFixed'](0x2)+'%)');const _0x318451=currentCoins[_0x30a5e6(0x26d)](_0x4fb40c=>_0x4fb40c[_0x30a5e6(0x2c9)]==_0x155080['coin']);_0x318451&&(_0x318451['prevnumber']=_0x155080['number']);try{const _0x32c648=await exchange[_0x30a5e6(0x2b3)](_0x1f80f6);_0x2c4c05=_0x155080[_0x30a5e6(0x1f1)]?0x1/_0x155080['last']:_0x155080[_0x30a5e6(0x131)],_0x591f3f=_0x32c648[_0x30a5e6(0x2fd)],_0x1710f5=_0x32c648[_0x30a5e6(0x185)];_0x155080[_0x30a5e6(0x1f1)]?(_0x339e36=_0x155080['side']==_0x30a5e6(0x1f3)?'sell':_0x30a5e6(0x1f3),_0x49c2e2=Math[_0x30a5e6(0x12f)](_0x155080[_0x30a5e6(0x138)])/_0x2c4c05):(_0x339e36=_0x155080['side'],_0x49c2e2=Math['abs'](_0x155080[_0x30a5e6(0x138)]));_0x5bd969==_0x30a5e6(0x2ec)&&(config['ordertype']==_0x30a5e6(0x249)&&(_0x2c4c05=_0x339e36==_0x30a5e6(0x1f3)?_0x591f3f:_0x1710f5),config['ordertype']==_0x30a5e6(0x16e)&&(_0x2c4c05=_0x339e36==_0x30a5e6(0x1f3)?_0x1710f5:_0x591f3f));_0x49c2e2=formatResult(_0x49c2e2,0x8),_0x2c4c05=formatResult(_0x2c4c05,0x8);const _0x32fccf=_0x339e36==_0x30a5e6(0x243)?config[_0x30a5e6(0x1d3)]?String[_0x30a5e6(0x1bb)]('0x'+config[_0x30a5e6(0x1d3)])+'\x20':'':config['emojibuy']?String['fromCodePoint']('0x'+config[_0x30a5e6(0x17b)])+'\x20':'',_0x573a24=_0x5bd969==_0x30a5e6(0x2e7)?_0x30a5e6(0x2f2):config[_0x30a5e6(0x12a)]==_0x30a5e6(0x249)?'Limit\x20(high-margin)':_0x30a5e6(0x2fb),_0x597b9d=(Math[_0x30a5e6(0x22e)](Math[_0x30a5e6(0x180)]()*0x35a4e900)+0x5f5e100)[_0x30a5e6(0x1c2)]();lastOrders['push']({'customId':_0x597b9d,'symbol':_0x1f80f6,'coin':_0x155080[_0x30a5e6(0x2c9)],'amount':_0x49c2e2,'price':_0x2c4c05,'side':_0x339e36,'reverse':_0x155080[_0x30a5e6(0x1f1)],'filled':0x0});let _0x4d7ac3;_0x5bd969==_0x30a5e6(0x2e7)?_0x339e36==_0x30a5e6(0x1f3)&&[_0x30a5e6(0x28e),_0x30a5e6(0x26e),_0x30a5e6(0x29b),'Huobi',_0x30a5e6(0x274)]['includes'](config[_0x30a5e6(0x279)])?_0x4d7ac3=await exchange['createOrder'](_0x1f80f6,_0x5bd969,_0x339e36,_0x49c2e2,_0x2c4c05):_0x4d7ac3=await exchange[_0x30a5e6(0x1ce)](_0x1f80f6,_0x5bd969,_0x339e36,_0x49c2e2,undefined):_0x4d7ac3=await exchange[_0x30a5e6(0x1ce)](_0x1f80f6,_0x5bd969,_0x339e36,_0x49c2e2,_0x2c4c05);const _0x3818e7=lastOrders[_0x30a5e6(0x17d)]-0x1;if(_0x3818e7>=0x0&&lastOrders[_0x3818e7][_0x30a5e6(0x2f7)]==_0x597b9d){lastOrders[_0x3818e7]['orderId']=_0x4d7ac3['id'];if(_0x4d7ac3[_0x30a5e6(0x164)])lastOrders[_0x3818e7][_0x30a5e6(0x164)]=_0x4d7ac3[_0x30a5e6(0x164)];if(_0x4d7ac3['price'])lastOrders[_0x3818e7][_0x30a5e6(0x18e)]=_0x4d7ac3[_0x30a5e6(0x18e)];lastOrders[_0x3818e7][_0x30a5e6(0x1c1)]=_0x4d7ac3[_0x30a5e6(0x1c1)];}if(_0x4d7ac3[_0x30a5e6(0x164)])_0x49c2e2=_0x4d7ac3['amount'];if(_0x4d7ac3[_0x30a5e6(0x18e)])_0x2c4c05=_0x4d7ac3[_0x30a5e6(0x18e)];if(_0x5bd969==_0x30a5e6(0x2e7))logHistory(_0x30a5e6(0x168),''+_0x32fccf+_0x573a24+'\x20order:\x20'+_0x1f80f6+'\x20'+_0x339e36+'\x20#'+formatResult(_0x49c2e2,0x8)+'\x20@'+formatResult(_0x2c4c05,0x8));else logHistory(_0x30a5e6(0x168),''+_0x32fccf+_0x573a24+_0x30a5e6(0x1b7)+_0x1f80f6+'\x20'+_0x339e36+'\x20#'+formatResult(_0x49c2e2,0x8)+'\x20@'+formatResult(_0x2c4c05,0x8));logger[_0x30a5e6(0x28f)](_0x30a5e6(0x2f0)+_0x4d7ac3['id']+_0x30a5e6(0x1d1)+_0x597b9d);if(config['cooldown']!=0x0){let _0x5ecb01=null;if(cooldownTracker['length']==config[_0x30a5e6(0x2a9)]-0x1)_0x5ecb01=cooldownTracker[_0x30a5e6(0x21f)]();const _0x4d7c86=getTimeStamp();cooldownTracker[_0x30a5e6(0x28c)](_0x4d7c86);if(_0x5ecb01){const _0x573b43=fns[_0x30a5e6(0x223)](new Date(_0x4d7c86),new Date(_0x5ecb01));if(_0x573b43<cooldownInterval){logHistory(_0x30a5e6(0x19c),_0x30a5e6(0x261)+config[_0x30a5e6(0x2a9)]+_0x30a5e6(0x252)+cooldownInterval/0x3c+_0x30a5e6(0x13d)+cooldownPeriod/(0xe10*0x3e8)+_0x30a5e6(0x154)),coolingDown=!![];break;}}}}catch(_0x426b4c){if(_0x426b4c[_0x30a5e6(0x1c2)]()['includes'](_0x30a5e6(0x1f8)))lastOrders=lastOrders[_0x30a5e6(0x24a)](_0x4ca83b=>_0x4ca83b['symbol']!=_0x1f80f6),logHistory('error','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x1f80f6),_0x2e281c=!![];else{if(_0x426b4c[_0x30a5e6(0x1c2)]()[_0x30a5e6(0x2e6)](_0x30a5e6(0x1f6)))lastOrders=lastOrders['filter'](_0x24a4c3=>_0x24a4c3[_0x30a5e6(0x26b)]!=_0x1f80f6),logHistory(_0x30a5e6(0x19c),_0x30a5e6(0x158)+_0x1f80f6),_0x2e281c=!![];else{if(_0x426b4c[_0x30a5e6(0x1c2)]()['includes'](_0x30a5e6(0x27b)))lastOrders=lastOrders[_0x30a5e6(0x24a)](_0x31d932=>_0x31d932[_0x30a5e6(0x26b)]!=_0x1f80f6),logHistory(_0x30a5e6(0x19c),_0x30a5e6(0x2e2)+_0x1f80f6),logger['debug'](_0x426b4c),_0x2e281c=!![];else _0x426b4c['toString']()[_0x30a5e6(0x2e6)]('must\x20be\x20greater\x20than\x20minimum\x20amount')?(lastOrders=lastOrders[_0x30a5e6(0x24a)](_0x1cb21b=>_0x1cb21b[_0x30a5e6(0x26b)]!=_0x1f80f6),logHistory(_0x30a5e6(0x19c),'Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x1f80f6),_0x2e281c=!![]):(lastOrders=lastOrders[_0x30a5e6(0x24a)](_0x34ab40=>_0x34ab40[_0x30a5e6(0x26b)]!=_0x1f80f6),await handleError(_0x426b4c,_0x30a5e6(0x2c8),_0x1f80f6));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x30a5e6(0x17d)]>0x0){const _0x37b686=config[_0x30a5e6(0x12a)]==_0x30a5e6(0x2e7)?validateOrderTimeout*0x3c*0x3e8:config[_0x30a5e6(0x2e4)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x551d63=_0x30a5e6;validateOrders(_0x551d63(0x1fa));},_0x37b686);}else unlockOrders();_0x2e281c&&config['headless']&&(logHistory(_0x30a5e6(0x19c),_0x30a5e6(0x1d8)+pauseBotMsg),await pauseBot(pauseBotInterval)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x30a5e6(0x1c0),_0x30a5e6(0x171)));}else{if(coolingDown)!config[_0x30a5e6(0x2f3)]&&logHistory(_0x30a5e6(0x19c),_0x30a5e6(0x173));else lockOrders!=ORDERS[_0x30a5e6(0x2a5)]&&(!config[_0x30a5e6(0x2f3)]&&(config['ordertype']=='market'?logHistory('error',_0x30a5e6(0x2d5)):logHistory('error',_0x30a5e6(0x294))));}}function persistOpenOrders(_0x3b8a6f){const _0x3f472a=_0x48d848,_0x62288d={...config,'openOrders':_0x3b8a6f};let _0x29ed14=dbConfig['get'](_0x3f472a(0x1a9))['find']({'botID':botID})['value']();_0x29ed14&&dbConfig['get'](_0x3f472a(0x1a9))[_0x3f472a(0x26d)]({'botID':botID})[_0x3f472a(0x225)](_0x62288d)['write']();}function restoreOrders(){const _0x48a5c4=_0x48d848;let _0x3d0729;config[_0x48a5c4(0x2dd)]&&allOpenOrders[_0x48a5c4(0x2b2)](_0x59917f=>{const _0x43036e=_0x48a5c4,_0x3dcbaf=config['openOrders'][_0x43036e(0x26d)](_0x70a073=>_0x70a073[_0x43036e(0x23f)]==_0x59917f['id']);_0x3dcbaf&&(lastOrders['push'](_0x3dcbaf),_0x3d0729=_0x59917f[_0x43036e(0x159)]);});if(lastOrders[_0x48a5c4(0x17d)]>0x0){setLockOrders(ORDERS[_0x48a5c4(0x1c5)]),validateOrdersState='ongoing',allOrdersPlaced=!![];const _0x44404a=new Date()[_0x48a5c4(0x14e)](),_0xdf45da=config['ordertype']=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0x48a5c4(0x2e4)]*0x3c*0x3e8;if(_0x3d0729+_0xdf45da>_0x44404a){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x4d4007=_0x48a5c4;validateOrders(_0x4d4007(0x1fa));},_0x3d0729+_0xdf45da-_0x44404a);}else validateOrders(_0x48a5c4(0x1fa));}}async function sendMetricsTelegram(){const _0x2127f7=_0x48d848;if(!coinsLoaded){process[_0x2127f7(0x200)]({'telegrammsg':_0x2127f7(0x2ad)},_0xf78942=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x15ba83='';if(config[_0x2127f7(0x26a)])_0x15ba83=_0x2127f7(0x1b3)+config['botname']+_0x2127f7(0x2cb);else _0x15ba83=_0x2127f7(0x25e)+botID+_0x2127f7(0x2cb);const _0x578ecc=config[_0x2127f7(0x136)],_0xe8c0ae=config[_0x2127f7(0x127)],_0x35a624=getKPIs('basecoin'),_0x2aab45=getKPIs(_0x2127f7(0x127),_0xe8c0ae),_0x18c823=getKPIs(_0x2127f7(0x244)),_0x5d5b1c=getKPIs(_0x2127f7(0x23a),_0xe8c0ae),_0x325b35=getKPIs('pnl-basecoin'),_0x16f0df=getKPIs(_0x2127f7(0x271),_0xe8c0ae);_0x578ecc[_0x2127f7(0x2e6)](_0xe8c0ae)?(_0x15ba83+='<pre>',_0x15ba83+=_0x2127f7(0x21d)+_0x578ecc+':\x20'+_0x35a624[_0x2127f7(0x241)]+'\x20('+_0x35a624[_0x2127f7(0x221)]+'%)\x0a',_0x15ba83+=_0x2127f7(0x2d0)+_0x578ecc+':\x20'+_0x18c823[_0x2127f7(0x241)]+'\x20('+_0x18c823[_0x2127f7(0x221)]+_0x2127f7(0x190),_0x15ba83+=_0x2127f7(0x12e)+_0x578ecc+':\x20'+_0x325b35[_0x2127f7(0x241)]+'\x20('+_0x325b35[_0x2127f7(0x221)]+_0x2127f7(0x190),_0x15ba83+=_0x2127f7(0x2ca)):(_0x15ba83+=_0x2127f7(0x18d),_0x15ba83+='Value\x20'+_0x578ecc+':\x20'+_0x35a624[_0x2127f7(0x241)]+'\x20('+_0x35a624['change']+_0x2127f7(0x190),_0x15ba83+=_0x2127f7(0x21d)+_0xe8c0ae+':\x20'+_0x2aab45[_0x2127f7(0x241)]+'\x20('+_0x2aab45[_0x2127f7(0x221)]+_0x2127f7(0x190),_0x15ba83+=_0x2127f7(0x2d0)+_0x578ecc+':\x20'+_0x18c823[_0x2127f7(0x241)]+'\x20('+_0x18c823[_0x2127f7(0x221)]+'%)\x0a',_0x15ba83+=_0x2127f7(0x2d0)+_0xe8c0ae+':\x20'+_0x5d5b1c['value']+'\x20('+_0x5d5b1c['change']+'%)\x0a',_0x15ba83+=_0x2127f7(0x12e)+_0x578ecc+':\x20'+_0x325b35[_0x2127f7(0x241)]+'\x20('+_0x325b35[_0x2127f7(0x221)]+_0x2127f7(0x190),_0x15ba83+=_0x2127f7(0x12e)+_0xe8c0ae+':\x20'+_0x16f0df['value']+'\x20('+_0x16f0df[_0x2127f7(0x221)]+_0x2127f7(0x190),_0x15ba83+=_0x2127f7(0x2ca)),process[_0x2127f7(0x200)]({'telegrammsg':_0x15ba83},_0x1a1c55=>{});}async function sendPortfolioTelegram(){const _0x32c703=_0x48d848;if(!coinsLoaded||!currentCoins[0x0][_0x32c703(0x258)]){process[_0x32c703(0x200)]({'telegrammsg':_0x32c703(0x2ad)},_0x2ef2d7=>{});return;}let _0xa6aae4='';if(config[_0x32c703(0x26a)])_0xa6aae4=_0x32c703(0x1b3)+config[_0x32c703(0x2ee)]+_0x32c703(0x157);else _0xa6aae4=_0x32c703(0x25e)+botID+_0x32c703(0x157);_0xa6aae4+='<pre>',_0xa6aae4+=_0x32c703(0x2b6),_0xa6aae4+=_0x32c703(0x2c6),_0xa6aae4+=_0x32c703(0x2b6),currentCoins[_0x32c703(0x2b2)](_0x287eb9=>{const _0x195166=_0x32c703;_0xa6aae4+=_0x287eb9[_0x195166(0x2c9)][_0x195166(0x222)](0x7)+'|\x20'+formatPad(_0x287eb9[_0x195166(0x258)],0x2,0x6)+'|\x20'+formatPad(_0x287eb9['target'],0x2,0x6)+'|\x20'+formatPad(_0x287eb9['delta']*0x64,0x2,0x6)+'\x0a';}),_0xa6aae4+=_0x32c703(0x2ca),process[_0x32c703(0x200)]({'telegrammsg':_0xa6aae4},_0x320be2=>{});}function formatPad(_0x592501,_0x1a935c,_0xdc44e9){const _0x234d00=_0x48d848,_0x554495=formatResultString(_0x592501,_0x1a935c);return _0x554495?_0x554495[_0x234d00(0x2e5)](_0xdc44e9):''[_0x234d00(0x2e5)](_0xdc44e9);}function logHistory(_0x254489,_0x4b5152,_0x2cf5c8=''){const _0x4d0860=_0x48d848;logger['full'](''+_0x4b5152);let _0x19c207={'time':getTimeStamp(),'type':_0x254489,'event':_0x4b5152};dbLogs[_0x4d0860(0x16b)](_0x4d0860(0x287))['push'](_0x19c207)[_0x4d0860(0x184)]();if(_0x2cf5c8=='')_0x2cf5c8=_0x4b5152;proxyEmit(_0x4d0860(0x220),{'log':_0x19c207,'summary':_0x2cf5c8}),process[_0x4d0860(0x200)]({'telegram':{..._0x19c207,'botname':config['botname'],'showname':config[_0x4d0860(0x26a)]}},_0x293c6b=>{});}function emitHistory(_0x2fd2ff={}){const _0x4d2dae=_0x48d848;Object['keys'](_0x2fd2ff)[_0x4d2dae(0x17d)]==0x0&&(_0x2fd2ff={'type':[_0x4d2dae(0x168),_0x4d2dae(0x220)],'event':'','page':0x1});if(_0x2fd2ff[_0x4d2dae(0x1ad)][_0x4d2dae(0x2e6)]('event'))_0x2fd2ff[_0x4d2dae(0x1ad)]['splice'](_0x2fd2ff['type']['indexOf'](_0x4d2dae(0x220)),0x1,_0x4d2dae(0x19c),_0x4d2dae(0x196),_0x4d2dae(0x1c0));if(dbLogs[_0x4d2dae(0x2e0)](_0x4d2dae(0x287))['value']()){let _0x409059=dbLogs[_0x4d2dae(0x16b)](_0x4d2dae(0x287))[_0x4d2dae(0x24a)](_0x46b6a8=>{const _0x30cbbe=_0x4d2dae;if(_0x2fd2ff[_0x30cbbe(0x1ad)]['length']==0x0)return![];else return _0x2fd2ff[_0x30cbbe(0x1ad)][_0x30cbbe(0x2e6)](_0x46b6a8[_0x30cbbe(0x1ad)]);})[_0x4d2dae(0x24a)](_0x28aa22=>{const _0x4774c0=_0x4d2dae;if(_0x2fd2ff[_0x4774c0(0x220)]=='')return!![];else return _0x28aa22[_0x4774c0(0x220)][_0x4774c0(0x2b4)]()[_0x4774c0(0x2e6)](_0x2fd2ff['event'][_0x4774c0(0x2b4)]());})['sortBy'](_0x4d2dae(0x1a8)),_0x3fc874=_0x409059[_0x4d2dae(0x241)]()[_0x4d2dae(0x17d)];_0x409059=_0x409059[_0x4d2dae(0x1f1)]()[_0x4d2dae(0x163)]((_0x2fd2ff['page']-0x1)*logPageSize,_0x2fd2ff['page']*logPageSize-0x1)['reverse']()[_0x4d2dae(0x241)](),proxyEmit(_0x4d2dae(0x162),{'logs':_0x409059,'total':_0x3fc874});}else proxyEmit('event-history',{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x561281){const _0xba7001=_0x48d848;if(dbLogs[_0xba7001(0x2e0)](_0xba7001(0x287))['value']()){const _0x1eb0cb=dbLogs[_0xba7001(0x16b)]('logs')[_0xba7001(0x12c)]('time')[_0xba7001(0x24a)](_0xf52afa=>{const _0x31dee8=_0xba7001;return _0xf52afa['type']==_0x31dee8(0x168);})[_0xba7001(0x241)]();dbLogs[_0xba7001(0x16b)]('logs')['remove']()[_0xba7001(0x184)](),dbLogs['get'](_0xba7001(0x287))[_0xba7001(0x225)](_0x1eb0cb)['write'](),emitHistory(_0x561281);}}async function pauseBot(_0x175bd4=pauseBotIntervalShort,_0x209214,_0x5115c5,_0x5bc18d=![]){const _0x3b074a=_0x48d848,_0x2f791f=new Date()['getTime']();if(!lastErrorShown||_0x2f791f-lastErrorShown>=_0x175bd4){lastErrorShown=_0x2f791f;if(!lastBotPause)lastBotPause=_0x2f791f,consecutivePauses=0x1;else{if(_0x2f791f-lastBotPause-_0x175bd4<0x5a*0x3e8){consecutivePauses++;if(consecutivePauses>maxPauseRetries){if(_0x5bc18d){logHistory(_0x3b074a(0x19c),_0x209214+_0x3b074a(0x1c7)),await killBot();return;}else logHistory(_0x3b074a(0x19c),_0x209214+pauseBotMsg),_0x175bd4=pauseBotInterval;}}else consecutivePauses=0x1;lastBotPause=_0x2f791f;}_0x5115c5?logger[_0x3b074a(0x28f)]('('+consecutivePauses+')\x20'+_0x209214+'\x20>\x20details:',_0x5115c5):logger[_0x3b074a(0x28f)]('('+consecutivePauses+')\x20'+_0x209214);if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);await sleep(_0x175bd4),botPaused=![],_0x175bd4==pauseBotIntervalShort?resumeBot(!![]):resumeBot(![]);}}}async function killBot(){const _0x3650d5=_0x48d848;botPaused=!![],await sleep(0x3e8),process['send']({'stop':_0x3650d5(0x149)},_0x22ed6d=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x3f2fde,_0x573554,_0x1b3e2d=![]){const _0x47d577=_0x48d848;if(botPaused)return;let _0x45ebd3;const _0x5d6d03=config[_0x47d577(0x279)]||_0x47d577(0x1f0);if(_0x573554)logger[_0x47d577(0x28f)](_0x47d577(0x1bc)+_0x573554);const _0x874406=()=>{const _0x441fa3=_0x47d577;loading[_0x441fa3(0x19c)]=_0x441fa3(0x14d),emitLoadingProgress();};if(_0x3f2fde['toString']()[_0x47d577(0x2e6)](_0x47d577(0x147)))logHistory(_0x47d577(0x19c),_0x5d6d03+_0x47d577(0x290)),_0x874406();else{if(_0x3f2fde[_0x47d577(0x1c2)]()[_0x47d577(0x2e6)](_0x47d577(0x166)))logHistory(_0x47d577(0x19c),_0x5d6d03+_0x47d577(0x2ab)),_0x874406();else{if(_0x3f2fde['toString']()[_0x47d577(0x2e6)](_0x47d577(0x12d)))config[_0x47d577(0x161)]?_0x45ebd3=_0x5d6d03+_0x47d577(0x2a4):_0x45ebd3=_0x5d6d03+'\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange',logHistory('error',_0x45ebd3+'\x20(see:\x20hodlerhacks.com/fix/1)'),_0x874406();else{if(_0x3f2fde[_0x47d577(0x1c2)]()['includes']('PermissionDenied'))logHistory(_0x47d577(0x19c),_0x5d6d03+_0x47d577(0x20c)),_0x874406();else{if(!_0x1b3e2d)await handleError(_0x3f2fde,null);}}}}}async function handleError(_0x487652,_0x5e3cea,_0x30dcea=''){const _0x57a348=_0x48d848;if(botPaused)return;let _0x2f4d0d;const _0x3260ee=config['exchange']||_0x57a348(0x1f0);if(_0x5e3cea)logger[_0x57a348(0x28f)](_0x57a348(0x1bc)+_0x5e3cea);if(_0x487652[_0x57a348(0x1c2)]()['includes'](_0x57a348(0x20a)))_0x2f4d0d=_0x3260ee+'\x20blocked\x20API\x20(DDoSProtection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading',await pauseBot(undefined,_0x2f4d0d,_0x487652);else{if(_0x487652[_0x57a348(0x1c2)]()[_0x57a348(0x2e6)](_0x57a348(0x229)))_0x2f4d0d=_0x3260ee+_0x57a348(0x239),await pauseBot(undefined,_0x2f4d0d,_0x487652);else{if(_0x487652['toString']()[_0x57a348(0x2e6)](_0x57a348(0x238))||_0x487652['toString']()['includes'](_0x57a348(0x14a)))_0x2f4d0d=_0x3260ee+_0x57a348(0x1a1),await pauseBot(undefined,_0x2f4d0d,_0x487652[_0x57a348(0x1c2)]());else{if(_0x487652[_0x57a348(0x1c2)]()[_0x57a348(0x2e6)](_0x57a348(0x2df)))_0x2f4d0d=_0x3260ee+_0x57a348(0x215),await pauseBot(undefined,_0x2f4d0d,_0x487652[_0x57a348(0x1c2)]());else{if(_0x487652[_0x57a348(0x1c2)]()[_0x57a348(0x2e6)](_0x57a348(0x288)))_0x2f4d0d=_0x3260ee+_0x57a348(0x28a),await pauseBot(undefined,_0x2f4d0d,_0x487652[_0x57a348(0x1c2)]());else{if(_0x487652['toString']()[_0x57a348(0x2b4)]()[_0x57a348(0x2e6)](_0x57a348(0x159))||_0x487652[_0x57a348(0x1c2)]()['toLowerCase']()[_0x57a348(0x2e6)](_0x57a348(0x217)))_0x2f4d0d=_0x57a348(0x236),await pauseBot(undefined,_0x2f4d0d,_0x487652['toString']());else{if(_0x487652[_0x57a348(0x1c2)]()['includes'](_0x57a348(0x174)))_0x2f4d0d=_0x3260ee+'\x20rejected\x20your\x20API\x20request\x20(see:\x20hodlerhacks.com/fix/4)',await pauseBot(undefined,_0x2f4d0d,_0x487652[_0x57a348(0x1c2)]());else{if(_0x487652 instanceof ccxt[_0x57a348(0x1ac)])_0x2f4d0d=_0x3260ee+_0x57a348(0x22d)+_0x487652['toString'](),logger[_0x57a348(0x28f)](_0x57a348(0x1f2),_0x487652),await pauseBot(undefined,_0x2f4d0d,_0x487652);else{if(_0x487652[_0x57a348(0x1c2)]()[_0x57a348(0x2e6)](_0x57a348(0x147)))logHistory(_0x57a348(0x19c),_0x3260ee+'\x20API\x20key\x20is\x20invalid'),logHistory(_0x57a348(0x19c),_0x57a348(0x2cd)),await killBot();else{if(_0x487652[_0x57a348(0x1c2)]()[_0x57a348(0x2e6)](_0x57a348(0x166)))logHistory(_0x57a348(0x19c),_0x3260ee+'\x20API\x20secret\x20is\x20invalid'),logHistory(_0x57a348(0x19c),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)'),await killBot();else{if(_0x487652[_0x57a348(0x1c2)]()[_0x57a348(0x2e6)](_0x57a348(0x12d))&&_0x487652['toString']()[_0x57a348(0x2e6)]('token\x20is\x20expired'))_0x2f4d0d=_0x3260ee+_0x57a348(0x228),await pauseBot(undefined,_0x2f4d0d,_0x487652,!![]);else{if(_0x487652['toString']()[_0x57a348(0x2e6)](_0x57a348(0x12d)))config['apiPassword']?_0x2f4d0d=_0x3260ee+'\x20API\x20key,\x20secret\x20or\x20password\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange':_0x2f4d0d=_0x3260ee+'\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange',logHistory(_0x57a348(0x19c),_0x2f4d0d),logHistory(_0x57a348(0x19c),_0x57a348(0x2cd)),await killBot();else{if(_0x487652['toString']()[_0x57a348(0x2e6)](_0x57a348(0x1a2)))logHistory(_0x57a348(0x19c),_0x3260ee+_0x57a348(0x1af)),logHistory('error',_0x57a348(0x2cd)),await killBot();else{if(_0x487652[_0x57a348(0x1c2)]()[_0x57a348(0x2e6)]('InsufficientFunds'))logHistory(_0x57a348(0x19c),_0x57a348(0x2af)+_0x30dcea),logger[_0x57a348(0x28f)]('Error\x20details:',_0x487652);else{if(_0x487652 instanceof ccxt['ExchangeError']){_0x2f4d0d=_0x3260ee+_0x57a348(0x2ea)+_0x487652[_0x57a348(0x1c2)]();if(_0x30dcea)_0x2f4d0d+=_0x57a348(0x1b4)+_0x30dcea;await pauseBot(undefined,_0x2f4d0d,_0x487652);}else{_0x2f4d0d='Unknown\x20error:\x20'+_0x487652[_0x57a348(0x1c2)]();if(_0x30dcea)_0x2f4d0d+='\x0aSymbol(s):\x20'+_0x30dcea;await pauseBot(undefined,_0x2f4d0d);}}}}}}}}}}}}}}}}function decryptRSA(_0x4286b5,_0x3f0341){const _0x437248=_0x48d848,_0x4ca7a3=forge['pki'][_0x437248(0x2d6)](_0x4286b5),_0x4e0f36=_0x4ca7a3[_0x437248(0x2d9)](forge['util'][_0x437248(0x142)](_0x3f0341),_0x437248(0x16a),{'md':forge['md']['sha256'][_0x437248(0x29f)](),'mgf1':{'md':forge['md']['sha256'][_0x437248(0x29f)]()}});return _0x4e0f36;}async function withRetry(_0x4468de,_0x4970c2){const _0x10f221=_0x48d848;let _0x55030f=![],_0x2a63d1=0x0,_0x50233b,_0x4b6728;while(_0x2a63d1<maxRetries){try{_0x50233b=await _0x4970c2();break;}catch(_0xd000ea){_0x4b6728=_0xd000ea,!_0x55030f?(_0x55030f=!![],logger[_0x10f221(0x28f)](_0x10f221(0x268)+_0x4468de+':',_0xd000ea[_0x10f221(0x1c2)]())):await sleep(retryInterval);}_0x2a63d1++;}if(_0x2a63d1==0x0)return _0x50233b;if(_0x2a63d1>=maxRetries)throw _0x4b6728;else return logger['debug']('RETRY\x20-\x20Problem\x20resolved\x20after\x20'+_0x2a63d1+_0x10f221(0x1a5)),_0x50233b;}function formatResult(_0x4ada31,_0x2863b3){const _0x3e9dd5=_0x48d848;return parseFloat(_0x4ada31[_0x3e9dd5(0x15e)](_0x2863b3));}function formatResultTruncate(_0x342a48,_0x2012f2){let _0x1b2bac=formatResultString(_0x342a48,0xa),_0x397670=_0x1b2bac['indexOf']('.');return _0x397670!=-0x1&&(_0x1b2bac=_0x1b2bac['slice'](0x0,_0x397670+_0x2012f2+0x1)),Number(_0x1b2bac);}function formatResultString(_0x1440b0,_0x57481c){const _0x169cf6=_0x48d848;let _0x295d46;if(!(''+_0x1440b0)[_0x169cf6(0x2e6)]('e'))_0x295d46=+(Math[_0x169cf6(0x1ca)](_0x1440b0+'e+'+_0x57481c)+'e-'+_0x57481c);else{let _0x1dafda=(''+_0x1440b0)[_0x169cf6(0x203)]('e'),_0x125841='';+_0x1dafda[0x1]+_0x57481c>0x0&&(_0x125841='+'),_0x295d46=+(Math[_0x169cf6(0x1ca)](+_0x1dafda[0x0]+'e'+_0x125841+(+_0x1dafda[0x1]+_0x57481c))+'e-'+_0x57481c);}return Number(_0x295d46)[_0x169cf6(0x15e)](_0x57481c);}function getServerTime(){const _0x4e5a89=_0x48d848,_0x283905=new Date();return _0x283905[_0x4e5a89(0x1a3)]()+'/'+(_0x283905['getMonth']()+0x1)[_0x4e5a89(0x1c2)]()[_0x4e5a89(0x2e5)](0x2,'0')+'/'+_0x283905[_0x4e5a89(0x2f4)]()[_0x4e5a89(0x1c2)]()['padStart'](0x2,'0')+'\x20'+_0x283905[_0x4e5a89(0x22f)]()[_0x4e5a89(0x1c2)]()[_0x4e5a89(0x2e5)](0x2,'0')+':'+_0x283905['getMinutes']()[_0x4e5a89(0x1c2)]()['padStart'](0x2,'0')+':'+_0x283905[_0x4e5a89(0x256)]()['toString']()[_0x4e5a89(0x2e5)](0x2,'0');}function getTimeStamp(){const _0xd1a1d4=_0x48d848,_0x18720e=shiftedTime();return _0x18720e[_0xd1a1d4(0x1a3)]()+'/'+(_0x18720e[_0xd1a1d4(0x13f)]()+0x1)['toString']()[_0xd1a1d4(0x2e5)](0x2,'0')+'/'+_0x18720e[_0xd1a1d4(0x2f4)]()[_0xd1a1d4(0x1c2)]()[_0xd1a1d4(0x2e5)](0x2,'0')+'\x20'+_0x18720e['getHours']()[_0xd1a1d4(0x1c2)]()[_0xd1a1d4(0x2e5)](0x2,'0')+':'+_0x18720e[_0xd1a1d4(0x1cb)]()['toString']()[_0xd1a1d4(0x2e5)](0x2,'0')+':'+_0x18720e[_0xd1a1d4(0x256)]()[_0xd1a1d4(0x1c2)]()[_0xd1a1d4(0x2e5)](0x2,'0');}function getDate(){const _0x342ac1=_0x48d848,_0x2e0d67=shiftedTime();return _0x2e0d67[_0x342ac1(0x1a3)]()+'/'+(_0x2e0d67[_0x342ac1(0x13f)]()+0x1)[_0x342ac1(0x1c2)]()[_0x342ac1(0x2e5)](0x2,'0')+'/'+_0x2e0d67[_0x342ac1(0x2f4)]()[_0x342ac1(0x1c2)]()[_0x342ac1(0x2e5)](0x2,'0');}function getHour(){const _0xe7ef3d=_0x48d848,_0x4fee5f=shiftedTime();return _0x4fee5f[_0xe7ef3d(0x22f)]()[_0xe7ef3d(0x1c2)]()['padStart'](0x2,'0');}function sleep(_0x47b35f){return new Promise(_0x9d8973=>setTimeout(_0x9d8973,_0x47b35f));}function shiftedTime(){const _0x290c8a=_0x48d848,_0xe145e=new Date();let _0x3eea58=_0xe145e;if(config&&config[_0x290c8a(0x300)]!==0x0)_0x3eea58=fns['add'](_0xe145e,{'hours':config['timeshift']});return _0x3eea58;}function timer(_0x4f45c3){const _0x3288c6=_0x48d848,_0x3e7b28=new Date();!lasttime?console['log'](getTimeStamp()+':\x20timer\x20>',_0x4f45c3,_0x3e7b28):console[_0x3288c6(0x2a0)](getTimeStamp()+_0x3288c6(0x2b0),_0x4f45c3,(_0x3e7b28-lasttime)/0x3e8),lasttime=_0x3e7b28;}