const _0xf0755a=_0x59ce;(function(_0x5e91b4,_0x506eee){const _0xd8ec45=_0x59ce,_0x3b4db2=_0x5e91b4();while(!![]){try{const _0x7175ca=-parseInt(_0xd8ec45(0x180))/0x1+-parseInt(_0xd8ec45(0x2d7))/0x2*(-parseInt(_0xd8ec45(0x15f))/0x3)+parseInt(_0xd8ec45(0x2f5))/0x4+-parseInt(_0xd8ec45(0x1c4))/0x5+-parseInt(_0xd8ec45(0x2a5))/0x6*(-parseInt(_0xd8ec45(0x177))/0x7)+parseInt(_0xd8ec45(0x1f7))/0x8+parseInt(_0xd8ec45(0x209))/0x9*(-parseInt(_0xd8ec45(0x2ed))/0xa);if(_0x7175ca===_0x506eee)break;else _0x3b4db2['push'](_0x3b4db2['shift']());}catch(_0x3f1af9){_0x3b4db2['push'](_0x3b4db2['shift']());}}}(_0x3726,0x933bf));const _0x53aa70=function(){let _0x1b97a7=!![];return function(_0x54cf55,_0x5a21f1){const _0x26dbf1=_0x1b97a7?function(){const _0x242d1b=_0x59ce;if(_0x5a21f1){const _0x3714e8=_0x5a21f1[_0x242d1b(0x1e6)](_0x54cf55,arguments);return _0x5a21f1=null,_0x3714e8;}}:function(){};return _0x1b97a7=![],_0x26dbf1;};}(),_0x2a48ec=_0x53aa70(this,function(){const _0x5dd3f0=_0x59ce;return _0x2a48ec[_0x5dd3f0(0x2a4)]()[_0x5dd3f0(0x2ba)](_0x5dd3f0(0x17e))[_0x5dd3f0(0x2a4)]()[_0x5dd3f0(0x2cc)](_0x2a48ec)[_0x5dd3f0(0x2ba)]('(((.+)+)+)+$');});_0x2a48ec();'use strict';const ccxt=require(_0xf0755a(0x149)),low=require('lowdb'),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require(_0xf0755a(0x27a)),forge=require(_0xf0755a(0x1d6)),util=require('util'),argv=require(_0xf0755a(0x2f6))(process[_0xf0755a(0x13f)][_0xf0755a(0x1cd)](0x2))[_0xf0755a(0x13f)],path=require(_0xf0755a(0x264)),axios=require(_0xf0755a(0x15e));let exchange,gTicker={},gChange={};const usdBasecoins=['USD','BUSD','TUSD',_0xf0755a(0x1b2),_0xf0755a(0x212),'USDP'],excludedExchanges=[_0xf0755a(0x238)],debugging=argv['d']||![];let pnlGenerationNeeded=argv['r']||![],config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0xf0755a(0x15c)]({'LOCKED':0x0,'UNLOCKING':0x1,'UNLOCKED':0x2});let lockOrders=ORDERS[_0xf0755a(0x27f)],validateOrdersState,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotIntervalShort=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0xf0755a(0x2d9)+pauseBotInterval/0xea60+_0xf0755a(0x14b),maxPauseRetries=0x6,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,watchTransactionsInterval=0x3c*0x3e8,schedulerInterval=0x3c*0x3c*0x3e8,retryInterval=0x3e8,maxRetries=0x5,logPageSize=0x14,defaultFee=0.003;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidOrdersInitialTimeout,pidOrdersTimeout,botPaused=![],transactionDetectionOngoing=![],lastCoinsToBalance='',exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x5dc,balanceUpdateRetries=0x5;let enableFiatToggle;const serverversion=require(_0xf0755a(0x24e))[_0xf0755a(0x2fb)],environment=require('./version.json')[_0xf0755a(0x2c4)]||_0xf0755a(0x198),botID=process[_0xf0755a(0x13f)][0x2]||'001',pattern=/^[0-9]{3}$/;!pattern[_0xf0755a(0x191)](botID)&&(console[_0xf0755a(0x2c2)](_0xf0755a(0x230)+botID+_0xf0755a(0x18d)),killBot());const userID=process[_0xf0755a(0x13f)][0x3]||'',configpath=userID?_0xf0755a(0x2aa)+userID+'/':_0xf0755a(0x2aa),logspath=userID?_0xf0755a(0x137)+userID+'/':'./logs/',loggerfile=fs[_0xf0755a(0x282)](logspath+_0xf0755a(0x14c),{'flags':'a'});!fs['existsSync'](configpath)&&fs[_0xf0755a(0x20c)](configpath);!fs['existsSync'](logspath)&&fs[_0xf0755a(0x20c)](logspath);const configfile=configpath+'bot-'+botID+'-config.json',logfile=configpath+_0xf0755a(0x2f2)+botID+'-events.json',performancefile=configpath+'bot-'+botID+_0xf0755a(0x185),coinresultsfile=configpath+'bot-'+botID+_0xf0755a(0x187),settingsfile=configpath+_0xf0755a(0x1cf),securefile=configpath+_0xf0755a(0x254),configbackuppath=configpath+_0xf0755a(0x2bc),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs['defaults']({'logs':[],'version':serverversion})[_0xf0755a(0x189)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0xf0755a(0x214)]({'data':[],'version':serverversion})[_0xf0755a(0x189)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig['defaults']({'bot':[],'version':serverversion})[_0xf0755a(0x189)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0xf0755a(0x214)]({'coins':{},'version':serverversion})['write']();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0,settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x330705=>{const _0x15374f=_0xf0755a;console[_0x15374f(0x2c2)](_0x330705);},'simple':_0x46cfd7=>{const _0x23bd13=_0xf0755a;console[_0x23bd13(0x2c2)](_0x46cfd7),loggerfile['write'](util[_0x23bd13(0x2ff)](_0x46cfd7)+'\x0a');},'full':async(_0x25f153,_0xfe94c1='')=>{const _0x521bce=_0xf0755a;let _0x3837c5;if(config[_0x521bce(0x18f)])_0x3837c5=getTimeStamp()+':\x20'+config[_0x521bce(0x1fc)]+_0x521bce(0x134)+_0x25f153;else _0x3837c5=getTimeStamp()+_0x521bce(0x2d3)+botID+_0x521bce(0x134)+_0x25f153;console['log'](_0x3837c5),loggerfile[_0x521bce(0x189)](util[_0x521bce(0x2ff)](_0x3837c5)+'\x0a'),_0xfe94c1&&(console[_0x521bce(0x2c2)](_0xfe94c1),loggerfile[_0x521bce(0x189)](util[_0x521bce(0x2ff)](_0xfe94c1)+'\x0a'));},'debug':async(_0x2d61a3,_0x12a0a2='')=>{const _0x2c97ec=_0xf0755a;let _0x3ac07d;if(config[_0x2c97ec(0x18f)])_0x3ac07d=getTimeStamp()+':\x20'+config[_0x2c97ec(0x1fc)]+'\x20>\x20[DEBUG]\x20'+_0x2d61a3;else _0x3ac07d=getTimeStamp()+_0x2c97ec(0x2d3)+botID+'\x20>\x20[DEBUG]\x20'+_0x2d61a3;if(debugging)console['log'](_0x3ac07d);loggerfile[_0x2c97ec(0x189)](util[_0x2c97ec(0x2ff)](_0x3ac07d)+'\x0a');if(_0x12a0a2){if(debugging)console[_0x2c97ec(0x2c2)](_0x12a0a2);loggerfile[_0x2c97ec(0x189)](util['format'](_0x12a0a2)+'\x0a');}}};process['on']('uncaughtException',function(_0x45ef1c){const _0x5473ef=_0xf0755a;handleError(_0x45ef1c[_0x5473ef(0x22c)],_0x5473ef(0x2f8));});settings[_0xf0755a(0x279)]!=config[_0xf0755a(0x279)]&&updateTimeshift(settings['timeshift']);settings[_0xf0755a(0x253)]!=config[_0xf0755a(0x253)]&&updateOnepagemode(settings[_0xf0755a(0x253)]);(settings['marketcapApi']&&!config[_0xf0755a(0x24f)]||!settings['marketcapApi']&&config[_0xf0755a(0x24f)])&&updateMarketcapApi(settings[_0xf0755a(0x24f)]);process[_0xf0755a(0x294)]({'started':_0xf0755a(0x1fe)},_0x90f625=>{}),initializeProcessListeners();function proxyEmit(_0x205684,_0x27bfde=null){process['send']({'function':_0x205684,'args':_0x27bfde},_0xe297c4=>{});}function initializeProcessListeners(){const _0x589a8e=_0xf0755a;process['on'](_0x589a8e(0x289),_0x4efd1b=>{const _0x2f0c89=_0x589a8e;switch(Object[_0x2f0c89(0x1d7)](_0x4efd1b)[0x0]){case _0x2f0c89(0x279):_0x4efd1b['timeshift']!=undefined&&(settings['timeshift']=_0x4efd1b[_0x2f0c89(0x279)],updateTimeshift(settings[_0x2f0c89(0x279)]));break;case'onepagemode':_0x4efd1b['onepagemode']!=undefined&&(settings['onepagemode']=_0x4efd1b[_0x2f0c89(0x253)],updateOnepagemode(settings[_0x2f0c89(0x253)]));break;case _0x2f0c89(0x24f):_0x4efd1b[_0x2f0c89(0x24f)]!=undefined&&(settings['marketcapApi']=_0x4efd1b['marketcapApi'],updateMarketcapApi(settings[_0x2f0c89(0x24f)]));break;case'bots':_0x4efd1b[_0x2f0c89(0x296)]!=undefined&&(bots=JSON['parse'](_0x4efd1b[_0x2f0c89(0x296)]),proxyEmit(_0x2f0c89(0x296),bots));break;case _0x2f0c89(0x2b6):switch(_0x4efd1b['function']){case'initclient':initclient();break;case'toggleBotMode':toggleBotMode();break;case _0x2f0c89(0x16f):emitHistory(_0x4efd1b['args']);break;case _0x2f0c89(0x22b):deleteHistoryAlerts(_0x4efd1b[_0x2f0c89(0x16c)]);break;case _0x2f0c89(0x20a):getPortfolio(_0x4efd1b[_0x2f0c89(0x16c)]);break;case _0x2f0c89(0x2af):storeConfiguration(_0x4efd1b[_0x2f0c89(0x16c)]);break;case _0x2f0c89(0x1ad):storeHeadless(_0x4efd1b[_0x2f0c89(0x16c)]);break;case _0x2f0c89(0x2a3):storeFiat(_0x4efd1b[_0x2f0c89(0x16c)]);break;case _0x2f0c89(0x1c3):resetHistory();break;case _0x2f0c89(0x262):getStartingBalances(getNormalizedPerformance());break;case'placeOrder':placeOrder(_0x4efd1b[_0x2f0c89(0x16c)]);break;case'cancelLoading':cancelLoading();break;case _0x2f0c89(0x1ff):showConfig();break;case'sendMetricsTelegram':sendMetricsTelegram();break;case'sendPortfolioTelegram':sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x538a1a=![]){const _0x11b585=_0xf0755a;logger[_0x11b585(0x130)]('Reset\x20|\x20'+(_0x538a1a?_0x11b585(0x1a7):_0x11b585(0x1f2))+_0x11b585(0x144)+config[_0x11b585(0x2a9)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x538a1a)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x11b585(0x292)]!=''&&config[_0x11b585(0x292)]!='***'){loadingProgress=0x0;if(_0x538a1a){await initExchange();const _0x6fcf38=await testAPI();if(!_0x6fcf38)return;await loadSymbols(),loadingProgress=0x1,setStableCoins(),proxyEmit('configuration',emittedConfiguration()),initialPerformanceStored=![];}const _0x57b9fe=await getCoins();[currentCoins,currentCoinsAll]=_0x57b9fe,setBlockTransactionDetection(![]),startScheduler(),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x11b585(0x130)]('Loading\x20completed'),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x11b585(0x1f1)]==0x0&&allOpenOrders[_0x11b585(0x1f1)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(pnlGenerationNeeded)await generatePnL();}}async function resumeBot(_0x44d133=![]){const _0x461d29=_0xf0755a;logger[_0x461d29(0x130)](_0x461d29(0x23d)+(_0x44d133?_0x461d29(0x190):_0x461d29(0x1cb))+_0x461d29(0x19a)+config[_0x461d29(0x2a9)]);if(pidBalances)clearTimeout(pidBalances);if(_0x44d133){getBalances();return;}coinsLoaded=![];if(config[_0x461d29(0x292)]!=''&&config[_0x461d29(0x292)]!=_0x461d29(0x138)){loadingProgress=0x1;const _0x1cc83e=await getCoins();[currentCoins,currentCoinsAll]=_0x1cc83e,setBlockTransactionDetection(![]),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x461d29(0x130)]('Loading\x20completed'),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x461d29(0x1f1)]==0x0&&allOpenOrders[_0x461d29(0x1f1)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();}}async function getMarketCap(_0x54932c){const _0x23cbc0=_0xf0755a;let _0x367ec1=![];if(_0x54932c)_0x367ec1=!![];let _0x247c2c;_0x367ec1?_0x247c2c=_0x54932c[_0x23cbc0(0x194)](_0x1b1ac9=>_0x1b1ac9[_0x23cbc0(0x21f)]):_0x247c2c=currentCoinsAll['map'](_0x59c18d=>_0x59c18d[_0x23cbc0(0x21f)]);if(!config[_0x23cbc0(0x24f)]||!_0x367ec1&&!config[_0x23cbc0(0x1ab)]||_0x247c2c[_0x23cbc0(0x1f1)]==0x0)return;let _0x1f937f=null;try{_0x1f937f=await axios['get'](_0x23cbc0(0x203),{'headers':{'X-CMC_PRO_API_KEY':settings[_0x23cbc0(0x24f)]},'params':{'symbol':_0x247c2c['toString']()}});}catch(_0xebdbe){_0x1f937f=null,_0xebdbe[_0x23cbc0(0x2a4)]()[_0x23cbc0(0x277)](_0x23cbc0(0x20d))?(config['marketcapApi']=![],updateConfig(),proxyEmit(_0x23cbc0(0x154),emittedConfiguration()),logHistory(_0x23cbc0(0x1db),_0x23cbc0(0x1e0))):(logHistory('error',_0x23cbc0(0x2b4)+schedulerInterval/(0x3c*0x3e8)+_0x23cbc0(0x14b)),logger[_0x23cbc0(0x130)]('Error\x20details:',_0xebdbe[_0x23cbc0(0x2a4)]()+'\x20-\x20'+_0xebdbe['code']));}if(_0x1f937f){let _0x4881a8=0x0;const _0x313658=_0x1f937f[_0x23cbc0(0x166)];_0x247c2c['forEach'](_0x31fd3c=>{const _0x463380=_0x23cbc0;if(_0x313658['data'][_0x31fd3c][0x0])_0x4881a8+=_0x313658[_0x463380(0x166)][_0x31fd3c][0x0][_0x463380(0x21d)]['USD'][_0x463380(0x25d)];}),_0x247c2c[_0x23cbc0(0x256)](_0x59ce01=>{const _0x228566=_0x23cbc0,_0x45b60b=_0x313658[_0x228566(0x166)][_0x59ce01][0x0]?_0x313658[_0x228566(0x166)][_0x59ce01][0x0]['quote'][_0x228566(0x1c0)][_0x228566(0x25d)]:0x0;if(_0x367ec1){const _0x4fc3f5=_0x54932c[_0x228566(0x2f1)](_0x96d556=>_0x96d556[_0x228566(0x21f)]==_0x59ce01);_0x4fc3f5&&(_0x4fc3f5[_0x228566(0x199)]=_0x45b60b);}else{const _0x4aaef6=currentCoins[_0x228566(0x2f1)](_0x25ba7c=>_0x25ba7c['coin']==_0x59ce01);_0x4aaef6&&(_0x4aaef6[_0x228566(0x199)]=_0x45b60b);const _0x1284bf=currentCoinsAll[_0x228566(0x2f1)](_0x5822bd=>_0x5822bd[_0x228566(0x21f)]==_0x59ce01);_0x1284bf&&(_0x1284bf[_0x228566(0x199)]=_0x45b60b);}}),!_0x367ec1&&updateTargetDistribution();}}function updateTargetDistribution(){const _0x3b7a1f=_0xf0755a,_0x5adc23=0x2;let _0x34d182=0x0,_0x30dd74=0x0,_0x4ec983=0x0,_0x28fc74=0x0,_0x2e9a63=0x0;config[_0x3b7a1f(0x1c9)][_0x3b7a1f(0x256)](_0x2ccd19=>{const _0x2661b4=_0x3b7a1f;if(!_0x2ccd19[_0x2661b4(0x13a)]){_0x4ec983++,_0x34d182+=_0x2ccd19['slider'];if(_0x2ccd19[_0x2661b4(0x179)]===-0x1){_0x34d182++;const _0x5adea8=currentCoinsAll['find'](_0x32e27e=>_0x32e27e['coin']==_0x2ccd19[_0x2661b4(0x21f)]);_0x5adea8&&(_0x28fc74+=_0x5adea8[_0x2661b4(0x199)],_0x2e9a63+=Math[_0x2661b4(0x2d0)](_0x5adea8[_0x2661b4(0x199)]));}if(_0x2ccd19[_0x2661b4(0x179)]!==-0x1)_0x30dd74++;}});let _0x4b7e94;const _0x51e74b=0x64-_0x34d182,_0x2a1f35=_0x4ec983-_0x30dd74;_0x4b7e94=_0x2a1f35===0x0?_0x34d182:Math['max'](0x64,_0x34d182),config['portfolio'][_0x3b7a1f(0x256)](_0x4bbaf3=>{const _0x2f6e08=_0x3b7a1f,_0x3bacf4=currentCoinsAll[_0x2f6e08(0x2f1)](_0x38ac5c=>_0x38ac5c[_0x2f6e08(0x21f)]==_0x4bbaf3['coin']);_0x3bacf4&&(_0x4bbaf3[_0x2f6e08(0x199)]=_0x3bacf4[_0x2f6e08(0x199)]);if(!_0x4bbaf3[_0x2f6e08(0x13a)]){if(_0x4b7e94<=0x64){if(_0x4bbaf3['slider']===-0x1){if(_0x28fc74!==0x0&&config[_0x2f6e08(0x1ab)]){if(_0x3bacf4){if(config[_0x2f6e08(0x1ab)]==_0x2f6e08(0x199))_0x4bbaf3['distribution']=(_0x51e74b/(_0x28fc74/_0x3bacf4[_0x2f6e08(0x199)]))[_0x2f6e08(0x2d4)](_0x5adc23);else config['marketcapEnabled']==_0x2f6e08(0x288)&&(_0x4bbaf3[_0x2f6e08(0x273)]=(_0x51e74b/(_0x2e9a63/Math[_0x2f6e08(0x2d0)](_0x3bacf4[_0x2f6e08(0x199)])))['toFixed'](_0x5adc23));}}}}}}),updateConfig();}function updateConfig(){const _0x58e5dc=_0xf0755a;let _0x3ad354=dbConfig[_0x58e5dc(0x1a2)](_0x58e5dc(0x217))[_0x58e5dc(0x2f1)]({'botID':botID})[_0x58e5dc(0x23c)]();_0x3ad354&&dbConfig[_0x58e5dc(0x1a2)](_0x58e5dc(0x217))[_0x58e5dc(0x2f1)]({'botID':botID})[_0x58e5dc(0x150)](config)[_0x58e5dc(0x189)]();}function logMemory(){const _0xd28b4d=_0xf0755a;if(environment!=_0xd28b4d(0x26b))return;const _0x260740=process[_0xd28b4d(0x215)]()[_0xd28b4d(0x13d)]/0x400/0x400;logger[_0xd28b4d(0x130)](_0xd28b4d(0x2ea)+process['pid']+_0xd28b4d(0x29b)+formatResult(_0x260740,0x1)+'\x20MB');}async function startScheduler(){const _0x3bc1b5=shiftedTime()['getHours']();getMarketCap(),loadSymbols(),_0x3bc1b5==0x1&&logMemory(),await sleep(schedulerInterval),startScheduler();}async function restartBot(_0x13531b=![]){const _0x1e5a80=_0xf0755a;logger[_0x1e5a80(0x130)](_0x1e5a80(0x284));if(!_0x13531b)while(lockOrders!=ORDERS[_0x1e5a80(0x27f)]||coolingDown){await sleep(0x3e8);}process[_0x1e5a80(0x294)]({'stop':'restart'},_0x3c3d98=>{});}function _0x3726(){const _0x195988=['none','marketcapsqrt','message','balancing\x20resumes\x20when\x20cooldown\x20ends','remove','testAPI()','/USDT','Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute','padStart','has','change','apiKey','ongoing','send','Updating\x20API\x20key\x20(not\x20saved\x20in\x20config\x20file\x20yet)','bots','entries','starting-balances','Initializing\x20exchange','buy','\x20uses\x20','max','\x20API\x20key,\x20secret\x20or\x20password\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','closed','1\x20-\x20FILLED\x20known\x20order:\x20','market','update-liquidity','\x20API\x20key\x20is\x20invalid','storeFiat','toString','59406NSuLFP','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','1\x20-\x20partially\x20FILLED\x20(','splice','exchange','./config/','ordertype','botID','loadSymbols()','join','storeConfiguration','emojibuy','2.6.0','added','percentage','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20trying\x20again\x20in\x20','Order\x20is\x20invalid:\x20','function','Market','testApi','.json','search','target','/backup/','red_yellow_blue','/EUR','InsufficientFunds','getMinutes','indexOf','log','BTC','environment','open','\x20minutes\x20-\x20','\x20|\x20highest\x20fee:\x20','\x20exchange','2\x20-\x20handling\x20FILLED\x20order:\x20','fetchTickers()','push','constructor','Block\x20transaction\x20detection:\x20','addDays','shift','sqrt','Huobipro','Initializing\x20coin\x20results',':\x20Bot\x20','toFixed','configuration-stored','toUpperCase','108010OWcEOu','filled','\x20>\x20pausing\x20bot\x20for\x20','no\x20open\x20orders','page','colorscheme','getTime','apiPassword','exchanges','Avoiding\x20continuous\x20order\x20attempts','</pre>','Value\x20','privateKeyFromPem','parse','startsWith','cost','\x0aSymbol(s):\x20','Net\x20','decrypt','process\x20','sort','fetchTicker','10gDOgcz','net','stringify','watchTrades()','find','bot-','recent20','recreate','1621428OxFTRT','yargs/yargs','reverse','uncaughtException','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','net-fiat','version','padEnd','valid','unlinkSync','format','bid','basecoinvalue','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','PnL\x20','ExchangeError','\x20-\x20bot\x20not\x20started','debug','type','performance','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','\x20>\x20','configstate','API-key\x20format\x20invalid','./logs/','***','date','excluded','Waited\x20','final','heapUsed','startprice','argv','ExchangeNotAvailable','breakeven','Error\x20in\x20loadSymbols():\x20','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','\x20|\x20exchange:\x20','2\x20-\x20Handled\x20open\x20orders','2.7.1','basecoin','RequestTimeout','ccxt','match','\x20minutes','/output-000.log','\x20|\x20lock\x20orders:\x20','-------------------------------\x0a','Portfolio\x20change\x20detected:\x20','assign','writeFile','Bitget','set','configuration','cooldown','settings','watchTradesForSymbols()','\x20blocked\x20API\x20(DDoSProtection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','pnl','InvalidNonce','InvalidOrder','freeze','currency','axios','63uXaBzG','getMonth','watchTrades','token\x20is\x20expired','recovery','1\x20-\x20FILLED\x20unknown\x20order:\x20','differenceInSeconds','data','string','NetworkError','logs','<b>Bot\x20','Failed\x20to\x20load\x20coin\x20data\x20for\x20','args','\x20>\x20stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','Error\x20details:\x20','emitHistory','Bybit','\x20orders\x20in\x20less\x20than\x20','sells','switch-manual','Saving\x20configuration','\x20hour','change24h','7FqpfmN','Order\x20filled:\x20','slider','amount','orderstatus','cancel','pnl-basecoin','(((.+)+)+)+$','Order(s)\x20not\x20validated\x20after\x20','254911kENLhk','BNB/','delta','fee','portfolio2','-performance.json','Cex','-results.json','UNLOCKING','write','2\x20-\x20Validate\x20orders:\x20','min','request-time',',\x20must\x20be\x20a\x203\x20digit\x20number','Unfilled\x20order(s)\x20canceled\x20after\x20','showname','quick','test','\x20metrics:</b>\x20\x0a\x0a','\x20network\x20error:\x20','map','RETRY\x20-\x20Error\x20in\x20','must\x20be\x20greater\x20than\x20minimum\x20amount','event','production','marketcap',')\x20|\x20exchange:\x20','eur','\x20has\x20a\x2024h\x20drop\x20of\x20','filter','<b>','coins','Exchange','average','get','Fee\x20discount\x20refund\x20detected:\x20','\x20closed\x20the\x20connection\x20(see:\x20hodlerhacks.com/fix/5)','prevnumber','No\x20more\x20open\x20orders\x20-\x20','exchange\x20reload','toLowerCase','PermissionDenied','privateKey','marketcapEnabled','active','storeHeadless','removed','cancelOrder','event-history','Huobi','USDT','getFullYear','headless','Manual\x20balancing\x20required','abs','trade',')\x20unknown\x20order:\x20','number','\x20exchange\x20error:\x20','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','last','fetchOpenOrders','substring',':\x20timer\x20>','USD','portfolio1','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','resetHistory','2124005fEHxty','getDate','1\x20-\x20Handle\x20open\x20orders','side','Error\x20in\x20testNewAPI():\x20','portfolio','watchOrders','complete','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','slice','secure','bb-settings.json','existsSync','price','Binance','%)\x0a','full','loading-canceled','node-forge','keys','emojisell','EUR','remainingSymbols','error','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','\x20rejected\x20your\x20API\x20request\x20(see:\x20hodlerhacks.com/fix/4)','RateLimitExceeded','cloneDeep','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','decode64','Headless:\x20','Pausing\x20for\x20','sha256','customId','apply','Invalid\x20API\x20details,\x20please\x20try\x20again\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','split','initial','getHours','RSA-OAEP','\x20API\x20secret\x20is\x20invalid','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','\x20attempts','Error\x20details:','\x20-\x20bot\x20already\x20running\x20in\x20manual\x20mode','length','no\x20exchange\x20reloaded','ID:\x20','time','ETH','Failed\x20to\x20load\x20market\x20data\x20-\x20bot\x20not\x20started','8986968iiksUp','fetchBalance()','sell','round','Error\x20occurred:\x20','botname','replace','running','showConfig','\x20order:\x20','\x20|\x20Custom\x20ID:\x20','timeout','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','Executed\x20','offset','ask','fiat','12509559CbCzCs','getPortfolio','%\x20(','mkdirSync','status\x20code\x20401','Unknown\x20error\x20-\x20check\x20logs','Invalid\x20balance\x20for\x20','util','autoliquidity','USDC','liquidity','defaults','memoryUsage','warning','bot','startnumber','progress','yyyy/MM/dd','-events.json','Limit\x20(low-margin)','quote','order','coin','/USD','2.3.5','amountToPrecision','usd',')\x20known\x20order:\x20','create','buys','\x20not\x20responding\x20(see:\x20hodlerhacks.com/fix/5)','realizedPnL','balancing\x20resumed','apiSecret','deleteHistoryAlerts','stack','add','AuthenticationError','************','Error:\x20Invalid\x20argument\x20','balances','Market\x20order','Exchange\x20permission\x20denied\x20-\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','OnMaintenance','password','fromCodePoint','total','bitmex','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','pro','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','value','Resuming\x20(','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','pki','sortBy','isBefore','symbol','Generated\x20PnL\x20data','RETRY\x20-\x20Problem\x20resolved\x20after\x20','Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)','<pre>','fetchBalance','Resetting\x20bot\x20history','net-basecoin','threshold','canceled','Limit\x20(high-margin)','LOCKED','./version.json','marketcapApi','watchTradesForSymbols','orderId','starting-balance-','onepagemode','bb-secure.json','createOrder','forEach','findIndex','cancelOrders()','spot','Invalid\x20quantity','\x20blocked\x20API\x20(RateLimitExceeded)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','market_cap','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','PAXG','startdate','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','getStartingBalances','success','path','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','Test\x20new\x20API','fetchTickers','status','openOrders','Valid\x20balance\x20for\x20','staging','Order\x20filled','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)','limits','secret','Unknown\x20error:\x20','limit-high','limit-low','distribution','getSeconds','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','limit','includes','\x20portfolio:</b>\x20\x0a\x0a','timeshift','date-fns','changes','Trigger:\x20','Cryptocom','watchOrders()','UNLOCKED','timestamp','Network\x20error\x20details:','createWriteStream','\x20|\x20','Initiating\x20bot\x20restart','highest','isEqual'];_0x3726=function(){return _0x195988;};return _0x3726();}async function initExchange(_0x30db35=config[_0xf0755a(0x2a9)],_0x31895e=config[_0xf0755a(0x292)],_0x2729f8=config[_0xf0755a(0x22a)],_0x1edf16=config['apiPassword']){const _0x259a00=_0xf0755a;if(exchange){logger[_0x259a00(0x130)]('Initializing\x20exchange:\x20already\x20done');return;}logger['debug'](_0x259a00(0x299));!supportedExchanges()['includes'](_0x30db35)&&(logHistory(_0x259a00(0x1db),_0x259a00(0x12c)+_0x30db35+_0x259a00(0x2c8)),killBot());const _0x27a0f5=ccxt['pro'][_0x30db35['toLowerCase']()];exchange=new _0x27a0f5({'apiKey':_0x31895e,'secret':_0x2729f8,'options':{'defaultType':_0x259a00(0x259)}});if(_0x1edf16)exchange[_0x259a00(0x235)]=_0x1edf16;}function updateExchange(_0x5f2c37,_0x4b78ac,_0x494cd1=null){const _0x40931e=_0xf0755a;exchange['apiKey']=_0x5f2c37,exchange[_0x40931e(0x26f)]=_0x4b78ac,exchange[_0x40931e(0x235)]=_0x494cd1,logger[_0x40931e(0x130)](_0x40931e(0x295));}function setStableCoins(){const _0x4ea5fd=_0xf0755a;let _0x436a94=config[_0x4ea5fd(0x147)]==_0x4ea5fd(0x1f5)?'ETH':config[_0x4ea5fd(0x147)]==_0x4ea5fd(0x25f)?_0x4ea5fd(0x25f):_0x4ea5fd(0x2c3),_0x18a977=allSymbols[_0x4ea5fd(0x277)](_0x436a94+_0x4ea5fd(0x220))?_0x4ea5fd(0x1c0):allSymbols[_0x4ea5fd(0x277)](_0x436a94+_0x4ea5fd(0x28d))?_0x4ea5fd(0x1b2):'EUR',_0x3e6796=allSymbols[_0x4ea5fd(0x277)](_0x436a94+_0x4ea5fd(0x2be))?'EUR':_0x18a977;enableFiatToggle=!![],_0x18a977=='EUR'&&(enableFiatToggle=![],storeFiat(_0x4ea5fd(0x1d9))),_0x3e6796!=_0x4ea5fd(0x1d9)&&(enableFiatToggle=![],storeFiat(_0x4ea5fd(0x1c0))),stablecoins={'eur':{'coin':''+_0x436a94+_0x3e6796,'symbol':_0x436a94+'/'+_0x3e6796},'usd':{'coin':''+_0x436a94+_0x18a977,'symbol':_0x436a94+'/'+_0x18a977}};}async function initwsCcxt(){const _0x462a5a=_0xf0755a;initCycle++;const _0x36848b=initCycle;let _0x549189=[];config[_0x462a5a(0x1c9)][_0x462a5a(0x256)](_0x51d690=>{const _0xdc947e=_0x462a5a;if(!_0x51d690[_0xdc947e(0x13a)]&&_0x51d690[_0xdc947e(0x21f)]!=config['basecoin'])_0x549189[_0xdc947e(0x2cb)](_0x51d690['symbol']);});if(!_0x549189[_0x462a5a(0x277)](stablecoins[_0x462a5a(0x19b)][_0x462a5a(0x242)]))_0x549189[_0x462a5a(0x2cb)](stablecoins[_0x462a5a(0x19b)]['symbol']);if(!_0x549189[_0x462a5a(0x277)](stablecoins['usd'][_0x462a5a(0x242)]))_0x549189[_0x462a5a(0x2cb)](stablecoins[_0x462a5a(0x223)][_0x462a5a(0x242)]);if(config['exchange'][_0x462a5a(0x2e5)](_0x462a5a(0x1d2))&&config[_0x462a5a(0x147)]!=_0x462a5a(0x25f)){if(!_0x549189[_0x462a5a(0x277)](_0x462a5a(0x181)+config[_0x462a5a(0x147)]))_0x549189[_0x462a5a(0x2cb)]('BNB/'+config[_0x462a5a(0x147)]);}loadCoins(_0x549189),_0x549189=validateSymbols(_0x549189);const _0x371d18=async _0xd7090a=>{const _0x3cc8ff=_0x462a5a;let _0x5acce6;try{const _0x2b2d83=await getTickers(_0xd7090a);Object[_0x3cc8ff(0x297)](_0x2b2d83)[_0x3cc8ff(0x256)](_0x552cdd=>{const _0x1dff9b=_0x3cc8ff;_0x5acce6=_0x552cdd[0x1][_0x1dff9b(0x242)],gTicker[noslash(_0x5acce6)]=_0x552cdd[0x1][_0x1dff9b(0x1bc)],gChange[_0x5acce6]=_0x552cdd[0x1][_0x1dff9b(0x2b3)];});}catch(_0x2db003){await handleError(_0x2db003,'initTickers()',_0x5acce6);}},_0x4470b8=async _0x580a6b=>{const _0x135c74=_0x462a5a;while(initCycle==_0x36848b){if(!botPaused)try{const _0x21400b=await exchange[_0x135c74(0x161)](_0x580a6b);gTicker[noslash(_0x21400b[0x0][_0x135c74(0x242)])]=_0x21400b[0x0]['price'];}catch(_0x4a5b3a){if(!exchangeStopped)await handleError(_0x4a5b3a,_0x135c74(0x2f0),_0x580a6b);}else await sleep(0x64);}},_0x321e07=async _0x5a03dc=>{const _0x124af6=_0x462a5a;while(initCycle==_0x36848b){if(!botPaused)try{const _0x247310=await exchange[_0x124af6(0x250)](_0x5a03dc),_0x262c28=_0x247310['pop']();gTicker[noslash(_0x262c28[_0x124af6(0x242)])]=_0x262c28[_0x124af6(0x1d1)];}catch(_0x447ae7){if(!exchangeStopped)await handleError(_0x447ae7,_0x124af6(0x157),_0x5a03dc[_0x124af6(0x2a4)]());}else await sleep(0x64);}},_0x3d0468=async _0x350c16=>{const _0x49a3bb=_0x462a5a;while(initCycle==_0x36848b){if(!botPaused){let _0x32aedb;try{await sleep(0x3c*0x3e8);const _0x14f0d7=await getTickers(_0x350c16);Object[_0x49a3bb(0x297)](_0x14f0d7)[_0x49a3bb(0x256)](_0x5ebb49=>{const _0x46fdc5=_0x49a3bb;_0x32aedb=_0x5ebb49[0x1][_0x46fdc5(0x242)],gChange[_0x32aedb]=_0x5ebb49[0x1][_0x46fdc5(0x2b3)];});}catch(_0xe184a3){if(!exchangeStopped)await handleError(_0xe184a3,_0x49a3bb(0x2ca),_0x32aedb);}}else await sleep(0x64);}},_0x53de52=async _0x3b294c=>{const _0xb1bf29=_0x462a5a;while(initCycle==_0x36848b){if(!botPaused)try{const _0x17c28c=await exchange['watchOrders'](_0x3b294c);initCycle==_0x36848b&&_0x17c28c['forEach'](_0x482cfc=>{updateNumberCoinsCcxt(_0x482cfc);});}catch(_0xcb7730){if(!exchangeStopped)await handleError(_0xcb7730,_0xb1bf29(0x27e));}else await sleep(0x64);}};_0x371d18(_0x549189),_0x3d0468(_0x549189),exchange[_0x462a5a(0x290)][_0x462a5a(0x250)]&&!(config[_0x462a5a(0x2a9)]==_0x462a5a(0x170)&&_0x549189[_0x462a5a(0x1f1)]>0xa)?_0x321e07(_0x549189):_0x549189['forEach'](_0x322b84=>{_0x4470b8(_0x322b84);}),_0x549189[_0x462a5a(0x256)](_0x295130=>{_0x53de52(_0x295130);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x242ff0){const _0x279c8f=_0xf0755a;let _0xb72da5={};try{if(config[_0x279c8f(0x2a9)]!=_0x279c8f(0x27d))_0xb72da5=await exchange['fetchTickers'](_0x242ff0);else for(const _0x1f5d43 of _0x242ff0){const _0x5092bb=await exchange['fetchTicker'](_0x1f5d43);_0xb72da5[_0x1f5d43]=_0x5092bb;}return _0xb72da5;}catch(_0x4f0012){throw _0x4f0012;}}function setBlockTransactionDetection(_0xd70aaa){const _0x58e20e=_0xf0755a;blockTransactionDetection=_0xd70aaa,logger[_0x58e20e(0x130)](_0x58e20e(0x2cd)+blockTransactionDetection);}async function detectLiquidityChange(_0x6b36b9=0x0){const _0x40dc86=_0xf0755a;transactionDetectionOngoing=!![];try{const _0x3fb139=await getCoins(_0x6b36b9),[_0x6b98a0,_0x1e4edb]=_0x3fb139;let _0x118c01=[];currentCoins[_0x40dc86(0x256)](_0x254fc0=>{const _0xdb46b0=_0x40dc86,_0x36e556=_0x6b98a0[_0xdb46b0(0x2f1)](_0x446482=>_0x446482['coin']==_0x254fc0[_0xdb46b0(0x21f)]);if(_0x36e556){if(_0x254fc0[_0xdb46b0(0x1b9)]!=_0x36e556[_0xdb46b0(0x1b9)]){let _0x268b97;if(_0x254fc0['coin']!=config[_0xdb46b0(0x147)]){const _0x30f253=gTicker[noslash(_0x254fc0[_0xdb46b0(0x242)])];_0x268b97=_0x254fc0[_0xdb46b0(0x2f7)]?0x1/_0x30f253:_0x30f253;}else _0x268b97=0x1;_0x118c01[_0xdb46b0(0x2cb)]({'coin':_0x254fc0[_0xdb46b0(0x21f)],'symbol':_0x254fc0[_0xdb46b0(0x242)],'price':_0x268b97,'number':Number(formatResult(_0x36e556['number']-_0x254fc0['number'],0x8)),'basecoinvalue':_0x268b97*(_0x36e556['number']-_0x254fc0[_0xdb46b0(0x1b9)])});}}});if(_0x118c01[_0x40dc86(0x1f1)]>0x0&&!blockTransactionDetection){for(const _0x1bb956 of _0x118c01){if(config[_0x40dc86(0x211)]){logger[_0x40dc86(0x130)](_0x40dc86(0x1bb)+_0x1bb956[_0x40dc86(0x301)]+_0x40dc86(0x2c7)+lastFees[_0x40dc86(0x285)]);if(lastFees[_0x40dc86(0x285)]==0x0||Math['abs'](_0x1bb956[_0x40dc86(0x301)])>lastFees[_0x40dc86(0x285)]*0x3){if(config[_0x40dc86(0x211)]==_0x40dc86(0x2a1)){delete _0x1bb956[_0x40dc86(0x242)],delete _0x1bb956[_0x40dc86(0x301)];let _0x2bd489=[],_0x62d274=[...config['liquidity']]||[],_0x88a5d4=config['liquidity'];_0x62d274['sort']((_0x3ab03e,_0x2e7d43)=>_0x3ab03e[_0x40dc86(0x139)]>_0x2e7d43[_0x40dc86(0x139)]?-0x1:_0x2e7d43[_0x40dc86(0x139)]>_0x3ab03e['date']?0x1:0x0);const _0x17fccf=getDate();if(_0x62d274[0x0]){const _0x24934c=fns[_0x40dc86(0x2e4)](_0x62d274[0x0][_0x40dc86(0x139)],_0x40dc86(0x21a),new Date()),_0x487627=fns[_0x40dc86(0x2e4)](_0x17fccf,_0x40dc86(0x21a),new Date());if(fns[_0x40dc86(0x286)](_0x24934c,_0x487627)){_0x2bd489=_0x62d274[0x0]['changes'];const _0x2f28ac=_0x2bd489['find'](_0x9410e5=>_0x9410e5[_0x40dc86(0x21f)]==_0x1bb956['coin']);_0x2f28ac?(_0x2f28ac[_0x40dc86(0x1b9)]+=_0x1bb956[_0x40dc86(0x1b9)],_0x2f28ac[_0x40dc86(0x1b9)]==0x0&&(_0x2bd489=_0x2bd489[_0x40dc86(0x19d)](_0x27e854=>{const _0x448e36=_0x40dc86;return _0x27e854[_0x448e36(0x21f)]!=_0x1bb956[_0x448e36(0x21f)];}))):_0x2bd489[_0x40dc86(0x2cb)](_0x1bb956);const _0x53862d=_0x88a5d4['find'](_0x1d71a9=>_0x1d71a9[_0x40dc86(0x139)]==_0x17fccf);_0x53862d['changes']=_0x2bd489;}else _0x88a5d4['push']({'date':_0x17fccf,'changes':[_0x1bb956]});}const _0x1b61f6=_0x88a5d4[_0x40dc86(0x2f1)](_0x2205ac=>_0x2205ac[_0x40dc86(0x139)]==_0x17fccf);if(_0x1b61f6){let _0x1867fe=!![];_0x1b61f6[_0x40dc86(0x27b)][_0x40dc86(0x256)](_0x104098=>{const _0x1ee13a=_0x40dc86;if(_0x104098[_0x1ee13a(0x1b9)]!=0x0)_0x1867fe=![];}),_0x1867fe&&(_0x88a5d4=_0x88a5d4[_0x40dc86(0x19d)](_0xd6e48f=>{return _0xd6e48f['date']!=_0x17fccf;}));}let _0x31611c=dbConfig[_0x40dc86(0x1a2)](_0x40dc86(0x217))[_0x40dc86(0x2f1)]({'botID':botID})[_0x40dc86(0x23c)]();_0x31611c&&(dbConfig[_0x40dc86(0x1a2)](_0x40dc86(0x217))[_0x40dc86(0x2f1)]({'botID':botID})[_0x40dc86(0x150)]({'liquidity':_0x88a5d4})[_0x40dc86(0x189)](),config['liquidity']=_0x88a5d4);logHistory(_0x40dc86(0x263),_0x40dc86(0x14f)+Math[_0x40dc86(0x1b6)](_0x1bb956[_0x40dc86(0x1b9)])+'\x20'+_0x1bb956[_0x40dc86(0x21f)]+'\x20'+(_0x1bb956[_0x40dc86(0x1b9)]>0x0?'added':_0x40dc86(0x1ae))+_0x40dc86(0x25c)),proxyEmit(_0x40dc86(0x154),emittedConfiguration());const _0x1c2ecf=getNormalizedPerformance();emitPerformance(_0x1c2ecf),getStartingBalances(_0x1c2ecf),logger[_0x40dc86(0x130)]('Portfolio\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated');}else config['autoliquidity']==_0x40dc86(0x173)&&(config[_0x40dc86(0x1b4)]?(await storeHeadless({'headless':![]}),logHistory(_0x40dc86(0x263),'Portfolio\x20change\x20detected:\x20'+Math[_0x40dc86(0x1b6)](_0x1bb956[_0x40dc86(0x1b9)])+'\x20'+_0x1bb956[_0x40dc86(0x21f)]+'\x20'+(_0x1bb956[_0x40dc86(0x1b9)]>0x0?_0x40dc86(0x2b2):'removed')+'\x20-\x20bot\x20switched\x20to\x20manual\x20mode')):logger[_0x40dc86(0x130)](_0x40dc86(0x14f)+Math[_0x40dc86(0x1b6)](_0x1bb956['number'])+'\x20'+_0x1bb956[_0x40dc86(0x21f)]+'\x20'+(_0x1bb956[_0x40dc86(0x1b9)]>0x0?'added':_0x40dc86(0x1ae))+_0x40dc86(0x1f0)));}else logger['debug'](_0x40dc86(0x1a3)+Math[_0x40dc86(0x1b6)](_0x1bb956[_0x40dc86(0x1b9)])+'\x20'+_0x1bb956[_0x40dc86(0x21f)]+'\x20'+(_0x1bb956[_0x40dc86(0x1b9)]>0x0?_0x40dc86(0x2b2):_0x40dc86(0x1ae)));}else logger['debug'](_0x40dc86(0x14f)+Math[_0x40dc86(0x1b6)](_0x1bb956[_0x40dc86(0x1b9)])+'\x20'+_0x1bb956[_0x40dc86(0x21f)]+'\x20'+(_0x1bb956[_0x40dc86(0x1b9)]>0x0?'added':_0x40dc86(0x1ae))+_0x40dc86(0x204));}currentCoins=_0x6b98a0,currentCoinsAll=_0x1e4edb;}}catch(_0x4e3442){if(!exchangeStopped)await handleError(_0x4e3442,'detectLiquidityChange()');}transactionDetectionOngoing=![];}async function watchTransactions(){await sleep(0x14*0x3e8);while(!![]){!botPaused&&!blockTransactionDetection&&coinsLoaded?(detectLiquidityChange(),await sleep(watchTransactionsInterval)):await sleep(0x3e8);}}async function loadSymbols(){const _0x374696=_0xf0755a;try{markets=await exchange['loadMarkets'](!![]),allSymbols=[],Object[_0x374696(0x297)](markets)[_0x374696(0x256)](_0x32723b=>{const _0x33c6e9=_0x374696;_0x32723b[0x1][_0x33c6e9(0x1ac)]&&_0x32723b[0x1][_0x33c6e9(0x259)]&&allSymbols[_0x33c6e9(0x2cb)](_0x32723b[0x0]);});}catch(_0x3b9d77){markets?logger[_0x374696(0x130)](_0x374696(0x142)+_0x3b9d77[_0x374696(0x2a4)]()):(loading['cancel']=!![],emitLoadingProgress(),_0x3b9d77['toString']()[_0x374696(0x1a8)]()[_0x374696(0x277)](_0x374696(0x280))||_0x3b9d77['toString']()[_0x374696(0x1a8)]()[_0x374696(0x277)](_0x374696(0x18c))?logHistory(_0x374696(0x1db),_0x374696(0x245)):handleErrorNoStop(_0x3b9d77,_0x374696(0x2ad),!![]),logHistory('error',_0x374696(0x1f6)),logHistory(_0x374696(0x1db),_0x374696(0x1e3)+loadCoinsRetryInterval/0xea60+_0x374696(0x23e)),logger[_0x374696(0x130)](_0x374696(0x1ef),_0x3b9d77),botPaused=!![],await sleep(loadCoinsRetryInterval),restartBot());}}function validateSymbols(_0xdf62d5){const _0x55631f=_0xf0755a;let _0x1186d7=[];return _0xdf62d5[_0x55631f(0x256)](_0x317434=>{const _0x1c340d=_0x55631f;!allSymbols[_0x1c340d(0x277)](_0x317434)?logHistory(_0x1c340d(0x1db),'Invalid\x20symbol:\x20'+_0x317434+_0x1c340d(0x1c2)):_0x1186d7[_0x1c340d(0x2cb)](_0x317434);}),_0x1186d7;}async function initclient(){const _0x561bdc=_0xf0755a;proxyEmit('configuration',emittedConfiguration()),proxyEmit(_0x561bdc(0x2df),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x561bdc(0x231),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x50f31b=getNormalizedPerformance();emitPerformance(_0x50f31b),getStartingBalances(_0x50f31b);}async function toggleBotMode(){const _0x314c73=_0xf0755a;let _0x1c1aea=dbConfig['get'](_0x314c73(0x217))[_0x314c73(0x2f1)]({'botID':botID})[_0x314c73(0x23c)]();if(_0x1c1aea){const _0x122ae6=!_0x1c1aea[_0x314c73(0x1b4)];dbConfig[_0x314c73(0x1a2)](_0x314c73(0x217))[_0x314c73(0x2f1)]({'botID':botID})[_0x314c73(0x150)]({'headless':_0x122ae6})[_0x314c73(0x189)](),config[_0x314c73(0x1b4)]=_0x122ae6,proxyEmit(_0x314c73(0x154),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x4aa02d=_0xf0755a;process[_0x4aa02d(0x294)]({'updatebotmanager':!![]},_0x1c2976=>{}),logger[_0x4aa02d(0x130)](_0x4aa02d(0x1e2)+config[_0x4aa02d(0x1b4)]);}async function loadCoins(_0x40bf21){const _0x1c6477=_0xf0755a;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x4348f7,_0x827c33=0x0,_0x215b20=0x0;_0x40bf21[_0x1c6477(0x256)](_0x4200d9=>{const _0x55c624=_0x1c6477;loading[_0x55c624(0x1da)][_0x55c624(0x2cb)](_0x4200d9);}),loadingCanceled=![];let _0x240d2b=![];while(_0x4348f7!=_0x40bf21[_0x1c6477(0x1f1)]+maxLoadingProgress){_0x4348f7=loadingProgress,_0x40bf21[_0x1c6477(0x256)](_0x4f43d9=>{const _0x338920=_0x1c6477;if(gTicker[noslash(_0x4f43d9)]){loading[_0x338920(0x1da)]=loading[_0x338920(0x1da)][_0x338920(0x19d)](_0x5c0314=>_0x5c0314!=_0x4f43d9);if(!watchedSymbols['includes'](_0x4f43d9))watchedSymbols['push'](_0x4f43d9);_0x4348f7++;}}),loading[_0x1c6477(0x219)]=Math[_0x1c6477(0x1fa)](_0x4348f7/(_0x40bf21[_0x1c6477(0x1f1)]+maxLoadingProgress)*0x64);loading[_0x1c6477(0x219)]!=0x64&&(_0x215b20>0x1e*0x5&&(loading[_0x1c6477(0x202)]=!![],emitLoadingProgress()),_0x215b20>0x78*0x5&&!_0x240d2b&&(_0x240d2b=!![],logHistory(_0x1c6477(0x1db),_0x1c6477(0x16b)+loading['remainingSymbols'][_0x1c6477(0x2ae)](',\x20')+_0x1c6477(0x12f)),logHistory('error',_0x1c6477(0x1e3)+loadCoinsRetryInterval/0xea60+'\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again'),loadingCanceled=!![],await sleep(loadCoinsRetryInterval),restartBot()));if(loadingCanceled){loading[_0x1c6477(0x17c)]=!![],emitLoadingProgress();break;}else _0x827c33!=loading[_0x1c6477(0x219)]&&(_0x827c33=loading['progress'],emitLoadingProgress()),_0x215b20++,await sleep(0xc8);}_0x4348f7==_0x40bf21[_0x1c6477(0x1f1)]+maxLoadingProgress&&(coinsLoaded=!![],process[_0x1c6477(0x294)]({'status':'enabled','live':_0x1c6477(0x1fe)},_0x91ad0c=>{}),_0x240d2b&&logHistory(_0x1c6477(0x263),'All\x20coin\x20data\x20loaded\x20-\x20bot\x20started'));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x4df821=_0xf0755a;proxyEmit(_0x4df821(0x154),{...emittedConfiguration(),'configstate':_0x4df821(0x1d5)});}function emitLoadingProgress(){proxyEmit('coin-loading-progress',loading);}async function getFiat(){const _0x5b64f8=_0xf0755a;let _0x4e428f=gTicker[stablecoins[_0x5b64f8(0x19b)][_0x5b64f8(0x21f)]],_0x547150=gTicker[stablecoins[_0x5b64f8(0x223)][_0x5b64f8(0x21f)]];return{'eur':Number(_0x4e428f),'usd':Number(_0x547150)};}function capitalize(_0x523b40){const _0x360095=_0xf0755a;return _0x523b40[_0x360095(0x1be)](0x0,0x1)[_0x360095(0x2d6)]()+_0x523b40[_0x360095(0x1be)](0x1);}function supportedExchanges(){const _0x210230=_0xf0755a,_0x2898b4=['ws',_0x210230(0x267),_0x210230(0x2ec),'watchTrades',_0x210230(0x1ca),_0x210230(0x1af),_0x210230(0x255),_0x210230(0x1bd),'fetchBalance'];let _0x31976a=[],_0x51326c=[],_0x59d87a=ccxt[_0x210230(0x23a)]['exchanges'];_0x59d87a['forEach'](_0x3a482a=>{const _0x311386=_0x210230;try{const _0x188ca6=new ccxt[(_0x311386(0x23a))][_0x3a482a]();_0x51326c[_0x311386(0x2cb)](_0x188ca6);}catch(_0x2f9c0f){}}),_0x51326c['forEach'](_0x55337b=>{const _0x5311ad=_0x210230;let _0x177c8c=0x0;_0x2898b4[_0x5311ad(0x256)](_0x43a16e=>{const _0x1b4ed3=_0x5311ad;_0x43a16e in _0x55337b[_0x1b4ed3(0x290)]&&_0x55337b[_0x1b4ed3(0x290)][_0x43a16e]&&_0x177c8c++;}),_0x177c8c==_0x2898b4[_0x5311ad(0x1f1)]&&(!excludedExchanges['includes'](_0x55337b['id'])&&_0x31976a[_0x5311ad(0x2cb)](capitalize(_0x55337b['id'])));});let _0x2f4b82=[];return _0x59d87a[_0x210230(0x256)](_0x2e2496=>{const _0x5e376d=_0x210230;_0x2e2496=capitalize(_0x2e2496);if(!_0x31976a[_0x5e376d(0x277)](_0x2e2496))_0x2f4b82['push'](_0x2e2496);}),_0x31976a;}function setStartDatePerformance(){const _0x2b8130=_0xf0755a;if(config&&config[_0x2b8130(0x213)][0x0][_0x2b8130(0x27b)]['length']!=0x0){const _0x50dde0=config[_0x2b8130(0x213)][0x0]['changes'];dbPerformance['get'](_0x2b8130(0x166))['find']({'date':config['startdate']})[_0x2b8130(0x150)]({'coins':_0x50dde0})['write']();}}function calculatePnL(_0x2654b6,_0x2b3130,_0x598957,_0x58b454,_0xbe9f29,_0x6bb627){const _0x4076d7=_0xf0755a;!_0x2654b6['includes']('/'+config[_0x4076d7(0x147)])&&(_0x598957=_0x598957==_0x4076d7(0x29a)?_0x4076d7(0x1f9):'buy');!_0x6bb627[_0x2b3130]&&(_0x6bb627[_0x2b3130]={'number':0x0,'sells':0x0,'buys':0x0,'breakeven':0x0,'realizedPnL':0x0});let _0x333e78=0x0,_0x1dc480,_0x2a024c;if(_0x598957==_0x4076d7(0x29a))_0x2a024c=_0x6bb627[_0x2b3130][_0x4076d7(0x1b9)]*_0x6bb627[_0x2b3130][_0x4076d7(0x141)]+_0xbe9f29*_0x58b454,_0x6bb627[_0x2b3130]['number']+=_0x58b454,_0x6bb627[_0x2b3130][_0x4076d7(0x141)]=_0x6bb627[_0x2b3130]['number']!=0x0?_0x2a024c/_0x6bb627[_0x2b3130]['number']:0x0,_0x6bb627[_0x2b3130][_0x4076d7(0x226)]++;else _0x598957==_0x4076d7(0x1f9)&&(_0x1dc480=Math['min'](_0x6bb627[_0x2b3130][_0x4076d7(0x1b9)],_0x58b454),_0x333e78=(_0xbe9f29-_0x6bb627[_0x2b3130]['breakeven'])*_0x1dc480,_0x2a024c=Math['max'](_0x6bb627[_0x2b3130][_0x4076d7(0x1b9)]*_0x6bb627[_0x2b3130][_0x4076d7(0x141)]-_0x1dc480*_0x6bb627[_0x2b3130][_0x4076d7(0x141)],0x0),_0x6bb627[_0x2b3130]['number']-=_0x1dc480,_0x6bb627[_0x2b3130][_0x4076d7(0x141)]=_0x6bb627[_0x2b3130][_0x4076d7(0x1b9)]!=0x0?_0x2a024c/_0x6bb627[_0x2b3130]['number']:0x0,_0x6bb627[_0x2b3130][_0x4076d7(0x228)]+=_0x333e78,_0x6bb627[_0x2b3130][_0x4076d7(0x172)]++);return _0x333e78;}async function generatePnL(){const _0x5058d9=_0xf0755a;pnlGenerationNeeded=![],logger[_0x5058d9(0x130)]('Generating\x20PnL\x20data');const _0x44a751=dbLogs[_0x5058d9(0x1a2)](_0x5058d9(0x169))[_0x5058d9(0x23c)]();let _0x9c007={},_0x4c392d=0x0,_0x362f4a=0x0,_0x11280c=config[_0x5058d9(0x260)];const _0x3160a9=fns[_0x5058d9(0x2e4)](_0x11280c,_0x5058d9(0x21a),new Date()),_0x18c039=new Date();let _0x2f95ce=0x0;for(let _0xbb566=_0x3160a9;!fns[_0x5058d9(0x241)](_0x18c039,_0xbb566);_0xbb566=fns[_0x5058d9(0x2ce)](_0xbb566,0x1)){const _0x2fc427=fns[_0x5058d9(0x2ff)](_0xbb566,_0x5058d9(0x21a));while(_0x4c392d<_0x44a751[_0x5058d9(0x1f1)]){const _0x4a62b9=new Date(_0x44a751[_0x4c392d][_0x5058d9(0x1f4)]);if(fns[_0x5058d9(0x241)](_0x4a62b9,_0xbb566))_0x4c392d++;else{if(_0x44a751[_0x4c392d]['time'][_0x5058d9(0x277)](_0x2fc427)){const _0x33823c=_0x44a751[_0x4c392d];if(_0x33823c[_0x5058d9(0x131)]===_0x5058d9(0x21e)&&(_0x33823c[_0x5058d9(0x197)]['includes'](_0x5058d9(0x26c))||_0x33823c[_0x5058d9(0x197)][_0x5058d9(0x277)](_0x5058d9(0x232)))){const _0x2d731e=_0x33823c[_0x5058d9(0x197)][_0x5058d9(0x14a)](/([A-Z]+\/[A-Z]+) (sell|buy) #([\d.]+) @([\d.]+)/);if(_0x2d731e){const [,_0x454393,_0x38b9bc,_0x4df17c,_0x41d534]=_0x2d731e,_0x547956=_0x454393['includes']('/'+config[_0x5058d9(0x147)])?_0x454393['split']('/')[0x0]:_0x454393[_0x5058d9(0x1e8)]('/')[0x1],_0xcd75c9=calculatePnL(_0x454393,_0x547956,_0x38b9bc,parseFloat(_0x4df17c),parseFloat(_0x41d534),_0x9c007);_0x362f4a+=_0xcd75c9;}}_0x4c392d++;}else break;}}dbPerformance[_0x5058d9(0x1a2)]('data')['find']({'date':_0x2fc427})[_0x5058d9(0x150)]({'pnl':_0x362f4a})['write']();}dbCoinResults[_0x5058d9(0x153)](_0x5058d9(0x19f),_0x9c007)[_0x5058d9(0x189)](),logger[_0x5058d9(0x130)](_0x5058d9(0x243));const _0x3b70d9=getNormalizedPerformance();emitPerformance(_0x3b70d9);}async function updatePnL(_0x1f7c0b){const _0x1f7494=_0xf0755a,{symbol:_0x13908d,coin:_0x5b7164,amount:_0x3cf027,price:_0x1b5898,side:_0x29372c,reverse:_0x4f9691}=_0x1f7c0b;let _0x16a76c=dbCoinResults[_0x1f7494(0x1a2)]('coins')[_0x1f7494(0x23c)]();const _0x5d9ba0=calculatePnL(_0x13908d,_0x5b7164,_0x29372c,_0x3cf027,_0x1b5898,_0x16a76c);dbCoinResults[_0x1f7494(0x153)]('coins',_0x16a76c)['write']();const _0xe748b5=getTimeStamp()['split']('\x20')[0x0];let _0x5b7748=dbPerformance[_0x1f7494(0x1a2)](_0x1f7494(0x166))['find']({'date':_0xe748b5})[_0x1f7494(0x23c)]();_0x5b7748?(_0x5b7748['pnl']+=_0x5d9ba0,dbPerformance[_0x1f7494(0x1a2)](_0x1f7494(0x166))[_0x1f7494(0x2f1)]({'date':_0xe748b5})[_0x1f7494(0x150)](_0x5b7748)[_0x1f7494(0x189)]()):await storePerformance();const _0x3a9527=getNormalizedPerformance();emitPerformance(_0x3a9527);}async function validate24hChanges(){const _0x26c07c=_0xf0755a;for(const _0x1ff1e1 of currentCoins){if(_0x1ff1e1[_0x26c07c(0x21f)]!=config[_0x26c07c(0x147)]){let _0x46ee3b;_0x1ff1e1[_0x26c07c(0x2f7)]?_0x46ee3b=formatResult((0x1/(gChange[_0x1ff1e1['symbol']]/0x64+0x1)-0x1)*0x64,0x3):_0x46ee3b=gChange[_0x1ff1e1[_0x26c07c(0x242)]],_0x46ee3b<config[_0x26c07c(0x176)]&&(logHistory(_0x26c07c(0x1db),_0x1ff1e1['coin']+_0x26c07c(0x19c)+_0x46ee3b+'%'),logHistory(_0x26c07c(0x1db),_0x26c07c(0x1dc)),logHistory(_0x26c07c(0x1db),_0x26c07c(0x143)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x3cf641,_0x25db4f){const _0x15d388=_0xf0755a;if(!_0x3cf641)return!![];const _0xeba677=_0x25db4f['split']('.'),_0x18a4b0=_0x3cf641[_0x15d388(0x1e8)]('.');for(var _0x1de273=0x0;_0x1de273<_0x18a4b0['length'];_0x1de273++){const _0x48d875=~~_0x18a4b0[_0x1de273],_0x55b394=~~_0xeba677[_0x1de273];if(_0x48d875<_0x55b394)return!![];if(_0x48d875>_0x55b394)return![];}return![];}async function oneTimeMigration(){const _0x42af24=_0xf0755a;let _0x5c8ca7=dbLogs['get'](_0x42af24(0x2fb))[_0x42af24(0x23c)]();if(isOlderVersion(_0x5c8ca7,_0x42af24(0x221))){let _0x5ec020=[];const _0x5f215b=dbLogs[_0x42af24(0x1a2)](_0x42af24(0x169))[_0x42af24(0x23c)]();_0x5f215b['forEach'](_0x2877b6=>{const _0x1f6db5=_0x42af24;_0x5ec020[_0x1f6db5(0x2cb)]({'time':_0x2877b6[_0x1f6db5(0x1f4)],'type':_0x2877b6['type'],'event':_0x2877b6[_0x1f6db5(0x197)]});}),dbLogs[_0x42af24(0x1a2)]('logs')[_0x42af24(0x150)](_0x5ec020)[_0x42af24(0x189)]();}let _0x30ad84=dbConfig['get'](_0x42af24(0x2fb))[_0x42af24(0x23c)]();if(isOlderVersion(_0x30ad84,_0x42af24(0x221))){let _0x36dd6d=dbConfig['get']('bot')['find']({'botID':botID})[_0x42af24(0x23c)]();if(_0x36dd6d){let _0x90c91d=[];_0x36dd6d['portfolio']['forEach'](_0x33f139=>{const _0x564b0e=_0x42af24;_0x90c91d[_0x564b0e(0x2cb)]({'coin':_0x33f139[_0x564b0e(0x21f)],'number':_0x33f139[_0x564b0e(0x218)],'price':_0x33f139[_0x564b0e(0x13e)]}),delete _0x33f139[_0x564b0e(0x218)],delete _0x33f139['startprice'];});if(_0x90c91d['length']!==0x0)fs[_0x42af24(0x151)](configbackuppath+(_0x42af24(0x252)+botID+_0x42af24(0x2b9)),JSON[_0x42af24(0x2ef)](_0x90c91d,null,0x4),function(_0x4fa2c9){if(_0x4fa2c9){}});const _0x4d25f1=(_0x2442bb,_0x2f4be2)=>{const _0x13a60d=_0x42af24;let _0x51fdc4=[];_0x2f4be2[_0x13a60d(0x256)](_0xf13376=>{const _0x5e4707=_0x13a60d,_0x15349d=_0x2442bb[_0x5e4707(0x2f1)](_0xd24523=>_0xd24523[_0x5e4707(0x21f)]==_0xf13376[_0x5e4707(0x21f)]);if(!_0x15349d)_0x51fdc4[_0x5e4707(0x2cb)](_0xf13376);});let _0x17970c=[];return _0x2442bb[_0x13a60d(0x256)](_0x1d9d64=>{const _0x1236ba=_0x13a60d,_0x1192ee=_0x2f4be2[_0x1236ba(0x2f1)](_0x3d94b2=>_0x3d94b2[_0x1236ba(0x21f)]==_0x1d9d64[_0x1236ba(0x21f)]);if(!_0x1192ee||_0x1192ee['number']==0x0&&_0x1d9d64[_0x1236ba(0x1b9)]!=0x0)_0x17970c[_0x1236ba(0x2cb)](_0x1d9d64);}),{'missingDay1':_0x51fdc4,'notInDay2':_0x17970c};},_0x4b74e7=dbPerformance[_0x42af24(0x1a2)](_0x42af24(0x166))[_0x42af24(0x1df)]()[_0x42af24(0x23c)]();if(_0x4b74e7['length']>0x1){const {missingDay1:_0x955ca6,notInDay2:_0x4036ee}=_0x4d25f1(_0x90c91d,_0x4b74e7[0x1][_0x42af24(0x19f)]);_0x90c91d=[..._0x90c91d,..._0x955ca6],_0x4036ee[_0x42af24(0x256)](_0x2a4bd2=>{const _0x43b958=_0x42af24;let _0x1d3ce9=_0x90c91d[_0x43b958(0x257)](_0xf94359=>_0xf94359[_0x43b958(0x21f)]==_0x2a4bd2[_0x43b958(0x21f)]);_0x1d3ce9!=-0x1&&_0x90c91d['splice'](_0x1d3ce9,0x1);});}_0x90c91d[_0x42af24(0x2eb)]((_0x36f3a3,_0x4dd20b)=>_0x36f3a3[_0x42af24(0x21f)]>_0x4dd20b[_0x42af24(0x21f)]?0x1:_0x4dd20b[_0x42af24(0x21f)]>_0x36f3a3[_0x42af24(0x21f)]?-0x1:0x0);let _0xb1d0e2=[{'date':_0x36dd6d[_0x42af24(0x260)],'changes':_0x90c91d}];_0x4b74e7[_0x42af24(0x1f1)]>0x2&&_0x4b74e7[_0x42af24(0x256)]((_0x1b62ee,_0x9dd6ea)=>{const _0x10c834=_0x42af24;if(_0x9dd6ea>0x0&&_0x9dd6ea<_0x4b74e7[_0x10c834(0x1f1)]-0x1){const {missingDay1:_0x44b424,notInDay2:_0x1abaf9}=_0x4d25f1(_0x4b74e7[_0x9dd6ea]['coins'],_0x4b74e7[_0x9dd6ea+0x1]['coins']);_0x90c91d=[],(_0x44b424[_0x10c834(0x1f1)]!=0x0||_0x1abaf9[_0x10c834(0x1f1)]!=0x0)&&(_0x44b424[_0x10c834(0x1f1)]!=0x0&&_0x90c91d[_0x10c834(0x2cb)](..._0x44b424),_0x1abaf9[_0x10c834(0x1f1)]!=0x0&&(_0x1abaf9[_0x10c834(0x256)](_0x48c426=>{const _0x5ba69a=_0x10c834;_0x48c426['number']=-_0x48c426[_0x5ba69a(0x1b9)];}),_0x90c91d[_0x10c834(0x2cb)](..._0x1abaf9)),_0x90c91d[_0x10c834(0x2eb)]((_0x5167a5,_0x5d2021)=>_0x5167a5[_0x10c834(0x21f)]>_0x5d2021[_0x10c834(0x21f)]?0x1:_0x5d2021[_0x10c834(0x21f)]>_0x5167a5[_0x10c834(0x21f)]?-0x1:0x0),_0xb1d0e2[_0x10c834(0x2cb)]({'date':_0x4b74e7[_0x9dd6ea+0x1][_0x10c834(0x139)],'changes':_0x90c91d}));}}),dbConfig[_0x42af24(0x1a2)]('bot')['find']({'botID':botID})[_0x42af24(0x150)]({..._0x36dd6d,'liquidity':_0xb1d0e2})[_0x42af24(0x189)]();}}if(isOlderVersion(_0x30ad84,_0x42af24(0x2b1))){let _0x42798a=dbConfig['get'](_0x42af24(0x217))[_0x42af24(0x2f1)]({'botID':botID})['value']();if(_0x42798a){const _0x15341f=_0x42798a[_0x42af24(0x2a9)],_0x3a9231=_0x15341f?capitalize(_0x15341f):_0x42af24(0x1d2);dbConfig['get'](_0x42af24(0x217))['find']({'botID':botID})[_0x42af24(0x150)]({'exchange':_0x3a9231})[_0x42af24(0x189)]();}}if(isOlderVersion(_0x30ad84,'2.6.22')){let _0x1b4b76=dbConfig[_0x42af24(0x1a2)](_0x42af24(0x217))[_0x42af24(0x2f1)]({'botID':botID})['value']();if(_0x1b4b76){const _0x1bb49d=_0x1b4b76['marketcapEnabled'],_0x554e3a=_0x1bb49d?_0x42af24(0x199):![];dbConfig[_0x42af24(0x1a2)](_0x42af24(0x217))[_0x42af24(0x2f1)]({'botID':botID})[_0x42af24(0x150)]({'marketcapEnabled':_0x554e3a})[_0x42af24(0x189)]();}}if(isOlderVersion(_0x30ad84,'2.6.23')){let _0x49034b=dbConfig[_0x42af24(0x1a2)](_0x42af24(0x217))[_0x42af24(0x2f1)]({'botID':botID})[_0x42af24(0x23c)]();if(_0x49034b){const _0x58d10c=_0x49034b[_0x42af24(0x211)],_0x3d876a=_0x58d10c?_0x42af24(0x2a1):![];dbConfig[_0x42af24(0x1a2)]('bot')['find']({'botID':botID})[_0x42af24(0x150)]({'autoliquidity':_0x3d876a})[_0x42af24(0x189)]();}}let _0xb19e83=dbPerformance[_0x42af24(0x1a2)](_0x42af24(0x2fb))[_0x42af24(0x23c)]();isOlderVersion(_0xb19e83,_0x42af24(0x221))&&setStartDatePerformance();let _0x5d2233=dbCoinResults[_0x42af24(0x1a2)]('version')[_0x42af24(0x23c)]();if(isOlderVersion(_0x5d2233,_0x42af24(0x146))){let _0x2c57b5=dbCoinResults['get'](_0x42af24(0x19f))[_0x42af24(0x23c)]();if(_0x2c57b5[_0x42af24(0x1f1)]!=0x0)pnlGenerationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x593333=_0xf0755a;dbConfig[_0x593333(0x153)](_0x593333(0x2fb),serverversion)[_0x593333(0x189)](),dbPerformance[_0x593333(0x153)](_0x593333(0x2fb),serverversion)['write'](),dbLogs['set']('version',serverversion)[_0x593333(0x189)](),dbCoinResults[_0x593333(0x153)]('version',serverversion)[_0x593333(0x189)]();}function getConfiguration(_0x5327ac){const _0x1b8a95=_0xf0755a;let _0x7824ff=dbConfig[_0x1b8a95(0x1a2)](_0x1b8a95(0x217))[_0x1b8a95(0x2f1)]({'botID':_0x5327ac})['value']();if(_0x7824ff){let _0x1088de=![];typeof _0x7824ff[_0x1b8a95(0x24a)]==_0x1b8a95(0x167)&&(_0x7824ff={..._0x7824ff,'threshold':Number(_0x7824ff[_0x1b8a95(0x24a)])},_0x1088de=!![]),_0x7824ff[_0x1b8a95(0x176)]==undefined&&(_0x7824ff={..._0x7824ff,'change24h':-0x14},_0x1088de=!![]),_0x7824ff['fiat']==undefined&&(_0x7824ff={..._0x7824ff,'fiat':_0x1b8a95(0x1c0)},_0x1088de=!![]),_0x7824ff['onepagemode']==undefined&&(_0x7824ff={..._0x7824ff,'onepagemode':settings['onepagemode']},_0x1088de=!![]),_0x7824ff['colorscheme']==undefined&&(_0x7824ff={..._0x7824ff,'colorscheme':_0x1b8a95(0x2bd)},_0x1088de=!![]),_0x7824ff['autoliquidity']==undefined&&(_0x7824ff={..._0x7824ff,'autoliquidity':'update-liquidity'},_0x1088de=!![]),_0x7824ff['marketcapApi']==undefined&&(_0x7824ff={..._0x7824ff,'marketcapApi':settings['marketcapApi']?!![]:![]},_0x1088de=!![]),_0x7824ff[_0x1b8a95(0x1ab)]==undefined&&(_0x7824ff={..._0x7824ff,'marketcapEnabled':![]},_0x1088de=!![]),_0x1088de&&(_0x7824ff={'botID':_0x7824ff[_0x1b8a95(0x2ac)],'exchange':_0x7824ff['exchange'],'apiKey':_0x7824ff[_0x1b8a95(0x292)],'apiSecret':_0x7824ff[_0x1b8a95(0x22a)],'apiPassword':_0x7824ff['apiPassword'],'basecoin':_0x7824ff['basecoin'],'botname':_0x7824ff[_0x1b8a95(0x1fc)],'showname':_0x7824ff[_0x1b8a95(0x18f)],'threshold':_0x7824ff['threshold'],'ordertype':_0x7824ff[_0x1b8a95(0x2ab)],'timeout':_0x7824ff[_0x1b8a95(0x202)],'fiat':_0x7824ff[_0x1b8a95(0x208)],'startdate':_0x7824ff[_0x1b8a95(0x260)],'recreate':_0x7824ff[_0x1b8a95(0x2f4)],'timeshift':_0x7824ff[_0x1b8a95(0x279)],'onepagemode':_0x7824ff[_0x1b8a95(0x253)],'headless':_0x7824ff[_0x1b8a95(0x1b4)],'cooldown':_0x7824ff['cooldown'],'change24h':_0x7824ff[_0x1b8a95(0x176)],'emojibuy':_0x7824ff[_0x1b8a95(0x2b0)],'emojisell':_0x7824ff[_0x1b8a95(0x1d8)],'colorscheme':_0x7824ff[_0x1b8a95(0x2dc)],'marketcapApi':_0x7824ff[_0x1b8a95(0x24f)],'marketcapEnabled':_0x7824ff['marketcapEnabled'],'portfolio':_0x7824ff['portfolio'],'autoliquidity':_0x7824ff[_0x1b8a95(0x211)],'liquidity':_0x7824ff[_0x1b8a95(0x213)],'openOrders':_0x7824ff[_0x1b8a95(0x269)]},dbConfig[_0x1b8a95(0x1a2)](_0x1b8a95(0x217))['remove']()[_0x1b8a95(0x189)](),dbConfig[_0x1b8a95(0x1a2)](_0x1b8a95(0x217))[_0x1b8a95(0x2cb)](_0x7824ff)[_0x1b8a95(0x189)]());}else _0x7824ff={'botID':_0x5327ac,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':'Bot\x20'+_0x5327ac,'showname':![],'threshold':0x3,'ordertype':_0x1b8a95(0x2a0),'timeout':0x14,'fiat':_0x1b8a95(0x1c0),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x1b8a95(0x279)],'onepagemode':settings['onepagemode'],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x1b8a95(0x2bd),'marketcapApi':settings['marketcapApi']?!![]:![],'marketcapEnabled':![],'portfolio':[],'autoliquidity':'update-liquidity','liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x7824ff;}function emittedConfiguration(){const _0x10df3d=_0xf0755a;let _0x2b27b1;if(config['apiKey']=='')_0x2b27b1={...config,'configstate':_0x10df3d(0x1e9)};else config['apiKey']==_0x10df3d(0x138)?_0x2b27b1={...config,'configstate':_0x10df3d(0x163)}:(_0x2b27b1={...config,'apiKey':_0x10df3d(0x22f),'apiSecret':_0x10df3d(0x22f)},config['apiPassword']&&(_0x2b27b1[_0x10df3d(0x2de)]=_0x10df3d(0x22f)));return _0x2b27b1['enableFiatToggle']=enableFiatToggle,_0x2b27b1;}function getSettings(){const _0x59726f=_0xf0755a;return dbSettings[_0x59726f(0x1a2)](_0x59726f(0x156))[_0x59726f(0x23c)]();}function getSecure(){const _0x378ae0=_0xf0755a;return dbSecure[_0x378ae0(0x1a2)](_0x378ae0(0x1ce))[_0x378ae0(0x23c)]()||{};}function updateTimeshift(_0xdd32b){const _0x125a9a=_0xf0755a;let _0x5d50ba=dbConfig[_0x125a9a(0x1a2)](_0x125a9a(0x217))[_0x125a9a(0x2f1)]({'botID':botID})[_0x125a9a(0x23c)]();_0x5d50ba&&dbConfig['get'](_0x125a9a(0x217))[_0x125a9a(0x2f1)]({'botID':botID})[_0x125a9a(0x150)]({'timeshift':_0xdd32b})['write'](),config['timeshift']=_0xdd32b,proxyEmit(_0x125a9a(0x154),emittedConfiguration());}function updateOnepagemode(_0x45578b){const _0x5abf00=_0xf0755a;let _0xe20d8b=dbConfig[_0x5abf00(0x1a2)](_0x5abf00(0x217))[_0x5abf00(0x2f1)]({'botID':botID})[_0x5abf00(0x23c)]();_0xe20d8b&&dbConfig[_0x5abf00(0x1a2)]('bot')[_0x5abf00(0x2f1)]({'botID':botID})[_0x5abf00(0x150)]({'onepagemode':_0x45578b})[_0x5abf00(0x189)](),config['onepagemode']=_0x45578b,proxyEmit(_0x5abf00(0x154),emittedConfiguration());}function updateMarketcapApi(_0x32d66e){const _0x49fb24=_0xf0755a,_0x51bad8=_0x32d66e?!![]:![];let _0x1be90c=dbConfig[_0x49fb24(0x1a2)]('bot')[_0x49fb24(0x2f1)]({'botID':botID})[_0x49fb24(0x23c)]();_0x1be90c&&dbConfig['get'](_0x49fb24(0x217))[_0x49fb24(0x2f1)]({'botID':botID})[_0x49fb24(0x150)]({'marketcapApi':_0x51bad8})[_0x49fb24(0x189)](),config[_0x49fb24(0x24f)]=_0x51bad8,getMarketCap(),proxyEmit(_0x49fb24(0x154),emittedConfiguration());}async function storeConfiguration(_0xfe15c6){const _0x46a862=_0xf0755a;logger['debug'](_0x46a862(0x174));let _0x26ba8d=![];_0xfe15c6[_0x46a862(0x135)]&&(_0xfe15c6[_0x46a862(0x135)]==_0x46a862(0x163)&&(_0x26ba8d=!![]),delete _0xfe15c6['configstate']);if(pidBalances)clearTimeout(pidBalances);setBlockTransactionDetection(!![]);let _0x189fe3=![],_0x530038=![],_0x40ced7=[];_0xfe15c6[_0x46a862(0x1c9)][_0x46a862(0x256)](_0x65117b=>{const _0x2873bd=_0x46a862;if(!_0x65117b['excluded']&&_0x65117b[_0x2873bd(0x21f)]!=_0xfe15c6[_0x2873bd(0x147)])_0x40ced7['push'](_0x65117b['symbol']);}),_0x40ced7['forEach'](_0x59285e=>{const _0xafc82d=_0x46a862,_0x57453a=currentCoins[_0xafc82d(0x2f1)](_0x16954b=>_0x16954b['symbol']==_0x59285e);!_0x57453a&&(_0x189fe3=!![]);}),currentCoins[_0x46a862(0x256)](_0x38a22f=>{const _0x440186=_0x46a862;if(_0x38a22f[_0x440186(0x21f)]!=config[_0x440186(0x147)]){const _0x190f73=_0x40ced7[_0x440186(0x2f1)](_0x349fe5=>_0x349fe5==_0x38a22f['symbol']);!_0x190f73&&(_0x189fe3=!![]);}}),_0xfe15c6['portfolio'][_0x46a862(0x256)](_0x2fe837=>{const _0x4b4f2e=_0x46a862,_0xaec01b=config[_0x4b4f2e(0x1c9)][_0x4b4f2e(0x2f1)](_0x3d128b=>_0x3d128b[_0x4b4f2e(0x21f)]==_0x2fe837[_0x4b4f2e(0x21f)]);if(_0xaec01b&&_0x2fe837['offset']!=_0xaec01b['offset'])_0x530038=!![];});let _0x4c13e6=dbConfig[_0x46a862(0x1a2)](_0x46a862(0x217))[_0x46a862(0x2f1)]({'botID':botID})['value']();_0xfe15c6={..._0xfe15c6,'apiKey':decryptRSA(secure[_0x46a862(0x1aa)],_0xfe15c6[_0x46a862(0x292)]),'apiSecret':decryptRSA(secure[_0x46a862(0x1aa)],_0xfe15c6['apiSecret'])};_0xfe15c6[_0x46a862(0x2de)]&&(_0xfe15c6[_0x46a862(0x2de)]=decryptRSA(secure[_0x46a862(0x1aa)],_0xfe15c6[_0x46a862(0x2de)]));let _0x5efebb=![];if(_0x4c13e6){_0xfe15c6['apiKey']==_0x46a862(0x22f)?_0xfe15c6[_0x46a862(0x292)]=config[_0x46a862(0x292)]:_0x5efebb=!![];_0xfe15c6[_0x46a862(0x22a)]==_0x46a862(0x22f)?_0xfe15c6['apiSecret']=config[_0x46a862(0x22a)]:_0x5efebb=!![];if(_0xfe15c6[_0x46a862(0x2de)]==_0x46a862(0x22f))_0xfe15c6[_0x46a862(0x2de)]=config[_0x46a862(0x2de)];else{if(_0xfe15c6[_0x46a862(0x2de)])_0x5efebb=!![];}dbConfig[_0x46a862(0x1a2)]('bot')[_0x46a862(0x2f1)]({'botID':botID})[_0x46a862(0x150)](_0xfe15c6)[_0x46a862(0x189)]();}else dbConfig['get'](_0x46a862(0x217))[_0x46a862(0x2cb)](_0xfe15c6)[_0x46a862(0x189)](),_0x5efebb=!![],process[_0x46a862(0x294)]({'status':'enabled','live':_0x46a862(0x1fe)},_0x2b4d0e=>{});process['send']({'botname':_0xfe15c6[_0x46a862(0x1fc)]},_0x58d958=>{}),config={..._0xfe15c6},updateBotManager(),proxyEmit(_0x46a862(0x2d5)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x5efebb)await reset(!![]);else _0x189fe3||_0x530038?await reset(![]):getBalances();setBlockTransactionDetection(![]);}async function storeHeadless(_0x5b0d89){const _0xd51697=_0xf0755a,_0x363032={...config,'headless':_0x5b0d89[_0xd51697(0x1b4)]};let _0x487261=dbConfig[_0xd51697(0x1a2)](_0xd51697(0x217))[_0xd51697(0x2f1)]({'botID':botID})[_0xd51697(0x23c)]();_0x487261&&dbConfig[_0xd51697(0x1a2)]('bot')[_0xd51697(0x2f1)]({'botID':botID})[_0xd51697(0x150)](_0x363032)['write'](),config={..._0x363032},updateBotManager(),proxyEmit(_0xd51697(0x154),emittedConfiguration());}function _0x59ce(_0x346c2c,_0x23179f){const _0x4e6ee0=_0x3726();return _0x59ce=function(_0x2a48ec,_0x53aa70){_0x2a48ec=_0x2a48ec-0x12c;let _0x372640=_0x4e6ee0[_0x2a48ec];return _0x372640;},_0x59ce(_0x346c2c,_0x23179f);}async function storeFiat(_0x827ff0){const _0x44a450=_0xf0755a,_0x2c49e3={...config,'fiat':_0x827ff0};let _0x45be47=dbConfig[_0x44a450(0x1a2)](_0x44a450(0x217))['find']({'botID':botID})['value']();_0x45be47&&dbConfig[_0x44a450(0x1a2)](_0x44a450(0x217))[_0x44a450(0x2f1)]({'botID':botID})[_0x44a450(0x150)](_0x2c49e3)[_0x44a450(0x189)](),config={..._0x2c49e3},proxyEmit(_0x44a450(0x154),emittedConfiguration());}function resetHistory(){const _0x41a084=_0xf0755a;logger[_0x41a084(0x1d4)](_0x41a084(0x248));try{if(fs[_0x41a084(0x1d0)](path[_0x41a084(0x2ae)](configpath,_0x41a084(0x2f2)+botID+'-events.json')))fs['unlinkSync'](path['join'](configpath,_0x41a084(0x2f2)+botID+_0x41a084(0x21b)));if(fs[_0x41a084(0x1d0)](path[_0x41a084(0x2ae)](configpath,_0x41a084(0x2f2)+botID+_0x41a084(0x185))))fs[_0x41a084(0x2fe)](path[_0x41a084(0x2ae)](configpath,_0x41a084(0x2f2)+botID+_0x41a084(0x185)));if(fs[_0x41a084(0x1d0)](path[_0x41a084(0x2ae)](configpath,_0x41a084(0x2f2)+botID+_0x41a084(0x187))))fs[_0x41a084(0x2fe)](path[_0x41a084(0x2ae)](configpath,_0x41a084(0x2f2)+botID+_0x41a084(0x187)));}catch(_0x2cd55a){if(_0x2cd55a)logger['full']('Error\x20while\x20deleting\x20files:\x20',_0x2cd55a);}const _0x395525=getDate();let _0x3ef4f3=[];currentCoins['forEach'](_0x155023=>{const _0x391d8c=_0x41a084;_0x3ef4f3['push']({'coin':_0x155023[_0x391d8c(0x21f)],'number':_0x155023[_0x391d8c(0x1b9)],'price':_0x155023['last']});});let _0x58d6c0=dbConfig[_0x41a084(0x1a2)](_0x41a084(0x217))[_0x41a084(0x2f1)]({'botID':botID})[_0x41a084(0x23c)]();_0x58d6c0&&(dbConfig['get'](_0x41a084(0x217))['find']({'botID':botID})[_0x41a084(0x150)]({'liquidity':[{'date':_0x395525,'changes':_0x3ef4f3}]})['write'](),config[_0x41a084(0x213)]=[]),restartBot(!![]);}function noslash(_0x3e5cd6){return _0x3e5cd6['replace']('/','');}function updateHighestFee(_0x2ab56d){const _0x49b7ed=_0xf0755a;if(_0x2ab56d[_0x49b7ed(0x2f7)]){let _0x1d022f={'filled':_0x2ab56d[_0x49b7ed(0x2d8)]*_0x2ab56d['price'],'amount':_0x2ab56d[_0x49b7ed(0x2d8)]*_0x2ab56d[_0x49b7ed(0x1d1)],'side':_0x2ab56d[_0x49b7ed(0x1c7)]==_0x49b7ed(0x1f9)?'buy':'sell','price':0x1/_0x2ab56d[_0x49b7ed(0x1d1)]};_0x2ab56d={..._0x2ab56d,..._0x1d022f};}const _0x54f907=defaultFee*_0x2ab56d[_0x49b7ed(0x2d8)]*_0x2ab56d['price'];lastFees[_0x49b7ed(0x2f3)][_0x49b7ed(0x1f1)]===0x14&&lastFees[_0x49b7ed(0x2f3)]['shift'](),lastFees['recent20'][_0x49b7ed(0x2cb)](_0x54f907),lastFees[_0x49b7ed(0x285)]=Math['max'](...lastFees[_0x49b7ed(0x2f3)]);}async function updateNumberCoinsCcxt(_0x5528c5){const _0x2cd1b1=_0xf0755a;logger[_0x2cd1b1(0x130)]('0\x20-\x20EXECUTION:\x20'+_0x5528c5[_0x2cd1b1(0x242)]+_0x2cd1b1(0x283)+_0x5528c5[_0x2cd1b1(0x268)]+_0x2cd1b1(0x283)+_0x5528c5['filled']+'\x20/\x20'+_0x5528c5[_0x2cd1b1(0x17a)]+'\x20|\x20'+_0x5528c5['id']);let _0x53d3ce=_0x5528c5[_0x2cd1b1(0x268)],_0x2a1bf1=![];currentCoins['forEach'](_0x20eda7=>{const _0x36e2b8=_0x2cd1b1;_0x20eda7[_0x36e2b8(0x242)]==_0x5528c5[_0x36e2b8(0x242)]&&(_0x2a1bf1=!![]);});if(!_0x2a1bf1)return;const _0x4ed0ee=currentCoins[_0x2cd1b1(0x2f1)](_0x265fc0=>_0x265fc0['symbol']==_0x5528c5[_0x2cd1b1(0x242)]),_0x7ae725=_0x4ed0ee[_0x2cd1b1(0x21f)],_0x5d87d6=_0x19e45b=>{const _0x593a76=_0x2cd1b1,_0x34daeb=currentCoins['find'](_0x171b11=>_0x171b11['symbol']==_0x5528c5[_0x593a76(0x242)]);if(_0x34daeb)_0x34daeb[_0x593a76(0x17b)]=_0x19e45b;};let _0x5bce8d=![];for(const _0x3b303a of lastOrders){const _0x4d5dce=0x64,_0x567b61=0x1388;let _0x4d55f3=0x0;while(!_0x3b303a[_0x2cd1b1(0x251)]&&_0x4d55f3*_0x4d5dce<_0x567b61){_0x4d55f3++,await sleep(_0x4d5dce);}if(_0x4d55f3>0x0)logger['debug'](_0x2cd1b1(0x13b)+_0x4d55f3*_0x4d5dce/0x3e8+'\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed');_0x3b303a[_0x2cd1b1(0x251)]==_0x5528c5['id']&&(_0x5bce8d=!![]);}if(_0x53d3ce==_0x2cd1b1(0x2c5)){_0x5d87d6('open');if(_0x5528c5[_0x2cd1b1(0x2d8)]>0x0&&_0x5528c5[_0x2cd1b1(0x2d8)]<_0x5528c5[_0x2cd1b1(0x17a)]){if(_0x5bce8d){setBlockTransactionDetection(!![]),logger[_0x2cd1b1(0x130)](_0x2cd1b1(0x2a7)+_0x5528c5[_0x2cd1b1(0x2d8)]+_0x2cd1b1(0x224)+_0x5528c5['id']);const _0x5e931d=await getCoins(balanceUpdateDelay,undefined,undefined,_0x7ae725);[currentCoins,currentCoinsAll]=_0x5e931d,setBlockTransactionDetection(![]);}else logger['debug'](_0x2cd1b1(0x2a7)+_0x5528c5['filled']+_0x2cd1b1(0x1b8)+_0x5528c5['id']),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay);}}else{if(_0x53d3ce==_0x2cd1b1(0x24b)){_0x5d87d6(_0x2cd1b1(0x24b)),lastOrders=lastOrders[_0x2cd1b1(0x19d)](_0x4c5ec4=>_0x4c5ec4['symbol']!=_0x5528c5['symbol']);const _0x49192d=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x49192d,setBlockTransactionDetection(![]),await getOpenOrders(),handleOpenOrders();}else{if(_0x53d3ce==_0x2cd1b1(0x29e)){if(lastOrders)for(const _0x5d1955 of lastOrders){if(_0x5d1955[_0x2cd1b1(0x251)]==_0x5528c5['id']){logger[_0x2cd1b1(0x130)](_0x2cd1b1(0x29f)+_0x5528c5['id']),_0x5bce8d=!![];if(_0x5d1955['filled']==0x0){setBlockTransactionDetection(!![]),logger[_0x2cd1b1(0x130)](_0x2cd1b1(0x2c9)+_0x5528c5['id']);if(_0x5528c5[_0x2cd1b1(0x1a1)])_0x5d1955['price']=_0x5528c5[_0x2cd1b1(0x1a1)];else{if(_0x5528c5[_0x2cd1b1(0x1d1)])_0x5d1955[_0x2cd1b1(0x1d1)]=_0x5528c5[_0x2cd1b1(0x1d1)];else{}}_0x5d1955[_0x2cd1b1(0x2d8)]=_0x5528c5['filled'],updateHighestFee(_0x5d1955);const _0x174622=await getCoins(balanceUpdateDelay,undefined,undefined,_0x7ae725);[currentCoins,currentCoinsAll]=_0x174622,setBlockTransactionDetection(![]),await validateOrders(),_0x5d87d6(_0x2cd1b1(0x2d8)),_0x5d1955[_0x2cd1b1(0x183)]={'currency':_0x5528c5[_0x2cd1b1(0x183)]?_0x5528c5[_0x2cd1b1(0x183)][_0x2cd1b1(0x15d)]:null,'cost':_0x5528c5[_0x2cd1b1(0x183)]?_0x5528c5['fee'][_0x2cd1b1(0x2e6)]:0x0},await updatePnL(_0x5d1955);}}}!_0x5bce8d&&(logger['debug'](_0x2cd1b1(0x164)+_0x5528c5['id']),_0x5d87d6(_0x2cd1b1(0x2d8)),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay),await updateOpenOrders(),handleOpenOrders());}}}if(lastBalances){let _0x533e64=JSON[_0x2cd1b1(0x2e4)](lastBalances[_0x2cd1b1(0x1c9)]);const _0x2acdc4=_0x533e64[_0x2cd1b1(0x2f1)](_0x1315e1=>_0x1315e1[_0x2cd1b1(0x242)]==_0x5528c5[_0x2cd1b1(0x242)]);if(_0x2acdc4){if(_0x53d3ce==_0x2cd1b1(0x2c5))_0x2acdc4[_0x2cd1b1(0x17b)]=_0x2acdc4[_0x2cd1b1(0x17b)]==_0x2cd1b1(0x2d8)?'filled':_0x2cd1b1(0x2c5);else{if(_0x53d3ce=='canceled')_0x2acdc4[_0x2cd1b1(0x17b)]=_0x2acdc4['orderstatus']==_0x2cd1b1(0x2d8)?'filled':_0x2cd1b1(0x24b);else _0x53d3ce=='closed'&&(_0x2acdc4['orderstatus']=_0x2cd1b1(0x2d8));}}lastBalances={...lastBalances,'portfolio':JSON[_0x2cd1b1(0x2ef)](_0x533e64)},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){await getOpenOrders();let _0x306a87=![];currentCoins['forEach'](_0x5edeb6=>{const _0x243d98=_0x59ce;_0x306a87=allOpenOrders[_0x243d98(0x2f1)](_0x4f531e=>_0x4f531e[_0x243d98(0x242)]==_0x5edeb6[_0x243d98(0x242)]),_0x5edeb6[_0x243d98(0x17b)]=_0x306a87?_0x243d98(0x2c5):_0x243d98(0x287);});}async function fetchBalance(_0x3a99ba=!![]){const _0x35f8bd=_0xf0755a;let _0x4f5afd,_0x23a7a7;try{return _0x4f5afd=await exchange['fetchBalance'](),_0x23a7a7=_0x4f5afd[_0x35f8bd(0x237)],_0x23a7a7;}catch(_0x5ed60f){return!_0x3a99ba?handleErrorNoStop(_0x5ed60f,_0x35f8bd(0x1f8)):await handleError(_0x5ed60f,'fetchBalance()'),![];}}async function getCoins(_0x42f526=0x0,_0x5db6f6=!![],_0x3fa244=config[_0xf0755a(0x147)],_0xccb6f5){const _0x14347c=_0xf0755a;let _0x1ae241=[],_0x2e6175=[],_0xbae8e1=[],_0x4995b8;if(_0x42f526)await sleep(_0x42f526);if(botPaused)return[currentCoins,currentCoinsAll];let _0x3c93fd=![],_0x4f0bb0=0x0,_0x3162ac,_0x1a6458;_0xccb6f5&&(_0x3162ac=currentCoins[_0x14347c(0x2f1)](_0x5d90ed=>_0x5d90ed[_0x14347c(0x21f)]==_0xccb6f5),_0x3162ac&&(_0x1a6458=_0x3162ac['prevnumber'],delete _0x3162ac['prevnumber']));while(!_0x3c93fd){_0x4995b8=await fetchBalance(_0x5db6f6);if(_0x4995b8){if(_0xccb6f5){if(_0x4995b8[_0xccb6f5]!=_0x1a6458)logger[_0x14347c(0x130)](_0x14347c(0x26a)+_0xccb6f5+':\x20'+_0x4995b8[_0xccb6f5]+'\x20('+_0x1a6458+')'),_0x3c93fd=!![];else{logger[_0x14347c(0x130)](_0x14347c(0x20f)+_0xccb6f5+':\x20'+_0x4995b8[_0xccb6f5]+'\x20('+_0x1a6458+')'),_0x4f0bb0++;if(_0x4f0bb0<balanceUpdateRetries)await sleep(balanceUpdateDelay);else{logger['debug']('Stopped\x20fetching\x20balance\x20after\x20'+_0x4f0bb0+_0x14347c(0x1ee));break;}}}else break;}else return[currentCoins,currentCoinsAll];}for(const [_0x580da8,_0xfc12ac]of Object[_0x14347c(0x297)](_0x4995b8)){_0xbae8e1[_0x14347c(0x2cb)](_0x580da8);}config[_0x14347c(0x1c9)][_0x14347c(0x256)](_0x1dd972=>{const _0x41ce5d=_0x14347c;!_0xbae8e1[_0x41ce5d(0x277)](_0x1dd972[_0x41ce5d(0x21f)])&&(_0x4995b8[_0x1dd972['coin']]=0x0);});if(_0x3fa244=='')for(const [_0x467a76,_0x2a331a]of Object[_0x14347c(0x297)](_0x4995b8)){_0x2a331a!=0x0&&_0x1ae241[_0x14347c(0x2cb)]({'coin':_0x467a76});}else for(const [_0x458a04,_0x2a0569]of Object[_0x14347c(0x297)](_0x4995b8)){const _0x1a6f39=config[_0x14347c(0x1c9)][_0x14347c(0x2f1)](_0x1c4446=>_0x1c4446[_0x14347c(0x21f)]==_0x458a04),_0x266d7a=_0x458a04+'/'+_0x3fa244,_0x25fb77=_0x3fa244+'/'+_0x458a04,_0x55123c=currentCoins[_0x14347c(0x2f1)](_0x1cf3ac=>_0x1cf3ac[_0x14347c(0x21f)]==_0x458a04);if((_0x2a0569!=0x0||_0x1a6f39)&&(allSymbols[_0x14347c(0x277)](_0x266d7a)||_0x458a04==_0x3fa244))_0x55123c?_0x1ae241['push']({..._0x55123c,'number':Math['max'](_0x2a0569+(_0x1a6f39&&_0x1a6f39[_0x14347c(0x206)]||0x0),0x0)}):_0x1ae241[_0x14347c(0x2cb)]({'coin':_0x458a04,'symbol':_0x266d7a,'reverse':![],'number':Math['max'](_0x2a0569+(_0x1a6f39&&_0x1a6f39['offset']||0x0),0x0),'orderstatus':_0x14347c(0x287)});else{if((_0x2a0569!=0x0||_0x1a6f39)&&allSymbols[_0x14347c(0x277)](_0x25fb77))_0x55123c?_0x1ae241[_0x14347c(0x2cb)]({..._0x55123c,'number':Math['max'](_0x2a0569+(_0x1a6f39&&_0x1a6f39[_0x14347c(0x206)]||0x0),0x0)}):_0x1ae241[_0x14347c(0x2cb)]({'coin':_0x458a04,'symbol':_0x25fb77,'reverse':!![],'number':Math[_0x14347c(0x29c)](_0x2a0569+(_0x1a6f39&&_0x1a6f39[_0x14347c(0x206)]||0x0),0x0),'orderstatus':_0x14347c(0x287)});else _0x1a6f39&&_0x1ae241[_0x14347c(0x2cb)]({'coin':_0x1a6f39[_0x14347c(0x21f)],'symbol':_0x1a6f39['symbol'],'reverse':_0x1a6f39[_0x14347c(0x2f7)],'number':0x0,'orderstatus':_0x14347c(0x287)});}}return _0x1ae241[_0x14347c(0x2eb)]((_0x2d74ae,_0x499f73)=>_0x2d74ae[_0x14347c(0x182)]<_0x499f73[_0x14347c(0x182)]?0x1:_0x499f73[_0x14347c(0x182)]<_0x2d74ae[_0x14347c(0x182)]?-0x1:0x0),_0x2e6175=cloneDeep(_0x1ae241),_0x1ae241=_0x1ae241[_0x14347c(0x19d)](_0x4d636c=>{const _0x3b4ec6=_0x14347c,_0x2dd6fc=config[_0x3b4ec6(0x1c9)]['find'](_0x1a12e5=>_0x1a12e5['coin']==_0x4d636c[_0x3b4ec6(0x21f)]);return _0x2dd6fc&&!_0x2dd6fc[_0x3b4ec6(0x13a)];}),[_0x1ae241,_0x2e6175];}async function getOpenOrders(){const _0x213e4d=_0xf0755a;let _0xf83762;allOpenOrders=[];try{for(const _0x11eeec of config[_0x213e4d(0x1c9)]){!_0x11eeec[_0x213e4d(0x13a)]&&_0x11eeec[_0x213e4d(0x21f)]!=config[_0x213e4d(0x147)]&&(_0xf83762=await exchange['fetchOpenOrders'](_0x11eeec[_0x213e4d(0x242)]),_0xf83762[_0x213e4d(0x1f1)]>0x0&&allOpenOrders[_0x213e4d(0x2cb)](_0xf83762[0x0]));}}catch(_0x4f4d0b){await handleError(_0x4f4d0b,'getOpenOrders()');}}async function handleOpenOrders(_0x1133e9=0x0){const _0x4de111=_0xf0755a;allOpenOrders[_0x4de111(0x1f1)]==0x0&&lockOrders==ORDERS[_0x4de111(0x24d)]&&allOrdersPlaced&&(_0x1133e9==0x0?(logger['debug'](_0x4de111(0x1c6)),_0x1133e9++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x4de111(0x130)](_0x4de111(0x145)),validateOrders(_0x4de111(0x2da))));}async function testAPI(){const _0x49c041=_0xf0755a;try{return await exchange[_0x49c041(0x247)](),!![];}catch(_0x17ddb7){return loading[_0x49c041(0x17c)]=!![],emitLoadingProgress(),handleErrorNoStop(_0x17ddb7,_0x49c041(0x28c)),logger[_0x49c041(0x130)](_0x49c041(0x1ef),_0x17ddb7),botPaused=!![],![];}}async function testNewAPI(_0x2984ea){const _0x49434c=_0xf0755a;logger[_0x49434c(0x130)](_0x49434c(0x266));const _0x33e892=ccxt['pro'][_0x2984ea['exchange'][_0x49434c(0x1a8)]()],_0xd32a84=new _0x33e892({'apiKey':_0x2984ea[_0x49434c(0x292)],'secret':_0x2984ea[_0x49434c(0x22a)],'options':{'defaultType':_0x49434c(0x259)}});if(_0x2984ea['apiPassword'])_0xd32a84[_0x49434c(0x235)]=_0x2984ea['apiPassword'];try{await _0xd32a84[_0x49434c(0x247)](),botPaused=![];}catch(_0x74965){logger['debug'](_0x49434c(0x1c8)+_0x74965['toString']());throw _0x74965;}}function cloneDeep(_0x5e6021){const _0x49d40f=_0xf0755a;return JSON[_0x49d40f(0x2e4)](JSON[_0x49d40f(0x2ef)](_0x5e6021));}async function getPortfolio(_0x481ee1){const _0x4921d0=_0xf0755a;let _0x1c33aa=[],_0x4270de=[],_0x20c4a6=[],_0x51f2f9;_0x481ee1[_0x4921d0(0x292)]=decryptRSA(secure['privateKey'],_0x481ee1[_0x4921d0(0x292)]),_0x481ee1[_0x4921d0(0x22a)]=decryptRSA(secure[_0x4921d0(0x1aa)],_0x481ee1['apiSecret']);if(_0x481ee1[_0x4921d0(0x2de)])_0x481ee1[_0x4921d0(0x2de)]=decryptRSA(secure[_0x4921d0(0x1aa)],_0x481ee1[_0x4921d0(0x2de)]);if(_0x481ee1['apiKey']!==_0x4921d0(0x22f)||_0x481ee1['apiSecret']!==_0x4921d0(0x22f)||_0x481ee1[_0x4921d0(0x2de)]&&_0x481ee1[_0x4921d0(0x2de)]!=='************'){if(config['exchange']){if(_0x481ee1['apiKey']==_0x4921d0(0x22f))_0x481ee1[_0x4921d0(0x292)]=config['apiKey'];if(_0x481ee1[_0x4921d0(0x22a)]=='************')_0x481ee1[_0x4921d0(0x22a)]=config[_0x4921d0(0x22a)];if(_0x481ee1['apiPassword']==_0x4921d0(0x22f))_0x481ee1[_0x4921d0(0x2de)]=config['apiPassword'];}try{if(_0x481ee1[_0x4921d0(0x2b8)])await testNewAPI(_0x481ee1);}catch(_0x2dd127){if(_0x2dd127[_0x4921d0(0x2a4)]()[_0x4921d0(0x277)]('AuthenticationError')){logHistory('error',_0x4921d0(0x1e7)),logHistory(_0x4921d0(0x1db),'Error\x20details:\x20'+_0x2dd127[_0x4921d0(0x2a4)]()),proxyEmit(_0x4921d0(0x1c1),![]);return;}else{if(_0x2dd127[_0x4921d0(0x2a4)]()[_0x4921d0(0x277)](_0x4921d0(0x1a9))){logHistory(_0x4921d0(0x1db),_0x4921d0(0x233)),logHistory('error',_0x4921d0(0x16e)+_0x2dd127[_0x4921d0(0x2a4)]()),proxyEmit(_0x4921d0(0x1c1),![]);return;}else{logHistory(_0x4921d0(0x1db),_0x4921d0(0x1fb)+_0x2dd127[_0x4921d0(0x2a4)]()),logger[_0x4921d0(0x130)](_0x4921d0(0x1ef),_0x2dd127),proxyEmit(_0x4921d0(0x1c1),![]);return;}}}exchange?updateExchange(_0x481ee1['apiKey'],_0x481ee1[_0x4921d0(0x22a)],_0x481ee1[_0x4921d0(0x2de)]):await initExchange(_0x481ee1[_0x4921d0(0x2a9)],_0x481ee1['apiKey'],_0x481ee1[_0x4921d0(0x22a)],_0x481ee1['apiPassword']);await loadSymbols();const _0x3c8d17=await getCoins(0x0,![],_0x481ee1[_0x4921d0(0x147)]);_0x20c4a6=cloneDeep(_0x3c8d17[0x1]);}else{const _0x544d8d=await getCoins();_0x20c4a6=cloneDeep(_0x544d8d[0x1]);}if(_0x481ee1[_0x4921d0(0x147)]=='')proxyEmit('portfolio1',!![]),proxyEmit(_0x4921d0(0x184),_0x20c4a6);else{_0x20c4a6[_0x4921d0(0x256)](_0x519a56=>{const _0x43b8e3=_0x4921d0;if(_0x519a56[_0x43b8e3(0x21f)]!=_0x481ee1['basecoin']&&allSymbols['includes'](_0x519a56['symbol']))_0x1c33aa['push'](_0x519a56['symbol']);});if(_0x1c33aa[_0x4921d0(0x1f1)]==0x0)logHistory('error','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot');else{try{_0x4270de=await getTickers(_0x1c33aa);}catch(_0x4b0b6f){logHistory(_0x4921d0(0x1db),_0x4921d0(0x20e)),logger[_0x4921d0(0x130)](_0x4921d0(0x1ef),_0x4b0b6f),proxyEmit(_0x4921d0(0x1c1),![]);return;}_0x20c4a6[_0x4921d0(0x256)](_0x3da515=>{const _0x5da03b=_0x4921d0;_0x3da515[_0x5da03b(0x21f)]!=_0x481ee1[_0x5da03b(0x147)]?_0x4270de[_0x3da515[_0x5da03b(0x242)]]?_0x51f2f9=_0x3da515['reverse']?0x1/_0x4270de[_0x3da515[_0x5da03b(0x242)]][_0x5da03b(0x1bc)]:_0x4270de[_0x3da515['symbol']][_0x5da03b(0x1bc)]:_0x51f2f9=0x0:_0x51f2f9=0x1,_0x3da515['price']=formatResult(_0x51f2f9,0x8);}),await getMarketCap(_0x20c4a6),proxyEmit('portfolio1',!![]),proxyEmit(_0x4921d0(0x184),_0x20c4a6);}}}function truncateTradeAmount(_0x35ad79,_0xac5c97){const _0x528adb=_0xf0755a;let _0x4a78db=0x0;try{_0x4a78db=exchange[_0x528adb(0x222)](_0x35ad79,_0xac5c97);}catch(_0x102765){}return _0x4a78db;}function checkMinimums(_0x9abc1){const _0x37cfdd=_0xf0755a;let _0x49ffc3=!![];const _0xe909ee=!_0x9abc1[_0x37cfdd(0x2f7)]?markets[_0x9abc1['symbol']][_0x37cfdd(0x26e)][_0x37cfdd(0x17a)]['min']:markets[_0x9abc1[_0x37cfdd(0x242)]][_0x37cfdd(0x26e)]['cost'][_0x37cfdd(0x18b)],_0x13477b=!_0x9abc1['reverse']?markets[_0x9abc1[_0x37cfdd(0x242)]][_0x37cfdd(0x26e)][_0x37cfdd(0x2e6)][_0x37cfdd(0x18b)]:markets[_0x9abc1[_0x37cfdd(0x242)]][_0x37cfdd(0x26e)][_0x37cfdd(0x17a)][_0x37cfdd(0x18b)],_0x589309=truncateTradeAmount(_0x9abc1[_0x37cfdd(0x242)],_0x9abc1[_0x37cfdd(0x1b7)]);_0x9abc1[_0x37cfdd(0x1b7)]=_0x589309;if(Math['abs'](_0x589309)<_0xe909ee)_0x49ffc3=![];if(Math[_0x37cfdd(0x1b6)](_0x589309)*_0x9abc1[_0x37cfdd(0x1bc)]<_0x13477b)_0x49ffc3=![];if(_0x9abc1['side']==_0x37cfdd(0x1f9)){let _0x32aa62=config[_0x37cfdd(0x1c9)]['find'](_0x50a2c2=>_0x50a2c2[_0x37cfdd(0x21f)]==_0x9abc1['coin']);if(_0x32aa62[_0x37cfdd(0x206)]>0x0){if(Math[_0x37cfdd(0x1b6)](_0x589309)>_0x9abc1[_0x37cfdd(0x1b9)]-_0x32aa62['offset'])_0x49ffc3=![];}else{if(Math[_0x37cfdd(0x1b6)](_0x589309)>_0x9abc1['number'])_0x49ffc3=![];}}if(_0x9abc1[_0x37cfdd(0x1c7)]=='buy'){let _0x465186=config[_0x37cfdd(0x1c9)][_0x37cfdd(0x2f1)](_0x29d892=>_0x29d892[_0x37cfdd(0x21f)]==config['basecoin']),_0xcbfc5b=currentCoins[_0x37cfdd(0x2f1)](_0x2349fd=>_0x2349fd[_0x37cfdd(0x21f)]==config['basecoin']);if(_0x465186[_0x37cfdd(0x206)]>0x0){if(Math['abs'](_0x589309)*_0x9abc1[_0x37cfdd(0x1bc)]>_0xcbfc5b[_0x37cfdd(0x1b9)]-_0x465186['offset'])_0x49ffc3=![];}else{if(Math[_0x37cfdd(0x1b6)](_0x589309)*_0x9abc1[_0x37cfdd(0x1bc)]>_0xcbfc5b[_0x37cfdd(0x1b9)])_0x49ffc3=![];}}return _0x49ffc3;}async function getBalances(_0x197340=!![]){const _0x3ee7f5=_0xf0755a;if(botPaused)return;let _0x26bab5=0x0,_0x17e5c8;const _0x1a3af7=config[_0x3ee7f5(0x24a)];if(config[_0x3ee7f5(0x1b4)]&&config['change24h']<0x0)await validate24hChanges();currentCoins[_0x3ee7f5(0x256)](_0x1b98d9=>{const _0x1ec647=_0x3ee7f5;if(_0x1b98d9['coin']!=config[_0x1ec647(0x147)]){let _0x465043=gTicker[noslash(_0x1b98d9[_0x1ec647(0x242)])];_0x17e5c8=_0x1b98d9[_0x1ec647(0x2f7)]?0x1/_0x465043:_0x465043;}else _0x17e5c8=0x1;let _0x400392=_0x1b98d9['number']*_0x17e5c8;_0x26bab5+=_0x400392,_0x1b98d9[_0x1ec647(0x1bc)]=formatResult(Number(_0x17e5c8),0x8),_0x1b98d9[_0x1ec647(0x23c)]=_0x400392;}),currentCoins[_0x3ee7f5(0x256)](_0x334b39=>{const _0x447c0f=_0x3ee7f5;let _0x4a6028=config['portfolio'][_0x447c0f(0x2f1)](_0x14251a=>_0x14251a['coin']==_0x334b39[_0x447c0f(0x21f)]),_0x314324=Number(_0x4a6028['distribution']),_0x5561fd=_0x334b39['value']/_0x26bab5*0x64,_0x1b60c8=_0x314324*_0x26bab5/0x64/_0x334b39[_0x447c0f(0x1bc)]-_0x334b39[_0x447c0f(0x1b9)];_0x334b39[_0x447c0f(0x273)]=formatResult(_0x5561fd,0x3),_0x334b39[_0x447c0f(0x2bb)]=formatResult(_0x314324,0x3),_0x334b39[_0x447c0f(0x1b7)]=formatResult(_0x1b60c8,0x8),_0x334b39[_0x447c0f(0x1c7)]='',_0x334b39[_0x447c0f(0x2fd)]=![];if(_0x334b39[_0x447c0f(0x21f)]!=config['basecoin']){if(_0x334b39['distribution']>_0x314324)_0x334b39[_0x447c0f(0x1c7)]='sell',_0x334b39[_0x447c0f(0x2fd)]=checkMinimums(_0x334b39);else _0x334b39[_0x447c0f(0x273)]<_0x314324&&(_0x334b39[_0x447c0f(0x1c7)]=_0x447c0f(0x29a),_0x334b39[_0x447c0f(0x2fd)]=checkMinimums(_0x334b39));}_0x334b39[_0x447c0f(0x182)]=_0x334b39['distribution']/_0x334b39[_0x447c0f(0x2bb)]-0x1;if(_0x334b39[_0x447c0f(0x17b)]==_0x447c0f(0x2d8)||_0x334b39[_0x447c0f(0x17b)]==_0x447c0f(0x24b))_0x334b39['orderstatus']=_0x447c0f(0x287);}),currentCoins[_0x3ee7f5(0x2eb)]((_0x352caa,_0xdc0030)=>_0x352caa[_0x3ee7f5(0x182)]<_0xdc0030[_0x3ee7f5(0x182)]?0x1:_0xdc0030[_0x3ee7f5(0x182)]<_0x352caa[_0x3ee7f5(0x182)]?-0x1:0x0);const _0x489b7c=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x489b7c[_0x3ee7f5(0x19b)],'usd':_0x489b7c[_0x3ee7f5(0x223)],'portfolio':JSON['stringify'](currentCoins),'threshold':_0x1a3af7},proxyEmit(_0x3ee7f5(0x231),{'serverversion':serverversion,'balances':lastBalances});if(_0x197340){if(config[_0x3ee7f5(0x1b4)])headlessMode({'portfolio':currentCoins,'threshold':_0x1a3af7});else lockOrders==ORDERS[_0x3ee7f5(0x27f)]&&!coolingDown&&notifyBalance({'portfolio':currentCoins,'threshold':_0x1a3af7});}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x27d4d7=getNormalizedPerformance();getStartingBalances(_0x27d4d7),emitPerformance(_0x27d4d7);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}function getPnL(){const _0x6252b0=_0xf0755a;let _0x2b40fe=dbCoinResults[_0x6252b0(0x1a2)](_0x6252b0(0x19f))['value'](),_0x22a3d4=0x0;return Object[_0x6252b0(0x297)](_0x2b40fe)[_0x6252b0(0x256)](([_0x582fae,_0x1644df])=>{_0x22a3d4+=_0x1644df['realizedPnL'];}),_0x22a3d4;}async function storePerformance(){const _0x26cbd2=_0xf0755a;if(!lastBalances)return;let _0x5a69d7=[],_0x4477a3;const _0x393cbc=getPnL();let _0x4ba30b=JSON[_0x26cbd2(0x2e4)](lastBalances['portfolio']);_0x4ba30b[_0x26cbd2(0x2eb)]((_0x155abc,_0x4e7698)=>_0x155abc[_0x26cbd2(0x21f)]>_0x4e7698[_0x26cbd2(0x21f)]?0x1:_0x4e7698[_0x26cbd2(0x21f)]>_0x155abc[_0x26cbd2(0x21f)]?-0x1:0x0),_0x4ba30b[_0x26cbd2(0x256)](_0x442fa9=>{const _0x1238f0=_0x26cbd2;let _0x2f738d={'coin':_0x442fa9[_0x1238f0(0x21f)],'number':_0x442fa9[_0x1238f0(0x1b9)],'price':_0x442fa9['last']};_0x5a69d7[_0x1238f0(0x2cb)](_0x2f738d);});const _0x3e45c4=await getFiat(),_0x6bdef6=getTimeStamp()[_0x26cbd2(0x1e8)]('\x20')[0x0],_0x5f54ab=dbPerformance['get'](_0x26cbd2(0x166))[_0x26cbd2(0x2f1)]({'date':_0x6bdef6})[_0x26cbd2(0x23c)]();_0x4477a3={'date':_0x6bdef6,'eur':_0x3e45c4[_0x26cbd2(0x19b)],'usd':_0x3e45c4[_0x26cbd2(0x223)],'coins':_0x5a69d7,'pnl':_0x393cbc},_0x5f54ab?_0x4477a3['date']!=config[_0x26cbd2(0x260)]&&dbPerformance[_0x26cbd2(0x1a2)](_0x26cbd2(0x166))[_0x26cbd2(0x2f1)]({'date':_0x6bdef6})['assign'](_0x4477a3)[_0x26cbd2(0x189)]():dbPerformance[_0x26cbd2(0x1a2)]('data')[_0x26cbd2(0x2cb)](_0x4477a3)[_0x26cbd2(0x189)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x107f9a=_0xf0755a;let _0x11981b=[];if(dbPerformance['has'](_0x107f9a(0x166))['value']()){let _0x3f1570=dbPerformance['get'](_0x107f9a(0x166))[_0x107f9a(0x1df)]()[_0x107f9a(0x19d)](_0x34bc8e=>{const _0x3df4ca=_0x107f9a;if(_0x34bc8e[_0x3df4ca(0x19f)][_0x3df4ca(0x1f1)]==0x0)return![];else return!![];})[_0x107f9a(0x240)](_0x107f9a(0x139))['value'](),_0x5945dc=[...config[_0x107f9a(0x213)]];_0x5945dc['sort']((_0xccfdcc,_0x2cff82)=>_0xccfdcc['date']>_0x2cff82[_0x107f9a(0x139)]?-0x1:_0x2cff82['date']>_0xccfdcc['date']?0x1:0x0);let _0x433284=0x1,_0x563512=[],_0x2bceea=0x0;_0x3f1570[_0x107f9a(0x1cd)]()[_0x107f9a(0x2f7)]()[_0x107f9a(0x256)]((_0x453f9f,_0xe48080)=>{const _0x1d2f6f=_0x107f9a;if(_0x5945dc[_0x2bceea]){if(_0x3f1570[_0x3f1570[_0x1d2f6f(0x1f1)]-_0xe48080]&&_0x5945dc[_0x2bceea]['date']==_0x3f1570[_0x3f1570[_0x1d2f6f(0x1f1)]-_0xe48080][_0x1d2f6f(0x139)]){if(_0xe48080<_0x3f1570[_0x1d2f6f(0x1f1)]){let _0xf26afc=0x0,_0x5ba152=0x0;_0x3f1570[_0x3f1570[_0x1d2f6f(0x1f1)]-_0xe48080]['coins'][_0x1d2f6f(0x256)](_0x12be65=>{const _0x4038dd=_0x1d2f6f;_0x5ba152+=_0x12be65[_0x4038dd(0x1b9)]*_0x12be65[_0x4038dd(0x1d1)];}),_0x5945dc[_0x2bceea]['changes'][_0x1d2f6f(0x256)](_0x4babfc=>{const _0x398f2c=_0x1d2f6f;_0xf26afc+=_0x4babfc[_0x398f2c(0x1b9)]*_0x4babfc[_0x398f2c(0x1d1)];}),_0x433284*=_0xf26afc/(_0x5ba152-_0xf26afc)+0x1;}_0x2bceea++;}}let _0x72acc2=0x0;_0x453f9f[_0x1d2f6f(0x19f)][_0x1d2f6f(0x256)](_0x56c22b=>{const _0x11339b=_0x1d2f6f;_0x72acc2+=_0x56c22b[_0x11339b(0x1b9)]*_0x56c22b[_0x11339b(0x1d1)];}),_0x563512[_0x3f1570[_0x1d2f6f(0x1f1)]-_0xe48080-0x1]=_0x72acc2*(_0x433284-0x1);});let _0x515b68=[];_0x5945dc=[...config[_0x107f9a(0x213)]]||[];let _0x5c3d23=0x0;_0x2bceea=0x0,_0x3f1570[_0x107f9a(0x256)]((_0x195d75,_0x1dfdd7)=>{const _0x3b2b5c=_0x107f9a;if(_0x5945dc[_0x2bceea]){const _0x6fa1b9=fns[_0x3b2b5c(0x2e4)](_0x5945dc[_0x2bceea][_0x3b2b5c(0x139)],'yyyy/MM/dd',new Date()),_0x4cc691=fns['parse'](_0x195d75[_0x3b2b5c(0x139)],'yyyy/MM/dd',new Date());if(fns[_0x3b2b5c(0x286)](_0x6fa1b9,_0x4cc691)){let _0x565f65=0x0;_0x5945dc[_0x2bceea][_0x3b2b5c(0x27b)]['forEach'](_0x5517a0=>{const _0x174aca=_0x3b2b5c;!_0x515b68[_0x5517a0['coin']]?_0x515b68[_0x5517a0['coin']]=_0x5517a0[_0x174aca(0x1b9)]:(_0x565f65=_0x515b68[_0x5517a0[_0x174aca(0x21f)]],_0x515b68[_0x5517a0[_0x174aca(0x21f)]]+=_0x5517a0[_0x174aca(0x1b9)]);const _0x599216=_0x195d75[_0x174aca(0x19f)][_0x174aca(0x2f1)](_0x37e763=>_0x37e763[_0x174aca(0x21f)]==_0x5517a0[_0x174aca(0x21f)]);(!_0x599216||_0x599216[_0x174aca(0x1b9)]==0x0)&&(_0x5c3d23+=(-_0x5517a0[_0x174aca(0x1b9)]-_0x565f65)*_0x5517a0[_0x174aca(0x1d1)]);}),_0x2bceea++;}}_0x195d75[_0x3b2b5c(0x19f)][_0x3b2b5c(0x256)]((_0x2425d2,_0x23f2ea)=>{const _0x531f29=_0x3b2b5c;_0x515b68[_0x2425d2['coin']]&&(_0x2425d2[_0x531f29(0x1e9)]=_0x515b68[_0x2425d2[_0x531f29(0x21f)]]);}),_0x11981b[_0x3b2b5c(0x2cb)]({'date':_0x195d75[_0x3b2b5c(0x139)],'eur':_0x195d75[_0x3b2b5c(0x19b)],'usd':_0x195d75[_0x3b2b5c(0x223)],'offset':_0x563512[_0x1dfdd7],'netoffset':_0x5c3d23,'coins':_0x195d75[_0x3b2b5c(0x19f)],'pnl':_0x195d75[_0x3b2b5c(0x159)]});});}return _0x11981b;}function emitPerformance(_0x3af223){const _0x96ee42=_0xf0755a;_0x3af223[_0x96ee42(0x1f1)]!==0x0?(proxyEmit('performance',_0x3af223),lastPerformanceEmitted=getDate()):proxyEmit(_0x96ee42(0x132),[]);}function getPerf(_0x52a967,_0x3bfd92){const _0x53d309=_0xf0755a;let _0x1d3859=0x0,_0x2fd14c=0x0,_0x436894=0x0;_0x52a967[_0x53d309(0x19f)]['forEach'](_0x5b3139=>{const _0x48678a=_0x53d309;_0x1d3859+=_0x5b3139[_0x48678a(0x1b9)]*_0x5b3139['price'];});_0x3bfd92&&(_0x1d3859+=_0x52a967[_0x53d309(0x206)]);if(config[_0x53d309(0x147)]===_0x53d309(0x2c3)||config[_0x53d309(0x147)]===_0x53d309(0x1f5)||config['basecoin']==='PAXG')_0x2fd14c=_0x1d3859*_0x52a967[_0x53d309(0x19b)],_0x436894=_0x1d3859*_0x52a967[_0x53d309(0x223)];else{if(usdBasecoins['includes'](config[_0x53d309(0x147)]))_0x2fd14c=_0x1d3859*_0x52a967['eur']/_0x52a967[_0x53d309(0x223)],_0x436894=_0x1d3859;else config['basecoin']==='EUR'&&(_0x2fd14c=_0x1d3859,_0x436894=_0x1d3859*_0x52a967['usd']/_0x52a967[_0x53d309(0x19b)]);}return[_0x1d3859,_0x2fd14c,_0x436894];}function CurrencyFactor(_0x5bcdf3,_0x35ba2b,_0x418978){const _0x41f66c=_0xf0755a;let _0x301421;if(_0x35ba2b===_0x41f66c(0x2c3)||_0x35ba2b==='ETH'||_0x35ba2b===_0x41f66c(0x25f))_0x301421=_0x418978===_0x41f66c(0x1d9)?_0x5bcdf3[_0x41f66c(0x19b)]:_0x5bcdf3['usd'];else{if(usdBasecoins[_0x41f66c(0x277)](_0x35ba2b))_0x301421=_0x418978===_0x41f66c(0x1d9)?_0x5bcdf3['eur']/_0x5bcdf3[_0x41f66c(0x223)]:0x1;else _0x35ba2b==='EUR'&&(_0x301421=_0x418978===_0x41f66c(0x1d9)?0x1:_0x5bcdf3['usd']/_0x5bcdf3['eur']);}return _0x301421;}function getKPIs(_0x54fbe6,_0x2ea5bf=_0xf0755a(0x1d9)){const _0x19f78f=_0xf0755a,_0x49447a=config[_0x19f78f(0x147)],_0x5c9b78=lastBalances,_0x3c2271=currentCoins,_0x1012fe=getNormalizedPerformance(),_0x3f94f6=CurrencyFactor(_0x5c9b78,config['basecoin'],_0x2ea5bf);let _0x1d40b7=0x0;_0x3c2271[_0x19f78f(0x256)](_0x115c0e=>{_0x1d40b7+=_0x115c0e['number']*_0x115c0e['last'];});_0x54fbe6[_0x19f78f(0x277)]('fiat')&&(_0x1d40b7*=_0x3f94f6);let _0x38bfd4;if(_0x1d40b7!==0x0){if(_0x54fbe6==='basecoin'||_0x54fbe6===_0x19f78f(0x208)){if(_0x54fbe6===_0x19f78f(0x147))_0x38bfd4=(_0x1d40b7/startingBalances['basecoin']-0x1)*0x64;else{if(_0x2ea5bf===_0x19f78f(0x1d9))_0x38bfd4=(_0x1d40b7/startingBalances[_0x19f78f(0x19b)]-0x1)*0x64;else _0x38bfd4=(_0x1d40b7/startingBalances[_0x19f78f(0x223)]-0x1)*0x64;}}if(_0x54fbe6['includes'](_0x19f78f(0x2ee))){let _0xdcdbf7=0x0;if(startingBalances[_0x19f78f(0x19f)])_0x3c2271['forEach'](_0x862547=>{const _0x3aa001=_0x19f78f;let _0x4a1bce=startingBalances[_0x3aa001(0x19f)][_0x3aa001(0x2f1)](_0x5c7808=>_0x5c7808[_0x3aa001(0x21f)]===_0x862547[_0x3aa001(0x21f)]);if(_0x4a1bce&&_0x4a1bce[_0x3aa001(0x21f)]&&_0x862547[_0x3aa001(0x1b9)]!==0x0)_0xdcdbf7+=_0x4a1bce[_0x3aa001(0x1b9)]*_0x862547['last'];});let _0x2a2daf=0x0;if(_0x1012fe[_0x19f78f(0x1f1)]!==0x0){let _0x1438ca=_0x1012fe[_0x1012fe[_0x19f78f(0x1f1)]-0x1];_0x2a2daf=_0x1438ca['netoffset'];}_0xdcdbf7-=_0x2a2daf;let _0x1cbb0;_0x54fbe6===_0x19f78f(0x249)&&(_0x1cbb0=startingBalances[_0x19f78f(0x147)]),_0x54fbe6===_0x19f78f(0x2fa)&&(_0x1cbb0=_0x2ea5bf==='EUR'?startingBalances[_0x19f78f(0x19b)]:startingBalances[_0x19f78f(0x223)],_0xdcdbf7*=_0x3f94f6),_0x38bfd4=(_0x1d40b7-_0xdcdbf7)/_0x1cbb0*0x64,_0x1d40b7=_0x1d40b7-_0xdcdbf7;}if(_0x54fbe6[_0x19f78f(0x277)](_0x19f78f(0x159))){if(_0x1012fe[_0x19f78f(0x1f1)]!==0x0&&_0x3c2271[_0x19f78f(0x1f1)]!==0x0){let _0x48a91a,_0x245964=_0x1012fe[_0x1012fe[_0x19f78f(0x1f1)]-0x1][_0x19f78f(0x159)];_0x54fbe6['includes'](_0x19f78f(0x208))?(_0x48a91a=_0x2ea5bf===_0x19f78f(0x1d9)?startingBalances[_0x19f78f(0x19b)]:startingBalances[_0x19f78f(0x223)],_0x245964*=CurrencyFactor(_0x5c9b78,_0x49447a,_0x2ea5bf)):_0x48a91a=startingBalances['basecoin'],_0x38bfd4=_0x245964/_0x48a91a*0x64,_0x1d40b7=_0x245964;}}if(_0x38bfd4){if(_0x38bfd4<0x64)_0x38bfd4=_0x38bfd4[_0x19f78f(0x2d4)](0x2);else{if(_0x38bfd4<0x3e8)_0x38bfd4=_0x38bfd4[_0x19f78f(0x2d4)](0x1);else _0x38bfd4=_0x38bfd4[_0x19f78f(0x2d4)](0x0);}}else _0x38bfd4=Number('0')['toFixed'](0x2);if(_0x1d40b7){if(Math[_0x19f78f(0x1b6)](_0x1d40b7)<0.000001)_0x1d40b7=_0x1d40b7['toFixed'](0x2);else{if(Math['abs'](_0x1d40b7)<0.1)_0x1d40b7=_0x1d40b7[_0x19f78f(0x2d4)](0x6);else{if(Math[_0x19f78f(0x1b6)](_0x1d40b7)<0x1)_0x1d40b7=_0x1d40b7[_0x19f78f(0x2d4)](0x5);else{if(Math[_0x19f78f(0x1b6)](_0x1d40b7)<0xa)_0x1d40b7=_0x1d40b7[_0x19f78f(0x2d4)](0x4);else{if(Math[_0x19f78f(0x1b6)](_0x1d40b7)<0x64)_0x1d40b7=_0x1d40b7[_0x19f78f(0x2d4)](0x3);else{if(Math[_0x19f78f(0x1b6)](_0x1d40b7)<0x3e8)_0x1d40b7=_0x1d40b7[_0x19f78f(0x2d4)](0x2);else _0x1d40b7=_0x1d40b7[_0x19f78f(0x2d4)](0x2);}}}}}}else _0x1d40b7=Number('0')[_0x19f78f(0x2d4)](0x2);}else _0x38bfd4=Number('0')[_0x19f78f(0x2d4)](0x2);if(_0x38bfd4>=0x0)_0x38bfd4='+'+_0x38bfd4;return{'value':_0x1d40b7,'change':_0x38bfd4};}async function getStartingBalances(_0x4dc962,_0x5c08e2=!![]){const _0x3b4769=_0xf0755a;if(_0x4dc962['length']!==0x0){const [_0x276237,_0x57b344,_0x21d6df]=getPerf(_0x4dc962[0x0],!![]);let _0x17ae0a=[];config[_0x3b4769(0x1c9)][_0x3b4769(0x256)](_0x1bb91d=>{const _0x4284ad=_0x3b4769;let _0x5a5b91=0x0,_0x33ac66;config['liquidity'][_0x4284ad(0x256)](_0x1753ac=>{const _0x323e8e=_0x4284ad;let _0x3558bc=_0x1753ac[_0x323e8e(0x27b)]['find'](_0x32500c=>_0x32500c[_0x323e8e(0x21f)]==_0x1bb91d['coin']);if(_0x3558bc){_0x5a5b91+=_0x3558bc[_0x323e8e(0x1b9)];if(!_0x33ac66)_0x33ac66=_0x3558bc[_0x323e8e(0x1d1)];}}),_0x17ae0a[_0x4284ad(0x2cb)]({'coin':_0x1bb91d[_0x4284ad(0x21f)],'number':_0x5a5b91,'initialprice':_0x33ac66});});const _0x10d4e8={'basecoin':_0x276237,'eur':_0x57b344,'usd':_0x21d6df,'coins':_0x17ae0a};if(_0x5c08e2)proxyEmit(_0x3b4769(0x298),_0x10d4e8);startingBalances=_0x10d4e8;}}function headlessMode(_0x7b5197){const _0x438406=_0xf0755a;let _0x22f11a=_0x7b5197[_0x438406(0x1c9)],_0x4f4522=_0x7b5197['threshold'],_0x26bcad=[];for(let _0xcc16c0 of _0x22f11a){if(_0xcc16c0['coin']!=config[_0x438406(0x147)]){if(_0xcc16c0[_0x438406(0x182)]>=_0x4f4522/0x64){if(_0xcc16c0[_0x438406(0x2fd)])_0x26bcad[_0x438406(0x2cb)](_0xcc16c0);}else{if(_0xcc16c0['delta']<=-_0x4f4522/0x64){if(_0xcc16c0[_0x438406(0x2fd)])_0x26bcad[_0x438406(0x2cb)](_0xcc16c0);}}}}_0x26bcad[_0x438406(0x1f1)]>0x0&&placeOrder(_0x26bcad);}function notifyBalance(_0x1c37fe){const _0x635dfd=_0xf0755a;let _0x2a9148=_0x1c37fe['portfolio'],_0x25e3a7=_0x1c37fe[_0x635dfd(0x24a)],_0x54a21e=[];for(let _0x2a71fe of _0x2a9148){if(_0x2a71fe[_0x635dfd(0x21f)]!=config['basecoin']){if(_0x2a71fe[_0x635dfd(0x182)]>=_0x25e3a7/0x64){if(_0x2a71fe[_0x635dfd(0x2fd)])_0x54a21e[_0x635dfd(0x2cb)](_0x2a71fe);}else{if(_0x2a71fe[_0x635dfd(0x182)]<=-_0x25e3a7/0x64){if(_0x2a71fe['valid'])_0x54a21e[_0x635dfd(0x2cb)](_0x2a71fe);}}}}if(_0x54a21e[_0x635dfd(0x1f1)]>0x0){let _0x410538=_0x54a21e[_0x635dfd(0x194)](_0x14ee5a=>_0x14ee5a['coin']);_0x410538[_0x635dfd(0x2eb)]();let _0x3cde1f=_0x410538[_0x635dfd(0x2ae)](',\x20');if(!lastCoinsToBalance)logHistory(_0x635dfd(0x216),_0x635dfd(0x1b5));lastCoinsToBalance=_0x3cde1f;}}function symbolToCoin(_0x3d3a94){const _0x32dc5c=_0xf0755a;let _0x141338;if(_0x3d3a94[_0x32dc5c(0x277)]('/'+config['basecoin']))_0x141338=_0x3d3a94[_0x32dc5c(0x1fd)]('/'+config[_0x32dc5c(0x147)],'');if(_0x3d3a94[_0x32dc5c(0x277)](config[_0x32dc5c(0x147)]+'/'))_0x141338=_0x3d3a94[_0x32dc5c(0x1fd)](config[_0x32dc5c(0x147)]+'/','');return _0x141338;}function setLockOrders(_0x2dccf5){lockOrders=_0x2dccf5,logger['debug']('Set\x20lock\x20orders\x20to:\x20'+Object['keys'](ORDERS)[lockOrders]);}async function unlockOrders(_0x5a1422=![]){const _0x15058e=_0xf0755a;if(allOrdersPlaced&&lockOrders==ORDERS['LOCKED']){setLockOrders(ORDERS[_0x15058e(0x188)]);if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);if(_0x5a1422){const _0x4dfecf=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x4dfecf,setBlockTransactionDetection(![]);}validateOrdersState='initial',persistOpenOrders([]),setLockOrders(ORDERS[_0x15058e(0x27f)]);}}async function validateOrders(_0x4d8b54){const _0x384e42=_0xf0755a;if(_0x4d8b54)validateOrdersState=_0x4d8b54;logger[_0x384e42(0x130)]('1\x20-\x20Validate\x20orders:\x20'+validateOrdersState+_0x384e42(0x14d)+Object[_0x384e42(0x1d7)](ORDERS)[lockOrders]);let _0x1edc9f=[],_0x44b783=config[_0x384e42(0x2ab)]=='market'?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config['timeout']*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x384e42(0x24d)])return;logger['debug'](_0x384e42(0x18a)+validateOrdersState);for(let _0xb1debd=lastOrders['length']-0x1;_0xb1debd>=0x0;_0xb1debd--){let _0x466e3a=lastOrders[_0xb1debd],_0x435fd4=![];_0x466e3a[_0x384e42(0x2d8)]>0x0&&(_0x435fd4=!![]),_0x1edc9f[_0x384e42(0x2cb)](_0x435fd4),_0x435fd4&&config[_0x384e42(0x2ab)]!='market'&&logHistory('order',_0x384e42(0x178)+_0x466e3a[_0x384e42(0x242)]+'\x20'+_0x466e3a[_0x384e42(0x1c7)]+'\x20#'+formatResult(_0x466e3a[_0x384e42(0x2d8)],0x8)+'\x20@'+formatResult(_0x466e3a[_0x384e42(0x1d1)],0x8)),_0x435fd4&&lastOrders[_0x384e42(0x2a8)](_0xb1debd,0x1);}persistOpenOrders(lastOrders);const _0x45cfd3=coolingDown?_0x384e42(0x28a):_0x384e42(0x229);if(validateOrdersState=='initial'){validateOrdersState=_0x384e42(0x293);if(_0x1edc9f[_0x384e42(0x277)](![])){}else await unlockOrders();}else{if(validateOrdersState=='ongoing'){if(_0x1edc9f[_0x384e42(0x277)](![])){}else await unlockOrders();}else{if(validateOrdersState==_0x384e42(0x13c))_0x1edc9f[_0x384e42(0x277)](![])&&(config[_0x384e42(0x2ab)]==_0x384e42(0x2a0)?logHistory(_0x384e42(0x263),_0x384e42(0x17f)+Math['round'](_0x44b783*validateOrderInterval/0xea60)+_0x384e42(0x2c6)+_0x45cfd3):(await cancelOrders(),logHistory(_0x384e42(0x263),_0x384e42(0x18e)+Math[_0x384e42(0x1fa)](_0x44b783*validateOrderInterval/0xea60)+_0x384e42(0x2c6)+_0x45cfd3))),await unlockOrders(!![]);else{if(validateOrdersState==_0x384e42(0x2da)){if(config['ordertype']!=_0x384e42(0x2a0))logHistory(_0x384e42(0x263),_0x384e42(0x1a6)+_0x45cfd3);await unlockOrders(!![]);}}}}}async function cancelOrders(){lastOrders['forEach'](async _0x440bfd=>{const _0x492486=_0x59ce;try{const _0x10c806=await exchange[_0x492486(0x1af)](_0x440bfd['orderId'],_0x440bfd[_0x492486(0x242)]);}catch(_0x28fefd){if(_0x28fefd[_0x492486(0x2a4)]()[_0x492486(0x277)]('OrderNotFound')){}else await handleError(_0x28fefd,_0x492486(0x258));}});}async function initCoinResults(_0x695c8b){const _0x4c05c0=_0xf0755a;_0x695c8b?logger['debug']('Resetting\x20coin\x20results:\x20'+_0x695c8b):logger[_0x4c05c0(0x130)](_0x4c05c0(0x2d2)),config[_0x4c05c0(0x1c9)][_0x4c05c0(0x256)](_0x5eb0c0=>{const _0x3d07df=_0x4c05c0;if(!_0x5eb0c0[_0x3d07df(0x13a)]&&_0x5eb0c0[_0x3d07df(0x21f)]!=config['basecoin']){const _0x530aa2=currentCoins[_0x3d07df(0x2f1)](_0x2ddd15=>_0x2ddd15['coin']==_0x5eb0c0[_0x3d07df(0x21f)]),_0xf4d31a=gTicker[noslash(_0x5eb0c0[_0x3d07df(0x242)])];let _0x22c06c=_0x530aa2?_0x530aa2[_0x3d07df(0x1b9)]:null,_0x5bee9d=_0x5eb0c0[_0x3d07df(0x2f7)]?0x1/_0xf4d31a:_0xf4d31a,_0x48f5ec;config['liquidity']['forEach'](_0x3e7817=>{const _0x127b59=_0x3d07df;!_0x48f5ec&&(_0x48f5ec=_0x3e7817['changes'][_0x127b59(0x2f1)](_0x1bf536=>_0x1bf536[_0x127b59(0x21f)]==_0x5eb0c0[_0x127b59(0x21f)]),_0x48f5ec&&(_0x22c06c=_0x48f5ec[_0x127b59(0x1b9)],_0x5bee9d=_0x48f5ec[_0x127b59(0x1d1)]));});let _0x190cfb=dbCoinResults['get'](_0x3d07df(0x19f))['find']({'coin':_0x5eb0c0[_0x3d07df(0x21f)]})[_0x3d07df(0x23c)]();if(!_0x190cfb){const _0x35ef4e={'coin':_0x5eb0c0['coin'],'number':_0x22c06c,'breakeven':_0x5bee9d,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get'](_0x3d07df(0x19f))['push'](_0x35ef4e)[_0x3d07df(0x189)]();}else{if(_0x695c8b&&_0x5eb0c0[_0x3d07df(0x21f)]==_0x695c8b){const _0x559daa={'coin':_0x5eb0c0[_0x3d07df(0x21f)],'number':_0x22c06c,'breakeven':_0x5bee9d,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x3d07df(0x1a2)](_0x3d07df(0x19f))[_0x3d07df(0x2f1)]({'coin':_0x5eb0c0[_0x3d07df(0x21f)]})[_0x3d07df(0x150)](_0x559daa)[_0x3d07df(0x189)]();}}}});}async function placeOrder(_0x46886d){const _0x1293df=_0xf0755a,_0x430909=config[_0x1293df(0x2ab)]=='market'?_0x1293df(0x2a0):_0x1293df(0x276);if(lockOrders==ORDERS[_0x1293df(0x27f)]&&!coolingDown){setLockOrders(ORDERS[_0x1293df(0x24d)]);while(transactionDetectionOngoing){await sleep(0x64);}logger[_0x1293df(0x130)]('Placing\x20order\x20for:\x20'+_0x46886d[_0x1293df(0x194)](_0xa5ad17=>_0xa5ad17[_0x1293df(0x21f)])[_0x1293df(0x2ae)](',\x20')),lastCoinsToBalance='',allOrdersPlaced=![],validateOrdersState='initial';let _0x42034e=![];lastOrders=[];const _0x1bc867=config[_0x1293df(0x24a)];for(const _0x3e3312 of _0x46886d){let _0x502823,_0x179e88,_0x1cd620,_0x3b94fe,_0x12a4af,_0x3c1132=_0x3e3312[_0x1293df(0x242)];logger[_0x1293df(0x130)](_0x1293df(0x27c)+_0x3e3312['coin']+'\x20'+_0x3e3312['number']+'\x20'+_0x3e3312[_0x1293df(0x1bc)]+'\x20'+_0x3e3312[_0x1293df(0x273)]+'%\x20'+_0x3e3312[_0x1293df(0x2bb)]+'%\x20'+(0x64*_0x3e3312[_0x1293df(0x182)])['toFixed'](0x2)+_0x1293df(0x20b)+_0x1bc867[_0x1293df(0x2d4)](0x2)+'%)');const _0x4b819d=currentCoins['find'](_0x5a6ad4=>_0x5a6ad4[_0x1293df(0x21f)]==_0x3e3312[_0x1293df(0x21f)]);_0x4b819d&&(_0x4b819d[_0x1293df(0x1a5)]=_0x3e3312[_0x1293df(0x1b9)]);try{const _0x2435f7=await exchange['fetchTicker'](_0x3c1132);_0x502823=_0x3e3312[_0x1293df(0x2f7)]?0x1/_0x3e3312[_0x1293df(0x1bc)]:_0x3e3312[_0x1293df(0x1bc)],_0x179e88=_0x2435f7[_0x1293df(0x300)],_0x1cd620=_0x2435f7[_0x1293df(0x207)];_0x3e3312['reverse']?(_0x3b94fe=_0x3e3312[_0x1293df(0x1c7)]==_0x1293df(0x29a)?_0x1293df(0x1f9):_0x1293df(0x29a),_0x12a4af=Math['abs'](_0x3e3312['trade'])/_0x502823):(_0x3b94fe=_0x3e3312[_0x1293df(0x1c7)],_0x12a4af=Math[_0x1293df(0x1b6)](_0x3e3312[_0x1293df(0x1b7)]));_0x430909==_0x1293df(0x276)&&(config[_0x1293df(0x2ab)]==_0x1293df(0x271)&&(_0x502823=_0x3b94fe==_0x1293df(0x29a)?_0x179e88:_0x1cd620),config[_0x1293df(0x2ab)]==_0x1293df(0x272)&&(_0x502823=_0x3b94fe==_0x1293df(0x29a)?_0x1cd620:_0x179e88));_0x12a4af=formatResult(_0x12a4af,0x8),_0x502823=formatResult(_0x502823,0x8);const _0x587b64=_0x3b94fe==_0x1293df(0x1f9)?config[_0x1293df(0x1d8)]?String['fromCodePoint']('0x'+config[_0x1293df(0x1d8)])+'\x20':'':config[_0x1293df(0x2b0)]?String[_0x1293df(0x236)]('0x'+config[_0x1293df(0x2b0)])+'\x20':'',_0x4219d1=_0x430909==_0x1293df(0x2a0)?_0x1293df(0x2b7):config['ordertype']==_0x1293df(0x271)?_0x1293df(0x24c):_0x1293df(0x21c),_0x3292cf=(Math['floor'](Math['random']()*0x35a4e900)+0x5f5e100)['toString']();lastOrders[_0x1293df(0x2cb)]({'customId':_0x3292cf,'symbol':_0x3c1132,'coin':_0x3e3312[_0x1293df(0x21f)],'amount':_0x12a4af,'price':_0x502823,'side':_0x3b94fe,'reverse':_0x3e3312[_0x1293df(0x2f7)],'filled':0x0});let _0x555762;_0x430909==_0x1293df(0x2a0)?_0x3b94fe==_0x1293df(0x29a)&&['Bybit',_0x1293df(0x152),_0x1293df(0x186),_0x1293df(0x1b1),_0x1293df(0x2d1)][_0x1293df(0x277)](config[_0x1293df(0x2a9)])?_0x555762=await exchange[_0x1293df(0x255)](_0x3c1132,_0x430909,_0x3b94fe,_0x12a4af,_0x502823):_0x555762=await exchange['createOrder'](_0x3c1132,_0x430909,_0x3b94fe,_0x12a4af,undefined):_0x555762=await exchange[_0x1293df(0x255)](_0x3c1132,_0x430909,_0x3b94fe,_0x12a4af,_0x502823);const _0x27de22=lastOrders[_0x1293df(0x1f1)]-0x1;if(_0x27de22>=0x0&&lastOrders[_0x27de22][_0x1293df(0x1e5)]==_0x3292cf){lastOrders[_0x27de22][_0x1293df(0x251)]=_0x555762['id'];if(_0x555762[_0x1293df(0x17a)])lastOrders[_0x27de22]['amount']=_0x555762[_0x1293df(0x17a)];if(_0x555762[_0x1293df(0x1d1)])lastOrders[_0x27de22]['price']=_0x555762[_0x1293df(0x1d1)];lastOrders[_0x27de22][_0x1293df(0x183)]=_0x555762['fee'];}if(_0x555762[_0x1293df(0x17a)])_0x12a4af=_0x555762['amount'];if(_0x555762[_0x1293df(0x1d1)])_0x502823=_0x555762[_0x1293df(0x1d1)];if(_0x430909==_0x1293df(0x2a0))logHistory(_0x1293df(0x21e),''+_0x587b64+_0x4219d1+_0x1293df(0x200)+_0x3c1132+'\x20'+_0x3b94fe+'\x20#'+formatResult(_0x12a4af,0x8)+'\x20@'+formatResult(_0x502823,0x8));else logHistory('order',''+_0x587b64+_0x4219d1+_0x1293df(0x200)+_0x3c1132+'\x20'+_0x3b94fe+'\x20#'+formatResult(_0x12a4af,0x8)+'\x20@'+formatResult(_0x502823,0x8));logger[_0x1293df(0x130)](_0x1293df(0x1f3)+_0x555762['id']+_0x1293df(0x201)+_0x3292cf);if(config[_0x1293df(0x155)]!=0x0){let _0x320f9a=null;if(cooldownTracker[_0x1293df(0x1f1)]==config[_0x1293df(0x155)]-0x1)_0x320f9a=cooldownTracker[_0x1293df(0x2cf)]();const _0x485e18=getTimeStamp();cooldownTracker[_0x1293df(0x2cb)](_0x485e18);if(_0x320f9a){const _0x4cf77e=fns[_0x1293df(0x165)](new Date(_0x485e18),new Date(_0x320f9a));if(_0x4cf77e<cooldownInterval){logHistory(_0x1293df(0x1db),_0x1293df(0x205)+config['cooldown']+_0x1293df(0x171)+cooldownInterval/0x3c+'\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20'+cooldownPeriod/(0xe10*0x3e8)+_0x1293df(0x175)),coolingDown=!![];break;}}}}catch(_0x39387b){if(_0x39387b[_0x1293df(0x2a4)]()[_0x1293df(0x277)]('MIN_NOTIONAL'))lastOrders=lastOrders[_0x1293df(0x19d)](_0x1b1147=>_0x1b1147[_0x1293df(0x242)]!=_0x3c1132),logHistory(_0x1293df(0x1db),_0x1293df(0x265)+_0x3c1132),_0x42034e=!![];else{if(_0x39387b[_0x1293df(0x2a4)]()[_0x1293df(0x277)](_0x1293df(0x25a)))lastOrders=lastOrders[_0x1293df(0x19d)](_0x31d7f8=>_0x31d7f8[_0x1293df(0x242)]!=_0x3c1132),logHistory(_0x1293df(0x1db),'Order\x20amount\x20is\x20invalid:\x20'+_0x3c1132),_0x42034e=!![];else{if(_0x39387b['toString']()[_0x1293df(0x277)](_0x1293df(0x15b)))lastOrders=lastOrders[_0x1293df(0x19d)](_0x490663=>_0x490663['symbol']!=_0x3c1132),logHistory(_0x1293df(0x1db),_0x1293df(0x2b5)+_0x3c1132),logger['debug'](_0x39387b),_0x42034e=!![];else _0x39387b['toString']()['includes'](_0x1293df(0x196))?(lastOrders=lastOrders[_0x1293df(0x19d)](_0x434601=>_0x434601[_0x1293df(0x242)]!=_0x3c1132),logHistory(_0x1293df(0x1db),_0x1293df(0x265)+_0x3c1132),_0x42034e=!![]):(lastOrders=lastOrders[_0x1293df(0x19d)](_0x3dc3a0=>_0x3dc3a0['symbol']!=_0x3c1132),await handleError(_0x39387b,'placeOrder()',_0x3c1132));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x1293df(0x1f1)]>0x0){const _0x4f4eda=config[_0x1293df(0x2ab)]==_0x1293df(0x2a0)?validateOrderTimeout*0x3c*0x3e8:config[_0x1293df(0x202)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x5ad52f=_0x1293df;validateOrders(_0x5ad52f(0x13c));},_0x4f4eda);}else unlockOrders();_0x42034e&&config[_0x1293df(0x1b4)]&&(logHistory(_0x1293df(0x1db),_0x1293df(0x2e0)+pauseBotMsg),await pauseBot(pauseBotInterval)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x1293df(0x263),'Cooldown\x20ended\x20-\x20balancing\x20resumed'));}else{if(coolingDown)!config[_0x1293df(0x1b4)]&&logHistory(_0x1293df(0x1db),'Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode');else lockOrders!=ORDERS[_0x1293df(0x27f)]&&(!config[_0x1293df(0x1b4)]&&(config[_0x1293df(0x2ab)]=='market'?logHistory(_0x1293df(0x1db),_0x1293df(0x275)):logHistory('error',_0x1293df(0x1cc))));}}function persistOpenOrders(_0x15c39d){const _0x45ddf6=_0xf0755a,_0x133766={...config,'openOrders':_0x15c39d};let _0x4934a1=dbConfig[_0x45ddf6(0x1a2)](_0x45ddf6(0x217))['find']({'botID':botID})[_0x45ddf6(0x23c)]();_0x4934a1&&dbConfig[_0x45ddf6(0x1a2)](_0x45ddf6(0x217))[_0x45ddf6(0x2f1)]({'botID':botID})['assign'](_0x133766)[_0x45ddf6(0x189)]();}function restoreOrders(){const _0xb828c7=_0xf0755a;let _0x2e33e1;config[_0xb828c7(0x269)]&&allOpenOrders[_0xb828c7(0x256)](_0x29d933=>{const _0x2a71a9=_0xb828c7,_0x433184=config[_0x2a71a9(0x269)]['find'](_0x5b6bdc=>_0x5b6bdc['orderId']==_0x29d933['id']);_0x433184&&(lastOrders[_0x2a71a9(0x2cb)](_0x433184),_0x2e33e1=_0x29d933['timestamp']);});if(lastOrders['length']>0x0){setLockOrders(ORDERS['LOCKED']),validateOrdersState=_0xb828c7(0x293),allOrdersPlaced=!![];const _0x498ae5=new Date()[_0xb828c7(0x2dd)](),_0xbdaf9a=config[_0xb828c7(0x2ab)]==_0xb828c7(0x2a0)?validateOrderTimeout*0x3c*0x3e8:config[_0xb828c7(0x202)]*0x3c*0x3e8;if(_0x2e33e1+_0xbdaf9a>_0x498ae5){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x2e33e1+_0xbdaf9a-_0x498ae5);}else validateOrders(_0xb828c7(0x13c));}}async function sendMetricsTelegram(){const _0x4f5d77=_0xf0755a;if(!coinsLoaded){process[_0x4f5d77(0x294)]({'telegrammsg':_0x4f5d77(0x28e)},_0x32b856=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x4d54aa='';if(config[_0x4f5d77(0x18f)])_0x4d54aa=_0x4f5d77(0x19e)+config[_0x4f5d77(0x1fc)]+'\x20metrics:</b>\x20\x0a\x0a';else _0x4d54aa='<b>Bot\x20'+botID+_0x4f5d77(0x192);const _0x283e51=config[_0x4f5d77(0x147)],_0x22bef5=config['fiat'],_0x14a21a=getKPIs('basecoin'),_0x243c06=getKPIs(_0x4f5d77(0x208),_0x22bef5),_0x10b05f=getKPIs(_0x4f5d77(0x249)),_0x32f890=getKPIs(_0x4f5d77(0x2fa),_0x22bef5),_0x2e9383=getKPIs(_0x4f5d77(0x17d)),_0xe17bcd=getKPIs('pnl-fiat',_0x22bef5);_0x283e51[_0x4f5d77(0x277)](_0x22bef5)?(_0x4d54aa+=_0x4f5d77(0x246),_0x4d54aa+=_0x4f5d77(0x2e2)+_0x283e51+':\x20'+_0x14a21a[_0x4f5d77(0x23c)]+'\x20('+_0x14a21a[_0x4f5d77(0x291)]+_0x4f5d77(0x1d3),_0x4d54aa+='Net\x20'+_0x283e51+':\x20'+_0x10b05f['value']+'\x20('+_0x10b05f[_0x4f5d77(0x291)]+_0x4f5d77(0x1d3),_0x4d54aa+=_0x4f5d77(0x12d)+_0x283e51+':\x20'+_0x2e9383[_0x4f5d77(0x23c)]+'\x20('+_0x2e9383[_0x4f5d77(0x291)]+_0x4f5d77(0x1d3),_0x4d54aa+='</pre>'):(_0x4d54aa+='<pre>',_0x4d54aa+='Value\x20'+_0x283e51+':\x20'+_0x14a21a[_0x4f5d77(0x23c)]+'\x20('+_0x14a21a['change']+_0x4f5d77(0x1d3),_0x4d54aa+=_0x4f5d77(0x2e2)+_0x22bef5+':\x20'+_0x243c06['value']+'\x20('+_0x243c06[_0x4f5d77(0x291)]+'%)\x0a',_0x4d54aa+=_0x4f5d77(0x2e8)+_0x283e51+':\x20'+_0x10b05f[_0x4f5d77(0x23c)]+'\x20('+_0x10b05f[_0x4f5d77(0x291)]+_0x4f5d77(0x1d3),_0x4d54aa+=_0x4f5d77(0x2e8)+_0x22bef5+':\x20'+_0x32f890['value']+'\x20('+_0x32f890[_0x4f5d77(0x291)]+_0x4f5d77(0x1d3),_0x4d54aa+=_0x4f5d77(0x12d)+_0x283e51+':\x20'+_0x2e9383[_0x4f5d77(0x23c)]+'\x20('+_0x2e9383[_0x4f5d77(0x291)]+_0x4f5d77(0x1d3),_0x4d54aa+=_0x4f5d77(0x12d)+_0x22bef5+':\x20'+_0xe17bcd[_0x4f5d77(0x23c)]+'\x20('+_0xe17bcd['change']+_0x4f5d77(0x1d3),_0x4d54aa+=_0x4f5d77(0x2e1)),process[_0x4f5d77(0x294)]({'telegrammsg':_0x4d54aa},_0x5eb5b7=>{});}async function sendPortfolioTelegram(){const _0x322a73=_0xf0755a;if(!coinsLoaded||!currentCoins[0x0][_0x322a73(0x273)]){process[_0x322a73(0x294)]({'telegrammsg':_0x322a73(0x28e)},_0x13fcb9=>{});return;}let _0x2cd3b0='';if(config[_0x322a73(0x18f)])_0x2cd3b0='<b>'+config[_0x322a73(0x1fc)]+_0x322a73(0x278);else _0x2cd3b0=_0x322a73(0x16a)+botID+_0x322a73(0x278);_0x2cd3b0+=_0x322a73(0x246),_0x2cd3b0+=_0x322a73(0x14e),_0x2cd3b0+=_0x322a73(0x2a6),_0x2cd3b0+=_0x322a73(0x14e),currentCoins[_0x322a73(0x256)](_0x21cb76=>{const _0x20fac7=_0x322a73;_0x2cd3b0+=_0x21cb76[_0x20fac7(0x21f)][_0x20fac7(0x2fc)](0x7)+'|\x20'+formatPad(_0x21cb76[_0x20fac7(0x273)],0x2,0x6)+'|\x20'+formatPad(_0x21cb76[_0x20fac7(0x2bb)],0x2,0x6)+'|\x20'+formatPad(_0x21cb76[_0x20fac7(0x182)]*0x64,0x2,0x6)+'\x0a';}),_0x2cd3b0+=_0x322a73(0x2e1),process['send']({'telegrammsg':_0x2cd3b0},_0x483011=>{});}function formatPad(_0x380e81,_0x4e38af,_0x1635d1){const _0x27eeec=_0xf0755a,_0x4df79e=formatResultString(_0x380e81,_0x4e38af);return _0x4df79e?_0x4df79e['padStart'](_0x1635d1):''[_0x27eeec(0x28f)](_0x1635d1);}function logHistory(_0x14c7a1,_0x32c445,_0x1304b8=''){const _0x57ec5c=_0xf0755a;logger[_0x57ec5c(0x1d4)](''+_0x32c445);let _0x4d2109={'time':getTimeStamp(),'type':_0x14c7a1,'event':_0x32c445};dbLogs[_0x57ec5c(0x1a2)]('logs')['push'](_0x4d2109)[_0x57ec5c(0x189)]();if(_0x1304b8=='')_0x1304b8=_0x32c445;proxyEmit(_0x57ec5c(0x197),{'log':_0x4d2109,'summary':_0x1304b8}),process[_0x57ec5c(0x294)]({'telegram':{..._0x4d2109,'botname':config[_0x57ec5c(0x1fc)],'showname':config[_0x57ec5c(0x18f)]}},_0x4553ca=>{});}function emitHistory(_0x268276={}){const _0x5ec68d=_0xf0755a;Object[_0x5ec68d(0x1d7)](_0x268276)[_0x5ec68d(0x1f1)]==0x0&&(_0x268276={'type':[_0x5ec68d(0x21e),_0x5ec68d(0x197)],'event':'','page':0x1});if(_0x268276[_0x5ec68d(0x131)][_0x5ec68d(0x277)](_0x5ec68d(0x197)))_0x268276['type'][_0x5ec68d(0x2a8)](_0x268276[_0x5ec68d(0x131)][_0x5ec68d(0x2c1)](_0x5ec68d(0x197)),0x1,_0x5ec68d(0x1db),_0x5ec68d(0x216),'success');if(dbLogs[_0x5ec68d(0x290)](_0x5ec68d(0x169))[_0x5ec68d(0x23c)]()){let _0x5ec57c=dbLogs[_0x5ec68d(0x1a2)](_0x5ec68d(0x169))[_0x5ec68d(0x19d)](_0x30ff65=>{const _0x52e118=_0x5ec68d;if(_0x268276[_0x52e118(0x131)][_0x52e118(0x1f1)]==0x0)return![];else return _0x268276[_0x52e118(0x131)][_0x52e118(0x277)](_0x30ff65[_0x52e118(0x131)]);})[_0x5ec68d(0x19d)](_0x22bf6f=>{const _0x4673b6=_0x5ec68d;if(_0x268276[_0x4673b6(0x197)]=='')return!![];else return _0x22bf6f[_0x4673b6(0x197)]['toLowerCase']()[_0x4673b6(0x277)](_0x268276[_0x4673b6(0x197)][_0x4673b6(0x1a8)]());})[_0x5ec68d(0x240)]('time'),_0x578d75=_0x5ec57c[_0x5ec68d(0x23c)]()[_0x5ec68d(0x1f1)];_0x5ec57c=_0x5ec57c['reverse']()[_0x5ec68d(0x1cd)]((_0x268276[_0x5ec68d(0x2db)]-0x1)*logPageSize,_0x268276[_0x5ec68d(0x2db)]*logPageSize-0x1)['reverse']()[_0x5ec68d(0x23c)](),proxyEmit('event-history',{'logs':_0x5ec57c,'total':_0x578d75});}else proxyEmit(_0x5ec68d(0x1b0),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0xeeb9f4){const _0x3268f3=_0xf0755a;if(dbLogs['has'](_0x3268f3(0x169))[_0x3268f3(0x23c)]()){const _0xcaf297=dbLogs['get']('logs')[_0x3268f3(0x240)](_0x3268f3(0x1f4))[_0x3268f3(0x19d)](_0x1eb88f=>{const _0x1d5095=_0x3268f3;return _0x1eb88f['type']==_0x1d5095(0x21e);})[_0x3268f3(0x23c)]();dbLogs[_0x3268f3(0x1a2)](_0x3268f3(0x169))[_0x3268f3(0x28b)]()[_0x3268f3(0x189)](),dbLogs[_0x3268f3(0x1a2)]('logs')['assign'](_0xcaf297)[_0x3268f3(0x189)](),emitHistory(_0xeeb9f4);}}async function pauseBot(_0x561a2d=pauseBotIntervalShort,_0x519ca7,_0x54d88e,_0xfa04c8=![]){const _0x946e11=_0xf0755a,_0x13b563=new Date()['getTime']();if(!lastErrorShown||_0x13b563-lastErrorShown>=_0x561a2d){lastErrorShown=_0x13b563;if(!lastBotPause)lastBotPause=_0x13b563,consecutivePauses=0x1;else{if(_0x13b563-lastBotPause-_0x561a2d<0x5a*0x3e8){consecutivePauses++;if(consecutivePauses>maxPauseRetries){if(_0xfa04c8){logHistory(_0x946e11(0x1db),_0x519ca7+_0x946e11(0x16d)),await killBot();return;}else logHistory(_0x946e11(0x1db),_0x519ca7+pauseBotMsg),_0x561a2d=pauseBotInterval;}}else consecutivePauses=0x1;lastBotPause=_0x13b563;}_0x54d88e?logger[_0x946e11(0x130)]('('+consecutivePauses+')\x20'+_0x519ca7+'\x20>\x20details:',_0x54d88e):logger[_0x946e11(0x130)]('('+consecutivePauses+')\x20'+_0x519ca7);if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);await sleep(_0x561a2d),botPaused=![],_0x561a2d==pauseBotIntervalShort?resumeBot(!![]):resumeBot(![]);}}}async function killBot(){const _0x4cc6bf=_0xf0755a;botPaused=!![],await sleep(0x3e8),process[_0x4cc6bf(0x294)]({'stop':'kill'},_0x3d4c63=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x4d357d,_0x1fc076,_0x3d6a88=![]){const _0x2a3f99=_0xf0755a;if(botPaused)return;let _0x48bce3;const _0x1b7456=config[_0x2a3f99(0x2a9)]||_0x2a3f99(0x1a0);if(_0x1fc076)logger[_0x2a3f99(0x130)]('Exception\x20thrown\x20in\x20'+_0x1fc076);const _0x181a7d=()=>{const _0x5293b1=_0x2a3f99;loading[_0x5293b1(0x1db)]=!![],emitLoadingProgress();};if(_0x4d357d['toString']()['includes'](_0x2a3f99(0x136)))logHistory(_0x2a3f99(0x1db),_0x1b7456+_0x2a3f99(0x23b)),_0x181a7d();else{if(_0x4d357d[_0x2a3f99(0x2a4)]()[_0x2a3f99(0x277)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory('error',_0x1b7456+_0x2a3f99(0x2f9)),_0x181a7d();else{if(_0x4d357d[_0x2a3f99(0x2a4)]()['includes'](_0x2a3f99(0x22e)))config['apiPassword']?_0x48bce3=_0x1b7456+_0x2a3f99(0x29d):_0x48bce3=_0x1b7456+_0x2a3f99(0x261),logHistory(_0x2a3f99(0x1db),_0x48bce3+'\x20(see:\x20hodlerhacks.com/fix/1)'),_0x181a7d();else{if(_0x4d357d[_0x2a3f99(0x2a4)]()['includes']('PermissionDenied'))logHistory(_0x2a3f99(0x1db),_0x1b7456+_0x2a3f99(0x25e)),_0x181a7d();else{if(!_0x3d6a88)await handleError(_0x4d357d,null);}}}}}async function handleError(_0x50bc30,_0x30124c,_0x159fbf=''){const _0x39dce5=_0xf0755a;if(botPaused)return;let _0x42bd46;const _0xfdf56e=config[_0x39dce5(0x2a9)]||'Exchange';if(_0x30124c)logger[_0x39dce5(0x130)]('Exception\x20thrown\x20in\x20'+_0x30124c);if(_0x50bc30[_0x39dce5(0x2a4)]()[_0x39dce5(0x277)]('DDoSProtection'))_0x42bd46=_0xfdf56e+_0x39dce5(0x158),await pauseBot(undefined,_0x42bd46,_0x50bc30);else{if(_0x50bc30[_0x39dce5(0x2a4)]()[_0x39dce5(0x277)](_0x39dce5(0x1de)))_0x42bd46=_0xfdf56e+_0x39dce5(0x25b),await pauseBot(undefined,_0x42bd46,_0x50bc30);else{if(_0x50bc30[_0x39dce5(0x2a4)]()['includes'](_0x39dce5(0x140))||_0x50bc30['toString']()['includes'](_0x39dce5(0x234)))_0x42bd46=_0xfdf56e+'\x20not\x20available\x20(see:\x20hodlerhacks.com/fix/5)',await pauseBot(undefined,_0x42bd46,_0x50bc30[_0x39dce5(0x2a4)]());else{if(_0x50bc30[_0x39dce5(0x2a4)]()['includes'](_0x39dce5(0x148)))_0x42bd46=_0xfdf56e+_0x39dce5(0x227),await pauseBot(undefined,_0x42bd46,_0x50bc30[_0x39dce5(0x2a4)]());else{if(_0x50bc30[_0x39dce5(0x2a4)]()[_0x39dce5(0x277)](_0x39dce5(0x133)))_0x42bd46=_0xfdf56e+_0x39dce5(0x1a4),await pauseBot(undefined,_0x42bd46,_0x50bc30[_0x39dce5(0x2a4)]());else{if(_0x50bc30[_0x39dce5(0x2a4)]()['toLowerCase']()[_0x39dce5(0x277)]('timestamp')||_0x50bc30[_0x39dce5(0x2a4)]()['toLowerCase']()[_0x39dce5(0x277)](_0x39dce5(0x18c)))_0x42bd46='Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)',await pauseBot(undefined,_0x42bd46,_0x50bc30['toString']());else{if(_0x50bc30['toString']()[_0x39dce5(0x277)](_0x39dce5(0x15a)))_0x42bd46=_0xfdf56e+_0x39dce5(0x1dd),await pauseBot(undefined,_0x42bd46,_0x50bc30['toString']());else{if(_0x50bc30 instanceof ccxt[_0x39dce5(0x168)])_0x42bd46=_0xfdf56e+_0x39dce5(0x193)+_0x50bc30[_0x39dce5(0x2a4)](),logger[_0x39dce5(0x130)](_0x39dce5(0x281),_0x50bc30),await pauseBot(undefined,_0x42bd46,_0x50bc30);else{if(_0x50bc30[_0x39dce5(0x2a4)]()['includes'](_0x39dce5(0x136)))logHistory(_0x39dce5(0x1db),_0xfdf56e+_0x39dce5(0x2a2)),logHistory(_0x39dce5(0x1db),_0x39dce5(0x26d)),await killBot();else{if(_0x50bc30[_0x39dce5(0x2a4)]()[_0x39dce5(0x277)](_0x39dce5(0x239)))logHistory('error',_0xfdf56e+_0x39dce5(0x1ec)),logHistory('error','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)'),await killBot();else{if(_0x50bc30[_0x39dce5(0x2a4)]()[_0x39dce5(0x277)](_0x39dce5(0x22e))&&_0x50bc30[_0x39dce5(0x2a4)]()[_0x39dce5(0x277)](_0x39dce5(0x162)))_0x42bd46=_0xfdf56e+'\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)',await pauseBot(undefined,_0x42bd46,_0x50bc30,!![]);else{if(_0x50bc30[_0x39dce5(0x2a4)]()[_0x39dce5(0x277)]('AuthenticationError'))config[_0x39dce5(0x2de)]?_0x42bd46=_0xfdf56e+_0x39dce5(0x29d):_0x42bd46=_0xfdf56e+_0x39dce5(0x261),logHistory(_0x39dce5(0x1db),_0x42bd46),logHistory(_0x39dce5(0x1db),_0x39dce5(0x26d)),await killBot();else{if(_0x50bc30[_0x39dce5(0x2a4)]()[_0x39dce5(0x277)](_0x39dce5(0x1a9)))logHistory(_0x39dce5(0x1db),_0xfdf56e+_0x39dce5(0x1ed)),logHistory(_0x39dce5(0x1db),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)'),await killBot();else{if(_0x50bc30[_0x39dce5(0x2a4)]()[_0x39dce5(0x277)](_0x39dce5(0x2bf)))logHistory(_0x39dce5(0x1db),'Insufficient\x20funds\x20to\x20execute\x20order:\x20'+_0x159fbf),logger['debug'](_0x39dce5(0x1ef),_0x50bc30);else{if(_0x50bc30 instanceof ccxt[_0x39dce5(0x12e)]){_0x42bd46=_0xfdf56e+_0x39dce5(0x1ba)+_0x50bc30[_0x39dce5(0x2a4)]();if(_0x159fbf)_0x42bd46+='\x0aSymbol(s):\x20'+_0x159fbf;await pauseBot(undefined,_0x42bd46,_0x50bc30);}else{_0x42bd46=_0x39dce5(0x270)+_0x50bc30['toString']();if(_0x159fbf)_0x42bd46+=_0x39dce5(0x2e7)+_0x159fbf;await pauseBot(undefined,_0x42bd46);}}}}}}}}}}}}}}}}function decryptRSA(_0x385b6e,_0x59d7c8){const _0xaeafa1=_0xf0755a,_0x16da9f=forge[_0xaeafa1(0x23f)][_0xaeafa1(0x2e3)](_0x385b6e),_0x5343f9=_0x16da9f[_0xaeafa1(0x2e9)](forge[_0xaeafa1(0x210)][_0xaeafa1(0x1e1)](_0x59d7c8),_0xaeafa1(0x1eb),{'md':forge['md'][_0xaeafa1(0x1e4)][_0xaeafa1(0x225)](),'mgf1':{'md':forge['md']['sha256'][_0xaeafa1(0x225)]()}});return _0x5343f9;}async function withRetry(_0x4a3fc1,_0x313328){const _0x1a5d80=_0xf0755a;let _0x411ab1=![],_0x37876a=0x0,_0x7b0a56,_0x88e0a1;while(_0x37876a<maxRetries){try{_0x7b0a56=await _0x313328();break;}catch(_0x16ed72){_0x88e0a1=_0x16ed72,!_0x411ab1?(_0x411ab1=!![],logger[_0x1a5d80(0x130)](_0x1a5d80(0x195)+_0x4a3fc1+':',_0x16ed72['toString']())):await sleep(retryInterval);}_0x37876a++;}if(_0x37876a==0x0)return _0x7b0a56;if(_0x37876a>=maxRetries)throw _0x88e0a1;else return logger[_0x1a5d80(0x130)](_0x1a5d80(0x244)+_0x37876a+_0x1a5d80(0x1ee)),_0x7b0a56;}function formatResult(_0x64b71c,_0x443ab9){return parseFloat(_0x64b71c['toFixed'](_0x443ab9));}function formatResultTruncate(_0x16fd6f,_0x1c27ea){const _0x1d0887=_0xf0755a;let _0x26fc6f=formatResultString(_0x16fd6f,0xa),_0x3f32a1=_0x26fc6f[_0x1d0887(0x2c1)]('.');return _0x3f32a1!=-0x1&&(_0x26fc6f=_0x26fc6f[_0x1d0887(0x1cd)](0x0,_0x3f32a1+_0x1c27ea+0x1)),Number(_0x26fc6f);}function formatResultString(_0x2488e3,_0x1c9ebc){const _0x5b00d8=_0xf0755a;let _0x141575;if(!(''+_0x2488e3)[_0x5b00d8(0x277)]('e'))_0x141575=+(Math[_0x5b00d8(0x1fa)](_0x2488e3+'e+'+_0x1c9ebc)+'e-'+_0x1c9ebc);else{let _0x12b968=(''+_0x2488e3)[_0x5b00d8(0x1e8)]('e'),_0x5f1541='';+_0x12b968[0x1]+_0x1c9ebc>0x0&&(_0x5f1541='+'),_0x141575=+(Math[_0x5b00d8(0x1fa)](+_0x12b968[0x0]+'e'+_0x5f1541+(+_0x12b968[0x1]+_0x1c9ebc))+'e-'+_0x1c9ebc);}return Number(_0x141575)[_0x5b00d8(0x2d4)](_0x1c9ebc);}function getServerTime(){const _0x515b41=_0xf0755a,_0x5cf3c1=new Date();return _0x5cf3c1[_0x515b41(0x1b3)]()+'/'+(_0x5cf3c1[_0x515b41(0x160)]()+0x1)[_0x515b41(0x2a4)]()[_0x515b41(0x28f)](0x2,'0')+'/'+_0x5cf3c1[_0x515b41(0x1c5)]()['toString']()[_0x515b41(0x28f)](0x2,'0')+'\x20'+_0x5cf3c1[_0x515b41(0x1ea)]()[_0x515b41(0x2a4)]()[_0x515b41(0x28f)](0x2,'0')+':'+_0x5cf3c1[_0x515b41(0x2c0)]()['toString']()[_0x515b41(0x28f)](0x2,'0')+':'+_0x5cf3c1[_0x515b41(0x274)]()['toString']()[_0x515b41(0x28f)](0x2,'0');}function getTimeStamp(){const _0x17d167=_0xf0755a,_0x4d11ff=shiftedTime();return _0x4d11ff[_0x17d167(0x1b3)]()+'/'+(_0x4d11ff['getMonth']()+0x1)['toString']()[_0x17d167(0x28f)](0x2,'0')+'/'+_0x4d11ff[_0x17d167(0x1c5)]()[_0x17d167(0x2a4)]()['padStart'](0x2,'0')+'\x20'+_0x4d11ff['getHours']()['toString']()[_0x17d167(0x28f)](0x2,'0')+':'+_0x4d11ff[_0x17d167(0x2c0)]()[_0x17d167(0x2a4)]()['padStart'](0x2,'0')+':'+_0x4d11ff[_0x17d167(0x274)]()['toString']()[_0x17d167(0x28f)](0x2,'0');}function getDate(){const _0x5683e4=_0xf0755a,_0x561187=shiftedTime();return _0x561187['getFullYear']()+'/'+(_0x561187[_0x5683e4(0x160)]()+0x1)[_0x5683e4(0x2a4)]()['padStart'](0x2,'0')+'/'+_0x561187[_0x5683e4(0x1c5)]()['toString']()[_0x5683e4(0x28f)](0x2,'0');}function getHour(){const _0x10dd7d=_0xf0755a,_0x4a5000=shiftedTime();return _0x4a5000['getHours']()[_0x10dd7d(0x2a4)]()[_0x10dd7d(0x28f)](0x2,'0');}function sleep(_0x9e775){return new Promise(_0x1f0df3=>setTimeout(_0x1f0df3,_0x9e775));}function shiftedTime(){const _0x3c829b=_0xf0755a,_0x175260=new Date();let _0x20f830=_0x175260;if(config&&config[_0x3c829b(0x279)]!==0x0)_0x20f830=fns[_0x3c829b(0x22d)](_0x175260,{'hours':config[_0x3c829b(0x279)]});return _0x20f830;}function timer(_0x331953){const _0x9d5f87=_0xf0755a,_0x3be67d=new Date();!lasttime?console[_0x9d5f87(0x2c2)](getTimeStamp()+_0x9d5f87(0x1bf),_0x331953,_0x3be67d):console[_0x9d5f87(0x2c2)](getTimeStamp()+':\x20timer\x20>',_0x331953,(_0x3be67d-lasttime)/0x3e8),lasttime=_0x3be67d;}