const _0x233528=_0x4e22;(function(_0x496482,_0x5d85f3){const _0xdfadf8=_0x4e22,_0x57602b=_0x496482();while(!![]){try{const _0x43a12d=parseInt(_0xdfadf8(0x2d1))/0x1+parseInt(_0xdfadf8(0x2ad))/0x2*(parseInt(_0xdfadf8(0x2c3))/0x3)+parseInt(_0xdfadf8(0x1c4))/0x4+-parseInt(_0xdfadf8(0x24a))/0x5+-parseInt(_0xdfadf8(0x15c))/0x6*(parseInt(_0xdfadf8(0x1bf))/0x7)+parseInt(_0xdfadf8(0x1f0))/0x8+-parseInt(_0xdfadf8(0x147))/0x9*(parseInt(_0xdfadf8(0x21f))/0xa);if(_0x43a12d===_0x5d85f3)break;else _0x57602b['push'](_0x57602b['shift']());}catch(_0x9acc74){_0x57602b['push'](_0x57602b['shift']());}}}(_0x5020,0x87eb3));const _0x210594=function(){let _0x473e63=!![];return function(_0x3fa2bb,_0x5edabe){const _0x5ef24e=_0x473e63?function(){const _0x413715=_0x4e22;if(_0x5edabe){const _0x192b0c=_0x5edabe[_0x413715(0x2d4)](_0x3fa2bb,arguments);return _0x5edabe=null,_0x192b0c;}}:function(){};return _0x473e63=![],_0x5ef24e;};}(),_0x43eb28=_0x210594(this,function(){const _0x4525b3=_0x4e22;return _0x43eb28[_0x4525b3(0x191)]()['search']('(((.+)+)+)+$')[_0x4525b3(0x191)]()[_0x4525b3(0x19f)](_0x43eb28)['search'](_0x4525b3(0x2d2));});_0x43eb28();'use strict';const ccxt=require(_0x233528(0x19d)),low=require('lowdb'),FileSync=require(_0x233528(0x1e8)),fs=require('fs'),fns=require(_0x233528(0x201)),forge=require(_0x233528(0x293)),util=require('util'),argv=require(_0x233528(0x1fd))(process[_0x233528(0x1ee)][_0x233528(0x247)](0x2))[_0x233528(0x1ee)],path=require(_0x233528(0x298)),axios=require('axios');let exchange,gTicker={},gChange={};const usdBasecoins=['USD',_0x233528(0x266),_0x233528(0x127),_0x233528(0x227),_0x233528(0x166),_0x233528(0x285)],excludedExchanges=[_0x233528(0x290)],debugging=argv['d']||![];let pnlGenerationNeeded=argv['r']||![],config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x233528(0x1a8)]({'LOCKED':0x0,'UNLOCKING':0x1,'UNLOCKED':0x2});let lockOrders=ORDERS[_0x233528(0x18e)],validateOrdersState,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotIntervalShort=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0x233528(0x224)+pauseBotInterval/0xea60+_0x233528(0x250),maxPauseRetries=0x6,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,watchTransactionsInterval=0x3c*0x3e8,schedulerInterval=0x3c*0x3c*0x3e8,retryInterval=0x3e8,maxRetries=0x5,logPageSize=0x14,defaultFee=0.003;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidOrdersInitialTimeout,pidOrdersTimeout,botPaused=![],transactionDetectionOngoing=![],lastCoinsToBalance='',exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x5dc,balanceUpdateRetries=0x5;let enableFiatToggle;const serverversion=require(_0x233528(0x22d))[_0x233528(0x22e)],environment=require(_0x233528(0x22d))[_0x233528(0x2ac)]||'production',botID=process[_0x233528(0x1ee)][0x2]||'001',pattern=/^[0-9]{3}$/;!pattern['test'](botID)&&(console['log']('Error:\x20Invalid\x20argument\x20'+botID+_0x233528(0x21e)),killBot());const userID=process['argv'][0x3]||'',configpath=userID?_0x233528(0x1eb)+userID+'/':'./config/',logspath=userID?_0x233528(0x1a2)+userID+'/':_0x233528(0x1a2),loggerfile=fs[_0x233528(0x1a3)](logspath+'/output-000.log',{'flags':'a'});!fs[_0x233528(0x1c3)](configpath)&&fs[_0x233528(0x1cc)](configpath);!fs[_0x233528(0x1c3)](logspath)&&fs['mkdirSync'](logspath);const configfile=configpath+_0x233528(0x1be)+botID+'-config.json',logfile=configpath+_0x233528(0x1be)+botID+'-events.json',performancefile=configpath+_0x233528(0x1be)+botID+_0x233528(0x2bd),coinresultsfile=configpath+_0x233528(0x1be)+botID+_0x233528(0x207),settingsfile=configpath+_0x233528(0x15f),securefile=configpath+_0x233528(0x219),configbackuppath=configpath+_0x233528(0x154),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x233528(0x12f)]({'logs':[],'version':serverversion})[_0x233528(0x158)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance['defaults']({'data':[],'version':serverversion})[_0x233528(0x158)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x233528(0x12f)]({'bot':[],'version':serverversion})[_0x233528(0x158)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults['defaults']({'coins':{},'version':serverversion})[_0x233528(0x158)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0,settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x8afcfe=>{const _0x4eab03=_0x233528;console[_0x4eab03(0x216)](_0x8afcfe);},'simple':_0x18ed1c=>{const _0x534768=_0x233528;console[_0x534768(0x216)](_0x18ed1c),loggerfile[_0x534768(0x158)](util['format'](_0x18ed1c)+'\x0a');},'full':async(_0x5d95b7,_0x591873='')=>{const _0x2f8235=_0x233528;let _0x1ff228;if(config[_0x2f8235(0x2be)])_0x1ff228=getTimeStamp()+':\x20'+config['botname']+'\x20>\x20'+_0x5d95b7;else _0x1ff228=getTimeStamp()+_0x2f8235(0x1e5)+botID+_0x2f8235(0x12a)+_0x5d95b7;console[_0x2f8235(0x216)](_0x1ff228),loggerfile['write'](util[_0x2f8235(0x1ce)](_0x1ff228)+'\x0a'),_0x591873&&(console[_0x2f8235(0x216)](_0x591873),loggerfile[_0x2f8235(0x158)](util[_0x2f8235(0x1ce)](_0x591873)+'\x0a'));},'debug':async(_0x2ae845,_0x1ece23='')=>{const _0xae1660=_0x233528;let _0x6704c7;if(config[_0xae1660(0x2be)])_0x6704c7=getTimeStamp()+':\x20'+config[_0xae1660(0x1e1)]+'\x20>\x20[DEBUG]\x20'+_0x2ae845;else _0x6704c7=getTimeStamp()+_0xae1660(0x1e5)+botID+_0xae1660(0x279)+_0x2ae845;if(debugging)console[_0xae1660(0x216)](_0x6704c7);loggerfile[_0xae1660(0x158)](util[_0xae1660(0x1ce)](_0x6704c7)+'\x0a');if(_0x1ece23){if(debugging)console['log'](_0x1ece23);loggerfile['write'](util[_0xae1660(0x1ce)](_0x1ece23)+'\x0a');}}};process['on'](_0x233528(0x14f),function(_0x384d33){const _0x356870=_0x233528;handleError(_0x384d33[_0x356870(0x1f1)],_0x356870(0x14f));});settings[_0x233528(0x144)]!=config['timeshift']&&updateTimeshift(settings['timeshift']);settings[_0x233528(0x125)]!=config[_0x233528(0x125)]&&updateOnepagemode(settings[_0x233528(0x125)]);(settings['marketcapApi']&&!config[_0x233528(0x100)]||!settings[_0x233528(0x100)]&&config[_0x233528(0x100)])&&updateMarketcapApi(settings[_0x233528(0x100)]);process['send']({'started':_0x233528(0x136)},_0x413784=>{}),initializeProcessListeners();function proxyEmit(_0x1c33ad,_0x549161=null){const _0x4cabff=_0x233528;process[_0x4cabff(0x1db)]({'function':_0x1c33ad,'args':_0x549161},_0x1929ac=>{});}function initializeProcessListeners(){const _0x31a32e=_0x233528;process['on'](_0x31a32e(0x194),_0x3980a3=>{const _0x24bb98=_0x31a32e;switch(Object['keys'](_0x3980a3)[0x0]){case _0x24bb98(0x144):_0x3980a3['timeshift']!=undefined&&(settings[_0x24bb98(0x144)]=_0x3980a3[_0x24bb98(0x144)],updateTimeshift(settings[_0x24bb98(0x144)]));break;case _0x24bb98(0x125):_0x3980a3['onepagemode']!=undefined&&(settings[_0x24bb98(0x125)]=_0x3980a3[_0x24bb98(0x125)],updateOnepagemode(settings[_0x24bb98(0x125)]));break;case _0x24bb98(0x100):_0x3980a3[_0x24bb98(0x100)]!=undefined&&(settings[_0x24bb98(0x100)]=_0x3980a3[_0x24bb98(0x100)],updateMarketcapApi(settings[_0x24bb98(0x100)]));break;case _0x24bb98(0x14d):_0x3980a3[_0x24bb98(0x14d)]!=undefined&&(bots=JSON['parse'](_0x3980a3[_0x24bb98(0x14d)]),proxyEmit(_0x24bb98(0x14d),bots));break;case'function':switch(_0x3980a3[_0x24bb98(0x23d)]){case'initclient':initclient();break;case _0x24bb98(0x23f):toggleBotMode();break;case _0x24bb98(0x11d):emitHistory(_0x3980a3[_0x24bb98(0x1a6)]);break;case _0x24bb98(0x246):deleteHistoryAlerts(_0x3980a3['args']);break;case _0x24bb98(0x1d7):getPortfolio(_0x3980a3[_0x24bb98(0x1a6)]);break;case'storeConfiguration':storeConfiguration(_0x3980a3['args']);break;case _0x24bb98(0x176):storeHeadless(_0x3980a3[_0x24bb98(0x1a6)]);break;case _0x24bb98(0x202):storeFiat(_0x3980a3[_0x24bb98(0x1a6)]);break;case _0x24bb98(0x25c):resetHistory();break;case _0x24bb98(0x2cf):getStartingBalances(getNormalizedPerformance());break;case'placeOrder':placeOrder(_0x3980a3[_0x24bb98(0x1a6)]);break;case _0x24bb98(0x263):cancelLoading();break;case _0x24bb98(0x121):showConfig();break;case _0x24bb98(0x2ab):sendMetricsTelegram();break;case'sendPortfolioTelegram':sendPortfolioTelegram();break;}}});}function _0x5020(){const _0x10a55a=['Avoiding\x20continuous\x20order\x20attempts','\x20MB','\x20order:\x20','Initializing\x20exchange','initTickers()','BTC','Unknown\x20error:\x20','quote','push','AuthenticationError','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','Order\x20is\x20invalid:\x20','privateKey','getMinutes','InvalidOrder','complete','bot-','5341xhOUyh','No\x20more\x20open\x20orders\x20-\x20','\x20orders\x20in\x20less\x20than\x20','watchOrders()','existsSync','3784060xuZYIM','offset','fiat','buys','\x20-\x20bot\x20switched\x20to\x20manual\x20mode','split','Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)','Exchange\x20permission\x20denied\x20-\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','mkdirSync','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','format','Test\x20API','configuration','kill','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','Reset\x20|\x20','change','Resetting\x20bot\x20history','unlinkSync','getPortfolio','canceled','API-key\x20format\x20invalid','forEach','send','.json','amount','2.3.5','buy','toUpperCase','botname','time','portfolio2','max',':\x20Bot\x20','bot','Bybit','lowdb/adapters/FileSync','switch-manual','\x20minutes\x20-\x20','./config/','net-basecoin','add','argv','isEqual','7890888atECLf','stack','realized','find','PermissionDenied','active','getTime','join','keys','Fee\x20discount\x20refund\x20detected:\x20','timestamp','leftTxt','spot','yargs/yargs',')\x20unknown\x20order:\x20','getMonth','ongoing','date-fns','storeFiat','2.6.0','cloneDeep','decrypt','\x20-\x20','-results.json','Limit\x20(high-margin)','excluded','***','must\x20be\x20greater\x20than\x20minimum\x20amount','Failed\x20to\x20load\x20coin\x20data\x20for\x20',')\x20known\x20order:\x20','sortBy','Exception\x20thrown\x20in\x20','apiPassword','LOCKED','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','date','event-history','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','log','Headless:\x20','pro','bb-secure.json','amountToPrecision','OnMaintenance','reverse','replace',',\x20must\x20be\x20a\x203\x20digit\x20number','10WwQplU','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','fromCodePoint','Net\x20','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','\x20>\x20pausing\x20bot\x20for\x20','starting-balance-','orderstatus','USDT','Initiating\x20bot\x20restart','USD','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)','Cooldown\x20ended\x20-\x20balancing\x20resumed','2.6.22','./version.json','version','usd','Net\x20effect','type','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','\x20blocked\x20API\x20(RateLimitExceeded)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','final','fetchBalance','customId','Set\x20lock\x20orders\x20to:\x20','changes','Placing\x20order\x20for:\x20','basecoin','Pausing\x20for\x20','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','function','getHours','toggleBotMode','min','no\x20exchange\x20reloaded','toFixed','marketcapsqrt','startdate','Error\x20details:\x20','deleteHistoryAlerts','slice','performance','\x20change','5014050hPjphx','event','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','Waited\x20','Portfolio\x20change\x20detected:\x20','\x20has\x20a\x2024h\x20drop\x20of\x20','\x20minutes','marketcapEnabled','1\x20-\x20FILLED\x20unknown\x20order:\x20','starting-balances','Order\x20filled:\x20','fetchTickers','last','Order(s)\x20not\x20validated\x20after\x20','RequestTimeout','<b>','timeout','Saving\x20configuration','resetHistory','update-liquidity','closed','pnl','stringify','Initializing\x20coin\x20results','number','cancelLoading','Invalid\x20API\x20details,\x20please\x20try\x20again\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','full','BUSD','breakeven','settings','MIN_NOTIONAL','findIndex','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','no\x20open\x20orders','quick','writeFile','\x20blocked\x20API\x20(DDoSProtection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','\x20-\x20bot\x20already\x20running\x20in\x20manual\x20mode','</pre>','Limit\x20(low-margin)','page','Error\x20while\x20deleting\x20files:\x20','fee','substring','removed','pop','\x20>\x20[DEBUG]\x20','token\x20is\x20expired','\x20|\x20exchange:\x20','cost','exchange\x20reload','\x20|\x20Custom\x20ID:\x20','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','entries','yyyy/MM/dd','detectLiquidityChange()','toLowerCase','USDP','percentage','Exchange','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','BNB/','\x20not\x20available\x20(see:\x20hodlerhacks.com/fix/5)','\x20attempts','target','floor','\x20metrics:</b>\x20\x0a\x0a','eur','bitmex','RSA-OAEP','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','node-forge','error','rightTxt','Error\x20details:','watchTradesForSymbols','path','RateLimitExceeded','Cryptocom','secure','progress','exchanges','length','code','2.7.1','set','initial','InvalidNonce','configuration-stored','portfolio','fetchTicker','sell','placeOrder()','prevnumber','Order\x20amount\x20is\x20invalid:\x20','sendMetricsTelegram','environment','302BRfzWJ','round','isBefore','Failed\x20to\x20load\x20market\x20data\x20-\x20bot\x20not\x20started','parse','status\x20code\x20401','symbol','coin-loading-progress','loadSymbols()','getOpenOrders()','\x20exchange\x20error:\x20','limit','random','cancelOrder','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','\x0aSymbol(s):\x20','-performance.json','showname','Cex','openOrders','exchange','filter','12246ZqygvK','distribution','/USDT','Huobi','Invalid\x20balance\x20for\x20','average','PAXG','Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute','<b>Bot\x20','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','Market\x20order','watchTrades','getStartingBalances','debug','873769CaMIdf','(((.+)+)+)+$','\x20(see:\x20hodlerhacks.com/fix/1)','apply','added','side','1\x20-\x20partially\x20FILLED\x20(','highest','marketcapApi','enableFiatToggle','colorscheme','ETH','coin','sha256','balances','market','limit-high','\x20API\x20secret\x20is\x20invalid','InsufficientFunds','RETRY\x20-\x20Error\x20in\x20','status','configstate','autoliquidity',')\x20|\x20exchange:\x20','Bot\x20','threshold','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','enabled','2\x20-\x20Validate\x20orders:\x20','Loading\x20completed','\x20|\x20lock\x20orders:\x20','Portfolio\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','Updating\x20API\x20key\x20(not\x20saved\x20in\x20config\x20file\x20yet)','net-fiat','getCoinNumber()','decode64','createOrder','emitHistory','Network\x20error\x20details:','recent20','\x20|\x20','showConfig','total','warning','pki','onepagemode','Stopped\x20fetching\x20balance\x20after\x20','TUSD','emojibuy','shift','\x20>\x20','process\x20','restart','liquidity','orderId','defaults','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','open','fetchBalance()','Huobipro','apiSecret','padStart','running','none',':\x20timer\x20>','headless','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','\x20:\x20','order','map','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','ExchangeError','botID','\x20>\x20details:','getFullYear','\x20network\x20error:\x20','timeshift','-events.json','success','13793535xgckjZ','staging','apiKey','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','Error\x20in\x20loadSymbols():\x20','sort','bots','BNB','uncaughtException','Error\x20in\x20testAPI():\x20','indexOf','Unfilled\x20order(s)\x20canceled\x20after\x20','data','/backup/','\x20rejected\x20your\x20API\x20request\x20(see:\x20hodlerhacks.com/fix/4)','assign','sells','write','Invalid\x20quantity','RETRY\x20-\x20Problem\x20resolved\x20after\x20','limits','2598KGeHiQ','0\x20-\x20EXECUTION:\x20','recovery','bb-settings.json','Manual\x20balancing\x20required','1\x20-\x20Validate\x20orders:\x20','2\x20-\x20handling\x20FILLED\x20order:\x20','1\x20-\x20Handle\x20open\x20orders','price','\x20hour','USDC','ask','has','remainingSymbols','Resetting\x20coin\x20results:\x20','trade','\x20portfolio:</b>\x20\x0a\x0a','ordertype','differenceInSeconds','************','watchTradesForSymbols()','splice','get','delta','request-time','red_yellow_blue','storeHeadless','testApi','portfolio1','-------------------------------\x0a','emojisell','sqrt','addDays','\x20value','startprice','abs','cooldown','value','remove','getSeconds','EUR','watchOrders','Block\x20transaction\x20detection:\x20','Valid\x20balance\x20for\x20','create','netoffset','\x20API\x20key\x20is\x20invalid','2.6.23','fetchOpenOrders','marketcap','UNLOCKED','\x20exchange','\x20uses\x20','toString','filled','bid','message','cancelOrders()','includes','coins','password','change24h','realizedPnL','Trigger:\x20','limit-low','ccxt','logs','constructor','/USD','startnumber','./logs/','createWriteStream','currency','<pre>','args','%\x20(','freeze','startsWith','valid','basecoinvalue','getDate','Binance'];_0x5020=function(){return _0x10a55a;};return _0x5020();}reset(!![]);async function reset(_0x16ed4b=![]){const _0xe2ad42=_0x233528;logger[_0xe2ad42(0x2d0)](_0xe2ad42(0x1d3)+(_0x16ed4b?_0xe2ad42(0x27d):_0xe2ad42(0x241))+_0xe2ad42(0x27b)+config[_0xe2ad42(0x2c1)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x16ed4b)lastCoinsToBalance='';coinsLoaded=![];if(config[_0xe2ad42(0x149)]!=''&&config[_0xe2ad42(0x149)]!=_0xe2ad42(0x20a)){loadingProgress=0x0;_0x16ed4b&&(await initExchange(),await loadSymbols(),loadingProgress=0x1,setStableCoins(),proxyEmit(_0xe2ad42(0x1d0),emittedConfiguration()),initialPerformanceStored=![]);const _0x5d3fb3=await getCoins();[currentCoins,currentCoinsAll]=_0x5d3fb3,setBlockTransactionDetection(![]),startScheduler(),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0xe2ad42(0x2d0)]('Loading\x20completed'),getBalances(![]),await updateOpenOrders();if(lastOrders[_0xe2ad42(0x29e)]==0x0&&allOpenOrders[_0xe2ad42(0x29e)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(pnlGenerationNeeded)await generatePnL();}}async function resumeBot(_0x12de17=![]){const _0x903a87=_0x233528;logger[_0x903a87(0x2d0)]('Resuming\x20('+(_0x12de17?_0x903a87(0x26d):_0x903a87(0x1bd))+_0x903a87(0x10f)+config['exchange']);if(pidBalances)clearTimeout(pidBalances);if(_0x12de17){getBalances();return;}coinsLoaded=![];if(config[_0x903a87(0x149)]!=''&&config[_0x903a87(0x149)]!=_0x903a87(0x20a)){loadingProgress=0x1;const _0x1a7da8=await getCoins();[currentCoins,currentCoinsAll]=_0x1a7da8,setBlockTransactionDetection(![]),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x903a87(0x2d0)](_0x903a87(0x115)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x903a87(0x29e)]==0x0&&allOpenOrders[_0x903a87(0x29e)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();}}async function getMarketCap(_0x40ed32){const _0x4c4a58=_0x233528;let _0x46e2af=![];if(_0x40ed32)_0x46e2af=!![];let _0x12408c;_0x46e2af?_0x12408c=_0x40ed32['map'](_0x361b0e=>_0x361b0e[_0x4c4a58(0x104)]):_0x12408c=currentCoinsAll[_0x4c4a58(0x13d)](_0x3c47fa=>_0x3c47fa['coin']);if(!config[_0x4c4a58(0x100)]||!_0x46e2af&&!config[_0x4c4a58(0x251)]||_0x12408c[_0x4c4a58(0x29e)]==0x0)return;let _0x376f4b=null;try{_0x376f4b=await axios[_0x4c4a58(0x172)](_0x4c4a58(0x1b8),{'headers':{'X-CMC_PRO_API_KEY':settings[_0x4c4a58(0x100)]},'params':{'symbol':_0x12408c[_0x4c4a58(0x191)]()}});}catch(_0x56cf86){_0x376f4b=null,_0x56cf86[_0x4c4a58(0x191)]()['includes'](_0x4c4a58(0x2b2))?(config[_0x4c4a58(0x100)]=![],updateConfig(),proxyEmit('configuration',emittedConfiguration()),logHistory(_0x4c4a58(0x294),'CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager')):(logHistory(_0x4c4a58(0x294),'CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20trying\x20again\x20in\x20'+schedulerInterval/(0x3c*0x3e8)+_0x4c4a58(0x250)),logger[_0x4c4a58(0x2d0)](_0x4c4a58(0x296),_0x56cf86[_0x4c4a58(0x191)]()+_0x4c4a58(0x206)+_0x56cf86[_0x4c4a58(0x29f)]));}if(_0x376f4b){let _0x53cff5=0x0;const _0x56af8a=_0x376f4b[_0x4c4a58(0x153)];_0x12408c['forEach'](_0x288ba2=>{const _0x257c87=_0x4c4a58;if(_0x56af8a[_0x257c87(0x153)][_0x288ba2][0x0])_0x53cff5+=_0x56af8a['data'][_0x288ba2][0x0][_0x257c87(0x1b5)][_0x257c87(0x229)]['market_cap'];}),_0x12408c[_0x4c4a58(0x1da)](_0x14b9cf=>{const _0x3b1745=_0x4c4a58,_0x12ee7f=_0x56af8a[_0x3b1745(0x153)][_0x14b9cf][0x0]?_0x56af8a[_0x3b1745(0x153)][_0x14b9cf][0x0][_0x3b1745(0x1b5)][_0x3b1745(0x229)]['market_cap']:0x0;if(_0x46e2af){const _0x28fb6c=_0x40ed32[_0x3b1745(0x1f3)](_0x594c95=>_0x594c95['coin']==_0x14b9cf);_0x28fb6c&&(_0x28fb6c[_0x3b1745(0x18d)]=_0x12ee7f);}else{const _0x534dd8=currentCoins[_0x3b1745(0x1f3)](_0xd1b338=>_0xd1b338[_0x3b1745(0x104)]==_0x14b9cf);_0x534dd8&&(_0x534dd8[_0x3b1745(0x18d)]=_0x12ee7f);const _0x50ed65=currentCoinsAll[_0x3b1745(0x1f3)](_0xd7564c=>_0xd7564c[_0x3b1745(0x104)]==_0x14b9cf);_0x50ed65&&(_0x50ed65[_0x3b1745(0x18d)]=_0x12ee7f);}}),!_0x46e2af&&updateTargetDistribution();}}function updateTargetDistribution(){const _0x4a27a7=_0x233528,_0x426175=0x2;let _0x15aca5=0x0,_0x5c08ea=0x0,_0x54b4f5=0x0,_0x57f39b=0x0,_0x18b893=0x0;config[_0x4a27a7(0x2a5)][_0x4a27a7(0x1da)](_0x23fb2a=>{const _0xc7cd64=_0x4a27a7;if(!_0x23fb2a[_0xc7cd64(0x209)]){_0x54b4f5++,_0x15aca5+=_0x23fb2a['slider'];if(_0x23fb2a['slider']===-0x1){_0x15aca5++;const _0x51ce0e=currentCoinsAll[_0xc7cd64(0x1f3)](_0x413a13=>_0x413a13[_0xc7cd64(0x104)]==_0x23fb2a[_0xc7cd64(0x104)]);_0x51ce0e&&(_0x57f39b+=_0x51ce0e['marketcap'],_0x18b893+=Math[_0xc7cd64(0x17b)](_0x51ce0e[_0xc7cd64(0x18d)]));}if(_0x23fb2a['slider']!==-0x1)_0x5c08ea++;}});let _0x5365dd;const _0x1a94f4=0x64-_0x15aca5,_0x41e115=_0x54b4f5-_0x5c08ea;_0x5365dd=_0x41e115===0x0?_0x15aca5:Math[_0x4a27a7(0x1e4)](0x64,_0x15aca5),config['portfolio'][_0x4a27a7(0x1da)](_0x52b23f=>{const _0x1081f0=_0x4a27a7,_0x332a69=currentCoinsAll[_0x1081f0(0x1f3)](_0x4316ea=>_0x4316ea['coin']==_0x52b23f['coin']);_0x332a69&&(_0x52b23f[_0x1081f0(0x18d)]=_0x332a69[_0x1081f0(0x18d)]);if(!_0x52b23f['excluded']){if(_0x5365dd<=0x64){if(_0x52b23f['slider']===-0x1){if(_0x57f39b!==0x0&&config[_0x1081f0(0x251)]){if(_0x332a69){if(config[_0x1081f0(0x251)]==_0x1081f0(0x18d))_0x52b23f[_0x1081f0(0x2c4)]=(_0x1a94f4/(_0x57f39b/_0x332a69['marketcap']))['toFixed'](_0x426175);else config[_0x1081f0(0x251)]==_0x1081f0(0x243)&&(_0x52b23f[_0x1081f0(0x2c4)]=(_0x1a94f4/(_0x18b893/Math[_0x1081f0(0x17b)](_0x332a69[_0x1081f0(0x18d)])))[_0x1081f0(0x242)](_0x426175));}}}}}}),updateConfig();}function updateConfig(){const _0x3d83fa=_0x233528;let _0x3a86b1=dbConfig[_0x3d83fa(0x172)](_0x3d83fa(0x1e6))[_0x3d83fa(0x1f3)]({'botID':botID})[_0x3d83fa(0x181)]();_0x3a86b1&&dbConfig[_0x3d83fa(0x172)]('bot')[_0x3d83fa(0x1f3)]({'botID':botID})[_0x3d83fa(0x156)](config)['write']();}function logMemory(){const _0x320ecf=_0x233528;if(environment!=_0x320ecf(0x148))return;const _0x43ab16=process['memoryUsage']()['heapUsed']/0x400/0x400;logger[_0x320ecf(0x2d0)](_0x320ecf(0x12b)+process['pid']+_0x320ecf(0x190)+formatResult(_0x43ab16,0x1)+_0x320ecf(0x1af));}async function startScheduler(){const _0x22158c=_0x233528,_0x66b1a3=shiftedTime()[_0x22158c(0x23e)]();getMarketCap(),loadSymbols(),_0x66b1a3==0x1&&logMemory(),await sleep(schedulerInterval),startScheduler();}async function restartBot(_0x34cb56=![]){const _0x3929b9=_0x233528;logger['debug'](_0x3929b9(0x228));if(!_0x34cb56)while(lockOrders!=ORDERS[_0x3929b9(0x18e)]||coolingDown){await sleep(0x3e8);}process['send']({'stop':_0x3929b9(0x12c)},_0x1ba9f0=>{});}async function initExchange(_0x1ae0f1=config[_0x233528(0x2c1)],_0x3736a8=config[_0x233528(0x149)],_0x7f8bd2=config[_0x233528(0x134)],_0x49fdb1=config['apiPassword']){const _0x3d9b57=_0x233528;if(exchange){logger[_0x3d9b57(0x2d0)]('Initializing\x20exchange:\x20already\x20done');return;}logger[_0x3d9b57(0x2d0)](_0x3d9b57(0x1b1));!supportedExchanges()[_0x3d9b57(0x196)](_0x1ae0f1)&&(logHistory(_0x3d9b57(0x294),_0x3d9b57(0x223)+_0x1ae0f1+_0x3d9b57(0x18f)),killBot());const _0x3a4e26=ccxt[_0x3d9b57(0x218)][_0x1ae0f1[_0x3d9b57(0x284)]()];exchange=new _0x3a4e26({'apiKey':_0x3736a8,'secret':_0x7f8bd2,'options':{'defaultType':'spot'}});if(_0x49fdb1)exchange[_0x3d9b57(0x198)]=_0x49fdb1;}function updateExchange(_0xcd6aa0,_0x4d6868,_0x229b57=null){const _0x383680=_0x233528;exchange[_0x383680(0x149)]=_0xcd6aa0,exchange[_0x383680(0x134)]=_0x4d6868,exchange['apiPassword']=_0x229b57,logger['debug'](_0x383680(0x118));}function setStableCoins(){const _0xe5a27=_0x233528;let _0x21f189=config[_0xe5a27(0x23a)]==_0xe5a27(0x103)?_0xe5a27(0x103):config[_0xe5a27(0x23a)]==_0xe5a27(0x2c9)?_0xe5a27(0x2c9):_0xe5a27(0x1b3),_0x26ac41=allSymbols[_0xe5a27(0x196)](_0x21f189+_0xe5a27(0x1a0))?_0xe5a27(0x229):allSymbols['includes'](_0x21f189+_0xe5a27(0x2c5))?_0xe5a27(0x227):_0xe5a27(0x184),_0x512578=allSymbols[_0xe5a27(0x196)](_0x21f189+'/EUR')?'EUR':_0x26ac41;enableFiatToggle=!![],_0x26ac41=='EUR'&&(enableFiatToggle=![],storeFiat(_0xe5a27(0x184))),_0x512578!=_0xe5a27(0x184)&&(enableFiatToggle=![],storeFiat(_0xe5a27(0x229))),stablecoins={'eur':{'coin':''+_0x21f189+_0x512578,'symbol':_0x21f189+'/'+_0x512578},'usd':{'coin':''+_0x21f189+_0x26ac41,'symbol':_0x21f189+'/'+_0x26ac41}};}async function initwsCcxt(){const _0x232082=_0x233528;initCycle++;const _0x1e690f=initCycle;let _0x74f5b=[];config['portfolio'][_0x232082(0x1da)](_0x264db2=>{const _0xea6bbb=_0x232082;if(!_0x264db2[_0xea6bbb(0x209)]&&_0x264db2['coin']!=config[_0xea6bbb(0x23a)])_0x74f5b[_0xea6bbb(0x1b6)](_0x264db2[_0xea6bbb(0x2b3)]);});if(!_0x74f5b[_0x232082(0x196)](stablecoins[_0x232082(0x28f)][_0x232082(0x2b3)]))_0x74f5b['push'](stablecoins[_0x232082(0x28f)][_0x232082(0x2b3)]);if(!_0x74f5b[_0x232082(0x196)](stablecoins[_0x232082(0x22f)][_0x232082(0x2b3)]))_0x74f5b[_0x232082(0x1b6)](stablecoins[_0x232082(0x22f)][_0x232082(0x2b3)]);if(config['exchange'][_0x232082(0x1a9)]('Binance')&&config[_0x232082(0x23a)]!=_0x232082(0x2c9)){if(!_0x74f5b[_0x232082(0x196)](_0x232082(0x289)+config[_0x232082(0x23a)]))_0x74f5b['push'](_0x232082(0x289)+config[_0x232082(0x23a)]);}loadCoins(_0x74f5b),_0x74f5b=validateSymbols(_0x74f5b);const _0x473a9b=async _0x415cbd=>{const _0x50f148=_0x232082;let _0x2b025a;try{const _0x35d526=await getTickers(_0x415cbd);Object['entries'](_0x35d526)[_0x50f148(0x1da)](_0x5bbaa5=>{const _0x263f24=_0x50f148;_0x2b025a=_0x5bbaa5[0x1][_0x263f24(0x2b3)],gTicker[noslash(_0x2b025a)]=_0x5bbaa5[0x1]['last'],gChange[_0x2b025a]=_0x5bbaa5[0x1][_0x263f24(0x286)];});}catch(_0x57a4e5){await handleError(_0x57a4e5,_0x50f148(0x1b2),_0x2b025a);}},_0x4affdd=async _0x4f2a4d=>{const _0x2d146a=_0x232082;while(initCycle==_0x1e690f){if(!botPaused)try{const _0x23edbe=await exchange[_0x2d146a(0x2ce)](_0x4f2a4d);gTicker[noslash(_0x23edbe[0x0][_0x2d146a(0x2b3)])]=_0x23edbe[0x0][_0x2d146a(0x164)];}catch(_0x5b5664){if(!exchangeStopped)await handleError(_0x5b5664,'watchTrades()',_0x4f2a4d);}else await sleep(0x64);}},_0x2fdbba=async _0x486af2=>{const _0xd8ffe8=_0x232082;while(initCycle==_0x1e690f){if(!botPaused)try{const _0x78c15f=await exchange[_0xd8ffe8(0x297)](_0x486af2),_0x583763=_0x78c15f[_0xd8ffe8(0x278)]();gTicker[noslash(_0x583763['symbol'])]=_0x583763[_0xd8ffe8(0x164)];}catch(_0xeb10ae){if(!exchangeStopped)await handleError(_0xeb10ae,_0xd8ffe8(0x170),_0x486af2[_0xd8ffe8(0x191)]());}else await sleep(0x64);}},_0x314a71=async _0x320f77=>{while(initCycle==_0x1e690f){if(!botPaused){let _0x2e6fc0;try{await sleep(0x3c*0x3e8);const _0x33bf10=await getTickers(_0x320f77);Object['entries'](_0x33bf10)['forEach'](_0x236dab=>{const _0x23318b=_0x4e22;_0x2e6fc0=_0x236dab[0x1][_0x23318b(0x2b3)],gChange[_0x2e6fc0]=_0x236dab[0x1][_0x23318b(0x286)];});}catch(_0x5f1ca4){if(!exchangeStopped)await handleError(_0x5f1ca4,'fetchTickers()',_0x2e6fc0);}}else await sleep(0x64);}},_0x105338=async _0x1f163b=>{const _0x3546ad=_0x232082;while(initCycle==_0x1e690f){if(!botPaused)try{const _0x380ddd=await exchange['watchOrders'](_0x1f163b);initCycle==_0x1e690f&&_0x380ddd[_0x3546ad(0x1da)](_0x31046d=>{updateNumberCoinsCcxt(_0x31046d);});}catch(_0x5b7f8f){if(!exchangeStopped)await handleError(_0x5b7f8f,_0x3546ad(0x1c2));}else await sleep(0x64);}};_0x473a9b(_0x74f5b),_0x314a71(_0x74f5b),exchange['has'][_0x232082(0x297)]&&!(config[_0x232082(0x2c1)]==_0x232082(0x1e7)&&_0x74f5b[_0x232082(0x29e)]>0xa)?_0x2fdbba(_0x74f5b):_0x74f5b[_0x232082(0x1da)](_0x41ab0b=>{_0x4affdd(_0x41ab0b);}),_0x74f5b[_0x232082(0x1da)](_0x31cd26=>{_0x105338(_0x31cd26);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0xda8c0b){const _0x1e814a=_0x233528;let _0x3024e2={};try{if(config[_0x1e814a(0x2c1)]!=_0x1e814a(0x29a))_0x3024e2=await exchange[_0x1e814a(0x255)](_0xda8c0b);else for(const _0x4f5f01 of _0xda8c0b){const _0x2f0e11=await exchange[_0x1e814a(0x2a6)](_0x4f5f01);_0x3024e2[_0x4f5f01]=_0x2f0e11;}return _0x3024e2;}catch(_0x261603){throw _0x261603;}}function setBlockTransactionDetection(_0x158879){const _0x317b50=_0x233528;blockTransactionDetection=_0x158879,logger['debug'](_0x317b50(0x186)+blockTransactionDetection);}async function detectLiquidityChange(_0x3329d5=0x0){const _0x5b93ca=_0x233528;transactionDetectionOngoing=!![];try{const _0x2b6c2d=await getCoins(_0x3329d5),[_0xfb8e9f,_0x2db900]=_0x2b6c2d;let _0x16a7d3=[];currentCoins['forEach'](_0x147102=>{const _0x46bf5b=_0x4e22,_0x1d28ac=_0xfb8e9f[_0x46bf5b(0x1f3)](_0x530a93=>_0x530a93[_0x46bf5b(0x104)]==_0x147102[_0x46bf5b(0x104)]);if(_0x1d28ac){if(_0x147102[_0x46bf5b(0x262)]!=_0x1d28ac[_0x46bf5b(0x262)]){let _0x16ebf0;if(_0x147102[_0x46bf5b(0x104)]!=config['basecoin']){const _0x13d39f=gTicker[noslash(_0x147102[_0x46bf5b(0x2b3)])];_0x16ebf0=_0x147102['reverse']?0x1/_0x13d39f:_0x13d39f;}else _0x16ebf0=0x1;_0x16a7d3[_0x46bf5b(0x1b6)]({'coin':_0x147102[_0x46bf5b(0x104)],'symbol':_0x147102['symbol'],'price':_0x16ebf0,'number':Number(formatResult(_0x1d28ac[_0x46bf5b(0x262)]-_0x147102['number'],0x8)),'basecoinvalue':_0x16ebf0*(_0x1d28ac['number']-_0x147102[_0x46bf5b(0x262)])});}}});if(_0x16a7d3['length']>0x0&&!blockTransactionDetection){for(const _0xcdf2b2 of _0x16a7d3){if(config[_0x5b93ca(0x10e)]){logger['debug'](_0x5b93ca(0x130)+_0xcdf2b2['basecoinvalue']+'\x20|\x20highest\x20fee:\x20'+lastFees[_0x5b93ca(0xff)]);if(lastFees[_0x5b93ca(0xff)]==0x0||Math[_0x5b93ca(0x17f)](_0xcdf2b2[_0x5b93ca(0x1ab)])>lastFees[_0x5b93ca(0xff)]*0x3){if(config[_0x5b93ca(0x10e)]==_0x5b93ca(0x25d)){delete _0xcdf2b2['symbol'],delete _0xcdf2b2['basecoinvalue'];let _0x2ab639=[],_0x3bba54=[...config[_0x5b93ca(0x12d)]]||[],_0x4b8bd9=config['liquidity'];_0x3bba54['sort']((_0x50a028,_0x204bb0)=>_0x50a028[_0x5b93ca(0x213)]>_0x204bb0['date']?-0x1:_0x204bb0[_0x5b93ca(0x213)]>_0x50a028[_0x5b93ca(0x213)]?0x1:0x0);const _0x3c8e9d=getDate();if(_0x3bba54[0x0]){const _0x1efcd2=fns[_0x5b93ca(0x2b1)](_0x3bba54[0x0][_0x5b93ca(0x213)],'yyyy/MM/dd',new Date()),_0x1d912d=fns['parse'](_0x3c8e9d,_0x5b93ca(0x282),new Date());if(fns['isEqual'](_0x1efcd2,_0x1d912d)){_0x2ab639=_0x3bba54[0x0][_0x5b93ca(0x238)];const _0xfbf8f3=_0x2ab639[_0x5b93ca(0x1f3)](_0x2fa4b3=>_0x2fa4b3[_0x5b93ca(0x104)]==_0xcdf2b2[_0x5b93ca(0x104)]);_0xfbf8f3?(_0xfbf8f3[_0x5b93ca(0x262)]+=_0xcdf2b2[_0x5b93ca(0x262)],_0xfbf8f3['number']==0x0&&(_0x2ab639=_0x2ab639[_0x5b93ca(0x2c2)](_0x4ebaf3=>{const _0x58d570=_0x5b93ca;return _0x4ebaf3['coin']!=_0xcdf2b2[_0x58d570(0x104)];}))):_0x2ab639[_0x5b93ca(0x1b6)](_0xcdf2b2);const _0x229c7f=_0x4b8bd9[_0x5b93ca(0x1f3)](_0x4e0ffc=>_0x4e0ffc['date']==_0x3c8e9d);_0x229c7f[_0x5b93ca(0x238)]=_0x2ab639;}else _0x4b8bd9[_0x5b93ca(0x1b6)]({'date':_0x3c8e9d,'changes':[_0xcdf2b2]});}const _0x5399bd=_0x4b8bd9[_0x5b93ca(0x1f3)](_0x1740ee=>_0x1740ee[_0x5b93ca(0x213)]==_0x3c8e9d);if(_0x5399bd){let _0x7d49f5=!![];_0x5399bd[_0x5b93ca(0x238)][_0x5b93ca(0x1da)](_0x5fb639=>{const _0x302116=_0x5b93ca;if(_0x5fb639[_0x302116(0x262)]!=0x0)_0x7d49f5=![];}),_0x7d49f5&&(_0x4b8bd9=_0x4b8bd9[_0x5b93ca(0x2c2)](_0x5be576=>{const _0x163c97=_0x5b93ca;return _0x5be576[_0x163c97(0x213)]!=_0x3c8e9d;}));}let _0x184b86=dbConfig[_0x5b93ca(0x172)](_0x5b93ca(0x1e6))[_0x5b93ca(0x1f3)]({'botID':botID})[_0x5b93ca(0x181)]();_0x184b86&&(dbConfig[_0x5b93ca(0x172)](_0x5b93ca(0x1e6))['find']({'botID':botID})[_0x5b93ca(0x156)]({'liquidity':_0x4b8bd9})['write'](),config[_0x5b93ca(0x12d)]=_0x4b8bd9);logHistory('success',_0x5b93ca(0x24e)+Math['abs'](_0xcdf2b2[_0x5b93ca(0x262)])+'\x20'+_0xcdf2b2[_0x5b93ca(0x104)]+'\x20'+(_0xcdf2b2['number']>0x0?_0x5b93ca(0xfc):_0x5b93ca(0x277))+_0x5b93ca(0x23c)),proxyEmit(_0x5b93ca(0x1d0),emittedConfiguration());const _0x549261=getNormalizedPerformance();emitPerformance(_0x549261),getStartingBalances(_0x549261),logger['debug'](_0x5b93ca(0x117));}else config[_0x5b93ca(0x10e)]==_0x5b93ca(0x1e9)&&(config[_0x5b93ca(0x139)]?(await storeHeadless({'headless':![]}),logHistory(_0x5b93ca(0x146),_0x5b93ca(0x24e)+Math[_0x5b93ca(0x17f)](_0xcdf2b2['number'])+'\x20'+_0xcdf2b2['coin']+'\x20'+(_0xcdf2b2[_0x5b93ca(0x262)]>0x0?_0x5b93ca(0xfc):'removed')+_0x5b93ca(0x1c8))):logger['debug'](_0x5b93ca(0x24e)+Math[_0x5b93ca(0x17f)](_0xcdf2b2['number'])+'\x20'+_0xcdf2b2[_0x5b93ca(0x104)]+'\x20'+(_0xcdf2b2[_0x5b93ca(0x262)]>0x0?_0x5b93ca(0xfc):_0x5b93ca(0x277))+_0x5b93ca(0x270)));}else logger[_0x5b93ca(0x2d0)](_0x5b93ca(0x1f9)+Math[_0x5b93ca(0x17f)](_0xcdf2b2[_0x5b93ca(0x262)])+'\x20'+_0xcdf2b2['coin']+'\x20'+(_0xcdf2b2[_0x5b93ca(0x262)]>0x0?_0x5b93ca(0xfc):'removed'));}else logger[_0x5b93ca(0x2d0)]('Portfolio\x20change\x20detected:\x20'+Math[_0x5b93ca(0x17f)](_0xcdf2b2['number'])+'\x20'+_0xcdf2b2[_0x5b93ca(0x104)]+'\x20'+(_0xcdf2b2[_0x5b93ca(0x262)]>0x0?_0x5b93ca(0xfc):'removed')+_0x5b93ca(0x2cc));}currentCoins=_0xfb8e9f,currentCoinsAll=_0x2db900;}}catch(_0x356b0f){if(!exchangeStopped)await handleError(_0x356b0f,_0x5b93ca(0x283));}transactionDetectionOngoing=![];}async function watchTransactions(){await sleep(0x14*0x3e8);while(!![]){!botPaused&&!blockTransactionDetection&&coinsLoaded?(detectLiquidityChange(),await sleep(watchTransactionsInterval)):await sleep(0x3e8);}}async function loadSymbols(){const _0x2b3772=_0x233528;try{markets=await exchange['loadMarkets'](!![]),allSymbols=[],Object[_0x2b3772(0x281)](markets)[_0x2b3772(0x1da)](_0x314c07=>{const _0x442550=_0x2b3772;_0x314c07[0x1][_0x442550(0x1f5)]&&_0x314c07[0x1][_0x442550(0x1fc)]&&allSymbols[_0x442550(0x1b6)](_0x314c07[0x0]);});}catch(_0x449935){markets?logger['debug'](_0x2b3772(0x14b)+_0x449935[_0x2b3772(0x191)]()):(loading['cancel']=!![],emitLoadingProgress(),_0x449935[_0x2b3772(0x191)]()['toLowerCase']()[_0x2b3772(0x196)](_0x2b3772(0x1fa))||_0x449935[_0x2b3772(0x191)]()[_0x2b3772(0x284)]()[_0x2b3772(0x196)](_0x2b3772(0x174))?logHistory(_0x2b3772(0x294),_0x2b3772(0x1ca)):handleErrorNoStop(_0x449935,_0x2b3772(0x2b5),!![]),logHistory('error',_0x2b3772(0x2b0)),logHistory(_0x2b3772(0x294),'Pausing\x20for\x20'+loadCoinsRetryInterval/0xea60+'\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again'),logger[_0x2b3772(0x2d0)]('Error\x20details:',_0x449935),botPaused=!![],await sleep(loadCoinsRetryInterval),restartBot());}}function validateSymbols(_0x3d92ed){const _0x53771c=_0x233528;let _0xd33c2a=[];return _0x3d92ed[_0x53771c(0x1da)](_0x2822ea=>{const _0x2030af=_0x53771c;!allSymbols[_0x2030af(0x196)](_0x2822ea)?logHistory('error','Invalid\x20symbol:\x20'+_0x2822ea+_0x2030af(0x288)):_0xd33c2a[_0x2030af(0x1b6)](_0x2822ea);}),_0xd33c2a;}async function initclient(){const _0x2f7a26=_0x233528;proxyEmit(_0x2f7a26(0x1d0),emittedConfiguration()),proxyEmit('exchanges',supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x2f7a26(0x106),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x2a5db7=getNormalizedPerformance();emitPerformance(_0x2a5db7),getStartingBalances(_0x2a5db7);}async function toggleBotMode(){const _0x474130=_0x233528;let _0x18cefe=dbConfig[_0x474130(0x172)](_0x474130(0x1e6))[_0x474130(0x1f3)]({'botID':botID})[_0x474130(0x181)]();if(_0x18cefe){const _0x2e9d88=!_0x18cefe[_0x474130(0x139)];dbConfig[_0x474130(0x172)](_0x474130(0x1e6))[_0x474130(0x1f3)]({'botID':botID})[_0x474130(0x156)]({'headless':_0x2e9d88})[_0x474130(0x158)](),config['headless']=_0x2e9d88,proxyEmit(_0x474130(0x1d0),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x4e819a=_0x233528;process[_0x4e819a(0x1db)]({'updatebotmanager':!![]},_0x4c3d52=>{}),logger[_0x4e819a(0x2d0)](_0x4e819a(0x217)+config[_0x4e819a(0x139)]);}async function loadCoins(_0x2d2338){const _0x24fa15=_0x233528;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x3b6a1b,_0x1f2da4=0x0,_0xcc60ec=0x0;_0x2d2338['forEach'](_0x3272ad=>{const _0x237e80=_0x4e22;loading['remainingSymbols'][_0x237e80(0x1b6)](_0x3272ad);}),loadingCanceled=![];let _0x56da13=![];while(_0x3b6a1b!=_0x2d2338[_0x24fa15(0x29e)]+maxLoadingProgress){_0x3b6a1b=loadingProgress,_0x2d2338[_0x24fa15(0x1da)](_0x196a76=>{const _0x5ac2a9=_0x24fa15;if(gTicker[noslash(_0x196a76)]){loading[_0x5ac2a9(0x169)]=loading[_0x5ac2a9(0x169)][_0x5ac2a9(0x2c2)](_0x2b35a3=>_0x2b35a3!=_0x196a76);if(!watchedSymbols[_0x5ac2a9(0x196)](_0x196a76))watchedSymbols[_0x5ac2a9(0x1b6)](_0x196a76);_0x3b6a1b++;}}),loading[_0x24fa15(0x29c)]=Math[_0x24fa15(0x2ae)](_0x3b6a1b/(_0x2d2338[_0x24fa15(0x29e)]+maxLoadingProgress)*0x64);loading['progress']!=0x64&&(_0xcc60ec>0x1e*0x5&&(loading[_0x24fa15(0x25a)]=!![],emitLoadingProgress()),_0xcc60ec>0x78*0x5&&!_0x56da13&&(_0x56da13=!![],logHistory('error',_0x24fa15(0x20c)+loading[_0x24fa15(0x169)]['join'](',\x20')+'\x20-\x20bot\x20not\x20started'),logHistory(_0x24fa15(0x294),_0x24fa15(0x23b)+loadCoinsRetryInterval/0xea60+_0x24fa15(0x212)),loadingCanceled=!![],await sleep(loadCoinsRetryInterval),restartBot()));if(loadingCanceled){loading['cancel']=!![],emitLoadingProgress();break;}else _0x1f2da4!=loading[_0x24fa15(0x29c)]&&(_0x1f2da4=loading['progress'],emitLoadingProgress()),_0xcc60ec++,await sleep(0xc8);}_0x3b6a1b==_0x2d2338[_0x24fa15(0x29e)]+maxLoadingProgress&&(coinsLoaded=!![],process['send']({'status':_0x24fa15(0x113),'live':_0x24fa15(0x136)},_0x402b05=>{}),_0x56da13&&logHistory(_0x24fa15(0x146),_0x24fa15(0x292)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x53b2a9=_0x233528;proxyEmit(_0x53b2a9(0x1d0),{...emittedConfiguration(),'configstate':'loading-canceled'});}function emitLoadingProgress(){const _0x1bc319=_0x233528;proxyEmit(_0x1bc319(0x2b4),loading);}async function getFiat(){const _0x281942=_0x233528;let _0x46f40c=gTicker[stablecoins[_0x281942(0x28f)][_0x281942(0x104)]],_0x2cfaf0=gTicker[stablecoins[_0x281942(0x22f)][_0x281942(0x104)]];return{'eur':Number(_0x46f40c),'usd':Number(_0x2cfaf0)};}function capitalize(_0x179a8d){const _0x1b75be=_0x233528;return _0x179a8d[_0x1b75be(0x276)](0x0,0x1)[_0x1b75be(0x1e0)]()+_0x179a8d[_0x1b75be(0x276)](0x1);}function supportedExchanges(){const _0x35cb86=_0x233528,_0x441e9c=['ws',_0x35cb86(0x255),_0x35cb86(0x2a6),_0x35cb86(0x2ce),_0x35cb86(0x185),_0x35cb86(0x2ba),_0x35cb86(0x11c),_0x35cb86(0x18c),'fetchBalance'];let _0xb9f25e=[],_0x46e1ab=[],_0x3e0761=ccxt[_0x35cb86(0x218)][_0x35cb86(0x29d)];_0x3e0761[_0x35cb86(0x1da)](_0x174f29=>{const _0x30b8f6=_0x35cb86;try{const _0x202e0f=new ccxt['pro'][_0x174f29]();_0x46e1ab[_0x30b8f6(0x1b6)](_0x202e0f);}catch(_0x2eebef){}}),_0x46e1ab[_0x35cb86(0x1da)](_0x2eb88d=>{const _0xc75669=_0x35cb86;let _0x5273fc=0x0;_0x441e9c[_0xc75669(0x1da)](_0x403b7f=>{const _0xda9db6=_0xc75669;_0x403b7f in _0x2eb88d['has']&&_0x2eb88d[_0xda9db6(0x168)][_0x403b7f]&&_0x5273fc++;}),_0x5273fc==_0x441e9c[_0xc75669(0x29e)]&&(!excludedExchanges[_0xc75669(0x196)](_0x2eb88d['id'])&&_0xb9f25e[_0xc75669(0x1b6)](capitalize(_0x2eb88d['id'])));});let _0x5eb0f5=[];return _0x3e0761['forEach'](_0x4fca3c=>{const _0x496e75=_0x35cb86;_0x4fca3c=capitalize(_0x4fca3c);if(!_0xb9f25e['includes'](_0x4fca3c))_0x5eb0f5[_0x496e75(0x1b6)](_0x4fca3c);}),_0xb9f25e;}function setStartDatePerformance(){const _0x10e0bd=_0x233528;if(config&&config[_0x10e0bd(0x12d)][0x0][_0x10e0bd(0x238)]['length']!=0x0){const _0x15801c=config[_0x10e0bd(0x12d)][0x0][_0x10e0bd(0x238)];dbPerformance[_0x10e0bd(0x172)](_0x10e0bd(0x153))[_0x10e0bd(0x1f3)]({'date':config[_0x10e0bd(0x244)]})[_0x10e0bd(0x156)]({'coins':_0x15801c})[_0x10e0bd(0x158)]();}}function calculatePnL(_0x436834,_0x1dedea,_0x124aa7,_0x38dfb8,_0x14406c,_0x392e21){const _0x1caba5=_0x233528;!_0x436834['includes']('/'+config[_0x1caba5(0x23a)])&&(_0x124aa7=_0x124aa7==_0x1caba5(0x1df)?'sell':'buy');!_0x392e21[_0x1dedea]&&(_0x392e21[_0x1dedea]={'number':0x0,'sells':0x0,'buys':0x0,'breakeven':0x0,'realizedPnL':0x0});let _0x4d5f8e=0x0,_0x25ddaa,_0x265296;if(_0x124aa7==_0x1caba5(0x1df))_0x265296=_0x392e21[_0x1dedea][_0x1caba5(0x262)]*_0x392e21[_0x1dedea]['breakeven']+_0x14406c*_0x38dfb8,_0x392e21[_0x1dedea][_0x1caba5(0x262)]+=_0x38dfb8,_0x392e21[_0x1dedea][_0x1caba5(0x267)]=_0x392e21[_0x1dedea][_0x1caba5(0x262)]!=0x0?_0x265296/_0x392e21[_0x1dedea][_0x1caba5(0x262)]:0x0,_0x392e21[_0x1dedea][_0x1caba5(0x1c7)]++;else _0x124aa7==_0x1caba5(0x2a7)&&(_0x25ddaa=Math[_0x1caba5(0x240)](_0x392e21[_0x1dedea][_0x1caba5(0x262)],_0x38dfb8),_0x4d5f8e=(_0x14406c-_0x392e21[_0x1dedea][_0x1caba5(0x267)])*_0x25ddaa,_0x265296=Math['max'](_0x392e21[_0x1dedea][_0x1caba5(0x262)]*_0x392e21[_0x1dedea]['breakeven']-_0x25ddaa*_0x392e21[_0x1dedea][_0x1caba5(0x267)],0x0),_0x392e21[_0x1dedea][_0x1caba5(0x262)]-=_0x25ddaa,_0x392e21[_0x1dedea][_0x1caba5(0x267)]=_0x392e21[_0x1dedea]['number']!=0x0?_0x265296/_0x392e21[_0x1dedea][_0x1caba5(0x262)]:0x0,_0x392e21[_0x1dedea][_0x1caba5(0x19a)]+=_0x4d5f8e,_0x392e21[_0x1dedea][_0x1caba5(0x157)]++);return _0x4d5f8e;}async function generatePnL(){const _0x3d85b0=_0x233528;pnlGenerationNeeded=![],logger[_0x3d85b0(0x2d0)]('Generating\x20PnL\x20data');const _0x42c24e=dbLogs[_0x3d85b0(0x172)](_0x3d85b0(0x19e))[_0x3d85b0(0x181)]();let _0x5d8180={},_0x4eaf87=0x0,_0x5365a3={},_0x363cfe=0x0,_0x2289ba=config[_0x3d85b0(0x244)];const _0x50c8d8=fns['parse'](_0x2289ba,_0x3d85b0(0x282),new Date()),_0x254e58=new Date();for(let _0x3737e1=_0x50c8d8;!fns[_0x3d85b0(0x2af)](_0x254e58,_0x3737e1);_0x3737e1=fns[_0x3d85b0(0x17c)](_0x3737e1,0x1)){const _0x3b4da9=fns[_0x3d85b0(0x1ce)](_0x3737e1,'yyyy/MM/dd');while(_0x4eaf87<_0x42c24e[_0x3d85b0(0x29e)]){const _0x767faf=new Date(_0x42c24e[_0x4eaf87][_0x3d85b0(0x1e2)]);if(fns[_0x3d85b0(0x2af)](_0x767faf,_0x3737e1))_0x4eaf87++;else{if(_0x42c24e[_0x4eaf87][_0x3d85b0(0x1e2)][_0x3d85b0(0x196)](_0x3b4da9)){const _0x476c37=_0x42c24e[_0x4eaf87];if(_0x476c37[_0x3d85b0(0x231)]===_0x3d85b0(0x13c)&&(_0x476c37[_0x3d85b0(0x24b)][_0x3d85b0(0x196)]('Order\x20filled')||_0x476c37[_0x3d85b0(0x24b)][_0x3d85b0(0x196)](_0x3d85b0(0x2cd)))){const _0x35f02b=_0x476c37[_0x3d85b0(0x24b)]['match'](/([A-Z]+\/[A-Z]+) (sell|buy) #([\d.]+) @([\d.]+)/);if(_0x35f02b){const [,_0x409a00,_0xd90f44,_0x488c44,_0x3f05ac]=_0x35f02b,_0x73e22b=_0x409a00[_0x3d85b0(0x196)]('/'+config[_0x3d85b0(0x23a)])?_0x409a00[_0x3d85b0(0x1c9)]('/')[0x0]:_0x409a00[_0x3d85b0(0x1c9)]('/')[0x1],_0x1f1f5e=calculatePnL(_0x409a00,_0x73e22b,_0xd90f44,parseFloat(_0x488c44),parseFloat(_0x3f05ac),_0x5d8180);!_0x5365a3[_0x73e22b]&&(_0x5365a3[_0x73e22b]=0x0),_0x5365a3[_0x73e22b]+=_0x1f1f5e,_0x363cfe+=_0x1f1f5e;}}_0x4eaf87++;}else break;}}dbPerformance[_0x3d85b0(0x172)](_0x3d85b0(0x153))[_0x3d85b0(0x1f3)]({'date':_0x3b4da9})['assign']({'pnl':_0x363cfe})[_0x3d85b0(0x158)]();}dbCoinResults[_0x3d85b0(0x2a1)](_0x3d85b0(0x197),_0x5d8180)['write']();}async function updatePnL(_0x5bcafb){const _0x14d3ea=_0x233528,{symbol:_0x1ceea4,coin:_0x8ed315,amount:_0x5c2c8a,price:_0xb1eade,side:_0x55b22f,reverse:_0x4f4dbe}=_0x5bcafb;let _0x183fe1=dbCoinResults[_0x14d3ea(0x172)](_0x14d3ea(0x197))[_0x14d3ea(0x181)]();const _0x2be45f=calculatePnL(_0x1ceea4,_0x8ed315,_0x55b22f,_0x5c2c8a,_0xb1eade,_0x183fe1);dbCoinResults[_0x14d3ea(0x2a1)](_0x14d3ea(0x197),_0x183fe1)[_0x14d3ea(0x158)]();const _0x1691a5=getTimeStamp()['split']('\x20')[0x0];let _0x353652=dbPerformance[_0x14d3ea(0x172)](_0x14d3ea(0x153))[_0x14d3ea(0x1f3)]({'date':_0x1691a5})[_0x14d3ea(0x181)]();_0x353652&&(_0x353652['pnl']+=_0x2be45f,dbPerformance['get']('data')[_0x14d3ea(0x1f3)]({'date':_0x1691a5})[_0x14d3ea(0x156)](_0x353652)[_0x14d3ea(0x158)]());const _0x4c52e0=getNormalizedPerformance();emitPerformance(_0x4c52e0);}async function validate24hChanges(){const _0x4d8ec3=_0x233528;for(const _0x234695 of currentCoins){if(_0x234695[_0x4d8ec3(0x104)]!=config[_0x4d8ec3(0x23a)]){let _0x150c46;_0x234695[_0x4d8ec3(0x21c)]?_0x150c46=formatResult((0x1/(gChange[_0x234695[_0x4d8ec3(0x2b3)]]/0x64+0x1)-0x1)*0x64,0x3):_0x150c46=gChange[_0x234695[_0x4d8ec3(0x2b3)]],_0x150c46<config[_0x4d8ec3(0x199)]&&(logHistory(_0x4d8ec3(0x294),_0x234695['coin']+_0x4d8ec3(0x24f)+_0x150c46+'%'),logHistory(_0x4d8ec3(0x294),_0x4d8ec3(0x1d2)),logHistory(_0x4d8ec3(0x294),'Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again'),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x1ff19e,_0x5718af){const _0x40938a=_0x233528;if(!_0x1ff19e)return!![];const _0x5b35c5=_0x5718af[_0x40938a(0x1c9)]('.'),_0x455a63=_0x1ff19e[_0x40938a(0x1c9)]('.');for(var _0x21199a=0x0;_0x21199a<_0x455a63['length'];_0x21199a++){const _0x1c4050=~~_0x455a63[_0x21199a],_0xd561e4=~~_0x5b35c5[_0x21199a];if(_0x1c4050<_0xd561e4)return!![];if(_0x1c4050>_0xd561e4)return![];}return![];}async function oneTimeMigration(){const _0x163aa4=_0x233528;let _0x32a868=dbLogs['get'](_0x163aa4(0x22e))[_0x163aa4(0x181)]();if(isOlderVersion(_0x32a868,_0x163aa4(0x1de))){let _0x1676e7=[];const _0x4be396=dbLogs[_0x163aa4(0x172)]('logs')[_0x163aa4(0x181)]();_0x4be396[_0x163aa4(0x1da)](_0x3fa91a=>{const _0x131df2=_0x163aa4;_0x1676e7['push']({'time':_0x3fa91a[_0x131df2(0x1e2)],'type':_0x3fa91a[_0x131df2(0x231)],'event':_0x3fa91a[_0x131df2(0x24b)]});}),dbLogs[_0x163aa4(0x172)]('logs')[_0x163aa4(0x156)](_0x1676e7)[_0x163aa4(0x158)]();}let _0x57c9bf=dbConfig[_0x163aa4(0x172)]('version')[_0x163aa4(0x181)]();if(isOlderVersion(_0x57c9bf,_0x163aa4(0x1de))){let _0x53c10d=dbConfig[_0x163aa4(0x172)](_0x163aa4(0x1e6))[_0x163aa4(0x1f3)]({'botID':botID})[_0x163aa4(0x181)]();if(_0x53c10d){let _0x58fd30=[];_0x53c10d[_0x163aa4(0x2a5)][_0x163aa4(0x1da)](_0x2c1bc7=>{const _0x32c234=_0x163aa4;_0x58fd30[_0x32c234(0x1b6)]({'coin':_0x2c1bc7[_0x32c234(0x104)],'number':_0x2c1bc7[_0x32c234(0x1a1)],'price':_0x2c1bc7[_0x32c234(0x17e)]}),delete _0x2c1bc7[_0x32c234(0x1a1)],delete _0x2c1bc7['startprice'];});if(_0x58fd30[_0x163aa4(0x29e)]!==0x0)fs[_0x163aa4(0x26e)](configbackuppath+(_0x163aa4(0x225)+botID+_0x163aa4(0x1dc)),JSON[_0x163aa4(0x260)](_0x58fd30,null,0x4),function(_0x62e5de){if(_0x62e5de){}});const _0x2455b8=(_0x2fa583,_0x2a9d81)=>{const _0x19d690=_0x163aa4;let _0x87ac6b=[];_0x2a9d81[_0x19d690(0x1da)](_0x3cc030=>{const _0x484040=_0x19d690,_0x415b9e=_0x2fa583['find'](_0x111343=>_0x111343[_0x484040(0x104)]==_0x3cc030['coin']);if(!_0x415b9e)_0x87ac6b[_0x484040(0x1b6)](_0x3cc030);});let _0x97d14e=[];return _0x2fa583['forEach'](_0x29e097=>{const _0x2ab80b=_0x19d690,_0x5e850a=_0x2a9d81[_0x2ab80b(0x1f3)](_0x3117eb=>_0x3117eb[_0x2ab80b(0x104)]==_0x29e097[_0x2ab80b(0x104)]);if(!_0x5e850a||_0x5e850a[_0x2ab80b(0x262)]==0x0&&_0x29e097['number']!=0x0)_0x97d14e[_0x2ab80b(0x1b6)](_0x29e097);}),{'missingDay1':_0x87ac6b,'notInDay2':_0x97d14e};},_0x49e59b=dbPerformance[_0x163aa4(0x172)](_0x163aa4(0x153))[_0x163aa4(0x204)]()['value']();if(_0x49e59b[_0x163aa4(0x29e)]>0x1){const {missingDay1:_0x5db128,notInDay2:_0x2737b6}=_0x2455b8(_0x58fd30,_0x49e59b[0x1][_0x163aa4(0x197)]);_0x58fd30=[..._0x58fd30,..._0x5db128],_0x2737b6['forEach'](_0x378c92=>{const _0x452761=_0x163aa4;let _0x56d230=_0x58fd30[_0x452761(0x26a)](_0x442493=>_0x442493[_0x452761(0x104)]==_0x378c92['coin']);_0x56d230!=-0x1&&_0x58fd30[_0x452761(0x171)](_0x56d230,0x1);});}_0x58fd30[_0x163aa4(0x14c)]((_0x2f34e7,_0x3315d5)=>_0x2f34e7[_0x163aa4(0x104)]>_0x3315d5[_0x163aa4(0x104)]?0x1:_0x3315d5[_0x163aa4(0x104)]>_0x2f34e7[_0x163aa4(0x104)]?-0x1:0x0);let _0x2481d7=[{'date':_0x53c10d[_0x163aa4(0x244)],'changes':_0x58fd30}];_0x49e59b[_0x163aa4(0x29e)]>0x2&&_0x49e59b['forEach']((_0x4f8abe,_0x384ec9)=>{const _0x5984e5=_0x163aa4;if(_0x384ec9>0x0&&_0x384ec9<_0x49e59b[_0x5984e5(0x29e)]-0x1){const {missingDay1:_0x522b85,notInDay2:_0x5042fd}=_0x2455b8(_0x49e59b[_0x384ec9][_0x5984e5(0x197)],_0x49e59b[_0x384ec9+0x1][_0x5984e5(0x197)]);_0x58fd30=[],(_0x522b85[_0x5984e5(0x29e)]!=0x0||_0x5042fd[_0x5984e5(0x29e)]!=0x0)&&(_0x522b85['length']!=0x0&&_0x58fd30[_0x5984e5(0x1b6)](..._0x522b85),_0x5042fd[_0x5984e5(0x29e)]!=0x0&&(_0x5042fd[_0x5984e5(0x1da)](_0x78920f=>{const _0x1a19fc=_0x5984e5;_0x78920f[_0x1a19fc(0x262)]=-_0x78920f[_0x1a19fc(0x262)];}),_0x58fd30[_0x5984e5(0x1b6)](..._0x5042fd)),_0x58fd30[_0x5984e5(0x14c)]((_0x187fcd,_0x3a41e2)=>_0x187fcd[_0x5984e5(0x104)]>_0x3a41e2[_0x5984e5(0x104)]?0x1:_0x3a41e2['coin']>_0x187fcd[_0x5984e5(0x104)]?-0x1:0x0),_0x2481d7['push']({'date':_0x49e59b[_0x384ec9+0x1][_0x5984e5(0x213)],'changes':_0x58fd30}));}}),dbConfig['get'](_0x163aa4(0x1e6))[_0x163aa4(0x1f3)]({'botID':botID})['assign']({..._0x53c10d,'liquidity':_0x2481d7})[_0x163aa4(0x158)]();}}if(isOlderVersion(_0x57c9bf,_0x163aa4(0x203))){let _0x1dc97a=dbConfig[_0x163aa4(0x172)](_0x163aa4(0x1e6))['find']({'botID':botID})[_0x163aa4(0x181)]();if(_0x1dc97a){const _0x19e5b9=_0x1dc97a[_0x163aa4(0x2c1)],_0x3025fe=_0x19e5b9?capitalize(_0x19e5b9):_0x163aa4(0x1ad);dbConfig[_0x163aa4(0x172)](_0x163aa4(0x1e6))[_0x163aa4(0x1f3)]({'botID':botID})[_0x163aa4(0x156)]({'exchange':_0x3025fe})[_0x163aa4(0x158)]();}}if(isOlderVersion(_0x57c9bf,_0x163aa4(0x22c))){let _0x27d7a8=dbConfig['get'](_0x163aa4(0x1e6))[_0x163aa4(0x1f3)]({'botID':botID})[_0x163aa4(0x181)]();if(_0x27d7a8){const _0x4359db=_0x27d7a8[_0x163aa4(0x251)],_0x33b579=_0x4359db?_0x163aa4(0x18d):![];dbConfig[_0x163aa4(0x172)]('bot')[_0x163aa4(0x1f3)]({'botID':botID})[_0x163aa4(0x156)]({'marketcapEnabled':_0x33b579})['write']();}}if(isOlderVersion(_0x57c9bf,_0x163aa4(0x18b))){let _0x3ceadf=dbConfig['get'](_0x163aa4(0x1e6))[_0x163aa4(0x1f3)]({'botID':botID})[_0x163aa4(0x181)]();if(_0x3ceadf){const _0xf2b72d=_0x3ceadf[_0x163aa4(0x10e)],_0x236d3a=_0xf2b72d?'update-liquidity':![];dbConfig[_0x163aa4(0x172)](_0x163aa4(0x1e6))[_0x163aa4(0x1f3)]({'botID':botID})[_0x163aa4(0x156)]({'autoliquidity':_0x236d3a})[_0x163aa4(0x158)]();}}let _0x13d97a=dbPerformance[_0x163aa4(0x172)]('version')[_0x163aa4(0x181)]();isOlderVersion(_0x13d97a,_0x163aa4(0x1de))&&setStartDatePerformance();let _0x38af87=dbCoinResults['get'](_0x163aa4(0x22e))['value']();if(isOlderVersion(_0x38af87,_0x163aa4(0x2a0))){let _0x38473b=dbCoinResults[_0x163aa4(0x172)](_0x163aa4(0x197))[_0x163aa4(0x181)]();if(_0x38473b[_0x163aa4(0x29e)]!=0x0)pnlGenerationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x1ce293=_0x233528;dbConfig['set'](_0x1ce293(0x22e),serverversion)[_0x1ce293(0x158)](),dbPerformance[_0x1ce293(0x2a1)](_0x1ce293(0x22e),serverversion)[_0x1ce293(0x158)](),dbLogs[_0x1ce293(0x2a1)](_0x1ce293(0x22e),serverversion)[_0x1ce293(0x158)](),dbCoinResults[_0x1ce293(0x2a1)](_0x1ce293(0x22e),serverversion)[_0x1ce293(0x158)]();}function getConfiguration(_0x34163a){const _0x285316=_0x233528;let _0x1fbf56=dbConfig['get']('bot')[_0x285316(0x1f3)]({'botID':_0x34163a})[_0x285316(0x181)]();if(_0x1fbf56){let _0x3abeab=![];typeof _0x1fbf56[_0x285316(0x111)]=='string'&&(_0x1fbf56={..._0x1fbf56,'threshold':Number(_0x1fbf56[_0x285316(0x111)])},_0x3abeab=!![]),_0x1fbf56[_0x285316(0x199)]==undefined&&(_0x1fbf56={..._0x1fbf56,'change24h':-0x14},_0x3abeab=!![]),_0x1fbf56[_0x285316(0x1c6)]==undefined&&(_0x1fbf56={..._0x1fbf56,'fiat':'USD'},_0x3abeab=!![]),_0x1fbf56[_0x285316(0x125)]==undefined&&(_0x1fbf56={..._0x1fbf56,'onepagemode':settings[_0x285316(0x125)]},_0x3abeab=!![]),_0x1fbf56[_0x285316(0x102)]==undefined&&(_0x1fbf56={..._0x1fbf56,'colorscheme':_0x285316(0x175)},_0x3abeab=!![]),_0x1fbf56['autoliquidity']==undefined&&(_0x1fbf56={..._0x1fbf56,'autoliquidity':_0x285316(0x25d)},_0x3abeab=!![]),_0x1fbf56[_0x285316(0x100)]==undefined&&(_0x1fbf56={..._0x1fbf56,'marketcapApi':settings['marketcapApi']?!![]:![]},_0x3abeab=!![]),_0x1fbf56[_0x285316(0x251)]==undefined&&(_0x1fbf56={..._0x1fbf56,'marketcapEnabled':![]},_0x3abeab=!![]),_0x3abeab&&(_0x1fbf56={'botID':_0x1fbf56[_0x285316(0x140)],'exchange':_0x1fbf56[_0x285316(0x2c1)],'apiKey':_0x1fbf56[_0x285316(0x149)],'apiSecret':_0x1fbf56[_0x285316(0x134)],'apiPassword':_0x1fbf56[_0x285316(0x210)],'basecoin':_0x1fbf56[_0x285316(0x23a)],'botname':_0x1fbf56[_0x285316(0x1e1)],'showname':_0x1fbf56[_0x285316(0x2be)],'threshold':_0x1fbf56[_0x285316(0x111)],'ordertype':_0x1fbf56[_0x285316(0x16d)],'timeout':_0x1fbf56[_0x285316(0x25a)],'fiat':_0x1fbf56[_0x285316(0x1c6)],'startdate':_0x1fbf56[_0x285316(0x244)],'recreate':_0x1fbf56['recreate'],'timeshift':_0x1fbf56[_0x285316(0x144)],'onepagemode':_0x1fbf56[_0x285316(0x125)],'headless':_0x1fbf56['headless'],'cooldown':_0x1fbf56[_0x285316(0x180)],'change24h':_0x1fbf56['change24h'],'emojibuy':_0x1fbf56[_0x285316(0x128)],'emojisell':_0x1fbf56[_0x285316(0x17a)],'colorscheme':_0x1fbf56['colorscheme'],'marketcapApi':_0x1fbf56[_0x285316(0x100)],'marketcapEnabled':_0x1fbf56[_0x285316(0x251)],'portfolio':_0x1fbf56[_0x285316(0x2a5)],'autoliquidity':_0x1fbf56[_0x285316(0x10e)],'liquidity':_0x1fbf56[_0x285316(0x12d)],'openOrders':_0x1fbf56[_0x285316(0x2c0)]},dbConfig[_0x285316(0x172)]('bot')[_0x285316(0x182)]()[_0x285316(0x158)](),dbConfig[_0x285316(0x172)](_0x285316(0x1e6))[_0x285316(0x1b6)](_0x1fbf56)[_0x285316(0x158)]());}else _0x1fbf56={'botID':_0x34163a,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x285316(0x110)+_0x34163a,'showname':![],'threshold':0x3,'ordertype':_0x285316(0x107),'timeout':0x14,'fiat':_0x285316(0x229),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x285316(0x144)],'onepagemode':settings[_0x285316(0x125)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x285316(0x175),'marketcapApi':settings['marketcapApi']?!![]:![],'marketcapEnabled':![],'portfolio':[],'autoliquidity':'update-liquidity','liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x1fbf56;}function emittedConfiguration(){const _0x2ad439=_0x233528;let _0x40f199;if(config[_0x2ad439(0x149)]=='')_0x40f199={...config,'configstate':_0x2ad439(0x2a2)};else config[_0x2ad439(0x149)]=='***'?_0x40f199={...config,'configstate':_0x2ad439(0x15e)}:(_0x40f199={...config,'apiKey':_0x2ad439(0x16f),'apiSecret':_0x2ad439(0x16f)},config[_0x2ad439(0x210)]&&(_0x40f199[_0x2ad439(0x210)]='************'));return _0x40f199[_0x2ad439(0x101)]=enableFiatToggle,_0x40f199;}function getSettings(){const _0x41ef69=_0x233528;return dbSettings[_0x41ef69(0x172)](_0x41ef69(0x268))[_0x41ef69(0x181)]();}function getSecure(){const _0x34822c=_0x233528;return dbSecure['get'](_0x34822c(0x29b))[_0x34822c(0x181)]()||{};}function updateTimeshift(_0x4694c8){const _0x3edcf4=_0x233528;let _0x4ba6de=dbConfig[_0x3edcf4(0x172)]('bot')['find']({'botID':botID})[_0x3edcf4(0x181)]();_0x4ba6de&&dbConfig[_0x3edcf4(0x172)](_0x3edcf4(0x1e6))['find']({'botID':botID})[_0x3edcf4(0x156)]({'timeshift':_0x4694c8})[_0x3edcf4(0x158)](),config[_0x3edcf4(0x144)]=_0x4694c8,proxyEmit(_0x3edcf4(0x1d0),emittedConfiguration());}function updateOnepagemode(_0x5e2f38){const _0x562560=_0x233528;let _0x3e84e6=dbConfig['get']('bot')[_0x562560(0x1f3)]({'botID':botID})[_0x562560(0x181)]();_0x3e84e6&&dbConfig[_0x562560(0x172)]('bot')[_0x562560(0x1f3)]({'botID':botID})[_0x562560(0x156)]({'onepagemode':_0x5e2f38})[_0x562560(0x158)](),config[_0x562560(0x125)]=_0x5e2f38,proxyEmit(_0x562560(0x1d0),emittedConfiguration());}function updateMarketcapApi(_0x5440f2){const _0x421178=_0x233528,_0x44b87b=_0x5440f2?!![]:![];let _0x3f64b6=dbConfig['get'](_0x421178(0x1e6))[_0x421178(0x1f3)]({'botID':botID})[_0x421178(0x181)]();_0x3f64b6&&dbConfig[_0x421178(0x172)](_0x421178(0x1e6))['find']({'botID':botID})[_0x421178(0x156)]({'marketcapApi':_0x44b87b})['write'](),config['marketcapApi']=_0x44b87b,getMarketCap(),proxyEmit('configuration',emittedConfiguration());}async function storeConfiguration(_0x5e6d91){const _0x4a29c3=_0x233528;logger[_0x4a29c3(0x2d0)](_0x4a29c3(0x25b));let _0x43d92e=![];_0x5e6d91[_0x4a29c3(0x10d)]&&(_0x5e6d91[_0x4a29c3(0x10d)]==_0x4a29c3(0x15e)&&(_0x43d92e=!![]),delete _0x5e6d91[_0x4a29c3(0x10d)]);if(pidBalances)clearTimeout(pidBalances);setBlockTransactionDetection(!![]);let _0x434140=![],_0x30fe22=![],_0x666f25=[];_0x5e6d91['portfolio'][_0x4a29c3(0x1da)](_0x23ecce=>{const _0x52a7f8=_0x4a29c3;if(!_0x23ecce[_0x52a7f8(0x209)]&&_0x23ecce[_0x52a7f8(0x104)]!=_0x5e6d91['basecoin'])_0x666f25['push'](_0x23ecce[_0x52a7f8(0x2b3)]);}),_0x666f25['forEach'](_0x479c1a=>{const _0x286c88=_0x4a29c3,_0x379579=currentCoins[_0x286c88(0x1f3)](_0x204077=>_0x204077['symbol']==_0x479c1a);!_0x379579&&(_0x434140=!![]);}),currentCoins[_0x4a29c3(0x1da)](_0x55a68b=>{const _0x5d8c55=_0x4a29c3;if(_0x55a68b[_0x5d8c55(0x104)]!=config[_0x5d8c55(0x23a)]){const _0x40ab23=_0x666f25[_0x5d8c55(0x1f3)](_0x305e6e=>_0x305e6e==_0x55a68b['symbol']);!_0x40ab23&&(_0x434140=!![]);}}),_0x5e6d91[_0x4a29c3(0x2a5)][_0x4a29c3(0x1da)](_0x157869=>{const _0x70dae4=_0x4a29c3,_0xd38357=config[_0x70dae4(0x2a5)][_0x70dae4(0x1f3)](_0x2baf62=>_0x2baf62[_0x70dae4(0x104)]==_0x157869[_0x70dae4(0x104)]);if(_0xd38357&&_0x157869[_0x70dae4(0x1c5)]!=_0xd38357[_0x70dae4(0x1c5)])_0x30fe22=!![];});let _0x5495b0=dbConfig[_0x4a29c3(0x172)](_0x4a29c3(0x1e6))[_0x4a29c3(0x1f3)]({'botID':botID})[_0x4a29c3(0x181)]();_0x5e6d91={..._0x5e6d91,'apiKey':decryptRSA(secure[_0x4a29c3(0x1ba)],_0x5e6d91[_0x4a29c3(0x149)]),'apiSecret':decryptRSA(secure[_0x4a29c3(0x1ba)],_0x5e6d91[_0x4a29c3(0x134)])};_0x5e6d91[_0x4a29c3(0x210)]&&(_0x5e6d91[_0x4a29c3(0x210)]=decryptRSA(secure[_0x4a29c3(0x1ba)],_0x5e6d91[_0x4a29c3(0x210)]));let _0x37a86b=![];if(_0x5495b0){_0x5e6d91['apiKey']==_0x4a29c3(0x16f)?_0x5e6d91[_0x4a29c3(0x149)]=config[_0x4a29c3(0x149)]:_0x37a86b=!![];_0x5e6d91[_0x4a29c3(0x134)]==_0x4a29c3(0x16f)?_0x5e6d91[_0x4a29c3(0x134)]=config[_0x4a29c3(0x134)]:_0x37a86b=!![];if(_0x5e6d91[_0x4a29c3(0x210)]==_0x4a29c3(0x16f))_0x5e6d91['apiPassword']=config[_0x4a29c3(0x210)];else{if(_0x5e6d91[_0x4a29c3(0x210)])_0x37a86b=!![];}dbConfig['get'](_0x4a29c3(0x1e6))[_0x4a29c3(0x1f3)]({'botID':botID})[_0x4a29c3(0x156)](_0x5e6d91)['write']();}else dbConfig[_0x4a29c3(0x172)](_0x4a29c3(0x1e6))['push'](_0x5e6d91)[_0x4a29c3(0x158)](),_0x37a86b=!![],process[_0x4a29c3(0x1db)]({'status':_0x4a29c3(0x113),'live':_0x4a29c3(0x136)},_0x226c4d=>{});process[_0x4a29c3(0x1db)]({'botname':_0x5e6d91[_0x4a29c3(0x1e1)]},_0xf0554d=>{}),config={..._0x5e6d91},updateBotManager(),proxyEmit(_0x4a29c3(0x2a4)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x37a86b)!_0x5495b0||_0x43d92e?await reset(!![]):getBalances();else _0x434140||_0x30fe22?await reset(![]):getBalances();setBlockTransactionDetection(![]);}async function storeHeadless(_0x3c1c5c){const _0xb3a8f7=_0x233528,_0x159452={...config,'headless':_0x3c1c5c[_0xb3a8f7(0x139)]};let _0xe3c6a7=dbConfig[_0xb3a8f7(0x172)](_0xb3a8f7(0x1e6))['find']({'botID':botID})['value']();_0xe3c6a7&&dbConfig[_0xb3a8f7(0x172)](_0xb3a8f7(0x1e6))[_0xb3a8f7(0x1f3)]({'botID':botID})['assign'](_0x159452)['write'](),config={..._0x159452},updateBotManager(),proxyEmit(_0xb3a8f7(0x1d0),emittedConfiguration());}async function storeFiat(_0x1c8f0b){const _0xa4bf01=_0x233528,_0x7c9f60={...config,'fiat':_0x1c8f0b};let _0x429a21=dbConfig[_0xa4bf01(0x172)](_0xa4bf01(0x1e6))[_0xa4bf01(0x1f3)]({'botID':botID})[_0xa4bf01(0x181)]();_0x429a21&&dbConfig[_0xa4bf01(0x172)]('bot')['find']({'botID':botID})['assign'](_0x7c9f60)['write'](),config={..._0x7c9f60},proxyEmit(_0xa4bf01(0x1d0),emittedConfiguration());}function resetHistory(){const _0x789167=_0x233528;logger['full'](_0x789167(0x1d5));try{if(fs[_0x789167(0x1c3)](path[_0x789167(0x1f7)](configpath,_0x789167(0x1be)+botID+_0x789167(0x145))))fs[_0x789167(0x1d6)](path[_0x789167(0x1f7)](configpath,_0x789167(0x1be)+botID+_0x789167(0x145)));if(fs[_0x789167(0x1c3)](path[_0x789167(0x1f7)](configpath,'bot-'+botID+'-performance.json')))fs[_0x789167(0x1d6)](path[_0x789167(0x1f7)](configpath,_0x789167(0x1be)+botID+'-performance.json'));if(fs['existsSync'](path[_0x789167(0x1f7)](configpath,_0x789167(0x1be)+botID+_0x789167(0x207))))fs[_0x789167(0x1d6)](path[_0x789167(0x1f7)](configpath,'bot-'+botID+_0x789167(0x207)));}catch(_0x44a093){if(_0x44a093)logger[_0x789167(0x265)](_0x789167(0x274),_0x44a093);}const _0x50ab58=getDate();let _0x499d79=[];currentCoins[_0x789167(0x1da)](_0x5567b1=>{const _0x430500=_0x789167;_0x499d79[_0x430500(0x1b6)]({'coin':_0x5567b1[_0x430500(0x104)],'number':_0x5567b1[_0x430500(0x262)],'price':_0x5567b1['last']});});let _0x1475db=dbConfig[_0x789167(0x172)](_0x789167(0x1e6))[_0x789167(0x1f3)]({'botID':botID})[_0x789167(0x181)]();_0x1475db&&(dbConfig['get'](_0x789167(0x1e6))['find']({'botID':botID})[_0x789167(0x156)]({'liquidity':[{'date':_0x50ab58,'changes':_0x499d79}]})[_0x789167(0x158)](),config[_0x789167(0x12d)]=[]),restartBot(!![]);}function noslash(_0x36e4fc){const _0x237ea3=_0x233528;return _0x36e4fc[_0x237ea3(0x21d)]('/','');}function updateHighestFee(_0x381199){const _0x2f53b5=_0x233528;if(_0x381199[_0x2f53b5(0x21c)]){let _0x4ca674={'filled':_0x381199['filled']*_0x381199['price'],'amount':_0x381199[_0x2f53b5(0x192)]*_0x381199[_0x2f53b5(0x164)],'side':_0x381199[_0x2f53b5(0xfd)]==_0x2f53b5(0x2a7)?'buy':_0x2f53b5(0x2a7),'price':0x1/_0x381199[_0x2f53b5(0x164)]};_0x381199={..._0x381199,..._0x4ca674};}const _0x524525=defaultFee*_0x381199[_0x2f53b5(0x192)]*_0x381199[_0x2f53b5(0x164)];lastFees[_0x2f53b5(0x11f)][_0x2f53b5(0x29e)]===0x14&&lastFees[_0x2f53b5(0x11f)]['shift'](),lastFees[_0x2f53b5(0x11f)]['push'](_0x524525),lastFees[_0x2f53b5(0xff)]=Math[_0x2f53b5(0x1e4)](...lastFees[_0x2f53b5(0x11f)]);}async function updateNumberCoinsCcxt(_0x4b28bf){const _0x541d65=_0x233528;logger[_0x541d65(0x2d0)](_0x541d65(0x15d)+_0x4b28bf['symbol']+_0x541d65(0x120)+_0x4b28bf[_0x541d65(0x10c)]+_0x541d65(0x120)+_0x4b28bf[_0x541d65(0x192)]+'\x20/\x20'+_0x4b28bf['amount']+'\x20|\x20'+_0x4b28bf['id']);let _0x2054f6=_0x4b28bf[_0x541d65(0x10c)],_0x44d002=![];currentCoins[_0x541d65(0x1da)](_0x240f45=>{const _0x9a7ff8=_0x541d65;_0x240f45[_0x9a7ff8(0x2b3)]==_0x4b28bf[_0x9a7ff8(0x2b3)]&&(_0x44d002=!![]);});if(!_0x44d002)return;const _0x4e92b5=currentCoins['find'](_0x2a7cd9=>_0x2a7cd9[_0x541d65(0x2b3)]==_0x4b28bf[_0x541d65(0x2b3)]),_0x56bcbf=_0x4e92b5[_0x541d65(0x104)],_0x119e52=_0x3f23f4=>{const _0x994c99=_0x541d65,_0x87c48c=currentCoins[_0x994c99(0x1f3)](_0x5acbec=>_0x5acbec[_0x994c99(0x2b3)]==_0x4b28bf['symbol']);if(_0x87c48c)_0x87c48c[_0x994c99(0x226)]=_0x3f23f4;};let _0x288e2a=![];for(const _0x459051 of lastOrders){const _0x585acf=0x64,_0x374c99=0x1388;let _0x528fd6=0x0;while(!_0x459051['orderId']&&_0x528fd6*_0x585acf<_0x374c99){_0x528fd6++,await sleep(_0x585acf);}if(_0x528fd6>0x0)logger[_0x541d65(0x2d0)](_0x541d65(0x24d)+_0x528fd6*_0x585acf/0x3e8+_0x541d65(0x232));_0x459051[_0x541d65(0x12e)]==_0x4b28bf['id']&&(_0x288e2a=!![]);}if(_0x2054f6=='open'){_0x119e52(_0x541d65(0x131));if(_0x4b28bf[_0x541d65(0x192)]>0x0&&_0x4b28bf[_0x541d65(0x192)]<_0x4b28bf['amount']){if(_0x288e2a){setBlockTransactionDetection(!![]),logger[_0x541d65(0x2d0)](_0x541d65(0xfe)+_0x4b28bf['filled']+_0x541d65(0x20d)+_0x4b28bf['id']);const _0xa021bd=await getCoins(balanceUpdateDelay,undefined,undefined,_0x56bcbf);[currentCoins,currentCoinsAll]=_0xa021bd,setBlockTransactionDetection(![]);}else logger[_0x541d65(0x2d0)](_0x541d65(0xfe)+_0x4b28bf[_0x541d65(0x192)]+_0x541d65(0x1fe)+_0x4b28bf['id']),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay);}}else{if(_0x2054f6=='canceled'){_0x119e52(_0x541d65(0x1d8)),lastOrders=lastOrders['filter'](_0x51bee6=>_0x51bee6['symbol']!=_0x4b28bf[_0x541d65(0x2b3)]);const _0x2543ee=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x2543ee,setBlockTransactionDetection(![]),await getOpenOrders(),handleOpenOrders();}else{if(_0x2054f6=='closed'){if(lastOrders)for(const _0x477ce7 of lastOrders){if(_0x477ce7['orderId']==_0x4b28bf['id']){logger[_0x541d65(0x2d0)]('1\x20-\x20FILLED\x20known\x20order:\x20'+_0x4b28bf['id']),_0x288e2a=!![];if(_0x477ce7[_0x541d65(0x192)]==0x0){setBlockTransactionDetection(!![]),logger[_0x541d65(0x2d0)](_0x541d65(0x162)+_0x4b28bf['id']);if(_0x4b28bf['average'])_0x477ce7[_0x541d65(0x164)]=_0x4b28bf[_0x541d65(0x2c8)];else{if(_0x4b28bf[_0x541d65(0x164)])_0x477ce7['price']=_0x4b28bf[_0x541d65(0x164)];else{}}_0x477ce7[_0x541d65(0x192)]=_0x4b28bf['filled'],updateHighestFee(_0x477ce7);const _0x2faa4f=await getCoins(balanceUpdateDelay,undefined,undefined,_0x56bcbf);[currentCoins,currentCoinsAll]=_0x2faa4f,setBlockTransactionDetection(![]),await validateOrders(),_0x119e52(_0x541d65(0x192)),_0x477ce7[_0x541d65(0x275)]={'currency':_0x4b28bf['fee']?_0x4b28bf[_0x541d65(0x275)]['currency']:null,'cost':_0x4b28bf[_0x541d65(0x275)]?_0x4b28bf[_0x541d65(0x275)][_0x541d65(0x27c)]:0x0},await updatePnL(_0x477ce7);}}}!_0x288e2a&&(logger[_0x541d65(0x2d0)](_0x541d65(0x252)+_0x4b28bf['id']),_0x119e52(_0x541d65(0x192)),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay),await updateOpenOrders(),handleOpenOrders());}}}if(lastBalances){let _0x4665db=JSON[_0x541d65(0x2b1)](lastBalances[_0x541d65(0x2a5)]);const _0x1eff99=_0x4665db[_0x541d65(0x1f3)](_0x12be17=>_0x12be17[_0x541d65(0x2b3)]==_0x4b28bf[_0x541d65(0x2b3)]);if(_0x1eff99){if(_0x2054f6==_0x541d65(0x131))_0x1eff99['orderstatus']=_0x1eff99[_0x541d65(0x226)]==_0x541d65(0x192)?_0x541d65(0x192):_0x541d65(0x131);else{if(_0x2054f6==_0x541d65(0x1d8))_0x1eff99[_0x541d65(0x226)]=_0x1eff99[_0x541d65(0x226)]==_0x541d65(0x192)?_0x541d65(0x192):_0x541d65(0x1d8);else _0x2054f6==_0x541d65(0x25e)&&(_0x1eff99[_0x541d65(0x226)]=_0x541d65(0x192));}}lastBalances={...lastBalances,'portfolio':JSON[_0x541d65(0x260)](_0x4665db)},proxyEmit(_0x541d65(0x106),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x483c8e=_0x233528;await getOpenOrders();let _0x31195a=![];currentCoins[_0x483c8e(0x1da)](_0x2c4dd6=>{const _0x2deccd=_0x483c8e;_0x31195a=allOpenOrders[_0x2deccd(0x1f3)](_0x19378c=>_0x19378c[_0x2deccd(0x2b3)]==_0x2c4dd6[_0x2deccd(0x2b3)]),_0x2c4dd6['orderstatus']=_0x31195a?_0x2deccd(0x131):'none';});}async function fetchBalance(_0x4a73c8=!![]){const _0xd7fdd4=_0x233528;let _0x3a2f9f,_0x54e0e7;try{return _0x3a2f9f=await exchange[_0xd7fdd4(0x235)](),_0x54e0e7=_0x3a2f9f[_0xd7fdd4(0x122)],_0x54e0e7;}catch(_0x8f93a6){return!_0x4a73c8?handleErrorNoStop(_0x8f93a6,_0xd7fdd4(0x132)):await handleError(_0x8f93a6,_0xd7fdd4(0x132)),![];}}async function getCoins(_0x199ae6=0x0,_0x55c4f9=!![],_0x55b950=config[_0x233528(0x23a)],_0x52f2d4){const _0x449027=_0x233528;let _0x1752d5=[],_0x42df11=[],_0x415ce8=[],_0x84b8bc;if(_0x199ae6)await sleep(_0x199ae6);if(botPaused)return[currentCoins,currentCoinsAll];let _0x4b0530=![],_0x1bb9d4=0x0,_0x30ec9d,_0x59afd0;_0x52f2d4&&(_0x30ec9d=currentCoins[_0x449027(0x1f3)](_0x54f7fd=>_0x54f7fd[_0x449027(0x104)]==_0x52f2d4),_0x30ec9d&&(_0x59afd0=_0x30ec9d[_0x449027(0x2a9)],delete _0x30ec9d['prevnumber']));while(!_0x4b0530){_0x84b8bc=await fetchBalance(_0x55c4f9);if(_0x84b8bc){if(_0x52f2d4){if(_0x84b8bc[_0x52f2d4]!=_0x59afd0)logger[_0x449027(0x2d0)](_0x449027(0x187)+_0x52f2d4+':\x20'+_0x84b8bc[_0x52f2d4]+'\x20('+_0x59afd0+')'),_0x4b0530=!![];else{logger[_0x449027(0x2d0)](_0x449027(0x2c7)+_0x52f2d4+':\x20'+_0x84b8bc[_0x52f2d4]+'\x20('+_0x59afd0+')'),_0x1bb9d4++;if(_0x1bb9d4<balanceUpdateRetries)await sleep(balanceUpdateDelay);else{logger[_0x449027(0x2d0)](_0x449027(0x126)+_0x1bb9d4+'\x20attempts');break;}}}else break;}else return[currentCoins,currentCoinsAll];}for(const [_0x497e22,_0x3c8b51]of Object[_0x449027(0x281)](_0x84b8bc)){_0x415ce8['push'](_0x497e22);}config['portfolio'][_0x449027(0x1da)](_0x167004=>{const _0x251f02=_0x449027;!_0x415ce8[_0x251f02(0x196)](_0x167004[_0x251f02(0x104)])&&(_0x84b8bc[_0x167004['coin']]=0x0);});if(_0x55b950=='')for(const [_0x524e9a,_0x56a3cf]of Object[_0x449027(0x281)](_0x84b8bc)){_0x56a3cf!=0x0&&_0x1752d5['push']({'coin':_0x524e9a});}else for(const [_0x3bfa20,_0x459b6e]of Object['entries'](_0x84b8bc)){const _0x5005da=config[_0x449027(0x2a5)][_0x449027(0x1f3)](_0x11db3a=>_0x11db3a[_0x449027(0x104)]==_0x3bfa20),_0x5bb845=_0x3bfa20+'/'+_0x55b950,_0x4f064f=_0x55b950+'/'+_0x3bfa20,_0x348d8d=currentCoins[_0x449027(0x1f3)](_0x293d9b=>_0x293d9b[_0x449027(0x104)]==_0x3bfa20);if((_0x459b6e!=0x0||_0x5005da)&&(allSymbols[_0x449027(0x196)](_0x5bb845)||_0x3bfa20==_0x55b950))_0x348d8d?_0x1752d5[_0x449027(0x1b6)]({..._0x348d8d,'number':Math[_0x449027(0x1e4)](_0x459b6e+(_0x5005da&&_0x5005da[_0x449027(0x1c5)]||0x0),0x0)}):_0x1752d5[_0x449027(0x1b6)]({'coin':_0x3bfa20,'symbol':_0x5bb845,'reverse':![],'number':Math['max'](_0x459b6e+(_0x5005da&&_0x5005da['offset']||0x0),0x0),'orderstatus':_0x449027(0x137)});else{if((_0x459b6e!=0x0||_0x5005da)&&allSymbols[_0x449027(0x196)](_0x4f064f))_0x348d8d?_0x1752d5[_0x449027(0x1b6)]({..._0x348d8d,'number':Math['max'](_0x459b6e+(_0x5005da&&_0x5005da['offset']||0x0),0x0)}):_0x1752d5[_0x449027(0x1b6)]({'coin':_0x3bfa20,'symbol':_0x4f064f,'reverse':!![],'number':Math[_0x449027(0x1e4)](_0x459b6e+(_0x5005da&&_0x5005da[_0x449027(0x1c5)]||0x0),0x0),'orderstatus':_0x449027(0x137)});else _0x5005da&&_0x1752d5[_0x449027(0x1b6)]({'coin':_0x5005da['coin'],'symbol':_0x5005da[_0x449027(0x2b3)],'reverse':_0x5005da['reverse'],'number':0x0,'orderstatus':_0x449027(0x137)});}}return _0x1752d5[_0x449027(0x14c)]((_0x195c99,_0x3a303f)=>_0x195c99[_0x449027(0x173)]<_0x3a303f[_0x449027(0x173)]?0x1:_0x3a303f['delta']<_0x195c99[_0x449027(0x173)]?-0x1:0x0),_0x42df11=cloneDeep(_0x1752d5),_0x1752d5=_0x1752d5[_0x449027(0x2c2)](_0x1d0c0a=>{const _0x564202=_0x449027,_0x1a1181=config[_0x564202(0x2a5)]['find'](_0x505be4=>_0x505be4[_0x564202(0x104)]==_0x1d0c0a[_0x564202(0x104)]);return _0x1a1181&&!_0x1a1181[_0x564202(0x209)];}),[_0x1752d5,_0x42df11];}async function getCoinNumber(_0x595410){const _0x56aa57=_0x233528;let _0x3dbcc7;try{const _0x919bce=await exchange[_0x56aa57(0x235)]();_0x3dbcc7=_0x919bce[_0x56aa57(0x122)][_0x595410];}catch(_0x44cb90){await handleError(_0x44cb90,_0x56aa57(0x11a));}return _0x3dbcc7;}async function getOpenOrders(){const _0x4062a9=_0x233528;let _0x56366d;allOpenOrders=[];try{for(const _0x31607e of config['portfolio']){!_0x31607e[_0x4062a9(0x209)]&&_0x31607e[_0x4062a9(0x104)]!=config[_0x4062a9(0x23a)]&&(_0x56366d=await exchange[_0x4062a9(0x18c)](_0x31607e[_0x4062a9(0x2b3)]),_0x56366d[_0x4062a9(0x29e)]>0x0&&allOpenOrders['push'](_0x56366d[0x0]));}}catch(_0x3e1f7b){await handleError(_0x3e1f7b,_0x4062a9(0x2b6));}}async function handleOpenOrders(_0x4aba78=0x0){const _0x46f612=_0x233528;allOpenOrders[_0x46f612(0x29e)]==0x0&&lockOrders==ORDERS[_0x46f612(0x211)]&&allOrdersPlaced&&(_0x4aba78==0x0?(logger[_0x46f612(0x2d0)](_0x46f612(0x163)),_0x4aba78++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x46f612(0x2d0)]('2\x20-\x20Handled\x20open\x20orders'),validateOrders(_0x46f612(0x26c))));}async function testAPI(_0xdc39a7){const _0x4d6487=_0x233528;logger[_0x4d6487(0x2d0)](_0x4d6487(0x1cf));const _0x365a72=ccxt[_0x4d6487(0x218)][_0xdc39a7[_0x4d6487(0x2c1)][_0x4d6487(0x284)]()],_0x29555a=new _0x365a72({'apiKey':_0xdc39a7[_0x4d6487(0x149)],'secret':_0xdc39a7['apiSecret'],'options':{'defaultType':_0x4d6487(0x1fc)}});if(_0xdc39a7[_0x4d6487(0x210)])_0x29555a['password']=_0xdc39a7['apiPassword'];try{await _0x29555a[_0x4d6487(0x235)]();}catch(_0x3b538f){logger['debug'](_0x4d6487(0x150)+_0x3b538f['toString']());throw _0x3b538f;}}function cloneDeep(_0x3f9df5){const _0x107fbd=_0x233528;return JSON[_0x107fbd(0x2b1)](JSON[_0x107fbd(0x260)](_0x3f9df5));}async function getPortfolio(_0x5ae5c7){const _0xd23b34=_0x233528;let _0x75e158=[],_0x5462bc=[],_0x220a9e=[],_0x5484a9;_0x5ae5c7[_0xd23b34(0x149)]=decryptRSA(secure[_0xd23b34(0x1ba)],_0x5ae5c7[_0xd23b34(0x149)]),_0x5ae5c7[_0xd23b34(0x134)]=decryptRSA(secure[_0xd23b34(0x1ba)],_0x5ae5c7[_0xd23b34(0x134)]);if(_0x5ae5c7[_0xd23b34(0x210)])_0x5ae5c7[_0xd23b34(0x210)]=decryptRSA(secure[_0xd23b34(0x1ba)],_0x5ae5c7[_0xd23b34(0x210)]);if(_0x5ae5c7[_0xd23b34(0x149)]!==_0xd23b34(0x16f)||_0x5ae5c7[_0xd23b34(0x134)]!==_0xd23b34(0x16f)||_0x5ae5c7[_0xd23b34(0x210)]&&_0x5ae5c7[_0xd23b34(0x210)]!==_0xd23b34(0x16f)){if(config['exchange']){if(_0x5ae5c7[_0xd23b34(0x149)]=='************')_0x5ae5c7[_0xd23b34(0x149)]=config[_0xd23b34(0x149)];if(_0x5ae5c7[_0xd23b34(0x134)]==_0xd23b34(0x16f))_0x5ae5c7[_0xd23b34(0x134)]=config[_0xd23b34(0x134)];if(_0x5ae5c7[_0xd23b34(0x210)]==_0xd23b34(0x16f))_0x5ae5c7[_0xd23b34(0x210)]=config[_0xd23b34(0x210)];}try{if(_0x5ae5c7[_0xd23b34(0x177)])await testAPI(_0x5ae5c7);}catch(_0x43d0cd){if(_0x43d0cd['toString']()[_0xd23b34(0x196)](_0xd23b34(0x1b7))){logHistory('error',_0xd23b34(0x264)),logHistory('error',_0xd23b34(0x245)+_0x43d0cd[_0xd23b34(0x191)]()),proxyEmit('portfolio1',![]);return;}else{if(_0x43d0cd['toString']()[_0xd23b34(0x196)]('PermissionDenied')){logHistory('error',_0xd23b34(0x1cb)),logHistory('error',_0xd23b34(0x245)+_0x43d0cd[_0xd23b34(0x191)]()),proxyEmit(_0xd23b34(0x178),![]);return;}else{logHistory(_0xd23b34(0x294),'Error\x20occurred:\x20'+_0x43d0cd[_0xd23b34(0x191)]()),logger['debug']('Error\x20details:',_0x43d0cd),proxyEmit(_0xd23b34(0x178),![]);return;}}}exchange?updateExchange(_0x5ae5c7[_0xd23b34(0x149)],_0x5ae5c7[_0xd23b34(0x134)],_0x5ae5c7[_0xd23b34(0x210)]):await initExchange(_0x5ae5c7['exchange'],_0x5ae5c7[_0xd23b34(0x149)],_0x5ae5c7[_0xd23b34(0x134)],_0x5ae5c7['apiPassword']);await loadSymbols();const _0x1df635=await getCoins(0x0,![],_0x5ae5c7[_0xd23b34(0x23a)]);_0x220a9e=cloneDeep(_0x1df635[0x1]);}else{const _0x3d0d09=await getCoins();_0x220a9e=cloneDeep(_0x3d0d09[0x1]);}if(_0x5ae5c7[_0xd23b34(0x23a)]=='')proxyEmit(_0xd23b34(0x178),!![]),proxyEmit(_0xd23b34(0x1e3),_0x220a9e);else{_0x220a9e[_0xd23b34(0x1da)](_0x58db47=>{const _0x3055eb=_0xd23b34;if(_0x58db47[_0x3055eb(0x104)]!=_0x5ae5c7[_0x3055eb(0x23a)]&&allSymbols[_0x3055eb(0x196)](_0x58db47[_0x3055eb(0x2b3)]))_0x75e158[_0x3055eb(0x1b6)](_0x58db47[_0x3055eb(0x2b3)]);});if(_0x75e158['length']==0x0)logHistory(_0xd23b34(0x294),_0xd23b34(0x24c));else{try{_0x5462bc=await getTickers(_0x75e158);}catch(_0x3363ad){logHistory(_0xd23b34(0x294),'Unknown\x20error\x20-\x20check\x20logs'),logger[_0xd23b34(0x2d0)](_0xd23b34(0x296),_0x3363ad),proxyEmit(_0xd23b34(0x178),![]);return;}_0x220a9e['forEach'](_0x3dfe35=>{const _0x4ad946=_0xd23b34;_0x3dfe35[_0x4ad946(0x104)]!=_0x5ae5c7['basecoin']?_0x5462bc[_0x3dfe35[_0x4ad946(0x2b3)]]?_0x5484a9=_0x3dfe35['reverse']?0x1/_0x5462bc[_0x3dfe35[_0x4ad946(0x2b3)]]['last']:_0x5462bc[_0x3dfe35['symbol']][_0x4ad946(0x256)]:_0x5484a9=0x0:_0x5484a9=0x1,_0x3dfe35[_0x4ad946(0x164)]=formatResult(_0x5484a9,0x8);}),await getMarketCap(_0x220a9e),proxyEmit('portfolio1',!![]),proxyEmit(_0xd23b34(0x1e3),_0x220a9e);}}}function truncateTradeAmount(_0x3af505,_0x2cd404){const _0x4aab53=_0x233528;let _0xcd18db=0x0;try{_0xcd18db=exchange[_0x4aab53(0x21a)](_0x3af505,_0x2cd404);}catch(_0x240998){}return _0xcd18db;}function checkMinimums(_0x5424d1){const _0x4e12de=_0x233528;let _0x46d63b=!![];const _0x128575=!_0x5424d1[_0x4e12de(0x21c)]?markets[_0x5424d1[_0x4e12de(0x2b3)]][_0x4e12de(0x15b)][_0x4e12de(0x1dd)][_0x4e12de(0x240)]:markets[_0x5424d1['symbol']][_0x4e12de(0x15b)][_0x4e12de(0x27c)]['min'],_0x3f19eb=!_0x5424d1[_0x4e12de(0x21c)]?markets[_0x5424d1[_0x4e12de(0x2b3)]][_0x4e12de(0x15b)]['cost'][_0x4e12de(0x240)]:markets[_0x5424d1[_0x4e12de(0x2b3)]][_0x4e12de(0x15b)]['amount'][_0x4e12de(0x240)],_0x9d10ec=truncateTradeAmount(_0x5424d1['symbol'],_0x5424d1[_0x4e12de(0x16b)]);_0x5424d1[_0x4e12de(0x16b)]=_0x9d10ec;if(Math['abs'](_0x9d10ec)<_0x128575)_0x46d63b=![];if(Math[_0x4e12de(0x17f)](_0x9d10ec)*_0x5424d1[_0x4e12de(0x256)]<_0x3f19eb)_0x46d63b=![];if(_0x5424d1[_0x4e12de(0xfd)]==_0x4e12de(0x2a7)){let _0x15ef56=config[_0x4e12de(0x2a5)]['find'](_0x93a4a3=>_0x93a4a3[_0x4e12de(0x104)]==_0x5424d1[_0x4e12de(0x104)]);if(_0x15ef56['offset']>0x0){if(Math['abs'](_0x9d10ec)>_0x5424d1['number']-_0x15ef56[_0x4e12de(0x1c5)])_0x46d63b=![];}else{if(Math[_0x4e12de(0x17f)](_0x9d10ec)>_0x5424d1[_0x4e12de(0x262)])_0x46d63b=![];}}if(_0x5424d1[_0x4e12de(0xfd)]==_0x4e12de(0x1df)){let _0x1cbded=config['portfolio']['find'](_0x5f186f=>_0x5f186f[_0x4e12de(0x104)]==config[_0x4e12de(0x23a)]),_0x3dc904=currentCoins[_0x4e12de(0x1f3)](_0xab63ec=>_0xab63ec[_0x4e12de(0x104)]==config[_0x4e12de(0x23a)]);if(_0x1cbded['offset']>0x0){if(Math[_0x4e12de(0x17f)](_0x9d10ec)*_0x5424d1[_0x4e12de(0x256)]>_0x3dc904['number']-_0x1cbded[_0x4e12de(0x1c5)])_0x46d63b=![];}else{if(Math[_0x4e12de(0x17f)](_0x9d10ec)*_0x5424d1[_0x4e12de(0x256)]>_0x3dc904['number'])_0x46d63b=![];}}return _0x46d63b;}async function getBalances(_0x2838dd=!![]){const _0x58106b=_0x233528;if(botPaused)return;let _0x547a85=0x0,_0x52bc81;const _0x5b300a=config[_0x58106b(0x111)];if(config[_0x58106b(0x139)]&&config['change24h']<0x0)await validate24hChanges();currentCoins['forEach'](_0x10fe3c=>{const _0x1d656f=_0x58106b;if(_0x10fe3c['coin']!=config[_0x1d656f(0x23a)]){let _0x5ecadf=gTicker[noslash(_0x10fe3c['symbol'])];_0x52bc81=_0x10fe3c[_0x1d656f(0x21c)]?0x1/_0x5ecadf:_0x5ecadf;}else _0x52bc81=0x1;let _0x53dbd5=_0x10fe3c[_0x1d656f(0x262)]*_0x52bc81;_0x547a85+=_0x53dbd5,_0x10fe3c[_0x1d656f(0x256)]=formatResult(Number(_0x52bc81),0x8),_0x10fe3c['value']=_0x53dbd5;}),currentCoins[_0x58106b(0x1da)](_0x28e59f=>{const _0x10bb15=_0x58106b;let _0x12ba0b=config['portfolio'][_0x10bb15(0x1f3)](_0x14caa8=>_0x14caa8['coin']==_0x28e59f[_0x10bb15(0x104)]),_0x3f99d8=Number(_0x12ba0b[_0x10bb15(0x2c4)]),_0x13e66e=_0x28e59f[_0x10bb15(0x181)]/_0x547a85*0x64,_0x1fb3fb=_0x3f99d8*_0x547a85/0x64/_0x28e59f[_0x10bb15(0x256)]-_0x28e59f[_0x10bb15(0x262)];_0x28e59f[_0x10bb15(0x2c4)]=formatResult(_0x13e66e,0x3),_0x28e59f[_0x10bb15(0x28c)]=formatResult(_0x3f99d8,0x3),_0x28e59f[_0x10bb15(0x16b)]=formatResult(_0x1fb3fb,0x8),_0x28e59f['side']='',_0x28e59f[_0x10bb15(0x1aa)]=![];if(_0x28e59f[_0x10bb15(0x104)]!=config['basecoin']){if(_0x28e59f[_0x10bb15(0x2c4)]>_0x3f99d8)_0x28e59f[_0x10bb15(0xfd)]=_0x10bb15(0x2a7),_0x28e59f[_0x10bb15(0x1aa)]=checkMinimums(_0x28e59f);else _0x28e59f[_0x10bb15(0x2c4)]<_0x3f99d8&&(_0x28e59f['side']=_0x10bb15(0x1df),_0x28e59f[_0x10bb15(0x1aa)]=checkMinimums(_0x28e59f));}_0x28e59f['delta']=_0x28e59f[_0x10bb15(0x2c4)]/_0x28e59f[_0x10bb15(0x28c)]-0x1;if(_0x28e59f[_0x10bb15(0x226)]==_0x10bb15(0x192)||_0x28e59f['orderstatus']==_0x10bb15(0x1d8))_0x28e59f[_0x10bb15(0x226)]='none';}),currentCoins[_0x58106b(0x14c)]((_0x2c9160,_0x22b9bc)=>_0x2c9160['delta']<_0x22b9bc[_0x58106b(0x173)]?0x1:_0x22b9bc['delta']<_0x2c9160[_0x58106b(0x173)]?-0x1:0x0);const _0x5f4633=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x5f4633[_0x58106b(0x28f)],'usd':_0x5f4633[_0x58106b(0x22f)],'portfolio':JSON['stringify'](currentCoins),'threshold':_0x5b300a},proxyEmit(_0x58106b(0x106),{'serverversion':serverversion,'balances':lastBalances});if(_0x2838dd){if(config[_0x58106b(0x139)])headlessMode({'portfolio':currentCoins,'threshold':_0x5b300a});else lockOrders==ORDERS[_0x58106b(0x18e)]&&!coolingDown&&notifyBalance({'portfolio':currentCoins,'threshold':_0x5b300a});}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x145b62=getNormalizedPerformance();getStartingBalances(_0x145b62),emitPerformance(_0x145b62);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x4dcafa=_0x233528;if(!lastBalances)return;let _0x3d6298=[],_0x50e1c6,_0x310b60=JSON['parse'](lastBalances[_0x4dcafa(0x2a5)]);_0x310b60[_0x4dcafa(0x14c)]((_0x4a6738,_0x1d26be)=>_0x4a6738[_0x4dcafa(0x104)]>_0x1d26be['coin']?0x1:_0x1d26be[_0x4dcafa(0x104)]>_0x4a6738['coin']?-0x1:0x0),_0x310b60[_0x4dcafa(0x1da)](_0x16b7b=>{const _0x5307c8=_0x4dcafa;let _0xc848b2={'coin':_0x16b7b[_0x5307c8(0x104)],'number':_0x16b7b[_0x5307c8(0x262)],'price':_0x16b7b['last']};_0x3d6298[_0x5307c8(0x1b6)](_0xc848b2);});const _0x116a84=await getFiat(),_0x130953=getTimeStamp()[_0x4dcafa(0x1c9)]('\x20')[0x0],_0x3d356c=dbPerformance['get']('data')[_0x4dcafa(0x1f3)]({'date':_0x130953})[_0x4dcafa(0x181)]();_0x50e1c6={'date':_0x130953,'eur':_0x116a84[_0x4dcafa(0x28f)],'usd':_0x116a84[_0x4dcafa(0x22f)],'coins':_0x3d6298,'pnl':_0x3d356c?_0x3d356c[_0x4dcafa(0x25f)]:0x0},_0x3d356c?_0x50e1c6[_0x4dcafa(0x213)]!=config['startdate']&&dbPerformance[_0x4dcafa(0x172)]('data')[_0x4dcafa(0x1f3)]({'date':_0x130953})['assign'](_0x50e1c6)[_0x4dcafa(0x158)]():dbPerformance[_0x4dcafa(0x172)]('data')[_0x4dcafa(0x1b6)](_0x50e1c6)[_0x4dcafa(0x158)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x5e9be2=_0x233528;let _0x5120de=[];if(dbPerformance[_0x5e9be2(0x168)](_0x5e9be2(0x153))[_0x5e9be2(0x181)]()){let _0x2ac3fa=dbPerformance[_0x5e9be2(0x172)](_0x5e9be2(0x153))[_0x5e9be2(0x204)]()[_0x5e9be2(0x2c2)](_0x592982=>{if(_0x592982['coins']['length']==0x0)return![];else return!![];})['sortBy'](_0x5e9be2(0x213))[_0x5e9be2(0x181)](),_0x5eb933=[...config[_0x5e9be2(0x12d)]];_0x5eb933[_0x5e9be2(0x14c)]((_0x2411f3,_0x196a2d)=>_0x2411f3[_0x5e9be2(0x213)]>_0x196a2d[_0x5e9be2(0x213)]?-0x1:_0x196a2d[_0x5e9be2(0x213)]>_0x2411f3[_0x5e9be2(0x213)]?0x1:0x0);let _0x38bff2=0x1,_0x290db1=[],_0x571a96=0x0;_0x2ac3fa['slice']()[_0x5e9be2(0x21c)]()[_0x5e9be2(0x1da)]((_0x462499,_0x535bcf)=>{const _0x26b978=_0x5e9be2;if(_0x5eb933[_0x571a96]){if(_0x2ac3fa[_0x2ac3fa[_0x26b978(0x29e)]-_0x535bcf]&&_0x5eb933[_0x571a96][_0x26b978(0x213)]==_0x2ac3fa[_0x2ac3fa['length']-_0x535bcf]['date']){if(_0x535bcf<_0x2ac3fa['length']){let _0xe8d6e8=0x0,_0x3d7818=0x0;_0x2ac3fa[_0x2ac3fa[_0x26b978(0x29e)]-_0x535bcf][_0x26b978(0x197)][_0x26b978(0x1da)](_0x2197b3=>{const _0x3081ea=_0x26b978;_0x3d7818+=_0x2197b3[_0x3081ea(0x262)]*_0x2197b3[_0x3081ea(0x164)];}),_0x5eb933[_0x571a96]['changes']['forEach'](_0x4696fc=>{const _0x2ec4e2=_0x26b978;_0xe8d6e8+=_0x4696fc[_0x2ec4e2(0x262)]*_0x4696fc[_0x2ec4e2(0x164)];}),_0x38bff2*=_0xe8d6e8/(_0x3d7818-_0xe8d6e8)+0x1;}_0x571a96++;}}let _0x483075=0x0;_0x462499[_0x26b978(0x197)][_0x26b978(0x1da)](_0x3c15a0=>{const _0x11a8f4=_0x26b978;_0x483075+=_0x3c15a0[_0x11a8f4(0x262)]*_0x3c15a0['price'];}),_0x290db1[_0x2ac3fa[_0x26b978(0x29e)]-_0x535bcf-0x1]=_0x483075*(_0x38bff2-0x1);});let _0x55e05e=[];_0x5eb933=[...config[_0x5e9be2(0x12d)]]||[];let _0x304079=0x0;_0x571a96=0x0,_0x2ac3fa[_0x5e9be2(0x1da)]((_0x47affe,_0x350db0)=>{const _0x2defef=_0x5e9be2;if(_0x5eb933[_0x571a96]){const _0xad5db5=fns[_0x2defef(0x2b1)](_0x5eb933[_0x571a96][_0x2defef(0x213)],_0x2defef(0x282),new Date()),_0x640b31=fns[_0x2defef(0x2b1)](_0x47affe[_0x2defef(0x213)],_0x2defef(0x282),new Date());if(fns[_0x2defef(0x1ef)](_0xad5db5,_0x640b31)){let _0x32f4df=0x0;_0x5eb933[_0x571a96][_0x2defef(0x238)][_0x2defef(0x1da)](_0x5f295b=>{const _0x4deba8=_0x2defef;!_0x55e05e[_0x5f295b[_0x4deba8(0x104)]]?_0x55e05e[_0x5f295b[_0x4deba8(0x104)]]=_0x5f295b[_0x4deba8(0x262)]:(_0x32f4df=_0x55e05e[_0x5f295b['coin']],_0x55e05e[_0x5f295b[_0x4deba8(0x104)]]+=_0x5f295b[_0x4deba8(0x262)]);const _0x462760=_0x47affe[_0x4deba8(0x197)][_0x4deba8(0x1f3)](_0x504917=>_0x504917[_0x4deba8(0x104)]==_0x5f295b[_0x4deba8(0x104)]);(!_0x462760||_0x462760[_0x4deba8(0x262)]==0x0)&&(_0x304079+=(-_0x5f295b[_0x4deba8(0x262)]-_0x32f4df)*_0x5f295b[_0x4deba8(0x164)]);}),_0x571a96++;}}_0x47affe[_0x2defef(0x197)][_0x2defef(0x1da)]((_0x13412c,_0x3df690)=>{const _0x244b4d=_0x2defef;_0x55e05e[_0x13412c[_0x244b4d(0x104)]]&&(_0x13412c['initial']=_0x55e05e[_0x13412c[_0x244b4d(0x104)]]);}),_0x5120de[_0x2defef(0x1b6)]({'date':_0x47affe[_0x2defef(0x213)],'eur':_0x47affe['eur'],'usd':_0x47affe['usd'],'offset':_0x290db1[_0x350db0],'netoffset':_0x304079,'coins':_0x47affe['coins'],'pnl':_0x47affe[_0x2defef(0x25f)]});});}return _0x5120de;}function emitPerformance(_0x28aeeb){const _0x1a0a0f=_0x233528;_0x28aeeb[_0x1a0a0f(0x29e)]!==0x0?(proxyEmit(_0x1a0a0f(0x248),_0x28aeeb),lastPerformanceEmitted=getDate()):proxyEmit(_0x1a0a0f(0x248),[]);}function getPerf(_0x42ce7c,_0x37dec9){const _0x2cc455=_0x233528;let _0x1190c8=0x0,_0x2cc557=0x0,_0x697323=0x0;_0x42ce7c[_0x2cc455(0x197)][_0x2cc455(0x1da)](_0x12bed1=>{const _0x383f5c=_0x2cc455;_0x1190c8+=_0x12bed1['number']*_0x12bed1[_0x383f5c(0x164)];});_0x37dec9&&(_0x1190c8+=_0x42ce7c['offset']);if(config['basecoin']==='BTC'||config['basecoin']==='ETH'||config[_0x2cc455(0x23a)]==='PAXG')_0x2cc557=_0x1190c8*_0x42ce7c['eur'],_0x697323=_0x1190c8*_0x42ce7c[_0x2cc455(0x22f)];else{if(usdBasecoins[_0x2cc455(0x196)](config[_0x2cc455(0x23a)]))_0x2cc557=_0x1190c8*_0x42ce7c[_0x2cc455(0x28f)]/_0x42ce7c[_0x2cc455(0x22f)],_0x697323=_0x1190c8;else config[_0x2cc455(0x23a)]===_0x2cc455(0x184)&&(_0x2cc557=_0x1190c8,_0x697323=_0x1190c8*_0x42ce7c[_0x2cc455(0x22f)]/_0x42ce7c[_0x2cc455(0x28f)]);}return[_0x1190c8,_0x2cc557,_0x697323];}function getKPIs(_0x8c5903,_0x225d74='EUR'){const _0xc46d37=_0x233528,_0x47010a=config[_0xc46d37(0x23a)],_0x216f03=lastBalances,_0x3a92b9=currentCoins,_0x269bd4=getNormalizedPerformance(),_0xdcec9c=_0x8c5903==='basecoin'?_0x47010a:_0x8c5903==='fiat'||_0x8c5903===_0xc46d37(0x119)?_0x225d74:_0xc46d37(0x222)+_0x47010a,_0x458d89=_0x8c5903===_0xc46d37(0x1ec)?_0xc46d37(0x230):_0x8c5903===_0xc46d37(0x119)?_0xc46d37(0x230):_0xdcec9c+_0xc46d37(0x17d),_0x27cb08=_0x8c5903==='net-basecoin'||_0x8c5903===_0xc46d37(0x119)?_0xc46d37(0x230):_0xdcec9c+_0xc46d37(0x249);let _0x6d511=0x0;_0x3a92b9[_0xc46d37(0x1da)](_0x41ec5a=>{const _0x110e78=_0xc46d37;_0x6d511+=_0x41ec5a[_0x110e78(0x262)]*_0x41ec5a[_0x110e78(0x256)];});if(_0x8c5903===_0xc46d37(0x1c6)||_0x8c5903===_0xc46d37(0x119)){if(_0x47010a===_0xc46d37(0x1b3)||_0x47010a==='ETH'||_0x47010a==='PAXG')_0x6d511=_0x6d511*(_0x225d74===_0xc46d37(0x184)?_0x216f03[_0xc46d37(0x28f)]:_0x216f03[_0xc46d37(0x22f)]);else{if(usdBasecoins['includes'](_0x47010a))_0x6d511=_0x6d511*(_0x225d74===_0xc46d37(0x184)?_0x216f03[_0xc46d37(0x28f)]/_0x216f03['usd']:0x1);else _0x47010a==='EUR'&&(_0x6d511=_0x6d511*(_0x225d74===_0xc46d37(0x184)?0x1:_0x216f03[_0xc46d37(0x22f)]/_0x216f03['eur']));}}let _0x55afef;if(_0x6d511!==0x0){if(_0x8c5903==='basecoin')_0x55afef=(_0x6d511/startingBalances[_0xc46d37(0x23a)]-0x1)*0x64;else{if(_0x225d74===_0xc46d37(0x184))_0x55afef=(_0x6d511/startingBalances[_0xc46d37(0x28f)]-0x1)*0x64;else _0x55afef=(_0x6d511/startingBalances[_0xc46d37(0x22f)]-0x1)*0x64;}let _0x509a9d=0x0;if(startingBalances[_0xc46d37(0x197)])_0x3a92b9[_0xc46d37(0x1da)](_0x3eacb7=>{const _0x53b898=_0xc46d37;let _0x320d42=startingBalances[_0x53b898(0x197)][_0x53b898(0x1f3)](_0x3171ba=>_0x3171ba[_0x53b898(0x104)]===_0x3eacb7[_0x53b898(0x104)]);if(_0x320d42&&_0x320d42['coin']&&_0x3eacb7[_0x53b898(0x262)]!==0x0)_0x509a9d+=_0x320d42[_0x53b898(0x262)]*_0x3eacb7[_0x53b898(0x256)];});let _0x382d25=0x0;if(_0x269bd4['length']!==0x0){let _0x28e5bc=_0x269bd4[_0x269bd4['length']-0x1];_0x382d25=_0x28e5bc[_0xc46d37(0x189)];}_0x509a9d-=_0x382d25;_0x8c5903===_0xc46d37(0x1ec)&&(_0x55afef=(_0x6d511-_0x509a9d)/startingBalances[_0xc46d37(0x23a)]*0x64,_0x6d511=_0x6d511-_0x509a9d);if(_0x8c5903===_0xc46d37(0x119)){let _0x2027bf=_0x225d74===_0xc46d37(0x184)?startingBalances['eur']:startingBalances[_0xc46d37(0x22f)];if(_0x47010a===_0xc46d37(0x1b3)||_0x47010a===_0xc46d37(0x103)||_0x47010a===_0xc46d37(0x2c9))_0x509a9d=_0x225d74===_0xc46d37(0x184)?_0x509a9d*_0x216f03[_0xc46d37(0x28f)]:_0x509a9d*_0x216f03[_0xc46d37(0x22f)];else{if(usdBasecoins[_0xc46d37(0x196)](_0x47010a))_0x509a9d=_0x225d74===_0xc46d37(0x184)?_0x509a9d*_0x216f03[_0xc46d37(0x28f)]/_0x216f03[_0xc46d37(0x22f)]:_0x509a9d;else _0x47010a===_0xc46d37(0x184)&&(_0x509a9d=_0x225d74==='EUR'?_0x509a9d:_0x509a9d*_0x216f03[_0xc46d37(0x22f)]/_0x216f03[_0xc46d37(0x28f)]);}_0x55afef=(_0x6d511-_0x509a9d)/_0x2027bf*0x64,_0x6d511=_0x6d511-_0x509a9d;}if(_0x55afef){if(_0x55afef<0x64)_0x55afef=_0x55afef['toFixed'](0x2);else{if(_0x55afef<0x3e8)_0x55afef=_0x55afef[_0xc46d37(0x242)](0x1);else _0x55afef=_0x55afef[_0xc46d37(0x242)](0x0);}}else _0x55afef=Number('0')[_0xc46d37(0x242)](0x2);if(_0x6d511){if(Math[_0xc46d37(0x17f)](_0x6d511)<0.000001)_0x6d511=_0x6d511['toFixed'](0x2);else{if(Math[_0xc46d37(0x17f)](_0x6d511)<0.1)_0x6d511=_0x6d511['toFixed'](0x6);else{if(Math[_0xc46d37(0x17f)](_0x6d511)<0x1)_0x6d511=_0x6d511[_0xc46d37(0x242)](0x5);else{if(Math[_0xc46d37(0x17f)](_0x6d511)<0xa)_0x6d511=_0x6d511[_0xc46d37(0x242)](0x4);else{if(Math[_0xc46d37(0x17f)](_0x6d511)<0x64)_0x6d511=_0x6d511[_0xc46d37(0x242)](0x3);else{if(Math['abs'](_0x6d511)<0x3e8)_0x6d511=_0x6d511[_0xc46d37(0x242)](0x2);else _0x6d511=_0x6d511[_0xc46d37(0x242)](0x2);}}}}}}else _0x6d511=Number('0')[_0xc46d37(0x242)](0x2);}else _0x55afef=Number('0')['toFixed'](0x2);return{'value':_0x6d511,'change':_0x55afef,'leftTxt':_0x458d89,'rightTxt':_0x27cb08};}async function getStartingBalances(_0xf0c537,_0x19b88d=!![]){const _0x25dde5=_0x233528;if(_0xf0c537[_0x25dde5(0x29e)]!==0x0){const [_0x55c186,_0x2b1b49,_0x586adb]=getPerf(_0xf0c537[0x0],!![]);let _0x43d267=[];config[_0x25dde5(0x2a5)][_0x25dde5(0x1da)](_0x12f8e7=>{const _0x5836c7=_0x25dde5;let _0x5d067c=0x0,_0xbeb07d,_0x2ad41d=0x0;config['liquidity']['forEach'](_0x32cdbd=>{const _0x3a14de=_0x4e22;let _0x567840=_0x32cdbd['changes'][_0x3a14de(0x1f3)](_0x307f51=>_0x307f51['coin']==_0x12f8e7[_0x3a14de(0x104)]);if(_0x567840){_0x5d067c+=_0x567840[_0x3a14de(0x262)];if(!_0xbeb07d)_0xbeb07d=_0x567840[_0x3a14de(0x164)];_0x2ad41d+=_0x567840[_0x3a14de(0x262)]*_0x567840[_0x3a14de(0x164)];}}),_0x43d267[_0x5836c7(0x1b6)]({'coin':_0x12f8e7[_0x5836c7(0x104)],'number':_0x5d067c,'initialprice':_0xbeb07d,'averageprice':_0x5d067c!=0x0?_0x2ad41d/_0x5d067c:0x0});});const _0x51720c={'basecoin':_0x55c186,'eur':_0x2b1b49,'usd':_0x586adb,'coins':_0x43d267};if(_0x19b88d)proxyEmit(_0x25dde5(0x253),_0x51720c);startingBalances=_0x51720c;}}function headlessMode(_0x58c30b){const _0x56a315=_0x233528;let _0x587147=_0x58c30b[_0x56a315(0x2a5)],_0x38b78b=_0x58c30b[_0x56a315(0x111)],_0x34bb17=[];for(let _0x53d554 of _0x587147){if(_0x53d554[_0x56a315(0x104)]!=config[_0x56a315(0x23a)]){if(_0x53d554[_0x56a315(0x173)]>=_0x38b78b/0x64){if(_0x53d554[_0x56a315(0x1aa)])_0x34bb17[_0x56a315(0x1b6)](_0x53d554);}else{if(_0x53d554['delta']<=-_0x38b78b/0x64){if(_0x53d554[_0x56a315(0x1aa)])_0x34bb17[_0x56a315(0x1b6)](_0x53d554);}}}}_0x34bb17[_0x56a315(0x29e)]>0x0&&placeOrder(_0x34bb17);}function notifyBalance(_0x4f6439){const _0x280a32=_0x233528;let _0x17d103=_0x4f6439[_0x280a32(0x2a5)],_0x6dc491=_0x4f6439[_0x280a32(0x111)],_0x32dfdd=[];for(let _0x3704ab of _0x17d103){if(_0x3704ab[_0x280a32(0x104)]!=config[_0x280a32(0x23a)]){if(_0x3704ab['delta']>=_0x6dc491/0x64){if(_0x3704ab[_0x280a32(0x1aa)])_0x32dfdd[_0x280a32(0x1b6)](_0x3704ab);}else{if(_0x3704ab[_0x280a32(0x173)]<=-_0x6dc491/0x64){if(_0x3704ab[_0x280a32(0x1aa)])_0x32dfdd[_0x280a32(0x1b6)](_0x3704ab);}}}}if(_0x32dfdd[_0x280a32(0x29e)]>0x0){let _0x152c31=_0x32dfdd[_0x280a32(0x13d)](_0x1ea839=>_0x1ea839['coin']);_0x152c31[_0x280a32(0x14c)]();let _0x7233cd=_0x152c31[_0x280a32(0x1f7)](',\x20');if(!lastCoinsToBalance)logHistory(_0x280a32(0x123),_0x280a32(0x160));lastCoinsToBalance=_0x7233cd;}}function symbolToCoin(_0x3d9833){const _0x14a4a8=_0x233528;let _0x26bc60;if(_0x3d9833['includes']('/'+config[_0x14a4a8(0x23a)]))_0x26bc60=_0x3d9833[_0x14a4a8(0x21d)]('/'+config[_0x14a4a8(0x23a)],'');if(_0x3d9833[_0x14a4a8(0x196)](config['basecoin']+'/'))_0x26bc60=_0x3d9833[_0x14a4a8(0x21d)](config[_0x14a4a8(0x23a)]+'/','');return _0x26bc60;}function setLockOrders(_0x5b3124){const _0x5e8817=_0x233528;lockOrders=_0x5b3124,logger[_0x5e8817(0x2d0)](_0x5e8817(0x237)+Object[_0x5e8817(0x1f8)](ORDERS)[lockOrders]);}async function unlockOrders(_0x56b5ea=![]){const _0x3ed1d6=_0x233528;if(allOrdersPlaced&&lockOrders==ORDERS[_0x3ed1d6(0x211)]){setLockOrders(ORDERS['UNLOCKING']);if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);if(_0x56b5ea){const _0xbbb5e=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0xbbb5e,setBlockTransactionDetection(![]);}validateOrdersState='initial',persistOpenOrders([]),setLockOrders(ORDERS['UNLOCKED']);}}async function validateOrders(_0xe001b4){const _0x5ba5b5=_0x233528;if(_0xe001b4)validateOrdersState=_0xe001b4;logger[_0x5ba5b5(0x2d0)](_0x5ba5b5(0x161)+validateOrdersState+_0x5ba5b5(0x116)+Object[_0x5ba5b5(0x1f8)](ORDERS)[lockOrders]);let _0x28fc94=[],_0x349761=config[_0x5ba5b5(0x16d)]==_0x5ba5b5(0x107)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x5ba5b5(0x25a)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x5ba5b5(0x211)])return;logger[_0x5ba5b5(0x2d0)](_0x5ba5b5(0x114)+validateOrdersState);for(let _0x5a933d=lastOrders['length']-0x1;_0x5a933d>=0x0;_0x5a933d--){let _0x430882=lastOrders[_0x5a933d],_0x508d6d=![];_0x430882['filled']>0x0&&(_0x508d6d=!![]),_0x28fc94[_0x5ba5b5(0x1b6)](_0x508d6d),_0x508d6d&&config['ordertype']!='market'&&logHistory(_0x5ba5b5(0x13c),_0x5ba5b5(0x254)+_0x430882[_0x5ba5b5(0x2b3)]+'\x20'+_0x430882[_0x5ba5b5(0xfd)]+'\x20#'+formatResult(_0x430882[_0x5ba5b5(0x192)],0x8)+'\x20@'+formatResult(_0x430882['price'],0x8)),_0x508d6d&&lastOrders[_0x5ba5b5(0x171)](_0x5a933d,0x1);}persistOpenOrders(lastOrders);const _0x172448=coolingDown?'balancing\x20resumes\x20when\x20cooldown\x20ends':'balancing\x20resumed';if(validateOrdersState==_0x5ba5b5(0x2a2)){validateOrdersState=_0x5ba5b5(0x200);if(_0x28fc94['includes'](![])){}else await unlockOrders();}else{if(validateOrdersState=='ongoing'){if(_0x28fc94['includes'](![])){}else await unlockOrders();}else{if(validateOrdersState=='final')_0x28fc94[_0x5ba5b5(0x196)](![])&&(config[_0x5ba5b5(0x16d)]==_0x5ba5b5(0x107)?logHistory('success',_0x5ba5b5(0x257)+Math['round'](_0x349761*validateOrderInterval/0xea60)+_0x5ba5b5(0x1ea)+_0x172448):(await cancelOrders(),logHistory(_0x5ba5b5(0x146),_0x5ba5b5(0x152)+Math[_0x5ba5b5(0x2ae)](_0x349761*validateOrderInterval/0xea60)+_0x5ba5b5(0x1ea)+_0x172448))),await unlockOrders(!![]);else{if(validateOrdersState==_0x5ba5b5(0x26c)){if(config[_0x5ba5b5(0x16d)]!=_0x5ba5b5(0x107))logHistory('success',_0x5ba5b5(0x1c0)+_0x172448);await unlockOrders(!![]);}}}}}async function cancelOrders(){const _0xeff357=_0x233528;lastOrders[_0xeff357(0x1da)](async _0x22d559=>{const _0x79639d=_0xeff357;try{const _0x72b8c=await exchange[_0x79639d(0x2ba)](_0x22d559[_0x79639d(0x12e)],_0x22d559[_0x79639d(0x2b3)]);}catch(_0x398411){if(_0x398411[_0x79639d(0x191)]()[_0x79639d(0x196)]('OrderNotFound')){}else await handleError(_0x398411,_0x79639d(0x195));}});}async function initCoinResults(_0x1de882){const _0x16e6ee=_0x233528;_0x1de882?logger['debug'](_0x16e6ee(0x16a)+_0x1de882):logger[_0x16e6ee(0x2d0)](_0x16e6ee(0x261)),config['portfolio'][_0x16e6ee(0x1da)](_0x583b98=>{const _0x2e5790=_0x16e6ee;if(!_0x583b98[_0x2e5790(0x209)]&&_0x583b98['coin']!=config[_0x2e5790(0x23a)]){const _0x17ac1a=currentCoins[_0x2e5790(0x1f3)](_0x27eb91=>_0x27eb91['coin']==_0x583b98[_0x2e5790(0x104)]),_0x101d62=gTicker[noslash(_0x583b98[_0x2e5790(0x2b3)])];let _0x42ff07=_0x17ac1a?_0x17ac1a[_0x2e5790(0x262)]:null,_0x55f0b8=_0x583b98[_0x2e5790(0x21c)]?0x1/_0x101d62:_0x101d62,_0xee3e07;config[_0x2e5790(0x12d)][_0x2e5790(0x1da)](_0x3d26fb=>{const _0x4818e9=_0x2e5790;!_0xee3e07&&(_0xee3e07=_0x3d26fb[_0x4818e9(0x238)][_0x4818e9(0x1f3)](_0x5eceed=>_0x5eceed['coin']==_0x583b98[_0x4818e9(0x104)]),_0xee3e07&&(_0x42ff07=_0xee3e07[_0x4818e9(0x262)],_0x55f0b8=_0xee3e07[_0x4818e9(0x164)]));});let _0x3570e3=dbCoinResults[_0x2e5790(0x172)]('coins')[_0x2e5790(0x1f3)]({'coin':_0x583b98[_0x2e5790(0x104)]})[_0x2e5790(0x181)]();if(!_0x3570e3){const _0x10ff5e={'coin':_0x583b98[_0x2e5790(0x104)],'number':_0x42ff07,'breakeven':_0x55f0b8,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x2e5790(0x172)]('coins')[_0x2e5790(0x1b6)](_0x10ff5e)[_0x2e5790(0x158)]();}else{if(_0x1de882&&_0x583b98[_0x2e5790(0x104)]==_0x1de882){const _0x47d124={'coin':_0x583b98['coin'],'number':_0x42ff07,'breakeven':_0x55f0b8,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x2e5790(0x172)]('coins')[_0x2e5790(0x1f3)]({'coin':_0x583b98[_0x2e5790(0x104)]})[_0x2e5790(0x156)](_0x47d124)[_0x2e5790(0x158)]();}}}});}async function updateCoinResults(_0xce579b,_0x4690bd=![]){const _0x467fd7=_0x233528;let _0x2fed54,_0x44c7a7,_0x5e7447,_0x4c27a6,_0x5028a1,_0x142e3a,_0x56a88d=dbCoinResults[_0x467fd7(0x172)](_0x467fd7(0x197))['find']({'coin':_0xce579b[_0x467fd7(0x104)]})['value'](),_0x46bc10=![];_0x56a88d&&Object[_0x467fd7(0x281)](_0x56a88d)[_0x467fd7(0x1da)](([_0x379f47,_0xb7a05e])=>{if(_0xb7a05e==null)_0x46bc10=!![];});(!_0x56a88d||_0x46bc10)&&(await initCoinResults(_0xce579b[_0x467fd7(0x104)]),_0x56a88d=dbCoinResults[_0x467fd7(0x172)](_0x467fd7(0x197))[_0x467fd7(0x1f3)]({'coin':_0xce579b[_0x467fd7(0x104)]})[_0x467fd7(0x181)]());_0xce579b[_0x467fd7(0x21c)]&&(_0x142e3a={'filled':_0xce579b[_0x467fd7(0x192)]*_0xce579b[_0x467fd7(0x164)],'amount':_0xce579b[_0x467fd7(0x192)]*_0xce579b['price'],'side':_0xce579b[_0x467fd7(0xfd)]==_0x467fd7(0x2a7)?_0x467fd7(0x1df):'sell','price':0x1/_0xce579b[_0x467fd7(0x164)]},_0xce579b={..._0xce579b,..._0x142e3a});_0x4690bd?_0x44c7a7=_0xce579b[_0x467fd7(0xfd)]==_0x467fd7(0x1df)?_0x56a88d[_0x467fd7(0x262)]+_0xce579b[_0x467fd7(0x192)]:_0x56a88d['number']-_0xce579b[_0x467fd7(0x192)]:_0x44c7a7=await getCoinNumber(_0xce579b[_0x467fd7(0x104)]);if(_0xce579b[_0x467fd7(0x275)]&&_0xce579b['fee'][_0x467fd7(0x1a4)]==config[_0x467fd7(0x23a)])_0x2fed54=Number(_0xce579b[_0x467fd7(0x275)]['cost']);else{if(_0xce579b[_0x467fd7(0x275)]&&_0xce579b[_0x467fd7(0x275)]['currency']==_0x467fd7(0x14e)&&!_0x4690bd&&config[_0x467fd7(0x23a)]!='PAXG')_0x2fed54=Number(_0xce579b[_0x467fd7(0x275)]['cost'])*gTicker['BNB'+config[_0x467fd7(0x23a)]];else _0x2fed54=defaultFee*_0xce579b[_0x467fd7(0x192)]*_0xce579b['price'];}_0xce579b[_0x467fd7(0xfd)]==_0x467fd7(0x1df)?(_0x5e7447=_0x44c7a7!=0x0?(_0x56a88d[_0x467fd7(0x267)]*_0x56a88d[_0x467fd7(0x262)]+_0xce579b[_0x467fd7(0x164)]*(_0x44c7a7-_0x56a88d['number'])+_0x2fed54)/_0x44c7a7:0x0,_0x4c27a6=_0x56a88d[_0x467fd7(0x1f2)]):(_0x5e7447=_0x44c7a7!=0x0?(_0x56a88d[_0x467fd7(0x267)]*_0x56a88d[_0x467fd7(0x262)]-_0xce579b[_0x467fd7(0x164)]*(_0x56a88d[_0x467fd7(0x262)]-_0x44c7a7)+_0x2fed54)/_0x44c7a7:0x0,_0x4c27a6=_0x56a88d['realized']+(_0xce579b[_0x467fd7(0x164)]-_0x56a88d[_0x467fd7(0x267)])*_0xce579b[_0x467fd7(0x192)]);_0x5028a1=(_0xce579b[_0x467fd7(0x164)]-_0x5e7447-_0x2fed54/_0xce579b[_0x467fd7(0x192)])*_0x44c7a7;let _0x552fb5={'coin':_0xce579b['coin'],'number':_0x44c7a7,'breakeven':formatResult(_0x5e7447,0x8),'realized':formatResult(_0x4c27a6,0x8),'unrealized':formatResult(_0x5028a1,0x8),'fees':formatResult(_0x56a88d['fees']+_0x2fed54,0x8),'sells':_0xce579b[_0x467fd7(0xfd)]==_0x467fd7(0x2a7)?_0x56a88d[_0x467fd7(0x157)]+0x1:_0x56a88d[_0x467fd7(0x157)],'buys':_0xce579b[_0x467fd7(0xfd)]==_0x467fd7(0x1df)?_0x56a88d['buys']+0x1:_0x56a88d[_0x467fd7(0x1c7)]};dbCoinResults['get'](_0x467fd7(0x197))[_0x467fd7(0x1f3)]({'coin':_0xce579b[_0x467fd7(0x104)]})[_0x467fd7(0x156)](_0x552fb5)[_0x467fd7(0x158)]();if(!_0x4690bd){if(_0xce579b['fee']&&_0xce579b['fee']['currency']=='BNB'){const _0x2cb7d9=currentCoins[_0x467fd7(0x1f3)](_0x275143=>_0x275143[_0x467fd7(0x104)]=='BNB');if(_0x2cb7d9){let _0x315555=dbCoinResults['get'](_0x467fd7(0x197))[_0x467fd7(0x1f3)]({'coin':_0x467fd7(0x14e)})[_0x467fd7(0x181)]();_0x552fb5={..._0x315555,'number':_0x2cb7d9['number']},dbCoinResults[_0x467fd7(0x172)](_0x467fd7(0x197))['find']({'coin':'BNB'})[_0x467fd7(0x156)](_0x552fb5)['write']();}}}}async function placeOrder(_0x8e4841){const _0x4d2c08=_0x233528,_0x328245=config[_0x4d2c08(0x16d)]==_0x4d2c08(0x107)?_0x4d2c08(0x107):_0x4d2c08(0x2b8);if(lockOrders==ORDERS['UNLOCKED']&&!coolingDown){setLockOrders(ORDERS[_0x4d2c08(0x211)]);while(transactionDetectionOngoing){await sleep(0x64);}logger['debug'](_0x4d2c08(0x239)+_0x8e4841[_0x4d2c08(0x13d)](_0x3432a0=>_0x3432a0['coin'])[_0x4d2c08(0x1f7)](',\x20')),lastCoinsToBalance='',allOrdersPlaced=![],validateOrdersState=_0x4d2c08(0x2a2);let _0x4339bb=![];lastOrders=[];const _0x3c1983=config[_0x4d2c08(0x111)];for(const _0x3ddd17 of _0x8e4841){let _0x342dbf,_0x1db0ef,_0x18ac4c,_0x212c12,_0x12e955,_0x1eb352=_0x3ddd17[_0x4d2c08(0x2b3)];logger['debug'](_0x4d2c08(0x19b)+_0x3ddd17[_0x4d2c08(0x104)]+'\x20'+_0x3ddd17['number']+'\x20'+_0x3ddd17[_0x4d2c08(0x256)]+'\x20'+_0x3ddd17[_0x4d2c08(0x2c4)]+'%\x20'+_0x3ddd17[_0x4d2c08(0x28c)]+'%\x20'+(0x64*_0x3ddd17[_0x4d2c08(0x173)])[_0x4d2c08(0x242)](0x2)+_0x4d2c08(0x1a7)+_0x3c1983[_0x4d2c08(0x242)](0x2)+'%)');const _0x4b7521=currentCoins[_0x4d2c08(0x1f3)](_0x4535c4=>_0x4535c4['coin']==_0x3ddd17[_0x4d2c08(0x104)]);_0x4b7521&&(_0x4b7521[_0x4d2c08(0x2a9)]=_0x3ddd17[_0x4d2c08(0x262)]);try{const _0x1361ca=await exchange[_0x4d2c08(0x2a6)](_0x1eb352);_0x342dbf=_0x3ddd17[_0x4d2c08(0x21c)]?0x1/_0x3ddd17[_0x4d2c08(0x256)]:_0x3ddd17[_0x4d2c08(0x256)],_0x1db0ef=_0x1361ca[_0x4d2c08(0x193)],_0x18ac4c=_0x1361ca[_0x4d2c08(0x167)];_0x3ddd17[_0x4d2c08(0x21c)]?(_0x212c12=_0x3ddd17[_0x4d2c08(0xfd)]==_0x4d2c08(0x1df)?_0x4d2c08(0x2a7):_0x4d2c08(0x1df),_0x12e955=Math['abs'](_0x3ddd17['trade'])/_0x342dbf):(_0x212c12=_0x3ddd17[_0x4d2c08(0xfd)],_0x12e955=Math[_0x4d2c08(0x17f)](_0x3ddd17[_0x4d2c08(0x16b)]));_0x328245==_0x4d2c08(0x2b8)&&(config[_0x4d2c08(0x16d)]=='limit-high'&&(_0x342dbf=_0x212c12==_0x4d2c08(0x1df)?_0x1db0ef:_0x18ac4c),config[_0x4d2c08(0x16d)]==_0x4d2c08(0x19c)&&(_0x342dbf=_0x212c12==_0x4d2c08(0x1df)?_0x18ac4c:_0x1db0ef));_0x12e955=formatResult(_0x12e955,0x8),_0x342dbf=formatResult(_0x342dbf,0x8);const _0x3450c9=_0x212c12==_0x4d2c08(0x2a7)?config[_0x4d2c08(0x17a)]?String[_0x4d2c08(0x221)]('0x'+config[_0x4d2c08(0x17a)])+'\x20':'':config[_0x4d2c08(0x128)]?String[_0x4d2c08(0x221)]('0x'+config[_0x4d2c08(0x128)])+'\x20':'',_0x11690b=_0x328245==_0x4d2c08(0x107)?'Market':config[_0x4d2c08(0x16d)]==_0x4d2c08(0x108)?_0x4d2c08(0x208):_0x4d2c08(0x272),_0x3298ff=(Math[_0x4d2c08(0x28d)](Math[_0x4d2c08(0x2b9)]()*0x35a4e900)+0x5f5e100)[_0x4d2c08(0x191)]();lastOrders['push']({'customId':_0x3298ff,'symbol':_0x1eb352,'coin':_0x3ddd17[_0x4d2c08(0x104)],'amount':_0x12e955,'price':_0x342dbf,'side':_0x212c12,'reverse':_0x3ddd17[_0x4d2c08(0x21c)],'filled':0x0});if(_0x328245==_0x4d2c08(0x107))logHistory(_0x4d2c08(0x13c),''+_0x3450c9+_0x11690b+'\x20order:\x20'+_0x1eb352+'\x20'+_0x212c12+'\x20#'+formatResult(_0x12e955,0x8)+'\x20@'+formatResult(_0x342dbf,0x8));else logHistory('order',''+_0x3450c9+_0x11690b+_0x4d2c08(0x1b0)+_0x1eb352+'\x20'+_0x212c12+'\x20#'+formatResult(_0x12e955,0x8)+'\x20@'+formatResult(_0x342dbf,0x8));let _0xb850c9;_0x328245==_0x4d2c08(0x107)?_0x212c12==_0x4d2c08(0x1df)&&['Bybit','Bitget',_0x4d2c08(0x2bf),_0x4d2c08(0x2c6),_0x4d2c08(0x133)][_0x4d2c08(0x196)](config[_0x4d2c08(0x2c1)])?_0xb850c9=await exchange[_0x4d2c08(0x11c)](_0x1eb352,_0x328245,_0x212c12,_0x12e955,_0x342dbf):_0xb850c9=await exchange[_0x4d2c08(0x11c)](_0x1eb352,_0x328245,_0x212c12,_0x12e955,undefined):_0xb850c9=await exchange[_0x4d2c08(0x11c)](_0x1eb352,_0x328245,_0x212c12,_0x12e955,_0x342dbf);logger[_0x4d2c08(0x2d0)]('ID:\x20'+_0xb850c9['id']+_0x4d2c08(0x27e)+_0x3298ff);const _0x2a7a41=lastOrders[_0x4d2c08(0x29e)]-0x1;if(_0x2a7a41>=0x0&&lastOrders[_0x2a7a41][_0x4d2c08(0x236)]==_0x3298ff){lastOrders[_0x2a7a41][_0x4d2c08(0x12e)]=_0xb850c9['id'];if(_0xb850c9['amount'])lastOrders[_0x2a7a41][_0x4d2c08(0x1dd)]=_0xb850c9[_0x4d2c08(0x1dd)];if(_0xb850c9[_0x4d2c08(0x164)])lastOrders[_0x2a7a41]['price']=_0xb850c9[_0x4d2c08(0x164)];lastOrders[_0x2a7a41][_0x4d2c08(0x275)]=_0xb850c9[_0x4d2c08(0x275)];}if(config[_0x4d2c08(0x180)]!=0x0){let _0x304327=null;if(cooldownTracker[_0x4d2c08(0x29e)]==config[_0x4d2c08(0x180)]-0x1)_0x304327=cooldownTracker[_0x4d2c08(0x129)]();const _0x4401a0=getTimeStamp();cooldownTracker[_0x4d2c08(0x1b6)](_0x4401a0);if(_0x304327){const _0x54f55b=fns[_0x4d2c08(0x16e)](new Date(_0x4401a0),new Date(_0x304327));if(_0x54f55b<cooldownInterval){logHistory(_0x4d2c08(0x294),'Executed\x20'+config['cooldown']+_0x4d2c08(0x1c1)+cooldownInterval/0x3c+_0x4d2c08(0x215)+cooldownPeriod/(0xe10*0x3e8)+_0x4d2c08(0x165)),coolingDown=!![];break;}}}}catch(_0x16b4f8){if(_0x16b4f8['toString']()[_0x4d2c08(0x196)](_0x4d2c08(0x269)))lastOrders=lastOrders[_0x4d2c08(0x2c2)](_0x9ffbc9=>_0x9ffbc9[_0x4d2c08(0x2b3)]!=_0x1eb352),logHistory(_0x4d2c08(0x294),'Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x1eb352),_0x4339bb=!![];else{if(_0x16b4f8[_0x4d2c08(0x191)]()[_0x4d2c08(0x196)](_0x4d2c08(0x159)))lastOrders=lastOrders['filter'](_0x15cf0a=>_0x15cf0a['symbol']!=_0x1eb352),logHistory(_0x4d2c08(0x294),_0x4d2c08(0x2aa)+_0x1eb352),_0x4339bb=!![];else{if(_0x16b4f8[_0x4d2c08(0x191)]()[_0x4d2c08(0x196)](_0x4d2c08(0x1bc)))lastOrders=lastOrders['filter'](_0x222073=>_0x222073[_0x4d2c08(0x2b3)]!=_0x1eb352),logHistory(_0x4d2c08(0x294),_0x4d2c08(0x1b9)+_0x1eb352),logger['debug'](_0x16b4f8),_0x4339bb=!![];else _0x16b4f8[_0x4d2c08(0x191)]()[_0x4d2c08(0x196)](_0x4d2c08(0x20b))?(lastOrders=lastOrders['filter'](_0x2509e9=>_0x2509e9['symbol']!=_0x1eb352),logHistory('error','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x1eb352),_0x4339bb=!![]):(lastOrders=lastOrders[_0x4d2c08(0x2c2)](_0x34b668=>_0x34b668[_0x4d2c08(0x2b3)]!=_0x1eb352),await handleError(_0x16b4f8,_0x4d2c08(0x2a8),_0x1eb352));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x4d2c08(0x29e)]>0x0){const _0x552fd6=config[_0x4d2c08(0x16d)]==_0x4d2c08(0x107)?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x552fd6);}else unlockOrders();_0x4339bb&&config[_0x4d2c08(0x139)]&&(logHistory(_0x4d2c08(0x294),_0x4d2c08(0x1ae)+pauseBotMsg),await pauseBot(pauseBotInterval)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x4d2c08(0x146),_0x4d2c08(0x22b)));}else{if(coolingDown)!config[_0x4d2c08(0x139)]&&logHistory(_0x4d2c08(0x294),_0x4d2c08(0x13a));else lockOrders!=ORDERS[_0x4d2c08(0x18e)]&&(!config['headless']&&(config['ordertype']==_0x4d2c08(0x107)?logHistory(_0x4d2c08(0x294),_0x4d2c08(0x2bb)):logHistory(_0x4d2c08(0x294),_0x4d2c08(0x27f))));}}function persistOpenOrders(_0x3f742a){const _0x2b5889=_0x233528,_0x35a3b7={...config,'openOrders':_0x3f742a};let _0x33c5ed=dbConfig[_0x2b5889(0x172)](_0x2b5889(0x1e6))[_0x2b5889(0x1f3)]({'botID':botID})[_0x2b5889(0x181)]();_0x33c5ed&&dbConfig[_0x2b5889(0x172)]('bot')['find']({'botID':botID})['assign'](_0x35a3b7)[_0x2b5889(0x158)]();}function restoreOrders(){const _0x3743fd=_0x233528;let _0x101a11;config[_0x3743fd(0x2c0)]&&allOpenOrders[_0x3743fd(0x1da)](_0x58fda8=>{const _0x2f407b=_0x3743fd,_0x241651=config['openOrders'][_0x2f407b(0x1f3)](_0x31a0e9=>_0x31a0e9[_0x2f407b(0x12e)]==_0x58fda8['id']);_0x241651&&(lastOrders[_0x2f407b(0x1b6)](_0x241651),_0x101a11=_0x58fda8[_0x2f407b(0x1fa)]);});if(lastOrders[_0x3743fd(0x29e)]>0x0){setLockOrders(ORDERS[_0x3743fd(0x211)]),validateOrdersState=_0x3743fd(0x200),allOrdersPlaced=!![];const _0x2bbe75=new Date()['getTime'](),_0x1392b4=config[_0x3743fd(0x16d)]==_0x3743fd(0x107)?validateOrderTimeout*0x3c*0x3e8:config[_0x3743fd(0x25a)]*0x3c*0x3e8;if(_0x101a11+_0x1392b4>_0x2bbe75){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x1b7d0d=_0x3743fd;validateOrders(_0x1b7d0d(0x234));},_0x101a11+_0x1392b4-_0x2bbe75);}else validateOrders(_0x3743fd(0x234));}}async function sendMetricsTelegram(){const _0x1a6f6f=_0x233528;if(!coinsLoaded){process[_0x1a6f6f(0x1db)]({'telegrammsg':_0x1a6f6f(0x2ca)},_0x58fb37=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x5685f6='';if(config[_0x1a6f6f(0x2be)])_0x5685f6='<b>'+config[_0x1a6f6f(0x1e1)]+'\x20metrics:</b>\x20\x0a\x0a';else _0x5685f6=_0x1a6f6f(0x2cb)+botID+_0x1a6f6f(0x28e);const _0x2070d9=getKPIs(_0x1a6f6f(0x23a)),_0x2d6812=getKPIs(_0x1a6f6f(0x1c6),config[_0x1a6f6f(0x1c6)]),_0x47f45=getKPIs(_0x1a6f6f(0x1ec)),_0x1956f6=getKPIs('net-fiat',config[_0x1a6f6f(0x1c6)]);_0x5685f6+=_0x1a6f6f(0x1a5),_0x5685f6+=_0x2070d9[_0x1a6f6f(0x1fb)]+_0x1a6f6f(0x13b)+_0x2070d9[_0x1a6f6f(0x181)]+'\x0a',_0x5685f6+=_0x2070d9['rightTxt']+':\x20'+_0x2070d9[_0x1a6f6f(0x1d4)]+'%\x0a',_0x5685f6+=_0x2d6812['leftTxt']+'\x20:\x20'+_0x2d6812[_0x1a6f6f(0x181)]+'\x0a',_0x5685f6+=_0x2d6812['rightTxt']+':\x20'+_0x2d6812['change']+'%\x0a',_0x5685f6+=_0x47f45[_0x1a6f6f(0x1fb)]+':\x20'+_0x47f45[_0x1a6f6f(0x181)]+'\x20('+config[_0x1a6f6f(0x23a)]+')\x0a',_0x5685f6+=_0x47f45[_0x1a6f6f(0x295)]+':\x20'+_0x47f45[_0x1a6f6f(0x1d4)]+_0x1a6f6f(0x1a7)+config['basecoin']+')\x0a',_0x5685f6+=_0x1956f6[_0x1a6f6f(0x1fb)]+':\x20'+_0x1956f6[_0x1a6f6f(0x181)]+'\x20('+config[_0x1a6f6f(0x1c6)]+')\x0a',_0x5685f6+=_0x1956f6[_0x1a6f6f(0x295)]+':\x20'+_0x1956f6[_0x1a6f6f(0x1d4)]+_0x1a6f6f(0x1a7)+config[_0x1a6f6f(0x1c6)]+')\x0a',_0x5685f6+=_0x1a6f6f(0x271),process[_0x1a6f6f(0x1db)]({'telegrammsg':_0x5685f6},_0x111f03=>{});}async function sendPortfolioTelegram(){const _0x15978f=_0x233528;if(!coinsLoaded||!currentCoins[0x0][_0x15978f(0x2c4)]){process[_0x15978f(0x1db)]({'telegrammsg':'Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute'},_0x49990f=>{});return;}let _0x3ca243='';if(config[_0x15978f(0x2be)])_0x3ca243=_0x15978f(0x259)+config[_0x15978f(0x1e1)]+_0x15978f(0x16c);else _0x3ca243=_0x15978f(0x2cb)+botID+_0x15978f(0x16c);_0x3ca243+=_0x15978f(0x1a5),_0x3ca243+=_0x15978f(0x179),_0x3ca243+=_0x15978f(0x280),_0x3ca243+='-------------------------------\x0a',currentCoins['forEach'](_0x4e7f72=>{const _0x21771b=_0x15978f;_0x3ca243+=_0x4e7f72[_0x21771b(0x104)]['padEnd'](0x7)+'|\x20'+formatPad(_0x4e7f72[_0x21771b(0x2c4)],0x2,0x6)+'|\x20'+formatPad(_0x4e7f72[_0x21771b(0x28c)],0x2,0x6)+'|\x20'+formatPad(_0x4e7f72[_0x21771b(0x173)]*0x64,0x2,0x6)+'\x0a';}),_0x3ca243+=_0x15978f(0x271),process[_0x15978f(0x1db)]({'telegrammsg':_0x3ca243},_0x1381cf=>{});}function formatPad(_0x17d9f2,_0x53e5ed,_0x4f47db){const _0x1a3fbe=_0x233528,_0x4a772e=formatResultString(_0x17d9f2,_0x53e5ed);return _0x4a772e?_0x4a772e[_0x1a3fbe(0x135)](_0x4f47db):''[_0x1a3fbe(0x135)](_0x4f47db);}function logHistory(_0x5ab818,_0x156d62,_0x16aa9b=''){const _0x4d4a64=_0x233528;logger[_0x4d4a64(0x265)](''+_0x156d62);let _0x59e0c0={'time':getTimeStamp(),'type':_0x5ab818,'event':_0x156d62};dbLogs[_0x4d4a64(0x172)](_0x4d4a64(0x19e))[_0x4d4a64(0x1b6)](_0x59e0c0)[_0x4d4a64(0x158)]();if(_0x16aa9b=='')_0x16aa9b=_0x156d62;proxyEmit(_0x4d4a64(0x24b),{'log':_0x59e0c0,'summary':_0x16aa9b}),process[_0x4d4a64(0x1db)]({'telegram':{..._0x59e0c0,'botname':config[_0x4d4a64(0x1e1)],'showname':config[_0x4d4a64(0x2be)]}},_0x51882b=>{});}function emitHistory(_0x465b19={}){const _0x32190f=_0x233528;Object[_0x32190f(0x1f8)](_0x465b19)[_0x32190f(0x29e)]==0x0&&(_0x465b19={'type':[_0x32190f(0x13c),_0x32190f(0x24b)],'event':'','page':0x1});if(_0x465b19[_0x32190f(0x231)][_0x32190f(0x196)](_0x32190f(0x24b)))_0x465b19[_0x32190f(0x231)][_0x32190f(0x171)](_0x465b19[_0x32190f(0x231)]['indexOf'](_0x32190f(0x24b)),0x1,_0x32190f(0x294),_0x32190f(0x123),_0x32190f(0x146));if(dbLogs[_0x32190f(0x168)](_0x32190f(0x19e))[_0x32190f(0x181)]()){let _0x489bd8=dbLogs['get'](_0x32190f(0x19e))[_0x32190f(0x2c2)](_0x470e71=>{const _0x154726=_0x32190f;if(_0x465b19[_0x154726(0x231)]['length']==0x0)return![];else return _0x465b19['type']['includes'](_0x470e71[_0x154726(0x231)]);})[_0x32190f(0x2c2)](_0x1c7e2a=>{const _0x480537=_0x32190f;if(_0x465b19[_0x480537(0x24b)]=='')return!![];else return _0x1c7e2a[_0x480537(0x24b)][_0x480537(0x284)]()['includes'](_0x465b19[_0x480537(0x24b)]['toLowerCase']());})[_0x32190f(0x20e)](_0x32190f(0x1e2)),_0x1c8144=_0x489bd8[_0x32190f(0x181)]()[_0x32190f(0x29e)];_0x489bd8=_0x489bd8['reverse']()[_0x32190f(0x247)]((_0x465b19[_0x32190f(0x273)]-0x1)*logPageSize,_0x465b19[_0x32190f(0x273)]*logPageSize-0x1)['reverse']()[_0x32190f(0x181)](),proxyEmit(_0x32190f(0x214),{'logs':_0x489bd8,'total':_0x1c8144});}else proxyEmit(_0x32190f(0x214),{'logs':[],'total':0x0});}function _0x4e22(_0x35aaf9,_0x3f763b){const _0x38994a=_0x5020();return _0x4e22=function(_0x43eb28,_0x210594){_0x43eb28=_0x43eb28-0xfc;let _0x5020f1=_0x38994a[_0x43eb28];return _0x5020f1;},_0x4e22(_0x35aaf9,_0x3f763b);}function deleteHistoryAlerts(_0x3afc5d){const _0xb34449=_0x233528;if(dbLogs[_0xb34449(0x168)](_0xb34449(0x19e))[_0xb34449(0x181)]()){const _0xc6ad73=dbLogs[_0xb34449(0x172)](_0xb34449(0x19e))['sortBy']('time')['filter'](_0x3dfcb7=>{const _0x3a39be=_0xb34449;return _0x3dfcb7[_0x3a39be(0x231)]=='order';})[_0xb34449(0x181)]();dbLogs['get']('logs')[_0xb34449(0x182)]()[_0xb34449(0x158)](),dbLogs[_0xb34449(0x172)](_0xb34449(0x19e))['assign'](_0xc6ad73)['write'](),emitHistory(_0x3afc5d);}}async function pauseBot(_0x3c628c=pauseBotIntervalShort,_0x5af375,_0x27cf9b,_0x1fc4ce=![]){const _0x580598=_0x233528,_0xc1e65d=new Date()[_0x580598(0x1f6)]();if(!lastErrorShown||_0xc1e65d-lastErrorShown>=_0x3c628c){lastErrorShown=_0xc1e65d;if(!lastBotPause)lastBotPause=_0xc1e65d,consecutivePauses=0x1;else{if(_0xc1e65d-lastBotPause-_0x3c628c<0x5a*0x3e8){consecutivePauses++;if(consecutivePauses>maxPauseRetries){if(_0x1fc4ce){logHistory(_0x580598(0x294),_0x5af375+'\x20>\x20stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();return;}else logHistory(_0x580598(0x294),_0x5af375+pauseBotMsg),_0x3c628c=pauseBotInterval;}}else consecutivePauses=0x1;lastBotPause=_0xc1e65d;}_0x27cf9b?logger['debug']('('+consecutivePauses+')\x20'+_0x5af375+_0x580598(0x141),_0x27cf9b):logger['debug']('('+consecutivePauses+')\x20'+_0x5af375);if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);await sleep(_0x3c628c),botPaused=![],_0x3c628c==pauseBotIntervalShort?resumeBot(!![]):resumeBot(![]);}}}async function killBot(){const _0x2371fd=_0x233528;botPaused=!![],await sleep(0x3e8),process['send']({'stop':_0x2371fd(0x1d1)},_0x2cb47b=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x9b0082,_0x5a8318,_0x1cc6bb=![]){const _0xea5278=_0x233528;if(botPaused)return;let _0x2e574c;const _0x14a95e=config['exchange']||_0xea5278(0x287);if(_0x5a8318)logger[_0xea5278(0x2d0)](_0xea5278(0x20f)+_0x5a8318);const _0x1c0b5c=()=>{const _0x4354b0=_0xea5278;loading[_0x4354b0(0x294)]=!![],emitLoadingProgress();};if(_0x9b0082[_0xea5278(0x191)]()[_0xea5278(0x196)]('API-key\x20format\x20invalid'))logHistory(_0xea5278(0x294),_0x14a95e+'\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)'),_0x1c0b5c();else{if(_0x9b0082[_0xea5278(0x191)]()[_0xea5278(0x196)](_0xea5278(0x1cd)))logHistory('error',_0x14a95e+'\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)'),_0x1c0b5c();else{if(_0x9b0082[_0xea5278(0x191)]()[_0xea5278(0x196)](_0xea5278(0x1b7)))config[_0xea5278(0x210)]?_0x2e574c=_0x14a95e+'\x20API\x20key,\x20secret\x20or\x20password\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange':_0x2e574c=_0x14a95e+_0xea5278(0x220),logHistory(_0xea5278(0x294),_0x2e574c+_0xea5278(0x2d3)),_0x1c0b5c();else{if(_0x9b0082[_0xea5278(0x191)]()['includes'](_0xea5278(0x1f4)))logHistory(_0xea5278(0x294),_0x14a95e+_0xea5278(0x112)),_0x1c0b5c();else{if(!_0x1cc6bb)await handleError(_0x9b0082,null);}}}}}async function handleError(_0x35db5b,_0xabef34,_0x5274b2=''){const _0xe706dc=_0x233528;if(botPaused)return;let _0x5948f9;const _0xa47009=config[_0xe706dc(0x2c1)]||_0xe706dc(0x287);if(_0xabef34)logger[_0xe706dc(0x2d0)](_0xe706dc(0x20f)+_0xabef34);if(_0x35db5b[_0xe706dc(0x191)]()[_0xe706dc(0x196)]('DDoSProtection'))_0x5948f9=_0xa47009+_0xe706dc(0x26f),await pauseBot(undefined,_0x5948f9,_0x35db5b);else{if(_0x35db5b['toString']()[_0xe706dc(0x196)](_0xe706dc(0x299)))_0x5948f9=_0xa47009+_0xe706dc(0x233),await pauseBot(undefined,_0x5948f9,_0x35db5b);else{if(_0x35db5b[_0xe706dc(0x191)]()[_0xe706dc(0x196)]('ExchangeNotAvailable')||_0x35db5b['toString']()[_0xe706dc(0x196)](_0xe706dc(0x21b)))_0x5948f9=_0xa47009+_0xe706dc(0x28a),await pauseBot(undefined,_0x5948f9,_0x35db5b[_0xe706dc(0x191)]());else{if(_0x35db5b[_0xe706dc(0x191)]()[_0xe706dc(0x196)](_0xe706dc(0x258)))_0x5948f9=_0xa47009+'\x20not\x20responding\x20(see:\x20hodlerhacks.com/fix/5)',await pauseBot(undefined,_0x5948f9,_0x35db5b[_0xe706dc(0x191)]());else{if(_0x35db5b[_0xe706dc(0x191)]()['includes'](_0xe706dc(0x26b)))_0x5948f9=_0xa47009+'\x20closed\x20the\x20connection\x20(see:\x20hodlerhacks.com/fix/5)',await pauseBot(undefined,_0x5948f9,_0x35db5b['toString']());else{if(_0x35db5b[_0xe706dc(0x191)]()[_0xe706dc(0x284)]()[_0xe706dc(0x196)](_0xe706dc(0x1fa))||_0x35db5b[_0xe706dc(0x191)]()[_0xe706dc(0x284)]()[_0xe706dc(0x196)](_0xe706dc(0x174)))_0x5948f9=_0xe706dc(0x1ca),await pauseBot(undefined,_0x5948f9,_0x35db5b[_0xe706dc(0x191)]());else{if(_0x35db5b[_0xe706dc(0x191)]()[_0xe706dc(0x196)](_0xe706dc(0x2a3)))_0x5948f9=_0xa47009+_0xe706dc(0x155),await pauseBot(undefined,_0x5948f9,_0x35db5b[_0xe706dc(0x191)]());else{if(_0x35db5b instanceof ccxt['NetworkError'])_0x5948f9=_0xa47009+_0xe706dc(0x143)+_0x35db5b[_0xe706dc(0x191)](),logger[_0xe706dc(0x2d0)](_0xe706dc(0x11e),_0x35db5b),await pauseBot(undefined,_0x5948f9,_0x35db5b);else{if(_0x35db5b[_0xe706dc(0x191)]()['includes'](_0xe706dc(0x1d9)))logHistory('error',_0xa47009+_0xe706dc(0x18a)),logHistory('error','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)'),await killBot();else{if(_0x35db5b['toString']()['includes'](_0xe706dc(0x1cd)))logHistory('error',_0xa47009+_0xe706dc(0x109)),logHistory(_0xe706dc(0x294),_0xe706dc(0x22a)),await killBot();else{if(_0x35db5b[_0xe706dc(0x191)]()[_0xe706dc(0x196)](_0xe706dc(0x1b7))&&_0x35db5b[_0xe706dc(0x191)]()['includes'](_0xe706dc(0x27a)))_0x5948f9=_0xa47009+_0xe706dc(0x13e),await pauseBot(undefined,_0x5948f9,_0x35db5b,!![]);else{if(_0x35db5b[_0xe706dc(0x191)]()['includes'](_0xe706dc(0x1b7)))config[_0xe706dc(0x210)]?_0x5948f9=_0xa47009+'\x20API\x20key,\x20secret\x20or\x20password\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange':_0x5948f9=_0xa47009+_0xe706dc(0x220),logHistory('error',_0x5948f9),logHistory(_0xe706dc(0x294),_0xe706dc(0x22a)),await killBot();else{if(_0x35db5b['toString']()[_0xe706dc(0x196)](_0xe706dc(0x1f4)))logHistory(_0xe706dc(0x294),_0xa47009+_0xe706dc(0x14a)),logHistory('error',_0xe706dc(0x22a)),await killBot();else{if(_0x35db5b[_0xe706dc(0x191)]()[_0xe706dc(0x196)](_0xe706dc(0x10a)))logHistory('error','Insufficient\x20funds\x20to\x20execute\x20order:\x20'+_0x5274b2),logger['debug'](_0xe706dc(0x296),_0x35db5b);else{if(_0x35db5b instanceof ccxt[_0xe706dc(0x13f)]){_0x5948f9=_0xa47009+_0xe706dc(0x2b7)+_0x35db5b['toString']();if(_0x5274b2)_0x5948f9+=_0xe706dc(0x2bc)+_0x5274b2;await pauseBot(undefined,_0x5948f9,_0x35db5b);}else{_0x5948f9=_0xe706dc(0x1b4)+_0x35db5b['toString']();if(_0x5274b2)_0x5948f9+=_0xe706dc(0x2bc)+_0x5274b2;await pauseBot(undefined,_0x5948f9);}}}}}}}}}}}}}}}}function decryptRSA(_0x23d059,_0x5406da){const _0x1162fc=_0x233528,_0x3c948d=forge[_0x1162fc(0x124)]['privateKeyFromPem'](_0x23d059),_0x874403=_0x3c948d[_0x1162fc(0x205)](forge['util'][_0x1162fc(0x11b)](_0x5406da),_0x1162fc(0x291),{'md':forge['md'][_0x1162fc(0x105)][_0x1162fc(0x188)](),'mgf1':{'md':forge['md'][_0x1162fc(0x105)][_0x1162fc(0x188)]()}});return _0x874403;}async function withRetry(_0x144025,_0x5c9eb0){const _0x49bafd=_0x233528;let _0x306177=![],_0x3caa14=0x0,_0x2fe588,_0x498b5a;while(_0x3caa14<maxRetries){try{_0x2fe588=await _0x5c9eb0();break;}catch(_0x3fd08b){_0x498b5a=_0x3fd08b,!_0x306177?(_0x306177=!![],logger[_0x49bafd(0x2d0)](_0x49bafd(0x10b)+_0x144025+':',_0x3fd08b[_0x49bafd(0x191)]())):await sleep(retryInterval);}_0x3caa14++;}if(_0x3caa14==0x0)return _0x2fe588;if(_0x3caa14>=maxRetries)throw _0x498b5a;else return logger[_0x49bafd(0x2d0)](_0x49bafd(0x15a)+_0x3caa14+_0x49bafd(0x28b)),_0x2fe588;}function formatResult(_0xf0a06a,_0x252f53){const _0x6d272c=_0x233528;return parseFloat(_0xf0a06a[_0x6d272c(0x242)](_0x252f53));}function formatResultTruncate(_0x1734e5,_0x269512){const _0x4cb0e4=_0x233528;let _0x170a0a=formatResultString(_0x1734e5,0xa),_0x43c573=_0x170a0a[_0x4cb0e4(0x151)]('.');return _0x43c573!=-0x1&&(_0x170a0a=_0x170a0a[_0x4cb0e4(0x247)](0x0,_0x43c573+_0x269512+0x1)),Number(_0x170a0a);}function formatResultString(_0xc01b97,_0x2ab722){const _0xcd217c=_0x233528;let _0x191fa7;if(!(''+_0xc01b97)['includes']('e'))_0x191fa7=+(Math[_0xcd217c(0x2ae)](_0xc01b97+'e+'+_0x2ab722)+'e-'+_0x2ab722);else{let _0x239584=(''+_0xc01b97)[_0xcd217c(0x1c9)]('e'),_0x4fe367='';+_0x239584[0x1]+_0x2ab722>0x0&&(_0x4fe367='+'),_0x191fa7=+(Math[_0xcd217c(0x2ae)](+_0x239584[0x0]+'e'+_0x4fe367+(+_0x239584[0x1]+_0x2ab722))+'e-'+_0x2ab722);}return Number(_0x191fa7)[_0xcd217c(0x242)](_0x2ab722);}function getServerTime(){const _0x537075=_0x233528,_0x164091=new Date();return _0x164091[_0x537075(0x142)]()+'/'+(_0x164091[_0x537075(0x1ff)]()+0x1)[_0x537075(0x191)]()[_0x537075(0x135)](0x2,'0')+'/'+_0x164091[_0x537075(0x1ac)]()[_0x537075(0x191)]()[_0x537075(0x135)](0x2,'0')+'\x20'+_0x164091[_0x537075(0x23e)]()['toString']()[_0x537075(0x135)](0x2,'0')+':'+_0x164091[_0x537075(0x1bb)]()[_0x537075(0x191)]()[_0x537075(0x135)](0x2,'0')+':'+_0x164091[_0x537075(0x183)]()[_0x537075(0x191)]()[_0x537075(0x135)](0x2,'0');}function getTimeStamp(){const _0x3f8d6f=_0x233528,_0x3d621a=shiftedTime();return _0x3d621a[_0x3f8d6f(0x142)]()+'/'+(_0x3d621a['getMonth']()+0x1)[_0x3f8d6f(0x191)]()['padStart'](0x2,'0')+'/'+_0x3d621a[_0x3f8d6f(0x1ac)]()[_0x3f8d6f(0x191)]()[_0x3f8d6f(0x135)](0x2,'0')+'\x20'+_0x3d621a[_0x3f8d6f(0x23e)]()[_0x3f8d6f(0x191)]()[_0x3f8d6f(0x135)](0x2,'0')+':'+_0x3d621a[_0x3f8d6f(0x1bb)]()['toString']()[_0x3f8d6f(0x135)](0x2,'0')+':'+_0x3d621a[_0x3f8d6f(0x183)]()[_0x3f8d6f(0x191)]()['padStart'](0x2,'0');}function getDate(){const _0x1ddc2a=_0x233528,_0x4ad021=shiftedTime();return _0x4ad021[_0x1ddc2a(0x142)]()+'/'+(_0x4ad021[_0x1ddc2a(0x1ff)]()+0x1)[_0x1ddc2a(0x191)]()[_0x1ddc2a(0x135)](0x2,'0')+'/'+_0x4ad021[_0x1ddc2a(0x1ac)]()[_0x1ddc2a(0x191)]()[_0x1ddc2a(0x135)](0x2,'0');}function getHour(){const _0x9c9c6=_0x233528,_0x5c3c95=shiftedTime();return _0x5c3c95[_0x9c9c6(0x23e)]()[_0x9c9c6(0x191)]()[_0x9c9c6(0x135)](0x2,'0');}function sleep(_0x1fa200){return new Promise(_0x1fe4bf=>setTimeout(_0x1fe4bf,_0x1fa200));}function shiftedTime(){const _0x27c5e=_0x233528,_0x1c7bad=new Date();let _0x33579f=_0x1c7bad;if(config&&config[_0x27c5e(0x144)]!==0x0)_0x33579f=fns[_0x27c5e(0x1ed)](_0x1c7bad,{'hours':config[_0x27c5e(0x144)]});return _0x33579f;}function timer(_0x2d562b){const _0x3f9150=_0x233528,_0x159c08=new Date();!lasttime?console['log'](getTimeStamp()+_0x3f9150(0x138),_0x2d562b,_0x159c08):console[_0x3f9150(0x216)](getTimeStamp()+_0x3f9150(0x138),_0x2d562b,(_0x159c08-lasttime)/0x3e8),lasttime=_0x159c08;}