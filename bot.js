const _0x2ffdd8=_0x5fdf;(function(_0x35df9a,_0x29abc3){const _0x2bd9d5=_0x5fdf,_0x42f46b=_0x35df9a();while(!![]){try{const _0x3283bb=parseInt(_0x2bd9d5(0x10f))/0x1+-parseInt(_0x2bd9d5(0x258))/0x2+parseInt(_0x2bd9d5(0xe1))/0x3+-parseInt(_0x2bd9d5(0x245))/0x4*(parseInt(_0x2bd9d5(0x111))/0x5)+parseInt(_0x2bd9d5(0xb4))/0x6*(parseInt(_0x2bd9d5(0x12a))/0x7)+-parseInt(_0x2bd9d5(0x15a))/0x8+parseInt(_0x2bd9d5(0x21d))/0x9;if(_0x3283bb===_0x29abc3)break;else _0x42f46b['push'](_0x42f46b['shift']());}catch(_0x396a4d){_0x42f46b['push'](_0x42f46b['shift']());}}}(_0x2410,0xb6f0e));const _0x407d92=function(){let _0x33f1e6=!![];return function(_0x3712fe,_0x4ea803){const _0x208e3a=_0x33f1e6?function(){const _0xbdb5d6=_0x5fdf;if(_0x4ea803){const _0x53d418=_0x4ea803[_0xbdb5d6(0xc0)](_0x3712fe,arguments);return _0x4ea803=null,_0x53d418;}}:function(){};return _0x33f1e6=![],_0x208e3a;};}(),_0x254b98=_0x407d92(this,function(){const _0x47c913=_0x5fdf;return _0x254b98[_0x47c913(0x1f2)]()[_0x47c913(0x1dd)](_0x47c913(0x122))['toString']()[_0x47c913(0x16b)](_0x254b98)[_0x47c913(0x1dd)](_0x47c913(0x122));});_0x254b98();'use strict';const ccxt=require(_0x2ffdd8(0x11d)),low=require(_0x2ffdd8(0x23b)),FileSync=require(_0x2ffdd8(0x1af)),fs=require('fs'),fns=require('date-fns'),forge=require(_0x2ffdd8(0x1a1)),util=require(_0x2ffdd8(0x158)),argv=require(_0x2ffdd8(0x262))(process[_0x2ffdd8(0x17f)]['slice'](0x2))[_0x2ffdd8(0x17f)],path=require(_0x2ffdd8(0x189)),axios=require('axios');let exchange,gTicker={},gChange={};const usdBasecoins=[_0x2ffdd8(0x182),'BUSD','TUSD','USDT',_0x2ffdd8(0x12b),_0x2ffdd8(0x27b)],excludedExchanges=[_0x2ffdd8(0xc7)],debugging=argv['d']||![];let pnlGenerationNeeded=argv['r']||![],config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x2ffdd8(0x125)]({'LOCKED':0x0,'UNLOCKING':0x1,'UNLOCKED':0x2});let lockOrders=ORDERS[_0x2ffdd8(0x209)],validateOrdersState,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotIntervalShort=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0x2ffdd8(0x1ae)+pauseBotInterval/0xea60+_0x2ffdd8(0xfa),maxPauseRetries=0x6,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,watchTransactionsInterval=0x3c*0x3e8,schedulerInterval=0x3c*0x3c*0x3e8,retryInterval=0x3e8,maxRetries=0x5,logPageSize=0x14,defaultFee=0.003;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidOrdersInitialTimeout,pidOrdersTimeout,botPaused=![],transactionDetectionOngoing=![],lastCoinsToBalance='',insufficientFundsWarningSent=[],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;function _0x2410(){const _0x1562e6=[')\x20unknown\x20order:\x20','total','headless','target','Saving\x20configuration','RateLimitExceeded','UNLOCKED','differenceInSeconds','sqrt','existsSync','sortBy','exchange\x20reload','\x20-\x20bot\x20not\x20started','entries','bot','cost','Test\x20new\x20API','random','colorscheme','exchange','\x20>\x20','restart','Invalid\x20symbol:\x20','Waited\x20','parse','watchTrades','6513129xGUYCZ','\x20blocked\x20API\x20(DDoSProtection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','\x20-\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','openOrders','options','log','\x20network\x20error:\x20','marketcap','\x20hour','startdate','limits','length','</pre>','sell','no\x20exchange\x20reloaded','Valid\x20balance\x20for\x20','Resetting\x20bot\x20history','Value\x20','added','event','highest','EUR','add','ask','Updating\x20API\x20key\x20(not\x20saved\x20in\x20config\x20file\x20yet)','secret','apiPassword','coin','Market','apiKey','lowdb','\x20>\x20[DEBUG]\x20','Error\x20details:\x20','offset','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','find','Exchange\x20permission\x20denied\x20-\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','MIN_NOTIONAL','botID','loadMarkets','34928WUSqlF','ExchangeError','getMinutes','active','Loaded\x20','/USD','closed','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','basecoin','Trigger:\x20','round','secure','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','must\x20be\x20greater\x20than\x20minimum\x20amount','\x20not\x20responding\x20(see:\x20hodlerhacks.com/fix/5)','buy','2\x20-\x20Handled\x20open\x20orders','cooldown','getMonth','2297332UcsRDf','eur','symbol','detectLiquidityChange()','performance','InsufficientFunds','getTime','filled','isBefore','marketcapEnabled','yargs/yargs','floor','Insufficient\x20funds\x20to\x20execute\x20order:\x20','basecoinvalue','version','bid','fee','Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute','Manual\x20balancing\x20required','kill','watchOrders','findIndex','API-key\x20format\x20invalid','enabled','\x20attempts','./config/','unlinkSync','Bybit','USDT','\x20due\x20to\x20offset','***','apiSecret','fetchTickers()','RSA-OAEP','market','USDP','Initiating\x20bot\x20restart','fetchBalance','has','\x20has\x20a\x2024h\x20drop\x20of\x20','<pre>','realizedPnL','complete','Cex','substring','Error\x20while\x20deleting\x20files:\x20','enableFiatToggle','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20trying\x20again\x20in\x20','Invalid\x20balance\x20for\x20','fetchTickers','heapUsed','deleteHistoryAlerts','OrderNotFound','changes','portfolio2','AuthenticationError','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','balancing\x20resumed','padEnd','bot-','./version.json','error','shift','Portfolio\x20change\x20detected:\x20','cancel','data','bitvavo','7111008MxFxao','keys','Error\x20details:','buys','\x20not\x20available\x20(see:\x20hodlerhacks.com/fix/5)','limit-high','date','timestamp','Limit\x20(low-margin)','yyyy/MM/dd','startprice','\x20|\x20lock\x20orders:\x20','apply','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','ExchangeNotAvailable','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','assign','configuration-stored','\x0aSymbol(s):\x20','bitmex',':\x20Bot\x20','Reset\x20|\x20','Initializing\x20exchange:\x20already\x20done','/USDC','Portfolio\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','portfolio1','botname','storeHeadless','breakeven','getDate','\x20(see:\x20hodlerhacks.com/fix/1)','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','request-time','cancelLoading','decode64','getHours','sells','Pausing\x20for\x20','1\x20-\x20Validate\x20orders:\x20','\x20portfolio:</b>\x20\x0a\x0a','marketcapApi','slider','Order\x20filled','Failed\x20to\x20connect\x20to\x20the\x20exchange\x20-\x20bot\x20not\x20started','-events.json','4232247XDEHHL','initial','sha256','1\x20-\x20FILLED\x20unknown\x20order:\x20','PermissionDenied','\x20rejected\x20your\x20API\x20request\x20(see:\x20hodlerhacks.com/fix/4)','Cooldown\x20ended\x20-\x20balancing\x20resumed','Unfilled\x20order(s)\x20could\x20not\x20be\x20canceled\x20after\x20','running','red_yellow_blue','\x20>\x20details:','Resetting\x20coin\x20results:\x20','watchTrades()','net','uncaughtException','slice','environment','configstate','push','resetHistory','threshold','Loading\x20completed','\x20API\x20secret\x20is\x20invalid','Bot\x20','ETH','\x20minutes','-------------------------------\x0a','Huobipro','startnumber','open','\x20-\x20go\x20back\x20and\x20try\x20again',',\x20must\x20be\x20a\x203\x20digit\x20number','onepagemode','RETRY\x20-\x20Problem\x20resolved\x20after\x20','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','Executed\x20','PAXG','BTC','<b>','LOCKED','Bitget','average','Error\x20occurred:\x20','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','starting-balances','watchTradesForSymbols','1227239VlPwqU','price','775ekdFrd','fetchTicker','limit','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','createWriteStream','CoinMarketCap\x20data\x20could\x20not\x20be\x20updated\x20-\x20will\x20try\x20again\x20in\x201\x20hour','\x20metrics:</b>\x20\x0a\x0a','abs','percentage','ID:\x20','Order\x20is\x20invalid:\x20','memoryUsage','ccxt','RETRY\x20-\x20Error\x20in\x20','code','2.6.23','match','(((.+)+)+)+$','api-issue','change','freeze','update-liquidity','valid','cancelOrder','./logs/','7eKjlKg','USDC','send','amountToPrecision','min','filter','event-history','quote','delta','value','No\x20more\x20open\x20orders\x20-\x20','none','replace','sort','Invalid\x20API\x20details,\x20please\x20try\x20again\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','join','progress','addDays','RequestTimeout','orderstatus','\x20uses\x20','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','isEqual','InvalidNonce','type','Failed\x20to\x20load\x20market\x20data\x20-\x20bot\x20not\x20started','net-basecoin','Network\x20error\x20details:','Headless:\x20','coins','timestamp-issue','change24h','remainingSymbols','decrypt','getFullYear','Unfilled\x20order(s)\x20canceled\x20after\x20','side','setSandboxMode','get','canceled','switch-manual','cloneDeep','Cryptocom','InvalidOrder','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','2.6.0','util','includes','10363080hzedoA','full','operatorId','Will\x20continue\x20to\x20wait\x20for\x20order(s)\x20to\x20be\x20filled\x20and\x20try\x20to\x20cancel\x20again\x20later','\x20API\x20key\x20is\x20invalid','fromCodePoint','1\x20-\x20partially\x20FILLED\x20(','padStart','orderId','<b>Bot\x20','ongoing','page','toUpperCase','placeOrder()','watchTradesForSymbols()','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','Error:\x20Invalid\x20argument\x20','constructor','storeFiat','sendPortfolioTelegram','password','Generating\x20PnL\x20data','last','Resuming\x20(','indexOf','fetchBalance()','liquidity','PnL\x20','map','\x20minutes\x20-\x20','%)\x0a','configuration','ordertype','number','\x20order:\x20','Generated\x20PnL\x20data','forEach','argv','balances','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','USD','amount','Net\x20','Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)','sandbox','splice','set','path','2.6.22','bb-secure.json','mkdirSync','status','split','toLowerCase','Unknown\x20error\x20-\x20check\x20logs','\x20symbols','remove','showConfig','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','function','Order\x20amount\x20is\x20invalid:\x20','loadSymbols()','token\x20is\x20expired','process\x20','fetchOpenOrders','-performance.json','usd','pnl','\x20|\x20Custom\x20ID:\x20','getPortfolio','Initializing\x20coin\x20results','node-forge','staging','autoliquidity','settings',')\x20known\x20order:\x20','testAPI()','customId','time','2.3.5','Unknown\x20error:\x20','net-fiat','.json','NetworkError','\x20>\x20pausing\x20bot\x20for\x20','lowdb/adapters/FileSync','portfolio','stringify','-config.json','Insufficient\x20funds\x20to\x20place\x20order\x20for\x20','emojibuy','Set\x20lock\x20orders\x20to:\x20','createOrder','distribution','recreate','removed','getOpenOrders()','2\x20-\x20handling\x20FILLED\x20order:\x20','max','timeshift','\x20|\x20','warning','\x20API\x20key,\x20secret\x20or\x20password\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','trade','\x20orders\x20in\x20less\x20than\x20','/EUR','market_cap','showname','emojisell','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)','Order\x20filled:\x20','stack','privateKey','************','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20for\x20','Error\x20in\x20loadSymbols():\x20','spot','fiat','success','recent20','prevnumber','coin-loading-progress','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','pki','placeOrder','final','Error\x20in\x20testNewAPI():\x20','\x20MB','test','search','no\x20open\x20orders','format','self_reported_market_cap','storeConfiguration','UNLOCKING','currency','\x20/\x20','logs','reverse','debug','excluded','write','1\x20-\x20Handle\x20open\x20orders','marketcapsqrt','Exception\x20thrown\x20in\x20','quick',':\x20timer\x20>','toFixed','\x20closed\x20the\x20connection\x20(see:\x20hodlerhacks.com/fix/5)','timeout','toString','defaults','bots','pro','Invalid\x20quantity','testApi','create','args','string','exchanges','Placing\x20order\x20for:\x20','watchOrders()','Fee\x20discount\x20refund\x20detected:\x20','pop','order','getSeconds','-results.json'];_0x2410=function(){return _0x1562e6;};return _0x2410();}const balanceUpdateDelay=0x5dc,balanceUpdateRetries=0x5;let enableFiatToggle;const serverversion=require('./version.json')[_0x2ffdd8(0x266)],environment=require(_0x2ffdd8(0x294))[_0x2ffdd8(0xf1)]||'production',botID=process['argv'][0x2]||'001',pattern=/^[0-9]{3}$/;!pattern[_0x2ffdd8(0x1dc)](botID)&&(console[_0x2ffdd8(0x222)](_0x2ffdd8(0x16a)+botID+_0x2ffdd8(0x100)),killBot());const userID=process[_0x2ffdd8(0x17f)][0x3]||'',configpath=userID?_0x2ffdd8(0x271)+userID+'/':'./config/',logspath=userID?_0x2ffdd8(0x129)+userID+'/':_0x2ffdd8(0x129),loggerfile=fs[_0x2ffdd8(0x115)](logspath+'/output-000.log',{'flags':'a'});!fs['existsSync'](configpath)&&fs['mkdirSync'](configpath);!fs[_0x2ffdd8(0x20c)](logspath)&&fs[_0x2ffdd8(0x18c)](logspath);const configfile=configpath+'bot-'+botID+_0x2ffdd8(0x1b2),logfile=configpath+_0x2ffdd8(0x293)+botID+_0x2ffdd8(0xe0),performancefile=configpath+'bot-'+botID+'-performance.json',coinresultsfile=configpath+_0x2ffdd8(0x293)+botID+'-results.json',settingsfile=configpath+'bb-settings.json',securefile=configpath+_0x2ffdd8(0x18b),configbackuppath=configpath+'/backup/',adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs['defaults']({'logs':[],'version':serverversion})[_0x2ffdd8(0x1e9)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x2ffdd8(0x1f3)]({'data':[],'version':serverversion})[_0x2ffdd8(0x1e9)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x2ffdd8(0x1f3)]({'bot':[],'version':serverversion})[_0x2ffdd8(0x1e9)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x2ffdd8(0x1f3)]({'coins':{},'version':serverversion})[_0x2ffdd8(0x1e9)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const operatorId=0x200f1;let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x361aca=>{const _0x4a3d8d=_0x2ffdd8;console[_0x4a3d8d(0x222)](_0x361aca);},'simple':_0x541a1a=>{const _0x39e0c9=_0x2ffdd8;console[_0x39e0c9(0x222)](_0x541a1a),loggerfile[_0x39e0c9(0x1e9)](util[_0x39e0c9(0x1df)](_0x541a1a)+'\x0a');},'full':async(_0x4e5ace,_0x9dd3aa='')=>{const _0x1dcbc1=_0x2ffdd8;let _0x5279ca;if(config['showname'])_0x5279ca=getTimeStamp()+':\x20'+config[_0x1dcbc1(0xce)]+'\x20>\x20'+_0x4e5ace;else _0x5279ca=getTimeStamp()+_0x1dcbc1(0xc8)+botID+_0x1dcbc1(0x217)+_0x4e5ace;console['log'](_0x5279ca),loggerfile[_0x1dcbc1(0x1e9)](util[_0x1dcbc1(0x1df)](_0x5279ca)+'\x0a'),_0x9dd3aa&&(console['log'](_0x9dd3aa),loggerfile[_0x1dcbc1(0x1e9)](util[_0x1dcbc1(0x1df)](_0x9dd3aa)+'\x0a'));},'debug':async(_0x1bd64c,_0x465828='')=>{const _0x2a5b65=_0x2ffdd8;let _0x408962;if(config[_0x2a5b65(0x1c6)])_0x408962=getTimeStamp()+':\x20'+config[_0x2a5b65(0xce)]+_0x2a5b65(0x23c)+_0x1bd64c;else _0x408962=getTimeStamp()+_0x2a5b65(0xc8)+botID+'\x20>\x20[DEBUG]\x20'+_0x1bd64c;if(debugging)console[_0x2a5b65(0x222)](_0x408962);loggerfile[_0x2a5b65(0x1e9)](util[_0x2a5b65(0x1df)](_0x408962)+'\x0a');if(_0x465828){if(debugging)console[_0x2a5b65(0x222)](_0x465828);loggerfile['write'](util[_0x2a5b65(0x1df)](_0x465828)+'\x0a');}}};process['on']('uncaughtException',function(_0x1472c1){const _0x53aacd=_0x2ffdd8;handleError(_0x1472c1[_0x53aacd(0x1ca)],_0x53aacd(0xef));});settings[_0x2ffdd8(0x1bd)]!=config[_0x2ffdd8(0x1bd)]&&updateTimeshift(settings[_0x2ffdd8(0x1bd)]);settings['onepagemode']!=config['onepagemode']&&updateOnepagemode(settings['onepagemode']);(settings['marketcapApi']&&!config[_0x2ffdd8(0xdc)]||!settings[_0x2ffdd8(0xdc)]&&config[_0x2ffdd8(0xdc)])&&updateMarketcapApi(settings[_0x2ffdd8(0xdc)]);process[_0x2ffdd8(0x12c)]({'started':_0x2ffdd8(0xe9)},_0x362910=>{}),initializeProcessListeners();function proxyEmit(_0x395e56,_0x25bb21=null){const _0x27a0de=_0x2ffdd8;process[_0x27a0de(0x12c)]({'function':_0x395e56,'args':_0x25bb21},_0x402185=>{});}function initializeProcessListeners(){process['on']('message',_0x2f52f4=>{const _0x5adbdc=_0x5fdf;switch(Object[_0x5adbdc(0xb5)](_0x2f52f4)[0x0]){case _0x5adbdc(0x1bd):_0x2f52f4[_0x5adbdc(0x1bd)]!=undefined&&(settings[_0x5adbdc(0x1bd)]=_0x2f52f4[_0x5adbdc(0x1bd)],updateTimeshift(settings['timeshift']));break;case _0x5adbdc(0x101):_0x2f52f4[_0x5adbdc(0x101)]!=undefined&&(settings[_0x5adbdc(0x101)]=_0x2f52f4[_0x5adbdc(0x101)],updateOnepagemode(settings[_0x5adbdc(0x101)]));break;case _0x5adbdc(0xdc):_0x2f52f4['marketcapApi']!=undefined&&(settings[_0x5adbdc(0xdc)]=_0x2f52f4[_0x5adbdc(0xdc)],updateMarketcapApi(settings[_0x5adbdc(0xdc)]));break;case _0x5adbdc(0x1f4):_0x2f52f4['bots']!=undefined&&(bots=JSON[_0x5adbdc(0x21b)](_0x2f52f4[_0x5adbdc(0x1f4)]),proxyEmit(_0x5adbdc(0x1f4),bots));break;case'function':switch(_0x2f52f4[_0x5adbdc(0x195)]){case'initclient':initclient();break;case'toggleBotMode':toggleBotMode();break;case'emitHistory':emitHistory(_0x2f52f4[_0x5adbdc(0x1f9)]);break;case _0x5adbdc(0x28b):deleteHistoryAlerts(_0x2f52f4[_0x5adbdc(0x1f9)]);break;case _0x5adbdc(0x19f):getPortfolio(_0x2f52f4[_0x5adbdc(0x1f9)]);break;case _0x5adbdc(0x1e1):storeConfiguration(_0x2f52f4[_0x5adbdc(0x1f9)]);break;case _0x5adbdc(0xcf):storeHeadless(_0x2f52f4[_0x5adbdc(0x1f9)]);break;case _0x5adbdc(0x16c):storeFiat(_0x2f52f4['args']);break;case _0x5adbdc(0xf4):resetHistory();break;case'getStartingBalances':getStartingBalances(getNormalizedPerformance());break;case _0x5adbdc(0x1d8):placeOrder(_0x2f52f4[_0x5adbdc(0x1f9)]);break;case _0x5adbdc(0xd5):cancelLoading();break;case _0x5adbdc(0x193):showConfig();break;case'sendMetricsTelegram':sendMetricsTelegram();break;case _0x5adbdc(0x16d):sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x37d2d8=![]){const _0x2e03ac=_0x2ffdd8;logger[_0x2e03ac(0x1e7)](_0x2e03ac(0xc9)+(_0x37d2d8?_0x2e03ac(0x20e):_0x2e03ac(0x22b))+'\x20|\x20exchange:\x20'+config[_0x2e03ac(0x216)]);if(pidBalances)clearTimeout(pidBalances);lastCoinsToBalance='',insufficientFundsWarningSent=[],coinsLoaded=![];if(config[_0x2e03ac(0x23a)]!=''&&config[_0x2e03ac(0x23a)]!='***'){loadingProgress=0x0;if(_0x37d2d8){await initExchange();const _0x29a2cb=await testAPI();if(!_0x29a2cb)return;await loadSymbols(),loadingProgress=0x1,setStableCoins(),proxyEmit(_0x2e03ac(0x179),emittedConfiguration()),initialPerformanceStored=![];}const _0x1ff22b=await getCoins();[currentCoins,currentCoinsAll]=_0x1ff22b,setBlockTransactionDetection(![]),startScheduler(),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x2e03ac(0x1e7)]('Loading\x20completed'),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x2e03ac(0x228)]==0x0&&allOpenOrders[_0x2e03ac(0x228)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(pnlGenerationNeeded)await generatePnL();}}async function resumeBot(_0x161109=![]){const _0x37242d=_0x2ffdd8;logger[_0x37242d(0x1e7)](_0x37242d(0x171)+(_0x161109?_0x37242d(0x1ed):_0x37242d(0x282))+')\x20|\x20exchange:\x20'+config[_0x37242d(0x216)]);if(pidBalances)clearTimeout(pidBalances);if(_0x161109){getBalances();return;}coinsLoaded=![];if(config[_0x37242d(0x23a)]!=''&&config[_0x37242d(0x23a)]!=_0x37242d(0x276)){loadingProgress=0x1;const _0x1fbd89=await getCoins();[currentCoins,currentCoinsAll]=_0x1fbd89,setBlockTransactionDetection(![]),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x37242d(0x1e7)](_0x37242d(0xf6)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x37242d(0x228)]==0x0&&allOpenOrders[_0x37242d(0x228)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();}}async function getMarketCap(_0x234e4b){const _0x75582f=_0x2ffdd8;let _0x2bfc0e=![];if(_0x234e4b)_0x2bfc0e=!![];const _0x4ba43f=_0x2bfc0e?_0x234e4b:currentCoins,_0x9ff32d=_0x4ba43f[_0x75582f(0x176)](_0x142b60=>_0x142b60[_0x75582f(0x238)]);if(!config[_0x75582f(0xdc)]||!_0x2bfc0e&&!config[_0x75582f(0x261)]||_0x9ff32d[_0x75582f(0x228)]==0x0)return;let _0x4e7829=null;try{_0x4e7829=await axios[_0x75582f(0x150)](_0x75582f(0x103),{'headers':{'X-CMC_PRO_API_KEY':settings[_0x75582f(0xdc)]},'params':{'symbol':_0x9ff32d[_0x75582f(0x1f2)]()}});}catch(_0x1230ed){_0x4e7829=null,_0x1230ed['toString']()['includes']('status\x20code\x20401')?(config[_0x75582f(0xdc)]=![],updateConfig(),proxyEmit(_0x75582f(0x179),emittedConfiguration()),logHistory(_0x75582f(0x295),_0x75582f(0x1cd))):(logHistory('error',_0x75582f(0x287)+schedulerInterval/(0x3c*0x3e8)+_0x75582f(0xfa)),logger[_0x75582f(0x1e7)](_0x75582f(0xb6),_0x1230ed[_0x75582f(0x1f2)]()+'\x20-\x20'+_0x1230ed[_0x75582f(0x11f)]));}const _0x15b67d=new Map();let _0x3ef5f7=!![];if(_0x4e7829){let _0x4bf6cb=0x0;const _0x385e5d=_0x4e7829[_0x75582f(0x299)];_0x9ff32d[_0x75582f(0x17e)](_0x462bde=>{const _0x34fcd2=_0x75582f;if(_0x385e5d[_0x34fcd2(0x299)][_0x462bde][0x0]&&_0x385e5d[_0x34fcd2(0x299)][_0x462bde][0x0]['quote'][_0x34fcd2(0x182)][_0x34fcd2(0x1c5)])_0x15b67d[_0x34fcd2(0x188)](_0x462bde,_0x385e5d[_0x34fcd2(0x299)][_0x462bde][0x0][_0x34fcd2(0x131)][_0x34fcd2(0x182)][_0x34fcd2(0x1c5)]),_0x4bf6cb+=_0x385e5d[_0x34fcd2(0x299)][_0x462bde][0x0][_0x34fcd2(0x131)]['USD'][_0x34fcd2(0x1c5)];else{if(_0x385e5d[_0x34fcd2(0x299)][_0x462bde][0x0]&&_0x385e5d['data'][_0x462bde][0x0][_0x34fcd2(0x1e0)])_0x15b67d[_0x34fcd2(0x188)](_0x462bde,_0x385e5d['data'][_0x462bde][0x0][_0x34fcd2(0x1e0)]),_0x4bf6cb+=_0x385e5d[_0x34fcd2(0x299)][_0x462bde][0x0][_0x34fcd2(0x1e0)];else{if(![_0x34fcd2(0x232),_0x34fcd2(0x182)][_0x34fcd2(0x159)](_0x462bde)){if(_0x2bfc0e)logHistory(_0x34fcd2(0x295),_0x34fcd2(0x1ce)+_0x462bde+_0x34fcd2(0xff));else{const _0x5d3be1=config[_0x34fcd2(0x1b0)][_0x34fcd2(0x240)](_0x17e9ea=>_0x17e9ea['coin']==_0x462bde);_0x5d3be1&&!_0x5d3be1[_0x34fcd2(0x1e8)]&&_0x5d3be1[_0x34fcd2(0xdd)]==-0x1&&(_0x3ef5f7=![],logHistory('error',_0x34fcd2(0x116)),logger[_0x34fcd2(0x1e7)](_0x34fcd2(0x1ce)+_0x462bde));}}}}});if(!_0x3ef5f7)return;_0x9ff32d[_0x75582f(0x17e)](_0x1d802c=>{const _0x8eae32=_0x75582f,_0x43fb47=_0x15b67d[_0x8eae32(0x150)](_0x1d802c)?_0x15b67d[_0x8eae32(0x150)](_0x1d802c):0x0;if(_0x2bfc0e){const _0x2ee697=_0x234e4b[_0x8eae32(0x240)](_0x439c18=>_0x439c18['coin']==_0x1d802c);_0x2ee697&&(_0x2ee697[_0x8eae32(0x224)]=_0x43fb47);}else{const _0x30a684=currentCoins[_0x8eae32(0x240)](_0x2d421f=>_0x2d421f['coin']==_0x1d802c);_0x30a684&&(_0x30a684[_0x8eae32(0x224)]=_0x43fb47);const _0x2a1784=currentCoinsAll[_0x8eae32(0x240)](_0x398e0a=>_0x398e0a[_0x8eae32(0x238)]==_0x1d802c);_0x2a1784&&(_0x2a1784[_0x8eae32(0x224)]=_0x43fb47);}}),!_0x2bfc0e&&updateTargetDistribution();}}function updateTargetDistribution(){const _0x8d5b82=_0x2ffdd8,_0xabaea9=0x2;let _0x1086d6=0x0,_0x26aed8=0x0,_0x3bf23b=0x0,_0x11a10f=0x0,_0x260c92=0x0;config['portfolio'][_0x8d5b82(0x17e)](_0x444803=>{const _0x4982ca=_0x8d5b82;if(!_0x444803[_0x4982ca(0x1e8)]){_0x3bf23b++,_0x1086d6+=_0x444803[_0x4982ca(0xdd)];if(_0x444803[_0x4982ca(0xdd)]===-0x1){_0x1086d6++;const _0x4fd17e=currentCoinsAll[_0x4982ca(0x240)](_0x35df76=>_0x35df76[_0x4982ca(0x238)]==_0x444803[_0x4982ca(0x238)]);_0x4fd17e&&(_0x11a10f+=_0x4fd17e[_0x4982ca(0x224)],_0x260c92+=Math[_0x4982ca(0x20b)](_0x4fd17e[_0x4982ca(0x224)]));}if(_0x444803[_0x4982ca(0xdd)]!==-0x1)_0x26aed8++;}});let _0xfb24be;const _0x1330bf=0x64-_0x1086d6,_0x37e7cd=_0x3bf23b-_0x26aed8;_0xfb24be=_0x37e7cd===0x0?_0x1086d6:Math[_0x8d5b82(0x1bc)](0x64,_0x1086d6),config['portfolio'][_0x8d5b82(0x17e)](_0x1bcd0a=>{const _0x38ffb8=_0x8d5b82,_0x36dc28=currentCoinsAll[_0x38ffb8(0x240)](_0x1ebadc=>_0x1ebadc[_0x38ffb8(0x238)]==_0x1bcd0a[_0x38ffb8(0x238)]);_0x36dc28&&(_0x1bcd0a[_0x38ffb8(0x224)]=_0x36dc28[_0x38ffb8(0x224)]);if(!_0x1bcd0a[_0x38ffb8(0x1e8)]){if(_0xfb24be<=0x64){if(_0x1bcd0a[_0x38ffb8(0xdd)]===-0x1){if(_0x11a10f!==0x0&&config[_0x38ffb8(0x261)]){if(_0x36dc28){if(config[_0x38ffb8(0x261)]==_0x38ffb8(0x224))_0x1bcd0a[_0x38ffb8(0x1b7)]=(_0x1330bf/(_0x11a10f/_0x36dc28[_0x38ffb8(0x224)]))['toFixed'](_0xabaea9);else config[_0x38ffb8(0x261)]==_0x38ffb8(0x1eb)&&(_0x1bcd0a[_0x38ffb8(0x1b7)]=(_0x1330bf/(_0x260c92/Math[_0x38ffb8(0x20b)](_0x36dc28[_0x38ffb8(0x224)])))[_0x38ffb8(0x1ef)](_0xabaea9));}}}}}}),updateConfig();}function updateConfig(){const _0x95e9d0=_0x2ffdd8;let _0x4e31b8=dbConfig[_0x95e9d0(0x150)]('bot')[_0x95e9d0(0x240)]({'botID':botID})[_0x95e9d0(0x133)]();_0x4e31b8&&dbConfig[_0x95e9d0(0x150)](_0x95e9d0(0x211))['find']({'botID':botID})[_0x95e9d0(0xc4)](config)[_0x95e9d0(0x1e9)]();}function logMemory(){const _0x3dcf0b=_0x2ffdd8;if(environment!=_0x3dcf0b(0x1a2))return;const _0x487fc8=process[_0x3dcf0b(0x11c)]()[_0x3dcf0b(0x28a)]/0x400/0x400;logger['debug'](_0x3dcf0b(0x199)+process['pid']+_0x3dcf0b(0x13e)+formatResult(_0x487fc8,0x1)+_0x3dcf0b(0x1db));}async function startScheduler(){const _0x530be3=_0x2ffdd8,_0x2746d9=shiftedTime()[_0x530be3(0xd7)]();getMarketCap(),loadSymbols(),_0x2746d9==0x1&&logMemory(),await sleep(schedulerInterval),startScheduler();}async function restartBot(_0x2c2076=![]){const _0x4f4509=_0x2ffdd8;logger['debug'](_0x4f4509(0x27c));if(!_0x2c2076)while(lockOrders!=ORDERS['UNLOCKED']||coolingDown){await sleep(0x3e8);}process['send']({'stop':_0x4f4509(0x218)},_0xdc051b=>{});}async function initExchange(_0x252f89=config[_0x2ffdd8(0x216)],_0x20a458=config[_0x2ffdd8(0x23a)],_0x11848c=config[_0x2ffdd8(0x277)],_0x5d3159=config[_0x2ffdd8(0x237)],_0x3afce5=config[_0x2ffdd8(0x186)]){const _0x5bcc3d=_0x2ffdd8;if(exchange){logger[_0x5bcc3d(0x1e7)](_0x5bcc3d(0xca));return;}logger[_0x5bcc3d(0x1e7)]('Initializing\x20exchange');!supportedExchanges()[_0x5bcc3d(0x159)](_0x252f89)&&(logHistory(_0x5bcc3d(0x295),_0x5bcc3d(0x290)+_0x252f89+'\x20exchange'),killBot());const _0xb68204=ccxt[_0x5bcc3d(0x1f5)][_0x252f89[_0x5bcc3d(0x18f)]()];exchange=new _0xb68204({'apiKey':_0x20a458,'secret':_0x11848c,'options':{'defaultType':_0x5bcc3d(0x1d0)}});if(_0x5d3159)exchange[_0x5bcc3d(0x16e)]=_0x5d3159;if(exchange[_0x5bcc3d(0x27e)][_0x5bcc3d(0x186)])exchange[_0x5bcc3d(0x14f)](_0x3afce5);if(_0x252f89['toLowerCase']()=='bitvavo')exchange[_0x5bcc3d(0x221)]['operatorId']=operatorId;}function updateExchange(_0x414a9e,_0x495942,_0x4dbfc9=null){const _0x2d7232=_0x2ffdd8;exchange[_0x2d7232(0x23a)]=_0x414a9e,exchange[_0x2d7232(0x236)]=_0x495942,exchange[_0x2d7232(0x16e)]=_0x4dbfc9,logger[_0x2d7232(0x1e7)](_0x2d7232(0x235));}function setStableCoins(){const _0x2d95f8=_0x2ffdd8;let _0x2c4679=config['basecoin']==_0x2d95f8(0xf9)?_0x2d95f8(0xf9):config[_0x2d95f8(0x24d)]==_0x2d95f8(0x105)?'PAXG':_0x2d95f8(0x106),_0x3d282d=allSymbols[_0x2d95f8(0x159)](_0x2c4679+_0x2d95f8(0x24a))?_0x2d95f8(0x182):allSymbols[_0x2d95f8(0x159)](_0x2c4679+'/USDT')?_0x2d95f8(0x274):allSymbols['includes'](_0x2c4679+_0x2d95f8(0xcb))?_0x2d95f8(0x12b):_0x2d95f8(0x232),_0x34da75=allSymbols['includes'](_0x2c4679+_0x2d95f8(0x1c4))?_0x2d95f8(0x232):_0x3d282d;enableFiatToggle=!![],_0x3d282d==_0x2d95f8(0x232)&&(enableFiatToggle=![],storeFiat(_0x2d95f8(0x232))),_0x34da75!=_0x2d95f8(0x232)&&(enableFiatToggle=![],storeFiat(_0x2d95f8(0x182))),stablecoins={'eur':{'coin':''+_0x2c4679+_0x34da75,'symbol':_0x2c4679+'/'+_0x34da75},'usd':{'coin':''+_0x2c4679+_0x3d282d,'symbol':_0x2c4679+'/'+_0x3d282d}};}async function initwsCcxt(){const _0x4080c4=_0x2ffdd8;initCycle++;const _0x4b78ea=initCycle;let _0x44eca0=[];config[_0x4080c4(0x1b0)][_0x4080c4(0x17e)](_0x186c0b=>{const _0x1299f0=_0x4080c4;if(!_0x186c0b[_0x1299f0(0x1e8)]&&_0x186c0b[_0x1299f0(0x238)]!=config[_0x1299f0(0x24d)])_0x44eca0['push'](_0x186c0b[_0x1299f0(0x25a)]);});if(!_0x44eca0[_0x4080c4(0x159)](stablecoins[_0x4080c4(0x259)][_0x4080c4(0x25a)]))_0x44eca0[_0x4080c4(0xf3)](stablecoins[_0x4080c4(0x259)][_0x4080c4(0x25a)]);if(!_0x44eca0['includes'](stablecoins[_0x4080c4(0x19c)]['symbol']))_0x44eca0['push'](stablecoins['usd'][_0x4080c4(0x25a)]);loadCoins(_0x44eca0),_0x44eca0=validateSymbols(_0x44eca0);const _0x45db71=async _0x52a89f=>{const _0x3db45e=_0x4080c4;let _0x21e262;try{const _0x4ea695=await getTickers(_0x52a89f);Object[_0x3db45e(0x210)](_0x4ea695)[_0x3db45e(0x17e)](_0x36cd40=>{const _0x3d48cb=_0x3db45e;_0x21e262=_0x36cd40[0x1][_0x3d48cb(0x25a)],gTicker[noslash(_0x21e262)]=_0x36cd40[0x1][_0x3d48cb(0x170)],gChange[_0x21e262]=_0x36cd40[0x1][_0x3d48cb(0x119)];});}catch(_0x561c93){await handleError(_0x561c93,'initTickers()',_0x21e262);}},_0x27074c=async _0x1727e8=>{const _0x3ddefb=_0x4080c4;while(initCycle==_0x4b78ea){if(!botPaused)try{const _0x3d6131=await exchange[_0x3ddefb(0x21c)](_0x1727e8);gTicker[noslash(_0x3d6131[0x0][_0x3ddefb(0x25a)])]=_0x3d6131[0x0][_0x3ddefb(0x110)];}catch(_0x3447db){if(!exchangeStopped)await handleError(_0x3447db,_0x3ddefb(0xed),_0x1727e8);}else await sleep(0x64);}},_0x478b87=async _0x497dfa=>{const _0xee2c1=_0x4080c4;while(initCycle==_0x4b78ea){if(!botPaused)try{const _0x22849d=await exchange[_0xee2c1(0x10e)](_0x497dfa),_0x1753aa=_0x22849d[_0xee2c1(0x1ff)]();gTicker[noslash(_0x1753aa[_0xee2c1(0x25a)])]=_0x1753aa['price'];}catch(_0x33830d){if(!exchangeStopped)await handleError(_0x33830d,_0xee2c1(0x168),_0x497dfa['toString']());}else await sleep(0x64);}},_0x56468a=async _0x108e68=>{const _0x28b85a=_0x4080c4;while(initCycle==_0x4b78ea){if(!botPaused){let _0x1c598b;try{await sleep(0x3c*0x3e8);const _0x5073fa=await getTickers(_0x108e68);Object['entries'](_0x5073fa)[_0x28b85a(0x17e)](_0x5de90d=>{const _0x201bf2=_0x28b85a;_0x1c598b=_0x5de90d[0x1][_0x201bf2(0x25a)],gChange[_0x1c598b]=_0x5de90d[0x1][_0x201bf2(0x119)];});}catch(_0x428bd9){if(!exchangeStopped)await handleError(_0x428bd9,_0x28b85a(0x278),_0x1c598b);}}else await sleep(0x64);}},_0x1196d0=async _0x582bfd=>{const _0x5b8018=_0x4080c4;while(initCycle==_0x4b78ea){if(!botPaused)try{const _0x1a1dc2=await exchange[_0x5b8018(0x26c)](_0x582bfd);initCycle==_0x4b78ea&&_0x1a1dc2[_0x5b8018(0x17e)](_0x115d99=>{updateNumberCoinsCcxt(_0x115d99);});}catch(_0x22d56a){if(!exchangeStopped)await handleError(_0x22d56a,_0x5b8018(0x1fd));}else await sleep(0x64);}};_0x45db71(_0x44eca0),_0x56468a(_0x44eca0),exchange['has'][_0x4080c4(0x10e)]&&!(config[_0x4080c4(0x216)]==_0x4080c4(0x273)&&_0x44eca0[_0x4080c4(0x228)]>0xa)?_0x478b87(_0x44eca0):_0x44eca0['forEach'](_0x1609e3=>{_0x27074c(_0x1609e3);}),_0x44eca0['forEach'](_0x1cb964=>{_0x1196d0(_0x1cb964);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x117973){const _0x1e626b=_0x2ffdd8;let _0x5a2124={};try{if(config['exchange']!=_0x1e626b(0x154))_0x5a2124=await exchange[_0x1e626b(0x289)](_0x117973);else for(const _0x3dc22b of _0x117973){const _0x582844=await exchange[_0x1e626b(0x112)](_0x3dc22b);_0x5a2124[_0x3dc22b]=_0x582844;}return _0x5a2124;}catch(_0x2d3593){throw _0x2d3593;}}function setBlockTransactionDetection(_0xa72418){const _0x519cad=_0x2ffdd8;blockTransactionDetection=_0xa72418,logger[_0x519cad(0x1e7)]('Block\x20transaction\x20detection:\x20'+blockTransactionDetection);}async function detectLiquidityChange(_0x436c33=0x0){const _0x3e4739=_0x2ffdd8;transactionDetectionOngoing=!![];try{const _0xe0d4e1=await getCoins(_0x436c33),[_0x481c33,_0x5664a7]=_0xe0d4e1;let _0x3afba4=[];currentCoins[_0x3e4739(0x17e)](_0x2ea1df=>{const _0x419cb0=_0x3e4739,_0x3fbdd5=_0x481c33['find'](_0x4a9b30=>_0x4a9b30[_0x419cb0(0x238)]==_0x2ea1df['coin']);if(_0x3fbdd5){if(_0x2ea1df['number']!=_0x3fbdd5[_0x419cb0(0x17b)]){let _0x36948e;if(_0x2ea1df[_0x419cb0(0x238)]!=config[_0x419cb0(0x24d)]){const _0x599571=gTicker[noslash(_0x2ea1df[_0x419cb0(0x25a)])];_0x36948e=_0x2ea1df[_0x419cb0(0x1e6)]?0x1/_0x599571:_0x599571;}else _0x36948e=0x1;_0x3afba4[_0x419cb0(0xf3)]({'coin':_0x2ea1df[_0x419cb0(0x238)],'symbol':_0x2ea1df[_0x419cb0(0x25a)],'price':_0x36948e,'number':Number(formatResult(_0x3fbdd5[_0x419cb0(0x17b)]-_0x2ea1df[_0x419cb0(0x17b)],0x8)),'basecoinvalue':_0x36948e*(_0x3fbdd5[_0x419cb0(0x17b)]-_0x2ea1df[_0x419cb0(0x17b)])});}}});if(_0x3afba4['length']>0x0&&!blockTransactionDetection){for(const _0x25e75e of _0x3afba4){if(config[_0x3e4739(0x1a3)]){logger['debug'](_0x3e4739(0x13f)+_0x25e75e[_0x3e4739(0x265)]+'\x20|\x20highest\x20fee:\x20'+lastFees[_0x3e4739(0x231)]);if(lastFees[_0x3e4739(0x231)]==0x0||Math[_0x3e4739(0x118)](_0x25e75e['basecoinvalue'])>lastFees['highest']*0x3){if(config[_0x3e4739(0x1a3)]=='update-liquidity'){delete _0x25e75e[_0x3e4739(0x25a)],delete _0x25e75e['basecoinvalue'];let _0x848d76=[],_0x122ca9=[...config[_0x3e4739(0x174)]]||[],_0x39d702=config[_0x3e4739(0x174)];_0x122ca9[_0x3e4739(0x137)]((_0x354626,_0xa113eb)=>_0x354626[_0x3e4739(0xba)]>_0xa113eb['date']?-0x1:_0xa113eb[_0x3e4739(0xba)]>_0x354626['date']?0x1:0x0);const _0x41e030=getDate();if(_0x122ca9[0x0]){const _0x1eec92=fns['parse'](_0x122ca9[0x0][_0x3e4739(0xba)],'yyyy/MM/dd',new Date()),_0x5052ea=fns[_0x3e4739(0x21b)](_0x41e030,_0x3e4739(0xbd),new Date());if(fns[_0x3e4739(0x140)](_0x1eec92,_0x5052ea)){_0x848d76=_0x122ca9[0x0]['changes'];const _0x539364=_0x848d76[_0x3e4739(0x240)](_0x570966=>_0x570966['coin']==_0x25e75e['coin']);_0x539364?(_0x539364['number']+=_0x25e75e[_0x3e4739(0x17b)],_0x539364[_0x3e4739(0x17b)]==0x0&&(_0x848d76=_0x848d76['filter'](_0x2cc60d=>{const _0x2f5c08=_0x3e4739;return _0x2cc60d['coin']!=_0x25e75e[_0x2f5c08(0x238)];}))):_0x848d76[_0x3e4739(0xf3)](_0x25e75e);const _0x36b05b=_0x39d702[_0x3e4739(0x240)](_0x1e4b43=>_0x1e4b43[_0x3e4739(0xba)]==_0x41e030);_0x36b05b['changes']=_0x848d76;}else _0x39d702[_0x3e4739(0xf3)]({'date':_0x41e030,'changes':[_0x25e75e]});}const _0x5903f2=_0x39d702['find'](_0x3f6aab=>_0x3f6aab['date']==_0x41e030);if(_0x5903f2){let _0x481874=!![];_0x5903f2['changes'][_0x3e4739(0x17e)](_0xa012e9=>{const _0x14b188=_0x3e4739;if(_0xa012e9[_0x14b188(0x17b)]!=0x0)_0x481874=![];}),_0x481874&&(_0x39d702=_0x39d702['filter'](_0x5b9d42=>{return _0x5b9d42['date']!=_0x41e030;}));}let _0x1d06b7=dbConfig[_0x3e4739(0x150)](_0x3e4739(0x211))['find']({'botID':botID})['value']();_0x1d06b7&&(dbConfig['get'](_0x3e4739(0x211))['find']({'botID':botID})[_0x3e4739(0xc4)]({'liquidity':_0x39d702})[_0x3e4739(0x1e9)](),config['liquidity']=_0x39d702);logHistory(_0x3e4739(0x1d2),_0x3e4739(0x297)+Math[_0x3e4739(0x118)](_0x25e75e[_0x3e4739(0x17b)])+'\x20'+_0x25e75e['coin']+'\x20'+(_0x25e75e[_0x3e4739(0x17b)]>0x0?'added':_0x3e4739(0x1b9))+'\x20-\x20liquidity\x20settings\x20updated\x20accordingly'),proxyEmit(_0x3e4739(0x179),emittedConfiguration());const _0x12f7c4=getNormalizedPerformance();emitPerformance(_0x12f7c4),getStartingBalances(_0x12f7c4),logger['debug'](_0x3e4739(0xcc));}else config[_0x3e4739(0x1a3)]==_0x3e4739(0x152)&&(config[_0x3e4739(0x205)]?(await storeHeadless({'headless':![]}),logHistory(_0x3e4739(0x1d2),_0x3e4739(0x297)+Math[_0x3e4739(0x118)](_0x25e75e['number'])+'\x20'+_0x25e75e[_0x3e4739(0x238)]+'\x20'+(_0x25e75e['number']>0x0?'added':_0x3e4739(0x1b9))+'\x20-\x20bot\x20switched\x20to\x20manual\x20mode')):logger[_0x3e4739(0x1e7)](_0x3e4739(0x297)+Math['abs'](_0x25e75e['number'])+'\x20'+_0x25e75e[_0x3e4739(0x238)]+'\x20'+(_0x25e75e['number']>0x0?_0x3e4739(0x22f):'removed')+'\x20-\x20bot\x20already\x20running\x20in\x20manual\x20mode'));}else logger['debug'](_0x3e4739(0x1fe)+Math['abs'](_0x25e75e['number'])+'\x20'+_0x25e75e[_0x3e4739(0x238)]+'\x20'+(_0x25e75e[_0x3e4739(0x17b)]>0x0?'added':'removed'));}else logger[_0x3e4739(0x1e7)](_0x3e4739(0x297)+Math[_0x3e4739(0x118)](_0x25e75e[_0x3e4739(0x17b)])+'\x20'+_0x25e75e[_0x3e4739(0x238)]+'\x20'+(_0x25e75e[_0x3e4739(0x17b)]>0x0?_0x3e4739(0x22f):'removed')+_0x3e4739(0x21f));}currentCoins=_0x481c33,currentCoinsAll=_0x5664a7;}}catch(_0x29c14d){if(!exchangeStopped)await handleError(_0x29c14d,_0x3e4739(0x25b));}transactionDetectionOngoing=![];}async function watchTransactions(){await sleep(0x14*0x3e8);while(!![]){!botPaused&&!blockTransactionDetection&&coinsLoaded?(detectLiquidityChange(),await sleep(watchTransactionsInterval)):await sleep(0x3e8);}}async function loadSymbols(){const _0x184b24=_0x2ffdd8;try{markets=await exchange[_0x184b24(0x244)](!![]),allSymbols=[],Object[_0x184b24(0x210)](markets)[_0x184b24(0x17e)](_0x1fee2d=>{const _0x216ec9=_0x184b24;_0x1fee2d[0x1][_0x216ec9(0x248)]&&_0x1fee2d[0x1][_0x216ec9(0x1d0)]&&allSymbols[_0x216ec9(0xf3)](_0x1fee2d[0x0]);}),logger['debug'](_0x184b24(0x249)+allSymbols['length']+_0x184b24(0x191));}catch(_0x13ee79){markets?logger[_0x184b24(0x1e7)](_0x184b24(0x1cf)+_0x13ee79[_0x184b24(0x1f2)]()):(loading[_0x184b24(0x298)]=!![],_0x13ee79[_0x184b24(0x1f2)]()[_0x184b24(0x18f)]()[_0x184b24(0x159)](_0x184b24(0xbb))||_0x13ee79[_0x184b24(0x1f2)]()['toLowerCase']()[_0x184b24(0x159)](_0x184b24(0xd4))?(logHistory(_0x184b24(0x295),_0x184b24(0x185)),loading['error']=_0x184b24(0x148)):handleErrorNoStop(_0x13ee79,_0x184b24(0x197),!![]),logHistory(_0x184b24(0x295),_0x184b24(0x143)),logHistory(_0x184b24(0x295),_0x184b24(0xd9)+loadCoinsRetryInterval/0xea60+_0x184b24(0x251)),logger['debug'](_0x184b24(0xb6),_0x13ee79),emitLoadingProgress(),botPaused=!![],await sleep(loadCoinsRetryInterval),restartBot());}}function validateSymbols(_0x561d90){const _0x9c0acc=_0x2ffdd8;let _0x2944fd=[];return _0x561d90[_0x9c0acc(0x17e)](_0xf57942=>{const _0x1e964d=_0x9c0acc;!allSymbols[_0x1e964d(0x159)](_0xf57942)?(logHistory(_0x1e964d(0x295),_0x1e964d(0x219)+_0xf57942+'\x20-\x20exclude\x20coin\x20in\x20the\x20configuration'),loading[_0x1e964d(0x1f1)]=!![],emitLoadingProgress()):_0x2944fd['push'](_0xf57942);}),_0x2944fd;}async function initclient(){proxyEmit('configuration',emittedConfiguration()),proxyEmit('exchanges',supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x190145=getNormalizedPerformance();emitPerformance(_0x190145),getStartingBalances(_0x190145);}async function toggleBotMode(){const _0x132d94=_0x2ffdd8;let _0x243053=dbConfig[_0x132d94(0x150)](_0x132d94(0x211))[_0x132d94(0x240)]({'botID':botID})[_0x132d94(0x133)]();if(_0x243053){const _0x335198=!_0x243053['headless'];dbConfig['get'](_0x132d94(0x211))['find']({'botID':botID})[_0x132d94(0xc4)]({'headless':_0x335198})[_0x132d94(0x1e9)](),config[_0x132d94(0x205)]=_0x335198,proxyEmit(_0x132d94(0x179),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x1b2ff8=_0x2ffdd8;process['send']({'updatebotmanager':!![]},_0x139de2=>{}),logger[_0x1b2ff8(0x1e7)](_0x1b2ff8(0x146)+config[_0x1b2ff8(0x205)]);}async function loadCoins(_0x56eb82){const _0xc97631=_0x2ffdd8;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x241c40,_0xf2ed94=0x0,_0x55cb8c=0x0;_0x56eb82[_0xc97631(0x17e)](_0x2f3b4a=>{const _0x1b1e2d=_0xc97631;loading['remainingSymbols'][_0x1b1e2d(0xf3)](_0x2f3b4a);}),loadingCanceled=![];let _0x5f520d=![];while(_0x241c40!=_0x56eb82['length']+maxLoadingProgress){_0x241c40=loadingProgress,_0x56eb82[_0xc97631(0x17e)](_0x49487c=>{const _0x452300=_0xc97631;if(gTicker[noslash(_0x49487c)]){loading[_0x452300(0x14a)]=loading[_0x452300(0x14a)]['filter'](_0x5bc0d3=>_0x5bc0d3!=_0x49487c);if(!watchedSymbols['includes'](_0x49487c))watchedSymbols[_0x452300(0xf3)](_0x49487c);_0x241c40++;}}),loading[_0xc97631(0x13a)]=Math[_0xc97631(0x24f)](_0x241c40/(_0x56eb82['length']+maxLoadingProgress)*0x64);loading[_0xc97631(0x13a)]!=0x64&&(_0x55cb8c>0x1e*0x5&&(loading['timeout']=!![],emitLoadingProgress()),_0x55cb8c>0x78*0x5&&!_0x5f520d&&(_0x5f520d=!![],logHistory(_0xc97631(0x295),'Failed\x20to\x20load\x20coin\x20data\x20for\x20'+loading[_0xc97631(0x14a)][_0xc97631(0x139)](',\x20')+_0xc97631(0x20f)),logHistory(_0xc97631(0x295),_0xc97631(0xd9)+loadCoinsRetryInterval/0xea60+_0xc97631(0x251)),loadingCanceled=!![],await sleep(loadCoinsRetryInterval),restartBot()));if(loadingCanceled){loading[_0xc97631(0x298)]=!![],emitLoadingProgress();break;}else _0xf2ed94!=loading[_0xc97631(0x13a)]&&(_0xf2ed94=loading[_0xc97631(0x13a)],emitLoadingProgress()),_0x55cb8c++,await sleep(0xc8);}_0x241c40==_0x56eb82[_0xc97631(0x228)]+maxLoadingProgress&&(coinsLoaded=!![],process[_0xc97631(0x12c)]({'status':'enabled','live':'running'},_0x27bfd7=>{}),_0x5f520d&&logHistory(_0xc97631(0x1d2),_0xc97631(0xd3)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x83eded=_0x2ffdd8;proxyEmit(_0x83eded(0x179),{...emittedConfiguration(),'configstate':'loading-canceled'});}function emitLoadingProgress(){const _0x762709=_0x2ffdd8;proxyEmit(_0x762709(0x1d5),loading);}async function getFiat(){const _0x53de75=_0x2ffdd8;let _0x41bd39=gTicker[stablecoins[_0x53de75(0x259)][_0x53de75(0x238)]],_0x236137=gTicker[stablecoins[_0x53de75(0x19c)][_0x53de75(0x238)]];return{'eur':Number(_0x41bd39),'usd':Number(_0x236137)};}function capitalize(_0x4645cd){const _0xe0e495=_0x2ffdd8;return _0x4645cd['substring'](0x0,0x1)[_0xe0e495(0x166)]()+_0x4645cd[_0xe0e495(0x284)](0x1);}function supportedExchanges(){const _0x734be4=_0x2ffdd8,_0x120dcc=['ws',_0x734be4(0x289),_0x734be4(0x112),'watchTrades',_0x734be4(0x26c),_0x734be4(0x128),'createOrder',_0x734be4(0x19a),_0x734be4(0x27d)];let _0x20b766=[],_0x5e5d42=[],_0x27a6b5=ccxt['pro'][_0x734be4(0x1fb)];_0x27a6b5['forEach'](_0x20b620=>{const _0x33786a=_0x734be4;try{const _0x45bf52=new ccxt[(_0x33786a(0x1f5))][_0x20b620]();_0x5e5d42['push'](_0x45bf52);}catch(_0x64355a){}}),_0x5e5d42[_0x734be4(0x17e)](_0x4044aa=>{const _0x130902=_0x734be4;let _0x2839f2=0x0;_0x120dcc[_0x130902(0x17e)](_0x402660=>{const _0x180f13=_0x130902;_0x402660 in _0x4044aa[_0x180f13(0x27e)]&&_0x4044aa[_0x180f13(0x27e)][_0x402660]&&_0x2839f2++;}),_0x2839f2==_0x120dcc['length']&&(!excludedExchanges[_0x130902(0x159)](_0x4044aa['id'])&&_0x20b766[_0x130902(0xf3)](capitalize(_0x4044aa['id'])));});let _0x655ed1=[];return _0x27a6b5[_0x734be4(0x17e)](_0x6637c=>{const _0x20a569=_0x734be4;_0x6637c=capitalize(_0x6637c);if(!_0x20b766[_0x20a569(0x159)](_0x6637c))_0x655ed1[_0x20a569(0xf3)](_0x6637c);}),_0x20b766;}function setStartDatePerformance(){const _0x14cba0=_0x2ffdd8;if(config&&config['liquidity'][0x0][_0x14cba0(0x28d)][_0x14cba0(0x228)]!=0x0){const _0x483a8f=config[_0x14cba0(0x174)][0x0][_0x14cba0(0x28d)];dbPerformance[_0x14cba0(0x150)]('data')[_0x14cba0(0x240)]({'date':config[_0x14cba0(0x226)]})['assign']({'coins':_0x483a8f})[_0x14cba0(0x1e9)]();}}function calculatePnL(_0x3e95d8,_0x3fcb4a,_0x3c1028,_0x2f75bf,_0x50440d,_0x560d45){const _0x2c029e=_0x2ffdd8;!_0x3e95d8[_0x2c029e(0x159)]('/'+config[_0x2c029e(0x24d)])&&(_0x3c1028=_0x3c1028=='buy'?_0x2c029e(0x22a):'buy');!_0x560d45[_0x3fcb4a]&&(_0x560d45[_0x3fcb4a]={'number':0x0,'sells':0x0,'buys':0x0,'breakeven':0x0,'realizedPnL':0x0});let _0x281fb1=0x0,_0x355a4a,_0x309697;if(_0x3c1028==_0x2c029e(0x254))_0x309697=_0x560d45[_0x3fcb4a][_0x2c029e(0x17b)]*_0x560d45[_0x3fcb4a][_0x2c029e(0xd0)]+_0x50440d*_0x2f75bf,_0x560d45[_0x3fcb4a]['number']+=_0x2f75bf,_0x560d45[_0x3fcb4a][_0x2c029e(0xd0)]=_0x560d45[_0x3fcb4a][_0x2c029e(0x17b)]!=0x0?_0x309697/_0x560d45[_0x3fcb4a][_0x2c029e(0x17b)]:0x0,_0x560d45[_0x3fcb4a][_0x2c029e(0xb7)]++;else _0x3c1028=='sell'&&(_0x355a4a=Math['min'](_0x560d45[_0x3fcb4a][_0x2c029e(0x17b)],_0x2f75bf),_0x281fb1=(_0x50440d-_0x560d45[_0x3fcb4a][_0x2c029e(0xd0)])*_0x355a4a,_0x309697=Math[_0x2c029e(0x1bc)](_0x560d45[_0x3fcb4a][_0x2c029e(0x17b)]*_0x560d45[_0x3fcb4a][_0x2c029e(0xd0)]-_0x355a4a*_0x560d45[_0x3fcb4a][_0x2c029e(0xd0)],0x0),_0x560d45[_0x3fcb4a][_0x2c029e(0x17b)]-=_0x355a4a,_0x560d45[_0x3fcb4a][_0x2c029e(0xd0)]=_0x560d45[_0x3fcb4a]['number']!=0x0?_0x309697/_0x560d45[_0x3fcb4a][_0x2c029e(0x17b)]:0x0,_0x560d45[_0x3fcb4a][_0x2c029e(0x281)]+=_0x281fb1,_0x560d45[_0x3fcb4a][_0x2c029e(0xd8)]++);return _0x281fb1;}async function generatePnL(){const _0x559b0e=_0x2ffdd8;pnlGenerationNeeded=![],logger[_0x559b0e(0x1e7)](_0x559b0e(0x16f));const _0x483577=dbLogs[_0x559b0e(0x150)](_0x559b0e(0x1e5))[_0x559b0e(0x133)]();let _0x526ac0={},_0x57b96e=0x0,_0x4ec15b=0x0,_0xeb2cc0=config[_0x559b0e(0x226)];const _0x409a7b=fns[_0x559b0e(0x21b)](_0xeb2cc0,'yyyy/MM/dd',new Date()),_0x3a95ca=new Date();let _0x4f4a71=0x0;for(let _0x1b4f54=_0x409a7b;!fns[_0x559b0e(0x260)](_0x3a95ca,_0x1b4f54);_0x1b4f54=fns[_0x559b0e(0x13b)](_0x1b4f54,0x1)){const _0x381495=fns[_0x559b0e(0x1df)](_0x1b4f54,_0x559b0e(0xbd));while(_0x57b96e<_0x483577['length']){const _0x4e5cb9=new Date(_0x483577[_0x57b96e][_0x559b0e(0x1a8)]);if(fns['isBefore'](_0x4e5cb9,_0x1b4f54))_0x57b96e++;else{if(_0x483577[_0x57b96e][_0x559b0e(0x1a8)][_0x559b0e(0x159)](_0x381495)){const _0x2c6eda=_0x483577[_0x57b96e];if(_0x2c6eda[_0x559b0e(0x142)]===_0x559b0e(0x200)&&(_0x2c6eda['event'][_0x559b0e(0x159)](_0x559b0e(0xde))||_0x2c6eda[_0x559b0e(0x230)][_0x559b0e(0x159)]('Market\x20order'))){const _0x719a71=_0x2c6eda[_0x559b0e(0x230)][_0x559b0e(0x121)](/([A-Z]+\/[A-Z]+) (sell|buy) #([\d.]+) @([\d.]+)/);if(_0x719a71){const [,_0x1c485b,_0x3c448e,_0x4867ce,_0x1dfdd6]=_0x719a71,_0x117960=_0x1c485b['includes']('/'+config[_0x559b0e(0x24d)])?_0x1c485b[_0x559b0e(0x18e)]('/')[0x0]:_0x1c485b[_0x559b0e(0x18e)]('/')[0x1],_0x5aedef=calculatePnL(_0x1c485b,_0x117960,_0x3c448e,parseFloat(_0x4867ce),parseFloat(_0x1dfdd6),_0x526ac0);_0x4ec15b+=_0x5aedef;}}_0x57b96e++;}else break;}}dbPerformance[_0x559b0e(0x150)](_0x559b0e(0x299))[_0x559b0e(0x240)]({'date':_0x381495})[_0x559b0e(0xc4)]({'pnl':_0x4ec15b})[_0x559b0e(0x1e9)]();}dbCoinResults[_0x559b0e(0x188)]('coins',_0x526ac0)[_0x559b0e(0x1e9)](),logger[_0x559b0e(0x1e7)](_0x559b0e(0x17d));const _0x546c20=getNormalizedPerformance();emitPerformance(_0x546c20);}async function updatePnL(_0x357d0c){const _0x3be015=_0x2ffdd8,{symbol:_0x29911b,coin:_0x5b837e,amount:_0x122363,price:_0x3372fb,side:_0x29c0ca,reverse:_0x3c97a5}=_0x357d0c;let _0x4b5237=dbCoinResults['get'](_0x3be015(0x147))['value']();const _0x39fecf=calculatePnL(_0x29911b,_0x5b837e,_0x29c0ca,_0x122363,_0x3372fb,_0x4b5237);dbCoinResults[_0x3be015(0x188)](_0x3be015(0x147),_0x4b5237)['write']();const _0x481297=getTimeStamp()['split']('\x20')[0x0];let _0x595727=dbPerformance['get'](_0x3be015(0x299))[_0x3be015(0x240)]({'date':_0x481297})['value']();_0x595727?(_0x595727[_0x3be015(0x19d)]+=_0x39fecf,dbPerformance['get']('data')['find']({'date':_0x481297})[_0x3be015(0xc4)](_0x595727)[_0x3be015(0x1e9)]()):await storePerformance();const _0x149826=getNormalizedPerformance();emitPerformance(_0x149826);}async function validate24hChanges(){const _0x15a9a3=_0x2ffdd8;for(const _0x51f362 of currentCoins){if(_0x51f362[_0x15a9a3(0x238)]!=config[_0x15a9a3(0x24d)]){let _0xd963a9;_0x51f362['reverse']?_0xd963a9=formatResult((0x1/(gChange[_0x51f362[_0x15a9a3(0x25a)]]/0x64+0x1)-0x1)*0x64,0x3):_0xd963a9=gChange[_0x51f362[_0x15a9a3(0x25a)]],_0xd963a9<config[_0x15a9a3(0x149)]&&(logHistory('error',_0x51f362[_0x15a9a3(0x238)]+_0x15a9a3(0x27f)+_0xd963a9+'%'),logHistory(_0x15a9a3(0x295),_0x15a9a3(0x194)),logHistory('error',_0x15a9a3(0x114)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x465c26,_0x4afc57){const _0x53da40=_0x2ffdd8;if(!_0x465c26)return!![];const _0x1bf195=_0x4afc57[_0x53da40(0x18e)]('.'),_0x17efe9=_0x465c26[_0x53da40(0x18e)]('.');for(var _0x1807bf=0x0;_0x1807bf<_0x17efe9[_0x53da40(0x228)];_0x1807bf++){const _0x20e784=~~_0x17efe9[_0x1807bf],_0x33c864=~~_0x1bf195[_0x1807bf];if(_0x20e784<_0x33c864)return!![];if(_0x20e784>_0x33c864)return![];}return![];}async function oneTimeMigration(){const _0x476e49=_0x2ffdd8;let _0xec3b59=dbLogs[_0x476e49(0x150)](_0x476e49(0x266))['value']();if(isOlderVersion(_0xec3b59,'2.3.5')){let _0x19c8ad=[];const _0x27c1a5=dbLogs[_0x476e49(0x150)](_0x476e49(0x1e5))[_0x476e49(0x133)]();_0x27c1a5['forEach'](_0x29ade5=>{const _0x483984=_0x476e49;_0x19c8ad[_0x483984(0xf3)]({'time':_0x29ade5[_0x483984(0x1a8)],'type':_0x29ade5[_0x483984(0x142)],'event':_0x29ade5[_0x483984(0x230)]});}),dbLogs['get']('logs')[_0x476e49(0xc4)](_0x19c8ad)[_0x476e49(0x1e9)]();}let _0x124483=dbConfig[_0x476e49(0x150)](_0x476e49(0x266))[_0x476e49(0x133)]();if(isOlderVersion(_0x124483,_0x476e49(0x1a9))){let _0x39586=dbConfig['get']('bot')['find']({'botID':botID})['value']();if(_0x39586){let _0x47d40b=[];_0x39586[_0x476e49(0x1b0)][_0x476e49(0x17e)](_0x34d46b=>{const _0x72e8a3=_0x476e49;_0x47d40b['push']({'coin':_0x34d46b[_0x72e8a3(0x238)],'number':_0x34d46b[_0x72e8a3(0xfd)],'price':_0x34d46b[_0x72e8a3(0xbe)]}),delete _0x34d46b[_0x72e8a3(0xfd)],delete _0x34d46b['startprice'];});if(_0x47d40b[_0x476e49(0x228)]!==0x0)fs['writeFile'](configbackuppath+('starting-balance-'+botID+_0x476e49(0x1ac)),JSON['stringify'](_0x47d40b,null,0x4),function(_0x50e298){if(_0x50e298){}});const _0x1da71b=(_0x25b4f3,_0x1b1102)=>{const _0x184c69=_0x476e49;let _0x2051cb=[];_0x1b1102[_0x184c69(0x17e)](_0xa3f1dd=>{const _0x20e0a7=_0x184c69,_0x22f1e3=_0x25b4f3[_0x20e0a7(0x240)](_0x37a163=>_0x37a163[_0x20e0a7(0x238)]==_0xa3f1dd[_0x20e0a7(0x238)]);if(!_0x22f1e3)_0x2051cb['push'](_0xa3f1dd);});let _0x432e6a=[];return _0x25b4f3[_0x184c69(0x17e)](_0x3c2db7=>{const _0x76e6fc=_0x184c69,_0x5287b4=_0x1b1102[_0x76e6fc(0x240)](_0x57fe0e=>_0x57fe0e[_0x76e6fc(0x238)]==_0x3c2db7[_0x76e6fc(0x238)]);if(!_0x5287b4||_0x5287b4[_0x76e6fc(0x17b)]==0x0&&_0x3c2db7['number']!=0x0)_0x432e6a['push'](_0x3c2db7);}),{'missingDay1':_0x2051cb,'notInDay2':_0x432e6a};},_0x272683=dbPerformance[_0x476e49(0x150)](_0x476e49(0x299))[_0x476e49(0x153)]()[_0x476e49(0x133)]();if(_0x272683[_0x476e49(0x228)]>0x1){const {missingDay1:_0x30b4d0,notInDay2:_0x15c50a}=_0x1da71b(_0x47d40b,_0x272683[0x1]['coins']);_0x47d40b=[..._0x47d40b,..._0x30b4d0],_0x15c50a['forEach'](_0x3f9fce=>{const _0x2557eb=_0x476e49;let _0x41b29f=_0x47d40b[_0x2557eb(0x26d)](_0x1fcb30=>_0x1fcb30[_0x2557eb(0x238)]==_0x3f9fce[_0x2557eb(0x238)]);_0x41b29f!=-0x1&&_0x47d40b[_0x2557eb(0x187)](_0x41b29f,0x1);});}_0x47d40b['sort']((_0x25003e,_0x163f52)=>_0x25003e[_0x476e49(0x238)]>_0x163f52[_0x476e49(0x238)]?0x1:_0x163f52['coin']>_0x25003e['coin']?-0x1:0x0);let _0x42e008=[{'date':_0x39586[_0x476e49(0x226)],'changes':_0x47d40b}];_0x272683[_0x476e49(0x228)]>0x2&&_0x272683[_0x476e49(0x17e)]((_0x1888a8,_0x7f2e96)=>{const _0x4e757f=_0x476e49;if(_0x7f2e96>0x0&&_0x7f2e96<_0x272683['length']-0x1){const {missingDay1:_0x26b33b,notInDay2:_0xa027c7}=_0x1da71b(_0x272683[_0x7f2e96][_0x4e757f(0x147)],_0x272683[_0x7f2e96+0x1]['coins']);_0x47d40b=[],(_0x26b33b[_0x4e757f(0x228)]!=0x0||_0xa027c7[_0x4e757f(0x228)]!=0x0)&&(_0x26b33b[_0x4e757f(0x228)]!=0x0&&_0x47d40b[_0x4e757f(0xf3)](..._0x26b33b),_0xa027c7[_0x4e757f(0x228)]!=0x0&&(_0xa027c7['forEach'](_0x551a9c=>{const _0x1696f3=_0x4e757f;_0x551a9c['number']=-_0x551a9c[_0x1696f3(0x17b)];}),_0x47d40b[_0x4e757f(0xf3)](..._0xa027c7)),_0x47d40b[_0x4e757f(0x137)]((_0x2b3db5,_0x5fd480)=>_0x2b3db5['coin']>_0x5fd480['coin']?0x1:_0x5fd480[_0x4e757f(0x238)]>_0x2b3db5['coin']?-0x1:0x0),_0x42e008['push']({'date':_0x272683[_0x7f2e96+0x1][_0x4e757f(0xba)],'changes':_0x47d40b}));}}),dbConfig['get']('bot')[_0x476e49(0x240)]({'botID':botID})['assign']({..._0x39586,'liquidity':_0x42e008})[_0x476e49(0x1e9)]();}}if(isOlderVersion(_0x124483,_0x476e49(0x157))){let _0x47128f=dbConfig['get'](_0x476e49(0x211))[_0x476e49(0x240)]({'botID':botID})[_0x476e49(0x133)]();if(_0x47128f){const _0x3d6bde=_0x47128f[_0x476e49(0x216)],_0xca70a9=_0x3d6bde?capitalize(_0x3d6bde):'Binance';dbConfig[_0x476e49(0x150)]('bot')['find']({'botID':botID})['assign']({'exchange':_0xca70a9})[_0x476e49(0x1e9)]();}}if(isOlderVersion(_0x124483,_0x476e49(0x18a))){let _0x3ec206=dbConfig['get']('bot')[_0x476e49(0x240)]({'botID':botID})['value']();if(_0x3ec206){const _0x1f8d6a=_0x3ec206[_0x476e49(0x261)],_0x20eb27=_0x1f8d6a?_0x476e49(0x224):![];dbConfig[_0x476e49(0x150)](_0x476e49(0x211))[_0x476e49(0x240)]({'botID':botID})[_0x476e49(0xc4)]({'marketcapEnabled':_0x20eb27})['write']();}}if(isOlderVersion(_0x124483,_0x476e49(0x120))){let _0x3b4a75=dbConfig[_0x476e49(0x150)](_0x476e49(0x211))[_0x476e49(0x240)]({'botID':botID})[_0x476e49(0x133)]();if(_0x3b4a75){const _0xa4031d=_0x3b4a75[_0x476e49(0x1a3)],_0x197db3=_0xa4031d?'update-liquidity':![];dbConfig[_0x476e49(0x150)](_0x476e49(0x211))[_0x476e49(0x240)]({'botID':botID})[_0x476e49(0xc4)]({'autoliquidity':_0x197db3})[_0x476e49(0x1e9)]();}}let _0x3981a5=dbPerformance['get'](_0x476e49(0x266))[_0x476e49(0x133)]();isOlderVersion(_0x3981a5,'2.3.5')&&setStartDatePerformance();let _0x14d374=dbCoinResults['get']('version')['value']();if(isOlderVersion(_0x14d374,'2.7.1')){let _0x4afcfa=dbCoinResults[_0x476e49(0x150)](_0x476e49(0x147))[_0x476e49(0x133)]();if(_0x4afcfa[_0x476e49(0x228)]!=0x0)pnlGenerationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x2b0375=_0x2ffdd8;dbConfig['set']('version',serverversion)['write'](),dbPerformance[_0x2b0375(0x188)](_0x2b0375(0x266),serverversion)['write'](),dbLogs[_0x2b0375(0x188)](_0x2b0375(0x266),serverversion)[_0x2b0375(0x1e9)](),dbCoinResults['set'](_0x2b0375(0x266),serverversion)[_0x2b0375(0x1e9)]();}function getConfiguration(_0x1b2c46){const _0x395640=_0x2ffdd8;let _0x2cb47e=dbConfig[_0x395640(0x150)](_0x395640(0x211))['find']({'botID':_0x1b2c46})['value']();if(_0x2cb47e){let _0x149843=![];typeof _0x2cb47e[_0x395640(0xf5)]==_0x395640(0x1fa)&&(_0x2cb47e={..._0x2cb47e,'threshold':Number(_0x2cb47e['threshold'])},_0x149843=!![]),_0x2cb47e[_0x395640(0x149)]==undefined&&(_0x2cb47e={..._0x2cb47e,'change24h':-0x14},_0x149843=!![]),_0x2cb47e[_0x395640(0x1d1)]==undefined&&(_0x2cb47e={..._0x2cb47e,'fiat':'USD'},_0x149843=!![]),_0x2cb47e[_0x395640(0x101)]==undefined&&(_0x2cb47e={..._0x2cb47e,'onepagemode':settings[_0x395640(0x101)]},_0x149843=!![]),_0x2cb47e[_0x395640(0x215)]==undefined&&(_0x2cb47e={..._0x2cb47e,'colorscheme':'red_yellow_blue'},_0x149843=!![]),_0x2cb47e[_0x395640(0x1a3)]==undefined&&(_0x2cb47e={..._0x2cb47e,'autoliquidity':_0x395640(0x126)},_0x149843=!![]),_0x2cb47e[_0x395640(0xdc)]==undefined&&(_0x2cb47e={..._0x2cb47e,'marketcapApi':settings[_0x395640(0xdc)]?!![]:![]},_0x149843=!![]),_0x2cb47e[_0x395640(0x261)]==undefined&&(_0x2cb47e={..._0x2cb47e,'marketcapEnabled':![]},_0x149843=!![]),_0x2cb47e[_0x395640(0x186)]==undefined&&(_0x2cb47e={..._0x2cb47e,'sandbox':![]},_0x149843=!![]),_0x149843&&(_0x2cb47e={'botID':_0x2cb47e[_0x395640(0x243)],'exchange':_0x2cb47e['exchange'],'apiKey':_0x2cb47e[_0x395640(0x23a)],'apiSecret':_0x2cb47e[_0x395640(0x277)],'apiPassword':_0x2cb47e['apiPassword'],'basecoin':_0x2cb47e[_0x395640(0x24d)],'botname':_0x2cb47e['botname'],'showname':_0x2cb47e[_0x395640(0x1c6)],'threshold':_0x2cb47e[_0x395640(0xf5)],'ordertype':_0x2cb47e[_0x395640(0x17a)],'timeout':_0x2cb47e[_0x395640(0x1f1)],'fiat':_0x2cb47e[_0x395640(0x1d1)],'startdate':_0x2cb47e[_0x395640(0x226)],'recreate':_0x2cb47e[_0x395640(0x1b8)],'timeshift':_0x2cb47e[_0x395640(0x1bd)],'onepagemode':_0x2cb47e[_0x395640(0x101)],'headless':_0x2cb47e['headless'],'cooldown':_0x2cb47e['cooldown'],'change24h':_0x2cb47e['change24h'],'emojibuy':_0x2cb47e[_0x395640(0x1b4)],'emojisell':_0x2cb47e[_0x395640(0x1c7)],'colorscheme':_0x2cb47e[_0x395640(0x215)],'marketcapApi':_0x2cb47e[_0x395640(0xdc)],'marketcapEnabled':_0x2cb47e[_0x395640(0x261)],'sandbox':_0x2cb47e['sandbox'],'portfolio':_0x2cb47e[_0x395640(0x1b0)],'autoliquidity':_0x2cb47e[_0x395640(0x1a3)],'liquidity':_0x2cb47e['liquidity'],'openOrders':_0x2cb47e[_0x395640(0x220)]},dbConfig[_0x395640(0x150)]('bot')['remove']()[_0x395640(0x1e9)](),dbConfig[_0x395640(0x150)](_0x395640(0x211))['push'](_0x2cb47e)[_0x395640(0x1e9)]());}else _0x2cb47e={'botID':_0x1b2c46,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x395640(0xf8)+_0x1b2c46,'showname':![],'threshold':0x3,'ordertype':_0x395640(0x27a),'timeout':0x14,'fiat':'USD','startdate':getDate(),'recreate':![],'timeshift':settings['timeshift'],'onepagemode':settings[_0x395640(0x101)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x395640(0xea),'marketcapApi':settings[_0x395640(0xdc)]?!![]:![],'marketcapEnabled':![],'sandbox':![],'portfolio':[],'autoliquidity':'update-liquidity','liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x2cb47e;}function emittedConfiguration(){const _0xbc5c98=_0x2ffdd8;let _0x147918;if(config[_0xbc5c98(0x23a)]=='')_0x147918={...config,'configstate':_0xbc5c98(0xe2)};else config['apiKey']==_0xbc5c98(0x276)?_0x147918={...config,'configstate':'recovery'}:(_0x147918={...config,'apiKey':_0xbc5c98(0x1cc),'apiSecret':_0xbc5c98(0x1cc)},config[_0xbc5c98(0x237)]&&(_0x147918['apiPassword']='************'));return _0x147918[_0xbc5c98(0x286)]=enableFiatToggle,_0x147918;}function getSettings(){const _0x15b40c=_0x2ffdd8;return dbSettings[_0x15b40c(0x150)](_0x15b40c(0x1a4))[_0x15b40c(0x133)]();}function getSecure(){const _0x3cc410=_0x2ffdd8;return dbSecure[_0x3cc410(0x150)](_0x3cc410(0x250))[_0x3cc410(0x133)]()||{};}function updateTimeshift(_0x41919d){const _0x3a9510=_0x2ffdd8;let _0x3608ac=dbConfig[_0x3a9510(0x150)](_0x3a9510(0x211))['find']({'botID':botID})[_0x3a9510(0x133)]();_0x3608ac&&dbConfig[_0x3a9510(0x150)](_0x3a9510(0x211))[_0x3a9510(0x240)]({'botID':botID})[_0x3a9510(0xc4)]({'timeshift':_0x41919d})[_0x3a9510(0x1e9)](),config[_0x3a9510(0x1bd)]=_0x41919d,proxyEmit(_0x3a9510(0x179),emittedConfiguration());}function updateOnepagemode(_0x40a8df){const _0x2f5bbc=_0x2ffdd8;let _0x51f216=dbConfig[_0x2f5bbc(0x150)]('bot')[_0x2f5bbc(0x240)]({'botID':botID})[_0x2f5bbc(0x133)]();_0x51f216&&dbConfig[_0x2f5bbc(0x150)](_0x2f5bbc(0x211))[_0x2f5bbc(0x240)]({'botID':botID})[_0x2f5bbc(0xc4)]({'onepagemode':_0x40a8df})[_0x2f5bbc(0x1e9)](),config[_0x2f5bbc(0x101)]=_0x40a8df,proxyEmit('configuration',emittedConfiguration());}function updateMarketcapApi(_0x18c1ff){const _0x3b671e=_0x2ffdd8,_0x534861=_0x18c1ff?!![]:![];let _0x1ac949=dbConfig[_0x3b671e(0x150)]('bot')[_0x3b671e(0x240)]({'botID':botID})[_0x3b671e(0x133)]();_0x1ac949&&dbConfig['get'](_0x3b671e(0x211))[_0x3b671e(0x240)]({'botID':botID})['assign']({'marketcapApi':_0x534861})[_0x3b671e(0x1e9)](),config[_0x3b671e(0xdc)]=_0x534861,getMarketCap(),proxyEmit(_0x3b671e(0x179),emittedConfiguration());}async function storeConfiguration(_0x54e652){const _0x3ca43b=_0x2ffdd8;logger[_0x3ca43b(0x1e7)](_0x3ca43b(0x207));_0x54e652['configstate']&&delete _0x54e652[_0x3ca43b(0xf2)];if(pidBalances)clearTimeout(pidBalances);setBlockTransactionDetection(!![]);let _0x454ba8=![],_0x5e8948=![],_0x208b85=[];_0x54e652[_0x3ca43b(0x1b0)]['forEach'](_0x18de6e=>{const _0x549f07=_0x3ca43b;if(!_0x18de6e['excluded']&&_0x18de6e[_0x549f07(0x238)]!=_0x54e652[_0x549f07(0x24d)])_0x208b85[_0x549f07(0xf3)](_0x18de6e[_0x549f07(0x25a)]);}),_0x208b85[_0x3ca43b(0x17e)](_0x43e673=>{const _0x48d3f8=_0x3ca43b,_0x463b78=currentCoins[_0x48d3f8(0x240)](_0x209e7e=>_0x209e7e['symbol']==_0x43e673);!_0x463b78&&(_0x454ba8=!![]);}),currentCoins[_0x3ca43b(0x17e)](_0x429b3e=>{const _0x3116d0=_0x3ca43b;if(_0x429b3e['coin']!=config[_0x3116d0(0x24d)]){const _0x149d13=_0x208b85[_0x3116d0(0x240)](_0x3677c6=>_0x3677c6==_0x429b3e[_0x3116d0(0x25a)]);!_0x149d13&&(_0x454ba8=!![]);}}),_0x54e652[_0x3ca43b(0x1b0)][_0x3ca43b(0x17e)](_0x203b4f=>{const _0x1bc920=_0x3ca43b,_0x56b181=config[_0x1bc920(0x1b0)][_0x1bc920(0x240)](_0x202d3b=>_0x202d3b['coin']==_0x203b4f['coin']);if(_0x56b181&&_0x203b4f[_0x1bc920(0x23e)]!=_0x56b181['offset'])_0x5e8948=!![];});let _0x4cc33c=dbConfig[_0x3ca43b(0x150)](_0x3ca43b(0x211))[_0x3ca43b(0x240)]({'botID':botID})[_0x3ca43b(0x133)]();_0x54e652={..._0x54e652,'apiKey':decryptRSA(secure['privateKey'],_0x54e652['apiKey']),'apiSecret':decryptRSA(secure[_0x3ca43b(0x1cb)],_0x54e652[_0x3ca43b(0x277)])};_0x54e652[_0x3ca43b(0x237)]&&(_0x54e652[_0x3ca43b(0x237)]=decryptRSA(secure[_0x3ca43b(0x1cb)],_0x54e652[_0x3ca43b(0x237)]));let _0x3ea1f4=![];if(_0x4cc33c){_0x54e652[_0x3ca43b(0x23a)]==_0x3ca43b(0x1cc)?_0x54e652[_0x3ca43b(0x23a)]=config['apiKey']:_0x3ea1f4=!![];_0x54e652[_0x3ca43b(0x277)]==_0x3ca43b(0x1cc)?_0x54e652[_0x3ca43b(0x277)]=config[_0x3ca43b(0x277)]:_0x3ea1f4=!![];if(_0x54e652[_0x3ca43b(0x237)]=='************')_0x54e652['apiPassword']=config[_0x3ca43b(0x237)];else{if(_0x54e652['apiPassword'])_0x3ea1f4=!![];}dbConfig['get']('bot')[_0x3ca43b(0x240)]({'botID':botID})[_0x3ca43b(0xc4)](_0x54e652)[_0x3ca43b(0x1e9)]();}else dbConfig[_0x3ca43b(0x150)](_0x3ca43b(0x211))[_0x3ca43b(0xf3)](_0x54e652)[_0x3ca43b(0x1e9)](),_0x3ea1f4=!![],process[_0x3ca43b(0x12c)]({'status':_0x3ca43b(0x26f),'live':_0x3ca43b(0xe9)},_0x14de4f=>{});process[_0x3ca43b(0x12c)]({'botname':_0x54e652['botname']},_0x114d99=>{}),config={..._0x54e652},updateBotManager(),proxyEmit(_0x3ca43b(0xc5)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x3ea1f4)await reset(!![]);else _0x454ba8||_0x5e8948?await reset(![]):getBalances();setBlockTransactionDetection(![]);}async function storeHeadless(_0x171e68){const _0x4438f6=_0x2ffdd8,_0x2eb145={...config,'headless':_0x171e68[_0x4438f6(0x205)]};let _0x14cd78=dbConfig[_0x4438f6(0x150)](_0x4438f6(0x211))['find']({'botID':botID})[_0x4438f6(0x133)]();_0x14cd78&&dbConfig['get'](_0x4438f6(0x211))[_0x4438f6(0x240)]({'botID':botID})[_0x4438f6(0xc4)](_0x2eb145)[_0x4438f6(0x1e9)](),config={..._0x2eb145},updateBotManager(),proxyEmit('configuration',emittedConfiguration());}async function storeFiat(_0x1899c5){const _0x314ec5=_0x2ffdd8,_0x16f460={...config,'fiat':_0x1899c5};let _0x22da27=dbConfig[_0x314ec5(0x150)](_0x314ec5(0x211))[_0x314ec5(0x240)]({'botID':botID})[_0x314ec5(0x133)]();_0x22da27&&dbConfig[_0x314ec5(0x150)](_0x314ec5(0x211))['find']({'botID':botID})['assign'](_0x16f460)['write'](),config={..._0x16f460},proxyEmit(_0x314ec5(0x179),emittedConfiguration());}function resetHistory(){const _0x330753=_0x2ffdd8;logger[_0x330753(0x15b)](_0x330753(0x22d));try{if(fs[_0x330753(0x20c)](path[_0x330753(0x139)](configpath,_0x330753(0x293)+botID+'-events.json')))fs['unlinkSync'](path[_0x330753(0x139)](configpath,_0x330753(0x293)+botID+_0x330753(0xe0)));if(fs['existsSync'](path[_0x330753(0x139)](configpath,'bot-'+botID+_0x330753(0x19b))))fs['unlinkSync'](path[_0x330753(0x139)](configpath,'bot-'+botID+'-performance.json'));if(fs[_0x330753(0x20c)](path[_0x330753(0x139)](configpath,_0x330753(0x293)+botID+_0x330753(0x202))))fs[_0x330753(0x272)](path[_0x330753(0x139)](configpath,_0x330753(0x293)+botID+_0x330753(0x202)));}catch(_0x35c326){if(_0x35c326)logger['full'](_0x330753(0x285),_0x35c326);}const _0x190884=getDate();let _0x29c271=[];currentCoins['forEach'](_0x30509d=>{const _0x9561cd=_0x330753;_0x29c271['push']({'coin':_0x30509d['coin'],'number':_0x30509d[_0x9561cd(0x17b)],'price':_0x30509d[_0x9561cd(0x170)]});});let _0x1ead38=dbConfig[_0x330753(0x150)](_0x330753(0x211))[_0x330753(0x240)]({'botID':botID})[_0x330753(0x133)]();_0x1ead38&&(dbConfig[_0x330753(0x150)](_0x330753(0x211))[_0x330753(0x240)]({'botID':botID})[_0x330753(0xc4)]({'liquidity':[{'date':_0x190884,'changes':_0x29c271}]})[_0x330753(0x1e9)](),config[_0x330753(0x174)]=[]),restartBot(!![]);}function noslash(_0x17a6da){const _0x308630=_0x2ffdd8;return _0x17a6da[_0x308630(0x136)]('/','');}function _0x5fdf(_0x2e98b9,_0x446ee1){const _0x22030a=_0x2410();return _0x5fdf=function(_0x254b98,_0x407d92){_0x254b98=_0x254b98-0xb4;let _0x2410cf=_0x22030a[_0x254b98];return _0x2410cf;},_0x5fdf(_0x2e98b9,_0x446ee1);}function updateHighestFee(_0x230df5){const _0x178e9e=_0x2ffdd8;if(_0x230df5[_0x178e9e(0x1e6)]){let _0x1d17b6={'filled':_0x230df5['filled']*_0x230df5[_0x178e9e(0x110)],'amount':_0x230df5[_0x178e9e(0x25f)]*_0x230df5[_0x178e9e(0x110)],'side':_0x230df5[_0x178e9e(0x14e)]==_0x178e9e(0x22a)?'buy':_0x178e9e(0x22a),'price':0x1/_0x230df5[_0x178e9e(0x110)]};_0x230df5={..._0x230df5,..._0x1d17b6};}const _0x22f37e=defaultFee*_0x230df5['filled']*_0x230df5[_0x178e9e(0x110)];lastFees[_0x178e9e(0x1d3)][_0x178e9e(0x228)]===0x14&&lastFees['recent20'][_0x178e9e(0x296)](),lastFees['recent20']['push'](_0x22f37e),lastFees['highest']=Math[_0x178e9e(0x1bc)](...lastFees[_0x178e9e(0x1d3)]);}async function updateNumberCoinsCcxt(_0x4752f0){const _0x111224=_0x2ffdd8;logger[_0x111224(0x1e7)]('0\x20-\x20EXECUTION:\x20'+_0x4752f0[_0x111224(0x25a)]+_0x111224(0x1be)+_0x4752f0[_0x111224(0x18d)]+_0x111224(0x1be)+_0x4752f0[_0x111224(0x25f)]+_0x111224(0x1e4)+_0x4752f0[_0x111224(0x183)]+_0x111224(0x1be)+_0x4752f0['id']);let _0x19b5b0=_0x4752f0[_0x111224(0x18d)],_0xf9d2d2=![];currentCoins[_0x111224(0x17e)](_0x4069ba=>{const _0x58520a=_0x111224;_0x4069ba[_0x58520a(0x25a)]==_0x4752f0['symbol']&&(_0xf9d2d2=!![]);});if(!_0xf9d2d2)return;const _0x22eb9c=currentCoins['find'](_0x2d896f=>_0x2d896f[_0x111224(0x25a)]==_0x4752f0[_0x111224(0x25a)]),_0x5575d4=_0x22eb9c[_0x111224(0x238)],_0x1685a2=_0x378306=>{const _0x469923=_0x111224,_0x1a1ff9=currentCoins['find'](_0x2b97fc=>_0x2b97fc[_0x469923(0x25a)]==_0x4752f0['symbol']);if(_0x1a1ff9)_0x1a1ff9['orderstatus']=_0x378306;};let _0x5ed1ad=![];for(const _0x53b055 of lastOrders){const _0x75437=0x64,_0x1f7e50=0x1388;let _0x270c90=0x0;while(!_0x53b055['orderId']&&_0x270c90*_0x75437<_0x1f7e50){_0x270c90++,await sleep(_0x75437);}if(_0x270c90>0x0)logger[_0x111224(0x1e7)](_0x111224(0x21a)+_0x270c90*_0x75437/0x3e8+_0x111224(0xc1));_0x53b055['orderId']==_0x4752f0['id']&&(_0x5ed1ad=!![]);}if(_0x19b5b0==_0x111224(0xfe)){_0x1685a2(_0x111224(0xfe));if(_0x4752f0[_0x111224(0x25f)]>0x0&&_0x4752f0[_0x111224(0x25f)]<_0x4752f0[_0x111224(0x183)]){if(_0x5ed1ad){setBlockTransactionDetection(!![]),logger[_0x111224(0x1e7)](_0x111224(0x160)+_0x4752f0[_0x111224(0x25f)]+_0x111224(0x1a5)+_0x4752f0['id']);const _0x1fac59=await getCoins(balanceUpdateDelay,undefined,undefined,_0x5575d4);[currentCoins,currentCoinsAll]=_0x1fac59,setBlockTransactionDetection(![]);}else logger[_0x111224(0x1e7)](_0x111224(0x160)+_0x4752f0[_0x111224(0x25f)]+_0x111224(0x203)+_0x4752f0['id']),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay);}}else{if(_0x19b5b0==_0x111224(0x151)){_0x1685a2('canceled'),lastOrders=lastOrders['filter'](_0x2c9771=>_0x2c9771[_0x111224(0x25a)]!=_0x4752f0[_0x111224(0x25a)]);const _0x77d579=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x77d579,setBlockTransactionDetection(![]),await getOpenOrders(),handleOpenOrders();}else{if(_0x19b5b0==_0x111224(0x24b)){if(lastOrders)for(const _0x1ec7cb of lastOrders){if(_0x1ec7cb[_0x111224(0x162)]==_0x4752f0['id']){logger[_0x111224(0x1e7)]('1\x20-\x20FILLED\x20known\x20order:\x20'+_0x4752f0['id']),_0x5ed1ad=!![];if(_0x1ec7cb['filled']==0x0){setBlockTransactionDetection(!![]),logger[_0x111224(0x1e7)](_0x111224(0x1bb)+_0x4752f0['id']);if(_0x4752f0[_0x111224(0x10a)])_0x1ec7cb[_0x111224(0x110)]=_0x4752f0[_0x111224(0x10a)];else{if(_0x4752f0[_0x111224(0x110)])_0x1ec7cb[_0x111224(0x110)]=_0x4752f0[_0x111224(0x110)];else{}}_0x1ec7cb[_0x111224(0x25f)]=_0x4752f0[_0x111224(0x25f)],updateHighestFee(_0x1ec7cb);const _0x3bdbfc=await getCoins(balanceUpdateDelay,undefined,undefined,_0x5575d4);[currentCoins,currentCoinsAll]=_0x3bdbfc,setBlockTransactionDetection(![]),await validateOrders(),_0x1685a2(_0x111224(0x25f)),_0x1ec7cb[_0x111224(0x268)]={'currency':_0x4752f0[_0x111224(0x268)]?_0x4752f0['fee'][_0x111224(0x1e3)]:null,'cost':_0x4752f0['fee']?_0x4752f0[_0x111224(0x268)][_0x111224(0x212)]:0x0},await updatePnL(_0x1ec7cb);}}}!_0x5ed1ad&&(logger[_0x111224(0x1e7)](_0x111224(0xe4)+_0x4752f0['id']),_0x1685a2(_0x111224(0x25f)),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay),await updateOpenOrders(),handleOpenOrders());}}}if(lastBalances){let _0x1bb7f5=JSON[_0x111224(0x21b)](lastBalances[_0x111224(0x1b0)]);const _0x3564f2=_0x1bb7f5[_0x111224(0x240)](_0x593951=>_0x593951[_0x111224(0x25a)]==_0x4752f0[_0x111224(0x25a)]);if(_0x3564f2){if(_0x19b5b0=='open')_0x3564f2[_0x111224(0x13d)]=_0x3564f2[_0x111224(0x13d)]=='filled'?_0x111224(0x25f):_0x111224(0xfe);else{if(_0x19b5b0==_0x111224(0x151))_0x3564f2['orderstatus']=_0x3564f2[_0x111224(0x13d)]==_0x111224(0x25f)?_0x111224(0x25f):_0x111224(0x151);else _0x19b5b0=='closed'&&(_0x3564f2[_0x111224(0x13d)]=_0x111224(0x25f));}}lastBalances={...lastBalances,'portfolio':JSON[_0x111224(0x1b1)](_0x1bb7f5)},proxyEmit(_0x111224(0x180),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x117937=_0x2ffdd8;await getOpenOrders();let _0x1ccab1=![];currentCoins[_0x117937(0x17e)](_0x13257d=>{const _0x497b93=_0x117937;_0x1ccab1=allOpenOrders[_0x497b93(0x240)](_0x2aefc8=>_0x2aefc8['symbol']==_0x13257d[_0x497b93(0x25a)]),_0x13257d['orderstatus']=_0x1ccab1?_0x497b93(0xfe):_0x497b93(0x135);});}async function fetchBalance(_0x548927=!![]){const _0x26a1c4=_0x2ffdd8;let _0x10aead,_0x51add4,_0x523d2b,_0x521ad0=0x0;while(!_0x51add4&&_0x521ad0<maxRetries){try{return _0x10aead=await exchange[_0x26a1c4(0x27d)](),_0x51add4=_0x10aead[_0x26a1c4(0x204)],_0x51add4;}catch(_0x1810fa){_0x523d2b=_0x1810fa,_0x521ad0++,await sleep(retryInterval);}}return!_0x548927?handleErrorNoStop(_0x523d2b,'fetchBalance()'):await handleError(_0x523d2b,_0x26a1c4(0x173)),![];}async function getCoins(_0x272d2d=0x0,_0x52dc55=!![],_0x49047e=config[_0x2ffdd8(0x24d)],_0x5c3aed){const _0x2ae613=_0x2ffdd8;let _0x5ea744=[],_0x2ca9d2=[],_0x55bc5f=[],_0xd6eb91;if(_0x272d2d)await sleep(_0x272d2d);if(botPaused)return[currentCoins,currentCoinsAll];let _0xd349f3=![],_0x1c563e=0x0,_0x11eed5,_0x5ea9d3;_0x5c3aed&&(_0x11eed5=currentCoins['find'](_0x4eee46=>_0x4eee46[_0x2ae613(0x238)]==_0x5c3aed),_0x11eed5&&(_0x5ea9d3=_0x11eed5[_0x2ae613(0x1d4)],delete _0x11eed5[_0x2ae613(0x1d4)]));while(!_0xd349f3){_0xd6eb91=await fetchBalance(_0x52dc55);if(_0xd6eb91){if(_0x5c3aed){if(_0xd6eb91[_0x5c3aed]!=_0x5ea9d3)logger[_0x2ae613(0x1e7)](_0x2ae613(0x22c)+_0x5c3aed+':\x20'+_0xd6eb91[_0x5c3aed]+'\x20('+_0x5ea9d3+')'),_0xd349f3=!![];else{logger[_0x2ae613(0x1e7)](_0x2ae613(0x288)+_0x5c3aed+':\x20'+_0xd6eb91[_0x5c3aed]+'\x20('+_0x5ea9d3+')'),_0x1c563e++;if(_0x1c563e<balanceUpdateRetries)await sleep(balanceUpdateDelay);else{logger[_0x2ae613(0x1e7)]('Stopped\x20fetching\x20balance\x20after\x20'+_0x1c563e+_0x2ae613(0x270));break;}}}else break;}else return[currentCoins,currentCoinsAll];}for(const [_0x3a5382,_0x3975b7]of Object[_0x2ae613(0x210)](_0xd6eb91)){_0x55bc5f['push'](_0x3a5382);}config['portfolio']['forEach'](_0x328b66=>{const _0x3d7f6f=_0x2ae613;!_0x55bc5f[_0x3d7f6f(0x159)](_0x328b66[_0x3d7f6f(0x238)])&&(_0xd6eb91[_0x328b66['coin']]=0x0);});if(_0x49047e=='')for(const [_0x570acd,_0x2f19e7]of Object['entries'](_0xd6eb91)){_0x2f19e7!=0x0&&_0x5ea744[_0x2ae613(0xf3)]({'coin':_0x570acd});}else for(const [_0x1662be,_0x27410e]of Object['entries'](_0xd6eb91)){const _0x2e69d7=config[_0x2ae613(0x1b0)][_0x2ae613(0x240)](_0x3510a5=>_0x3510a5[_0x2ae613(0x238)]==_0x1662be),_0x406279=_0x1662be+'/'+_0x49047e,_0x32cfaf=_0x49047e+'/'+_0x1662be,_0x28ee45=currentCoins['find'](_0x8cc8c2=>_0x8cc8c2[_0x2ae613(0x238)]==_0x1662be);if((_0x27410e!=0x0||_0x2e69d7)&&(allSymbols[_0x2ae613(0x159)](_0x406279)||_0x1662be==_0x49047e))_0x28ee45?_0x5ea744[_0x2ae613(0xf3)]({..._0x28ee45,'number':Math['max'](_0x27410e+(_0x2e69d7&&_0x2e69d7[_0x2ae613(0x23e)]||0x0),0x0)}):_0x5ea744[_0x2ae613(0xf3)]({'coin':_0x1662be,'symbol':_0x406279,'reverse':![],'number':Math[_0x2ae613(0x1bc)](_0x27410e+(_0x2e69d7&&_0x2e69d7['offset']||0x0),0x0),'orderstatus':_0x2ae613(0x135)});else{if((_0x27410e!=0x0||_0x2e69d7)&&allSymbols[_0x2ae613(0x159)](_0x32cfaf))_0x28ee45?_0x5ea744[_0x2ae613(0xf3)]({..._0x28ee45,'number':Math['max'](_0x27410e+(_0x2e69d7&&_0x2e69d7[_0x2ae613(0x23e)]||0x0),0x0)}):_0x5ea744['push']({'coin':_0x1662be,'symbol':_0x32cfaf,'reverse':!![],'number':Math[_0x2ae613(0x1bc)](_0x27410e+(_0x2e69d7&&_0x2e69d7['offset']||0x0),0x0),'orderstatus':'none'});else _0x2e69d7&&_0x5ea744[_0x2ae613(0xf3)]({'coin':_0x2e69d7[_0x2ae613(0x238)],'symbol':_0x2e69d7[_0x2ae613(0x25a)],'reverse':_0x2e69d7[_0x2ae613(0x1e6)],'number':0x0,'orderstatus':'none'});}}return _0x5ea744[_0x2ae613(0x137)]((_0x56bd98,_0x18ed16)=>_0x56bd98['delta']<_0x18ed16[_0x2ae613(0x132)]?0x1:_0x18ed16[_0x2ae613(0x132)]<_0x56bd98[_0x2ae613(0x132)]?-0x1:0x0),_0x2ca9d2=cloneDeep(_0x5ea744),_0x5ea744=_0x5ea744[_0x2ae613(0x12f)](_0x501c9e=>{const _0x298d5b=_0x2ae613,_0x20c696=config[_0x298d5b(0x1b0)][_0x298d5b(0x240)](_0x2512ce=>_0x2512ce[_0x298d5b(0x238)]==_0x501c9e[_0x298d5b(0x238)]);return _0x20c696&&!_0x20c696[_0x298d5b(0x1e8)];}),[_0x5ea744,_0x2ca9d2];}async function getOpenOrders(){const _0x3109c=_0x2ffdd8;let _0x1d9f21;allOpenOrders=[];try{for(const _0x43bec1 of config[_0x3109c(0x1b0)]){!_0x43bec1[_0x3109c(0x1e8)]&&_0x43bec1[_0x3109c(0x238)]!=config[_0x3109c(0x24d)]&&(_0x1d9f21=await exchange[_0x3109c(0x19a)](_0x43bec1['symbol']),_0x1d9f21[_0x3109c(0x228)]>0x0&&allOpenOrders[_0x3109c(0xf3)](_0x1d9f21[0x0]));}}catch(_0x12bfef){await handleError(_0x12bfef,_0x3109c(0x1ba));}}async function handleOpenOrders(_0x48c05c=0x0){const _0x527a51=_0x2ffdd8;allOpenOrders[_0x527a51(0x228)]==0x0&&lockOrders==ORDERS[_0x527a51(0x108)]&&allOrdersPlaced&&(_0x48c05c==0x0?(logger[_0x527a51(0x1e7)](_0x527a51(0x1ea)),_0x48c05c++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x527a51(0x1e7)](_0x527a51(0x255)),validateOrders(_0x527a51(0x1de))));}async function testAPI(){const _0x267083=_0x2ffdd8;try{return await exchange[_0x267083(0x27d)](),!![];}catch(_0xbc6302){loading[_0x267083(0x298)]=!![],_0xbc6302['toString']()[_0x267083(0x18f)]()[_0x267083(0x159)](_0x267083(0xbb))||_0xbc6302['toString']()[_0x267083(0x18f)]()[_0x267083(0x159)](_0x267083(0xd4))?(logHistory('error',_0x267083(0x185)),loading[_0x267083(0x295)]=_0x267083(0x148)):handleErrorNoStop(_0xbc6302,_0x267083(0x1a6),!![]),logHistory(_0x267083(0x295),_0x267083(0xdf)),logHistory(_0x267083(0x295),'Pausing\x20for\x20'+loadCoinsRetryInterval/0xea60+_0x267083(0x251)),logger[_0x267083(0x1e7)]('Error\x20details:',_0xbc6302),emitLoadingProgress(),botPaused=!![],await sleep(loadCoinsRetryInterval),restartBot();}}async function testNewAPI(_0x543b31){const _0x4063d7=_0x2ffdd8;logger[_0x4063d7(0x1e7)](_0x4063d7(0x213));const _0x54fca0=ccxt[_0x4063d7(0x1f5)][_0x543b31[_0x4063d7(0x216)][_0x4063d7(0x18f)]()],_0x10defc=new _0x54fca0({'apiKey':_0x543b31[_0x4063d7(0x23a)],'secret':_0x543b31[_0x4063d7(0x277)],'options':{'defaultType':_0x4063d7(0x1d0)}});if(_0x543b31[_0x4063d7(0x237)])_0x10defc[_0x4063d7(0x16e)]=_0x543b31[_0x4063d7(0x237)];if(_0x10defc[_0x4063d7(0x27e)][_0x4063d7(0x186)])_0x10defc[_0x4063d7(0x14f)](_0x543b31[_0x4063d7(0x186)]);if(_0x543b31[_0x4063d7(0x216)][_0x4063d7(0x18f)]()==_0x4063d7(0x29a))_0x10defc[_0x4063d7(0x221)][_0x4063d7(0x15c)]=operatorId;try{await _0x10defc[_0x4063d7(0x27d)](),botPaused=![];}catch(_0x58895d){logger['debug'](_0x4063d7(0x1da)+_0x58895d[_0x4063d7(0x1f2)]());throw _0x58895d;}}function cloneDeep(_0x6a473d){const _0x572cb0=_0x2ffdd8;return JSON['parse'](JSON[_0x572cb0(0x1b1)](_0x6a473d));}async function getPortfolio(_0x3e8ef9){const _0x2c3c17=_0x2ffdd8;let _0x45fe9b=[],_0x57f66d=[],_0x22144e=[],_0x5658d8;_0x3e8ef9['apiKey']=decryptRSA(secure[_0x2c3c17(0x1cb)],_0x3e8ef9[_0x2c3c17(0x23a)]),_0x3e8ef9[_0x2c3c17(0x277)]=decryptRSA(secure[_0x2c3c17(0x1cb)],_0x3e8ef9[_0x2c3c17(0x277)]);if(_0x3e8ef9[_0x2c3c17(0x237)])_0x3e8ef9[_0x2c3c17(0x237)]=decryptRSA(secure[_0x2c3c17(0x1cb)],_0x3e8ef9[_0x2c3c17(0x237)]);if(_0x3e8ef9[_0x2c3c17(0x23a)]!==_0x2c3c17(0x1cc)||_0x3e8ef9['apiSecret']!=='************'||_0x3e8ef9[_0x2c3c17(0x237)]&&_0x3e8ef9[_0x2c3c17(0x237)]!=='************'){if(config[_0x2c3c17(0x216)]){if(_0x3e8ef9[_0x2c3c17(0x23a)]==_0x2c3c17(0x1cc))_0x3e8ef9[_0x2c3c17(0x23a)]=config[_0x2c3c17(0x23a)];if(_0x3e8ef9['apiSecret']==_0x2c3c17(0x1cc))_0x3e8ef9[_0x2c3c17(0x277)]=config[_0x2c3c17(0x277)];if(_0x3e8ef9['apiPassword']=='************')_0x3e8ef9[_0x2c3c17(0x237)]=config['apiPassword'];}try{if(_0x3e8ef9[_0x2c3c17(0x1f7)])await testNewAPI(_0x3e8ef9);}catch(_0x31cb85){if(_0x31cb85[_0x2c3c17(0x1f2)]()['includes'](_0x2c3c17(0x28f))){logHistory(_0x2c3c17(0x295),_0x2c3c17(0x138)),logHistory(_0x2c3c17(0x295),_0x2c3c17(0x23d)+_0x31cb85[_0x2c3c17(0x1f2)]()),proxyEmit(_0x2c3c17(0xcd),![]);return;}else{if(_0x31cb85[_0x2c3c17(0x1f2)]()['includes'](_0x2c3c17(0xe5))){logHistory(_0x2c3c17(0x295),_0x2c3c17(0x241)),logHistory(_0x2c3c17(0x295),_0x2c3c17(0x23d)+_0x31cb85[_0x2c3c17(0x1f2)]()),proxyEmit('portfolio1',![]);return;}else{logHistory('error',_0x2c3c17(0x10b)+_0x31cb85[_0x2c3c17(0x1f2)]()),logger['debug']('Error\x20details:',_0x31cb85),proxyEmit(_0x2c3c17(0xcd),![]);return;}}}exchange?updateExchange(_0x3e8ef9['apiKey'],_0x3e8ef9[_0x2c3c17(0x277)],_0x3e8ef9[_0x2c3c17(0x237)]):await initExchange(_0x3e8ef9[_0x2c3c17(0x216)],_0x3e8ef9['apiKey'],_0x3e8ef9['apiSecret'],_0x3e8ef9[_0x2c3c17(0x237)],_0x3e8ef9[_0x2c3c17(0x186)]);await loadSymbols();const _0x3f1aeb=await getCoins(0x0,![],_0x3e8ef9[_0x2c3c17(0x24d)]);_0x22144e=cloneDeep(_0x3f1aeb[0x1]);}else{const _0x350454=await getCoins();_0x22144e=cloneDeep(_0x350454[0x1]);}if(_0x3e8ef9[_0x2c3c17(0x24d)]=='')proxyEmit(_0x2c3c17(0xcd),!![]),proxyEmit(_0x2c3c17(0x28e),_0x22144e);else{_0x22144e[_0x2c3c17(0x17e)](_0x1e8a12=>{const _0x14aaea=_0x2c3c17;if(_0x1e8a12['coin']!=_0x3e8ef9[_0x14aaea(0x24d)]&&allSymbols[_0x14aaea(0x159)](_0x1e8a12[_0x14aaea(0x25a)]))_0x45fe9b[_0x14aaea(0xf3)](_0x1e8a12[_0x14aaea(0x25a)]);});if(_0x45fe9b[_0x2c3c17(0x228)]==0x0)logHistory('error',_0x2c3c17(0x23f));else{try{_0x57f66d=await getTickers(_0x45fe9b);}catch(_0xb542d2){logHistory(_0x2c3c17(0x295),_0x2c3c17(0x190)),logger[_0x2c3c17(0x1e7)](_0x2c3c17(0xb6),_0xb542d2),proxyEmit(_0x2c3c17(0xcd),![]);return;}_0x22144e[_0x2c3c17(0x17e)](_0x5c00da=>{const _0x25ad5c=_0x2c3c17;_0x5c00da[_0x25ad5c(0x238)]!=_0x3e8ef9[_0x25ad5c(0x24d)]?_0x57f66d[_0x5c00da[_0x25ad5c(0x25a)]]?_0x57f66d[_0x5c00da[_0x25ad5c(0x25a)]]['last']?_0x5658d8=_0x5c00da['reverse']?0x1/_0x57f66d[_0x5c00da['symbol']][_0x25ad5c(0x170)]:_0x57f66d[_0x5c00da[_0x25ad5c(0x25a)]][_0x25ad5c(0x170)]:_0x5658d8=0x0:_0x5658d8=0x0:_0x5658d8=0x1,_0x5c00da[_0x25ad5c(0x110)]=formatResult(_0x5658d8,0x8);}),await getMarketCap(_0x22144e),proxyEmit(_0x2c3c17(0xcd),!![]),proxyEmit('portfolio2',_0x22144e);}}}function truncateTradeAmount(_0x43be10,_0x15f01a){const _0x2b90c0=_0x2ffdd8;let _0x4b077c=0x0;try{_0x4b077c=exchange[_0x2b90c0(0x12d)](_0x43be10,_0x15f01a);}catch(_0x3aa772){}return _0x4b077c;}function checkMinimums(_0x5b2dd1){const _0x584dae=_0x2ffdd8;let _0x167f21=!![];const _0x222561=!_0x5b2dd1[_0x584dae(0x1e6)]?markets[_0x5b2dd1['symbol']]['limits'][_0x584dae(0x183)]['min']:markets[_0x5b2dd1[_0x584dae(0x25a)]][_0x584dae(0x227)]['cost'][_0x584dae(0x12e)],_0x86bc4d=!_0x5b2dd1['reverse']?markets[_0x5b2dd1[_0x584dae(0x25a)]]['limits'][_0x584dae(0x212)]['min']:markets[_0x5b2dd1[_0x584dae(0x25a)]][_0x584dae(0x227)][_0x584dae(0x183)][_0x584dae(0x12e)],_0x438949=truncateTradeAmount(_0x5b2dd1[_0x584dae(0x25a)],_0x5b2dd1['trade']);_0x5b2dd1['trade']=_0x438949;if(Math['abs'](_0x438949)<_0x222561)_0x167f21=![];if(Math[_0x584dae(0x118)](_0x438949)*_0x5b2dd1[_0x584dae(0x170)]<_0x86bc4d)_0x167f21=![];let _0x2658f7='';if(_0x5b2dd1[_0x584dae(0x14e)]==_0x584dae(0x22a)){let _0x10a2ba=config[_0x584dae(0x1b0)][_0x584dae(0x240)](_0x43f465=>_0x43f465[_0x584dae(0x238)]==_0x5b2dd1[_0x584dae(0x238)]);_0x10a2ba[_0x584dae(0x23e)]>0x0?Math['abs'](_0x438949)>_0x5b2dd1[_0x584dae(0x17b)]-_0x10a2ba[_0x584dae(0x23e)]&&(_0x167f21=![],_0x2658f7=_0x584dae(0x1b3)+_0x10a2ba['coin']+_0x584dae(0x275)):Math[_0x584dae(0x118)](_0x438949)>_0x5b2dd1[_0x584dae(0x17b)]&&(_0x167f21=![]);}if(_0x5b2dd1[_0x584dae(0x14e)]==_0x584dae(0x254)){let _0x35a8e5=config[_0x584dae(0x1b0)][_0x584dae(0x240)](_0x2d2377=>_0x2d2377[_0x584dae(0x238)]==config[_0x584dae(0x24d)]),_0x5b9337=currentCoins[_0x584dae(0x240)](_0x35d088=>_0x35d088[_0x584dae(0x238)]==config[_0x584dae(0x24d)]);_0x35a8e5[_0x584dae(0x23e)]>0x0?Math[_0x584dae(0x118)](_0x438949)*_0x5b2dd1[_0x584dae(0x170)]>_0x5b9337[_0x584dae(0x17b)]-_0x35a8e5[_0x584dae(0x23e)]&&(_0x167f21=![],_0x2658f7=_0x584dae(0x1b3)+config[_0x584dae(0x24d)]+'\x20due\x20to\x20offset'):Math['abs'](_0x438949)*_0x5b2dd1[_0x584dae(0x170)]>_0x5b9337[_0x584dae(0x17b)]&&(_0x167f21=![]);}return!_0x167f21&&_0x2658f7&&!insufficientFundsWarningSent[_0x584dae(0x159)](_0x5b2dd1[_0x584dae(0x238)])&&(logHistory(_0x584dae(0x1bf),_0x2658f7),insufficientFundsWarningSent[_0x584dae(0xf3)](_0x5b2dd1['coin'])),_0x167f21;}async function getBalances(_0x267ed1=!![]){const _0x4758d1=_0x2ffdd8;if(botPaused)return;let _0x3da7a5=0x0,_0x3e4260;const _0x2213e1=config['threshold'];if(config['headless']&&config[_0x4758d1(0x149)]<0x0)await validate24hChanges();currentCoins['forEach'](_0x1e8882=>{const _0x19f53f=_0x4758d1;if(_0x1e8882[_0x19f53f(0x238)]!=config['basecoin']){let _0x32b2f4=gTicker[noslash(_0x1e8882[_0x19f53f(0x25a)])];_0x3e4260=_0x1e8882[_0x19f53f(0x1e6)]?0x1/_0x32b2f4:_0x32b2f4;}else _0x3e4260=0x1;let _0x4beece=_0x1e8882[_0x19f53f(0x17b)]*_0x3e4260;_0x3da7a5+=_0x4beece,_0x1e8882[_0x19f53f(0x170)]=formatResult(Number(_0x3e4260),0x8),_0x1e8882[_0x19f53f(0x133)]=_0x4beece;}),currentCoins['forEach'](_0x5a9eb1=>{const _0x20249b=_0x4758d1;let _0x57eb4c=config[_0x20249b(0x1b0)][_0x20249b(0x240)](_0x463783=>_0x463783[_0x20249b(0x238)]==_0x5a9eb1[_0x20249b(0x238)]),_0x32933e=Number(_0x57eb4c[_0x20249b(0x1b7)]),_0x13fb72=_0x5a9eb1[_0x20249b(0x133)]/_0x3da7a5*0x64,_0x2cadc3=_0x32933e*_0x3da7a5/0x64/_0x5a9eb1[_0x20249b(0x170)]-_0x5a9eb1[_0x20249b(0x17b)];_0x5a9eb1[_0x20249b(0x1b7)]=formatResult(_0x13fb72,0x3),_0x5a9eb1[_0x20249b(0x206)]=formatResult(_0x32933e,0x3),_0x5a9eb1[_0x20249b(0x1c2)]=formatResult(_0x2cadc3,0x8),_0x5a9eb1['side']='',_0x5a9eb1['valid']=![];if(_0x5a9eb1[_0x20249b(0x238)]!=config[_0x20249b(0x24d)]){if(_0x5a9eb1['distribution']>_0x32933e)_0x5a9eb1[_0x20249b(0x14e)]=_0x20249b(0x22a),_0x5a9eb1[_0x20249b(0x127)]=checkMinimums(_0x5a9eb1);else _0x5a9eb1[_0x20249b(0x1b7)]<_0x32933e&&(_0x5a9eb1[_0x20249b(0x14e)]=_0x20249b(0x254),_0x5a9eb1[_0x20249b(0x127)]=checkMinimums(_0x5a9eb1));}_0x5a9eb1['delta']=_0x5a9eb1[_0x20249b(0x206)]==0x0?0x270f:_0x5a9eb1['distribution']/_0x5a9eb1[_0x20249b(0x206)]-0x1;if(_0x5a9eb1[_0x20249b(0x13d)]==_0x20249b(0x25f)||_0x5a9eb1[_0x20249b(0x13d)]==_0x20249b(0x151))_0x5a9eb1[_0x20249b(0x13d)]='none';}),currentCoins[_0x4758d1(0x137)]((_0x37350c,_0x6976fb)=>_0x37350c['delta']<_0x6976fb[_0x4758d1(0x132)]?0x1:_0x6976fb[_0x4758d1(0x132)]<_0x37350c[_0x4758d1(0x132)]?-0x1:0x0);const _0x85fa50=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x85fa50[_0x4758d1(0x259)],'usd':_0x85fa50[_0x4758d1(0x19c)],'portfolio':JSON[_0x4758d1(0x1b1)](currentCoins),'threshold':_0x2213e1},proxyEmit(_0x4758d1(0x180),{'serverversion':serverversion,'balances':lastBalances});if(_0x267ed1){if(config[_0x4758d1(0x205)])headlessMode({'portfolio':currentCoins,'threshold':_0x2213e1});else lockOrders==ORDERS[_0x4758d1(0x209)]&&!coolingDown&&notifyBalance({'portfolio':currentCoins,'threshold':_0x2213e1});}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0xee1ebd=getNormalizedPerformance();getStartingBalances(_0xee1ebd),emitPerformance(_0xee1ebd);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}function getPnL(){const _0x1fff1a=_0x2ffdd8;let _0xa63de=dbCoinResults[_0x1fff1a(0x150)]('coins')[_0x1fff1a(0x133)](),_0x212c9f=0x0;return Object['entries'](_0xa63de)[_0x1fff1a(0x17e)](([_0x5ed43f,_0x4af339])=>{const _0x125e7a=_0x1fff1a;_0x212c9f+=_0x4af339[_0x125e7a(0x281)];}),_0x212c9f;}async function storePerformance(){const _0xbf26fd=_0x2ffdd8;if(!lastBalances)return;let _0x5833ab=[],_0x548738;const _0x40bcca=getPnL();let _0x4eaac4=JSON[_0xbf26fd(0x21b)](lastBalances['portfolio']);_0x4eaac4[_0xbf26fd(0x137)]((_0x407b76,_0x56014d)=>_0x407b76[_0xbf26fd(0x238)]>_0x56014d[_0xbf26fd(0x238)]?0x1:_0x56014d[_0xbf26fd(0x238)]>_0x407b76[_0xbf26fd(0x238)]?-0x1:0x0),_0x4eaac4['forEach'](_0x28c1c8=>{const _0x19e8cc=_0xbf26fd;let _0x37e22b={'coin':_0x28c1c8['coin'],'number':_0x28c1c8[_0x19e8cc(0x17b)],'price':_0x28c1c8[_0x19e8cc(0x170)]};_0x5833ab[_0x19e8cc(0xf3)](_0x37e22b);});const _0xb06a29=await getFiat(),_0x2274c6=getTimeStamp()[_0xbf26fd(0x18e)]('\x20')[0x0],_0x529433=dbPerformance[_0xbf26fd(0x150)](_0xbf26fd(0x299))[_0xbf26fd(0x240)]({'date':_0x2274c6})[_0xbf26fd(0x133)]();_0x548738={'date':_0x2274c6,'eur':_0xb06a29[_0xbf26fd(0x259)],'usd':_0xb06a29[_0xbf26fd(0x19c)],'coins':_0x5833ab,'pnl':_0x40bcca},_0x529433?_0x548738['date']!=config[_0xbf26fd(0x226)]&&dbPerformance[_0xbf26fd(0x150)]('data')['find']({'date':_0x2274c6})[_0xbf26fd(0xc4)](_0x548738)[_0xbf26fd(0x1e9)]():dbPerformance[_0xbf26fd(0x150)]('data')['push'](_0x548738)[_0xbf26fd(0x1e9)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x549e9b=_0x2ffdd8;let _0x2533dc=[];if(dbPerformance[_0x549e9b(0x27e)]('data')[_0x549e9b(0x133)]()){let _0x5d7ecc=dbPerformance[_0x549e9b(0x150)](_0x549e9b(0x299))[_0x549e9b(0x153)]()[_0x549e9b(0x12f)](_0x4cd8cb=>{const _0x1117df=_0x549e9b;if(_0x4cd8cb[_0x1117df(0x147)][_0x1117df(0x228)]==0x0)return![];else return!![];})['sortBy'](_0x549e9b(0xba))[_0x549e9b(0x133)](),_0x4b0cf9=[...config[_0x549e9b(0x174)]];_0x4b0cf9['sort']((_0xc05624,_0xe682ee)=>_0xc05624[_0x549e9b(0xba)]>_0xe682ee[_0x549e9b(0xba)]?-0x1:_0xe682ee[_0x549e9b(0xba)]>_0xc05624['date']?0x1:0x0);let _0x4840ab=0x1,_0x68d00e=[],_0x1be8e1=0x0;_0x5d7ecc['slice']()[_0x549e9b(0x1e6)]()[_0x549e9b(0x17e)]((_0x3eabad,_0x5d61f1)=>{const _0x18b879=_0x549e9b;if(_0x4b0cf9[_0x1be8e1]){if(_0x5d7ecc[_0x5d7ecc['length']-_0x5d61f1]&&_0x4b0cf9[_0x1be8e1]['date']==_0x5d7ecc[_0x5d7ecc[_0x18b879(0x228)]-_0x5d61f1][_0x18b879(0xba)]){if(_0x5d61f1<_0x5d7ecc[_0x18b879(0x228)]){let _0x5eaa9a=0x0,_0x51da94=0x0;_0x5d7ecc[_0x5d7ecc['length']-_0x5d61f1][_0x18b879(0x147)][_0x18b879(0x17e)](_0x497fe2=>{const _0xcce25=_0x18b879;_0x51da94+=_0x497fe2[_0xcce25(0x17b)]*_0x497fe2['price'];}),_0x4b0cf9[_0x1be8e1][_0x18b879(0x28d)][_0x18b879(0x17e)](_0x82e7a8=>{const _0x403527=_0x18b879;_0x5eaa9a+=_0x82e7a8['number']*_0x82e7a8[_0x403527(0x110)];}),_0x4840ab*=_0x5eaa9a/(_0x51da94-_0x5eaa9a)+0x1;}_0x1be8e1++;}}let _0x1d2637=0x0;_0x3eabad[_0x18b879(0x147)][_0x18b879(0x17e)](_0x30cffa=>{const _0x1af38e=_0x18b879;_0x1d2637+=_0x30cffa['number']*_0x30cffa[_0x1af38e(0x110)];}),_0x68d00e[_0x5d7ecc[_0x18b879(0x228)]-_0x5d61f1-0x1]=_0x1d2637*(_0x4840ab-0x1);});let _0x2594b2=[];_0x4b0cf9=[...config['liquidity']]||[];let _0x41a38a=0x0;_0x1be8e1=0x0,_0x5d7ecc[_0x549e9b(0x17e)]((_0x2d9019,_0x5c4e3b)=>{const _0x3b77a8=_0x549e9b;if(_0x4b0cf9[_0x1be8e1]){const _0x1e80f2=fns[_0x3b77a8(0x21b)](_0x4b0cf9[_0x1be8e1]['date'],_0x3b77a8(0xbd),new Date()),_0x163af=fns['parse'](_0x2d9019[_0x3b77a8(0xba)],_0x3b77a8(0xbd),new Date());if(fns[_0x3b77a8(0x140)](_0x1e80f2,_0x163af)){let _0x45f2e5=0x0;_0x4b0cf9[_0x1be8e1]['changes']['forEach'](_0x3be7b0=>{const _0x306b47=_0x3b77a8;!_0x2594b2[_0x3be7b0[_0x306b47(0x238)]]?_0x2594b2[_0x3be7b0[_0x306b47(0x238)]]=_0x3be7b0[_0x306b47(0x17b)]:(_0x45f2e5=_0x2594b2[_0x3be7b0[_0x306b47(0x238)]],_0x2594b2[_0x3be7b0[_0x306b47(0x238)]]+=_0x3be7b0[_0x306b47(0x17b)]);const _0x1b0290=_0x2d9019[_0x306b47(0x147)][_0x306b47(0x240)](_0x178740=>_0x178740[_0x306b47(0x238)]==_0x3be7b0[_0x306b47(0x238)]);(!_0x1b0290||_0x1b0290['number']==0x0)&&(_0x41a38a+=(-_0x3be7b0[_0x306b47(0x17b)]-_0x45f2e5)*_0x3be7b0[_0x306b47(0x110)]);}),_0x1be8e1++;}}_0x2d9019[_0x3b77a8(0x147)]['forEach']((_0x4d6fcc,_0x4f11c7)=>{const _0x7797b5=_0x3b77a8;_0x2594b2[_0x4d6fcc[_0x7797b5(0x238)]]&&(_0x4d6fcc[_0x7797b5(0xe2)]=_0x2594b2[_0x4d6fcc['coin']]);}),_0x2533dc[_0x3b77a8(0xf3)]({'date':_0x2d9019['date'],'eur':_0x2d9019[_0x3b77a8(0x259)],'usd':_0x2d9019[_0x3b77a8(0x19c)],'offset':_0x68d00e[_0x5c4e3b],'netoffset':_0x41a38a,'coins':_0x2d9019[_0x3b77a8(0x147)],'pnl':_0x2d9019[_0x3b77a8(0x19d)]});});}return _0x2533dc;}function emitPerformance(_0x33bf4b){const _0x66b2fc=_0x2ffdd8;_0x33bf4b[_0x66b2fc(0x228)]!==0x0?(proxyEmit('performance',_0x33bf4b),lastPerformanceEmitted=getDate()):proxyEmit(_0x66b2fc(0x25c),[]);}function getPerf(_0x46733a,_0x102f11){const _0x33c4c0=_0x2ffdd8;let _0x321c55=0x0,_0x42136b=0x0,_0x476587=0x0;_0x46733a['coins'][_0x33c4c0(0x17e)](_0x33bce8=>{const _0x68bfcc=_0x33c4c0;_0x321c55+=_0x33bce8[_0x68bfcc(0x17b)]*_0x33bce8[_0x68bfcc(0x110)];});_0x102f11&&(_0x321c55+=_0x46733a['offset']);if(config[_0x33c4c0(0x24d)]===_0x33c4c0(0x106)||config[_0x33c4c0(0x24d)]===_0x33c4c0(0xf9)||config[_0x33c4c0(0x24d)]===_0x33c4c0(0x105))_0x42136b=_0x321c55*_0x46733a[_0x33c4c0(0x259)],_0x476587=_0x321c55*_0x46733a[_0x33c4c0(0x19c)];else{if(usdBasecoins[_0x33c4c0(0x159)](config[_0x33c4c0(0x24d)]))_0x42136b=_0x321c55*_0x46733a[_0x33c4c0(0x259)]/_0x46733a[_0x33c4c0(0x19c)],_0x476587=_0x321c55;else config[_0x33c4c0(0x24d)]==='EUR'&&(_0x42136b=_0x321c55,_0x476587=_0x321c55*_0x46733a[_0x33c4c0(0x19c)]/_0x46733a[_0x33c4c0(0x259)]);}return[_0x321c55,_0x42136b,_0x476587];}function CurrencyFactor(_0x29c6da,_0x461fa5,_0x548385){const _0x43e07e=_0x2ffdd8;let _0x1316f9;if(_0x461fa5==='BTC'||_0x461fa5===_0x43e07e(0xf9)||_0x461fa5===_0x43e07e(0x105))_0x1316f9=_0x548385===_0x43e07e(0x232)?_0x29c6da['eur']:_0x29c6da['usd'];else{if(usdBasecoins['includes'](_0x461fa5))_0x1316f9=_0x548385===_0x43e07e(0x232)?_0x29c6da[_0x43e07e(0x259)]/_0x29c6da[_0x43e07e(0x19c)]:0x1;else _0x461fa5==='EUR'&&(_0x1316f9=_0x548385===_0x43e07e(0x232)?0x1:_0x29c6da[_0x43e07e(0x19c)]/_0x29c6da[_0x43e07e(0x259)]);}return _0x1316f9;}function getKPIs(_0x33080b,_0x562adc='EUR'){const _0x596566=_0x2ffdd8,_0x103c3e=config[_0x596566(0x24d)],_0x5a7da8=lastBalances,_0x29c0e9=currentCoins,_0x1d8050=getNormalizedPerformance(),_0x3adb24=CurrencyFactor(_0x5a7da8,config['basecoin'],_0x562adc);let _0x48231b=0x0;_0x29c0e9[_0x596566(0x17e)](_0x4d9364=>{const _0x6fb68c=_0x596566;_0x48231b+=_0x4d9364['number']*_0x4d9364[_0x6fb68c(0x170)];});_0x33080b['includes']('fiat')&&(_0x48231b*=_0x3adb24);let _0x244d0a;if(_0x48231b!==0x0){if(_0x33080b==='basecoin'||_0x33080b===_0x596566(0x1d1)){if(_0x33080b===_0x596566(0x24d))_0x244d0a=(_0x48231b/startingBalances[_0x596566(0x24d)]-0x1)*0x64;else{if(_0x562adc==='EUR')_0x244d0a=(_0x48231b/startingBalances[_0x596566(0x259)]-0x1)*0x64;else _0x244d0a=(_0x48231b/startingBalances[_0x596566(0x19c)]-0x1)*0x64;}}if(_0x33080b[_0x596566(0x159)](_0x596566(0xee))){let _0x4e0d5d=0x0;if(startingBalances['coins'])_0x29c0e9['forEach'](_0x1e43c7=>{const _0x348164=_0x596566;let _0x5641c9=startingBalances[_0x348164(0x147)]['find'](_0x2f56b9=>_0x2f56b9[_0x348164(0x238)]===_0x1e43c7[_0x348164(0x238)]);if(_0x5641c9&&_0x5641c9[_0x348164(0x238)]&&_0x1e43c7[_0x348164(0x17b)]!==0x0)_0x4e0d5d+=_0x5641c9['number']*_0x1e43c7[_0x348164(0x170)];});let _0x134a5f=0x0;if(_0x1d8050[_0x596566(0x228)]!==0x0){let _0x44c000=_0x1d8050[_0x1d8050[_0x596566(0x228)]-0x1];_0x134a5f=_0x44c000['netoffset'];}_0x4e0d5d-=_0x134a5f;let _0x36b031;_0x33080b===_0x596566(0x144)&&(_0x36b031=startingBalances[_0x596566(0x24d)]),_0x33080b==='net-fiat'&&(_0x36b031=_0x562adc===_0x596566(0x232)?startingBalances[_0x596566(0x259)]:startingBalances[_0x596566(0x19c)],_0x4e0d5d*=_0x3adb24),_0x244d0a=(_0x48231b-_0x4e0d5d)/_0x36b031*0x64,_0x48231b=_0x48231b-_0x4e0d5d;}if(_0x33080b['includes'](_0x596566(0x19d))){if(_0x1d8050[_0x596566(0x228)]!==0x0&&_0x29c0e9['length']!==0x0){let _0x22a978,_0x25b1b5=_0x1d8050[_0x1d8050[_0x596566(0x228)]-0x1][_0x596566(0x19d)];_0x33080b[_0x596566(0x159)](_0x596566(0x1d1))?(_0x22a978=_0x562adc===_0x596566(0x232)?startingBalances[_0x596566(0x259)]:startingBalances[_0x596566(0x19c)],_0x25b1b5*=CurrencyFactor(_0x5a7da8,_0x103c3e,_0x562adc)):_0x22a978=startingBalances[_0x596566(0x24d)],_0x244d0a=_0x25b1b5/_0x22a978*0x64,_0x48231b=_0x25b1b5;}}if(_0x244d0a){if(_0x244d0a<0x64)_0x244d0a=_0x244d0a[_0x596566(0x1ef)](0x2);else{if(_0x244d0a<0x3e8)_0x244d0a=_0x244d0a[_0x596566(0x1ef)](0x1);else _0x244d0a=_0x244d0a[_0x596566(0x1ef)](0x0);}}else _0x244d0a=Number('0')[_0x596566(0x1ef)](0x2);if(_0x48231b){if(Math[_0x596566(0x118)](_0x48231b)<0.000001)_0x48231b=_0x48231b['toFixed'](0x2);else{if(Math['abs'](_0x48231b)<0.1)_0x48231b=_0x48231b[_0x596566(0x1ef)](0x6);else{if(Math[_0x596566(0x118)](_0x48231b)<0x1)_0x48231b=_0x48231b[_0x596566(0x1ef)](0x5);else{if(Math['abs'](_0x48231b)<0xa)_0x48231b=_0x48231b[_0x596566(0x1ef)](0x4);else{if(Math[_0x596566(0x118)](_0x48231b)<0x64)_0x48231b=_0x48231b[_0x596566(0x1ef)](0x3);else{if(Math['abs'](_0x48231b)<0x3e8)_0x48231b=_0x48231b['toFixed'](0x2);else _0x48231b=_0x48231b[_0x596566(0x1ef)](0x2);}}}}}}else _0x48231b=Number('0')[_0x596566(0x1ef)](0x2);}else _0x244d0a=Number('0')[_0x596566(0x1ef)](0x2);if(_0x244d0a>=0x0)_0x244d0a='+'+_0x244d0a;return{'value':_0x48231b,'change':_0x244d0a};}async function getStartingBalances(_0x4908a0,_0x603bb2=!![]){const _0x627c39=_0x2ffdd8;if(_0x4908a0[_0x627c39(0x228)]!==0x0){const [_0x442a6e,_0x158966,_0x4d0f94]=getPerf(_0x4908a0[0x0],!![]);let _0x2eb3c2=[];config[_0x627c39(0x1b0)][_0x627c39(0x17e)](_0x40fce6=>{const _0x1df390=_0x627c39;let _0x11964a=0x0,_0x45b2d4;config[_0x1df390(0x174)]['forEach'](_0x33e016=>{const _0x5b5c58=_0x1df390;let _0x590347=_0x33e016[_0x5b5c58(0x28d)][_0x5b5c58(0x240)](_0x127405=>_0x127405[_0x5b5c58(0x238)]==_0x40fce6[_0x5b5c58(0x238)]);if(_0x590347){_0x11964a+=_0x590347[_0x5b5c58(0x17b)];if(!_0x45b2d4)_0x45b2d4=_0x590347[_0x5b5c58(0x110)];}}),_0x2eb3c2['push']({'coin':_0x40fce6[_0x1df390(0x238)],'number':_0x11964a,'initialprice':_0x45b2d4});});const _0x17cfdf={'basecoin':_0x442a6e,'eur':_0x158966,'usd':_0x4d0f94,'coins':_0x2eb3c2};if(_0x603bb2)proxyEmit(_0x627c39(0x10d),_0x17cfdf);startingBalances=_0x17cfdf;}}function headlessMode(_0x1b16f4){const _0x278b7f=_0x2ffdd8;let _0x1cacf2=_0x1b16f4[_0x278b7f(0x1b0)],_0x583651=_0x1b16f4[_0x278b7f(0xf5)],_0x4e3d28=[];for(let _0x2156a2 of _0x1cacf2){if(_0x2156a2['coin']!=config['basecoin']){if(_0x2156a2[_0x278b7f(0x132)]>=_0x583651/0x64){if(_0x2156a2[_0x278b7f(0x127)])_0x4e3d28[_0x278b7f(0xf3)](_0x2156a2);}else{if(_0x2156a2[_0x278b7f(0x132)]<=-_0x583651/0x64){if(_0x2156a2[_0x278b7f(0x127)])_0x4e3d28[_0x278b7f(0xf3)](_0x2156a2);}}}}_0x4e3d28[_0x278b7f(0x228)]>0x0&&placeOrder(_0x4e3d28);}function notifyBalance(_0x56d37e){const _0x5cbca1=_0x2ffdd8;let _0x43db21=_0x56d37e['portfolio'],_0x3b8e2a=_0x56d37e[_0x5cbca1(0xf5)],_0x33273a=[];for(let _0x4b6b00 of _0x43db21){if(_0x4b6b00[_0x5cbca1(0x238)]!=config[_0x5cbca1(0x24d)]){if(_0x4b6b00['delta']>=_0x3b8e2a/0x64){if(_0x4b6b00[_0x5cbca1(0x127)])_0x33273a[_0x5cbca1(0xf3)](_0x4b6b00);}else{if(_0x4b6b00[_0x5cbca1(0x132)]<=-_0x3b8e2a/0x64){if(_0x4b6b00[_0x5cbca1(0x127)])_0x33273a['push'](_0x4b6b00);}}}}if(_0x33273a[_0x5cbca1(0x228)]>0x0){let _0x3e531f=_0x33273a[_0x5cbca1(0x176)](_0x3691c4=>_0x3691c4[_0x5cbca1(0x238)]);_0x3e531f[_0x5cbca1(0x137)]();let _0x1e1d35=_0x3e531f[_0x5cbca1(0x139)](',\x20');if(!lastCoinsToBalance)logHistory('warning',_0x5cbca1(0x26a));lastCoinsToBalance=_0x1e1d35;}}function symbolToCoin(_0x3e9d52){const _0x18568f=_0x2ffdd8;let _0x5bf951;if(_0x3e9d52[_0x18568f(0x159)]('/'+config[_0x18568f(0x24d)]))_0x5bf951=_0x3e9d52[_0x18568f(0x136)]('/'+config['basecoin'],'');if(_0x3e9d52[_0x18568f(0x159)](config['basecoin']+'/'))_0x5bf951=_0x3e9d52[_0x18568f(0x136)](config[_0x18568f(0x24d)]+'/','');return _0x5bf951;}function setLockOrders(_0x3f19fa){const _0x277c03=_0x2ffdd8;lockOrders=_0x3f19fa,logger[_0x277c03(0x1e7)](_0x277c03(0x1b5)+Object['keys'](ORDERS)[lockOrders]);}async function unlockOrders(_0x2458c0=![]){const _0x31e974=_0x2ffdd8;if(allOrdersPlaced&&lockOrders==ORDERS[_0x31e974(0x108)]){setLockOrders(ORDERS[_0x31e974(0x1e2)]);if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);if(_0x2458c0){const _0x3e4a43=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x3e4a43,setBlockTransactionDetection(![]);}validateOrdersState='initial',persistOpenOrders([]),setLockOrders(ORDERS[_0x31e974(0x209)]);}}async function validateOrders(_0x13f387){const _0x4f8a11=_0x2ffdd8;if(_0x13f387)validateOrdersState=_0x13f387;logger[_0x4f8a11(0x1e7)](_0x4f8a11(0xda)+validateOrdersState+_0x4f8a11(0xbf)+Object['keys'](ORDERS)[lockOrders]);let _0x381a86=[],_0x5e20ee=config['ordertype']==_0x4f8a11(0x27a)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x4f8a11(0x1f1)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS['LOCKED'])return;logger[_0x4f8a11(0x1e7)]('2\x20-\x20Validate\x20orders:\x20'+validateOrdersState);for(let _0x39e11e=lastOrders[_0x4f8a11(0x228)]-0x1;_0x39e11e>=0x0;_0x39e11e--){let _0xaeb8e9=lastOrders[_0x39e11e],_0x4cc747=![];_0xaeb8e9[_0x4f8a11(0x25f)]>0x0&&(_0x4cc747=!![]),_0x381a86[_0x4f8a11(0xf3)](_0x4cc747),_0x4cc747&&config[_0x4f8a11(0x17a)]!=_0x4f8a11(0x27a)&&logHistory(_0x4f8a11(0x200),_0x4f8a11(0x1c9)+_0xaeb8e9[_0x4f8a11(0x25a)]+'\x20'+_0xaeb8e9[_0x4f8a11(0x14e)]+'\x20#'+formatResult(_0xaeb8e9['filled'],0x8)+'\x20@'+formatResult(_0xaeb8e9[_0x4f8a11(0x110)],0x8)),_0x4cc747&&lastOrders['splice'](_0x39e11e,0x1);}persistOpenOrders(lastOrders);const _0x362493=coolingDown?'balancing\x20resumes\x20when\x20cooldown\x20ends':_0x4f8a11(0x291);if(validateOrdersState==_0x4f8a11(0xe2)){validateOrdersState=_0x4f8a11(0x164);if(_0x381a86['includes'](![])){}else await unlockOrders();}else{if(validateOrdersState==_0x4f8a11(0x164)){if(_0x381a86[_0x4f8a11(0x159)](![])){}else await unlockOrders();}else{if(validateOrdersState==_0x4f8a11(0x1d9)){let _0x30950f=!![];if(_0x381a86[_0x4f8a11(0x159)](![])){if(config[_0x4f8a11(0x17a)]=='market')logHistory(_0x4f8a11(0x1d2),'Order(s)\x20not\x20validated\x20after\x20'+Math[_0x4f8a11(0x24f)](_0x5e20ee*validateOrderInterval/0xea60)+_0x4f8a11(0x177)+_0x362493),await unlockOrders(!![]);else{_0x30950f=await cancelOrders();if(_0x30950f)logHistory('success',_0x4f8a11(0x14d)+Math[_0x4f8a11(0x24f)](_0x5e20ee*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x362493),await unlockOrders(!![]);else{validateOrdersState='ongoing',logHistory(_0x4f8a11(0x295),_0x4f8a11(0xe8)+Math[_0x4f8a11(0x24f)](_0x5e20ee*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x362493),logHistory(_0x4f8a11(0x295),_0x4f8a11(0x15d));const _0x4f9a14=config['ordertype']==_0x4f8a11(0x27a)?validateOrderTimeout*0x3c*0x3e8:config[_0x4f8a11(0x1f1)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x4f9a14);}}}else await unlockOrders(!![]);}else{if(validateOrdersState=='no\x20open\x20orders'){if(config[_0x4f8a11(0x17a)]!=_0x4f8a11(0x27a))logHistory(_0x4f8a11(0x1d2),_0x4f8a11(0x134)+_0x362493);await unlockOrders(!![]);}}}}}async function cancelOrders(){const _0x3be2db=_0x2ffdd8;let _0x27c48c=!![],_0x580d49;for(const _0x86a303 of lastOrders){let _0x3f2722=![],_0xa2ba09=0x0;while(!_0x3f2722&&_0xa2ba09<maxRetries){try{const _0x5a3c24=await exchange['cancelOrder'](_0x86a303[_0x3be2db(0x162)],_0x86a303[_0x3be2db(0x25a)]);_0x3f2722=!![];}catch(_0x3b991d){_0x3b991d[_0x3be2db(0x1f2)]()[_0x3be2db(0x159)](_0x3be2db(0x28c))||_0x3b991d[_0x3be2db(0x1f2)]()['includes'](_0x3be2db(0x155))?_0x3f2722=!![]:(_0x580d49=_0x3b991d,_0x3f2722=![]);}!_0x3f2722&&(_0xa2ba09++,await sleep(retryInterval));}_0x27c48c=_0x27c48c&&_0x3f2722;}return!_0x27c48c&&await handleError(_0x580d49,'cancelOrders()'),_0x27c48c;}async function initCoinResults(_0x2d1a93){const _0xa0be5a=_0x2ffdd8;_0x2d1a93?logger['debug'](_0xa0be5a(0xec)+_0x2d1a93):logger[_0xa0be5a(0x1e7)](_0xa0be5a(0x1a0)),config[_0xa0be5a(0x1b0)][_0xa0be5a(0x17e)](_0x5b22a2=>{const _0x5143a3=_0xa0be5a;if(!_0x5b22a2['excluded']&&_0x5b22a2[_0x5143a3(0x238)]!=config[_0x5143a3(0x24d)]){const _0x3275b1=currentCoins[_0x5143a3(0x240)](_0x2f6212=>_0x2f6212[_0x5143a3(0x238)]==_0x5b22a2[_0x5143a3(0x238)]),_0x1ec5e7=gTicker[noslash(_0x5b22a2[_0x5143a3(0x25a)])];let _0x4a5bef=_0x3275b1?_0x3275b1['number']:null,_0xd4aa71=_0x5b22a2[_0x5143a3(0x1e6)]?0x1/_0x1ec5e7:_0x1ec5e7,_0x3ff169;config[_0x5143a3(0x174)][_0x5143a3(0x17e)](_0x1324b1=>{const _0xf95fcb=_0x5143a3;!_0x3ff169&&(_0x3ff169=_0x1324b1[_0xf95fcb(0x28d)][_0xf95fcb(0x240)](_0xa62480=>_0xa62480[_0xf95fcb(0x238)]==_0x5b22a2[_0xf95fcb(0x238)]),_0x3ff169&&(_0x4a5bef=_0x3ff169[_0xf95fcb(0x17b)],_0xd4aa71=_0x3ff169[_0xf95fcb(0x110)]));});let _0x45a9f6=dbCoinResults[_0x5143a3(0x150)](_0x5143a3(0x147))['find']({'coin':_0x5b22a2[_0x5143a3(0x238)]})[_0x5143a3(0x133)]();if(!_0x45a9f6){const _0x4afe56={'coin':_0x5b22a2['coin'],'number':_0x4a5bef,'breakeven':_0xd4aa71,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x5143a3(0x150)](_0x5143a3(0x147))[_0x5143a3(0xf3)](_0x4afe56)[_0x5143a3(0x1e9)]();}else{if(_0x2d1a93&&_0x5b22a2[_0x5143a3(0x238)]==_0x2d1a93){const _0x4951a7={'coin':_0x5b22a2[_0x5143a3(0x238)],'number':_0x4a5bef,'breakeven':_0xd4aa71,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x5143a3(0x150)]('coins')[_0x5143a3(0x240)]({'coin':_0x5b22a2['coin']})[_0x5143a3(0xc4)](_0x4951a7)['write']();}}}});}async function placeOrder(_0xe9badc){const _0x3212fa=_0x2ffdd8,_0x5b2f09=config[_0x3212fa(0x17a)]==_0x3212fa(0x27a)?_0x3212fa(0x27a):_0x3212fa(0x113);if(lockOrders==ORDERS[_0x3212fa(0x209)]&&!coolingDown){setLockOrders(ORDERS['LOCKED']);while(transactionDetectionOngoing){await sleep(0x64);}logger[_0x3212fa(0x1e7)](_0x3212fa(0x1fc)+_0xe9badc[_0x3212fa(0x176)](_0x39cbe8=>_0x39cbe8[_0x3212fa(0x238)])[_0x3212fa(0x139)](',\x20')),lastCoinsToBalance='',allOrdersPlaced=![],validateOrdersState='initial';let _0xcb1ed3=![];lastOrders=[];const _0x4c4781=config[_0x3212fa(0xf5)];for(const _0x4de289 of _0xe9badc){let _0x43e591,_0x44fc38,_0xb2180,_0x372c8,_0x440645,_0x56a227=_0x4de289['symbol'];logger[_0x3212fa(0x1e7)](_0x3212fa(0x24e)+_0x4de289['coin']+'\x20'+_0x4de289['number']+'\x20'+_0x4de289[_0x3212fa(0x170)]+'\x20'+_0x4de289[_0x3212fa(0x1b7)]+'%\x20'+_0x4de289[_0x3212fa(0x206)]+'%\x20'+(0x64*_0x4de289[_0x3212fa(0x132)])['toFixed'](0x2)+'%\x20('+_0x4c4781[_0x3212fa(0x1ef)](0x2)+'%)'),insufficientFundsWarningSent=insufficientFundsWarningSent[_0x3212fa(0x12f)](_0x2af30c=>_0x2af30c!==_0x4de289[_0x3212fa(0x238)]);const _0x460f0c=currentCoins['find'](_0x36ac07=>_0x36ac07[_0x3212fa(0x238)]==_0x4de289[_0x3212fa(0x238)]);_0x460f0c&&(_0x460f0c[_0x3212fa(0x1d4)]=_0x4de289[_0x3212fa(0x17b)]);try{const _0x1f5036=await exchange[_0x3212fa(0x112)](_0x56a227);_0x43e591=_0x4de289[_0x3212fa(0x1e6)]?0x1/_0x4de289[_0x3212fa(0x170)]:_0x4de289['last'],_0x44fc38=_0x1f5036[_0x3212fa(0x267)],_0xb2180=_0x1f5036[_0x3212fa(0x234)];_0x4de289[_0x3212fa(0x1e6)]?(_0x372c8=_0x4de289['side']==_0x3212fa(0x254)?'sell':_0x3212fa(0x254),_0x440645=Math[_0x3212fa(0x118)](_0x4de289[_0x3212fa(0x1c2)])/_0x43e591):(_0x372c8=_0x4de289[_0x3212fa(0x14e)],_0x440645=Math['abs'](_0x4de289[_0x3212fa(0x1c2)]));_0x5b2f09==_0x3212fa(0x113)&&(config[_0x3212fa(0x17a)]==_0x3212fa(0xb9)&&(_0x43e591=_0x372c8==_0x3212fa(0x254)?_0x44fc38:_0xb2180),config[_0x3212fa(0x17a)]=='limit-low'&&(_0x43e591=_0x372c8==_0x3212fa(0x254)?_0xb2180:_0x44fc38));_0x440645=formatResult(_0x440645,0x8),_0x43e591=formatResult(_0x43e591,0x8);const _0x1bc568=_0x372c8==_0x3212fa(0x22a)?config[_0x3212fa(0x1c7)]?String[_0x3212fa(0x15f)]('0x'+config[_0x3212fa(0x1c7)])+'\x20':'':config[_0x3212fa(0x1b4)]?String['fromCodePoint']('0x'+config[_0x3212fa(0x1b4)])+'\x20':'',_0x2f4548=_0x5b2f09==_0x3212fa(0x27a)?_0x3212fa(0x239):config[_0x3212fa(0x17a)]==_0x3212fa(0xb9)?'Limit\x20(high-margin)':_0x3212fa(0xbc),_0x53dcfe=(Math[_0x3212fa(0x263)](Math[_0x3212fa(0x214)]()*0x35a4e900)+0x5f5e100)[_0x3212fa(0x1f2)]();lastOrders[_0x3212fa(0xf3)]({'customId':_0x53dcfe,'symbol':_0x56a227,'coin':_0x4de289['coin'],'amount':_0x440645,'price':_0x43e591,'side':_0x372c8,'reverse':_0x4de289[_0x3212fa(0x1e6)],'filled':0x0});let _0x10fa9b;_0x5b2f09==_0x3212fa(0x27a)?_0x372c8==_0x3212fa(0x254)&&[_0x3212fa(0x273),_0x3212fa(0x109),_0x3212fa(0x283),'Gateio','Huobi',_0x3212fa(0xfc)][_0x3212fa(0x159)](config[_0x3212fa(0x216)])?_0x10fa9b=await exchange['createOrder'](_0x56a227,_0x5b2f09,_0x372c8,_0x440645,_0x43e591):_0x10fa9b=await exchange[_0x3212fa(0x1b6)](_0x56a227,_0x5b2f09,_0x372c8,_0x440645,undefined):_0x10fa9b=await exchange[_0x3212fa(0x1b6)](_0x56a227,_0x5b2f09,_0x372c8,_0x440645,_0x43e591);const _0x49f499=lastOrders[_0x3212fa(0x228)]-0x1;if(_0x49f499>=0x0&&lastOrders[_0x49f499][_0x3212fa(0x1a7)]==_0x53dcfe){lastOrders[_0x49f499][_0x3212fa(0x162)]=_0x10fa9b['id'];if(_0x10fa9b['amount'])lastOrders[_0x49f499]['amount']=_0x10fa9b[_0x3212fa(0x183)];if(_0x10fa9b[_0x3212fa(0x110)])lastOrders[_0x49f499][_0x3212fa(0x110)]=_0x10fa9b[_0x3212fa(0x110)];lastOrders[_0x49f499]['fee']=_0x10fa9b[_0x3212fa(0x268)];}if(_0x10fa9b['amount'])_0x440645=_0x10fa9b['amount'];if(_0x10fa9b[_0x3212fa(0x110)])_0x43e591=_0x10fa9b[_0x3212fa(0x110)];if(_0x5b2f09==_0x3212fa(0x27a))logHistory('order',''+_0x1bc568+_0x2f4548+_0x3212fa(0x17c)+_0x56a227+'\x20'+_0x372c8+'\x20#'+formatResult(_0x440645,0x8)+'\x20@'+formatResult(_0x43e591,0x8));else logHistory(_0x3212fa(0x200),''+_0x1bc568+_0x2f4548+_0x3212fa(0x17c)+_0x56a227+'\x20'+_0x372c8+'\x20#'+formatResult(_0x440645,0x8)+'\x20@'+formatResult(_0x43e591,0x8));logger[_0x3212fa(0x1e7)](_0x3212fa(0x11a)+_0x10fa9b['id']+_0x3212fa(0x19e)+_0x53dcfe);if(config[_0x3212fa(0x256)]!=0x0){let _0x32ae1f=null;if(cooldownTracker[_0x3212fa(0x228)]==config['cooldown']-0x1)_0x32ae1f=cooldownTracker['shift']();const _0x281e40=getTimeStamp();cooldownTracker['push'](_0x281e40);if(_0x32ae1f){const _0x47c929=fns[_0x3212fa(0x20a)](new Date(_0x281e40),new Date(_0x32ae1f));if(_0x47c929<cooldownInterval){logHistory(_0x3212fa(0x295),_0x3212fa(0x104)+config[_0x3212fa(0x256)]+_0x3212fa(0x1c3)+cooldownInterval/0x3c+'\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20'+cooldownPeriod/(0xe10*0x3e8)+_0x3212fa(0x225)),coolingDown=!![];break;}}}}catch(_0x223d4d){if(_0x223d4d[_0x3212fa(0x1f2)]()[_0x3212fa(0x159)](_0x3212fa(0x242)))lastOrders=lastOrders[_0x3212fa(0x12f)](_0x5dca2e=>_0x5dca2e[_0x3212fa(0x25a)]!=_0x56a227),logHistory('error',_0x3212fa(0x1d6)+_0x56a227),_0xcb1ed3=!![];else{if(_0x223d4d[_0x3212fa(0x1f2)]()[_0x3212fa(0x159)](_0x3212fa(0x1f6)))lastOrders=lastOrders[_0x3212fa(0x12f)](_0x1fea93=>_0x1fea93[_0x3212fa(0x25a)]!=_0x56a227),logHistory(_0x3212fa(0x295),_0x3212fa(0x196)+_0x56a227),_0xcb1ed3=!![];else{if(_0x223d4d['toString']()[_0x3212fa(0x159)](_0x3212fa(0x155)))lastOrders=lastOrders[_0x3212fa(0x12f)](_0x5bc0c5=>_0x5bc0c5['symbol']!=_0x56a227),logHistory(_0x3212fa(0x295),_0x3212fa(0x11b)+_0x56a227),logger[_0x3212fa(0x1e7)](_0x223d4d),_0xcb1ed3=!![];else _0x223d4d[_0x3212fa(0x1f2)]()[_0x3212fa(0x159)](_0x3212fa(0x252))?(lastOrders=lastOrders['filter'](_0x1a2e87=>_0x1a2e87[_0x3212fa(0x25a)]!=_0x56a227),logHistory(_0x3212fa(0x295),_0x3212fa(0x1d6)+_0x56a227),_0xcb1ed3=!![]):(lastOrders=lastOrders[_0x3212fa(0x12f)](_0x2ce006=>_0x2ce006[_0x3212fa(0x25a)]!=_0x56a227),await handleError(_0x223d4d,_0x3212fa(0x167),_0x56a227));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x3212fa(0x228)]>0x0){const _0x17b88d=config[_0x3212fa(0x17a)]=='market'?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x17b88d);}else unlockOrders();_0xcb1ed3&&config[_0x3212fa(0x205)]&&(logHistory(_0x3212fa(0x295),'Avoiding\x20continuous\x20order\x20attempts'+pauseBotMsg),await pauseBot(pauseBotInterval)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x3212fa(0x1d2),_0x3212fa(0xe7)));}else{if(coolingDown)!config[_0x3212fa(0x205)]&&logHistory('error','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode');else lockOrders!=ORDERS[_0x3212fa(0x209)]&&(!config[_0x3212fa(0x205)]&&(config[_0x3212fa(0x17a)]=='market'?logHistory(_0x3212fa(0x295),_0x3212fa(0x156)):logHistory(_0x3212fa(0x295),_0x3212fa(0x169))));}}function persistOpenOrders(_0x2313cc){const _0x60b32c=_0x2ffdd8,_0x3bcc71={...config,'openOrders':_0x2313cc};let _0x4fd435=dbConfig[_0x60b32c(0x150)](_0x60b32c(0x211))[_0x60b32c(0x240)]({'botID':botID})[_0x60b32c(0x133)]();_0x4fd435&&dbConfig['get'](_0x60b32c(0x211))['find']({'botID':botID})[_0x60b32c(0xc4)](_0x3bcc71)[_0x60b32c(0x1e9)]();}function restoreOrders(){const _0x2548a6=_0x2ffdd8;let _0x429066;config[_0x2548a6(0x220)]&&allOpenOrders[_0x2548a6(0x17e)](_0x1d26aa=>{const _0x5a4ad1=_0x2548a6,_0x54831a=config['openOrders'][_0x5a4ad1(0x240)](_0x3d28e4=>_0x3d28e4[_0x5a4ad1(0x162)]==_0x1d26aa['id']);_0x54831a&&(lastOrders[_0x5a4ad1(0xf3)](_0x54831a),_0x429066=_0x1d26aa['timestamp']);});if(lastOrders['length']>0x0){setLockOrders(ORDERS[_0x2548a6(0x108)]),validateOrdersState=_0x2548a6(0x164),allOrdersPlaced=!![];const _0x92b4b8=new Date()['getTime'](),_0x39c05a=config[_0x2548a6(0x17a)]==_0x2548a6(0x27a)?validateOrderTimeout*0x3c*0x3e8:config[_0x2548a6(0x1f1)]*0x3c*0x3e8;if(_0x429066+_0x39c05a>_0x92b4b8){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x43fd03=_0x2548a6;validateOrders(_0x43fd03(0x1d9));},_0x429066+_0x39c05a-_0x92b4b8);}else validateOrders(_0x2548a6(0x1d9));}}async function sendMetricsTelegram(){const _0x1a871e=_0x2ffdd8;if(!coinsLoaded){process[_0x1a871e(0x12c)]({'telegrammsg':_0x1a871e(0x269)},_0x367783=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x1c0165='';if(config[_0x1a871e(0x1c6)])_0x1c0165='<b>'+config[_0x1a871e(0xce)]+_0x1a871e(0x117);else _0x1c0165='<b>Bot\x20'+botID+_0x1a871e(0x117);const _0x2ecfe2=config[_0x1a871e(0x24d)],_0x19a27c=config[_0x1a871e(0x1d1)],_0x5c9cda=getKPIs('basecoin'),_0x276527=getKPIs('fiat',_0x19a27c),_0x2aa69b=getKPIs(_0x1a871e(0x144)),_0x4c07ff=getKPIs(_0x1a871e(0x1ab),_0x19a27c),_0x1dbb1c=getKPIs('pnl-basecoin'),_0x5b91db=getKPIs('pnl-fiat',_0x19a27c);_0x2ecfe2['includes'](_0x19a27c)?(_0x1c0165+=_0x1a871e(0x280),_0x1c0165+=_0x1a871e(0x22e)+_0x2ecfe2+':\x20'+_0x5c9cda[_0x1a871e(0x133)]+'\x20('+_0x5c9cda[_0x1a871e(0x124)]+_0x1a871e(0x178),_0x1c0165+=_0x1a871e(0x184)+_0x2ecfe2+':\x20'+_0x2aa69b['value']+'\x20('+_0x2aa69b[_0x1a871e(0x124)]+_0x1a871e(0x178),_0x1c0165+=_0x1a871e(0x175)+_0x2ecfe2+':\x20'+_0x1dbb1c[_0x1a871e(0x133)]+'\x20('+_0x1dbb1c[_0x1a871e(0x124)]+'%)\x0a',_0x1c0165+=_0x1a871e(0x229)):(_0x1c0165+=_0x1a871e(0x280),_0x1c0165+=_0x1a871e(0x22e)+_0x2ecfe2+':\x20'+_0x5c9cda['value']+'\x20('+_0x5c9cda[_0x1a871e(0x124)]+_0x1a871e(0x178),_0x1c0165+=_0x1a871e(0x22e)+_0x19a27c+':\x20'+_0x276527[_0x1a871e(0x133)]+'\x20('+_0x276527[_0x1a871e(0x124)]+'%)\x0a',_0x1c0165+='Net\x20'+_0x2ecfe2+':\x20'+_0x2aa69b[_0x1a871e(0x133)]+'\x20('+_0x2aa69b[_0x1a871e(0x124)]+'%)\x0a',_0x1c0165+=_0x1a871e(0x184)+_0x19a27c+':\x20'+_0x4c07ff[_0x1a871e(0x133)]+'\x20('+_0x4c07ff['change']+_0x1a871e(0x178),_0x1c0165+=_0x1a871e(0x175)+_0x2ecfe2+':\x20'+_0x1dbb1c[_0x1a871e(0x133)]+'\x20('+_0x1dbb1c[_0x1a871e(0x124)]+_0x1a871e(0x178),_0x1c0165+=_0x1a871e(0x175)+_0x19a27c+':\x20'+_0x5b91db[_0x1a871e(0x133)]+'\x20('+_0x5b91db[_0x1a871e(0x124)]+_0x1a871e(0x178),_0x1c0165+=_0x1a871e(0x229)),process[_0x1a871e(0x12c)]({'telegrammsg':_0x1c0165},_0x57c05d=>{});}async function sendPortfolioTelegram(){const _0x2e9484=_0x2ffdd8;if(!coinsLoaded||!currentCoins[0x0][_0x2e9484(0x1b7)]&&currentCoins[0x0][_0x2e9484(0x1b7)]!=0x0){process[_0x2e9484(0x12c)]({'telegrammsg':_0x2e9484(0x269)},_0x1ce4e3=>{});return;}let _0x26f1df='';if(config[_0x2e9484(0x1c6)])_0x26f1df=_0x2e9484(0x107)+config['botname']+_0x2e9484(0xdb);else _0x26f1df=_0x2e9484(0x163)+botID+_0x2e9484(0xdb);_0x26f1df+=_0x2e9484(0x280),_0x26f1df+=_0x2e9484(0xfb),_0x26f1df+='Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a',_0x26f1df+='-------------------------------\x0a',currentCoins[_0x2e9484(0x17e)](_0x34afd4=>{const _0x1c05e8=_0x2e9484;_0x26f1df+=_0x34afd4['coin'][_0x1c05e8(0x292)](0x7)+'|\x20'+formatPad(_0x34afd4[_0x1c05e8(0x1b7)],0x2,0x6)+'|\x20'+formatPad(_0x34afd4[_0x1c05e8(0x206)],0x2,0x6)+'|\x20'+(_0x34afd4['target']==0x0?''[_0x1c05e8(0x161)](0x6):formatPad(_0x34afd4['delta']*0x64,0x2,0x6))+'\x0a';}),_0x26f1df+='</pre>',process[_0x2e9484(0x12c)]({'telegrammsg':_0x26f1df},_0x5966cf=>{});}function formatPad(_0x2cf629,_0x419c9e,_0x1f6aa9){const _0x1e7e68=formatResultString(_0x2cf629,_0x419c9e);return _0x1e7e68?_0x1e7e68['padStart'](_0x1f6aa9):''['padStart'](_0x1f6aa9);}function logHistory(_0x21d1ca,_0x123f30,_0x3e3f65=''){const _0x52e78c=_0x2ffdd8;logger['full'](''+_0x123f30);let _0x4028d2={'time':getTimeStamp(),'type':_0x21d1ca,'event':_0x123f30};dbLogs[_0x52e78c(0x150)](_0x52e78c(0x1e5))['push'](_0x4028d2)[_0x52e78c(0x1e9)]();if(_0x3e3f65=='')_0x3e3f65=_0x123f30;proxyEmit('event',{'log':_0x4028d2,'summary':_0x3e3f65}),process[_0x52e78c(0x12c)]({'telegram':{..._0x4028d2,'botname':config['botname'],'showname':config[_0x52e78c(0x1c6)]}},_0x4e6eab=>{});}function emitHistory(_0x38a5bc={}){const _0x22b935=_0x2ffdd8;Object[_0x22b935(0xb5)](_0x38a5bc)['length']==0x0&&(_0x38a5bc={'type':[_0x22b935(0x200),_0x22b935(0x230)],'event':'','page':0x1});if(_0x38a5bc[_0x22b935(0x142)][_0x22b935(0x159)](_0x22b935(0x230)))_0x38a5bc[_0x22b935(0x142)]['splice'](_0x38a5bc[_0x22b935(0x142)]['indexOf'](_0x22b935(0x230)),0x1,'error',_0x22b935(0x1bf),_0x22b935(0x1d2));if(dbLogs[_0x22b935(0x27e)]('logs')[_0x22b935(0x133)]()){let _0x409ec2=dbLogs['get'](_0x22b935(0x1e5))[_0x22b935(0x12f)](_0x30ac3f=>{const _0xd1c04c=_0x22b935;if(_0x38a5bc[_0xd1c04c(0x142)][_0xd1c04c(0x228)]==0x0)return![];else return _0x38a5bc[_0xd1c04c(0x142)]['includes'](_0x30ac3f[_0xd1c04c(0x142)]);})[_0x22b935(0x12f)](_0x2bdfd2=>{const _0x5ab99c=_0x22b935;if(_0x38a5bc[_0x5ab99c(0x230)]=='')return!![];else return _0x2bdfd2[_0x5ab99c(0x230)]['toLowerCase']()[_0x5ab99c(0x159)](_0x38a5bc['event'][_0x5ab99c(0x18f)]());})['sortBy']('time'),_0x2772b7=_0x409ec2[_0x22b935(0x133)]()['length'];_0x409ec2=_0x409ec2['reverse']()[_0x22b935(0xf0)]((_0x38a5bc[_0x22b935(0x165)]-0x1)*logPageSize,_0x38a5bc[_0x22b935(0x165)]*logPageSize-0x1)[_0x22b935(0x1e6)]()[_0x22b935(0x133)](),proxyEmit(_0x22b935(0x130),{'logs':_0x409ec2,'total':_0x2772b7});}else proxyEmit(_0x22b935(0x130),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x325ad2){const _0x281701=_0x2ffdd8;if(dbLogs[_0x281701(0x27e)](_0x281701(0x1e5))['value']()){const _0x234368=dbLogs[_0x281701(0x150)](_0x281701(0x1e5))[_0x281701(0x20d)]('time')[_0x281701(0x12f)](_0x3ea685=>{const _0x5a7975=_0x281701;return _0x3ea685['type']==_0x5a7975(0x200);})[_0x281701(0x133)]();dbLogs[_0x281701(0x150)](_0x281701(0x1e5))[_0x281701(0x192)]()[_0x281701(0x1e9)](),dbLogs[_0x281701(0x150)]('logs')[_0x281701(0xc4)](_0x234368)[_0x281701(0x1e9)](),emitHistory(_0x325ad2);}}async function pauseBot(_0x581926=pauseBotIntervalShort,_0x51196a,_0x2dc41c,_0x307fe3=![]){const _0x23c0d9=_0x2ffdd8,_0x5eea83=new Date()[_0x23c0d9(0x25e)]();if(!lastErrorShown||_0x5eea83-lastErrorShown>=_0x581926){lastErrorShown=_0x5eea83;if(!lastBotPause)lastBotPause=_0x5eea83,consecutivePauses=0x1;else{if(_0x5eea83-lastBotPause-_0x581926<0x5a*0x3e8){consecutivePauses++;if(consecutivePauses>maxPauseRetries){if(_0x307fe3){logHistory(_0x23c0d9(0x295),_0x51196a+'\x20>\x20stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();return;}else logHistory(_0x23c0d9(0x295),_0x51196a+pauseBotMsg),_0x581926=pauseBotInterval;}}else consecutivePauses=0x1;lastBotPause=_0x5eea83;}_0x2dc41c?logger[_0x23c0d9(0x1e7)]('('+consecutivePauses+')\x20'+_0x51196a+_0x23c0d9(0xeb),_0x2dc41c):logger['debug']('('+consecutivePauses+')\x20'+_0x51196a);if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);await sleep(_0x581926),botPaused=![],_0x581926==pauseBotIntervalShort?resumeBot(!![]):resumeBot(![]);}}}async function killBot(){const _0x578b06=_0x2ffdd8;botPaused=!![],await sleep(0x3e8),process[_0x578b06(0x12c)]({'stop':_0x578b06(0x26b)},_0x28e58a=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x267eff,_0x167cb8,_0x58104c=![]){const _0x3c73ca=_0x2ffdd8;if(botPaused)return;let _0x4ecedc;const _0x4f0616=config[_0x3c73ca(0x216)]||'Exchange';if(_0x167cb8)logger[_0x3c73ca(0x1e7)](_0x3c73ca(0x1ec)+_0x167cb8);const _0x57b486=()=>{const _0x2da1c3=_0x3c73ca;loading[_0x2da1c3(0x295)]=_0x2da1c3(0x123),emitLoadingProgress();};if(_0x267eff[_0x3c73ca(0x1f2)]()[_0x3c73ca(0x159)]('API-key\x20format\x20invalid'))logHistory(_0x3c73ca(0x295),_0x4f0616+'\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)'),_0x57b486();else{if(_0x267eff[_0x3c73ca(0x1f2)]()[_0x3c73ca(0x159)](_0x3c73ca(0xc3)))logHistory(_0x3c73ca(0x295),_0x4f0616+'\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)'),_0x57b486();else{if(_0x267eff[_0x3c73ca(0x1f2)]()[_0x3c73ca(0x159)]('AuthenticationError'))config[_0x3c73ca(0x237)]?_0x4ecedc=_0x4f0616+'\x20API\x20key,\x20secret\x20or\x20password\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange':_0x4ecedc=_0x4f0616+_0x3c73ca(0x10c),logHistory(_0x3c73ca(0x295),_0x4ecedc+_0x3c73ca(0xd2)),_0x57b486();else{if(_0x267eff[_0x3c73ca(0x1f2)]()['includes'](_0x3c73ca(0xe5)))logHistory('error',_0x4f0616+_0x3c73ca(0x24c)),_0x57b486();else{if(!_0x58104c)await handleError(_0x267eff,null);}}}}}async function handleError(_0x549fd0,_0x1a2bea,_0x3c8895=''){const _0x54701d=_0x2ffdd8;if(botPaused)return;let _0x34d43b;const _0x561e95=config['exchange']||'Exchange';if(_0x1a2bea)logger[_0x54701d(0x1e7)](_0x54701d(0x1ec)+_0x1a2bea);if(_0x549fd0[_0x54701d(0x1f2)]()[_0x54701d(0x159)]('DDoSProtection'))_0x34d43b=_0x561e95+_0x54701d(0x21e),await pauseBot(undefined,_0x34d43b,_0x549fd0);else{if(_0x549fd0['toString']()['includes'](_0x54701d(0x208)))_0x34d43b=_0x561e95+'\x20blocked\x20API\x20(RateLimitExceeded)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading',await pauseBot(undefined,_0x34d43b,_0x549fd0);else{if(_0x549fd0[_0x54701d(0x1f2)]()[_0x54701d(0x159)](_0x54701d(0xc2))||_0x549fd0[_0x54701d(0x1f2)]()[_0x54701d(0x159)]('OnMaintenance'))_0x34d43b=_0x561e95+_0x54701d(0xb8),await pauseBot(undefined,_0x34d43b,_0x549fd0[_0x54701d(0x1f2)]());else{if(_0x549fd0[_0x54701d(0x1f2)]()[_0x54701d(0x159)](_0x54701d(0x13c)))_0x34d43b=_0x561e95+_0x54701d(0x253),await pauseBot(undefined,_0x34d43b,_0x549fd0[_0x54701d(0x1f2)]());else{if(_0x549fd0[_0x54701d(0x1f2)]()['includes'](_0x54701d(0x1c1)))_0x34d43b=_0x561e95+_0x54701d(0x1f0),await pauseBot(undefined,_0x34d43b,_0x549fd0['toString']());else{if(_0x549fd0[_0x54701d(0x1f2)]()[_0x54701d(0x18f)]()[_0x54701d(0x159)](_0x54701d(0xbb))||_0x549fd0[_0x54701d(0x1f2)]()[_0x54701d(0x18f)]()[_0x54701d(0x159)](_0x54701d(0xd4)))_0x34d43b=_0x54701d(0x185),await pauseBot(undefined,_0x34d43b,_0x549fd0[_0x54701d(0x1f2)]());else{if(_0x549fd0['toString']()['includes'](_0x54701d(0x141)))_0x34d43b=_0x561e95+_0x54701d(0xe6),await pauseBot(undefined,_0x34d43b,_0x549fd0[_0x54701d(0x1f2)]());else{if(_0x549fd0 instanceof ccxt[_0x54701d(0x1ad)])_0x34d43b=_0x561e95+_0x54701d(0x223)+_0x549fd0[_0x54701d(0x1f2)](),logger[_0x54701d(0x1e7)](_0x54701d(0x145),_0x549fd0),await pauseBot(undefined,_0x34d43b,_0x549fd0);else{if(_0x549fd0[_0x54701d(0x1f2)]()[_0x54701d(0x159)](_0x54701d(0x26e)))logHistory(_0x54701d(0x295),_0x561e95+_0x54701d(0x15e)),logHistory(_0x54701d(0x295),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)'),await killBot();else{if(_0x549fd0[_0x54701d(0x1f2)]()['includes'](_0x54701d(0xc3)))logHistory(_0x54701d(0x295),_0x561e95+_0x54701d(0xf7)),logHistory(_0x54701d(0x295),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)'),await killBot();else{if(_0x549fd0[_0x54701d(0x1f2)]()[_0x54701d(0x159)](_0x54701d(0x28f))&&_0x549fd0[_0x54701d(0x1f2)]()['includes'](_0x54701d(0x198)))_0x34d43b=_0x561e95+'\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)',await pauseBot(undefined,_0x34d43b,_0x549fd0,!![]);else{if(_0x549fd0[_0x54701d(0x1f2)]()[_0x54701d(0x159)]('AuthenticationError'))config[_0x54701d(0x237)]?_0x34d43b=_0x561e95+_0x54701d(0x1c0):_0x34d43b=_0x561e95+_0x54701d(0x10c),logHistory('error',_0x34d43b),logHistory(_0x54701d(0x295),_0x54701d(0x1c8)),await killBot();else{if(_0x549fd0[_0x54701d(0x1f2)]()[_0x54701d(0x159)](_0x54701d(0xe5)))logHistory('error',_0x561e95+_0x54701d(0x181)),logHistory(_0x54701d(0x295),_0x54701d(0x1c8)),await killBot();else{if(_0x549fd0[_0x54701d(0x1f2)]()[_0x54701d(0x159)](_0x54701d(0x25d)))logHistory('error',_0x54701d(0x264)+_0x3c8895),logger['debug'](_0x54701d(0xb6),_0x549fd0);else{if(_0x549fd0 instanceof ccxt[_0x54701d(0x246)]){_0x34d43b=_0x561e95+'\x20exchange\x20error:\x20'+_0x549fd0[_0x54701d(0x1f2)]();if(_0x3c8895)_0x34d43b+=_0x54701d(0xc6)+_0x3c8895;await pauseBot(undefined,_0x34d43b,_0x549fd0);}else{_0x34d43b=_0x54701d(0x1aa)+_0x549fd0[_0x54701d(0x1f2)]();if(_0x3c8895)_0x34d43b+='\x0aSymbol(s):\x20'+_0x3c8895;await pauseBot(undefined,_0x34d43b);}}}}}}}}}}}}}}}}function decryptRSA(_0x5467b4,_0x15ddd9){const _0x5a56c2=_0x2ffdd8,_0x1c8927=forge[_0x5a56c2(0x1d7)]['privateKeyFromPem'](_0x5467b4),_0x1f3500=_0x1c8927[_0x5a56c2(0x14b)](forge[_0x5a56c2(0x158)][_0x5a56c2(0xd6)](_0x15ddd9),_0x5a56c2(0x279),{'md':forge['md'][_0x5a56c2(0xe3)][_0x5a56c2(0x1f8)](),'mgf1':{'md':forge['md']['sha256'][_0x5a56c2(0x1f8)]()}});return _0x1f3500;}async function withRetry(_0x2bdc14,_0x4e6f06){const _0xf80d72=_0x2ffdd8;let _0x20602c=![],_0x21bd55=0x0,_0x3098f6,_0x4e4753;while(_0x21bd55<maxRetries){try{_0x3098f6=await _0x4e6f06();break;}catch(_0x2b42b9){_0x4e4753=_0x2b42b9,!_0x20602c?(_0x20602c=!![],logger[_0xf80d72(0x1e7)](_0xf80d72(0x11e)+_0x2bdc14+':',_0x2b42b9['toString']())):await sleep(retryInterval);}_0x21bd55++;}if(_0x21bd55==0x0)return _0x3098f6;if(_0x21bd55>=maxRetries)throw _0x4e4753;else return logger[_0xf80d72(0x1e7)](_0xf80d72(0x102)+_0x21bd55+_0xf80d72(0x270)),_0x3098f6;}function formatResult(_0x4a46c6,_0x4e22d7){return parseFloat(_0x4a46c6['toFixed'](_0x4e22d7));}function formatResultTruncate(_0x50db87,_0x316e89){const _0x5a5e3f=_0x2ffdd8;let _0x2d1bf9=formatResultString(_0x50db87,0xa),_0x519631=_0x2d1bf9[_0x5a5e3f(0x172)]('.');return _0x519631!=-0x1&&(_0x2d1bf9=_0x2d1bf9[_0x5a5e3f(0xf0)](0x0,_0x519631+_0x316e89+0x1)),Number(_0x2d1bf9);}function formatResultString(_0x10d736,_0x372c45){const _0x36564b=_0x2ffdd8;let _0x428be9;if(!(''+_0x10d736)[_0x36564b(0x159)]('e'))_0x428be9=+(Math[_0x36564b(0x24f)](_0x10d736+'e+'+_0x372c45)+'e-'+_0x372c45);else{let _0x6fe2f1=(''+_0x10d736)['split']('e'),_0x2e2897='';+_0x6fe2f1[0x1]+_0x372c45>0x0&&(_0x2e2897='+'),_0x428be9=+(Math[_0x36564b(0x24f)](+_0x6fe2f1[0x0]+'e'+_0x2e2897+(+_0x6fe2f1[0x1]+_0x372c45))+'e-'+_0x372c45);}return Number(_0x428be9)[_0x36564b(0x1ef)](_0x372c45);}function getServerTime(){const _0x41caa4=_0x2ffdd8,_0x3cc96b=new Date();return _0x3cc96b['getFullYear']()+'/'+(_0x3cc96b[_0x41caa4(0x257)]()+0x1)[_0x41caa4(0x1f2)]()[_0x41caa4(0x161)](0x2,'0')+'/'+_0x3cc96b[_0x41caa4(0xd1)]()[_0x41caa4(0x1f2)]()[_0x41caa4(0x161)](0x2,'0')+'\x20'+_0x3cc96b[_0x41caa4(0xd7)]()[_0x41caa4(0x1f2)]()[_0x41caa4(0x161)](0x2,'0')+':'+_0x3cc96b[_0x41caa4(0x247)]()[_0x41caa4(0x1f2)]()[_0x41caa4(0x161)](0x2,'0')+':'+_0x3cc96b[_0x41caa4(0x201)]()[_0x41caa4(0x1f2)]()[_0x41caa4(0x161)](0x2,'0');}function getTimeStamp(){const _0x22ae1b=_0x2ffdd8,_0x4da009=shiftedTime();return _0x4da009['getFullYear']()+'/'+(_0x4da009[_0x22ae1b(0x257)]()+0x1)[_0x22ae1b(0x1f2)]()['padStart'](0x2,'0')+'/'+_0x4da009['getDate']()[_0x22ae1b(0x1f2)]()[_0x22ae1b(0x161)](0x2,'0')+'\x20'+_0x4da009[_0x22ae1b(0xd7)]()[_0x22ae1b(0x1f2)]()[_0x22ae1b(0x161)](0x2,'0')+':'+_0x4da009[_0x22ae1b(0x247)]()['toString']()[_0x22ae1b(0x161)](0x2,'0')+':'+_0x4da009[_0x22ae1b(0x201)]()[_0x22ae1b(0x1f2)]()[_0x22ae1b(0x161)](0x2,'0');}function getDate(){const _0x31548e=_0x2ffdd8,_0x301de8=shiftedTime();return _0x301de8[_0x31548e(0x14c)]()+'/'+(_0x301de8['getMonth']()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x301de8['getDate']()['toString']()[_0x31548e(0x161)](0x2,'0');}function getHour(){const _0x25f47b=_0x2ffdd8,_0x30ba9e=shiftedTime();return _0x30ba9e[_0x25f47b(0xd7)]()['toString']()[_0x25f47b(0x161)](0x2,'0');}function sleep(_0x18df0e){return new Promise(_0x23310b=>setTimeout(_0x23310b,_0x18df0e));}function shiftedTime(){const _0x908e5b=_0x2ffdd8,_0x9b6ca3=new Date();let _0x3e7fe4=_0x9b6ca3;if(config&&config['timeshift']!==0x0)_0x3e7fe4=fns[_0x908e5b(0x233)](_0x9b6ca3,{'hours':config[_0x908e5b(0x1bd)]});return _0x3e7fe4;}function timer(_0x5be101){const _0x204d8a=_0x2ffdd8,_0x3c916d=new Date();!lasttime?console[_0x204d8a(0x222)](getTimeStamp()+':\x20timer\x20>',_0x5be101,_0x3c916d):console[_0x204d8a(0x222)](getTimeStamp()+_0x204d8a(0x1ee),_0x5be101,(_0x3c916d-lasttime)/0x3e8),lasttime=_0x3c916d;}