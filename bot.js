const _0x850d=_0x5a14;(function(_0x2fd811,_0x175687){const _0x1e1494=_0x5a14,_0x1d4cdb=_0x2fd811();while(!![]){try{const _0x4507ae=parseInt(_0x1e1494(0x20a))/0x1*(-parseInt(_0x1e1494(0x1c9))/0x2)+-parseInt(_0x1e1494(0x2e7))/0x3*(parseInt(_0x1e1494(0x35e))/0x4)+-parseInt(_0x1e1494(0x319))/0x5*(-parseInt(_0x1e1494(0x1f1))/0x6)+-parseInt(_0x1e1494(0x2a7))/0x7*(parseInt(_0x1e1494(0x272))/0x8)+parseInt(_0x1e1494(0x1f6))/0x9*(parseInt(_0x1e1494(0x2be))/0xa)+-parseInt(_0x1e1494(0x2b0))/0xb+parseInt(_0x1e1494(0x24d))/0xc*(parseInt(_0x1e1494(0x213))/0xd);if(_0x4507ae===_0x175687)break;else _0x1d4cdb['push'](_0x1d4cdb['shift']());}catch(_0x53d2ca){_0x1d4cdb['push'](_0x1d4cdb['shift']());}}}(_0x20a2,0xa6682));const _0xfe29c6=function(){let _0xc232e0=!![];return function(_0x3a83ee,_0x4affba){const _0x46f510=_0xc232e0?function(){const _0x3c99fc=_0x5a14;if(_0x4affba){const _0x1da010=_0x4affba[_0x3c99fc(0x38f)](_0x3a83ee,arguments);return _0x4affba=null,_0x1da010;}}:function(){};return _0xc232e0=![],_0x46f510;};}(),_0x2994ea=_0xfe29c6(this,function(){const _0x39221c=_0x5a14;return _0x2994ea[_0x39221c(0x38e)]()[_0x39221c(0x327)](_0x39221c(0x28f))[_0x39221c(0x38e)]()[_0x39221c(0x38a)](_0x2994ea)[_0x39221c(0x327)](_0x39221c(0x28f));});_0x2994ea();'use strict';const ccxt=require(_0x850d(0x1e1)),low=require(_0x850d(0x1f8)),FileSync=require(_0x850d(0x337)),fs=require('fs'),fns=require(_0x850d(0x2c2)),forge=require(_0x850d(0x30e)),util=require('util'),argv=require(_0x850d(0x284))(process[_0x850d(0x2e9)]['slice'](0x2))['argv'],path=require(_0x850d(0x1f9)),axios=require(_0x850d(0x362));let exchange,gTicker={},gChange={};const usdBasecoins=['USD',_0x850d(0x386),_0x850d(0x20e),_0x850d(0x344),'USDC',_0x850d(0x259)],excludedExchanges=[_0x850d(0x37b)],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x850d(0x38b)]({'LOCKED':0x0,'UNLOCKING':0x1,'UNLOCKED':0x2});let lockOrders=ORDERS[_0x850d(0x349)],validateOrdersState,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotIntervalShort=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0x850d(0x30c)+pauseBotInterval/0xea60+'\x20minutes',maxPauseRetries=0x6,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,watchTransactionsInterval=0x3c*0x3e8,schedulerInterval=0x3c*0x3c*0x3e8,retryInterval=0x3e8,maxRetries=0x5,logPageSize=0x14,defaultFee=0.003;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidOrdersInitialTimeout,pidOrdersTimeout,botPaused=![],transactionDetectionOngoing=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;function _0x20a2(){const _0xd98d8c=['2\x20-\x20Validate\x20orders:\x20','currency','0\x20-\x20EXECUTION:\x20','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','loading-canceled','\x20>\x20details:','ask','\x20API\x20secret\x20is\x20invalid','(((.+)+)+)+$','privateKeyFromPem','process\x20','LOCKED','limit','2.3.5','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','EUR','date','PAXG','Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)','Portfolio\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','enabled','status\x20code\x20401','BNB/','padEnd','args','marketcapApi','fetchTicker','max','BNB','bb-settings.json','\x20blocked\x20API\x20(DDoSProtection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','fees','668962yRowhs','join','abs','full','openOrders','Invalid\x20API\x20details,\x20please\x20try\x20again\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','Headless:\x20','debug','configuration','4393939WdisJJ','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','slider','getMonth','RETRY\x20-\x20Problem\x20resolved\x20after\x20','log','watchTradesForSymbols()','Network\x20error\x20details:','BTC','-config.json','last','2.6.23','\x20API\x20key,\x20secret\x20or\x20password\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','portfolio1','9108170LrtHsz','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)','\x20minutes\x20-\x20','fetchBalance()','date-fns','percentage','loadSymbols()','push','restart','ID:\x20','format','complete','\x0aSymbol(s):\x20','Saving\x20configuration','enableFiatToggle','keys','getTime','balancing\x20resumes\x20when\x20cooldown\x20ends','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','\x20-\x20bot\x20not\x20started','fiat','timeout','Error\x20details:','emojisell','test','\x20attempts','getFullYear',')\x20|\x20exchange:\x20','type','assign','Net\x20effect','success','\x20change','Order\x20is\x20invalid:\x20','recent20','-results.json','\x20uses\x20','Error\x20in\x20loadSymbols():\x20','fetchBalance','number','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','12FHJRtj','\x20portfolio:</b>\x20\x0a\x0a','argv','sell','rightTxt','floor','<pre>','remove','order','final','marketcap','watchTrades','Valid\x20balance\x20for\x20','Limit\x20(low-margin)','initial','initTickers()','red_yellow_blue','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','findIndex','running','-performance.json','substring','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','getHours','writeFile','watchTradesForSymbols','watchOrders()','RETRY\x20-\x20Error\x20in\x20','leftTxt','1\x20-\x20FILLED\x20unknown\x20order:\x20','toLowerCase','privateKey','ExchangeNotAvailable','2.6.22','realized','ExchangeError','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','\x20>\x20pausing\x20bot\x20for\x20','Insufficient\x20funds\x20to\x20execute\x20order:\x20','node-forge','API-key\x20format\x20invalid','\x20/\x20','1\x20-\x20FILLED\x20known\x20order:\x20','toUpperCase','no\x20open\x20orders','threshold','apiPassword','************','limits','UNLOCKING','5630HUhjEn','basecoin','excluded','ETH','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','Unknown\x20error:\x20','onepagemode','starting-balances','indexOf','Invalid\x20symbol:\x20','market','\x20exchange','event-history','environment','search','add','none','staging','Error:\x20Invalid\x20argument\x20','event','time','usd','datetime','Executed\x20','pro','AuthenticationError','switch-manual','marketcapsqrt','create','highest','lowdb/adapters/FileSync','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','heapUsed','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','length','write','startnumber','amount','basecoinvalue','Unknown\x20error\x20-\x20check\x20logs','\x20-\x20','startprice','code','USDT','recreateCoinResults()','1\x20-\x20Validate\x20orders:\x20','\x20|\x20highest\x20fee:\x20','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','UNLOCKED','Set\x20lock\x20orders\x20to:\x20','distribution','Updating\x20API\x20key\x20(not\x20saved\x20in\x20config\x20file\x20yet)','netoffset','createWriteStream','startdate','version','Binance','change24h','No\x20more\x20open\x20orders\x20-\x20','MIN_NOTIONAL','valid','getDate','Trigger:\x20',')\x20unknown\x20order:\x20','filled','InvalidNonce','<b>','\x20minutes','performance','1050832AYUYRk','side','\x20hour','Avoiding\x20continuous\x20order\x20attempts','axios','getMinutes','find','changes','getSeconds','toggleBotMode','customId','min','progress','active','yyyy/MM/dd','filter','Exchange','error','Fee\x20discount\x20refund\x20detected:\x20','buy','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','canceled','\x20(see:\x20hodlerhacks.com/fix/1)','status','PermissionDenied','cloneDeep','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','Error\x20in\x20testAPI():\x20','createOrder','bitmex','removed','differenceInSeconds','headless','timestamp','\x20closed\x20the\x20connection\x20(see:\x20hodlerhacks.com/fix/5)','recovery','toFixed','stringify','limit-high','buys','BUSD','cost','/USDT','eur','constructor','freeze','Loading\x20completed','net-fiat','toString','apply',':\x20Bot\x20','remainingSymbols','coins','Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute','target','bot-','Market','cancelOrder','Bot\x20','trade','emojibuy','includes','apiKey','storeHeadless','splice','Stopped\x20fetching\x20balance\x20after\x20','unlinkSync','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','Unfilled\x20order(s)\x20canceled\x20after\x20','Resuming\x20(','added','570034awrODG','./logs/','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','ongoing','coin',':\x20timer\x20>','defaults',',\x20must\x20be\x20a\x203\x20digit\x20number','bots','string','./config/','replace','open','split','sendMetricsTelegram','./version.json','\x20not\x20available\x20(see:\x20hodlerhacks.com/fix/5)','ordertype','slice','entries','change','loadMarkets','delta','set','ccxt','storeFiat','marketcapEnabled','value','Order\x20filled:\x20','Error\x20occurred:\x20','1\x20-\x20Handle\x20open\x20orders','\x20>\x20stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','bb-secure.json','cancelLoading','password','average','\x20blocked\x20API\x20(RateLimitExceeded)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','\x20API\x20key\x20is\x20invalid','%\x20(','\x20|\x20','7242OUDDvp','Failed\x20to\x20load\x20coin\x20data\x20for\x20','watchOrders','Pausing\x20for\x20','autoliquidity','9RnUPaA','2.5.0','lowdb','path','send','Placing\x20order\x20for:\x20','spot','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','decode64','has','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','cancelOrders()','amountToPrecision','Cryptocom',')\x20known\x20order:\x20','mkdirSync','Test\x20API','botname','\x20network\x20error:\x20','fee','1StlJlP','cancel','price','symbol','TUSD','USD','parse','Exception\x20thrown\x20in\x20','offset','143ynIyAt','util','sort','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','showConfig','Portfolio\x20change\x20detected:\x20','\x20rejected\x20your\x20API\x20request\x20(see:\x20hodlerhacks.com/fix/4)','Bitget','cooldown','Net\x20','isEqual','\x20not\x20responding\x20(see:\x20hodlerhacks.com/fix/5)','\x20|\x20lock\x20orders:\x20','fetchTickers()','liquidity','exchange\x20reload','function','Order\x20amount\x20is\x20invalid:\x20','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20trying\x20again\x20in\x20','map','net-basecoin','kill','fromCodePoint','exchange','exchanges','logs','showname','OrderNotFound','token\x20is\x20expired','initclient','getStartingBalances','sortBy','request-time','page','sqrt','configstate','market_cap','data','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','round','limit-low','reverse','padStart','Initializing\x20exchange:\x20already\x20done','forEach','uncaughtException','sells','\x20value','bot','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','orderstatus','total','prevnumber','production','\x20:\x20','001','portfolio','timeshift','577380tGFffu','warning','OnMaintenance','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','Exchange\x20permission\x20denied\x20-\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','***','getPortfolio','placeOrder()','update-liquidity','\x20order:\x20','get','2.6.0','USDP','decrypt','Huobi','existsSync','RSA-OAEP','</pre>','closed','\x20|\x20Custom\x20ID:\x20','colorscheme','/USD','configuration-stored','2\x20-\x20handling\x20FILLED\x20order:\x20','balancing\x20resumed','Bybit','fetchOpenOrders','pid','orderId','Cex','Waited\x20','breakeven','Error\x20while\x20deleting\x20files:\x20','pki','\x20metrics:</b>\x20\x0a\x0a','-events.json','balances','32rmIsYl','memoryUsage','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','RateLimitExceeded','apiSecret','2\x20-\x20Handled\x20open\x20orders','quote','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','\x20>\x20','\x20exchange\x20error:\x20','watchTrades()','<b>Bot\x20','fetchTickers','startsWith','Reset\x20|\x20','1\x20-\x20partially\x20FILLED\x20(','Error\x20details:\x20','yargs/yargs','/EUR'];_0x20a2=function(){return _0xd98d8c;};return _0x20a2();}const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x5dc,balanceUpdateRetries=0x5;let enableFiatToggle;const serverversion=require(_0x850d(0x1d8))['version'],environment=require(_0x850d(0x1d8))[_0x850d(0x326)]||_0x850d(0x248),botID=process[_0x850d(0x2e9)][0x2]||_0x850d(0x24a),pattern=/^[0-9]{3}$/;!pattern[_0x850d(0x2d6)](botID)&&(console[_0x850d(0x2b5)](_0x850d(0x32b)+botID+_0x850d(0x1d0)),killBot());const userID=process[_0x850d(0x2e9)][0x3]||'',configpath=userID?_0x850d(0x1d3)+userID+'/':_0x850d(0x1d3),logspath=userID?_0x850d(0x1ca)+userID+'/':_0x850d(0x1ca),loggerfile=fs[_0x850d(0x34e)](logspath+'/output-000.log',{'flags':'a'});!fs[_0x850d(0x25c)](configpath)&&fs['mkdirSync'](configpath);!fs['existsSync'](logspath)&&fs[_0x850d(0x205)](logspath);const configfile=configpath+_0x850d(0x395)+botID+_0x850d(0x2b9),logfile=configpath+_0x850d(0x395)+botID+_0x850d(0x270),performancefile=configpath+'bot-'+botID+_0x850d(0x2fb),coinresultsfile=configpath+_0x850d(0x395)+botID+_0x850d(0x2e1),settingsfile=configpath+_0x850d(0x2a4),securefile=configpath+_0x850d(0x1e9),configbackuppath=configpath+'/backup/',adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs['defaults']({'logs':[],'version':serverversion})[_0x850d(0x33c)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x850d(0x1cf)]({'data':[],'version':serverversion})[_0x850d(0x33c)]();function _0x5a14(_0x1791d0,_0x58f317){const _0x5a91ae=_0x20a2();return _0x5a14=function(_0x2994ea,_0xfe29c6){_0x2994ea=_0x2994ea-0x1bc;let _0x20a248=_0x5a91ae[_0x2994ea];return _0x20a248;},_0x5a14(_0x1791d0,_0x58f317);}const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x850d(0x1cf)]({'bot':[],'version':serverversion})[_0x850d(0x33c)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x850d(0x1cf)]({'coins':[],'version':serverversion})[_0x850d(0x33c)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0,settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x134be4=>{const _0x3a8653=_0x850d;console[_0x3a8653(0x2b5)](_0x134be4);},'simple':_0xcc215d=>{const _0x4938a3=_0x850d;console[_0x4938a3(0x2b5)](_0xcc215d),loggerfile[_0x4938a3(0x33c)](util['format'](_0xcc215d)+'\x0a');},'full':async(_0x1ad695,_0x505f50='')=>{const _0x11012a=_0x850d;let _0x399963;if(config[_0x11012a(0x22d)])_0x399963=getTimeStamp()+':\x20'+config[_0x11012a(0x207)]+'\x20>\x20'+_0x1ad695;else _0x399963=getTimeStamp()+_0x11012a(0x390)+botID+_0x11012a(0x27b)+_0x1ad695;console['log'](_0x399963),loggerfile[_0x11012a(0x33c)](util['format'](_0x399963)+'\x0a'),_0x505f50&&(console[_0x11012a(0x2b5)](_0x505f50),loggerfile[_0x11012a(0x33c)](util[_0x11012a(0x2c8)](_0x505f50)+'\x0a'));},'debug':async(_0xab6491,_0x22a66b='')=>{const _0x41dd4e=_0x850d;let _0x9e961e;if(config[_0x41dd4e(0x22d)])_0x9e961e=getTimeStamp()+':\x20'+config[_0x41dd4e(0x207)]+'\x20>\x20[DEBUG]\x20'+_0xab6491;else _0x9e961e=getTimeStamp()+_0x41dd4e(0x390)+botID+'\x20>\x20[DEBUG]\x20'+_0xab6491;if(debugging)console[_0x41dd4e(0x2b5)](_0x9e961e);loggerfile[_0x41dd4e(0x33c)](util[_0x41dd4e(0x2c8)](_0x9e961e)+'\x0a');if(_0x22a66b){if(debugging)console[_0x41dd4e(0x2b5)](_0x22a66b);loggerfile['write'](util['format'](_0x22a66b)+'\x0a');}}};process['on'](_0x850d(0x240),function(_0x54beca){const _0x1f62a7=_0x850d;handleError(_0x54beca,_0x1f62a7(0x240));});settings[_0x850d(0x24c)]!=config['timeshift']&&updateTimeshift(settings[_0x850d(0x24c)]);settings[_0x850d(0x31f)]!=config[_0x850d(0x31f)]&&updateOnepagemode(settings[_0x850d(0x31f)]);(settings[_0x850d(0x2a0)]&&!config[_0x850d(0x2a0)]||!settings['marketcapApi']&&config[_0x850d(0x2a0)])&&updateMarketcapApi(settings[_0x850d(0x2a0)]);process[_0x850d(0x1fa)]({'started':_0x850d(0x2fa)},_0x303de1=>{}),initializeProcessListeners();function proxyEmit(_0x223e86,_0x3d71c9=null){const _0x409e01=_0x850d;process[_0x409e01(0x1fa)]({'function':_0x223e86,'args':_0x3d71c9},_0x5921c9=>{});}function initializeProcessListeners(){process['on']('message',_0x5a09a3=>{const _0x12f9a3=_0x5a14;switch(Object['keys'](_0x5a09a3)[0x0]){case'timeshift':_0x5a09a3[_0x12f9a3(0x24c)]!=undefined&&(settings['timeshift']=_0x5a09a3['timeshift'],updateTimeshift(settings[_0x12f9a3(0x24c)]));break;case _0x12f9a3(0x31f):_0x5a09a3[_0x12f9a3(0x31f)]!=undefined&&(settings[_0x12f9a3(0x31f)]=_0x5a09a3[_0x12f9a3(0x31f)],updateOnepagemode(settings['onepagemode']));break;case _0x12f9a3(0x2a0):_0x5a09a3[_0x12f9a3(0x2a0)]!=undefined&&(settings[_0x12f9a3(0x2a0)]=_0x5a09a3[_0x12f9a3(0x2a0)],updateMarketcapApi(settings['marketcapApi']));break;case _0x12f9a3(0x1d1):_0x5a09a3['bots']!=undefined&&(bots=JSON[_0x12f9a3(0x210)](_0x5a09a3[_0x12f9a3(0x1d1)]),proxyEmit(_0x12f9a3(0x1d1),bots));break;case _0x12f9a3(0x223):switch(_0x5a09a3['function']){case _0x12f9a3(0x230):initclient();break;case _0x12f9a3(0x367):toggleBotMode();break;case'emitHistory':emitHistory(_0x5a09a3[_0x12f9a3(0x29f)]);break;case'deleteHistoryAlerts':deleteHistoryAlerts(_0x5a09a3[_0x12f9a3(0x29f)]);break;case _0x12f9a3(0x253):getPortfolio(_0x5a09a3['args']);break;case'storeConfiguration':storeConfiguration(_0x5a09a3[_0x12f9a3(0x29f)]);break;case _0x12f9a3(0x1c1):storeHeadless(_0x5a09a3[_0x12f9a3(0x29f)]);break;case _0x12f9a3(0x1e2):storeFiat(_0x5a09a3[_0x12f9a3(0x29f)]);break;case'resetHistory':resetHistory();break;case _0x12f9a3(0x231):getStartingBalances(getNormalizedPerformance());break;case'placeOrder':placeOrder(_0x5a09a3[_0x12f9a3(0x29f)]);break;case _0x12f9a3(0x1ea):cancelLoading();break;case _0x12f9a3(0x217):showConfig();break;case _0x12f9a3(0x1d7):sendMetricsTelegram();break;case'sendPortfolioTelegram':sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x3cc133=![]){const _0x564760=_0x850d;logger[_0x564760(0x2ae)](_0x564760(0x281)+(_0x3cc133?_0x564760(0x222):'no\x20exchange\x20reloaded')+'\x20|\x20exchange:\x20'+config[_0x564760(0x22a)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x3cc133)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x564760(0x1c0)]!=''&&config[_0x564760(0x1c0)]!='***'){loadingProgress=0x0;_0x3cc133&&(await initExchange(),await loadSymbols(),loadingProgress=0x1,setStableCoins(),proxyEmit(_0x564760(0x2af),emittedConfiguration()),initialPerformanceStored=![]);const _0x3622e4=await getCoins();[currentCoins,currentCoinsAll]=_0x3622e4,setBlockTransactionDetection(![]),startScheduler(),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x564760(0x2ae)]('Loading\x20completed'),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x564760(0x33b)]==0x0&&allOpenOrders[_0x564760(0x33b)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function resumeBot(_0x4566f8=![]){const _0x4ce1f4=_0x850d;logger[_0x4ce1f4(0x2ae)](_0x4ce1f4(0x1c7)+(_0x4566f8?'quick':_0x4ce1f4(0x2c9))+_0x4ce1f4(0x2d9)+config[_0x4ce1f4(0x22a)]);if(pidBalances)clearTimeout(pidBalances);if(_0x4566f8){getBalances();return;}coinsLoaded=![];if(config[_0x4ce1f4(0x1c0)]!=''&&config[_0x4ce1f4(0x1c0)]!=_0x4ce1f4(0x252)){loadingProgress=0x1;const _0x5c2d6b=await getCoins();[currentCoins,currentCoinsAll]=_0x5c2d6b,setBlockTransactionDetection(![]),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x4ce1f4(0x2ae)](_0x4ce1f4(0x38c)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x4ce1f4(0x33b)]==0x0&&allOpenOrders['length']!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();}}async function getMarketCap(_0x5a117d){const _0xfc8419=_0x850d;let _0x913e33=![];if(_0x5a117d)_0x913e33=!![];let _0x17d785;_0x913e33?_0x17d785=_0x5a117d[_0xfc8419(0x226)](_0x1de95c=>_0x1de95c[_0xfc8419(0x1cd)]):_0x17d785=currentCoinsAll[_0xfc8419(0x226)](_0x1aea10=>_0x1aea10[_0xfc8419(0x1cd)]);if(!config[_0xfc8419(0x2a0)]||!_0x913e33&&!config[_0xfc8419(0x1e3)]||_0x17d785[_0xfc8419(0x33b)]==0x0)return;let _0x16bb0b=null;try{_0x16bb0b=await axios[_0xfc8419(0x257)](_0xfc8419(0x2d0),{'headers':{'X-CMC_PRO_API_KEY':settings[_0xfc8419(0x2a0)]},'params':{'symbol':_0x17d785[_0xfc8419(0x38e)]()}});}catch(_0x523466){_0x16bb0b=null,_0x523466[_0xfc8419(0x38e)]()[_0xfc8419(0x1bf)](_0xfc8419(0x29c))?(config[_0xfc8419(0x2a0)]=![],updateConfig(),proxyEmit(_0xfc8419(0x2af),emittedConfiguration()),logHistory('error',_0xfc8419(0x2b1))):(logHistory(_0xfc8419(0x36f),_0xfc8419(0x225)+schedulerInterval/(0x3c*0x3e8)+_0xfc8419(0x35c)),logger[_0xfc8419(0x2ae)](_0xfc8419(0x2d4),_0x523466[_0xfc8419(0x38e)]()+_0xfc8419(0x341)+_0x523466[_0xfc8419(0x343)]));}if(_0x16bb0b){let _0x599de2=0x0;const _0x1c7f44=_0x16bb0b[_0xfc8419(0x238)];_0x17d785[_0xfc8419(0x23f)](_0x47165b=>{const _0xba26f1=_0xfc8419;if(_0x1c7f44[_0xba26f1(0x238)][_0x47165b][0x0])_0x599de2+=_0x1c7f44[_0xba26f1(0x238)][_0x47165b][0x0]['quote'][_0xba26f1(0x20f)][_0xba26f1(0x237)];}),_0x17d785[_0xfc8419(0x23f)](_0x3591fa=>{const _0x40b001=_0xfc8419,_0x19ea0e=_0x1c7f44['data'][_0x3591fa][0x0]?_0x1c7f44[_0x40b001(0x238)][_0x3591fa][0x0][_0x40b001(0x279)][_0x40b001(0x20f)]['market_cap']:0x0;if(_0x913e33){const _0x13af6d=_0x5a117d[_0x40b001(0x364)](_0x59ddac=>_0x59ddac[_0x40b001(0x1cd)]==_0x3591fa);_0x13af6d&&(_0x13af6d['marketcap']=_0x19ea0e);}else{const _0xdb1b83=currentCoins[_0x40b001(0x364)](_0x22e4c2=>_0x22e4c2[_0x40b001(0x1cd)]==_0x3591fa);_0xdb1b83&&(_0xdb1b83['marketcap']=_0x19ea0e);const _0x57d757=currentCoinsAll['find'](_0x3bdaa5=>_0x3bdaa5['coin']==_0x3591fa);_0x57d757&&(_0x57d757[_0x40b001(0x2f1)]=_0x19ea0e);}}),!_0x913e33&&updateTargetDistribution();}}function updateTargetDistribution(){const _0x4cd47a=_0x850d,_0x5e47a6=0x2;let _0x122254=0x0,_0x124894=0x0,_0x20ab6a=0x0,_0x5da5c2=0x0,_0x47a533=0x0;config[_0x4cd47a(0x24b)][_0x4cd47a(0x23f)](_0x529355=>{const _0x516bc4=_0x4cd47a;if(!_0x529355[_0x516bc4(0x31b)]){_0x20ab6a++,_0x122254+=_0x529355[_0x516bc4(0x2b2)];if(_0x529355['slider']===-0x1){_0x122254++;const _0x35086c=currentCoinsAll[_0x516bc4(0x364)](_0x566c95=>_0x566c95[_0x516bc4(0x1cd)]==_0x529355[_0x516bc4(0x1cd)]);_0x35086c&&(_0x5da5c2+=_0x35086c[_0x516bc4(0x2f1)],_0x47a533+=Math[_0x516bc4(0x235)](_0x35086c['marketcap']));}if(_0x529355[_0x516bc4(0x2b2)]!==-0x1)_0x124894++;}});let _0x2e9ce1;const _0x33937d=0x64-_0x122254,_0x45948a=_0x20ab6a-_0x124894;_0x2e9ce1=_0x45948a===0x0?_0x122254:Math[_0x4cd47a(0x2a2)](0x64,_0x122254),config[_0x4cd47a(0x24b)]['forEach'](_0x4e81b1=>{const _0x27d98f=_0x4cd47a,_0x34b042=currentCoinsAll[_0x27d98f(0x364)](_0x1ed691=>_0x1ed691['coin']==_0x4e81b1[_0x27d98f(0x1cd)]);_0x34b042&&(_0x4e81b1['marketcap']=_0x34b042[_0x27d98f(0x2f1)]);if(!_0x4e81b1[_0x27d98f(0x31b)]){if(_0x2e9ce1<=0x64){if(_0x4e81b1[_0x27d98f(0x2b2)]===-0x1){if(_0x5da5c2!==0x0&&config[_0x27d98f(0x1e3)]){if(_0x34b042){if(config[_0x27d98f(0x1e3)]=='marketcap')_0x4e81b1['distribution']=(_0x33937d/(_0x5da5c2/_0x34b042[_0x27d98f(0x2f1)]))[_0x27d98f(0x382)](_0x5e47a6);else config[_0x27d98f(0x1e3)]==_0x27d98f(0x334)&&(_0x4e81b1['distribution']=(_0x33937d/(_0x47a533/Math[_0x27d98f(0x235)](_0x34b042[_0x27d98f(0x2f1)])))[_0x27d98f(0x382)](_0x5e47a6));}}}}}}),updateConfig();}function updateConfig(){const _0x79c09f=_0x850d;let _0x395f86=dbConfig[_0x79c09f(0x257)]('bot')[_0x79c09f(0x364)]({'botID':botID})[_0x79c09f(0x1e4)]();_0x395f86&&dbConfig[_0x79c09f(0x257)](_0x79c09f(0x243))['find']({'botID':botID})[_0x79c09f(0x2db)](config)['write']();}function logMemory(){const _0x5a25c5=_0x850d;if(environment!=_0x5a25c5(0x32a))return;const _0x346e10=process[_0x5a25c5(0x273)]()[_0x5a25c5(0x339)]/0x400/0x400;logger[_0x5a25c5(0x2ae)](_0x5a25c5(0x291)+process[_0x5a25c5(0x268)]+_0x5a25c5(0x2e2)+formatResult(_0x346e10,0x1)+'\x20MB');}async function startScheduler(){const _0x175630=_0x850d,_0x26a476=shiftedTime()[_0x175630(0x2fe)]();getMarketCap(),loadSymbols(),_0x26a476==0x1&&logMemory(),await sleep(schedulerInterval),startScheduler();}async function restartBot(_0x4d053b=![]){const _0x384a9e=_0x850d;logger['debug']('Initiating\x20bot\x20restart');if(!_0x4d053b)while(lockOrders!=ORDERS[_0x384a9e(0x349)]||coolingDown){await sleep(0x3e8);}process['send']({'stop':_0x384a9e(0x2c6)},_0x392a51=>{});}async function initExchange(_0x21ad35=config[_0x850d(0x22a)],_0x3005fd=config['apiKey'],_0x12a558=config[_0x850d(0x277)],_0x142a79=config[_0x850d(0x315)]){const _0x34ea0d=_0x850d;if(exchange){logger[_0x34ea0d(0x2ae)](_0x34ea0d(0x23e));return;}logger[_0x34ea0d(0x2ae)]('Initializing\x20exchange');!supportedExchanges()[_0x34ea0d(0x1bf)](_0x21ad35)&&(logHistory(_0x34ea0d(0x36f),_0x34ea0d(0x250)+_0x21ad35+_0x34ea0d(0x324)),killBot());const _0x39c72b=ccxt['pro'][_0x21ad35[_0x34ea0d(0x305)]()];exchange=new _0x39c72b({'apiKey':_0x3005fd,'secret':_0x12a558,'options':{'defaultType':_0x34ea0d(0x1fc)}});if(_0x142a79)exchange[_0x34ea0d(0x1eb)]=_0x142a79;}function updateExchange(_0x1ba06b,_0xb45b71,_0x223fa2=null){const _0x122cae=_0x850d;exchange[_0x122cae(0x1c0)]=_0x1ba06b,exchange[_0x122cae(0x277)]=_0xb45b71,exchange[_0x122cae(0x315)]=_0x223fa2,logger[_0x122cae(0x2ae)](_0x122cae(0x34c));}function setStableCoins(){const _0x413722=_0x850d;let _0x1493ac=config['basecoin']==_0x413722(0x31c)?_0x413722(0x31c):config[_0x413722(0x31a)]==_0x413722(0x298)?'PAXG':_0x413722(0x2b8),_0x4bf869=allSymbols[_0x413722(0x1bf)](_0x1493ac+_0x413722(0x262))?_0x413722(0x20f):allSymbols[_0x413722(0x1bf)](_0x1493ac+_0x413722(0x388))?'USDT':'EUR',_0xae9587=allSymbols['includes'](_0x1493ac+_0x413722(0x285))?_0x413722(0x296):_0x4bf869;enableFiatToggle=!![],_0x4bf869==_0x413722(0x296)&&(enableFiatToggle=![],storeFiat(_0x413722(0x296))),_0xae9587!=_0x413722(0x296)&&(enableFiatToggle=![],storeFiat(_0x413722(0x20f))),stablecoins={'eur':{'coin':''+_0x1493ac+_0xae9587,'symbol':_0x1493ac+'/'+_0xae9587},'usd':{'coin':''+_0x1493ac+_0x4bf869,'symbol':_0x1493ac+'/'+_0x4bf869}};}async function initwsCcxt(){const _0x6a1be7=_0x850d;initCycle++;const _0x25ba41=initCycle;let _0x191d2d=[];config[_0x6a1be7(0x24b)][_0x6a1be7(0x23f)](_0x569bbc=>{const _0x312961=_0x6a1be7;if(!_0x569bbc[_0x312961(0x31b)]&&_0x569bbc[_0x312961(0x1cd)]!=config[_0x312961(0x31a)])_0x191d2d[_0x312961(0x2c5)](_0x569bbc[_0x312961(0x20d)]);});if(!_0x191d2d[_0x6a1be7(0x1bf)](stablecoins[_0x6a1be7(0x389)][_0x6a1be7(0x20d)]))_0x191d2d[_0x6a1be7(0x2c5)](stablecoins['eur'][_0x6a1be7(0x20d)]);if(!_0x191d2d[_0x6a1be7(0x1bf)](stablecoins[_0x6a1be7(0x32e)][_0x6a1be7(0x20d)]))_0x191d2d[_0x6a1be7(0x2c5)](stablecoins[_0x6a1be7(0x32e)][_0x6a1be7(0x20d)]);if(config['exchange'][_0x6a1be7(0x280)]('Binance')&&config[_0x6a1be7(0x31a)]!=_0x6a1be7(0x298)){if(!_0x191d2d[_0x6a1be7(0x1bf)](_0x6a1be7(0x29d)+config[_0x6a1be7(0x31a)]))_0x191d2d[_0x6a1be7(0x2c5)](_0x6a1be7(0x29d)+config[_0x6a1be7(0x31a)]);}loadCoins(_0x191d2d),_0x191d2d=validateSymbols(_0x191d2d);const _0x39b296=async _0x41a3e0=>{const _0x4f1464=_0x6a1be7;let _0x16d6ce;try{const _0x1d477f=await getTickers(_0x41a3e0);Object[_0x4f1464(0x1dc)](_0x1d477f)[_0x4f1464(0x23f)](_0x5c5d93=>{const _0x5af03b=_0x4f1464;_0x16d6ce=_0x5c5d93[0x1]['symbol'],gTicker[noslash(_0x16d6ce)]=_0x5c5d93[0x1][_0x5af03b(0x2ba)],gChange[_0x16d6ce]=_0x5c5d93[0x1]['percentage'];});}catch(_0x24b38d){await handleError(_0x24b38d,_0x4f1464(0x2f6),_0x16d6ce);}},_0x59a2a4=async _0xc2aa7a=>{const _0x2da427=_0x6a1be7;while(initCycle==_0x25ba41){if(!botPaused)try{const _0x22fecb=await exchange[_0x2da427(0x2f2)](_0xc2aa7a);gTicker[noslash(_0x22fecb[0x0][_0x2da427(0x20d)])]=_0x22fecb[0x0][_0x2da427(0x20c)];}catch(_0x458ba9){if(!exchangeStopped)await handleError(_0x458ba9,_0x2da427(0x27d),_0xc2aa7a);}else await sleep(0x64);}},_0x34170b=async _0x58577c=>{const _0x3aa1ad=_0x6a1be7;while(initCycle==_0x25ba41){if(!botPaused)try{const _0x3e1559=await exchange[_0x3aa1ad(0x300)](_0x58577c),_0x38a162=_0x3e1559['pop']();gTicker[noslash(_0x38a162['symbol'])]=_0x38a162['price'];}catch(_0x99a4e0){if(!exchangeStopped)await handleError(_0x99a4e0,_0x3aa1ad(0x2b6),_0x58577c[_0x3aa1ad(0x38e)]());}else await sleep(0x64);}},_0x5bd82e=async _0x127a0d=>{const _0x32c25b=_0x6a1be7;while(initCycle==_0x25ba41){if(!botPaused){let _0x43fb4b;try{await sleep(0x3c*0x3e8);const _0x1cfa1e=await getTickers(_0x127a0d);Object['entries'](_0x1cfa1e)[_0x32c25b(0x23f)](_0x36a605=>{const _0x5e8eba=_0x32c25b;_0x43fb4b=_0x36a605[0x1][_0x5e8eba(0x20d)],gChange[_0x43fb4b]=_0x36a605[0x1][_0x5e8eba(0x2c3)];});}catch(_0x3729bf){if(!exchangeStopped)await handleError(_0x3729bf,_0x32c25b(0x220),_0x43fb4b);}}else await sleep(0x64);}},_0xb05089=async _0x44a8af=>{const _0x63490c=_0x6a1be7;while(initCycle==_0x25ba41){if(!botPaused)try{const _0x1fd090=await exchange[_0x63490c(0x1f3)](_0x44a8af);initCycle==_0x25ba41&&_0x1fd090[_0x63490c(0x23f)](_0x58005=>{updateNumberCoinsCcxt(_0x58005);});}catch(_0x54bd13){if(!exchangeStopped)await handleError(_0x54bd13,_0x63490c(0x301));}else await sleep(0x64);}};_0x39b296(_0x191d2d),_0x5bd82e(_0x191d2d),exchange[_0x6a1be7(0x1ff)][_0x6a1be7(0x300)]&&!(config[_0x6a1be7(0x22a)]==_0x6a1be7(0x266)&&_0x191d2d[_0x6a1be7(0x33b)]>0xa)?_0x34170b(_0x191d2d):_0x191d2d[_0x6a1be7(0x23f)](_0x1c35c5=>{_0x59a2a4(_0x1c35c5);}),_0x191d2d[_0x6a1be7(0x23f)](_0x5c163c=>{_0xb05089(_0x5c163c);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x5f012a){const _0x6e0e82=_0x850d;let _0x59e364={};try{if(config[_0x6e0e82(0x22a)]!=_0x6e0e82(0x203))_0x59e364=await exchange[_0x6e0e82(0x27f)](_0x5f012a);else for(const _0x5a81d9 of _0x5f012a){const _0x48b679=await exchange[_0x6e0e82(0x2a1)](_0x5a81d9);_0x59e364[_0x5a81d9]=_0x48b679;}return _0x59e364;}catch(_0x5492f5){throw _0x5492f5;}}function setBlockTransactionDetection(_0x45f178){const _0x2cf348=_0x850d;blockTransactionDetection=_0x45f178,logger[_0x2cf348(0x2ae)]('Block\x20transaction\x20detection:\x20'+blockTransactionDetection);}async function detectLiquidityChange(_0x5afbb2=0x0){const _0x34da4a=_0x850d;transactionDetectionOngoing=!![];try{const _0x34be47=await getCoins(_0x5afbb2),[_0xb7cd1b,_0x560d6f]=_0x34be47;let _0x11ef50=[];currentCoins[_0x34da4a(0x23f)](_0x2db3ca=>{const _0x48c94d=_0x34da4a,_0x3421b6=_0xb7cd1b['find'](_0x339c42=>_0x339c42['coin']==_0x2db3ca[_0x48c94d(0x1cd)]);if(_0x3421b6){if(_0x2db3ca[_0x48c94d(0x2e5)]!=_0x3421b6[_0x48c94d(0x2e5)]){let _0x298095;if(_0x2db3ca[_0x48c94d(0x1cd)]!=config['basecoin']){const _0x4c9801=gTicker[noslash(_0x2db3ca[_0x48c94d(0x20d)])];_0x298095=_0x2db3ca['reverse']?0x1/_0x4c9801:_0x4c9801;}else _0x298095=0x1;_0x11ef50[_0x48c94d(0x2c5)]({'coin':_0x2db3ca[_0x48c94d(0x1cd)],'symbol':_0x2db3ca[_0x48c94d(0x20d)],'price':_0x298095,'number':Number(formatResult(_0x3421b6[_0x48c94d(0x2e5)]-_0x2db3ca['number'],0x8)),'basecoinvalue':_0x298095*(_0x3421b6[_0x48c94d(0x2e5)]-_0x2db3ca[_0x48c94d(0x2e5)])});}}});if(_0x11ef50[_0x34da4a(0x33b)]>0x0&&!blockTransactionDetection){for(const _0x4e926a of _0x11ef50){if(config[_0x34da4a(0x1f5)]){logger[_0x34da4a(0x2ae)](_0x34da4a(0x28a)+_0x4e926a['basecoinvalue']+_0x34da4a(0x347)+lastFees['highest']);if(lastFees[_0x34da4a(0x336)]==0x0||Math[_0x34da4a(0x2a9)](_0x4e926a[_0x34da4a(0x33f)])>lastFees['highest']*0x3){if(config['autoliquidity']=='update-liquidity'){delete _0x4e926a[_0x34da4a(0x20d)],delete _0x4e926a['basecoinvalue'];let _0x5ed0e2=[],_0x51b147=[...config['liquidity']]||[],_0x2c7d58=config[_0x34da4a(0x221)];_0x51b147[_0x34da4a(0x215)]((_0x1b33d4,_0x485b95)=>_0x1b33d4[_0x34da4a(0x297)]>_0x485b95['date']?-0x1:_0x485b95[_0x34da4a(0x297)]>_0x1b33d4[_0x34da4a(0x297)]?0x1:0x0);const _0x150566=getDate();if(_0x51b147[0x0]){const _0x3c3c8e=fns[_0x34da4a(0x210)](_0x51b147[0x0]['date'],'yyyy/MM/dd',new Date()),_0x238b16=fns[_0x34da4a(0x210)](_0x150566,_0x34da4a(0x36c),new Date());if(fns['isEqual'](_0x3c3c8e,_0x238b16)){_0x5ed0e2=_0x51b147[0x0][_0x34da4a(0x365)];const _0x1a306e=_0x5ed0e2[_0x34da4a(0x364)](_0x2cb40a=>_0x2cb40a[_0x34da4a(0x1cd)]==_0x4e926a[_0x34da4a(0x1cd)]);_0x1a306e?(_0x1a306e[_0x34da4a(0x2e5)]+=_0x4e926a[_0x34da4a(0x2e5)],_0x1a306e['number']==0x0&&(_0x5ed0e2=_0x5ed0e2[_0x34da4a(0x36d)](_0x25f61f=>{const _0x4d9872=_0x34da4a;return _0x25f61f[_0x4d9872(0x1cd)]!=_0x4e926a[_0x4d9872(0x1cd)];}))):_0x5ed0e2[_0x34da4a(0x2c5)](_0x4e926a);const _0x26a2d7=_0x2c7d58[_0x34da4a(0x364)](_0x21d9b6=>_0x21d9b6[_0x34da4a(0x297)]==_0x150566);_0x26a2d7[_0x34da4a(0x365)]=_0x5ed0e2;}else _0x2c7d58[_0x34da4a(0x2c5)]({'date':_0x150566,'changes':[_0x4e926a]});}const _0x57c7ca=_0x2c7d58['find'](_0x5464b4=>_0x5464b4[_0x34da4a(0x297)]==_0x150566);if(_0x57c7ca){let _0x3cf0e8=!![];_0x57c7ca['changes'][_0x34da4a(0x23f)](_0x5a318d=>{const _0x38a532=_0x34da4a;if(_0x5a318d[_0x38a532(0x2e5)]!=0x0)_0x3cf0e8=![];}),_0x3cf0e8&&(_0x2c7d58=_0x2c7d58[_0x34da4a(0x36d)](_0x513330=>{return _0x513330['date']!=_0x150566;}));}let _0xdd0f70=dbConfig[_0x34da4a(0x257)](_0x34da4a(0x243))['find']({'botID':botID})[_0x34da4a(0x1e4)]();_0xdd0f70&&(dbConfig[_0x34da4a(0x257)](_0x34da4a(0x243))[_0x34da4a(0x364)]({'botID':botID})[_0x34da4a(0x2db)]({'liquidity':_0x2c7d58})[_0x34da4a(0x33c)](),config[_0x34da4a(0x221)]=_0x2c7d58);logHistory(_0x34da4a(0x2dd),_0x34da4a(0x218)+Math['abs'](_0x4e926a[_0x34da4a(0x2e5)])+'\x20'+_0x4e926a[_0x34da4a(0x1cd)]+'\x20'+(_0x4e926a[_0x34da4a(0x2e5)]>0x0?'added':_0x34da4a(0x37c))+_0x34da4a(0x216)),proxyEmit(_0x34da4a(0x2af),emittedConfiguration());const _0x40eda9=getNormalizedPerformance();emitPerformance(_0x40eda9),getStartingBalances(_0x40eda9),logger[_0x34da4a(0x2ae)](_0x34da4a(0x29a));}else config['autoliquidity']==_0x34da4a(0x333)&&(config['headless']?(await storeHeadless({'headless':![]}),logHistory('success',_0x34da4a(0x218)+Math['abs'](_0x4e926a[_0x34da4a(0x2e5)])+'\x20'+_0x4e926a[_0x34da4a(0x1cd)]+'\x20'+(_0x4e926a[_0x34da4a(0x2e5)]>0x0?'added':'removed')+'\x20-\x20bot\x20switched\x20to\x20manual\x20mode')):logger[_0x34da4a(0x2ae)](_0x34da4a(0x218)+Math[_0x34da4a(0x2a9)](_0x4e926a[_0x34da4a(0x2e5)])+'\x20'+_0x4e926a['coin']+'\x20'+(_0x4e926a[_0x34da4a(0x2e5)]>0x0?_0x34da4a(0x1c8):_0x34da4a(0x37c))+'\x20-\x20bot\x20already\x20running\x20in\x20manual\x20mode'));}else logger[_0x34da4a(0x2ae)](_0x34da4a(0x370)+Math[_0x34da4a(0x2a9)](_0x4e926a['number'])+'\x20'+_0x4e926a[_0x34da4a(0x1cd)]+'\x20'+(_0x4e926a[_0x34da4a(0x2e5)]>0x0?_0x34da4a(0x1c8):_0x34da4a(0x37c)));}else logger[_0x34da4a(0x2ae)](_0x34da4a(0x218)+Math['abs'](_0x4e926a[_0x34da4a(0x2e5)])+'\x20'+_0x4e926a[_0x34da4a(0x1cd)]+'\x20'+(_0x4e926a[_0x34da4a(0x2e5)]>0x0?'added':_0x34da4a(0x37c))+_0x34da4a(0x2e6));}currentCoins=_0xb7cd1b,currentCoinsAll=_0x560d6f;}}catch(_0x44bf74){if(!exchangeStopped)await handleError(_0x44bf74,'detectLiquidityChange()');}transactionDetectionOngoing=![];}async function watchTransactions(){await sleep(0x14*0x3e8);while(!![]){!botPaused&&!blockTransactionDetection&&coinsLoaded?(detectLiquidityChange(),await sleep(watchTransactionsInterval)):await sleep(0x3e8);}}async function loadSymbols(){const _0xb1812b=_0x850d;try{markets=await exchange[_0xb1812b(0x1de)](!![]),allSymbols=[],Object[_0xb1812b(0x1dc)](markets)['forEach'](_0x462ebc=>{const _0x1ae2ab=_0xb1812b;_0x462ebc[0x1][_0x1ae2ab(0x36b)]&&_0x462ebc[0x1][_0x1ae2ab(0x1fc)]&&allSymbols['push'](_0x462ebc[0x0]);});}catch(_0x455c8b){markets?logger[_0xb1812b(0x2ae)](_0xb1812b(0x2e3)+_0x455c8b[_0xb1812b(0x38e)]()):(loading['cancel']=!![],emitLoadingProgress(),_0x455c8b[_0xb1812b(0x38e)]()[_0xb1812b(0x305)]()[_0xb1812b(0x1bf)](_0xb1812b(0x37f))||_0x455c8b[_0xb1812b(0x38e)]()[_0xb1812b(0x305)]()['includes']('request-time')?logHistory(_0xb1812b(0x36f),'Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)'):handleErrorNoStop(_0x455c8b,_0xb1812b(0x2c4),!![]),logHistory('error','Failed\x20to\x20load\x20market\x20data\x20-\x20bot\x20not\x20started'),logHistory(_0xb1812b(0x36f),_0xb1812b(0x1f4)+loadCoinsRetryInterval/0xea60+_0xb1812b(0x295)),logger[_0xb1812b(0x2ae)](_0xb1812b(0x2d4),_0x455c8b),botPaused=!![],await sleep(loadCoinsRetryInterval),restartBot());}}function validateSymbols(_0x2db2f4){const _0x480f38=_0x850d;let _0xe5822=[];return _0x2db2f4[_0x480f38(0x23f)](_0x5345e6=>{const _0x46b076=_0x480f38;!allSymbols[_0x46b076(0x1bf)](_0x5345e6)?logHistory(_0x46b076(0x36f),_0x46b076(0x322)+_0x5345e6+_0x46b076(0x348)):_0xe5822[_0x46b076(0x2c5)](_0x5345e6);}),_0xe5822;}async function initclient(){const _0x448a55=_0x850d;proxyEmit(_0x448a55(0x2af),emittedConfiguration()),proxyEmit(_0x448a55(0x22b),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x448a55(0x271),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x26addf=getNormalizedPerformance();emitPerformance(_0x26addf),getStartingBalances(_0x26addf);}async function toggleBotMode(){const _0x2203f2=_0x850d;let _0xe1d868=dbConfig[_0x2203f2(0x257)](_0x2203f2(0x243))[_0x2203f2(0x364)]({'botID':botID})[_0x2203f2(0x1e4)]();if(_0xe1d868){const _0x197d26=!_0xe1d868['headless'];dbConfig[_0x2203f2(0x257)]('bot')[_0x2203f2(0x364)]({'botID':botID})[_0x2203f2(0x2db)]({'headless':_0x197d26})[_0x2203f2(0x33c)](),config[_0x2203f2(0x37e)]=_0x197d26,proxyEmit(_0x2203f2(0x2af),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x40b267=_0x850d;process[_0x40b267(0x1fa)]({'updatebotmanager':!![]},_0x4d2e70=>{}),logger['debug'](_0x40b267(0x2ad)+config[_0x40b267(0x37e)]);}async function loadCoins(_0x4eb57f){const _0x48042b=_0x850d;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x4d3d91,_0x286381=0x0,_0x2cb6e4=0x0;_0x4eb57f[_0x48042b(0x23f)](_0x42309e=>{const _0x5e6739=_0x48042b;loading['remainingSymbols'][_0x5e6739(0x2c5)](_0x42309e);}),loadingCanceled=![];let _0x58432d=![];while(_0x4d3d91!=_0x4eb57f['length']+maxLoadingProgress){_0x4d3d91=loadingProgress,_0x4eb57f[_0x48042b(0x23f)](_0x4bd60c=>{const _0x444a34=_0x48042b;if(gTicker[noslash(_0x4bd60c)]){loading[_0x444a34(0x391)]=loading[_0x444a34(0x391)][_0x444a34(0x36d)](_0x2ab55b=>_0x2ab55b!=_0x4bd60c);if(!watchedSymbols[_0x444a34(0x1bf)](_0x4bd60c))watchedSymbols['push'](_0x4bd60c);_0x4d3d91++;}}),loading[_0x48042b(0x36a)]=Math[_0x48042b(0x23a)](_0x4d3d91/(_0x4eb57f[_0x48042b(0x33b)]+maxLoadingProgress)*0x64);loading[_0x48042b(0x36a)]!=0x64&&(_0x2cb6e4>0x1e*0x5&&(loading['timeout']=!![],emitLoadingProgress()),_0x2cb6e4>0x78*0x5&&!_0x58432d&&(_0x58432d=!![],logHistory(_0x48042b(0x36f),_0x48042b(0x1f2)+loading[_0x48042b(0x391)][_0x48042b(0x2a8)](',\x20')+_0x48042b(0x2d1)),logHistory(_0x48042b(0x36f),'Pausing\x20for\x20'+loadCoinsRetryInterval/0xea60+'\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again'),loadingCanceled=!![],await sleep(loadCoinsRetryInterval),restartBot()));if(loadingCanceled){loading[_0x48042b(0x20b)]=!![],emitLoadingProgress();break;}else _0x286381!=loading[_0x48042b(0x36a)]&&(_0x286381=loading[_0x48042b(0x36a)],emitLoadingProgress()),_0x2cb6e4++,await sleep(0xc8);}_0x4d3d91==_0x4eb57f[_0x48042b(0x33b)]+maxLoadingProgress&&(coinsLoaded=!![],process[_0x48042b(0x1fa)]({'status':_0x48042b(0x29b),'live':_0x48042b(0x2fa)},_0x322d54=>{}),_0x58432d&&logHistory(_0x48042b(0x2dd),'All\x20coin\x20data\x20loaded\x20-\x20bot\x20started'));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x383317=_0x850d;proxyEmit(_0x383317(0x2af),{...emittedConfiguration(),'configstate':_0x383317(0x28b)});}function emitLoadingProgress(){proxyEmit('coin-loading-progress',loading);}async function getFiat(){const _0x5471ec=_0x850d;let _0x307174=gTicker[stablecoins['eur'][_0x5471ec(0x1cd)]],_0xa5bca9=gTicker[stablecoins[_0x5471ec(0x32e)][_0x5471ec(0x1cd)]];return{'eur':Number(_0x307174),'usd':Number(_0xa5bca9)};}function capitalize(_0x4f1fcc){const _0x20d354=_0x850d;return _0x4f1fcc['substring'](0x0,0x1)[_0x20d354(0x312)]()+_0x4f1fcc[_0x20d354(0x2fc)](0x1);}function supportedExchanges(){const _0x3e8f61=_0x850d,_0x5c7865=['ws',_0x3e8f61(0x27f),'fetchTicker','watchTrades',_0x3e8f61(0x1f3),_0x3e8f61(0x397),'createOrder',_0x3e8f61(0x267),_0x3e8f61(0x2e4)];let _0x125124=[],_0x1ddda0=[],_0x4e7bb9=ccxt[_0x3e8f61(0x331)][_0x3e8f61(0x22b)];_0x4e7bb9[_0x3e8f61(0x23f)](_0x1c89df=>{const _0x5f2869=_0x3e8f61;try{const _0x40467f=new ccxt[(_0x5f2869(0x331))][_0x1c89df]();_0x1ddda0[_0x5f2869(0x2c5)](_0x40467f);}catch(_0x5cb00e){}}),_0x1ddda0[_0x3e8f61(0x23f)](_0x4903e6=>{const _0x1a600f=_0x3e8f61;let _0x34b495=0x0;_0x5c7865[_0x1a600f(0x23f)](_0x134429=>{const _0x40ffaa=_0x1a600f;_0x134429 in _0x4903e6[_0x40ffaa(0x1ff)]&&_0x4903e6[_0x40ffaa(0x1ff)][_0x134429]&&_0x34b495++;}),_0x34b495==_0x5c7865[_0x1a600f(0x33b)]&&(!excludedExchanges[_0x1a600f(0x1bf)](_0x4903e6['id'])&&_0x125124[_0x1a600f(0x2c5)](capitalize(_0x4903e6['id'])));});let _0x4738a3=[];return _0x4e7bb9[_0x3e8f61(0x23f)](_0x30bafe=>{const _0x50e23a=_0x3e8f61;_0x30bafe=capitalize(_0x30bafe);if(!_0x125124[_0x50e23a(0x1bf)](_0x30bafe))_0x4738a3['push'](_0x30bafe);}),_0x125124;}function setStartDatePerformance(){const _0x15cfeb=_0x850d;if(config&&config[_0x15cfeb(0x221)][0x0][_0x15cfeb(0x365)]['length']!=0x0){const _0x163474=config[_0x15cfeb(0x221)][0x0]['changes'];dbPerformance[_0x15cfeb(0x257)]('data')[_0x15cfeb(0x364)]({'date':config[_0x15cfeb(0x34f)]})[_0x15cfeb(0x2db)]({'coins':_0x163474})[_0x15cfeb(0x33c)]();}}async function recreateCoinResults(){const _0x2c16e6=_0x850d;recreationNeeded=![];let _0x4b92b3,_0x56c55e=[];try{for(const _0x778a9b of currentCoins){if(_0x778a9b[_0x2c16e6(0x1cd)]!=config[_0x2c16e6(0x31a)]){let _0x185299=0x0,_0xc7c1c1,_0x445740;_0x4b92b3=await getAllEventOrders(_0x778a9b[_0x2c16e6(0x20d)]);if(_0x4b92b3[_0x2c16e6(0x33b)]>0x0)_0x4b92b3[_0x2c16e6(0x23f)](_0x1e8eef=>{const _0x1c7eb3=_0x2c16e6,_0x20fb7a=_0x778a9b[_0x1c7eb3(0x20d)][_0x1c7eb3(0x1bf)](config['basecoin']+'/');_0x56c55e[_0x1c7eb3(0x2c5)]({'datetime':_0x1e8eef[_0x1c7eb3(0x32f)],'coin':_0x778a9b[_0x1c7eb3(0x1cd)],'symbol':_0x778a9b[_0x1c7eb3(0x20d)],'side':_0x1e8eef[_0x1c7eb3(0x35f)],'reverse':_0x20fb7a,'amount':formatResult(_0x1e8eef['filled'],0x8),'filled':formatResult(_0x1e8eef[_0x1c7eb3(0x359)],0x8),'price':formatResult(_0x1e8eef[_0x1c7eb3(0x20c)],0x8)}),_0x185299=_0x1e8eef['side']=='buy'?_0x185299+_0x1e8eef[_0x1c7eb3(0x359)]:_0x185299-_0x1e8eef[_0x1c7eb3(0x359)];if(!_0x445740)_0x445740=_0x1e8eef[_0x1c7eb3(0x20c)];});_0xc7c1c1=_0x778a9b['number']-_0x185299;let _0x598194;config[_0x2c16e6(0x221)][_0x2c16e6(0x23f)](_0x5d4fbb=>{const _0x42b640=_0x2c16e6;!_0x598194&&(_0x598194=_0x5d4fbb[_0x42b640(0x365)][_0x42b640(0x364)](_0x41d4c6=>_0x41d4c6[_0x42b640(0x1cd)]==_0x778a9b[_0x42b640(0x1cd)]),_0x598194&&(_0xc7c1c1=_0x598194[_0x42b640(0x2e5)],_0x445740=_0x598194[_0x42b640(0x20c)]));});let _0x1606a6=dbCoinResults['get'](_0x2c16e6(0x392))['find']({'coin':_0x778a9b[_0x2c16e6(0x1cd)]})[_0x2c16e6(0x1e4)]();_0x1606a6={'coin':_0x778a9b[_0x2c16e6(0x1cd)],'number':_0xc7c1c1,'breakeven':_0x445740,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x2c16e6(0x257)](_0x2c16e6(0x392))[_0x2c16e6(0x364)]({'coin':_0x778a9b[_0x2c16e6(0x1cd)]})[_0x2c16e6(0x2db)](_0x1606a6)[_0x2c16e6(0x33c)]();}}_0x56c55e[_0x2c16e6(0x215)]((_0x222eb9,_0x7b80fd)=>_0x222eb9[_0x2c16e6(0x32f)]>_0x7b80fd['datetime']?0x1:_0x7b80fd[_0x2c16e6(0x32f)]>_0x222eb9[_0x2c16e6(0x32f)]?-0x1:0x0);let _0x5e1c88=0x0;for(let _0x3c976f of _0x56c55e){await updateCoinResults(_0x3c976f,!![]);}}catch(_0x4119c4){await handleError(_0x4119c4,_0x2c16e6(0x345));}}async function getAllEventOrders(_0x85c00d){const _0x62409=_0x850d;let _0x55d874=[],_0x1f7236=dbLogs[_0x62409(0x257)](_0x62409(0x22c))[_0x62409(0x36d)](_0x41a5cc=>{const _0x36daad=_0x62409,_0x425a78=_0x41a5cc[_0x36daad(0x32c)]['toLowerCase']();return _0x425a78['includes'](_0x85c00d[_0x36daad(0x305)]())&&(_0x425a78[_0x36daad(0x1bf)](_0x36daad(0x323))&&_0x425a78['includes'](_0x36daad(0x2ef))||_0x425a78['includes'](_0x36daad(0x359))&&_0x425a78[_0x36daad(0x1bf)]('order'));})['sortBy'](_0x62409(0x32d))[_0x62409(0x1e4)]();return _0x1f7236[_0x62409(0x23f)](_0x46c160=>{const _0x360f42=_0x62409,_0x82a964=_0x46c160[_0x360f42(0x32c)][_0x360f42(0x1bf)](_0x360f42(0x2ea))?_0x360f42(0x2ea):_0x360f42(0x371),_0x2e60be=/#([0-9]|\.)+\s/i,_0x21bd2c=Number(_0x2e60be['exec'](_0x46c160[_0x360f42(0x32c)])[0x0]['slice'](0x1)),_0x979c23=/@([0-9]|\.)+$/i,_0x42e926=Number(_0x979c23['exec'](_0x46c160[_0x360f42(0x32c)])[0x0][_0x360f42(0x1db)](0x1));_0x55d874[_0x360f42(0x2c5)]({'datetime':_0x46c160['time'],'coin':symbolToCoin(_0x85c00d),'symbol':_0x85c00d,'side':_0x82a964,'amount':_0x21bd2c,'filled':_0x21bd2c,'price':_0x42e926});}),_0x55d874;}async function validate24hChanges(){const _0x44c2a7=_0x850d;for(const _0x2b8756 of currentCoins){if(_0x2b8756['coin']!=config[_0x44c2a7(0x31a)]){let _0x102294;_0x2b8756[_0x44c2a7(0x23c)]?_0x102294=formatResult((0x1/(gChange[_0x2b8756[_0x44c2a7(0x20d)]]/0x64+0x1)-0x1)*0x64,0x3):_0x102294=gChange[_0x2b8756[_0x44c2a7(0x20d)]],_0x102294<config[_0x44c2a7(0x352)]&&(logHistory(_0x44c2a7(0x36f),_0x2b8756[_0x44c2a7(0x1cd)]+'\x20has\x20a\x2024h\x20drop\x20of\x20'+_0x102294+'%'),logHistory('error',_0x44c2a7(0x372)),logHistory(_0x44c2a7(0x36f),_0x44c2a7(0x200)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x410e01,_0x142c72){const _0xe9b000=_0x850d;if(!_0x410e01)return!![];const _0x328c36=_0x142c72[_0xe9b000(0x1d6)]('.'),_0x32bfb1=_0x410e01['split']('.');for(var _0x5c9a0a=0x0;_0x5c9a0a<_0x32bfb1['length'];_0x5c9a0a++){const _0x57403a=~~_0x32bfb1[_0x5c9a0a],_0xdf3dcf=~~_0x328c36[_0x5c9a0a];if(_0x57403a<_0xdf3dcf)return!![];if(_0x57403a>_0xdf3dcf)return![];}return![];}async function oneTimeMigration(){const _0x2ac1a1=_0x850d;let _0x3489b0=dbLogs['get'](_0x2ac1a1(0x350))['value']();if(isOlderVersion(_0x3489b0,_0x2ac1a1(0x294))){let _0x47d863=[];const _0x6a59a=dbLogs['get'](_0x2ac1a1(0x22c))[_0x2ac1a1(0x1e4)]();_0x6a59a[_0x2ac1a1(0x23f)](_0x3a4890=>{const _0x54a92c=_0x2ac1a1;_0x47d863['push']({'time':_0x3a4890[_0x54a92c(0x32d)],'type':_0x3a4890[_0x54a92c(0x2da)],'event':_0x3a4890[_0x54a92c(0x32c)]});}),dbLogs[_0x2ac1a1(0x257)](_0x2ac1a1(0x22c))[_0x2ac1a1(0x2db)](_0x47d863)[_0x2ac1a1(0x33c)]();}let _0x162335=dbConfig[_0x2ac1a1(0x257)](_0x2ac1a1(0x350))['value']();if(isOlderVersion(_0x162335,_0x2ac1a1(0x294))){let _0x4c387f=dbConfig[_0x2ac1a1(0x257)](_0x2ac1a1(0x243))[_0x2ac1a1(0x364)]({'botID':botID})[_0x2ac1a1(0x1e4)]();if(_0x4c387f){let _0x3abdb3=[];_0x4c387f[_0x2ac1a1(0x24b)][_0x2ac1a1(0x23f)](_0x5da3bd=>{const _0x46e770=_0x2ac1a1;_0x3abdb3[_0x46e770(0x2c5)]({'coin':_0x5da3bd['coin'],'number':_0x5da3bd[_0x46e770(0x33d)],'price':_0x5da3bd[_0x46e770(0x342)]}),delete _0x5da3bd[_0x46e770(0x33d)],delete _0x5da3bd[_0x46e770(0x342)];});if(_0x3abdb3[_0x2ac1a1(0x33b)]!==0x0)fs[_0x2ac1a1(0x2ff)](configbackuppath+('starting-balance-'+botID+'.json'),JSON[_0x2ac1a1(0x383)](_0x3abdb3,null,0x4),function(_0x3f8660){if(_0x3f8660){}});const _0x4054cd=(_0x6ba520,_0x2fa55d)=>{const _0x2dbe3c=_0x2ac1a1;let _0x542bec=[];_0x2fa55d['forEach'](_0xe3fe1d=>{const _0x40641e=_0x5a14,_0x4379cd=_0x6ba520[_0x40641e(0x364)](_0x2f0cbc=>_0x2f0cbc[_0x40641e(0x1cd)]==_0xe3fe1d[_0x40641e(0x1cd)]);if(!_0x4379cd)_0x542bec['push'](_0xe3fe1d);});let _0xf251d9=[];return _0x6ba520[_0x2dbe3c(0x23f)](_0x28e49f=>{const _0x410e22=_0x2dbe3c,_0x2c45e4=_0x2fa55d['find'](_0x200cf4=>_0x200cf4[_0x410e22(0x1cd)]==_0x28e49f[_0x410e22(0x1cd)]);if(!_0x2c45e4||_0x2c45e4[_0x410e22(0x2e5)]==0x0&&_0x28e49f['number']!=0x0)_0xf251d9[_0x410e22(0x2c5)](_0x28e49f);}),{'missingDay1':_0x542bec,'notInDay2':_0xf251d9};},_0x1f0002=dbPerformance[_0x2ac1a1(0x257)]('data')[_0x2ac1a1(0x377)]()['value']();if(_0x1f0002[_0x2ac1a1(0x33b)]>0x1){const {missingDay1:_0x92ccc6,notInDay2:_0x495fc8}=_0x4054cd(_0x3abdb3,_0x1f0002[0x1][_0x2ac1a1(0x392)]);_0x3abdb3=[..._0x3abdb3,..._0x92ccc6],_0x495fc8[_0x2ac1a1(0x23f)](_0x534976=>{const _0x2bd8ac=_0x2ac1a1;let _0x2e1fdf=_0x3abdb3[_0x2bd8ac(0x2f9)](_0x85978f=>_0x85978f[_0x2bd8ac(0x1cd)]==_0x534976['coin']);_0x2e1fdf!=-0x1&&_0x3abdb3[_0x2bd8ac(0x1c2)](_0x2e1fdf,0x1);});}_0x3abdb3['sort']((_0x230673,_0x3a393a)=>_0x230673['coin']>_0x3a393a[_0x2ac1a1(0x1cd)]?0x1:_0x3a393a[_0x2ac1a1(0x1cd)]>_0x230673[_0x2ac1a1(0x1cd)]?-0x1:0x0);let _0x385406=[{'date':_0x4c387f['startdate'],'changes':_0x3abdb3}];_0x1f0002['length']>0x2&&_0x1f0002[_0x2ac1a1(0x23f)]((_0x10a782,_0x5d51b3)=>{const _0x98ef7b=_0x2ac1a1;if(_0x5d51b3>0x0&&_0x5d51b3<_0x1f0002[_0x98ef7b(0x33b)]-0x1){const {missingDay1:_0x1726b1,notInDay2:_0x1d76fe}=_0x4054cd(_0x1f0002[_0x5d51b3][_0x98ef7b(0x392)],_0x1f0002[_0x5d51b3+0x1][_0x98ef7b(0x392)]);_0x3abdb3=[],(_0x1726b1[_0x98ef7b(0x33b)]!=0x0||_0x1d76fe[_0x98ef7b(0x33b)]!=0x0)&&(_0x1726b1[_0x98ef7b(0x33b)]!=0x0&&_0x3abdb3['push'](..._0x1726b1),_0x1d76fe['length']!=0x0&&(_0x1d76fe[_0x98ef7b(0x23f)](_0x2a6100=>{const _0x198886=_0x98ef7b;_0x2a6100[_0x198886(0x2e5)]=-_0x2a6100[_0x198886(0x2e5)];}),_0x3abdb3[_0x98ef7b(0x2c5)](..._0x1d76fe)),_0x3abdb3[_0x98ef7b(0x215)]((_0x340ed6,_0x142f65)=>_0x340ed6['coin']>_0x142f65['coin']?0x1:_0x142f65[_0x98ef7b(0x1cd)]>_0x340ed6['coin']?-0x1:0x0),_0x385406['push']({'date':_0x1f0002[_0x5d51b3+0x1][_0x98ef7b(0x297)],'changes':_0x3abdb3}));}}),dbConfig[_0x2ac1a1(0x257)](_0x2ac1a1(0x243))[_0x2ac1a1(0x364)]({'botID':botID})[_0x2ac1a1(0x2db)]({..._0x4c387f,'liquidity':_0x385406})[_0x2ac1a1(0x33c)]();}}if(isOlderVersion(_0x162335,_0x2ac1a1(0x258))){let _0x32034a=dbConfig[_0x2ac1a1(0x257)]('bot')[_0x2ac1a1(0x364)]({'botID':botID})['value']();if(_0x32034a){const _0x20076a=_0x32034a[_0x2ac1a1(0x22a)],_0x342f93=_0x20076a?capitalize(_0x20076a):_0x2ac1a1(0x351);dbConfig[_0x2ac1a1(0x257)](_0x2ac1a1(0x243))['find']({'botID':botID})[_0x2ac1a1(0x2db)]({'exchange':_0x342f93})[_0x2ac1a1(0x33c)]();}}if(isOlderVersion(_0x162335,_0x2ac1a1(0x308))){let _0x100da5=dbConfig['get'](_0x2ac1a1(0x243))[_0x2ac1a1(0x364)]({'botID':botID})['value']();if(_0x100da5){const _0x2830b4=_0x100da5[_0x2ac1a1(0x1e3)],_0x12873c=_0x2830b4?_0x2ac1a1(0x2f1):![];dbConfig['get'](_0x2ac1a1(0x243))['find']({'botID':botID})[_0x2ac1a1(0x2db)]({'marketcapEnabled':_0x12873c})[_0x2ac1a1(0x33c)]();}}if(isOlderVersion(_0x162335,_0x2ac1a1(0x2bb))){let _0x30362a=dbConfig[_0x2ac1a1(0x257)](_0x2ac1a1(0x243))['find']({'botID':botID})['value']();if(_0x30362a){const _0xea600=_0x30362a[_0x2ac1a1(0x1f5)],_0x5d6060=_0xea600?_0x2ac1a1(0x255):![];dbConfig[_0x2ac1a1(0x257)](_0x2ac1a1(0x243))[_0x2ac1a1(0x364)]({'botID':botID})['assign']({'autoliquidity':_0x5d6060})[_0x2ac1a1(0x33c)]();}}let _0x135b5a=dbPerformance['get']('version')['value']();isOlderVersion(_0x135b5a,_0x2ac1a1(0x294))&&setStartDatePerformance();let _0x59af6c=dbCoinResults[_0x2ac1a1(0x257)](_0x2ac1a1(0x350))[_0x2ac1a1(0x1e4)]();if(isOlderVersion(_0x59af6c,_0x2ac1a1(0x1f7))){let _0x462fb2=dbCoinResults['get'](_0x2ac1a1(0x392))[_0x2ac1a1(0x1e4)]();if(_0x462fb2[_0x2ac1a1(0x33b)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x31a7df=_0x850d;dbConfig[_0x31a7df(0x1e0)](_0x31a7df(0x350),serverversion)['write'](),dbPerformance[_0x31a7df(0x1e0)](_0x31a7df(0x350),serverversion)[_0x31a7df(0x33c)](),dbLogs[_0x31a7df(0x1e0)](_0x31a7df(0x350),serverversion)[_0x31a7df(0x33c)](),dbCoinResults['set']('version',serverversion)['write']();}function getConfiguration(_0x3aad88){const _0x91e258=_0x850d;let _0x1281d7=dbConfig[_0x91e258(0x257)]('bot')[_0x91e258(0x364)]({'botID':_0x3aad88})['value']();if(_0x1281d7){let _0x1e1697=![];typeof _0x1281d7['threshold']==_0x91e258(0x1d2)&&(_0x1281d7={..._0x1281d7,'threshold':Number(_0x1281d7['threshold'])},_0x1e1697=!![]),_0x1281d7[_0x91e258(0x352)]==undefined&&(_0x1281d7={..._0x1281d7,'change24h':-0x14},_0x1e1697=!![]),_0x1281d7[_0x91e258(0x2d2)]==undefined&&(_0x1281d7={..._0x1281d7,'fiat':_0x91e258(0x20f)},_0x1e1697=!![]),_0x1281d7[_0x91e258(0x31f)]==undefined&&(_0x1281d7={..._0x1281d7,'onepagemode':settings[_0x91e258(0x31f)]},_0x1e1697=!![]),_0x1281d7[_0x91e258(0x261)]==undefined&&(_0x1281d7={..._0x1281d7,'colorscheme':'red_yellow_blue'},_0x1e1697=!![]),_0x1281d7['autoliquidity']==undefined&&(_0x1281d7={..._0x1281d7,'autoliquidity':_0x91e258(0x255)},_0x1e1697=!![]),_0x1281d7[_0x91e258(0x2a0)]==undefined&&(_0x1281d7={..._0x1281d7,'marketcapApi':settings[_0x91e258(0x2a0)]?!![]:![]},_0x1e1697=!![]),_0x1281d7[_0x91e258(0x1e3)]==undefined&&(_0x1281d7={..._0x1281d7,'marketcapEnabled':![]},_0x1e1697=!![]),_0x1e1697&&(_0x1281d7={'botID':_0x1281d7['botID'],'exchange':_0x1281d7['exchange'],'apiKey':_0x1281d7['apiKey'],'apiSecret':_0x1281d7[_0x91e258(0x277)],'apiPassword':_0x1281d7[_0x91e258(0x315)],'basecoin':_0x1281d7[_0x91e258(0x31a)],'botname':_0x1281d7['botname'],'showname':_0x1281d7['showname'],'threshold':_0x1281d7[_0x91e258(0x314)],'ordertype':_0x1281d7['ordertype'],'timeout':_0x1281d7[_0x91e258(0x2d3)],'fiat':_0x1281d7['fiat'],'startdate':_0x1281d7[_0x91e258(0x34f)],'recreate':_0x1281d7['recreate'],'timeshift':_0x1281d7[_0x91e258(0x24c)],'onepagemode':_0x1281d7[_0x91e258(0x31f)],'headless':_0x1281d7['headless'],'cooldown':_0x1281d7[_0x91e258(0x21b)],'change24h':_0x1281d7['change24h'],'emojibuy':_0x1281d7[_0x91e258(0x1be)],'emojisell':_0x1281d7[_0x91e258(0x2d5)],'colorscheme':_0x1281d7[_0x91e258(0x261)],'marketcapApi':_0x1281d7[_0x91e258(0x2a0)],'marketcapEnabled':_0x1281d7['marketcapEnabled'],'portfolio':_0x1281d7[_0x91e258(0x24b)],'autoliquidity':_0x1281d7[_0x91e258(0x1f5)],'liquidity':_0x1281d7[_0x91e258(0x221)],'openOrders':_0x1281d7[_0x91e258(0x2ab)]},dbConfig['get'](_0x91e258(0x243))[_0x91e258(0x2ee)]()['write'](),dbConfig[_0x91e258(0x257)]('bot')[_0x91e258(0x2c5)](_0x1281d7)['write']());}else _0x1281d7={'botID':_0x3aad88,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x91e258(0x1bc)+_0x3aad88,'showname':![],'threshold':0x3,'ordertype':_0x91e258(0x323),'timeout':0x14,'fiat':'USD','startdate':getDate(),'recreate':![],'timeshift':settings['timeshift'],'onepagemode':settings['onepagemode'],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x91e258(0x2f7),'marketcapApi':settings[_0x91e258(0x2a0)]?!![]:![],'marketcapEnabled':![],'portfolio':[],'autoliquidity':_0x91e258(0x255),'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x1281d7;}function emittedConfiguration(){const _0x5595c8=_0x850d;let _0x36f5af;if(config['apiKey']=='')_0x36f5af={...config,'configstate':_0x5595c8(0x2f5)};else config[_0x5595c8(0x1c0)]=='***'?_0x36f5af={...config,'configstate':'recovery'}:(_0x36f5af={...config,'apiKey':_0x5595c8(0x316),'apiSecret':'************'},config[_0x5595c8(0x315)]&&(_0x36f5af[_0x5595c8(0x315)]='************'));return _0x36f5af[_0x5595c8(0x2cc)]=enableFiatToggle,_0x36f5af;}function getSettings(){const _0x14270b=_0x850d;return dbSettings['get']('settings')[_0x14270b(0x1e4)]();}function getSecure(){const _0x2c9541=_0x850d;return dbSecure[_0x2c9541(0x257)]('secure')[_0x2c9541(0x1e4)]()||{};}function updateTimeshift(_0x443613){const _0xc98fdb=_0x850d;let _0x188aa5=dbConfig[_0xc98fdb(0x257)](_0xc98fdb(0x243))['find']({'botID':botID})['value']();_0x188aa5&&dbConfig[_0xc98fdb(0x257)](_0xc98fdb(0x243))[_0xc98fdb(0x364)]({'botID':botID})[_0xc98fdb(0x2db)]({'timeshift':_0x443613})[_0xc98fdb(0x33c)](),config['timeshift']=_0x443613,proxyEmit(_0xc98fdb(0x2af),emittedConfiguration());}function updateOnepagemode(_0x158187){const _0x2e9e0f=_0x850d;let _0x3cda7d=dbConfig[_0x2e9e0f(0x257)]('bot')[_0x2e9e0f(0x364)]({'botID':botID})['value']();_0x3cda7d&&dbConfig[_0x2e9e0f(0x257)](_0x2e9e0f(0x243))['find']({'botID':botID})[_0x2e9e0f(0x2db)]({'onepagemode':_0x158187})[_0x2e9e0f(0x33c)](),config['onepagemode']=_0x158187,proxyEmit(_0x2e9e0f(0x2af),emittedConfiguration());}function updateMarketcapApi(_0x2ada40){const _0x2787fa=_0x850d,_0x567760=_0x2ada40?!![]:![];let _0x19d338=dbConfig[_0x2787fa(0x257)]('bot')[_0x2787fa(0x364)]({'botID':botID})[_0x2787fa(0x1e4)]();_0x19d338&&dbConfig[_0x2787fa(0x257)](_0x2787fa(0x243))['find']({'botID':botID})['assign']({'marketcapApi':_0x567760})[_0x2787fa(0x33c)](),config[_0x2787fa(0x2a0)]=_0x567760,getMarketCap(),proxyEmit('configuration',emittedConfiguration());}async function storeConfiguration(_0x547b93){const _0x4915b5=_0x850d;logger[_0x4915b5(0x2ae)](_0x4915b5(0x2cb));let _0x41cdd7=![];_0x547b93[_0x4915b5(0x236)]&&(_0x547b93['configstate']==_0x4915b5(0x381)&&(_0x41cdd7=!![]),delete _0x547b93[_0x4915b5(0x236)]);if(pidBalances)clearTimeout(pidBalances);setBlockTransactionDetection(!![]);let _0x228ba4=![],_0x586d1e=![],_0x533f72=[];_0x547b93[_0x4915b5(0x24b)][_0x4915b5(0x23f)](_0x2b0ac7=>{const _0x28257d=_0x4915b5;if(!_0x2b0ac7[_0x28257d(0x31b)]&&_0x2b0ac7[_0x28257d(0x1cd)]!=_0x547b93[_0x28257d(0x31a)])_0x533f72[_0x28257d(0x2c5)](_0x2b0ac7[_0x28257d(0x20d)]);}),_0x533f72[_0x4915b5(0x23f)](_0x49fda1=>{const _0x60353d=_0x4915b5,_0x3c3a66=currentCoins[_0x60353d(0x364)](_0xb92a48=>_0xb92a48[_0x60353d(0x20d)]==_0x49fda1);!_0x3c3a66&&(_0x228ba4=!![]);}),currentCoins['forEach'](_0x3bd9de=>{const _0x2fe216=_0x4915b5;if(_0x3bd9de[_0x2fe216(0x1cd)]!=config[_0x2fe216(0x31a)]){const _0x50d05c=_0x533f72['find'](_0x4f343c=>_0x4f343c==_0x3bd9de[_0x2fe216(0x20d)]);!_0x50d05c&&(_0x228ba4=!![]);}}),_0x547b93[_0x4915b5(0x24b)][_0x4915b5(0x23f)](_0x64a61c=>{const _0x17d959=_0x4915b5,_0x21f4c0=config[_0x17d959(0x24b)]['find'](_0x4ef668=>_0x4ef668[_0x17d959(0x1cd)]==_0x64a61c[_0x17d959(0x1cd)]);if(_0x21f4c0&&_0x64a61c[_0x17d959(0x212)]!=_0x21f4c0['offset'])_0x586d1e=!![];});let _0x3e90c8=dbConfig[_0x4915b5(0x257)](_0x4915b5(0x243))[_0x4915b5(0x364)]({'botID':botID})[_0x4915b5(0x1e4)]();_0x547b93={..._0x547b93,'apiKey':decryptRSA(secure['privateKey'],_0x547b93['apiKey']),'apiSecret':decryptRSA(secure[_0x4915b5(0x306)],_0x547b93['apiSecret'])};_0x547b93['apiPassword']&&(_0x547b93[_0x4915b5(0x315)]=decryptRSA(secure[_0x4915b5(0x306)],_0x547b93[_0x4915b5(0x315)]));let _0x35b409=![];if(_0x3e90c8){_0x547b93[_0x4915b5(0x1c0)]=='************'?_0x547b93[_0x4915b5(0x1c0)]=config[_0x4915b5(0x1c0)]:_0x35b409=!![];_0x547b93[_0x4915b5(0x277)]==_0x4915b5(0x316)?_0x547b93[_0x4915b5(0x277)]=config[_0x4915b5(0x277)]:_0x35b409=!![];if(_0x547b93[_0x4915b5(0x315)]==_0x4915b5(0x316))_0x547b93['apiPassword']=config[_0x4915b5(0x315)];else{if(_0x547b93['apiPassword'])_0x35b409=!![];}dbConfig[_0x4915b5(0x257)]('bot')[_0x4915b5(0x364)]({'botID':botID})['assign'](_0x547b93)[_0x4915b5(0x33c)]();}else dbConfig[_0x4915b5(0x257)](_0x4915b5(0x243))['push'](_0x547b93)[_0x4915b5(0x33c)](),_0x35b409=!![],process[_0x4915b5(0x1fa)]({'status':_0x4915b5(0x29b),'live':_0x4915b5(0x2fa)},_0x478d00=>{});process[_0x4915b5(0x1fa)]({'botname':_0x547b93[_0x4915b5(0x207)]},_0x2dfbfd=>{}),config={..._0x547b93},updateBotManager(),proxyEmit(_0x4915b5(0x263)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x35b409)!_0x3e90c8||_0x41cdd7?await reset(!![]):getBalances();else _0x228ba4||_0x586d1e?await reset(![]):getBalances();setBlockTransactionDetection(![]);}async function storeHeadless(_0x408d58){const _0x4560e4=_0x850d,_0x5d6b82={...config,'headless':_0x408d58[_0x4560e4(0x37e)]};let _0x1e982d=dbConfig[_0x4560e4(0x257)](_0x4560e4(0x243))['find']({'botID':botID})[_0x4560e4(0x1e4)]();_0x1e982d&&dbConfig[_0x4560e4(0x257)](_0x4560e4(0x243))[_0x4560e4(0x364)]({'botID':botID})[_0x4560e4(0x2db)](_0x5d6b82)['write'](),config={..._0x5d6b82},updateBotManager(),proxyEmit(_0x4560e4(0x2af),emittedConfiguration());}async function storeFiat(_0x41fb60){const _0x507f92=_0x850d,_0x197740={...config,'fiat':_0x41fb60};let _0x666ff3=dbConfig[_0x507f92(0x257)](_0x507f92(0x243))[_0x507f92(0x364)]({'botID':botID})[_0x507f92(0x1e4)]();_0x666ff3&&dbConfig['get'](_0x507f92(0x243))[_0x507f92(0x364)]({'botID':botID})[_0x507f92(0x2db)](_0x197740)['write'](),config={..._0x197740},proxyEmit(_0x507f92(0x2af),emittedConfiguration());}function resetHistory(){const _0x1b8261=_0x850d;logger[_0x1b8261(0x2aa)]('Resetting\x20bot\x20history');try{if(fs['existsSync'](path[_0x1b8261(0x2a8)](configpath,'bot-'+botID+_0x1b8261(0x270))))fs[_0x1b8261(0x1c4)](path[_0x1b8261(0x2a8)](configpath,_0x1b8261(0x395)+botID+'-events.json'));if(fs[_0x1b8261(0x25c)](path[_0x1b8261(0x2a8)](configpath,'bot-'+botID+'-performance.json')))fs[_0x1b8261(0x1c4)](path[_0x1b8261(0x2a8)](configpath,'bot-'+botID+_0x1b8261(0x2fb)));if(fs[_0x1b8261(0x25c)](path[_0x1b8261(0x2a8)](configpath,_0x1b8261(0x395)+botID+_0x1b8261(0x2e1))))fs['unlinkSync'](path[_0x1b8261(0x2a8)](configpath,'bot-'+botID+_0x1b8261(0x2e1)));}catch(_0x5e7da9){if(_0x5e7da9)logger['full'](_0x1b8261(0x26d),_0x5e7da9);}const _0x273a9b=getDate();let _0x147a59=[];currentCoins[_0x1b8261(0x23f)](_0x284ca8=>{const _0x18f982=_0x1b8261;_0x147a59[_0x18f982(0x2c5)]({'coin':_0x284ca8['coin'],'number':_0x284ca8[_0x18f982(0x2e5)],'price':_0x284ca8[_0x18f982(0x2ba)]});});let _0x44ceef=dbConfig[_0x1b8261(0x257)](_0x1b8261(0x243))[_0x1b8261(0x364)]({'botID':botID})['value']();_0x44ceef&&(dbConfig[_0x1b8261(0x257)]('bot')[_0x1b8261(0x364)]({'botID':botID})[_0x1b8261(0x2db)]({'liquidity':[{'date':_0x273a9b,'changes':_0x147a59}]})[_0x1b8261(0x33c)](),config[_0x1b8261(0x221)]=[]),restartBot(!![]);}function noslash(_0x2d0c70){return _0x2d0c70['replace']('/','');}function updateHighestFee(_0x3df5cf){const _0x3c1a01=_0x850d;if(_0x3df5cf['reverse']){let _0x48f27c={'filled':_0x3df5cf['filled']*_0x3df5cf[_0x3c1a01(0x20c)],'amount':_0x3df5cf['filled']*_0x3df5cf[_0x3c1a01(0x20c)],'side':_0x3df5cf[_0x3c1a01(0x35f)]==_0x3c1a01(0x2ea)?'buy':_0x3c1a01(0x2ea),'price':0x1/_0x3df5cf[_0x3c1a01(0x20c)]};_0x3df5cf={..._0x3df5cf,..._0x48f27c};}const _0xb330d8=defaultFee*_0x3df5cf['filled']*_0x3df5cf['price'];lastFees['recent20']['length']===0x14&&lastFees[_0x3c1a01(0x2e0)]['shift'](),lastFees[_0x3c1a01(0x2e0)][_0x3c1a01(0x2c5)](_0xb330d8),lastFees[_0x3c1a01(0x336)]=Math[_0x3c1a01(0x2a2)](...lastFees[_0x3c1a01(0x2e0)]);}async function updateNumberCoinsCcxt(_0x40fb51){const _0x28f7c0=_0x850d;logger[_0x28f7c0(0x2ae)](_0x28f7c0(0x288)+_0x40fb51[_0x28f7c0(0x20d)]+'\x20|\x20'+_0x40fb51[_0x28f7c0(0x375)]+_0x28f7c0(0x1f0)+_0x40fb51[_0x28f7c0(0x359)]+_0x28f7c0(0x310)+_0x40fb51[_0x28f7c0(0x33e)]+_0x28f7c0(0x1f0)+_0x40fb51['id']);let _0x478f80=_0x40fb51[_0x28f7c0(0x375)],_0x5ec194=![];currentCoins['forEach'](_0x2028e5=>{const _0x383c98=_0x28f7c0;_0x2028e5['symbol']==_0x40fb51[_0x383c98(0x20d)]&&(_0x5ec194=!![]);});if(!_0x5ec194)return;const _0x29efed=currentCoins['find'](_0x31c61d=>_0x31c61d[_0x28f7c0(0x20d)]==_0x40fb51[_0x28f7c0(0x20d)]),_0xdc6b1d=_0x29efed[_0x28f7c0(0x1cd)],_0x2c921e=_0x53d2db=>{const _0x3a0756=_0x28f7c0,_0x2d90c9=currentCoins['find'](_0x24c2f9=>_0x24c2f9['symbol']==_0x40fb51[_0x3a0756(0x20d)]);if(_0x2d90c9)_0x2d90c9[_0x3a0756(0x245)]=_0x53d2db;};let _0x4a5262=![];for(const _0x3be24e of lastOrders){const _0x1cd4fc=0x64,_0x13d69a=0x1388;let _0x559164=0x0;while(!_0x3be24e[_0x28f7c0(0x269)]&&_0x559164*_0x1cd4fc<_0x13d69a){_0x559164++,await sleep(_0x1cd4fc);}if(_0x559164>0x0)logger['debug'](_0x28f7c0(0x26b)+_0x559164*_0x1cd4fc/0x3e8+_0x28f7c0(0x275));_0x3be24e['orderId']==_0x40fb51['id']&&(_0x4a5262=!![]);}if(_0x478f80=='open'){_0x2c921e(_0x28f7c0(0x1d5));if(_0x40fb51[_0x28f7c0(0x359)]>0x0&&_0x40fb51[_0x28f7c0(0x359)]<_0x40fb51[_0x28f7c0(0x33e)]){if(_0x4a5262){setBlockTransactionDetection(!![]),logger[_0x28f7c0(0x2ae)](_0x28f7c0(0x282)+_0x40fb51[_0x28f7c0(0x359)]+_0x28f7c0(0x204)+_0x40fb51['id']);const _0x286ed6=await getCoins(balanceUpdateDelay,undefined,undefined,_0xdc6b1d);[currentCoins,currentCoinsAll]=_0x286ed6,setBlockTransactionDetection(![]);}else logger[_0x28f7c0(0x2ae)](_0x28f7c0(0x282)+_0x40fb51['filled']+_0x28f7c0(0x358)+_0x40fb51['id']),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay);}}else{if(_0x478f80==_0x28f7c0(0x373)){_0x2c921e(_0x28f7c0(0x373)),lastOrders=lastOrders[_0x28f7c0(0x36d)](_0x32deb8=>_0x32deb8['symbol']!=_0x40fb51[_0x28f7c0(0x20d)]);const _0x8b6fed=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x8b6fed,setBlockTransactionDetection(![]),await getOpenOrders(),handleOpenOrders();}else{if(_0x478f80==_0x28f7c0(0x25f)){if(lastOrders)for(const _0x3146b7 of lastOrders){if(_0x3146b7['orderId']==_0x40fb51['id']){logger[_0x28f7c0(0x2ae)](_0x28f7c0(0x311)+_0x40fb51['id']),_0x4a5262=!![];if(_0x3146b7['filled']==0x0){setBlockTransactionDetection(!![]),logger[_0x28f7c0(0x2ae)](_0x28f7c0(0x264)+_0x40fb51['id']);if(_0x40fb51[_0x28f7c0(0x1ec)])_0x3146b7[_0x28f7c0(0x20c)]=_0x40fb51[_0x28f7c0(0x1ec)];else{if(_0x40fb51[_0x28f7c0(0x20c)])_0x3146b7[_0x28f7c0(0x20c)]=_0x40fb51['price'];else{}}_0x3146b7[_0x28f7c0(0x359)]=_0x40fb51[_0x28f7c0(0x359)],updateHighestFee(_0x3146b7);const _0x4ae132=await getCoins(balanceUpdateDelay,undefined,undefined,_0xdc6b1d);[currentCoins,currentCoinsAll]=_0x4ae132,setBlockTransactionDetection(![]),await validateOrders(),_0x2c921e(_0x28f7c0(0x359)),_0x3146b7[_0x28f7c0(0x209)]={'currency':_0x40fb51[_0x28f7c0(0x209)]?_0x40fb51['fee']['currency']:null,'cost':_0x40fb51[_0x28f7c0(0x209)]?_0x40fb51[_0x28f7c0(0x209)][_0x28f7c0(0x387)]:0x0},await updateCoinResults(_0x3146b7);}}}!_0x4a5262&&(logger[_0x28f7c0(0x2ae)](_0x28f7c0(0x304)+_0x40fb51['id']),_0x2c921e(_0x28f7c0(0x359)),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay),await updateOpenOrders(),handleOpenOrders());}}}if(lastBalances){let _0x4f4b74=JSON[_0x28f7c0(0x210)](lastBalances[_0x28f7c0(0x24b)]);const _0x58f5ae=_0x4f4b74[_0x28f7c0(0x364)](_0x504c61=>_0x504c61[_0x28f7c0(0x20d)]==_0x40fb51[_0x28f7c0(0x20d)]);if(_0x58f5ae){if(_0x478f80=='open')_0x58f5ae[_0x28f7c0(0x245)]=_0x58f5ae[_0x28f7c0(0x245)]==_0x28f7c0(0x359)?_0x28f7c0(0x359):'open';else{if(_0x478f80=='canceled')_0x58f5ae[_0x28f7c0(0x245)]=_0x58f5ae[_0x28f7c0(0x245)]==_0x28f7c0(0x359)?_0x28f7c0(0x359):_0x28f7c0(0x373);else _0x478f80==_0x28f7c0(0x25f)&&(_0x58f5ae[_0x28f7c0(0x245)]=_0x28f7c0(0x359));}}lastBalances={...lastBalances,'portfolio':JSON[_0x28f7c0(0x383)](_0x4f4b74)},proxyEmit(_0x28f7c0(0x271),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x251cf6=_0x850d;await getOpenOrders();let _0x5a0569=![];currentCoins[_0x251cf6(0x23f)](_0x590a50=>{const _0x59a3fb=_0x251cf6;_0x5a0569=allOpenOrders[_0x59a3fb(0x364)](_0x53708d=>_0x53708d[_0x59a3fb(0x20d)]==_0x590a50['symbol']),_0x590a50['orderstatus']=_0x5a0569?_0x59a3fb(0x1d5):_0x59a3fb(0x329);});}async function fetchBalance(_0x5adc4b=!![]){const _0x394152=_0x850d;let _0x3ea539,_0x5e6e75;try{return _0x3ea539=await exchange[_0x394152(0x2e4)](),_0x5e6e75=_0x3ea539['total'],_0x5e6e75;}catch(_0x3ebbe4){return!_0x5adc4b?handleErrorNoStop(_0x3ebbe4,_0x394152(0x2c1)):await handleError(_0x3ebbe4,_0x394152(0x2c1)),![];}}async function getCoins(_0x3edd59=0x0,_0x4d826e=!![],_0x35a592=config[_0x850d(0x31a)],_0x30fc63){const _0x5eb532=_0x850d;let _0x5eae33=[],_0x21273e=[],_0x1130fd=[],_0x310137;if(_0x3edd59)await sleep(_0x3edd59);if(botPaused)return[currentCoins,currentCoinsAll];let _0x429365=![],_0x26078a=0x0,_0x6cfe22,_0x548fab;_0x30fc63&&(_0x6cfe22=currentCoins[_0x5eb532(0x364)](_0x500943=>_0x500943['coin']==_0x30fc63),_0x6cfe22&&(_0x548fab=_0x6cfe22['prevnumber'],delete _0x6cfe22[_0x5eb532(0x247)]));while(!_0x429365){_0x310137=await fetchBalance(_0x4d826e);if(_0x310137){if(_0x30fc63){if(_0x310137[_0x30fc63]!=_0x548fab)logger['debug'](_0x5eb532(0x2f3)+_0x30fc63+':\x20'+_0x310137[_0x30fc63]+'\x20('+_0x548fab+')'),_0x429365=!![];else{logger['debug']('Invalid\x20balance\x20for\x20'+_0x30fc63+':\x20'+_0x310137[_0x30fc63]+'\x20('+_0x548fab+')'),_0x26078a++;if(_0x26078a<balanceUpdateRetries)await sleep(balanceUpdateDelay);else{logger['debug'](_0x5eb532(0x1c3)+_0x26078a+_0x5eb532(0x2d7));break;}}}else break;}else return[currentCoins,currentCoinsAll];}for(const [_0x4f6956,_0x1f83e8]of Object[_0x5eb532(0x1dc)](_0x310137)){_0x1130fd[_0x5eb532(0x2c5)](_0x4f6956);}config[_0x5eb532(0x24b)]['forEach'](_0x527bdf=>{const _0x58969f=_0x5eb532;!_0x1130fd[_0x58969f(0x1bf)](_0x527bdf[_0x58969f(0x1cd)])&&(_0x310137[_0x527bdf[_0x58969f(0x1cd)]]=0x0);});if(_0x35a592=='')for(const [_0x4c74dd,_0x4285c2]of Object[_0x5eb532(0x1dc)](_0x310137)){_0x4285c2!=0x0&&_0x5eae33['push']({'coin':_0x4c74dd});}else for(const [_0x42a4f2,_0x2460fc]of Object[_0x5eb532(0x1dc)](_0x310137)){const _0x548384=config['portfolio'][_0x5eb532(0x364)](_0x13632a=>_0x13632a['coin']==_0x42a4f2),_0x1e00c5=_0x42a4f2+'/'+_0x35a592,_0x3388aa=_0x35a592+'/'+_0x42a4f2,_0x3de17c=currentCoins['find'](_0x3166cf=>_0x3166cf[_0x5eb532(0x1cd)]==_0x42a4f2);if((_0x2460fc!=0x0||_0x548384)&&(allSymbols[_0x5eb532(0x1bf)](_0x1e00c5)||_0x42a4f2==_0x35a592))_0x3de17c?_0x5eae33[_0x5eb532(0x2c5)]({..._0x3de17c,'number':Math[_0x5eb532(0x2a2)](_0x2460fc+(_0x548384&&_0x548384[_0x5eb532(0x212)]||0x0),0x0)}):_0x5eae33[_0x5eb532(0x2c5)]({'coin':_0x42a4f2,'symbol':_0x1e00c5,'reverse':![],'number':Math['max'](_0x2460fc+(_0x548384&&_0x548384['offset']||0x0),0x0),'orderstatus':_0x5eb532(0x329)});else{if((_0x2460fc!=0x0||_0x548384)&&allSymbols[_0x5eb532(0x1bf)](_0x3388aa))_0x3de17c?_0x5eae33[_0x5eb532(0x2c5)]({..._0x3de17c,'number':Math[_0x5eb532(0x2a2)](_0x2460fc+(_0x548384&&_0x548384[_0x5eb532(0x212)]||0x0),0x0)}):_0x5eae33['push']({'coin':_0x42a4f2,'symbol':_0x3388aa,'reverse':!![],'number':Math[_0x5eb532(0x2a2)](_0x2460fc+(_0x548384&&_0x548384[_0x5eb532(0x212)]||0x0),0x0),'orderstatus':_0x5eb532(0x329)});else _0x548384&&_0x5eae33[_0x5eb532(0x2c5)]({'coin':_0x548384[_0x5eb532(0x1cd)],'symbol':_0x548384[_0x5eb532(0x20d)],'reverse':_0x548384[_0x5eb532(0x23c)],'number':0x0,'orderstatus':_0x5eb532(0x329)});}}return _0x5eae33[_0x5eb532(0x215)]((_0x5d4035,_0x4c5646)=>_0x5d4035[_0x5eb532(0x1df)]<_0x4c5646[_0x5eb532(0x1df)]?0x1:_0x4c5646[_0x5eb532(0x1df)]<_0x5d4035[_0x5eb532(0x1df)]?-0x1:0x0),_0x21273e=cloneDeep(_0x5eae33),_0x5eae33=_0x5eae33['filter'](_0x37a6ca=>{const _0x1b0dc4=_0x5eb532,_0x323cdb=config[_0x1b0dc4(0x24b)][_0x1b0dc4(0x364)](_0x212571=>_0x212571[_0x1b0dc4(0x1cd)]==_0x37a6ca[_0x1b0dc4(0x1cd)]);return _0x323cdb&&!_0x323cdb[_0x1b0dc4(0x31b)];}),[_0x5eae33,_0x21273e];}async function getCoinNumber(_0x90fdfe){const _0x165fab=_0x850d;let _0x2d96d1;try{const _0x5992b0=await exchange['fetchBalance']();_0x2d96d1=_0x5992b0[_0x165fab(0x246)][_0x90fdfe];}catch(_0x172cdc){await handleError(_0x172cdc,'getCoinNumber()');}return _0x2d96d1;}async function getOpenOrders(){const _0x1d100c=_0x850d;let _0x237247;allOpenOrders=[];try{for(const _0x5e10c1 of config[_0x1d100c(0x24b)]){!_0x5e10c1['excluded']&&_0x5e10c1[_0x1d100c(0x1cd)]!=config[_0x1d100c(0x31a)]&&(_0x237247=await exchange[_0x1d100c(0x267)](_0x5e10c1['symbol']),_0x237247['length']>0x0&&allOpenOrders['push'](_0x237247[0x0]));}}catch(_0x43f400){await handleError(_0x43f400,'getOpenOrders()');}}async function handleOpenOrders(_0x454de5=0x0){const _0x1bda89=_0x850d;allOpenOrders[_0x1bda89(0x33b)]==0x0&&lockOrders==ORDERS[_0x1bda89(0x292)]&&allOrdersPlaced&&(_0x454de5==0x0?(logger[_0x1bda89(0x2ae)](_0x1bda89(0x1e7)),_0x454de5++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x1bda89(0x2ae)](_0x1bda89(0x278)),validateOrders('no\x20open\x20orders')));}async function testAPI(_0x40f93b){const _0xecf19d=_0x850d;logger[_0xecf19d(0x2ae)](_0xecf19d(0x206));const _0x3689de=ccxt[_0xecf19d(0x331)][_0x40f93b[_0xecf19d(0x22a)]['toLowerCase']()],_0x3b4cfe=new _0x3689de({'apiKey':_0x40f93b[_0xecf19d(0x1c0)],'secret':_0x40f93b[_0xecf19d(0x277)],'options':{'defaultType':_0xecf19d(0x1fc)}});if(_0x40f93b[_0xecf19d(0x315)])_0x3b4cfe[_0xecf19d(0x1eb)]=_0x40f93b['apiPassword'];try{await _0x3b4cfe[_0xecf19d(0x2e4)]();}catch(_0x3220d2){logger['debug'](_0xecf19d(0x379)+_0x3220d2[_0xecf19d(0x38e)]());throw _0x3220d2;}}function cloneDeep(_0x5e2acf){const _0x43d351=_0x850d;return JSON[_0x43d351(0x210)](JSON['stringify'](_0x5e2acf));}async function getPortfolio(_0x53ddcc){const _0x4aef04=_0x850d;let _0x1f4ce2=[],_0x104d42=[],_0x2bfe73=[],_0x343494;_0x53ddcc['apiKey']=decryptRSA(secure[_0x4aef04(0x306)],_0x53ddcc[_0x4aef04(0x1c0)]),_0x53ddcc[_0x4aef04(0x277)]=decryptRSA(secure[_0x4aef04(0x306)],_0x53ddcc[_0x4aef04(0x277)]);if(_0x53ddcc[_0x4aef04(0x315)])_0x53ddcc['apiPassword']=decryptRSA(secure[_0x4aef04(0x306)],_0x53ddcc[_0x4aef04(0x315)]);if(_0x53ddcc[_0x4aef04(0x1c0)]!==_0x4aef04(0x316)||_0x53ddcc[_0x4aef04(0x277)]!==_0x4aef04(0x316)||_0x53ddcc[_0x4aef04(0x315)]&&_0x53ddcc[_0x4aef04(0x315)]!==_0x4aef04(0x316)){if(config[_0x4aef04(0x22a)]){if(_0x53ddcc[_0x4aef04(0x1c0)]==_0x4aef04(0x316))_0x53ddcc[_0x4aef04(0x1c0)]=config[_0x4aef04(0x1c0)];if(_0x53ddcc[_0x4aef04(0x277)]==_0x4aef04(0x316))_0x53ddcc[_0x4aef04(0x277)]=config[_0x4aef04(0x277)];if(_0x53ddcc[_0x4aef04(0x315)]==_0x4aef04(0x316))_0x53ddcc[_0x4aef04(0x315)]=config[_0x4aef04(0x315)];}try{if(_0x53ddcc['testApi'])await testAPI(_0x53ddcc);}catch(_0xf3c08d){if(_0xf3c08d[_0x4aef04(0x38e)]()['includes'](_0x4aef04(0x332))){logHistory(_0x4aef04(0x36f),_0x4aef04(0x2ac)),logHistory('error',_0x4aef04(0x283)+_0xf3c08d['toString']()),proxyEmit(_0x4aef04(0x2bd),![]);return;}else{if(_0xf3c08d[_0x4aef04(0x38e)]()['includes'](_0x4aef04(0x376))){logHistory(_0x4aef04(0x36f),_0x4aef04(0x251)),logHistory(_0x4aef04(0x36f),_0x4aef04(0x283)+_0xf3c08d[_0x4aef04(0x38e)]()),proxyEmit('portfolio1',![]);return;}else{logHistory(_0x4aef04(0x36f),_0x4aef04(0x1e6)+_0xf3c08d['toString']()),logger[_0x4aef04(0x2ae)]('Error\x20details:',_0xf3c08d),proxyEmit(_0x4aef04(0x2bd),![]);return;}}}exchange?updateExchange(_0x53ddcc[_0x4aef04(0x1c0)],_0x53ddcc[_0x4aef04(0x277)],_0x53ddcc[_0x4aef04(0x315)]):await initExchange(_0x53ddcc[_0x4aef04(0x22a)],_0x53ddcc[_0x4aef04(0x1c0)],_0x53ddcc[_0x4aef04(0x277)],_0x53ddcc[_0x4aef04(0x315)]);await loadSymbols();const _0x5948c3=await getCoins(0x0,![],_0x53ddcc[_0x4aef04(0x31a)]);_0x2bfe73=cloneDeep(_0x5948c3[0x1]);}else{const _0x46359b=await getCoins();_0x2bfe73=cloneDeep(_0x46359b[0x1]);}if(_0x53ddcc[_0x4aef04(0x31a)]=='')proxyEmit('portfolio1',!![]),proxyEmit('portfolio2',_0x2bfe73);else{_0x2bfe73[_0x4aef04(0x23f)](_0x2b07bd=>{const _0x2d79f4=_0x4aef04;if(_0x2b07bd[_0x2d79f4(0x1cd)]!=_0x53ddcc[_0x2d79f4(0x31a)]&&allSymbols[_0x2d79f4(0x1bf)](_0x2b07bd[_0x2d79f4(0x20d)]))_0x1f4ce2[_0x2d79f4(0x2c5)](_0x2b07bd[_0x2d79f4(0x20d)]);});if(_0x1f4ce2[_0x4aef04(0x33b)]==0x0)logHistory('error',_0x4aef04(0x1cb));else{try{_0x104d42=await getTickers(_0x1f4ce2);}catch(_0x3d0066){logHistory(_0x4aef04(0x36f),_0x4aef04(0x340)),logger['debug'](_0x4aef04(0x2d4),_0x3d0066),proxyEmit(_0x4aef04(0x2bd),![]);return;}_0x2bfe73[_0x4aef04(0x23f)](_0x17c0e5=>{const _0x5beedf=_0x4aef04;_0x17c0e5['coin']!=_0x53ddcc['basecoin']?_0x104d42[_0x17c0e5[_0x5beedf(0x20d)]]?_0x343494=_0x17c0e5['reverse']?0x1/_0x104d42[_0x17c0e5['symbol']][_0x5beedf(0x2ba)]:_0x104d42[_0x17c0e5[_0x5beedf(0x20d)]][_0x5beedf(0x2ba)]:_0x343494=0x0:_0x343494=0x1,_0x17c0e5[_0x5beedf(0x20c)]=formatResult(_0x343494,0x8);}),await getMarketCap(_0x2bfe73),proxyEmit('portfolio1',!![]),proxyEmit('portfolio2',_0x2bfe73);}}}function truncateTradeAmount(_0x23e5ce,_0x2c0f08){const _0x59cb3f=_0x850d;let _0x177720=0x0;try{_0x177720=exchange[_0x59cb3f(0x202)](_0x23e5ce,_0x2c0f08);}catch(_0x4301d9){}return _0x177720;}function checkMinimums(_0x498a29){const _0x4cc524=_0x850d;let _0x522a0c=!![];const _0x10bb41=!_0x498a29[_0x4cc524(0x23c)]?markets[_0x498a29[_0x4cc524(0x20d)]][_0x4cc524(0x317)]['amount'][_0x4cc524(0x369)]:markets[_0x498a29['symbol']][_0x4cc524(0x317)]['cost'][_0x4cc524(0x369)],_0x78813d=!_0x498a29['reverse']?markets[_0x498a29['symbol']]['limits'][_0x4cc524(0x387)][_0x4cc524(0x369)]:markets[_0x498a29[_0x4cc524(0x20d)]][_0x4cc524(0x317)][_0x4cc524(0x33e)]['min'],_0x3fd496=truncateTradeAmount(_0x498a29[_0x4cc524(0x20d)],_0x498a29['trade']);_0x498a29[_0x4cc524(0x1bd)]=_0x3fd496;if(Math[_0x4cc524(0x2a9)](_0x3fd496)<_0x10bb41)_0x522a0c=![];if(Math[_0x4cc524(0x2a9)](_0x3fd496)*_0x498a29['last']<_0x78813d)_0x522a0c=![];if(_0x498a29[_0x4cc524(0x35f)]=='sell'){let _0x542270=config['portfolio'][_0x4cc524(0x364)](_0x2325a1=>_0x2325a1['coin']==_0x498a29[_0x4cc524(0x1cd)]);if(_0x542270[_0x4cc524(0x212)]>0x0){if(Math[_0x4cc524(0x2a9)](_0x3fd496)>_0x498a29[_0x4cc524(0x2e5)]-_0x542270[_0x4cc524(0x212)])_0x522a0c=![];}else{if(Math[_0x4cc524(0x2a9)](_0x3fd496)>_0x498a29[_0x4cc524(0x2e5)])_0x522a0c=![];}}if(_0x498a29[_0x4cc524(0x35f)]==_0x4cc524(0x371)){let _0x1c3f88=config['portfolio'][_0x4cc524(0x364)](_0x455460=>_0x455460['coin']==config[_0x4cc524(0x31a)]),_0x34d877=currentCoins['find'](_0x31ce84=>_0x31ce84['coin']==config[_0x4cc524(0x31a)]);if(_0x1c3f88[_0x4cc524(0x212)]>0x0){if(Math[_0x4cc524(0x2a9)](_0x3fd496)*_0x498a29['last']>_0x34d877[_0x4cc524(0x2e5)]-_0x1c3f88[_0x4cc524(0x212)])_0x522a0c=![];}else{if(Math[_0x4cc524(0x2a9)](_0x3fd496)*_0x498a29[_0x4cc524(0x2ba)]>_0x34d877[_0x4cc524(0x2e5)])_0x522a0c=![];}}return _0x522a0c;}async function getBalances(_0x11feb4=!![]){const _0x450065=_0x850d;if(botPaused)return;let _0x20f390=0x0,_0xf7cbe9;const _0x24042e=config[_0x450065(0x314)];if(config[_0x450065(0x37e)]&&config['change24h']<0x0)await validate24hChanges();currentCoins[_0x450065(0x23f)](_0xb1392b=>{const _0x2ae2f4=_0x450065;if(_0xb1392b[_0x2ae2f4(0x1cd)]!=config[_0x2ae2f4(0x31a)]){let _0x4e2c57=gTicker[noslash(_0xb1392b['symbol'])];_0xf7cbe9=_0xb1392b['reverse']?0x1/_0x4e2c57:_0x4e2c57;}else _0xf7cbe9=0x1;let _0x3bab0c=_0xb1392b[_0x2ae2f4(0x2e5)]*_0xf7cbe9;_0x20f390+=_0x3bab0c,_0xb1392b[_0x2ae2f4(0x2ba)]=formatResult(Number(_0xf7cbe9),0x8),_0xb1392b[_0x2ae2f4(0x1e4)]=_0x3bab0c;}),currentCoins[_0x450065(0x23f)](_0x5d1df8=>{const _0x455a66=_0x450065;let _0x246beb=config[_0x455a66(0x24b)][_0x455a66(0x364)](_0x106022=>_0x106022[_0x455a66(0x1cd)]==_0x5d1df8[_0x455a66(0x1cd)]),_0xdd2e7d=Number(_0x246beb[_0x455a66(0x34b)]),_0x3ac497=_0x5d1df8['value']/_0x20f390*0x64,_0x24bec3=_0xdd2e7d*_0x20f390/0x64/_0x5d1df8['last']-_0x5d1df8[_0x455a66(0x2e5)];_0x5d1df8[_0x455a66(0x34b)]=formatResult(_0x3ac497,0x3),_0x5d1df8[_0x455a66(0x394)]=formatResult(_0xdd2e7d,0x3),_0x5d1df8['trade']=formatResult(_0x24bec3,0x8),_0x5d1df8['side']='',_0x5d1df8[_0x455a66(0x355)]=![];if(_0x5d1df8[_0x455a66(0x1cd)]!=config['basecoin']){if(_0x5d1df8[_0x455a66(0x34b)]>_0xdd2e7d)_0x5d1df8[_0x455a66(0x35f)]=_0x455a66(0x2ea),_0x5d1df8['valid']=checkMinimums(_0x5d1df8);else _0x5d1df8[_0x455a66(0x34b)]<_0xdd2e7d&&(_0x5d1df8[_0x455a66(0x35f)]=_0x455a66(0x371),_0x5d1df8['valid']=checkMinimums(_0x5d1df8));}_0x5d1df8['delta']=_0x5d1df8['distribution']/_0x5d1df8[_0x455a66(0x394)]-0x1;if(_0x5d1df8[_0x455a66(0x245)]==_0x455a66(0x359)||_0x5d1df8[_0x455a66(0x245)]==_0x455a66(0x373))_0x5d1df8[_0x455a66(0x245)]='none';}),currentCoins['sort']((_0x4e25e5,_0x43915f)=>_0x4e25e5[_0x450065(0x1df)]<_0x43915f['delta']?0x1:_0x43915f[_0x450065(0x1df)]<_0x4e25e5[_0x450065(0x1df)]?-0x1:0x0);const _0x532ead=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x532ead[_0x450065(0x389)],'usd':_0x532ead[_0x450065(0x32e)],'portfolio':JSON['stringify'](currentCoins),'threshold':_0x24042e},proxyEmit(_0x450065(0x271),{'serverversion':serverversion,'balances':lastBalances});if(_0x11feb4){if(config['headless'])headlessMode({'portfolio':currentCoins,'threshold':_0x24042e});else lockOrders==ORDERS[_0x450065(0x349)]&&!coolingDown&&notifyBalance({'portfolio':currentCoins,'threshold':_0x24042e});}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x1ead02=getNormalizedPerformance();getStartingBalances(_0x1ead02),emitPerformance(_0x1ead02);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x8eeaca=_0x850d;if(!lastBalances)return;let _0x55c62d=[],_0x2d77d4,_0x3443a2=JSON[_0x8eeaca(0x210)](lastBalances['portfolio']);_0x3443a2['sort']((_0x432f28,_0x4f8d53)=>_0x432f28['coin']>_0x4f8d53[_0x8eeaca(0x1cd)]?0x1:_0x4f8d53[_0x8eeaca(0x1cd)]>_0x432f28[_0x8eeaca(0x1cd)]?-0x1:0x0),_0x3443a2[_0x8eeaca(0x23f)](_0x5f57c6=>{const _0x5c988c=_0x8eeaca;let _0x2e7782={'coin':_0x5f57c6[_0x5c988c(0x1cd)],'number':_0x5f57c6[_0x5c988c(0x2e5)],'price':_0x5f57c6['last']};_0x55c62d['push'](_0x2e7782);});const _0x3c11e5=await getFiat();_0x2d77d4={'date':lastBalances[_0x8eeaca(0x32d)]['split']('\x20')[0x0],'eur':_0x3c11e5[_0x8eeaca(0x389)],'usd':_0x3c11e5[_0x8eeaca(0x32e)],'coins':_0x55c62d};let _0x1447c1=dbPerformance['get'](_0x8eeaca(0x238))['find']({'date':_0x2d77d4[_0x8eeaca(0x297)]})['value']();_0x1447c1?_0x2d77d4[_0x8eeaca(0x297)]!=config['startdate']&&dbPerformance[_0x8eeaca(0x257)](_0x8eeaca(0x238))[_0x8eeaca(0x364)]({'date':_0x2d77d4[_0x8eeaca(0x297)]})['assign'](_0x2d77d4)[_0x8eeaca(0x33c)]():dbPerformance[_0x8eeaca(0x257)](_0x8eeaca(0x238))['push'](_0x2d77d4)['write'](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x2c5c86=_0x850d;let _0x58a9f2=[];if(dbPerformance[_0x2c5c86(0x1ff)](_0x2c5c86(0x238))[_0x2c5c86(0x1e4)]()){let _0x1bdf0b=dbPerformance[_0x2c5c86(0x257)](_0x2c5c86(0x238))['cloneDeep']()[_0x2c5c86(0x36d)](_0x2a7824=>{const _0xa8f20a=_0x2c5c86;if(_0x2a7824['coins'][_0xa8f20a(0x33b)]==0x0)return![];else return!![];})['sortBy']('date')['value'](),_0x588634=[...config[_0x2c5c86(0x221)]];_0x588634[_0x2c5c86(0x215)]((_0x57ed4e,_0x398666)=>_0x57ed4e[_0x2c5c86(0x297)]>_0x398666[_0x2c5c86(0x297)]?-0x1:_0x398666['date']>_0x57ed4e['date']?0x1:0x0);let _0x515609=0x1,_0x541353=[],_0xe0cd4b=0x0;_0x1bdf0b[_0x2c5c86(0x1db)]()[_0x2c5c86(0x23c)]()['forEach']((_0x3cc2f,_0x1b1c33)=>{const _0x2b1c4a=_0x2c5c86;if(_0x588634[_0xe0cd4b]){if(_0x1bdf0b[_0x1bdf0b['length']-_0x1b1c33]&&_0x588634[_0xe0cd4b]['date']==_0x1bdf0b[_0x1bdf0b['length']-_0x1b1c33][_0x2b1c4a(0x297)]){if(_0x1b1c33<_0x1bdf0b[_0x2b1c4a(0x33b)]){let _0x36c211=0x0,_0x30bace=0x0;_0x1bdf0b[_0x1bdf0b[_0x2b1c4a(0x33b)]-_0x1b1c33][_0x2b1c4a(0x392)][_0x2b1c4a(0x23f)](_0x2729ce=>{const _0x1f92f7=_0x2b1c4a;_0x30bace+=_0x2729ce[_0x1f92f7(0x2e5)]*_0x2729ce['price'];}),_0x588634[_0xe0cd4b][_0x2b1c4a(0x365)][_0x2b1c4a(0x23f)](_0x7a030c=>{const _0x550720=_0x2b1c4a;_0x36c211+=_0x7a030c[_0x550720(0x2e5)]*_0x7a030c[_0x550720(0x20c)];}),_0x515609*=_0x36c211/(_0x30bace-_0x36c211)+0x1;}_0xe0cd4b++;}}let _0x164d4e=0x0;_0x3cc2f[_0x2b1c4a(0x392)][_0x2b1c4a(0x23f)](_0x4238a9=>{const _0x26cd61=_0x2b1c4a;_0x164d4e+=_0x4238a9[_0x26cd61(0x2e5)]*_0x4238a9['price'];}),_0x541353[_0x1bdf0b[_0x2b1c4a(0x33b)]-_0x1b1c33-0x1]=_0x164d4e*(_0x515609-0x1);});let _0x59be01=[];_0x588634=[...config[_0x2c5c86(0x221)]]||[];let _0x5a66bd=0x0;_0xe0cd4b=0x0,_0x1bdf0b['forEach']((_0x3db570,_0x373abb)=>{const _0x2e2e1d=_0x2c5c86;if(_0x588634[_0xe0cd4b]){const _0x3b2dd1=fns[_0x2e2e1d(0x210)](_0x588634[_0xe0cd4b][_0x2e2e1d(0x297)],_0x2e2e1d(0x36c),new Date()),_0x28edb7=fns['parse'](_0x3db570['date'],_0x2e2e1d(0x36c),new Date());if(fns[_0x2e2e1d(0x21d)](_0x3b2dd1,_0x28edb7)){let _0x2e28d6=0x0;_0x588634[_0xe0cd4b][_0x2e2e1d(0x365)][_0x2e2e1d(0x23f)](_0x2361d7=>{const _0x14f8c0=_0x2e2e1d;!_0x59be01[_0x2361d7[_0x14f8c0(0x1cd)]]?_0x59be01[_0x2361d7['coin']]=_0x2361d7[_0x14f8c0(0x2e5)]:(_0x2e28d6=_0x59be01[_0x2361d7[_0x14f8c0(0x1cd)]],_0x59be01[_0x2361d7[_0x14f8c0(0x1cd)]]+=_0x2361d7['number']);const _0x2f8a15=_0x3db570[_0x14f8c0(0x392)][_0x14f8c0(0x364)](_0xbb109a=>_0xbb109a[_0x14f8c0(0x1cd)]==_0x2361d7[_0x14f8c0(0x1cd)]);(!_0x2f8a15||_0x2f8a15[_0x14f8c0(0x2e5)]==0x0)&&(_0x5a66bd+=(-_0x2361d7[_0x14f8c0(0x2e5)]-_0x2e28d6)*_0x2361d7[_0x14f8c0(0x20c)]);}),_0xe0cd4b++;}}_0x3db570['coins'][_0x2e2e1d(0x23f)]((_0x2fec68,_0x11763a)=>{const _0x21b21c=_0x2e2e1d;_0x59be01[_0x2fec68['coin']]&&(_0x2fec68[_0x21b21c(0x2f5)]=_0x59be01[_0x2fec68[_0x21b21c(0x1cd)]]);}),_0x58a9f2[_0x2e2e1d(0x2c5)]({'date':_0x3db570[_0x2e2e1d(0x297)],'eur':_0x3db570[_0x2e2e1d(0x389)],'usd':_0x3db570[_0x2e2e1d(0x32e)],'offset':_0x541353[_0x373abb],'netoffset':_0x5a66bd,'coins':_0x3db570['coins']});});}return _0x58a9f2;}function emitPerformance(_0x43c8e8){const _0x5e2330=_0x850d;_0x43c8e8[_0x5e2330(0x33b)]!==0x0?(proxyEmit(_0x5e2330(0x35d),_0x43c8e8),lastPerformanceEmitted=getDate()):proxyEmit('performance',[]);}function getPerf(_0x245462,_0x38019d){const _0xa9f6e6=_0x850d;let _0xb0a5fd=0x0,_0x35ef18=0x0,_0x39ee0b=0x0;_0x245462[_0xa9f6e6(0x392)][_0xa9f6e6(0x23f)](_0x24d9f9=>{const _0x15e48e=_0xa9f6e6;_0xb0a5fd+=_0x24d9f9[_0x15e48e(0x2e5)]*_0x24d9f9[_0x15e48e(0x20c)];});_0x38019d&&(_0xb0a5fd+=_0x245462[_0xa9f6e6(0x212)]);if(config[_0xa9f6e6(0x31a)]==='BTC'||config[_0xa9f6e6(0x31a)]===_0xa9f6e6(0x31c)||config['basecoin']===_0xa9f6e6(0x298))_0x35ef18=_0xb0a5fd*_0x245462['eur'],_0x39ee0b=_0xb0a5fd*_0x245462[_0xa9f6e6(0x32e)];else{if(usdBasecoins['includes'](config[_0xa9f6e6(0x31a)]))_0x35ef18=_0xb0a5fd*_0x245462['eur']/_0x245462[_0xa9f6e6(0x32e)],_0x39ee0b=_0xb0a5fd;else config['basecoin']===_0xa9f6e6(0x296)&&(_0x35ef18=_0xb0a5fd,_0x39ee0b=_0xb0a5fd*_0x245462[_0xa9f6e6(0x32e)]/_0x245462[_0xa9f6e6(0x389)]);}return[_0xb0a5fd,_0x35ef18,_0x39ee0b];}function getKPIs(_0x4a5367,_0x17e88a='EUR'){const _0x5c7a89=_0x850d,_0x1380ed=config[_0x5c7a89(0x31a)],_0x586b9a=lastBalances,_0x319d16=currentCoins,_0x4dc062=getNormalizedPerformance(),_0x112b5f=_0x4a5367===_0x5c7a89(0x31a)?_0x1380ed:_0x4a5367===_0x5c7a89(0x2d2)||_0x4a5367===_0x5c7a89(0x38d)?_0x17e88a:_0x5c7a89(0x21c)+_0x1380ed,_0x55632b=_0x4a5367===_0x5c7a89(0x227)?'Net\x20effect':_0x4a5367===_0x5c7a89(0x38d)?_0x5c7a89(0x2dc):_0x112b5f+_0x5c7a89(0x242),_0x171cbe=_0x4a5367===_0x5c7a89(0x227)||_0x4a5367===_0x5c7a89(0x38d)?_0x5c7a89(0x2dc):_0x112b5f+_0x5c7a89(0x2de);let _0x5404a5=0x0;_0x319d16['forEach'](_0x3fb081=>{const _0x47cc8a=_0x5c7a89;_0x5404a5+=_0x3fb081['number']*_0x3fb081[_0x47cc8a(0x2ba)];});if(_0x4a5367===_0x5c7a89(0x2d2)||_0x4a5367===_0x5c7a89(0x38d)){if(_0x1380ed===_0x5c7a89(0x2b8)||_0x1380ed===_0x5c7a89(0x31c)||_0x1380ed===_0x5c7a89(0x298))_0x5404a5=_0x5404a5*(_0x17e88a===_0x5c7a89(0x296)?_0x586b9a[_0x5c7a89(0x389)]:_0x586b9a[_0x5c7a89(0x32e)]);else{if(usdBasecoins['includes'](_0x1380ed))_0x5404a5=_0x5404a5*(_0x17e88a===_0x5c7a89(0x296)?_0x586b9a['eur']/_0x586b9a['usd']:0x1);else _0x1380ed===_0x5c7a89(0x296)&&(_0x5404a5=_0x5404a5*(_0x17e88a===_0x5c7a89(0x296)?0x1:_0x586b9a[_0x5c7a89(0x32e)]/_0x586b9a[_0x5c7a89(0x389)]));}}let _0x36cb31;if(_0x5404a5!==0x0){if(_0x4a5367==='basecoin')_0x36cb31=(_0x5404a5/startingBalances[_0x5c7a89(0x31a)]-0x1)*0x64;else{if(_0x17e88a===_0x5c7a89(0x296))_0x36cb31=(_0x5404a5/startingBalances[_0x5c7a89(0x389)]-0x1)*0x64;else _0x36cb31=(_0x5404a5/startingBalances['usd']-0x1)*0x64;}let _0x111be4=0x0;if(startingBalances[_0x5c7a89(0x392)])_0x319d16[_0x5c7a89(0x23f)](_0x661ef7=>{const _0x5c826c=_0x5c7a89;let _0x79df10=startingBalances['coins']['find'](_0x150595=>_0x150595[_0x5c826c(0x1cd)]===_0x661ef7[_0x5c826c(0x1cd)]);if(_0x79df10&&_0x79df10['coin']&&_0x661ef7[_0x5c826c(0x2e5)]!==0x0)_0x111be4+=_0x79df10[_0x5c826c(0x2e5)]*_0x661ef7[_0x5c826c(0x2ba)];});let _0x23b0e1=0x0;if(_0x4dc062[_0x5c7a89(0x33b)]!==0x0){let _0x359883=_0x4dc062[_0x4dc062[_0x5c7a89(0x33b)]-0x1];_0x23b0e1=_0x359883[_0x5c7a89(0x34d)];}_0x111be4-=_0x23b0e1;_0x4a5367===_0x5c7a89(0x227)&&(_0x36cb31=(_0x5404a5-_0x111be4)/startingBalances[_0x5c7a89(0x31a)]*0x64,_0x5404a5=_0x5404a5-_0x111be4);if(_0x4a5367===_0x5c7a89(0x38d)){let _0x47562e=_0x17e88a===_0x5c7a89(0x296)?startingBalances[_0x5c7a89(0x389)]:startingBalances['usd'];if(_0x1380ed===_0x5c7a89(0x2b8)||_0x1380ed==='ETH'||_0x1380ed===_0x5c7a89(0x298))_0x111be4=_0x17e88a===_0x5c7a89(0x296)?_0x111be4*_0x586b9a['eur']:_0x111be4*_0x586b9a[_0x5c7a89(0x32e)];else{if(usdBasecoins[_0x5c7a89(0x1bf)](_0x1380ed))_0x111be4=_0x17e88a==='EUR'?_0x111be4*_0x586b9a[_0x5c7a89(0x389)]/_0x586b9a[_0x5c7a89(0x32e)]:_0x111be4;else _0x1380ed===_0x5c7a89(0x296)&&(_0x111be4=_0x17e88a===_0x5c7a89(0x296)?_0x111be4:_0x111be4*_0x586b9a['usd']/_0x586b9a[_0x5c7a89(0x389)]);}_0x36cb31=(_0x5404a5-_0x111be4)/_0x47562e*0x64,_0x5404a5=_0x5404a5-_0x111be4;}if(_0x36cb31){if(_0x36cb31<0x64)_0x36cb31=_0x36cb31['toFixed'](0x2);else{if(_0x36cb31<0x3e8)_0x36cb31=_0x36cb31[_0x5c7a89(0x382)](0x1);else _0x36cb31=_0x36cb31[_0x5c7a89(0x382)](0x0);}}else _0x36cb31=Number('0')[_0x5c7a89(0x382)](0x2);if(_0x5404a5){if(Math[_0x5c7a89(0x2a9)](_0x5404a5)<0.000001)_0x5404a5=_0x5404a5[_0x5c7a89(0x382)](0x2);else{if(Math['abs'](_0x5404a5)<0.1)_0x5404a5=_0x5404a5[_0x5c7a89(0x382)](0x6);else{if(Math[_0x5c7a89(0x2a9)](_0x5404a5)<0x1)_0x5404a5=_0x5404a5['toFixed'](0x5);else{if(Math[_0x5c7a89(0x2a9)](_0x5404a5)<0xa)_0x5404a5=_0x5404a5[_0x5c7a89(0x382)](0x4);else{if(Math[_0x5c7a89(0x2a9)](_0x5404a5)<0x64)_0x5404a5=_0x5404a5['toFixed'](0x3);else{if(Math[_0x5c7a89(0x2a9)](_0x5404a5)<0x3e8)_0x5404a5=_0x5404a5[_0x5c7a89(0x382)](0x2);else _0x5404a5=_0x5404a5[_0x5c7a89(0x382)](0x2);}}}}}}else _0x5404a5=Number('0')[_0x5c7a89(0x382)](0x2);}else _0x36cb31=Number('0')[_0x5c7a89(0x382)](0x2);return{'value':_0x5404a5,'change':_0x36cb31,'leftTxt':_0x55632b,'rightTxt':_0x171cbe};}async function getStartingBalances(_0x2fcdc1,_0x4718e4=!![]){const _0x5e84b8=_0x850d;if(_0x2fcdc1[_0x5e84b8(0x33b)]!==0x0){const [_0x15fd29,_0x5248f7,_0x380d6f]=getPerf(_0x2fcdc1[0x0],!![]);let _0x1f4bc1=[];config[_0x5e84b8(0x24b)]['forEach'](_0x8838c9=>{const _0x46ce16=_0x5e84b8;let _0x406dcc=0x0,_0x50810d;config[_0x46ce16(0x221)][_0x46ce16(0x23f)](_0x55e386=>{const _0x3bbb2a=_0x46ce16;let _0x39c8f6=_0x55e386[_0x3bbb2a(0x365)]['find'](_0x249c10=>_0x249c10[_0x3bbb2a(0x1cd)]==_0x8838c9['coin']);if(_0x39c8f6){_0x406dcc+=_0x39c8f6[_0x3bbb2a(0x2e5)];if(!_0x50810d)_0x50810d=_0x39c8f6[_0x3bbb2a(0x20c)];}}),_0x1f4bc1[_0x46ce16(0x2c5)]({'coin':_0x8838c9['coin'],'number':_0x406dcc,'initialprice':_0x50810d});});const _0x1563b6={'basecoin':_0x15fd29,'eur':_0x5248f7,'usd':_0x380d6f,'coins':_0x1f4bc1};if(_0x4718e4)proxyEmit(_0x5e84b8(0x320),_0x1563b6);startingBalances=_0x1563b6;}}function headlessMode(_0x4404b4){const _0x281783=_0x850d;let _0x41c7fe=_0x4404b4['portfolio'],_0x56d1d0=_0x4404b4[_0x281783(0x314)],_0x375ae8=[];for(let _0x76607b of _0x41c7fe){if(_0x76607b['coin']!=config['basecoin']){if(_0x76607b[_0x281783(0x1df)]>=_0x56d1d0/0x64){if(_0x76607b['valid'])_0x375ae8[_0x281783(0x2c5)](_0x76607b);}else{if(_0x76607b[_0x281783(0x1df)]<=-_0x56d1d0/0x64){if(_0x76607b[_0x281783(0x355)])_0x375ae8[_0x281783(0x2c5)](_0x76607b);}}}}_0x375ae8[_0x281783(0x33b)]>0x0&&placeOrder(_0x375ae8);}function notifyBalance(_0x30d7ca){const _0x2d1ddb=_0x850d;let _0x515ffa=_0x30d7ca[_0x2d1ddb(0x24b)],_0x1eac58=_0x30d7ca['threshold'],_0x4391ef=[];for(let _0x2bdd57 of _0x515ffa){if(_0x2bdd57[_0x2d1ddb(0x1cd)]!=config['basecoin']){if(_0x2bdd57['delta']>=_0x1eac58/0x64){if(_0x2bdd57[_0x2d1ddb(0x355)])_0x4391ef[_0x2d1ddb(0x2c5)](_0x2bdd57);}else{if(_0x2bdd57['delta']<=-_0x1eac58/0x64){if(_0x2bdd57['valid'])_0x4391ef[_0x2d1ddb(0x2c5)](_0x2bdd57);}}}}if(_0x4391ef['length']>0x0){let _0x27af1b=_0x4391ef[_0x2d1ddb(0x226)](_0x2b0f8d=>_0x2b0f8d[_0x2d1ddb(0x1cd)]);_0x27af1b[_0x2d1ddb(0x215)]();let _0xad8263=_0x27af1b['join'](',\x20');if(!lastCoinsToBalance)logHistory(_0x2d1ddb(0x24e),'Manual\x20balancing\x20required');lastCoinsToBalance=_0xad8263;}}function symbolToCoin(_0x230590){const _0x231226=_0x850d;let _0x2182f9;if(_0x230590[_0x231226(0x1bf)]('/'+config[_0x231226(0x31a)]))_0x2182f9=_0x230590[_0x231226(0x1d4)]('/'+config[_0x231226(0x31a)],'');if(_0x230590[_0x231226(0x1bf)](config[_0x231226(0x31a)]+'/'))_0x2182f9=_0x230590['replace'](config[_0x231226(0x31a)]+'/','');return _0x2182f9;}function setLockOrders(_0xbd8e3e){const _0x1d12b3=_0x850d;lockOrders=_0xbd8e3e,logger[_0x1d12b3(0x2ae)](_0x1d12b3(0x34a)+Object[_0x1d12b3(0x2cd)](ORDERS)[lockOrders]);}async function unlockOrders(_0x154cff=![]){const _0x3071ed=_0x850d;if(allOrdersPlaced&&lockOrders==ORDERS['LOCKED']){setLockOrders(ORDERS[_0x3071ed(0x318)]);if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);if(_0x154cff){const _0x3d24dc=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x3d24dc,setBlockTransactionDetection(![]);}validateOrdersState='initial',persistOpenOrders([]),setLockOrders(ORDERS[_0x3071ed(0x349)]);}}async function validateOrders(_0x3a5ce4){const _0x1f9026=_0x850d;if(_0x3a5ce4)validateOrdersState=_0x3a5ce4;logger[_0x1f9026(0x2ae)](_0x1f9026(0x346)+validateOrdersState+_0x1f9026(0x21f)+Object[_0x1f9026(0x2cd)](ORDERS)[lockOrders]);let _0x613823=[],_0x30725a=config[_0x1f9026(0x1da)]==_0x1f9026(0x323)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config['timeout']*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x1f9026(0x292)])return;logger[_0x1f9026(0x2ae)](_0x1f9026(0x286)+validateOrdersState);for(let _0x430f58=lastOrders['length']-0x1;_0x430f58>=0x0;_0x430f58--){let _0x55faf5=lastOrders[_0x430f58],_0x151964=![];_0x55faf5[_0x1f9026(0x359)]>0x0&&(_0x151964=!![]),_0x613823[_0x1f9026(0x2c5)](_0x151964),_0x151964&&config[_0x1f9026(0x1da)]!=_0x1f9026(0x323)&&logHistory(_0x1f9026(0x2ef),_0x1f9026(0x1e5)+_0x55faf5[_0x1f9026(0x20d)]+'\x20'+_0x55faf5[_0x1f9026(0x35f)]+'\x20#'+formatResult(_0x55faf5[_0x1f9026(0x359)],0x8)+'\x20@'+formatResult(_0x55faf5[_0x1f9026(0x20c)],0x8)),_0x151964&&lastOrders['splice'](_0x430f58,0x1);}persistOpenOrders(lastOrders);const _0x958ff3=coolingDown?_0x1f9026(0x2cf):_0x1f9026(0x265);if(validateOrdersState==_0x1f9026(0x2f5)){validateOrdersState=_0x1f9026(0x1cc);if(_0x613823[_0x1f9026(0x1bf)](![])){}else await unlockOrders();}else{if(validateOrdersState==_0x1f9026(0x1cc)){if(_0x613823['includes'](![])){}else await unlockOrders();}else{if(validateOrdersState==_0x1f9026(0x2f0))_0x613823[_0x1f9026(0x1bf)](![])&&(config[_0x1f9026(0x1da)]=='market'?logHistory(_0x1f9026(0x2dd),'Order(s)\x20not\x20validated\x20after\x20'+Math['round'](_0x30725a*validateOrderInterval/0xea60)+_0x1f9026(0x2c0)+_0x958ff3):(await cancelOrders(),logHistory(_0x1f9026(0x2dd),_0x1f9026(0x1c6)+Math['round'](_0x30725a*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x958ff3))),await unlockOrders(!![]);else{if(validateOrdersState==_0x1f9026(0x313)){if(config[_0x1f9026(0x1da)]!='market')logHistory(_0x1f9026(0x2dd),_0x1f9026(0x353)+_0x958ff3);await unlockOrders(!![]);}}}}}async function cancelOrders(){lastOrders['forEach'](async _0x5725a5=>{const _0x5813ea=_0x5a14;try{const _0x31fa70=await exchange[_0x5813ea(0x397)](_0x5725a5[_0x5813ea(0x269)],_0x5725a5[_0x5813ea(0x20d)]);}catch(_0x33791d){if(_0x33791d[_0x5813ea(0x38e)]()[_0x5813ea(0x1bf)](_0x5813ea(0x22e))){}else await handleError(_0x33791d,_0x5813ea(0x201));}});}async function initCoinResults(_0x562bee){const _0x4816ef=_0x850d;_0x562bee?logger[_0x4816ef(0x2ae)]('Resetting\x20coin\x20results:\x20'+_0x562bee):logger[_0x4816ef(0x2ae)]('Initializing\x20coin\x20results'),config[_0x4816ef(0x24b)][_0x4816ef(0x23f)](_0x58a205=>{const _0x14bbac=_0x4816ef;if(!_0x58a205[_0x14bbac(0x31b)]&&_0x58a205['coin']!=config[_0x14bbac(0x31a)]){const _0x4ced8d=currentCoins[_0x14bbac(0x364)](_0x5b1db4=>_0x5b1db4['coin']==_0x58a205[_0x14bbac(0x1cd)]),_0x59e2c8=gTicker[noslash(_0x58a205['symbol'])];let _0x43888e=_0x4ced8d?_0x4ced8d[_0x14bbac(0x2e5)]:null,_0x172b34=_0x58a205[_0x14bbac(0x23c)]?0x1/_0x59e2c8:_0x59e2c8,_0x56b780;config[_0x14bbac(0x221)][_0x14bbac(0x23f)](_0x2e1c63=>{const _0x264649=_0x14bbac;!_0x56b780&&(_0x56b780=_0x2e1c63[_0x264649(0x365)][_0x264649(0x364)](_0x365fe8=>_0x365fe8[_0x264649(0x1cd)]==_0x58a205[_0x264649(0x1cd)]),_0x56b780&&(_0x43888e=_0x56b780['number'],_0x172b34=_0x56b780['price']));});let _0x2412c7=dbCoinResults['get']('coins')['find']({'coin':_0x58a205['coin']})['value']();if(!_0x2412c7){const _0xc6a4a6={'coin':_0x58a205[_0x14bbac(0x1cd)],'number':_0x43888e,'breakeven':_0x172b34,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get'](_0x14bbac(0x392))['push'](_0xc6a4a6)['write']();}else{if(_0x562bee&&_0x58a205['coin']==_0x562bee){const _0x11e829={'coin':_0x58a205[_0x14bbac(0x1cd)],'number':_0x43888e,'breakeven':_0x172b34,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x14bbac(0x257)](_0x14bbac(0x392))[_0x14bbac(0x364)]({'coin':_0x58a205[_0x14bbac(0x1cd)]})[_0x14bbac(0x2db)](_0x11e829)[_0x14bbac(0x33c)]();}}}});}async function updateCoinResults(_0xa57954,_0x55d61f=![]){const _0x3371e2=_0x850d;let _0x11b985,_0x27e040,_0x4a3149,_0x2f54bd,_0x1dc14a,_0x38ed6e,_0x1df3fc=dbCoinResults[_0x3371e2(0x257)](_0x3371e2(0x392))['find']({'coin':_0xa57954[_0x3371e2(0x1cd)]})[_0x3371e2(0x1e4)](),_0x3b87eb=![];_0x1df3fc&&Object['entries'](_0x1df3fc)[_0x3371e2(0x23f)](([_0x38164a,_0x513a97])=>{if(_0x513a97==null)_0x3b87eb=!![];});(!_0x1df3fc||_0x3b87eb)&&(await initCoinResults(_0xa57954[_0x3371e2(0x1cd)]),_0x1df3fc=dbCoinResults[_0x3371e2(0x257)](_0x3371e2(0x392))['find']({'coin':_0xa57954[_0x3371e2(0x1cd)]})[_0x3371e2(0x1e4)]());_0xa57954['reverse']&&(_0x38ed6e={'filled':_0xa57954[_0x3371e2(0x359)]*_0xa57954[_0x3371e2(0x20c)],'amount':_0xa57954[_0x3371e2(0x359)]*_0xa57954[_0x3371e2(0x20c)],'side':_0xa57954['side']==_0x3371e2(0x2ea)?_0x3371e2(0x371):_0x3371e2(0x2ea),'price':0x1/_0xa57954[_0x3371e2(0x20c)]},_0xa57954={..._0xa57954,..._0x38ed6e});_0x55d61f?_0x27e040=_0xa57954[_0x3371e2(0x35f)]==_0x3371e2(0x371)?_0x1df3fc[_0x3371e2(0x2e5)]+_0xa57954['filled']:_0x1df3fc[_0x3371e2(0x2e5)]-_0xa57954[_0x3371e2(0x359)]:_0x27e040=await getCoinNumber(_0xa57954[_0x3371e2(0x1cd)]);if(_0xa57954[_0x3371e2(0x209)]&&_0xa57954['fee']['currency']==config['basecoin'])_0x11b985=Number(_0xa57954[_0x3371e2(0x209)][_0x3371e2(0x387)]);else{if(_0xa57954[_0x3371e2(0x209)]&&_0xa57954[_0x3371e2(0x209)][_0x3371e2(0x287)]==_0x3371e2(0x2a3)&&!_0x55d61f&&config[_0x3371e2(0x31a)]!=_0x3371e2(0x298))_0x11b985=Number(_0xa57954[_0x3371e2(0x209)]['cost'])*gTicker[_0x3371e2(0x2a3)+config[_0x3371e2(0x31a)]];else _0x11b985=defaultFee*_0xa57954[_0x3371e2(0x359)]*_0xa57954[_0x3371e2(0x20c)];}_0xa57954[_0x3371e2(0x35f)]==_0x3371e2(0x371)?(_0x4a3149=_0x27e040!=0x0?(_0x1df3fc['breakeven']*_0x1df3fc['number']+_0xa57954[_0x3371e2(0x20c)]*(_0x27e040-_0x1df3fc['number'])+_0x11b985)/_0x27e040:0x0,_0x2f54bd=_0x1df3fc[_0x3371e2(0x309)]):(_0x4a3149=_0x27e040!=0x0?(_0x1df3fc[_0x3371e2(0x26c)]*_0x1df3fc['number']-_0xa57954['price']*(_0x1df3fc[_0x3371e2(0x2e5)]-_0x27e040)+_0x11b985)/_0x27e040:0x0,_0x2f54bd=_0x1df3fc[_0x3371e2(0x309)]+(_0xa57954['price']-_0x1df3fc[_0x3371e2(0x26c)])*_0xa57954['filled']);_0x1dc14a=(_0xa57954[_0x3371e2(0x20c)]-_0x4a3149-_0x11b985/_0xa57954[_0x3371e2(0x359)])*_0x27e040;let _0x3047d2={'coin':_0xa57954['coin'],'number':_0x27e040,'breakeven':formatResult(_0x4a3149,0x8),'realized':formatResult(_0x2f54bd,0x8),'unrealized':formatResult(_0x1dc14a,0x8),'fees':formatResult(_0x1df3fc[_0x3371e2(0x2a6)]+_0x11b985,0x8),'sells':_0xa57954[_0x3371e2(0x35f)]==_0x3371e2(0x2ea)?_0x1df3fc[_0x3371e2(0x241)]+0x1:_0x1df3fc[_0x3371e2(0x241)],'buys':_0xa57954['side']==_0x3371e2(0x371)?_0x1df3fc[_0x3371e2(0x385)]+0x1:_0x1df3fc[_0x3371e2(0x385)]};dbCoinResults[_0x3371e2(0x257)](_0x3371e2(0x392))[_0x3371e2(0x364)]({'coin':_0xa57954[_0x3371e2(0x1cd)]})[_0x3371e2(0x2db)](_0x3047d2)[_0x3371e2(0x33c)]();if(!_0x55d61f){if(_0xa57954[_0x3371e2(0x209)]&&_0xa57954[_0x3371e2(0x209)]['currency']==_0x3371e2(0x2a3)){const _0x3598df=currentCoins[_0x3371e2(0x364)](_0x22cae4=>_0x22cae4[_0x3371e2(0x1cd)]=='BNB');if(_0x3598df){let _0x33cf83=dbCoinResults[_0x3371e2(0x257)]('coins')[_0x3371e2(0x364)]({'coin':_0x3371e2(0x2a3)})[_0x3371e2(0x1e4)]();_0x3047d2={..._0x33cf83,'number':_0x3598df['number']},dbCoinResults[_0x3371e2(0x257)]('coins')[_0x3371e2(0x364)]({'coin':_0x3371e2(0x2a3)})[_0x3371e2(0x2db)](_0x3047d2)[_0x3371e2(0x33c)]();}}}}async function placeOrder(_0x7efab3){const _0x37cd15=_0x850d,_0x4c0710=config['ordertype']==_0x37cd15(0x323)?'market':_0x37cd15(0x293);if(lockOrders==ORDERS[_0x37cd15(0x349)]&&!coolingDown){setLockOrders(ORDERS['LOCKED']);while(transactionDetectionOngoing){await sleep(0x64);}logger[_0x37cd15(0x2ae)](_0x37cd15(0x1fb)+_0x7efab3[_0x37cd15(0x226)](_0x3e9cce=>_0x3e9cce[_0x37cd15(0x1cd)])['join'](',\x20')),lastCoinsToBalance='',allOrdersPlaced=![],validateOrdersState=_0x37cd15(0x2f5);let _0xb84417=![];lastOrders=[];const _0x202403=config['threshold'];for(const _0x16369e of _0x7efab3){let _0x2aa235,_0x59397f,_0x499203,_0x25d40e,_0x2f3333,_0x1004f5=_0x16369e['symbol'];logger[_0x37cd15(0x2ae)](_0x37cd15(0x357)+_0x16369e[_0x37cd15(0x1cd)]+'\x20'+_0x16369e[_0x37cd15(0x2e5)]+'\x20'+_0x16369e['last']+'\x20'+_0x16369e[_0x37cd15(0x34b)]+'%\x20'+_0x16369e[_0x37cd15(0x394)]+'%\x20'+(0x64*_0x16369e['delta'])['toFixed'](0x2)+_0x37cd15(0x1ef)+_0x202403[_0x37cd15(0x382)](0x2)+'%)');const _0x5d681c=currentCoins[_0x37cd15(0x364)](_0x90f509=>_0x90f509[_0x37cd15(0x1cd)]==_0x16369e[_0x37cd15(0x1cd)]);_0x5d681c&&(_0x5d681c[_0x37cd15(0x247)]=_0x16369e[_0x37cd15(0x2e5)]);try{const _0x3a86ad=await exchange['fetchTicker'](_0x1004f5);_0x2aa235=_0x16369e[_0x37cd15(0x23c)]?0x1/_0x16369e['last']:_0x16369e[_0x37cd15(0x2ba)],_0x59397f=_0x3a86ad['bid'],_0x499203=_0x3a86ad[_0x37cd15(0x28d)];_0x16369e[_0x37cd15(0x23c)]?(_0x25d40e=_0x16369e['side']=='buy'?'sell':_0x37cd15(0x371),_0x2f3333=Math[_0x37cd15(0x2a9)](_0x16369e['trade'])/_0x2aa235):(_0x25d40e=_0x16369e[_0x37cd15(0x35f)],_0x2f3333=Math[_0x37cd15(0x2a9)](_0x16369e['trade']));_0x4c0710=='limit'&&(config[_0x37cd15(0x1da)]==_0x37cd15(0x384)&&(_0x2aa235=_0x25d40e==_0x37cd15(0x371)?_0x59397f:_0x499203),config['ordertype']==_0x37cd15(0x23b)&&(_0x2aa235=_0x25d40e==_0x37cd15(0x371)?_0x499203:_0x59397f));_0x2f3333=formatResult(_0x2f3333,0x8),_0x2aa235=formatResult(_0x2aa235,0x8);const _0x29edd0=_0x25d40e=='sell'?config[_0x37cd15(0x2d5)]?String[_0x37cd15(0x229)]('0x'+config['emojisell'])+'\x20':'':config[_0x37cd15(0x1be)]?String[_0x37cd15(0x229)]('0x'+config[_0x37cd15(0x1be)])+'\x20':'',_0x5c109f=_0x4c0710==_0x37cd15(0x323)?_0x37cd15(0x396):config[_0x37cd15(0x1da)]==_0x37cd15(0x384)?'Limit\x20(high-margin)':_0x37cd15(0x2f4),_0x2c136d=(Math[_0x37cd15(0x2ec)](Math['random']()*0x35a4e900)+0x5f5e100)['toString']();lastOrders[_0x37cd15(0x2c5)]({'customId':_0x2c136d,'symbol':_0x1004f5,'coin':_0x16369e[_0x37cd15(0x1cd)],'amount':_0x2f3333,'price':_0x2aa235,'side':_0x25d40e,'reverse':_0x16369e['reverse'],'filled':0x0});if(_0x4c0710==_0x37cd15(0x323))logHistory(_0x37cd15(0x2ef),''+_0x29edd0+_0x5c109f+_0x37cd15(0x256)+_0x1004f5+'\x20'+_0x25d40e+'\x20#'+formatResult(_0x2f3333,0x8)+'\x20@'+formatResult(_0x2aa235,0x8));else logHistory(_0x37cd15(0x2ef),''+_0x29edd0+_0x5c109f+'\x20order:\x20'+_0x1004f5+'\x20'+_0x25d40e+'\x20#'+formatResult(_0x2f3333,0x8)+'\x20@'+formatResult(_0x2aa235,0x8));let _0x556e68;_0x4c0710==_0x37cd15(0x323)?_0x25d40e==_0x37cd15(0x371)&&['Bybit',_0x37cd15(0x21a),_0x37cd15(0x26a),_0x37cd15(0x25b),'Huobipro'][_0x37cd15(0x1bf)](config[_0x37cd15(0x22a)])?_0x556e68=await exchange[_0x37cd15(0x37a)](_0x1004f5,_0x4c0710,_0x25d40e,_0x2f3333,_0x2aa235):_0x556e68=await exchange['createOrder'](_0x1004f5,_0x4c0710,_0x25d40e,_0x2f3333,undefined):_0x556e68=await exchange[_0x37cd15(0x37a)](_0x1004f5,_0x4c0710,_0x25d40e,_0x2f3333,_0x2aa235);logger[_0x37cd15(0x2ae)](_0x37cd15(0x2c7)+_0x556e68['id']+_0x37cd15(0x260)+_0x2c136d);const _0x927423=lastOrders[_0x37cd15(0x33b)]-0x1;if(_0x927423>=0x0&&lastOrders[_0x927423][_0x37cd15(0x368)]==_0x2c136d){lastOrders[_0x927423][_0x37cd15(0x269)]=_0x556e68['id'];if(_0x556e68[_0x37cd15(0x33e)])lastOrders[_0x927423]['amount']=_0x556e68[_0x37cd15(0x33e)];if(_0x556e68['price'])lastOrders[_0x927423][_0x37cd15(0x20c)]=_0x556e68[_0x37cd15(0x20c)];lastOrders[_0x927423][_0x37cd15(0x209)]=_0x556e68[_0x37cd15(0x209)];}if(config[_0x37cd15(0x21b)]!=0x0){let _0x5d002d=null;if(cooldownTracker['length']==config['cooldown']-0x1)_0x5d002d=cooldownTracker['shift']();const _0x1b966e=getTimeStamp();cooldownTracker[_0x37cd15(0x2c5)](_0x1b966e);if(_0x5d002d){const _0x1ff262=fns[_0x37cd15(0x37d)](new Date(_0x1b966e),new Date(_0x5d002d));if(_0x1ff262<cooldownInterval){logHistory(_0x37cd15(0x36f),_0x37cd15(0x330)+config[_0x37cd15(0x21b)]+'\x20orders\x20in\x20less\x20than\x20'+cooldownInterval/0x3c+_0x37cd15(0x2fd)+cooldownPeriod/(0xe10*0x3e8)+_0x37cd15(0x360)),coolingDown=!![];break;}}}}catch(_0x4d9e25){if(_0x4d9e25['toString']()['includes'](_0x37cd15(0x354)))lastOrders=lastOrders[_0x37cd15(0x36d)](_0x56c85d=>_0x56c85d[_0x37cd15(0x20d)]!=_0x1004f5),logHistory(_0x37cd15(0x36f),_0x37cd15(0x31d)+_0x1004f5),_0xb84417=!![];else{if(_0x4d9e25[_0x37cd15(0x38e)]()['includes']('Invalid\x20quantity'))lastOrders=lastOrders[_0x37cd15(0x36d)](_0x1ed7e5=>_0x1ed7e5[_0x37cd15(0x20d)]!=_0x1004f5),logHistory('error',_0x37cd15(0x224)+_0x1004f5),_0xb84417=!![];else{if(_0x4d9e25[_0x37cd15(0x38e)]()['includes']('InvalidOrder'))lastOrders=lastOrders[_0x37cd15(0x36d)](_0xc49db3=>_0xc49db3['symbol']!=_0x1004f5),logHistory(_0x37cd15(0x36f),_0x37cd15(0x2df)+_0x1004f5),logger['debug'](_0x4d9e25),_0xb84417=!![];else _0x4d9e25['toString']()[_0x37cd15(0x1bf)]('must\x20be\x20greater\x20than\x20minimum\x20amount')?(lastOrders=lastOrders[_0x37cd15(0x36d)](_0xabe1d5=>_0xabe1d5[_0x37cd15(0x20d)]!=_0x1004f5),logHistory('error',_0x37cd15(0x31d)+_0x1004f5),_0xb84417=!![]):(lastOrders=lastOrders[_0x37cd15(0x36d)](_0x38db30=>_0x38db30['symbol']!=_0x1004f5),await handleError(_0x4d9e25,_0x37cd15(0x254),_0x1004f5));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x37cd15(0x33b)]>0x0){const _0x20c083=config[_0x37cd15(0x1da)]==_0x37cd15(0x323)?validateOrderTimeout*0x3c*0x3e8:config[_0x37cd15(0x2d3)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x132aaa=_0x37cd15;validateOrders(_0x132aaa(0x2f0));},_0x20c083);}else unlockOrders();_0xb84417&&config[_0x37cd15(0x37e)]&&(logHistory(_0x37cd15(0x36f),_0x37cd15(0x361)+pauseBotMsg),await pauseBot(pauseBotInterval)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x37cd15(0x2dd),'Cooldown\x20ended\x20-\x20balancing\x20resumed'));}else{if(coolingDown)!config[_0x37cd15(0x37e)]&&logHistory(_0x37cd15(0x36f),_0x37cd15(0x239));else lockOrders!=ORDERS[_0x37cd15(0x349)]&&(!config[_0x37cd15(0x37e)]&&(config[_0x37cd15(0x1da)]==_0x37cd15(0x323)?logHistory(_0x37cd15(0x36f),_0x37cd15(0x244)):logHistory(_0x37cd15(0x36f),_0x37cd15(0x27a))));}}function persistOpenOrders(_0x1fa618){const _0x40b300=_0x850d,_0x3f2783={...config,'openOrders':_0x1fa618};let _0x361bbe=dbConfig[_0x40b300(0x257)](_0x40b300(0x243))[_0x40b300(0x364)]({'botID':botID})['value']();_0x361bbe&&dbConfig[_0x40b300(0x257)]('bot')['find']({'botID':botID})['assign'](_0x3f2783)[_0x40b300(0x33c)]();}function restoreOrders(){const _0x2efb5c=_0x850d;let _0x5efbbc;config[_0x2efb5c(0x2ab)]&&allOpenOrders[_0x2efb5c(0x23f)](_0x2421eb=>{const _0x84a145=_0x2efb5c,_0x2d0061=config[_0x84a145(0x2ab)][_0x84a145(0x364)](_0x3a17d9=>_0x3a17d9['orderId']==_0x2421eb['id']);_0x2d0061&&(lastOrders[_0x84a145(0x2c5)](_0x2d0061),_0x5efbbc=_0x2421eb[_0x84a145(0x37f)]);});if(lastOrders[_0x2efb5c(0x33b)]>0x0){setLockOrders(ORDERS['LOCKED']),validateOrdersState='ongoing',allOrdersPlaced=!![];const _0x3a2e0c=new Date()[_0x2efb5c(0x2ce)](),_0x508750=config[_0x2efb5c(0x1da)]==_0x2efb5c(0x323)?validateOrderTimeout*0x3c*0x3e8:config[_0x2efb5c(0x2d3)]*0x3c*0x3e8;if(_0x5efbbc+_0x508750>_0x3a2e0c){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x1c6c21=_0x2efb5c;validateOrders(_0x1c6c21(0x2f0));},_0x5efbbc+_0x508750-_0x3a2e0c);}else validateOrders(_0x2efb5c(0x2f0));}}async function sendMetricsTelegram(){const _0xcfec83=_0x850d;if(!coinsLoaded){process['send']({'telegrammsg':'Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute'},_0x18c1d0=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x156914='';if(config[_0xcfec83(0x22d)])_0x156914='<b>'+config[_0xcfec83(0x207)]+_0xcfec83(0x26f);else _0x156914=_0xcfec83(0x27e)+botID+_0xcfec83(0x26f);const _0x4350f6=getKPIs('basecoin'),_0x57aad1=getKPIs(_0xcfec83(0x2d2),config['fiat']),_0x221549=getKPIs(_0xcfec83(0x227)),_0x449bbf=getKPIs(_0xcfec83(0x38d),config[_0xcfec83(0x2d2)]);_0x156914+=_0xcfec83(0x2ed),_0x156914+=_0x4350f6['leftTxt']+_0xcfec83(0x249)+_0x4350f6[_0xcfec83(0x1e4)]+'\x0a',_0x156914+=_0x4350f6[_0xcfec83(0x2eb)]+':\x20'+_0x4350f6[_0xcfec83(0x1dd)]+'%\x0a',_0x156914+=_0x57aad1[_0xcfec83(0x303)]+_0xcfec83(0x249)+_0x57aad1[_0xcfec83(0x1e4)]+'\x0a',_0x156914+=_0x57aad1[_0xcfec83(0x2eb)]+':\x20'+_0x57aad1['change']+'%\x0a',_0x156914+=_0x221549[_0xcfec83(0x303)]+':\x20'+_0x221549[_0xcfec83(0x1e4)]+'\x20('+config[_0xcfec83(0x31a)]+')\x0a',_0x156914+=_0x221549[_0xcfec83(0x2eb)]+':\x20'+_0x221549['change']+'%\x20('+config[_0xcfec83(0x31a)]+')\x0a',_0x156914+=_0x449bbf[_0xcfec83(0x303)]+':\x20'+_0x449bbf[_0xcfec83(0x1e4)]+'\x20('+config[_0xcfec83(0x2d2)]+')\x0a',_0x156914+=_0x449bbf[_0xcfec83(0x2eb)]+':\x20'+_0x449bbf[_0xcfec83(0x1dd)]+_0xcfec83(0x1ef)+config[_0xcfec83(0x2d2)]+')\x0a',_0x156914+='</pre>',process[_0xcfec83(0x1fa)]({'telegrammsg':_0x156914},_0x19edf0=>{});}async function sendPortfolioTelegram(){const _0x29fdd9=_0x850d;if(!coinsLoaded||!currentCoins[0x0][_0x29fdd9(0x34b)]){process[_0x29fdd9(0x1fa)]({'telegrammsg':_0x29fdd9(0x393)},_0x5c1319=>{});return;}let _0x17ecb8='';if(config['showname'])_0x17ecb8=_0x29fdd9(0x35b)+config['botname']+'\x20portfolio:</b>\x20\x0a\x0a';else _0x17ecb8=_0x29fdd9(0x27e)+botID+_0x29fdd9(0x2e8);_0x17ecb8+=_0x29fdd9(0x2ed),_0x17ecb8+='-------------------------------\x0a',_0x17ecb8+=_0x29fdd9(0x33a),_0x17ecb8+='-------------------------------\x0a',currentCoins[_0x29fdd9(0x23f)](_0x235ec0=>{const _0x1d9698=_0x29fdd9;_0x17ecb8+=_0x235ec0[_0x1d9698(0x1cd)][_0x1d9698(0x29e)](0x7)+'|\x20'+formatPad(_0x235ec0[_0x1d9698(0x34b)],0x2,0x6)+'|\x20'+formatPad(_0x235ec0[_0x1d9698(0x394)],0x2,0x6)+'|\x20'+formatPad(_0x235ec0['delta']*0x64,0x2,0x6)+'\x0a';}),_0x17ecb8+=_0x29fdd9(0x25e),process[_0x29fdd9(0x1fa)]({'telegrammsg':_0x17ecb8},_0x8fd5ec=>{});}function formatPad(_0xc63970,_0x5e95c3,_0xfd0a5a){const _0x34079e=_0x850d,_0x54ab87=formatResultString(_0xc63970,_0x5e95c3);return _0x54ab87?_0x54ab87[_0x34079e(0x23d)](_0xfd0a5a):''['padStart'](_0xfd0a5a);}function logHistory(_0x30690a,_0x2edd85,_0x2f9f3a=''){const _0x4f9942=_0x850d;logger['full'](''+_0x2edd85);let _0x4d667f={'time':getTimeStamp(),'type':_0x30690a,'event':_0x2edd85};dbLogs[_0x4f9942(0x257)]('logs')['push'](_0x4d667f)['write']();if(_0x2f9f3a=='')_0x2f9f3a=_0x2edd85;proxyEmit(_0x4f9942(0x32c),{'log':_0x4d667f,'summary':_0x2f9f3a}),process[_0x4f9942(0x1fa)]({'telegram':{..._0x4d667f,'botname':config[_0x4f9942(0x207)],'showname':config['showname']}},_0x5e2c41=>{});}function emitHistory(_0x499b7b={}){const _0xeef1e5=_0x850d;Object['keys'](_0x499b7b)[_0xeef1e5(0x33b)]==0x0&&(_0x499b7b={'type':['order','event'],'event':'','page':0x1});if(_0x499b7b[_0xeef1e5(0x2da)][_0xeef1e5(0x1bf)](_0xeef1e5(0x32c)))_0x499b7b[_0xeef1e5(0x2da)][_0xeef1e5(0x1c2)](_0x499b7b[_0xeef1e5(0x2da)][_0xeef1e5(0x321)]('event'),0x1,_0xeef1e5(0x36f),_0xeef1e5(0x24e),'success');if(dbLogs[_0xeef1e5(0x1ff)](_0xeef1e5(0x22c))[_0xeef1e5(0x1e4)]()){let _0x4a07ea=dbLogs[_0xeef1e5(0x257)]('logs')[_0xeef1e5(0x36d)](_0x30b22d=>{const _0x4b21d1=_0xeef1e5;if(_0x499b7b['type']['length']==0x0)return![];else return _0x499b7b[_0x4b21d1(0x2da)][_0x4b21d1(0x1bf)](_0x30b22d[_0x4b21d1(0x2da)]);})[_0xeef1e5(0x36d)](_0x5c16e0=>{const _0x9b4b09=_0xeef1e5;if(_0x499b7b[_0x9b4b09(0x32c)]=='')return!![];else return _0x5c16e0[_0x9b4b09(0x32c)][_0x9b4b09(0x305)]()[_0x9b4b09(0x1bf)](_0x499b7b['event'][_0x9b4b09(0x305)]());})['sortBy'](_0xeef1e5(0x32d)),_0x946924=_0x4a07ea[_0xeef1e5(0x1e4)]()[_0xeef1e5(0x33b)];_0x4a07ea=_0x4a07ea['reverse']()[_0xeef1e5(0x1db)]((_0x499b7b[_0xeef1e5(0x234)]-0x1)*logPageSize,_0x499b7b[_0xeef1e5(0x234)]*logPageSize-0x1)[_0xeef1e5(0x23c)]()[_0xeef1e5(0x1e4)](),proxyEmit(_0xeef1e5(0x325),{'logs':_0x4a07ea,'total':_0x946924});}else proxyEmit(_0xeef1e5(0x325),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0xaae1ac){const _0x1fc31c=_0x850d;if(dbLogs['has']('logs')[_0x1fc31c(0x1e4)]()){const _0x242832=dbLogs[_0x1fc31c(0x257)](_0x1fc31c(0x22c))[_0x1fc31c(0x232)](_0x1fc31c(0x32d))[_0x1fc31c(0x36d)](_0x93b474=>{const _0x3cb78b=_0x1fc31c;return _0x93b474[_0x3cb78b(0x2da)]=='order';})[_0x1fc31c(0x1e4)]();dbLogs[_0x1fc31c(0x257)](_0x1fc31c(0x22c))[_0x1fc31c(0x2ee)]()[_0x1fc31c(0x33c)](),dbLogs['get'](_0x1fc31c(0x22c))['assign'](_0x242832)[_0x1fc31c(0x33c)](),emitHistory(_0xaae1ac);}}async function pauseBot(_0x524bf1=pauseBotIntervalShort,_0x28d93d,_0x574443,_0x3e332f=![]){const _0x5906d4=_0x850d,_0x427a55=new Date()[_0x5906d4(0x2ce)]();if(!lastErrorShown||_0x427a55-lastErrorShown>=_0x524bf1){lastErrorShown=_0x427a55;if(!lastBotPause)lastBotPause=_0x427a55,consecutivePauses=0x1;else{if(_0x427a55-lastBotPause-_0x524bf1<0x5a*0x3e8){consecutivePauses++;if(consecutivePauses>maxPauseRetries){if(_0x3e332f){logHistory(_0x5906d4(0x36f),_0x28d93d+_0x5906d4(0x1e8)),await killBot();return;}else logHistory('error',_0x28d93d+pauseBotMsg),_0x524bf1=pauseBotInterval;}}else consecutivePauses=0x1;lastBotPause=_0x427a55;}_0x574443?logger[_0x5906d4(0x2ae)]('('+consecutivePauses+')\x20'+_0x28d93d+_0x5906d4(0x28c),_0x574443):logger['debug']('('+consecutivePauses+')\x20'+_0x28d93d);if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);await sleep(_0x524bf1),botPaused=![],_0x524bf1==pauseBotIntervalShort?resumeBot(!![]):resumeBot(![]);}}}async function killBot(){const _0xfb1ac9=_0x850d;botPaused=!![],await sleep(0x3e8),process[_0xfb1ac9(0x1fa)]({'stop':_0xfb1ac9(0x228)},_0x5fdd2b=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x34733e,_0x295056,_0x2b060e=![]){const _0x4a1b89=_0x850d;if(botPaused)return;let _0x52efa6;const _0x142675=config[_0x4a1b89(0x22a)]||_0x4a1b89(0x36e);if(_0x295056)logger[_0x4a1b89(0x2ae)](_0x4a1b89(0x211)+_0x295056);const _0x27165c=()=>{const _0x9c5a86=_0x4a1b89;loading[_0x9c5a86(0x36f)]=!![],emitLoadingProgress();};if(_0x34733e[_0x4a1b89(0x38e)]()[_0x4a1b89(0x1bf)]('API-key\x20format\x20invalid'))logHistory(_0x4a1b89(0x36f),_0x142675+_0x4a1b89(0x289)),_0x27165c();else{if(_0x34733e[_0x4a1b89(0x38e)]()[_0x4a1b89(0x1bf)](_0x4a1b89(0x2f8)))logHistory(_0x4a1b89(0x36f),_0x142675+_0x4a1b89(0x30b)),_0x27165c();else{if(_0x34733e['toString']()[_0x4a1b89(0x1bf)](_0x4a1b89(0x332)))config[_0x4a1b89(0x315)]?_0x52efa6=_0x142675+_0x4a1b89(0x2bc):_0x52efa6=_0x142675+_0x4a1b89(0x1fd),logHistory('error',_0x52efa6+_0x4a1b89(0x374)),_0x27165c();else{if(_0x34733e[_0x4a1b89(0x38e)]()[_0x4a1b89(0x1bf)](_0x4a1b89(0x376)))logHistory(_0x4a1b89(0x36f),_0x142675+_0x4a1b89(0x378)),_0x27165c();else{if(!_0x2b060e)await handleError(_0x34733e,null);}}}}}async function handleError(_0x136be2,_0x2316dc,_0x4998e9=''){const _0x5f3e7c=_0x850d;if(botPaused)return;let _0x2b8772;const _0x2c9ec7=config[_0x5f3e7c(0x22a)]||_0x5f3e7c(0x36e);if(_0x2316dc)logger['debug'](_0x5f3e7c(0x211)+_0x2316dc);if(_0x136be2['toString']()['includes']('DDoSProtection'))_0x2b8772=_0x2c9ec7+_0x5f3e7c(0x2a5),await pauseBot(undefined,_0x2b8772,_0x136be2);else{if(_0x136be2['toString']()['includes'](_0x5f3e7c(0x276)))_0x2b8772=_0x2c9ec7+_0x5f3e7c(0x1ed),await pauseBot(undefined,_0x2b8772,_0x136be2);else{if(_0x136be2[_0x5f3e7c(0x38e)]()[_0x5f3e7c(0x1bf)](_0x5f3e7c(0x307))||_0x136be2['toString']()[_0x5f3e7c(0x1bf)](_0x5f3e7c(0x24f)))_0x2b8772=_0x2c9ec7+_0x5f3e7c(0x1d9),await pauseBot(undefined,_0x2b8772,_0x136be2[_0x5f3e7c(0x38e)]());else{if(_0x136be2[_0x5f3e7c(0x38e)]()[_0x5f3e7c(0x1bf)]('RequestTimeout'))_0x2b8772=_0x2c9ec7+_0x5f3e7c(0x21e),await pauseBot(undefined,_0x2b8772,_0x136be2['toString']());else{if(_0x136be2[_0x5f3e7c(0x38e)]()[_0x5f3e7c(0x1bf)](_0x5f3e7c(0x1c5)))_0x2b8772=_0x2c9ec7+_0x5f3e7c(0x380),await pauseBot(undefined,_0x2b8772,_0x136be2[_0x5f3e7c(0x38e)]());else{if(_0x136be2[_0x5f3e7c(0x38e)]()['toLowerCase']()['includes'](_0x5f3e7c(0x37f))||_0x136be2[_0x5f3e7c(0x38e)]()[_0x5f3e7c(0x305)]()[_0x5f3e7c(0x1bf)](_0x5f3e7c(0x233)))_0x2b8772=_0x5f3e7c(0x299),await pauseBot(undefined,_0x2b8772,_0x136be2[_0x5f3e7c(0x38e)]());else{if(_0x136be2[_0x5f3e7c(0x38e)]()[_0x5f3e7c(0x1bf)](_0x5f3e7c(0x35a)))_0x2b8772=_0x2c9ec7+_0x5f3e7c(0x219),await pauseBot(undefined,_0x2b8772,_0x136be2[_0x5f3e7c(0x38e)]());else{if(_0x136be2 instanceof ccxt['NetworkError'])_0x2b8772=_0x2c9ec7+_0x5f3e7c(0x208)+_0x136be2[_0x5f3e7c(0x38e)](),logger['debug'](_0x5f3e7c(0x2b7),_0x136be2),await pauseBot(undefined,_0x2b8772,_0x136be2);else{if(_0x136be2[_0x5f3e7c(0x38e)]()['includes'](_0x5f3e7c(0x30f)))logHistory('error',_0x2c9ec7+_0x5f3e7c(0x1ee)),logHistory(_0x5f3e7c(0x36f),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)'),await killBot();else{if(_0x136be2[_0x5f3e7c(0x38e)]()['includes']('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory(_0x5f3e7c(0x36f),_0x2c9ec7+_0x5f3e7c(0x28e)),logHistory('error',_0x5f3e7c(0x2bf)),await killBot();else{if(_0x136be2['toString']()['includes'](_0x5f3e7c(0x332))&&_0x136be2[_0x5f3e7c(0x38e)]()['includes'](_0x5f3e7c(0x22f)))_0x2b8772=_0x2c9ec7+_0x5f3e7c(0x274),await pauseBot(undefined,_0x2b8772,_0x136be2,!![]);else{if(_0x136be2[_0x5f3e7c(0x38e)]()[_0x5f3e7c(0x1bf)](_0x5f3e7c(0x332)))config['apiPassword']?_0x2b8772=_0x2c9ec7+_0x5f3e7c(0x2bc):_0x2b8772=_0x2c9ec7+_0x5f3e7c(0x1fd),logHistory(_0x5f3e7c(0x36f),_0x2b8772),logHistory('error',_0x5f3e7c(0x2bf)),await killBot();else{if(_0x136be2[_0x5f3e7c(0x38e)]()['includes']('PermissionDenied'))logHistory(_0x5f3e7c(0x36f),_0x2c9ec7+_0x5f3e7c(0x338)),logHistory(_0x5f3e7c(0x36f),_0x5f3e7c(0x2bf)),await killBot();else{if(_0x136be2['toString']()[_0x5f3e7c(0x1bf)]('InsufficientFunds'))logHistory(_0x5f3e7c(0x36f),_0x5f3e7c(0x30d)+_0x4998e9),logger[_0x5f3e7c(0x2ae)]('Error\x20details:',_0x136be2);else{if(_0x136be2 instanceof ccxt[_0x5f3e7c(0x30a)]){_0x2b8772=_0x2c9ec7+_0x5f3e7c(0x27c)+_0x136be2['toString']();if(_0x4998e9)_0x2b8772+=_0x5f3e7c(0x2ca)+_0x4998e9;await pauseBot(undefined,_0x2b8772,_0x136be2);}else{_0x2b8772=_0x5f3e7c(0x31e)+_0x136be2[_0x5f3e7c(0x38e)]();if(_0x4998e9)_0x2b8772+='\x0aSymbol(s):\x20'+_0x4998e9;await pauseBot(undefined,_0x2b8772);}}}}}}}}}}}}}}}}function decryptRSA(_0x3b32c4,_0x9cb792){const _0x2ce02d=_0x850d,_0x327e93=forge[_0x2ce02d(0x26e)][_0x2ce02d(0x290)](_0x3b32c4),_0x2905a4=_0x327e93[_0x2ce02d(0x25a)](forge[_0x2ce02d(0x214)][_0x2ce02d(0x1fe)](_0x9cb792),_0x2ce02d(0x25d),{'md':forge['md']['sha256'][_0x2ce02d(0x335)](),'mgf1':{'md':forge['md']['sha256']['create']()}});return _0x2905a4;}async function withRetry(_0x4b9359,_0x2adfd2){const _0x561ce8=_0x850d;let _0x24dd3d=![],_0x447efd=0x0,_0x21db83,_0x40e168;while(_0x447efd<maxRetries){try{_0x21db83=await _0x2adfd2();break;}catch(_0x1e4a4d){_0x40e168=_0x1e4a4d,!_0x24dd3d?(_0x24dd3d=!![],logger[_0x561ce8(0x2ae)](_0x561ce8(0x302)+_0x4b9359+':',_0x1e4a4d[_0x561ce8(0x38e)]())):await sleep(retryInterval);}_0x447efd++;}if(_0x447efd==0x0)return _0x21db83;if(_0x447efd>=maxRetries)throw _0x40e168;else return logger[_0x561ce8(0x2ae)](_0x561ce8(0x2b4)+_0x447efd+'\x20attempts'),_0x21db83;}function formatResult(_0xb47d4d,_0xc4e47f){const _0x1af099=_0x850d;return parseFloat(_0xb47d4d[_0x1af099(0x382)](_0xc4e47f));}function formatResultTruncate(_0x295909,_0x41c633){const _0x56d188=_0x850d;let _0x148653=formatResultString(_0x295909,0xa),_0xa5d75=_0x148653[_0x56d188(0x321)]('.');return _0xa5d75!=-0x1&&(_0x148653=_0x148653[_0x56d188(0x1db)](0x0,_0xa5d75+_0x41c633+0x1)),Number(_0x148653);}function formatResultString(_0x3e1a82,_0x49d36d){const _0x14e962=_0x850d;let _0x5d3f5b;if(!(''+_0x3e1a82)['includes']('e'))_0x5d3f5b=+(Math[_0x14e962(0x23a)](_0x3e1a82+'e+'+_0x49d36d)+'e-'+_0x49d36d);else{let _0x5169a5=(''+_0x3e1a82)[_0x14e962(0x1d6)]('e'),_0x458343='';+_0x5169a5[0x1]+_0x49d36d>0x0&&(_0x458343='+'),_0x5d3f5b=+(Math[_0x14e962(0x23a)](+_0x5169a5[0x0]+'e'+_0x458343+(+_0x5169a5[0x1]+_0x49d36d))+'e-'+_0x49d36d);}return Number(_0x5d3f5b)['toFixed'](_0x49d36d);}function getServerTime(){const _0x21361b=_0x850d,_0x5584b1=new Date();return _0x5584b1[_0x21361b(0x2d8)]()+'/'+(_0x5584b1[_0x21361b(0x2b3)]()+0x1)[_0x21361b(0x38e)]()[_0x21361b(0x23d)](0x2,'0')+'/'+_0x5584b1[_0x21361b(0x356)]()[_0x21361b(0x38e)]()['padStart'](0x2,'0')+'\x20'+_0x5584b1[_0x21361b(0x2fe)]()[_0x21361b(0x38e)]()[_0x21361b(0x23d)](0x2,'0')+':'+_0x5584b1[_0x21361b(0x363)]()[_0x21361b(0x38e)]()[_0x21361b(0x23d)](0x2,'0')+':'+_0x5584b1[_0x21361b(0x366)]()[_0x21361b(0x38e)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x289c64=_0x850d,_0x4d6650=shiftedTime();return _0x4d6650[_0x289c64(0x2d8)]()+'/'+(_0x4d6650['getMonth']()+0x1)[_0x289c64(0x38e)]()[_0x289c64(0x23d)](0x2,'0')+'/'+_0x4d6650['getDate']()[_0x289c64(0x38e)]()[_0x289c64(0x23d)](0x2,'0')+'\x20'+_0x4d6650[_0x289c64(0x2fe)]()['toString']()[_0x289c64(0x23d)](0x2,'0')+':'+_0x4d6650[_0x289c64(0x363)]()[_0x289c64(0x38e)]()[_0x289c64(0x23d)](0x2,'0')+':'+_0x4d6650[_0x289c64(0x366)]()[_0x289c64(0x38e)]()['padStart'](0x2,'0');}function getDate(){const _0x56cbfb=_0x850d,_0x3bab84=shiftedTime();return _0x3bab84[_0x56cbfb(0x2d8)]()+'/'+(_0x3bab84[_0x56cbfb(0x2b3)]()+0x1)[_0x56cbfb(0x38e)]()[_0x56cbfb(0x23d)](0x2,'0')+'/'+_0x3bab84[_0x56cbfb(0x356)]()[_0x56cbfb(0x38e)]()[_0x56cbfb(0x23d)](0x2,'0');}function getHour(){const _0x5117e9=_0x850d,_0x401965=shiftedTime();return _0x401965['getHours']()[_0x5117e9(0x38e)]()['padStart'](0x2,'0');}function sleep(_0x3ed7){return new Promise(_0x43963d=>setTimeout(_0x43963d,_0x3ed7));}function shiftedTime(){const _0x5058aa=_0x850d,_0x22881e=new Date();let _0x46b6b2=_0x22881e;if(config&&config[_0x5058aa(0x24c)]!==0x0)_0x46b6b2=fns[_0x5058aa(0x328)](_0x22881e,{'hours':config[_0x5058aa(0x24c)]});return _0x46b6b2;}function timer(_0x2a5014){const _0x39d841=_0x850d,_0x17daad=new Date();!lasttime?console['log'](getTimeStamp()+':\x20timer\x20>',_0x2a5014,_0x17daad):console[_0x39d841(0x2b5)](getTimeStamp()+_0x39d841(0x1ce),_0x2a5014,(_0x17daad-lasttime)/0x3e8),lasttime=_0x17daad;}