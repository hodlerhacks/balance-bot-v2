const _0x874150=_0x1893;(function(_0x1ece50,_0x2870c6){const _0x301528=_0x1893,_0x4c56b5=_0x1ece50();while(!![]){try{const _0x52f2be=-parseInt(_0x301528(0x1b0))/0x1+parseInt(_0x301528(0xe9))/0x2+parseInt(_0x301528(0xcf))/0x3*(-parseInt(_0x301528(0x95))/0x4)+parseInt(_0x301528(0xeb))/0x5+-parseInt(_0x301528(0x17c))/0x6+parseInt(_0x301528(0x1ca))/0x7+-parseInt(_0x301528(0x7d))/0x8;if(_0x52f2be===_0x2870c6)break;else _0x4c56b5['push'](_0x4c56b5['shift']());}catch(_0x43f41b){_0x4c56b5['push'](_0x4c56b5['shift']());}}}(_0x3eb6,0x7b4cb));const _0x2eca5=function(){let _0x5431cf=!![];return function(_0x956102,_0x13c611){const _0x5d9a02=_0x5431cf?function(){const _0x523dd4=_0x1893;if(_0x13c611){const _0x2de75e=_0x13c611[_0x523dd4(0x207)](_0x956102,arguments);return _0x13c611=null,_0x2de75e;}}:function(){};return _0x5431cf=![],_0x5d9a02;};}(),_0x41b8c2=_0x2eca5(this,function(){const _0x7fba9a=_0x1893;return _0x41b8c2[_0x7fba9a(0xc1)]()['search'](_0x7fba9a(0x171))[_0x7fba9a(0xc1)]()[_0x7fba9a(0x1cf)](_0x41b8c2)[_0x7fba9a(0x22a)](_0x7fba9a(0x171));});_0x41b8c2();'use strict';const ccxt=require(_0x874150(0x176)),low=require('lowdb'),FileSync=require(_0x874150(0xe6)),fs=require('fs'),fns=require(_0x874150(0x183)),forge=require(_0x874150(0x143)),util=require(_0x874150(0x1fb)),argv=require(_0x874150(0x102))(process['argv'][_0x874150(0x197)](0x2))[_0x874150(0x132)],path=require(_0x874150(0x210)),axios=require('axios');let exchange,gTicker={},gChange={};const usdBasecoins=[_0x874150(0x17f),_0x874150(0xa3),_0x874150(0x1b7),'USDT',_0x874150(0xad),_0x874150(0x7a)],excludedExchanges=[_0x874150(0x100)],debugging=argv['d']||![];let pnlGenerationNeeded=argv['r']||![],config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object['freeze']({'LOCKED':0x0,'UNLOCKING':0x1,'UNLOCKED':0x2});let lockOrders=ORDERS[_0x874150(0x1e5)],validateOrdersState,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotIntervalShort=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0x874150(0x98)+pauseBotInterval/0xea60+_0x874150(0x145),maxPauseRetries=0x6,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,watchTransactionsInterval=0x3c*0x3e8,schedulerInterval=0x3c*0x3c*0x3e8,retryInterval=0x3e8,maxRetries=0x5,logPageSize=0x14,defaultFee=0.003;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidOrdersInitialTimeout,pidOrdersTimeout,botPaused=![],transactionDetectionOngoing=![],lastCoinsToBalance='',exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x5dc,balanceUpdateRetries=0x5;let enableFiatToggle;const serverversion=require('./version.json')[_0x874150(0xea)],environment=require(_0x874150(0x175))[_0x874150(0x148)]||_0x874150(0xa7),botID=process[_0x874150(0x132)][0x2]||_0x874150(0x213),pattern=/^[0-9]{3}$/;!pattern[_0x874150(0x1b4)](botID)&&(console[_0x874150(0x21d)]('Error:\x20Invalid\x20argument\x20'+botID+_0x874150(0x1cc)),killBot());const userID=process[_0x874150(0x132)][0x3]||'',configpath=userID?_0x874150(0x83)+userID+'/':'./config/',logspath=userID?_0x874150(0x129)+userID+'/':_0x874150(0x129),loggerfile=fs[_0x874150(0x1e1)](logspath+_0x874150(0x1fd),{'flags':'a'});!fs[_0x874150(0x19f)](configpath)&&fs['mkdirSync'](configpath);!fs[_0x874150(0x19f)](logspath)&&fs[_0x874150(0x135)](logspath);const configfile=configpath+_0x874150(0x18d)+botID+'-config.json',logfile=configpath+'bot-'+botID+_0x874150(0x216),performancefile=configpath+_0x874150(0x18d)+botID+_0x874150(0xa5),coinresultsfile=configpath+_0x874150(0x18d)+botID+_0x874150(0x1c2),settingsfile=configpath+_0x874150(0xda),securefile=configpath+'bb-secure.json',configbackuppath=configpath+'/backup/',adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x874150(0x104)]({'logs':[],'version':serverversion})[_0x874150(0x85)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x874150(0x104)]({'data':[],'version':serverversion})['write']();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x874150(0x104)]({'bot':[],'version':serverversion})[_0x874150(0x85)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x874150(0x104)]({'coins':{},'version':serverversion})[_0x874150(0x85)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0,settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0xb1b21d=>{const _0x19c67b=_0x874150;console[_0x19c67b(0x21d)](_0xb1b21d);},'simple':_0x5bbe2c=>{const _0x46efdf=_0x874150;console['log'](_0x5bbe2c),loggerfile[_0x46efdf(0x85)](util[_0x46efdf(0x1a5)](_0x5bbe2c)+'\x0a');},'full':async(_0x5942ff,_0x2fbee2='')=>{const _0x1399d6=_0x874150;let _0x4659e2;if(config['showname'])_0x4659e2=getTimeStamp()+':\x20'+config['botname']+'\x20>\x20'+_0x5942ff;else _0x4659e2=getTimeStamp()+_0x1399d6(0x206)+botID+_0x1399d6(0x21f)+_0x5942ff;console['log'](_0x4659e2),loggerfile[_0x1399d6(0x85)](util[_0x1399d6(0x1a5)](_0x4659e2)+'\x0a'),_0x2fbee2&&(console[_0x1399d6(0x21d)](_0x2fbee2),loggerfile[_0x1399d6(0x85)](util['format'](_0x2fbee2)+'\x0a'));},'debug':async(_0x217a2d,_0x51f5c9='')=>{const _0x512bd5=_0x874150;let _0x555117;if(config[_0x512bd5(0x18f)])_0x555117=getTimeStamp()+':\x20'+config[_0x512bd5(0x118)]+_0x512bd5(0x139)+_0x217a2d;else _0x555117=getTimeStamp()+_0x512bd5(0x206)+botID+_0x512bd5(0x139)+_0x217a2d;if(debugging)console[_0x512bd5(0x21d)](_0x555117);loggerfile[_0x512bd5(0x85)](util[_0x512bd5(0x1a5)](_0x555117)+'\x0a');if(_0x51f5c9){if(debugging)console[_0x512bd5(0x21d)](_0x51f5c9);loggerfile['write'](util['format'](_0x51f5c9)+'\x0a');}}};process['on'](_0x874150(0x170),function(_0x3cc06e){const _0x2dc648=_0x874150;handleError(_0x3cc06e[_0x2dc648(0x6a)],_0x2dc648(0x170));});settings[_0x874150(0x186)]!=config[_0x874150(0x186)]&&updateTimeshift(settings['timeshift']);function _0x3eb6(){const _0x386a22=['settings','path','success','buy','001','Waited\x20','time','-events.json','basecoin','timestamp','Error\x20in\x20loadSymbols():\x20','Saving\x20configuration','Set\x20lock\x20orders\x20to:\x20','debug','log','no\x20exchange\x20reloaded','\x20>\x20','watchTradesForSymbols()','send','ETH','pnl-fiat','added','api-issue','pnl','findIndex','customId','emojisell','search','getHours','\x20-\x20bot\x20not\x20started','eur','red_yellow_blue','stringify','starting-balance-','type','Order\x20is\x20invalid:\x20','request-time','join','Fee\x20discount\x20refund\x20detected:\x20','stack','exchanges','RequestTimeout','Error\x20details:\x20','update-liquidity','watchTradesForSymbols','CoinMarketCap\x20data\x20could\x20not\x20be\x20updated\x20-\x20will\x20try\x20again\x20in\x201\x20hour','unlinkSync','pid','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','2\x20-\x20Handled\x20open\x20orders','headless','toggleBotMode','Reset\x20|\x20','marketcap','getSeconds','USDP','Executed\x20','yyyy/MM/dd','3708672nQQwLc','EUR','Invalid\x20API\x20details,\x20please\x20try\x20again\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','remove','function','./config/','\x20closed\x20the\x20connection\x20(see:\x20hodlerhacks.com/fix/5)','write','</pre>','Unfilled\x20order(s)\x20canceled\x20after\x20','round','getFullYear','differenceInSeconds','1\x20-\x20FILLED\x20known\x20order:\x20','writeFile','apiSecret','prevnumber','slider','Updating\x20API\x20key\x20(not\x20saved\x20in\x20config\x20file\x20yet)','breakeven','Exchange\x20permission\x20denied\x20-\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','forEach','distribution','548JrCXOk','changes','<pre>','\x20>\x20pausing\x20bot\x20for\x20','Initializing\x20exchange','RateLimitExceeded','1\x20-\x20partially\x20FILLED\x20(','\x20exchange\x20error:\x20','closed','setSandboxMode','-------------------------------\x0a','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','Order\x20amount\x20is\x20invalid:\x20','final','BUSD','toFixed','-performance.json','total','production','bot','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute','code','Headless:\x20','USDC','fetchOpenOrders','<b>','ongoing','marketcapEnabled','<b>Bot\x20','NetworkError','Binance','pki','getMinutes','filled','find','symbol','\x20/\x20','\x20network\x20error:\x20','side','getTime','BTC','Error\x20details:','MIN_NOTIONAL','toString','2\x20-\x20Validate\x20orders:\x20','limit-high','PnL\x20','create','configuration','\x20API\x20key\x20is\x20invalid','error','\x20|\x20lock\x20orders:\x20','Failed\x20to\x20load\x20market\x20data\x20-\x20bot\x20not\x20started','initTickers()','abs','cooldown','args','17403vKLqYM','UNLOCKING','\x20API\x20key,\x20secret\x20or\x20password\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','\x20|\x20','Pausing\x20for\x20','ExchangeNotAvailable','placeOrder()','filter','storeConfiguration','InsufficientFunds','AuthenticationError','bb-settings.json','portfolio','Avoiding\x20continuous\x20order\x20attempts','netoffset','full','deleteHistoryAlerts','\x20metrics:</b>\x20\x0a\x0a','Generating\x20PnL\x20data','portfolio1','initial','2.7.1','recreate','lowdb/adapters/FileSync','Initializing\x20exchange:\x20already\x20done','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','1500450nxJPLw','version','4027825kMomWT','colorscheme','Net\x20','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','liquidity','\x20rejected\x20your\x20API\x20request\x20(see:\x20hodlerhacks.com/fix/4)','sell','performance','spot','watchOrders','Network\x20error\x20details:','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','Placing\x20order\x20for:\x20','apiKey','valid','remainingSymbols','value','ask','Failed\x20to\x20load\x20coin\x20data\x20for\x20','%)\x0a','open','bitmex','\x20-\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','yargs/yargs','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','defaults','pop','configstate','Bybit','Error\x20while\x20deleting\x20files:\x20','currency','onepagemode','Limit\x20(low-margin)','length','net-fiat','market_cap','change','includes','coin-loading-progress','map','limits','\x20|\x20exchange:\x20','Error\x20occurred:\x20','ordertype','emojibuy','botname','enableFiatToggle','sort','warning','Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)','fetchTicker','basecoinvalue','percentage','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','Order\x20filled','getDate',':\x20timer\x20>','sandbox','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)','\x20-\x20bot\x20switched\x20to\x20manual\x20mode','trade','./logs/','amount','\x20-\x20bot\x20already\x20running\x20in\x20manual\x20mode','fetchBalance','restart','Huobi','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','net-basecoin','canceled','argv','password','Market\x20order','mkdirSync','Value\x20','quick','has','\x20>\x20[DEBUG]\x20','startprice','get','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','watchOrders()','2.6.23','highest','loadSymbols()','match','cancelOrder','node-forge','process\x20','\x20minutes','usd','string','environment','Stopped\x20fetching\x20balance\x20after\x20','isEqual','recent20','getMonth','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20for\x20','market','Manual\x20balancing\x20required','order','buys','sendPortfolioTelegram','limit','data','ID:\x20','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','Loading\x20completed','\x20-\x20','privateKeyFromPem','sha256','OnMaintenance','Resetting\x20bot\x20history','coin','portfolio2','random','PermissionDenied','no\x20open\x20orders','detectLiquidityChange()','\x20not\x20responding\x20(see:\x20hodlerhacks.com/fix/5)','LOCKED','event','replace','getPortfolio','running','/EUR','startdate','PAXG','watchTrades','fetchTickers()','orderstatus','timestamp-issue','uncaughtException','(((.+)+)+)+$','************','balancing\x20resumes\x20when\x20cooldown\x20ends','progress','./version.json','ccxt','reverse','/USD','API-key\x20format\x20invalid','status\x20code\x20401','1\x20-\x20FILLED\x20unknown\x20order:\x20','3103002fDFPXP','realizedPnL','sells','USD','\x20has\x20a\x2024h\x20drop\x20of\x20','Block\x20transaction\x20detection:\x20','sortBy','date-fns','1\x20-\x20Validate\x20orders:\x20','bid','timeshift','\x20orders\x20in\x20less\x20than\x20','storeHeadless','split','\x20API\x20secret\x20is\x20invalid','Valid\x20balance\x20for\x20','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','bot-','Cooldown\x20ended\x20-\x20balancing\x20resumed','showname','balancing\x20resumed','min','Portfolio\x20change\x20detected:\x20','pro','quote','set','loadMarkets','slice','2\x20-\x20handling\x20FILLED\x20order:\x20','fetchBalance()','date','Resuming\x20(','apiPassword','\x20not\x20available\x20(see:\x20hodlerhacks.com/fix/5)','average','existsSync','Generated\x20PnL\x20data','target','number','fee','entries','format','push','2.6.0','2.3.5','last','addDays','assign','orderId','change24h','parse','\x20(see:\x20hodlerhacks.com/fix/1)','38057lMxnlI','max','Test\x20new\x20API','watchTrades()','test','add','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','TUSD','\x20|\x20Custom\x20ID:\x20','coins','fiat','%\x20(','cancel','threshold','cancelLoading','InvalidNonce','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','\x20minutes\x20-\x20','-results.json','createOrder','getOpenOrders()','padStart','status','Invalid\x20balance\x20for\x20','Resetting\x20coin\x20results:\x20','recovery','5339530BSpTiH','Exception\x20thrown\x20in\x20',',\x20must\x20be\x20a\x203\x20digit\x20number','configuration-stored','testAPI()','constructor','timeout','No\x20more\x20open\x20orders\x20-\x20','\x20MB','isBefore','limit-low','\x20order:\x20','cost','logs','0\x20-\x20EXECUTION:\x20','excluded','privateKey','Portfolio\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','Exchange','testApi','fromCodePoint','exchange','InvalidOrder','createWriteStream','amountToPrecision','cloneDeep','\x20>\x20details:','UNLOCKED','emitHistory','\x20-\x20go\x20back\x20and\x20try\x20again','\x20blocked\x20API\x20(DDoSProtection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','keys','none','autoliquidity','indexOf','splice','Insufficient\x20funds\x20to\x20execute\x20order:\x20','complete','shift','Limit\x20(high-margin)','startnumber','removed','price','RSA-OAEP','***','Unknown\x20error:\x20','starting-balances','delta','\x20portfolio:</b>\x20\x0a\x0a','util','bots','/output-000.log','marketcapApi','pnl-basecoin','Market','offset','balances','2.6.22','1\x20-\x20Handle\x20open\x20orders','toLowerCase',':\x20Bot\x20','apply','sqrt','loading-canceled','\x20uses\x20','enabled','substring','\x20blocked\x20API\x20(RateLimitExceeded)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','Invalid\x20quantity'];_0x3eb6=function(){return _0x386a22;};return _0x3eb6();}settings[_0x874150(0x10a)]!=config[_0x874150(0x10a)]&&updateOnepagemode(settings['onepagemode']);(settings[_0x874150(0x1fe)]&&!config['marketcapApi']||!settings['marketcapApi']&&config[_0x874150(0x1fe)])&&updateMarketcapApi(settings[_0x874150(0x1fe)]);process[_0x874150(0x221)]({'started':_0x874150(0x168)},_0x1c9892=>{}),initializeProcessListeners();function proxyEmit(_0x4ffce5,_0x24dfc0=null){process['send']({'function':_0x4ffce5,'args':_0x24dfc0},_0x1a5157=>{});}function initializeProcessListeners(){process['on']('message',_0x5ce782=>{const _0x33a463=_0x1893;switch(Object['keys'](_0x5ce782)[0x0]){case _0x33a463(0x186):_0x5ce782[_0x33a463(0x186)]!=undefined&&(settings[_0x33a463(0x186)]=_0x5ce782[_0x33a463(0x186)],updateTimeshift(settings['timeshift']));break;case'onepagemode':_0x5ce782[_0x33a463(0x10a)]!=undefined&&(settings[_0x33a463(0x10a)]=_0x5ce782[_0x33a463(0x10a)],updateOnepagemode(settings[_0x33a463(0x10a)]));break;case _0x33a463(0x1fe):_0x5ce782[_0x33a463(0x1fe)]!=undefined&&(settings[_0x33a463(0x1fe)]=_0x5ce782[_0x33a463(0x1fe)],updateMarketcapApi(settings['marketcapApi']));break;case'bots':_0x5ce782['bots']!=undefined&&(bots=JSON[_0x33a463(0x1ae)](_0x5ce782['bots']),proxyEmit(_0x33a463(0x1fc),bots));break;case'function':switch(_0x5ce782[_0x33a463(0x82)]){case'initclient':initclient();break;case _0x33a463(0x76):toggleBotMode();break;case _0x33a463(0x1e6):emitHistory(_0x5ce782[_0x33a463(0xce)]);break;case _0x33a463(0xdf):deleteHistoryAlerts(_0x5ce782[_0x33a463(0xce)]);break;case _0x33a463(0x167):getPortfolio(_0x5ce782['args']);break;case _0x33a463(0xd7):storeConfiguration(_0x5ce782[_0x33a463(0xce)]);break;case _0x33a463(0x188):storeHeadless(_0x5ce782[_0x33a463(0xce)]);break;case'storeFiat':storeFiat(_0x5ce782['args']);break;case'resetHistory':resetHistory();break;case'getStartingBalances':getStartingBalances(getNormalizedPerformance());break;case'placeOrder':placeOrder(_0x5ce782[_0x33a463(0xce)]);break;case _0x33a463(0x1be):cancelLoading();break;case'showConfig':showConfig();break;case'sendMetricsTelegram':sendMetricsTelegram();break;case _0x33a463(0x152):sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x2976be=![]){const _0x59b1f2=_0x874150;logger[_0x59b1f2(0x21c)](_0x59b1f2(0x77)+(_0x2976be?'exchange\x20reload':_0x59b1f2(0x21e))+_0x59b1f2(0x114)+config[_0x59b1f2(0x1df)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x2976be)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x59b1f2(0xf8)]!=''&&config[_0x59b1f2(0xf8)]!='***'){loadingProgress=0x0;if(_0x2976be){await initExchange();const _0x132894=await testAPI();if(!_0x132894)return;await loadSymbols(),loadingProgress=0x1,setStableCoins(),proxyEmit(_0x59b1f2(0xc6),emittedConfiguration()),initialPerformanceStored=![];}const _0xafda55=await getCoins();[currentCoins,currentCoinsAll]=_0xafda55,setBlockTransactionDetection(![]),startScheduler(),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x59b1f2(0x21c)](_0x59b1f2(0x157)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x59b1f2(0x10c)]==0x0&&allOpenOrders[_0x59b1f2(0x10c)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(pnlGenerationNeeded)await generatePnL();}}async function resumeBot(_0x845987=![]){const _0x291112=_0x874150;logger[_0x291112(0x21c)](_0x291112(0x19b)+(_0x845987?_0x291112(0x137):_0x291112(0x1ef))+')\x20|\x20exchange:\x20'+config[_0x291112(0x1df)]);if(pidBalances)clearTimeout(pidBalances);if(_0x845987){getBalances();return;}coinsLoaded=![];if(config[_0x291112(0xf8)]!=''&&config[_0x291112(0xf8)]!=_0x291112(0x1f6)){loadingProgress=0x1;const _0x5e6179=await getCoins();[currentCoins,currentCoinsAll]=_0x5e6179,setBlockTransactionDetection(![]),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger['debug'](_0x291112(0x157)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x291112(0x10c)]==0x0&&allOpenOrders[_0x291112(0x10c)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();}}async function getMarketCap(_0x2912c1){const _0x3f87d6=_0x874150;let _0x59df33=![];if(_0x2912c1)_0x59df33=!![];const _0x441102=_0x59df33?_0x2912c1:currentCoins,_0xb6850=_0x441102['map'](_0xc5fe52=>_0xc5fe52[_0x3f87d6(0x15d)]);if(!config[_0x3f87d6(0x1fe)]||!_0x59df33&&!config[_0x3f87d6(0xb1)]||_0xb6850[_0x3f87d6(0x10c)]==0x0)return;let _0x57d38c=null;try{_0x57d38c=await axios[_0x3f87d6(0x13b)]('https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest',{'headers':{'X-CMC_PRO_API_KEY':settings[_0x3f87d6(0x1fe)]},'params':{'symbol':_0xb6850[_0x3f87d6(0xc1)]()}});}catch(_0xf517c9){_0x57d38c=null,_0xf517c9['toString']()[_0x3f87d6(0x110)](_0x3f87d6(0x17a))?(config[_0x3f87d6(0x1fe)]=![],updateConfig(),proxyEmit(_0x3f87d6(0xc6),emittedConfiguration()),logHistory(_0x3f87d6(0xc8),'CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager')):(logHistory(_0x3f87d6(0xc8),'CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20trying\x20again\x20in\x20'+schedulerInterval/(0x3c*0x3e8)+_0x3f87d6(0x145)),logger[_0x3f87d6(0x21c)]('Error\x20details:',_0xf517c9[_0x3f87d6(0xc1)]()+_0x3f87d6(0x158)+_0xf517c9[_0x3f87d6(0xab)]));}let _0x50ca20=!![];if(_0x57d38c){let _0x4301cf=0x0;const _0xdb64ff=_0x57d38c['data'];_0xb6850[_0x3f87d6(0x93)](_0x1cf0d6=>{const _0x3011f0=_0x3f87d6;if(_0xdb64ff[_0x3011f0(0x154)][_0x1cf0d6][0x0]&&_0xdb64ff['data'][_0x1cf0d6][0x0][_0x3011f0(0x194)][_0x3011f0(0x17f)][_0x3011f0(0x10e)])_0x4301cf+=_0xdb64ff['data'][_0x1cf0d6][0x0]['quote'][_0x3011f0(0x17f)][_0x3011f0(0x10e)];else{if(![_0x3011f0(0x7e),'USD'][_0x3011f0(0x110)](_0x1cf0d6)){if(_0x59df33)logHistory(_0x3011f0(0xc8),_0x3011f0(0x14d)+_0x1cf0d6+_0x3011f0(0x1e7));else{const _0x4fe995=config[_0x3011f0(0xdb)][_0x3011f0(0xb8)](_0x4b116c=>_0x4b116c[_0x3011f0(0x15d)]==_0x1cf0d6);_0x4fe995&&!_0x4fe995[_0x3011f0(0x1d9)]&&_0x4fe995[_0x3011f0(0x8f)]==-0x1&&(_0x50ca20=![],logHistory(_0x3011f0(0xc8),_0x3011f0(0x70)),logger[_0x3011f0(0x21c)](_0x3011f0(0x14d)+_0x1cf0d6));}}}});if(!_0x50ca20)return;_0xb6850[_0x3f87d6(0x93)](_0x1927db=>{const _0x1367bf=_0x3f87d6,_0xfbf2cb=_0xdb64ff[_0x1367bf(0x154)][_0x1927db][0x0]?_0xdb64ff[_0x1367bf(0x154)][_0x1927db][0x0][_0x1367bf(0x194)][_0x1367bf(0x17f)][_0x1367bf(0x10e)]:0x0;if(_0x59df33){const _0xc19877=_0x2912c1[_0x1367bf(0xb8)](_0x134a28=>_0x134a28['coin']==_0x1927db);_0xc19877&&(_0xc19877[_0x1367bf(0x78)]=_0xfbf2cb);}else{const _0x33e0b5=currentCoins[_0x1367bf(0xb8)](_0x8e0438=>_0x8e0438['coin']==_0x1927db);_0x33e0b5&&(_0x33e0b5[_0x1367bf(0x78)]=_0xfbf2cb);const _0x34f023=currentCoinsAll[_0x1367bf(0xb8)](_0x339786=>_0x339786[_0x1367bf(0x15d)]==_0x1927db);_0x34f023&&(_0x34f023[_0x1367bf(0x78)]=_0xfbf2cb);}}),!_0x59df33&&updateTargetDistribution();}}function updateTargetDistribution(){const _0x3ecbae=_0x874150,_0x4ced7c=0x2;let _0x27af94=0x0,_0x6fd2ea=0x0,_0x26b15c=0x0,_0x30e441=0x0,_0x271cb1=0x0;config['portfolio'][_0x3ecbae(0x93)](_0x33bd9d=>{const _0x57cd29=_0x3ecbae;if(!_0x33bd9d[_0x57cd29(0x1d9)]){_0x26b15c++,_0x27af94+=_0x33bd9d[_0x57cd29(0x8f)];if(_0x33bd9d['slider']===-0x1){_0x27af94++;const _0x309e62=currentCoinsAll[_0x57cd29(0xb8)](_0x38a288=>_0x38a288[_0x57cd29(0x15d)]==_0x33bd9d[_0x57cd29(0x15d)]);_0x309e62&&(_0x30e441+=_0x309e62[_0x57cd29(0x78)],_0x271cb1+=Math['sqrt'](_0x309e62[_0x57cd29(0x78)]));}if(_0x33bd9d[_0x57cd29(0x8f)]!==-0x1)_0x6fd2ea++;}});let _0x5c7f6f;const _0x5ac0fc=0x64-_0x27af94,_0x63bd07=_0x26b15c-_0x6fd2ea;_0x5c7f6f=_0x63bd07===0x0?_0x27af94:Math[_0x3ecbae(0x1b1)](0x64,_0x27af94),config[_0x3ecbae(0xdb)][_0x3ecbae(0x93)](_0x11ec19=>{const _0x26352d=_0x3ecbae,_0x4356c5=currentCoinsAll['find'](_0x478986=>_0x478986[_0x26352d(0x15d)]==_0x11ec19[_0x26352d(0x15d)]);_0x4356c5&&(_0x11ec19[_0x26352d(0x78)]=_0x4356c5['marketcap']);if(!_0x11ec19[_0x26352d(0x1d9)]){if(_0x5c7f6f<=0x64){if(_0x11ec19[_0x26352d(0x8f)]===-0x1){if(_0x30e441!==0x0&&config[_0x26352d(0xb1)]){if(_0x4356c5){if(config[_0x26352d(0xb1)]==_0x26352d(0x78))_0x11ec19[_0x26352d(0x94)]=(_0x5ac0fc/(_0x30e441/_0x4356c5[_0x26352d(0x78)]))['toFixed'](_0x4ced7c);else config['marketcapEnabled']=='marketcapsqrt'&&(_0x11ec19['distribution']=(_0x5ac0fc/(_0x271cb1/Math[_0x26352d(0x208)](_0x4356c5['marketcap'])))[_0x26352d(0xa4)](_0x4ced7c));}}}}}}),updateConfig();}function updateConfig(){const _0x1b52bd=_0x874150;let _0x476973=dbConfig['get'](_0x1b52bd(0xa8))[_0x1b52bd(0xb8)]({'botID':botID})[_0x1b52bd(0xfb)]();_0x476973&&dbConfig[_0x1b52bd(0x13b)](_0x1b52bd(0xa8))[_0x1b52bd(0xb8)]({'botID':botID})[_0x1b52bd(0x1ab)](config)['write']();}function logMemory(){const _0x195a5c=_0x874150;if(environment!='staging')return;const _0x4720e4=process['memoryUsage']()['heapUsed']/0x400/0x400;logger['debug'](_0x195a5c(0x144)+process[_0x195a5c(0x72)]+_0x195a5c(0x20a)+formatResult(_0x4720e4,0x1)+_0x195a5c(0x1d2));}async function startScheduler(){const _0x49264b=_0x874150,_0x3413fe=shiftedTime()[_0x49264b(0x22b)]();getMarketCap(),loadSymbols(),_0x3413fe==0x1&&logMemory(),await sleep(schedulerInterval),startScheduler();}async function restartBot(_0x1d0b35=![]){const _0x4c5cde=_0x874150;logger[_0x4c5cde(0x21c)]('Initiating\x20bot\x20restart');if(!_0x1d0b35)while(lockOrders!=ORDERS['UNLOCKED']||coolingDown){await sleep(0x3e8);}process['send']({'stop':_0x4c5cde(0x12d)},_0x18880d=>{});}async function initExchange(_0x348647=config[_0x874150(0x1df)],_0x533842=config['apiKey'],_0x59e04d=config[_0x874150(0x8d)],_0x33a5e6=config[_0x874150(0x19c)],_0x76d48e=config['sandbox']){const _0x13e76c=_0x874150;if(exchange){logger[_0x13e76c(0x21c)](_0x13e76c(0xe7));return;}logger[_0x13e76c(0x21c)](_0x13e76c(0x99));!supportedExchanges()[_0x13e76c(0x110)](_0x348647)&&(logHistory(_0x13e76c(0xc8),'Balance\x20Bot\x20does\x20not\x20support\x20the\x20'+_0x348647+'\x20exchange'),killBot());const _0x18f38e=ccxt[_0x13e76c(0x193)][_0x348647['toLowerCase']()];exchange=new _0x18f38e({'apiKey':_0x533842,'secret':_0x59e04d,'options':{'defaultType':'spot'}});if(_0x33a5e6)exchange[_0x13e76c(0x133)]=_0x33a5e6;if(exchange['has'][_0x13e76c(0x124)])exchange[_0x13e76c(0x9e)](_0x76d48e);}function updateExchange(_0x385bf4,_0x3ce2bb,_0xc15923=null){const _0x58dc87=_0x874150;exchange['apiKey']=_0x385bf4,exchange['secret']=_0x3ce2bb,exchange[_0x58dc87(0x133)]=_0xc15923,logger[_0x58dc87(0x21c)](_0x58dc87(0x90));}function setStableCoins(){const _0x1099d0=_0x874150;let _0x572dc6=config[_0x1099d0(0x217)]==_0x1099d0(0x222)?'ETH':config['basecoin']=='PAXG'?_0x1099d0(0x16b):_0x1099d0(0xbe),_0x41c675=allSymbols['includes'](_0x572dc6+_0x1099d0(0x178))?'USD':allSymbols['includes'](_0x572dc6+'/USDT')?'USDT':_0x1099d0(0x7e),_0x305e0f=allSymbols[_0x1099d0(0x110)](_0x572dc6+_0x1099d0(0x169))?'EUR':_0x41c675;enableFiatToggle=!![],_0x41c675==_0x1099d0(0x7e)&&(enableFiatToggle=![],storeFiat(_0x1099d0(0x7e))),_0x305e0f!=_0x1099d0(0x7e)&&(enableFiatToggle=![],storeFiat(_0x1099d0(0x17f))),stablecoins={'eur':{'coin':''+_0x572dc6+_0x305e0f,'symbol':_0x572dc6+'/'+_0x305e0f},'usd':{'coin':''+_0x572dc6+_0x41c675,'symbol':_0x572dc6+'/'+_0x41c675}};}async function initwsCcxt(){const _0x3c5666=_0x874150;initCycle++;const _0x1d9d0f=initCycle;let _0x14ee7d=[];config['portfolio'][_0x3c5666(0x93)](_0x30ef9a=>{const _0x1ec7d5=_0x3c5666;if(!_0x30ef9a[_0x1ec7d5(0x1d9)]&&_0x30ef9a['coin']!=config['basecoin'])_0x14ee7d[_0x1ec7d5(0x1a6)](_0x30ef9a[_0x1ec7d5(0xb9)]);});if(!_0x14ee7d[_0x3c5666(0x110)](stablecoins[_0x3c5666(0x22d)][_0x3c5666(0xb9)]))_0x14ee7d['push'](stablecoins[_0x3c5666(0x22d)][_0x3c5666(0xb9)]);if(!_0x14ee7d[_0x3c5666(0x110)](stablecoins['usd']['symbol']))_0x14ee7d[_0x3c5666(0x1a6)](stablecoins[_0x3c5666(0x146)][_0x3c5666(0xb9)]);loadCoins(_0x14ee7d),_0x14ee7d=validateSymbols(_0x14ee7d);const _0x75f04c=async _0x18e41d=>{const _0x226851=_0x3c5666;let _0x461ecc;try{const _0x2245d7=await getTickers(_0x18e41d);Object[_0x226851(0x1a4)](_0x2245d7)[_0x226851(0x93)](_0x6f598e=>{const _0x59840d=_0x226851;_0x461ecc=_0x6f598e[0x1][_0x59840d(0xb9)],gTicker[noslash(_0x461ecc)]=_0x6f598e[0x1][_0x59840d(0x1a9)],gChange[_0x461ecc]=_0x6f598e[0x1][_0x59840d(0x11f)];});}catch(_0xcdf049){await handleError(_0xcdf049,_0x226851(0xcb),_0x461ecc);}},_0x4515c1=async _0xf1b775=>{const _0x3dc8a6=_0x3c5666;while(initCycle==_0x1d9d0f){if(!botPaused)try{const _0x1cf87f=await exchange[_0x3dc8a6(0x16c)](_0xf1b775);gTicker[noslash(_0x1cf87f[0x0][_0x3dc8a6(0xb9)])]=_0x1cf87f[0x0][_0x3dc8a6(0x1f4)];}catch(_0x45e495){if(!exchangeStopped)await handleError(_0x45e495,_0x3dc8a6(0x1b3),_0xf1b775);}else await sleep(0x64);}},_0x1bbaac=async _0x308925=>{const _0x536509=_0x3c5666;while(initCycle==_0x1d9d0f){if(!botPaused)try{const _0x419a7c=await exchange[_0x536509(0x6f)](_0x308925),_0x2c4bb4=_0x419a7c[_0x536509(0x105)]();gTicker[noslash(_0x2c4bb4[_0x536509(0xb9)])]=_0x2c4bb4[_0x536509(0x1f4)];}catch(_0x1a1489){if(!exchangeStopped)await handleError(_0x1a1489,_0x536509(0x220),_0x308925[_0x536509(0xc1)]());}else await sleep(0x64);}},_0x38bb2b=async _0x5a0d00=>{const _0x59a705=_0x3c5666;while(initCycle==_0x1d9d0f){if(!botPaused){let _0x23c20c;try{await sleep(0x3c*0x3e8);const _0x4dbaa1=await getTickers(_0x5a0d00);Object[_0x59a705(0x1a4)](_0x4dbaa1)[_0x59a705(0x93)](_0x6dce07=>{const _0x8af81e=_0x59a705;_0x23c20c=_0x6dce07[0x1][_0x8af81e(0xb9)],gChange[_0x23c20c]=_0x6dce07[0x1][_0x8af81e(0x11f)];});}catch(_0xb246ea){if(!exchangeStopped)await handleError(_0xb246ea,_0x59a705(0x16d),_0x23c20c);}}else await sleep(0x64);}},_0x5ac0f1=async _0x2aa83a=>{const _0xaf09e1=_0x3c5666;while(initCycle==_0x1d9d0f){if(!botPaused)try{const _0x3d7601=await exchange[_0xaf09e1(0xf4)](_0x2aa83a);initCycle==_0x1d9d0f&&_0x3d7601['forEach'](_0x4b4b79=>{updateNumberCoinsCcxt(_0x4b4b79);});}catch(_0x1b81bc){if(!exchangeStopped)await handleError(_0x1b81bc,_0xaf09e1(0x13d));}else await sleep(0x64);}};_0x75f04c(_0x14ee7d),_0x38bb2b(_0x14ee7d),exchange[_0x3c5666(0x138)][_0x3c5666(0x6f)]&&!(config['exchange']=='Bybit'&&_0x14ee7d['length']>0xa)?_0x1bbaac(_0x14ee7d):_0x14ee7d[_0x3c5666(0x93)](_0x319692=>{_0x4515c1(_0x319692);}),_0x14ee7d[_0x3c5666(0x93)](_0x2e46ec=>{_0x5ac0f1(_0x2e46ec);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x14693c){const _0x3c4b59=_0x874150;let _0x59a790={};try{if(config[_0x3c4b59(0x1df)]!='Cryptocom')_0x59a790=await exchange['fetchTickers'](_0x14693c);else for(const _0x46ee67 of _0x14693c){const _0x6f4a58=await exchange[_0x3c4b59(0x11d)](_0x46ee67);_0x59a790[_0x46ee67]=_0x6f4a58;}return _0x59a790;}catch(_0x2efb8d){throw _0x2efb8d;}}function setBlockTransactionDetection(_0x5058bd){const _0x59c650=_0x874150;blockTransactionDetection=_0x5058bd,logger[_0x59c650(0x21c)](_0x59c650(0x181)+blockTransactionDetection);}async function detectLiquidityChange(_0x5d9f5f=0x0){const _0xa953cd=_0x874150;transactionDetectionOngoing=!![];try{const _0x4dba6b=await getCoins(_0x5d9f5f),[_0x41c24c,_0x24d2a9]=_0x4dba6b;let _0x5aa4c6=[];currentCoins[_0xa953cd(0x93)](_0x235663=>{const _0x4a2228=_0xa953cd,_0x4b648d=_0x41c24c[_0x4a2228(0xb8)](_0x496267=>_0x496267[_0x4a2228(0x15d)]==_0x235663[_0x4a2228(0x15d)]);if(_0x4b648d){if(_0x235663[_0x4a2228(0x1a2)]!=_0x4b648d[_0x4a2228(0x1a2)]){let _0x30ba0e;if(_0x235663[_0x4a2228(0x15d)]!=config[_0x4a2228(0x217)]){const _0x440b25=gTicker[noslash(_0x235663[_0x4a2228(0xb9)])];_0x30ba0e=_0x235663['reverse']?0x1/_0x440b25:_0x440b25;}else _0x30ba0e=0x1;_0x5aa4c6[_0x4a2228(0x1a6)]({'coin':_0x235663[_0x4a2228(0x15d)],'symbol':_0x235663[_0x4a2228(0xb9)],'price':_0x30ba0e,'number':Number(formatResult(_0x4b648d[_0x4a2228(0x1a2)]-_0x235663['number'],0x8)),'basecoinvalue':_0x30ba0e*(_0x4b648d['number']-_0x235663[_0x4a2228(0x1a2)])});}}});if(_0x5aa4c6[_0xa953cd(0x10c)]>0x0&&!blockTransactionDetection){for(const _0xf2bc0c of _0x5aa4c6){if(config['autoliquidity']){logger[_0xa953cd(0x21c)]('Liquidity\x20change\x20|\x20basecoin\x20value:\x20'+_0xf2bc0c['basecoinvalue']+'\x20|\x20highest\x20fee:\x20'+lastFees[_0xa953cd(0x13f)]);if(lastFees[_0xa953cd(0x13f)]==0x0||Math[_0xa953cd(0xcc)](_0xf2bc0c[_0xa953cd(0x11e)])>lastFees[_0xa953cd(0x13f)]*0x3){if(config[_0xa953cd(0x1eb)]=='update-liquidity'){delete _0xf2bc0c[_0xa953cd(0xb9)],delete _0xf2bc0c[_0xa953cd(0x11e)];let _0x65e99d=[],_0x17cac3=[...config[_0xa953cd(0xef)]]||[],_0x36cf4c=config['liquidity'];_0x17cac3['sort']((_0x56fbcf,_0x3b7fda)=>_0x56fbcf[_0xa953cd(0x19a)]>_0x3b7fda[_0xa953cd(0x19a)]?-0x1:_0x3b7fda[_0xa953cd(0x19a)]>_0x56fbcf[_0xa953cd(0x19a)]?0x1:0x0);const _0x4f70ec=getDate();if(_0x17cac3[0x0]){const _0x90ea5=fns[_0xa953cd(0x1ae)](_0x17cac3[0x0][_0xa953cd(0x19a)],_0xa953cd(0x7c),new Date()),_0x1eae9e=fns[_0xa953cd(0x1ae)](_0x4f70ec,_0xa953cd(0x7c),new Date());if(fns[_0xa953cd(0x14a)](_0x90ea5,_0x1eae9e)){_0x65e99d=_0x17cac3[0x0][_0xa953cd(0x96)];const _0x61aeb4=_0x65e99d[_0xa953cd(0xb8)](_0x3bc7eb=>_0x3bc7eb[_0xa953cd(0x15d)]==_0xf2bc0c[_0xa953cd(0x15d)]);_0x61aeb4?(_0x61aeb4[_0xa953cd(0x1a2)]+=_0xf2bc0c[_0xa953cd(0x1a2)],_0x61aeb4[_0xa953cd(0x1a2)]==0x0&&(_0x65e99d=_0x65e99d['filter'](_0x3b37fb=>{const _0x482abc=_0xa953cd;return _0x3b37fb['coin']!=_0xf2bc0c[_0x482abc(0x15d)];}))):_0x65e99d['push'](_0xf2bc0c);const _0x47f85c=_0x36cf4c[_0xa953cd(0xb8)](_0x4e5d0f=>_0x4e5d0f[_0xa953cd(0x19a)]==_0x4f70ec);_0x47f85c['changes']=_0x65e99d;}else _0x36cf4c[_0xa953cd(0x1a6)]({'date':_0x4f70ec,'changes':[_0xf2bc0c]});}const _0xa85be=_0x36cf4c[_0xa953cd(0xb8)](_0x49981f=>_0x49981f[_0xa953cd(0x19a)]==_0x4f70ec);if(_0xa85be){let _0x24985d=!![];_0xa85be[_0xa953cd(0x96)][_0xa953cd(0x93)](_0x3f0ca6=>{const _0x401397=_0xa953cd;if(_0x3f0ca6[_0x401397(0x1a2)]!=0x0)_0x24985d=![];}),_0x24985d&&(_0x36cf4c=_0x36cf4c[_0xa953cd(0xd6)](_0x3d222d=>{const _0xf9f6b3=_0xa953cd;return _0x3d222d[_0xf9f6b3(0x19a)]!=_0x4f70ec;}));}let _0x175342=dbConfig['get'](_0xa953cd(0xa8))['find']({'botID':botID})[_0xa953cd(0xfb)]();_0x175342&&(dbConfig[_0xa953cd(0x13b)](_0xa953cd(0xa8))[_0xa953cd(0xb8)]({'botID':botID})['assign']({'liquidity':_0x36cf4c})[_0xa953cd(0x85)](),config[_0xa953cd(0xef)]=_0x36cf4c);logHistory('success',_0xa953cd(0x192)+Math[_0xa953cd(0xcc)](_0xf2bc0c['number'])+'\x20'+_0xf2bc0c[_0xa953cd(0x15d)]+'\x20'+(_0xf2bc0c[_0xa953cd(0x1a2)]>0x0?_0xa953cd(0x224):_0xa953cd(0x1f3))+_0xa953cd(0xa0)),proxyEmit(_0xa953cd(0xc6),emittedConfiguration());const _0x5bbe9b=getNormalizedPerformance();emitPerformance(_0x5bbe9b),getStartingBalances(_0x5bbe9b),logger['debug'](_0xa953cd(0x1db));}else config['autoliquidity']=='switch-manual'&&(config[_0xa953cd(0x75)]?(await storeHeadless({'headless':![]}),logHistory(_0xa953cd(0x211),'Portfolio\x20change\x20detected:\x20'+Math['abs'](_0xf2bc0c[_0xa953cd(0x1a2)])+'\x20'+_0xf2bc0c[_0xa953cd(0x15d)]+'\x20'+(_0xf2bc0c['number']>0x0?_0xa953cd(0x224):_0xa953cd(0x1f3))+_0xa953cd(0x127))):logger[_0xa953cd(0x21c)](_0xa953cd(0x192)+Math[_0xa953cd(0xcc)](_0xf2bc0c['number'])+'\x20'+_0xf2bc0c[_0xa953cd(0x15d)]+'\x20'+(_0xf2bc0c[_0xa953cd(0x1a2)]>0x0?_0xa953cd(0x224):_0xa953cd(0x1f3))+_0xa953cd(0x12b)));}else logger['debug'](_0xa953cd(0x235)+Math['abs'](_0xf2bc0c[_0xa953cd(0x1a2)])+'\x20'+_0xf2bc0c[_0xa953cd(0x15d)]+'\x20'+(_0xf2bc0c[_0xa953cd(0x1a2)]>0x0?_0xa953cd(0x224):_0xa953cd(0x1f3)));}else logger[_0xa953cd(0x21c)](_0xa953cd(0x192)+Math[_0xa953cd(0xcc)](_0xf2bc0c[_0xa953cd(0x1a2)])+'\x20'+_0xf2bc0c[_0xa953cd(0x15d)]+'\x20'+(_0xf2bc0c['number']>0x0?_0xa953cd(0x224):_0xa953cd(0x1f3))+_0xa953cd(0x101));}currentCoins=_0x41c24c,currentCoinsAll=_0x24d2a9;}}catch(_0x35c6d2){if(!exchangeStopped)await handleError(_0x35c6d2,_0xa953cd(0x162));}transactionDetectionOngoing=![];}async function watchTransactions(){await sleep(0x14*0x3e8);while(!![]){!botPaused&&!blockTransactionDetection&&coinsLoaded?(detectLiquidityChange(),await sleep(watchTransactionsInterval)):await sleep(0x3e8);}}async function loadSymbols(){const _0x2d8bdb=_0x874150;try{markets=await exchange[_0x2d8bdb(0x196)](!![]),allSymbols=[],Object[_0x2d8bdb(0x1a4)](markets)[_0x2d8bdb(0x93)](_0x4d3ee1=>{const _0x8f859a=_0x2d8bdb;_0x4d3ee1[0x1]['active']&&_0x4d3ee1[0x1]['spot']&&allSymbols[_0x8f859a(0x1a6)](_0x4d3ee1[0x0]);});}catch(_0x111e29){markets?logger[_0x2d8bdb(0x21c)](_0x2d8bdb(0x219)+_0x111e29[_0x2d8bdb(0xc1)]()):(loading['cancel']=!![],_0x111e29[_0x2d8bdb(0xc1)]()['toLowerCase']()[_0x2d8bdb(0x110)](_0x2d8bdb(0x218))||_0x111e29[_0x2d8bdb(0xc1)]()['toLowerCase']()[_0x2d8bdb(0x110)](_0x2d8bdb(0x233))?(logHistory(_0x2d8bdb(0xc8),'Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)'),loading['error']='timestamp-issue'):handleErrorNoStop(_0x111e29,_0x2d8bdb(0x140),!![]),logHistory(_0x2d8bdb(0xc8),_0x2d8bdb(0xca)),logHistory('error',_0x2d8bdb(0xd3)+loadCoinsRetryInterval/0xea60+_0x2d8bdb(0xe8)),logger['debug'](_0x2d8bdb(0xbf),_0x111e29),emitLoadingProgress(),botPaused=!![],await sleep(loadCoinsRetryInterval),restartBot());}}function validateSymbols(_0x20665e){const _0x5b6009=_0x874150;let _0x29853c=[];return _0x20665e[_0x5b6009(0x93)](_0x2009bd=>{const _0x17befe=_0x5b6009;!allSymbols[_0x17befe(0x110)](_0x2009bd)?(logHistory('error','Invalid\x20symbol:\x20'+_0x2009bd+_0x17befe(0x125)),loading[_0x17befe(0x1d0)]=!![],emitLoadingProgress()):_0x29853c[_0x17befe(0x1a6)](_0x2009bd);}),_0x29853c;}async function initclient(){const _0x50cdea=_0x874150;proxyEmit('configuration',emittedConfiguration()),proxyEmit(_0x50cdea(0x6b),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x50cdea(0x202),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x3e2f9b=getNormalizedPerformance();emitPerformance(_0x3e2f9b),getStartingBalances(_0x3e2f9b);}async function toggleBotMode(){const _0x6c8e2a=_0x874150;let _0x261323=dbConfig['get'](_0x6c8e2a(0xa8))[_0x6c8e2a(0xb8)]({'botID':botID})[_0x6c8e2a(0xfb)]();if(_0x261323){const _0xd50280=!_0x261323[_0x6c8e2a(0x75)];dbConfig[_0x6c8e2a(0x13b)]('bot')[_0x6c8e2a(0xb8)]({'botID':botID})['assign']({'headless':_0xd50280})[_0x6c8e2a(0x85)](),config[_0x6c8e2a(0x75)]=_0xd50280,proxyEmit(_0x6c8e2a(0xc6),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x2dea3b=_0x874150;process[_0x2dea3b(0x221)]({'updatebotmanager':!![]},_0x484e25=>{}),logger[_0x2dea3b(0x21c)](_0x2dea3b(0xac)+config[_0x2dea3b(0x75)]);}async function loadCoins(_0x2f943d){const _0x4f801f=_0x874150;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x1f2c99,_0x4fc835=0x0,_0x3c9875=0x0;_0x2f943d[_0x4f801f(0x93)](_0x140eff=>{loading['remainingSymbols']['push'](_0x140eff);}),loadingCanceled=![];let _0x1d332c=![];while(_0x1f2c99!=_0x2f943d[_0x4f801f(0x10c)]+maxLoadingProgress){_0x1f2c99=loadingProgress,_0x2f943d['forEach'](_0x40dbf9=>{const _0x4fd841=_0x4f801f;if(gTicker[noslash(_0x40dbf9)]){loading['remainingSymbols']=loading[_0x4fd841(0xfa)][_0x4fd841(0xd6)](_0x4cab04=>_0x4cab04!=_0x40dbf9);if(!watchedSymbols[_0x4fd841(0x110)](_0x40dbf9))watchedSymbols[_0x4fd841(0x1a6)](_0x40dbf9);_0x1f2c99++;}}),loading[_0x4f801f(0x174)]=Math['round'](_0x1f2c99/(_0x2f943d[_0x4f801f(0x10c)]+maxLoadingProgress)*0x64);loading[_0x4f801f(0x174)]!=0x64&&(_0x3c9875>0x1e*0x5&&(loading[_0x4f801f(0x1d0)]=!![],emitLoadingProgress()),_0x3c9875>0x78*0x5&&!_0x1d332c&&(_0x1d332c=!![],logHistory(_0x4f801f(0xc8),_0x4f801f(0xfd)+loading[_0x4f801f(0xfa)][_0x4f801f(0x234)](',\x20')+_0x4f801f(0x22c)),logHistory(_0x4f801f(0xc8),'Pausing\x20for\x20'+loadCoinsRetryInterval/0xea60+_0x4f801f(0xe8)),loadingCanceled=!![],await sleep(loadCoinsRetryInterval),restartBot()));if(loadingCanceled){loading['cancel']=!![],emitLoadingProgress();break;}else _0x4fc835!=loading[_0x4f801f(0x174)]&&(_0x4fc835=loading[_0x4f801f(0x174)],emitLoadingProgress()),_0x3c9875++,await sleep(0xc8);}_0x1f2c99==_0x2f943d[_0x4f801f(0x10c)]+maxLoadingProgress&&(coinsLoaded=!![],process[_0x4f801f(0x221)]({'status':_0x4f801f(0x20b),'live':_0x4f801f(0x168)},_0x499e65=>{}),_0x1d332c&&logHistory('success',_0x4f801f(0x1b6)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x3bf65a=_0x874150;proxyEmit('configuration',{...emittedConfiguration(),'configstate':_0x3bf65a(0x209)});}function emitLoadingProgress(){const _0x360500=_0x874150;proxyEmit(_0x360500(0x111),loading);}async function getFiat(){const _0x509203=_0x874150;let _0x36ebbd=gTicker[stablecoins[_0x509203(0x22d)][_0x509203(0x15d)]],_0x3b1109=gTicker[stablecoins[_0x509203(0x146)]['coin']];return{'eur':Number(_0x36ebbd),'usd':Number(_0x3b1109)};}function capitalize(_0x288f32){const _0x133461=_0x874150;return _0x288f32[_0x133461(0x20c)](0x0,0x1)['toUpperCase']()+_0x288f32['substring'](0x1);}function supportedExchanges(){const _0x5604ef=_0x874150,_0xa0178c=['ws','fetchTickers',_0x5604ef(0x11d),_0x5604ef(0x16c),_0x5604ef(0xf4),_0x5604ef(0x142),_0x5604ef(0x1c3),_0x5604ef(0xae),_0x5604ef(0x12c)];let _0x473748=[],_0x4e4c8b=[],_0x55ad71=ccxt[_0x5604ef(0x193)]['exchanges'];_0x55ad71[_0x5604ef(0x93)](_0x5ca2ac=>{const _0xcd4f9a=_0x5604ef;try{const _0x3f3f31=new ccxt['pro'][_0x5ca2ac]();_0x4e4c8b[_0xcd4f9a(0x1a6)](_0x3f3f31);}catch(_0x2c9e1e){}}),_0x4e4c8b['forEach'](_0x1f39ed=>{const _0x31e88e=_0x5604ef;let _0x3327d9=0x0;_0xa0178c['forEach'](_0x1fe2f1=>{const _0x3fd082=_0x1893;_0x1fe2f1 in _0x1f39ed[_0x3fd082(0x138)]&&_0x1f39ed['has'][_0x1fe2f1]&&_0x3327d9++;}),_0x3327d9==_0xa0178c[_0x31e88e(0x10c)]&&(!excludedExchanges[_0x31e88e(0x110)](_0x1f39ed['id'])&&_0x473748['push'](capitalize(_0x1f39ed['id'])));});let _0x5539b2=[];return _0x55ad71[_0x5604ef(0x93)](_0xf605ae=>{const _0x38aa64=_0x5604ef;_0xf605ae=capitalize(_0xf605ae);if(!_0x473748[_0x38aa64(0x110)](_0xf605ae))_0x5539b2[_0x38aa64(0x1a6)](_0xf605ae);}),_0x473748;}function setStartDatePerformance(){const _0xee6653=_0x874150;if(config&&config['liquidity'][0x0]['changes'][_0xee6653(0x10c)]!=0x0){const _0x5f28cc=config[_0xee6653(0xef)][0x0]['changes'];dbPerformance[_0xee6653(0x13b)](_0xee6653(0x154))[_0xee6653(0xb8)]({'date':config['startdate']})[_0xee6653(0x1ab)]({'coins':_0x5f28cc})[_0xee6653(0x85)]();}}function calculatePnL(_0x37d98f,_0x321cc1,_0x2bc87d,_0x265900,_0xd70d58,_0x2a5810){const _0x4545bd=_0x874150;!_0x37d98f[_0x4545bd(0x110)]('/'+config[_0x4545bd(0x217)])&&(_0x2bc87d=_0x2bc87d==_0x4545bd(0x212)?_0x4545bd(0xf1):_0x4545bd(0x212));!_0x2a5810[_0x321cc1]&&(_0x2a5810[_0x321cc1]={'number':0x0,'sells':0x0,'buys':0x0,'breakeven':0x0,'realizedPnL':0x0});let _0xdd6293=0x0,_0x271fe6,_0x19afce;if(_0x2bc87d==_0x4545bd(0x212))_0x19afce=_0x2a5810[_0x321cc1][_0x4545bd(0x1a2)]*_0x2a5810[_0x321cc1][_0x4545bd(0x91)]+_0xd70d58*_0x265900,_0x2a5810[_0x321cc1][_0x4545bd(0x1a2)]+=_0x265900,_0x2a5810[_0x321cc1][_0x4545bd(0x91)]=_0x2a5810[_0x321cc1][_0x4545bd(0x1a2)]!=0x0?_0x19afce/_0x2a5810[_0x321cc1][_0x4545bd(0x1a2)]:0x0,_0x2a5810[_0x321cc1][_0x4545bd(0x151)]++;else _0x2bc87d==_0x4545bd(0xf1)&&(_0x271fe6=Math[_0x4545bd(0x191)](_0x2a5810[_0x321cc1][_0x4545bd(0x1a2)],_0x265900),_0xdd6293=(_0xd70d58-_0x2a5810[_0x321cc1][_0x4545bd(0x91)])*_0x271fe6,_0x19afce=Math[_0x4545bd(0x1b1)](_0x2a5810[_0x321cc1][_0x4545bd(0x1a2)]*_0x2a5810[_0x321cc1][_0x4545bd(0x91)]-_0x271fe6*_0x2a5810[_0x321cc1][_0x4545bd(0x91)],0x0),_0x2a5810[_0x321cc1][_0x4545bd(0x1a2)]-=_0x271fe6,_0x2a5810[_0x321cc1][_0x4545bd(0x91)]=_0x2a5810[_0x321cc1][_0x4545bd(0x1a2)]!=0x0?_0x19afce/_0x2a5810[_0x321cc1][_0x4545bd(0x1a2)]:0x0,_0x2a5810[_0x321cc1][_0x4545bd(0x17d)]+=_0xdd6293,_0x2a5810[_0x321cc1][_0x4545bd(0x17e)]++);return _0xdd6293;}async function generatePnL(){const _0x432d7d=_0x874150;pnlGenerationNeeded=![],logger[_0x432d7d(0x21c)](_0x432d7d(0xe1));const _0x3829a3=dbLogs[_0x432d7d(0x13b)]('logs')[_0x432d7d(0xfb)]();let _0x4841c4={},_0x7d24ed=0x0,_0x2a8277=0x0,_0x21a0df=config[_0x432d7d(0x16a)];const _0x3cc6b0=fns[_0x432d7d(0x1ae)](_0x21a0df,_0x432d7d(0x7c),new Date()),_0x302dac=new Date();let _0x3d0df0=0x0;for(let _0x4fdcde=_0x3cc6b0;!fns[_0x432d7d(0x1d3)](_0x302dac,_0x4fdcde);_0x4fdcde=fns[_0x432d7d(0x1aa)](_0x4fdcde,0x1)){const _0x299a04=fns[_0x432d7d(0x1a5)](_0x4fdcde,'yyyy/MM/dd');while(_0x7d24ed<_0x3829a3[_0x432d7d(0x10c)]){const _0x330f79=new Date(_0x3829a3[_0x7d24ed][_0x432d7d(0x215)]);if(fns[_0x432d7d(0x1d3)](_0x330f79,_0x4fdcde))_0x7d24ed++;else{if(_0x3829a3[_0x7d24ed][_0x432d7d(0x215)][_0x432d7d(0x110)](_0x299a04)){const _0x27cddf=_0x3829a3[_0x7d24ed];if(_0x27cddf['type']===_0x432d7d(0x150)&&(_0x27cddf[_0x432d7d(0x165)]['includes'](_0x432d7d(0x121))||_0x27cddf[_0x432d7d(0x165)]['includes'](_0x432d7d(0x134)))){const _0x3a57c2=_0x27cddf[_0x432d7d(0x165)][_0x432d7d(0x141)](/([A-Z]+\/[A-Z]+) (sell|buy) #([\d.]+) @([\d.]+)/);if(_0x3a57c2){const [,_0x314e0c,_0x36a60a,_0x286ba6,_0x16276d]=_0x3a57c2,_0x13a22f=_0x314e0c[_0x432d7d(0x110)]('/'+config['basecoin'])?_0x314e0c[_0x432d7d(0x189)]('/')[0x0]:_0x314e0c[_0x432d7d(0x189)]('/')[0x1],_0x13ee2f=calculatePnL(_0x314e0c,_0x13a22f,_0x36a60a,parseFloat(_0x286ba6),parseFloat(_0x16276d),_0x4841c4);_0x2a8277+=_0x13ee2f;}}_0x7d24ed++;}else break;}}dbPerformance['get']('data')[_0x432d7d(0xb8)]({'date':_0x299a04})[_0x432d7d(0x1ab)]({'pnl':_0x2a8277})['write']();}dbCoinResults[_0x432d7d(0x195)](_0x432d7d(0x1b9),_0x4841c4)[_0x432d7d(0x85)](),logger[_0x432d7d(0x21c)](_0x432d7d(0x1a0));const _0x19e408=getNormalizedPerformance();emitPerformance(_0x19e408);}async function updatePnL(_0x13bbd8){const _0x68ba74=_0x874150,{symbol:_0x4f4fd4,coin:_0x246f89,amount:_0x3b6b77,price:_0x2d2870,side:_0x40ef0f,reverse:_0x1547aa}=_0x13bbd8;let _0x24dcc7=dbCoinResults[_0x68ba74(0x13b)](_0x68ba74(0x1b9))[_0x68ba74(0xfb)]();const _0x3a3425=calculatePnL(_0x4f4fd4,_0x246f89,_0x40ef0f,_0x3b6b77,_0x2d2870,_0x24dcc7);dbCoinResults[_0x68ba74(0x195)](_0x68ba74(0x1b9),_0x24dcc7)['write']();const _0x4daa18=getTimeStamp()['split']('\x20')[0x0];let _0x3a4149=dbPerformance[_0x68ba74(0x13b)]('data')[_0x68ba74(0xb8)]({'date':_0x4daa18})[_0x68ba74(0xfb)]();_0x3a4149?(_0x3a4149[_0x68ba74(0x226)]+=_0x3a3425,dbPerformance[_0x68ba74(0x13b)]('data')[_0x68ba74(0xb8)]({'date':_0x4daa18})[_0x68ba74(0x1ab)](_0x3a4149)[_0x68ba74(0x85)]()):await storePerformance();const _0x40f4e8=getNormalizedPerformance();emitPerformance(_0x40f4e8);}async function validate24hChanges(){const _0x50c2b0=_0x874150;for(const _0x444a20 of currentCoins){if(_0x444a20[_0x50c2b0(0x15d)]!=config[_0x50c2b0(0x217)]){let _0x1fe68e;_0x444a20[_0x50c2b0(0x177)]?_0x1fe68e=formatResult((0x1/(gChange[_0x444a20['symbol']]/0x64+0x1)-0x1)*0x64,0x3):_0x1fe68e=gChange[_0x444a20[_0x50c2b0(0xb9)]],_0x1fe68e<config[_0x50c2b0(0x1ad)]&&(logHistory(_0x50c2b0(0xc8),_0x444a20[_0x50c2b0(0x15d)]+_0x50c2b0(0x180)+_0x1fe68e+'%'),logHistory(_0x50c2b0(0xc8),_0x50c2b0(0x73)),logHistory('error',_0x50c2b0(0x80)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x182138,_0x5f1b8c){const _0x15df20=_0x874150;if(!_0x182138)return!![];const _0x41b3a8=_0x5f1b8c[_0x15df20(0x189)]('.'),_0x4205be=_0x182138['split']('.');for(var _0x10386a=0x0;_0x10386a<_0x4205be['length'];_0x10386a++){const _0x2128d6=~~_0x4205be[_0x10386a],_0x461efd=~~_0x41b3a8[_0x10386a];if(_0x2128d6<_0x461efd)return!![];if(_0x2128d6>_0x461efd)return![];}return![];}async function oneTimeMigration(){const _0x45f991=_0x874150;let _0x37bbe4=dbLogs[_0x45f991(0x13b)](_0x45f991(0xea))[_0x45f991(0xfb)]();if(isOlderVersion(_0x37bbe4,_0x45f991(0x1a8))){let _0x37126f=[];const _0x39172b=dbLogs['get'](_0x45f991(0x1d7))['value']();_0x39172b[_0x45f991(0x93)](_0x38a9c2=>{const _0x2f1e6e=_0x45f991;_0x37126f['push']({'time':_0x38a9c2['time'],'type':_0x38a9c2[_0x2f1e6e(0x231)],'event':_0x38a9c2[_0x2f1e6e(0x165)]});}),dbLogs['get'](_0x45f991(0x1d7))['assign'](_0x37126f)[_0x45f991(0x85)]();}let _0x54ff1d=dbConfig[_0x45f991(0x13b)](_0x45f991(0xea))[_0x45f991(0xfb)]();if(isOlderVersion(_0x54ff1d,_0x45f991(0x1a8))){let _0x3fa213=dbConfig[_0x45f991(0x13b)](_0x45f991(0xa8))[_0x45f991(0xb8)]({'botID':botID})[_0x45f991(0xfb)]();if(_0x3fa213){let _0x164b4c=[];_0x3fa213[_0x45f991(0xdb)]['forEach'](_0x4216c8=>{const _0x512ef9=_0x45f991;_0x164b4c[_0x512ef9(0x1a6)]({'coin':_0x4216c8[_0x512ef9(0x15d)],'number':_0x4216c8['startnumber'],'price':_0x4216c8[_0x512ef9(0x13a)]}),delete _0x4216c8[_0x512ef9(0x1f2)],delete _0x4216c8['startprice'];});if(_0x164b4c['length']!==0x0)fs[_0x45f991(0x8c)](configbackuppath+(_0x45f991(0x230)+botID+'.json'),JSON[_0x45f991(0x22f)](_0x164b4c,null,0x4),function(_0x2c89c8){if(_0x2c89c8){}});const _0x451c46=(_0x451f4b,_0x181e2f)=>{const _0x3cdbb0=_0x45f991;let _0x2ed0e8=[];_0x181e2f[_0x3cdbb0(0x93)](_0x36f348=>{const _0xc2ce7a=_0x3cdbb0,_0x4d2227=_0x451f4b['find'](_0x5398e0=>_0x5398e0[_0xc2ce7a(0x15d)]==_0x36f348[_0xc2ce7a(0x15d)]);if(!_0x4d2227)_0x2ed0e8[_0xc2ce7a(0x1a6)](_0x36f348);});let _0x7e413e=[];return _0x451f4b[_0x3cdbb0(0x93)](_0x305b0e=>{const _0x480ded=_0x3cdbb0,_0xddc41d=_0x181e2f[_0x480ded(0xb8)](_0x2a7ab0=>_0x2a7ab0[_0x480ded(0x15d)]==_0x305b0e['coin']);if(!_0xddc41d||_0xddc41d['number']==0x0&&_0x305b0e[_0x480ded(0x1a2)]!=0x0)_0x7e413e[_0x480ded(0x1a6)](_0x305b0e);}),{'missingDay1':_0x2ed0e8,'notInDay2':_0x7e413e};},_0x56c826=dbPerformance['get'](_0x45f991(0x154))[_0x45f991(0x1e3)]()[_0x45f991(0xfb)]();if(_0x56c826[_0x45f991(0x10c)]>0x1){const {missingDay1:_0x5cbd40,notInDay2:_0x2e1d89}=_0x451c46(_0x164b4c,_0x56c826[0x1][_0x45f991(0x1b9)]);_0x164b4c=[..._0x164b4c,..._0x5cbd40],_0x2e1d89['forEach'](_0x4e3bbe=>{const _0x5d8e58=_0x45f991;let _0x340c6b=_0x164b4c[_0x5d8e58(0x227)](_0x9df70=>_0x9df70[_0x5d8e58(0x15d)]==_0x4e3bbe['coin']);_0x340c6b!=-0x1&&_0x164b4c[_0x5d8e58(0x1ed)](_0x340c6b,0x1);});}_0x164b4c['sort']((_0x2660b1,_0x5adf85)=>_0x2660b1[_0x45f991(0x15d)]>_0x5adf85['coin']?0x1:_0x5adf85[_0x45f991(0x15d)]>_0x2660b1['coin']?-0x1:0x0);let _0x12aa8e=[{'date':_0x3fa213['startdate'],'changes':_0x164b4c}];_0x56c826[_0x45f991(0x10c)]>0x2&&_0x56c826['forEach']((_0x20aace,_0x40cf41)=>{const _0xc59757=_0x45f991;if(_0x40cf41>0x0&&_0x40cf41<_0x56c826[_0xc59757(0x10c)]-0x1){const {missingDay1:_0x4fc48a,notInDay2:_0x259001}=_0x451c46(_0x56c826[_0x40cf41][_0xc59757(0x1b9)],_0x56c826[_0x40cf41+0x1][_0xc59757(0x1b9)]);_0x164b4c=[],(_0x4fc48a['length']!=0x0||_0x259001[_0xc59757(0x10c)]!=0x0)&&(_0x4fc48a[_0xc59757(0x10c)]!=0x0&&_0x164b4c[_0xc59757(0x1a6)](..._0x4fc48a),_0x259001[_0xc59757(0x10c)]!=0x0&&(_0x259001[_0xc59757(0x93)](_0x11a539=>{const _0x37f253=_0xc59757;_0x11a539[_0x37f253(0x1a2)]=-_0x11a539['number'];}),_0x164b4c['push'](..._0x259001)),_0x164b4c['sort']((_0x4d9c2f,_0x533945)=>_0x4d9c2f[_0xc59757(0x15d)]>_0x533945[_0xc59757(0x15d)]?0x1:_0x533945['coin']>_0x4d9c2f[_0xc59757(0x15d)]?-0x1:0x0),_0x12aa8e['push']({'date':_0x56c826[_0x40cf41+0x1]['date'],'changes':_0x164b4c}));}}),dbConfig[_0x45f991(0x13b)](_0x45f991(0xa8))['find']({'botID':botID})[_0x45f991(0x1ab)]({..._0x3fa213,'liquidity':_0x12aa8e})['write']();}}if(isOlderVersion(_0x54ff1d,_0x45f991(0x1a7))){let _0x34f43a=dbConfig[_0x45f991(0x13b)](_0x45f991(0xa8))[_0x45f991(0xb8)]({'botID':botID})[_0x45f991(0xfb)]();if(_0x34f43a){const _0xf13d53=_0x34f43a[_0x45f991(0x1df)],_0x2abb88=_0xf13d53?capitalize(_0xf13d53):_0x45f991(0xb4);dbConfig[_0x45f991(0x13b)](_0x45f991(0xa8))[_0x45f991(0xb8)]({'botID':botID})['assign']({'exchange':_0x2abb88})[_0x45f991(0x85)]();}}if(isOlderVersion(_0x54ff1d,_0x45f991(0x203))){let _0x3c481a=dbConfig['get'](_0x45f991(0xa8))[_0x45f991(0xb8)]({'botID':botID})[_0x45f991(0xfb)]();if(_0x3c481a){const _0x474532=_0x3c481a['marketcapEnabled'],_0x563fab=_0x474532?_0x45f991(0x78):![];dbConfig[_0x45f991(0x13b)](_0x45f991(0xa8))[_0x45f991(0xb8)]({'botID':botID})['assign']({'marketcapEnabled':_0x563fab})[_0x45f991(0x85)]();}}if(isOlderVersion(_0x54ff1d,_0x45f991(0x13e))){let _0xeecd62=dbConfig[_0x45f991(0x13b)](_0x45f991(0xa8))['find']({'botID':botID})[_0x45f991(0xfb)]();if(_0xeecd62){const _0x4637ef=_0xeecd62[_0x45f991(0x1eb)],_0xbad980=_0x4637ef?_0x45f991(0x6e):![];dbConfig['get'](_0x45f991(0xa8))[_0x45f991(0xb8)]({'botID':botID})[_0x45f991(0x1ab)]({'autoliquidity':_0xbad980})[_0x45f991(0x85)]();}}let _0x222e2d=dbPerformance[_0x45f991(0x13b)](_0x45f991(0xea))[_0x45f991(0xfb)]();isOlderVersion(_0x222e2d,_0x45f991(0x1a8))&&setStartDatePerformance();let _0x526772=dbCoinResults[_0x45f991(0x13b)]('version')[_0x45f991(0xfb)]();if(isOlderVersion(_0x526772,_0x45f991(0xe4))){let _0x30632e=dbCoinResults[_0x45f991(0x13b)](_0x45f991(0x1b9))[_0x45f991(0xfb)]();if(_0x30632e[_0x45f991(0x10c)]!=0x0)pnlGenerationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x4a0690=_0x874150;dbConfig[_0x4a0690(0x195)](_0x4a0690(0xea),serverversion)[_0x4a0690(0x85)](),dbPerformance[_0x4a0690(0x195)](_0x4a0690(0xea),serverversion)[_0x4a0690(0x85)](),dbLogs[_0x4a0690(0x195)]('version',serverversion)[_0x4a0690(0x85)](),dbCoinResults[_0x4a0690(0x195)](_0x4a0690(0xea),serverversion)[_0x4a0690(0x85)]();}function getConfiguration(_0x2fa151){const _0x4f0265=_0x874150;let _0x17ef99=dbConfig[_0x4f0265(0x13b)]('bot')[_0x4f0265(0xb8)]({'botID':_0x2fa151})[_0x4f0265(0xfb)]();if(_0x17ef99){let _0x48ad48=![];typeof _0x17ef99[_0x4f0265(0x1bd)]==_0x4f0265(0x147)&&(_0x17ef99={..._0x17ef99,'threshold':Number(_0x17ef99['threshold'])},_0x48ad48=!![]),_0x17ef99[_0x4f0265(0x1ad)]==undefined&&(_0x17ef99={..._0x17ef99,'change24h':-0x14},_0x48ad48=!![]),_0x17ef99['fiat']==undefined&&(_0x17ef99={..._0x17ef99,'fiat':_0x4f0265(0x17f)},_0x48ad48=!![]),_0x17ef99[_0x4f0265(0x10a)]==undefined&&(_0x17ef99={..._0x17ef99,'onepagemode':settings[_0x4f0265(0x10a)]},_0x48ad48=!![]),_0x17ef99[_0x4f0265(0xec)]==undefined&&(_0x17ef99={..._0x17ef99,'colorscheme':'red_yellow_blue'},_0x48ad48=!![]),_0x17ef99['autoliquidity']==undefined&&(_0x17ef99={..._0x17ef99,'autoliquidity':_0x4f0265(0x6e)},_0x48ad48=!![]),_0x17ef99[_0x4f0265(0x1fe)]==undefined&&(_0x17ef99={..._0x17ef99,'marketcapApi':settings[_0x4f0265(0x1fe)]?!![]:![]},_0x48ad48=!![]),_0x17ef99['marketcapEnabled']==undefined&&(_0x17ef99={..._0x17ef99,'marketcapEnabled':![]},_0x48ad48=!![]),_0x17ef99[_0x4f0265(0x124)]==undefined&&(_0x17ef99={..._0x17ef99,'sandbox':![]},_0x48ad48=!![]),_0x48ad48&&(_0x17ef99={'botID':_0x17ef99['botID'],'exchange':_0x17ef99[_0x4f0265(0x1df)],'apiKey':_0x17ef99[_0x4f0265(0xf8)],'apiSecret':_0x17ef99[_0x4f0265(0x8d)],'apiPassword':_0x17ef99[_0x4f0265(0x19c)],'basecoin':_0x17ef99['basecoin'],'botname':_0x17ef99[_0x4f0265(0x118)],'showname':_0x17ef99[_0x4f0265(0x18f)],'threshold':_0x17ef99[_0x4f0265(0x1bd)],'ordertype':_0x17ef99[_0x4f0265(0x116)],'timeout':_0x17ef99['timeout'],'fiat':_0x17ef99[_0x4f0265(0x1ba)],'startdate':_0x17ef99[_0x4f0265(0x16a)],'recreate':_0x17ef99[_0x4f0265(0xe5)],'timeshift':_0x17ef99['timeshift'],'onepagemode':_0x17ef99[_0x4f0265(0x10a)],'headless':_0x17ef99['headless'],'cooldown':_0x17ef99[_0x4f0265(0xcd)],'change24h':_0x17ef99[_0x4f0265(0x1ad)],'emojibuy':_0x17ef99[_0x4f0265(0x117)],'emojisell':_0x17ef99[_0x4f0265(0x229)],'colorscheme':_0x17ef99['colorscheme'],'marketcapApi':_0x17ef99[_0x4f0265(0x1fe)],'marketcapEnabled':_0x17ef99[_0x4f0265(0xb1)],'sandbox':_0x17ef99[_0x4f0265(0x124)],'portfolio':_0x17ef99[_0x4f0265(0xdb)],'autoliquidity':_0x17ef99[_0x4f0265(0x1eb)],'liquidity':_0x17ef99['liquidity'],'openOrders':_0x17ef99['openOrders']},dbConfig[_0x4f0265(0x13b)](_0x4f0265(0xa8))['remove']()[_0x4f0265(0x85)](),dbConfig['get'](_0x4f0265(0xa8))[_0x4f0265(0x1a6)](_0x17ef99)[_0x4f0265(0x85)]());}else _0x17ef99={'botID':_0x2fa151,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':'Bot\x20'+_0x2fa151,'showname':![],'threshold':0x3,'ordertype':_0x4f0265(0x14e),'timeout':0x14,'fiat':_0x4f0265(0x17f),'startdate':getDate(),'recreate':![],'timeshift':settings['timeshift'],'onepagemode':settings[_0x4f0265(0x10a)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x4f0265(0x22e),'marketcapApi':settings[_0x4f0265(0x1fe)]?!![]:![],'marketcapEnabled':![],'sandbox':![],'portfolio':[],'autoliquidity':_0x4f0265(0x6e),'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x17ef99;}function emittedConfiguration(){const _0x31de04=_0x874150;let _0x5551ae;if(config[_0x31de04(0xf8)]=='')_0x5551ae={...config,'configstate':_0x31de04(0xe3)};else config['apiKey']==_0x31de04(0x1f6)?_0x5551ae={...config,'configstate':_0x31de04(0x1c9)}:(_0x5551ae={...config,'apiKey':_0x31de04(0x172),'apiSecret':_0x31de04(0x172)},config['apiPassword']&&(_0x5551ae['apiPassword']='************'));return _0x5551ae[_0x31de04(0x119)]=enableFiatToggle,_0x5551ae;}function getSettings(){const _0x1170c5=_0x874150;return dbSettings[_0x1170c5(0x13b)](_0x1170c5(0x20f))['value']();}function getSecure(){const _0x1a5ca9=_0x874150;return dbSecure[_0x1a5ca9(0x13b)]('secure')[_0x1a5ca9(0xfb)]()||{};}function updateTimeshift(_0x3850e6){const _0x35ba35=_0x874150;let _0x44e4c3=dbConfig[_0x35ba35(0x13b)]('bot')[_0x35ba35(0xb8)]({'botID':botID})[_0x35ba35(0xfb)]();_0x44e4c3&&dbConfig[_0x35ba35(0x13b)]('bot')[_0x35ba35(0xb8)]({'botID':botID})['assign']({'timeshift':_0x3850e6})[_0x35ba35(0x85)](),config[_0x35ba35(0x186)]=_0x3850e6,proxyEmit(_0x35ba35(0xc6),emittedConfiguration());}function updateOnepagemode(_0x39a0ee){const _0x33710b=_0x874150;let _0x1860d7=dbConfig['get'](_0x33710b(0xa8))[_0x33710b(0xb8)]({'botID':botID})[_0x33710b(0xfb)]();_0x1860d7&&dbConfig[_0x33710b(0x13b)]('bot')[_0x33710b(0xb8)]({'botID':botID})[_0x33710b(0x1ab)]({'onepagemode':_0x39a0ee})[_0x33710b(0x85)](),config[_0x33710b(0x10a)]=_0x39a0ee,proxyEmit(_0x33710b(0xc6),emittedConfiguration());}function updateMarketcapApi(_0x10b724){const _0x4257d4=_0x874150,_0x4773b0=_0x10b724?!![]:![];let _0x2a493c=dbConfig['get'](_0x4257d4(0xa8))['find']({'botID':botID})['value']();_0x2a493c&&dbConfig['get'](_0x4257d4(0xa8))[_0x4257d4(0xb8)]({'botID':botID})['assign']({'marketcapApi':_0x4773b0})[_0x4257d4(0x85)](),config['marketcapApi']=_0x4773b0,getMarketCap(),proxyEmit(_0x4257d4(0xc6),emittedConfiguration());}async function storeConfiguration(_0x35af94){const _0x3bde31=_0x874150;logger[_0x3bde31(0x21c)](_0x3bde31(0x21a));_0x35af94[_0x3bde31(0x106)]&&delete _0x35af94[_0x3bde31(0x106)];if(pidBalances)clearTimeout(pidBalances);setBlockTransactionDetection(!![]);let _0x871479=![],_0x22444a=![],_0xd76c4d=[];_0x35af94[_0x3bde31(0xdb)]['forEach'](_0x12f808=>{const _0x351273=_0x3bde31;if(!_0x12f808[_0x351273(0x1d9)]&&_0x12f808['coin']!=_0x35af94['basecoin'])_0xd76c4d['push'](_0x12f808[_0x351273(0xb9)]);}),_0xd76c4d[_0x3bde31(0x93)](_0x27d9db=>{const _0x8a2f1a=_0x3bde31,_0x245b5a=currentCoins['find'](_0x13183d=>_0x13183d[_0x8a2f1a(0xb9)]==_0x27d9db);!_0x245b5a&&(_0x871479=!![]);}),currentCoins[_0x3bde31(0x93)](_0x555d7e=>{const _0x40ea5b=_0x3bde31;if(_0x555d7e[_0x40ea5b(0x15d)]!=config[_0x40ea5b(0x217)]){const _0x3e2a7d=_0xd76c4d[_0x40ea5b(0xb8)](_0x5358a7=>_0x5358a7==_0x555d7e[_0x40ea5b(0xb9)]);!_0x3e2a7d&&(_0x871479=!![]);}}),_0x35af94[_0x3bde31(0xdb)][_0x3bde31(0x93)](_0x4be496=>{const _0x5c7619=_0x3bde31,_0x2b81c5=config[_0x5c7619(0xdb)][_0x5c7619(0xb8)](_0x24e3d1=>_0x24e3d1['coin']==_0x4be496[_0x5c7619(0x15d)]);if(_0x2b81c5&&_0x4be496[_0x5c7619(0x201)]!=_0x2b81c5[_0x5c7619(0x201)])_0x22444a=!![];});let _0x54efe5=dbConfig['get'](_0x3bde31(0xa8))['find']({'botID':botID})[_0x3bde31(0xfb)]();_0x35af94={..._0x35af94,'apiKey':decryptRSA(secure[_0x3bde31(0x1da)],_0x35af94[_0x3bde31(0xf8)]),'apiSecret':decryptRSA(secure[_0x3bde31(0x1da)],_0x35af94[_0x3bde31(0x8d)])};_0x35af94[_0x3bde31(0x19c)]&&(_0x35af94[_0x3bde31(0x19c)]=decryptRSA(secure[_0x3bde31(0x1da)],_0x35af94[_0x3bde31(0x19c)]));let _0x4d0c21=![];if(_0x54efe5){_0x35af94[_0x3bde31(0xf8)]==_0x3bde31(0x172)?_0x35af94[_0x3bde31(0xf8)]=config[_0x3bde31(0xf8)]:_0x4d0c21=!![];_0x35af94[_0x3bde31(0x8d)]=='************'?_0x35af94[_0x3bde31(0x8d)]=config[_0x3bde31(0x8d)]:_0x4d0c21=!![];if(_0x35af94[_0x3bde31(0x19c)]==_0x3bde31(0x172))_0x35af94['apiPassword']=config[_0x3bde31(0x19c)];else{if(_0x35af94[_0x3bde31(0x19c)])_0x4d0c21=!![];}dbConfig[_0x3bde31(0x13b)](_0x3bde31(0xa8))[_0x3bde31(0xb8)]({'botID':botID})[_0x3bde31(0x1ab)](_0x35af94)[_0x3bde31(0x85)]();}else dbConfig[_0x3bde31(0x13b)](_0x3bde31(0xa8))[_0x3bde31(0x1a6)](_0x35af94)[_0x3bde31(0x85)](),_0x4d0c21=!![],process[_0x3bde31(0x221)]({'status':_0x3bde31(0x20b),'live':_0x3bde31(0x168)},_0x982c65=>{});process[_0x3bde31(0x221)]({'botname':_0x35af94[_0x3bde31(0x118)]},_0x2cc2e5=>{}),config={..._0x35af94},updateBotManager(),proxyEmit(_0x3bde31(0x1cd)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x4d0c21)await reset(!![]);else _0x871479||_0x22444a?await reset(![]):getBalances();setBlockTransactionDetection(![]);}async function storeHeadless(_0x2f2b6b){const _0xa101aa=_0x874150,_0x1b49d6={...config,'headless':_0x2f2b6b[_0xa101aa(0x75)]};let _0x38550c=dbConfig[_0xa101aa(0x13b)](_0xa101aa(0xa8))['find']({'botID':botID})[_0xa101aa(0xfb)]();_0x38550c&&dbConfig[_0xa101aa(0x13b)](_0xa101aa(0xa8))[_0xa101aa(0xb8)]({'botID':botID})['assign'](_0x1b49d6)[_0xa101aa(0x85)](),config={..._0x1b49d6},updateBotManager(),proxyEmit(_0xa101aa(0xc6),emittedConfiguration());}async function storeFiat(_0x22036c){const _0x3d7ebe=_0x874150,_0x2f91ed={...config,'fiat':_0x22036c};let _0x550da5=dbConfig[_0x3d7ebe(0x13b)](_0x3d7ebe(0xa8))[_0x3d7ebe(0xb8)]({'botID':botID})[_0x3d7ebe(0xfb)]();_0x550da5&&dbConfig[_0x3d7ebe(0x13b)](_0x3d7ebe(0xa8))[_0x3d7ebe(0xb8)]({'botID':botID})['assign'](_0x2f91ed)['write'](),config={..._0x2f91ed},proxyEmit(_0x3d7ebe(0xc6),emittedConfiguration());}function resetHistory(){const _0x223f92=_0x874150;logger[_0x223f92(0xde)](_0x223f92(0x15c));try{if(fs[_0x223f92(0x19f)](path['join'](configpath,_0x223f92(0x18d)+botID+_0x223f92(0x216))))fs[_0x223f92(0x71)](path[_0x223f92(0x234)](configpath,'bot-'+botID+_0x223f92(0x216)));if(fs['existsSync'](path['join'](configpath,_0x223f92(0x18d)+botID+'-performance.json')))fs[_0x223f92(0x71)](path[_0x223f92(0x234)](configpath,_0x223f92(0x18d)+botID+_0x223f92(0xa5)));if(fs[_0x223f92(0x19f)](path[_0x223f92(0x234)](configpath,_0x223f92(0x18d)+botID+_0x223f92(0x1c2))))fs[_0x223f92(0x71)](path['join'](configpath,'bot-'+botID+_0x223f92(0x1c2)));}catch(_0x44a901){if(_0x44a901)logger[_0x223f92(0xde)](_0x223f92(0x108),_0x44a901);}const _0x441bfb=getDate();let _0xd93a02=[];currentCoins[_0x223f92(0x93)](_0x244a1b=>{const _0x200b7f=_0x223f92;_0xd93a02['push']({'coin':_0x244a1b[_0x200b7f(0x15d)],'number':_0x244a1b['number'],'price':_0x244a1b[_0x200b7f(0x1a9)]});});let _0x150f29=dbConfig[_0x223f92(0x13b)]('bot')['find']({'botID':botID})[_0x223f92(0xfb)]();_0x150f29&&(dbConfig[_0x223f92(0x13b)](_0x223f92(0xa8))[_0x223f92(0xb8)]({'botID':botID})[_0x223f92(0x1ab)]({'liquidity':[{'date':_0x441bfb,'changes':_0xd93a02}]})[_0x223f92(0x85)](),config[_0x223f92(0xef)]=[]),restartBot(!![]);}function noslash(_0x1e25ea){const _0xdc5867=_0x874150;return _0x1e25ea[_0xdc5867(0x166)]('/','');}function updateHighestFee(_0x28ffe3){const _0x4aeb6d=_0x874150;if(_0x28ffe3[_0x4aeb6d(0x177)]){let _0x3bfdf3={'filled':_0x28ffe3[_0x4aeb6d(0xb7)]*_0x28ffe3['price'],'amount':_0x28ffe3[_0x4aeb6d(0xb7)]*_0x28ffe3[_0x4aeb6d(0x1f4)],'side':_0x28ffe3['side']==_0x4aeb6d(0xf1)?_0x4aeb6d(0x212):_0x4aeb6d(0xf1),'price':0x1/_0x28ffe3[_0x4aeb6d(0x1f4)]};_0x28ffe3={..._0x28ffe3,..._0x3bfdf3};}const _0x1977d2=defaultFee*_0x28ffe3[_0x4aeb6d(0xb7)]*_0x28ffe3[_0x4aeb6d(0x1f4)];lastFees['recent20'][_0x4aeb6d(0x10c)]===0x14&&lastFees['recent20'][_0x4aeb6d(0x1f0)](),lastFees[_0x4aeb6d(0x14b)]['push'](_0x1977d2),lastFees['highest']=Math[_0x4aeb6d(0x1b1)](...lastFees[_0x4aeb6d(0x14b)]);}async function updateNumberCoinsCcxt(_0x463995){const _0x3dc375=_0x874150;logger[_0x3dc375(0x21c)](_0x3dc375(0x1d8)+_0x463995[_0x3dc375(0xb9)]+_0x3dc375(0xd2)+_0x463995['status']+_0x3dc375(0xd2)+_0x463995['filled']+_0x3dc375(0xba)+_0x463995[_0x3dc375(0x12a)]+_0x3dc375(0xd2)+_0x463995['id']);let _0x2e065d=_0x463995[_0x3dc375(0x1c6)],_0x57b389=![];currentCoins['forEach'](_0x3d7b43=>{const _0x11e0c8=_0x3dc375;_0x3d7b43[_0x11e0c8(0xb9)]==_0x463995['symbol']&&(_0x57b389=!![]);});if(!_0x57b389)return;const _0x25e459=currentCoins[_0x3dc375(0xb8)](_0x3cf46d=>_0x3cf46d[_0x3dc375(0xb9)]==_0x463995[_0x3dc375(0xb9)]),_0x112924=_0x25e459[_0x3dc375(0x15d)],_0x5997d4=_0xdac6c8=>{const _0x4fb19e=_0x3dc375,_0x40fa9f=currentCoins['find'](_0x2f9e77=>_0x2f9e77[_0x4fb19e(0xb9)]==_0x463995[_0x4fb19e(0xb9)]);if(_0x40fa9f)_0x40fa9f[_0x4fb19e(0x16e)]=_0xdac6c8;};let _0x4b415a=![];for(const _0x2364cd of lastOrders){const _0x14aeaf=0x64,_0x3536e8=0x1388;let _0x16090a=0x0;while(!_0x2364cd[_0x3dc375(0x1ac)]&&_0x16090a*_0x14aeaf<_0x3536e8){_0x16090a++,await sleep(_0x14aeaf);}if(_0x16090a>0x0)logger['debug'](_0x3dc375(0x214)+_0x16090a*_0x14aeaf/0x3e8+'\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed');_0x2364cd['orderId']==_0x463995['id']&&(_0x4b415a=!![]);}if(_0x2e065d==_0x3dc375(0xff)){_0x5997d4(_0x3dc375(0xff));if(_0x463995[_0x3dc375(0xb7)]>0x0&&_0x463995[_0x3dc375(0xb7)]<_0x463995[_0x3dc375(0x12a)]){if(_0x4b415a){setBlockTransactionDetection(!![]),logger[_0x3dc375(0x21c)]('1\x20-\x20partially\x20FILLED\x20('+_0x463995[_0x3dc375(0xb7)]+')\x20known\x20order:\x20'+_0x463995['id']);const _0x435852=await getCoins(balanceUpdateDelay,undefined,undefined,_0x112924);[currentCoins,currentCoinsAll]=_0x435852,setBlockTransactionDetection(![]);}else logger[_0x3dc375(0x21c)](_0x3dc375(0x9b)+_0x463995[_0x3dc375(0xb7)]+')\x20unknown\x20order:\x20'+_0x463995['id']),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay);}}else{if(_0x2e065d==_0x3dc375(0x131)){_0x5997d4(_0x3dc375(0x131)),lastOrders=lastOrders[_0x3dc375(0xd6)](_0x3d8ac6=>_0x3d8ac6[_0x3dc375(0xb9)]!=_0x463995['symbol']);const _0x3aa732=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x3aa732,setBlockTransactionDetection(![]),await getOpenOrders(),handleOpenOrders();}else{if(_0x2e065d==_0x3dc375(0x9d)){if(lastOrders)for(const _0x2aea4e of lastOrders){if(_0x2aea4e[_0x3dc375(0x1ac)]==_0x463995['id']){logger[_0x3dc375(0x21c)](_0x3dc375(0x8b)+_0x463995['id']),_0x4b415a=!![];if(_0x2aea4e[_0x3dc375(0xb7)]==0x0){setBlockTransactionDetection(!![]),logger[_0x3dc375(0x21c)](_0x3dc375(0x198)+_0x463995['id']);if(_0x463995[_0x3dc375(0x19e)])_0x2aea4e[_0x3dc375(0x1f4)]=_0x463995[_0x3dc375(0x19e)];else{if(_0x463995[_0x3dc375(0x1f4)])_0x2aea4e[_0x3dc375(0x1f4)]=_0x463995[_0x3dc375(0x1f4)];else{}}_0x2aea4e[_0x3dc375(0xb7)]=_0x463995[_0x3dc375(0xb7)],updateHighestFee(_0x2aea4e);const _0xaa703a=await getCoins(balanceUpdateDelay,undefined,undefined,_0x112924);[currentCoins,currentCoinsAll]=_0xaa703a,setBlockTransactionDetection(![]),await validateOrders(),_0x5997d4(_0x3dc375(0xb7)),_0x2aea4e[_0x3dc375(0x1a3)]={'currency':_0x463995['fee']?_0x463995[_0x3dc375(0x1a3)][_0x3dc375(0x109)]:null,'cost':_0x463995[_0x3dc375(0x1a3)]?_0x463995[_0x3dc375(0x1a3)]['cost']:0x0},await updatePnL(_0x2aea4e);}}}!_0x4b415a&&(logger['debug'](_0x3dc375(0x17b)+_0x463995['id']),_0x5997d4(_0x3dc375(0xb7)),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay),await updateOpenOrders(),handleOpenOrders());}}}if(lastBalances){let _0x2f16b0=JSON[_0x3dc375(0x1ae)](lastBalances[_0x3dc375(0xdb)]);const _0x19df90=_0x2f16b0['find'](_0x2b2cd8=>_0x2b2cd8[_0x3dc375(0xb9)]==_0x463995[_0x3dc375(0xb9)]);if(_0x19df90){if(_0x2e065d==_0x3dc375(0xff))_0x19df90[_0x3dc375(0x16e)]=_0x19df90[_0x3dc375(0x16e)]==_0x3dc375(0xb7)?'filled':_0x3dc375(0xff);else{if(_0x2e065d==_0x3dc375(0x131))_0x19df90['orderstatus']=_0x19df90['orderstatus']==_0x3dc375(0xb7)?_0x3dc375(0xb7):'canceled';else _0x2e065d==_0x3dc375(0x9d)&&(_0x19df90[_0x3dc375(0x16e)]=_0x3dc375(0xb7));}}lastBalances={...lastBalances,'portfolio':JSON[_0x3dc375(0x22f)](_0x2f16b0)},proxyEmit(_0x3dc375(0x202),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0xbf0f2a=_0x874150;await getOpenOrders();let _0x1a1716=![];currentCoins[_0xbf0f2a(0x93)](_0x1452c7=>{const _0x1b6f17=_0xbf0f2a;_0x1a1716=allOpenOrders[_0x1b6f17(0xb8)](_0x3aac15=>_0x3aac15[_0x1b6f17(0xb9)]==_0x1452c7['symbol']),_0x1452c7['orderstatus']=_0x1a1716?_0x1b6f17(0xff):_0x1b6f17(0x1ea);});}async function fetchBalance(_0x28d42b=!![]){const _0x55bd76=_0x874150;let _0x18981b,_0x528dce;try{return _0x18981b=await exchange['fetchBalance'](),_0x528dce=_0x18981b[_0x55bd76(0xa6)],_0x528dce;}catch(_0x2cd86b){return!_0x28d42b?handleErrorNoStop(_0x2cd86b,_0x55bd76(0x199)):await handleError(_0x2cd86b,_0x55bd76(0x199)),![];}}async function getCoins(_0x162ed5=0x0,_0x467a7e=!![],_0x1028d3=config[_0x874150(0x217)],_0x6001a7){const _0x434dd3=_0x874150;let _0x4df094=[],_0x2e58bd=[],_0x2e404d=[],_0x1dd70b;if(_0x162ed5)await sleep(_0x162ed5);if(botPaused)return[currentCoins,currentCoinsAll];let _0x19c923=![],_0x1d7e16=0x0,_0x5e3255,_0x14512c;_0x6001a7&&(_0x5e3255=currentCoins['find'](_0x253e0b=>_0x253e0b[_0x434dd3(0x15d)]==_0x6001a7),_0x5e3255&&(_0x14512c=_0x5e3255[_0x434dd3(0x8e)],delete _0x5e3255[_0x434dd3(0x8e)]));while(!_0x19c923){_0x1dd70b=await fetchBalance(_0x467a7e);if(_0x1dd70b){if(_0x6001a7){if(_0x1dd70b[_0x6001a7]!=_0x14512c)logger[_0x434dd3(0x21c)](_0x434dd3(0x18b)+_0x6001a7+':\x20'+_0x1dd70b[_0x6001a7]+'\x20('+_0x14512c+')'),_0x19c923=!![];else{logger['debug'](_0x434dd3(0x1c7)+_0x6001a7+':\x20'+_0x1dd70b[_0x6001a7]+'\x20('+_0x14512c+')'),_0x1d7e16++;if(_0x1d7e16<balanceUpdateRetries)await sleep(balanceUpdateDelay);else{logger[_0x434dd3(0x21c)](_0x434dd3(0x149)+_0x1d7e16+'\x20attempts');break;}}}else break;}else return[currentCoins,currentCoinsAll];}for(const [_0x546891,_0x44f513]of Object['entries'](_0x1dd70b)){_0x2e404d[_0x434dd3(0x1a6)](_0x546891);}config[_0x434dd3(0xdb)][_0x434dd3(0x93)](_0x66849f=>{const _0x5dbd51=_0x434dd3;!_0x2e404d[_0x5dbd51(0x110)](_0x66849f['coin'])&&(_0x1dd70b[_0x66849f[_0x5dbd51(0x15d)]]=0x0);});if(_0x1028d3=='')for(const [_0x1ccf1d,_0xb3391d]of Object['entries'](_0x1dd70b)){_0xb3391d!=0x0&&_0x4df094[_0x434dd3(0x1a6)]({'coin':_0x1ccf1d});}else for(const [_0x42465e,_0x2adc9a]of Object[_0x434dd3(0x1a4)](_0x1dd70b)){const _0x3e3fb8=config['portfolio'][_0x434dd3(0xb8)](_0x2292c5=>_0x2292c5[_0x434dd3(0x15d)]==_0x42465e),_0x29613a=_0x42465e+'/'+_0x1028d3,_0x1d67a7=_0x1028d3+'/'+_0x42465e,_0x4b1b93=currentCoins[_0x434dd3(0xb8)](_0x4d1dee=>_0x4d1dee[_0x434dd3(0x15d)]==_0x42465e);if((_0x2adc9a!=0x0||_0x3e3fb8)&&(allSymbols[_0x434dd3(0x110)](_0x29613a)||_0x42465e==_0x1028d3))_0x4b1b93?_0x4df094[_0x434dd3(0x1a6)]({..._0x4b1b93,'number':Math[_0x434dd3(0x1b1)](_0x2adc9a+(_0x3e3fb8&&_0x3e3fb8[_0x434dd3(0x201)]||0x0),0x0)}):_0x4df094[_0x434dd3(0x1a6)]({'coin':_0x42465e,'symbol':_0x29613a,'reverse':![],'number':Math[_0x434dd3(0x1b1)](_0x2adc9a+(_0x3e3fb8&&_0x3e3fb8[_0x434dd3(0x201)]||0x0),0x0),'orderstatus':_0x434dd3(0x1ea)});else{if((_0x2adc9a!=0x0||_0x3e3fb8)&&allSymbols[_0x434dd3(0x110)](_0x1d67a7))_0x4b1b93?_0x4df094['push']({..._0x4b1b93,'number':Math['max'](_0x2adc9a+(_0x3e3fb8&&_0x3e3fb8[_0x434dd3(0x201)]||0x0),0x0)}):_0x4df094['push']({'coin':_0x42465e,'symbol':_0x1d67a7,'reverse':!![],'number':Math[_0x434dd3(0x1b1)](_0x2adc9a+(_0x3e3fb8&&_0x3e3fb8['offset']||0x0),0x0),'orderstatus':_0x434dd3(0x1ea)});else _0x3e3fb8&&_0x4df094[_0x434dd3(0x1a6)]({'coin':_0x3e3fb8[_0x434dd3(0x15d)],'symbol':_0x3e3fb8[_0x434dd3(0xb9)],'reverse':_0x3e3fb8['reverse'],'number':0x0,'orderstatus':_0x434dd3(0x1ea)});}}return _0x4df094['sort']((_0x42f6d2,_0x17287f)=>_0x42f6d2[_0x434dd3(0x1f9)]<_0x17287f[_0x434dd3(0x1f9)]?0x1:_0x17287f['delta']<_0x42f6d2[_0x434dd3(0x1f9)]?-0x1:0x0),_0x2e58bd=cloneDeep(_0x4df094),_0x4df094=_0x4df094[_0x434dd3(0xd6)](_0x50cb7b=>{const _0x50ee24=_0x434dd3,_0x4b3b34=config[_0x50ee24(0xdb)][_0x50ee24(0xb8)](_0x11357c=>_0x11357c[_0x50ee24(0x15d)]==_0x50cb7b[_0x50ee24(0x15d)]);return _0x4b3b34&&!_0x4b3b34[_0x50ee24(0x1d9)];}),[_0x4df094,_0x2e58bd];}async function getOpenOrders(){const _0x5c2bd1=_0x874150;let _0x28449d;allOpenOrders=[];try{for(const _0x3f3c70 of config[_0x5c2bd1(0xdb)]){!_0x3f3c70['excluded']&&_0x3f3c70['coin']!=config[_0x5c2bd1(0x217)]&&(_0x28449d=await exchange[_0x5c2bd1(0xae)](_0x3f3c70[_0x5c2bd1(0xb9)]),_0x28449d[_0x5c2bd1(0x10c)]>0x0&&allOpenOrders[_0x5c2bd1(0x1a6)](_0x28449d[0x0]));}}catch(_0x4f4939){await handleError(_0x4f4939,_0x5c2bd1(0x1c4));}}async function handleOpenOrders(_0x29b674=0x0){const _0x679bdd=_0x874150;allOpenOrders['length']==0x0&&lockOrders==ORDERS[_0x679bdd(0x164)]&&allOrdersPlaced&&(_0x29b674==0x0?(logger[_0x679bdd(0x21c)](_0x679bdd(0x204)),_0x29b674++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x679bdd(0x21c)](_0x679bdd(0x74)),validateOrders(_0x679bdd(0x161))));}async function testAPI(){const _0x41fcdb=_0x874150;try{return await exchange[_0x41fcdb(0x12c)](),!![];}catch(_0x2e90ba){return loading[_0x41fcdb(0x1bc)]=!![],_0x2e90ba[_0x41fcdb(0xc1)]()[_0x41fcdb(0x205)]()[_0x41fcdb(0x110)](_0x41fcdb(0x218))||_0x2e90ba[_0x41fcdb(0xc1)]()[_0x41fcdb(0x205)]()[_0x41fcdb(0x110)](_0x41fcdb(0x233))?(logHistory(_0x41fcdb(0xc8),'Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)'),loading['error']=_0x41fcdb(0x16f)):(handleErrorNoStop(_0x2e90ba,_0x41fcdb(0x1ce)),logger[_0x41fcdb(0x21c)](_0x41fcdb(0xbf),_0x2e90ba)),emitLoadingProgress(),botPaused=!![],![];}}async function testNewAPI(_0x35914c){const _0x230447=_0x874150;logger[_0x230447(0x21c)](_0x230447(0x1b2));const _0x38afcf=ccxt[_0x230447(0x193)][_0x35914c[_0x230447(0x1df)][_0x230447(0x205)]()],_0x3ddb2f=new _0x38afcf({'apiKey':_0x35914c[_0x230447(0xf8)],'secret':_0x35914c[_0x230447(0x8d)],'options':{'defaultType':_0x230447(0xf3)}});if(_0x35914c[_0x230447(0x19c)])_0x3ddb2f[_0x230447(0x133)]=_0x35914c[_0x230447(0x19c)];if(_0x3ddb2f[_0x230447(0x138)][_0x230447(0x124)])_0x3ddb2f['setSandboxMode'](_0x35914c[_0x230447(0x124)]);try{await _0x3ddb2f[_0x230447(0x12c)](),botPaused=![];}catch(_0x5109af){logger['debug']('Error\x20in\x20testNewAPI():\x20'+_0x5109af[_0x230447(0xc1)]());throw _0x5109af;}}function cloneDeep(_0x3ad681){const _0x24b30f=_0x874150;return JSON[_0x24b30f(0x1ae)](JSON[_0x24b30f(0x22f)](_0x3ad681));}async function getPortfolio(_0x2d41b2){const _0x5371cc=_0x874150;let _0xfad3c2=[],_0x40b92e=[],_0x14fd2b=[],_0x3ec50a;_0x2d41b2[_0x5371cc(0xf8)]=decryptRSA(secure[_0x5371cc(0x1da)],_0x2d41b2['apiKey']),_0x2d41b2[_0x5371cc(0x8d)]=decryptRSA(secure[_0x5371cc(0x1da)],_0x2d41b2[_0x5371cc(0x8d)]);if(_0x2d41b2['apiPassword'])_0x2d41b2[_0x5371cc(0x19c)]=decryptRSA(secure[_0x5371cc(0x1da)],_0x2d41b2[_0x5371cc(0x19c)]);if(_0x2d41b2[_0x5371cc(0xf8)]!==_0x5371cc(0x172)||_0x2d41b2[_0x5371cc(0x8d)]!==_0x5371cc(0x172)||_0x2d41b2[_0x5371cc(0x19c)]&&_0x2d41b2['apiPassword']!==_0x5371cc(0x172)){if(config[_0x5371cc(0x1df)]){if(_0x2d41b2['apiKey']==_0x5371cc(0x172))_0x2d41b2['apiKey']=config[_0x5371cc(0xf8)];if(_0x2d41b2[_0x5371cc(0x8d)]==_0x5371cc(0x172))_0x2d41b2[_0x5371cc(0x8d)]=config[_0x5371cc(0x8d)];if(_0x2d41b2[_0x5371cc(0x19c)]==_0x5371cc(0x172))_0x2d41b2[_0x5371cc(0x19c)]=config[_0x5371cc(0x19c)];}try{if(_0x2d41b2[_0x5371cc(0x1dd)])await testNewAPI(_0x2d41b2);}catch(_0x2ca72e){if(_0x2ca72e['toString']()[_0x5371cc(0x110)](_0x5371cc(0xd9))){logHistory(_0x5371cc(0xc8),_0x5371cc(0x7f)),logHistory(_0x5371cc(0xc8),_0x5371cc(0x6d)+_0x2ca72e[_0x5371cc(0xc1)]()),proxyEmit(_0x5371cc(0xe2),![]);return;}else{if(_0x2ca72e[_0x5371cc(0xc1)]()['includes'](_0x5371cc(0x160))){logHistory(_0x5371cc(0xc8),_0x5371cc(0x92)),logHistory(_0x5371cc(0xc8),_0x5371cc(0x6d)+_0x2ca72e[_0x5371cc(0xc1)]()),proxyEmit('portfolio1',![]);return;}else{logHistory(_0x5371cc(0xc8),_0x5371cc(0x115)+_0x2ca72e[_0x5371cc(0xc1)]()),logger[_0x5371cc(0x21c)](_0x5371cc(0xbf),_0x2ca72e),proxyEmit(_0x5371cc(0xe2),![]);return;}}}exchange?updateExchange(_0x2d41b2[_0x5371cc(0xf8)],_0x2d41b2['apiSecret'],_0x2d41b2[_0x5371cc(0x19c)]):await initExchange(_0x2d41b2[_0x5371cc(0x1df)],_0x2d41b2['apiKey'],_0x2d41b2[_0x5371cc(0x8d)],_0x2d41b2[_0x5371cc(0x19c)],_0x2d41b2[_0x5371cc(0x124)]);await loadSymbols();const _0x5cf3ef=await getCoins(0x0,![],_0x2d41b2[_0x5371cc(0x217)]);_0x14fd2b=cloneDeep(_0x5cf3ef[0x1]);}else{const _0x2d9c83=await getCoins();_0x14fd2b=cloneDeep(_0x2d9c83[0x1]);}if(_0x2d41b2['basecoin']=='')proxyEmit(_0x5371cc(0xe2),!![]),proxyEmit('portfolio2',_0x14fd2b);else{_0x14fd2b[_0x5371cc(0x93)](_0x176915=>{const _0x159686=_0x5371cc;if(_0x176915[_0x159686(0x15d)]!=_0x2d41b2[_0x159686(0x217)]&&allSymbols[_0x159686(0x110)](_0x176915[_0x159686(0xb9)]))_0xfad3c2[_0x159686(0x1a6)](_0x176915['symbol']);});if(_0xfad3c2['length']==0x0)logHistory(_0x5371cc(0xc8),_0x5371cc(0x103));else{try{_0x40b92e=await getTickers(_0xfad3c2);}catch(_0x1556a1){logHistory(_0x5371cc(0xc8),'Unknown\x20error\x20-\x20check\x20logs'),logger[_0x5371cc(0x21c)]('Error\x20details:',_0x1556a1),proxyEmit('portfolio1',![]);return;}_0x14fd2b[_0x5371cc(0x93)](_0xebf02e=>{const _0x1070a4=_0x5371cc;_0xebf02e['coin']!=_0x2d41b2[_0x1070a4(0x217)]?_0x40b92e[_0xebf02e[_0x1070a4(0xb9)]]?_0x40b92e[_0xebf02e['symbol']]['last']?_0x3ec50a=_0xebf02e['reverse']?0x1/_0x40b92e[_0xebf02e[_0x1070a4(0xb9)]][_0x1070a4(0x1a9)]:_0x40b92e[_0xebf02e[_0x1070a4(0xb9)]][_0x1070a4(0x1a9)]:_0x3ec50a=0x0:_0x3ec50a=0x0:_0x3ec50a=0x1,_0xebf02e[_0x1070a4(0x1f4)]=formatResult(_0x3ec50a,0x8);}),await getMarketCap(_0x14fd2b),proxyEmit(_0x5371cc(0xe2),!![]),proxyEmit(_0x5371cc(0x15e),_0x14fd2b);}}}function truncateTradeAmount(_0x5cff25,_0xf79443){const _0x4f0c27=_0x874150;let _0x1fc9bc=0x0;try{_0x1fc9bc=exchange[_0x4f0c27(0x1e2)](_0x5cff25,_0xf79443);}catch(_0x5e5cb9){}return _0x1fc9bc;}function checkMinimums(_0x223e1a){const _0x304a61=_0x874150;let _0x1eb7d8=!![];const _0x3c92ee=!_0x223e1a[_0x304a61(0x177)]?markets[_0x223e1a['symbol']]['limits']['amount'][_0x304a61(0x191)]:markets[_0x223e1a[_0x304a61(0xb9)]][_0x304a61(0x113)][_0x304a61(0x1d6)]['min'],_0x3e51b4=!_0x223e1a[_0x304a61(0x177)]?markets[_0x223e1a[_0x304a61(0xb9)]][_0x304a61(0x113)][_0x304a61(0x1d6)]['min']:markets[_0x223e1a['symbol']][_0x304a61(0x113)][_0x304a61(0x12a)][_0x304a61(0x191)],_0xc6bd38=truncateTradeAmount(_0x223e1a[_0x304a61(0xb9)],_0x223e1a[_0x304a61(0x128)]);_0x223e1a[_0x304a61(0x128)]=_0xc6bd38;if(Math['abs'](_0xc6bd38)<_0x3c92ee)_0x1eb7d8=![];if(Math['abs'](_0xc6bd38)*_0x223e1a[_0x304a61(0x1a9)]<_0x3e51b4)_0x1eb7d8=![];if(_0x223e1a[_0x304a61(0xbc)]==_0x304a61(0xf1)){let _0x5458b6=config[_0x304a61(0xdb)]['find'](_0x2a7dfd=>_0x2a7dfd[_0x304a61(0x15d)]==_0x223e1a[_0x304a61(0x15d)]);if(_0x5458b6[_0x304a61(0x201)]>0x0){if(Math[_0x304a61(0xcc)](_0xc6bd38)>_0x223e1a[_0x304a61(0x1a2)]-_0x5458b6[_0x304a61(0x201)])_0x1eb7d8=![];}else{if(Math[_0x304a61(0xcc)](_0xc6bd38)>_0x223e1a[_0x304a61(0x1a2)])_0x1eb7d8=![];}}if(_0x223e1a[_0x304a61(0xbc)]=='buy'){let _0x120e31=config[_0x304a61(0xdb)]['find'](_0x42b8a7=>_0x42b8a7[_0x304a61(0x15d)]==config['basecoin']),_0x50ee06=currentCoins['find'](_0x23e6e2=>_0x23e6e2['coin']==config[_0x304a61(0x217)]);if(_0x120e31[_0x304a61(0x201)]>0x0){if(Math[_0x304a61(0xcc)](_0xc6bd38)*_0x223e1a['last']>_0x50ee06['number']-_0x120e31[_0x304a61(0x201)])_0x1eb7d8=![];}else{if(Math[_0x304a61(0xcc)](_0xc6bd38)*_0x223e1a[_0x304a61(0x1a9)]>_0x50ee06[_0x304a61(0x1a2)])_0x1eb7d8=![];}}return _0x1eb7d8;}async function getBalances(_0x57c303=!![]){const _0x5406ba=_0x874150;if(botPaused)return;let _0x38ea64=0x0,_0x10e6b1;const _0x56f5dd=config[_0x5406ba(0x1bd)];if(config[_0x5406ba(0x75)]&&config[_0x5406ba(0x1ad)]<0x0)await validate24hChanges();currentCoins[_0x5406ba(0x93)](_0x355133=>{const _0x196725=_0x5406ba;if(_0x355133['coin']!=config[_0x196725(0x217)]){let _0x350499=gTicker[noslash(_0x355133[_0x196725(0xb9)])];_0x10e6b1=_0x355133[_0x196725(0x177)]?0x1/_0x350499:_0x350499;}else _0x10e6b1=0x1;let _0x1efcae=_0x355133['number']*_0x10e6b1;_0x38ea64+=_0x1efcae,_0x355133[_0x196725(0x1a9)]=formatResult(Number(_0x10e6b1),0x8),_0x355133['value']=_0x1efcae;}),currentCoins[_0x5406ba(0x93)](_0x15fa04=>{const _0x45dce6=_0x5406ba;let _0x2cc472=config['portfolio'][_0x45dce6(0xb8)](_0x2444e9=>_0x2444e9[_0x45dce6(0x15d)]==_0x15fa04['coin']),_0x267428=Number(_0x2cc472[_0x45dce6(0x94)]),_0x44703a=_0x15fa04[_0x45dce6(0xfb)]/_0x38ea64*0x64,_0x427e8a=_0x267428*_0x38ea64/0x64/_0x15fa04['last']-_0x15fa04[_0x45dce6(0x1a2)];_0x15fa04[_0x45dce6(0x94)]=formatResult(_0x44703a,0x3),_0x15fa04[_0x45dce6(0x1a1)]=formatResult(_0x267428,0x3),_0x15fa04[_0x45dce6(0x128)]=formatResult(_0x427e8a,0x8),_0x15fa04[_0x45dce6(0xbc)]='',_0x15fa04['valid']=![];if(_0x15fa04[_0x45dce6(0x15d)]!=config[_0x45dce6(0x217)]){if(_0x15fa04[_0x45dce6(0x94)]>_0x267428)_0x15fa04[_0x45dce6(0xbc)]=_0x45dce6(0xf1),_0x15fa04[_0x45dce6(0xf9)]=checkMinimums(_0x15fa04);else _0x15fa04[_0x45dce6(0x94)]<_0x267428&&(_0x15fa04['side']=_0x45dce6(0x212),_0x15fa04[_0x45dce6(0xf9)]=checkMinimums(_0x15fa04));}_0x15fa04[_0x45dce6(0x1f9)]=_0x15fa04[_0x45dce6(0x94)]/_0x15fa04[_0x45dce6(0x1a1)]-0x1;if(_0x15fa04[_0x45dce6(0x16e)]=='filled'||_0x15fa04['orderstatus']==_0x45dce6(0x131))_0x15fa04['orderstatus']='none';}),currentCoins['sort']((_0x3a548f,_0x601f9b)=>_0x3a548f[_0x5406ba(0x1f9)]<_0x601f9b[_0x5406ba(0x1f9)]?0x1:_0x601f9b[_0x5406ba(0x1f9)]<_0x3a548f['delta']?-0x1:0x0);const _0x362cb8=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x362cb8[_0x5406ba(0x22d)],'usd':_0x362cb8['usd'],'portfolio':JSON['stringify'](currentCoins),'threshold':_0x56f5dd},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});if(_0x57c303){if(config['headless'])headlessMode({'portfolio':currentCoins,'threshold':_0x56f5dd});else lockOrders==ORDERS[_0x5406ba(0x1e5)]&&!coolingDown&&notifyBalance({'portfolio':currentCoins,'threshold':_0x56f5dd});}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0xeeff3c=getNormalizedPerformance();getStartingBalances(_0xeeff3c),emitPerformance(_0xeeff3c);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}function getPnL(){const _0x27ec74=_0x874150;let _0x5934c3=dbCoinResults[_0x27ec74(0x13b)](_0x27ec74(0x1b9))[_0x27ec74(0xfb)](),_0x16833c=0x0;return Object['entries'](_0x5934c3)['forEach'](([_0x56220e,_0xf39aef])=>{_0x16833c+=_0xf39aef['realizedPnL'];}),_0x16833c;}async function storePerformance(){const _0x22b947=_0x874150;if(!lastBalances)return;let _0x32b26e=[],_0x4d8d17;const _0x5335bf=getPnL();let _0x3eba57=JSON[_0x22b947(0x1ae)](lastBalances[_0x22b947(0xdb)]);_0x3eba57[_0x22b947(0x11a)]((_0x4a69c9,_0x5983f3)=>_0x4a69c9['coin']>_0x5983f3[_0x22b947(0x15d)]?0x1:_0x5983f3[_0x22b947(0x15d)]>_0x4a69c9[_0x22b947(0x15d)]?-0x1:0x0),_0x3eba57[_0x22b947(0x93)](_0xc92973=>{const _0x28fa78=_0x22b947;let _0x51f209={'coin':_0xc92973[_0x28fa78(0x15d)],'number':_0xc92973[_0x28fa78(0x1a2)],'price':_0xc92973[_0x28fa78(0x1a9)]};_0x32b26e['push'](_0x51f209);});const _0x4785b0=await getFiat(),_0xdaae14=getTimeStamp()[_0x22b947(0x189)]('\x20')[0x0],_0x268760=dbPerformance[_0x22b947(0x13b)](_0x22b947(0x154))[_0x22b947(0xb8)]({'date':_0xdaae14})['value']();_0x4d8d17={'date':_0xdaae14,'eur':_0x4785b0[_0x22b947(0x22d)],'usd':_0x4785b0[_0x22b947(0x146)],'coins':_0x32b26e,'pnl':_0x5335bf},_0x268760?_0x4d8d17['date']!=config['startdate']&&dbPerformance[_0x22b947(0x13b)](_0x22b947(0x154))[_0x22b947(0xb8)]({'date':_0xdaae14})['assign'](_0x4d8d17)[_0x22b947(0x85)]():dbPerformance[_0x22b947(0x13b)](_0x22b947(0x154))[_0x22b947(0x1a6)](_0x4d8d17)[_0x22b947(0x85)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x1fd944=_0x874150;let _0x420220=[];if(dbPerformance['has']('data')[_0x1fd944(0xfb)]()){let _0x250461=dbPerformance[_0x1fd944(0x13b)](_0x1fd944(0x154))['cloneDeep']()[_0x1fd944(0xd6)](_0x49220e=>{const _0x4c404d=_0x1fd944;if(_0x49220e[_0x4c404d(0x1b9)][_0x4c404d(0x10c)]==0x0)return![];else return!![];})[_0x1fd944(0x182)](_0x1fd944(0x19a))[_0x1fd944(0xfb)](),_0x120e67=[...config[_0x1fd944(0xef)]];_0x120e67[_0x1fd944(0x11a)]((_0x35a76a,_0x3da67c)=>_0x35a76a['date']>_0x3da67c[_0x1fd944(0x19a)]?-0x1:_0x3da67c[_0x1fd944(0x19a)]>_0x35a76a[_0x1fd944(0x19a)]?0x1:0x0);let _0x1f5eae=0x1,_0x9a1144=[],_0x354a87=0x0;_0x250461[_0x1fd944(0x197)]()['reverse']()['forEach']((_0x4f3819,_0x37ffd4)=>{const _0x325475=_0x1fd944;if(_0x120e67[_0x354a87]){if(_0x250461[_0x250461[_0x325475(0x10c)]-_0x37ffd4]&&_0x120e67[_0x354a87]['date']==_0x250461[_0x250461[_0x325475(0x10c)]-_0x37ffd4][_0x325475(0x19a)]){if(_0x37ffd4<_0x250461[_0x325475(0x10c)]){let _0x41d3df=0x0,_0x32ee90=0x0;_0x250461[_0x250461['length']-_0x37ffd4][_0x325475(0x1b9)][_0x325475(0x93)](_0x154eb0=>{const _0x4de163=_0x325475;_0x32ee90+=_0x154eb0['number']*_0x154eb0[_0x4de163(0x1f4)];}),_0x120e67[_0x354a87][_0x325475(0x96)][_0x325475(0x93)](_0x898c0b=>{const _0x1c56be=_0x325475;_0x41d3df+=_0x898c0b[_0x1c56be(0x1a2)]*_0x898c0b[_0x1c56be(0x1f4)];}),_0x1f5eae*=_0x41d3df/(_0x32ee90-_0x41d3df)+0x1;}_0x354a87++;}}let _0x4b737f=0x0;_0x4f3819[_0x325475(0x1b9)][_0x325475(0x93)](_0x4bf1e7=>{const _0x21715d=_0x325475;_0x4b737f+=_0x4bf1e7[_0x21715d(0x1a2)]*_0x4bf1e7[_0x21715d(0x1f4)];}),_0x9a1144[_0x250461[_0x325475(0x10c)]-_0x37ffd4-0x1]=_0x4b737f*(_0x1f5eae-0x1);});let _0x196b08=[];_0x120e67=[...config[_0x1fd944(0xef)]]||[];let _0x330839=0x0;_0x354a87=0x0,_0x250461['forEach']((_0x19c827,_0x7226a0)=>{const _0x400bec=_0x1fd944;if(_0x120e67[_0x354a87]){const _0x58ab43=fns['parse'](_0x120e67[_0x354a87][_0x400bec(0x19a)],_0x400bec(0x7c),new Date()),_0x38777f=fns['parse'](_0x19c827[_0x400bec(0x19a)],_0x400bec(0x7c),new Date());if(fns[_0x400bec(0x14a)](_0x58ab43,_0x38777f)){let _0x4cc128=0x0;_0x120e67[_0x354a87]['changes'][_0x400bec(0x93)](_0x4063c3=>{const _0x594ac6=_0x400bec;!_0x196b08[_0x4063c3[_0x594ac6(0x15d)]]?_0x196b08[_0x4063c3['coin']]=_0x4063c3[_0x594ac6(0x1a2)]:(_0x4cc128=_0x196b08[_0x4063c3[_0x594ac6(0x15d)]],_0x196b08[_0x4063c3['coin']]+=_0x4063c3[_0x594ac6(0x1a2)]);const _0x3478e7=_0x19c827['coins']['find'](_0xcce65d=>_0xcce65d[_0x594ac6(0x15d)]==_0x4063c3[_0x594ac6(0x15d)]);(!_0x3478e7||_0x3478e7[_0x594ac6(0x1a2)]==0x0)&&(_0x330839+=(-_0x4063c3['number']-_0x4cc128)*_0x4063c3['price']);}),_0x354a87++;}}_0x19c827[_0x400bec(0x1b9)][_0x400bec(0x93)]((_0x2e299c,_0x29ccd2)=>{const _0x1cf14e=_0x400bec;_0x196b08[_0x2e299c[_0x1cf14e(0x15d)]]&&(_0x2e299c[_0x1cf14e(0xe3)]=_0x196b08[_0x2e299c[_0x1cf14e(0x15d)]]);}),_0x420220[_0x400bec(0x1a6)]({'date':_0x19c827[_0x400bec(0x19a)],'eur':_0x19c827[_0x400bec(0x22d)],'usd':_0x19c827[_0x400bec(0x146)],'offset':_0x9a1144[_0x7226a0],'netoffset':_0x330839,'coins':_0x19c827[_0x400bec(0x1b9)],'pnl':_0x19c827[_0x400bec(0x226)]});});}return _0x420220;}function emitPerformance(_0x16d9c1){const _0x26f626=_0x874150;_0x16d9c1[_0x26f626(0x10c)]!==0x0?(proxyEmit(_0x26f626(0xf2),_0x16d9c1),lastPerformanceEmitted=getDate()):proxyEmit('performance',[]);}function getPerf(_0x48e3ed,_0x5d0a45){const _0x53793d=_0x874150;let _0x13250c=0x0,_0x34c8b9=0x0,_0x3cad8c=0x0;_0x48e3ed[_0x53793d(0x1b9)][_0x53793d(0x93)](_0x189ca8=>{const _0x387bad=_0x53793d;_0x13250c+=_0x189ca8[_0x387bad(0x1a2)]*_0x189ca8[_0x387bad(0x1f4)];});_0x5d0a45&&(_0x13250c+=_0x48e3ed[_0x53793d(0x201)]);if(config['basecoin']==='BTC'||config['basecoin']===_0x53793d(0x222)||config[_0x53793d(0x217)]===_0x53793d(0x16b))_0x34c8b9=_0x13250c*_0x48e3ed['eur'],_0x3cad8c=_0x13250c*_0x48e3ed[_0x53793d(0x146)];else{if(usdBasecoins[_0x53793d(0x110)](config['basecoin']))_0x34c8b9=_0x13250c*_0x48e3ed[_0x53793d(0x22d)]/_0x48e3ed['usd'],_0x3cad8c=_0x13250c;else config[_0x53793d(0x217)]===_0x53793d(0x7e)&&(_0x34c8b9=_0x13250c,_0x3cad8c=_0x13250c*_0x48e3ed[_0x53793d(0x146)]/_0x48e3ed[_0x53793d(0x22d)]);}return[_0x13250c,_0x34c8b9,_0x3cad8c];}function _0x1893(_0x527e38,_0x4259fc){const _0x215d78=_0x3eb6();return _0x1893=function(_0x41b8c2,_0x2eca5){_0x41b8c2=_0x41b8c2-0x6a;let _0x3eb67f=_0x215d78[_0x41b8c2];return _0x3eb67f;},_0x1893(_0x527e38,_0x4259fc);}function CurrencyFactor(_0x3e5d3d,_0x291924,_0x2d4298){const _0x4756f7=_0x874150;let _0x470195;if(_0x291924==='BTC'||_0x291924===_0x4756f7(0x222)||_0x291924===_0x4756f7(0x16b))_0x470195=_0x2d4298===_0x4756f7(0x7e)?_0x3e5d3d[_0x4756f7(0x22d)]:_0x3e5d3d[_0x4756f7(0x146)];else{if(usdBasecoins['includes'](_0x291924))_0x470195=_0x2d4298===_0x4756f7(0x7e)?_0x3e5d3d[_0x4756f7(0x22d)]/_0x3e5d3d[_0x4756f7(0x146)]:0x1;else _0x291924===_0x4756f7(0x7e)&&(_0x470195=_0x2d4298===_0x4756f7(0x7e)?0x1:_0x3e5d3d[_0x4756f7(0x146)]/_0x3e5d3d['eur']);}return _0x470195;}function getKPIs(_0x93a4d5,_0x331f6b=_0x874150(0x7e)){const _0x450428=_0x874150,_0x251fcd=config['basecoin'],_0x2122e4=lastBalances,_0x2aef06=currentCoins,_0xe3140b=getNormalizedPerformance(),_0x541680=CurrencyFactor(_0x2122e4,config[_0x450428(0x217)],_0x331f6b);let _0x3ddecb=0x0;_0x2aef06[_0x450428(0x93)](_0x1aa1d6=>{const _0x2b48a1=_0x450428;_0x3ddecb+=_0x1aa1d6[_0x2b48a1(0x1a2)]*_0x1aa1d6['last'];});_0x93a4d5[_0x450428(0x110)](_0x450428(0x1ba))&&(_0x3ddecb*=_0x541680);let _0x330e87;if(_0x3ddecb!==0x0){if(_0x93a4d5==='basecoin'||_0x93a4d5===_0x450428(0x1ba)){if(_0x93a4d5===_0x450428(0x217))_0x330e87=(_0x3ddecb/startingBalances[_0x450428(0x217)]-0x1)*0x64;else{if(_0x331f6b===_0x450428(0x7e))_0x330e87=(_0x3ddecb/startingBalances[_0x450428(0x22d)]-0x1)*0x64;else _0x330e87=(_0x3ddecb/startingBalances[_0x450428(0x146)]-0x1)*0x64;}}if(_0x93a4d5['includes']('net')){let _0x27a8d4=0x0;if(startingBalances[_0x450428(0x1b9)])_0x2aef06[_0x450428(0x93)](_0x1775b5=>{const _0x245efc=_0x450428;let _0x4ef7bd=startingBalances['coins'][_0x245efc(0xb8)](_0x1bd7e5=>_0x1bd7e5[_0x245efc(0x15d)]===_0x1775b5[_0x245efc(0x15d)]);if(_0x4ef7bd&&_0x4ef7bd[_0x245efc(0x15d)]&&_0x1775b5[_0x245efc(0x1a2)]!==0x0)_0x27a8d4+=_0x4ef7bd[_0x245efc(0x1a2)]*_0x1775b5['last'];});let _0x55850d=0x0;if(_0xe3140b[_0x450428(0x10c)]!==0x0){let _0x2ed1e1=_0xe3140b[_0xe3140b[_0x450428(0x10c)]-0x1];_0x55850d=_0x2ed1e1[_0x450428(0xdd)];}_0x27a8d4-=_0x55850d;let _0x396c98;_0x93a4d5===_0x450428(0x130)&&(_0x396c98=startingBalances['basecoin']),_0x93a4d5===_0x450428(0x10d)&&(_0x396c98=_0x331f6b===_0x450428(0x7e)?startingBalances[_0x450428(0x22d)]:startingBalances[_0x450428(0x146)],_0x27a8d4*=_0x541680),_0x330e87=(_0x3ddecb-_0x27a8d4)/_0x396c98*0x64,_0x3ddecb=_0x3ddecb-_0x27a8d4;}if(_0x93a4d5[_0x450428(0x110)](_0x450428(0x226))){if(_0xe3140b[_0x450428(0x10c)]!==0x0&&_0x2aef06['length']!==0x0){let _0x5bc9e1,_0x5deb0d=_0xe3140b[_0xe3140b[_0x450428(0x10c)]-0x1]['pnl'];_0x93a4d5[_0x450428(0x110)](_0x450428(0x1ba))?(_0x5bc9e1=_0x331f6b===_0x450428(0x7e)?startingBalances['eur']:startingBalances[_0x450428(0x146)],_0x5deb0d*=CurrencyFactor(_0x2122e4,_0x251fcd,_0x331f6b)):_0x5bc9e1=startingBalances['basecoin'],_0x330e87=_0x5deb0d/_0x5bc9e1*0x64,_0x3ddecb=_0x5deb0d;}}if(_0x330e87){if(_0x330e87<0x64)_0x330e87=_0x330e87[_0x450428(0xa4)](0x2);else{if(_0x330e87<0x3e8)_0x330e87=_0x330e87[_0x450428(0xa4)](0x1);else _0x330e87=_0x330e87[_0x450428(0xa4)](0x0);}}else _0x330e87=Number('0')[_0x450428(0xa4)](0x2);if(_0x3ddecb){if(Math[_0x450428(0xcc)](_0x3ddecb)<0.000001)_0x3ddecb=_0x3ddecb[_0x450428(0xa4)](0x2);else{if(Math[_0x450428(0xcc)](_0x3ddecb)<0.1)_0x3ddecb=_0x3ddecb[_0x450428(0xa4)](0x6);else{if(Math[_0x450428(0xcc)](_0x3ddecb)<0x1)_0x3ddecb=_0x3ddecb[_0x450428(0xa4)](0x5);else{if(Math[_0x450428(0xcc)](_0x3ddecb)<0xa)_0x3ddecb=_0x3ddecb['toFixed'](0x4);else{if(Math['abs'](_0x3ddecb)<0x64)_0x3ddecb=_0x3ddecb['toFixed'](0x3);else{if(Math[_0x450428(0xcc)](_0x3ddecb)<0x3e8)_0x3ddecb=_0x3ddecb['toFixed'](0x2);else _0x3ddecb=_0x3ddecb[_0x450428(0xa4)](0x2);}}}}}}else _0x3ddecb=Number('0')[_0x450428(0xa4)](0x2);}else _0x330e87=Number('0')[_0x450428(0xa4)](0x2);if(_0x330e87>=0x0)_0x330e87='+'+_0x330e87;return{'value':_0x3ddecb,'change':_0x330e87};}async function getStartingBalances(_0x44ecb9,_0x45ecf1=!![]){const _0x1f4e21=_0x874150;if(_0x44ecb9[_0x1f4e21(0x10c)]!==0x0){const [_0x19c071,_0x1403ec,_0x1e8a04]=getPerf(_0x44ecb9[0x0],!![]);let _0x189409=[];config['portfolio'][_0x1f4e21(0x93)](_0x2b302e=>{const _0x21a18a=_0x1f4e21;let _0x48147d=0x0,_0x1bf06f;config[_0x21a18a(0xef)][_0x21a18a(0x93)](_0xcb9221=>{const _0x4e4c08=_0x21a18a;let _0x58924b=_0xcb9221[_0x4e4c08(0x96)][_0x4e4c08(0xb8)](_0x954290=>_0x954290[_0x4e4c08(0x15d)]==_0x2b302e['coin']);if(_0x58924b){_0x48147d+=_0x58924b[_0x4e4c08(0x1a2)];if(!_0x1bf06f)_0x1bf06f=_0x58924b[_0x4e4c08(0x1f4)];}}),_0x189409['push']({'coin':_0x2b302e['coin'],'number':_0x48147d,'initialprice':_0x1bf06f});});const _0x2b2b62={'basecoin':_0x19c071,'eur':_0x1403ec,'usd':_0x1e8a04,'coins':_0x189409};if(_0x45ecf1)proxyEmit(_0x1f4e21(0x1f8),_0x2b2b62);startingBalances=_0x2b2b62;}}function headlessMode(_0x597c7f){const _0x2b47c6=_0x874150;let _0x2f03ee=_0x597c7f['portfolio'],_0x3acdb3=_0x597c7f[_0x2b47c6(0x1bd)],_0x154e69=[];for(let _0x2b057a of _0x2f03ee){if(_0x2b057a['coin']!=config[_0x2b47c6(0x217)]){if(_0x2b057a[_0x2b47c6(0x1f9)]>=_0x3acdb3/0x64){if(_0x2b057a[_0x2b47c6(0xf9)])_0x154e69[_0x2b47c6(0x1a6)](_0x2b057a);}else{if(_0x2b057a['delta']<=-_0x3acdb3/0x64){if(_0x2b057a[_0x2b47c6(0xf9)])_0x154e69[_0x2b47c6(0x1a6)](_0x2b057a);}}}}_0x154e69['length']>0x0&&placeOrder(_0x154e69);}function notifyBalance(_0x1846b5){const _0x1acd15=_0x874150;let _0x2dba4c=_0x1846b5[_0x1acd15(0xdb)],_0xc0c90f=_0x1846b5[_0x1acd15(0x1bd)],_0x33ad26=[];for(let _0x6f3e0 of _0x2dba4c){if(_0x6f3e0[_0x1acd15(0x15d)]!=config[_0x1acd15(0x217)]){if(_0x6f3e0[_0x1acd15(0x1f9)]>=_0xc0c90f/0x64){if(_0x6f3e0['valid'])_0x33ad26[_0x1acd15(0x1a6)](_0x6f3e0);}else{if(_0x6f3e0[_0x1acd15(0x1f9)]<=-_0xc0c90f/0x64){if(_0x6f3e0[_0x1acd15(0xf9)])_0x33ad26['push'](_0x6f3e0);}}}}if(_0x33ad26['length']>0x0){let _0xbed7ec=_0x33ad26['map'](_0x225c50=>_0x225c50['coin']);_0xbed7ec[_0x1acd15(0x11a)]();let _0x8c63c3=_0xbed7ec[_0x1acd15(0x234)](',\x20');if(!lastCoinsToBalance)logHistory(_0x1acd15(0x11b),_0x1acd15(0x14f));lastCoinsToBalance=_0x8c63c3;}}function symbolToCoin(_0x4d1fce){const _0x3f16e=_0x874150;let _0x29d521;if(_0x4d1fce[_0x3f16e(0x110)]('/'+config[_0x3f16e(0x217)]))_0x29d521=_0x4d1fce[_0x3f16e(0x166)]('/'+config[_0x3f16e(0x217)],'');if(_0x4d1fce['includes'](config[_0x3f16e(0x217)]+'/'))_0x29d521=_0x4d1fce[_0x3f16e(0x166)](config[_0x3f16e(0x217)]+'/','');return _0x29d521;}function setLockOrders(_0x1f14ba){const _0x6e0244=_0x874150;lockOrders=_0x1f14ba,logger['debug'](_0x6e0244(0x21b)+Object['keys'](ORDERS)[lockOrders]);}async function unlockOrders(_0x598c46=![]){const _0x1d0b2b=_0x874150;if(allOrdersPlaced&&lockOrders==ORDERS[_0x1d0b2b(0x164)]){setLockOrders(ORDERS[_0x1d0b2b(0xd0)]);if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);if(_0x598c46){const _0x426d29=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x426d29,setBlockTransactionDetection(![]);}validateOrdersState=_0x1d0b2b(0xe3),persistOpenOrders([]),setLockOrders(ORDERS[_0x1d0b2b(0x1e5)]);}}async function validateOrders(_0x3b27e5){const _0xd311e6=_0x874150;if(_0x3b27e5)validateOrdersState=_0x3b27e5;logger[_0xd311e6(0x21c)](_0xd311e6(0x184)+validateOrdersState+_0xd311e6(0xc9)+Object[_0xd311e6(0x1e9)](ORDERS)[lockOrders]);let _0x4354cd=[],_0x204e4f=config[_0xd311e6(0x116)]==_0xd311e6(0x14e)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0xd311e6(0x1d0)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0xd311e6(0x164)])return;logger[_0xd311e6(0x21c)](_0xd311e6(0xc2)+validateOrdersState);for(let _0x2bb561=lastOrders['length']-0x1;_0x2bb561>=0x0;_0x2bb561--){let _0x17297b=lastOrders[_0x2bb561],_0x1c83bd=![];_0x17297b[_0xd311e6(0xb7)]>0x0&&(_0x1c83bd=!![]),_0x4354cd['push'](_0x1c83bd),_0x1c83bd&&config[_0xd311e6(0x116)]!=_0xd311e6(0x14e)&&logHistory(_0xd311e6(0x150),'Order\x20filled:\x20'+_0x17297b[_0xd311e6(0xb9)]+'\x20'+_0x17297b['side']+'\x20#'+formatResult(_0x17297b[_0xd311e6(0xb7)],0x8)+'\x20@'+formatResult(_0x17297b[_0xd311e6(0x1f4)],0x8)),_0x1c83bd&&lastOrders[_0xd311e6(0x1ed)](_0x2bb561,0x1);}persistOpenOrders(lastOrders);const _0x2980ba=coolingDown?_0xd311e6(0x173):_0xd311e6(0x190);if(validateOrdersState==_0xd311e6(0xe3)){validateOrdersState=_0xd311e6(0xb0);if(_0x4354cd[_0xd311e6(0x110)](![])){}else await unlockOrders();}else{if(validateOrdersState=='ongoing'){if(_0x4354cd[_0xd311e6(0x110)](![])){}else await unlockOrders();}else{if(validateOrdersState==_0xd311e6(0xa2))_0x4354cd[_0xd311e6(0x110)](![])&&(config[_0xd311e6(0x116)]=='market'?logHistory('success','Order(s)\x20not\x20validated\x20after\x20'+Math[_0xd311e6(0x88)](_0x204e4f*validateOrderInterval/0xea60)+_0xd311e6(0x1c1)+_0x2980ba):(await cancelOrders(),logHistory('success',_0xd311e6(0x87)+Math['round'](_0x204e4f*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x2980ba))),await unlockOrders(!![]);else{if(validateOrdersState==_0xd311e6(0x161)){if(config[_0xd311e6(0x116)]!=_0xd311e6(0x14e))logHistory('success',_0xd311e6(0x1d1)+_0x2980ba);await unlockOrders(!![]);}}}}}async function cancelOrders(){lastOrders['forEach'](async _0x2bdfa5=>{const _0x431e49=_0x1893;try{const _0x57939b=await exchange[_0x431e49(0x142)](_0x2bdfa5[_0x431e49(0x1ac)],_0x2bdfa5[_0x431e49(0xb9)]);}catch(_0x410dd9){if(_0x410dd9[_0x431e49(0xc1)]()['includes']('OrderNotFound')){}else await handleError(_0x410dd9,'cancelOrders()');}});}async function initCoinResults(_0x3f566a){const _0x552a49=_0x874150;_0x3f566a?logger['debug'](_0x552a49(0x1c8)+_0x3f566a):logger['debug']('Initializing\x20coin\x20results'),config['portfolio'][_0x552a49(0x93)](_0x50ac39=>{const _0xada2d3=_0x552a49;if(!_0x50ac39['excluded']&&_0x50ac39[_0xada2d3(0x15d)]!=config[_0xada2d3(0x217)]){const _0x2ee6c0=currentCoins[_0xada2d3(0xb8)](_0x2933ec=>_0x2933ec[_0xada2d3(0x15d)]==_0x50ac39[_0xada2d3(0x15d)]),_0x20e9ac=gTicker[noslash(_0x50ac39['symbol'])];let _0xe4ea58=_0x2ee6c0?_0x2ee6c0['number']:null,_0x5083cc=_0x50ac39['reverse']?0x1/_0x20e9ac:_0x20e9ac,_0x553237;config['liquidity'][_0xada2d3(0x93)](_0x24605f=>{const _0xc72f6d=_0xada2d3;!_0x553237&&(_0x553237=_0x24605f['changes'][_0xc72f6d(0xb8)](_0x280674=>_0x280674[_0xc72f6d(0x15d)]==_0x50ac39[_0xc72f6d(0x15d)]),_0x553237&&(_0xe4ea58=_0x553237[_0xc72f6d(0x1a2)],_0x5083cc=_0x553237[_0xc72f6d(0x1f4)]));});let _0x3d60fe=dbCoinResults['get']('coins')[_0xada2d3(0xb8)]({'coin':_0x50ac39['coin']})[_0xada2d3(0xfb)]();if(!_0x3d60fe){const _0x549b30={'coin':_0x50ac39[_0xada2d3(0x15d)],'number':_0xe4ea58,'breakeven':_0x5083cc,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0xada2d3(0x13b)](_0xada2d3(0x1b9))[_0xada2d3(0x1a6)](_0x549b30)[_0xada2d3(0x85)]();}else{if(_0x3f566a&&_0x50ac39['coin']==_0x3f566a){const _0x550658={'coin':_0x50ac39[_0xada2d3(0x15d)],'number':_0xe4ea58,'breakeven':_0x5083cc,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0xada2d3(0x13b)](_0xada2d3(0x1b9))[_0xada2d3(0xb8)]({'coin':_0x50ac39['coin']})[_0xada2d3(0x1ab)](_0x550658)['write']();}}}});}async function placeOrder(_0x2e2a87){const _0x306009=_0x874150,_0x3faa84=config[_0x306009(0x116)]==_0x306009(0x14e)?_0x306009(0x14e):'limit';if(lockOrders==ORDERS['UNLOCKED']&&!coolingDown){setLockOrders(ORDERS['LOCKED']);while(transactionDetectionOngoing){await sleep(0x64);}logger[_0x306009(0x21c)](_0x306009(0xf7)+_0x2e2a87[_0x306009(0x112)](_0x350f6b=>_0x350f6b['coin'])['join'](',\x20')),lastCoinsToBalance='',allOrdersPlaced=![],validateOrdersState='initial';let _0x266690=![];lastOrders=[];const _0xb5d824=config['threshold'];for(const _0x40edf4 of _0x2e2a87){let _0x2fd16b,_0x276d86,_0xc1c20c,_0x49a62f,_0x59e15d,_0x1c9cce=_0x40edf4['symbol'];logger[_0x306009(0x21c)]('Trigger:\x20'+_0x40edf4[_0x306009(0x15d)]+'\x20'+_0x40edf4[_0x306009(0x1a2)]+'\x20'+_0x40edf4[_0x306009(0x1a9)]+'\x20'+_0x40edf4['distribution']+'%\x20'+_0x40edf4[_0x306009(0x1a1)]+'%\x20'+(0x64*_0x40edf4['delta'])[_0x306009(0xa4)](0x2)+_0x306009(0x1bb)+_0xb5d824[_0x306009(0xa4)](0x2)+'%)');const _0x586357=currentCoins[_0x306009(0xb8)](_0x1c022c=>_0x1c022c['coin']==_0x40edf4['coin']);_0x586357&&(_0x586357[_0x306009(0x8e)]=_0x40edf4[_0x306009(0x1a2)]);try{const _0x42680a=await exchange[_0x306009(0x11d)](_0x1c9cce);_0x2fd16b=_0x40edf4['reverse']?0x1/_0x40edf4[_0x306009(0x1a9)]:_0x40edf4[_0x306009(0x1a9)],_0x276d86=_0x42680a[_0x306009(0x185)],_0xc1c20c=_0x42680a[_0x306009(0xfc)];_0x40edf4[_0x306009(0x177)]?(_0x49a62f=_0x40edf4['side']==_0x306009(0x212)?_0x306009(0xf1):_0x306009(0x212),_0x59e15d=Math[_0x306009(0xcc)](_0x40edf4['trade'])/_0x2fd16b):(_0x49a62f=_0x40edf4['side'],_0x59e15d=Math['abs'](_0x40edf4[_0x306009(0x128)]));_0x3faa84==_0x306009(0x153)&&(config[_0x306009(0x116)]==_0x306009(0xc3)&&(_0x2fd16b=_0x49a62f=='buy'?_0x276d86:_0xc1c20c),config['ordertype']==_0x306009(0x1d4)&&(_0x2fd16b=_0x49a62f==_0x306009(0x212)?_0xc1c20c:_0x276d86));_0x59e15d=formatResult(_0x59e15d,0x8),_0x2fd16b=formatResult(_0x2fd16b,0x8);const _0x3434a7=_0x49a62f==_0x306009(0xf1)?config[_0x306009(0x229)]?String[_0x306009(0x1de)]('0x'+config[_0x306009(0x229)])+'\x20':'':config[_0x306009(0x117)]?String['fromCodePoint']('0x'+config['emojibuy'])+'\x20':'',_0x355adf=_0x3faa84==_0x306009(0x14e)?_0x306009(0x200):config[_0x306009(0x116)]==_0x306009(0xc3)?_0x306009(0x1f1):_0x306009(0x10b),_0x3ce661=(Math['floor'](Math[_0x306009(0x15f)]()*0x35a4e900)+0x5f5e100)[_0x306009(0xc1)]();lastOrders['push']({'customId':_0x3ce661,'symbol':_0x1c9cce,'coin':_0x40edf4[_0x306009(0x15d)],'amount':_0x59e15d,'price':_0x2fd16b,'side':_0x49a62f,'reverse':_0x40edf4[_0x306009(0x177)],'filled':0x0});let _0xaca680;_0x3faa84==_0x306009(0x14e)?_0x49a62f=='buy'&&[_0x306009(0x107),'Bitget','Cex',_0x306009(0x12e),'Huobipro'][_0x306009(0x110)](config[_0x306009(0x1df)])?_0xaca680=await exchange[_0x306009(0x1c3)](_0x1c9cce,_0x3faa84,_0x49a62f,_0x59e15d,_0x2fd16b):_0xaca680=await exchange[_0x306009(0x1c3)](_0x1c9cce,_0x3faa84,_0x49a62f,_0x59e15d,undefined):_0xaca680=await exchange[_0x306009(0x1c3)](_0x1c9cce,_0x3faa84,_0x49a62f,_0x59e15d,_0x2fd16b);const _0xc8eb4f=lastOrders[_0x306009(0x10c)]-0x1;if(_0xc8eb4f>=0x0&&lastOrders[_0xc8eb4f][_0x306009(0x228)]==_0x3ce661){lastOrders[_0xc8eb4f][_0x306009(0x1ac)]=_0xaca680['id'];if(_0xaca680[_0x306009(0x12a)])lastOrders[_0xc8eb4f]['amount']=_0xaca680[_0x306009(0x12a)];if(_0xaca680[_0x306009(0x1f4)])lastOrders[_0xc8eb4f]['price']=_0xaca680[_0x306009(0x1f4)];lastOrders[_0xc8eb4f][_0x306009(0x1a3)]=_0xaca680[_0x306009(0x1a3)];}if(_0xaca680[_0x306009(0x12a)])_0x59e15d=_0xaca680[_0x306009(0x12a)];if(_0xaca680[_0x306009(0x1f4)])_0x2fd16b=_0xaca680['price'];if(_0x3faa84==_0x306009(0x14e))logHistory(_0x306009(0x150),''+_0x3434a7+_0x355adf+_0x306009(0x1d5)+_0x1c9cce+'\x20'+_0x49a62f+'\x20#'+formatResult(_0x59e15d,0x8)+'\x20@'+formatResult(_0x2fd16b,0x8));else logHistory(_0x306009(0x150),''+_0x3434a7+_0x355adf+_0x306009(0x1d5)+_0x1c9cce+'\x20'+_0x49a62f+'\x20#'+formatResult(_0x59e15d,0x8)+'\x20@'+formatResult(_0x2fd16b,0x8));logger[_0x306009(0x21c)](_0x306009(0x155)+_0xaca680['id']+_0x306009(0x1b8)+_0x3ce661);if(config[_0x306009(0xcd)]!=0x0){let _0x4ec5f4=null;if(cooldownTracker[_0x306009(0x10c)]==config['cooldown']-0x1)_0x4ec5f4=cooldownTracker[_0x306009(0x1f0)]();const _0x404857=getTimeStamp();cooldownTracker[_0x306009(0x1a6)](_0x404857);if(_0x4ec5f4){const _0x54c363=fns[_0x306009(0x8a)](new Date(_0x404857),new Date(_0x4ec5f4));if(_0x54c363<cooldownInterval){logHistory(_0x306009(0xc8),_0x306009(0x7b)+config[_0x306009(0xcd)]+_0x306009(0x187)+cooldownInterval/0x3c+_0x306009(0xa9)+cooldownPeriod/(0xe10*0x3e8)+'\x20hour'),coolingDown=!![];break;}}}}catch(_0x1bc890){if(_0x1bc890['toString']()[_0x306009(0x110)](_0x306009(0xc0)))lastOrders=lastOrders[_0x306009(0xd6)](_0x319abf=>_0x319abf['symbol']!=_0x1c9cce),logHistory(_0x306009(0xc8),'Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x1c9cce),_0x266690=!![];else{if(_0x1bc890['toString']()['includes'](_0x306009(0x20e)))lastOrders=lastOrders[_0x306009(0xd6)](_0xa3815f=>_0xa3815f[_0x306009(0xb9)]!=_0x1c9cce),logHistory(_0x306009(0xc8),_0x306009(0xa1)+_0x1c9cce),_0x266690=!![];else{if(_0x1bc890[_0x306009(0xc1)]()[_0x306009(0x110)](_0x306009(0x1e0)))lastOrders=lastOrders[_0x306009(0xd6)](_0x16d5ae=>_0x16d5ae[_0x306009(0xb9)]!=_0x1c9cce),logHistory(_0x306009(0xc8),_0x306009(0x232)+_0x1c9cce),logger[_0x306009(0x21c)](_0x1bc890),_0x266690=!![];else _0x1bc890[_0x306009(0xc1)]()[_0x306009(0x110)]('must\x20be\x20greater\x20than\x20minimum\x20amount')?(lastOrders=lastOrders[_0x306009(0xd6)](_0xea2aa=>_0xea2aa['symbol']!=_0x1c9cce),logHistory(_0x306009(0xc8),_0x306009(0x13c)+_0x1c9cce),_0x266690=!![]):(lastOrders=lastOrders[_0x306009(0xd6)](_0x75869d=>_0x75869d[_0x306009(0xb9)]!=_0x1c9cce),await handleError(_0x1bc890,_0x306009(0xd5),_0x1c9cce));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x306009(0x10c)]>0x0){const _0x38d438=config['ordertype']==_0x306009(0x14e)?validateOrderTimeout*0x3c*0x3e8:config[_0x306009(0x1d0)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x499629=_0x306009;validateOrders(_0x499629(0xa2));},_0x38d438);}else unlockOrders();_0x266690&&config[_0x306009(0x75)]&&(logHistory(_0x306009(0xc8),_0x306009(0xdc)+pauseBotMsg),await pauseBot(pauseBotInterval)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x306009(0x211),_0x306009(0x18e)));}else{if(coolingDown)!config[_0x306009(0x75)]&&logHistory(_0x306009(0xc8),_0x306009(0x1c0));else lockOrders!=ORDERS[_0x306009(0x1e5)]&&(!config[_0x306009(0x75)]&&(config[_0x306009(0x116)]=='market'?logHistory(_0x306009(0xc8),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated'):logHistory(_0x306009(0xc8),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled')));}}function persistOpenOrders(_0x5169e2){const _0x5d59bb=_0x874150,_0x12b854={...config,'openOrders':_0x5169e2};let _0xed5637=dbConfig[_0x5d59bb(0x13b)](_0x5d59bb(0xa8))['find']({'botID':botID})[_0x5d59bb(0xfb)]();_0xed5637&&dbConfig[_0x5d59bb(0x13b)]('bot')['find']({'botID':botID})[_0x5d59bb(0x1ab)](_0x12b854)[_0x5d59bb(0x85)]();}function restoreOrders(){const _0x3a68e3=_0x874150;let _0x15ca36;config['openOrders']&&allOpenOrders[_0x3a68e3(0x93)](_0x276331=>{const _0x81a0d=_0x3a68e3,_0x5436ea=config['openOrders'][_0x81a0d(0xb8)](_0x222d16=>_0x222d16[_0x81a0d(0x1ac)]==_0x276331['id']);_0x5436ea&&(lastOrders[_0x81a0d(0x1a6)](_0x5436ea),_0x15ca36=_0x276331['timestamp']);});if(lastOrders[_0x3a68e3(0x10c)]>0x0){setLockOrders(ORDERS[_0x3a68e3(0x164)]),validateOrdersState='ongoing',allOrdersPlaced=!![];const _0xfb5327=new Date()[_0x3a68e3(0xbd)](),_0x5f2cbf=config['ordertype']==_0x3a68e3(0x14e)?validateOrderTimeout*0x3c*0x3e8:config[_0x3a68e3(0x1d0)]*0x3c*0x3e8;if(_0x15ca36+_0x5f2cbf>_0xfb5327){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x9a6973=_0x3a68e3;validateOrders(_0x9a6973(0xa2));},_0x15ca36+_0x5f2cbf-_0xfb5327);}else validateOrders('final');}}async function sendMetricsTelegram(){const _0x14ab93=_0x874150;if(!coinsLoaded){process[_0x14ab93(0x221)]({'telegrammsg':_0x14ab93(0xaa)},_0x5b15ef=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x122896='';if(config['showname'])_0x122896=_0x14ab93(0xaf)+config[_0x14ab93(0x118)]+_0x14ab93(0xe0);else _0x122896=_0x14ab93(0xb2)+botID+_0x14ab93(0xe0);const _0x5a988d=config[_0x14ab93(0x217)],_0x491226=config[_0x14ab93(0x1ba)],_0x225c1f=getKPIs(_0x14ab93(0x217)),_0x3fbc10=getKPIs(_0x14ab93(0x1ba),_0x491226),_0x1270c9=getKPIs(_0x14ab93(0x130)),_0xbfd3c5=getKPIs(_0x14ab93(0x10d),_0x491226),_0xc36e8f=getKPIs(_0x14ab93(0x1ff)),_0x370f12=getKPIs(_0x14ab93(0x223),_0x491226);_0x5a988d['includes'](_0x491226)?(_0x122896+='<pre>',_0x122896+='Value\x20'+_0x5a988d+':\x20'+_0x225c1f['value']+'\x20('+_0x225c1f[_0x14ab93(0x10f)]+'%)\x0a',_0x122896+=_0x14ab93(0xed)+_0x5a988d+':\x20'+_0x1270c9[_0x14ab93(0xfb)]+'\x20('+_0x1270c9[_0x14ab93(0x10f)]+_0x14ab93(0xfe),_0x122896+=_0x14ab93(0xc4)+_0x5a988d+':\x20'+_0xc36e8f['value']+'\x20('+_0xc36e8f[_0x14ab93(0x10f)]+_0x14ab93(0xfe),_0x122896+=_0x14ab93(0x86)):(_0x122896+=_0x14ab93(0x97),_0x122896+=_0x14ab93(0x136)+_0x5a988d+':\x20'+_0x225c1f['value']+'\x20('+_0x225c1f['change']+'%)\x0a',_0x122896+='Value\x20'+_0x491226+':\x20'+_0x3fbc10[_0x14ab93(0xfb)]+'\x20('+_0x3fbc10['change']+_0x14ab93(0xfe),_0x122896+=_0x14ab93(0xed)+_0x5a988d+':\x20'+_0x1270c9['value']+'\x20('+_0x1270c9[_0x14ab93(0x10f)]+_0x14ab93(0xfe),_0x122896+=_0x14ab93(0xed)+_0x491226+':\x20'+_0xbfd3c5[_0x14ab93(0xfb)]+'\x20('+_0xbfd3c5[_0x14ab93(0x10f)]+_0x14ab93(0xfe),_0x122896+=_0x14ab93(0xc4)+_0x5a988d+':\x20'+_0xc36e8f[_0x14ab93(0xfb)]+'\x20('+_0xc36e8f[_0x14ab93(0x10f)]+_0x14ab93(0xfe),_0x122896+='PnL\x20'+_0x491226+':\x20'+_0x370f12[_0x14ab93(0xfb)]+'\x20('+_0x370f12[_0x14ab93(0x10f)]+'%)\x0a',_0x122896+='</pre>'),process[_0x14ab93(0x221)]({'telegrammsg':_0x122896},_0x2aba1b=>{});}async function sendPortfolioTelegram(){const _0x3a0be1=_0x874150;if(!coinsLoaded||!currentCoins[0x0]['distribution']){process[_0x3a0be1(0x221)]({'telegrammsg':_0x3a0be1(0xaa)},_0x1a947e=>{});return;}let _0x30a65f='';if(config[_0x3a0be1(0x18f)])_0x30a65f=_0x3a0be1(0xaf)+config[_0x3a0be1(0x118)]+_0x3a0be1(0x1fa);else _0x30a65f=_0x3a0be1(0xb2)+botID+_0x3a0be1(0x1fa);_0x30a65f+=_0x3a0be1(0x97),_0x30a65f+=_0x3a0be1(0x9f),_0x30a65f+=_0x3a0be1(0x12f),_0x30a65f+=_0x3a0be1(0x9f),currentCoins['forEach'](_0x4131fc=>{const _0x1d2449=_0x3a0be1;_0x30a65f+=_0x4131fc[_0x1d2449(0x15d)]['padEnd'](0x7)+'|\x20'+formatPad(_0x4131fc[_0x1d2449(0x94)],0x2,0x6)+'|\x20'+formatPad(_0x4131fc[_0x1d2449(0x1a1)],0x2,0x6)+'|\x20'+formatPad(_0x4131fc[_0x1d2449(0x1f9)]*0x64,0x2,0x6)+'\x0a';}),_0x30a65f+=_0x3a0be1(0x86),process[_0x3a0be1(0x221)]({'telegrammsg':_0x30a65f},_0x318982=>{});}function formatPad(_0x23d370,_0x369e22,_0x4ab323){const _0x1fb6b5=_0x874150,_0x3af272=formatResultString(_0x23d370,_0x369e22);return _0x3af272?_0x3af272[_0x1fb6b5(0x1c5)](_0x4ab323):''['padStart'](_0x4ab323);}function logHistory(_0x17afd7,_0x4ac440,_0x53d57e=''){const _0xc24859=_0x874150;logger[_0xc24859(0xde)](''+_0x4ac440);let _0x411015={'time':getTimeStamp(),'type':_0x17afd7,'event':_0x4ac440};dbLogs[_0xc24859(0x13b)](_0xc24859(0x1d7))[_0xc24859(0x1a6)](_0x411015)[_0xc24859(0x85)]();if(_0x53d57e=='')_0x53d57e=_0x4ac440;proxyEmit(_0xc24859(0x165),{'log':_0x411015,'summary':_0x53d57e}),process[_0xc24859(0x221)]({'telegram':{..._0x411015,'botname':config[_0xc24859(0x118)],'showname':config[_0xc24859(0x18f)]}},_0x5d9aad=>{});}function emitHistory(_0xaffbab={}){const _0x1e49fc=_0x874150;Object[_0x1e49fc(0x1e9)](_0xaffbab)[_0x1e49fc(0x10c)]==0x0&&(_0xaffbab={'type':['order',_0x1e49fc(0x165)],'event':'','page':0x1});if(_0xaffbab[_0x1e49fc(0x231)]['includes'](_0x1e49fc(0x165)))_0xaffbab[_0x1e49fc(0x231)]['splice'](_0xaffbab[_0x1e49fc(0x231)][_0x1e49fc(0x1ec)](_0x1e49fc(0x165)),0x1,'error',_0x1e49fc(0x11b),_0x1e49fc(0x211));if(dbLogs[_0x1e49fc(0x138)](_0x1e49fc(0x1d7))[_0x1e49fc(0xfb)]()){let _0x531eeb=dbLogs[_0x1e49fc(0x13b)](_0x1e49fc(0x1d7))[_0x1e49fc(0xd6)](_0x458987=>{const _0x18bc15=_0x1e49fc;if(_0xaffbab[_0x18bc15(0x231)][_0x18bc15(0x10c)]==0x0)return![];else return _0xaffbab['type'][_0x18bc15(0x110)](_0x458987[_0x18bc15(0x231)]);})[_0x1e49fc(0xd6)](_0x2c70e0=>{const _0x3340df=_0x1e49fc;if(_0xaffbab[_0x3340df(0x165)]=='')return!![];else return _0x2c70e0['event']['toLowerCase']()[_0x3340df(0x110)](_0xaffbab['event'][_0x3340df(0x205)]());})[_0x1e49fc(0x182)](_0x1e49fc(0x215)),_0x44c91d=_0x531eeb[_0x1e49fc(0xfb)]()['length'];_0x531eeb=_0x531eeb[_0x1e49fc(0x177)]()[_0x1e49fc(0x197)]((_0xaffbab['page']-0x1)*logPageSize,_0xaffbab['page']*logPageSize-0x1)['reverse']()['value'](),proxyEmit('event-history',{'logs':_0x531eeb,'total':_0x44c91d});}else proxyEmit('event-history',{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x1ebbb2){const _0x3f4d61=_0x874150;if(dbLogs[_0x3f4d61(0x138)](_0x3f4d61(0x1d7))[_0x3f4d61(0xfb)]()){const _0x12ddaf=dbLogs[_0x3f4d61(0x13b)]('logs')[_0x3f4d61(0x182)](_0x3f4d61(0x215))[_0x3f4d61(0xd6)](_0x360028=>{const _0x26c0dd=_0x3f4d61;return _0x360028[_0x26c0dd(0x231)]=='order';})[_0x3f4d61(0xfb)]();dbLogs[_0x3f4d61(0x13b)](_0x3f4d61(0x1d7))[_0x3f4d61(0x81)]()[_0x3f4d61(0x85)](),dbLogs[_0x3f4d61(0x13b)](_0x3f4d61(0x1d7))['assign'](_0x12ddaf)['write'](),emitHistory(_0x1ebbb2);}}async function pauseBot(_0x4e5ef7=pauseBotIntervalShort,_0xb3f323,_0x10bf02,_0x40a51f=![]){const _0x44958c=_0x874150,_0x130c35=new Date()['getTime']();if(!lastErrorShown||_0x130c35-lastErrorShown>=_0x4e5ef7){lastErrorShown=_0x130c35;if(!lastBotPause)lastBotPause=_0x130c35,consecutivePauses=0x1;else{if(_0x130c35-lastBotPause-_0x4e5ef7<0x5a*0x3e8){consecutivePauses++;if(consecutivePauses>maxPauseRetries){if(_0x40a51f){logHistory(_0x44958c(0xc8),_0xb3f323+'\x20>\x20stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();return;}else logHistory(_0x44958c(0xc8),_0xb3f323+pauseBotMsg),_0x4e5ef7=pauseBotInterval;}}else consecutivePauses=0x1;lastBotPause=_0x130c35;}_0x10bf02?logger[_0x44958c(0x21c)]('('+consecutivePauses+')\x20'+_0xb3f323+_0x44958c(0x1e4),_0x10bf02):logger['debug']('('+consecutivePauses+')\x20'+_0xb3f323);if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);await sleep(_0x4e5ef7),botPaused=![],_0x4e5ef7==pauseBotIntervalShort?resumeBot(!![]):resumeBot(![]);}}}async function killBot(){const _0x2be842=_0x874150;botPaused=!![],await sleep(0x3e8),process[_0x2be842(0x221)]({'stop':'kill'},_0x160faa=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x5b3898,_0x2e6b90,_0x5aed50=![]){const _0x19dc46=_0x874150;if(botPaused)return;let _0x51da53;const _0x188fa8=config[_0x19dc46(0x1df)]||_0x19dc46(0x1dc);if(_0x2e6b90)logger[_0x19dc46(0x21c)](_0x19dc46(0x1cb)+_0x2e6b90);const _0x2a7c92=()=>{const _0x2b17de=_0x19dc46;loading['error']=_0x2b17de(0x225),emitLoadingProgress();};if(_0x5b3898[_0x19dc46(0xc1)]()['includes'](_0x19dc46(0x179)))logHistory(_0x19dc46(0xc8),_0x188fa8+_0x19dc46(0x18c)),_0x2a7c92();else{if(_0x5b3898[_0x19dc46(0xc1)]()[_0x19dc46(0x110)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory(_0x19dc46(0xc8),_0x188fa8+_0x19dc46(0x120)),_0x2a7c92();else{if(_0x5b3898[_0x19dc46(0xc1)]()[_0x19dc46(0x110)](_0x19dc46(0xd9)))config[_0x19dc46(0x19c)]?_0x51da53=_0x188fa8+_0x19dc46(0xd1):_0x51da53=_0x188fa8+'\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange',logHistory('error',_0x51da53+_0x19dc46(0x1af)),_0x2a7c92();else{if(_0x5b3898[_0x19dc46(0xc1)]()[_0x19dc46(0x110)](_0x19dc46(0x160)))logHistory(_0x19dc46(0xc8),_0x188fa8+_0x19dc46(0x156)),_0x2a7c92();else{if(!_0x5aed50)await handleError(_0x5b3898,null);}}}}}async function handleError(_0x3847d9,_0x531acb,_0x1c12fb=''){const _0x5cc7f=_0x874150;if(botPaused)return;let _0x1a84d4;const _0x29cfb5=config[_0x5cc7f(0x1df)]||_0x5cc7f(0x1dc);if(_0x531acb)logger[_0x5cc7f(0x21c)](_0x5cc7f(0x1cb)+_0x531acb);if(_0x3847d9[_0x5cc7f(0xc1)]()[_0x5cc7f(0x110)]('DDoSProtection'))_0x1a84d4=_0x29cfb5+_0x5cc7f(0x1e8),await pauseBot(undefined,_0x1a84d4,_0x3847d9);else{if(_0x3847d9[_0x5cc7f(0xc1)]()[_0x5cc7f(0x110)](_0x5cc7f(0x9a)))_0x1a84d4=_0x29cfb5+_0x5cc7f(0x20d),await pauseBot(undefined,_0x1a84d4,_0x3847d9);else{if(_0x3847d9[_0x5cc7f(0xc1)]()[_0x5cc7f(0x110)](_0x5cc7f(0xd4))||_0x3847d9[_0x5cc7f(0xc1)]()['includes'](_0x5cc7f(0x15b)))_0x1a84d4=_0x29cfb5+_0x5cc7f(0x19d),await pauseBot(undefined,_0x1a84d4,_0x3847d9['toString']());else{if(_0x3847d9['toString']()[_0x5cc7f(0x110)](_0x5cc7f(0x6c)))_0x1a84d4=_0x29cfb5+_0x5cc7f(0x163),await pauseBot(undefined,_0x1a84d4,_0x3847d9['toString']());else{if(_0x3847d9['toString']()[_0x5cc7f(0x110)]('NetworkError:\x20connection\x20closed\x20by\x20remote\x20server'))_0x1a84d4=_0x29cfb5+_0x5cc7f(0x84),await pauseBot(undefined,_0x1a84d4,_0x3847d9[_0x5cc7f(0xc1)]());else{if(_0x3847d9[_0x5cc7f(0xc1)]()[_0x5cc7f(0x205)]()[_0x5cc7f(0x110)](_0x5cc7f(0x218))||_0x3847d9[_0x5cc7f(0xc1)]()['toLowerCase']()['includes'](_0x5cc7f(0x233)))_0x1a84d4=_0x5cc7f(0x11c),await pauseBot(undefined,_0x1a84d4,_0x3847d9[_0x5cc7f(0xc1)]());else{if(_0x3847d9[_0x5cc7f(0xc1)]()[_0x5cc7f(0x110)](_0x5cc7f(0x1bf)))_0x1a84d4=_0x29cfb5+_0x5cc7f(0xf0),await pauseBot(undefined,_0x1a84d4,_0x3847d9['toString']());else{if(_0x3847d9 instanceof ccxt[_0x5cc7f(0xb3)])_0x1a84d4=_0x29cfb5+_0x5cc7f(0xbb)+_0x3847d9[_0x5cc7f(0xc1)](),logger[_0x5cc7f(0x21c)](_0x5cc7f(0xf5),_0x3847d9),await pauseBot(undefined,_0x1a84d4,_0x3847d9);else{if(_0x3847d9['toString']()[_0x5cc7f(0x110)](_0x5cc7f(0x179)))logHistory(_0x5cc7f(0xc8),_0x29cfb5+_0x5cc7f(0xc7)),logHistory(_0x5cc7f(0xc8),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)'),await killBot();else{if(_0x3847d9[_0x5cc7f(0xc1)]()[_0x5cc7f(0x110)](_0x5cc7f(0xf6)))logHistory(_0x5cc7f(0xc8),_0x29cfb5+_0x5cc7f(0x18a)),logHistory(_0x5cc7f(0xc8),_0x5cc7f(0x126)),await killBot();else{if(_0x3847d9[_0x5cc7f(0xc1)]()['includes'](_0x5cc7f(0xd9))&&_0x3847d9[_0x5cc7f(0xc1)]()['includes']('token\x20is\x20expired'))_0x1a84d4=_0x29cfb5+'\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)',await pauseBot(undefined,_0x1a84d4,_0x3847d9,!![]);else{if(_0x3847d9[_0x5cc7f(0xc1)]()[_0x5cc7f(0x110)](_0x5cc7f(0xd9)))config[_0x5cc7f(0x19c)]?_0x1a84d4=_0x29cfb5+_0x5cc7f(0xd1):_0x1a84d4=_0x29cfb5+_0x5cc7f(0xee),logHistory(_0x5cc7f(0xc8),_0x1a84d4),logHistory('error','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)'),await killBot();else{if(_0x3847d9[_0x5cc7f(0xc1)]()[_0x5cc7f(0x110)](_0x5cc7f(0x160)))logHistory(_0x5cc7f(0xc8),_0x29cfb5+'\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange'),logHistory(_0x5cc7f(0xc8),_0x5cc7f(0x126)),await killBot();else{if(_0x3847d9[_0x5cc7f(0xc1)]()[_0x5cc7f(0x110)](_0x5cc7f(0xd8)))logHistory(_0x5cc7f(0xc8),_0x5cc7f(0x1ee)+_0x1c12fb),logger[_0x5cc7f(0x21c)](_0x5cc7f(0xbf),_0x3847d9);else{if(_0x3847d9 instanceof ccxt['ExchangeError']){_0x1a84d4=_0x29cfb5+_0x5cc7f(0x9c)+_0x3847d9[_0x5cc7f(0xc1)]();if(_0x1c12fb)_0x1a84d4+='\x0aSymbol(s):\x20'+_0x1c12fb;await pauseBot(undefined,_0x1a84d4,_0x3847d9);}else{_0x1a84d4=_0x5cc7f(0x1f7)+_0x3847d9[_0x5cc7f(0xc1)]();if(_0x1c12fb)_0x1a84d4+='\x0aSymbol(s):\x20'+_0x1c12fb;await pauseBot(undefined,_0x1a84d4);}}}}}}}}}}}}}}}}function decryptRSA(_0x57c56f,_0x15c305){const _0x2d4cb2=_0x874150,_0xc98d27=forge[_0x2d4cb2(0xb5)][_0x2d4cb2(0x159)](_0x57c56f),_0x489a21=_0xc98d27['decrypt'](forge[_0x2d4cb2(0x1fb)]['decode64'](_0x15c305),_0x2d4cb2(0x1f5),{'md':forge['md'][_0x2d4cb2(0x15a)][_0x2d4cb2(0xc5)](),'mgf1':{'md':forge['md'][_0x2d4cb2(0x15a)][_0x2d4cb2(0xc5)]()}});return _0x489a21;}async function withRetry(_0x35dc89,_0x31b7c3){const _0x75cd39=_0x874150;let _0x4caf31=![],_0x2d38b6=0x0,_0x27fb45,_0x5dca52;while(_0x2d38b6<maxRetries){try{_0x27fb45=await _0x31b7c3();break;}catch(_0x5c9448){_0x5dca52=_0x5c9448,!_0x4caf31?(_0x4caf31=!![],logger[_0x75cd39(0x21c)]('RETRY\x20-\x20Error\x20in\x20'+_0x35dc89+':',_0x5c9448['toString']())):await sleep(retryInterval);}_0x2d38b6++;}if(_0x2d38b6==0x0)return _0x27fb45;if(_0x2d38b6>=maxRetries)throw _0x5dca52;else return logger['debug']('RETRY\x20-\x20Problem\x20resolved\x20after\x20'+_0x2d38b6+'\x20attempts'),_0x27fb45;}function formatResult(_0x116ca4,_0x48fcfd){return parseFloat(_0x116ca4['toFixed'](_0x48fcfd));}function formatResultTruncate(_0x5d2bee,_0x404738){const _0x14a14f=_0x874150;let _0xfb57d3=formatResultString(_0x5d2bee,0xa),_0x4dfff7=_0xfb57d3[_0x14a14f(0x1ec)]('.');return _0x4dfff7!=-0x1&&(_0xfb57d3=_0xfb57d3[_0x14a14f(0x197)](0x0,_0x4dfff7+_0x404738+0x1)),Number(_0xfb57d3);}function formatResultString(_0x2d28b0,_0x4a44a9){const _0x3868de=_0x874150;let _0x28d6aa;if(!(''+_0x2d28b0)[_0x3868de(0x110)]('e'))_0x28d6aa=+(Math[_0x3868de(0x88)](_0x2d28b0+'e+'+_0x4a44a9)+'e-'+_0x4a44a9);else{let _0xb9409c=(''+_0x2d28b0)['split']('e'),_0x4ace66='';+_0xb9409c[0x1]+_0x4a44a9>0x0&&(_0x4ace66='+'),_0x28d6aa=+(Math[_0x3868de(0x88)](+_0xb9409c[0x0]+'e'+_0x4ace66+(+_0xb9409c[0x1]+_0x4a44a9))+'e-'+_0x4a44a9);}return Number(_0x28d6aa)[_0x3868de(0xa4)](_0x4a44a9);}function getServerTime(){const _0x4ff4a4=_0x874150,_0x119a57=new Date();return _0x119a57[_0x4ff4a4(0x89)]()+'/'+(_0x119a57[_0x4ff4a4(0x14c)]()+0x1)[_0x4ff4a4(0xc1)]()[_0x4ff4a4(0x1c5)](0x2,'0')+'/'+_0x119a57[_0x4ff4a4(0x122)]()[_0x4ff4a4(0xc1)]()[_0x4ff4a4(0x1c5)](0x2,'0')+'\x20'+_0x119a57[_0x4ff4a4(0x22b)]()['toString']()[_0x4ff4a4(0x1c5)](0x2,'0')+':'+_0x119a57['getMinutes']()['toString']()[_0x4ff4a4(0x1c5)](0x2,'0')+':'+_0x119a57[_0x4ff4a4(0x79)]()[_0x4ff4a4(0xc1)]()[_0x4ff4a4(0x1c5)](0x2,'0');}function getTimeStamp(){const _0x761983=_0x874150,_0x3b4c95=shiftedTime();return _0x3b4c95['getFullYear']()+'/'+(_0x3b4c95[_0x761983(0x14c)]()+0x1)[_0x761983(0xc1)]()[_0x761983(0x1c5)](0x2,'0')+'/'+_0x3b4c95[_0x761983(0x122)]()[_0x761983(0xc1)]()[_0x761983(0x1c5)](0x2,'0')+'\x20'+_0x3b4c95[_0x761983(0x22b)]()[_0x761983(0xc1)]()[_0x761983(0x1c5)](0x2,'0')+':'+_0x3b4c95[_0x761983(0xb6)]()[_0x761983(0xc1)]()['padStart'](0x2,'0')+':'+_0x3b4c95[_0x761983(0x79)]()['toString']()[_0x761983(0x1c5)](0x2,'0');}function getDate(){const _0x5eee30=_0x874150,_0x28df9d=shiftedTime();return _0x28df9d['getFullYear']()+'/'+(_0x28df9d[_0x5eee30(0x14c)]()+0x1)[_0x5eee30(0xc1)]()['padStart'](0x2,'0')+'/'+_0x28df9d['getDate']()[_0x5eee30(0xc1)]()[_0x5eee30(0x1c5)](0x2,'0');}function getHour(){const _0x472b24=_0x874150,_0x38a799=shiftedTime();return _0x38a799[_0x472b24(0x22b)]()['toString']()['padStart'](0x2,'0');}function sleep(_0x360e79){return new Promise(_0x453ace=>setTimeout(_0x453ace,_0x360e79));}function shiftedTime(){const _0x3a2fed=_0x874150,_0x5ae22f=new Date();let _0xf5077d=_0x5ae22f;if(config&&config[_0x3a2fed(0x186)]!==0x0)_0xf5077d=fns[_0x3a2fed(0x1b5)](_0x5ae22f,{'hours':config['timeshift']});return _0xf5077d;}function timer(_0x4fc63c){const _0x3adfec=_0x874150,_0x57edbb=new Date();!lasttime?console['log'](getTimeStamp()+_0x3adfec(0x123),_0x4fc63c,_0x57edbb):console['log'](getTimeStamp()+_0x3adfec(0x123),_0x4fc63c,(_0x57edbb-lasttime)/0x3e8),lasttime=_0x57edbb;}