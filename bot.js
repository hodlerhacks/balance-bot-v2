const _0x5bdcb0=_0x3327;(function(_0x3e2a42,_0x5a61e8){const _0x427ed3=_0x3327,_0x270b2b=_0x3e2a42();while(!![]){try{const _0x1b32e2=parseInt(_0x427ed3(0x266))/0x1*(parseInt(_0x427ed3(0x16c))/0x2)+parseInt(_0x427ed3(0xaf))/0x3*(-parseInt(_0x427ed3(0xd2))/0x4)+-parseInt(_0x427ed3(0xe6))/0x5*(parseInt(_0x427ed3(0x163))/0x6)+-parseInt(_0x427ed3(0x146))/0x7+-parseInt(_0x427ed3(0x1cb))/0x8+-parseInt(_0x427ed3(0x20d))/0x9*(-parseInt(_0x427ed3(0xfe))/0xa)+parseInt(_0x427ed3(0x276))/0xb;if(_0x1b32e2===_0x5a61e8)break;else _0x270b2b['push'](_0x270b2b['shift']());}catch(_0x4c5aae){_0x270b2b['push'](_0x270b2b['shift']());}}}(_0x3d03,0xcf1cf));const _0x3602dd=function(){let _0x27caeb=!![];return function(_0x3966e9,_0x311215){const _0x51353e=_0x27caeb?function(){if(_0x311215){const _0x32cfbe=_0x311215['apply'](_0x3966e9,arguments);return _0x311215=null,_0x32cfbe;}}:function(){};return _0x27caeb=![],_0x51353e;};}(),_0x355fed=_0x3602dd(this,function(){const _0x36929c=_0x3327;return _0x355fed['toString']()[_0x36929c(0x194)](_0x36929c(0x1eb))[_0x36929c(0x174)]()[_0x36929c(0xb2)](_0x355fed)[_0x36929c(0x194)]('(((.+)+)+)+$');});_0x355fed();'use strict';const ccxt=require(_0x5bdcb0(0x1ae)),low=require(_0x5bdcb0(0x13b)),FileSync=require(_0x5bdcb0(0x183)),fs=require('fs'),fns=require(_0x5bdcb0(0x139)),forge=require(_0x5bdcb0(0xf9)),util=require(_0x5bdcb0(0xdb)),argv=require('yargs/yargs')(process['argv']['slice'](0x2))['argv'],path=require(_0x5bdcb0(0x15d)),axios=require(_0x5bdcb0(0x1df));let exchange,gTicker={},gChange={};const usdBasecoins=[_0x5bdcb0(0x1b5),_0x5bdcb0(0x242),'TUSD',_0x5bdcb0(0x1bb),'USDC',_0x5bdcb0(0x181)],excludedExchanges=[_0x5bdcb0(0x23e)],debugging=argv['d']||![];let pnlGenerationNeeded=argv['r']||![],config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x5bdcb0(0x210)]({'LOCKED':0x0,'UNLOCKING':0x1,'UNLOCKED':0x2});let lockOrders=ORDERS[_0x5bdcb0(0x272)],validateOrdersState,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotIntervalShort=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg='\x20>\x20pausing\x20bot\x20for\x20'+pauseBotInterval/0xea60+_0x5bdcb0(0x278),maxPauseRetries=0x6,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,watchTransactionsInterval=0x3c*0x3e8,schedulerInterval=0x3c*0x3c*0x3e8,retryInterval=0x3e8,maxRetries=0x5,logPageSize=0x14,defaultFee=0.003;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidOrdersInitialTimeout,pidOrdersTimeout,botPaused=![],transactionDetectionOngoing=![],lastCoinsToBalance='',exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x5dc,balanceUpdateRetries=0x5;function _0x3d03(){const _0x46d463=['message','sendPortfolioTelegram','apiSecret','\x20>\x20','argv','ccxt','random','-------------------------------\x0a','\x20orders\x20in\x20less\x20than\x20','min','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','sortBy','USD','reverse','ExchangeNotAvailable','Set\x20lock\x20orders\x20to:\x20','\x20attempts','exchanges','USDT','No\x20more\x20open\x20orders\x20-\x20','\x20order:\x20','recovery','args','assign','privateKey','UNLOCKING','Network\x20error\x20details:','sqrt','request-time','Bot\x20','round','\x20|\x20Custom\x20ID:\x20','-config.json','sandbox','285288flwZvE','mkdirSync','Unknown\x20error\x20-\x20check\x20logs','2.3.5','startdate','getMonth',')\x20|\x20exchange:\x20','quote','Unfilled\x20order(s)\x20canceled\x20after\x20','sell','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','%\x20(','Bybit','exchange','setSandboxMode','process\x20','Pausing\x20for\x20','InvalidNonce','average','eur','axios','apiPassword','entries','Failed\x20to\x20load\x20coin\x20data\x20for\x20','startprice','number','startnumber','percentage','production','\x20>\x20[DEBUG]\x20','<pre>','running','(((.+)+)+)+$','bb-settings.json','initTickers()','side','push','1\x20-\x20FILLED\x20unknown\x20order:\x20','initclient','\x20blocked\x20API\x20(DDoSProtection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','***','fetchTickers','cooldown','token\x20is\x20expired','restart','fetchTickers()','toggleBotMode','./version.json','time','EUR','filled','loadMarkets','starting-balances','fetchBalance','Cryptocom','cancelOrder','Will\x20continue\x20to\x20wait\x20for\x20order(s)\x20to\x20be\x20filled\x20and\x20try\x20to\x20cancel\x20again\x20later','\x20/\x20','ongoing','realizedPnL','Market\x20order','basecoin','Avoiding\x20continuous\x20order\x20attempts','colorscheme','PAXG','bb-secure.json','8447193AKapDz','limits','\x20metrics:</b>\x20\x0a\x0a','freeze','defaults','1\x20-\x20FILLED\x20known\x20order:\x20','-performance.json','RequestTimeout','heapUsed','removed','floor','001','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','./logs/','Resetting\x20coin\x20results:\x20','unlinkSync','target','pnl-fiat','limit-high','Exception\x20thrown\x20in\x20','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','orderId','getSeconds','\x20closed\x20the\x20connection\x20(see:\x20hodlerhacks.com/fix/5)','Loading\x20completed','2\x20-\x20Handled\x20open\x20orders','symbol','1\x20-\x20Validate\x20orders:\x20','showname','\x20network\x20error:\x20','storeHeadless',')\x20unknown\x20order:\x20','Unfilled\x20order(s)\x20could\x20not\x20be\x20canceled\x20after\x20','botID','last','ID:\x20','added','Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute','has','no\x20exchange\x20reloaded','\x20>\x20stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','PnL\x20','coin-loading-progress','emitHistory','pnl','threshold','yyyy/MM/dd','isBefore','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','bitmex','abs','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','quick','BUSD','-results.json','\x0aSymbol(s):\x20','AuthenticationError','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','secret','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)','ask',')\x20known\x20order:\x20','success','storeFiat','pnl-basecoin','password','Portfolio\x20change\x20detected:\x20','Cooldown\x20ended\x20-\x20balancing\x20resumed','writeFile','<b>','1\x20-\x20Handle\x20open\x20orders','PermissionDenied','\x20(see:\x20hodlerhacks.com/fix/1)','open','decrypt','sha256','Invalid\x20API\x20details,\x20please\x20try\x20again\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','Unknown\x20error:\x20','InsufficientFunds','configstate','Error\x20in\x20testNewAPI():\x20','update-liquidity','onepagemode','\x20API\x20key\x20is\x20invalid','event','\x20has\x20a\x2024h\x20drop\x20of\x20','environment','indexOf','closed','203485GQLcaz','currency','amountToPrecision','watchTradesForSymbols()','toLowerCase','stack','final','detectLiquidityChange()','switch-manual','debug','cost','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','UNLOCKED','changes','\x20uses\x20','fiat','20019791dEHUUl','breakeven','\x20minutes','code','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','headless','remainingSymbols','Order\x20is\x20invalid:\x20','2\x20-\x20handling\x20FILLED\x20order:\x20','bot-','pid','createOrder','value','error','Invalid\x20quantity','Portfolio\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','2.6.23','no\x20open\x20orders','591BotTQL','logs','\x20not\x20available\x20(see:\x20hodlerhacks.com/fix/5)','constructor','watchOrders','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','\x20|\x20lock\x20orders:\x20','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','valid','amount','full','length','slider','\x20API\x20secret\x20is\x20invalid','distribution','\x20minutes\x20-\x20','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','test','/USDT','secure','write','pki','ETH','toUpperCase','testAPI()','sort','findIndex','padStart','\x20-\x20bot\x20already\x20running\x20in\x20manual\x20mode','create','none','timeout','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','isEqual','getTime','9060XCQreN','Reset\x20|\x20','fee','Huobipro','</pre>','OnMaintenance','padEnd','watchTrades()','string','util','Limit\x20(low-margin)','keys','version','BTC','Huobi','cancelLoading','portfolio1','configuration','marketcapApi','\x20rejected\x20your\x20API\x20request\x20(see:\x20hodlerhacks.com/fix/4)','959885zZBbhH','************','market_cap','Trigger:\x20','\x20|\x20exchange:\x20','balances','sells','bots','net','spot','recreate','timestamp-issue','fetchTicker','map','coins','getFullYear','/backup/','find','-events.json','node-forge',':\x20Bot\x20','timestamp','event-history','\x20exchange','10dChATb','replace','market','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20trying\x20again\x20in\x20','Failed\x20to\x20load\x20market\x20data\x20-\x20bot\x20not\x20started','Market','pop','watchOrders()','bot','remove','marketcapsqrt','API-key\x20format\x20invalid','privateKeyFromPem','includes','marketcap','Saving\x20configuration','send','Error\x20details:','pro','\x20exchange\x20error:\x20','getHours','portfolio2','Exchange\x20permission\x20denied\x20-\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','MIN_NOTIONAL','%)\x0a','performance','Value\x20','data','/output-000.log','Order\x20filled:\x20','watchTrades','fetchBalance()','set','Error:\x20Invalid\x20argument\x20','\x20-\x20','cancel','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','Net\x20','Order\x20amount\x20is\x20invalid:\x20','ordertype',',\x20must\x20be\x20a\x203\x20digit\x20number','openOrders','fromCodePoint','Updating\x20API\x20key\x20(not\x20saved\x20in\x20config\x20file\x20yet)','red_yellow_blue','\x20|\x20','initial','RETRY\x20-\x20Error\x20in\x20','Invalid\x20symbol:\x20','botname','net-basecoin','shift','Initializing\x20exchange:\x20already\x20done','Resetting\x20bot\x20history','prevnumber','emojisell','Stopped\x20fetching\x20balance\x20after\x20','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','limit','date-fns','emojibuy','lowdb','slice','Headless:\x20','buy','change24h','warning','getPortfolio','offset','Cex','status','liquidity','11664562BcxzVL','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','complete','splice','existsSync','balancing\x20resumes\x20when\x20cooldown\x20ends','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','getDate','Order\x20filled','uncaughtException','cloneDeep','memoryUsage','limit-low','Exchange','\x20>\x20details:','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','highest','type','coin','portfolio','Error\x20occurred:\x20','2.6.22','split','path','date','match','parse','Initiating\x20bot\x20restart','delta','18rrXbqq','forEach','marketcapEnabled','price','log','<b>Bot\x20','Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)','starting-balance-','InvalidOrder','8mQeLHK','timeshift','recent20','progress','change','balancing\x20resumed','apiKey','active','toString','./config/','orderstatus','add','loading-canceled',':\x20timer\x20>','1\x20-\x20partially\x20FILLED\x20(','\x20hour','Fee\x20discount\x20refund\x20detected:\x20','max','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','kill','netoffset','USDP','Error\x20details:\x20','lowdb/adapters/FileSync','Order(s)\x20not\x20validated\x20after\x20','\x20not\x20responding\x20(see:\x20hodlerhacks.com/fix/5)','trade','resetHistory','getMinutes','excluded','basecoinvalue','Placing\x20order\x20for:\x20','\x20portfolio:</b>\x20\x0a\x0a','page','stringify','getOpenOrders()','order','filter','net-fiat','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20for\x20','search','settings','Executed\x20','\x20API\x20key,\x20secret\x20or\x20password\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','api-issue','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','function','storeConfiguration','format','get','toFixed','Initializing\x20coin\x20results','Initializing\x20exchange','usd','\x20MB','Block\x20transaction\x20detection:\x20','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','join','autoliquidity','showConfig','canceled'];_0x3d03=function(){return _0x46d463;};return _0x3d03();}let enableFiatToggle;const serverversion=require('./version.json')[_0x5bdcb0(0xde)],environment=require(_0x5bdcb0(0x1fa))[_0x5bdcb0(0x263)]||_0x5bdcb0(0x1e7),botID=process[_0x5bdcb0(0x1ad)][0x2]||_0x5bdcb0(0x218),pattern=/^[0-9]{3}$/;!pattern[_0x5bdcb0(0xc0)](botID)&&(console[_0x5bdcb0(0x167)](_0x5bdcb0(0x11f)+botID+_0x5bdcb0(0x126)),killBot());const userID=process[_0x5bdcb0(0x1ad)][0x3]||'',configpath=userID?_0x5bdcb0(0x175)+userID+'/':'./config/',logspath=userID?'./logs/'+userID+'/':_0x5bdcb0(0x21a),loggerfile=fs['createWriteStream'](logspath+_0x5bdcb0(0x11a),{'flags':'a'});!fs[_0x5bdcb0(0x14a)](configpath)&&fs[_0x5bdcb0(0x1cc)](configpath);!fs[_0x5bdcb0(0x14a)](logspath)&&fs[_0x5bdcb0(0x1cc)](logspath);const configfile=configpath+_0x5bdcb0(0x27f)+botID+_0x5bdcb0(0x1c9),logfile=configpath+'bot-'+botID+'-events.json',performancefile=configpath+_0x5bdcb0(0x27f)+botID+'-performance.json',coinresultsfile=configpath+_0x5bdcb0(0x27f)+botID+_0x5bdcb0(0x243),settingsfile=configpath+_0x5bdcb0(0x1ec),securefile=configpath+_0x5bdcb0(0x20c),configbackuppath=configpath+_0x5bdcb0(0xf6),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs['defaults']({'logs':[],'version':serverversion})['write']();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x5bdcb0(0x211)]({'data':[],'version':serverversion})[_0x5bdcb0(0xc3)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x5bdcb0(0x211)]({'bot':[],'version':serverversion})['write']();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x5bdcb0(0x211)]({'coins':{},'version':serverversion})['write']();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0,settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x129c58=>{const _0x42e080=_0x5bdcb0;console[_0x42e080(0x167)](_0x129c58);},'simple':_0x93b968=>{const _0x31c71e=_0x5bdcb0;console[_0x31c71e(0x167)](_0x93b968),loggerfile['write'](util[_0x31c71e(0x19c)](_0x93b968)+'\x0a');},'full':async(_0xfd433,_0x5018ec='')=>{const _0x14edcb=_0x5bdcb0;let _0x5e9299;if(config[_0x14edcb(0x229)])_0x5e9299=getTimeStamp()+':\x20'+config[_0x14edcb(0x12f)]+_0x14edcb(0x1ac)+_0xfd433;else _0x5e9299=getTimeStamp()+':\x20Bot\x20'+botID+_0x14edcb(0x1ac)+_0xfd433;console[_0x14edcb(0x167)](_0x5e9299),loggerfile[_0x14edcb(0xc3)](util[_0x14edcb(0x19c)](_0x5e9299)+'\x0a'),_0x5018ec&&(console['log'](_0x5018ec),loggerfile[_0x14edcb(0xc3)](util[_0x14edcb(0x19c)](_0x5018ec)+'\x0a'));},'debug':async(_0x4bc0d3,_0x141752='')=>{const _0x1d2f4a=_0x5bdcb0;let _0x27d1d7;if(config[_0x1d2f4a(0x229)])_0x27d1d7=getTimeStamp()+':\x20'+config['botname']+_0x1d2f4a(0x1e8)+_0x4bc0d3;else _0x27d1d7=getTimeStamp()+_0x1d2f4a(0xfa)+botID+'\x20>\x20[DEBUG]\x20'+_0x4bc0d3;if(debugging)console[_0x1d2f4a(0x167)](_0x27d1d7);loggerfile[_0x1d2f4a(0xc3)](util['format'](_0x27d1d7)+'\x0a');if(_0x141752){if(debugging)console[_0x1d2f4a(0x167)](_0x141752);loggerfile['write'](util['format'](_0x141752)+'\x0a');}}};process['on'](_0x5bdcb0(0x14f),function(_0x41a3d8){const _0x59ecba=_0x5bdcb0;handleError(_0x41a3d8[_0x59ecba(0x26b)],_0x59ecba(0x14f));});settings[_0x5bdcb0(0x16d)]!=config[_0x5bdcb0(0x16d)]&&updateTimeshift(settings[_0x5bdcb0(0x16d)]);settings['onepagemode']!=config[_0x5bdcb0(0x25f)]&&updateOnepagemode(settings[_0x5bdcb0(0x25f)]);(settings[_0x5bdcb0(0xe4)]&&!config[_0x5bdcb0(0xe4)]||!settings[_0x5bdcb0(0xe4)]&&config[_0x5bdcb0(0xe4)])&&updateMarketcapApi(settings[_0x5bdcb0(0xe4)]);process[_0x5bdcb0(0x10e)]({'started':'running'},_0xb3e510=>{}),initializeProcessListeners();function proxyEmit(_0x1eeb8f,_0x716f98=null){const _0x34002a=_0x5bdcb0;process[_0x34002a(0x10e)]({'function':_0x1eeb8f,'args':_0x716f98},_0x338388=>{});}function initializeProcessListeners(){const _0x25bb27=_0x5bdcb0;process['on'](_0x25bb27(0x1a9),_0x1898a1=>{const _0x2aa70c=_0x25bb27;switch(Object[_0x2aa70c(0xdd)](_0x1898a1)[0x0]){case'timeshift':_0x1898a1[_0x2aa70c(0x16d)]!=undefined&&(settings[_0x2aa70c(0x16d)]=_0x1898a1[_0x2aa70c(0x16d)],updateTimeshift(settings['timeshift']));break;case'onepagemode':_0x1898a1[_0x2aa70c(0x25f)]!=undefined&&(settings['onepagemode']=_0x1898a1['onepagemode'],updateOnepagemode(settings[_0x2aa70c(0x25f)]));break;case'marketcapApi':_0x1898a1[_0x2aa70c(0xe4)]!=undefined&&(settings[_0x2aa70c(0xe4)]=_0x1898a1[_0x2aa70c(0xe4)],updateMarketcapApi(settings[_0x2aa70c(0xe4)]));break;case'bots':_0x1898a1[_0x2aa70c(0xed)]!=undefined&&(bots=JSON[_0x2aa70c(0x160)](_0x1898a1[_0x2aa70c(0xed)]),proxyEmit('bots',bots));break;case _0x2aa70c(0x19a):switch(_0x1898a1[_0x2aa70c(0x19a)]){case _0x2aa70c(0x1f1):initclient();break;case _0x2aa70c(0x1f9):toggleBotMode();break;case _0x2aa70c(0x238):emitHistory(_0x1898a1[_0x2aa70c(0x1bf)]);break;case'deleteHistoryAlerts':deleteHistoryAlerts(_0x1898a1[_0x2aa70c(0x1bf)]);break;case _0x2aa70c(0x141):getPortfolio(_0x1898a1[_0x2aa70c(0x1bf)]);break;case _0x2aa70c(0x19b):storeConfiguration(_0x1898a1[_0x2aa70c(0x1bf)]);break;case _0x2aa70c(0x22b):storeHeadless(_0x1898a1[_0x2aa70c(0x1bf)]);break;case _0x2aa70c(0x24c):storeFiat(_0x1898a1['args']);break;case _0x2aa70c(0x187):resetHistory();break;case'getStartingBalances':getStartingBalances(getNormalizedPerformance());break;case'placeOrder':placeOrder(_0x1898a1[_0x2aa70c(0x1bf)]);break;case _0x2aa70c(0xe1):cancelLoading();break;case _0x2aa70c(0x1a7):showConfig();break;case'sendMetricsTelegram':sendMetricsTelegram();break;case _0x2aa70c(0x1aa):sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x28bb16=![]){const _0x17fbfe=_0x5bdcb0;logger[_0x17fbfe(0x26f)](_0x17fbfe(0xd3)+(_0x28bb16?'exchange\x20reload':_0x17fbfe(0x234))+_0x17fbfe(0xea)+config[_0x17fbfe(0x1d8)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x28bb16)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x17fbfe(0x172)]!=''&&config[_0x17fbfe(0x172)]!=_0x17fbfe(0x1f3)){loadingProgress=0x0;if(_0x28bb16){await initExchange();const _0xb90110=await testAPI();if(!_0xb90110)return;await loadSymbols(),loadingProgress=0x1,setStableCoins(),proxyEmit(_0x17fbfe(0xe3),emittedConfiguration()),initialPerformanceStored=![];}const _0x192b6f=await getCoins();[currentCoins,currentCoinsAll]=_0x192b6f,setBlockTransactionDetection(![]),startScheduler(),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x17fbfe(0x26f)](_0x17fbfe(0x225)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x17fbfe(0xba)]==0x0&&allOpenOrders[_0x17fbfe(0xba)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(pnlGenerationNeeded)await generatePnL();}}async function resumeBot(_0x25e1ad=![]){const _0x15a130=_0x5bdcb0;logger[_0x15a130(0x26f)]('Resuming\x20('+(_0x25e1ad?_0x15a130(0x241):_0x15a130(0x148))+_0x15a130(0x1d1)+config[_0x15a130(0x1d8)]);if(pidBalances)clearTimeout(pidBalances);if(_0x25e1ad){getBalances();return;}coinsLoaded=![];if(config['apiKey']!=''&&config[_0x15a130(0x172)]!=_0x15a130(0x1f3)){loadingProgress=0x1;const _0x47f578=await getCoins();[currentCoins,currentCoinsAll]=_0x47f578,setBlockTransactionDetection(![]),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x15a130(0x26f)](_0x15a130(0x225)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x15a130(0xba)]==0x0&&allOpenOrders[_0x15a130(0xba)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();}}async function getMarketCap(_0x5190c2){const _0x3ca76d=_0x5bdcb0;let _0x289508=![];if(_0x5190c2)_0x289508=!![];const _0x27c3b9=_0x289508?_0x5190c2:currentCoins,_0x57a260=_0x27c3b9[_0x3ca76d(0xf3)](_0x1c2b5f=>_0x1c2b5f[_0x3ca76d(0x158)]);if(!config['marketcapApi']||!_0x289508&&!config[_0x3ca76d(0x165)]||_0x57a260[_0x3ca76d(0xba)]==0x0)return;let _0x34e2ac=null;try{_0x34e2ac=await axios[_0x3ca76d(0x19d)](_0x3ca76d(0xcf),{'headers':{'X-CMC_PRO_API_KEY':settings[_0x3ca76d(0xe4)]},'params':{'symbol':_0x57a260[_0x3ca76d(0x174)]()}});}catch(_0x533ac7){_0x34e2ac=null,_0x533ac7['toString']()[_0x3ca76d(0x10b)]('status\x20code\x20401')?(config[_0x3ca76d(0xe4)]=![],updateConfig(),proxyEmit(_0x3ca76d(0xe3),emittedConfiguration()),logHistory(_0x3ca76d(0xaa),_0x3ca76d(0x199))):(logHistory(_0x3ca76d(0xaa),_0x3ca76d(0x101)+schedulerInterval/(0x3c*0x3e8)+_0x3ca76d(0x278)),logger[_0x3ca76d(0x26f)]('Error\x20details:',_0x533ac7[_0x3ca76d(0x174)]()+_0x3ca76d(0x120)+_0x533ac7[_0x3ca76d(0x279)]));}let _0x109117=!![];if(_0x34e2ac){let _0x7f015c=0x0;const _0x17a86f=_0x34e2ac[_0x3ca76d(0x119)];_0x57a260[_0x3ca76d(0x164)](_0x58f930=>{const _0x78244b=_0x3ca76d;if(_0x17a86f[_0x78244b(0x119)][_0x58f930][0x0]&&_0x17a86f['data'][_0x58f930][0x0][_0x78244b(0x1d2)][_0x78244b(0x1b5)][_0x78244b(0xe8)])_0x7f015c+=_0x17a86f[_0x78244b(0x119)][_0x58f930][0x0][_0x78244b(0x1d2)]['USD']['market_cap'];else{if(!['EUR',_0x78244b(0x1b5)][_0x78244b(0x10b)](_0x58f930)){if(_0x289508)logHistory(_0x78244b(0xaa),_0x78244b(0x193)+_0x58f930+'\x20-\x20go\x20back\x20and\x20try\x20again');else{const _0x55dea0=config['portfolio'][_0x78244b(0xf7)](_0x30b02e=>_0x30b02e[_0x78244b(0x158)]==_0x58f930);_0x55dea0&&!_0x55dea0[_0x78244b(0x189)]&&_0x55dea0[_0x78244b(0xbb)]==-0x1&&(_0x109117=![],logHistory(_0x78244b(0xaa),'CoinMarketCap\x20data\x20could\x20not\x20be\x20updated\x20-\x20will\x20try\x20again\x20in\x201\x20hour'),logger[_0x78244b(0x26f)](_0x78244b(0x193)+_0x58f930));}}}});if(!_0x109117)return;_0x57a260[_0x3ca76d(0x164)](_0x415c25=>{const _0x241ef4=_0x3ca76d,_0x28e5de=_0x17a86f[_0x241ef4(0x119)][_0x415c25][0x0]?_0x17a86f['data'][_0x415c25][0x0]['quote'][_0x241ef4(0x1b5)][_0x241ef4(0xe8)]:0x0;if(_0x289508){const _0x32e10e=_0x5190c2['find'](_0x1ccb52=>_0x1ccb52['coin']==_0x415c25);_0x32e10e&&(_0x32e10e[_0x241ef4(0x10c)]=_0x28e5de);}else{const _0xae4b58=currentCoins['find'](_0x230634=>_0x230634[_0x241ef4(0x158)]==_0x415c25);_0xae4b58&&(_0xae4b58[_0x241ef4(0x10c)]=_0x28e5de);const _0x39d4ea=currentCoinsAll[_0x241ef4(0xf7)](_0x25ec5f=>_0x25ec5f[_0x241ef4(0x158)]==_0x415c25);_0x39d4ea&&(_0x39d4ea['marketcap']=_0x28e5de);}}),!_0x289508&&updateTargetDistribution();}}function updateTargetDistribution(){const _0x11f290=_0x5bdcb0,_0x27531b=0x2;let _0x24d524=0x0,_0x44b6cb=0x0,_0x44ae55=0x0,_0x1225f9=0x0,_0x1e73e3=0x0;config[_0x11f290(0x159)][_0x11f290(0x164)](_0xf8c77c=>{const _0x522804=_0x11f290;if(!_0xf8c77c[_0x522804(0x189)]){_0x44ae55++,_0x24d524+=_0xf8c77c[_0x522804(0xbb)];if(_0xf8c77c[_0x522804(0xbb)]===-0x1){_0x24d524++;const _0x2ea8e2=currentCoinsAll['find'](_0x347719=>_0x347719[_0x522804(0x158)]==_0xf8c77c['coin']);_0x2ea8e2&&(_0x1225f9+=_0x2ea8e2[_0x522804(0x10c)],_0x1e73e3+=Math[_0x522804(0x1c4)](_0x2ea8e2[_0x522804(0x10c)]));}if(_0xf8c77c[_0x522804(0xbb)]!==-0x1)_0x44b6cb++;}});let _0x3ce725;const _0x194987=0x64-_0x24d524,_0x433c03=_0x44ae55-_0x44b6cb;_0x3ce725=_0x433c03===0x0?_0x24d524:Math[_0x11f290(0x17d)](0x64,_0x24d524),config[_0x11f290(0x159)][_0x11f290(0x164)](_0x51c957=>{const _0x1fdc3e=_0x11f290,_0x4ce9db=currentCoinsAll['find'](_0x39c3ef=>_0x39c3ef['coin']==_0x51c957[_0x1fdc3e(0x158)]);_0x4ce9db&&(_0x51c957['marketcap']=_0x4ce9db[_0x1fdc3e(0x10c)]);if(!_0x51c957[_0x1fdc3e(0x189)]){if(_0x3ce725<=0x64){if(_0x51c957[_0x1fdc3e(0xbb)]===-0x1){if(_0x1225f9!==0x0&&config[_0x1fdc3e(0x165)]){if(_0x4ce9db){if(config[_0x1fdc3e(0x165)]=='marketcap')_0x51c957[_0x1fdc3e(0xbd)]=(_0x194987/(_0x1225f9/_0x4ce9db[_0x1fdc3e(0x10c)]))[_0x1fdc3e(0x19e)](_0x27531b);else config['marketcapEnabled']==_0x1fdc3e(0x108)&&(_0x51c957['distribution']=(_0x194987/(_0x1e73e3/Math['sqrt'](_0x4ce9db[_0x1fdc3e(0x10c)])))[_0x1fdc3e(0x19e)](_0x27531b));}}}}}}),updateConfig();}function updateConfig(){const _0x5bc8e6=_0x5bdcb0;let _0x216e77=dbConfig[_0x5bc8e6(0x19d)]('bot')[_0x5bc8e6(0xf7)]({'botID':botID})[_0x5bc8e6(0xa9)]();_0x216e77&&dbConfig[_0x5bc8e6(0x19d)](_0x5bc8e6(0x106))['find']({'botID':botID})[_0x5bc8e6(0x1c0)](config)[_0x5bc8e6(0xc3)]();}function logMemory(){const _0x311bb8=_0x5bdcb0;if(environment!='staging')return;const _0x1d65d1=process[_0x311bb8(0x151)]()[_0x311bb8(0x215)]/0x400/0x400;logger[_0x311bb8(0x26f)](_0x311bb8(0x1da)+process[_0x311bb8(0x280)]+_0x311bb8(0x274)+formatResult(_0x1d65d1,0x1)+_0x311bb8(0x1a2));}async function startScheduler(){const _0x1b65ca=_0x5bdcb0,_0x4aaafb=shiftedTime()[_0x1b65ca(0x112)]();getMarketCap(),loadSymbols(),_0x4aaafb==0x1&&logMemory(),await sleep(schedulerInterval),startScheduler();}async function restartBot(_0x129d22=![]){const _0x373206=_0x5bdcb0;logger[_0x373206(0x26f)](_0x373206(0x161));if(!_0x129d22)while(lockOrders!=ORDERS[_0x373206(0x272)]||coolingDown){await sleep(0x3e8);}process['send']({'stop':_0x373206(0x1f7)},_0x2e86d7=>{});}async function initExchange(_0x4de76c=config[_0x5bdcb0(0x1d8)],_0x33af59=config[_0x5bdcb0(0x172)],_0x122808=config[_0x5bdcb0(0x1ab)],_0x2018e4=config[_0x5bdcb0(0x1e0)],_0x3a701f=config[_0x5bdcb0(0x1ca)]){const _0x3fe4fd=_0x5bdcb0;if(exchange){logger[_0x3fe4fd(0x26f)](_0x3fe4fd(0x132));return;}logger['debug'](_0x3fe4fd(0x1a0));!supportedExchanges()[_0x3fe4fd(0x10b)](_0x4de76c)&&(logHistory(_0x3fe4fd(0xaa),_0x3fe4fd(0x246)+_0x4de76c+_0x3fe4fd(0xfd)),killBot());const _0x5f445f=ccxt[_0x3fe4fd(0x110)][_0x4de76c[_0x3fe4fd(0x26a)]()];exchange=new _0x5f445f({'apiKey':_0x33af59,'secret':_0x122808,'options':{'defaultType':_0x3fe4fd(0xef)}});if(_0x2018e4)exchange['password']=_0x2018e4;if(exchange['has'][_0x3fe4fd(0x1ca)])exchange[_0x3fe4fd(0x1d9)](_0x3a701f);}function updateExchange(_0x22f444,_0x354981,_0x2556f7=null){const _0x1725c5=_0x5bdcb0;exchange[_0x1725c5(0x172)]=_0x22f444,exchange[_0x1725c5(0x247)]=_0x354981,exchange[_0x1725c5(0x24e)]=_0x2556f7,logger['debug'](_0x1725c5(0x129));}function setStableCoins(){const _0x39c0ae=_0x5bdcb0;let _0x2f768d=config['basecoin']=='ETH'?'ETH':config[_0x39c0ae(0x208)]==_0x39c0ae(0x20b)?_0x39c0ae(0x20b):_0x39c0ae(0xdf),_0x1cb92f=allSymbols['includes'](_0x2f768d+'/USD')?_0x39c0ae(0x1b5):allSymbols[_0x39c0ae(0x10b)](_0x2f768d+_0x39c0ae(0xc1))?_0x39c0ae(0x1bb):_0x39c0ae(0x1fc),_0x4794a4=allSymbols[_0x39c0ae(0x10b)](_0x2f768d+'/EUR')?_0x39c0ae(0x1fc):_0x1cb92f;enableFiatToggle=!![],_0x1cb92f==_0x39c0ae(0x1fc)&&(enableFiatToggle=![],storeFiat('EUR')),_0x4794a4!=_0x39c0ae(0x1fc)&&(enableFiatToggle=![],storeFiat(_0x39c0ae(0x1b5))),stablecoins={'eur':{'coin':''+_0x2f768d+_0x4794a4,'symbol':_0x2f768d+'/'+_0x4794a4},'usd':{'coin':''+_0x2f768d+_0x1cb92f,'symbol':_0x2f768d+'/'+_0x1cb92f}};}async function initwsCcxt(){const _0x94c828=_0x5bdcb0;initCycle++;const _0x471217=initCycle;let _0x52aae6=[];config[_0x94c828(0x159)][_0x94c828(0x164)](_0x40b29a=>{const _0x49c992=_0x94c828;if(!_0x40b29a[_0x49c992(0x189)]&&_0x40b29a[_0x49c992(0x158)]!=config['basecoin'])_0x52aae6['push'](_0x40b29a[_0x49c992(0x227)]);});if(!_0x52aae6[_0x94c828(0x10b)](stablecoins[_0x94c828(0x1de)][_0x94c828(0x227)]))_0x52aae6['push'](stablecoins['eur'][_0x94c828(0x227)]);if(!_0x52aae6['includes'](stablecoins[_0x94c828(0x1a1)][_0x94c828(0x227)]))_0x52aae6[_0x94c828(0x1ef)](stablecoins[_0x94c828(0x1a1)][_0x94c828(0x227)]);loadCoins(_0x52aae6),_0x52aae6=validateSymbols(_0x52aae6);const _0x5b55e5=async _0xcb2cab=>{const _0x39d42c=_0x94c828;let _0xc878ae;try{const _0x5e5892=await getTickers(_0xcb2cab);Object['entries'](_0x5e5892)[_0x39d42c(0x164)](_0x10a09d=>{const _0xc20146=_0x39d42c;_0xc878ae=_0x10a09d[0x1][_0xc20146(0x227)],gTicker[noslash(_0xc878ae)]=_0x10a09d[0x1][_0xc20146(0x22f)],gChange[_0xc878ae]=_0x10a09d[0x1][_0xc20146(0x1e6)];});}catch(_0x134005){await handleError(_0x134005,_0x39d42c(0x1ed),_0xc878ae);}},_0x5ea1b6=async _0x2157ee=>{const _0x23fea1=_0x94c828;while(initCycle==_0x471217){if(!botPaused)try{const _0xd6066f=await exchange[_0x23fea1(0x11c)](_0x2157ee);gTicker[noslash(_0xd6066f[0x0][_0x23fea1(0x227)])]=_0xd6066f[0x0]['price'];}catch(_0x292687){if(!exchangeStopped)await handleError(_0x292687,_0x23fea1(0xd9),_0x2157ee);}else await sleep(0x64);}},_0x38e42e=async _0x550d12=>{const _0x47c55d=_0x94c828;while(initCycle==_0x471217){if(!botPaused)try{const _0x1fdb7a=await exchange['watchTradesForSymbols'](_0x550d12),_0x595ec6=_0x1fdb7a[_0x47c55d(0x104)]();gTicker[noslash(_0x595ec6[_0x47c55d(0x227)])]=_0x595ec6[_0x47c55d(0x166)];}catch(_0x28116c){if(!exchangeStopped)await handleError(_0x28116c,_0x47c55d(0x269),_0x550d12['toString']());}else await sleep(0x64);}},_0x2c95c1=async _0x34850c=>{const _0x1014e1=_0x94c828;while(initCycle==_0x471217){if(!botPaused){let _0xeb1e25;try{await sleep(0x3c*0x3e8);const _0x18ee51=await getTickers(_0x34850c);Object[_0x1014e1(0x1e1)](_0x18ee51)['forEach'](_0x2d11b2=>{const _0x1b928a=_0x1014e1;_0xeb1e25=_0x2d11b2[0x1][_0x1b928a(0x227)],gChange[_0xeb1e25]=_0x2d11b2[0x1][_0x1b928a(0x1e6)];});}catch(_0x5a88df){if(!exchangeStopped)await handleError(_0x5a88df,_0x1014e1(0x1f8),_0xeb1e25);}}else await sleep(0x64);}},_0x43e526=async _0x4e94dd=>{const _0x581c83=_0x94c828;while(initCycle==_0x471217){if(!botPaused)try{const _0x18e4b1=await exchange['watchOrders'](_0x4e94dd);initCycle==_0x471217&&_0x18e4b1[_0x581c83(0x164)](_0x4996eb=>{updateNumberCoinsCcxt(_0x4996eb);});}catch(_0xc6d426){if(!exchangeStopped)await handleError(_0xc6d426,_0x581c83(0x105));}else await sleep(0x64);}};_0x5b55e5(_0x52aae6),_0x2c95c1(_0x52aae6),exchange[_0x94c828(0x233)]['watchTradesForSymbols']&&!(config[_0x94c828(0x1d8)]==_0x94c828(0x1d7)&&_0x52aae6['length']>0xa)?_0x38e42e(_0x52aae6):_0x52aae6[_0x94c828(0x164)](_0x1e6326=>{_0x5ea1b6(_0x1e6326);}),_0x52aae6['forEach'](_0x254811=>{_0x43e526(_0x254811);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x471128){const _0x3494c0=_0x5bdcb0;let _0x3ab5b8={};try{if(config[_0x3494c0(0x1d8)]!=_0x3494c0(0x201))_0x3ab5b8=await exchange['fetchTickers'](_0x471128);else for(const _0x258094 of _0x471128){const _0x2c9fef=await exchange[_0x3494c0(0xf2)](_0x258094);_0x3ab5b8[_0x258094]=_0x2c9fef;}return _0x3ab5b8;}catch(_0xf4f84a){throw _0xf4f84a;}}function setBlockTransactionDetection(_0x2a18c0){const _0x2add15=_0x5bdcb0;blockTransactionDetection=_0x2a18c0,logger[_0x2add15(0x26f)](_0x2add15(0x1a3)+blockTransactionDetection);}async function detectLiquidityChange(_0x12da29=0x0){const _0x5b6253=_0x5bdcb0;transactionDetectionOngoing=!![];try{const _0x59bcd4=await getCoins(_0x12da29),[_0x521278,_0x5ea2a9]=_0x59bcd4;let _0x2a2f91=[];currentCoins[_0x5b6253(0x164)](_0x4dc696=>{const _0x47f1b0=_0x5b6253,_0x2d192c=_0x521278[_0x47f1b0(0xf7)](_0x46ed66=>_0x46ed66[_0x47f1b0(0x158)]==_0x4dc696[_0x47f1b0(0x158)]);if(_0x2d192c){if(_0x4dc696[_0x47f1b0(0x1e4)]!=_0x2d192c['number']){let _0x41e25a;if(_0x4dc696['coin']!=config[_0x47f1b0(0x208)]){const _0x3da5bd=gTicker[noslash(_0x4dc696[_0x47f1b0(0x227)])];_0x41e25a=_0x4dc696['reverse']?0x1/_0x3da5bd:_0x3da5bd;}else _0x41e25a=0x1;_0x2a2f91['push']({'coin':_0x4dc696[_0x47f1b0(0x158)],'symbol':_0x4dc696['symbol'],'price':_0x41e25a,'number':Number(formatResult(_0x2d192c[_0x47f1b0(0x1e4)]-_0x4dc696[_0x47f1b0(0x1e4)],0x8)),'basecoinvalue':_0x41e25a*(_0x2d192c[_0x47f1b0(0x1e4)]-_0x4dc696['number'])});}}});if(_0x2a2f91[_0x5b6253(0xba)]>0x0&&!blockTransactionDetection){for(const _0x549fe2 of _0x2a2f91){if(config[_0x5b6253(0x1a6)]){logger['debug'](_0x5b6253(0x240)+_0x549fe2[_0x5b6253(0x18a)]+'\x20|\x20highest\x20fee:\x20'+lastFees['highest']);if(lastFees[_0x5b6253(0x156)]==0x0||Math[_0x5b6253(0x23f)](_0x549fe2[_0x5b6253(0x18a)])>lastFees[_0x5b6253(0x156)]*0x3){if(config[_0x5b6253(0x1a6)]==_0x5b6253(0x25e)){delete _0x549fe2[_0x5b6253(0x227)],delete _0x549fe2[_0x5b6253(0x18a)];let _0x42ed02=[],_0x2f0064=[...config[_0x5b6253(0x145)]]||[],_0x3c94f0=config[_0x5b6253(0x145)];_0x2f0064[_0x5b6253(0xc8)]((_0x4e5673,_0x4bce30)=>_0x4e5673[_0x5b6253(0x15e)]>_0x4bce30[_0x5b6253(0x15e)]?-0x1:_0x4bce30[_0x5b6253(0x15e)]>_0x4e5673['date']?0x1:0x0);const _0x2553c7=getDate();if(_0x2f0064[0x0]){const _0x2058b2=fns['parse'](_0x2f0064[0x0][_0x5b6253(0x15e)],'yyyy/MM/dd',new Date()),_0x826c83=fns[_0x5b6253(0x160)](_0x2553c7,'yyyy/MM/dd',new Date());if(fns[_0x5b6253(0xd0)](_0x2058b2,_0x826c83)){_0x42ed02=_0x2f0064[0x0]['changes'];const _0x36cf1b=_0x42ed02[_0x5b6253(0xf7)](_0x3905c1=>_0x3905c1['coin']==_0x549fe2[_0x5b6253(0x158)]);_0x36cf1b?(_0x36cf1b[_0x5b6253(0x1e4)]+=_0x549fe2['number'],_0x36cf1b[_0x5b6253(0x1e4)]==0x0&&(_0x42ed02=_0x42ed02[_0x5b6253(0x191)](_0x218c72=>{const _0x3288dc=_0x5b6253;return _0x218c72[_0x3288dc(0x158)]!=_0x549fe2[_0x3288dc(0x158)];}))):_0x42ed02['push'](_0x549fe2);const _0x63b91a=_0x3c94f0[_0x5b6253(0xf7)](_0xa6ed8b=>_0xa6ed8b[_0x5b6253(0x15e)]==_0x2553c7);_0x63b91a[_0x5b6253(0x273)]=_0x42ed02;}else _0x3c94f0[_0x5b6253(0x1ef)]({'date':_0x2553c7,'changes':[_0x549fe2]});}const _0x5d279a=_0x3c94f0['find'](_0x2f73b8=>_0x2f73b8[_0x5b6253(0x15e)]==_0x2553c7);if(_0x5d279a){let _0x45783f=!![];_0x5d279a[_0x5b6253(0x273)][_0x5b6253(0x164)](_0x5467d1=>{const _0x505548=_0x5b6253;if(_0x5467d1[_0x505548(0x1e4)]!=0x0)_0x45783f=![];}),_0x45783f&&(_0x3c94f0=_0x3c94f0[_0x5b6253(0x191)](_0x5afb70=>{const _0xe0add4=_0x5b6253;return _0x5afb70[_0xe0add4(0x15e)]!=_0x2553c7;}));}let _0x3bff3=dbConfig[_0x5b6253(0x19d)](_0x5b6253(0x106))['find']({'botID':botID})[_0x5b6253(0xa9)]();_0x3bff3&&(dbConfig[_0x5b6253(0x19d)]('bot')[_0x5b6253(0xf7)]({'botID':botID})[_0x5b6253(0x1c0)]({'liquidity':_0x3c94f0})[_0x5b6253(0xc3)](),config[_0x5b6253(0x145)]=_0x3c94f0);logHistory(_0x5b6253(0x24b),_0x5b6253(0x24f)+Math['abs'](_0x549fe2['number'])+'\x20'+_0x549fe2['coin']+'\x20'+(_0x549fe2[_0x5b6253(0x1e4)]>0x0?'added':_0x5b6253(0x216))+_0x5b6253(0x155)),proxyEmit(_0x5b6253(0xe3),emittedConfiguration());const _0x1705a9=getNormalizedPerformance();emitPerformance(_0x1705a9),getStartingBalances(_0x1705a9),logger['debug'](_0x5b6253(0xac));}else config[_0x5b6253(0x1a6)]==_0x5b6253(0x26e)&&(config[_0x5b6253(0x27b)]?(await storeHeadless({'headless':![]}),logHistory(_0x5b6253(0x24b),_0x5b6253(0x24f)+Math['abs'](_0x549fe2[_0x5b6253(0x1e4)])+'\x20'+_0x549fe2['coin']+'\x20'+(_0x549fe2['number']>0x0?_0x5b6253(0x231):'removed')+'\x20-\x20bot\x20switched\x20to\x20manual\x20mode')):logger[_0x5b6253(0x26f)](_0x5b6253(0x24f)+Math[_0x5b6253(0x23f)](_0x549fe2['number'])+'\x20'+_0x549fe2[_0x5b6253(0x158)]+'\x20'+(_0x549fe2[_0x5b6253(0x1e4)]>0x0?_0x5b6253(0x231):_0x5b6253(0x216))+_0x5b6253(0xcb)));}else logger['debug'](_0x5b6253(0x17c)+Math[_0x5b6253(0x23f)](_0x549fe2['number'])+'\x20'+_0x549fe2[_0x5b6253(0x158)]+'\x20'+(_0x549fe2[_0x5b6253(0x1e4)]>0x0?_0x5b6253(0x231):_0x5b6253(0x216)));}else logger[_0x5b6253(0x26f)](_0x5b6253(0x24f)+Math[_0x5b6253(0x23f)](_0x549fe2['number'])+'\x20'+_0x549fe2['coin']+'\x20'+(_0x549fe2[_0x5b6253(0x1e4)]>0x0?_0x5b6253(0x231):_0x5b6253(0x216))+'\x20-\x20auto\x20adjusting\x20liquidity\x20is\x20disabled');}currentCoins=_0x521278,currentCoinsAll=_0x5ea2a9;}}catch(_0x177ad9){if(!exchangeStopped)await handleError(_0x177ad9,_0x5b6253(0x26d));}transactionDetectionOngoing=![];}async function watchTransactions(){await sleep(0x14*0x3e8);while(!![]){!botPaused&&!blockTransactionDetection&&coinsLoaded?(detectLiquidityChange(),await sleep(watchTransactionsInterval)):await sleep(0x3e8);}}async function loadSymbols(){const _0x45f43f=_0x5bdcb0;try{markets=await exchange[_0x45f43f(0x1fe)](!![]),allSymbols=[],Object[_0x45f43f(0x1e1)](markets)[_0x45f43f(0x164)](_0x479d51=>{const _0x3badc9=_0x45f43f;_0x479d51[0x1][_0x3badc9(0x173)]&&_0x479d51[0x1][_0x3badc9(0xef)]&&allSymbols['push'](_0x479d51[0x0]);});}catch(_0x4d5366){markets?logger[_0x45f43f(0x26f)]('Error\x20in\x20loadSymbols():\x20'+_0x4d5366[_0x45f43f(0x174)]()):(loading[_0x45f43f(0x121)]=!![],_0x4d5366[_0x45f43f(0x174)]()[_0x45f43f(0x26a)]()['includes'](_0x45f43f(0xfb))||_0x4d5366[_0x45f43f(0x174)]()[_0x45f43f(0x26a)]()[_0x45f43f(0x10b)](_0x45f43f(0x1c5))?(logHistory(_0x45f43f(0xaa),'Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)'),loading[_0x45f43f(0xaa)]=_0x45f43f(0xf1)):handleErrorNoStop(_0x4d5366,'loadSymbols()',!![]),logHistory(_0x45f43f(0xaa),_0x45f43f(0x102)),logHistory(_0x45f43f(0xaa),_0x45f43f(0x1db)+loadCoinsRetryInterval/0xea60+_0x45f43f(0x271)),logger['debug'](_0x45f43f(0x10f),_0x4d5366),emitLoadingProgress(),botPaused=!![],await sleep(loadCoinsRetryInterval),restartBot());}}function validateSymbols(_0xad2ec4){const _0x3bc9c1=_0x5bdcb0;let _0x1c68d1=[];return _0xad2ec4[_0x3bc9c1(0x164)](_0x131201=>{const _0x1f3f7f=_0x3bc9c1;!allSymbols[_0x1f3f7f(0x10b)](_0x131201)?(logHistory('error',_0x1f3f7f(0x12e)+_0x131201+'\x20-\x20exclude\x20coin\x20in\x20the\x20configuration'),loading[_0x1f3f7f(0xce)]=!![],emitLoadingProgress()):_0x1c68d1[_0x1f3f7f(0x1ef)](_0x131201);}),_0x1c68d1;}async function initclient(){const _0x244088=_0x5bdcb0;proxyEmit(_0x244088(0xe3),emittedConfiguration()),proxyEmit(_0x244088(0x1ba),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x244088(0xeb),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x4bff71=getNormalizedPerformance();emitPerformance(_0x4bff71),getStartingBalances(_0x4bff71);}async function toggleBotMode(){const _0x635f3c=_0x5bdcb0;let _0x1e0cd9=dbConfig[_0x635f3c(0x19d)](_0x635f3c(0x106))[_0x635f3c(0xf7)]({'botID':botID})[_0x635f3c(0xa9)]();if(_0x1e0cd9){const _0x4f8e7b=!_0x1e0cd9['headless'];dbConfig[_0x635f3c(0x19d)]('bot')[_0x635f3c(0xf7)]({'botID':botID})[_0x635f3c(0x1c0)]({'headless':_0x4f8e7b})[_0x635f3c(0xc3)](),config[_0x635f3c(0x27b)]=_0x4f8e7b,proxyEmit(_0x635f3c(0xe3),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x463481=_0x5bdcb0;process[_0x463481(0x10e)]({'updatebotmanager':!![]},_0x2deaca=>{}),logger[_0x463481(0x26f)](_0x463481(0x13d)+config[_0x463481(0x27b)]);}async function loadCoins(_0x13ebae){const _0x4cdd0c=_0x5bdcb0;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x5ca884,_0x79eb86=0x0,_0x360201=0x0;_0x13ebae['forEach'](_0x259a97=>{loading['remainingSymbols']['push'](_0x259a97);}),loadingCanceled=![];let _0x345afa=![];while(_0x5ca884!=_0x13ebae[_0x4cdd0c(0xba)]+maxLoadingProgress){_0x5ca884=loadingProgress,_0x13ebae[_0x4cdd0c(0x164)](_0x2f801e=>{const _0x6d17b1=_0x4cdd0c;if(gTicker[noslash(_0x2f801e)]){loading[_0x6d17b1(0x27c)]=loading[_0x6d17b1(0x27c)][_0x6d17b1(0x191)](_0x240990=>_0x240990!=_0x2f801e);if(!watchedSymbols[_0x6d17b1(0x10b)](_0x2f801e))watchedSymbols[_0x6d17b1(0x1ef)](_0x2f801e);_0x5ca884++;}}),loading[_0x4cdd0c(0x16f)]=Math[_0x4cdd0c(0x1c7)](_0x5ca884/(_0x13ebae[_0x4cdd0c(0xba)]+maxLoadingProgress)*0x64);loading[_0x4cdd0c(0x16f)]!=0x64&&(_0x360201>0x1e*0x5&&(loading['timeout']=!![],emitLoadingProgress()),_0x360201>0x78*0x5&&!_0x345afa&&(_0x345afa=!![],logHistory(_0x4cdd0c(0xaa),_0x4cdd0c(0x1e2)+loading['remainingSymbols'][_0x4cdd0c(0x1a5)](',\x20')+'\x20-\x20bot\x20not\x20started'),logHistory('error',_0x4cdd0c(0x1db)+loadCoinsRetryInterval/0xea60+_0x4cdd0c(0x271)),loadingCanceled=!![],await sleep(loadCoinsRetryInterval),restartBot()));if(loadingCanceled){loading[_0x4cdd0c(0x121)]=!![],emitLoadingProgress();break;}else _0x79eb86!=loading[_0x4cdd0c(0x16f)]&&(_0x79eb86=loading[_0x4cdd0c(0x16f)],emitLoadingProgress()),_0x360201++,await sleep(0xc8);}_0x5ca884==_0x13ebae[_0x4cdd0c(0xba)]+maxLoadingProgress&&(coinsLoaded=!![],process[_0x4cdd0c(0x10e)]({'status':'enabled','live':'running'},_0x5893eb=>{}),_0x345afa&&logHistory(_0x4cdd0c(0x24b),_0x4cdd0c(0xbf)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x4ef408=_0x5bdcb0;proxyEmit(_0x4ef408(0xe3),{...emittedConfiguration(),'configstate':_0x4ef408(0x178)});}function emitLoadingProgress(){const _0x26bc06=_0x5bdcb0;proxyEmit(_0x26bc06(0x237),loading);}async function getFiat(){const _0x2522f7=_0x5bdcb0;let _0x8518ef=gTicker[stablecoins['eur']['coin']],_0x508428=gTicker[stablecoins['usd'][_0x2522f7(0x158)]];return{'eur':Number(_0x8518ef),'usd':Number(_0x508428)};}function capitalize(_0x494bb7){const _0x4d0852=_0x5bdcb0;return _0x494bb7['substring'](0x0,0x1)[_0x4d0852(0xc6)]()+_0x494bb7['substring'](0x1);}function supportedExchanges(){const _0x4d366b=_0x5bdcb0,_0x3dce26=['ws',_0x4d366b(0x1f4),_0x4d366b(0xf2),_0x4d366b(0x11c),_0x4d366b(0xb3),_0x4d366b(0x202),'createOrder','fetchOpenOrders',_0x4d366b(0x200)];let _0x2028a2=[],_0x23a671=[],_0x29c755=ccxt[_0x4d366b(0x110)]['exchanges'];_0x29c755['forEach'](_0x13508a=>{const _0x320d49=_0x4d366b;try{const _0x2def60=new ccxt[(_0x320d49(0x110))][_0x13508a]();_0x23a671['push'](_0x2def60);}catch(_0x36f3b2){}}),_0x23a671[_0x4d366b(0x164)](_0x1a73d4=>{const _0x5ca0a3=_0x4d366b;let _0x4ec657=0x0;_0x3dce26['forEach'](_0x4cd588=>{const _0x1d89f3=_0x3327;_0x4cd588 in _0x1a73d4[_0x1d89f3(0x233)]&&_0x1a73d4[_0x1d89f3(0x233)][_0x4cd588]&&_0x4ec657++;}),_0x4ec657==_0x3dce26[_0x5ca0a3(0xba)]&&(!excludedExchanges[_0x5ca0a3(0x10b)](_0x1a73d4['id'])&&_0x2028a2[_0x5ca0a3(0x1ef)](capitalize(_0x1a73d4['id'])));});let _0x2e5e7d=[];return _0x29c755[_0x4d366b(0x164)](_0x1474ce=>{const _0x19978e=_0x4d366b;_0x1474ce=capitalize(_0x1474ce);if(!_0x2028a2[_0x19978e(0x10b)](_0x1474ce))_0x2e5e7d['push'](_0x1474ce);}),_0x2028a2;}function setStartDatePerformance(){const _0x56019a=_0x5bdcb0;if(config&&config[_0x56019a(0x145)][0x0]['changes'][_0x56019a(0xba)]!=0x0){const _0x180bf4=config[_0x56019a(0x145)][0x0][_0x56019a(0x273)];dbPerformance[_0x56019a(0x19d)](_0x56019a(0x119))[_0x56019a(0xf7)]({'date':config['startdate']})[_0x56019a(0x1c0)]({'coins':_0x180bf4})[_0x56019a(0xc3)]();}}function calculatePnL(_0x3b3d77,_0x39ce71,_0x1eb67b,_0x39e52c,_0x21e108,_0x3cabd5){const _0xa7ccfa=_0x5bdcb0;!_0x3b3d77[_0xa7ccfa(0x10b)]('/'+config['basecoin'])&&(_0x1eb67b=_0x1eb67b==_0xa7ccfa(0x13e)?_0xa7ccfa(0x1d4):_0xa7ccfa(0x13e));!_0x3cabd5[_0x39ce71]&&(_0x3cabd5[_0x39ce71]={'number':0x0,'sells':0x0,'buys':0x0,'breakeven':0x0,'realizedPnL':0x0});let _0x4ea28d=0x0,_0x8e9657,_0x313599;if(_0x1eb67b==_0xa7ccfa(0x13e))_0x313599=_0x3cabd5[_0x39ce71][_0xa7ccfa(0x1e4)]*_0x3cabd5[_0x39ce71][_0xa7ccfa(0x277)]+_0x21e108*_0x39e52c,_0x3cabd5[_0x39ce71]['number']+=_0x39e52c,_0x3cabd5[_0x39ce71][_0xa7ccfa(0x277)]=_0x3cabd5[_0x39ce71][_0xa7ccfa(0x1e4)]!=0x0?_0x313599/_0x3cabd5[_0x39ce71][_0xa7ccfa(0x1e4)]:0x0,_0x3cabd5[_0x39ce71]['buys']++;else _0x1eb67b==_0xa7ccfa(0x1d4)&&(_0x8e9657=Math['min'](_0x3cabd5[_0x39ce71]['number'],_0x39e52c),_0x4ea28d=(_0x21e108-_0x3cabd5[_0x39ce71][_0xa7ccfa(0x277)])*_0x8e9657,_0x313599=Math[_0xa7ccfa(0x17d)](_0x3cabd5[_0x39ce71]['number']*_0x3cabd5[_0x39ce71][_0xa7ccfa(0x277)]-_0x8e9657*_0x3cabd5[_0x39ce71][_0xa7ccfa(0x277)],0x0),_0x3cabd5[_0x39ce71]['number']-=_0x8e9657,_0x3cabd5[_0x39ce71][_0xa7ccfa(0x277)]=_0x3cabd5[_0x39ce71][_0xa7ccfa(0x1e4)]!=0x0?_0x313599/_0x3cabd5[_0x39ce71][_0xa7ccfa(0x1e4)]:0x0,_0x3cabd5[_0x39ce71][_0xa7ccfa(0x206)]+=_0x4ea28d,_0x3cabd5[_0x39ce71][_0xa7ccfa(0xec)]++);return _0x4ea28d;}async function generatePnL(){const _0x4e826a=_0x5bdcb0;pnlGenerationNeeded=![],logger['debug']('Generating\x20PnL\x20data');const _0x4a9a4a=dbLogs[_0x4e826a(0x19d)](_0x4e826a(0xb0))[_0x4e826a(0xa9)]();let _0x673006={},_0xdf765c=0x0,_0xbf2668=0x0,_0x299d37=config[_0x4e826a(0x1cf)];const _0x504b4f=fns[_0x4e826a(0x160)](_0x299d37,_0x4e826a(0x23b),new Date()),_0x204720=new Date();let _0x52ad99=0x0;for(let _0x9c2698=_0x504b4f;!fns[_0x4e826a(0x23c)](_0x204720,_0x9c2698);_0x9c2698=fns['addDays'](_0x9c2698,0x1)){const _0x4642c7=fns['format'](_0x9c2698,_0x4e826a(0x23b));while(_0xdf765c<_0x4a9a4a['length']){const _0x29acc1=new Date(_0x4a9a4a[_0xdf765c][_0x4e826a(0x1fb)]);if(fns[_0x4e826a(0x23c)](_0x29acc1,_0x9c2698))_0xdf765c++;else{if(_0x4a9a4a[_0xdf765c][_0x4e826a(0x1fb)][_0x4e826a(0x10b)](_0x4642c7)){const _0xc411cc=_0x4a9a4a[_0xdf765c];if(_0xc411cc[_0x4e826a(0x157)]===_0x4e826a(0x190)&&(_0xc411cc['event']['includes'](_0x4e826a(0x14e))||_0xc411cc[_0x4e826a(0x261)][_0x4e826a(0x10b)](_0x4e826a(0x207)))){const _0x432f74=_0xc411cc[_0x4e826a(0x261)][_0x4e826a(0x15f)](/([A-Z]+\/[A-Z]+) (sell|buy) #([\d.]+) @([\d.]+)/);if(_0x432f74){const [,_0x2e7766,_0x1332c8,_0x17d69d,_0x1afb06]=_0x432f74,_0x42bf65=_0x2e7766[_0x4e826a(0x10b)]('/'+config[_0x4e826a(0x208)])?_0x2e7766[_0x4e826a(0x15c)]('/')[0x0]:_0x2e7766[_0x4e826a(0x15c)]('/')[0x1],_0x4a5747=calculatePnL(_0x2e7766,_0x42bf65,_0x1332c8,parseFloat(_0x17d69d),parseFloat(_0x1afb06),_0x673006);_0xbf2668+=_0x4a5747;}}_0xdf765c++;}else break;}}dbPerformance[_0x4e826a(0x19d)]('data')[_0x4e826a(0xf7)]({'date':_0x4642c7})['assign']({'pnl':_0xbf2668})[_0x4e826a(0xc3)]();}dbCoinResults[_0x4e826a(0x11e)]('coins',_0x673006)[_0x4e826a(0xc3)](),logger['debug']('Generated\x20PnL\x20data');const _0x1c32d6=getNormalizedPerformance();emitPerformance(_0x1c32d6);}async function updatePnL(_0xac25fe){const _0x404a18=_0x5bdcb0,{symbol:_0x27bf0a,coin:_0x1840a1,amount:_0x459f8c,price:_0x3b3fba,side:_0x1ad7a8,reverse:_0x29ead0}=_0xac25fe;let _0x47dcae=dbCoinResults[_0x404a18(0x19d)](_0x404a18(0xf4))[_0x404a18(0xa9)]();const _0x362dc9=calculatePnL(_0x27bf0a,_0x1840a1,_0x1ad7a8,_0x459f8c,_0x3b3fba,_0x47dcae);dbCoinResults[_0x404a18(0x11e)]('coins',_0x47dcae)[_0x404a18(0xc3)]();const _0x353c6b=getTimeStamp()['split']('\x20')[0x0];let _0x208649=dbPerformance[_0x404a18(0x19d)]('data')[_0x404a18(0xf7)]({'date':_0x353c6b})[_0x404a18(0xa9)]();_0x208649?(_0x208649[_0x404a18(0x239)]+=_0x362dc9,dbPerformance[_0x404a18(0x19d)](_0x404a18(0x119))[_0x404a18(0xf7)]({'date':_0x353c6b})[_0x404a18(0x1c0)](_0x208649)[_0x404a18(0xc3)]()):await storePerformance();const _0x3fe307=getNormalizedPerformance();emitPerformance(_0x3fe307);}async function validate24hChanges(){const _0x5f01c4=_0x5bdcb0;for(const _0x410ed8 of currentCoins){if(_0x410ed8[_0x5f01c4(0x158)]!=config[_0x5f01c4(0x208)]){let _0xf57fb7;_0x410ed8[_0x5f01c4(0x1b6)]?_0xf57fb7=formatResult((0x1/(gChange[_0x410ed8['symbol']]/0x64+0x1)-0x1)*0x64,0x3):_0xf57fb7=gChange[_0x410ed8[_0x5f01c4(0x227)]],_0xf57fb7<config[_0x5f01c4(0x13f)]&&(logHistory(_0x5f01c4(0xaa),_0x410ed8[_0x5f01c4(0x158)]+_0x5f01c4(0x262)+_0xf57fb7+'%'),logHistory(_0x5f01c4(0xaa),_0x5f01c4(0x1d5)),logHistory('error','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again'),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x581efc,_0x3b2772){const _0x4cc32c=_0x5bdcb0;if(!_0x581efc)return!![];const _0x5df625=_0x3b2772['split']('.'),_0xd314d4=_0x581efc[_0x4cc32c(0x15c)]('.');for(var _0x42c563=0x0;_0x42c563<_0xd314d4[_0x4cc32c(0xba)];_0x42c563++){const _0x154186=~~_0xd314d4[_0x42c563],_0xf45051=~~_0x5df625[_0x42c563];if(_0x154186<_0xf45051)return!![];if(_0x154186>_0xf45051)return![];}return![];}async function oneTimeMigration(){const _0x414124=_0x5bdcb0;let _0x22f979=dbLogs['get']('version')[_0x414124(0xa9)]();if(isOlderVersion(_0x22f979,_0x414124(0x1ce))){let _0x1562e5=[];const _0x2c905a=dbLogs['get'](_0x414124(0xb0))[_0x414124(0xa9)]();_0x2c905a[_0x414124(0x164)](_0x351301=>{const _0x142ed1=_0x414124;_0x1562e5[_0x142ed1(0x1ef)]({'time':_0x351301[_0x142ed1(0x1fb)],'type':_0x351301[_0x142ed1(0x157)],'event':_0x351301['event']});}),dbLogs['get']('logs')[_0x414124(0x1c0)](_0x1562e5)[_0x414124(0xc3)]();}let _0x441212=dbConfig[_0x414124(0x19d)]('version')[_0x414124(0xa9)]();if(isOlderVersion(_0x441212,_0x414124(0x1ce))){let _0x5efd20=dbConfig[_0x414124(0x19d)](_0x414124(0x106))[_0x414124(0xf7)]({'botID':botID})[_0x414124(0xa9)]();if(_0x5efd20){let _0x1a3bb2=[];_0x5efd20[_0x414124(0x159)][_0x414124(0x164)](_0x1814cc=>{const _0x12cd03=_0x414124;_0x1a3bb2['push']({'coin':_0x1814cc[_0x12cd03(0x158)],'number':_0x1814cc['startnumber'],'price':_0x1814cc['startprice']}),delete _0x1814cc[_0x12cd03(0x1e5)],delete _0x1814cc[_0x12cd03(0x1e3)];});if(_0x1a3bb2['length']!==0x0)fs[_0x414124(0x251)](configbackuppath+(_0x414124(0x16a)+botID+'.json'),JSON[_0x414124(0x18e)](_0x1a3bb2,null,0x4),function(_0x28f6d2){if(_0x28f6d2){}});const _0x570ca0=(_0xc94aa4,_0x268aa7)=>{const _0x404406=_0x414124;let _0x460265=[];_0x268aa7[_0x404406(0x164)](_0x5c06e5=>{const _0x37b1f2=_0x404406,_0x11719e=_0xc94aa4[_0x37b1f2(0xf7)](_0x1f573d=>_0x1f573d[_0x37b1f2(0x158)]==_0x5c06e5[_0x37b1f2(0x158)]);if(!_0x11719e)_0x460265['push'](_0x5c06e5);});let _0x25fd25=[];return _0xc94aa4[_0x404406(0x164)](_0x3f8ec0=>{const _0x53a5de=_0x404406,_0x53bc85=_0x268aa7[_0x53a5de(0xf7)](_0x32c065=>_0x32c065[_0x53a5de(0x158)]==_0x3f8ec0[_0x53a5de(0x158)]);if(!_0x53bc85||_0x53bc85[_0x53a5de(0x1e4)]==0x0&&_0x3f8ec0[_0x53a5de(0x1e4)]!=0x0)_0x25fd25['push'](_0x3f8ec0);}),{'missingDay1':_0x460265,'notInDay2':_0x25fd25};},_0x440e1f=dbPerformance[_0x414124(0x19d)](_0x414124(0x119))[_0x414124(0x150)]()[_0x414124(0xa9)]();if(_0x440e1f['length']>0x1){const {missingDay1:_0x34205a,notInDay2:_0x1a8a27}=_0x570ca0(_0x1a3bb2,_0x440e1f[0x1]['coins']);_0x1a3bb2=[..._0x1a3bb2,..._0x34205a],_0x1a8a27[_0x414124(0x164)](_0x15f15b=>{const _0x182967=_0x414124;let _0x977f3a=_0x1a3bb2[_0x182967(0xc9)](_0xdeb166=>_0xdeb166[_0x182967(0x158)]==_0x15f15b[_0x182967(0x158)]);_0x977f3a!=-0x1&&_0x1a3bb2[_0x182967(0x149)](_0x977f3a,0x1);});}_0x1a3bb2[_0x414124(0xc8)]((_0x2a0053,_0x17dc66)=>_0x2a0053[_0x414124(0x158)]>_0x17dc66[_0x414124(0x158)]?0x1:_0x17dc66['coin']>_0x2a0053['coin']?-0x1:0x0);let _0x26a96d=[{'date':_0x5efd20[_0x414124(0x1cf)],'changes':_0x1a3bb2}];_0x440e1f[_0x414124(0xba)]>0x2&&_0x440e1f[_0x414124(0x164)]((_0x25f4f3,_0x3cda2c)=>{const _0x40785f=_0x414124;if(_0x3cda2c>0x0&&_0x3cda2c<_0x440e1f[_0x40785f(0xba)]-0x1){const {missingDay1:_0x13d183,notInDay2:_0x318a5e}=_0x570ca0(_0x440e1f[_0x3cda2c][_0x40785f(0xf4)],_0x440e1f[_0x3cda2c+0x1]['coins']);_0x1a3bb2=[],(_0x13d183[_0x40785f(0xba)]!=0x0||_0x318a5e[_0x40785f(0xba)]!=0x0)&&(_0x13d183[_0x40785f(0xba)]!=0x0&&_0x1a3bb2[_0x40785f(0x1ef)](..._0x13d183),_0x318a5e[_0x40785f(0xba)]!=0x0&&(_0x318a5e[_0x40785f(0x164)](_0x53b58f=>{const _0x3af280=_0x40785f;_0x53b58f[_0x3af280(0x1e4)]=-_0x53b58f[_0x3af280(0x1e4)];}),_0x1a3bb2[_0x40785f(0x1ef)](..._0x318a5e)),_0x1a3bb2[_0x40785f(0xc8)]((_0x14dbfb,_0x15b4c2)=>_0x14dbfb[_0x40785f(0x158)]>_0x15b4c2[_0x40785f(0x158)]?0x1:_0x15b4c2[_0x40785f(0x158)]>_0x14dbfb[_0x40785f(0x158)]?-0x1:0x0),_0x26a96d[_0x40785f(0x1ef)]({'date':_0x440e1f[_0x3cda2c+0x1][_0x40785f(0x15e)],'changes':_0x1a3bb2}));}}),dbConfig['get'](_0x414124(0x106))['find']({'botID':botID})['assign']({..._0x5efd20,'liquidity':_0x26a96d})['write']();}}if(isOlderVersion(_0x441212,'2.6.0')){let _0xee0c64=dbConfig[_0x414124(0x19d)](_0x414124(0x106))[_0x414124(0xf7)]({'botID':botID})['value']();if(_0xee0c64){const _0x498207=_0xee0c64['exchange'],_0x11c924=_0x498207?capitalize(_0x498207):'Binance';dbConfig[_0x414124(0x19d)](_0x414124(0x106))[_0x414124(0xf7)]({'botID':botID})[_0x414124(0x1c0)]({'exchange':_0x11c924})[_0x414124(0xc3)]();}}if(isOlderVersion(_0x441212,_0x414124(0x15b))){let _0x37dba7=dbConfig[_0x414124(0x19d)](_0x414124(0x106))[_0x414124(0xf7)]({'botID':botID})[_0x414124(0xa9)]();if(_0x37dba7){const _0x2b2414=_0x37dba7[_0x414124(0x165)],_0x579597=_0x2b2414?'marketcap':![];dbConfig[_0x414124(0x19d)](_0x414124(0x106))[_0x414124(0xf7)]({'botID':botID})[_0x414124(0x1c0)]({'marketcapEnabled':_0x579597})[_0x414124(0xc3)]();}}if(isOlderVersion(_0x441212,_0x414124(0xad))){let _0x4147d9=dbConfig['get']('bot')['find']({'botID':botID})['value']();if(_0x4147d9){const _0x27b4a2=_0x4147d9[_0x414124(0x1a6)],_0x530b58=_0x27b4a2?_0x414124(0x25e):![];dbConfig[_0x414124(0x19d)](_0x414124(0x106))[_0x414124(0xf7)]({'botID':botID})['assign']({'autoliquidity':_0x530b58})[_0x414124(0xc3)]();}}let _0x31dd72=dbPerformance[_0x414124(0x19d)](_0x414124(0xde))[_0x414124(0xa9)]();isOlderVersion(_0x31dd72,'2.3.5')&&setStartDatePerformance();let _0x3eaf98=dbCoinResults[_0x414124(0x19d)](_0x414124(0xde))[_0x414124(0xa9)]();if(isOlderVersion(_0x3eaf98,'2.7.1')){let _0x282f97=dbCoinResults[_0x414124(0x19d)]('coins')[_0x414124(0xa9)]();if(_0x282f97[_0x414124(0xba)]!=0x0)pnlGenerationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x520f12=_0x5bdcb0;dbConfig[_0x520f12(0x11e)](_0x520f12(0xde),serverversion)[_0x520f12(0xc3)](),dbPerformance[_0x520f12(0x11e)](_0x520f12(0xde),serverversion)[_0x520f12(0xc3)](),dbLogs[_0x520f12(0x11e)](_0x520f12(0xde),serverversion)['write'](),dbCoinResults[_0x520f12(0x11e)](_0x520f12(0xde),serverversion)['write']();}function getConfiguration(_0x4f6c3a){const _0x4cedc1=_0x5bdcb0;let _0x370d3d=dbConfig[_0x4cedc1(0x19d)](_0x4cedc1(0x106))[_0x4cedc1(0xf7)]({'botID':_0x4f6c3a})[_0x4cedc1(0xa9)]();if(_0x370d3d){let _0x1330bb=![];typeof _0x370d3d[_0x4cedc1(0x23a)]==_0x4cedc1(0xda)&&(_0x370d3d={..._0x370d3d,'threshold':Number(_0x370d3d[_0x4cedc1(0x23a)])},_0x1330bb=!![]),_0x370d3d[_0x4cedc1(0x13f)]==undefined&&(_0x370d3d={..._0x370d3d,'change24h':-0x14},_0x1330bb=!![]),_0x370d3d[_0x4cedc1(0x275)]==undefined&&(_0x370d3d={..._0x370d3d,'fiat':_0x4cedc1(0x1b5)},_0x1330bb=!![]),_0x370d3d[_0x4cedc1(0x25f)]==undefined&&(_0x370d3d={..._0x370d3d,'onepagemode':settings[_0x4cedc1(0x25f)]},_0x1330bb=!![]),_0x370d3d[_0x4cedc1(0x20a)]==undefined&&(_0x370d3d={..._0x370d3d,'colorscheme':'red_yellow_blue'},_0x1330bb=!![]),_0x370d3d[_0x4cedc1(0x1a6)]==undefined&&(_0x370d3d={..._0x370d3d,'autoliquidity':'update-liquidity'},_0x1330bb=!![]),_0x370d3d['marketcapApi']==undefined&&(_0x370d3d={..._0x370d3d,'marketcapApi':settings[_0x4cedc1(0xe4)]?!![]:![]},_0x1330bb=!![]),_0x370d3d['marketcapEnabled']==undefined&&(_0x370d3d={..._0x370d3d,'marketcapEnabled':![]},_0x1330bb=!![]),_0x370d3d['sandbox']==undefined&&(_0x370d3d={..._0x370d3d,'sandbox':![]},_0x1330bb=!![]),_0x1330bb&&(_0x370d3d={'botID':_0x370d3d[_0x4cedc1(0x22e)],'exchange':_0x370d3d[_0x4cedc1(0x1d8)],'apiKey':_0x370d3d[_0x4cedc1(0x172)],'apiSecret':_0x370d3d[_0x4cedc1(0x1ab)],'apiPassword':_0x370d3d[_0x4cedc1(0x1e0)],'basecoin':_0x370d3d['basecoin'],'botname':_0x370d3d[_0x4cedc1(0x12f)],'showname':_0x370d3d[_0x4cedc1(0x229)],'threshold':_0x370d3d[_0x4cedc1(0x23a)],'ordertype':_0x370d3d[_0x4cedc1(0x125)],'timeout':_0x370d3d['timeout'],'fiat':_0x370d3d[_0x4cedc1(0x275)],'startdate':_0x370d3d[_0x4cedc1(0x1cf)],'recreate':_0x370d3d[_0x4cedc1(0xf0)],'timeshift':_0x370d3d[_0x4cedc1(0x16d)],'onepagemode':_0x370d3d['onepagemode'],'headless':_0x370d3d[_0x4cedc1(0x27b)],'cooldown':_0x370d3d['cooldown'],'change24h':_0x370d3d[_0x4cedc1(0x13f)],'emojibuy':_0x370d3d[_0x4cedc1(0x13a)],'emojisell':_0x370d3d[_0x4cedc1(0x135)],'colorscheme':_0x370d3d[_0x4cedc1(0x20a)],'marketcapApi':_0x370d3d[_0x4cedc1(0xe4)],'marketcapEnabled':_0x370d3d[_0x4cedc1(0x165)],'sandbox':_0x370d3d[_0x4cedc1(0x1ca)],'portfolio':_0x370d3d[_0x4cedc1(0x159)],'autoliquidity':_0x370d3d[_0x4cedc1(0x1a6)],'liquidity':_0x370d3d[_0x4cedc1(0x145)],'openOrders':_0x370d3d['openOrders']},dbConfig[_0x4cedc1(0x19d)](_0x4cedc1(0x106))[_0x4cedc1(0x107)]()[_0x4cedc1(0xc3)](),dbConfig[_0x4cedc1(0x19d)](_0x4cedc1(0x106))['push'](_0x370d3d)[_0x4cedc1(0xc3)]());}else _0x370d3d={'botID':_0x4f6c3a,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x4cedc1(0x1c6)+_0x4f6c3a,'showname':![],'threshold':0x3,'ordertype':_0x4cedc1(0x100),'timeout':0x14,'fiat':_0x4cedc1(0x1b5),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x4cedc1(0x16d)],'onepagemode':settings[_0x4cedc1(0x25f)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x4cedc1(0x12a),'marketcapApi':settings[_0x4cedc1(0xe4)]?!![]:![],'marketcapEnabled':![],'sandbox':![],'portfolio':[],'autoliquidity':'update-liquidity','liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x370d3d;}function emittedConfiguration(){const _0x314f1a=_0x5bdcb0;let _0x486d37;if(config['apiKey']=='')_0x486d37={...config,'configstate':_0x314f1a(0x12c)};else config['apiKey']==_0x314f1a(0x1f3)?_0x486d37={...config,'configstate':_0x314f1a(0x1be)}:(_0x486d37={...config,'apiKey':_0x314f1a(0xe7),'apiSecret':_0x314f1a(0xe7)},config[_0x314f1a(0x1e0)]&&(_0x486d37[_0x314f1a(0x1e0)]=_0x314f1a(0xe7)));return _0x486d37['enableFiatToggle']=enableFiatToggle,_0x486d37;}function getSettings(){const _0x503640=_0x5bdcb0;return dbSettings[_0x503640(0x19d)](_0x503640(0x195))[_0x503640(0xa9)]();}function getSecure(){const _0x23c26c=_0x5bdcb0;return dbSecure[_0x23c26c(0x19d)](_0x23c26c(0xc2))[_0x23c26c(0xa9)]()||{};}function updateTimeshift(_0x3add9f){const _0x5c8555=_0x5bdcb0;let _0x36105c=dbConfig[_0x5c8555(0x19d)](_0x5c8555(0x106))[_0x5c8555(0xf7)]({'botID':botID})[_0x5c8555(0xa9)]();_0x36105c&&dbConfig['get'](_0x5c8555(0x106))[_0x5c8555(0xf7)]({'botID':botID})[_0x5c8555(0x1c0)]({'timeshift':_0x3add9f})[_0x5c8555(0xc3)](),config[_0x5c8555(0x16d)]=_0x3add9f,proxyEmit(_0x5c8555(0xe3),emittedConfiguration());}function updateOnepagemode(_0x25543f){const _0x43d7aa=_0x5bdcb0;let _0x98e116=dbConfig[_0x43d7aa(0x19d)]('bot')[_0x43d7aa(0xf7)]({'botID':botID})['value']();_0x98e116&&dbConfig[_0x43d7aa(0x19d)](_0x43d7aa(0x106))[_0x43d7aa(0xf7)]({'botID':botID})[_0x43d7aa(0x1c0)]({'onepagemode':_0x25543f})[_0x43d7aa(0xc3)](),config[_0x43d7aa(0x25f)]=_0x25543f,proxyEmit(_0x43d7aa(0xe3),emittedConfiguration());}function updateMarketcapApi(_0xdc8fef){const _0x43757d=_0x5bdcb0,_0x7bbaa3=_0xdc8fef?!![]:![];let _0x1f0aef=dbConfig[_0x43757d(0x19d)]('bot')[_0x43757d(0xf7)]({'botID':botID})['value']();_0x1f0aef&&dbConfig[_0x43757d(0x19d)](_0x43757d(0x106))['find']({'botID':botID})['assign']({'marketcapApi':_0x7bbaa3})['write'](),config[_0x43757d(0xe4)]=_0x7bbaa3,getMarketCap(),proxyEmit('configuration',emittedConfiguration());}async function storeConfiguration(_0x2405c8){const _0x4caf38=_0x5bdcb0;logger[_0x4caf38(0x26f)](_0x4caf38(0x10d));_0x2405c8[_0x4caf38(0x25c)]&&delete _0x2405c8[_0x4caf38(0x25c)];if(pidBalances)clearTimeout(pidBalances);setBlockTransactionDetection(!![]);let _0x42a99a=![],_0xa5c93f=![],_0x55f852=[];_0x2405c8['portfolio']['forEach'](_0x4f3403=>{const _0x4368d8=_0x4caf38;if(!_0x4f3403[_0x4368d8(0x189)]&&_0x4f3403[_0x4368d8(0x158)]!=_0x2405c8[_0x4368d8(0x208)])_0x55f852['push'](_0x4f3403[_0x4368d8(0x227)]);}),_0x55f852['forEach'](_0x5590bc=>{const _0x22b784=_0x4caf38,_0x537845=currentCoins[_0x22b784(0xf7)](_0x45e8a6=>_0x45e8a6[_0x22b784(0x227)]==_0x5590bc);!_0x537845&&(_0x42a99a=!![]);}),currentCoins[_0x4caf38(0x164)](_0x5e24f7=>{const _0x3d3400=_0x4caf38;if(_0x5e24f7[_0x3d3400(0x158)]!=config[_0x3d3400(0x208)]){const _0x34f9fc=_0x55f852[_0x3d3400(0xf7)](_0x435891=>_0x435891==_0x5e24f7[_0x3d3400(0x227)]);!_0x34f9fc&&(_0x42a99a=!![]);}}),_0x2405c8['portfolio']['forEach'](_0x2e297d=>{const _0x2a79fd=_0x4caf38,_0x2fd167=config[_0x2a79fd(0x159)][_0x2a79fd(0xf7)](_0x287ee3=>_0x287ee3[_0x2a79fd(0x158)]==_0x2e297d[_0x2a79fd(0x158)]);if(_0x2fd167&&_0x2e297d[_0x2a79fd(0x142)]!=_0x2fd167[_0x2a79fd(0x142)])_0xa5c93f=!![];});let _0x5dfbd9=dbConfig[_0x4caf38(0x19d)]('bot')[_0x4caf38(0xf7)]({'botID':botID})[_0x4caf38(0xa9)]();_0x2405c8={..._0x2405c8,'apiKey':decryptRSA(secure[_0x4caf38(0x1c1)],_0x2405c8[_0x4caf38(0x172)]),'apiSecret':decryptRSA(secure[_0x4caf38(0x1c1)],_0x2405c8[_0x4caf38(0x1ab)])};_0x2405c8[_0x4caf38(0x1e0)]&&(_0x2405c8[_0x4caf38(0x1e0)]=decryptRSA(secure['privateKey'],_0x2405c8[_0x4caf38(0x1e0)]));let _0x155fb3=![];if(_0x5dfbd9){_0x2405c8[_0x4caf38(0x172)]==_0x4caf38(0xe7)?_0x2405c8[_0x4caf38(0x172)]=config[_0x4caf38(0x172)]:_0x155fb3=!![];_0x2405c8[_0x4caf38(0x1ab)]==_0x4caf38(0xe7)?_0x2405c8[_0x4caf38(0x1ab)]=config[_0x4caf38(0x1ab)]:_0x155fb3=!![];if(_0x2405c8[_0x4caf38(0x1e0)]==_0x4caf38(0xe7))_0x2405c8[_0x4caf38(0x1e0)]=config[_0x4caf38(0x1e0)];else{if(_0x2405c8['apiPassword'])_0x155fb3=!![];}dbConfig[_0x4caf38(0x19d)](_0x4caf38(0x106))[_0x4caf38(0xf7)]({'botID':botID})[_0x4caf38(0x1c0)](_0x2405c8)[_0x4caf38(0xc3)]();}else dbConfig[_0x4caf38(0x19d)](_0x4caf38(0x106))[_0x4caf38(0x1ef)](_0x2405c8)[_0x4caf38(0xc3)](),_0x155fb3=!![],process[_0x4caf38(0x10e)]({'status':'enabled','live':_0x4caf38(0x1ea)},_0x449bba=>{});process[_0x4caf38(0x10e)]({'botname':_0x2405c8['botname']},_0x5efbe0=>{}),config={..._0x2405c8},updateBotManager(),proxyEmit('configuration-stored'),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x155fb3)await reset(!![]);else _0x42a99a||_0xa5c93f?await reset(![]):getBalances();setBlockTransactionDetection(![]);}async function storeHeadless(_0x3e0af5){const _0x27dd16=_0x5bdcb0,_0x3401c9={...config,'headless':_0x3e0af5['headless']};let _0x72a523=dbConfig[_0x27dd16(0x19d)](_0x27dd16(0x106))['find']({'botID':botID})[_0x27dd16(0xa9)]();_0x72a523&&dbConfig[_0x27dd16(0x19d)](_0x27dd16(0x106))[_0x27dd16(0xf7)]({'botID':botID})[_0x27dd16(0x1c0)](_0x3401c9)[_0x27dd16(0xc3)](),config={..._0x3401c9},updateBotManager(),proxyEmit('configuration',emittedConfiguration());}async function storeFiat(_0x80307c){const _0x867979=_0x5bdcb0,_0x31533b={...config,'fiat':_0x80307c};let _0x97c6b7=dbConfig['get'](_0x867979(0x106))[_0x867979(0xf7)]({'botID':botID})[_0x867979(0xa9)]();_0x97c6b7&&dbConfig['get'](_0x867979(0x106))['find']({'botID':botID})[_0x867979(0x1c0)](_0x31533b)[_0x867979(0xc3)](),config={..._0x31533b},proxyEmit('configuration',emittedConfiguration());}function resetHistory(){const _0x157d29=_0x5bdcb0;logger[_0x157d29(0xb9)](_0x157d29(0x133));try{if(fs[_0x157d29(0x14a)](path[_0x157d29(0x1a5)](configpath,_0x157d29(0x27f)+botID+_0x157d29(0xf8))))fs[_0x157d29(0x21c)](path['join'](configpath,_0x157d29(0x27f)+botID+'-events.json'));if(fs[_0x157d29(0x14a)](path[_0x157d29(0x1a5)](configpath,'bot-'+botID+_0x157d29(0x213))))fs['unlinkSync'](path['join'](configpath,'bot-'+botID+_0x157d29(0x213)));if(fs[_0x157d29(0x14a)](path[_0x157d29(0x1a5)](configpath,'bot-'+botID+'-results.json')))fs['unlinkSync'](path[_0x157d29(0x1a5)](configpath,_0x157d29(0x27f)+botID+'-results.json'));}catch(_0x1a7865){if(_0x1a7865)logger[_0x157d29(0xb9)]('Error\x20while\x20deleting\x20files:\x20',_0x1a7865);}const _0x1466d7=getDate();let _0x5940fa=[];currentCoins[_0x157d29(0x164)](_0x84fdb3=>{const _0x4aa913=_0x157d29;_0x5940fa[_0x4aa913(0x1ef)]({'coin':_0x84fdb3['coin'],'number':_0x84fdb3[_0x4aa913(0x1e4)],'price':_0x84fdb3['last']});});let _0x53fe5f=dbConfig[_0x157d29(0x19d)](_0x157d29(0x106))[_0x157d29(0xf7)]({'botID':botID})['value']();_0x53fe5f&&(dbConfig[_0x157d29(0x19d)](_0x157d29(0x106))[_0x157d29(0xf7)]({'botID':botID})['assign']({'liquidity':[{'date':_0x1466d7,'changes':_0x5940fa}]})[_0x157d29(0xc3)](),config[_0x157d29(0x145)]=[]),restartBot(!![]);}function noslash(_0xc3a6cd){const _0x4714a1=_0x5bdcb0;return _0xc3a6cd[_0x4714a1(0xff)]('/','');}function updateHighestFee(_0x4fee75){const _0x44831a=_0x5bdcb0;if(_0x4fee75[_0x44831a(0x1b6)]){let _0x2801e1={'filled':_0x4fee75['filled']*_0x4fee75[_0x44831a(0x166)],'amount':_0x4fee75[_0x44831a(0x1fd)]*_0x4fee75[_0x44831a(0x166)],'side':_0x4fee75[_0x44831a(0x1ee)]==_0x44831a(0x1d4)?_0x44831a(0x13e):'sell','price':0x1/_0x4fee75[_0x44831a(0x166)]};_0x4fee75={..._0x4fee75,..._0x2801e1};}const _0x5bd94a=defaultFee*_0x4fee75['filled']*_0x4fee75[_0x44831a(0x166)];lastFees[_0x44831a(0x16e)][_0x44831a(0xba)]===0x14&&lastFees['recent20'][_0x44831a(0x131)](),lastFees[_0x44831a(0x16e)][_0x44831a(0x1ef)](_0x5bd94a),lastFees[_0x44831a(0x156)]=Math[_0x44831a(0x17d)](...lastFees[_0x44831a(0x16e)]);}async function updateNumberCoinsCcxt(_0xa07bd9){const _0x3e17c3=_0x5bdcb0;logger[_0x3e17c3(0x26f)]('0\x20-\x20EXECUTION:\x20'+_0xa07bd9[_0x3e17c3(0x227)]+_0x3e17c3(0x12b)+_0xa07bd9[_0x3e17c3(0x144)]+'\x20|\x20'+_0xa07bd9[_0x3e17c3(0x1fd)]+_0x3e17c3(0x204)+_0xa07bd9[_0x3e17c3(0xb8)]+_0x3e17c3(0x12b)+_0xa07bd9['id']);let _0x3aafac=_0xa07bd9['status'],_0x1be68c=![];currentCoins['forEach'](_0x1c19d8=>{const _0x2a683c=_0x3e17c3;_0x1c19d8[_0x2a683c(0x227)]==_0xa07bd9[_0x2a683c(0x227)]&&(_0x1be68c=!![]);});if(!_0x1be68c)return;const _0x40f24e=currentCoins['find'](_0x3009bb=>_0x3009bb[_0x3e17c3(0x227)]==_0xa07bd9[_0x3e17c3(0x227)]),_0x18ddeb=_0x40f24e['coin'],_0x2252d7=_0x317fc4=>{const _0x23f76c=_0x3e17c3,_0x5d38e6=currentCoins[_0x23f76c(0xf7)](_0x4f880f=>_0x4f880f[_0x23f76c(0x227)]==_0xa07bd9[_0x23f76c(0x227)]);if(_0x5d38e6)_0x5d38e6['orderstatus']=_0x317fc4;};let _0x421dfe=![];for(const _0x25c635 of lastOrders){const _0x1c8d9b=0x64,_0x28c02d=0x1388;let _0x424923=0x0;while(!_0x25c635['orderId']&&_0x424923*_0x1c8d9b<_0x28c02d){_0x424923++,await sleep(_0x1c8d9b);}if(_0x424923>0x0)logger[_0x3e17c3(0x26f)]('Waited\x20'+_0x424923*_0x1c8d9b/0x3e8+_0x3e17c3(0x1a4));_0x25c635[_0x3e17c3(0x222)]==_0xa07bd9['id']&&(_0x421dfe=!![]);}if(_0x3aafac==_0x3e17c3(0x256)){_0x2252d7(_0x3e17c3(0x256));if(_0xa07bd9['filled']>0x0&&_0xa07bd9[_0x3e17c3(0x1fd)]<_0xa07bd9[_0x3e17c3(0xb8)]){if(_0x421dfe){setBlockTransactionDetection(!![]),logger[_0x3e17c3(0x26f)](_0x3e17c3(0x17a)+_0xa07bd9[_0x3e17c3(0x1fd)]+_0x3e17c3(0x24a)+_0xa07bd9['id']);const _0x5aff9b=await getCoins(balanceUpdateDelay,undefined,undefined,_0x18ddeb);[currentCoins,currentCoinsAll]=_0x5aff9b,setBlockTransactionDetection(![]);}else logger[_0x3e17c3(0x26f)](_0x3e17c3(0x17a)+_0xa07bd9['filled']+_0x3e17c3(0x22c)+_0xa07bd9['id']),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay);}}else{if(_0x3aafac=='canceled'){_0x2252d7('canceled'),lastOrders=lastOrders['filter'](_0x27296c=>_0x27296c[_0x3e17c3(0x227)]!=_0xa07bd9[_0x3e17c3(0x227)]);const _0x4cb00c=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x4cb00c,setBlockTransactionDetection(![]),await getOpenOrders(),handleOpenOrders();}else{if(_0x3aafac==_0x3e17c3(0x265)){if(lastOrders)for(const _0x28775f of lastOrders){if(_0x28775f[_0x3e17c3(0x222)]==_0xa07bd9['id']){logger[_0x3e17c3(0x26f)](_0x3e17c3(0x212)+_0xa07bd9['id']),_0x421dfe=!![];if(_0x28775f[_0x3e17c3(0x1fd)]==0x0){setBlockTransactionDetection(!![]),logger[_0x3e17c3(0x26f)](_0x3e17c3(0x27e)+_0xa07bd9['id']);if(_0xa07bd9[_0x3e17c3(0x1dd)])_0x28775f[_0x3e17c3(0x166)]=_0xa07bd9['average'];else{if(_0xa07bd9[_0x3e17c3(0x166)])_0x28775f[_0x3e17c3(0x166)]=_0xa07bd9['price'];else{}}_0x28775f[_0x3e17c3(0x1fd)]=_0xa07bd9[_0x3e17c3(0x1fd)],updateHighestFee(_0x28775f);const _0x1b66ae=await getCoins(balanceUpdateDelay,undefined,undefined,_0x18ddeb);[currentCoins,currentCoinsAll]=_0x1b66ae,setBlockTransactionDetection(![]),await validateOrders(),_0x2252d7(_0x3e17c3(0x1fd)),_0x28775f[_0x3e17c3(0xd4)]={'currency':_0xa07bd9[_0x3e17c3(0xd4)]?_0xa07bd9[_0x3e17c3(0xd4)][_0x3e17c3(0x267)]:null,'cost':_0xa07bd9[_0x3e17c3(0xd4)]?_0xa07bd9[_0x3e17c3(0xd4)][_0x3e17c3(0x270)]:0x0},await updatePnL(_0x28775f);}}}!_0x421dfe&&(logger[_0x3e17c3(0x26f)](_0x3e17c3(0x1f0)+_0xa07bd9['id']),_0x2252d7(_0x3e17c3(0x1fd)),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay),await updateOpenOrders(),handleOpenOrders());}}}if(lastBalances){let _0x141d5c=JSON[_0x3e17c3(0x160)](lastBalances[_0x3e17c3(0x159)]);const _0xdc26d2=_0x141d5c[_0x3e17c3(0xf7)](_0xaa192b=>_0xaa192b[_0x3e17c3(0x227)]==_0xa07bd9[_0x3e17c3(0x227)]);if(_0xdc26d2){if(_0x3aafac==_0x3e17c3(0x256))_0xdc26d2['orderstatus']=_0xdc26d2['orderstatus']=='filled'?_0x3e17c3(0x1fd):_0x3e17c3(0x256);else{if(_0x3aafac==_0x3e17c3(0x1a8))_0xdc26d2[_0x3e17c3(0x176)]=_0xdc26d2['orderstatus']==_0x3e17c3(0x1fd)?_0x3e17c3(0x1fd):_0x3e17c3(0x1a8);else _0x3aafac==_0x3e17c3(0x265)&&(_0xdc26d2[_0x3e17c3(0x176)]='filled');}}lastBalances={...lastBalances,'portfolio':JSON[_0x3e17c3(0x18e)](_0x141d5c)},proxyEmit(_0x3e17c3(0xeb),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x154fff=_0x5bdcb0;await getOpenOrders();let _0x20d75b=![];currentCoins[_0x154fff(0x164)](_0x483b68=>{const _0x54c6ed=_0x154fff;_0x20d75b=allOpenOrders[_0x54c6ed(0xf7)](_0x55a58c=>_0x55a58c[_0x54c6ed(0x227)]==_0x483b68['symbol']),_0x483b68[_0x54c6ed(0x176)]=_0x20d75b?_0x54c6ed(0x256):_0x54c6ed(0xcd);});}async function fetchBalance(_0x2df07f=!![]){const _0x28c4b2=_0x5bdcb0;let _0x3e4b3e,_0x272675,_0x53d42f,_0x4c7a65=0x0;while(!_0x272675&&_0x4c7a65<maxRetries){try{return _0x3e4b3e=await exchange['fetchBalance'](),_0x272675=_0x3e4b3e['total'],_0x272675;}catch(_0x3923a2){_0x53d42f=_0x3923a2,_0x4c7a65++,await sleep(retryInterval);}}return!_0x2df07f?handleErrorNoStop(_0x53d42f,_0x28c4b2(0x11d)):await handleError(_0x53d42f,'fetchBalance()'),![];}async function getCoins(_0x5adae6=0x0,_0x4ce4c9=!![],_0x2970d1=config['basecoin'],_0x30622d){const _0x503396=_0x5bdcb0;let _0x280bf4=[],_0x5488fd=[],_0x1bde9c=[],_0x641e37;if(_0x5adae6)await sleep(_0x5adae6);if(botPaused)return[currentCoins,currentCoinsAll];let _0x150a10=![],_0x5b9951=0x0,_0x1094b4,_0x3df2b;_0x30622d&&(_0x1094b4=currentCoins['find'](_0x4969f2=>_0x4969f2[_0x503396(0x158)]==_0x30622d),_0x1094b4&&(_0x3df2b=_0x1094b4['prevnumber'],delete _0x1094b4[_0x503396(0x134)]));while(!_0x150a10){_0x641e37=await fetchBalance(_0x4ce4c9);if(_0x641e37){if(_0x30622d){if(_0x641e37[_0x30622d]!=_0x3df2b)logger[_0x503396(0x26f)]('Valid\x20balance\x20for\x20'+_0x30622d+':\x20'+_0x641e37[_0x30622d]+'\x20('+_0x3df2b+')'),_0x150a10=!![];else{logger['debug']('Invalid\x20balance\x20for\x20'+_0x30622d+':\x20'+_0x641e37[_0x30622d]+'\x20('+_0x3df2b+')'),_0x5b9951++;if(_0x5b9951<balanceUpdateRetries)await sleep(balanceUpdateDelay);else{logger['debug'](_0x503396(0x136)+_0x5b9951+_0x503396(0x1b9));break;}}}else break;}else return[currentCoins,currentCoinsAll];}for(const [_0x58514a,_0x41c417]of Object[_0x503396(0x1e1)](_0x641e37)){_0x1bde9c[_0x503396(0x1ef)](_0x58514a);}config[_0x503396(0x159)][_0x503396(0x164)](_0x26e5b7=>{const _0x4f85d1=_0x503396;!_0x1bde9c[_0x4f85d1(0x10b)](_0x26e5b7[_0x4f85d1(0x158)])&&(_0x641e37[_0x26e5b7[_0x4f85d1(0x158)]]=0x0);});if(_0x2970d1=='')for(const [_0x250b66,_0x3ed6f7]of Object[_0x503396(0x1e1)](_0x641e37)){_0x3ed6f7!=0x0&&_0x280bf4[_0x503396(0x1ef)]({'coin':_0x250b66});}else for(const [_0x253c87,_0x1909d8]of Object[_0x503396(0x1e1)](_0x641e37)){const _0x4a25b3=config[_0x503396(0x159)][_0x503396(0xf7)](_0x480526=>_0x480526[_0x503396(0x158)]==_0x253c87),_0x49fb1d=_0x253c87+'/'+_0x2970d1,_0x4c9362=_0x2970d1+'/'+_0x253c87,_0x2f1031=currentCoins[_0x503396(0xf7)](_0x43de18=>_0x43de18[_0x503396(0x158)]==_0x253c87);if((_0x1909d8!=0x0||_0x4a25b3)&&(allSymbols['includes'](_0x49fb1d)||_0x253c87==_0x2970d1))_0x2f1031?_0x280bf4[_0x503396(0x1ef)]({..._0x2f1031,'number':Math[_0x503396(0x17d)](_0x1909d8+(_0x4a25b3&&_0x4a25b3[_0x503396(0x142)]||0x0),0x0)}):_0x280bf4[_0x503396(0x1ef)]({'coin':_0x253c87,'symbol':_0x49fb1d,'reverse':![],'number':Math['max'](_0x1909d8+(_0x4a25b3&&_0x4a25b3[_0x503396(0x142)]||0x0),0x0),'orderstatus':_0x503396(0xcd)});else{if((_0x1909d8!=0x0||_0x4a25b3)&&allSymbols['includes'](_0x4c9362))_0x2f1031?_0x280bf4[_0x503396(0x1ef)]({..._0x2f1031,'number':Math[_0x503396(0x17d)](_0x1909d8+(_0x4a25b3&&_0x4a25b3['offset']||0x0),0x0)}):_0x280bf4[_0x503396(0x1ef)]({'coin':_0x253c87,'symbol':_0x4c9362,'reverse':!![],'number':Math[_0x503396(0x17d)](_0x1909d8+(_0x4a25b3&&_0x4a25b3[_0x503396(0x142)]||0x0),0x0),'orderstatus':'none'});else _0x4a25b3&&_0x280bf4[_0x503396(0x1ef)]({'coin':_0x4a25b3['coin'],'symbol':_0x4a25b3['symbol'],'reverse':_0x4a25b3[_0x503396(0x1b6)],'number':0x0,'orderstatus':_0x503396(0xcd)});}}return _0x280bf4['sort']((_0x1346a4,_0x151889)=>_0x1346a4[_0x503396(0x162)]<_0x151889[_0x503396(0x162)]?0x1:_0x151889[_0x503396(0x162)]<_0x1346a4[_0x503396(0x162)]?-0x1:0x0),_0x5488fd=cloneDeep(_0x280bf4),_0x280bf4=_0x280bf4[_0x503396(0x191)](_0x11ccf9=>{const _0x1889e8=_0x503396,_0x573923=config[_0x1889e8(0x159)][_0x1889e8(0xf7)](_0x310ec9=>_0x310ec9[_0x1889e8(0x158)]==_0x11ccf9[_0x1889e8(0x158)]);return _0x573923&&!_0x573923['excluded'];}),[_0x280bf4,_0x5488fd];}async function getOpenOrders(){const _0xc2c132=_0x5bdcb0;let _0x54f49a;allOpenOrders=[];try{for(const _0x5099d8 of config['portfolio']){!_0x5099d8['excluded']&&_0x5099d8[_0xc2c132(0x158)]!=config[_0xc2c132(0x208)]&&(_0x54f49a=await exchange['fetchOpenOrders'](_0x5099d8['symbol']),_0x54f49a[_0xc2c132(0xba)]>0x0&&allOpenOrders[_0xc2c132(0x1ef)](_0x54f49a[0x0]));}}catch(_0x924de8){await handleError(_0x924de8,_0xc2c132(0x18f));}}async function handleOpenOrders(_0x59584a=0x0){const _0x21808c=_0x5bdcb0;allOpenOrders['length']==0x0&&lockOrders==ORDERS['LOCKED']&&allOrdersPlaced&&(_0x59584a==0x0?(logger[_0x21808c(0x26f)](_0x21808c(0x253)),_0x59584a++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x21808c(0x26f)](_0x21808c(0x226)),validateOrders(_0x21808c(0xae))));}async function testAPI(){const _0x65e2de=_0x5bdcb0;try{return await exchange['fetchBalance'](),!![];}catch(_0x3d678b){return loading[_0x65e2de(0x121)]=!![],_0x3d678b[_0x65e2de(0x174)]()[_0x65e2de(0x26a)]()[_0x65e2de(0x10b)]('timestamp')||_0x3d678b[_0x65e2de(0x174)]()[_0x65e2de(0x26a)]()['includes']('request-time')?(logHistory(_0x65e2de(0xaa),_0x65e2de(0x169)),loading[_0x65e2de(0xaa)]='timestamp-issue'):(handleErrorNoStop(_0x3d678b,_0x65e2de(0xc7)),logger[_0x65e2de(0x26f)](_0x65e2de(0x10f),_0x3d678b)),emitLoadingProgress(),botPaused=!![],![];}}function _0x3327(_0x34adff,_0x441584){const _0xabe8b8=_0x3d03();return _0x3327=function(_0x355fed,_0x3602dd){_0x355fed=_0x355fed-0xa8;let _0x3d03a6=_0xabe8b8[_0x355fed];return _0x3d03a6;},_0x3327(_0x34adff,_0x441584);}async function testNewAPI(_0x50f2d6){const _0x51fbff=_0x5bdcb0;logger['debug']('Test\x20new\x20API');const _0x3ac561=ccxt[_0x51fbff(0x110)][_0x50f2d6[_0x51fbff(0x1d8)][_0x51fbff(0x26a)]()],_0x47c479=new _0x3ac561({'apiKey':_0x50f2d6[_0x51fbff(0x172)],'secret':_0x50f2d6[_0x51fbff(0x1ab)],'options':{'defaultType':_0x51fbff(0xef)}});if(_0x50f2d6[_0x51fbff(0x1e0)])_0x47c479[_0x51fbff(0x24e)]=_0x50f2d6[_0x51fbff(0x1e0)];if(_0x47c479[_0x51fbff(0x233)][_0x51fbff(0x1ca)])_0x47c479[_0x51fbff(0x1d9)](_0x50f2d6['sandbox']);try{await _0x47c479[_0x51fbff(0x200)](),botPaused=![];}catch(_0x27ee40){logger['debug'](_0x51fbff(0x25d)+_0x27ee40[_0x51fbff(0x174)]());throw _0x27ee40;}}function cloneDeep(_0x26ea9c){const _0x45561a=_0x5bdcb0;return JSON[_0x45561a(0x160)](JSON[_0x45561a(0x18e)](_0x26ea9c));}async function getPortfolio(_0x19440c){const _0x574123=_0x5bdcb0;let _0x2add44=[],_0x3438f2=[],_0x5f55a4=[],_0x3e9fb1;_0x19440c[_0x574123(0x172)]=decryptRSA(secure[_0x574123(0x1c1)],_0x19440c[_0x574123(0x172)]),_0x19440c[_0x574123(0x1ab)]=decryptRSA(secure[_0x574123(0x1c1)],_0x19440c[_0x574123(0x1ab)]);if(_0x19440c[_0x574123(0x1e0)])_0x19440c[_0x574123(0x1e0)]=decryptRSA(secure[_0x574123(0x1c1)],_0x19440c[_0x574123(0x1e0)]);if(_0x19440c[_0x574123(0x172)]!==_0x574123(0xe7)||_0x19440c[_0x574123(0x1ab)]!==_0x574123(0xe7)||_0x19440c['apiPassword']&&_0x19440c[_0x574123(0x1e0)]!=='************'){if(config[_0x574123(0x1d8)]){if(_0x19440c[_0x574123(0x172)]==_0x574123(0xe7))_0x19440c[_0x574123(0x172)]=config[_0x574123(0x172)];if(_0x19440c['apiSecret']==_0x574123(0xe7))_0x19440c[_0x574123(0x1ab)]=config[_0x574123(0x1ab)];if(_0x19440c[_0x574123(0x1e0)]==_0x574123(0xe7))_0x19440c[_0x574123(0x1e0)]=config['apiPassword'];}try{if(_0x19440c['testApi'])await testNewAPI(_0x19440c);}catch(_0x441b6e){if(_0x441b6e[_0x574123(0x174)]()[_0x574123(0x10b)](_0x574123(0x245))){logHistory(_0x574123(0xaa),_0x574123(0x259)),logHistory(_0x574123(0xaa),_0x574123(0x182)+_0x441b6e['toString']()),proxyEmit('portfolio1',![]);return;}else{if(_0x441b6e['toString']()[_0x574123(0x10b)](_0x574123(0x254))){logHistory(_0x574123(0xaa),_0x574123(0x114)),logHistory(_0x574123(0xaa),_0x574123(0x182)+_0x441b6e['toString']()),proxyEmit('portfolio1',![]);return;}else{logHistory('error',_0x574123(0x15a)+_0x441b6e['toString']()),logger['debug'](_0x574123(0x10f),_0x441b6e),proxyEmit(_0x574123(0xe2),![]);return;}}}exchange?updateExchange(_0x19440c['apiKey'],_0x19440c['apiSecret'],_0x19440c[_0x574123(0x1e0)]):await initExchange(_0x19440c[_0x574123(0x1d8)],_0x19440c[_0x574123(0x172)],_0x19440c[_0x574123(0x1ab)],_0x19440c[_0x574123(0x1e0)],_0x19440c['sandbox']);await loadSymbols();const _0x47476c=await getCoins(0x0,![],_0x19440c[_0x574123(0x208)]);_0x5f55a4=cloneDeep(_0x47476c[0x1]);}else{const _0x5b3b78=await getCoins();_0x5f55a4=cloneDeep(_0x5b3b78[0x1]);}if(_0x19440c[_0x574123(0x208)]=='')proxyEmit(_0x574123(0xe2),!![]),proxyEmit('portfolio2',_0x5f55a4);else{_0x5f55a4[_0x574123(0x164)](_0x13fe05=>{const _0x55af65=_0x574123;if(_0x13fe05['coin']!=_0x19440c[_0x55af65(0x208)]&&allSymbols[_0x55af65(0x10b)](_0x13fe05[_0x55af65(0x227)]))_0x2add44[_0x55af65(0x1ef)](_0x13fe05['symbol']);});if(_0x2add44[_0x574123(0xba)]==0x0)logHistory('error',_0x574123(0x23d));else{try{_0x3438f2=await getTickers(_0x2add44);}catch(_0x4f463a){logHistory(_0x574123(0xaa),_0x574123(0x1cd)),logger[_0x574123(0x26f)](_0x574123(0x10f),_0x4f463a),proxyEmit(_0x574123(0xe2),![]);return;}_0x5f55a4['forEach'](_0x58d411=>{const _0x46a4a7=_0x574123;_0x58d411['coin']!=_0x19440c[_0x46a4a7(0x208)]?_0x3438f2[_0x58d411[_0x46a4a7(0x227)]]?_0x3438f2[_0x58d411[_0x46a4a7(0x227)]][_0x46a4a7(0x22f)]?_0x3e9fb1=_0x58d411[_0x46a4a7(0x1b6)]?0x1/_0x3438f2[_0x58d411[_0x46a4a7(0x227)]]['last']:_0x3438f2[_0x58d411[_0x46a4a7(0x227)]][_0x46a4a7(0x22f)]:_0x3e9fb1=0x0:_0x3e9fb1=0x0:_0x3e9fb1=0x1,_0x58d411[_0x46a4a7(0x166)]=formatResult(_0x3e9fb1,0x8);}),await getMarketCap(_0x5f55a4),proxyEmit(_0x574123(0xe2),!![]),proxyEmit(_0x574123(0x113),_0x5f55a4);}}}function truncateTradeAmount(_0xc45501,_0x53e22e){const _0x192774=_0x5bdcb0;let _0x31501a=0x0;try{_0x31501a=exchange[_0x192774(0x268)](_0xc45501,_0x53e22e);}catch(_0x11513b){}return _0x31501a;}function checkMinimums(_0x528e5a){const _0x2beeea=_0x5bdcb0;let _0x1dd6ba=!![];const _0x3eb973=!_0x528e5a['reverse']?markets[_0x528e5a[_0x2beeea(0x227)]]['limits']['amount']['min']:markets[_0x528e5a[_0x2beeea(0x227)]][_0x2beeea(0x20e)][_0x2beeea(0x270)][_0x2beeea(0x1b2)],_0xa40d77=!_0x528e5a[_0x2beeea(0x1b6)]?markets[_0x528e5a['symbol']][_0x2beeea(0x20e)][_0x2beeea(0x270)][_0x2beeea(0x1b2)]:markets[_0x528e5a[_0x2beeea(0x227)]][_0x2beeea(0x20e)][_0x2beeea(0xb8)]['min'],_0x4766e7=truncateTradeAmount(_0x528e5a[_0x2beeea(0x227)],_0x528e5a[_0x2beeea(0x186)]);_0x528e5a['trade']=_0x4766e7;if(Math[_0x2beeea(0x23f)](_0x4766e7)<_0x3eb973)_0x1dd6ba=![];if(Math[_0x2beeea(0x23f)](_0x4766e7)*_0x528e5a['last']<_0xa40d77)_0x1dd6ba=![];if(_0x528e5a[_0x2beeea(0x1ee)]=='sell'){let _0x5a70ed=config[_0x2beeea(0x159)][_0x2beeea(0xf7)](_0x444d31=>_0x444d31[_0x2beeea(0x158)]==_0x528e5a[_0x2beeea(0x158)]);if(_0x5a70ed[_0x2beeea(0x142)]>0x0){if(Math[_0x2beeea(0x23f)](_0x4766e7)>_0x528e5a[_0x2beeea(0x1e4)]-_0x5a70ed['offset'])_0x1dd6ba=![];}else{if(Math[_0x2beeea(0x23f)](_0x4766e7)>_0x528e5a[_0x2beeea(0x1e4)])_0x1dd6ba=![];}}if(_0x528e5a[_0x2beeea(0x1ee)]==_0x2beeea(0x13e)){let _0x2de126=config[_0x2beeea(0x159)][_0x2beeea(0xf7)](_0x47a2d3=>_0x47a2d3[_0x2beeea(0x158)]==config[_0x2beeea(0x208)]),_0x2f92b3=currentCoins[_0x2beeea(0xf7)](_0x4d7b19=>_0x4d7b19['coin']==config[_0x2beeea(0x208)]);if(_0x2de126[_0x2beeea(0x142)]>0x0){if(Math[_0x2beeea(0x23f)](_0x4766e7)*_0x528e5a[_0x2beeea(0x22f)]>_0x2f92b3[_0x2beeea(0x1e4)]-_0x2de126[_0x2beeea(0x142)])_0x1dd6ba=![];}else{if(Math[_0x2beeea(0x23f)](_0x4766e7)*_0x528e5a[_0x2beeea(0x22f)]>_0x2f92b3[_0x2beeea(0x1e4)])_0x1dd6ba=![];}}return _0x1dd6ba;}async function getBalances(_0x3717c7=!![]){const _0x3ed044=_0x5bdcb0;if(botPaused)return;let _0x1792b4=0x0,_0x41df25;const _0x4aeb19=config[_0x3ed044(0x23a)];if(config[_0x3ed044(0x27b)]&&config['change24h']<0x0)await validate24hChanges();currentCoins['forEach'](_0x457bd3=>{const _0x5bea3e=_0x3ed044;if(_0x457bd3['coin']!=config[_0x5bea3e(0x208)]){let _0x552812=gTicker[noslash(_0x457bd3[_0x5bea3e(0x227)])];_0x41df25=_0x457bd3[_0x5bea3e(0x1b6)]?0x1/_0x552812:_0x552812;}else _0x41df25=0x1;let _0x5d8b78=_0x457bd3[_0x5bea3e(0x1e4)]*_0x41df25;_0x1792b4+=_0x5d8b78,_0x457bd3['last']=formatResult(Number(_0x41df25),0x8),_0x457bd3[_0x5bea3e(0xa9)]=_0x5d8b78;}),currentCoins[_0x3ed044(0x164)](_0x3482db=>{const _0x1cbcd6=_0x3ed044;let _0x455bca=config[_0x1cbcd6(0x159)][_0x1cbcd6(0xf7)](_0x3f3c45=>_0x3f3c45[_0x1cbcd6(0x158)]==_0x3482db['coin']),_0x1b23d7=Number(_0x455bca[_0x1cbcd6(0xbd)]),_0x1e6b41=_0x3482db['value']/_0x1792b4*0x64,_0x167b59=_0x1b23d7*_0x1792b4/0x64/_0x3482db[_0x1cbcd6(0x22f)]-_0x3482db[_0x1cbcd6(0x1e4)];_0x3482db[_0x1cbcd6(0xbd)]=formatResult(_0x1e6b41,0x3),_0x3482db[_0x1cbcd6(0x21d)]=formatResult(_0x1b23d7,0x3),_0x3482db[_0x1cbcd6(0x186)]=formatResult(_0x167b59,0x8),_0x3482db[_0x1cbcd6(0x1ee)]='',_0x3482db[_0x1cbcd6(0xb7)]=![];if(_0x3482db[_0x1cbcd6(0x158)]!=config[_0x1cbcd6(0x208)]){if(_0x3482db[_0x1cbcd6(0xbd)]>_0x1b23d7)_0x3482db[_0x1cbcd6(0x1ee)]=_0x1cbcd6(0x1d4),_0x3482db[_0x1cbcd6(0xb7)]=checkMinimums(_0x3482db);else _0x3482db[_0x1cbcd6(0xbd)]<_0x1b23d7&&(_0x3482db[_0x1cbcd6(0x1ee)]=_0x1cbcd6(0x13e),_0x3482db['valid']=checkMinimums(_0x3482db));}_0x3482db[_0x1cbcd6(0x162)]=_0x3482db[_0x1cbcd6(0xbd)]/_0x3482db[_0x1cbcd6(0x21d)]-0x1;if(_0x3482db['orderstatus']==_0x1cbcd6(0x1fd)||_0x3482db[_0x1cbcd6(0x176)]==_0x1cbcd6(0x1a8))_0x3482db[_0x1cbcd6(0x176)]=_0x1cbcd6(0xcd);}),currentCoins['sort']((_0x42580b,_0x1c7859)=>_0x42580b['delta']<_0x1c7859[_0x3ed044(0x162)]?0x1:_0x1c7859[_0x3ed044(0x162)]<_0x42580b['delta']?-0x1:0x0);const _0xea4932=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0xea4932[_0x3ed044(0x1de)],'usd':_0xea4932[_0x3ed044(0x1a1)],'portfolio':JSON[_0x3ed044(0x18e)](currentCoins),'threshold':_0x4aeb19},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});if(_0x3717c7){if(config[_0x3ed044(0x27b)])headlessMode({'portfolio':currentCoins,'threshold':_0x4aeb19});else lockOrders==ORDERS[_0x3ed044(0x272)]&&!coolingDown&&notifyBalance({'portfolio':currentCoins,'threshold':_0x4aeb19});}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x9e328b=getNormalizedPerformance();getStartingBalances(_0x9e328b),emitPerformance(_0x9e328b);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}function getPnL(){const _0x444c20=_0x5bdcb0;let _0x1eb020=dbCoinResults[_0x444c20(0x19d)](_0x444c20(0xf4))['value'](),_0x483d64=0x0;return Object[_0x444c20(0x1e1)](_0x1eb020)[_0x444c20(0x164)](([_0x110794,_0xb3676e])=>{const _0x53a9f7=_0x444c20;_0x483d64+=_0xb3676e[_0x53a9f7(0x206)];}),_0x483d64;}async function storePerformance(){const _0x524c43=_0x5bdcb0;if(!lastBalances)return;let _0x487742=[],_0x2b1594;const _0x2abac4=getPnL();let _0x3065c8=JSON[_0x524c43(0x160)](lastBalances[_0x524c43(0x159)]);_0x3065c8[_0x524c43(0xc8)]((_0x57767b,_0x531ea7)=>_0x57767b[_0x524c43(0x158)]>_0x531ea7[_0x524c43(0x158)]?0x1:_0x531ea7['coin']>_0x57767b[_0x524c43(0x158)]?-0x1:0x0),_0x3065c8[_0x524c43(0x164)](_0x35d3c4=>{const _0x237b8e=_0x524c43;let _0x589748={'coin':_0x35d3c4[_0x237b8e(0x158)],'number':_0x35d3c4[_0x237b8e(0x1e4)],'price':_0x35d3c4['last']};_0x487742['push'](_0x589748);});const _0x22005b=await getFiat(),_0xa904a3=getTimeStamp()[_0x524c43(0x15c)]('\x20')[0x0],_0x4864dd=dbPerformance['get'](_0x524c43(0x119))[_0x524c43(0xf7)]({'date':_0xa904a3})['value']();_0x2b1594={'date':_0xa904a3,'eur':_0x22005b[_0x524c43(0x1de)],'usd':_0x22005b[_0x524c43(0x1a1)],'coins':_0x487742,'pnl':_0x2abac4},_0x4864dd?_0x2b1594[_0x524c43(0x15e)]!=config[_0x524c43(0x1cf)]&&dbPerformance[_0x524c43(0x19d)]('data')[_0x524c43(0xf7)]({'date':_0xa904a3})['assign'](_0x2b1594)[_0x524c43(0xc3)]():dbPerformance[_0x524c43(0x19d)](_0x524c43(0x119))[_0x524c43(0x1ef)](_0x2b1594)[_0x524c43(0xc3)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x46a2be=_0x5bdcb0;let _0x5ae237=[];if(dbPerformance['has'](_0x46a2be(0x119))[_0x46a2be(0xa9)]()){let _0x4a0745=dbPerformance['get']('data')[_0x46a2be(0x150)]()['filter'](_0x6e4d57=>{const _0x733dc8=_0x46a2be;if(_0x6e4d57[_0x733dc8(0xf4)][_0x733dc8(0xba)]==0x0)return![];else return!![];})['sortBy'](_0x46a2be(0x15e))[_0x46a2be(0xa9)](),_0x34a73c=[...config[_0x46a2be(0x145)]];_0x34a73c['sort']((_0x3ed7b1,_0x160975)=>_0x3ed7b1[_0x46a2be(0x15e)]>_0x160975[_0x46a2be(0x15e)]?-0x1:_0x160975[_0x46a2be(0x15e)]>_0x3ed7b1['date']?0x1:0x0);let _0x3dd36a=0x1,_0x3dd4b6=[],_0x18bf7b=0x0;_0x4a0745[_0x46a2be(0x13c)]()[_0x46a2be(0x1b6)]()['forEach']((_0x1c580b,_0x3a4eb9)=>{const _0x28b17b=_0x46a2be;if(_0x34a73c[_0x18bf7b]){if(_0x4a0745[_0x4a0745['length']-_0x3a4eb9]&&_0x34a73c[_0x18bf7b]['date']==_0x4a0745[_0x4a0745[_0x28b17b(0xba)]-_0x3a4eb9][_0x28b17b(0x15e)]){if(_0x3a4eb9<_0x4a0745[_0x28b17b(0xba)]){let _0xe8ee4f=0x0,_0x4669ab=0x0;_0x4a0745[_0x4a0745[_0x28b17b(0xba)]-_0x3a4eb9][_0x28b17b(0xf4)]['forEach'](_0x39f285=>{const _0x13e0de=_0x28b17b;_0x4669ab+=_0x39f285[_0x13e0de(0x1e4)]*_0x39f285[_0x13e0de(0x166)];}),_0x34a73c[_0x18bf7b][_0x28b17b(0x273)][_0x28b17b(0x164)](_0x34e749=>{const _0xe0fafa=_0x28b17b;_0xe8ee4f+=_0x34e749[_0xe0fafa(0x1e4)]*_0x34e749[_0xe0fafa(0x166)];}),_0x3dd36a*=_0xe8ee4f/(_0x4669ab-_0xe8ee4f)+0x1;}_0x18bf7b++;}}let _0x386105=0x0;_0x1c580b[_0x28b17b(0xf4)][_0x28b17b(0x164)](_0x41f924=>{_0x386105+=_0x41f924['number']*_0x41f924['price'];}),_0x3dd4b6[_0x4a0745[_0x28b17b(0xba)]-_0x3a4eb9-0x1]=_0x386105*(_0x3dd36a-0x1);});let _0x2fbf67=[];_0x34a73c=[...config[_0x46a2be(0x145)]]||[];let _0x2b5f4f=0x0;_0x18bf7b=0x0,_0x4a0745[_0x46a2be(0x164)]((_0x4ceb4a,_0x69cc76)=>{const _0x481d2a=_0x46a2be;if(_0x34a73c[_0x18bf7b]){const _0x5c6d2a=fns[_0x481d2a(0x160)](_0x34a73c[_0x18bf7b]['date'],_0x481d2a(0x23b),new Date()),_0x4c1b17=fns[_0x481d2a(0x160)](_0x4ceb4a[_0x481d2a(0x15e)],'yyyy/MM/dd',new Date());if(fns[_0x481d2a(0xd0)](_0x5c6d2a,_0x4c1b17)){let _0x4575ac=0x0;_0x34a73c[_0x18bf7b][_0x481d2a(0x273)][_0x481d2a(0x164)](_0x46873b=>{const _0xab977a=_0x481d2a;!_0x2fbf67[_0x46873b[_0xab977a(0x158)]]?_0x2fbf67[_0x46873b[_0xab977a(0x158)]]=_0x46873b[_0xab977a(0x1e4)]:(_0x4575ac=_0x2fbf67[_0x46873b[_0xab977a(0x158)]],_0x2fbf67[_0x46873b[_0xab977a(0x158)]]+=_0x46873b[_0xab977a(0x1e4)]);const _0x31658d=_0x4ceb4a[_0xab977a(0xf4)][_0xab977a(0xf7)](_0x1037d6=>_0x1037d6[_0xab977a(0x158)]==_0x46873b[_0xab977a(0x158)]);(!_0x31658d||_0x31658d[_0xab977a(0x1e4)]==0x0)&&(_0x2b5f4f+=(-_0x46873b['number']-_0x4575ac)*_0x46873b[_0xab977a(0x166)]);}),_0x18bf7b++;}}_0x4ceb4a[_0x481d2a(0xf4)][_0x481d2a(0x164)]((_0x3b484d,_0x3fd5ed)=>{const _0x24f1dc=_0x481d2a;_0x2fbf67[_0x3b484d['coin']]&&(_0x3b484d[_0x24f1dc(0x12c)]=_0x2fbf67[_0x3b484d[_0x24f1dc(0x158)]]);}),_0x5ae237[_0x481d2a(0x1ef)]({'date':_0x4ceb4a['date'],'eur':_0x4ceb4a[_0x481d2a(0x1de)],'usd':_0x4ceb4a['usd'],'offset':_0x3dd4b6[_0x69cc76],'netoffset':_0x2b5f4f,'coins':_0x4ceb4a[_0x481d2a(0xf4)],'pnl':_0x4ceb4a[_0x481d2a(0x239)]});});}return _0x5ae237;}function emitPerformance(_0x8f644c){const _0x346e73=_0x5bdcb0;_0x8f644c['length']!==0x0?(proxyEmit(_0x346e73(0x117),_0x8f644c),lastPerformanceEmitted=getDate()):proxyEmit(_0x346e73(0x117),[]);}function getPerf(_0xaf490c,_0x527335){const _0x2eb9f9=_0x5bdcb0;let _0x38e32a=0x0,_0x1527c2=0x0,_0x4a7afd=0x0;_0xaf490c['coins'][_0x2eb9f9(0x164)](_0xbf8346=>{const _0x333e7f=_0x2eb9f9;_0x38e32a+=_0xbf8346[_0x333e7f(0x1e4)]*_0xbf8346[_0x333e7f(0x166)];});_0x527335&&(_0x38e32a+=_0xaf490c['offset']);if(config[_0x2eb9f9(0x208)]===_0x2eb9f9(0xdf)||config[_0x2eb9f9(0x208)]===_0x2eb9f9(0xc5)||config[_0x2eb9f9(0x208)]==='PAXG')_0x1527c2=_0x38e32a*_0xaf490c[_0x2eb9f9(0x1de)],_0x4a7afd=_0x38e32a*_0xaf490c[_0x2eb9f9(0x1a1)];else{if(usdBasecoins['includes'](config[_0x2eb9f9(0x208)]))_0x1527c2=_0x38e32a*_0xaf490c['eur']/_0xaf490c['usd'],_0x4a7afd=_0x38e32a;else config['basecoin']==='EUR'&&(_0x1527c2=_0x38e32a,_0x4a7afd=_0x38e32a*_0xaf490c[_0x2eb9f9(0x1a1)]/_0xaf490c[_0x2eb9f9(0x1de)]);}return[_0x38e32a,_0x1527c2,_0x4a7afd];}function CurrencyFactor(_0x2b4084,_0xba8dc4,_0x45a317){const _0xa10672=_0x5bdcb0;let _0x2ca6dd;if(_0xba8dc4===_0xa10672(0xdf)||_0xba8dc4===_0xa10672(0xc5)||_0xba8dc4===_0xa10672(0x20b))_0x2ca6dd=_0x45a317===_0xa10672(0x1fc)?_0x2b4084[_0xa10672(0x1de)]:_0x2b4084[_0xa10672(0x1a1)];else{if(usdBasecoins['includes'](_0xba8dc4))_0x2ca6dd=_0x45a317==='EUR'?_0x2b4084[_0xa10672(0x1de)]/_0x2b4084[_0xa10672(0x1a1)]:0x1;else _0xba8dc4===_0xa10672(0x1fc)&&(_0x2ca6dd=_0x45a317==='EUR'?0x1:_0x2b4084[_0xa10672(0x1a1)]/_0x2b4084[_0xa10672(0x1de)]);}return _0x2ca6dd;}function getKPIs(_0x3f95d5,_0x5c102f=_0x5bdcb0(0x1fc)){const _0x466d5c=_0x5bdcb0,_0x1e1723=config[_0x466d5c(0x208)],_0x455e33=lastBalances,_0x2d9f61=currentCoins,_0x17137a=getNormalizedPerformance(),_0x8d2513=CurrencyFactor(_0x455e33,config[_0x466d5c(0x208)],_0x5c102f);let _0x287719=0x0;_0x2d9f61[_0x466d5c(0x164)](_0x52ccde=>{const _0x4daa29=_0x466d5c;_0x287719+=_0x52ccde[_0x4daa29(0x1e4)]*_0x52ccde['last'];});_0x3f95d5[_0x466d5c(0x10b)](_0x466d5c(0x275))&&(_0x287719*=_0x8d2513);let _0x5df3f1;if(_0x287719!==0x0){if(_0x3f95d5===_0x466d5c(0x208)||_0x3f95d5==='fiat'){if(_0x3f95d5===_0x466d5c(0x208))_0x5df3f1=(_0x287719/startingBalances[_0x466d5c(0x208)]-0x1)*0x64;else{if(_0x5c102f===_0x466d5c(0x1fc))_0x5df3f1=(_0x287719/startingBalances[_0x466d5c(0x1de)]-0x1)*0x64;else _0x5df3f1=(_0x287719/startingBalances[_0x466d5c(0x1a1)]-0x1)*0x64;}}if(_0x3f95d5[_0x466d5c(0x10b)](_0x466d5c(0xee))){let _0x2ba08e=0x0;if(startingBalances[_0x466d5c(0xf4)])_0x2d9f61[_0x466d5c(0x164)](_0x6a0a8c=>{const _0x544f7d=_0x466d5c;let _0x4be8d1=startingBalances[_0x544f7d(0xf4)][_0x544f7d(0xf7)](_0x24ec30=>_0x24ec30[_0x544f7d(0x158)]===_0x6a0a8c[_0x544f7d(0x158)]);if(_0x4be8d1&&_0x4be8d1[_0x544f7d(0x158)]&&_0x6a0a8c[_0x544f7d(0x1e4)]!==0x0)_0x2ba08e+=_0x4be8d1[_0x544f7d(0x1e4)]*_0x6a0a8c[_0x544f7d(0x22f)];});let _0x4929dd=0x0;if(_0x17137a['length']!==0x0){let _0x1122dc=_0x17137a[_0x17137a[_0x466d5c(0xba)]-0x1];_0x4929dd=_0x1122dc[_0x466d5c(0x180)];}_0x2ba08e-=_0x4929dd;let _0x5648c9;_0x3f95d5===_0x466d5c(0x130)&&(_0x5648c9=startingBalances[_0x466d5c(0x208)]),_0x3f95d5===_0x466d5c(0x192)&&(_0x5648c9=_0x5c102f===_0x466d5c(0x1fc)?startingBalances[_0x466d5c(0x1de)]:startingBalances['usd'],_0x2ba08e*=_0x8d2513),_0x5df3f1=(_0x287719-_0x2ba08e)/_0x5648c9*0x64,_0x287719=_0x287719-_0x2ba08e;}if(_0x3f95d5[_0x466d5c(0x10b)](_0x466d5c(0x239))){if(_0x17137a[_0x466d5c(0xba)]!==0x0&&_0x2d9f61['length']!==0x0){let _0x55834c,_0x411177=_0x17137a[_0x17137a['length']-0x1][_0x466d5c(0x239)];_0x3f95d5[_0x466d5c(0x10b)](_0x466d5c(0x275))?(_0x55834c=_0x5c102f===_0x466d5c(0x1fc)?startingBalances[_0x466d5c(0x1de)]:startingBalances[_0x466d5c(0x1a1)],_0x411177*=CurrencyFactor(_0x455e33,_0x1e1723,_0x5c102f)):_0x55834c=startingBalances[_0x466d5c(0x208)],_0x5df3f1=_0x411177/_0x55834c*0x64,_0x287719=_0x411177;}}if(_0x5df3f1){if(_0x5df3f1<0x64)_0x5df3f1=_0x5df3f1['toFixed'](0x2);else{if(_0x5df3f1<0x3e8)_0x5df3f1=_0x5df3f1[_0x466d5c(0x19e)](0x1);else _0x5df3f1=_0x5df3f1['toFixed'](0x0);}}else _0x5df3f1=Number('0')[_0x466d5c(0x19e)](0x2);if(_0x287719){if(Math[_0x466d5c(0x23f)](_0x287719)<0.000001)_0x287719=_0x287719[_0x466d5c(0x19e)](0x2);else{if(Math['abs'](_0x287719)<0.1)_0x287719=_0x287719[_0x466d5c(0x19e)](0x6);else{if(Math[_0x466d5c(0x23f)](_0x287719)<0x1)_0x287719=_0x287719[_0x466d5c(0x19e)](0x5);else{if(Math[_0x466d5c(0x23f)](_0x287719)<0xa)_0x287719=_0x287719[_0x466d5c(0x19e)](0x4);else{if(Math['abs'](_0x287719)<0x64)_0x287719=_0x287719[_0x466d5c(0x19e)](0x3);else{if(Math['abs'](_0x287719)<0x3e8)_0x287719=_0x287719[_0x466d5c(0x19e)](0x2);else _0x287719=_0x287719[_0x466d5c(0x19e)](0x2);}}}}}}else _0x287719=Number('0')['toFixed'](0x2);}else _0x5df3f1=Number('0')[_0x466d5c(0x19e)](0x2);if(_0x5df3f1>=0x0)_0x5df3f1='+'+_0x5df3f1;return{'value':_0x287719,'change':_0x5df3f1};}async function getStartingBalances(_0x46cb1e,_0x5f2dfb=!![]){const _0x3e84b2=_0x5bdcb0;if(_0x46cb1e['length']!==0x0){const [_0xf732c8,_0xba6d1a,_0xc936a7]=getPerf(_0x46cb1e[0x0],!![]);let _0xd907d9=[];config[_0x3e84b2(0x159)][_0x3e84b2(0x164)](_0x7e7001=>{const _0x38d45f=_0x3e84b2;let _0x4dde24=0x0,_0x4bd6a8;config[_0x38d45f(0x145)][_0x38d45f(0x164)](_0x565294=>{const _0x35b78b=_0x38d45f;let _0x3e6d6f=_0x565294[_0x35b78b(0x273)]['find'](_0x2aaff9=>_0x2aaff9['coin']==_0x7e7001[_0x35b78b(0x158)]);if(_0x3e6d6f){_0x4dde24+=_0x3e6d6f[_0x35b78b(0x1e4)];if(!_0x4bd6a8)_0x4bd6a8=_0x3e6d6f[_0x35b78b(0x166)];}}),_0xd907d9[_0x38d45f(0x1ef)]({'coin':_0x7e7001[_0x38d45f(0x158)],'number':_0x4dde24,'initialprice':_0x4bd6a8});});const _0x11125b={'basecoin':_0xf732c8,'eur':_0xba6d1a,'usd':_0xc936a7,'coins':_0xd907d9};if(_0x5f2dfb)proxyEmit(_0x3e84b2(0x1ff),_0x11125b);startingBalances=_0x11125b;}}function headlessMode(_0x526461){const _0x256a13=_0x5bdcb0;let _0x56af60=_0x526461[_0x256a13(0x159)],_0x159072=_0x526461['threshold'],_0x4d4e7e=[];for(let _0x4a9c15 of _0x56af60){if(_0x4a9c15['coin']!=config[_0x256a13(0x208)]){if(_0x4a9c15[_0x256a13(0x162)]>=_0x159072/0x64){if(_0x4a9c15[_0x256a13(0xb7)])_0x4d4e7e['push'](_0x4a9c15);}else{if(_0x4a9c15[_0x256a13(0x162)]<=-_0x159072/0x64){if(_0x4a9c15[_0x256a13(0xb7)])_0x4d4e7e[_0x256a13(0x1ef)](_0x4a9c15);}}}}_0x4d4e7e['length']>0x0&&placeOrder(_0x4d4e7e);}function notifyBalance(_0x176987){const _0x386fbf=_0x5bdcb0;let _0x588e9a=_0x176987['portfolio'],_0xfe9950=_0x176987['threshold'],_0x204835=[];for(let _0x3d5adf of _0x588e9a){if(_0x3d5adf[_0x386fbf(0x158)]!=config[_0x386fbf(0x208)]){if(_0x3d5adf[_0x386fbf(0x162)]>=_0xfe9950/0x64){if(_0x3d5adf[_0x386fbf(0xb7)])_0x204835[_0x386fbf(0x1ef)](_0x3d5adf);}else{if(_0x3d5adf['delta']<=-_0xfe9950/0x64){if(_0x3d5adf[_0x386fbf(0xb7)])_0x204835[_0x386fbf(0x1ef)](_0x3d5adf);}}}}if(_0x204835[_0x386fbf(0xba)]>0x0){let _0x4c6536=_0x204835[_0x386fbf(0xf3)](_0x238435=>_0x238435[_0x386fbf(0x158)]);_0x4c6536['sort']();let _0x3a2674=_0x4c6536[_0x386fbf(0x1a5)](',\x20');if(!lastCoinsToBalance)logHistory('warning','Manual\x20balancing\x20required');lastCoinsToBalance=_0x3a2674;}}function symbolToCoin(_0x883024){const _0x5d2723=_0x5bdcb0;let _0x2d170f;if(_0x883024[_0x5d2723(0x10b)]('/'+config[_0x5d2723(0x208)]))_0x2d170f=_0x883024[_0x5d2723(0xff)]('/'+config[_0x5d2723(0x208)],'');if(_0x883024[_0x5d2723(0x10b)](config['basecoin']+'/'))_0x2d170f=_0x883024[_0x5d2723(0xff)](config[_0x5d2723(0x208)]+'/','');return _0x2d170f;}function setLockOrders(_0x2325bf){const _0x3c67dd=_0x5bdcb0;lockOrders=_0x2325bf,logger[_0x3c67dd(0x26f)](_0x3c67dd(0x1b8)+Object[_0x3c67dd(0xdd)](ORDERS)[lockOrders]);}async function unlockOrders(_0x51179d=![]){const _0x34de35=_0x5bdcb0;if(allOrdersPlaced&&lockOrders==ORDERS['LOCKED']){setLockOrders(ORDERS[_0x34de35(0x1c2)]);if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);if(_0x51179d){const _0x2f3cae=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x2f3cae,setBlockTransactionDetection(![]);}validateOrdersState=_0x34de35(0x12c),persistOpenOrders([]),setLockOrders(ORDERS[_0x34de35(0x272)]);}}async function validateOrders(_0x54092d){const _0x158af3=_0x5bdcb0;if(_0x54092d)validateOrdersState=_0x54092d;logger['debug'](_0x158af3(0x228)+validateOrdersState+_0x158af3(0xb5)+Object['keys'](ORDERS)[lockOrders]);let _0x27332f=[],_0x351785=config[_0x158af3(0x125)]==_0x158af3(0x100)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x158af3(0xce)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS['LOCKED'])return;logger[_0x158af3(0x26f)]('2\x20-\x20Validate\x20orders:\x20'+validateOrdersState);for(let _0x1f127a=lastOrders[_0x158af3(0xba)]-0x1;_0x1f127a>=0x0;_0x1f127a--){let _0x17119a=lastOrders[_0x1f127a],_0x4bf10a=![];_0x17119a['filled']>0x0&&(_0x4bf10a=!![]),_0x27332f[_0x158af3(0x1ef)](_0x4bf10a),_0x4bf10a&&config[_0x158af3(0x125)]!=_0x158af3(0x100)&&logHistory(_0x158af3(0x190),_0x158af3(0x11b)+_0x17119a[_0x158af3(0x227)]+'\x20'+_0x17119a['side']+'\x20#'+formatResult(_0x17119a['filled'],0x8)+'\x20@'+formatResult(_0x17119a[_0x158af3(0x166)],0x8)),_0x4bf10a&&lastOrders[_0x158af3(0x149)](_0x1f127a,0x1);}persistOpenOrders(lastOrders);const _0x4fa072=coolingDown?_0x158af3(0x14b):_0x158af3(0x171);if(validateOrdersState=='initial'){validateOrdersState='ongoing';if(_0x27332f[_0x158af3(0x10b)](![])){}else await unlockOrders();}else{if(validateOrdersState==_0x158af3(0x205)){if(_0x27332f[_0x158af3(0x10b)](![])){}else await unlockOrders();}else{if(validateOrdersState==_0x158af3(0x26c)){let _0xc6b110=!![];if(_0x27332f[_0x158af3(0x10b)](![])){if(config[_0x158af3(0x125)]==_0x158af3(0x100))logHistory(_0x158af3(0x24b),_0x158af3(0x184)+Math['round'](_0x351785*validateOrderInterval/0xea60)+_0x158af3(0xbe)+_0x4fa072),await unlockOrders(!![]);else{_0xc6b110=await cancelOrders();if(_0xc6b110)logHistory(_0x158af3(0x24b),_0x158af3(0x1d3)+Math['round'](_0x351785*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x4fa072),await unlockOrders(!![]);else{validateOrdersState=_0x158af3(0x205),logHistory(_0x158af3(0xaa),_0x158af3(0x22d)+Math[_0x158af3(0x1c7)](_0x351785*validateOrderInterval/0xea60)+_0x158af3(0xbe)+_0x4fa072),logHistory('error',_0x158af3(0x203));const _0x569669=config[_0x158af3(0x125)]==_0x158af3(0x100)?validateOrderTimeout*0x3c*0x3e8:config[_0x158af3(0xce)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x569669);}}}else await unlockOrders(!![]);}else{if(validateOrdersState==_0x158af3(0xae)){if(config[_0x158af3(0x125)]!=_0x158af3(0x100))logHistory(_0x158af3(0x24b),_0x158af3(0x1bc)+_0x4fa072);await unlockOrders(!![]);}}}}}async function cancelOrders(){const _0x9fad4d=_0x5bdcb0;let _0x5a4e47=!![],_0x151ced;for(const _0x4a67e5 of lastOrders){let _0x4277ab=![],_0x958a22=0x0;while(!_0x4277ab&&_0x958a22<maxRetries){try{const _0x56ae61=await exchange['cancelOrder'](_0x4a67e5[_0x9fad4d(0x222)],_0x4a67e5[_0x9fad4d(0x227)]);_0x4277ab=!![];}catch(_0x49c3c1){_0x49c3c1[_0x9fad4d(0x174)]()[_0x9fad4d(0x10b)]('OrderNotFound')||_0x49c3c1[_0x9fad4d(0x174)]()[_0x9fad4d(0x10b)](_0x9fad4d(0x16b))?_0x4277ab=!![]:(_0x151ced=_0x49c3c1,_0x4277ab=![]);}!_0x4277ab&&(_0x958a22++,await sleep(retryInterval));}_0x5a4e47=_0x5a4e47&&_0x4277ab;}return!_0x5a4e47&&await handleError(_0x151ced,'cancelOrders()'),_0x5a4e47;}async function initCoinResults(_0x2eba63){const _0xc65b18=_0x5bdcb0;_0x2eba63?logger[_0xc65b18(0x26f)](_0xc65b18(0x21b)+_0x2eba63):logger[_0xc65b18(0x26f)](_0xc65b18(0x19f)),config[_0xc65b18(0x159)][_0xc65b18(0x164)](_0x200fc0=>{const _0x384b0b=_0xc65b18;if(!_0x200fc0[_0x384b0b(0x189)]&&_0x200fc0[_0x384b0b(0x158)]!=config[_0x384b0b(0x208)]){const _0x4b0e7e=currentCoins[_0x384b0b(0xf7)](_0x5368ee=>_0x5368ee[_0x384b0b(0x158)]==_0x200fc0['coin']),_0xb54dcd=gTicker[noslash(_0x200fc0[_0x384b0b(0x227)])];let _0x249939=_0x4b0e7e?_0x4b0e7e[_0x384b0b(0x1e4)]:null,_0x4185b5=_0x200fc0['reverse']?0x1/_0xb54dcd:_0xb54dcd,_0x8f26d0;config[_0x384b0b(0x145)]['forEach'](_0x322820=>{const _0x442d3d=_0x384b0b;!_0x8f26d0&&(_0x8f26d0=_0x322820[_0x442d3d(0x273)]['find'](_0x1fae55=>_0x1fae55['coin']==_0x200fc0[_0x442d3d(0x158)]),_0x8f26d0&&(_0x249939=_0x8f26d0[_0x442d3d(0x1e4)],_0x4185b5=_0x8f26d0[_0x442d3d(0x166)]));});let _0x9dc0e0=dbCoinResults['get'](_0x384b0b(0xf4))['find']({'coin':_0x200fc0['coin']})[_0x384b0b(0xa9)]();if(!_0x9dc0e0){const _0x50595a={'coin':_0x200fc0[_0x384b0b(0x158)],'number':_0x249939,'breakeven':_0x4185b5,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x384b0b(0x19d)](_0x384b0b(0xf4))[_0x384b0b(0x1ef)](_0x50595a)[_0x384b0b(0xc3)]();}else{if(_0x2eba63&&_0x200fc0['coin']==_0x2eba63){const _0x1216a8={'coin':_0x200fc0[_0x384b0b(0x158)],'number':_0x249939,'breakeven':_0x4185b5,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x384b0b(0x19d)](_0x384b0b(0xf4))['find']({'coin':_0x200fc0[_0x384b0b(0x158)]})[_0x384b0b(0x1c0)](_0x1216a8)[_0x384b0b(0xc3)]();}}}});}async function placeOrder(_0x5f4cdd){const _0x43cba4=_0x5bdcb0,_0xd7a8ff=config['ordertype']==_0x43cba4(0x100)?_0x43cba4(0x100):'limit';if(lockOrders==ORDERS[_0x43cba4(0x272)]&&!coolingDown){setLockOrders(ORDERS['LOCKED']);while(transactionDetectionOngoing){await sleep(0x64);}logger[_0x43cba4(0x26f)](_0x43cba4(0x18b)+_0x5f4cdd[_0x43cba4(0xf3)](_0x212de4=>_0x212de4[_0x43cba4(0x158)])[_0x43cba4(0x1a5)](',\x20')),lastCoinsToBalance='',allOrdersPlaced=![],validateOrdersState='initial';let _0x1b477d=![];lastOrders=[];const _0x72e228=config[_0x43cba4(0x23a)];for(const _0x53be1f of _0x5f4cdd){let _0x21fff6,_0x1940d6,_0x1aee4f,_0x43f40f,_0x2857da,_0x16fda0=_0x53be1f['symbol'];logger[_0x43cba4(0x26f)](_0x43cba4(0xe9)+_0x53be1f[_0x43cba4(0x158)]+'\x20'+_0x53be1f[_0x43cba4(0x1e4)]+'\x20'+_0x53be1f[_0x43cba4(0x22f)]+'\x20'+_0x53be1f[_0x43cba4(0xbd)]+'%\x20'+_0x53be1f[_0x43cba4(0x21d)]+'%\x20'+(0x64*_0x53be1f['delta'])[_0x43cba4(0x19e)](0x2)+_0x43cba4(0x1d6)+_0x72e228[_0x43cba4(0x19e)](0x2)+'%)');const _0x2a862a=currentCoins[_0x43cba4(0xf7)](_0x17ceca=>_0x17ceca['coin']==_0x53be1f['coin']);_0x2a862a&&(_0x2a862a['prevnumber']=_0x53be1f['number']);try{const _0x2f131c=await exchange[_0x43cba4(0xf2)](_0x16fda0);_0x21fff6=_0x53be1f[_0x43cba4(0x1b6)]?0x1/_0x53be1f[_0x43cba4(0x22f)]:_0x53be1f[_0x43cba4(0x22f)],_0x1940d6=_0x2f131c['bid'],_0x1aee4f=_0x2f131c[_0x43cba4(0x249)];_0x53be1f[_0x43cba4(0x1b6)]?(_0x43f40f=_0x53be1f['side']=='buy'?_0x43cba4(0x1d4):_0x43cba4(0x13e),_0x2857da=Math['abs'](_0x53be1f['trade'])/_0x21fff6):(_0x43f40f=_0x53be1f['side'],_0x2857da=Math[_0x43cba4(0x23f)](_0x53be1f[_0x43cba4(0x186)]));_0xd7a8ff==_0x43cba4(0x138)&&(config[_0x43cba4(0x125)]=='limit-high'&&(_0x21fff6=_0x43f40f==_0x43cba4(0x13e)?_0x1940d6:_0x1aee4f),config[_0x43cba4(0x125)]==_0x43cba4(0x152)&&(_0x21fff6=_0x43f40f==_0x43cba4(0x13e)?_0x1aee4f:_0x1940d6));_0x2857da=formatResult(_0x2857da,0x8),_0x21fff6=formatResult(_0x21fff6,0x8);const _0x4372de=_0x43f40f==_0x43cba4(0x1d4)?config['emojisell']?String[_0x43cba4(0x128)]('0x'+config[_0x43cba4(0x135)])+'\x20':'':config['emojibuy']?String['fromCodePoint']('0x'+config[_0x43cba4(0x13a)])+'\x20':'',_0x2907f9=_0xd7a8ff==_0x43cba4(0x100)?_0x43cba4(0x103):config[_0x43cba4(0x125)]==_0x43cba4(0x21f)?'Limit\x20(high-margin)':_0x43cba4(0xdc),_0x22286b=(Math[_0x43cba4(0x217)](Math[_0x43cba4(0x1af)]()*0x35a4e900)+0x5f5e100)[_0x43cba4(0x174)]();lastOrders[_0x43cba4(0x1ef)]({'customId':_0x22286b,'symbol':_0x16fda0,'coin':_0x53be1f[_0x43cba4(0x158)],'amount':_0x2857da,'price':_0x21fff6,'side':_0x43f40f,'reverse':_0x53be1f[_0x43cba4(0x1b6)],'filled':0x0});let _0x699d46;_0xd7a8ff==_0x43cba4(0x100)?_0x43f40f==_0x43cba4(0x13e)&&['Bybit','Bitget',_0x43cba4(0x143),_0x43cba4(0xe0),_0x43cba4(0xd5)][_0x43cba4(0x10b)](config[_0x43cba4(0x1d8)])?_0x699d46=await exchange[_0x43cba4(0xa8)](_0x16fda0,_0xd7a8ff,_0x43f40f,_0x2857da,_0x21fff6):_0x699d46=await exchange[_0x43cba4(0xa8)](_0x16fda0,_0xd7a8ff,_0x43f40f,_0x2857da,undefined):_0x699d46=await exchange['createOrder'](_0x16fda0,_0xd7a8ff,_0x43f40f,_0x2857da,_0x21fff6);const _0x37121b=lastOrders[_0x43cba4(0xba)]-0x1;if(_0x37121b>=0x0&&lastOrders[_0x37121b]['customId']==_0x22286b){lastOrders[_0x37121b]['orderId']=_0x699d46['id'];if(_0x699d46[_0x43cba4(0xb8)])lastOrders[_0x37121b][_0x43cba4(0xb8)]=_0x699d46[_0x43cba4(0xb8)];if(_0x699d46[_0x43cba4(0x166)])lastOrders[_0x37121b]['price']=_0x699d46[_0x43cba4(0x166)];lastOrders[_0x37121b]['fee']=_0x699d46['fee'];}if(_0x699d46['amount'])_0x2857da=_0x699d46[_0x43cba4(0xb8)];if(_0x699d46['price'])_0x21fff6=_0x699d46[_0x43cba4(0x166)];if(_0xd7a8ff==_0x43cba4(0x100))logHistory(_0x43cba4(0x190),''+_0x4372de+_0x2907f9+'\x20order:\x20'+_0x16fda0+'\x20'+_0x43f40f+'\x20#'+formatResult(_0x2857da,0x8)+'\x20@'+formatResult(_0x21fff6,0x8));else logHistory('order',''+_0x4372de+_0x2907f9+_0x43cba4(0x1bd)+_0x16fda0+'\x20'+_0x43f40f+'\x20#'+formatResult(_0x2857da,0x8)+'\x20@'+formatResult(_0x21fff6,0x8));logger[_0x43cba4(0x26f)](_0x43cba4(0x230)+_0x699d46['id']+_0x43cba4(0x1c8)+_0x22286b);if(config[_0x43cba4(0x1f5)]!=0x0){let _0x178867=null;if(cooldownTracker[_0x43cba4(0xba)]==config['cooldown']-0x1)_0x178867=cooldownTracker[_0x43cba4(0x131)]();const _0x57ddb4=getTimeStamp();cooldownTracker[_0x43cba4(0x1ef)](_0x57ddb4);if(_0x178867){const _0x3b3804=fns['differenceInSeconds'](new Date(_0x57ddb4),new Date(_0x178867));if(_0x3b3804<cooldownInterval){logHistory(_0x43cba4(0xaa),_0x43cba4(0x196)+config[_0x43cba4(0x1f5)]+_0x43cba4(0x1b1)+cooldownInterval/0x3c+'\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20'+cooldownPeriod/(0xe10*0x3e8)+_0x43cba4(0x17b)),coolingDown=!![];break;}}}}catch(_0x20ea7a){if(_0x20ea7a[_0x43cba4(0x174)]()['includes'](_0x43cba4(0x115)))lastOrders=lastOrders[_0x43cba4(0x191)](_0x542dc0=>_0x542dc0['symbol']!=_0x16fda0),logHistory(_0x43cba4(0xaa),'Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x16fda0),_0x1b477d=!![];else{if(_0x20ea7a[_0x43cba4(0x174)]()[_0x43cba4(0x10b)](_0x43cba4(0xab)))lastOrders=lastOrders['filter'](_0x5264b0=>_0x5264b0[_0x43cba4(0x227)]!=_0x16fda0),logHistory(_0x43cba4(0xaa),_0x43cba4(0x124)+_0x16fda0),_0x1b477d=!![];else{if(_0x20ea7a[_0x43cba4(0x174)]()['includes']('InvalidOrder'))lastOrders=lastOrders[_0x43cba4(0x191)](_0x58a490=>_0x58a490[_0x43cba4(0x227)]!=_0x16fda0),logHistory(_0x43cba4(0xaa),_0x43cba4(0x27d)+_0x16fda0),logger[_0x43cba4(0x26f)](_0x20ea7a),_0x1b477d=!![];else _0x20ea7a['toString']()['includes']('must\x20be\x20greater\x20than\x20minimum\x20amount')?(lastOrders=lastOrders[_0x43cba4(0x191)](_0x57e1af=>_0x57e1af[_0x43cba4(0x227)]!=_0x16fda0),logHistory(_0x43cba4(0xaa),_0x43cba4(0xb4)+_0x16fda0),_0x1b477d=!![]):(lastOrders=lastOrders[_0x43cba4(0x191)](_0x1eacf5=>_0x1eacf5[_0x43cba4(0x227)]!=_0x16fda0),await handleError(_0x20ea7a,'placeOrder()',_0x16fda0));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders['length']>0x0){const _0x3d969c=config[_0x43cba4(0x125)]=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0x43cba4(0xce)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0xcdb605=_0x43cba4;validateOrders(_0xcdb605(0x26c));},_0x3d969c);}else unlockOrders();_0x1b477d&&config[_0x43cba4(0x27b)]&&(logHistory(_0x43cba4(0xaa),_0x43cba4(0x209)+pauseBotMsg),await pauseBot(pauseBotInterval)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x43cba4(0x24b),_0x43cba4(0x250)));}else{if(coolingDown)!config[_0x43cba4(0x27b)]&&logHistory(_0x43cba4(0xaa),'Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode');else lockOrders!=ORDERS[_0x43cba4(0x272)]&&(!config['headless']&&(config[_0x43cba4(0x125)]==_0x43cba4(0x100)?logHistory(_0x43cba4(0xaa),_0x43cba4(0x27a)):logHistory(_0x43cba4(0xaa),_0x43cba4(0x147))));}}function persistOpenOrders(_0x41c2a0){const _0x23e787=_0x5bdcb0,_0x2490dd={...config,'openOrders':_0x41c2a0};let _0x1f6967=dbConfig[_0x23e787(0x19d)](_0x23e787(0x106))[_0x23e787(0xf7)]({'botID':botID})[_0x23e787(0xa9)]();_0x1f6967&&dbConfig['get'](_0x23e787(0x106))[_0x23e787(0xf7)]({'botID':botID})[_0x23e787(0x1c0)](_0x2490dd)[_0x23e787(0xc3)]();}function restoreOrders(){const _0x222ad7=_0x5bdcb0;let _0x533e3c;config['openOrders']&&allOpenOrders[_0x222ad7(0x164)](_0x4f8d72=>{const _0x37a037=_0x222ad7,_0x12de92=config[_0x37a037(0x127)][_0x37a037(0xf7)](_0x4e296f=>_0x4e296f[_0x37a037(0x222)]==_0x4f8d72['id']);_0x12de92&&(lastOrders[_0x37a037(0x1ef)](_0x12de92),_0x533e3c=_0x4f8d72[_0x37a037(0xfb)]);});if(lastOrders[_0x222ad7(0xba)]>0x0){setLockOrders(ORDERS['LOCKED']),validateOrdersState=_0x222ad7(0x205),allOrdersPlaced=!![];const _0x11815d=new Date()['getTime'](),_0x55eceb=config['ordertype']=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0x222ad7(0xce)]*0x3c*0x3e8;if(_0x533e3c+_0x55eceb>_0x11815d){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x2b76d9=_0x222ad7;validateOrders(_0x2b76d9(0x26c));},_0x533e3c+_0x55eceb-_0x11815d);}else validateOrders(_0x222ad7(0x26c));}}async function sendMetricsTelegram(){const _0x11acc1=_0x5bdcb0;if(!coinsLoaded){process['send']({'telegrammsg':_0x11acc1(0x232)},_0x1d3a14=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x4dd4b3='';if(config['showname'])_0x4dd4b3=_0x11acc1(0x252)+config[_0x11acc1(0x12f)]+_0x11acc1(0x20f);else _0x4dd4b3=_0x11acc1(0x168)+botID+_0x11acc1(0x20f);const _0x5088d2=config[_0x11acc1(0x208)],_0x13f725=config['fiat'],_0x2b63ea=getKPIs('basecoin'),_0x573ac8=getKPIs(_0x11acc1(0x275),_0x13f725),_0x35ec73=getKPIs(_0x11acc1(0x130)),_0x23a2df=getKPIs(_0x11acc1(0x192),_0x13f725),_0x27a9e4=getKPIs(_0x11acc1(0x24d)),_0x5b35c6=getKPIs(_0x11acc1(0x21e),_0x13f725);_0x5088d2[_0x11acc1(0x10b)](_0x13f725)?(_0x4dd4b3+=_0x11acc1(0x1e9),_0x4dd4b3+=_0x11acc1(0x118)+_0x5088d2+':\x20'+_0x2b63ea[_0x11acc1(0xa9)]+'\x20('+_0x2b63ea[_0x11acc1(0x170)]+_0x11acc1(0x116),_0x4dd4b3+=_0x11acc1(0x123)+_0x5088d2+':\x20'+_0x35ec73[_0x11acc1(0xa9)]+'\x20('+_0x35ec73[_0x11acc1(0x170)]+_0x11acc1(0x116),_0x4dd4b3+=_0x11acc1(0x236)+_0x5088d2+':\x20'+_0x27a9e4['value']+'\x20('+_0x27a9e4[_0x11acc1(0x170)]+_0x11acc1(0x116),_0x4dd4b3+=_0x11acc1(0xd6)):(_0x4dd4b3+='<pre>',_0x4dd4b3+=_0x11acc1(0x118)+_0x5088d2+':\x20'+_0x2b63ea[_0x11acc1(0xa9)]+'\x20('+_0x2b63ea['change']+_0x11acc1(0x116),_0x4dd4b3+=_0x11acc1(0x118)+_0x13f725+':\x20'+_0x573ac8[_0x11acc1(0xa9)]+'\x20('+_0x573ac8['change']+_0x11acc1(0x116),_0x4dd4b3+=_0x11acc1(0x123)+_0x5088d2+':\x20'+_0x35ec73[_0x11acc1(0xa9)]+'\x20('+_0x35ec73[_0x11acc1(0x170)]+_0x11acc1(0x116),_0x4dd4b3+=_0x11acc1(0x123)+_0x13f725+':\x20'+_0x23a2df[_0x11acc1(0xa9)]+'\x20('+_0x23a2df[_0x11acc1(0x170)]+_0x11acc1(0x116),_0x4dd4b3+=_0x11acc1(0x236)+_0x5088d2+':\x20'+_0x27a9e4[_0x11acc1(0xa9)]+'\x20('+_0x27a9e4[_0x11acc1(0x170)]+_0x11acc1(0x116),_0x4dd4b3+='PnL\x20'+_0x13f725+':\x20'+_0x5b35c6[_0x11acc1(0xa9)]+'\x20('+_0x5b35c6[_0x11acc1(0x170)]+_0x11acc1(0x116),_0x4dd4b3+='</pre>'),process[_0x11acc1(0x10e)]({'telegrammsg':_0x4dd4b3},_0x4cd768=>{});}async function sendPortfolioTelegram(){const _0x5f5bdd=_0x5bdcb0;if(!coinsLoaded||!currentCoins[0x0][_0x5f5bdd(0xbd)]){process[_0x5f5bdd(0x10e)]({'telegrammsg':_0x5f5bdd(0x232)},_0x4d329e=>{});return;}let _0x449166='';if(config['showname'])_0x449166=_0x5f5bdd(0x252)+config[_0x5f5bdd(0x12f)]+_0x5f5bdd(0x18c);else _0x449166='<b>Bot\x20'+botID+_0x5f5bdd(0x18c);_0x449166+='<pre>',_0x449166+=_0x5f5bdd(0x1b0),_0x449166+=_0x5f5bdd(0x122),_0x449166+=_0x5f5bdd(0x1b0),currentCoins[_0x5f5bdd(0x164)](_0x3952cf=>{const _0x20b032=_0x5f5bdd;_0x449166+=_0x3952cf[_0x20b032(0x158)][_0x20b032(0xd8)](0x7)+'|\x20'+formatPad(_0x3952cf[_0x20b032(0xbd)],0x2,0x6)+'|\x20'+formatPad(_0x3952cf['target'],0x2,0x6)+'|\x20'+formatPad(_0x3952cf[_0x20b032(0x162)]*0x64,0x2,0x6)+'\x0a';}),_0x449166+=_0x5f5bdd(0xd6),process[_0x5f5bdd(0x10e)]({'telegrammsg':_0x449166},_0x544359=>{});}function formatPad(_0xcce087,_0x3e8e33,_0x1916bd){const _0x2a6afd=formatResultString(_0xcce087,_0x3e8e33);return _0x2a6afd?_0x2a6afd['padStart'](_0x1916bd):''['padStart'](_0x1916bd);}function logHistory(_0x70a0ee,_0x5aba13,_0x1f2cad=''){const _0x1d3cff=_0x5bdcb0;logger['full'](''+_0x5aba13);let _0x2575e0={'time':getTimeStamp(),'type':_0x70a0ee,'event':_0x5aba13};dbLogs[_0x1d3cff(0x19d)]('logs')[_0x1d3cff(0x1ef)](_0x2575e0)['write']();if(_0x1f2cad=='')_0x1f2cad=_0x5aba13;proxyEmit(_0x1d3cff(0x261),{'log':_0x2575e0,'summary':_0x1f2cad}),process[_0x1d3cff(0x10e)]({'telegram':{..._0x2575e0,'botname':config[_0x1d3cff(0x12f)],'showname':config['showname']}},_0x5ef0bb=>{});}function emitHistory(_0x3d20d1={}){const _0x573281=_0x5bdcb0;Object[_0x573281(0xdd)](_0x3d20d1)[_0x573281(0xba)]==0x0&&(_0x3d20d1={'type':['order',_0x573281(0x261)],'event':'','page':0x1});if(_0x3d20d1[_0x573281(0x157)]['includes'](_0x573281(0x261)))_0x3d20d1['type']['splice'](_0x3d20d1[_0x573281(0x157)][_0x573281(0x264)](_0x573281(0x261)),0x1,'error',_0x573281(0x140),_0x573281(0x24b));if(dbLogs[_0x573281(0x233)]('logs')[_0x573281(0xa9)]()){let _0x24e59d=dbLogs['get'](_0x573281(0xb0))[_0x573281(0x191)](_0x97c0e5=>{const _0xf3482b=_0x573281;if(_0x3d20d1['type'][_0xf3482b(0xba)]==0x0)return![];else return _0x3d20d1['type']['includes'](_0x97c0e5[_0xf3482b(0x157)]);})[_0x573281(0x191)](_0x5cb8b6=>{const _0x566234=_0x573281;if(_0x3d20d1['event']=='')return!![];else return _0x5cb8b6[_0x566234(0x261)][_0x566234(0x26a)]()[_0x566234(0x10b)](_0x3d20d1['event']['toLowerCase']());})[_0x573281(0x1b4)](_0x573281(0x1fb)),_0x22d794=_0x24e59d[_0x573281(0xa9)]()[_0x573281(0xba)];_0x24e59d=_0x24e59d['reverse']()['slice']((_0x3d20d1[_0x573281(0x18d)]-0x1)*logPageSize,_0x3d20d1[_0x573281(0x18d)]*logPageSize-0x1)[_0x573281(0x1b6)]()['value'](),proxyEmit(_0x573281(0xfc),{'logs':_0x24e59d,'total':_0x22d794});}else proxyEmit('event-history',{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x488f76){const _0x3e644e=_0x5bdcb0;if(dbLogs[_0x3e644e(0x233)]('logs')[_0x3e644e(0xa9)]()){const _0x237d37=dbLogs[_0x3e644e(0x19d)]('logs')[_0x3e644e(0x1b4)](_0x3e644e(0x1fb))['filter'](_0x3fe85c=>{const _0x1b2873=_0x3e644e;return _0x3fe85c[_0x1b2873(0x157)]==_0x1b2873(0x190);})[_0x3e644e(0xa9)]();dbLogs['get'](_0x3e644e(0xb0))[_0x3e644e(0x107)]()[_0x3e644e(0xc3)](),dbLogs[_0x3e644e(0x19d)](_0x3e644e(0xb0))[_0x3e644e(0x1c0)](_0x237d37)[_0x3e644e(0xc3)](),emitHistory(_0x488f76);}}async function pauseBot(_0x17f4b8=pauseBotIntervalShort,_0x14ba8e,_0xba6217,_0x3947cd=![]){const _0x7e685c=_0x5bdcb0,_0x3532aa=new Date()[_0x7e685c(0xd1)]();if(!lastErrorShown||_0x3532aa-lastErrorShown>=_0x17f4b8){lastErrorShown=_0x3532aa;if(!lastBotPause)lastBotPause=_0x3532aa,consecutivePauses=0x1;else{if(_0x3532aa-lastBotPause-_0x17f4b8<0x5a*0x3e8){consecutivePauses++;if(consecutivePauses>maxPauseRetries){if(_0x3947cd){logHistory(_0x7e685c(0xaa),_0x14ba8e+_0x7e685c(0x235)),await killBot();return;}else logHistory('error',_0x14ba8e+pauseBotMsg),_0x17f4b8=pauseBotInterval;}}else consecutivePauses=0x1;lastBotPause=_0x3532aa;}_0xba6217?logger['debug']('('+consecutivePauses+')\x20'+_0x14ba8e+_0x7e685c(0x154),_0xba6217):logger[_0x7e685c(0x26f)]('('+consecutivePauses+')\x20'+_0x14ba8e);if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);await sleep(_0x17f4b8),botPaused=![],_0x17f4b8==pauseBotIntervalShort?resumeBot(!![]):resumeBot(![]);}}}async function killBot(){const _0x3c1e9d=_0x5bdcb0;botPaused=!![],await sleep(0x3e8),process[_0x3c1e9d(0x10e)]({'stop':_0x3c1e9d(0x17f)},_0x20d31f=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0xc6db4,_0x405cd1,_0x21fcf0=![]){const _0x6fb899=_0x5bdcb0;if(botPaused)return;let _0x516e21;const _0x4fcee9=config['exchange']||_0x6fb899(0x153);if(_0x405cd1)logger['debug'](_0x6fb899(0x220)+_0x405cd1);const _0x222187=()=>{const _0x15d4fa=_0x6fb899;loading[_0x15d4fa(0xaa)]=_0x15d4fa(0x198),emitLoadingProgress();};if(_0xc6db4[_0x6fb899(0x174)]()[_0x6fb899(0x10b)](_0x6fb899(0x109)))logHistory('error',_0x4fcee9+_0x6fb899(0x219)),_0x222187();else{if(_0xc6db4[_0x6fb899(0x174)]()['includes'](_0x6fb899(0x17e)))logHistory('error',_0x4fcee9+_0x6fb899(0x14c)),_0x222187();else{if(_0xc6db4[_0x6fb899(0x174)]()['includes']('AuthenticationError'))config[_0x6fb899(0x1e0)]?_0x516e21=_0x4fcee9+'\x20API\x20key,\x20secret\x20or\x20password\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange':_0x516e21=_0x4fcee9+'\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange',logHistory(_0x6fb899(0xaa),_0x516e21+_0x6fb899(0x255)),_0x222187();else{if(_0xc6db4[_0x6fb899(0x174)]()[_0x6fb899(0x10b)]('PermissionDenied'))logHistory('error',_0x4fcee9+'\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)'),_0x222187();else{if(!_0x21fcf0)await handleError(_0xc6db4,null);}}}}}async function handleError(_0x11659d,_0xc8c70d,_0x3315cb=''){const _0x2fdf1f=_0x5bdcb0;if(botPaused)return;let _0x304bdd;const _0x1cbe7f=config['exchange']||_0x2fdf1f(0x153);if(_0xc8c70d)logger['debug']('Exception\x20thrown\x20in\x20'+_0xc8c70d);if(_0x11659d[_0x2fdf1f(0x174)]()[_0x2fdf1f(0x10b)]('DDoSProtection'))_0x304bdd=_0x1cbe7f+_0x2fdf1f(0x1f2),await pauseBot(undefined,_0x304bdd,_0x11659d);else{if(_0x11659d[_0x2fdf1f(0x174)]()['includes']('RateLimitExceeded'))_0x304bdd=_0x1cbe7f+'\x20blocked\x20API\x20(RateLimitExceeded)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading',await pauseBot(undefined,_0x304bdd,_0x11659d);else{if(_0x11659d[_0x2fdf1f(0x174)]()['includes'](_0x2fdf1f(0x1b7))||_0x11659d[_0x2fdf1f(0x174)]()[_0x2fdf1f(0x10b)](_0x2fdf1f(0xd7)))_0x304bdd=_0x1cbe7f+_0x2fdf1f(0xb1),await pauseBot(undefined,_0x304bdd,_0x11659d[_0x2fdf1f(0x174)]());else{if(_0x11659d[_0x2fdf1f(0x174)]()[_0x2fdf1f(0x10b)](_0x2fdf1f(0x214)))_0x304bdd=_0x1cbe7f+_0x2fdf1f(0x185),await pauseBot(undefined,_0x304bdd,_0x11659d[_0x2fdf1f(0x174)]());else{if(_0x11659d[_0x2fdf1f(0x174)]()[_0x2fdf1f(0x10b)](_0x2fdf1f(0xb6)))_0x304bdd=_0x1cbe7f+_0x2fdf1f(0x224),await pauseBot(undefined,_0x304bdd,_0x11659d[_0x2fdf1f(0x174)]());else{if(_0x11659d[_0x2fdf1f(0x174)]()[_0x2fdf1f(0x26a)]()[_0x2fdf1f(0x10b)]('timestamp')||_0x11659d[_0x2fdf1f(0x174)]()[_0x2fdf1f(0x26a)]()['includes'](_0x2fdf1f(0x1c5)))_0x304bdd=_0x2fdf1f(0x169),await pauseBot(undefined,_0x304bdd,_0x11659d[_0x2fdf1f(0x174)]());else{if(_0x11659d[_0x2fdf1f(0x174)]()[_0x2fdf1f(0x10b)](_0x2fdf1f(0x1dc)))_0x304bdd=_0x1cbe7f+_0x2fdf1f(0xe5),await pauseBot(undefined,_0x304bdd,_0x11659d['toString']());else{if(_0x11659d instanceof ccxt['NetworkError'])_0x304bdd=_0x1cbe7f+_0x2fdf1f(0x22a)+_0x11659d['toString'](),logger[_0x2fdf1f(0x26f)](_0x2fdf1f(0x1c3),_0x11659d),await pauseBot(undefined,_0x304bdd,_0x11659d);else{if(_0x11659d[_0x2fdf1f(0x174)]()[_0x2fdf1f(0x10b)](_0x2fdf1f(0x109)))logHistory(_0x2fdf1f(0xaa),_0x1cbe7f+_0x2fdf1f(0x260)),logHistory(_0x2fdf1f(0xaa),_0x2fdf1f(0x248)),await killBot();else{if(_0x11659d[_0x2fdf1f(0x174)]()[_0x2fdf1f(0x10b)](_0x2fdf1f(0x17e)))logHistory(_0x2fdf1f(0xaa),_0x1cbe7f+_0x2fdf1f(0xbc)),logHistory('error',_0x2fdf1f(0x248)),await killBot();else{if(_0x11659d[_0x2fdf1f(0x174)]()[_0x2fdf1f(0x10b)](_0x2fdf1f(0x245))&&_0x11659d['toString']()[_0x2fdf1f(0x10b)](_0x2fdf1f(0x1f6)))_0x304bdd=_0x1cbe7f+_0x2fdf1f(0x137),await pauseBot(undefined,_0x304bdd,_0x11659d,!![]);else{if(_0x11659d[_0x2fdf1f(0x174)]()[_0x2fdf1f(0x10b)]('AuthenticationError'))config[_0x2fdf1f(0x1e0)]?_0x304bdd=_0x1cbe7f+_0x2fdf1f(0x197):_0x304bdd=_0x1cbe7f+_0x2fdf1f(0x221),logHistory(_0x2fdf1f(0xaa),_0x304bdd),logHistory(_0x2fdf1f(0xaa),_0x2fdf1f(0x248)),await killBot();else{if(_0x11659d[_0x2fdf1f(0x174)]()[_0x2fdf1f(0x10b)](_0x2fdf1f(0x254)))logHistory(_0x2fdf1f(0xaa),_0x1cbe7f+_0x2fdf1f(0x1b3)),logHistory('error',_0x2fdf1f(0x248)),await killBot();else{if(_0x11659d['toString']()['includes'](_0x2fdf1f(0x25b)))logHistory(_0x2fdf1f(0xaa),'Insufficient\x20funds\x20to\x20execute\x20order:\x20'+_0x3315cb),logger[_0x2fdf1f(0x26f)](_0x2fdf1f(0x10f),_0x11659d);else{if(_0x11659d instanceof ccxt['ExchangeError']){_0x304bdd=_0x1cbe7f+_0x2fdf1f(0x111)+_0x11659d[_0x2fdf1f(0x174)]();if(_0x3315cb)_0x304bdd+=_0x2fdf1f(0x244)+_0x3315cb;await pauseBot(undefined,_0x304bdd,_0x11659d);}else{_0x304bdd=_0x2fdf1f(0x25a)+_0x11659d[_0x2fdf1f(0x174)]();if(_0x3315cb)_0x304bdd+='\x0aSymbol(s):\x20'+_0x3315cb;await pauseBot(undefined,_0x304bdd);}}}}}}}}}}}}}}}}function decryptRSA(_0x1050c8,_0x31925a){const _0x30267f=_0x5bdcb0,_0x3cb527=forge[_0x30267f(0xc4)][_0x30267f(0x10a)](_0x1050c8),_0x8a78b4=_0x3cb527[_0x30267f(0x257)](forge[_0x30267f(0xdb)]['decode64'](_0x31925a),'RSA-OAEP',{'md':forge['md']['sha256'][_0x30267f(0xcc)](),'mgf1':{'md':forge['md'][_0x30267f(0x258)][_0x30267f(0xcc)]()}});return _0x8a78b4;}async function withRetry(_0x18b205,_0x314a89){const _0x2839fa=_0x5bdcb0;let _0x13efdb=![],_0x5d8c32=0x0,_0x41fc8b,_0x1617a9;while(_0x5d8c32<maxRetries){try{_0x41fc8b=await _0x314a89();break;}catch(_0x2a5085){_0x1617a9=_0x2a5085,!_0x13efdb?(_0x13efdb=!![],logger['debug'](_0x2839fa(0x12d)+_0x18b205+':',_0x2a5085[_0x2839fa(0x174)]())):await sleep(retryInterval);}_0x5d8c32++;}if(_0x5d8c32==0x0)return _0x41fc8b;if(_0x5d8c32>=maxRetries)throw _0x1617a9;else return logger[_0x2839fa(0x26f)]('RETRY\x20-\x20Problem\x20resolved\x20after\x20'+_0x5d8c32+_0x2839fa(0x1b9)),_0x41fc8b;}function formatResult(_0x59a52e,_0x938088){const _0x5eee26=_0x5bdcb0;return parseFloat(_0x59a52e[_0x5eee26(0x19e)](_0x938088));}function formatResultTruncate(_0x136ae9,_0x3dc4a4){const _0x74fcce=_0x5bdcb0;let _0x3bcf9d=formatResultString(_0x136ae9,0xa),_0x2db233=_0x3bcf9d['indexOf']('.');return _0x2db233!=-0x1&&(_0x3bcf9d=_0x3bcf9d[_0x74fcce(0x13c)](0x0,_0x2db233+_0x3dc4a4+0x1)),Number(_0x3bcf9d);}function formatResultString(_0x47d41d,_0x581932){const _0x1b0767=_0x5bdcb0;let _0xbe0678;if(!(''+_0x47d41d)[_0x1b0767(0x10b)]('e'))_0xbe0678=+(Math[_0x1b0767(0x1c7)](_0x47d41d+'e+'+_0x581932)+'e-'+_0x581932);else{let _0x163877=(''+_0x47d41d)[_0x1b0767(0x15c)]('e'),_0x53dbe6='';+_0x163877[0x1]+_0x581932>0x0&&(_0x53dbe6='+'),_0xbe0678=+(Math[_0x1b0767(0x1c7)](+_0x163877[0x0]+'e'+_0x53dbe6+(+_0x163877[0x1]+_0x581932))+'e-'+_0x581932);}return Number(_0xbe0678)['toFixed'](_0x581932);}function getServerTime(){const _0x596445=_0x5bdcb0,_0x3ef734=new Date();return _0x3ef734[_0x596445(0xf5)]()+'/'+(_0x3ef734[_0x596445(0x1d0)]()+0x1)[_0x596445(0x174)]()[_0x596445(0xca)](0x2,'0')+'/'+_0x3ef734[_0x596445(0x14d)]()[_0x596445(0x174)]()[_0x596445(0xca)](0x2,'0')+'\x20'+_0x3ef734['getHours']()[_0x596445(0x174)]()['padStart'](0x2,'0')+':'+_0x3ef734['getMinutes']()[_0x596445(0x174)]()['padStart'](0x2,'0')+':'+_0x3ef734[_0x596445(0x223)]()[_0x596445(0x174)]()[_0x596445(0xca)](0x2,'0');}function getTimeStamp(){const _0x3e676b=_0x5bdcb0,_0x5162bd=shiftedTime();return _0x5162bd['getFullYear']()+'/'+(_0x5162bd['getMonth']()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x5162bd[_0x3e676b(0x14d)]()[_0x3e676b(0x174)]()[_0x3e676b(0xca)](0x2,'0')+'\x20'+_0x5162bd[_0x3e676b(0x112)]()[_0x3e676b(0x174)]()[_0x3e676b(0xca)](0x2,'0')+':'+_0x5162bd[_0x3e676b(0x188)]()[_0x3e676b(0x174)]()[_0x3e676b(0xca)](0x2,'0')+':'+_0x5162bd[_0x3e676b(0x223)]()[_0x3e676b(0x174)]()[_0x3e676b(0xca)](0x2,'0');}function getDate(){const _0x3abf50=_0x5bdcb0,_0x27990d=shiftedTime();return _0x27990d[_0x3abf50(0xf5)]()+'/'+(_0x27990d[_0x3abf50(0x1d0)]()+0x1)[_0x3abf50(0x174)]()['padStart'](0x2,'0')+'/'+_0x27990d['getDate']()[_0x3abf50(0x174)]()['padStart'](0x2,'0');}function getHour(){const _0x4fc426=_0x5bdcb0,_0x29af63=shiftedTime();return _0x29af63['getHours']()['toString']()[_0x4fc426(0xca)](0x2,'0');}function sleep(_0x331f06){return new Promise(_0x3cf884=>setTimeout(_0x3cf884,_0x331f06));}function shiftedTime(){const _0x483cf9=_0x5bdcb0,_0x174fa1=new Date();let _0x3570d2=_0x174fa1;if(config&&config[_0x483cf9(0x16d)]!==0x0)_0x3570d2=fns[_0x483cf9(0x177)](_0x174fa1,{'hours':config[_0x483cf9(0x16d)]});return _0x3570d2;}function timer(_0x16245){const _0x4cad10=_0x5bdcb0,_0x1416ea=new Date();!lasttime?console[_0x4cad10(0x167)](getTimeStamp()+_0x4cad10(0x179),_0x16245,_0x1416ea):console[_0x4cad10(0x167)](getTimeStamp()+':\x20timer\x20>',_0x16245,(_0x1416ea-lasttime)/0x3e8),lasttime=_0x1416ea;}