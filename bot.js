const _0x38e2f8=_0xf90e;(function(_0x5275ea,_0x1eb0d6){const _0x2704e1=_0xf90e,_0x3806b4=_0x5275ea();while(!![]){try{const _0x11e255=-parseInt(_0x2704e1(0x215))/0x1+parseInt(_0x2704e1(0x173))/0x2*(parseInt(_0x2704e1(0x14b))/0x3)+-parseInt(_0x2704e1(0xcf))/0x4*(-parseInt(_0x2704e1(0x1c6))/0x5)+-parseInt(_0x2704e1(0xe0))/0x6+parseInt(_0x2704e1(0x111))/0x7+parseInt(_0x2704e1(0xe1))/0x8*(parseInt(_0x2704e1(0x12f))/0x9)+parseInt(_0x2704e1(0x235))/0xa*(-parseInt(_0x2704e1(0x232))/0xb);if(_0x11e255===_0x1eb0d6)break;else _0x3806b4['push'](_0x3806b4['shift']());}catch(_0x214145){_0x3806b4['push'](_0x3806b4['shift']());}}}(_0x30c4,0x642c5));const _0x5bb810=function(){let _0x221706=!![];return function(_0x43befa,_0x221abf){const _0x5c6ccc=_0x221706?function(){if(_0x221abf){const _0x4f864d=_0x221abf['apply'](_0x43befa,arguments);return _0x221abf=null,_0x4f864d;}}:function(){};return _0x221706=![],_0x5c6ccc;};}(),_0x13acd9=_0x5bb810(this,function(){const _0x130bbc=_0xf90e;return _0x13acd9[_0x130bbc(0x1ae)]()[_0x130bbc(0x27d)](_0x130bbc(0x18e))[_0x130bbc(0x1ae)]()[_0x130bbc(0x242)](_0x13acd9)[_0x130bbc(0x27d)](_0x130bbc(0x18e));});_0x13acd9();'use strict';const ccxt=require(_0x38e2f8(0x1bc)),low=require('lowdb'),FileSync=require(_0x38e2f8(0x10b)),fs=require('fs'),fns=require(_0x38e2f8(0x13f)),forge=require(_0x38e2f8(0x112)),util=require(_0x38e2f8(0x132)),argv=require(_0x38e2f8(0x181))(process[_0x38e2f8(0x166)][_0x38e2f8(0x12b)](0x2))[_0x38e2f8(0x166)],path=require('path'),axios=require('axios');let exchange,gTicker={},gChange={};const usdBasecoins=[_0x38e2f8(0x141),_0x38e2f8(0x15e),'TUSD',_0x38e2f8(0x190),_0x38e2f8(0x212),_0x38e2f8(0x128)],excludedExchanges=[_0x38e2f8(0x22c)],debugging=argv['d']||![];let pnlGenerationNeeded=argv['r']||![],config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x38e2f8(0x182)]({'LOCKED':0x0,'UNLOCKING':0x1,'UNLOCKED':0x2});let lockOrders=ORDERS[_0x38e2f8(0x17d)],validateOrdersState,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotIntervalShort=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0x38e2f8(0x1be)+pauseBotInterval/0xea60+_0x38e2f8(0x125),maxPauseRetries=0x6,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,watchTransactionsInterval=0x3c*0x3e8,schedulerInterval=0x3c*0x3c*0x3e8,retryInterval=0x3e8,maxRetries=0x5,logPageSize=0x14,defaultFee=0.003;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidOrdersInitialTimeout,pidOrdersTimeout,botPaused=![],transactionDetectionOngoing=![],lastCoinsToBalance='',exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x5dc,balanceUpdateRetries=0x5;let enableFiatToggle;const serverversion=require(_0x38e2f8(0x159))[_0x38e2f8(0x1a1)],environment=require(_0x38e2f8(0x159))[_0x38e2f8(0xe2)]||'production',botID=process[_0x38e2f8(0x166)][0x2]||_0x38e2f8(0x250),pattern=/^[0-9]{3}$/;!pattern[_0x38e2f8(0xf1)](botID)&&(console[_0x38e2f8(0x23e)](_0x38e2f8(0x174)+botID+',\x20must\x20be\x20a\x203\x20digit\x20number'),killBot());const userID=process[_0x38e2f8(0x166)][0x3]||'',configpath=userID?'./config/'+userID+'/':_0x38e2f8(0x15c),logspath=userID?'./logs/'+userID+'/':_0x38e2f8(0x26f),loggerfile=fs[_0x38e2f8(0x246)](logspath+'/output-000.log',{'flags':'a'});!fs[_0x38e2f8(0x180)](configpath)&&fs[_0x38e2f8(0x14a)](configpath);!fs[_0x38e2f8(0x180)](logspath)&&fs['mkdirSync'](logspath);const configfile=configpath+_0x38e2f8(0xdb)+botID+_0x38e2f8(0x240),logfile=configpath+_0x38e2f8(0xdb)+botID+_0x38e2f8(0x25f),performancefile=configpath+_0x38e2f8(0xdb)+botID+_0x38e2f8(0x138),coinresultsfile=configpath+_0x38e2f8(0xdb)+botID+_0x38e2f8(0x14e),settingsfile=configpath+'bb-settings.json',securefile=configpath+_0x38e2f8(0x1e9),configbackuppath=configpath+_0x38e2f8(0x1d8),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x38e2f8(0x256)]({'logs':[],'version':serverversion})[_0x38e2f8(0x10f)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance['defaults']({'data':[],'version':serverversion})['write']();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x38e2f8(0x256)]({'bot':[],'version':serverversion})[_0x38e2f8(0x10f)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x38e2f8(0x256)]({'coins':{},'version':serverversion})[_0x38e2f8(0x10f)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0,settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x1f92fe=>{const _0x91bd4a=_0x38e2f8;console[_0x91bd4a(0x23e)](_0x1f92fe);},'simple':_0x17f6f2=>{const _0x44ec66=_0x38e2f8;console[_0x44ec66(0x23e)](_0x17f6f2),loggerfile[_0x44ec66(0x10f)](util[_0x44ec66(0xf9)](_0x17f6f2)+'\x0a');},'full':async(_0x1e45b4,_0x218afb='')=>{const _0x377e8b=_0x38e2f8;let _0x45b3de;if(config['showname'])_0x45b3de=getTimeStamp()+':\x20'+config[_0x377e8b(0x1df)]+_0x377e8b(0x202)+_0x1e45b4;else _0x45b3de=getTimeStamp()+_0x377e8b(0x285)+botID+_0x377e8b(0x202)+_0x1e45b4;console[_0x377e8b(0x23e)](_0x45b3de),loggerfile['write'](util['format'](_0x45b3de)+'\x0a'),_0x218afb&&(console['log'](_0x218afb),loggerfile[_0x377e8b(0x10f)](util[_0x377e8b(0xf9)](_0x218afb)+'\x0a'));},'debug':async(_0x406b49,_0x3b0c7d='')=>{const _0x40cda0=_0x38e2f8;let _0x10abe9;if(config['showname'])_0x10abe9=getTimeStamp()+':\x20'+config[_0x40cda0(0x1df)]+'\x20>\x20[DEBUG]\x20'+_0x406b49;else _0x10abe9=getTimeStamp()+':\x20Bot\x20'+botID+'\x20>\x20[DEBUG]\x20'+_0x406b49;if(debugging)console[_0x40cda0(0x23e)](_0x10abe9);loggerfile[_0x40cda0(0x10f)](util[_0x40cda0(0xf9)](_0x10abe9)+'\x0a');if(_0x3b0c7d){if(debugging)console[_0x40cda0(0x23e)](_0x3b0c7d);loggerfile['write'](util[_0x40cda0(0xf9)](_0x3b0c7d)+'\x0a');}}};process['on'](_0x38e2f8(0x13b),function(_0x4106e5){const _0x3dbf1c=_0x38e2f8;handleError(_0x4106e5[_0x3dbf1c(0x16d)],'uncaughtException');});settings['timeshift']!=config[_0x38e2f8(0x19a)]&&updateTimeshift(settings[_0x38e2f8(0x19a)]);settings['onepagemode']!=config[_0x38e2f8(0xe4)]&&updateOnepagemode(settings['onepagemode']);(settings['marketcapApi']&&!config['marketcapApi']||!settings['marketcapApi']&&config[_0x38e2f8(0x1fe)])&&updateMarketcapApi(settings[_0x38e2f8(0x1fe)]);process[_0x38e2f8(0x1b5)]({'started':_0x38e2f8(0x1a7)},_0x1d1f72=>{}),initializeProcessListeners();function proxyEmit(_0x2ca9a4,_0xa52137=null){const _0x21189c=_0x38e2f8;process[_0x21189c(0x1b5)]({'function':_0x2ca9a4,'args':_0xa52137},_0x3d5034=>{});}function initializeProcessListeners(){const _0x1d018d=_0x38e2f8;process['on'](_0x1d018d(0xee),_0x18b53a=>{const _0x25783e=_0x1d018d;switch(Object[_0x25783e(0x1aa)](_0x18b53a)[0x0]){case _0x25783e(0x19a):_0x18b53a[_0x25783e(0x19a)]!=undefined&&(settings[_0x25783e(0x19a)]=_0x18b53a[_0x25783e(0x19a)],updateTimeshift(settings[_0x25783e(0x19a)]));break;case _0x25783e(0xe4):_0x18b53a[_0x25783e(0xe4)]!=undefined&&(settings[_0x25783e(0xe4)]=_0x18b53a[_0x25783e(0xe4)],updateOnepagemode(settings[_0x25783e(0xe4)]));break;case'marketcapApi':_0x18b53a[_0x25783e(0x1fe)]!=undefined&&(settings[_0x25783e(0x1fe)]=_0x18b53a[_0x25783e(0x1fe)],updateMarketcapApi(settings[_0x25783e(0x1fe)]));break;case _0x25783e(0x10e):_0x18b53a[_0x25783e(0x10e)]!=undefined&&(bots=JSON[_0x25783e(0x162)](_0x18b53a[_0x25783e(0x10e)]),proxyEmit(_0x25783e(0x10e),bots));break;case _0x25783e(0x249):switch(_0x18b53a[_0x25783e(0x249)]){case _0x25783e(0x24b):initclient();break;case _0x25783e(0xdd):toggleBotMode();break;case _0x25783e(0x12c):emitHistory(_0x18b53a[_0x25783e(0x296)]);break;case _0x25783e(0xd1):deleteHistoryAlerts(_0x18b53a[_0x25783e(0x296)]);break;case'getPortfolio':getPortfolio(_0x18b53a[_0x25783e(0x296)]);break;case'storeConfiguration':storeConfiguration(_0x18b53a[_0x25783e(0x296)]);break;case _0x25783e(0x151):storeHeadless(_0x18b53a[_0x25783e(0x296)]);break;case _0x25783e(0x1b2):storeFiat(_0x18b53a[_0x25783e(0x296)]);break;case _0x25783e(0x276):resetHistory();break;case _0x25783e(0xda):getStartingBalances(getNormalizedPerformance());break;case _0x25783e(0x214):placeOrder(_0x18b53a[_0x25783e(0x296)]);break;case _0x25783e(0x183):cancelLoading();break;case _0x25783e(0x1f9):showConfig();break;case'sendMetricsTelegram':sendMetricsTelegram();break;case _0x25783e(0x290):sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x4dbc26=![]){const _0x1c9c76=_0x38e2f8;logger[_0x1c9c76(0x20d)](_0x1c9c76(0x264)+(_0x4dbc26?_0x1c9c76(0x165):_0x1c9c76(0x11e))+'\x20|\x20exchange:\x20'+config[_0x1c9c76(0xf2)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x4dbc26)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x1c9c76(0x1e3)]!=''&&config[_0x1c9c76(0x1e3)]!=_0x1c9c76(0x237)){loadingProgress=0x0;if(_0x4dbc26){await initExchange();const _0x456ed4=await testAPI();if(!_0x456ed4)return;await loadSymbols(),loadingProgress=0x1,setStableCoins(),proxyEmit('configuration',emittedConfiguration()),initialPerformanceStored=![];}const _0x187b30=await getCoins();[currentCoins,currentCoinsAll]=_0x187b30,setBlockTransactionDetection(![]),startScheduler(),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x1c9c76(0x20d)](_0x1c9c76(0x1ca)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x1c9c76(0x1b3)]==0x0&&allOpenOrders['length']!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(pnlGenerationNeeded)await generatePnL();}}async function resumeBot(_0xaef1a5=![]){const _0x290aa0=_0x38e2f8;logger[_0x290aa0(0x20d)](_0x290aa0(0x177)+(_0xaef1a5?_0x290aa0(0x192):_0x290aa0(0x25c))+_0x290aa0(0x267)+config['exchange']);if(pidBalances)clearTimeout(pidBalances);if(_0xaef1a5){getBalances();return;}coinsLoaded=![];if(config[_0x290aa0(0x1e3)]!=''&&config[_0x290aa0(0x1e3)]!=_0x290aa0(0x237)){loadingProgress=0x1;const _0x205677=await getCoins();[currentCoins,currentCoinsAll]=_0x205677,setBlockTransactionDetection(![]),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x290aa0(0x20d)](_0x290aa0(0x1ca)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x290aa0(0x1b3)]==0x0&&allOpenOrders[_0x290aa0(0x1b3)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();}}async function getMarketCap(_0x53263b){const _0x16cfc0=_0x38e2f8;let _0x550c2a=![];if(_0x53263b)_0x550c2a=!![];const _0x1d7e77=_0x550c2a?_0x53263b:currentCoins,_0x3fd195=_0x1d7e77['map'](_0x31c732=>_0x31c732[_0x16cfc0(0x1b6)]);if(!config[_0x16cfc0(0x1fe)]||!_0x550c2a&&!config['marketcapEnabled']||_0x3fd195[_0x16cfc0(0x1b3)]==0x0)return;let _0x16574f=null;try{_0x16574f=await axios[_0x16cfc0(0xc3)](_0x16cfc0(0x201),{'headers':{'X-CMC_PRO_API_KEY':settings['marketcapApi']},'params':{'symbol':_0x3fd195[_0x16cfc0(0x1ae)]()}});}catch(_0x5d4e6f){_0x16574f=null,_0x5d4e6f[_0x16cfc0(0x1ae)]()['includes'](_0x16cfc0(0x14d))?(config[_0x16cfc0(0x1fe)]=![],updateConfig(),proxyEmit(_0x16cfc0(0x11b),emittedConfiguration()),logHistory(_0x16cfc0(0x19b),_0x16cfc0(0x206))):(logHistory(_0x16cfc0(0x19b),_0x16cfc0(0x16b)+schedulerInterval/(0x3c*0x3e8)+_0x16cfc0(0x125)),logger['debug']('Error\x20details:',_0x5d4e6f[_0x16cfc0(0x1ae)]()+_0x16cfc0(0x19d)+_0x5d4e6f['code']));}let _0x1b00f5=!![];if(_0x16574f){let _0x29e9c1=0x0;const _0x464ede=_0x16574f[_0x16cfc0(0x15b)];_0x3fd195[_0x16cfc0(0xbf)](_0x6bdb19=>{const _0x285b07=_0x16cfc0;if(_0x464ede[_0x285b07(0x15b)][_0x6bdb19][0x0]&&_0x464ede[_0x285b07(0x15b)][_0x6bdb19][0x0]['quote']['USD'][_0x285b07(0xc8)])_0x29e9c1+=_0x464ede[_0x285b07(0x15b)][_0x6bdb19][0x0][_0x285b07(0x1f0)][_0x285b07(0x141)][_0x285b07(0xc8)];else{if(![_0x285b07(0x228),_0x285b07(0x141)][_0x285b07(0x1f7)](_0x6bdb19)){if(_0x550c2a)logHistory(_0x285b07(0x19b),_0x285b07(0x1c8)+_0x6bdb19+_0x285b07(0xca));else{const _0x18bb19=config[_0x285b07(0x1b1)][_0x285b07(0x144)](_0x2fc93d=>_0x2fc93d[_0x285b07(0x1b6)]==_0x6bdb19);_0x18bb19&&!_0x18bb19['excluded']&&_0x18bb19[_0x285b07(0x277)]==-0x1&&(_0x1b00f5=![],logHistory('error',_0x285b07(0x106)),logger['debug']('CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20for\x20'+_0x6bdb19));}}}});if(!_0x1b00f5)return;_0x3fd195[_0x16cfc0(0xbf)](_0x1e084f=>{const _0xa382f8=_0x16cfc0,_0x5f4044=_0x464ede['data'][_0x1e084f][0x0]?_0x464ede[_0xa382f8(0x15b)][_0x1e084f][0x0][_0xa382f8(0x1f0)][_0xa382f8(0x141)][_0xa382f8(0xc8)]:0x0;if(_0x550c2a){const _0x52118d=_0x53263b[_0xa382f8(0x144)](_0x3b6677=>_0x3b6677[_0xa382f8(0x1b6)]==_0x1e084f);_0x52118d&&(_0x52118d[_0xa382f8(0x160)]=_0x5f4044);}else{const _0x44f9a9=currentCoins[_0xa382f8(0x144)](_0x5e48a9=>_0x5e48a9['coin']==_0x1e084f);_0x44f9a9&&(_0x44f9a9[_0xa382f8(0x160)]=_0x5f4044);const _0x279f3d=currentCoinsAll[_0xa382f8(0x144)](_0x3d26a8=>_0x3d26a8[_0xa382f8(0x1b6)]==_0x1e084f);_0x279f3d&&(_0x279f3d[_0xa382f8(0x160)]=_0x5f4044);}}),!_0x550c2a&&updateTargetDistribution();}}function updateTargetDistribution(){const _0x4f7124=_0x38e2f8,_0x294407=0x2;let _0xf6e7b0=0x0,_0xd9e012=0x0,_0x526fe3=0x0,_0x5d0b5d=0x0,_0x5f06cd=0x0;config[_0x4f7124(0x1b1)]['forEach'](_0x5689eb=>{const _0xc04375=_0x4f7124;if(!_0x5689eb[_0xc04375(0x1d5)]){_0x526fe3++,_0xf6e7b0+=_0x5689eb['slider'];if(_0x5689eb['slider']===-0x1){_0xf6e7b0++;const _0x28590d=currentCoinsAll[_0xc04375(0x144)](_0x79ae8e=>_0x79ae8e['coin']==_0x5689eb['coin']);_0x28590d&&(_0x5d0b5d+=_0x28590d[_0xc04375(0x160)],_0x5f06cd+=Math['sqrt'](_0x28590d[_0xc04375(0x160)]));}if(_0x5689eb[_0xc04375(0x277)]!==-0x1)_0xd9e012++;}});let _0x31cd93;const _0x78ee15=0x64-_0xf6e7b0,_0xfccbfb=_0x526fe3-_0xd9e012;_0x31cd93=_0xfccbfb===0x0?_0xf6e7b0:Math[_0x4f7124(0x199)](0x64,_0xf6e7b0),config[_0x4f7124(0x1b1)][_0x4f7124(0xbf)](_0x43862a=>{const _0x5dea5d=_0x4f7124,_0x1d5cd5=currentCoinsAll['find'](_0x949a7d=>_0x949a7d[_0x5dea5d(0x1b6)]==_0x43862a['coin']);_0x1d5cd5&&(_0x43862a[_0x5dea5d(0x160)]=_0x1d5cd5[_0x5dea5d(0x160)]);if(!_0x43862a[_0x5dea5d(0x1d5)]){if(_0x31cd93<=0x64){if(_0x43862a['slider']===-0x1){if(_0x5d0b5d!==0x0&&config[_0x5dea5d(0x25b)]){if(_0x1d5cd5){if(config[_0x5dea5d(0x25b)]==_0x5dea5d(0x160))_0x43862a[_0x5dea5d(0x12a)]=(_0x78ee15/(_0x5d0b5d/_0x1d5cd5[_0x5dea5d(0x160)]))[_0x5dea5d(0x266)](_0x294407);else config['marketcapEnabled']=='marketcapsqrt'&&(_0x43862a[_0x5dea5d(0x12a)]=(_0x78ee15/(_0x5f06cd/Math['sqrt'](_0x1d5cd5[_0x5dea5d(0x160)])))[_0x5dea5d(0x266)](_0x294407));}}}}}}),updateConfig();}function updateConfig(){const _0x10a072=_0x38e2f8;let _0x55e563=dbConfig[_0x10a072(0xc3)](_0x10a072(0x13d))[_0x10a072(0x144)]({'botID':botID})[_0x10a072(0x145)]();_0x55e563&&dbConfig[_0x10a072(0xc3)](_0x10a072(0x13d))[_0x10a072(0x144)]({'botID':botID})[_0x10a072(0x1d7)](config)[_0x10a072(0x10f)]();}function logMemory(){const _0x3f5631=_0x38e2f8;if(environment!=_0x3f5631(0x252))return;const _0x2003d7=process['memoryUsage']()[_0x3f5631(0x171)]/0x400/0x400;logger[_0x3f5631(0x20d)](_0x3f5631(0x28c)+process['pid']+'\x20uses\x20'+formatResult(_0x2003d7,0x1)+_0x3f5631(0x172));}async function startScheduler(){const _0x9980e6=_0x38e2f8,_0x387b8a=shiftedTime()[_0x9980e6(0xfd)]();getMarketCap(),loadSymbols(),_0x387b8a==0x1&&logMemory(),await sleep(schedulerInterval),startScheduler();}async function restartBot(_0xd445f3=![]){const _0x4924aa=_0x38e2f8;logger[_0x4924aa(0x20d)](_0x4924aa(0x1cf));if(!_0xd445f3)while(lockOrders!=ORDERS[_0x4924aa(0x17d)]||coolingDown){await sleep(0x3e8);}process['send']({'stop':_0x4924aa(0x189)},_0x3d5ed4=>{});}async function initExchange(_0xf0756c=config[_0x38e2f8(0xf2)],_0xf46db5=config[_0x38e2f8(0x1e3)],_0x1e34aa=config['apiSecret'],_0x42269d=config[_0x38e2f8(0x278)],_0x127364=config[_0x38e2f8(0x1a3)]){const _0x5aa7e9=_0x38e2f8;if(exchange){logger['debug'](_0x5aa7e9(0x1d4));return;}logger[_0x5aa7e9(0x20d)]('Initializing\x20exchange');!supportedExchanges()[_0x5aa7e9(0x1f7)](_0xf0756c)&&(logHistory(_0x5aa7e9(0x19b),_0x5aa7e9(0x155)+_0xf0756c+_0x5aa7e9(0x20b)),killBot());const _0x3ada90=ccxt['pro'][_0xf0756c[_0x5aa7e9(0x1a2)]()];exchange=new _0x3ada90({'apiKey':_0xf46db5,'secret':_0x1e34aa,'options':{'defaultType':_0x5aa7e9(0x25e)}});if(_0x42269d)exchange[_0x5aa7e9(0x158)]=_0x42269d;if(exchange[_0x5aa7e9(0x12d)]['sandbox'])exchange[_0x5aa7e9(0x24d)](_0x127364);}function updateExchange(_0xd51315,_0x53b2c8,_0x3f956f=null){const _0x405b8b=_0x38e2f8;exchange[_0x405b8b(0x1e3)]=_0xd51315,exchange[_0x405b8b(0x1cc)]=_0x53b2c8,exchange[_0x405b8b(0x158)]=_0x3f956f,logger[_0x405b8b(0x20d)]('Updating\x20API\x20key\x20(not\x20saved\x20in\x20config\x20file\x20yet)');}function setStableCoins(){const _0x36ee81=_0x38e2f8;let _0x4f768b=config[_0x36ee81(0x1c9)]==_0x36ee81(0x16c)?_0x36ee81(0x16c):config[_0x36ee81(0x1c9)]==_0x36ee81(0x1f3)?_0x36ee81(0x1f3):_0x36ee81(0x1e2),_0x1deb45=allSymbols['includes'](_0x4f768b+_0x36ee81(0xec))?_0x36ee81(0x141):allSymbols[_0x36ee81(0x1f7)](_0x4f768b+'/USDT')?_0x36ee81(0x190):_0x36ee81(0x228),_0x269de3=allSymbols[_0x36ee81(0x1f7)](_0x4f768b+_0x36ee81(0x293))?_0x36ee81(0x228):_0x1deb45;enableFiatToggle=!![],_0x1deb45=='EUR'&&(enableFiatToggle=![],storeFiat(_0x36ee81(0x228))),_0x269de3!=_0x36ee81(0x228)&&(enableFiatToggle=![],storeFiat(_0x36ee81(0x141))),stablecoins={'eur':{'coin':''+_0x4f768b+_0x269de3,'symbol':_0x4f768b+'/'+_0x269de3},'usd':{'coin':''+_0x4f768b+_0x1deb45,'symbol':_0x4f768b+'/'+_0x1deb45}};}async function initwsCcxt(){const _0x1d32db=_0x38e2f8;initCycle++;const _0x4815aa=initCycle;let _0x2c9619=[];config[_0x1d32db(0x1b1)][_0x1d32db(0xbf)](_0x379008=>{const _0x32864d=_0x1d32db;if(!_0x379008[_0x32864d(0x1d5)]&&_0x379008['coin']!=config['basecoin'])_0x2c9619['push'](_0x379008[_0x32864d(0x135)]);});if(!_0x2c9619[_0x1d32db(0x1f7)](stablecoins[_0x1d32db(0xc9)][_0x1d32db(0x135)]))_0x2c9619[_0x1d32db(0x1ad)](stablecoins[_0x1d32db(0xc9)][_0x1d32db(0x135)]);if(!_0x2c9619[_0x1d32db(0x1f7)](stablecoins[_0x1d32db(0x161)]['symbol']))_0x2c9619[_0x1d32db(0x1ad)](stablecoins['usd'][_0x1d32db(0x135)]);loadCoins(_0x2c9619),_0x2c9619=validateSymbols(_0x2c9619);const _0x8e9926=async _0x36d758=>{const _0x25bde7=_0x1d32db;let _0x2d28ad;try{const _0x3197d7=await getTickers(_0x36d758);Object[_0x25bde7(0x1d1)](_0x3197d7)[_0x25bde7(0xbf)](_0x332bed=>{const _0xf824a5=_0x25bde7;_0x2d28ad=_0x332bed[0x1]['symbol'],gTicker[noslash(_0x2d28ad)]=_0x332bed[0x1][_0xf824a5(0x184)],gChange[_0x2d28ad]=_0x332bed[0x1][_0xf824a5(0x226)];});}catch(_0x56c361){await handleError(_0x56c361,_0x25bde7(0x1ef),_0x2d28ad);}},_0x812815=async _0x661b0e=>{const _0x1e7cf6=_0x1d32db;while(initCycle==_0x4815aa){if(!botPaused)try{const _0x16a352=await exchange[_0x1e7cf6(0x20e)](_0x661b0e);gTicker[noslash(_0x16a352[0x0][_0x1e7cf6(0x135)])]=_0x16a352[0x0][_0x1e7cf6(0x1d9)];}catch(_0x178fe9){if(!exchangeStopped)await handleError(_0x178fe9,_0x1e7cf6(0x272),_0x661b0e);}else await sleep(0x64);}},_0x4f93f9=async _0x437535=>{const _0xf82b2c=_0x1d32db;while(initCycle==_0x4815aa){if(!botPaused)try{const _0x2ca954=await exchange[_0xf82b2c(0xe8)](_0x437535),_0x59f303=_0x2ca954['pop']();gTicker[noslash(_0x59f303['symbol'])]=_0x59f303['price'];}catch(_0xf97735){if(!exchangeStopped)await handleError(_0xf97735,_0xf82b2c(0x1c3),_0x437535[_0xf82b2c(0x1ae)]());}else await sleep(0x64);}},_0x466f98=async _0x5790d2=>{const _0x3cb0ad=_0x1d32db;while(initCycle==_0x4815aa){if(!botPaused){let _0x33fa09;try{await sleep(0x3c*0x3e8);const _0xde0cdc=await getTickers(_0x5790d2);Object[_0x3cb0ad(0x1d1)](_0xde0cdc)[_0x3cb0ad(0xbf)](_0x2f87ff=>{const _0x1770ad=_0x3cb0ad;_0x33fa09=_0x2f87ff[0x1][_0x1770ad(0x135)],gChange[_0x33fa09]=_0x2f87ff[0x1][_0x1770ad(0x226)];});}catch(_0x1cb548){if(!exchangeStopped)await handleError(_0x1cb548,_0x3cb0ad(0x15a),_0x33fa09);}}else await sleep(0x64);}},_0x4f68ad=async _0x56c543=>{const _0x5864b8=_0x1d32db;while(initCycle==_0x4815aa){if(!botPaused)try{const _0x4e5413=await exchange[_0x5864b8(0x225)](_0x56c543);initCycle==_0x4815aa&&_0x4e5413[_0x5864b8(0xbf)](_0x284548=>{updateNumberCoinsCcxt(_0x284548);});}catch(_0x3a258e){if(!exchangeStopped)await handleError(_0x3a258e,_0x5864b8(0xcd));}else await sleep(0x64);}};_0x8e9926(_0x2c9619),_0x466f98(_0x2c9619),exchange[_0x1d32db(0x12d)][_0x1d32db(0xe8)]&&!(config[_0x1d32db(0xf2)]==_0x1d32db(0x133)&&_0x2c9619['length']>0xa)?_0x4f93f9(_0x2c9619):_0x2c9619['forEach'](_0x478b79=>{_0x812815(_0x478b79);}),_0x2c9619['forEach'](_0xa7dcb1=>{_0x4f68ad(_0xa7dcb1);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x474030){const _0x3eee80=_0x38e2f8;let _0x47b917={};try{if(config[_0x3eee80(0xf2)]!=_0x3eee80(0xc4))_0x47b917=await exchange[_0x3eee80(0x21f)](_0x474030);else for(const _0x4844b3 of _0x474030){const _0x4936cf=await exchange[_0x3eee80(0x19f)](_0x4844b3);_0x47b917[_0x4844b3]=_0x4936cf;}return _0x47b917;}catch(_0x474062){throw _0x474062;}}function setBlockTransactionDetection(_0x288014){const _0x4e61c0=_0x38e2f8;blockTransactionDetection=_0x288014,logger[_0x4e61c0(0x20d)](_0x4e61c0(0x280)+blockTransactionDetection);}async function detectLiquidityChange(_0x450941=0x0){const _0x242756=_0x38e2f8;transactionDetectionOngoing=!![];try{const _0x4356cf=await getCoins(_0x450941),[_0x4683dc,_0x399121]=_0x4356cf;let _0x1dc573=[];currentCoins['forEach'](_0x3e0e52=>{const _0x5d4329=_0xf90e,_0x161f0f=_0x4683dc[_0x5d4329(0x144)](_0x5cec5f=>_0x5cec5f[_0x5d4329(0x1b6)]==_0x3e0e52[_0x5d4329(0x1b6)]);if(_0x161f0f){if(_0x3e0e52['number']!=_0x161f0f[_0x5d4329(0x27f)]){let _0x4d9d85;if(_0x3e0e52[_0x5d4329(0x1b6)]!=config[_0x5d4329(0x1c9)]){const _0x39751a=gTicker[noslash(_0x3e0e52[_0x5d4329(0x135)])];_0x4d9d85=_0x3e0e52[_0x5d4329(0x271)]?0x1/_0x39751a:_0x39751a;}else _0x4d9d85=0x1;_0x1dc573[_0x5d4329(0x1ad)]({'coin':_0x3e0e52['coin'],'symbol':_0x3e0e52[_0x5d4329(0x135)],'price':_0x4d9d85,'number':Number(formatResult(_0x161f0f['number']-_0x3e0e52[_0x5d4329(0x27f)],0x8)),'basecoinvalue':_0x4d9d85*(_0x161f0f[_0x5d4329(0x27f)]-_0x3e0e52[_0x5d4329(0x27f)])});}}});if(_0x1dc573[_0x242756(0x1b3)]>0x0&&!blockTransactionDetection){for(const _0x55fb26 of _0x1dc573){if(config[_0x242756(0x222)]){logger['debug']('Liquidity\x20change\x20|\x20basecoin\x20value:\x20'+_0x55fb26['basecoinvalue']+_0x242756(0x185)+lastFees[_0x242756(0x284)]);if(lastFees[_0x242756(0x284)]==0x0||Math[_0x242756(0x282)](_0x55fb26[_0x242756(0xed)])>lastFees[_0x242756(0x284)]*0x3){if(config[_0x242756(0x222)]=='update-liquidity'){delete _0x55fb26[_0x242756(0x135)],delete _0x55fb26[_0x242756(0xed)];let _0x584d98=[],_0x3248af=[...config['liquidity']]||[],_0x1df15e=config[_0x242756(0x279)];_0x3248af[_0x242756(0x16f)]((_0x4135e1,_0x4746f8)=>_0x4135e1[_0x242756(0x26a)]>_0x4746f8[_0x242756(0x26a)]?-0x1:_0x4746f8['date']>_0x4135e1[_0x242756(0x26a)]?0x1:0x0);const _0x4bdfcb=getDate();if(_0x3248af[0x0]){const _0x30206c=fns[_0x242756(0x162)](_0x3248af[0x0]['date'],'yyyy/MM/dd',new Date()),_0x1f9a6c=fns[_0x242756(0x162)](_0x4bdfcb,'yyyy/MM/dd',new Date());if(fns['isEqual'](_0x30206c,_0x1f9a6c)){_0x584d98=_0x3248af[0x0][_0x242756(0x14f)];const _0x538464=_0x584d98[_0x242756(0x144)](_0x2d7f95=>_0x2d7f95[_0x242756(0x1b6)]==_0x55fb26['coin']);_0x538464?(_0x538464[_0x242756(0x27f)]+=_0x55fb26[_0x242756(0x27f)],_0x538464[_0x242756(0x27f)]==0x0&&(_0x584d98=_0x584d98[_0x242756(0xd6)](_0xb27117=>{const _0x1a7f3f=_0x242756;return _0xb27117[_0x1a7f3f(0x1b6)]!=_0x55fb26[_0x1a7f3f(0x1b6)];}))):_0x584d98['push'](_0x55fb26);const _0x2a2aed=_0x1df15e['find'](_0x873b45=>_0x873b45['date']==_0x4bdfcb);_0x2a2aed[_0x242756(0x14f)]=_0x584d98;}else _0x1df15e[_0x242756(0x1ad)]({'date':_0x4bdfcb,'changes':[_0x55fb26]});}const _0x25f8fc=_0x1df15e[_0x242756(0x144)](_0x33d8e5=>_0x33d8e5['date']==_0x4bdfcb);if(_0x25f8fc){let _0x10650c=!![];_0x25f8fc[_0x242756(0x14f)][_0x242756(0xbf)](_0x58c653=>{const _0x678a5d=_0x242756;if(_0x58c653[_0x678a5d(0x27f)]!=0x0)_0x10650c=![];}),_0x10650c&&(_0x1df15e=_0x1df15e[_0x242756(0xd6)](_0x4c5e11=>{const _0x3b53e3=_0x242756;return _0x4c5e11[_0x3b53e3(0x26a)]!=_0x4bdfcb;}));}let _0x44a48b=dbConfig[_0x242756(0xc3)]('bot')['find']({'botID':botID})[_0x242756(0x145)]();_0x44a48b&&(dbConfig[_0x242756(0xc3)](_0x242756(0x13d))[_0x242756(0x144)]({'botID':botID})[_0x242756(0x1d7)]({'liquidity':_0x1df15e})[_0x242756(0x10f)](),config[_0x242756(0x279)]=_0x1df15e);logHistory(_0x242756(0x210),_0x242756(0x18c)+Math['abs'](_0x55fb26['number'])+'\x20'+_0x55fb26[_0x242756(0x1b6)]+'\x20'+(_0x55fb26['number']>0x0?_0x242756(0x257):'removed')+'\x20-\x20liquidity\x20settings\x20updated\x20accordingly'),proxyEmit(_0x242756(0x11b),emittedConfiguration());const _0xb5cc29=getNormalizedPerformance();emitPerformance(_0xb5cc29),getStartingBalances(_0xb5cc29),logger[_0x242756(0x20d)](_0x242756(0x247));}else config['autoliquidity']=='switch-manual'&&(config[_0x242756(0xc5)]?(await storeHeadless({'headless':![]}),logHistory('success',_0x242756(0x18c)+Math['abs'](_0x55fb26[_0x242756(0x27f)])+'\x20'+_0x55fb26[_0x242756(0x1b6)]+'\x20'+(_0x55fb26['number']>0x0?'added':_0x242756(0x260))+_0x242756(0x1ea))):logger[_0x242756(0x20d)]('Portfolio\x20change\x20detected:\x20'+Math['abs'](_0x55fb26[_0x242756(0x27f)])+'\x20'+_0x55fb26[_0x242756(0x1b6)]+'\x20'+(_0x55fb26[_0x242756(0x27f)]>0x0?_0x242756(0x257):_0x242756(0x260))+_0x242756(0x19e)));}else logger[_0x242756(0x20d)]('Fee\x20discount\x20refund\x20detected:\x20'+Math[_0x242756(0x282)](_0x55fb26[_0x242756(0x27f)])+'\x20'+_0x55fb26[_0x242756(0x1b6)]+'\x20'+(_0x55fb26[_0x242756(0x27f)]>0x0?'added':'removed'));}else logger[_0x242756(0x20d)]('Portfolio\x20change\x20detected:\x20'+Math[_0x242756(0x282)](_0x55fb26['number'])+'\x20'+_0x55fb26[_0x242756(0x1b6)]+'\x20'+(_0x55fb26[_0x242756(0x27f)]>0x0?_0x242756(0x257):_0x242756(0x260))+_0x242756(0x1f6));}currentCoins=_0x4683dc,currentCoinsAll=_0x399121;}}catch(_0x47a42f){if(!exchangeStopped)await handleError(_0x47a42f,_0x242756(0x1f1));}transactionDetectionOngoing=![];}async function watchTransactions(){await sleep(0x14*0x3e8);while(!![]){!botPaused&&!blockTransactionDetection&&coinsLoaded?(detectLiquidityChange(),await sleep(watchTransactionsInterval)):await sleep(0x3e8);}}async function loadSymbols(){const _0x5551ff=_0x38e2f8;try{markets=await exchange[_0x5551ff(0x1af)](!![]),allSymbols=[],Object[_0x5551ff(0x1d1)](markets)[_0x5551ff(0xbf)](_0x22c349=>{const _0x4b2166=_0x5551ff;_0x22c349[0x1][_0x4b2166(0x108)]&&_0x22c349[0x1][_0x4b2166(0x25e)]&&allSymbols['push'](_0x22c349[0x0]);});}catch(_0x1d9050){markets?logger[_0x5551ff(0x20d)]('Error\x20in\x20loadSymbols():\x20'+_0x1d9050[_0x5551ff(0x1ae)]()):(loading[_0x5551ff(0x195)]=!![],_0x1d9050[_0x5551ff(0x1ae)]()[_0x5551ff(0x1a2)]()[_0x5551ff(0x1f7)](_0x5551ff(0x109))||_0x1d9050[_0x5551ff(0x1ae)]()['toLowerCase']()[_0x5551ff(0x1f7)]('request-time')?(logHistory('error',_0x5551ff(0x163)),loading['error']=_0x5551ff(0x291)):handleErrorNoStop(_0x1d9050,'loadSymbols()',!![]),logHistory('error',_0x5551ff(0x20a)),logHistory(_0x5551ff(0x19b),_0x5551ff(0x1a6)+loadCoinsRetryInterval/0xea60+'\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again'),logger[_0x5551ff(0x20d)](_0x5551ff(0x191),_0x1d9050),emitLoadingProgress(),botPaused=!![],await sleep(loadCoinsRetryInterval),restartBot());}}function validateSymbols(_0xc921ee){let _0xd35896=[];return _0xc921ee['forEach'](_0x4624d1=>{const _0x2c6f91=_0xf90e;!allSymbols[_0x2c6f91(0x1f7)](_0x4624d1)?(logHistory(_0x2c6f91(0x19b),_0x2c6f91(0x26e)+_0x4624d1+'\x20-\x20exclude\x20coin\x20in\x20the\x20configuration'),loading[_0x2c6f91(0x1d3)]=!![],emitLoadingProgress()):_0xd35896[_0x2c6f91(0x1ad)](_0x4624d1);}),_0xd35896;}async function initclient(){const _0x549e2d=_0x38e2f8;proxyEmit(_0x549e2d(0x11b),emittedConfiguration()),proxyEmit(_0x549e2d(0xd5),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x549e2d(0x130),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x2e8765=getNormalizedPerformance();emitPerformance(_0x2e8765),getStartingBalances(_0x2e8765);}async function toggleBotMode(){const _0x7118cf=_0x38e2f8;let _0x23d545=dbConfig[_0x7118cf(0xc3)](_0x7118cf(0x13d))['find']({'botID':botID})['value']();if(_0x23d545){const _0x596ac1=!_0x23d545[_0x7118cf(0xc5)];dbConfig[_0x7118cf(0xc3)](_0x7118cf(0x13d))['find']({'botID':botID})[_0x7118cf(0x1d7)]({'headless':_0x596ac1})[_0x7118cf(0x10f)](),config[_0x7118cf(0xc5)]=_0x596ac1,proxyEmit('configuration',emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x48ad7a=_0x38e2f8;process[_0x48ad7a(0x1b5)]({'updatebotmanager':!![]},_0x35ead7=>{}),logger['debug'](_0x48ad7a(0x110)+config[_0x48ad7a(0xc5)]);}async function loadCoins(_0x4ae18d){const _0x38e707=_0x38e2f8;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x1545af,_0x527b4f=0x0,_0xe16f62=0x0;_0x4ae18d[_0x38e707(0xbf)](_0x3ea6b9=>{const _0x5e9f73=_0x38e707;loading[_0x5e9f73(0xfa)]['push'](_0x3ea6b9);}),loadingCanceled=![];let _0x316dac=![];while(_0x1545af!=_0x4ae18d[_0x38e707(0x1b3)]+maxLoadingProgress){_0x1545af=loadingProgress,_0x4ae18d[_0x38e707(0xbf)](_0x4ec478=>{const _0xb7b2f5=_0x38e707;if(gTicker[noslash(_0x4ec478)]){loading[_0xb7b2f5(0xfa)]=loading[_0xb7b2f5(0xfa)][_0xb7b2f5(0xd6)](_0x1fafd5=>_0x1fafd5!=_0x4ec478);if(!watchedSymbols['includes'](_0x4ec478))watchedSymbols['push'](_0x4ec478);_0x1545af++;}}),loading[_0x38e707(0xc6)]=Math['round'](_0x1545af/(_0x4ae18d[_0x38e707(0x1b3)]+maxLoadingProgress)*0x64);loading[_0x38e707(0xc6)]!=0x64&&(_0xe16f62>0x1e*0x5&&(loading[_0x38e707(0x1d3)]=!![],emitLoadingProgress()),_0xe16f62>0x78*0x5&&!_0x316dac&&(_0x316dac=!![],logHistory(_0x38e707(0x19b),_0x38e707(0xe9)+loading['remainingSymbols'][_0x38e707(0x239)](',\x20')+_0x38e707(0x248)),logHistory('error','Pausing\x20for\x20'+loadCoinsRetryInterval/0xea60+'\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again'),loadingCanceled=!![],await sleep(loadCoinsRetryInterval),restartBot()));if(loadingCanceled){loading[_0x38e707(0x195)]=!![],emitLoadingProgress();break;}else _0x527b4f!=loading[_0x38e707(0xc6)]&&(_0x527b4f=loading[_0x38e707(0xc6)],emitLoadingProgress()),_0xe16f62++,await sleep(0xc8);}_0x1545af==_0x4ae18d[_0x38e707(0x1b3)]+maxLoadingProgress&&(coinsLoaded=!![],process[_0x38e707(0x1b5)]({'status':'enabled','live':_0x38e707(0x1a7)},_0x703d3f=>{}),_0x316dac&&logHistory(_0x38e707(0x210),'All\x20coin\x20data\x20loaded\x20-\x20bot\x20started'));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x4f569a=_0x38e2f8;proxyEmit('configuration',{...emittedConfiguration(),'configstate':_0x4f569a(0xf5)});}function emitLoadingProgress(){proxyEmit('coin-loading-progress',loading);}async function getFiat(){let _0x5f3e93=gTicker[stablecoins['eur']['coin']],_0x543e8e=gTicker[stablecoins['usd']['coin']];return{'eur':Number(_0x5f3e93),'usd':Number(_0x543e8e)};}function capitalize(_0x5975d4){const _0x36eaa=_0x38e2f8;return _0x5975d4[_0x36eaa(0x27b)](0x0,0x1)[_0x36eaa(0x1fd)]()+_0x5975d4[_0x36eaa(0x27b)](0x1);}function supportedExchanges(){const _0x5d1734=_0x38e2f8,_0x29b4ae=['ws','fetchTickers',_0x5d1734(0x19f),_0x5d1734(0x20e),_0x5d1734(0x225),_0x5d1734(0x23f),_0x5d1734(0x17c),_0x5d1734(0x11f),'fetchBalance'];let _0x2f7f4e=[],_0x1dc8b4=[],_0x2cda56=ccxt[_0x5d1734(0x124)][_0x5d1734(0xd5)];_0x2cda56[_0x5d1734(0xbf)](_0x1c8c4a=>{const _0x2e0a4c=_0x5d1734;try{const _0x17c97f=new ccxt[(_0x2e0a4c(0x124))][_0x1c8c4a]();_0x1dc8b4[_0x2e0a4c(0x1ad)](_0x17c97f);}catch(_0x48dfb0){}}),_0x1dc8b4[_0x5d1734(0xbf)](_0x5e6e02=>{const _0x48e963=_0x5d1734;let _0x321504=0x0;_0x29b4ae[_0x48e963(0xbf)](_0x10a43b=>{const _0x44d592=_0x48e963;_0x10a43b in _0x5e6e02[_0x44d592(0x12d)]&&_0x5e6e02[_0x44d592(0x12d)][_0x10a43b]&&_0x321504++;}),_0x321504==_0x29b4ae[_0x48e963(0x1b3)]&&(!excludedExchanges[_0x48e963(0x1f7)](_0x5e6e02['id'])&&_0x2f7f4e[_0x48e963(0x1ad)](capitalize(_0x5e6e02['id'])));});let _0x222ae7=[];return _0x2cda56[_0x5d1734(0xbf)](_0x16452d=>{const _0xb3cbf3=_0x5d1734;_0x16452d=capitalize(_0x16452d);if(!_0x2f7f4e['includes'](_0x16452d))_0x222ae7[_0xb3cbf3(0x1ad)](_0x16452d);}),_0x2f7f4e;}function setStartDatePerformance(){const _0x38ebc9=_0x38e2f8;if(config&&config[_0x38ebc9(0x279)][0x0][_0x38ebc9(0x14f)][_0x38ebc9(0x1b3)]!=0x0){const _0x52b615=config[_0x38ebc9(0x279)][0x0]['changes'];dbPerformance[_0x38ebc9(0xc3)](_0x38ebc9(0x15b))['find']({'date':config['startdate']})[_0x38ebc9(0x1d7)]({'coins':_0x52b615})[_0x38ebc9(0x10f)]();}}function calculatePnL(_0x4c8be2,_0x4472db,_0x5d9857,_0x21f0d9,_0x17c8f7,_0x130af8){const _0x54950e=_0x38e2f8;!_0x4c8be2[_0x54950e(0x1f7)]('/'+config['basecoin'])&&(_0x5d9857=_0x5d9857==_0x54950e(0x1bb)?_0x54950e(0x24a):_0x54950e(0x1bb));!_0x130af8[_0x4472db]&&(_0x130af8[_0x4472db]={'number':0x0,'sells':0x0,'buys':0x0,'breakeven':0x0,'realizedPnL':0x0});let _0x413c5b=0x0,_0x5e04ed,_0x2140c9;if(_0x5d9857=='buy')_0x2140c9=_0x130af8[_0x4472db][_0x54950e(0x27f)]*_0x130af8[_0x4472db]['breakeven']+_0x17c8f7*_0x21f0d9,_0x130af8[_0x4472db]['number']+=_0x21f0d9,_0x130af8[_0x4472db][_0x54950e(0x21e)]=_0x130af8[_0x4472db][_0x54950e(0x27f)]!=0x0?_0x2140c9/_0x130af8[_0x4472db][_0x54950e(0x27f)]:0x0,_0x130af8[_0x4472db][_0x54950e(0x178)]++;else _0x5d9857==_0x54950e(0x24a)&&(_0x5e04ed=Math[_0x54950e(0x1c5)](_0x130af8[_0x4472db]['number'],_0x21f0d9),_0x413c5b=(_0x17c8f7-_0x130af8[_0x4472db][_0x54950e(0x21e)])*_0x5e04ed,_0x2140c9=Math[_0x54950e(0x199)](_0x130af8[_0x4472db][_0x54950e(0x27f)]*_0x130af8[_0x4472db]['breakeven']-_0x5e04ed*_0x130af8[_0x4472db]['breakeven'],0x0),_0x130af8[_0x4472db]['number']-=_0x5e04ed,_0x130af8[_0x4472db][_0x54950e(0x21e)]=_0x130af8[_0x4472db][_0x54950e(0x27f)]!=0x0?_0x2140c9/_0x130af8[_0x4472db][_0x54950e(0x27f)]:0x0,_0x130af8[_0x4472db][_0x54950e(0xce)]+=_0x413c5b,_0x130af8[_0x4472db][_0x54950e(0x23d)]++);return _0x413c5b;}async function generatePnL(){const _0x143009=_0x38e2f8;pnlGenerationNeeded=![],logger[_0x143009(0x20d)](_0x143009(0x254));const _0x5e605a=dbLogs['get'](_0x143009(0xdf))[_0x143009(0x145)]();let _0x18cc22={},_0x79f465=0x0,_0x5b38f5=0x0,_0x380500=config[_0x143009(0x156)];const _0x3b5984=fns[_0x143009(0x162)](_0x380500,'yyyy/MM/dd',new Date()),_0x3e68b5=new Date();let _0x5ecc34=0x0;for(let _0x3f1203=_0x3b5984;!fns['isBefore'](_0x3e68b5,_0x3f1203);_0x3f1203=fns['addDays'](_0x3f1203,0x1)){const _0x4a6a3f=fns['format'](_0x3f1203,_0x143009(0xd0));while(_0x79f465<_0x5e605a['length']){const _0xb48141=new Date(_0x5e605a[_0x79f465][_0x143009(0x227)]);if(fns[_0x143009(0x244)](_0xb48141,_0x3f1203))_0x79f465++;else{if(_0x5e605a[_0x79f465]['time'][_0x143009(0x1f7)](_0x4a6a3f)){const _0x2bcf4c=_0x5e605a[_0x79f465];if(_0x2bcf4c['type']===_0x143009(0xd9)&&(_0x2bcf4c[_0x143009(0x27e)][_0x143009(0x1f7)](_0x143009(0x1e5))||_0x2bcf4c[_0x143009(0x27e)][_0x143009(0x1f7)](_0x143009(0x238)))){const _0x16e742=_0x2bcf4c[_0x143009(0x27e)][_0x143009(0xf6)](/([A-Z]+\/[A-Z]+) (sell|buy) #([\d.]+) @([\d.]+)/);if(_0x16e742){const [,_0x1468ec,_0x573ef6,_0x340ed9,_0x5a5cfd]=_0x16e742,_0x68bac1=_0x1468ec[_0x143009(0x1f7)]('/'+config[_0x143009(0x1c9)])?_0x1468ec['split']('/')[0x0]:_0x1468ec[_0x143009(0xd8)]('/')[0x1],_0x54312d=calculatePnL(_0x1468ec,_0x68bac1,_0x573ef6,parseFloat(_0x340ed9),parseFloat(_0x5a5cfd),_0x18cc22);_0x5b38f5+=_0x54312d;}}_0x79f465++;}else break;}}dbPerformance[_0x143009(0xc3)](_0x143009(0x15b))[_0x143009(0x144)]({'date':_0x4a6a3f})['assign']({'pnl':_0x5b38f5})[_0x143009(0x10f)]();}dbCoinResults[_0x143009(0x261)](_0x143009(0x218),_0x18cc22)['write'](),logger[_0x143009(0x20d)]('Generated\x20PnL\x20data');const _0x1aef1c=getNormalizedPerformance();emitPerformance(_0x1aef1c);}async function updatePnL(_0x551162){const _0x1ed0a8=_0x38e2f8,{symbol:_0x5d2e5f,coin:_0x5011ac,amount:_0x31a51c,price:_0x16cf8a,side:_0x456279,reverse:_0x4f8f00}=_0x551162;let _0x56400a=dbCoinResults[_0x1ed0a8(0xc3)](_0x1ed0a8(0x218))[_0x1ed0a8(0x145)]();const _0x56ba43=calculatePnL(_0x5d2e5f,_0x5011ac,_0x456279,_0x31a51c,_0x16cf8a,_0x56400a);dbCoinResults[_0x1ed0a8(0x261)](_0x1ed0a8(0x218),_0x56400a)['write']();const _0x24aaa0=getTimeStamp()[_0x1ed0a8(0xd8)]('\x20')[0x0];let _0x2bd61d=dbPerformance[_0x1ed0a8(0xc3)](_0x1ed0a8(0x15b))['find']({'date':_0x24aaa0})[_0x1ed0a8(0x145)]();_0x2bd61d?(_0x2bd61d[_0x1ed0a8(0x288)]+=_0x56ba43,dbPerformance[_0x1ed0a8(0xc3)](_0x1ed0a8(0x15b))[_0x1ed0a8(0x144)]({'date':_0x24aaa0})['assign'](_0x2bd61d)[_0x1ed0a8(0x10f)]()):await storePerformance();const _0x4b1990=getNormalizedPerformance();emitPerformance(_0x4b1990);}async function validate24hChanges(){const _0x43f51d=_0x38e2f8;for(const _0x70c2ba of currentCoins){if(_0x70c2ba['coin']!=config[_0x43f51d(0x1c9)]){let _0xebf05d;_0x70c2ba[_0x43f51d(0x271)]?_0xebf05d=formatResult((0x1/(gChange[_0x70c2ba[_0x43f51d(0x135)]]/0x64+0x1)-0x1)*0x64,0x3):_0xebf05d=gChange[_0x70c2ba[_0x43f51d(0x135)]],_0xebf05d<config[_0x43f51d(0x126)]&&(logHistory('error',_0x70c2ba[_0x43f51d(0x1b6)]+_0x43f51d(0x224)+_0xebf05d+'%'),logHistory(_0x43f51d(0x19b),_0x43f51d(0x275)),logHistory(_0x43f51d(0x19b),_0x43f51d(0x26b)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x353b44,_0x56949a){const _0x474084=_0x38e2f8;if(!_0x353b44)return!![];const _0x44d4cb=_0x56949a[_0x474084(0xd8)]('.'),_0x51b38e=_0x353b44['split']('.');for(var _0xb15085=0x0;_0xb15085<_0x51b38e['length'];_0xb15085++){const _0x301f9d=~~_0x51b38e[_0xb15085],_0x39c635=~~_0x44d4cb[_0xb15085];if(_0x301f9d<_0x39c635)return!![];if(_0x301f9d>_0x39c635)return![];}return![];}async function oneTimeMigration(){const _0x5c5e90=_0x38e2f8;let _0x341f7b=dbLogs[_0x5c5e90(0xc3)](_0x5c5e90(0x1a1))[_0x5c5e90(0x145)]();if(isOlderVersion(_0x341f7b,'2.3.5')){let _0x3ee772=[];const _0x388829=dbLogs[_0x5c5e90(0xc3)](_0x5c5e90(0xdf))[_0x5c5e90(0x145)]();_0x388829[_0x5c5e90(0xbf)](_0x5c00c9=>{const _0x2908e6=_0x5c5e90;_0x3ee772[_0x2908e6(0x1ad)]({'time':_0x5c00c9['time'],'type':_0x5c00c9['type'],'event':_0x5c00c9[_0x2908e6(0x27e)]});}),dbLogs[_0x5c5e90(0xc3)](_0x5c5e90(0xdf))[_0x5c5e90(0x1d7)](_0x3ee772)[_0x5c5e90(0x10f)]();}let _0x52c4a0=dbConfig[_0x5c5e90(0xc3)](_0x5c5e90(0x1a1))[_0x5c5e90(0x145)]();if(isOlderVersion(_0x52c4a0,'2.3.5')){let _0x116365=dbConfig['get'](_0x5c5e90(0x13d))[_0x5c5e90(0x144)]({'botID':botID})[_0x5c5e90(0x145)]();if(_0x116365){let _0x7f4d51=[];_0x116365[_0x5c5e90(0x1b1)]['forEach'](_0xb175e9=>{const _0x43698=_0x5c5e90;_0x7f4d51['push']({'coin':_0xb175e9[_0x43698(0x1b6)],'number':_0xb175e9['startnumber'],'price':_0xb175e9[_0x43698(0x103)]}),delete _0xb175e9['startnumber'],delete _0xb175e9[_0x43698(0x103)];});if(_0x7f4d51['length']!==0x0)fs[_0x5c5e90(0x16e)](configbackuppath+('starting-balance-'+botID+_0x5c5e90(0x243)),JSON[_0x5c5e90(0x120)](_0x7f4d51,null,0x4),function(_0x3bcf02){if(_0x3bcf02){}});const _0xc4f599=(_0x4a1199,_0x3dc95e)=>{const _0x1bd877=_0x5c5e90;let _0x471b30=[];_0x3dc95e[_0x1bd877(0xbf)](_0x50fe33=>{const _0x42d9b2=_0x1bd877,_0xb7bd3=_0x4a1199[_0x42d9b2(0x144)](_0x4ecf6d=>_0x4ecf6d[_0x42d9b2(0x1b6)]==_0x50fe33[_0x42d9b2(0x1b6)]);if(!_0xb7bd3)_0x471b30[_0x42d9b2(0x1ad)](_0x50fe33);});let _0x1af749=[];return _0x4a1199['forEach'](_0x23292e=>{const _0x51e83f=_0x1bd877,_0x67bedf=_0x3dc95e[_0x51e83f(0x144)](_0xb740b2=>_0xb740b2[_0x51e83f(0x1b6)]==_0x23292e[_0x51e83f(0x1b6)]);if(!_0x67bedf||_0x67bedf[_0x51e83f(0x27f)]==0x0&&_0x23292e[_0x51e83f(0x27f)]!=0x0)_0x1af749['push'](_0x23292e);}),{'missingDay1':_0x471b30,'notInDay2':_0x1af749};},_0x29100f=dbPerformance['get'](_0x5c5e90(0x15b))[_0x5c5e90(0x295)]()['value']();if(_0x29100f['length']>0x1){const {missingDay1:_0x124039,notInDay2:_0x420bac}=_0xc4f599(_0x7f4d51,_0x29100f[0x1]['coins']);_0x7f4d51=[..._0x7f4d51,..._0x124039],_0x420bac[_0x5c5e90(0xbf)](_0x1ec573=>{const _0x6a0ee6=_0x5c5e90;let _0x1390a2=_0x7f4d51['findIndex'](_0x1fd9cd=>_0x1fd9cd[_0x6a0ee6(0x1b6)]==_0x1ec573['coin']);_0x1390a2!=-0x1&&_0x7f4d51[_0x6a0ee6(0x287)](_0x1390a2,0x1);});}_0x7f4d51[_0x5c5e90(0x16f)]((_0x18597f,_0x2818c2)=>_0x18597f[_0x5c5e90(0x1b6)]>_0x2818c2[_0x5c5e90(0x1b6)]?0x1:_0x2818c2[_0x5c5e90(0x1b6)]>_0x18597f['coin']?-0x1:0x0);let _0xc76318=[{'date':_0x116365[_0x5c5e90(0x156)],'changes':_0x7f4d51}];_0x29100f[_0x5c5e90(0x1b3)]>0x2&&_0x29100f[_0x5c5e90(0xbf)]((_0x7119ab,_0x4fd409)=>{const _0x23133f=_0x5c5e90;if(_0x4fd409>0x0&&_0x4fd409<_0x29100f[_0x23133f(0x1b3)]-0x1){const {missingDay1:_0x2b8490,notInDay2:_0x3e43e5}=_0xc4f599(_0x29100f[_0x4fd409]['coins'],_0x29100f[_0x4fd409+0x1][_0x23133f(0x218)]);_0x7f4d51=[],(_0x2b8490[_0x23133f(0x1b3)]!=0x0||_0x3e43e5[_0x23133f(0x1b3)]!=0x0)&&(_0x2b8490[_0x23133f(0x1b3)]!=0x0&&_0x7f4d51['push'](..._0x2b8490),_0x3e43e5['length']!=0x0&&(_0x3e43e5[_0x23133f(0xbf)](_0x42498b=>{const _0x22602e=_0x23133f;_0x42498b[_0x22602e(0x27f)]=-_0x42498b[_0x22602e(0x27f)];}),_0x7f4d51[_0x23133f(0x1ad)](..._0x3e43e5)),_0x7f4d51[_0x23133f(0x16f)]((_0x3443a1,_0x299a50)=>_0x3443a1[_0x23133f(0x1b6)]>_0x299a50[_0x23133f(0x1b6)]?0x1:_0x299a50['coin']>_0x3443a1[_0x23133f(0x1b6)]?-0x1:0x0),_0xc76318[_0x23133f(0x1ad)]({'date':_0x29100f[_0x4fd409+0x1][_0x23133f(0x26a)],'changes':_0x7f4d51}));}}),dbConfig[_0x5c5e90(0xc3)](_0x5c5e90(0x13d))[_0x5c5e90(0x144)]({'botID':botID})['assign']({..._0x116365,'liquidity':_0xc76318})[_0x5c5e90(0x10f)]();}}if(isOlderVersion(_0x52c4a0,_0x5c5e90(0x1dd))){let _0x39e363=dbConfig['get'](_0x5c5e90(0x13d))[_0x5c5e90(0x144)]({'botID':botID})[_0x5c5e90(0x145)]();if(_0x39e363){const _0x3f428f=_0x39e363[_0x5c5e90(0xf2)],_0x29bd96=_0x3f428f?capitalize(_0x3f428f):_0x5c5e90(0xea);dbConfig['get'](_0x5c5e90(0x13d))[_0x5c5e90(0x144)]({'botID':botID})['assign']({'exchange':_0x29bd96})['write']();}}if(isOlderVersion(_0x52c4a0,_0x5c5e90(0x23a))){let _0x13c4d4=dbConfig[_0x5c5e90(0xc3)](_0x5c5e90(0x13d))['find']({'botID':botID})['value']();if(_0x13c4d4){const _0x4dc9d5=_0x13c4d4[_0x5c5e90(0x25b)],_0xba431e=_0x4dc9d5?_0x5c5e90(0x160):![];dbConfig[_0x5c5e90(0xc3)](_0x5c5e90(0x13d))[_0x5c5e90(0x144)]({'botID':botID})[_0x5c5e90(0x1d7)]({'marketcapEnabled':_0xba431e})[_0x5c5e90(0x10f)]();}}if(isOlderVersion(_0x52c4a0,_0x5c5e90(0xe3))){let _0x5ab44b=dbConfig[_0x5c5e90(0xc3)]('bot')[_0x5c5e90(0x144)]({'botID':botID})['value']();if(_0x5ab44b){const _0xd8646f=_0x5ab44b[_0x5c5e90(0x222)],_0x91a5ce=_0xd8646f?_0x5c5e90(0x116):![];dbConfig[_0x5c5e90(0xc3)](_0x5c5e90(0x13d))[_0x5c5e90(0x144)]({'botID':botID})['assign']({'autoliquidity':_0x91a5ce})['write']();}}let _0x41bc79=dbPerformance[_0x5c5e90(0xc3)](_0x5c5e90(0x1a1))['value']();isOlderVersion(_0x41bc79,_0x5c5e90(0xfc))&&setStartDatePerformance();let _0x2c33ed=dbCoinResults[_0x5c5e90(0xc3)]('version')[_0x5c5e90(0x145)]();if(isOlderVersion(_0x2c33ed,'2.7.1')){let _0x41740c=dbCoinResults[_0x5c5e90(0xc3)](_0x5c5e90(0x218))[_0x5c5e90(0x145)]();if(_0x41740c[_0x5c5e90(0x1b3)]!=0x0)pnlGenerationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x2da0c1=_0x38e2f8;dbConfig[_0x2da0c1(0x261)](_0x2da0c1(0x1a1),serverversion)[_0x2da0c1(0x10f)](),dbPerformance['set'](_0x2da0c1(0x1a1),serverversion)[_0x2da0c1(0x10f)](),dbLogs['set']('version',serverversion)[_0x2da0c1(0x10f)](),dbCoinResults[_0x2da0c1(0x261)](_0x2da0c1(0x1a1),serverversion)[_0x2da0c1(0x10f)]();}function getConfiguration(_0x2b22c0){const _0x54d939=_0x38e2f8;let _0xb8b30a=dbConfig[_0x54d939(0xc3)](_0x54d939(0x13d))[_0x54d939(0x144)]({'botID':_0x2b22c0})[_0x54d939(0x145)]();if(_0xb8b30a){let _0xc07b4=![];typeof _0xb8b30a[_0x54d939(0xc0)]==_0x54d939(0x294)&&(_0xb8b30a={..._0xb8b30a,'threshold':Number(_0xb8b30a[_0x54d939(0xc0)])},_0xc07b4=!![]),_0xb8b30a[_0x54d939(0x126)]==undefined&&(_0xb8b30a={..._0xb8b30a,'change24h':-0x14},_0xc07b4=!![]),_0xb8b30a[_0x54d939(0x21c)]==undefined&&(_0xb8b30a={..._0xb8b30a,'fiat':_0x54d939(0x141)},_0xc07b4=!![]),_0xb8b30a[_0x54d939(0xe4)]==undefined&&(_0xb8b30a={..._0xb8b30a,'onepagemode':settings[_0x54d939(0xe4)]},_0xc07b4=!![]),_0xb8b30a[_0x54d939(0x28f)]==undefined&&(_0xb8b30a={..._0xb8b30a,'colorscheme':_0x54d939(0x21a)},_0xc07b4=!![]),_0xb8b30a[_0x54d939(0x222)]==undefined&&(_0xb8b30a={..._0xb8b30a,'autoliquidity':_0x54d939(0x116)},_0xc07b4=!![]),_0xb8b30a[_0x54d939(0x1fe)]==undefined&&(_0xb8b30a={..._0xb8b30a,'marketcapApi':settings[_0x54d939(0x1fe)]?!![]:![]},_0xc07b4=!![]),_0xb8b30a[_0x54d939(0x25b)]==undefined&&(_0xb8b30a={..._0xb8b30a,'marketcapEnabled':![]},_0xc07b4=!![]),_0xb8b30a[_0x54d939(0x1a3)]==undefined&&(_0xb8b30a={..._0xb8b30a,'sandbox':![]},_0xc07b4=!![]),_0xc07b4&&(_0xb8b30a={'botID':_0xb8b30a[_0x54d939(0x18d)],'exchange':_0xb8b30a[_0x54d939(0xf2)],'apiKey':_0xb8b30a['apiKey'],'apiSecret':_0xb8b30a[_0x54d939(0xe5)],'apiPassword':_0xb8b30a[_0x54d939(0x278)],'basecoin':_0xb8b30a[_0x54d939(0x1c9)],'botname':_0xb8b30a[_0x54d939(0x1df)],'showname':_0xb8b30a[_0x54d939(0x101)],'threshold':_0xb8b30a[_0x54d939(0xc0)],'ordertype':_0xb8b30a[_0x54d939(0x102)],'timeout':_0xb8b30a[_0x54d939(0x1d3)],'fiat':_0xb8b30a[_0x54d939(0x21c)],'startdate':_0xb8b30a['startdate'],'recreate':_0xb8b30a[_0x54d939(0x1b4)],'timeshift':_0xb8b30a[_0x54d939(0x19a)],'onepagemode':_0xb8b30a['onepagemode'],'headless':_0xb8b30a[_0x54d939(0xc5)],'cooldown':_0xb8b30a[_0x54d939(0xef)],'change24h':_0xb8b30a[_0x54d939(0x126)],'emojibuy':_0xb8b30a[_0x54d939(0x22a)],'emojisell':_0xb8b30a[_0x54d939(0x18a)],'colorscheme':_0xb8b30a[_0x54d939(0x28f)],'marketcapApi':_0xb8b30a[_0x54d939(0x1fe)],'marketcapEnabled':_0xb8b30a['marketcapEnabled'],'sandbox':_0xb8b30a[_0x54d939(0x1a3)],'portfolio':_0xb8b30a[_0x54d939(0x1b1)],'autoliquidity':_0xb8b30a[_0x54d939(0x222)],'liquidity':_0xb8b30a[_0x54d939(0x279)],'openOrders':_0xb8b30a[_0x54d939(0x121)]},dbConfig['get'](_0x54d939(0x13d))[_0x54d939(0x233)]()[_0x54d939(0x10f)](),dbConfig['get'](_0x54d939(0x13d))[_0x54d939(0x1ad)](_0xb8b30a)[_0x54d939(0x10f)]());}else _0xb8b30a={'botID':_0x2b22c0,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x54d939(0x231)+_0x2b22c0,'showname':![],'threshold':0x3,'ordertype':'market','timeout':0x14,'fiat':_0x54d939(0x141),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x54d939(0x19a)],'onepagemode':settings[_0x54d939(0xe4)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x54d939(0x21a),'marketcapApi':settings[_0x54d939(0x1fe)]?!![]:![],'marketcapEnabled':![],'sandbox':![],'portfolio':[],'autoliquidity':_0x54d939(0x116),'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0xb8b30a;}function emittedConfiguration(){const _0x4da2f3=_0x38e2f8;let _0x101abc;if(config[_0x4da2f3(0x1e3)]=='')_0x101abc={...config,'configstate':_0x4da2f3(0x207)};else config['apiKey']==_0x4da2f3(0x237)?_0x101abc={...config,'configstate':_0x4da2f3(0x273)}:(_0x101abc={...config,'apiKey':'************','apiSecret':_0x4da2f3(0x152)},config['apiPassword']&&(_0x101abc[_0x4da2f3(0x278)]=_0x4da2f3(0x152)));return _0x101abc[_0x4da2f3(0x234)]=enableFiatToggle,_0x101abc;}function getSettings(){const _0x3a2f3e=_0x38e2f8;return dbSettings[_0x3a2f3e(0xc3)](_0x3a2f3e(0x169))['value']();}function getSecure(){const _0x31c6ad=_0x38e2f8;return dbSecure[_0x31c6ad(0xc3)](_0x31c6ad(0x105))[_0x31c6ad(0x145)]()||{};}function updateTimeshift(_0x5ce944){const _0x50fab3=_0x38e2f8;let _0x3b4d05=dbConfig[_0x50fab3(0xc3)](_0x50fab3(0x13d))[_0x50fab3(0x144)]({'botID':botID})[_0x50fab3(0x145)]();_0x3b4d05&&dbConfig[_0x50fab3(0xc3)](_0x50fab3(0x13d))['find']({'botID':botID})[_0x50fab3(0x1d7)]({'timeshift':_0x5ce944})[_0x50fab3(0x10f)](),config['timeshift']=_0x5ce944,proxyEmit(_0x50fab3(0x11b),emittedConfiguration());}function updateOnepagemode(_0x166135){const _0x3e1721=_0x38e2f8;let _0x34eb49=dbConfig[_0x3e1721(0xc3)](_0x3e1721(0x13d))['find']({'botID':botID})[_0x3e1721(0x145)]();_0x34eb49&&dbConfig['get'](_0x3e1721(0x13d))[_0x3e1721(0x144)]({'botID':botID})[_0x3e1721(0x1d7)]({'onepagemode':_0x166135})[_0x3e1721(0x10f)](),config['onepagemode']=_0x166135,proxyEmit(_0x3e1721(0x11b),emittedConfiguration());}function updateMarketcapApi(_0x48384d){const _0x2c73ed=_0x38e2f8,_0xdf4182=_0x48384d?!![]:![];let _0x1a8e93=dbConfig[_0x2c73ed(0xc3)](_0x2c73ed(0x13d))['find']({'botID':botID})[_0x2c73ed(0x145)]();_0x1a8e93&&dbConfig[_0x2c73ed(0xc3)]('bot')[_0x2c73ed(0x144)]({'botID':botID})[_0x2c73ed(0x1d7)]({'marketcapApi':_0xdf4182})[_0x2c73ed(0x10f)](),config[_0x2c73ed(0x1fe)]=_0xdf4182,getMarketCap(),proxyEmit('configuration',emittedConfiguration());}async function storeConfiguration(_0x31ad99){const _0xadbc2a=_0x38e2f8;logger['debug']('Saving\x20configuration');_0x31ad99[_0xadbc2a(0x186)]&&delete _0x31ad99[_0xadbc2a(0x186)];if(pidBalances)clearTimeout(pidBalances);setBlockTransactionDetection(!![]);let _0x155b6c=![],_0x3105b5=![],_0xa4fc9b=[];_0x31ad99[_0xadbc2a(0x1b1)][_0xadbc2a(0xbf)](_0x5d7c0e=>{const _0x188814=_0xadbc2a;if(!_0x5d7c0e[_0x188814(0x1d5)]&&_0x5d7c0e[_0x188814(0x1b6)]!=_0x31ad99['basecoin'])_0xa4fc9b[_0x188814(0x1ad)](_0x5d7c0e[_0x188814(0x135)]);}),_0xa4fc9b[_0xadbc2a(0xbf)](_0x599c5b=>{const _0x1371f3=_0xadbc2a,_0x5cddc5=currentCoins[_0x1371f3(0x144)](_0x3c4425=>_0x3c4425['symbol']==_0x599c5b);!_0x5cddc5&&(_0x155b6c=!![]);}),currentCoins[_0xadbc2a(0xbf)](_0x4cdb1b=>{const _0xd9b29d=_0xadbc2a;if(_0x4cdb1b[_0xd9b29d(0x1b6)]!=config[_0xd9b29d(0x1c9)]){const _0x2538c7=_0xa4fc9b[_0xd9b29d(0x144)](_0x14c835=>_0x14c835==_0x4cdb1b[_0xd9b29d(0x135)]);!_0x2538c7&&(_0x155b6c=!![]);}}),_0x31ad99[_0xadbc2a(0x1b1)][_0xadbc2a(0xbf)](_0x35e107=>{const _0x478ae4=_0xadbc2a,_0x5968ae=config[_0x478ae4(0x1b1)][_0x478ae4(0x144)](_0x29609c=>_0x29609c['coin']==_0x35e107[_0x478ae4(0x1b6)]);if(_0x5968ae&&_0x35e107[_0x478ae4(0x1b7)]!=_0x5968ae[_0x478ae4(0x1b7)])_0x3105b5=!![];});let _0x225ab0=dbConfig[_0xadbc2a(0xc3)]('bot')['find']({'botID':botID})[_0xadbc2a(0x145)]();_0x31ad99={..._0x31ad99,'apiKey':decryptRSA(secure[_0xadbc2a(0xdc)],_0x31ad99[_0xadbc2a(0x1e3)]),'apiSecret':decryptRSA(secure[_0xadbc2a(0xdc)],_0x31ad99[_0xadbc2a(0xe5)])};_0x31ad99[_0xadbc2a(0x278)]&&(_0x31ad99[_0xadbc2a(0x278)]=decryptRSA(secure[_0xadbc2a(0xdc)],_0x31ad99[_0xadbc2a(0x278)]));let _0x16e16f=![];if(_0x225ab0){_0x31ad99[_0xadbc2a(0x1e3)]=='************'?_0x31ad99[_0xadbc2a(0x1e3)]=config[_0xadbc2a(0x1e3)]:_0x16e16f=!![];_0x31ad99[_0xadbc2a(0xe5)]==_0xadbc2a(0x152)?_0x31ad99[_0xadbc2a(0xe5)]=config[_0xadbc2a(0xe5)]:_0x16e16f=!![];if(_0x31ad99['apiPassword']==_0xadbc2a(0x152))_0x31ad99['apiPassword']=config[_0xadbc2a(0x278)];else{if(_0x31ad99['apiPassword'])_0x16e16f=!![];}dbConfig[_0xadbc2a(0xc3)](_0xadbc2a(0x13d))[_0xadbc2a(0x144)]({'botID':botID})[_0xadbc2a(0x1d7)](_0x31ad99)[_0xadbc2a(0x10f)]();}else dbConfig[_0xadbc2a(0xc3)](_0xadbc2a(0x13d))[_0xadbc2a(0x1ad)](_0x31ad99)['write'](),_0x16e16f=!![],process[_0xadbc2a(0x1b5)]({'status':_0xadbc2a(0x27a),'live':_0xadbc2a(0x1a7)},_0x1dbe03=>{});process['send']({'botname':_0x31ad99['botname']},_0x179f22=>{}),config={..._0x31ad99},updateBotManager(),proxyEmit(_0xadbc2a(0x187)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x16e16f)await reset(!![]);else _0x155b6c||_0x3105b5?await reset(![]):getBalances();setBlockTransactionDetection(![]);}async function storeHeadless(_0x49b51e){const _0x238679=_0x38e2f8,_0x155d15={...config,'headless':_0x49b51e['headless']};let _0x535239=dbConfig['get'](_0x238679(0x13d))['find']({'botID':botID})[_0x238679(0x145)]();_0x535239&&dbConfig[_0x238679(0xc3)]('bot')[_0x238679(0x144)]({'botID':botID})['assign'](_0x155d15)[_0x238679(0x10f)](),config={..._0x155d15},updateBotManager(),proxyEmit(_0x238679(0x11b),emittedConfiguration());}async function storeFiat(_0x19e735){const _0x5a7fa9=_0x38e2f8,_0x83154e={...config,'fiat':_0x19e735};let _0x1a4d97=dbConfig[_0x5a7fa9(0xc3)](_0x5a7fa9(0x13d))[_0x5a7fa9(0x144)]({'botID':botID})[_0x5a7fa9(0x145)]();_0x1a4d97&&dbConfig[_0x5a7fa9(0xc3)]('bot')[_0x5a7fa9(0x144)]({'botID':botID})[_0x5a7fa9(0x1d7)](_0x83154e)[_0x5a7fa9(0x10f)](),config={..._0x83154e},proxyEmit(_0x5a7fa9(0x11b),emittedConfiguration());}function resetHistory(){const _0x21cd92=_0x38e2f8;logger[_0x21cd92(0x1cd)](_0x21cd92(0xd2));try{if(fs[_0x21cd92(0x180)](path[_0x21cd92(0x239)](configpath,'bot-'+botID+_0x21cd92(0x25f))))fs['unlinkSync'](path[_0x21cd92(0x239)](configpath,_0x21cd92(0xdb)+botID+'-events.json'));if(fs[_0x21cd92(0x180)](path['join'](configpath,_0x21cd92(0xdb)+botID+_0x21cd92(0x138))))fs[_0x21cd92(0x1b8)](path[_0x21cd92(0x239)](configpath,'bot-'+botID+_0x21cd92(0x138)));if(fs[_0x21cd92(0x180)](path[_0x21cd92(0x239)](configpath,_0x21cd92(0xdb)+botID+'-results.json')))fs['unlinkSync'](path['join'](configpath,'bot-'+botID+_0x21cd92(0x14e)));}catch(_0x2ff6a0){if(_0x2ff6a0)logger[_0x21cd92(0x1cd)](_0x21cd92(0x251),_0x2ff6a0);}const _0x1141fb=getDate();let _0x54cbb1=[];currentCoins[_0x21cd92(0xbf)](_0x1dfeb8=>{const _0x424397=_0x21cd92;_0x54cbb1[_0x424397(0x1ad)]({'coin':_0x1dfeb8[_0x424397(0x1b6)],'number':_0x1dfeb8[_0x424397(0x27f)],'price':_0x1dfeb8[_0x424397(0x184)]});});let _0x291a49=dbConfig['get']('bot')[_0x21cd92(0x144)]({'botID':botID})['value']();_0x291a49&&(dbConfig[_0x21cd92(0xc3)](_0x21cd92(0x13d))[_0x21cd92(0x144)]({'botID':botID})['assign']({'liquidity':[{'date':_0x1141fb,'changes':_0x54cbb1}]})[_0x21cd92(0x10f)](),config[_0x21cd92(0x279)]=[]),restartBot(!![]);}function noslash(_0x20c401){const _0x51498a=_0x38e2f8;return _0x20c401[_0x51498a(0x139)]('/','');}function updateHighestFee(_0x426b4d){const _0x37679b=_0x38e2f8;if(_0x426b4d[_0x37679b(0x271)]){let _0x44f5f9={'filled':_0x426b4d[_0x37679b(0x283)]*_0x426b4d['price'],'amount':_0x426b4d[_0x37679b(0x283)]*_0x426b4d[_0x37679b(0x1d9)],'side':_0x426b4d['side']==_0x37679b(0x24a)?'buy':_0x37679b(0x24a),'price':0x1/_0x426b4d[_0x37679b(0x1d9)]};_0x426b4d={..._0x426b4d,..._0x44f5f9};}const _0x5d5690=defaultFee*_0x426b4d[_0x37679b(0x283)]*_0x426b4d[_0x37679b(0x1d9)];lastFees[_0x37679b(0x12e)]['length']===0x14&&lastFees[_0x37679b(0x12e)]['shift'](),lastFees[_0x37679b(0x12e)][_0x37679b(0x1ad)](_0x5d5690),lastFees[_0x37679b(0x284)]=Math['max'](...lastFees[_0x37679b(0x12e)]);}async function updateNumberCoinsCcxt(_0x506b40){const _0x81c5a4=_0x38e2f8;logger[_0x81c5a4(0x20d)](_0x81c5a4(0x208)+_0x506b40[_0x81c5a4(0x135)]+_0x81c5a4(0x194)+_0x506b40['status']+'\x20|\x20'+_0x506b40['filled']+_0x81c5a4(0x289)+_0x506b40[_0x81c5a4(0x1ce)]+_0x81c5a4(0x194)+_0x506b40['id']);let _0x461688=_0x506b40['status'],_0x31c490=![];currentCoins[_0x81c5a4(0xbf)](_0x15e677=>{const _0x6896fb=_0x81c5a4;_0x15e677['symbol']==_0x506b40[_0x6896fb(0x135)]&&(_0x31c490=!![]);});if(!_0x31c490)return;const _0x44ad8c=currentCoins[_0x81c5a4(0x144)](_0xdb16b2=>_0xdb16b2[_0x81c5a4(0x135)]==_0x506b40[_0x81c5a4(0x135)]),_0x2346c7=_0x44ad8c[_0x81c5a4(0x1b6)],_0xf10498=_0x230314=>{const _0xa38f4f=_0x81c5a4,_0x3379d0=currentCoins[_0xa38f4f(0x144)](_0x3b2d0b=>_0x3b2d0b['symbol']==_0x506b40[_0xa38f4f(0x135)]);if(_0x3379d0)_0x3379d0[_0xa38f4f(0x115)]=_0x230314;};let _0x1e1ab6=![];for(const _0x3112ab of lastOrders){const _0x248208=0x64,_0x35f0e0=0x1388;let _0x551d52=0x0;while(!_0x3112ab['orderId']&&_0x551d52*_0x248208<_0x35f0e0){_0x551d52++,await sleep(_0x248208);}if(_0x551d52>0x0)logger[_0x81c5a4(0x20d)](_0x81c5a4(0x1db)+_0x551d52*_0x248208/0x3e8+_0x81c5a4(0x1a5));_0x3112ab['orderId']==_0x506b40['id']&&(_0x1e1ab6=!![]);}if(_0x461688==_0x81c5a4(0x28b)){_0xf10498(_0x81c5a4(0x28b));if(_0x506b40[_0x81c5a4(0x283)]>0x0&&_0x506b40[_0x81c5a4(0x283)]<_0x506b40[_0x81c5a4(0x1ce)]){if(_0x1e1ab6){setBlockTransactionDetection(!![]),logger[_0x81c5a4(0x20d)](_0x81c5a4(0x1e1)+_0x506b40[_0x81c5a4(0x283)]+_0x81c5a4(0x241)+_0x506b40['id']);const _0x4329c8=await getCoins(balanceUpdateDelay,undefined,undefined,_0x2346c7);[currentCoins,currentCoinsAll]=_0x4329c8,setBlockTransactionDetection(![]);}else logger[_0x81c5a4(0x20d)](_0x81c5a4(0x1e1)+_0x506b40[_0x81c5a4(0x283)]+')\x20unknown\x20order:\x20'+_0x506b40['id']),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay);}}else{if(_0x461688=='canceled'){_0xf10498(_0x81c5a4(0xe7)),lastOrders=lastOrders[_0x81c5a4(0xd6)](_0x26fb06=>_0x26fb06[_0x81c5a4(0x135)]!=_0x506b40[_0x81c5a4(0x135)]);const _0x201d67=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x201d67,setBlockTransactionDetection(![]),await getOpenOrders(),handleOpenOrders();}else{if(_0x461688=='closed'){if(lastOrders)for(const _0x2bd9aa of lastOrders){if(_0x2bd9aa['orderId']==_0x506b40['id']){logger[_0x81c5a4(0x20d)](_0x81c5a4(0x1c2)+_0x506b40['id']),_0x1e1ab6=!![];if(_0x2bd9aa[_0x81c5a4(0x283)]==0x0){setBlockTransactionDetection(!![]),logger['debug'](_0x81c5a4(0x1eb)+_0x506b40['id']);if(_0x506b40[_0x81c5a4(0x26c)])_0x2bd9aa['price']=_0x506b40[_0x81c5a4(0x26c)];else{if(_0x506b40['price'])_0x2bd9aa[_0x81c5a4(0x1d9)]=_0x506b40[_0x81c5a4(0x1d9)];else{}}_0x2bd9aa['filled']=_0x506b40[_0x81c5a4(0x283)],updateHighestFee(_0x2bd9aa);const _0x337893=await getCoins(balanceUpdateDelay,undefined,undefined,_0x2346c7);[currentCoins,currentCoinsAll]=_0x337893,setBlockTransactionDetection(![]),await validateOrders(),_0xf10498(_0x81c5a4(0x283)),_0x2bd9aa[_0x81c5a4(0x1ac)]={'currency':_0x506b40[_0x81c5a4(0x1ac)]?_0x506b40[_0x81c5a4(0x1ac)]['currency']:null,'cost':_0x506b40[_0x81c5a4(0x1ac)]?_0x506b40[_0x81c5a4(0x1ac)]['cost']:0x0},await updatePnL(_0x2bd9aa);}}}!_0x1e1ab6&&(logger[_0x81c5a4(0x20d)](_0x81c5a4(0x1fa)+_0x506b40['id']),_0xf10498(_0x81c5a4(0x283)),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay),await updateOpenOrders(),handleOpenOrders());}}}if(lastBalances){let _0x4d1566=JSON['parse'](lastBalances[_0x81c5a4(0x1b1)]);const _0x199d1b=_0x4d1566['find'](_0x30deec=>_0x30deec[_0x81c5a4(0x135)]==_0x506b40[_0x81c5a4(0x135)]);if(_0x199d1b){if(_0x461688==_0x81c5a4(0x28b))_0x199d1b[_0x81c5a4(0x115)]=_0x199d1b[_0x81c5a4(0x115)]=='filled'?_0x81c5a4(0x283):_0x81c5a4(0x28b);else{if(_0x461688==_0x81c5a4(0xe7))_0x199d1b[_0x81c5a4(0x115)]=_0x199d1b[_0x81c5a4(0x115)]==_0x81c5a4(0x283)?'filled':_0x81c5a4(0xe7);else _0x461688==_0x81c5a4(0x1ba)&&(_0x199d1b['orderstatus']=_0x81c5a4(0x283));}}lastBalances={...lastBalances,'portfolio':JSON[_0x81c5a4(0x120)](_0x4d1566)},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){await getOpenOrders();let _0x34a9be=![];currentCoins['forEach'](_0x6ae072=>{const _0xba9a25=_0xf90e;_0x34a9be=allOpenOrders[_0xba9a25(0x144)](_0x551f1d=>_0x551f1d['symbol']==_0x6ae072[_0xba9a25(0x135)]),_0x6ae072[_0xba9a25(0x115)]=_0x34a9be?_0xba9a25(0x28b):_0xba9a25(0x217);});}async function fetchBalance(_0x2d6fb7=!![]){const _0x431b3a=_0x38e2f8;let _0x524936,_0x59a322,_0x2ccf2f,_0x20fee1=0x0;while(!_0x59a322&&_0x20fee1<maxRetries){try{return _0x524936=await exchange[_0x431b3a(0x26d)](),_0x59a322=_0x524936[_0x431b3a(0x1e4)],_0x59a322;}catch(_0xb103d8){_0x2ccf2f=_0xb103d8,_0x20fee1++,await sleep(retryInterval);}}return!_0x2d6fb7?handleErrorNoStop(_0x2ccf2f,'fetchBalance()'):await handleError(_0x2ccf2f,_0x431b3a(0x269)),![];}async function getCoins(_0x45b4c4=0x0,_0x2c90c7=!![],_0x48e98f=config[_0x38e2f8(0x1c9)],_0x11274e){const _0xf15640=_0x38e2f8;let _0x39e40a=[],_0x509079=[],_0xfd593f=[],_0x124516;if(_0x45b4c4)await sleep(_0x45b4c4);if(botPaused)return[currentCoins,currentCoinsAll];let _0x4ea4f0=![],_0x460a7e=0x0,_0x5eca79,_0x392c23;_0x11274e&&(_0x5eca79=currentCoins[_0xf15640(0x144)](_0x41ef17=>_0x41ef17[_0xf15640(0x1b6)]==_0x11274e),_0x5eca79&&(_0x392c23=_0x5eca79['prevnumber'],delete _0x5eca79[_0xf15640(0x23c)]));while(!_0x4ea4f0){_0x124516=await fetchBalance(_0x2c90c7);if(_0x124516){if(_0x11274e){if(_0x124516[_0x11274e]!=_0x392c23)logger[_0xf15640(0x20d)](_0xf15640(0x1b0)+_0x11274e+':\x20'+_0x124516[_0x11274e]+'\x20('+_0x392c23+')'),_0x4ea4f0=!![];else{logger[_0xf15640(0x20d)](_0xf15640(0x140)+_0x11274e+':\x20'+_0x124516[_0x11274e]+'\x20('+_0x392c23+')'),_0x460a7e++;if(_0x460a7e<balanceUpdateRetries)await sleep(balanceUpdateDelay);else{logger[_0xf15640(0x20d)]('Stopped\x20fetching\x20balance\x20after\x20'+_0x460a7e+'\x20attempts');break;}}}else break;}else return[currentCoins,currentCoinsAll];}for(const [_0x49f61b,_0x1e81ed]of Object[_0xf15640(0x1d1)](_0x124516)){_0xfd593f['push'](_0x49f61b);}config[_0xf15640(0x1b1)][_0xf15640(0xbf)](_0x1f9e57=>{const _0x167ca6=_0xf15640;!_0xfd593f[_0x167ca6(0x1f7)](_0x1f9e57[_0x167ca6(0x1b6)])&&(_0x124516[_0x1f9e57[_0x167ca6(0x1b6)]]=0x0);});if(_0x48e98f=='')for(const [_0x11892c,_0x1f8d0d]of Object[_0xf15640(0x1d1)](_0x124516)){_0x1f8d0d!=0x0&&_0x39e40a[_0xf15640(0x1ad)]({'coin':_0x11892c});}else for(const [_0x362fc9,_0x35e307]of Object['entries'](_0x124516)){const _0x205ad2=config['portfolio'][_0xf15640(0x144)](_0x382723=>_0x382723[_0xf15640(0x1b6)]==_0x362fc9),_0x90ef35=_0x362fc9+'/'+_0x48e98f,_0x5ac195=_0x48e98f+'/'+_0x362fc9,_0x43e089=currentCoins[_0xf15640(0x144)](_0x5eb523=>_0x5eb523[_0xf15640(0x1b6)]==_0x362fc9);if((_0x35e307!=0x0||_0x205ad2)&&(allSymbols[_0xf15640(0x1f7)](_0x90ef35)||_0x362fc9==_0x48e98f))_0x43e089?_0x39e40a[_0xf15640(0x1ad)]({..._0x43e089,'number':Math['max'](_0x35e307+(_0x205ad2&&_0x205ad2[_0xf15640(0x1b7)]||0x0),0x0)}):_0x39e40a[_0xf15640(0x1ad)]({'coin':_0x362fc9,'symbol':_0x90ef35,'reverse':![],'number':Math[_0xf15640(0x199)](_0x35e307+(_0x205ad2&&_0x205ad2[_0xf15640(0x1b7)]||0x0),0x0),'orderstatus':_0xf15640(0x217)});else{if((_0x35e307!=0x0||_0x205ad2)&&allSymbols[_0xf15640(0x1f7)](_0x5ac195))_0x43e089?_0x39e40a['push']({..._0x43e089,'number':Math['max'](_0x35e307+(_0x205ad2&&_0x205ad2[_0xf15640(0x1b7)]||0x0),0x0)}):_0x39e40a[_0xf15640(0x1ad)]({'coin':_0x362fc9,'symbol':_0x5ac195,'reverse':!![],'number':Math[_0xf15640(0x199)](_0x35e307+(_0x205ad2&&_0x205ad2['offset']||0x0),0x0),'orderstatus':_0xf15640(0x217)});else _0x205ad2&&_0x39e40a['push']({'coin':_0x205ad2[_0xf15640(0x1b6)],'symbol':_0x205ad2[_0xf15640(0x135)],'reverse':_0x205ad2['reverse'],'number':0x0,'orderstatus':'none'});}}return _0x39e40a[_0xf15640(0x16f)]((_0x5dee57,_0xb303ee)=>_0x5dee57[_0xf15640(0x1d0)]<_0xb303ee['delta']?0x1:_0xb303ee[_0xf15640(0x1d0)]<_0x5dee57[_0xf15640(0x1d0)]?-0x1:0x0),_0x509079=cloneDeep(_0x39e40a),_0x39e40a=_0x39e40a[_0xf15640(0xd6)](_0x2cfdec=>{const _0x363fce=_0xf15640,_0x40ec9a=config[_0x363fce(0x1b1)][_0x363fce(0x144)](_0x4db6c5=>_0x4db6c5['coin']==_0x2cfdec[_0x363fce(0x1b6)]);return _0x40ec9a&&!_0x40ec9a[_0x363fce(0x1d5)];}),[_0x39e40a,_0x509079];}async function getOpenOrders(){const _0x1f3943=_0x38e2f8;let _0x2a0b89;allOpenOrders=[];try{for(const _0x124b46 of config[_0x1f3943(0x1b1)]){!_0x124b46['excluded']&&_0x124b46[_0x1f3943(0x1b6)]!=config[_0x1f3943(0x1c9)]&&(_0x2a0b89=await exchange[_0x1f3943(0x11f)](_0x124b46[_0x1f3943(0x135)]),_0x2a0b89['length']>0x0&&allOpenOrders[_0x1f3943(0x1ad)](_0x2a0b89[0x0]));}}catch(_0x4bf793){await handleError(_0x4bf793,_0x1f3943(0x1ee));}}async function handleOpenOrders(_0x4129a4=0x0){const _0x50c6ea=_0x38e2f8;allOpenOrders[_0x50c6ea(0x1b3)]==0x0&&lockOrders==ORDERS[_0x50c6ea(0x245)]&&allOrdersPlaced&&(_0x4129a4==0x0?(logger[_0x50c6ea(0x20d)](_0x50c6ea(0x220)),_0x4129a4++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger['debug'](_0x50c6ea(0x1f2)),validateOrders(_0x50c6ea(0x1bd))));}async function testAPI(){const _0x3d5c3d=_0x38e2f8;try{return await exchange[_0x3d5c3d(0x26d)](),!![];}catch(_0x427823){return loading[_0x3d5c3d(0x195)]=!![],_0x427823[_0x3d5c3d(0x1ae)]()[_0x3d5c3d(0x1a2)]()['includes'](_0x3d5c3d(0x109))||_0x427823[_0x3d5c3d(0x1ae)]()['toLowerCase']()[_0x3d5c3d(0x1f7)](_0x3d5c3d(0x230))?(logHistory(_0x3d5c3d(0x19b),_0x3d5c3d(0x163)),loading[_0x3d5c3d(0x19b)]=_0x3d5c3d(0x291)):(handleErrorNoStop(_0x427823,_0x3d5c3d(0x21d)),logger[_0x3d5c3d(0x20d)](_0x3d5c3d(0x191),_0x427823)),emitLoadingProgress(),botPaused=!![],![];}}async function testNewAPI(_0x134062){const _0x387ab1=_0x38e2f8;logger[_0x387ab1(0x20d)]('Test\x20new\x20API');const _0xb515ac=ccxt[_0x387ab1(0x124)][_0x134062['exchange'][_0x387ab1(0x1a2)]()],_0x22f292=new _0xb515ac({'apiKey':_0x134062[_0x387ab1(0x1e3)],'secret':_0x134062[_0x387ab1(0xe5)],'options':{'defaultType':_0x387ab1(0x25e)}});if(_0x134062[_0x387ab1(0x278)])_0x22f292['password']=_0x134062[_0x387ab1(0x278)];if(_0x22f292['has']['sandbox'])_0x22f292[_0x387ab1(0x24d)](_0x134062['sandbox']);try{await _0x22f292[_0x387ab1(0x26d)](),botPaused=![];}catch(_0x13a7fd){logger[_0x387ab1(0x20d)]('Error\x20in\x20testNewAPI():\x20'+_0x13a7fd[_0x387ab1(0x1ae)]());throw _0x13a7fd;}}function cloneDeep(_0x590e19){const _0x28ac28=_0x38e2f8;return JSON['parse'](JSON[_0x28ac28(0x120)](_0x590e19));}async function getPortfolio(_0x3d03e7){const _0x16652d=_0x38e2f8;let _0x43f976=[],_0x357f8d=[],_0xfc042b=[],_0xc7874d;_0x3d03e7[_0x16652d(0x1e3)]=decryptRSA(secure['privateKey'],_0x3d03e7['apiKey']),_0x3d03e7[_0x16652d(0xe5)]=decryptRSA(secure[_0x16652d(0xdc)],_0x3d03e7[_0x16652d(0xe5)]);if(_0x3d03e7[_0x16652d(0x278)])_0x3d03e7['apiPassword']=decryptRSA(secure[_0x16652d(0xdc)],_0x3d03e7['apiPassword']);if(_0x3d03e7[_0x16652d(0x1e3)]!==_0x16652d(0x152)||_0x3d03e7[_0x16652d(0xe5)]!==_0x16652d(0x152)||_0x3d03e7['apiPassword']&&_0x3d03e7['apiPassword']!=='************'){if(config[_0x16652d(0xf2)]){if(_0x3d03e7[_0x16652d(0x1e3)]=='************')_0x3d03e7['apiKey']=config[_0x16652d(0x1e3)];if(_0x3d03e7['apiSecret']==_0x16652d(0x152))_0x3d03e7[_0x16652d(0xe5)]=config[_0x16652d(0xe5)];if(_0x3d03e7[_0x16652d(0x278)]==_0x16652d(0x152))_0x3d03e7[_0x16652d(0x278)]=config[_0x16652d(0x278)];}try{if(_0x3d03e7[_0x16652d(0x14c)])await testNewAPI(_0x3d03e7);}catch(_0x43c6cd){if(_0x43c6cd[_0x16652d(0x1ae)]()[_0x16652d(0x1f7)](_0x16652d(0x176))){logHistory(_0x16652d(0x19b),_0x16652d(0x286)),logHistory('error','Error\x20details:\x20'+_0x43c6cd[_0x16652d(0x1ae)]()),proxyEmit('portfolio1',![]);return;}else{if(_0x43c6cd[_0x16652d(0x1ae)]()[_0x16652d(0x1f7)](_0x16652d(0x1cb))){logHistory(_0x16652d(0x19b),_0x16652d(0x107)),logHistory(_0x16652d(0x19b),_0x16652d(0x20c)+_0x43c6cd[_0x16652d(0x1ae)]()),proxyEmit('portfolio1',![]);return;}else{logHistory(_0x16652d(0x19b),_0x16652d(0x1dc)+_0x43c6cd[_0x16652d(0x1ae)]()),logger[_0x16652d(0x20d)]('Error\x20details:',_0x43c6cd),proxyEmit('portfolio1',![]);return;}}}exchange?updateExchange(_0x3d03e7['apiKey'],_0x3d03e7['apiSecret'],_0x3d03e7[_0x16652d(0x278)]):await initExchange(_0x3d03e7[_0x16652d(0xf2)],_0x3d03e7[_0x16652d(0x1e3)],_0x3d03e7[_0x16652d(0xe5)],_0x3d03e7[_0x16652d(0x278)],_0x3d03e7[_0x16652d(0x1a3)]);await loadSymbols();const _0x5cf0aa=await getCoins(0x0,![],_0x3d03e7[_0x16652d(0x1c9)]);_0xfc042b=cloneDeep(_0x5cf0aa[0x1]);}else{const _0x101bc7=await getCoins();_0xfc042b=cloneDeep(_0x101bc7[0x1]);}if(_0x3d03e7['basecoin']=='')proxyEmit(_0x16652d(0x24f),!![]),proxyEmit(_0x16652d(0x1e6),_0xfc042b);else{_0xfc042b['forEach'](_0x2597d1=>{const _0x476336=_0x16652d;if(_0x2597d1[_0x476336(0x1b6)]!=_0x3d03e7[_0x476336(0x1c9)]&&allSymbols[_0x476336(0x1f7)](_0x2597d1[_0x476336(0x135)]))_0x43f976['push'](_0x2597d1[_0x476336(0x135)]);});if(_0x43f976['length']==0x0)logHistory(_0x16652d(0x19b),'Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot');else{try{_0x357f8d=await getTickers(_0x43f976);}catch(_0x11d4b8){logHistory(_0x16652d(0x19b),_0x16652d(0x1a4)),logger[_0x16652d(0x20d)](_0x16652d(0x191),_0x11d4b8),proxyEmit('portfolio1',![]);return;}_0xfc042b[_0x16652d(0xbf)](_0x1ee686=>{const _0x4316e6=_0x16652d;_0x1ee686[_0x4316e6(0x1b6)]!=_0x3d03e7['basecoin']?_0x357f8d[_0x1ee686[_0x4316e6(0x135)]]?_0x357f8d[_0x1ee686[_0x4316e6(0x135)]][_0x4316e6(0x184)]?_0xc7874d=_0x1ee686[_0x4316e6(0x271)]?0x1/_0x357f8d[_0x1ee686[_0x4316e6(0x135)]][_0x4316e6(0x184)]:_0x357f8d[_0x1ee686[_0x4316e6(0x135)]][_0x4316e6(0x184)]:_0xc7874d=0x0:_0xc7874d=0x0:_0xc7874d=0x1,_0x1ee686['price']=formatResult(_0xc7874d,0x8);}),await getMarketCap(_0xfc042b),proxyEmit(_0x16652d(0x24f),!![]),proxyEmit(_0x16652d(0x1e6),_0xfc042b);}}}function truncateTradeAmount(_0x1b9fe4,_0xeb2114){const _0x3b02d0=_0x38e2f8;let _0x5cb7b3=0x0;try{_0x5cb7b3=exchange[_0x3b02d0(0x229)](_0x1b9fe4,_0xeb2114);}catch(_0x246300){}return _0x5cb7b3;}function checkMinimums(_0x27df9c){const _0x5b81a2=_0x38e2f8;let _0xc05fa7=!![];const _0x248e0a=!_0x27df9c[_0x5b81a2(0x271)]?markets[_0x27df9c[_0x5b81a2(0x135)]][_0x5b81a2(0x209)][_0x5b81a2(0x1ce)][_0x5b81a2(0x1c5)]:markets[_0x27df9c[_0x5b81a2(0x135)]][_0x5b81a2(0x209)]['cost'][_0x5b81a2(0x1c5)],_0x3c782d=!_0x27df9c[_0x5b81a2(0x271)]?markets[_0x27df9c[_0x5b81a2(0x135)]][_0x5b81a2(0x209)]['cost'][_0x5b81a2(0x1c5)]:markets[_0x27df9c['symbol']]['limits']['amount'][_0x5b81a2(0x1c5)],_0x325633=truncateTradeAmount(_0x27df9c[_0x5b81a2(0x135)],_0x27df9c[_0x5b81a2(0x10c)]);_0x27df9c[_0x5b81a2(0x10c)]=_0x325633;if(Math[_0x5b81a2(0x282)](_0x325633)<_0x248e0a)_0xc05fa7=![];if(Math[_0x5b81a2(0x282)](_0x325633)*_0x27df9c[_0x5b81a2(0x184)]<_0x3c782d)_0xc05fa7=![];if(_0x27df9c['side']==_0x5b81a2(0x24a)){let _0x541186=config[_0x5b81a2(0x1b1)][_0x5b81a2(0x144)](_0x192e95=>_0x192e95[_0x5b81a2(0x1b6)]==_0x27df9c[_0x5b81a2(0x1b6)]);if(_0x541186[_0x5b81a2(0x1b7)]>0x0){if(Math['abs'](_0x325633)>_0x27df9c['number']-_0x541186['offset'])_0xc05fa7=![];}else{if(Math[_0x5b81a2(0x282)](_0x325633)>_0x27df9c[_0x5b81a2(0x27f)])_0xc05fa7=![];}}if(_0x27df9c[_0x5b81a2(0x281)]==_0x5b81a2(0x1bb)){let _0x5a7f90=config['portfolio']['find'](_0x16b7d4=>_0x16b7d4[_0x5b81a2(0x1b6)]==config['basecoin']),_0x196803=currentCoins[_0x5b81a2(0x144)](_0x321b61=>_0x321b61[_0x5b81a2(0x1b6)]==config[_0x5b81a2(0x1c9)]);if(_0x5a7f90['offset']>0x0){if(Math[_0x5b81a2(0x282)](_0x325633)*_0x27df9c['last']>_0x196803[_0x5b81a2(0x27f)]-_0x5a7f90[_0x5b81a2(0x1b7)])_0xc05fa7=![];}else{if(Math[_0x5b81a2(0x282)](_0x325633)*_0x27df9c[_0x5b81a2(0x184)]>_0x196803[_0x5b81a2(0x27f)])_0xc05fa7=![];}}return _0xc05fa7;}async function getBalances(_0x55e4c8=!![]){const _0x4e9bbb=_0x38e2f8;if(botPaused)return;let _0x3afe84=0x0,_0x88e1a9;const _0x40942b=config['threshold'];if(config[_0x4e9bbb(0xc5)]&&config['change24h']<0x0)await validate24hChanges();currentCoins[_0x4e9bbb(0xbf)](_0x13ff13=>{const _0x551ea1=_0x4e9bbb;if(_0x13ff13[_0x551ea1(0x1b6)]!=config[_0x551ea1(0x1c9)]){let _0x215ad4=gTicker[noslash(_0x13ff13[_0x551ea1(0x135)])];_0x88e1a9=_0x13ff13[_0x551ea1(0x271)]?0x1/_0x215ad4:_0x215ad4;}else _0x88e1a9=0x1;let _0x347163=_0x13ff13[_0x551ea1(0x27f)]*_0x88e1a9;_0x3afe84+=_0x347163,_0x13ff13['last']=formatResult(Number(_0x88e1a9),0x8),_0x13ff13[_0x551ea1(0x145)]=_0x347163;}),currentCoins['forEach'](_0x5e6016=>{const _0x284d17=_0x4e9bbb;let _0x4ba798=config[_0x284d17(0x1b1)][_0x284d17(0x144)](_0x15361d=>_0x15361d['coin']==_0x5e6016[_0x284d17(0x1b6)]),_0x2071c3=Number(_0x4ba798[_0x284d17(0x12a)]),_0x32cf9b=_0x5e6016[_0x284d17(0x145)]/_0x3afe84*0x64,_0x5a9d8b=_0x2071c3*_0x3afe84/0x64/_0x5e6016[_0x284d17(0x184)]-_0x5e6016[_0x284d17(0x27f)];_0x5e6016['distribution']=formatResult(_0x32cf9b,0x3),_0x5e6016['target']=formatResult(_0x2071c3,0x3),_0x5e6016[_0x284d17(0x10c)]=formatResult(_0x5a9d8b,0x8),_0x5e6016[_0x284d17(0x281)]='',_0x5e6016[_0x284d17(0x153)]=![];if(_0x5e6016['coin']!=config[_0x284d17(0x1c9)]){if(_0x5e6016[_0x284d17(0x12a)]>_0x2071c3)_0x5e6016['side']=_0x284d17(0x24a),_0x5e6016[_0x284d17(0x153)]=checkMinimums(_0x5e6016);else _0x5e6016['distribution']<_0x2071c3&&(_0x5e6016[_0x284d17(0x281)]='buy',_0x5e6016[_0x284d17(0x153)]=checkMinimums(_0x5e6016));}_0x5e6016[_0x284d17(0x1d0)]=_0x5e6016[_0x284d17(0x12a)]/_0x5e6016['target']-0x1;if(_0x5e6016[_0x284d17(0x115)]==_0x284d17(0x283)||_0x5e6016['orderstatus']==_0x284d17(0xe7))_0x5e6016[_0x284d17(0x115)]=_0x284d17(0x217);}),currentCoins[_0x4e9bbb(0x16f)]((_0x59ad2d,_0x1cdacd)=>_0x59ad2d['delta']<_0x1cdacd[_0x4e9bbb(0x1d0)]?0x1:_0x1cdacd[_0x4e9bbb(0x1d0)]<_0x59ad2d[_0x4e9bbb(0x1d0)]?-0x1:0x0);const _0x169e84=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x169e84[_0x4e9bbb(0xc9)],'usd':_0x169e84['usd'],'portfolio':JSON[_0x4e9bbb(0x120)](currentCoins),'threshold':_0x40942b},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});if(_0x55e4c8){if(config[_0x4e9bbb(0xc5)])headlessMode({'portfolio':currentCoins,'threshold':_0x40942b});else lockOrders==ORDERS['UNLOCKED']&&!coolingDown&&notifyBalance({'portfolio':currentCoins,'threshold':_0x40942b});}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x2ff8e7=getNormalizedPerformance();getStartingBalances(_0x2ff8e7),emitPerformance(_0x2ff8e7);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}function getPnL(){const _0xa57482=_0x38e2f8;let _0x570bf6=dbCoinResults[_0xa57482(0xc3)](_0xa57482(0x218))[_0xa57482(0x145)](),_0x2af5fc=0x0;return Object[_0xa57482(0x1d1)](_0x570bf6)[_0xa57482(0xbf)](([_0x2b01de,_0x22a472])=>{const _0x3fa483=_0xa57482;_0x2af5fc+=_0x22a472[_0x3fa483(0xce)];}),_0x2af5fc;}function _0x30c4(){const _0x26b30b=['\x20-\x20bot\x20switched\x20to\x20manual\x20mode','2\x20-\x20handling\x20FILLED\x20order:\x20','\x20rejected\x20your\x20API\x20request\x20(see:\x20hodlerhacks.com/fix/4)','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','getOpenOrders()','initTickers()','quote','detectLiquidityChange()','2\x20-\x20Handled\x20open\x20orders','PAXG','map','getFullYear','\x20-\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','includes','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)','showConfig','1\x20-\x20FILLED\x20unknown\x20order:\x20','padStart','OnMaintenance','toUpperCase','marketcapApi','api-issue','Will\x20continue\x20to\x20wait\x20for\x20order(s)\x20to\x20be\x20filled\x20and\x20try\x20to\x20cancel\x20again\x20later','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','\x20>\x20','orderId','net-basecoin','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','initial','0\x20-\x20EXECUTION:\x20','limits','Failed\x20to\x20load\x20market\x20data\x20-\x20bot\x20not\x20started','\x20exchange','Error\x20details:\x20','debug','watchTrades','Limit\x20(low-margin)','success','Value\x20','USDC','getDate','placeOrder','796538iUBbFb','MIN_NOTIONAL','none','coins','RequestTimeout','red_yellow_blue','net','fiat','testAPI()','breakeven','fetchTickers','1\x20-\x20Handle\x20open\x20orders','\x20closed\x20the\x20connection\x20(see:\x20hodlerhacks.com/fix/5)','autoliquidity','\x20blocked\x20API\x20(DDoSProtection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','\x20has\x20a\x2024h\x20drop\x20of\x20','watchOrders','percentage','time','EUR','amountToPrecision','emojibuy','customId','bitmex','-------------------------------\x0a','Set\x20lock\x20orders\x20to:\x20','InvalidOrder','request-time','Bot\x20','169961OeJnqM','remove','enableFiatToggle','740JpKStn','Huobi','***','Market\x20order','join','2.6.22','Unfilled\x20order(s)\x20could\x20not\x20be\x20canceled\x20after\x20','prevnumber','sells','log','cancelOrder','-config.json',')\x20known\x20order:\x20','constructor','.json','isBefore','LOCKED','createWriteStream','Portfolio\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','\x20-\x20bot\x20not\x20started','function','sell','initclient','add','setSandboxMode','ongoing','portfolio1','001','Error\x20while\x20deleting\x20files:\x20','staging','sortBy','Generating\x20PnL\x20data','decode64','defaults','added','ask','cancelOrders()','Invalid\x20quantity','marketcapEnabled','complete','NetworkError','spot','-events.json','removed','set','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','ExchangeError','Reset\x20|\x20','No\x20more\x20open\x20orders\x20-\x20','toFixed',')\x20|\x20exchange:\x20','Manual\x20balancing\x20required','fetchBalance()','date','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','average','fetchBalance','Invalid\x20symbol:\x20','./logs/','\x20not\x20responding\x20(see:\x20hodlerhacks.com/fix/5)','reverse','watchTrades()','recovery','\x20|\x20Custom\x20ID:\x20','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','resetHistory','slider','apiPassword','liquidity','enabled','substring','\x20metrics:</b>\x20\x0a\x0a','search','event','number','Block\x20transaction\x20detection:\x20','side','abs','filled','highest',':\x20Bot\x20','Invalid\x20API\x20details,\x20please\x20try\x20again\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','splice','pnl','\x20/\x20','Unfilled\x20order(s)\x20canceled\x20after\x20','open','process\x20','starting-balances','kill','colorscheme','sendPortfolioTelegram','timestamp-issue','RSA-OAEP','/EUR','string','cloneDeep','args','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','forEach','threshold','\x20|\x20lock\x20orders:\x20','final','get','Cryptocom','headless','progress','type','market_cap','eur','\x20-\x20go\x20back\x20and\x20try\x20again','floor','sha256','watchOrders()','realizedPnL','78112FCuHmN','yyyy/MM/dd','deleteHistoryAlerts','Resetting\x20bot\x20history','Exchange','Resetting\x20coin\x20results:\x20','exchanges','filter','getMinutes','split','order','getStartingBalances','bot-','privateKey','toggleBotMode','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','logs','124056RTDAuD','1479848HOULLG','environment','2.6.23','onepagemode','apiSecret','\x0aSymbol(s):\x20','canceled','watchTradesForSymbols','Failed\x20to\x20load\x20coin\x20data\x20for\x20','Binance','\x20(see:\x20hodlerhacks.com/fix/1)','/USD','basecoinvalue','message','cooldown','UNLOCKING','test','exchange','event-history','indexOf','loading-canceled','match','change','</pre>','format','remainingSymbols','net-fiat','2.3.5','getHours','\x20not\x20available\x20(see:\x20hodlerhacks.com/fix/5)','warning',':\x20timer\x20>','showname','ordertype','startprice','Avoiding\x20continuous\x20order\x20attempts','secure','CoinMarketCap\x20data\x20could\x20not\x20be\x20updated\x20-\x20will\x20try\x20again\x20in\x201\x20hour','Exchange\x20permission\x20denied\x20-\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','active','timestamp','\x20attempts','lowdb/adapters/FileSync','trade','pnl-fiat','bots','write','Headless:\x20','3602837bwAVlV','node-forge','market','differenceInSeconds','orderstatus','update-liquidity','%\x20(','\x20API\x20secret\x20is\x20invalid','\x20blocked\x20API\x20(RateLimitExceeded)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','target','configuration','\x20order:\x20','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','no\x20exchange\x20reloaded','fetchOpenOrders','stringify','openOrders','getSeconds','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','pro','\x20minutes','change24h','Cex','USDP','placeOrder()','distribution','slice','emitHistory','has','recent20','27DfMkZh','balances','\x20>\x20stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','util','Bybit','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','symbol','Order\x20amount\x20is\x20invalid:\x20','Order\x20is\x20invalid:\x20','-performance.json','replace','netoffset','uncaughtException','padEnd','bot','PnL\x20','date-fns','Invalid\x20balance\x20for\x20','USD','Huobipro','\x20minutes\x20-\x20','find','value','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','isEqual','getTime','InvalidNonce','mkdirSync','39zlDKnL','testApi','status\x20code\x20401','-results.json','changes','\x20API\x20key\x20is\x20invalid','storeHeadless','************','valid','<b>Bot\x20','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','startdate','1\x20-\x20Validate\x20orders:\x20','password','./version.json','fetchTickers()','data','./config/','RateLimitExceeded','BUSD','Exception\x20thrown\x20in\x20','marketcap','usd','parse','Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)','RETRY\x20-\x20Problem\x20resolved\x20after\x20','exchange\x20reload','argv','Order(s)\x20not\x20validated\x20after\x20','\x20exchange\x20error:\x20','settings','\x20portfolio:</b>\x20\x0a\x0a','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20trying\x20again\x20in\x20','ETH','stack','writeFile','sort','random','heapUsed','\x20MB','80022rwuwCQ','Error:\x20Invalid\x20argument\x20','privateKeyFromPem','AuthenticationError','Resuming\x20(','buys','<pre>','Net\x20','must\x20be\x20greater\x20than\x20minimum\x20amount','createOrder','UNLOCKED','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','Network\x20error\x20details:','existsSync','yargs/yargs','freeze','cancelLoading','last','\x20|\x20highest\x20fee:\x20','configstate','configuration-stored','ExchangeNotAvailable','restart','emojisell','\x20>\x20details:','Portfolio\x20change\x20detected:\x20','botID','(((.+)+)+)+$','fromCodePoint','USDT','Error\x20details:','quick','Insufficient\x20funds\x20to\x20execute\x20order:\x20','\x20|\x20','cancel','\x20orders\x20in\x20less\x20than\x20','DDoSProtection','ID:\x20','max','timeshift','error','page','\x20-\x20','\x20-\x20bot\x20already\x20running\x20in\x20manual\x20mode','fetchTicker','performance','version','toLowerCase','sandbox','Unknown\x20error\x20-\x20check\x20logs','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','Pausing\x20for\x20','running','getMonth','balancing\x20resumed','keys','create','fee','push','toString','loadMarkets','Valid\x20balance\x20for\x20','portfolio','storeFiat','length','recreate','send','coin','offset','unlinkSync','round','closed','buy','ccxt','no\x20open\x20orders','\x20>\x20pausing\x20bot\x20for\x20','Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute','limit-low','Initializing\x20coin\x20results','1\x20-\x20FILLED\x20known\x20order:\x20','watchTradesForSymbols()','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','min','200VrWACV','%)\x0a','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20for\x20','basecoin','Loading\x20completed','PermissionDenied','secret','full','amount','Initiating\x20bot\x20restart','delta','entries','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','timeout','Initializing\x20exchange:\x20already\x20done','excluded','limit-high','assign','/backup/','price','Bitget','Waited\x20','Error\x20occurred:\x20','2.6.0','<b>','botname','Limit\x20(high-margin)','1\x20-\x20partially\x20FILLED\x20(','BTC','apiKey','total','Order\x20filled','portfolio2','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','decrypt','bb-secure.json'];_0x30c4=function(){return _0x26b30b;};return _0x30c4();}function _0xf90e(_0x2bb7db,_0xbb550a){const _0x5457ab=_0x30c4();return _0xf90e=function(_0x13acd9,_0x5bb810){_0x13acd9=_0x13acd9-0xbe;let _0x30c4dd=_0x5457ab[_0x13acd9];return _0x30c4dd;},_0xf90e(_0x2bb7db,_0xbb550a);}async function storePerformance(){const _0x1aedaa=_0x38e2f8;if(!lastBalances)return;let _0x34024f=[],_0x3f3aef;const _0xb9185d=getPnL();let _0x753a80=JSON[_0x1aedaa(0x162)](lastBalances[_0x1aedaa(0x1b1)]);_0x753a80[_0x1aedaa(0x16f)]((_0x776a2e,_0x34aaf6)=>_0x776a2e[_0x1aedaa(0x1b6)]>_0x34aaf6[_0x1aedaa(0x1b6)]?0x1:_0x34aaf6[_0x1aedaa(0x1b6)]>_0x776a2e[_0x1aedaa(0x1b6)]?-0x1:0x0),_0x753a80[_0x1aedaa(0xbf)](_0x4b92e0=>{const _0x34c614=_0x1aedaa;let _0x50da83={'coin':_0x4b92e0['coin'],'number':_0x4b92e0[_0x34c614(0x27f)],'price':_0x4b92e0[_0x34c614(0x184)]};_0x34024f[_0x34c614(0x1ad)](_0x50da83);});const _0x3c3da4=await getFiat(),_0x17c13f=getTimeStamp()[_0x1aedaa(0xd8)]('\x20')[0x0],_0x16de13=dbPerformance[_0x1aedaa(0xc3)](_0x1aedaa(0x15b))[_0x1aedaa(0x144)]({'date':_0x17c13f})[_0x1aedaa(0x145)]();_0x3f3aef={'date':_0x17c13f,'eur':_0x3c3da4[_0x1aedaa(0xc9)],'usd':_0x3c3da4[_0x1aedaa(0x161)],'coins':_0x34024f,'pnl':_0xb9185d},_0x16de13?_0x3f3aef['date']!=config[_0x1aedaa(0x156)]&&dbPerformance[_0x1aedaa(0xc3)](_0x1aedaa(0x15b))[_0x1aedaa(0x144)]({'date':_0x17c13f})[_0x1aedaa(0x1d7)](_0x3f3aef)[_0x1aedaa(0x10f)]():dbPerformance[_0x1aedaa(0xc3)](_0x1aedaa(0x15b))[_0x1aedaa(0x1ad)](_0x3f3aef)[_0x1aedaa(0x10f)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x54dc14=_0x38e2f8;let _0x40b052=[];if(dbPerformance['has']('data')[_0x54dc14(0x145)]()){let _0x5956a6=dbPerformance[_0x54dc14(0xc3)](_0x54dc14(0x15b))[_0x54dc14(0x295)]()['filter'](_0xf4a7a8=>{const _0xe8b5f7=_0x54dc14;if(_0xf4a7a8[_0xe8b5f7(0x218)][_0xe8b5f7(0x1b3)]==0x0)return![];else return!![];})[_0x54dc14(0x253)](_0x54dc14(0x26a))['value'](),_0x2f6cd6=[...config[_0x54dc14(0x279)]];_0x2f6cd6['sort']((_0x5cdf41,_0xcc4f3c)=>_0x5cdf41[_0x54dc14(0x26a)]>_0xcc4f3c[_0x54dc14(0x26a)]?-0x1:_0xcc4f3c[_0x54dc14(0x26a)]>_0x5cdf41[_0x54dc14(0x26a)]?0x1:0x0);let _0x13914c=0x1,_0x3190b4=[],_0x13a9c0=0x0;_0x5956a6[_0x54dc14(0x12b)]()['reverse']()[_0x54dc14(0xbf)]((_0x2aca74,_0x111074)=>{const _0x33705a=_0x54dc14;if(_0x2f6cd6[_0x13a9c0]){if(_0x5956a6[_0x5956a6[_0x33705a(0x1b3)]-_0x111074]&&_0x2f6cd6[_0x13a9c0][_0x33705a(0x26a)]==_0x5956a6[_0x5956a6[_0x33705a(0x1b3)]-_0x111074]['date']){if(_0x111074<_0x5956a6['length']){let _0x457331=0x0,_0x48cd2a=0x0;_0x5956a6[_0x5956a6['length']-_0x111074][_0x33705a(0x218)][_0x33705a(0xbf)](_0x8619a7=>{const _0x24cbcc=_0x33705a;_0x48cd2a+=_0x8619a7[_0x24cbcc(0x27f)]*_0x8619a7[_0x24cbcc(0x1d9)];}),_0x2f6cd6[_0x13a9c0]['changes'][_0x33705a(0xbf)](_0x4976fc=>{const _0x349e88=_0x33705a;_0x457331+=_0x4976fc[_0x349e88(0x27f)]*_0x4976fc[_0x349e88(0x1d9)];}),_0x13914c*=_0x457331/(_0x48cd2a-_0x457331)+0x1;}_0x13a9c0++;}}let _0x24f5e2=0x0;_0x2aca74[_0x33705a(0x218)]['forEach'](_0x1c2b46=>{const _0x46942b=_0x33705a;_0x24f5e2+=_0x1c2b46[_0x46942b(0x27f)]*_0x1c2b46[_0x46942b(0x1d9)];}),_0x3190b4[_0x5956a6['length']-_0x111074-0x1]=_0x24f5e2*(_0x13914c-0x1);});let _0x52924f=[];_0x2f6cd6=[...config[_0x54dc14(0x279)]]||[];let _0x453509=0x0;_0x13a9c0=0x0,_0x5956a6[_0x54dc14(0xbf)]((_0x312189,_0x5800ac)=>{const _0x247ed5=_0x54dc14;if(_0x2f6cd6[_0x13a9c0]){const _0x675273=fns[_0x247ed5(0x162)](_0x2f6cd6[_0x13a9c0]['date'],'yyyy/MM/dd',new Date()),_0x1f79d0=fns[_0x247ed5(0x162)](_0x312189[_0x247ed5(0x26a)],'yyyy/MM/dd',new Date());if(fns[_0x247ed5(0x147)](_0x675273,_0x1f79d0)){let _0x146d2b=0x0;_0x2f6cd6[_0x13a9c0][_0x247ed5(0x14f)]['forEach'](_0xffca53=>{const _0x5f573c=_0x247ed5;!_0x52924f[_0xffca53[_0x5f573c(0x1b6)]]?_0x52924f[_0xffca53['coin']]=_0xffca53[_0x5f573c(0x27f)]:(_0x146d2b=_0x52924f[_0xffca53['coin']],_0x52924f[_0xffca53['coin']]+=_0xffca53[_0x5f573c(0x27f)]);const _0x5cec8b=_0x312189[_0x5f573c(0x218)][_0x5f573c(0x144)](_0x258f08=>_0x258f08[_0x5f573c(0x1b6)]==_0xffca53[_0x5f573c(0x1b6)]);(!_0x5cec8b||_0x5cec8b[_0x5f573c(0x27f)]==0x0)&&(_0x453509+=(-_0xffca53[_0x5f573c(0x27f)]-_0x146d2b)*_0xffca53['price']);}),_0x13a9c0++;}}_0x312189[_0x247ed5(0x218)]['forEach']((_0x59ab32,_0x5eb08c)=>{const _0x18af8e=_0x247ed5;_0x52924f[_0x59ab32[_0x18af8e(0x1b6)]]&&(_0x59ab32[_0x18af8e(0x207)]=_0x52924f[_0x59ab32[_0x18af8e(0x1b6)]]);}),_0x40b052[_0x247ed5(0x1ad)]({'date':_0x312189['date'],'eur':_0x312189[_0x247ed5(0xc9)],'usd':_0x312189['usd'],'offset':_0x3190b4[_0x5800ac],'netoffset':_0x453509,'coins':_0x312189[_0x247ed5(0x218)],'pnl':_0x312189[_0x247ed5(0x288)]});});}return _0x40b052;}function emitPerformance(_0x28837e){const _0x3d6740=_0x38e2f8;_0x28837e[_0x3d6740(0x1b3)]!==0x0?(proxyEmit(_0x3d6740(0x1a0),_0x28837e),lastPerformanceEmitted=getDate()):proxyEmit(_0x3d6740(0x1a0),[]);}function getPerf(_0x1f1cb0,_0x2619d6){const _0x21c796=_0x38e2f8;let _0x3c75fd=0x0,_0x5e3410=0x0,_0x20fe6d=0x0;_0x1f1cb0[_0x21c796(0x218)]['forEach'](_0x21a89d=>{const _0x5e92a0=_0x21c796;_0x3c75fd+=_0x21a89d[_0x5e92a0(0x27f)]*_0x21a89d['price'];});_0x2619d6&&(_0x3c75fd+=_0x1f1cb0[_0x21c796(0x1b7)]);if(config[_0x21c796(0x1c9)]===_0x21c796(0x1e2)||config[_0x21c796(0x1c9)]==='ETH'||config[_0x21c796(0x1c9)]===_0x21c796(0x1f3))_0x5e3410=_0x3c75fd*_0x1f1cb0[_0x21c796(0xc9)],_0x20fe6d=_0x3c75fd*_0x1f1cb0[_0x21c796(0x161)];else{if(usdBasecoins[_0x21c796(0x1f7)](config[_0x21c796(0x1c9)]))_0x5e3410=_0x3c75fd*_0x1f1cb0['eur']/_0x1f1cb0['usd'],_0x20fe6d=_0x3c75fd;else config[_0x21c796(0x1c9)]===_0x21c796(0x228)&&(_0x5e3410=_0x3c75fd,_0x20fe6d=_0x3c75fd*_0x1f1cb0[_0x21c796(0x161)]/_0x1f1cb0['eur']);}return[_0x3c75fd,_0x5e3410,_0x20fe6d];}function CurrencyFactor(_0x3c77ec,_0x5b428d,_0x1887ed){const _0x310f61=_0x38e2f8;let _0x2ee422;if(_0x5b428d===_0x310f61(0x1e2)||_0x5b428d===_0x310f61(0x16c)||_0x5b428d===_0x310f61(0x1f3))_0x2ee422=_0x1887ed===_0x310f61(0x228)?_0x3c77ec['eur']:_0x3c77ec[_0x310f61(0x161)];else{if(usdBasecoins['includes'](_0x5b428d))_0x2ee422=_0x1887ed==='EUR'?_0x3c77ec['eur']/_0x3c77ec[_0x310f61(0x161)]:0x1;else _0x5b428d===_0x310f61(0x228)&&(_0x2ee422=_0x1887ed==='EUR'?0x1:_0x3c77ec[_0x310f61(0x161)]/_0x3c77ec['eur']);}return _0x2ee422;}function getKPIs(_0x4dff63,_0x48c82f=_0x38e2f8(0x228)){const _0xbb3e85=_0x38e2f8,_0x2512af=config[_0xbb3e85(0x1c9)],_0x520383=lastBalances,_0x11a97c=currentCoins,_0x45646a=getNormalizedPerformance(),_0x54905e=CurrencyFactor(_0x520383,config['basecoin'],_0x48c82f);let _0x1c4f09=0x0;_0x11a97c[_0xbb3e85(0xbf)](_0x2bb4ae=>{const _0x58d065=_0xbb3e85;_0x1c4f09+=_0x2bb4ae['number']*_0x2bb4ae[_0x58d065(0x184)];});_0x4dff63[_0xbb3e85(0x1f7)](_0xbb3e85(0x21c))&&(_0x1c4f09*=_0x54905e);let _0x2a5592;if(_0x1c4f09!==0x0){if(_0x4dff63==='basecoin'||_0x4dff63==='fiat'){if(_0x4dff63===_0xbb3e85(0x1c9))_0x2a5592=(_0x1c4f09/startingBalances['basecoin']-0x1)*0x64;else{if(_0x48c82f==='EUR')_0x2a5592=(_0x1c4f09/startingBalances[_0xbb3e85(0xc9)]-0x1)*0x64;else _0x2a5592=(_0x1c4f09/startingBalances['usd']-0x1)*0x64;}}if(_0x4dff63[_0xbb3e85(0x1f7)](_0xbb3e85(0x21b))){let _0x5a5b69=0x0;if(startingBalances[_0xbb3e85(0x218)])_0x11a97c[_0xbb3e85(0xbf)](_0x16ba3d=>{const _0x3b5d32=_0xbb3e85;let _0x1b73da=startingBalances[_0x3b5d32(0x218)][_0x3b5d32(0x144)](_0xb5877a=>_0xb5877a[_0x3b5d32(0x1b6)]===_0x16ba3d[_0x3b5d32(0x1b6)]);if(_0x1b73da&&_0x1b73da[_0x3b5d32(0x1b6)]&&_0x16ba3d['number']!==0x0)_0x5a5b69+=_0x1b73da['number']*_0x16ba3d[_0x3b5d32(0x184)];});let _0x4ad7d3=0x0;if(_0x45646a[_0xbb3e85(0x1b3)]!==0x0){let _0x344387=_0x45646a[_0x45646a[_0xbb3e85(0x1b3)]-0x1];_0x4ad7d3=_0x344387[_0xbb3e85(0x13a)];}_0x5a5b69-=_0x4ad7d3;let _0x257068;_0x4dff63===_0xbb3e85(0x204)&&(_0x257068=startingBalances[_0xbb3e85(0x1c9)]),_0x4dff63===_0xbb3e85(0xfb)&&(_0x257068=_0x48c82f===_0xbb3e85(0x228)?startingBalances[_0xbb3e85(0xc9)]:startingBalances['usd'],_0x5a5b69*=_0x54905e),_0x2a5592=(_0x1c4f09-_0x5a5b69)/_0x257068*0x64,_0x1c4f09=_0x1c4f09-_0x5a5b69;}if(_0x4dff63[_0xbb3e85(0x1f7)](_0xbb3e85(0x288))){if(_0x45646a[_0xbb3e85(0x1b3)]!==0x0&&_0x11a97c[_0xbb3e85(0x1b3)]!==0x0){let _0x591aca,_0x23210e=_0x45646a[_0x45646a[_0xbb3e85(0x1b3)]-0x1][_0xbb3e85(0x288)];_0x4dff63[_0xbb3e85(0x1f7)](_0xbb3e85(0x21c))?(_0x591aca=_0x48c82f===_0xbb3e85(0x228)?startingBalances['eur']:startingBalances[_0xbb3e85(0x161)],_0x23210e*=CurrencyFactor(_0x520383,_0x2512af,_0x48c82f)):_0x591aca=startingBalances[_0xbb3e85(0x1c9)],_0x2a5592=_0x23210e/_0x591aca*0x64,_0x1c4f09=_0x23210e;}}if(_0x2a5592){if(_0x2a5592<0x64)_0x2a5592=_0x2a5592[_0xbb3e85(0x266)](0x2);else{if(_0x2a5592<0x3e8)_0x2a5592=_0x2a5592[_0xbb3e85(0x266)](0x1);else _0x2a5592=_0x2a5592['toFixed'](0x0);}}else _0x2a5592=Number('0')[_0xbb3e85(0x266)](0x2);if(_0x1c4f09){if(Math[_0xbb3e85(0x282)](_0x1c4f09)<0.000001)_0x1c4f09=_0x1c4f09[_0xbb3e85(0x266)](0x2);else{if(Math['abs'](_0x1c4f09)<0.1)_0x1c4f09=_0x1c4f09['toFixed'](0x6);else{if(Math[_0xbb3e85(0x282)](_0x1c4f09)<0x1)_0x1c4f09=_0x1c4f09[_0xbb3e85(0x266)](0x5);else{if(Math[_0xbb3e85(0x282)](_0x1c4f09)<0xa)_0x1c4f09=_0x1c4f09['toFixed'](0x4);else{if(Math[_0xbb3e85(0x282)](_0x1c4f09)<0x64)_0x1c4f09=_0x1c4f09['toFixed'](0x3);else{if(Math[_0xbb3e85(0x282)](_0x1c4f09)<0x3e8)_0x1c4f09=_0x1c4f09[_0xbb3e85(0x266)](0x2);else _0x1c4f09=_0x1c4f09['toFixed'](0x2);}}}}}}else _0x1c4f09=Number('0')[_0xbb3e85(0x266)](0x2);}else _0x2a5592=Number('0')['toFixed'](0x2);if(_0x2a5592>=0x0)_0x2a5592='+'+_0x2a5592;return{'value':_0x1c4f09,'change':_0x2a5592};}async function getStartingBalances(_0xed6e6b,_0x3aa5dd=!![]){const _0x273245=_0x38e2f8;if(_0xed6e6b[_0x273245(0x1b3)]!==0x0){const [_0x5c950c,_0x5f5af6,_0x5a0783]=getPerf(_0xed6e6b[0x0],!![]);let _0xa65881=[];config[_0x273245(0x1b1)]['forEach'](_0x5dfe=>{const _0x5ade40=_0x273245;let _0xc45bbb=0x0,_0x12ba81;config[_0x5ade40(0x279)][_0x5ade40(0xbf)](_0x40c06f=>{const _0x12db8a=_0x5ade40;let _0x17fc02=_0x40c06f[_0x12db8a(0x14f)][_0x12db8a(0x144)](_0x841539=>_0x841539[_0x12db8a(0x1b6)]==_0x5dfe[_0x12db8a(0x1b6)]);if(_0x17fc02){_0xc45bbb+=_0x17fc02[_0x12db8a(0x27f)];if(!_0x12ba81)_0x12ba81=_0x17fc02[_0x12db8a(0x1d9)];}}),_0xa65881[_0x5ade40(0x1ad)]({'coin':_0x5dfe['coin'],'number':_0xc45bbb,'initialprice':_0x12ba81});});const _0x1961cf={'basecoin':_0x5c950c,'eur':_0x5f5af6,'usd':_0x5a0783,'coins':_0xa65881};if(_0x3aa5dd)proxyEmit(_0x273245(0x28d),_0x1961cf);startingBalances=_0x1961cf;}}function headlessMode(_0x1b2b71){const _0x3951f4=_0x38e2f8;let _0x4f6ec8=_0x1b2b71['portfolio'],_0x30dfc5=_0x1b2b71[_0x3951f4(0xc0)],_0x510074=[];for(let _0x39bcde of _0x4f6ec8){if(_0x39bcde[_0x3951f4(0x1b6)]!=config[_0x3951f4(0x1c9)]){if(_0x39bcde[_0x3951f4(0x1d0)]>=_0x30dfc5/0x64){if(_0x39bcde[_0x3951f4(0x153)])_0x510074[_0x3951f4(0x1ad)](_0x39bcde);}else{if(_0x39bcde['delta']<=-_0x30dfc5/0x64){if(_0x39bcde[_0x3951f4(0x153)])_0x510074[_0x3951f4(0x1ad)](_0x39bcde);}}}}_0x510074[_0x3951f4(0x1b3)]>0x0&&placeOrder(_0x510074);}function notifyBalance(_0x47d9c1){const _0x140709=_0x38e2f8;let _0x502542=_0x47d9c1[_0x140709(0x1b1)],_0x34ce8f=_0x47d9c1[_0x140709(0xc0)],_0x2d30bf=[];for(let _0x175ec6 of _0x502542){if(_0x175ec6['coin']!=config[_0x140709(0x1c9)]){if(_0x175ec6['delta']>=_0x34ce8f/0x64){if(_0x175ec6[_0x140709(0x153)])_0x2d30bf[_0x140709(0x1ad)](_0x175ec6);}else{if(_0x175ec6['delta']<=-_0x34ce8f/0x64){if(_0x175ec6[_0x140709(0x153)])_0x2d30bf[_0x140709(0x1ad)](_0x175ec6);}}}}if(_0x2d30bf[_0x140709(0x1b3)]>0x0){let _0x40402f=_0x2d30bf[_0x140709(0x1f4)](_0x4fce31=>_0x4fce31[_0x140709(0x1b6)]);_0x40402f[_0x140709(0x16f)]();let _0x279794=_0x40402f[_0x140709(0x239)](',\x20');if(!lastCoinsToBalance)logHistory(_0x140709(0xff),_0x140709(0x268));lastCoinsToBalance=_0x279794;}}function symbolToCoin(_0xe1741e){const _0x8e8401=_0x38e2f8;let _0x4fde70;if(_0xe1741e[_0x8e8401(0x1f7)]('/'+config[_0x8e8401(0x1c9)]))_0x4fde70=_0xe1741e[_0x8e8401(0x139)]('/'+config[_0x8e8401(0x1c9)],'');if(_0xe1741e[_0x8e8401(0x1f7)](config[_0x8e8401(0x1c9)]+'/'))_0x4fde70=_0xe1741e[_0x8e8401(0x139)](config[_0x8e8401(0x1c9)]+'/','');return _0x4fde70;}function setLockOrders(_0x30a60a){const _0x36e5c1=_0x38e2f8;lockOrders=_0x30a60a,logger[_0x36e5c1(0x20d)](_0x36e5c1(0x22e)+Object['keys'](ORDERS)[lockOrders]);}async function unlockOrders(_0x39fdb6=![]){const _0x38941e=_0x38e2f8;if(allOrdersPlaced&&lockOrders==ORDERS['LOCKED']){setLockOrders(ORDERS[_0x38941e(0xf0)]);if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);if(_0x39fdb6){const _0x48030f=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x48030f,setBlockTransactionDetection(![]);}validateOrdersState='initial',persistOpenOrders([]),setLockOrders(ORDERS[_0x38941e(0x17d)]);}}async function validateOrders(_0xb2fa60){const _0x491815=_0x38e2f8;if(_0xb2fa60)validateOrdersState=_0xb2fa60;logger[_0x491815(0x20d)](_0x491815(0x157)+validateOrdersState+_0x491815(0xc1)+Object[_0x491815(0x1aa)](ORDERS)[lockOrders]);let _0x4f49ec=[],_0x34dbd1=config[_0x491815(0x102)]==_0x491815(0x113)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x491815(0x1d3)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS['LOCKED'])return;logger['debug']('2\x20-\x20Validate\x20orders:\x20'+validateOrdersState);for(let _0x1748ac=lastOrders[_0x491815(0x1b3)]-0x1;_0x1748ac>=0x0;_0x1748ac--){let _0x987ca0=lastOrders[_0x1748ac],_0x5a0a05=![];_0x987ca0[_0x491815(0x283)]>0x0&&(_0x5a0a05=!![]),_0x4f49ec['push'](_0x5a0a05),_0x5a0a05&&config[_0x491815(0x102)]!=_0x491815(0x113)&&logHistory('order','Order\x20filled:\x20'+_0x987ca0[_0x491815(0x135)]+'\x20'+_0x987ca0['side']+'\x20#'+formatResult(_0x987ca0[_0x491815(0x283)],0x8)+'\x20@'+formatResult(_0x987ca0[_0x491815(0x1d9)],0x8)),_0x5a0a05&&lastOrders[_0x491815(0x287)](_0x1748ac,0x1);}persistOpenOrders(lastOrders);const _0x371e1b=coolingDown?'balancing\x20resumes\x20when\x20cooldown\x20ends':_0x491815(0x1a9);if(validateOrdersState==_0x491815(0x207)){validateOrdersState='ongoing';if(_0x4f49ec[_0x491815(0x1f7)](![])){}else await unlockOrders();}else{if(validateOrdersState==_0x491815(0x24e)){if(_0x4f49ec['includes'](![])){}else await unlockOrders();}else{if(validateOrdersState=='final'){let _0x1176e5=!![];if(_0x4f49ec[_0x491815(0x1f7)](![])){if(config[_0x491815(0x102)]=='market')logHistory('success',_0x491815(0x167)+Math[_0x491815(0x1b9)](_0x34dbd1*validateOrderInterval/0xea60)+_0x491815(0x143)+_0x371e1b),await unlockOrders(!![]);else{_0x1176e5=await cancelOrders();if(_0x1176e5)logHistory(_0x491815(0x210),_0x491815(0x28a)+Math[_0x491815(0x1b9)](_0x34dbd1*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x371e1b),await unlockOrders(!![]);else{validateOrdersState=_0x491815(0x24e),logHistory(_0x491815(0x19b),_0x491815(0x23b)+Math['round'](_0x34dbd1*validateOrderInterval/0xea60)+_0x491815(0x143)+_0x371e1b),logHistory(_0x491815(0x19b),_0x491815(0x200));const _0x1dddab=config[_0x491815(0x102)]=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0x491815(0x1d3)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x5de8c5=_0x491815;validateOrders(_0x5de8c5(0xc2));},_0x1dddab);}}}else await unlockOrders(!![]);}else{if(validateOrdersState==_0x491815(0x1bd)){if(config['ordertype']!=_0x491815(0x113))logHistory(_0x491815(0x210),_0x491815(0x265)+_0x371e1b);await unlockOrders(!![]);}}}}}async function cancelOrders(){const _0x5e9b5f=_0x38e2f8;let _0x57c3f1=!![],_0x46d3f4;for(const _0x30961d of lastOrders){let _0x22ec82=![],_0x10bbab=0x0;while(!_0x22ec82&&_0x10bbab<maxRetries){try{const _0xcffb16=await exchange[_0x5e9b5f(0x23f)](_0x30961d[_0x5e9b5f(0x203)],_0x30961d[_0x5e9b5f(0x135)]);_0x22ec82=!![];}catch(_0x2f8fcb){_0x2f8fcb[_0x5e9b5f(0x1ae)]()[_0x5e9b5f(0x1f7)]('OrderNotFound')?_0x22ec82=!![]:(_0x46d3f4=_0x2f8fcb,_0x22ec82=![]);}!_0x22ec82&&(_0x10bbab++,await sleep(retryInterval));}_0x57c3f1=_0x57c3f1&&_0x22ec82;}return!_0x57c3f1&&await handleError(_0x46d3f4,_0x5e9b5f(0x259)),_0x57c3f1;}async function initCoinResults(_0x54ebf6){const _0x4d060f=_0x38e2f8;_0x54ebf6?logger[_0x4d060f(0x20d)](_0x4d060f(0xd4)+_0x54ebf6):logger[_0x4d060f(0x20d)](_0x4d060f(0x1c1)),config[_0x4d060f(0x1b1)]['forEach'](_0x4117fb=>{const _0x3a1d3a=_0x4d060f;if(!_0x4117fb['excluded']&&_0x4117fb[_0x3a1d3a(0x1b6)]!=config[_0x3a1d3a(0x1c9)]){const _0x3e4f3e=currentCoins[_0x3a1d3a(0x144)](_0x537d00=>_0x537d00['coin']==_0x4117fb[_0x3a1d3a(0x1b6)]),_0x31edc3=gTicker[noslash(_0x4117fb[_0x3a1d3a(0x135)])];let _0x4e2ea8=_0x3e4f3e?_0x3e4f3e[_0x3a1d3a(0x27f)]:null,_0x3be7aa=_0x4117fb[_0x3a1d3a(0x271)]?0x1/_0x31edc3:_0x31edc3,_0x3c3a2a;config[_0x3a1d3a(0x279)]['forEach'](_0x1b357c=>{const _0x441433=_0x3a1d3a;!_0x3c3a2a&&(_0x3c3a2a=_0x1b357c[_0x441433(0x14f)][_0x441433(0x144)](_0x4c8079=>_0x4c8079[_0x441433(0x1b6)]==_0x4117fb[_0x441433(0x1b6)]),_0x3c3a2a&&(_0x4e2ea8=_0x3c3a2a[_0x441433(0x27f)],_0x3be7aa=_0x3c3a2a[_0x441433(0x1d9)]));});let _0x181c02=dbCoinResults[_0x3a1d3a(0xc3)](_0x3a1d3a(0x218))['find']({'coin':_0x4117fb[_0x3a1d3a(0x1b6)]})[_0x3a1d3a(0x145)]();if(!_0x181c02){const _0x4c9356={'coin':_0x4117fb[_0x3a1d3a(0x1b6)],'number':_0x4e2ea8,'breakeven':_0x3be7aa,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get'](_0x3a1d3a(0x218))[_0x3a1d3a(0x1ad)](_0x4c9356)[_0x3a1d3a(0x10f)]();}else{if(_0x54ebf6&&_0x4117fb[_0x3a1d3a(0x1b6)]==_0x54ebf6){const _0x4e87f1={'coin':_0x4117fb[_0x3a1d3a(0x1b6)],'number':_0x4e2ea8,'breakeven':_0x3be7aa,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x3a1d3a(0xc3)](_0x3a1d3a(0x218))[_0x3a1d3a(0x144)]({'coin':_0x4117fb[_0x3a1d3a(0x1b6)]})[_0x3a1d3a(0x1d7)](_0x4e87f1)[_0x3a1d3a(0x10f)]();}}}});}async function placeOrder(_0x2ac2ed){const _0x37c69f=_0x38e2f8,_0x4731fd=config[_0x37c69f(0x102)]==_0x37c69f(0x113)?_0x37c69f(0x113):'limit';if(lockOrders==ORDERS[_0x37c69f(0x17d)]&&!coolingDown){setLockOrders(ORDERS['LOCKED']);while(transactionDetectionOngoing){await sleep(0x64);}logger[_0x37c69f(0x20d)]('Placing\x20order\x20for:\x20'+_0x2ac2ed[_0x37c69f(0x1f4)](_0x294f8e=>_0x294f8e[_0x37c69f(0x1b6)])['join'](',\x20')),lastCoinsToBalance='',allOrdersPlaced=![],validateOrdersState='initial';let _0x29bec6=![];lastOrders=[];const _0x32d6a4=config[_0x37c69f(0xc0)];for(const _0x4081ba of _0x2ac2ed){let _0x3797ab,_0x409fbf,_0x5c5918,_0x22b599,_0x1ff67d,_0x4a9d57=_0x4081ba[_0x37c69f(0x135)];logger[_0x37c69f(0x20d)]('Trigger:\x20'+_0x4081ba[_0x37c69f(0x1b6)]+'\x20'+_0x4081ba['number']+'\x20'+_0x4081ba[_0x37c69f(0x184)]+'\x20'+_0x4081ba[_0x37c69f(0x12a)]+'%\x20'+_0x4081ba[_0x37c69f(0x11a)]+'%\x20'+(0x64*_0x4081ba[_0x37c69f(0x1d0)])[_0x37c69f(0x266)](0x2)+_0x37c69f(0x117)+_0x32d6a4[_0x37c69f(0x266)](0x2)+'%)');const _0x5054dc=currentCoins[_0x37c69f(0x144)](_0x16158e=>_0x16158e[_0x37c69f(0x1b6)]==_0x4081ba[_0x37c69f(0x1b6)]);_0x5054dc&&(_0x5054dc[_0x37c69f(0x23c)]=_0x4081ba[_0x37c69f(0x27f)]);try{const _0x7ae80f=await exchange[_0x37c69f(0x19f)](_0x4a9d57);_0x3797ab=_0x4081ba[_0x37c69f(0x271)]?0x1/_0x4081ba[_0x37c69f(0x184)]:_0x4081ba[_0x37c69f(0x184)],_0x409fbf=_0x7ae80f['bid'],_0x5c5918=_0x7ae80f[_0x37c69f(0x258)];_0x4081ba['reverse']?(_0x22b599=_0x4081ba[_0x37c69f(0x281)]==_0x37c69f(0x1bb)?'sell':_0x37c69f(0x1bb),_0x1ff67d=Math['abs'](_0x4081ba[_0x37c69f(0x10c)])/_0x3797ab):(_0x22b599=_0x4081ba[_0x37c69f(0x281)],_0x1ff67d=Math['abs'](_0x4081ba[_0x37c69f(0x10c)]));_0x4731fd=='limit'&&(config['ordertype']==_0x37c69f(0x1d6)&&(_0x3797ab=_0x22b599==_0x37c69f(0x1bb)?_0x409fbf:_0x5c5918),config['ordertype']==_0x37c69f(0x1c0)&&(_0x3797ab=_0x22b599=='buy'?_0x5c5918:_0x409fbf));_0x1ff67d=formatResult(_0x1ff67d,0x8),_0x3797ab=formatResult(_0x3797ab,0x8);const _0x459da4=_0x22b599==_0x37c69f(0x24a)?config[_0x37c69f(0x18a)]?String['fromCodePoint']('0x'+config[_0x37c69f(0x18a)])+'\x20':'':config[_0x37c69f(0x22a)]?String[_0x37c69f(0x18f)]('0x'+config[_0x37c69f(0x22a)])+'\x20':'',_0x2a0fdf=_0x4731fd=='market'?'Market':config[_0x37c69f(0x102)]==_0x37c69f(0x1d6)?_0x37c69f(0x1e0):_0x37c69f(0x20f),_0x867925=(Math[_0x37c69f(0xcb)](Math[_0x37c69f(0x170)]()*0x35a4e900)+0x5f5e100)[_0x37c69f(0x1ae)]();lastOrders[_0x37c69f(0x1ad)]({'customId':_0x867925,'symbol':_0x4a9d57,'coin':_0x4081ba['coin'],'amount':_0x1ff67d,'price':_0x3797ab,'side':_0x22b599,'reverse':_0x4081ba[_0x37c69f(0x271)],'filled':0x0});let _0x1150f0;_0x4731fd==_0x37c69f(0x113)?_0x22b599==_0x37c69f(0x1bb)&&[_0x37c69f(0x133),_0x37c69f(0x1da),_0x37c69f(0x127),_0x37c69f(0x236),_0x37c69f(0x142)]['includes'](config[_0x37c69f(0xf2)])?_0x1150f0=await exchange[_0x37c69f(0x17c)](_0x4a9d57,_0x4731fd,_0x22b599,_0x1ff67d,_0x3797ab):_0x1150f0=await exchange[_0x37c69f(0x17c)](_0x4a9d57,_0x4731fd,_0x22b599,_0x1ff67d,undefined):_0x1150f0=await exchange[_0x37c69f(0x17c)](_0x4a9d57,_0x4731fd,_0x22b599,_0x1ff67d,_0x3797ab);const _0x18f4fa=lastOrders['length']-0x1;if(_0x18f4fa>=0x0&&lastOrders[_0x18f4fa][_0x37c69f(0x22b)]==_0x867925){lastOrders[_0x18f4fa][_0x37c69f(0x203)]=_0x1150f0['id'];if(_0x1150f0[_0x37c69f(0x1ce)])lastOrders[_0x18f4fa][_0x37c69f(0x1ce)]=_0x1150f0[_0x37c69f(0x1ce)];if(_0x1150f0[_0x37c69f(0x1d9)])lastOrders[_0x18f4fa][_0x37c69f(0x1d9)]=_0x1150f0[_0x37c69f(0x1d9)];lastOrders[_0x18f4fa][_0x37c69f(0x1ac)]=_0x1150f0['fee'];}if(_0x1150f0[_0x37c69f(0x1ce)])_0x1ff67d=_0x1150f0[_0x37c69f(0x1ce)];if(_0x1150f0['price'])_0x3797ab=_0x1150f0[_0x37c69f(0x1d9)];if(_0x4731fd=='market')logHistory(_0x37c69f(0xd9),''+_0x459da4+_0x2a0fdf+_0x37c69f(0x11c)+_0x4a9d57+'\x20'+_0x22b599+'\x20#'+formatResult(_0x1ff67d,0x8)+'\x20@'+formatResult(_0x3797ab,0x8));else logHistory('order',''+_0x459da4+_0x2a0fdf+'\x20order:\x20'+_0x4a9d57+'\x20'+_0x22b599+'\x20#'+formatResult(_0x1ff67d,0x8)+'\x20@'+formatResult(_0x3797ab,0x8));logger[_0x37c69f(0x20d)](_0x37c69f(0x198)+_0x1150f0['id']+_0x37c69f(0x274)+_0x867925);if(config[_0x37c69f(0xef)]!=0x0){let _0x7287cf=null;if(cooldownTracker['length']==config[_0x37c69f(0xef)]-0x1)_0x7287cf=cooldownTracker['shift']();const _0x2c2428=getTimeStamp();cooldownTracker[_0x37c69f(0x1ad)](_0x2c2428);if(_0x7287cf){const _0x4b2185=fns[_0x37c69f(0x114)](new Date(_0x2c2428),new Date(_0x7287cf));if(_0x4b2185<cooldownInterval){logHistory(_0x37c69f(0x19b),'Executed\x20'+config[_0x37c69f(0xef)]+_0x37c69f(0x196)+cooldownInterval/0x3c+'\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20'+cooldownPeriod/(0xe10*0x3e8)+'\x20hour'),coolingDown=!![];break;}}}}catch(_0x41aa9a){if(_0x41aa9a['toString']()[_0x37c69f(0x1f7)](_0x37c69f(0x216)))lastOrders=lastOrders[_0x37c69f(0xd6)](_0x4e89b5=>_0x4e89b5[_0x37c69f(0x135)]!=_0x4a9d57),logHistory(_0x37c69f(0x19b),'Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x4a9d57),_0x29bec6=!![];else{if(_0x41aa9a[_0x37c69f(0x1ae)]()[_0x37c69f(0x1f7)](_0x37c69f(0x25a)))lastOrders=lastOrders[_0x37c69f(0xd6)](_0x5c42ee=>_0x5c42ee[_0x37c69f(0x135)]!=_0x4a9d57),logHistory(_0x37c69f(0x19b),_0x37c69f(0x136)+_0x4a9d57),_0x29bec6=!![];else{if(_0x41aa9a[_0x37c69f(0x1ae)]()[_0x37c69f(0x1f7)](_0x37c69f(0x22f)))lastOrders=lastOrders[_0x37c69f(0xd6)](_0x403dbf=>_0x403dbf[_0x37c69f(0x135)]!=_0x4a9d57),logHistory(_0x37c69f(0x19b),_0x37c69f(0x137)+_0x4a9d57),logger['debug'](_0x41aa9a),_0x29bec6=!![];else _0x41aa9a[_0x37c69f(0x1ae)]()['includes'](_0x37c69f(0x17b))?(lastOrders=lastOrders[_0x37c69f(0xd6)](_0x2dd743=>_0x2dd743[_0x37c69f(0x135)]!=_0x4a9d57),logHistory(_0x37c69f(0x19b),_0x37c69f(0xde)+_0x4a9d57),_0x29bec6=!![]):(lastOrders=lastOrders['filter'](_0x23c991=>_0x23c991[_0x37c69f(0x135)]!=_0x4a9d57),await handleError(_0x41aa9a,_0x37c69f(0x129),_0x4a9d57));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x37c69f(0x1b3)]>0x0){const _0x10af53=config[_0x37c69f(0x102)]==_0x37c69f(0x113)?validateOrderTimeout*0x3c*0x3e8:config[_0x37c69f(0x1d3)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0xf08fe3=_0x37c69f;validateOrders(_0xf08fe3(0xc2));},_0x10af53);}else unlockOrders();_0x29bec6&&config[_0x37c69f(0xc5)]&&(logHistory(_0x37c69f(0x19b),_0x37c69f(0x104)+pauseBotMsg),await pauseBot(pauseBotInterval)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x37c69f(0x210),'Cooldown\x20ended\x20-\x20balancing\x20resumed'));}else{if(coolingDown)!config['headless']&&logHistory(_0x37c69f(0x19b),_0x37c69f(0xbe));else lockOrders!=ORDERS[_0x37c69f(0x17d)]&&(!config['headless']&&(config['ordertype']==_0x37c69f(0x113)?logHistory(_0x37c69f(0x19b),_0x37c69f(0x11d)):logHistory(_0x37c69f(0x19b),_0x37c69f(0x1ed))));}}function persistOpenOrders(_0x5424f9){const _0x14d792=_0x38e2f8,_0x1b76c3={...config,'openOrders':_0x5424f9};let _0x5b9769=dbConfig[_0x14d792(0xc3)](_0x14d792(0x13d))[_0x14d792(0x144)]({'botID':botID})[_0x14d792(0x145)]();_0x5b9769&&dbConfig[_0x14d792(0xc3)](_0x14d792(0x13d))[_0x14d792(0x144)]({'botID':botID})[_0x14d792(0x1d7)](_0x1b76c3)['write']();}function restoreOrders(){const _0x1355ce=_0x38e2f8;let _0x5bd835;config[_0x1355ce(0x121)]&&allOpenOrders[_0x1355ce(0xbf)](_0x3c5e13=>{const _0x126d86=_0x1355ce,_0x3fb208=config['openOrders'][_0x126d86(0x144)](_0x5a2766=>_0x5a2766[_0x126d86(0x203)]==_0x3c5e13['id']);_0x3fb208&&(lastOrders[_0x126d86(0x1ad)](_0x3fb208),_0x5bd835=_0x3c5e13[_0x126d86(0x109)]);});if(lastOrders[_0x1355ce(0x1b3)]>0x0){setLockOrders(ORDERS[_0x1355ce(0x245)]),validateOrdersState='ongoing',allOrdersPlaced=!![];const _0x3379f1=new Date()[_0x1355ce(0x148)](),_0x2326f8=config[_0x1355ce(0x102)]==_0x1355ce(0x113)?validateOrderTimeout*0x3c*0x3e8:config[_0x1355ce(0x1d3)]*0x3c*0x3e8;if(_0x5bd835+_0x2326f8>_0x3379f1){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x5bd835+_0x2326f8-_0x3379f1);}else validateOrders(_0x1355ce(0xc2));}}async function sendMetricsTelegram(){const _0x1dcd25=_0x38e2f8;if(!coinsLoaded){process[_0x1dcd25(0x1b5)]({'telegrammsg':_0x1dcd25(0x1bf)},_0x1da680=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x2585db='';if(config[_0x1dcd25(0x101)])_0x2585db=_0x1dcd25(0x1de)+config[_0x1dcd25(0x1df)]+'\x20metrics:</b>\x20\x0a\x0a';else _0x2585db='<b>Bot\x20'+botID+_0x1dcd25(0x27c);const _0x5e2794=config[_0x1dcd25(0x1c9)],_0x56e710=config[_0x1dcd25(0x21c)],_0x38790f=getKPIs(_0x1dcd25(0x1c9)),_0x25422b=getKPIs(_0x1dcd25(0x21c),_0x56e710),_0x33a63f=getKPIs(_0x1dcd25(0x204)),_0x55093f=getKPIs(_0x1dcd25(0xfb),_0x56e710),_0x1dd3d0=getKPIs('pnl-basecoin'),_0x2e759a=getKPIs(_0x1dcd25(0x10d),_0x56e710);_0x5e2794[_0x1dcd25(0x1f7)](_0x56e710)?(_0x2585db+=_0x1dcd25(0x179),_0x2585db+=_0x1dcd25(0x211)+_0x5e2794+':\x20'+_0x38790f[_0x1dcd25(0x145)]+'\x20('+_0x38790f[_0x1dcd25(0xf7)]+'%)\x0a',_0x2585db+=_0x1dcd25(0x17a)+_0x5e2794+':\x20'+_0x33a63f[_0x1dcd25(0x145)]+'\x20('+_0x33a63f[_0x1dcd25(0xf7)]+'%)\x0a',_0x2585db+=_0x1dcd25(0x13e)+_0x5e2794+':\x20'+_0x1dd3d0[_0x1dcd25(0x145)]+'\x20('+_0x1dd3d0[_0x1dcd25(0xf7)]+'%)\x0a',_0x2585db+='</pre>'):(_0x2585db+=_0x1dcd25(0x179),_0x2585db+=_0x1dcd25(0x211)+_0x5e2794+':\x20'+_0x38790f[_0x1dcd25(0x145)]+'\x20('+_0x38790f[_0x1dcd25(0xf7)]+_0x1dcd25(0x1c7),_0x2585db+='Value\x20'+_0x56e710+':\x20'+_0x25422b[_0x1dcd25(0x145)]+'\x20('+_0x25422b[_0x1dcd25(0xf7)]+_0x1dcd25(0x1c7),_0x2585db+=_0x1dcd25(0x17a)+_0x5e2794+':\x20'+_0x33a63f['value']+'\x20('+_0x33a63f[_0x1dcd25(0xf7)]+_0x1dcd25(0x1c7),_0x2585db+=_0x1dcd25(0x17a)+_0x56e710+':\x20'+_0x55093f['value']+'\x20('+_0x55093f[_0x1dcd25(0xf7)]+_0x1dcd25(0x1c7),_0x2585db+=_0x1dcd25(0x13e)+_0x5e2794+':\x20'+_0x1dd3d0[_0x1dcd25(0x145)]+'\x20('+_0x1dd3d0[_0x1dcd25(0xf7)]+_0x1dcd25(0x1c7),_0x2585db+=_0x1dcd25(0x13e)+_0x56e710+':\x20'+_0x2e759a['value']+'\x20('+_0x2e759a['change']+_0x1dcd25(0x1c7),_0x2585db+=_0x1dcd25(0xf8)),process['send']({'telegrammsg':_0x2585db},_0x45dcbe=>{});}async function sendPortfolioTelegram(){const _0xbe9469=_0x38e2f8;if(!coinsLoaded||!currentCoins[0x0][_0xbe9469(0x12a)]){process[_0xbe9469(0x1b5)]({'telegrammsg':_0xbe9469(0x1bf)},_0x397877=>{});return;}let _0x3ec053='';if(config[_0xbe9469(0x101)])_0x3ec053=_0xbe9469(0x1de)+config[_0xbe9469(0x1df)]+_0xbe9469(0x16a);else _0x3ec053=_0xbe9469(0x154)+botID+_0xbe9469(0x16a);_0x3ec053+=_0xbe9469(0x179),_0x3ec053+=_0xbe9469(0x22d),_0x3ec053+=_0xbe9469(0x1c4),_0x3ec053+=_0xbe9469(0x22d),currentCoins[_0xbe9469(0xbf)](_0xc26cdc=>{const _0xe00bd4=_0xbe9469;_0x3ec053+=_0xc26cdc[_0xe00bd4(0x1b6)][_0xe00bd4(0x13c)](0x7)+'|\x20'+formatPad(_0xc26cdc['distribution'],0x2,0x6)+'|\x20'+formatPad(_0xc26cdc[_0xe00bd4(0x11a)],0x2,0x6)+'|\x20'+formatPad(_0xc26cdc[_0xe00bd4(0x1d0)]*0x64,0x2,0x6)+'\x0a';}),_0x3ec053+=_0xbe9469(0xf8),process[_0xbe9469(0x1b5)]({'telegrammsg':_0x3ec053},_0x5c40c8=>{});}function formatPad(_0x195dd0,_0x5a4177,_0x32951c){const _0x5c4515=_0x38e2f8,_0x1816fb=formatResultString(_0x195dd0,_0x5a4177);return _0x1816fb?_0x1816fb[_0x5c4515(0x1fb)](_0x32951c):''['padStart'](_0x32951c);}function logHistory(_0x518419,_0x3bff9d,_0x24ffb1=''){const _0x5202bd=_0x38e2f8;logger[_0x5202bd(0x1cd)](''+_0x3bff9d);let _0x4817b1={'time':getTimeStamp(),'type':_0x518419,'event':_0x3bff9d};dbLogs['get']('logs')['push'](_0x4817b1)[_0x5202bd(0x10f)]();if(_0x24ffb1=='')_0x24ffb1=_0x3bff9d;proxyEmit(_0x5202bd(0x27e),{'log':_0x4817b1,'summary':_0x24ffb1}),process[_0x5202bd(0x1b5)]({'telegram':{..._0x4817b1,'botname':config[_0x5202bd(0x1df)],'showname':config[_0x5202bd(0x101)]}},_0x34027d=>{});}function emitHistory(_0x1de2df={}){const _0x4c3700=_0x38e2f8;Object[_0x4c3700(0x1aa)](_0x1de2df)[_0x4c3700(0x1b3)]==0x0&&(_0x1de2df={'type':[_0x4c3700(0xd9),_0x4c3700(0x27e)],'event':'','page':0x1});if(_0x1de2df[_0x4c3700(0xc7)][_0x4c3700(0x1f7)](_0x4c3700(0x27e)))_0x1de2df['type'][_0x4c3700(0x287)](_0x1de2df[_0x4c3700(0xc7)][_0x4c3700(0xf4)]('event'),0x1,'error','warning','success');if(dbLogs[_0x4c3700(0x12d)](_0x4c3700(0xdf))[_0x4c3700(0x145)]()){let _0x5600ef=dbLogs[_0x4c3700(0xc3)](_0x4c3700(0xdf))[_0x4c3700(0xd6)](_0x536f0d=>{const _0x34e008=_0x4c3700;if(_0x1de2df[_0x34e008(0xc7)][_0x34e008(0x1b3)]==0x0)return![];else return _0x1de2df[_0x34e008(0xc7)][_0x34e008(0x1f7)](_0x536f0d[_0x34e008(0xc7)]);})[_0x4c3700(0xd6)](_0x2236ed=>{const _0x37069a=_0x4c3700;if(_0x1de2df['event']=='')return!![];else return _0x2236ed[_0x37069a(0x27e)][_0x37069a(0x1a2)]()[_0x37069a(0x1f7)](_0x1de2df[_0x37069a(0x27e)][_0x37069a(0x1a2)]());})['sortBy']('time'),_0x16014f=_0x5600ef[_0x4c3700(0x145)]()[_0x4c3700(0x1b3)];_0x5600ef=_0x5600ef['reverse']()[_0x4c3700(0x12b)]((_0x1de2df[_0x4c3700(0x19c)]-0x1)*logPageSize,_0x1de2df[_0x4c3700(0x19c)]*logPageSize-0x1)[_0x4c3700(0x271)]()['value'](),proxyEmit(_0x4c3700(0xf3),{'logs':_0x5600ef,'total':_0x16014f});}else proxyEmit(_0x4c3700(0xf3),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x4a40a4){const _0xfdb3f7=_0x38e2f8;if(dbLogs[_0xfdb3f7(0x12d)](_0xfdb3f7(0xdf))[_0xfdb3f7(0x145)]()){const _0x2ab1a1=dbLogs[_0xfdb3f7(0xc3)](_0xfdb3f7(0xdf))[_0xfdb3f7(0x253)]('time')['filter'](_0x5315d8=>{const _0xf96a04=_0xfdb3f7;return _0x5315d8[_0xf96a04(0xc7)]==_0xf96a04(0xd9);})[_0xfdb3f7(0x145)]();dbLogs[_0xfdb3f7(0xc3)]('logs')[_0xfdb3f7(0x233)]()['write'](),dbLogs[_0xfdb3f7(0xc3)](_0xfdb3f7(0xdf))['assign'](_0x2ab1a1)[_0xfdb3f7(0x10f)](),emitHistory(_0x4a40a4);}}async function pauseBot(_0x2d43fc=pauseBotIntervalShort,_0x4a971a,_0x1630ed,_0x7d4723=![]){const _0x11924e=_0x38e2f8,_0x4d78a1=new Date()['getTime']();if(!lastErrorShown||_0x4d78a1-lastErrorShown>=_0x2d43fc){lastErrorShown=_0x4d78a1;if(!lastBotPause)lastBotPause=_0x4d78a1,consecutivePauses=0x1;else{if(_0x4d78a1-lastBotPause-_0x2d43fc<0x5a*0x3e8){consecutivePauses++;if(consecutivePauses>maxPauseRetries){if(_0x7d4723){logHistory('error',_0x4a971a+_0x11924e(0x131)),await killBot();return;}else logHistory(_0x11924e(0x19b),_0x4a971a+pauseBotMsg),_0x2d43fc=pauseBotInterval;}}else consecutivePauses=0x1;lastBotPause=_0x4d78a1;}_0x1630ed?logger[_0x11924e(0x20d)]('('+consecutivePauses+')\x20'+_0x4a971a+_0x11924e(0x18b),_0x1630ed):logger['debug']('('+consecutivePauses+')\x20'+_0x4a971a);if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);await sleep(_0x2d43fc),botPaused=![],_0x2d43fc==pauseBotIntervalShort?resumeBot(!![]):resumeBot(![]);}}}async function killBot(){const _0x2a50c8=_0x38e2f8;botPaused=!![],await sleep(0x3e8),process[_0x2a50c8(0x1b5)]({'stop':_0x2a50c8(0x28e)},_0x2665e4=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x2be963,_0x5cc842,_0x2589be=![]){const _0x56ec64=_0x38e2f8;if(botPaused)return;let _0x44b838;const _0x10cda1=config['exchange']||_0x56ec64(0xd3);if(_0x5cc842)logger[_0x56ec64(0x20d)](_0x56ec64(0x15f)+_0x5cc842);const _0x4d0ccf=()=>{const _0x1a5063=_0x56ec64;loading[_0x1a5063(0x19b)]=_0x1a5063(0x1ff),emitLoadingProgress();};if(_0x2be963['toString']()[_0x56ec64(0x1f7)]('API-key\x20format\x20invalid'))logHistory(_0x56ec64(0x19b),_0x10cda1+_0x56ec64(0x146)),_0x4d0ccf();else{if(_0x2be963[_0x56ec64(0x1ae)]()[_0x56ec64(0x1f7)](_0x56ec64(0x1e7)))logHistory(_0x56ec64(0x19b),_0x10cda1+_0x56ec64(0x123)),_0x4d0ccf();else{if(_0x2be963[_0x56ec64(0x1ae)]()['includes'](_0x56ec64(0x176)))config[_0x56ec64(0x278)]?_0x44b838=_0x10cda1+'\x20API\x20key,\x20secret\x20or\x20password\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange':_0x44b838=_0x10cda1+_0x56ec64(0x1d2),logHistory(_0x56ec64(0x19b),_0x44b838+_0x56ec64(0xeb)),_0x4d0ccf();else{if(_0x2be963[_0x56ec64(0x1ae)]()[_0x56ec64(0x1f7)](_0x56ec64(0x1cb)))logHistory(_0x56ec64(0x19b),_0x10cda1+_0x56ec64(0x205)),_0x4d0ccf();else{if(!_0x2589be)await handleError(_0x2be963,null);}}}}}async function handleError(_0x2bc9bc,_0x5efbd0,_0x5354f6=''){const _0x534b04=_0x38e2f8;if(botPaused)return;let _0x3aec6a;const _0x338c3a=config[_0x534b04(0xf2)]||_0x534b04(0xd3);if(_0x5efbd0)logger[_0x534b04(0x20d)](_0x534b04(0x15f)+_0x5efbd0);if(_0x2bc9bc[_0x534b04(0x1ae)]()['includes'](_0x534b04(0x197)))_0x3aec6a=_0x338c3a+_0x534b04(0x223),await pauseBot(undefined,_0x3aec6a,_0x2bc9bc);else{if(_0x2bc9bc['toString']()['includes'](_0x534b04(0x15d)))_0x3aec6a=_0x338c3a+_0x534b04(0x119),await pauseBot(undefined,_0x3aec6a,_0x2bc9bc);else{if(_0x2bc9bc[_0x534b04(0x1ae)]()[_0x534b04(0x1f7)](_0x534b04(0x188))||_0x2bc9bc['toString']()[_0x534b04(0x1f7)](_0x534b04(0x1fc)))_0x3aec6a=_0x338c3a+_0x534b04(0xfe),await pauseBot(undefined,_0x3aec6a,_0x2bc9bc[_0x534b04(0x1ae)]());else{if(_0x2bc9bc['toString']()[_0x534b04(0x1f7)](_0x534b04(0x219)))_0x3aec6a=_0x338c3a+_0x534b04(0x270),await pauseBot(undefined,_0x3aec6a,_0x2bc9bc[_0x534b04(0x1ae)]());else{if(_0x2bc9bc[_0x534b04(0x1ae)]()[_0x534b04(0x1f7)](_0x534b04(0x262)))_0x3aec6a=_0x338c3a+_0x534b04(0x221),await pauseBot(undefined,_0x3aec6a,_0x2bc9bc[_0x534b04(0x1ae)]());else{if(_0x2bc9bc['toString']()[_0x534b04(0x1a2)]()[_0x534b04(0x1f7)]('timestamp')||_0x2bc9bc['toString']()[_0x534b04(0x1a2)]()[_0x534b04(0x1f7)](_0x534b04(0x230)))_0x3aec6a=_0x534b04(0x163),await pauseBot(undefined,_0x3aec6a,_0x2bc9bc[_0x534b04(0x1ae)]());else{if(_0x2bc9bc[_0x534b04(0x1ae)]()[_0x534b04(0x1f7)](_0x534b04(0x149)))_0x3aec6a=_0x338c3a+_0x534b04(0x1ec),await pauseBot(undefined,_0x3aec6a,_0x2bc9bc[_0x534b04(0x1ae)]());else{if(_0x2bc9bc instanceof ccxt[_0x534b04(0x25d)])_0x3aec6a=_0x338c3a+'\x20network\x20error:\x20'+_0x2bc9bc['toString'](),logger['debug'](_0x534b04(0x17f),_0x2bc9bc),await pauseBot(undefined,_0x3aec6a,_0x2bc9bc);else{if(_0x2bc9bc[_0x534b04(0x1ae)]()[_0x534b04(0x1f7)]('API-key\x20format\x20invalid'))logHistory(_0x534b04(0x19b),_0x338c3a+_0x534b04(0x150)),logHistory(_0x534b04(0x19b),_0x534b04(0x1f8)),await killBot();else{if(_0x2bc9bc[_0x534b04(0x1ae)]()[_0x534b04(0x1f7)](_0x534b04(0x1e7)))logHistory('error',_0x338c3a+_0x534b04(0x118)),logHistory(_0x534b04(0x19b),_0x534b04(0x1f8)),await killBot();else{if(_0x2bc9bc['toString']()[_0x534b04(0x1f7)](_0x534b04(0x176))&&_0x2bc9bc[_0x534b04(0x1ae)]()['includes']('token\x20is\x20expired'))_0x3aec6a=_0x338c3a+_0x534b04(0x17e),await pauseBot(undefined,_0x3aec6a,_0x2bc9bc,!![]);else{if(_0x2bc9bc[_0x534b04(0x1ae)]()[_0x534b04(0x1f7)](_0x534b04(0x176)))config[_0x534b04(0x278)]?_0x3aec6a=_0x338c3a+'\x20API\x20key,\x20secret\x20or\x20password\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange':_0x3aec6a=_0x338c3a+_0x534b04(0x1d2),logHistory(_0x534b04(0x19b),_0x3aec6a),logHistory(_0x534b04(0x19b),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)'),await killBot();else{if(_0x2bc9bc[_0x534b04(0x1ae)]()[_0x534b04(0x1f7)](_0x534b04(0x1cb)))logHistory(_0x534b04(0x19b),_0x338c3a+_0x534b04(0x134)),logHistory(_0x534b04(0x19b),_0x534b04(0x1f8)),await killBot();else{if(_0x2bc9bc[_0x534b04(0x1ae)]()[_0x534b04(0x1f7)]('InsufficientFunds'))logHistory(_0x534b04(0x19b),_0x534b04(0x193)+_0x5354f6),logger[_0x534b04(0x20d)](_0x534b04(0x191),_0x2bc9bc);else{if(_0x2bc9bc instanceof ccxt[_0x534b04(0x263)]){_0x3aec6a=_0x338c3a+_0x534b04(0x168)+_0x2bc9bc[_0x534b04(0x1ae)]();if(_0x5354f6)_0x3aec6a+=_0x534b04(0xe6)+_0x5354f6;await pauseBot(undefined,_0x3aec6a,_0x2bc9bc);}else{_0x3aec6a='Unknown\x20error:\x20'+_0x2bc9bc['toString']();if(_0x5354f6)_0x3aec6a+=_0x534b04(0xe6)+_0x5354f6;await pauseBot(undefined,_0x3aec6a);}}}}}}}}}}}}}}}}function decryptRSA(_0x23c052,_0x2db255){const _0x446a47=_0x38e2f8,_0x5a39ce=forge['pki'][_0x446a47(0x175)](_0x23c052),_0x304c9e=_0x5a39ce[_0x446a47(0x1e8)](forge[_0x446a47(0x132)][_0x446a47(0x255)](_0x2db255),_0x446a47(0x292),{'md':forge['md'][_0x446a47(0xcc)][_0x446a47(0x1ab)](),'mgf1':{'md':forge['md'][_0x446a47(0xcc)]['create']()}});return _0x304c9e;}async function withRetry(_0x1dacf7,_0x401a07){const _0x46e479=_0x38e2f8;let _0x16c38e=![],_0x51544b=0x0,_0xf87ce3,_0x34c999;while(_0x51544b<maxRetries){try{_0xf87ce3=await _0x401a07();break;}catch(_0x457322){_0x34c999=_0x457322,!_0x16c38e?(_0x16c38e=!![],logger[_0x46e479(0x20d)]('RETRY\x20-\x20Error\x20in\x20'+_0x1dacf7+':',_0x457322[_0x46e479(0x1ae)]())):await sleep(retryInterval);}_0x51544b++;}if(_0x51544b==0x0)return _0xf87ce3;if(_0x51544b>=maxRetries)throw _0x34c999;else return logger['debug'](_0x46e479(0x164)+_0x51544b+_0x46e479(0x10a)),_0xf87ce3;}function formatResult(_0x34ff0b,_0x540dcc){return parseFloat(_0x34ff0b['toFixed'](_0x540dcc));}function formatResultTruncate(_0x11c89f,_0x5d5268){const _0x32b6b8=_0x38e2f8;let _0x20ff0b=formatResultString(_0x11c89f,0xa),_0x5be56a=_0x20ff0b[_0x32b6b8(0xf4)]('.');return _0x5be56a!=-0x1&&(_0x20ff0b=_0x20ff0b[_0x32b6b8(0x12b)](0x0,_0x5be56a+_0x5d5268+0x1)),Number(_0x20ff0b);}function formatResultString(_0x2451a1,_0x2e13e1){const _0x2c014f=_0x38e2f8;let _0x279930;if(!(''+_0x2451a1)[_0x2c014f(0x1f7)]('e'))_0x279930=+(Math['round'](_0x2451a1+'e+'+_0x2e13e1)+'e-'+_0x2e13e1);else{let _0x3edfbb=(''+_0x2451a1)['split']('e'),_0x42fc90='';+_0x3edfbb[0x1]+_0x2e13e1>0x0&&(_0x42fc90='+'),_0x279930=+(Math[_0x2c014f(0x1b9)](+_0x3edfbb[0x0]+'e'+_0x42fc90+(+_0x3edfbb[0x1]+_0x2e13e1))+'e-'+_0x2e13e1);}return Number(_0x279930)[_0x2c014f(0x266)](_0x2e13e1);}function getServerTime(){const _0x2e65e3=_0x38e2f8,_0x25843d=new Date();return _0x25843d[_0x2e65e3(0x1f5)]()+'/'+(_0x25843d[_0x2e65e3(0x1a8)]()+0x1)['toString']()[_0x2e65e3(0x1fb)](0x2,'0')+'/'+_0x25843d[_0x2e65e3(0x213)]()[_0x2e65e3(0x1ae)]()[_0x2e65e3(0x1fb)](0x2,'0')+'\x20'+_0x25843d[_0x2e65e3(0xfd)]()[_0x2e65e3(0x1ae)]()[_0x2e65e3(0x1fb)](0x2,'0')+':'+_0x25843d[_0x2e65e3(0xd7)]()['toString']()[_0x2e65e3(0x1fb)](0x2,'0')+':'+_0x25843d[_0x2e65e3(0x122)]()[_0x2e65e3(0x1ae)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x2326e7=_0x38e2f8,_0x208790=shiftedTime();return _0x208790[_0x2326e7(0x1f5)]()+'/'+(_0x208790['getMonth']()+0x1)['toString']()[_0x2326e7(0x1fb)](0x2,'0')+'/'+_0x208790[_0x2326e7(0x213)]()['toString']()[_0x2326e7(0x1fb)](0x2,'0')+'\x20'+_0x208790[_0x2326e7(0xfd)]()[_0x2326e7(0x1ae)]()[_0x2326e7(0x1fb)](0x2,'0')+':'+_0x208790[_0x2326e7(0xd7)]()[_0x2326e7(0x1ae)]()[_0x2326e7(0x1fb)](0x2,'0')+':'+_0x208790[_0x2326e7(0x122)]()['toString']()[_0x2326e7(0x1fb)](0x2,'0');}function getDate(){const _0x45a811=_0x38e2f8,_0x520535=shiftedTime();return _0x520535[_0x45a811(0x1f5)]()+'/'+(_0x520535['getMonth']()+0x1)['toString']()[_0x45a811(0x1fb)](0x2,'0')+'/'+_0x520535[_0x45a811(0x213)]()[_0x45a811(0x1ae)]()['padStart'](0x2,'0');}function getHour(){const _0x372dd9=_0x38e2f8,_0x59a139=shiftedTime();return _0x59a139['getHours']()[_0x372dd9(0x1ae)]()[_0x372dd9(0x1fb)](0x2,'0');}function sleep(_0x3ecf0e){return new Promise(_0x145965=>setTimeout(_0x145965,_0x3ecf0e));}function shiftedTime(){const _0x3a4647=_0x38e2f8,_0x1d2d33=new Date();let _0x442ca3=_0x1d2d33;if(config&&config[_0x3a4647(0x19a)]!==0x0)_0x442ca3=fns[_0x3a4647(0x24c)](_0x1d2d33,{'hours':config[_0x3a4647(0x19a)]});return _0x442ca3;}function timer(_0x3ea915){const _0x1af491=_0x38e2f8,_0x93def5=new Date();!lasttime?console['log'](getTimeStamp()+':\x20timer\x20>',_0x3ea915,_0x93def5):console[_0x1af491(0x23e)](getTimeStamp()+_0x1af491(0x100),_0x3ea915,(_0x93def5-lasttime)/0x3e8),lasttime=_0x93def5;}