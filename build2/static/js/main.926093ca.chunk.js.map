{"version":3,"sources":["components/BotCard.js","components/HtmlToolTip.js","services/LocalStoreService.js","context/UuidContext.js","context/SocketContext.js","context/ServerContext.js","context/MessageContext.js","context/ConfigurationContext.js","context/BotsContext.js","components/BotManager.js","components/Public.js","components/Switch.js","services/SocketService.js","App.js","reportWebVitals.js","index.js"],"names":["useStyles","makeStyles","theme","cardHeader","backgroundColor","content","padding","spacing","LightTooltip","withStyles","tooltip","palette","common","white","color","boxShadow","shadows","fontSize","Tooltip","BotCard","props","classes","bot","mode","useState","headless","setHeadless","status","setStatus","live","setLive","statusMsg","setStatusMsg","useEffect","msg","style","toggleMode","newMode","callback","botID","toggleState","newStatus","Grid","item","xs","sm","md","container","direction","Box","className","Typography","gutterBottom","variant","component","ml","mr","botname","Button","onClick","disabled","title","size","HtmlTooltip","type","maxWidth","typography","pxToRem","border","useLocalStore","localStorageKey","defaultValue","React","localStorage","getItem","value","setValue","setItem","uuid","publicKey","crypt","Crypt","rsaStandard","encryptedUuid","timestamp","includes","encrypt","getTime","socket","socketio","auth","Date","ServerContext","createContext","ServerProvider","updated","serverversion","servertime","access","allow","reason","token","externalip","userid","server","setServer","Provider","children","MessageContext","MessageProvider","messages","setMessages","ConfigurationContext","ConfigurationProvider","configuration","setConfiguration","BotsContext","BotsProvider","bots","setBots","Copyright","height","p","align","Link","textDecoration","href","target","rel","getFullYear","CustomSwitch","checked","track","Switch","BotManager","setMode","badge","setBadge","useContext","validInstallation","useSnackbar","enqueueSnackbar","closeSnackbar","version","pckg2","openTT","setOpenTT","openTT2","setOpenTT2","openTT3","setOpenTT3","openTT4","setOpenTT4","openTT5","setOpenTT5","openBD","setOpenBD","open","setOpen","openUpdate","setOpenUpdate","openDropzone","setOpenDropzone","openBackupSelect","setOpenBackupSelect","outdated","setOutdated","deleteBot","setDeleteBot","input","setInput","menuState","setMenuState","downloadState","setDownloadState","currenttime","setCurrenttime","newtime","setNewtime","timeshift","setTimeshift","telegramToken","setTelegramToken","telegramUsername","setTelegramUsername","loginRequired","setLoginRequired","bbUsername","setBbUsername","bbPassword","setBbPassword","f2aRequired","setF2aRequired","whitelistEnabled","setWhitelistEnabled","whitelist","setWhitelist","temporaryAccessAllowed","setTemporaryAccessAllowed","telegramChatId","setTelegramChatId","newIP","setNewIP","flexWidthDown","setFlexWidthDown","flexWidthUp","setFlexWidthUp","update","setUpdate","lastMsg","setLastMsg","number","message","lock","dialog","setDialog","dialog2","setDialog2","openDialog","setOpenDialog","openDialog2","setOpenDialog2","restoreAck","setRestoreAck","setMaxWidth","checkIconColor","setcheckIconColor","telegramEnabled","setTelegramEnabled","updateMethod","setUpdateMethod","backupFiles","setBackupFiles","backupFile","setBackupFile","latestVersion","setLatestVersion","bbv","cr","enc","Base64","parse","pckg","v","toString","Utf8","checkNow","useRef","lastRef","dialogShownRef","document","window","addEventListener","newVersion","newLast","current","newMessages","forEach","push","restored","code","telegram","password","drawerWidth","Math","min","setSize","useLayoutEffect","updateSize","innerWidth","removeEventListener","WindowSize","inputWidth","root","display","logo","heroContent","heroButtons","marginTop","cardGrid","paddingTop","paddingBottom","card","flexDirection","cardContent","flexGrow","form","width","footer","bottomPush","position","bottom","backdrop","zIndex","drawer","appBar","flexShrink","drawerPaper","drawerContainer","overflow","button","marginLeft","button2","textinput","createMuiTheme","StyledButton","action","key","Fragment","localhost","location","origin","mixpanel","init","host","identify","on","autoHideDuration","off","files","length","name","wdtDown","wdtUp","updateAvailable","newVer","oldVer","oldParts","split","newParts","i","a","b","isNewerVersion","checkForUpdate","getMessages","handleClose","handleUpdate","match","find","handleDelete","openUrl","botpath","currentUrl","replace","emit","handleRestore","method","closeDrawerDownloads","handleDarkmode","e","handleUpdateOpen","handleUpdateClose","openDrawer","getHour","closeDrawer","openDrawerDownloads","handleCancel","handleDownload","axios","get","headers","tkn","responseType","then","res","fileDownload","data","catch","error","shift","now","serverparsed","diffServerLocal","differenceInHours","addHours","getHours","padStart","getMinutes","adjusted","add","hours","onLoginRequired","onF2aRequired","onTemporaryAccessAllowed","normalizeIP","ipin","ip4","ip6","ipaddr","isValid","ip","kind","isIPv4MappedAddress","toIPv4Address","toIPv4MappedAddress","show","store","onLogout","handleCloseDialog","last","parentElement","id","slice","capitalize","str","substring","toUpperCase","setTimeout","bbvNew","bbvReceive","startsWith","alreadyUpdated","dialogWidth","textLength","newDialogMsg","ThemeProvider","Dialog","fullWidth","DialogContent","DialogContentText","DialogActions","reload","Backdrop","CircularProgress","DialogTitle","linkTarget","CssBaseline","AppBar","Toolbar","src","alt","alignItems","nowrap","zeroMinWidth","mt","noWrap","Hidden","xsDown","wdt","logout","smUp","dropzoneText","acceptedFiles","filesLimit","cancelButtonText","submitButtonText","maxFileSize","onClose","onDrop","event","preventDefault","endsWith","file","formData","FormData","append","post","err","handleUpload","showPreviewsInDropzone","showFileNamesInPreview","showPreviews","useChipsForPreview","showAlerts","SwipeableDrawer","anchor","onOpen","paper","ClickAwayListener","onClickAway","interactive","m","disableFocusListener","disableHoverListener","disableTouchListener","IconButton","pl","pt","Divider","FormControlLabel","control","Checkbox","onChange","label","Alert","severity","FormControl","InputLabel","Select","labelId","MenuItem","FormHelperText","TextField","helperText","autoComplete","bgcolor","newWhitelist","List","dense","map","ListItem","ListItemText","primary","ListItemSecondaryAction","edge","disableFocusRipple","disableRipple","filter","deleteIP","justify","test","Fab","ipRegex","v4","exact","v6","newPassword","newToken","newConfig","encryptedInput","handleConfirmedSave","Container","paragraph","mb","labelPlacement","autoFocus","margin","FlexToolbar","Chip","Badge","badgeContent","Public","loginNow","setLoginNow","accessMsg","setAccessMsg","serverDown","setServerDown","usernameProvided","setUsernameProvided","username","setUsername","setPassword","user","result","pathname","getUsername","handleRefresh","onLoginInput","required","goPublic","setGoPublic","SocketService","pubKey","setPubKey","setUuid","undefined","prevState","uuidv4","config","disconnect","App","maxSnack","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.926093ca.chunk.js","sourcesContent":["import React, {useEffect, useState} from 'react';\r\nimport { makeStyles, withStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport Paper from '@material-ui/core/Card';\r\nimport Box from '@material-ui/core/Box';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport PowerSettingsNewIcon from '@material-ui/icons/PowerSettingsNew';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport FontDownloadIcon from '@material-ui/icons/FontDownload';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    cardHeader: {\r\n        backgroundColor: '#000',\r\n    },\r\n    content: {\r\n        padding: theme.spacing(2),\r\n    },\r\n}));\r\n\r\nconst LightTooltip = withStyles((theme) => ({\r\n    tooltip: {\r\n        backgroundColor: theme.palette.common.white,\r\n        color: 'rgba(0, 0, 0, 0.87)',\r\n        boxShadow: theme.shadows[1],\r\n        fontSize: 12,\r\n    },\r\n}))(Tooltip);\r\n\r\nexport default function BotCard(props) {\r\n    const classes = useStyles();\r\n    const bot = props.bot;\r\n    const mode = props.mode;\r\n\r\n    const [headless, setHeadless] = useState(bot.mode === 'auto');\r\n    const [status, setStatus] = useState(bot.status);\r\n    const [live, setLive] = useState('');\r\n    const [statusMsg, setStatusMsg] = useState(bot.status);\r\n\r\n    useEffect(() => {\r\n        let msg;\r\n\r\n        setStatus(bot.status);\r\n        setLive(bot.live);\r\n        setHeadless(bot.mode === 'auto');\r\n\r\n        msg = (bot.status === 'new') ? 'new' :\r\n            (bot.status === 'new-disabled') ? 'disabled' :\r\n            (bot.status === 'disabled') ? 'disabled' :\r\n            (bot.live === '') ? 'enabled' :\r\n            (bot.live === 'stopped') ? <span><span>{bot.status} / </span><span style={{ color: '#f00' }}>stopped</span></span> : 'enabled / running';\r\n\r\n        setStatusMsg(msg);\r\n        \r\n        return () => {\r\n        }\r\n    }, [bot]);\r\n\r\n    const toggleMode = () => {\r\n        let newMode = !headless;\r\n\r\n        setHeadless(newMode);\r\n\r\n        props.callback(bot.botID, 'headless', newMode);\r\n    }\r\n\r\n    const toggleState = () => {\r\n        let newStatus;\r\n\r\n        if (status === 'enabled') newStatus = 'disabled';\r\n        else if (status === 'new') newStatus = 'new-disabled';\r\n        else if (status === 'new-disabled') newStatus = 'new';\r\n        else if (status === 'disabled') newStatus = 'enabled';\r\n\r\n        setStatus(newStatus);\r\n        setLive('');\r\n\r\n        props.callback(bot.botID, 'status', newStatus);\r\n    }\r\n\r\n    const handleDelete = () => {\r\n        props.callback(bot.botID, 'delete');\r\n    }\r\n\r\n    const goDashboard = () => {\r\n        props.callback(bot.botID, 'dashboard');\r\n    }\r\n\r\n    return (\r\n        <Grid item xs={12} sm={6} md={4}>\r\n            <Paper>\r\n                <Grid container direction=\"row\">\r\n                    <Grid item xs={12}>\r\n                        <Box className={classes.cardHeader}>\r\n                            <Typography gutterBottom variant=\"button\" component=\"h2\">\r\n                                <Box color=\"#FFF\" ml={2} mr={2}>{bot.botname}</Box>\r\n                            </Typography>\r\n                        </Box>\r\n                    </Grid>\r\n                    <Grid item xs={12} className={classes.content}>\r\n                        <Typography variant=\"button\">\r\n                            <div>Bot ID: <b>{bot.botID}</b></div>\r\n                            <div><span>Status: <b>{statusMsg}</b></span></div>\r\n                        </Typography>\r\n                    </Grid>\r\n                </Grid>\r\n                <Grid container direction=\"row\" className={classes.content}>\r\n                    <Grid item xs={4}>\r\n                        <Button variant=\"contained\" onClick={goDashboard} disabled={status === 'disabled' || live !== 'running'}>\r\n                            Dashboard\r\n                        </Button>\r\n                    </Grid>\r\n                    <Grid item xs={2}></Grid>\r\n                    {(status === 'new' || status === 'new-disabled') ? (\r\n                        <Grid item xs={2}></Grid>\r\n                    ): (\r\n                        <Grid item xs={2}>\r\n                            {(headless) ? (\r\n                                <LightTooltip title=\"Switch to manual mode\">\r\n                                    <Button size=\"small\" color=\"primary\" onClick={toggleMode}>\r\n                                        <FontDownloadIcon color={(mode === 'light') ? \"primary\" : \"secondary\"} />\r\n                                    </Button>\r\n                                </LightTooltip>\r\n                            ) : (\r\n                                <LightTooltip title=\"Switch to automatic mode\">  \r\n                                    <Button size=\"small\" color=\"primary\" onClick={toggleMode}>\r\n                                        <FontDownloadIcon color=\"disabled\" />\r\n                                    </Button>\r\n                                </LightTooltip>\r\n                            )}\r\n                        </Grid>\r\n                    )}\r\n                    <Grid item xs={2}>\r\n                        {(status === 'disabled' || status === 'new-disabled') ? (\r\n                            <LightTooltip title=\"Start bot\">\r\n                                <Button size=\"small\" color=\"primary\" onClick={toggleState}>\r\n                                    <PowerSettingsNewIcon color=\"disabled\" />\r\n                                </Button>\r\n                            </LightTooltip>\r\n                        ) : (\r\n                            <LightTooltip title=\"Stop bot\">\r\n                                <Button size=\"small\" color=\"primary\" onClick={toggleState}>\r\n                                    <PowerSettingsNewIcon color={(mode === 'light') ? \"primary\" : \"secondary\"} />\r\n                                </Button>\r\n                            </LightTooltip>\r\n                        )}\r\n                    </Grid>\r\n                    <Grid item xs={2}>\r\n                        <LightTooltip title=\"Delete bot\">\r\n                            <Button size=\"small\" color={(mode === 'light') ? \"primary\" : \"secondary\"} onClick={handleDelete}>\r\n                                <DeleteIcon />\r\n                            </Button>\r\n                        </LightTooltip>\r\n                    </Grid>\r\n                </Grid>\r\n            </Paper>\r\n        </Grid>\r\n    )\r\n}","import { withStyles } from '@material-ui/core/styles';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\n\r\nexport const HtmlTooltip = withStyles((theme) => ({\r\n    tooltip: {\r\n        backgroundColor: (theme.palette.type === 'light') ? \"#FFFFFF\" : \"#000000\",\r\n        color: (theme.palette.type === 'light') ? \"#000000\" : \"#FFFFFF\",\r\n        maxWidth: 800,\r\n        fontSize: theme.typography.pxToRem(14),\r\n        border: '1px solid #888888',\r\n    },\r\n}))(Tooltip);","import React from 'react';\r\n\r\nexport const useLocalStore = (localStorageKey, defaultValue) => {\r\n  const [value, setValue] = React.useState(\r\n    localStorage.getItem(localStorageKey) || defaultValue\r\n  );\r\n\r\n  React.useEffect(() => {\r\n    localStorage.setItem(localStorageKey, value);\r\n  }, [value]);\r\n\r\n  return [value, setValue];\r\n};","import { Crypt } from 'hybrid-crypto-js';\r\n\r\nconst uuid = localStorage.getItem('uuid');\r\nconst publicKey = localStorage.getItem('publicKey');\r\n\r\nlet crypt = new Crypt({\r\n    md: 'sha256',\r\n    rsaStandard: 'RSA-OAEP',\r\n});\r\n\r\nexport const encryptedUuid = (timestamp) => {\r\n    if (uuid && publicKey && publicKey.includes('-----BEGIN PUBLIC KEY-----')) return crypt.encrypt(publicKey, `${uuid}@${timestamp.getTime()}`);\r\n    else return false;\r\n}","import socketio from \"socket.io-client\";\r\nimport { encryptedUuid } from '../context/UuidContext';\r\n\r\nexport const socket = socketio('/', {\r\n    auth: {\r\n        encryptedUuid: encryptedUuid(new Date())\r\n    }\r\n});","import React, { useState, createContext } from 'react';\r\n\r\nexport const ServerContext = createContext();\r\n\r\nexport const ServerProvider = (props) => {\r\n    const [server, setServer] = useState({\r\n        status: 'disconnected',\r\n        updated: '---',\r\n        serverversion: '0.0',\r\n        servertime: '---',\r\n        access: { allow: false, reason: 'initial state', token: null },\r\n        externalip: '',\r\n        publicKey: '',\r\n        userid: null,\r\n    });\r\n\r\n    return (\r\n        <ServerContext.Provider value={[server, setServer]}>\r\n            {props.children}\r\n        </ServerContext.Provider>\r\n    )\r\n}","import React, { useState, createContext } from 'react';\r\n\r\nexport const MessageContext = createContext();\r\n\r\nexport const MessageProvider = (props) => {\r\n    const [messages, setMessages] = useState([]);\r\n\r\n    return (\r\n        <MessageContext.Provider value={[messages, setMessages]}>\r\n            {props.children}\r\n        </MessageContext.Provider>\r\n    )\r\n}","import React, { useState, createContext } from 'react';\r\n\r\nexport const ConfigurationContext = createContext();\r\n\r\nexport const ConfigurationProvider = (props) => {\r\n    const [configuration, setConfiguration] = useState({});\r\n\r\n    return (\r\n        <ConfigurationContext.Provider value={[configuration, setConfiguration]}>\r\n            {props.children}\r\n        </ConfigurationContext.Provider>\r\n    )\r\n}","import React, { useState, createContext } from 'react';\r\n\r\nexport const BotsContext = createContext();\r\n\r\nexport const BotsProvider = (props) => {\r\n    const [bots, setBots] = useState(null);\r\n\r\n    return (\r\n        <BotsContext.Provider value={[bots, setBots]}>\r\n            {props.children}\r\n        </BotsContext.Provider>\r\n    )\r\n}","import React, { useContext, useState, useEffect, useLayoutEffect, useRef } from 'react';\r\nimport { makeStyles, withStyles } from '@material-ui/core/styles';\r\nimport SwipeableDrawer from '@material-ui/core/SwipeableDrawer';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Button from '@material-ui/core/Button';\r\nimport Box from '@material-ui/core/Box';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport Badge from '@material-ui/core/Badge';\r\nimport Fab from '@material-ui/core/Fab';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\nimport ExitToAppIcon from '@material-ui/icons/ExitToApp';\r\nimport AutorenewIcon from '@material-ui/icons/Autorenew';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport FormHelperText from '@material-ui/core/FormHelperText';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport Select from '@material-ui/core/Select';\r\nimport Switch from '@material-ui/core/Switch';\r\nimport Hidden from '@material-ui/core/Hidden';\r\nimport Container from '@material-ui/core/Container';\r\nimport Link from '@material-ui/core/Link';\r\nimport BotCard from './BotCard';\r\nimport Backdrop from '@material-ui/core/Backdrop';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport Alert from '@material-ui/lab/Alert';\r\nimport Chip from '@material-ui/core/Chip';\r\nimport InfoOutlinedIcon from '@material-ui/icons/InfoOutlined';\r\nimport { HtmlTooltip } from './HtmlToolTip';\r\nimport { ThemeProvider } from \"@material-ui/styles\";\r\nimport { createMuiTheme } from \"@material-ui/core\";\r\nimport { useLocalStore } from \"../services/LocalStoreService\";\r\nimport { socket } from '../context/SocketContext';\r\nimport { ServerContext } from '../context/ServerContext';\r\nimport { MessageContext } from '../context/MessageContext';\r\nimport { ConfigurationContext } from '../context/ConfigurationContext';\r\nimport { BotsContext } from '../context/BotsContext';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport DescriptionOutlinedIcon from '@material-ui/icons/DescriptionOutlined';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport differenceInHours from 'date-fns/differenceInHours';\r\nimport addHours from 'date-fns/addHours';\r\nimport { add } from 'date-fns'\r\nimport parse from 'date-fns/parse';\r\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\r\nimport { useSnackbar } from 'notistack';\r\nimport ipRegex from 'ip-regex';\r\nimport ipaddr from 'ipaddr.js';\r\nimport { Crypt } from 'hybrid-crypto-js';\r\nimport pckg from '../version.json';\r\nimport pckg2 from '../version2.json';\r\nimport cr from 'crypto-js';\r\nimport ReactMarkdown from 'react-markdown';\r\nimport mixpanel from 'mixpanel-browser';\r\nimport { encryptedUuid } from '../context/UuidContext';\r\nimport axios from 'axios';\r\nimport fileDownload from 'js-file-download';\r\nimport { DropzoneDialog } from 'material-ui-dropzone';\r\n\r\nfunction Copyright() {\r\n    return (\r\n        <Box color=\"#FFF\" height={54} p={2}>\r\n            <Typography variant=\"body2\" align=\"center\">\r\n                {'Copyright  '}\r\n                <Link style={{ color: '#ffffff', textDecoration: 'none' }} href=\"https://hodlerhacks.com/\" target=\"_blank\" rel=\"noopener\">\r\n                    hodlerhacks.com\r\n                </Link>{' '}\r\n                {new Date().getFullYear()}\r\n            </Typography>\r\n        </Box>\r\n    );\r\n}\r\n\r\nconst CustomSwitch = withStyles({\r\n    checked: {\r\n    },\r\n    track: {\r\n        backgroundColor: '#999',\r\n    },\r\n})(Switch);\r\n\r\nconst LightTooltip = withStyles((theme) => ({\r\n    tooltip: {\r\n        backgroundColor: theme.palette.common.white,\r\n        color: 'rgba(0, 0, 0, 0.87)',\r\n        boxShadow: theme.shadows[1],\r\n        fontSize: 12,\r\n    },\r\n}))(Tooltip);\r\n\r\nexport default function BotManager() {\r\n    const [mode, setMode] = useLocalStore('mode', 'light');\r\n    const [badge, setBadge] = useLocalStore('badge', 'false');\r\n\r\n    const [{ status, serverversion, servertime, access, externalip, publicKey, userid, validInstallation }, setServer] = useContext(ServerContext);\r\n    const [messages, setMessages] = useContext(MessageContext);\r\n    const [configuration, setConfiguration] = useContext(ConfigurationContext);\r\n    const [bots, setBots] = useContext(BotsContext);\r\n\r\n    const { enqueueSnackbar, closeSnackbar } = useSnackbar();\r\n    const version = pckg2.version;\r\n    \r\n    const [openTT, setOpenTT] = useState(false);\r\n    const [openTT2, setOpenTT2] = useState(false);\r\n    const [openTT3, setOpenTT3] = useState(false);\r\n    const [openTT4, setOpenTT4] = useState(false);\r\n    const [openTT5, setOpenTT5] = useState(false);\r\n    const [openBD, setOpenBD] = useState(true);\r\n    const [open, setOpen] = useState(false);\r\n    const [openUpdate, setOpenUpdate] = useState(false);\r\n    const [openDropzone, setOpenDropzone] = useState(false);\r\n    const [openBackupSelect, setOpenBackupSelect] = useState(false);\r\n    const [outdated, setOutdated] = useState(false);\r\n    const [deleteBot, setDeleteBot] = useState({});\r\n    const [input, setInput] = useState('');\r\n    const [menuState, setMenuState] = useState(false);\r\n    const [downloadState, setDownloadState] = useState(false);\r\n    const [currenttime, setCurrenttime] = useState();\r\n    const [newtime, setNewtime] = useState();\r\n    const [timeshift, setTimeshift] = useState(configuration.timeshift || '0');\r\n    const [telegramToken, setTelegramToken] = useState(configuration.telegramToken || '');\r\n    const [telegramUsername, setTelegramUsername] = useState(configuration.telegramUsername || '');\r\n    const [loginRequired, setLoginRequired] = useState(configuration.loginRequired || false);\r\n    const [bbUsername, setBbUsername] = useState(configuration.bbUsername || '');\r\n    const [bbPassword, setBbPassword] = useState(configuration.bbPassword || '');\r\n    const [f2aRequired, setF2aRequired] = useState(configuration.f2aRequired || false);\r\n    const [whitelistEnabled, setWhitelistEnabled] = useState(configuration.whitelistEnabled || false);\r\n    const [whitelist, setWhitelist] = useState(configuration.whitelist || []);\r\n    const [temporaryAccessAllowed, setTemporaryAccessAllowed] = useState(configuration.temporaryAccessAllowed || false);\r\n    const [telegramChatId, setTelegramChatId] = useState(configuration.telegramChatId || null);\r\n    const [newIP, setNewIP] = useState('');\r\n    const [flexWidthDown, setFlexWidthDown] = useState(0);\r\n    const [flexWidthUp, setFlexWidthUp] = useState(0);\r\n    const [update, setUpdate] = useState(false);\r\n    const [lastMsg, setLastMsg] = useLocalStore('last-msg', 0);\r\n    const [dialog, setDialog] = useState({ number: 0, title: '', message: '', lock: false });\r\n    const [dialog2, setDialog2] = useState({ title: '', message: '' });\r\n    const [openDialog, setOpenDialog] = useState(false);\r\n    const [openDialog2, setOpenDialog2] = useState(false);\r\n    const [restoreAck, setRestoreAck] = useState(false);\r\n    const [maxWidth, setMaxWidth] = useState('sm');\r\n    const [checkIconColor, setcheckIconColor] = useState('#fff');\r\n    const [telegramEnabled, setTelegramEnabled] = useState(false);\r\n    const [updateMethod, setUpdateMethod] = useState('update');\r\n    const [backupFiles, setBackupFiles] = useState([]);\r\n    const [backupFile, setBackupFile] = useState();\r\n    const [latestVersion, setLatestVersion] = useLocalStore('latest-version', version) || '0.0.0';\r\n    const dv = cr.enc.Base64.parse(pckg.v).toString(cr.enc.Utf8);\r\n    const bbv = dv;\r\n    const checkNow = useRef(false);\r\n    const lastRef = useRef(lastMsg);\r\n    const dialogShownRef = useRef(false);\r\n\r\n    let crypt = new Crypt({\r\n        md: 'sha256',\r\n        rsaStandard: 'RSA-OAEP',\r\n    });\r\n\r\n    useEffect(() => {\r\n        document.title = `BB | Bot Manager`;\r\n\r\n        // Listen to local store changes (when changed on another page)\r\n        window.addEventListener('storage', () => {\r\n            const newMode = localStorage.getItem('mode');\r\n            setMode(newMode);\r\n\r\n            const newVersion = localStorage.getItem('latest-version');\r\n            setLatestVersion(newVersion);\r\n\r\n            const newLast = localStorage.getItem('last-msg');\r\n\r\n            if (newLast !== lastRef.current) {\r\n                lastRef.current = newLast;\r\n\r\n                let newMessages = [];\r\n\r\n                // Only keep messages that haven't been shown yet (on any page)\r\n                messages.forEach(msg => {\r\n                    if (msg.number > newLast) newMessages.push(msg);\r\n                });\r\n\r\n                setMessages(newMessages);\r\n            }\r\n        });\r\n\r\n        return () => {\r\n        }\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        setTimeshift(configuration.timeshift || '0');\r\n        setTelegramToken(configuration.telegramToken || '');\r\n        setTelegramUsername(configuration.telegramUsername || '');\r\n        setWhitelistEnabled(configuration.whitelistEnabled || false);\r\n        setLoginRequired(configuration.loginRequired || false);\r\n        setBbUsername(configuration.bbUsername || '');\r\n        setBbPassword(configuration.bbPassword || '');\r\n        setF2aRequired(configuration.f2aRequired || false);\r\n        setWhitelist(configuration.whitelist || []);\r\n        setTemporaryAccessAllowed(configuration.temporaryAccessAllowed || false);\r\n        setTelegramChatId(configuration.telegramChatId);\r\n\r\n        // Show badge if access is restricted in any way, but Telegram bot is not configured\r\n        if ((configuration.loginRequired || configuration.temporaryAccessAllowed) && (configuration.telegramToken === '' || configuration.telegramUsername === '' || !configuration.telegramChatId)) {\r\n            setBadge('telegram');\r\n        } else {\r\n            setBadge('false');\r\n        }\r\n\r\n        setTelegramEnabled(configuration.telegramToken && configuration.telegramUsername && configuration.telegramChatId);\r\n\r\n        // Check if the installation was restored from a backup, only do this once, not with every config change\r\n        if (configuration.restored && !dialogShownRef.current) {\r\n            dialogShownRef.current = true;\r\n\r\n            let msg = 'Please take the following actions:\\n\\n';\r\n            let code = 0;\r\n            if (configuration.restored.telegram) {\r\n                code += 2;\r\n                msg += '- Re-enter your Telegram token and type /start in your Telegram bot\\n';\r\n            }\r\n            if (configuration.restored.password) {\r\n                code += 1;\r\n                msg += '- Re-enable login and re-enter your password\\n';\r\n            }\r\n\r\n            setDialog2({\r\n                title: 'Your installation has been restored from a backup',\r\n                message: msg,\r\n            });\r\n\r\n            setOpenDialog2(true);\r\n\r\n            setBadge(code);\r\n        }\r\n\r\n        return () => {\r\n        }\r\n    }, [configuration]);\r\n\r\n    const WindowSize = () => {\r\n        const [size, setSize] = useState(0);\r\n        useLayoutEffect(() => {\r\n            function updateSize() {\r\n                setSize(window.innerWidth);\r\n            }\r\n            window.addEventListener('resize', updateSize);\r\n            updateSize();\r\n            return () => window.removeEventListener('resize', updateSize);\r\n        }, []);\r\n        return size;\r\n    }\r\n\r\n    const drawerWidth = Math.min(480, WindowSize());\r\n    const inputWidth = drawerWidth - 50;\r\n\r\n    const useStyles = makeStyles((theme) => ({\r\n        root: {\r\n            display: 'flex',\r\n        },\r\n        logo: {\r\n            maxWidth: 60,\r\n            padding: 10,\r\n        },\r\n        heroContent: {\r\n            backgroundColor: (mode === 'light') ? '#fff' : '#000',\r\n            padding: theme.spacing(4, 0, 2),\r\n        },\r\n        heroButtons: {\r\n            marginTop: theme.spacing(4),\r\n        },\r\n        cardGrid: {\r\n            paddingTop: theme.spacing(6),\r\n            paddingBottom: theme.spacing(6),\r\n        },\r\n        card: {\r\n            height: '100%',\r\n            display: 'flex',\r\n            flexDirection: 'column',\r\n        },\r\n        cardHeader: {\r\n            backgroundColor: '#000',\r\n        },\r\n        cardContent: {\r\n            flexGrow: 1,\r\n        },\r\n        form: {\r\n            width: '100%', // Fix IE 11 issue.\r\n            marginTop: theme.spacing(1),\r\n        },\r\n        footer: {\r\n            marginTop: 'auto',\r\n            backgroundColor: '#000000',\r\n        },\r\n        bottomPush: {\r\n            position: \"fixed\",\r\n            width: '100%',\r\n            bottom: 0,\r\n            paddingBottom: 0,\r\n        },\r\n        backdrop: {\r\n            zIndex: theme.zIndex.drawer + 2,\r\n            color: '#fff',\r\n        },\r\n        appBar: {\r\n            zIndex: theme.zIndex.drawer + 1,\r\n        },\r\n        drawer: {\r\n            width: drawerWidth,\r\n            flexShrink: 0,\r\n        },\r\n        drawerPaper: {\r\n            width: drawerWidth,\r\n        },\r\n        drawerContainer: {\r\n            overflow: 'auto',\r\n        },\r\n        button: {\r\n            marginTop: theme.spacing(3),\r\n            marginLeft: theme.spacing(1),\r\n            width: '80px',\r\n        },\r\n        button2: {\r\n            marginTop: theme.spacing(3),\r\n            marginLeft: theme.spacing(1),\r\n            width: '120px',\r\n        },\r\n        textinput: {\r\n            width: inputWidth,\r\n        }\r\n    }));\r\n\r\n    const classes = useStyles();\r\n\r\n    const handleAddBot = () => {\r\n        setOpenBD(true);\r\n        if (socket) socket.emit(\"add-bot\", access.token);\r\n    }\r\n\r\n    const theme = createMuiTheme({\r\n        palette: {\r\n            type: mode\r\n        }\r\n    });\r\n\r\n    const StyledButton = withStyles({\r\n        root: {\r\n            '&:hover': {\r\n                backgroundColor: 'transparent',\r\n            },\r\n            '&:click': {\r\n                backgroundColor: '#f00',\r\n            },\r\n        },\r\n    })(Button);\r\n\r\n    useEffect(() => {\r\n        const outdated = (serverversion && (serverversion !== '0.0' && serverversion !== version));\r\n        setOutdated(outdated);\r\n\r\n        return () => {\r\n        }\r\n    }, [serverversion]);\r\n\r\n    const action = key => (\r\n        <React.Fragment>\r\n            <Button\r\n                style={{\r\n                    color: '#bbbbbb',\r\n                }}\r\n                onClick={() => { closeSnackbar(key) }}>\r\n                Dismiss\r\n            </Button>\r\n        </React.Fragment>\r\n    );\r\n\r\n    useEffect(() => {\r\n        const url = window.location.origin;\r\n        const localhost = url.includes('localhost');\r\n\r\n        // Mixpanel\r\n        if (userid) {\r\n            mixpanel.init('6b67f3d61ee94b8f5c80b4affef4c4d9',\r\n                {\r\n                    host: \"api-eu.mixpanel.com\",\r\n                });\r\n            mixpanel.identify(userid);\r\n            mixpanel.track('Bot Manager', {\r\n                'localhost': localhost,\r\n            });\r\n        }\r\n\r\n        return () => {\r\n        }\r\n    }, [userid]);\r\n\r\n    useEffect(() => {\r\n        if (bots !== null) setOpenBD(false);\r\n\r\n        return () => {\r\n        }\r\n    }, [bots]);\r\n\r\n    useEffect(() => {\r\n        socket.on(\"notification\", (msg, variant = 'error') => {\r\n            enqueueSnackbar(msg, {\r\n                variant: variant,\r\n                autoHideDuration: 8000,\r\n                action,\r\n            });\r\n        });\r\n\r\n        return () => {\r\n            socket.off(\"notification\");\r\n        }\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        socket.on(\"backup-files\", (files) => {\r\n            setBackupFiles(files);\r\n            if (files.length > 0) {\r\n                setBackupFile(files[0].name);\r\n            }\r\n        });\r\n\r\n        return () => {\r\n            socket.off(\"backup-files\");\r\n        }\r\n    }, []);\r\n\r\n    const isNewerVersion = (newVer, oldVer) => {\r\n        const oldParts = oldVer.split('.')\r\n        const newParts = newVer.split('.')\r\n        for (var i = 0; i < newParts.length; i++) {\r\n            const a = ~~newParts[i] // parse int\r\n            const b = ~~oldParts[i] // parse int\r\n            if (a > b) return true\r\n            if (a < b) return false\r\n        }\r\n        return false\r\n    }\r\n\r\n    useEffect(() => {\r\n        // Accomodate for the settings and download icon\r\n        let wdtDown = 100;\r\n        let wdtUp = 100;\r\n        const updateAvailable = isNewerVersion(latestVersion, version);\r\n\r\n        setUpdate(updateAvailable);\r\n        const logout = access && access.token;\r\n\r\n        if (updateAvailable) {\r\n            wdtDown += 140;\r\n        } else {\r\n            wdtDown += 40;\r\n        }\r\n        if (logout) {\r\n            wdtDown += 50;\r\n            wdtUp += 50;\r\n        }\r\n\r\n        setFlexWidthDown(wdtDown);\r\n        setFlexWidthUp(wdtUp);\r\n\r\n        return () => {\r\n        }\r\n    }, [latestVersion, version, access]);\r\n\r\n    const handleDelete = (botID) => {\r\n        let match = bots.find(b => b.botID === botID);\r\n        setDeleteBot({\r\n            botID: botID,\r\n            botname: match.botname,\r\n        });\r\n        setInput('');\r\n        setOpen(true);\r\n    };\r\n\r\n    const confirmDelete = (e) => {\r\n        if (input === deleteBot.botname) {\r\n            setOpen(false);\r\n            if (socket) socket.emit(\"delete-bot\", deleteBot.botID, access.token);\r\n        }\r\n    }\r\n\r\n    const checkForUpdate = () => {\r\n        checkNow.current = true;\r\n        getMessages();\r\n    }\r\n\r\n    const onInput = (e) => {\r\n        setInput(e.target.value);\r\n    }\r\n\r\n    const handleClose = () => {\r\n        setOpen(false);\r\n    };\r\n\r\n    const handleUpdate = (botID, action, update) => {\r\n        if (action === 'delete') handleDelete(botID);\r\n        else if (action === 'dashboard') {\r\n            const botpath = `bot${botID}`;\r\n            let currentUrl = window.location.href;\r\n            let openUrl;\r\n            if (currentUrl.includes(':5000')) currentUrl = currentUrl.replace(':5000', ':4000'); // For development only\r\n            openUrl = currentUrl + botpath;\r\n            window.open(openUrl, '_blank', 'noopener');\r\n        } else if (action === 'status') {\r\n            let match = bots.find(b => b.botID === botID);\r\n            match.status = update;\r\n            match.live = 'stopped';\r\n            if (socket) {\r\n                socket.emit(\"update-bot\", match, access.token);\r\n                setBots(bots);\r\n            }\r\n        } else if (action === 'headless') {\r\n            if (socket) {\r\n                socket.emit(\"toggle-bot-mode\", botID, access.token);\r\n            }\r\n        }\r\n    }\r\n\r\n    const onBackupSelect = () => {\r\n        setOpenBackupSelect(false);\r\n\r\n        if (socket) socket.emit(\"restore-backup-file\", backupFile, access.token);\r\n    }\r\n\r\n    const handleRestore = (method) => {\r\n        closeDrawerDownloads();\r\n        if (method === 'upload') setOpenDropzone(true);\r\n        else if (method === 'select') setOpenBackupSelect(true);\r\n    }\r\n\r\n    const handleDarkmode = (e) => {\r\n        (mode === 'light') ? setMode('dark') : setMode('light');\r\n    }\r\n\r\n    const handleUpdateOpen = (method = 'update') => {\r\n        closeDrawerDownloads();\r\n        setUpdateMethod(method);\r\n        setOpenUpdate(true);\r\n    }\r\n\r\n    const confirmBbUpdate = () => {\r\n        setOpenUpdate(false);\r\n\r\n        if (socket) {\r\n            if (updateMethod === 'update') {\r\n                socket.emit(\"update-bb\", access.token);\r\n            }\r\n            else if (updateMethod === 'reinstall') {\r\n                socket.emit(\"reinstall-bb\", access.token);\r\n            }\r\n        }\r\n    }\r\n\r\n    const handleUpdateClose = () => {\r\n        setOpenUpdate(false);\r\n    }\r\n\r\n    const openDrawer = () => {\r\n        // Update current and server times\r\n        setCurrenttime(getHour(timeshift)[0]);\r\n        setNewtime(getHour(timeshift)[1]);\r\n\r\n        setMenuState(true);\r\n    };\r\n\r\n    const closeDrawer = () => {\r\n        setMenuState(false);\r\n    };\r\n\r\n    const openDrawerDownloads = () => {\r\n        if (socket) socket.emit(\"get-backup-files\", access.token);\r\n\r\n        setDownloadState(true);\r\n    };\r\n\r\n    const closeDrawerDownloads = () => {\r\n        setDownloadState(false);\r\n    };\r\n\r\n    const handleConfirmedSave = () => {\r\n        if (loginRequired && (bbUsername === '' || bbPassword === '')) {\r\n            enqueueSnackbar('Please enter a username and password', {\r\n                variant: 'error',\r\n                autoHideDuration: 8000,\r\n                action,\r\n            });\r\n            return;\r\n        }\r\n\r\n        const newPassword = ((configuration.restored && configuration.restored.password) && bbPassword === '') ? '***' : bbPassword;\r\n        const newToken = ((configuration.restored && configuration.restored.telegram) && telegramToken === '') ? '***' : telegramToken;\r\n\r\n        const newConfig = {\r\n            timeshift: timeshift,\r\n            telegramToken: newToken,\r\n            telegramUsername: telegramUsername,\r\n            loginRequired: loginRequired,\r\n            bbUsername: bbUsername,\r\n            bbPassword: newPassword,\r\n            f2aRequired: f2aRequired,\r\n            whitelistEnabled: whitelistEnabled,\r\n            whitelist: whitelist,\r\n            temporaryAccessAllowed: temporaryAccessAllowed,\r\n            telegramChatId: telegramChatId,\r\n        };\r\n\r\n        const timestamp = new Date().getTime();\r\n\r\n        let encryptedInput = newConfig;\r\n\r\n        if (newPassword !== '************') {\r\n            if (newPassword !== '' && newPassword !== '***') {\r\n                encryptedInput = {\r\n                    ...encryptedInput,\r\n                    bbPassword: crypt.encrypt(publicKey, `${newPassword}@${timestamp}`),\r\n                }\r\n            }\r\n        }\r\n\r\n        if (newToken !== '************') {\r\n            if (newToken !== '' && newToken !== '***') {\r\n                encryptedInput = {\r\n                    ...encryptedInput,\r\n                    telegramToken: crypt.encrypt(publicKey, `${newToken}@${timestamp}`),\r\n                }\r\n            }\r\n        }\r\n\r\n        if (socket) socket.emit(\"store-settings\", encryptedInput, access.token);\r\n\r\n        if (newConfig.telegramToken !== '') newConfig.telegramToken = '************';\r\n        if (newConfig.bbPassword !== '') newConfig.bbPassword = '************';\r\n\r\n        setConfiguration(newConfig);\r\n\r\n        closeDrawer();\r\n    }\r\n\r\n    const handleSave = () => {\r\n        // Check if the Telegram bot has been setup properly\r\n        const telegramApprovalEnabled =\r\n            (f2aRequired === true && configuration.f2aRequired === false) ||\r\n            (temporaryAccessAllowed === true && configuration.temporaryAccessAllowed === false);\r\n\r\n        if (telegramApprovalEnabled && !telegramChatId) {\r\n            enqueueSnackbar('Set up your Telegram bot and try again', {\r\n                variant: 'error',\r\n                autoHideDuration: 8000,\r\n                action,\r\n            });\r\n        } else {\r\n            handleConfirmedSave();\r\n        }\r\n    }\r\n\r\n    const handleCancel = () => {\r\n        setTimeshift(configuration.timeshift);\r\n        setTelegramToken(configuration.telegramToken);\r\n        setTelegramUsername(configuration.telegramUsername);\r\n        setLoginRequired(configuration.loginRequired);\r\n        setBbUsername(configuration.bbUsername);\r\n        setBbPassword(configuration.bbPassword);\r\n        setF2aRequired(configuration.f2aRequired);\r\n        setWhitelistEnabled(configuration.whitelistEnabled);\r\n        setWhitelist(configuration.whitelist);\r\n        setTemporaryAccessAllowed(configuration.temporaryAccessAllowed);\r\n\r\n        closeDrawer();\r\n    }\r\n\r\n    const handleRefresh = () => {\r\n        window.location.reload();\r\n    }\r\n\r\n    const handleDownload = (type) => {\r\n        closeDrawerDownloads();\r\n\r\n        axios.get(`/download/${type}`, {\r\n            headers: {\r\n                uuid: encryptedUuid(new Date()),\r\n                tkn: access.token,\r\n            },\r\n            responseType: 'blob',\r\n        })\r\n            .then(function (res) {\r\n                fileDownload(res.data, `${type}.zip`);\r\n            })\r\n            .catch(function (error) {\r\n            })\r\n    }\r\n\r\n    const handleUpload = (files, event) => {\r\n        const file = files[0];\r\n\r\n        let formData = new FormData();\r\n        formData.append('backupfile', file);\r\n\r\n        axios.post('/upload-backup', formData, {\r\n            headers: {\r\n                uuid: encryptedUuid(new Date()),\r\n                tkn: access.token,\r\n                \"Content-Type\": \"multipart/form-data\",\r\n            },\r\n        })\r\n        .then(res => {\r\n            enqueueSnackbar('Backup file uploaded', {\r\n                variant: 'success',\r\n                autoHideDuration: 8000,\r\n                action,\r\n            });\r\n        })\r\n        .catch(err => {\r\n            enqueueSnackbar('Uploading backup file failed', {\r\n                variant: 'error',\r\n                autoHideDuration: 8000,\r\n                action,\r\n            });\r\n        })\r\n    }\r\n\r\n    const getHour = (shift) => {\r\n        const now = new Date();\r\n        const serverparsed = parse(servertime, 'yyyy/MM/dd HH:mm:ss', new Date());\r\n        const diffServerLocal = differenceInHours(serverparsed, now);\r\n        const server = addHours(now, diffServerLocal);\r\n        const current = server.getHours().toString().padStart(2, '0') + \":\" + server.getMinutes().toString().padStart(2, '0');\r\n        let adjusted = server;\r\n        if (shift !== 0) adjusted = add(server, { hours: shift });\r\n\r\n        const newt = adjusted.getHours().toString().padStart(2, '0') + \":\" + adjusted.getMinutes().toString().padStart(2, '0');\r\n        return [current, newt];\r\n    }\r\n\r\n    useEffect(() => {\r\n        setCurrenttime(getHour(timeshift)[0]);\r\n        setNewtime(getHour(timeshift)[1]);\r\n\r\n        return () => {\r\n        }\r\n    }, [servertime, timeshift]);\r\n\r\n    const onTimeshift = (e) => {\r\n        setTimeshift(e.target.value);\r\n        setNewtime(getHour(e.target.value)[1]);\r\n    }\r\n\r\n    const onTelegramToken = (e) => {\r\n        setTelegramToken(e.target.value);\r\n    }\r\n\r\n    const onTelegramUsername = (e) => {\r\n        setTelegramUsername(e.target.value);\r\n    }\r\n\r\n    const onLoginRequired = (e) => {\r\n        setLoginRequired(e.target.checked);\r\n    }\r\n\r\n    const onBbUsername = (e) => {\r\n        setBbUsername(e.target.value);\r\n    }\r\n\r\n    const onBbPassword = (e) => {\r\n        setBbPassword(e.target.value);\r\n    }\r\n\r\n    const onF2aRequired = (e) => {\r\n        setF2aRequired(e.target.checked);\r\n    }\r\n\r\n    const onWhitelistEnabled = (e) => {\r\n        // When enabled, make sure current IP address is on the whitelist\r\n        if (e.target.checked && !whitelist.includes(normalizeIP(externalip).store)) {\r\n            let newWhitelist = whitelist;\r\n            newWhitelist.push(normalizeIP(externalip).store);\r\n            setWhitelist(newWhitelist);\r\n        }\r\n\r\n        setWhitelistEnabled(e.target.checked);\r\n    }\r\n\r\n    const onTemporaryAccessAllowed = (e) => {\r\n        setTemporaryAccessAllowed(e.target.checked);\r\n    }\r\n\r\n    const onNewIP = (e) => {\r\n        if (/^[0-9,a-f,.,:]*$/.test(e.target.value)) setNewIP(e.target.value);\r\n    }\r\n\r\n    const addIP = () => {\r\n        if (whitelist.includes(normalizeIP(newIP).store)) {\r\n            enqueueSnackbar('IP address already whitelisted', {\r\n                variant: 'error',\r\n                autoHideDuration: 8000,\r\n                action,\r\n            });\r\n        } else if (ipRegex.v4({ exact: true }).test(newIP) || ipRegex.v6({ exact: true }).test(newIP)) {\r\n            let newWhitelist = whitelist;\r\n            newWhitelist.push(normalizeIP(newIP).store);\r\n            setNewIP('');\r\n            setWhitelist(newWhitelist);\r\n        } else {\r\n            enqueueSnackbar('Invalid IP address', {\r\n                variant: 'error',\r\n                autoHideDuration: 8000,\r\n                action,\r\n            });\r\n        }\r\n    }\r\n\r\n    const deleteIP = (ip) => {\r\n        let newWhitelist = whitelist;\r\n        newWhitelist = newWhitelist.filter(item => item !== ip)\r\n        setWhitelist(newWhitelist);\r\n    }\r\n\r\n    const normalizeIP = (ipin) => {\r\n        let ip4 = null;\r\n        let ip6 = null;\r\n        if (ipaddr.isValid(ipin)) {\r\n            const ip = ipaddr.parse(ipin);\r\n            if (ip.kind() === 'ipv6') {\r\n                if (ip.isIPv4MappedAddress()) {\r\n                    ip4 = ip.toIPv4Address().toString();\r\n                }\r\n                ip6 = ip.toString();\r\n            } else {\r\n                ip4 = ip.toString();\r\n                ip6 = ip.toIPv4MappedAddress().toString();\r\n            }\r\n        }\r\n        // Show ip4 to the user whenever possible, otherwise ip6\r\n        // Always store ip6, and use that to check client ip versus whitelist\r\n        return {\r\n            show: ip4 ? ip4 : ip6,\r\n            store: ip6,\r\n        };\r\n    }\r\n\r\n    const onLogout = () => {\r\n        if (socket) socket.emit(\"logout\", access.token);\r\n        setServer({\r\n            status: status,\r\n            serverversion: serverversion,\r\n            servertime: servertime,\r\n            access: {\r\n                allow: false,\r\n                reason: 'logged out',\r\n                token: null,\r\n            },\r\n            externalip: externalip,\r\n            publicKey: publicKey,\r\n        });\r\n    };\r\n\r\n    const handleCloseDialog = async (e) => {\r\n        const last = e.target.parentElement.id;\r\n        setOpenDialog(false);\r\n\r\n        // Remove shown message from array\r\n        const newMessages = messages.slice(1, messages.length);\r\n        setMessages(newMessages);\r\n\r\n        if (socket) socket.emit(\"confirm-message\", last, access.token);\r\n\r\n        setLastMsg(last);\r\n    };\r\n\r\n    const capitalize = (str) => {\r\n        return str.substring(0, 1).toUpperCase() + str.substring(1);\r\n    }\r\n\r\n    const sleep = (ms) => {\r\n        return new Promise(resolve => setTimeout(resolve, ms));\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (messages.length > 0) {\r\n            const msg = messages[0];\r\n            if (msg.bbvNew) setLatestVersion(msg.bbvNew);\r\n\r\n            // Only show message in case it matches current version, major version, or any\r\n            if (msg.bbvReceive === 'any' || bbv.startsWith(msg.bbvReceive)) {\r\n\r\n                // Check if the message contains a new version number, and if so, if BB is already on the new version\r\n                let alreadyUpdated = msg.bbvNew ? bbv >= msg.bbvNew : false;\r\n\r\n                // If already on the latest version, don't show the message\r\n                if (!alreadyUpdated) {\r\n                    if (msg.dialogWidth === null) {\r\n                        const textLength = msg.message.length;\r\n                        if (textLength < 400) setMaxWidth('sm');\r\n                        else if (textLength < 800) setMaxWidth('md');\r\n                        else if (textLength < 3000) setMaxWidth('lg');\r\n                        else setMaxWidth('xl');\r\n                    } else {\r\n                        setMaxWidth(msg.dialogWidth);\r\n                    }\r\n\r\n                    const newDialogMsg = {\r\n                        number: msg.number,\r\n                        title: msg.title,\r\n                        message: msg.message,\r\n                        width: msg.dialogWidth,\r\n                        lock: msg.lock,\r\n                        updated: alreadyUpdated,\r\n                    }\r\n\r\n                    setDialog(newDialogMsg);\r\n                    setOpenDialog(true);\r\n                } else {\r\n                    if (socket) socket.emit(\"confirm-message\", msg.number, access.token);\r\n                    // Remove shown message from array\r\n                    const newMessages = messages.slice(1, messages.length);\r\n                    setMessages(newMessages);\r\n                }\r\n            } else {\r\n                if (socket) socket.emit(\"confirm-message\", msg.number, access.token);\r\n                // Remove message from array\r\n                const newMessages = messages.slice(1, messages.length);\r\n                setMessages(newMessages);\r\n            }\r\n        } else {\r\n            setOpenDialog(false);\r\n        }\r\n    }, [messages]);\r\n\r\n    async function getMessages() {\r\n        if (socket) socket.emit(\"get-messages\", access.token);\r\n\r\n        if (checkNow.current) {\r\n            setcheckIconColor('#ff9800');\r\n            setTimeout(() => {\r\n                setcheckIconColor('#fff');\r\n            }, 1500);\r\n        }\r\n\r\n        checkNow.current = false;\r\n    }\r\n\r\n    return (<ThemeProvider theme={theme}>\r\n        {!outdated ? (\r\n            <React.Fragment>\r\n                <Backdrop className={classes.backdrop} open={openBD}>\r\n                    <CircularProgress color=\"inherit\" />\r\n                </Backdrop>\r\n                <Dialog\r\n                    open={openDialog}\r\n                    fullWidth={true}\r\n                    maxWidth={maxWidth}\r\n                >\r\n                    <DialogTitle id=\"dialog-title\">{dialog.title}</DialogTitle>\r\n                    <DialogContent>\r\n                        <DialogContentText id=\"dialog-description\">\r\n                            <ReactMarkdown linkTarget=\"_blank\">\r\n                                {dialog.message}\r\n                            </ReactMarkdown>\r\n                        </DialogContentText>\r\n                    </DialogContent>\r\n                    <DialogActions>\r\n                        <Button variant=\"contained\" id={dialog.number} onClick={handleCloseDialog} color=\"secondary\" disabled={dialog.lock}>\r\n                            Close\r\n                        </Button>\r\n                    </DialogActions>\r\n                </Dialog>\r\n                <Dialog\r\n                    open={openDialog2}\r\n                    fullWidth={true}\r\n                >\r\n                    <DialogTitle>{dialog2.title}</DialogTitle>\r\n                    <DialogContent>\r\n                        <DialogContentText>\r\n                            <ReactMarkdown linkTarget=\"_blank\">\r\n                                {dialog2.message}\r\n                            </ReactMarkdown>\r\n                        </DialogContentText>\r\n                    </DialogContent>\r\n                    <DialogActions>\r\n                        <Button variant=\"contained\" onClick={() => setOpenDialog2(false)} color=\"secondary\">\r\n                            Close\r\n                        </Button>\r\n                    </DialogActions>\r\n                </Dialog>\r\n                    <CssBaseline />\r\n                    <AppBar position=\"relative\" className={classes.appBar}>\r\n                        <Toolbar>\r\n                            <img src=\"/logo192.png\" alt=\"Balance Bot Logo\" className={classes.logo} />\r\n                                <Grid container direction=\"row\" alignItems=\"center\" nowrap=\"true\">\r\n                                    <Grid item xs zeroMinWidth>\r\n                                        <Box mt={1.5}>\r\n                                            <Typography variant=\"h6\" color=\"inherit\" noWrap>\r\n                                                Balance Bot\r\n                                            </Typography>\r\n                                        </Box>\r\n                                        <Box mt={-1} style={{ color: '#959FD6' }}>\r\n                                            <Typography variant=\"caption\" color=\"inherit\" noWrap>\r\n                                                v{version}\r\n                                            </Typography>\r\n                                        </Box>\r\n                                    </Grid>\r\n                                    <Hidden xsDown>\r\n                                        <FlexToolbar wdt={flexWidthDown} update={update} logout={access && access.token} onLogout={onLogout} badge={badge} openDrawer={openDrawer} openDrawerDownloads={openDrawerDownloads} handleUpdateOpen={handleUpdateOpen} checkForUpdate={checkForUpdate} checkIconColor={checkIconColor} />\r\n                                    </Hidden>\r\n                                    <Hidden smUp>\r\n                                        <FlexToolbar wdt={flexWidthUp} update={update} logout={access && access.token} onLogout={onLogout} badge={badge} openDrawer={openDrawer} openDrawerDownloads={openDrawerDownloads} handleUpdateOpen={handleUpdateOpen} checkForUpdate={checkForUpdate} checkIconColor={checkIconColor} />\r\n                                    </Hidden>\r\n                                </Grid>\r\n                        </Toolbar>\r\n                    </AppBar>\r\n                <DropzoneDialog\r\n                    dropzoneText={'Drop a backup.zip file here or click to browse'}\r\n                    acceptedFiles={['application/x-zip-compressed']}\r\n                    filesLimit={1}\r\n                    cancelButtonText={\"cancel\"}\r\n                    submitButtonText={\"submit\"}\r\n                    maxFileSize={5000000}\r\n                    open={openDropzone}\r\n                    onClose={() => setOpenDropzone(false)}\r\n                    onDrop={(files, event) => {\r\n                        event.preventDefault();\r\n                        if (files[0].name.startsWith('backup') && files[0].name.endsWith('.zip')) {\r\n                            setOpenDropzone(false);\r\n                            handleUpload(files, event);\r\n                        } else {\r\n                            enqueueSnackbar('Please upload a backup.zip file', {\r\n                                variant: 'error',\r\n                                autoHideDuration: 8000,\r\n                                action,\r\n                            });\r\n                        }\r\n                    }}\r\n                    showPreviewsInDropzone={true}\r\n                    showFileNamesInPreview={true}\r\n                    showPreviews={false}\r\n                    useChipsForPreview={true}\r\n                    showAlerts={false}\r\n                />\r\n                <SwipeableDrawer\r\n                    className={classes.drawer}\r\n                    anchor=\"right\" open={downloadState} onOpen={() => { return }} onClose={closeDrawerDownloads}\r\n                    classes={{\r\n                        paper: classes.drawerPaper,\r\n                    }}\r\n                >\r\n                    <Toolbar />\r\n                    <div style={{ padding: 20 }}>\r\n                        <Grid container spacing={2}>\r\n                            <Grid item xs={10}>\r\n                                <Typography variant=\"h4\">\r\n                                    Download Files\r\n                                </Typography>\r\n                            </Grid>\r\n                            <Grid item xs={1}>\r\n                                <ClickAwayListener onClickAway={() => setOpenTT3(false)}>\r\n                                    <HtmlTooltip\r\n                                        interactive\r\n                                        title={\r\n                                            <React.Fragment>\r\n                                                <Box m={2}>\r\n                                                    <div><b>{\"Download Backup\"}</b></div>\r\n                                                    <div>{\"You can download a backup of your configuration files. This helps to restore your bot(s) when you'd like to do a new reinstallation or move your installation to another machine. Sensitive data (e.g. API keys, password, Telegram token) are stripped before downloading.\"}</div>\r\n                                                    <div>&nbsp;</div>\r\n                                                    <div>{\"If you've selected 'require login to access', this will be disabled in the downloaded onfiguration. This to avoid getting locked out if you use the backup to restore your bots. Make sure to re-enable login at first use.\"}</div>\r\n                                                    <div>&nbsp;</div>\r\n                                                    <div>{\"If you've enabled a Telegram bot, you will have to re-enter your Telegram token in the settings, and use the /start command in the Telegram bot to enable communication between BB and Telegram.\"}</div>\r\n                                                    <div>&nbsp;</div>\r\n                                                    <div>{\"NOTE: this will also create a new full backup on the server.\"}</div>\r\n                                                    <div>&nbsp;</div>\r\n                                                    <div><b>{\"Download Logs\"}</b></div>\r\n                                                    <div>{\"You can download log files containing output from your bot(s). This could help understand / debug possible issues with your installation.\"}</div>\r\n                                                </Box>\r\n                                            </React.Fragment>\r\n                                        }\r\n                                        onClose={() => setOpenTT3(false)}\r\n                                        open={openTT3}\r\n                                        disableFocusListener\r\n                                        disableHoverListener\r\n                                        disableTouchListener\r\n                                    >\r\n                                        <IconButton onClick={openTT3 ? () => setOpenTT3(false) : () => setOpenTT3(true)}>\r\n                                            <InfoOutlinedIcon color=\"secondary\" />\r\n                                        </IconButton>\r\n                                    </HtmlTooltip>\r\n                                </ClickAwayListener>\r\n                            </Grid>\r\n                            <Grid item xs={1}></Grid>\r\n                            <Grid item xs={12}>\r\n                                <Box pl={0} mt={-2}>\r\n                                    <Typography variant=\"overline\" color=\"textPrimary\">\r\n                                        Download configuration backup or log files\r\n                                    </Typography>\r\n                                </Box>\r\n                            </Grid>\r\n                            <Grid item xs={4}>\r\n                                <Button\r\n                                    variant=\"contained\"\r\n                                    color=\"primary\"\r\n                                    onClick={() => handleDownload('backup')}\r\n                                    className={classes.button2}\r\n                                >\r\n                                    Backup\r\n                                </Button>\r\n                            </Grid>\r\n                            <Grid item xs={4}>\r\n                                <Button\r\n                                    variant=\"contained\"\r\n                                    color=\"primary\"\r\n                                    onClick={() => handleDownload('logs')}\r\n                                    className={classes.button2}\r\n                                >\r\n                                    Logs\r\n                                </Button>\r\n                            </Grid>\r\n                        </Grid>\r\n                        <Box pt={3} />\r\n                        <Grid item xs={12}>\r\n                            <Typography variant={\"subtitle2\"}>Note: 'Backup' will also create a new full backup on the server</Typography>\r\n                        </Grid>\r\n                        <Box pt={5} />\r\n                        <Divider style={{height: 3} } />\r\n                        <Box pt={5} />\r\n                        <Grid container spacing={2}>\r\n                            <Grid item xs={10}>\r\n                                <Typography variant=\"h4\">\r\n                                    Restore Configuration\r\n                                </Typography>\r\n                            </Grid>\r\n                            <Grid item xs={1}>\r\n                                <ClickAwayListener onClickAway={() => setOpenTT4(false)}>\r\n                                    <HtmlTooltip\r\n                                        interactive\r\n                                        title={\r\n                                            <React.Fragment>\r\n                                                <Box m={2}>\r\n                                                    <div><b>{\"Upload Backup\"}</b></div>\r\n                                                    <div>{\"You can upload a backup of your configuration files (backup.zip). This will restore your installation based on a previously downloaded backup.\"}</div>\r\n                                                    <div>&nbsp;</div>\r\n                                                    <div><b>{\"Select Backup\"}</b></div>\r\n                                                    <div>{\"You can select from the automatically made backups of your configuration files. This will restore your installation based on the selected backup.\"}</div>\r\n                                                    <div>&nbsp;</div>\r\n                                                    <div>{\"Note: restoring your configuration from a backup will override your Bot Manager settings and bots that you have already configured as part of this installation, so please use with care.\"}</div>\r\n                                                    <div>&nbsp;</div>\r\n                                                    <div>{\"To execute the restore process, you will be asked to confirm in your Telegram bot.\"}</div>\r\n                                                </Box>\r\n                                            </React.Fragment>\r\n                                        }\r\n                                        onClose={() => setOpenTT4(false)}\r\n                                        open={openTT4}\r\n                                        disableFocusListener\r\n                                        disableHoverListener\r\n                                        disableTouchListener\r\n                                    >\r\n                                        <IconButton onClick={openTT4 ? () => setOpenTT4(false) : () => setOpenTT4(true)}>\r\n                                            <InfoOutlinedIcon color=\"secondary\" />\r\n                                        </IconButton>\r\n                                    </HtmlTooltip>\r\n                                </ClickAwayListener>\r\n                            </Grid>\r\n                            <Grid item xs={1}></Grid>\r\n                            <Grid item xs={12}>\r\n                                <Box pl={0} mt={-2}>\r\n                                    <Typography variant=\"overline\" color=\"textPrimary\">\r\n                                        Restore your bot(s) from a backup\r\n                                    </Typography>\r\n                                </Box>\r\n                                {(bots.length > 0 && !telegramEnabled) && (\r\n                                    <Box pl={1} mt={1}>\r\n                                        <Typography variant=\"subtitle2\" color=\"textPrimary\">\r\n                                            Note: you need to setup your Telegram bot first\r\n                                        </Typography>\r\n                                    </Box>\r\n                                ) }\r\n                            </Grid>\r\n                            <Grid item xs={4}>\r\n                                <Button\r\n                                    variant=\"contained\"\r\n                                    color=\"primary\"\r\n                                    onClick={() => handleRestore('upload')}\r\n                                    className={classes.button2}\r\n                                    disabled={(bots.length > 0 && !telegramEnabled) || !restoreAck}\r\n                                >\r\n                                    Upload\r\n                                </Button>\r\n                            </Grid>\r\n                            <Grid item xs={4}>\r\n                                <Button\r\n                                    variant=\"contained\"\r\n                                    color=\"primary\"\r\n                                    onClick={() => handleRestore('select')}\r\n                                    className={classes.button2}\r\n                                    disabled={(bots.length > 0 && !telegramEnabled) || !restoreAck}\r\n                                >\r\n                                    Select\r\n                                </Button>\r\n                            </Grid>\r\n                            <Grid item xs={12}>\r\n                                <FormControlLabel\r\n                                    control={<Checkbox color=\"secondary\" name=\"restore-ack\" disabled={false} checked={restoreAck} onChange={() => setRestoreAck(!restoreAck)} />}\r\n                                    label={<Typography variant={\"subtitle2\"}>I understand 'restore' will delete & replace my current bot(s)</Typography>}\r\n                                />\r\n                            </Grid>\r\n                        </Grid>\r\n                        <Box pt={5} />\r\n                        <Divider style={{ height: 3 }} />\r\n                        <Box pt={5} />\r\n                        <Grid container spacing={2}>\r\n                            <Grid item xs={10}>\r\n                                <Typography variant=\"h4\">\r\n                                    Application Control\r\n                                </Typography>\r\n                            </Grid>\r\n                            <Grid item xs={1}>\r\n                                <ClickAwayListener onClickAway={() => setOpenTT5(false)}>\r\n                                    <HtmlTooltip\r\n                                        interactive\r\n                                        title={\r\n                                            <React.Fragment>\r\n                                                <Box m={2}>\r\n                                                    <div><b>{\"Update Balance Bot\"}</b></div>\r\n                                                    <div>{\"This updates Balance Bot to a newer version, if available.\"}</div>\r\n                                                    <div>&nbsp;</div>\r\n                                                    <div><b>{\"Reinstall Balance Bot\"}</b></div>\r\n                                                    <div>{\"This reinstalls Balance Bot to the latest version. Note: your configuration will be kept.\"}</div>\r\n                                                </Box>\r\n                                            </React.Fragment>\r\n                                        }\r\n                                        onClose={() => setOpenTT5(false)}\r\n                                        open={openTT5}\r\n                                        disableFocusListener\r\n                                        disableHoverListener\r\n                                        disableTouchListener\r\n                                    >\r\n                                        <IconButton onClick={openTT5 ? () => setOpenTT5(false) : () => setOpenTT5(true)}>\r\n                                            <InfoOutlinedIcon color=\"secondary\" />\r\n                                        </IconButton>\r\n                                    </HtmlTooltip>\r\n                                </ClickAwayListener>\r\n                            </Grid>\r\n                            <Grid item xs={1}></Grid>\r\n                            <Grid item xs={12}>\r\n                                <Box pl={0} mt={-2}>\r\n                                    <Typography variant=\"overline\" color=\"textPrimary\">\r\n                                        Manage the Balance Bot installation\r\n                                    </Typography>\r\n                                </Box>\r\n                            </Grid>\r\n                            <Grid item xs={4}>\r\n                                <Button\r\n                                    variant=\"contained\"\r\n                                    color=\"primary\"\r\n                                    onClick={() => handleUpdateOpen('update')}\r\n                                    className={classes.button2}\r\n                                >\r\n                                    Update\r\n                                </Button>\r\n                            </Grid>\r\n                            <Grid item xs={4}>\r\n                                <Button\r\n                                    variant=\"contained\"\r\n                                    color=\"primary\"\r\n                                    onClick={() => handleUpdateOpen('reinstall')}\r\n                                    className={classes.button2}\r\n                                >\r\n                                    Reinstall\r\n                                </Button>\r\n                            </Grid>\r\n                        </Grid>\r\n                    </div>\r\n                </SwipeableDrawer>\r\n                <SwipeableDrawer\r\n                        className={classes.drawer}\r\n                        anchor=\"right\" open={menuState} onOpen={() => {return}} onClose={handleCancel}\r\n                        classes={{\r\n                            paper: classes.drawerPaper,\r\n                        }}\r\n                    >\r\n                        <Toolbar />\r\n                        <div style={{ padding: 20 }}>\r\n                            <Grid container spacing={2}>\r\n                                {(badge === 'telegram') && (\r\n                                    <Alert severity=\"error\">Configure and start your Telegram bot when enabling login or allowing temporary access from other IP addresses</Alert>\r\n                                )}\r\n                                {(badge === 1) && (\r\n                                    <Alert severity=\"error\">Re-enable login and re-enter your password</Alert>\r\n                                )}\r\n                                {(badge === 2) && (\r\n                                    <Alert severity=\"error\">Re-enter your Telegram token and type /start in your Telegram bot</Alert>\r\n                                )}\r\n                                {(badge === 3) && (\r\n                                <Box>\r\n                                    <Alert severity=\"error\">Re-enter your Telegram token and type /start in your Telegram bot</Alert>\r\n                                    <Alert severity=\"error\">Re-enable login and re-enter your password</Alert>\r\n                                </Box>\r\n                                )}\r\n                                <Grid item xs={10}>\r\n                                    <Typography variant=\"h4\">\r\n                                        General Settings\r\n                                    </Typography>\r\n                                </Grid>\r\n                                <Grid item xs={1}>\r\n                                    <ClickAwayListener onClickAway={() => setOpenTT(false)}>\r\n                                        <HtmlTooltip\r\n                                            interactive\r\n                                            title={\r\n                                                <React.Fragment>\r\n                                                    <Box m={2}>\r\n                                                        <div><b>{\"Server timezone adjustment\"}</b></div>\r\n                                                        <div>{\"If you're hosting Balance Bot in the cloud, and the server's timezone is different from your local timezone, you can use this setting to adjust for that so that timestamps for orders and other events are provided in your local timezone. This setting will be applied to all your individual bots.\"}</div>\r\n                                                        <div>&nbsp;</div>\r\n                                                        <div><b>{\"Telegram Bot\"}</b></div>\r\n                                                        <div>{\"You can receive notifications from Bot Manager and your bot(s) on Telegram. To do so, take the following steps:\"}</div>\r\n                                                        <div>&nbsp;</div>\r\n                                                        <div>{\"1. Create a Telegram bot by sending '/newbot' to the BotFather (Telegram's uber bot): \"}<Link href=\"https://t.me/botfather\" target=\"_blank\" rel=\"noopener\" color=\"secondary\">https://t.me/botfather</Link></div>\r\n                                                        <div>{\"2. Answer BotFather's questions, i.e. pick a name and a username for your bot\"}</div>\r\n                                                        <div>{\"3. Copy the token provided by BotFather and paste it here in the settings\"}</div>\r\n                                                        <div>{\"4. Enter your personal Telegram username (your name on Telegram preceded by @, NOT the username for your Telegram bot) here in the settings\"}</div>\r\n                                                        <div>{\"5. Open your Telegram bot using the link provided by BotFather: \"}<Link href=\"#\" color=\"secondary\">t.me/[botname]</Link></div>\r\n                                                        <div>{\"6. Tap the 'start' button at the bottom, or type '/start' for further instructions\"}</div>\r\n                                                    </Box>\r\n                                                </React.Fragment>\r\n                                            }\r\n                                            onClose={() => setOpenTT(false)}\r\n                                            open={openTT}\r\n                                            disableFocusListener\r\n                                            disableHoverListener\r\n                                            disableTouchListener\r\n                                        >\r\n                                            <IconButton onClick={openTT ? () => setOpenTT(false) : () => setOpenTT(true)}>\r\n                                                <InfoOutlinedIcon color=\"secondary\" />\r\n                                            </IconButton>\r\n                                        </HtmlTooltip>\r\n                                    </ClickAwayListener>\r\n                                    <Grid item xs={1}></Grid>\r\n                                </Grid>\r\n                                <Grid item xs={12}>\r\n                                    <FormControl>\r\n                                        <InputLabel id=\"server-timezone\">Adjust for server timezone</InputLabel>\r\n                                        <Select\r\n                                            labelId=\"server-timezone\"\r\n                                            value={timeshift}\r\n                                            onChange={onTimeshift}\r\n                                            className={classes.textinput}\r\n                                        >\r\n                                            <MenuItem value={12}>+12:00</MenuItem>\r\n                                            <MenuItem value={11}>+11:00</MenuItem>\r\n                                            <MenuItem value={10}>+10:00</MenuItem>\r\n                                            <MenuItem value={9}>+09:00</MenuItem>\r\n                                            <MenuItem value={8}>+08:00</MenuItem>\r\n                                            <MenuItem value={7}>+07:00</MenuItem>\r\n                                            <MenuItem value={6}>+06:00</MenuItem>\r\n                                            <MenuItem value={5}>+05:00</MenuItem>\r\n                                            <MenuItem value={4}>+04:00</MenuItem>\r\n                                            <MenuItem value={3}>+03:00</MenuItem>\r\n                                            <MenuItem value={2}>+02:00</MenuItem>\r\n                                            <MenuItem value={1}>+01:00</MenuItem>\r\n                                            <MenuItem value={0}>No adjustment</MenuItem>\r\n                                            <MenuItem value={-1}>-01:00</MenuItem>\r\n                                            <MenuItem value={-2}>-02:00</MenuItem>\r\n                                            <MenuItem value={-3}>-03:00</MenuItem>\r\n                                            <MenuItem value={-4}>-04:00</MenuItem>\r\n                                            <MenuItem value={-5}>-05:00</MenuItem>\r\n                                            <MenuItem value={-6}>-06:00</MenuItem>\r\n                                            <MenuItem value={-7}>-07:00</MenuItem>\r\n                                            <MenuItem value={-8}>-08:00</MenuItem>\r\n                                            <MenuItem value={-9}>-09:00</MenuItem>\r\n                                            <MenuItem value={-10}>-10:00</MenuItem>\r\n                                            <MenuItem value={-11}>-11:00</MenuItem>\r\n                                            <MenuItem value={-12}>-12:00</MenuItem>\r\n                                        </Select>\r\n                                        <FormHelperText>Current server time: {currenttime} - Adjusted server time: {newtime}</FormHelperText>\r\n                                    </FormControl>\r\n                                </Grid>\r\n                                <Grid item xs={12}>\r\n                                    <TextField\r\n                                        id=\"telegram-token\"\r\n                                        name=\"telegram-token\"\r\n                                        label=\"Telegram Token\"\r\n                                        helperText=\"Token for your Telegram bot as provided by BotFather\"\r\n                                        type=\"password\"\r\n                                        value={telegramToken}\r\n                                        onChange={onTelegramToken}\r\n                                        className={classes.textinput}\r\n                                        autoComplete='off'\r\n                                    />\r\n                                </Grid>\r\n                                <Grid item xs={12}>\r\n                                    <TextField\r\n                                        id=\"telegram-username\"\r\n                                        name=\"telegram-username\"\r\n                                        label=\"Telegram Username\"\r\n                                        helperText=\"Your Telegram username\"\r\n                                        value={telegramUsername}\r\n                                        onChange={onTelegramUsername}\r\n                                        className={classes.textinput}\r\n                                    />\r\n                                </Grid>\r\n                                <Grid item xs={10}>\r\n                                    <Typography variant=\"h4\">\r\n                                        Security Settings\r\n                                    </Typography>\r\n                                </Grid>\r\n                                <Grid item xs={1}>\r\n                                    <ClickAwayListener onClickAway={() => setOpenTT2(false)}>\r\n                                        <HtmlTooltip\r\n                                            interactive\r\n                                            title={\r\n                                                <React.Fragment>\r\n                                                    <Box m={2}>\r\n                                                        <div><b>{\"Security Settings\"}</b></div>\r\n                                                        <div>{\"If you're running Balance Bot in the cloud, it is highly recommended to only allow access from selected IP addresses (like your home IP address). Alternatively, or additionally, you may want to require login before getting access. You should use at least one of these options to prevent others from accessing your Balance Bot deployment.\"}</div>\r\n                                                        <div>&nbsp;</div>\r\n                                                        <div><b>{\"Require login to access\"}</b></div>\r\n                                                        <div>{\"Check this option to require logging in using a username and password. For improved security, after logging in, your session will expire after 60 minutes. Optionally, you can activate Two Factor Authentication (2FA) through your Telegram bot (requires Telegram configuration, see General Settings above).\"}</div>\r\n                                                        <div>&nbsp;</div>\r\n                                                        <div><b>{\"Enable IP whitelist\"}</b></div>\r\n                                                        <div>{\"Check this option to allow access to Balance Bot from selected IP addresses only, and add your trusted IP address(es) to the IP whitelist. By default, your current IP address is added to the IP whitelist when enabling the option, to prevent you from being locked out.\"}</div>\r\n                                                        <div>&nbsp;</div>\r\n                                                        <div><b>{\"Allow temporary access\"}</b></div>\r\n                                                        <div>{\"There may be occassions when you want to access Balance Bot from an IP address that is not whitelisted. By checking the temporary access option, if you're trying to access Balance Bot from a non-whitelisted IP address, you will receive a message in your Telegram Bot and you can approve temporary access from that IP address (requires Telegram configuration, see General Settings above). If you have login enabled, you will be asked for your username and password instead.\"}</div>\r\n                                                        <div>&nbsp;</div>\r\n                                                        <div>{\"Note: for security reasons, it is NOT recommended to access Balance Bot over public wifi networks.\"}</div>\r\n                                                    </Box>\r\n                                                </React.Fragment>\r\n                                            }\r\n                                            onClose={() => setOpenTT2(false)}\r\n                                            open={openTT2}\r\n                                            disableFocusListener\r\n                                            disableHoverListener\r\n                                            disableTouchListener\r\n                                        >\r\n                                            <IconButton onClick={openTT2 ? () => setOpenTT2(false) : () => setOpenTT2(true)}>\r\n                                                <InfoOutlinedIcon color=\"secondary\" />\r\n                                            </IconButton>\r\n                                        </HtmlTooltip>\r\n                                    </ClickAwayListener>\r\n                                    <Grid item xs={1}></Grid>\r\n                                </Grid>\r\n                                <Box pl={1} mt={-2}>\r\n                                    <Typography variant=\"overline\" color=\"textPrimary\">\r\n                                        For security reasons, don't use public wifi networks\r\n                                    </Typography>\r\n                                </Box>\r\n                                <Grid item xs={12}>\r\n                                        {(telegramToken === '' || telegramUsername === '' || !telegramChatId) && !loginRequired ? (\r\n                                            <LightTooltip title=\"Requires Telegram bot to be set up and started with /start\">\r\n                                                <FormControlLabel\r\n                                                    control={<Checkbox color=\"secondary\" name=\"login-required\" disabled={true} checked={loginRequired} onChange={onLoginRequired} />}\r\n                                                    label=\"Require login to access\"\r\n                                                />\r\n                                            </LightTooltip>\r\n                                        ) : (\r\n                                                <FormControlLabel\r\n                                                    control={<Checkbox color=\"secondary\" name=\"login-required\" disabled={false} checked={loginRequired} onChange={onLoginRequired} />}\r\n                                                    label=\"Require login to access\"\r\n                                                />\r\n                                        )}\r\n                                </Grid>\r\n                                <Box p={2} display={loginRequired ? 'inline' : 'none'} bgcolor={mode === 'dark' ? \"#757575\" : \"#e0e0e0\"} width=\"100%\" >\r\n                                    <Grid item xs={12}>\r\n                                        <TextField\r\n                                            id=\"bb-username\"\r\n                                            name=\"bb-username\"\r\n                                            label=\"Username\"\r\n                                            helperText=\"Your Balance Bot username\"\r\n                                            value={bbUsername}\r\n                                            onChange={onBbUsername}\r\n                                            className={classes.textinput}\r\n                                            disabled={!loginRequired}\r\n                                            autoComplete='off'\r\n                                        />\r\n                                    </Grid>\r\n                                    <Grid item xs={12}>\r\n                                        <TextField\r\n                                            id=\"bb-password\"\r\n                                            name=\"bb-password\"\r\n                                            label=\"Password\"\r\n                                            helperText=\"Your Balance Bot password\"\r\n                                            type=\"password\"\r\n                                            value={bbPassword}\r\n                                            onChange={onBbPassword}\r\n                                            className={classes.textinput}\r\n                                            disabled={!loginRequired}\r\n                                            autoComplete='off'\r\n                                        />\r\n                                    </Grid>\r\n                                    <Grid item xs={12}>\r\n                                        {(telegramToken === '' || telegramUsername === '' || !telegramChatId) && !f2aRequired ? (\r\n                                            <LightTooltip title=\"Requires Telegram bot to be set up and started with /start\">\r\n                                                <FormControlLabel\r\n                                                    control={<Checkbox color=\"secondary\" name=\"f2a-required\" disabled={true} checked={f2aRequired} onChange={onF2aRequired} />}\r\n                                                    label=\"Require 2FA through Telegram bot to log in\"\r\n                                                />\r\n                                            </LightTooltip>\r\n                                        ) : (\r\n                                            <FormControlLabel\r\n                                                control={<Checkbox color=\"secondary\" name=\"f2a-required\" disabled={false} checked={f2aRequired} onChange={onF2aRequired} />}\r\n                                                label=\"Require 2FA through Telegram bot to log in\"\r\n                                            />\r\n                                        )}\r\n                                    </Grid>\r\n                                </Box>\r\n                                <Grid item xs={12}>\r\n                                    <FormControlLabel\r\n                                        control={<Checkbox color=\"secondary\" name=\"whitelist-enabled\" checked={whitelistEnabled} onChange={onWhitelistEnabled} />}\r\n                                        label=\"Enable IP whitelist\"\r\n                                    />\r\n                                </Grid>\r\n                                <Box p={2} display={whitelistEnabled ? 'inline' : 'none'} bgcolor={mode === 'dark' ? \"#757575\" : \"#e0e0e0\"} width=\"100%\" >\r\n                                    <Grid item xs={12}>\r\n                                        <Typography variant=\"overline\" color=\"textSecondary\">\r\n                                            IP Whitelist\r\n                                        </Typography>\r\n                                    </Grid>\r\n                                    <Grid item xs={12}>\r\n                                        <List dense={true}>\r\n                                            {whitelist.map((ip) => ip === normalizeIP(externalip).store ? (\r\n                                                <ListItem key={ip}>\r\n                                                    <ListItemText\r\n                                                        primary={normalizeIP(ip).show}\r\n                                                    />\r\n                                                    <ListItemSecondaryAction>\r\n                                                        <Button color=\"secondary\" edge=\"end\" size=\"small\" disableFocusRipple disableRipple disabled>\r\n                                                            Current IP\r\n                                                        </Button>\r\n                                                    </ListItemSecondaryAction>\r\n                                                </ListItem>\r\n                                            ) : (\r\n                                                <ListItem key={ip}>\r\n                                                    <ListItemText\r\n                                                        primary={normalizeIP(ip).show}\r\n                                                    />\r\n                                                    <ListItemSecondaryAction>\r\n                                                        <IconButton edge=\"end\" size=\"small\" onClick={() => deleteIP(ip)}>\r\n                                                            <DeleteIcon />\r\n                                                        </IconButton>\r\n                                                    </ListItemSecondaryAction>\r\n                                                </ListItem>\r\n                                            ))}\r\n                                        </List>\r\n                                    </Grid>\r\n                                    <Grid item container justify=\"space-between\" xs={12}>\r\n                                        <Grid item xs={9}>\r\n                                            <TextField\r\n                                                id=\"new-ip\"\r\n                                                name=\"new-ip\"\r\n                                                label=\"IP Address\"\r\n                                                value={newIP}\r\n                                                onChange={onNewIP}\r\n                                                className={classes.textinput}\r\n                                            />\r\n                                        </Grid>\r\n                                        <Grid item xs={1}>\r\n                                            <Fab size=\"small\" color=\"secondary\" onClick={addIP}>\r\n                                                <AddIcon />\r\n                                            </Fab>\r\n                                        </Grid>\r\n                                    </Grid>\r\n                                        <Grid item xs={12}>\r\n                                            {(telegramToken === '' || telegramUsername === '' || !telegramChatId) && !temporaryAccessAllowed ? (\r\n                                                <LightTooltip title=\"Requires Telegram bot to be set up and started with /start\">\r\n                                                    <FormControlLabel\r\n                                                        control={<Checkbox color=\"secondary\" name=\"temporary-access-allowed\" disabled={true} checked={temporaryAccessAllowed} onChange={onTemporaryAccessAllowed} />}\r\n                                                        label=\"Allow controlled temporary access from other IPs\"\r\n                                                        />\r\n                                                </LightTooltip>\r\n                                            ) : (\r\n                                                <FormControlLabel\r\n                                                    control={<Checkbox color=\"secondary\" name=\"temporary-access-allowed\" disabled={false} checked={temporaryAccessAllowed} onChange={onTemporaryAccessAllowed} />}\r\n                                                    label=\"Allow controlled temporary access from other IPs\"\r\n                                                />\r\n                                            )}\r\n                                    </Grid>\r\n                                </Box>\r\n                                <Grid item xs={3}>\r\n                                    <Button\r\n                                        variant=\"contained\"\r\n                                        color=\"primary\"\r\n                                        onClick={handleCancel}\r\n                                        className={classes.button}\r\n                                    >\r\n                                        Cancel\r\n                                    </Button>\r\n                                </Grid>\r\n                                <Grid item xs={3}>\r\n                                    <Button\r\n                                        variant=\"contained\"\r\n                                        color=\"primary\"\r\n                                        onClick={handleSave}\r\n                                        className={classes.button}\r\n                                    >\r\n                                        Save\r\n                                    </Button>\r\n                                </Grid>\r\n                            </Grid> \r\n                        </div>\r\n                </SwipeableDrawer>\r\n                    <main>\r\n                        <div className={classes.heroContent}>\r\n                            <Container maxWidth=\"sm\">\r\n                                <Typography component=\"h1\" variant=\"h2\" align=\"center\" color=\"textPrimary\" gutterBottom>\r\n                                    Bot Manager\r\n                                </Typography>\r\n                                <Typography variant=\"h5\" align=\"center\" color=\"textSecondary\" paragraph>\r\n                                    Create, start, stop &amp; delete your bots\r\n                                </Typography>\r\n                                <div className={classes.heroButtons}>\r\n                                    <Grid container spacing={2} justify=\"center\">\r\n                                        <Grid item>\r\n                                            <Button variant=\"contained\" color=\"primary\" onClick={handleAddBot}>\r\n                                                Add new bot\r\n                                            </Button>\r\n                                        </Grid>\r\n                                    </Grid>\r\n                                </div>\r\n                            </Container>\r\n                        </div>\r\n                        <Container className={classes.cardGrid} maxWidth=\"md\">\r\n                            <Grid container spacing={4}>\r\n                                {bots && bots.length > 0 && bots.map((bot) => (\r\n                                    <BotCard key={bot.botID} bot={bot} mode={mode} callback={handleUpdate} />\r\n                                ))}\r\n                            </Grid>\r\n                            <Box mb={4} />\r\n                        </Container>\r\n                    </main>\r\n                    <div className={classes.bottomPush}>\r\n                        <footer className={classes.footer}>\r\n                            <Grid container alignItems=\"center\">\r\n                                <Grid container item xs={12} sm={6} md={3} alignItems=\"center\" justify=\"flex-start\">\r\n                                    <Grid item>\r\n                                        <FormControlLabel\r\n                                            onChange={handleDarkmode}\r\n                                            value={mode}\r\n                                            control={<CustomSwitch checked={mode === 'dark'} color=\"secondary\" />}\r\n                                            label={<Typography variant=\"button\"><Box color=\"#FFF\">Light</Box></Typography>}\r\n                                            labelPlacement=\"start\"\r\n                                        />\r\n                                    </Grid>\r\n                                    <Grid item>\r\n                                        <StyledButton disableRipple onClick={handleDarkmode}><Typography variant=\"button\">\r\n                                            <Box color=\"#FFF\">Dark</Box>\r\n                                        </Typography></StyledButton>\r\n                                    </Grid>\r\n                                </Grid>\r\n                                <Hidden xsDown>\r\n                                    <Grid item xs={false} sm={6} md={6}>\r\n                                        <Copyright />\r\n                                    </Grid>\r\n                                    <Hidden xsDown>\r\n                                        <Grid item xs={false} md={3}></Grid>\r\n                                    </Hidden>\r\n                                </Hidden>\r\n                            </Grid>\r\n                        </footer>\r\n                    </div>\r\n                    <Dialog open={open} onClose={handleClose}>\r\n                        <DialogTitle>Confirm Delete</DialogTitle>\r\n                        <DialogContent>\r\n                            <DialogContentText>\r\n                                <Typography color=\"textPrimary\">\r\n                                    Warning: your bot, its configuration, and all its data will be deleted. Enter the bot name to confirm deletion: <b>{deleteBot.botname}</b>\r\n                                </Typography>\r\n                            </DialogContentText>\r\n                            <TextField\r\n                                autoFocus\r\n                                color={(mode === 'light') ? \"primary\" : \"secondary\"}\r\n                                margin=\"dense\"\r\n                                id=\"botname\"\r\n                                label=\"Bot name\"\r\n                                type=\"text\"\r\n                                value={input}\r\n                                onChange={onInput}\r\n                                fullWidth\r\n                            />\r\n                        </DialogContent>\r\n                        <DialogActions>\r\n                            <Button variant=\"contained\" onClick={handleClose} color={(mode === 'light') ? \"primary\" : \"secondary\"}>\r\n                                Cancel\r\n                            </Button>\r\n                            <Button variant=\"contained\" onClick={confirmDelete} color={(mode === 'light') ? \"primary\" : \"secondary\"}>\r\n                                Delete bot\r\n                            </Button>\r\n                        </DialogActions>\r\n                    </Dialog>\r\n                <Dialog open={openBackupSelect} onClose={() => {setOpenBackupSelect(false)}}>\r\n                    <DialogTitle>Select Backup</DialogTitle>\r\n                    <DialogContent>\r\n                        {backupFiles.length > 0 ? (\r\n                            <Box>\r\n                                <DialogContentText>\r\n                                    <Typography color=\"textPrimary\">\r\n                                        Please select a backup below. This backup will be used to restore your configuration\r\n                                    </Typography>\r\n                                </DialogContentText>\r\n                                <Select\r\n                                    labelId=\"backup-selection\"\r\n                                    value={backupFile}\r\n                                    onChange={(event) => {setBackupFile(event.target.value)}}\r\n                                    className={classes.textinput}\r\n                                >\r\n                                    {backupFiles.map((file) =>\r\n                                        (\r\n                                            <MenuItem value={file.name}>{file.name}</MenuItem>\r\n                                        )\r\n                                    )}\r\n                                </Select>\r\n                            </Box>\r\n                            ) : (\r\n                                <DialogContentText>\r\n                                    <Typography color=\"textPrimary\">\r\n                                        There are no backups available yet. Backup are made automatically every day\r\n                                    </Typography>\r\n                                </DialogContentText>\r\n                            )} \r\n                    </DialogContent>\r\n                    <DialogActions>\r\n                        <Button variant=\"contained\" onClick={() => {setOpenBackupSelect(false)}} color={(mode === 'light') ? \"primary\" : \"secondary\"}>\r\n                            Cancel\r\n                        </Button>\r\n                        <Button variant=\"contained\" disabled={backupFiles.length === 0} onClick={onBackupSelect} color={(mode === 'light') ? \"primary\" : \"secondary\"}>\r\n                            Restore Backup\r\n                        </Button>\r\n                    </DialogActions>\r\n                </Dialog>\r\n                <Dialog open={openUpdate} onClose={handleUpdateClose}>\r\n                    {validInstallation ? (\r\n                        <>\r\n                            <DialogTitle>Confirm {capitalize(updateMethod)}</DialogTitle>\r\n                            <DialogContent>\r\n                                <DialogContentText>\r\n                                    <Typography color=\"textPrimary\">\r\n                                        Do you want to {updateMethod} to the latest version? Balance Bot will be unavailable until the process has completed. This may take a few minutes. Just wait for the Bot Manager to reappear.\r\n                                    </Typography>\r\n                                </DialogContentText>\r\n                            </DialogContent>\r\n                            <DialogActions>\r\n                                <Button variant=\"contained\" onClick={handleUpdateClose} color={(mode === 'light') ? \"primary\" : \"secondary\"}>\r\n                                    Cancel\r\n                                </Button>\r\n                                <Button variant=\"contained\" onClick={confirmBbUpdate} color={(mode === 'light') ? \"primary\" : \"secondary\"}>\r\n                                    {capitalize(updateMethod)}\r\n                                </Button>\r\n                            </DialogActions>\r\n                        </>\r\n                    ) : (\r\n                        <>\r\n                            <DialogTitle>Manual {capitalize(updateMethod)} Required</DialogTitle>\r\n                            <DialogContent>\r\n                                <DialogContentText>\r\n                                    <Typography color=\"textPrimary\">\r\n                                        Your installation does not support {updateMethod}s from the browser. Please perform a manual {updateMethod}.\r\n                                    </Typography>\r\n                                </DialogContentText>\r\n                                <DialogContentText>\r\n                                    <Typography color=\"textPrimary\">\r\n                                        Possible causes:\r\n                                        <ol>\r\n                                            <li>You haven't installed BB using the official installer</li>\r\n                                            <li>You're running BB in a Docker container</li>\r\n                                        </ol>\r\n                                    </Typography>\r\n                                </DialogContentText>\r\n                            </DialogContent>\r\n                            <DialogActions>\r\n                                <Button variant=\"contained\" onClick={handleUpdateClose} color={(mode === 'light') ? \"primary\" : \"secondary\"}>\r\n                                    OK\r\n                                </Button>\r\n                            </DialogActions>\r\n                        </>\r\n                    )}\r\n                </Dialog>\r\n                </React.Fragment>\r\n            ) : (\r\n                <Dialog\r\n                    open={true}\r\n                    fullWidth={true}\r\n                    maxWidth={'sm'}\r\n                >\r\n                    <DialogContent>\r\n                        <DialogContentText>\r\n                            <Typography variant=\"overline\" color=\"secondary\">\r\n                                New version has been installed\r\n                            </Typography>\r\n                            <DialogContentText>\r\n                            </DialogContentText>\r\n                            <Typography variant=\"overline\" color=\"textPrimary\">\r\n                                Please refresh the browser window to load the latest version\r\n                            </Typography>\r\n                        </DialogContentText>\r\n                    </DialogContent>\r\n                    <DialogActions>\r\n                        <Button variant=\"contained\" onClick={handleRefresh} color=\"secondary\">\r\n                            Refresh\r\n                        </Button>\r\n                    </DialogActions>\r\n                </Dialog>\r\n            )\r\n        }\r\n    </ThemeProvider>\r\n    )\r\n}\r\n\r\nconst FlexToolbar = (props) => {\r\n    const { wdt, update, logout, onLogout, badge, openDrawer, openDrawerDownloads, handleUpdateOpen, checkForUpdate, checkIconColor } = props;\r\n\r\n    return (\r\n        <Grid item xs container direction=\"row\" alignItems=\"center\" justify=\"flex-end\" style={{ maxWidth: wdt }}>\r\n            {(update) ? (\r\n                <Hidden xsDown>\r\n                    <Grid item style={{ width: '130px' }}>\r\n                        <Chip onClick={handleUpdateOpen} label='Update Available' style={{ backgroundColor: '#959FD6', color: 'white' }} />\r\n                    </Grid>\r\n                </Hidden>\r\n            ) : (\r\n                <Hidden xsDown>\r\n                    <Grid item style={{ width: '40px' }}>\r\n                        <LightTooltip title=\"Check for updates\">\r\n                            <IconButton onClick={checkForUpdate}>\r\n                                <AutorenewIcon style={{ color: checkIconColor }} />\r\n                            </IconButton>\r\n                        </LightTooltip>\r\n                    </Grid>\r\n                </Hidden>\r\n            )}\r\n            <Grid item>\r\n                <LightTooltip title=\"Admin Tools\">\r\n                    <IconButton onClick={openDrawerDownloads}>\r\n                        <DescriptionOutlinedIcon style={{ color: '#fff' }} />\r\n                    </IconButton>\r\n                </LightTooltip>\r\n            </Grid>\r\n            <Grid item>\r\n                <LightTooltip title=\"Settings\">\r\n                    <IconButton onClick={openDrawer}>\r\n                        {(badge === 'false') ? (\r\n                            <MenuIcon style={{ color: '#fff' }} />\r\n                        ) : (\r\n                            <Badge badgeContent={'!'} color=\"secondary\">\r\n                                <MenuIcon style={{ color: '#fff' }} />\r\n                            </Badge>\r\n                        )}\r\n                    </IconButton>\r\n                </LightTooltip>\r\n            </Grid>\r\n            {(logout) && (\r\n                <Grid item style={{ width: '48px' }}>\r\n                    <LightTooltip title=\"Logout\">\r\n                        <IconButton onClick={onLogout}>\r\n                            <ExitToAppIcon style={{ color: '#ffffff' }} />\r\n                        </IconButton>\r\n                    </LightTooltip>\r\n                </Grid>\r\n            )}\r\n        </Grid>\r\n    );\r\n}","import React, { useContext, useState, useEffect } from 'react';\r\nimport { makeStyles, createMuiTheme, ThemeProvider } from '@material-ui/core/styles';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Link2 from '@material-ui/core/Link';\r\nimport Box from '@material-ui/core/Box';\r\nimport Button from '@material-ui/core/Button';\r\nimport { useLocalStore } from \"../services/LocalStoreService\";\r\nimport { ServerContext } from '../context/ServerContext';\r\nimport { useSnackbar } from 'notistack';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport pckg2 from '../version2.json';\r\nimport { socket } from '../context/SocketContext';\r\nimport { Crypt } from 'hybrid-crypto-js';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        display: 'flex',\r\n    },\r\n    appBar: {\r\n        zIndex: theme.zIndex.drawer + 1,\r\n    },\r\n    logo: {\r\n        maxWidth: 60,\r\n        padding: 10,\r\n    },\r\n    content: {\r\n        justify: \"flex-start\",\r\n        alignItems: \"flex-start\",\r\n        flexGrow: 1,\r\n        padding: theme.spacing(2),\r\n    },\r\n    footer: {\r\n        marginTop: 'auto',\r\n        backgroundColor: '#000000',\r\n    },\r\n    bottomPush: {\r\n        position: \"fixed\",\r\n        width: '100%',\r\n        bottom: 0,\r\n        paddingBottom: 0,\r\n        zIndex: theme.zIndex.drawer + 1,\r\n    },\r\n}));\r\n\r\nfunction Copyright() {\r\n    return (\r\n        <Box color=\"#FFF\" height={54} p={2}>\r\n            <Typography variant=\"body2\" align=\"center\">\r\n                {'Copyright  '}\r\n                <Link2 style={{ color: '#ffffff', textDecoration: 'none' }} href=\"https://hodlerhacks.com/\" target=\"_blank\" rel=\"noopener\">\r\n                    hodlerhacks.com\r\n                </Link2>{' '}\r\n                {new Date().getFullYear()}\r\n            </Typography>\r\n        </Box>\r\n    );\r\n}\r\n\r\nexport default function Public() {\r\n    const version = pckg2.version;\r\n\r\n    const mode = useLocalStore('mode', 'light')[0];\r\n    const { status, access, publicKey } = useContext(ServerContext)[0];\r\n    const [loginNow, setLoginNow] = useState(false);\r\n    const [accessMsg, setAccessMsg] = useState('initial state');\r\n    const [serverDown, setServerDown] = useState(false);\r\n    const [usernameProvided, setUsernameProvided] = useState(false);\r\n    const [username, setUsername] = useState('');\r\n    const [password, setPassword] = useState('');\r\n\r\n    const getUsername = () => {\r\n        const pathname = window.location.pathname;\r\n        const result = pathname.match(/user\\/(\\w{3,})/);\r\n\r\n        if (result)\r\n            return result[1];\r\n        else\r\n            return '';\r\n    }\r\n\r\n    let crypt = new Crypt({\r\n        md: 'sha256',\r\n        rsaStandard: 'RSA-OAEP',\r\n    });\r\n\r\n    useEffect(() => {\r\n        document.title = `BB | Bot Dashboard`;\r\n\r\n        let user = getUsername();\r\n\r\n        if (user) {\r\n            setUsername(user);\r\n            setUsernameProvided(true);\r\n        }\r\n\r\n        return () => {\r\n        }\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (status === 'disconnected')\r\n            // If status remains in disconnected state for too long, the server is down\r\n            setTimeout(() => {\r\n                if (status === 'disconnected') setServerDown(true);\r\n            }, 5000);\r\n        else\r\n            setServerDown(false);\r\n\r\n        return () => {\r\n        }\r\n    }, [status]);\r\n\r\n    useEffect(() => {\r\n        if (access) {\r\n            setLoginNow(false);\r\n            setServerDown(false);\r\n            if (access.allow === true) {\r\n                setAccessMsg('');\r\n            } else if (access.allow === false && access.reason === 'login required') {\r\n                setAccessMsg(\"Please log in\");\r\n                setLoginNow(true);\r\n            } else if (access.allow === false && access.reason === '2FA required') {\r\n                setAccessMsg(\"Add your client's IP address to the IP whitelist, or temporarily allow access through your Telegram bot\");\r\n            } else if (access.allow === false && access.reason === 'temporary access not allowed') {\r\n                setAccessMsg(\"Add your client's IP address to the IP whitelist\");\r\n            } else if (access.allow === false && access.reason === 'access timeout') {\r\n                handleRefresh();\r\n            } else if (access.allow === false && access.reason === 'temporary access timeout') {\r\n                setAccessMsg(\"Your temporary access has expired\");\r\n            } else if (access.allow === false && access.reason === '2FA login required') {\r\n                setAccessMsg(\"2FA required - approve login through your Telegram bot\");\r\n            } else if (access.allow === false && access.reason === 'invalid credentials') {\r\n                setAccessMsg(\"Incorrect username or password - please try again\");\r\n                setLoginNow(true);\r\n            } else if (access.allow === false && access.reason === '2FA login rejected') {\r\n                setAccessMsg(\"2FA login was rejected\");\r\n            } else if (access.allow === false && access.reason === 'temporary access rejected') {\r\n                setAccessMsg(\"Temporary access was rejected\");\r\n            } else if (access.allow === false && access.reason === 'logged out') {\r\n                handleRefresh();\r\n            } else if (access.allow === false && access.reason === 'initial state') {\r\n                setAccessMsg(\"initial state\");\r\n                // If access.reason remains in intial state for too long, the server is down\r\n                setTimeout(() => {\r\n                    if (access.reason === 'initial state') setServerDown(true);\r\n                }, 4000);\r\n            } else if (access.allow === false && access.reason === 'reload') {\r\n                handleRefresh();\r\n            }\r\n        }\r\n\r\n        return () => {\r\n        }\r\n    }, [access]);\r\n\r\n    const theme = createMuiTheme({\r\n        palette: {\r\n            type: mode\r\n        }\r\n    });\r\n\r\n    const classes = useStyles();\r\n\r\n    const onLoginInput = (e) => {\r\n        if (e.target.id === 'username') setUsername(e.target.value);\r\n        if (e.target.id === 'password') setPassword(e.target.value);\r\n    }\r\n\r\n    const onSignIn = () => {\r\n        const timestamp = new Date().getTime();\r\n\r\n        if (socket) socket.emit(\"login\", {\r\n            username: username,\r\n            password: crypt.encrypt(publicKey, `${password}@${timestamp}`),\r\n        });\r\n    }\r\n\r\n    const handleRefresh = () => {\r\n        window.location.reload();\r\n    }\r\n\r\n    const { enqueueSnackbar, closeSnackbar } = useSnackbar();\r\n\r\n    const action = key => (\r\n        <React.Fragment>\r\n            <Button\r\n                style={{\r\n                    color: '#bbbbbb',\r\n                }}\r\n                onClick={() => { closeSnackbar(key) }}>\r\n                Dismiss\r\n            </Button>\r\n        </React.Fragment>\r\n    );\r\n\r\n    const handleForgotPassword = () => {\r\n        if (socket) socket.emit(\"reset-password\");\r\n        enqueueSnackbar('See your Telegram bot to reset password', {\r\n            variant: 'success',\r\n            autoHideDuration: 8000,\r\n            action,\r\n        });\r\n    }\r\n\r\n    return (<ThemeProvider theme={theme}>\r\n        <React.Fragment>\r\n            <div className={classes.root}>\r\n                <CssBaseline />\r\n                <AppBar position=\"fixed\" className={classes.appBar}>\r\n                    <Toolbar>\r\n                        <img src=\"/logo192.png\" alt=\"Balance Bot Logo\" className={classes.logo} />\r\n                        <Grid container direction=\"row\" alignItems=\"center\" nowrap=\"true\">\r\n                            <Grid item xs zeroMinWidth>\r\n                                <Box mt={1.5}>\r\n                                    <Typography variant=\"h6\" color=\"inherit\" noWrap>\r\n                                        Balance Bot\r\n                                    </Typography>\r\n                                </Box>\r\n                                <Box mt={-1} style={{ color: '#959FD6' }}>\r\n                                    <Typography variant=\"caption\" color=\"inherit\" noWrap>\r\n                                        v{version}\r\n                                    </Typography>\r\n                                </Box>\r\n                            </Grid>\r\n                        </Grid>\r\n                    </Toolbar>\r\n                </AppBar>\r\n                <main className={classes.content}>\r\n                    <Toolbar />\r\n                </main>\r\n            </div>\r\n            {/* </BrowserRouter> */}\r\n        </React.Fragment>\r\n        {status === 'disconnected' && accessMsg !== 'initial state' ? (\r\n            <Dialog\r\n                open={serverDown}\r\n                fullWidth = {true}\r\n                maxWidth = {'sm'}\r\n                    >\r\n                <DialogContent>\r\n                    <DialogContentText>\r\n                        <Typography variant=\"overline\" color=\"secondary\">\r\n                            The connection with the server has been lost\r\n                        </Typography>\r\n                    </DialogContentText>\r\n                    <DialogContentText>\r\n                        <Typography variant=\"overline\" color=\"textPrimary\">\r\n                            Balance Bot may have stopped running\r\n                        </Typography>\r\n                    </DialogContentText>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button variant=\"contained\" onClick={handleRefresh} color=\"secondary\">\r\n                        Retry\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n            ) : !loginNow ? (accessMsg === 'initial state') ? (\r\n            <Dialog\r\n                open={serverDown}\r\n                fullWidth={true}\r\n                maxWidth={'sm'}\r\n            >\r\n                <DialogContent>\r\n                    <DialogContentText>\r\n                        <Typography variant=\"overline\" color=\"secondary\">\r\n                            Balance Bot seems to be down\r\n                        </Typography>\r\n                    </DialogContentText>\r\n                    <DialogContentText>\r\n                        <Typography variant=\"overline\" color=\"textPrimary\">\r\n                            Please check your server and try again\r\n                        </Typography>\r\n                    </DialogContentText>\r\n                </DialogContent >\r\n                <DialogActions>\r\n                    <Button variant=\"contained\" onClick={handleRefresh} color=\"secondary\">\r\n                        Retry\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog >\r\n            ) : !access.allow && (\r\n            <Dialog\r\n                open={true}\r\n                fullWidth={true}\r\n                maxWidth={'sm'}\r\n            >\r\n                <DialogContent>\r\n                    <DialogContentText>\r\n                        <Typography variant=\"overline\" color=\"secondary\">\r\n                            Notification\r\n                        </Typography>\r\n                    </DialogContentText >\r\n                    <DialogContentText>\r\n                        <Typography variant=\"overline\" color=\"textPrimary\">\r\n                            {accessMsg}\r\n                        </Typography>\r\n                    </DialogContentText>\r\n                </DialogContent >\r\n                <DialogActions>\r\n                    <Button variant=\"contained\" onClick={handleRefresh} color=\"secondary\">\r\n                        Back\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog >\r\n        ) : (\r\n            <React.Fragment>\r\n                <CssBaseline />\r\n                <Dialog\r\n                    open={true}\r\n                    fullWidth={true}\r\n                    maxWidth={'sm'}\r\n                >\r\n                    <DialogTitle>{accessMsg}</DialogTitle>\r\n                    <DialogContent>\r\n                        {!usernameProvided && (\r\n                                <TextField\r\n                                variant=\"outlined\"\r\n                                margin=\"normal\"\r\n                                required\r\n                                fullWidth\r\n                                id=\"username\"\r\n                                label=\"Username\"\r\n                                name=\"username\"\r\n                                onChange={onLoginInput}\r\n                            />\r\n                        )}\r\n                        <TextField\r\n                            variant=\"outlined\"\r\n                            margin=\"normal\"\r\n                            required\r\n                            fullWidth\r\n                            name=\"password\"\r\n                            label=\"Password\"\r\n                            type=\"password\"\r\n                            id=\"password\"\r\n                            onChange={onLoginInput}\r\n                        />\r\n                        <Box m={3} />\r\n                        <Button\r\n                            fullWidth\r\n                            variant=\"contained\"\r\n                            color=\"secondary\"\r\n                            onClick={onSignIn}\r\n                        >\r\n                            Log In\r\n                        </Button>\r\n                        <Box m={3} />\r\n                        <Button fullWidth onClick={handleForgotPassword} color=\"default\" style={{ fontSize: '10px' }}>\r\n                            Forgot password\r\n                        </Button>\r\n                    </DialogContent>\r\n                </Dialog>\r\n            </React.Fragment>\r\n        )\r\n        }\r\n        <div className={classes.bottomPush}>\r\n            <footer className={classes.footer}>\r\n                <Grid container alignItems=\"center\">\r\n                    <Grid item xs={false} sm={12} md={12}>\r\n                        <Copyright />\r\n                    </Grid>\r\n                </Grid>\r\n            </footer>\r\n        </div>\r\n    </ThemeProvider >\r\n    )\r\n}\r\n","import React, { useContext, useState, useEffect } from 'react';\r\nimport BotManager from './BotManager';\r\nimport Public from './Public';\r\nimport { ServerContext } from '../context/ServerContext';\r\n\r\nfunction Switch() {\r\n    const { status, access } = useContext(ServerContext)[0];\r\n    const [goPublic, setGoPublic] = useState(true);\r\n\r\n    useEffect(() => {\r\n        setGoPublic(!access.allow || status === 'disconnected');\r\n\r\n        return () => {\r\n        }\r\n    }, [access, status]);\r\n\r\n    return (\r\n        <div>\r\n            {goPublic ? (\r\n                <Public />\r\n            ) : (\r\n                <BotManager />\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Switch;","import { useEffect, useContext } from \"react\";\r\nimport { socket } from '../context/SocketContext';\r\nimport { ServerContext } from '../context/ServerContext';\r\nimport { MessageContext } from '../context/MessageContext';\r\nimport { ConfigurationContext } from '../context/ConfigurationContext';\r\nimport { BotsContext } from '../context/BotsContext';\r\nimport { useLocalStore } from \"../services/LocalStoreService\";\r\nimport { v4 as uuidv4 } from 'uuid';\r\nimport pckg2 from '../version2.json';\r\n\r\nexport default function SocketService() {\r\n    const version = pckg2.version;\r\n\r\n    const [{ status, serverversion, publicKey }, setServer] = useContext(ServerContext);\r\n    const setMessages = useContext(MessageContext)[1];\r\n    const setConfiguration = useContext(ConfigurationContext)[1];\r\n    const setBots = useContext(BotsContext)[1];\r\n    const [pubKey, setPubKey] = useLocalStore('publicKey', '');\r\n    const [uuid, setUuid] = useLocalStore('uuid', '');\r\n\r\n    useEffect(() => {\r\n        if (pubKey !== undefined && publicKey && publicKey.includes('-----BEGIN PUBLIC KEY-----')) {\r\n            if (publicKey !== pubKey) {\r\n                setPubKey(publicKey);\r\n                // This may happen because of a clean BB reinstall, which generates a new public key\r\n                // Or when running on a new client, or when local storage is cleared by the user\r\n                // Reload client, so the UUID gets encrypted with the new public key when establishing the websocket connection\r\n                // Do so after short delay, to make sure the public key gets stored\r\n                setTimeout(() => {\r\n                    window.location.reload();\r\n                }, 500);\r\n            } else {\r\n                // Reload page on server startup if new BB version has been installed, to make sure server and client are in sync\r\n                if (status === 'starting' && serverversion !== '0.0' && version !== serverversion) window.location.reload();\r\n                else if (status === 'starting')\r\n                    setServer(prevState => {\r\n                        return {\r\n                            ...prevState,\r\n                            status: 'connected'\r\n                        }\r\n                    });\r\n            }\r\n        }\r\n\r\n        return () => {\r\n        }\r\n    }, [publicKey, pubKey, status, serverversion]);\r\n\r\n    useEffect(() => {\r\n        if (uuid === '') {\r\n            setUuid(uuidv4());\r\n            // Reload after short delay, to make sure the UUID gets stored\r\n            setTimeout(() => {\r\n                window.location.reload();\r\n            }, 500);\r\n        }\r\n\r\n        return () => {\r\n        }\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        socket.on(\"status\", (server) => {\r\n            setServer(prevState => {\r\n                return {\r\n                    ...prevState,\r\n                    ...server\r\n                }\r\n            });\r\n        });\r\n        socket.on(\"message\", (msg) => {\r\n            setMessages(msg);\r\n        });\r\n        socket.on(\"settings\", (config) => {\r\n            if (config.restored && config.restored.password) config.bbPassword = '';\r\n            if (config.restored && config.restored.telegram) config.telegramToken = ''; \r\n            setConfiguration(config);\r\n        });\r\n        socket.on(\"bots\", (config) => {\r\n            setBots(config);\r\n        });\r\n        socket.on(\"disconnect\", data => {\r\n            setServer(prevState => {\r\n                return {\r\n                    ...prevState,\r\n                    status: 'disconnected',\r\n                }\r\n            });\r\n        });\r\n\r\n        return () => {\r\n            socket.disconnect();\r\n        }\r\n    }, []);\r\n\r\n    return (null);\r\n}","import './App.css';\nimport Switch from './components/Switch';\nimport SocketService from './services/SocketService';\nimport { ServerProvider } from './context/ServerContext';\nimport { MessageProvider } from './context/MessageContext';\nimport { ConfigurationProvider } from './context/ConfigurationContext';\nimport { BotsProvider } from './context/BotsContext';\nimport { CssBaseline } from \"@material-ui/core\";\nimport { SnackbarProvider } from 'notistack';\n\nfunction App() {\n  return (\n    <SnackbarProvider maxSnack={5}>\n      <ServerProvider>\n        <MessageProvider>\n          <ConfigurationProvider>\n            <BotsProvider>\n              <SocketService />\n              <CssBaseline />\n              <Switch />\n            </BotsProvider>\n          </ConfigurationProvider>\n        </MessageProvider>\n      </ServerProvider>\n    </SnackbarProvider>\n    );\n}\n\nexport default App;","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}