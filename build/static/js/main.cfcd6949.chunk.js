(this["webpackJsonpbb-dashboard"]=this["webpackJsonpbb-dashboard"]||[]).push([[0],{165:function(e){e.exports=JSON.parse('{"version":"2.6.27"}')},352:function(e,t){},564:function(e,t,n){},565:function(e,t,n){},695:function(e,t,n){},730:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),i=n(34),r=n.n(i),o=(n(564),n(565),n(6)),s=n(39),l=n(117),d=n(18),j=n(415),b=n(12),u=n(158),h=n(841),x=n(100),O=n(845),f=n(842),p=n(815),m=n(758),g=n(132),v=n(844),y=n(827),w=n(760),k=n(762),C=n(843),S=n(49),F=n(218),N=n(838),P=n(754),I=n(170),E=n(847),D=n(851),B=n(520),T=n(749),M=n(856),U=n(753),R=n(169),W=n(312),A=n(395),q=n(503),L=n.n(q),z=n(501),G=n.n(z),H=n(220),_=n(502),Y=n.n(_),K=function(e,t){var n=c.a.useState(localStorage.getItem(e)||t),a=Object(o.a)(n,2),i=a[0],r=a[1];return c.a.useEffect((function(){localStorage.setItem(e,i)}),[i]),[i,r]},X=n(1),J=Object(a.createContext)(),V=function(e){var t=Object(a.useState)("USD"),n=Object(o.a)(t,2),c=n[0],i=n[1];return Object(X.jsx)(J.Provider,{value:[c,i],children:e.children})},$=Object(a.createContext)(),Q=function(e){var t=Object(a.useState)({}),n=Object(o.a)(t,2),c=n[0],i=n[1];return Object(X.jsx)($.Provider,{value:[c,i],children:e.children})},Z=Object(a.createContext)(),ee=function(e){var t=Object(a.useState)({status:"disconnected",updated:"---",serverversion:"0.0",environment:"production",servertime:"---",access:{allow:!1,reason:"initial state",token:null},serverip:"0.0.0.0",publicKey:"",userid:null}),n=Object(o.a)(t,2),c=n[0],i=n[1];return Object(X.jsx)(Z.Provider,{value:[c,i],children:e.children})},te=Object(a.createContext)(),ne=function(e){var t=Object(a.useState)([]),n=Object(o.a)(t,2),c=n[0],i=n[1];return Object(X.jsx)(te.Provider,{value:[c,i],children:e.children})},ae=Object(a.createContext)(),ce=function(e){var t=Object(a.useState)([]),n=Object(o.a)(t,2),c=n[0],i=n[1];return Object(X.jsx)(ae.Provider,{value:[c,i],children:e.children})},ie=n(491),re=n.n(ie),oe=n(493),se=n.n(oe),le=n(492),de=n.n(le),je=n(494),be=n.n(je),ue=n(495),he=n.n(ue),xe=n(496),Oe=n.n(xe),fe=n(20),pe=n(8),me=n(5),ge=n(23),ve=n(818),ye=n(819),we=n(814),ke=n(817),Ce=n(812),Se=n(813),Fe=n(855),Ne=n(524),Pe=n(473),Ie=n.n(Pe),Ee=n(41),De=n(816),Be=Object(j.a)((function(e){return{headcolor:"light"===e.palette.type?{backgroundColor:"#aaaaaa"}:{backgroundColor:"#777777"}}}));function Te(e){var t,n=e.headCells,a=e.onSelectAllClick,c=e.onSort,i=e.numSelected,r=e.rowCount,o=e.headless,s=Be();return t=o?null:Object(X.jsx)(Ne.a,{indeterminate:i>0&&i<r,checked:r>0&&i===r,onChange:a,inputProps:{"aria-label":"select coins"}}),Object(X.jsx)(Ce.a,{children:Object(X.jsxs)(Se.a,{className:s.headcolor,children:[Object(X.jsx)(we.a,{padding:"checkbox",children:t}),n.map((function(e){return Object(X.jsx)(we.a,{align:e.align,padding:e.disablePadding?"none":"default",style:{minWidth:e.width},children:Object(X.jsx)(Fe.a,{active:e.active,direction:e.order,onClick:function(){c(e.id)},children:e.label})},e.id)}))]})})}var Me=Object(j.a)((function(e){return{root:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1)},highlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(ge.j)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},title:{flex:"1 1 100%"}}})),Ue=function(e){var t=Me(),n=e.selected,a=e.headless,c=e.ordertype,i=e.portfolio,r=e.handleOrder,o=e.setSelected,s=e.basecoin,l=n.length;var d=c?a?"Running in automatic mode | ".concat(c," orders"):"Select coins to manually submit order | ".concat(c," orders"):"";return Object(X.jsxs)(p.a,{className:Object(me.a)(t.root,Object(pe.a)({},t.highlight,l>0)),children:[l>0?Object(X.jsxs)(g.a,{className:t.title,color:"inherit",variant:"subtitle1",component:"div",children:[l," ",1===l?"coin":"coins"," selected: ",n.join(", ")]}):Object(X.jsx)(g.a,{className:t.title,variant:"subtitle1",id:"tableTitle",component:"div",children:d}),l>0&&Object(X.jsx)(R.a,{variant:"contained",color:"secondary",style:{width:"220px"},startIcon:Object(X.jsx)(Ie.a,{}),onClick:function(){o([]);for(var e=[],t=function(t){var a=i.find((function(e){return e.coin===n[t]}));a.coin!==s&&e.push(a)},a=0;a<n.length;a++)t(a);r(e)},children:"Submit Order"})]})},Re=Object(j.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750,"& .MuiTableCell-sizeSmall":{paddingTop:"9px",paddingBottom:"9px"}},tableRow:{height:50},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}}));function We(e,t){var n;if((""+e).includes("e")){var a=(""+e).split("e"),c="";+a[1]+t>0&&(c="+"),n=+(Math.round(+a[0]+"e"+c+(+a[1]+t))+"e-"+t)}else n=+(Math.round(e+"e+"+t)+"e-"+t);return Number(n).toFixed(t)}function Ae(e){var t=Re(),n=Object(a.useState)([]),c=Object(o.a)(n,2),i=c[0],r=c[1],s=Object(Ee.a)(),l=e.balances,j=l.threshold,b=Object(a.useContext)($)[0],u=b.headless||!1,h=e.onOrder,x=e.onUpdate,O=Object(a.useState)([{id:"coin",align:"left",width:"60px",disablePadding:!0,label:"Coin",active:!1,order:"asc"},{id:"number",align:"right",width:"100px",disablePadding:!1,label:"Amount",active:!1,order:"asc"},{id:"last",align:"right",width:"110px",disablePadding:!1,label:"Price",active:!1,order:"asc"},{id:"value",align:"right",width:"110px",disablePadding:!1,label:"Value",active:!1,order:"asc"},{id:"distribution",align:"right",width:"80px",disablePadding:!1,label:"Distr",active:!1,order:"asc"},{id:"target",align:"right",width:"80px",disablePadding:!1,label:"Target",active:!1,order:"asc"},{id:"delta",align:"right",width:"80px",disablePadding:!1,label:"Delta",active:!1,order:"asc"},{id:"trade",align:"center",width:"100px",disablePadding:!1,label:"Trade",active:!1,order:"asc"},{id:"side",align:"center",width:"100px",disablePadding:!1,label:"Order",active:!1,order:"asc"}]),f=Object(o.a)(O,2),m=f[0],v=f[1],y=Object(a.useState)([]),w=Object(o.a)(y,2),k=w[0],C=w[1],S=window.location.pathname.match(/bot[0-9]{3}/)[0],F={botID:S,sortby:"delta",sortorder:"asc"},N=K("sortprefs",JSON.stringify([F])),P=Object(o.a)(N,2),D=P[0],B=P[1],T=Object(a.useState)(JSON.parse(D)),U=Object(o.a)(T,2),R=U[0],W=U[1];R||window.location.reload();var A=R.find((function(e){return e.botID===S}));if(!A){var q=R;q.push(F),W(q),B(JSON.stringify(q)),A=F}var L=Object(a.useRef)(A.sortby),z=Object(a.useRef)(A.sortorder);Object(a.useEffect)((function(){return window.addEventListener("storage",(function(e){"sortprefs"===e.key&&function(e){W(JSON.parse(e))}(e.newValue)})),function(){}}),[]),Object(a.useEffect)((function(){var e=Object(d.a)(m),t=e.find((function(e){return e.id===L.current}));return t.order=z.current,t.active=!0,v(e),function(){}}),[L.current,z.current]),Object(a.useEffect)((function(){return G(),function(){}}),[l]),Object(a.useEffect)((function(){return u&&r([]),function(){}}),[u]);var G=function(){var e=l.portfolio?JSON.parse(l.portfolio):[];"asc"===z.current?e.sort((function(e,t){return e[L.current]<t[L.current]?1:t[L.current]<e[L.current]?-1:0})):e.sort((function(e,t){return e[L.current]>t[L.current]?1:t[L.current]>e[L.current]?-1:0})),C(e),x(e)},H=!1;return Object(X.jsx)("div",{className:t.root,children:Object(X.jsxs)(I.a,{className:t.paper,children:[Object(X.jsx)(Ue,{selected:i,headless:u,ordertype:b.ordertype,portfolio:k,handleOrder:h,setSelected:r,basecoin:b.basecoin||""}),0===k.length?Object(X.jsxs)(E.a,{pt:2,pl:2,pr:2,pb:4,children:[Object(X.jsx)(De.a,{animation:"wave"}),Object(X.jsx)(De.a,{animation:"wave"}),Object(X.jsx)(De.a,{animation:"wave"}),Object(X.jsx)(De.a,{animation:"wave"}),Object(X.jsx)(De.a,{animation:"wave"})]}):Object(X.jsx)(ke.a,{children:Object(X.jsxs)(ve.a,{className:t.table,size:"small",children:[Object(X.jsx)(Te,{classes:t,headCells:m,numSelected:i.length,onSelectAllClick:function(e){if(0!==i.length)r([]);else{var t=k.map((function(e){return e.coin})).filter((function(e){return e!==b.basecoin}));r(t)}},onSort:function(e){var t=Object(d.a)(m),n=t.find((function(e){return e.id===L.current}));n.active=!1;var a=t.find((function(t){return t.id===e}));a.order="desc"===a.order?"asc":"desc",a.active=!0,v(t),z.current=a.order,L.current=e,function(e){var t=R,n=t.findIndex((function(e){return e.botID===S}));t[n]=e,W(t),B(JSON.stringify(t))}({botID:S,sortby:L.current,sortorder:z.current}),G()},rowCount:k.length,headless:u}),Object(X.jsx)(ye.a,{children:k.map((function(e,n){var a,c,o=(a=e.coin,-1!==i.indexOf(a)),l="enhanced-table-checkbox-".concat(n),d=Object(X.jsx)("div",{style:{color:"#999999",width:"120px"},children:"-"}),h=We(e.trade,8),x=Object(X.jsx)(M.a,{label:h,style:{backgroundColor:s.palette.text.disabled,color:"white",width:"120px"}}),O="none"===e.orderstatus?e.side:e.orderstatus;e.reverse&&"none"===e.orderstatus&&(O+=" (reverse)"),"sell"===e.side?e.distribution/e.target-1>=j/100?(d=Object(X.jsx)(M.a,{label:O,style:{backgroundColor:s.palette.error.dark,color:"white",width:"120px"}}),e.valid||(x=Object(X.jsx)(M.a,{label:h,style:{backgroundColor:s.palette.warning.dark,color:"white",width:"120px"}}),H=!0)):d=Object(X.jsx)(M.a,{label:O,style:{backgroundColor:s.palette.text.disabled,color:"white",width:"120px"}}):"buy"===e.side&&(e.distribution/e.target-1<=-j/100?(d=Object(X.jsx)(M.a,{label:O,style:{backgroundColor:s.palette.success.dark,color:"white",width:"120px"}}),e.valid||(x=Object(X.jsx)(M.a,{label:h,style:{backgroundColor:s.palette.warning.dark,color:"white",width:"120px"}}),H=!0)):d=Object(X.jsx)(M.a,{label:O,style:{backgroundColor:s.palette.text.disabled,color:"white",width:"120px"}})),(O.includes("open")||O.includes("filled")||O.includes("canceled"))&&(d=Object(X.jsx)(M.a,{label:O,style:{backgroundColor:s.palette.info.main,color:"white",width:"120px"}})),c=u||e.coin===b.basecoin?null:Object(X.jsx)(Ne.a,{checked:o,inputProps:{"aria-labelledby":l}});var f=["EUR","USD","BUSD","TUSD","USDT","USDC","USDP"].includes(b.basecoin)?2:8;return Object(X.jsxs)(Se.a,{className:t.tableRow,hover:!0,onClick:function(t){return function(e,t){if(!u&&t!==b.basecoin){var n=i.indexOf(t),a=[];-1===n?a=a.concat(i,t):0===n?a=a.concat(i.slice(1)):n===i.length-1?a=a.concat(i.slice(0,-1)):n>0&&(a=a.concat(i.slice(0,n),i.slice(n+1))),r(a)}}(0,e.coin)},role:"checkbox","aria-checked":o,tabIndex:-1,selected:o,children:[Object(X.jsx)(we.a,{padding:"checkbox",children:c}),Object(X.jsx)(we.a,{component:"th",id:l,scope:"row",padding:"none",children:e.coin}),Object(X.jsx)(we.a,{align:"right",children:We(e.number,8)}),Object(X.jsx)(we.a,{align:"right",children:We(e.last,f)}),Object(X.jsx)(we.a,{align:"right",children:We(e.value,f)}),Object(X.jsxs)(we.a,{align:"right",children:[We(e.distribution,2),"%"]}),Object(X.jsxs)(we.a,{align:"right",children:[We(e.target,2),"%"]}),Object(X.jsxs)(we.a,{align:"right",children:[We(100*e.delta,2),"%"]}),Object(X.jsx)(we.a,{align:"right",children:x}),Object(X.jsx)(we.a,{align:"center",children:d})]},e.coin)}))})]})}),H&&Object(X.jsx)(p.a,{children:Object(X.jsx)(g.a,{className:t.title,variant:"subtitle1",style:{color:s.palette.warning.dark},component:"div",children:"Trade amounts indicated in orange are too small to execute or exceed your available funds (when using a coin offset)"})})]})})}var qe=n(508);function Le(e){var t=Object(Ee.a)().palette.type,n=e.portfolio||[],c=Object(a.useContext)($)[0],i=n.map((function(e){return{id:e.coin,label:e.coin,value:e.distribution}}));return Object(X.jsx)(qe.a,{theme:{tooltip:{color:"light"===t?"#000000":"#FFFFFF",container:{background:"light"===t?"#FFFFFF":"#000000"}}},data:i,margin:{top:20,right:80,bottom:20,left:80},innerRadius:.5,padAngle:1,cornerRadius:7,colors:{scheme:c&&c.colorscheme?c.colorscheme:"red_yellow_blue"},borderWidth:1,borderColor:{from:"color",modifiers:[["darker","0.2"]]},radialLabelsSkipAngle:10,radialLabelsTextColor:"light"===t?"#000000":"#FFFFFF",radialLabelsLinkColor:{from:"color"},arcLinkLabelsSkipAngle:10,arcLinkLabelsTextColor:"light"===t?"#000000":"#FFFFFF"})}var ze=n(507),Ge=n(243),He=n.n(Ge);function _e(e,t){var n=He.a.pki.publicKeyFromPem(e).encrypt(t,"RSA-OAEP",{md:He.a.md.sha256.create(),mgf1:{md:He.a.md.sha256.create()}});return He.a.util.encode64(n)}var Ye,Ke=localStorage.getItem("uuid"),Xe=localStorage.getItem("publicKey"),Je=Object(ze.a)("/",{auth:{encryptedUuid:(Ye=new Date,!!(Ke&&Xe&&Xe.includes("-----BEGIN PUBLIC KEY-----"))&&_e(Xe,"".concat(Ke,"@").concat(Ye.getTime())))}}),Ve=Object(a.createContext)(),$e=function(e){var t=Object(a.useState)({}),n=Object(o.a)(t,2),c=n[0],i=n[1];return Object(X.jsx)(Ve.Provider,{value:[c,i],children:e.children})},Qe=Object(a.createContext)(),Ze=function(e){var t=Object(a.useState)([]),n=Object(o.a)(t,2),c=n[0],i=n[1];return Object(X.jsx)(Qe.Provider,{value:[c,i],children:e.children})},et=Object(j.a)((function(e){return{root:{flexGrow:1},paper:{padding:e.spacing(2),height:"68px",minWidth:"340px"}}}));function tt(){var e,t=et(),n=Object(Ee.a)(),c=Object(a.useContext)(Z)[0],i=c.status,r=c.updated;return e="connected"===i?Object(X.jsx)(M.a,{label:i,style:{backgroundColor:n.palette.success.dark,color:"white",width:"90px"}}):Object(X.jsx)(M.a,{label:i,style:{backgroundColor:n.palette.error.dark,color:"white",width:"110px"}}),Object(X.jsx)(I.a,{className:t.paper,children:Object(X.jsxs)(y.a,{container:!0,alignItems:"center",children:[Object(X.jsxs)(y.a,{container:!0,item:!0,alignItems:"center",xs:7,children:[Object(X.jsx)(y.a,{item:!0,xs:4,children:Object(X.jsx)(g.a,{children:"Status: "})}),Object(X.jsx)(y.a,{item:!0,xs:8,children:e})]}),Object(X.jsx)(y.a,{container:!0,item:!0,alignItems:"center",xs:5,children:Object(X.jsx)(y.a,{item:!0,xs:12,children:Object(X.jsxs)(g.a,{children:["Updated: ",Object(X.jsx)("b",{children:r&&r.split(" ")[1]})]})})})]})})}var nt=n(829),at=n(830),ct=n(854),it=n(482),rt=n.n(it),ot=n(481),st=n.n(ot),lt=n(748),dt=n(828),jt=Object(j.a)((function(e){return{root:{flexGrow:1},paper:{padding:e.spacing(0),height:"68px",minWidth:"340px"},stepper:{padding:e.spacing(1)}}}));function bt(e){var t=jt(),n=Object(a.useContext)($)[0],c="--",i="----/--/--";if(0!==(e.data||[]).length){var r=new Date(n.startdate),o=function(){var e=new Date,t=e;return n.timeshift&&0!==n.timeshift&&(t=Object(dt.a)(e,{hours:n.timeshift})),t}().getTime()-r.getTime();c=Math.round(o/864e5),i=r.getFullYear()+"/"+(r.getMonth()+1).toString().padStart(2,"0")+"/"+r.getDate().toString().padStart(2,"0")}return Object(X.jsx)(I.a,{className:t.paper,children:Object(X.jsxs)(y.a,{container:!0,alignItems:"center",children:[Object(X.jsx)(y.a,{item:!0,xs:3,children:Object(X.jsx)(g.a,{align:"right",children:i})}),Object(X.jsx)(y.a,{item:!0,xs:6,children:Object(X.jsxs)(nt.a,{className:t.stepper,alternativeLabel:!0,activeStep:1,connector:Object(X.jsx)(ut,{}),children:[Object(X.jsx)(at.a,{children:Object(X.jsx)(ct.a,{StepIconComponent:xt})},0),Object(X.jsx)(at.a,{children:Object(X.jsx)(ct.a,{StepIconComponent:xt})},1)]})}),Object(X.jsx)(y.a,{item:!0,xs:3,children:Object(X.jsxs)(g.a,{children:[Object(X.jsx)("b",{children:c})," ",1===c?"day":"days"]})})]})})}var ut=Object(b.a)({alternativeLabel:{top:22},active:{"& $line":{backgroundImage:"linear-gradient( 95deg,rgb(242,113,33) 0%,rgb(233,64,87) 50%,rgb(138,35,135) 100%)"}},completed:{"& $line":{backgroundImage:"linear-gradient( 95deg,rgb(242,113,33) 0%,rgb(233,64,87) 50%,rgb(138,35,135) 100%)"}},line:{height:3,border:0,backgroundColor:"#eaeaf0",borderRadius:1}})(lt.a),ht=Object(j.a)({root:{backgroundColor:"#ccc",zIndex:1,color:"#fff",width:50,height:50,display:"flex",borderRadius:"50%",justifyContent:"center",alignItems:"center"},active:{backgroundImage:"linear-gradient( 136deg, rgb(242,113,33) 0%, rgb(233,64,87) 50%, rgb(138,35,135) 100%)",boxShadow:"0 4px 10px 0 rgba(0,0,0,.25)"},completed:{backgroundImage:"linear-gradient( 136deg, rgb(242,113,33) 0%, rgb(233,64,87) 50%, rgb(138,35,135) 100%)"}});function xt(e){var t,n=ht(),a=e.active,c=e.completed,i={1:Object(X.jsx)(st.a,{}),2:Object(X.jsx)(rt.a,{})};return Object(X.jsx)("div",{className:Object(me.a)(n.root,(t={},Object(pe.a)(t,n.active,a),Object(pe.a)(t,n.completed,c),t)),children:i[String(e.icon)]})}var Ot=Object(a.createContext)(),ft=function(e){var t=Object(a.useState)([]),n=Object(o.a)(t,2),c=n[0],i=n[1];return Object(X.jsx)(Ot.Provider,{value:[c,i],children:e.children})};function pt(e){var t=Object(a.useContext)(Ot)[0],n=Object(a.useContext)(Qe)[0],c=Object(a.useContext)($)[0],i=Object(a.useState)({value:"0",change:"0"}),r=Object(o.a)(i,2),s=r[0],l=r[1],d=Object(a.useState)(!1),j=Object(o.a)(d,2),b=j[0],u=j[1],h=e.balances,x=e.type,O=Object(a.useContext)(J)[0],f=c.basecoin,p="basecoin"===x?f:"fiat"===x||"net-fiat"===x?O:"Net ".concat(f),m="net-basecoin"===x?"Net effect (".concat(f,")"):"net-fiat"===x?"Net effect (".concat(p,")"):"".concat(p," value"),v="net-basecoin"===x||"net-fiat"===x?"Net effect (%)":"".concat(p," change"),w=["USD","BUSD","TUSD","USDT","USDC","USDP"];return Object(a.useEffect)((function(){u(0!==t.length);var e,a=h.portfolio?JSON.parse(h.portfolio):[],c=0;if(a.forEach((function(e){c+=e.number*e.last})),"fiat"!==x&&"net-fiat"!==x||("BTC"===f||"ETH"===f||"PAXG"===f?c*="EUR"===O?h.eur:h.usd:w.includes(f)?c*="EUR"===O?h.eur/h.usd:1:"EUR"===f&&(c*="EUR"===O?1:h.usd/h.eur)),0!==c){e="basecoin"===x?100*(c/t.basecoin-1):"EUR"===O?100*(c/t.eur-1):100*(c/t.usd-1);var i=0;t.coins&&a.forEach((function(e){var n=t.coins.find((function(t){return t.coin===e.coin}));n&&n.coin&&0!==e.number&&(i+=n.number*e.last)}));var r=0;if(0!==n.length)r=n[n.length-1].netoffset;if(i-=r,"net-basecoin"===x&&(e=(c-i)/t.basecoin*100,c-=i),"net-fiat"===x){var o="EUR"===O?t.eur:t.usd;"BTC"===f||"ETH"===f||"PAXG"===f?i="EUR"===O?i*h.eur:i*h.usd:w.includes(f)?i="EUR"===O?i*h.eur/h.usd:i:"EUR"===f&&(i="EUR"===O?i:i*h.usd/h.eur),e=(c-i)/o*100,c-=i}e=e?e<100?e.toFixed(2):e<1e3?e.toFixed(1):e.toFixed(0):Number("0").toFixed(2),c=c?Math.abs(c)<1e-6?c.toFixed(2):Math.abs(c)<.1?c.toFixed(6):Math.abs(c)<1?c.toFixed(5):Math.abs(c)<10?c.toFixed(4):Math.abs(c)<100?c.toFixed(3):(Math.abs(c),c.toFixed(2)):Number("0").toFixed(2)}else e=Number("0").toFixed(2);l({value:c,change:e})}),[h,t,O]),Object(X.jsxs)(y.a,{container:!0,alignItems:"center",children:[Object(X.jsxs)(y.a,{container:!0,item:!0,direction:"column",alignItems:"center",xs:6,children:[Object(X.jsx)(y.a,{item:!0,xs:12,children:Object(X.jsx)(g.a,{variant:"h4",children:b?s.value:"0.00"})}),Object(X.jsx)(y.a,{item:!0,xs:12,children:Object(X.jsx)(g.a,{children:m})})]}),Object(X.jsxs)(y.a,{container:!0,item:!0,direction:"column",alignItems:"center",xs:6,children:[Object(X.jsx)(y.a,{item:!0,xs:12,children:Object(X.jsxs)(g.a,{variant:"h4",children:[b?s.change:"0.00","%"]})}),Object(X.jsx)(y.a,{item:!0,xs:12,children:Object(X.jsx)(g.a,{children:v})})]})]})}var mt=n(831),gt=n(834),vt=n(832),yt=n(833),wt=Object(j.a)((function(e){return{root:{flexGrow:1},paper:{padding:e.spacing(2)},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}}));function kt(e){return Object(X.jsxs)(E.a,{position:"relative",display:"inline-flex",children:[Object(X.jsx)(T.a,Object(fe.a)({variant:"determinate",size:90},e)),Object(X.jsx)(E.a,{top:0,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",children:Object(X.jsx)(g.a,{variant:"h5",component:"div",color:"textSecondary",children:"".concat(Math.round(e.value),"%")})})]})}var Ct=function(e){var t=wt(),n=Object(a.useContext)(Ve)[0],c=Object(a.useContext)(Qe)[0],i=Object(a.useContext)(Ot)[0],r=Object(a.useContext)(Z)[0].access,s=Object(a.useState)(!1),l=Object(o.a)(s,2),d=l[0],j=l[1],b=Object(a.useState)(null),u=Object(o.a)(b,2),h=u[0],x=u[1],O=Object(a.useState)([]),f=Object(o.a)(O,2),p=f[0],m=f[1],v=Object(a.useState)(!1),w=Object(o.a)(v,2),k=w[0],C=w[1],S=Object(a.useState)(!1),F=Object(o.a)(S,2),N=F[0],P=F[1],T=Object(a.useState)(!1),M=Object(o.a)(T,2),U=M[0],W=M[1],A=Object(a.useState)([]),q=Object(o.a)(A,2),L=q[0],z=q[1];Object(a.useEffect)((function(){return Je.on("coin-loading-progress",(function(e){-1===e.progress?x(0):x(e.progress),m(e.remainingSymbols),C(e.timeout),P(e.cancel),W(e.error)})),function(){}}),[]),Object(a.useEffect)((function(){return Je&&0===i.length&&r.allow&&Je.emit("get-starting-balances",r.token),function(){}}),[]),Object(a.useEffect)((function(){return j(null!==h&&100!==h&&0===Object.keys(n).length),function(){}}),[n,h]);var G=function(){j(!1),Je&&r.allow&&0!==p.length&&Je.emit("show-config",r.token)};return Object(X.jsxs)("div",{className:t.root,children:[Object(X.jsx)(B.a,{className:t.backdrop,open:d,children:U?Object(X.jsxs)(mt.a,{open:d&&U,fullWidth:!0,maxWidth:"sm",children:[Object(X.jsx)(vt.a,{children:Object(X.jsxs)(yt.a,{children:[Object(X.jsx)(g.a,{variant:"overline",color:"secondary",children:"Your API key and/or secret seem to be invalid"}),Object(X.jsx)(g.a,{variant:"body1",color:"inherit",noWrap:!0,children:"To resolve this, update your API settings in the bot configuration"})]})}),Object(X.jsx)(gt.a,{children:Object(X.jsx)(R.a,{variant:"contained",color:"secondary",style:{width:"100px"},onClick:G,children:"OK"})})]}):N?Object(X.jsxs)(mt.a,{open:d&&N,fullWidth:!0,maxWidth:"sm",children:[Object(X.jsxs)(vt.a,{children:[Object(X.jsx)(yt.a,{children:Object(X.jsx)(g.a,{variant:"overline",color:"secondary",children:"Failed to load exchange data"})}),Object(X.jsx)(yt.a,{children:Object(X.jsx)(y.a,{container:!0,direction:"column",children:0===p.length?Object(X.jsx)(X.Fragment,{children:Object(X.jsx)(g.a,{variant:"body1",color:"inherit",noWrap:!0,children:"Market data couldn't be loaded"})}):Object(X.jsxs)(X.Fragment,{children:[Object(X.jsx)(E.a,{p:1}),p.map((function(e){return Object(X.jsx)(g.a,{variant:"overline",color:"inherit",display:"block",noWrap:!0,children:Object(X.jsxs)("b",{children:[">"," ",e]})})})),Object(X.jsx)(E.a,{p:1}),Object(X.jsx)(g.a,{variant:"body1",color:"inherit",noWrap:!0,children:"The exchange may not support the trading pair(s)"}),Object(X.jsx)(g.a,{variant:"body1",color:"inherit",noWrap:!0,children:"To resolve this, exclude the coin(s) in the bot configuration"})]})})})]}),Object(X.jsx)(gt.a,{children:Object(X.jsx)(R.a,{variant:"contained",color:"secondary",style:{width:"100px"},onClick:G,children:"OK"})})]}):Object(X.jsxs)(y.a,{container:!0,spacing:3,direction:"column",alignItems:"center",children:[Object(X.jsx)(y.a,{item:!0,xs:12,children:Object(X.jsx)(g.a,{variant:"h5",noWrap:!0,children:"Loading coin data"})}),Object(X.jsx)(y.a,{item:!0,xs:12,children:Object(X.jsx)(kt,{color:"inherit",variant:"determinate",value:h})}),k?Object(X.jsxs)(y.a,{container:!0,direction:"column",alignItems:"center",children:[Object(X.jsx)(E.a,{p:1}),Object(X.jsx)(g.a,{variant:"body1",noWrap:!0,children:"This seems to be taking quite long"}),Object(X.jsx)(E.a,{p:1}),Object(X.jsx)(R.a,{variant:"contained",color:"primary",style:{width:"120px"},onClick:function(){Je&&r.allow&&Je.emit("cancel-loading",r.token)},children:"Cancel"})]}):Object(X.jsx)(E.a,{height:88})]})}),Object(X.jsxs)(y.a,{container:!0,spacing:3,alignItems:"flex-start",children:[Object(X.jsx)(y.a,{item:!0,xs:12,md:4,lg:6,children:Object(X.jsx)(g.a,{variant:"h3",noWrap:!0,children:"Portfolio"})}),Object(X.jsx)(D.a,{xsDown:!0,children:Object(X.jsx)(y.a,{item:!0,xs:12,sm:6,md:4,lg:3,children:Object(X.jsx)(bt,{data:c})})}),Object(X.jsx)(y.a,{item:!0,xs:12,sm:6,md:4,lg:3,children:Object(X.jsx)(tt,{})}),Object(X.jsx)(y.a,{item:!0,xs:12,sm:6,md:6,lg:3,children:Object(X.jsx)(I.a,{style:{height:"100px",minWidth:"340px"},className:t.paper,children:Object(X.jsx)(pt,{balances:n,type:"basecoin"})})}),Object(X.jsx)(y.a,{item:!0,xs:12,sm:6,md:6,lg:3,children:Object(X.jsx)(I.a,{style:{height:"100px",minWidth:"340px"},className:t.paper,children:Object(X.jsx)(pt,{balances:n,type:"fiat"})})}),Object(X.jsx)(y.a,{item:!0,xs:12,sm:6,md:6,lg:3,children:Object(X.jsx)(I.a,{style:{height:"100px",minWidth:"340px"},className:t.paper,children:Object(X.jsx)(pt,{balances:n,type:"net-basecoin"})})}),Object(X.jsx)(y.a,{item:!0,xs:12,sm:6,md:6,lg:3,children:Object(X.jsx)(I.a,{style:{height:"100px",minWidth:"340px"},className:t.paper,children:Object(X.jsx)(pt,{balances:n,type:"net-fiat"})})}),Object(X.jsxs)(D.a,{xsDown:!0,children:[Object(X.jsx)(y.a,{item:!0,md:12,lg:8,children:Object(X.jsx)(Ae,{balances:n,onOrder:function(e){Je&&r.allow&&Je.emit("place-order",e,r.token)},onUpdate:function(e){z(e)}})}),Object(X.jsx)(y.a,{container:!0,item:!0,md:12,lg:4,children:Object(X.jsx)(y.a,{item:!0,xs:12,children:Object(X.jsx)(I.a,{style:{height:"500px"},className:t.paper,children:Object(X.jsx)(Le,{portfolio:L})})})})]})]})]})},St=n(241),Ft=(n(695),n(850));function Nt(e){var t=Object(Ee.a)().palette.type,n=e.data1,c=e.data2,i=Object(a.useState)(""),r=Object(o.a)(i,2),s=r[0],l=r[1];Object(a.useEffect)((function(){return n&&0!==n.length?l(n[0].id):c&&0!==c.length&&l(c[0].id),function(){}}),[n,c]);var d=!1;c&&c[0].data.length>1&&(d=!0);var j=function(){return{axis:{ticks:{line:{stroke:"light"===t?"#000000":"#FFFFFF"},text:{fill:"light"===t?"#000000":"#FFFFFF"}},legend:{text:{fill:"light"===t?"#000000":"#FFFFFF"}}},crosshair:{line:{stroke:"light"===t?"#000000":"#FFFFFF"}}}},b=function(){return 0!==c.length?{legend:c[0].id,legendOffset:70,legendPosition:"middle"}:null};return Object(X.jsxs)("div",{className:"wrapper",children:[Object(X.jsx)("div",{children:Object(X.jsx)("b",{children:s})}),Object(X.jsx)("div",{className:"secondGraph",children:n&&d?Object(X.jsx)(St.a,{data:n,tooltip:function(e){return Object(X.jsxs)("div",{style:{background:"light"===t?"#FFFFFF":"#000000",boxShadow:"0 3px 6px rgba(0,0,0,0.16), 0 3px 6px rgba(0,0,0,0.23)",padding:"6px 10px 6px 10px"},children:[Object(X.jsxs)("div",{style:{color:"rgb(211,47,47)"},children:["\u2589 ",e.point.serieId,":\xa0"]}),Object(X.jsxs)("div",{style:{color:"light"===t?"#000000":"#FFFFFF"},children:[e.point.data.xFormatted," | ",Object(X.jsx)("strong",{children:e.point.data.yFormatted})]})]})},theme:j(),margin:{top:40,right:90,bottom:50,left:90},xScale:{type:"time",format:"%Y/%m/%d",useUTC:!1,precision:"day"},xFormat:"time:%Y/%m/%d",yScale:{type:"linear",min:"auto",max:"auto",stacked:!1,reverse:!1},yFormat:" >-.6f",curve:"monotoneX",colors:["rgb(255,255,255,0)"],axisTop:null,axisRight:null,axisBottom:null,axisLeft:0!==n.length?{legend:n[0].id,legendOffset:-80,legendPosition:"middle"}:b,enablePoints:!1,enableGridX:!1,enableGridY:!1,useMesh:!0,crosshairType:"cross"}):null}),Object(X.jsx)("div",{className:"graphContainer",children:c&&d?Object(X.jsx)(St.a,{data:c,theme:j(),margin:{top:40,right:90,bottom:50,left:90},xScale:{type:"time",format:"%Y/%m/%d",useUTC:!1,precision:"day"},xFormat:"time:%Y/%m/%d",yScale:{type:"linear",min:"auto",max:"auto",stacked:!1,reverse:!1},yFormat:" >-.6f",curve:"monotoneX",lineWidth:4,colors:["rgb(211,47,47)"],axisTop:null,axisBottom:null,axisRight:b(),axisLeft:null,enablePoints:!1,enableGridX:!1,enableGridY:!1,useMesh:!0,crosshairType:"cross"}):Object(X.jsx)(Ft.a,{severity:"info",children:"Not enough data yet to show graphs - check again later"})})]})}var Pt=Object(j.a)((function(e){return{root:{flexGrow:1},paper:{padding:e.spacing(2)},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}})),It=Object(b.a)({root:{"&:hover":{backgroundColor:"transparent"},"&:click":{backgroundColor:"#f00"},justifyContent:"flex-start"}})(R.a),Et=function(){var e=Pt(),t=Object(a.useContext)(Ve)[0],n=Object(a.useContext)(Qe)[0],i=Object(a.useContext)(Ot)[0],r=Object(a.useContext)(J)[0],s=Object(a.useContext)($)[0],l=Object(a.useState)({}),d=Object(o.a)(l,2),j=d[0],b=d[1],u=Object(a.useState)({}),h=Object(o.a)(u,2),x=h[0],O=h[1],f=Object(a.useContext)(Z)[0].access,p=Object(a.useState)(!0),m=Object(o.a)(p,2),v=m[0],w=m[1],k=Object(a.useState)("normalized"),C=Object(o.a)(k,2),S=C[0],F=C[1],N=["USD","BUSD","TUSD","USDT","USDC","USDP"],E=function(){F("normalized"===S?"absolute":"normalized")};Object(a.useEffect)((function(){return Je&&0===i.length&&f.allow&&Je.emit("get-starting-balances",f.token),function(){}}),[]),Object(a.useEffect)((function(){return w(0===Object.keys(t).length),function(){}}),[t]);var M=[],R=[],W=[],A=[],q=[],L=[],z=[],G=[],H=[],_=[],Y=[],K=[],V={},Q={};Object(a.useEffect)((function(){return te(),function(){}}),[t,n,i,r]);var ee=function(e,t){var n,a=0,c=0;return"BTC"===s.basecoin||"ETH"===s.basecoin||"PAXG"===s.basecoin?n="EUR"===r?e.eur:e.usd:N.includes(s.basecoin)?n="EUR"===r?e.eur/e.usd:1:"EUR"===s.basecoin&&(n="EUR"===r?1:e.usd/e.eur),e.coins.forEach((function(e){a+=e.number*e.price,c+=e.number*e.price*n})),t&&(a+=e.offset,c+=e.offset*n),[a,c]},te=function(){var e=0,t=0,a=0,c=0;0!==i.length&&0!==i.coins.length&&(e=i.basecoin,t="EUR"===r?i.eur:i.usd,0!==n.length&&(n.forEach((function(n,i){var l=ee(n,!1),d=Object(o.a)(l,2),j=d[0],b=d[1],u=ee(n,!0),h=Object(o.a)(u,2),x=h[0],O=h[1];0===i&&(a=x,c=O);var f=0,p=0;n.coins.forEach((function(e){e.initial||(e.initial=0),0!==e.number&&(f+=(e.number-e.initial)*e.price)})),f+=n.netoffset,"BTC"===s.basecoin||"ETH"===s.basecoin||"PAXG"===s.basecoin?p=f*("EUR"===r?n.eur:n.usd):N.includes(s.basecoin)?p=f*("EUR"===r?n.eur/n.usd:1):"EUR"===s.basecoin&&(p=f*("EUR"===r?1:n.usd/n.eur)),M.push({x:n.date,y:j}),W.push({x:n.date,y:100*(j/e-1)}),R.push({x:n.date,y:b}),A.push({x:n.date,y:100*(b/t-1)}),q.push({x:n.date,y:x}),z.push({x:n.date,y:100*(x/a-1)}),L.push({x:n.date,y:O}),G.push({x:n.date,y:100*(O/c-1)}),H.push({x:n.date,y:f}),_.push({x:n.date,y:f/e*100}),Y.push({x:n.date,y:p}),K.push({x:n.date,y:p/t*100})})),V.basecoin=[{id:"Total Value (".concat(s.basecoin,")"),data:M}],Q.basecoin=[{id:"".concat(s.basecoin," Change (%)"),data:W}],V.fiat=[{id:"Total Value (".concat(r,")"),data:R}],Q.fiat=[{id:"".concat(r," Change (%)"),data:A}],V.basecoinnorm=[{id:"Normalized Value (".concat(s.basecoin,")"),data:q}],Q.basecoinnorm=[{id:"Normalized ".concat(s.basecoin," Change (%)"),data:z}],V.fiatnorm=[{id:"Normalized Value (".concat(r,")"),data:L}],Q.fiatnorm=[{id:"Normalized ".concat(r," Change (%)"),data:G}],V.net=[{id:"Net Balancing Effect (".concat(s.basecoin,")"),data:H}],Q.net=[{id:"Net Balancing Effect (%)",data:_}],V.netfiat=[{id:"Net Balancing Effect (".concat(r,")"),data:Y}],Q.netfiat=[{id:"Net Balancing Effect (%)",data:K}],b(V),O(Q)))};return Object(X.jsxs)("div",{className:e.root,children:[Object(X.jsx)(B.a,{className:e.backdrop,open:v,children:Object(X.jsx)(T.a,{color:"inherit"})}),Object(X.jsxs)(y.a,{container:!0,spacing:3,children:[Object(X.jsx)(y.a,{item:!0,xs:12,md:4,lg:6,children:Object(X.jsx)(g.a,{variant:"h3",noWrap:!0,children:"Performance"})}),Object(X.jsx)(D.a,{xsDown:!0,children:Object(X.jsx)(y.a,{item:!0,xs:12,sm:6,md:4,lg:3,children:Object(X.jsx)(bt,{data:n})})}),Object(X.jsx)(y.a,{item:!0,xs:12,sm:6,md:4,lg:3,children:Object(X.jsx)(tt,{})}),Object(X.jsxs)(y.a,{container:!0,children:[Object(X.jsxs)(y.a,{container:!0,item:!0,xs:12,alignItems:"center",justify:"flex-start",style:{maxWidth:"360px"},children:[Object(X.jsx)(y.a,{item:!0,xs:5,children:Object(X.jsx)(U.a,{onChange:E,value:S,control:Object(X.jsx)(P.a,{checked:"normalized"===S,color:"secondary"}),label:Object(X.jsx)(g.a,{variant:"button",children:"Absolute"}),labelPlacement:"start"})}),Object(X.jsx)(y.a,{item:!0,xs:7,children:Object(X.jsx)(It,{disableRipple:!0,onClick:E,children:Object(X.jsx)(g.a,{variant:"button",children:"Normalized"})})})]}),Object(X.jsx)(y.a,{})]}),"absolute"===S?Object(X.jsxs)(c.a.Fragment,{children:[Object(X.jsx)(y.a,{item:!0,xs:12,sm:12,md:6,lg:6,children:Object(X.jsx)(I.a,{style:{height:"360px"},className:e.paper,children:Object(X.jsx)(Nt,{data1:j.basecoin,data2:j.basecoin,type:"basecoin"})})}),Object(X.jsx)(y.a,{item:!0,xs:12,sm:12,md:6,lg:6,children:Object(X.jsx)(I.a,{style:{height:"360px"},className:e.paper,children:Object(X.jsx)(Nt,{data1:j.fiat,data2:j.fiat,type:"fiat"})})})]}):Object(X.jsxs)(c.a.Fragment,{children:[Object(X.jsx)(y.a,{item:!0,xs:12,sm:12,md:6,lg:6,children:Object(X.jsx)(I.a,{style:{height:"360px"},className:e.paper,children:Object(X.jsx)(Nt,{data1:x.basecoinnorm,data2:x.basecoinnorm,type:"basecoin"})})}),Object(X.jsx)(y.a,{item:!0,xs:12,sm:12,md:6,lg:6,children:Object(X.jsx)(I.a,{style:{height:"360px"},className:e.paper,children:Object(X.jsx)(Nt,{data1:x.fiatnorm,data2:x.fiatnorm,type:"fiat"})})})]}),Object(X.jsx)(y.a,{item:!0,xs:12,sm:12,md:6,lg:6,children:Object(X.jsx)(I.a,{style:{height:"360px"},className:e.paper,children:Object(X.jsx)(Nt,{data1:j.net,data2:x.net,type:"net-result"})})}),Object(X.jsx)(y.a,{item:!0,xs:12,sm:12,md:6,lg:6,children:Object(X.jsx)(I.a,{style:{height:"360px"},className:e.paper,children:Object(X.jsx)(Nt,{data1:j.netfiat,data2:x.netfiat,type:"net-result-fiat"})})})]})]})};function Dt(e){var t,n=Object(Ee.a)().palette.type,c=Object(a.useContext)($)[0],i=e.performance,r=e.balances,o=e.graph,s=e.fiat,l=r.portfolio?JSON.parse(r.portfolio):[],d=["USD","BUSD","TUSD","USDT","USDC","USDP"];l.sort((function(e,t){return e.coin<t.coin?1:t.coin<e.coin?-1:0}));var j=[],b=[],u=[];l.forEach((function(e,t){j.push(e.coin),u[t]={coin:e.coin,initial:0,data:[]}})),0!==i.length&&j.forEach((function(e,n){e!==c.basecoin&&(i.forEach((function(a){t="basecoin"===o?1:"BTC"===c.basecoin||"ETH"===c.basecoin||"PAXG"===c.basecoin?"EUR"===s?a.eur:a.usd:d.includes(c.basecoin)?"EUR"===s?a.eur/a.usd:1:"EUR"===s?1:a.usd/a.eur,a.coins.forEach((function(c){c.coin===e&&(0===u[n].initial&&(u[n].initial=c.price*t),u[n].data.push({x:a.date,y:100*(c.price*t/u[n].initial-1)}))}))})),b.push({id:e,data:u[n].data}))}));var h=!1;0!==b.length&&b[0].data.length>1&&(h=!0);return Object(X.jsxs)("div",{className:"wrapper",children:[Object(X.jsx)("div",{children:Object(X.jsx)("b",{children:e.title})}),Object(X.jsx)("div",{className:"graphContainerCoins",children:h?Object(X.jsx)(St.a,{data:b,tooltip:function(e){return Object(X.jsxs)("div",{style:{background:"light"===n?"#FFFFFF":"#000000",boxShadow:"0 3px 6px rgba(0,0,0,0.16), 0 3px 6px rgba(0,0,0,0.23)",padding:"6px 10px 6px 10px"},children:[Object(X.jsxs)("span",{style:{color:e.point.color},children:["\u2589 ",e.point.serieId,":\xa0"]}),Object(X.jsxs)("span",{style:{color:"light"===n?"#000000":"#FFFFFF"},children:[e.point.data.xFormatted," | ",Object(X.jsx)("strong",{children:e.point.data.yFormatted}),"%"]})]})},theme:{axis:{ticks:{line:{stroke:"light"===n?"#000000":"#FFFFFF"},text:{fill:"light"===n?"#000000":"#FFFFFF"}},legend:{text:{fill:"light"===n?"#000000":"#FFFFFF"}}},crosshair:{line:{stroke:"light"===n?"#000000":"#FFFFFF"}},legends:{text:{fill:"light"===n?"#000000":"#FFFFFF"}}},margin:{top:50,right:110,bottom:50,left:80},xScale:{type:"time",format:"%Y/%m/%d",useUTC:!1,precision:"day"},xFormat:"time:%Y/%m/%d",yScale:{type:"linear",min:"auto",max:"auto",stacked:!1,reverse:!1},yFormat:" >-.2f",curve:"monotoneX",lineWidth:4,colors:{scheme:c&&c.colorscheme?c.colorscheme:"red_yellow_blue"},axisTop:null,axisRight:{legend:"",legendOffset:70,legendPosition:"middle"},axisBottom:null,axisLeft:{legend:"Change (%)",legendOffset:-70,legendPosition:"middle"},enablePoints:!1,enableGridX:!1,enableGridY:!1,useMesh:!0,crosshairType:"cross",legends:[{anchor:"bottom-right",direction:"column",justify:!1,translateX:120,translateY:0,itemsSpacing:0,itemDirection:"left-to-right",itemWidth:80,itemHeight:20,itemOpacity:.75,symbolSize:12,symbolShape:"circle",symbolBorderColor:"rgba(0, 0, 0, .5)",itemTextColor:"#ff0000",effects:[{on:"hover",style:{itemBackground:"rgba(0, 0, 0, .03)",itemOpacity:1}}]}]}):Object(X.jsx)(Ft.a,{severity:"info",children:"Not enough data yet to show graphs - check again later"})})]})}var Bt=Object(j.a)((function(e){return{root:{flexGrow:1},paper:{padding:e.spacing(2)},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}})),Tt=Object(b.a)({root:{"&:hover":{backgroundColor:"transparent"},"&:click":{backgroundColor:"#f00"},justifyContent:"flex-start"}})(R.a),Mt=function(){var e=Bt(),t=Object(a.useContext)(Ve)[0],n=Object(a.useContext)(Qe)[0],c=Object(a.useContext)($)[0],i=Object(a.useState)(!0),r=Object(o.a)(i,2),s=r[0],l=r[1],d=Object(a.useState)("basecoin"),j=Object(o.a)(d,2),b=j[0],u=j[1],h=Object(a.useContext)(J)[0],x=function(){u("basecoin"===b?"fiat":"basecoin")};return Object(a.useEffect)((function(){return l(0===Object.keys(t).length),function(){}}),[t]),Object(X.jsxs)("div",{className:e.root,children:[Object(X.jsx)(B.a,{className:e.backdrop,open:s,children:Object(X.jsx)(T.a,{color:"inherit"})}),Object(X.jsxs)(y.a,{container:!0,spacing:3,children:[Object(X.jsx)(y.a,{item:!0,xs:12,md:4,lg:6,children:Object(X.jsx)(g.a,{variant:"h3",noWrap:!0,children:"Coin Analysis"})}),Object(X.jsx)(D.a,{xsDown:!0,children:Object(X.jsx)(y.a,{item:!0,xs:12,sm:6,md:4,lg:3,children:Object(X.jsx)(bt,{data:n})})}),Object(X.jsx)(y.a,{item:!0,xs:12,sm:6,md:4,lg:3,children:Object(X.jsx)(tt,{})}),Object(X.jsxs)(y.a,{container:!0,children:[Object(X.jsxs)(y.a,{container:!0,item:!0,xs:12,alignItems:"center",justify:"flex-start",style:{maxWidth:"360px"},children:[Object(X.jsx)(y.a,{item:!0,xs:5,children:Object(X.jsx)(U.a,{onChange:x,value:b,control:Object(X.jsx)(P.a,{checked:"basecoin"===b,color:"secondary"}),label:Object(X.jsxs)(g.a,{variant:"button",children:["Fiat (",h,")"]}),labelPlacement:"start"})}),Object(X.jsx)(y.a,{item:!0,xs:7,children:Object(X.jsx)(Tt,{disableRipple:!0,onClick:x,children:Object(X.jsxs)(g.a,{variant:"button",children:["Base Coin (",c.basecoin,")"]})})})]}),Object(X.jsx)(y.a,{})]}),Object(X.jsx)(y.a,{item:!0,xs:12,children:Object(X.jsx)(I.a,{style:{height:"700px"},className:e.paper,children:Object(X.jsx)(Dt,{graph:b,fiat:h,performance:n,balances:t,title:"Coin Price Changes vs ".concat("basecoin"===b?c.basecoin:h," (%)")})})})]})]})},Ut=n(392),Rt=n(836),Wt=n(862),At=n(849),qt=n(835),Lt=Object(b.a)((function(e){return{head:{backgroundColor:e.palette.common.black,color:e.palette.common.white},body:{fontSize:14}}}))(we.a),zt=Object(b.a)((function(e){return{root:{"&:nth-of-type(odd)":{backgroundColor:e.palette.action.hover}}}}))(Se.a),Gt=Object(j.a)((function(e){return{root:{"& .MuiTextField-root":{margin:e.spacing(1),width:200}},errortext:{color:e.palette.warning.dark}}}));function Ht(){var e=Gt(),t=Object(a.useContext)(Z)[0].access,n=K("mode","light")[0],c=Object(a.useState)(!1),i=Object(o.a)(c,2),r=i[0],s=i[1],l=Object(a.useState)(1),d=Object(o.a)(l,2),j=d[0],b=d[1],u=Object(a.useState)({rows:[],total:0}),h=Object(o.a)(u,2),x=h[0],O=h[1],f=Object(a.useState)({type:["order","event"],event:"",page:"1"}),p=Object(o.a)(f,2),m=p[0],v=p[1],w=Object(a.useState)({logs:[],total:0}),k=Object(o.a)(w,2),C=k[0],S=k[1];Object(a.useEffect)((function(){return function(e){var t=[];e.logs.reverse().forEach((function(e){"order"!==e.type&&(e.type="event"),t.push({time:e.time,type:e.type,event:e.event})})),O({rows:t,total:e.total})}(C),function(){}}),[C]);Object(a.useEffect)((function(){return Je.on("event-history",(function(e){e.logs.forEach((function(e){"order"!==e.type&&(e.type="event")})),S({logs:e.logs,total:e.total})})),Je.on("event",(function(e){"order"!==e.log.type&&(e.log.type="event"),e.log,e.summary,Je&&t.allow&&Je.emit("get-logs",m,t.token)})),function(){Je.off("event-history"),Je.off("event")}}),[]),Object(a.useEffect)((function(){return Je&&t.allow&&Je.emit("get-logs",m,t.token),function(){}}),[m]);return Object(X.jsxs)(I.a,{pt:2,children:[Object(X.jsxs)(mt.a,{open:r,onClose:function(){return s(!1)},children:[Object(X.jsx)(qt.a,{children:"Confirm Delete"}),Object(X.jsx)(vt.a,{children:Object(X.jsx)(yt.a,{children:Object(X.jsx)(g.a,{color:"textPrimary",children:"Warning: all alerts will be deleted, but all orders will be kept. This change cannot be reverted"})})}),Object(X.jsxs)(gt.a,{children:[Object(X.jsx)(R.a,{variant:"contained",onClick:function(){return s(!1)},color:"light"===n?"primary":"secondary",children:"Cancel"}),Object(X.jsx)(R.a,{variant:"contained",onClick:function(){Je&&t.allow&&Je.emit("delete-alerts",m,t.token),s(!1)},color:"light"===n?"primary":"secondary",children:"Delete Alerts"})]})]}),Object(X.jsxs)(y.a,{container:!0,style:{height:"60px"},alignItems:"center",justify:"space-between",children:[Object(X.jsxs)(y.a,{container:!0,item:!0,xs:8,children:[Object(X.jsx)(E.a,{pl:1,pr:1,pt:3,children:Object(X.jsx)(y.a,{item:!0,xs:5,children:Object(X.jsxs)(Wt.a,{value:m.type,onChange:function(e,t){b(1),v({type:t,event:m.event,page:1})},"aria-label":"type selection",children:[Object(X.jsx)(Rt.a,{value:"order","aria-label":"order",style:{height:"30px"},children:Object(X.jsx)(g.a,{variant:"overline",noWrap:!0,children:"Orders"})}),Object(X.jsx)(Rt.a,{value:"event","aria-label":"event",style:{height:"30px"},children:Object(X.jsx)(g.a,{variant:"overline",noWrap:!0,children:"Alerts"})})]})})}),Object(X.jsx)(y.a,{item:!0,xs:4,children:Object(X.jsx)(D.a,{xsDown:!0,children:Object(X.jsx)("form",{className:e.root,noValidate:!0,autoComplete:"off",children:Object(X.jsx)(Ut.a,{id:"event-filter",label:"Filter events",color:"secondary",onChange:function(e){b(1),v({type:m.type,event:e.target.value,page:1})}})})})}),Object(X.jsx)(y.a,{item:!0,xs:3})]}),Object(X.jsx)(y.a,{item:!0,xs:4,children:Object(X.jsx)(D.a,{xsDown:!0,children:Object(X.jsx)(E.a,{pr:1,pt:1,display:"flex",justifyContent:"flex-end",children:Object(X.jsx)(R.a,{variant:"contained",color:"primary",onClick:function(){return s(!0)},children:"Delete Alerts"})})})})]}),Object(X.jsx)(ke.a,{component:I.a,children:Object(X.jsxs)(ve.a,{className:e.table,size:"small","aria-label":"customized table",children:[Object(X.jsx)(Ce.a,{children:Object(X.jsxs)(Se.a,{children:[Object(X.jsx)(Lt,{style:{width:"170px"},children:"Time"}),Object(X.jsx)(Lt,{children:"Event"})]})}),Object(X.jsx)(ye.a,{children:x.rows.map((function(t,n){return Object(X.jsxs)(zt,{children:[Object(X.jsx)(Lt,{component:"th",scope:"row",children:Object(X.jsx)(g.a,{variant:"caption",children:t.time})}),Object(X.jsx)(Lt,{children:"event"===t.type?Object(X.jsx)(g.a,{variant:"body2",className:e.errortext,children:t.event}):Object(X.jsx)(g.a,{variant:"body2",children:t.event})})]},n)}))})]})}),Object(X.jsx)(E.a,{display:"flex",justifyContent:"flex-end",children:Object(X.jsx)(At.a,{page:j,count:Math.ceil(x.total/20),shape:"rounded",onChange:function(e,t){b(t),v({type:m.type,event:m.event,page:t})}})})]})}var _t=Object(j.a)((function(e){return{root:{flexGrow:1},paper:{padding:e.spacing(2)}}})),Yt=function(e){var t=_t(),n=Object(a.useContext)(Qe)[0];return Object(X.jsx)("div",{className:t.root,children:Object(X.jsxs)(y.a,{container:!0,spacing:3,children:[Object(X.jsx)(y.a,{item:!0,xs:12,md:4,lg:6,children:Object(X.jsx)(g.a,{variant:"h3",noWrap:!0,children:"Event History"})}),Object(X.jsx)(D.a,{xsDown:!0,children:Object(X.jsx)(y.a,{item:!0,xs:12,sm:6,md:4,lg:3,children:Object(X.jsx)(bt,{data:n})})}),Object(X.jsx)(y.a,{item:!0,xs:12,sm:6,md:4,lg:3,children:Object(X.jsx)(tt,{})}),Object(X.jsx)(y.a,{item:!0,xs:12,lg:9,children:Object(X.jsx)(Ht,{})})]})})},Kt=Object(a.createContext)(),Xt=function(e){var t=Object(a.useState)({}),n=Object(o.a)(t,2),c=n[0],i=n[1];return Object(X.jsx)(Kt.Provider,{value:[c,i],children:e.children})},Jt=Object(a.createContext)(),Vt=function(e){var t=Object(a.useState)([]),n=Object(o.a)(t,2),c=n[0],i=n[1];return Object(X.jsx)(Jt.Provider,{value:[c,i],children:e.children})},$t=n(143),Qt=n.n($t),Zt=Object(b.a)((function(e){return{tooltip:{backgroundColor:"light"===e.palette.type?"#FFFFFF":"#000000",color:"light"===e.palette.type?"#000000":"#FFFFFF",maxWidth:800,fontSize:e.typography.pxToRem(14),border:"1px solid #888888"}}}))(A.a),en=n(522),tn=n(246),nn=n(221),an=n(759),cn=n(311),rn=n(120),on=Object(j.a)((function(e){return{textinput:{width:"380px"},select:{width:"570px"}}}));function sn(e){var t=on(),n=Object(Ee.a)().palette.type,i=["Bitget","Coinbasepro","Kucoin","Okcoin","Okx"],r=Object(a.useContext)(Kt)[0],s=Object(a.useContext)(Z),l=Object(o.a)(s,1)[0].serverip,d=Object(a.useState)(r.exchange||""),j=Object(o.a)(d,2),b=j[0],u=j[1],h=Object(a.useState)(r.apiKey||""),x=Object(o.a)(h,2),O=x[0],f=x[1],p=Object(a.useState)(r.apiSecret||""),m=Object(o.a)(p,2),v=m[0],w=m[1],k=Object(a.useState)(r.apiPassword||null),C=Object(o.a)(k,2),S=C[0],F=C[1],P=Object(a.useContext)(Jt)[0],I=Object(a.useState)(i.includes(r.exchange)||!1),D=Object(o.a)(I,2),B=D[0],T=D[1];Object(a.useEffect)((function(){return u(r.exchange),f(r.apiKey),w(r.apiSecret),F(r.apiPassword),i.includes(r.exchange)&&T(!0),function(){}}),[r]);for(var M=[],U=Math.ceil(P.length/3),R=P.slice(0,U),W=P.slice(U,2*U),A=P.slice(2*U),q=0;q<U;q++)R[q]&&M.push(R[q]),W[q]&&M.push(W[q]),A[q]&&M.push(A[q]);var L=function(t){e.callback({field:t.target.id,input:t.target.value}),"apiKey"===t.target.id&&f(t.target.value),"apiSecret"===t.target.id&&w(t.target.value),"apiPassword"===t.target.id&&F(t.target.value)},z=Object(a.useState)(!1),G=Object(o.a)(z,2),_=G[0],Y=G[1],K=function(){Y(!1)};return Object(X.jsxs)(c.a.Fragment,{children:[Object(X.jsxs)(y.a,{container:!0,alignItems:"flex-end",children:[Object(X.jsx)(y.a,{item:!0,xs:11,children:Object(X.jsx)(g.a,{variant:"h6",gutterBottom:!0,children:"Exchange Details"})}),Object(X.jsx)(y.a,{item:!0,xs:1,children:Object(X.jsx)(en.a,{onClickAway:K,children:Object(X.jsx)(Zt,{mode:n,title:Object(X.jsx)(c.a.Fragment,{children:Object(X.jsxs)(E.a,{m:2,children:["If you haven't done so already, logon to your exchange, go to API Management and create a new API key. ",Object(X.jsx)("b",{children:"Make sure the API key is enabled for spot trading"}),". Then enter the API key and API secret here.",Object(X.jsx)("div",{children:"\xa0"}),"Also, ",Object(X.jsx)("b",{children:"make sure your server's IP address is added to the API key's IP whitelist (if enabled)"}),". You can find the IP whitelist under API Management, where you've created your API key. If you run Balance Bot on your PC, then use the IP address of your internet connection, which you can find e.g. here ",Object(X.jsx)(N.a,{href:"https://www.whatsmyip.org/",target:"_blank",rel:"noopener",color:"secondary",children:"www.whatsmyip.org"}),". If you run Balance Bot in the cloud, then use the IP address of your cloud server.",Object(X.jsx)("div",{children:"\xa0"}),Object(X.jsxs)("div",{children:[Object(X.jsx)("i",{children:"Note: "}),"you only need to enter the API details once, as they will be stored on the server for later use. If you want to change the configuration settings at a later point, you can just click the Next button and reuse the API details that you've already configured previously. If you want to change to a different API key, you can entering the new details here."]})]})}),onClose:K,open:_,disableFocusListener:!0,disableHoverListener:!0,disableTouchListener:!0,interactive:!0,children:Object(X.jsx)(H.a,{onClick:_?K:function(){Y(!0)},children:Object(X.jsx)(Qt.a,{color:"secondary"})})})})})]}),Object(X.jsx)("form",{style:{minWidth:"100%"},children:Object(X.jsxs)(y.a,{container:!0,spacing:3,children:[Object(X.jsx)(y.a,{item:!0,xs:12,children:Object(X.jsx)(y.a,{item:!0,xs:5,children:Object(X.jsxs)(nn.a,{children:[Object(X.jsx)(cn.a,{children:"Exchange"}),Object(X.jsx)(tn.a,{MenuProps:{classes:{paper:t.select}},required:!0,labelId:"exchange",name:"exchange",value:b,onChange:function(t){e.callback({field:t.target.name,input:t.target.value}),u(t.target.value),i.includes(t.target.value)?T(!0):T(!1)},className:t.textinput,disabled:"initial"!==r.configstate,children:M.map((function(e,t){return Object(X.jsx)(rn.a,{style:{display:"inline-flex",width:"190px"},value:e,children:e},t)}))}),Object(X.jsx)(an.a,{children:"Exchange cannot be changed after initial bot configuration"})]})})}),Object(X.jsx)(y.a,{item:!0,xs:12,children:Object(X.jsx)(Ut.a,{required:!0,id:"apiKey",name:"apiKey",label:"API Key",type:"password",value:O,onChange:L,fullWidth:!0})}),Object(X.jsx)(y.a,{item:!0,xs:12,children:Object(X.jsx)(Ut.a,{required:!0,id:"apiSecret",name:"apiSecret",label:"API Secret",type:"password",value:v,onChange:L,fullWidth:!0})}),Object(X.jsx)(y.a,{item:!0,xs:12,hidden:!B,children:Object(X.jsx)(Ut.a,{hidden:!B,required:!0,id:"apiPassword",name:"apiPassword",label:"API Password / Passphrase",type:"password",value:S||"",onChange:L,fullWidth:!0})})]})}),Object(X.jsxs)(y.a,{item:!0,xs:12,children:[Object(X.jsx)(E.a,{m:4}),Object(X.jsx)(E.a,{m:0,children:Object(X.jsx)(g.a,{variant:"overline",color:"secondary",children:"> Make sure your API key is enabled for spot trading"})}),Object(X.jsx)(E.a,{m:0,children:"0.0.0.0"===l||"127.0.0.1"===l?Object(X.jsx)(g.a,{variant:"overline",color:"secondary",children:"> Make sure your server's IP address is added to the API key's IP whitelist (if enabled)"}):Object(X.jsxs)(g.a,{variant:"overline",color:"secondary",children:["> Make sure your server's IP address (",l,") is added to the API key's IP whitelist (if enabled)"]})})]})]})}var ln=n(857),dn=Object(a.createContext)(),jn=function(e){var t=Object(a.useState)([]),n=Object(o.a)(t,2),c=n[0],i=n[1];return Object(X.jsx)(dn.Provider,{value:[c,i],children:e.children})},bn=n(757),un=n(755),hn=n(485),xn=n.n(hn),On=n(852),fn=n(858),pn="0 3px 1px rgba(0,0,0,0.1),0 4px 8px rgba(0,0,0,0.13),0 0 0 1px rgba(0,0,0,0.02)",mn=Object(b.a)({root:{height:2,padding:"15px 0"},thumb:{height:28,width:28,boxShadow:pn,marginTop:-14,marginLeft:-14,"&:focus, &:hover, &$active":{boxShadow:"0 3px 1px rgba(0,0,0,0.1),0 4px 8px rgba(0,0,0,0.3),0 0 0 1px rgba(0,0,0,0.02)","@media (hover: none)":{boxShadow:pn}}},active:{},valueLabel:{left:"calc(-50% + 12px)",top:9,"& *":{background:"transparent",color:"#FFFFFF"}},track:{height:3},rail:{height:2,opacity:.5,backgroundColor:"secondary"},mark:{backgroundColor:"secondary",height:8,width:1,marginTop:-3},markActive:{opacity:1,backgroundColor:"currentColor"}})(ln.a),gn=[{id:"coin",align:"left",disablePadding:!0,label:"Coin"},{id:"change",align:"center",disablePadding:!1,label:"Distribution Weight"},{id:"targetdistribution",align:"left",disablePadding:!0,label:"Target Distribution"},{id:"currentdistribution",align:"left",disablePadding:!0,label:"Current Distribution"},{id:"offset",align:"right",disablePadding:!0,label:"Coin Offset"},{id:"notifications",align:"left",disablePadding:!1,label:""},{id:"delete",align:"right",disablePadding:!1,label:""}],vn=[{value:-1,label:""},{value:100,label:""}],yn=Object(j.a)((function(e){return{headcolor:"light"===e.palette.type?{backgroundColor:"#aaaaaa"}:{backgroundColor:"#777777"},headheight:{height:44}}}));function wn(e){var t,n=e.onSelectAllClick,a=e.numSelected,c=e.rowCount,i=yn();return t=Object(X.jsx)(Ne.a,{indeterminate:a>0&&a<c,checked:c>0&&a===c,onChange:n,inputProps:{"aria-label":"select coins"}}),Object(X.jsx)(Ce.a,{children:Object(X.jsxs)(Se.a,{className:"".concat(i.headcolor," ").concat(i.headheight),children:[Object(X.jsx)(we.a,{padding:"checkbox",children:t}),gn.map((function(e){return Object(X.jsx)(we.a,{align:e.align,padding:e.disablePadding?"none":"normal",children:Object(X.jsx)(Fe.a,{children:e.label})},e.id)}))]})})}var kn=Object(j.a)((function(e){return{root:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1),maxWidth:960,minWidth:960},highlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(ge.j)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},title:{flex:"1 1 100%"}}})),Cn=function(e){var t=kn(),n=e.selected,a=n.length;return Object(X.jsx)(p.a,{className:Object(me.a)(t.root,Object(pe.a)({},t.highlight,a>0)),children:a>0?Object(X.jsxs)(g.a,{className:t.title,color:"inherit",variant:"subtitle1",component:"div",children:[1===a?"Coin":"Coins"," ",Object(X.jsx)("i",{children:"excluded"})," from balancing: ",n.join(", ")]}):Object(X.jsxs)(g.a,{className:t.title,variant:"subtitle1",id:"tableTitle",component:"div",children:["Set target distribution and (optionally) select coins to be ",Object(X.jsx)("i",{children:"excluded"})," from balancing"]})})},Sn=Object(j.a)((function(e){return{root:{width:"100%"},paper:{width:"800px",marginBottom:e.spacing(2)},table:{maxWidth:960,minWidth:960,"& .MuiTableCell-sizeSmall":{paddingTop:"6px",paddingBottom:"0px"}},cell:{width:50},cell2:{width:120},textinput:{width:"380px"},textinput2:{width:"120px"},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1},labelStyle:{fontSize:"12px","&.Mui-focused":{color:"light"===e.palette.type?"rgba(0, 0, 0, 0.54)":"rgba(255, 255, 255, 0.7)"}}}})),Fn=Object(b.a)((function(e){return{tooltip:{backgroundColor:e.palette.common.white,color:"rgba(0, 0, 0, 0.87)",boxShadow:e.shadows[1],fontSize:12}}}))(A.a);function Nn(e){var t=Sn(),n=function(e){return e.length>0?e.sort((function(e,t){return e.coin>t.coin?1:t.coin>e.coin?-1:0})):[]},i=Object(a.useContext)(dn),r=Object(o.a)(i,2),s=r[0],l=r[1],j=Object(a.useContext)($)[0],b=Object(a.useContext)(Kt)[0],u=b.portfolio?n(b.portfolio):[],h=Object(a.useState)(u),x=Object(o.a)(h,2),O=x[0],f=x[1],p=Object(a.useState)(!1),m=Object(o.a)(p,2),v=m[0],w=m[1],k=Object(a.useState)(!1),C=Object(o.a)(k,2),S=C[0],F=C[1],P=Object(a.useState)([]),D=Object(o.a)(P,2),B=D[0],T=D[1],M=Object(a.useState)(b.basecoin),W=Object(o.a)(M,2),A=W[0],q=W[1],L=Object(a.useContext)(Z)[0],z=L.access,G=L.publicKey,_=Object(a.useRef)([]),Y=Object(a.useState)(!1),J=Object(o.a)(Y,2),V=J[0],Q=J[1],ee=Object(a.useState)(""),te=Object(o.a)(ee,2),ne=te[0],ae=te[1],ce=Object(a.useState)(b.marketcapEnabled||!1),ie=Object(o.a)(ce,2),re=ie[0],oe=ie[1],se=Object(a.useRef)(b.excludedChange||[]),le=Object(a.useRef)(b.offsetChange||[]),de=Object(a.useRef)(b.marketcapEnabled||!1),je=K("mode","light")[0],be=function(t){e.callback({field:"portfolio",input:t})},ue=function(){Je&&z.allow&&Je.emit("get-portfolio",{exchange:b.exchange,apiKey:_e(G,b.apiKey),apiSecret:_e(G,b.apiSecret),apiPassword:_e(G,b.apiPassword),basecoin:b.basecoin},z.token)};Object(a.useEffect)((function(){var e=!0,t=[];return u.forEach((function(e){e.excluded&&t.push(e.coin)})),T(t),""!==b.basecoin&&l([b.basecoin]),Je.on("portfolio2",(function(t){if(e)if(t=n(t),""===b.basecoin&&"initial"===b.configstate){var a,c=[];t.forEach((function(e){c.push(e.coin)})),a=["BTC","EUR","ETH","PAXG","USD","BUSD","TUSD","USDT","USDC","USDP"].filter((function(e){return c.includes(e)})),l(a),F(!0)}else if(!1!==t){var i=t.length;t.forEach((function(e){var t=b.portfolio.find((function(t){return t.coin===e.coin}));t?(e.offset=t.offset||0,e.slider=t.slider,e.distribution=parseFloat(t.distribution).toFixed(2),e.excluded=t.excluded):(e.offset=0,0!==b.portfolio.length?(e.slider=-1,e.distribution=(0).toFixed(2),e.excluded=!0,T((function(t){return[].concat(Object(d.a)(t),[e.coin])}))):(e.slider=-1,e.distribution=(100/i).toFixed(2),e.excluded=!1)),_.current.push({coin:e.coin,offset:e.offset})})),t=he(t),w(!0),f(t),be(t)}})),function(){e=!1,Je.off("portfolio2")}}),[]),Object(a.useEffect)((function(){return pe(),function(){}}),[B]);var he=function(e){var t=0;return e.forEach((function(e){if(!e.excluded){var n=_.current.find((function(t){return t.coin===e.coin})),a="-"===e.offset||"."===e.offset?Number(0):Number(e.offset);t+=Math.max(e.number+a-Number(n.offset),0)*e.price}})),e.forEach((function(e){if(e.excluded)e.currentDistribution=(0).toFixed(2);else{var n=_.current.find((function(t){return t.coin===e.coin})),a="-"===e.offset||"."===e.offset?Number(0):Number(e.offset),c=(Math.max(e.number+a-Number(n.offset),0)*e.price/t*100).toFixed(2);e.currentDistribution=c}})),e},xe=function(){T([]),f([]),be([])},Oe=function(e){if(e!==b.basecoin){var t=B.indexOf(e),n=Object(d.a)(O),a=n.find((function(t){return t.coin===e}));a.excluded=-1===t,f(n);var c=[];-1===t?c=c.concat(B,e):0===t?c=c.concat(B.slice(1)):t===B.length-1?c=c.concat(B.slice(0,-1)):t>0&&(c=c.concat(B.slice(0,t),B.slice(t+1))),T(c),fe(e,a.excluded),pe(a.slider,a.coin,c),he(O)}},fe=function(t,n){var a=j.portfolio.find((function(e){return e.coin===t}));if(a||(a=b.portfolio.find((function(e){return e.coin===t}))),a.excluded!==n){var c=se.current.find((function(e){return e.coin===t}));c?c.excluded=!c.excluded:se.current.push({coin:t,excluded:n})}else{var i=se.current.find((function(e){return e.coin===t}));if(i)i.excluded=!i.excluded;else{var r=b.portfolio.find((function(e){return e.coin===t.coin}));0===b.portfolio.length||r||se.current.push({coin:t,excluded:n})}}e.callback({field:"excludedChange",input:se.current})},pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:B,a=Object(d.a)(O);Number.isInteger(e)&&t&&(a.find((function(e){return e.coin===t})).slider=e);var c,i=0,r=0,o=0,s=0;a.forEach((function(e){-1===n.indexOf(e.coin)&&(i+=e.slider,-1===e.slider&&(i++,o+=e.marketcap,s+=Math.sqrt(e.marketcap)),-1!==e.slider&&r++)}));var l=100-i,j=a.length-r-n.length;c=0===j?i:Math.max(100,i),a.forEach((function(e){e.excluded=!1,-1!==n.indexOf(e.coin)?(e.distribution=(0).toFixed(2),e.excluded=!0):c<=100?-1===e.slider?0!==o&&de.current?"marketcap"===de.current?e.distribution=(l/(o/e.marketcap)).toFixed(2):"marketcapsqrt"===de.current&&(e.distribution=(l/(s/Math.sqrt(e.marketcap))).toFixed(2)):e.distribution=(l/j).toFixed(2):e.distribution=(e.slider/c*100).toFixed(2):-1===e.slider?e.distribution=(0).toFixed(2):e.distribution=(e.slider/c*100).toFixed(2)})),f(a),be(a)},me=function(e){return-1===e?"=":e},ge=Object(a.useState)(!1),ke=Object(o.a)(ge,2),Ce=ke[0],Fe=ke[1],Pe=function(){Fe(!1)};return Object(X.jsxs)(c.a.Fragment,{children:[Object(X.jsxs)(mt.a,{open:V,onClose:function(){return Q(!1)},children:[Object(X.jsx)(qt.a,{children:"Confirm Deletion"}),Object(X.jsx)(vt.a,{children:Object(X.jsxs)(yt.a,{children:["Are you sure you want to delete ",ne," from this list?"]})}),Object(X.jsxs)(gt.a,{children:[Object(X.jsx)(R.a,{variant:"contained",onClick:function(){return Q(!1)},color:"light"===je?"primary":"secondary",children:"Cancel"}),Object(X.jsx)(R.a,{variant:"contained",onClick:function(){Q(!1),function(e){Oe(e);var t=Object(d.a)(O),n=O.findIndex((function(t){return t.coin===e}));t.splice(n,1),f(t),be(t)}(ne)},color:"light"===je?"primary":"secondary",children:"Delete"})]})]}),Object(X.jsxs)(y.a,{container:!0,alignItems:"flex-end",children:[Object(X.jsx)(y.a,{item:!0,xs:11,children:Object(X.jsx)(g.a,{variant:"h6",gutterBottom:!0,children:"Coin Settings"})}),Object(X.jsx)(y.a,{item:!0,xs:1,children:Object(X.jsx)(en.a,{onClickAway:Pe,children:Object(X.jsx)(Zt,{title:Object(X.jsx)(c.a.Fragment,{children:Object(X.jsxs)(E.a,{m:2,children:[Object(X.jsx)("div",{children:Object(X.jsx)("b",{children:"Base coin"})}),Object(X.jsxs)("div",{children:["Set the base coin used for all trades. Supported base coins are BTC, ETH, PAXG, BUSD, USDT, TUSD, USDC, USDP, USD and EUR. ",Object(X.jsx)("i",{children:"Make sure your portfolio contains some of your base coin of choice"}),". Only then it will appear as an option in the dropdown menu."]}),Object(X.jsx)("div",{children:"\xa0"}),Object(X.jsx)("div",{children:Object(X.jsx)("b",{children:"Distribution Mode"})}),Object(X.jsx)("div",{children:"Using the sliders, you can manually adjust the coin distribution. For sliders set completely to the left (showing = on the slider), you can determine how those coins are distributed. By default, those coins are distributed equally. When you select Market Cap, Balance Bot will automatically set the distribution based on the market cap of these coins. The \u221aMarket Cap option uses the square root of the market cap, which has a smoothening effect, to determine the distribution. The market cap data will be retrieved once per hour, and the distribution will be updated accordingly."}),Object(X.jsx)("div",{children:"\xa0"}),Object(X.jsxs)("div",{children:["NOTE: to use this function, you need to create a free account on CoinMarketCap (",Object(X.jsx)(N.a,{href:"https://coinmarketcap.com/api",target:"_blank",rel:"noopener",color:"secondary",children:"coinmarketcap.com/api"}),") and enter your CoinMarketCap API key in the Bot Manager settings."]}),Object(X.jsx)("div",{children:"\xa0"}),Object(X.jsx)("div",{children:Object(X.jsx)("b",{children:"Exclude coins"})}),Object(X.jsx)("div",{children:"Use the checkboxes on the left to exclude coins in your account from balancing. Balance Bot will completely ignore selected coins."}),Object(X.jsx)("div",{children:"\xa0"}),Object(X.jsx)("div",{children:Object(X.jsx)("b",{children:"Coin distribution"})}),Object(X.jsx)("div",{children:"By default, all coins are balanced with an equal distribution. If you'd like to change the Target Distribution of your coins, use the sliders. Coins with their slider all the way to the left will get an even distribution up to a total of 100%. The Current Distribution column shows how the coins in your portfolio are currently distributed."}),Object(X.jsx)("div",{children:"\xa0"}),Object(X.jsx)("div",{children:Object(X.jsx)("b",{children:"Coin offset"})}),Object(X.jsx)("div",{children:"If you'd like to store part of your coins outside of your exchange spot wallet (e.g. on a hardware wallet or in a staking wallet), and you still want those coins to be used for balancing, you can specify the number of those 'external' coins in the Coin Offset column. This obviously has an immediate effect on the coin distribution, so please make sure you adjust the target distribution accordingly."}),Object(X.jsx)("div",{children:"\xa0"}),Object(X.jsx)("div",{children:Object(X.jsx)("i",{children:"If you move coins out of your spot wallet, make sure that sufficient liquidity remains to execute balancing orders."})}),Object(X.jsx)("div",{children:"\xa0"}),Object(X.jsxs)("div",{children:["If you'd like to ",Object(X.jsx)("i",{children:"exclude"})," a share of the coins you hold in your spot wallet from balancing, you can use a negative offset."]}),Object(X.jsx)("div",{children:"\xa0"}),Object(X.jsx)("div",{children:Object(X.jsx)("i",{children:"Keep an eye on your portfolio over time to make sure the number of coins used for balancing doesn't get too small."})})]})}),onClose:Pe,open:Ce,disableFocusListener:!0,disableHoverListener:!0,disableTouchListener:!0,interactive:!0,children:Object(X.jsx)(H.a,{onClick:Ce?Pe:function(){Fe(!0)},children:Object(X.jsx)(Qt.a,{color:"secondary"})})})})})]}),Object(X.jsxs)(y.a,{container:!0,spacing:3,children:[S||""!==b.basecoin?Object(X.jsxs)(y.a,{container:!0,spacing:3,children:[Object(X.jsx)(y.a,{item:!0,xs:5,children:Object(X.jsx)(E.a,{pt:3,pl:2,children:Object(X.jsxs)(nn.a,{children:[Object(X.jsx)(cn.a,{children:"Base Coin"}),Object(X.jsx)(tn.a,{labelId:"base-coin",name:"basecoin",value:A,onChange:function(t){""!==b.basecoin&&xe(),e.callback({field:t.target.name,input:t.target.value}),q(t.target.value),w(!1),ue()},className:t.textinput,disabled:0===s.length||"initial"!==b.configstate,children:s.map((function(e,t){return Object(X.jsx)(rn.a,{value:e,children:e},t)}))}),Object(X.jsx)(an.a,{children:"Base coin cannot be changed after initial bot configuration"})]})})}),Object(X.jsx)(y.a,{item:!0,xs:7,children:Object(X.jsxs)(E.a,{pt:3,pl:6,children:[Object(X.jsxs)(nn.a,{component:"fieldset",children:[Object(X.jsx)(bn.a,{component:"legend",className:t.labelStyle,children:"Distribution Mode"}),Object(X.jsxs)(fn.a,{row:!0,"aria-label":"distribution",name:"distribution",value:re,onChange:function(t){var n="false"!==t.target.value&&t.target.value;e.callback({field:"marketcapEnabled",input:n}),oe(n),de.current=n,pe()},children:[Object(X.jsx)(U.a,{value:!1,control:Object(X.jsx)(On.a,{}),label:"Equal"}),Object(X.jsx)(U.a,{value:"marketcap",control:Object(X.jsx)(On.a,{}),label:"Market Cap",disabled:!j.marketcapApi}),Object(X.jsx)(U.a,{value:"marketcapsqrt",control:Object(X.jsx)(On.a,{}),label:"\u221aMarket Cap",disabled:!j.marketcapApi})]}),Object(X.jsx)(an.a,{children:"For coins with their slider set to the left"})]}),!j.marketcapApi&&Object(X.jsx)(an.a,{style:{color:"red"},children:"NOTE: store a CoinMarketCap API key in the Bot Manager settings to use Market Cap"})]})}),Object(X.jsx)(y.a,{item:!0,xs:12,children:0===s.length&&Object(X.jsx)(E.a,{pl:2,pb:4,children:Object(X.jsx)(g.a,{color:"secondary",children:"NOTE: you need to include some base coin in your portfolio"})})})]}):Object(X.jsxs)("div",{children:[Object(X.jsx)(E.a,{pt:4,pl:2,children:Object(X.jsx)(g.a,{children:"Loading portfolio data..."})}),Object(X.jsx)(E.a,{pt:4,pl:2,children:Object(X.jsx)(De.a,{animation:"wave"})})]}),Object(X.jsx)(I.a,{className:t.paper,elevation:0,children:v&&""!==b.basecoin?Object(X.jsxs)("div",{children:[Object(X.jsx)(Cn,{selected:B,portfolio:O,setSelected:T}),Object(X.jsxs)(ve.a,{className:t.table,size:"small","aria-labelledby":"tableTitle","aria-label":"enhanced table",children:[Object(X.jsx)(wn,{classes:t,numSelected:B.length,onSelectAllClick:function(e){var t=[],n=!1;0===B.length&&(t=O.map((function(e){return e.coin})).filter((function(e){return e!==b.basecoin})),n=!0),T(t),O.forEach((function(e){pe(e.slider,e.coin,t),e.coin!==b.basecoin&&fe(e.coin,n)})),he(O)},rowCount:O.length}),Object(X.jsx)(ye.a,{children:O.map((function(n,a){var c,i=function(e){return-1!==B.indexOf(e)}(n.coin),r="enhanced-table-checkbox-".concat(a);return c=n.coin!==b.basecoin?Object(X.jsx)(Ne.a,{checked:i,inputProps:{"aria-labelledby":r}}):null,Object(X.jsxs)(Se.a,{hover:!0,role:"checkbox","aria-checked":i,tabIndex:-1,selected:i,children:[Object(X.jsx)(we.a,{padding:"checkbox",onClick:function(e){return Oe(n.coin)},children:c}),Object(X.jsx)(we.a,{component:"th",id:r,scope:"row",padding:"none",onClick:function(e){return Oe(n.coin)},children:n.coin}),Object(X.jsx)(we.a,{align:"right",children:Object(X.jsx)(mn,{value:n.slider,step:1,valueLabelDisplay:"on",marks:vn,min:-1,valueLabelFormat:function(e){return Object(X.jsx)("div",{children:me(e)})},onChange:function(e,t){return pe(t,n.coin)}})}),Object(X.jsxs)(we.a,{component:"th",className:t.cell,id:r,scope:"row",padding:"none",align:"left",children:[n.distribution,"%"]}),Object(X.jsxs)(we.a,{component:"th",className:t.cell,id:r,scope:"row",padding:"none",align:"left",children:[n.currentDistribution,"%"]}),Object(X.jsx)(we.a,{component:"th",className:t.cell,id:r,scope:"row",padding:"none",align:"left",children:Object(X.jsx)("form",{className:t.textinput2,noValidate:!0,autoComplete:"off",children:Object(X.jsx)(un.a,{id:"offset",disableUnderline:!0,inputProps:{style:{fontSize:14,textAlign:"right"}},value:n.offset,onChange:function(t){return function(t,n){var a=t.target.value;if(/^-?([0-9]*)((\.|,)\d{0,8})?$/.test(a)){a.includes(",")&&(a=a.replace(",","."));var c=Object(d.a)(O),i=a;c.find((function(e){return e.coin===n})).offset=i,c=he(c),f(c);var r=j.portfolio.find((function(e){return e.coin===n}));if(r||(r={offset:0}),r.offset!==i){var o=le.current.find((function(e){return e.coin===n}));o?o.change=i-r.offset:le.current.push({coin:n,change:i-r.offset})}else{var s=le.current.find((function(e){return e.coin===n}));s&&(s.change=0)}e.callback({field:"offsetChange",input:le.current})}}(t,n.coin)},onBlur:function(){return function(e){var t=Object(d.a)(O),n=O.find((function(t){return t.coin===e})),a="-"===n.offset||"."===n.offset?Number(0):Number(n.offset);n.offset=a,f(t),be(t)}(n.coin)}})})}),Object(X.jsx)(we.a,{component:"th",className:t.cell2,id:r,scope:"row",padding:"none",align:"left",children:n.coin===b.basecoin&&0===parseFloat(n.distribution)?Object(X.jsx)(g.a,{variant:"overline",color:"secondary",children:"\xa0Cannot be 0%"}):null}),Object(X.jsx)(we.a,{component:"th",className:t.cell,id:r,scope:"row",padding:"none",align:"left",children:n.excluded&&0===parseFloat(n.number)?Object(X.jsx)(Fn,{title:"Delete zero-balance coin",children:Object(X.jsx)(H.a,{size:"small",onClick:function(){return function(e){ae(e),Q(!0)}(n.coin)},children:Object(X.jsx)(xn.a,{color:"secondary"})})}):null})]},n.coin)}))})]})]}):""!==b.basecoin&&Object(X.jsxs)("div",{children:[Object(X.jsx)(E.a,{pt:4,pl:2,children:Object(X.jsx)(g.a,{children:"Loading portfolio data..."})}),Object(X.jsxs)(E.a,{pt:4,pl:2,children:[Object(X.jsx)(De.a,{animation:"wave"}),Object(X.jsx)(De.a,{animation:"wave"}),Object(X.jsx)(De.a,{animation:"wave"})]})]})})]})]})}var Pn=n(487),In=n(486),En=n.n(In),Dn=n(509),Bn=n(219),Tn=n(505),Mn=n(839),Un=n(506),Rn=n(71),Wn=n(848),An=n(307),qn=n.n(An),Ln=[{field:"coin",headerName:"Coin",width:350,editable:!1},{field:"number",headerName:"Number",type:"number",width:200,editable:!0,valueFormatter:function(e){var t=e.value;return Number(t)}},{field:"price",headerName:"Price",type:"number",width:200,editable:!0,valueFormatter:function(e){var t=e.value;return Number(t)}},{field:"suggested",headerName:"Suggested Change",type:"string",width:200,editable:!1,valueFormatter:function(e){return e.value?"\u2714":""}}],zn=Object(j.a)((function(e){return{root:{width:"100%"},header:{"& .MuiDataGrid-colCell":"light"===e.palette.type?{backgroundColor:"#aaaaaa"}:{backgroundColor:"#777777"}},paper:{width:"100%",marginBottom:e.spacing(2)},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"},day:{width:36,height:36,fontSize:"inherit",margin:"0",textAlign:"center",color:"inherit"},highlight:{background:e.palette.secondary.main,color:e.palette.common.white,borderRadius:"50%"},highlightSelected:{background:e.palette.primary.main,color:e.palette.common.white,borderRadius:"50%"},today:{background:"#777",color:e.palette.common.white,borderRadius:"50%"},outofbounce:{color:e.palette.text.disabled,borderRadius:"50%"}}}));function Gn(e){var t=zn(),n=Object(Dn.a)(new Date,"yyyy/MM/dd"),i=Object(a.useContext)(Kt)[0],r=Object(a.useState)(!1),s=Object(o.a)(r,2),l=s[0],j=s[1],b=Object(a.useContext)($)[0],u=Object(a.useContext)(Qe)[0],h=Object(a.useRef)(!1),x=Object(a.useRef)(qn()(i.liquidity)),O=Object(a.useRef)(-1),f=Object(a.useRef)(n),p=Object(a.useState)([]),m=Object(o.a)(p,2),v=m[0],w=m[1],k=Object(a.useState)(null!==i.autoliquidity?i.autoliquidity:"update-liquidity"),C=Object(o.a)(k,2),S=C[0],F=C[1];Object(a.useEffect)((function(){h.current="initial"===i.configstate;var t=Object(Dn.a)(new Date,"yyyy/MM/dd");f.current=t;var n=x.current.find((function(e){return e.date===t}));return O.current=n?x.current.findIndex((function(e){return e.date===t})):-1,h.current||function(){var t=i.portfolio,n=i.excludedChange,a=i.offsetChange,c=Object(Dn.a)(new Date,"yyyy/MM/dd"),r=[];if(t.forEach((function(e){var t=!!n&&n.find((function(t){return t.coin===e.coin})),i=!!a&&a.find((function(t){return t.coin===e.coin})),o=i?i.change:0;if(t||i){var s=b.portfolio.find((function(t){return t.coin===e.coin})),l=b.liquidity.find((function(e){return e.date===c})),d=!!l&&l.changes.find((function(t){return t.coin===e.coin})),j=l&&d||{number:0},u=0;u=s?t&&t.excluded!==s.excluded?e.excluded?j.number-e.number:j.number+e.number:j.number:e.excluded?0:e.number,o&&(u+=e.excluded?0:o),r.push({coin:e.coin,number:u,price:0!==u?e.price:0,suggested:u!==j.number})}else if(-1!==O.current){var h=x.current[O.current].changes.find((function(t){return t.coin===e.coin}));h&&r.push({coin:h.coin,number:h.number,price:h.price,suggested:!1})}})),0!==r.length){var o=Object(Dn.a)(new Date,"yyyy/MM/dd");-1!==O.current?x.current[O.current]={date:o,changes:r}:x.current.push({date:o,changes:r}),O.current=x.current.length-1,e.callback({field:"liquidity",input:x.current})}}(),D(new Date),h.current&&B(),function(){}}),[]);var P=function(e){e.sort((function(e,t){return e.coin>t.coin?1:t.coin>e.coin?-1:0})),w(e)},D=function(e){j(!1);var t=Object(Dn.a)(e,"yyyy/MM/dd");if(!Object(Bn.a)(Object(Tn.a)(t,"yyyy/MM/dd",new Date),Object(Tn.a)(i.startdate,"yyyy/MM/dd",new Date))&&(f.current=t,!h.current)){var a=[],c=u.find((function(e){return e.date===t}));c&&c.coins.forEach((function(e){a.push({id:e.coin,coin:e.coin,number:0,price:0})}));var r=Object(Tn.a)(t,"yyyy/MM/dd",new Date),o=Object(Dn.a)(Object(Mn.a)(r,1),"yyyy/MM/dd");(c=u.find((function(e){return e.date===o})))&&c.coins.forEach((function(e){a.find((function(t){return t.coin===e.coin}))||a.push({id:e.coin,coin:e.coin,number:0,price:0})})),f.current===n&&i.portfolio.forEach((function(e){e.excluded||a.find((function(t){return t.coin===e.coin}))||a.push({id:e.coin,coin:e.coin,number:0,price:0})}));var s=x.current.find((function(e){return e.date===t}));if(s){s.changes.forEach((function(e){a.find((function(t){return t.coin===e.coin}))||a.push({id:e.coin,coin:e.coin,number:0,price:0})})),O.current=x.current.findIndex((function(e){return e.date===t}));var l=[];a.forEach((function(e){var t=s.changes.find((function(t){return t.coin===e.coin}));t?l.push({id:e.coin,coin:e.coin,number:t.number,price:t.price,suggested:t.suggested}):l.push(Object(fe.a)({},e))})),a=[].concat(l)}else O.current=-1;P(a)}},B=function(){var t=[],n=i.offsetChange;i.portfolio.forEach((function(e){var a=!!n&&n.find((function(t){return t.coin===e.coin})),c=a?a.change:0;if(h.current)e.excluded||t.push({id:e.coin,coin:e.coin,number:Number((e.number+c).toFixed(8)),price:Number(e.price.toFixed(8)),suggested:!0});else{var i=[],r=u.find((function(e){return e.date===f.current}));r&&r.coins.forEach((function(e){i.push({coin:e.coin})})),i.find((function(t){return t.coin===e.coin}))&&t.push({id:e.coin,coin:e.coin,number:Number(e.number.toFixed(8)),price:Number(e.price.toFixed(8))})}})),P(t);var a=[];if(h.current){var c=[];t.forEach((function(e){c.push({coin:e.coin,number:e.number,price:e.price})}));var r=Object(Dn.a)(new Date,"yyyy/MM/dd");a.push({date:r,changes:c})}else(a=qn()(x.current))[O.current].changes.forEach((function(e){var n=t.find((function(t){return t.coin===e.coin}));n&&(e.number=n.number,e.price=n.price)}));x.current=a,e.callback({field:"liquidity",input:a})},T=Object(a.useState)(!1),M=Object(o.a)(T,2),W=M[0],A=M[1],q=function(){A(!1)};return Object(X.jsx)("div",{children:Object(X.jsxs)(c.a.Fragment,{children:[Object(X.jsxs)(y.a,{container:!0,alignItems:"flex-end",children:[Object(X.jsx)(y.a,{item:!0,xs:11,children:Object(X.jsx)(g.a,{variant:"h6",gutterBottom:!0,children:"Liquidity Settings"})}),Object(X.jsx)(y.a,{item:!0,xs:1,children:Object(X.jsx)(en.a,{onClickAway:q,children:Object(X.jsx)(Zt,{title:Object(X.jsx)(c.a.Fragment,{children:Object(X.jsxs)(E.a,{m:2,children:[Object(X.jsx)("div",{children:Object(X.jsx)("b",{children:"Use of liquidity settings"})}),Object(X.jsx)("div",{children:"Balance Bot uses the liquidity settings to determine the performance of your balancing portfolio. It compares the current portfolio value with the starting portfolio value to calculate change metrics and performance graphs."}),Object(X.jsx)("div",{children:"\xa0"}),Object(X.jsx)("div",{children:Object(X.jsx)("b",{children:"Default liquidity settings"})}),Object(X.jsx)("div",{children:"By default, Balance Bot will check the number of coins in your account and their prices upon first-time configuration, and use these to calculate the starting balance."}),Object(X.jsx)("div",{children:"\xa0"}),Object(X.jsx)("div",{children:Object(X.jsx)("b",{children:"Register liquidity changes"})}),Object(X.jsx)("div",{children:"If you're adding or removing coins after the start date, register those liquidity changes on the respective date, so that your bot can 'normalize' its metrics and performance graphs stay accurate. Do so by selecting the appropriate date, and fill in the number of coins and its price, expressed in your selected base coin, at which you purchased / sold those coins. Simply click on the cells in the table to edit."}),Object(X.jsx)("div",{children:"\xa0"}),Object(X.jsx)("div",{children:"Note: if you've included or excluded a coin in step 2 of the configuration, Balance Bot will automatically suggest to add/remove those coins in the table. This is indicated with a checkmark in the 'suggested' column."}),Object(X.jsx)("div",{children:"\xa0"}),Object(X.jsx)("div",{children:"For dates other than the start date, you can completely remove the liquidity changes for the selected date by clicking the 'delete liq changes' button. This will not affect liquidity changes for other dates, those will be kept."}),Object(X.jsx)("div",{children:"\xa0"}),Object(X.jsxs)("div",{children:["For more information about the normalization concept, read ",Object(X.jsx)(N.a,{href:"https://hodlerhacks.com/balance-bot/using-balance-bot/liquidity-changes/",target:"_blank",rel:"noopener",color:"secondary",children:"here"}),"."]}),Object(X.jsx)("div",{children:"\xa0"}),Object(X.jsx)("div",{children:Object(X.jsx)("b",{children:"Liquidity Change Handling"})}),Object(X.jsx)("div",{children:"Balance Bot keeps track of liquidity changes, i.e. funds being added to or removed from your portfolio. You can configure what Balance Bot should do when liquidity changes are detected. By default, it will automatically apply liquidity changes as soon as those are detected. So if you add or remove funds, you don't need to update the liquidity settings yourself. This is useful if you're doing Dollar Cost Averaging (DCA) or manually changing your balancing portfolio for other reasons on a regular basis."}),Object(X.jsx)("div",{children:"\xa0"}),Object(X.jsx)("div",{children:"However, if you're also trading on the same account, you'll probably don't want to use this option, because otherwise Balance Bot will adjust for trading gains/losses, and those would then not be properly reflected in the performance metrics. In that case, select 'Ignore liquidity changes' or 'Switch bot to manual mode when liquidity changes'. The latter option prevents Balance Bot from rebalancing while you're in a trading session and forgot to stop or switch your bot to manual mode before you started trading. Once you're done trading, don't forget to switch your bot to automatic mode again."})]})}),onClose:q,open:W,disableFocusListener:!0,disableHoverListener:!0,disableTouchListener:!0,interactive:!0,children:Object(X.jsx)(H.a,{onClick:W?q:function(){A(!0)},children:Object(X.jsx)(Qt.a,{color:"secondary"})})})})})]}),Object(X.jsxs)("div",{style:{width:"952px"},children:[Object(X.jsxs)(y.a,{container:!0,direction:"row",alignItems:"flex-end",justify:"space-between",children:[Object(X.jsx)(y.a,{item:!0,xs:9,children:Object(X.jsx)(Rn.a,{utils:Un.a,children:Object(X.jsx)(Wn.a,{open:l,onOpen:function(){return j(!0)},onClose:function(){return j(!1)},disableToolbar:"true",variant:"inline",format:"yyyy/MM/dd",margin:"normal",id:"date-picker-inline",label:"Select date",value:f.current,disableFuture:"true",minDate:Object(Tn.a)(i.startdate,"yyyy/MM/dd",new Date),onChange:function(e){},onAccept:D,renderDay:function(e,n,a,c){var i=Object(Dn.a)(n,"yyyy/MM/dd"),r=Object(Dn.a)(e,"yyyy/MM/dd"),o=Object(Dn.a)(e,"d"),s=Object(Dn.a)(new Date,"yyyy/MM/dd"),l=[];return x.current.forEach((function(e){l.push(e.date)})),r===f.current&&a?Object(X.jsx)("div",{className:t.highlightSelected,children:Object(X.jsx)(H.a,{className:t.day,children:Object(X.jsxs)("span",{children:[" ",o," "]})})}):l.includes(r)&&a&&i!==r?Object(X.jsx)("div",{className:t.highlight,children:Object(X.jsx)(H.a,{className:t.day,children:Object(X.jsxs)("span",{children:[" ",o," "]})})}):r===s?Object(X.jsx)("div",{className:t.today,children:Object(X.jsx)(H.a,{className:t.day,children:Object(X.jsxs)("span",{children:[" ",o," "]})})}):c}})})}),Object(X.jsx)(y.a,{item:!0,xs:3,children:Object(X.jsx)(E.a,{display:"flex",justifyContent:"flex-end",children:Object(X.jsx)(R.a,{disabled:0===O.current||-1===O.current,variant:"contained",color:"primary",startIcon:Object(X.jsx)(En.a,{}),onClick:function(){if(0!==O.current){var t=[];v.forEach((function(e){t.push({id:e.coin,coin:e.coin,number:0,price:0})})),P(t),x.current.splice(O.current,1),O.current=-1,e.callback({field:"liquidity",input:x.current})}},children:"Delete Liq Changes"})})})]}),Object(X.jsx)(E.a,{pt:3,children:Object(X.jsx)(y.a,{container:!0,children:Object(X.jsx)(I.a,{className:t.paper,elevation:0,children:Object(X.jsx)("div",{style:{width:"952px"},children:Object(X.jsx)(Pn.a,{className:t.header,rows:v,columns:Ln,autoHeight:!0,density:"compact",disableColumnSelector:!0,disableColumnMenu:!0,hideFooter:!0,hideFooterPagination:!0,hideFooterRowCount:!0,onCellEditCommit:function(t){var n=qn()(x.current),a=O.current;if(-1===a&&(a=n.push({date:f.current,changes:[]})-1,O.current=a),n[a].changes){var c=n[a].changes.find((function(e){return e.coin===t.id}));if(c||(n[a].changes.push({coin:t.id,number:0,price:0}),c=n[a].changes.find((function(e){return e.coin===t.id}))),c){if(c.id=t.id,c[t.field]=Number(t.value),"number"===t.field)if("0"!==t.value){var i=u.find((function(e){return e.date===f.current}));if(i){var r=i.coins.find((function(e){return e.coin===t.id}));if(r)c.price=Number(r.price);else{var o=Object(Tn.a)(f.current,"yyyy/MM/dd",new Date),s=Object(Dn.a)(Object(Mn.a)(o,1),"yyyy/MM/dd");if(i=u.find((function(e){return e.date===s}))){var l=i.coins.find((function(e){return e.coin===t.id}));l&&(c.price=Number(l.price))}}}}else c.price=0;var j=Object(d.a)(v),b=j.findIndex((function(e){return e.coin===t.id}));j[b]=c,w(j)}}x.current=n,e.callback({field:"liquidity",input:n})}})})})})}),Object(X.jsx)(E.a,{pt:3}),Object(X.jsx)(y.a,{item:!0,xs:6,children:Object(X.jsxs)(nn.a,{component:"fieldset",children:[Object(X.jsx)(bn.a,{component:"legend",className:t.labelStyle,children:"Liquidity Change Handling"}),Object(X.jsx)(an.a,{children:"Decide what to do if a liquidity change is detected"}),Object(X.jsxs)(fn.a,{row:!0,"aria-label":"liquidityhandling",name:"liquidityhandling",value:S,onChange:function(t){var n="false"!==t.target.value&&t.target.value;e.callback({field:"autoliquidity",input:n}),F(n)},children:[Object(X.jsx)(U.a,{value:!1,control:Object(X.jsx)(On.a,{}),label:"Ignore liquidity changes"}),Object(X.jsx)(U.a,{value:"switch-manual",control:Object(X.jsx)(On.a,{}),label:"Switch bot to manual mode when liquidity changes"}),Object(X.jsx)(U.a,{value:"update-liquidity",control:Object(X.jsx)(On.a,{}),label:"Automatically apply liquidity changes"})]})]})})]})]})})}var Hn=n(840),_n=n(488);function Yn(e){var t,n=e.colorscheme;switch(n){case"red_yellow_blue":case"red_yellow_green":case"purpleRed_green":case"pink_yellowGreen":case"red_blue":case"spectral":t=11;break;case"yellow_orange_red":case"set1":t=9;break;case"paired":case"set3":t=12;break;case"category10":t=10;break;case"dark2":case"set2":t=8;break;default:t=0}for(var a={},c=[],i=0;i<t;i++)a["c"+i]=10,c.push("c"+i);var r=[a];return Object(X.jsx)(_n.a,{data:r,keys:c,height:20,width:20*t,margin:{top:0,right:0,bottom:0,left:0},padding:0,layout:"horizontal",valueScale:{type:"linear"},colors:{scheme:n},axisTop:null,axisRight:null,axisBottom:null,axisLeft:null,enableLabel:!1,isInteractive:!1,legends:[],barAriaLabel:null})}var Kn=Object(j.a)((function(e){return{formControl:{minWidth:"100%"},selectEmpty:{marginTop:e.spacing(2)},textinput:{width:"380px"},textinput2:{width:"200px"}}}));function Xn(e){var t=Kn(),n=Object(a.useContext)(Kt)[0],i=Object(a.useState)(n.botname||""),r=Object(o.a)(i,2),s=r[0],l=r[1],d=Object(a.useState)(n.showname||!1),j=Object(o.a)(d,2),b=j[0],u=j[1],h=Object(a.useState)(n.threshold||"3"),x=Object(o.a)(h,2),O=x[0],f=x[1],p=Object(a.useState)(n.colorscheme||"red_yellow_blue"),m=Object(o.a)(p,2),v=m[0],w=m[1],k=Object(a.useState)(n.ordertype||"market"),C=Object(o.a)(k,2),S=C[0],F=C[1],P=Object(a.useState)(n.timeout||20),I=Object(o.a)(P,2),D=I[0],B=I[1],T=Object(a.useState)(n.headless||!1),M=Object(o.a)(T,2),R=M[0],W=M[1],A=Object(a.useState)(n.cooldown||0),q=Object(o.a)(A,2),L=q[0],z=q[1],G=Object(a.useState)(n.change24h||0),_=Object(o.a)(G,2),Y=_[0],K=_[1],J=Object(a.useState)(n.emojibuy||""),V=Object(o.a)(J,2),$=V[0],Q=V[1],Z=Object(a.useState)(n.emojisell||""),ee=Object(o.a)(Z,2),te=ee[0],ne=ee[1],ae=Object(a.useState)(!1),ce=Object(o.a)(ae,2),ie=ce[0],re=ce[1],oe=function(){re(!1)};return Object(X.jsxs)(c.a.Fragment,{children:[Object(X.jsxs)(y.a,{container:!0,alignItems:"flex-end",children:[Object(X.jsx)(y.a,{item:!0,xs:11,children:Object(X.jsx)(g.a,{variant:"h6",gutterBottom:!0,children:"General Settings"})}),Object(X.jsx)(y.a,{item:!0,xs:1,children:Object(X.jsx)(en.a,{onClickAway:oe,children:Object(X.jsx)(Zt,{title:Object(X.jsx)(c.a.Fragment,{children:Object(X.jsxs)(E.a,{m:2,children:[Object(X.jsx)("div",{children:Object(X.jsx)("b",{children:"Bot Name"})}),Object(X.jsx)("div",{children:"Give your bot a descriptive name. This is especially useful if you run multiple bots, so you can easily recognize each."}),Object(X.jsx)("div",{children:"\xa0"}),Object(X.jsx)("div",{children:Object(X.jsx)("b",{children:"Balancing Threshold"})}),Object(X.jsx)("div",{children:"The balancing threshold is used by Balance Bot to determine when to sell/buy coins. The threshold is the relative deviation from the target distribution at which point the bot will place an order to restore the coin to the target distribution."}),Object(X.jsx)("div",{children:"\xa0"}),Object(X.jsx)("div",{children:Object(X.jsx)("b",{children:"Chart Color Scheme"})}),Object(X.jsx)("div",{children:"Select a color scheme to be used for the coin charts: the pie chart on the Portfolio page and the line chart on the Coin Analysis page."}),Object(X.jsx)("div",{children:"\xa0"}),Object(X.jsx)("div",{children:Object(X.jsx)("b",{children:"Order Type"})}),Object(X.jsx)("div",{children:"Market Orders get executed immediately, but the price is not guaranteed. Limit Orders have a preset price, but it may take time before the order is filled. If the order is not filled after the select time out period, the order is canceled. High-Margin uses the ask price when selling, and the bid price when buying. Low-Margin uses the bid price when selling, and the ask price when buying. High-Margin limit orders may take longer to get filled, but at a better price."}),Object(X.jsx)("div",{children:"\xa0"}),Object(X.jsx)("div",{children:Object(X.jsx)("b",{children:"Emojis"})}),Object(X.jsxs)("div",{children:["Just because it's fun, you can configure an emoji to be shown in order notifications. By setting a different emoji for sell and buy orders, you can quickly identify the order type. You can find the complete list of emojis here ",Object(X.jsx)(N.a,{href:"https://www.unicode.org/emoji/charts/full-emoji-list.html",target:"_blank",rel:"noopener",color:"secondary",children:"https://www.unicode.org/emoji/charts/full-emoji-list.html"}),". Copy and paste the code of your preferred emojis, but without the U+ prefix (e.g. enter 1F680, instead of U+1F680). If the code is correct, the emoji will show up to the right of the entry field."]}),Object(X.jsx)("div",{children:"\xa0"}),Object(X.jsx)("div",{children:Object(X.jsx)("b",{children:"Cooldown Trigger"})}),Object(X.jsx)("div",{children:"At times of high price volatility, Balance Bot may perform many trades to keep your portfolio balanced. This may not be preferred, because of the resulting trading fees. To avoid such situation, you may choose to trigger a 1 hour cooldown period, which kicks in when the set number of trades are performed within a 5 minute period."}),Object(X.jsx)("div",{children:"\xa0"}),Object(X.jsx)("div",{children:Object(X.jsx)("b",{children:"Maximum 24h drop"})}),Object(X.jsx)("div",{children:"If a coin crashes in a short period of time, Balance Bot would sell your other coins in order to buy an increasing amount of the crashing coin. To avoid this from happening, enter the maximum 24h percentage change (e.g. -20%) below which the bot should be paused. If this point is reached, the bot will switch to manual mode, so you can investigate what's going on, and if needed exclude the coin in the configuration settings, before changing back to automatic mode again."}),Object(X.jsx)("div",{children:"\xa0"}),Object(X.jsx)("div",{children:Object(X.jsx)("b",{children:"Automatic Mode"})}),Object(X.jsx)("div",{children:"You can operate your bot manually. In this mode, you will need to keep an eye on the dashboard and place manual orders when the dashboard indicates that a coin should be bought or sold. This is useful if you want to have full control, typically when you use Balance Bot for the first time and you want to get a feel for how it works."}),Object(X.jsx)("div",{children:"\xa0"}),Object(X.jsx)("div",{children:"Enabling automatic mode is a lot more practical though, as Balance Bot will run 24/7 and place orders automatically to keep your portfolio balanced."}),Object(X.jsx)("div",{children:"\xa0"}),Object(X.jsxs)("div",{children:[Object(X.jsx)("i",{children:"Note: "}),"You don't need to keep your browser open to run your bot in automatic mode. The application will keep running in the background. You can open the application in the browser at any time to check the status of your bot."]})]})}),onClose:oe,open:ie,disableFocusListener:!0,disableHoverListener:!0,disableTouchListener:!0,interactive:!0,children:Object(X.jsx)(H.a,{onClick:ie?oe:function(){re(!0)},children:Object(X.jsx)(Qt.a,{color:"secondary"})})})})})]}),Object(X.jsxs)(y.a,{container:!0,spacing:3,children:[Object(X.jsx)(y.a,{item:!0,xs:6,children:Object(X.jsx)(Ut.a,{required:!0,id:"botname",name:"botname",label:"Bot Name",helperText:"Give your bot a name",value:s,onChange:function(t){e.callback({field:t.target.id,input:t.target.value}),l(t.target.value)},className:t.textinput})}),Object(X.jsx)(y.a,{item:!0,xs:6,children:Object(X.jsx)(E.a,{pt:1,children:Object(X.jsx)(U.a,{control:Object(X.jsx)(Ne.a,{color:"secondary",name:"showname",checked:b,onChange:function(t){e.callback({field:"showname",input:t.target.checked}),u(t.target.checked)}}),label:"Show in notifications (instead of bot ID)"})})}),Object(X.jsx)(y.a,{item:!0,xs:6,children:Object(X.jsx)(Ut.a,{required:!0,id:"threshold",name:"threshold",label:"Balancing Threshold (%)",helperText:"Deviation from the target distribution at which the bot rebalances",value:O,onChange:function(t){/^[0-9]*\.?[0-9]*$/.test(t.target.value)&&(e.callback({field:t.target.id,input:t.target.value}),f(t.target.value))},className:t.textinput})}),Object(X.jsx)(y.a,{item:!0,xs:3,children:Object(X.jsxs)(nn.a,{children:[Object(X.jsx)(cn.a,{children:"Chart Color Scheme"}),Object(X.jsxs)(tn.a,{labelId:"color-scheme",name:"colorscheme",value:v,onChange:function(t){e.callback({field:t.target.name,input:t.target.value}),w(t.target.value)},className:t.textinput2,children:[Object(X.jsx)(rn.a,{value:"red_yellow_blue",children:"Red Yellow Blue"}),Object(X.jsx)(rn.a,{value:"red_yellow_green",children:"Red Yellow Green"}),Object(X.jsx)(rn.a,{value:"yellow_orange_red",children:"Yellow Orange Red"}),Object(X.jsx)(rn.a,{value:"purpleRed_green",children:"Purple Green"}),Object(X.jsx)(rn.a,{value:"pink_yellowGreen",children:"Pink Green"}),Object(X.jsx)(rn.a,{value:"red_blue",children:"Red Blue"}),Object(X.jsx)(rn.a,{value:"spectral",children:"Spectral"}),Object(X.jsx)(rn.a,{value:"paired",children:"Paired"}),Object(X.jsx)(rn.a,{value:"category10",children:"Category 10"}),Object(X.jsx)(rn.a,{value:"dark2",children:"Dark 2"}),Object(X.jsx)(rn.a,{value:"set1",children:"Set 1"}),Object(X.jsx)(rn.a,{value:"set2",children:"Set 2"}),Object(X.jsx)(rn.a,{value:"set3",children:"Set 3"})]}),Object(X.jsx)(an.a,{children:"Select a color scheme for the charts"})]})}),Object(X.jsx)(y.a,{item:!0,xs:3,children:Object(X.jsx)("div",{style:{height:"20px",marginTop:"20px"},children:Object(X.jsx)(Yn,{colorscheme:v})})}),Object(X.jsx)(y.a,{item:!0,xs:6,children:Object(X.jsxs)(nn.a,{children:[Object(X.jsx)(cn.a,{children:"Order Type"}),Object(X.jsxs)(tn.a,{labelId:"order-type",name:"ordertype",value:S,onChange:function(t){e.callback({field:t.target.name,input:t.target.value}),F(t.target.value)},className:t.textinput,children:[Object(X.jsx)(rn.a,{value:"market",children:"Market Order"}),Object(X.jsx)(rn.a,{value:"limit-high",children:"Limit Order > High-Margin"}),Object(X.jsx)(rn.a,{value:"limit-low",children:"Limit Order > Low-Margin"})]}),Object(X.jsx)(an.a,{children:"Select the order type to be used for trades"})]})}),Object(X.jsx)(y.a,{item:!0,xs:6,children:Object(X.jsxs)(nn.a,{children:[Object(X.jsx)(cn.a,{children:"Limit Order Time Out"}),Object(X.jsxs)(tn.a,{labelId:"limit-time-out",name:"timeout",value:D,onChange:function(t){e.callback({field:t.target.name,input:t.target.value}),B(t.target.value)},className:t.textinput,disabled:"market"===S,children:[Object(X.jsx)(rn.a,{value:10,children:"10 minutes"}),Object(X.jsx)(rn.a,{value:20,children:"20 minutes"}),Object(X.jsx)(rn.a,{value:30,children:"30 minutes"}),Object(X.jsx)(rn.a,{value:60,children:"60 minutes"}),Object(X.jsx)(rn.a,{value:90,children:"90 minutes"}),Object(X.jsx)(rn.a,{value:120,children:"120 minutes"})]}),Object(X.jsx)(an.a,{children:"Select the maximum wait time for limit orders to be filled"})]})}),Object(X.jsx)(y.a,{item:!0,xs:4,children:Object(X.jsx)(Ut.a,{id:"emojibuy",name:"emojibuy",label:"Emoji for Buy Order Notifications",helperText:"Configure an emoji to be shown in buy order notifications",value:$,onChange:function(t){/^[0-9,A-F]{0,5}$/.test(t.target.value)&&(e.callback({field:t.target.id,input:t.target.value}),Q(t.target.value))},InputProps:{startAdornment:Object(X.jsx)(Hn.a,{position:"start",children:"U+"})},className:t.textinput})}),Object(X.jsx)(y.a,{item:!0,xs:2,children:Object(X.jsx)(E.a,{pt:2,children:""!==$&&String.fromCodePoint("0x".concat($))})}),Object(X.jsx)(y.a,{item:!0,xs:4,children:Object(X.jsx)(Ut.a,{id:"emojisell",name:"emojisell",label:"Emoji for Sell Order Notifications",helperText:"Configure an emoji to be shown in sell order notifications",value:te,onChange:function(t){/^[0-9,A-F]{0,5}$/.test(t.target.value)&&(e.callback({field:t.target.id,input:t.target.value}),ne(t.target.value))},InputProps:{startAdornment:Object(X.jsx)(Hn.a,{position:"start",children:"U+"})},className:t.textinput})}),Object(X.jsx)(y.a,{item:!0,xs:2,children:Object(X.jsx)(E.a,{pt:2,children:""!==te&&String.fromCodePoint("0x".concat(te))})}),Object(X.jsx)(y.a,{item:!0,xs:6,children:Object(X.jsx)(Ut.a,{required:!0,id:"cooldown",name:"cooldown",label:"Cooldown Trigger",helperText:"After this many orders within 5 minutes, Balance Bot will go into cooldown mode (set to 0 to disable)",value:L,onChange:function(t){/^[0-9]*$/.test(t.target.value)&&(e.callback({field:t.target.id,input:t.target.value}),z(t.target.value))},className:t.textinput})}),Object(X.jsx)(y.a,{item:!0,xs:6,children:Object(X.jsx)(Ut.a,{required:!0,id:"change24h",name:"change24h",label:"Maximum 24h Drop (negative %)",helperText:"If a coin's 24h change goes below this maximum, your bot will be paused (set to 0 to disable)",inputProps:{inputMode:"numeric"},value:Y,onChange:function(t){("-"===t.target.value||t.target.value<=0)&&(e.callback({field:t.target.id,input:t.target.value}),K(t.target.value))},onBlur:function(t){t.target.value<=0?(e.callback({field:t.target.id,input:t.target.value}),K(t.target.value)):"-"===t.target.value&&(e.callback({field:t.target.id,input:0}),K(0))},className:t.textinput})}),Object(X.jsx)(y.a,{item:!0,xs:12,children:Object(X.jsx)(U.a,{control:Object(X.jsx)(Ne.a,{color:"secondary",name:"headless",checked:R,onChange:function(t){e.callback({field:"headless",input:t.target.checked}),W(t.target.checked)}}),label:"Run bot in automatic mode"})})]})]})}var Jn=n(145),Vn=Object(j.a)((function(e){return{layout:{width:"1000px",marginLeft:e.spacing(2),marginRight:e.spacing(2)},paper:Object(pe.a)({marginTop:e.spacing(3),marginBottom:e.spacing(3),padding:e.spacing(2)},e.breakpoints.up(600+2*e.spacing(3)),{marginTop:e.spacing(6),marginBottom:e.spacing(6),padding:e.spacing(3)}),stepper:{padding:e.spacing(3,0,5)},buttons:{display:"flex",justifyContent:"flex-end"},button:{marginTop:e.spacing(3),marginLeft:e.spacing(1)},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}})),$n=["Exchange Details","Coin Settings","Liquidity Settings","General Settings"];function Qn(){var e=Vn(),t=Object(a.useContext)($),n=Object(o.a)(t,2),i=n[0],r=n[1],s=Object(Jn.b)(),l=s.enqueueSnackbar,d=s.closeSnackbar,j=Object(a.useState)(0),b=Object(o.a)(j,2),u=b[0],h=b[1],x=Object(a.useContext)(Kt),O=Object(o.a)(x,2),p=O[0],m=O[1],v=Object(a.useContext)(Ot)[1],y=Object(a.useContext)(Ve)[1],w=Object(a.useState)(!1),k=Object(o.a)(w,2),C=k[0],S=k[1],F=Object(a.useContext)(Z)[0],N=F.access,P=F.publicKey,E=Object(a.useState)({title:"",message:""}),D=Object(o.a)(E,2),M=D[0],U=D[1],W=Object(a.useState)(!1),A=Object(o.a)(W,2),q=A[0],L=A[1],z=Object(a.useRef)(!1),G=Object(a.useRef)("tbd");Object(a.useEffect)((function(){return m(Object(fe.a)(Object(fe.a)({},i),{},{recreate:!1})),function(){}}),[]),Object(a.useEffect)((function(){return"***"!==i.apiKey||"***"!==i.apiSecret||z.current||(z.current=!0,U({title:"Your bot has been restored from a backup",message:"Please re-enter your API details to re-activate your bot"}),L(!0)),function(){}}),[i]);var H=function(e){return Object(X.jsx)(c.a.Fragment,{children:Object(X.jsx)(R.a,{style:{color:"#bbbbbb"},onClick:function(){d(e)},children:"Dismiss"})})},_=function e(){Je.on("portfolio1",(function(t){!1===t?(G.current=!0,h(0)):G.current=!1,e()}))};Object(a.useEffect)((function(){return _(),function(){}}),[]),Object(a.useEffect)((function(){return Je.on("configuration-stored",(function(){p.apiPassword?r((function(e){return Object(fe.a)(Object(fe.a)({},e),{},{apiKey:"************",apiSecret:"************",apiPassword:"************"})})):r((function(e){return Object(fe.a)(Object(fe.a)({},e),{},{apiKey:"************",apiSecret:"************"})})),v([]),S(!1),h(4)})),function(){Je.off("configuration-stored")}}),[]);var Y=function(e){var t=p;t[e.field]=e.input,m(t)},K=function(){Je&&N.allow&&(G.current="tbd",Je.emit("get-portfolio",{exchange:p.exchange,apiKey:_e(P,p.apiKey),apiSecret:_e(P,p.apiSecret),apiPassword:p.apiPassword?_e(P,p.apiPassword):null,basecoin:p.basecoin},N.token))},J=function(){p.threshold=Number(p.threshold),p.cooldown=parseInt(p.cooldown),p.change24h=parseInt(p.change24h),p.portfolio.forEach((function(e){delete e.currentDistribution,delete e.number,delete e.price,delete e.last,delete e.value,delete e.target,delete e.trade,delete e.side,delete e.valid,delete e.delta,delete e.prevnumber})),delete p.excludedChange,delete p.offsetChange,delete p.configstate,delete p.enableFiatToggle;var e=[];p.liquidity.forEach((function(t){e.push({date:t.date,changes:t.changes.filter((function(e){return 0!==e.number}))})})),p.liquidity=e,e=[],p.liquidity.forEach((function(t){0!==t.changes.length&&e.push(t)})),p.liquidity=e;var t=p.liquidity[p.liquidity.length-1];if(t&&t.changes.forEach((function(e){delete e.suggested,delete e.id})),p.liquidity.sort((function(e,t){return e.date>t.date?1:t.date>e.date?-1:0})),Je&&N.allow){var n=Object(fe.a)(Object(fe.a)({},p),{},{apiKey:_e(P,p.apiKey),apiSecret:_e(P,p.apiSecret)});p.apiPassword&&(n.apiPassword=_e(P,p.apiPassword)),Je.emit("store-configuration",n,N.token),r(p),y({})}};return Object(X.jsxs)("div",{children:[Object(X.jsx)(B.a,{className:e.backdrop,open:C,onClick:function(){S(!1)},children:Object(X.jsx)(T.a,{color:"inherit"})}),Object(X.jsxs)(c.a.Fragment,{children:[Object(X.jsx)(f.a,{}),Object(X.jsxs)(mt.a,{open:q,fullWidth:!0,children:[Object(X.jsx)(qt.a,{children:M.title}),Object(X.jsx)(vt.a,{children:Object(X.jsx)(yt.a,{children:M.message})}),Object(X.jsx)(gt.a,{children:Object(X.jsx)(R.a,{variant:"contained",onClick:function(){return L(!1)},color:"secondary",children:"Close"})})]}),Object(X.jsx)("main",{className:e.layout,children:Object(X.jsxs)(I.a,{className:e.paper,children:[Object(X.jsx)(nt.a,{activeStep:u,className:e.stepper,children:$n.map((function(e){return Object(X.jsx)(at.a,{children:Object(X.jsx)(ct.a,{children:e})},e)}))}),Object(X.jsx)(c.a.Fragment,{children:u===$n.length?Object(X.jsxs)(c.a.Fragment,{children:[Object(X.jsx)(g.a,{variant:"h5",gutterBottom:!0,children:"Configuration has been saved"}),Object(X.jsx)(g.a,{variant:"subtitle1",children:"You can now leave this page"})]}):Object(X.jsxs)(c.a.Fragment,{children:[function(e){switch(e){case 0:return Object(X.jsx)(sn,{callback:Y});case 1:return Object(X.jsx)(Nn,{callback:Y});case 2:return Object(X.jsx)(Gn,{callback:Y});case 3:return Object(X.jsx)(Xn,{callback:Y});default:throw new Error("Unknown step")}}(u),Object(X.jsxs)("div",{className:e.buttons,children:[0!==u&&Object(X.jsx)(R.a,{onClick:function(){2===u&&(_(),K()),h(u-1)},className:e.button,children:"Back"}),Object(X.jsx)(R.a,{variant:"contained",color:"primary",onClick:function(){var e=!1;if(0===u&&(""===p.exchange||""===p.apiKey||""===p.apiSecret?e=!0:K()),1===u){var t=p.portfolio.find((function(e){return e.coin===p.basecoin}));t||(e=!0),t&&0===Number(t.distribution)&&(e=!0)}3===u&&(0===p.botname.length&&(e=!0,l("Bot name must be defined",{variant:"error",autoHideDuration:8e3,action:H})),0===Number(p.threshold)&&(e=!0,l("Threshold must be defined",{variant:"error",autoHideDuration:8e3,action:H})),""===p.cooldown&&(e=!0,l("Cooldown trigger must be defined",{variant:"error",autoHideDuration:8e3,action:H})),""===p.change24h&&(e=!0,l("Maximum 24h percentage drop must be defined",{variant:"error",autoHideDuration:8e3,action:H})),e||G.current?"tbd"===G.current?l("Still loading exchange data, please try again in a second",{variant:"warning",autoHideDuration:8e3,action:H}):!0===G.current&&l("Invalid API details, please change and try again",{variant:"error",autoHideDuration:8e3,action:H}):(S(!0),J())),3===u||e||h(u+1)},className:e.button,children:u===$n.length-1?"Save Configuration":"Next"})]})]})})]})})]})]})}var Zn,ea=Object(j.a)((function(e){return{root:{flexGrow:1},paper:{padding:e.spacing(2)}}})),ta=function(){var e=ea();return Object(X.jsx)("div",{className:e.root,children:Object(X.jsxs)(y.a,{container:!0,spacing:3,children:[Object(X.jsx)(y.a,{item:!0,xs:12,children:Object(X.jsx)(g.a,{variant:"h3",noWrap:!0,children:"Configuration"})}),Object(X.jsx)(y.a,{item:!0,xs:12,children:Object(X.jsx)(Qn,{})})]})})},na=n(490),aa=n.n(na),ca=Object(j.a)((function(e){return{root:{flexGrow:1},paper:{padding:e.spacing(2)}}})),ia=function(e){var t=ca();return Object(X.jsx)("div",{className:t.root,children:Object(X.jsxs)(y.a,{container:!0,item:!0,spacing:3,direction:"column",justify:"flex-start",alignItems:"flex-start",children:[Object(X.jsx)(y.a,{item:!0,xs:12,children:Object(X.jsx)(g.a,{variant:"h3",noWrap:!0,children:"Support Us"})}),Object(X.jsx)(y.a,{item:!0,xs:12,children:Object(X.jsxs)(I.a,{style:{minWidth:"750px",maxWidth:"1000px"},className:t.paper,children:[Object(X.jsxs)("p",{children:["We hope that you're enjoying Balance Bot. The Balance Bot team develops the application in their spare time, and they're not getting paid for the work they do. Their wish is to ",Object(X.jsx)("b",{children:"keep Balance Bot for free forever"}),". And you can help."]}),Object(X.jsxs)("p",{children:["If you're an enthusiastic Balance Bot user, please considering contributing through the options listed ",Object(X.jsx)(N.a,{href:"https://hodlerhacks.com/balance-bot/support-us/",target:"_blank",rel:"noopener",color:"secondary",children:"here"}),". Thank you so much! ",Object(X.jsx)(aa.a,{fontSize:"small",color:"secondary"})]}),Object(X.jsxs)("p",{children:["Donations are anonymous, but feel free to let us know about your generosity and ",Object(X.jsx)(N.a,{href:"https://t.me/hodlerhacks",target:"_blank",rel:"noopener",color:"secondary",children:"send us a message"}),"."]})]})})]})})},ra=[{path:"portfolio",sidebarName:"Portfolio",icon:re.a,component:Ct},{path:"performance",sidebarName:"Performance",icon:de.a,component:Et},{path:"coins",sidebarName:"Coin Analysis",icon:se.a,component:Mt},{path:"history",sidebarName:"Event History",icon:be.a,component:Yt}],oa=[{path:"configuration",sidebarName:"Configuration",icon:he.a,component:ta},{path:"support",sidebarName:"Support Us",icon:Oe.a,component:ia}],sa=n(846),la=n(499),da=n.n(la),ja=n(500),ba=n.n(ja),ua=n(165),ha=n(308),xa=n.n(ha),Oa=n(859),fa=80,pa=40,ma=8,ga=40,va=100,ya=16,wa=64,ka=Object(j.a)((function(e){return{root:{display:"flex"},appBar:{zIndex:e.zIndex.drawer+1},logo:{maxWidth:60,padding:10},outlinedButton:{width:fa,height:pa,border:"1px solid rgba(128, 128, 128, 0.5)",padding:"6px 8px",margin:"4px 4px",borderRadius:"4px",color:"currentColor",textTransform:"none","&:hover":{border:"1px solid currentColor",backgroundColor:"rgba(0, 0, 0, 0.08)"}},filledButton:{width:fa,height:pa,border:"1px solid currentColor",padding:"6px 8px",margin:"4px 4px",borderRadius:"4px",color:"currentColor",backgroundColor:"rgba(5, 5, 5, 0.08)",textTransform:"none","&:hover":{border:"1px solid currentColor",backgroundColor:"rgba(5, 5, 5, 0.08)"}},invisibleFiller:{width:fa,height:pa,border:"none",padding:"6px 8px",margin:"4px 4px",color:"rgba(0, 0, 0, 0)",backgroundColor:"rgba(0, 0, 0, 0)"},botselectordrawer:{width:"100%",flexShrink:0},botselectordrawerPaper:{width:"100%",height:wa},drawer:{width:240,flexShrink:0},drawerPaper:{width:240,height:"100%"},drawerContainer:{overflow:"auto"},settingsPaper:{width:"100%",height:"100%"},content:{justify:"flex-start",alignItems:"flex-start",flexGrow:1,padding:e.spacing(2)},form:{width:"100%",marginTop:e.spacing(1)},footer:{marginTop:"auto",backgroundColor:"#000000"},bottomPush:{position:"fixed",width:"100%",bottom:0,paddingBottom:0,zIndex:e.zIndex.drawer+1},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"},bottomPush2:{position:"fixed",bottom:0,paddingBottom:70},smallScreenToggles:{maxWidth:"100%",bottom:0,paddingBottom:0,paddingTop:24}}})),Ca=function(){var e=window.location.pathname.match(/bot[0-9]{3}/);return e?e[0]:null};function Sa(){return Object(X.jsx)(E.a,{color:"#FFF",height:54,p:2,children:Object(X.jsxs)(g.a,{variant:"body2",align:"center",children:["Copyright \xa9 ",Object(X.jsx)(N.a,{style:{color:"#ffffff",textDecoration:"none"},href:"https://hodlerhacks.com/",target:"_blank",rel:"noopener",children:"hodlerhacks.com"})," ",(new Date).getFullYear()]})})}function Fa(e){var t=ka(),n=e.bots,a=e.show,i=e.windowWidth,r=e.switchBot,o=Ca(),s=i-ya,l=Math.floor(s/(fa+ma));l>n.length&&(l=n.length);var j=Math.ceil(n.length/l);wa=16+j*(pa+ma),Zn=l*fa+(l-1)*ma;var b=j>1&&j!==n.length?l-n.length%l:0;b<0&&(b=0);var u=[];u.push.apply(u,Object(d.a)(n));for(var h=0;h<b;h++)u.push({handle:"filler"});return Object(X.jsx)(Oa.a,{className:t.botselectordrawer,anchor:"top",open:a,onOpen:function(){},onClose:function(){},classes:{paper:t.botselectordrawerPaper},children:Object(X.jsx)("div",{style:{width:s,display:"flex",justifyContent:"center"},children:Object(X.jsx)("div",{style:{margin:8,width:Zn,display:"flex",justifyContent:"center",flexWrap:"wrap"},children:u.map((function(e,n){return n%l===0?Object(X.jsx)(c.a.Fragment,{children:Object(X.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:u.slice(n,n+l).map((function(e){return e.handle===o?Object(X.jsx)(Na,{title:e.botname,children:Object(X.jsx)(R.a,{className:t.filledButton,onClick:function(){},children:e.botID})},e.botID):"filler"!==e.handle?Object(X.jsx)(Na,{title:e.botname,children:Object(X.jsx)(R.a,{className:t.outlinedButton,onClick:function(){return r(e)},children:e.botID})},e.botID):Object(X.jsx)("div",{className:t.invisibleFiller})}))})},n):null}))})})})}var Na=Object(b.a)((function(e){return{tooltip:{backgroundColor:e.palette.common.white,color:"rgba(0, 0, 0, 0.87)",boxShadow:e.shadows[1],fontSize:12}}}))(A.a);function Pa(){var e=Object(S.h)(),t=ua.version,n=ua.version,i=Object(a.useRef)(!1),r=K("mode","light"),d=Object(o.a)(r,2),j=d[0],N=d[1],M=Object(a.useContext)(J),A=Object(o.a)(M,2),q=A[0],L=A[1],z=Object(a.useContext)(te),G=Object(o.a)(z,2),_=G[0],Y=G[1],V=Object(a.useContext)($)[0],Q=Object(a.useState)("manual"),ee=Object(o.a)(Q,2),ne=ee[0],ce=ee[1],ie=Object(a.useContext)(Z),re=Object(o.a)(ie,2),oe=re[0],se=oe.status,le=oe.serverversion,de=oe.environment,je=oe.servertime,be=oe.access,ue=oe.publicKey,he=oe.userid,xe=oe.validInstallation,Oe=re[1],fe=Object(a.useState)(!1),pe=Object(o.a)(fe,2),me=pe[0],ge=pe[1],ve=Object(a.useState)(!1),ye=Object(o.a)(ve,2),we=ye[0],ke=ye[1],Ce=Object(a.useState)(!0),Se=Object(o.a)(Ce,2),Fe=Se[0],Ne=Se[1],Pe=Object(a.useState)(!1)[1],Ie=Object(a.useState)(window.location.pathname.includes("/configuration")),Ee=Object(o.a)(Ie,2),De=Ee[0],Be=Ee[1],Te=Object(a.useState)(0),Me=Object(o.a)(Te,2),Ue=Me[0],Re=Me[1],We=Object(a.useState)(0),Ae=Object(o.a)(We,2),qe=Ae[0],Le=Ae[1],ze=Object(a.useState)(!1),Ge=Object(o.a)(ze,2),He=Ge[0],_e=Ge[1],Ye=K("latest-version",t)||"0.0.0",Ke=Object(o.a)(Ye,2),Xe=Ke[0],Ve=Ke[1],$e=K("last-msg",0),Qe=Object(o.a)($e,2),Ze=Qe[0],et=Qe[1],tt=Object(a.useState)({number:0,title:"",message:"",lock:!1}),nt=Object(o.a)(tt,2),at=nt[0],ct=nt[1],it=Object(a.useState)(!1),rt=Object(o.a)(it,2),ot=rt[0],st=rt[1],lt=Object(a.useState)("sm"),dt=Object(o.a)(lt,2),jt=dt[0],bt=dt[1],ut=Object(a.useState)("#fff"),ht=Object(o.a)(ut,2),xt=ht[0],Ot=ht[1],ft=Object(a.useState)(!1),pt=Object(o.a)(ft,2),wt=pt[0],kt=pt[1],Ct=Object(a.useContext)(ae)[0],St=Object(a.useRef)(Ze),Ft=Object(a.useRef)(!1),Nt=Object(a.useState)(Ca()),Pt=Object(o.a)(Nt,2),It=Pt[0],Et=Pt[1],Dt=function(e){return It?Object(S.f)("/:bot/:page",{bot:It,page:e}):""};Object(a.useEffect)((function(){return Pe("disconnected"===se&&0!==Object.keys(V).length),function(){}}),[se]),Object(a.useEffect)((function(){var e=window.location.origin.includes("localhost");return he&&(xa.a.init("6b67f3d61ee94b8f5c80b4affef4c4d9",{host:"api-eu.mixpanel.com"}),xa.a.identify(he),xa.a.track("Dashboard",{localhost:e})),function(){}}),[he]),Object(a.useEffect)((function(){return document.title="BB | Bot Dashboard",window.addEventListener("storage",(function(){var e=localStorage.getItem("mode");N(e);var t=localStorage.getItem("latest-version");Ve(t);var n=localStorage.getItem("last-msg");if(n!==St.current){St.current=n;var a=[];_.forEach((function(e){e.number>n&&a.push(e)})),Y(a)}})),function(){}}),[]),Object(a.useEffect)((function(){return Ne("connected"!==se||0===Object.keys(V).length),0!==Object.keys(V).length&&(Ft.current=!0),function(){}}),[se,V]),Object(a.useEffect)((function(){return document.title="BB | ".concat(V.botname),ce(V.headless?"auto":"manual"),L(V.fiat),function(){}}),[V]),Object(a.useEffect)((function(){var t=e.listen((function(e){Be(e.pathname.includes("/configuration")),Et(Ca())}));return function(){t()}}),[e]),Object(a.useEffect)((function(){return ke(le&&"0.0"!==le&&le!==t),function(){}}),[le]);var Bt=function(e,t){for(var n=t.split("."),a=e.split("."),c=0;c<a.length;c++){var i=~~a[c],r=~~n[c];if(i>r)return!0;if(i<r)return!1}return!1};Object(a.useEffect)((function(){var e=100,n=100;return Bt(Xe,t)&&(e+=140),be&&be.token&&(e+=50,n+=50),Re(e),Le(n),function(){}}),[Xe,t,be]);var Tt=ka(),Mt=function(e){N("light"===j?"dark":"light")},Ut=function(e){Je&&Je.emit("store-fiat",e,be.token)},Rt=function(e){"EUR"===q?(L("USD"),Ut("USD")):(L("EUR"),Ut("EUR"))},Wt=function(e){var t="auto"===ne?"manual":"auto",n="auto"===t;ce(t),Je&&be.allow&&Je.emit("store-headless",{headless:n},be.token)},At=Object(u.a)({palette:{type:j}}),Lt=Object(b.a)({root:{"&:hover":{backgroundColor:"transparent"},"&:click":{backgroundColor:"#f00"},justifyContent:"flex-start"}})(R.a),zt=function(){Je&&Je.emit("logout",be.token),Oe({status:se,serverversion:le,servertime:je,access:{allow:!1,reason:"logged out",token:null},publicKey:ue})},Gt=Object(a.useState)(!1),Ht=Object(o.a)(Gt,2),_t=Ht[0],Yt=Ht[1],Kt=function(){Yt(!0)},Xt=function(e){_e(e)},Jt=function(){i.current=!0,function(){Zt.apply(this,arguments)}()},Vt=function(){ge(!0)},$t=function(){ge(!1)},Qt=function(){var e=Object(l.a)(Object(s.a)().mark((function e(t){var n,a;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.target.parentElement.id,st(!1),a=_.slice(1,_.length),Y(a),Je&&Je.emit("confirm-message",n,be.token),et(n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function Zt(){return(Zt=Object(l.a)(Object(s.a)().mark((function e(){return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Je&&Je.emit("get-messages",be.token),i.current&&(Ot("#ff9800"),setTimeout((function(){Ot("#fff")}),1500)),i.current=!1;case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(a.useEffect)((function(){if(_.length>0){var e=_[0];if(e.bbvNew&&Ve(e.bbvNew),"any"===e.bbvReceive||n.startsWith(e.bbvReceive)){var t=!!e.bbvNew&&n>=e.bbvNew;if(t){Je&&Je.emit("confirm-message",e.number,be.token);var a=_.slice(1,_.length);Y(a)}else{if(null===e.dialogWidth){var c=e.message.length;bt(c<400?"sm":c<800?"md":c<3e3?"lg":"xl")}else bt(e.dialogWidth);var i={number:e.number,title:e.title,message:e.message,width:e.dialogWidth,lock:e.lock,updated:t};ct(i),st(!0)}}else{Je&&Je.emit("confirm-message",e.number,be.token);var r=_.slice(1,_.length);Y(r)}}else st(!1)}),[_]);var en=Object(a.useState)(0),tn=Object(o.a)(en,2),nn=tn[0],an=tn[1];Object(a.useEffect)((function(){function e(){an(window.innerWidth)}return window.addEventListener("resize",e),e(),function(){window.removeEventListener("resize",e)}}),[an]),Object(a.useEffect)((function(){var e=function(e){var t;wt?e.clientY>0&&e.clientY<=wa?kt(!0):kt(!1):(t=nn<600?qe:Ue,e.clientY>0&&e.clientY<=wa&&e.clientX>va&&e.clientX<nn-t-ga?kt(!0):kt(!1))};return window.addEventListener("mousemove",e),function(){window.removeEventListener("mousemove",e)}}),[nn,Ue,wt]);var cn,rn=function(e){var t=e.showToolbar;return Object(X.jsxs)(y.a,{item:!0,xs:12,children:[t&&Object(X.jsx)(p.a,{}),"initial"!==V.configstate&&"recovery"!==V.configstate&&"loading-canceled"!==V.configstate?Object(X.jsxs)("div",{className:Tt.drawerContainer,children:[Object(X.jsx)(m.a,{children:ra.map((function(e,t){return Object(X.jsx)(F.b,{to:Dt(e.path),style:{textDecoration:"none"},onClick:function(){return Xt(!1)},children:Object(X.jsxs)(w.a,{button:!0,children:[Object(X.jsx)(k.a,{children:Object(X.jsx)(e.icon,{})}),Object(X.jsx)(C.a,{primary:e.sidebarName,primaryTypographyProps:{variant:"button",color:"textPrimary"}})]},e.sidebarName)},t)}))}),Object(X.jsx)(v.a,{}),oa.map((function(e,t){return Object(X.jsx)(F.b,{to:Dt(e.path),style:{textDecoration:"none"},onClick:function(){return Xt(!1)},children:Object(X.jsxs)(w.a,{button:!0,children:[Object(X.jsx)(k.a,{children:Object(X.jsx)(e.icon,{})}),Object(X.jsx)(C.a,{primary:e.sidebarName,primaryTypographyProps:{variant:"button",color:"textPrimary"}})]},e.sidebarName)},t)}))]}):Object(X.jsxs)("div",{className:Tt.drawerContainer,children:[Object(X.jsx)(m.a,{children:ra.map((function(e,t){return Object(X.jsx)(S.a,{to:Dt("configuration"),style:{textDecoration:"none"},onClick:function(){return Xt(!1)},children:Object(X.jsxs)(w.a,{button:!0,children:[Object(X.jsx)(k.a,{children:Object(X.jsx)(e.icon,{})}),Object(X.jsx)(C.a,{primary:e.sidebarName,primaryTypographyProps:{variant:"button",color:"textPrimary"}})]},e.sidebarName)},t)}))}),Object(X.jsx)(v.a,{}),oa.slice(0,1).map((function(e,t){return Object(X.jsx)(F.b,{to:Dt(e.path),style:{textDecoration:"none"},onClick:function(){return Xt(!1)},children:Object(X.jsxs)(w.a,{button:!0,children:[Object(X.jsx)(k.a,{children:Object(X.jsx)(e.icon,{})}),Object(X.jsx)(C.a,{primary:e.sidebarName,primaryTypographyProps:{variant:"button",color:"textPrimary"}})]},e.sidebarName)},t)})),oa.slice(1,oa.length).map((function(e,t){return Object(X.jsx)(S.a,{to:Dt("configuration"),style:{textDecoration:"none"},onClick:function(){return Xt(!1)},children:Object(X.jsxs)(w.a,{button:!0,children:[Object(X.jsx)(k.a,{children:Object(X.jsx)(e.icon,{})}),Object(X.jsx)(C.a,{primary:e.sidebarName,primaryTypographyProps:{variant:"button",color:"textPrimary"}})]},e.sidebarName)},t)}))]})]})};return Object(X.jsxs)(h.a,{theme:At,children:[we?Object(X.jsxs)(mt.a,{open:!0,fullWidth:!0,maxWidth:"sm",children:[Object(X.jsx)(vt.a,{children:Object(X.jsxs)(yt.a,{children:[Object(X.jsx)(g.a,{variant:"overline",color:"secondary",children:"New version has been installed"}),Object(X.jsx)(yt.a,{}),Object(X.jsx)(g.a,{variant:"overline",color:"textPrimary",children:"Please refresh the browser window to load the latest version"})]})}),Object(X.jsx)(gt.a,{children:Object(X.jsx)(R.a,{variant:"contained",onClick:function(){window.location.reload()},color:"secondary",children:"Refresh"})})]}):Object(X.jsxs)(c.a.Fragment,{children:[Object(X.jsx)(B.a,{className:Tt.backdrop,open:Fe,children:Object(X.jsx)(T.a,{color:"inherit"})}),V.onepagemode&&Object(X.jsx)(Fa,{bots:Ct,show:wt,windowWidth:nn,switchBot:function(e){var t,n=window.location.href,a=n.indexOf("/bot"),c=-1===a?n:n.substring(0,a);"Bot Manager"===e.botname?t=c.includes(":4000")?c.replace(":4000",":5000"):c:t=c+"/"+e.handle;V.onepagemode?window.open(t,"_self","noopener"):window.open(t,"_blank","noopener")}}),Object(X.jsxs)(mt.a,{open:ot,fullWidth:!0,maxWidth:jt,children:[Object(X.jsx)(qt.a,{id:"dialog-title",children:at.title}),Object(X.jsx)(vt.a,{children:Object(X.jsx)(yt.a,{id:"dialog-description",children:Object(X.jsx)(sa.a,{linkTarget:"_blank",children:at.message})})}),Object(X.jsx)(gt.a,{children:Object(X.jsx)(R.a,{variant:"contained",id:at.number,onClick:Qt,color:"secondary",disabled:at.lock,children:"Close"})})]}),Object(X.jsxs)("div",{className:Tt.root,children:[Object(X.jsx)(f.a,{}),Object(X.jsx)(O.a,{position:"fixed",className:Tt.appBar,children:Object(X.jsxs)(p.a,{children:[Object(X.jsx)(D.a,{lgUp:!0,children:Object(X.jsx)(y.a,{item:!0,children:Object(X.jsx)(Na,{title:"Menu",children:Object(X.jsx)(H.a,{onClick:function(){return Xt(!0)},children:Object(X.jsx)(da.a,{style:{color:"#fff"}})})})})}),Object(X.jsx)(W.a,{onClick:function(){var e=window.location.origin;e.includes(":4000")&&(e=e.replace(":4000",":5000")),V.onepagemode?window.open(e,"_self","noopener"):window.open(e,"_blank","noopener")},children:Object(X.jsx)("img",{src:"/logo192.png",alt:"Balance Bot Logo",className:Tt.logo})}),Object(X.jsxs)(y.a,{container:!0,direction:"row",alignItems:"center",nowrap:"true",children:[Object(X.jsxs)(y.a,{item:!0,xs:!0,zeroMinWidth:!0,children:[Object(X.jsx)(E.a,{mt:1.5,children:Object(X.jsxs)(g.a,{variant:"h6",color:"inherit",noWrap:!0,children:["Balance Bot | ",(cn=V.botname,cn&&"^"===cn.charAt(0)&&(cn=cn.slice(1)),cn)]})}),Object(X.jsx)(E.a,{mt:-1,style:{color:"#959FD6"},children:Object(X.jsxs)(g.a,{variant:"caption",color:"inherit",noWrap:!0,children:["v",t," ","staging"===de&&"(staging)"]})})]}),Object(X.jsx)(D.a,{xsDown:!0,children:Object(X.jsx)(Ia,{wdt:Ue,update:Bt(Xe,t),logout:be&&be.token,onLogout:zt,handleResetHistory:Kt,handleUpdateOpen:Vt,checkForUpdate:Jt,checkIconColor:xt})}),Object(X.jsx)(D.a,{smUp:!0,children:Object(X.jsx)(Ia,{wdt:qe,update:Bt(Xe,t),logout:be&&be.token,onLogout:zt,handleResetHistory:Kt,handleUpdateOpen:Vt,checkForUpdate:Jt,checkIconColor:xt})})]})]})}),Object(X.jsx)(D.a,{mdDown:!0,children:Object(X.jsx)(x.a,{className:Tt.drawer,variant:"permanent",children:Object(X.jsx)(I.a,{className:Tt.drawerPaper,children:Object(X.jsxs)(y.a,{container:!0,direction:"column",children:[Object(X.jsx)(rn,{showToolbar:!0}),Object(X.jsx)("div",{className:Tt.bottomPush2,children:Object(X.jsxs)(E.a,{pl:1,children:[Object(X.jsxs)(y.a,{container:!0,item:!0,xs:12,alignItems:"center",justify:"flex-end",style:{width:"200px"},children:[Object(X.jsx)(y.a,{item:!0,xs:8,children:Object(X.jsx)(U.a,{onChange:Mt,value:j,control:Object(X.jsx)(P.a,{checked:"dark"===j,color:"secondary"}),label:Object(X.jsx)(g.a,{variant:"button",children:"Light\xa0\xa0\xa0\xa0"}),labelPlacement:"start"})}),Object(X.jsx)(y.a,{item:!0,xs:4,children:Object(X.jsx)(Lt,{disableRipple:!0,onClick:Mt,children:Object(X.jsx)(g.a,{variant:"button",children:"Dark"})})})]}),Object(X.jsxs)(y.a,{container:!0,item:!0,xs:12,alignItems:"center",justify:"flex-end",style:{width:"200px"},children:[Object(X.jsx)(y.a,{item:!0,xs:8,children:Object(X.jsx)(U.a,{onChange:Rt,value:q,disabled:!V.enableFiatToggle,control:Object(X.jsx)(P.a,{checked:"EUR"===q,color:"secondary"}),label:Object(X.jsx)(g.a,{variant:"button",children:"USD\xa0\xa0\xa0\xa0\xa0\xa0\xa0"}),labelPlacement:"start"})}),Object(X.jsx)(y.a,{item:!0,xs:4,children:Object(X.jsx)(Lt,{disableRipple:!0,onClick:Rt,children:Object(X.jsx)(g.a,{variant:"button",children:"EUR"})})})]}),Object(X.jsxs)(y.a,{container:!0,item:!0,xs:12,alignItems:"center",justify:"flex-end",style:{width:"200px"},children:[Object(X.jsx)(y.a,{item:!0,xs:8,children:Object(X.jsx)(U.a,{disabled:De,onChange:Wt,value:ne,control:Object(X.jsx)(P.a,{checked:"auto"===ne,color:"secondary"}),label:Object(X.jsx)(g.a,{variant:"button",children:"Manual"}),labelPlacement:"start"})}),Object(X.jsx)(y.a,{item:!0,xs:4,children:Object(X.jsx)(Lt,{disableRipple:!0,disabled:De,onClick:Wt,children:Object(X.jsx)(g.a,{variant:"button",children:"Auto"})})})]})]})})]})})})}),Object(X.jsx)(D.a,{lgUp:!0,children:He&&Object(X.jsx)(x.a,{className:Tt.drawer,open:He,onClose:function(){return Xt(!1)},variant:"temporary",children:Object(X.jsxs)(I.a,{className:Tt.drawerPaper,children:[Object(X.jsx)(y.a,{item:!0,children:Object(X.jsx)(Na,{title:"Close",children:Object(X.jsx)(H.a,{onClick:function(){return Xt(!1)},children:Object(X.jsx)(ba.a,{})})})}),Object(X.jsx)(y.a,{container:!0,direction:"column",children:Object(X.jsx)(rn,{showToolbar:!1})})]})})}),Object(X.jsxs)("main",{className:Tt.content,children:[Object(X.jsx)(p.a,{}),Object(X.jsxs)(S.d,{children:[Ft.current&&Object(X.jsx)(S.b,{exact:!0,path:"/:bot",children:"initial"!==V.configstate&&"recovery"!==V.configstate&&"loading-canceled"!==V.configstate?Object(X.jsx)(S.a,{to:Dt("portfolio")}):Object(X.jsx)(S.a,{to:Dt("configuration")})}),ra.map((function(e,t){return Object(X.jsx)(S.b,{exact:!0,path:"/:bot/"+e.path,component:e.component},t)})),oa.map((function(e,t){return Object(X.jsx)(S.b,{exact:!0,path:"/:bot/"+e.path,component:e.component},t)}))]}),Object(X.jsx)(D.a,{lgUp:!0,children:Object(X.jsx)("div",{className:Tt.smallScreenToggles,children:Object(X.jsx)(I.a,{className:Tt.settingsPaper,children:Object(X.jsx)(E.a,{pl:1,children:Object(X.jsxs)(y.a,{container:!0,direction:"column",children:[Object(X.jsxs)(y.a,{container:!0,item:!0,xs:12,alignItems:"center",justify:"flex-end",style:{maxWidth:"220px"},children:[Object(X.jsx)(y.a,{item:!0,xs:7,children:Object(X.jsx)(U.a,{onChange:Mt,value:j,control:Object(X.jsx)(P.a,{checked:"dark"===j,color:"secondary"}),label:Object(X.jsx)(g.a,{variant:"button",children:"Light\xa0\xa0\xa0\xa0"}),labelPlacement:"start"})}),Object(X.jsx)(y.a,{item:!0,xs:3,children:Object(X.jsx)(Lt,{disableRipple:!0,onClick:Mt,children:Object(X.jsx)(g.a,{variant:"button",children:"Dark"})})}),Object(X.jsx)(y.a,{item:!0,xs:2})]}),Object(X.jsxs)(y.a,{container:!0,item:!0,xs:12,alignItems:"center",justify:"flex-end",style:{maxWidth:"220px"},children:[Object(X.jsx)(y.a,{item:!0,xs:7,children:Object(X.jsx)(U.a,{onChange:Rt,value:q,disabled:!V.enableFiatToggle,control:Object(X.jsx)(P.a,{checked:"EUR"===q,color:"secondary"}),label:Object(X.jsx)(g.a,{variant:"button",children:"USD\xa0\xa0\xa0\xa0\xa0\xa0\xa0"}),labelPlacement:"start"})}),Object(X.jsx)(y.a,{item:!0,xs:3,children:Object(X.jsx)(Lt,{disableRipple:!0,onClick:Rt,children:Object(X.jsx)(g.a,{variant:"button",children:"EUR"})})}),Object(X.jsx)(y.a,{item:!0,xs:2})]}),Object(X.jsxs)(y.a,{container:!0,item:!0,xs:12,alignItems:"center",justify:"flex-end",style:{maxWidth:"220px"},children:[Object(X.jsx)(y.a,{item:!0,xs:7,children:Object(X.jsx)(U.a,{disabled:De,onChange:Wt,value:ne,control:Object(X.jsx)(P.a,{checked:"auto"===ne,color:"secondary"}),label:Object(X.jsx)(g.a,{variant:"button",children:"Manual"}),labelPlacement:"start"})}),Object(X.jsx)(y.a,{item:!0,xs:3,children:Object(X.jsx)(Lt,{disableRipple:!0,disabled:De,onClick:Wt,children:Object(X.jsx)(g.a,{variant:"button",children:"Auto"})})}),Object(X.jsx)(y.a,{item:!0,xs:2})]})]})})})})})]})]}),Object(X.jsx)("div",{style:{height:70},children:"\xa0"}),Object(X.jsx)(mt.a,{open:me,onClose:$t,children:xe?Object(X.jsxs)(X.Fragment,{children:[Object(X.jsx)(qt.a,{children:"Confirm Update"}),Object(X.jsx)(vt.a,{children:Object(X.jsx)(yt.a,{children:Object(X.jsx)(g.a,{color:"textPrimary",children:"Do you want to update to the latest version? Balance Bot will be unavailable until the update has completed. This may take a few minutes. Just wait for the Bot Manager to reappear."})})}),Object(X.jsxs)(gt.a,{children:[Object(X.jsx)(R.a,{variant:"contained",onClick:$t,color:"light"===j?"primary":"secondary",children:"Cancel"}),Object(X.jsx)(R.a,{variant:"contained",onClick:function(){ge(!1),Je&&Je.emit("update-bb",be.token)},color:"light"===j?"primary":"secondary",children:"Update"})]})]}):Object(X.jsxs)(X.Fragment,{children:[Object(X.jsx)(qt.a,{children:"Manual Update Required"}),Object(X.jsxs)(vt.a,{children:[Object(X.jsx)(yt.a,{children:Object(X.jsx)(g.a,{color:"textPrimary",children:"Your installation does not support updating from the browser. Please perform a manual update."})}),Object(X.jsx)(yt.a,{children:Object(X.jsxs)(g.a,{color:"textPrimary",children:["Possible causes:",Object(X.jsxs)("ol",{children:[Object(X.jsx)("li",{children:"You haven't installed BB using the official installer"}),Object(X.jsx)("li",{children:"You're running BB in a Docker container"})]})]})})]}),Object(X.jsx)(gt.a,{children:Object(X.jsx)(R.a,{variant:"contained",onClick:$t,color:"light"===j?"primary":"secondary",children:"OK"})})]})})]}),Object(X.jsxs)(mt.a,{open:_t,onClose:function(){Yt(!1)},children:[Object(X.jsx)(qt.a,{children:"Confirm Bot History Deletion"}),Object(X.jsx)(vt.a,{children:Object(X.jsx)(yt.a,{children:Object(X.jsx)(g.a,{color:"textPrimary",children:"Are you sure you want to delete your bot's history? This will delete all performance data, coin analysis data, the event history, and liquidity settings. Other bot configuration settings will be kept."})})}),Object(X.jsxs)(gt.a,{children:[Object(X.jsx)(R.a,{variant:"contained",onClick:function(){Yt(!1)},color:"light"===j?"primary":"secondary",children:"Cancel"}),Object(X.jsx)(R.a,{variant:"contained",onClick:function(){Yt(!1),Je&&Je.emit("reset-history",be.token)},color:"light"===j?"primary":"secondary",children:"Delete History"})]})]}),Object(X.jsx)("div",{className:Tt.bottomPush,children:Object(X.jsx)("footer",{className:Tt.footer,children:Object(X.jsx)(y.a,{container:!0,alignItems:"center",children:Object(X.jsx)(y.a,{item:!0,xs:!1,sm:12,md:12,children:Object(X.jsx)(Sa,{})})})})})]})}var Ia=function(e){var t=e.wdt,n=e.update,a=e.logout,c=e.onLogout,i=e.handleResetHistory,r=e.handleUpdateOpen,o=e.checkForUpdate,s=e.checkIconColor;return Object(X.jsxs)(y.a,{item:!0,xs:!0,container:!0,direction:"row",alignItems:"center",justify:"flex-end",style:{maxWidth:t},children:[n?Object(X.jsx)(D.a,{xsDown:!0,children:Object(X.jsx)(y.a,{item:!0,style:{width:"130px"},children:Object(X.jsx)(M.a,{onClick:r,label:"Update Available",style:{backgroundColor:"#959FD6",color:"white"}})})}):Object(X.jsx)(D.a,{xsDown:!0,children:Object(X.jsx)(y.a,{item:!0,style:{width:"40px"},children:Object(X.jsx)(Na,{title:"Check for updates",children:Object(X.jsx)(H.a,{onClick:o,children:Object(X.jsx)(G.a,{style:{color:s}})})})})}),Object(X.jsx)(y.a,{item:!0,children:Object(X.jsx)(Na,{title:"Delete History",children:Object(X.jsx)(H.a,{onClick:i,children:Object(X.jsx)(Y.a,{style:{color:"#ffffff"}})})})}),a&&Object(X.jsx)(y.a,{item:!0,style:{width:"48px"},children:Object(X.jsx)(Na,{title:"Logout",children:Object(X.jsx)(H.a,{onClick:c,children:Object(X.jsx)(L.a,{style:{color:"#ffffff"}})})})})]})},Ea=Object(j.a)((function(e){return{root:{display:"flex"},appBar:{zIndex:e.zIndex.drawer+1},logo:{maxWidth:60,padding:10},content:{justify:"flex-start",alignItems:"flex-start",flexGrow:1,padding:e.spacing(2)},footer:{marginTop:"auto",backgroundColor:"#000000"},bottomPush:{position:"fixed",width:"100%",bottom:0,paddingBottom:0,zIndex:e.zIndex.drawer+1}}}));function Da(){return Object(X.jsx)(E.a,{color:"#FFF",height:54,p:2,children:Object(X.jsxs)(g.a,{variant:"body2",align:"center",children:["Copyright \xa9 ",Object(X.jsx)(N.a,{style:{color:"#ffffff",textDecoration:"none"},href:"https://hodlerhacks.com/",target:"_blank",rel:"noopener",children:"hodlerhacks.com"})," ",(new Date).getFullYear()]})})}function Ba(){var e=ua.version,t=K("mode","light")[0],n=Object(a.useContext)(Z)[0],i=n.status,r=n.access,s=n.publicKey,l=Object(a.useState)(!1),d=Object(o.a)(l,2),j=d[0],b=d[1],x=Object(a.useState)("initial state"),m=Object(o.a)(x,2),v=m[0],w=m[1],k=Object(a.useState)(!1),C=Object(o.a)(k,2),S=C[0],F=C[1],N=Object(a.useState)(""),P=Object(o.a)(N,2),I=P[0],D=P[1],B=Object(a.useState)(""),T=Object(o.a)(B,2),M=T[0],U=T[1];Object(a.useEffect)((function(){return document.title="BB | Bot Dashboard",function(){}}),[]),Object(a.useEffect)((function(){return"disconnected"===i?setTimeout((function(){"disconnected"===i&&F(!0)}),2e3):F(!1),function(){}}),[i]),Object(a.useEffect)((function(){return r&&(b(!1),F(!1),!0===r.allow?w(""):!1===r.allow&&"login required"===r.reason?(w("Please log in"),b(!0)):!1===r.allow&&"2FA required"===r.reason?w("Add your client's IP address to the IP whitelist, or temporarily allow access through your Telegram bot"):!1===r.allow&&"temporary access not allowed"===r.reason?w("Add your client's IP address to the IP whitelist"):!1===r.allow&&"access timeout"===r.reason?L():!1===r.allow&&"temporary access timeout"===r.reason?w("Your temporary access has expired"):!1===r.allow&&"2FA login required"===r.reason?w("2FA required - approve login through your Telegram bot"):!1===r.allow&&"invalid credentials"===r.reason?(w("Incorrect username or password - please try again"),b(!0)):!1===r.allow&&"2FA login rejected"===r.reason?w("2FA login was rejected"):!1===r.allow&&"temporary access rejected"===r.reason?w("Temporary access was rejected"):!1===r.allow&&"logged out"===r.reason?L():!1===r.allow&&"initial state"===r.reason?(w("initial state"),setTimeout((function(){"initial state"===r.reason&&F(!0)}),4e3)):!1===r.allow&&"reload"===r.reason&&L()),function(){}}),[r]);var W=Object(u.a)({palette:{type:t}}),A=Ea(),q=function(e){"username"===e.target.id&&D(e.target.value),"password"===e.target.id&&U(e.target.value)},L=function(){window.location.reload()},z=Object(Jn.b)(),G=z.enqueueSnackbar,H=z.closeSnackbar,_=function(e){return Object(X.jsx)(c.a.Fragment,{children:Object(X.jsx)(R.a,{style:{color:"#bbbbbb"},onClick:function(){H(e)},children:"Dismiss"})})};return Object(X.jsxs)(h.a,{theme:W,children:[Object(X.jsx)(c.a.Fragment,{children:Object(X.jsxs)("div",{className:A.root,children:[Object(X.jsx)(f.a,{}),Object(X.jsx)(O.a,{position:"fixed",className:A.appBar,children:Object(X.jsxs)(p.a,{children:[Object(X.jsx)("img",{src:"/logo192.png",alt:"Balance Bot Logo",className:A.logo}),Object(X.jsx)(y.a,{container:!0,direction:"row",alignItems:"center",nowrap:"true",children:Object(X.jsxs)(y.a,{item:!0,xs:!0,zeroMinWidth:!0,children:[Object(X.jsx)(E.a,{mt:1.5,children:Object(X.jsx)(g.a,{variant:"h6",color:"inherit",noWrap:!0,children:"Balance Bot"})}),Object(X.jsx)(E.a,{mt:-1,style:{color:"#959FD6"},children:Object(X.jsxs)(g.a,{variant:"caption",color:"inherit",noWrap:!0,children:["v",e]})})]})})]})}),Object(X.jsx)("main",{className:A.content,children:Object(X.jsx)(p.a,{})})]})}),"disconnected"===i&&"initial state"!==v?Object(X.jsxs)(mt.a,{open:S,fullWidth:!0,maxWidth:"sm",children:[Object(X.jsxs)(vt.a,{children:[Object(X.jsx)(yt.a,{children:Object(X.jsx)(g.a,{variant:"overline",color:"secondary",children:"The connection with the server has been lost"})}),Object(X.jsx)(yt.a,{children:Object(X.jsx)(g.a,{variant:"overline",color:"textPrimary",children:"Your bot may have stopped running"})})]}),Object(X.jsx)(gt.a,{children:Object(X.jsx)(R.a,{variant:"contained",onClick:L,color:"secondary",children:"Retry"})})]}):j?Object(X.jsxs)(c.a.Fragment,{children:[Object(X.jsx)(f.a,{}),Object(X.jsxs)(mt.a,{open:!0,fullWidth:!0,maxWidth:"sm",children:[Object(X.jsx)(qt.a,{children:v}),Object(X.jsxs)(vt.a,{children:[Object(X.jsx)(Ut.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"username",label:"Username",name:"username",onChange:q}),Object(X.jsx)(Ut.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",onChange:q}),Object(X.jsx)(E.a,{m:3}),Object(X.jsx)(R.a,{fullWidth:!0,variant:"contained",color:"secondary",onClick:function(){var e=(new Date).getTime();Je&&Je.emit("login",{username:I,password:_e(s,"".concat(M,"|@|").concat(e))})},children:"Log In"}),Object(X.jsx)(E.a,{m:3}),Object(X.jsx)(R.a,{fullWidth:!0,onClick:function(){Je&&Je.emit("reset-password"),G("See your Telegram bot to reset password",{variant:"success",autoHideDuration:8e3,action:_})},color:"default",style:{fontSize:"10px"},children:"Forgot password"})]})]})]}):"initial state"===v?Object(X.jsxs)(mt.a,{open:S,fullWidth:!0,maxWidth:"sm",children:[Object(X.jsxs)(vt.a,{children:[Object(X.jsx)(yt.a,{children:Object(X.jsx)(g.a,{variant:"overline",color:"secondary",children:"Balance Bot seems to be down"})}),Object(X.jsx)(yt.a,{children:Object(X.jsx)(g.a,{variant:"overline",color:"textPrimary",children:"Please check your server and try again"})})]}),Object(X.jsx)(gt.a,{children:Object(X.jsx)(R.a,{variant:"contained",onClick:L,color:"secondary",children:"Retry"})})]}):!r.allow&&Object(X.jsxs)(mt.a,{open:!0,fullWidth:!0,maxWidth:"sm",children:[Object(X.jsxs)(vt.a,{children:[Object(X.jsx)(yt.a,{children:Object(X.jsx)(g.a,{variant:"overline",color:"secondary",children:"Notification"})}),Object(X.jsx)(yt.a,{children:Object(X.jsx)(g.a,{variant:"overline",color:"textPrimary",children:v})})]}),Object(X.jsx)(gt.a,{children:Object(X.jsx)(R.a,{variant:"contained",onClick:L,color:"secondary",children:"Back"})})]}),Object(X.jsx)("div",{className:A.bottomPush,children:Object(X.jsx)("footer",{className:A.footer,children:Object(X.jsx)(y.a,{container:!0,alignItems:"center",children:Object(X.jsx)(y.a,{item:!0,xs:!1,sm:12,md:12,children:Object(X.jsx)(Da,{})})})})})]})}var Ta=function(){var e=Object(a.useContext)(Z)[0],t=e.status,n=e.access,c=Object(a.useState)(!0),i=Object(o.a)(c,2),r=i[0],s=i[1];return Object(a.useEffect)((function(){return s(!n.allow||"disconnected"===t),function(){}}),[n,t]),Object(X.jsx)("div",{children:r?Object(X.jsx)(Ba,{}):Object(X.jsx)(Pa,{})})},Ma=n(521),Ua=n(504),Ra=n.n(Ua);function Wa(){var e=ua.version,t=Object(a.useContext)(Z),n=Object(o.a)(t,2),i=n[0],r=i.status,j=i.serverversion,b=n[1],u=Object(a.useContext)(te)[1],h=Object(a.useContext)(Ve),x=Object(o.a)(h,2),O=x[0],f=x[1],p=Object(a.useContext)(Qe),m=Object(o.a)(p,2),g=m[0],v=m[1],y=Object(a.useContext)($)[1],w=Object(a.useContext)(Kt)[1],k=Object(a.useContext)(Ot)[1],C=Object(a.useContext)(Jt)[1],S=Object(a.useContext)(ae)[1],F=Object(a.useState)("0.0.0.0"),N=Object(o.a)(F,2),P=N[0],I=N[1],E=Object(Jn.b)(),D=E.enqueueSnackbar,B=E.closeSnackbar;function T(){return(T=Object(l.a)(Object(s.a)().mark((function e(){var t,n,a,c;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("0.0.0.0"!==P){e.next=17;break}if(!(t=window.location.origin).includes("localhost")){e.next=12;break}return e.next=5,Ra.a.v4();case 5:if(e.t0=e.sent,e.t0){e.next=8;break}e.t0="";case 8:n=e.t0,I(n),e.next=17;break;case 12:a=/http(s)*:\/\//i,t=t.replace(a,""),c=t.search(":3000"),t=t.slice(0,c),I(t);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){T.apply(this,arguments)}();var M=function(e){return Object(X.jsx)(c.a.Fragment,{children:Object(X.jsx)(R.a,{style:{color:"#bbbbbb"},onClick:function(){B(e)},children:"Dismiss"})})};return Object(a.useEffect)((function(){return"starting"===r&&"0.0"!==j&&e!==j?window.location.reload():"starting"===r&&b((function(e){return Object(fe.a)(Object(fe.a)({},e),{},{status:"connected"})})),function(){}}),[r,j]),Object(a.useEffect)((function(){return b((function(e){return Object(fe.a)(Object(fe.a)({},e),{},{serverip:P})})),function(){}}),[P]),Object(a.useEffect)((function(){return function(){var e=O.portfolio?JSON.parse(O.portfolio):[],t=[];if(0!==g.length){var n=g[g.length-1].coins;e.forEach((function(e){var a=n.find((function(t){return t.coin===e.coin}));a&&t.push(Object(fe.a)(Object(fe.a)({},a),{},{number:e.number,price:e.last}))}));var a=Object(d.a)(g);a[a.length-1].coins=t,a[a.length-1].eur=O.eur,a[a.length-1].usd=O.usd,v(a)}}(),function(){}}),[O]),Object(a.useEffect)((function(){return Je.on("bots",(function(e){var t=[{botID:"Bot Mng",botname:"Bot Manager",handle:""}];e.forEach((function(e){"enabled"!==e.status&&"new"!==e.status||t.push({botID:"Bot ".concat(e.botID),botname:e.botname,handle:"bot".concat(e.botID)})})),S(t)})),function(){Je.off("bots")}}),[]),Object(a.useEffect)((function(){return Je.on("status",(function(e){b((function(t){return Object(fe.a)(Object(fe.a)({},t),e)}))})),Je.on("balances",(function(e){f(e.balances),b((function(t){return Object(fe.a)(Object(fe.a)({},t),{},{status:"connected",updated:e.balances.time})}))})),Je.on("performance",(function(e){v(e)})),Je.on("configuration",(function(e){y(e),w(Object(fe.a)(Object(fe.a)({},e),{},{recreate:!1}))})),Je.on("message",(function(e){u(e)})),Je.on("starting-balances",(function(e){k(e)})),Je.on("exchanges",(function(e){C(e)})),Je.on("event",(function(e){!function(e,t){var n="order"===e.type?"info":e.type;D(t,{variant:n,autoHideDuration:8e3,action:M})}(e.log,e.summary)})),Je.on("disconnect",(function(e){f({}),b((function(e){return Object(fe.a)(Object(fe.a)({},e),{},{status:"disconnected"})}))})),function(){Je.disconnect()}}),[]),null}var Aa=function(){return Object(a.useEffect)((function(){var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-XBDNDRB9LJ",document.body.appendChild(e);var t=document.createElement("script");t.text="window.dataLayer = window.dataLayer || [];\n    function gtag() { dataLayer.push(arguments); }\n    gtag('js', new Date());\n    gtag('config', 'G-XBDNDRB9LJ');",document.body.appendChild(t)}),[]),Object(X.jsx)(F.a,{children:Object(X.jsx)(Jn.a,{maxSnack:5,anchorOrigin:{vertical:"bottom",horizontal:"left"},TransitionComponent:Ma.a,children:Object(X.jsx)(ee,{children:Object(X.jsx)(ne,{children:Object(X.jsx)($e,{children:Object(X.jsx)(Ze,{children:Object(X.jsx)(Q,{children:Object(X.jsx)(Xt,{children:Object(X.jsx)(ft,{children:Object(X.jsx)(V,{children:Object(X.jsx)(jn,{children:Object(X.jsx)(ce,{children:Object(X.jsxs)(Vt,{children:[Object(X.jsx)(Wa,{}),Object(X.jsx)(f.a,{}),Object(X.jsx)(Ta,{})]})})})})})})})})})})})})})};r.a.render(Object(X.jsx)(c.a.StrictMode,{children:Object(X.jsx)(Aa,{})}),document.getElementById("root"))}},[[730,1,2]]]);
//# sourceMappingURL=main.cfcd6949.chunk.js.map