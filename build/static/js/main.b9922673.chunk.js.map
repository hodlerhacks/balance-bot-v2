{"version":3,"sources":["services/LocalStoreService.js","context/FiatContext.js","context/ConfigurationContext.js","context/ServerContext.js","context/MessageContext.js","context/BotsContext.js","components/BalancesTable.js","components/PieChart.js","context/UuidContext.js","context/SocketContext.js","context/BalancesContext.js","context/PerformanceContext.js","components/StatusView.js","components/TimelineView.js","context/StartingBalanceContext.js","components/PerformanceSummary.js","pages/Portfolio.js","components/LineChart.js","pages/PPerformance.js","components/LineChartCoins.js","pages/CoinAnalysis.js","components/HistoryTable.js","pages/EventHistory.js","context/ConfigurationInputContext.js","context/ExchangesContext.js","components/HtmlToolTip.js","components/ConfigP1.js","context/CoinContext.js","components/ConfigP2.js","components/ConfigP3.js","components/ColorBar.js","components/ConfigP4.js","components/ConfigMain.js","pages/Configuration.js","pages/Main.js","pages/Support.js","routes/Routes.js","pages/Public.js","pages/Switch.js","services/SocketService.js","App.js","index.js"],"names":["useLocalStore","localStorageKey","defaultValue","React","useState","localStorage","getItem","value","setValue","useEffect","setItem","FiatContext","createContext","FiatProvider","props","fiatStore","fiat","setFiat","Provider","children","ConfigurationContext","ConfigurationProvider","configuration","setConfiguration","ServerContext","ServerProvider","status","updated","serverversion","environment","servertime","access","allow","reason","token","serverip","publicKey","userid","server","setServer","MessageContext","MessageProvider","messages","setMessages","BotsContext","BotsProvider","bots","setBots","useTableHeadStyles","makeStyles","theme","headcolor","palette","type","backgroundColor","EnhancedTableHead","checkbox","headCells","onSelectAllClick","onSort","numSelected","rowCount","headless","classes","Checkbox","indeterminate","checked","onChange","inputProps","TableHead","TableRow","className","TableCell","padding","map","headCell","align","disablePadding","style","minWidth","width","TableSortLabel","active","direction","order","onClick","id","label","useToolbarStyles","root","paddingLeft","spacing","paddingRight","highlight","color","secondary","main","lighten","light","text","primary","dark","title","flex","EnhancedTableToolbar","selected","ordertype","portfolio","handleOrder","setSelected","basecoin","length","headerstr","Toolbar","clsx","Typography","variant","component","join","Button","startIcon","selectedCoins","i","selectedCoin","find","coin","push","useStyles","paper","marginBottom","table","paddingTop","paddingBottom","tableRow","height","visuallyHidden","border","clip","margin","overflow","position","top","formatResult","num","dec","result","includes","arr","split","sig","Math","round","Number","toFixed","BalancesTable","useTheme","balances","threshold","useContext","onOrder","handleTableUpdate","onUpdate","setHeadCells","rows","setRows","botID","window","location","pathname","match","defaultsort","sortby","sortorder","JSON","stringify","sortPrefsJSON","setSortPrefsJSON","parse","sortPrefs","setSortPrefs","reload","bot","newSortPrefs","useRef","addEventListener","event","key","sortPrefsUpdate","newValue","newHeadCells","header","current","sortTable","newRows","sort","a","b","tooSmallAmount","Paper","Box","pt","pl","pr","pb","Skeleton","animation","TableContainer","Table","size","newSelecteds","n","filter","newprefs","index","findIndex","updateSortPrefs","TableBody","row","isItemSelected","indexOf","labelId","sidechip","tradelabel","trade","tradechip","Chip","disabled","sidelabel","orderstatus","side","reverse","distribution","target","error","valid","warning","success","info","hover","selectedIndex","newSelected","concat","slice","handleClick","role","aria-checked","tabIndex","scope","number","last","delta","PieChart","mode","data","tooltip","container","background","right","bottom","left","innerRadius","padAngle","cornerRadius","colors","scheme","colorscheme","borderWidth","borderColor","from","modifiers","radialLabelsSkipAngle","radialLabelsTextColor","radialLabelsLinkColor","arcLinkLabelsSkipAngle","arcLinkLabelsTextColor","timestamp","uuid","crypt","Crypt","md","rsaStandard","socket","socketio","auth","encryptedUuid","Date","encrypt","getTime","BalancesContext","BalancesProvider","setBalances","PerformanceContext","PerformanceProvider","performance","setPerformance","flexGrow","StatusView","statuschip","Grid","alignItems","item","xs","stepper","TimelineView","numdays","startdate","date1","timeDiff","now","adjusted","timeshift","add","hours","shiftedDate","getFullYear","getMonth","toString","padStart","getDate","Stepper","alternativeLabel","activeStep","connector","ColorlibConnector","Step","StepLabel","StepIconComponent","ColorlibStepIcon","withStyles","backgroundImage","completed","line","borderRadius","StepConnector","useColorlibStepIconStyles","zIndex","display","justifyContent","boxShadow","icons","1","2","String","icon","StartingBalanceContext","StartingBalanceProvider","startingBalance","setStartingBalance","startingBalances","change","performanceSummary","setPerformanceSummary","dataloaded","setDataloaded","currency","leftTxt","rightTxt","usdBasecoins","currentValue","forEach","eur","usd","hodlvalue","coins","c","netoffset","starting","abs","backdrop","drawer","CircularProgressWithLabel","CircularProgress","Portfolio","open","setOpen","progress","setProgress","remainingSymbols","setRemainingSymbols","timeout","setTimeout","cancel","setCancel","setPortfolio","on","emit","Object","keys","Backdrop","Dialog","fullWidth","maxWidth","DialogContent","DialogContentText","noWrap","p","symbol","DialogActions","lg","Hidden","xsDown","sm","LineChart","data1","data2","setTitle","enoughData","getTheme","axis","ticks","stroke","fill","legend","crosshair","getAxis2","legendOffset","legendPosition","input","point","serieId","xFormatted","yFormatted","xScale","format","useUTC","precision","xFormat","yScale","min","max","stacked","yFormat","curve","axisTop","axisRight","axisBottom","axisLeft","enablePoints","enableGridX","enableGridY","useMesh","crosshairType","lineWidth","Alert","severity","StyledButton","Performance","setData1","setData2","graph","setGraph","toggleGraph","values","fiatValues","fiatChange","valuesNorm","fiatValuesNorm","changeNorm","fiatChangeNorm","netvalues","netchange","netvaluesfiat","netchangefiat","newdata1","newdata2","computeGraphs","getPerf","day","normalize","multiplier","fiatValue","price","offset","initialValue","initialFiatValue","initialValueNorm","initialFiatValueNorm","valueNorm","fiatValueNorm","netvalue","netvaluefiat","initial","x","date","y","basecoinnorm","fiatnorm","net","netfiat","justify","FormControlLabel","control","labelPlacement","disableRipple","Fragment","factor","prices","legends","anchor","translateX","translateY","itemsSpacing","itemDirection","itemWidth","itemHeight","itemOpacity","symbolSize","symbolShape","symbolBorderColor","itemTextColor","effects","itemBackground","CoinAnalysis","StyledTableCell","head","common","black","white","body","fontSize","StyledTableRow","action","errortext","HistoryTable","openDelete","setOpenDelete","currentPage","setCurrentPage","total","eventdata","setEventdata","page","setFilter","logs","history","setHistory","hist","log","time","handleHistoryChange","summary","off","onClose","DialogTitle","ToggleButtonGroup","newTypes","aria-label","ToggleButton","noValidate","autoComplete","TextField","e","Pagination","count","ceil","shape","newPage","EventHistory","ConfigurationInputContext","ConfigurationInputProvider","configurationInput","setConfigurationInput","ExchangesContext","ExchangesProvider","exchanges","setExchanges","HtmlTooltip","typography","pxToRem","Tooltip","textinput","select","ConfigP1","exchangesWithPassword","exchange","setExchange","apiKey","setApiKey","apiSecret","setApiSecret","apiPassword","setApiPassword","requirePassword","setRequirePassword","merged","mid","firstHalf","secondHalf","onInput","callback","field","handleTooltipClose","gutterBottom","ClickAwayListener","onClickAway","m","Link","href","rel","disableFocusListener","disableHoverListener","disableTouchListener","interactive","IconButton","FormControl","InputLabel","Select","MenuProps","required","name","configstate","MenuItem","FormHelperText","hidden","CoinContext","CoinProvider","basecoins","setBasecoins","iOSBoxShadow","MySlider","thumb","marginTop","marginLeft","valueLabel","track","rail","opacity","mark","markActive","Slider","marks","headheight","cell","cell2","textinput2","LightTooltip","shadows","ConfigP2","pf","newPortfolio","portfolioReceived","setPortfolioReceived","coinsReceived","setCoinsReceived","setBasecoin","initialOffset","deleteCoin","setDeleteCoin","excludedChangeRef","excludedChange","offsetChangeRef","offsetChange","getPortfolio","isMounted","excluded","base","usercoins","numCoins","slider","parseFloat","prevState","updateCurrentDistribution","totalValue","c2","currentDistribution","distr","resetPortfolio","toggleExcluded","handleSlider","original","match2","maxSlider","totalSlider","numSlider","remainingSlider","numCoinsZero","labelFormatter","splice","confirmDelete","elevation","aria-labelledby","allSelected","isSelected","step","valueLabelDisplay","valueLabelFormat","Input","disableUnderline","textAlign","test","replace","handleOffset","onBlur","handleBlur","handleDelete","columns","headerName","editable","valueFormatter","highlightSelected","today","outofbounce","ConfigP3","pickerOpen","setPickerOpen","initRef","liquidityRef","cloneDeep","liquidity","liqIndexRef","selectedDateRef","balanceDay","setBalanceDay","autoliquidity","setAutoliquidity","liq","inp","changes","liqcoin","suggested","checkLiquidityChanges","acceptDateChange","handleCurrent","updateBalanceDay","indate","isBefore","perf","yesterday","subDays","newChanges","newStartPerformance","newLiquidity","openTT","setOpenTT","utils","DateFnsUtils","DatePicker","onOpen","disableToolbar","disableFuture","minDate","onAccept","renderDay","selectedDay","dayInCurrentMonth","dayComponent","d","dates","autoHeight","density","disableColumnSelector","disableColumnMenu","hideFooter","hideFooterPagination","hideFooterRowCount","onEditCellChangeCommitted","newIndex","newBalance","ColorBar","numcolors","range","layout","valueScale","enableLabel","isInteractive","barAriaLabel","formControl","selectEmpty","ConfigP4","botname","setBotname","showname","setShowname","setThreshold","setColorscheme","setOrdertype","setHeadless","cooldown","setCooldown","change24h","setChange24h","emojibuy","emojiBuy","setEmojiBuy","emojisell","emojiSell","setEmojiSell","helperText","InputProps","startAdornment","InputAdornment","fromCodePoint","marginRight","breakpoints","up","buttons","button","steps","ConfigMain","useSnackbar","enqueueSnackbar","closeSnackbar","setActiveStep","coinsLoaded","setCoinsLoaded","setInput","message","dialog2","setDialog2","openDialog2","setOpenDialog2","dialogShownRef","recreate","setPortfolioListener","autoHideDuration","handleInput","newInput","storeConfiguration","parseInt","liqlast","encryptedInput","CssBaseline","Error","getStepContent","selectorWidth","Configuration","Support","routesUp","path","sidebarName","PieChartIcon","BarChartIcon","PPerformance","ShowChartIcon","HistoryIcon","routesDown","SettingsIcon","FavoriteIcon","selectorHeight","appBar","logo","outlinedButton","textTransform","filledButton","invisibleFiller","botselectordrawer","flexShrink","botselectordrawerPaper","drawerPaper","drawerContainer","settingsPaper","content","form","footer","bottomPush","bottomPush2","smallScreenToggles","getBotPath","Copyright","textDecoration","BotSelector","show","windowWidth","switchBot","currentBot","availableWidth","numBotsPerRow","floor","numRows","fillers","botsJustified","handle","SwipeableDrawer","flexWrap","botRow","Main","useHistory","version","pckg2","bbv","checkNow","setMode","setFiatStore","modus","setModus","validInstallation","openUpdate","setOpenUpdate","outdated","setOutdated","setDisconnected","modusSwitchDisabled","setModusSwitchDisabled","flexWidthDown","setFlexWidthDown","flexWidthUp","setFlexWidthUp","overlayMenu","setOverlayMenu","latestVersion","setLatestVersion","lastMsg","setLastMsg","lock","dialog","setDialog","openDialog","setOpenDialog","setMaxWidth","checkIconColor","setcheckIconColor","showBotSelector","setShowBotSelector","lastRef","botPath","setBotPath","getPath","generatePath","localhost","origin","mixpanel","init","host","identify","document","newFiat","submitFiat","newMode","newVersion","newLast","newMessages","msg","unlisten","listen","isNewerVersion","newVer","oldVer","oldParts","newParts","wdtDown","wdtUp","handleDarkmode","handleFiat","handleModus","newModus","createMuiTheme","onLogout","openResetConfirm","setOpenResetConfirm","handleResetHistory","toggleOverlayMenu","checkForUpdate","getMessages","handleUpdateOpen","handleUpdateClose","handleCloseDialog","parentElement","bbvNew","bbvReceive","startsWith","alreadyUpdated","dialogWidth","textLength","newDialogMsg","setWindowWidth","handleResize","innerWidth","removeEventListener","handleMouseMove","wdt","clientY","clientX","SideMenu","showToolbar","List","prop","to","ListItem","ListItemIcon","ListItemText","primaryTypographyProps","Divider","ThemeProvider","onepagemode","openUrl","currentUrl","baseUrl","substring","linkTarget","AppBar","lgUp","ButtonBase","src","alt","nowrap","zeroMinWidth","mt","charAt","update","logout","smUp","mdDown","Drawer","exact","FlexToolbar","Public","loginNow","setLoginNow","accessMsg","setAccessMsg","serverDown","setServerDown","username","setUsername","password","setPassword","handleRefresh","onLoginInput","Switch","goPublic","setGoPublic","SocketService","setServerip","url","publicIp","v4","ipv4","regex","search","determineServerIP","newPerformance","updatePerformance","config","sb","ex","handleEvent","disconnect","App","script1","createElement","async","appendChild","script2","maxSnack","anchorOrigin","vertical","horizontal","TransitionComponent","Fade","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.b9922673.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nexport const useLocalStore = (localStorageKey, defaultValue) => {\r\n  const [value, setValue] = React.useState(\r\n    localStorage.getItem(localStorageKey) || defaultValue\r\n  );\r\n\r\n  React.useEffect(() => {\r\n    localStorage.setItem(localStorageKey, value);\r\n  }, [value]);\r\n\r\n  return [value, setValue];\r\n};","import React, { useState, createContext } from 'react';\r\nimport { useLocalStore } from \"../services/LocalStoreService\";\r\n\r\nexport const FiatContext = createContext();\r\n\r\nexport const FiatProvider = (props) => {\r\n    const fiatStore = useLocalStore('fiat', 'EUR')[0];\r\n    const [fiat, setFiat] = useState(fiatStore);\r\n\r\n    return (\r\n        <FiatContext.Provider value={[fiat, setFiat]}>\r\n            {props.children}\r\n        </FiatContext.Provider>\r\n    )\r\n}","import React, { useState, createContext } from 'react';\r\n\r\nexport const ConfigurationContext = createContext();\r\n\r\nexport const ConfigurationProvider = (props) => {\r\n    const [configuration, setConfiguration] = useState({});\r\n\r\n    return (\r\n        <ConfigurationContext.Provider value={[configuration, setConfiguration]}>\r\n            {props.children}\r\n        </ConfigurationContext.Provider>\r\n    )\r\n}","import React, { useState, createContext } from 'react';\r\n\r\nexport const ServerContext = createContext();\r\n\r\nexport const ServerProvider = (props) => {\r\n    const [server, setServer] = useState({\r\n        status: 'disconnected',\r\n        updated: '---',\r\n        serverversion: '0.0',\r\n        environment: 'production',\r\n        servertime: '---',\r\n        access: { allow: false, reason: 'initial state', token: null },\r\n        serverip: '0.0.0.0',\r\n        publicKey: '',\r\n        userid: null,\r\n    });\r\n\r\n    return (\r\n        <ServerContext.Provider value={[server, setServer]}>\r\n            {props.children}\r\n        </ServerContext.Provider>\r\n    )\r\n}","import React, { useState, createContext } from 'react';\r\n\r\nexport const MessageContext = createContext();\r\n\r\nexport const MessageProvider = (props) => {\r\n    const [messages, setMessages] = useState([]);\r\n\r\n    return (\r\n        <MessageContext.Provider value={[messages, setMessages]}>\r\n            {props.children}\r\n        </MessageContext.Provider>\r\n    )\r\n}","import React, { useState, createContext } from 'react';\r\n\r\nexport const BotsContext = createContext();\r\n\r\nexport const BotsProvider = (props) => {\r\n    const [bots, setBots] = useState([]);\r\n\r\n    return (\r\n        <BotsContext.Provider value={[bots, setBots]}>\r\n            {props.children}\r\n        </BotsContext.Provider>\r\n    )\r\n}","import React, { useState, useContext, useEffect, useRef } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport clsx from 'clsx';\r\nimport { lighten, makeStyles } from '@material-ui/core/styles';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport TableSortLabel from '@material-ui/core/TableSortLabel';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Chip from '@material-ui/core/Chip';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport Button from '@material-ui/core/Button';\r\nimport BackupIcon from '@material-ui/icons/Backup';\r\nimport { useTheme } from '@material-ui/core/styles';\r\nimport { ConfigurationContext } from '../context/ConfigurationContext';\r\nimport { useLocalStore } from \"../services/LocalStoreService\";\r\nimport Skeleton from '@material-ui/lab/Skeleton';\r\nimport Box from '@material-ui/core/Box';\r\n\r\nconst useTableHeadStyles = makeStyles((theme) => ({\r\n    headcolor:\r\n        theme.palette.type === 'light'\r\n            ? {\r\n                backgroundColor: '#aaaaaa',\r\n            }\r\n            : {\r\n                backgroundColor: '#777777',\r\n            },\r\n}));\r\n\r\nfunction EnhancedTableHead(props) {\r\n    const { headCells, onSelectAllClick, onSort, numSelected, rowCount, headless } = props;\r\n    const classes = useTableHeadStyles();\r\n\r\n    let checkbox;\r\n    if (!headless) {\r\n        checkbox = <Checkbox\r\n            indeterminate={numSelected > 0 && numSelected < rowCount}\r\n            checked={rowCount > 0 && numSelected === rowCount}\r\n            onChange={onSelectAllClick}\r\n            inputProps={{ 'aria-label': 'select coins' }}\r\n        />\r\n    } else {\r\n        checkbox = null;\r\n    }\r\n\r\n    return (\r\n        <TableHead>\r\n            <TableRow className={classes.headcolor}>\r\n                <TableCell padding=\"checkbox\">\r\n                    {checkbox}\r\n                </TableCell>\r\n                {headCells.map((headCell) => (\r\n                    <TableCell\r\n                        key={headCell.id}\r\n                        align={headCell.align}\r\n                        padding={headCell.disablePadding ? 'none' : 'default'}\r\n                        style={{ minWidth: headCell.width }}\r\n                    >\r\n                        <TableSortLabel\r\n                            active={headCell.active}\r\n                            direction={headCell.order}\r\n                            onClick={() => { onSort(headCell.id) }}>\r\n                            {headCell.label}\r\n                        </TableSortLabel>\r\n                    </TableCell>\r\n                ))}\r\n            </TableRow>\r\n        </TableHead>\r\n    );\r\n}\r\n\r\nEnhancedTableHead.propTypes = {\r\n    headCells: PropTypes.array.isRequired,\r\n    classes: PropTypes.object.isRequired,\r\n    numSelected: PropTypes.number.isRequired,\r\n    onSelectAllClick: PropTypes.func.isRequired,\r\n    onSort: PropTypes.func.isRequired,\r\n    rowCount: PropTypes.number.isRequired,\r\n    headless: PropTypes.bool.isRequired,\r\n};\r\n\r\nconst useToolbarStyles = makeStyles((theme) => ({\r\n    root: {\r\n        paddingLeft: theme.spacing(2),\r\n        paddingRight: theme.spacing(1),\r\n    },\r\n    highlight:\r\n        theme.palette.type === 'light'\r\n            ? {\r\n                color: theme.palette.secondary.main,\r\n                backgroundColor: lighten(theme.palette.secondary.light, 0.85),\r\n            }\r\n            : {\r\n                color: theme.palette.text.primary,\r\n                backgroundColor: theme.palette.secondary.dark,\r\n            },\r\n    title: {\r\n        flex: '1 1 100%',\r\n    },\r\n}));\r\n\r\nconst EnhancedTableToolbar = (props) => {\r\n    const classes = useToolbarStyles();\r\n    const { selected, headless, ordertype, portfolio, handleOrder, setSelected, basecoin } = props;\r\n    const numSelected = selected.length;\r\n\r\n    function onOrder() {\r\n        setSelected([]);\r\n        let selectedCoins = [];\r\n        for (let i = 0; i < selected.length; i++) {\r\n            let selectedCoin = portfolio.find(({ coin }) => coin === selected[i]);\r\n            if (selectedCoin.coin !== basecoin) selectedCoins.push(selectedCoin);\r\n        }\r\n\r\n        handleOrder(selectedCoins);\r\n    }\r\n\r\n    // If config parameters are not available in time, then hide the header string\r\n    const headerstr = ordertype ?\r\n        !headless ? `Select coins to manually submit order | ${ordertype} orders` : `Running in automatic mode | ${ordertype} orders` : '';\r\n\r\n    return (\r\n        <Toolbar\r\n            className={clsx(classes.root, {\r\n                [classes.highlight]: numSelected > 0,\r\n            })}\r\n        >\r\n            {numSelected > 0 ? (\r\n                <Typography className={classes.title} color=\"inherit\" variant=\"subtitle1\" component=\"div\">\r\n                    {numSelected} {(numSelected === 1) ? 'coin' : 'coins'} selected: {selected.join(', ')}\r\n                </Typography>\r\n            ) : (\r\n                <Typography className={classes.title} variant=\"subtitle1\" id=\"tableTitle\" component=\"div\">\r\n                    {headerstr}\r\n                </Typography>\r\n            )}\r\n\r\n            {(numSelected > 0) && (\r\n                <Button variant=\"contained\" color=\"secondary\" style={{ width: '220px' }} startIcon={<BackupIcon />} onClick={onOrder}>\r\n                    Submit Order\r\n                </Button>\r\n            )}\r\n        </Toolbar>\r\n    );\r\n};\r\n\r\n// EnhancedTableToolbar.propTypes = {\r\n//     selected: PropTypes.array.isRequired,\r\n//     headless: PropTypes.bool.isRequired,\r\n//     ordertype: PropTypes.string.isRequired,\r\n//     portfolio: PropTypes.array.isRequired,\r\n//     handleOrder: PropTypes.func.isRequired,\r\n//     setSelected: PropTypes.func.isRequired,\r\n//     basecoin: PropTypes.string.isRequired,\r\n// };\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        width: '100%',\r\n    },\r\n    paper: {\r\n        width: '100%',\r\n        marginBottom: theme.spacing(2),\r\n    },\r\n    table: {\r\n        minWidth: 750,\r\n        \"& .MuiTableCell-sizeSmall\": {\r\n            paddingTop: '9px',\r\n            paddingBottom: '9px',\r\n        }\r\n    },\r\n    tableRow: {\r\n        height: 50,\r\n    },\r\n    visuallyHidden: {\r\n        border: 0,\r\n        clip: 'rect(0 0 0 0)',\r\n        height: 1,\r\n        margin: -1,\r\n        overflow: 'hidden',\r\n        padding: 0,\r\n        position: 'absolute',\r\n        top: 20,\r\n        width: 1,\r\n    },\r\n}));\r\n\r\nfunction formatResult(num, dec) {\r\n    // Complex logic needed to have fixed decimals, avoid scientific notation, and to deal with numbers that already have scientific notation\r\n    let result;\r\n    if (!(\"\" + num).includes(\"e\")) {\r\n        result = +(Math.round(num + \"e+\" + dec) + \"e-\" + dec);\r\n    } else {\r\n        let arr = (\"\" + num).split(\"e\");\r\n        let sig = \"\"\r\n        if (+arr[1] + dec > 0) {\r\n            sig = \"+\";\r\n        }\r\n        result = +(Math.round(+arr[0] + \"e\" + sig + (+arr[1] + dec)) + \"e-\" + dec);\r\n    }\r\n\r\n    // let len = result.toString().split('.')[0].length;\r\n    // return Number(result).toFixed(dec + 1 - len);\r\n    return Number(result).toFixed(dec);\r\n}\r\n\r\nexport default function BalancesTable(props) {\r\n    const classes = useStyles();\r\n    const [selected, setSelected] = useState([]);\r\n    const theme = useTheme();\r\n    const balances = props.balances;\r\n    const threshold = balances.threshold;\r\n    const configuration = useContext(ConfigurationContext)[0];\r\n    const headless = configuration.headless || false;\r\n    const handleOrder = props.onOrder;\r\n    const handleTableUpdate = props.onUpdate;\r\n\r\n    const [headCells, setHeadCells] = useState([\r\n        { id: 'coin', align: 'left', width: '60px', disablePadding: true, label: 'Coin', active: false, order: 'asc' },\r\n        { id: 'number', align: 'right', width: '100px', disablePadding: false, label: 'Amount', active: false, order: 'asc' },\r\n        { id: 'last', align: 'right', width: '110px', disablePadding: false, label: 'Price', active: false, order: 'asc' },\r\n        { id: 'value', align: 'right', width: '110px', disablePadding: false, label: 'Value', active: false, order: 'asc' },\r\n        { id: 'distribution', align: 'right', width: '80px', disablePadding: false, label: 'Distr', active: false, order: 'asc' },\r\n        { id: 'target', align: 'right', width: '80px', disablePadding: false, label: 'Target', active: false, order: 'asc' },\r\n        { id: 'delta', align: 'right', width: '80px', disablePadding: false, label: 'Delta', active: false, order: 'asc' },\r\n        { id: 'trade', align: 'center', width: '100px', disablePadding: false, label: 'Trade', active: false, order: 'asc' },\r\n        { id: 'side', align: 'center', width: '100px', disablePadding: false, label: 'Order', active: false, order: 'asc' },\r\n    ]);\r\n\r\n    const getBotID = () => {\r\n        const pathname = window.location.pathname;\r\n        const result = pathname.match(/bot[0-9]{3}/);\r\n        return result[0];\r\n    }\r\n\r\n    const [rows, setRows] = useState([]);\r\n\r\n    const botID = getBotID();\r\n    const defaultsort = {\r\n        botID: botID,\r\n        sortby: 'delta',\r\n        sortorder: 'asc'\r\n    };\r\n\r\n    const [sortPrefsJSON, setSortPrefsJSON] = useLocalStore('sortprefs', JSON.stringify([defaultsort]));\r\n    const [sortPrefs, setSortPrefs] = useState(JSON.parse(sortPrefsJSON));\r\n\r\n    if (!sortPrefs) window.location.reload();       // Avoid crash when cookies are cleared\r\n    let match = sortPrefs.find((bot) => bot.botID === botID);\r\n\r\n    if (!match) {\r\n        let newSortPrefs = sortPrefs;\r\n        newSortPrefs.push(defaultsort);\r\n        setSortPrefs(newSortPrefs);\r\n        setSortPrefsJSON(JSON.stringify(newSortPrefs));\r\n        match = defaultsort;\r\n    }\r\n\r\n    const sortby = useRef(match.sortby);\r\n    const sortorder = useRef(match.sortorder);\r\n\r\n    const updateSortPrefs = (newprefs) => {\r\n        let newSortPrefs = sortPrefs;\r\n        let index = newSortPrefs.findIndex((bot) => bot.botID === botID);\r\n        newSortPrefs[index] = newprefs;\r\n        setSortPrefs(newSortPrefs);\r\n        setSortPrefsJSON(JSON.stringify(newSortPrefs));\r\n    }\r\n\r\n    const sortPrefsUpdate = (newSortPrefs) => {\r\n        setSortPrefs(JSON.parse(newSortPrefs));\r\n    }\r\n\r\n    useEffect(() => {\r\n        // Listen to local store changes (when another page changes sort preferences)\r\n        window.addEventListener('storage', (event) => {\r\n            if (event.key === 'sortprefs') {\r\n                const newSortPrefs = event.newValue;\r\n                sortPrefsUpdate(newSortPrefs);\r\n            }\r\n        });\r\n\r\n        return () => {\r\n        }\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        // Update headcell to show the right sorting arrow\r\n        let newHeadCells = [...headCells];\r\n        let header = newHeadCells.find((header) => header.id === sortby.current);\r\n        header.order = sortorder.current;\r\n        header.active = true;\r\n        setHeadCells(newHeadCells);\r\n\r\n        return () => {\r\n        }\r\n    }, [sortby.current, sortorder.current]);\r\n\r\n    useEffect(() => {\r\n        sortTable();\r\n\r\n        return () => {\r\n        }\r\n    }, [balances]);\r\n\r\n    useEffect(() => {\r\n        // Remove selection if switching to automatic mode\r\n        if (headless) {\r\n            setSelected([]);\r\n        }\r\n\r\n        return () => {\r\n        }\r\n    }, [headless]);\r\n\r\n    const sortTable = () => {\r\n        let newRows = (balances.portfolio) ? JSON.parse(balances.portfolio) : [];\r\n        if (sortorder.current === 'asc')\r\n            newRows.sort((a, b) => (a[sortby.current] < b[sortby.current]) ? 1 : ((b[sortby.current] < a[sortby.current]) ? -1 : 0));\r\n        else\r\n            newRows.sort((a, b) => (a[sortby.current] > b[sortby.current]) ? 1 : ((b[sortby.current] > a[sortby.current]) ? -1 : 0));\r\n\r\n        setRows(newRows);\r\n        handleTableUpdate(newRows);\r\n    }\r\n\r\n    const handleSort = (key) => {\r\n        let newHeadCells = [...headCells];\r\n\r\n        let previous = newHeadCells.find((header) => header.id === sortby.current);\r\n        previous.active = false;\r\n\r\n        let header = newHeadCells.find((header) => header.id === key);\r\n        header.order = (header.order === 'desc') ? 'asc' : 'desc';\r\n        header.active = true;\r\n        setHeadCells(newHeadCells);\r\n\r\n        sortorder.current = header.order;\r\n        sortby.current = key;\r\n\r\n        updateSortPrefs({\r\n            botID: botID,\r\n            sortby: sortby.current,\r\n            sortorder: sortorder.current\r\n        });\r\n        sortTable();\r\n    }\r\n\r\n    const handleSelectAllClick = (event) => {\r\n        if (selected.length === 0) {\r\n            const newSelecteds = rows.map((n) => n.coin).filter(coin => coin !== configuration.basecoin);\r\n            setSelected(newSelecteds);\r\n            return;\r\n        }\r\n        setSelected([]);\r\n    };\r\n\r\n    const handleClick = (event, coin) => {\r\n        if (!headless && coin !== configuration.basecoin) {\r\n            const selectedIndex = selected.indexOf(coin);\r\n            let newSelected = [];\r\n\r\n            if (selectedIndex === -1) {\r\n                newSelected = newSelected.concat(selected, coin);\r\n            } else if (selectedIndex === 0) {\r\n                newSelected = newSelected.concat(selected.slice(1));\r\n            } else if (selectedIndex === selected.length - 1) {\r\n                newSelected = newSelected.concat(selected.slice(0, -1));\r\n            } else if (selectedIndex > 0) {\r\n                newSelected = newSelected.concat(\r\n                    selected.slice(0, selectedIndex),\r\n                    selected.slice(selectedIndex + 1),\r\n                );\r\n            }\r\n            setSelected(newSelected);\r\n        }\r\n    };\r\n\r\n    const isSelected = (coin) => selected.indexOf(coin) !== -1;\r\n    let tooSmallAmount = false;\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <Paper className={classes.paper}>\r\n                <EnhancedTableToolbar selected={selected} headless={headless} ordertype={configuration.ordertype} portfolio={rows} handleOrder={handleOrder} setSelected={setSelected} basecoin={configuration.basecoin || ''} />\r\n                {rows.length === 0 ? (\r\n                    <Box pt={2} pl={2} pr={2} pb={4}>\r\n                        <Skeleton animation=\"wave\" />\r\n                        <Skeleton animation=\"wave\" />\r\n                        <Skeleton animation=\"wave\" />\r\n                        <Skeleton animation=\"wave\" />\r\n                        <Skeleton animation=\"wave\" />\r\n                    </Box>\r\n                ) : (\r\n                    <TableContainer>\r\n                        <Table\r\n                            className={classes.table}\r\n                            size=\"small\"\r\n                        >\r\n                            <EnhancedTableHead\r\n                                classes={classes}\r\n                                headCells={headCells}\r\n                                numSelected={selected.length}\r\n                                onSelectAllClick={handleSelectAllClick}\r\n                                onSort={handleSort}\r\n                                rowCount={rows.length}\r\n                                headless={headless}\r\n                            />\r\n                            <TableBody>\r\n                                {rows.map((row, index) => {\r\n                                    const isItemSelected = isSelected(row.coin);\r\n                                    const labelId = `enhanced-table-checkbox-${index}`;\r\n                                    let sidechip = <div style={{ color: '#999999', width: '120px' }}>-</div>;\r\n                                    let tradelabel = formatResult(row.trade, 8);\r\n                                    let tradechip = <Chip label={tradelabel} style={{ backgroundColor: theme.palette.text.disabled, color: 'white', width: '120px' }} />;\r\n\r\n                                    let sidelabel = (row.orderstatus === 'none') ? row.side : row.orderstatus;\r\n                                    if (row.reverse && row.orderstatus === 'none') sidelabel += ' (reverse)';\r\n\r\n                                    if (row.side === 'sell') {\r\n                                        if (row.distribution / row.target - 1 >= threshold / 100) {\r\n                                            sidechip = <Chip label={sidelabel} style={{ backgroundColor: theme.palette.error.dark, color: 'white', width: '120px' }} />\r\n                                            if (!row.valid) {\r\n                                                tradechip = <Chip label={tradelabel} style={{ backgroundColor: theme.palette.warning.dark, color: 'white', width: '120px' }} />\r\n                                                tooSmallAmount = true;\r\n                                            }\r\n                                        } else {\r\n                                            sidechip = <Chip label={sidelabel} style={{ backgroundColor: theme.palette.text.disabled, color: 'white', width: '120px' }} />\r\n                                        }\r\n                                    } else if (row.side === 'buy') {\r\n                                        if (row.distribution / row.target - 1 <= -threshold / 100) {\r\n                                            sidechip = <Chip label={sidelabel} style={{ backgroundColor: theme.palette.success.dark, color: 'white', width: '120px' }} />\r\n                                            if (!row.valid) {\r\n                                                tradechip = <Chip label={tradelabel} style={{ backgroundColor: theme.palette.warning.dark, color: 'white', width: '120px' }} />\r\n                                                tooSmallAmount = true;\r\n                                            }\r\n                                        } else {\r\n                                            sidechip = <Chip label={sidelabel} style={{ backgroundColor: theme.palette.text.disabled, color: 'white', width: '120px' }} />\r\n                                        }\r\n                                    }\r\n\r\n                                    if (sidelabel.includes('open') || sidelabel.includes('filled') || sidelabel.includes('canceled'))\r\n                                        sidechip = <Chip label={sidelabel} style={{ backgroundColor: theme.palette.info.main, color: 'white', width: '120px' }} />\r\n\r\n                                    let checkbox;\r\n                                    if (!headless && row.coin !== configuration.basecoin) {\r\n                                        checkbox = <Checkbox\r\n                                            checked={isItemSelected}\r\n                                            inputProps={{ 'aria-labelledby': labelId }}\r\n                                        />\r\n                                    } else {\r\n                                        checkbox = null;\r\n                                    }\r\n\r\n                                    const stablecoins = ['EUR', 'USD', 'BUSD', 'TUSD', 'USDT', 'USDC', 'USDP'];\r\n\r\n                                    // Reduce number of decimals in case basecoin is a stable coin\r\n                                    const dec = (stablecoins.includes(configuration.basecoin)) ? 2 : 8;\r\n\r\n                                    return (\r\n                                        <TableRow className={classes.tableRow}\r\n                                            hover\r\n                                            onClick={(event) => handleClick(event, row.coin)}\r\n                                            role=\"checkbox\"\r\n                                            aria-checked={isItemSelected}\r\n                                            tabIndex={-1}\r\n                                            key={row.coin}\r\n                                            selected={isItemSelected}\r\n                                        >\r\n                                            <TableCell padding=\"checkbox\">\r\n                                                {checkbox}\r\n                                            </TableCell>\r\n                                            <TableCell component=\"th\" id={labelId} scope=\"row\" padding=\"none\">\r\n                                                {row.coin}\r\n                                            </TableCell>\r\n                                            <TableCell align=\"right\">{formatResult(row.number, 8)}</TableCell>\r\n                                            <TableCell align=\"right\">{formatResult(row.last, dec)}</TableCell>\r\n                                            <TableCell align=\"right\">{formatResult(row.value, dec)}</TableCell>\r\n                                            <TableCell align=\"right\">{formatResult(row.distribution, 2)}%</TableCell>\r\n                                            <TableCell align=\"right\">{formatResult(row.target, 2)}%</TableCell>\r\n                                            <TableCell align=\"right\">{formatResult(row.delta * 100, 2)}%</TableCell>\r\n                                            <TableCell align=\"right\">{tradechip}</TableCell>\r\n                                            <TableCell align=\"center\">{sidechip}</TableCell>\r\n                                        </TableRow>\r\n                                    );\r\n                                })}\r\n                            </TableBody>\r\n                        </Table>\r\n                    </TableContainer>\r\n                )}\r\n                {(tooSmallAmount) && (\r\n                    <Toolbar>\r\n                        <Typography className={classes.title} variant=\"subtitle1\" style={{ color: theme.palette.warning.dark }} component=\"div\">\r\n                            Trade amounts indicated in orange are too small to execute or exceed your available funds (when using a coin offset)\r\n                        </Typography>\r\n                    </Toolbar>\r\n                )}\r\n            </Paper>\r\n        </div>\r\n    );\r\n}","import { useContext } from 'react';\r\nimport { ResponsivePie } from '@nivo/pie';\r\nimport { useTheme } from '@material-ui/core/styles';\r\nimport { ConfigurationContext } from '../context/ConfigurationContext';\r\n\r\nexport default function PieChart(props) {\r\n    const mode = useTheme().palette.type;\r\n    const portfolio = props.portfolio || [];\r\n    const configuration = useContext(ConfigurationContext)[0];\r\n    const data = portfolio.map(function (coin) {\r\n        return {\r\n            'id': coin.coin,\r\n            'label': coin.coin,\r\n            'value': coin.distribution,\r\n        }\r\n    })\r\n\r\n    return (\r\n        <ResponsivePie\r\n            theme={{\r\n                tooltip: {\r\n                    color: (mode === 'light') ? \"#000000\" : \"#FFFFFF\",\r\n                    container: {\r\n                        background: (mode === 'light') ? \"#FFFFFF\" : \"#000000\"\r\n                    },\r\n                },\r\n            }}\r\n            data={data}\r\n            margin={{ top: 20, right: 80, bottom: 20, left: 80 }}\r\n            innerRadius={0.5}\r\n            padAngle={1}\r\n            cornerRadius={7}\r\n            colors={{ scheme: configuration ? configuration.colorscheme ? configuration.colorscheme : 'red_yellow_blue' : 'red_yellow_blue' }}\r\n            borderWidth={1}\r\n            borderColor={{ from: 'color', modifiers: [['darker', '0.2']] }}\r\n            radialLabelsSkipAngle={10}\r\n            radialLabelsTextColor={(mode === 'light') ? \"#000000\" : \"#FFFFFF\"}\r\n            radialLabelsLinkColor={{ from: 'color' }}\r\n            arcLinkLabelsSkipAngle={10}\r\n            arcLinkLabelsTextColor={(mode === 'light') ? \"#000000\" : \"#FFFFFF\"}\r\n        />\r\n    )\r\n}","import { Crypt } from 'hybrid-crypto-js';\r\n\r\nconst uuid = localStorage.getItem('uuid');\r\nconst publicKey = localStorage.getItem('publicKey');\r\n\r\nlet crypt = new Crypt({\r\n    md: 'sha256',\r\n    rsaStandard: 'RSA-OAEP',\r\n});\r\n\r\nexport const encryptedUuid = (timestamp) => {\r\n    if (uuid && publicKey && publicKey.includes('-----BEGIN PUBLIC KEY-----')) return crypt.encrypt(publicKey, `${uuid}@${timestamp.getTime()}`);\r\n    else return false;\r\n}","import socketio from \"socket.io-client\";\r\nimport { encryptedUuid } from '../context/UuidContext';\r\n\r\nexport const socket = socketio('/', {\r\n    auth: {\r\n        encryptedUuid: encryptedUuid(new Date())\r\n    }\r\n});","import React, { useState, createContext } from 'react';\r\n\r\nexport const BalancesContext = createContext();\r\n\r\nexport const BalancesProvider = (props) => {\r\n    const [balances, setBalances] = useState({});\r\n\r\n    return (\r\n        <BalancesContext.Provider value={[balances, setBalances]}>\r\n            {props.children}\r\n        </BalancesContext.Provider>\r\n    )\r\n}","import React, { useState, createContext } from 'react';\r\n\r\nexport const PerformanceContext = createContext();\r\n\r\nexport const PerformanceProvider = (props) => {\r\n    const [performance, setPerformance] = useState([]);\r\n\r\n    return (\r\n        <PerformanceContext.Provider value={[performance, setPerformance]}>\r\n            {props.children}\r\n        </PerformanceContext.Provider>\r\n    )\r\n}","import React, { useContext } from \"react\";\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { useTheme } from '@material-ui/core/styles';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Chip from '@material-ui/core/Chip';\r\nimport { ServerContext } from '../context/ServerContext';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        flexGrow: 1,\r\n    },\r\n    paper: {\r\n        padding: theme.spacing(2),\r\n        height: '68px',\r\n        minWidth: '340px',\r\n    },\r\n}));\r\n\r\nexport default function StatusView() {\r\n    const classes = useStyles();\r\n    const theme = useTheme();\r\n    const { status, updated } = useContext(ServerContext)[0];\r\n\r\n    let statuschip;\r\n    if (status === 'connected') {\r\n        statuschip = <Chip label={status} style={{ backgroundColor: theme.palette.success.dark, color: 'white', width: '90px' }} />\r\n    } else {\r\n        statuschip = <Chip label={status} style={{ backgroundColor: theme.palette.error.dark, color: 'white', width: '110px' }} />\r\n    }\r\n    return (\r\n        <Paper className={classes.paper}>\r\n            <Grid container alignItems=\"center\">\r\n                <Grid container item alignItems=\"center\" xs={7}>\r\n                    <Grid item xs={4}><Typography>Status: </Typography></Grid>\r\n                    <Grid item xs={8}>{statuschip}</Grid>\r\n                </Grid>\r\n                <Grid container item alignItems=\"center\" xs={5}>\r\n                    <Grid item xs={12}><Typography>Updated: <b>{updated && updated.split(' ')[1]}</b></Typography></Grid>\r\n                </Grid>\r\n            </Grid>\r\n        </Paper >\r\n    )\r\n}","import React, { useContext } from 'react';\r\nimport { makeStyles, withStyles } from '@material-ui/core/styles';\r\nimport clsx from 'clsx';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Stepper from '@material-ui/core/Stepper';\r\nimport Step from '@material-ui/core/Step';\r\nimport StepLabel from '@material-ui/core/StepLabel';\r\nimport ArrowForwardIosIcon from '@material-ui/icons/ArrowForwardIos';\r\nimport RadioButtonCheckedIcon from '@material-ui/icons/RadioButtonChecked';\r\nimport StepConnector from '@material-ui/core/StepConnector';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport { ConfigurationContext } from '../context/ConfigurationContext';\r\nimport { add } from 'date-fns'\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        flexGrow: 1,\r\n    },\r\n    paper: {\r\n        padding: theme.spacing(0),\r\n        height: '68px',\r\n        minWidth: '340px',\r\n    },\r\n    stepper: {\r\n        padding: theme.spacing(1),\r\n    }\r\n}));\r\n\r\nexport default function TimelineView(props) {\r\n    const classes = useStyles();\r\n\r\n    const configuration = useContext(ConfigurationContext)[0];\r\n    const performance = props.data || [];\r\n\r\n    let numdays = '--';\r\n    let startdate = '----/--/--';\r\n\r\n    const shiftedDate = () => {\r\n        const now = new Date();\r\n        let adjusted = now;\r\n        if (configuration.timeshift && configuration.timeshift !== 0) adjusted = add(now, { hours: configuration.timeshift });\r\n        return adjusted;\r\n    }\r\n\r\n    if (performance.length !== 0) {\r\n        let date1 = new Date(configuration.startdate);\r\n        let date2 = shiftedDate();\r\n        var timeDiff = date2.getTime() - date1.getTime();\r\n\r\n        numdays = Math.round(timeDiff / (1000 * 3600 * 24));\r\n        startdate = date1.getFullYear() + \"/\" + (date1.getMonth() + 1).toString().padStart(2, '0') + \"/\" + date1.getDate().toString().padStart(2, '0');\r\n    }\r\n\r\n    return (\r\n        <Paper className={classes.paper}>\r\n            <Grid container alignItems=\"center\" >\r\n                <Grid item xs={3}><Typography align={'right'}>{startdate}</Typography></Grid>\r\n                <Grid item xs={6}>\r\n                    <Stepper className={classes.stepper} alternativeLabel activeStep={1} connector={<ColorlibConnector />}>\r\n                        <Step key={0}>\r\n                            <StepLabel StepIconComponent={ColorlibStepIcon}></StepLabel>\r\n                        </Step>\r\n                        <Step key={1}>\r\n                            <StepLabel StepIconComponent={ColorlibStepIcon}></StepLabel>\r\n                        </Step>\r\n                    </Stepper>\r\n                </Grid>\r\n                <Grid item xs={3}><Typography><b>{numdays}</b> {(numdays === 1) ? 'day' : 'days'}</Typography></Grid>\r\n            </Grid>\r\n        </Paper >\r\n    )\r\n}\r\n\r\nconst ColorlibConnector = withStyles({\r\n    alternativeLabel: {\r\n        top: 22,\r\n    },\r\n    active: {\r\n        '& $line': {\r\n            backgroundImage:\r\n                'linear-gradient( 95deg,rgb(242,113,33) 0%,rgb(233,64,87) 50%,rgb(138,35,135) 100%)',\r\n        },\r\n    },\r\n    completed: {\r\n        '& $line': {\r\n            backgroundImage:\r\n                'linear-gradient( 95deg,rgb(242,113,33) 0%,rgb(233,64,87) 50%,rgb(138,35,135) 100%)',\r\n        },\r\n    },\r\n    line: {\r\n        height: 3,\r\n        border: 0,\r\n        backgroundColor: '#eaeaf0',\r\n        borderRadius: 1,\r\n    },\r\n})(StepConnector);\r\n\r\nconst useColorlibStepIconStyles = makeStyles({\r\n    root: {\r\n        backgroundColor: '#ccc',\r\n        zIndex: 1,\r\n        color: '#fff',\r\n        width: 50,\r\n        height: 50,\r\n        display: 'flex',\r\n        borderRadius: '50%',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n    },\r\n    active: {\r\n        backgroundImage:\r\n            'linear-gradient( 136deg, rgb(242,113,33) 0%, rgb(233,64,87) 50%, rgb(138,35,135) 100%)',\r\n        boxShadow: '0 4px 10px 0 rgba(0,0,0,.25)',\r\n    },\r\n    completed: {\r\n        backgroundImage:\r\n            'linear-gradient( 136deg, rgb(242,113,33) 0%, rgb(233,64,87) 50%, rgb(138,35,135) 100%)',\r\n    },\r\n});\r\n\r\nfunction ColorlibStepIcon(props) {\r\n    const classes = useColorlibStepIconStyles();\r\n    const { active, completed } = props;\r\n\r\n    const icons = {\r\n        1: <RadioButtonCheckedIcon />,\r\n        2: <ArrowForwardIosIcon />,\r\n    };\r\n\r\n    return (\r\n        <div\r\n            className={clsx(classes.root, {\r\n                [classes.active]: active,\r\n                [classes.completed]: completed,\r\n            })}\r\n        >\r\n            {icons[String(props.icon)]}\r\n        </div>\r\n    );\r\n}\r\n","import React, { useState, createContext } from 'react';\r\n\r\nexport const StartingBalanceContext = createContext();\r\n\r\nexport const StartingBalanceProvider = (props) => {\r\n    const [startingBalance, setStartingBalance] = useState([]);\r\n\r\n    return (\r\n        <StartingBalanceContext.Provider value={[startingBalance, setStartingBalance]}>\r\n            {props.children}\r\n        </StartingBalanceContext.Provider>\r\n    )\r\n}","import React, { useState, useEffect, useContext } from \"react\";\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport { FiatContext } from '../context/FiatContext';\r\nimport { StartingBalanceContext } from '../context/StartingBalanceContext';\r\nimport { ConfigurationContext } from '../context/ConfigurationContext';\r\nimport { PerformanceContext } from '../context/PerformanceContext';\r\n\r\nexport default function StatusView(props) {\r\n    const startingBalances = useContext(StartingBalanceContext)[0];\r\n    const performance = useContext(PerformanceContext)[0];\r\n    const configuration = useContext(ConfigurationContext)[0];\r\n    const [performanceSummary, setPerformanceSummary] = useState({ value: '0', change: '0' });\r\n    const [dataloaded, setDataloaded] = useState(false);\r\n    const balances = props.balances;\r\n    const type = props.type;\r\n    const fiat = useContext(FiatContext)[0];\r\n    const basecoin = configuration.basecoin;\r\n    const currency = (type === 'basecoin') ? basecoin : (type === 'fiat' || type === 'net-fiat') ? fiat : `Net ${basecoin}`;\r\n    const leftTxt = (type === 'net-basecoin') ? `Net effect (${basecoin})` : (type === 'net-fiat') ? `Net effect (${currency})` : `${currency} value`;\r\n    const rightTxt = (type === 'net-basecoin' || type === 'net-fiat') ? 'Net effect (%)' : `${currency} change`;\r\n\r\n    const usdBasecoins = ['USD', 'BUSD', 'TUSD', 'USDT', 'USDC', 'USDP'];\r\n\r\n    useEffect(() => {\r\n        setDataloaded(startingBalances.length !== 0);\r\n\r\n        let rows = (balances.portfolio) ? JSON.parse(balances.portfolio) : [];\r\n        let currentValue = 0;\r\n        rows.forEach((coin) => {\r\n            currentValue += coin.number * coin.last;\r\n        });\r\n\r\n        if (type === 'fiat' || type === 'net-fiat') {\r\n            if (basecoin === 'BTC' || basecoin === 'ETH') {\r\n                currentValue = currentValue * ((fiat === 'EUR') ? balances.eur : balances.usd);\r\n            } else if (usdBasecoins.includes(basecoin)) {\r\n                currentValue = currentValue * ((fiat === 'EUR') ? balances.eur / balances.usd : 1);\r\n            } else if (basecoin === 'EUR') {\r\n                currentValue = currentValue * ((fiat === 'EUR') ? 1 : balances.usd / balances.eur);\r\n            }\r\n        }\r\n\r\n        let change;\r\n\r\n        if (currentValue !== 0) {\r\n            if (type === 'basecoin') change = (currentValue / startingBalances.basecoin - 1) * 100;\r\n            else if (fiat === 'EUR') change = (currentValue / startingBalances.eur - 1) * 100;\r\n            else change = (currentValue / startingBalances.usd - 1) * 100;\r\n\r\n            let hodlvalue = 0;\r\n\r\n            if (startingBalances.coins) rows.forEach((coin) => {\r\n                let c = startingBalances.coins.find(c => c.coin === coin.coin);\r\n                // Old performance files may have coins with number = 0, and then netvalue shouldn't be impacted\r\n                // Could also happen when multiple bots track the same portfolio, and a coin is excluded in one, but not the other(s)\r\n                if (c && c.coin && coin.number !== 0) hodlvalue += c.number * coin.last;\r\n            });\r\n\r\n            let netoffset = 0;\r\n            if (performance.length !== 0) {\r\n                let perftoday = performance[performance.length - 1];\r\n                netoffset = perftoday.netoffset;\r\n            }\r\n\r\n            hodlvalue -= netoffset;\r\n\r\n            if (type === 'net-basecoin') {\r\n                change = ((currentValue - hodlvalue) / startingBalances.basecoin) * 100;\r\n                currentValue = currentValue - hodlvalue;\r\n            }\r\n\r\n            if (type === 'net-fiat') {\r\n                let starting = (fiat === 'EUR') ? startingBalances.eur : startingBalances.usd;\r\n\r\n                if (basecoin === 'BTC' || basecoin === 'ETH') {\r\n                    hodlvalue = (fiat === 'EUR') ? hodlvalue * balances.eur : hodlvalue * balances.usd;\r\n                } else if (usdBasecoins.includes(basecoin)) {\r\n                    hodlvalue = (fiat === 'EUR') ? hodlvalue * balances.eur / balances.usd : hodlvalue;\r\n                } else if (basecoin === 'EUR') {\r\n                    hodlvalue = (fiat === 'EUR') ? hodlvalue : hodlvalue * balances.usd / balances.eur;\r\n                }\r\n\r\n                change = ((currentValue - hodlvalue) / starting) * 100;\r\n                currentValue = currentValue - hodlvalue;\r\n            }\r\n\r\n            if (change) {\r\n                if (change < 100) change = change.toFixed(2);\r\n                else if (change < 1000) change = change.toFixed(1);\r\n                else change = change.toFixed(0);\r\n            } else {\r\n                change = Number('0').toFixed(2);\r\n            }\r\n            if (currentValue) {\r\n                if (Math.abs(currentValue) < 0.000001) currentValue = currentValue.toFixed(2)\r\n                else if (Math.abs(currentValue) < 0.1) currentValue = currentValue.toFixed(6)\r\n                else if (Math.abs(currentValue) < 1) currentValue = currentValue.toFixed(5)\r\n                else if (Math.abs(currentValue) < 10) currentValue = currentValue.toFixed(4)\r\n                else if (Math.abs(currentValue) < 100) currentValue = currentValue.toFixed(3)\r\n                else if (Math.abs(currentValue) < 1000) currentValue = currentValue.toFixed(2);\r\n                else currentValue = currentValue.toFixed(2);\r\n            } else {\r\n                currentValue = Number('0').toFixed(2);\r\n            }\r\n        } else {\r\n            change = Number('0').toFixed(2);\r\n        }\r\n\r\n        setPerformanceSummary({\r\n            value: currentValue,\r\n            change: change,\r\n        });\r\n    }, [balances, startingBalances, fiat]);\r\n\r\n    return (\r\n        <Grid container alignItems=\"center\">\r\n            <Grid container item direction=\"column\" alignItems=\"center\" xs={6}>\r\n                <Grid item xs={12}><Typography variant=\"h4\">{dataloaded ? performanceSummary.value : '0.00'}</Typography></Grid>\r\n                <Grid item xs={12}><Typography>{leftTxt}</Typography></Grid>\r\n            </Grid>\r\n            <Grid container item direction=\"column\" alignItems=\"center\" xs={6}>\r\n                <Grid item xs={12}><Typography variant=\"h4\">{dataloaded ? performanceSummary.change : '0.00'}%</Typography></Grid>\r\n                <Grid item xs={12}><Typography>{rightTxt}</Typography></Grid>\r\n            </Grid>\r\n        </Grid>\r\n    )\r\n}","import React, { useContext, useEffect, useState } from \"react\";\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Hidden from '@material-ui/core/Hidden';\r\nimport BalancesTable from \"../components/BalancesTable\";\r\nimport PieChart from \"../components/PieChart\";\r\nimport { socket } from '../context/SocketContext';\r\nimport { BalancesContext } from '../context/BalancesContext';\r\nimport { PerformanceContext } from '../context/PerformanceContext';\r\nimport StatusView from \"../components/StatusView\";\r\nimport TimelineView from \"../components/TimelineView\";\r\nimport PerformanceSummary from \"../components/PerformanceSummary\";\r\nimport { StartingBalanceContext } from '../context/StartingBalanceContext';\r\nimport { ServerContext } from '../context/ServerContext';\r\nimport Backdrop from '@material-ui/core/Backdrop';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport Box from '@material-ui/core/Box';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    flexGrow: 1,\r\n  },\r\n  paper: {\r\n    padding: theme.spacing(2),\r\n  },\r\n  backdrop: {\r\n    zIndex: theme.zIndex.drawer + 1,\r\n    color: '#fff',\r\n  },\r\n}));\r\n\r\nfunction CircularProgressWithLabel(props) {\r\n  return (\r\n    <Box position=\"relative\" display=\"inline-flex\">\r\n      <CircularProgress variant=\"determinate\" size={90} {...props} />\r\n      <Box\r\n        top={0}\r\n        left={0}\r\n        bottom={0}\r\n        right={0}\r\n        position=\"absolute\"\r\n        display=\"flex\"\r\n        alignItems=\"center\"\r\n        justifyContent=\"center\"\r\n      >\r\n        <Typography variant=\"h5\" component=\"div\" color=\"textSecondary\">{`${Math.round(\r\n          props.value,\r\n        )}%`}</Typography>\r\n      </Box>\r\n    </Box>\r\n  );\r\n}\r\n\r\nconst Portfolio = (props) => {\r\n  const classes = useStyles();\r\n\r\n  const balances = useContext(BalancesContext)[0];\r\n  const performance = useContext(PerformanceContext)[0];\r\n  const startingBalance = useContext(StartingBalanceContext)[0];\r\n  const { access } = useContext(ServerContext)[0];\r\n  const [open, setOpen] = useState(false);\r\n  const [progress, setProgress] = useState(null);\r\n  const [remainingSymbols, setRemainingSymbols] = useState([]);\r\n  const [timeout, setTimeout] = useState(false);\r\n  const [cancel, setCancel] = useState(false);\r\n  const [portfolio, setPortfolio] = useState([]);\r\n\r\n  useEffect(() => {\r\n    socket.on(\"coin-loading-progress\", (data) => {\r\n      if (data.progress === -1) {\r\n        setProgress(0);\r\n      } else {\r\n        setProgress(data.progress);\r\n      }\r\n      setRemainingSymbols(data.remainingSymbols);\r\n      setTimeout(data.timeout);\r\n      setCancel(data.cancel);\r\n    });\r\n\r\n    return () => {\r\n      // socket.off(\"coin-loading-progress\");\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (socket && startingBalance.length === 0 && access.allow) socket.emit(\"get-starting-balances\", access.token);\r\n    return () => {\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (progress === null || progress === 100) {\r\n      setOpen(false);\r\n    } else {\r\n      setOpen(Object.keys(balances).length === 0);\r\n    }\r\n\r\n    return () => {\r\n    }\r\n  }, [balances, progress]);\r\n\r\n  function handleUpdateTable(data) {\r\n    setPortfolio(data);\r\n  }\r\n\r\n  function handleOrder(selected) {\r\n    if (socket && access.allow) socket.emit(\"place-order\", selected, access.token);\r\n  }\r\n\r\n  const showConfig = () => {\r\n    setOpen(false);\r\n    if (socket && access.allow) socket.emit(\"show-config\", access.token);\r\n  }\r\n\r\n  const cancelLoading = () => {\r\n    if (socket && access.allow) socket.emit(\"cancel-loading\", access.token);\r\n  }\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Backdrop className={classes.backdrop} open={open}>\r\n        {cancel ? (\r\n          <Dialog\r\n            open={open && cancel}\r\n            fullWidth={true}\r\n            maxWidth={'sm'}\r\n          >\r\n            <DialogContent>\r\n              <DialogContentText>\r\n                <Typography variant=\"overline\" color=\"secondary\">\r\n                  Failed to load all trading pairs\r\n                </Typography>\r\n              </DialogContentText>\r\n              <DialogContentText>\r\n                <Grid container direction=\"column\" >\r\n                  <Typography variant=\"body1\" color=\"inherit\" noWrap>\r\n                    The following trading pair(s) couldn't be loaded:\r\n                  </Typography>\r\n                  <Box p={1} />\r\n                  {remainingSymbols.map(symbol => {\r\n                    return (\r\n                      <Typography variant=\"overline\" color=\"inherit\" display=\"block\" noWrap>\r\n                        <b>{\">\"} {symbol}</b>\r\n                      </Typography>\r\n                    )\r\n                  })}\r\n                  <Box p={1} />\r\n                  <Typography variant=\"body1\" color=\"inherit\" noWrap>\r\n                    The exchange may not support the trading pair(s)\r\n                  </Typography>\r\n                  <Typography variant=\"body1\" color=\"inherit\" noWrap>\r\n                    To resolve this, exclude the coin(s) in the bot configuration\r\n                  </Typography>\r\n                </Grid>\r\n              </DialogContentText>\r\n            </DialogContent>\r\n            <DialogActions>\r\n              <Button variant=\"contained\" color=\"secondary\" style={{ width: '100px' }} onClick={showConfig}>\r\n                OK\r\n              </Button>\r\n            </DialogActions>\r\n          </Dialog>\r\n        ) : (\r\n          <Grid container spacing={3} direction=\"column\" alignItems=\"center\">\r\n            <Grid item xs={12}>\r\n              <Typography variant=\"h5\" noWrap>\r\n                Loading coin data\r\n              </Typography>\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n              <CircularProgressWithLabel color=\"inherit\" variant=\"determinate\" value={progress} />\r\n            </Grid>\r\n            {timeout ? (\r\n              <Grid container direction=\"column\" alignItems=\"center\">\r\n                <Box p={1} />\r\n                <Typography variant=\"body1\" noWrap>\r\n                  This seems to be taking quite long\r\n                </Typography>\r\n                <Box p={1} />\r\n                <Button variant=\"contained\" color=\"primary\" style={{ width: '120px' }} onClick={cancelLoading}>\r\n                  Cancel\r\n                </Button>\r\n              </Grid>\r\n            ) : (\r\n              <Box height={88} />\r\n            )}\r\n          </Grid>\r\n        )}\r\n      </Backdrop>\r\n      <Grid container spacing={3} alignItems=\"flex-start\">\r\n        <Grid item xs={12} md={4} lg={6}>\r\n          <Typography variant=\"h3\" noWrap>\r\n            Portfolio\r\n          </Typography>\r\n        </Grid>\r\n        <Hidden xsDown>\r\n          <Grid item xs={12} sm={6} md={4} lg={3}>\r\n            <TimelineView data={performance} />\r\n          </Grid>\r\n        </Hidden>\r\n        <Grid item xs={12} sm={6} md={4} lg={3}>\r\n          <StatusView />\r\n        </Grid>\r\n        <Grid item xs={12} sm={6} md={6} lg={3}>\r\n          <Paper style={{ height: '100px', minWidth: '340px' }} className={classes.paper}>\r\n            <PerformanceSummary balances={balances} type='basecoin' />\r\n          </Paper>\r\n        </Grid>\r\n        <Grid item xs={12} sm={6} md={6} lg={3}>\r\n          <Paper style={{ height: '100px', minWidth: '340px' }} className={classes.paper}>\r\n            <PerformanceSummary balances={balances} type='fiat' />\r\n          </Paper>\r\n        </Grid>\r\n        <Grid item xs={12} sm={6} md={6} lg={3}>\r\n          <Paper style={{ height: '100px', minWidth: '340px' }} className={classes.paper}>\r\n            <PerformanceSummary balances={balances} type='net-basecoin' />\r\n          </Paper>\r\n        </Grid>\r\n        <Grid item xs={12} sm={6} md={6} lg={3}>\r\n          <Paper style={{ height: '100px', minWidth: '340px' }} className={classes.paper}>\r\n            <PerformanceSummary balances={balances} type='net-fiat' />\r\n          </Paper>\r\n        </Grid>\r\n        <Hidden xsDown>\r\n          <Grid item md={12} lg={8}>\r\n            <BalancesTable balances={balances} onOrder={handleOrder} onUpdate={handleUpdateTable} />\r\n          </Grid>\r\n          <Grid container item md={12} lg={4}>\r\n            <Grid item xs={12}>\r\n              <Paper style={{ height: '500px' }} className={classes.paper}>\r\n                <PieChart portfolio={portfolio} />\r\n              </Paper>\r\n            </Grid>\r\n          </Grid>\r\n        </Hidden>\r\n      </Grid>\r\n    </div >\r\n  );\r\n}\r\n\r\nexport default Portfolio;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { ResponsiveLine } from '@nivo/line'\r\nimport \"./LineChart.css\";\r\nimport { useTheme } from '@material-ui/core/styles';\r\nimport Alert from '@material-ui/lab/Alert';\r\n\r\nexport default function LineChart(props) {\r\n    const mode = useTheme().palette.type;\r\n    let data1 = props.data1;\r\n    let data2 = props.data2;\r\n    const [title, setTitle] = useState('');\r\n\r\n    useEffect(() => {\r\n        if (data1 && data1.length !== 0) setTitle(data1[0].id);\r\n        else if (data2 && data2.length !== 0) setTitle(data2[0].id);\r\n        return () => {\r\n        }\r\n    }, [data1, data2]);\r\n\r\n    let enoughData = false;\r\n    if (data2 && data2[0].data.length > 1) enoughData = true;\r\n\r\n    const getTheme = () => {\r\n        return {\r\n            axis: {\r\n                ticks: {\r\n                    line: {\r\n                        stroke: (mode === 'light') ? \"#000000\" : \"#FFFFFF\"\r\n                    },\r\n                    text: { fill: (mode === 'light') ? \"#000000\" : \"#FFFFFF\" }\r\n                },\r\n                legend: {\r\n                    text: {\r\n                        fill: (mode === 'light') ? \"#000000\" : \"#FFFFFF\"\r\n                    }\r\n                }\r\n            },\r\n            crosshair: {\r\n                line: {\r\n                    stroke: (mode === 'light') ? \"#000000\" : \"#FFFFFF\",\r\n                },\r\n            },\r\n            // tooltip: {\r\n            //     container: {\r\n            //         background: (mode === 'light') ? \"#FFFFFF\" : \"#000000\",\r\n            //         color: (mode === 'light') ? \"#000000\" : \"#FFFFFF\",\r\n            //     }\r\n            // }\r\n        };\r\n    };\r\n\r\n    const getAxis1 = () => {\r\n        if (data1.length !== 0) {\r\n            return {\r\n                legend: data1[0].id,\r\n                legendOffset: -80,\r\n                legendPosition: 'middle',\r\n            }\r\n        } else {\r\n            // In case data1 is not set, just use axis2 on both sides\r\n            return getAxis2;\r\n        }\r\n    }\r\n\r\n    const getAxis2 = () => {\r\n        if (data2.length !== 0) {\r\n            return {\r\n                legend: data2[0].id,\r\n                legendOffset: 70,\r\n                legendPosition: 'middle',\r\n            }\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"wrapper\">\r\n            <div><b>{title}</b></div>\r\n            <div className=\"secondGraph\">\r\n                {(data1 && enoughData) ? (\r\n                    <ResponsiveLine\r\n                        data={data1}\r\n                        tooltip={(input) => {\r\n                            return (\r\n                                <div style={{\r\n                                    background: (mode === 'light') ? \"#FFFFFF\" : \"#000000\",\r\n                                    boxShadow: '0 3px 6px rgba(0,0,0,0.16), 0 3px 6px rgba(0,0,0,0.23)',\r\n                                    padding: '6px 10px 6px 10px'\r\n                                }}>\r\n                                    <div style={{ color: 'rgb(211,47,47)' }}>\r\n                                         {input.point.serieId}:&nbsp;\r\n                                    </div>\r\n                                    <div style={{ color: (mode === 'light') ? \"#000000\" : \"#FFFFFF\" }}>\r\n                                        {input.point.data.xFormatted} | <strong>{input.point.data.yFormatted}</strong>\r\n                                    </div>\r\n                                </div>\r\n                            )\r\n                        }}\r\n                        theme={getTheme()}\r\n                        margin={{ top: 40, right: 90, bottom: 50, left: 90 }}\r\n                        xScale={{\r\n                            type: 'time',\r\n                            format: '%Y/%m/%d',\r\n                            useUTC: false,\r\n                            precision: 'day',\r\n                        }}\r\n                        xFormat=\"time:%Y/%m/%d\"\r\n                        yScale={{ type: 'linear', min: 'auto', max: 'auto', stacked: false, reverse: false }}\r\n                        yFormat=\" >-.6f\"\r\n                        curve=\"monotoneX\"\r\n                        colors={['rgb(255,255,255,0)']}\r\n                        axisTop={null}\r\n                        axisRight={null}\r\n                        axisBottom={null}\r\n                        axisLeft={getAxis1()}\r\n                        enablePoints={false}\r\n                        enableGridX={false}\r\n                        enableGridY={false}\r\n                        useMesh={true}\r\n                        // enableSlices=\"y\"\r\n                        crosshairType=\"cross\"\r\n                    />\r\n                ) : (null)}\r\n            </div>\r\n            <div className=\"graphContainer\">\r\n                {(data2 && enoughData) ? (\r\n                    <ResponsiveLine\r\n                        data={data2}\r\n                        theme={getTheme()}\r\n                        margin={{ top: 40, right: 90, bottom: 50, left: 90 }}\r\n                        xScale={{\r\n                            type: 'time',\r\n                            format: '%Y/%m/%d',\r\n                            useUTC: false,\r\n                            precision: 'day',\r\n                        }}\r\n                        xFormat=\"time:%Y/%m/%d\"\r\n                        yScale={{ type: 'linear', min: 'auto', max: 'auto', stacked: false, reverse: false }}\r\n                        yFormat=\" >-.6f\"\r\n                        curve=\"monotoneX\"\r\n                        lineWidth={4}\r\n                        colors={['rgb(211,47,47)']}\r\n                        axisTop={null}\r\n                        axisBottom={null}\r\n                        axisRight={getAxis2()}\r\n                        axisLeft={null}\r\n                        enablePoints={false}\r\n                        enableGridX={false}\r\n                        enableGridY={false}\r\n                        useMesh={true}\r\n                        // enableSlices=\"y\"\r\n                        crosshairType=\"cross\"\r\n                    />\r\n                ) : (\r\n                    <Alert severity=\"info\">Not enough data yet to show graphs - check again later</Alert>\r\n                )}\r\n            </div>\r\n        </div>\r\n    )\r\n}","import React, { useContext, useEffect, useState } from 'react';\r\nimport { makeStyles, withStyles } from '@material-ui/core/styles';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport TimelineView from \"../components/TimelineView\";\r\nimport StatusView from \"../components/StatusView\";\r\nimport LineChart from '../components/LineChart';\r\nimport { BalancesContext } from '../context/BalancesContext';\r\nimport { PerformanceContext } from '../context/PerformanceContext';\r\nimport { StartingBalanceContext } from '../context/StartingBalanceContext';\r\nimport { FiatContext } from '../context/FiatContext';\r\nimport { ConfigurationContext } from '../context/ConfigurationContext';\r\nimport { ServerContext } from '../context/ServerContext';\r\nimport Backdrop from '@material-ui/core/Backdrop';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport { socket } from '../context/SocketContext';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport DMSwitch from '@material-ui/core/Switch';\r\nimport Button from '@material-ui/core/Button';\r\nimport Hidden from '@material-ui/core/Hidden';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    flexGrow: 1,\r\n  },\r\n  paper: {\r\n    padding: theme.spacing(2),\r\n  },\r\n  backdrop: {\r\n    zIndex: theme.zIndex.drawer + 1,\r\n    color: '#fff',\r\n  },\r\n}));\r\n\r\nconst StyledButton = withStyles({\r\n  root: {\r\n    '&:hover': {\r\n      backgroundColor: 'transparent',\r\n    },\r\n    '&:click': {\r\n      backgroundColor: '#f00',\r\n    },\r\n    justifyContent: 'flex-start',\r\n  },\r\n})(Button);\r\n\r\nconst Performance = () => {\r\n  const classes = useStyles();\r\n\r\n  const balances = useContext(BalancesContext)[0];\r\n  const performance = useContext(PerformanceContext)[0];\r\n  const startingBalance = useContext(StartingBalanceContext)[0];\r\n  const fiat = useContext(FiatContext)[0];\r\n  const configuration = useContext(ConfigurationContext)[0];\r\n  const [data1, setData1] = useState({});\r\n  const [data2, setData2] = useState({});\r\n  const { access } = useContext(ServerContext)[0];\r\n  const [open, setOpen] = useState(true);\r\n  const [graph, setGraph] = useState('normalized');\r\n\r\n  const usdBasecoins = ['USD', 'BUSD', 'TUSD', 'USDT', 'USDC', 'USDP'];\r\n\r\n  const toggleGraph = () => {\r\n    const newgraph = graph === 'normalized' ? 'absolute' : 'normalized';\r\n    setGraph(newgraph);\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (socket && startingBalance.length === 0 && access.allow) socket.emit(\"get-starting-balances\", access.token);\r\n    return () => {\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    setOpen(Object.keys(balances).length === 0);\r\n    return () => {\r\n    }\r\n  }, [balances]);\r\n\r\n  let values = [];\r\n  let fiatValues = [];\r\n  let change = [];\r\n  let fiatChange = [];\r\n  let valuesNorm = [];\r\n  let fiatValuesNorm = [];\r\n  let changeNorm = [];\r\n  let fiatChangeNorm = [];\r\n  let netvalues = [];\r\n  let netchange = [];\r\n  let netvaluesfiat = [];\r\n  let netchangefiat = [];\r\n  let newdata1 = {};\r\n  let newdata2 = {};\r\n\r\n  useEffect(() => {\r\n    computeGraphs();\r\n\r\n    return () => {\r\n    }\r\n  }, [balances, performance, startingBalance, fiat]);\r\n\r\n  const getPerf = (day, normalize) => {\r\n    let value = 0;\r\n    let fiatValue = 0;\r\n\r\n    let multiplier;\r\n\r\n    if (configuration.basecoin === 'BTC' || configuration.basecoin === 'ETH') {\r\n      multiplier = ((fiat === 'EUR') ? day.eur : day.usd);\r\n    } else if (usdBasecoins.includes(configuration.basecoin)) {\r\n      multiplier = ((fiat === 'EUR') ? day.eur / day.usd : 1);\r\n    } else if (configuration.basecoin === 'EUR') {\r\n      multiplier = ((fiat === 'EUR') ? 1 : day.usd / day.eur);\r\n    }\r\n\r\n    day.coins.forEach((coin) => {\r\n      value += coin.number * coin.price;\r\n      fiatValue += coin.number * coin.price * multiplier;\r\n    });\r\n\r\n    if (normalize) {\r\n      value += day.offset;\r\n      fiatValue += day.offset * multiplier;\r\n    }\r\n\r\n    return [value, fiatValue];\r\n  }\r\n\r\n  const computeGraphs = () => {\r\n    let initialValue = 0;\r\n    let initialFiatValue = 0;\r\n    let initialValueNorm = 0;\r\n    let initialFiatValueNorm = 0;\r\n\r\n    if (startingBalance.length !== 0 && startingBalance.coins.length !== 0) {\r\n      initialValue = startingBalance.basecoin;\r\n      initialFiatValue = (fiat === 'EUR') ? startingBalance.eur : startingBalance.usd;\r\n\r\n      if (performance.length !== 0) {\r\n        performance.forEach((day, i) => {\r\n          const [value, fiatValue] = getPerf(day, false);\r\n          const [valueNorm, fiatValueNorm] = getPerf(day, true);;\r\n\r\n          if (i === 0) {\r\n            initialValueNorm = valueNorm;\r\n            initialFiatValueNorm = fiatValueNorm;\r\n          }\r\n\r\n          let netvalue = 0;\r\n          let netvaluefiat = 0;\r\n\r\n          day.coins.forEach((coin) => {\r\n            // Old performance files may have coins on day 0 that were added later, and don't get an initial value\r\n            if (!coin.initial) coin.initial = 0;\r\n            // Old performance files may have coins with number = 0, and then netvalue shouldn't be impacted\r\n            // Could also happen when multiple bots track the same portfolio, and a coin is excluded in one, but not the other(s)\r\n            if (coin.number !== 0) netvalue += (coin.number - coin.initial) * coin.price;\r\n          });\r\n          netvalue += day.netoffset;\r\n\r\n          if (configuration.basecoin === 'BTC' || configuration.basecoin === 'ETH') {\r\n            netvaluefiat = netvalue * ((fiat === 'EUR') ? day.eur : day.usd);\r\n          } else if (usdBasecoins.includes(configuration.basecoin)) {\r\n            netvaluefiat = netvalue * ((fiat === 'EUR') ? day.eur / day.usd : 1);\r\n          } else if (configuration.basecoin === 'EUR') {\r\n            netvaluefiat = netvalue * ((fiat === 'EUR') ? 1 : day.usd / day.eur);\r\n          }\r\n\r\n          values.push({\r\n            x: day.date,\r\n            y: value,\r\n          });\r\n          change.push({\r\n            x: day.date,\r\n            y: (value / initialValue - 1) * 100,\r\n          });\r\n          fiatValues.push({\r\n            x: day.date,\r\n            y: fiatValue,\r\n          });\r\n          fiatChange.push({\r\n            x: day.date,\r\n            y: (fiatValue / initialFiatValue - 1) * 100,\r\n          });\r\n          valuesNorm.push({\r\n            x: day.date,\r\n            y: valueNorm,\r\n          });\r\n          changeNorm.push({\r\n            x: day.date,\r\n            y: (valueNorm / initialValueNorm - 1) * 100,\r\n          });\r\n          fiatValuesNorm.push({\r\n            x: day.date,\r\n            y: fiatValueNorm,\r\n          });\r\n          fiatChangeNorm.push({\r\n            x: day.date,\r\n            y: (fiatValueNorm / initialFiatValueNorm - 1) * 100,\r\n          });\r\n          netvalues.push({\r\n            x: day.date,\r\n            y: netvalue,\r\n          });\r\n          netchange.push({\r\n            x: day.date,\r\n            y: (netvalue / initialValue) * 100,\r\n          });\r\n          netvaluesfiat.push({\r\n            x: day.date,\r\n            y: netvaluefiat,\r\n          });\r\n          netchangefiat.push({\r\n            x: day.date,\r\n            y: (netvaluefiat / initialFiatValue) * 100,\r\n          });\r\n        });\r\n\r\n        newdata1.basecoin = [\r\n          {\r\n            id: `Total Value (${configuration.basecoin})`,\r\n            data: values,\r\n          }\r\n        ];\r\n        newdata2.basecoin = [\r\n          {\r\n            id: `${configuration.basecoin} Change (%)`,\r\n            data: change,\r\n          }\r\n        ];\r\n        newdata1.fiat = [\r\n          {\r\n            id: `Total Value (${fiat})`,\r\n            data: fiatValues,\r\n          }\r\n        ];\r\n        newdata2.fiat = [\r\n          {\r\n            id: `${fiat} Change (%)`,\r\n            data: fiatChange,\r\n          }\r\n        ];\r\n        newdata1.basecoinnorm = [\r\n          {\r\n            id: `Normalized Value (${configuration.basecoin})`,\r\n            data: valuesNorm,\r\n          }\r\n        ];\r\n        newdata2.basecoinnorm = [\r\n          {\r\n            id: `Normalized ${configuration.basecoin} Change (%)`,\r\n            data: changeNorm,\r\n          }\r\n        ];\r\n        newdata1.fiatnorm = [\r\n          {\r\n            id: `Normalized Value (${fiat})`,\r\n            data: fiatValuesNorm,\r\n          }\r\n        ];\r\n        newdata2.fiatnorm = [\r\n          {\r\n            id: `Normalized ${fiat} Change (%)`,\r\n            data: fiatChangeNorm,\r\n          }\r\n        ];\r\n        newdata1.net = [\r\n          {\r\n            id: `Net Balancing Effect (${configuration.basecoin})`,\r\n            data: netvalues,\r\n          }\r\n        ];\r\n        newdata2.net = [\r\n          {\r\n            id: 'Net Balancing Effect (%)',\r\n            data: netchange,\r\n          }\r\n        ];\r\n        newdata1.netfiat = [\r\n          {\r\n            id: `Net Balancing Effect (${fiat})`,\r\n            data: netvaluesfiat,\r\n          }\r\n        ];\r\n        newdata2.netfiat = [\r\n          {\r\n            id: 'Net Balancing Effect (%)',\r\n            data: netchangefiat,\r\n          }\r\n        ];\r\n        setData1(newdata1);\r\n        setData2(newdata2);\r\n      }\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Backdrop className={classes.backdrop} open={open}>\r\n        <CircularProgress color=\"inherit\" />\r\n      </Backdrop>\r\n      <Grid container spacing={3}>\r\n        <Grid item xs={12} md={4} lg={6}>\r\n          <Typography variant=\"h3\" noWrap>\r\n            Performance\r\n          </Typography>\r\n        </Grid>\r\n        <Hidden xsDown>\r\n          <Grid item xs={12} sm={6} md={4} lg={3}>\r\n            <TimelineView data={performance} />\r\n          </Grid>\r\n        </Hidden>\r\n        <Grid item xs={12} sm={6} md={4} lg={3}>\r\n          <StatusView />\r\n        </Grid>\r\n        <Grid container>\r\n          <Grid container item xs={12} alignItems=\"center\" justify=\"flex-start\" style={{ maxWidth: '360px' }}>\r\n            <Grid item xs={5}>\r\n              <FormControlLabel\r\n                onChange={toggleGraph}\r\n                value={graph}\r\n                control={<DMSwitch checked={graph === 'normalized'} color=\"secondary\" />}\r\n                label={<Typography variant=\"button\">Absolute</Typography>}\r\n                labelPlacement=\"start\"\r\n              />\r\n            </Grid>\r\n            <Grid item xs={7}>\r\n              <StyledButton disableRipple onClick={toggleGraph}><Typography variant=\"button\">Normalized</Typography></StyledButton>\r\n            </Grid>\r\n          </Grid>\r\n          <Grid>\r\n          </Grid>\r\n        </Grid>\r\n        {(graph === 'absolute') ? (\r\n          <React.Fragment>\r\n            <Grid item xs={12} sm={12} md={6} lg={6}>\r\n              <Paper style={{ height: '360px' }} className={classes.paper}>\r\n                <LineChart data1={data1.basecoin} data2={data1.basecoin} type={'basecoin'} />\r\n              </Paper>\r\n            </Grid>\r\n            <Grid item xs={12} sm={12} md={6} lg={6}>\r\n              <Paper style={{ height: '360px' }} className={classes.paper}>\r\n                <LineChart data1={data1.fiat} data2={data1.fiat} type={'fiat'} />\r\n              </Paper>\r\n            </Grid>\r\n          </React.Fragment>\r\n        ) : (\r\n          <React.Fragment>\r\n            <Grid item xs={12} sm={12} md={6} lg={6}>\r\n              <Paper style={{ height: '360px' }} className={classes.paper}>\r\n                <LineChart data1={data2.basecoinnorm} data2={data2.basecoinnorm} type={'basecoin'} />\r\n              </Paper>\r\n            </Grid>\r\n            <Grid item xs={12} sm={12} md={6} lg={6}>\r\n              <Paper style={{ height: '360px' }} className={classes.paper}>\r\n                <LineChart data1={data2.fiatnorm} data2={data2.fiatnorm} type={'fiat'} />\r\n              </Paper>\r\n            </Grid>\r\n          </React.Fragment>\r\n        )}\r\n        <Grid item xs={12} sm={12} md={6} lg={6}>\r\n          <Paper style={{ height: '360px' }} className={classes.paper}>\r\n            <LineChart data1={data1.net} data2={data2.net} type={'net-result'} />\r\n          </Paper>\r\n        </Grid>\r\n        <Grid item xs={12} sm={12} md={6} lg={6}>\r\n          <Paper style={{ height: '360px' }} className={classes.paper}>\r\n            <LineChart data1={data1.netfiat} data2={data2.netfiat} type={'net-result-fiat'} />\r\n          </Paper>\r\n        </Grid>\r\n      </Grid>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Performance;","import { useContext } from 'react';\r\nimport { ResponsiveLine } from '@nivo/line'\r\nimport { useTheme } from '@material-ui/core/styles';\r\nimport Alert from '@material-ui/lab/Alert';\r\nimport { ConfigurationContext } from '../context/ConfigurationContext';\r\n\r\nexport default function LineChart(props) {\r\n    const mode = useTheme().palette.type;\r\n    const configuration = useContext(ConfigurationContext)[0];\r\n\r\n    let performance = props.performance;\r\n    const balances = props.balances;\r\n    const graph = props.graph;\r\n    const fiat = props.fiat;\r\n    const rows = (balances.portfolio) ? JSON.parse(balances.portfolio) : [];\r\n\r\n    const usdBasecoins = ['USD', 'BUSD', 'TUSD', 'USDT', 'USDC', 'USDP'];\r\n\r\n    let factor;\r\n\r\n    // Sort alphabetically on coin names\r\n    rows.sort((a, b) => (a['coin'] < b['coin']) ? 1 : ((b['coin'] < a['coin']) ? -1 : 0));\r\n\r\n    let coins = [];\r\n    let data = [];\r\n    let prices = [];\r\n\r\n    rows.forEach((coin, i) => {\r\n        coins.push(coin.coin);\r\n        prices[i] = {\r\n            coin: coin.coin,\r\n            initial: 0,\r\n            data: [],\r\n        };\r\n    });\r\n\r\n    if (performance !== []) {\r\n        coins.forEach((coin, i) => {\r\n            if (coin !== configuration.basecoin) {\r\n                performance.forEach((day) => {\r\n                    if (graph === 'basecoin') {\r\n                        factor = 1;\r\n                    } else {\r\n                        if (configuration.basecoin === 'BTC' || configuration.basecoin === 'ETH') {\r\n                            factor = fiat === 'EUR' ? day.eur : day.usd;\r\n                        } else {\r\n                            factor = usdBasecoins.includes(configuration.basecoin) ? fiat === 'EUR' ? day.eur / day.usd : 1 :\r\n                                fiat === 'EUR' ? 1 : day.usd / day.eur;\r\n                        }\r\n                    }\r\n\r\n                    day.coins.forEach((c) => {\r\n                        if (c.coin === coin) {\r\n                            if (prices[i].initial === 0) prices[i].initial = c.price * factor;\r\n                            prices[i].data.push({\r\n                                x: day.date,\r\n                                y: (c.price * factor / prices[i].initial - 1) * 100,\r\n                            });\r\n                        }\r\n                    });\r\n                });\r\n                data.push({\r\n                    id: coin,\r\n                    data: prices[i].data,\r\n                })\r\n            }\r\n        });\r\n    }\r\n\r\n    let enoughData = false;\r\n    if (data.length !== 0 && data[0].data.length > 1) enoughData = true;\r\n\r\n    const getTheme = () => {\r\n        return {\r\n            axis: {\r\n                ticks: {\r\n                    line: {\r\n                        stroke: (mode === 'light') ? \"#000000\" : \"#FFFFFF\"\r\n                    },\r\n                    text: { fill: (mode === 'light') ? \"#000000\" : \"#FFFFFF\" }\r\n                },\r\n                legend: {\r\n                    text: {\r\n                        fill: (mode === 'light') ? \"#000000\" : \"#FFFFFF\"\r\n                    }\r\n                }\r\n            },\r\n            crosshair: {\r\n                line: {\r\n                    stroke: (mode === 'light') ? \"#000000\" : \"#FFFFFF\",\r\n                },\r\n            },\r\n            legends: {\r\n                text: {\r\n                    fill: (mode === 'light') ? \"#000000\" : \"#FFFFFF\",\r\n                }\r\n            },\r\n            // tooltip: {\r\n            //     container: {\r\n            //         background: (mode === 'light') ? \"#FFFFFF\" : \"#000000\",\r\n            //         color: (mode === 'light') ? \"#000000\" : \"#FFFFFF\",\r\n            //     }\r\n            // }\r\n        };\r\n    };\r\n\r\n    return (\r\n        <div className=\"wrapper\">\r\n            <div><b>{props.title}</b></div>\r\n            <div className=\"graphContainerCoins\">\r\n                {(enoughData) ? (\r\n                    <ResponsiveLine\r\n                        data={data}\r\n                        tooltip={(input) => {\r\n                            return (\r\n                                <div style={{\r\n                                    background: (mode === 'light') ? \"#FFFFFF\" : \"#000000\",\r\n                                    boxShadow: '0 3px 6px rgba(0,0,0,0.16), 0 3px 6px rgba(0,0,0,0.23)',\r\n                                    padding: '6px 10px 6px 10px'\r\n                                }}>\r\n                                    <span style={{ color: input.point.color }}>\r\n                                         {input.point.serieId}:&nbsp;\r\n                                    </span>\r\n                                    <span style={{ color: (mode === 'light') ? \"#000000\" : \"#FFFFFF\" }}>\r\n                                        {input.point.data.xFormatted} | <strong>{input.point.data.yFormatted}</strong>%\r\n                                    </span>\r\n                                </div>\r\n                            )\r\n                        }}\r\n                        theme={getTheme()}\r\n                        margin={{ top: 50, right: 110, bottom: 50, left: 80 }}\r\n                        xScale={{\r\n                            type: 'time',\r\n                            format: '%Y/%m/%d',\r\n                            useUTC: false,\r\n                            precision: 'day',\r\n                        }}\r\n                        xFormat=\"time:%Y/%m/%d\"\r\n                        yScale={{ type: 'linear', min: 'auto', max: 'auto', stacked: false, reverse: false }}\r\n                        yFormat=\" >-.2f\"\r\n                        curve=\"monotoneX\"\r\n                        lineWidth={4}\r\n                        colors={{ scheme: configuration ? configuration.colorscheme ? configuration.colorscheme : 'red_yellow_blue' : 'red_yellow_blue' }}\r\n                        axisTop={null}\r\n                        axisRight={{\r\n                            legend: '',\r\n                            legendOffset: 70,\r\n                            legendPosition: 'middle',\r\n                        }}\r\n                        axisBottom={null}\r\n                        axisLeft={{\r\n                            legend: 'Change (%)',\r\n                            legendOffset: -70,\r\n                            legendPosition: 'middle',\r\n                        }}\r\n                        enablePoints={false}\r\n                        enableGridX={false}\r\n                        enableGridY={false}\r\n                        useMesh={true}\r\n                        // enableSlices=\"y\"\r\n                        crosshairType=\"cross\"\r\n                        legends={[\r\n                            {\r\n                                anchor: 'bottom-right',\r\n                                direction: 'column',\r\n                                justify: false,\r\n                                translateX: 120,\r\n                                translateY: 0,\r\n                                itemsSpacing: 0,\r\n                                itemDirection: 'left-to-right',\r\n                                itemWidth: 80,\r\n                                itemHeight: 20,\r\n                                itemOpacity: 0.75,\r\n                                symbolSize: 12,\r\n                                symbolShape: 'circle',\r\n                                symbolBorderColor: 'rgba(0, 0, 0, .5)',\r\n                                itemTextColor: \"#ff0000\",\r\n                                effects: [\r\n                                    {\r\n                                        on: 'hover',\r\n                                        style: {\r\n                                            itemBackground: 'rgba(0, 0, 0, .03)',\r\n                                            itemOpacity: 1\r\n                                        }\r\n                                    }\r\n                                ]\r\n                            }\r\n                        ]}\r\n                    />\r\n                ) : (\r\n                    <Alert severity=\"info\">Not enough data yet to show graphs - check again later</Alert>\r\n                )}\r\n            </div>\r\n        </div>\r\n    )\r\n}","import React, { useContext, useEffect, useState } from 'react';\r\nimport { makeStyles, withStyles } from '@material-ui/core/styles';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport TimelineView from \"../components/TimelineView\";\r\nimport StatusView from \"../components/StatusView\";\r\nimport LineChartCoins from '../components/LineChartCoins';\r\nimport { BalancesContext } from '../context/BalancesContext';\r\nimport { PerformanceContext } from '../context/PerformanceContext';\r\nimport { ConfigurationContext } from '../context/ConfigurationContext';\r\nimport Backdrop from '@material-ui/core/Backdrop';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport Hidden from '@material-ui/core/Hidden';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport DMSwitch from '@material-ui/core/Switch';\r\nimport Button from '@material-ui/core/Button';\r\nimport { FiatContext } from '../context/FiatContext';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    flexGrow: 1,\r\n  },\r\n  paper: {\r\n    padding: theme.spacing(2),\r\n  },\r\n  backdrop: {\r\n    zIndex: theme.zIndex.drawer + 1,\r\n    color: '#fff',\r\n  },\r\n}));\r\n\r\nconst StyledButton = withStyles({\r\n  root: {\r\n    '&:hover': {\r\n      backgroundColor: 'transparent',\r\n    },\r\n    '&:click': {\r\n      backgroundColor: '#f00',\r\n    },\r\n    justifyContent: 'flex-start',\r\n  },\r\n})(Button);\r\n\r\nconst CoinAnalysis = () => {\r\n  const classes = useStyles();\r\n\r\n  const balances = useContext(BalancesContext)[0];\r\n  const performance = useContext(PerformanceContext)[0];\r\n  const configuration = useContext(ConfigurationContext)[0];\r\n  const [open, setOpen] = useState(true);\r\n  const [graph, setGraph] = useState('basecoin');\r\n  const fiat = useContext(FiatContext)[0];\r\n\r\n  const toggleGraph = () => {\r\n    const newgraph = graph === 'basecoin' ? 'fiat' : 'basecoin';\r\n    setGraph(newgraph);\r\n  }\r\n\r\n  useEffect(() => {\r\n    setOpen(Object.keys(balances).length === 0);\r\n    return () => {\r\n    }\r\n  }, [balances]);\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Backdrop className={classes.backdrop} open={open}>\r\n        <CircularProgress color=\"inherit\" />\r\n      </Backdrop>\r\n      <Grid container spacing={3}>\r\n        <Grid item xs={12} md={4} lg={6}>\r\n          <Typography variant=\"h3\" noWrap>\r\n            Coin Analysis\r\n          </Typography>\r\n        </Grid>\r\n        <Hidden xsDown>\r\n          <Grid item xs={12} sm={6} md={4} lg={3}>\r\n            <TimelineView data={performance} />\r\n          </Grid>\r\n        </Hidden>\r\n        <Grid item xs={12} sm={6} md={4} lg={3}>\r\n          <StatusView />\r\n        </Grid>\r\n        <Grid container>\r\n          <Grid container item xs={12} alignItems=\"center\" justify=\"flex-start\" style={{ maxWidth: '360px' }}>\r\n            <Grid item xs={5}>\r\n              <FormControlLabel\r\n                onChange={toggleGraph}\r\n                value={graph}\r\n                control={<DMSwitch checked={graph === 'basecoin'} color=\"secondary\" />}\r\n                label={<Typography variant=\"button\">Fiat ({fiat})</Typography>}\r\n                labelPlacement=\"start\"\r\n              />\r\n            </Grid>\r\n            <Grid item xs={7}>\r\n              <StyledButton disableRipple onClick={toggleGraph}><Typography variant=\"button\">Base Coin ({configuration.basecoin})</Typography></StyledButton>\r\n            </Grid>\r\n          </Grid>\r\n          <Grid>\r\n          </Grid>\r\n        </Grid>\r\n        <Grid item xs={12}>\r\n          <Paper style={{ height: '700px' }} className={classes.paper}>\r\n            <LineChartCoins graph={graph} fiat={fiat} performance={performance} balances={balances} title={`Coin Price Changes vs ${graph === 'basecoin' ? configuration.basecoin : fiat} (%)`} />\r\n          </Paper>\r\n        </Grid>\r\n      </Grid>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default CoinAnalysis;","import React, { useEffect, useState, useContext } from 'react';\r\nimport { withStyles, makeStyles } from '@material-ui/core/styles';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Box from '@material-ui/core/Box';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport ToggleButton from '@material-ui/lab/ToggleButton';\r\nimport ToggleButtonGroup from '@material-ui/lab/ToggleButtonGroup';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Pagination from '@material-ui/lab/Pagination';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Hidden from '@material-ui/core/Hidden';\r\nimport { socket } from '../context/SocketContext';\r\nimport { ServerContext } from '../context/ServerContext';\r\nimport { useLocalStore } from \"../services/LocalStoreService\";\r\n\r\nconst StyledTableCell = withStyles((theme) => ({\r\n    head: {\r\n        backgroundColor: theme.palette.common.black,\r\n        color: theme.palette.common.white,\r\n    },\r\n    body: {\r\n        fontSize: 14,\r\n    },\r\n}))(TableCell);\r\n\r\nconst StyledTableRow = withStyles((theme) => ({\r\n    root: {\r\n        '&:nth-of-type(odd)': {\r\n            backgroundColor: theme.palette.action.hover,\r\n        },\r\n    },\r\n}))(TableRow);\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        '& .MuiTextField-root': {\r\n            margin: theme.spacing(1),\r\n            width: 200,\r\n        },\r\n    },\r\n    // table: {\r\n    //     minWidth: 700,\r\n    // },\r\n    errortext: {\r\n        color: theme.palette.warning.dark,\r\n    },\r\n}));\r\n\r\nexport default function HistoryTable() {\r\n    const classes = useStyles();\r\n    const { access } = useContext(ServerContext)[0];\r\n    const mode = useLocalStore('mode', 'light')[0];\r\n    const [openDelete, setOpenDelete] = useState(false);\r\n    const [currentPage, setCurrentPage] = useState(1);\r\n\r\n    let [eventdata, setEventdata] = useState({\r\n        rows: [],\r\n        total: 0,\r\n    });\r\n\r\n    let [filter, setFilter] = useState({\r\n        type: ['order', 'event'],\r\n        event: '',\r\n        page: '1',\r\n    });\r\n\r\n    let [history, setHistory] = useState({\r\n        logs: [],\r\n        total: 0,\r\n    });\r\n\r\n    const handleHistoryChange = (hist) => {\r\n        let rows = []\r\n        hist.logs.reverse().forEach((log) => {\r\n            if (log.type !== 'order') log.type = 'event';\r\n            rows.push({\r\n                time: log.time,\r\n                type: log.type,\r\n                event: log.event,\r\n            });\r\n        });\r\n        setEventdata({\r\n            rows: rows,\r\n            total: hist.total,\r\n        })\r\n    }\r\n\r\n    useEffect(() => {\r\n        handleHistoryChange(history);\r\n\r\n        return () => {\r\n        }\r\n    }, [history]);\r\n\r\n    const handleEvent = (log, summary) => {\r\n        if (socket && access.allow) socket.emit(\"get-logs\", filter, access.token);\r\n    };\r\n\r\n    const handleDeleteAlerts = () => {\r\n        if (socket && access.allow) socket.emit(\"delete-alerts\", filter, access.token);\r\n        setOpenDelete(false);\r\n    };\r\n\r\n    useEffect(() => {\r\n        socket.on(\"event-history\", (data) => {\r\n            data.logs.forEach((log) => {\r\n                if (log.type !== 'order') log.type = 'event';\r\n            });\r\n            setHistory({\r\n                logs: data.logs,\r\n                total: data.total,\r\n            });\r\n        });\r\n        socket.on(\"event\", function (data) {\r\n            if (data.log.type !== 'order') data.log.type = 'event';\r\n            handleEvent(data.log, data.summary);\r\n        });\r\n\r\n        return () => {\r\n            socket.off(\"event-history\");\r\n            socket.off(\"event\");\r\n        }\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (socket && access.allow) socket.emit(\"get-logs\", filter, access.token);\r\n\r\n        return () => {\r\n        }\r\n    }, [filter]);\r\n\r\n    const handlePage = (event, newPage) => {\r\n        setCurrentPage(newPage);\r\n        setFilter({\r\n            type: filter.type,\r\n            event: filter.event,\r\n            page: newPage,\r\n        });\r\n    };\r\n\r\n    const handleTypeFilter = (event, newTypes) => {\r\n        setCurrentPage(1);\r\n        setFilter({\r\n            type: newTypes,\r\n            event: filter.event,\r\n            page: 1,\r\n            // page: filter.page,\r\n        });\r\n    };\r\n\r\n    const handleEventFilter = (e) => {\r\n        setCurrentPage(1);\r\n        setFilter({\r\n            type: filter.type,\r\n            event: e.target.value,\r\n            page: 1,\r\n            // page: filter.page,\r\n        });\r\n    }\r\n\r\n    return (\r\n        <Paper pt={2}>\r\n            <Dialog open={openDelete} onClose={() => setOpenDelete(false)}>\r\n                <DialogTitle>Confirm Delete</DialogTitle>\r\n                <DialogContent>\r\n                    <DialogContentText>\r\n                        <Typography color=\"textPrimary\">\r\n                            Warning: all alerts will be deleted, but all orders will be kept. This change cannot be reverted\r\n                        </Typography>\r\n                    </DialogContentText>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button variant=\"contained\" onClick={() => setOpenDelete(false)} color={(mode === 'light') ? \"primary\" : \"secondary\"}>\r\n                        Cancel\r\n                    </Button>\r\n                    <Button variant=\"contained\" onClick={handleDeleteAlerts} color={(mode === 'light') ? \"primary\" : \"secondary\"}>\r\n                        Delete Alerts\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n            <Grid container style={{ height: '60px' }} alignItems=\"center\" justify=\"space-between\">\r\n                <Grid container item xs={8}>\r\n                    <Box pl={1} pr={1} pt={3}>\r\n                        <Grid item xs={5}>\r\n                            <ToggleButtonGroup value={filter.type} onChange={handleTypeFilter} aria-label=\"type selection\">\r\n                                <ToggleButton value=\"order\" aria-label=\"order\" style={{ height: '30px' }} >\r\n                                    <Typography variant=\"overline\" noWrap>\r\n                                        Orders\r\n                                    </Typography>\r\n                                </ToggleButton>\r\n                                <ToggleButton value=\"event\" aria-label=\"event\" style={{ height: '30px' }} >\r\n                                    <Typography variant=\"overline\" noWrap>\r\n                                        Alerts\r\n                                    </Typography>\r\n                                </ToggleButton>\r\n                            </ToggleButtonGroup>\r\n                        </Grid>\r\n                    </Box>\r\n                    <Grid item xs={4}>\r\n                        <Hidden xsDown>\r\n                            <form className={classes.root} noValidate autoComplete=\"off\">\r\n                                <TextField id=\"event-filter\" label=\"Filter events\" color=\"secondary\" onChange={handleEventFilter} />\r\n                            </form>\r\n                        </Hidden>\r\n                    </Grid>\r\n                    <Grid item xs={3}></Grid>\r\n                </Grid>\r\n                <Grid item xs={4}>\r\n                    <Hidden xsDown>\r\n                        <Box pr={1} pt={1} display=\"flex\" justifyContent=\"flex-end\">\r\n                            <Button variant=\"contained\" color=\"primary\" onClick={() => setOpenDelete(true)}>\r\n                                Delete Alerts\r\n                            </Button>\r\n                        </Box>\r\n                    </Hidden>\r\n                </Grid>\r\n            </Grid>\r\n            <TableContainer component={Paper}>\r\n                <Table className={classes.table} size=\"small\" aria-label=\"customized table\">\r\n                    <TableHead>\r\n                        <TableRow>\r\n                            <StyledTableCell style={{ width: '170px' }}>Time</StyledTableCell>\r\n                            <StyledTableCell>Event</StyledTableCell>\r\n                        </TableRow>\r\n                    </TableHead>\r\n                    <TableBody>\r\n                        {eventdata.rows.map((row, i) => (\r\n                            <StyledTableRow key={i}>\r\n                                <StyledTableCell component=\"th\" scope=\"row\">\r\n                                    <Typography variant=\"caption\">{row.time}</Typography>\r\n                                </StyledTableCell>\r\n                                <StyledTableCell>\r\n                                    {(row.type === 'event') ? (\r\n                                        <Typography variant=\"body2\" className={classes.errortext}>{row.event}</Typography>\r\n                                    ) : (\r\n                                        <Typography variant=\"body2\">{row.event}</Typography>\r\n                                    )}\r\n                                </StyledTableCell>\r\n                            </StyledTableRow>\r\n                        ))}\r\n                    </TableBody>\r\n                </Table>\r\n            </TableContainer>\r\n            <Box display=\"flex\" justifyContent=\"flex-end\" >\r\n                <Pagination page={currentPage} count={Math.ceil(eventdata.total / 20)} shape=\"rounded\" onChange={handlePage} />\r\n            </Box>\r\n        </Paper>\r\n    );\r\n}\r\n","import React, { useContext } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport HistoryTable from \"../components/HistoryTable\";\r\nimport StatusView from '../components/StatusView';\r\nimport TimelineView from \"../components/TimelineView\";\r\nimport { PerformanceContext } from '../context/PerformanceContext';\r\nimport Hidden from '@material-ui/core/Hidden';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    flexGrow: 1,\r\n  },\r\n  paper: {\r\n    padding: theme.spacing(2),\r\n  },\r\n}));\r\n\r\nconst EventHistory = (props) => {\r\n  const classes = useStyles();\r\n  const performance = useContext(PerformanceContext)[0];\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Grid container spacing={3}>\r\n        <Grid item xs={12} md={4} lg={6}>\r\n          <Typography variant=\"h3\" noWrap>\r\n            Event History\r\n          </Typography>\r\n        </Grid>\r\n        <Hidden xsDown>\r\n          <Grid item xs={12} sm={6} md={4} lg={3}>\r\n            <TimelineView data={performance} />\r\n          </Grid>\r\n        </Hidden>\r\n        <Grid item xs={12} sm={6} md={4} lg={3}>\r\n          <StatusView />\r\n        </Grid>\r\n        <Grid item xs={12} lg={9}>\r\n          <HistoryTable />\r\n        </Grid>\r\n        {/* <Grid item xs={0} lg={3}>\r\n        </Grid> */}\r\n      </Grid>\r\n    </div>\r\n  );\r\n}\r\nexport default EventHistory;\r\n","import React, { useState, createContext } from 'react';\r\n\r\nexport const ConfigurationInputContext = createContext();\r\n\r\nexport const ConfigurationInputProvider = (props) => {\r\n    const [configurationInput, setConfigurationInput] = useState({});\r\n\r\n    return (\r\n        <ConfigurationInputContext.Provider value={[configurationInput, setConfigurationInput]}>\r\n            {props.children}\r\n        </ConfigurationInputContext.Provider>\r\n    )\r\n}","import React, { useState, createContext } from 'react';\r\n\r\nexport const ExchangesContext = createContext();\r\n\r\nexport const ExchangesProvider = (props) => {\r\n    const [exchanges, setExchanges] = useState([]);\r\n\r\n    return (\r\n        <ExchangesContext.Provider value={[exchanges, setExchanges]}>\r\n            {props.children}\r\n        </ExchangesContext.Provider>\r\n    )\r\n}","import { withStyles } from '@material-ui/core/styles';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\n\r\nexport const HtmlTooltip = withStyles((theme) => ({\r\n    tooltip: {\r\n        backgroundColor: (theme.palette.type === 'light') ? \"#FFFFFF\" : \"#000000\",\r\n        color: (theme.palette.type === 'light') ? \"#000000\" : \"#FFFFFF\",\r\n        maxWidth: 800,\r\n        fontSize: theme.typography.pxToRem(14),\r\n        border: '1px solid #888888',\r\n    },\r\n}))(Tooltip);","import React, { useState, useContext, useEffect } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport { ConfigurationInputContext } from '../context/ConfigurationInputContext';\r\nimport { ServerContext } from '../context/ServerContext';\r\nimport { ExchangesContext } from '../context/ExchangesContext';\r\nimport InfoOutlinedIcon from '@material-ui/icons/InfoOutlined';\r\nimport { HtmlTooltip } from './HtmlToolTip';\r\nimport { useTheme } from '@material-ui/core/styles';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Box from '@material-ui/core/Box';\r\nimport Link from '@material-ui/core/Link';\r\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\r\nimport Select from '@material-ui/core/Select';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport FormHelperText from '@material-ui/core/FormHelperText';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    textinput: {\r\n        width: '380px',\r\n    },\r\n    select: {\r\n        width: '380px',\r\n    },\r\n}));\r\n\r\nexport default function ConfigP1(props) {\r\n    const classes = useStyles();\r\n    const mode = useTheme().palette.type;\r\n\r\n    const exchangesWithPassword = ['Bitget', 'Coinbasepro', 'Kucoin', 'Okcoin', 'Okx'];\r\n\r\n    const input = useContext(ConfigurationInputContext)[0];\r\n    const [{ serverip }] = useContext(ServerContext);\r\n    const [exchange, setExchange] = useState(input.exchange || '');\r\n    const [apiKey, setApiKey] = useState(input.apiKey || '');\r\n    const [apiSecret, setApiSecret] = useState(input.apiSecret || '');\r\n    const [apiPassword, setApiPassword] = useState(input.apiPassword || null);\r\n    const exchanges = useContext(ExchangesContext)[0];\r\n    const [requirePassword, setRequirePassword] = useState(exchangesWithPassword.includes(input.exchange) || false);\r\n\r\n    useEffect(() => {\r\n        setExchange(input.exchange);\r\n        setApiKey(input.apiKey);\r\n        setApiSecret(input.apiSecret);\r\n        setApiPassword(input.apiPassword);\r\n\r\n        if (exchangesWithPassword.includes(input.exchange)) {\r\n            setRequirePassword(true);\r\n        }\r\n\r\n        return () => {\r\n        }\r\n    }, [input]);\r\n\r\n    // Reorder the exchanges so these can be properly shown in two columns\r\n    let merged = [];\r\n    const mid = Math.ceil(exchanges.length / 2);\r\n    const firstHalf = exchanges.slice(0, mid);\r\n    const secondHalf = exchanges.slice(mid);\r\n\r\n    for (let i = 0; i < mid; i++) {\r\n        if (firstHalf[i]) merged.push(firstHalf[i]);\r\n        if (secondHalf[i]) merged.push(secondHalf[i]);\r\n    }\r\n\r\n    const onInput = (e) => {\r\n        props.callback({\r\n            field: e.target.id,\r\n            input: e.target.value\r\n        });\r\n\r\n        if (e.target.id === 'apiKey') setApiKey(e.target.value);\r\n        if (e.target.id === 'apiSecret') setApiSecret(e.target.value);\r\n        if (e.target.id === 'apiPassword') setApiPassword(e.target.value);\r\n    }\r\n\r\n    const onExchange = (e) => {\r\n        props.callback({\r\n            field: e.target.name,\r\n            input: e.target.value\r\n        });\r\n        setExchange(e.target.value);\r\n\r\n        if (exchangesWithPassword.includes(e.target.value)) {\r\n            setRequirePassword(true);\r\n        } else {\r\n            setRequirePassword(false);\r\n        }\r\n    }\r\n\r\n    const [open, setOpen] = useState(false);\r\n\r\n    const handleTooltipClose = () => {\r\n        setOpen(false);\r\n    };\r\n\r\n    const handleTooltipOpen = () => {\r\n        setOpen(true);\r\n    };\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <Grid container alignItems=\"flex-end\">\r\n                <Grid item xs={11}>\r\n                    <Typography variant=\"h6\" gutterBottom>\r\n                        Exchange Details\r\n                    </Typography>\r\n                </Grid>\r\n                <Grid item xs={1}>\r\n                    <ClickAwayListener onClickAway={handleTooltipClose}>\r\n                        <HtmlTooltip\r\n                            mode={mode}\r\n                            title={\r\n                                <React.Fragment>\r\n                                    <Box m={2}>\r\n                                        {\"If you haven't done so already, logon to your exchange, go to API Management and create a new API key. \"}<b>{\"Make sure the API key is enabled for spot trading\"}</b>{\". Then enter the API key and API secret here.\"}\r\n                                        <div>&nbsp;</div>\r\n                                        {\"Also, \"}<b>{\"make sure your server's IP address is added to the API key's IP whitelist (if enabled)\"}</b>{\". You can find the IP whitelist under API Management, where you've created your API key. If you run Balance Bot on your PC, then use the IP address of your internet connection, which you can find e.g. here \"}<Link href=\"https://www.whatsmyip.org/\" target=\"_blank\" rel=\"noopener\" color=\"secondary\">www.whatsmyip.org</Link>{\". If you run Balance Bot in the cloud, then use the IP address of your cloud server.\"}\r\n                                        <div>&nbsp;</div>\r\n                                        <div><i>{\"Note: \"}</i>{\"you only need to enter the API details once, as they will be stored on the server for later use. If you want to change the configuration settings at a later point, you can just click the Next button and reuse the API details that you've already configured previously. If you want to change to a different API key, you can entering the new details here.\"}</div>\r\n                                    </Box>\r\n                                </React.Fragment>\r\n                            }\r\n                            onClose={handleTooltipClose}\r\n                            open={open}\r\n                            disableFocusListener\r\n                            disableHoverListener\r\n                            disableTouchListener\r\n                            interactive\r\n                        >\r\n                            <IconButton onClick={open ? handleTooltipClose : handleTooltipOpen}>\r\n                                <InfoOutlinedIcon color=\"secondary\" />\r\n                            </IconButton>\r\n                        </HtmlTooltip>\r\n                    </ClickAwayListener>\r\n                </Grid>\r\n            </Grid>\r\n            <form style={{ minWidth: '100%' }}>\r\n                <Grid container spacing={3}>\r\n                    <Grid item xs={12}>\r\n                        <Grid item xs={5}>\r\n                            <FormControl>\r\n                                <InputLabel>Exchange</InputLabel>\r\n                                <Select\r\n                                    MenuProps={{ classes: { paper: classes.select } }}\r\n                                    required\r\n                                    labelId=\"exchange\"\r\n                                    name=\"exchange\"\r\n                                    value={exchange}\r\n                                    onChange={onExchange}\r\n                                    className={classes.textinput}\r\n                                    disabled={input.configstate !== 'initial'}\r\n                                >\r\n                                    {merged.map((exchange, i) => {\r\n                                        return <MenuItem style={{ display: \"inline-flex\", width: \"190px\" }} key={i} value={exchange}>{exchange}</MenuItem>\r\n                                    })}\r\n                                </Select>\r\n                                <FormHelperText>Exchange cannot be changed after initial bot configuration</FormHelperText>\r\n                            </FormControl>\r\n                        </Grid>\r\n                    </Grid>\r\n                    <Grid item xs={12}>\r\n                        <TextField\r\n                            required\r\n                            id=\"apiKey\"\r\n                            name=\"apiKey\"\r\n                            label=\"API Key\"\r\n                            type=\"password\"\r\n                            value={apiKey}\r\n                            onChange={onInput}\r\n                            fullWidth\r\n                        />\r\n                    </Grid>\r\n                    <Grid item xs={12}>\r\n                        <TextField\r\n                            required\r\n                            id=\"apiSecret\"\r\n                            name=\"apiSecret\"\r\n                            label=\"API Secret\"\r\n                            type=\"password\"\r\n                            value={apiSecret}\r\n                            onChange={onInput}\r\n                            fullWidth\r\n                        />\r\n                    </Grid>\r\n                    <Grid item xs={12} hidden={!requirePassword}>\r\n                        <TextField\r\n                            hidden={!requirePassword}\r\n                            required\r\n                            id=\"apiPassword\"\r\n                            name=\"apiPassword\"\r\n                            label=\"API Password / Passphrase\"\r\n                            type=\"password\"\r\n                            value={apiPassword || ''}\r\n                            onChange={onInput}\r\n                            fullWidth\r\n                        />\r\n                    </Grid>\r\n                </Grid>\r\n            </form>\r\n            <Grid item xs={12}>\r\n                <Box m={4}></Box>\r\n                <Box m={0}>\r\n                    <Typography variant=\"overline\" color=\"secondary\">\r\n                        &gt; Make sure your API key is enabled for spot trading\r\n                    </Typography>\r\n                </Box>\r\n                <Box m={0}>\r\n                    {serverip === '0.0.0.0' ? (\r\n                        <Typography variant=\"overline\" color=\"secondary\">\r\n                            &gt; Make sure your server's IP address is added to the API key's IP whitelist (if enabled)\r\n                        </Typography>\r\n                    ) : (\r\n                        <Typography variant=\"overline\" color=\"secondary\">\r\n                            &gt; Make sure your server's IP address ({serverip}) is added to the API key's IP whitelist (if enabled)\r\n                        </Typography>\r\n                    )}\r\n                </Box>\r\n            </Grid>\r\n        </React.Fragment >\r\n    );\r\n}","import React, { useState, createContext } from 'react';\r\n\r\nexport const CoinContext = createContext();\r\n\r\nexport const CoinProvider = (props) => {\r\n    const [basecoins, setBasecoins] = useState([]);\r\n\r\n    return (\r\n        <CoinContext.Provider value={[basecoins, setBasecoins]}>\r\n            {props.children}\r\n        </CoinContext.Provider>\r\n    )\r\n}","import React, { useState, useEffect, useContext, useRef } from 'react';\r\nimport { withStyles, makeStyles, lighten } from '@material-ui/core/styles';\r\nimport PropTypes from 'prop-types';\r\nimport clsx from 'clsx';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport TableSortLabel from '@material-ui/core/TableSortLabel';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport Slider from '@material-ui/core/Slider';\r\nimport Box from '@material-ui/core/Box';\r\nimport Skeleton from '@material-ui/lab/Skeleton';\r\nimport { ConfigurationContext } from '../context/ConfigurationContext';\r\nimport { ConfigurationInputContext } from '../context/ConfigurationInputContext';\r\nimport { CoinContext } from '../context/CoinContext';\r\nimport { ServerContext } from '../context/ServerContext';\r\nimport InfoOutlinedIcon from '@material-ui/icons/InfoOutlined';\r\nimport { HtmlTooltip } from './HtmlToolTip';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\r\nimport Select from '@material-ui/core/Select';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport FormHelperText from '@material-ui/core/FormHelperText';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport Input from '@material-ui/core/Input';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Button from '@material-ui/core/Button';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\nimport { useLocalStore } from \"../services/LocalStoreService\";\r\nimport { socket } from '../context/SocketContext';\r\n\r\nconst iOSBoxShadow =\r\n    '0 3px 1px rgba(0,0,0,0.1),0 4px 8px rgba(0,0,0,0.13),0 0 0 1px rgba(0,0,0,0.02)';\r\n\r\nconst MySlider = withStyles({\r\n    root: {\r\n        height: 2,\r\n        padding: '15px 0',\r\n    },\r\n    thumb: {\r\n        height: 28,\r\n        width: 28,\r\n        boxShadow: iOSBoxShadow,\r\n        marginTop: -14,\r\n        marginLeft: -14,\r\n        '&:focus, &:hover, &$active': {\r\n            boxShadow: '0 3px 1px rgba(0,0,0,0.1),0 4px 8px rgba(0,0,0,0.3),0 0 0 1px rgba(0,0,0,0.02)',\r\n            // Reset on touch devices, it doesn't add specificity\r\n            '@media (hover: none)': {\r\n                boxShadow: iOSBoxShadow,\r\n            },\r\n        },\r\n    },\r\n    active: {},\r\n    valueLabel: {\r\n        left: 'calc(-50% + 12px)',\r\n        top: 9,\r\n        '& *': {\r\n            background: 'transparent',\r\n            color: '#FFFFFF',\r\n        },\r\n    },\r\n    track: {\r\n        height: 3,\r\n    },\r\n    rail: {\r\n        height: 2,\r\n        opacity: 0.5,\r\n        backgroundColor: 'secondary',\r\n    },\r\n    mark: {\r\n        backgroundColor: 'secondary',\r\n        height: 8,\r\n        width: 1,\r\n        marginTop: -3,\r\n    },\r\n    markActive: {\r\n        opacity: 1,\r\n        backgroundColor: 'currentColor',\r\n    },\r\n})(Slider);\r\n\r\nconst headCells = [\r\n    { id: 'coin', align: 'left', disablePadding: true, label: 'Coin' },\r\n    { id: 'change', align: 'center', disablePadding: false, label: 'Distribution Weight' },\r\n    { id: 'targetdistribution', align: 'left', disablePadding: true, label: 'Target Distribution' },\r\n    { id: 'currentdistribution', align: 'left', disablePadding: true, label: 'Current Distribution' },\r\n    { id: 'offset', align: 'right', disablePadding: true, label: 'Coin Offset' },\r\n    { id: 'notifications', align: 'left', disablePadding: false, label: '' },\r\n    { id: 'delete', align: 'right', disablePadding: false, label: '' },\r\n];\r\n\r\nconst marks = [\r\n    {\r\n        value: -1,\r\n        label: '',\r\n    },\r\n    {\r\n        value: 100,\r\n        label: '',\r\n    },\r\n];\r\n\r\nconst useTableHeadStyles = makeStyles((theme) => ({\r\n    headcolor:\r\n        theme.palette.type === 'light'\r\n            ? {\r\n                backgroundColor: '#aaaaaa',\r\n            }\r\n            : {\r\n                backgroundColor: '#777777',\r\n            },\r\n    headheight: {\r\n        height: 44,\r\n    },\r\n}));\r\n\r\nfunction EnhancedTableHead(props) {\r\n    const { onSelectAllClick, numSelected, rowCount } = props;\r\n    const classes = useTableHeadStyles();\r\n\r\n    let checkbox;\r\n    checkbox = <Checkbox\r\n        indeterminate={numSelected > 0 && numSelected < rowCount}\r\n        checked={rowCount > 0 && numSelected === rowCount}\r\n        onChange={onSelectAllClick}\r\n        inputProps={{ 'aria-label': 'select coins' }}\r\n    />\r\n    return (\r\n        <TableHead>\r\n            <TableRow className={`${classes.headcolor} ${classes.headheight}`}>\r\n                <TableCell padding=\"checkbox\">\r\n                    {checkbox}\r\n                </TableCell>\r\n                {headCells.map((headCell) => (\r\n                    <TableCell\r\n                        key={headCell.id}\r\n                        align={headCell.align}\r\n                        padding={headCell.disablePadding ? 'none' : 'default'}\r\n                    >\r\n                        <TableSortLabel>\r\n                            {headCell.label}\r\n                        </TableSortLabel>\r\n                    </TableCell>\r\n                ))}\r\n            </TableRow>\r\n        </TableHead>\r\n    );\r\n}\r\n\r\nEnhancedTableHead.propTypes = {\r\n    classes: PropTypes.object.isRequired,\r\n    numSelected: PropTypes.number.isRequired,\r\n    onSelectAllClick: PropTypes.func.isRequired,\r\n    rowCount: PropTypes.number.isRequired,\r\n};\r\n\r\nconst useToolbarStyles = makeStyles((theme) => ({\r\n    root: {\r\n        paddingLeft: theme.spacing(2),\r\n        paddingRight: theme.spacing(1),\r\n        maxWidth: 960,\r\n        minWidth: 960,\r\n    },\r\n    highlight:\r\n        theme.palette.type === 'light'\r\n            ? {\r\n                color: theme.palette.secondary.main,\r\n                backgroundColor: lighten(theme.palette.secondary.light, 0.85),\r\n            }\r\n            : {\r\n                color: theme.palette.text.primary,\r\n                backgroundColor: theme.palette.secondary.dark,\r\n            },\r\n    title: {\r\n        flex: '1 1 100%',\r\n    },\r\n}));\r\n\r\nconst EnhancedTableToolbar = (props) => {\r\n    const classes = useToolbarStyles();\r\n    const { selected } = props;\r\n    const numSelected = selected.length;\r\n\r\n    return (\r\n        <Toolbar\r\n            className={clsx(classes.root, {\r\n                [classes.highlight]: numSelected > 0,\r\n            })}\r\n        >\r\n            {numSelected > 0 ? (\r\n                <Typography className={classes.title} color=\"inherit\" variant=\"subtitle1\" component=\"div\">\r\n                    {(numSelected === 1) ? 'Coin' : 'Coins'} <i>excluded</i> from balancing: {selected.join(', ')}\r\n                </Typography>\r\n            ) : (\r\n                <Typography className={classes.title} variant=\"subtitle1\" id=\"tableTitle\" component=\"div\">\r\n                    Set target distribution and (optionally) select coins to be <i>excluded</i> from balancing\r\n                </Typography>\r\n            )}\r\n        </Toolbar>\r\n    );\r\n};\r\n\r\nEnhancedTableToolbar.propTypes = {\r\n    selected: PropTypes.array.isRequired,\r\n    portfolio: PropTypes.array.isRequired,\r\n    setSelected: PropTypes.func.isRequired,\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        width: '100%',\r\n    },\r\n    paper: {\r\n        width: '800px',\r\n        marginBottom: theme.spacing(2),\r\n    },\r\n    table: {\r\n        maxWidth: 960,\r\n        minWidth: 960,\r\n        \"& .MuiTableCell-sizeSmall\": {\r\n            paddingTop: \"6px\",\r\n            paddingBottom: \"0px\",\r\n        },\r\n    },\r\n    cell: {\r\n        width: 50,\r\n    },\r\n    cell2: {\r\n        width: 120,\r\n    },\r\n    textinput: {\r\n        width: '380px',\r\n    },\r\n    textinput2: {\r\n        width: '120px',\r\n    },\r\n    visuallyHidden: {\r\n        border: 0,\r\n        clip: 'rect(0 0 0 0)',\r\n        height: 1,\r\n        margin: -1,\r\n        overflow: 'hidden',\r\n        padding: 0,\r\n        position: 'absolute',\r\n        top: 20,\r\n        width: 1,\r\n    },\r\n}));\r\n\r\nconst LightTooltip = withStyles((theme) => ({\r\n    tooltip: {\r\n        backgroundColor: theme.palette.common.white,\r\n        color: 'rgba(0, 0, 0, 0.87)',\r\n        boxShadow: theme.shadows[1],\r\n        fontSize: 12,\r\n    },\r\n}))(Tooltip);\r\n\r\nexport default function ConfigP2(props) {\r\n    const classes = useStyles();\r\n\r\n    const sort = (pf) => {\r\n        return (pf.length > 0) ? pf.sort((a, b) => (a.coin > b.coin) ? 1 : ((b.coin > a.coin) ? -1 : 0)) : [];\r\n    }\r\n\r\n    const [basecoins, setBasecoins] = useContext(CoinContext);\r\n    const configuration = useContext(ConfigurationContext)[0];\r\n    const input = useContext(ConfigurationInputContext)[0];\r\n    const newPortfolio = (input.portfolio) ? sort(input.portfolio) : [];\r\n    const [portfolio, setPortfolio] = useState(newPortfolio);\r\n    const [portfolioReceived, setPortfolioReceived] = useState(false);\r\n    const [coinsReceived, setCoinsReceived] = useState(false);\r\n    const [selected, setSelected] = useState([]);\r\n    const [basecoin, setBasecoin] = useState(input.basecoin);\r\n    const { access } = useContext(ServerContext)[0];\r\n    const initialOffset = useRef([]);\r\n    const [openDelete, setOpenDelete] = useState(false);\r\n    const [deleteCoin, setDeleteCoin] = useState('');\r\n    const excludedChangeRef = useRef(input.excludedChange || []);\r\n    const offsetChangeRef = useRef(input.offsetChange || []);\r\n    const mode = useLocalStore('mode', 'light')[0];\r\n\r\n    const precision = 2;\r\n\r\n    const onInput = (data) => {\r\n        props.callback({\r\n            field: 'portfolio',\r\n            input: data,\r\n        });\r\n    }\r\n\r\n    const onBasecoin = (e) => {\r\n        // Reset sliders and excludes if basecoin is changed\r\n        if (input.basecoin !== '') resetPortfolio();\r\n\r\n        props.callback({\r\n            field: e.target.name,\r\n            input: e.target.value\r\n        });\r\n\r\n        setBasecoin(e.target.value);\r\n\r\n        setPortfolioReceived(false);\r\n        getPortfolio();\r\n    }\r\n\r\n    const getPortfolio = () => {\r\n        if (socket && access.allow) socket.emit(\"get-portfolio\", {\r\n            exchange: input.exchange,\r\n            apiKey: input.apiKey,\r\n            apiSecret: input.apiSecret,\r\n            apiPassword: input.apiPassword,\r\n            basecoin: input.basecoin,\r\n        }, access.token);\r\n    }\r\n\r\n    useEffect(() => {\r\n        let isMounted = true;\r\n\r\n        let newSelected = [];\r\n        newPortfolio.forEach((coin) => {\r\n            if (coin.excluded) newSelected.push(coin.coin);\r\n        });\r\n        setSelected(newSelected);\r\n\r\n        if (input.basecoin !== '') setBasecoins([input.basecoin]);\r\n\r\n        socket.on(\"portfolio\", data => {\r\n            if (!isMounted) return;\r\n\r\n            data = sort(data);\r\n            // Upon initial configuration, basecoin needs to be set\r\n            if (input.basecoin === '' && input.configstate === 'initial') {\r\n                let base = [];\r\n                let usercoins = [];\r\n                let options = ['BTC', 'EUR', 'ETH', 'USD', 'BUSD', 'TUSD', 'USDT', 'USDC', 'USDP'];\r\n\r\n                data.forEach((coin) => {\r\n                    usercoins.push(coin.coin);\r\n                });\r\n\r\n                base = options.filter((coin) => {\r\n                    return (usercoins.includes(coin));\r\n                });\r\n\r\n                setBasecoins(base);\r\n                setCoinsReceived(true);\r\n            } else {\r\n                // data is false if the API key or secret are invalid, or if the server's IP address is not whitelisted on the exchange\r\n                if (data !== false) {\r\n                    const numCoins = data.length;\r\n                    data.forEach((coin) => {\r\n                        // Check if coin was already in portfolio or is newly added to account\r\n                        const match = input.portfolio.find(c => c.coin === coin.coin);\r\n                        if (!match) {\r\n                            coin.offset = 0;\r\n                            // On initial configuration, don't exclude coins\r\n                            if (input.portfolio.length !== 0) {\r\n                                coin.slider = -1;\r\n                                coin.distribution = (0).toFixed(precision);\r\n                                coin.excluded = true;\r\n                                setSelected(prevState => [...prevState, coin.coin]);\r\n                            } else {\r\n                                coin.slider = -1;\r\n                                coin.distribution = (100 / numCoins).toFixed(precision);\r\n                                coin.excluded = false;\r\n                            }\r\n                        } else {\r\n                            // Keep previously set attributes\r\n                            coin.offset = match.offset || 0;\r\n                            coin.slider = match.slider;\r\n                            coin.distribution = parseFloat(match.distribution).toFixed(precision);\r\n                            coin.excluded = match.excluded;\r\n                        }\r\n                        // Store initial offset\r\n                        initialOffset.current.push({\r\n                            coin: coin.coin,\r\n                            offset: coin.offset\r\n                        });\r\n                    });\r\n\r\n                    data = updateCurrentDistribution(data);\r\n                    setPortfolioReceived(true);\r\n                    setPortfolio(data);\r\n                    onInput(data);\r\n                }\r\n            }\r\n        });\r\n\r\n        return () => {\r\n            isMounted = false;\r\n            socket.off(\"portfolio\");\r\n        }\r\n    }, []);\r\n\r\n    const updateCurrentDistribution = (data) => {\r\n        let totalValue = 0;\r\n        data.forEach((c) => {\r\n            if (!c.excluded) {\r\n                const match = initialOffset.current.find((c2) => c2.coin === c.coin);\r\n                const offset = (c.offset === '-' || c.offset === '.') ? Number(0) : Number(c.offset);\r\n                totalValue += Math.max(c.number + offset - Number(match.offset), 0) * c.price;\r\n            }\r\n        });\r\n\r\n        data.forEach((c) => {\r\n            if (!c.excluded) {\r\n                const match = initialOffset.current.find((c2) => c2.coin === c.coin);\r\n                const offset = (c.offset === '-' || c.offset === '.') ? Number(0) : Number(c.offset);\r\n                const distr = (Math.max(c.number + offset - Number(match.offset), 0) * c.price / totalValue * 100).toFixed(precision);\r\n                c.currentDistribution = distr;\r\n            } else {\r\n                c.currentDistribution = (0).toFixed(precision);\r\n            }\r\n        });\r\n        return data;\r\n    }\r\n\r\n    const resetPortfolio = () => {\r\n        setSelected([]);\r\n        setPortfolio([]);\r\n        onInput([]);\r\n    }\r\n\r\n    const handleSelectAllClick = (event) => {\r\n        let newSelected = [];\r\n        let allSelected = false;\r\n        if (selected.length === 0) {\r\n            newSelected = portfolio.map((n) => n.coin).filter(coin => coin !== input.basecoin);\r\n            allSelected = true;\r\n        }\r\n        setSelected(newSelected);\r\n\r\n        portfolio.forEach((coin) => {\r\n            handleSlider(coin.slider, coin.coin, newSelected);\r\n            if (coin.coin !== input.basecoin) toggleExcluded(coin.coin, allSelected);\r\n        });\r\n\r\n        updateCurrentDistribution(portfolio);\r\n    };\r\n\r\n    const handleClick = (coin) => {\r\n        if (coin !== input.basecoin) {\r\n            const selectedIndex = selected.indexOf(coin);\r\n\r\n            let newPortfolio = [...portfolio];\r\n            let match = newPortfolio.find(c => c.coin === coin);\r\n            match.excluded = (selectedIndex === -1);\r\n            setPortfolio(newPortfolio);\r\n\r\n            let newSelected = [];\r\n\r\n            if (selectedIndex === -1) {\r\n                newSelected = newSelected.concat(selected, coin);\r\n            } else if (selectedIndex === 0) {\r\n                newSelected = newSelected.concat(selected.slice(1));\r\n            } else if (selectedIndex === selected.length - 1) {\r\n                newSelected = newSelected.concat(selected.slice(0, -1));\r\n            } else if (selectedIndex > 0) {\r\n                newSelected = newSelected.concat(\r\n                    selected.slice(0, selectedIndex),\r\n                    selected.slice(selectedIndex + 1),\r\n                );\r\n            }\r\n\r\n            setSelected(newSelected);\r\n            toggleExcluded(coin, match.excluded);\r\n            handleSlider(match.slider, match.coin, newSelected);\r\n            updateCurrentDistribution(portfolio);\r\n        }\r\n    };\r\n\r\n    const toggleExcluded = (coin, excluded) => {\r\n        let original = configuration.portfolio.find(c => c.coin === coin);\r\n\r\n        // In case of first-time setup, or if coin is added to the portfolio\r\n        if (!original) original = input.portfolio.find(c => c.coin === coin);\r\n\r\n        if (original.excluded !== excluded) {\r\n            let match = excludedChangeRef.current.find(c => c.coin === coin);\r\n\r\n            if (match) {\r\n                match.excluded = !match.excluded;\r\n                // const index = excludedChangeRef.current.findIndex(c => c.coin === coin);\r\n                // excludedChangeRef.current.splice(index, 1);\r\n            } else {\r\n                excludedChangeRef.current.push({\r\n                    coin: coin,\r\n                    excluded: excluded,\r\n                });\r\n            }\r\n        } else {\r\n            let match = excludedChangeRef.current.find(c => c.coin === coin);\r\n\r\n            if (match) {\r\n                match.excluded = !match.excluded;\r\n                // const index = excludedChangeRef.current.findIndex(c => c.coin === coin);\r\n                // excludedChangeRef.current.splice(index, 1);\r\n            } else {\r\n                // Check if coin was added to the portfolio\r\n                const match2 = input.portfolio.find(c => c.coin === coin.coin);\r\n\r\n                if (input.portfolio.length !== 0 && !match2) {\r\n                    excludedChangeRef.current.push({\r\n                        coin: coin,\r\n                        excluded: excluded,\r\n                    });\r\n                }\r\n            }\r\n        }\r\n\r\n        props.callback({\r\n            field: 'excludedChange',\r\n            input: excludedChangeRef.current,\r\n        });\r\n    }\r\n\r\n    const handleSlider = (value, coin, select = selected) => {\r\n        let newPortfolio = [...portfolio];\r\n        let match = newPortfolio.find(c => c.coin === coin);\r\n        match.slider = value;\r\n\r\n        let totalSlider = 0;\r\n        let numSlider = 0;\r\n        newPortfolio.forEach((coin) => {\r\n            if (select.indexOf(coin.coin) === -1) {\r\n                totalSlider += coin.slider;\r\n                if (coin.slider === -1) totalSlider++;\r\n                if (coin.slider !== -1) numSlider++;\r\n            }\r\n        });\r\n        let maxSlider;\r\n        const remainingSlider = 100 - totalSlider;\r\n        const numCoinsZero = newPortfolio.length - numSlider - select.length;\r\n        maxSlider = (numCoinsZero === 0) ? totalSlider : Math.max(100, totalSlider);\r\n        newPortfolio.forEach((coin) => {\r\n            coin.excluded = false;\r\n            if (select.indexOf(coin.coin) !== -1) {\r\n                coin.distribution = (0).toFixed(precision);\r\n                coin.excluded = true;\r\n            } else if (maxSlider <= 100) {\r\n                if (coin.slider === -1) coin.distribution = (remainingSlider / numCoinsZero).toFixed(precision);\r\n                else coin.distribution = (coin.slider / maxSlider * 100).toFixed(precision);\r\n            } else {\r\n                if (coin.slider === -1) coin.distribution = (0).toFixed(precision);\r\n                else coin.distribution = (coin.slider / maxSlider * 100).toFixed(precision);\r\n            }\r\n        });\r\n\r\n        setPortfolio(newPortfolio);\r\n        onInput(newPortfolio);\r\n    };\r\n\r\n    const handleOffset = (event, coin) => {\r\n        const pattern = /^-?([0-9]*)((\\.|,)\\d{0,8})?$/\r\n        let value = event.target.value;\r\n        if (pattern.test(value)) {\r\n            // Handle commas in input\r\n            if (value.includes(',')) value = value.replace(',', '.');\r\n            let newPortfolio = [...portfolio];\r\n            const offset = value;\r\n\r\n            let match = newPortfolio.find(c => c.coin === coin);\r\n            match.offset = offset;\r\n\r\n            newPortfolio = updateCurrentDistribution(newPortfolio);\r\n            setPortfolio(newPortfolio);\r\n\r\n            // Detect offset changes\r\n\r\n            let original = configuration.portfolio.find(c => c.coin === coin);\r\n\r\n            // In case of first-time setup (!original) set the original offset to zero so any change is detected\r\n            if (!original) {\r\n                original = {\r\n                    offset: 0,\r\n                };\r\n            }\r\n\r\n            if (original.offset !== offset) {\r\n                let match = offsetChangeRef.current.find(c => c.coin === coin);\r\n\r\n                if (match) {\r\n                    match.change = offset - original.offset;\r\n                } else {\r\n                    offsetChangeRef.current.push({\r\n                        coin: coin,\r\n                        change: offset - original.offset,\r\n                    });\r\n                }\r\n            } else {\r\n                let match = offsetChangeRef.current.find(c => c.coin === coin);\r\n\r\n                if (match) {\r\n                    match.change = 0;\r\n                }\r\n            }\r\n\r\n            props.callback({\r\n                field: 'offsetChange',\r\n                input: offsetChangeRef.current,\r\n            });\r\n        }\r\n    }\r\n\r\n    const handleBlur = (coin) => {\r\n        let newPortfolio = [...portfolio];\r\n        // offset is a string during entry, to get full control on the entered values\r\n        // when leaving the input field, convert to number, and update input\r\n        const match = portfolio.find((c) => c.coin === coin);\r\n        const offset = (match.offset === '-' || match.offset === '.') ? Number(0) : Number(match.offset);\r\n        match.offset = offset;\r\n\r\n        setPortfolio(newPortfolio);\r\n        onInput(newPortfolio);\r\n    }\r\n\r\n    const handleDelete = (coin) => {\r\n        setDeleteCoin(coin);\r\n        setOpenDelete(true);\r\n    }\r\n\r\n    const confirmDelete = (coin) => {\r\n        // Remove from excluded list at the top of the table\r\n        handleClick(coin);\r\n\r\n        let newPortfolio = [...portfolio];\r\n        const index = portfolio.findIndex((c) => c.coin === coin);\r\n        newPortfolio.splice(index, 1);\r\n        setPortfolio(newPortfolio);\r\n        onInput(newPortfolio);\r\n    }\r\n\r\n    const labelFormatter = (value) => {\r\n        if (value === -1) return '=';\r\n        return value;\r\n    }\r\n\r\n    const isSelected = (coin) => selected.indexOf(coin) !== -1;\r\n\r\n    const [open, setOpen] = useState(false);\r\n\r\n    const handleTooltipClose = () => {\r\n        setOpen(false);\r\n    };\r\n\r\n    const handleTooltipOpen = () => {\r\n        setOpen(true);\r\n    };\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <Dialog open={openDelete} onClose={() => setOpenDelete(false)}>\r\n                <DialogTitle>Confirm Deletion</DialogTitle>\r\n                <DialogContent>\r\n                    <DialogContentText>\r\n                        Are you sure you want to delete {deleteCoin} from this list?\r\n                    </DialogContentText>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button variant=\"contained\" onClick={() => setOpenDelete(false)} color={(mode === 'light') ? \"primary\" : \"secondary\"} >\r\n                        Cancel\r\n                    </Button>\r\n                    <Button variant=\"contained\" onClick={() => { setOpenDelete(false); confirmDelete(deleteCoin) }} color={(mode === 'light') ? \"primary\" : \"secondary\"} >\r\n                        Delete\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n            <Grid container alignItems=\"flex-end\">\r\n                <Grid item xs={11}>\r\n                    <Typography variant=\"h6\" gutterBottom>\r\n                        Coin Settings\r\n                    </Typography>\r\n                </Grid>\r\n                <Grid item xs={1}>\r\n                    <ClickAwayListener onClickAway={handleTooltipClose}>\r\n                        <HtmlTooltip\r\n                            title={\r\n                                <React.Fragment>\r\n                                    <Box m={2}>\r\n                                        <div><b>{\"Base coin\"}</b></div>\r\n                                        <div>{\"Set the base coin used for all trades. Supported base coins are BTC, ETH, BUSD, USDT, TUSD, USDC, USDP, USD and EUR. \"}<i>{\"Make sure your portfolio contains some of your base coin of choice\"}</i>{\". Only then it will appear as an option in the dropdown menu.\"}</div>\r\n                                        <div>&nbsp;</div>\r\n                                        <div><b>{\"Exclude coins\"}</b></div>\r\n                                        <div>{\"Use the checkboxes on the left to exclude coins in your account from balancing. Balance Bot will completely ignore selected coins.\"}</div>\r\n                                        <div>&nbsp;</div>\r\n                                        <div><b>{\"Coin distribution\"}</b></div>\r\n                                        <div>{\"By default, all coins are balanced with an equal distribution. If you'd like to change the Target Distribution of your coins, use the sliders. Coins with their slider all the way to the left will get an even distribution up to a total of 100%. The Current Distribution column shows how the coins in your portfolio are currently distributed.\"}</div>\r\n                                        <div>&nbsp;</div>\r\n                                        <div><b>{\"Coin offset\"}</b></div>\r\n                                        <div>{\"If you'd like to store part of your coins outside of your exchange spot wallet (e.g. on a hardware wallet or in a staking wallet), and you still want those coins to be used for balancing, you can specify the number of those 'external' coins in the Coin Offset column. This obviously has an immediate effect on the coin distribution, so please make sure you adjust the target distribution accordingly.\"}</div>\r\n                                        <div>&nbsp;</div>\r\n                                        <div><i>{\"If you move coins out of your spot wallet, make sure that sufficient liquidity remains to execute balancing orders.\"}</i></div>\r\n                                        <div>&nbsp;</div>\r\n                                        <div>{\"If you'd like to \"}<i>{\"exclude\"}</i>{\" a share of the coins you hold in your spot wallet from balancing, you can use a negative offset.\"}</div>\r\n                                        <div>&nbsp;</div>\r\n                                        <div><i>{\"Keep an eye on your portfolio over time to make sure the number of coins used for balancing doesn't get too small.\"}</i></div>\r\n                                    </Box>\r\n                                </React.Fragment>\r\n                            }\r\n                            onClose={handleTooltipClose}\r\n                            open={open}\r\n                            disableFocusListener\r\n                            disableHoverListener\r\n                            disableTouchListener\r\n                            interactive\r\n                        >\r\n                            <IconButton onClick={open ? handleTooltipClose : handleTooltipOpen}>\r\n                                <InfoOutlinedIcon color=\"secondary\" />\r\n                            </IconButton>\r\n                        </HtmlTooltip>\r\n                    </ClickAwayListener>\r\n                </Grid>\r\n            </Grid>\r\n            <Grid container spacing={3}>\r\n                {(coinsReceived || input.basecoin !== '') ? (\r\n                    <Box pt={3} pl={2}>\r\n                        <Grid item xs={5}>\r\n                            <FormControl>\r\n                                <InputLabel>Base Coin</InputLabel>\r\n                                <Select\r\n                                    labelId=\"base-coin\"\r\n                                    name=\"basecoin\"\r\n                                    value={basecoin}\r\n                                    onChange={onBasecoin}\r\n                                    className={classes.textinput}\r\n                                    disabled={basecoins.length === 0 || input.configstate !== 'initial'}\r\n                                >\r\n                                    {basecoins.map((coin, i) => {\r\n                                        return <MenuItem key={i} value={coin}>{coin}</MenuItem>\r\n                                    })}\r\n                                </Select>\r\n                                <FormHelperText>Base coin cannot be changed after initial bot configuration</FormHelperText>\r\n                            </FormControl>\r\n                        </Grid>\r\n                        <Grid item xs={7}>\r\n                            {(basecoins.length === 0) &&\r\n                                <Box pt={3}>\r\n                                    <Typography color=\"secondary\">Include some of your base coin of choice in your portfolio</Typography>\r\n                                </Box>\r\n                            }\r\n                        </Grid>\r\n                    </Box>\r\n                ) : (\r\n                    <div>\r\n                        <Box pt={4} pl={2}>\r\n                            <Typography>Loading portfolio data...</Typography>\r\n                        </Box>\r\n                        <Box pt={4} pl={2}>\r\n                            <Skeleton animation=\"wave\" />\r\n                        </Box>\r\n                    </div>\r\n                )}\r\n\r\n                <Paper className={classes.paper} elevation={0}>\r\n                    {(portfolioReceived && input.basecoin !== '') ? (\r\n                        <div>\r\n                            <EnhancedTableToolbar selected={selected} portfolio={portfolio} setSelected={setSelected} />\r\n                            < Table\r\n                                className={classes.table}\r\n                                size=\"small\"\r\n                                aria-labelledby=\"tableTitle\"\r\n                                aria-label=\"enhanced table\"\r\n                            >\r\n                                <EnhancedTableHead\r\n                                    classes={classes}\r\n                                    numSelected={selected.length}\r\n                                    onSelectAllClick={handleSelectAllClick}\r\n                                    rowCount={portfolio.length}\r\n                                />\r\n                                <TableBody>\r\n                                    {portfolio.map((coin, index) => {\r\n                                        const isItemSelected = isSelected(coin.coin);\r\n                                        const labelId = `enhanced-table-checkbox-${index}`;\r\n                                        let checkbox;\r\n                                        if (coin.coin !== input.basecoin) {\r\n                                            checkbox = <Checkbox\r\n                                                checked={isItemSelected}\r\n                                                inputProps={{ 'aria-labelledby': labelId }}\r\n                                            />\r\n                                        } else {\r\n                                            checkbox = null;\r\n                                        }\r\n\r\n                                        return (\r\n                                            <TableRow\r\n                                                hover\r\n                                                role=\"checkbox\"\r\n                                                aria-checked={isItemSelected}\r\n                                                tabIndex={-1}\r\n                                                key={coin.coin}\r\n                                                selected={isItemSelected}\r\n                                            >\r\n                                                <TableCell padding=\"checkbox\" onClick={(event) => handleClick(coin.coin)}>\r\n                                                    {checkbox}\r\n                                                </TableCell>\r\n                                                <TableCell component=\"th\" id={labelId} scope=\"row\" padding=\"none\" onClick={(event) => handleClick(coin.coin)}>\r\n                                                    {coin.coin}\r\n                                                </TableCell>\r\n                                                <TableCell align=\"right\">\r\n                                                    <MySlider\r\n                                                        value={coin.slider}\r\n                                                        step={1}\r\n                                                        valueLabelDisplay=\"on\"\r\n                                                        marks={marks}\r\n                                                        min={-1}\r\n                                                        valueLabelFormat={value => <div>{labelFormatter(value)}</div>}\r\n                                                        onChange={(event, value) => handleSlider(value, coin.coin)}\r\n                                                    />\r\n                                                </TableCell>\r\n                                                <TableCell component=\"th\" className={classes.cell} id={labelId} scope=\"row\" padding=\"none\" align=\"left\">\r\n                                                    {coin.distribution}%\r\n                                                </TableCell>\r\n                                                <TableCell component=\"th\" className={classes.cell} id={labelId} scope=\"row\" padding=\"none\" align=\"left\">\r\n                                                    {coin.currentDistribution}%\r\n                                                </TableCell>\r\n                                                <TableCell component=\"th\" className={classes.cell} id={labelId} scope=\"row\" padding=\"none\" align=\"left\">\r\n                                                    <form className={classes.textinput2} noValidate autoComplete=\"off\">\r\n                                                        <Input id=\"offset\" disableUnderline inputProps={{ style: { fontSize: 14, textAlign: 'right' } }}\r\n                                                            value={coin.offset}\r\n                                                            onChange={(event) => handleOffset(event, coin.coin)}\r\n                                                            onBlur={() => handleBlur(coin.coin)} />\r\n                                                    </form>\r\n                                                </TableCell>\r\n                                                <TableCell component=\"th\" className={classes.cell2} id={labelId} scope=\"row\" padding=\"none\" align=\"left\">\r\n                                                    {(coin.coin === input.basecoin && parseFloat(coin.distribution) === 0) ? (\r\n                                                        <Typography variant=\"overline\" color=\"secondary\">&nbsp;Cannot be 0%</Typography>\r\n                                                    ) : (null)\r\n                                                    }\r\n                                                </TableCell>\r\n                                                <TableCell component=\"th\" className={classes.cell} id={labelId} scope=\"row\" padding=\"none\" align=\"left\">\r\n                                                    {(coin.excluded && parseFloat(coin.number) === 0) ? (\r\n                                                        <LightTooltip title=\"Delete zero-balance coin\">\r\n                                                            <IconButton size=\"small\" onClick={() => handleDelete(coin.coin)}>\r\n                                                                <DeleteIcon color=\"secondary\" />\r\n                                                            </IconButton>\r\n                                                        </LightTooltip>\r\n                                                    ) : (null)\r\n                                                    }\r\n                                                </TableCell>\r\n                                            </TableRow>\r\n                                        )\r\n                                    })}\r\n                                </TableBody>\r\n                            </Table>\r\n                        </div>\r\n                    ) : (input.basecoin !== '') && (\r\n                        <div>\r\n                            <Box pt={4} pl={2}>\r\n                                <Typography>Loading portfolio data...</Typography>\r\n                            </Box>\r\n                            <Box pt={4} pl={2}>\r\n                                <Skeleton animation=\"wave\" />\r\n                                <Skeleton animation=\"wave\" />\r\n                                <Skeleton animation=\"wave\" />\r\n                            </Box>\r\n                        </div>\r\n                    )}\r\n                </Paper>\r\n            </Grid>\r\n        </React.Fragment>\r\n    );\r\n}","import React, { useState, useContext, useEffect, useRef } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Box from '@material-ui/core/Box';\r\nimport Button from '@material-ui/core/Button';\r\nimport { DataGrid } from '@material-ui/data-grid';\r\nimport ArrowDownwardIcon from '@material-ui/icons/ArrowDownward';\r\nimport { format, parse, subDays, isBefore } from 'date-fns';\r\nimport 'date-fns';\r\nimport DateFnsUtils from '@date-io/date-fns';\r\nimport {\r\n    MuiPickersUtilsProvider,\r\n    DatePicker,\r\n} from '@material-ui/pickers';\r\nimport Link from '@material-ui/core/Link';\r\nimport { ConfigurationContext } from '../context/ConfigurationContext';\r\nimport { ConfigurationInputContext } from '../context/ConfigurationInputContext';\r\nimport { PerformanceContext } from '../context/PerformanceContext';\r\nimport InfoOutlinedIcon from '@material-ui/icons/InfoOutlined';\r\nimport { HtmlTooltip } from './HtmlToolTip';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\r\nimport cloneDeep from 'lodash.clonedeep';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\n\r\nconst columns = [\r\n    { field: 'coin', headerName: 'Coin', width: 350, editable: false },\r\n    { field: 'number', headerName: 'Number', type: 'number', width: 200, editable: true, valueFormatter: ({ value }) => (Number(value)) },\r\n    { field: 'price', headerName: 'Price', type: 'number', width: 200, editable: true, valueFormatter: ({ value }) => (Number(value)) },\r\n    { field: 'suggested', headerName: 'Suggested Change', type: 'string', width: 200, editable: false, valueFormatter: ({ value }) => (value ? '' : '') },\r\n];\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        width: '100%',\r\n    },\r\n    header: {\r\n        \"& .MuiDataGrid-colCell\":\r\n            theme.palette.type === 'light'\r\n                ? {\r\n                    backgroundColor: '#aaaaaa',\r\n                }\r\n                : {\r\n                    backgroundColor: '#777777',\r\n                },\r\n    },\r\n    paper: {\r\n        width: '100%',\r\n        marginBottom: theme.spacing(2),\r\n    },\r\n    backdrop: {\r\n        zIndex: theme.zIndex.drawer + 1,\r\n        color: '#fff',\r\n    },\r\n    day: {\r\n        width: 36,\r\n        height: 36,\r\n        // fontSize: theme.typography.caption.fontSize,\r\n        fontSize: \"inherit\",\r\n        margin: \"0\",\r\n        textAlign: \"center\",\r\n        color: \"inherit\",\r\n    },\r\n    highlight: {\r\n        background: theme.palette.secondary.main,\r\n        color: theme.palette.common.white,\r\n        borderRadius: \"50%\",\r\n    },\r\n    highlightSelected: {\r\n        background: theme.palette.primary.main,\r\n        color: theme.palette.common.white,\r\n        borderRadius: \"50%\",\r\n    },\r\n    today: {\r\n        background: '#777',\r\n        color: theme.palette.common.white,\r\n        borderRadius: \"50%\",\r\n    },\r\n    outofbounce: {\r\n        color: theme.palette.text.disabled,\r\n        borderRadius: \"50%\",\r\n    },\r\n}));\r\n\r\nexport default function ConfigP3(props) {\r\n    const classes = useStyles();\r\n\r\n    const now = format(new Date(), 'yyyy/MM/dd');\r\n\r\n    const input = useContext(ConfigurationInputContext)[0];\r\n    const [pickerOpen, setPickerOpen] = useState(false);\r\n    const configuration = useContext(ConfigurationContext)[0];\r\n    const performance = useContext(PerformanceContext)[0];\r\n    const initRef = useRef(false);\r\n    const liquidityRef = useRef(cloneDeep(input.liquidity));\r\n    const liqIndexRef = useRef(-1);\r\n    const selectedDateRef = useRef(now);\r\n    const [balanceDay, setBalanceDay] = useState([]);\r\n    const [autoliquidity, setAutoliquidity] = useState(input.autoliquidity !== null ? input.autoliquidity : true);  // If autoliquidity is undefined or null, default to true\r\n\r\n    const checkLiquidityChanges = () => {\r\n        const inp = input.portfolio;\r\n        const excludedChange = input.excludedChange;\r\n        const offsetChange = input.offsetChange;\r\n        const today = format(new Date(), 'yyyy/MM/dd');\r\n\r\n        let changes = [];\r\n\r\n        inp.forEach(coin => {\r\n            // First handle changes because of excludes\r\n\r\n            const match = excludedChange ? excludedChange.find(c => c.coin === coin.coin) : false;\r\n            const match2 = offsetChange ? offsetChange.find(c => c.coin === coin.coin) : false;\r\n            const offset = match2 ? match2.change : 0;\r\n\r\n            // If coin's excluded state was changed (once or more) in step 2 or an offset was set/changed\r\n            if (match || match2) {\r\n                // Get the original coin settings and liquidity\r\n                const original = configuration.portfolio.find(c => c.coin === coin.coin);\r\n                const liq = configuration.liquidity.find(day => day.date === today);\r\n                const liqcoin = liq ? liq.changes.find(c => c.coin === coin.coin) : false;\r\n                const current = liq ? (liqcoin ? liqcoin : { number: 0 }) : { number: 0 };\r\n\r\n                // Calculate the target liquidity based on excluded and offset inputs\r\n                let target = 0;\r\n                if (!original) {\r\n                    // New coin added to the portfolio, set to number that's currently in the portfolio\r\n                    target = coin.excluded ? 0 : coin.number;\r\n                } else if (match && match.excluded !== original.excluded) {\r\n                    target = coin.excluded ? current.number - coin.number : current.number + coin.number;\r\n                } else {\r\n                    // Reset to original liquidity (e.g. when toggled twice)\r\n                    target = current.number;\r\n                }\r\n                if (offset) {\r\n                    target += !coin.excluded ? offset : 0;\r\n                }\r\n\r\n                changes.push({\r\n                    coin: coin.coin,\r\n                    number: target,\r\n                    price: target !== 0 ? coin.price : 0,\r\n                    suggested: target !== current.number ? true : false,\r\n                });\r\n            } else {\r\n                if (liqIndexRef.current !== -1) {\r\n                    const liq = liquidityRef.current[liqIndexRef.current];\r\n                    const match = liq.changes.find(c => c.coin === coin.coin);\r\n                    if (match) {\r\n                        changes.push({\r\n                            coin: match.coin,\r\n                            number: match.number,\r\n                            price: match.price,\r\n                            suggested: false,\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n        });\r\n\r\n        if (changes.length !== 0) {\r\n            const today = format(new Date(), 'yyyy/MM/dd');\r\n\r\n            if (liqIndexRef.current !== -1) {\r\n                liquidityRef.current[liqIndexRef.current] = {\r\n                    date: today,\r\n                    changes: changes,\r\n                }\r\n            } else {\r\n                liquidityRef.current.push({\r\n                    date: today,\r\n                    changes: changes,\r\n                });\r\n            }\r\n\r\n            liqIndexRef.current = liquidityRef.current.length - 1;\r\n\r\n            props.callback({\r\n                field: 'liquidity',\r\n                input: liquidityRef.current,\r\n            });\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        initRef.current = (input.configstate === 'initial');\r\n\r\n        const today = format(new Date(), 'yyyy/MM/dd');\r\n        selectedDateRef.current = today;\r\n\r\n        const liq = liquidityRef.current.find(day => day.date === today);\r\n\r\n        if (liq) {\r\n            liqIndexRef.current = liquidityRef.current.findIndex(day => day.date === today);\r\n        } else {\r\n            liqIndexRef.current = -1;\r\n        }\r\n\r\n        if (!initRef.current) checkLiquidityChanges();\r\n\r\n        acceptDateChange(new Date());\r\n\r\n        // set liquidity defaults\r\n        if (initRef.current) {\r\n            handleCurrent();\r\n        }\r\n\r\n        return () => {\r\n        }\r\n    }, []);\r\n\r\n    const updateBalanceDay = (changes) => {\r\n        changes.sort((a, b) => (a.coin > b.coin) ? 1 : ((b.coin > a.coin) ? -1 : 0));\r\n\r\n        setBalanceDay(changes);\r\n    }\r\n\r\n    const handleDateChange = (indate) => {\r\n    };\r\n\r\n    const acceptDateChange = (indate) => {\r\n        setPickerOpen(false);\r\n\r\n        const date = format(indate, \"yyyy/MM/dd\");\r\n        if (isBefore(parse(date, 'yyyy/MM/dd', new Date()), parse(input.startdate, 'yyyy/MM/dd', new Date()))) {\r\n            return;\r\n        }\r\n\r\n        selectedDateRef.current = date;\r\n\r\n        if (!initRef.current) {\r\n            let coins = [];\r\n\r\n            // Select coins to be shown in the balances table\r\n            // Only the ones that are in the performance file for the selected date\r\n            let perf = performance.find(day => day.date === date);\r\n            if (perf) {\r\n                perf.coins.forEach(coin => {\r\n                    coins.push({\r\n                        id: coin.coin,\r\n                        coin: coin.coin,\r\n                        number: 0,\r\n                        price: 0,\r\n                    });\r\n                });\r\n            }\r\n\r\n            // Include coins from the previous day, in case on the selected day a coin was excluded / removed\r\n            const today = parse(date, 'yyyy/MM/dd', new Date());\r\n            const yesterday = format(subDays(today, 1), 'yyyy/MM/dd');\r\n            perf = performance.find(day => day.date === yesterday);\r\n            if (perf) {\r\n                perf.coins.forEach(coin => {\r\n                    if (!coins.find(c => c.coin === coin.coin)) {\r\n                        coins.push({\r\n                            id: coin.coin,\r\n                            coin: coin.coin,\r\n                            number: 0,\r\n                            price: 0,\r\n                        });\r\n                    }\r\n                });\r\n            }\r\n\r\n            // Include coins that are in portfolio if selected date is today\r\n            if (selectedDateRef.current === now) {\r\n                input.portfolio.forEach(coin => {\r\n                    if (!coin.excluded && !coins.find(c => c.coin === coin.coin)) {\r\n                        coins.push({\r\n                            id: coin.coin,\r\n                            coin: coin.coin,\r\n                            number: 0,\r\n                            price: 0,\r\n                        });\r\n                    }\r\n                });\r\n            }\r\n\r\n            const liq = liquidityRef.current.find(day => day.date === date);\r\n\r\n            if (liq) {\r\n                // Include coins that are stored in liquidity (could be a coin that got included in step 2)\r\n                liq.changes.forEach(coin => {\r\n                    if (!coins.find(c => c.coin === coin.coin)) {\r\n                        coins.push({\r\n                            id: coin.coin,\r\n                            coin: coin.coin,\r\n                            number: 0,\r\n                            price: 0,\r\n                        });\r\n                    }\r\n                });\r\n\r\n                liqIndexRef.current = liquidityRef.current.findIndex(day => day.date === date);\r\n                let newChanges = [];\r\n                coins.forEach(coin => {\r\n                    let match = liq.changes.find(c => c.coin === coin.coin);\r\n                    if (match) {\r\n                        newChanges.push({\r\n                            id: coin.coin,\r\n                            coin: coin.coin,\r\n                            number: match.number,\r\n                            price: match.price,\r\n                            suggested: match.suggested,\r\n                        });\r\n                    } else {\r\n                        newChanges.push({ ...coin });\r\n                    }\r\n                });\r\n                coins = [...newChanges];\r\n            } else {\r\n                liqIndexRef.current = -1;\r\n            }\r\n            updateBalanceDay(coins);\r\n        }\r\n    };\r\n\r\n    const handleEditCellChangeCommitted = (e) => {\r\n        // let newLiquidity = [...liquidityRef.current]; --> this doesn't work, as configuration somehow gets updated even when changes are not saved...\r\n        let newLiquidity = cloneDeep(liquidityRef.current);\r\n\r\n        let newIndex = liqIndexRef.current;\r\n\r\n        if (newIndex === -1) {\r\n            newIndex = newLiquidity.push({\r\n                date: selectedDateRef.current,\r\n                changes: [],\r\n            }) - 1;\r\n\r\n            liqIndexRef.current = newIndex;\r\n        }\r\n\r\n        if (newLiquidity[newIndex].changes) {\r\n            let match = newLiquidity[newIndex].changes.find(c => c.coin === e.id);\r\n            if (!match) {\r\n                newLiquidity[newIndex].changes.push({ coin: e.id });\r\n                match = newLiquidity[newIndex].changes.find(c => c.coin === e.id);\r\n            }\r\n            if (match) {\r\n                match['id'] = e.id;\r\n                match[e.field] = Number(e.props.value);\r\n                // If number was entered, auto-fill the price field with current day price\r\n                // If not available, take the previous day's price\r\n                if (e.field === 'number') {\r\n                    if (e.props.value !== '0') {\r\n                        let perf = performance.find(day => day.date === selectedDateRef.current);\r\n                        if (perf) {\r\n                            let coin = perf.coins.find(c => c.coin === e.id);\r\n                            if (coin) {\r\n                                match['price'] = Number(coin.price);\r\n                            } else {\r\n                                const today = parse(selectedDateRef.current, 'yyyy/MM/dd', new Date());\r\n                                const yesterday = format(subDays(today, 1), 'yyyy/MM/dd');\r\n                                perf = performance.find(day => day.date === yesterday);\r\n                                if (perf) {\r\n                                    let coin = perf.coins.find(c => c.coin === e.id);\r\n                                    if (coin) {\r\n                                        match['price'] = Number(coin.price);\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    } else {\r\n                        match['price'] = 0;\r\n                    }\r\n                }\r\n                let newBalance = [...balanceDay];\r\n                let index = newBalance.findIndex(c => c.coin === e.id);\r\n                newBalance[index] = match;\r\n                setBalanceDay(newBalance);\r\n            }\r\n        }\r\n\r\n        liquidityRef.current = newLiquidity;\r\n\r\n        props.callback({\r\n            field: 'liquidity',\r\n            input: newLiquidity,\r\n        });\r\n    }\r\n\r\n    const handleCurrent = () => {\r\n        let newStartPerformance = [];\r\n        const offsetChange = input.offsetChange;\r\n        input.portfolio.forEach((coin) => {\r\n            const match2 = offsetChange ? offsetChange.find(c => c.coin === coin.coin) : false;\r\n            const offset = match2 ? match2.change : 0;\r\n\r\n            if (initRef.current) {\r\n                // Set default values at initial configuration, including offset if it was set\r\n                if (!coin.excluded) {\r\n                    newStartPerformance.push({\r\n                        id: coin.coin,\r\n                        coin: coin.coin,\r\n                        number: Number((coin.number + offset).toFixed(8)),\r\n                        price: Number((coin.price).toFixed(8)),\r\n                        suggested: true,\r\n                    });\r\n                }\r\n            } else {\r\n                let coins = [];\r\n                let perf = performance.find(day => day.date === selectedDateRef.current);\r\n                if (perf) {\r\n                    perf.coins.forEach(coin => {\r\n                        coins.push({\r\n                            coin: coin.coin,\r\n                        });\r\n                    });\r\n                }\r\n\r\n                let match = coins.find(c => c.coin === coin.coin);\r\n                if (match) {\r\n                    newStartPerformance.push({\r\n                        id: coin.coin,\r\n                        coin: coin.coin,\r\n                        number: Number((coin.number).toFixed(8)),\r\n                        price: Number((coin.price).toFixed(8)),\r\n                    });\r\n                }\r\n            }\r\n        });\r\n        updateBalanceDay(newStartPerformance);\r\n\r\n        let newLiquidity = [];\r\n\r\n        if (initRef.current) {\r\n            let changes = [];\r\n\r\n            newStartPerformance.forEach(coin => {\r\n                changes.push({\r\n                    coin: coin.coin,\r\n                    number: coin.number,\r\n                    price: coin.price,\r\n                });\r\n            });\r\n\r\n            const today = format(new Date(), 'yyyy/MM/dd');\r\n\r\n            newLiquidity.push({\r\n                date: today,\r\n                changes: changes,\r\n            });\r\n        } else {\r\n            // newLiquidity = [...liquidityRef.current]; --> this doesn't work, as configuration somehow gets updated even when changes are not saved...\r\n            newLiquidity = cloneDeep(liquidityRef.current);\r\n            newLiquidity[liqIndexRef.current].changes.forEach((row) => {\r\n                let match = newStartPerformance.find(c => c.coin === row.coin);\r\n                if (match) {\r\n                    row.number = match.number;\r\n                    row.price = match.price;\r\n                }\r\n            });\r\n        }\r\n\r\n        liquidityRef.current = newLiquidity;\r\n\r\n        props.callback({\r\n            field: 'liquidity',\r\n            input: newLiquidity,\r\n        });\r\n    }\r\n\r\n    const handleDelete = () => {\r\n        if (liqIndexRef.current !== 0) {\r\n            let newStartPerformance = [];\r\n            balanceDay.forEach((coin) => {\r\n                newStartPerformance.push({\r\n                    id: coin.coin,\r\n                    coin: coin.coin,\r\n                    number: 0,\r\n                    price: 0,\r\n                });\r\n            });\r\n            updateBalanceDay(newStartPerformance);\r\n\r\n            liquidityRef.current.splice(liqIndexRef.current, 1);\r\n            liqIndexRef.current = -1;\r\n\r\n            props.callback({\r\n                field: 'liquidity',\r\n                input: liquidityRef.current,\r\n            });\r\n        }\r\n    }\r\n\r\n    const renderDay = (day, selectedDay, dayInCurrentMonth, dayComponent) => {\r\n        let selected = format(selectedDay, 'yyyy/MM/dd');\r\n        let date = format(day, 'yyyy/MM/dd');\r\n        let d = format(day, 'd');\r\n        const today = format(new Date(), 'yyyy/MM/dd');\r\n\r\n        let dates = [];\r\n        liquidityRef.current.forEach((day) => {\r\n            dates.push(day.date);\r\n        });\r\n\r\n        if (date === selectedDateRef.current && dayInCurrentMonth) {\r\n            return (\r\n                <div className={classes.highlightSelected}>\r\n                    <IconButton className={classes.day}>\r\n                        <span> {d} </span>\r\n                    </IconButton>\r\n                </div>\r\n            )\r\n        }\r\n\r\n        if (dates.includes(date) && dayInCurrentMonth && selected !== date) {\r\n            return (\r\n                <div className={classes.highlight}>\r\n                    <IconButton className={classes.day}>\r\n                        <span> {d} </span>\r\n                    </IconButton>\r\n                </div>\r\n            );\r\n        }\r\n\r\n        if (date === today) {\r\n            return (\r\n                <div className={classes.today}>\r\n                    <IconButton className={classes.day}>\r\n                        <span> {d} </span>\r\n                    </IconButton>\r\n                </div>\r\n            )\r\n        }\r\n\r\n        return dayComponent;\r\n    }\r\n\r\n    const onAutoLiquidity = (e) => {\r\n        props.callback({\r\n            field: 'autoliquidity',\r\n            input: e.target.checked,\r\n        });\r\n        setAutoliquidity(e.target.checked);\r\n    }\r\n\r\n    const [openTT, setOpenTT] = useState(false);\r\n\r\n    const handleTooltipClose = () => {\r\n        setOpenTT(false);\r\n    };\r\n\r\n    const handleTooltipOpen = () => {\r\n        setOpenTT(true);\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <React.Fragment>\r\n                <Grid container alignItems=\"flex-end\">\r\n                    <Grid item xs={11}>\r\n                        <Typography variant=\"h6\" gutterBottom>\r\n                            Liquidity Settings\r\n                        </Typography>\r\n                    </Grid>\r\n                    <Grid item xs={1}>\r\n                        <ClickAwayListener onClickAway={handleTooltipClose}>\r\n                            <HtmlTooltip\r\n                                title={\r\n                                    <React.Fragment>\r\n                                        <Box m={2}>\r\n                                            <div><b>{\"Use of liquidity settings\"}</b></div>\r\n                                            <div>{\"Balance Bot uses the liquidity settings to determine the performance of your balancing portfolio. It compares the current portfolio value with the starting portfolio value to calculate change metrics and performance graphs.\"}</div>\r\n                                            <div>&nbsp;</div>\r\n                                            <div><b>{\"Default liquidity settings\"}</b></div>\r\n                                            <div>{\"By default, Balance Bot will check the number of coins in your account and their prices upon first-time configuration, and use these to calculate the starting balance.\"}</div>\r\n                                            <div>&nbsp;</div>\r\n                                            <div><b>{\"Register liquidity changes\"}</b></div>\r\n                                            <div>{\"If you're adding or removing coins after the start date, register those liquidity changes on the respective date, so that your bot can 'normalize' its metrics and performance graphs stay accurate. Do so by selecting the appropriate date, and fill in the number of coins and its price, expressed in your selected base coin, at which you purchased / sold those coins. Simply click on the cells in the table to edit.\"}</div>\r\n                                            <div>&nbsp;</div>\r\n                                            <div>{\"Note: if you've included or excluded a coin in step 2 of the configuration, Balance Bot will automatically suggest to add/remove those coins in the table. This is indicated with a checkmark in the 'suggested' column.\"}</div>\r\n                                            <div>&nbsp;</div>\r\n                                            <div>{\"For dates other than the start date, you can completely remove the liquidity changes for the selected date by clicking the 'delete liq changes' button. This will not affect liquidity changes for other dates, those will be kept.\"}</div>\r\n                                            <div>&nbsp;</div>\r\n                                            <div>{\"For more information about the normalization concept, read \"}<Link href=\"https://hodlerhacks.com/balance-bot/using-balance-bot/liquidity-changes/\" target=\"_blank\" rel=\"noopener\" color=\"secondary\">here</Link>{\".\"}</div>\r\n                                            <div>&nbsp;</div>\r\n                                            <div><b>{\"Automatically detect and apply liquidity changes\"}</b></div>\r\n                                            <div>{\"If this option is enabled, Balance Bot will check for liquidity changes and adjust the liquidity settings accordingly. So if you add or remove funds, you don't need to update the liquidity settings yourself. This is useful if you're doing Dollar Cost Averaging (DCA) or changing the liquidity for other reasons on a regular basis. However, if you're also trading on the same account, you'll probably want to disable this option, because otherwise Balance Bot will adjust for trading gains/losses, and those would then not be properly reflected in the performance metrics.\"}</div>\r\n                                        </Box>\r\n                                    </React.Fragment>\r\n                                }\r\n                                onClose={handleTooltipClose}\r\n                                open={openTT}\r\n                                disableFocusListener\r\n                                disableHoverListener\r\n                                disableTouchListener\r\n                                interactive\r\n                            >\r\n                                <IconButton onClick={openTT ? handleTooltipClose : handleTooltipOpen}>\r\n                                    <InfoOutlinedIcon color=\"secondary\" />\r\n                                </IconButton>\r\n                            </HtmlTooltip>\r\n                        </ClickAwayListener>\r\n                    </Grid>\r\n                </Grid>\r\n                <div style={{ width: '952px' }}>\r\n                    {/* <CustomToolbar /> */}\r\n                    <Grid container direction=\"row\" alignItems=\"flex-end\" justify=\"space-between\">\r\n                        <Grid item xs={9} >\r\n                            <MuiPickersUtilsProvider utils={DateFnsUtils}>\r\n                                <DatePicker\r\n                                    open={pickerOpen}\r\n                                    onOpen={() => setPickerOpen(true)}\r\n                                    onClose={() => setPickerOpen(false)}\r\n                                    disableToolbar=\"true\"\r\n                                    variant=\"inline\"\r\n                                    format=\"yyyy/MM/dd\"\r\n                                    margin=\"normal\"\r\n                                    id=\"date-picker-inline\"\r\n                                    label=\"Select date\"\r\n                                    value={selectedDateRef.current}\r\n                                    disableFuture=\"true\"\r\n                                    minDate={parse(input.startdate, 'yyyy/MM/dd', new Date())}\r\n                                    onChange={handleDateChange}\r\n                                    onAccept={acceptDateChange}\r\n                                    renderDay={renderDay}\r\n                                />\r\n                            </MuiPickersUtilsProvider>\r\n                        </Grid>\r\n                        <Grid item xs={3}>\r\n                            <Box display=\"flex\" justifyContent=\"flex-end\">\r\n                                <Button disabled={liqIndexRef.current === 0 || liqIndexRef.current === -1} variant=\"contained\" color=\"primary\" startIcon={<ArrowDownwardIcon />} onClick={handleDelete}>\r\n                                    Delete Liq Changes\r\n                                </Button>\r\n                            </Box>\r\n                        </Grid>\r\n                    </Grid>\r\n                    <Box pt={3}>\r\n                        <Grid container>\r\n                            <Paper className={classes.paper} elevation={0}>\r\n                                <div style={{ width: '952px' }}>\r\n                                    <DataGrid className={classes.header} rows={balanceDay} columns={columns}\r\n                                        autoHeight={true}\r\n                                        density='compact'\r\n                                        disableColumnSelector={true}\r\n                                        disableColumnMenu={true}\r\n                                        hideFooter={true}\r\n                                        hideFooterPagination={true}\r\n                                        hideFooterRowCount={true}\r\n                                        onEditCellChangeCommitted={handleEditCellChangeCommitted}\r\n                                    />\r\n                                </div>\r\n                            </Paper>\r\n                        </Grid>\r\n                    </Box>\r\n                    <Grid item xs={12}>\r\n                        <FormControlLabel\r\n                            control={<Checkbox color=\"secondary\" name=\"headless\" checked={autoliquidity} onChange={onAutoLiquidity} />}\r\n                            label=\"Automatically detect and apply liquidity changes\"\r\n                        />\r\n                    </Grid>\r\n                </div>\r\n            </React.Fragment>\r\n        </div>\r\n    );\r\n}","import { ResponsiveBar } from '@nivo/bar'\r\n\r\nexport default function ColorBar(props) {\r\n    const colorscheme = props.colorscheme;\r\n\r\n    let numcolors;\r\n\r\n    switch (colorscheme) {\r\n        case 'red_yellow_blue':\r\n            numcolors = 11;\r\n            break;\r\n        case 'red_yellow_green':\r\n            numcolors = 11;\r\n            break;\r\n        case 'yellow_orange_red':\r\n            numcolors = 9;\r\n            break;\r\n        case 'purpleRed_green':\r\n            numcolors = 11;\r\n            break;\r\n        case 'pink_yellowGreen':\r\n            numcolors = 11;\r\n            break;\r\n        case 'red_blue':\r\n            numcolors = 11;\r\n            break;\r\n        case 'spectral':\r\n            numcolors = 11;\r\n            break;\r\n        case 'paired':\r\n            numcolors = 12;\r\n            break;\r\n        case 'category10':\r\n            numcolors = 10;\r\n            break;\r\n        case 'dark2':\r\n            numcolors = 8;\r\n            break;\r\n        case 'set1':\r\n            numcolors = 9;\r\n            break;\r\n        case 'set2':\r\n            numcolors = 8;\r\n            break;\r\n        case 'set3':\r\n            numcolors = 12;\r\n            break;\r\n        default:\r\n            numcolors = 0;\r\n    }\r\n\r\n    let range = {};\r\n    let keys = [];\r\n\r\n    for (let i = 0; i < numcolors; i++) {\r\n        range['c' + i] = 10;\r\n        keys.push('c' + i);\r\n    }\r\n\r\n    const data = [range];\r\n\r\n    return (\r\n        <ResponsiveBar\r\n            data={data}\r\n            keys={keys}\r\n            height={20}\r\n            width={20 * numcolors}\r\n            margin={{ top: 0, right: 0, bottom: 0, left: 0 }}\r\n            padding={0}\r\n            layout=\"horizontal\"\r\n            valueScale={{ type: 'linear' }}\r\n            colors={{ scheme: colorscheme }}\r\n            axisTop={null}\r\n            axisRight={null}\r\n            axisBottom={null}\r\n            axisLeft={null}\r\n            enableLabel={false}\r\n            isInteractive={false}\r\n            legends={[]}\r\n            barAriaLabel={null}\r\n        />\r\n    )\r\n}","import React, { useState, useContext } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport { ConfigurationInputContext } from '../context/ConfigurationInputContext';\r\nimport InfoOutlinedIcon from '@material-ui/icons/InfoOutlined';\r\nimport { HtmlTooltip } from './HtmlToolTip';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Box from '@material-ui/core/Box';\r\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\r\nimport Select from '@material-ui/core/Select';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport FormHelperText from '@material-ui/core/FormHelperText';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport Link from '@material-ui/core/Link';\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\nimport ColorBar from \"../components/ColorBar\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    formControl: {\r\n        minWidth: '100%',\r\n    },\r\n    selectEmpty: {\r\n        marginTop: theme.spacing(2),\r\n    },\r\n    textinput: {\r\n        width: '380px',\r\n    },\r\n    textinput2: {\r\n        width: '200px',\r\n    },\r\n}));\r\n\r\nexport default function ConfigP4(props) {\r\n    const classes = useStyles();\r\n\r\n    const input = useContext(ConfigurationInputContext)[0];\r\n\r\n    const [botname, setBotname] = useState(input.botname || '');\r\n    const [showname, setShowname] = useState(input.showname || false);\r\n    const [threshold, setThreshold] = useState(input.threshold || '3');\r\n    const [colorscheme, setColorscheme] = useState(input.colorscheme || 'red_yellow_blue');\r\n    const [ordertype, setOrdertype] = useState(input.ordertype || 'market');\r\n    const [timeout, setTimeout] = useState(input.timeout || 20);\r\n    const [headless, setHeadless] = useState(input.headless || false);\r\n    const [cooldown, setCooldown] = useState(input.cooldown || 0);\r\n    const [change24h, setChange24h] = useState(input.change24h || 0);\r\n    const [emojiBuy, setEmojiBuy] = useState(input.emojibuy || '');\r\n    const [emojiSell, setEmojiSell] = useState(input.emojisell || '');\r\n\r\n    const onHeadless = (e) => {\r\n        props.callback({\r\n            field: 'headless',\r\n            input: e.target.checked,\r\n        });\r\n        setHeadless(e.target.checked);\r\n    }\r\n\r\n    const onBotname = (e) => {\r\n        props.callback({\r\n            field: e.target.id,\r\n            input: e.target.value\r\n        });\r\n        setBotname(e.target.value);\r\n    }\r\n\r\n    const onShowname = (e) => {\r\n        props.callback({\r\n            field: 'showname',\r\n            input: e.target.checked,\r\n        });\r\n        setShowname(e.target.checked);\r\n    }\r\n\r\n    const onThreshold = (e) => {\r\n        const pattern = /^[0-9]*\\.?[0-9]*$/\r\n        if (pattern.test(e.target.value)) {\r\n            props.callback({\r\n                field: e.target.id,\r\n                input: e.target.value\r\n            });\r\n            setThreshold(e.target.value);\r\n        }\r\n    }\r\n\r\n    const onColorscheme = (e) => {\r\n        props.callback({\r\n            field: e.target.name,\r\n            input: e.target.value\r\n        });\r\n        setColorscheme(e.target.value);\r\n    }\r\n\r\n    const onOrdertype = (e) => {\r\n        props.callback({\r\n            field: e.target.name,\r\n            input: e.target.value\r\n        });\r\n        setOrdertype(e.target.value);\r\n    }\r\n\r\n    const onTimeout = (e) => {\r\n        props.callback({\r\n            field: e.target.name,\r\n            input: e.target.value\r\n        });\r\n        setTimeout(e.target.value);\r\n    }\r\n\r\n    const onEmojiBuy = (e) => {\r\n        const pattern = /^[0-9,A-F]{0,5}$/\r\n        if (pattern.test(e.target.value)) {\r\n            props.callback({\r\n                field: e.target.id,\r\n                input: e.target.value\r\n            });\r\n            setEmojiBuy(e.target.value);\r\n        }\r\n    }\r\n\r\n    const onEmojiSell = (e) => {\r\n        const pattern = /^[0-9,A-F]{0,5}$/\r\n        if (pattern.test(e.target.value)) {\r\n            props.callback({\r\n                field: e.target.id,\r\n                input: e.target.value\r\n            });\r\n            setEmojiSell(e.target.value);\r\n        }\r\n    }\r\n\r\n    const onCooldown = (e) => {\r\n        const pattern = /^[0-9]*$/\r\n        if (pattern.test(e.target.value)) {\r\n            props.callback({\r\n                field: e.target.id,\r\n                input: e.target.value\r\n            });\r\n            setCooldown(e.target.value);\r\n        }\r\n    }\r\n\r\n    const onChange24h = (e) => {\r\n        const pattern = /^-?[0-9]*$/\r\n        if (pattern.test(e.target.value)) {\r\n            props.callback({\r\n                field: e.target.id,\r\n                input: e.target.value\r\n            });\r\n            setChange24h(e.target.value);\r\n        }\r\n    }\r\n\r\n    const [open, setOpen] = useState(false);\r\n\r\n    const handleTooltipClose = () => {\r\n        setOpen(false);\r\n    };\r\n\r\n    const handleTooltipOpen = () => {\r\n        setOpen(true);\r\n    };\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <Grid container alignItems=\"flex-end\">\r\n                <Grid item xs={11}>\r\n                    <Typography variant=\"h6\" gutterBottom>\r\n                        General Settings\r\n                    </Typography>\r\n                </Grid>\r\n                <Grid item xs={1}>\r\n                    <ClickAwayListener onClickAway={handleTooltipClose}>\r\n                        <HtmlTooltip\r\n                            title={\r\n                                <React.Fragment>\r\n                                    <Box m={2}>\r\n                                        <div><b>{\"Bot Name\"}</b></div>\r\n                                        <div>{\"Give your bot a descriptive name. This is especially useful if you run multiple bots, so you can easily recognize each.\"}</div>\r\n                                        <div>&nbsp;</div>\r\n                                        <div><b>{\"Balancing Threshold\"}</b></div>\r\n                                        <div>{\"The balancing threshold is used by Balance Bot to determine when to sell/buy coins. The threshold is the relative deviation from the target distribution at which point the bot will place an order to restore the coin to the target distribution.\"}</div>\r\n                                        <div>&nbsp;</div>\r\n                                        <div><b>{\"Chart Color Scheme\"}</b></div>\r\n                                        <div>{\"Select a color scheme to be used for the coin charts: the pie chart on the Portfolio page and the line chart on the Coin Analysis page.\"}</div>\r\n                                        <div>&nbsp;</div>\r\n                                        <div><b>{\"Order Type\"}</b></div>\r\n                                        <div>{\"Market Orders get executed immediately, but the price is not guaranteed. Limit Orders have a preset price, but it may take time before the order is filled. If the order is not filled after the select time out period, the order is canceled. High-Margin uses the ask price when selling, and the bid price when buying. Low-Margin uses the bid price when selling, and the ask price when buying. High-Margin limit orders may take longer to get filled, but at a better price.\"}</div>\r\n                                        <div>&nbsp;</div>\r\n                                        <div><b>{\"Emojis\"}</b></div>\r\n                                        <div>{\"Just because it's fun, you can configure an emoji to be shown in order notifications. By setting a different emoji for sell and buy orders, you can quickly identify the order type. You can find the complete list of emojis here \"}<Link href=\"https://www.unicode.org/emoji/charts/full-emoji-list.html\" target=\"_blank\" rel=\"noopener\" color=\"secondary\">https://www.unicode.org/emoji/charts/full-emoji-list.html</Link>{\". Copy and paste the code of your preferred emojis, but without the U+ prefix (e.g. enter 1F680, instead of U+1F680). If the code is correct, the emoji will show up to the right of the entry field.\"}</div>\r\n                                        <div>&nbsp;</div>\r\n                                        <div><b>{\"Cooldown Trigger\"}</b></div>\r\n                                        <div>{\"At times of high price volatility, Balance Bot may perform many trades to keep your portfolio balanced. This may not be preferred, because of the resulting trading fees. To avoid such situation, you may choose to trigger a 1 hour cooldown period, which kicks in when the set number of trades are performed within a 5 minute period.\"}</div>\r\n                                        <div>&nbsp;</div>\r\n                                        <div><b>{\"Maximum 24h drop\"}</b></div>\r\n                                        <div>{\"If a coin crashes in a short period of time, Balance Bot would sell your other coins in order to buy an increasing amount of the crashing coin. To avoid this from happening, enter the maximum 24h percentage change (e.g. -20%) below which the bot should be paused. If this point is reached, the bot will switch to manual mode, so you can investigate what's going on, and if needed exclude the coin in the configuration settings, before changing back to automatic mode again.\"}</div>\r\n                                        <div>&nbsp;</div>\r\n                                        <div><b>{\"Automatic Mode\"}</b></div>\r\n                                        <div>{\"You can operate your bot manually. In this mode, you will need to keep an eye on the dashboard and place manual orders when the dashboard indicates that a coin should be bought or sold. This is useful if you want to have full control, typically when you use Balance Bot for the first time and you want to get a feel for how it works.\"}</div>\r\n                                        <div>&nbsp;</div>\r\n                                        <div>{\"Enabling automatic mode is a lot more practical though, as Balance Bot will run 24/7 and place orders automatically to keep your portfolio balanced.\"}</div>\r\n                                        <div>&nbsp;</div>\r\n                                        <div><i>{\"Note: \"}</i>{\"You don't need to keep your browser open to run your bot in automatic mode. The application will keep running in the background. You can open the application in the browser at any time to check the status of your bot.\"}</div>\r\n                                    </Box>\r\n                                </React.Fragment>\r\n                            }\r\n                            onClose={handleTooltipClose}\r\n                            open={open}\r\n                            disableFocusListener\r\n                            disableHoverListener\r\n                            disableTouchListener\r\n                            interactive\r\n                        >\r\n                            <IconButton onClick={open ? handleTooltipClose : handleTooltipOpen}>\r\n                                <InfoOutlinedIcon color=\"secondary\" />\r\n                            </IconButton>\r\n                        </HtmlTooltip>\r\n                    </ClickAwayListener>\r\n                </Grid>\r\n            </Grid>\r\n            <Grid container spacing={3}>\r\n                <Grid item xs={6}>\r\n                    <TextField\r\n                        required\r\n                        id=\"botname\"\r\n                        name=\"botname\"\r\n                        label=\"Bot Name\"\r\n                        helperText=\"Give your bot a name\"\r\n                        value={botname}\r\n                        onChange={onBotname}\r\n                        className={classes.textinput}\r\n                    />\r\n                </Grid>\r\n                <Grid item xs={6}>\r\n                    <Box pt={1}>\r\n                        <FormControlLabel\r\n                            control={<Checkbox color=\"secondary\" name=\"showname\" checked={showname} onChange={onShowname} />}\r\n                            label=\"Show in notifications (instead of bot ID)\"\r\n                        />\r\n                    </Box>\r\n                </Grid>\r\n                <Grid item xs={6}>\r\n                    <TextField\r\n                        required\r\n                        id=\"threshold\"\r\n                        name=\"threshold\"\r\n                        label=\"Balancing Threshold (%)\"\r\n                        helperText=\"Deviation from the target distribution at which the bot rebalances\"\r\n                        value={threshold}\r\n                        onChange={onThreshold}\r\n                        className={classes.textinput}\r\n                    />\r\n                </Grid>\r\n                <Grid item xs={3}>\r\n                    <FormControl>\r\n                        <InputLabel>Chart Color Scheme</InputLabel>\r\n                        <Select\r\n                            labelId=\"color-scheme\"\r\n                            name=\"colorscheme\"\r\n                            value={colorscheme}\r\n                            onChange={onColorscheme}\r\n                            className={classes.textinput2}\r\n                        >\r\n                            <MenuItem value={'red_yellow_blue'}>Red Yellow Blue</MenuItem>\r\n                            <MenuItem value={'red_yellow_green'}>Red Yellow Green</MenuItem>\r\n                            <MenuItem value={'yellow_orange_red'}>Yellow Orange Red</MenuItem>\r\n                            <MenuItem value={'purpleRed_green'}>Purple Green</MenuItem>\r\n                            <MenuItem value={'pink_yellowGreen'}>Pink Green</MenuItem>\r\n                            <MenuItem value={'red_blue'}>Red Blue</MenuItem>\r\n                            <MenuItem value={'spectral'}>Spectral</MenuItem>\r\n                            <MenuItem value={'paired'}>Paired</MenuItem>\r\n                            <MenuItem value={'category10'}>Category 10</MenuItem>\r\n                            <MenuItem value={'dark2'}>Dark 2</MenuItem>\r\n                            <MenuItem value={'set1'}>Set 1</MenuItem>\r\n                            <MenuItem value={'set2'}>Set 2</MenuItem>\r\n                            <MenuItem value={'set3'}>Set 3</MenuItem>\r\n                        </Select>\r\n                        <FormHelperText>Select a color scheme for the charts</FormHelperText>\r\n                    </FormControl>\r\n                </Grid>\r\n                <Grid item xs={3}>\r\n                    <div style={{ height: '20px', marginTop: '20px' }}>\r\n                        <ColorBar colorscheme={colorscheme} />\r\n                    </div>\r\n                </Grid>\r\n                <Grid item xs={6}>\r\n                    <FormControl>\r\n                        <InputLabel>Order Type</InputLabel>\r\n                        <Select\r\n                            labelId=\"order-type\"\r\n                            name=\"ordertype\"\r\n                            value={ordertype}\r\n                            onChange={onOrdertype}\r\n                            className={classes.textinput}\r\n                        >\r\n                            <MenuItem value={'market'}>Market Order</MenuItem>\r\n                            <MenuItem value={'limit-high'}>Limit Order &gt; High-Margin</MenuItem>\r\n                            <MenuItem value={'limit-low'}>Limit Order &gt; Low-Margin</MenuItem>\r\n                        </Select>\r\n                        <FormHelperText>Select the order type to be used for trades</FormHelperText>\r\n                    </FormControl>\r\n                </Grid>\r\n                <Grid item xs={6}>\r\n                    <FormControl>\r\n                        <InputLabel>Limit Order Time Out</InputLabel>\r\n                        <Select\r\n                            labelId=\"limit-time-out\"\r\n                            name=\"timeout\"\r\n                            value={timeout}\r\n                            onChange={onTimeout}\r\n                            className={classes.textinput}\r\n                            disabled={ordertype === 'market'}\r\n                        >\r\n                            <MenuItem value={10}>10 minutes</MenuItem>\r\n                            <MenuItem value={20}>20 minutes</MenuItem>\r\n                            <MenuItem value={30}>30 minutes</MenuItem>\r\n                            <MenuItem value={60}>60 minutes</MenuItem>\r\n                            <MenuItem value={90}>90 minutes</MenuItem>\r\n                            <MenuItem value={120}>120 minutes</MenuItem>\r\n                        </Select>\r\n                        <FormHelperText>Select the maximum wait time for limit orders to be filled</FormHelperText>\r\n                    </FormControl>\r\n                </Grid>\r\n                <Grid item xs={4}>\r\n                    <TextField\r\n                        id=\"emojibuy\"\r\n                        name=\"emojibuy\"\r\n                        label=\"Emoji for Buy Order Notifications\"\r\n                        helperText=\"Configure an emoji to be shown in buy order notifications\"\r\n                        value={emojiBuy}\r\n                        onChange={onEmojiBuy}\r\n                        InputProps={{\r\n                            startAdornment: <InputAdornment position=\"start\">U+</InputAdornment>,\r\n                        }}\r\n                        className={classes.textinput}\r\n                    />\r\n                </Grid>\r\n                <Grid item xs={2}>\r\n                    <Box pt={2}>\r\n                        {emojiBuy !== '' && String.fromCodePoint(`0x${emojiBuy}`)}\r\n                    </Box>\r\n                </Grid>\r\n                <Grid item xs={4}>\r\n                    <TextField\r\n                        id=\"emojisell\"\r\n                        name=\"emojisell\"\r\n                        label=\"Emoji for Sell Order Notifications\"\r\n                        helperText=\"Configure an emoji to be shown in sell order notifications\"\r\n                        value={emojiSell}\r\n                        onChange={onEmojiSell}\r\n                        InputProps={{\r\n                            startAdornment: <InputAdornment position=\"start\">U+</InputAdornment>,\r\n                        }}\r\n                        className={classes.textinput}\r\n                    />\r\n                </Grid>\r\n                <Grid item xs={2}>\r\n                    <Box pt={2}>\r\n                        {emojiSell !== '' && String.fromCodePoint(`0x${emojiSell}`)}\r\n                    </Box>\r\n                </Grid>\r\n                <Grid item xs={6}>\r\n                    <TextField\r\n                        required\r\n                        id=\"cooldown\"\r\n                        name=\"cooldown\"\r\n                        label=\"Cooldown Trigger\"\r\n                        helperText=\"After this many orders within 5 minutes, Balance Bot will go into cooldown mode (set to 0 to disable)\"\r\n                        value={cooldown}\r\n                        onChange={onCooldown}\r\n                        className={classes.textinput}\r\n                    />\r\n                </Grid>\r\n                <Grid item xs={6}>\r\n                    <TextField\r\n                        required\r\n                        id=\"change24h\"\r\n                        name=\"change24h\"\r\n                        label=\"Maximum 24h Drop (%)\"\r\n                        helperText=\"If a coin's 24h change goes below this maximum, your bot will be paused (set to 0 to disable)\"\r\n                        value={change24h}\r\n                        onChange={onChange24h}\r\n                        className={classes.textinput}\r\n                    />\r\n                </Grid>\r\n                <Grid item xs={12}>\r\n                    <FormControlLabel\r\n                        control={<Checkbox color=\"secondary\" name=\"headless\" checked={headless} onChange={onHeadless} />}\r\n                        label=\"Run bot in automatic mode\"\r\n                    />\r\n                </Grid>\r\n            </Grid>\r\n        </React.Fragment>\r\n    );\r\n}","import React, { useState, useEffect, useContext, useRef } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Stepper from '@material-ui/core/Stepper';\r\nimport Step from '@material-ui/core/Step';\r\nimport StepLabel from '@material-ui/core/StepLabel';\r\nimport Button from '@material-ui/core/Button';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport ConfigP1 from './ConfigP1';\r\nimport ConfigP2 from './ConfigP2';\r\nimport ConfigP3 from './ConfigP3';\r\nimport ConfigP4 from './ConfigP4';\r\nimport Backdrop from '@material-ui/core/Backdrop';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport { socket } from '../context/SocketContext';\r\nimport { useSnackbar } from 'notistack';\r\nimport { ConfigurationContext } from '../context/ConfigurationContext';\r\nimport { ConfigurationInputContext } from '../context/ConfigurationInputContext';\r\nimport { StartingBalanceContext } from '../context/StartingBalanceContext';\r\nimport { ServerContext } from '../context/ServerContext';\r\nimport { BalancesContext } from '../context/BalancesContext';\r\nimport { Crypt } from 'hybrid-crypto-js';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    layout: {\r\n        width: '1000px',\r\n        marginLeft: theme.spacing(2),\r\n        marginRight: theme.spacing(2),\r\n    },\r\n    paper: {\r\n        marginTop: theme.spacing(3),\r\n        marginBottom: theme.spacing(3),\r\n        padding: theme.spacing(2),\r\n        [theme.breakpoints.up(600 + theme.spacing(3) * 2)]: {\r\n            marginTop: theme.spacing(6),\r\n            marginBottom: theme.spacing(6),\r\n            padding: theme.spacing(3),\r\n        },\r\n    },\r\n    stepper: {\r\n        padding: theme.spacing(3, 0, 5),\r\n    },\r\n    buttons: {\r\n        display: 'flex',\r\n        justifyContent: 'flex-end',\r\n    },\r\n    button: {\r\n        marginTop: theme.spacing(3),\r\n        marginLeft: theme.spacing(1),\r\n    },\r\n    backdrop: {\r\n        zIndex: theme.zIndex.drawer + 1,\r\n        color: '#fff',\r\n    },\r\n}));\r\n\r\nconst steps = ['Exchange Details', 'Coin Settings', 'Liquidity Settings', 'General Settings'];\r\n\r\nexport default function ConfigMain() {\r\n    const classes = useStyles();\r\n    const [configuration, setConfiguration] = useContext(ConfigurationContext);\r\n    const { enqueueSnackbar, closeSnackbar } = useSnackbar();\r\n    const [activeStep, setActiveStep] = useState(0);\r\n    const [coinsLoaded, setCoinsLoaded] = useState(false);\r\n    const [input, setInput] = useContext(ConfigurationInputContext);\r\n    const setStartingBalance = useContext(StartingBalanceContext)[1];\r\n    const setBalances = useContext(BalancesContext)[1];\r\n    const [open, setOpen] = useState(false);\r\n    const { access, publicKey } = useContext(ServerContext)[0];\r\n    const [dialog2, setDialog2] = useState({ title: '', message: '' });\r\n    const [openDialog2, setOpenDialog2] = useState(false);\r\n    const dialogShownRef = useRef(false);\r\n\r\n    let crypt = new Crypt({\r\n        md: 'sha256',\r\n        rsaStandard: 'RSA-OAEP',\r\n    });\r\n\r\n    const handleClose = () => {\r\n        setOpen(false);\r\n    };\r\n\r\n    useEffect(() => {\r\n        setInput({ ...configuration, recreate: false });\r\n\r\n        return () => {\r\n        }\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (configuration.apiKey === '***' && configuration.apiSecret === '***' && !dialogShownRef.current) {\r\n            dialogShownRef.current = true;\r\n\r\n            setDialog2({\r\n                title: 'Your bot has been restored from a backup',\r\n                message: 'Please re-enter your API details to re-activate your bot',\r\n            });\r\n\r\n            setOpenDialog2(true);\r\n        }\r\n\r\n        return () => {\r\n        }\r\n    }, [configuration]);\r\n\r\n    const action = key => (\r\n        <React.Fragment>\r\n            <Button\r\n                style={{\r\n                    color: '#bbbbbb',\r\n                }}\r\n                onClick={() => { closeSnackbar(key) }}>\r\n                Dismiss\r\n            </Button>\r\n        </React.Fragment>\r\n    );\r\n\r\n    const handleNext = () => {\r\n        let error = false;\r\n        if (activeStep === 0) {\r\n            if (input.exchange === '' || input.apiKey === '' || input.apiSecret === '') error = true;\r\n            else getPortfolio();\r\n        }\r\n        if (activeStep === 1) {\r\n            let match = input.portfolio.find(c => c.coin === input.basecoin);\r\n            if (!match) error = true;   // If 'next' is clicked before coins are loaded, match will be false\r\n            if (match && Number(match.distribution) === 0) error = true; // target distribution of basecoin may not be set to zero\r\n            if (!coinsLoaded) error = true;\r\n        }\r\n        if (activeStep === 3) {\r\n            if (input.botname.length === 0) {\r\n                error = true;\r\n                enqueueSnackbar('Bot name must be defined', {\r\n                    variant: 'error',\r\n                    autoHideDuration: 8000,\r\n                    action,\r\n                });\r\n            }\r\n            if (Number(input.threshold) === 0) {\r\n                error = true;\r\n                enqueueSnackbar('Threshold must be defined', {\r\n                    variant: 'error',\r\n                    autoHideDuration: 8000,\r\n                    action,\r\n                });\r\n            }\r\n            if (input.cooldown === '') {\r\n                error = true;\r\n                enqueueSnackbar('Cooldown trigger must be defined', {\r\n                    variant: 'error',\r\n                    autoHideDuration: 8000,\r\n                    action,\r\n                });\r\n            }\r\n            if (input.change24h === '') {\r\n                error = true;\r\n                enqueueSnackbar('Maximum 24h percentage drop must be defined', {\r\n                    variant: 'error',\r\n                    autoHideDuration: 8000,\r\n                    action,\r\n                });\r\n            }\r\n            if (!error) {\r\n                setOpen(true);\r\n                storeConfiguration();\r\n                // Wait for server confirmation below\r\n            }\r\n        }\r\n        if (activeStep !== 3 && !error) setActiveStep(activeStep + 1);\r\n    };\r\n\r\n    const setPortfolioListener = () => {\r\n        socket.on(\"portfolio\", data => {\r\n            // data is false if the API key or secret are invalid, or if the server's IP address is not whitelisted on exchange\r\n            if (data === false) {\r\n                setActiveStep(0);\r\n                enqueueSnackbar(`Invalid API key or API secret`, {\r\n                    variant: 'error',\r\n                    autoHideDuration: 8000,\r\n                    action,\r\n                });\r\n                enqueueSnackbar(`Also make sure your machine's IP address is whitelisted for this API key on the exchange`, {\r\n                    variant: 'error',\r\n                    autoHideDuration: 8000,\r\n                    action,\r\n                });\r\n                setPortfolioListener();\r\n            }\r\n\r\n            if (input.basecoin !== '' && data.length > 0) {\r\n                setCoinsLoaded(true);\r\n            }\r\n        });\r\n    }\r\n\r\n    useEffect(() => {\r\n        setPortfolioListener();\r\n\r\n        return () => {\r\n        }\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        socket.on(\"configuration-stored\", () => {\r\n            if (input.apiPassword) {\r\n                setConfiguration((prevState => {\r\n                    return {\r\n                        ...prevState,\r\n                        apiKey: '************',\r\n                        apiSecret: '************',\r\n                        apiPassword: '************',\r\n                    }\r\n                }));\r\n            } else {\r\n                setConfiguration((prevState => {\r\n                    return {\r\n                        ...prevState,\r\n                        apiKey: '************',\r\n                        apiSecret: '************',\r\n                    }\r\n                }));\r\n            }\r\n            // Reset starting balances to trigger reload (in case coins were added to portfolio)\r\n            setStartingBalance([]);\r\n            setOpen(false);\r\n            setActiveStep(4);\r\n        });\r\n\r\n        return () => {\r\n            socket.off(\"configuration-stored\");\r\n        }\r\n    }, []);\r\n\r\n    const handleBack = () => {\r\n        if (activeStep === 2) {\r\n            // Reactivate listener, as it gets deactivated in step 2\r\n            setPortfolioListener();\r\n            getPortfolio();\r\n        }\r\n        setActiveStep(activeStep - 1);\r\n    };\r\n\r\n    const handleInput = (e) => {\r\n        let newInput = input;\r\n        newInput[e.field] = e.input;\r\n        setInput(newInput);\r\n    }\r\n\r\n    const getPortfolio = () => {\r\n        if (socket && access.allow) socket.emit(\"get-portfolio\", {\r\n            exchange: input.exchange,\r\n            apiKey: input.apiKey,\r\n            apiSecret: input.apiSecret,\r\n            apiPassword: input.apiPassword,\r\n            basecoin: input.basecoin,\r\n        }, access.token);\r\n    }\r\n\r\n    const storeConfiguration = () => {\r\n        // Store numbers as numbers\r\n        input.threshold = Number(input.threshold);\r\n        input.cooldown = parseInt(input.cooldown);\r\n        input.change24h = parseInt(input.change24h);\r\n\r\n        // Filter out fields that don't have to be stored\r\n        input.portfolio.forEach((coin) => {\r\n            delete coin.currentDistribution;\r\n            delete coin.number;\r\n            delete coin.price;\r\n        });\r\n\r\n        // Remove unneeded field\r\n        delete input.excludedChange;\r\n        delete input.offsetChange;\r\n        delete input.configstate;\r\n\r\n        // Filter liquidity changes with number = 0\r\n        let newLiquidity = [];\r\n        input.liquidity.forEach(liq => {\r\n            newLiquidity.push({\r\n                date: liq.date,\r\n                changes: liq.changes.filter(c => c.number !== 0),\r\n            });\r\n        });\r\n        input.liquidity = newLiquidity;\r\n\r\n        // Remove days with zero changes\r\n        newLiquidity = [];\r\n        input.liquidity.forEach(liq => {\r\n            if (liq.changes.length !== 0) {\r\n                newLiquidity.push(liq);\r\n            }\r\n        });\r\n        input.liquidity = newLiquidity;\r\n\r\n        // Remove suggested field\r\n        let liqlast = input.liquidity[input.liquidity.length - 1];\r\n        if (liqlast) liqlast.changes.forEach(liq => {\r\n            delete liq.suggested;\r\n            delete liq.id;\r\n        });\r\n\r\n        // Sort liquidity by date\r\n        input.liquidity.sort((a, b) => (a.date > b.date) ? 1 : ((b.date > a.date) ? -1 : 0));\r\n\r\n        if (socket && access.allow) {\r\n            let encryptedInput = {\r\n                ...input,\r\n                apiKey: crypt.encrypt(publicKey, input.apiKey),\r\n                apiSecret: crypt.encrypt(publicKey, input.apiSecret),\r\n            }\r\n            if (input.apiPassword) encryptedInput.apiPassword = crypt.encrypt(publicKey, input.apiPassword);\r\n\r\n            socket.emit(\"store-configuration\", encryptedInput, access.token);\r\n            setConfiguration(input);\r\n            setBalances({});\r\n        }\r\n    }\r\n\r\n    function getStepContent(step) {\r\n        switch (step) {\r\n            case 0:\r\n                return <ConfigP1 callback={handleInput} />;\r\n            case 1:\r\n                return <ConfigP2 callback={handleInput} />;\r\n            case 2:\r\n                return <ConfigP3 callback={handleInput} />;\r\n            case 3:\r\n                return <ConfigP4 callback={handleInput} />;\r\n            default:\r\n                throw new Error('Unknown step');\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <Backdrop className={classes.backdrop} open={open} onClick={handleClose}>\r\n                <CircularProgress color=\"inherit\" />\r\n            </Backdrop>\r\n            <React.Fragment>\r\n                <CssBaseline />\r\n                <Dialog\r\n                    open={openDialog2}\r\n                    fullWidth={true}\r\n                >\r\n                    <DialogTitle>{dialog2.title}</DialogTitle>\r\n                    <DialogContent>\r\n                        <DialogContentText>\r\n                            {dialog2.message}\r\n                        </DialogContentText>\r\n                    </DialogContent>\r\n                    <DialogActions>\r\n                        <Button variant=\"contained\" onClick={() => setOpenDialog2(false)} color=\"secondary\">\r\n                            Close\r\n                        </Button>\r\n                    </DialogActions>\r\n                </Dialog>\r\n                <main className={classes.layout}>\r\n                    <Paper className={classes.paper}>\r\n                        <Stepper activeStep={activeStep} className={classes.stepper}>\r\n                            {steps.map((label) => (\r\n                                <Step key={label}>\r\n                                    <StepLabel>{label}</StepLabel>\r\n                                </Step>\r\n                            ))}\r\n                        </Stepper>\r\n                        <React.Fragment>\r\n                            {activeStep === steps.length ? (\r\n                                <React.Fragment>\r\n                                    <Typography variant=\"h5\" gutterBottom>\r\n                                        Configuration has been saved\r\n                                    </Typography>\r\n                                    <Typography variant=\"subtitle1\">\r\n                                        You can now leave this page\r\n                                    </Typography>\r\n                                </React.Fragment>\r\n                            ) : (\r\n                                <React.Fragment>\r\n                                    {getStepContent(activeStep)}\r\n                                    <div className={classes.buttons}>\r\n                                        {activeStep !== 0 && (\r\n                                            <Button onClick={handleBack} className={classes.button}>\r\n                                                Back\r\n                                            </Button>\r\n                                        )}\r\n                                        <Button\r\n                                            variant=\"contained\"\r\n                                            color=\"primary\"\r\n                                            onClick={handleNext}\r\n                                            className={classes.button}\r\n                                        >\r\n                                            {activeStep === steps.length - 1 ? 'Save Configuration' : 'Next'}\r\n                                        </Button>\r\n                                    </div>\r\n                                </React.Fragment>\r\n                            )}\r\n                        </React.Fragment>\r\n                    </Paper>\r\n                </main>\r\n            </React.Fragment>\r\n        </div>\r\n    );\r\n}","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport ConfigMain from \"../components/ConfigMain\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    flexGrow: 1,\r\n  },\r\n  paper: {\r\n    padding: theme.spacing(2),\r\n  },\r\n}));\r\n\r\n\r\nconst Configuration = () => {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Grid container spacing={3}>\r\n        <Grid item xs={12}>\r\n          <Typography variant=\"h3\" noWrap>\r\n            Configuration\r\n          </Typography>\r\n        </Grid>\r\n        <Grid item xs={12}>\r\n          <ConfigMain />\r\n        </Grid>\r\n      </Grid>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Configuration;","import React, { useContext, useState, useEffect, useRef } from 'react';\r\nimport { makeStyles, withStyles, createMuiTheme, ThemeProvider } from '@material-ui/core/styles';\r\nimport Drawer from '@material-ui/core/Drawer';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport List from '@material-ui/core/List';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport { Link, Switch, Route, Redirect, useHistory } from 'react-router-dom';\r\nimport Link2 from '@material-ui/core/Link';\r\nimport { generatePath } from \"react-router\";\r\nimport DMSwitch from '@material-ui/core/Switch';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Box from '@material-ui/core/Box';\r\nimport Hidden from '@material-ui/core/Hidden';\r\nimport Backdrop from '@material-ui/core/Backdrop';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport Chip from '@material-ui/core/Chip';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Button from '@material-ui/core/Button';\r\nimport ButtonBase from '@material-ui/core/ButtonBase';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\nimport ExitToAppIcon from '@material-ui/icons/ExitToApp';\r\nimport AutorenewIcon from '@material-ui/icons/Autorenew';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport SettingsBackupRestoreIcon from '@material-ui/icons/SettingsBackupRestore';\r\nimport { useLocalStore } from \"../services/LocalStoreService\";\r\nimport { FiatContext } from '../context/FiatContext';\r\nimport { ConfigurationContext } from '../context/ConfigurationContext';\r\nimport { ServerContext } from '../context/ServerContext';\r\nimport { MessageContext } from '../context/MessageContext';\r\nimport { BotsContext } from '../context/BotsContext';\r\nimport { routesUp, routesDown } from '../routes/Routes';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport ReactMarkdown from 'react-markdown';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport pckg2 from '../version2.json';\r\nimport { socket } from '../context/SocketContext';\r\nimport mixpanel from 'mixpanel-browser';\r\nimport SwipeableDrawer from '@material-ui/core/SwipeableDrawer';\r\n\r\nconst drawerWidth = 240;\r\nconst selectorButtonWidth = 80;\r\nconst selectorButtonHeight = 40;\r\nconst selectorButtonMargin = 8;\r\nconst selectorMouseMarginRight = 40;\r\nconst selectorMouseMarginLeft = 100;\r\nconst windowMargin = 16;\r\nlet selectorHeight = 64;\r\nlet selectorWidth;\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: 'flex',\r\n  },\r\n  appBar: {\r\n    zIndex: theme.zIndex.drawer + 1,\r\n  },\r\n  logo: {\r\n    maxWidth: 60,\r\n    padding: 10,\r\n  },\r\n  outlinedButton: {\r\n    width: selectorButtonWidth,\r\n    height: selectorButtonHeight,\r\n    border: '1px solid rgba(128, 128, 128, 0.5)',\r\n    padding: '6px 8px',\r\n    margin: '4px 4px',\r\n    borderRadius: '4px',\r\n    color: 'currentColor',\r\n    textTransform: 'none',\r\n    '&:hover': {\r\n      border: '1px solid currentColor',\r\n      backgroundColor: 'rgba(0, 0, 0, 0.08)',\r\n    },\r\n  },\r\n  filledButton: {\r\n    width: selectorButtonWidth,\r\n    height: selectorButtonHeight,\r\n    border: '1px solid currentColor',\r\n    padding: '6px 8px',\r\n    margin: '4px 4px',\r\n    borderRadius: '4px',\r\n    color: 'currentColor',\r\n    backgroundColor: 'rgba(5, 5, 5, 0.08)',\r\n    textTransform: 'none',\r\n    '&:hover': {\r\n      border: '1px solid currentColor',\r\n      backgroundColor: 'rgba(5, 5, 5, 0.08)',\r\n    },\r\n  },\r\n  invisibleFiller: {\r\n    width: selectorButtonWidth,\r\n    height: selectorButtonHeight,\r\n    border: 'none',\r\n    padding: '6px 8px',\r\n    margin: '4px 4px',\r\n    color: 'rgba(0, 0, 0, 0)',\r\n    backgroundColor: 'rgba(0, 0, 0, 0)',\r\n  },\r\n  botselectordrawer: {\r\n    width: '100%',\r\n    flexShrink: 0,\r\n  },\r\n  botselectordrawerPaper: {\r\n    width: '100%',\r\n    height: selectorHeight,\r\n  },\r\n  drawer: {\r\n    width: drawerWidth,\r\n    flexShrink: 0,\r\n  },\r\n  drawerPaper: {\r\n    width: drawerWidth,\r\n    height: '100%',\r\n  },\r\n  drawerContainer: {\r\n    overflow: 'auto',\r\n  },\r\n  settingsPaper: {\r\n    width: '100%',\r\n    height: '100%',\r\n  },\r\n  content: {\r\n    justify: \"flex-start\",\r\n    alignItems: \"flex-start\",\r\n    flexGrow: 1,\r\n    padding: theme.spacing(2),\r\n  },\r\n  form: {\r\n    width: '100%', // Fix IE 11 issue.\r\n    marginTop: theme.spacing(1),\r\n  },\r\n  footer: {\r\n    // padding: theme.spacing(1),\r\n    marginTop: 'auto',\r\n    backgroundColor: '#000000',\r\n  },\r\n  bottomPush: {\r\n    position: \"fixed\",\r\n    width: '100%',\r\n    bottom: 0,\r\n    paddingBottom: 0,\r\n    zIndex: theme.zIndex.drawer + 1,\r\n  },\r\n  backdrop: {\r\n    zIndex: theme.zIndex.drawer + 1,\r\n    color: '#fff',\r\n  },\r\n  bottomPush2: {\r\n    position: \"fixed\",\r\n    bottom: 0,\r\n    paddingBottom: 70,\r\n  },\r\n  smallScreenToggles: {\r\n    maxWidth: '100%',\r\n    bottom: 0,\r\n    paddingBottom: 0,\r\n    paddingTop: 24,\r\n  },\r\n}));\r\n\r\nconst getBotPath = () => {\r\n  const pathname = window.location.pathname;\r\n  const result = pathname.match(/bot[0-9]{3}/);\r\n\r\n  if (result)\r\n    return result[0];\r\n  else\r\n    return null;\r\n}\r\n\r\nfunction Copyright() {\r\n  return (\r\n    <Box color=\"#FFF\" height={54} p={2}>\r\n      <Typography variant=\"body2\" align=\"center\">\r\n        {'Copyright  '}\r\n        <Link2 style={{ color: '#ffffff', textDecoration: 'none' }} href=\"https://hodlerhacks.com/\" target=\"_blank\" rel=\"noopener\">\r\n          hodlerhacks.com\r\n        </Link2>{' '}\r\n        {new Date().getFullYear()}\r\n      </Typography>\r\n    </Box>\r\n  );\r\n}\r\n\r\nfunction BotSelector(props) {\r\n  const classes = useStyles();\r\n  const { bots, show, windowWidth, switchBot } = props;\r\n\r\n  const currentBot = getBotPath();\r\n\r\n  const availableWidth = windowWidth - windowMargin;\r\n  let numBotsPerRow = Math.floor(availableWidth / (selectorButtonWidth + selectorButtonMargin));\r\n  if (numBotsPerRow > bots.length) numBotsPerRow = bots.length;\r\n  const numRows = Math.ceil(bots.length / numBotsPerRow);\r\n\r\n  selectorHeight = 16 + numRows * (selectorButtonHeight + selectorButtonMargin);\r\n  selectorWidth = numBotsPerRow * selectorButtonWidth + (numBotsPerRow - 1) * selectorButtonMargin;\r\n\r\n  // Fill the last row with empty fillers to make sure the first element is left-aligned\r\n  let fillers = (numRows > 1 && numRows !== bots.length) ? numBotsPerRow - bots.length % numBotsPerRow : 0;\r\n  if (fillers < 0) fillers = 0;\r\n\r\n  let botsJustified = [];\r\n  botsJustified.push(...bots);\r\n\r\n  for (let i = 0; i < fillers; i++) {\r\n    botsJustified.push({\r\n      handle: 'filler',\r\n    });\r\n  }\r\n\r\n  return (\r\n    <SwipeableDrawer\r\n      className={classes.botselectordrawer}\r\n      anchor=\"top\" open={show}\r\n      onOpen={() => { return }}\r\n      onClose={() => { return }}\r\n      classes={{\r\n        paper: classes.botselectordrawerPaper,\r\n      }}\r\n    >\r\n      <div style={{ width: availableWidth, display: 'flex', justifyContent: 'center' }}>\r\n        <div style={{ margin: 8, width: selectorWidth, display: 'flex', justifyContent: 'center', flexWrap: 'wrap' }}>\r\n          {botsJustified.map((bot, index) => {\r\n            if (index % numBotsPerRow === 0) {\r\n              return (\r\n                <React.Fragment key={index}>\r\n                  <div style={{ display: 'flex', justifyContent: 'center' }}>\r\n                    {botsJustified.slice(index, index + numBotsPerRow).map(botRow => {\r\n                      return (\r\n                        (botRow.handle === currentBot ? (\r\n                          <LightTooltip key={botRow.botID} title={botRow.botname}>\r\n                            <Button className={classes.filledButton} onClick={() => { return }}>\r\n                              {botRow.botID}\r\n                            </Button>\r\n                          </LightTooltip>\r\n                        ) : (botRow.handle !== 'filler') ?\r\n                          (\r\n                            <LightTooltip key={botRow.botID} title={botRow.botname}>\r\n                              <Button className={classes.outlinedButton} onClick={() => switchBot(botRow)}>\r\n                                {botRow.botID}\r\n                              </Button>\r\n                            </LightTooltip>\r\n                          ) : (\r\n                            <div className={classes.invisibleFiller} />\r\n                          ))\r\n                      );\r\n                    })}\r\n                  </div>\r\n                </React.Fragment>\r\n              );\r\n            }\r\n            return null;\r\n          })}\r\n        </div>\r\n      </div>\r\n    </SwipeableDrawer>\r\n  );\r\n}\r\n\r\nconst LightTooltip = withStyles((theme) => ({\r\n  tooltip: {\r\n    backgroundColor: theme.palette.common.white,\r\n    color: 'rgba(0, 0, 0, 0.87)',\r\n    boxShadow: theme.shadows[1],\r\n    fontSize: 12,\r\n  },\r\n}))(Tooltip);\r\n\r\nexport default function Main() {\r\n  const history = useHistory();\r\n  const version = pckg2.version;\r\n  const bbv = pckg2.version;\r\n  const checkNow = useRef(false);\r\n\r\n  const [mode, setMode] = useLocalStore('mode', 'light');\r\n  const setFiatStore = useLocalStore('fiat', 'USD')[1];\r\n  const [fiat, setFiat] = useContext(FiatContext);\r\n  const [messages, setMessages] = useContext(MessageContext);\r\n  const configuration = useContext(ConfigurationContext)[0];\r\n  const [modus, setModus] = useState('manual');\r\n  const [{ status, serverversion, environment, servertime, access, publicKey, userid, validInstallation }, setServer] = useContext(ServerContext);\r\n  const [openUpdate, setOpenUpdate] = useState(false);\r\n  const [outdated, setOutdated] = useState(false);\r\n  const [open, setOpen] = useState(true);\r\n  const setDisconnected = useState(false)[1];\r\n  const [modusSwitchDisabled, setModusSwitchDisabled] = useState(window.location.pathname.includes('/configuration'));\r\n  const [flexWidthDown, setFlexWidthDown] = useState(0);\r\n  const [flexWidthUp, setFlexWidthUp] = useState(0);\r\n  const [overlayMenu, setOverlayMenu] = useState(false);\r\n  const [latestVersion, setLatestVersion] = useLocalStore('latest-version', version) || '0.0.0';\r\n  const [lastMsg, setLastMsg] = useLocalStore('last-msg', 0);\r\n  const [dialog, setDialog] = useState({ number: 0, title: '', message: '', lock: false });\r\n  const [openDialog, setOpenDialog] = useState(false);\r\n  const [maxWidth, setMaxWidth] = useState('sm');\r\n  const [checkIconColor, setcheckIconColor] = useState('#fff');\r\n  const [showBotSelector, setShowBotSelector] = useState(false);\r\n  const bots = useContext(BotsContext)[0];\r\n  const lastRef = useRef(lastMsg);\r\n\r\n  const [botPath, setBotPath] = useState(getBotPath());\r\n\r\n  const getPath = (page) => {\r\n    if (botPath) {\r\n      return generatePath(\"/:bot/:page\", {\r\n        bot: botPath,\r\n        page: page,\r\n      });\r\n    } else {\r\n      return '';\r\n    }\r\n  }\r\n\r\n  const handleRefresh = () => {\r\n    window.location.reload();\r\n  }\r\n\r\n  useEffect(() => {\r\n    setDisconnected(status === 'disconnected' && Object.keys(configuration).length !== 0);\r\n\r\n    return () => {\r\n    }\r\n  }, [status]);\r\n\r\n  useEffect(() => {\r\n    const url = window.location.origin;\r\n    const localhost = url.includes('localhost');\r\n\r\n    // Mixpanel\r\n    if (userid) {\r\n      mixpanel.init('6b67f3d61ee94b8f5c80b4affef4c4d9',\r\n        {\r\n          host: \"api-eu.mixpanel.com\",\r\n        });\r\n      mixpanel.identify(userid);\r\n      mixpanel.track('Dashboard', {\r\n        'localhost': localhost,\r\n      });\r\n    }\r\n\r\n    return () => {\r\n    }\r\n  }, [userid]);\r\n\r\n  useEffect(() => {\r\n    document.title = `BB | Bot Dashboard`;\r\n\r\n    // Make sure the local fiat setting is stored in the config (v2.6.2)\r\n    const newFiat = localStorage.getItem('fiat');\r\n    submitFiat(newFiat);\r\n\r\n    // Listen to local store changes (when toggled on another page)\r\n    window.addEventListener('storage', () => {\r\n      const newMode = localStorage.getItem('mode');\r\n      setMode(newMode);\r\n      // const newFiat = localStorage.getItem('fiat');\r\n      // setFiat(newFiat);\r\n      // submitFiat(newFiat);\r\n\r\n      const newVersion = localStorage.getItem('latest-version');\r\n      setLatestVersion(newVersion);\r\n\r\n      const newLast = localStorage.getItem('last-msg');\r\n\r\n      if (newLast !== lastRef.current) {\r\n        lastRef.current = newLast;\r\n\r\n        let newMessages = [];\r\n\r\n        // Only keep messages that haven't been shown yet (on any page)\r\n        messages.forEach(msg => {\r\n          if (msg.number > newLast) newMessages.push(msg);\r\n        });\r\n\r\n        setMessages(newMessages);\r\n      }\r\n    });\r\n\r\n    return () => {\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    setOpen(status !== 'connected' || Object.keys(configuration).length === 0);\r\n    return () => {\r\n    }\r\n  }, [status, configuration]);\r\n\r\n  useEffect(() => {\r\n    document.title = `BB | ${configuration.botname}`;\r\n\r\n    setModus(configuration.headless ? 'auto' : 'manual');\r\n\r\n    return () => {\r\n    }\r\n  }, [configuration]);\r\n\r\n  useEffect(() => {\r\n    const unlisten = history.listen((location) => {\r\n      setModusSwitchDisabled(location.pathname.includes('/configuration'));\r\n      setBotPath(getBotPath());\r\n    });\r\n    // Clean up the event listener\r\n    return () => {\r\n      unlisten();\r\n    };\r\n  }, [history])\r\n\r\n  useEffect(() => {\r\n    const outdated = (serverversion && (serverversion !== '0.0' && serverversion !== version));\r\n    setOutdated(outdated);\r\n\r\n    return () => {\r\n    }\r\n  }, [serverversion]);\r\n\r\n  const isNewerVersion = (newVer, oldVer) => {\r\n    const oldParts = oldVer.split('.')\r\n    const newParts = newVer.split('.')\r\n    for (var i = 0; i < newParts.length; i++) {\r\n      const a = ~~newParts[i] // parse int\r\n      const b = ~~oldParts[i] // parse int\r\n      if (a > b) return true\r\n      if (a < b) return false\r\n    }\r\n    return false\r\n  }\r\n\r\n  useEffect(() => {\r\n    let wdtDown = 100;\r\n    let wdtUp = 100;\r\n    const update = isNewerVersion(latestVersion, version);\r\n    const logout = access && access.token;\r\n\r\n    if (update) {\r\n      wdtDown += 140;\r\n    }\r\n    if (logout) {\r\n      wdtDown += 50;\r\n      wdtUp += 50;\r\n    }\r\n\r\n    setFlexWidthDown(wdtDown);\r\n    setFlexWidthUp(wdtUp);\r\n\r\n    return () => {\r\n    }\r\n  }, [latestVersion, version, access]);\r\n\r\n  const classes = useStyles();\r\n\r\n  const handleDarkmode = (e) => {\r\n    (mode === 'light') ? setMode('dark') : setMode('light');\r\n  }\r\n\r\n  const submitFiat = (fiat) => {\r\n    if (socket) socket.emit(\"store-fiat\", fiat, access.token);\r\n  }\r\n\r\n  const handleFiat = (e) => {\r\n    if (fiat === 'EUR') {\r\n      setFiat('USD');\r\n      submitFiat('USD');\r\n      setFiatStore('USD');\r\n    } else {\r\n      setFiat('EUR');\r\n      submitFiat('EUR');\r\n      setFiatStore('EUR');\r\n    }\r\n  }\r\n\r\n  const handleModus = (e) => {\r\n    const newModus = (modus === 'auto') ? 'manual' : 'auto';\r\n    const headless = (newModus === 'auto');\r\n    setModus(newModus);\r\n    if (socket && access.allow) socket.emit(\"store-headless\", {\r\n      headless: headless,\r\n    }, access.token);\r\n  }\r\n\r\n  const theme = createMuiTheme({\r\n    palette: {\r\n      type: mode\r\n    }\r\n  });\r\n\r\n  const StyledButton = withStyles({\r\n    root: {\r\n      '&:hover': {\r\n        backgroundColor: 'transparent',\r\n      },\r\n      '&:click': {\r\n        backgroundColor: '#f00',\r\n      },\r\n      justifyContent: 'flex-start',\r\n    },\r\n  })(Button);\r\n\r\n  const onLogout = () => {\r\n    if (socket) socket.emit(\"logout\", access.token);\r\n    setServer({\r\n      status: status,\r\n      serverversion: serverversion,\r\n      servertime: servertime,\r\n      access: {\r\n        allow: false,\r\n        reason: 'logged out',\r\n        token: null,\r\n      },\r\n      publicKey: publicKey,\r\n    });\r\n  };\r\n\r\n  const [openResetConfirm, setOpenResetConfirm] = useState(false);\r\n\r\n  const handleResetHistory = () => {\r\n    setOpenResetConfirm(true);\r\n  }\r\n\r\n  const confirmResetHistory = () => {\r\n    setOpenResetConfirm(false);\r\n    if (socket) socket.emit(\"reset-history\", access.token);\r\n  }\r\n\r\n  const backHome = () => {\r\n    let openUrl = window.location.origin;\r\n    if (openUrl.includes(':4000')) openUrl = openUrl.replace(':4000', ':5000'); // For development only\r\n\r\n    if (configuration.onepagemode)\r\n      window.open(openUrl, '_self', 'noopener');\r\n    else\r\n      window.open(openUrl, '_blank', 'noopener');\r\n  }\r\n\r\n  const cleanBotname = (name) => {\r\n    if (name && name.charAt(0) === '^') name = name.slice(1);\r\n\r\n    return name;\r\n  }\r\n\r\n  const toggleOverlayMenu = (open) => {\r\n    setOverlayMenu(open);\r\n  }\r\n\r\n  const checkForUpdate = () => {\r\n    checkNow.current = true;\r\n    getMessages();\r\n  }\r\n\r\n  const handleUpdateOpen = () => {\r\n    setOpenUpdate(true);\r\n  }\r\n\r\n  const confirmBbUpdate = () => {\r\n    setOpenUpdate(false);\r\n\r\n    if (socket) socket.emit(\"update-bb\", access.token);\r\n  }\r\n\r\n  const handleUpdateClose = () => {\r\n    setOpenUpdate(false);\r\n  }\r\n\r\n  const handleCloseDialog = async (e) => {\r\n    const last = e.target.parentElement.id;\r\n    setOpenDialog(false);\r\n\r\n    // Remove shown message from array\r\n    const newMessages = messages.slice(1, messages.length);\r\n    setMessages(newMessages);\r\n\r\n    if (socket) socket.emit(\"confirm-message\", last, access.token);\r\n\r\n    setLastMsg(last);\r\n  };\r\n\r\n  const sleep = (ms) => {\r\n    return new Promise(resolve => setTimeout(resolve, ms));\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (messages.length > 0) {\r\n      const msg = messages[0];\r\n      if (msg.bbvNew) setLatestVersion(msg.bbvNew);\r\n\r\n      /// Only show message in case it matches current version, major version, or any\r\n      if (msg.bbvReceive === 'any' || bbv.startsWith(msg.bbvReceive)) {\r\n\r\n        // Check if the message contains a new version number, and if so, if BB is already on the new version\r\n        let alreadyUpdated = msg.bbvNew ? bbv >= msg.bbvNew : false;\r\n\r\n        // If already on the latest version, don't show the message\r\n        if (!alreadyUpdated) {\r\n          if (msg.dialogWidth === null) {\r\n            const textLength = msg.message.length;\r\n            if (textLength < 400) setMaxWidth('sm');\r\n            else if (textLength < 800) setMaxWidth('md');\r\n            else if (textLength < 3000) setMaxWidth('lg');\r\n            else setMaxWidth('xl');\r\n          } else {\r\n            setMaxWidth(msg.dialogWidth);\r\n          }\r\n\r\n          const newDialogMsg = {\r\n            number: msg.number,\r\n            title: msg.title,\r\n            message: msg.message,\r\n            width: msg.dialogWidth,\r\n            lock: msg.lock,\r\n            updated: alreadyUpdated,\r\n          }\r\n\r\n          setDialog(newDialogMsg);\r\n          setOpenDialog(true);\r\n        } else {\r\n          if (socket) socket.emit(\"confirm-message\", msg.number, access.token);\r\n          // Remove shown message from array\r\n          const newMessages = messages.slice(1, messages.length);\r\n          setMessages(newMessages);\r\n        }\r\n      } else {\r\n        if (socket) socket.emit(\"confirm-message\", msg.number, access.token);\r\n        // Remove message from array\r\n        const newMessages = messages.slice(1, messages.length);\r\n        setMessages(newMessages);\r\n      }\r\n    } else {\r\n      setOpenDialog(false);\r\n    }\r\n  }, [messages]);\r\n\r\n  async function getMessages() {\r\n    if (socket) socket.emit(\"get-messages\", access.token);\r\n\r\n    if (checkNow.current) {\r\n      setcheckIconColor('#ff9800');\r\n      setTimeout(() => {\r\n        setcheckIconColor('#fff');\r\n      }, 1500);\r\n    }\r\n\r\n    checkNow.current = false;\r\n  }\r\n\r\n  const switchBot = (bot) => {\r\n    let currentUrl = window.location.href;\r\n    let openUrl;\r\n\r\n    const index = currentUrl.indexOf('/bot');\r\n    const baseUrl = index === -1 ? currentUrl : currentUrl.substring(0, index);\r\n\r\n    if (bot.botname === 'Bot Manager') {\r\n      const botmanagerUrl = baseUrl.includes(':4000') ? baseUrl.replace(':4000', ':5000') : baseUrl; // For development only\r\n      openUrl = botmanagerUrl;\r\n    } else {\r\n      openUrl = baseUrl + '/' + bot.handle;\r\n    }\r\n    if (configuration.onepagemode)\r\n      window.open(openUrl, '_self', 'noopener');\r\n    else\r\n      window.open(openUrl, '_blank', 'noopener');\r\n  }\r\n\r\n  const [windowWidth, setWindowWidth] = useState(0)\r\n\r\n  useEffect(() => {\r\n    function handleResize() {\r\n      setWindowWidth(window.innerWidth)\r\n    }\r\n\r\n    window.addEventListener(\"resize\", handleResize);\r\n\r\n    handleResize();\r\n\r\n    return () => {\r\n      window.removeEventListener(\"resize\", handleResize);\r\n    }\r\n  }, [setWindowWidth])\r\n\r\n  useEffect(() => {\r\n    const handleMouseMove = (e) => {\r\n      // Hide and show bot selector is triggered at different positions (so users can reach the other buttons in the app bar)\r\n      if (showBotSelector) {\r\n        if (e.clientY > 0 && e.clientY <= selectorHeight) {\r\n          setShowBotSelector(true);\r\n        } else {\r\n          setShowBotSelector(false);\r\n        }\r\n      } else {\r\n        let wdt;\r\n        if (windowWidth < 600) {\r\n          wdt = flexWidthUp;\r\n        } else {\r\n          wdt = flexWidthDown;\r\n        }\r\n        if (e.clientY > 0 && e.clientY <= selectorHeight && e.clientX > selectorMouseMarginLeft && e.clientX < windowWidth - wdt - selectorMouseMarginRight) {\r\n          setShowBotSelector(true);\r\n        } else {\r\n          setShowBotSelector(false);\r\n        }\r\n      }\r\n    };\r\n\r\n    window.addEventListener('mousemove', handleMouseMove);\r\n\r\n    return () => {\r\n      window.removeEventListener('mousemove', handleMouseMove);\r\n    };\r\n  }, [windowWidth, flexWidthDown, showBotSelector]);\r\n\r\n  const SideMenu = (props) => {\r\n    const showToolbar = props.showToolbar;\r\n    return (\r\n      <Grid item xs={12}>\r\n        {showToolbar && (\r\n          <Toolbar />\r\n        )}\r\n        {(configuration.configstate !== 'initial' && configuration.configstate !== 'recovery' && configuration.configstate !== 'loading-canceled') ? (\r\n          <div className={classes.drawerContainer}>\r\n            <List>\r\n              {routesUp.map((prop, key) => {\r\n                return (\r\n                  <Link to={getPath(prop.path)} style={{ textDecoration: 'none' }} onClick={() => toggleOverlayMenu(false)} key={key}>\r\n                    <ListItem button key={prop.sidebarName}>\r\n                      <ListItemIcon><prop.icon /></ListItemIcon>\r\n                      <ListItemText primary={prop.sidebarName} primaryTypographyProps={{ variant: 'button', color: 'textPrimary' }} />\r\n                    </ListItem>\r\n                  </Link>\r\n                );\r\n              })}\r\n            </List>\r\n            <Divider />\r\n            {routesDown.map((prop, key) => {\r\n              return (\r\n                <Link to={getPath(prop.path)} style={{ textDecoration: 'none' }} onClick={() => toggleOverlayMenu(false)} key={key}>\r\n                  <ListItem button key={prop.sidebarName}>\r\n                    <ListItemIcon><prop.icon /></ListItemIcon>\r\n                    <ListItemText primary={prop.sidebarName} primaryTypographyProps={{ variant: 'button', color: 'textPrimary' }} />\r\n                  </ListItem>\r\n                </Link>\r\n              );\r\n            })}\r\n          </div>\r\n        ) : (\r\n          <div className={classes.drawerContainer}>\r\n            <List>\r\n              {routesUp.map((prop, key) => {\r\n                return (\r\n                  <Redirect to={getPath('configuration')} style={{ textDecoration: 'none' }} onClick={() => toggleOverlayMenu(false)} key={key}>\r\n                    <ListItem button key={prop.sidebarName}>\r\n                      <ListItemIcon><prop.icon /></ListItemIcon>\r\n                      <ListItemText primary={prop.sidebarName} primaryTypographyProps={{ variant: 'button', color: 'textPrimary' }} />\r\n                    </ListItem>\r\n                  </Redirect>\r\n                );\r\n              })}\r\n            </List>\r\n            <Divider />\r\n            {routesDown.slice(0, 1).map((prop, key) => {\r\n              return (\r\n                <Link to={getPath(prop.path)} style={{ textDecoration: 'none' }} onClick={() => toggleOverlayMenu(false)} key={key}>\r\n                  <ListItem button key={prop.sidebarName}>\r\n                    <ListItemIcon><prop.icon /></ListItemIcon>\r\n                    <ListItemText primary={prop.sidebarName} primaryTypographyProps={{ variant: 'button', color: 'textPrimary' }} />\r\n                  </ListItem>\r\n                </Link>\r\n              );\r\n            })}\r\n            {routesDown.slice(1, routesDown.length).map((prop, key) => {\r\n              return (\r\n                <Redirect to={getPath('configuration')} style={{ textDecoration: 'none' }} onClick={() => toggleOverlayMenu(false)} key={key}>\r\n                  <ListItem button key={prop.sidebarName}>\r\n                    <ListItemIcon><prop.icon /></ListItemIcon>\r\n                    <ListItemText primary={prop.sidebarName} primaryTypographyProps={{ variant: 'button', color: 'textPrimary' }} />\r\n                  </ListItem>\r\n                </Redirect>\r\n              );\r\n            })}\r\n          </div>\r\n        )}\r\n      </Grid>\r\n    )\r\n  }\r\n\r\n  return (<ThemeProvider theme={theme}>\r\n    {!outdated ? (\r\n      <React.Fragment>\r\n        <Backdrop className={classes.backdrop} open={open}>\r\n          <CircularProgress color=\"inherit\" />\r\n        </Backdrop>\r\n        {configuration.onepagemode && (\r\n          < BotSelector\r\n            bots={bots}\r\n            show={showBotSelector}\r\n            windowWidth={windowWidth}\r\n            switchBot={switchBot}\r\n          />\r\n        )}\r\n        <Dialog\r\n          open={openDialog}\r\n          fullWidth={true}\r\n          maxWidth={maxWidth}\r\n        >\r\n          <DialogTitle id=\"dialog-title\">{dialog.title}</DialogTitle>\r\n          <DialogContent>\r\n            <DialogContentText id=\"dialog-description\">\r\n              <ReactMarkdown linkTarget=\"_blank\">\r\n                {dialog.message}\r\n              </ReactMarkdown>\r\n            </DialogContentText>\r\n          </DialogContent>\r\n          <DialogActions>\r\n            <Button variant=\"contained\" id={dialog.number} onClick={handleCloseDialog} color=\"secondary\" disabled={dialog.lock}>\r\n              Close\r\n            </Button>\r\n          </DialogActions>\r\n        </Dialog>\r\n        <div className={classes.root}>\r\n          <CssBaseline />\r\n          <AppBar position=\"fixed\" className={classes.appBar}>\r\n            <Toolbar>\r\n              <Hidden lgUp>\r\n                <Grid item>\r\n                  <LightTooltip title=\"Menu\">\r\n                    <IconButton onClick={() => toggleOverlayMenu(true)}>\r\n                      <MenuIcon style={{ color: '#fff' }} />\r\n                    </IconButton>\r\n                  </LightTooltip>\r\n                </Grid>\r\n              </Hidden>\r\n              <ButtonBase onClick={backHome}>\r\n                <img src=\"/logo192.png\" alt=\"Balance Bot Logo\" className={classes.logo} />\r\n              </ButtonBase>\r\n              <Grid container direction=\"row\" alignItems=\"center\" nowrap=\"true\">\r\n                <Grid item xs zeroMinWidth>\r\n                  <Box mt={1.5}>\r\n                    <Typography variant=\"h6\" color=\"inherit\" noWrap>\r\n                      Balance Bot | {cleanBotname(configuration.botname)}\r\n                    </Typography>\r\n                  </Box>\r\n                  <Box mt={-1} style={{ color: '#959FD6' }}>\r\n                    <Typography variant=\"caption\" color=\"inherit\" noWrap>\r\n                      v{version} {environment === 'staging' && ('(staging)')}\r\n                    </Typography>\r\n                  </Box>\r\n                </Grid>\r\n                <Hidden xsDown>\r\n                  <FlexToolbar wdt={flexWidthDown} update={isNewerVersion(latestVersion, version)} logout={access && access.token} onLogout={onLogout} handleResetHistory={handleResetHistory} handleUpdateOpen={handleUpdateOpen} checkForUpdate={checkForUpdate} checkIconColor={checkIconColor} />\r\n                </Hidden>\r\n                <Hidden smUp>\r\n                  <FlexToolbar wdt={flexWidthUp} update={isNewerVersion(latestVersion, version)} logout={access && access.token} onLogout={onLogout} handleResetHistory={handleResetHistory} handleUpdateOpen={handleUpdateOpen} checkForUpdate={checkForUpdate} checkIconColor={checkIconColor} />\r\n                </Hidden>\r\n              </Grid>\r\n            </Toolbar>\r\n          </AppBar>\r\n          <Hidden mdDown>\r\n            <Drawer className={classes.drawer} variant=\"permanent\">\r\n              <Paper className={classes.drawerPaper}>\r\n                <Grid container direction=\"column\">\r\n                  <SideMenu showToolbar={true} />\r\n                  <div className={classes.bottomPush2}>\r\n                    <Box pl={1}>\r\n                      <Grid container item xs={12} alignItems=\"center\" justify=\"flex-end\" style={{ width: '200px' }}>\r\n                        <Grid item xs={8}>\r\n                          <FormControlLabel\r\n                            onChange={handleDarkmode}\r\n                            value={mode}\r\n                            control={<DMSwitch checked={mode === 'dark'} color=\"secondary\" />}\r\n                            label={<Typography variant=\"button\">Light&nbsp;&nbsp;&nbsp;&nbsp;</Typography>}\r\n                            labelPlacement=\"start\"\r\n                          />\r\n                        </Grid>\r\n                        <Grid item xs={4}>\r\n                          <StyledButton disableRipple onClick={handleDarkmode}><Typography variant=\"button\">Dark</Typography></StyledButton>\r\n                        </Grid>\r\n                      </Grid>\r\n                      <Grid container item xs={12} alignItems=\"center\" justify=\"flex-end\" style={{ width: '200px' }}>\r\n                        <Grid item xs={8}>\r\n                          <FormControlLabel\r\n                            onChange={handleFiat}\r\n                            value={fiat}\r\n                            control={<DMSwitch checked={fiat === 'EUR'} color=\"secondary\" />}\r\n                            label={<Typography variant=\"button\">USD&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</Typography>}\r\n                            labelPlacement=\"start\"\r\n                          />\r\n                        </Grid>\r\n                        <Grid item xs={4}>\r\n                          <StyledButton disableRipple onClick={handleFiat}><Typography variant=\"button\">EUR</Typography></StyledButton>\r\n                        </Grid>\r\n                      </Grid>\r\n                      <Grid container item xs={12} alignItems=\"center\" justify=\"flex-end\" style={{ width: '200px' }}>\r\n                        <Grid item xs={8}>\r\n                          <FormControlLabel\r\n                            disabled={modusSwitchDisabled}\r\n                            onChange={handleModus}\r\n                            value={modus}\r\n                            control={<DMSwitch checked={modus === 'auto'} color=\"secondary\" />}\r\n                            label={<Typography variant=\"button\">Manual</Typography>}\r\n                            labelPlacement=\"start\"\r\n                          />\r\n                        </Grid>\r\n                        <Grid item xs={4}>\r\n                          <StyledButton disableRipple disabled={modusSwitchDisabled} onClick={handleModus}><Typography variant=\"button\">Auto</Typography></StyledButton>\r\n                        </Grid>\r\n                      </Grid>\r\n                    </Box>\r\n                  </div>\r\n                </Grid>\r\n              </Paper>\r\n            </Drawer>\r\n          </Hidden>\r\n          <Hidden lgUp>\r\n            {overlayMenu && (\r\n              <Drawer className={classes.drawer} open={overlayMenu} onClose={() => toggleOverlayMenu(false)} variant=\"temporary\">\r\n                <Paper className={classes.drawerPaper}>\r\n                  <Grid item>\r\n                    <LightTooltip title=\"Close\">\r\n                      <IconButton onClick={() => toggleOverlayMenu(false)}>\r\n                        <CloseIcon />\r\n                      </IconButton>\r\n                    </LightTooltip>\r\n                  </Grid>\r\n                  <Grid container direction=\"column\">\r\n                    <SideMenu showToolbar={false} />\r\n                  </Grid>\r\n                </Paper>\r\n              </Drawer>\r\n            )}\r\n          </Hidden>\r\n          <main className={classes.content}>\r\n            <Toolbar />\r\n            <Switch>\r\n              <Route exact path={'/:bot'}>\r\n                {(configuration.configstate !== 'initial' && configuration.configstate !== 'recovery' && configuration.configstate !== 'loading-canceled') ? (\r\n                  <Redirect to={getPath('portfolio')} />\r\n                ) : (\r\n                  <Redirect to={getPath('configuration')} />\r\n                )}\r\n              </Route>\r\n              {routesUp.map((prop, key) => {\r\n                return (\r\n                  <Route exact path={'/:bot/' + prop.path} component={prop.component} key={key} />\r\n                );\r\n              })}\r\n              {routesDown.map((prop, key) => {\r\n                return (\r\n                  <Route exact path={'/:bot/' + prop.path} component={prop.component} key={key} />\r\n                );\r\n              })}\r\n            </Switch>\r\n            <Hidden lgUp>\r\n              <div className={classes.smallScreenToggles}>\r\n                <Paper className={classes.settingsPaper}>\r\n                  <Box pl={1}>\r\n                    <Grid container direction=\"column\">\r\n                      <Grid container item xs={12} alignItems=\"center\" justify=\"flex-end\" style={{ maxWidth: '220px' }}>\r\n                        <Grid item xs={7}>\r\n                          <FormControlLabel\r\n                            onChange={handleDarkmode}\r\n                            value={mode}\r\n                            control={<DMSwitch checked={mode === 'dark'} color=\"secondary\" />}\r\n                            label={<Typography variant=\"button\">Light&nbsp;&nbsp;&nbsp;&nbsp;</Typography>}\r\n                            labelPlacement=\"start\"\r\n                          />\r\n                        </Grid>\r\n                        <Grid item xs={3}>\r\n                          <StyledButton disableRipple onClick={handleDarkmode}><Typography variant=\"button\">Dark</Typography></StyledButton>\r\n                        </Grid>\r\n                        <Grid item xs={2}></Grid>\r\n                      </Grid>\r\n                      <Grid container item xs={12} alignItems=\"center\" justify=\"flex-end\" style={{ maxWidth: '220px' }}>\r\n                        <Grid item xs={7}>\r\n                          <FormControlLabel\r\n                            onChange={handleFiat}\r\n                            value={fiat}\r\n                            control={<DMSwitch checked={fiat === 'EUR'} color=\"secondary\" />}\r\n                            label={<Typography variant=\"button\">USD&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</Typography>}\r\n                            labelPlacement=\"start\"\r\n                          />\r\n                        </Grid>\r\n                        <Grid item xs={3}>\r\n                          <StyledButton disableRipple onClick={handleFiat}><Typography variant=\"button\">EUR</Typography></StyledButton>\r\n                        </Grid>\r\n                        <Grid item xs={2}></Grid>\r\n                      </Grid>\r\n                      <Grid container item xs={12} alignItems=\"center\" justify=\"flex-end\" style={{ maxWidth: '220px' }}>\r\n                        <Grid item xs={7}>\r\n                          <FormControlLabel\r\n                            disabled={modusSwitchDisabled}\r\n                            onChange={handleModus}\r\n                            value={modus}\r\n                            control={<DMSwitch checked={modus === 'auto'} color=\"secondary\" />}\r\n                            label={<Typography variant=\"button\">Manual</Typography>}\r\n                            labelPlacement=\"start\"\r\n                          />\r\n                        </Grid>\r\n                        <Grid item xs={3}>\r\n                          <StyledButton disableRipple disabled={modusSwitchDisabled} onClick={handleModus}><Typography variant=\"button\">Auto</Typography></StyledButton>\r\n                        </Grid>\r\n                        <Grid item xs={2}></Grid>\r\n                      </Grid>\r\n                    </Grid>\r\n                  </Box>\r\n                </Paper>\r\n              </div>\r\n            </Hidden>\r\n          </main>\r\n        </div>\r\n        {/* </BrowserRouter> */}\r\n        <div style={{ height: 70 }}>\r\n          &nbsp;\r\n        </div>\r\n        <Dialog open={openUpdate} onClose={handleUpdateClose}>\r\n          {validInstallation ? (\r\n            <>\r\n              <DialogTitle>Confirm Update</DialogTitle>\r\n              <DialogContent>\r\n                <DialogContentText>\r\n                  <Typography color=\"textPrimary\">\r\n                    Do you want to update to the latest version? Balance Bot will be unavailable until the update has completed. This may take a few minutes. Just wait for the Bot Manager to reappear.\r\n                  </Typography>\r\n                </DialogContentText>\r\n              </DialogContent>\r\n              <DialogActions>\r\n                <Button variant=\"contained\" onClick={handleUpdateClose} color={(mode === 'light') ? \"primary\" : \"secondary\"}>\r\n                  Cancel\r\n                </Button>\r\n                <Button variant=\"contained\" onClick={confirmBbUpdate} color={(mode === 'light') ? \"primary\" : \"secondary\"}>\r\n                  Update\r\n                </Button>\r\n              </DialogActions>\r\n            </>\r\n          ) : (\r\n            <>\r\n              <DialogTitle>Manual Update Required</DialogTitle>\r\n              <DialogContent>\r\n                <DialogContentText>\r\n                  <Typography color=\"textPrimary\">\r\n                    Your installation does not support updating from the browser. Please perform a manual update.\r\n                  </Typography>\r\n                </DialogContentText>\r\n                <DialogContentText>\r\n                  <Typography color=\"textPrimary\">\r\n                    Possible causes:\r\n                    <ol>\r\n                      <li>You haven't installed BB using the official installer</li>\r\n                      <li>You're running BB in a Docker container</li>\r\n                    </ol>\r\n                  </Typography>\r\n                </DialogContentText>\r\n              </DialogContent>\r\n              <DialogActions>\r\n                <Button variant=\"contained\" onClick={handleUpdateClose} color={(mode === 'light') ? \"primary\" : \"secondary\"}>\r\n                  OK\r\n                </Button>\r\n              </DialogActions>\r\n            </>\r\n          )}\r\n        </Dialog>\r\n      </React.Fragment >\r\n    ) : (\r\n      <Dialog\r\n        open={true}\r\n        fullWidth={true}\r\n        maxWidth={'sm'}\r\n      >\r\n        <DialogContent>\r\n          <DialogContentText>\r\n            <Typography variant=\"overline\" color=\"secondary\">\r\n              New version has been installed\r\n            </Typography>\r\n            <DialogContentText>\r\n            </DialogContentText>\r\n            <Typography variant=\"overline\" color=\"textPrimary\">\r\n              Please refresh the browser window to load the latest version\r\n            </Typography>\r\n          </DialogContentText>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button variant=\"contained\" onClick={handleRefresh} color=\"secondary\">\r\n            Refresh\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    )\r\n    }\r\n    <Dialog open={openResetConfirm} onClose={() => { setOpenResetConfirm(false) }}>\r\n      <DialogTitle>Confirm Bot History Deletion</DialogTitle>\r\n      <DialogContent>\r\n        <DialogContentText>\r\n          <Typography color=\"textPrimary\">\r\n            Are you sure you want to delete your bot's history? This will delete all performance data, coin analysis data, the event history, and liquidity settings. Other bot configuration settings will be kept.\r\n          </Typography>\r\n        </DialogContentText>\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Button variant=\"contained\" onClick={() => { setOpenResetConfirm(false) }} color={(mode === 'light') ? \"primary\" : \"secondary\"}>\r\n          Cancel\r\n        </Button>\r\n        <Button variant=\"contained\" onClick={confirmResetHistory} color={(mode === 'light') ? \"primary\" : \"secondary\"}>\r\n          Delete History\r\n        </Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n    <div className={classes.bottomPush}>\r\n      <footer className={classes.footer}>\r\n        <Grid container alignItems=\"center\">\r\n          <Grid item xs={false} sm={12} md={12}>\r\n            <Copyright />\r\n          </Grid>\r\n        </Grid>\r\n      </footer>\r\n    </div>\r\n  </ThemeProvider >\r\n  )\r\n}\r\n\r\nconst FlexToolbar = (props) => {\r\n  const { wdt, update, logout, onLogout, handleResetHistory, handleUpdateOpen, checkForUpdate, checkIconColor } = props;\r\n\r\n  return (\r\n    <Grid item xs container direction=\"row\" alignItems=\"center\" justify=\"flex-end\" style={{ maxWidth: wdt }}>\r\n      {(update) ? (\r\n        <Hidden xsDown>\r\n          <Grid item style={{ width: '130px' }}>\r\n            <Chip onClick={handleUpdateOpen} label='Update Available' style={{ backgroundColor: '#959FD6', color: 'white' }} />\r\n          </Grid>\r\n        </Hidden>\r\n      ) : (\r\n        <Hidden xsDown>\r\n          <Grid item style={{ width: '40px' }}>\r\n            <LightTooltip title=\"Check for updates\">\r\n              <IconButton onClick={checkForUpdate}>\r\n                <AutorenewIcon style={{ color: checkIconColor }} />\r\n              </IconButton>\r\n            </LightTooltip>\r\n          </Grid>\r\n        </Hidden>\r\n      )}\r\n      <Grid item>\r\n        <LightTooltip title=\"Delete History\">\r\n          <IconButton onClick={handleResetHistory}>\r\n            <SettingsBackupRestoreIcon style={{ color: '#ffffff' }} />\r\n          </IconButton>\r\n        </LightTooltip>\r\n      </Grid>\r\n      {(logout) && (\r\n        <Grid item style={{ width: '48px' }}>\r\n          <LightTooltip title=\"Logout\">\r\n            <IconButton onClick={onLogout}>\r\n              <ExitToAppIcon style={{ color: '#ffffff' }} />\r\n            </IconButton>\r\n          </LightTooltip>\r\n        </Grid>\r\n      )}\r\n    </Grid>\r\n  );\r\n}","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Link from '@material-ui/core/Link';\r\nimport FavoriteTwoToneIcon from '@material-ui/icons/FavoriteTwoTone';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    flexGrow: 1,\r\n  },\r\n  paper: {\r\n    padding: theme.spacing(2),\r\n  },\r\n}));\r\n\r\nconst Support = (props) => {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Grid container item spacing={3} direction=\"column\" justify=\"flex-start\" alignItems=\"flex-start\">\r\n        <Grid item xs={12}>\r\n          <Typography variant=\"h3\" noWrap>\r\n            Support Us\r\n          </Typography>\r\n        </Grid>\r\n        <Grid item xs={12}>\r\n          <Paper style={{ minWidth: '750px', maxWidth: '1000px' }} className={classes.paper}>\r\n            <p>\r\n              We hope that you're enjoying Balance Bot. The Balance Bot team develops the application in their spare time, and they're not getting paid for the work they do. Their wish is to <b>keep Balance Bot for free forever</b>. And you can help.\r\n            </p>\r\n            <p>\r\n              If you're an enthusiastic Balance Bot user, please considering contributing through the options listed <Link href=\"https://hodlerhacks.com/balance-bot/support-us/\" target=\"_blank\" rel=\"noopener\" color=\"secondary\">here</Link>. Thank you so much! <FavoriteTwoToneIcon fontSize=\"small\" color=\"secondary\" />\r\n            </p>\r\n            <p>\r\n              Donations are anonymous, but feel free to let us know about your generosity and <Link href=\"https://t.me/hodlerhacks\" target=\"_blank\" rel=\"noopener\" color=\"secondary\">send us a message</Link>.\r\n            </p>\r\n          </Paper>\r\n        </Grid>\r\n      </Grid>\r\n    </div>\r\n  );\r\n}\r\nexport default Support;\r\n","import PieChartIcon from '@material-ui/icons/PieChart';\r\nimport ShowChartIcon from '@material-ui/icons/ShowChart';\r\nimport BarChartIcon from '@material-ui/icons/BarChart';\r\nimport HistoryIcon from '@material-ui/icons/History';\r\nimport SettingsIcon from '@material-ui/icons/Settings';\r\nimport FavoriteIcon from '@material-ui/icons/Favorite';\r\nimport Portfolio from '../pages/Portfolio';\r\nimport PPerformance from '../pages/PPerformance';\r\nimport CoinAnalysis from '../pages/CoinAnalysis';\r\nimport EventHistory from '../pages/EventHistory';\r\nimport Configuration from '../pages/Configuration';\r\nimport Support from '../pages/Support';\r\n\r\nconst routesUp = [\r\n  {\r\n    path: 'portfolio',\r\n    sidebarName: 'Portfolio',\r\n    icon: PieChartIcon,\r\n    component: Portfolio,\r\n  },\r\n  {\r\n    path: 'performance',\r\n    sidebarName: 'Performance',\r\n    icon: BarChartIcon,\r\n    component: PPerformance,\r\n  },\r\n  {\r\n    path: 'coins',\r\n    sidebarName: 'Coin Analysis',\r\n    icon: ShowChartIcon,\r\n    component: CoinAnalysis,\r\n  },\r\n  {\r\n    path: 'history',\r\n    sidebarName: 'Event History',\r\n    icon: HistoryIcon,\r\n    component: EventHistory,\r\n  },\r\n];\r\n\r\nconst routesDown = [\r\n  {\r\n    path: 'configuration',\r\n    sidebarName: 'Configuration',\r\n    icon: SettingsIcon,\r\n    component: Configuration,\r\n  },\r\n  {\r\n    path: 'support',\r\n    sidebarName: 'Support Us',\r\n    icon: FavoriteIcon,\r\n    component: Support,\r\n  }\r\n];\r\n\r\nexport { routesUp, routesDown };","import React, { useContext, useState, useEffect } from 'react';\r\nimport { makeStyles, createMuiTheme, ThemeProvider } from '@material-ui/core/styles';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Link2 from '@material-ui/core/Link';\r\nimport Box from '@material-ui/core/Box';\r\nimport Button from '@material-ui/core/Button';\r\nimport { useLocalStore } from \"../services/LocalStoreService\";\r\nimport { ServerContext } from '../context/ServerContext';\r\nimport { useSnackbar } from 'notistack';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport pckg2 from '../version2.json';\r\nimport { socket } from '../context/SocketContext';\r\nimport { Crypt } from 'hybrid-crypto-js';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        display: 'flex',\r\n    },\r\n    appBar: {\r\n        zIndex: theme.zIndex.drawer + 1,\r\n    },\r\n    logo: {\r\n        maxWidth: 60,\r\n        padding: 10,\r\n    },\r\n    content: {\r\n        justify: \"flex-start\",\r\n        alignItems: \"flex-start\",\r\n        flexGrow: 1,\r\n        padding: theme.spacing(2),\r\n    },\r\n    footer: {\r\n        marginTop: 'auto',\r\n        backgroundColor: '#000000',\r\n    },\r\n    bottomPush: {\r\n        position: \"fixed\",\r\n        width: '100%',\r\n        bottom: 0,\r\n        paddingBottom: 0,\r\n        zIndex: theme.zIndex.drawer + 1,\r\n    },\r\n}));\r\n\r\nfunction Copyright() {\r\n    return (\r\n        <Box color=\"#FFF\" height={54} p={2}>\r\n            <Typography variant=\"body2\" align=\"center\">\r\n                {'Copyright  '}\r\n                <Link2 style={{ color: '#ffffff', textDecoration: 'none' }} href=\"https://hodlerhacks.com/\" target=\"_blank\" rel=\"noopener\">\r\n                    hodlerhacks.com\r\n                </Link2>{' '}\r\n                {new Date().getFullYear()}\r\n            </Typography>\r\n        </Box>\r\n    );\r\n}\r\n\r\nexport default function Public() {\r\n    const version = pckg2.version;\r\n\r\n    const mode = useLocalStore('mode', 'light')[0];\r\n    const { status, access, publicKey } = useContext(ServerContext)[0];\r\n    const [loginNow, setLoginNow] = useState(false);\r\n    const [accessMsg, setAccessMsg] = useState('initial state');\r\n    const [serverDown, setServerDown] = useState(false);\r\n    const [username, setUsername] = useState('');\r\n    const [password, setPassword] = useState('');\r\n\r\n    let crypt = new Crypt({\r\n        md: 'sha256',\r\n        rsaStandard: 'RSA-OAEP',\r\n    });\r\n\r\n    useEffect(() => {\r\n        document.title = `BB | Bot Dashboard`;\r\n\r\n        return () => {\r\n        }\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (status === 'disconnected') {\r\n            // If status remains in disconnected state for too long, the server is down\r\n            setTimeout(() => {\r\n                if (status === 'disconnected') setServerDown(true);\r\n            }, 2000);\r\n        } else {\r\n            setServerDown(false);\r\n        }\r\n\r\n        return () => {\r\n        }\r\n    }, [status]);\r\n\r\n    useEffect(() => {\r\n        if (access) {\r\n            setLoginNow(false);\r\n            setServerDown(false);\r\n            if (access.allow === true) {\r\n                setAccessMsg('');\r\n            } else if (access.allow === false && access.reason === 'login required') {\r\n                setAccessMsg(\"Please log in\");\r\n                setLoginNow(true);\r\n            } else if (access.allow === false && access.reason === '2FA required') {\r\n                setAccessMsg(\"Add your client's IP address to the IP whitelist, or temporarily allow access through your Telegram bot\");\r\n            } else if (access.allow === false && access.reason === 'temporary access not allowed') {\r\n                setAccessMsg(\"Add your client's IP address to the IP whitelist\");\r\n            } else if (access.allow === false && access.reason === 'access timeout') {\r\n                handleRefresh();\r\n            } else if (access.allow === false && access.reason === 'temporary access timeout') {\r\n                setAccessMsg(\"Your temporary access has expired\");\r\n            } else if (access.allow === false && access.reason === '2FA login required') {\r\n                setAccessMsg(\"2FA required - approve login through your Telegram bot\");\r\n            } else if (access.allow === false && access.reason === 'invalid credentials') {\r\n                setAccessMsg(\"Incorrect username or password - please try again\");\r\n                setLoginNow(true);\r\n            } else if (access.allow === false && access.reason === '2FA login rejected') {\r\n                setAccessMsg(\"2FA login was rejected\");\r\n            } else if (access.allow === false && access.reason === 'temporary access rejected') {\r\n                setAccessMsg(\"Temporary access was rejected\");\r\n            } else if (access.allow === false && access.reason === 'logged out') {\r\n                handleRefresh();\r\n            } else if (access.allow === false && access.reason === 'initial state') {\r\n                setAccessMsg(\"initial state\");\r\n                // If access.reason remains in intial state for too long, the server is down\r\n                setTimeout(() => {\r\n                    if (access.reason === 'initial state') setServerDown(true);\r\n                }, 4000);\r\n            } else if (access.allow === false && access.reason === 'reload') {\r\n                handleRefresh();\r\n            }\r\n        }\r\n\r\n        return () => {\r\n        }\r\n    }, [access]);\r\n\r\n    const theme = createMuiTheme({\r\n        palette: {\r\n            type: mode\r\n        }\r\n    });\r\n\r\n    const classes = useStyles();\r\n\r\n    const onLoginInput = (e) => {\r\n        if (e.target.id === 'username') setUsername(e.target.value);\r\n        if (e.target.id === 'password') setPassword(e.target.value);\r\n    }\r\n\r\n    const onSignIn = () => {\r\n        const timestamp = new Date().getTime();\r\n\r\n        if (socket) socket.emit(\"login\", {\r\n            username: username,\r\n            password: crypt.encrypt(publicKey, `${password}@${timestamp}`),\r\n        });\r\n    }\r\n\r\n    const handleRefresh = () => {\r\n        window.location.reload();\r\n    }\r\n\r\n    const { enqueueSnackbar, closeSnackbar } = useSnackbar();\r\n\r\n    const action = key => (\r\n        <React.Fragment>\r\n            <Button\r\n                style={{\r\n                    color: '#bbbbbb',\r\n                }}\r\n                onClick={() => { closeSnackbar(key) }}>\r\n                Dismiss\r\n            </Button>\r\n        </React.Fragment>\r\n    );\r\n\r\n    const handleForgotPassword = () => {\r\n        if (socket) socket.emit(\"reset-password\");\r\n        enqueueSnackbar('See your Telegram bot to reset password', {\r\n            variant: 'success',\r\n            autoHideDuration: 8000,\r\n            action,\r\n        });\r\n    }\r\n\r\n    return (<ThemeProvider theme={theme}>\r\n        <React.Fragment>\r\n            <div className={classes.root}>\r\n                <CssBaseline />\r\n                <AppBar position=\"fixed\" className={classes.appBar}>\r\n                    <Toolbar>\r\n                        <img src=\"/logo192.png\" alt=\"Balance Bot Logo\" className={classes.logo} />\r\n                        <Grid container direction=\"row\" alignItems=\"center\" nowrap=\"true\">\r\n                            <Grid item xs zeroMinWidth>\r\n                                <Box mt={1.5}>\r\n                                    <Typography variant=\"h6\" color=\"inherit\" noWrap>\r\n                                        Balance Bot\r\n                                    </Typography>\r\n                                </Box>\r\n                                <Box mt={-1} style={{ color: '#959FD6' }}>\r\n                                    <Typography variant=\"caption\" color=\"inherit\" noWrap>\r\n                                        v{version}\r\n                                    </Typography>\r\n                                </Box>\r\n                            </Grid>\r\n                        </Grid>\r\n                    </Toolbar>\r\n                </AppBar>\r\n                <main className={classes.content}>\r\n                    <Toolbar />\r\n                </main>\r\n            </div>\r\n            {/* </BrowserRouter> */}\r\n        </React.Fragment>\r\n        {status === 'disconnected' && accessMsg !== 'initial state' ? (\r\n            <Dialog\r\n                open={serverDown}\r\n                fullWidth={true}\r\n                maxWidth={'sm'}\r\n            >\r\n                <DialogContent>\r\n                    <DialogContentText>\r\n                        <Typography variant=\"overline\" color=\"secondary\">\r\n                            The connection with the server has been lost\r\n                        </Typography>\r\n                    </DialogContentText>\r\n                    <DialogContentText>\r\n                        <Typography variant=\"overline\" color=\"textPrimary\">\r\n                            Your bot may have stopped running\r\n                        </Typography>\r\n                    </DialogContentText>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button variant=\"contained\" onClick={handleRefresh} color=\"secondary\">\r\n                        Retry\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        ) : !loginNow ? (accessMsg === 'initial state') ? (\r\n            <Dialog\r\n                open={serverDown}\r\n                fullWidth={true}\r\n                maxWidth={'sm'}\r\n            >\r\n                <DialogContent>\r\n                    <DialogContentText>\r\n                        <Typography variant=\"overline\" color=\"secondary\">\r\n                            Balance Bot seems to be down\r\n                        </Typography>\r\n                    </DialogContentText>\r\n                    <DialogContentText>\r\n                        <Typography variant=\"overline\" color=\"textPrimary\">\r\n                            Please check your server and try again\r\n                        </Typography>\r\n                    </DialogContentText>\r\n                </DialogContent >\r\n                <DialogActions>\r\n                    <Button variant=\"contained\" onClick={handleRefresh} color=\"secondary\">\r\n                        Retry\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog >\r\n        ) : !access.allow && (\r\n            <Dialog\r\n                open={true}\r\n                fullWidth={true}\r\n                maxWidth={'sm'}\r\n            >\r\n                <DialogContent>\r\n                    <DialogContentText>\r\n                        <Typography variant=\"overline\" color=\"secondary\">\r\n                            Notification\r\n                        </Typography>\r\n                    </DialogContentText >\r\n                    <DialogContentText>\r\n                        <Typography variant=\"overline\" color=\"textPrimary\">\r\n                            {accessMsg}\r\n                        </Typography>\r\n                    </DialogContentText>\r\n                </DialogContent >\r\n                <DialogActions>\r\n                    <Button variant=\"contained\" onClick={handleRefresh} color=\"secondary\">\r\n                        Back\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog >\r\n        ) : (\r\n            <React.Fragment>\r\n                <CssBaseline />\r\n                <Dialog\r\n                    open={true}\r\n                    fullWidth={true}\r\n                    maxWidth={'sm'}\r\n                >\r\n                    <DialogTitle>{accessMsg}</DialogTitle>\r\n                    <DialogContent>\r\n                        <TextField\r\n                            variant=\"outlined\"\r\n                            margin=\"normal\"\r\n                            required\r\n                            fullWidth\r\n                            id=\"username\"\r\n                            label=\"Username\"\r\n                            name=\"username\"\r\n                            onChange={onLoginInput}\r\n                        />\r\n                        <TextField\r\n                            variant=\"outlined\"\r\n                            margin=\"normal\"\r\n                            required\r\n                            fullWidth\r\n                            name=\"password\"\r\n                            label=\"Password\"\r\n                            type=\"password\"\r\n                            id=\"password\"\r\n                            onChange={onLoginInput}\r\n                        />\r\n                        <Box m={3} />\r\n                        <Button\r\n                            fullWidth\r\n                            variant=\"contained\"\r\n                            color=\"secondary\"\r\n                            onClick={onSignIn}\r\n                        >\r\n                            Log In\r\n                        </Button>\r\n                        <Box m={3} />\r\n                        <Button fullWidth onClick={handleForgotPassword} color=\"default\" style={{ fontSize: '10px' }}>\r\n                            Forgot password\r\n                        </Button>\r\n                    </DialogContent>\r\n                </Dialog>\r\n            </React.Fragment>\r\n        )\r\n        }\r\n        <div className={classes.bottomPush}>\r\n            <footer className={classes.footer}>\r\n                <Grid container alignItems=\"center\">\r\n                    <Grid item xs={false} sm={12} md={12}>\r\n                        <Copyright />\r\n                    </Grid>\r\n                </Grid>\r\n            </footer>\r\n        </div>\r\n    </ThemeProvider >\r\n    )\r\n}\r\n","import React, { useContext, useState, useEffect } from 'react';\r\nimport Main from './Main';\r\nimport Public from './Public';\r\nimport { ServerContext } from '../context/ServerContext';\r\n\r\nfunction Switch() {\r\n    const { status, access } = useContext(ServerContext)[0];\r\n    const [goPublic, setGoPublic] = useState(true);\r\n\r\n    useEffect(() => {\r\n        setGoPublic(!access.allow || status === 'disconnected');\r\n\r\n        return () => {\r\n        }\r\n    }, [access, status]);\r\n\r\n    return (\r\n        <div>\r\n            {goPublic ? (\r\n                <Public />\r\n            ) : (\r\n                <Main />\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Switch;","import React, { useEffect, useContext, useState } from \"react\";\r\nimport { useSnackbar } from 'notistack';\r\nimport { socket } from '../context/SocketContext';\r\nimport { ServerContext } from '../context/ServerContext';\r\nimport { MessageContext } from '../context/MessageContext';\r\nimport { BalancesContext } from '../context/BalancesContext';\r\nimport { PerformanceContext } from '../context/PerformanceContext';\r\nimport { ConfigurationContext } from '../context/ConfigurationContext';\r\nimport { ConfigurationInputContext } from '../context/ConfigurationInputContext';\r\nimport { StartingBalanceContext } from '../context/StartingBalanceContext';\r\nimport { ExchangesContext } from '../context/ExchangesContext';\r\nimport { BotsContext } from '../context/BotsContext';\r\nimport Button from '@material-ui/core/Button';\r\nimport pckg2 from '../version2.json';\r\nimport publicIp from 'react-public-ip';\r\n\r\nexport default function SocketService() {\r\n    const version = pckg2.version;\r\n\r\n    const [{ status, serverversion }, setServer] = useContext(ServerContext);\r\n    const setMessages = useContext(MessageContext)[1];\r\n    const [balances, setBalances] = useContext(BalancesContext);\r\n    const [performance, setPerformance] = useContext(PerformanceContext);\r\n    const setConfiguration = useContext(ConfigurationContext)[1];\r\n    const setConfigurationInput = useContext(ConfigurationInputContext)[1];\r\n    const setStartingBalance = useContext(StartingBalanceContext)[1];\r\n    const setExchanges = useContext(ExchangesContext)[1];\r\n    const setBots = useContext(BotsContext)[1];\r\n    const [serverip, setServerip] = useState('0.0.0.0');\r\n\r\n    const { enqueueSnackbar, closeSnackbar } = useSnackbar();\r\n\r\n    determineServerIP();\r\n\r\n    async function determineServerIP() {\r\n        if (serverip === '0.0.0.0') {\r\n            let url = window.location.origin;\r\n            if (url.includes('localhost')) {\r\n                const ipv4 = await publicIp.v4() || \"\";\r\n                setServerip(ipv4);\r\n            } else {\r\n                // Remove http(s)\r\n                const regex = /http(s)*:\\/\\//i;\r\n                url = url.replace(regex, '');\r\n\r\n                // Remove :3000 and beyond\r\n                const index = url.search(':3000');\r\n                url = url.slice(0, index);\r\n\r\n                setServerip(url);\r\n            }\r\n        }\r\n    }\r\n\r\n    const action = key => (\r\n        <React.Fragment>\r\n            <Button\r\n                style={{\r\n                    color: '#bbbbbb',\r\n                }}\r\n                onClick={() => { closeSnackbar(key) }}>\r\n                Dismiss\r\n            </Button>\r\n        </React.Fragment>\r\n    );\r\n\r\n    const handleEvent = (log, summary) => {\r\n        const variant = (log.type === 'order') ? 'info' : log.type;\r\n        enqueueSnackbar(summary, {\r\n            variant: variant,\r\n            autoHideDuration: 8000,\r\n            action,\r\n        });\r\n    };\r\n\r\n    const updatePerformance = () => {\r\n        const rows = (balances.portfolio) ? JSON.parse(balances.portfolio) : [];\r\n        let update = [];\r\n\r\n        if (performance.length !== 0) {\r\n            const today = performance[performance.length - 1].coins;\r\n\r\n            rows.forEach((coin) => {\r\n                const match = today.find(c => c.coin === coin.coin);\r\n                if (match) update.push({\r\n                    ...match,\r\n                    number: coin.number,\r\n                    price: coin.last,\r\n                });\r\n            });\r\n\r\n            let newPerformance = [...performance];\r\n            newPerformance[newPerformance.length - 1].coins = update;\r\n            newPerformance[newPerformance.length - 1].eur = balances.eur;\r\n            newPerformance[newPerformance.length - 1].usd = balances.usd;\r\n            setPerformance(newPerformance);\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        // Reload page on server startup if new BB version has been installed, to make sure server and client are in sync\r\n        if (status === 'starting' && serverversion !== '0.0' && version !== serverversion) window.location.reload();\r\n        else if (status === 'starting')\r\n            setServer(prevState => {\r\n                return {\r\n                    ...prevState,\r\n                    status: 'connected'\r\n                }\r\n            });\r\n\r\n        return () => {\r\n        }\r\n    }, [status, serverversion]);\r\n\r\n    useEffect(() => {\r\n        // Store serverip for use in ConfigP1\r\n        setServer(prevState => {\r\n            return {\r\n                ...prevState,\r\n                serverip: serverip,\r\n            }\r\n        });\r\n\r\n        return () => {\r\n        }\r\n    }, [serverip]);\r\n\r\n    useEffect(() => {\r\n        updatePerformance();\r\n\r\n        return () => {\r\n        }\r\n    }, [balances]);\r\n\r\n    useEffect(() => {\r\n        socket.on(\"bots\", (bots) => {\r\n            let adjusted = [{\r\n                botID: 'Bot Mng',\r\n                botname: 'Bot Manager',\r\n                handle: '',\r\n            }];\r\n\r\n            bots.forEach(bot => {\r\n                if (bot.status === 'enabled' || bot.status === 'new') {\r\n                    adjusted.push({\r\n                        botID: `Bot ${bot.botID}`,\r\n                        botname: bot.botname,\r\n                        handle: `bot${bot.botID}`\r\n                    })\r\n                }\r\n            });\r\n\r\n            setBots(adjusted);\r\n        });\r\n\r\n        return () => {\r\n            socket.off(\"bots\");\r\n        }\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        socket.on(\"status\", (server) => {\r\n            setServer(prevState => {\r\n                return {\r\n                    ...prevState,\r\n                    ...server\r\n                }\r\n            });\r\n        });\r\n        socket.on(\"balances\", (data) => {\r\n            setBalances(data.balances);\r\n            setServer(prevState => {\r\n                return {\r\n                    ...prevState,\r\n                    status: 'connected',\r\n                    updated: data.balances.time,\r\n                }\r\n            });\r\n        });\r\n        socket.on(\"performance\", (logs) => {\r\n            setPerformance(logs);\r\n        });\r\n        socket.on(\"configuration\", (config) => {\r\n            setConfiguration(config);\r\n            setConfigurationInput({ ...config, recreate: false });\r\n        });\r\n        socket.on(\"message\", (msg) => {\r\n            setMessages(msg);\r\n        });\r\n        socket.on(\"starting-balances\", (sb) => {\r\n            setStartingBalance(sb);\r\n        });\r\n        socket.on(\"exchanges\", (ex) => {\r\n            setExchanges(ex);\r\n        });\r\n        socket.on(\"event\", function (data) {\r\n            handleEvent(data.log, data.summary);\r\n        });\r\n        socket.on(\"disconnect\", data => {\r\n            setBalances({});\r\n            setServer(prevState => {\r\n                return {\r\n                    ...prevState,\r\n                    status: 'disconnected',\r\n                }\r\n            });\r\n        });\r\n\r\n        return () => {\r\n            socket.disconnect();\r\n        }\r\n    }, []);\r\n\r\n    return (null);\r\n}","import './App.css';\nimport React, { useEffect } from 'react';\nimport Switch from './pages/Switch';\nimport { ServerProvider } from './context/ServerContext';\nimport { MessageProvider } from './context/MessageContext';\nimport { BalancesProvider } from './context/BalancesContext';\nimport { PerformanceProvider } from './context/PerformanceContext';\nimport { ConfigurationProvider } from './context/ConfigurationContext';\nimport { ConfigurationInputProvider } from './context/ConfigurationInputContext';\nimport { StartingBalanceProvider } from './context/StartingBalanceContext';\nimport { FiatProvider } from './context/FiatContext';\nimport { CoinProvider } from './context/CoinContext';\nimport { BotsProvider } from './context/BotsContext';\nimport { ExchangesProvider } from './context/ExchangesContext';\nimport { SnackbarProvider } from 'notistack';\nimport Fade from '@material-ui/core/Fade';\nimport SocketService from './services/SocketService';\nimport { CssBaseline } from \"@material-ui/core\";\nimport { BrowserRouter } from 'react-router-dom';\n\nfunction App() {\n  useEffect(() => {\n    // GA\n    const script1 = document.createElement(\"script\");\n    script1.async = true;\n    script1.src = \"https://www.googletagmanager.com/gtag/js?id=G-XBDNDRB9LJ\";\n    document.body.appendChild(script1);\n\n    const script2 = document.createElement(\"script\");\n    script2.text =\n      `window.dataLayer = window.dataLayer || [];\n    function gtag() { dataLayer.push(arguments); }\n    gtag('js', new Date());\n    gtag('config', 'G-XBDNDRB9LJ');`;\n    document.body.appendChild(script2);\n  }, [])\n\n  return (\n    <BrowserRouter>\n      <SnackbarProvider maxSnack={5} anchorOrigin={{\n        vertical: 'bottom',\n        horizontal: 'left',\n      }}\n        TransitionComponent={Fade}\n      >\n        <ServerProvider>\n          <MessageProvider>\n            <BalancesProvider>\n              <PerformanceProvider>\n                <ConfigurationProvider>\n                  <ConfigurationInputProvider>\n                    <StartingBalanceProvider>\n                      <FiatProvider>\n                        <CoinProvider>\n                          <BotsProvider>\n                            <ExchangesProvider>\n                              <SocketService />\n                              <CssBaseline />\n                              <Switch />\n                            </ExchangesProvider>\n                          </BotsProvider>\n                        </CoinProvider>\n                      </FiatProvider>\n                    </StartingBalanceProvider>\n                  </ConfigurationInputProvider>\n                </ConfigurationProvider>\n              </PerformanceProvider>\n            </BalancesProvider>\n          </MessageProvider>\n        </ServerProvider>\n      </SnackbarProvider>\n    </BrowserRouter>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}