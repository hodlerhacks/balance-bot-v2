const _0x133b29=_0x5093;(function(_0x280425,_0x3ab596){const _0x413bfc=_0x5093,_0x5bd4f8=_0x280425();while(!![]){try{const _0xe297bf=parseInt(_0x413bfc(0x1f1))/0x1+-parseInt(_0x413bfc(0x23b))/0x2+parseInt(_0x413bfc(0x234))/0x3*(parseInt(_0x413bfc(0x357))/0x4)+parseInt(_0x413bfc(0x1a8))/0x5+parseInt(_0x413bfc(0x340))/0x6+parseInt(_0x413bfc(0x30d))/0x7+parseInt(_0x413bfc(0x311))/0x8*(-parseInt(_0x413bfc(0x200))/0x9);if(_0xe297bf===_0x3ab596)break;else _0x5bd4f8['push'](_0x5bd4f8['shift']());}catch(_0x3f111a){_0x5bd4f8['push'](_0x5bd4f8['shift']());}}}(_0x50ca,0x4e379));const _0x27ec31=function(){let _0x55d548=!![];return function(_0x1cc7fe,_0x263155){const _0x3379cf=_0x55d548?function(){const _0x26147b=_0x5093;if(_0x263155){const _0xae7c3b=_0x263155[_0x26147b(0x1c2)](_0x1cc7fe,arguments);return _0x263155=null,_0xae7c3b;}}:function(){};return _0x55d548=![],_0x3379cf;};}(),_0xc42b06=_0x27ec31(this,function(){const _0x3270ff=_0x5093;return _0xc42b06[_0x3270ff(0x309)]()[_0x3270ff(0x1a0)]('(((.+)+)+)+$')[_0x3270ff(0x309)]()[_0x3270ff(0x1a4)](_0xc42b06)[_0x3270ff(0x1a0)](_0x3270ff(0x313));});_0xc42b06();'use strict';process[_0x133b29(0x20a)][_0x133b29(0x2b5)]=0x1;const childProcess=require(_0x133b29(0x1bf)),fs=require('fs'),fns=require(_0x133b29(0x2d3)),low=require(_0x133b29(0x196)),FileSync=require('lowdb/adapters/FileSync'),path=require(_0x133b29(0x2ca)),crypto=require(_0x133b29(0x1e0)),forge=require('node-forge'),bcrypt=require(_0x133b29(0x1c6)),jwt=require('jsonwebtoken'),ipaddr=require('ipaddr.js'),argv=require(_0x133b29(0x19e))(process[_0x133b29(0x2ea)]['slice'](0x2))[_0x133b29(0x2ea)],uuidRandom=require(_0x133b29(0x239)),{Telegraf,Markup}=require(_0x133b29(0x371)),Mixpanel=require(_0x133b29(0x1be)),axios=require(_0x133b29(0x290)),{GraphQLClient,gql}=require(_0x133b29(0x2ee)),util=require(_0x133b29(0x243)),fileUpload=require(_0x133b29(0x364)),{networkInterfaces}=require('os'),JSZip=require(_0x133b29(0x191)),PORT=argv[_0x133b29(0x320)]||_0x133b29(0x29e),pattern=/^[0-9]{2,4}$/;!pattern[_0x133b29(0x30b)](PORT)&&(console[_0x133b29(0x255)](_0x133b29(0x31f)+PORT+_0x133b29(0x232)),process[_0x133b29(0x1d9)](0x1));const HOST=argv[_0x133b29(0x254)]||null,userID=argv[_0x133b29(0x2fe)]||'',debugging=argv['d']||![],recreate=argv['r']||![],nodeversion=process['versions'][_0x133b29(0x347)];let bbpath=_0x133b29(0x215),bbpath2='';const botfile='bot.js',configfile=_0x133b29(0x1b9),settingsfile=_0x133b29(0x170),securefile=_0x133b29(0x1d6),environment=require('./'+bbpath2+_0x133b29(0x2b3))['environment']||_0x133b29(0x1a9),maxBackups=0xa;let validInstallation=!![];const schedulerInterval=0x3c*0x3c*0x3e8;!fs[_0x133b29(0x199)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x133b29(0x1f0)),configpath=userID?bbpath+'config/'+userID+'/':bbpath+'config/',configbackuppath=configpath+'backup/',logspath=userID?bbpath+_0x133b29(0x2d7)+userID+'/':bbpath+_0x133b29(0x2d7),zippath=userID?bbpath+_0x133b29(0x271)+userID+'/':bbpath+_0x133b29(0x271),loggerfile=fs['createWriteStream'](logspath+_0x133b29(0x2de),{'flags':'a'}),temppath=userID?bbpath+'temp/'+userID+'/':bbpath+_0x133b29(0x2dc);!fs[_0x133b29(0x199)](configpath)&&fs['mkdirSync'](configpath);!fs[_0x133b29(0x199)](configbackuppath)&&fs[_0x133b29(0x2f0)](configbackuppath);!fs[_0x133b29(0x199)](logspath)&&fs[_0x133b29(0x2f0)](logspath);!fs['existsSync'](zippath)&&fs[_0x133b29(0x2f0)](zippath);!fs[_0x133b29(0x199)](temppath)&&fs['mkdirSync'](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig['defaults']({'bots':[]})[_0x133b29(0x1b7)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x133b29(0x270)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0x133b29(0x28b),'onepagemode':![],'marketcapApi':''}})[_0x133b29(0x1b7)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x133b29(0x270)]({'secure':{},'blacklist':[]})[_0x133b29(0x1b7)]();const saltRounds=0xa,mixpanel=Mixpanel[_0x133b29(0x2d9)](_0x133b29(0x350),{'host':_0x133b29(0x2c6)});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings['telegramToken']&&(settings[_0x133b29(0x264)]!=''&&settings[_0x133b29(0x264)]!=_0x133b29(0x221))&&settings[_0x133b29(0x277)]&&settings[_0x133b29(0x277)]!='')initTelegram();const parseColor=(_0x30e4d5,_0xa65040)=>{const _0x501655=_0x133b29,_0x5673b4=/#[A-Z]{3}#/g;if(typeof _0x30e4d5==_0x501655(0x373)){!_0xa65040?_0x30e4d5=_0x30e4d5[_0x501655(0x26e)](_0x5673b4,''):(_0x30e4d5=_0x30e4d5[_0x501655(0x26e)](/#BLU#/g,_0x501655(0x2d8)),_0x30e4d5=_0x30e4d5['replace'](/#RED#/g,'\x1b[31m'),_0x30e4d5=_0x30e4d5[_0x501655(0x26e)](/#YEL#/g,_0x501655(0x1c7)),_0x30e4d5=_0x30e4d5[_0x501655(0x26e)](/#MAG#/g,_0x501655(0x265)),_0x30e4d5=_0x30e4d5['replace'](/#CYA#/g,_0x501655(0x2cc)),_0x30e4d5=_0x30e4d5['replace'](/#RES#/g,_0x501655(0x292)));;}return _0x30e4d5;},logger={'screen':_0x3b291c=>{const _0xe0ae2f=_0x133b29;console[_0xe0ae2f(0x255)](parseColor(_0x3b291c,!![]));},'simple':_0x3426ff=>{const _0x3c46bf=_0x133b29;console[_0x3c46bf(0x255)](parseColor(_0x3426ff,!![])),loggerfile[_0x3c46bf(0x1b7)](util[_0x3c46bf(0x308)](parseColor(_0x3426ff,![]))+'\x0a');},'full':async _0xcebe8=>{const _0x21fe1b=_0x133b29,_0x12fab6=getTimeStamp()+_0x21fe1b(0x2e1)+_0xcebe8;console['log'](parseColor(_0x12fab6,!![])),loggerfile[_0x21fe1b(0x1b7)](util[_0x21fe1b(0x308)](parseColor(_0x12fab6,![]))+'\x0a');if(tgBot&&settings[_0x21fe1b(0x212)]&&settings['telegramEvents']!=_0x21fe1b(0x1d1))await sendTelegram(settings[_0x21fe1b(0x212)],_0x21fe1b(0x338)+parseColor(_0xcebe8,![]));},'debug':async(_0x4d4998,_0x565c2c='')=>{const _0x287c19=_0x133b29,_0x1aeb4a=getTimeStamp()+_0x287c19(0x31a)+_0x4d4998;if(debugging)console['log'](parseColor(_0x1aeb4a,!![]));loggerfile['write'](util[_0x287c19(0x308)](parseColor(_0x1aeb4a,![]))+'\x0a');if(_0x565c2c){if(debugging)console[_0x287c19(0x255)](_0x565c2c);loggerfile[_0x287c19(0x1b7)](util['format'](_0x565c2c)+'\x0a');}}};let terminating=![];process['on'](_0x133b29(0x2df),function(_0xab1151){const _0x19c51f=_0x133b29;_0xab1151['toString']()['includes'](_0x19c51f(0x1c5))?(logger[_0x19c51f(0x36d)](_0x19c51f(0x1c8)+_0xab1151[_0x19c51f(0x320)]+_0x19c51f(0x176)),process[_0x19c51f(0x2ac)]({'terminate':!![]},_0x53ba74=>{})):logger[_0x19c51f(0x36d)](_0xab1151);}),process['on'](_0x133b29(0x1d9),()=>{const _0x4a27ca=_0x133b29;stopAllBots(),process[_0x4a27ca(0x1d9)](0x0);}),process['on'](_0x133b29(0x260),()=>{const _0x20dc8d=_0x133b29;stopAllBots(),process[_0x20dc8d(0x1d9)](0x0);}),process['on'](_0x133b29(0x1f7),()=>{stopAllBots(),process['exit'](0x0);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+'version.json')[_0x133b29(0x353)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let tmpStorage={},devices=[],lastIpApproval,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0x133b29(0x2a7)),app=express(),http=require('http')[_0x133b29(0x314)](app);app[_0x133b29(0x18d)](fileUpload({'useTempFiles':!![]})),app[_0x133b29(0x33f)](_0x133b29(0x2af),async(_0x3f1e7d,_0x3cafc1)=>{const _0x408bbf=_0x133b29,_0x530bd7=_0x3f1e7d[_0x408bbf(0x1aa)]['type'],_0x1cc10b=getClientsWithBotID(_0x408bbf(0x32d)),_0x7d1b21=_0x3f1e7d[_0x408bbf(0x283)][_0x408bbf(0x164)],_0x137e9f=timelyDecrypt(_0x7d1b21,![]),_0x47eaf6=_0x1cc10b['find'](_0x116f30=>_0x116f30[_0x408bbf(0x164)]==_0x137e9f);if(_0x47eaf6){const _0x5e9446=normalizeIP(_0x3f1e7d['socket'][_0x408bbf(0x228)])[_0x408bbf(0x168)],_0xde12f6=_0x3f1e7d[_0x408bbf(0x283)]['tkn'];if(validateAccess(_0xde12f6,_0x137e9f,_0x5e9446)[_0x408bbf(0x1ef)])_0x530bd7==_0x408bbf(0x333)&&await backupConfigFiles(),await zipFiles(_0x530bd7),_0x3cafc1[_0x408bbf(0x1b8)](zippath+(_0x530bd7+_0x408bbf(0x257)),_0x107460=>{const _0x3c482e=_0x408bbf;_0x107460&&(logger[_0x3c482e(0x17c)](_0x3c482e(0x209)+_0x530bd7),logger[_0x3c482e(0x36d)](_0x107460));});else logger[_0x408bbf(0x17c)]('Unauthorized\x20attempt\x20to\x20download\x20'+_0x530bd7+_0x408bbf(0x21c));}else logger['full'](_0x408bbf(0x1d5)+_0x530bd7+'\x20(2)');}),app[_0x133b29(0x1cd)](_0x133b29(0x279),async(_0x2e9042,_0x56a615)=>{const _0x22142f=_0x133b29,_0xbee191=getClientsWithBotID(_0x22142f(0x32d)),_0x1999c7=_0x2e9042[_0x22142f(0x283)][_0x22142f(0x164)],_0x218154=timelyDecrypt(_0x1999c7,![]),_0x2ebb09=_0xbee191['find'](_0x601047=>_0x601047[_0x22142f(0x164)]==_0x218154);logger[_0x22142f(0x25c)](_0x22142f(0x2a5));if(_0x2ebb09){const _0x49f33c=normalizeIP(_0x2e9042['socket'][_0x22142f(0x228)])['store'],_0x79bc6b=_0x2e9042[_0x22142f(0x283)][_0x22142f(0x360)];if(validateAccess(_0x79bc6b,_0x218154,_0x49f33c)[_0x22142f(0x1ef)]){if(_0x2e9042[_0x22142f(0x352)]){const _0x4c1521=_0x2e9042[_0x22142f(0x352)][_0x22142f(0x178)];await _0x4c1521['mv'](temppath+_0x4c1521[_0x22142f(0x22f)]),_0x56a615[_0x22142f(0x2ac)]({'status':!![],'message':_0x22142f(0x1b4)});const _0x51a6a2=getBotsWithMode();_0x51a6a2['length']>0x0?confirmRestore(temppath,_0x4c1521[_0x22142f(0x22f)]):unzipFile(temppath,_0x4c1521[_0x22142f(0x22f)]);}}else logger['full'](_0x22142f(0x1ae));}else logger[_0x22142f(0x17c)](_0x22142f(0x2fd));}),app[_0x133b29(0x18d)](express['static'](path[_0x133b29(0x21e)](__dirname,bbpath2,_0x133b29(0x250)))),app['use'](express[_0x133b29(0x253)](path[_0x133b29(0x21e)](__dirname,bbpath2,'build'))),app[_0x133b29(0x33f)]('/',function(_0x2a6fb5,_0x1013c4){const _0x1153ed=_0x133b29;_0x1013c4[_0x1153ed(0x35c)](path['join'](__dirname,bbpath2,'build2',_0x1153ed(0x26f)));}),app['get'](_0x133b29(0x2e2),function(_0x9fe148,_0x43b8b7){const _0x55b278=_0x133b29;_0x43b8b7['sendFile'](path[_0x55b278(0x21e)](__dirname,bbpath2,'build',_0x55b278(0x26f)));}),app['get'](_0x133b29(0x278),(_0x50060e,_0x1b1b8d)=>{const _0x43b572=_0x133b29;_0x1b1b8d[_0x43b572(0x35c)](path['join'](__dirname,bbpath2,_0x43b572(0x18c),_0x43b572(0x26f)));}),app[_0x133b29(0x33f)](_0x133b29(0x29a),(_0x45de04,_0x301d77)=>{const _0x49a2d2=_0x133b29;_0x301d77[_0x49a2d2(0x35c)](path[_0x49a2d2(0x21e)](__dirname,bbpath2,'build',_0x49a2d2(0x26f)));}),app[_0x133b29(0x33f)](_0x133b29(0x346),(_0x26c556,_0x212b3f)=>{const _0xf1f895=_0x133b29;_0x212b3f[_0xf1f895(0x35c)](path[_0xf1f895(0x21e)](__dirname,bbpath2,_0xf1f895(0x18c),_0xf1f895(0x26f)));}),app['get'](_0x133b29(0x22b),(_0x1720f3,_0x4ec2da)=>{const _0x278f8a=_0x133b29;_0x4ec2da[_0x278f8a(0x35c)](path[_0x278f8a(0x21e)](__dirname,bbpath2,_0x278f8a(0x18c),_0x278f8a(0x26f)));}),app[_0x133b29(0x33f)](_0x133b29(0x35a),(_0x5ded5b,_0x26373a)=>{const _0x4136d1=_0x133b29;_0x26373a[_0x4136d1(0x35c)](path[_0x4136d1(0x21e)](__dirname,bbpath2,'build',_0x4136d1(0x26f)));}),app[_0x133b29(0x33f)]('/:bot/support',(_0xdb184e,_0x2c35a3)=>{const _0x1caf7b=_0x133b29;_0x2c35a3[_0x1caf7b(0x35c)](path[_0x1caf7b(0x21e)](__dirname,bbpath2,_0x1caf7b(0x18c),_0x1caf7b(0x26f)));});if(HOST)http[_0x133b29(0x27d)](PORT,HOST);else http[_0x133b29(0x27d)](PORT);const io=require(_0x133b29(0x378))(http,{});init();function _0x50ca(){const _0x162560=['error','restore_no_','name','includes','generateKeyPair',',\x20must\x20be\x20a\x204\x20digit\x20number','Ok,\x20will\x20send\x20order\x20notifications\x20only','9PWddKU','metrics','kind','Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot','2FA\x20login\x20required','uuid-random','chat','671638onqnmD','statSync','#RES#\x20if\x20running\x20locally\x0a','replyWithDocument','Notifications\x20enabled','\x20|\x20user:\x20...','/on\x20-\x20start\x20bot(s)\x0a','update-bot','util','getDate','decode64','then','get-backup-files','--------------------------------------','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','function','\x20files\x20over\x20Telegram:','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','bots','build2','new-disabled','reset-history','static','host','log','randomBytes','.zip','bbvNew','temporaryAccessAllowed','botname','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','debug','stopped','stop','enable','SIGTERM','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','Login\x20rejected','logout','telegramToken','\x1b[35m','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation','expiry','output-003.log','access','action','::1','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','replace','index.html','defaults','zip/','telegramEnabled','blacklist','sort','find','https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master','telegramUsername','/:bot/portfolio','/upload-backup','hex','userid','backup-full.zip','listen','/logs\x20-\x20receive\x20log\x20files\x0a','Idling\x20(','reset-password','mtime','yes','headers','hashSync','Temporary\x20access\x20rejected','telegramEvents','Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)','DEFLATE','create','\x20to\x20','0.0.0','filter','conn','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run','loadAsync','axios','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','\x1b[0m','#RES#\x20','getMinutes','lastmsgtelegram','Notifications\x20types:\x20','No\x20bots\x20running\x20right\x20now','Yes','apiSecret','/:bot/performance','internal','getMonth','login2fa_','3000','Node.js\x20v','telegram','started','request','messages','kill','Backup\x20file\x20uploaded','Telegraf\x20error:','express','reinstall_no','reload','inlineKeyboard','storeHeadless','send','127.0.0.1','Restoring\x20bot(s)\x20from\x20backup','/download/:type','verify','disconnect','Invalid\x20authentication\x20token\x20(2)','version.json','show','NTBA_FIX_319','portfolio','Error\x20details:','/disable\x20-\x20disable\x20notifications\x0a','pidExpireLogin','sendPortfolioTelegram','decrypt','https://api.ipify.org?format=json','backup-files','ETH','order','/metrics\x20-\x20show\x20bot\x20performance\x0a','add-bot','getSeconds','-events.json','config_all','Error\x20sending\x20','api-eu.mixpanel.com','f2aRequired','toggleBotMode','telegram2FaApproval','path','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','\x1b[36m','catch','Setting\x20access:\x20','(staging)','readFileSync','-performance.json','number','date-fns','<b>Telegram\x20Bot\x20Status:</b>\x0a','off','Restore\x20process\x20confirmed','logs/','\x1b[34m','init','The\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','output-001.log','temp/','assign','/output-000.log','uncaughtException','invalid\x20credentials',':\x20Bot\x20Mgr\x20>\x20','/:bot','Unauthorized\x20attempt\x20to\x20confirm\x20message','ipc','resetpw_no','getUTCHours','whitelistEnabled','auto','login','argv','loginRequired','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','temporary\x20access\x20not\x20allowed','graphql-request','config_orders','mkdirSync','Your\x20installation\x20is\x20already\x20up\x20to\x20date','staging','temporary\x20access\x20timeout','running','range','temporary\x20access\x20rejected','Restarting\x20Bot\x20','temporary\x20token\x20generated','latestversion','secret','HTML','code','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)','user','enabled','pki','toggle-bot-mode','showname','bbUsername','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','restart','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','hasOwnProperty','format','toString','apiPassword','test','/help\x20-\x20show\x20available\x20commands\x0a','4273206nYVrJw','Starting\x20new\x20bot\x20|\x20Bot\x20','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','Token\x20blacklisted','8seYFrR','reject','(((.+)+)+)+$','createServer','portfolio_','min','getHours','auth','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?',':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20','emitHistory','Unauthorized\x20attempt\x20to\x20delete\x20alerts','stringify','Unauthorized\x20attempt\x20to\x20update\x20bot','Error:\x20Invalid\x20argument\x20','port','fork','Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file','readdirSync','live','encryptedUuid','Invalid\x20username\x20or\x20IP\x20address','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','restore_yes_','remove','\x20only\x0a','\x20mode','handshake','botmanager','Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files','alerts','storeConfiguration','-----------------------------------------------------------------------------------','initclient','backup','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','resetHistory','/backup\x20-\x20receive\x20backup\x20files\x0a','referer','Bot\x20Mgr\x20>\x20','User\x20has\x20been\x20validated','store-headless','************','Ok,\x20will\x20send\x20alert\x20notifications\x20only','parse','from','get','3436386hCmYSn','async','publicKey','connected','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?','sha256','/:bot/coins','node','2FA','connection','Error\x20removing\x20old\x20backup\x20files:','once','_nsps','ipv6','Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration','Bot\x20','6b67f3d61ee94b8f5c80b4affef4c4d9','login\x20token\x20generated','files','version','emit','Restore\x20backup\x20file\x20','forEach','742996TLDJhN','rsa','Unauthorized\x20attempt\x20to\x20get\x20events','/:bot/configuration','\x20>\x20','sendFile','file','logged\x20out','/enable\x20-\x20enable\x20notifications\x0a','tkn','editMessageReplyMarkup','clientip','cloneDeep','express-fileupload','Backup\x20file\x20unzipped\x20and\x20stored','botID','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','toIPv4Address','secure','private','You\x20can\x20use\x20the\x20following\x20commands:\x0a','track','simple','whitelist','-results.json','padStart','telegraf','copyFileSync','string','<b>Balance\x20Bot\x20Status:</b>\x0a','privateKeyToPem','username','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','socket.io','Notifications\x20enabled\x0a','Deleted\x20Bot\x20','uuid','password','split','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','store','exchange','status','timeshift','headless','Logged\x20out\x20user\x20...','Invalid\x20authentication\x20token\x20(1)','sortBy','bb-settings.json','reply','marketcapApi','reinstall','Unauthorized\x20attempt\x20to\x20log\x20out','match','#RES#','2FA\x20login\x20token\x20generated','backupfile','bot-','isValid','settings.','full','set','button','pidRefreshToken','backup-full','Alerts','Password\x20reset\x20rejected','login\x20token\x20valid','settings','family','callback','publicKeyToPem','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','timestamp','Markdown','lastmsgemitted','build','use','30\x20min','\x20|\x20client:\x20...','startsWith','jszip','push','slice','\x20|\x20','Telegram\x20error:','lowdb','onepagemode','on_','existsSync','get-logs','reason','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run','metrics_','yargs/yargs','all','search','close','writeFileSync','event','constructor','token','exp','new','130655pCMJBc','production','params','store-configuration','value','text','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)','notification','binary','delete-alerts','/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a','any','File\x20uploaded','Disabled\x20Bot\x20','size','write','download','bb-config.json','update-bb','storeFiat','logs','length','mixpanel','child_process','Session\x20expired\x20for\x20user\x20...','getTime','apply','help','server','address\x20already\x20in\x20use','bcryptjs','\x1b[33m','#RED#Balance\x20Bot\x20is\x20already\x20running\x20on\x20port\x20','/status\x20-\x20show\x20bot(s)\x20status\x0a','Starting\x20#RED#Balance\x20Bot\x20v','start','Access\x20enabled\x20for\x20','post','tempaccess_15_','2FA\x20required','/start','orders','bbPassword','update','config_alerts','Unauthorized\x20attempt\x20to\x20download\x20','bb-secure.json','reinstall-bb','15\x20min','exit','login\x20not\x20required','\x20-\x20','max','keys','getFullYear','mode','crypto','message','disable','isDirectory','Unauthorized\x20attempt\x20to\x20update\x20settings','status\x20code\x20401','type','success','update_yes','tempaccess_5_','/restart\x20-\x20restart\x20bot(s)\x0a','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','add','telegramIpApproval','Allow\x20login\x20from\x20IP\x20address\x20','allow','clients','299708VcFWcv','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','bot','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','isIPv4MappedAddress','rmSync','SIGINT','|@|','updatebotmanager','RSA-OAEP','place-order','2FA\x20login\x20rejected','restore-backup-file','All','map','12690711inYbDk','get-messages','sign','sendMetricsTelegram','=>\x20Go\x20to\x20#CYA#http://','-config.json','command','compareSync','unlinkSync','Failed\x20to\x20download\x20','env','Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history','apiKey','generateAsync','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','access\x20timeout','=>\x20Go\x20to\x20#CYA#http://127.0.0.1:','tempaccess_30_','telegramChatId','disabled','manual','bb/','accept','Logged\x20in\x20user\x20...','IPv4','address','Orders','store-settings','\x20(1)','warning','join','privateKey','inherit','***','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','data','output-000.log','names','bbvReceive','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','remoteAddress','$1_$2_$3','toggle_','/:bot/history','confirm-message'];_0x50ca=function(){return _0x162560;};return _0x50ca();}async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}function _0x5093(_0x3871e0,_0x400f1e){const _0x182ed4=_0x50ca();return _0x5093=function(_0xc42b06,_0x27ec31){_0xc42b06=_0xc42b06-0x162;let _0x50caa3=_0x182ed4[_0xc42b06];return _0x50caa3;},_0x5093(_0x3871e0,_0x400f1e);}function getServerIP(){const _0x25581e=_0x133b29;let _0x2eaa6d='[ip-address]';const _0x41f9a7=networkInterfaces(),_0x1b9d73={};for(const _0x2f82e0 of Object[_0x25581e(0x1dd)](_0x41f9a7)){for(const _0x54532d of _0x41f9a7[_0x2f82e0]){if((_0x54532d['family']==_0x25581e(0x218)||_0x54532d[_0x25581e(0x185)]==0x4)&&!_0x54532d[_0x25581e(0x29b)]){const _0x65e6d4=ipaddr[_0x25581e(0x33d)](_0x54532d[_0x25581e(0x219)])[_0x25581e(0x2f5)]();_0x65e6d4!=_0x25581e(0x36a)&&(!_0x1b9d73[_0x2f82e0]&&(_0x1b9d73[_0x2f82e0]=[]),_0x1b9d73[_0x2f82e0][_0x25581e(0x192)](_0x54532d[_0x25581e(0x219)]),_0x2eaa6d=_0x54532d[_0x25581e(0x219)]);}}}return{'serverip':_0x2eaa6d,'netinterfaces':_0x1b9d73};}async function startServer(){const _0x39663d=_0x133b29,{serverip:_0x1b2d38,netinterfaces:_0x41c8ea}=getServerIP();logger[_0x39663d(0x36d)](''),logger['simple']('-----------------------------------------------------------------------------------'),await logger[_0x39663d(0x17c)](_0x39663d(0x1ca)+serverversion+_0x39663d(0x293)+(environment==_0x39663d(0x2f2)?_0x39663d(0x2cf):'')+'\x0a'+(_0x39663d(0x210)+PORT+_0x39663d(0x23d))+(_0x39663d(0x204)+_0x1b2d38+':'+PORT+'#RES#\x20if\x20running\x20on\x20server')),logger[_0x39663d(0x36d)](_0x39663d(0x331));if(config['length']!=0x0)for(const _0x3d8f15 of config){const _0x20eaf2=_0x3d8f15[_0x39663d(0x1df)]==_0x39663d(0x2e8)?'a':'m';if(_0x3d8f15['status']=='enabled'||_0x3d8f15[_0x39663d(0x16a)]==_0x39663d(0x1a7))await logger['full']('Starting\x20('+_0x20eaf2+')\x20|\x20Bot\x20'+_0x3d8f15['botID']+_0x39663d(0x194)+_0x3d8f15[_0x39663d(0x25a)]),startBot([_0x3d8f15[_0x39663d(0x366)],userID],{'cwd':bbpath},function(_0xade100){const _0x66c1aa=_0x39663d;if(_0xade100)logger[_0x66c1aa(0x17c)](_0xade100);});else(_0x3d8f15[_0x39663d(0x16a)]==_0x39663d(0x213)||_0x3d8f15['status']==_0x39663d(0x251))&&await logger[_0x39663d(0x17c)](_0x39663d(0x27f)+_0x20eaf2+')\x20\x20\x20|\x20Bot\x20'+_0x3d8f15[_0x39663d(0x366)]+_0x39663d(0x194)+_0x3d8f15['botname']);}else!newBot&&logger[_0x39663d(0x36d)](_0x39663d(0x2cb));if(newBot)addBot();logger[_0x39663d(0x36d)](_0x39663d(0x331)),logger[_0x39663d(0x36d)](''),await logger[_0x39663d(0x25c)](_0x39663d(0x29f)+nodeversion),await logger[_0x39663d(0x25c)]('Network\x20Interfaces:',_0x41c8ea);}function startSocket(){const _0x569ef0=_0x133b29;io['on'](_0x569ef0(0x349),_0x42f835=>{const _0x22844a=_0x569ef0;let _0x102bc7,_0x493ee5,_0x25485b,_0x4504a2,_0x3df8d4;const _0x2b2647=_0x42f835[_0x22844a(0x32c)][_0x22844a(0x283)][_0x22844a(0x337)];_0x493ee5=_0x2b2647[_0x22844a(0x175)](/bot[0-9]{3}/);if(_0x493ee5)_0x25485b=_0x493ee5[0x0][_0x22844a(0x175)](/[0-9]{3}/);if(_0x25485b)_0x102bc7=_0x25485b[0x0];else _0x102bc7=_0x22844a(0x32d);const _0x208b78=_0x42f835[_0x22844a(0x32c)][_0x22844a(0x318)][_0x22844a(0x325)];if(!_0x208b78)_0x42f835[_0x22844a(0x354)](_0x22844a(0x16a),{'publicKey':secure[_0x22844a(0x342)]});else{_0x4504a2=timelyDecrypt(_0x208b78,![]);if(!_0x4504a2)_0x42f835['emit'](_0x22844a(0x16a),{'publicKey':secure[_0x22844a(0x342)]});else{_0x3df8d4=normalizeIP(_0x42f835[_0x22844a(0x28d)]['remoteAddress'])[_0x22844a(0x168)];if(!devices[_0x4504a2])devices[_0x4504a2]={'uuid':_0x4504a2,'access':{'token':null}};devices[_0x4504a2]['ip']=_0x3df8d4;const _0x1e924a=addClient(_0x42f835['id'],_0x4504a2,_0x102bc7);setAccess(_0x1e924a),emitMessages(),_0x42f835['on'](_0x22844a(0x2e9),_0x2555b2=>{const _0x2e66a5=_0x22844a,_0x360ab2=timelyDecrypt(_0x2555b2[_0x2e66a5(0x165)],!![],_0x2e66a5(0x1f8));if(_0x360ab2){_0x2555b2={'username':_0x2555b2[_0x2e66a5(0x376)],'password':_0x360ab2},devices[_0x4504a2][_0x2e66a5(0x26a)]=validateCredentials(_0x2555b2,_0x4504a2);if(devices[_0x4504a2][_0x2e66a5(0x26a)][_0x2e66a5(0x1ef)]==![]&&devices[_0x4504a2][_0x2e66a5(0x26a)][_0x2e66a5(0x19b)]==_0x2e66a5(0x238))_0x42f835[_0x2e66a5(0x354)](_0x2e66a5(0x16a),{'access':devices[_0x4504a2]['access']}),loginAccess2FA(_0x4504a2,_0x3df8d4);else{if(devices[_0x4504a2][_0x2e66a5(0x26a)][_0x2e66a5(0x1ef)]==![]&&devices[_0x4504a2][_0x2e66a5(0x26a)][_0x2e66a5(0x19b)]==_0x2e66a5(0x2e0))_0x42f835[_0x2e66a5(0x354)](_0x2e66a5(0x16a),{'access':devices[_0x4504a2][_0x2e66a5(0x26a)]});else devices[_0x4504a2]['access'][_0x2e66a5(0x1ef)]&&devices[_0x4504a2][_0x2e66a5(0x26a)][_0x2e66a5(0x19b)]==_0x2e66a5(0x351)&&(getClientsWithUuid(_0x4504a2)[_0x2e66a5(0x356)](_0x398424=>{setAccess(_0x398424);}),logger['debug'](_0x2e66a5(0x217)+_0x4504a2[_0x2e66a5(0x193)](-0x8)),setTokenRefresh(_0x4504a2),setSessionTimeout('login',_0x4504a2));}}else logger[_0x2e66a5(0x17c)]('Unauthorized\x20login\x20attempt\x20(timeout)');}),_0x42f835['on'](_0x22844a(0x280),()=>{resetPassword();}),_0x42f835['on']('disconnect',_0x2e8660=>{removeClient(_0x42f835['id']);}),_0x102bc7==_0x22844a(0x32d)&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x9d3191){const _0x51c6b5=_0x133b29;if(_0x9d3191!='botmanager'&&config[_0x51c6b5(0x20c)]!=''){if(pid[_0x9d3191])pid[_0x9d3191]['send']({'function':_0x51c6b5(0x332),'args':null});}_0x9d3191!=_0x51c6b5(0x32d)&&broadcastToBots(_0x51c6b5(0x24f),JSON['stringify'](config));}function reloadBotManager(){const _0x35a588=_0x133b29;getClientsWithBotID(_0x35a588(0x32d))[_0x35a588(0x356)](_0x4a9d92=>{const _0x30dfd3=_0x35a588;getSocket(_0x4a9d92['id'])[_0x30dfd3(0x354)](_0x30dfd3(0x16a),{'access':{'allow':![],'reason':_0x30dfd3(0x2a9),'token':null}});});}function getSocket(_0x41bf7f){const _0x1e5fff=_0x133b29,_0x66a6e5=io[_0x1e5fff(0x34c)][_0x1e5fff(0x33f)]('/');return _0x66a6e5['sockets']['get'](_0x41bf7f);}function setAccess(_0xc82ea3){const _0x5c9b4f=_0x133b29,_0x3868f2=getSocket(_0xc82ea3['id']),_0x45e374=_0xc82ea3['uuid'],_0x31c72f=_0xc82ea3[_0x5c9b4f(0x1f3)];devices[_0x45e374][_0x5c9b4f(0x26a)]=validateAccess(devices[_0x45e374][_0x5c9b4f(0x26a)][_0x5c9b4f(0x1a5)],_0x45e374),logger['debug'](_0x5c9b4f(0x2ce)+devices[_0x45e374][_0x5c9b4f(0x26a)]['reason']+_0x5c9b4f(0x18f)+_0xc82ea3['id'][_0x5c9b4f(0x193)](-0x8)+_0x5c9b4f(0x240)+_0x45e374[_0x5c9b4f(0x193)](-0x8)),_0x3868f2[_0x5c9b4f(0x21e)](_0x45e374);if(devices[_0x45e374][_0x5c9b4f(0x26a)][_0x5c9b4f(0x1ef)]){_0x3868f2['join'](_0x31c72f);if(_0x31c72f=='botmanager')initializeSocketBotManager(_0x3868f2);else initializeSocketBot(_0x3868f2);initClient(_0x31c72f);}devices[_0x45e374][_0x5c9b4f(0x26a)]['token']&&devices[_0x45e374]['access'][_0x5c9b4f(0x19b)]==_0x5c9b4f(0x2f8)&&setSessionTimeout(_0x5c9b4f(0x348),_0x45e374),devices[_0x45e374][_0x5c9b4f(0x26a)][_0x5c9b4f(0x1a5)]&&devices[_0x45e374]['access'][_0x5c9b4f(0x19b)]==_0x5c9b4f(0x177)&&setSessionTimeout('login',_0x45e374),_0x3868f2[_0x5c9b4f(0x354)]('status',{'status':_0xc82ea3[_0x5c9b4f(0x1c4)],'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x45e374][_0x5c9b4f(0x26a)],'externalip':devices[_0x45e374]['ip'],'publicKey':secure[_0x5c9b4f(0x342)],'userid':settings[_0x5c9b4f(0x27b)],'validInstallation':validInstallation}),devices[_0x45e374][_0x5c9b4f(0x26a)]['allow']==![]&&devices[_0x45e374][_0x5c9b4f(0x26a)]['reason']=='2FA\x20required'&&temporaryAccess2FA(_0x45e374,devices[_0x45e374]['ip']);}function setSessionTimeout(_0x2d9f60,_0x12db8d){const _0x499e6e=_0x133b29;let _0x5c4779;if(_0x2d9f60==_0x499e6e(0x2e9))_0x5c4779=loginExpiry*0x3c*0x3e8;else _0x5c4779=devices[_0x12db8d][_0x499e6e(0x1ed)][_0x499e6e(0x268)]*0x3c*0x3e8-(new Date()[_0x499e6e(0x1c1)]()-devices[_0x12db8d][_0x499e6e(0x1ed)]['timestamp']);if(devices[_0x12db8d]['pidExpireLogin'])clearTimeout(devices[_0x12db8d]['pidExpireLogin']);devices[_0x12db8d][_0x499e6e(0x2b9)]=setTimeout(()=>{const _0x3723b9=_0x499e6e;if(devices[_0x12db8d][_0x3723b9(0x17f)])clearTimeout(devices[_0x12db8d][_0x3723b9(0x17f)]);removeSocketListeners(_0x12db8d),addBlacklist(_0x12db8d),devices[_0x12db8d]['telegramIpApproval']=null,devices[_0x12db8d][_0x3723b9(0x2c9)]=null,devices[_0x12db8d][_0x3723b9(0x26a)][_0x3723b9(0x1a5)]=null,logger[_0x3723b9(0x25c)](_0x3723b9(0x1c0)+_0x12db8d[_0x3723b9(0x193)](-0x8)),devices[_0x12db8d]['access']=validateAccess(devices[_0x12db8d][_0x3723b9(0x26a)][_0x3723b9(0x1a5)],_0x12db8d),!(devices[_0x12db8d][_0x3723b9(0x26a)][_0x3723b9(0x1ef)]&&devices[_0x12db8d]['access'][_0x3723b9(0x19b)]==_0x3723b9(0x1da))&&(_0x2d9f60==_0x3723b9(0x2e9)?io['to'](_0x12db8d)[_0x3723b9(0x354)](_0x3723b9(0x16a),{'access':{'allow':![],'reason':_0x3723b9(0x20f),'token':null}}):io['to'](_0x12db8d)[_0x3723b9(0x354)](_0x3723b9(0x16a),{'access':{'allow':![],'reason':_0x3723b9(0x2f3),'token':null}})),devices[_0x12db8d][_0x3723b9(0x26a)][_0x3723b9(0x1a5)]=null;},_0x5c4779);}function setTokenRefresh(_0xc142d4){const _0x5ea03b=_0x133b29;if(devices[_0xc142d4][_0x5ea03b(0x17f)])clearTimeout(devices[_0xc142d4][_0x5ea03b(0x17f)]);devices[_0xc142d4][_0x5ea03b(0x17f)]=setTimeout(()=>{const _0x1a240a=_0x5ea03b;getClientsWithUuid(_0xc142d4)[_0x1a240a(0x1bd)]!=0x0?(devices[_0xc142d4]['access']=refreshToken(_0xc142d4),io['to'](_0xc142d4)[_0x1a240a(0x354)](_0x1a240a(0x16a),{'status':_0x1a240a(0x343),'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0xc142d4][_0x1a240a(0x26a)],'externalip':devices[_0xc142d4]['ip'],'publicKey':secure[_0x1a240a(0x342)],'validInstallation':validInstallation}),setTokenRefresh(_0xc142d4)):clearTimeout(devices[_0xc142d4][_0x1a240a(0x17f)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x1b0aaa){const _0xb8abd6=_0x133b29,_0x5e25df=getClient(_0x1b0aaa['id'])[_0xb8abd6(0x164)];_0x1b0aaa[_0xb8abd6(0x354)](_0xb8abd6(0x24f),config),_0x1b0aaa[_0xb8abd6(0x354)](_0xb8abd6(0x184),cleanSettings()),_0x1b0aaa['on'](_0xb8abd6(0x2c1),_0x36f818=>{const _0x2bd58f=_0xb8abd6;if(validateAccess(_0x36f818,_0x5e25df)[_0x2bd58f(0x1ef)])addBot();else logger[_0x2bd58f(0x17c)]('Unauthorized\x20attempt\x20to\x20add\x20bot');}),_0x1b0aaa['on'](_0xb8abd6(0x242),(_0x5c62df,_0x4cccc7)=>{const _0xee10dc=_0xb8abd6;if(validateAccess(_0x4cccc7,_0x5e25df)[_0xee10dc(0x1ef)])toggleBot(_0x5c62df[_0xee10dc(0x366)],_0x5c62df[_0xee10dc(0x16a)],_0x5c62df['live']);else logger[_0xee10dc(0x17c)](_0xee10dc(0x31e));}),_0x1b0aaa['on'](_0xb8abd6(0x301),(_0x207482,_0x17be3a)=>{const _0x3cbe5f=_0xb8abd6;if(validateAccess(_0x17be3a,_0x5e25df)[_0x3cbe5f(0x1ef)])toggleBotMode(_0x207482);else logger[_0x3cbe5f(0x17c)]('Unauthorized\x20attempt\x20to\x20update\x20bot');}),_0x1b0aaa['on']('delete-bot',(_0x507e8e,_0x412cb3)=>{const _0xab1da4=_0xb8abd6;if(validateAccess(_0x412cb3,_0x5e25df)[_0xab1da4(0x1ef)])deleteBot(_0x507e8e);else logger[_0xab1da4(0x17c)]('Unauthorized\x20attempt\x20to\x20delete\x20bot');}),_0x1b0aaa['on'](_0xb8abd6(0x21b),(_0x56687f,_0x4a980a)=>{const _0x1dabf7=_0xb8abd6;if(validateAccess(_0x4a980a,_0x5e25df)[_0x1dabf7(0x1ef)])storeSettings(_0x56687f,!![]);else logger[_0x1dabf7(0x17c)](_0x1dabf7(0x1e4));}),_0x1b0aaa['on'](_0xb8abd6(0x1ba),_0x728b73=>{const _0xc8a95b=_0xb8abd6;if(validateAccess(_0x728b73,_0x5e25df)[_0xc8a95b(0x1ef)])updateBB(_0xc8a95b(0x1d3));else logger[_0xc8a95b(0x17c)]('Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot');}),_0x1b0aaa['on'](_0xb8abd6(0x1d7),_0x23a87a=>{const _0x2de37e=_0xb8abd6;if(validateAccess(_0x23a87a,_0x5e25df)[_0x2de37e(0x1ef)])updateBB(_0x2de37e(0x173));else logger['full'](_0x2de37e(0x237));}),_0x1b0aaa['on'](_0xb8abd6(0x247),_0x470928=>{const _0x5e03e5=_0xb8abd6;if(validateAccess(_0x470928,_0x5e25df)[_0x5e03e5(0x1ef)]){const _0x4e3505=getClient(_0x1b0aaa['id']);if(_0x4e3505)getBackupFiles(_0x4e3505['uuid']);else logger[_0x5e03e5(0x17c)]('Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files');}else logger[_0x5e03e5(0x17c)](_0x5e03e5(0x32e));}),_0x1b0aaa['on'](_0xb8abd6(0x1fd),(_0x1dda6,_0x4e6638)=>{const _0x123972=_0xb8abd6;if(validateAccess(_0x4e6638,_0x5e25df)[_0x123972(0x1ef)])restoreBackupFile(_0x1dda6);else logger[_0x123972(0x17c)](_0x123972(0x322));}),_0x1b0aaa['on'](_0xb8abd6(0x201),_0x39c2d9=>{if(validateAccess(_0x39c2d9,_0x5e25df)['allow'])getMessages();else logger['full']('Unauthorized\x20attempt\x20to\x20get\x20messages');}),_0x1b0aaa['on'](_0xb8abd6(0x22c),(_0x19acd7,_0xa6af0)=>{const _0xdec827=_0xb8abd6;if(validateAccess(_0xa6af0,_0x5e25df)[_0xdec827(0x1ef)])confirmMessage(_0x19acd7);else logger[_0xdec827(0x17c)](_0xdec827(0x2e3));}),_0x1b0aaa['on'](_0xb8abd6(0x263),_0xec6e29=>{const _0x5e02fb=_0xb8abd6;if(validateAccess(_0xec6e29,_0x5e25df)[_0x5e02fb(0x1ef)]){if(devices[_0x5e25df][_0x5e02fb(0x17f)])clearTimeout(devices[_0x5e25df][_0x5e02fb(0x17f)]);if(devices[_0x5e25df][_0x5e02fb(0x2b9)])clearTimeout(devices[_0x5e25df][_0x5e02fb(0x2b9)]);removeSocketListeners(getClient(_0x1b0aaa['id'])[_0x5e02fb(0x164)]),addBlacklist(_0x5e25df),devices[_0x5e25df][_0x5e02fb(0x1ed)]=null,devices[_0x5e25df][_0x5e02fb(0x2c9)]=null,devices[_0x5e25df][_0x5e02fb(0x26a)][_0x5e02fb(0x1a5)]=null,logger['debug'](_0x5e02fb(0x16d)+_0x5e25df[_0x5e02fb(0x193)](-0x8)),io['to'](getClient(_0x1b0aaa['id'])[_0x5e02fb(0x164)])[_0x5e02fb(0x354)](_0x5e02fb(0x16a),{'access':{'allow':![],'reason':_0x5e02fb(0x35e),'token':null}});}else logger[_0x5e02fb(0x17c)](_0x5e02fb(0x174));});}function initializeSocketBot(_0x1b5558){const _0x2956ae=_0x133b29,_0x27c39d=getClient(_0x1b5558['id'])['bot'],_0x37a292=getClient(_0x1b5558['id'])['uuid'];_0x1b5558['on'](_0x2956ae(0x19a),(_0x356f09,_0x43c1d1)=>{const _0x48b5ab=_0x2956ae;if(validateAccess(_0x43c1d1,_0x37a292)['allow']){if(pid[_0x27c39d])pid[_0x27c39d]['send']({'function':_0x48b5ab(0x31b),'args':_0x356f09});}else logger[_0x48b5ab(0x17c)](_0x48b5ab(0x359));}),_0x1b5558['on'](_0x2956ae(0x1b1),(_0x161381,_0x1db139)=>{const _0x5168e5=_0x2956ae;if(validateAccess(_0x1db139,_0x37a292)['allow']){if(pid[_0x27c39d])pid[_0x27c39d]['send']({'function':'deleteHistoryAlerts','args':_0x161381});}else logger[_0x5168e5(0x17c)](_0x5168e5(0x31c));}),_0x1b5558['on']('get-portfolio',(_0x576a59,_0x253696)=>{const _0x2be68f=_0x2956ae;if(validateAccess(_0x253696,_0x37a292)[_0x2be68f(0x1ef)]){if(pid[_0x27c39d])pid[_0x27c39d]['send']({'function':'getPortfolio','args':_0x576a59});}else logger['full']('Unauthorized\x20attempt\x20to\x20get\x20portfolio');}),_0x1b5558['on'](_0x2956ae(0x1ab),(_0x3cbe63,_0x48069a)=>{const _0x3f213b=_0x2956ae;if(validateAccess(_0x48069a,_0x37a292)[_0x3f213b(0x1ef)]){if(pid[_0x27c39d])pid[_0x27c39d][_0x3f213b(0x2ac)]({'function':_0x3f213b(0x330),'args':_0x3cbe63});}else logger['full']('Unauthorized\x20attempt\x20to\x20store\x20configuration');}),_0x1b5558['on'](_0x2956ae(0x33a),(_0x22335d,_0xdf3b8a)=>{const _0x5ed31f=_0x2956ae;if(validateAccess(_0xdf3b8a,_0x37a292)[_0x5ed31f(0x1ef)]){if(pid[_0x27c39d])pid[_0x27c39d]['send']({'function':_0x5ed31f(0x2ab),'args':_0x22335d});}else logger[_0x5ed31f(0x17c)](_0x5ed31f(0x367));}),_0x1b5558['on']('store-fiat',(_0x207817,_0x2d7a25)=>{const _0x59a4b3=_0x2956ae;if(validateAccess(_0x2d7a25,_0x37a292)['allow']){if(pid[_0x27c39d])pid[_0x27c39d][_0x59a4b3(0x2ac)]({'function':_0x59a4b3(0x1bb),'args':_0x207817});}else logger[_0x59a4b3(0x17c)](_0x59a4b3(0x34e));}),_0x1b5558['on'](_0x2956ae(0x252),_0x36d55a=>{const _0xd5dec=_0x2956ae;if(validateAccess(_0x36d55a,_0x37a292)[_0xd5dec(0x1ef)]){if(pid[_0x27c39d])pid[_0x27c39d][_0xd5dec(0x2ac)]({'function':_0xd5dec(0x335),'args':null});}else logger[_0xd5dec(0x17c)](_0xd5dec(0x20b));}),_0x1b5558['on']('get-starting-balances',_0x5eba0b=>{const _0x12b8b1=_0x2956ae;if(validateAccess(_0x5eba0b,_0x37a292)[_0x12b8b1(0x1ef)]){if(pid[_0x27c39d])pid[_0x27c39d][_0x12b8b1(0x2ac)]({'function':'getStartingBalances','args':null});}else logger[_0x12b8b1(0x17c)](_0x12b8b1(0x222));}),_0x1b5558['on'](_0x2956ae(0x1fb),(_0xccaa18,_0xba9131)=>{const _0x2d6986=_0x2956ae;if(validateAccess(_0xba9131,_0x37a292)[_0x2d6986(0x1ef)]){if(pid[_0x27c39d])pid[_0x27c39d][_0x2d6986(0x2ac)]({'function':'placeOrder','args':_0xccaa18});}else logger[_0x2d6986(0x17c)](_0x2d6986(0x25b));}),_0x1b5558['on']('cancel-loading',_0x57ab07=>{const _0x313873=_0x2956ae;if(validateAccess(_0x57ab07,_0x37a292)['allow']){if(pid[_0x27c39d])pid[_0x27c39d]['send']({'function':'cancelLoading','args':null});}else logger[_0x313873(0x17c)]('Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins');}),_0x1b5558['on']('show-config',_0x1c16c3=>{const _0x21f7d9=_0x2956ae;if(validateAccess(_0x1c16c3,_0x37a292)['allow']){if(pid[_0x27c39d])pid[_0x27c39d][_0x21f7d9(0x2ac)]({'function':'showConfig','args':null});}else logger[_0x21f7d9(0x17c)]('Unauthorized\x20attempt\x20to\x20show\x20configuration');}),_0x1b5558['on']('update-bb',_0x5c86b3=>{const _0x48b4b8=_0x2956ae;if(validateAccess(_0x5c86b3,_0x37a292)[_0x48b4b8(0x1ef)])updateBB(_0x48b4b8(0x1d3));else logger[_0x48b4b8(0x17c)](_0x48b4b8(0x26d));}),_0x1b5558['on']('get-messages',_0xd2c219=>{const _0x1cd7ef=_0x2956ae;if(validateAccess(_0xd2c219,_0x37a292)[_0x1cd7ef(0x1ef)])getMessages();else logger['full']('Unauthorized\x20attempt\x20to\x20get\x20messages');}),_0x1b5558['on'](_0x2956ae(0x22c),(_0x59812d,_0x1f385e)=>{const _0x2e8834=_0x2956ae;if(validateAccess(_0x1f385e,_0x37a292)['allow'])confirmMessage(_0x59812d);else logger[_0x2e8834(0x17c)](_0x2e8834(0x2e3));}),_0x1b5558['on'](_0x2956ae(0x263),_0x57f8fa=>{const _0x4af5f7=_0x2956ae;if(validateAccess(_0x57f8fa,_0x37a292)[_0x4af5f7(0x1ef)]){if(devices[_0x37a292][_0x4af5f7(0x17f)])clearTimeout(devices[_0x37a292][_0x4af5f7(0x17f)]);if(devices[_0x37a292][_0x4af5f7(0x2b9)])clearTimeout(devices[_0x37a292][_0x4af5f7(0x2b9)]);removeSocketListeners(getClient(_0x1b5558['id'])['uuid']),addBlacklist(_0x37a292),devices[_0x37a292][_0x4af5f7(0x1ed)]=null,devices[_0x37a292][_0x4af5f7(0x2c9)]=null,devices[_0x37a292]['access'][_0x4af5f7(0x1a5)]=null,logger[_0x4af5f7(0x25c)](_0x4af5f7(0x16d)+_0x37a292['slice'](-0x8)),io['to'](getClient(_0x1b5558['id'])[_0x4af5f7(0x164)])[_0x4af5f7(0x354)]('status',{'access':{'allow':![],'reason':_0x4af5f7(0x35e),'token':null}});}else logger[_0x4af5f7(0x17c)](_0x4af5f7(0x174));});}function removeSocketListeners(_0x45a3a5){const _0x2ee925=_0x133b29;getClientsWithUuid(_0x45a3a5)[_0x2ee925(0x356)](_0x321153=>{getSocket(_0x321153['id'])['removeAllListeners']();});}function cleanSettings(){const _0x4a2b45=_0x133b29;let _0x16521e=settings;return settings['telegramToken']&&settings[_0x4a2b45(0x264)]!=''&&(_0x16521e={..._0x16521e,'telegramToken':'************'}),settings[_0x4a2b45(0x1d2)]&&settings[_0x4a2b45(0x1d2)]!=''&&(_0x16521e={..._0x16521e,'bbPassword':_0x4a2b45(0x33b)}),settings[_0x4a2b45(0x172)]&&settings['marketcapApi']!=''&&(_0x16521e={..._0x16521e,'marketcapApi':'************'}),(settings['bbPassword']&&settings[_0x4a2b45(0x1d2)]=='***'||settings[_0x4a2b45(0x264)]&&settings['telegramToken']==_0x4a2b45(0x221)||settings[_0x4a2b45(0x172)]&&settings[_0x4a2b45(0x172)]==_0x4a2b45(0x221))&&(_0x16521e={..._0x16521e,'restored':{'password':settings[_0x4a2b45(0x1d2)]==_0x4a2b45(0x221),'telegram':settings[_0x4a2b45(0x264)]=='***','marketcap':settings[_0x4a2b45(0x172)]==_0x4a2b45(0x221)}}),_0x16521e;}async function updateBB(_0x4035de){const _0x199315=_0x133b29;await backupConfigFiles(),installingUpdate=!![],config[_0x199315(0x356)](_0x3d4ae9=>{const _0x13c2bc=_0x199315;restartBot(_0x3d4ae9[_0x13c2bc(0x366)]);});if(_0x4035de==_0x199315(0x1d3))process['send']({'update':!![],'environment':environment},_0xd2cc91=>{});else _0x4035de==_0x199315(0x173)&&process['send']({'reinstall':!![],'environment':environment},_0x247d24=>{});}function startBot(_0x29cfe8,_0x142dfc,_0x56d05b){const _0x4c2211=_0x133b29;if(debugging)_0x29cfe8[_0x4c2211(0x192)]('-d');if(recreate)_0x29cfe8[_0x4c2211(0x192)]('-r');let _0x374ae5=![];const _0x35be38=_0x29cfe8[0x0];_0x142dfc={..._0x142dfc,'stdio':['inherit',_0x4c2211(0x220),'inherit',_0x4c2211(0x2e4)]},pid[_0x35be38]=childProcess[_0x4c2211(0x321)](botfile,_0x29cfe8,_0x142dfc),pid[_0x35be38]['on']('message',_0x4c5734=>{const _0x372667=_0x4c2211;switch(Object[_0x372667(0x1dd)](_0x4c5734)[0x0]){case _0x372667(0x25a):updateBotName(_0x35be38,_0x4c5734['botname']);break;case _0x372667(0x1f9):updateBotManager();break;case'status':updateStatus(_0x35be38,_0x4c5734[_0x372667(0x16a)]);break;case _0x372667(0x324):updateLive(_0x35be38,_0x4c5734[_0x372667(0x324)]);break;case'started':updateLive(_0x35be38,_0x4c5734[_0x372667(0x2a1)]),io['to'](_0x35be38)[_0x372667(0x354)](_0x372667(0x16a),{'access':{'allow':![],'reason':_0x372667(0x2a9),'token':null}});break;case _0x372667(0x25e):_0x4c5734[_0x372667(0x25e)]=='restart'&&restartBot(_0x35be38);_0x4c5734[_0x372667(0x25e)]==_0x372667(0x2a4)&&toggleBot(_0x35be38,'disabled',_0x372667(0x25d));break;case _0x372667(0x2a0):sendTelegramBot(_0x35be38,_0x4c5734[_0x372667(0x2a0)]);break;case'telegrammsg':sendTelegramMsg(_0x4c5734['telegrammsg']);break;case _0x372667(0x24a):io['to'](_0x35be38)['emit'](_0x4c5734[_0x372667(0x24a)],_0x4c5734['args']);break;}}),pid[_0x35be38]['on']('error',function(_0x2ee0fb){if(_0x374ae5)return;_0x374ae5=!![],_0x56d05b(_0x2ee0fb);}),pid[_0x35be38]['on'](_0x4c2211(0x1d9),async function(_0x193568){const _0x3fe215=_0x4c2211;if(terminating)return;if(installingUpdate){io[_0x3fe215(0x1a1)]();return;}if(_0x374ae5)return;_0x374ae5=!![],_0x56d05b(null);const _0x4e8f3f=dbConfig[_0x3fe215(0x33f)]('bots')[_0x3fe215(0x275)]({'botID':_0x35be38})[_0x3fe215(0x1ac)]();_0x4e8f3f&&(_0x4e8f3f[_0x3fe215(0x16a)]=='enabled'||_0x4e8f3f[_0x3fe215(0x16a)]==_0x3fe215(0x1a7))&&(await sleep(0x3e8),updateLive(_0x35be38,'stopped'),logger[_0x3fe215(0x17c)](_0x3fe215(0x2f7)+_0x35be38),startBot([_0x35be38,userID],{'cwd':bbpath},function(_0x386255){const _0x156cdd=_0x3fe215;if(_0x386255)logger[_0x156cdd(0x17c)](_0x386255);}));});}function stopBot(_0x273ef3){const _0x15696f=_0x133b29;getClientsWithBotID(_0x273ef3)[_0x15696f(0x356)](_0x38499b=>{const _0x1c41d8=_0x15696f;getSocket(_0x38499b['id'])[_0x1c41d8(0x2b1)](!![]),removeClient(_0x38499b['id']);}),pid[_0x273ef3]&&(pid[_0x273ef3][_0x15696f(0x2a4)](),pid[_0x273ef3]=null);}function stopAllBots(){const _0x628717=_0x133b29;terminating=!![];const _0x4a8200=getEnabledBots();_0x4a8200[_0x628717(0x356)](_0x44b02c=>{const _0xe36aae=_0x628717;stopBot(_0x44b02c[_0xe36aae(0x366)]);});}function restartBot(_0x2b3954){const _0x231ecf=_0x133b29;if(pid[_0x2b3954])pid[_0x2b3954][_0x231ecf(0x2a4)]();}function addBot(){const _0x4886c6=_0x133b29;let _0x55dc7c;for(let _0x16a344=0x1;_0x16a344<0x3e9;_0x16a344++){_0x55dc7c=_0x16a344[_0x4886c6(0x309)]()['padStart'](0x3,'0');let _0x16ea96=config[_0x4886c6(0x275)](_0x33db0e=>_0x33db0e[_0x4886c6(0x366)]==_0x55dc7c);if(!_0x16ea96)break;}if(_0x55dc7c==='1000'){logger[_0x4886c6(0x17c)](_0x4886c6(0x2da));return;}logger[_0x4886c6(0x17c)](_0x4886c6(0x30e)+_0x55dc7c),dbConfig['get'](_0x4886c6(0x24f))[_0x4886c6(0x192)]({'botID':_0x55dc7c,'botname':_0x4886c6(0x34f)+_0x55dc7c,'status':_0x4886c6(0x1a7),'live':''})[_0x4886c6(0x1b7)](),startBot([_0x55dc7c,userID],{'cwd':bbpath},function(_0x1729b0){const _0x539187=_0x4886c6;if(_0x1729b0)logger[_0x539187(0x17c)](_0x1729b0);}),config=getConfiguration(),io['to']('botmanager')[_0x4886c6(0x354)](_0x4886c6(0x24f),config),broadcastToBots(_0x4886c6(0x24f),JSON[_0x4886c6(0x31d)](config));}function deleteBot(_0x571fe5){const _0x5c7883=_0x133b29;getClientsWithBotID(_0x571fe5)[_0x5c7883(0x356)](_0x51f109=>{getSocket(_0x51f109['id'])['disconnect'](!![]),removeClient(_0x51f109['id']);}),dbConfig[_0x5c7883(0x33f)](_0x5c7883(0x24f))['remove']({'botID':_0x571fe5})[_0x5c7883(0x1b7)](),logger[_0x5c7883(0x17c)](_0x5c7883(0x163)+_0x571fe5),stopBot(_0x571fe5);try{if(fs[_0x5c7883(0x199)](path[_0x5c7883(0x21e)](configpath,_0x5c7883(0x179)+_0x571fe5+_0x5c7883(0x205))))fs[_0x5c7883(0x208)](path[_0x5c7883(0x21e)](configpath,_0x5c7883(0x179)+_0x571fe5+_0x5c7883(0x205)));if(fs[_0x5c7883(0x199)](path[_0x5c7883(0x21e)](configpath,'bot-'+_0x571fe5+_0x5c7883(0x2c3))))fs[_0x5c7883(0x208)](path[_0x5c7883(0x21e)](configpath,_0x5c7883(0x179)+_0x571fe5+'-events.json'));if(fs[_0x5c7883(0x199)](path[_0x5c7883(0x21e)](configpath,'bot-'+_0x571fe5+'-performance.json')))fs[_0x5c7883(0x208)](path['join'](configpath,_0x5c7883(0x179)+_0x571fe5+_0x5c7883(0x2d1)));if(fs[_0x5c7883(0x199)](path[_0x5c7883(0x21e)](configpath,'bot-'+_0x571fe5+_0x5c7883(0x36f))))fs['unlinkSync'](path[_0x5c7883(0x21e)](configpath,_0x5c7883(0x179)+_0x571fe5+_0x5c7883(0x36f)));}catch(_0x3dce24){if(_0x3dce24)logger[_0x5c7883(0x17c)]('Error\x20while\x20deleting\x20config\x20files:\x20',_0x3dce24);}config=getConfiguration(),io['to'](_0x5c7883(0x32d))[_0x5c7883(0x354)](_0x5c7883(0x24f),config),broadcastToBots(_0x5c7883(0x24f),JSON[_0x5c7883(0x31d)](config));}function toggleBot(_0x48f091,_0x2f4d,_0x2e41f7){const _0x3050ee=_0x133b29;dbConfig[_0x3050ee(0x33f)](_0x3050ee(0x24f))[_0x3050ee(0x275)]({'botID':_0x48f091})['assign']({'status':_0x2f4d})[_0x3050ee(0x2dd)]({'live':_0x2e41f7})[_0x3050ee(0x1b7)]();if(_0x2f4d==_0x3050ee(0x2ff)||_0x2f4d==_0x3050ee(0x1a7))logger[_0x3050ee(0x17c)]('Enabled\x20Bot\x20'+_0x48f091),startBot([_0x48f091,userID],{'cwd':bbpath},function(_0x22bf52){const _0x409c82=_0x3050ee;if(_0x22bf52)logger[_0x409c82(0x17c)](_0x22bf52);});else(_0x2f4d=='disabled'||_0x2f4d=='new-disabled')&&(logger[_0x3050ee(0x17c)](_0x3050ee(0x1b5)+_0x48f091),stopBot(_0x48f091));config=getConfiguration(),io['to'](_0x3050ee(0x32d))[_0x3050ee(0x354)](_0x3050ee(0x24f),config),broadcastToBots(_0x3050ee(0x24f),JSON['stringify'](config));}function toggleStatus(_0x30fc44){const _0xe094e4=_0x133b29;let _0x40d950=dbConfig['get'](_0xe094e4(0x24f))['find']({'botID':_0x30fc44})[_0xe094e4(0x1ac)](),_0x3855f1;if(_0x40d950[_0xe094e4(0x16a)]===_0xe094e4(0x2ff))_0x3855f1='disabled';else{if(_0x40d950[_0xe094e4(0x16a)]===_0xe094e4(0x1a7))_0x3855f1=_0xe094e4(0x251);else{if(_0x40d950['status']==='new-disabled')_0x3855f1=_0xe094e4(0x1a7);else{if(_0x40d950[_0xe094e4(0x16a)]===_0xe094e4(0x213))_0x3855f1=_0xe094e4(0x2ff);}}}return _0x3855f1;}function updateStatus(_0x39192b,_0x1a11f6){const _0x4f8b13=_0x133b29;dbConfig[_0x4f8b13(0x33f)](_0x4f8b13(0x24f))['find']({'botID':_0x39192b})[_0x4f8b13(0x2dd)]({'status':_0x1a11f6})['write'](),config=getConfiguration(),io['to']('botmanager')['emit'](_0x4f8b13(0x24f),config),broadcastToBots('bots',JSON['stringify'](config));}function updateLive(_0x282693,_0x56d464){const _0x27e184=_0x133b29;dbConfig[_0x27e184(0x33f)](_0x27e184(0x24f))[_0x27e184(0x275)]({'botID':_0x282693})['assign']({'live':_0x56d464})[_0x27e184(0x1b7)](),config=getConfiguration(),io['to']('botmanager')[_0x27e184(0x354)](_0x27e184(0x24f),config),broadcastToBots('bots',JSON[_0x27e184(0x31d)](config));}function updateBotName(_0x295ce0,_0x2e1c2e){const _0xed6ba9=_0x133b29;dbConfig[_0xed6ba9(0x33f)](_0xed6ba9(0x24f))[_0xed6ba9(0x275)]({'botID':_0x295ce0})['assign']({'botname':_0x2e1c2e})['write'](),config=getConfiguration(),io['to'](_0xed6ba9(0x32d))['emit'](_0xed6ba9(0x24f),config),broadcastToBots('bots',JSON[_0xed6ba9(0x31d)](config));}function updateBotManager(){const _0x2b65ae=_0x133b29;config=getConfiguration(),io['to'](_0x2b65ae(0x32d))['emit'](_0x2b65ae(0x24f),config),broadcastToBots('bots',JSON[_0x2b65ae(0x31d)](config));}function toggleBotMode(_0x16c1c1){const _0x304136=_0x133b29;if(pid[_0x16c1c1])pid[_0x16c1c1][_0x304136(0x2ac)]({'function':_0x304136(0x2c8),'args':null});else{const _0x3024e8=configpath+_0x304136(0x179)+_0x16c1c1+'-config.json',_0x1521a3=fs[_0x304136(0x2d0)](_0x3024e8),_0x3c0e12=JSON[_0x304136(0x33d)](_0x1521a3),_0x58b6b4=_0x3c0e12[_0x304136(0x1f3)][0x0][_0x304136(0x16c)];_0x3c0e12[_0x304136(0x1f3)][0x0][_0x304136(0x16c)]=!_0x58b6b4;const _0xbce8a7=JSON[_0x304136(0x31d)](_0x3c0e12,null,0x2);fs[_0x304136(0x1a2)](_0x3024e8,_0xbce8a7),config=getConfiguration(),io['to'](_0x304136(0x32d))[_0x304136(0x354)]('bots',config),broadcastToBots(_0x304136(0x24f),JSON[_0x304136(0x31d)](config));}}function validateTelegram(_0x7adc71){const _0x4acc89=_0x133b29;if(_0x7adc71['from'][_0x4acc89(0x376)]!=settings[_0x4acc89(0x277)]&&'@'+_0x7adc71['from'][_0x4acc89(0x376)]!=settings['telegramUsername']||_0x7adc71['chat']['id']!=settings[_0x4acc89(0x212)])return sendTelegram(_0x7adc71[_0x4acc89(0x23a)]['id'],'Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings',{'parse_mode':'HTML'}),![];return!![];}async function initTelegram(){const _0x5a2491=_0x133b29;tgBot&&(await tgBot[_0x5a2491(0x25e)](),await sleep(0x7d0));tgBot=new Telegraf(settings[_0x5a2491(0x264)]);let _0x81ab81=_0x5a2491(0x36b);_0x81ab81+='\x0a',_0x81ab81+=_0x5a2491(0x35f),_0x81ab81+=_0x5a2491(0x2b8),_0x81ab81+=_0x5a2491(0x24c),_0x81ab81+=_0x5a2491(0x1ea),_0x81ab81+=_0x5a2491(0x241),_0x81ab81+='/off\x20-\x20stop\x20bot(s)\x0a',_0x81ab81+='/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a',_0x81ab81+='/names\x20-\x20show\x20bot\x20names\x0a',_0x81ab81+=_0x5a2491(0x1c9),_0x81ab81+=_0x5a2491(0x2c0),_0x81ab81+=_0x5a2491(0x20e),_0x81ab81+=_0x5a2491(0x27e),_0x81ab81+=_0x5a2491(0x336),_0x81ab81+='/update\x20-\x20update\x20Balance\x20Bot\x0a',_0x81ab81+=_0x5a2491(0x1b2),_0x81ab81+=_0x5a2491(0x30c);let _0x5aa431=_0x5a2491(0x227);_0x5aa431+='\x0a',_0x5aa431+=_0x81ab81,tgBot[_0x5a2491(0x2cd)]((_0x5a844c,_0x61bd7b)=>{const _0x57c4c1=_0x5a2491;logger['simple'](getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20Telegram\x20error\x20occured'),logger['debug'](_0x57c4c1(0x2a6),_0x5a844c);}),tgBot['use'](async(_0x50221c,_0x38e7eb)=>{const _0x2f5e4d=_0x5a2491;if(settings[_0x2f5e4d(0x212)]||_0x50221c[_0x2f5e4d(0x1d3)]['message'][_0x2f5e4d(0x1ad)]!=_0x2f5e4d(0x1d0)){if(!validateTelegram(_0x50221c))return;}_0x38e7eb();}),tgBot[_0x5a2491(0x206)](_0x5a2491(0x1cb),async _0x209d1b=>{const _0x2d71a4=_0x5a2491;if(_0x209d1b[_0x2d71a4(0x33e)]['username']==settings[_0x2d71a4(0x277)]||'@'+_0x209d1b[_0x2d71a4(0x33e)]['username']==settings[_0x2d71a4(0x277)]){if(!settings[_0x2d71a4(0x212)])updateSetting(_0x2d71a4(0x212),_0x209d1b['chat']['id']);else{if(!validateTelegram(_0x209d1b))return;}}else{if(!validateTelegram(_0x209d1b))return;}updateSetting(_0x2d71a4(0x272),!![]),await sendTelegram(_0x209d1b[_0x2d71a4(0x23a)]['id'],_0x5aa431);}),tgBot[_0x5a2491(0x206)](_0x5a2491(0x25f),async _0x121e2e=>{const _0x21be79=_0x5a2491;updateSetting(_0x21be79(0x272),!![]),await sendTelegram(_0x121e2e[_0x21be79(0x23a)]['id'],_0x21be79(0x23f));}),tgBot[_0x5a2491(0x206)](_0x5a2491(0x1e2),async _0xd035bb=>{const _0x35e79c=_0x5a2491;await sendTelegram(_0xd035bb[_0x35e79c(0x23a)]['id'],'Notifications\x20disabled'),updateSetting('telegramEnabled',![]);}),tgBot[_0x5a2491(0x206)]('config',async _0x1805b5=>{const _0x3e823d=_0x5a2491,_0x1c93bf=Markup['inlineKeyboard']([Markup['button'][_0x3e823d(0x186)](_0x3e823d(0x21a),_0x3e823d(0x2ef)),Markup[_0x3e823d(0x17e)]['callback'](_0x3e823d(0x181),_0x3e823d(0x1d4)),Markup[_0x3e823d(0x17e)][_0x3e823d(0x186)](_0x3e823d(0x1fe),_0x3e823d(0x2c4))]);_0x1805b5['reply'](_0x3e823d(0x1f4),_0x1c93bf);}),tgBot[_0x5a2491(0x26b)](_0x5a2491(0x2ef),async _0x5f31a8=>{const _0x1f6a7e=_0x5a2491;_0x5f31a8['editMessageReplyMarkup'](),updateSetting(_0x1f6a7e(0x286),'orders'),updateSetting(_0x1f6a7e(0x272),!![]),await sendTelegram(_0x5f31a8[_0x1f6a7e(0x23a)]['id'],_0x1f6a7e(0x233));}),tgBot[_0x5a2491(0x26b)](_0x5a2491(0x1d4),async _0x33399e=>{const _0x28b5a6=_0x5a2491;_0x33399e['editMessageReplyMarkup'](),updateSetting(_0x28b5a6(0x286),_0x28b5a6(0x32f)),updateSetting('telegramEnabled',!![]),await sendTelegram(_0x33399e[_0x28b5a6(0x23a)]['id'],_0x28b5a6(0x33c));}),tgBot[_0x5a2491(0x26b)]('config_all',async _0x1a8f19=>{const _0x5bae8b=_0x5a2491;_0x1a8f19[_0x5bae8b(0x361)](),updateSetting(_0x5bae8b(0x286),'all'),updateSetting(_0x5bae8b(0x272),!![]),await sendTelegram(_0x1a8f19[_0x5bae8b(0x23a)]['id'],_0x5bae8b(0x306));}),tgBot[_0x5a2491(0x206)](_0x5a2491(0x16a),async _0x2b6823=>{const _0x16b9aa=_0x5a2491,_0x1718fe=getBotsWithMode();let _0x4302f0=_0x16b9aa(0x374);config[_0x16b9aa(0x356)](_0x293236=>{const _0x7e0a38=_0x16b9aa,_0x1ee426=_0x1718fe['find'](_0x307f69=>_0x307f69[_0x7e0a38(0x366)]==_0x293236['botID'])[_0x7e0a38(0x1df)];_0x4302f0+='Bot\x20'+_0x293236[_0x7e0a38(0x366)]+':\x20'+_0x293236[_0x7e0a38(0x16a)]+_0x7e0a38(0x194)+_0x1ee426+_0x7e0a38(0x194)+_0x293236[_0x7e0a38(0x324)]+'\x0a';}),_0x4302f0+='\x0a',_0x4302f0+=_0x16b9aa(0x2d4),_0x4302f0+=!settings[_0x16b9aa(0x272)]?'Notifications\x20disabled\x0a':_0x16b9aa(0x162),_0x4302f0+=settings[_0x16b9aa(0x272)]?settings['telegramEvents']==_0x16b9aa(0x19f)?_0x16b9aa(0x304):_0x16b9aa(0x296)+settings[_0x16b9aa(0x286)]+_0x16b9aa(0x32a):'',await sendTelegram(_0x2b6823[_0x16b9aa(0x23a)]['id'],_0x4302f0,{'parse_mode':_0x16b9aa(0x2fb)});}),tgBot[_0x5a2491(0x206)](_0x5a2491(0x305),async _0x5660b6=>{const _0x22e94e=_0x5a2491,_0x4d0705=getEnabledBots();if(_0x4d0705['length']==0x0)await sendTelegram(_0x5660b6[_0x22e94e(0x23a)]['id'],_0x22e94e(0x297));else{if(_0x4d0705[_0x22e94e(0x1bd)]>0x1)_0x4d0705[_0x22e94e(0x192)]({'botID':'all'});let _0x54d591=[],_0x36cfa5=[];const _0x58aad9=_0x4d0705[_0x22e94e(0x1bd)]%0x4==0x0||_0x4d0705[_0x22e94e(0x1bd)]%0x4==0x3||_0x4d0705[_0x22e94e(0x1bd)]%0x3==0x1?0x4:0x3;let _0xf461b2=0x0;_0x4d0705[_0x22e94e(0x356)]((_0x25a129,_0x198b2c)=>{const _0x7adf05=_0x22e94e;if(_0x198b2c%_0x58aad9==0x0)_0x36cfa5=[];_0x36cfa5[_0x7adf05(0x192)](Markup['button'][_0x7adf05(0x186)](_0x25a129[_0x7adf05(0x366)]==_0x7adf05(0x19f)?'All\x20bots':_0x7adf05(0x34f)+_0x25a129[_0x7adf05(0x366)],'restart_'+_0x25a129[_0x7adf05(0x366)])),_0x198b2c%_0x58aad9==0x0&&(_0x54d591[_0xf461b2]=_0x36cfa5,_0xf461b2++);});const _0x33f3cf=Markup['inlineKeyboard'](_0x54d591);_0x5660b6[_0x22e94e(0x171)](_0x22e94e(0x1eb),_0x33f3cf);}}),tgBot['action'](/restart_(.+)/,async _0x4e9342=>{const _0x22b4c7=_0x5a2491,_0x5e82d4=_0x4e9342[_0x22b4c7(0x175)][0x1];_0x4e9342[_0x22b4c7(0x361)](),_0x5e82d4==_0x22b4c7(0x19f)?config[_0x22b4c7(0x356)](_0x3e0454=>{restartBot(_0x3e0454['botID']);}):restartBot(_0x5e82d4);}),tgBot[_0x5a2491(0x206)]('on',async _0x3939ca=>{const _0x4c85ee=_0x5a2491,_0x45dfbc=getDisabledBots();if(_0x45dfbc['length']==0x0)await sendTelegram(_0x3939ca['chat']['id'],'All\x20bots\x20running\x20right\x20now');else{if(_0x45dfbc[_0x4c85ee(0x1bd)]>0x1)_0x45dfbc['push']({'botID':_0x4c85ee(0x19f)});let _0x3dcca1=[],_0x5e006a=[];const _0x5b45cb=_0x45dfbc['length']%0x4==0x0||_0x45dfbc[_0x4c85ee(0x1bd)]%0x4==0x3||_0x45dfbc['length']%0x3==0x1?0x4:0x3;let _0x18b1a3=0x0;_0x45dfbc[_0x4c85ee(0x356)]((_0xfc843d,_0x108be)=>{const _0x38da0e=_0x4c85ee;if(_0x108be%_0x5b45cb==0x0)_0x5e006a=[];_0x5e006a[_0x38da0e(0x192)](Markup[_0x38da0e(0x17e)][_0x38da0e(0x186)](_0xfc843d[_0x38da0e(0x366)]==_0x38da0e(0x19f)?'All\x20bots':_0x38da0e(0x34f)+_0xfc843d[_0x38da0e(0x366)],_0x38da0e(0x198)+_0xfc843d[_0x38da0e(0x366)])),_0x108be%_0x5b45cb==0x0&&(_0x3dcca1[_0x18b1a3]=_0x5e006a,_0x18b1a3++);});const _0x239f25=Markup[_0x4c85ee(0x2aa)](_0x3dcca1);_0x3939ca[_0x4c85ee(0x171)](_0x4c85ee(0x334),_0x239f25);}}),tgBot[_0x5a2491(0x26b)](/on_(.+)/,async _0x4f71bb=>{const _0x5840d2=_0x5a2491,_0x32822b=_0x4f71bb[_0x5840d2(0x175)][0x1];_0x4f71bb['editMessageReplyMarkup']();if(_0x32822b==_0x5840d2(0x19f)){const _0x43fabf=getDisabledBots();await sendTelegram(_0x4f71bb[_0x5840d2(0x23a)]['id'],_0x5840d2(0x261)),_0x43fabf['forEach'](_0x4afc35=>{const _0x2b12a1=_0x5840d2;if(_0x4afc35[_0x2b12a1(0x366)]!='all')toggleBot(_0x4afc35[_0x2b12a1(0x366)],toggleStatus(_0x4afc35[_0x2b12a1(0x366)]),_0x2b12a1(0x25d));});}else await sendTelegram(_0x4f71bb['chat']['id'],_0x5840d2(0x167)+_0x32822b),toggleBot(_0x32822b,toggleStatus(_0x32822b),_0x5840d2(0x25d));}),tgBot[_0x5a2491(0x206)](_0x5a2491(0x2d5),async _0x1c4ba1=>{const _0x192c20=_0x5a2491,_0x5f0970=getEnabledBots();if(_0x5f0970[_0x192c20(0x1bd)]==0x0)await sendTelegram(_0x1c4ba1[_0x192c20(0x23a)]['id'],_0x192c20(0x297));else{if(_0x5f0970[_0x192c20(0x1bd)]>0x1)_0x5f0970[_0x192c20(0x192)]({'botID':_0x192c20(0x19f)});let _0x3fdec2=[],_0xf13d73=[];const _0x8f97b9=_0x5f0970[_0x192c20(0x1bd)]%0x4==0x0||_0x5f0970[_0x192c20(0x1bd)]%0x4==0x3||_0x5f0970['length']%0x3==0x1?0x4:0x3;let _0x7d5bfd=0x0;_0x5f0970['forEach']((_0x1ee271,_0x1aa1f1)=>{const _0x57f0b6=_0x192c20;if(_0x1aa1f1%_0x8f97b9==0x0)_0xf13d73=[];_0xf13d73[_0x57f0b6(0x192)](Markup[_0x57f0b6(0x17e)]['callback'](_0x1ee271['botID']==_0x57f0b6(0x19f)?'All\x20bots':_0x57f0b6(0x34f)+_0x1ee271[_0x57f0b6(0x366)],'off_'+_0x1ee271[_0x57f0b6(0x366)])),_0x1aa1f1%_0x8f97b9==0x0&&(_0x3fdec2[_0x7d5bfd]=_0xf13d73,_0x7d5bfd++);});const _0x3ad0a0=Markup[_0x192c20(0x2aa)](_0x3fdec2);_0x1c4ba1[_0x192c20(0x171)](_0x192c20(0x188),_0x3ad0a0);}}),tgBot[_0x5a2491(0x26b)](/off_(.+)/,async _0x15c43a=>{const _0x59319b=_0x5a2491,_0x318573=_0x15c43a[_0x59319b(0x175)][0x1];_0x15c43a[_0x59319b(0x361)]();if(_0x318573==_0x59319b(0x19f)){const _0x430ddc=getEnabledBots();await sendTelegram(_0x15c43a[_0x59319b(0x23a)]['id'],_0x59319b(0x30f)),_0x430ddc['forEach'](_0x38d990=>{const _0x5b4910=_0x59319b;if(_0x38d990[_0x5b4910(0x366)]!=_0x5b4910(0x19f))toggleBot(_0x38d990[_0x5b4910(0x366)],toggleStatus(_0x38d990[_0x5b4910(0x366)]),_0x5b4910(0x25d));});}else await sendTelegram(_0x15c43a[_0x59319b(0x23a)]['id'],_0x59319b(0x266)+_0x318573),toggleBot(_0x318573,toggleStatus(_0x318573),_0x59319b(0x25d));}),tgBot[_0x5a2491(0x206)](_0x5a2491(0x235),async _0x5a5f4f=>{const _0x55ba78=_0x5a2491,_0x2c8416=getEnabledBots();if(_0x2c8416[_0x55ba78(0x1bd)]==0x0)await sendTelegram(_0x5a5f4f['chat']['id'],_0x55ba78(0x297));else{if(_0x2c8416['length']>0x1){let _0x5e4bda=[],_0xee2f6b=[];const _0x21b84e=_0x2c8416['length']%0x4==0x0||_0x2c8416['length']%0x4==0x3||_0x2c8416['length']%0x3==0x1?0x4:0x3;let _0x104e82=0x0;_0x2c8416['forEach']((_0x3b049d,_0x5d4e85)=>{const _0x3734f3=_0x55ba78;if(_0x5d4e85%_0x21b84e==0x0)_0xee2f6b=[];_0xee2f6b['push'](Markup[_0x3734f3(0x17e)][_0x3734f3(0x186)]('Bot\x20'+_0x3b049d['botID'],_0x3734f3(0x19d)+_0x3b049d[_0x3734f3(0x366)])),_0x5d4e85%_0x21b84e==0x0&&(_0x5e4bda[_0x104e82]=_0xee2f6b,_0x104e82++);});const _0x48a90b=Markup[_0x55ba78(0x2aa)](_0x5e4bda);_0x5a5f4f['reply'](_0x55ba78(0x344),_0x48a90b);}else{const _0x15fa3f=_0x2c8416[0x0][_0x55ba78(0x366)];if(pid[_0x15fa3f])pid[_0x15fa3f]['send']({'function':_0x55ba78(0x203),'args':null});}}}),tgBot[_0x5a2491(0x26b)](/metrics_(.+)/,async _0x193411=>{const _0x312d21=_0x5a2491,_0x4aa3f6=_0x193411[_0x312d21(0x175)][0x1];_0x193411[_0x312d21(0x361)]();if(pid[_0x4aa3f6])pid[_0x4aa3f6]['send']({'function':_0x312d21(0x203),'args':null});}),tgBot[_0x5a2491(0x206)](_0x5a2491(0x2b6),async _0x24bfc0=>{const _0x556857=_0x5a2491,_0x2cb564=getEnabledBots();if(_0x2cb564['length']==0x0)await sendTelegram(_0x24bfc0['chat']['id'],_0x556857(0x297));else{if(_0x2cb564[_0x556857(0x1bd)]>0x1){let _0x1b4fa9=[],_0x3cb711=[];const _0x457b67=_0x2cb564[_0x556857(0x1bd)]%0x4==0x0||_0x2cb564['length']%0x4==0x3||_0x2cb564[_0x556857(0x1bd)]%0x3==0x1?0x4:0x3;let _0x16df49=0x0;_0x2cb564[_0x556857(0x356)]((_0x203153,_0x3b1e49)=>{const _0x39ae2f=_0x556857;if(_0x3b1e49%_0x457b67==0x0)_0x3cb711=[];_0x3cb711[_0x39ae2f(0x192)](Markup[_0x39ae2f(0x17e)][_0x39ae2f(0x186)]('Bot\x20'+_0x203153['botID'],_0x39ae2f(0x315)+_0x203153[_0x39ae2f(0x366)])),_0x3b1e49%_0x457b67==0x0&&(_0x1b4fa9[_0x16df49]=_0x3cb711,_0x16df49++);});const _0x5040f6=Markup[_0x556857(0x2aa)](_0x1b4fa9);_0x24bfc0[_0x556857(0x171)]('For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?',_0x5040f6);}else{const _0x13f2b4=_0x2cb564[0x0]['botID'];if(pid[_0x13f2b4])pid[_0x13f2b4]['send']({'function':_0x556857(0x2ba),'args':null});}}}),tgBot[_0x5a2491(0x26b)](/portfolio_(.+)/,async _0x33cb2c=>{const _0x3e3f1e=_0x5a2491,_0x4b3381=_0x33cb2c[_0x3e3f1e(0x175)][0x1];_0x33cb2c[_0x3e3f1e(0x361)]();if(pid[_0x4b3381])pid[_0x4b3381][_0x3e3f1e(0x2ac)]({'function':_0x3e3f1e(0x2ba),'args':null});}),tgBot['command'](_0x5a2491(0x1bc),async _0x7cafca=>{const _0x5192c3=_0x5a2491,_0x1342da=_0x5192c3(0x1bc);await zipFiles(_0x1342da);const _0x44d18a=zippath+(_0x1342da+_0x5192c3(0x257));_0x7cafca['replyWithDocument']({'source':_0x44d18a})[_0x5192c3(0x246)](()=>{})[_0x5192c3(0x2cd)](_0x1b8022=>logger['debug'](_0x5192c3(0x2c5)+_0x1342da+_0x5192c3(0x24b),_0x1b8022));}),tgBot[_0x5a2491(0x206)](_0x5a2491(0x333),async _0x1ffaa8=>{const _0x2612b1=_0x5a2491,_0x323531=_0x2612b1(0x333);await backupConfigFiles(),await zipFiles(_0x323531);const _0x424d0d=zippath+(_0x323531+'.zip');_0x1ffaa8[_0x2612b1(0x23e)]({'source':_0x424d0d})['then'](()=>{})['catch'](_0x10d99c=>logger[_0x2612b1(0x25c)](_0x2612b1(0x2c5)+_0x323531+'\x20files\x20over\x20Telegram:',_0x10d99c));}),tgBot[_0x5a2491(0x206)](_0x5a2491(0x1d3),async _0x52a385=>{const _0x2a6cd4=_0x5a2491;await getMessages();if(!updateAvailable)await sendTelegram(_0x52a385['chat']['id'],_0x2a6cd4(0x2f1));else{if(!validInstallation)await sendTelegram(_0x52a385[_0x2a6cd4(0x23a)]['id'],_0x2a6cd4(0x24e));else{const _0x50aef0=Markup[_0x2a6cd4(0x2aa)]([Markup['button'][_0x2a6cd4(0x186)](_0x2a6cd4(0x298),_0x2a6cd4(0x1e8)),Markup[_0x2a6cd4(0x17e)]['callback']('No','update_no')]);_0x52a385[_0x2a6cd4(0x171)](_0x2a6cd4(0x24d),_0x50aef0);}}}),tgBot['action'](/update_(.+)/,async _0x52d3a5=>{const _0xb52fdc=_0x5a2491,_0x212db3=_0x52d3a5[_0xb52fdc(0x175)][0x1];_0x52d3a5[_0xb52fdc(0x361)](),_0x212db3==_0xb52fdc(0x282)&&(await sendTelegram(_0x52d3a5[_0xb52fdc(0x23a)]['id'],'Starting\x20Balance\x20Bot\x20update'),updateBB(_0xb52fdc(0x1d3))),_0x212db3=='no'&&await sendTelegram(_0x52d3a5[_0xb52fdc(0x23a)]['id'],_0xb52fdc(0x377));}),tgBot[_0x5a2491(0x206)](_0x5a2491(0x173),async _0x44635c=>{const _0x4cacd6=_0x5a2491;if(!validInstallation)await sendTelegram(_0x44635c[_0x4cacd6(0x23a)]['id'],_0x4cacd6(0x267));else{const _0x42fdc0=Markup[_0x4cacd6(0x2aa)]([Markup[_0x4cacd6(0x17e)]['callback'](_0x4cacd6(0x298),'reinstall_yes'),Markup[_0x4cacd6(0x17e)][_0x4cacd6(0x186)]('No',_0x4cacd6(0x2a8))]);_0x44635c['reply']('Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?',_0x42fdc0);}}),tgBot[_0x5a2491(0x26b)](/reinstall_(.+)/,async _0x218c7e=>{const _0x1f332f=_0x5a2491,_0x142178=_0x218c7e[_0x1f332f(0x175)][0x1];_0x218c7e[_0x1f332f(0x361)](),_0x142178==_0x1f332f(0x282)&&(await sendTelegram(_0x218c7e['chat']['id'],'Starting\x20Balance\x20Bot\x20reinstallation'),updateBB(_0x1f332f(0x173))),_0x142178=='no'&&await sendTelegram(_0x218c7e[_0x1f332f(0x23a)]['id'],'Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled');}),tgBot[_0x5a2491(0x206)]('toggle',async _0x4c7b45=>{const _0x3b6baa=_0x5a2491,_0x320bce=getBotsWithMode();if(_0x320bce[_0x3b6baa(0x1bd)]==0x0)await sendTelegram(_0x4c7b45['chat']['id'],_0x3b6baa(0x297));else{let _0x294284=[],_0x4a0646=[];const _0x4adc1d=0x2;let _0x78d0ae=0x0;_0x320bce['forEach']((_0x4885cf,_0x5f343c)=>{const _0xa6466c=_0x3b6baa;if(_0x5f343c%_0x4adc1d==0x0)_0x4a0646=[];_0x4a0646['push'](Markup[_0xa6466c(0x17e)]['callback']('Bot\x20'+_0x4885cf['botID']+'\x20('+_0x4885cf[_0xa6466c(0x1df)]+')',_0xa6466c(0x22a)+_0x4885cf[_0xa6466c(0x366)])),_0x5f343c%_0x4adc1d==0x0&&(_0x294284[_0x78d0ae]=_0x4a0646,_0x78d0ae++);});const _0x2b5f46=Markup[_0x3b6baa(0x2aa)](_0x294284);_0x4c7b45[_0x3b6baa(0x171)](_0x3b6baa(0x319),_0x2b5f46);}}),tgBot[_0x5a2491(0x26b)](/toggle_(.+)/,async _0x1783e3=>{const _0x50f432=_0x5a2491,_0x4b264b=_0x1783e3['match'][0x1];_0x1783e3['editMessageReplyMarkup']();const _0x5582d7=getBotsWithMode(),_0x2e4e2b=_0x5582d7[_0x50f432(0x275)](_0x386377=>_0x386377[_0x50f432(0x366)]==_0x4b264b),_0x291768=_0x2e4e2b[_0x50f432(0x1df)]==_0x50f432(0x2e8)?_0x50f432(0x214):'auto';await sendTelegram(_0x1783e3['chat']['id'],_0x50f432(0x327)+_0x4b264b+_0x50f432(0x28a)+_0x291768+_0x50f432(0x32b)),toggleBotMode(_0x4b264b);}),tgBot[_0x5a2491(0x206)](_0x5a2491(0x225),async _0x17c821=>{const _0x3039aa=_0x5a2491;let _0x523e8a='';config['forEach'](_0x3cc19a=>{const _0x1da161=_0x5093;_0x523e8a+=_0x1da161(0x34f)+_0x3cc19a[_0x1da161(0x366)]+':\x20'+_0x3cc19a['botname']+'\x0a';}),await sendTelegram(_0x17c821[_0x3039aa(0x23a)]['id'],_0x523e8a,{'parse_mode':_0x3039aa(0x2fb)});}),tgBot['command'](_0x5a2491(0x1c3),async _0x137052=>{const _0x3bd56c=_0x5a2491;await sendTelegram(_0x137052[_0x3bd56c(0x23a)]['id'],_0x81ab81);}),process['once'](_0x5a2491(0x1f7),()=>tgBot['stop'](_0x5a2491(0x1f7))),process[_0x5a2491(0x34b)](_0x5a2491(0x260),()=>tgBot[_0x5a2491(0x25e)](_0x5a2491(0x260))),tgBot['launch']();}function disableTelegram(){tgBot&&tgBot['stop']();}async function sendTelegram(_0x41e86e,_0x21cc27,_0x49a428){const _0x144b64=_0x133b29;_0x49a428={..._0x49a428,'disable_web_page_preview':!![]};try{await tgBot[_0x144b64(0x2a0)]['sendMessage'](_0x41e86e,_0x21cc27,_0x49a428);}catch(_0x19df34){logger['debug'](_0x144b64(0x195),_0x19df34);}}async function sendTelegramBot(_0x34d20c,_0x257b30){const _0x5d07e7=_0x133b29;if(settings['telegramEnabled']){if(settings[_0x5d07e7(0x286)]==_0x5d07e7(0x19f)||(_0x257b30[_0x5d07e7(0x1e6)]==_0x5d07e7(0x22d)||_0x257b30['type']==_0x5d07e7(0x21d)||_0x257b30['type']==_0x5d07e7(0x1e7))&&settings[_0x5d07e7(0x286)]==_0x5d07e7(0x32f)||_0x257b30['type']==_0x5d07e7(0x2bf)&&settings[_0x5d07e7(0x286)]==_0x5d07e7(0x1d1)){if(tgBot&&settings[_0x5d07e7(0x212)]){if(_0x257b30[_0x5d07e7(0x302)])await sendTelegram(settings[_0x5d07e7(0x212)],_0x257b30[_0x5d07e7(0x25a)]+_0x5d07e7(0x35b)+_0x257b30[_0x5d07e7(0x1a3)]);else await sendTelegram(settings['telegramChatId'],_0x5d07e7(0x34f)+_0x34d20c+_0x5d07e7(0x35b)+_0x257b30[_0x5d07e7(0x1a3)]);}}}}async function sendTelegramMsg(_0x44b6a3,_0x59401a=_0x133b29(0x2fb)){const _0x3043cd=_0x133b29;return settings[_0x3043cd(0x272)]&&tgBot&&settings[_0x3043cd(0x212)]?(await sendTelegram(settings[_0x3043cd(0x212)],_0x44b6a3,{'parse_mode':_0x59401a}),!![]):![];}function getDeviceWithIp(_0x198147){const _0x61548d=_0x133b29;return devices[_0x61548d(0x275)](_0x47d0ce=>_0x47d0ce['ip']===_0x198147);}async function temporaryAccess2FA(_0x1aaa9e,_0x4150ea){const _0x1c90f7=_0x133b29;let _0x52a39c=new Date(),_0x227a13=![];if(lastIpApproval){if(_0x52a39c-lastIpApproval<0x1388)_0x227a13=!![];}lastIpApproval=new Date();if(_0x227a13)return;if(tgBot&&settings['telegramChatId']){const _0x2da15f=uuidRandom();tmpStorage[_0x2da15f]={'uuid':_0x1aaa9e,'externalip':_0x4150ea};const _0x3310bf=Markup[_0x1c90f7(0x2aa)]([Markup[_0x1c90f7(0x17e)]['callback']('5\x20min',_0x1c90f7(0x1e9)+_0x2da15f),Markup[_0x1c90f7(0x17e)][_0x1c90f7(0x186)](_0x1c90f7(0x1d8),_0x1c90f7(0x1ce)+_0x2da15f),Markup[_0x1c90f7(0x17e)]['callback'](_0x1c90f7(0x18e),_0x1c90f7(0x211)+_0x2da15f),Markup[_0x1c90f7(0x17e)]['callback'](_0x1c90f7(0x312),'tempaccess_reject_'+_0x2da15f)]);await sendTelegram(settings[_0x1c90f7(0x212)],'Allow\x20temporary\x20access\x20from\x20IP\x20address\x20'+normalizeIP(_0x4150ea)[_0x1c90f7(0x2b4)]+'\x20?',_0x3310bf),tgBot[_0x1c90f7(0x26b)](/tempaccess_(.+)_(.+)/,async _0x30532c=>{const _0x519522=_0x1c90f7,_0x367139=_0x30532c[_0x519522(0x175)][0x1],_0x1058ee=_0x30532c[_0x519522(0x175)][0x2],{uuid:_0x4a553e,externalip:_0x316173}=tmpStorage[_0x1058ee];delete tmpStorage[_0x1058ee],_0x30532c['editMessageReplyMarkup'](),devices[_0x4a553e][_0x519522(0x1ed)]={'clientip':_0x316173,'timestamp':new Date()[_0x519522(0x1c1)](),'expiry':_0x367139},_0x367139!=_0x519522(0x312)?(await sendTelegram(_0x30532c[_0x519522(0x23a)]['id'],_0x519522(0x1cc)+_0x367139+'\x20minutes',{'parse_mode':_0x519522(0x2fb)}),io['to'](_0x4a553e)[_0x519522(0x354)](_0x519522(0x16a),{'access':{'allow':![],'reason':_0x519522(0x2a9),'token':null}})):(await sendTelegram(_0x30532c[_0x519522(0x23a)]['id'],_0x519522(0x285)),io['to'](_0x4a553e)[_0x519522(0x354)](_0x519522(0x16a),{'access':{'allow':![],'reason':_0x519522(0x2f6),'token':null}}));});}}async function loginAccess2FA(_0x31c3af,_0x238821){const _0x4053de=_0x133b29;if(tgBot&&settings[_0x4053de(0x212)]){const _0x469b39=uuidRandom();tmpStorage[_0x469b39]={'uuid':_0x31c3af,'externalip':_0x238821};const _0x3bd685=Markup['inlineKeyboard']([Markup[_0x4053de(0x17e)]['callback'](_0x4053de(0x216),_0x4053de(0x29d)+loginExpiry+'_'+_0x469b39),Markup[_0x4053de(0x17e)]['callback'](_0x4053de(0x312),'login2fa_reject_'+_0x469b39)]);await sendTelegram(settings[_0x4053de(0x212)],_0x4053de(0x1ee)+normalizeIP(_0x238821)[_0x4053de(0x2b4)]+'\x20?',_0x3bd685),tgBot[_0x4053de(0x26b)](/login2fa_(.+)_(.+)/,async _0x308ab3=>{const _0x3c18ff=_0x4053de,_0x1ff6bb=_0x308ab3['match'][0x1],_0x2695d0=_0x308ab3[_0x3c18ff(0x175)][0x2],{uuid:_0x4f0e9b,externalip:_0x5b69dc}=tmpStorage[_0x2695d0];delete tmpStorage[_0x2695d0],_0x308ab3['editMessageReplyMarkup'](),devices[_0x4f0e9b][_0x3c18ff(0x2c9)]={'clientip':_0x5b69dc,'timestamp':new Date()['getTime'](),'expiry':_0x1ff6bb},_0x1ff6bb!=_0x3c18ff(0x312)?(await sendTelegram(_0x308ab3[_0x3c18ff(0x23a)]['id'],'Login\x20accepted',{'parse_mode':_0x3c18ff(0x2fb)}),io['to'](_0x4f0e9b)[_0x3c18ff(0x354)](_0x3c18ff(0x16a),{'access':{'allow':![],'reason':_0x3c18ff(0x2a9),'token':null}})):(await sendTelegram(_0x308ab3[_0x3c18ff(0x23a)]['id'],_0x3c18ff(0x262)),io['to'](_0x4f0e9b)[_0x3c18ff(0x354)](_0x3c18ff(0x16a),{'access':{'allow':![],'reason':_0x3c18ff(0x1fc),'token':null}}));});}}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x2c4cfa=_0x133b29;return dbConfig[_0x2c4cfa(0x33f)](_0x2c4cfa(0x24f))[_0x2c4cfa(0x16f)](_0x2c4cfa(0x366))['filter']({'status':_0x2c4cfa(0x2ff)})[_0x2c4cfa(0x1ac)]()||[];}function getDisabledBots(){const _0xbf1345=_0x133b29;return dbConfig['get'](_0xbf1345(0x24f))[_0xbf1345(0x16f)](_0xbf1345(0x366))[_0xbf1345(0x28c)]({'status':_0xbf1345(0x213)})[_0xbf1345(0x1ac)]()||[];}function getBotAttributes(_0x489c79){const _0x519e52=_0x133b29;let _0x42643c={};const _0x188c63=configpath+'bot-'+_0x489c79+_0x519e52(0x205),_0x1b2492=fs[_0x519e52(0x199)](_0x188c63);if(_0x1b2492){const _0x30ee0c=fs['readFileSync'](_0x188c63);try{const _0x30e904=JSON['parse'](_0x30ee0c),_0x5b1d3f=_0x30e904?_0x30e904[_0x519e52(0x1f3)][0x0][_0x519e52(0x16c)]:![];_0x42643c[_0x519e52(0x1df)]=_0x5b1d3f?'auto':_0x519e52(0x214),_0x42643c[_0x519e52(0x25a)]=_0x30e904?_0x30e904['bot'][0x0][_0x519e52(0x25a)]:'Bot\x20'+_0x489c79;}catch(_0x3ac8e6){_0x42643c['mode']=_0x519e52(0x214),_0x42643c[_0x519e52(0x25a)]='Bot\x20'+_0x489c79;}}else _0x42643c[_0x519e52(0x1df)]=_0x519e52(0x214),_0x42643c['botname']=_0x519e52(0x34f)+_0x489c79;return _0x42643c;}function getBotsWithMode(){const _0x460ff6=_0x133b29,_0x3e85de=dbConfig[_0x460ff6(0x33f)]('bots')[_0x460ff6(0x16f)]('botID')[_0x460ff6(0x1ac)]()||[];return _0x3e85de[_0x460ff6(0x356)](_0x4aca96=>{const _0xd0def9=_0x460ff6;let _0xb8e008=getBotAttributes(_0x4aca96[_0xd0def9(0x366)]);_0x4aca96[_0xd0def9(0x1df)]=_0xb8e008['mode'];}),_0x3e85de;}function getBotExchanges(){const _0x460e0d=_0x133b29;let _0x2bb023=[];const _0x34ca04=dbConfig[_0x460e0d(0x33f)]('bots')[_0x460e0d(0x16f)](_0x460e0d(0x366))[_0x460e0d(0x1ac)]()||[];_0x34ca04[_0x460e0d(0x356)](_0x1f1340=>{const _0x24bc62=_0x460e0d;if(_0x1f1340[_0x24bc62(0x16a)]==_0x24bc62(0x2ff)){const _0x48a7f6=configpath+_0x24bc62(0x179)+_0x1f1340[_0x24bc62(0x366)]+_0x24bc62(0x205),_0x278501=fs['existsSync'](_0x48a7f6);let _0x1307cf;if(_0x278501){const _0x23f6e0=fs[_0x24bc62(0x2d0)](_0x48a7f6);try{const _0x5d9389=JSON[_0x24bc62(0x33d)](_0x23f6e0);_0x1307cf=_0x5d9389?_0x5d9389['bot'][0x0][_0x24bc62(0x169)]:null;}catch(_0x4b1d86){}}if(_0x1307cf)_0x2bb023[_0x24bc62(0x192)](_0x1307cf);}});const _0x108f7b=[...new Set(_0x2bb023)][_0x460e0d(0x274)]();return _0x108f7b;}async function initUser(){const _0x22f22b=_0x133b29;if(!settings[_0x22f22b(0x27b)]){const _0x3c2c86=uuidRandom();mixpanel['alias'](_0x3c2c86),updateSetting('userid',_0x3c2c86);}}async function initSecure(){const _0x5b49fe=_0x133b29;let _0x95ccd7=getSecure();if(!_0x95ccd7['hasOwnProperty'](_0x5b49fe(0x2fa))){let _0x179da1=await generateKeys();_0x95ccd7['publicKey']=_0x179da1['publicKey'],_0x95ccd7[_0x5b49fe(0x21f)]=_0x179da1[_0x5b49fe(0x21f)],_0x95ccd7[_0x5b49fe(0x2fa)]=crypto[_0x5b49fe(0x256)](0x20)[_0x5b49fe(0x309)](_0x5b49fe(0x27a));;storeSecure(_0x95ccd7);}}function getSettings(){const _0x239bb5=_0x133b29;return dbSettings[_0x239bb5(0x33f)](_0x239bb5(0x184))[_0x239bb5(0x1ac)]()||{};}function getSecure(){const _0x2a04cb=_0x133b29;return dbSecure[_0x2a04cb(0x33f)](_0x2a04cb(0x369))['value']()||{};}function getBlacklist(){const _0x5c617b=_0x133b29;return dbSecure[_0x5c617b(0x33f)](_0x5c617b(0x273))['value']()||[];}function broadcastToBots(_0x39e0b3,_0x513fa7){config['forEach'](_0x1cdd9f=>{const _0x4e14de=_0x5093;if(_0x1cdd9f['status']==_0x4e14de(0x2ff)&&_0x1cdd9f[_0x4e14de(0x324)]==_0x4e14de(0x2f4)||_0x1cdd9f[_0x4e14de(0x16a)]==_0x4e14de(0x1a7)&&_0x1cdd9f['live']==_0x4e14de(0x2f4)){if(pid[_0x1cdd9f[_0x4e14de(0x366)]])pid[_0x1cdd9f['botID']][_0x4e14de(0x2ac)]({[_0x39e0b3]:_0x513fa7});}});}async function storeSettings(_0x383854,_0x32a568=![]){const _0x4123de=_0x133b29;_0x383854={...settings,..._0x383854};if(_0x32a568&&_0x383854[_0x4123de(0x1d2)]!=_0x4123de(0x33b)&&_0x383854[_0x4123de(0x1d2)]!=_0x4123de(0x221)&&_0x383854[_0x4123de(0x1d2)]!=''){const _0x5f1e31=decryptRSA(secure[_0x4123de(0x21f)],_0x383854[_0x4123de(0x1d2)])['split'](_0x4123de(0x1f8))[0x0],_0x4310f9=bcrypt['hashSync'](_0x5f1e31,saltRounds);_0x383854={..._0x383854,'bbPassword':_0x4310f9};}if(_0x32a568&&_0x383854[_0x4123de(0x264)]!='************'&&_0x383854[_0x4123de(0x264)]!=_0x4123de(0x221)&&_0x383854['telegramToken']!=''){const _0x2b19df=decryptRSA(secure['privateKey'],_0x383854['telegramToken'])[_0x4123de(0x166)]('|@|')[0x0];_0x383854={..._0x383854,'telegramToken':_0x2b19df};}if(_0x32a568&&_0x383854[_0x4123de(0x172)]!=_0x4123de(0x33b)&&_0x383854[_0x4123de(0x172)]!=_0x4123de(0x221)&&_0x383854[_0x4123de(0x172)]!=''){const _0x272949=decryptRSA(secure[_0x4123de(0x21f)],_0x383854[_0x4123de(0x172)])[_0x4123de(0x166)](_0x4123de(0x1f8))[0x0];_0x383854={..._0x383854,'marketcapApi':_0x272949};}const _0x5e6dda=_0x383854[_0x4123de(0x264)]!=_0x4123de(0x33b)&&_0x383854[_0x4123de(0x264)]!=settings[_0x4123de(0x264)]||_0x383854[_0x4123de(0x277)]!=settings[_0x4123de(0x277)],_0x449237=_0x383854['telegramToken']==''||_0x383854[_0x4123de(0x277)]=='',_0x1b1830=_0x383854[_0x4123de(0x172)]&&_0x383854[_0x4123de(0x172)]!=_0x4123de(0x33b)&&_0x383854[_0x4123de(0x172)]!=settings[_0x4123de(0x172)];_0x5e6dda&&(_0x383854[_0x4123de(0x212)]=null,_0x383854[_0x4123de(0x286)]=_0x4123de(0x19f));for(const [_0x52ec34,_0x5550b0]of Object['entries'](_0x383854)){if(_0x52ec34==_0x4123de(0x264)&&_0x5550b0=='************'){_0x383854[_0x4123de(0x264)]=settings[_0x4123de(0x264)];continue;};if(_0x52ec34=='bbPassword'&&_0x5550b0==_0x4123de(0x33b)){_0x383854[_0x4123de(0x1d2)]=settings['bbPassword'];continue;};if(_0x52ec34=='marketcapApi'&&_0x5550b0==_0x4123de(0x33b)){_0x383854[_0x4123de(0x172)]=settings['marketcapApi'];continue;};dbSettings[_0x4123de(0x17d)](_0x4123de(0x17b)+_0x52ec34,_0x5550b0)[_0x4123de(0x1b7)]();}settings=_0x383854,io['to']('botmanager')[_0x4123de(0x354)](_0x4123de(0x184),cleanSettings()),broadcastToBots('timeshift',settings['timeshift']),broadcastToBots('onepagemode',settings['onepagemode']),broadcastToBots('marketcapApi',settings['marketcapApi']);if(_0x5e6dda&&!_0x449237)initTelegram();_0x5e6dda&&_0x449237&&(updateSetting('telegramChatId',null),disableTelegram()),getAllClients()['forEach'](_0xebfbc2=>{const _0x540c41=_0x4123de;getSocket(_0xebfbc2['id'])[_0x540c41(0x354)](_0x540c41(0x16a),{'access':{'allow':![],'reason':_0x540c41(0x2a9),'token':null}});}),_0x1b1830&&(await sleep(0xbb8),testMarketcapApi(_0x383854[_0x4123de(0x172)]));}async function testMarketcapApi(_0x355057){const _0x30972a=_0x133b29,_0x2d344d=['BCT',_0x30972a(0x2be)];try{await axios[_0x30972a(0x33f)](_0x30972a(0x2ec),{'headers':{'X-CMC_PRO_API_KEY':_0x355057},'params':{'symbol':_0x2d344d[_0x30972a(0x309)]()}});}catch(_0x5bee00){_0x5bee00['toString']()['includes'](_0x30972a(0x1e5))?(io['to']('botmanager')['emit']('notification','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager'),logger[_0x30972a(0x17c)](_0x30972a(0x291))):(io['to'](_0x30972a(0x32d))[_0x30972a(0x354)](_0x30972a(0x1af),'CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20see\x20logs\x20for\x20details'),logger[_0x30972a(0x17c)]('CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20see\x20logs\x20for\x20details'),logger[_0x30972a(0x25c)](_0x30972a(0x2b7),_0x5bee00[_0x30972a(0x309)]()+_0x30972a(0x1db)+_0x5bee00[_0x30972a(0x2fc)]));return;}logger[_0x30972a(0x25c)]('CoinMarketCap\x20API\x20key\x20validated');}function updateSetting(_0x3d2ebc,_0x34f97d){const _0x1ece43=_0x133b29;dbSettings['set'](_0x1ece43(0x17b)+_0x3d2ebc,_0x34f97d)[_0x1ece43(0x1b7)](),settings=getSettings(),io['to']('botmanager')[_0x1ece43(0x354)](_0x1ece43(0x184),cleanSettings());}function storeSecure(_0x5e799c){const _0x198c95=_0x133b29;dbSecure[_0x198c95(0x33f)](_0x198c95(0x369))['push'](_0x5e799c)[_0x198c95(0x1b7)](),secure=_0x5e799c;}function addBlacklist(_0x5c2ce1){const _0x50a07e=_0x133b29;cleanBlacklist();let _0x916871;devices[_0x5c2ce1][_0x50a07e(0x1ed)]?_0x916871=Math[_0x50a07e(0x1dc)](devices[_0x5c2ce1][_0x50a07e(0x1ed)][_0x50a07e(0x268)],loginExpiry):_0x916871=loginExpiry,dbSecure[_0x50a07e(0x33f)]('blacklist')[_0x50a07e(0x192)]({'expiry':new Date()[_0x50a07e(0x1c1)]()+_0x916871*0x3c*0x3e8,'token':devices[_0x5c2ce1][_0x50a07e(0x26a)][_0x50a07e(0x1a5)]})[_0x50a07e(0x1b7)](),blacklist=dbSecure[_0x50a07e(0x33f)](_0x50a07e(0x273))[_0x50a07e(0x1ac)]();}function cleanBlacklist(){const _0x2c32d5=_0x133b29;let _0x5dd350=dbSecure[_0x2c32d5(0x33f)]('blacklist')[_0x2c32d5(0x363)]()[_0x2c32d5(0x1ac)](),_0x8e8bcc=new Date()['getTime']();_0x5dd350['forEach'](_0x5d18e6=>{const _0x5d32f5=_0x2c32d5;_0x5d18e6['expiry']<_0x8e8bcc&&dbSecure[_0x5d32f5(0x33f)](_0x5d32f5(0x273))[_0x5d32f5(0x329)]({'expiry':_0x5d18e6[_0x5d32f5(0x268)]})[_0x5d32f5(0x1b7)]();});}function initStates(){const _0x1e47d0=_0x133b29;let _0x353ea4=getConfiguration();_0x353ea4[_0x1e47d0(0x356)](_0x5a50f9=>{const _0x5c22ec=_0x1e47d0;_0x5a50f9[_0x5c22ec(0x324)]=_0x5c22ec(0x25d);}),storeConfiguration(_0x353ea4);}async function generateKeys(){const _0x3ca2d1=_0x133b29,_0x44d7a6=forge['pki'][_0x3ca2d1(0x358)][_0x3ca2d1(0x231)]({'bits':0x1000,'e':0x10001}),_0x17e7b2=forge[_0x3ca2d1(0x300)][_0x3ca2d1(0x375)](_0x44d7a6[_0x3ca2d1(0x21f)]),_0x118639=forge[_0x3ca2d1(0x300)][_0x3ca2d1(0x187)](_0x44d7a6[_0x3ca2d1(0x342)]);return{'privateKey':_0x17e7b2,'publicKey':_0x118639};}async function oneTimeMigration(){const _0x437185=_0x133b29;let _0x35b917=getSettings(),_0x543c32=![];!_0x35b917['hasOwnProperty']('lastmsgtelegram')&&(_0x35b917[_0x437185(0x295)]=0x0,_0x543c32=!![]);!_0x35b917['hasOwnProperty'](_0x437185(0x18b))&&(_0x35b917[_0x437185(0x18b)]=0x0,_0x543c32=!![]);!_0x35b917[_0x437185(0x307)](_0x437185(0x2f9))&&(_0x35b917[_0x437185(0x2f9)]=_0x437185(0x28b),_0x543c32=!![]);!_0x35b917['hasOwnProperty'](_0x437185(0x197))&&(_0x35b917[_0x437185(0x197)]=![],_0x543c32=!![]);!_0x35b917[_0x437185(0x307)](_0x437185(0x172))&&(_0x35b917[_0x437185(0x172)]='',_0x543c32=!![]);if(_0x543c32)storeSettings(_0x35b917);try{fs[_0x437185(0x323)](configbackuppath,{'withFileTypes':!![]})['forEach'](_0x109eee=>{const _0x255e66=_0x437185;if(!_0x109eee['isDirectory']()){if(!_0x109eee[_0x255e66(0x22f)][_0x255e66(0x190)]('backup-full@'))fs[_0x255e66(0x208)](configbackuppath+_0x109eee[_0x255e66(0x22f)]);}else fs['rmSync'](configbackuppath+_0x109eee[_0x255e66(0x22f)],{'recursive':!![]});});}catch(_0x594d40){logger['debug'](_0x437185(0x34a),_0x594d40);}}function storeConfiguration(_0x3dfa8d){const _0x368068=_0x133b29;dbConfig[_0x368068(0x33f)](_0x368068(0x24f))[_0x368068(0x329)]()['write'](),dbConfig[_0x368068(0x33f)]('bots')[_0x368068(0x192)](..._0x3dfa8d)[_0x368068(0x1b7)](),config=_0x3dfa8d;}async function resetPassword(){const _0x5cce0c=_0x133b29;if(tgBot&&settings[_0x5cce0c(0x212)]){const _0x3c91aa=Markup[_0x5cce0c(0x2aa)]([Markup[_0x5cce0c(0x17e)][_0x5cce0c(0x186)]('yes','resetpw_yes'),Markup[_0x5cce0c(0x17e)][_0x5cce0c(0x186)]('no',_0x5cce0c(0x2e5))]);await sendTelegram(settings[_0x5cce0c(0x212)],_0x5cce0c(0x1f2),_0x3c91aa),tgBot[_0x5cce0c(0x26b)](/resetpw_(.+)/,async _0x2ec4f8=>{const _0x1718d1=_0x5cce0c,_0x17c168=_0x2ec4f8[_0x1718d1(0x175)][0x1];_0x2ec4f8['editMessageReplyMarkup']();if(_0x17c168!='no'){const _0xb3e6e7=0xf,_0x2998c3=_0x1718d1(0x249),_0x3cbc0b=Array['from'](crypto['randomFillSync'](new Uint32Array(_0xb3e6e7)))[_0x1718d1(0x1ff)](_0x2dab49=>_0x2998c3[_0x2dab49%_0x2998c3['length']])['join'](''),_0x2b0bfd=bcrypt[_0x1718d1(0x284)](_0x3cbc0b,saltRounds);storeSettings({'bbPassword':_0x2b0bfd}),await sendTelegram(_0x2ec4f8['chat']['id'],'Password\x20has\x20been\x20reset\x20to:\x20'+_0x3cbc0b,{'parse_mode':_0x1718d1(0x2fb)});}else await sendTelegram(_0x2ec4f8['chat']['id'],_0x1718d1(0x182));});}}async function confirmRestore(_0x14b8ad,_0xd2d5bb){const _0x263cd5=_0x133b29;io['to'](_0x263cd5(0x32d))[_0x263cd5(0x354)](_0x263cd5(0x1af),'Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot',_0x263cd5(0x1e7));if(tgBot&&settings[_0x263cd5(0x212)]){const _0x471b51=uuidRandom();tmpStorage[_0x471b51]={'path':_0x14b8ad,'filename':_0xd2d5bb};const _0x16957e=Markup['inlineKeyboard']([Markup['button'][_0x263cd5(0x186)](_0x263cd5(0x282),_0x263cd5(0x328)+_0x471b51),Markup[_0x263cd5(0x17e)]['callback']('no',_0x263cd5(0x22e)+_0x471b51)]);await sendTelegram(settings[_0x263cd5(0x212)],_0x263cd5(0x287),_0x16957e),tgBot[_0x263cd5(0x26b)](/restore_(.+)_(.+)/,async _0x59a42b=>{const _0x5d5a07=_0x263cd5,_0xbe1de=_0x59a42b[_0x5d5a07(0x175)][0x1],_0x441676=_0x59a42b[_0x5d5a07(0x175)][0x2],{path:_0x3f87a6,filename:_0x3bc2c4}=tmpStorage[_0x441676];delete tmpStorage[_0x441676],_0x59a42b[_0x5d5a07(0x361)](),_0xbe1de=='yes'?(logger['debug'](_0x5d5a07(0x2d6)),await sendTelegram(_0x59a42b[_0x5d5a07(0x23a)]['id'],_0x5d5a07(0x2ae),{'parse_mode':_0x5d5a07(0x2fb)}),unzipFile(_0x3f87a6,_0x3bc2c4)):(logger[_0x5d5a07(0x25c)]('Restore\x20process\x20aborted'),await sendTelegram(_0x59a42b['chat']['id'],'Restore\x20process\x20aborted'));});}}function getServerTime(){const _0x27de00=_0x133b29,_0x48f573=new Date();return _0x48f573[_0x27de00(0x1de)]()+'/'+(_0x48f573[_0x27de00(0x29c)]()+0x1)[_0x27de00(0x309)]()[_0x27de00(0x370)](0x2,'0')+'/'+_0x48f573[_0x27de00(0x244)]()[_0x27de00(0x309)]()[_0x27de00(0x370)](0x2,'0')+'\x20'+_0x48f573[_0x27de00(0x317)]()[_0x27de00(0x309)]()[_0x27de00(0x370)](0x2,'0')+':'+_0x48f573[_0x27de00(0x294)]()[_0x27de00(0x309)]()[_0x27de00(0x370)](0x2,'0')+':'+_0x48f573[_0x27de00(0x2c2)]()[_0x27de00(0x309)]()[_0x27de00(0x370)](0x2,'0');}function getTimeStamp(){const _0x381ce1=_0x133b29,_0x514b8b=shiftedTime();return _0x514b8b[_0x381ce1(0x1de)]()+'/'+(_0x514b8b[_0x381ce1(0x29c)]()+0x1)[_0x381ce1(0x309)]()[_0x381ce1(0x370)](0x2,'0')+'/'+_0x514b8b[_0x381ce1(0x244)]()[_0x381ce1(0x309)]()[_0x381ce1(0x370)](0x2,'0')+'\x20'+_0x514b8b[_0x381ce1(0x317)]()['toString']()[_0x381ce1(0x370)](0x2,'0')+':'+_0x514b8b['getMinutes']()[_0x381ce1(0x309)]()[_0x381ce1(0x370)](0x2,'0')+':'+_0x514b8b[_0x381ce1(0x2c2)]()['toString']()['padStart'](0x2,'0');}function getCleanTimeStamp(){const _0x3d2b9b=_0x133b29,_0x2130bf=shiftedTime();return _0x2130bf[_0x3d2b9b(0x1de)]()+(_0x2130bf[_0x3d2b9b(0x29c)]()+0x1)[_0x3d2b9b(0x309)]()[_0x3d2b9b(0x370)](0x2,'0')+_0x2130bf['getDate']()[_0x3d2b9b(0x309)]()['padStart'](0x2,'0')+'-'+_0x2130bf['getHours']()[_0x3d2b9b(0x309)]()[_0x3d2b9b(0x370)](0x2,'0')+_0x2130bf[_0x3d2b9b(0x294)]()[_0x3d2b9b(0x309)]()[_0x3d2b9b(0x370)](0x2,'0')+_0x2130bf[_0x3d2b9b(0x2c2)]()[_0x3d2b9b(0x309)]()['padStart'](0x2,'0');}function shiftedTime(){const _0xcb149e=_0x133b29,_0x396601=new Date();let _0x1121e9=_0x396601;if(settings['timeshift']&&settings[_0xcb149e(0x16b)]!==0x0)_0x1121e9=fns[_0xcb149e(0x1ec)](_0x396601,{'hours':settings[_0xcb149e(0x16b)]});return _0x1121e9;}async function startScheduler(){const _0x2da0bc=_0x133b29,_0x2417df=new Date()[_0x2da0bc(0x2e6)](),_0x5a6dec=shiftedTime()[_0x2da0bc(0x317)]();_0x5a6dec==0x4&&backupConfigFiles(),_0x5a6dec==0x0&&(rotateLogFiles(),logger[_0x2da0bc(0x25c)]('--------------------------------------'),logger['debug']('Running\x20#RED#Balance\x20Bot\x20v'+serverversion+_0x2da0bc(0x293)+(environment==_0x2da0bc(0x2f2)?_0x2da0bc(0x2cf):'')),logger[_0x2da0bc(0x25c)](_0x2da0bc(0x248))),_0x2417df%0x6==0x0&&triggerAnalytics(),_0x2417df%0x6==0x0&&getMessages(),await sleep(schedulerInterval),startScheduler();}async function restoreBackupFile(_0xaa8513){const _0x372f8c=_0x133b29;logger['debug'](_0x372f8c(0x355)+_0xaa8513);const _0x1302cc=getBotsWithMode();_0x1302cc[_0x372f8c(0x1bd)]>0x0?confirmRestore(configbackuppath,_0xaa8513):unzipFile(configbackuppath,_0xaa8513);}async function getBackupFiles(_0x2c7ad5=null){const _0x37bdca=_0x133b29;let _0x340b21=[],_0x15714b=fs[_0x37bdca(0x323)](configbackuppath,{'withFileTypes':!![]});_0x15714b[_0x37bdca(0x274)]((_0x1fe593,_0x4e44fc)=>_0x1fe593[_0x37bdca(0x22f)]<_0x4e44fc['name']?0x1:_0x4e44fc[_0x37bdca(0x22f)]<_0x1fe593[_0x37bdca(0x22f)]?-0x1:0x0),_0x15714b[_0x37bdca(0x356)](_0x52f3f8=>{const _0x3b20ce=_0x37bdca;if(!_0x52f3f8[_0x3b20ce(0x1e3)]()&&_0x52f3f8[_0x3b20ce(0x22f)][_0x3b20ce(0x190)]('backup-full@')&&_0x52f3f8[_0x3b20ce(0x22f)]['endsWith'](_0x3b20ce(0x257))){const _0x5d42ce=formatDate(fs[_0x3b20ce(0x23c)](configbackuppath+_0x52f3f8[_0x3b20ce(0x22f)])[_0x3b20ce(0x281)]);_0x340b21[_0x3b20ce(0x192)]({'name':_0x52f3f8[_0x3b20ce(0x22f)],'mtime':_0x5d42ce});}});if(_0x2c7ad5)io['to'](_0x2c7ad5)[_0x37bdca(0x354)](_0x37bdca(0x2bd),_0x340b21);else return _0x340b21;}async function backupConfigFiles(){const _0x501586=_0x133b29;await zipFiles(_0x501586(0x180));const _0x1246c9=getCleanTimeStamp();fs[_0x501586(0x372)](zippath+_0x501586(0x27c),configbackuppath+('backup-full@'+_0x1246c9+_0x501586(0x257)));let _0x33cf0a=fs[_0x501586(0x323)](configbackuppath,{'withFileTypes':!![]});_0x33cf0a['sort']((_0x1d121d,_0x3eb040)=>_0x1d121d[_0x501586(0x22f)]<_0x3eb040['name']?0x1:_0x3eb040['name']<_0x1d121d[_0x501586(0x22f)]?-0x1:0x0),_0x33cf0a[_0x501586(0x1bd)]>maxBackups&&fs['unlinkSync'](configbackuppath+_0x33cf0a[_0x33cf0a[_0x501586(0x1bd)]-0x1][_0x501586(0x22f)]);}function rotateLogFiles(){const _0x526c0e=_0x133b29,_0x3f6c9c=fs[_0x526c0e(0x23c)](logspath+_0x526c0e(0x224)),_0x4194c9=_0x3f6c9c[_0x526c0e(0x1b6)]/0x400;if(_0x4194c9>0x64){let _0x3f5555=fs[_0x526c0e(0x323)](logspath,{'withFileTypes':!![]});_0x3f5555[_0x526c0e(0x274)]((_0x4022d9,_0x1848c0)=>_0x4022d9[_0x526c0e(0x22f)]<_0x1848c0[_0x526c0e(0x22f)]?0x1:_0x1848c0[_0x526c0e(0x22f)]<_0x4022d9[_0x526c0e(0x22f)]?-0x1:0x0),_0x3f5555['forEach'](_0x44336f=>{const _0x48a5aa=_0x526c0e;if(_0x44336f[_0x48a5aa(0x22f)]=='output-002.log')fs[_0x48a5aa(0x372)](logspath+_0x44336f[_0x48a5aa(0x22f)],logspath+_0x48a5aa(0x269));if(_0x44336f[_0x48a5aa(0x22f)]==_0x48a5aa(0x2db))fs[_0x48a5aa(0x372)](logspath+_0x44336f['name'],logspath+'output-002.log');_0x44336f['name']==_0x48a5aa(0x224)&&(fs[_0x48a5aa(0x372)](logspath+_0x44336f['name'],logspath+'output-001.log'),fs['writeFileSync'](logspath+_0x44336f[_0x48a5aa(0x22f)],''));});}}async function zipFiles(_0x404cc1){const _0x26ec6c=_0x133b29;let _0x184773;if(_0x404cc1==_0x26ec6c(0x1bc))_0x184773=logspath;if(_0x404cc1==_0x26ec6c(0x333))_0x184773=configpath;if(_0x404cc1==_0x26ec6c(0x180))_0x184773=configpath;let _0x2737bd=fs[_0x26ec6c(0x323)](_0x184773,{'withFileTypes':!![]});const _0x3f9489=new JSZip();_0x2737bd[_0x26ec6c(0x356)](_0x54ee0c=>{const _0x1d2ad3=_0x26ec6c;if(!_0x54ee0c[_0x1d2ad3(0x1e3)]()){let _0x5b86d2=fs[_0x1d2ad3(0x2d0)](_0x184773+_0x54ee0c['name']);if(_0x404cc1==_0x1d2ad3(0x333)){const _0x24ff30=/^bot-[0-9]{3}-config.json$/,_0x5728cd=_0x24ff30['test'](_0x54ee0c['name']);if(_0x5728cd){const _0x52f114=JSON[_0x1d2ad3(0x33d)](_0x5b86d2);if(_0x52f114[_0x1d2ad3(0x1f3)][0x0]){_0x52f114[_0x1d2ad3(0x1f3)][0x0]['apiKey']=_0x1d2ad3(0x221),_0x52f114[_0x1d2ad3(0x1f3)][0x0][_0x1d2ad3(0x299)]=_0x1d2ad3(0x221);if(_0x52f114[_0x1d2ad3(0x1f3)][0x0]['apiPassword'])_0x52f114[_0x1d2ad3(0x1f3)][0x0][_0x1d2ad3(0x30a)]=_0x1d2ad3(0x221);}_0x5b86d2=JSON[_0x1d2ad3(0x31d)](_0x52f114,null,0x2);}if(_0x54ee0c['name']==_0x1d2ad3(0x170)){const _0x465b52=JSON[_0x1d2ad3(0x33d)](_0x5b86d2);if(_0x465b52['settings']['loginRequired'])_0x465b52['settings'][_0x1d2ad3(0x2eb)]=![];if(_0x465b52[_0x1d2ad3(0x184)][_0x1d2ad3(0x1d2)])_0x465b52[_0x1d2ad3(0x184)][_0x1d2ad3(0x1d2)]=_0x1d2ad3(0x221);if(_0x465b52[_0x1d2ad3(0x184)][_0x1d2ad3(0x264)])_0x465b52[_0x1d2ad3(0x184)][_0x1d2ad3(0x264)]=_0x1d2ad3(0x221);if(_0x465b52[_0x1d2ad3(0x184)][_0x1d2ad3(0x212)])_0x465b52[_0x1d2ad3(0x184)][_0x1d2ad3(0x212)]=null;if(_0x465b52[_0x1d2ad3(0x184)]['marketcapApi'])_0x465b52[_0x1d2ad3(0x184)][_0x1d2ad3(0x172)]=_0x1d2ad3(0x221);_0x5b86d2=JSON['stringify'](_0x465b52,null,0x2);}if(_0x54ee0c[_0x1d2ad3(0x22f)]!=_0x1d2ad3(0x1d6))_0x3f9489['file'](_0x54ee0c['name'],_0x5b86d2);}else _0x3f9489[_0x1d2ad3(0x35d)](_0x54ee0c[_0x1d2ad3(0x22f)],_0x5b86d2);}});const _0x1a1393=await _0x3f9489[_0x26ec6c(0x20d)]({'type':_0x26ec6c(0x373),'base64':![],'compression':_0x26ec6c(0x288)});fs[_0x26ec6c(0x1a2)](zippath+(_0x404cc1+_0x26ec6c(0x257)),_0x1a1393,_0x26ec6c(0x1b0));}async function unzipFile(_0x4dfade,_0x39fb2f){const _0x3631c4=_0x133b29;fs[_0x3631c4(0x323)](configpath,{'withFileTypes':!![]})['forEach'](_0x1d8924=>{const _0x1da05c=_0x3631c4;if(!_0x1d8924[_0x1da05c(0x1e3)]())fs[_0x1da05c(0x1f6)](configpath+_0x1d8924[_0x1da05c(0x22f)]);});const _0x540005=fs[_0x3631c4(0x2d0)](_0x4dfade+_0x39fb2f,_0x3631c4(0x1b0)),_0x118f5=await JSZip[_0x3631c4(0x28f)](_0x540005,{'base64':![],'checkCRC32':!![]});for(const _0x2399de of Object[_0x3631c4(0x1dd)](_0x118f5[_0x3631c4(0x352)])){const _0x5e833e=_0x118f5[_0x3631c4(0x352)][_0x2399de],_0x572148=await _0x5e833e[_0x3631c4(0x341)](_0x3631c4(0x373));fs[_0x3631c4(0x1a2)](configpath+_0x5e833e[_0x3631c4(0x22f)],_0x572148);}fs[_0x3631c4(0x323)](temppath,{'withFileTypes':!![]})[_0x3631c4(0x356)](_0x4d3a40=>{const _0x39f88a=_0x3631c4;if(!_0x4d3a40['isDirectory']())fs[_0x39f88a(0x1f6)](temppath+_0x4d3a40[_0x39f88a(0x22f)]);}),logger[_0x3631c4(0x25c)](_0x3631c4(0x365)),process[_0x3631c4(0x2ac)]({'restore':!![]},_0x9c4dc9=>{});}async function getPublicIp(){const _0x386a1d=_0x133b29;try{const _0x5f2d59=await axios['get'](_0x386a1d(0x2bc));publicip=_0x5f2d59[_0x386a1d(0x223)]['ip'];}catch(_0x29080b){}}async function triggerAnalytics(){const _0x1caa60=_0x133b29;if(!publicip)await getPublicIp();const _0x13e7e1=getBotsWithMode();let _0x1f9adb=0x0;_0x13e7e1[_0x1caa60(0x356)](_0x9375df=>{const _0x5c5a40=_0x1caa60;if(_0x9375df[_0x5c5a40(0x16a)]===_0x5c5a40(0x2ff))_0x1f9adb++;});const _0x227688=getBotExchanges();mixpanel[_0x1caa60(0x36c)]('Server',{'distinct_id':settings[_0x1caa60(0x27b)],'ip':publicip,'version':serverversion,'numbots':_0x13e7e1[_0x1caa60(0x1bd)],'numbotsenabled':_0x1f9adb,'exchanges':_0x227688,'environment':environment});}async function getMessages(){const _0x423fe4=_0x133b29,_0x46506d=_0x423fe4(0x276),_0x14db29=new GraphQLClient(_0x46506d),_0x4a77a4={'authorization':'Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U'},_0x1028ec=serverversion[_0x423fe4(0x166)]('.'),_0x2a8bf3=_0x1028ec[0x0]+'.'+_0x1028ec[0x1],_0x1cff6e=Math[_0x423fe4(0x316)](settings[_0x423fe4(0x295)],settings[_0x423fe4(0x18b)]),_0x3ea0fe={'last':parseInt(_0x1cff6e),'bbm':_0x2a8bf3},_0x31f0b4=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x301ad3;try{_0x301ad3=await _0x14db29[_0x423fe4(0x2a2)](_0x31f0b4,_0x3ea0fe,_0x4a77a4);}catch(_0x30d313){}if(_0x301ad3&&_0x301ad3[_0x423fe4(0x2a3)]){let _0x16316c=settings[_0x423fe4(0x295)],_0x7a3602=settings['lastmsgtelegram'];newMessages=[];for(const _0x15a767 of _0x301ad3['messages']){newMessages[_0x423fe4(0x192)](_0x15a767);let _0x360708=![];_0x15a767[_0x423fe4(0x258)]&&(updateSetting(_0x423fe4(0x2f9),_0x15a767[_0x423fe4(0x258)]),_0x360708=isNewerVersion(serverversion,_0x15a767[_0x423fe4(0x258)])||serverversion==_0x15a767[_0x423fe4(0x258)]);if(!_0x360708&&_0x15a767[_0x423fe4(0x2d2)]>_0x16316c){if(_0x15a767['bbvReceive']===_0x423fe4(0x1b3)||serverversion[_0x423fe4(0x190)](_0x15a767[_0x423fe4(0x226)])){let _0x503068=''+_0x15a767['title']+'\x0a\x0a'+_0x15a767[_0x423fe4(0x1e1)];const _0x381891=await sendTelegramMsg(toTelegramMarkdown(_0x503068),_0x423fe4(0x18a));_0x16316c=_0x15a767[_0x423fe4(0x2d2)];}}_0x7a3602=_0x15a767[_0x423fe4(0x2d2)];}updateAvailable=isNewerVersion(settings[_0x423fe4(0x2f9)],serverversion),updateSetting(_0x423fe4(0x295),_0x7a3602),emitMessages();}}function emitMessages(){const _0x279f32=_0x133b29,_0x87f433=settings[_0x279f32(0x18b)];let _0xfc1843=[];newMessages[_0x279f32(0x356)](_0x1b3391=>{const _0xfd1dd3=_0x279f32;_0x1b3391[_0xfd1dd3(0x2d2)]>_0x87f433&&_0xfc1843['push'](_0x1b3391);}),_0xfc1843[_0x279f32(0x1bd)]>0x0&&getAllClients()[_0x279f32(0x356)](_0x47be48=>{const _0x56f694=_0x279f32;getSocket(_0x47be48['id'])[_0x56f694(0x354)](_0x56f694(0x1e1),_0xfc1843);});}function confirmMessage(_0x15cf19){updateSetting('lastmsgemitted',Number(_0x15cf19));}function isNewerVersion(_0x30b0d0,_0x3f617e){const _0x108b9b=_0x133b29,_0x376e38=_0x3f617e[_0x108b9b(0x166)]('.'),_0x800fb8=_0x30b0d0[_0x108b9b(0x166)]('.');for(var _0x5d0c5b=0x0;_0x5d0c5b<_0x800fb8['length'];_0x5d0c5b++){const _0x3e8599=~~_0x800fb8[_0x5d0c5b],_0x29cd2e=~~_0x376e38[_0x5d0c5b];if(_0x3e8599>_0x29cd2e)return!![];if(_0x3e8599<_0x29cd2e)return![];}return![];}function toTelegramMarkdown(_0x6d97e5){const _0x24313d=_0x133b29,_0x432391=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x175dcb=/\*{2}(.+?)\*{2}/gim;return _0x6d97e5=_0x6d97e5[_0x24313d(0x26e)](_0x432391,_0x24313d(0x229))[_0x24313d(0x26e)](_0x175dcb,'*$1*'),_0x6d97e5;}async function validateConfigFile(){const _0x195203=_0x133b29,_0xba4bda=dbConfig[_0x195203(0x33f)]('bots')[_0x195203(0x16f)](_0x195203(0x366))['value']()||[];if(_0xba4bda[_0x195203(0x1bd)]==0x0){let _0x72cbee=0x0,_0xf0fdfc=[];const _0x1026ef=/^bot-([0-9]{3})-config.json$/,_0xa2f514=fs[_0x195203(0x323)](configpath);_0xa2f514[_0x195203(0x356)](_0x50eb6e=>{const _0x40b0a8=_0x195203,_0x49976c=_0x1026ef['exec'](_0x50eb6e);if(_0x49976c){const _0x52a2e9=_0x49976c[0x1];let _0x1646f2=getBotAttributes(_0x52a2e9);_0xf0fdfc['push']({'botID':_0x52a2e9,'botname':_0x1646f2[_0x40b0a8(0x25a)],'status':_0x40b0a8(0x213),'live':_0x40b0a8(0x25d)}),_0x72cbee++;}}),_0x72cbee!=0x0&&(dbConfig[_0x195203(0x33f)](_0x195203(0x24f))[_0x195203(0x2dd)](_0xf0fdfc)[_0x195203(0x1b7)](),config=_0xf0fdfc,restoredConfigFile=_0x72cbee);}}async function restoreConfigNotify(_0x391f98){const _0x434278=_0x133b29;let _0x488d16;if(restoredConfigFile==0x1)_0x488d16=_0x434278(0x19c);else _0x488d16=_0x434278(0x28e);if(_0x391f98)io['to'](_0x434278(0x32d))[_0x434278(0x354)](_0x434278(0x1af),_0x488d16);else{logger[_0x434278(0x36d)](_0x434278(0x331)),logger[_0x434278(0x36d)](_0x488d16),logger['simple'](_0x434278(0x331)),logger[_0x434278(0x36d)]('');if(tgBot&&settings[_0x434278(0x212)]&&settings['telegramEvents']!=_0x434278(0x1d1))await sendTelegram(settings[_0x434278(0x212)],_0x434278(0x338)+_0x488d16);}}function decryptRSA(_0x3cf378,_0x37c7f1){const _0x41e878=_0x133b29,_0xde79=forge[_0x41e878(0x300)]['privateKeyFromPem'](_0x3cf378),_0x3d771f=_0xde79[_0x41e878(0x2bb)](forge[_0x41e878(0x243)][_0x41e878(0x245)](_0x37c7f1),_0x41e878(0x1fa),{'md':forge['md'][_0x41e878(0x345)][_0x41e878(0x289)](),'mgf1':{'md':forge['md'][_0x41e878(0x345)][_0x41e878(0x289)]()}});return _0x3d771f;}function validateCredentials(_0x27d98a,_0x440ac6){const _0x1dae8d=_0x133b29;if(_0x27d98a[_0x1dae8d(0x376)]==settings[_0x1dae8d(0x303)]&&bcrypt[_0x1dae8d(0x207)](_0x27d98a[_0x1dae8d(0x165)],settings[_0x1dae8d(0x1d2)])){if(settings[_0x1dae8d(0x2c7)])return{'allow':![],'reason':_0x1dae8d(0x238),'token':null};else{const _0x172bcc=generateLoginToken(_0x440ac6);return{'allow':!![],'reason':_0x1dae8d(0x351),'token':_0x172bcc};}}else return{'allow':![],'reason':'invalid\x20credentials','token':null};}function refreshToken(_0x1ee1fb){const _0x36eeec=_0x133b29,_0x3e58c8=generateLoginToken(_0x1ee1fb);return{'allow':!![],'reason':_0x36eeec(0x351),'token':_0x3e58c8};}function validateAccess(_0x4021f3,_0x31be9d,_0x6b4d20){const _0x363f9c=_0x133b29,_0x39958f=_0x6b4d20?_0x6b4d20:devices[_0x31be9d]['ip'];let _0x26d8bc;const _0xee887f=_0x477100=>{const _0x48135f=_0x5093;if(settings[_0x48135f(0x2eb)]){if(settings[_0x48135f(0x2c7)]){if(telegram2FaApproved(_0x31be9d)){const _0xf0e2ac=generateLoginToken(_0x31be9d);return{'allow':!![],'reason':_0x48135f(0x177),'token':_0xf0e2ac};}else return{'allow':![],'reason':'login\x20required','token':null};}else return _0x26d8bc=validToken(_0x477100,_0x31be9d),_0x26d8bc[_0x48135f(0x307)](_0x48135f(0x1e7))?{'allow':!![],'reason':_0x48135f(0x183),'token':_0x477100}:{'allow':![],'reason':'login\x20required','token':null};}else return{'allow':!![],'reason':_0x48135f(0x1da),'token':null};};if(settings[_0x363f9c(0x2e7)]){let _0x2fca32=[...settings[_0x363f9c(0x36e)],_0x363f9c(0x26c),'::ffff:127.0.0.1',_0x363f9c(0x2ad)];if(_0x2fca32[_0x363f9c(0x230)](_0x39958f))return _0xee887f(_0x4021f3);else{_0x26d8bc=validToken(_0x4021f3,_0x31be9d);if(_0x26d8bc['hasOwnProperty'](_0x363f9c(0x1e7)))return _0xee887f(_0x4021f3);else{if(telegramIpApproved(_0x31be9d)){const _0x3b4e59=generateToken(_0x31be9d);return _0x26d8bc=_0xee887f(_0x4021f3),_0x26d8bc[_0x363f9c(0x1ef)]?{'allow':!![],'reason':_0x363f9c(0x2f8),'token':_0x3b4e59}:_0x26d8bc;}else return settings[_0x363f9c(0x259)]?{'allow':![],'reason':_0x363f9c(0x1cf),'token':null}:{'allow':![],'reason':_0x363f9c(0x2ed),'token':null};}}}else return _0xee887f(_0x4021f3);}function timelyDecrypt(_0x1aab42,_0x13a654,_0x4c04cc='@'){const _0x193797=_0x133b29;if(_0x1aab42)try{const _0x9cfc69=decryptRSA(secure[_0x193797(0x21f)],_0x1aab42),_0x10c98b=_0x9cfc69['split'](_0x4c04cc)[0x0],_0x2ffff7=_0x9cfc69[_0x193797(0x166)](_0x4c04cc)[0x1],_0x1fb207=new Date()[_0x193797(0x1c1)]();if(_0x13a654){if(_0x1fb207-_0x2ffff7<maxSecretAge*0x3e8)return _0x10c98b;else return![];}else return _0x10c98b;}catch(_0x17bf06){return![];}else return![];}const validToken=(_0x1c6e6b,_0x30a7ff)=>{const _0x877c9d=_0x133b29,_0x4fbc0c=devices[_0x30a7ff]['ip'];if(!_0x1c6e6b)return{'error':'No\x20authentication\x20token'};for(let _0x3c0521 of blacklist){if(_0x3c0521[_0x877c9d(0x1a5)]==_0x1c6e6b)return{'error':_0x877c9d(0x310)};}let _0x3a9b5c;try{_0x3a9b5c=jwt[_0x877c9d(0x2b0)](_0x1c6e6b,secure[_0x877c9d(0x2fa)]+_0x30a7ff);}catch{return{'error':_0x877c9d(0x16e)};}if(!_0x3a9b5c['hasOwnProperty'](_0x877c9d(0x362))&&!_0x3a9b5c['hasOwnProperty'](_0x877c9d(0x376))||!_0x3a9b5c['hasOwnProperty'](_0x877c9d(0x1a6)))return{'error':_0x877c9d(0x2b2)};if(!_0x3a9b5c[_0x877c9d(0x307)](_0x877c9d(0x376))&&_0x3a9b5c[_0x877c9d(0x307)](_0x877c9d(0x362))){const {clientip:_0x55eb44}=_0x3a9b5c;return _0x4fbc0c==_0x55eb44?{'success':'User\x20has\x20been\x20validated'}:{'error':'Invalid\x20IP\x20address'};}else{if(_0x3a9b5c[_0x877c9d(0x307)]('username')&&_0x3a9b5c[_0x877c9d(0x307)](_0x877c9d(0x362))){const {username:_0xb22b24,clientip:_0x40b4cd}=_0x3a9b5c;return settings[_0x877c9d(0x303)]==_0xb22b24&&_0x4fbc0c==_0x40b4cd?{'success':_0x877c9d(0x339)}:{'error':_0x877c9d(0x326)};}}},generateLoginToken=_0x1a0a28=>{const _0x7c0a9e=_0x133b29;if(_0x1a0a28){const _0x2e0d8a=devices[_0x1a0a28]['ip'];return jwt[_0x7c0a9e(0x202)]({'username':settings[_0x7c0a9e(0x303)],'clientip':_0x2e0d8a},secure[_0x7c0a9e(0x2fa)]+_0x1a0a28,{'expiresIn':tokenRefresh*0x3c,'allowInsecureKeySizes':!![]});}else return![];},generateToken=_0x53b5d3=>{const _0x5f52a4=_0x133b29;if(_0x53b5d3){const _0x548086=devices[_0x53b5d3]['ip'];return jwt[_0x5f52a4(0x202)]({'clientip':_0x548086},secure[_0x5f52a4(0x2fa)]+_0x53b5d3,{'expiresIn':devices[_0x53b5d3]['telegramIpApproval'][_0x5f52a4(0x268)]*0x3c,'allowInsecureKeySizes':!![]});}else return![];},telegramIpApproved=_0xb8914e=>{const _0x4e73ae=_0x133b29;let _0xd94aad=![];return devices[_0xb8914e]['telegramIpApproval']&&devices[_0xb8914e][_0x4e73ae(0x1ed)][_0x4e73ae(0x268)]!=_0x4e73ae(0x312)&&(_0xd94aad=devices[_0xb8914e][_0x4e73ae(0x1ed)][_0x4e73ae(0x362)]==devices[_0xb8914e]['ip']&&new Date()[_0x4e73ae(0x1c1)]()-devices[_0xb8914e]['telegramIpApproval'][_0x4e73ae(0x189)]<devices[_0xb8914e][_0x4e73ae(0x1ed)][_0x4e73ae(0x268)]*0x3c*0x3e8),_0xd94aad;},telegram2FaApproved=_0x5c2a06=>{const _0x47d4ef=_0x133b29;let _0x567b86=![];return devices[_0x5c2a06][_0x47d4ef(0x2c9)]&&devices[_0x5c2a06][_0x47d4ef(0x2c9)][_0x47d4ef(0x268)]!=_0x47d4ef(0x312)&&(_0x567b86=devices[_0x5c2a06]['telegram2FaApproval'][_0x47d4ef(0x362)]==devices[_0x5c2a06]['ip']&&new Date()[_0x47d4ef(0x1c1)]()-devices[_0x5c2a06][_0x47d4ef(0x2c9)][_0x47d4ef(0x189)]<devices[_0x5c2a06][_0x47d4ef(0x2c9)][_0x47d4ef(0x268)]*0x3c*0x3e8),_0x567b86;},normalizeIP=_0x168e44=>{const _0x444038=_0x133b29;let _0x1e07a9=null,_0x2c0fc6=null;if(ipaddr[_0x444038(0x17a)](_0x168e44)){const _0x10131a=ipaddr[_0x444038(0x33d)](_0x168e44);_0x10131a[_0x444038(0x236)]()===_0x444038(0x34d)?(_0x10131a[_0x444038(0x1f5)]()&&(_0x1e07a9=_0x10131a[_0x444038(0x368)]()['toString']()),_0x2c0fc6=_0x10131a[_0x444038(0x309)]()):(_0x1e07a9=_0x10131a[_0x444038(0x309)](),_0x2c0fc6=_0x10131a['toIPv4MappedAddress']()['toString']());}return{'show':_0x1e07a9?_0x1e07a9:_0x2c0fc6,'store':_0x2c0fc6};};function formatDate(_0x16eb7b){const _0x246c61=_0x133b29;return _0x16eb7b[_0x246c61(0x1de)]()+'/'+(_0x16eb7b[_0x246c61(0x29c)]()+0x1)[_0x246c61(0x309)]()[_0x246c61(0x370)](0x2,'0')+'/'+_0x16eb7b[_0x246c61(0x244)]()[_0x246c61(0x309)]()[_0x246c61(0x370)](0x2,'0')+'\x20'+_0x16eb7b['getHours']()[_0x246c61(0x309)]()[_0x246c61(0x370)](0x2,'0')+':'+_0x16eb7b[_0x246c61(0x294)]()['toString']()['padStart'](0x2,'0')+':'+_0x16eb7b[_0x246c61(0x2c2)]()[_0x246c61(0x309)]()[_0x246c61(0x370)](0x2,'0');}function sleep(_0x54b16b){return new Promise(_0x22711d=>setTimeout(_0x22711d,_0x54b16b));}