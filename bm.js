const _0x4652e8=_0x234a;(function(_0x16606d,_0x2ce9a3){const _0x3588ec=_0x234a,_0x177b48=_0x16606d();while(!![]){try{const _0x57736b=-parseInt(_0x3588ec(0x2bb))/0x1*(-parseInt(_0x3588ec(0x276))/0x2)+-parseInt(_0x3588ec(0x34c))/0x3*(-parseInt(_0x3588ec(0x24d))/0x4)+-parseInt(_0x3588ec(0x2a3))/0x5+-parseInt(_0x3588ec(0x2d6))/0x6*(-parseInt(_0x3588ec(0x376))/0x7)+-parseInt(_0x3588ec(0x3ae))/0x8+-parseInt(_0x3588ec(0x23c))/0x9+parseInt(_0x3588ec(0x1b1))/0xa*(parseInt(_0x3588ec(0x2e1))/0xb);if(_0x57736b===_0x2ce9a3)break;else _0x177b48['push'](_0x177b48['shift']());}catch(_0x339f12){_0x177b48['push'](_0x177b48['shift']());}}}(_0x413b,0x3fc42));const _0x25b04e=function(){let _0xf36225=!![];return function(_0x5844f5,_0x2996a8){const _0x47a29a=_0xf36225?function(){const _0x1a948e=_0x234a;if(_0x2996a8){const _0x4eb3a1=_0x2996a8[_0x1a948e(0x338)](_0x5844f5,arguments);return _0x2996a8=null,_0x4eb3a1;}}:function(){};return _0xf36225=![],_0x47a29a;};}(),_0x2c206d=_0x25b04e(this,function(){const _0x42cf08=_0x234a;return _0x2c206d[_0x42cf08(0x36e)]()[_0x42cf08(0x356)]('(((.+)+)+)+$')[_0x42cf08(0x36e)]()[_0x42cf08(0x2d3)](_0x2c206d)[_0x42cf08(0x356)](_0x42cf08(0x2d4));});_0x2c206d();'use strict';process[_0x4652e8(0x243)][_0x4652e8(0x366)]=0x1;const childProcess=require(_0x4652e8(0x2a2)),fs=require('fs'),fns=require(_0x4652e8(0x1a5)),low=require(_0x4652e8(0x2e5)),FileSync=require(_0x4652e8(0x24f)),path=require(_0x4652e8(0x19c)),crypto=require(_0x4652e8(0x28f)),forge=require(_0x4652e8(0x28a)),bcrypt=require('bcryptjs'),jwt=require(_0x4652e8(0x241)),ipaddr=require(_0x4652e8(0x371)),yargs=require(_0x4652e8(0x282)),uuidRandom=require(_0x4652e8(0x22c)),{Telegraf,Markup}=require(_0x4652e8(0x2f7)),Mixpanel=require('mixpanel'),axios=require(_0x4652e8(0x304)),{GraphQLClient,gql}=require(_0x4652e8(0x378)),util=require(_0x4652e8(0x1c7)),fileUpload=require(_0x4652e8(0x292)),{networkInterfaces}=require('os'),JSZip=require(_0x4652e8(0x316)),argv=yargs(process[_0x4652e8(0x381)][_0x4652e8(0x2ed)](0x2))['argv'],PORT=argv['port']||'3000',pattern=/^[0-9]{2,4}$/;!pattern[_0x4652e8(0x25d)](PORT)&&(console[_0x4652e8(0x267)]('Error:\x20Invalid\x20argument\x20'+PORT+_0x4652e8(0x31b)),process[_0x4652e8(0x26b)](0x1));const HOST=argv['host']||null,userID=argv[_0x4652e8(0x333)]||'',debugging=argv['d']||![],recreate=argv['r']||![],openBrowser=argv['o']||![],nodeversion=process['versions']['node'];let bbpath=_0x4652e8(0x2ee),bbpath2='';const botfile=_0x4652e8(0x27f),configfile=_0x4652e8(0x224),settingsfile=_0x4652e8(0x28b),securefile=_0x4652e8(0x209),environment=require('./'+bbpath2+_0x4652e8(0x2f0))['environment']||_0x4652e8(0x275),maxBackups=0xa;let validInstallation=!![];const schedulerInterval=0x3c*0x3c*0x3e8;!fs['existsSync'](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x4652e8(0x315)),configpath=userID?bbpath+_0x4652e8(0x244)+userID+'/':bbpath+_0x4652e8(0x244),configbackuppath=configpath+_0x4652e8(0x1fd),logspath=userID?bbpath+_0x4652e8(0x367)+userID+'/':bbpath+_0x4652e8(0x367),zippath=userID?bbpath+_0x4652e8(0x37d)+userID+'/':bbpath+'zip/',loggerfile=fs[_0x4652e8(0x32c)](logspath+_0x4652e8(0x1a8),{'flags':'a'}),temppath=userID?bbpath+'temp/'+userID+'/':bbpath+_0x4652e8(0x36d);!fs[_0x4652e8(0x25e)](configpath)&&fs[_0x4652e8(0x1c5)](configpath);!fs[_0x4652e8(0x25e)](configbackuppath)&&fs[_0x4652e8(0x1c5)](configbackuppath);!fs[_0x4652e8(0x25e)](logspath)&&fs[_0x4652e8(0x1c5)](logspath);!fs[_0x4652e8(0x25e)](zippath)&&fs[_0x4652e8(0x1c5)](zippath);!fs[_0x4652e8(0x25e)](temppath)&&fs['mkdirSync'](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x4652e8(0x227)]({'bots':[]})[_0x4652e8(0x357)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x4652e8(0x227)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':'0.0.0','onepagemode':![],'marketcapApi':''}})['write']();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x4652e8(0x227)]({'secure':{},'blacklist':[]})[_0x4652e8(0x357)]();const saltRounds=0xa,mixpanel=Mixpanel[_0x4652e8(0x2ec)](_0x4652e8(0x2ad),{'host':_0x4652e8(0x252)});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings[_0x4652e8(0x321)]&&(settings['telegramToken']!=''&&settings[_0x4652e8(0x321)]!=_0x4652e8(0x397))&&settings[_0x4652e8(0x210)]&&settings['telegramUsername']!='')initTelegram();const parseColor=(_0x1e03a6,_0x236f7)=>{const _0x35c350=_0x4652e8,_0x1b5150=/#[A-Z]{3}#/g;if(typeof _0x1e03a6=='string'){!_0x236f7?_0x1e03a6=_0x1e03a6[_0x35c350(0x3b4)](_0x1b5150,''):(_0x1e03a6=_0x1e03a6[_0x35c350(0x3b4)](/#BLU#/g,_0x35c350(0x1d9)),_0x1e03a6=_0x1e03a6[_0x35c350(0x3b4)](/#RED#/g,'\x1b[31m'),_0x1e03a6=_0x1e03a6['replace'](/#YEL#/g,_0x35c350(0x352)),_0x1e03a6=_0x1e03a6[_0x35c350(0x3b4)](/#MAG#/g,_0x35c350(0x207)),_0x1e03a6=_0x1e03a6[_0x35c350(0x3b4)](/#CYA#/g,_0x35c350(0x256)),_0x1e03a6=_0x1e03a6[_0x35c350(0x3b4)](/#RES#/g,'\x1b[0m'));;}return _0x1e03a6;},logger={'screen':_0x28a966=>{const _0x31a99f=_0x4652e8;console[_0x31a99f(0x267)](parseColor(_0x28a966,!![]));},'simple':_0x234f37=>{const _0x50db5a=_0x4652e8;console[_0x50db5a(0x267)](parseColor(_0x234f37,!![])),loggerfile[_0x50db5a(0x357)](util[_0x50db5a(0x27a)](parseColor(_0x234f37,![]))+'\x0a');},'full':async _0x2bf8d7=>{const _0x513b6f=_0x4652e8,_0x25b51d=getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20'+_0x2bf8d7;console[_0x513b6f(0x267)](parseColor(_0x25b51d,!![])),loggerfile[_0x513b6f(0x357)](util[_0x513b6f(0x27a)](parseColor(_0x25b51d,![]))+'\x0a');if(tgBot&&settings[_0x513b6f(0x365)]&&settings[_0x513b6f(0x1a3)]!=_0x513b6f(0x1ec))await sendTelegram(settings[_0x513b6f(0x365)],_0x513b6f(0x2c6)+parseColor(_0x2bf8d7,![]));},'debug':async(_0x56f168,_0x4cdbb5='')=>{const _0x46209b=_0x4652e8,_0x4ab69d=getTimeStamp()+_0x46209b(0x1e2)+_0x56f168;if(debugging)console['log'](parseColor(_0x4ab69d,!![]));loggerfile[_0x46209b(0x357)](util[_0x46209b(0x27a)](parseColor(_0x4ab69d,![]))+'\x0a');if(_0x4cdbb5){if(debugging)console['log'](_0x4cdbb5);loggerfile[_0x46209b(0x357)](util['format'](_0x4cdbb5)+'\x0a');}}};let terminating=![];process['on'](_0x4652e8(0x26c),function(_0xd43a93){const _0x4c48a0=_0x4652e8;_0xd43a93[_0x4c48a0(0x36e)]()['includes'](_0x4c48a0(0x2da))?(logger[_0x4c48a0(0x1fc)]('#RED#Balance\x20Bot\x20is\x20already\x20running\x20on\x20port\x20'+_0xd43a93['port']+'#RES#'),process[_0x4c48a0(0x335)]({'terminate':!![]},_0x44f2f9=>{})):logger[_0x4c48a0(0x1fc)](_0xd43a93);}),process['on'](_0x4652e8(0x26b),()=>{const _0x2a074b=_0x4652e8;stopAllBots(),process[_0x2a074b(0x26b)](0x0);}),process['on'](_0x4652e8(0x25c),()=>{const _0x2efd5d=_0x4652e8;stopAllBots(),process[_0x2efd5d(0x26b)](0x0);}),process['on'](_0x4652e8(0x2f6),()=>{const _0x2b3860=_0x4652e8;stopAllBots(),process[_0x2b3860(0x26b)](0x0);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+'version.json')['version'],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let tmpStorage={},devices=[],lastIpApproval,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0x4652e8(0x34d)),app=express(),http=require('http')[_0x4652e8(0x1f5)](app);app[_0x4652e8(0x2b9)](fileUpload({'useTempFiles':!![]})),app[_0x4652e8(0x246)]('/download/:type',async(_0x311743,_0x4635fa)=>{const _0x40183e=_0x4652e8,_0x5b49f6=_0x311743[_0x40183e(0x2b1)][_0x40183e(0x350)],_0x470eeb=getClientsWithBotID('botmanager'),_0x874491=_0x311743[_0x40183e(0x2e4)]['uuid'],_0x19fbb2=timelyDecrypt(_0x874491,![]),_0x289290=_0x470eeb[_0x40183e(0x20b)](_0x36c80e=>_0x36c80e[_0x40183e(0x2e3)]==_0x19fbb2);if(_0x289290){const _0x10408d=normalizeIP(_0x311743[_0x40183e(0x2ab)][_0x40183e(0x1ee)])['store'],_0x1d9bb6=_0x311743[_0x40183e(0x2e4)][_0x40183e(0x213)];if(validateAccess(_0x1d9bb6,_0x19fbb2,_0x10408d)[_0x40183e(0x3aa)])_0x5b49f6==_0x40183e(0x1ab)&&await backupConfigFiles(),await zipFiles(_0x5b49f6),_0x4635fa[_0x40183e(0x1f6)](zippath+(_0x5b49f6+'.zip'),_0x4b5402=>{const _0x139a25=_0x40183e;_0x4b5402&&(logger[_0x139a25(0x308)](_0x139a25(0x1da)+_0x5b49f6),logger[_0x139a25(0x1fc)](_0x4b5402));});else logger[_0x40183e(0x308)](_0x40183e(0x1f4)+_0x5b49f6+_0x40183e(0x39f));}else logger[_0x40183e(0x308)](_0x40183e(0x1f4)+_0x5b49f6+_0x40183e(0x3a5));}),app[_0x4652e8(0x1e1)](_0x4652e8(0x320),async(_0x30819a,_0x127696)=>{const _0x2b1b41=_0x4652e8,_0xf9a4d2=getClientsWithBotID(_0x2b1b41(0x2e2)),_0x2cc59f=_0x30819a[_0x2b1b41(0x2e4)]['uuid'],_0xdc3771=timelyDecrypt(_0x2cc59f,![]),_0x3579ca=_0xf9a4d2[_0x2b1b41(0x20b)](_0x497524=>_0x497524[_0x2b1b41(0x2e3)]==_0xdc3771);logger[_0x2b1b41(0x395)](_0x2b1b41(0x216));if(_0x3579ca){const _0xab5e1=normalizeIP(_0x30819a[_0x2b1b41(0x2ab)]['remoteAddress'])[_0x2b1b41(0x31a)],_0x22b0e1=_0x30819a[_0x2b1b41(0x2e4)][_0x2b1b41(0x213)];if(validateAccess(_0x22b0e1,_0xdc3771,_0xab5e1)['allow']){if(_0x30819a['files']){const _0x4347b3=_0x30819a[_0x2b1b41(0x34f)][_0x2b1b41(0x24b)];await _0x4347b3['mv'](temppath+_0x4347b3[_0x2b1b41(0x2b4)]),_0x127696[_0x2b1b41(0x335)]({'status':!![],'message':_0x2b1b41(0x1ba)});const _0x4e7bb3=getBotsWithMode();_0x4e7bb3[_0x2b1b41(0x358)]>0x0?confirmRestore(temppath,_0x4347b3[_0x2b1b41(0x2b4)]):unzipFile(temppath,_0x4347b3['name']);}}else logger[_0x2b1b41(0x308)](_0x2b1b41(0x1a6));}else logger[_0x2b1b41(0x308)]('Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)');}),app[_0x4652e8(0x2b9)](express['static'](path[_0x4652e8(0x2e6)](__dirname,bbpath2,'build2'))),app[_0x4652e8(0x2b9)](express[_0x4652e8(0x2b6)](path[_0x4652e8(0x2e6)](__dirname,bbpath2,_0x4652e8(0x1fe)))),app[_0x4652e8(0x246)]('/',function(_0x508371,_0x34dc53){const _0x3fc5e2=_0x4652e8;_0x34dc53['sendFile'](path[_0x3fc5e2(0x2e6)](__dirname,bbpath2,_0x3fc5e2(0x23b),_0x3fc5e2(0x348)));}),app[_0x4652e8(0x246)](_0x4652e8(0x3a3),function(_0x2eca7f,_0x5987d9){const _0x1ffbc5=_0x4652e8;_0x5987d9[_0x1ffbc5(0x1f9)](path[_0x1ffbc5(0x2e6)](__dirname,bbpath2,_0x1ffbc5(0x1fe),_0x1ffbc5(0x348)));}),app[_0x4652e8(0x246)](_0x4652e8(0x2fb),(_0x35ab2f,_0x5fdee9)=>{const _0x40a06c=_0x4652e8;_0x5fdee9[_0x40a06c(0x1f9)](path[_0x40a06c(0x2e6)](__dirname,bbpath2,_0x40a06c(0x1fe),_0x40a06c(0x348)));}),app[_0x4652e8(0x246)](_0x4652e8(0x1e8),(_0x48f654,_0x2538ac)=>{const _0x20fdec=_0x4652e8;_0x2538ac['sendFile'](path[_0x20fdec(0x2e6)](__dirname,bbpath2,_0x20fdec(0x1fe),'index.html'));}),app[_0x4652e8(0x246)]('/:bot/coins',(_0x3b8b44,_0x6b0314)=>{const _0x3f70d6=_0x4652e8;_0x6b0314[_0x3f70d6(0x1f9)](path['join'](__dirname,bbpath2,'build',_0x3f70d6(0x348)));}),app['get']('/:bot/history',(_0xf2c875,_0x2f2b24)=>{const _0x2241ad=_0x4652e8;_0x2f2b24[_0x2241ad(0x1f9)](path[_0x2241ad(0x2e6)](__dirname,bbpath2,'build',_0x2241ad(0x348)));}),app[_0x4652e8(0x246)](_0x4652e8(0x3a7),(_0x159d54,_0x13eb4e)=>{const _0x341e6b=_0x4652e8;_0x13eb4e[_0x341e6b(0x1f9)](path['join'](__dirname,bbpath2,_0x341e6b(0x1fe),_0x341e6b(0x348)));}),app['get']('/:bot/support',(_0x1a9dee,_0x1978cb)=>{const _0x4a7321=_0x4652e8;_0x1978cb['sendFile'](path[_0x4a7321(0x2e6)](__dirname,bbpath2,_0x4a7321(0x1fe),_0x4a7321(0x348)));});if(HOST)http['listen'](PORT,HOST);else http['listen'](PORT);const io=require(_0x4652e8(0x263))(http,{});openBrowser&&(async()=>{const _0xce658c=_0x4652e8,{default:_0x35eb6a}=await import(_0xce658c(0x309));await _0x35eb6a('http://localhost:'+PORT);})();init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}function getServerIP(){const _0x546bc2=_0x4652e8;let _0x11fdad=_0x546bc2(0x323);const _0x542516=networkInterfaces(),_0x418bcd={};for(const _0x3cdfcc of Object['keys'](_0x542516)){for(const _0x4b14ea of _0x542516[_0x3cdfcc]){if((_0x4b14ea[_0x546bc2(0x2dd)]==_0x546bc2(0x364)||_0x4b14ea[_0x546bc2(0x2dd)]==0x4)&&!_0x4b14ea[_0x546bc2(0x1e4)]){const _0x3fb81b=ipaddr['parse'](_0x4b14ea['address'])[_0x546bc2(0x342)]();_0x3fb81b!=_0x546bc2(0x266)&&(!_0x418bcd[_0x3cdfcc]&&(_0x418bcd[_0x3cdfcc]=[]),_0x418bcd[_0x3cdfcc][_0x546bc2(0x39e)](_0x4b14ea[_0x546bc2(0x23d)]),_0x11fdad=_0x4b14ea[_0x546bc2(0x23d)]);}}}return{'serverip':_0x11fdad,'netinterfaces':_0x418bcd};}async function startServer(){const _0x514983=_0x4652e8,{serverip:_0x197654,netinterfaces:_0x11960f}=getServerIP();logger['simple'](''),logger[_0x514983(0x1fc)]('-----------------------------------------------------------------------------------'),await logger['full']('Starting\x20#RED#Balance\x20Bot\x20v'+serverversion+'#RES#\x20'+(environment==_0x514983(0x1dc)?'(staging)':'')+'\x0a'+(_0x514983(0x30f)+PORT+'#RES#\x20if\x20running\x20locally\x0a')+(_0x514983(0x20e)+_0x197654+':'+PORT+_0x514983(0x31e))),logger['simple']('-----------------------------------------------------------------------------------');if(config[_0x514983(0x358)]!=0x0)for(const _0x4034e7 of config){const _0x4763a7=_0x4034e7[_0x514983(0x39d)]==_0x514983(0x2fa)?'a':'m';if(_0x4034e7[_0x514983(0x324)]==_0x514983(0x2ff)||_0x4034e7[_0x514983(0x324)]==_0x514983(0x303))await logger[_0x514983(0x308)]('Starting\x20('+_0x4763a7+_0x514983(0x346)+_0x4034e7[_0x514983(0x22e)]+'\x20|\x20'+_0x4034e7['botname']),startBot([_0x4034e7[_0x514983(0x22e)],userID],{'cwd':bbpath},function(_0x3479e5){const _0x17da46=_0x514983;if(_0x3479e5)logger[_0x17da46(0x308)](_0x3479e5);});else(_0x4034e7['status']==_0x514983(0x25a)||_0x4034e7[_0x514983(0x324)]==_0x514983(0x330))&&await logger[_0x514983(0x308)](_0x514983(0x29d)+_0x4763a7+_0x514983(0x1bd)+_0x4034e7[_0x514983(0x22e)]+_0x514983(0x1f1)+_0x4034e7['botname']);}else!newBot&&logger[_0x514983(0x1fc)](_0x514983(0x1d5));if(newBot)addBot();logger[_0x514983(0x1fc)](_0x514983(0x30a)),logger[_0x514983(0x1fc)](''),await logger[_0x514983(0x395)](_0x514983(0x345)+nodeversion),await logger[_0x514983(0x395)]('Network\x20Interfaces:',_0x11960f);}function startSocket(){const _0x3ee79f=_0x4652e8;io['on'](_0x3ee79f(0x2d9),_0x3560fe=>{const _0x14d7d2=_0x3ee79f;let _0x89213e,_0x331dc1,_0x4cc926,_0x3cbd39,_0x2ac865;const _0x22c567=_0x3560fe['handshake'][_0x14d7d2(0x2e4)][_0x14d7d2(0x32d)];_0x331dc1=_0x22c567[_0x14d7d2(0x312)](/bot[0-9]{3}/);if(_0x331dc1)_0x4cc926=_0x331dc1[0x0][_0x14d7d2(0x312)](/[0-9]{3}/);if(_0x4cc926)_0x89213e=_0x4cc926[0x0];else _0x89213e=_0x14d7d2(0x2e2);const _0x2e7db6=_0x3560fe[_0x14d7d2(0x33b)][_0x14d7d2(0x344)][_0x14d7d2(0x2dc)];if(!_0x2e7db6)_0x3560fe['emit']('status',{'publicKey':secure['publicKey']});else{_0x3cbd39=timelyDecrypt(_0x2e7db6,![]);if(!_0x3cbd39)_0x3560fe[_0x14d7d2(0x214)](_0x14d7d2(0x324),{'publicKey':secure['publicKey']});else{_0x2ac865=normalizeIP(_0x3560fe[_0x14d7d2(0x22d)][_0x14d7d2(0x1ee)])[_0x14d7d2(0x31a)];if(!devices[_0x3cbd39])devices[_0x3cbd39]={'uuid':_0x3cbd39,'access':{'token':null}};devices[_0x3cbd39]['ip']=_0x2ac865;const _0x202a02=addClient(_0x3560fe['id'],_0x3cbd39,_0x89213e);setAccess(_0x202a02),emitMessages(),_0x3560fe['on'](_0x14d7d2(0x219),_0x54bdc0=>{const _0x9ec036=_0x14d7d2,_0x4dbed5=timelyDecrypt(_0x54bdc0['password'],!![],_0x9ec036(0x31c));if(_0x4dbed5){_0x54bdc0={'username':_0x54bdc0[_0x9ec036(0x2aa)],'password':_0x4dbed5},devices[_0x3cbd39][_0x9ec036(0x1de)]=validateCredentials(_0x54bdc0,_0x3cbd39);if(devices[_0x3cbd39][_0x9ec036(0x1de)]['allow']==![]&&devices[_0x3cbd39]['access'][_0x9ec036(0x39a)]==_0x9ec036(0x340))_0x3560fe[_0x9ec036(0x214)](_0x9ec036(0x324),{'access':devices[_0x3cbd39][_0x9ec036(0x1de)]}),loginAccess2FA(_0x3cbd39,_0x2ac865);else{if(devices[_0x3cbd39][_0x9ec036(0x1de)][_0x9ec036(0x3aa)]==![]&&devices[_0x3cbd39][_0x9ec036(0x1de)][_0x9ec036(0x39a)]==_0x9ec036(0x1ef))_0x3560fe['emit']('status',{'access':devices[_0x3cbd39][_0x9ec036(0x1de)]});else devices[_0x3cbd39][_0x9ec036(0x1de)][_0x9ec036(0x3aa)]&&devices[_0x3cbd39][_0x9ec036(0x1de)][_0x9ec036(0x39a)]=='login\x20token\x20generated'&&(getClientsWithUuid(_0x3cbd39)[_0x9ec036(0x2f5)](_0x170442=>{setAccess(_0x170442);}),logger['debug'](_0x9ec036(0x360)+_0x3cbd39[_0x9ec036(0x2ed)](-0x8)),setTokenRefresh(_0x3cbd39),setSessionTimeout(_0x9ec036(0x219),_0x3cbd39));}}else logger[_0x9ec036(0x308)](_0x9ec036(0x19a));}),_0x3560fe['on'](_0x14d7d2(0x347),()=>{resetPassword();}),_0x3560fe['on'](_0x14d7d2(0x1f7),_0x76a6f0=>{removeClient(_0x3560fe['id']);}),_0x89213e=='botmanager'&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x36f7a1){const _0x375b31=_0x4652e8;if(_0x36f7a1!=_0x375b31(0x2e2)&&config[_0x375b31(0x1aa)]!=''){if(pid[_0x36f7a1])pid[_0x36f7a1][_0x375b31(0x335)]({'function':_0x375b31(0x23e),'args':null});}_0x36f7a1!=_0x375b31(0x2e2)&&broadcastToBots('bots',JSON[_0x375b31(0x38f)](config));}function reloadBotManager(){const _0x3993db=_0x4652e8;getClientsWithBotID(_0x3993db(0x2e2))[_0x3993db(0x2f5)](_0x253353=>{const _0xe74012=_0x3993db;getSocket(_0x253353['id'])[_0xe74012(0x214)](_0xe74012(0x324),{'access':{'allow':![],'reason':_0xe74012(0x1f8),'token':null}});});}function getSocket(_0xaa60fe){const _0x55a235=_0x4652e8,_0x4d7ca5=io[_0x55a235(0x362)][_0x55a235(0x246)]('/');return _0x4d7ca5[_0x55a235(0x272)][_0x55a235(0x246)](_0xaa60fe);}function setAccess(_0x175587){const _0xf9f99e=_0x4652e8,_0x11e8b9=getSocket(_0x175587['id']),_0x1405e1=_0x175587['uuid'],_0x8ff2d0=_0x175587[_0xf9f99e(0x261)];devices[_0x1405e1][_0xf9f99e(0x1de)]=validateAccess(devices[_0x1405e1][_0xf9f99e(0x1de)]['token'],_0x1405e1),logger[_0xf9f99e(0x395)]('Setting\x20access:\x20'+devices[_0x1405e1][_0xf9f99e(0x1de)][_0xf9f99e(0x39a)]+_0xf9f99e(0x382)+_0x175587['id']['slice'](-0x8)+_0xf9f99e(0x1be)+_0x1405e1[_0xf9f99e(0x2ed)](-0x8)),_0x11e8b9[_0xf9f99e(0x2e6)](_0x1405e1);if(devices[_0x1405e1]['access']['allow']){_0x11e8b9[_0xf9f99e(0x2e6)](_0x8ff2d0);if(_0x8ff2d0==_0xf9f99e(0x2e2))initializeSocketBotManager(_0x11e8b9);else initializeSocketBot(_0x11e8b9);initClient(_0x8ff2d0);}devices[_0x1405e1][_0xf9f99e(0x1de)][_0xf9f99e(0x226)]&&devices[_0x1405e1][_0xf9f99e(0x1de)][_0xf9f99e(0x39a)]=='temporary\x20token\x20generated'&&setSessionTimeout(_0xf9f99e(0x30d),_0x1405e1),devices[_0x1405e1][_0xf9f99e(0x1de)]['token']&&devices[_0x1405e1]['access'][_0xf9f99e(0x39a)]=='2FA\x20login\x20token\x20generated'&&setSessionTimeout(_0xf9f99e(0x219),_0x1405e1),_0x11e8b9['emit'](_0xf9f99e(0x324),{'status':_0x175587['server'],'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x1405e1][_0xf9f99e(0x1de)],'externalip':devices[_0x1405e1]['ip'],'publicKey':secure[_0xf9f99e(0x35e)],'userid':settings[_0xf9f99e(0x1d4)],'validInstallation':validInstallation}),devices[_0x1405e1][_0xf9f99e(0x1de)]['allow']==![]&&devices[_0x1405e1]['access'][_0xf9f99e(0x39a)]==_0xf9f99e(0x230)&&temporaryAccess2FA(_0x1405e1,devices[_0x1405e1]['ip']);}function setSessionTimeout(_0x391912,_0x5050b5){const _0x2dab17=_0x4652e8;let _0x138940;if(_0x391912==_0x2dab17(0x219))_0x138940=loginExpiry*0x3c*0x3e8;else _0x138940=devices[_0x5050b5][_0x2dab17(0x20a)][_0x2dab17(0x39b)]*0x3c*0x3e8-(new Date()[_0x2dab17(0x264)]()-devices[_0x5050b5][_0x2dab17(0x20a)]['timestamp']);if(devices[_0x5050b5]['pidExpireLogin'])clearTimeout(devices[_0x5050b5][_0x2dab17(0x2fd)]);devices[_0x5050b5]['pidExpireLogin']=setTimeout(()=>{const _0x5a6ebf=_0x2dab17;if(devices[_0x5050b5]['pidRefreshToken'])clearTimeout(devices[_0x5050b5][_0x5a6ebf(0x265)]);removeSocketListeners(_0x5050b5),addBlacklist(_0x5050b5),devices[_0x5050b5][_0x5a6ebf(0x20a)]=null,devices[_0x5050b5][_0x5a6ebf(0x3af)]=null,devices[_0x5050b5]['access'][_0x5a6ebf(0x226)]=null,logger[_0x5a6ebf(0x395)](_0x5a6ebf(0x341)+_0x5050b5[_0x5a6ebf(0x2ed)](-0x8)),devices[_0x5050b5][_0x5a6ebf(0x1de)]=validateAccess(devices[_0x5050b5][_0x5a6ebf(0x1de)][_0x5a6ebf(0x226)],_0x5050b5),!(devices[_0x5050b5]['access'][_0x5a6ebf(0x3aa)]&&devices[_0x5050b5]['access']['reason']=='login\x20not\x20required')&&(_0x391912==_0x5a6ebf(0x219)?io['to'](_0x5050b5)['emit'](_0x5a6ebf(0x324),{'access':{'allow':![],'reason':_0x5a6ebf(0x26e),'token':null}}):io['to'](_0x5050b5)['emit'](_0x5a6ebf(0x324),{'access':{'allow':![],'reason':_0x5a6ebf(0x281),'token':null}})),devices[_0x5050b5]['access'][_0x5a6ebf(0x226)]=null;},_0x138940);}function setTokenRefresh(_0x3e9bdf){const _0x40eaef=_0x4652e8;if(devices[_0x3e9bdf][_0x40eaef(0x265)])clearTimeout(devices[_0x3e9bdf][_0x40eaef(0x265)]);devices[_0x3e9bdf][_0x40eaef(0x265)]=setTimeout(()=>{const _0x23fc66=_0x40eaef;getClientsWithUuid(_0x3e9bdf)[_0x23fc66(0x358)]!=0x0?(devices[_0x3e9bdf]['access']=refreshToken(_0x3e9bdf),io['to'](_0x3e9bdf)[_0x23fc66(0x214)](_0x23fc66(0x324),{'status':_0x23fc66(0x1a9),'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x3e9bdf][_0x23fc66(0x1de)],'externalip':devices[_0x3e9bdf]['ip'],'publicKey':secure[_0x23fc66(0x35e)],'validInstallation':validInstallation}),setTokenRefresh(_0x3e9bdf)):clearTimeout(devices[_0x3e9bdf]['pidRefreshToken']);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x46949e){const _0x202f0c=_0x4652e8,_0x369deb=getClient(_0x46949e['id'])[_0x202f0c(0x2e3)];_0x46949e[_0x202f0c(0x214)](_0x202f0c(0x339),config),_0x46949e[_0x202f0c(0x214)]('settings',cleanSettings()),_0x46949e['on'](_0x202f0c(0x24e),_0x295b92=>{const _0x4d089d=_0x202f0c;if(validateAccess(_0x295b92,_0x369deb)[_0x4d089d(0x3aa)])addBot();else logger[_0x4d089d(0x308)](_0x4d089d(0x1d6));}),_0x46949e['on']('update-bot',(_0x2db56c,_0xfd2559)=>{const _0x4dbeea=_0x202f0c;if(validateAccess(_0xfd2559,_0x369deb)[_0x4dbeea(0x3aa)])toggleBot(_0x2db56c[_0x4dbeea(0x22e)],_0x2db56c[_0x4dbeea(0x324)],_0x2db56c[_0x4dbeea(0x2a5)]);else logger[_0x4dbeea(0x308)](_0x4dbeea(0x351));}),_0x46949e['on'](_0x202f0c(0x1c6),(_0x24d27f,_0x40c5c5)=>{const _0x3fdfd3=_0x202f0c;if(validateAccess(_0x40c5c5,_0x369deb)[_0x3fdfd3(0x3aa)])toggleBotMode(_0x24d27f);else logger['full'](_0x3fdfd3(0x351));}),_0x46949e['on'](_0x202f0c(0x300),(_0x116841,_0x1bc83a)=>{const _0x15dcc8=_0x202f0c;if(validateAccess(_0x1bc83a,_0x369deb)[_0x15dcc8(0x3aa)])deleteBot(_0x116841);else logger[_0x15dcc8(0x308)](_0x15dcc8(0x2c8));}),_0x46949e['on'](_0x202f0c(0x255),(_0x48a65d,_0x5ab505)=>{if(validateAccess(_0x5ab505,_0x369deb)['allow'])storeSettings(_0x48a65d,!![]);else logger['full']('Unauthorized\x20attempt\x20to\x20update\x20settings');}),_0x46949e['on'](_0x202f0c(0x1ae),_0x6cd986=>{const _0x218364=_0x202f0c;if(validateAccess(_0x6cd986,_0x369deb)[_0x218364(0x3aa)])updateBB('update');else logger[_0x218364(0x308)]('Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot');}),_0x46949e['on'](_0x202f0c(0x322),_0x3878c2=>{const _0x218375=_0x202f0c;if(validateAccess(_0x3878c2,_0x369deb)[_0x218375(0x3aa)])updateBB('reinstall');else logger[_0x218375(0x308)](_0x218375(0x399));}),_0x46949e['on'](_0x202f0c(0x298),_0x37b5dc=>{const _0x1f4e2b=_0x202f0c;if(validateAccess(_0x37b5dc,_0x369deb)[_0x1f4e2b(0x3aa)]){const _0x4137cf=getClient(_0x46949e['id']);if(_0x4137cf)getBackupFiles(_0x4137cf['uuid']);else logger[_0x1f4e2b(0x308)](_0x1f4e2b(0x34e));}else logger[_0x1f4e2b(0x308)](_0x1f4e2b(0x20f));}),_0x46949e['on'](_0x202f0c(0x26f),(_0x154d72,_0x1c0210)=>{const _0x46b112=_0x202f0c;if(validateAccess(_0x1c0210,_0x369deb)[_0x46b112(0x3aa)])restoreBackupFile(_0x154d72);else logger[_0x46b112(0x308)]('Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file');}),_0x46949e['on']('get-messages',_0x124e47=>{const _0x3a14c3=_0x202f0c;if(validateAccess(_0x124e47,_0x369deb)[_0x3a14c3(0x3aa)])getMessages();else logger[_0x3a14c3(0x308)](_0x3a14c3(0x231));}),_0x46949e['on']('confirm-message',(_0x5d9305,_0x34b88e)=>{const _0x391399=_0x202f0c;if(validateAccess(_0x34b88e,_0x369deb)['allow'])confirmMessage(_0x5d9305);else logger[_0x391399(0x308)](_0x391399(0x318));}),_0x46949e['on'](_0x202f0c(0x279),_0x4ea1b1=>{const _0x2b9023=_0x202f0c;if(validateAccess(_0x4ea1b1,_0x369deb)[_0x2b9023(0x3aa)]){if(devices[_0x369deb][_0x2b9023(0x265)])clearTimeout(devices[_0x369deb][_0x2b9023(0x265)]);if(devices[_0x369deb][_0x2b9023(0x2fd)])clearTimeout(devices[_0x369deb][_0x2b9023(0x2fd)]);removeSocketListeners(getClient(_0x46949e['id'])['uuid']),addBlacklist(_0x369deb),devices[_0x369deb][_0x2b9023(0x20a)]=null,devices[_0x369deb]['telegram2FaApproval']=null,devices[_0x369deb][_0x2b9023(0x1de)][_0x2b9023(0x226)]=null,logger['debug'](_0x2b9023(0x38e)+_0x369deb[_0x2b9023(0x2ed)](-0x8)),io['to'](getClient(_0x46949e['id'])['uuid'])[_0x2b9023(0x214)](_0x2b9023(0x324),{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logger[_0x2b9023(0x308)]('Unauthorized\x20attempt\x20to\x20log\x20out');});}function initializeSocketBot(_0xc84038){const _0x20fb95=_0x4652e8,_0x4cbd86=getClient(_0xc84038['id'])[_0x20fb95(0x261)],_0x20a11f=getClient(_0xc84038['id'])[_0x20fb95(0x2e3)];_0xc84038['on'](_0x20fb95(0x1b7),(_0x4263fa,_0x449783)=>{const _0x2fe98b=_0x20fb95;if(validateAccess(_0x449783,_0x20a11f)[_0x2fe98b(0x3aa)]){if(pid[_0x4cbd86])pid[_0x4cbd86][_0x2fe98b(0x335)]({'function':_0x2fe98b(0x1ea),'args':_0x4263fa});}else logger[_0x2fe98b(0x308)](_0x2fe98b(0x202));}),_0xc84038['on']('delete-alerts',(_0x46b010,_0x4184a0)=>{const _0x6a9f5d=_0x20fb95;if(validateAccess(_0x4184a0,_0x20a11f)[_0x6a9f5d(0x3aa)]){if(pid[_0x4cbd86])pid[_0x4cbd86][_0x6a9f5d(0x335)]({'function':_0x6a9f5d(0x1e7),'args':_0x46b010});}else logger[_0x6a9f5d(0x308)]('Unauthorized\x20attempt\x20to\x20delete\x20alerts');}),_0xc84038['on'](_0x20fb95(0x291),(_0x49376a,_0x135ba1)=>{const _0x31e5ef=_0x20fb95;if(validateAccess(_0x135ba1,_0x20a11f)['allow']){if(pid[_0x4cbd86])pid[_0x4cbd86][_0x31e5ef(0x335)]({'function':'getPortfolio','args':_0x49376a});}else logger['full'](_0x31e5ef(0x1b2));}),_0xc84038['on'](_0x20fb95(0x258),(_0x369e28,_0x31e751)=>{const _0xf9b482=_0x20fb95;if(validateAccess(_0x31e751,_0x20a11f)[_0xf9b482(0x3aa)]){if(pid[_0x4cbd86])pid[_0x4cbd86]['send']({'function':'storeConfiguration','args':_0x369e28});}else logger[_0xf9b482(0x308)]('Unauthorized\x20attempt\x20to\x20store\x20configuration');}),_0xc84038['on']('store-headless',(_0xa602e2,_0x3f74f6)=>{const _0x1dab7a=_0x20fb95;if(validateAccess(_0x3f74f6,_0x20a11f)['allow']){if(pid[_0x4cbd86])pid[_0x4cbd86][_0x1dab7a(0x335)]({'function':_0x1dab7a(0x37b),'args':_0xa602e2});}else logger[_0x1dab7a(0x308)](_0x1dab7a(0x38d));}),_0xc84038['on'](_0x20fb95(0x332),(_0x1ba26e,_0x4d037d)=>{const _0x3563fc=_0x20fb95;if(validateAccess(_0x4d037d,_0x20a11f)[_0x3563fc(0x3aa)]){if(pid[_0x4cbd86])pid[_0x4cbd86][_0x3563fc(0x335)]({'function':_0x3563fc(0x2c4),'args':_0x1ba26e});}else logger[_0x3563fc(0x308)](_0x3563fc(0x222));}),_0xc84038['on'](_0x20fb95(0x343),_0x432743=>{const _0x28171f=_0x20fb95;if(validateAccess(_0x432743,_0x20a11f)[_0x28171f(0x3aa)]){if(pid[_0x4cbd86])pid[_0x4cbd86][_0x28171f(0x335)]({'function':'resetHistory','args':null});}else logger[_0x28171f(0x308)]('Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history');}),_0xc84038['on']('get-starting-balances',_0x4073f6=>{const _0x84c44f=_0x20fb95;if(validateAccess(_0x4073f6,_0x20a11f)[_0x84c44f(0x3aa)]){if(pid[_0x4cbd86])pid[_0x4cbd86]['send']({'function':'getStartingBalances','args':null});}else logger[_0x84c44f(0x308)](_0x84c44f(0x310));}),_0xc84038['on']('place-order',(_0x235563,_0x2db631)=>{const _0x55a0d8=_0x20fb95;if(validateAccess(_0x2db631,_0x20a11f)[_0x55a0d8(0x3aa)]){if(pid[_0x4cbd86])pid[_0x4cbd86][_0x55a0d8(0x335)]({'function':_0x55a0d8(0x2e0),'args':_0x235563});}else logger[_0x55a0d8(0x308)](_0x55a0d8(0x19b));}),_0xc84038['on'](_0x20fb95(0x388),_0x53e405=>{const _0x24977f=_0x20fb95;if(validateAccess(_0x53e405,_0x20a11f)[_0x24977f(0x3aa)]){if(pid[_0x4cbd86])pid[_0x4cbd86][_0x24977f(0x335)]({'function':_0x24977f(0x211),'args':null});}else logger[_0x24977f(0x308)](_0x24977f(0x29a));}),_0xc84038['on'](_0x20fb95(0x2ae),_0x4518fc=>{const _0x36e868=_0x20fb95;if(validateAccess(_0x4518fc,_0x20a11f)[_0x36e868(0x3aa)]){if(pid[_0x4cbd86])pid[_0x4cbd86][_0x36e868(0x335)]({'function':_0x36e868(0x36b),'args':null});}else logger['full'](_0x36e868(0x3a0));}),_0xc84038['on'](_0x20fb95(0x1ae),_0x4942d1=>{const _0x40099f=_0x20fb95;if(validateAccess(_0x4942d1,_0x20a11f)[_0x40099f(0x3aa)])updateBB(_0x40099f(0x19d));else logger[_0x40099f(0x308)](_0x40099f(0x22b));}),_0xc84038['on'](_0x20fb95(0x277),_0x172992=>{const _0x58b0ba=_0x20fb95;if(validateAccess(_0x172992,_0x20a11f)['allow'])getMessages();else logger[_0x58b0ba(0x308)](_0x58b0ba(0x231));}),_0xc84038['on'](_0x20fb95(0x2b3),(_0x1e209f,_0x2ed05a)=>{const _0x211f4e=_0x20fb95;if(validateAccess(_0x2ed05a,_0x20a11f)[_0x211f4e(0x3aa)])confirmMessage(_0x1e209f);else logger[_0x211f4e(0x308)](_0x211f4e(0x318));}),_0xc84038['on'](_0x20fb95(0x279),_0x5b3c45=>{const _0x1e92e3=_0x20fb95;if(validateAccess(_0x5b3c45,_0x20a11f)[_0x1e92e3(0x3aa)]){if(devices[_0x20a11f][_0x1e92e3(0x265)])clearTimeout(devices[_0x20a11f]['pidRefreshToken']);if(devices[_0x20a11f][_0x1e92e3(0x2fd)])clearTimeout(devices[_0x20a11f][_0x1e92e3(0x2fd)]);removeSocketListeners(getClient(_0xc84038['id'])[_0x1e92e3(0x2e3)]),addBlacklist(_0x20a11f),devices[_0x20a11f]['telegramIpApproval']=null,devices[_0x20a11f][_0x1e92e3(0x3af)]=null,devices[_0x20a11f]['access'][_0x1e92e3(0x226)]=null,logger[_0x1e92e3(0x395)](_0x1e92e3(0x38e)+_0x20a11f[_0x1e92e3(0x2ed)](-0x8)),io['to'](getClient(_0xc84038['id'])[_0x1e92e3(0x2e3)])[_0x1e92e3(0x214)](_0x1e92e3(0x324),{'access':{'allow':![],'reason':_0x1e92e3(0x30c),'token':null}});}else logger['full'](_0x1e92e3(0x253));});}function removeSocketListeners(_0x42e829){const _0x46aade=_0x4652e8;getClientsWithUuid(_0x42e829)[_0x46aade(0x2f5)](_0x4dbce1=>{const _0x12e3df=_0x46aade;getSocket(_0x4dbce1['id'])[_0x12e3df(0x1df)]();});}function cleanSettings(){const _0x15489e=_0x4652e8;let _0x3982d0=settings;return settings[_0x15489e(0x321)]&&settings[_0x15489e(0x321)]!=''&&(_0x3982d0={..._0x3982d0,'telegramToken':_0x15489e(0x32a)}),settings['bbPassword']&&settings[_0x15489e(0x2f4)]!=''&&(_0x3982d0={..._0x3982d0,'bbPassword':_0x15489e(0x32a)}),settings['marketcapApi']&&settings[_0x15489e(0x1b4)]!=''&&(_0x3982d0={..._0x3982d0,'marketcapApi':_0x15489e(0x32a)}),(settings[_0x15489e(0x2f4)]&&settings[_0x15489e(0x2f4)]==_0x15489e(0x397)||settings[_0x15489e(0x321)]&&settings[_0x15489e(0x321)]==_0x15489e(0x397)||settings['marketcapApi']&&settings[_0x15489e(0x1b4)]=='***')&&(_0x3982d0={..._0x3982d0,'restored':{'password':settings[_0x15489e(0x2f4)]==_0x15489e(0x397),'telegram':settings[_0x15489e(0x321)]==_0x15489e(0x397),'marketcap':settings['marketcapApi']=='***'}}),_0x3982d0;}async function updateBB(_0x31f24f){const _0x14c182=_0x4652e8;await backupConfigFiles(),installingUpdate=!![],config[_0x14c182(0x2f5)](_0x461371=>{const _0x2195ea=_0x14c182;restartBot(_0x461371[_0x2195ea(0x22e)]);});if(_0x31f24f==_0x14c182(0x19d))process[_0x14c182(0x335)]({'update':!![],'environment':environment},_0x3ee9de=>{});else _0x31f24f==_0x14c182(0x2c1)&&process[_0x14c182(0x335)]({'reinstall':!![],'environment':environment},_0x4e3927=>{});}function startBot(_0x151a8f,_0x59e1ea,_0x353722){const _0xa4540e=_0x4652e8;if(debugging)_0x151a8f[_0xa4540e(0x39e)]('-d');if(recreate)_0x151a8f[_0xa4540e(0x39e)]('-r');let _0x7548ae=![];const _0x2fb664=_0x151a8f[0x0];_0x59e1ea={..._0x59e1ea,'stdio':[_0xa4540e(0x33f),_0xa4540e(0x33f),_0xa4540e(0x33f),_0xa4540e(0x1f3)]},pid[_0x2fb664]=childProcess[_0xa4540e(0x2ce)](botfile,_0x151a8f,_0x59e1ea),pid[_0x2fb664]['on']('message',_0x49f27b=>{const _0x493d6e=_0xa4540e;switch(Object['keys'](_0x49f27b)[0x0]){case _0x493d6e(0x201):updateBotName(_0x2fb664,_0x49f27b[_0x493d6e(0x201)]);break;case _0x493d6e(0x1fa):updateBotManager();break;case _0x493d6e(0x324):updateStatus(_0x2fb664,_0x49f27b[_0x493d6e(0x324)]);break;case _0x493d6e(0x2a5):updateLive(_0x2fb664,_0x49f27b[_0x493d6e(0x2a5)]);break;case _0x493d6e(0x1cd):updateLive(_0x2fb664,_0x49f27b[_0x493d6e(0x1cd)]),io['to'](_0x2fb664)[_0x493d6e(0x214)](_0x493d6e(0x324),{'access':{'allow':![],'reason':_0x493d6e(0x1f8),'token':null}});break;case _0x493d6e(0x386):_0x49f27b[_0x493d6e(0x386)]==_0x493d6e(0x286)&&restartBot(_0x2fb664);_0x49f27b[_0x493d6e(0x386)]==_0x493d6e(0x1bb)&&toggleBot(_0x2fb664,_0x493d6e(0x25a),_0x493d6e(0x28d));break;case _0x493d6e(0x242):sendTelegramBot(_0x2fb664,_0x49f27b[_0x493d6e(0x242)]);break;case _0x493d6e(0x21e):sendTelegramMsg(_0x49f27b[_0x493d6e(0x21e)]);break;case _0x493d6e(0x1db):io['to'](_0x2fb664)[_0x493d6e(0x214)](_0x49f27b[_0x493d6e(0x1db)],_0x49f27b[_0x493d6e(0x2cb)]);break;}}),pid[_0x2fb664]['on'](_0xa4540e(0x393),function(_0x38f09b){if(_0x7548ae)return;_0x7548ae=!![],_0x353722(_0x38f09b);}),pid[_0x2fb664]['on'](_0xa4540e(0x26b),async function(_0x53dd6d){const _0x1a8c43=_0xa4540e;if(terminating)return;if(installingUpdate){io[_0x1a8c43(0x38b)]();return;}if(_0x7548ae)return;_0x7548ae=!![],_0x353722(null);const _0x487ad4=dbConfig['get'](_0x1a8c43(0x339))[_0x1a8c43(0x20b)]({'botID':_0x2fb664})[_0x1a8c43(0x260)]();_0x487ad4&&(_0x487ad4['status']==_0x1a8c43(0x2ff)||_0x487ad4['status']==_0x1a8c43(0x303))&&(await sleep(0x3e8),updateLive(_0x2fb664,_0x1a8c43(0x28d)),logger[_0x1a8c43(0x308)](_0x1a8c43(0x1e5)+botRef(_0x2fb664)),startBot([_0x2fb664,userID],{'cwd':bbpath},function(_0x48231a){const _0x453e75=_0x1a8c43;if(_0x48231a)logger[_0x453e75(0x308)](_0x48231a);}));});}function stopBot(_0x1de6a1){const _0x4b3198=_0x4652e8;getClientsWithBotID(_0x1de6a1)['forEach'](_0x1d3063=>{const _0x32e2b9=_0x234a;getSocket(_0x1d3063['id'])[_0x32e2b9(0x1f7)](!![]),removeClient(_0x1d3063['id']);}),pid[_0x1de6a1]&&(pid[_0x1de6a1][_0x4b3198(0x1bb)](),pid[_0x1de6a1]=null);}function stopAllBots(){const _0x5e54dc=_0x4652e8;terminating=!![];const _0x2e987c=getEnabledBots();_0x2e987c[_0x5e54dc(0x2f5)](_0x1e1791=>{const _0x23d623=_0x5e54dc;stopBot(_0x1e1791[_0x23d623(0x22e)]);});}function restartBot(_0x132e38){const _0x52b895=_0x4652e8;if(pid[_0x132e38])pid[_0x132e38][_0x52b895(0x1bb)]();}function addBot(){const _0x3c81c3=_0x4652e8;let _0x5632fd;for(let _0x1a35af=0x1;_0x1a35af<0x3e9;_0x1a35af++){_0x5632fd=_0x1a35af[_0x3c81c3(0x36e)]()['padStart'](0x3,'0');let _0x5295c1=config[_0x3c81c3(0x20b)](_0x4328ec=>_0x4328ec[_0x3c81c3(0x22e)]==_0x5632fd);if(!_0x5295c1)break;}if(_0x5632fd===_0x3c81c3(0x294)){logger[_0x3c81c3(0x308)]('The\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached');return;}logger[_0x3c81c3(0x308)](_0x3c81c3(0x19e)+_0x5632fd),dbConfig['get'](_0x3c81c3(0x339))[_0x3c81c3(0x39e)]({'botID':_0x5632fd,'botname':'Bot\x20'+_0x5632fd,'status':_0x3c81c3(0x303),'live':''})[_0x3c81c3(0x357)](),startBot([_0x5632fd,userID],{'cwd':bbpath},function(_0x322b15){const _0x1952fe=_0x3c81c3;if(_0x322b15)logger[_0x1952fe(0x308)](_0x322b15);}),config=getConfiguration(),io['to'](_0x3c81c3(0x2e2))[_0x3c81c3(0x214)](_0x3c81c3(0x339),config),broadcastToBots(_0x3c81c3(0x339),JSON[_0x3c81c3(0x38f)](config));}function deleteBot(_0x39b3ee){const _0x5378f9=_0x4652e8;getClientsWithBotID(_0x39b3ee)['forEach'](_0x4fa4e4=>{const _0x376701=_0x234a;getSocket(_0x4fa4e4['id'])[_0x376701(0x1f7)](!![]),removeClient(_0x4fa4e4['id']);}),dbConfig['get']('bots')[_0x5378f9(0x37c)]({'botID':_0x39b3ee})[_0x5378f9(0x357)](),logger[_0x5378f9(0x308)](_0x5378f9(0x2fc)+_0x39b3ee),stopBot(_0x39b3ee);try{if(fs[_0x5378f9(0x25e)](path[_0x5378f9(0x2e6)](configpath,'bot-'+_0x39b3ee+_0x5378f9(0x2f9))))fs[_0x5378f9(0x3b3)](path['join'](configpath,_0x5378f9(0x370)+_0x39b3ee+_0x5378f9(0x2f9)));if(fs['existsSync'](path[_0x5378f9(0x2e6)](configpath,'bot-'+_0x39b3ee+_0x5378f9(0x3b0))))fs[_0x5378f9(0x3b3)](path[_0x5378f9(0x2e6)](configpath,_0x5378f9(0x370)+_0x39b3ee+_0x5378f9(0x3b0)));if(fs['existsSync'](path[_0x5378f9(0x2e6)](configpath,_0x5378f9(0x370)+_0x39b3ee+_0x5378f9(0x237))))fs[_0x5378f9(0x3b3)](path[_0x5378f9(0x2e6)](configpath,_0x5378f9(0x370)+_0x39b3ee+_0x5378f9(0x237)));if(fs[_0x5378f9(0x25e)](path[_0x5378f9(0x2e6)](configpath,_0x5378f9(0x370)+_0x39b3ee+'-results.json')))fs[_0x5378f9(0x3b3)](path['join'](configpath,_0x5378f9(0x370)+_0x39b3ee+_0x5378f9(0x35a)));}catch(_0x2b7022){if(_0x2b7022)logger[_0x5378f9(0x308)](_0x5378f9(0x2f1),_0x2b7022);}config=getConfiguration(),io['to'](_0x5378f9(0x2e2))[_0x5378f9(0x214)](_0x5378f9(0x339),config),broadcastToBots(_0x5378f9(0x339),JSON[_0x5378f9(0x38f)](config));}function toggleBot(_0x4ca104,_0x35e57e,_0x1ee435){const _0x1823cc=_0x4652e8;dbConfig[_0x1823cc(0x246)](_0x1823cc(0x339))[_0x1823cc(0x20b)]({'botID':_0x4ca104})[_0x1823cc(0x1ff)]({'status':_0x35e57e})[_0x1823cc(0x1ff)]({'live':_0x1ee435})[_0x1823cc(0x357)]();const _0x23c823=botRef(_0x4ca104);if(_0x35e57e==_0x1823cc(0x2ff)||_0x35e57e==_0x1823cc(0x303))logger[_0x1823cc(0x308)](_0x1823cc(0x2cc)+_0x23c823),startBot([_0x4ca104,userID],{'cwd':bbpath},function(_0x4bbef0){if(_0x4bbef0)logger['full'](_0x4bbef0);});else(_0x35e57e==_0x1823cc(0x25a)||_0x35e57e==_0x1823cc(0x330))&&(logger[_0x1823cc(0x308)]('Disabled\x20'+_0x23c823),stopBot(_0x4ca104));config=getConfiguration(),io['to'](_0x1823cc(0x2e2))[_0x1823cc(0x214)](_0x1823cc(0x339),config),broadcastToBots(_0x1823cc(0x339),JSON[_0x1823cc(0x38f)](config));}function toggleStatus(_0x21e813){const _0x4af42d=_0x4652e8;let _0x59a4a3=dbConfig[_0x4af42d(0x246)]('bots')[_0x4af42d(0x20b)]({'botID':_0x21e813})[_0x4af42d(0x260)](),_0x2240b3;if(_0x59a4a3[_0x4af42d(0x324)]===_0x4af42d(0x2ff))_0x2240b3=_0x4af42d(0x25a);else{if(_0x59a4a3[_0x4af42d(0x324)]===_0x4af42d(0x303))_0x2240b3=_0x4af42d(0x330);else{if(_0x59a4a3['status']==='new-disabled')_0x2240b3='new';else{if(_0x59a4a3[_0x4af42d(0x324)]==='disabled')_0x2240b3=_0x4af42d(0x2ff);}}}return _0x2240b3;}function updateStatus(_0x167023,_0x43d48f){const _0x1c3e6b=_0x4652e8;dbConfig['get'](_0x1c3e6b(0x339))[_0x1c3e6b(0x20b)]({'botID':_0x167023})[_0x1c3e6b(0x1ff)]({'status':_0x43d48f})[_0x1c3e6b(0x357)](),config=getConfiguration(),io['to'](_0x1c3e6b(0x2e2))[_0x1c3e6b(0x214)]('bots',config),broadcastToBots(_0x1c3e6b(0x339),JSON['stringify'](config));}function updateLive(_0x2553fe,_0x10578d){const _0x157ac8=_0x4652e8;dbConfig['get'](_0x157ac8(0x339))[_0x157ac8(0x20b)]({'botID':_0x2553fe})[_0x157ac8(0x1ff)]({'live':_0x10578d})['write'](),config=getConfiguration(),io['to'](_0x157ac8(0x2e2))[_0x157ac8(0x214)](_0x157ac8(0x339),config),broadcastToBots(_0x157ac8(0x339),JSON['stringify'](config));}function updateBotName(_0x55449d,_0x2aa754){const _0x4f5073=_0x4652e8;dbConfig[_0x4f5073(0x246)]('bots')[_0x4f5073(0x20b)]({'botID':_0x55449d})[_0x4f5073(0x1ff)]({'botname':_0x2aa754})['write'](),config=getConfiguration(),io['to'](_0x4f5073(0x2e2))[_0x4f5073(0x214)]('bots',config),broadcastToBots(_0x4f5073(0x339),JSON[_0x4f5073(0x38f)](config));}function updateBotManager(){const _0x89b384=_0x4652e8;config=getConfiguration(),io['to'](_0x89b384(0x2e2))[_0x89b384(0x214)](_0x89b384(0x339),config),broadcastToBots(_0x89b384(0x339),JSON[_0x89b384(0x38f)](config));}function toggleBotMode(_0x101175){const _0x58300b=_0x4652e8;if(pid[_0x101175])pid[_0x101175]['send']({'function':'toggleBotMode','args':null});else{const _0x1714db=configpath+_0x58300b(0x370)+_0x101175+_0x58300b(0x2f9),_0x4fc10a=fs[_0x58300b(0x373)](_0x1714db),_0x5b7f51=JSON[_0x58300b(0x257)](_0x4fc10a),_0x232110=_0x5b7f51[_0x58300b(0x261)][0x0][_0x58300b(0x28c)];_0x5b7f51['bot'][0x0][_0x58300b(0x28c)]=!_0x232110;const _0x25a12f=JSON[_0x58300b(0x38f)](_0x5b7f51,null,0x2);fs['writeFileSync'](_0x1714db,_0x25a12f),config=getConfiguration(),io['to']('botmanager')[_0x58300b(0x214)](_0x58300b(0x339),config),broadcastToBots(_0x58300b(0x339),JSON[_0x58300b(0x38f)](config));}}function validateTelegram(_0x5209cd){const _0x2a0b69=_0x4652e8;if(_0x5209cd[_0x2a0b69(0x326)][_0x2a0b69(0x2aa)]!=settings[_0x2a0b69(0x210)]&&'@'+_0x5209cd[_0x2a0b69(0x326)][_0x2a0b69(0x2aa)]!=settings['telegramUsername']||_0x5209cd[_0x2a0b69(0x1e3)]['id']!=settings[_0x2a0b69(0x365)])return sendTelegram(_0x5209cd[_0x2a0b69(0x1e3)]['id'],_0x2a0b69(0x1fb),{'parse_mode':_0x2a0b69(0x314)}),![];return!![];}function botRef(_0x307a70){const _0x56d5c1=_0x4652e8,_0x16b014=getBotAttributes(_0x307a70),_0x12749d=_0x16b014[_0x56d5c1(0x25f)]?_0x16b014[_0x56d5c1(0x201)]:'Bot\x20'+_0x307a70;return _0x12749d;}async function initTelegram(){const _0x236c6a=_0x4652e8;tgBot&&(await tgBot[_0x236c6a(0x386)](),await sleep(0x7d0));tgBot=new Telegraf(settings[_0x236c6a(0x321)]);let _0x5e097f='You\x20can\x20use\x20the\x20following\x20commands:\x0a';_0x5e097f+='\x0a',_0x5e097f+=_0x236c6a(0x3b2),_0x5e097f+=_0x236c6a(0x328),_0x5e097f+=_0x236c6a(0x2d7),_0x5e097f+=_0x236c6a(0x2b8),_0x5e097f+=_0x236c6a(0x2f8),_0x5e097f+=_0x236c6a(0x218),_0x5e097f+=_0x236c6a(0x2e7),_0x5e097f+=_0x236c6a(0x377),_0x5e097f+=_0x236c6a(0x35d),_0x5e097f+=_0x236c6a(0x284),_0x5e097f+='/portfolio\x20-\x20show\x20bot\x20portfolio\x0a',_0x5e097f+=_0x236c6a(0x34b),_0x5e097f+='/backup\x20-\x20receive\x20backup\x20files\x0a',_0x5e097f+=_0x236c6a(0x2a7),_0x5e097f+=_0x236c6a(0x30e),_0x5e097f+=_0x236c6a(0x398);let _0x47c80a=_0x236c6a(0x2a4);_0x47c80a+='\x0a',_0x47c80a+=_0x5e097f,tgBot[_0x236c6a(0x353)]((_0x49e362,_0x24aa35)=>{const _0x4d4f78=_0x236c6a;logger[_0x4d4f78(0x1fc)](getTimeStamp()+_0x4d4f78(0x20d)),logger[_0x4d4f78(0x395)](_0x4d4f78(0x20c),_0x49e362);}),tgBot[_0x236c6a(0x2b9)](async(_0x3ea0c6,_0x4e2e40)=>{const _0x1bf4be=_0x236c6a;if(settings['telegramChatId']||_0x3ea0c6['update'][_0x1bf4be(0x305)][_0x1bf4be(0x33a)]!='/start'){if(!validateTelegram(_0x3ea0c6))return;}_0x4e2e40();}),tgBot[_0x236c6a(0x1f2)](_0x236c6a(0x1cf),async _0x4bcd55=>{const _0x2357a4=_0x236c6a;if(_0x4bcd55[_0x2357a4(0x326)][_0x2357a4(0x2aa)]==settings[_0x2357a4(0x210)]||'@'+_0x4bcd55[_0x2357a4(0x326)][_0x2357a4(0x2aa)]==settings['telegramUsername']){if(!settings['telegramChatId'])updateSetting(_0x2357a4(0x365),_0x4bcd55['chat']['id']);else{if(!validateTelegram(_0x4bcd55))return;}}else{if(!validateTelegram(_0x4bcd55))return;}updateSetting('telegramEnabled',!![]),await sendTelegram(_0x4bcd55['chat']['id'],_0x47c80a);}),tgBot[_0x236c6a(0x1f2)](_0x236c6a(0x270),async _0x273125=>{const _0x34c850=_0x236c6a;updateSetting(_0x34c850(0x2a6),!![]),await sendTelegram(_0x273125['chat']['id'],_0x34c850(0x1b9));}),tgBot[_0x236c6a(0x1f2)](_0x236c6a(0x295),async _0xfd65fc=>{const _0x49ead6=_0x236c6a;await sendTelegram(_0xfd65fc['chat']['id'],'Notifications\x20disabled'),updateSetting(_0x49ead6(0x2a6),![]);}),tgBot['command'](_0x236c6a(0x268),async _0x5742a5=>{const _0x7a423c=_0x236c6a,_0x32ea13=Markup['inlineKeyboard']([Markup[_0x7a423c(0x1d8)][_0x7a423c(0x3a2)](_0x7a423c(0x1a4),_0x7a423c(0x248)),Markup[_0x7a423c(0x1d8)]['callback'](_0x7a423c(0x1e9),'config_alerts'),Markup[_0x7a423c(0x1d8)][_0x7a423c(0x3a2)](_0x7a423c(0x27e),_0x7a423c(0x200))]);_0x5742a5[_0x7a423c(0x2ca)]('Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?',_0x32ea13);}),tgBot['action']('config_orders',async _0x348b89=>{const _0xc942a4=_0x236c6a;_0x348b89['editMessageReplyMarkup'](),updateSetting(_0xc942a4(0x1a3),_0xc942a4(0x1ec)),updateSetting('telegramEnabled',!![]),await sendTelegram(_0x348b89[_0xc942a4(0x1e3)]['id'],_0xc942a4(0x1e6));}),tgBot['action'](_0x236c6a(0x250),async _0x5cd67c=>{const _0x3dbbe5=_0x236c6a;_0x5cd67c[_0x3dbbe5(0x35f)](),updateSetting(_0x3dbbe5(0x1a3),_0x3dbbe5(0x383)),updateSetting(_0x3dbbe5(0x2a6),!![]),await sendTelegram(_0x5cd67c[_0x3dbbe5(0x1e3)]['id'],'Ok,\x20will\x20send\x20alert\x20notifications\x20only');}),tgBot[_0x236c6a(0x349)](_0x236c6a(0x200),async _0x4cfbe2=>{const _0x25a207=_0x236c6a;_0x4cfbe2[_0x25a207(0x35f)](),updateSetting(_0x25a207(0x1a3),_0x25a207(0x2fe)),updateSetting(_0x25a207(0x2a6),!![]),await sendTelegram(_0x4cfbe2[_0x25a207(0x1e3)]['id'],'Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications');}),tgBot[_0x236c6a(0x1f2)](_0x236c6a(0x324),async _0x397d5e=>{const _0x21783c=_0x236c6a,_0x460de1=getBotsWithMode();let _0x4246b5='<b>Balance\x20Bot\x20Status:</b>\x0a';config[_0x21783c(0x2f5)](_0x5d02bf=>{const _0x48711e=_0x21783c,_0x249ff8=_0x460de1[_0x48711e(0x20b)](_0x39ae74=>_0x39ae74[_0x48711e(0x22e)]==_0x5d02bf[_0x48711e(0x22e)])[_0x48711e(0x39d)];_0x4246b5+=_0x48711e(0x30b)+_0x5d02bf['botID']+':\x20'+_0x5d02bf[_0x48711e(0x324)]+_0x48711e(0x1f1)+_0x249ff8+_0x48711e(0x1f1)+_0x5d02bf[_0x48711e(0x2a5)]+'\x0a';}),_0x4246b5+='\x0a',_0x4246b5+=_0x21783c(0x3b5),_0x4246b5+=!settings[_0x21783c(0x2a6)]?_0x21783c(0x22f):_0x21783c(0x394),_0x4246b5+=settings['telegramEnabled']?settings[_0x21783c(0x1a3)]==_0x21783c(0x2fe)?_0x21783c(0x2f3):'Notifications\x20types:\x20'+settings[_0x21783c(0x1a3)]+_0x21783c(0x3b1):'',await sendTelegram(_0x397d5e['chat']['id'],_0x4246b5,{'parse_mode':_0x21783c(0x314)});}),tgBot['command']('restart',async _0x401932=>{const _0x42944c=_0x236c6a,_0x28e003=getEnabledBots();if(_0x28e003[_0x42944c(0x358)]==0x0)await sendTelegram(_0x401932[_0x42944c(0x1e3)]['id'],_0x42944c(0x208));else{if(_0x28e003[_0x42944c(0x358)]>0x1)_0x28e003['push']({'botID':_0x42944c(0x2fe)});let _0x43f933=[],_0x2ded4c=[];const _0x4c41a5=_0x28e003[_0x42944c(0x358)]%0x4==0x0||_0x28e003[_0x42944c(0x358)]%0x4==0x3||_0x28e003['length']%0x3==0x1?0x4:0x3;let _0x3bb48f=0x0;_0x28e003[_0x42944c(0x2f5)]((_0x10fa53,_0x274db7)=>{const _0xaecb86=_0x42944c;if(_0x274db7%_0x4c41a5==0x0)_0x2ded4c=[];_0x2ded4c[_0xaecb86(0x39e)](Markup[_0xaecb86(0x1d8)][_0xaecb86(0x3a2)](_0x10fa53[_0xaecb86(0x22e)]=='all'?'All\x20bots':botRef(_0x10fa53['botID']),'restart_'+_0x10fa53['botID'])),_0x274db7%_0x4c41a5==0x0&&(_0x43f933[_0x3bb48f]=_0x2ded4c,_0x3bb48f++);});const _0x30dc14=Markup[_0x42944c(0x2cd)](_0x43f933);_0x401932[_0x42944c(0x2ca)]('Which\x20bot\x20do\x20you\x20want\x20to\x20restart?',_0x30dc14);}}),tgBot[_0x236c6a(0x349)](/restart_(.+)/,async _0x52ba03=>{const _0x26b4cc=_0x236c6a,_0x1641d6=_0x52ba03[_0x26b4cc(0x312)][0x1];_0x52ba03[_0x26b4cc(0x35f)](),_0x1641d6==_0x26b4cc(0x2fe)?config['forEach'](_0x504109=>{const _0x45ce1f=_0x26b4cc;restartBot(_0x504109[_0x45ce1f(0x22e)]);}):restartBot(_0x1641d6);}),tgBot[_0x236c6a(0x1f2)]('on',async _0x57d9b3=>{const _0x297f5c=_0x236c6a,_0x2193e4=getDisabledBots();if(_0x2193e4['length']==0x0)await sendTelegram(_0x57d9b3[_0x297f5c(0x1e3)]['id'],_0x297f5c(0x2c5));else{if(_0x2193e4['length']>0x1)_0x2193e4[_0x297f5c(0x39e)]({'botID':_0x297f5c(0x2fe)});let _0x3ed8f0=[],_0x34e98f=[];const _0x320808=_0x2193e4['length']%0x4==0x0||_0x2193e4[_0x297f5c(0x358)]%0x4==0x3||_0x2193e4[_0x297f5c(0x358)]%0x3==0x1?0x4:0x3;let _0x1f79b1=0x0;_0x2193e4[_0x297f5c(0x2f5)]((_0x49f4fb,_0x520755)=>{const _0x1250bd=_0x297f5c;if(_0x520755%_0x320808==0x0)_0x34e98f=[];_0x34e98f['push'](Markup[_0x1250bd(0x1d8)][_0x1250bd(0x3a2)](_0x49f4fb[_0x1250bd(0x22e)]=='all'?'All\x20bots':botRef(_0x49f4fb[_0x1250bd(0x22e)]),'on_'+_0x49f4fb['botID'])),_0x520755%_0x320808==0x0&&(_0x3ed8f0[_0x1f79b1]=_0x34e98f,_0x1f79b1++);});const _0x10289e=Markup['inlineKeyboard'](_0x3ed8f0);_0x57d9b3['reply'](_0x297f5c(0x1c9),_0x10289e);}}),tgBot[_0x236c6a(0x349)](/on_(.+)/,async _0x14dbd1=>{const _0x436b5a=_0x236c6a,_0x2a6f45=_0x14dbd1['match'][0x1];_0x14dbd1['editMessageReplyMarkup']();if(_0x2a6f45==_0x436b5a(0x2fe)){const _0x3313e7=getDisabledBots();await sendTelegram(_0x14dbd1[_0x436b5a(0x1e3)]['id'],_0x436b5a(0x287)),_0x3313e7[_0x436b5a(0x2f5)](_0x3ce485=>{const _0x4f6554=_0x436b5a;if(_0x3ce485[_0x4f6554(0x22e)]!=_0x4f6554(0x2fe))toggleBot(_0x3ce485[_0x4f6554(0x22e)],toggleStatus(_0x3ce485[_0x4f6554(0x22e)]),'stopped');});}else await sendTelegram(_0x14dbd1[_0x436b5a(0x1e3)]['id'],_0x436b5a(0x221)+botRef(_0x2a6f45)),toggleBot(_0x2a6f45,toggleStatus(_0x2a6f45),_0x436b5a(0x28d));}),tgBot[_0x236c6a(0x1f2)](_0x236c6a(0x337),async _0x217404=>{const _0x1890a6=_0x236c6a,_0x54a0dd=getEnabledBots();if(_0x54a0dd[_0x1890a6(0x358)]==0x0)await sendTelegram(_0x217404['chat']['id'],_0x1890a6(0x208));else{if(_0x54a0dd[_0x1890a6(0x358)]>0x1)_0x54a0dd[_0x1890a6(0x39e)]({'botID':_0x1890a6(0x2fe)});let _0x319415=[],_0x3d4638=[];const _0x4f7672=_0x54a0dd['length']%0x4==0x0||_0x54a0dd[_0x1890a6(0x358)]%0x4==0x3||_0x54a0dd[_0x1890a6(0x358)]%0x3==0x1?0x4:0x3;let _0x90b8b6=0x0;_0x54a0dd[_0x1890a6(0x2f5)]((_0x59a0a1,_0x3feafe)=>{const _0x1b2e73=_0x1890a6;if(_0x3feafe%_0x4f7672==0x0)_0x3d4638=[];_0x3d4638[_0x1b2e73(0x39e)](Markup[_0x1b2e73(0x1d8)][_0x1b2e73(0x3a2)](_0x59a0a1['botID']==_0x1b2e73(0x2fe)?_0x1b2e73(0x2be):botRef(_0x59a0a1[_0x1b2e73(0x22e)]),_0x1b2e73(0x392)+_0x59a0a1[_0x1b2e73(0x22e)])),_0x3feafe%_0x4f7672==0x0&&(_0x319415[_0x90b8b6]=_0x3d4638,_0x90b8b6++);});const _0x35cc9f=Markup[_0x1890a6(0x2cd)](_0x319415);_0x217404[_0x1890a6(0x2ca)]('Which\x20bot\x20do\x20you\x20want\x20to\x20stop?',_0x35cc9f);}}),tgBot[_0x236c6a(0x349)](/off_(.+)/,async _0x4c23f2=>{const _0x22979d=_0x236c6a,_0x2b7fc6=_0x4c23f2['match'][0x1];_0x4c23f2[_0x22979d(0x35f)]();if(_0x2b7fc6=='all'){const _0x21eec7=getEnabledBots();await sendTelegram(_0x4c23f2[_0x22979d(0x1e3)]['id'],'Bot\x20Mgr\x20>\x20Stopping\x20all\x20bots'),_0x21eec7[_0x22979d(0x2f5)](_0x168ab4=>{const _0x357eae=_0x22979d;if(_0x168ab4[_0x357eae(0x22e)]!=_0x357eae(0x2fe))toggleBot(_0x168ab4[_0x357eae(0x22e)],toggleStatus(_0x168ab4[_0x357eae(0x22e)]),_0x357eae(0x28d));});}else await sendTelegram(_0x4c23f2[_0x22979d(0x1e3)]['id'],'Bot\x20Mgr\x20>\x20Stopping\x20'+botRef(_0x2b7fc6)),toggleBot(_0x2b7fc6,toggleStatus(_0x2b7fc6),_0x22979d(0x28d));}),tgBot[_0x236c6a(0x1f2)](_0x236c6a(0x1b3),async _0x24e25c=>{const _0x42fff7=_0x236c6a,_0x290051=getEnabledBots();if(_0x290051[_0x42fff7(0x358)]==0x0)await sendTelegram(_0x24e25c['chat']['id'],_0x42fff7(0x208));else{if(_0x290051['length']>0x1){let _0x173dbc=[],_0x5f2b2a=[];const _0x11bd22=_0x290051[_0x42fff7(0x358)]%0x4==0x0||_0x290051['length']%0x4==0x3||_0x290051[_0x42fff7(0x358)]%0x3==0x1?0x4:0x3;let _0x59ac10=0x0;_0x290051[_0x42fff7(0x2f5)]((_0x1bb08b,_0xe7c3bc)=>{const _0x2814e5=_0x42fff7;if(_0xe7c3bc%_0x11bd22==0x0)_0x5f2b2a=[];_0x5f2b2a[_0x2814e5(0x39e)](Markup[_0x2814e5(0x1d8)][_0x2814e5(0x3a2)](botRef(_0x1bb08b['botID']),_0x2814e5(0x336)+_0x1bb08b[_0x2814e5(0x22e)])),_0xe7c3bc%_0x11bd22==0x0&&(_0x173dbc[_0x59ac10]=_0x5f2b2a,_0x59ac10++);});const _0x55d99c=Markup[_0x42fff7(0x2cd)](_0x173dbc);_0x24e25c[_0x42fff7(0x2ca)](_0x42fff7(0x1b8),_0x55d99c);}else{const _0x3ec89c=_0x290051[0x0][_0x42fff7(0x22e)];if(pid[_0x3ec89c])pid[_0x3ec89c][_0x42fff7(0x335)]({'function':'sendMetricsTelegram','args':null});}}}),tgBot[_0x236c6a(0x349)](/metrics_(.+)/,async _0x312938=>{const _0x58e454=_0x236c6a,_0x49539d=_0x312938[_0x58e454(0x312)][0x1];_0x312938[_0x58e454(0x35f)]();if(pid[_0x49539d])pid[_0x49539d][_0x58e454(0x335)]({'function':_0x58e454(0x27c),'args':null});}),tgBot[_0x236c6a(0x1f2)](_0x236c6a(0x361),async _0x3637b0=>{const _0x34265b=_0x236c6a,_0x2839dc=getEnabledBots();if(_0x2839dc['length']==0x0)await sendTelegram(_0x3637b0[_0x34265b(0x1e3)]['id'],'No\x20bots\x20running\x20right\x20now');else{if(_0x2839dc[_0x34265b(0x358)]>0x1){let _0x1f3c68=[],_0x50cad8=[];const _0x36d9be=_0x2839dc['length']%0x4==0x0||_0x2839dc[_0x34265b(0x358)]%0x4==0x3||_0x2839dc[_0x34265b(0x358)]%0x3==0x1?0x4:0x3;let _0x4f545e=0x0;_0x2839dc[_0x34265b(0x2f5)]((_0x105dbd,_0x146da2)=>{const _0x458848=_0x34265b;if(_0x146da2%_0x36d9be==0x0)_0x50cad8=[];_0x50cad8['push'](Markup['button'][_0x458848(0x3a2)](botRef(_0x105dbd[_0x458848(0x22e)]),'portfolio_'+_0x105dbd[_0x458848(0x22e)])),_0x146da2%_0x36d9be==0x0&&(_0x1f3c68[_0x4f545e]=_0x50cad8,_0x4f545e++);});const _0x544e40=Markup[_0x34265b(0x2cd)](_0x1f3c68);_0x3637b0[_0x34265b(0x2ca)](_0x34265b(0x254),_0x544e40);}else{const _0x498168=_0x2839dc[0x0][_0x34265b(0x22e)];if(pid[_0x498168])pid[_0x498168][_0x34265b(0x335)]({'function':'sendPortfolioTelegram','args':null});}}}),tgBot[_0x236c6a(0x349)](/portfolio_(.+)/,async _0xcd606f=>{const _0x57722e=_0x236c6a,_0x3ddb43=_0xcd606f[_0x57722e(0x312)][0x1];_0xcd606f[_0x57722e(0x35f)]();if(pid[_0x3ddb43])pid[_0x3ddb43]['send']({'function':_0x57722e(0x3a8),'args':null});}),tgBot[_0x236c6a(0x1f2)](_0x236c6a(0x2b0),async _0x3bf20e=>{const _0x263fef=_0x236c6a,_0x58b744='logs';await zipFiles(_0x58b744);const _0x5ab561=zippath+(_0x58b744+'.zip');_0x3bf20e[_0x263fef(0x1b0)]({'source':_0x5ab561})[_0x263fef(0x2c3)](()=>{})[_0x263fef(0x353)](_0x236ec2=>logger[_0x263fef(0x395)](_0x263fef(0x311)+_0x58b744+_0x263fef(0x29f),_0x236ec2));}),tgBot[_0x236c6a(0x1f2)](_0x236c6a(0x1ab),async _0x446941=>{const _0x27a5d7=_0x236c6a,_0x311bd2=_0x27a5d7(0x1ab);await backupConfigFiles(),await zipFiles(_0x311bd2);const _0xc1c02e=zippath+(_0x311bd2+_0x27a5d7(0x334));_0x446941['replyWithDocument']({'source':_0xc1c02e})[_0x27a5d7(0x2c3)](()=>{})[_0x27a5d7(0x353)](_0x28ffeb=>logger['debug'](_0x27a5d7(0x311)+_0x311bd2+'\x20files\x20over\x20Telegram:',_0x28ffeb));}),tgBot[_0x236c6a(0x1f2)]('update',async _0x4171a0=>{const _0x20b138=_0x236c6a;await getMessages();if(!updateAvailable)await sendTelegram(_0x4171a0[_0x20b138(0x1e3)]['id'],_0x20b138(0x2bd));else{if(!validInstallation)await sendTelegram(_0x4171a0[_0x20b138(0x1e3)]['id'],_0x20b138(0x1c2));else{const _0x56124a=Markup[_0x20b138(0x2cd)]([Markup[_0x20b138(0x1d8)][_0x20b138(0x3a2)](_0x20b138(0x27d),'update_yes'),Markup[_0x20b138(0x1d8)][_0x20b138(0x3a2)]('No',_0x20b138(0x2c2))]);_0x4171a0[_0x20b138(0x2ca)](_0x20b138(0x31f),_0x56124a);}}}),tgBot[_0x236c6a(0x349)](/update_(.+)/,async _0x535706=>{const _0x1f3ffb=_0x236c6a,_0x14d4d8=_0x535706[_0x1f3ffb(0x312)][0x1];_0x535706[_0x1f3ffb(0x35f)](),_0x14d4d8==_0x1f3ffb(0x359)&&(await sendTelegram(_0x535706['chat']['id'],'Starting\x20Balance\x20Bot\x20update'),updateBB(_0x1f3ffb(0x19d))),_0x14d4d8=='no'&&await sendTelegram(_0x535706[_0x1f3ffb(0x1e3)]['id'],_0x1f3ffb(0x234));}),tgBot[_0x236c6a(0x1f2)]('reinstall',async _0x4cbe48=>{const _0x17e599=_0x236c6a;if(!validInstallation)await sendTelegram(_0x4cbe48[_0x17e599(0x1e3)]['id'],_0x17e599(0x33c));else{const _0x4ca057=Markup[_0x17e599(0x2cd)]([Markup[_0x17e599(0x1d8)][_0x17e599(0x3a2)]('Yes',_0x17e599(0x306)),Markup[_0x17e599(0x1d8)][_0x17e599(0x3a2)]('No',_0x17e599(0x25b))]);_0x4cbe48['reply']('Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?',_0x4ca057);}}),tgBot[_0x236c6a(0x349)](/reinstall_(.+)/,async _0x384d0e=>{const _0xf873af=_0x236c6a,_0x3a7aba=_0x384d0e[_0xf873af(0x312)][0x1];_0x384d0e['editMessageReplyMarkup'](),_0x3a7aba=='yes'&&(await sendTelegram(_0x384d0e[_0xf873af(0x1e3)]['id'],'Starting\x20Balance\x20Bot\x20reinstallation'),updateBB(_0xf873af(0x2c1))),_0x3a7aba=='no'&&await sendTelegram(_0x384d0e[_0xf873af(0x1e3)]['id'],'Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled');}),tgBot['command'](_0x236c6a(0x26d),async _0x332aa0=>{const _0x5ec7a2=_0x236c6a,_0x576f88=getBotsWithMode();if(_0x576f88[_0x5ec7a2(0x358)]==0x0)await sendTelegram(_0x332aa0['chat']['id'],_0x5ec7a2(0x208));else{let _0x582ad0=[],_0xd06ced=[];const _0x533345=0x2;let _0x4d4281=0x0;_0x576f88[_0x5ec7a2(0x2f5)]((_0xc78fd8,_0x284a2b)=>{const _0x4cc816=_0x5ec7a2;if(_0x284a2b%_0x533345==0x0)_0xd06ced=[];_0xd06ced[_0x4cc816(0x39e)](Markup['button'][_0x4cc816(0x3a2)](botRef(_0xc78fd8[_0x4cc816(0x22e)])+'\x20('+_0xc78fd8[_0x4cc816(0x39d)]+')',_0x4cc816(0x3a1)+_0xc78fd8[_0x4cc816(0x22e)])),_0x284a2b%_0x533345==0x0&&(_0x582ad0[_0x4d4281]=_0xd06ced,_0x4d4281++);});const _0x3dceb7=Markup['inlineKeyboard'](_0x582ad0);_0x332aa0['reply'](_0x5ec7a2(0x2eb),_0x3dceb7);}}),tgBot['action'](/toggle_(.+)/,async _0x2d9186=>{const _0x1e9d42=_0x236c6a,_0x4da1e6=_0x2d9186[_0x1e9d42(0x312)][0x1];_0x2d9186[_0x1e9d42(0x35f)]();const _0x126521=getBotsWithMode(),_0x4ee27a=_0x126521[_0x1e9d42(0x20b)](_0x49e290=>_0x49e290[_0x1e9d42(0x22e)]==_0x4da1e6),_0x479d94=_0x4ee27a[_0x1e9d42(0x39d)]==_0x1e9d42(0x2fa)?_0x1e9d42(0x1ce):_0x1e9d42(0x2fa);await sendTelegram(_0x2d9186['chat']['id'],_0x1e9d42(0x2d5)+botRef(_0x4ee27a[_0x1e9d42(0x22e)])+'\x20to\x20'+_0x479d94+_0x1e9d42(0x223)),toggleBotMode(_0x4da1e6);}),tgBot['command'](_0x236c6a(0x329),async _0x27543d=>{const _0x481412=_0x236c6a;let _0xc45c76='';config[_0x481412(0x2f5)](_0x3b1339=>{const _0x140646=_0x481412;_0xc45c76+='Bot\x20'+_0x3b1339['botID']+':\x20'+_0x3b1339[_0x140646(0x201)]+'\x0a';}),await sendTelegram(_0x27543d['chat']['id'],_0xc45c76,{'parse_mode':_0x481412(0x314)});}),tgBot[_0x236c6a(0x1f2)]('help',async _0x136e82=>{await sendTelegram(_0x136e82['chat']['id'],_0x5e097f);}),process[_0x236c6a(0x38a)](_0x236c6a(0x2f6),()=>tgBot[_0x236c6a(0x386)](_0x236c6a(0x2f6))),process[_0x236c6a(0x38a)](_0x236c6a(0x25c),()=>tgBot[_0x236c6a(0x386)]('SIGTERM')),tgBot[_0x236c6a(0x32e)]();}function disableTelegram(){tgBot&&tgBot['stop']();}async function sendTelegram(_0xcd3509,_0x41e762,_0x4d7d3b){const _0x43fe99=_0x4652e8;_0x4d7d3b={..._0x4d7d3b,'disable_web_page_preview':!![]};try{await tgBot['telegram'][_0x43fe99(0x1ed)](_0xcd3509,_0x41e762,_0x4d7d3b);}catch(_0x78e99a){logger['debug'](_0x43fe99(0x35c),_0x78e99a);}}async function sendTelegramBot(_0x2f909c,_0x2cc2aa){const _0x328a3d=_0x4652e8;if(settings[_0x328a3d(0x2a6)]){if(settings[_0x328a3d(0x1a3)]==_0x328a3d(0x2fe)||(_0x2cc2aa[_0x328a3d(0x350)]==_0x328a3d(0x393)||_0x2cc2aa[_0x328a3d(0x350)]==_0x328a3d(0x206)||_0x2cc2aa['type']==_0x328a3d(0x2a1))&&settings['telegramEvents']=='alerts'||_0x2cc2aa[_0x328a3d(0x350)]==_0x328a3d(0x380)&&settings[_0x328a3d(0x1a3)]==_0x328a3d(0x1ec)){if(tgBot&&settings[_0x328a3d(0x365)]){if(_0x2cc2aa['showname'])await sendTelegram(settings[_0x328a3d(0x365)],_0x2cc2aa[_0x328a3d(0x201)]+'\x20>\x20'+_0x2cc2aa['event']);else await sendTelegram(settings[_0x328a3d(0x365)],_0x328a3d(0x30b)+_0x2f909c+_0x328a3d(0x374)+_0x2cc2aa['event']);}}}}async function sendTelegramMsg(_0x181fe8,_0xec3492=_0x4652e8(0x314)){const _0x3822e1=_0x4652e8;return tgBot&&settings[_0x3822e1(0x365)]?(await sendTelegram(settings['telegramChatId'],_0x181fe8,{'parse_mode':_0xec3492}),!![]):![];}function getDeviceWithIp(_0x2b1503){const _0x4b1339=_0x4652e8;return devices[_0x4b1339(0x20b)](_0x445f0f=>_0x445f0f['ip']===_0x2b1503);}async function temporaryAccess2FA(_0xda8bd5,_0x248f79){const _0x483791=_0x4652e8;let _0x2584ba=new Date(),_0x5b1e82=![];if(lastIpApproval){if(_0x2584ba-lastIpApproval<0x1388)_0x5b1e82=!![];}lastIpApproval=new Date();if(_0x5b1e82)return;if(tgBot&&settings[_0x483791(0x365)]){const _0x26c0d3=uuidRandom();tmpStorage[_0x26c0d3]={'uuid':_0xda8bd5,'externalip':_0x248f79};const _0x34b498=Markup[_0x483791(0x2cd)]([Markup[_0x483791(0x1d8)][_0x483791(0x3a2)]('5\x20min','tempaccess_5_'+_0x26c0d3),Markup['button']['callback']('15\x20min',_0x483791(0x34a)+_0x26c0d3),Markup[_0x483791(0x1d8)][_0x483791(0x3a2)](_0x483791(0x204),'tempaccess_30_'+_0x26c0d3),Markup[_0x483791(0x1d8)][_0x483791(0x3a2)](_0x483791(0x245),_0x483791(0x1cb)+_0x26c0d3)]);await sendTelegram(settings[_0x483791(0x365)],_0x483791(0x28e)+normalizeIP(_0x248f79)[_0x483791(0x302)]+'\x20?',_0x34b498),tgBot[_0x483791(0x349)](/tempaccess_(.+)_(.+)/,async _0x166e89=>{const _0x5f0d77=_0x483791,_0x233da4=_0x166e89[_0x5f0d77(0x312)][0x1],_0x1a43a4=_0x166e89[_0x5f0d77(0x312)][0x2],{uuid:_0x20a905,externalip:_0x2b118a}=tmpStorage[_0x1a43a4];delete tmpStorage[_0x1a43a4],_0x166e89[_0x5f0d77(0x35f)](),devices[_0x20a905][_0x5f0d77(0x20a)]={'clientip':_0x2b118a,'timestamp':new Date()[_0x5f0d77(0x264)](),'expiry':_0x233da4},_0x233da4!=_0x5f0d77(0x245)?(await sendTelegram(_0x166e89['chat']['id'],_0x5f0d77(0x390)+_0x233da4+_0x5f0d77(0x1d7),{'parse_mode':'HTML'}),io['to'](_0x20a905)['emit'](_0x5f0d77(0x324),{'access':{'allow':![],'reason':'reload','token':null}})):(await sendTelegram(_0x166e89[_0x5f0d77(0x1e3)]['id'],_0x5f0d77(0x2e8)),io['to'](_0x20a905)[_0x5f0d77(0x214)]('status',{'access':{'allow':![],'reason':_0x5f0d77(0x249),'token':null}}));});}}async function loginAccess2FA(_0x45a8aa,_0x7566ad){const _0x138310=_0x4652e8;if(tgBot&&settings['telegramChatId']){const _0x3cbd8b=uuidRandom();tmpStorage[_0x3cbd8b]={'uuid':_0x45a8aa,'externalip':_0x7566ad};const _0x540fad=Markup[_0x138310(0x2cd)]([Markup[_0x138310(0x1d8)][_0x138310(0x3a2)](_0x138310(0x369),_0x138310(0x389)+loginExpiry+'_'+_0x3cbd8b),Markup['button'][_0x138310(0x3a2)](_0x138310(0x245),_0x138310(0x37e)+_0x3cbd8b)]);await sendTelegram(settings[_0x138310(0x365)],_0x138310(0x26a)+normalizeIP(_0x7566ad)['show']+'\x20?',_0x540fad),tgBot['action'](/login2fa_(.+)_(.+)/,async _0x117850=>{const _0x86f497=_0x138310,_0x178ec5=_0x117850['match'][0x1],_0xef3ebf=_0x117850[_0x86f497(0x312)][0x2],{uuid:_0xf39e49,externalip:_0x2a1c52}=tmpStorage[_0xef3ebf];delete tmpStorage[_0xef3ebf],_0x117850['editMessageReplyMarkup'](),devices[_0xf39e49][_0x86f497(0x3af)]={'clientip':_0x2a1c52,'timestamp':new Date()['getTime'](),'expiry':_0x178ec5},_0x178ec5!=_0x86f497(0x245)?(await sendTelegram(_0x117850['chat']['id'],'Login\x20accepted',{'parse_mode':_0x86f497(0x314)}),io['to'](_0xf39e49)[_0x86f497(0x214)](_0x86f497(0x324),{'access':{'allow':![],'reason':_0x86f497(0x1f8),'token':null}})):(await sendTelegram(_0x117850[_0x86f497(0x1e3)]['id'],'Login\x20rejected'),io['to'](_0xf39e49)['emit'](_0x86f497(0x324),{'access':{'allow':![],'reason':'2FA\x20login\x20rejected','token':null}}));});}}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0xeb3c3b=_0x4652e8;return dbConfig[_0xeb3c3b(0x246)](_0xeb3c3b(0x339))[_0xeb3c3b(0x313)](_0xeb3c3b(0x22e))[_0xeb3c3b(0x1d2)]({'status':_0xeb3c3b(0x2ff)})[_0xeb3c3b(0x260)]()||[];}function getDisabledBots(){const _0x5d1d75=_0x4652e8;return dbConfig[_0x5d1d75(0x246)](_0x5d1d75(0x339))['sortBy'](_0x5d1d75(0x22e))[_0x5d1d75(0x1d2)]({'status':_0x5d1d75(0x25a)})['value']()||[];}function getBotAttributes(_0x3f93a8){const _0x318885=_0x4652e8;let _0x2b2c6c={};const _0xad4de1=configpath+_0x318885(0x370)+_0x3f93a8+_0x318885(0x2f9),_0x35dbbc=fs[_0x318885(0x25e)](_0xad4de1);if(_0x35dbbc){const _0x59e74e=fs[_0x318885(0x373)](_0xad4de1);try{const _0x340022=JSON['parse'](_0x59e74e),_0x402d00=_0x340022?_0x340022[_0x318885(0x261)][0x0][_0x318885(0x28c)]:![];_0x2b2c6c[_0x318885(0x39d)]=_0x402d00?'auto':_0x318885(0x1ce),_0x2b2c6c['botname']=_0x340022?_0x340022[_0x318885(0x261)][0x0][_0x318885(0x201)]:_0x318885(0x30b)+_0x3f93a8,_0x2b2c6c[_0x318885(0x25f)]=_0x340022?_0x340022['bot'][0x0][_0x318885(0x25f)]:![];}catch(_0x5ad39b){_0x2b2c6c[_0x318885(0x39d)]=_0x318885(0x1ce),_0x2b2c6c[_0x318885(0x201)]=_0x318885(0x30b)+_0x3f93a8,_0x2b2c6c[_0x318885(0x25f)]=![];}}else _0x2b2c6c[_0x318885(0x39d)]=_0x318885(0x1ce),_0x2b2c6c[_0x318885(0x201)]=_0x318885(0x30b)+_0x3f93a8,_0x2b2c6c[_0x318885(0x25f)]=![];return _0x2b2c6c;}function getBotsWithMode(){const _0x5c9155=_0x4652e8,_0x383bdc=dbConfig[_0x5c9155(0x246)]('bots')[_0x5c9155(0x313)](_0x5c9155(0x22e))[_0x5c9155(0x260)]()||[];return _0x383bdc[_0x5c9155(0x2f5)](_0x306ac5=>{let _0x2cc11d=getBotAttributes(_0x306ac5['botID']);_0x306ac5['mode']=_0x2cc11d['mode'];}),_0x383bdc;}function getBotExchanges(){const _0x1df7db=_0x4652e8;let _0x1a9a04=[];const _0x4f766e=dbConfig['get'](_0x1df7db(0x339))[_0x1df7db(0x313)](_0x1df7db(0x22e))[_0x1df7db(0x260)]()||[];_0x4f766e[_0x1df7db(0x2f5)](_0x11a022=>{const _0x4ff77a=_0x1df7db;if(_0x11a022[_0x4ff77a(0x324)]==_0x4ff77a(0x2ff)){const _0x3b7171=configpath+_0x4ff77a(0x370)+_0x11a022['botID']+_0x4ff77a(0x2f9),_0x50311e=fs[_0x4ff77a(0x25e)](_0x3b7171);let _0x2a720c;if(_0x50311e){const _0x39cf73=fs[_0x4ff77a(0x373)](_0x3b7171);try{const _0x2e513b=JSON[_0x4ff77a(0x257)](_0x39cf73);_0x2a720c=_0x2e513b?_0x2e513b[_0x4ff77a(0x261)][0x0][_0x4ff77a(0x1ad)]:null;}catch(_0x6181df){}}if(_0x2a720c)_0x1a9a04['push'](_0x2a720c);}});const _0x550071=[...new Set(_0x1a9a04)][_0x1df7db(0x368)]();return _0x550071;}async function initUser(){const _0x5861e4=_0x4652e8;if(!settings[_0x5861e4(0x1d4)]){const _0x3548de=uuidRandom();mixpanel[_0x5861e4(0x2c9)](_0x3548de),updateSetting(_0x5861e4(0x1d4),_0x3548de);}}async function initSecure(){const _0x337327=_0x4652e8;let _0xa58c10=getSecure();if(!_0xa58c10[_0x337327(0x215)]('secret')){let _0x2d7e09=await generateKeys();_0xa58c10[_0x337327(0x35e)]=_0x2d7e09[_0x337327(0x35e)],_0xa58c10[_0x337327(0x32f)]=_0x2d7e09['privateKey'],_0xa58c10[_0x337327(0x36f)]=crypto[_0x337327(0x32b)](0x20)[_0x337327(0x36e)](_0x337327(0x1eb));;storeSecure(_0xa58c10);}}function getSettings(){const _0x1d087e=_0x4652e8;return dbSettings[_0x1d087e(0x246)](_0x1d087e(0x3a6))['value']()||{};}function getSecure(){const _0x4f7ab8=_0x4652e8;return dbSecure[_0x4f7ab8(0x246)](_0x4f7ab8(0x297))['value']()||{};}function getBlacklist(){const _0x20112e=_0x4652e8;return dbSecure[_0x20112e(0x246)]('blacklist')[_0x20112e(0x260)]()||[];}function broadcastToBots(_0x19aee3,_0x54a15a){config['forEach'](_0x214fa5=>{const _0x494960=_0x234a;if(_0x214fa5[_0x494960(0x324)]==_0x494960(0x2ff)&&_0x214fa5[_0x494960(0x2a5)]==_0x494960(0x283)||_0x214fa5[_0x494960(0x324)]==_0x494960(0x303)&&_0x214fa5[_0x494960(0x2a5)]=='running'){if(pid[_0x214fa5[_0x494960(0x22e)]])pid[_0x214fa5[_0x494960(0x22e)]][_0x494960(0x335)]({[_0x19aee3]:_0x54a15a});}});}async function storeSettings(_0x526995,_0x92d33d=![]){const _0x3579b1=_0x4652e8;_0x526995={...settings,..._0x526995};if(_0x92d33d&&_0x526995[_0x3579b1(0x2f4)]!='************'&&_0x526995['bbPassword']!=_0x3579b1(0x397)&&_0x526995[_0x3579b1(0x2f4)]!=''){const _0x238777=decryptRSA(secure['privateKey'],_0x526995[_0x3579b1(0x2f4)])['split'](_0x3579b1(0x31c))[0x0],_0x3706b6=bcrypt[_0x3579b1(0x229)](_0x238777,saltRounds);_0x526995={..._0x526995,'bbPassword':_0x3706b6};}if(_0x92d33d&&_0x526995[_0x3579b1(0x321)]!=_0x3579b1(0x32a)&&_0x526995[_0x3579b1(0x321)]!='***'&&_0x526995[_0x3579b1(0x321)]!=''){const _0x25167a=decryptRSA(secure[_0x3579b1(0x32f)],_0x526995[_0x3579b1(0x321)])[_0x3579b1(0x2a9)](_0x3579b1(0x31c))[0x0];_0x526995={..._0x526995,'telegramToken':_0x25167a};}if(_0x92d33d&&_0x526995[_0x3579b1(0x1b4)]!='************'&&_0x526995[_0x3579b1(0x1b4)]!=_0x3579b1(0x397)&&_0x526995[_0x3579b1(0x1b4)]!=''){const _0x19e217=decryptRSA(secure[_0x3579b1(0x32f)],_0x526995[_0x3579b1(0x1b4)])['split'](_0x3579b1(0x31c))[0x0];_0x526995={..._0x526995,'marketcapApi':_0x19e217};}const _0x528541=_0x526995[_0x3579b1(0x321)]!='************'&&_0x526995[_0x3579b1(0x321)]!=settings[_0x3579b1(0x321)]||_0x526995[_0x3579b1(0x210)]!=settings[_0x3579b1(0x210)],_0x11730b=_0x526995['telegramToken']==''||_0x526995['telegramUsername']=='',_0x2aabc6=_0x526995[_0x3579b1(0x1b4)]&&_0x526995[_0x3579b1(0x1b4)]!=_0x3579b1(0x32a)&&_0x526995['marketcapApi']!=settings['marketcapApi'];_0x528541&&(_0x526995['telegramChatId']=null,_0x526995[_0x3579b1(0x1a3)]=_0x3579b1(0x2fe));for(const [_0x3853aa,_0x576c03]of Object[_0x3579b1(0x2db)](_0x526995)){if(_0x3853aa=='telegramToken'&&_0x576c03=='************'){_0x526995[_0x3579b1(0x321)]=settings['telegramToken'];continue;};if(_0x3853aa=='bbPassword'&&_0x576c03=='************'){_0x526995['bbPassword']=settings[_0x3579b1(0x2f4)];continue;};if(_0x3853aa=='marketcapApi'&&_0x576c03==_0x3579b1(0x32a)){_0x526995[_0x3579b1(0x1b4)]=settings[_0x3579b1(0x1b4)];continue;};dbSettings['set'](_0x3579b1(0x1d1)+_0x3853aa,_0x576c03)[_0x3579b1(0x357)]();}settings=_0x526995,io['to'](_0x3579b1(0x2e2))['emit']('settings',cleanSettings()),broadcastToBots('timeshift',settings[_0x3579b1(0x2e9)]),broadcastToBots(_0x3579b1(0x2a0),settings[_0x3579b1(0x2a0)]),broadcastToBots(_0x3579b1(0x1b4),settings['marketcapApi']);if(_0x528541&&!_0x11730b)initTelegram();_0x528541&&_0x11730b&&(updateSetting(_0x3579b1(0x365),null),disableTelegram()),getAllClients()[_0x3579b1(0x2f5)](_0x3fc234=>{const _0x4b64ff=_0x3579b1;getSocket(_0x3fc234['id'])['emit'](_0x4b64ff(0x324),{'access':{'allow':![],'reason':_0x4b64ff(0x1f8),'token':null}});}),_0x2aabc6&&(await sleep(0xbb8),testMarketcapApi(_0x526995[_0x3579b1(0x1b4)]));}async function testMarketcapApi(_0x2680d8){const _0x452846=_0x4652e8,_0x2c9efa=[_0x452846(0x327),_0x452846(0x29e)];try{await axios['get']('https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest',{'headers':{'X-CMC_PRO_API_KEY':_0x2680d8},'params':{'symbol':_0x2c9efa[_0x452846(0x36e)]()}});}catch(_0x51db57){_0x51db57[_0x452846(0x36e)]()[_0x452846(0x1d3)](_0x452846(0x278))?(io['to'](_0x452846(0x2e2))[_0x452846(0x214)]('notification',_0x452846(0x2b7)),logger['full']('CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager')):(io['to']('botmanager')[_0x452846(0x214)](_0x452846(0x331),_0x452846(0x271)),logger[_0x452846(0x308)]('CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20see\x20logs\x20for\x20details'),logger['debug'](_0x452846(0x35b),_0x51db57[_0x452846(0x36e)]()+_0x452846(0x1a1)+_0x51db57[_0x452846(0x36a)]));return;}logger[_0x452846(0x395)](_0x452846(0x290));}function updateSetting(_0x4de6c8,_0x26f52f){const _0x4eb24b=_0x4652e8;dbSettings[_0x4eb24b(0x212)](_0x4eb24b(0x1d1)+_0x4de6c8,_0x26f52f)['write'](),settings=getSettings(),io['to'](_0x4eb24b(0x2e2))[_0x4eb24b(0x214)](_0x4eb24b(0x3a6),cleanSettings());}function storeSecure(_0x423ffc){const _0xe189ae=_0x4652e8;dbSecure[_0xe189ae(0x246)](_0xe189ae(0x297))[_0xe189ae(0x39e)](_0x423ffc)[_0xe189ae(0x357)](),secure=_0x423ffc;}function addBlacklist(_0x57c848){const _0x1e9ae7=_0x4652e8;cleanBlacklist();let _0x5afd09;devices[_0x57c848][_0x1e9ae7(0x20a)]?_0x5afd09=Math[_0x1e9ae7(0x2c0)](devices[_0x57c848]['telegramIpApproval'][_0x1e9ae7(0x39b)],loginExpiry):_0x5afd09=loginExpiry,dbSecure[_0x1e9ae7(0x246)](_0x1e9ae7(0x39c))['push']({'expiry':new Date()[_0x1e9ae7(0x264)]()+_0x5afd09*0x3c*0x3e8,'token':devices[_0x57c848]['access'][_0x1e9ae7(0x226)]})[_0x1e9ae7(0x357)](),blacklist=dbSecure['get']('blacklist')[_0x1e9ae7(0x260)]();}function cleanBlacklist(){const _0x137a61=_0x4652e8;let _0x443df5=dbSecure['get'](_0x137a61(0x39c))[_0x137a61(0x3ac)]()['value'](),_0x2bcfd3=new Date()[_0x137a61(0x264)]();_0x443df5['forEach'](_0x31d583=>{const _0x3e9b54=_0x137a61;_0x31d583[_0x3e9b54(0x39b)]<_0x2bcfd3&&dbSecure[_0x3e9b54(0x246)](_0x3e9b54(0x39c))[_0x3e9b54(0x37c)]({'expiry':_0x31d583['expiry']})[_0x3e9b54(0x357)]();});}function initStates(){let _0x3a5383=getConfiguration();_0x3a5383['forEach'](_0x4037b0=>{const _0x48350c=_0x234a;_0x4037b0[_0x48350c(0x2a5)]=_0x48350c(0x28d);}),storeConfiguration(_0x3a5383);}async function generateKeys(){const _0x1c16a9=_0x4652e8,_0x2d6527=forge[_0x1c16a9(0x2b5)][_0x1c16a9(0x363)]['generateKeyPair']({'bits':0x1000,'e':0x10001}),_0x1b7db1=forge['pki']['privateKeyToPem'](_0x2d6527['privateKey']),_0x20ac64=forge['pki']['publicKeyToPem'](_0x2d6527['publicKey']);return{'privateKey':_0x1b7db1,'publicKey':_0x20ac64};}async function oneTimeMigration(){const _0x65c305=_0x4652e8;let _0x3cd70f=getSettings(),_0x5b8757=![];!_0x3cd70f[_0x65c305(0x215)]('lastmsgtelegram')&&(_0x3cd70f[_0x65c305(0x31d)]=0x0,_0x5b8757=!![]);!_0x3cd70f[_0x65c305(0x215)](_0x65c305(0x289))&&(_0x3cd70f[_0x65c305(0x289)]=0x0,_0x5b8757=!![]);!_0x3cd70f[_0x65c305(0x215)](_0x65c305(0x238))&&(_0x3cd70f[_0x65c305(0x238)]=_0x65c305(0x37a),_0x5b8757=!![]);!_0x3cd70f[_0x65c305(0x215)](_0x65c305(0x2a0))&&(_0x3cd70f[_0x65c305(0x2a0)]=![],_0x5b8757=!![]);!_0x3cd70f[_0x65c305(0x215)]('marketcapApi')&&(_0x3cd70f['marketcapApi']='',_0x5b8757=!![]);if(_0x5b8757)storeSettings(_0x3cd70f);try{fs[_0x65c305(0x24a)](configbackuppath,{'withFileTypes':!![]})['forEach'](_0x8d003c=>{const _0x18fe0b=_0x65c305;if(!_0x8d003c['isDirectory']()){if(!_0x8d003c[_0x18fe0b(0x2b4)]['startsWith'](_0x18fe0b(0x379)))fs[_0x18fe0b(0x3b3)](configbackuppath+_0x8d003c[_0x18fe0b(0x2b4)]);}else fs[_0x18fe0b(0x239)](configbackuppath+_0x8d003c[_0x18fe0b(0x2b4)],{'recursive':!![]});});}catch(_0x1041d2){logger[_0x65c305(0x395)](_0x65c305(0x259),_0x1041d2);}}function storeConfiguration(_0x4094cb){const _0x57ef43=_0x4652e8;dbConfig[_0x57ef43(0x246)](_0x57ef43(0x339))['remove']()[_0x57ef43(0x357)](),dbConfig[_0x57ef43(0x246)](_0x57ef43(0x339))[_0x57ef43(0x39e)](..._0x4094cb)[_0x57ef43(0x357)](),config=_0x4094cb;}async function resetPassword(){const _0x5f4f72=_0x4652e8;if(tgBot&&settings[_0x5f4f72(0x365)]){const _0x26a271=Markup[_0x5f4f72(0x2cd)]([Markup['button'][_0x5f4f72(0x3a2)]('yes','resetpw_yes'),Markup[_0x5f4f72(0x1d8)][_0x5f4f72(0x3a2)]('no','resetpw_no')]);await sendTelegram(settings[_0x5f4f72(0x365)],'Do\x20you\x20want\x20to\x20reset\x20your\x20password?',_0x26a271),tgBot['action'](/resetpw_(.+)/,async _0x52131e=>{const _0x4eb3dd=_0x5f4f72,_0x7d97c=_0x52131e[_0x4eb3dd(0x312)][0x1];_0x52131e['editMessageReplyMarkup']();if(_0x7d97c!='no'){const _0x5c74b9=0xf,_0x430ec4=_0x4eb3dd(0x307),_0x4587f5=Array[_0x4eb3dd(0x326)](crypto[_0x4eb3dd(0x3b6)](new Uint32Array(_0x5c74b9)))[_0x4eb3dd(0x1dd)](_0x720883=>_0x430ec4[_0x720883%_0x430ec4[_0x4eb3dd(0x358)]])[_0x4eb3dd(0x2e6)](''),_0x1a697c=bcrypt['hashSync'](_0x4587f5,saltRounds);storeSettings({'bbPassword':_0x1a697c}),await sendTelegram(_0x52131e[_0x4eb3dd(0x1e3)]['id'],_0x4eb3dd(0x2c7)+_0x4587f5,{'parse_mode':_0x4eb3dd(0x314)});}else await sendTelegram(_0x52131e['chat']['id'],_0x4eb3dd(0x21a));});}}function _0x234a(_0x527d8c,_0x137da5){const _0x11a3f0=_0x413b();return _0x234a=function(_0x2c206d,_0x25b04e){_0x2c206d=_0x2c206d-0x19a;let _0x413b5c=_0x11a3f0[_0x2c206d];return _0x413b5c;},_0x234a(_0x527d8c,_0x137da5);}async function confirmRestore(_0x37e49e,_0xd1fac9){const _0x516efc=_0x4652e8;io['to']('botmanager')['emit'](_0x516efc(0x331),'Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot',_0x516efc(0x2a1));if(tgBot&&settings[_0x516efc(0x365)]){const _0x8eb5e9=uuidRandom();tmpStorage[_0x8eb5e9]={'path':_0x37e49e,'filename':_0xd1fac9};const _0x1a72b0=Markup['inlineKeyboard']([Markup[_0x516efc(0x1d8)][_0x516efc(0x3a2)](_0x516efc(0x359),_0x516efc(0x2cf)+_0x8eb5e9),Markup[_0x516efc(0x1d8)][_0x516efc(0x3a2)]('no',_0x516efc(0x1a0)+_0x8eb5e9)]);await sendTelegram(settings[_0x516efc(0x365)],_0x516efc(0x274),_0x1a72b0),tgBot[_0x516efc(0x349)](/restore_(.+)_(.+)/,async _0x1197d2=>{const _0x261a51=_0x516efc,_0x29911d=_0x1197d2[_0x261a51(0x312)][0x1],_0x5f1c5c=_0x1197d2[_0x261a51(0x312)][0x2],{path:_0x5de3f1,filename:_0x398a61}=tmpStorage[_0x5f1c5c];delete tmpStorage[_0x5f1c5c],_0x1197d2['editMessageReplyMarkup'](),_0x29911d=='yes'?(logger[_0x261a51(0x395)](_0x261a51(0x273)),await sendTelegram(_0x1197d2['chat']['id'],'Restoring\x20bot(s)\x20from\x20backup',{'parse_mode':_0x261a51(0x314)}),unzipFile(_0x5de3f1,_0x398a61)):(logger[_0x261a51(0x395)]('Restore\x20process\x20aborted'),await sendTelegram(_0x1197d2[_0x261a51(0x1e3)]['id'],'Restore\x20process\x20aborted'));});}}function getServerTime(){const _0x12e446=_0x4652e8,_0x1a9634=new Date();return _0x1a9634['getFullYear']()+'/'+(_0x1a9634[_0x12e446(0x1c8)]()+0x1)['toString']()[_0x12e446(0x2df)](0x2,'0')+'/'+_0x1a9634[_0x12e446(0x217)]()[_0x12e446(0x36e)]()[_0x12e446(0x2df)](0x2,'0')+'\x20'+_0x1a9634[_0x12e446(0x372)]()[_0x12e446(0x36e)]()[_0x12e446(0x2df)](0x2,'0')+':'+_0x1a9634[_0x12e446(0x29b)]()[_0x12e446(0x36e)]()[_0x12e446(0x2df)](0x2,'0')+':'+_0x1a9634['getSeconds']()['toString']()['padStart'](0x2,'0');}function getTimeStamp(){const _0x1d9142=_0x4652e8,_0x1bf16b=shiftedTime();return _0x1bf16b[_0x1d9142(0x1b5)]()+'/'+(_0x1bf16b[_0x1d9142(0x1c8)]()+0x1)[_0x1d9142(0x36e)]()[_0x1d9142(0x2df)](0x2,'0')+'/'+_0x1bf16b[_0x1d9142(0x217)]()[_0x1d9142(0x36e)]()[_0x1d9142(0x2df)](0x2,'0')+'\x20'+_0x1bf16b['getHours']()['toString']()[_0x1d9142(0x2df)](0x2,'0')+':'+_0x1bf16b['getMinutes']()[_0x1d9142(0x36e)]()[_0x1d9142(0x2df)](0x2,'0')+':'+_0x1bf16b[_0x1d9142(0x247)]()[_0x1d9142(0x36e)]()[_0x1d9142(0x2df)](0x2,'0');}function getCleanTimeStamp(){const _0x5e87ae=_0x4652e8,_0x5526b2=shiftedTime();return _0x5526b2[_0x5e87ae(0x1b5)]()+(_0x5526b2['getMonth']()+0x1)[_0x5e87ae(0x36e)]()['padStart'](0x2,'0')+_0x5526b2[_0x5e87ae(0x217)]()['toString']()[_0x5e87ae(0x2df)](0x2,'0')+'-'+_0x5526b2[_0x5e87ae(0x372)]()[_0x5e87ae(0x36e)]()[_0x5e87ae(0x2df)](0x2,'0')+_0x5526b2[_0x5e87ae(0x29b)]()[_0x5e87ae(0x36e)]()['padStart'](0x2,'0')+_0x5526b2['getSeconds']()[_0x5e87ae(0x36e)]()['padStart'](0x2,'0');}function shiftedTime(){const _0x5f3e9c=_0x4652e8,_0x58f8a7=new Date();let _0x249d4a=_0x58f8a7;if(settings[_0x5f3e9c(0x2e9)]&&settings['timeshift']!==0x0)_0x249d4a=fns[_0x5f3e9c(0x325)](_0x58f8a7,{'hours':settings[_0x5f3e9c(0x2e9)]});return _0x249d4a;}async function startScheduler(){const _0x2a6fbd=_0x4652e8,_0x17db14=new Date()[_0x2a6fbd(0x387)](),_0x29f76e=shiftedTime()[_0x2a6fbd(0x372)]();_0x29f76e==0x4&&backupConfigFiles(),_0x29f76e==0x0&&(rotateLogFiles(),logger['debug'](_0x2a6fbd(0x288)),logger[_0x2a6fbd(0x395)](_0x2a6fbd(0x220)+serverversion+_0x2a6fbd(0x36c)+(environment==_0x2a6fbd(0x1dc)?_0x2a6fbd(0x301):'')),logger[_0x2a6fbd(0x395)](_0x2a6fbd(0x288))),_0x17db14%0x6==0x0&&triggerAnalytics(),_0x17db14%0x6==0x0&&getMessages(),await sleep(schedulerInterval),startScheduler();}async function restoreBackupFile(_0x1dd480){const _0x5b0bf8=_0x4652e8;logger[_0x5b0bf8(0x395)](_0x5b0bf8(0x1e0)+_0x1dd480);const _0x335207=getBotsWithMode();_0x335207[_0x5b0bf8(0x358)]>0x0?confirmRestore(configbackuppath,_0x1dd480):unzipFile(configbackuppath,_0x1dd480);}async function getBackupFiles(_0x17903a=null){const _0xb41d8f=_0x4652e8;let _0x49d3ed=[],_0x239fac=fs['readdirSync'](configbackuppath,{'withFileTypes':!![]});_0x239fac[_0xb41d8f(0x368)]((_0x27eaba,_0x23a08a)=>_0x27eaba[_0xb41d8f(0x2b4)]<_0x23a08a[_0xb41d8f(0x2b4)]?0x1:_0x23a08a[_0xb41d8f(0x2b4)]<_0x27eaba[_0xb41d8f(0x2b4)]?-0x1:0x0),_0x239fac[_0xb41d8f(0x2f5)](_0x29866a=>{const _0x5ad0f8=_0xb41d8f;if(!_0x29866a[_0x5ad0f8(0x233)]()&&_0x29866a['name'][_0x5ad0f8(0x375)](_0x5ad0f8(0x379))&&_0x29866a[_0x5ad0f8(0x2b4)][_0x5ad0f8(0x24c)](_0x5ad0f8(0x334))){const _0x3fe637=formatDate(fs[_0x5ad0f8(0x2d8)](configbackuppath+_0x29866a['name'])[_0x5ad0f8(0x2af)]);_0x49d3ed['push']({'name':_0x29866a[_0x5ad0f8(0x2b4)],'mtime':_0x3fe637});}});if(_0x17903a)io['to'](_0x17903a)[_0xb41d8f(0x214)](_0xb41d8f(0x38c),_0x49d3ed);else return _0x49d3ed;}async function backupConfigFiles(){const _0x4d15bf=_0x4652e8;await zipFiles(_0x4d15bf(0x1c0));const _0x4ecfd6=getCleanTimeStamp();fs[_0x4d15bf(0x391)](zippath+_0x4d15bf(0x1d0),configbackuppath+(_0x4d15bf(0x379)+_0x4ecfd6+_0x4d15bf(0x334)));let _0x228dfc=fs[_0x4d15bf(0x24a)](configbackuppath,{'withFileTypes':!![]});_0x228dfc[_0x4d15bf(0x368)]((_0x18668b,_0xb6fd35)=>_0x18668b['name']<_0xb6fd35[_0x4d15bf(0x2b4)]?0x1:_0xb6fd35[_0x4d15bf(0x2b4)]<_0x18668b['name']?-0x1:0x0),_0x228dfc['length']>maxBackups&&fs['unlinkSync'](configbackuppath+_0x228dfc[_0x228dfc[_0x4d15bf(0x358)]-0x1][_0x4d15bf(0x2b4)]);}function rotateLogFiles(){const _0x25f99b=_0x4652e8,_0x1942a5=fs['statSync'](logspath+_0x25f99b(0x296)),_0xddb275=_0x1942a5[_0x25f99b(0x2ef)]/0x400;if(_0xddb275>0x64){let _0x51919e=fs[_0x25f99b(0x24a)](logspath,{'withFileTypes':!![]});_0x51919e[_0x25f99b(0x368)]((_0x3f3cf4,_0x47e9d3)=>_0x3f3cf4[_0x25f99b(0x2b4)]<_0x47e9d3[_0x25f99b(0x2b4)]?0x1:_0x47e9d3[_0x25f99b(0x2b4)]<_0x3f3cf4['name']?-0x1:0x0),_0x51919e[_0x25f99b(0x2f5)](_0x329784=>{const _0x3189fa=_0x25f99b;if(_0x329784[_0x3189fa(0x2b4)]==_0x3189fa(0x1cc))fs[_0x3189fa(0x391)](logspath+_0x329784[_0x3189fa(0x2b4)],logspath+_0x3189fa(0x384));if(_0x329784['name']==_0x3189fa(0x21d))fs['copyFileSync'](logspath+_0x329784[_0x3189fa(0x2b4)],logspath+_0x3189fa(0x1cc));_0x329784[_0x3189fa(0x2b4)]==_0x3189fa(0x296)&&(fs[_0x3189fa(0x391)](logspath+_0x329784[_0x3189fa(0x2b4)],logspath+_0x3189fa(0x21d)),fs['writeFileSync'](logspath+_0x329784[_0x3189fa(0x2b4)],''));});}}async function zipFiles(_0x305811){const _0x252040=_0x4652e8;let _0x38dfb0;if(_0x305811==_0x252040(0x2b0))_0x38dfb0=logspath;if(_0x305811=='backup')_0x38dfb0=configpath;if(_0x305811==_0x252040(0x1c0))_0x38dfb0=configpath;let _0x2340ea=fs[_0x252040(0x24a)](_0x38dfb0,{'withFileTypes':!![]});const _0x357e8f=new JSZip();_0x2340ea[_0x252040(0x2f5)](_0x1986a9=>{const _0xa1fa83=_0x252040;if(!_0x1986a9['isDirectory']()){let _0x9efd88=fs[_0xa1fa83(0x373)](_0x38dfb0+_0x1986a9[_0xa1fa83(0x2b4)]);if(_0x305811=='backup'){const _0x1f5a77=/^bot-[0-9]{3}-config.json$/,_0x3efb54=_0x1f5a77['test'](_0x1986a9['name']);if(_0x3efb54){const _0x2bb4fb=JSON[_0xa1fa83(0x257)](_0x9efd88);if(_0x2bb4fb['bot'][0x0]){_0x2bb4fb[_0xa1fa83(0x261)][0x0][_0xa1fa83(0x1aa)]=_0xa1fa83(0x397),_0x2bb4fb[_0xa1fa83(0x261)][0x0][_0xa1fa83(0x262)]='***';if(_0x2bb4fb['bot'][0x0][_0xa1fa83(0x280)])_0x2bb4fb['bot'][0x0][_0xa1fa83(0x280)]='***';}_0x9efd88=JSON[_0xa1fa83(0x38f)](_0x2bb4fb,null,0x2);}if(_0x1986a9[_0xa1fa83(0x2b4)]==_0xa1fa83(0x28b)){const _0x2121c8=JSON[_0xa1fa83(0x257)](_0x9efd88);if(_0x2121c8[_0xa1fa83(0x3a6)]['loginRequired'])_0x2121c8[_0xa1fa83(0x3a6)][_0xa1fa83(0x319)]=![];if(_0x2121c8[_0xa1fa83(0x3a6)][_0xa1fa83(0x2f4)])_0x2121c8[_0xa1fa83(0x3a6)][_0xa1fa83(0x2f4)]=_0xa1fa83(0x397);if(_0x2121c8[_0xa1fa83(0x3a6)][_0xa1fa83(0x321)])_0x2121c8[_0xa1fa83(0x3a6)][_0xa1fa83(0x321)]=_0xa1fa83(0x397);if(_0x2121c8[_0xa1fa83(0x3a6)][_0xa1fa83(0x365)])_0x2121c8[_0xa1fa83(0x3a6)][_0xa1fa83(0x365)]=null;if(_0x2121c8[_0xa1fa83(0x3a6)][_0xa1fa83(0x1b4)])_0x2121c8[_0xa1fa83(0x3a6)][_0xa1fa83(0x1b4)]='***';_0x9efd88=JSON[_0xa1fa83(0x38f)](_0x2121c8,null,0x2);}if(_0x1986a9[_0xa1fa83(0x2b4)]!='bb-secure.json')_0x357e8f[_0xa1fa83(0x396)](_0x1986a9[_0xa1fa83(0x2b4)],_0x9efd88);}else _0x357e8f[_0xa1fa83(0x396)](_0x1986a9['name'],_0x9efd88);}});const _0x3accb3=await _0x357e8f[_0x252040(0x3a4)]({'type':_0x252040(0x354),'base64':![],'compression':'DEFLATE'});fs[_0x252040(0x2ea)](zippath+(_0x305811+_0x252040(0x334)),_0x3accb3,_0x252040(0x1af));}async function unzipFile(_0x182299,_0x200cc5){const _0x40d985=_0x4652e8;fs[_0x40d985(0x24a)](configpath,{'withFileTypes':!![]})[_0x40d985(0x2f5)](_0xac8fc6=>{const _0x1db452=_0x40d985;if(!_0xac8fc6[_0x1db452(0x233)]())fs[_0x1db452(0x239)](configpath+_0xac8fc6['name']);});const _0x5107e8=fs[_0x40d985(0x373)](_0x182299+_0x200cc5,_0x40d985(0x1af)),_0x359fdf=await JSZip[_0x40d985(0x2bf)](_0x5107e8,{'base64':![],'checkCRC32':!![]});for(const _0x44a6d6 of Object[_0x40d985(0x317)](_0x359fdf[_0x40d985(0x34f)])){const _0x16089b=_0x359fdf[_0x40d985(0x34f)][_0x44a6d6],_0x59c307=await _0x16089b[_0x40d985(0x236)](_0x40d985(0x354));fs[_0x40d985(0x2ea)](configpath+_0x16089b[_0x40d985(0x2b4)],_0x59c307);}fs['readdirSync'](temppath,{'withFileTypes':!![]})[_0x40d985(0x2f5)](_0x214579=>{const _0x53707a=_0x40d985;if(!_0x214579[_0x53707a(0x233)]())fs[_0x53707a(0x239)](temppath+_0x214579[_0x53707a(0x2b4)]);}),logger['debug'](_0x40d985(0x1f0)),process[_0x40d985(0x335)]({'restore':!![]},_0xe89d8e=>{});}async function getPublicIp(){const _0x21e518=_0x4652e8;try{const _0x444935=await axios[_0x21e518(0x246)](_0x21e518(0x1bc));publicip=_0x444935['data']['ip'];}catch(_0x2d3f8a){}}async function triggerAnalytics(){const _0x40e872=_0x4652e8;if(!publicip)await getPublicIp();const _0xeadaf7=getBotsWithMode();let _0x3e90bf=0x0;_0xeadaf7['forEach'](_0x272688=>{const _0x3bce94=_0x234a;if(_0x272688['status']===_0x3bce94(0x2ff))_0x3e90bf++;});const _0x1198c8=getBotExchanges();mixpanel[_0x40e872(0x269)](_0x40e872(0x293),{'distinct_id':settings[_0x40e872(0x1d4)],'ip':publicip,'version':serverversion,'numbots':_0xeadaf7[_0x40e872(0x358)],'numbotsenabled':_0x3e90bf,'exchanges':_0x1198c8,'environment':environment});}async function getMessages(){const _0x40525c=_0x4652e8,_0x1f6054=_0x40525c(0x299),_0x19fdb8=new GraphQLClient(_0x1f6054),_0x24f685={'authorization':'Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U'},_0x346189=serverversion[_0x40525c(0x2a9)]('.'),_0x4054e2=_0x346189[0x0]+'.'+_0x346189[0x1],_0x1dc4dd=Math[_0x40525c(0x1b6)](settings[_0x40525c(0x31d)],settings[_0x40525c(0x289)]),_0x515162={'last':parseInt(_0x1dc4dd),'bbm':_0x4054e2},_0x36791e=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x1e68b0;try{_0x1e68b0=await _0x19fdb8['request'](_0x36791e,_0x515162,_0x24f685);}catch(_0x4261de){}if(_0x1e68b0&&_0x1e68b0[_0x40525c(0x251)]){let _0x453477=settings[_0x40525c(0x31d)],_0x3eb72d=settings[_0x40525c(0x31d)];newMessages=[];for(const _0x4bcbb3 of _0x1e68b0[_0x40525c(0x251)]){newMessages[_0x40525c(0x39e)](_0x4bcbb3);let _0x133a55=![];_0x4bcbb3[_0x40525c(0x355)]&&(updateSetting('latestversion',_0x4bcbb3[_0x40525c(0x355)]),_0x133a55=isNewerVersion(serverversion,_0x4bcbb3[_0x40525c(0x355)])||serverversion==_0x4bcbb3[_0x40525c(0x355)]);if(!_0x133a55&&_0x4bcbb3[_0x40525c(0x240)]>_0x453477){if(_0x4bcbb3[_0x40525c(0x21f)]===_0x40525c(0x2d2)||serverversion[_0x40525c(0x375)](_0x4bcbb3['bbvReceive'])){let _0x2b4ab1=''+_0x4bcbb3[_0x40525c(0x3a9)]+'\x0a\x0a'+_0x4bcbb3[_0x40525c(0x305)];const _0x3cfad1=await sendTelegramMsg(toTelegramMarkdown(_0x2b4ab1),_0x40525c(0x2bc));_0x453477=_0x4bcbb3['number'];}}_0x3eb72d=_0x4bcbb3[_0x40525c(0x240)];}updateAvailable=isNewerVersion(settings[_0x40525c(0x238)],serverversion),updateSetting(_0x40525c(0x31d),_0x3eb72d),emitMessages();}}function emitMessages(){const _0x5d76e0=_0x4652e8,_0x5a49db=settings[_0x5d76e0(0x289)];let _0x4a77fd=[];newMessages[_0x5d76e0(0x2f5)](_0x204d16=>{const _0x490d9c=_0x5d76e0;_0x204d16[_0x490d9c(0x240)]>_0x5a49db&&_0x4a77fd['push'](_0x204d16);}),_0x4a77fd[_0x5d76e0(0x358)]>0x0&&getAllClients()[_0x5d76e0(0x2f5)](_0x5f2261=>{const _0x1ff1df=_0x5d76e0;getSocket(_0x5f2261['id'])[_0x1ff1df(0x214)](_0x1ff1df(0x305),_0x4a77fd);});}function confirmMessage(_0x4850e7){const _0x12342a=_0x4652e8;updateSetting(_0x12342a(0x289),Number(_0x4850e7));}function isNewerVersion(_0x10f775,_0x344a26){const _0x35f213=_0x4652e8,_0x43546e=_0x344a26[_0x35f213(0x2a9)]('.'),_0x2c0dbd=_0x10f775['split']('.');for(var _0x4fd4d0=0x0;_0x4fd4d0<_0x2c0dbd[_0x35f213(0x358)];_0x4fd4d0++){const _0x46795a=~~_0x2c0dbd[_0x4fd4d0],_0x2fafeb=~~_0x43546e[_0x4fd4d0];if(_0x46795a>_0x2fafeb)return!![];if(_0x46795a<_0x2fafeb)return![];}return![];}function toTelegramMarkdown(_0x1419c7){const _0x316939=_0x4652e8,_0x13299b=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0xea0a3e=/\*{2}(.+?)\*{2}/gim;return _0x1419c7=_0x1419c7[_0x316939(0x3b4)](_0x13299b,_0x316939(0x2d0))[_0x316939(0x3b4)](_0xea0a3e,_0x316939(0x2ac)),_0x1419c7;}async function validateConfigFile(){const _0x18432a=_0x4652e8,_0xa93ec6=dbConfig[_0x18432a(0x246)](_0x18432a(0x339))[_0x18432a(0x313)](_0x18432a(0x22e))[_0x18432a(0x260)]()||[];if(_0xa93ec6[_0x18432a(0x358)]==0x0){let _0x472133=0x0,_0x379505=[];const _0x3654d0=/^bot-([0-9]{3})-config.json$/,_0x72ff25=fs['readdirSync'](configpath);_0x72ff25[_0x18432a(0x2f5)](_0x540e5a=>{const _0x94c9cd=_0x18432a,_0xd0281a=_0x3654d0[_0x94c9cd(0x1c3)](_0x540e5a);if(_0xd0281a){const _0x1c8f0b=_0xd0281a[0x1];let _0x4d6369=getBotAttributes(_0x1c8f0b);_0x379505[_0x94c9cd(0x39e)]({'botID':_0x1c8f0b,'botname':_0x4d6369[_0x94c9cd(0x201)],'status':'disabled','live':_0x94c9cd(0x28d)}),_0x472133++;}}),_0x472133!=0x0&&(dbConfig['get']('bots')[_0x18432a(0x1ff)](_0x379505)['write'](),config=_0x379505,restoredConfigFile=_0x472133);}}async function restoreConfigNotify(_0xafce80){const _0x406673=_0x4652e8;let _0xb097cd;if(restoredConfigFile==0x1)_0xb097cd=_0x406673(0x2de);else _0xb097cd=_0x406673(0x3ad);if(_0xafce80)io['to']('botmanager')[_0x406673(0x214)](_0x406673(0x331),_0xb097cd);else{logger[_0x406673(0x1fc)]('-----------------------------------------------------------------------------------'),logger[_0x406673(0x1fc)](_0xb097cd),logger['simple'](_0x406673(0x30a)),logger[_0x406673(0x1fc)]('');if(tgBot&&settings[_0x406673(0x365)]&&settings[_0x406673(0x1a3)]!='orders')await sendTelegram(settings['telegramChatId'],_0x406673(0x2c6)+_0xb097cd);}}function decryptRSA(_0x47604d,_0x522df9){const _0x150de5=_0x4652e8,_0x977185=forge[_0x150de5(0x2b5)][_0x150de5(0x27b)](_0x47604d),_0x104427=_0x977185[_0x150de5(0x1c1)](forge[_0x150de5(0x1c7)][_0x150de5(0x2d1)](_0x522df9),'RSA-OAEP',{'md':forge['md'][_0x150de5(0x228)]['create'](),'mgf1':{'md':forge['md']['sha256'][_0x150de5(0x285)]()}});return _0x104427;}function _0x413b(){const _0x4cc927=['\x1b[35m','No\x20bots\x20running\x20right\x20now','bb-secure.json','telegramIpApproval','find','Telegraf\x20error:',':\x20Bot\x20Mgr\x20>\x20Telegram\x20error\x20occured','=>\x20Go\x20to\x20#CYA#http://','Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files','telegramUsername','cancelLoading','set','tkn','emit','hasOwnProperty','Backup\x20file\x20uploaded','getDate','/off\x20-\x20stop\x20bot(s)\x0a','login','Password\x20reset\x20rejected','login\x20token\x20generated','exp','output-001.log','telegrammsg','bbvReceive','Running\x20#RED#Balance\x20Bot\x20v','Bot\x20Mgr\x20>\x20Starting\x20','Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration','\x20mode','bb-config.json','verify','token','defaults','sha256','hashSync','::ffff:127.0.0.1','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','uuid-random','conn','botID','Notifications\x20disabled\x0a','2FA\x20required','Unauthorized\x20attempt\x20to\x20get\x20messages','No\x20authentication\x20token','isDirectory','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','login\x20required','async','-performance.json','latestversion','rmSync','bbUsername','build2','3321810Vhlfhp','address','initclient','clientip','number','jsonwebtoken','telegram','env','config/','reject','get','getSeconds','config_orders','temporary\x20access\x20rejected','readdirSync','backupfile','endsWith','1460428bywjhL','add-bot','lowdb/adapters/FileSync','config_alerts','messages','api-eu.mixpanel.com','Unauthorized\x20attempt\x20to\x20log\x20out','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','store-settings','\x1b[36m','parse','store-configuration','Error\x20removing\x20old\x20backup\x20files:','disabled','reinstall_no','SIGTERM','test','existsSync','showname','value','bot','apiSecret','socket.io','getTime','pidRefreshToken','private','log','config','track','Allow\x20login\x20from\x20IP\x20address\x20','exit','uncaughtException','toggle','access\x20timeout','restore-backup-file','enable','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20see\x20logs\x20for\x20details','sockets','Restore\x20process\x20confirmed','Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)','production','10ydlLtE','get-messages','status\x20code\x20401','logout','format','privateKeyFromPem','sendMetricsTelegram','Yes','All','bot.js','apiPassword','temporary\x20access\x20timeout','yargs','running','/metrics\x20-\x20show\x20bot\x20performance\x0a','create','restart','Bot\x20Mgr\x20>\x20Starting\x20all\x20bots','--------------------------------------','lastmsgemitted','node-forge','bb-settings.json','headless','stopped','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20','crypto','CoinMarketCap\x20API\x20key\x20validated','get-portfolio','express-fileupload','Server','1000','disable','output-000.log','secure','get-backup-files','https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','getMinutes','f2aRequired','Idling\x20(','ETH','\x20files\x20over\x20Telegram:','onepagemode','success','child_process','954400YBEmAq','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','live','telegramEnabled','/update\x20-\x20update\x20Balance\x20Bot\x0a','toIPv4MappedAddress','split','username','socket','*$1*','6b67f3d61ee94b8f5c80b4affef4c4d9','show-config','mtime','logs','params','whitelist','confirm-message','name','pki','static','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','/restart\x20-\x20restart\x20bot(s)\x0a','use','isIPv4MappedAddress','46502hHJpWr','Markdown','Your\x20installation\x20is\x20already\x20up\x20to\x20date','All\x20bots','loadAsync','max','reinstall','update_no','then','storeFiat','All\x20bots\x20running\x20right\x20now','Bot\x20Mgr\x20>\x20','Password\x20has\x20been\x20reset\x20to:\x20','Unauthorized\x20attempt\x20to\x20delete\x20bot','alias','reply','args','Enabled\x20','inlineKeyboard','fork','restore_yes_','$1_$2_$3','decode64','any','constructor','(((.+)+)+)+$','Bot\x20Mgr\x20>\x20Toggling\x20','6LyYXVr','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','statSync','connection','address\x20already\x20in\x20use','entries','encryptedUuid','family','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run','padStart','placeOrder','83831RIOZFV','botmanager','uuid','headers','lowdb','join','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','Temporary\x20access\x20rejected','timeshift','writeFileSync','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','init','slice','bb/','size','version.json','Error\x20while\x20deleting\x20config\x20files:\x20','Invalid\x20username\x20or\x20IP\x20address','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','bbPassword','forEach','SIGINT','telegraf','/on\x20-\x20start\x20bot(s)\x0a','-config.json','auto','/:bot/portfolio','Deleted\x20Bot\x20','pidExpireLogin','all','enabled','delete-bot','(staging)','show','new','axios','message','reinstall_yes','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','full','open','-----------------------------------------------------------------------------------','Bot\x20','logged\x20out','2FA','/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a','=>\x20Go\x20to\x20#CYA#http://127.0.0.1:','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','Error\x20sending\x20','match','sortBy','HTML','clients','jszip','keys','Unauthorized\x20attempt\x20to\x20confirm\x20message','loginRequired','store',',\x20must\x20be\x20a\x204\x20digit\x20number','|@|','lastmsgtelegram','#RES#\x20if\x20running\x20on\x20server','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','/upload-backup','telegramToken','reinstall-bb','[ip-address]','status','add','from','BCT','/disable\x20-\x20disable\x20notifications\x0a','names','************','randomBytes','createWriteStream','referer','launch','privateKey','new-disabled','notification','store-fiat','user','.zip','send','metrics_','off','apply','bots','text','handshake','Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation','login\x20not\x20required','temporary\x20token\x20generated','inherit','2FA\x20login\x20required','Session\x20expired\x20for\x20user\x20...','range','reset-history','auth','Node.js\x20v',')\x20|\x20Bot\x20','reset-password','index.html','action','tempaccess_15_','/logs\x20-\x20receive\x20log\x20files\x0a','3luTpDD','express','Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files','files','type','Unauthorized\x20attempt\x20to\x20update\x20bot','\x1b[33m','catch','string','bbvNew','search','write','length','yes','-results.json','Error\x20details:','Telegram\x20error:','/status\x20-\x20show\x20bot(s)\x20status\x0a','publicKey','editMessageReplyMarkup','Logged\x20in\x20user\x20...','portfolio','_nsps','rsa','IPv4','telegramChatId','NTBA_FIX_319','logs/','sort','accept','code','showConfig','#RES#\x20','temp/','toString','secret','bot-','ipaddr.js','getHours','readFileSync','\x20>\x20','startsWith','556458PHzrud','/names\x20-\x20show\x20bot\x20names\x0a','graphql-request','backup-full@','0.0.0','storeHeadless','remove','zip/','login2fa_reject_','isValid','order','argv','\x20|\x20client:\x20...','alerts','output-003.log','timestamp','stop','getUTCHours','cancel-loading','login2fa_','once','close','backup-files','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','Logged\x20out\x20user\x20...','stringify','Access\x20enabled\x20for\x20','copyFileSync','off_','error','Notifications\x20enabled\x0a','debug','file','***','/help\x20-\x20show\x20available\x20commands\x0a','Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot','reason','expiry','blacklist','mode','push','\x20(1)','Unauthorized\x20attempt\x20to\x20show\x20configuration','toggle_','callback','/:bot','generateAsync','\x20(2)','settings','/:bot/configuration','sendPortfolioTelegram','title','allow','127.0.0.1','cloneDeep','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run','3907984ukifqV','telegram2FaApproval','-events.json','\x20only\x0a','/enable\x20-\x20enable\x20notifications\x0a','unlinkSync','replace','<b>Telegram\x20Bot\x20Status:</b>\x0a','randomFillSync','Unauthorized\x20login\x20attempt\x20(timeout)','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','path','update','Starting\x20new\x20bot\x20|\x20Bot\x20','login\x20token\x20valid','restore_no_','\x20-\x20','Invalid\x20IP\x20address','telegramEvents','Orders','date-fns','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)','Token\x20blacklisted','/output-000.log','connected','apiKey','backup','2FA\x20login\x20token\x20generated','exchange','update-bb','binary','replyWithDocument','830OfAycv','Unauthorized\x20attempt\x20to\x20get\x20portfolio','metrics','marketcapApi','getFullYear','min','get-logs','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?','Notifications\x20enabled','File\x20uploaded','kill','https://api.ipify.org?format=json',')\x20\x20\x20|\x20Bot\x20','\x20|\x20user:\x20...','sign','backup-full','decrypt','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','exec','ipv6','mkdirSync','toggle-bot-mode','util','getMonth','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','compareSync','tempaccess_reject_','output-002.log','started','manual','start','backup-full.zip','settings.','filter','includes','userid','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','Unauthorized\x20attempt\x20to\x20add\x20bot','\x20minutes','button','\x1b[34m','Failed\x20to\x20download\x20','function','staging','map','access','removeAllListeners','Restore\x20backup\x20file\x20','post',':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20','chat','internal','Restarting\x20','Ok,\x20will\x20send\x20order\x20notifications\x20only','deleteHistoryAlerts','/:bot/performance','Alerts','emitHistory','hex','orders','sendMessage','remoteAddress','invalid\x20credentials','Backup\x20file\x20unzipped\x20and\x20stored','\x20|\x20','command','ipc','Unauthorized\x20attempt\x20to\x20download\x20','createServer','download','disconnect','reload','sendFile','updatebotmanager','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','simple','backup/','build','assign','config_all','botname','Unauthorized\x20attempt\x20to\x20get\x20events','User\x20has\x20been\x20validated','30\x20min','toIPv4Address','warning'];_0x413b=function(){return _0x4cc927;};return _0x413b();}function validateCredentials(_0x41162d,_0x53ce83){const _0x4d1dfc=_0x4652e8;if(_0x41162d[_0x4d1dfc(0x2aa)]==settings[_0x4d1dfc(0x23a)]&&bcrypt[_0x4d1dfc(0x1ca)](_0x41162d['password'],settings[_0x4d1dfc(0x2f4)])){if(settings[_0x4d1dfc(0x29c)])return{'allow':![],'reason':'2FA\x20login\x20required','token':null};else{const _0x5a42cf=generateLoginToken(_0x53ce83);return{'allow':!![],'reason':_0x4d1dfc(0x21b),'token':_0x5a42cf};}}else return{'allow':![],'reason':_0x4d1dfc(0x1ef),'token':null};}function refreshToken(_0x460550){const _0x11e065=_0x4652e8,_0x584689=generateLoginToken(_0x460550);return{'allow':!![],'reason':_0x11e065(0x21b),'token':_0x584689};}function validateAccess(_0x25c70f,_0x4ae273,_0x5c018c){const _0x30f9c4=_0x4652e8,_0x57e609=_0x5c018c?_0x5c018c:devices[_0x4ae273]['ip'];let _0x3718e0;const _0x23102a=_0x35443f=>{const _0x2cf049=_0x234a;if(settings[_0x2cf049(0x319)]){if(settings[_0x2cf049(0x29c)]){if(telegram2FaApproved(_0x4ae273)){const _0xa038e3=generateLoginToken(_0x4ae273);return{'allow':!![],'reason':_0x2cf049(0x1ac),'token':_0xa038e3};}else return{'allow':![],'reason':_0x2cf049(0x235),'token':null};}else return _0x3718e0=validToken(_0x35443f,_0x4ae273),_0x3718e0[_0x2cf049(0x215)]('success')?{'allow':!![],'reason':_0x2cf049(0x19f),'token':_0x35443f}:{'allow':![],'reason':_0x2cf049(0x235),'token':null};}else return{'allow':!![],'reason':_0x2cf049(0x33d),'token':null};};if(settings['whitelistEnabled']){let _0x52ccbc=[...settings[_0x30f9c4(0x2b2)],'::1',_0x30f9c4(0x22a),_0x30f9c4(0x3ab),'::ffff:7f00:1'];if(_0x52ccbc['includes'](_0x57e609))return _0x23102a(_0x25c70f);else{_0x3718e0=validToken(_0x25c70f,_0x4ae273);if(_0x3718e0[_0x30f9c4(0x215)](_0x30f9c4(0x2a1)))return _0x23102a(_0x25c70f);else{if(telegramIpApproved(_0x4ae273)){const _0x56a598=generateToken(_0x4ae273);return _0x3718e0=_0x23102a(_0x25c70f),_0x3718e0[_0x30f9c4(0x3aa)]?{'allow':!![],'reason':_0x30f9c4(0x33e),'token':_0x56a598}:_0x3718e0;}else return settings['temporaryAccessAllowed']?{'allow':![],'reason':_0x30f9c4(0x230),'token':null}:{'allow':![],'reason':'temporary\x20access\x20not\x20allowed','token':null};}}}else return _0x23102a(_0x25c70f);}function timelyDecrypt(_0x1c6e83,_0x3d110d,_0x5b2eef='@'){const _0x3d2716=_0x4652e8;if(_0x1c6e83)try{const _0x5abbf9=decryptRSA(secure[_0x3d2716(0x32f)],_0x1c6e83),_0x630402=_0x5abbf9['split'](_0x5b2eef)[0x0],_0xb31469=_0x5abbf9['split'](_0x5b2eef)[0x1],_0x1c3683=new Date()[_0x3d2716(0x264)]();if(_0x3d110d){if(_0x1c3683-_0xb31469<maxSecretAge*0x3e8)return _0x630402;else return![];}else return _0x630402;}catch(_0x12050f){return![];}else return![];}const validToken=(_0x4b57d4,_0x516171)=>{const _0x565c88=_0x4652e8,_0x1d87ff=devices[_0x516171]['ip'];if(!_0x4b57d4)return{'error':_0x565c88(0x232)};for(let _0x55d8a8 of blacklist){if(_0x55d8a8[_0x565c88(0x226)]==_0x4b57d4)return{'error':_0x565c88(0x1a7)};}let _0x3573ea;try{_0x3573ea=jwt[_0x565c88(0x225)](_0x4b57d4,secure[_0x565c88(0x36f)]+_0x516171);}catch{return{'error':'Invalid\x20authentication\x20token\x20(1)'};}if(!_0x3573ea[_0x565c88(0x215)](_0x565c88(0x23f))&&!_0x3573ea['hasOwnProperty'](_0x565c88(0x2aa))||!_0x3573ea[_0x565c88(0x215)](_0x565c88(0x21c)))return{'error':'Invalid\x20authentication\x20token\x20(2)'};if(!_0x3573ea[_0x565c88(0x215)](_0x565c88(0x2aa))&&_0x3573ea['hasOwnProperty'](_0x565c88(0x23f))){const {clientip:_0xd8b030}=_0x3573ea;return _0x1d87ff==_0xd8b030?{'success':_0x565c88(0x203)}:{'error':_0x565c88(0x1a2)};}else{if(_0x3573ea['hasOwnProperty'](_0x565c88(0x2aa))&&_0x3573ea[_0x565c88(0x215)](_0x565c88(0x23f))){const {username:_0x43a82c,clientip:_0x286fcb}=_0x3573ea;return settings['bbUsername']==_0x43a82c&&_0x1d87ff==_0x286fcb?{'success':'User\x20has\x20been\x20validated'}:{'error':_0x565c88(0x2f2)};}}},generateLoginToken=_0x7cb4ae=>{const _0x33ece6=_0x4652e8;if(_0x7cb4ae){const _0x7900dd=devices[_0x7cb4ae]['ip'];return jwt[_0x33ece6(0x1bf)]({'username':settings[_0x33ece6(0x23a)],'clientip':_0x7900dd},secure[_0x33ece6(0x36f)]+_0x7cb4ae,{'expiresIn':tokenRefresh*0x3c,'allowInsecureKeySizes':!![]});}else return![];},generateToken=_0x40e2e7=>{const _0x410b9e=_0x4652e8;if(_0x40e2e7){const _0x221a42=devices[_0x40e2e7]['ip'];return jwt['sign']({'clientip':_0x221a42},secure[_0x410b9e(0x36f)]+_0x40e2e7,{'expiresIn':devices[_0x40e2e7][_0x410b9e(0x20a)][_0x410b9e(0x39b)]*0x3c,'allowInsecureKeySizes':!![]});}else return![];},telegramIpApproved=_0x9ec046=>{const _0x25fadf=_0x4652e8;let _0x2e155d=![];return devices[_0x9ec046][_0x25fadf(0x20a)]&&devices[_0x9ec046][_0x25fadf(0x20a)][_0x25fadf(0x39b)]!=_0x25fadf(0x245)&&(_0x2e155d=devices[_0x9ec046][_0x25fadf(0x20a)][_0x25fadf(0x23f)]==devices[_0x9ec046]['ip']&&new Date()[_0x25fadf(0x264)]()-devices[_0x9ec046][_0x25fadf(0x20a)][_0x25fadf(0x385)]<devices[_0x9ec046]['telegramIpApproval']['expiry']*0x3c*0x3e8),_0x2e155d;},telegram2FaApproved=_0x3e959b=>{const _0x134896=_0x4652e8;let _0x580103=![];return devices[_0x3e959b][_0x134896(0x3af)]&&devices[_0x3e959b]['telegram2FaApproval'][_0x134896(0x39b)]!=_0x134896(0x245)&&(_0x580103=devices[_0x3e959b][_0x134896(0x3af)][_0x134896(0x23f)]==devices[_0x3e959b]['ip']&&new Date()[_0x134896(0x264)]()-devices[_0x3e959b]['telegram2FaApproval'][_0x134896(0x385)]<devices[_0x3e959b][_0x134896(0x3af)][_0x134896(0x39b)]*0x3c*0x3e8),_0x580103;},normalizeIP=_0x4e885d=>{const _0x35362b=_0x4652e8;let _0x30e12d=null,_0x23d3df=null;if(ipaddr[_0x35362b(0x37f)](_0x4e885d)){const _0x4436e4=ipaddr[_0x35362b(0x257)](_0x4e885d);_0x4436e4['kind']()===_0x35362b(0x1c4)?(_0x4436e4[_0x35362b(0x2ba)]()&&(_0x30e12d=_0x4436e4[_0x35362b(0x205)]()['toString']()),_0x23d3df=_0x4436e4['toString']()):(_0x30e12d=_0x4436e4['toString'](),_0x23d3df=_0x4436e4[_0x35362b(0x2a8)]()[_0x35362b(0x36e)]());}return{'show':_0x30e12d?_0x30e12d:_0x23d3df,'store':_0x23d3df};};function formatDate(_0x32bd03){const _0x442ba6=_0x4652e8;return _0x32bd03[_0x442ba6(0x1b5)]()+'/'+(_0x32bd03[_0x442ba6(0x1c8)]()+0x1)[_0x442ba6(0x36e)]()[_0x442ba6(0x2df)](0x2,'0')+'/'+_0x32bd03['getDate']()['toString']()['padStart'](0x2,'0')+'\x20'+_0x32bd03['getHours']()[_0x442ba6(0x36e)]()[_0x442ba6(0x2df)](0x2,'0')+':'+_0x32bd03[_0x442ba6(0x29b)]()[_0x442ba6(0x36e)]()['padStart'](0x2,'0')+':'+_0x32bd03[_0x442ba6(0x247)]()[_0x442ba6(0x36e)]()[_0x442ba6(0x2df)](0x2,'0');}function sleep(_0x32429b){return new Promise(_0x2b2c86=>setTimeout(_0x2b2c86,_0x32429b));}