const _0x66c508=_0x3110;(function(_0x22040b,_0x3aa10a){const _0x538c9a=_0x3110,_0x413a98=_0x22040b();while(!![]){try{const _0x202022=parseInt(_0x538c9a(0x164))/0x1*(-parseInt(_0x538c9a(0x183))/0x2)+parseInt(_0x538c9a(0x201))/0x3+-parseInt(_0x538c9a(0x15a))/0x4*(-parseInt(_0x538c9a(0x204))/0x5)+parseInt(_0x538c9a(0xef))/0x6+parseInt(_0x538c9a(0x1ba))/0x7+parseInt(_0x538c9a(0x1ac))/0x8*(-parseInt(_0x538c9a(0x289))/0x9)+parseInt(_0x538c9a(0x1c6))/0xa*(-parseInt(_0x538c9a(0xf2))/0xb);if(_0x202022===_0x3aa10a)break;else _0x413a98['push'](_0x413a98['shift']());}catch(_0x281e8b){_0x413a98['push'](_0x413a98['shift']());}}}(_0x1f89,0xf18e5));const _0x54d0c9=function(){let _0x2be1c6=!![];return function(_0x399201,_0x55d875){const _0x2223cf=_0x2be1c6?function(){if(_0x55d875){const _0x4cdf54=_0x55d875['apply'](_0x399201,arguments);return _0x55d875=null,_0x4cdf54;}}:function(){};return _0x2be1c6=![],_0x2223cf;};}(),_0x26fa3e=_0x54d0c9(this,function(){const _0x2ab264=_0x3110;return _0x26fa3e[_0x2ab264(0x19a)]()[_0x2ab264(0x20b)](_0x2ab264(0x2a4))[_0x2ab264(0x19a)]()[_0x2ab264(0x214)](_0x26fa3e)[_0x2ab264(0x20b)](_0x2ab264(0x2a4));});_0x26fa3e();'use strict';process['env'][_0x66c508(0x1dc)]=0x1;const childProcess=require(_0x66c508(0xc0)),fs=require('fs'),fns=require(_0x66c508(0x11f)),low=require(_0x66c508(0x10f)),FileSync=require('lowdb/adapters/FileSync'),path=require(_0x66c508(0x1db)),crypto=require('crypto'),forge=require('node-forge'),bcrypt=require(_0x66c508(0x29e)),jwt=require(_0x66c508(0x27e)),ipaddr=require(_0x66c508(0x2b2)),argv=require(_0x66c508(0x244))(process[_0x66c508(0x14a)][_0x66c508(0x272)](0x2))['argv'],uuidRandom=require('uuid-random'),{Telegraf,Markup}=require(_0x66c508(0xe2)),Mixpanel=require(_0x66c508(0x23a)),axios=require(_0x66c508(0x227)),{GraphQLClient,gql}=require(_0x66c508(0x20e)),util=require(_0x66c508(0x22d)),fileUpload=require(_0x66c508(0x1e6)),{networkInterfaces}=require('os'),JSZip=require(_0x66c508(0xe0)),PORT=argv[_0x66c508(0x2a8)]||'3000',pattern=/^[0-9]{2,4}$/;function _0x1f89(){const _0x3d0ce8=['hex','logs/','lastmsgtelegram','socket','DEFLATE','Ok,\x20will\x20send\x20alert\x20notifications\x20only','Unauthorized\x20attempt\x20to\x20store\x20configuration','update_no','Running\x20#RED#Balance\x20Bot\x20v','get-portfolio','apiSecret','toggle','Unauthorized\x20attempt\x20to\x20get\x20messages','split','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','login2fa_reject_','2FA\x20required','sendFile','4775079AEfhcz','/download/:type','get','50mxfWZF','pidExpireLogin','success','SIGINT','error','/restart\x20-\x20restart\x20bot(s)\x0a','Unauthorized\x20attempt\x20to\x20download\x20','search','yes','privateKeyFromPem','graphql-request','reset-history','Error\x20details:','-config.json','settings','token','constructor','confirm-message','telegramUsername','kill','min','Password\x20has\x20been\x20reset\x20to:\x20','login\x20required','string','off','-results.json','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','enable','hasOwnProperty','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','server','blacklist','/:bot/history','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run','get-messages','axios','\x20mode','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','telegramEnabled','uncaughtException','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20','util','clientip','showname','headless','Invalid\x20authentication\x20token\x20(1)','bb-secure.json','resetpw_no','botmanager','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','use','ETH','enabled','removeAllListeners','mixpanel','telegramChatId','/output-000.log','disable','function','show','forEach','update_yes','download','sockets','yargs/yargs','data','max','tempaccess_30_','\x20(1)','user','generateAsync','#RES#','ipc','Unauthorized\x20attempt\x20to\x20delete\x20bot','then','init','loginRequired','logs','number','static','/upload-backup','Unauthorized\x20attempt\x20to\x20delete\x20alerts','set','username','sendMetricsTelegram','\x20-\x20','Notifications\x20disabled','unlinkSync','listen','\x20(2)','\x1b[0m','join','timestamp','--------------------------------------','remove','bbvReceive','/backup\x20-\x20receive\x20backup\x20files\x0a','/names\x20-\x20show\x20bot\x20names\x0a','bb/','temporary\x20access\x20timeout','#RES#\x20','status','bots','parse','test','\x1b[34m','Backup\x20file\x20uploaded','\x20only\x0a','Unauthorized\x20attempt\x20to\x20show\x20configuration','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','slice','/:bot/portfolio','telegrammsg','Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?','botID','Starting\x20Balance\x20Bot\x20reinstallation','temporary\x20access\x20not\x20allowed','No\x20bots\x20running\x20right\x20now','1000','help','statSync','Bot\x20','jsonwebtoken','delete-bot','/update\x20-\x20update\x20Balance\x20Bot\x0a','whitelistEnabled','Failed\x20to\x20download\x20','latestversion','full','=>\x20Go\x20to\x20#CYA#http://127.0.0.1:','api-eu.mixpanel.com','telegramToken','version','4567383ZxbkHy','secret','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','f2aRequired','simple','restore_no_','address','Allow\x20login\x20from\x20IP\x20address\x20','update-bb','Network\x20Interfaces:','store-settings','/:bot','privateKey','All\x20bots','rmSync','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','any','0.0.0','Invalid\x20username\x20or\x20IP\x20address','Notifications\x20enabled\x0a','getStartingBalances','bcryptjs','backup-full.zip','store-configuration','Markdown','write','inherit','(((.+)+)+)+$','sign','bot-','Restore\x20process\x20aborted','port','storeConfiguration','on_','callback','off_','backup/','name','sendPortfolioTelegram','cloneDeep','Unauthorized\x20attempt\x20to\x20update\x20bot','ipaddr.js','CoinMarketCap\x20API\x20key\x20validated','messages','reason','index.html','send','store-headless','temp/','/:bot/performance','Login\x20accepted','backup','Notifications\x20enabled','restore_yes_','Unauthorized\x20login\x20attempt\x20(timeout)','all','decode64','close','copyFileSync','auth','Unauthorized\x20attempt\x20to\x20update\x20settings','apiKey','child_process','auto','config_alerts','build','randomBytes','stop','\x20minutes','create','bb-settings.json','notification','allow','output-000.log','bot.js','Invalid\x20authentication\x20token\x20(2)','getFullYear','text','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run','Invalid\x20IP\x20address','*$1*','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','\x20files\x20over\x20Telegram:','bbPassword','_nsps','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','$1_$2_$3','manual','.zip','publicKeyToPem','backupfile','status\x20code\x20401','login\x20token\x20generated','lastmsgemitted','jszip','private','telegraf','<b>Telegram\x20Bot\x20Status:</b>\x0a','(staging)','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','output-002.log','address\x20already\x20in\x20use','Starting\x20new\x20bot\x20|\x20Bot\x20','staging','Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files','Restore\x20process\x20confirmed','config_all','value','expiry','9309702yJtsJS',':\x20Bot\x20Mgr\x20>\x20','getSeconds','5162278ioJvSo','replace','find','SIGTERM','sortBy','Idling\x20(','timeshift','Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files','defaults','telegramIpApproval','message','Error:\x20Invalid\x20argument\x20','login','family','push','stringify','running','sort','Unauthorized\x20attempt\x20to\x20log\x20out','delete-alerts','clients','toIPv4MappedAddress','Logged\x20in\x20user\x20...','compareSync','login\x20token\x20valid','toIPv4Address','kind','Unauthorized\x20attempt\x20to\x20get\x20portfolio','toggle-bot-mode','lowdb','Unauthorized\x20attempt\x20to\x20add\x20bot','Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation','keys','reload','/disable\x20-\x20disable\x20notifications\x0a','Telegraf\x20error:','getHours','store','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','getPortfolio','Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled','encryptedUuid','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','generateKeyPair','date-fns','cancelLoading','cancel-loading','tkn','restart','\x20|\x20','-events.json','randomFillSync','login\x20not\x20required','settings.','privateKeyToPem','metrics','2FA\x20login\x20token\x20generated','***','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','botname','Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot','getMinutes','command','loadAsync','add','sha256','order','existsSync','Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history','telegram','from','reinstall','versions','version.json','/on\x20-\x20start\x20bot(s)\x0a','Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration','decrypt','catch','2FA','2FA\x20login\x20rejected','getDate','format','storeFiat','internal','placeOrder','Error\x20sending\x20','get-starting-balances','argv','Login\x20rejected','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)','Logged\x20out\x20user\x20...','All','assign','host','Session\x20expired\x20for\x20user\x20...','publicKey','readFileSync','Unauthorized\x20attempt\x20to\x20get\x20events','Error\x20removing\x20old\x20backup\x20files:','files','hashSync','tempaccess_15_','live','313748nUUaGG','\x1b[31m','Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)','new-disabled','User\x20has\x20been\x20validated','handshake','5\x20min','createWriteStream','config','Access\x20enabled\x20for\x20','584497XVGCLd',':\x20Bot\x20Mgr\x20>\x20Telegram\x20error\x20occured','reinstall_yes','invalid\x20credentials','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?',')\x20\x20\x20|\x20Bot\x20','isDirectory','File\x20uploaded','length','Node.js\x20v','getUTCHours','<b>Balance\x20Bot\x20Status:</b>\x0a','bbUsername','-----------------------------------------------------------------------------------','Setting\x20access:\x20','zip/','emitHistory','update','disconnect','/status\x20-\x20show\x20bot(s)\x20status\x0a','bot','logged\x20out','uuid','pki','Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file','apiPassword','/off\x20-\x20stop\x20bot(s)\x0a','onepagemode','emit','output-003.log','\x1b[36m','6gAfgXq','writeFileSync','config/','Temporary\x20access\x20rejected','file','action','event','replyWithDocument','launch','startsWith','mode','secure','filter','title','Enabled\x20Bot\x20','code','password','readdirSync','getTime','reply','match','HTML','::ffff:127.0.0.1','toString','headers','add-bot','log','alerts','backup-full@','verify','reinstall_no','socket.io','accept','http','************','temporary\x20token\x20generated','30\x20min','whitelist','button','temporary\x20access\x20rejected','fork','8LSVjOa','Telegram\x20error:','debug','login2fa_','isIPv4MappedAddress','ipv6','Server','post','chat','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','No\x20authentication\x20token','toggleBotMode','remoteAddress','type','1829149OnUfFE','inlineKeyboard','access\x20timeout','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','Yes','pidRefreshToken','Bot\x20Mgr\x20>\x20','place-order','show-config','telegramEvents','orders','resetpw_yes','20kKRXqD','build2','range','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','backup-full','\x20>\x20','getMonth','logout','exit','config_orders','marketcapApi','bb-config.json','bbvNew','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','IPv4','new','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)','once','exec',':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20','sendMessage','path','NTBA_FIX_319','127.0.0.1','stopped','reject','mkdirSync','referer','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','disabled','|@|','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20see\x20logs\x20for\x20details','express-fileupload','padStart','access','telegram2FaApproval','isValid','editMessageReplyMarkup','#RES#\x20if\x20running\x20on\x20server','Ok,\x20will\x20send\x20order\x20notifications\x20only','userid'];_0x1f89=function(){return _0x3d0ce8;};return _0x1f89();}!pattern[_0x66c508(0x26c)](PORT)&&(console[_0x66c508(0x19d)](_0x66c508(0xfd)+PORT+',\x20must\x20be\x20a\x204\x20digit\x20number'),process[_0x66c508(0x1ce)](0x1));const HOST=argv[_0x66c508(0x150)]||null,userID=argv[_0x66c508(0x249)]||'',debugging=argv['d']||![],recreate=argv['r']||![],nodeversion=process[_0x66c508(0x13b)]['node'];let bbpath=_0x66c508(0x266),bbpath2='';const botfile=_0x66c508(0xcc),configfile=_0x66c508(0x1d1),settingsfile=_0x66c508(0xc8),securefile='bb-secure.json',environment=require('./'+bbpath2+_0x66c508(0x13c))['environment']||'production',maxBackups=0xa;let validInstallation=!![];const schedulerInterval=0x3c*0x3c*0x3e8;!fs[_0x66c508(0x136)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x66c508(0x106)),configpath=userID?bbpath+_0x66c508(0x185)+userID+'/':bbpath+_0x66c508(0x185),configbackuppath=configpath+_0x66c508(0x2ad),logspath=userID?bbpath+_0x66c508(0x1f0)+userID+'/':bbpath+_0x66c508(0x1f0),zippath=userID?bbpath+'zip/'+userID+'/':bbpath+_0x66c508(0x173),loggerfile=fs[_0x66c508(0x161)](logspath+_0x66c508(0x23c),{'flags':'a'}),temppath=userID?bbpath+_0x66c508(0x2b9)+userID+'/':bbpath+'temp/';!fs[_0x66c508(0x136)](configpath)&&fs[_0x66c508(0x1e0)](configpath);!fs['existsSync'](configbackuppath)&&fs[_0x66c508(0x1e0)](configbackuppath);!fs[_0x66c508(0x136)](logspath)&&fs[_0x66c508(0x1e0)](logspath);!fs[_0x66c508(0x136)](zippath)&&fs[_0x66c508(0x1e0)](zippath);!fs[_0x66c508(0x136)](temppath)&&fs[_0x66c508(0x1e0)](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x66c508(0xfa)]({'bots':[]})[_0x66c508(0x2a2)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x66c508(0xfa)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0x66c508(0x29a),'onepagemode':![],'marketcapApi':''}})[_0x66c508(0x2a2)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x66c508(0xfa)]({'secure':{},'blacklist':[]})[_0x66c508(0x2a2)]();const saltRounds=0xa,mixpanel=Mixpanel[_0x66c508(0x24f)]('6b67f3d61ee94b8f5c80b4affef4c4d9',{'host':_0x66c508(0x286)});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings[_0x66c508(0x287)]&&(settings[_0x66c508(0x287)]!=''&&settings[_0x66c508(0x287)]!='***')&&settings['telegramUsername']&&settings['telegramUsername']!='')initTelegram();const parseColor=(_0x137099,_0x25d7b7)=>{const _0xaa7aa9=_0x66c508,_0x2f1736=/#[A-Z]{3}#/g;if(typeof _0x137099==_0xaa7aa9(0x21b)){!_0x25d7b7?_0x137099=_0x137099[_0xaa7aa9(0xf3)](_0x2f1736,''):(_0x137099=_0x137099[_0xaa7aa9(0xf3)](/#BLU#/g,_0xaa7aa9(0x26d)),_0x137099=_0x137099[_0xaa7aa9(0xf3)](/#RED#/g,_0xaa7aa9(0x15b)),_0x137099=_0x137099['replace'](/#YEL#/g,'\x1b[33m'),_0x137099=_0x137099[_0xaa7aa9(0xf3)](/#MAG#/g,'\x1b[35m'),_0x137099=_0x137099[_0xaa7aa9(0xf3)](/#CYA#/g,_0xaa7aa9(0x182)),_0x137099=_0x137099['replace'](/#RES#/g,_0xaa7aa9(0x25e)));;}return _0x137099;},logger={'screen':_0x4bc9ca=>{console['log'](parseColor(_0x4bc9ca,!![]));},'simple':_0x1f14b2=>{const _0x3082f4=_0x66c508;console[_0x3082f4(0x19d)](parseColor(_0x1f14b2,!![])),loggerfile['write'](util[_0x3082f4(0x144)](parseColor(_0x1f14b2,![]))+'\x0a');},'full':async _0xe37e6a=>{const _0x357405=_0x66c508,_0x20858a=getTimeStamp()+_0x357405(0xf0)+_0xe37e6a;console[_0x357405(0x19d)](parseColor(_0x20858a,!![])),loggerfile[_0x357405(0x2a2)](util['format'](parseColor(_0x20858a,![]))+'\x0a');if(tgBot&&settings[_0x357405(0x23b)]&&settings[_0x357405(0x1c3)]!=_0x357405(0x1c4))await sendTelegram(settings[_0x357405(0x23b)],'Bot\x20Mgr\x20>\x20'+parseColor(_0xe37e6a,![]));},'debug':async(_0x412fe8,_0xdd8275='')=>{const _0xf02df9=_0x66c508,_0x17eb2b=getTimeStamp()+_0xf02df9(0x1d9)+_0x412fe8;if(debugging)console['log'](parseColor(_0x17eb2b,!![]));loggerfile[_0xf02df9(0x2a2)](util[_0xf02df9(0x144)](parseColor(_0x17eb2b,![]))+'\x0a');if(_0xdd8275){if(debugging)console['log'](_0xdd8275);loggerfile[_0xf02df9(0x2a2)](util[_0xf02df9(0x144)](_0xdd8275)+'\x0a');}}};let terminating=![];process['on'](_0x66c508(0x22b),function(_0x238c9a){const _0x1508c7=_0x66c508;_0x238c9a[_0x1508c7(0x19a)]()['includes'](_0x1508c7(0xe7))?(logger[_0x1508c7(0x28d)]('#RED#Balance\x20Bot\x20is\x20already\x20running\x20on\x20port\x20'+_0x238c9a[_0x1508c7(0x2a8)]+_0x1508c7(0x24b)),process[_0x1508c7(0x2b7)]({'terminate':!![]},_0x44347f=>{})):logger[_0x1508c7(0x28d)](_0x238c9a);}),process['on']('exit',()=>{const _0x12cd5e=_0x66c508;stopAllBots(),process[_0x12cd5e(0x1ce)](0x0);}),process['on'](_0x66c508(0xf5),()=>{const _0x1cd215=_0x66c508;stopAllBots(),process[_0x1cd215(0x1ce)](0x0);}),process['on']('SIGINT',()=>{const _0x1fa9a4=_0x66c508;stopAllBots(),process[_0x1fa9a4(0x1ce)](0x0);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x66c508(0x13c))[_0x66c508(0x288)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let tmpStorage={},devices=[],lastIpApproval,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require('express'),app=express(),http=require(_0x66c508(0x1a4))['createServer'](app);app[_0x66c508(0x236)](fileUpload({'useTempFiles':!![]})),app[_0x66c508(0x203)](_0x66c508(0x202),async(_0x3d0fdb,_0x191aeb)=>{const _0x140320=_0x66c508,_0x4b3cf6=_0x3d0fdb['params'][_0x140320(0x1b9)],_0x384614=getClientsWithBotID(_0x140320(0x234)),_0x1497ec=_0x3d0fdb[_0x140320(0x19b)]['uuid'],_0x382463=timelyDecrypt(_0x1497ec,![]),_0x158ee5=_0x384614[_0x140320(0xf4)](_0x2f4ef4=>_0x2f4ef4['uuid']==_0x382463);if(_0x158ee5){const _0x478ba5=normalizeIP(_0x3d0fdb[_0x140320(0x1f2)][_0x140320(0x1b8)])['store'],_0xae6d84=_0x3d0fdb[_0x140320(0x19b)][_0x140320(0x122)];if(validateAccess(_0xae6d84,_0x382463,_0x478ba5)[_0x140320(0xca)])_0x4b3cf6==_0x140320(0xb5)&&await backupConfigFiles(),await zipFiles(_0x4b3cf6),_0x191aeb[_0x140320(0x242)](zippath+(_0x4b3cf6+_0x140320(0xda)),_0x1bf943=>{const _0x247eca=_0x140320;_0x1bf943&&(logger[_0x247eca(0x284)](_0x247eca(0x282)+_0x4b3cf6),logger[_0x247eca(0x28d)](_0x1bf943));});else logger[_0x140320(0x284)](_0x140320(0x20a)+_0x4b3cf6+_0x140320(0x248));}else logger[_0x140320(0x284)]('Unauthorized\x20attempt\x20to\x20download\x20'+_0x4b3cf6+_0x140320(0x25d));}),app[_0x66c508(0x1b3)](_0x66c508(0x254),async(_0x595e3c,_0x5a8a9b)=>{const _0x15cf74=_0x66c508,_0x4b69d8=getClientsWithBotID(_0x15cf74(0x234)),_0x3e7a1a=_0x595e3c[_0x15cf74(0x19b)][_0x15cf74(0x17a)],_0x3e58f8=timelyDecrypt(_0x3e7a1a,![]),_0x3bf113=_0x4b69d8['find'](_0x4fdd21=>_0x4fdd21[_0x15cf74(0x17a)]==_0x3e58f8);logger[_0x15cf74(0x1ae)](_0x15cf74(0x26e));if(_0x3bf113){const _0x81d7d5=normalizeIP(_0x595e3c['socket'][_0x15cf74(0x1b8)])[_0x15cf74(0x117)],_0x15aade=_0x595e3c['headers']['tkn'];if(validateAccess(_0x15aade,_0x3e58f8,_0x81d7d5)[_0x15cf74(0xca)]){if(_0x595e3c[_0x15cf74(0x156)]){const _0xde411a=_0x595e3c[_0x15cf74(0x156)][_0x15cf74(0xdc)];await _0xde411a['mv'](temppath+_0xde411a[_0x15cf74(0x2ae)]),_0x5a8a9b[_0x15cf74(0x2b7)]({'status':!![],'message':_0x15cf74(0x16b)});const _0x5042fa=getBotsWithMode();_0x5042fa['length']>0x0?confirmRestore(temppath,_0xde411a[_0x15cf74(0x2ae)]):unzipFile(temppath,_0xde411a[_0x15cf74(0x2ae)]);}}else logger[_0x15cf74(0x284)](_0x15cf74(0x1d6));}else logger[_0x15cf74(0x284)](_0x15cf74(0x14c));}),app[_0x66c508(0x236)](express[_0x66c508(0x253)](path[_0x66c508(0x25f)](__dirname,bbpath2,_0x66c508(0x1c7)))),app['use'](express[_0x66c508(0x253)](path[_0x66c508(0x25f)](__dirname,bbpath2,_0x66c508(0xc3)))),app[_0x66c508(0x203)]('/',function(_0x396a28,_0x2539a0){const _0x4eabe6=_0x66c508;_0x2539a0['sendFile'](path[_0x4eabe6(0x25f)](__dirname,bbpath2,_0x4eabe6(0x1c7),_0x4eabe6(0x2b6)));}),app[_0x66c508(0x203)](_0x66c508(0x294),function(_0x2d0e31,_0x179622){const _0x5bd98d=_0x66c508;_0x179622[_0x5bd98d(0x200)](path['join'](__dirname,bbpath2,_0x5bd98d(0xc3),'index.html'));}),app[_0x66c508(0x203)](_0x66c508(0x273),(_0x2b868e,_0x468bf3)=>{const _0x566ce1=_0x66c508;_0x468bf3[_0x566ce1(0x200)](path[_0x566ce1(0x25f)](__dirname,bbpath2,'build',_0x566ce1(0x2b6)));}),app[_0x66c508(0x203)](_0x66c508(0x2ba),(_0x5b57d2,_0x1a5c1b)=>{const _0x13b577=_0x66c508;_0x1a5c1b[_0x13b577(0x200)](path[_0x13b577(0x25f)](__dirname,bbpath2,_0x13b577(0xc3),_0x13b577(0x2b6)));}),app[_0x66c508(0x203)]('/:bot/coins',(_0x2dcf69,_0x565c6f)=>{const _0x2d8c51=_0x66c508;_0x565c6f[_0x2d8c51(0x200)](path[_0x2d8c51(0x25f)](__dirname,bbpath2,_0x2d8c51(0xc3),'index.html'));}),app[_0x66c508(0x203)](_0x66c508(0x224),(_0x4b7d5b,_0x2e68a4)=>{const _0xd71881=_0x66c508;_0x2e68a4[_0xd71881(0x200)](path['join'](__dirname,bbpath2,_0xd71881(0xc3),_0xd71881(0x2b6)));}),app[_0x66c508(0x203)]('/:bot/configuration',(_0x1e4731,_0x2bccf0)=>{const _0x58a353=_0x66c508;_0x2bccf0[_0x58a353(0x200)](path['join'](__dirname,bbpath2,_0x58a353(0xc3),_0x58a353(0x2b6)));}),app[_0x66c508(0x203)]('/:bot/support',(_0x3faa32,_0x1f9287)=>{const _0x498ae0=_0x66c508;_0x1f9287[_0x498ae0(0x200)](path[_0x498ae0(0x25f)](__dirname,bbpath2,_0x498ae0(0xc3),_0x498ae0(0x2b6)));});if(HOST)http[_0x66c508(0x25c)](PORT,HOST);else http[_0x66c508(0x25c)](PORT);const io=require(_0x66c508(0x1a2))(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}function getServerIP(){const _0x33df94=_0x66c508;let _0x55b64f='[ip-address]';const _0x4780d1=networkInterfaces(),_0x5b6551={};for(const _0xb40547 of Object[_0x33df94(0x112)](_0x4780d1)){for(const _0x3fc714 of _0x4780d1[_0xb40547]){if((_0x3fc714['family']==_0x33df94(0x1d4)||_0x3fc714[_0x33df94(0xff)]==0x4)&&!_0x3fc714[_0x33df94(0x146)]){const _0x41ed65=ipaddr[_0x33df94(0x26b)](_0x3fc714[_0x33df94(0x28f)])[_0x33df94(0x1c8)]();_0x41ed65!=_0x33df94(0xe1)&&(!_0x5b6551[_0xb40547]&&(_0x5b6551[_0xb40547]=[]),_0x5b6551[_0xb40547][_0x33df94(0x100)](_0x3fc714[_0x33df94(0x28f)]),_0x55b64f=_0x3fc714['address']);}}}return{'serverip':_0x55b64f,'netinterfaces':_0x5b6551};}async function startServer(){const _0x36d505=_0x66c508,{serverip:_0xbfe90e,netinterfaces:_0x248aef}=getServerIP();logger[_0x36d505(0x28d)](''),logger[_0x36d505(0x28d)]('-----------------------------------------------------------------------------------'),await logger[_0x36d505(0x284)]('Starting\x20#RED#Balance\x20Bot\x20v'+serverversion+_0x36d505(0x268)+(environment==_0x36d505(0xe9)?_0x36d505(0xe4):'')+'\x0a'+(_0x36d505(0x285)+PORT+'#RES#\x20if\x20running\x20locally\x0a')+('=>\x20Go\x20to\x20#CYA#http://'+_0xbfe90e+':'+PORT+_0x36d505(0x1ec))),logger[_0x36d505(0x28d)](_0x36d505(0x171));if(config['length']!=0x0)for(const _0x36f393 of config){const _0x55b144=_0x36f393['mode']==_0x36d505(0xc1)?'a':'m';if(_0x36f393[_0x36d505(0x269)]==_0x36d505(0x238)||_0x36f393[_0x36d505(0x269)]==_0x36d505(0x1d5))await logger[_0x36d505(0x284)]('Starting\x20('+_0x55b144+')\x20|\x20Bot\x20'+_0x36f393[_0x36d505(0x276)]+'\x20|\x20'+_0x36f393['botname']),startBot([_0x36f393[_0x36d505(0x276)],userID],{'cwd':bbpath},function(_0x23510c){if(_0x23510c)logger['full'](_0x23510c);});else(_0x36f393[_0x36d505(0x269)]==_0x36d505(0x1e3)||_0x36f393[_0x36d505(0x269)]=='new-disabled')&&await logger[_0x36d505(0x284)](_0x36d505(0xf7)+_0x55b144+_0x36d505(0x169)+_0x36f393['botID']+_0x36d505(0x124)+_0x36f393[_0x36d505(0x12e)]);}else!newBot&&logger[_0x36d505(0x28d)]('>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!');if(newBot)addBot();logger[_0x36d505(0x28d)](_0x36d505(0x171)),logger[_0x36d505(0x28d)](''),await logger[_0x36d505(0x1ae)](_0x36d505(0x16d)+nodeversion),await logger[_0x36d505(0x1ae)](_0x36d505(0x292),_0x248aef);}function startSocket(){io['on']('connection',_0x498293=>{const _0x3f1319=_0x3110;let _0x29a26b,_0x33c4b6,_0x3067ad,_0x5361f2,_0x53f579;const _0x4251de=_0x498293[_0x3f1319(0x15f)][_0x3f1319(0x19b)][_0x3f1319(0x1e1)];_0x33c4b6=_0x4251de['match'](/bot[0-9]{3}/);if(_0x33c4b6)_0x3067ad=_0x33c4b6[0x0][_0x3f1319(0x197)](/[0-9]{3}/);if(_0x3067ad)_0x29a26b=_0x3067ad[0x0];else _0x29a26b='botmanager';const _0x2df1ad=_0x498293['handshake'][_0x3f1319(0xbd)][_0x3f1319(0x11b)];if(!_0x2df1ad)_0x498293[_0x3f1319(0x180)](_0x3f1319(0x269),{'publicKey':secure[_0x3f1319(0x152)]});else{_0x5361f2=timelyDecrypt(_0x2df1ad,![]);if(!_0x5361f2)_0x498293[_0x3f1319(0x180)](_0x3f1319(0x269),{'publicKey':secure[_0x3f1319(0x152)]});else{_0x53f579=normalizeIP(_0x498293['conn'][_0x3f1319(0x1b8)])[_0x3f1319(0x117)];if(!devices[_0x5361f2])devices[_0x5361f2]={'uuid':_0x5361f2,'access':{'token':null}};devices[_0x5361f2]['ip']=_0x53f579;const _0xbf4933=addClient(_0x498293['id'],_0x5361f2,_0x29a26b);setAccess(_0xbf4933),emitMessages(),_0x498293['on'](_0x3f1319(0xfe),_0x3b8482=>{const _0x42ae04=_0x3f1319,_0x444dcd=timelyDecrypt(_0x3b8482[_0x42ae04(0x193)],!![],_0x42ae04(0x1e4));if(_0x444dcd){_0x3b8482={'username':_0x3b8482[_0x42ae04(0x257)],'password':_0x444dcd},devices[_0x5361f2]['access']=validateCredentials(_0x3b8482,_0x5361f2);if(devices[_0x5361f2]['access'][_0x42ae04(0xca)]==![]&&devices[_0x5361f2][_0x42ae04(0x1e8)][_0x42ae04(0x2b5)]=='2FA\x20login\x20required')_0x498293[_0x42ae04(0x180)](_0x42ae04(0x269),{'access':devices[_0x5361f2][_0x42ae04(0x1e8)]}),loginAccess2FA(_0x5361f2,_0x53f579);else{if(devices[_0x5361f2][_0x42ae04(0x1e8)]['allow']==![]&&devices[_0x5361f2][_0x42ae04(0x1e8)][_0x42ae04(0x2b5)]==_0x42ae04(0x167))_0x498293[_0x42ae04(0x180)](_0x42ae04(0x269),{'access':devices[_0x5361f2]['access']});else devices[_0x5361f2][_0x42ae04(0x1e8)]['allow']&&devices[_0x5361f2]['access'][_0x42ae04(0x2b5)]==_0x42ae04(0xde)&&(getClientsWithUuid(_0x5361f2)[_0x42ae04(0x240)](_0x3759d6=>{setAccess(_0x3759d6);}),logger[_0x42ae04(0x1ae)](_0x42ae04(0x108)+_0x5361f2['slice'](-0x8)),setTokenRefresh(_0x5361f2),setSessionTimeout(_0x42ae04(0xfe),_0x5361f2));}}else logger[_0x42ae04(0x284)](_0x42ae04(0xb8));}),_0x498293['on']('reset-password',()=>{resetPassword();}),_0x498293['on'](_0x3f1319(0x176),_0x3c9fd0=>{removeClient(_0x498293['id']);}),_0x29a26b==_0x3f1319(0x234)&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x329a67){const _0x5b7cad=_0x66c508;if(_0x329a67!=_0x5b7cad(0x234)&&config[_0x5b7cad(0xbf)]!=''){if(pid[_0x329a67])pid[_0x329a67]['send']({'function':'initclient','args':null});}_0x329a67!=_0x5b7cad(0x234)&&broadcastToBots(_0x5b7cad(0x26a),JSON['stringify'](config));}function reloadBotManager(){getClientsWithBotID('botmanager')['forEach'](_0x5021f1=>{const _0xabd3f8=_0x3110;getSocket(_0x5021f1['id'])['emit']('status',{'access':{'allow':![],'reason':_0xabd3f8(0x113),'token':null}});});}function getSocket(_0x26f64b){const _0x4f497d=_0x66c508,_0x2956a9=io[_0x4f497d(0xd6)][_0x4f497d(0x203)]('/');return _0x2956a9[_0x4f497d(0x243)][_0x4f497d(0x203)](_0x26f64b);}function setAccess(_0x80587f){const _0x2a9f63=_0x66c508,_0x3cdc9e=getSocket(_0x80587f['id']),_0x4fff17=_0x80587f[_0x2a9f63(0x17a)],_0xd9b668=_0x80587f[_0x2a9f63(0x178)];devices[_0x4fff17][_0x2a9f63(0x1e8)]=validateAccess(devices[_0x4fff17][_0x2a9f63(0x1e8)][_0x2a9f63(0x213)],_0x4fff17),logger[_0x2a9f63(0x1ae)](_0x2a9f63(0x172)+devices[_0x4fff17][_0x2a9f63(0x1e8)]['reason']+'\x20|\x20client:\x20...'+_0x80587f['id'][_0x2a9f63(0x272)](-0x8)+'\x20|\x20user:\x20...'+_0x4fff17[_0x2a9f63(0x272)](-0x8)),_0x3cdc9e[_0x2a9f63(0x25f)](_0x4fff17);if(devices[_0x4fff17][_0x2a9f63(0x1e8)]['allow']){_0x3cdc9e[_0x2a9f63(0x25f)](_0xd9b668);if(_0xd9b668=='botmanager')initializeSocketBotManager(_0x3cdc9e);else initializeSocketBot(_0x3cdc9e);initClient(_0xd9b668);}devices[_0x4fff17][_0x2a9f63(0x1e8)][_0x2a9f63(0x213)]&&devices[_0x4fff17]['access'][_0x2a9f63(0x2b5)]==_0x2a9f63(0x1a6)&&setSessionTimeout(_0x2a9f63(0x141),_0x4fff17),devices[_0x4fff17][_0x2a9f63(0x1e8)][_0x2a9f63(0x213)]&&devices[_0x4fff17][_0x2a9f63(0x1e8)][_0x2a9f63(0x2b5)]==_0x2a9f63(0x12b)&&setSessionTimeout(_0x2a9f63(0xfe),_0x4fff17),_0x3cdc9e['emit']('status',{'status':_0x80587f[_0x2a9f63(0x222)],'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x4fff17]['access'],'externalip':devices[_0x4fff17]['ip'],'publicKey':secure[_0x2a9f63(0x152)],'userid':settings[_0x2a9f63(0x1ee)],'validInstallation':validInstallation}),devices[_0x4fff17][_0x2a9f63(0x1e8)][_0x2a9f63(0xca)]==![]&&devices[_0x4fff17][_0x2a9f63(0x1e8)][_0x2a9f63(0x2b5)]=='2FA\x20required'&&temporaryAccess2FA(_0x4fff17,devices[_0x4fff17]['ip']);}function setSessionTimeout(_0x3854e7,_0x5189b5){const _0x1c76d5=_0x66c508;let _0x1183af;if(_0x3854e7==_0x1c76d5(0xfe))_0x1183af=loginExpiry*0x3c*0x3e8;else _0x1183af=devices[_0x5189b5][_0x1c76d5(0xfb)]['expiry']*0x3c*0x3e8-(new Date()[_0x1c76d5(0x195)]()-devices[_0x5189b5][_0x1c76d5(0xfb)][_0x1c76d5(0x260)]);if(devices[_0x5189b5][_0x1c76d5(0x205)])clearTimeout(devices[_0x5189b5][_0x1c76d5(0x205)]);devices[_0x5189b5]['pidExpireLogin']=setTimeout(()=>{const _0x952c14=_0x1c76d5;if(devices[_0x5189b5][_0x952c14(0x1bf)])clearTimeout(devices[_0x5189b5][_0x952c14(0x1bf)]);removeSocketListeners(_0x5189b5),addBlacklist(_0x5189b5),devices[_0x5189b5][_0x952c14(0xfb)]=null,devices[_0x5189b5][_0x952c14(0x1e9)]=null,devices[_0x5189b5][_0x952c14(0x1e8)]['token']=null,logger[_0x952c14(0x1ae)](_0x952c14(0x151)+_0x5189b5[_0x952c14(0x272)](-0x8)),devices[_0x5189b5][_0x952c14(0x1e8)]=validateAccess(devices[_0x5189b5][_0x952c14(0x1e8)][_0x952c14(0x213)],_0x5189b5),!(devices[_0x5189b5]['access'][_0x952c14(0xca)]&&devices[_0x5189b5][_0x952c14(0x1e8)][_0x952c14(0x2b5)]==_0x952c14(0x127))&&(_0x3854e7==_0x952c14(0xfe)?io['to'](_0x5189b5)['emit'](_0x952c14(0x269),{'access':{'allow':![],'reason':_0x952c14(0x1bc),'token':null}}):io['to'](_0x5189b5)[_0x952c14(0x180)](_0x952c14(0x269),{'access':{'allow':![],'reason':_0x952c14(0x267),'token':null}})),devices[_0x5189b5]['access'][_0x952c14(0x213)]=null;},_0x1183af);}function setTokenRefresh(_0x1ff501){const _0xbc5f47=_0x66c508;if(devices[_0x1ff501][_0xbc5f47(0x1bf)])clearTimeout(devices[_0x1ff501][_0xbc5f47(0x1bf)]);devices[_0x1ff501][_0xbc5f47(0x1bf)]=setTimeout(()=>{const _0x4ed50f=_0xbc5f47;getClientsWithUuid(_0x1ff501)['length']!=0x0?(devices[_0x1ff501][_0x4ed50f(0x1e8)]=refreshToken(_0x1ff501),io['to'](_0x1ff501)['emit']('status',{'status':'connected','serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x1ff501]['access'],'externalip':devices[_0x1ff501]['ip'],'publicKey':secure[_0x4ed50f(0x152)],'validInstallation':validInstallation}),setTokenRefresh(_0x1ff501)):clearTimeout(devices[_0x1ff501]['pidRefreshToken']);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x421e22){const _0x5af59c=_0x66c508,_0x57e061=getClient(_0x421e22['id'])[_0x5af59c(0x17a)];_0x421e22[_0x5af59c(0x180)](_0x5af59c(0x26a),config),_0x421e22[_0x5af59c(0x180)](_0x5af59c(0x212),cleanSettings()),_0x421e22['on'](_0x5af59c(0x19c),_0x55192e=>{const _0x4e6d1d=_0x5af59c;if(validateAccess(_0x55192e,_0x57e061)[_0x4e6d1d(0xca)])addBot();else logger[_0x4e6d1d(0x284)](_0x4e6d1d(0x110));}),_0x421e22['on']('update-bot',(_0x689935,_0x5d48b3)=>{const _0x36abe1=_0x5af59c;if(validateAccess(_0x5d48b3,_0x57e061)[_0x36abe1(0xca)])toggleBot(_0x689935[_0x36abe1(0x276)],_0x689935[_0x36abe1(0x269)],_0x689935[_0x36abe1(0x159)]);else logger['full']('Unauthorized\x20attempt\x20to\x20update\x20bot');}),_0x421e22['on'](_0x5af59c(0x10e),(_0x4e7d01,_0x159f61)=>{const _0xefec91=_0x5af59c;if(validateAccess(_0x159f61,_0x57e061)[_0xefec91(0xca)])toggleBotMode(_0x4e7d01);else logger['full'](_0xefec91(0x2b1));}),_0x421e22['on'](_0x5af59c(0x27f),(_0x2ef4e1,_0x15066d)=>{const _0x497973=_0x5af59c;if(validateAccess(_0x15066d,_0x57e061)['allow'])deleteBot(_0x2ef4e1);else logger['full'](_0x497973(0x24d));}),_0x421e22['on'](_0x5af59c(0x293),(_0x3827ac,_0x3be34c)=>{const _0x113849=_0x5af59c;if(validateAccess(_0x3be34c,_0x57e061)[_0x113849(0xca)])storeSettings(_0x3827ac,!![]);else logger[_0x113849(0x284)](_0x113849(0xbe));}),_0x421e22['on'](_0x5af59c(0x291),_0x3e38c8=>{const _0x5a9d9d=_0x5af59c;if(validateAccess(_0x3e38c8,_0x57e061)[_0x5a9d9d(0xca)])updateBB(_0x5a9d9d(0x175));else logger[_0x5a9d9d(0x284)](_0x5a9d9d(0x221));}),_0x421e22['on']('reinstall-bb',_0x597194=>{const _0x1093aa=_0x5af59c;if(validateAccess(_0x597194,_0x57e061)[_0x1093aa(0xca)])updateBB(_0x1093aa(0x13a));else logger[_0x1093aa(0x284)](_0x1093aa(0x12f));}),_0x421e22['on']('get-backup-files',_0xd6a539=>{const _0x283e1a=_0x5af59c;if(validateAccess(_0xd6a539,_0x57e061)[_0x283e1a(0xca)]){const _0x483fe5=getClient(_0x421e22['id']);if(_0x483fe5)getBackupFiles(_0x483fe5[_0x283e1a(0x17a)]);else logger[_0x283e1a(0x284)](_0x283e1a(0xf9));}else logger[_0x283e1a(0x284)](_0x283e1a(0xea));}),_0x421e22['on']('restore-backup-file',(_0x44b35a,_0x3705b1)=>{const _0x25ae43=_0x5af59c;if(validateAccess(_0x3705b1,_0x57e061)['allow'])restoreBackupFile(_0x44b35a);else logger[_0x25ae43(0x284)](_0x25ae43(0x17c));}),_0x421e22['on'](_0x5af59c(0x226),_0x3349ab=>{const _0x5bf954=_0x5af59c;if(validateAccess(_0x3349ab,_0x57e061)[_0x5bf954(0xca)])getMessages();else logger[_0x5bf954(0x284)](_0x5bf954(0x1fb));}),_0x421e22['on'](_0x5af59c(0x215),(_0x300251,_0x35f45a)=>{const _0x4fb2ba=_0x5af59c;if(validateAccess(_0x35f45a,_0x57e061)['allow'])confirmMessage(_0x300251);else logger[_0x4fb2ba(0x284)]('Unauthorized\x20attempt\x20to\x20confirm\x20message');}),_0x421e22['on'](_0x5af59c(0x1cd),_0x4248b4=>{const _0x343857=_0x5af59c;if(validateAccess(_0x4248b4,_0x57e061)['allow']){if(devices[_0x57e061][_0x343857(0x1bf)])clearTimeout(devices[_0x57e061][_0x343857(0x1bf)]);if(devices[_0x57e061]['pidExpireLogin'])clearTimeout(devices[_0x57e061][_0x343857(0x205)]);removeSocketListeners(getClient(_0x421e22['id'])[_0x343857(0x17a)]),addBlacklist(_0x57e061),devices[_0x57e061][_0x343857(0xfb)]=null,devices[_0x57e061][_0x343857(0x1e9)]=null,devices[_0x57e061][_0x343857(0x1e8)][_0x343857(0x213)]=null,logger[_0x343857(0x1ae)]('Logged\x20out\x20user\x20...'+_0x57e061[_0x343857(0x272)](-0x8)),io['to'](getClient(_0x421e22['id'])[_0x343857(0x17a)])[_0x343857(0x180)]('status',{'access':{'allow':![],'reason':_0x343857(0x179),'token':null}});}else logger[_0x343857(0x284)](_0x343857(0x104));});}function initializeSocketBot(_0x1aea70){const _0x58ba46=_0x66c508,_0x25a021=getClient(_0x1aea70['id'])[_0x58ba46(0x178)],_0xa823bc=getClient(_0x1aea70['id'])['uuid'];_0x1aea70['on']('get-logs',(_0x5bfd53,_0x27cd16)=>{const _0x5e012d=_0x58ba46;if(validateAccess(_0x27cd16,_0xa823bc)[_0x5e012d(0xca)]){if(pid[_0x25a021])pid[_0x25a021]['send']({'function':_0x5e012d(0x174),'args':_0x5bfd53});}else logger[_0x5e012d(0x284)](_0x5e012d(0x154));}),_0x1aea70['on'](_0x58ba46(0x105),(_0x58b54c,_0x5809a1)=>{const _0x5479b0=_0x58ba46;if(validateAccess(_0x5809a1,_0xa823bc)['allow']){if(pid[_0x25a021])pid[_0x25a021][_0x5479b0(0x2b7)]({'function':'deleteHistoryAlerts','args':_0x58b54c});}else logger[_0x5479b0(0x284)](_0x5479b0(0x255));}),_0x1aea70['on'](_0x58ba46(0x1f8),(_0x44540c,_0x502a30)=>{const _0x55ac6e=_0x58ba46;if(validateAccess(_0x502a30,_0xa823bc)[_0x55ac6e(0xca)]){if(pid[_0x25a021])pid[_0x25a021][_0x55ac6e(0x2b7)]({'function':_0x55ac6e(0x119),'args':_0x44540c});}else logger[_0x55ac6e(0x284)](_0x55ac6e(0x10d));}),_0x1aea70['on'](_0x58ba46(0x2a0),(_0x259b1c,_0x2536cd)=>{const _0x3d2e07=_0x58ba46;if(validateAccess(_0x2536cd,_0xa823bc)[_0x3d2e07(0xca)]){if(pid[_0x25a021])pid[_0x25a021]['send']({'function':_0x3d2e07(0x2a9),'args':_0x259b1c});}else logger[_0x3d2e07(0x284)](_0x3d2e07(0x1f5));}),_0x1aea70['on'](_0x58ba46(0x2b8),(_0x1ddb2d,_0x4b0ec7)=>{const _0x1fd92f=_0x58ba46;if(validateAccess(_0x4b0ec7,_0xa823bc)[_0x1fd92f(0xca)]){if(pid[_0x25a021])pid[_0x25a021]['send']({'function':'storeHeadless','args':_0x1ddb2d});}else logger[_0x1fd92f(0x284)](_0x1fd92f(0x1b5));}),_0x1aea70['on']('store-fiat',(_0x32fa14,_0x19d092)=>{const _0x2cc73e=_0x58ba46;if(validateAccess(_0x19d092,_0xa823bc)[_0x2cc73e(0xca)]){if(pid[_0x25a021])pid[_0x25a021][_0x2cc73e(0x2b7)]({'function':_0x2cc73e(0x145),'args':_0x32fa14});}else logger['full'](_0x2cc73e(0x13e));}),_0x1aea70['on'](_0x58ba46(0x20f),_0x26d2b0=>{const _0x4499e1=_0x58ba46;if(validateAccess(_0x26d2b0,_0xa823bc)[_0x4499e1(0xca)]){if(pid[_0x25a021])pid[_0x25a021]['send']({'function':'resetHistory','args':null});}else logger[_0x4499e1(0x284)](_0x4499e1(0x137));}),_0x1aea70['on'](_0x58ba46(0x149),_0xe9740c=>{const _0xfc5206=_0x58ba46;if(validateAccess(_0xe9740c,_0xa823bc)[_0xfc5206(0xca)]){if(pid[_0x25a021])pid[_0x25a021][_0xfc5206(0x2b7)]({'function':_0xfc5206(0x29d),'args':null});}else logger[_0xfc5206(0x284)]('Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances');}),_0x1aea70['on'](_0x58ba46(0x1c1),(_0x245d8c,_0x39cdcd)=>{const _0x14b80d=_0x58ba46;if(validateAccess(_0x39cdcd,_0xa823bc)['allow']){if(pid[_0x25a021])pid[_0x25a021][_0x14b80d(0x2b7)]({'function':_0x14b80d(0x147),'args':_0x245d8c});}else logger[_0x14b80d(0x284)](_0x14b80d(0x12d));}),_0x1aea70['on'](_0x58ba46(0x121),_0x4d1137=>{const _0x2d0cd0=_0x58ba46;if(validateAccess(_0x4d1137,_0xa823bc)[_0x2d0cd0(0xca)]){if(pid[_0x25a021])pid[_0x25a021]['send']({'function':_0x2d0cd0(0x120),'args':null});}else logger[_0x2d0cd0(0x284)]('Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins');}),_0x1aea70['on'](_0x58ba46(0x1c2),_0x189737=>{const _0x16e19b=_0x58ba46;if(validateAccess(_0x189737,_0xa823bc)[_0x16e19b(0xca)]){if(pid[_0x25a021])pid[_0x25a021][_0x16e19b(0x2b7)]({'function':'showConfig','args':null});}else logger[_0x16e19b(0x284)](_0x16e19b(0x270));}),_0x1aea70['on'](_0x58ba46(0x291),_0x10d95f=>{const _0xfcf410=_0x58ba46;if(validateAccess(_0x10d95f,_0xa823bc)[_0xfcf410(0xca)])updateBB('update');else logger[_0xfcf410(0x284)](_0xfcf410(0x221));}),_0x1aea70['on']('get-messages',_0x49589b=>{const _0x81f732=_0x58ba46;if(validateAccess(_0x49589b,_0xa823bc)[_0x81f732(0xca)])getMessages();else logger[_0x81f732(0x284)](_0x81f732(0x1fb));}),_0x1aea70['on']('confirm-message',(_0x19ffab,_0x301f8a)=>{const _0x219a3d=_0x58ba46;if(validateAccess(_0x301f8a,_0xa823bc)['allow'])confirmMessage(_0x19ffab);else logger[_0x219a3d(0x284)]('Unauthorized\x20attempt\x20to\x20confirm\x20message');}),_0x1aea70['on']('logout',_0xb2fc1b=>{const _0x4908e1=_0x58ba46;if(validateAccess(_0xb2fc1b,_0xa823bc)[_0x4908e1(0xca)]){if(devices[_0xa823bc][_0x4908e1(0x1bf)])clearTimeout(devices[_0xa823bc][_0x4908e1(0x1bf)]);if(devices[_0xa823bc][_0x4908e1(0x205)])clearTimeout(devices[_0xa823bc][_0x4908e1(0x205)]);removeSocketListeners(getClient(_0x1aea70['id'])[_0x4908e1(0x17a)]),addBlacklist(_0xa823bc),devices[_0xa823bc]['telegramIpApproval']=null,devices[_0xa823bc][_0x4908e1(0x1e9)]=null,devices[_0xa823bc][_0x4908e1(0x1e8)][_0x4908e1(0x213)]=null,logger[_0x4908e1(0x1ae)](_0x4908e1(0x14d)+_0xa823bc[_0x4908e1(0x272)](-0x8)),io['to'](getClient(_0x1aea70['id'])[_0x4908e1(0x17a)])[_0x4908e1(0x180)](_0x4908e1(0x269),{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logger[_0x4908e1(0x284)](_0x4908e1(0x104));});}function removeSocketListeners(_0x5914a9){const _0x522788=_0x66c508;getClientsWithUuid(_0x5914a9)[_0x522788(0x240)](_0x129549=>{const _0x6acfa2=_0x522788;getSocket(_0x129549['id'])[_0x6acfa2(0x239)]();});}function cleanSettings(){const _0x4a8537=_0x66c508;let _0x12b3cf=settings;return settings[_0x4a8537(0x287)]&&settings['telegramToken']!=''&&(_0x12b3cf={..._0x12b3cf,'telegramToken':'************'}),settings[_0x4a8537(0xd5)]&&settings['bbPassword']!=''&&(_0x12b3cf={..._0x12b3cf,'bbPassword':_0x4a8537(0x1a5)}),settings[_0x4a8537(0x1d0)]&&settings['marketcapApi']!=''&&(_0x12b3cf={..._0x12b3cf,'marketcapApi':_0x4a8537(0x1a5)}),(settings['bbPassword']&&settings[_0x4a8537(0xd5)]==_0x4a8537(0x12c)||settings[_0x4a8537(0x287)]&&settings['telegramToken']=='***'||settings[_0x4a8537(0x1d0)]&&settings['marketcapApi']==_0x4a8537(0x12c))&&(_0x12b3cf={..._0x12b3cf,'restored':{'password':settings[_0x4a8537(0xd5)]==_0x4a8537(0x12c),'telegram':settings[_0x4a8537(0x287)]==_0x4a8537(0x12c),'marketcap':settings['marketcapApi']=='***'}}),_0x12b3cf;}async function updateBB(_0xb04b08){const _0x234209=_0x66c508;await backupConfigFiles(),installingUpdate=!![],config[_0x234209(0x240)](_0x3f83de=>{const _0x500a06=_0x234209;restartBot(_0x3f83de[_0x500a06(0x276)]);});if(_0xb04b08==_0x234209(0x175))process[_0x234209(0x2b7)]({'update':!![],'environment':environment},_0x4fffd3=>{});else _0xb04b08==_0x234209(0x13a)&&process[_0x234209(0x2b7)]({'reinstall':!![],'environment':environment},_0x2e3b0f=>{});}function startBot(_0x4006f5,_0x51b403,_0x5ea9a1){const _0x1245f2=_0x66c508;if(debugging)_0x4006f5[_0x1245f2(0x100)]('-d');if(recreate)_0x4006f5[_0x1245f2(0x100)]('-r');let _0x43f8ef=![];const _0x49150a=_0x4006f5[0x0];_0x51b403={..._0x51b403,'stdio':['inherit',_0x1245f2(0x2a3),'inherit',_0x1245f2(0x24c)]},pid[_0x49150a]=childProcess[_0x1245f2(0x1ab)](botfile,_0x4006f5,_0x51b403),pid[_0x49150a]['on'](_0x1245f2(0xfc),_0x592878=>{const _0x3edd3d=_0x1245f2;switch(Object[_0x3edd3d(0x112)](_0x592878)[0x0]){case _0x3edd3d(0x12e):updateBotName(_0x49150a,_0x592878['botname']);break;case'updatebotmanager':updateBotManager();break;case _0x3edd3d(0x269):updateStatus(_0x49150a,_0x592878[_0x3edd3d(0x269)]);break;case'live':updateLive(_0x49150a,_0x592878[_0x3edd3d(0x159)]);break;case'started':updateLive(_0x49150a,_0x592878['started']),io['to'](_0x49150a)[_0x3edd3d(0x180)](_0x3edd3d(0x269),{'access':{'allow':![],'reason':_0x3edd3d(0x113),'token':null}});break;case _0x3edd3d(0xc5):_0x592878[_0x3edd3d(0xc5)]=='restart'&&restartBot(_0x49150a);_0x592878[_0x3edd3d(0xc5)]==_0x3edd3d(0x217)&&toggleBot(_0x49150a,_0x3edd3d(0x1e3),_0x3edd3d(0x1de));break;case'telegram':sendTelegramBot(_0x49150a,_0x592878['telegram']);break;case _0x3edd3d(0x274):sendTelegramMsg(_0x592878[_0x3edd3d(0x274)]);break;case _0x3edd3d(0x23e):io['to'](_0x49150a)[_0x3edd3d(0x180)](_0x592878['function'],_0x592878['args']);break;}}),pid[_0x49150a]['on']('error',function(_0x2556cb){if(_0x43f8ef)return;_0x43f8ef=!![],_0x5ea9a1(_0x2556cb);}),pid[_0x49150a]['on'](_0x1245f2(0x1ce),async function(_0x41ee3e){const _0xa672ac=_0x1245f2;if(terminating)return;if(installingUpdate){io[_0xa672ac(0xbb)]();return;}if(_0x43f8ef)return;_0x43f8ef=!![],_0x5ea9a1(null);const _0x3d2ca1=dbConfig[_0xa672ac(0x203)](_0xa672ac(0x26a))[_0xa672ac(0xf4)]({'botID':_0x49150a})[_0xa672ac(0xed)]();_0x3d2ca1&&(_0x3d2ca1['status']==_0xa672ac(0x238)||_0x3d2ca1[_0xa672ac(0x269)]=='new')&&(await sleep(0x3e8),updateLive(_0x49150a,_0xa672ac(0x1de)),logger[_0xa672ac(0x284)]('Restarting\x20Bot\x20'+_0x49150a),startBot([_0x49150a,userID],{'cwd':bbpath},function(_0x2c5c46){const _0x2b0359=_0xa672ac;if(_0x2c5c46)logger[_0x2b0359(0x284)](_0x2c5c46);}));});}function stopBot(_0x36f869){const _0xadc45f=_0x66c508;getClientsWithBotID(_0x36f869)[_0xadc45f(0x240)](_0x2db6d6=>{const _0x1898d7=_0xadc45f;getSocket(_0x2db6d6['id'])[_0x1898d7(0x176)](!![]),removeClient(_0x2db6d6['id']);}),pid[_0x36f869]&&(pid[_0x36f869][_0xadc45f(0x217)](),pid[_0x36f869]=null);}function stopAllBots(){terminating=!![];const _0x373eb6=getEnabledBots();_0x373eb6['forEach'](_0x5424fc=>{const _0x33872a=_0x3110;stopBot(_0x5424fc[_0x33872a(0x276)]);});}function restartBot(_0x4ebabd){const _0x21ad10=_0x66c508;if(pid[_0x4ebabd])pid[_0x4ebabd][_0x21ad10(0x217)]();}function addBot(){const _0x565c24=_0x66c508;let _0x3f80b9;for(let _0x5797e6=0x1;_0x5797e6<0x3e9;_0x5797e6++){_0x3f80b9=_0x5797e6['toString']()['padStart'](0x3,'0');let _0x575e7e=config[_0x565c24(0xf4)](_0xb793b1=>_0xb793b1[_0x565c24(0x276)]==_0x3f80b9);if(!_0x575e7e)break;}if(_0x3f80b9===_0x565c24(0x27a)){logger[_0x565c24(0x284)]('The\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached');return;}logger[_0x565c24(0x284)](_0x565c24(0xe8)+_0x3f80b9),dbConfig[_0x565c24(0x203)]('bots')[_0x565c24(0x100)]({'botID':_0x3f80b9,'botname':'Bot\x20'+_0x3f80b9,'status':_0x565c24(0x1d5),'live':''})[_0x565c24(0x2a2)](),startBot([_0x3f80b9,userID],{'cwd':bbpath},function(_0x185d8f){const _0x55e719=_0x565c24;if(_0x185d8f)logger[_0x55e719(0x284)](_0x185d8f);}),config=getConfiguration(),io['to'](_0x565c24(0x234))[_0x565c24(0x180)](_0x565c24(0x26a),config),broadcastToBots(_0x565c24(0x26a),JSON[_0x565c24(0x101)](config));}function deleteBot(_0x49ff26){const _0x111005=_0x66c508;getClientsWithBotID(_0x49ff26)[_0x111005(0x240)](_0x46ca87=>{getSocket(_0x46ca87['id'])['disconnect'](!![]),removeClient(_0x46ca87['id']);}),dbConfig[_0x111005(0x203)](_0x111005(0x26a))[_0x111005(0x262)]({'botID':_0x49ff26})[_0x111005(0x2a2)](),logger[_0x111005(0x284)]('Deleted\x20Bot\x20'+_0x49ff26),stopBot(_0x49ff26);try{if(fs[_0x111005(0x136)](path[_0x111005(0x25f)](configpath,_0x111005(0x2a6)+_0x49ff26+_0x111005(0x211))))fs[_0x111005(0x25b)](path[_0x111005(0x25f)](configpath,_0x111005(0x2a6)+_0x49ff26+_0x111005(0x211)));if(fs[_0x111005(0x136)](path[_0x111005(0x25f)](configpath,'bot-'+_0x49ff26+_0x111005(0x125))))fs[_0x111005(0x25b)](path[_0x111005(0x25f)](configpath,_0x111005(0x2a6)+_0x49ff26+'-events.json'));if(fs['existsSync'](path[_0x111005(0x25f)](configpath,_0x111005(0x2a6)+_0x49ff26+'-performance.json')))fs[_0x111005(0x25b)](path[_0x111005(0x25f)](configpath,_0x111005(0x2a6)+_0x49ff26+'-performance.json'));if(fs[_0x111005(0x136)](path[_0x111005(0x25f)](configpath,_0x111005(0x2a6)+_0x49ff26+_0x111005(0x21d))))fs[_0x111005(0x25b)](path[_0x111005(0x25f)](configpath,_0x111005(0x2a6)+_0x49ff26+'-results.json'));}catch(_0x1665a2){if(_0x1665a2)logger[_0x111005(0x284)]('Error\x20while\x20deleting\x20config\x20files:\x20',_0x1665a2);}config=getConfiguration(),io['to']('botmanager')[_0x111005(0x180)](_0x111005(0x26a),config),broadcastToBots(_0x111005(0x26a),JSON['stringify'](config));}function toggleBot(_0x2c5ef9,_0x4bf44b,_0x25abef){const _0x244c98=_0x66c508;dbConfig[_0x244c98(0x203)](_0x244c98(0x26a))[_0x244c98(0xf4)]({'botID':_0x2c5ef9})[_0x244c98(0x14f)]({'status':_0x4bf44b})[_0x244c98(0x14f)]({'live':_0x25abef})['write']();if(_0x4bf44b==_0x244c98(0x238)||_0x4bf44b==_0x244c98(0x1d5))logger['full'](_0x244c98(0x191)+_0x2c5ef9),startBot([_0x2c5ef9,userID],{'cwd':bbpath},function(_0x55030d){const _0x4d55fc=_0x244c98;if(_0x55030d)logger[_0x4d55fc(0x284)](_0x55030d);});else(_0x4bf44b==_0x244c98(0x1e3)||_0x4bf44b==_0x244c98(0x15d))&&(logger[_0x244c98(0x284)]('Disabled\x20Bot\x20'+_0x2c5ef9),stopBot(_0x2c5ef9));config=getConfiguration(),io['to']('botmanager')['emit'](_0x244c98(0x26a),config),broadcastToBots(_0x244c98(0x26a),JSON['stringify'](config));}function toggleStatus(_0x390e75){const _0x2be5e7=_0x66c508;let _0x2dcc1a=dbConfig[_0x2be5e7(0x203)](_0x2be5e7(0x26a))['find']({'botID':_0x390e75})[_0x2be5e7(0xed)](),_0x44f599;if(_0x2dcc1a[_0x2be5e7(0x269)]===_0x2be5e7(0x238))_0x44f599=_0x2be5e7(0x1e3);else{if(_0x2dcc1a[_0x2be5e7(0x269)]==='new')_0x44f599='new-disabled';else{if(_0x2dcc1a['status']===_0x2be5e7(0x15d))_0x44f599=_0x2be5e7(0x1d5);else{if(_0x2dcc1a['status']===_0x2be5e7(0x1e3))_0x44f599=_0x2be5e7(0x238);}}}return _0x44f599;}function updateStatus(_0x2f8f40,_0x5816f8){const _0x48307a=_0x66c508;dbConfig[_0x48307a(0x203)](_0x48307a(0x26a))['find']({'botID':_0x2f8f40})['assign']({'status':_0x5816f8})[_0x48307a(0x2a2)](),config=getConfiguration(),io['to'](_0x48307a(0x234))[_0x48307a(0x180)](_0x48307a(0x26a),config),broadcastToBots(_0x48307a(0x26a),JSON[_0x48307a(0x101)](config));}function updateLive(_0xb91815,_0x24e6c0){const _0x2ac73e=_0x66c508;dbConfig[_0x2ac73e(0x203)](_0x2ac73e(0x26a))[_0x2ac73e(0xf4)]({'botID':_0xb91815})[_0x2ac73e(0x14f)]({'live':_0x24e6c0})[_0x2ac73e(0x2a2)](),config=getConfiguration(),io['to'](_0x2ac73e(0x234))['emit'](_0x2ac73e(0x26a),config),broadcastToBots(_0x2ac73e(0x26a),JSON[_0x2ac73e(0x101)](config));}function updateBotName(_0x4a63f1,_0x1c1964){const _0x9839ee=_0x66c508;dbConfig['get'](_0x9839ee(0x26a))['find']({'botID':_0x4a63f1})[_0x9839ee(0x14f)]({'botname':_0x1c1964})[_0x9839ee(0x2a2)](),config=getConfiguration(),io['to'](_0x9839ee(0x234))[_0x9839ee(0x180)](_0x9839ee(0x26a),config),broadcastToBots('bots',JSON[_0x9839ee(0x101)](config));}function _0x3110(_0xcee7f,_0x3dd4e8){const _0x5e2919=_0x1f89();return _0x3110=function(_0x26fa3e,_0x54d0c9){_0x26fa3e=_0x26fa3e-0xb5;let _0x1f891f=_0x5e2919[_0x26fa3e];return _0x1f891f;},_0x3110(_0xcee7f,_0x3dd4e8);}function updateBotManager(){const _0x35ac28=_0x66c508;config=getConfiguration(),io['to'](_0x35ac28(0x234))[_0x35ac28(0x180)](_0x35ac28(0x26a),config),broadcastToBots(_0x35ac28(0x26a),JSON[_0x35ac28(0x101)](config));}function toggleBotMode(_0x3dd0d3){const _0x242b06=_0x66c508;if(pid[_0x3dd0d3])pid[_0x3dd0d3][_0x242b06(0x2b7)]({'function':_0x242b06(0x1b7),'args':null});else{const _0x2aa0b6=configpath+_0x242b06(0x2a6)+_0x3dd0d3+_0x242b06(0x211),_0x32ff66=fs[_0x242b06(0x153)](_0x2aa0b6),_0x4c5075=JSON['parse'](_0x32ff66),_0x5eef4d=_0x4c5075[_0x242b06(0x178)][0x0][_0x242b06(0x230)];_0x4c5075[_0x242b06(0x178)][0x0][_0x242b06(0x230)]=!_0x5eef4d;const _0x41ef54=JSON[_0x242b06(0x101)](_0x4c5075,null,0x2);fs['writeFileSync'](_0x2aa0b6,_0x41ef54),config=getConfiguration(),io['to'](_0x242b06(0x234))['emit'](_0x242b06(0x26a),config),broadcastToBots('bots',JSON[_0x242b06(0x101)](config));}}function validateTelegram(_0x4b2b51){const _0x178536=_0x66c508;if(_0x4b2b51[_0x178536(0x139)][_0x178536(0x257)]!=settings[_0x178536(0x216)]&&'@'+_0x4b2b51[_0x178536(0x139)][_0x178536(0x257)]!=settings[_0x178536(0x216)]||_0x4b2b51[_0x178536(0x1b4)]['id']!=settings['telegramChatId'])return sendTelegram(_0x4b2b51[_0x178536(0x1b4)]['id'],'Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings',{'parse_mode':_0x178536(0x198)}),![];return!![];}async function initTelegram(){const _0x5ad8a2=_0x66c508;tgBot&&(await tgBot[_0x5ad8a2(0xc5)](),await sleep(0x7d0));tgBot=new Telegraf(settings['telegramToken']);let _0x1ff801='You\x20can\x20use\x20the\x20following\x20commands:\x0a';_0x1ff801+='\x0a',_0x1ff801+='/enable\x20-\x20enable\x20notifications\x0a',_0x1ff801+=_0x5ad8a2(0x114),_0x1ff801+='/config\x20-\x20notification\x20types\x20to\x20receive\x0a',_0x1ff801+=_0x5ad8a2(0x209),_0x1ff801+=_0x5ad8a2(0x13d),_0x1ff801+=_0x5ad8a2(0x17e),_0x1ff801+='/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a',_0x1ff801+=_0x5ad8a2(0x265),_0x1ff801+=_0x5ad8a2(0x177),_0x1ff801+='/metrics\x20-\x20show\x20bot\x20performance\x0a',_0x1ff801+=_0x5ad8a2(0x118),_0x1ff801+='/logs\x20-\x20receive\x20log\x20files\x0a',_0x1ff801+=_0x5ad8a2(0x264),_0x1ff801+=_0x5ad8a2(0x280),_0x1ff801+='/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a',_0x1ff801+='/help\x20-\x20show\x20available\x20commands\x0a';let _0x45578f=_0x5ad8a2(0x1e2);_0x45578f+='\x0a',_0x45578f+=_0x1ff801,tgBot['catch']((_0x20571e,_0xa9aa55)=>{const _0x25965d=_0x5ad8a2;logger['simple'](getTimeStamp()+_0x25965d(0x165)),logger[_0x25965d(0x1ae)](_0x25965d(0x115),_0x20571e);}),tgBot[_0x5ad8a2(0x236)](async(_0x3209f6,_0x1840e6)=>{const _0x1678d2=_0x5ad8a2;if(settings[_0x1678d2(0x23b)]||_0x3209f6[_0x1678d2(0x175)][_0x1678d2(0xfc)][_0x1678d2(0xcf)]!='/start'){if(!validateTelegram(_0x3209f6))return;}_0x1840e6();}),tgBot['command']('start',async _0x4dd2a9=>{const _0x5db964=_0x5ad8a2;if(_0x4dd2a9[_0x5db964(0x139)][_0x5db964(0x257)]==settings['telegramUsername']||'@'+_0x4dd2a9['from']['username']==settings[_0x5db964(0x216)]){if(!settings['telegramChatId'])updateSetting('telegramChatId',_0x4dd2a9['chat']['id']);else{if(!validateTelegram(_0x4dd2a9))return;}}else{if(!validateTelegram(_0x4dd2a9))return;}updateSetting(_0x5db964(0x22a),!![]),await sendTelegram(_0x4dd2a9[_0x5db964(0x1b4)]['id'],_0x45578f);}),tgBot[_0x5ad8a2(0x131)](_0x5ad8a2(0x21f),async _0x15e274=>{const _0xcae2bb=_0x5ad8a2;updateSetting(_0xcae2bb(0x22a),!![]),await sendTelegram(_0x15e274['chat']['id'],_0xcae2bb(0xb6));}),tgBot[_0x5ad8a2(0x131)](_0x5ad8a2(0x23d),async _0x19876f=>{const _0x3174d1=_0x5ad8a2;await sendTelegram(_0x19876f[_0x3174d1(0x1b4)]['id'],_0x3174d1(0x25a)),updateSetting('telegramEnabled',![]);}),tgBot['command'](_0x5ad8a2(0x162),async _0x1ff619=>{const _0x38e466=_0x5ad8a2,_0x447b58=Markup['inlineKeyboard']([Markup['button'][_0x38e466(0x2ab)]('Orders',_0x38e466(0x1cf)),Markup[_0x38e466(0x1a9)]['callback']('Alerts','config_alerts'),Markup[_0x38e466(0x1a9)]['callback'](_0x38e466(0x14e),_0x38e466(0xec))]);_0x1ff619[_0x38e466(0x196)]('Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?',_0x447b58);}),tgBot['action']('config_orders',async _0x466b68=>{const _0x5f24c6=_0x5ad8a2;_0x466b68[_0x5f24c6(0x1eb)](),updateSetting('telegramEvents',_0x5f24c6(0x1c4)),updateSetting(_0x5f24c6(0x22a),!![]),await sendTelegram(_0x466b68['chat']['id'],_0x5f24c6(0x1ed));}),tgBot[_0x5ad8a2(0x188)](_0x5ad8a2(0xc2),async _0x5af22f=>{const _0x3baee9=_0x5ad8a2;_0x5af22f[_0x3baee9(0x1eb)](),updateSetting(_0x3baee9(0x1c3),_0x3baee9(0x19e)),updateSetting('telegramEnabled',!![]),await sendTelegram(_0x5af22f[_0x3baee9(0x1b4)]['id'],_0x3baee9(0x1f4));}),tgBot[_0x5ad8a2(0x188)](_0x5ad8a2(0xec),async _0x263042=>{const _0x1aafa1=_0x5ad8a2;_0x263042[_0x1aafa1(0x1eb)](),updateSetting(_0x1aafa1(0x1c3),_0x1aafa1(0xb9)),updateSetting(_0x1aafa1(0x22a),!![]),await sendTelegram(_0x263042[_0x1aafa1(0x1b4)]['id'],'Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications');}),tgBot[_0x5ad8a2(0x131)](_0x5ad8a2(0x269),async _0x416229=>{const _0x301b89=_0x5ad8a2,_0x2350f7=getBotsWithMode();let _0x5f4008=_0x301b89(0x16f);config[_0x301b89(0x240)](_0x3c45a6=>{const _0x1c025c=_0x301b89,_0x456df8=_0x2350f7['find'](_0x1003f2=>_0x1003f2[_0x1c025c(0x276)]==_0x3c45a6[_0x1c025c(0x276)])['mode'];_0x5f4008+=_0x1c025c(0x27d)+_0x3c45a6[_0x1c025c(0x276)]+':\x20'+_0x3c45a6[_0x1c025c(0x269)]+'\x20|\x20'+_0x456df8+'\x20|\x20'+_0x3c45a6[_0x1c025c(0x159)]+'\x0a';}),_0x5f4008+='\x0a',_0x5f4008+=_0x301b89(0xe3),_0x5f4008+=!settings[_0x301b89(0x22a)]?'Notifications\x20disabled\x0a':_0x301b89(0x29c),_0x5f4008+=settings[_0x301b89(0x22a)]?settings[_0x301b89(0x1c3)]==_0x301b89(0xb9)?'Notifications\x20types:\x20orders\x20and\x20alerts\x0a':'Notifications\x20types:\x20'+settings[_0x301b89(0x1c3)]+_0x301b89(0x26f):'',await sendTelegram(_0x416229['chat']['id'],_0x5f4008,{'parse_mode':_0x301b89(0x198)});}),tgBot[_0x5ad8a2(0x131)](_0x5ad8a2(0x123),async _0x5e1c06=>{const _0x5dd4d4=_0x5ad8a2,_0x1fab11=getEnabledBots();if(_0x1fab11[_0x5dd4d4(0x16c)]==0x0)await sendTelegram(_0x5e1c06['chat']['id'],_0x5dd4d4(0x279));else{if(_0x1fab11[_0x5dd4d4(0x16c)]>0x1)_0x1fab11[_0x5dd4d4(0x100)]({'botID':'all'});let _0x17f330=[],_0x58a4bb=[];const _0x361961=_0x1fab11['length']%0x4==0x0||_0x1fab11[_0x5dd4d4(0x16c)]%0x4==0x3||_0x1fab11['length']%0x3==0x1?0x4:0x3;let _0x22ddc1=0x0;_0x1fab11['forEach']((_0x2cfb61,_0x1a1881)=>{const _0x1f2462=_0x5dd4d4;if(_0x1a1881%_0x361961==0x0)_0x58a4bb=[];_0x58a4bb['push'](Markup[_0x1f2462(0x1a9)]['callback'](_0x2cfb61['botID']==_0x1f2462(0xb9)?_0x1f2462(0x296):_0x1f2462(0x27d)+_0x2cfb61[_0x1f2462(0x276)],'restart_'+_0x2cfb61['botID'])),_0x1a1881%_0x361961==0x0&&(_0x17f330[_0x22ddc1]=_0x58a4bb,_0x22ddc1++);});const _0x3eb97d=Markup[_0x5dd4d4(0x1bb)](_0x17f330);_0x5e1c06[_0x5dd4d4(0x196)](_0x5dd4d4(0x11d),_0x3eb97d);}}),tgBot[_0x5ad8a2(0x188)](/restart_(.+)/,async _0xb64e24=>{const _0x4fa2ba=_0x5ad8a2,_0x1751e3=_0xb64e24['match'][0x1];_0xb64e24[_0x4fa2ba(0x1eb)](),_0x1751e3=='all'?config[_0x4fa2ba(0x240)](_0x510ba4=>{const _0x478ad4=_0x4fa2ba;restartBot(_0x510ba4[_0x478ad4(0x276)]);}):restartBot(_0x1751e3);}),tgBot[_0x5ad8a2(0x131)]('on',async _0x1013ed=>{const _0x47e79f=_0x5ad8a2,_0x4efd86=getDisabledBots();if(_0x4efd86[_0x47e79f(0x16c)]==0x0)await sendTelegram(_0x1013ed[_0x47e79f(0x1b4)]['id'],'All\x20bots\x20running\x20right\x20now');else{if(_0x4efd86[_0x47e79f(0x16c)]>0x1)_0x4efd86['push']({'botID':'all'});let _0x301977=[],_0xb8474e=[];const _0x1c2ea8=_0x4efd86[_0x47e79f(0x16c)]%0x4==0x0||_0x4efd86[_0x47e79f(0x16c)]%0x4==0x3||_0x4efd86['length']%0x3==0x1?0x4:0x3;let _0x258d18=0x0;_0x4efd86[_0x47e79f(0x240)]((_0x57f7f5,_0x57c2de)=>{const _0x204a52=_0x47e79f;if(_0x57c2de%_0x1c2ea8==0x0)_0xb8474e=[];_0xb8474e[_0x204a52(0x100)](Markup[_0x204a52(0x1a9)][_0x204a52(0x2ab)](_0x57f7f5[_0x204a52(0x276)]==_0x204a52(0xb9)?_0x204a52(0x296):'Bot\x20'+_0x57f7f5[_0x204a52(0x276)],_0x204a52(0x2aa)+_0x57f7f5['botID'])),_0x57c2de%_0x1c2ea8==0x0&&(_0x301977[_0x258d18]=_0xb8474e,_0x258d18++);});const _0x1aea9d=Markup[_0x47e79f(0x1bb)](_0x301977);_0x1013ed['reply'](_0x47e79f(0x1c9),_0x1aea9d);}}),tgBot[_0x5ad8a2(0x188)](/on_(.+)/,async _0x42f0b0=>{const _0xd605f4=_0x5ad8a2,_0x15945a=_0x42f0b0[_0xd605f4(0x197)][0x1];_0x42f0b0[_0xd605f4(0x1eb)]();if(_0x15945a=='all'){const _0x3e2dd3=getDisabledBots();await sendTelegram(_0x42f0b0['chat']['id'],_0xd605f4(0xd3)),_0x3e2dd3['forEach'](_0x47fbb8=>{const _0x2416a9=_0xd605f4;if(_0x47fbb8[_0x2416a9(0x276)]!=_0x2416a9(0xb9))toggleBot(_0x47fbb8[_0x2416a9(0x276)],toggleStatus(_0x47fbb8[_0x2416a9(0x276)]),_0x2416a9(0x1de));});}else await sendTelegram(_0x42f0b0[_0xd605f4(0x1b4)]['id'],_0xd605f4(0xd7)+_0x15945a),toggleBot(_0x15945a,toggleStatus(_0x15945a),_0xd605f4(0x1de));}),tgBot[_0x5ad8a2(0x131)](_0x5ad8a2(0x21c),async _0x46e7f7=>{const _0x5475ff=_0x5ad8a2,_0x6c0522=getEnabledBots();if(_0x6c0522[_0x5475ff(0x16c)]==0x0)await sendTelegram(_0x46e7f7['chat']['id'],_0x5475ff(0x279));else{if(_0x6c0522['length']>0x1)_0x6c0522[_0x5475ff(0x100)]({'botID':_0x5475ff(0xb9)});let _0x3afeb2=[],_0xcbfb8a=[];const _0x159d3d=_0x6c0522[_0x5475ff(0x16c)]%0x4==0x0||_0x6c0522[_0x5475ff(0x16c)]%0x4==0x3||_0x6c0522['length']%0x3==0x1?0x4:0x3;let _0x5475e4=0x0;_0x6c0522['forEach']((_0x4a4310,_0x5b8cd9)=>{const _0x307bdc=_0x5475ff;if(_0x5b8cd9%_0x159d3d==0x0)_0xcbfb8a=[];_0xcbfb8a[_0x307bdc(0x100)](Markup['button'][_0x307bdc(0x2ab)](_0x4a4310[_0x307bdc(0x276)]==_0x307bdc(0xb9)?_0x307bdc(0x296):'Bot\x20'+_0x4a4310['botID'],_0x307bdc(0x2ac)+_0x4a4310[_0x307bdc(0x276)])),_0x5b8cd9%_0x159d3d==0x0&&(_0x3afeb2[_0x5475e4]=_0xcbfb8a,_0x5475e4++);});const _0x5ec7a3=Markup[_0x5475ff(0x1bb)](_0x3afeb2);_0x46e7f7[_0x5475ff(0x196)](_0x5475ff(0xe5),_0x5ec7a3);}}),tgBot[_0x5ad8a2(0x188)](/off_(.+)/,async _0x125f2c=>{const _0x16a8f5=_0x5ad8a2,_0x14edb6=_0x125f2c[_0x16a8f5(0x197)][0x1];_0x125f2c[_0x16a8f5(0x1eb)]();if(_0x14edb6==_0x16a8f5(0xb9)){const _0x1b2d29=getEnabledBots();await sendTelegram(_0x125f2c[_0x16a8f5(0x1b4)]['id'],_0x16a8f5(0x11c)),_0x1b2d29[_0x16a8f5(0x240)](_0x2aa613=>{const _0x2a2740=_0x16a8f5;if(_0x2aa613[_0x2a2740(0x276)]!=_0x2a2740(0xb9))toggleBot(_0x2aa613['botID'],toggleStatus(_0x2aa613[_0x2a2740(0x276)]),_0x2a2740(0x1de));});}else await sendTelegram(_0x125f2c[_0x16a8f5(0x1b4)]['id'],_0x16a8f5(0x298)+_0x14edb6),toggleBot(_0x14edb6,toggleStatus(_0x14edb6),_0x16a8f5(0x1de));}),tgBot[_0x5ad8a2(0x131)](_0x5ad8a2(0x12a),async _0x4980b1=>{const _0x17301a=_0x5ad8a2,_0x388522=getEnabledBots();if(_0x388522['length']==0x0)await sendTelegram(_0x4980b1[_0x17301a(0x1b4)]['id'],_0x17301a(0x279));else{if(_0x388522[_0x17301a(0x16c)]>0x1){let _0x38c6bb=[],_0x3ab1ab=[];const _0x1d251c=_0x388522[_0x17301a(0x16c)]%0x4==0x0||_0x388522[_0x17301a(0x16c)]%0x4==0x3||_0x388522[_0x17301a(0x16c)]%0x3==0x1?0x4:0x3;let _0x3a6412=0x0;_0x388522[_0x17301a(0x240)]((_0x536b66,_0x28d52f)=>{const _0x13fd60=_0x17301a;if(_0x28d52f%_0x1d251c==0x0)_0x3ab1ab=[];_0x3ab1ab[_0x13fd60(0x100)](Markup[_0x13fd60(0x1a9)][_0x13fd60(0x2ab)]('Bot\x20'+_0x536b66[_0x13fd60(0x276)],'metrics_'+_0x536b66['botID'])),_0x28d52f%_0x1d251c==0x0&&(_0x38c6bb[_0x3a6412]=_0x3ab1ab,_0x3a6412++);});const _0xcc9310=Markup[_0x17301a(0x1bb)](_0x38c6bb);_0x4980b1['reply']('For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?',_0xcc9310);}else{const _0x31752d=_0x388522[0x0][_0x17301a(0x276)];if(pid[_0x31752d])pid[_0x31752d][_0x17301a(0x2b7)]({'function':_0x17301a(0x258),'args':null});}}}),tgBot['action'](/metrics_(.+)/,async _0x16c884=>{const _0x4a361e=_0x5ad8a2,_0x208a85=_0x16c884[_0x4a361e(0x197)][0x1];_0x16c884[_0x4a361e(0x1eb)]();if(pid[_0x208a85])pid[_0x208a85]['send']({'function':_0x4a361e(0x258),'args':null});}),tgBot[_0x5ad8a2(0x131)]('portfolio',async _0x2dd2e0=>{const _0x4cddc5=_0x5ad8a2,_0x340323=getEnabledBots();if(_0x340323[_0x4cddc5(0x16c)]==0x0)await sendTelegram(_0x2dd2e0[_0x4cddc5(0x1b4)]['id'],_0x4cddc5(0x279));else{if(_0x340323[_0x4cddc5(0x16c)]>0x1){let _0x5b0aa6=[],_0xe5312a=[];const _0x289725=_0x340323[_0x4cddc5(0x16c)]%0x4==0x0||_0x340323['length']%0x4==0x3||_0x340323[_0x4cddc5(0x16c)]%0x3==0x1?0x4:0x3;let _0x338899=0x0;_0x340323[_0x4cddc5(0x240)]((_0x2533b9,_0x4ae4ef)=>{const _0x6eece6=_0x4cddc5;if(_0x4ae4ef%_0x289725==0x0)_0xe5312a=[];_0xe5312a[_0x6eece6(0x100)](Markup['button'][_0x6eece6(0x2ab)](_0x6eece6(0x27d)+_0x2533b9[_0x6eece6(0x276)],'portfolio_'+_0x2533b9[_0x6eece6(0x276)])),_0x4ae4ef%_0x289725==0x0&&(_0x5b0aa6[_0x338899]=_0xe5312a,_0x338899++);});const _0x5464ea=Markup[_0x4cddc5(0x1bb)](_0x5b0aa6);_0x2dd2e0[_0x4cddc5(0x196)](_0x4cddc5(0x271),_0x5464ea);}else{const _0x43cdfa=_0x340323[0x0][_0x4cddc5(0x276)];if(pid[_0x43cdfa])pid[_0x43cdfa][_0x4cddc5(0x2b7)]({'function':_0x4cddc5(0x2af),'args':null});}}}),tgBot[_0x5ad8a2(0x188)](/portfolio_(.+)/,async _0x407b6c=>{const _0x225b8a=_0x5ad8a2,_0x5e375e=_0x407b6c[_0x225b8a(0x197)][0x1];_0x407b6c['editMessageReplyMarkup']();if(pid[_0x5e375e])pid[_0x5e375e][_0x225b8a(0x2b7)]({'function':_0x225b8a(0x2af),'args':null});}),tgBot[_0x5ad8a2(0x131)](_0x5ad8a2(0x251),async _0x444b44=>{const _0x8d911=_0x5ad8a2,_0x44fa55=_0x8d911(0x251);await zipFiles(_0x44fa55);const _0x71d504=zippath+(_0x44fa55+_0x8d911(0xda));_0x444b44[_0x8d911(0x18a)]({'source':_0x71d504})[_0x8d911(0x24e)](()=>{})[_0x8d911(0x140)](_0x310aaf=>logger[_0x8d911(0x1ae)](_0x8d911(0x148)+_0x44fa55+_0x8d911(0xd4),_0x310aaf));}),tgBot[_0x5ad8a2(0x131)](_0x5ad8a2(0xb5),async _0x201ef4=>{const _0x4b69be=_0x5ad8a2,_0x4028d7='backup';await backupConfigFiles(),await zipFiles(_0x4028d7);const _0x398e6a=zippath+(_0x4028d7+_0x4b69be(0xda));_0x201ef4[_0x4b69be(0x18a)]({'source':_0x398e6a})['then'](()=>{})['catch'](_0x134605=>logger[_0x4b69be(0x1ae)](_0x4b69be(0x148)+_0x4028d7+_0x4b69be(0xd4),_0x134605));}),tgBot['command'](_0x5ad8a2(0x175),async _0x1ab692=>{const _0x5cf9af=_0x5ad8a2;await getMessages();if(!updateAvailable)await sendTelegram(_0x1ab692[_0x5cf9af(0x1b4)]['id'],'Your\x20installation\x20is\x20already\x20up\x20to\x20date');else{if(!validInstallation)await sendTelegram(_0x1ab692[_0x5cf9af(0x1b4)]['id'],_0x5cf9af(0x229));else{const _0x1ffcd7=Markup[_0x5cf9af(0x1bb)]([Markup[_0x5cf9af(0x1a9)][_0x5cf9af(0x2ab)](_0x5cf9af(0x1be),_0x5cf9af(0x241)),Markup['button'][_0x5cf9af(0x2ab)]('No',_0x5cf9af(0x1f6))]);_0x1ab692[_0x5cf9af(0x196)](_0x5cf9af(0x168),_0x1ffcd7);}}}),tgBot['action'](/update_(.+)/,async _0x1bd519=>{const _0x8dada1=_0x5ad8a2,_0x3b6e01=_0x1bd519[_0x8dada1(0x197)][0x1];_0x1bd519[_0x8dada1(0x1eb)](),_0x3b6e01==_0x8dada1(0x20c)&&(await sendTelegram(_0x1bd519[_0x8dada1(0x1b4)]['id'],'Starting\x20Balance\x20Bot\x20update'),updateBB(_0x8dada1(0x175))),_0x3b6e01=='no'&&await sendTelegram(_0x1bd519['chat']['id'],_0x8dada1(0x1d3));}),tgBot[_0x5ad8a2(0x131)](_0x5ad8a2(0x13a),async _0x34241e=>{const _0xe35ae9=_0x5ad8a2;if(!validInstallation)await sendTelegram(_0x34241e[_0xe35ae9(0x1b4)]['id'],_0xe35ae9(0x111));else{const _0x211f57=Markup[_0xe35ae9(0x1bb)]([Markup[_0xe35ae9(0x1a9)][_0xe35ae9(0x2ab)](_0xe35ae9(0x1be),_0xe35ae9(0x166)),Markup[_0xe35ae9(0x1a9)][_0xe35ae9(0x2ab)]('No',_0xe35ae9(0x1a1))]);_0x34241e[_0xe35ae9(0x196)](_0xe35ae9(0x275),_0x211f57);}}),tgBot[_0x5ad8a2(0x188)](/reinstall_(.+)/,async _0x36da2e=>{const _0x124cc6=_0x5ad8a2,_0x55fe3c=_0x36da2e[_0x124cc6(0x197)][0x1];_0x36da2e[_0x124cc6(0x1eb)](),_0x55fe3c=='yes'&&(await sendTelegram(_0x36da2e[_0x124cc6(0x1b4)]['id'],_0x124cc6(0x277)),updateBB(_0x124cc6(0x13a))),_0x55fe3c=='no'&&await sendTelegram(_0x36da2e[_0x124cc6(0x1b4)]['id'],_0x124cc6(0x11a));}),tgBot['command'](_0x5ad8a2(0x1fa),async _0x3d6c63=>{const _0x19fa97=_0x5ad8a2,_0x51ff60=getBotsWithMode();if(_0x51ff60[_0x19fa97(0x16c)]==0x0)await sendTelegram(_0x3d6c63[_0x19fa97(0x1b4)]['id'],_0x19fa97(0x279));else{let _0x554d71=[],_0x54c781=[];const _0x2ab69e=0x2;let _0x49aca3=0x0;_0x51ff60[_0x19fa97(0x240)]((_0x1b5afe,_0x224239)=>{const _0x1d34d6=_0x19fa97;if(_0x224239%_0x2ab69e==0x0)_0x54c781=[];_0x54c781['push'](Markup['button'][_0x1d34d6(0x2ab)](_0x1d34d6(0x27d)+_0x1b5afe[_0x1d34d6(0x276)]+'\x20('+_0x1b5afe['mode']+')','toggle_'+_0x1b5afe[_0x1d34d6(0x276)])),_0x224239%_0x2ab69e==0x0&&(_0x554d71[_0x49aca3]=_0x54c781,_0x49aca3++);});const _0x5c29e1=Markup['inlineKeyboard'](_0x554d71);_0x3d6c63[_0x19fa97(0x196)]('Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?',_0x5c29e1);}}),tgBot['action'](/toggle_(.+)/,async _0x43064a=>{const _0x940628=_0x5ad8a2,_0x52c65e=_0x43064a[_0x940628(0x197)][0x1];_0x43064a[_0x940628(0x1eb)]();const _0x22faa3=getBotsWithMode(),_0x48e596=_0x22faa3[_0x940628(0xf4)](_0x105971=>_0x105971[_0x940628(0x276)]==_0x52c65e),_0x552f3b=_0x48e596[_0x940628(0x18d)]==_0x940628(0xc1)?_0x940628(0xd9):_0x940628(0xc1);await sendTelegram(_0x43064a[_0x940628(0x1b4)]['id'],_0x940628(0x235)+_0x52c65e+'\x20to\x20'+_0x552f3b+_0x940628(0x228)),toggleBotMode(_0x52c65e);}),tgBot[_0x5ad8a2(0x131)]('names',async _0x5c22e3=>{const _0x2b876b=_0x5ad8a2;let _0x48556b='';config[_0x2b876b(0x240)](_0x23519f=>{const _0x196cb7=_0x2b876b;_0x48556b+=_0x196cb7(0x27d)+_0x23519f[_0x196cb7(0x276)]+':\x20'+_0x23519f[_0x196cb7(0x12e)]+'\x0a';}),await sendTelegram(_0x5c22e3[_0x2b876b(0x1b4)]['id'],_0x48556b,{'parse_mode':_0x2b876b(0x198)});}),tgBot['command'](_0x5ad8a2(0x27b),async _0x5eacf8=>{const _0x4a5cd5=_0x5ad8a2;await sendTelegram(_0x5eacf8[_0x4a5cd5(0x1b4)]['id'],_0x1ff801);}),process[_0x5ad8a2(0x1d7)]('SIGINT',()=>tgBot['stop'](_0x5ad8a2(0x207))),process[_0x5ad8a2(0x1d7)]('SIGTERM',()=>tgBot['stop'](_0x5ad8a2(0xf5))),tgBot[_0x5ad8a2(0x18b)]();}function disableTelegram(){const _0x20bf50=_0x66c508;tgBot&&tgBot[_0x20bf50(0xc5)]();}async function sendTelegram(_0x4b4dd2,_0x5e5c50,_0x1a6910){const _0x2562fb=_0x66c508;_0x1a6910={..._0x1a6910,'disable_web_page_preview':!![]};try{await tgBot[_0x2562fb(0x138)][_0x2562fb(0x1da)](_0x4b4dd2,_0x5e5c50,_0x1a6910);}catch(_0x44135e){logger[_0x2562fb(0x1ae)](_0x2562fb(0x1ad),_0x44135e);}}async function sendTelegramBot(_0x3ca456,_0x163b75){const _0x2ed6b4=_0x66c508;if(settings[_0x2ed6b4(0x22a)]){if(settings['telegramEvents']==_0x2ed6b4(0xb9)||(_0x163b75['type']==_0x2ed6b4(0x208)||_0x163b75[_0x2ed6b4(0x1b9)]=='warning'||_0x163b75[_0x2ed6b4(0x1b9)]==_0x2ed6b4(0x206))&&settings[_0x2ed6b4(0x1c3)]==_0x2ed6b4(0x19e)||_0x163b75[_0x2ed6b4(0x1b9)]==_0x2ed6b4(0x135)&&settings[_0x2ed6b4(0x1c3)]==_0x2ed6b4(0x1c4)){if(tgBot&&settings[_0x2ed6b4(0x23b)]){if(_0x163b75[_0x2ed6b4(0x22f)])await sendTelegram(settings[_0x2ed6b4(0x23b)],_0x163b75[_0x2ed6b4(0x12e)]+_0x2ed6b4(0x1cb)+_0x163b75[_0x2ed6b4(0x189)]);else await sendTelegram(settings['telegramChatId'],'Bot\x20'+_0x3ca456+_0x2ed6b4(0x1cb)+_0x163b75[_0x2ed6b4(0x189)]);}}}}async function sendTelegramMsg(_0x9bd1fb,_0x5dc134='HTML'){const _0x3e290e=_0x66c508;return settings[_0x3e290e(0x22a)]&&tgBot&&settings[_0x3e290e(0x23b)]?(await sendTelegram(settings['telegramChatId'],_0x9bd1fb,{'parse_mode':_0x5dc134}),!![]):![];}function getDeviceWithIp(_0x2aac37){return devices['find'](_0x279b42=>_0x279b42['ip']===_0x2aac37);}async function temporaryAccess2FA(_0xa6ab64,_0x20b590){const _0x1d5516=_0x66c508;let _0x5219a8=new Date(),_0x562717=![];if(lastIpApproval){if(_0x5219a8-lastIpApproval<0x1388)_0x562717=!![];}lastIpApproval=new Date();if(_0x562717)return;if(tgBot&&settings['telegramChatId']){const _0x1a935d=uuidRandom();tmpStorage[_0x1a935d]={'uuid':_0xa6ab64,'externalip':_0x20b590};const _0x32ee2b=Markup[_0x1d5516(0x1bb)]([Markup[_0x1d5516(0x1a9)]['callback'](_0x1d5516(0x160),'tempaccess_5_'+_0x1a935d),Markup[_0x1d5516(0x1a9)][_0x1d5516(0x2ab)]('15\x20min',_0x1d5516(0x158)+_0x1a935d),Markup[_0x1d5516(0x1a9)]['callback'](_0x1d5516(0x1a7),_0x1d5516(0x247)+_0x1a935d),Markup[_0x1d5516(0x1a9)]['callback'](_0x1d5516(0x1df),'tempaccess_reject_'+_0x1a935d)]);await sendTelegram(settings[_0x1d5516(0x23b)],_0x1d5516(0x22c)+normalizeIP(_0x20b590)['show']+'\x20?',_0x32ee2b),tgBot['action'](/tempaccess_(.+)_(.+)/,async _0x4090d1=>{const _0x4021f6=_0x1d5516,_0x469e55=_0x4090d1[_0x4021f6(0x197)][0x1],_0x26feda=_0x4090d1[_0x4021f6(0x197)][0x2],{uuid:_0x57ebe3,externalip:_0x5cc112}=tmpStorage[_0x26feda];delete tmpStorage[_0x26feda],_0x4090d1[_0x4021f6(0x1eb)](),devices[_0x57ebe3][_0x4021f6(0xfb)]={'clientip':_0x5cc112,'timestamp':new Date()[_0x4021f6(0x195)](),'expiry':_0x469e55},_0x469e55!=_0x4021f6(0x1df)?(await sendTelegram(_0x4090d1[_0x4021f6(0x1b4)]['id'],_0x4021f6(0x163)+_0x469e55+_0x4021f6(0xc6),{'parse_mode':_0x4021f6(0x198)}),io['to'](_0x57ebe3)['emit'](_0x4021f6(0x269),{'access':{'allow':![],'reason':'reload','token':null}})):(await sendTelegram(_0x4090d1['chat']['id'],_0x4021f6(0x186)),io['to'](_0x57ebe3)['emit']('status',{'access':{'allow':![],'reason':_0x4021f6(0x1aa),'token':null}}));});}}async function loginAccess2FA(_0x4c08e6,_0x3156b8){const _0x12e33d=_0x66c508;if(tgBot&&settings[_0x12e33d(0x23b)]){const _0x12717d=uuidRandom();tmpStorage[_0x12717d]={'uuid':_0x4c08e6,'externalip':_0x3156b8};const _0x85e2d8=Markup[_0x12e33d(0x1bb)]([Markup[_0x12e33d(0x1a9)]['callback'](_0x12e33d(0x1a3),_0x12e33d(0x1af)+loginExpiry+'_'+_0x12717d),Markup['button']['callback'](_0x12e33d(0x1df),_0x12e33d(0x1fe)+_0x12717d)]);await sendTelegram(settings[_0x12e33d(0x23b)],_0x12e33d(0x290)+normalizeIP(_0x3156b8)[_0x12e33d(0x23f)]+'\x20?',_0x85e2d8),tgBot[_0x12e33d(0x188)](/login2fa_(.+)_(.+)/,async _0x1520c7=>{const _0x142027=_0x12e33d,_0xd84ee2=_0x1520c7[_0x142027(0x197)][0x1],_0x4e8cfe=_0x1520c7['match'][0x2],{uuid:_0x750b55,externalip:_0x5b640c}=tmpStorage[_0x4e8cfe];delete tmpStorage[_0x4e8cfe],_0x1520c7['editMessageReplyMarkup'](),devices[_0x750b55][_0x142027(0x1e9)]={'clientip':_0x5b640c,'timestamp':new Date()['getTime'](),'expiry':_0xd84ee2},_0xd84ee2!=_0x142027(0x1df)?(await sendTelegram(_0x1520c7['chat']['id'],_0x142027(0x2bb),{'parse_mode':_0x142027(0x198)}),io['to'](_0x750b55)[_0x142027(0x180)]('status',{'access':{'allow':![],'reason':_0x142027(0x113),'token':null}})):(await sendTelegram(_0x1520c7[_0x142027(0x1b4)]['id'],_0x142027(0x14b)),io['to'](_0x750b55)['emit']('status',{'access':{'allow':![],'reason':_0x142027(0x142),'token':null}}));});}}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x411ed1=_0x66c508;return dbConfig[_0x411ed1(0x203)](_0x411ed1(0x26a))[_0x411ed1(0xf6)](_0x411ed1(0x276))[_0x411ed1(0x18f)]({'status':_0x411ed1(0x238)})[_0x411ed1(0xed)]()||[];}function getDisabledBots(){const _0x25fa06=_0x66c508;return dbConfig[_0x25fa06(0x203)](_0x25fa06(0x26a))[_0x25fa06(0xf6)]('botID')[_0x25fa06(0x18f)]({'status':_0x25fa06(0x1e3)})['value']()||[];}function getBotAttributes(_0x3e0567){const _0x22fa8a=_0x66c508;let _0x3edfe6={};const _0xef64a0=configpath+'bot-'+_0x3e0567+'-config.json',_0x475103=fs[_0x22fa8a(0x136)](_0xef64a0);if(_0x475103){const _0x4559e6=fs[_0x22fa8a(0x153)](_0xef64a0);try{const _0x362916=JSON[_0x22fa8a(0x26b)](_0x4559e6),_0x339217=_0x362916?_0x362916[_0x22fa8a(0x178)][0x0]['headless']:![];_0x3edfe6[_0x22fa8a(0x18d)]=_0x339217?_0x22fa8a(0xc1):'manual',_0x3edfe6[_0x22fa8a(0x12e)]=_0x362916?_0x362916[_0x22fa8a(0x178)][0x0][_0x22fa8a(0x12e)]:'Bot\x20'+_0x3e0567;}catch(_0x2119ba){_0x3edfe6[_0x22fa8a(0x18d)]=_0x22fa8a(0xd9),_0x3edfe6[_0x22fa8a(0x12e)]=_0x22fa8a(0x27d)+_0x3e0567;}}else _0x3edfe6[_0x22fa8a(0x18d)]=_0x22fa8a(0xd9),_0x3edfe6['botname']=_0x22fa8a(0x27d)+_0x3e0567;return _0x3edfe6;}function getBotsWithMode(){const _0x27342c=_0x66c508,_0x134278=dbConfig[_0x27342c(0x203)](_0x27342c(0x26a))['sortBy'](_0x27342c(0x276))['value']()||[];return _0x134278[_0x27342c(0x240)](_0x10c157=>{const _0x32fa5c=_0x27342c;let _0x1b7843=getBotAttributes(_0x10c157[_0x32fa5c(0x276)]);_0x10c157[_0x32fa5c(0x18d)]=_0x1b7843[_0x32fa5c(0x18d)];}),_0x134278;}function getBotExchanges(){const _0x596209=_0x66c508;let _0x44cc53=[];const _0x1bc9fc=dbConfig['get'](_0x596209(0x26a))[_0x596209(0xf6)]('botID')[_0x596209(0xed)]()||[];_0x1bc9fc[_0x596209(0x240)](_0x56d9f1=>{const _0x48c772=_0x596209;if(_0x56d9f1[_0x48c772(0x269)]==_0x48c772(0x238)){const _0x80fa1f=configpath+_0x48c772(0x2a6)+_0x56d9f1[_0x48c772(0x276)]+_0x48c772(0x211),_0x2f60b8=fs[_0x48c772(0x136)](_0x80fa1f);let _0x704896;if(_0x2f60b8){const _0x599f4e=fs['readFileSync'](_0x80fa1f);try{const _0x1dc5a4=JSON[_0x48c772(0x26b)](_0x599f4e);_0x704896=_0x1dc5a4?_0x1dc5a4['bot'][0x0]['exchange']:null;}catch(_0x4a47d6){}}if(_0x704896)_0x44cc53[_0x48c772(0x100)](_0x704896);}});const _0x4d1199=[...new Set(_0x44cc53)]['sort']();return _0x4d1199;}async function initUser(){const _0x1d8ef4=_0x66c508;if(!settings['userid']){const _0x3f0b63=uuidRandom();mixpanel['alias'](_0x3f0b63),updateSetting(_0x1d8ef4(0x1ee),_0x3f0b63);}}async function initSecure(){const _0x22b1e5=_0x66c508;let _0x7b4e34=getSecure();if(!_0x7b4e34['hasOwnProperty']('secret')){let _0x1bdb72=await generateKeys();_0x7b4e34[_0x22b1e5(0x152)]=_0x1bdb72[_0x22b1e5(0x152)],_0x7b4e34[_0x22b1e5(0x295)]=_0x1bdb72['privateKey'],_0x7b4e34[_0x22b1e5(0x28a)]=crypto[_0x22b1e5(0xc4)](0x20)['toString'](_0x22b1e5(0x1ef));;storeSecure(_0x7b4e34);}}function getSettings(){const _0x2fc550=_0x66c508;return dbSettings['get'](_0x2fc550(0x212))['value']()||{};}function getSecure(){const _0x59ff05=_0x66c508;return dbSecure['get'](_0x59ff05(0x18e))['value']()||{};}function getBlacklist(){const _0x21dc98=_0x66c508;return dbSecure[_0x21dc98(0x203)](_0x21dc98(0x223))[_0x21dc98(0xed)]()||[];}function broadcastToBots(_0x51dd88,_0x208056){const _0x6536cd=_0x66c508;config[_0x6536cd(0x240)](_0x19882e=>{const _0x171230=_0x6536cd;if(_0x19882e[_0x171230(0x269)]==_0x171230(0x238)&&_0x19882e[_0x171230(0x159)]==_0x171230(0x102)||_0x19882e[_0x171230(0x269)]==_0x171230(0x1d5)&&_0x19882e['live']==_0x171230(0x102)){if(pid[_0x19882e[_0x171230(0x276)]])pid[_0x19882e[_0x171230(0x276)]][_0x171230(0x2b7)]({[_0x51dd88]:_0x208056});}});}async function storeSettings(_0x35befd,_0x432b3a=![]){const _0x331a96=_0x66c508;_0x35befd={...settings,..._0x35befd};if(_0x432b3a&&_0x35befd[_0x331a96(0xd5)]!='************'&&_0x35befd['bbPassword']!=_0x331a96(0x12c)&&_0x35befd[_0x331a96(0xd5)]!=''){const _0xb4b8df=decryptRSA(secure[_0x331a96(0x295)],_0x35befd[_0x331a96(0xd5)])[_0x331a96(0x1fc)]('|@|')[0x0],_0x566b75=bcrypt['hashSync'](_0xb4b8df,saltRounds);_0x35befd={..._0x35befd,'bbPassword':_0x566b75};}if(_0x432b3a&&_0x35befd[_0x331a96(0x287)]!=_0x331a96(0x1a5)&&_0x35befd[_0x331a96(0x287)]!='***'&&_0x35befd['telegramToken']!=''){const _0x28fd15=decryptRSA(secure[_0x331a96(0x295)],_0x35befd['telegramToken'])[_0x331a96(0x1fc)](_0x331a96(0x1e4))[0x0];_0x35befd={..._0x35befd,'telegramToken':_0x28fd15};}if(_0x432b3a&&_0x35befd['marketcapApi']!='************'&&_0x35befd['marketcapApi']!=_0x331a96(0x12c)&&_0x35befd['marketcapApi']!=''){const _0x31c785=decryptRSA(secure[_0x331a96(0x295)],_0x35befd['marketcapApi'])[_0x331a96(0x1fc)](_0x331a96(0x1e4))[0x0];_0x35befd={..._0x35befd,'marketcapApi':_0x31c785};}const _0x442278=_0x35befd[_0x331a96(0x287)]!='************'&&_0x35befd[_0x331a96(0x287)]!=settings[_0x331a96(0x287)]||_0x35befd['telegramUsername']!=settings[_0x331a96(0x216)],_0x541bb8=_0x35befd['telegramToken']==''||_0x35befd[_0x331a96(0x216)]=='',_0xe83f5=_0x35befd[_0x331a96(0x1d0)]&&_0x35befd[_0x331a96(0x1d0)]!=_0x331a96(0x1a5)&&_0x35befd[_0x331a96(0x1d0)]!=settings['marketcapApi'];_0x442278&&(_0x35befd['telegramChatId']=null,_0x35befd[_0x331a96(0x1c3)]=_0x331a96(0xb9));for(const [_0x3bd017,_0x127a8b]of Object['entries'](_0x35befd)){if(_0x3bd017==_0x331a96(0x287)&&_0x127a8b==_0x331a96(0x1a5)){_0x35befd[_0x331a96(0x287)]=settings[_0x331a96(0x287)];continue;};if(_0x3bd017=='bbPassword'&&_0x127a8b=='************'){_0x35befd[_0x331a96(0xd5)]=settings['bbPassword'];continue;};if(_0x3bd017==_0x331a96(0x1d0)&&_0x127a8b==_0x331a96(0x1a5)){_0x35befd[_0x331a96(0x1d0)]=settings[_0x331a96(0x1d0)];continue;};dbSettings[_0x331a96(0x256)](_0x331a96(0x128)+_0x3bd017,_0x127a8b)[_0x331a96(0x2a2)]();}settings=_0x35befd,io['to'](_0x331a96(0x234))['emit'](_0x331a96(0x212),cleanSettings()),broadcastToBots(_0x331a96(0xf8),settings[_0x331a96(0xf8)]),broadcastToBots(_0x331a96(0x17f),settings[_0x331a96(0x17f)]),broadcastToBots('marketcapApi',settings[_0x331a96(0x1d0)]);if(_0x442278&&!_0x541bb8)initTelegram();_0x442278&&_0x541bb8&&(updateSetting(_0x331a96(0x23b),null),disableTelegram()),getAllClients()[_0x331a96(0x240)](_0x1da7f2=>{const _0xd55d3d=_0x331a96;getSocket(_0x1da7f2['id'])['emit'](_0xd55d3d(0x269),{'access':{'allow':![],'reason':_0xd55d3d(0x113),'token':null}});}),_0xe83f5&&(await sleep(0xbb8),testMarketcapApi(_0x35befd[_0x331a96(0x1d0)]));}async function testMarketcapApi(_0x2600d0){const _0x4741ca=_0x66c508,_0x2d6637=['BCT',_0x4741ca(0x237)];try{await axios[_0x4741ca(0x203)](_0x4741ca(0x1bd),{'headers':{'X-CMC_PRO_API_KEY':_0x2600d0},'params':{'symbol':_0x2d6637[_0x4741ca(0x19a)]()}});}catch(_0x1b4bb0){_0x1b4bb0['toString']()['includes'](_0x4741ca(0xdd))?(io['to'](_0x4741ca(0x234))['emit'](_0x4741ca(0xc9),'CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager'),logger[_0x4741ca(0x284)](_0x4741ca(0x1fd))):(io['to']('botmanager')['emit']('notification','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20see\x20logs\x20for\x20details'),logger[_0x4741ca(0x284)](_0x4741ca(0x1e5)),logger['debug'](_0x4741ca(0x210),_0x1b4bb0[_0x4741ca(0x19a)]()+_0x4741ca(0x259)+_0x1b4bb0[_0x4741ca(0x192)]));return;}logger[_0x4741ca(0x1ae)](_0x4741ca(0x2b3));}function updateSetting(_0x111acd,_0x44336b){const _0x571ad2=_0x66c508;dbSettings[_0x571ad2(0x256)](_0x571ad2(0x128)+_0x111acd,_0x44336b)[_0x571ad2(0x2a2)](),settings=getSettings(),io['to'](_0x571ad2(0x234))[_0x571ad2(0x180)](_0x571ad2(0x212),cleanSettings());}function storeSecure(_0x2ffae3){const _0x516cf0=_0x66c508;dbSecure[_0x516cf0(0x203)](_0x516cf0(0x18e))[_0x516cf0(0x100)](_0x2ffae3)[_0x516cf0(0x2a2)](),secure=_0x2ffae3;}function addBlacklist(_0x911d83){const _0x576bb0=_0x66c508;cleanBlacklist();let _0xd016d8;devices[_0x911d83]['telegramIpApproval']?_0xd016d8=Math[_0x576bb0(0x246)](devices[_0x911d83][_0x576bb0(0xfb)][_0x576bb0(0xee)],loginExpiry):_0xd016d8=loginExpiry,dbSecure[_0x576bb0(0x203)](_0x576bb0(0x223))[_0x576bb0(0x100)]({'expiry':new Date()[_0x576bb0(0x195)]()+_0xd016d8*0x3c*0x3e8,'token':devices[_0x911d83][_0x576bb0(0x1e8)][_0x576bb0(0x213)]})[_0x576bb0(0x2a2)](),blacklist=dbSecure[_0x576bb0(0x203)](_0x576bb0(0x223))[_0x576bb0(0xed)]();}function cleanBlacklist(){const _0x781f98=_0x66c508;let _0x15a573=dbSecure[_0x781f98(0x203)](_0x781f98(0x223))[_0x781f98(0x2b0)]()[_0x781f98(0xed)](),_0x2bf29e=new Date()[_0x781f98(0x195)]();_0x15a573['forEach'](_0xfd6845=>{const _0x37de68=_0x781f98;_0xfd6845[_0x37de68(0xee)]<_0x2bf29e&&dbSecure[_0x37de68(0x203)](_0x37de68(0x223))['remove']({'expiry':_0xfd6845['expiry']})[_0x37de68(0x2a2)]();});}function initStates(){const _0x29a9d5=_0x66c508;let _0x42f626=getConfiguration();_0x42f626[_0x29a9d5(0x240)](_0x4561cf=>{const _0x5a0fa9=_0x29a9d5;_0x4561cf[_0x5a0fa9(0x159)]=_0x5a0fa9(0x1de);}),storeConfiguration(_0x42f626);}async function generateKeys(){const _0x57d1db=_0x66c508,_0x223219=forge[_0x57d1db(0x17b)]['rsa'][_0x57d1db(0x11e)]({'bits':0x1000,'e':0x10001}),_0x30fdea=forge[_0x57d1db(0x17b)][_0x57d1db(0x129)](_0x223219[_0x57d1db(0x295)]),_0x3680e3=forge[_0x57d1db(0x17b)][_0x57d1db(0xdb)](_0x223219[_0x57d1db(0x152)]);return{'privateKey':_0x30fdea,'publicKey':_0x3680e3};}async function oneTimeMigration(){const _0xd55f79=_0x66c508;let _0xecd506=getSettings(),_0x5890fc=![];!_0xecd506[_0xd55f79(0x220)]('lastmsgtelegram')&&(_0xecd506[_0xd55f79(0x1f1)]=0x0,_0x5890fc=!![]);!_0xecd506[_0xd55f79(0x220)](_0xd55f79(0xdf))&&(_0xecd506['lastmsgemitted']=0x0,_0x5890fc=!![]);!_0xecd506[_0xd55f79(0x220)](_0xd55f79(0x283))&&(_0xecd506[_0xd55f79(0x283)]='0.0.0',_0x5890fc=!![]);!_0xecd506[_0xd55f79(0x220)](_0xd55f79(0x17f))&&(_0xecd506['onepagemode']=![],_0x5890fc=!![]);!_0xecd506[_0xd55f79(0x220)](_0xd55f79(0x1d0))&&(_0xecd506['marketcapApi']='',_0x5890fc=!![]);if(_0x5890fc)storeSettings(_0xecd506);try{fs[_0xd55f79(0x194)](configbackuppath,{'withFileTypes':!![]})[_0xd55f79(0x240)](_0x5b7aec=>{const _0x5e19d9=_0xd55f79;if(!_0x5b7aec['isDirectory']()){if(!_0x5b7aec[_0x5e19d9(0x2ae)][_0x5e19d9(0x18c)]('backup-full@'))fs[_0x5e19d9(0x25b)](configbackuppath+_0x5b7aec[_0x5e19d9(0x2ae)]);}else fs[_0x5e19d9(0x297)](configbackuppath+_0x5b7aec['name'],{'recursive':!![]});});}catch(_0x198eb2){logger[_0xd55f79(0x1ae)](_0xd55f79(0x155),_0x198eb2);}}function storeConfiguration(_0x3b2bae){const _0x591ddd=_0x66c508;dbConfig[_0x591ddd(0x203)](_0x591ddd(0x26a))['remove']()[_0x591ddd(0x2a2)](),dbConfig[_0x591ddd(0x203)](_0x591ddd(0x26a))[_0x591ddd(0x100)](..._0x3b2bae)[_0x591ddd(0x2a2)](),config=_0x3b2bae;}async function resetPassword(){const _0x7ed4f3=_0x66c508;if(tgBot&&settings['telegramChatId']){const _0x27408d=Markup[_0x7ed4f3(0x1bb)]([Markup[_0x7ed4f3(0x1a9)][_0x7ed4f3(0x2ab)]('yes',_0x7ed4f3(0x1c5)),Markup['button']['callback']('no',_0x7ed4f3(0x233))]);await sendTelegram(settings[_0x7ed4f3(0x23b)],_0x7ed4f3(0x28b),_0x27408d),tgBot['action'](/resetpw_(.+)/,async _0x50b1d2=>{const _0x502dee=_0x7ed4f3,_0x4c5e58=_0x50b1d2[_0x502dee(0x197)][0x1];_0x50b1d2[_0x502dee(0x1eb)]();if(_0x4c5e58!='no'){const _0x32d946=0xf,_0x5f48bb=_0x502dee(0x21e),_0x207454=Array[_0x502dee(0x139)](crypto[_0x502dee(0x126)](new Uint32Array(_0x32d946)))['map'](_0x415eaf=>_0x5f48bb[_0x415eaf%_0x5f48bb[_0x502dee(0x16c)]])[_0x502dee(0x25f)](''),_0x5723bc=bcrypt[_0x502dee(0x157)](_0x207454,saltRounds);storeSettings({'bbPassword':_0x5723bc}),await sendTelegram(_0x50b1d2[_0x502dee(0x1b4)]['id'],_0x502dee(0x219)+_0x207454,{'parse_mode':_0x502dee(0x198)});}else await sendTelegram(_0x50b1d2[_0x502dee(0x1b4)]['id'],'Password\x20reset\x20rejected');});}}async function confirmRestore(_0x3986e2,_0x2b6baa){const _0x3d1458=_0x66c508;io['to'](_0x3d1458(0x234))[_0x3d1458(0x180)](_0x3d1458(0xc9),'Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot','success');if(tgBot&&settings[_0x3d1458(0x23b)]){const _0x30d979=uuidRandom();tmpStorage[_0x30d979]={'path':_0x3986e2,'filename':_0x2b6baa};const _0x5086b1=Markup['inlineKeyboard']([Markup[_0x3d1458(0x1a9)][_0x3d1458(0x2ab)](_0x3d1458(0x20c),_0x3d1458(0xb7)+_0x30d979),Markup[_0x3d1458(0x1a9)][_0x3d1458(0x2ab)]('no',_0x3d1458(0x28e)+_0x30d979)]);await sendTelegram(settings[_0x3d1458(0x23b)],_0x3d1458(0x15c),_0x5086b1),tgBot[_0x3d1458(0x188)](/restore_(.+)_(.+)/,async _0x949fab=>{const _0x5c0791=_0x3d1458,_0x335764=_0x949fab[_0x5c0791(0x197)][0x1],_0x3b0d3c=_0x949fab[_0x5c0791(0x197)][0x2],{path:_0x334b99,filename:_0x4f9d93}=tmpStorage[_0x3b0d3c];delete tmpStorage[_0x3b0d3c],_0x949fab[_0x5c0791(0x1eb)](),_0x335764==_0x5c0791(0x20c)?(logger['debug'](_0x5c0791(0xeb)),await sendTelegram(_0x949fab['chat']['id'],'Restoring\x20bot(s)\x20from\x20backup',{'parse_mode':_0x5c0791(0x198)}),unzipFile(_0x334b99,_0x4f9d93)):(logger[_0x5c0791(0x1ae)](_0x5c0791(0x2a7)),await sendTelegram(_0x949fab[_0x5c0791(0x1b4)]['id'],_0x5c0791(0x2a7)));});}}function getServerTime(){const _0x3ac7b1=_0x66c508,_0x552b53=new Date();return _0x552b53[_0x3ac7b1(0xce)]()+'/'+(_0x552b53[_0x3ac7b1(0x1cc)]()+0x1)[_0x3ac7b1(0x19a)]()[_0x3ac7b1(0x1e7)](0x2,'0')+'/'+_0x552b53[_0x3ac7b1(0x143)]()[_0x3ac7b1(0x19a)]()['padStart'](0x2,'0')+'\x20'+_0x552b53[_0x3ac7b1(0x116)]()[_0x3ac7b1(0x19a)]()[_0x3ac7b1(0x1e7)](0x2,'0')+':'+_0x552b53[_0x3ac7b1(0x130)]()[_0x3ac7b1(0x19a)]()[_0x3ac7b1(0x1e7)](0x2,'0')+':'+_0x552b53[_0x3ac7b1(0xf1)]()['toString']()[_0x3ac7b1(0x1e7)](0x2,'0');}function getTimeStamp(){const _0x37fb15=_0x66c508,_0x3217ef=shiftedTime();return _0x3217ef['getFullYear']()+'/'+(_0x3217ef['getMonth']()+0x1)[_0x37fb15(0x19a)]()[_0x37fb15(0x1e7)](0x2,'0')+'/'+_0x3217ef['getDate']()['toString']()['padStart'](0x2,'0')+'\x20'+_0x3217ef[_0x37fb15(0x116)]()[_0x37fb15(0x19a)]()[_0x37fb15(0x1e7)](0x2,'0')+':'+_0x3217ef[_0x37fb15(0x130)]()[_0x37fb15(0x19a)]()['padStart'](0x2,'0')+':'+_0x3217ef[_0x37fb15(0xf1)]()[_0x37fb15(0x19a)]()[_0x37fb15(0x1e7)](0x2,'0');}function getCleanTimeStamp(){const _0x49995e=_0x66c508,_0x57dea2=shiftedTime();return _0x57dea2[_0x49995e(0xce)]()+(_0x57dea2[_0x49995e(0x1cc)]()+0x1)[_0x49995e(0x19a)]()[_0x49995e(0x1e7)](0x2,'0')+_0x57dea2[_0x49995e(0x143)]()[_0x49995e(0x19a)]()[_0x49995e(0x1e7)](0x2,'0')+'-'+_0x57dea2['getHours']()['toString']()[_0x49995e(0x1e7)](0x2,'0')+_0x57dea2[_0x49995e(0x130)]()[_0x49995e(0x19a)]()[_0x49995e(0x1e7)](0x2,'0')+_0x57dea2[_0x49995e(0xf1)]()[_0x49995e(0x19a)]()[_0x49995e(0x1e7)](0x2,'0');}function shiftedTime(){const _0x5e12b4=_0x66c508,_0x2a901e=new Date();let _0x40d6fa=_0x2a901e;if(settings['timeshift']&&settings[_0x5e12b4(0xf8)]!==0x0)_0x40d6fa=fns[_0x5e12b4(0x133)](_0x2a901e,{'hours':settings[_0x5e12b4(0xf8)]});return _0x40d6fa;}async function startScheduler(){const _0x2f3e9d=_0x66c508,_0x367c42=new Date()[_0x2f3e9d(0x16e)](),_0x621d74=shiftedTime()[_0x2f3e9d(0x116)]();_0x621d74==0x4&&backupConfigFiles(),_0x621d74==0x0&&(rotateLogFiles(),logger['debug'](_0x2f3e9d(0x261)),logger['debug'](_0x2f3e9d(0x1f7)+serverversion+'#RES#\x20'+(environment==_0x2f3e9d(0xe9)?_0x2f3e9d(0xe4):'')),logger['debug'](_0x2f3e9d(0x261))),_0x367c42%0x6==0x0&&triggerAnalytics(),_0x367c42%0x6==0x0&&getMessages(),await sleep(schedulerInterval),startScheduler();}async function restoreBackupFile(_0x1c9c8b){const _0x303791=_0x66c508;logger[_0x303791(0x1ae)]('Restore\x20backup\x20file\x20'+_0x1c9c8b);const _0xac7b=getBotsWithMode();_0xac7b[_0x303791(0x16c)]>0x0?confirmRestore(configbackuppath,_0x1c9c8b):unzipFile(configbackuppath,_0x1c9c8b);}async function getBackupFiles(_0x405973=null){const _0x38c85b=_0x66c508;let _0x581c6e=[],_0x15a1dc=fs[_0x38c85b(0x194)](configbackuppath,{'withFileTypes':!![]});_0x15a1dc['sort']((_0x4a8260,_0x5ea27a)=>_0x4a8260[_0x38c85b(0x2ae)]<_0x5ea27a[_0x38c85b(0x2ae)]?0x1:_0x5ea27a[_0x38c85b(0x2ae)]<_0x4a8260[_0x38c85b(0x2ae)]?-0x1:0x0),_0x15a1dc[_0x38c85b(0x240)](_0x4cfbc8=>{const _0x43d13b=_0x38c85b;if(!_0x4cfbc8[_0x43d13b(0x16a)]()&&_0x4cfbc8[_0x43d13b(0x2ae)]['startsWith']('backup-full@')&&_0x4cfbc8[_0x43d13b(0x2ae)]['endsWith'](_0x43d13b(0xda))){const _0x4701fe=formatDate(fs[_0x43d13b(0x27c)](configbackuppath+_0x4cfbc8[_0x43d13b(0x2ae)])['mtime']);_0x581c6e[_0x43d13b(0x100)]({'name':_0x4cfbc8[_0x43d13b(0x2ae)],'mtime':_0x4701fe});}});if(_0x405973)io['to'](_0x405973)[_0x38c85b(0x180)]('backup-files',_0x581c6e);else return _0x581c6e;}async function backupConfigFiles(){const _0x19c93e=_0x66c508;await zipFiles('backup-full');const _0x4cc874=getCleanTimeStamp();fs[_0x19c93e(0xbc)](zippath+_0x19c93e(0x29f),configbackuppath+(_0x19c93e(0x19f)+_0x4cc874+_0x19c93e(0xda)));let _0x3faac1=fs[_0x19c93e(0x194)](configbackuppath,{'withFileTypes':!![]});_0x3faac1[_0x19c93e(0x103)]((_0x96f431,_0x41aff8)=>_0x96f431[_0x19c93e(0x2ae)]<_0x41aff8[_0x19c93e(0x2ae)]?0x1:_0x41aff8['name']<_0x96f431['name']?-0x1:0x0),_0x3faac1[_0x19c93e(0x16c)]>maxBackups&&fs['unlinkSync'](configbackuppath+_0x3faac1[_0x3faac1['length']-0x1]['name']);}function rotateLogFiles(){const _0x2afaa4=_0x66c508,_0x282b8b=fs[_0x2afaa4(0x27c)](logspath+_0x2afaa4(0xcb)),_0x4defba=_0x282b8b['size']/0x400;if(_0x4defba>0x64){let _0x20d6a7=fs[_0x2afaa4(0x194)](logspath,{'withFileTypes':!![]});_0x20d6a7[_0x2afaa4(0x103)]((_0x4982e6,_0x12aee0)=>_0x4982e6[_0x2afaa4(0x2ae)]<_0x12aee0[_0x2afaa4(0x2ae)]?0x1:_0x12aee0['name']<_0x4982e6[_0x2afaa4(0x2ae)]?-0x1:0x0),_0x20d6a7['forEach'](_0x55ae9d=>{const _0x484afa=_0x2afaa4;if(_0x55ae9d[_0x484afa(0x2ae)]==_0x484afa(0xe6))fs[_0x484afa(0xbc)](logspath+_0x55ae9d[_0x484afa(0x2ae)],logspath+_0x484afa(0x181));if(_0x55ae9d[_0x484afa(0x2ae)]=='output-001.log')fs[_0x484afa(0xbc)](logspath+_0x55ae9d['name'],logspath+'output-002.log');_0x55ae9d[_0x484afa(0x2ae)]==_0x484afa(0xcb)&&(fs[_0x484afa(0xbc)](logspath+_0x55ae9d['name'],logspath+'output-001.log'),fs[_0x484afa(0x184)](logspath+_0x55ae9d['name'],''));});}}async function zipFiles(_0x53093a){const _0x2c2c40=_0x66c508;let _0x4c708d;if(_0x53093a==_0x2c2c40(0x251))_0x4c708d=logspath;if(_0x53093a==_0x2c2c40(0xb5))_0x4c708d=configpath;if(_0x53093a==_0x2c2c40(0x1ca))_0x4c708d=configpath;let _0x2ad304=fs[_0x2c2c40(0x194)](_0x4c708d,{'withFileTypes':!![]});const _0x1ca6ad=new JSZip();_0x2ad304[_0x2c2c40(0x240)](_0x502158=>{const _0x1d66d4=_0x2c2c40;if(!_0x502158['isDirectory']()){let _0x1971aa=fs['readFileSync'](_0x4c708d+_0x502158['name']);if(_0x53093a==_0x1d66d4(0xb5)){const _0x5d8e92=/^bot-[0-9]{3}-config.json$/,_0x222b7f=_0x5d8e92[_0x1d66d4(0x26c)](_0x502158['name']);if(_0x222b7f){const _0x204b03=JSON[_0x1d66d4(0x26b)](_0x1971aa);if(_0x204b03[_0x1d66d4(0x178)][0x0]){_0x204b03[_0x1d66d4(0x178)][0x0]['apiKey']='***',_0x204b03[_0x1d66d4(0x178)][0x0][_0x1d66d4(0x1f9)]=_0x1d66d4(0x12c);if(_0x204b03[_0x1d66d4(0x178)][0x0][_0x1d66d4(0x17d)])_0x204b03['bot'][0x0]['apiPassword']=_0x1d66d4(0x12c);}_0x1971aa=JSON[_0x1d66d4(0x101)](_0x204b03,null,0x2);}if(_0x502158['name']==_0x1d66d4(0xc8)){const _0x41bda2=JSON[_0x1d66d4(0x26b)](_0x1971aa);if(_0x41bda2['settings'][_0x1d66d4(0x250)])_0x41bda2[_0x1d66d4(0x212)][_0x1d66d4(0x250)]=![];if(_0x41bda2['settings'][_0x1d66d4(0xd5)])_0x41bda2['settings']['bbPassword']=_0x1d66d4(0x12c);if(_0x41bda2['settings'][_0x1d66d4(0x287)])_0x41bda2[_0x1d66d4(0x212)][_0x1d66d4(0x287)]=_0x1d66d4(0x12c);if(_0x41bda2[_0x1d66d4(0x212)][_0x1d66d4(0x23b)])_0x41bda2[_0x1d66d4(0x212)]['telegramChatId']=null;if(_0x41bda2['settings'][_0x1d66d4(0x1d0)])_0x41bda2[_0x1d66d4(0x212)][_0x1d66d4(0x1d0)]=_0x1d66d4(0x12c);_0x1971aa=JSON[_0x1d66d4(0x101)](_0x41bda2,null,0x2);}if(_0x502158[_0x1d66d4(0x2ae)]!=_0x1d66d4(0x232))_0x1ca6ad['file'](_0x502158[_0x1d66d4(0x2ae)],_0x1971aa);}else _0x1ca6ad[_0x1d66d4(0x187)](_0x502158[_0x1d66d4(0x2ae)],_0x1971aa);}});const _0x58b8a5=await _0x1ca6ad[_0x2c2c40(0x24a)]({'type':'string','base64':![],'compression':_0x2c2c40(0x1f3)});fs[_0x2c2c40(0x184)](zippath+(_0x53093a+_0x2c2c40(0xda)),_0x58b8a5,'binary');}async function unzipFile(_0x3281ba,_0x377f46){const _0x93658e=_0x66c508;fs[_0x93658e(0x194)](configpath,{'withFileTypes':!![]})[_0x93658e(0x240)](_0x32c38b=>{const _0x45e0b0=_0x93658e;if(!_0x32c38b['isDirectory']())fs[_0x45e0b0(0x297)](configpath+_0x32c38b[_0x45e0b0(0x2ae)]);});const _0x1f6570=fs[_0x93658e(0x153)](_0x3281ba+_0x377f46,'binary'),_0x1779f9=await JSZip[_0x93658e(0x132)](_0x1f6570,{'base64':![],'checkCRC32':!![]});for(const _0x19310f of Object[_0x93658e(0x112)](_0x1779f9['files'])){const _0x4fe07b=_0x1779f9[_0x93658e(0x156)][_0x19310f],_0x4ac919=await _0x4fe07b['async'](_0x93658e(0x21b));fs[_0x93658e(0x184)](configpath+_0x4fe07b[_0x93658e(0x2ae)],_0x4ac919);}fs[_0x93658e(0x194)](temppath,{'withFileTypes':!![]})[_0x93658e(0x240)](_0x48e30b=>{const _0x5e6ed1=_0x93658e;if(!_0x48e30b[_0x5e6ed1(0x16a)]())fs[_0x5e6ed1(0x297)](temppath+_0x48e30b['name']);}),logger[_0x93658e(0x1ae)]('Backup\x20file\x20unzipped\x20and\x20stored'),process[_0x93658e(0x2b7)]({'restore':!![]},_0x3562e2=>{});}async function getPublicIp(){const _0x4f082c=_0x66c508;try{const _0x1f6fe4=await axios['get']('https://api.ipify.org?format=json');publicip=_0x1f6fe4[_0x4f082c(0x245)]['ip'];}catch(_0x3a9cfb){}}async function triggerAnalytics(){const _0x1004bd=_0x66c508;if(!publicip)await getPublicIp();const _0x292219=getBotsWithMode();let _0x4a3b21=0x0;_0x292219[_0x1004bd(0x240)](_0x31f843=>{const _0x599222=_0x1004bd;if(_0x31f843[_0x599222(0x269)]===_0x599222(0x238))_0x4a3b21++;});const _0x193b0e=getBotExchanges();mixpanel['track'](_0x1004bd(0x1b2),{'distinct_id':settings[_0x1004bd(0x1ee)],'ip':publicip,'version':serverversion,'numbots':_0x292219['length'],'numbotsenabled':_0x4a3b21,'exchanges':_0x193b0e,'environment':environment});}async function getMessages(){const _0x1a1e21=_0x66c508,_0x2a65b4='https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master',_0x560327=new GraphQLClient(_0x2a65b4),_0x1bef18={'authorization':'Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U'},_0x5e9957=serverversion[_0x1a1e21(0x1fc)]('.'),_0x1cfaff=_0x5e9957[0x0]+'.'+_0x5e9957[0x1],_0x3b0461=Math[_0x1a1e21(0x218)](settings[_0x1a1e21(0x1f1)],settings['lastmsgemitted']),_0x1a53d9={'last':parseInt(_0x3b0461),'bbm':_0x1cfaff},_0x9da98f=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x151540;try{_0x151540=await _0x560327['request'](_0x9da98f,_0x1a53d9,_0x1bef18);}catch(_0x5a7747){}if(_0x151540&&_0x151540['messages']){let _0x2ccecf=settings[_0x1a1e21(0x1f1)],_0x3e0d7b=settings[_0x1a1e21(0x1f1)];newMessages=[];for(const _0x4c46e3 of _0x151540[_0x1a1e21(0x2b4)]){newMessages['push'](_0x4c46e3);let _0x224f7a=![];_0x4c46e3[_0x1a1e21(0x1d2)]&&(updateSetting('latestversion',_0x4c46e3[_0x1a1e21(0x1d2)]),_0x224f7a=isNewerVersion(serverversion,_0x4c46e3[_0x1a1e21(0x1d2)])||serverversion==_0x4c46e3[_0x1a1e21(0x1d2)]);if(!_0x224f7a&&_0x4c46e3[_0x1a1e21(0x252)]>_0x2ccecf){if(_0x4c46e3[_0x1a1e21(0x263)]===_0x1a1e21(0x299)||serverversion[_0x1a1e21(0x18c)](_0x4c46e3[_0x1a1e21(0x263)])){let _0x38aa7c=''+_0x4c46e3[_0x1a1e21(0x190)]+'\x0a\x0a'+_0x4c46e3[_0x1a1e21(0xfc)];const _0x1f015d=await sendTelegramMsg(toTelegramMarkdown(_0x38aa7c),_0x1a1e21(0x2a1));_0x2ccecf=_0x4c46e3[_0x1a1e21(0x252)];}}_0x3e0d7b=_0x4c46e3['number'];}updateAvailable=isNewerVersion(settings[_0x1a1e21(0x283)],serverversion),updateSetting(_0x1a1e21(0x1f1),_0x3e0d7b),emitMessages();}}function emitMessages(){const _0xbaa720=_0x66c508,_0xbe3e86=settings[_0xbaa720(0xdf)];let _0x22c239=[];newMessages['forEach'](_0x49f986=>{_0x49f986['number']>_0xbe3e86&&_0x22c239['push'](_0x49f986);}),_0x22c239[_0xbaa720(0x16c)]>0x0&&getAllClients()[_0xbaa720(0x240)](_0x8c907d=>{const _0x1b3523=_0xbaa720;getSocket(_0x8c907d['id'])[_0x1b3523(0x180)](_0x1b3523(0xfc),_0x22c239);});}function confirmMessage(_0x5be4d3){const _0x1edd84=_0x66c508;updateSetting(_0x1edd84(0xdf),Number(_0x5be4d3));}function isNewerVersion(_0x303b7b,_0x826f26){const _0x33d1b9=_0x66c508,_0x4b3ef5=_0x826f26[_0x33d1b9(0x1fc)]('.'),_0x320a6f=_0x303b7b[_0x33d1b9(0x1fc)]('.');for(var _0x509048=0x0;_0x509048<_0x320a6f['length'];_0x509048++){const _0x255740=~~_0x320a6f[_0x509048],_0x51e728=~~_0x4b3ef5[_0x509048];if(_0x255740>_0x51e728)return!![];if(_0x255740<_0x51e728)return![];}return![];}function toTelegramMarkdown(_0x41c793){const _0x28dd2a=_0x66c508,_0x1e19fc=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x1cefe2=/\*{2}(.+?)\*{2}/gim;return _0x41c793=_0x41c793[_0x28dd2a(0xf3)](_0x1e19fc,_0x28dd2a(0xd8))['replace'](_0x1cefe2,_0x28dd2a(0xd2)),_0x41c793;}async function validateConfigFile(){const _0x2292fa=_0x66c508,_0x12a0bd=dbConfig['get']('bots')['sortBy']('botID')[_0x2292fa(0xed)]()||[];if(_0x12a0bd[_0x2292fa(0x16c)]==0x0){let _0x2a6069=0x0,_0x1fddf0=[];const _0x487749=/^bot-([0-9]{3})-config.json$/,_0x8f4167=fs[_0x2292fa(0x194)](configpath);_0x8f4167[_0x2292fa(0x240)](_0x1bd9ef=>{const _0x19312c=_0x2292fa,_0x1cd9e1=_0x487749[_0x19312c(0x1d8)](_0x1bd9ef);if(_0x1cd9e1){const _0x22376f=_0x1cd9e1[0x1];let _0x251bb0=getBotAttributes(_0x22376f);_0x1fddf0[_0x19312c(0x100)]({'botID':_0x22376f,'botname':_0x251bb0[_0x19312c(0x12e)],'status':_0x19312c(0x1e3),'live':_0x19312c(0x1de)}),_0x2a6069++;}}),_0x2a6069!=0x0&&(dbConfig[_0x2292fa(0x203)](_0x2292fa(0x26a))['assign'](_0x1fddf0)[_0x2292fa(0x2a2)](),config=_0x1fddf0,restoredConfigFile=_0x2a6069);}}async function restoreConfigNotify(_0x179ab1){const _0x1e56de=_0x66c508;let _0x3faf84;if(restoredConfigFile==0x1)_0x3faf84=_0x1e56de(0x225);else _0x3faf84=_0x1e56de(0xd0);if(_0x179ab1)io['to'](_0x1e56de(0x234))[_0x1e56de(0x180)](_0x1e56de(0xc9),_0x3faf84);else{logger['simple']('-----------------------------------------------------------------------------------'),logger[_0x1e56de(0x28d)](_0x3faf84),logger[_0x1e56de(0x28d)](_0x1e56de(0x171)),logger[_0x1e56de(0x28d)]('');if(tgBot&&settings[_0x1e56de(0x23b)]&&settings['telegramEvents']!=_0x1e56de(0x1c4))await sendTelegram(settings[_0x1e56de(0x23b)],_0x1e56de(0x1c0)+_0x3faf84);}}function decryptRSA(_0x443058,_0x452d93){const _0x621014=_0x66c508,_0x4b41bb=forge[_0x621014(0x17b)][_0x621014(0x20d)](_0x443058),_0x1f363d=_0x4b41bb[_0x621014(0x13f)](forge[_0x621014(0x22d)][_0x621014(0xba)](_0x452d93),'RSA-OAEP',{'md':forge['md'][_0x621014(0x134)][_0x621014(0xc7)](),'mgf1':{'md':forge['md'][_0x621014(0x134)][_0x621014(0xc7)]()}});return _0x1f363d;}function validateCredentials(_0x49116f,_0x2e478a){const _0x57e085=_0x66c508;if(_0x49116f[_0x57e085(0x257)]==settings[_0x57e085(0x170)]&&bcrypt[_0x57e085(0x109)](_0x49116f['password'],settings['bbPassword'])){if(settings[_0x57e085(0x28c)])return{'allow':![],'reason':'2FA\x20login\x20required','token':null};else{const _0x43be70=generateLoginToken(_0x2e478a);return{'allow':!![],'reason':_0x57e085(0xde),'token':_0x43be70};}}else return{'allow':![],'reason':'invalid\x20credentials','token':null};}function refreshToken(_0xeeeed1){const _0x2ea11b=_0x66c508,_0x665a6=generateLoginToken(_0xeeeed1);return{'allow':!![],'reason':_0x2ea11b(0xde),'token':_0x665a6};}function validateAccess(_0x5bfef4,_0x4fdd19,_0x5ebeae){const _0x3b4ac6=_0x66c508,_0x28afb1=_0x5ebeae?_0x5ebeae:devices[_0x4fdd19]['ip'];let _0xbed45d;const _0x339694=_0x6fd7e1=>{const _0x965a95=_0x3110;if(settings[_0x965a95(0x250)]){if(settings[_0x965a95(0x28c)]){if(telegram2FaApproved(_0x4fdd19)){const _0x287529=generateLoginToken(_0x4fdd19);return{'allow':!![],'reason':_0x965a95(0x12b),'token':_0x287529};}else return{'allow':![],'reason':_0x965a95(0x21a),'token':null};}else return _0xbed45d=validToken(_0x6fd7e1,_0x4fdd19),_0xbed45d[_0x965a95(0x220)](_0x965a95(0x206))?{'allow':!![],'reason':_0x965a95(0x10a),'token':_0x6fd7e1}:{'allow':![],'reason':_0x965a95(0x21a),'token':null};}else return{'allow':!![],'reason':_0x965a95(0x127),'token':null};};if(settings[_0x3b4ac6(0x281)]){let _0x3f9477=[...settings[_0x3b4ac6(0x1a8)],'::1',_0x3b4ac6(0x199),_0x3b4ac6(0x1dd)];if(_0x3f9477['includes'](_0x28afb1))return _0x339694(_0x5bfef4);else{_0xbed45d=validToken(_0x5bfef4,_0x4fdd19);if(_0xbed45d['hasOwnProperty'](_0x3b4ac6(0x206)))return _0x339694(_0x5bfef4);else{if(telegramIpApproved(_0x4fdd19)){const _0x43c6df=generateToken(_0x4fdd19);return _0xbed45d=_0x339694(_0x5bfef4),_0xbed45d[_0x3b4ac6(0xca)]?{'allow':!![],'reason':'temporary\x20token\x20generated','token':_0x43c6df}:_0xbed45d;}else return settings['temporaryAccessAllowed']?{'allow':![],'reason':_0x3b4ac6(0x1ff),'token':null}:{'allow':![],'reason':_0x3b4ac6(0x278),'token':null};}}}else return _0x339694(_0x5bfef4);}function timelyDecrypt(_0x159c28,_0x3e6bcf,_0x32cabc='@'){const _0x3f628d=_0x66c508;if(_0x159c28)try{const _0x98e4d3=decryptRSA(secure[_0x3f628d(0x295)],_0x159c28),_0x2ed56a=_0x98e4d3[_0x3f628d(0x1fc)](_0x32cabc)[0x0],_0x45d520=_0x98e4d3[_0x3f628d(0x1fc)](_0x32cabc)[0x1],_0x41a572=new Date()[_0x3f628d(0x195)]();if(_0x3e6bcf){if(_0x41a572-_0x45d520<maxSecretAge*0x3e8)return _0x2ed56a;else return![];}else return _0x2ed56a;}catch(_0x1d2db2){return![];}else return![];}const validToken=(_0x25edf5,_0x64f0b2)=>{const _0x56d02a=_0x66c508,_0x29190d=devices[_0x64f0b2]['ip'];if(!_0x25edf5)return{'error':_0x56d02a(0x1b6)};for(let _0xf399d0 of blacklist){if(_0xf399d0[_0x56d02a(0x213)]==_0x25edf5)return{'error':'Token\x20blacklisted'};}let _0x5ee2be;try{_0x5ee2be=jwt[_0x56d02a(0x1a0)](_0x25edf5,secure[_0x56d02a(0x28a)]+_0x64f0b2);}catch{return{'error':_0x56d02a(0x231)};}if(!_0x5ee2be['hasOwnProperty']('clientip')&&!_0x5ee2be[_0x56d02a(0x220)](_0x56d02a(0x257))||!_0x5ee2be[_0x56d02a(0x220)]('exp'))return{'error':_0x56d02a(0xcd)};if(!_0x5ee2be[_0x56d02a(0x220)](_0x56d02a(0x257))&&_0x5ee2be['hasOwnProperty'](_0x56d02a(0x22e))){const {clientip:_0x5c0e4a}=_0x5ee2be;return _0x29190d==_0x5c0e4a?{'success':_0x56d02a(0x15e)}:{'error':_0x56d02a(0xd1)};}else{if(_0x5ee2be[_0x56d02a(0x220)](_0x56d02a(0x257))&&_0x5ee2be['hasOwnProperty'](_0x56d02a(0x22e))){const {username:_0x141e16,clientip:_0x110a75}=_0x5ee2be;return settings['bbUsername']==_0x141e16&&_0x29190d==_0x110a75?{'success':_0x56d02a(0x15e)}:{'error':_0x56d02a(0x29b)};}}},generateLoginToken=_0x23eb64=>{const _0x51016b=_0x66c508;if(_0x23eb64){const _0x167358=devices[_0x23eb64]['ip'];return jwt[_0x51016b(0x2a5)]({'username':settings[_0x51016b(0x170)],'clientip':_0x167358},secure[_0x51016b(0x28a)]+_0x23eb64,{'expiresIn':tokenRefresh*0x3c,'allowInsecureKeySizes':!![]});}else return![];},generateToken=_0x104cba=>{const _0x30f076=_0x66c508;if(_0x104cba){const _0x131ace=devices[_0x104cba]['ip'];return jwt[_0x30f076(0x2a5)]({'clientip':_0x131ace},secure['secret']+_0x104cba,{'expiresIn':devices[_0x104cba]['telegramIpApproval'][_0x30f076(0xee)]*0x3c,'allowInsecureKeySizes':!![]});}else return![];},telegramIpApproved=_0x6ff43f=>{const _0x55a46b=_0x66c508;let _0x2d1901=![];return devices[_0x6ff43f]['telegramIpApproval']&&devices[_0x6ff43f]['telegramIpApproval'][_0x55a46b(0xee)]!='reject'&&(_0x2d1901=devices[_0x6ff43f][_0x55a46b(0xfb)][_0x55a46b(0x22e)]==devices[_0x6ff43f]['ip']&&new Date()[_0x55a46b(0x195)]()-devices[_0x6ff43f]['telegramIpApproval'][_0x55a46b(0x260)]<devices[_0x6ff43f][_0x55a46b(0xfb)][_0x55a46b(0xee)]*0x3c*0x3e8),_0x2d1901;},telegram2FaApproved=_0x4f9bf8=>{const _0x32bc4a=_0x66c508;let _0x19176c=![];return devices[_0x4f9bf8][_0x32bc4a(0x1e9)]&&devices[_0x4f9bf8]['telegram2FaApproval'][_0x32bc4a(0xee)]!=_0x32bc4a(0x1df)&&(_0x19176c=devices[_0x4f9bf8]['telegram2FaApproval']['clientip']==devices[_0x4f9bf8]['ip']&&new Date()[_0x32bc4a(0x195)]()-devices[_0x4f9bf8]['telegram2FaApproval']['timestamp']<devices[_0x4f9bf8]['telegram2FaApproval'][_0x32bc4a(0xee)]*0x3c*0x3e8),_0x19176c;},normalizeIP=_0x45e4f2=>{const _0x4f3c5a=_0x66c508;let _0x251736=null,_0x428926=null;if(ipaddr[_0x4f3c5a(0x1ea)](_0x45e4f2)){const _0x25df6c=ipaddr[_0x4f3c5a(0x26b)](_0x45e4f2);_0x25df6c[_0x4f3c5a(0x10c)]()===_0x4f3c5a(0x1b1)?(_0x25df6c[_0x4f3c5a(0x1b0)]()&&(_0x251736=_0x25df6c[_0x4f3c5a(0x10b)]()[_0x4f3c5a(0x19a)]()),_0x428926=_0x25df6c['toString']()):(_0x251736=_0x25df6c[_0x4f3c5a(0x19a)](),_0x428926=_0x25df6c[_0x4f3c5a(0x107)]()[_0x4f3c5a(0x19a)]());}return{'show':_0x251736?_0x251736:_0x428926,'store':_0x428926};};function formatDate(_0x48c6de){const _0x31dfe9=_0x66c508;return _0x48c6de[_0x31dfe9(0xce)]()+'/'+(_0x48c6de[_0x31dfe9(0x1cc)]()+0x1)[_0x31dfe9(0x19a)]()[_0x31dfe9(0x1e7)](0x2,'0')+'/'+_0x48c6de['getDate']()[_0x31dfe9(0x19a)]()[_0x31dfe9(0x1e7)](0x2,'0')+'\x20'+_0x48c6de[_0x31dfe9(0x116)]()[_0x31dfe9(0x19a)]()[_0x31dfe9(0x1e7)](0x2,'0')+':'+_0x48c6de[_0x31dfe9(0x130)]()[_0x31dfe9(0x19a)]()['padStart'](0x2,'0')+':'+_0x48c6de[_0x31dfe9(0xf1)]()[_0x31dfe9(0x19a)]()['padStart'](0x2,'0');}function sleep(_0x334000){return new Promise(_0x54be7d=>setTimeout(_0x54be7d,_0x334000));}