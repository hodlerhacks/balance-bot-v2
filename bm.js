const _0x14c6b8=_0x3d8c;(function(_0x154b8e,_0x422d5b){const _0x25f365=_0x3d8c,_0x5adac5=_0x154b8e();while(!![]){try{const _0x48f92d=parseInt(_0x25f365(0x30b))/0x1+parseInt(_0x25f365(0x1f2))/0x2*(parseInt(_0x25f365(0x1be))/0x3)+-parseInt(_0x25f365(0x2c5))/0x4*(-parseInt(_0x25f365(0x286))/0x5)+-parseInt(_0x25f365(0x389))/0x6*(-parseInt(_0x25f365(0x397))/0x7)+parseInt(_0x25f365(0x2e1))/0x8+-parseInt(_0x25f365(0x32f))/0x9*(-parseInt(_0x25f365(0x26a))/0xa)+-parseInt(_0x25f365(0x200))/0xb*(parseInt(_0x25f365(0x2d5))/0xc);if(_0x48f92d===_0x422d5b)break;else _0x5adac5['push'](_0x5adac5['shift']());}catch(_0x285293){_0x5adac5['push'](_0x5adac5['shift']());}}}(_0x4102,0xae942));const _0x254e38=function(){let _0x35d948=!![];return function(_0x5594cd,_0x23708f){const _0x43f90a=_0x35d948?function(){const _0x5a86dc=_0x3d8c;if(_0x23708f){const _0x35c826=_0x23708f[_0x5a86dc(0x299)](_0x5594cd,arguments);return _0x23708f=null,_0x35c826;}}:function(){};return _0x35d948=![],_0x43f90a;};}(),_0xacc00b=_0x254e38(this,function(){const _0x30ab9e=_0x3d8c;return _0xacc00b[_0x30ab9e(0x2da)]()[_0x30ab9e(0x2fa)](_0x30ab9e(0x30a))[_0x30ab9e(0x2da)]()[_0x30ab9e(0x1db)](_0xacc00b)[_0x30ab9e(0x2fa)](_0x30ab9e(0x30a));});_0xacc00b();'use strict';process[_0x14c6b8(0x30d)][_0x14c6b8(0x328)]=0x1;const childProcess=require(_0x14c6b8(0x285)),fs=require('fs'),fns=require(_0x14c6b8(0x32a)),low=require(_0x14c6b8(0x344)),FileSync=require(_0x14c6b8(0x310)),path=require(_0x14c6b8(0x203)),crypto=require(_0x14c6b8(0x194)),forge=require(_0x14c6b8(0x293)),bcrypt=require(_0x14c6b8(0x2a5)),jwt=require(_0x14c6b8(0x2c4)),ipaddr=require(_0x14c6b8(0x29e)),argv=require(_0x14c6b8(0x283))(process['argv'][_0x14c6b8(0x216)](0x2))[_0x14c6b8(0x2fc)],uuidRandom=require(_0x14c6b8(0x228)),{Telegraf,Markup}=require(_0x14c6b8(0x180)),Mixpanel=require(_0x14c6b8(0x17a)),axios=require(_0x14c6b8(0x392)),{GraphQLClient,gql}=require(_0x14c6b8(0x2eb)),util=require(_0x14c6b8(0x300)),fileUpload=require(_0x14c6b8(0x1a8)),{networkInterfaces}=require('os'),JSZip=require(_0x14c6b8(0x390)),PORT=argv[_0x14c6b8(0x1f1)]||'3000',pattern=/^[0-9]{2,4}$/;!pattern[_0x14c6b8(0x36e)](PORT)&&(console['log'](_0x14c6b8(0x2e0)+PORT+_0x14c6b8(0x19c)),process[_0x14c6b8(0x303)](0x1));const HOST=argv[_0x14c6b8(0x34a)]||null,userID=argv[_0x14c6b8(0x174)]||'',debugging=argv['d']||![],recreate=argv['r']||![],nodeversion=process[_0x14c6b8(0x32d)][_0x14c6b8(0x318)];let bbpath=_0x14c6b8(0x214),bbpath2='';const botfile=_0x14c6b8(0x22e),configfile=_0x14c6b8(0x2aa),settingsfile=_0x14c6b8(0x363),securefile=_0x14c6b8(0x20a),environment=require('./'+bbpath2+'version.json')[_0x14c6b8(0x2f4)]||_0x14c6b8(0x298),maxBackups=0xa;let validInstallation=!![];const schedulerInterval=0x3c*0x3c*0x3e8;!fs['existsSync'](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x14c6b8(0x309)),configpath=userID?bbpath+'config/'+userID+'/':bbpath+_0x14c6b8(0x2ca),configbackuppath=configpath+_0x14c6b8(0x247),logspath=userID?bbpath+_0x14c6b8(0x29c)+userID+'/':bbpath+'logs/',zippath=userID?bbpath+_0x14c6b8(0x370)+userID+'/':bbpath+'zip/',loggerfile=fs[_0x14c6b8(0x18e)](logspath+_0x14c6b8(0x22b),{'flags':'a'}),temppath=userID?bbpath+_0x14c6b8(0x358)+userID+'/':bbpath+_0x14c6b8(0x358);!fs[_0x14c6b8(0x380)](configpath)&&fs['mkdirSync'](configpath);!fs['existsSync'](configbackuppath)&&fs['mkdirSync'](configbackuppath);!fs[_0x14c6b8(0x380)](logspath)&&fs[_0x14c6b8(0x19e)](logspath);!fs['existsSync'](zippath)&&fs[_0x14c6b8(0x19e)](zippath);!fs[_0x14c6b8(0x380)](temppath)&&fs[_0x14c6b8(0x19e)](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x14c6b8(0x172)]({'bots':[]})['write']();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings['defaults']({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':'0.0.0','onepagemode':![],'marketcapApi':''}})[_0x14c6b8(0x1bd)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x14c6b8(0x172)]({'secure':{},'blacklist':[]})[_0x14c6b8(0x1bd)]();const saltRounds=0xa,mixpanel=Mixpanel[_0x14c6b8(0x288)](_0x14c6b8(0x221),{'host':_0x14c6b8(0x33c)});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings[_0x14c6b8(0x2df)]&&(settings[_0x14c6b8(0x2df)]!=''&&settings[_0x14c6b8(0x2df)]!=_0x14c6b8(0x2d8))&&settings['telegramUsername']&&settings[_0x14c6b8(0x178)]!='')initTelegram();const parseColor=(_0x6ea33d,_0x5d9e41)=>{const _0x48b2eb=_0x14c6b8,_0x20ae7e=/#[A-Z]{3}#/g;if(typeof _0x6ea33d==_0x48b2eb(0x2a0)){!_0x5d9e41?_0x6ea33d=_0x6ea33d[_0x48b2eb(0x38b)](_0x20ae7e,''):(_0x6ea33d=_0x6ea33d[_0x48b2eb(0x38b)](/#BLU#/g,_0x48b2eb(0x262)),_0x6ea33d=_0x6ea33d[_0x48b2eb(0x38b)](/#RED#/g,'\x1b[31m'),_0x6ea33d=_0x6ea33d['replace'](/#YEL#/g,_0x48b2eb(0x1a4)),_0x6ea33d=_0x6ea33d[_0x48b2eb(0x38b)](/#MAG#/g,_0x48b2eb(0x207)),_0x6ea33d=_0x6ea33d[_0x48b2eb(0x38b)](/#CYA#/g,_0x48b2eb(0x32b)),_0x6ea33d=_0x6ea33d['replace'](/#RES#/g,_0x48b2eb(0x2c9)));;}return _0x6ea33d;},logger={'screen':_0x55ff20=>{const _0x4dbd13=_0x14c6b8;console[_0x4dbd13(0x218)](parseColor(_0x55ff20,!![]));},'simple':_0x1455d6=>{const _0x1f561e=_0x14c6b8;console[_0x1f561e(0x218)](parseColor(_0x1455d6,!![])),loggerfile[_0x1f561e(0x1bd)](util[_0x1f561e(0x1c3)](parseColor(_0x1455d6,![]))+'\x0a');},'full':async _0x46bc1c=>{const _0xadbd3=_0x14c6b8,_0x35322d=getTimeStamp()+_0xadbd3(0x2f1)+_0x46bc1c;console[_0xadbd3(0x218)](parseColor(_0x35322d,!![])),loggerfile[_0xadbd3(0x1bd)](util[_0xadbd3(0x1c3)](parseColor(_0x35322d,![]))+'\x0a');if(tgBot&&settings[_0xadbd3(0x20d)]&&settings[_0xadbd3(0x345)]!=_0xadbd3(0x2e8))await sendTelegram(settings[_0xadbd3(0x20d)],_0xadbd3(0x2ef)+parseColor(_0x46bc1c,![]));},'debug':async(_0x8166d3,_0x2e2d8d='')=>{const _0x22e015=_0x14c6b8,_0x10f4a2=getTimeStamp()+_0x22e015(0x23d)+_0x8166d3;if(debugging)console[_0x22e015(0x218)](parseColor(_0x10f4a2,!![]));loggerfile[_0x22e015(0x1bd)](util[_0x22e015(0x1c3)](parseColor(_0x10f4a2,![]))+'\x0a');if(_0x2e2d8d){if(debugging)console[_0x22e015(0x218)](_0x2e2d8d);loggerfile['write'](util['format'](_0x2e2d8d)+'\x0a');}}};let terminating=![];process['on'](_0x14c6b8(0x27c),function(_0x5b9c6e){const _0xc1534b=_0x14c6b8;_0x5b9c6e[_0xc1534b(0x2da)]()['includes']('address\x20already\x20in\x20use')?(logger[_0xc1534b(0x333)](_0xc1534b(0x37d)+_0x5b9c6e[_0xc1534b(0x1f1)]+_0xc1534b(0x261)),process[_0xc1534b(0x2d6)]({'terminate':!![]},_0x261af7=>{})):logger[_0xc1534b(0x333)](_0x5b9c6e);}),process['on']('exit',()=>{const _0x19d5f7=_0x14c6b8;stopAllBots(),process[_0x19d5f7(0x303)](0x0);}),process['on'](_0x14c6b8(0x1b6),()=>{const _0xb24b59=_0x14c6b8;stopAllBots(),process[_0xb24b59(0x303)](0x0);}),process['on'](_0x14c6b8(0x1ff),()=>{const _0x20aa2d=_0x14c6b8;stopAllBots(),process[_0x20aa2d(0x303)](0x0);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+'version.json')['version'],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let tmpStorage={},devices=[],lastIpApproval,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require('express'),app=express(),http=require('http')[_0x14c6b8(0x1c8)](app);app[_0x14c6b8(0x182)](fileUpload({'useTempFiles':!![]})),app[_0x14c6b8(0x222)](_0x14c6b8(0x1d1),async(_0x22bd23,_0xfcca2b)=>{const _0x4e5636=_0x14c6b8,_0x5a53d5=_0x22bd23[_0x4e5636(0x2d1)]['type'],_0x4c76be=getClientsWithBotID(_0x4e5636(0x190)),_0xaffb09=_0x22bd23[_0x4e5636(0x2b3)][_0x4e5636(0x31c)],_0x5451c1=timelyDecrypt(_0xaffb09,![]),_0x35c889=_0x4c76be[_0x4e5636(0x287)](_0x8ad25e=>_0x8ad25e[_0x4e5636(0x31c)]==_0x5451c1);if(_0x35c889){const _0x168b16=normalizeIP(_0x22bd23[_0x4e5636(0x2bc)][_0x4e5636(0x1e9)])['store'],_0x1bc915=_0x22bd23['headers'][_0x4e5636(0x366)];if(validateAccess(_0x1bc915,_0x5451c1,_0x168b16)['allow'])_0x5a53d5==_0x4e5636(0x17b)&&await backupConfigFiles(),await zipFiles(_0x5a53d5),_0xfcca2b[_0x4e5636(0x1ae)](zippath+(_0x5a53d5+_0x4e5636(0x388)),_0x47378e=>{const _0x380db7=_0x4e5636;_0x47378e&&(logger['full'](_0x380db7(0x1e1)+_0x5a53d5),logger[_0x380db7(0x333)](_0x47378e));});else logger[_0x4e5636(0x330)]('Unauthorized\x20attempt\x20to\x20download\x20'+_0x5a53d5+_0x4e5636(0x316));}else logger[_0x4e5636(0x330)](_0x4e5636(0x38c)+_0x5a53d5+_0x4e5636(0x2d4));}),app['post'](_0x14c6b8(0x2e2),async(_0x403c8a,_0x1cc30b)=>{const _0x4503b6=_0x14c6b8,_0x32edf3=getClientsWithBotID('botmanager'),_0x2c74fc=_0x403c8a[_0x4503b6(0x2b3)][_0x4503b6(0x31c)],_0x2e808c=timelyDecrypt(_0x2c74fc,![]),_0x20f7a4=_0x32edf3[_0x4503b6(0x287)](_0x4f1b82=>_0x4f1b82[_0x4503b6(0x31c)]==_0x2e808c);logger['debug'](_0x4503b6(0x35f));if(_0x20f7a4){const _0x514a6c=normalizeIP(_0x403c8a[_0x4503b6(0x2bc)][_0x4503b6(0x1e9)])['store'],_0x4bf024=_0x403c8a[_0x4503b6(0x2b3)][_0x4503b6(0x366)];if(validateAccess(_0x4bf024,_0x2e808c,_0x514a6c)['allow']){if(_0x403c8a[_0x4503b6(0x2b8)]){const _0xda53bb=_0x403c8a[_0x4503b6(0x2b8)][_0x4503b6(0x335)];await _0xda53bb['mv'](temppath+_0xda53bb[_0x4503b6(0x181)]),_0x1cc30b[_0x4503b6(0x2d6)]({'status':!![],'message':_0x4503b6(0x24b)});const _0x3af87b=getBotsWithMode();_0x3af87b[_0x4503b6(0x2b4)]>0x0?confirmRestore(temppath,_0xda53bb[_0x4503b6(0x181)]):unzipFile(temppath,_0xda53bb[_0x4503b6(0x181)]);}}else logger[_0x4503b6(0x330)]('Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)');}else logger[_0x4503b6(0x330)](_0x4503b6(0x356));}),app[_0x14c6b8(0x182)](express[_0x14c6b8(0x1bb)](path[_0x14c6b8(0x1b2)](__dirname,bbpath2,_0x14c6b8(0x176)))),app[_0x14c6b8(0x182)](express[_0x14c6b8(0x1bb)](path[_0x14c6b8(0x1b2)](__dirname,bbpath2,_0x14c6b8(0x25f)))),app[_0x14c6b8(0x222)]('/',function(_0x2fa8dc,_0xdf5de2){const _0x200f9e=_0x14c6b8;_0xdf5de2[_0x200f9e(0x382)](path[_0x200f9e(0x1b2)](__dirname,bbpath2,_0x200f9e(0x176),_0x200f9e(0x37c)));}),app['get'](_0x14c6b8(0x213),function(_0x1643c0,_0x41b13d){const _0x58ab29=_0x14c6b8;_0x41b13d[_0x58ab29(0x382)](path[_0x58ab29(0x1b2)](__dirname,bbpath2,_0x58ab29(0x25f),_0x58ab29(0x37c)));}),app[_0x14c6b8(0x222)](_0x14c6b8(0x1a1),(_0x3afa11,_0x14240f)=>{const _0x29ecfc=_0x14c6b8;_0x14240f[_0x29ecfc(0x382)](path[_0x29ecfc(0x1b2)](__dirname,bbpath2,_0x29ecfc(0x25f),_0x29ecfc(0x37c)));}),app[_0x14c6b8(0x222)](_0x14c6b8(0x1a5),(_0x1bda8a,_0x45da19)=>{const _0x5aee76=_0x14c6b8;_0x45da19[_0x5aee76(0x382)](path[_0x5aee76(0x1b2)](__dirname,bbpath2,'build',_0x5aee76(0x37c)));}),app[_0x14c6b8(0x222)](_0x14c6b8(0x2f0),(_0x2fe894,_0x356e23)=>{const _0x2db6f9=_0x14c6b8;_0x356e23[_0x2db6f9(0x382)](path['join'](__dirname,bbpath2,_0x2db6f9(0x25f),'index.html'));}),app['get'](_0x14c6b8(0x237),(_0x5edf00,_0x3c4e11)=>{_0x3c4e11['sendFile'](path['join'](__dirname,bbpath2,'build','index.html'));}),app[_0x14c6b8(0x222)](_0x14c6b8(0x1a2),(_0x3929c6,_0x4c025b)=>{const _0x5bf05a=_0x14c6b8;_0x4c025b['sendFile'](path[_0x5bf05a(0x1b2)](__dirname,bbpath2,_0x5bf05a(0x25f),_0x5bf05a(0x37c)));}),app[_0x14c6b8(0x222)](_0x14c6b8(0x26f),(_0x3c2b56,_0x1c20b7)=>{const _0x49774a=_0x14c6b8;_0x1c20b7['sendFile'](path['join'](__dirname,bbpath2,_0x49774a(0x25f),'index.html'));});if(HOST)http[_0x14c6b8(0x2e6)](PORT,HOST);else http[_0x14c6b8(0x2e6)](PORT);const io=require(_0x14c6b8(0x373))(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}function getServerIP(){const _0x1b1b28=_0x14c6b8;let _0x1f80e6=_0x1b1b28(0x234);const _0x28ce77=networkInterfaces(),_0x506c1c={};for(const _0x3b2cd9 of Object[_0x1b1b28(0x338)](_0x28ce77)){for(const _0x10b1f8 of _0x28ce77[_0x3b2cd9]){if((_0x10b1f8[_0x1b1b28(0x28b)]==_0x1b1b28(0x23b)||_0x10b1f8[_0x1b1b28(0x28b)]==0x4)&&!_0x10b1f8[_0x1b1b28(0x272)]){const _0x53e7e6=ipaddr['parse'](_0x10b1f8['address'])['range']();_0x53e7e6!='private'&&(!_0x506c1c[_0x3b2cd9]&&(_0x506c1c[_0x3b2cd9]=[]),_0x506c1c[_0x3b2cd9][_0x1b1b28(0x1b9)](_0x10b1f8['address']),_0x1f80e6=_0x10b1f8['address']);}}}return{'serverip':_0x1f80e6,'netinterfaces':_0x506c1c};}async function startServer(){const _0x5e793f=_0x14c6b8,{serverip:_0x516419,netinterfaces:_0x2538e3}=getServerIP();logger[_0x5e793f(0x333)](''),logger[_0x5e793f(0x333)](_0x5e793f(0x295)),await logger[_0x5e793f(0x330)](_0x5e793f(0x2f8)+serverversion+_0x5e793f(0x2b0)+(environment=='staging'?_0x5e793f(0x33b):'')+'\x0a'+(_0x5e793f(0x238)+PORT+'#RES#\x20if\x20running\x20locally\x0a')+('=>\x20Go\x20to\x20#CYA#http://'+_0x516419+':'+PORT+_0x5e793f(0x325))),logger[_0x5e793f(0x333)](_0x5e793f(0x295));if(config[_0x5e793f(0x2b4)]!=0x0)for(const _0x1c6469 of config){const _0x4d19ae=_0x1c6469[_0x5e793f(0x391)]==_0x5e793f(0x1f7)?'a':'m';if(_0x1c6469[_0x5e793f(0x31e)]==_0x5e793f(0x326)||_0x1c6469[_0x5e793f(0x31e)]==_0x5e793f(0x1ab))await logger[_0x5e793f(0x330)](_0x5e793f(0x268)+_0x4d19ae+_0x5e793f(0x334)+_0x1c6469[_0x5e793f(0x270)]+'\x20|\x20'+_0x1c6469[_0x5e793f(0x1e6)]),startBot([_0x1c6469['botID'],userID],{'cwd':bbpath},function(_0x40e8fb){const _0x1ea57c=_0x5e793f;if(_0x40e8fb)logger[_0x1ea57c(0x330)](_0x40e8fb);});else(_0x1c6469[_0x5e793f(0x31e)]==_0x5e793f(0x374)||_0x1c6469[_0x5e793f(0x31e)]==_0x5e793f(0x18f))&&await logger[_0x5e793f(0x330)](_0x5e793f(0x321)+_0x4d19ae+_0x5e793f(0x34d)+_0x1c6469['botID']+_0x5e793f(0x2a2)+_0x1c6469[_0x5e793f(0x1e6)]);}else!newBot&&logger[_0x5e793f(0x333)](_0x5e793f(0x313));if(newBot)addBot();logger['simple']('-----------------------------------------------------------------------------------'),logger[_0x5e793f(0x333)](''),await logger['debug'](_0x5e793f(0x1c6)+nodeversion),await logger[_0x5e793f(0x260)](_0x5e793f(0x1d5),_0x2538e3);}function startSocket(){const _0x280b5b=_0x14c6b8;io['on'](_0x280b5b(0x21b),_0x448a52=>{const _0x510a75=_0x280b5b;let _0x9cfa6,_0x17805e,_0x522301,_0x25ed5b,_0x5372fd;const _0x3a4215=_0x448a52[_0x510a75(0x242)]['headers'][_0x510a75(0x2fd)];_0x17805e=_0x3a4215[_0x510a75(0x249)](/bot[0-9]{3}/);if(_0x17805e)_0x522301=_0x17805e[0x0]['match'](/[0-9]{3}/);if(_0x522301)_0x9cfa6=_0x522301[0x0];else _0x9cfa6=_0x510a75(0x190);const _0x5a7342=_0x448a52[_0x510a75(0x242)][_0x510a75(0x29a)]['encryptedUuid'];if(!_0x5a7342)_0x448a52[_0x510a75(0x17e)]('status',{'publicKey':secure[_0x510a75(0x2c8)]});else{_0x25ed5b=timelyDecrypt(_0x5a7342,![]);if(!_0x25ed5b)_0x448a52['emit']('status',{'publicKey':secure[_0x510a75(0x2c8)]});else{_0x5372fd=normalizeIP(_0x448a52[_0x510a75(0x179)][_0x510a75(0x1e9)])[_0x510a75(0x22c)];if(!devices[_0x25ed5b])devices[_0x25ed5b]={'uuid':_0x25ed5b,'access':{'token':null}};devices[_0x25ed5b]['ip']=_0x5372fd;const _0x120739=addClient(_0x448a52['id'],_0x25ed5b,_0x9cfa6);setAccess(_0x120739),emitMessages(),_0x448a52['on'](_0x510a75(0x276),_0x50b14d=>{const _0x3137ae=_0x510a75,_0x1eeb83=timelyDecrypt(_0x50b14d[_0x3137ae(0x327)],!![],_0x3137ae(0x2ea));if(_0x1eeb83){_0x50b14d={'username':_0x50b14d[_0x3137ae(0x20e)],'password':_0x1eeb83},devices[_0x25ed5b][_0x3137ae(0x36b)]=validateCredentials(_0x50b14d,_0x25ed5b);if(devices[_0x25ed5b][_0x3137ae(0x36b)][_0x3137ae(0x198)]==![]&&devices[_0x25ed5b][_0x3137ae(0x36b)][_0x3137ae(0x2dd)]=='2FA\x20login\x20required')_0x448a52[_0x3137ae(0x17e)](_0x3137ae(0x31e),{'access':devices[_0x25ed5b]['access']}),loginAccess2FA(_0x25ed5b,_0x5372fd);else{if(devices[_0x25ed5b][_0x3137ae(0x36b)][_0x3137ae(0x198)]==![]&&devices[_0x25ed5b][_0x3137ae(0x36b)][_0x3137ae(0x2dd)]==_0x3137ae(0x21c))_0x448a52[_0x3137ae(0x17e)](_0x3137ae(0x31e),{'access':devices[_0x25ed5b][_0x3137ae(0x36b)]});else devices[_0x25ed5b]['access'][_0x3137ae(0x198)]&&devices[_0x25ed5b][_0x3137ae(0x36b)]['reason']==_0x3137ae(0x226)&&(getClientsWithUuid(_0x25ed5b)['forEach'](_0x1807ec=>{setAccess(_0x1807ec);}),logger[_0x3137ae(0x260)](_0x3137ae(0x282)+_0x25ed5b[_0x3137ae(0x216)](-0x8)),setTokenRefresh(_0x25ed5b),setSessionTimeout(_0x3137ae(0x276),_0x25ed5b));}}else logger[_0x3137ae(0x330)](_0x3137ae(0x2ff));}),_0x448a52['on']('reset-password',()=>{resetPassword();}),_0x448a52['on'](_0x510a75(0x183),_0x14b1b7=>{removeClient(_0x448a52['id']);}),_0x9cfa6==_0x510a75(0x190)&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x2da2b6){const _0x5e8ace=_0x14c6b8;if(_0x2da2b6!=_0x5e8ace(0x190)&&config['apiKey']!=''){if(pid[_0x2da2b6])pid[_0x2da2b6][_0x5e8ace(0x2d6)]({'function':_0x5e8ace(0x233),'args':null});}_0x2da2b6!=_0x5e8ace(0x190)&&broadcastToBots(_0x5e8ace(0x302),JSON[_0x5e8ace(0x1f6)](config));}function reloadBotManager(){const _0x1db8a5=_0x14c6b8;getClientsWithBotID('botmanager')[_0x1db8a5(0x35c)](_0x27e5bb=>{const _0x57b596=_0x1db8a5;getSocket(_0x27e5bb['id'])[_0x57b596(0x17e)](_0x57b596(0x31e),{'access':{'allow':![],'reason':_0x57b596(0x25d),'token':null}});});}function getSocket(_0x48a965){const _0x4cbbc5=_0x14c6b8,_0x2051c9=io[_0x4cbbc5(0x173)]['get']('/');return _0x2051c9[_0x4cbbc5(0x2ad)]['get'](_0x48a965);}function setAccess(_0x14d90d){const _0x2e74c4=_0x14c6b8,_0x17f820=getSocket(_0x14d90d['id']),_0xd7ab02=_0x14d90d[_0x2e74c4(0x31c)],_0x2b96e7=_0x14d90d[_0x2e74c4(0x367)];devices[_0xd7ab02][_0x2e74c4(0x36b)]=validateAccess(devices[_0xd7ab02][_0x2e74c4(0x36b)][_0x2e74c4(0x2fb)],_0xd7ab02),logger[_0x2e74c4(0x260)](_0x2e74c4(0x31a)+devices[_0xd7ab02]['access'][_0x2e74c4(0x2dd)]+'\x20|\x20client:\x20...'+_0x14d90d['id'][_0x2e74c4(0x216)](-0x8)+_0x2e74c4(0x2ce)+_0xd7ab02[_0x2e74c4(0x216)](-0x8)),_0x17f820['join'](_0xd7ab02);if(devices[_0xd7ab02][_0x2e74c4(0x36b)]['allow']){_0x17f820[_0x2e74c4(0x1b2)](_0x2b96e7);if(_0x2b96e7=='botmanager')initializeSocketBotManager(_0x17f820);else initializeSocketBot(_0x17f820);initClient(_0x2b96e7);}devices[_0xd7ab02][_0x2e74c4(0x36b)]['token']&&devices[_0xd7ab02][_0x2e74c4(0x36b)]['reason']=='temporary\x20token\x20generated'&&setSessionTimeout(_0x2e74c4(0x224),_0xd7ab02),devices[_0xd7ab02]['access'][_0x2e74c4(0x2fb)]&&devices[_0xd7ab02][_0x2e74c4(0x36b)][_0x2e74c4(0x2dd)]=='2FA\x20login\x20token\x20generated'&&setSessionTimeout(_0x2e74c4(0x276),_0xd7ab02),_0x17f820[_0x2e74c4(0x17e)](_0x2e74c4(0x31e),{'status':_0x14d90d['server'],'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0xd7ab02]['access'],'externalip':devices[_0xd7ab02]['ip'],'publicKey':secure[_0x2e74c4(0x2c8)],'userid':settings[_0x2e74c4(0x398)],'validInstallation':validInstallation}),devices[_0xd7ab02][_0x2e74c4(0x36b)][_0x2e74c4(0x198)]==![]&&devices[_0xd7ab02][_0x2e74c4(0x36b)][_0x2e74c4(0x2dd)]==_0x2e74c4(0x339)&&temporaryAccess2FA(_0xd7ab02,devices[_0xd7ab02]['ip']);}function setSessionTimeout(_0x29d599,_0x5b32ea){const _0x4a6550=_0x14c6b8;let _0x2e368d;if(_0x29d599=='login')_0x2e368d=loginExpiry*0x3c*0x3e8;else _0x2e368d=devices[_0x5b32ea]['telegramIpApproval'][_0x4a6550(0x340)]*0x3c*0x3e8-(new Date()[_0x4a6550(0x346)]()-devices[_0x5b32ea][_0x4a6550(0x29b)][_0x4a6550(0x1ad)]);if(devices[_0x5b32ea]['pidExpireLogin'])clearTimeout(devices[_0x5b32ea][_0x4a6550(0x193)]);devices[_0x5b32ea][_0x4a6550(0x193)]=setTimeout(()=>{const _0x3181bb=_0x4a6550;if(devices[_0x5b32ea][_0x3181bb(0x1ba)])clearTimeout(devices[_0x5b32ea]['pidRefreshToken']);removeSocketListeners(_0x5b32ea),addBlacklist(_0x5b32ea),devices[_0x5b32ea][_0x3181bb(0x29b)]=null,devices[_0x5b32ea]['telegram2FaApproval']=null,devices[_0x5b32ea][_0x3181bb(0x36b)]['token']=null,logger['debug'](_0x3181bb(0x1b5)+_0x5b32ea[_0x3181bb(0x216)](-0x8)),devices[_0x5b32ea]['access']=validateAccess(devices[_0x5b32ea][_0x3181bb(0x36b)]['token'],_0x5b32ea),!(devices[_0x5b32ea]['access'][_0x3181bb(0x198)]&&devices[_0x5b32ea][_0x3181bb(0x36b)]['reason']==_0x3181bb(0x1d8))&&(_0x29d599==_0x3181bb(0x276)?io['to'](_0x5b32ea)['emit'](_0x3181bb(0x31e),{'access':{'allow':![],'reason':_0x3181bb(0x1cd),'token':null}}):io['to'](_0x5b32ea)[_0x3181bb(0x17e)](_0x3181bb(0x31e),{'access':{'allow':![],'reason':'temporary\x20access\x20timeout','token':null}})),devices[_0x5b32ea][_0x3181bb(0x36b)]['token']=null;},_0x2e368d);}function setTokenRefresh(_0x1e40ec){const _0x1f918f=_0x14c6b8;if(devices[_0x1e40ec][_0x1f918f(0x1ba)])clearTimeout(devices[_0x1e40ec]['pidRefreshToken']);devices[_0x1e40ec][_0x1f918f(0x1ba)]=setTimeout(()=>{const _0x5b449d=_0x1f918f;getClientsWithUuid(_0x1e40ec)[_0x5b449d(0x2b4)]!=0x0?(devices[_0x1e40ec][_0x5b449d(0x36b)]=refreshToken(_0x1e40ec),io['to'](_0x1e40ec)[_0x5b449d(0x17e)]('status',{'status':_0x5b449d(0x291),'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x1e40ec][_0x5b449d(0x36b)],'externalip':devices[_0x1e40ec]['ip'],'publicKey':secure['publicKey'],'validInstallation':validInstallation}),setTokenRefresh(_0x1e40ec)):clearTimeout(devices[_0x1e40ec][_0x5b449d(0x1ba)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x233c13){const _0x44db2b=_0x14c6b8,_0x10da89=getClient(_0x233c13['id'])[_0x44db2b(0x31c)];_0x233c13['emit']('bots',config),_0x233c13['emit'](_0x44db2b(0x38a),cleanSettings()),_0x233c13['on']('add-bot',_0x576636=>{const _0x301c72=_0x44db2b;if(validateAccess(_0x576636,_0x10da89)[_0x301c72(0x198)])addBot();else logger[_0x301c72(0x330)](_0x301c72(0x246));}),_0x233c13['on']('update-bot',(_0x3a2649,_0x1bf2ea)=>{const _0x3fae21=_0x44db2b;if(validateAccess(_0x1bf2ea,_0x10da89)['allow'])toggleBot(_0x3a2649[_0x3fae21(0x270)],_0x3a2649[_0x3fae21(0x31e)],_0x3a2649[_0x3fae21(0x24c)]);else logger[_0x3fae21(0x330)]('Unauthorized\x20attempt\x20to\x20update\x20bot');}),_0x233c13['on'](_0x44db2b(0x23f),(_0x517420,_0x4ed179)=>{const _0x4b5f07=_0x44db2b;if(validateAccess(_0x4ed179,_0x10da89)[_0x4b5f07(0x198)])toggleBotMode(_0x517420);else logger[_0x4b5f07(0x330)]('Unauthorized\x20attempt\x20to\x20update\x20bot');}),_0x233c13['on'](_0x44db2b(0x324),(_0xaca03,_0x5aa358)=>{const _0x48f5c7=_0x44db2b;if(validateAccess(_0x5aa358,_0x10da89)[_0x48f5c7(0x198)])deleteBot(_0xaca03);else logger[_0x48f5c7(0x330)](_0x48f5c7(0x25e));}),_0x233c13['on'](_0x44db2b(0x284),(_0x4708d1,_0x337393)=>{const _0x3f05a2=_0x44db2b;if(validateAccess(_0x337393,_0x10da89)[_0x3f05a2(0x198)])storeSettings(_0x4708d1,!![]);else logger['full'](_0x3f05a2(0x244));}),_0x233c13['on'](_0x44db2b(0x24e),_0x362195=>{const _0x225685=_0x44db2b;if(validateAccess(_0x362195,_0x10da89)['allow'])updateBB(_0x225685(0x2e4));else logger['full'](_0x225685(0x1b8));}),_0x233c13['on'](_0x44db2b(0x2f7),_0x2b9cd6=>{const _0x4ada11=_0x44db2b;if(validateAccess(_0x2b9cd6,_0x10da89)[_0x4ada11(0x198)])updateBB(_0x4ada11(0x29d));else logger[_0x4ada11(0x330)](_0x4ada11(0x186));}),_0x233c13['on'](_0x44db2b(0x305),_0x1a0c79=>{const _0x49d7cf=_0x44db2b;if(validateAccess(_0x1a0c79,_0x10da89)[_0x49d7cf(0x198)]){const _0x468a4c=getClient(_0x233c13['id']);if(_0x468a4c)getBackupFiles(_0x468a4c[_0x49d7cf(0x31c)]);else logger[_0x49d7cf(0x330)](_0x49d7cf(0x1df));}else logger[_0x49d7cf(0x330)]('Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files');}),_0x233c13['on']('restore-backup-file',(_0x5325ab,_0xbfb782)=>{const _0x5a206f=_0x44db2b;if(validateAccess(_0xbfb782,_0x10da89)[_0x5a206f(0x198)])restoreBackupFile(_0x5325ab);else logger[_0x5a206f(0x330)](_0x5a206f(0x18a));}),_0x233c13['on'](_0x44db2b(0x252),_0x473883=>{const _0x2ca8b0=_0x44db2b;if(validateAccess(_0x473883,_0x10da89)[_0x2ca8b0(0x198)])getMessages();else logger[_0x2ca8b0(0x330)](_0x2ca8b0(0x1c5));}),_0x233c13['on']('confirm-message',(_0x3172ac,_0xf4417e)=>{const _0x3123eb=_0x44db2b;if(validateAccess(_0xf4417e,_0x10da89)[_0x3123eb(0x198)])confirmMessage(_0x3172ac);else logger['full'](_0x3123eb(0x349));}),_0x233c13['on']('logout',_0x52eb2e=>{const _0x930ed3=_0x44db2b;if(validateAccess(_0x52eb2e,_0x10da89)[_0x930ed3(0x198)]){if(devices[_0x10da89][_0x930ed3(0x1ba)])clearTimeout(devices[_0x10da89]['pidRefreshToken']);if(devices[_0x10da89][_0x930ed3(0x193)])clearTimeout(devices[_0x10da89]['pidExpireLogin']);removeSocketListeners(getClient(_0x233c13['id'])[_0x930ed3(0x31c)]),addBlacklist(_0x10da89),devices[_0x10da89][_0x930ed3(0x29b)]=null,devices[_0x10da89][_0x930ed3(0x348)]=null,devices[_0x10da89][_0x930ed3(0x36b)][_0x930ed3(0x2fb)]=null,logger[_0x930ed3(0x260)]('Logged\x20out\x20user\x20...'+_0x10da89[_0x930ed3(0x216)](-0x8)),io['to'](getClient(_0x233c13['id'])[_0x930ed3(0x31c)])['emit']('status',{'access':{'allow':![],'reason':_0x930ed3(0x211),'token':null}});}else logger['full'](_0x930ed3(0x27d));});}function initializeSocketBot(_0x2a15c8){const _0x4660c5=_0x14c6b8,_0x3946eb=getClient(_0x2a15c8['id'])[_0x4660c5(0x367)],_0x5b480b=getClient(_0x2a15c8['id'])['uuid'];_0x2a15c8['on'](_0x4660c5(0x1b1),(_0x31b123,_0x2b0083)=>{const _0xe064b5=_0x4660c5;if(validateAccess(_0x2b0083,_0x5b480b)['allow']){if(pid[_0x3946eb])pid[_0x3946eb][_0xe064b5(0x2d6)]({'function':_0xe064b5(0x1c9),'args':_0x31b123});}else logger[_0xe064b5(0x330)](_0xe064b5(0x280));}),_0x2a15c8['on'](_0x4660c5(0x36d),(_0x73c9a0,_0x254d2c)=>{const _0x40716a=_0x4660c5;if(validateAccess(_0x254d2c,_0x5b480b)[_0x40716a(0x198)]){if(pid[_0x3946eb])pid[_0x3946eb][_0x40716a(0x2d6)]({'function':_0x40716a(0x2a4),'args':_0x73c9a0});}else logger[_0x40716a(0x330)]('Unauthorized\x20attempt\x20to\x20delete\x20alerts');}),_0x2a15c8['on'](_0x4660c5(0x240),(_0x5dbf5f,_0x22577a)=>{const _0x406ef2=_0x4660c5;if(validateAccess(_0x22577a,_0x5b480b)[_0x406ef2(0x198)]){if(pid[_0x3946eb])pid[_0x3946eb]['send']({'function':_0x406ef2(0x2de),'args':_0x5dbf5f});}else logger['full'](_0x406ef2(0x353));}),_0x2a15c8['on'](_0x4660c5(0x219),(_0x43399d,_0x3f9f81)=>{const _0x48bdcd=_0x4660c5;if(validateAccess(_0x3f9f81,_0x5b480b)[_0x48bdcd(0x198)]){if(pid[_0x3946eb])pid[_0x3946eb]['send']({'function':_0x48bdcd(0x235),'args':_0x43399d});}else logger[_0x48bdcd(0x330)](_0x48bdcd(0x1f4));}),_0x2a15c8['on'](_0x4660c5(0x34c),(_0x2feba2,_0x42f9ce)=>{const _0xe6f0d0=_0x4660c5;if(validateAccess(_0x42f9ce,_0x5b480b)[_0xe6f0d0(0x198)]){if(pid[_0x3946eb])pid[_0x3946eb][_0xe6f0d0(0x2d6)]({'function':_0xe6f0d0(0x192),'args':_0x2feba2});}else logger['full'](_0xe6f0d0(0x256));}),_0x2a15c8['on']('store-fiat',(_0x4456af,_0xf5a632)=>{const _0x1915fb=_0x4660c5;if(validateAccess(_0xf5a632,_0x5b480b)[_0x1915fb(0x198)]){if(pid[_0x3946eb])pid[_0x3946eb][_0x1915fb(0x2d6)]({'function':_0x1915fb(0x170),'args':_0x4456af});}else logger[_0x1915fb(0x330)](_0x1915fb(0x2c0));}),_0x2a15c8['on'](_0x4660c5(0x215),_0x4cad66=>{const _0x1e882e=_0x4660c5;if(validateAccess(_0x4cad66,_0x5b480b)[_0x1e882e(0x198)]){if(pid[_0x3946eb])pid[_0x3946eb][_0x1e882e(0x2d6)]({'function':_0x1e882e(0x331),'args':null});}else logger[_0x1e882e(0x330)](_0x1e882e(0x317));}),_0x2a15c8['on'](_0x4660c5(0x355),_0x16525d=>{const _0x5615ed=_0x4660c5;if(validateAccess(_0x16525d,_0x5b480b)['allow']){if(pid[_0x3946eb])pid[_0x3946eb][_0x5615ed(0x2d6)]({'function':'getStartingBalances','args':null});}else logger['full'](_0x5615ed(0x28e));}),_0x2a15c8['on'](_0x4660c5(0x1d6),(_0x4ecea5,_0x245efb)=>{const _0x36d305=_0x4660c5;if(validateAccess(_0x245efb,_0x5b480b)[_0x36d305(0x198)]){if(pid[_0x3946eb])pid[_0x3946eb][_0x36d305(0x2d6)]({'function':_0x36d305(0x1b4),'args':_0x4ecea5});}else logger[_0x36d305(0x330)](_0x36d305(0x36a));}),_0x2a15c8['on']('cancel-loading',_0x2f1e2c=>{const _0x5e2d4a=_0x4660c5;if(validateAccess(_0x2f1e2c,_0x5b480b)[_0x5e2d4a(0x198)]){if(pid[_0x3946eb])pid[_0x3946eb]['send']({'function':_0x5e2d4a(0x37a),'args':null});}else logger[_0x5e2d4a(0x330)](_0x5e2d4a(0x1fe));}),_0x2a15c8['on']('show-config',_0x449b31=>{const _0x22cc96=_0x4660c5;if(validateAccess(_0x449b31,_0x5b480b)['allow']){if(pid[_0x3946eb])pid[_0x3946eb][_0x22cc96(0x2d6)]({'function':_0x22cc96(0x236),'args':null});}else logger['full'](_0x22cc96(0x24d));}),_0x2a15c8['on'](_0x4660c5(0x24e),_0x48946d=>{const _0x50cbcd=_0x4660c5;if(validateAccess(_0x48946d,_0x5b480b)[_0x50cbcd(0x198)])updateBB('update');else logger['full'](_0x50cbcd(0x1b8));}),_0x2a15c8['on'](_0x4660c5(0x252),_0x499dab=>{const _0x43a053=_0x4660c5;if(validateAccess(_0x499dab,_0x5b480b)[_0x43a053(0x198)])getMessages();else logger[_0x43a053(0x330)](_0x43a053(0x1c5));}),_0x2a15c8['on'](_0x4660c5(0x1fb),(_0x2a926e,_0x2ebf12)=>{const _0x6dbc36=_0x4660c5;if(validateAccess(_0x2ebf12,_0x5b480b)[_0x6dbc36(0x198)])confirmMessage(_0x2a926e);else logger[_0x6dbc36(0x330)]('Unauthorized\x20attempt\x20to\x20confirm\x20message');}),_0x2a15c8['on'](_0x4660c5(0x1ed),_0x3817f3=>{const _0x3f495d=_0x4660c5;if(validateAccess(_0x3817f3,_0x5b480b)['allow']){if(devices[_0x5b480b][_0x3f495d(0x1ba)])clearTimeout(devices[_0x5b480b][_0x3f495d(0x1ba)]);if(devices[_0x5b480b][_0x3f495d(0x193)])clearTimeout(devices[_0x5b480b][_0x3f495d(0x193)]);removeSocketListeners(getClient(_0x2a15c8['id'])['uuid']),addBlacklist(_0x5b480b),devices[_0x5b480b][_0x3f495d(0x29b)]=null,devices[_0x5b480b]['telegram2FaApproval']=null,devices[_0x5b480b]['access'][_0x3f495d(0x2fb)]=null,logger['debug'](_0x3f495d(0x2ab)+_0x5b480b[_0x3f495d(0x216)](-0x8)),io['to'](getClient(_0x2a15c8['id'])[_0x3f495d(0x31c)])[_0x3f495d(0x17e)](_0x3f495d(0x31e),{'access':{'allow':![],'reason':_0x3f495d(0x211),'token':null}});}else logger['full']('Unauthorized\x20attempt\x20to\x20log\x20out');});}function removeSocketListeners(_0x11e21e){const _0x40ce1a=_0x14c6b8;getClientsWithUuid(_0x11e21e)[_0x40ce1a(0x35c)](_0x1dd12f=>{const _0x26311a=_0x40ce1a;getSocket(_0x1dd12f['id'])[_0x26311a(0x26e)]();});}function cleanSettings(){const _0x2f4662=_0x14c6b8;let _0x32e71f=settings;return settings[_0x2f4662(0x2df)]&&settings[_0x2f4662(0x2df)]!=''&&(_0x32e71f={..._0x32e71f,'telegramToken':_0x2f4662(0x1fc)}),settings[_0x2f4662(0x369)]&&settings['bbPassword']!=''&&(_0x32e71f={..._0x32e71f,'bbPassword':_0x2f4662(0x1fc)}),settings[_0x2f4662(0x19b)]&&settings['marketcapApi']!=''&&(_0x32e71f={..._0x32e71f,'marketcapApi':_0x2f4662(0x1fc)}),(settings['bbPassword']&&settings[_0x2f4662(0x369)]=='***'||settings[_0x2f4662(0x2df)]&&settings[_0x2f4662(0x2df)]=='***'||settings['marketcapApi']&&settings[_0x2f4662(0x19b)]==_0x2f4662(0x2d8))&&(_0x32e71f={..._0x32e71f,'restored':{'password':settings[_0x2f4662(0x369)]==_0x2f4662(0x2d8),'telegram':settings[_0x2f4662(0x2df)]==_0x2f4662(0x2d8),'marketcap':settings['marketcapApi']==_0x2f4662(0x2d8)}}),_0x32e71f;}async function updateBB(_0x415de2){const _0x3da0db=_0x14c6b8;await backupConfigFiles(),installingUpdate=!![],config[_0x3da0db(0x35c)](_0xcac810=>{const _0x988d8d=_0x3da0db;restartBot(_0xcac810[_0x988d8d(0x270)]);});if(_0x415de2==_0x3da0db(0x2e4))process[_0x3da0db(0x2d6)]({'update':!![],'environment':environment},_0x584b88=>{});else _0x415de2==_0x3da0db(0x29d)&&process[_0x3da0db(0x2d6)]({'reinstall':!![],'environment':environment},_0x817b01=>{});}function startBot(_0x53e4ab,_0x27e61a,_0x4cb313){const _0x186a94=_0x14c6b8;if(debugging)_0x53e4ab['push']('-d');if(recreate)_0x53e4ab[_0x186a94(0x1b9)]('-r');let _0x33527f=![];const _0x25fb66=_0x53e4ab[0x0];_0x27e61a={..._0x27e61a,'stdio':[_0x186a94(0x28c),_0x186a94(0x28c),_0x186a94(0x28c),_0x186a94(0x368)]},pid[_0x25fb66]=childProcess[_0x186a94(0x2fe)](botfile,_0x53e4ab,_0x27e61a),pid[_0x25fb66]['on'](_0x186a94(0x387),_0x216273=>{const _0xb64dc1=_0x186a94;switch(Object[_0xb64dc1(0x338)](_0x216273)[0x0]){case _0xb64dc1(0x1e6):updateBotName(_0x25fb66,_0x216273[_0xb64dc1(0x1e6)]);break;case _0xb64dc1(0x1c4):updateBotManager();break;case _0xb64dc1(0x31e):updateStatus(_0x25fb66,_0x216273['status']);break;case _0xb64dc1(0x24c):updateLive(_0x25fb66,_0x216273[_0xb64dc1(0x24c)]);break;case'started':updateLive(_0x25fb66,_0x216273[_0xb64dc1(0x294)]),io['to'](_0x25fb66)[_0xb64dc1(0x17e)](_0xb64dc1(0x31e),{'access':{'allow':![],'reason':'reload','token':null}});break;case _0xb64dc1(0x26c):_0x216273['stop']==_0xb64dc1(0x347)&&restartBot(_0x25fb66);_0x216273['stop']==_0xb64dc1(0x323)&&toggleBot(_0x25fb66,_0xb64dc1(0x374),_0xb64dc1(0x1bf));break;case _0xb64dc1(0x1af):sendTelegramBot(_0x25fb66,_0x216273[_0xb64dc1(0x1af)]);break;case _0xb64dc1(0x1ca):sendTelegramMsg(_0x216273[_0xb64dc1(0x1ca)]);break;case _0xb64dc1(0x2dc):io['to'](_0x25fb66)[_0xb64dc1(0x17e)](_0x216273['function'],_0x216273[_0xb64dc1(0x1a7)]);break;}}),pid[_0x25fb66]['on']('error',function(_0x4628bf){if(_0x33527f)return;_0x33527f=!![],_0x4cb313(_0x4628bf);}),pid[_0x25fb66]['on'](_0x186a94(0x303),async function(_0x2bb285){const _0x1bee8c=_0x186a94;if(terminating)return;if(installingUpdate){io['close']();return;}if(_0x33527f)return;_0x33527f=!![],_0x4cb313(null);const _0x3cea14=dbConfig['get'](_0x1bee8c(0x302))[_0x1bee8c(0x287)]({'botID':_0x25fb66})[_0x1bee8c(0x354)]();_0x3cea14&&(_0x3cea14[_0x1bee8c(0x31e)]==_0x1bee8c(0x326)||_0x3cea14[_0x1bee8c(0x31e)]==_0x1bee8c(0x1ab))&&(await sleep(0x3e8),updateLive(_0x25fb66,_0x1bee8c(0x1bf)),logger['full']('Restarting\x20Bot\x20'+_0x25fb66),startBot([_0x25fb66,userID],{'cwd':bbpath},function(_0x1a4be5){const _0x319672=_0x1bee8c;if(_0x1a4be5)logger[_0x319672(0x330)](_0x1a4be5);}));});}function stopBot(_0x24076b){const _0x24f86b=_0x14c6b8;getClientsWithBotID(_0x24076b)[_0x24f86b(0x35c)](_0x18f068=>{const _0x2029d4=_0x24f86b;getSocket(_0x18f068['id'])[_0x2029d4(0x183)](!![]),removeClient(_0x18f068['id']);}),pid[_0x24076b]&&(pid[_0x24076b]['kill'](),pid[_0x24076b]=null);}function stopAllBots(){const _0x2856a0=_0x14c6b8;terminating=!![];const _0x2d733e=getEnabledBots();_0x2d733e[_0x2856a0(0x35c)](_0x4f38ed=>{stopBot(_0x4f38ed['botID']);});}function restartBot(_0x19116f){const _0x2642f5=_0x14c6b8;if(pid[_0x19116f])pid[_0x19116f][_0x2642f5(0x323)]();}function addBot(){const _0x20f310=_0x14c6b8;let _0x3ba71b;for(let _0x52fcff=0x1;_0x52fcff<0x3e9;_0x52fcff++){_0x3ba71b=_0x52fcff[_0x20f310(0x2da)]()['padStart'](0x3,'0');let _0x43f369=config['find'](_0x2edd19=>_0x2edd19[_0x20f310(0x270)]==_0x3ba71b);if(!_0x43f369)break;}if(_0x3ba71b===_0x20f310(0x395)){logger['full'](_0x20f310(0x217));return;}logger[_0x20f310(0x330)](_0x20f310(0x371)+_0x3ba71b),dbConfig[_0x20f310(0x222)]('bots')[_0x20f310(0x1b9)]({'botID':_0x3ba71b,'botname':_0x20f310(0x38f)+_0x3ba71b,'status':_0x20f310(0x1ab),'live':''})[_0x20f310(0x1bd)](),startBot([_0x3ba71b,userID],{'cwd':bbpath},function(_0x2e4405){const _0x543fd2=_0x20f310;if(_0x2e4405)logger[_0x543fd2(0x330)](_0x2e4405);}),config=getConfiguration(),io['to'](_0x20f310(0x190))['emit'](_0x20f310(0x302),config),broadcastToBots('bots',JSON[_0x20f310(0x1f6)](config));}function _0x3d8c(_0xcc4d26,_0x2ec2cc){const _0x17465c=_0x4102();return _0x3d8c=function(_0xacc00b,_0x254e38){_0xacc00b=_0xacc00b-0x16f;let _0x4102db=_0x17465c[_0xacc00b];return _0x4102db;},_0x3d8c(_0xcc4d26,_0x2ec2cc);}function deleteBot(_0x52bb8c){const _0x4e1ecd=_0x14c6b8;getClientsWithBotID(_0x52bb8c)[_0x4e1ecd(0x35c)](_0x35665d=>{const _0x4d04dd=_0x4e1ecd;getSocket(_0x35665d['id'])[_0x4d04dd(0x183)](!![]),removeClient(_0x35665d['id']);}),dbConfig['get']('bots')[_0x4e1ecd(0x2f3)]({'botID':_0x52bb8c})[_0x4e1ecd(0x1bd)](),logger['full']('Deleted\x20Bot\x20'+_0x52bb8c),stopBot(_0x52bb8c);try{if(fs[_0x4e1ecd(0x380)](path[_0x4e1ecd(0x1b2)](configpath,'bot-'+_0x52bb8c+'-config.json')))fs[_0x4e1ecd(0x2ac)](path[_0x4e1ecd(0x1b2)](configpath,'bot-'+_0x52bb8c+'-config.json'));if(fs[_0x4e1ecd(0x380)](path[_0x4e1ecd(0x1b2)](configpath,_0x4e1ecd(0x220)+_0x52bb8c+_0x4e1ecd(0x2b9))))fs[_0x4e1ecd(0x2ac)](path[_0x4e1ecd(0x1b2)](configpath,_0x4e1ecd(0x220)+_0x52bb8c+'-events.json'));if(fs['existsSync'](path[_0x4e1ecd(0x1b2)](configpath,_0x4e1ecd(0x220)+_0x52bb8c+_0x4e1ecd(0x18c))))fs[_0x4e1ecd(0x2ac)](path[_0x4e1ecd(0x1b2)](configpath,'bot-'+_0x52bb8c+'-performance.json'));if(fs[_0x4e1ecd(0x380)](path[_0x4e1ecd(0x1b2)](configpath,_0x4e1ecd(0x220)+_0x52bb8c+'-results.json')))fs[_0x4e1ecd(0x2ac)](path[_0x4e1ecd(0x1b2)](configpath,_0x4e1ecd(0x220)+_0x52bb8c+_0x4e1ecd(0x1b3)));}catch(_0x4023af){if(_0x4023af)logger[_0x4e1ecd(0x330)](_0x4e1ecd(0x1f5),_0x4023af);}config=getConfiguration(),io['to']('botmanager')[_0x4e1ecd(0x17e)](_0x4e1ecd(0x302),config),broadcastToBots(_0x4e1ecd(0x302),JSON[_0x4e1ecd(0x1f6)](config));}function toggleBot(_0x16b8a7,_0x396937,_0x36b0e0){const _0x5cfbe8=_0x14c6b8;dbConfig['get'](_0x5cfbe8(0x302))[_0x5cfbe8(0x287)]({'botID':_0x16b8a7})[_0x5cfbe8(0x188)]({'status':_0x396937})[_0x5cfbe8(0x188)]({'live':_0x36b0e0})[_0x5cfbe8(0x1bd)]();if(_0x396937==_0x5cfbe8(0x326)||_0x396937==_0x5cfbe8(0x1ab))logger[_0x5cfbe8(0x330)](_0x5cfbe8(0x1aa)+_0x16b8a7),startBot([_0x16b8a7,userID],{'cwd':bbpath},function(_0x4269ac){const _0x37e936=_0x5cfbe8;if(_0x4269ac)logger[_0x37e936(0x330)](_0x4269ac);});else(_0x396937==_0x5cfbe8(0x374)||_0x396937=='new-disabled')&&(logger[_0x5cfbe8(0x330)]('Disabled\x20Bot\x20'+_0x16b8a7),stopBot(_0x16b8a7));config=getConfiguration(),io['to'](_0x5cfbe8(0x190))[_0x5cfbe8(0x17e)](_0x5cfbe8(0x302),config),broadcastToBots(_0x5cfbe8(0x302),JSON['stringify'](config));}function toggleStatus(_0x13781d){const _0x427de8=_0x14c6b8;let _0x49434b=dbConfig[_0x427de8(0x222)](_0x427de8(0x302))[_0x427de8(0x287)]({'botID':_0x13781d})[_0x427de8(0x354)](),_0x3d7546;if(_0x49434b[_0x427de8(0x31e)]===_0x427de8(0x326))_0x3d7546=_0x427de8(0x374);else{if(_0x49434b[_0x427de8(0x31e)]===_0x427de8(0x1ab))_0x3d7546=_0x427de8(0x18f);else{if(_0x49434b[_0x427de8(0x31e)]===_0x427de8(0x18f))_0x3d7546=_0x427de8(0x1ab);else{if(_0x49434b[_0x427de8(0x31e)]===_0x427de8(0x374))_0x3d7546=_0x427de8(0x326);}}}return _0x3d7546;}function updateStatus(_0x167416,_0x247b32){const _0x56e9e2=_0x14c6b8;dbConfig['get'](_0x56e9e2(0x302))[_0x56e9e2(0x287)]({'botID':_0x167416})[_0x56e9e2(0x188)]({'status':_0x247b32})['write'](),config=getConfiguration(),io['to']('botmanager')[_0x56e9e2(0x17e)](_0x56e9e2(0x302),config),broadcastToBots(_0x56e9e2(0x302),JSON[_0x56e9e2(0x1f6)](config));}function updateLive(_0x1e81e5,_0x3c693a){const _0x54413a=_0x14c6b8;dbConfig[_0x54413a(0x222)](_0x54413a(0x302))['find']({'botID':_0x1e81e5})[_0x54413a(0x188)]({'live':_0x3c693a})[_0x54413a(0x1bd)](),config=getConfiguration(),io['to']('botmanager')[_0x54413a(0x17e)](_0x54413a(0x302),config),broadcastToBots(_0x54413a(0x302),JSON['stringify'](config));}function updateBotName(_0x2eb849,_0xd244ed){const _0x197164=_0x14c6b8;dbConfig[_0x197164(0x222)](_0x197164(0x302))[_0x197164(0x287)]({'botID':_0x2eb849})[_0x197164(0x188)]({'botname':_0xd244ed})['write'](),config=getConfiguration(),io['to']('botmanager')[_0x197164(0x17e)](_0x197164(0x302),config),broadcastToBots(_0x197164(0x302),JSON['stringify'](config));}function updateBotManager(){const _0x1f2af3=_0x14c6b8;config=getConfiguration(),io['to'](_0x1f2af3(0x190))[_0x1f2af3(0x17e)](_0x1f2af3(0x302),config),broadcastToBots(_0x1f2af3(0x302),JSON[_0x1f2af3(0x1f6)](config));}function toggleBotMode(_0x29867c){const _0x4f31af=_0x14c6b8;if(pid[_0x29867c])pid[_0x29867c][_0x4f31af(0x2d6)]({'function':_0x4f31af(0x23a),'args':null});else{const _0x118cbc=configpath+_0x4f31af(0x220)+_0x29867c+_0x4f31af(0x175),_0x518e14=fs[_0x4f31af(0x351)](_0x118cbc),_0xce3019=JSON[_0x4f31af(0x337)](_0x518e14),_0x342673=_0xce3019['bot'][0x0]['headless'];_0xce3019[_0x4f31af(0x367)][0x0][_0x4f31af(0x2c1)]=!_0x342673;const _0x34fc93=JSON[_0x4f31af(0x1f6)](_0xce3019,null,0x2);fs[_0x4f31af(0x1d0)](_0x118cbc,_0x34fc93),config=getConfiguration(),io['to']('botmanager')['emit'](_0x4f31af(0x302),config),broadcastToBots(_0x4f31af(0x302),JSON['stringify'](config));}}function validateTelegram(_0x4ff5c4){const _0x57b4d0=_0x14c6b8;if(_0x4ff5c4[_0x57b4d0(0x312)][_0x57b4d0(0x20e)]!=settings[_0x57b4d0(0x178)]&&'@'+_0x4ff5c4[_0x57b4d0(0x312)][_0x57b4d0(0x20e)]!=settings['telegramUsername']||_0x4ff5c4['chat']['id']!=settings[_0x57b4d0(0x20d)])return sendTelegram(_0x4ff5c4['chat']['id'],_0x57b4d0(0x195),{'parse_mode':'HTML'}),![];return!![];}async function initTelegram(){const _0x4765fe=_0x14c6b8;tgBot&&(await tgBot['stop'](),await sleep(0x7d0));tgBot=new Telegraf(settings[_0x4765fe(0x2df)]);let _0x14c8ca=_0x4765fe(0x1ce);_0x14c8ca+='\x0a',_0x14c8ca+=_0x4765fe(0x1ef),_0x14c8ca+='/disable\x20-\x20disable\x20notifications\x0a',_0x14c8ca+=_0x4765fe(0x1c1),_0x14c8ca+=_0x4765fe(0x21f),_0x14c8ca+='/on\x20-\x20start\x20bot(s)\x0a',_0x14c8ca+=_0x4765fe(0x1ac),_0x14c8ca+=_0x4765fe(0x1cc),_0x14c8ca+='/names\x20-\x20show\x20bot\x20names\x0a',_0x14c8ca+=_0x4765fe(0x209),_0x14c8ca+=_0x4765fe(0x208),_0x14c8ca+=_0x4765fe(0x25c),_0x14c8ca+=_0x4765fe(0x385),_0x14c8ca+=_0x4765fe(0x290),_0x14c8ca+='/update\x20-\x20update\x20Balance\x20Bot\x0a',_0x14c8ca+=_0x4765fe(0x25b),_0x14c8ca+=_0x4765fe(0x360);let _0x54b149=_0x4765fe(0x2ee);_0x54b149+='\x0a',_0x54b149+=_0x14c8ca,tgBot[_0x4765fe(0x33d)]((_0x5ea4b4,_0x68b98)=>{const _0x453f6f=_0x4765fe;logger[_0x453f6f(0x333)](getTimeStamp()+_0x453f6f(0x185)),logger[_0x453f6f(0x260)](_0x453f6f(0x2ae),_0x5ea4b4);}),tgBot[_0x4765fe(0x182)](async(_0x4874bf,_0x34305a)=>{const _0x4a0f2f=_0x4765fe;if(settings[_0x4a0f2f(0x20d)]||_0x4874bf['update'][_0x4a0f2f(0x387)][_0x4a0f2f(0x204)]!='/start'){if(!validateTelegram(_0x4874bf))return;}_0x34305a();}),tgBot[_0x4765fe(0x315)](_0x4765fe(0x38d),async _0x35e9e8=>{const _0x2e95a1=_0x4765fe;if(_0x35e9e8[_0x2e95a1(0x312)][_0x2e95a1(0x20e)]==settings['telegramUsername']||'@'+_0x35e9e8[_0x2e95a1(0x312)][_0x2e95a1(0x20e)]==settings['telegramUsername']){if(!settings['telegramChatId'])updateSetting('telegramChatId',_0x35e9e8[_0x2e95a1(0x26d)]['id']);else{if(!validateTelegram(_0x35e9e8))return;}}else{if(!validateTelegram(_0x35e9e8))return;}updateSetting(_0x2e95a1(0x18d),!![]),await sendTelegram(_0x35e9e8[_0x2e95a1(0x26d)]['id'],_0x54b149);}),tgBot[_0x4765fe(0x315)](_0x4765fe(0x2f9),async _0x440df9=>{const _0x2c53f3=_0x4765fe;updateSetting(_0x2c53f3(0x18d),!![]),await sendTelegram(_0x440df9[_0x2c53f3(0x26d)]['id'],_0x2c53f3(0x350));}),tgBot['command']('disable',async _0x32619f=>{const _0x4a18ca=_0x4765fe;await sendTelegram(_0x32619f['chat']['id'],_0x4a18ca(0x311)),updateSetting(_0x4a18ca(0x18d),![]);}),tgBot[_0x4765fe(0x315)](_0x4765fe(0x241),async _0x39f2dd=>{const _0x21572c=_0x4765fe,_0xa9d44c=Markup[_0x21572c(0x359)]([Markup['button'][_0x21572c(0x21d)](_0x21572c(0x20f),'config_orders'),Markup[_0x21572c(0x1a6)][_0x21572c(0x21d)](_0x21572c(0x2c7),_0x21572c(0x2d9)),Markup[_0x21572c(0x1a6)][_0x21572c(0x21d)](_0x21572c(0x264),'config_all')]);_0x39f2dd[_0x21572c(0x301)]('Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?',_0xa9d44c);}),tgBot['action'](_0x4765fe(0x39a),async _0x19cedf=>{const _0xc9d43d=_0x4765fe;_0x19cedf[_0xc9d43d(0x2c6)](),updateSetting('telegramEvents',_0xc9d43d(0x2e8)),updateSetting(_0xc9d43d(0x18d),!![]),await sendTelegram(_0x19cedf[_0xc9d43d(0x26d)]['id'],_0xc9d43d(0x1a3));}),tgBot['action'](_0x4765fe(0x2d9),async _0x4e15b0=>{const _0x2a5650=_0x4765fe;_0x4e15b0['editMessageReplyMarkup'](),updateSetting('telegramEvents',_0x2a5650(0x250)),updateSetting(_0x2a5650(0x18d),!![]),await sendTelegram(_0x4e15b0[_0x2a5650(0x26d)]['id'],_0x2a5650(0x21e));}),tgBot[_0x4765fe(0x297)](_0x4765fe(0x31b),async _0x118383=>{const _0x56daf7=_0x4765fe;_0x118383[_0x56daf7(0x2c6)](),updateSetting('telegramEvents',_0x56daf7(0x33f)),updateSetting(_0x56daf7(0x18d),!![]),await sendTelegram(_0x118383[_0x56daf7(0x26d)]['id'],'Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications');}),tgBot[_0x4765fe(0x315)](_0x4765fe(0x31e),async _0x1ec4d6=>{const _0xb83942=_0x4765fe,_0x4c3439=getBotsWithMode();let _0x49945c=_0xb83942(0x28a);config[_0xb83942(0x35c)](_0x5071bc=>{const _0x5de49e=_0xb83942,_0x61ef26=_0x4c3439[_0x5de49e(0x287)](_0x361d79=>_0x361d79['botID']==_0x5071bc[_0x5de49e(0x270)])['mode'];_0x49945c+=_0x5de49e(0x38f)+_0x5071bc['botID']+':\x20'+_0x5071bc[_0x5de49e(0x31e)]+_0x5de49e(0x2a2)+_0x61ef26+_0x5de49e(0x2a2)+_0x5071bc[_0x5de49e(0x24c)]+'\x0a';}),_0x49945c+='\x0a',_0x49945c+=_0xb83942(0x1b7),_0x49945c+=!settings[_0xb83942(0x18d)]?'Notifications\x20disabled\x0a':_0xb83942(0x36f),_0x49945c+=settings[_0xb83942(0x18d)]?settings['telegramEvents']==_0xb83942(0x33f)?'Notifications\x20types:\x20orders\x20and\x20alerts\x0a':_0xb83942(0x1e0)+settings[_0xb83942(0x345)]+'\x20only\x0a':'',await sendTelegram(_0x1ec4d6[_0xb83942(0x26d)]['id'],_0x49945c,{'parse_mode':'HTML'});}),tgBot[_0x4765fe(0x315)](_0x4765fe(0x347),async _0x19ab8e=>{const _0x3bf75f=_0x4765fe,_0x2c3707=getEnabledBots();if(_0x2c3707[_0x3bf75f(0x2b4)]==0x0)await sendTelegram(_0x19ab8e['chat']['id'],_0x3bf75f(0x1c7));else{if(_0x2c3707[_0x3bf75f(0x2b4)]>0x1)_0x2c3707[_0x3bf75f(0x1b9)]({'botID':_0x3bf75f(0x33f)});let _0xa4cdc7=[],_0x574d44=[];const _0x1ee931=_0x2c3707['length']%0x4==0x0||_0x2c3707[_0x3bf75f(0x2b4)]%0x4==0x3||_0x2c3707['length']%0x3==0x1?0x4:0x3;let _0x4c4862=0x0;_0x2c3707[_0x3bf75f(0x35c)]((_0x59c52e,_0x3bb6b0)=>{const _0x67787b=_0x3bf75f;if(_0x3bb6b0%_0x1ee931==0x0)_0x574d44=[];_0x574d44[_0x67787b(0x1b9)](Markup[_0x67787b(0x1a6)][_0x67787b(0x21d)](_0x59c52e[_0x67787b(0x270)]==_0x67787b(0x33f)?'All\x20bots':_0x67787b(0x38f)+_0x59c52e[_0x67787b(0x270)],_0x67787b(0x239)+_0x59c52e[_0x67787b(0x270)])),_0x3bb6b0%_0x1ee931==0x0&&(_0xa4cdc7[_0x4c4862]=_0x574d44,_0x4c4862++);});const _0x2ddda9=Markup[_0x3bf75f(0x359)](_0xa4cdc7);_0x19ab8e['reply']('Which\x20bot\x20do\x20you\x20want\x20to\x20restart?',_0x2ddda9);}}),tgBot['action'](/restart_(.+)/,async _0x2f69c3=>{const _0x22c991=_0x4765fe,_0x48d75c=_0x2f69c3[_0x22c991(0x249)][0x1];_0x2f69c3['editMessageReplyMarkup'](),_0x48d75c==_0x22c991(0x33f)?config[_0x22c991(0x35c)](_0x1c4ec1=>{const _0x356f34=_0x22c991;restartBot(_0x1c4ec1[_0x356f34(0x270)]);}):restartBot(_0x48d75c);}),tgBot['command']('on',async _0x27d00d=>{const _0x244fc0=_0x4765fe,_0x25babd=getDisabledBots();if(_0x25babd[_0x244fc0(0x2b4)]==0x0)await sendTelegram(_0x27d00d[_0x244fc0(0x26d)]['id'],_0x244fc0(0x232));else{if(_0x25babd[_0x244fc0(0x2b4)]>0x1)_0x25babd[_0x244fc0(0x1b9)]({'botID':_0x244fc0(0x33f)});let _0x191bdc=[],_0x43bacb=[];const _0x5593d9=_0x25babd[_0x244fc0(0x2b4)]%0x4==0x0||_0x25babd[_0x244fc0(0x2b4)]%0x4==0x3||_0x25babd[_0x244fc0(0x2b4)]%0x3==0x1?0x4:0x3;let _0x4b6b0f=0x0;_0x25babd['forEach']((_0x1967a3,_0x541fc9)=>{const _0x5462df=_0x244fc0;if(_0x541fc9%_0x5593d9==0x0)_0x43bacb=[];_0x43bacb[_0x5462df(0x1b9)](Markup[_0x5462df(0x1a6)]['callback'](_0x1967a3['botID']==_0x5462df(0x33f)?'All\x20bots':'Bot\x20'+_0x1967a3[_0x5462df(0x270)],_0x5462df(0x206)+_0x1967a3[_0x5462df(0x270)])),_0x541fc9%_0x5593d9==0x0&&(_0x191bdc[_0x4b6b0f]=_0x43bacb,_0x4b6b0f++);});const _0x481e89=Markup[_0x244fc0(0x359)](_0x191bdc);_0x27d00d[_0x244fc0(0x301)](_0x244fc0(0x34e),_0x481e89);}}),tgBot[_0x4765fe(0x297)](/on_(.+)/,async _0x3bffdc=>{const _0xe7d512=_0x4765fe,_0x344e05=_0x3bffdc[_0xe7d512(0x249)][0x1];_0x3bffdc[_0xe7d512(0x2c6)]();if(_0x344e05==_0xe7d512(0x33f)){const _0x27641b=getDisabledBots();await sendTelegram(_0x3bffdc['chat']['id'],'Bot\x20Mgr\x20>\x20starting\x20all\x20bots'),_0x27641b[_0xe7d512(0x35c)](_0x13dfaf=>{const _0x503e1d=_0xe7d512;if(_0x13dfaf[_0x503e1d(0x270)]!=_0x503e1d(0x33f))toggleBot(_0x13dfaf[_0x503e1d(0x270)],toggleStatus(_0x13dfaf[_0x503e1d(0x270)]),_0x503e1d(0x1bf));});}else await sendTelegram(_0x3bffdc['chat']['id'],_0xe7d512(0x21a)+_0x344e05),toggleBot(_0x344e05,toggleStatus(_0x344e05),_0xe7d512(0x1bf));}),tgBot['command'](_0x4765fe(0x277),async _0x1c4d2d=>{const _0x2d019e=_0x4765fe,_0x445e86=getEnabledBots();if(_0x445e86[_0x2d019e(0x2b4)]==0x0)await sendTelegram(_0x1c4d2d[_0x2d019e(0x26d)]['id'],'No\x20bots\x20running\x20right\x20now');else{if(_0x445e86[_0x2d019e(0x2b4)]>0x1)_0x445e86[_0x2d019e(0x1b9)]({'botID':'all'});let _0x562d5b=[],_0x1b057b=[];const _0x4749d7=_0x445e86['length']%0x4==0x0||_0x445e86[_0x2d019e(0x2b4)]%0x4==0x3||_0x445e86[_0x2d019e(0x2b4)]%0x3==0x1?0x4:0x3;let _0x2ec41d=0x0;_0x445e86[_0x2d019e(0x35c)]((_0xe21b63,_0x3db53b)=>{const _0x161bac=_0x2d019e;if(_0x3db53b%_0x4749d7==0x0)_0x1b057b=[];_0x1b057b[_0x161bac(0x1b9)](Markup[_0x161bac(0x1a6)]['callback'](_0xe21b63['botID']=='all'?_0x161bac(0x1bc):'Bot\x20'+_0xe21b63[_0x161bac(0x270)],_0x161bac(0x2cb)+_0xe21b63[_0x161bac(0x270)])),_0x3db53b%_0x4749d7==0x0&&(_0x562d5b[_0x2ec41d]=_0x1b057b,_0x2ec41d++);});const _0x2f3f95=Markup[_0x2d019e(0x359)](_0x562d5b);_0x1c4d2d['reply'](_0x2d019e(0x308),_0x2f3f95);}}),tgBot['action'](/off_(.+)/,async _0x55bfa3=>{const _0x54f2c0=_0x4765fe,_0x36ce69=_0x55bfa3[_0x54f2c0(0x249)][0x1];_0x55bfa3[_0x54f2c0(0x2c6)]();if(_0x36ce69==_0x54f2c0(0x33f)){const _0x56744f=getEnabledBots();await sendTelegram(_0x55bfa3[_0x54f2c0(0x26d)]['id'],_0x54f2c0(0x1ee)),_0x56744f['forEach'](_0x457ae1=>{const _0x14b9bd=_0x54f2c0;if(_0x457ae1['botID']!=_0x14b9bd(0x33f))toggleBot(_0x457ae1[_0x14b9bd(0x270)],toggleStatus(_0x457ae1[_0x14b9bd(0x270)]),_0x14b9bd(0x1bf));});}else await sendTelegram(_0x55bfa3['chat']['id'],_0x54f2c0(0x212)+_0x36ce69),toggleBot(_0x36ce69,toggleStatus(_0x36ce69),_0x54f2c0(0x1bf));}),tgBot[_0x4765fe(0x315)]('metrics',async _0x51e6de=>{const _0x38d00d=_0x4765fe,_0x58a20f=getEnabledBots();if(_0x58a20f[_0x38d00d(0x2b4)]==0x0)await sendTelegram(_0x51e6de['chat']['id'],'No\x20bots\x20running\x20right\x20now');else{if(_0x58a20f[_0x38d00d(0x2b4)]>0x1){let _0xdecd34=[],_0x4df17d=[];const _0xa2aafc=_0x58a20f[_0x38d00d(0x2b4)]%0x4==0x0||_0x58a20f[_0x38d00d(0x2b4)]%0x4==0x3||_0x58a20f[_0x38d00d(0x2b4)]%0x3==0x1?0x4:0x3;let _0x5fe407=0x0;_0x58a20f[_0x38d00d(0x35c)]((_0xd63455,_0x6d98f)=>{const _0x5f00a9=_0x38d00d;if(_0x6d98f%_0xa2aafc==0x0)_0x4df17d=[];_0x4df17d['push'](Markup['button'][_0x5f00a9(0x21d)]('Bot\x20'+_0xd63455[_0x5f00a9(0x270)],'metrics_'+_0xd63455[_0x5f00a9(0x270)])),_0x6d98f%_0xa2aafc==0x0&&(_0xdecd34[_0x5fe407]=_0x4df17d,_0x5fe407++);});const _0x120164=Markup['inlineKeyboard'](_0xdecd34);_0x51e6de[_0x38d00d(0x301)]('For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?',_0x120164);}else{const _0x40ebc5=_0x58a20f[0x0][_0x38d00d(0x270)];if(pid[_0x40ebc5])pid[_0x40ebc5][_0x38d00d(0x2d6)]({'function':_0x38d00d(0x2bb),'args':null});}}}),tgBot[_0x4765fe(0x297)](/metrics_(.+)/,async _0x4936dd=>{const _0x100ccf=_0x4765fe,_0xaae884=_0x4936dd[_0x100ccf(0x249)][0x1];_0x4936dd['editMessageReplyMarkup']();if(pid[_0xaae884])pid[_0xaae884]['send']({'function':'sendMetricsTelegram','args':null});}),tgBot[_0x4765fe(0x315)](_0x4765fe(0x19f),async _0x1b8681=>{const _0x13d7f9=_0x4765fe,_0x4b7268=getEnabledBots();if(_0x4b7268[_0x13d7f9(0x2b4)]==0x0)await sendTelegram(_0x1b8681[_0x13d7f9(0x26d)]['id'],_0x13d7f9(0x1c7));else{if(_0x4b7268[_0x13d7f9(0x2b4)]>0x1){let _0x79c42e=[],_0x166f2a=[];const _0x1d8713=_0x4b7268[_0x13d7f9(0x2b4)]%0x4==0x0||_0x4b7268[_0x13d7f9(0x2b4)]%0x4==0x3||_0x4b7268[_0x13d7f9(0x2b4)]%0x3==0x1?0x4:0x3;let _0x104c66=0x0;_0x4b7268[_0x13d7f9(0x35c)]((_0x4ed492,_0x395e41)=>{const _0x353a74=_0x13d7f9;if(_0x395e41%_0x1d8713==0x0)_0x166f2a=[];_0x166f2a['push'](Markup[_0x353a74(0x1a6)][_0x353a74(0x21d)](_0x353a74(0x38f)+_0x4ed492[_0x353a74(0x270)],'portfolio_'+_0x4ed492[_0x353a74(0x270)])),_0x395e41%_0x1d8713==0x0&&(_0x79c42e[_0x104c66]=_0x166f2a,_0x104c66++);});const _0x3fae97=Markup[_0x13d7f9(0x359)](_0x79c42e);_0x1b8681[_0x13d7f9(0x301)](_0x13d7f9(0x2e5),_0x3fae97);}else{const _0x1b4d9a=_0x4b7268[0x0]['botID'];if(pid[_0x1b4d9a])pid[_0x1b4d9a][_0x13d7f9(0x2d6)]({'function':'sendPortfolioTelegram','args':null});}}}),tgBot[_0x4765fe(0x297)](/portfolio_(.+)/,async _0x4e5ac9=>{const _0xb88b0c=_0x4765fe,_0x465328=_0x4e5ac9['match'][0x1];_0x4e5ac9[_0xb88b0c(0x2c6)]();if(pid[_0x465328])pid[_0x465328][_0xb88b0c(0x2d6)]({'function':_0xb88b0c(0x1c2),'args':null});}),tgBot[_0x4765fe(0x315)](_0x4765fe(0x2a7),async _0x41b6b4=>{const _0x2414de=_0x4765fe,_0x18803c='logs';await zipFiles(_0x18803c);const _0x353c2d=zippath+(_0x18803c+_0x2414de(0x388));_0x41b6b4[_0x2414de(0x196)]({'source':_0x353c2d})['then'](()=>{})['catch'](_0x2ce811=>logger[_0x2414de(0x260)](_0x2414de(0x2bf)+_0x18803c+_0x2414de(0x2a8),_0x2ce811));}),tgBot[_0x4765fe(0x315)](_0x4765fe(0x17b),async _0x46ef4e=>{const _0x1792ed=_0x4765fe,_0x51db8f=_0x1792ed(0x17b);await backupConfigFiles(),await zipFiles(_0x51db8f);const _0x38f8b5=zippath+(_0x51db8f+_0x1792ed(0x388));_0x46ef4e[_0x1792ed(0x196)]({'source':_0x38f8b5})[_0x1792ed(0x336)](()=>{})['catch'](_0x3e5d95=>logger[_0x1792ed(0x260)](_0x1792ed(0x2bf)+_0x51db8f+_0x1792ed(0x2a8),_0x3e5d95));}),tgBot[_0x4765fe(0x315)](_0x4765fe(0x2e4),async _0x4c4665=>{const _0x2fbd2f=_0x4765fe;await getMessages();if(!updateAvailable)await sendTelegram(_0x4c4665[_0x2fbd2f(0x26d)]['id'],_0x2fbd2f(0x2a3));else{if(!validInstallation)await sendTelegram(_0x4c4665['chat']['id'],_0x2fbd2f(0x17c));else{const _0x516557=Markup[_0x2fbd2f(0x359)]([Markup['button'][_0x2fbd2f(0x21d)](_0x2fbd2f(0x2a9),'update_yes'),Markup[_0x2fbd2f(0x1a6)][_0x2fbd2f(0x21d)]('No','update_no')]);_0x4c4665[_0x2fbd2f(0x301)](_0x2fbd2f(0x1d2),_0x516557);}}}),tgBot[_0x4765fe(0x297)](/update_(.+)/,async _0x30ef6a=>{const _0x518cf4=_0x4765fe,_0x22fe6b=_0x30ef6a['match'][0x1];_0x30ef6a[_0x518cf4(0x2c6)](),_0x22fe6b==_0x518cf4(0x29f)&&(await sendTelegram(_0x30ef6a[_0x518cf4(0x26d)]['id'],'Starting\x20Balance\x20Bot\x20update'),updateBB(_0x518cf4(0x2e4))),_0x22fe6b=='no'&&await sendTelegram(_0x30ef6a[_0x518cf4(0x26d)]['id'],_0x518cf4(0x306));}),tgBot[_0x4765fe(0x315)](_0x4765fe(0x29d),async _0x2a4434=>{const _0x1cb5e1=_0x4765fe;if(!validInstallation)await sendTelegram(_0x2a4434[_0x1cb5e1(0x26d)]['id'],_0x1cb5e1(0x201));else{const _0x56418c=Markup['inlineKeyboard']([Markup['button'][_0x1cb5e1(0x21d)](_0x1cb5e1(0x2a9),'reinstall_yes'),Markup[_0x1cb5e1(0x1a6)][_0x1cb5e1(0x21d)]('No',_0x1cb5e1(0x263))]);_0x2a4434[_0x1cb5e1(0x301)](_0x1cb5e1(0x394),_0x56418c);}}),tgBot[_0x4765fe(0x297)](/reinstall_(.+)/,async _0x4fff4f=>{const _0x2767cc=_0x4765fe,_0x3de280=_0x4fff4f[_0x2767cc(0x249)][0x1];_0x4fff4f[_0x2767cc(0x2c6)](),_0x3de280=='yes'&&(await sendTelegram(_0x4fff4f[_0x2767cc(0x26d)]['id'],_0x2767cc(0x1dc)),updateBB('reinstall')),_0x3de280=='no'&&await sendTelegram(_0x4fff4f[_0x2767cc(0x26d)]['id'],_0x2767cc(0x381));}),tgBot[_0x4765fe(0x315)](_0x4765fe(0x210),async _0xfd06df=>{const _0x2ab622=_0x4765fe,_0x14c596=getBotsWithMode();if(_0x14c596['length']==0x0)await sendTelegram(_0xfd06df[_0x2ab622(0x26d)]['id'],'No\x20bots\x20running\x20right\x20now');else{let _0x2c1f8d=[],_0x4e8689=[];const _0x3fba9c=0x2;let _0x32a323=0x0;_0x14c596[_0x2ab622(0x35c)]((_0x2849a3,_0x38da15)=>{const _0x224511=_0x2ab622;if(_0x38da15%_0x3fba9c==0x0)_0x4e8689=[];_0x4e8689[_0x224511(0x1b9)](Markup[_0x224511(0x1a6)][_0x224511(0x21d)](_0x224511(0x38f)+_0x2849a3['botID']+'\x20('+_0x2849a3[_0x224511(0x391)]+')',_0x224511(0x191)+_0x2849a3[_0x224511(0x270)])),_0x38da15%_0x3fba9c==0x0&&(_0x2c1f8d[_0x32a323]=_0x4e8689,_0x32a323++);});const _0x474293=Markup['inlineKeyboard'](_0x2c1f8d);_0xfd06df['reply'](_0x2ab622(0x2b7),_0x474293);}}),tgBot[_0x4765fe(0x297)](/toggle_(.+)/,async _0x29d008=>{const _0x179612=_0x4765fe,_0x1965a7=_0x29d008[_0x179612(0x249)][0x1];_0x29d008['editMessageReplyMarkup']();const _0x270ae1=getBotsWithMode(),_0x8e35fa=_0x270ae1[_0x179612(0x287)](_0x227b17=>_0x227b17[_0x179612(0x270)]==_0x1965a7),_0xae88ed=_0x8e35fa[_0x179612(0x391)]==_0x179612(0x1f7)?'manual':'auto';await sendTelegram(_0x29d008[_0x179612(0x26d)]['id'],_0x179612(0x278)+_0x1965a7+_0x179612(0x2d7)+_0xae88ed+_0x179612(0x189)),toggleBotMode(_0x1965a7);}),tgBot[_0x4765fe(0x315)]('names',async _0x2b9258=>{const _0x1b927d=_0x4765fe;let _0x39b97d='';config[_0x1b927d(0x35c)](_0x4172fe=>{const _0x5a8660=_0x1b927d;_0x39b97d+=_0x5a8660(0x38f)+_0x4172fe[_0x5a8660(0x270)]+':\x20'+_0x4172fe[_0x5a8660(0x1e6)]+'\x0a';}),await sendTelegram(_0x2b9258[_0x1b927d(0x26d)]['id'],_0x39b97d,{'parse_mode':'HTML'});}),tgBot[_0x4765fe(0x315)](_0x4765fe(0x1d9),async _0x4dd140=>{const _0x9184a4=_0x4765fe;await sendTelegram(_0x4dd140[_0x9184a4(0x26d)]['id'],_0x14c8ca);}),process[_0x4765fe(0x34f)](_0x4765fe(0x1ff),()=>tgBot['stop']('SIGINT')),process[_0x4765fe(0x34f)](_0x4765fe(0x1b6),()=>tgBot[_0x4765fe(0x26c)](_0x4765fe(0x1b6))),tgBot['launch']();}function disableTelegram(){const _0x538982=_0x14c6b8;tgBot&&tgBot[_0x538982(0x26c)]();}async function sendTelegram(_0x47b27e,_0x54f0cd,_0x53ec3b){const _0x487e88=_0x14c6b8;_0x53ec3b={..._0x53ec3b,'disable_web_page_preview':!![]};try{await tgBot[_0x487e88(0x1af)]['sendMessage'](_0x47b27e,_0x54f0cd,_0x53ec3b);}catch(_0x1dc2df){logger[_0x487e88(0x260)](_0x487e88(0x267),_0x1dc2df);}}async function sendTelegramBot(_0x1fc00d,_0x42db9d){const _0x3e9ded=_0x14c6b8;if(settings['telegramEnabled']){if(settings[_0x3e9ded(0x345)]==_0x3e9ded(0x33f)||(_0x42db9d[_0x3e9ded(0x23e)]=='error'||_0x42db9d[_0x3e9ded(0x23e)]==_0x3e9ded(0x2b2)||_0x42db9d[_0x3e9ded(0x23e)]=='success')&&settings[_0x3e9ded(0x345)]==_0x3e9ded(0x250)||_0x42db9d[_0x3e9ded(0x23e)]==_0x3e9ded(0x2d0)&&settings[_0x3e9ded(0x345)]==_0x3e9ded(0x2e8)){if(tgBot&&settings[_0x3e9ded(0x20d)]){if(_0x42db9d[_0x3e9ded(0x20c)])await sendTelegram(settings[_0x3e9ded(0x20d)],_0x42db9d[_0x3e9ded(0x1e6)]+_0x3e9ded(0x1cf)+_0x42db9d[_0x3e9ded(0x372)]);else await sendTelegram(settings[_0x3e9ded(0x20d)],'Bot\x20'+_0x1fc00d+_0x3e9ded(0x1cf)+_0x42db9d[_0x3e9ded(0x372)]);}}}}async function sendTelegramMsg(_0x1103d7,_0x40e629='HTML'){const _0x3e1544=_0x14c6b8;return settings['telegramEnabled']&&tgBot&&settings[_0x3e1544(0x20d)]?(await sendTelegram(settings[_0x3e1544(0x20d)],_0x1103d7,{'parse_mode':_0x40e629}),!![]):![];}function _0x4102(){const _0x22ec1b=['<b>Telegram\x20Bot\x20Status:</b>\x0a','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','push','pidRefreshToken','static','All\x20bots','write','21ywIyvz','stopped','sha256','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','sendPortfolioTelegram','format','updatebotmanager','Unauthorized\x20attempt\x20to\x20get\x20messages','Node.js\x20v','No\x20bots\x20running\x20right\x20now','createServer','emitHistory','telegrammsg','kind','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','access\x20timeout','You\x20can\x20use\x20the\x20following\x20commands:\x0a','\x20>\x20','writeFileSync','/download/:type','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','temporary\x20access\x20not\x20allowed','padStart','Network\x20Interfaces:','place-order','copyFileSync','login\x20not\x20required','help','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run','constructor','Starting\x20Balance\x20Bot\x20reinstallation','restore_no_','reject','Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files','Notifications\x20types:\x20','Failed\x20to\x20download\x20','entries','resetpw_no','size','5\x20min','botname','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20see\x20logs\x20for\x20details','publicKeyToPem','remoteAddress','Temporary\x20access\x20rejected','::1','Invalid\x20authentication\x20token\x20(2)','logout','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','/enable\x20-\x20enable\x20notifications\x0a','\x20-\x20','port','218748bWGmBn','getMonth','Unauthorized\x20attempt\x20to\x20store\x20configuration','Error\x20while\x20deleting\x20config\x20files:\x20','stringify','auto','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','lastmsgtelegram','apiSecret','confirm-message','************','$1_$2_$3','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','SIGINT','16951pJCcKi','Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation','https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master','path','text','Restoring\x20bot(s)\x20from\x20backup','on_','\x1b[35m','/metrics\x20-\x20show\x20bot\x20performance\x0a','/status\x20-\x20show\x20bot(s)\x20status\x0a','bb-secure.json','Invalid\x20IP\x20address','showname','telegramChatId','username','Orders','toggle','logged\x20out','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','/:bot','bb/','reset-history','slice','The\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','log','store-configuration','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','connection','invalid\x20credentials','callback','Ok,\x20will\x20send\x20alert\x20notifications\x20only','/restart\x20-\x20restart\x20bot(s)\x0a','bot-','6b67f3d61ee94b8f5c80b4affef4c4d9','get','getMinutes','2FA','HTML','login\x20token\x20generated','messages','uuid-random','split','getHours','/output-000.log','store','settings.','bot.js','Password\x20has\x20been\x20reset\x20to:\x20','127.0.0.1','file','All\x20bots\x20running\x20right\x20now','initclient','[ip-address]','storeConfiguration','showConfig','/:bot/history','=>\x20Go\x20to\x20#CYA#http://127.0.0.1:','restart_','toggleBotMode','IPv4','Allow\x20login\x20from\x20IP\x20address\x20',':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20','type','toggle-bot-mode','get-portfolio','config','handshake','number','Unauthorized\x20attempt\x20to\x20update\x20settings','tempaccess_reject_','Unauthorized\x20attempt\x20to\x20add\x20bot','backup/','track','match','bbUsername','File\x20uploaded','live','Unauthorized\x20attempt\x20to\x20show\x20configuration','update-bb','add','alerts','set','get-messages','cloneDeep','running','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','login2fa_reject_','readdirSync','0.0.0','mtime','/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','reload','Unauthorized\x20attempt\x20to\x20delete\x20bot','build','debug','#RES#','\x1b[34m','reinstall_no','All','Restore\x20process\x20confirmed','pki','Telegram\x20error:','Starting\x20(','Running\x20#RED#Balance\x20Bot\x20v','9800wknjLk','Restore\x20process\x20aborted','stop','chat','removeAllListeners','/:bot/support','botID','statSync','internal','loginRequired','Backup\x20file\x20unzipped\x20and\x20stored','getUTCHours','login','off','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','clientip','hex','compareSync','uncaughtException','Unauthorized\x20attempt\x20to\x20log\x20out','request','min','Unauthorized\x20attempt\x20to\x20get\x20events','privateKeyToPem','Logged\x20in\x20user\x20...','yargs/yargs','store-settings','child_process','1000645ryBDOk','find','init','alias','<b>Balance\x20Bot\x20Status:</b>\x0a','family','inherit','exec','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','privateKey','/backup\x20-\x20receive\x20backup\x20files\x0a','connected','output-002.log','node-forge','started','-----------------------------------------------------------------------------------','restore_yes_','action','production','apply','auth','telegramIpApproval','logs/','reinstall','ipaddr.js','yes','string','privateKeyFromPem','\x20|\x20','Your\x20installation\x20is\x20already\x20up\x20to\x20date','deleteHistoryAlerts','bcryptjs','toIPv4Address','logs','\x20files\x20over\x20Telegram:','Yes','bb-config.json','Logged\x20out\x20user\x20...','unlinkSync','sockets','Telegraf\x20error:','resetpw_yes','#RES#\x20','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20','warning','headers','length','bbvNew','filter','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','files','-events.json','manual','sendMetricsTelegram','socket','getDate','loadAsync','Error\x20sending\x20','Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration','headless','*$1*','generateKeyPair','jsonwebtoken','16ndxdmN','editMessageReplyMarkup','Alerts','publicKey','\x1b[0m','config/','off_','ipv6','sign','\x20|\x20user:\x20...','latestversion','order','params','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','binary','\x20(2)','14664yCLqhu','send','\x20to\x20','***','config_alerts','toString','onepagemode','function','reason','getPortfolio','telegramToken','Error:\x20Invalid\x20argument\x20','2647952ZqSplW','/upload-backup','hashSync','update','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','listen','decode64','orders','staging','|@|','graphql-request','login\x20required','login2fa_','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','Bot\x20Mgr\x20>\x20','/:bot/coins',':\x20Bot\x20Mgr\x20>\x20','timeshift','remove','environment','status\x20code\x20401','DEFLATE','reinstall-bb','Starting\x20#RED#Balance\x20Bot\x20v','enable','search','token','argv','referer','fork','Unauthorized\x20login\x20attempt\x20(timeout)','util','reply','bots','exit','notification','get-backup-files','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','15\x20min','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','clients','(((.+)+)+)+$','136774kkosOU','30\x20min','env','lastmsgemitted','\x20minutes','lowdb/adapters/FileSync','Notifications\x20disabled','from','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','whitelistEnabled','command','\x20(1)','Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history','node','startsWith','Setting\x20access:\x20','config_all','uuid','Error\x20removing\x20old\x20backup\x20files:','status','2FA\x20login\x20rejected','exp','Idling\x20(','backup-full','kill','delete-bot','#RES#\x20if\x20running\x20on\x20server','enabled','password','NTBA_FIX_319','Server','date-fns','\x1b[36m','getFullYear','versions','hasOwnProperty','693WklWNZ','full','resetHistory','sort','simple',')\x20|\x20Bot\x20','backupfile','then','parse','keys','2FA\x20required','toIPv4MappedAddress','(staging)','api-eu.mixpanel.com','catch','BCT','all','expiry','backup-full@','generateAsync','success','lowdb','telegramEvents','getTime','restart','telegram2FaApproval','Unauthorized\x20attempt\x20to\x20confirm\x20message','host','https://api.ipify.org?format=json','store-headless',')\x20\x20\x20|\x20Bot\x20','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','once','Notifications\x20enabled','readFileSync','Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot','Unauthorized\x20attempt\x20to\x20get\x20portfolio','value','get-starting-balances','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)','decrypt','temp/','inlineKeyboard','verify','ETH','forEach','isDirectory','isValid','Backup\x20file\x20uploaded','/help\x20-\x20show\x20available\x20commands\x0a','temporary\x20access\x20rejected','Token\x20blacklisted','bb-settings.json','temporary\x20token\x20generated','blacklist','tkn','bot','ipc','bbPassword','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','access','Invalid\x20authentication\x20token\x20(1)','delete-alerts','test','Notifications\x20enabled\x0a','zip/','Starting\x20new\x20bot\x20|\x20Bot\x20','event','socket.io','disabled','secure','--------------------------------------','Login\x20accepted','Error\x20details:','rmSync','cancelLoading','secret','index.html','#RED#Balance\x20Bot\x20is\x20already\x20running\x20on\x20port\x20','data','Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U','existsSync','Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled','sendFile','accept','show','/logs\x20-\x20receive\x20log\x20files\x0a','tempaccess_5_','message','.zip','5706aLAVhz','settings','replace','Unauthorized\x20attempt\x20to\x20download\x20','start','title','Bot\x20','jszip','mode','axios','getSeconds','Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?','1000','Password\x20reset\x20rejected','3598tRQTwo','userid','async','config_orders','backup-files','randomFillSync','storeFiat','sortBy','defaults','_nsps','user','-config.json','build2','apiPassword','telegramUsername','conn','mixpanel','backup','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','tempaccess_30_','emit','User\x20has\x20been\x20validated','telegraf','name','use','disconnect','tempaccess_15_',':\x20Bot\x20Mgr\x20>\x20Telegram\x20error\x20occured','Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot','RSA-OAEP','assign','\x20mode','Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file','bbvReceive','-performance.json','telegramEnabled','createWriteStream','new-disabled','botmanager','toggle_','storeHeadless','pidExpireLogin','crypto','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','replyWithDocument','create','allow','Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)','2FA\x20login\x20required','marketcapApi',',\x20must\x20be\x20a\x204\x20digit\x20number','output-000.log','mkdirSync','portfolio','Restore\x20backup\x20file\x20','/:bot/portfolio','/:bot/configuration','Ok,\x20will\x20send\x20order\x20notifications\x20only','\x1b[33m','/:bot/performance','button','args','express-fileupload','includes','Enabled\x20Bot\x20','new','/off\x20-\x20stop\x20bot(s)\x0a','timestamp','download','telegram','exchange','get-logs','join','-results.json','placeOrder','Session\x20expired\x20for\x20user\x20...','SIGTERM'];_0x4102=function(){return _0x22ec1b;};return _0x4102();}function getDeviceWithIp(_0x5a8ac9){const _0x12c9fc=_0x14c6b8;return devices[_0x12c9fc(0x287)](_0x5c11de=>_0x5c11de['ip']===_0x5a8ac9);}async function temporaryAccess2FA(_0x584833,_0x24e384){const _0x13ff2e=_0x14c6b8;let _0x279531=new Date(),_0xfe8de6=![];if(lastIpApproval){if(_0x279531-lastIpApproval<0x1388)_0xfe8de6=!![];}lastIpApproval=new Date();if(_0xfe8de6)return;if(tgBot&&settings['telegramChatId']){const _0x5e4133=uuidRandom();tmpStorage[_0x5e4133]={'uuid':_0x584833,'externalip':_0x24e384};const _0x5b8b90=Markup['inlineKeyboard']([Markup['button'][_0x13ff2e(0x21d)](_0x13ff2e(0x1e5),_0x13ff2e(0x386)+_0x5e4133),Markup['button'][_0x13ff2e(0x21d)](_0x13ff2e(0x307),_0x13ff2e(0x184)+_0x5e4133),Markup[_0x13ff2e(0x1a6)][_0x13ff2e(0x21d)](_0x13ff2e(0x30c),_0x13ff2e(0x17d)+_0x5e4133),Markup[_0x13ff2e(0x1a6)][_0x13ff2e(0x21d)](_0x13ff2e(0x1de),_0x13ff2e(0x245)+_0x5e4133)]);await sendTelegram(settings['telegramChatId'],_0x13ff2e(0x2b1)+normalizeIP(_0x24e384)[_0x13ff2e(0x384)]+'\x20?',_0x5b8b90),tgBot[_0x13ff2e(0x297)](/tempaccess_(.+)_(.+)/,async _0x1b5e47=>{const _0xe57224=_0x13ff2e,_0x32cbc3=_0x1b5e47['match'][0x1],_0x5ee567=_0x1b5e47[_0xe57224(0x249)][0x2],{uuid:_0x85abb3,externalip:_0x3d765a}=tmpStorage[_0x5ee567];delete tmpStorage[_0x5ee567],_0x1b5e47[_0xe57224(0x2c6)](),devices[_0x85abb3][_0xe57224(0x29b)]={'clientip':_0x3d765a,'timestamp':new Date()[_0xe57224(0x346)](),'expiry':_0x32cbc3},_0x32cbc3!=_0xe57224(0x1de)?(await sendTelegram(_0x1b5e47[_0xe57224(0x26d)]['id'],'Access\x20enabled\x20for\x20'+_0x32cbc3+_0xe57224(0x30f),{'parse_mode':_0xe57224(0x225)}),io['to'](_0x85abb3)[_0xe57224(0x17e)](_0xe57224(0x31e),{'access':{'allow':![],'reason':'reload','token':null}})):(await sendTelegram(_0x1b5e47[_0xe57224(0x26d)]['id'],_0xe57224(0x1ea)),io['to'](_0x85abb3)[_0xe57224(0x17e)](_0xe57224(0x31e),{'access':{'allow':![],'reason':_0xe57224(0x361),'token':null}}));});}}async function loginAccess2FA(_0x2ee3d7,_0x48b259){const _0x212360=_0x14c6b8;if(tgBot&&settings[_0x212360(0x20d)]){const _0x3efb3f=uuidRandom();tmpStorage[_0x3efb3f]={'uuid':_0x2ee3d7,'externalip':_0x48b259};const _0x39dd78=Markup[_0x212360(0x359)]([Markup[_0x212360(0x1a6)][_0x212360(0x21d)](_0x212360(0x383),_0x212360(0x2ed)+loginExpiry+'_'+_0x3efb3f),Markup['button'][_0x212360(0x21d)](_0x212360(0x1de),_0x212360(0x257)+_0x3efb3f)]);await sendTelegram(settings['telegramChatId'],_0x212360(0x23c)+normalizeIP(_0x48b259)['show']+'\x20?',_0x39dd78),tgBot[_0x212360(0x297)](/login2fa_(.+)_(.+)/,async _0x19010c=>{const _0x4a648=_0x212360,_0x2acfea=_0x19010c['match'][0x1],_0x7d5e83=_0x19010c[_0x4a648(0x249)][0x2],{uuid:_0xd7e3,externalip:_0x34c37d}=tmpStorage[_0x7d5e83];delete tmpStorage[_0x7d5e83],_0x19010c['editMessageReplyMarkup'](),devices[_0xd7e3][_0x4a648(0x348)]={'clientip':_0x34c37d,'timestamp':new Date()['getTime'](),'expiry':_0x2acfea},_0x2acfea!='reject'?(await sendTelegram(_0x19010c['chat']['id'],_0x4a648(0x377),{'parse_mode':_0x4a648(0x225)}),io['to'](_0xd7e3)[_0x4a648(0x17e)](_0x4a648(0x31e),{'access':{'allow':![],'reason':'reload','token':null}})):(await sendTelegram(_0x19010c[_0x4a648(0x26d)]['id'],'Login\x20rejected'),io['to'](_0xd7e3)[_0x4a648(0x17e)]('status',{'access':{'allow':![],'reason':_0x4a648(0x31f),'token':null}}));});}}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x2e2234=_0x14c6b8;return dbConfig[_0x2e2234(0x222)](_0x2e2234(0x302))[_0x2e2234(0x171)](_0x2e2234(0x270))[_0x2e2234(0x2b6)]({'status':_0x2e2234(0x326)})[_0x2e2234(0x354)]()||[];}function getDisabledBots(){const _0x3fb3c1=_0x14c6b8;return dbConfig[_0x3fb3c1(0x222)](_0x3fb3c1(0x302))[_0x3fb3c1(0x171)](_0x3fb3c1(0x270))[_0x3fb3c1(0x2b6)]({'status':_0x3fb3c1(0x374)})[_0x3fb3c1(0x354)]()||[];}function getBotAttributes(_0x35eada){const _0x3f9704=_0x14c6b8;let _0x3af0d8={};const _0xdcedb8=configpath+_0x3f9704(0x220)+_0x35eada+_0x3f9704(0x175),_0x549824=fs['existsSync'](_0xdcedb8);if(_0x549824){const _0x3076d4=fs[_0x3f9704(0x351)](_0xdcedb8);try{const _0x155c21=JSON[_0x3f9704(0x337)](_0x3076d4),_0x52d29f=_0x155c21?_0x155c21['bot'][0x0][_0x3f9704(0x2c1)]:![];_0x3af0d8[_0x3f9704(0x391)]=_0x52d29f?_0x3f9704(0x1f7):_0x3f9704(0x2ba),_0x3af0d8['botname']=_0x155c21?_0x155c21['bot'][0x0][_0x3f9704(0x1e6)]:'Bot\x20'+_0x35eada;}catch(_0xc9f579){_0x3af0d8[_0x3f9704(0x391)]=_0x3f9704(0x2ba),_0x3af0d8[_0x3f9704(0x1e6)]='Bot\x20'+_0x35eada;}}else _0x3af0d8[_0x3f9704(0x391)]='manual',_0x3af0d8[_0x3f9704(0x1e6)]=_0x3f9704(0x38f)+_0x35eada;return _0x3af0d8;}function getBotsWithMode(){const _0x1ea815=_0x14c6b8,_0x292ba8=dbConfig[_0x1ea815(0x222)](_0x1ea815(0x302))[_0x1ea815(0x171)](_0x1ea815(0x270))[_0x1ea815(0x354)]()||[];return _0x292ba8['forEach'](_0x432c7d=>{const _0x3f3b1d=_0x1ea815;let _0x2453b5=getBotAttributes(_0x432c7d[_0x3f3b1d(0x270)]);_0x432c7d[_0x3f3b1d(0x391)]=_0x2453b5[_0x3f3b1d(0x391)];}),_0x292ba8;}function getBotExchanges(){const _0x363703=_0x14c6b8;let _0x139023=[];const _0xae83dd=dbConfig[_0x363703(0x222)](_0x363703(0x302))[_0x363703(0x171)](_0x363703(0x270))['value']()||[];_0xae83dd['forEach'](_0x1cb891=>{const _0x59cc8a=_0x363703;if(_0x1cb891[_0x59cc8a(0x31e)]==_0x59cc8a(0x326)){const _0x3443b2=configpath+_0x59cc8a(0x220)+_0x1cb891[_0x59cc8a(0x270)]+_0x59cc8a(0x175),_0x4444e4=fs[_0x59cc8a(0x380)](_0x3443b2);let _0x46a6f7;if(_0x4444e4){const _0x52d9da=fs[_0x59cc8a(0x351)](_0x3443b2);try{const _0x3629f8=JSON[_0x59cc8a(0x337)](_0x52d9da);_0x46a6f7=_0x3629f8?_0x3629f8[_0x59cc8a(0x367)][0x0][_0x59cc8a(0x1b0)]:null;}catch(_0x102a1f){}}if(_0x46a6f7)_0x139023[_0x59cc8a(0x1b9)](_0x46a6f7);}});const _0x28d057=[...new Set(_0x139023)][_0x363703(0x332)]();return _0x28d057;}async function initUser(){const _0x1f323e=_0x14c6b8;if(!settings[_0x1f323e(0x398)]){const _0x280fb4=uuidRandom();mixpanel[_0x1f323e(0x289)](_0x280fb4),updateSetting(_0x1f323e(0x398),_0x280fb4);}}async function initSecure(){const _0x111ac1=_0x14c6b8;let _0x58dbdd=getSecure();if(!_0x58dbdd[_0x111ac1(0x32e)](_0x111ac1(0x37b))){let _0x220288=await generateKeys();_0x58dbdd[_0x111ac1(0x2c8)]=_0x220288[_0x111ac1(0x2c8)],_0x58dbdd['privateKey']=_0x220288[_0x111ac1(0x28f)],_0x58dbdd[_0x111ac1(0x37b)]=crypto['randomBytes'](0x20)['toString'](_0x111ac1(0x27a));;storeSecure(_0x58dbdd);}}function getSettings(){const _0x25c24f=_0x14c6b8;return dbSettings[_0x25c24f(0x222)](_0x25c24f(0x38a))['value']()||{};}function getSecure(){const _0xa016c3=_0x14c6b8;return dbSecure[_0xa016c3(0x222)](_0xa016c3(0x375))[_0xa016c3(0x354)]()||{};}function getBlacklist(){const _0x2fa2c8=_0x14c6b8;return dbSecure['get'](_0x2fa2c8(0x365))[_0x2fa2c8(0x354)]()||[];}function broadcastToBots(_0x3df93b,_0x10527){const _0x42effd=_0x14c6b8;config[_0x42effd(0x35c)](_0x59d296=>{const _0x5f5aa4=_0x42effd;if(_0x59d296['status']==_0x5f5aa4(0x326)&&_0x59d296['live']==_0x5f5aa4(0x254)||_0x59d296[_0x5f5aa4(0x31e)]==_0x5f5aa4(0x1ab)&&_0x59d296[_0x5f5aa4(0x24c)]==_0x5f5aa4(0x254)){if(pid[_0x59d296['botID']])pid[_0x59d296[_0x5f5aa4(0x270)]][_0x5f5aa4(0x2d6)]({[_0x3df93b]:_0x10527});}});}async function storeSettings(_0x1f732b,_0x8ab372=![]){const _0x28812c=_0x14c6b8;_0x1f732b={...settings,..._0x1f732b};if(_0x8ab372&&_0x1f732b[_0x28812c(0x369)]!=_0x28812c(0x1fc)&&_0x1f732b['bbPassword']!=_0x28812c(0x2d8)&&_0x1f732b['bbPassword']!=''){const _0x53da32=decryptRSA(secure['privateKey'],_0x1f732b[_0x28812c(0x369)])[_0x28812c(0x229)](_0x28812c(0x2ea))[0x0],_0x5270ff=bcrypt[_0x28812c(0x2e3)](_0x53da32,saltRounds);_0x1f732b={..._0x1f732b,'bbPassword':_0x5270ff};}if(_0x8ab372&&_0x1f732b['telegramToken']!=_0x28812c(0x1fc)&&_0x1f732b[_0x28812c(0x2df)]!='***'&&_0x1f732b[_0x28812c(0x2df)]!=''){const _0x571bb7=decryptRSA(secure[_0x28812c(0x28f)],_0x1f732b['telegramToken'])[_0x28812c(0x229)](_0x28812c(0x2ea))[0x0];_0x1f732b={..._0x1f732b,'telegramToken':_0x571bb7};}if(_0x8ab372&&_0x1f732b[_0x28812c(0x19b)]!=_0x28812c(0x1fc)&&_0x1f732b[_0x28812c(0x19b)]!=_0x28812c(0x2d8)&&_0x1f732b['marketcapApi']!=''){const _0x1aac67=decryptRSA(secure[_0x28812c(0x28f)],_0x1f732b[_0x28812c(0x19b)])[_0x28812c(0x229)](_0x28812c(0x2ea))[0x0];_0x1f732b={..._0x1f732b,'marketcapApi':_0x1aac67};}const _0x2a45b1=_0x1f732b['telegramToken']!=_0x28812c(0x1fc)&&_0x1f732b[_0x28812c(0x2df)]!=settings['telegramToken']||_0x1f732b[_0x28812c(0x178)]!=settings[_0x28812c(0x178)],_0x526a20=_0x1f732b['telegramToken']==''||_0x1f732b['telegramUsername']=='',_0x3b3a18=_0x1f732b[_0x28812c(0x19b)]&&_0x1f732b['marketcapApi']!=_0x28812c(0x1fc)&&_0x1f732b['marketcapApi']!=settings[_0x28812c(0x19b)];_0x2a45b1&&(_0x1f732b[_0x28812c(0x20d)]=null,_0x1f732b[_0x28812c(0x345)]=_0x28812c(0x33f));for(const [_0x2578f5,_0xd7f0d1]of Object[_0x28812c(0x1e2)](_0x1f732b)){if(_0x2578f5==_0x28812c(0x2df)&&_0xd7f0d1==_0x28812c(0x1fc)){_0x1f732b[_0x28812c(0x2df)]=settings[_0x28812c(0x2df)];continue;};if(_0x2578f5==_0x28812c(0x369)&&_0xd7f0d1==_0x28812c(0x1fc)){_0x1f732b[_0x28812c(0x369)]=settings[_0x28812c(0x369)];continue;};if(_0x2578f5==_0x28812c(0x19b)&&_0xd7f0d1==_0x28812c(0x1fc)){_0x1f732b[_0x28812c(0x19b)]=settings['marketcapApi'];continue;};dbSettings['set'](_0x28812c(0x22d)+_0x2578f5,_0xd7f0d1)['write']();}settings=_0x1f732b,io['to'](_0x28812c(0x190))[_0x28812c(0x17e)](_0x28812c(0x38a),cleanSettings()),broadcastToBots(_0x28812c(0x2f2),settings[_0x28812c(0x2f2)]),broadcastToBots(_0x28812c(0x2db),settings['onepagemode']),broadcastToBots(_0x28812c(0x19b),settings[_0x28812c(0x19b)]);if(_0x2a45b1&&!_0x526a20)initTelegram();_0x2a45b1&&_0x526a20&&(updateSetting(_0x28812c(0x20d),null),disableTelegram()),getAllClients()[_0x28812c(0x35c)](_0x3f91a9=>{const _0x5aaff1=_0x28812c;getSocket(_0x3f91a9['id'])[_0x5aaff1(0x17e)](_0x5aaff1(0x31e),{'access':{'allow':![],'reason':'reload','token':null}});}),_0x3b3a18&&(await sleep(0xbb8),testMarketcapApi(_0x1f732b[_0x28812c(0x19b)]));}async function testMarketcapApi(_0x1e4c51){const _0x21436e=_0x14c6b8,_0x4c9053=[_0x21436e(0x33e),_0x21436e(0x35b)];try{await axios[_0x21436e(0x222)](_0x21436e(0x1f8),{'headers':{'X-CMC_PRO_API_KEY':_0x1e4c51},'params':{'symbol':_0x4c9053[_0x21436e(0x2da)]()}});}catch(_0x3280b5){_0x3280b5[_0x21436e(0x2da)]()['includes'](_0x21436e(0x2f5))?(io['to']('botmanager')['emit'](_0x21436e(0x304),_0x21436e(0x255)),logger[_0x21436e(0x330)](_0x21436e(0x255))):(io['to'](_0x21436e(0x190))[_0x21436e(0x17e)](_0x21436e(0x304),_0x21436e(0x1e7)),logger['full'](_0x21436e(0x1e7)),logger[_0x21436e(0x260)](_0x21436e(0x378),_0x3280b5['toString']()+_0x21436e(0x1f0)+_0x3280b5['code']));return;}logger[_0x21436e(0x260)]('CoinMarketCap\x20API\x20key\x20validated');}function updateSetting(_0xb83fcf,_0x347679){const _0x1239b2=_0x14c6b8;dbSettings[_0x1239b2(0x251)](_0x1239b2(0x22d)+_0xb83fcf,_0x347679)[_0x1239b2(0x1bd)](),settings=getSettings(),io['to'](_0x1239b2(0x190))[_0x1239b2(0x17e)](_0x1239b2(0x38a),cleanSettings());}function storeSecure(_0x2c9204){const _0x32563c=_0x14c6b8;dbSecure[_0x32563c(0x222)](_0x32563c(0x375))[_0x32563c(0x1b9)](_0x2c9204)['write'](),secure=_0x2c9204;}function addBlacklist(_0x21c6dc){const _0xc7806e=_0x14c6b8;cleanBlacklist();let _0x1ee1d1;devices[_0x21c6dc][_0xc7806e(0x29b)]?_0x1ee1d1=Math['max'](devices[_0x21c6dc][_0xc7806e(0x29b)][_0xc7806e(0x340)],loginExpiry):_0x1ee1d1=loginExpiry,dbSecure[_0xc7806e(0x222)](_0xc7806e(0x365))[_0xc7806e(0x1b9)]({'expiry':new Date()[_0xc7806e(0x346)]()+_0x1ee1d1*0x3c*0x3e8,'token':devices[_0x21c6dc][_0xc7806e(0x36b)]['token']})[_0xc7806e(0x1bd)](),blacklist=dbSecure[_0xc7806e(0x222)](_0xc7806e(0x365))['value']();}function cleanBlacklist(){const _0x5f5848=_0x14c6b8;let _0x348ea6=dbSecure[_0x5f5848(0x222)](_0x5f5848(0x365))[_0x5f5848(0x253)]()[_0x5f5848(0x354)](),_0x231a49=new Date()['getTime']();_0x348ea6['forEach'](_0x319532=>{const _0x5a404a=_0x5f5848;_0x319532[_0x5a404a(0x340)]<_0x231a49&&dbSecure[_0x5a404a(0x222)]('blacklist')[_0x5a404a(0x2f3)]({'expiry':_0x319532[_0x5a404a(0x340)]})[_0x5a404a(0x1bd)]();});}function initStates(){const _0x2bf2ae=_0x14c6b8;let _0x42e12f=getConfiguration();_0x42e12f[_0x2bf2ae(0x35c)](_0x5d333d=>{const _0x3f6c20=_0x2bf2ae;_0x5d333d[_0x3f6c20(0x24c)]=_0x3f6c20(0x1bf);}),storeConfiguration(_0x42e12f);}async function generateKeys(){const _0x41a640=_0x14c6b8,_0x1a7562=forge[_0x41a640(0x266)]['rsa'][_0x41a640(0x2c3)]({'bits':0x1000,'e':0x10001}),_0x35f5f5=forge[_0x41a640(0x266)][_0x41a640(0x281)](_0x1a7562[_0x41a640(0x28f)]),_0x1a89bd=forge[_0x41a640(0x266)][_0x41a640(0x1e8)](_0x1a7562[_0x41a640(0x2c8)]);return{'privateKey':_0x35f5f5,'publicKey':_0x1a89bd};}async function oneTimeMigration(){const _0x4a3226=_0x14c6b8;let _0x4cbdb7=getSettings(),_0x3e014d=![];!_0x4cbdb7[_0x4a3226(0x32e)](_0x4a3226(0x1f9))&&(_0x4cbdb7[_0x4a3226(0x1f9)]=0x0,_0x3e014d=!![]);!_0x4cbdb7[_0x4a3226(0x32e)]('lastmsgemitted')&&(_0x4cbdb7[_0x4a3226(0x30e)]=0x0,_0x3e014d=!![]);!_0x4cbdb7[_0x4a3226(0x32e)](_0x4a3226(0x2cf))&&(_0x4cbdb7[_0x4a3226(0x2cf)]=_0x4a3226(0x259),_0x3e014d=!![]);!_0x4cbdb7[_0x4a3226(0x32e)]('onepagemode')&&(_0x4cbdb7[_0x4a3226(0x2db)]=![],_0x3e014d=!![]);!_0x4cbdb7[_0x4a3226(0x32e)](_0x4a3226(0x19b))&&(_0x4cbdb7['marketcapApi']='',_0x3e014d=!![]);if(_0x3e014d)storeSettings(_0x4cbdb7);try{fs[_0x4a3226(0x258)](configbackuppath,{'withFileTypes':!![]})['forEach'](_0xa2ad1d=>{const _0x5142da=_0x4a3226;if(!_0xa2ad1d[_0x5142da(0x35d)]()){if(!_0xa2ad1d[_0x5142da(0x181)]['startsWith']('backup-full@'))fs[_0x5142da(0x2ac)](configbackuppath+_0xa2ad1d[_0x5142da(0x181)]);}else fs['rmSync'](configbackuppath+_0xa2ad1d[_0x5142da(0x181)],{'recursive':!![]});});}catch(_0x6b8e1f){logger['debug'](_0x4a3226(0x31d),_0x6b8e1f);}}function storeConfiguration(_0x55c1fb){const _0x1ab9fb=_0x14c6b8;dbConfig[_0x1ab9fb(0x222)](_0x1ab9fb(0x302))['remove']()[_0x1ab9fb(0x1bd)](),dbConfig[_0x1ab9fb(0x222)](_0x1ab9fb(0x302))[_0x1ab9fb(0x1b9)](..._0x55c1fb)['write'](),config=_0x55c1fb;}async function resetPassword(){const _0x24ebba=_0x14c6b8;if(tgBot&&settings[_0x24ebba(0x20d)]){const _0x158b11=Markup[_0x24ebba(0x359)]([Markup[_0x24ebba(0x1a6)]['callback'](_0x24ebba(0x29f),_0x24ebba(0x2af)),Markup['button'][_0x24ebba(0x21d)]('no',_0x24ebba(0x1e3))]);await sendTelegram(settings[_0x24ebba(0x20d)],_0x24ebba(0x2d2),_0x158b11),tgBot['action'](/resetpw_(.+)/,async _0x2ee115=>{const _0x2f5be3=_0x24ebba,_0x2f1360=_0x2ee115['match'][0x1];_0x2ee115[_0x2f5be3(0x2c6)]();if(_0x2f1360!='no'){const _0x2dbb27=0xf,_0x93d147='0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$',_0x21668a=Array[_0x2f5be3(0x312)](crypto[_0x2f5be3(0x16f)](new Uint32Array(_0x2dbb27)))['map'](_0x1ee944=>_0x93d147[_0x1ee944%_0x93d147[_0x2f5be3(0x2b4)]])[_0x2f5be3(0x1b2)](''),_0x6f60f7=bcrypt[_0x2f5be3(0x2e3)](_0x21668a,saltRounds);storeSettings({'bbPassword':_0x6f60f7}),await sendTelegram(_0x2ee115['chat']['id'],_0x2f5be3(0x22f)+_0x21668a,{'parse_mode':_0x2f5be3(0x225)});}else await sendTelegram(_0x2ee115[_0x2f5be3(0x26d)]['id'],_0x2f5be3(0x396));});}}async function confirmRestore(_0xe3bb5b,_0x455109){const _0x50319a=_0x14c6b8;io['to'](_0x50319a(0x190))[_0x50319a(0x17e)](_0x50319a(0x304),_0x50319a(0x352),_0x50319a(0x343));if(tgBot&&settings[_0x50319a(0x20d)]){const _0x1af491=uuidRandom();tmpStorage[_0x1af491]={'path':_0xe3bb5b,'filename':_0x455109};const _0x4f906a=Markup[_0x50319a(0x359)]([Markup[_0x50319a(0x1a6)][_0x50319a(0x21d)](_0x50319a(0x29f),_0x50319a(0x296)+_0x1af491),Markup[_0x50319a(0x1a6)][_0x50319a(0x21d)]('no',_0x50319a(0x1dd)+_0x1af491)]);await sendTelegram(settings['telegramChatId'],_0x50319a(0x199),_0x4f906a),tgBot[_0x50319a(0x297)](/restore_(.+)_(.+)/,async _0x1b66a5=>{const _0x327798=_0x50319a,_0x23a7d0=_0x1b66a5[_0x327798(0x249)][0x1],_0x261307=_0x1b66a5[_0x327798(0x249)][0x2],{path:_0x529067,filename:_0x3d79ed}=tmpStorage[_0x261307];delete tmpStorage[_0x261307],_0x1b66a5[_0x327798(0x2c6)](),_0x23a7d0=='yes'?(logger[_0x327798(0x260)](_0x327798(0x265)),await sendTelegram(_0x1b66a5[_0x327798(0x26d)]['id'],_0x327798(0x205),{'parse_mode':'HTML'}),unzipFile(_0x529067,_0x3d79ed)):(logger[_0x327798(0x260)](_0x327798(0x26b)),await sendTelegram(_0x1b66a5['chat']['id'],_0x327798(0x26b)));});}}function getServerTime(){const _0x588737=_0x14c6b8,_0x7d51e7=new Date();return _0x7d51e7['getFullYear']()+'/'+(_0x7d51e7['getMonth']()+0x1)[_0x588737(0x2da)]()[_0x588737(0x1d4)](0x2,'0')+'/'+_0x7d51e7[_0x588737(0x2bd)]()[_0x588737(0x2da)]()['padStart'](0x2,'0')+'\x20'+_0x7d51e7[_0x588737(0x22a)]()[_0x588737(0x2da)]()[_0x588737(0x1d4)](0x2,'0')+':'+_0x7d51e7[_0x588737(0x223)]()['toString']()[_0x588737(0x1d4)](0x2,'0')+':'+_0x7d51e7[_0x588737(0x393)]()[_0x588737(0x2da)]()[_0x588737(0x1d4)](0x2,'0');}function getTimeStamp(){const _0x447d04=_0x14c6b8,_0x15f5dd=shiftedTime();return _0x15f5dd[_0x447d04(0x32c)]()+'/'+(_0x15f5dd[_0x447d04(0x1f3)]()+0x1)['toString']()[_0x447d04(0x1d4)](0x2,'0')+'/'+_0x15f5dd[_0x447d04(0x2bd)]()[_0x447d04(0x2da)]()['padStart'](0x2,'0')+'\x20'+_0x15f5dd[_0x447d04(0x22a)]()['toString']()['padStart'](0x2,'0')+':'+_0x15f5dd['getMinutes']()['toString']()[_0x447d04(0x1d4)](0x2,'0')+':'+_0x15f5dd['getSeconds']()[_0x447d04(0x2da)]()[_0x447d04(0x1d4)](0x2,'0');}function getCleanTimeStamp(){const _0x444a07=_0x14c6b8,_0x158827=shiftedTime();return _0x158827['getFullYear']()+(_0x158827[_0x444a07(0x1f3)]()+0x1)[_0x444a07(0x2da)]()[_0x444a07(0x1d4)](0x2,'0')+_0x158827['getDate']()[_0x444a07(0x2da)]()['padStart'](0x2,'0')+'-'+_0x158827[_0x444a07(0x22a)]()[_0x444a07(0x2da)]()['padStart'](0x2,'0')+_0x158827[_0x444a07(0x223)]()[_0x444a07(0x2da)]()[_0x444a07(0x1d4)](0x2,'0')+_0x158827[_0x444a07(0x393)]()['toString']()[_0x444a07(0x1d4)](0x2,'0');}function shiftedTime(){const _0x309ffe=_0x14c6b8,_0x1cddef=new Date();let _0x28e7c1=_0x1cddef;if(settings[_0x309ffe(0x2f2)]&&settings[_0x309ffe(0x2f2)]!==0x0)_0x28e7c1=fns[_0x309ffe(0x24f)](_0x1cddef,{'hours':settings['timeshift']});return _0x28e7c1;}async function startScheduler(){const _0x2f263c=_0x14c6b8,_0x338455=new Date()[_0x2f263c(0x275)](),_0xcd9630=shiftedTime()[_0x2f263c(0x22a)]();_0xcd9630==0x4&&backupConfigFiles(),_0xcd9630==0x0&&(rotateLogFiles(),logger[_0x2f263c(0x260)]('--------------------------------------'),logger[_0x2f263c(0x260)](_0x2f263c(0x269)+serverversion+_0x2f263c(0x2b0)+(environment==_0x2f263c(0x2e9)?_0x2f263c(0x33b):'')),logger[_0x2f263c(0x260)](_0x2f263c(0x376))),_0x338455%0x6==0x0&&triggerAnalytics(),_0x338455%0x6==0x0&&getMessages(),await sleep(schedulerInterval),startScheduler();}async function restoreBackupFile(_0x41c954){const _0x7c547d=_0x14c6b8;logger[_0x7c547d(0x260)](_0x7c547d(0x1a0)+_0x41c954);const _0x538ff5=getBotsWithMode();_0x538ff5[_0x7c547d(0x2b4)]>0x0?confirmRestore(configbackuppath,_0x41c954):unzipFile(configbackuppath,_0x41c954);}async function getBackupFiles(_0x3099d1=null){const _0x33a279=_0x14c6b8;let _0x4f77f8=[],_0xdfb4b4=fs[_0x33a279(0x258)](configbackuppath,{'withFileTypes':!![]});_0xdfb4b4[_0x33a279(0x332)]((_0x183903,_0x5f0644)=>_0x183903['name']<_0x5f0644['name']?0x1:_0x5f0644[_0x33a279(0x181)]<_0x183903[_0x33a279(0x181)]?-0x1:0x0),_0xdfb4b4['forEach'](_0x54425b=>{const _0x502608=_0x33a279;if(!_0x54425b[_0x502608(0x35d)]()&&_0x54425b[_0x502608(0x181)][_0x502608(0x319)]('backup-full@')&&_0x54425b[_0x502608(0x181)]['endsWith']('.zip')){const _0x27ec93=formatDate(fs[_0x502608(0x271)](configbackuppath+_0x54425b[_0x502608(0x181)])[_0x502608(0x25a)]);_0x4f77f8[_0x502608(0x1b9)]({'name':_0x54425b[_0x502608(0x181)],'mtime':_0x27ec93});}});if(_0x3099d1)io['to'](_0x3099d1)[_0x33a279(0x17e)](_0x33a279(0x39b),_0x4f77f8);else return _0x4f77f8;}async function backupConfigFiles(){const _0x1e7fc8=_0x14c6b8;await zipFiles(_0x1e7fc8(0x322));const _0x59c60a=getCleanTimeStamp();fs['copyFileSync'](zippath+'backup-full.zip',configbackuppath+(_0x1e7fc8(0x341)+_0x59c60a+_0x1e7fc8(0x388)));let _0xf0b79b=fs[_0x1e7fc8(0x258)](configbackuppath,{'withFileTypes':!![]});_0xf0b79b[_0x1e7fc8(0x332)]((_0x454fd7,_0x472d66)=>_0x454fd7[_0x1e7fc8(0x181)]<_0x472d66[_0x1e7fc8(0x181)]?0x1:_0x472d66['name']<_0x454fd7['name']?-0x1:0x0),_0xf0b79b[_0x1e7fc8(0x2b4)]>maxBackups&&fs[_0x1e7fc8(0x2ac)](configbackuppath+_0xf0b79b[_0xf0b79b[_0x1e7fc8(0x2b4)]-0x1][_0x1e7fc8(0x181)]);}function rotateLogFiles(){const _0x2b4c63=_0x14c6b8,_0x38e4a3=fs[_0x2b4c63(0x271)](logspath+_0x2b4c63(0x19d)),_0x3ec7c4=_0x38e4a3[_0x2b4c63(0x1e4)]/0x400;if(_0x3ec7c4>0x64){let _0x21f579=fs[_0x2b4c63(0x258)](logspath,{'withFileTypes':!![]});_0x21f579[_0x2b4c63(0x332)]((_0x4956de,_0x34d875)=>_0x4956de['name']<_0x34d875['name']?0x1:_0x34d875[_0x2b4c63(0x181)]<_0x4956de[_0x2b4c63(0x181)]?-0x1:0x0),_0x21f579[_0x2b4c63(0x35c)](_0x3f0a24=>{const _0x4add9a=_0x2b4c63;if(_0x3f0a24[_0x4add9a(0x181)]==_0x4add9a(0x292))fs[_0x4add9a(0x1d7)](logspath+_0x3f0a24[_0x4add9a(0x181)],logspath+'output-003.log');if(_0x3f0a24['name']=='output-001.log')fs['copyFileSync'](logspath+_0x3f0a24[_0x4add9a(0x181)],logspath+_0x4add9a(0x292));_0x3f0a24['name']=='output-000.log'&&(fs[_0x4add9a(0x1d7)](logspath+_0x3f0a24['name'],logspath+'output-001.log'),fs[_0x4add9a(0x1d0)](logspath+_0x3f0a24[_0x4add9a(0x181)],''));});}}async function zipFiles(_0x1dbf80){const _0xf3eb31=_0x14c6b8;let _0xd143d2;if(_0x1dbf80==_0xf3eb31(0x2a7))_0xd143d2=logspath;if(_0x1dbf80==_0xf3eb31(0x17b))_0xd143d2=configpath;if(_0x1dbf80==_0xf3eb31(0x322))_0xd143d2=configpath;let _0x244097=fs[_0xf3eb31(0x258)](_0xd143d2,{'withFileTypes':!![]});const _0x2f4d29=new JSZip();_0x244097[_0xf3eb31(0x35c)](_0x458cfd=>{const _0x58a2c2=_0xf3eb31;if(!_0x458cfd[_0x58a2c2(0x35d)]()){let _0x384620=fs[_0x58a2c2(0x351)](_0xd143d2+_0x458cfd['name']);if(_0x1dbf80==_0x58a2c2(0x17b)){const _0x494c98=/^bot-[0-9]{3}-config.json$/,_0xb1754c=_0x494c98['test'](_0x458cfd[_0x58a2c2(0x181)]);if(_0xb1754c){const _0x4053b1=JSON[_0x58a2c2(0x337)](_0x384620);if(_0x4053b1[_0x58a2c2(0x367)][0x0]){_0x4053b1[_0x58a2c2(0x367)][0x0]['apiKey']=_0x58a2c2(0x2d8),_0x4053b1['bot'][0x0][_0x58a2c2(0x1fa)]=_0x58a2c2(0x2d8);if(_0x4053b1[_0x58a2c2(0x367)][0x0]['apiPassword'])_0x4053b1[_0x58a2c2(0x367)][0x0][_0x58a2c2(0x177)]='***';}_0x384620=JSON[_0x58a2c2(0x1f6)](_0x4053b1,null,0x2);}if(_0x458cfd[_0x58a2c2(0x181)]==_0x58a2c2(0x363)){const _0x5312ce=JSON[_0x58a2c2(0x337)](_0x384620);if(_0x5312ce[_0x58a2c2(0x38a)][_0x58a2c2(0x273)])_0x5312ce[_0x58a2c2(0x38a)][_0x58a2c2(0x273)]=![];if(_0x5312ce['settings'][_0x58a2c2(0x369)])_0x5312ce[_0x58a2c2(0x38a)][_0x58a2c2(0x369)]=_0x58a2c2(0x2d8);if(_0x5312ce[_0x58a2c2(0x38a)][_0x58a2c2(0x2df)])_0x5312ce[_0x58a2c2(0x38a)][_0x58a2c2(0x2df)]='***';if(_0x5312ce[_0x58a2c2(0x38a)][_0x58a2c2(0x20d)])_0x5312ce[_0x58a2c2(0x38a)][_0x58a2c2(0x20d)]=null;if(_0x5312ce[_0x58a2c2(0x38a)]['marketcapApi'])_0x5312ce[_0x58a2c2(0x38a)][_0x58a2c2(0x19b)]='***';_0x384620=JSON[_0x58a2c2(0x1f6)](_0x5312ce,null,0x2);}if(_0x458cfd[_0x58a2c2(0x181)]!='bb-secure.json')_0x2f4d29[_0x58a2c2(0x231)](_0x458cfd[_0x58a2c2(0x181)],_0x384620);}else _0x2f4d29[_0x58a2c2(0x231)](_0x458cfd[_0x58a2c2(0x181)],_0x384620);}});const _0x88be94=await _0x2f4d29[_0xf3eb31(0x342)]({'type':_0xf3eb31(0x2a0),'base64':![],'compression':_0xf3eb31(0x2f6)});fs[_0xf3eb31(0x1d0)](zippath+(_0x1dbf80+'.zip'),_0x88be94,_0xf3eb31(0x2d3));}async function unzipFile(_0x5c1a8b,_0x57ad09){const _0x2265d5=_0x14c6b8;fs[_0x2265d5(0x258)](configpath,{'withFileTypes':!![]})[_0x2265d5(0x35c)](_0x29ad89=>{const _0x4d448e=_0x2265d5;if(!_0x29ad89[_0x4d448e(0x35d)]())fs[_0x4d448e(0x379)](configpath+_0x29ad89[_0x4d448e(0x181)]);});const _0x1f879c=fs['readFileSync'](_0x5c1a8b+_0x57ad09,'binary'),_0x159c16=await JSZip[_0x2265d5(0x2be)](_0x1f879c,{'base64':![],'checkCRC32':!![]});for(const _0xf39f4c of Object[_0x2265d5(0x338)](_0x159c16['files'])){const _0x1069b0=_0x159c16['files'][_0xf39f4c],_0x128c35=await _0x1069b0[_0x2265d5(0x399)](_0x2265d5(0x2a0));fs[_0x2265d5(0x1d0)](configpath+_0x1069b0[_0x2265d5(0x181)],_0x128c35);}fs[_0x2265d5(0x258)](temppath,{'withFileTypes':!![]})['forEach'](_0x1c3cd7=>{const _0x428354=_0x2265d5;if(!_0x1c3cd7[_0x428354(0x35d)]())fs[_0x428354(0x379)](temppath+_0x1c3cd7[_0x428354(0x181)]);}),logger['debug'](_0x2265d5(0x274)),process[_0x2265d5(0x2d6)]({'restore':!![]},_0x40fc8c=>{});}async function getPublicIp(){const _0x3b654b=_0x14c6b8;try{const _0x14536a=await axios[_0x3b654b(0x222)](_0x3b654b(0x34b));publicip=_0x14536a[_0x3b654b(0x37e)]['ip'];}catch(_0x49cecd){}}async function triggerAnalytics(){const _0x3b5bd1=_0x14c6b8;if(!publicip)await getPublicIp();const _0x20b9fd=getBotsWithMode();let _0x3b10dc=0x0;_0x20b9fd[_0x3b5bd1(0x35c)](_0x34770e=>{const _0x323029=_0x3b5bd1;if(_0x34770e[_0x323029(0x31e)]===_0x323029(0x326))_0x3b10dc++;});const _0x36e7ca=getBotExchanges();mixpanel[_0x3b5bd1(0x248)](_0x3b5bd1(0x329),{'distinct_id':settings[_0x3b5bd1(0x398)],'ip':publicip,'version':serverversion,'numbots':_0x20b9fd['length'],'numbotsenabled':_0x3b10dc,'exchanges':_0x36e7ca,'environment':environment});}async function getMessages(){const _0x3e798b=_0x14c6b8,_0x1f9914=_0x3e798b(0x202),_0x5e2585=new GraphQLClient(_0x1f9914),_0x3a328b={'authorization':_0x3e798b(0x37f)},_0x5be6fc=serverversion[_0x3e798b(0x229)]('.'),_0x420f7f=_0x5be6fc[0x0]+'.'+_0x5be6fc[0x1],_0x4b07a2=Math[_0x3e798b(0x27f)](settings[_0x3e798b(0x1f9)],settings['lastmsgemitted']),_0x31a6c3={'last':parseInt(_0x4b07a2),'bbm':_0x420f7f},_0x3937e4=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x5586a9;try{_0x5586a9=await _0x5e2585[_0x3e798b(0x27e)](_0x3937e4,_0x31a6c3,_0x3a328b);}catch(_0x4e4353){}if(_0x5586a9&&_0x5586a9[_0x3e798b(0x227)]){let _0x43a92c=settings[_0x3e798b(0x1f9)],_0x46464c=settings[_0x3e798b(0x1f9)];newMessages=[];for(const _0x475da0 of _0x5586a9[_0x3e798b(0x227)]){newMessages[_0x3e798b(0x1b9)](_0x475da0);let _0x558766=![];_0x475da0[_0x3e798b(0x2b5)]&&(updateSetting('latestversion',_0x475da0[_0x3e798b(0x2b5)]),_0x558766=isNewerVersion(serverversion,_0x475da0[_0x3e798b(0x2b5)])||serverversion==_0x475da0[_0x3e798b(0x2b5)]);if(!_0x558766&&_0x475da0[_0x3e798b(0x243)]>_0x43a92c){if(_0x475da0[_0x3e798b(0x18b)]==='any'||serverversion[_0x3e798b(0x319)](_0x475da0[_0x3e798b(0x18b)])){let _0x24f41e=''+_0x475da0[_0x3e798b(0x38e)]+'\x0a\x0a'+_0x475da0[_0x3e798b(0x387)];const _0x351762=await sendTelegramMsg(toTelegramMarkdown(_0x24f41e),'Markdown');_0x43a92c=_0x475da0[_0x3e798b(0x243)];}}_0x46464c=_0x475da0[_0x3e798b(0x243)];}updateAvailable=isNewerVersion(settings[_0x3e798b(0x2cf)],serverversion),updateSetting(_0x3e798b(0x1f9),_0x46464c),emitMessages();}}function emitMessages(){const _0x458b9c=_0x14c6b8,_0x566906=settings[_0x458b9c(0x30e)];let _0x213497=[];newMessages[_0x458b9c(0x35c)](_0x3f7b88=>{const _0x21e60a=_0x458b9c;_0x3f7b88[_0x21e60a(0x243)]>_0x566906&&_0x213497[_0x21e60a(0x1b9)](_0x3f7b88);}),_0x213497[_0x458b9c(0x2b4)]>0x0&&getAllClients()['forEach'](_0x301343=>{const _0x4c9346=_0x458b9c;getSocket(_0x301343['id'])[_0x4c9346(0x17e)](_0x4c9346(0x387),_0x213497);});}function confirmMessage(_0x1f5f16){const _0x11bcfb=_0x14c6b8;updateSetting(_0x11bcfb(0x30e),Number(_0x1f5f16));}function isNewerVersion(_0x56f5fb,_0x26e51f){const _0x1f407f=_0x14c6b8,_0x9b9ef=_0x26e51f[_0x1f407f(0x229)]('.'),_0x3c3d26=_0x56f5fb[_0x1f407f(0x229)]('.');for(var _0x1c1d3a=0x0;_0x1c1d3a<_0x3c3d26[_0x1f407f(0x2b4)];_0x1c1d3a++){const _0x32c7cd=~~_0x3c3d26[_0x1c1d3a],_0x194c80=~~_0x9b9ef[_0x1c1d3a];if(_0x32c7cd>_0x194c80)return!![];if(_0x32c7cd<_0x194c80)return![];}return![];}function toTelegramMarkdown(_0x4ae4ce){const _0x107c4c=_0x14c6b8,_0x1b553e=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x52ab1a=/\*{2}(.+?)\*{2}/gim;return _0x4ae4ce=_0x4ae4ce[_0x107c4c(0x38b)](_0x1b553e,_0x107c4c(0x1fd))[_0x107c4c(0x38b)](_0x52ab1a,_0x107c4c(0x2c2)),_0x4ae4ce;}async function validateConfigFile(){const _0x5e15ba=_0x14c6b8,_0x2830ab=dbConfig[_0x5e15ba(0x222)](_0x5e15ba(0x302))['sortBy'](_0x5e15ba(0x270))[_0x5e15ba(0x354)]()||[];if(_0x2830ab[_0x5e15ba(0x2b4)]==0x0){let _0xab3dcf=0x0,_0x3c5fbe=[];const _0x5c490c=/^bot-([0-9]{3})-config.json$/,_0x432d20=fs['readdirSync'](configpath);_0x432d20['forEach'](_0x1a6189=>{const _0x5e76f2=_0x5e15ba,_0x255d66=_0x5c490c[_0x5e76f2(0x28d)](_0x1a6189);if(_0x255d66){const _0x3e36e5=_0x255d66[0x1];let _0x3ab55f=getBotAttributes(_0x3e36e5);_0x3c5fbe[_0x5e76f2(0x1b9)]({'botID':_0x3e36e5,'botname':_0x3ab55f['botname'],'status':_0x5e76f2(0x374),'live':_0x5e76f2(0x1bf)}),_0xab3dcf++;}}),_0xab3dcf!=0x0&&(dbConfig[_0x5e15ba(0x222)](_0x5e15ba(0x302))[_0x5e15ba(0x188)](_0x3c5fbe)[_0x5e15ba(0x1bd)](),config=_0x3c5fbe,restoredConfigFile=_0xab3dcf);}}async function restoreConfigNotify(_0x1cdbad){const _0x440d75=_0x14c6b8;let _0x1afdc8;if(restoredConfigFile==0x1)_0x1afdc8=_0x440d75(0x1da);else _0x1afdc8='NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run';if(_0x1cdbad)io['to']('botmanager')[_0x440d75(0x17e)](_0x440d75(0x304),_0x1afdc8);else{logger[_0x440d75(0x333)](_0x440d75(0x295)),logger['simple'](_0x1afdc8),logger[_0x440d75(0x333)]('-----------------------------------------------------------------------------------'),logger['simple']('');if(tgBot&&settings[_0x440d75(0x20d)]&&settings['telegramEvents']!=_0x440d75(0x2e8))await sendTelegram(settings[_0x440d75(0x20d)],_0x440d75(0x2ef)+_0x1afdc8);}}function decryptRSA(_0xc66825,_0x464905){const _0x31e9b5=_0x14c6b8,_0x1c7a76=forge[_0x31e9b5(0x266)][_0x31e9b5(0x2a1)](_0xc66825),_0x4b435a=_0x1c7a76[_0x31e9b5(0x357)](forge[_0x31e9b5(0x300)][_0x31e9b5(0x2e7)](_0x464905),_0x31e9b5(0x187),{'md':forge['md'][_0x31e9b5(0x1c0)][_0x31e9b5(0x197)](),'mgf1':{'md':forge['md'][_0x31e9b5(0x1c0)][_0x31e9b5(0x197)]()}});return _0x4b435a;}function validateCredentials(_0xfc00e,_0x4e4d32){const _0x646feb=_0x14c6b8;if(_0xfc00e[_0x646feb(0x20e)]==settings[_0x646feb(0x24a)]&&bcrypt[_0x646feb(0x27b)](_0xfc00e[_0x646feb(0x327)],settings[_0x646feb(0x369)])){if(settings['f2aRequired'])return{'allow':![],'reason':_0x646feb(0x19a),'token':null};else{const _0x16c655=generateLoginToken(_0x4e4d32);return{'allow':!![],'reason':'login\x20token\x20generated','token':_0x16c655};}}else return{'allow':![],'reason':'invalid\x20credentials','token':null};}function refreshToken(_0x723ca8){const _0x7ce958=_0x14c6b8,_0x338f38=generateLoginToken(_0x723ca8);return{'allow':!![],'reason':_0x7ce958(0x226),'token':_0x338f38};}function validateAccess(_0x352c90,_0x51fe30,_0x5171eb){const _0x44c844=_0x14c6b8,_0x40fce7=_0x5171eb?_0x5171eb:devices[_0x51fe30]['ip'];let _0xfe99d8;const _0x223764=_0x2744cf=>{const _0x17c570=_0x3d8c;if(settings[_0x17c570(0x273)]){if(settings['f2aRequired']){if(telegram2FaApproved(_0x51fe30)){const _0x21db69=generateLoginToken(_0x51fe30);return{'allow':!![],'reason':'2FA\x20login\x20token\x20generated','token':_0x21db69};}else return{'allow':![],'reason':'login\x20required','token':null};}else return _0xfe99d8=validToken(_0x2744cf,_0x51fe30),_0xfe99d8[_0x17c570(0x32e)](_0x17c570(0x343))?{'allow':!![],'reason':'login\x20token\x20valid','token':_0x2744cf}:{'allow':![],'reason':_0x17c570(0x2ec),'token':null};}else return{'allow':!![],'reason':'login\x20not\x20required','token':null};};if(settings[_0x44c844(0x314)]){let _0x308d1d=[...settings['whitelist'],_0x44c844(0x1eb),'::ffff:127.0.0.1',_0x44c844(0x230)];if(_0x308d1d[_0x44c844(0x1a9)](_0x40fce7))return _0x223764(_0x352c90);else{_0xfe99d8=validToken(_0x352c90,_0x51fe30);if(_0xfe99d8[_0x44c844(0x32e)](_0x44c844(0x343)))return _0x223764(_0x352c90);else{if(telegramIpApproved(_0x51fe30)){const _0x2aa4c3=generateToken(_0x51fe30);return _0xfe99d8=_0x223764(_0x352c90),_0xfe99d8[_0x44c844(0x198)]?{'allow':!![],'reason':_0x44c844(0x364),'token':_0x2aa4c3}:_0xfe99d8;}else return settings['temporaryAccessAllowed']?{'allow':![],'reason':'2FA\x20required','token':null}:{'allow':![],'reason':_0x44c844(0x1d3),'token':null};}}}else return _0x223764(_0x352c90);}function timelyDecrypt(_0x1d6a87,_0x4ab1c1,_0x25e5ad='@'){const _0x1a701f=_0x14c6b8;if(_0x1d6a87)try{const _0x7332e6=decryptRSA(secure[_0x1a701f(0x28f)],_0x1d6a87),_0x281b57=_0x7332e6[_0x1a701f(0x229)](_0x25e5ad)[0x0],_0x5621e2=_0x7332e6[_0x1a701f(0x229)](_0x25e5ad)[0x1],_0x4e6fdb=new Date()[_0x1a701f(0x346)]();if(_0x4ab1c1){if(_0x4e6fdb-_0x5621e2<maxSecretAge*0x3e8)return _0x281b57;else return![];}else return _0x281b57;}catch(_0xf6605f){return![];}else return![];}const validToken=(_0x54031a,_0x1f3015)=>{const _0x289317=_0x14c6b8,_0x136516=devices[_0x1f3015]['ip'];if(!_0x54031a)return{'error':'No\x20authentication\x20token'};for(let _0x298cf8 of blacklist){if(_0x298cf8[_0x289317(0x2fb)]==_0x54031a)return{'error':_0x289317(0x362)};}let _0xca7a3;try{_0xca7a3=jwt[_0x289317(0x35a)](_0x54031a,secure['secret']+_0x1f3015);}catch{return{'error':_0x289317(0x36c)};}if(!_0xca7a3[_0x289317(0x32e)](_0x289317(0x279))&&!_0xca7a3[_0x289317(0x32e)](_0x289317(0x20e))||!_0xca7a3[_0x289317(0x32e)](_0x289317(0x320)))return{'error':_0x289317(0x1ec)};if(!_0xca7a3[_0x289317(0x32e)]('username')&&_0xca7a3[_0x289317(0x32e)](_0x289317(0x279))){const {clientip:_0x20f5fb}=_0xca7a3;return _0x136516==_0x20f5fb?{'success':_0x289317(0x17f)}:{'error':_0x289317(0x20b)};}else{if(_0xca7a3[_0x289317(0x32e)](_0x289317(0x20e))&&_0xca7a3[_0x289317(0x32e)]('clientip')){const {username:_0x5a9970,clientip:_0x39b222}=_0xca7a3;return settings[_0x289317(0x24a)]==_0x5a9970&&_0x136516==_0x39b222?{'success':_0x289317(0x17f)}:{'error':'Invalid\x20username\x20or\x20IP\x20address'};}}},generateLoginToken=_0x14f09=>{const _0xedb78c=_0x14c6b8;if(_0x14f09){const _0x4c9e82=devices[_0x14f09]['ip'];return jwt[_0xedb78c(0x2cd)]({'username':settings['bbUsername'],'clientip':_0x4c9e82},secure[_0xedb78c(0x37b)]+_0x14f09,{'expiresIn':tokenRefresh*0x3c,'allowInsecureKeySizes':!![]});}else return![];},generateToken=_0x3c0f6b=>{const _0x270786=_0x14c6b8;if(_0x3c0f6b){const _0x1d2bf5=devices[_0x3c0f6b]['ip'];return jwt[_0x270786(0x2cd)]({'clientip':_0x1d2bf5},secure[_0x270786(0x37b)]+_0x3c0f6b,{'expiresIn':devices[_0x3c0f6b]['telegramIpApproval'][_0x270786(0x340)]*0x3c,'allowInsecureKeySizes':!![]});}else return![];},telegramIpApproved=_0x5c8d0d=>{const _0x16c7be=_0x14c6b8;let _0x25e3d0=![];return devices[_0x5c8d0d][_0x16c7be(0x29b)]&&devices[_0x5c8d0d]['telegramIpApproval'][_0x16c7be(0x340)]!=_0x16c7be(0x1de)&&(_0x25e3d0=devices[_0x5c8d0d][_0x16c7be(0x29b)][_0x16c7be(0x279)]==devices[_0x5c8d0d]['ip']&&new Date()['getTime']()-devices[_0x5c8d0d][_0x16c7be(0x29b)][_0x16c7be(0x1ad)]<devices[_0x5c8d0d][_0x16c7be(0x29b)][_0x16c7be(0x340)]*0x3c*0x3e8),_0x25e3d0;},telegram2FaApproved=_0x2ebc70=>{const _0xf4978f=_0x14c6b8;let _0x4c50b7=![];return devices[_0x2ebc70][_0xf4978f(0x348)]&&devices[_0x2ebc70][_0xf4978f(0x348)][_0xf4978f(0x340)]!=_0xf4978f(0x1de)&&(_0x4c50b7=devices[_0x2ebc70][_0xf4978f(0x348)][_0xf4978f(0x279)]==devices[_0x2ebc70]['ip']&&new Date()['getTime']()-devices[_0x2ebc70][_0xf4978f(0x348)][_0xf4978f(0x1ad)]<devices[_0x2ebc70][_0xf4978f(0x348)][_0xf4978f(0x340)]*0x3c*0x3e8),_0x4c50b7;},normalizeIP=_0x1b61f4=>{const _0x1dae33=_0x14c6b8;let _0x59fed0=null,_0x4a67ed=null;if(ipaddr[_0x1dae33(0x35e)](_0x1b61f4)){const _0x32f71a=ipaddr[_0x1dae33(0x337)](_0x1b61f4);_0x32f71a[_0x1dae33(0x1cb)]()===_0x1dae33(0x2cc)?(_0x32f71a['isIPv4MappedAddress']()&&(_0x59fed0=_0x32f71a[_0x1dae33(0x2a6)]()[_0x1dae33(0x2da)]()),_0x4a67ed=_0x32f71a[_0x1dae33(0x2da)]()):(_0x59fed0=_0x32f71a[_0x1dae33(0x2da)](),_0x4a67ed=_0x32f71a[_0x1dae33(0x33a)]()[_0x1dae33(0x2da)]());}return{'show':_0x59fed0?_0x59fed0:_0x4a67ed,'store':_0x4a67ed};};function formatDate(_0x4a1c80){const _0x3ae70d=_0x14c6b8;return _0x4a1c80[_0x3ae70d(0x32c)]()+'/'+(_0x4a1c80[_0x3ae70d(0x1f3)]()+0x1)['toString']()[_0x3ae70d(0x1d4)](0x2,'0')+'/'+_0x4a1c80[_0x3ae70d(0x2bd)]()['toString']()['padStart'](0x2,'0')+'\x20'+_0x4a1c80[_0x3ae70d(0x22a)]()['toString']()[_0x3ae70d(0x1d4)](0x2,'0')+':'+_0x4a1c80[_0x3ae70d(0x223)]()[_0x3ae70d(0x2da)]()[_0x3ae70d(0x1d4)](0x2,'0')+':'+_0x4a1c80['getSeconds']()[_0x3ae70d(0x2da)]()[_0x3ae70d(0x1d4)](0x2,'0');}function sleep(_0x9f57e4){return new Promise(_0x33fd39=>setTimeout(_0x33fd39,_0x9f57e4));}