const _0x5f20e9=_0x1eb9;(function(_0xf5ac,_0x6391b7){const _0x354ed4=_0x1eb9,_0x4030fc=_0xf5ac();while(!![]){try{const _0x2f3d7e=parseInt(_0x354ed4(0x273))/0x1+parseInt(_0x354ed4(0x2cb))/0x2*(-parseInt(_0x354ed4(0x2ba))/0x3)+parseInt(_0x354ed4(0x233))/0x4+-parseInt(_0x354ed4(0x29d))/0x5+parseInt(_0x354ed4(0x323))/0x6+-parseInt(_0x354ed4(0x221))/0x7+-parseInt(_0x354ed4(0x2f0))/0x8*(-parseInt(_0x354ed4(0x302))/0x9);if(_0x2f3d7e===_0x6391b7)break;else _0x4030fc['push'](_0x4030fc['shift']());}catch(_0x249b3f){_0x4030fc['push'](_0x4030fc['shift']());}}}(_0x4c82,0x4be56));const _0x4d3f87=function(){let _0x48ec3e=!![];return function(_0x1f54a8,_0x353cfe){const _0xa0ffc1=_0x48ec3e?function(){const _0x443fac=_0x1eb9;if(_0x353cfe){const _0x1d65e4=_0x353cfe[_0x443fac(0x1f6)](_0x1f54a8,arguments);return _0x353cfe=null,_0x1d65e4;}}:function(){};return _0x48ec3e=![],_0xa0ffc1;};}(),_0x1cb395=_0x4d3f87(this,function(){const _0x5b3d87=_0x1eb9;return _0x1cb395[_0x5b3d87(0x315)]()[_0x5b3d87(0x15e)](_0x5b3d87(0x19d))[_0x5b3d87(0x315)]()[_0x5b3d87(0x1a7)](_0x1cb395)[_0x5b3d87(0x15e)]('(((.+)+)+)+$');});_0x1cb395();'use strict';process[_0x5f20e9(0x24e)][_0x5f20e9(0x260)]=0x1;const childProcess=require(_0x5f20e9(0x238)),fs=require('fs'),fns=require(_0x5f20e9(0x19c)),low=require('lowdb'),FileSync=require('lowdb/adapters/FileSync'),path=require(_0x5f20e9(0x2e6)),crypto=require(_0x5f20e9(0x2d6)),forge=require(_0x5f20e9(0x1d5)),bcrypt=require('bcryptjs'),jwt=require('jsonwebtoken'),ipaddr=require(_0x5f20e9(0x25c)),argv=require(_0x5f20e9(0x1a2))(process[_0x5f20e9(0x2d4)]['slice'](0x2))[_0x5f20e9(0x2d4)],uuidRandom=require(_0x5f20e9(0x29e)),{Telegraf,Markup}=require(_0x5f20e9(0x33d)),Mixpanel=require(_0x5f20e9(0x1d6)),axios=require(_0x5f20e9(0x365)),{GraphQLClient,gql}=require(_0x5f20e9(0x2c5)),util=require('util'),fileUpload=require('express-fileupload'),{networkInterfaces}=require('os'),JSZip=require(_0x5f20e9(0x197)),PORT=argv[_0x5f20e9(0x1bc)]||_0x5f20e9(0x275),pattern=/^[0-9]{2,4}$/;!pattern[_0x5f20e9(0x182)](PORT)&&(console[_0x5f20e9(0x2df)](_0x5f20e9(0x2ac)+PORT+_0x5f20e9(0x261)),process[_0x5f20e9(0x1c2)](0x1));const HOST=argv[_0x5f20e9(0x36d)]||null,userID=argv[_0x5f20e9(0x2c4)]||'',debugging=argv['d']||![],recreate=argv['r']||![],nodeversion=process[_0x5f20e9(0x1c5)][_0x5f20e9(0x270)];let bbpath=_0x5f20e9(0x18d),bbpath2='';const botfile=_0x5f20e9(0x2e5),configfile=_0x5f20e9(0x31c),settingsfile='bb-settings.json',securefile='bb-secure.json',environment=require('./'+bbpath2+_0x5f20e9(0x2b1))[_0x5f20e9(0x305)]||'production',maxBackups=0xa;let validInstallation=!![];const schedulerInterval=0x3c*0x3c*0x3e8;!fs[_0x5f20e9(0x1a6)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x5f20e9(0x254)),configpath=userID?bbpath+_0x5f20e9(0x2f8)+userID+'/':bbpath+_0x5f20e9(0x2f8),configbackuppath=configpath+'backup/',logspath=userID?bbpath+_0x5f20e9(0x2cd)+userID+'/':bbpath+_0x5f20e9(0x2cd),zippath=userID?bbpath+_0x5f20e9(0x25f)+userID+'/':bbpath+_0x5f20e9(0x25f),loggerfile=fs[_0x5f20e9(0x324)](logspath+_0x5f20e9(0x2a7),{'flags':'a'}),temppath=userID?bbpath+_0x5f20e9(0x22e)+userID+'/':bbpath+_0x5f20e9(0x22e);!fs[_0x5f20e9(0x1a6)](configpath)&&fs['mkdirSync'](configpath);!fs[_0x5f20e9(0x1a6)](configbackuppath)&&fs['mkdirSync'](configbackuppath);!fs[_0x5f20e9(0x1a6)](logspath)&&fs[_0x5f20e9(0x256)](logspath);!fs[_0x5f20e9(0x1a6)](zippath)&&fs['mkdirSync'](zippath);!fs['existsSync'](temppath)&&fs['mkdirSync'](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x5f20e9(0x21c)]({'bots':[]})[_0x5f20e9(0x1c6)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings['defaults']({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':'0.0.0','onepagemode':![],'marketcapApi':''}})[_0x5f20e9(0x1c6)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x5f20e9(0x21c)]({'secure':{},'blacklist':[]})[_0x5f20e9(0x1c6)]();const saltRounds=0xa,mixpanel=Mixpanel[_0x5f20e9(0x20a)]('6b67f3d61ee94b8f5c80b4affef4c4d9',{'host':'api-eu.mixpanel.com'});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings[_0x5f20e9(0x288)]&&(settings[_0x5f20e9(0x288)]!=''&&settings[_0x5f20e9(0x288)]!='***')&&settings[_0x5f20e9(0x343)]&&settings[_0x5f20e9(0x343)]!='')initTelegram();const parseColor=(_0x277793,_0x30aa46)=>{const _0xec0736=_0x5f20e9,_0xc816f3=/#[A-Z]{3}#/g;if(typeof _0x277793==_0xec0736(0x14a)){!_0x30aa46?_0x277793=_0x277793[_0xec0736(0x349)](_0xc816f3,''):(_0x277793=_0x277793[_0xec0736(0x349)](/#BLU#/g,_0xec0736(0x164)),_0x277793=_0x277793[_0xec0736(0x349)](/#RED#/g,'\x1b[31m'),_0x277793=_0x277793[_0xec0736(0x349)](/#YEL#/g,'\x1b[33m'),_0x277793=_0x277793[_0xec0736(0x349)](/#MAG#/g,_0xec0736(0x14e)),_0x277793=_0x277793[_0xec0736(0x349)](/#CYA#/g,_0xec0736(0x170)),_0x277793=_0x277793[_0xec0736(0x349)](/#RES#/g,_0xec0736(0x2e1)));;}return _0x277793;},logger={'screen':_0x143992=>{const _0x538d03=_0x5f20e9;console[_0x538d03(0x2df)](parseColor(_0x143992,!![]));},'simple':_0x221286=>{const _0x434089=_0x5f20e9;console[_0x434089(0x2df)](parseColor(_0x221286,!![])),loggerfile[_0x434089(0x1c6)](util['format'](parseColor(_0x221286,![]))+'\x0a');},'full':async _0x4a8d5d=>{const _0x1cb60d=_0x5f20e9,_0x1d42af=getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20'+_0x4a8d5d;console['log'](parseColor(_0x1d42af,!![])),loggerfile[_0x1cb60d(0x1c6)](util[_0x1cb60d(0x2e9)](parseColor(_0x1d42af,![]))+'\x0a');if(tgBot&&settings[_0x1cb60d(0x1fb)]&&settings[_0x1cb60d(0x161)]!=_0x1cb60d(0x310))await sendTelegram(settings[_0x1cb60d(0x1fb)],_0x1cb60d(0x316)+parseColor(_0x4a8d5d,![]));},'debug':async(_0x4aada7,_0x59e7ff='')=>{const _0x1bdc75=_0x5f20e9,_0x29ab25=getTimeStamp()+_0x1bdc75(0x30d)+_0x4aada7;if(debugging)console[_0x1bdc75(0x2df)](parseColor(_0x29ab25,!![]));loggerfile[_0x1bdc75(0x1c6)](util[_0x1bdc75(0x2e9)](parseColor(_0x29ab25,![]))+'\x0a');if(_0x59e7ff){if(debugging)console[_0x1bdc75(0x2df)](_0x59e7ff);loggerfile[_0x1bdc75(0x1c6)](util['format'](_0x59e7ff)+'\x0a');}}};let terminating=![];process['on'](_0x5f20e9(0x187),function(_0x410b67){const _0x34d555=_0x5f20e9;_0x410b67[_0x34d555(0x315)]()[_0x34d555(0x171)](_0x34d555(0x148))?(logger[_0x34d555(0x22d)](_0x34d555(0x1f1)+_0x410b67[_0x34d555(0x1bc)]+_0x34d555(0x345)),process[_0x34d555(0x308)]({'terminate':!![]},_0x37dd7c=>{})):logger[_0x34d555(0x22d)](_0x410b67);}),process['on'](_0x5f20e9(0x1c2),()=>{stopAllBots(),process['exit'](0x0);}),process['on']('SIGTERM',()=>{const _0x1a0fa6=_0x5f20e9;stopAllBots(),process[_0x1a0fa6(0x1c2)](0x0);}),process['on'](_0x5f20e9(0x14c),()=>{const _0x54b5b5=_0x5f20e9;stopAllBots(),process[_0x54b5b5(0x1c2)](0x0);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x5f20e9(0x2b1))[_0x5f20e9(0x2ea)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let tmpStorage={},devices=[],lastIpApproval,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0x5f20e9(0x36a)),app=express(),http=require(_0x5f20e9(0x210))[_0x5f20e9(0x17d)](app);app[_0x5f20e9(0x2c2)](fileUpload({'useTempFiles':!![]})),app[_0x5f20e9(0x2ad)](_0x5f20e9(0x2c0),async(_0x3c0702,_0x17eb2f)=>{const _0x163b70=_0x5f20e9,_0x24b2d3=_0x3c0702[_0x163b70(0x35f)][_0x163b70(0x24d)],_0x2fbbf3=getClientsWithBotID(_0x163b70(0x1e0)),_0xa88a5c=_0x3c0702[_0x163b70(0x27e)][_0x163b70(0x2d3)],_0x165c46=timelyDecrypt(_0xa88a5c,![]),_0x2a4aa4=_0x2fbbf3[_0x163b70(0x194)](_0xc5118b=>_0xc5118b[_0x163b70(0x2d3)]==_0x165c46);if(_0x2a4aa4){const _0x2f3ec1=normalizeIP(_0x3c0702[_0x163b70(0x248)][_0x163b70(0x208)])[_0x163b70(0x358)],_0x17aa55=_0x3c0702[_0x163b70(0x27e)][_0x163b70(0x363)];if(validateAccess(_0x17aa55,_0x165c46,_0x2f3ec1)[_0x163b70(0x1d7)])_0x24b2d3==_0x163b70(0x26a)&&await backupConfigFiles(),await zipFiles(_0x24b2d3),_0x17eb2f['download'](zippath+(_0x24b2d3+_0x163b70(0x295)),_0xc20802=>{const _0x1b7add=_0x163b70;_0xc20802&&(logger[_0x1b7add(0x2b2)](_0x1b7add(0x1d3)+_0x24b2d3),logger[_0x1b7add(0x22d)](_0xc20802));});else logger['full']('Unauthorized\x20attempt\x20to\x20download\x20'+_0x24b2d3+'\x20(1)');}else logger[_0x163b70(0x2b2)](_0x163b70(0x2f1)+_0x24b2d3+_0x163b70(0x283));}),app['post'](_0x5f20e9(0x303),async(_0x109031,_0x5c3c43)=>{const _0x214114=_0x5f20e9,_0x375a06=getClientsWithBotID('botmanager'),_0x1eb2cd=_0x109031[_0x214114(0x27e)][_0x214114(0x2d3)],_0x274667=timelyDecrypt(_0x1eb2cd,![]),_0x5ea462=_0x375a06[_0x214114(0x194)](_0x297cd8=>_0x297cd8[_0x214114(0x2d3)]==_0x274667);logger[_0x214114(0x228)](_0x214114(0x1c0));if(_0x5ea462){const _0x21a580=normalizeIP(_0x109031[_0x214114(0x248)]['remoteAddress'])[_0x214114(0x358)],_0x5d698f=_0x109031[_0x214114(0x27e)][_0x214114(0x363)];if(validateAccess(_0x5d698f,_0x274667,_0x21a580)['allow']){if(_0x109031[_0x214114(0x34b)]){const _0x458a62=_0x109031[_0x214114(0x34b)]['backupfile'];await _0x458a62['mv'](temppath+_0x458a62['name']),_0x5c3c43[_0x214114(0x308)]({'status':!![],'message':_0x214114(0x30e)});const _0x210db8=getBotsWithMode();_0x210db8[_0x214114(0x1b1)]>0x0?confirmRestore(temppath,_0x458a62[_0x214114(0x17b)]):unzipFile(temppath,_0x458a62[_0x214114(0x17b)]);}}else logger[_0x214114(0x2b2)]('Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)');}else logger[_0x214114(0x2b2)](_0x214114(0x156));}),app['use'](express['static'](path[_0x5f20e9(0x1b4)](__dirname,bbpath2,_0x5f20e9(0x191)))),app[_0x5f20e9(0x2c2)](express[_0x5f20e9(0x155)](path[_0x5f20e9(0x1b4)](__dirname,bbpath2,_0x5f20e9(0x20f)))),app[_0x5f20e9(0x2ad)]('/',function(_0x331033,_0x417933){const _0x318042=_0x5f20e9;_0x417933[_0x318042(0x167)](path['join'](__dirname,bbpath2,_0x318042(0x191),_0x318042(0x265)));}),app[_0x5f20e9(0x2ad)]('/:bot',function(_0x29e11d,_0x1a7f76){const _0x570eac=_0x5f20e9;_0x1a7f76['sendFile'](path['join'](__dirname,bbpath2,_0x570eac(0x20f),_0x570eac(0x265)));}),app['get']('/:bot/portfolio',(_0x3d4b62,_0x56fdd0)=>{const _0x331569=_0x5f20e9;_0x56fdd0[_0x331569(0x167)](path['join'](__dirname,bbpath2,'build',_0x331569(0x265)));}),app[_0x5f20e9(0x2ad)](_0x5f20e9(0x1e6),(_0x21cec8,_0x290e74)=>{const _0x3d8b6f=_0x5f20e9;_0x290e74[_0x3d8b6f(0x167)](path['join'](__dirname,bbpath2,_0x3d8b6f(0x20f),'index.html'));}),app[_0x5f20e9(0x2ad)](_0x5f20e9(0x246),(_0x45ca22,_0x453710)=>{const _0x125dbe=_0x5f20e9;_0x453710['sendFile'](path[_0x125dbe(0x1b4)](__dirname,bbpath2,_0x125dbe(0x20f),_0x125dbe(0x265)));}),app[_0x5f20e9(0x2ad)](_0x5f20e9(0x271),(_0x22787c,_0x296712)=>{const _0x3b9a4b=_0x5f20e9;_0x296712[_0x3b9a4b(0x167)](path[_0x3b9a4b(0x1b4)](__dirname,bbpath2,'build',_0x3b9a4b(0x265)));}),app[_0x5f20e9(0x2ad)](_0x5f20e9(0x16f),(_0x51ff72,_0x54a135)=>{const _0x1d298b=_0x5f20e9;_0x54a135[_0x1d298b(0x167)](path['join'](__dirname,bbpath2,'build',_0x1d298b(0x265)));}),app['get'](_0x5f20e9(0x169),(_0x5957c6,_0x2532fc)=>{const _0x53257c=_0x5f20e9;_0x2532fc[_0x53257c(0x167)](path[_0x53257c(0x1b4)](__dirname,bbpath2,'build',_0x53257c(0x265)));});if(HOST)http[_0x5f20e9(0x183)](PORT,HOST);else http[_0x5f20e9(0x183)](PORT);const io=require(_0x5f20e9(0x2d7))(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}function getServerIP(){const _0x222505=_0x5f20e9;let _0x3ed77e='[ip-address]';const _0x1ac1ca=networkInterfaces(),_0x1da1b7={};for(const _0x36fd53 of Object[_0x222505(0x243)](_0x1ac1ca)){for(const _0x2f2315 of _0x1ac1ca[_0x36fd53]){if((_0x2f2315[_0x222505(0x31e)]==_0x222505(0x237)||_0x2f2315[_0x222505(0x31e)]==0x4)&&!_0x2f2315[_0x222505(0x232)]){const _0x5314d8=ipaddr['parse'](_0x2f2315[_0x222505(0x1cf)])['range']();_0x5314d8!=_0x222505(0x2e7)&&(!_0x1da1b7[_0x36fd53]&&(_0x1da1b7[_0x36fd53]=[]),_0x1da1b7[_0x36fd53][_0x222505(0x2b5)](_0x2f2315[_0x222505(0x1cf)]),_0x3ed77e=_0x2f2315[_0x222505(0x1cf)]);}}}return{'serverip':_0x3ed77e,'netinterfaces':_0x1da1b7};}async function startServer(){const _0x406352=_0x5f20e9,{serverip:_0x54ca05,netinterfaces:_0x1cdc8d}=getServerIP();logger[_0x406352(0x22d)](''),logger[_0x406352(0x22d)](_0x406352(0x304)),await logger['full'](_0x406352(0x1a3)+serverversion+'#RES#\x20'+(environment==_0x406352(0x292)?_0x406352(0x2f7):'')+'\x0a'+('=>\x20Go\x20to\x20#CYA#http://127.0.0.1:'+PORT+_0x406352(0x253))+('=>\x20Go\x20to\x20#CYA#http://'+_0x54ca05+':'+PORT+_0x406352(0x21e))),logger['simple'](_0x406352(0x304));if(config[_0x406352(0x1b1)]!=0x0)for(const _0x3f0f75 of config){const _0x770c3=_0x3f0f75['mode']==_0x406352(0x258)?'a':'m';if(_0x3f0f75[_0x406352(0x27b)]==_0x406352(0x18a)||_0x3f0f75[_0x406352(0x27b)]==_0x406352(0x220))await logger[_0x406352(0x2b2)](_0x406352(0x1f3)+_0x770c3+_0x406352(0x241)+_0x3f0f75[_0x406352(0x214)]+'\x20|\x20'+_0x3f0f75[_0x406352(0x21a)]),startBot([_0x3f0f75[_0x406352(0x214)],userID],{'cwd':bbpath},function(_0x476ee3){const _0x54aca8=_0x406352;if(_0x476ee3)logger[_0x54aca8(0x2b2)](_0x476ee3);});else(_0x3f0f75[_0x406352(0x27b)]==_0x406352(0x2cc)||_0x3f0f75[_0x406352(0x27b)]=='new-disabled')&&await logger['full'](_0x406352(0x297)+_0x770c3+_0x406352(0x335)+_0x3f0f75['botID']+'\x20|\x20'+_0x3f0f75['botname']);}else!newBot&&logger['simple'](_0x406352(0x15f));if(newBot)addBot();logger['simple'](_0x406352(0x304)),logger['simple'](''),await logger[_0x406352(0x228)](_0x406352(0x21d)+nodeversion),await logger[_0x406352(0x228)](_0x406352(0x18f),_0x1cdc8d);}function startSocket(){const _0x1b4ae6=_0x5f20e9;io['on'](_0x1b4ae6(0x2ed),_0x1c3602=>{const _0x19de07=_0x1b4ae6;let _0x28e542,_0x237db7,_0x562c5f,_0x533266,_0x18bd5c;const _0x2b1ee6=_0x1c3602['handshake']['headers'][_0x19de07(0x338)];_0x237db7=_0x2b1ee6[_0x19de07(0x361)](/bot[0-9]{3}/);if(_0x237db7)_0x562c5f=_0x237db7[0x0][_0x19de07(0x361)](/[0-9]{3}/);if(_0x562c5f)_0x28e542=_0x562c5f[0x0];else _0x28e542='botmanager';const _0x225d05=_0x1c3602['handshake'][_0x19de07(0x2d0)][_0x19de07(0x279)];if(!_0x225d05)_0x1c3602[_0x19de07(0x2a8)](_0x19de07(0x27b),{'publicKey':secure['publicKey']});else{_0x533266=timelyDecrypt(_0x225d05,![]);if(!_0x533266)_0x1c3602[_0x19de07(0x2a8)]('status',{'publicKey':secure['publicKey']});else{_0x18bd5c=normalizeIP(_0x1c3602[_0x19de07(0x31f)][_0x19de07(0x208)])[_0x19de07(0x358)];if(!devices[_0x533266])devices[_0x533266]={'uuid':_0x533266,'access':{'token':null}};devices[_0x533266]['ip']=_0x18bd5c;const _0xd73449=addClient(_0x1c3602['id'],_0x533266,_0x28e542);setAccess(_0xd73449),emitMessages(),_0x1c3602['on'](_0x19de07(0x1aa),_0x508cdd=>{const _0x364d2f=_0x19de07,_0x590218=timelyDecrypt(_0x508cdd[_0x364d2f(0x2fc)],!![],'|@|');if(_0x590218){_0x508cdd={'username':_0x508cdd[_0x364d2f(0x35b)],'password':_0x590218},devices[_0x533266][_0x364d2f(0x250)]=validateCredentials(_0x508cdd,_0x533266);if(devices[_0x533266][_0x364d2f(0x250)][_0x364d2f(0x1d7)]==![]&&devices[_0x533266][_0x364d2f(0x250)][_0x364d2f(0x1c7)]==_0x364d2f(0x21f))_0x1c3602[_0x364d2f(0x2a8)](_0x364d2f(0x27b),{'access':devices[_0x533266]['access']}),loginAccess2FA(_0x533266,_0x18bd5c);else{if(devices[_0x533266][_0x364d2f(0x250)]['allow']==![]&&devices[_0x533266]['access']['reason']==_0x364d2f(0x26e))_0x1c3602[_0x364d2f(0x2a8)](_0x364d2f(0x27b),{'access':devices[_0x533266][_0x364d2f(0x250)]});else devices[_0x533266]['access'][_0x364d2f(0x1d7)]&&devices[_0x533266][_0x364d2f(0x250)][_0x364d2f(0x1c7)]==_0x364d2f(0x2ce)&&(getClientsWithUuid(_0x533266)['forEach'](_0x24bb80=>{setAccess(_0x24bb80);}),logger[_0x364d2f(0x228)](_0x364d2f(0x16c)+_0x533266[_0x364d2f(0x160)](-0x8)),setTokenRefresh(_0x533266),setSessionTimeout(_0x364d2f(0x1aa),_0x533266));}}else logger[_0x364d2f(0x2b2)](_0x364d2f(0x18c));}),_0x1c3602['on'](_0x19de07(0x1a1),()=>{resetPassword();}),_0x1c3602['on'](_0x19de07(0x329),_0x23278d=>{removeClient(_0x1c3602['id']);}),_0x28e542==_0x19de07(0x1e0)&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x165ba0){const _0x3c016d=_0x5f20e9;if(_0x165ba0!=_0x3c016d(0x1e0)&&config[_0x3c016d(0x175)]!=''){if(pid[_0x165ba0])pid[_0x165ba0][_0x3c016d(0x308)]({'function':_0x3c016d(0x225),'args':null});}_0x165ba0!=_0x3c016d(0x1e0)&&broadcastToBots('bots',JSON['stringify'](config));}function reloadBotManager(){const _0x26a9c9=_0x5f20e9;getClientsWithBotID(_0x26a9c9(0x1e0))[_0x26a9c9(0x2bf)](_0x4b933e=>{const _0x3add36=_0x26a9c9;getSocket(_0x4b933e['id'])[_0x3add36(0x2a8)](_0x3add36(0x27b),{'access':{'allow':![],'reason':_0x3add36(0x234),'token':null}});});}function getSocket(_0x18a25f){const _0x1ba6ea=_0x5f20e9,_0x520765=io[_0x1ba6ea(0x1c1)][_0x1ba6ea(0x2ad)]('/');return _0x520765['sockets'][_0x1ba6ea(0x2ad)](_0x18a25f);}function setAccess(_0x4c9f9a){const _0x42a731=_0x5f20e9,_0x9d3471=getSocket(_0x4c9f9a['id']),_0x2c77fd=_0x4c9f9a[_0x42a731(0x2d3)],_0x2019b1=_0x4c9f9a['bot'];devices[_0x2c77fd][_0x42a731(0x250)]=validateAccess(devices[_0x2c77fd][_0x42a731(0x250)][_0x42a731(0x33b)],_0x2c77fd),logger[_0x42a731(0x228)]('Setting\x20access:\x20'+devices[_0x2c77fd]['access'][_0x42a731(0x1c7)]+'\x20|\x20client:\x20...'+_0x4c9f9a['id'][_0x42a731(0x160)](-0x8)+_0x42a731(0x206)+_0x2c77fd[_0x42a731(0x160)](-0x8)),_0x9d3471[_0x42a731(0x1b4)](_0x2c77fd);if(devices[_0x2c77fd][_0x42a731(0x250)][_0x42a731(0x1d7)]){_0x9d3471[_0x42a731(0x1b4)](_0x2019b1);if(_0x2019b1==_0x42a731(0x1e0))initializeSocketBotManager(_0x9d3471);else initializeSocketBot(_0x9d3471);initClient(_0x2019b1);}devices[_0x2c77fd][_0x42a731(0x250)][_0x42a731(0x33b)]&&devices[_0x2c77fd]['access']['reason']==_0x42a731(0x198)&&setSessionTimeout(_0x42a731(0x328),_0x2c77fd),devices[_0x2c77fd]['access'][_0x42a731(0x33b)]&&devices[_0x2c77fd][_0x42a731(0x250)][_0x42a731(0x1c7)]=='2FA\x20login\x20token\x20generated'&&setSessionTimeout(_0x42a731(0x1aa),_0x2c77fd),_0x9d3471[_0x42a731(0x2a8)](_0x42a731(0x27b),{'status':_0x4c9f9a['server'],'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x2c77fd][_0x42a731(0x250)],'externalip':devices[_0x2c77fd]['ip'],'publicKey':secure[_0x42a731(0x15a)],'userid':settings[_0x42a731(0x26d)],'validInstallation':validInstallation}),devices[_0x2c77fd]['access'][_0x42a731(0x1d7)]==![]&&devices[_0x2c77fd][_0x42a731(0x250)][_0x42a731(0x1c7)]==_0x42a731(0x1ca)&&temporaryAccess2FA(_0x2c77fd,devices[_0x2c77fd]['ip']);}function setSessionTimeout(_0x3ef9ef,_0x2774f5){const _0x4ed7d5=_0x5f20e9;let _0x471c6c;if(_0x3ef9ef=='login')_0x471c6c=loginExpiry*0x3c*0x3e8;else _0x471c6c=devices[_0x2774f5][_0x4ed7d5(0x1d1)][_0x4ed7d5(0x23d)]*0x3c*0x3e8-(new Date()[_0x4ed7d5(0x1de)]()-devices[_0x2774f5][_0x4ed7d5(0x1d1)]['timestamp']);if(devices[_0x2774f5][_0x4ed7d5(0x2a3)])clearTimeout(devices[_0x2774f5]['pidExpireLogin']);devices[_0x2774f5][_0x4ed7d5(0x2a3)]=setTimeout(()=>{const _0x463a5e=_0x4ed7d5;if(devices[_0x2774f5][_0x463a5e(0x267)])clearTimeout(devices[_0x2774f5][_0x463a5e(0x267)]);removeSocketListeners(_0x2774f5),addBlacklist(_0x2774f5),devices[_0x2774f5][_0x463a5e(0x1d1)]=null,devices[_0x2774f5][_0x463a5e(0x354)]=null,devices[_0x2774f5][_0x463a5e(0x250)][_0x463a5e(0x33b)]=null,logger['debug'](_0x463a5e(0x1f0)+_0x2774f5['slice'](-0x8)),devices[_0x2774f5][_0x463a5e(0x250)]=validateAccess(devices[_0x2774f5][_0x463a5e(0x250)]['token'],_0x2774f5),!(devices[_0x2774f5][_0x463a5e(0x250)][_0x463a5e(0x1d7)]&&devices[_0x2774f5]['access']['reason']=='login\x20not\x20required')&&(_0x3ef9ef=='login'?io['to'](_0x2774f5)[_0x463a5e(0x2a8)]('status',{'access':{'allow':![],'reason':'access\x20timeout','token':null}}):io['to'](_0x2774f5)[_0x463a5e(0x2a8)](_0x463a5e(0x27b),{'access':{'allow':![],'reason':_0x463a5e(0x16e),'token':null}})),devices[_0x2774f5][_0x463a5e(0x250)]['token']=null;},_0x471c6c);}function setTokenRefresh(_0x24b459){const _0x4761c4=_0x5f20e9;if(devices[_0x24b459][_0x4761c4(0x267)])clearTimeout(devices[_0x24b459]['pidRefreshToken']);devices[_0x24b459][_0x4761c4(0x267)]=setTimeout(()=>{const _0x44711b=_0x4761c4;getClientsWithUuid(_0x24b459)[_0x44711b(0x1b1)]!=0x0?(devices[_0x24b459][_0x44711b(0x250)]=refreshToken(_0x24b459),io['to'](_0x24b459)['emit']('status',{'status':_0x44711b(0x2c8),'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x24b459][_0x44711b(0x250)],'externalip':devices[_0x24b459]['ip'],'publicKey':secure[_0x44711b(0x15a)],'validInstallation':validInstallation}),setTokenRefresh(_0x24b459)):clearTimeout(devices[_0x24b459]['pidRefreshToken']);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x3a5127){const _0x1595a2=_0x5f20e9,_0x54c32a=getClient(_0x3a5127['id'])[_0x1595a2(0x2d3)];_0x3a5127[_0x1595a2(0x2a8)](_0x1595a2(0x1eb),config),_0x3a5127['emit'](_0x1595a2(0x32a),cleanSettings()),_0x3a5127['on']('add-bot',_0x2bb97f=>{const _0x4e6f8e=_0x1595a2;if(validateAccess(_0x2bb97f,_0x54c32a)[_0x4e6f8e(0x1d7)])addBot();else logger['full'](_0x4e6f8e(0x2ae));}),_0x3a5127['on'](_0x1595a2(0x2a1),(_0x25ff10,_0x331457)=>{const _0x4fe382=_0x1595a2;if(validateAccess(_0x331457,_0x54c32a)[_0x4fe382(0x1d7)])toggleBot(_0x25ff10[_0x4fe382(0x214)],_0x25ff10[_0x4fe382(0x27b)],_0x25ff10[_0x4fe382(0x2f2)]);else logger[_0x4fe382(0x2b2)](_0x4fe382(0x353));}),_0x3a5127['on']('toggle-bot-mode',(_0x3dea62,_0x40d51a)=>{const _0x2e95aa=_0x1595a2;if(validateAccess(_0x40d51a,_0x54c32a)[_0x2e95aa(0x1d7)])toggleBotMode(_0x3dea62);else logger[_0x2e95aa(0x2b2)](_0x2e95aa(0x353));}),_0x3a5127['on'](_0x1595a2(0x268),(_0xd6a6fe,_0x37fa0a)=>{const _0x35e69f=_0x1595a2;if(validateAccess(_0x37fa0a,_0x54c32a)['allow'])deleteBot(_0xd6a6fe);else logger[_0x35e69f(0x2b2)](_0x35e69f(0x2e0));}),_0x3a5127['on']('store-settings',(_0x23e036,_0x485ca7)=>{const _0x2d36dc=_0x1595a2;if(validateAccess(_0x485ca7,_0x54c32a)['allow'])storeSettings(_0x23e036,!![]);else logger[_0x2d36dc(0x2b2)](_0x2d36dc(0x298));}),_0x3a5127['on'](_0x1595a2(0x2a5),_0x1f6959=>{const _0x44b081=_0x1595a2;if(validateAccess(_0x1f6959,_0x54c32a)[_0x44b081(0x1d7)])updateBB(_0x44b081(0x1a4));else logger[_0x44b081(0x2b2)](_0x44b081(0x1d8));}),_0x3a5127['on']('reinstall-bb',_0xc4e1ac=>{const _0x44d029=_0x1595a2;if(validateAccess(_0xc4e1ac,_0x54c32a)[_0x44d029(0x1d7)])updateBB(_0x44d029(0x1b7));else logger['full'](_0x44d029(0x362));}),_0x3a5127['on'](_0x1595a2(0x2b3),_0x8308d9=>{const _0x46ed1b=_0x1595a2;if(validateAccess(_0x8308d9,_0x54c32a)[_0x46ed1b(0x1d7)]){const _0x387a24=getClient(_0x3a5127['id']);if(_0x387a24)getBackupFiles(_0x387a24[_0x46ed1b(0x2d3)]);else logger[_0x46ed1b(0x2b2)](_0x46ed1b(0x26c));}else logger[_0x46ed1b(0x2b2)]('Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files');}),_0x3a5127['on'](_0x1595a2(0x2b7),(_0x2382b5,_0x49afde)=>{const _0x4319af=_0x1595a2;if(validateAccess(_0x49afde,_0x54c32a)[_0x4319af(0x1d7)])restoreBackupFile(_0x2382b5);else logger[_0x4319af(0x2b2)](_0x4319af(0x281));}),_0x3a5127['on'](_0x1595a2(0x229),_0xeed5c6=>{const _0x4294bf=_0x1595a2;if(validateAccess(_0xeed5c6,_0x54c32a)[_0x4294bf(0x1d7)])getMessages();else logger[_0x4294bf(0x2b2)](_0x4294bf(0x179));}),_0x3a5127['on'](_0x1595a2(0x1a0),(_0x5c9632,_0xad8ea3)=>{if(validateAccess(_0xad8ea3,_0x54c32a)['allow'])confirmMessage(_0x5c9632);else logger['full']('Unauthorized\x20attempt\x20to\x20confirm\x20message');}),_0x3a5127['on'](_0x1595a2(0x1cc),_0x33f0f0=>{const _0x32d0af=_0x1595a2;if(validateAccess(_0x33f0f0,_0x54c32a)[_0x32d0af(0x1d7)]){if(devices[_0x54c32a][_0x32d0af(0x267)])clearTimeout(devices[_0x54c32a]['pidRefreshToken']);if(devices[_0x54c32a]['pidExpireLogin'])clearTimeout(devices[_0x54c32a]['pidExpireLogin']);removeSocketListeners(getClient(_0x3a5127['id'])[_0x32d0af(0x2d3)]),addBlacklist(_0x54c32a),devices[_0x54c32a]['telegramIpApproval']=null,devices[_0x54c32a][_0x32d0af(0x354)]=null,devices[_0x54c32a]['access'][_0x32d0af(0x33b)]=null,logger[_0x32d0af(0x228)]('Logged\x20out\x20user\x20...'+_0x54c32a[_0x32d0af(0x160)](-0x8)),io['to'](getClient(_0x3a5127['id'])[_0x32d0af(0x2d3)])[_0x32d0af(0x2a8)](_0x32d0af(0x27b),{'access':{'allow':![],'reason':_0x32d0af(0x23a),'token':null}});}else logger['full'](_0x32d0af(0x367));});}function initializeSocketBot(_0x42e9f2){const _0x143c86=_0x5f20e9,_0x5f75eb=getClient(_0x42e9f2['id'])['bot'],_0x16876d=getClient(_0x42e9f2['id'])['uuid'];_0x42e9f2['on'](_0x143c86(0x23e),(_0x53e4bd,_0x3c33ff)=>{const _0x488049=_0x143c86;if(validateAccess(_0x3c33ff,_0x16876d)[_0x488049(0x1d7)]){if(pid[_0x5f75eb])pid[_0x5f75eb][_0x488049(0x308)]({'function':'emitHistory','args':_0x53e4bd});}else logger[_0x488049(0x2b2)](_0x488049(0x218));}),_0x42e9f2['on']('delete-alerts',(_0x5869d1,_0xea60c5)=>{const _0x1597d1=_0x143c86;if(validateAccess(_0xea60c5,_0x16876d)[_0x1597d1(0x1d7)]){if(pid[_0x5f75eb])pid[_0x5f75eb][_0x1597d1(0x308)]({'function':_0x1597d1(0x36e),'args':_0x5869d1});}else logger[_0x1597d1(0x2b2)](_0x1597d1(0x1fd));}),_0x42e9f2['on'](_0x143c86(0x239),(_0xbca9d7,_0x317e21)=>{const _0x241c57=_0x143c86;if(validateAccess(_0x317e21,_0x16876d)[_0x241c57(0x1d7)]){if(pid[_0x5f75eb])pid[_0x5f75eb][_0x241c57(0x308)]({'function':'getPortfolio','args':_0xbca9d7});}else logger['full'](_0x241c57(0x252));}),_0x42e9f2['on'](_0x143c86(0x285),(_0x2b688,_0x39b6b4)=>{const _0x20ec77=_0x143c86;if(validateAccess(_0x39b6b4,_0x16876d)[_0x20ec77(0x1d7)]){if(pid[_0x5f75eb])pid[_0x5f75eb][_0x20ec77(0x308)]({'function':_0x20ec77(0x2ef),'args':_0x2b688});}else logger['full'](_0x20ec77(0x318));}),_0x42e9f2['on'](_0x143c86(0x24c),(_0x58004c,_0x42e234)=>{const _0x4898fe=_0x143c86;if(validateAccess(_0x42e234,_0x16876d)[_0x4898fe(0x1d7)]){if(pid[_0x5f75eb])pid[_0x5f75eb][_0x4898fe(0x308)]({'function':_0x4898fe(0x32d),'args':_0x58004c});}else logger[_0x4898fe(0x2b2)](_0x4898fe(0x1ee));}),_0x42e9f2['on']('store-fiat',(_0x2d0709,_0x1308cf)=>{const _0x1cf7a2=_0x143c86;if(validateAccess(_0x1308cf,_0x16876d)['allow']){if(pid[_0x5f75eb])pid[_0x5f75eb][_0x1cf7a2(0x308)]({'function':_0x1cf7a2(0x203),'args':_0x2d0709});}else logger['full'](_0x1cf7a2(0x166));}),_0x42e9f2['on']('reset-history',_0x388510=>{const _0x199258=_0x143c86;if(validateAccess(_0x388510,_0x16876d)[_0x199258(0x1d7)]){if(pid[_0x5f75eb])pid[_0x5f75eb][_0x199258(0x308)]({'function':_0x199258(0x245),'args':null});}else logger['full']('Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history');}),_0x42e9f2['on'](_0x143c86(0x1a8),_0x59542a=>{const _0x2a873e=_0x143c86;if(validateAccess(_0x59542a,_0x16876d)[_0x2a873e(0x1d7)]){if(pid[_0x5f75eb])pid[_0x5f75eb][_0x2a873e(0x308)]({'function':_0x2a873e(0x1ed),'args':null});}else logger[_0x2a873e(0x2b2)](_0x2a873e(0x1e7));}),_0x42e9f2['on'](_0x143c86(0x278),(_0x5ecc2b,_0x37a1b5)=>{const _0x2d2030=_0x143c86;if(validateAccess(_0x37a1b5,_0x16876d)[_0x2d2030(0x1d7)]){if(pid[_0x5f75eb])pid[_0x5f75eb][_0x2d2030(0x308)]({'function':_0x2d2030(0x1c8),'args':_0x5ecc2b});}else logger[_0x2d2030(0x2b2)](_0x2d2030(0x16d));}),_0x42e9f2['on']('cancel-loading',_0x17feff=>{const _0xbc5b20=_0x143c86;if(validateAccess(_0x17feff,_0x16876d)[_0xbc5b20(0x1d7)]){if(pid[_0x5f75eb])pid[_0x5f75eb][_0xbc5b20(0x308)]({'function':_0xbc5b20(0x289),'args':null});}else logger[_0xbc5b20(0x2b2)](_0xbc5b20(0x263));}),_0x42e9f2['on'](_0x143c86(0x244),_0x4d5915=>{const _0x1848fb=_0x143c86;if(validateAccess(_0x4d5915,_0x16876d)[_0x1848fb(0x1d7)]){if(pid[_0x5f75eb])pid[_0x5f75eb][_0x1848fb(0x308)]({'function':_0x1848fb(0x27f),'args':null});}else logger['full'](_0x1848fb(0x231));}),_0x42e9f2['on'](_0x143c86(0x2a5),_0xc696b9=>{const _0x30b26a=_0x143c86;if(validateAccess(_0xc696b9,_0x16876d)['allow'])updateBB(_0x30b26a(0x1a4));else logger['full'](_0x30b26a(0x1d8));}),_0x42e9f2['on'](_0x143c86(0x229),_0x4f5654=>{const _0x2cc79b=_0x143c86;if(validateAccess(_0x4f5654,_0x16876d)['allow'])getMessages();else logger[_0x2cc79b(0x2b2)](_0x2cc79b(0x179));}),_0x42e9f2['on'](_0x143c86(0x1a0),(_0x12377a,_0x5c85ad)=>{const _0x59c4c5=_0x143c86;if(validateAccess(_0x5c85ad,_0x16876d)[_0x59c4c5(0x1d7)])confirmMessage(_0x12377a);else logger[_0x59c4c5(0x2b2)](_0x59c4c5(0x1ad));}),_0x42e9f2['on'](_0x143c86(0x1cc),_0x528ba3=>{const _0x4842fd=_0x143c86;if(validateAccess(_0x528ba3,_0x16876d)[_0x4842fd(0x1d7)]){if(devices[_0x16876d][_0x4842fd(0x267)])clearTimeout(devices[_0x16876d][_0x4842fd(0x267)]);if(devices[_0x16876d]['pidExpireLogin'])clearTimeout(devices[_0x16876d][_0x4842fd(0x2a3)]);removeSocketListeners(getClient(_0x42e9f2['id'])[_0x4842fd(0x2d3)]),addBlacklist(_0x16876d),devices[_0x16876d][_0x4842fd(0x1d1)]=null,devices[_0x16876d]['telegram2FaApproval']=null,devices[_0x16876d]['access'][_0x4842fd(0x33b)]=null,logger[_0x4842fd(0x228)]('Logged\x20out\x20user\x20...'+_0x16876d[_0x4842fd(0x160)](-0x8)),io['to'](getClient(_0x42e9f2['id'])[_0x4842fd(0x2d3)])[_0x4842fd(0x2a8)](_0x4842fd(0x27b),{'access':{'allow':![],'reason':_0x4842fd(0x23a),'token':null}});}else logger[_0x4842fd(0x2b2)](_0x4842fd(0x367));});}function removeSocketListeners(_0x50024c){const _0x5ceb79=_0x5f20e9;getClientsWithUuid(_0x50024c)[_0x5ceb79(0x2bf)](_0x517bfe=>{getSocket(_0x517bfe['id'])['removeAllListeners']();});}function cleanSettings(){const _0x9ab0b8=_0x5f20e9;let _0x4e71f3=settings;return settings[_0x9ab0b8(0x288)]&&settings[_0x9ab0b8(0x288)]!=''&&(_0x4e71f3={..._0x4e71f3,'telegramToken':_0x9ab0b8(0x314)}),settings[_0x9ab0b8(0x31a)]&&settings[_0x9ab0b8(0x31a)]!=''&&(_0x4e71f3={..._0x4e71f3,'bbPassword':_0x9ab0b8(0x314)}),settings[_0x9ab0b8(0x274)]&&settings['marketcapApi']!=''&&(_0x4e71f3={..._0x4e71f3,'marketcapApi':'************'}),(settings[_0x9ab0b8(0x31a)]&&settings['bbPassword']==_0x9ab0b8(0x207)||settings['telegramToken']&&settings[_0x9ab0b8(0x288)]=='***'||settings['marketcapApi']&&settings[_0x9ab0b8(0x274)]==_0x9ab0b8(0x207))&&(_0x4e71f3={..._0x4e71f3,'restored':{'password':settings[_0x9ab0b8(0x31a)]==_0x9ab0b8(0x207),'telegram':settings['telegramToken']==_0x9ab0b8(0x207),'marketcap':settings[_0x9ab0b8(0x274)]=='***'}}),_0x4e71f3;}async function updateBB(_0x2264cd){const _0x17a67a=_0x5f20e9;await backupConfigFiles(),installingUpdate=!![],config['forEach'](_0x307b81=>{const _0x312955=_0x1eb9;restartBot(_0x307b81[_0x312955(0x214)]);});if(_0x2264cd==_0x17a67a(0x1a4))process['send']({'update':!![],'environment':environment},_0x1c6057=>{});else _0x2264cd==_0x17a67a(0x1b7)&&process[_0x17a67a(0x308)]({'reinstall':!![],'environment':environment},_0x4fce18=>{});}function startBot(_0x273e67,_0x457e5a,_0x1e6854){const _0xe4c0ec=_0x5f20e9;if(debugging)_0x273e67[_0xe4c0ec(0x2b5)]('-d');if(recreate)_0x273e67[_0xe4c0ec(0x2b5)]('-r');let _0x364805=![];const _0x314f2f=_0x273e67[0x0];_0x457e5a={..._0x457e5a,'stdio':[_0xe4c0ec(0x35a),_0xe4c0ec(0x35a),_0xe4c0ec(0x35a),_0xe4c0ec(0x28d)]},pid[_0x314f2f]=childProcess['fork'](botfile,_0x273e67,_0x457e5a),pid[_0x314f2f]['on'](_0xe4c0ec(0x193),_0x450596=>{const _0xb9791e=_0xe4c0ec;switch(Object[_0xb9791e(0x243)](_0x450596)[0x0]){case _0xb9791e(0x21a):updateBotName(_0x314f2f,_0x450596['botname']);break;case _0xb9791e(0x2e2):updateBotManager();break;case _0xb9791e(0x27b):updateStatus(_0x314f2f,_0x450596[_0xb9791e(0x27b)]);break;case _0xb9791e(0x2f2):updateLive(_0x314f2f,_0x450596['live']);break;case _0xb9791e(0x1a9):updateLive(_0x314f2f,_0x450596[_0xb9791e(0x1a9)]),io['to'](_0x314f2f)[_0xb9791e(0x2a8)](_0xb9791e(0x27b),{'access':{'allow':![],'reason':_0xb9791e(0x234),'token':null}});break;case'stop':_0x450596['stop']=='restart'&&restartBot(_0x314f2f);_0x450596[_0xb9791e(0x174)]==_0xb9791e(0x1d9)&&toggleBot(_0x314f2f,_0xb9791e(0x2cc),'stopped');break;case _0xb9791e(0x240):sendTelegramBot(_0x314f2f,_0x450596[_0xb9791e(0x240)]);break;case _0xb9791e(0x27d):sendTelegramMsg(_0x450596[_0xb9791e(0x27d)]);break;case _0xb9791e(0x251):io['to'](_0x314f2f)[_0xb9791e(0x2a8)](_0x450596['function'],_0x450596[_0xb9791e(0x356)]);break;}}),pid[_0x314f2f]['on'](_0xe4c0ec(0x219),function(_0xe77db3){if(_0x364805)return;_0x364805=!![],_0x1e6854(_0xe77db3);}),pid[_0x314f2f]['on'](_0xe4c0ec(0x1c2),async function(_0x79d1c7){const _0x34a1e=_0xe4c0ec;if(terminating)return;if(installingUpdate){io[_0x34a1e(0x1f4)]();return;}if(_0x364805)return;_0x364805=!![],_0x1e6854(null);const _0x11b2db=dbConfig[_0x34a1e(0x2ad)](_0x34a1e(0x1eb))['find']({'botID':_0x314f2f})[_0x34a1e(0x32c)]();_0x11b2db&&(_0x11b2db[_0x34a1e(0x27b)]==_0x34a1e(0x18a)||_0x11b2db[_0x34a1e(0x27b)]==_0x34a1e(0x220))&&(await sleep(0x3e8),updateLive(_0x314f2f,_0x34a1e(0x2a9)),logger[_0x34a1e(0x2b2)](_0x34a1e(0x276)+_0x314f2f),startBot([_0x314f2f,userID],{'cwd':bbpath},function(_0x359925){const _0x430140=_0x34a1e;if(_0x359925)logger[_0x430140(0x2b2)](_0x359925);}));});}function stopBot(_0x571dc9){const _0x3e2748=_0x5f20e9;getClientsWithBotID(_0x571dc9)[_0x3e2748(0x2bf)](_0x19b82a=>{const _0x3a20a6=_0x3e2748;getSocket(_0x19b82a['id'])[_0x3a20a6(0x329)](!![]),removeClient(_0x19b82a['id']);}),pid[_0x571dc9]&&(pid[_0x571dc9][_0x3e2748(0x1d9)](),pid[_0x571dc9]=null);}function stopAllBots(){const _0x5230c2=_0x5f20e9;terminating=!![];const _0x1ba923=getEnabledBots();_0x1ba923[_0x5230c2(0x2bf)](_0x10ac52=>{const _0x244818=_0x5230c2;stopBot(_0x10ac52[_0x244818(0x214)]);});}function restartBot(_0xe51a08){const _0x524e24=_0x5f20e9;if(pid[_0xe51a08])pid[_0xe51a08][_0x524e24(0x1d9)]();}function addBot(){const _0xb9ebaf=_0x5f20e9;let _0x231fec;for(let _0x5564c9=0x1;_0x5564c9<0x3e9;_0x5564c9++){_0x231fec=_0x5564c9[_0xb9ebaf(0x315)]()[_0xb9ebaf(0x200)](0x3,'0');let _0x5a4a1c=config[_0xb9ebaf(0x194)](_0x372270=>_0x372270[_0xb9ebaf(0x214)]==_0x231fec);if(!_0x5a4a1c)break;}if(_0x231fec===_0xb9ebaf(0x319)){logger[_0xb9ebaf(0x2b2)]('The\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached');return;}logger[_0xb9ebaf(0x2b2)](_0xb9ebaf(0x320)+_0x231fec),dbConfig[_0xb9ebaf(0x2ad)](_0xb9ebaf(0x1eb))[_0xb9ebaf(0x2b5)]({'botID':_0x231fec,'botname':_0xb9ebaf(0x23f)+_0x231fec,'status':_0xb9ebaf(0x220),'live':''})[_0xb9ebaf(0x1c6)](),startBot([_0x231fec,userID],{'cwd':bbpath},function(_0x106bca){const _0x5de482=_0xb9ebaf;if(_0x106bca)logger[_0x5de482(0x2b2)](_0x106bca);}),config=getConfiguration(),io['to'](_0xb9ebaf(0x1e0))['emit']('bots',config),broadcastToBots('bots',JSON['stringify'](config));}function deleteBot(_0x2be852){const _0x1fee54=_0x5f20e9;getClientsWithBotID(_0x2be852)[_0x1fee54(0x2bf)](_0x29579c=>{const _0x18813c=_0x1fee54;getSocket(_0x29579c['id'])[_0x18813c(0x329)](!![]),removeClient(_0x29579c['id']);}),dbConfig[_0x1fee54(0x2ad)](_0x1fee54(0x1eb))[_0x1fee54(0x2f9)]({'botID':_0x2be852})[_0x1fee54(0x1c6)](),logger['full'](_0x1fee54(0x2b8)+_0x2be852),stopBot(_0x2be852);try{if(fs[_0x1fee54(0x1a6)](path['join'](configpath,'bot-'+_0x2be852+_0x1fee54(0x341))))fs[_0x1fee54(0x17a)](path['join'](configpath,_0x1fee54(0x1e3)+_0x2be852+_0x1fee54(0x341)));if(fs[_0x1fee54(0x1a6)](path[_0x1fee54(0x1b4)](configpath,'bot-'+_0x2be852+_0x1fee54(0x277))))fs[_0x1fee54(0x17a)](path['join'](configpath,'bot-'+_0x2be852+_0x1fee54(0x277)));if(fs[_0x1fee54(0x1a6)](path[_0x1fee54(0x1b4)](configpath,_0x1fee54(0x1e3)+_0x2be852+_0x1fee54(0x342))))fs['unlinkSync'](path[_0x1fee54(0x1b4)](configpath,_0x1fee54(0x1e3)+_0x2be852+_0x1fee54(0x342)));if(fs[_0x1fee54(0x1a6)](path[_0x1fee54(0x1b4)](configpath,'bot-'+_0x2be852+_0x1fee54(0x154))))fs[_0x1fee54(0x17a)](path[_0x1fee54(0x1b4)](configpath,_0x1fee54(0x1e3)+_0x2be852+_0x1fee54(0x154)));}catch(_0x4690dd){if(_0x4690dd)logger[_0x1fee54(0x2b2)]('Error\x20while\x20deleting\x20config\x20files:\x20',_0x4690dd);}config=getConfiguration(),io['to'](_0x1fee54(0x1e0))[_0x1fee54(0x2a8)]('bots',config),broadcastToBots('bots',JSON[_0x1fee54(0x2f5)](config));}function toggleBot(_0x56672b,_0x59689e,_0x3b188c){const _0x1f573e=_0x5f20e9;dbConfig[_0x1f573e(0x2ad)](_0x1f573e(0x1eb))['find']({'botID':_0x56672b})['assign']({'status':_0x59689e})[_0x1f573e(0x33a)]({'live':_0x3b188c})[_0x1f573e(0x1c6)]();if(_0x59689e==_0x1f573e(0x18a)||_0x59689e=='new')logger[_0x1f573e(0x2b2)](_0x1f573e(0x340)+_0x56672b),startBot([_0x56672b,userID],{'cwd':bbpath},function(_0x11798a){if(_0x11798a)logger['full'](_0x11798a);});else(_0x59689e==_0x1f573e(0x2cc)||_0x59689e==_0x1f573e(0x2de))&&(logger[_0x1f573e(0x2b2)](_0x1f573e(0x1db)+_0x56672b),stopBot(_0x56672b));config=getConfiguration(),io['to'](_0x1f573e(0x1e0))[_0x1f573e(0x2a8)]('bots',config),broadcastToBots('bots',JSON[_0x1f573e(0x2f5)](config));}function toggleStatus(_0x5856e6){const _0x4812f8=_0x5f20e9;let _0x35a3b7=dbConfig[_0x4812f8(0x2ad)](_0x4812f8(0x1eb))[_0x4812f8(0x194)]({'botID':_0x5856e6})[_0x4812f8(0x32c)](),_0xabf0a1;if(_0x35a3b7[_0x4812f8(0x27b)]===_0x4812f8(0x18a))_0xabf0a1='disabled';else{if(_0x35a3b7[_0x4812f8(0x27b)]===_0x4812f8(0x220))_0xabf0a1=_0x4812f8(0x2de);else{if(_0x35a3b7[_0x4812f8(0x27b)]==='new-disabled')_0xabf0a1='new';else{if(_0x35a3b7[_0x4812f8(0x27b)]==='disabled')_0xabf0a1=_0x4812f8(0x18a);}}}return _0xabf0a1;}function updateStatus(_0x2cb316,_0x3b3f85){const _0x29ca20=_0x5f20e9;dbConfig[_0x29ca20(0x2ad)](_0x29ca20(0x1eb))['find']({'botID':_0x2cb316})[_0x29ca20(0x33a)]({'status':_0x3b3f85})[_0x29ca20(0x1c6)](),config=getConfiguration(),io['to']('botmanager')[_0x29ca20(0x2a8)]('bots',config),broadcastToBots(_0x29ca20(0x1eb),JSON[_0x29ca20(0x2f5)](config));}function updateLive(_0x23e52b,_0x5b246a){const _0x450e51=_0x5f20e9;dbConfig['get'](_0x450e51(0x1eb))['find']({'botID':_0x23e52b})['assign']({'live':_0x5b246a})[_0x450e51(0x1c6)](),config=getConfiguration(),io['to'](_0x450e51(0x1e0))[_0x450e51(0x2a8)](_0x450e51(0x1eb),config),broadcastToBots(_0x450e51(0x1eb),JSON[_0x450e51(0x2f5)](config));}function updateBotName(_0xa7c6,_0x48af78){const _0x5c9418=_0x5f20e9;dbConfig[_0x5c9418(0x2ad)](_0x5c9418(0x1eb))[_0x5c9418(0x194)]({'botID':_0xa7c6})[_0x5c9418(0x33a)]({'botname':_0x48af78})[_0x5c9418(0x1c6)](),config=getConfiguration(),io['to'](_0x5c9418(0x1e0))[_0x5c9418(0x2a8)](_0x5c9418(0x1eb),config),broadcastToBots('bots',JSON[_0x5c9418(0x2f5)](config));}function updateBotManager(){const _0x426078=_0x5f20e9;config=getConfiguration(),io['to'](_0x426078(0x1e0))[_0x426078(0x2a8)]('bots',config),broadcastToBots(_0x426078(0x1eb),JSON['stringify'](config));}function toggleBotMode(_0x1226b9){const _0x2c7f2f=_0x5f20e9;if(pid[_0x1226b9])pid[_0x1226b9][_0x2c7f2f(0x308)]({'function':_0x2c7f2f(0x2eb),'args':null});else{const _0x1357af=configpath+'bot-'+_0x1226b9+_0x2c7f2f(0x341),_0x5228ef=fs[_0x2c7f2f(0x1bd)](_0x1357af),_0x5a70df=JSON[_0x2c7f2f(0x168)](_0x5228ef),_0x1d72fb=_0x5a70df[_0x2c7f2f(0x1ff)][0x0]['headless'];_0x5a70df[_0x2c7f2f(0x1ff)][0x0][_0x2c7f2f(0x2c1)]=!_0x1d72fb;const _0x6aaca4=JSON[_0x2c7f2f(0x2f5)](_0x5a70df,null,0x2);fs[_0x2c7f2f(0x280)](_0x1357af,_0x6aaca4),config=getConfiguration(),io['to'](_0x2c7f2f(0x1e0))['emit'](_0x2c7f2f(0x1eb),config),broadcastToBots('bots',JSON[_0x2c7f2f(0x2f5)](config));}}function validateTelegram(_0x576482){const _0x38d05a=_0x5f20e9;if(_0x576482[_0x38d05a(0x1bf)][_0x38d05a(0x35b)]!=settings[_0x38d05a(0x343)]&&'@'+_0x576482[_0x38d05a(0x1bf)][_0x38d05a(0x35b)]!=settings['telegramUsername']||_0x576482[_0x38d05a(0x226)]['id']!=settings[_0x38d05a(0x1fb)])return sendTelegram(_0x576482[_0x38d05a(0x226)]['id'],_0x38d05a(0x1a5),{'parse_mode':'HTML'}),![];return!![];}async function initTelegram(){const _0x3c5268=_0x5f20e9;tgBot&&(await tgBot[_0x3c5268(0x174)](),await sleep(0x7d0));tgBot=new Telegraf(settings[_0x3c5268(0x288)]);let _0x57fe19='You\x20can\x20use\x20the\x20following\x20commands:\x0a';_0x57fe19+='\x0a',_0x57fe19+=_0x3c5268(0x30f),_0x57fe19+=_0x3c5268(0x22b),_0x57fe19+=_0x3c5268(0x16b),_0x57fe19+='/restart\x20-\x20restart\x20bot(s)\x0a',_0x57fe19+=_0x3c5268(0x1c4),_0x57fe19+='/off\x20-\x20stop\x20bot(s)\x0a',_0x57fe19+=_0x3c5268(0x34a),_0x57fe19+=_0x3c5268(0x224),_0x57fe19+=_0x3c5268(0x357),_0x57fe19+=_0x3c5268(0x28b),_0x57fe19+=_0x3c5268(0x1e5),_0x57fe19+=_0x3c5268(0x201),_0x57fe19+=_0x3c5268(0x216),_0x57fe19+=_0x3c5268(0x1e8),_0x57fe19+='/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a',_0x57fe19+=_0x3c5268(0x300);let _0x59e579=_0x3c5268(0x2e4);_0x59e579+='\x0a',_0x59e579+=_0x57fe19,tgBot[_0x3c5268(0x262)]((_0x3b2462,_0x116940)=>{const _0x191828=_0x3c5268;logger[_0x191828(0x22d)](getTimeStamp()+_0x191828(0x162)),logger['debug'](_0x191828(0x2c6),_0x3b2462);}),tgBot[_0x3c5268(0x2c2)](async(_0x2ffbc8,_0x15717e)=>{const _0x5519cf=_0x3c5268;if(settings[_0x5519cf(0x1fb)]||_0x2ffbc8[_0x5519cf(0x1a4)][_0x5519cf(0x193)][_0x5519cf(0x334)]!=_0x5519cf(0x22c)){if(!validateTelegram(_0x2ffbc8))return;}_0x15717e();}),tgBot[_0x3c5268(0x330)](_0x3c5268(0x351),async _0x298a1f=>{const _0x77de96=_0x3c5268;if(_0x298a1f[_0x77de96(0x1bf)][_0x77de96(0x35b)]==settings[_0x77de96(0x343)]||'@'+_0x298a1f[_0x77de96(0x1bf)][_0x77de96(0x35b)]==settings[_0x77de96(0x343)]){if(!settings[_0x77de96(0x1fb)])updateSetting(_0x77de96(0x1fb),_0x298a1f[_0x77de96(0x226)]['id']);else{if(!validateTelegram(_0x298a1f))return;}}else{if(!validateTelegram(_0x298a1f))return;}updateSetting(_0x77de96(0x1fa),!![]),await sendTelegram(_0x298a1f[_0x77de96(0x226)]['id'],_0x59e579);}),tgBot[_0x3c5268(0x330)](_0x3c5268(0x26f),async _0x566115=>{const _0x2d04c1=_0x3c5268;updateSetting(_0x2d04c1(0x1fa),!![]),await sendTelegram(_0x566115[_0x2d04c1(0x226)]['id'],_0x2d04c1(0x301));}),tgBot[_0x3c5268(0x330)](_0x3c5268(0x2d1),async _0x5ae400=>{const _0x7a32c8=_0x3c5268;await sendTelegram(_0x5ae400[_0x7a32c8(0x226)]['id'],_0x7a32c8(0x189)),updateSetting(_0x7a32c8(0x1fa),![]);}),tgBot[_0x3c5268(0x330)](_0x3c5268(0x2c3),async _0x59c942=>{const _0x26bb35=_0x3c5268,_0x2d0c01=Markup['inlineKeyboard']([Markup[_0x26bb35(0x1b6)][_0x26bb35(0x1cb)](_0x26bb35(0x1da),_0x26bb35(0x2d9)),Markup[_0x26bb35(0x1b6)][_0x26bb35(0x1cb)]('Alerts','config_alerts'),Markup[_0x26bb35(0x1b6)]['callback'](_0x26bb35(0x20e),_0x26bb35(0x2bb))]);_0x59c942[_0x26bb35(0x19e)](_0x26bb35(0x293),_0x2d0c01);}),tgBot[_0x3c5268(0x1bb)](_0x3c5268(0x2d9),async _0x582bc5=>{const _0x333758=_0x3c5268;_0x582bc5['editMessageReplyMarkup'](),updateSetting(_0x333758(0x161),_0x333758(0x310)),updateSetting(_0x333758(0x1fa),!![]),await sendTelegram(_0x582bc5[_0x333758(0x226)]['id'],_0x333758(0x32f));}),tgBot[_0x3c5268(0x1bb)](_0x3c5268(0x1ba),async _0x402746=>{const _0xb25f3f=_0x3c5268;_0x402746[_0xb25f3f(0x1e2)](),updateSetting(_0xb25f3f(0x161),'alerts'),updateSetting(_0xb25f3f(0x1fa),!![]),await sendTelegram(_0x402746[_0xb25f3f(0x226)]['id'],_0xb25f3f(0x312));}),tgBot[_0x3c5268(0x1bb)](_0x3c5268(0x2bb),async _0x2f1986=>{const _0x2660ee=_0x3c5268;_0x2f1986[_0x2660ee(0x1e2)](),updateSetting(_0x2660ee(0x161),_0x2660ee(0x211)),updateSetting('telegramEnabled',!![]),await sendTelegram(_0x2f1986[_0x2660ee(0x226)]['id'],_0x2660ee(0x24a));}),tgBot[_0x3c5268(0x330)](_0x3c5268(0x27b),async _0x3831c1=>{const _0x8fed45=_0x3c5268,_0x1692ea=getBotsWithMode();let _0x71bb59=_0x8fed45(0x23b);config[_0x8fed45(0x2bf)](_0x2e7b1f=>{const _0x115499=_0x8fed45,_0x439617=_0x1692ea[_0x115499(0x194)](_0x3e52b2=>_0x3e52b2[_0x115499(0x214)]==_0x2e7b1f[_0x115499(0x214)])[_0x115499(0x355)];_0x71bb59+='Bot\x20'+_0x2e7b1f[_0x115499(0x214)]+':\x20'+_0x2e7b1f['status']+_0x115499(0x2d2)+_0x439617+_0x115499(0x2d2)+_0x2e7b1f[_0x115499(0x2f2)]+'\x0a';}),_0x71bb59+='\x0a',_0x71bb59+=_0x8fed45(0x15b),_0x71bb59+=!settings[_0x8fed45(0x1fa)]?_0x8fed45(0x284):_0x8fed45(0x286),_0x71bb59+=settings['telegramEnabled']?settings[_0x8fed45(0x161)]=='all'?_0x8fed45(0x27c):_0x8fed45(0x1d4)+settings[_0x8fed45(0x161)]+_0x8fed45(0x146):'',await sendTelegram(_0x3831c1[_0x8fed45(0x226)]['id'],_0x71bb59,{'parse_mode':_0x8fed45(0x149)});}),tgBot[_0x3c5268(0x330)](_0x3c5268(0x159),async _0x32674b=>{const _0x199a2b=_0x3c5268,_0x1fc7c3=getEnabledBots();if(_0x1fc7c3[_0x199a2b(0x1b1)]==0x0)await sendTelegram(_0x32674b[_0x199a2b(0x226)]['id'],'No\x20bots\x20running\x20right\x20now');else{if(_0x1fc7c3[_0x199a2b(0x1b1)]>0x1)_0x1fc7c3[_0x199a2b(0x2b5)]({'botID':_0x199a2b(0x211)});let _0x4f3a74=[],_0x2aea57=[];const _0x51b341=_0x1fc7c3[_0x199a2b(0x1b1)]%0x4==0x0||_0x1fc7c3[_0x199a2b(0x1b1)]%0x4==0x3||_0x1fc7c3[_0x199a2b(0x1b1)]%0x3==0x1?0x4:0x3;let _0x5ad5b6=0x0;_0x1fc7c3[_0x199a2b(0x2bf)]((_0x43132d,_0x2f9065)=>{const _0x1db360=_0x199a2b;if(_0x2f9065%_0x51b341==0x0)_0x2aea57=[];_0x2aea57[_0x1db360(0x2b5)](Markup['button'][_0x1db360(0x1cb)](_0x43132d[_0x1db360(0x214)]==_0x1db360(0x211)?_0x1db360(0x28e):_0x1db360(0x23f)+_0x43132d[_0x1db360(0x214)],_0x1db360(0x264)+_0x43132d['botID'])),_0x2f9065%_0x51b341==0x0&&(_0x4f3a74[_0x5ad5b6]=_0x2aea57,_0x5ad5b6++);});const _0x5606ae=Markup['inlineKeyboard'](_0x4f3a74);_0x32674b[_0x199a2b(0x19e)](_0x199a2b(0x236),_0x5606ae);}}),tgBot[_0x3c5268(0x1bb)](/restart_(.+)/,async _0x303665=>{const _0x41ad9c=_0x3c5268,_0x337329=_0x303665[_0x41ad9c(0x361)][0x1];_0x303665[_0x41ad9c(0x1e2)](),_0x337329==_0x41ad9c(0x211)?config[_0x41ad9c(0x2bf)](_0x2e33ab=>{restartBot(_0x2e33ab['botID']);}):restartBot(_0x337329);}),tgBot[_0x3c5268(0x330)]('on',async _0x9d6a98=>{const _0x33241a=_0x3c5268,_0x1c99c6=getDisabledBots();if(_0x1c99c6['length']==0x0)await sendTelegram(_0x9d6a98[_0x33241a(0x226)]['id'],'All\x20bots\x20running\x20right\x20now');else{if(_0x1c99c6[_0x33241a(0x1b1)]>0x1)_0x1c99c6[_0x33241a(0x2b5)]({'botID':_0x33241a(0x211)});let _0x3d2e22=[],_0x2f8918=[];const _0x35e63a=_0x1c99c6[_0x33241a(0x1b1)]%0x4==0x0||_0x1c99c6[_0x33241a(0x1b1)]%0x4==0x3||_0x1c99c6[_0x33241a(0x1b1)]%0x3==0x1?0x4:0x3;let _0x5c26cc=0x0;_0x1c99c6['forEach']((_0x9383ee,_0x449f0b)=>{const _0x29e56a=_0x33241a;if(_0x449f0b%_0x35e63a==0x0)_0x2f8918=[];_0x2f8918['push'](Markup[_0x29e56a(0x1b6)][_0x29e56a(0x1cb)](_0x9383ee['botID']==_0x29e56a(0x211)?_0x29e56a(0x28e):_0x29e56a(0x23f)+_0x9383ee[_0x29e56a(0x214)],_0x29e56a(0x2ab)+_0x9383ee[_0x29e56a(0x214)])),_0x449f0b%_0x35e63a==0x0&&(_0x3d2e22[_0x5c26cc]=_0x2f8918,_0x5c26cc++);});const _0x4a79b2=Markup['inlineKeyboard'](_0x3d2e22);_0x9d6a98[_0x33241a(0x19e)](_0x33241a(0x1c3),_0x4a79b2);}}),tgBot['action'](/on_(.+)/,async _0xf32efd=>{const _0x576298=_0x3c5268,_0x1c7145=_0xf32efd['match'][0x1];_0xf32efd[_0x576298(0x1e2)]();if(_0x1c7145==_0x576298(0x211)){const _0x1926c8=getDisabledBots();await sendTelegram(_0xf32efd['chat']['id'],_0x576298(0x2e8)),_0x1926c8[_0x576298(0x2bf)](_0x366cef=>{const _0x13a32e=_0x576298;if(_0x366cef[_0x13a32e(0x214)]!='all')toggleBot(_0x366cef[_0x13a32e(0x214)],toggleStatus(_0x366cef['botID']),_0x13a32e(0x2a9));});}else await sendTelegram(_0xf32efd[_0x576298(0x226)]['id'],_0x576298(0x1b5)+_0x1c7145),toggleBot(_0x1c7145,toggleStatus(_0x1c7145),_0x576298(0x2a9));}),tgBot['command'](_0x3c5268(0x18b),async _0x92b59c=>{const _0x3367b9=_0x3c5268,_0x163dab=getEnabledBots();if(_0x163dab[_0x3367b9(0x1b1)]==0x0)await sendTelegram(_0x92b59c[_0x3367b9(0x226)]['id'],_0x3367b9(0x185));else{if(_0x163dab[_0x3367b9(0x1b1)]>0x1)_0x163dab[_0x3367b9(0x2b5)]({'botID':_0x3367b9(0x211)});let _0x503867=[],_0x5c9d4a=[];const _0x33ec92=_0x163dab[_0x3367b9(0x1b1)]%0x4==0x0||_0x163dab[_0x3367b9(0x1b1)]%0x4==0x3||_0x163dab[_0x3367b9(0x1b1)]%0x3==0x1?0x4:0x3;let _0x20ef22=0x0;_0x163dab[_0x3367b9(0x2bf)]((_0x2b8e4c,_0x3a7be7)=>{const _0x5db8a0=_0x3367b9;if(_0x3a7be7%_0x33ec92==0x0)_0x5c9d4a=[];_0x5c9d4a[_0x5db8a0(0x2b5)](Markup[_0x5db8a0(0x1b6)][_0x5db8a0(0x1cb)](_0x2b8e4c[_0x5db8a0(0x214)]==_0x5db8a0(0x211)?_0x5db8a0(0x28e):_0x5db8a0(0x23f)+_0x2b8e4c[_0x5db8a0(0x214)],_0x5db8a0(0x2b4)+_0x2b8e4c[_0x5db8a0(0x214)])),_0x3a7be7%_0x33ec92==0x0&&(_0x503867[_0x20ef22]=_0x5c9d4a,_0x20ef22++);});const _0x18ea09=Markup[_0x3367b9(0x2dd)](_0x503867);_0x92b59c[_0x3367b9(0x19e)](_0x3367b9(0x1ab),_0x18ea09);}}),tgBot[_0x3c5268(0x1bb)](/off_(.+)/,async _0x1fd20a=>{const _0x4bafe7=_0x3c5268,_0x128437=_0x1fd20a[_0x4bafe7(0x361)][0x1];_0x1fd20a[_0x4bafe7(0x1e2)]();if(_0x128437==_0x4bafe7(0x211)){const _0x4af751=getEnabledBots();await sendTelegram(_0x1fd20a[_0x4bafe7(0x226)]['id'],_0x4bafe7(0x212)),_0x4af751[_0x4bafe7(0x2bf)](_0x212aae=>{const _0x3fcce1=_0x4bafe7;if(_0x212aae[_0x3fcce1(0x214)]!=_0x3fcce1(0x211))toggleBot(_0x212aae['botID'],toggleStatus(_0x212aae[_0x3fcce1(0x214)]),_0x3fcce1(0x2a9));});}else await sendTelegram(_0x1fd20a[_0x4bafe7(0x226)]['id'],'Bot\x20Mgr\x20>\x20stopping\x20Bot\x20'+_0x128437),toggleBot(_0x128437,toggleStatus(_0x128437),_0x4bafe7(0x2a9));}),tgBot['command'](_0x3c5268(0x17e),async _0x3785bd=>{const _0xa84a6a=_0x3c5268,_0x23f13b=getEnabledBots();if(_0x23f13b[_0xa84a6a(0x1b1)]==0x0)await sendTelegram(_0x3785bd[_0xa84a6a(0x226)]['id'],_0xa84a6a(0x185));else{if(_0x23f13b[_0xa84a6a(0x1b1)]>0x1){let _0x5b781e=[],_0x2d2967=[];const _0x4dedd5=_0x23f13b['length']%0x4==0x0||_0x23f13b[_0xa84a6a(0x1b1)]%0x4==0x3||_0x23f13b['length']%0x3==0x1?0x4:0x3;let _0x577f71=0x0;_0x23f13b[_0xa84a6a(0x2bf)]((_0x5ce61,_0x2b1464)=>{const _0x540010=_0xa84a6a;if(_0x2b1464%_0x4dedd5==0x0)_0x2d2967=[];_0x2d2967[_0x540010(0x2b5)](Markup['button'][_0x540010(0x1cb)](_0x540010(0x23f)+_0x5ce61[_0x540010(0x214)],_0x540010(0x272)+_0x5ce61['botID'])),_0x2b1464%_0x4dedd5==0x0&&(_0x5b781e[_0x577f71]=_0x2d2967,_0x577f71++);});const _0x182dc4=Markup['inlineKeyboard'](_0x5b781e);_0x3785bd['reply'](_0xa84a6a(0x325),_0x182dc4);}else{const _0x2283f6=_0x23f13b[0x0]['botID'];if(pid[_0x2283f6])pid[_0x2283f6][_0xa84a6a(0x308)]({'function':_0xa84a6a(0x1e4),'args':null});}}}),tgBot[_0x3c5268(0x1bb)](/metrics_(.+)/,async _0x84be92=>{const _0x13a5ff=_0x3c5268,_0x2cc66e=_0x84be92[_0x13a5ff(0x361)][0x1];_0x84be92[_0x13a5ff(0x1e2)]();if(pid[_0x2cc66e])pid[_0x2cc66e][_0x13a5ff(0x308)]({'function':'sendMetricsTelegram','args':null});}),tgBot[_0x3c5268(0x330)](_0x3c5268(0x332),async _0x3c2f26=>{const _0x49cc16=_0x3c5268,_0x1dfd74=getEnabledBots();if(_0x1dfd74[_0x49cc16(0x1b1)]==0x0)await sendTelegram(_0x3c2f26[_0x49cc16(0x226)]['id'],_0x49cc16(0x185));else{if(_0x1dfd74[_0x49cc16(0x1b1)]>0x1){let _0x8be7cd=[],_0x310d17=[];const _0x25a9cf=_0x1dfd74['length']%0x4==0x0||_0x1dfd74[_0x49cc16(0x1b1)]%0x4==0x3||_0x1dfd74[_0x49cc16(0x1b1)]%0x3==0x1?0x4:0x3;let _0x1b1277=0x0;_0x1dfd74[_0x49cc16(0x2bf)]((_0x49d407,_0x366e54)=>{const _0x1efe05=_0x49cc16;if(_0x366e54%_0x25a9cf==0x0)_0x310d17=[];_0x310d17[_0x1efe05(0x2b5)](Markup['button'][_0x1efe05(0x1cb)](_0x1efe05(0x23f)+_0x49d407[_0x1efe05(0x214)],_0x1efe05(0x2ec)+_0x49d407[_0x1efe05(0x214)])),_0x366e54%_0x25a9cf==0x0&&(_0x8be7cd[_0x1b1277]=_0x310d17,_0x1b1277++);});const _0x177ae9=Markup[_0x49cc16(0x2dd)](_0x8be7cd);_0x3c2f26['reply'](_0x49cc16(0x33e),_0x177ae9);}else{const _0x1a5320=_0x1dfd74[0x0][_0x49cc16(0x214)];if(pid[_0x1a5320])pid[_0x1a5320]['send']({'function':_0x49cc16(0x163),'args':null});}}}),tgBot[_0x3c5268(0x1bb)](/portfolio_(.+)/,async _0x43a3ef=>{const _0x24560e=_0x3c5268,_0x3bd684=_0x43a3ef[_0x24560e(0x361)][0x1];_0x43a3ef['editMessageReplyMarkup']();if(pid[_0x3bd684])pid[_0x3bd684][_0x24560e(0x308)]({'function':_0x24560e(0x163),'args':null});}),tgBot[_0x3c5268(0x330)]('logs',async _0x5e1e85=>{const _0x87a6ac=_0x3c5268,_0x3cd980=_0x87a6ac(0x2be);await zipFiles(_0x3cd980);const _0x69fe3a=zippath+(_0x3cd980+_0x87a6ac(0x295));_0x5e1e85[_0x87a6ac(0x29a)]({'source':_0x69fe3a})[_0x87a6ac(0x180)](()=>{})[_0x87a6ac(0x262)](_0xd2d9f9=>logger[_0x87a6ac(0x228)](_0x87a6ac(0x190)+_0x3cd980+_0x87a6ac(0x2c9),_0xd2d9f9));}),tgBot['command'](_0x3c5268(0x26a),async _0x3051b7=>{const _0x3b19e4=_0x3c5268,_0x287281=_0x3b19e4(0x26a);await backupConfigFiles(),await zipFiles(_0x287281);const _0x59c219=zippath+(_0x287281+_0x3b19e4(0x295));_0x3051b7[_0x3b19e4(0x29a)]({'source':_0x59c219})[_0x3b19e4(0x180)](()=>{})[_0x3b19e4(0x262)](_0x45c730=>logger[_0x3b19e4(0x228)]('Error\x20sending\x20'+_0x287281+_0x3b19e4(0x2c9),_0x45c730));}),tgBot[_0x3c5268(0x330)](_0x3c5268(0x1a4),async _0x193242=>{const _0x321e3e=_0x3c5268;await getMessages();if(!updateAvailable)await sendTelegram(_0x193242['chat']['id'],'Your\x20installation\x20is\x20already\x20up\x20to\x20date');else{if(!validInstallation)await sendTelegram(_0x193242[_0x321e3e(0x226)]['id'],_0x321e3e(0x30c));else{const _0x2b5481=Markup['inlineKeyboard']([Markup[_0x321e3e(0x1b6)][_0x321e3e(0x1cb)]('Yes',_0x321e3e(0x327)),Markup[_0x321e3e(0x1b6)]['callback']('No','update_no')]);_0x193242[_0x321e3e(0x19e)](_0x321e3e(0x172),_0x2b5481);}}}),tgBot[_0x3c5268(0x1bb)](/update_(.+)/,async _0x104de9=>{const _0x504e7b=_0x3c5268,_0x279dfd=_0x104de9['match'][0x1];_0x104de9['editMessageReplyMarkup'](),_0x279dfd==_0x504e7b(0x2b0)&&(await sendTelegram(_0x104de9[_0x504e7b(0x226)]['id'],_0x504e7b(0x2c7)),updateBB('update')),_0x279dfd=='no'&&await sendTelegram(_0x104de9['chat']['id'],_0x504e7b(0x152));}),tgBot[_0x3c5268(0x330)](_0x3c5268(0x1b7),async _0x2b8c05=>{const _0x177590=_0x3c5268;if(!validInstallation)await sendTelegram(_0x2b8c05['chat']['id'],'Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation');else{const _0x373bdf=Markup[_0x177590(0x2dd)]([Markup['button'][_0x177590(0x1cb)](_0x177590(0x31b),_0x177590(0x17f)),Markup[_0x177590(0x1b6)]['callback']('No',_0x177590(0x2f6))]);_0x2b8c05[_0x177590(0x19e)](_0x177590(0x188),_0x373bdf);}}),tgBot['action'](/reinstall_(.+)/,async _0x45520c=>{const _0x173cd3=_0x3c5268,_0x46ede5=_0x45520c['match'][0x1];_0x45520c['editMessageReplyMarkup'](),_0x46ede5==_0x173cd3(0x2b0)&&(await sendTelegram(_0x45520c[_0x173cd3(0x226)]['id'],_0x173cd3(0x2fb)),updateBB(_0x173cd3(0x1b7))),_0x46ede5=='no'&&await sendTelegram(_0x45520c[_0x173cd3(0x226)]['id'],'Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled');}),tgBot['command'](_0x3c5268(0x347),async _0x3e2a49=>{const _0x326a63=_0x3c5268,_0x4f0668=getBotsWithMode();if(_0x4f0668[_0x326a63(0x1b1)]==0x0)await sendTelegram(_0x3e2a49[_0x326a63(0x226)]['id'],_0x326a63(0x185));else{let _0x1a902f=[],_0x23a773=[];const _0x44fe41=0x2;let _0x212a04=0x0;_0x4f0668[_0x326a63(0x2bf)]((_0x22c1b9,_0x1354dd)=>{const _0x10bed4=_0x326a63;if(_0x1354dd%_0x44fe41==0x0)_0x23a773=[];_0x23a773['push'](Markup[_0x10bed4(0x1b6)]['callback'](_0x10bed4(0x23f)+_0x22c1b9[_0x10bed4(0x214)]+'\x20('+_0x22c1b9[_0x10bed4(0x355)]+')',_0x10bed4(0x28f)+_0x22c1b9[_0x10bed4(0x214)])),_0x1354dd%_0x44fe41==0x0&&(_0x1a902f[_0x212a04]=_0x23a773,_0x212a04++);});const _0x176a6d=Markup[_0x326a63(0x2dd)](_0x1a902f);_0x3e2a49['reply']('Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?',_0x176a6d);}}),tgBot[_0x3c5268(0x1bb)](/toggle_(.+)/,async _0x46ca46=>{const _0x305b92=_0x3c5268,_0x470242=_0x46ca46[_0x305b92(0x361)][0x1];_0x46ca46[_0x305b92(0x1e2)]();const _0x2b0f86=getBotsWithMode(),_0x19e135=_0x2b0f86[_0x305b92(0x194)](_0x5eeee1=>_0x5eeee1[_0x305b92(0x214)]==_0x470242),_0x4f3cca=_0x19e135[_0x305b92(0x355)]=='auto'?_0x305b92(0x1b0):'auto';await sendTelegram(_0x46ca46[_0x305b92(0x226)]['id'],_0x305b92(0x25e)+_0x470242+_0x305b92(0x242)+_0x4f3cca+_0x305b92(0x2bc)),toggleBotMode(_0x470242);}),tgBot[_0x3c5268(0x330)](_0x3c5268(0x2f3),async _0x3d4fd5=>{const _0x1b4d8f=_0x3c5268;let _0x444536='';config[_0x1b4d8f(0x2bf)](_0x326b29=>{const _0x2bd93a=_0x1b4d8f;_0x444536+=_0x2bd93a(0x23f)+_0x326b29[_0x2bd93a(0x214)]+':\x20'+_0x326b29[_0x2bd93a(0x21a)]+'\x0a';}),await sendTelegram(_0x3d4fd5[_0x1b4d8f(0x226)]['id'],_0x444536,{'parse_mode':_0x1b4d8f(0x149)});}),tgBot[_0x3c5268(0x330)](_0x3c5268(0x1ac),async _0x5f262b=>{await sendTelegram(_0x5f262b['chat']['id'],_0x57fe19);}),process[_0x3c5268(0x32e)](_0x3c5268(0x14c),()=>tgBot[_0x3c5268(0x174)]('SIGINT')),process[_0x3c5268(0x32e)]('SIGTERM',()=>tgBot[_0x3c5268(0x174)]('SIGTERM')),tgBot[_0x3c5268(0x1f9)]();}function disableTelegram(){const _0x202317=_0x5f20e9;tgBot&&tgBot[_0x202317(0x174)]();}async function sendTelegram(_0x1b8f60,_0x4419f8,_0x31da5b){const _0x761b72=_0x5f20e9;_0x31da5b={..._0x31da5b,'disable_web_page_preview':!![]};try{await tgBot[_0x761b72(0x240)][_0x761b72(0x28c)](_0x1b8f60,_0x4419f8,_0x31da5b);}catch(_0x25ad98){logger[_0x761b72(0x228)](_0x761b72(0x24f),_0x25ad98);}}async function sendTelegramBot(_0x1111d0,_0x32cac8){const _0x2036f7=_0x5f20e9;if(settings[_0x2036f7(0x1fa)]){if(settings[_0x2036f7(0x161)]==_0x2036f7(0x211)||(_0x32cac8[_0x2036f7(0x24d)]==_0x2036f7(0x219)||_0x32cac8[_0x2036f7(0x24d)]=='warning'||_0x32cac8[_0x2036f7(0x24d)]==_0x2036f7(0x14b))&&settings['telegramEvents']==_0x2036f7(0x247)||_0x32cac8[_0x2036f7(0x24d)]==_0x2036f7(0x1ce)&&settings[_0x2036f7(0x161)]==_0x2036f7(0x310)){if(tgBot&&settings['telegramChatId']){if(_0x32cac8['showname'])await sendTelegram(settings['telegramChatId'],_0x32cac8[_0x2036f7(0x21a)]+'\x20>\x20'+_0x32cac8[_0x2036f7(0x1ef)]);else await sendTelegram(settings[_0x2036f7(0x1fb)],_0x2036f7(0x23f)+_0x1111d0+_0x2036f7(0x2b9)+_0x32cac8[_0x2036f7(0x1ef)]);}}}}async function sendTelegramMsg(_0x53bf34,_0x3df72e=_0x5f20e9(0x149)){const _0x3ec40e=_0x5f20e9;return settings[_0x3ec40e(0x1fa)]&&tgBot&&settings[_0x3ec40e(0x1fb)]?(await sendTelegram(settings[_0x3ec40e(0x1fb)],_0x53bf34,{'parse_mode':_0x3df72e}),!![]):![];}function getDeviceWithIp(_0x13c27c){return devices['find'](_0x3856f1=>_0x3856f1['ip']===_0x13c27c);}async function temporaryAccess2FA(_0x63c46b,_0x2b9564){const _0x58a07b=_0x5f20e9;let _0x5c6df9=new Date(),_0x4299c0=![];if(lastIpApproval){if(_0x5c6df9-lastIpApproval<0x1388)_0x4299c0=!![];}lastIpApproval=new Date();if(_0x4299c0)return;if(tgBot&&settings[_0x58a07b(0x1fb)]){const _0x1af74d=uuidRandom();tmpStorage[_0x1af74d]={'uuid':_0x63c46b,'externalip':_0x2b9564};const _0x43c876=Markup[_0x58a07b(0x2dd)]([Markup[_0x58a07b(0x1b6)]['callback'](_0x58a07b(0x20d),_0x58a07b(0x14f)+_0x1af74d),Markup['button'][_0x58a07b(0x1cb)](_0x58a07b(0x364),_0x58a07b(0x35d)+_0x1af74d),Markup['button'][_0x58a07b(0x1cb)](_0x58a07b(0x157),_0x58a07b(0x17c)+_0x1af74d),Markup['button'][_0x58a07b(0x1cb)](_0x58a07b(0x30a),_0x58a07b(0x27a)+_0x1af74d)]);await sendTelegram(settings[_0x58a07b(0x1fb)],_0x58a07b(0x2fa)+normalizeIP(_0x2b9564)['show']+'\x20?',_0x43c876),tgBot[_0x58a07b(0x1bb)](/tempaccess_(.+)_(.+)/,async _0x27a3be=>{const _0x4fdca8=_0x58a07b,_0x360a99=_0x27a3be[_0x4fdca8(0x361)][0x1],_0x448bcf=_0x27a3be[_0x4fdca8(0x361)][0x2],{uuid:_0x29c701,externalip:_0xb79f64}=tmpStorage[_0x448bcf];delete tmpStorage[_0x448bcf],_0x27a3be[_0x4fdca8(0x1e2)](),devices[_0x29c701][_0x4fdca8(0x1d1)]={'clientip':_0xb79f64,'timestamp':new Date()[_0x4fdca8(0x1de)](),'expiry':_0x360a99},_0x360a99!=_0x4fdca8(0x30a)?(await sendTelegram(_0x27a3be[_0x4fdca8(0x226)]['id'],'Access\x20enabled\x20for\x20'+_0x360a99+_0x4fdca8(0x311),{'parse_mode':_0x4fdca8(0x149)}),io['to'](_0x29c701)[_0x4fdca8(0x2a8)](_0x4fdca8(0x27b),{'access':{'allow':![],'reason':_0x4fdca8(0x234),'token':null}})):(await sendTelegram(_0x27a3be[_0x4fdca8(0x226)]['id'],'Temporary\x20access\x20rejected'),io['to'](_0x29c701)[_0x4fdca8(0x2a8)](_0x4fdca8(0x27b),{'access':{'allow':![],'reason':_0x4fdca8(0x173),'token':null}}));});}}async function loginAccess2FA(_0x1e8c9e,_0x2e0a62){const _0x142fe0=_0x5f20e9;if(tgBot&&settings['telegramChatId']){const _0x29fb39=uuidRandom();tmpStorage[_0x29fb39]={'uuid':_0x1e8c9e,'externalip':_0x2e0a62};const _0x1d97d1=Markup[_0x142fe0(0x2dd)]([Markup[_0x142fe0(0x1b6)]['callback'](_0x142fe0(0x195),'login2fa_'+loginExpiry+'_'+_0x29fb39),Markup['button'][_0x142fe0(0x1cb)](_0x142fe0(0x30a),'login2fa_reject_'+_0x29fb39)]);await sendTelegram(settings[_0x142fe0(0x1fb)],_0x142fe0(0x306)+normalizeIP(_0x2e0a62)[_0x142fe0(0x282)]+'\x20?',_0x1d97d1),tgBot[_0x142fe0(0x1bb)](/login2fa_(.+)_(.+)/,async _0x760c4d=>{const _0x288c00=_0x142fe0,_0x5d6213=_0x760c4d[_0x288c00(0x361)][0x1],_0x29fb2e=_0x760c4d[_0x288c00(0x361)][0x2],{uuid:_0x6e8775,externalip:_0x571706}=tmpStorage[_0x29fb2e];delete tmpStorage[_0x29fb2e],_0x760c4d[_0x288c00(0x1e2)](),devices[_0x6e8775][_0x288c00(0x354)]={'clientip':_0x571706,'timestamp':new Date()[_0x288c00(0x1de)](),'expiry':_0x5d6213},_0x5d6213!=_0x288c00(0x30a)?(await sendTelegram(_0x760c4d[_0x288c00(0x226)]['id'],_0x288c00(0x321),{'parse_mode':'HTML'}),io['to'](_0x6e8775)[_0x288c00(0x2a8)](_0x288c00(0x27b),{'access':{'allow':![],'reason':_0x288c00(0x234),'token':null}})):(await sendTelegram(_0x760c4d[_0x288c00(0x226)]['id'],_0x288c00(0x177)),io['to'](_0x6e8775)[_0x288c00(0x2a8)]('status',{'access':{'allow':![],'reason':_0x288c00(0x2ee),'token':null}}));});}}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x1f45e5=_0x5f20e9;return dbConfig[_0x1f45e5(0x2ad)](_0x1f45e5(0x1eb))[_0x1f45e5(0x158)](_0x1f45e5(0x214))['filter']({'status':_0x1f45e5(0x18a)})[_0x1f45e5(0x32c)]()||[];}function getDisabledBots(){const _0x5df45b=_0x5f20e9;return dbConfig[_0x5df45b(0x2ad)](_0x5df45b(0x1eb))[_0x5df45b(0x158)](_0x5df45b(0x214))[_0x5df45b(0x313)]({'status':_0x5df45b(0x2cc)})[_0x5df45b(0x32c)]()||[];}function getBotAttributes(_0x55098a){const _0x466ca6=_0x5f20e9;let _0x51414d={};const _0x228487=configpath+_0x466ca6(0x1e3)+_0x55098a+_0x466ca6(0x341),_0x44e954=fs[_0x466ca6(0x1a6)](_0x228487);if(_0x44e954){const _0x51df50=fs[_0x466ca6(0x1bd)](_0x228487);try{const _0x3137ec=JSON['parse'](_0x51df50),_0x492917=_0x3137ec?_0x3137ec[_0x466ca6(0x1ff)][0x0][_0x466ca6(0x2c1)]:![];_0x51414d[_0x466ca6(0x355)]=_0x492917?_0x466ca6(0x258):_0x466ca6(0x1b0),_0x51414d[_0x466ca6(0x21a)]=_0x3137ec?_0x3137ec[_0x466ca6(0x1ff)][0x0]['botname']:_0x466ca6(0x23f)+_0x55098a;}catch(_0x94f9f2){_0x51414d[_0x466ca6(0x355)]='manual',_0x51414d['botname']=_0x466ca6(0x23f)+_0x55098a;}}else _0x51414d['mode']=_0x466ca6(0x1b0),_0x51414d['botname']=_0x466ca6(0x23f)+_0x55098a;return _0x51414d;}function getBotsWithMode(){const _0x1db0a0=_0x5f20e9,_0x39456b=dbConfig[_0x1db0a0(0x2ad)]('bots')['sortBy'](_0x1db0a0(0x214))['value']()||[];return _0x39456b['forEach'](_0x39ad07=>{const _0x5e9a1f=_0x1db0a0;let _0x507158=getBotAttributes(_0x39ad07[_0x5e9a1f(0x214)]);_0x39ad07[_0x5e9a1f(0x355)]=_0x507158[_0x5e9a1f(0x355)];}),_0x39456b;}function getBotExchanges(){const _0x22e9ec=_0x5f20e9;let _0x2705e0=[];const _0x5e687a=dbConfig[_0x22e9ec(0x2ad)](_0x22e9ec(0x1eb))[_0x22e9ec(0x158)](_0x22e9ec(0x214))[_0x22e9ec(0x32c)]()||[];_0x5e687a[_0x22e9ec(0x2bf)](_0x576bd8=>{const _0x1c553d=_0x22e9ec;if(_0x576bd8[_0x1c553d(0x27b)]==_0x1c553d(0x18a)){const _0x42b0f8=configpath+_0x1c553d(0x1e3)+_0x576bd8[_0x1c553d(0x214)]+_0x1c553d(0x341),_0xdab130=fs[_0x1c553d(0x1a6)](_0x42b0f8);let _0x5446fe;if(_0xdab130){const _0x5c6cdc=fs[_0x1c553d(0x1bd)](_0x42b0f8);try{const _0x23c7b7=JSON[_0x1c553d(0x168)](_0x5c6cdc);_0x5446fe=_0x23c7b7?_0x23c7b7['bot'][0x0]['exchange']:null;}catch(_0x1f916a){}}if(_0x5446fe)_0x2705e0[_0x1c553d(0x2b5)](_0x5446fe);}});const _0x3b7257=[...new Set(_0x2705e0)][_0x22e9ec(0x151)]();return _0x3b7257;}async function initUser(){const _0x217ef4=_0x5f20e9;if(!settings[_0x217ef4(0x26d)]){const _0xac82c2=uuidRandom();mixpanel[_0x217ef4(0x2dc)](_0xac82c2),updateSetting('userid',_0xac82c2);}}async function initSecure(){const _0xe8007d=_0x5f20e9;let _0x44a816=getSecure();if(!_0x44a816[_0xe8007d(0x307)](_0xe8007d(0x1c9))){let _0x45144d=await generateKeys();_0x44a816['publicKey']=_0x45144d[_0xe8007d(0x15a)],_0x44a816['privateKey']=_0x45144d['privateKey'],_0x44a816[_0xe8007d(0x1c9)]=crypto[_0xe8007d(0x1df)](0x20)[_0xe8007d(0x315)](_0xe8007d(0x18e));;storeSecure(_0x44a816);}}function getSettings(){const _0x417af1=_0x5f20e9;return dbSettings['get'](_0x417af1(0x32a))['value']()||{};}function getSecure(){const _0x3103b7=_0x5f20e9;return dbSecure[_0x3103b7(0x2ad)](_0x3103b7(0x20b))['value']()||{};}function getBlacklist(){const _0x22f91e=_0x5f20e9;return dbSecure['get'](_0x22f91e(0x368))[_0x22f91e(0x32c)]()||[];}function broadcastToBots(_0x3bb0e5,_0x7287d){const _0x3a69de=_0x5f20e9;config[_0x3a69de(0x2bf)](_0x3d8b98=>{const _0x4b82ce=_0x3a69de;if(_0x3d8b98[_0x4b82ce(0x27b)]=='enabled'&&_0x3d8b98[_0x4b82ce(0x2f2)]==_0x4b82ce(0x1cd)||_0x3d8b98[_0x4b82ce(0x27b)]==_0x4b82ce(0x220)&&_0x3d8b98['live']==_0x4b82ce(0x1cd)){if(pid[_0x3d8b98['botID']])pid[_0x3d8b98[_0x4b82ce(0x214)]]['send']({[_0x3bb0e5]:_0x7287d});}});}async function storeSettings(_0x470b1d,_0x39de3d=![]){const _0x136135=_0x5f20e9;_0x470b1d={...settings,..._0x470b1d};if(_0x39de3d&&_0x470b1d[_0x136135(0x31a)]!=_0x136135(0x314)&&_0x470b1d['bbPassword']!=_0x136135(0x207)&&_0x470b1d[_0x136135(0x31a)]!=''){const _0x9bc469=decryptRSA(secure[_0x136135(0x309)],_0x470b1d[_0x136135(0x31a)])['split'](_0x136135(0x1b3))[0x0],_0x2fd03a=bcrypt['hashSync'](_0x9bc469,saltRounds);_0x470b1d={..._0x470b1d,'bbPassword':_0x2fd03a};}if(_0x39de3d&&_0x470b1d[_0x136135(0x288)]!=_0x136135(0x314)&&_0x470b1d['telegramToken']!=_0x136135(0x207)&&_0x470b1d[_0x136135(0x288)]!=''){const _0x5bdc82=decryptRSA(secure['privateKey'],_0x470b1d[_0x136135(0x288)])[_0x136135(0x1f8)](_0x136135(0x1b3))[0x0];_0x470b1d={..._0x470b1d,'telegramToken':_0x5bdc82};}if(_0x39de3d&&_0x470b1d[_0x136135(0x274)]!=_0x136135(0x314)&&_0x470b1d[_0x136135(0x274)]!='***'&&_0x470b1d[_0x136135(0x274)]!=''){const _0x34dcea=decryptRSA(secure[_0x136135(0x309)],_0x470b1d[_0x136135(0x274)])[_0x136135(0x1f8)](_0x136135(0x1b3))[0x0];_0x470b1d={..._0x470b1d,'marketcapApi':_0x34dcea};}const _0x4fd0f8=_0x470b1d['telegramToken']!=_0x136135(0x314)&&_0x470b1d[_0x136135(0x288)]!=settings[_0x136135(0x288)]||_0x470b1d['telegramUsername']!=settings[_0x136135(0x343)],_0x275caf=_0x470b1d[_0x136135(0x288)]==''||_0x470b1d['telegramUsername']=='',_0x5e56a4=_0x470b1d[_0x136135(0x274)]&&_0x470b1d[_0x136135(0x274)]!=_0x136135(0x314)&&_0x470b1d[_0x136135(0x274)]!=settings[_0x136135(0x274)];_0x4fd0f8&&(_0x470b1d['telegramChatId']=null,_0x470b1d[_0x136135(0x161)]='all');for(const [_0x4593fa,_0x4a0f1d]of Object[_0x136135(0x196)](_0x470b1d)){if(_0x4593fa==_0x136135(0x288)&&_0x4a0f1d==_0x136135(0x314)){_0x470b1d[_0x136135(0x288)]=settings[_0x136135(0x288)];continue;};if(_0x4593fa=='bbPassword'&&_0x4a0f1d==_0x136135(0x314)){_0x470b1d[_0x136135(0x31a)]=settings['bbPassword'];continue;};if(_0x4593fa=='marketcapApi'&&_0x4a0f1d==_0x136135(0x314)){_0x470b1d[_0x136135(0x274)]=settings[_0x136135(0x274)];continue;};dbSettings[_0x136135(0x337)](_0x136135(0x2a6)+_0x4593fa,_0x4a0f1d)[_0x136135(0x1c6)]();}settings=_0x470b1d,io['to'](_0x136135(0x1e0))[_0x136135(0x2a8)](_0x136135(0x32a),cleanSettings()),broadcastToBots('timeshift',settings[_0x136135(0x1d2)]),broadcastToBots('onepagemode',settings[_0x136135(0x259)]),broadcastToBots(_0x136135(0x274),settings['marketcapApi']);if(_0x4fd0f8&&!_0x275caf)initTelegram();_0x4fd0f8&&_0x275caf&&(updateSetting(_0x136135(0x1fb),null),disableTelegram()),getAllClients()[_0x136135(0x2bf)](_0x2e6ca8=>{const _0x4e1afa=_0x136135;getSocket(_0x2e6ca8['id'])[_0x4e1afa(0x2a8)](_0x4e1afa(0x27b),{'access':{'allow':![],'reason':_0x4e1afa(0x234),'token':null}});}),_0x5e56a4&&(await sleep(0xbb8),testMarketcapApi(_0x470b1d[_0x136135(0x274)]));}async function testMarketcapApi(_0x3e531b){const _0xb358c6=_0x5f20e9,_0x18a841=['BCT',_0xb358c6(0x1b8)];try{await axios[_0xb358c6(0x2ad)]('https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest',{'headers':{'X-CMC_PRO_API_KEY':_0x3e531b},'params':{'symbol':_0x18a841[_0xb358c6(0x315)]()}});}catch(_0xc662d1){_0xc662d1['toString']()['includes'](_0xb358c6(0x266))?(io['to']('botmanager')[_0xb358c6(0x2a8)](_0xb358c6(0x230),_0xb358c6(0x217)),logger[_0xb358c6(0x2b2)](_0xb358c6(0x217))):(io['to'](_0xb358c6(0x1e0))[_0xb358c6(0x2a8)](_0xb358c6(0x230),_0xb358c6(0x34d)),logger[_0xb358c6(0x2b2)](_0xb358c6(0x34d)),logger['debug']('Error\x20details:',_0xc662d1[_0xb358c6(0x315)]()+_0xb358c6(0x1e9)+_0xc662d1[_0xb358c6(0x34f)]));return;}logger[_0xb358c6(0x228)](_0xb358c6(0x2fe));}function updateSetting(_0x49f5b3,_0x432b85){const _0x433430=_0x5f20e9;dbSettings[_0x433430(0x337)](_0x433430(0x2a6)+_0x49f5b3,_0x432b85)['write'](),settings=getSettings(),io['to'](_0x433430(0x1e0))[_0x433430(0x2a8)](_0x433430(0x32a),cleanSettings());}function storeSecure(_0x23756d){const _0x2e7e97=_0x5f20e9;dbSecure['get']('secure')[_0x2e7e97(0x2b5)](_0x23756d)[_0x2e7e97(0x1c6)](),secure=_0x23756d;}function addBlacklist(_0x26ab5a){const _0x124050=_0x5f20e9;cleanBlacklist();let _0x15d0c9;devices[_0x26ab5a][_0x124050(0x1d1)]?_0x15d0c9=Math[_0x124050(0x1fe)](devices[_0x26ab5a]['telegramIpApproval'][_0x124050(0x23d)],loginExpiry):_0x15d0c9=loginExpiry,dbSecure[_0x124050(0x2ad)](_0x124050(0x368))['push']({'expiry':new Date()[_0x124050(0x1de)]()+_0x15d0c9*0x3c*0x3e8,'token':devices[_0x26ab5a][_0x124050(0x250)]['token']})[_0x124050(0x1c6)](),blacklist=dbSecure[_0x124050(0x2ad)]('blacklist')[_0x124050(0x32c)]();}function cleanBlacklist(){const _0x5b1e4e=_0x5f20e9;let _0x512828=dbSecure[_0x5b1e4e(0x2ad)](_0x5b1e4e(0x368))[_0x5b1e4e(0x2da)]()[_0x5b1e4e(0x32c)](),_0x43c3fb=new Date()[_0x5b1e4e(0x1de)]();_0x512828[_0x5b1e4e(0x2bf)](_0x261f12=>{const _0x5347be=_0x5b1e4e;_0x261f12['expiry']<_0x43c3fb&&dbSecure[_0x5347be(0x2ad)](_0x5347be(0x368))['remove']({'expiry':_0x261f12[_0x5347be(0x23d)]})[_0x5347be(0x1c6)]();});}function initStates(){const _0xeb8d4f=_0x5f20e9;let _0x3ff427=getConfiguration();_0x3ff427[_0xeb8d4f(0x2bf)](_0x1b8703=>{const _0x49818f=_0xeb8d4f;_0x1b8703[_0x49818f(0x2f2)]=_0x49818f(0x2a9);}),storeConfiguration(_0x3ff427);}async function generateKeys(){const _0x59bfad=_0x5f20e9,_0x36270a=forge['pki'][_0x59bfad(0x249)][_0x59bfad(0x1be)]({'bits':0x1000,'e':0x10001}),_0x364d59=forge['pki'][_0x59bfad(0x192)](_0x36270a[_0x59bfad(0x309)]),_0x3abf27=forge[_0x59bfad(0x257)]['publicKeyToPem'](_0x36270a['publicKey']);return{'privateKey':_0x364d59,'publicKey':_0x3abf27};}async function oneTimeMigration(){const _0x1784b2=_0x5f20e9;let _0xf0696d=getSettings(),_0x2f45db=![];!_0xf0696d[_0x1784b2(0x307)](_0x1784b2(0x31d))&&(_0xf0696d[_0x1784b2(0x31d)]=0x0,_0x2f45db=!![]);!_0xf0696d[_0x1784b2(0x307)]('lastmsgemitted')&&(_0xf0696d[_0x1784b2(0x209)]=0x0,_0x2f45db=!![]);!_0xf0696d[_0x1784b2(0x307)](_0x1784b2(0x15c))&&(_0xf0696d[_0x1784b2(0x15c)]=_0x1784b2(0x199),_0x2f45db=!![]);!_0xf0696d[_0x1784b2(0x307)]('onepagemode')&&(_0xf0696d[_0x1784b2(0x259)]=![],_0x2f45db=!![]);!_0xf0696d[_0x1784b2(0x307)](_0x1784b2(0x274))&&(_0xf0696d['marketcapApi']='',_0x2f45db=!![]);if(_0x2f45db)storeSettings(_0xf0696d);try{fs[_0x1784b2(0x150)](configbackuppath,{'withFileTypes':!![]})[_0x1784b2(0x2bf)](_0x8b40d2=>{const _0x264ade=_0x1784b2;if(!_0x8b40d2['isDirectory']()){if(!_0x8b40d2['name']['startsWith'](_0x264ade(0x2d8)))fs['unlinkSync'](configbackuppath+_0x8b40d2[_0x264ade(0x17b)]);}else fs[_0x264ade(0x19a)](configbackuppath+_0x8b40d2[_0x264ade(0x17b)],{'recursive':!![]});});}catch(_0x3203ab){logger[_0x1784b2(0x228)](_0x1784b2(0x36f),_0x3203ab);}}function storeConfiguration(_0x3ee44e){const _0x4ec438=_0x5f20e9;dbConfig[_0x4ec438(0x2ad)]('bots')[_0x4ec438(0x2f9)]()[_0x4ec438(0x1c6)](),dbConfig[_0x4ec438(0x2ad)](_0x4ec438(0x1eb))['push'](..._0x3ee44e)[_0x4ec438(0x1c6)](),config=_0x3ee44e;}async function resetPassword(){const _0x8d43cf=_0x5f20e9;if(tgBot&&settings[_0x8d43cf(0x1fb)]){const _0x3deceb=Markup[_0x8d43cf(0x2dd)]([Markup[_0x8d43cf(0x1b6)][_0x8d43cf(0x1cb)](_0x8d43cf(0x2b0),_0x8d43cf(0x350)),Markup['button'][_0x8d43cf(0x1cb)]('no',_0x8d43cf(0x215))]);await sendTelegram(settings[_0x8d43cf(0x1fb)],'Do\x20you\x20want\x20to\x20reset\x20your\x20password?',_0x3deceb),tgBot[_0x8d43cf(0x1bb)](/resetpw_(.+)/,async _0x17b98f=>{const _0x4eb438=_0x8d43cf,_0x467a0d=_0x17b98f[_0x4eb438(0x361)][0x1];_0x17b98f[_0x4eb438(0x1e2)]();if(_0x467a0d!='no'){const _0xd2c91d=0xf,_0x3f3e2b=_0x4eb438(0x153),_0x2b0e3b=Array[_0x4eb438(0x1bf)](crypto[_0x4eb438(0x369)](new Uint32Array(_0xd2c91d)))[_0x4eb438(0x296)](_0x4ced49=>_0x3f3e2b[_0x4ced49%_0x3f3e2b[_0x4eb438(0x1b1)]])[_0x4eb438(0x1b4)](''),_0x3ae932=bcrypt[_0x4eb438(0x339)](_0x2b0e3b,saltRounds);storeSettings({'bbPassword':_0x3ae932}),await sendTelegram(_0x17b98f[_0x4eb438(0x226)]['id'],_0x4eb438(0x30b)+_0x2b0e3b,{'parse_mode':'HTML'});}else await sendTelegram(_0x17b98f[_0x4eb438(0x226)]['id'],_0x4eb438(0x287));});}}function _0x1eb9(_0x2b83b1,_0x52ccf0){const _0x400a53=_0x4c82();return _0x1eb9=function(_0x1cb395,_0x4d3f87){_0x1cb395=_0x1cb395-0x145;let _0x4c8204=_0x400a53[_0x1cb395];return _0x4c8204;},_0x1eb9(_0x2b83b1,_0x52ccf0);}async function confirmRestore(_0x453b20,_0xd3be96){const _0x573de5=_0x5f20e9;io['to'](_0x573de5(0x1e0))[_0x573de5(0x2a8)](_0x573de5(0x230),_0x573de5(0x205),_0x573de5(0x14b));if(tgBot&&settings[_0x573de5(0x1fb)]){const _0x23ae97=uuidRandom();tmpStorage[_0x23ae97]={'path':_0x453b20,'filename':_0xd3be96};const _0x2ec38b=Markup[_0x573de5(0x2dd)]([Markup[_0x573de5(0x1b6)]['callback'](_0x573de5(0x2b0),_0x573de5(0x176)+_0x23ae97),Markup[_0x573de5(0x1b6)][_0x573de5(0x1cb)]('no',_0x573de5(0x322)+_0x23ae97)]);await sendTelegram(settings[_0x573de5(0x1fb)],_0x573de5(0x145),_0x2ec38b),tgBot[_0x573de5(0x1bb)](/restore_(.+)_(.+)/,async _0x1bc187=>{const _0xb7274b=_0x573de5,_0x12194f=_0x1bc187[_0xb7274b(0x361)][0x1],_0xc46248=_0x1bc187['match'][0x2],{path:_0x2612a6,filename:_0x4cc541}=tmpStorage[_0xc46248];delete tmpStorage[_0xc46248],_0x1bc187[_0xb7274b(0x1e2)](),_0x12194f=='yes'?(logger[_0xb7274b(0x228)](_0xb7274b(0x147)),await sendTelegram(_0x1bc187[_0xb7274b(0x226)]['id'],_0xb7274b(0x336),{'parse_mode':_0xb7274b(0x149)}),unzipFile(_0x2612a6,_0x4cc541)):(logger[_0xb7274b(0x228)](_0xb7274b(0x2e3)),await sendTelegram(_0x1bc187['chat']['id'],_0xb7274b(0x2e3)));});}}function getServerTime(){const _0x579c04=_0x5f20e9,_0x347930=new Date();return _0x347930[_0x579c04(0x1b9)]()+'/'+(_0x347930[_0x579c04(0x19b)]()+0x1)[_0x579c04(0x315)]()[_0x579c04(0x200)](0x2,'0')+'/'+_0x347930[_0x579c04(0x2a2)]()[_0x579c04(0x315)]()[_0x579c04(0x200)](0x2,'0')+'\x20'+_0x347930[_0x579c04(0x2a4)]()[_0x579c04(0x315)]()[_0x579c04(0x200)](0x2,'0')+':'+_0x347930['getMinutes']()[_0x579c04(0x315)]()[_0x579c04(0x200)](0x2,'0')+':'+_0x347930[_0x579c04(0x359)]()['toString']()['padStart'](0x2,'0');}function getTimeStamp(){const _0x377d88=_0x5f20e9,_0x4bb342=shiftedTime();return _0x4bb342['getFullYear']()+'/'+(_0x4bb342[_0x377d88(0x19b)]()+0x1)[_0x377d88(0x315)]()[_0x377d88(0x200)](0x2,'0')+'/'+_0x4bb342[_0x377d88(0x2a2)]()[_0x377d88(0x315)]()[_0x377d88(0x200)](0x2,'0')+'\x20'+_0x4bb342[_0x377d88(0x2a4)]()[_0x377d88(0x315)]()[_0x377d88(0x200)](0x2,'0')+':'+_0x4bb342[_0x377d88(0x15d)]()[_0x377d88(0x315)]()['padStart'](0x2,'0')+':'+_0x4bb342[_0x377d88(0x359)]()[_0x377d88(0x315)]()[_0x377d88(0x200)](0x2,'0');}function getCleanTimeStamp(){const _0x211f41=_0x5f20e9,_0x373fc1=shiftedTime();return _0x373fc1[_0x211f41(0x1b9)]()+(_0x373fc1[_0x211f41(0x19b)]()+0x1)[_0x211f41(0x315)]()[_0x211f41(0x200)](0x2,'0')+_0x373fc1['getDate']()[_0x211f41(0x315)]()[_0x211f41(0x200)](0x2,'0')+'-'+_0x373fc1[_0x211f41(0x2a4)]()['toString']()['padStart'](0x2,'0')+_0x373fc1[_0x211f41(0x15d)]()[_0x211f41(0x315)]()[_0x211f41(0x200)](0x2,'0')+_0x373fc1[_0x211f41(0x359)]()['toString']()[_0x211f41(0x200)](0x2,'0');}function shiftedTime(){const _0x3e6437=_0x5f20e9,_0x5348ce=new Date();let _0x2991cc=_0x5348ce;if(settings[_0x3e6437(0x1d2)]&&settings['timeshift']!==0x0)_0x2991cc=fns[_0x3e6437(0x36b)](_0x5348ce,{'hours':settings['timeshift']});return _0x2991cc;}async function startScheduler(){const _0x358a9e=_0x5f20e9,_0x33ab5b=new Date()[_0x358a9e(0x333)](),_0x429ef4=shiftedTime()[_0x358a9e(0x2a4)]();_0x429ef4==0x4&&backupConfigFiles(),_0x429ef4==0x0&&(rotateLogFiles(),logger[_0x358a9e(0x228)](_0x358a9e(0x178)),logger[_0x358a9e(0x228)](_0x358a9e(0x2db)+serverversion+_0x358a9e(0x24b)+(environment==_0x358a9e(0x292)?_0x358a9e(0x2f7):'')),logger['debug'](_0x358a9e(0x178))),_0x33ab5b%0x6==0x0&&triggerAnalytics(),_0x33ab5b%0x6==0x0&&getMessages(),await sleep(schedulerInterval),startScheduler();}async function restoreBackupFile(_0x11311b){const _0x448364=_0x5f20e9;logger[_0x448364(0x228)](_0x448364(0x1f2)+_0x11311b);const _0x350e9d=getBotsWithMode();_0x350e9d[_0x448364(0x1b1)]>0x0?confirmRestore(configbackuppath,_0x11311b):unzipFile(configbackuppath,_0x11311b);}async function getBackupFiles(_0x290bd7=null){const _0x365610=_0x5f20e9;let _0x5afd60=[],_0x375bcb=fs['readdirSync'](configbackuppath,{'withFileTypes':!![]});_0x375bcb[_0x365610(0x151)]((_0x5ee577,_0x2d1394)=>_0x5ee577['name']<_0x2d1394[_0x365610(0x17b)]?0x1:_0x2d1394[_0x365610(0x17b)]<_0x5ee577[_0x365610(0x17b)]?-0x1:0x0),_0x375bcb['forEach'](_0x393f4a=>{const _0x447694=_0x365610;if(!_0x393f4a[_0x447694(0x2f4)]()&&_0x393f4a[_0x447694(0x17b)][_0x447694(0x25b)](_0x447694(0x2d8))&&_0x393f4a['name'][_0x447694(0x29f)](_0x447694(0x295))){const _0x7a7025=formatDate(fs['statSync'](configbackuppath+_0x393f4a['name'])[_0x447694(0x2bd)]);_0x5afd60['push']({'name':_0x393f4a[_0x447694(0x17b)],'mtime':_0x7a7025});}});if(_0x290bd7)io['to'](_0x290bd7)[_0x365610(0x2a8)](_0x365610(0x26b),_0x5afd60);else return _0x5afd60;}async function backupConfigFiles(){const _0x3eab9c=_0x5f20e9;await zipFiles(_0x3eab9c(0x186));const _0x123453=getCleanTimeStamp();fs[_0x3eab9c(0x23c)](zippath+'backup-full.zip',configbackuppath+('backup-full@'+_0x123453+_0x3eab9c(0x295)));let _0x3a7a3a=fs[_0x3eab9c(0x150)](configbackuppath,{'withFileTypes':!![]});_0x3a7a3a[_0x3eab9c(0x151)]((_0x54f044,_0x25b464)=>_0x54f044[_0x3eab9c(0x17b)]<_0x25b464[_0x3eab9c(0x17b)]?0x1:_0x25b464[_0x3eab9c(0x17b)]<_0x54f044[_0x3eab9c(0x17b)]?-0x1:0x0),_0x3a7a3a[_0x3eab9c(0x1b1)]>maxBackups&&fs[_0x3eab9c(0x17a)](configbackuppath+_0x3a7a3a[_0x3a7a3a[_0x3eab9c(0x1b1)]-0x1][_0x3eab9c(0x17b)]);}function rotateLogFiles(){const _0x12d430=_0x5f20e9,_0xa40a56=fs[_0x12d430(0x35c)](logspath+_0x12d430(0x346)),_0x1800b1=_0xa40a56[_0x12d430(0x1ae)]/0x400;if(_0x1800b1>0x64){let _0x23bd8b=fs[_0x12d430(0x150)](logspath,{'withFileTypes':!![]});_0x23bd8b['sort']((_0x197c1a,_0x22d8b2)=>_0x197c1a['name']<_0x22d8b2['name']?0x1:_0x22d8b2[_0x12d430(0x17b)]<_0x197c1a[_0x12d430(0x17b)]?-0x1:0x0),_0x23bd8b[_0x12d430(0x2bf)](_0x54a601=>{const _0x51a103=_0x12d430;if(_0x54a601[_0x51a103(0x17b)]==_0x51a103(0x2aa))fs[_0x51a103(0x23c)](logspath+_0x54a601[_0x51a103(0x17b)],logspath+_0x51a103(0x32b));if(_0x54a601[_0x51a103(0x17b)]==_0x51a103(0x22a))fs[_0x51a103(0x23c)](logspath+_0x54a601[_0x51a103(0x17b)],logspath+_0x51a103(0x2aa));_0x54a601[_0x51a103(0x17b)]==_0x51a103(0x346)&&(fs[_0x51a103(0x23c)](logspath+_0x54a601[_0x51a103(0x17b)],logspath+'output-001.log'),fs[_0x51a103(0x280)](logspath+_0x54a601[_0x51a103(0x17b)],''));});}}async function zipFiles(_0x1a3bf9){const _0x5447d9=_0x5f20e9;let _0x24f7a2;if(_0x1a3bf9==_0x5447d9(0x2be))_0x24f7a2=logspath;if(_0x1a3bf9==_0x5447d9(0x26a))_0x24f7a2=configpath;if(_0x1a3bf9=='backup-full')_0x24f7a2=configpath;let _0x40866c=fs['readdirSync'](_0x24f7a2,{'withFileTypes':!![]});const _0x3a3bb9=new JSZip();_0x40866c['forEach'](_0x42f58e=>{const _0x3c10e0=_0x5447d9;if(!_0x42f58e[_0x3c10e0(0x2f4)]()){let _0x4325cf=fs['readFileSync'](_0x24f7a2+_0x42f58e[_0x3c10e0(0x17b)]);if(_0x1a3bf9=='backup'){const _0x2b1bb6=/^bot-[0-9]{3}-config.json$/,_0x5a102e=_0x2b1bb6[_0x3c10e0(0x182)](_0x42f58e['name']);if(_0x5a102e){const _0x33e099=JSON['parse'](_0x4325cf);if(_0x33e099[_0x3c10e0(0x1ff)][0x0]){_0x33e099['bot'][0x0][_0x3c10e0(0x175)]=_0x3c10e0(0x207),_0x33e099['bot'][0x0][_0x3c10e0(0x1b2)]='***';if(_0x33e099['bot'][0x0]['apiPassword'])_0x33e099[_0x3c10e0(0x1ff)][0x0][_0x3c10e0(0x255)]=_0x3c10e0(0x207);}_0x4325cf=JSON[_0x3c10e0(0x2f5)](_0x33e099,null,0x2);}if(_0x42f58e[_0x3c10e0(0x17b)]==_0x3c10e0(0x223)){const _0x1d620d=JSON['parse'](_0x4325cf);if(_0x1d620d[_0x3c10e0(0x32a)][_0x3c10e0(0x2b6)])_0x1d620d[_0x3c10e0(0x32a)][_0x3c10e0(0x2b6)]=![];if(_0x1d620d[_0x3c10e0(0x32a)][_0x3c10e0(0x31a)])_0x1d620d[_0x3c10e0(0x32a)][_0x3c10e0(0x31a)]=_0x3c10e0(0x207);if(_0x1d620d[_0x3c10e0(0x32a)][_0x3c10e0(0x288)])_0x1d620d[_0x3c10e0(0x32a)][_0x3c10e0(0x288)]=_0x3c10e0(0x207);if(_0x1d620d[_0x3c10e0(0x32a)][_0x3c10e0(0x1fb)])_0x1d620d[_0x3c10e0(0x32a)][_0x3c10e0(0x1fb)]=null;if(_0x1d620d['settings']['marketcapApi'])_0x1d620d[_0x3c10e0(0x32a)][_0x3c10e0(0x274)]='***';_0x4325cf=JSON[_0x3c10e0(0x2f5)](_0x1d620d,null,0x2);}if(_0x42f58e['name']!=_0x3c10e0(0x294))_0x3a3bb9[_0x3c10e0(0x360)](_0x42f58e[_0x3c10e0(0x17b)],_0x4325cf);}else _0x3a3bb9[_0x3c10e0(0x360)](_0x42f58e[_0x3c10e0(0x17b)],_0x4325cf);}});const _0x40cab0=await _0x3a3bb9[_0x5447d9(0x181)]({'type':'string','base64':![],'compression':'DEFLATE'});fs[_0x5447d9(0x280)](zippath+(_0x1a3bf9+_0x5447d9(0x295)),_0x40cab0,_0x5447d9(0x33f));}function _0x4c82(){const _0x2c5f2b=['/:bot/coins','alerts','socket','rsa','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','#RES#\x20','store-headless','type','env','Telegram\x20error:','access','function','Unauthorized\x20attempt\x20to\x20get\x20portfolio','#RES#\x20if\x20running\x20locally\x0a','clients','apiPassword','mkdirSync','pki','auto','onepagemode','sha256','startsWith','ipaddr.js','any','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','zip/','NTBA_FIX_319',',\x20must\x20be\x20a\x204\x20digit\x20number','catch','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','restart_','index.html','status\x20code\x20401','pidRefreshToken','delete-bot','ipv6','backup','backup-files','Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files','userid','invalid\x20credentials','enable','node','/:bot/history','metrics_','26927jfqMhV','marketcapApi','3000','Restarting\x20Bot\x20','-events.json','place-order','encryptedUuid','tempaccess_reject_','status','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','telegrammsg','headers','showConfig','writeFileSync','Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file','show','\x20(2)','Notifications\x20disabled\x0a','store-configuration','Notifications\x20enabled\x0a','Password\x20reset\x20rejected','telegramToken','cancelLoading','async','/metrics\x20-\x20show\x20bot\x20performance\x0a','sendMessage','ipc','All\x20bots','toggle_','temporaryAccessAllowed','decode64','staging','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','bb-secure.json','.zip','map','Idling\x20(','Unauthorized\x20attempt\x20to\x20update\x20settings','::1','replyWithDocument','min','messages','887460sHxYex','uuid-random','endsWith','https://api.ipify.org?format=json','update-bot','getDate','pidExpireLogin','getHours','update-bb','settings.','/output-000.log','emit','stopped','output-002.log','on_','Error:\x20Invalid\x20argument\x20','get','Unauthorized\x20attempt\x20to\x20add\x20bot','loadAsync','yes','version.json','full','get-backup-files','off_','push','loginRequired','restore-backup-file','Deleted\x20Bot\x20','\x20>\x20','6279HhOQfz','config_all','\x20mode','mtime','logs','forEach','/download/:type','headless','use','config','user','graphql-request','Telegraf\x20error:','Starting\x20Balance\x20Bot\x20update','connected','\x20files\x20over\x20Telegram:','number','402ADuVKV','disabled','logs/','login\x20token\x20generated','Server','auth','disable','\x20|\x20','uuid','argv','title','crypto','socket.io','backup-full@','config_orders','cloneDeep','Running\x20#RED#Balance\x20Bot\x20v','alias','inlineKeyboard','new-disabled','log','Unauthorized\x20attempt\x20to\x20delete\x20bot','\x1b[0m','updatebotmanager','Restore\x20process\x20aborted','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','bot.js','path','private','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','format','version','toggleBotMode','portfolio_','connection','2FA\x20login\x20rejected','storeConfiguration','8cRyINQ','Unauthorized\x20attempt\x20to\x20download\x20','live','names','isDirectory','stringify','reinstall_no','(staging)','config/','remove','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20','Starting\x20Balance\x20Bot\x20reinstallation','password','exec','CoinMarketCap\x20API\x20key\x20validated','Token\x20blacklisted','/help\x20-\x20show\x20available\x20commands\x0a','Notifications\x20enabled','4823235IccDQo','/upload-backup','-----------------------------------------------------------------------------------','environment','Allow\x20login\x20from\x20IP\x20address\x20','hasOwnProperty','send','privateKey','reject','Password\x20has\x20been\x20reset\x20to:\x20','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update',':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20','File\x20uploaded','/enable\x20-\x20enable\x20notifications\x0a','orders','\x20minutes','Ok,\x20will\x20send\x20alert\x20notifications\x20only','filter','************','toString','Bot\x20Mgr\x20>\x20','timestamp','Unauthorized\x20attempt\x20to\x20store\x20configuration','1000','bbPassword','Yes','bb-config.json','lastmsgtelegram','family','conn','Starting\x20new\x20bot\x20|\x20Bot\x20','Login\x20accepted','restore_no_','3351000DqbPiE','createWriteStream','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?','exp','update_yes','2FA','disconnect','settings','output-003.log','value','storeHeadless','once','Ok,\x20will\x20send\x20order\x20notifications\x20only','command','Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U','portfolio','getUTCHours','text',')\x20\x20\x20|\x20Bot\x20','Restoring\x20bot(s)\x20from\x20backup','set','referer','hashSync','assign','token','*$1*','telegraf','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','binary','Enabled\x20Bot\x20','-config.json','-performance.json','telegramUsername','decrypt','#RES#','output-000.log','toggle','toIPv4Address','replace','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','files','2FA\x20login\x20token\x20generated','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20see\x20logs\x20for\x20details','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run','code','resetpw_yes','start','f2aRequired','Unauthorized\x20attempt\x20to\x20update\x20bot','telegram2FaApproval','mode','args','/status\x20-\x20show\x20bot(s)\x20status\x0a','store','getSeconds','inherit','username','statSync','tempaccess_15_','Backup\x20file\x20unzipped\x20and\x20stored','params','file','match','Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot','tkn','15\x20min','axios','login\x20not\x20required','Unauthorized\x20attempt\x20to\x20log\x20out','blacklist','randomFillSync','express','add','login\x20token\x20valid','host','deleteHistoryAlerts','Error\x20removing\x20old\x20backup\x20files:','Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)','\x20only\x0a','Restore\x20process\x20confirmed','address\x20already\x20in\x20use','HTML','string','success','SIGINT','isValid','\x1b[35m','tempaccess_5_','readdirSync','sort','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','-results.json','static','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)','30\x20min','sortBy','restart','publicKey','<b>Telegram\x20Bot\x20Status:</b>\x0a','latestversion','getMinutes','search','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','slice','telegramEvents',':\x20Bot\x20Mgr\x20>\x20Telegram\x20error\x20occured','sendPortfolioTelegram','\x1b[34m','create','Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration','sendFile','parse','/:bot/support','sign','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','Logged\x20in\x20user\x20...','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','temporary\x20access\x20timeout','/:bot/configuration','\x1b[36m','includes','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','temporary\x20access\x20rejected','stop','apiKey','restore_yes_','Login\x20rejected','--------------------------------------','Unauthorized\x20attempt\x20to\x20get\x20messages','unlinkSync','name','tempaccess_30_','createServer','metrics','reinstall_yes','then','generateAsync','test','listen','bbUsername','No\x20bots\x20running\x20right\x20now','backup-full','uncaughtException','Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?','Notifications\x20disabled','enabled','off','Unauthorized\x20login\x20attempt\x20(timeout)','bb/','hex','Network\x20Interfaces:','Error\x20sending\x20','build2','privateKeyToPem','message','find','accept','entries','jszip','temporary\x20token\x20generated','0.0.0','rmSync','getMonth','date-fns','(((.+)+)+)+$','reply','User\x20has\x20been\x20validated','confirm-message','reset-password','yargs/yargs','Starting\x20#RED#Balance\x20Bot\x20v','update','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','existsSync','constructor','get-starting-balances','started','login','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','help','Unauthorized\x20attempt\x20to\x20confirm\x20message','size','Invalid\x20authentication\x20token\x20(1)','manual','length','apiSecret','|@|','join','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','button','reinstall','ETH','getFullYear','config_alerts','action','port','readFileSync','generateKeyPair','from','Backup\x20file\x20uploaded','_nsps','exit','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','/on\x20-\x20start\x20bot(s)\x0a','versions','write','reason','placeOrder','secret','2FA\x20required','callback','logout','running','order','address','data','telegramIpApproval','timeshift','Failed\x20to\x20download\x20','Notifications\x20types:\x20','node-forge','mixpanel','allow','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','kill','Orders','Disabled\x20Bot\x20','$1_$2_$3','compareSync','getTime','randomBytes','botmanager','util','editMessageReplyMarkup','bot-','sendMetricsTelegram','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','/:bot/performance','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','/update\x20-\x20update\x20Balance\x20Bot\x0a','\x20-\x20','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run','bots','clientip','getStartingBalances','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','event','Session\x20expired\x20for\x20user\x20...','#RED#Balance\x20Bot\x20is\x20already\x20running\x20on\x20port\x20','Restore\x20backup\x20file\x20','Starting\x20(','close','Markdown','apply','verify','split','launch','telegramEnabled','telegramChatId','toIPv4MappedAddress','Unauthorized\x20attempt\x20to\x20delete\x20alerts','max','bot','padStart','/logs\x20-\x20receive\x20log\x20files\x0a','Invalid\x20authentication\x20token\x20(2)','storeFiat','bbvNew','Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot','\x20|\x20user:\x20...','***','remoteAddress','lastmsgemitted','init','secure','Invalid\x20IP\x20address','5\x20min','All','build','http','all','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','kind','botID','resetpw_no','/backup\x20-\x20receive\x20backup\x20files\x0a','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','Unauthorized\x20attempt\x20to\x20get\x20events','error','botname','RSA-OAEP','defaults','Node.js\x20v','#RES#\x20if\x20running\x20on\x20server','2FA\x20login\x20required','new','2874032qaaQWA','track','bb-settings.json','/names\x20-\x20show\x20bot\x20names\x0a','initclient','chat','login\x20required','debug','get-messages','output-001.log','/disable\x20-\x20disable\x20notifications\x0a','/start','simple','temp/','bbvReceive','notification','Unauthorized\x20attempt\x20to\x20show\x20configuration','internal','793156OeGaCh','reload','::ffff:127.0.0.1','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','IPv4','child_process','get-portfolio','logged\x20out','<b>Balance\x20Bot\x20Status:</b>\x0a','copyFileSync','expiry','get-logs','Bot\x20','telegram',')\x20|\x20Bot\x20','\x20to\x20','keys','show-config','resetHistory'];_0x4c82=function(){return _0x2c5f2b;};return _0x4c82();}async function unzipFile(_0x3e53c7,_0x5aa817){const _0x54f984=_0x5f20e9;fs[_0x54f984(0x150)](configpath,{'withFileTypes':!![]})[_0x54f984(0x2bf)](_0x11fc3d=>{const _0x2536f8=_0x54f984;if(!_0x11fc3d['isDirectory']())fs['rmSync'](configpath+_0x11fc3d[_0x2536f8(0x17b)]);});const _0x10a620=fs[_0x54f984(0x1bd)](_0x3e53c7+_0x5aa817,'binary'),_0x41977b=await JSZip[_0x54f984(0x2af)](_0x10a620,{'base64':![],'checkCRC32':!![]});for(const _0x13442f of Object[_0x54f984(0x243)](_0x41977b['files'])){const _0x224d19=_0x41977b[_0x54f984(0x34b)][_0x13442f],_0x160889=await _0x224d19[_0x54f984(0x28a)](_0x54f984(0x14a));fs[_0x54f984(0x280)](configpath+_0x224d19[_0x54f984(0x17b)],_0x160889);}fs[_0x54f984(0x150)](temppath,{'withFileTypes':!![]})[_0x54f984(0x2bf)](_0x35ac56=>{const _0x5c21ff=_0x54f984;if(!_0x35ac56[_0x5c21ff(0x2f4)]())fs[_0x5c21ff(0x19a)](temppath+_0x35ac56[_0x5c21ff(0x17b)]);}),logger[_0x54f984(0x228)](_0x54f984(0x35e)),process['send']({'restore':!![]},_0xb4b653=>{});}async function getPublicIp(){const _0x197237=_0x5f20e9;try{const _0x140742=await axios[_0x197237(0x2ad)](_0x197237(0x2a0));publicip=_0x140742[_0x197237(0x1d0)]['ip'];}catch(_0x5eee8b){}}async function triggerAnalytics(){const _0x8987e6=_0x5f20e9;if(!publicip)await getPublicIp();const _0x42f719=getBotsWithMode();let _0x70592d=0x0;_0x42f719['forEach'](_0x3b7bec=>{const _0x11fe3e=_0x1eb9;if(_0x3b7bec[_0x11fe3e(0x27b)]===_0x11fe3e(0x18a))_0x70592d++;});const _0x31ac13=getBotExchanges();mixpanel[_0x8987e6(0x222)](_0x8987e6(0x2cf),{'distinct_id':settings[_0x8987e6(0x26d)],'ip':publicip,'version':serverversion,'numbots':_0x42f719[_0x8987e6(0x1b1)],'numbotsenabled':_0x70592d,'exchanges':_0x31ac13,'environment':environment});}async function getMessages(){const _0x4c1566=_0x5f20e9,_0x2d45dc='https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master',_0x46c4a7=new GraphQLClient(_0x2d45dc),_0x7d4d8e={'authorization':_0x4c1566(0x331)},_0x56d2f5=serverversion[_0x4c1566(0x1f8)]('.'),_0x1f11c5=_0x56d2f5[0x0]+'.'+_0x56d2f5[0x1],_0x2e30ac=Math[_0x4c1566(0x29b)](settings[_0x4c1566(0x31d)],settings['lastmsgemitted']),_0x52fb46={'last':parseInt(_0x2e30ac),'bbm':_0x1f11c5},_0x32f91e=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x57ccd2;try{_0x57ccd2=await _0x46c4a7['request'](_0x32f91e,_0x52fb46,_0x7d4d8e);}catch(_0x446f3b){}if(_0x57ccd2&&_0x57ccd2[_0x4c1566(0x29c)]){let _0x4d8980=settings[_0x4c1566(0x31d)],_0x1762af=settings[_0x4c1566(0x31d)];newMessages=[];for(const _0x1eb5e7 of _0x57ccd2[_0x4c1566(0x29c)]){newMessages[_0x4c1566(0x2b5)](_0x1eb5e7);let _0x1a8931=![];_0x1eb5e7[_0x4c1566(0x204)]&&(updateSetting(_0x4c1566(0x15c),_0x1eb5e7[_0x4c1566(0x204)]),_0x1a8931=isNewerVersion(serverversion,_0x1eb5e7[_0x4c1566(0x204)])||serverversion==_0x1eb5e7[_0x4c1566(0x204)]);if(!_0x1a8931&&_0x1eb5e7['number']>_0x4d8980){if(_0x1eb5e7['bbvReceive']===_0x4c1566(0x25d)||serverversion[_0x4c1566(0x25b)](_0x1eb5e7[_0x4c1566(0x22f)])){let _0x40a6ff=''+_0x1eb5e7[_0x4c1566(0x2d5)]+'\x0a\x0a'+_0x1eb5e7[_0x4c1566(0x193)];const _0x27357f=await sendTelegramMsg(toTelegramMarkdown(_0x40a6ff),_0x4c1566(0x1f5));_0x4d8980=_0x1eb5e7[_0x4c1566(0x2ca)];}}_0x1762af=_0x1eb5e7['number'];}updateAvailable=isNewerVersion(settings['latestversion'],serverversion),updateSetting(_0x4c1566(0x31d),_0x1762af),emitMessages();}}function emitMessages(){const _0x19c7c0=_0x5f20e9,_0x5caa90=settings[_0x19c7c0(0x209)];let _0x4e2d75=[];newMessages[_0x19c7c0(0x2bf)](_0x43bb67=>{const _0x554ce6=_0x19c7c0;_0x43bb67[_0x554ce6(0x2ca)]>_0x5caa90&&_0x4e2d75[_0x554ce6(0x2b5)](_0x43bb67);}),_0x4e2d75[_0x19c7c0(0x1b1)]>0x0&&getAllClients()['forEach'](_0x5bca2c=>{const _0x441410=_0x19c7c0;getSocket(_0x5bca2c['id'])[_0x441410(0x2a8)](_0x441410(0x193),_0x4e2d75);});}function confirmMessage(_0x4f1060){const _0x2516f5=_0x5f20e9;updateSetting(_0x2516f5(0x209),Number(_0x4f1060));}function isNewerVersion(_0x55ba43,_0x1132ff){const _0xf29438=_0x5f20e9,_0x321dbe=_0x1132ff[_0xf29438(0x1f8)]('.'),_0x5eae94=_0x55ba43['split']('.');for(var _0x2e1446=0x0;_0x2e1446<_0x5eae94['length'];_0x2e1446++){const _0x199245=~~_0x5eae94[_0x2e1446],_0x578234=~~_0x321dbe[_0x2e1446];if(_0x199245>_0x578234)return!![];if(_0x199245<_0x578234)return![];}return![];}function toTelegramMarkdown(_0x140fb7){const _0x150ac4=_0x5f20e9,_0x54b0aa=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x14908c=/\*{2}(.+?)\*{2}/gim;return _0x140fb7=_0x140fb7['replace'](_0x54b0aa,_0x150ac4(0x1dc))[_0x150ac4(0x349)](_0x14908c,_0x150ac4(0x33c)),_0x140fb7;}async function validateConfigFile(){const _0x31876f=_0x5f20e9,_0x37d110=dbConfig[_0x31876f(0x2ad)](_0x31876f(0x1eb))[_0x31876f(0x158)](_0x31876f(0x214))[_0x31876f(0x32c)]()||[];if(_0x37d110['length']==0x0){let _0x389314=0x0,_0x33abe6=[];const _0x3fca48=/^bot-([0-9]{3})-config.json$/,_0x888d22=fs[_0x31876f(0x150)](configpath);_0x888d22[_0x31876f(0x2bf)](_0x3642c1=>{const _0x4ac44d=_0x31876f,_0x1123b3=_0x3fca48[_0x4ac44d(0x2fd)](_0x3642c1);if(_0x1123b3){const _0x2a7bc3=_0x1123b3[0x1];let _0x58c3bc=getBotAttributes(_0x2a7bc3);_0x33abe6[_0x4ac44d(0x2b5)]({'botID':_0x2a7bc3,'botname':_0x58c3bc[_0x4ac44d(0x21a)],'status':_0x4ac44d(0x2cc),'live':_0x4ac44d(0x2a9)}),_0x389314++;}}),_0x389314!=0x0&&(dbConfig[_0x31876f(0x2ad)](_0x31876f(0x1eb))[_0x31876f(0x33a)](_0x33abe6)[_0x31876f(0x1c6)](),config=_0x33abe6,restoredConfigFile=_0x389314);}}async function restoreConfigNotify(_0x25114a){const _0x5cb2aa=_0x5f20e9;let _0x320567;if(restoredConfigFile==0x1)_0x320567=_0x5cb2aa(0x1ea);else _0x320567=_0x5cb2aa(0x34e);if(_0x25114a)io['to'](_0x5cb2aa(0x1e0))['emit'](_0x5cb2aa(0x230),_0x320567);else{logger[_0x5cb2aa(0x22d)](_0x5cb2aa(0x304)),logger[_0x5cb2aa(0x22d)](_0x320567),logger['simple'](_0x5cb2aa(0x304)),logger[_0x5cb2aa(0x22d)]('');if(tgBot&&settings[_0x5cb2aa(0x1fb)]&&settings['telegramEvents']!=_0x5cb2aa(0x310))await sendTelegram(settings[_0x5cb2aa(0x1fb)],'Bot\x20Mgr\x20>\x20'+_0x320567);}}function decryptRSA(_0x43c50d,_0x176bea){const _0x1665ea=_0x5f20e9,_0x4ec6f1=forge[_0x1665ea(0x257)]['privateKeyFromPem'](_0x43c50d),_0x40fb80=_0x4ec6f1[_0x1665ea(0x344)](forge[_0x1665ea(0x1e1)][_0x1665ea(0x291)](_0x176bea),_0x1665ea(0x21b),{'md':forge['md'][_0x1665ea(0x25a)]['create'](),'mgf1':{'md':forge['md']['sha256'][_0x1665ea(0x165)]()}});return _0x40fb80;}function validateCredentials(_0xaf862c,_0x346ec9){const _0x2249cd=_0x5f20e9;if(_0xaf862c[_0x2249cd(0x35b)]==settings['bbUsername']&&bcrypt[_0x2249cd(0x1dd)](_0xaf862c[_0x2249cd(0x2fc)],settings['bbPassword'])){if(settings[_0x2249cd(0x352)])return{'allow':![],'reason':_0x2249cd(0x21f),'token':null};else{const _0x3f7877=generateLoginToken(_0x346ec9);return{'allow':!![],'reason':'login\x20token\x20generated','token':_0x3f7877};}}else return{'allow':![],'reason':_0x2249cd(0x26e),'token':null};}function refreshToken(_0x143a77){const _0x4ac445=_0x5f20e9,_0xa0a5ed=generateLoginToken(_0x143a77);return{'allow':!![],'reason':_0x4ac445(0x2ce),'token':_0xa0a5ed};}function validateAccess(_0x1c9f55,_0x3cbd74,_0x2901f6){const _0x3ba566=_0x5f20e9,_0x9a2ed1=_0x2901f6?_0x2901f6:devices[_0x3cbd74]['ip'];let _0x17430b;const _0x383ed4=_0x289a20=>{const _0x3a1f88=_0x1eb9;if(settings['loginRequired']){if(settings['f2aRequired']){if(telegram2FaApproved(_0x3cbd74)){const _0x2ac212=generateLoginToken(_0x3cbd74);return{'allow':!![],'reason':_0x3a1f88(0x34c),'token':_0x2ac212};}else return{'allow':![],'reason':_0x3a1f88(0x227),'token':null};}else return _0x17430b=validToken(_0x289a20,_0x3cbd74),_0x17430b[_0x3a1f88(0x307)](_0x3a1f88(0x14b))?{'allow':!![],'reason':_0x3a1f88(0x36c),'token':_0x289a20}:{'allow':![],'reason':_0x3a1f88(0x227),'token':null};}else return{'allow':!![],'reason':_0x3a1f88(0x366),'token':null};};if(settings['whitelistEnabled']){let _0x5b8094=[...settings['whitelist'],_0x3ba566(0x299),_0x3ba566(0x235),'127.0.0.1'];if(_0x5b8094[_0x3ba566(0x171)](_0x9a2ed1))return _0x383ed4(_0x1c9f55);else{_0x17430b=validToken(_0x1c9f55,_0x3cbd74);if(_0x17430b[_0x3ba566(0x307)](_0x3ba566(0x14b)))return _0x383ed4(_0x1c9f55);else{if(telegramIpApproved(_0x3cbd74)){const _0x3d4761=generateToken(_0x3cbd74);return _0x17430b=_0x383ed4(_0x1c9f55),_0x17430b['allow']?{'allow':!![],'reason':_0x3ba566(0x198),'token':_0x3d4761}:_0x17430b;}else return settings[_0x3ba566(0x290)]?{'allow':![],'reason':_0x3ba566(0x1ca),'token':null}:{'allow':![],'reason':'temporary\x20access\x20not\x20allowed','token':null};}}}else return _0x383ed4(_0x1c9f55);}function timelyDecrypt(_0x4db25f,_0x343cbf,_0x5242b1='@'){const _0x472972=_0x5f20e9;if(_0x4db25f)try{const _0x2bf07c=decryptRSA(secure[_0x472972(0x309)],_0x4db25f),_0x50b606=_0x2bf07c[_0x472972(0x1f8)](_0x5242b1)[0x0],_0x9f7266=_0x2bf07c[_0x472972(0x1f8)](_0x5242b1)[0x1],_0x5c5480=new Date()[_0x472972(0x1de)]();if(_0x343cbf){if(_0x5c5480-_0x9f7266<maxSecretAge*0x3e8)return _0x50b606;else return![];}else return _0x50b606;}catch(_0x19b75d){return![];}else return![];}const validToken=(_0x4ad2e3,_0xdb4f64)=>{const _0x131506=_0x5f20e9,_0x2a8154=devices[_0xdb4f64]['ip'];if(!_0x4ad2e3)return{'error':'No\x20authentication\x20token'};for(let _0x52efaa of blacklist){if(_0x52efaa[_0x131506(0x33b)]==_0x4ad2e3)return{'error':_0x131506(0x2ff)};}let _0x438929;try{_0x438929=jwt[_0x131506(0x1f7)](_0x4ad2e3,secure[_0x131506(0x1c9)]+_0xdb4f64);}catch{return{'error':_0x131506(0x1af)};}if(!_0x438929[_0x131506(0x307)](_0x131506(0x1ec))&&!_0x438929['hasOwnProperty']('username')||!_0x438929['hasOwnProperty'](_0x131506(0x326)))return{'error':_0x131506(0x202)};if(!_0x438929[_0x131506(0x307)](_0x131506(0x35b))&&_0x438929['hasOwnProperty'](_0x131506(0x1ec))){const {clientip:_0x2d258b}=_0x438929;return _0x2a8154==_0x2d258b?{'success':_0x131506(0x19f)}:{'error':_0x131506(0x20c)};}else{if(_0x438929[_0x131506(0x307)](_0x131506(0x35b))&&_0x438929[_0x131506(0x307)](_0x131506(0x1ec))){const {username:_0x5ba336,clientip:_0x528787}=_0x438929;return settings[_0x131506(0x184)]==_0x5ba336&&_0x2a8154==_0x528787?{'success':_0x131506(0x19f)}:{'error':'Invalid\x20username\x20or\x20IP\x20address'};}}},generateLoginToken=_0x30557a=>{const _0x385306=_0x5f20e9;if(_0x30557a){const _0x360c6e=devices[_0x30557a]['ip'];return jwt[_0x385306(0x16a)]({'username':settings[_0x385306(0x184)],'clientip':_0x360c6e},secure[_0x385306(0x1c9)]+_0x30557a,{'expiresIn':tokenRefresh*0x3c,'allowInsecureKeySizes':!![]});}else return![];},generateToken=_0x3310a8=>{const _0x9fba04=_0x5f20e9;if(_0x3310a8){const _0x4645e7=devices[_0x3310a8]['ip'];return jwt[_0x9fba04(0x16a)]({'clientip':_0x4645e7},secure[_0x9fba04(0x1c9)]+_0x3310a8,{'expiresIn':devices[_0x3310a8][_0x9fba04(0x1d1)][_0x9fba04(0x23d)]*0x3c,'allowInsecureKeySizes':!![]});}else return![];},telegramIpApproved=_0x577efa=>{const _0xde3800=_0x5f20e9;let _0x440cc0=![];return devices[_0x577efa][_0xde3800(0x1d1)]&&devices[_0x577efa][_0xde3800(0x1d1)][_0xde3800(0x23d)]!=_0xde3800(0x30a)&&(_0x440cc0=devices[_0x577efa]['telegramIpApproval'][_0xde3800(0x1ec)]==devices[_0x577efa]['ip']&&new Date()[_0xde3800(0x1de)]()-devices[_0x577efa][_0xde3800(0x1d1)][_0xde3800(0x317)]<devices[_0x577efa]['telegramIpApproval'][_0xde3800(0x23d)]*0x3c*0x3e8),_0x440cc0;},telegram2FaApproved=_0x5e1247=>{const _0x5a43f9=_0x5f20e9;let _0x3ca521=![];return devices[_0x5e1247]['telegram2FaApproval']&&devices[_0x5e1247][_0x5a43f9(0x354)][_0x5a43f9(0x23d)]!=_0x5a43f9(0x30a)&&(_0x3ca521=devices[_0x5e1247]['telegram2FaApproval'][_0x5a43f9(0x1ec)]==devices[_0x5e1247]['ip']&&new Date()[_0x5a43f9(0x1de)]()-devices[_0x5e1247][_0x5a43f9(0x354)]['timestamp']<devices[_0x5e1247][_0x5a43f9(0x354)][_0x5a43f9(0x23d)]*0x3c*0x3e8),_0x3ca521;},normalizeIP=_0x397f13=>{const _0x2a97ad=_0x5f20e9;let _0x46e2d2=null,_0x1b2f75=null;if(ipaddr[_0x2a97ad(0x14d)](_0x397f13)){const _0x35396d=ipaddr[_0x2a97ad(0x168)](_0x397f13);_0x35396d[_0x2a97ad(0x213)]()===_0x2a97ad(0x269)?(_0x35396d['isIPv4MappedAddress']()&&(_0x46e2d2=_0x35396d[_0x2a97ad(0x348)]()[_0x2a97ad(0x315)]()),_0x1b2f75=_0x35396d[_0x2a97ad(0x315)]()):(_0x46e2d2=_0x35396d[_0x2a97ad(0x315)](),_0x1b2f75=_0x35396d[_0x2a97ad(0x1fc)]()[_0x2a97ad(0x315)]());}return{'show':_0x46e2d2?_0x46e2d2:_0x1b2f75,'store':_0x1b2f75};};function formatDate(_0x156da2){const _0x276fe4=_0x5f20e9;return _0x156da2[_0x276fe4(0x1b9)]()+'/'+(_0x156da2[_0x276fe4(0x19b)]()+0x1)[_0x276fe4(0x315)]()[_0x276fe4(0x200)](0x2,'0')+'/'+_0x156da2[_0x276fe4(0x2a2)]()['toString']()[_0x276fe4(0x200)](0x2,'0')+'\x20'+_0x156da2['getHours']()[_0x276fe4(0x315)]()[_0x276fe4(0x200)](0x2,'0')+':'+_0x156da2[_0x276fe4(0x15d)]()[_0x276fe4(0x315)]()[_0x276fe4(0x200)](0x2,'0')+':'+_0x156da2['getSeconds']()[_0x276fe4(0x315)]()[_0x276fe4(0x200)](0x2,'0');}function sleep(_0x1e2c44){return new Promise(_0x4b8e67=>setTimeout(_0x4b8e67,_0x1e2c44));}