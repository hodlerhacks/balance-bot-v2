const _0x32b3bf=_0x3a44;(function(_0x5d0b0f,_0x4daece){const _0x2c4304=_0x3a44,_0x1a7cba=_0x5d0b0f();while(!![]){try{const _0x2c2c1f=-parseInt(_0x2c4304(0x170))/0x1+parseInt(_0x2c4304(0x25f))/0x2+parseInt(_0x2c4304(0x2a9))/0x3*(parseInt(_0x2c4304(0x2b4))/0x4)+parseInt(_0x2c4304(0x265))/0x5*(-parseInt(_0x2c4304(0x121))/0x6)+parseInt(_0x2c4304(0x279))/0x7*(parseInt(_0x2c4304(0x1a3))/0x8)+parseInt(_0x2c4304(0x226))/0x9*(parseInt(_0x2c4304(0x19d))/0xa)+parseInt(_0x2c4304(0x2f3))/0xb;if(_0x2c2c1f===_0x4daece)break;else _0x1a7cba['push'](_0x1a7cba['shift']());}catch(_0x43c3e5){_0x1a7cba['push'](_0x1a7cba['shift']());}}}(_0xce32,0xeac18));const _0x2b2841=function(){let _0xd73bee=!![];return function(_0xde3843,_0x866e81){const _0x35efe8=_0xd73bee?function(){const _0xc5314=_0x3a44;if(_0x866e81){const _0x37a67e=_0x866e81[_0xc5314(0x1c5)](_0xde3843,arguments);return _0x866e81=null,_0x37a67e;}}:function(){};return _0xd73bee=![],_0x35efe8;};}(),_0x5e4bc9=_0x2b2841(this,function(){const _0x25526d=_0x3a44;return _0x5e4bc9['toString']()[_0x25526d(0x1ef)](_0x25526d(0x1bc))[_0x25526d(0x1cc)]()['constructor'](_0x5e4bc9)['search'](_0x25526d(0x1bc));});_0x5e4bc9();'use strict';process[_0x32b3bf(0x2d0)][_0x32b3bf(0x29e)]=0x1;const childProcess=require(_0x32b3bf(0x2a5)),fs=require('fs'),fns=require('date-fns'),low=require('lowdb'),FileSync=require('lowdb/adapters/FileSync'),path=require(_0x32b3bf(0x114)),crypto=require(_0x32b3bf(0x266)),forge=require(_0x32b3bf(0x26b)),bcrypt=require(_0x32b3bf(0x15b)),jwt=require(_0x32b3bf(0x225)),ipaddr=require(_0x32b3bf(0x1c3)),argv=require(_0x32b3bf(0x17f))(process[_0x32b3bf(0x11b)]['slice'](0x2))[_0x32b3bf(0x11b)],uuidRandom=require(_0x32b3bf(0x243)),{Telegraf,Markup}=require(_0x32b3bf(0x1da)),Mixpanel=require(_0x32b3bf(0x20f)),axios=require(_0x32b3bf(0x2af)),{GraphQLClient,gql}=require('graphql-request'),util=require(_0x32b3bf(0x277)),fileUpload=require(_0x32b3bf(0x2eb)),{networkInterfaces}=require('os'),JSZip=require(_0x32b3bf(0x15a)),PORT=argv[_0x32b3bf(0x238)]||_0x32b3bf(0x2e5),pattern=/^[0-9]{2,4}$/;!pattern[_0x32b3bf(0x142)](PORT)&&(console[_0x32b3bf(0x146)](_0x32b3bf(0x256)+PORT+_0x32b3bf(0x189)),process[_0x32b3bf(0x287)](0x1));const HOST=argv[_0x32b3bf(0x249)]||null,userID=argv['user']||'',debugging=argv['d']||![],recreate=argv['r']||![],nodeversion=process[_0x32b3bf(0x18b)][_0x32b3bf(0x23a)];let bbpath='bb/',bbpath2='';const botfile='bot.js',configfile=_0x32b3bf(0x2ee),settingsfile='bb-settings.json',securefile='bb-secure.json',environment=require('./'+bbpath2+_0x32b3bf(0x1ed))[_0x32b3bf(0x268)]||_0x32b3bf(0x138),maxBackups=0xa;let validInstallation=!![];const schedulerInterval=0x3c*0x3c*0x3e8;!fs[_0x32b3bf(0x18e)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x32b3bf(0x2ba)),configpath=userID?bbpath+_0x32b3bf(0x19b)+userID+'/':bbpath+_0x32b3bf(0x19b),configbackuppath=configpath+'backup/',logspath=userID?bbpath+_0x32b3bf(0x305)+userID+'/':bbpath+_0x32b3bf(0x305),zippath=userID?bbpath+'zip/'+userID+'/':bbpath+_0x32b3bf(0xfe),loggerfile=fs[_0x32b3bf(0x213)](logspath+_0x32b3bf(0x136),{'flags':'a'}),temppath=userID?bbpath+'temp/'+userID+'/':bbpath+_0x32b3bf(0x1f0);!fs['existsSync'](configpath)&&fs[_0x32b3bf(0x19c)](configpath);!fs[_0x32b3bf(0x18e)](configbackuppath)&&fs[_0x32b3bf(0x19c)](configbackuppath);!fs[_0x32b3bf(0x18e)](logspath)&&fs[_0x32b3bf(0x19c)](logspath);!fs[_0x32b3bf(0x18e)](zippath)&&fs[_0x32b3bf(0x19c)](zippath);!fs[_0x32b3bf(0x18e)](temppath)&&fs[_0x32b3bf(0x19c)](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig['defaults']({'bots':[]})[_0x32b3bf(0x2f8)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x32b3bf(0x28d)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0x32b3bf(0x1cd),'onepagemode':![],'marketcapApi':''}})['write']();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure['defaults']({'secure':{},'blacklist':[]})['write']();const saltRounds=0xa,mixpanel=Mixpanel[_0x32b3bf(0x1a2)](_0x32b3bf(0x241),{'host':_0x32b3bf(0x169)});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings[_0x32b3bf(0x1e6)]&&(settings[_0x32b3bf(0x1e6)]!=''&&settings[_0x32b3bf(0x1e6)]!=_0x32b3bf(0x2c4))&&settings['telegramUsername']&&settings[_0x32b3bf(0x26c)]!='')initTelegram();const parseColor=(_0x3710ef,_0x48797c)=>{const _0x13f52f=_0x32b3bf,_0x179b5f=/#[A-Z]{3}#/g;if(typeof _0x3710ef==_0x13f52f(0x1c6)){!_0x48797c?_0x3710ef=_0x3710ef[_0x13f52f(0x2f9)](_0x179b5f,''):(_0x3710ef=_0x3710ef[_0x13f52f(0x2f9)](/#BLU#/g,_0x13f52f(0x162)),_0x3710ef=_0x3710ef['replace'](/#RED#/g,_0x13f52f(0x1b9)),_0x3710ef=_0x3710ef[_0x13f52f(0x2f9)](/#YEL#/g,'\x1b[33m'),_0x3710ef=_0x3710ef[_0x13f52f(0x2f9)](/#MAG#/g,_0x13f52f(0x140)),_0x3710ef=_0x3710ef[_0x13f52f(0x2f9)](/#CYA#/g,_0x13f52f(0x28f)),_0x3710ef=_0x3710ef['replace'](/#RES#/g,_0x13f52f(0x2e1)));;}return _0x3710ef;},logger={'screen':_0x1bbd60=>{const _0x1814d4=_0x32b3bf;console[_0x1814d4(0x146)](parseColor(_0x1bbd60,!![]));},'simple':_0x10ae32=>{const _0x535595=_0x32b3bf;console[_0x535595(0x146)](parseColor(_0x10ae32,!![])),loggerfile[_0x535595(0x2f8)](util[_0x535595(0x294)](parseColor(_0x10ae32,![]))+'\x0a');},'full':async _0x426fc2=>{const _0x2ae69f=_0x32b3bf,_0x39d596=getTimeStamp()+_0x2ae69f(0x1c0)+_0x426fc2;console[_0x2ae69f(0x146)](parseColor(_0x39d596,!![])),loggerfile[_0x2ae69f(0x2f8)](util['format'](parseColor(_0x39d596,![]))+'\x0a');if(tgBot&&settings[_0x2ae69f(0x165)]&&settings[_0x2ae69f(0x20b)]!=_0x2ae69f(0x12b))await sendTelegram(settings[_0x2ae69f(0x165)],_0x2ae69f(0x224)+parseColor(_0x426fc2,![]));},'debug':async(_0x504d5f,_0x20a2d3='')=>{const _0x4cd0a4=_0x32b3bf,_0x372cb3=getTimeStamp()+_0x4cd0a4(0x159)+_0x504d5f;if(debugging)console[_0x4cd0a4(0x146)](parseColor(_0x372cb3,!![]));loggerfile['write'](util[_0x4cd0a4(0x294)](parseColor(_0x372cb3,![]))+'\x0a');if(_0x20a2d3){if(debugging)console['log'](_0x20a2d3);loggerfile[_0x4cd0a4(0x2f8)](util[_0x4cd0a4(0x294)](_0x20a2d3)+'\x0a');}}};let terminating=![];process['on']('uncaughtException',function(_0x40257c){const _0x441905=_0x32b3bf;_0x40257c[_0x441905(0x1cc)]()[_0x441905(0x135)]('address\x20already\x20in\x20use')?(logger['simple'](_0x441905(0x1ea)+_0x40257c[_0x441905(0x238)]+'#RES#'),process[_0x441905(0x151)]({'terminate':!![]},_0x2359ab=>{})):logger['simple'](_0x40257c);}),process['on'](_0x32b3bf(0x287),()=>{const _0x21b4ea=_0x32b3bf;stopAllBots(),process[_0x21b4ea(0x287)](0x0);}),process['on'](_0x32b3bf(0x1b6),()=>{stopAllBots(),process['exit'](0x0);}),process['on'](_0x32b3bf(0x10f),()=>{const _0x490a3c=_0x32b3bf;stopAllBots(),process[_0x490a3c(0x287)](0x0);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x32b3bf(0x1ed))['version'],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let tmpStorage={},devices=[],lastIpApproval,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require('express'),app=express(),http=require(_0x32b3bf(0x26f))[_0x32b3bf(0x216)](app);app['use'](fileUpload({'useTempFiles':!![]})),app[_0x32b3bf(0x2b7)](_0x32b3bf(0x24b),async(_0x3f89fc,_0xa4a497)=>{const _0x48c174=_0x32b3bf,_0x26e42f=_0x3f89fc[_0x48c174(0x19e)][_0x48c174(0x156)],_0x7f3ac5=getClientsWithBotID(_0x48c174(0x242)),_0x4d784b=_0x3f89fc[_0x48c174(0x1fe)]['uuid'],_0x502aca=timelyDecrypt(_0x4d784b,![]),_0x362632=_0x7f3ac5[_0x48c174(0x21c)](_0x1aaed1=>_0x1aaed1[_0x48c174(0x172)]==_0x502aca);if(_0x362632){const _0x19d3c5=normalizeIP(_0x3f89fc[_0x48c174(0x17b)][_0x48c174(0x1ba)])[_0x48c174(0x14d)],_0x23682a=_0x3f89fc[_0x48c174(0x1fe)][_0x48c174(0x106)];if(validateAccess(_0x23682a,_0x502aca,_0x19d3c5)['allow'])_0x26e42f==_0x48c174(0x21d)&&await backupConfigFiles(),await zipFiles(_0x26e42f),_0xa4a497[_0x48c174(0x112)](zippath+(_0x26e42f+_0x48c174(0x2fc)),_0x1d332f=>{const _0x5a8078=_0x48c174;_0x1d332f&&(logger[_0x5a8078(0x303)]('Failed\x20to\x20download\x20'+_0x26e42f),logger['simple'](_0x1d332f));});else logger[_0x48c174(0x303)](_0x48c174(0xfb)+_0x26e42f+_0x48c174(0x2aa));}else logger['full'](_0x48c174(0xfb)+_0x26e42f+_0x48c174(0x197));}),app[_0x32b3bf(0x1c4)](_0x32b3bf(0x149),async(_0x4b57e6,_0x1f980a)=>{const _0x5d3516=_0x32b3bf,_0x309b92=getClientsWithBotID('botmanager'),_0x3792db=_0x4b57e6[_0x5d3516(0x1fe)][_0x5d3516(0x172)],_0x415d0e=timelyDecrypt(_0x3792db,![]),_0x71bef9=_0x309b92[_0x5d3516(0x21c)](_0x26ff8a=>_0x26ff8a['uuid']==_0x415d0e);logger[_0x5d3516(0x247)]('Backup\x20file\x20uploaded');if(_0x71bef9){const _0x3d416a=normalizeIP(_0x4b57e6[_0x5d3516(0x17b)][_0x5d3516(0x1ba)])[_0x5d3516(0x14d)],_0x5442f5=_0x4b57e6[_0x5d3516(0x1fe)][_0x5d3516(0x106)];if(validateAccess(_0x5442f5,_0x415d0e,_0x3d416a)[_0x5d3516(0x14a)]){if(_0x4b57e6[_0x5d3516(0x300)]){const _0x2ee09c=_0x4b57e6['files']['backupfile'];await _0x2ee09c['mv'](temppath+_0x2ee09c[_0x5d3516(0x254)]),_0x1f980a[_0x5d3516(0x151)]({'status':!![],'message':'File\x20uploaded'});const _0x5d674f=getBotsWithMode();_0x5d674f[_0x5d3516(0x2bf)]>0x0?confirmRestore(temppath,_0x2ee09c[_0x5d3516(0x254)]):unzipFile(temppath,_0x2ee09c['name']);}}else logger[_0x5d3516(0x303)](_0x5d3516(0x2ad));}else logger[_0x5d3516(0x303)]('Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)');}),app[_0x32b3bf(0x250)](express[_0x32b3bf(0x133)](path[_0x32b3bf(0x2b5)](__dirname,bbpath2,_0x32b3bf(0x10b)))),app[_0x32b3bf(0x250)](express['static'](path[_0x32b3bf(0x2b5)](__dirname,bbpath2,_0x32b3bf(0x288)))),app[_0x32b3bf(0x2b7)]('/',function(_0x249f24,_0x53e655){const _0xdfe069=_0x32b3bf;_0x53e655[_0xdfe069(0x1f1)](path['join'](__dirname,bbpath2,'build2',_0xdfe069(0x15d)));}),app['get']('/:bot',function(_0x3f98fd,_0x312b6f){const _0x40e2bd=_0x32b3bf;_0x312b6f[_0x40e2bd(0x1f1)](path[_0x40e2bd(0x2b5)](__dirname,bbpath2,_0x40e2bd(0x288),_0x40e2bd(0x15d)));}),app[_0x32b3bf(0x2b7)](_0x32b3bf(0x2e6),(_0x5a703e,_0x422cbb)=>{const _0x53bd78=_0x32b3bf;_0x422cbb[_0x53bd78(0x1f1)](path[_0x53bd78(0x2b5)](__dirname,bbpath2,_0x53bd78(0x288),_0x53bd78(0x15d)));}),app[_0x32b3bf(0x2b7)](_0x32b3bf(0x2dd),(_0x40b477,_0x363aaf)=>{const _0x1bd780=_0x32b3bf;_0x363aaf[_0x1bd780(0x1f1)](path['join'](__dirname,bbpath2,_0x1bd780(0x288),_0x1bd780(0x15d)));}),app['get'](_0x32b3bf(0x292),(_0x527b80,_0x251f7c)=>{const _0xc1a145=_0x32b3bf;_0x251f7c['sendFile'](path['join'](__dirname,bbpath2,_0xc1a145(0x288),'index.html'));}),app[_0x32b3bf(0x2b7)](_0x32b3bf(0x10e),(_0x3c78f0,_0x72b032)=>{const _0x3df2f4=_0x32b3bf;_0x72b032[_0x3df2f4(0x1f1)](path[_0x3df2f4(0x2b5)](__dirname,bbpath2,_0x3df2f4(0x288),_0x3df2f4(0x15d)));}),app[_0x32b3bf(0x2b7)](_0x32b3bf(0x1e1),(_0x545b5e,_0x4f12ae)=>{const _0x2946d2=_0x32b3bf;_0x4f12ae['sendFile'](path[_0x2946d2(0x2b5)](__dirname,bbpath2,_0x2946d2(0x288),_0x2946d2(0x15d)));}),app[_0x32b3bf(0x2b7)](_0x32b3bf(0x2f1),(_0x8702e6,_0x176df8)=>{const _0x4d1b9e=_0x32b3bf;_0x176df8[_0x4d1b9e(0x1f1)](path[_0x4d1b9e(0x2b5)](__dirname,bbpath2,_0x4d1b9e(0x288),_0x4d1b9e(0x15d)));});if(HOST)http[_0x32b3bf(0x1ee)](PORT,HOST);else http[_0x32b3bf(0x1ee)](PORT);const io=require(_0x32b3bf(0x2f0))(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}function getServerIP(){const _0x4b2d32=_0x32b3bf;let _0x22609d=_0x4b2d32(0x12e);const _0x3856a2=networkInterfaces(),_0x2e88ce={};for(const _0x15c0c5 of Object['keys'](_0x3856a2)){for(const _0x7662e7 of _0x3856a2[_0x15c0c5]){if((_0x7662e7['family']=='IPv4'||_0x7662e7['family']==0x4)&&!_0x7662e7[_0x4b2d32(0x282)]){const _0x39bb6b=ipaddr[_0x4b2d32(0x171)](_0x7662e7[_0x4b2d32(0x115)])['range']();_0x39bb6b!=_0x4b2d32(0x194)&&(!_0x2e88ce[_0x15c0c5]&&(_0x2e88ce[_0x15c0c5]=[]),_0x2e88ce[_0x15c0c5][_0x4b2d32(0xfd)](_0x7662e7[_0x4b2d32(0x115)]),_0x22609d=_0x7662e7[_0x4b2d32(0x115)]);}}}return{'serverip':_0x22609d,'netinterfaces':_0x2e88ce};}async function startServer(){const _0x51a4f9=_0x32b3bf,{serverip:_0x2102cd,netinterfaces:_0xa55c8c}=getServerIP();logger[_0x51a4f9(0x1a7)](''),logger[_0x51a4f9(0x1a7)](_0x51a4f9(0x293)),await logger[_0x51a4f9(0x303)]('Starting\x20#RED#Balance\x20Bot\x20v'+serverversion+_0x51a4f9(0x102)+(environment==_0x51a4f9(0x1a1)?_0x51a4f9(0x10c):'')+'\x0a'+('=>\x20Go\x20to\x20#CYA#http://127.0.0.1:'+PORT+_0x51a4f9(0x2b1))+('=>\x20Go\x20to\x20#CYA#http://'+_0x2102cd+':'+PORT+'#RES#\x20if\x20running\x20on\x20server')),logger['simple'](_0x51a4f9(0x293));if(config['length']!=0x0)for(const _0x221fda of config){const _0x16beb5=_0x221fda[_0x51a4f9(0x1bd)]==_0x51a4f9(0x28b)?'a':'m';if(_0x221fda[_0x51a4f9(0x111)]=='enabled'||_0x221fda[_0x51a4f9(0x111)]==_0x51a4f9(0x2e4))await logger[_0x51a4f9(0x303)](_0x51a4f9(0x205)+_0x16beb5+_0x51a4f9(0x1dc)+_0x221fda[_0x51a4f9(0x11a)]+_0x51a4f9(0x11c)+_0x221fda[_0x51a4f9(0x255)]),startBot([_0x221fda['botID'],userID],{'cwd':bbpath},function(_0x161185){const _0x540185=_0x51a4f9;if(_0x161185)logger[_0x540185(0x303)](_0x161185);});else(_0x221fda[_0x51a4f9(0x111)]==_0x51a4f9(0xfa)||_0x221fda['status']==_0x51a4f9(0x201))&&await logger['full']('Idling\x20('+_0x16beb5+_0x51a4f9(0x22e)+_0x221fda['botID']+_0x51a4f9(0x11c)+_0x221fda[_0x51a4f9(0x255)]);}else!newBot&&logger[_0x51a4f9(0x1a7)](_0x51a4f9(0x2e3));if(newBot)addBot();logger[_0x51a4f9(0x1a7)](_0x51a4f9(0x293)),logger[_0x51a4f9(0x1a7)](''),await logger[_0x51a4f9(0x247)]('Node.js\x20v'+nodeversion),await logger['debug'](_0x51a4f9(0x2ca),_0xa55c8c);}function startSocket(){const _0x454bd7=_0x32b3bf;io['on'](_0x454bd7(0x1af),_0x2e4fff=>{const _0x54bce2=_0x454bd7;let _0x2eaddc,_0x205ff0,_0x28bebd,_0xe7684e,_0x1fbe8a;const _0x4a0524=_0x2e4fff['handshake']['headers'][_0x54bce2(0x13c)];_0x205ff0=_0x4a0524[_0x54bce2(0x192)](/bot[0-9]{3}/);if(_0x205ff0)_0x28bebd=_0x205ff0[0x0][_0x54bce2(0x192)](/[0-9]{3}/);if(_0x28bebd)_0x2eaddc=_0x28bebd[0x0];else _0x2eaddc=_0x54bce2(0x242);const _0x48ac51=_0x2e4fff[_0x54bce2(0x262)][_0x54bce2(0x1a8)]['encryptedUuid'];if(!_0x48ac51)_0x2e4fff['emit']('status',{'publicKey':secure[_0x54bce2(0x1ff)]});else{_0xe7684e=timelyDecrypt(_0x48ac51,![]);if(!_0xe7684e)_0x2e4fff[_0x54bce2(0x1eb)](_0x54bce2(0x111),{'publicKey':secure[_0x54bce2(0x1ff)]});else{_0x1fbe8a=normalizeIP(_0x2e4fff['conn'][_0x54bce2(0x1ba)])[_0x54bce2(0x14d)];if(!devices[_0xe7684e])devices[_0xe7684e]={'uuid':_0xe7684e,'access':{'token':null}};devices[_0xe7684e]['ip']=_0x1fbe8a;const _0x886f15=addClient(_0x2e4fff['id'],_0xe7684e,_0x2eaddc);setAccess(_0x886f15),emitMessages(),_0x2e4fff['on'](_0x54bce2(0x1c2),_0x1957c2=>{const _0x2ee125=_0x54bce2,_0x53d79c=timelyDecrypt(_0x1957c2[_0x2ee125(0x29a)],!![],_0x2ee125(0x174));if(_0x53d79c){_0x1957c2={'username':_0x1957c2[_0x2ee125(0x1bb)],'password':_0x53d79c},devices[_0xe7684e][_0x2ee125(0x175)]=validateCredentials(_0x1957c2,_0xe7684e);if(devices[_0xe7684e][_0x2ee125(0x175)][_0x2ee125(0x14a)]==![]&&devices[_0xe7684e][_0x2ee125(0x175)][_0x2ee125(0x24e)]=='2FA\x20login\x20required')_0x2e4fff[_0x2ee125(0x1eb)](_0x2ee125(0x111),{'access':devices[_0xe7684e][_0x2ee125(0x175)]}),loginAccess2FA(_0xe7684e,_0x1fbe8a);else{if(devices[_0xe7684e]['access'][_0x2ee125(0x14a)]==![]&&devices[_0xe7684e]['access'][_0x2ee125(0x24e)]==_0x2ee125(0x2a0))_0x2e4fff[_0x2ee125(0x1eb)](_0x2ee125(0x111),{'access':devices[_0xe7684e][_0x2ee125(0x175)]});else devices[_0xe7684e][_0x2ee125(0x175)][_0x2ee125(0x14a)]&&devices[_0xe7684e]['access'][_0x2ee125(0x24e)]==_0x2ee125(0x260)&&(getClientsWithUuid(_0xe7684e)[_0x2ee125(0x1aa)](_0x18d1c4=>{setAccess(_0x18d1c4);}),logger[_0x2ee125(0x247)](_0x2ee125(0x2c0)+_0xe7684e[_0x2ee125(0x2c6)](-0x8)),setTokenRefresh(_0xe7684e),setSessionTimeout(_0x2ee125(0x1c2),_0xe7684e));}}else logger['full']('Unauthorized\x20login\x20attempt\x20(timeout)');}),_0x2e4fff['on']('reset-password',()=>{resetPassword();}),_0x2e4fff['on'](_0x54bce2(0x211),_0x2a0091=>{removeClient(_0x2e4fff['id']);}),_0x2eaddc==_0x54bce2(0x242)&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x2c011c){const _0x17cb1f=_0x32b3bf;if(_0x2c011c!=_0x17cb1f(0x242)&&config[_0x17cb1f(0x1ce)]!=''){if(pid[_0x2c011c])pid[_0x2c011c][_0x17cb1f(0x151)]({'function':_0x17cb1f(0x16b),'args':null});}_0x2c011c!='botmanager'&&broadcastToBots(_0x17cb1f(0x28e),JSON['stringify'](config));}function reloadBotManager(){const _0xbf5d8a=_0x32b3bf;getClientsWithBotID('botmanager')[_0xbf5d8a(0x1aa)](_0x3e1887=>{const _0x2b12ae=_0xbf5d8a;getSocket(_0x3e1887['id'])['emit'](_0x2b12ae(0x111),{'access':{'allow':![],'reason':_0x2b12ae(0x1e4),'token':null}});});}function getSocket(_0x149eb2){const _0xe5aca3=_0x32b3bf,_0xbb6c60=io[_0xe5aca3(0x2f4)][_0xe5aca3(0x2b7)]('/');return _0xbb6c60[_0xe5aca3(0x188)][_0xe5aca3(0x2b7)](_0x149eb2);}function setAccess(_0x323736){const _0x43eb92=_0x32b3bf,_0x29ffa1=getSocket(_0x323736['id']),_0x40312b=_0x323736[_0x43eb92(0x172)],_0x58ad9e=_0x323736[_0x43eb92(0x2d6)];devices[_0x40312b]['access']=validateAccess(devices[_0x40312b]['access'][_0x43eb92(0x230)],_0x40312b),logger[_0x43eb92(0x247)](_0x43eb92(0x1e2)+devices[_0x40312b][_0x43eb92(0x175)][_0x43eb92(0x24e)]+_0x43eb92(0x198)+_0x323736['id']['slice'](-0x8)+_0x43eb92(0x1f7)+_0x40312b[_0x43eb92(0x2c6)](-0x8)),_0x29ffa1[_0x43eb92(0x2b5)](_0x40312b);if(devices[_0x40312b][_0x43eb92(0x175)][_0x43eb92(0x14a)]){_0x29ffa1[_0x43eb92(0x2b5)](_0x58ad9e);if(_0x58ad9e=='botmanager')initializeSocketBotManager(_0x29ffa1);else initializeSocketBot(_0x29ffa1);initClient(_0x58ad9e);}devices[_0x40312b][_0x43eb92(0x175)]['token']&&devices[_0x40312b]['access'][_0x43eb92(0x24e)]==_0x43eb92(0x246)&&setSessionTimeout(_0x43eb92(0x202),_0x40312b),devices[_0x40312b][_0x43eb92(0x175)]['token']&&devices[_0x40312b][_0x43eb92(0x175)][_0x43eb92(0x24e)]=='2FA\x20login\x20token\x20generated'&&setSessionTimeout(_0x43eb92(0x1c2),_0x40312b),_0x29ffa1[_0x43eb92(0x1eb)](_0x43eb92(0x111),{'status':_0x323736[_0x43eb92(0x235)],'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x40312b]['access'],'externalip':devices[_0x40312b]['ip'],'publicKey':secure[_0x43eb92(0x1ff)],'userid':settings['userid'],'validInstallation':validInstallation}),devices[_0x40312b][_0x43eb92(0x175)][_0x43eb92(0x14a)]==![]&&devices[_0x40312b][_0x43eb92(0x175)][_0x43eb92(0x24e)]==_0x43eb92(0x2d1)&&temporaryAccess2FA(_0x40312b,devices[_0x40312b]['ip']);}function setSessionTimeout(_0x3b0fb6,_0x40637e){const _0x2ddf8c=_0x32b3bf;let _0x2ede2e;if(_0x3b0fb6==_0x2ddf8c(0x1c2))_0x2ede2e=loginExpiry*0x3c*0x3e8;else _0x2ede2e=devices[_0x40637e]['telegramIpApproval'][_0x2ddf8c(0x2fa)]*0x3c*0x3e8-(new Date()[_0x2ddf8c(0x297)]()-devices[_0x40637e][_0x2ddf8c(0x15e)][_0x2ddf8c(0x204)]);if(devices[_0x40637e]['pidExpireLogin'])clearTimeout(devices[_0x40637e][_0x2ddf8c(0x1f2)]);devices[_0x40637e][_0x2ddf8c(0x1f2)]=setTimeout(()=>{const _0x5c8ec4=_0x2ddf8c;if(devices[_0x40637e]['pidRefreshToken'])clearTimeout(devices[_0x40637e][_0x5c8ec4(0x2f6)]);removeSocketListeners(_0x40637e),addBlacklist(_0x40637e),devices[_0x40637e]['telegramIpApproval']=null,devices[_0x40637e]['telegram2FaApproval']=null,devices[_0x40637e]['access']['token']=null,logger[_0x5c8ec4(0x247)](_0x5c8ec4(0x21a)+_0x40637e[_0x5c8ec4(0x2c6)](-0x8)),devices[_0x40637e][_0x5c8ec4(0x175)]=validateAccess(devices[_0x40637e][_0x5c8ec4(0x175)][_0x5c8ec4(0x230)],_0x40637e),!(devices[_0x40637e][_0x5c8ec4(0x175)][_0x5c8ec4(0x14a)]&&devices[_0x40637e]['access'][_0x5c8ec4(0x24e)]==_0x5c8ec4(0x1b7))&&(_0x3b0fb6==_0x5c8ec4(0x1c2)?io['to'](_0x40637e)[_0x5c8ec4(0x1eb)](_0x5c8ec4(0x111),{'access':{'allow':![],'reason':_0x5c8ec4(0xf4),'token':null}}):io['to'](_0x40637e)[_0x5c8ec4(0x1eb)](_0x5c8ec4(0x111),{'access':{'allow':![],'reason':_0x5c8ec4(0x128),'token':null}})),devices[_0x40637e][_0x5c8ec4(0x175)][_0x5c8ec4(0x230)]=null;},_0x2ede2e);}function setTokenRefresh(_0x2bd4cc){const _0x4ea038=_0x32b3bf;if(devices[_0x2bd4cc][_0x4ea038(0x2f6)])clearTimeout(devices[_0x2bd4cc][_0x4ea038(0x2f6)]);devices[_0x2bd4cc]['pidRefreshToken']=setTimeout(()=>{const _0x5bd83c=_0x4ea038;getClientsWithUuid(_0x2bd4cc)[_0x5bd83c(0x2bf)]!=0x0?(devices[_0x2bd4cc][_0x5bd83c(0x175)]=refreshToken(_0x2bd4cc),io['to'](_0x2bd4cc)['emit'](_0x5bd83c(0x111),{'status':_0x5bd83c(0x251),'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x2bd4cc][_0x5bd83c(0x175)],'externalip':devices[_0x2bd4cc]['ip'],'publicKey':secure[_0x5bd83c(0x1ff)],'validInstallation':validInstallation}),setTokenRefresh(_0x2bd4cc)):clearTimeout(devices[_0x2bd4cc]['pidRefreshToken']);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x98aa2f){const _0x2391c4=_0x32b3bf,_0x481f01=getClient(_0x98aa2f['id'])['uuid'];_0x98aa2f[_0x2391c4(0x1eb)](_0x2391c4(0x28e),config),_0x98aa2f[_0x2391c4(0x1eb)](_0x2391c4(0x221),cleanSettings()),_0x98aa2f['on'](_0x2391c4(0x1d4),_0x25c8de=>{const _0x22ec5e=_0x2391c4;if(validateAccess(_0x25c8de,_0x481f01)[_0x22ec5e(0x14a)])addBot();else logger[_0x22ec5e(0x303)](_0x22ec5e(0x1f6));}),_0x98aa2f['on'](_0x2391c4(0x18c),(_0x51d99e,_0x106d7a)=>{const _0x44cf79=_0x2391c4;if(validateAccess(_0x106d7a,_0x481f01)[_0x44cf79(0x14a)])toggleBot(_0x51d99e[_0x44cf79(0x11a)],_0x51d99e[_0x44cf79(0x111)],_0x51d99e[_0x44cf79(0x263)]);else logger[_0x44cf79(0x303)](_0x44cf79(0x25c));}),_0x98aa2f['on'](_0x2391c4(0x237),(_0x4f65fd,_0x48fd4f)=>{const _0x59a3f3=_0x2391c4;if(validateAccess(_0x48fd4f,_0x481f01)[_0x59a3f3(0x14a)])toggleBotMode(_0x4f65fd);else logger[_0x59a3f3(0x303)](_0x59a3f3(0x25c));}),_0x98aa2f['on'](_0x2391c4(0x200),(_0x3cf475,_0x128d15)=>{const _0x1866c7=_0x2391c4;if(validateAccess(_0x128d15,_0x481f01)[_0x1866c7(0x14a)])deleteBot(_0x3cf475);else logger[_0x1866c7(0x303)](_0x1866c7(0x23c));}),_0x98aa2f['on'](_0x2391c4(0x13d),(_0x39c061,_0x4273aa)=>{const _0x380c8e=_0x2391c4;if(validateAccess(_0x4273aa,_0x481f01)[_0x380c8e(0x14a)])storeSettings(_0x39c061,!![]);else logger[_0x380c8e(0x303)]('Unauthorized\x20attempt\x20to\x20update\x20settings');}),_0x98aa2f['on'](_0x2391c4(0x284),_0x4f58d1=>{const _0x29f9e5=_0x2391c4;if(validateAccess(_0x4f58d1,_0x481f01)['allow'])updateBB(_0x29f9e5(0x20c));else logger['full'](_0x29f9e5(0x25d));}),_0x98aa2f['on'](_0x2391c4(0x196),_0x777a7b=>{const _0xcbefe3=_0x2391c4;if(validateAccess(_0x777a7b,_0x481f01)[_0xcbefe3(0x14a)])updateBB(_0xcbefe3(0x234));else logger[_0xcbefe3(0x303)](_0xcbefe3(0x2b0));}),_0x98aa2f['on']('get-backup-files',_0x2fca11=>{const _0x5273ea=_0x2391c4;if(validateAccess(_0x2fca11,_0x481f01)[_0x5273ea(0x14a)]){const _0x4964e0=getClient(_0x98aa2f['id']);if(_0x4964e0)getBackupFiles(_0x4964e0[_0x5273ea(0x172)]);else logger[_0x5273ea(0x303)](_0x5273ea(0x245));}else logger['full']('Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files');}),_0x98aa2f['on']('restore-backup-file',(_0x8ba0f2,_0x32934c)=>{const _0x49a87c=_0x2391c4;if(validateAccess(_0x32934c,_0x481f01)[_0x49a87c(0x14a)])restoreBackupFile(_0x8ba0f2);else logger['full'](_0x49a87c(0x2cf));}),_0x98aa2f['on']('get-messages',_0x4f9188=>{const _0x3db137=_0x2391c4;if(validateAccess(_0x4f9188,_0x481f01)[_0x3db137(0x14a)])getMessages();else logger[_0x3db137(0x303)](_0x3db137(0x267));}),_0x98aa2f['on'](_0x2391c4(0x110),(_0x134560,_0x4f8851)=>{const _0x31aec7=_0x2391c4;if(validateAccess(_0x4f8851,_0x481f01)[_0x31aec7(0x14a)])confirmMessage(_0x134560);else logger['full'](_0x31aec7(0x17c));}),_0x98aa2f['on'](_0x2391c4(0x18d),_0x3d6014=>{const _0x3b6241=_0x2391c4;if(validateAccess(_0x3d6014,_0x481f01)[_0x3b6241(0x14a)]){if(devices[_0x481f01][_0x3b6241(0x2f6)])clearTimeout(devices[_0x481f01]['pidRefreshToken']);if(devices[_0x481f01][_0x3b6241(0x1f2)])clearTimeout(devices[_0x481f01][_0x3b6241(0x1f2)]);removeSocketListeners(getClient(_0x98aa2f['id'])[_0x3b6241(0x172)]),addBlacklist(_0x481f01),devices[_0x481f01][_0x3b6241(0x15e)]=null,devices[_0x481f01][_0x3b6241(0x1f9)]=null,devices[_0x481f01][_0x3b6241(0x175)][_0x3b6241(0x230)]=null,logger[_0x3b6241(0x247)](_0x3b6241(0x272)+_0x481f01[_0x3b6241(0x2c6)](-0x8)),io['to'](getClient(_0x98aa2f['id'])['uuid'])[_0x3b6241(0x1eb)](_0x3b6241(0x111),{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logger[_0x3b6241(0x303)](_0x3b6241(0x2d2));});}function initializeSocketBot(_0x5bd70c){const _0x5de9aa=_0x32b3bf,_0x1cb682=getClient(_0x5bd70c['id'])[_0x5de9aa(0x2d6)],_0x4a2568=getClient(_0x5bd70c['id'])[_0x5de9aa(0x172)];_0x5bd70c['on'](_0x5de9aa(0x126),(_0x13bae8,_0x533201)=>{const _0xa4d92e=_0x5de9aa;if(validateAccess(_0x533201,_0x4a2568)['allow']){if(pid[_0x1cb682])pid[_0x1cb682][_0xa4d92e(0x151)]({'function':_0xa4d92e(0x16e),'args':_0x13bae8});}else logger['full']('Unauthorized\x20attempt\x20to\x20get\x20events');}),_0x5bd70c['on'](_0x5de9aa(0x296),(_0x19f0a,_0x3e1d11)=>{const _0x33029b=_0x5de9aa;if(validateAccess(_0x3e1d11,_0x4a2568)['allow']){if(pid[_0x1cb682])pid[_0x1cb682][_0x33029b(0x151)]({'function':'deleteHistoryAlerts','args':_0x19f0a});}else logger[_0x33029b(0x303)]('Unauthorized\x20attempt\x20to\x20delete\x20alerts');}),_0x5bd70c['on'](_0x5de9aa(0x1de),(_0x5986cd,_0x250e71)=>{const _0x2607af=_0x5de9aa;if(validateAccess(_0x250e71,_0x4a2568)[_0x2607af(0x14a)]){if(pid[_0x1cb682])pid[_0x1cb682][_0x2607af(0x151)]({'function':'getPortfolio','args':_0x5986cd});}else logger['full']('Unauthorized\x20attempt\x20to\x20get\x20portfolio');}),_0x5bd70c['on'](_0x5de9aa(0x1b8),(_0x58a556,_0x216598)=>{const _0x5c6403=_0x5de9aa;if(validateAccess(_0x216598,_0x4a2568)[_0x5c6403(0x14a)]){if(pid[_0x1cb682])pid[_0x1cb682]['send']({'function':_0x5c6403(0x2b9),'args':_0x58a556});}else logger[_0x5c6403(0x303)](_0x5c6403(0x187));}),_0x5bd70c['on'](_0x5de9aa(0x29b),(_0x4b01b3,_0x31cd2e)=>{const _0x3ec3ca=_0x5de9aa;if(validateAccess(_0x31cd2e,_0x4a2568)[_0x3ec3ca(0x14a)]){if(pid[_0x1cb682])pid[_0x1cb682][_0x3ec3ca(0x151)]({'function':_0x3ec3ca(0x2da),'args':_0x4b01b3});}else logger[_0x3ec3ca(0x303)](_0x3ec3ca(0x301));}),_0x5bd70c['on'](_0x5de9aa(0x271),(_0x54b05d,_0x134bd7)=>{const _0x1c068a=_0x5de9aa;if(validateAccess(_0x134bd7,_0x4a2568)['allow']){if(pid[_0x1cb682])pid[_0x1cb682][_0x1c068a(0x151)]({'function':_0x1c068a(0xf8),'args':_0x54b05d});}else logger[_0x1c068a(0x303)]('Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration');}),_0x5bd70c['on'](_0x5de9aa(0x29c),_0x10a54e=>{const _0x531ae6=_0x5de9aa;if(validateAccess(_0x10a54e,_0x4a2568)[_0x531ae6(0x14a)]){if(pid[_0x1cb682])pid[_0x1cb682]['send']({'function':_0x531ae6(0x1d7),'args':null});}else logger['full'](_0x531ae6(0x27f));}),_0x5bd70c['on'](_0x5de9aa(0x212),_0x4b9712=>{const _0x3229ee=_0x5de9aa;if(validateAccess(_0x4b9712,_0x4a2568)[_0x3229ee(0x14a)]){if(pid[_0x1cb682])pid[_0x1cb682][_0x3229ee(0x151)]({'function':'getStartingBalances','args':null});}else logger[_0x3229ee(0x303)]('Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances');}),_0x5bd70c['on']('place-order',(_0x532c41,_0xc04025)=>{const _0x4d794f=_0x5de9aa;if(validateAccess(_0xc04025,_0x4a2568)['allow']){if(pid[_0x1cb682])pid[_0x1cb682][_0x4d794f(0x151)]({'function':_0x4d794f(0x232),'args':_0x532c41});}else logger['full'](_0x4d794f(0x150));}),_0x5bd70c['on'](_0x5de9aa(0x1c1),_0x3d2ba3=>{const _0x2d0172=_0x5de9aa;if(validateAccess(_0x3d2ba3,_0x4a2568)[_0x2d0172(0x14a)]){if(pid[_0x1cb682])pid[_0x1cb682][_0x2d0172(0x151)]({'function':_0x2d0172(0x2c8),'args':null});}else logger[_0x2d0172(0x303)](_0x2d0172(0x2ea));}),_0x5bd70c['on'](_0x5de9aa(0x2cc),_0x47f53d=>{const _0x5e4c0f=_0x5de9aa;if(validateAccess(_0x47f53d,_0x4a2568)[_0x5e4c0f(0x14a)]){if(pid[_0x1cb682])pid[_0x1cb682][_0x5e4c0f(0x151)]({'function':_0x5e4c0f(0x27e),'args':null});}else logger[_0x5e4c0f(0x303)](_0x5e4c0f(0x2bc));}),_0x5bd70c['on']('update-bb',_0x22df83=>{const _0x7c8d06=_0x5de9aa;if(validateAccess(_0x22df83,_0x4a2568)['allow'])updateBB('update');else logger['full'](_0x7c8d06(0x25d));}),_0x5bd70c['on']('get-messages',_0x39d11a=>{const _0x1724e9=_0x5de9aa;if(validateAccess(_0x39d11a,_0x4a2568)[_0x1724e9(0x14a)])getMessages();else logger[_0x1724e9(0x303)]('Unauthorized\x20attempt\x20to\x20get\x20messages');}),_0x5bd70c['on'](_0x5de9aa(0x110),(_0x4719a6,_0x5ee678)=>{if(validateAccess(_0x5ee678,_0x4a2568)['allow'])confirmMessage(_0x4719a6);else logger['full']('Unauthorized\x20attempt\x20to\x20confirm\x20message');}),_0x5bd70c['on']('logout',_0x5be585=>{const _0x14ffef=_0x5de9aa;if(validateAccess(_0x5be585,_0x4a2568)[_0x14ffef(0x14a)]){if(devices[_0x4a2568]['pidRefreshToken'])clearTimeout(devices[_0x4a2568][_0x14ffef(0x2f6)]);if(devices[_0x4a2568][_0x14ffef(0x1f2)])clearTimeout(devices[_0x4a2568][_0x14ffef(0x1f2)]);removeSocketListeners(getClient(_0x5bd70c['id'])[_0x14ffef(0x172)]),addBlacklist(_0x4a2568),devices[_0x4a2568][_0x14ffef(0x15e)]=null,devices[_0x4a2568][_0x14ffef(0x1f9)]=null,devices[_0x4a2568][_0x14ffef(0x175)][_0x14ffef(0x230)]=null,logger['debug'](_0x14ffef(0x272)+_0x4a2568[_0x14ffef(0x2c6)](-0x8)),io['to'](getClient(_0x5bd70c['id'])[_0x14ffef(0x172)])[_0x14ffef(0x1eb)]('status',{'access':{'allow':![],'reason':_0x14ffef(0x1f5),'token':null}});}else logger[_0x14ffef(0x303)](_0x14ffef(0x2d2));});}function removeSocketListeners(_0x1e8f28){const _0x1acceb=_0x32b3bf;getClientsWithUuid(_0x1e8f28)[_0x1acceb(0x1aa)](_0x47233d=>{const _0x6c46a5=_0x1acceb;getSocket(_0x47233d['id'])[_0x6c46a5(0x179)]();});}function cleanSettings(){const _0x27c1d0=_0x32b3bf;let _0x77d0fe=settings;return settings[_0x27c1d0(0x1e6)]&&settings[_0x27c1d0(0x1e6)]!=''&&(_0x77d0fe={..._0x77d0fe,'telegramToken':_0x27c1d0(0x1ad)}),settings['bbPassword']&&settings['bbPassword']!=''&&(_0x77d0fe={..._0x77d0fe,'bbPassword':'************'}),settings[_0x27c1d0(0x240)]&&settings[_0x27c1d0(0x240)]!=''&&(_0x77d0fe={..._0x77d0fe,'marketcapApi':_0x27c1d0(0x1ad)}),(settings[_0x27c1d0(0xff)]&&settings[_0x27c1d0(0xff)]==_0x27c1d0(0x2c4)||settings[_0x27c1d0(0x1e6)]&&settings['telegramToken']==_0x27c1d0(0x2c4)||settings[_0x27c1d0(0x240)]&&settings[_0x27c1d0(0x240)]=='***')&&(_0x77d0fe={..._0x77d0fe,'restored':{'password':settings['bbPassword']=='***','telegram':settings[_0x27c1d0(0x1e6)]==_0x27c1d0(0x2c4),'marketcap':settings[_0x27c1d0(0x240)]==_0x27c1d0(0x2c4)}}),_0x77d0fe;}async function updateBB(_0x1af427){const _0x87c9a8=_0x32b3bf;await backupConfigFiles(),installingUpdate=!![],config[_0x87c9a8(0x1aa)](_0x3516fa=>{const _0x2fb7fe=_0x87c9a8;restartBot(_0x3516fa[_0x2fb7fe(0x11a)]);});if(_0x1af427==_0x87c9a8(0x20c))process[_0x87c9a8(0x151)]({'update':!![],'environment':environment},_0x402ab8=>{});else _0x1af427==_0x87c9a8(0x234)&&process[_0x87c9a8(0x151)]({'reinstall':!![],'environment':environment},_0x2e579e=>{});}function startBot(_0x150f78,_0x3b11fc,_0x55cf09){const _0x2443c2=_0x32b3bf;if(debugging)_0x150f78['push']('-d');if(recreate)_0x150f78[_0x2443c2(0xfd)]('-r');let _0x55f20b=![];const _0x287fac=_0x150f78[0x0];_0x3b11fc={..._0x3b11fc,'stdio':[_0x2443c2(0x244),_0x2443c2(0x244),_0x2443c2(0x244),_0x2443c2(0x1e0)]},pid[_0x287fac]=childProcess[_0x2443c2(0x2a4)](botfile,_0x150f78,_0x3b11fc),pid[_0x287fac]['on']('message',_0x3cc0e8=>{const _0x5b26e6=_0x2443c2;switch(Object[_0x5b26e6(0x229)](_0x3cc0e8)[0x0]){case'botname':updateBotName(_0x287fac,_0x3cc0e8['botname']);break;case'updatebotmanager':updateBotManager();break;case'status':updateStatus(_0x287fac,_0x3cc0e8[_0x5b26e6(0x111)]);break;case'live':updateLive(_0x287fac,_0x3cc0e8[_0x5b26e6(0x263)]);break;case'started':updateLive(_0x287fac,_0x3cc0e8['started']),io['to'](_0x287fac)['emit'](_0x5b26e6(0x111),{'access':{'allow':![],'reason':_0x5b26e6(0x1e4),'token':null}});break;case'stop':_0x3cc0e8['stop']==_0x5b26e6(0x124)&&restartBot(_0x287fac);_0x3cc0e8[_0x5b26e6(0x108)]==_0x5b26e6(0x2b6)&&toggleBot(_0x287fac,_0x5b26e6(0xfa),'stopped');break;case'telegram':sendTelegramBot(_0x287fac,_0x3cc0e8['telegram']);break;case _0x5b26e6(0x2c9):sendTelegramMsg(_0x3cc0e8[_0x5b26e6(0x2c9)]);break;case _0x5b26e6(0x132):io['to'](_0x287fac)[_0x5b26e6(0x1eb)](_0x3cc0e8[_0x5b26e6(0x132)],_0x3cc0e8['args']);break;}}),pid[_0x287fac]['on']('error',function(_0x3e5a8d){if(_0x55f20b)return;_0x55f20b=!![],_0x55cf09(_0x3e5a8d);}),pid[_0x287fac]['on'](_0x2443c2(0x287),async function(_0x5aa695){const _0x5d042e=_0x2443c2;if(terminating)return;if(installingUpdate){io[_0x5d042e(0x154)]();return;}if(_0x55f20b)return;_0x55f20b=!![],_0x55cf09(null);const _0x33124f=dbConfig['get'](_0x5d042e(0x28e))[_0x5d042e(0x21c)]({'botID':_0x287fac})[_0x5d042e(0x113)]();_0x33124f&&(_0x33124f[_0x5d042e(0x111)]=='enabled'||_0x33124f[_0x5d042e(0x111)]=='new')&&(await sleep(0x3e8),updateLive(_0x287fac,_0x5d042e(0x131)),logger[_0x5d042e(0x303)](_0x5d042e(0x190)+_0x287fac),startBot([_0x287fac,userID],{'cwd':bbpath},function(_0x10e9a3){if(_0x10e9a3)logger['full'](_0x10e9a3);}));});}function _0x3a44(_0x4ee112,_0x5cd69d){const _0x2ed19c=_0xce32();return _0x3a44=function(_0x5e4bc9,_0x2b2841){_0x5e4bc9=_0x5e4bc9-0xef;let _0xce3240=_0x2ed19c[_0x5e4bc9];return _0xce3240;},_0x3a44(_0x4ee112,_0x5cd69d);}function stopBot(_0x130ccb){const _0x465b3d=_0x32b3bf;getClientsWithBotID(_0x130ccb)[_0x465b3d(0x1aa)](_0x5b6b24=>{const _0x151b90=_0x465b3d;getSocket(_0x5b6b24['id'])[_0x151b90(0x211)](!![]),removeClient(_0x5b6b24['id']);}),pid[_0x130ccb]&&(pid[_0x130ccb]['kill'](),pid[_0x130ccb]=null);}function stopAllBots(){const _0x1e2e5e=_0x32b3bf;terminating=!![];const _0x174af6=getEnabledBots();_0x174af6[_0x1e2e5e(0x1aa)](_0x153568=>{const _0x533a42=_0x1e2e5e;stopBot(_0x153568[_0x533a42(0x11a)]);});}function restartBot(_0x153e95){const _0x1b440d=_0x32b3bf;if(pid[_0x153e95])pid[_0x153e95][_0x1b440d(0x2b6)]();}function addBot(){const _0x416709=_0x32b3bf;let _0x3b0de6;for(let _0x5945a4=0x1;_0x5945a4<0x3e9;_0x5945a4++){_0x3b0de6=_0x5945a4[_0x416709(0x1cc)]()[_0x416709(0x308)](0x3,'0');let _0x2a42fe=config[_0x416709(0x21c)](_0x2dc807=>_0x2dc807[_0x416709(0x11a)]==_0x3b0de6);if(!_0x2a42fe)break;}if(_0x3b0de6===_0x416709(0x304)){logger[_0x416709(0x303)](_0x416709(0x233));return;}logger[_0x416709(0x303)](_0x416709(0x155)+_0x3b0de6),dbConfig[_0x416709(0x2b7)](_0x416709(0x28e))['push']({'botID':_0x3b0de6,'botname':_0x416709(0x11e)+_0x3b0de6,'status':_0x416709(0x2e4),'live':''})[_0x416709(0x2f8)](),startBot([_0x3b0de6,userID],{'cwd':bbpath},function(_0x549a07){const _0x101c3f=_0x416709;if(_0x549a07)logger[_0x101c3f(0x303)](_0x549a07);}),config=getConfiguration(),io['to'](_0x416709(0x242))[_0x416709(0x1eb)](_0x416709(0x28e),config),broadcastToBots(_0x416709(0x28e),JSON[_0x416709(0x181)](config));}function deleteBot(_0x51009b){const _0x97c99d=_0x32b3bf;getClientsWithBotID(_0x51009b)[_0x97c99d(0x1aa)](_0x33340a=>{const _0x3145d7=_0x97c99d;getSocket(_0x33340a['id'])[_0x3145d7(0x211)](!![]),removeClient(_0x33340a['id']);}),dbConfig[_0x97c99d(0x2b7)](_0x97c99d(0x28e))[_0x97c99d(0x161)]({'botID':_0x51009b})[_0x97c99d(0x2f8)](),logger[_0x97c99d(0x303)](_0x97c99d(0x1e7)+_0x51009b),stopBot(_0x51009b);try{if(fs[_0x97c99d(0x18e)](path[_0x97c99d(0x2b5)](configpath,'bot-'+_0x51009b+_0x97c99d(0x1d0))))fs['unlinkSync'](path[_0x97c99d(0x2b5)](configpath,'bot-'+_0x51009b+_0x97c99d(0x1d0)));if(fs['existsSync'](path['join'](configpath,'bot-'+_0x51009b+_0x97c99d(0x122))))fs[_0x97c99d(0x1d8)](path[_0x97c99d(0x2b5)](configpath,_0x97c99d(0x1ae)+_0x51009b+'-events.json'));if(fs[_0x97c99d(0x18e)](path[_0x97c99d(0x2b5)](configpath,'bot-'+_0x51009b+'-performance.json')))fs['unlinkSync'](path[_0x97c99d(0x2b5)](configpath,_0x97c99d(0x1ae)+_0x51009b+_0x97c99d(0x2a3)));if(fs[_0x97c99d(0x18e)](path['join'](configpath,_0x97c99d(0x1ae)+_0x51009b+_0x97c99d(0x177))))fs['unlinkSync'](path[_0x97c99d(0x2b5)](configpath,_0x97c99d(0x1ae)+_0x51009b+'-results.json'));}catch(_0x3b9ef4){if(_0x3b9ef4)logger[_0x97c99d(0x303)](_0x97c99d(0x286),_0x3b9ef4);}config=getConfiguration(),io['to'](_0x97c99d(0x242))[_0x97c99d(0x1eb)](_0x97c99d(0x28e),config),broadcastToBots(_0x97c99d(0x28e),JSON[_0x97c99d(0x181)](config));}function toggleBot(_0x166c1f,_0x1ea432,_0x2a9a54){const _0x43ad33=_0x32b3bf;dbConfig[_0x43ad33(0x2b7)]('bots')['find']({'botID':_0x166c1f})[_0x43ad33(0x258)]({'status':_0x1ea432})['assign']({'live':_0x2a9a54})[_0x43ad33(0x2f8)]();if(_0x1ea432==_0x43ad33(0x2ab)||_0x1ea432==_0x43ad33(0x2e4))logger[_0x43ad33(0x303)](_0x43ad33(0x2c5)+_0x166c1f),startBot([_0x166c1f,userID],{'cwd':bbpath},function(_0x1993b0){if(_0x1993b0)logger['full'](_0x1993b0);});else(_0x1ea432==_0x43ad33(0xfa)||_0x1ea432==_0x43ad33(0x201))&&(logger[_0x43ad33(0x303)](_0x43ad33(0x167)+_0x166c1f),stopBot(_0x166c1f));config=getConfiguration(),io['to'](_0x43ad33(0x242))[_0x43ad33(0x1eb)]('bots',config),broadcastToBots('bots',JSON[_0x43ad33(0x181)](config));}function toggleStatus(_0x158172){const _0x7247d=_0x32b3bf;let _0x3a69c4=dbConfig[_0x7247d(0x2b7)]('bots')[_0x7247d(0x21c)]({'botID':_0x158172})['value'](),_0x56cfde;if(_0x3a69c4[_0x7247d(0x111)]==='enabled')_0x56cfde=_0x7247d(0xfa);else{if(_0x3a69c4[_0x7247d(0x111)]===_0x7247d(0x2e4))_0x56cfde='new-disabled';else{if(_0x3a69c4['status']===_0x7247d(0x201))_0x56cfde=_0x7247d(0x2e4);else{if(_0x3a69c4['status']===_0x7247d(0xfa))_0x56cfde=_0x7247d(0x2ab);}}}return _0x56cfde;}function updateStatus(_0x11246d,_0x44abd0){const _0x447fcb=_0x32b3bf;dbConfig[_0x447fcb(0x2b7)](_0x447fcb(0x28e))[_0x447fcb(0x21c)]({'botID':_0x11246d})[_0x447fcb(0x258)]({'status':_0x44abd0})[_0x447fcb(0x2f8)](),config=getConfiguration(),io['to'](_0x447fcb(0x242))[_0x447fcb(0x1eb)](_0x447fcb(0x28e),config),broadcastToBots(_0x447fcb(0x28e),JSON['stringify'](config));}function updateLive(_0x134a60,_0x14c8ec){const _0xa4f300=_0x32b3bf;dbConfig[_0xa4f300(0x2b7)](_0xa4f300(0x28e))[_0xa4f300(0x21c)]({'botID':_0x134a60})['assign']({'live':_0x14c8ec})[_0xa4f300(0x2f8)](),config=getConfiguration(),io['to'](_0xa4f300(0x242))[_0xa4f300(0x1eb)](_0xa4f300(0x28e),config),broadcastToBots('bots',JSON['stringify'](config));}function updateBotName(_0x17b0fa,_0x46154d){const _0xadebf0=_0x32b3bf;dbConfig[_0xadebf0(0x2b7)](_0xadebf0(0x28e))[_0xadebf0(0x21c)]({'botID':_0x17b0fa})['assign']({'botname':_0x46154d})['write'](),config=getConfiguration(),io['to'](_0xadebf0(0x242))['emit'](_0xadebf0(0x28e),config),broadcastToBots('bots',JSON['stringify'](config));}function updateBotManager(){const _0x2020c4=_0x32b3bf;config=getConfiguration(),io['to'](_0x2020c4(0x242))[_0x2020c4(0x1eb)](_0x2020c4(0x28e),config),broadcastToBots(_0x2020c4(0x28e),JSON[_0x2020c4(0x181)](config));}function toggleBotMode(_0x76b3d8){const _0xe1dfb=_0x32b3bf;if(pid[_0x76b3d8])pid[_0x76b3d8][_0xe1dfb(0x151)]({'function':_0xe1dfb(0x178),'args':null});else{const _0xe0607c=configpath+_0xe1dfb(0x1ae)+_0x76b3d8+'-config.json',_0x4b5900=fs[_0xe1dfb(0x22a)](_0xe0607c),_0x29afd9=JSON[_0xe1dfb(0x171)](_0x4b5900),_0x1412b7=_0x29afd9[_0xe1dfb(0x2d6)][0x0]['headless'];_0x29afd9['bot'][0x0][_0xe1dfb(0x14c)]=!_0x1412b7;const _0x40d815=JSON[_0xe1dfb(0x181)](_0x29afd9,null,0x2);fs[_0xe1dfb(0x2e0)](_0xe0607c,_0x40d815),config=getConfiguration(),io['to']('botmanager')['emit'](_0xe1dfb(0x28e),config),broadcastToBots(_0xe1dfb(0x28e),JSON[_0xe1dfb(0x181)](config));}}function validateTelegram(_0x34b277){const _0x1754f4=_0x32b3bf;if(_0x34b277[_0x1754f4(0x158)][_0x1754f4(0x1bb)]!=settings[_0x1754f4(0x26c)]&&'@'+_0x34b277[_0x1754f4(0x158)][_0x1754f4(0x1bb)]!=settings[_0x1754f4(0x26c)]||_0x34b277[_0x1754f4(0x2f5)]['id']!=settings[_0x1754f4(0x165)])return sendTelegram(_0x34b277['chat']['id'],_0x1754f4(0x1f3),{'parse_mode':_0x1754f4(0x18f)}),![];return!![];}async function initTelegram(){const _0x459050=_0x32b3bf;tgBot&&(await tgBot[_0x459050(0x108)](),await sleep(0x7d0));tgBot=new Telegraf(settings['telegramToken']);let _0x398bf4='You\x20can\x20use\x20the\x20following\x20commands:\x0a';_0x398bf4+='\x0a',_0x398bf4+=_0x459050(0x264),_0x398bf4+='/disable\x20-\x20disable\x20notifications\x0a',_0x398bf4+=_0x459050(0x2ac),_0x398bf4+=_0x459050(0x25b),_0x398bf4+=_0x459050(0x130),_0x398bf4+='/off\x20-\x20stop\x20bot(s)\x0a',_0x398bf4+=_0x459050(0x1d6),_0x398bf4+=_0x459050(0x274),_0x398bf4+=_0x459050(0x18a),_0x398bf4+=_0x459050(0x28a),_0x398bf4+=_0x459050(0x261),_0x398bf4+=_0x459050(0x2db),_0x398bf4+='/backup\x20-\x20receive\x20backup\x20files\x0a',_0x398bf4+=_0x459050(0x119),_0x398bf4+=_0x459050(0x168),_0x398bf4+=_0x459050(0x1e8);let _0x5c078d='Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a';_0x5c078d+='\x0a',_0x5c078d+=_0x398bf4,tgBot[_0x459050(0x120)]((_0x915d6d,_0x3350de)=>{const _0x23e84a=_0x459050;logger[_0x23e84a(0x1a7)](getTimeStamp()+_0x23e84a(0x290)),logger[_0x23e84a(0x247)](_0x23e84a(0x1cf),_0x915d6d);}),tgBot[_0x459050(0x250)](async(_0x34a85b,_0x5c4f47)=>{const _0x55dc5c=_0x459050;if(settings[_0x55dc5c(0x165)]||_0x34a85b[_0x55dc5c(0x20c)][_0x55dc5c(0x11f)][_0x55dc5c(0x118)]!=_0x55dc5c(0x14f)){if(!validateTelegram(_0x34a85b))return;}_0x5c4f47();}),tgBot[_0x459050(0x1a0)](_0x459050(0x207),async _0x4944f5=>{const _0x1ecc9a=_0x459050;if(_0x4944f5[_0x1ecc9a(0x158)][_0x1ecc9a(0x1bb)]==settings[_0x1ecc9a(0x26c)]||'@'+_0x4944f5['from']['username']==settings[_0x1ecc9a(0x26c)]){if(!settings[_0x1ecc9a(0x165)])updateSetting(_0x1ecc9a(0x165),_0x4944f5[_0x1ecc9a(0x2f5)]['id']);else{if(!validateTelegram(_0x4944f5))return;}}else{if(!validateTelegram(_0x4944f5))return;}updateSetting('telegramEnabled',!![]),await sendTelegram(_0x4944f5[_0x1ecc9a(0x2f5)]['id'],_0x5c078d);}),tgBot[_0x459050(0x1a0)](_0x459050(0x2b3),async _0x1240b0=>{const _0x10fb12=_0x459050;updateSetting(_0x10fb12(0x141),!![]),await sendTelegram(_0x1240b0[_0x10fb12(0x2f5)]['id'],_0x10fb12(0x184));}),tgBot[_0x459050(0x1a0)](_0x459050(0x17d),async _0x364857=>{const _0x474a4f=_0x459050;await sendTelegram(_0x364857[_0x474a4f(0x2f5)]['id'],_0x474a4f(0x1a4)),updateSetting(_0x474a4f(0x141),![]);}),tgBot[_0x459050(0x1a0)](_0x459050(0x2a2),async _0xbe1ad7=>{const _0x4017ae=_0x459050,_0x1299c4=Markup[_0x4017ae(0x22c)]([Markup[_0x4017ae(0x2c1)][_0x4017ae(0x127)](_0x4017ae(0x302),_0x4017ae(0x275)),Markup['button'][_0x4017ae(0x127)]('Alerts',_0x4017ae(0x2e9)),Markup[_0x4017ae(0x2c1)]['callback']('All',_0x4017ae(0x2c3))]);_0xbe1ad7[_0x4017ae(0x2f2)]('Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?',_0x1299c4);}),tgBot[_0x459050(0x23d)]('config_orders',async _0x22233b=>{const _0x26ab28=_0x459050;_0x22233b[_0x26ab28(0x1c9)](),updateSetting(_0x26ab28(0x20b),_0x26ab28(0x12b)),updateSetting('telegramEnabled',!![]),await sendTelegram(_0x22233b['chat']['id'],_0x26ab28(0x13e));}),tgBot[_0x459050(0x23d)](_0x459050(0x2e9),async _0x10a670=>{const _0x566967=_0x459050;_0x10a670[_0x566967(0x1c9)](),updateSetting('telegramEvents',_0x566967(0x21f)),updateSetting(_0x566967(0x141),!![]),await sendTelegram(_0x10a670[_0x566967(0x2f5)]['id'],_0x566967(0x1b1));}),tgBot[_0x459050(0x23d)](_0x459050(0x2c3),async _0x53e337=>{const _0x239085=_0x459050;_0x53e337[_0x239085(0x1c9)](),updateSetting(_0x239085(0x20b),_0x239085(0x2c2)),updateSetting(_0x239085(0x141),!![]),await sendTelegram(_0x53e337[_0x239085(0x2f5)]['id'],_0x239085(0xf1));}),tgBot[_0x459050(0x1a0)](_0x459050(0x111),async _0xd6ef06=>{const _0x27135c=_0x459050,_0x481b65=getBotsWithMode();let _0x34c37b=_0x27135c(0x107);config['forEach'](_0x54add7=>{const _0x1074b4=_0x27135c,_0x1f3464=_0x481b65[_0x1074b4(0x21c)](_0x3c8821=>_0x3c8821[_0x1074b4(0x11a)]==_0x54add7[_0x1074b4(0x11a)])[_0x1074b4(0x1bd)];_0x34c37b+=_0x1074b4(0x11e)+_0x54add7[_0x1074b4(0x11a)]+':\x20'+_0x54add7[_0x1074b4(0x111)]+_0x1074b4(0x11c)+_0x1f3464+_0x1074b4(0x11c)+_0x54add7[_0x1074b4(0x263)]+'\x0a';}),_0x34c37b+='\x0a',_0x34c37b+=_0x27135c(0x2ed),_0x34c37b+=!settings['telegramEnabled']?_0x27135c(0x28c):_0x27135c(0x2d5),_0x34c37b+=settings[_0x27135c(0x141)]?settings[_0x27135c(0x20b)]==_0x27135c(0x2c2)?'Notifications\x20types:\x20orders\x20and\x20alerts\x0a':'Notifications\x20types:\x20'+settings[_0x27135c(0x20b)]+_0x27135c(0x29d):'',await sendTelegram(_0xd6ef06[_0x27135c(0x2f5)]['id'],_0x34c37b,{'parse_mode':_0x27135c(0x18f)});}),tgBot[_0x459050(0x1a0)](_0x459050(0x124),async _0x1ab245=>{const _0x980f3=_0x459050,_0x14bc3b=getEnabledBots();if(_0x14bc3b[_0x980f3(0x2bf)]==0x0)await sendTelegram(_0x1ab245[_0x980f3(0x2f5)]['id'],_0x980f3(0x307));else{if(_0x14bc3b[_0x980f3(0x2bf)]>0x1)_0x14bc3b[_0x980f3(0xfd)]({'botID':_0x980f3(0x2c2)});let _0x52b7de=[],_0x15ed6f=[];const _0x59493b=_0x14bc3b['length']%0x4==0x0||_0x14bc3b[_0x980f3(0x2bf)]%0x4==0x3||_0x14bc3b['length']%0x3==0x1?0x4:0x3;let _0x1db079=0x0;_0x14bc3b['forEach']((_0x11884a,_0x505748)=>{const _0x42683e=_0x980f3;if(_0x505748%_0x59493b==0x0)_0x15ed6f=[];_0x15ed6f[_0x42683e(0xfd)](Markup['button'][_0x42683e(0x127)](_0x11884a[_0x42683e(0x11a)]==_0x42683e(0x2c2)?_0x42683e(0x231):_0x42683e(0x11e)+_0x11884a[_0x42683e(0x11a)],_0x42683e(0x2b8)+_0x11884a[_0x42683e(0x11a)])),_0x505748%_0x59493b==0x0&&(_0x52b7de[_0x1db079]=_0x15ed6f,_0x1db079++);});const _0x323555=Markup[_0x980f3(0x22c)](_0x52b7de);_0x1ab245[_0x980f3(0x2f2)](_0x980f3(0xfc),_0x323555);}}),tgBot[_0x459050(0x23d)](/restart_(.+)/,async _0xd07fa6=>{const _0x238240=_0x459050,_0x4f6b68=_0xd07fa6[_0x238240(0x192)][0x1];_0xd07fa6[_0x238240(0x1c9)](),_0x4f6b68==_0x238240(0x2c2)?config[_0x238240(0x1aa)](_0x3f03a3=>{const _0x27fbfb=_0x238240;restartBot(_0x3f03a3[_0x27fbfb(0x11a)]);}):restartBot(_0x4f6b68);}),tgBot[_0x459050(0x1a0)]('on',async _0x4ab0ae=>{const _0x597d98=_0x459050,_0x208970=getDisabledBots();if(_0x208970['length']==0x0)await sendTelegram(_0x4ab0ae[_0x597d98(0x2f5)]['id'],_0x597d98(0x100));else{if(_0x208970[_0x597d98(0x2bf)]>0x1)_0x208970['push']({'botID':'all'});let _0x16408d=[],_0x1a362d=[];const _0x45fb4=_0x208970[_0x597d98(0x2bf)]%0x4==0x0||_0x208970[_0x597d98(0x2bf)]%0x4==0x3||_0x208970[_0x597d98(0x2bf)]%0x3==0x1?0x4:0x3;let _0x1b75dc=0x0;_0x208970['forEach']((_0x43d276,_0x31cb37)=>{const _0x5e9af0=_0x597d98;if(_0x31cb37%_0x45fb4==0x0)_0x1a362d=[];_0x1a362d['push'](Markup[_0x5e9af0(0x2c1)][_0x5e9af0(0x127)](_0x43d276[_0x5e9af0(0x11a)]==_0x5e9af0(0x2c2)?_0x5e9af0(0x231):_0x5e9af0(0x11e)+_0x43d276[_0x5e9af0(0x11a)],_0x5e9af0(0x2fe)+_0x43d276['botID'])),_0x31cb37%_0x45fb4==0x0&&(_0x16408d[_0x1b75dc]=_0x1a362d,_0x1b75dc++);});const _0x5a721f=Markup[_0x597d98(0x22c)](_0x16408d);_0x4ab0ae['reply'](_0x597d98(0x2ef),_0x5a721f);}}),tgBot[_0x459050(0x23d)](/on_(.+)/,async _0x34c413=>{const _0x3842c9=_0x459050,_0x1c9b78=_0x34c413[_0x3842c9(0x192)][0x1];_0x34c413[_0x3842c9(0x1c9)]();if(_0x1c9b78==_0x3842c9(0x2c2)){const _0xa875bf=getDisabledBots();await sendTelegram(_0x34c413['chat']['id'],_0x3842c9(0xf7)),_0xa875bf[_0x3842c9(0x1aa)](_0x2382f8=>{const _0x7e3f45=_0x3842c9;if(_0x2382f8[_0x7e3f45(0x11a)]!='all')toggleBot(_0x2382f8[_0x7e3f45(0x11a)],toggleStatus(_0x2382f8[_0x7e3f45(0x11a)]),_0x7e3f45(0x131));});}else await sendTelegram(_0x34c413[_0x3842c9(0x2f5)]['id'],'Bot\x20Mgr\x20>\x20starting\x20Bot\x20'+_0x1c9b78),toggleBot(_0x1c9b78,toggleStatus(_0x1c9b78),_0x3842c9(0x131));}),tgBot[_0x459050(0x1a0)](_0x459050(0x2e8),async _0x5ba245=>{const _0x1367e7=_0x459050,_0x56d737=getEnabledBots();if(_0x56d737[_0x1367e7(0x2bf)]==0x0)await sendTelegram(_0x5ba245['chat']['id'],'No\x20bots\x20running\x20right\x20now');else{if(_0x56d737[_0x1367e7(0x2bf)]>0x1)_0x56d737[_0x1367e7(0xfd)]({'botID':'all'});let _0x970df6=[],_0x5a52ba=[];const _0x588530=_0x56d737['length']%0x4==0x0||_0x56d737[_0x1367e7(0x2bf)]%0x4==0x3||_0x56d737[_0x1367e7(0x2bf)]%0x3==0x1?0x4:0x3;let _0x451038=0x0;_0x56d737[_0x1367e7(0x1aa)]((_0x780a71,_0x1a0279)=>{const _0x3e1101=_0x1367e7;if(_0x1a0279%_0x588530==0x0)_0x5a52ba=[];_0x5a52ba[_0x3e1101(0xfd)](Markup[_0x3e1101(0x2c1)][_0x3e1101(0x127)](_0x780a71['botID']==_0x3e1101(0x2c2)?_0x3e1101(0x231):_0x3e1101(0x11e)+_0x780a71[_0x3e1101(0x11a)],_0x3e1101(0x25e)+_0x780a71[_0x3e1101(0x11a)])),_0x1a0279%_0x588530==0x0&&(_0x970df6[_0x451038]=_0x5a52ba,_0x451038++);});const _0x1c4dbf=Markup['inlineKeyboard'](_0x970df6);_0x5ba245[_0x1367e7(0x2f2)]('Which\x20bot\x20do\x20you\x20want\x20to\x20stop?',_0x1c4dbf);}}),tgBot[_0x459050(0x23d)](/off_(.+)/,async _0x3fa5ef=>{const _0xf12895=_0x459050,_0x256e09=_0x3fa5ef[_0xf12895(0x192)][0x1];_0x3fa5ef[_0xf12895(0x1c9)]();if(_0x256e09==_0xf12895(0x2c2)){const _0x17db79=getEnabledBots();await sendTelegram(_0x3fa5ef[_0xf12895(0x2f5)]['id'],_0xf12895(0x2a8)),_0x17db79[_0xf12895(0x1aa)](_0x32690e=>{const _0x2dd64e=_0xf12895;if(_0x32690e[_0x2dd64e(0x11a)]!=_0x2dd64e(0x2c2))toggleBot(_0x32690e[_0x2dd64e(0x11a)],toggleStatus(_0x32690e[_0x2dd64e(0x11a)]),'stopped');});}else await sendTelegram(_0x3fa5ef[_0xf12895(0x2f5)]['id'],_0xf12895(0x145)+_0x256e09),toggleBot(_0x256e09,toggleStatus(_0x256e09),_0xf12895(0x131));}),tgBot[_0x459050(0x1a0)](_0x459050(0x2be),async _0x530d2a=>{const _0xaef51d=_0x459050,_0x472a65=getEnabledBots();if(_0x472a65[_0xaef51d(0x2bf)]==0x0)await sendTelegram(_0x530d2a[_0xaef51d(0x2f5)]['id'],_0xaef51d(0x307));else{if(_0x472a65[_0xaef51d(0x2bf)]>0x1){let _0x23867c=[],_0x1e2e1c=[];const _0x331094=_0x472a65[_0xaef51d(0x2bf)]%0x4==0x0||_0x472a65[_0xaef51d(0x2bf)]%0x4==0x3||_0x472a65[_0xaef51d(0x2bf)]%0x3==0x1?0x4:0x3;let _0x24116d=0x0;_0x472a65[_0xaef51d(0x1aa)]((_0x1bc4cc,_0x34e27e)=>{const _0x390347=_0xaef51d;if(_0x34e27e%_0x331094==0x0)_0x1e2e1c=[];_0x1e2e1c[_0x390347(0xfd)](Markup[_0x390347(0x2c1)][_0x390347(0x127)]('Bot\x20'+_0x1bc4cc[_0x390347(0x11a)],'metrics_'+_0x1bc4cc[_0x390347(0x11a)])),_0x34e27e%_0x331094==0x0&&(_0x23867c[_0x24116d]=_0x1e2e1c,_0x24116d++);});const _0x4e6a04=Markup[_0xaef51d(0x22c)](_0x23867c);_0x530d2a[_0xaef51d(0x2f2)](_0xaef51d(0x1ec),_0x4e6a04);}else{const _0xc0854f=_0x472a65[0x0][_0xaef51d(0x11a)];if(pid[_0xc0854f])pid[_0xc0854f][_0xaef51d(0x151)]({'function':'sendMetricsTelegram','args':null});}}}),tgBot[_0x459050(0x23d)](/metrics_(.+)/,async _0x6c72ef=>{const _0x15ebe3=_0x459050,_0xe00e72=_0x6c72ef[_0x15ebe3(0x192)][0x1];_0x6c72ef[_0x15ebe3(0x1c9)]();if(pid[_0xe00e72])pid[_0xe00e72][_0x15ebe3(0x151)]({'function':'sendMetricsTelegram','args':null});}),tgBot[_0x459050(0x1a0)](_0x459050(0x283),async _0x958a59=>{const _0x4ef455=_0x459050,_0xfab896=getEnabledBots();if(_0xfab896[_0x4ef455(0x2bf)]==0x0)await sendTelegram(_0x958a59[_0x4ef455(0x2f5)]['id'],'No\x20bots\x20running\x20right\x20now');else{if(_0xfab896[_0x4ef455(0x2bf)]>0x1){let _0x28b61b=[],_0x490589=[];const _0x45d099=_0xfab896[_0x4ef455(0x2bf)]%0x4==0x0||_0xfab896['length']%0x4==0x3||_0xfab896['length']%0x3==0x1?0x4:0x3;let _0x1ffb9a=0x0;_0xfab896[_0x4ef455(0x1aa)]((_0x4e88ec,_0x549af6)=>{const _0x4a215a=_0x4ef455;if(_0x549af6%_0x45d099==0x0)_0x490589=[];_0x490589[_0x4a215a(0xfd)](Markup[_0x4a215a(0x2c1)][_0x4a215a(0x127)](_0x4a215a(0x11e)+_0x4e88ec['botID'],'portfolio_'+_0x4e88ec[_0x4a215a(0x11a)])),_0x549af6%_0x45d099==0x0&&(_0x28b61b[_0x1ffb9a]=_0x490589,_0x1ffb9a++);});const _0x4715d3=Markup[_0x4ef455(0x22c)](_0x28b61b);_0x958a59[_0x4ef455(0x2f2)](_0x4ef455(0x180),_0x4715d3);}else{const _0x2d8b8d=_0xfab896[0x0]['botID'];if(pid[_0x2d8b8d])pid[_0x2d8b8d]['send']({'function':_0x4ef455(0x2df),'args':null});}}}),tgBot[_0x459050(0x23d)](/portfolio_(.+)/,async _0x1f29d6=>{const _0x2789aa=_0x459050,_0x5d6b2b=_0x1f29d6[_0x2789aa(0x192)][0x1];_0x1f29d6[_0x2789aa(0x1c9)]();if(pid[_0x5d6b2b])pid[_0x5d6b2b]['send']({'function':_0x2789aa(0x2df),'args':null});}),tgBot[_0x459050(0x1a0)]('logs',async _0x248370=>{const _0x230fa4=_0x459050,_0xc27043=_0x230fa4(0x208);await zipFiles(_0xc27043);const _0x3b368f=zippath+(_0xc27043+_0x230fa4(0x2fc));_0x248370[_0x230fa4(0x27b)]({'source':_0x3b368f})[_0x230fa4(0x185)](()=>{})[_0x230fa4(0x120)](_0x378104=>logger[_0x230fa4(0x247)]('Error\x20sending\x20'+_0xc27043+_0x230fa4(0x2fd),_0x378104));}),tgBot[_0x459050(0x1a0)](_0x459050(0x21d),async _0xe2b0b1=>{const _0x9c296b=_0x459050,_0x32eae6=_0x9c296b(0x21d);await backupConfigFiles(),await zipFiles(_0x32eae6);const _0x50368e=zippath+(_0x32eae6+_0x9c296b(0x2fc));_0xe2b0b1[_0x9c296b(0x27b)]({'source':_0x50368e})[_0x9c296b(0x185)](()=>{})['catch'](_0x303ccc=>logger[_0x9c296b(0x247)](_0x9c296b(0x1a5)+_0x32eae6+_0x9c296b(0x2fd),_0x303ccc));}),tgBot[_0x459050(0x1a0)]('update',async _0x39a833=>{const _0x365d5f=_0x459050;await getMessages();if(!updateAvailable)await sendTelegram(_0x39a833['chat']['id'],_0x365d5f(0x103));else{if(!validInstallation)await sendTelegram(_0x39a833[_0x365d5f(0x2f5)]['id'],_0x365d5f(0x203));else{const _0x36ce47=Markup[_0x365d5f(0x22c)]([Markup[_0x365d5f(0x2c1)]['callback'](_0x365d5f(0x219),_0x365d5f(0x23e)),Markup['button']['callback']('No',_0x365d5f(0x270))]);_0x39a833[_0x365d5f(0x2f2)](_0x365d5f(0x193),_0x36ce47);}}}),tgBot['action'](/update_(.+)/,async _0x83a27e=>{const _0x42eb41=_0x459050,_0x191975=_0x83a27e[_0x42eb41(0x192)][0x1];_0x83a27e[_0x42eb41(0x1c9)](),_0x191975==_0x42eb41(0x209)&&(await sendTelegram(_0x83a27e[_0x42eb41(0x2f5)]['id'],_0x42eb41(0x1b0)),updateBB(_0x42eb41(0x20c))),_0x191975=='no'&&await sendTelegram(_0x83a27e['chat']['id'],'Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later');}),tgBot[_0x459050(0x1a0)](_0x459050(0x234),async _0x1b9b2c=>{const _0x4a73c0=_0x459050;if(!validInstallation)await sendTelegram(_0x1b9b2c['chat']['id'],_0x4a73c0(0x13f));else{const _0x213406=Markup[_0x4a73c0(0x22c)]([Markup[_0x4a73c0(0x2c1)]['callback'](_0x4a73c0(0x219),_0x4a73c0(0x1fb)),Markup['button']['callback']('No',_0x4a73c0(0x27d))]);_0x1b9b2c[_0x4a73c0(0x2f2)](_0x4a73c0(0x15c),_0x213406);}}),tgBot[_0x459050(0x23d)](/reinstall_(.+)/,async _0xd6d552=>{const _0x3cbfb7=_0x459050,_0x4dffd1=_0xd6d552['match'][0x1];_0xd6d552[_0x3cbfb7(0x1c9)](),_0x4dffd1==_0x3cbfb7(0x209)&&(await sendTelegram(_0xd6d552['chat']['id'],_0x3cbfb7(0x269)),updateBB(_0x3cbfb7(0x234))),_0x4dffd1=='no'&&await sendTelegram(_0xd6d552[_0x3cbfb7(0x2f5)]['id'],_0x3cbfb7(0x215));}),tgBot[_0x459050(0x1a0)](_0x459050(0x1be),async _0x452270=>{const _0x4c07a3=_0x459050,_0x242699=getBotsWithMode();if(_0x242699['length']==0x0)await sendTelegram(_0x452270['chat']['id'],_0x4c07a3(0x307));else{let _0x2bb3cc=[],_0x598fe3=[];const _0xa85b57=0x2;let _0x1fda34=0x0;_0x242699['forEach']((_0x4ec044,_0x42c041)=>{const _0x53fbbf=_0x4c07a3;if(_0x42c041%_0xa85b57==0x0)_0x598fe3=[];_0x598fe3['push'](Markup[_0x53fbbf(0x2c1)][_0x53fbbf(0x127)](_0x53fbbf(0x11e)+_0x4ec044[_0x53fbbf(0x11a)]+'\x20('+_0x4ec044[_0x53fbbf(0x1bd)]+')',_0x53fbbf(0x2bb)+_0x4ec044[_0x53fbbf(0x11a)])),_0x42c041%_0xa85b57==0x0&&(_0x2bb3cc[_0x1fda34]=_0x598fe3,_0x1fda34++);});const _0x38a79a=Markup[_0x4c07a3(0x22c)](_0x2bb3cc);_0x452270[_0x4c07a3(0x2f2)](_0x4c07a3(0x21b),_0x38a79a);}}),tgBot[_0x459050(0x23d)](/toggle_(.+)/,async _0xc43677=>{const _0x36370b=_0x459050,_0x2e2409=_0xc43677[_0x36370b(0x192)][0x1];_0xc43677['editMessageReplyMarkup']();const _0x1c3109=getBotsWithMode(),_0x20ed17=_0x1c3109[_0x36370b(0x21c)](_0x3fd02c=>_0x3fd02c[_0x36370b(0x11a)]==_0x2e2409),_0x20c115=_0x20ed17[_0x36370b(0x1bd)]==_0x36370b(0x28b)?_0x36370b(0x239):_0x36370b(0x28b);await sendTelegram(_0xc43677[_0x36370b(0x2f5)]['id'],_0x36370b(0x2d9)+_0x2e2409+'\x20to\x20'+_0x20c115+_0x36370b(0x15f)),toggleBotMode(_0x2e2409);}),tgBot[_0x459050(0x1a0)](_0x459050(0x10d),async _0x58c028=>{const _0x303a36=_0x459050;let _0xc25d='';config[_0x303a36(0x1aa)](_0x43d55e=>{const _0x599d8e=_0x303a36;_0xc25d+='Bot\x20'+_0x43d55e[_0x599d8e(0x11a)]+':\x20'+_0x43d55e[_0x599d8e(0x255)]+'\x0a';}),await sendTelegram(_0x58c028['chat']['id'],_0xc25d,{'parse_mode':_0x303a36(0x18f)});}),tgBot[_0x459050(0x1a0)](_0x459050(0x134),async _0x44d7f8=>{const _0x211fc2=_0x459050;await sendTelegram(_0x44d7f8[_0x211fc2(0x2f5)]['id'],_0x398bf4);}),process[_0x459050(0x2ff)](_0x459050(0x10f),()=>tgBot['stop']('SIGINT')),process[_0x459050(0x2ff)](_0x459050(0x1b6),()=>tgBot[_0x459050(0x108)](_0x459050(0x1b6))),tgBot[_0x459050(0x16c)]();}function disableTelegram(){tgBot&&tgBot['stop']();}async function sendTelegram(_0x59ce6a,_0x5f4b45,_0x202f03){const _0x37b8d2=_0x32b3bf;_0x202f03={..._0x202f03,'disable_web_page_preview':!![]};try{await tgBot[_0x37b8d2(0x139)][_0x37b8d2(0x152)](_0x59ce6a,_0x5f4b45,_0x202f03);}catch(_0x142a01){logger[_0x37b8d2(0x247)](_0x37b8d2(0x1cb),_0x142a01);}}async function sendTelegramBot(_0x2dc2a3,_0x3b83c9){const _0x1b6f55=_0x32b3bf;if(settings[_0x1b6f55(0x141)]){if(settings[_0x1b6f55(0x20b)]==_0x1b6f55(0x2c2)||(_0x3b83c9[_0x1b6f55(0x156)]==_0x1b6f55(0x19f)||_0x3b83c9['type']==_0x1b6f55(0x1b4)||_0x3b83c9[_0x1b6f55(0x156)]==_0x1b6f55(0x164))&&settings[_0x1b6f55(0x20b)]==_0x1b6f55(0x21f)||_0x3b83c9[_0x1b6f55(0x156)]==_0x1b6f55(0x2d7)&&settings[_0x1b6f55(0x20b)]==_0x1b6f55(0x12b)){if(tgBot&&settings[_0x1b6f55(0x165)]){if(_0x3b83c9[_0x1b6f55(0x163)])await sendTelegram(settings[_0x1b6f55(0x165)],_0x3b83c9['botname']+_0x1b6f55(0x17a)+_0x3b83c9['event']);else await sendTelegram(settings['telegramChatId'],'Bot\x20'+_0x2dc2a3+_0x1b6f55(0x17a)+_0x3b83c9[_0x1b6f55(0x2e2)]);}}}}async function sendTelegramMsg(_0x33b60f,_0x145646=_0x32b3bf(0x18f)){return settings['telegramEnabled']&&tgBot&&settings['telegramChatId']?(await sendTelegram(settings['telegramChatId'],_0x33b60f,{'parse_mode':_0x145646}),!![]):![];}function getDeviceWithIp(_0x3d7ccc){const _0x2c953c=_0x32b3bf;return devices[_0x2c953c(0x21c)](_0x50227c=>_0x50227c['ip']===_0x3d7ccc);}async function temporaryAccess2FA(_0x3f177c,_0x343e59){const _0x5638a4=_0x32b3bf;let _0x1ba180=new Date(),_0x375b72=![];if(lastIpApproval){if(_0x1ba180-lastIpApproval<0x1388)_0x375b72=!![];}lastIpApproval=new Date();if(_0x375b72)return;if(tgBot&&settings[_0x5638a4(0x165)]){const _0x5df8bb=uuidRandom();tmpStorage[_0x5df8bb]={'uuid':_0x3f177c,'externalip':_0x343e59};const _0x3aeb9a=Markup[_0x5638a4(0x22c)]([Markup[_0x5638a4(0x2c1)][_0x5638a4(0x127)](_0x5638a4(0x26a),_0x5638a4(0x257)+_0x5df8bb),Markup[_0x5638a4(0x2c1)][_0x5638a4(0x127)](_0x5638a4(0x252),_0x5638a4(0x1dd)+_0x5df8bb),Markup[_0x5638a4(0x2c1)][_0x5638a4(0x127)](_0x5638a4(0x2a7),_0x5638a4(0x248)+_0x5df8bb),Markup[_0x5638a4(0x2c1)]['callback'](_0x5638a4(0x1fa),_0x5638a4(0x26e)+_0x5df8bb)]);await sendTelegram(settings[_0x5638a4(0x165)],_0x5638a4(0x2cd)+normalizeIP(_0x343e59)[_0x5638a4(0x19a)]+'\x20?',_0x3aeb9a),tgBot[_0x5638a4(0x23d)](/tempaccess_(.+)_(.+)/,async _0x5c25d8=>{const _0x2bbce8=_0x5638a4,_0x5cdac6=_0x5c25d8[_0x2bbce8(0x192)][0x1],_0x2b3e6a=_0x5c25d8[_0x2bbce8(0x192)][0x2],{uuid:_0x42a8d0,externalip:_0x37f817}=tmpStorage[_0x2b3e6a];delete tmpStorage[_0x2b3e6a],_0x5c25d8[_0x2bbce8(0x1c9)](),devices[_0x42a8d0][_0x2bbce8(0x15e)]={'clientip':_0x37f817,'timestamp':new Date()[_0x2bbce8(0x297)](),'expiry':_0x5cdac6},_0x5cdac6!='reject'?(await sendTelegram(_0x5c25d8[_0x2bbce8(0x2f5)]['id'],_0x2bbce8(0x1e3)+_0x5cdac6+_0x2bbce8(0x222),{'parse_mode':_0x2bbce8(0x18f)}),io['to'](_0x42a8d0)['emit'](_0x2bbce8(0x111),{'access':{'allow':![],'reason':_0x2bbce8(0x1e4),'token':null}})):(await sendTelegram(_0x5c25d8['chat']['id'],'Temporary\x20access\x20rejected'),io['to'](_0x42a8d0)[_0x2bbce8(0x1eb)](_0x2bbce8(0x111),{'access':{'allow':![],'reason':_0x2bbce8(0x16a),'token':null}}));});}}async function loginAccess2FA(_0x5097cb,_0x52a027){const _0x2b3451=_0x32b3bf;if(tgBot&&settings[_0x2b3451(0x165)]){const _0x3ac053=uuidRandom();tmpStorage[_0x3ac053]={'uuid':_0x5097cb,'externalip':_0x52a027};const _0x4d61e7=Markup[_0x2b3451(0x22c)]([Markup[_0x2b3451(0x2c1)][_0x2b3451(0x127)](_0x2b3451(0x1f4),'login2fa_'+loginExpiry+'_'+_0x3ac053),Markup[_0x2b3451(0x2c1)][_0x2b3451(0x127)]('reject',_0x2b3451(0x1ac)+_0x3ac053)]);await sendTelegram(settings[_0x2b3451(0x165)],'Allow\x20login\x20from\x20IP\x20address\x20'+normalizeIP(_0x52a027)['show']+'\x20?',_0x4d61e7),tgBot[_0x2b3451(0x23d)](/login2fa_(.+)_(.+)/,async _0x19c716=>{const _0x11509d=_0x2b3451,_0x1bd233=_0x19c716[_0x11509d(0x192)][0x1],_0xc1aa11=_0x19c716[_0x11509d(0x192)][0x2],{uuid:_0x21374b,externalip:_0x5440d9}=tmpStorage[_0xc1aa11];delete tmpStorage[_0xc1aa11],_0x19c716[_0x11509d(0x1c9)](),devices[_0x21374b][_0x11509d(0x1f9)]={'clientip':_0x5440d9,'timestamp':new Date()[_0x11509d(0x297)](),'expiry':_0x1bd233},_0x1bd233!='reject'?(await sendTelegram(_0x19c716[_0x11509d(0x2f5)]['id'],'Login\x20accepted',{'parse_mode':'HTML'}),io['to'](_0x21374b)[_0x11509d(0x1eb)]('status',{'access':{'allow':![],'reason':_0x11509d(0x1e4),'token':null}})):(await sendTelegram(_0x19c716['chat']['id'],_0x11509d(0x1a9)),io['to'](_0x21374b)[_0x11509d(0x1eb)](_0x11509d(0x111),{'access':{'allow':![],'reason':_0x11509d(0x1b5),'token':null}}));});}}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x56a969=_0x32b3bf;return dbConfig[_0x56a969(0x2b7)](_0x56a969(0x28e))[_0x56a969(0x220)](_0x56a969(0x11a))[_0x56a969(0x199)]({'status':_0x56a969(0x2ab)})['value']()||[];}function getDisabledBots(){const _0x306b0b=_0x32b3bf;return dbConfig[_0x306b0b(0x2b7)](_0x306b0b(0x28e))['sortBy'](_0x306b0b(0x11a))[_0x306b0b(0x199)]({'status':_0x306b0b(0xfa)})[_0x306b0b(0x113)]()||[];}function getBotAttributes(_0x5a6dac){const _0x18ddb6=_0x32b3bf;let _0x31fa18={};const _0x2eb60e=configpath+_0x18ddb6(0x1ae)+_0x5a6dac+'-config.json',_0x580d65=fs[_0x18ddb6(0x18e)](_0x2eb60e);if(_0x580d65){const _0x1d18ba=fs[_0x18ddb6(0x22a)](_0x2eb60e);try{const _0x2cfa91=JSON[_0x18ddb6(0x171)](_0x1d18ba),_0x1287cf=_0x2cfa91?_0x2cfa91[_0x18ddb6(0x2d6)][0x0][_0x18ddb6(0x14c)]:![];_0x31fa18[_0x18ddb6(0x1bd)]=_0x1287cf?_0x18ddb6(0x28b):'manual',_0x31fa18[_0x18ddb6(0x255)]=_0x2cfa91?_0x2cfa91['bot'][0x0][_0x18ddb6(0x255)]:'Bot\x20'+_0x5a6dac;}catch(_0x3ec3e3){_0x31fa18[_0x18ddb6(0x1bd)]=_0x18ddb6(0x239),_0x31fa18[_0x18ddb6(0x255)]='Bot\x20'+_0x5a6dac;}}else _0x31fa18[_0x18ddb6(0x1bd)]=_0x18ddb6(0x239),_0x31fa18[_0x18ddb6(0x255)]=_0x18ddb6(0x11e)+_0x5a6dac;return _0x31fa18;}function getBotsWithMode(){const _0xa99051=_0x32b3bf,_0x55f7d7=dbConfig[_0xa99051(0x2b7)]('bots')[_0xa99051(0x220)](_0xa99051(0x11a))[_0xa99051(0x113)]()||[];return _0x55f7d7['forEach'](_0x426df9=>{const _0x326a13=_0xa99051;let _0xa18f6e=getBotAttributes(_0x426df9[_0x326a13(0x11a)]);_0x426df9['mode']=_0xa18f6e[_0x326a13(0x1bd)];}),_0x55f7d7;}function getBotExchanges(){const _0x4c0b0e=_0x32b3bf;let _0x395a8a=[];const _0x5acc6b=dbConfig[_0x4c0b0e(0x2b7)]('bots')['sortBy']('botID')['value']()||[];_0x5acc6b[_0x4c0b0e(0x1aa)](_0x107982=>{const _0x185637=_0x4c0b0e;if(_0x107982[_0x185637(0x111)]=='enabled'){const _0x3b14bc=configpath+_0x185637(0x1ae)+_0x107982['botID']+_0x185637(0x1d0),_0x368077=fs[_0x185637(0x18e)](_0x3b14bc);let _0x21f1e5;if(_0x368077){const _0x2c46e1=fs[_0x185637(0x22a)](_0x3b14bc);try{const _0x24c5e9=JSON[_0x185637(0x171)](_0x2c46e1);_0x21f1e5=_0x24c5e9?_0x24c5e9[_0x185637(0x2d6)][0x0][_0x185637(0x1d3)]:null;}catch(_0x15f961){}}if(_0x21f1e5)_0x395a8a[_0x185637(0xfd)](_0x21f1e5);}});const _0x6941d5=[...new Set(_0x395a8a)][_0x4c0b0e(0x13b)]();return _0x6941d5;}async function initUser(){const _0x5aac3d=_0x32b3bf;if(!settings['userid']){const _0x1cf267=uuidRandom();mixpanel[_0x5aac3d(0x24a)](_0x1cf267),updateSetting('userid',_0x1cf267);}}async function initSecure(){const _0x348a5b=_0x32b3bf;let _0x392546=getSecure();if(!_0x392546[_0x348a5b(0x1d1)](_0x348a5b(0x227))){let _0x5c16e2=await generateKeys();_0x392546[_0x348a5b(0x1ff)]=_0x5c16e2[_0x348a5b(0x1ff)],_0x392546[_0x348a5b(0x117)]=_0x5c16e2[_0x348a5b(0x117)],_0x392546[_0x348a5b(0x227)]=crypto[_0x348a5b(0x153)](0x20)[_0x348a5b(0x1cc)]('hex');;storeSecure(_0x392546);}}function getSettings(){const _0x342591=_0x32b3bf;return dbSettings[_0x342591(0x2b7)](_0x342591(0x221))[_0x342591(0x113)]()||{};}function getSecure(){const _0x283798=_0x32b3bf;return dbSecure['get'](_0x283798(0x173))['value']()||{};}function getBlacklist(){const _0x822712=_0x32b3bf;return dbSecure[_0x822712(0x2b7)](_0x822712(0x1ca))[_0x822712(0x113)]()||[];}function broadcastToBots(_0x2026c6,_0x46fa8c){const _0x2945ea=_0x32b3bf;config[_0x2945ea(0x1aa)](_0x2d9ea5=>{const _0x145cd4=_0x2945ea;if(_0x2d9ea5[_0x145cd4(0x111)]=='enabled'&&_0x2d9ea5[_0x145cd4(0x263)]==_0x145cd4(0xef)||_0x2d9ea5[_0x145cd4(0x111)]=='new'&&_0x2d9ea5[_0x145cd4(0x263)]==_0x145cd4(0xef)){if(pid[_0x2d9ea5['botID']])pid[_0x2d9ea5[_0x145cd4(0x11a)]]['send']({[_0x2026c6]:_0x46fa8c});}});}async function storeSettings(_0x1c70a9,_0x5970ba=![]){const _0x51e32d=_0x32b3bf;_0x1c70a9={...settings,..._0x1c70a9};if(_0x5970ba&&_0x1c70a9[_0x51e32d(0xff)]!=_0x51e32d(0x1ad)&&_0x1c70a9['bbPassword']!='***'&&_0x1c70a9[_0x51e32d(0xff)]!=''){const _0x16fb5b=decryptRSA(secure[_0x51e32d(0x117)],_0x1c70a9['bbPassword'])[_0x51e32d(0x214)](_0x51e32d(0x174))[0x0],_0x17af3c=bcrypt[_0x51e32d(0x11d)](_0x16fb5b,saltRounds);_0x1c70a9={..._0x1c70a9,'bbPassword':_0x17af3c};}if(_0x5970ba&&_0x1c70a9['telegramToken']!=_0x51e32d(0x1ad)&&_0x1c70a9['telegramToken']!=_0x51e32d(0x2c4)&&_0x1c70a9[_0x51e32d(0x1e6)]!=''){const _0x3e58eb=decryptRSA(secure[_0x51e32d(0x117)],_0x1c70a9['telegramToken'])['split'](_0x51e32d(0x174))[0x0];_0x1c70a9={..._0x1c70a9,'telegramToken':_0x3e58eb};}if(_0x5970ba&&_0x1c70a9['marketcapApi']!=_0x51e32d(0x1ad)&&_0x1c70a9[_0x51e32d(0x240)]!='***'&&_0x1c70a9[_0x51e32d(0x240)]!=''){const _0x53dd55=decryptRSA(secure[_0x51e32d(0x117)],_0x1c70a9['marketcapApi'])[_0x51e32d(0x214)](_0x51e32d(0x174))[0x0];_0x1c70a9={..._0x1c70a9,'marketcapApi':_0x53dd55};}const _0x13813b=_0x1c70a9[_0x51e32d(0x1e6)]!=_0x51e32d(0x1ad)&&_0x1c70a9[_0x51e32d(0x1e6)]!=settings[_0x51e32d(0x1e6)]||_0x1c70a9['telegramUsername']!=settings[_0x51e32d(0x26c)],_0x4547f4=_0x1c70a9[_0x51e32d(0x1e6)]==''||_0x1c70a9[_0x51e32d(0x26c)]=='',_0x70af4e=_0x1c70a9[_0x51e32d(0x240)]&&_0x1c70a9[_0x51e32d(0x240)]!='************'&&_0x1c70a9['marketcapApi']!=settings[_0x51e32d(0x240)];_0x13813b&&(_0x1c70a9[_0x51e32d(0x165)]=null,_0x1c70a9[_0x51e32d(0x20b)]=_0x51e32d(0x2c2));for(const [_0x3a9805,_0x4a24b0]of Object[_0x51e32d(0x160)](_0x1c70a9)){if(_0x3a9805=='telegramToken'&&_0x4a24b0=='************'){_0x1c70a9[_0x51e32d(0x1e6)]=settings[_0x51e32d(0x1e6)];continue;};if(_0x3a9805==_0x51e32d(0xff)&&_0x4a24b0==_0x51e32d(0x1ad)){_0x1c70a9[_0x51e32d(0xff)]=settings[_0x51e32d(0xff)];continue;};if(_0x3a9805==_0x51e32d(0x240)&&_0x4a24b0==_0x51e32d(0x1ad)){_0x1c70a9[_0x51e32d(0x240)]=settings[_0x51e32d(0x240)];continue;};dbSettings[_0x51e32d(0x273)](_0x51e32d(0x280)+_0x3a9805,_0x4a24b0)[_0x51e32d(0x2f8)]();}settings=_0x1c70a9,io['to'](_0x51e32d(0x242))[_0x51e32d(0x1eb)](_0x51e32d(0x221),cleanSettings()),broadcastToBots(_0x51e32d(0x22b),settings['timeshift']),broadcastToBots(_0x51e32d(0x23f),settings['onepagemode']),broadcastToBots(_0x51e32d(0x240),settings[_0x51e32d(0x240)]);if(_0x13813b&&!_0x4547f4)initTelegram();_0x13813b&&_0x4547f4&&(updateSetting('telegramChatId',null),disableTelegram()),getAllClients()[_0x51e32d(0x1aa)](_0x13b47a=>{const _0x228cce=_0x51e32d;getSocket(_0x13b47a['id'])[_0x228cce(0x1eb)](_0x228cce(0x111),{'access':{'allow':![],'reason':_0x228cce(0x1e4),'token':null}});}),_0x70af4e&&(await sleep(0xbb8),testMarketcapApi(_0x1c70a9[_0x51e32d(0x240)]));}async function testMarketcapApi(_0x37cbdc){const _0x4bc3a1=_0x32b3bf,_0xac202a=[_0x4bc3a1(0x166),_0x4bc3a1(0x116)];try{await axios[_0x4bc3a1(0x2b7)](_0x4bc3a1(0x109),{'headers':{'X-CMC_PRO_API_KEY':_0x37cbdc},'params':{'symbol':_0xac202a['toString']()}});}catch(_0x5555db){_0x5555db[_0x4bc3a1(0x1cc)]()[_0x4bc3a1(0x135)](_0x4bc3a1(0x129))?(io['to'](_0x4bc3a1(0x242))[_0x4bc3a1(0x1eb)](_0x4bc3a1(0xf6),'CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager'),logger[_0x4bc3a1(0x303)](_0x4bc3a1(0x285))):(io['to'](_0x4bc3a1(0x242))[_0x4bc3a1(0x1eb)](_0x4bc3a1(0xf6),_0x4bc3a1(0x2de)),logger[_0x4bc3a1(0x303)](_0x4bc3a1(0x2de)),logger[_0x4bc3a1(0x247)](_0x4bc3a1(0x14b),_0x5555db[_0x4bc3a1(0x1cc)]()+_0x4bc3a1(0x1db)+_0x5555db['code']));return;}logger[_0x4bc3a1(0x247)]('CoinMarketCap\x20API\x20key\x20validated');}function updateSetting(_0x37ca06,_0x3dc9c2){const _0x249524=_0x32b3bf;dbSettings['set'](_0x249524(0x280)+_0x37ca06,_0x3dc9c2)[_0x249524(0x2f8)](),settings=getSettings(),io['to']('botmanager')['emit']('settings',cleanSettings());}function storeSecure(_0x474df5){const _0x5b9002=_0x32b3bf;dbSecure[_0x5b9002(0x2b7)](_0x5b9002(0x173))[_0x5b9002(0xfd)](_0x474df5)[_0x5b9002(0x2f8)](),secure=_0x474df5;}function addBlacklist(_0x460758){const _0x255191=_0x32b3bf;cleanBlacklist();let _0x4d4aac;devices[_0x460758][_0x255191(0x15e)]?_0x4d4aac=Math[_0x255191(0x148)](devices[_0x460758][_0x255191(0x15e)][_0x255191(0x2fa)],loginExpiry):_0x4d4aac=loginExpiry,dbSecure['get'](_0x255191(0x1ca))[_0x255191(0xfd)]({'expiry':new Date()['getTime']()+_0x4d4aac*0x3c*0x3e8,'token':devices[_0x460758][_0x255191(0x175)][_0x255191(0x230)]})['write'](),blacklist=dbSecure['get'](_0x255191(0x1ca))[_0x255191(0x113)]();}function cleanBlacklist(){const _0x3fa3f2=_0x32b3bf;let _0x557217=dbSecure[_0x3fa3f2(0x2b7)](_0x3fa3f2(0x1ca))[_0x3fa3f2(0x2f7)]()['value'](),_0x9cff73=new Date()['getTime']();_0x557217['forEach'](_0x1b0fe2=>{const _0x1f12f1=_0x3fa3f2;_0x1b0fe2[_0x1f12f1(0x2fa)]<_0x9cff73&&dbSecure[_0x1f12f1(0x2b7)](_0x1f12f1(0x1ca))[_0x1f12f1(0x161)]({'expiry':_0x1b0fe2[_0x1f12f1(0x2fa)]})['write']();});}function initStates(){const _0x5837ec=_0x32b3bf;let _0x211e83=getConfiguration();_0x211e83[_0x5837ec(0x1aa)](_0xba8e42=>{const _0x405669=_0x5837ec;_0xba8e42['live']=_0x405669(0x131);}),storeConfiguration(_0x211e83);}async function generateKeys(){const _0x51b4a9=_0x32b3bf,_0x20739c=forge[_0x51b4a9(0x14e)][_0x51b4a9(0x26d)][_0x51b4a9(0x29f)]({'bits':0x1000,'e':0x10001}),_0x41ac17=forge[_0x51b4a9(0x14e)][_0x51b4a9(0x1fd)](_0x20739c['privateKey']),_0x2f41ef=forge['pki']['publicKeyToPem'](_0x20739c['publicKey']);return{'privateKey':_0x41ac17,'publicKey':_0x2f41ef};}async function oneTimeMigration(){const _0xcaef50=_0x32b3bf;let _0x45844f=getSettings(),_0x51a42f=![];!_0x45844f['hasOwnProperty'](_0xcaef50(0x2d4))&&(_0x45844f[_0xcaef50(0x2d4)]=0x0,_0x51a42f=!![]);!_0x45844f[_0xcaef50(0x1d1)](_0xcaef50(0x1ab))&&(_0x45844f[_0xcaef50(0x1ab)]=0x0,_0x51a42f=!![]);!_0x45844f[_0xcaef50(0x1d1)](_0xcaef50(0x2ce))&&(_0x45844f['latestversion']=_0xcaef50(0x1cd),_0x51a42f=!![]);!_0x45844f[_0xcaef50(0x1d1)](_0xcaef50(0x23f))&&(_0x45844f['onepagemode']=![],_0x51a42f=!![]);!_0x45844f[_0xcaef50(0x1d1)](_0xcaef50(0x240))&&(_0x45844f['marketcapApi']='',_0x51a42f=!![]);if(_0x51a42f)storeSettings(_0x45844f);try{fs[_0xcaef50(0x1df)](configbackuppath,{'withFileTypes':!![]})[_0xcaef50(0x1aa)](_0x1964fd=>{const _0x28baae=_0xcaef50;if(!_0x1964fd[_0x28baae(0x24d)]()){if(!_0x1964fd[_0x28baae(0x254)]['startsWith'](_0x28baae(0x206)))fs[_0x28baae(0x1d8)](configbackuppath+_0x1964fd[_0x28baae(0x254)]);}else fs[_0x28baae(0x306)](configbackuppath+_0x1964fd[_0x28baae(0x254)],{'recursive':!![]});});}catch(_0x59532a){logger[_0xcaef50(0x247)](_0xcaef50(0x20e),_0x59532a);}}function storeConfiguration(_0x253e39){const _0x35ce6a=_0x32b3bf;dbConfig[_0x35ce6a(0x2b7)](_0x35ce6a(0x28e))['remove']()[_0x35ce6a(0x2f8)](),dbConfig['get'](_0x35ce6a(0x28e))[_0x35ce6a(0xfd)](..._0x253e39)[_0x35ce6a(0x2f8)](),config=_0x253e39;}async function resetPassword(){const _0x15786b=_0x32b3bf;if(tgBot&&settings[_0x15786b(0x165)]){const _0x4d3776=Markup[_0x15786b(0x22c)]([Markup[_0x15786b(0x2c1)]['callback'](_0x15786b(0x209),_0x15786b(0x123)),Markup[_0x15786b(0x2c1)][_0x15786b(0x127)]('no',_0x15786b(0x157))]);await sendTelegram(settings[_0x15786b(0x165)],_0x15786b(0x182),_0x4d3776),tgBot[_0x15786b(0x23d)](/resetpw_(.+)/,async _0x391a01=>{const _0x46d30b=_0x15786b,_0x3218d5=_0x391a01['match'][0x1];_0x391a01[_0x46d30b(0x1c9)]();if(_0x3218d5!='no'){const _0x1e4a99=0xf,_0x56e8b9=_0x46d30b(0x17e),_0x175036=Array[_0x46d30b(0x158)](crypto['randomFillSync'](new Uint32Array(_0x1e4a99)))[_0x46d30b(0x291)](_0xf489e0=>_0x56e8b9[_0xf489e0%_0x56e8b9[_0x46d30b(0x2bf)]])[_0x46d30b(0x2b5)](''),_0x3c543d=bcrypt[_0x46d30b(0x11d)](_0x175036,saltRounds);storeSettings({'bbPassword':_0x3c543d}),await sendTelegram(_0x391a01[_0x46d30b(0x2f5)]['id'],'Password\x20has\x20been\x20reset\x20to:\x20'+_0x175036,{'parse_mode':'HTML'});}else await sendTelegram(_0x391a01[_0x46d30b(0x2f5)]['id'],_0x46d30b(0x105));});}}async function confirmRestore(_0x561915,_0x257220){const _0x298f85=_0x32b3bf;io['to'](_0x298f85(0x242))[_0x298f85(0x1eb)]('notification',_0x298f85(0x22d),'success');if(tgBot&&settings[_0x298f85(0x165)]){const _0x21dc28=uuidRandom();tmpStorage[_0x21dc28]={'path':_0x561915,'filename':_0x257220};const _0x5931ab=Markup[_0x298f85(0x22c)]([Markup[_0x298f85(0x2c1)][_0x298f85(0x127)](_0x298f85(0x209),_0x298f85(0x22f)+_0x21dc28),Markup['button']['callback']('no',_0x298f85(0x10a)+_0x21dc28)]);await sendTelegram(settings[_0x298f85(0x165)],_0x298f85(0x1c7),_0x5931ab),tgBot[_0x298f85(0x23d)](/restore_(.+)_(.+)/,async _0x40a00c=>{const _0x531898=_0x298f85,_0x25e39b=_0x40a00c['match'][0x1],_0x31fee4=_0x40a00c[_0x531898(0x192)][0x2],{path:_0x5ac0c7,filename:_0x424a9f}=tmpStorage[_0x31fee4];delete tmpStorage[_0x31fee4],_0x40a00c[_0x531898(0x1c9)](),_0x25e39b=='yes'?(logger[_0x531898(0x247)](_0x531898(0x1bf)),await sendTelegram(_0x40a00c[_0x531898(0x2f5)]['id'],_0x531898(0x299),{'parse_mode':_0x531898(0x18f)}),unzipFile(_0x5ac0c7,_0x424a9f)):(logger['debug'](_0x531898(0x24f)),await sendTelegram(_0x40a00c[_0x531898(0x2f5)]['id'],'Restore\x20process\x20aborted'));});}}function getServerTime(){const _0x14f965=_0x32b3bf,_0x2efdc9=new Date();return _0x2efdc9[_0x14f965(0x195)]()+'/'+(_0x2efdc9['getMonth']()+0x1)[_0x14f965(0x1cc)]()['padStart'](0x2,'0')+'/'+_0x2efdc9[_0x14f965(0xf0)]()['toString']()[_0x14f965(0x308)](0x2,'0')+'\x20'+_0x2efdc9[_0x14f965(0xf9)]()[_0x14f965(0x1cc)]()[_0x14f965(0x308)](0x2,'0')+':'+_0x2efdc9[_0x14f965(0x16d)]()[_0x14f965(0x1cc)]()[_0x14f965(0x308)](0x2,'0')+':'+_0x2efdc9[_0x14f965(0x1b3)]()[_0x14f965(0x1cc)]()[_0x14f965(0x308)](0x2,'0');}function getTimeStamp(){const _0x160ff3=_0x32b3bf,_0x441f88=shiftedTime();return _0x441f88[_0x160ff3(0x195)]()+'/'+(_0x441f88[_0x160ff3(0x295)]()+0x1)[_0x160ff3(0x1cc)]()['padStart'](0x2,'0')+'/'+_0x441f88[_0x160ff3(0xf0)]()['toString']()['padStart'](0x2,'0')+'\x20'+_0x441f88[_0x160ff3(0xf9)]()[_0x160ff3(0x1cc)]()[_0x160ff3(0x308)](0x2,'0')+':'+_0x441f88[_0x160ff3(0x16d)]()[_0x160ff3(0x1cc)]()['padStart'](0x2,'0')+':'+_0x441f88[_0x160ff3(0x1b3)]()['toString']()[_0x160ff3(0x308)](0x2,'0');}function getCleanTimeStamp(){const _0x25e83f=_0x32b3bf,_0x375639=shiftedTime();return _0x375639[_0x25e83f(0x195)]()+(_0x375639['getMonth']()+0x1)[_0x25e83f(0x1cc)]()[_0x25e83f(0x308)](0x2,'0')+_0x375639[_0x25e83f(0xf0)]()[_0x25e83f(0x1cc)]()['padStart'](0x2,'0')+'-'+_0x375639[_0x25e83f(0xf9)]()[_0x25e83f(0x1cc)]()[_0x25e83f(0x308)](0x2,'0')+_0x375639[_0x25e83f(0x16d)]()['toString']()[_0x25e83f(0x308)](0x2,'0')+_0x375639[_0x25e83f(0x1b3)]()[_0x25e83f(0x1cc)]()[_0x25e83f(0x308)](0x2,'0');}function shiftedTime(){const _0x2ddaed=_0x32b3bf,_0x5cf212=new Date();let _0x3919c5=_0x5cf212;if(settings[_0x2ddaed(0x22b)]&&settings[_0x2ddaed(0x22b)]!==0x0)_0x3919c5=fns['add'](_0x5cf212,{'hours':settings[_0x2ddaed(0x22b)]});return _0x3919c5;}async function startScheduler(){const _0x3c1705=_0x32b3bf,_0x4f6c79=new Date()[_0x3c1705(0x1b2)](),_0x48a484=shiftedTime()[_0x3c1705(0xf9)]();_0x48a484==0x4&&backupConfigFiles(),_0x48a484==0x0&&(rotateLogFiles(),logger['debug'](_0x3c1705(0x281)),logger[_0x3c1705(0x247)]('Running\x20#RED#Balance\x20Bot\x20v'+serverversion+_0x3c1705(0x102)+(environment==_0x3c1705(0x1a1)?_0x3c1705(0x10c):'')),logger[_0x3c1705(0x247)](_0x3c1705(0x281))),_0x4f6c79%0x6==0x0&&triggerAnalytics(),_0x4f6c79%0x6==0x0&&getMessages(),await sleep(schedulerInterval),startScheduler();}async function restoreBackupFile(_0x373ff7){const _0x5637f1=_0x32b3bf;logger[_0x5637f1(0x247)]('Restore\x20backup\x20file\x20'+_0x373ff7);const _0x485dce=getBotsWithMode();_0x485dce[_0x5637f1(0x2bf)]>0x0?confirmRestore(configbackuppath,_0x373ff7):unzipFile(configbackuppath,_0x373ff7);}async function getBackupFiles(_0x664731=null){const _0x5b896e=_0x32b3bf;let _0x20cdb8=[],_0x11d7fa=fs['readdirSync'](configbackuppath,{'withFileTypes':!![]});_0x11d7fa['sort']((_0x536eaf,_0x360fe8)=>_0x536eaf[_0x5b896e(0x254)]<_0x360fe8[_0x5b896e(0x254)]?0x1:_0x360fe8[_0x5b896e(0x254)]<_0x536eaf[_0x5b896e(0x254)]?-0x1:0x0),_0x11d7fa['forEach'](_0x59ed6e=>{const _0x2635bb=_0x5b896e;if(!_0x59ed6e[_0x2635bb(0x24d)]()&&_0x59ed6e['name']['startsWith']('backup-full@')&&_0x59ed6e[_0x2635bb(0x254)][_0x2635bb(0x143)]('.zip')){const _0x3ffc8d=formatDate(fs[_0x2635bb(0x2a6)](configbackuppath+_0x59ed6e['name'])[_0x2635bb(0x147)]);_0x20cdb8[_0x2635bb(0xfd)]({'name':_0x59ed6e[_0x2635bb(0x254)],'mtime':_0x3ffc8d});}});if(_0x664731)io['to'](_0x664731)[_0x5b896e(0x1eb)]('backup-files',_0x20cdb8);else return _0x20cdb8;}async function backupConfigFiles(){const _0x17a5eb=_0x32b3bf;await zipFiles(_0x17a5eb(0x289));const _0x983221=getCleanTimeStamp();fs[_0x17a5eb(0x20a)](zippath+_0x17a5eb(0x1f8),configbackuppath+(_0x17a5eb(0x206)+_0x983221+_0x17a5eb(0x2fc)));let _0x23ed78=fs[_0x17a5eb(0x1df)](configbackuppath,{'withFileTypes':!![]});_0x23ed78[_0x17a5eb(0x13b)]((_0x5aa71d,_0x306d44)=>_0x5aa71d[_0x17a5eb(0x254)]<_0x306d44[_0x17a5eb(0x254)]?0x1:_0x306d44[_0x17a5eb(0x254)]<_0x5aa71d[_0x17a5eb(0x254)]?-0x1:0x0),_0x23ed78['length']>maxBackups&&fs['unlinkSync'](configbackuppath+_0x23ed78[_0x23ed78[_0x17a5eb(0x2bf)]-0x1][_0x17a5eb(0x254)]);}function rotateLogFiles(){const _0x1ca784=_0x32b3bf,_0x14c867=fs[_0x1ca784(0x2a6)](logspath+_0x1ca784(0x217)),_0x274e1b=_0x14c867[_0x1ca784(0x2cb)]/0x400;if(_0x274e1b>0x64){let _0x4c2f42=fs[_0x1ca784(0x1df)](logspath,{'withFileTypes':!![]});_0x4c2f42['sort']((_0x16e95d,_0x3a2056)=>_0x16e95d[_0x1ca784(0x254)]<_0x3a2056[_0x1ca784(0x254)]?0x1:_0x3a2056[_0x1ca784(0x254)]<_0x16e95d[_0x1ca784(0x254)]?-0x1:0x0),_0x4c2f42[_0x1ca784(0x1aa)](_0x2783b6=>{const _0x43be94=_0x1ca784;if(_0x2783b6[_0x43be94(0x254)]==_0x43be94(0x186))fs[_0x43be94(0x20a)](logspath+_0x2783b6[_0x43be94(0x254)],logspath+_0x43be94(0x1e9));if(_0x2783b6[_0x43be94(0x254)]==_0x43be94(0x2c7))fs[_0x43be94(0x20a)](logspath+_0x2783b6[_0x43be94(0x254)],logspath+'output-002.log');_0x2783b6[_0x43be94(0x254)]==_0x43be94(0x217)&&(fs[_0x43be94(0x20a)](logspath+_0x2783b6['name'],logspath+_0x43be94(0x2c7)),fs[_0x43be94(0x2e0)](logspath+_0x2783b6['name'],''));});}}async function zipFiles(_0x1e8f76){const _0x476c9c=_0x32b3bf;let _0x201161;if(_0x1e8f76==_0x476c9c(0x208))_0x201161=logspath;if(_0x1e8f76=='backup')_0x201161=configpath;if(_0x1e8f76==_0x476c9c(0x289))_0x201161=configpath;let _0x1c7938=fs[_0x476c9c(0x1df)](_0x201161,{'withFileTypes':!![]});const _0x34ede1=new JSZip();_0x1c7938[_0x476c9c(0x1aa)](_0x21f989=>{const _0x14bf66=_0x476c9c;if(!_0x21f989['isDirectory']()){let _0x23c0cc=fs[_0x14bf66(0x22a)](_0x201161+_0x21f989[_0x14bf66(0x254)]);if(_0x1e8f76==_0x14bf66(0x21d)){const _0xf5a090=/^bot-[0-9]{3}-config.json$/,_0x293369=_0xf5a090[_0x14bf66(0x142)](_0x21f989['name']);if(_0x293369){const _0x154e12=JSON[_0x14bf66(0x171)](_0x23c0cc);if(_0x154e12[_0x14bf66(0x2d6)][0x0]){_0x154e12[_0x14bf66(0x2d6)][0x0][_0x14bf66(0x1ce)]=_0x14bf66(0x2c4),_0x154e12[_0x14bf66(0x2d6)][0x0][_0x14bf66(0x2ec)]='***';if(_0x154e12[_0x14bf66(0x2d6)][0x0][_0x14bf66(0x259)])_0x154e12[_0x14bf66(0x2d6)][0x0][_0x14bf66(0x259)]='***';}_0x23c0cc=JSON['stringify'](_0x154e12,null,0x2);}if(_0x21f989['name']==_0x14bf66(0x218)){const _0x393651=JSON[_0x14bf66(0x171)](_0x23c0cc);if(_0x393651[_0x14bf66(0x221)]['loginRequired'])_0x393651[_0x14bf66(0x221)]['loginRequired']=![];if(_0x393651[_0x14bf66(0x221)][_0x14bf66(0xff)])_0x393651[_0x14bf66(0x221)][_0x14bf66(0xff)]=_0x14bf66(0x2c4);if(_0x393651[_0x14bf66(0x221)][_0x14bf66(0x1e6)])_0x393651[_0x14bf66(0x221)][_0x14bf66(0x1e6)]=_0x14bf66(0x2c4);if(_0x393651['settings']['telegramChatId'])_0x393651['settings']['telegramChatId']=null;if(_0x393651[_0x14bf66(0x221)][_0x14bf66(0x240)])_0x393651[_0x14bf66(0x221)]['marketcapApi']=_0x14bf66(0x2c4);_0x23c0cc=JSON[_0x14bf66(0x181)](_0x393651,null,0x2);}if(_0x21f989[_0x14bf66(0x254)]!=_0x14bf66(0x278))_0x34ede1[_0x14bf66(0x176)](_0x21f989[_0x14bf66(0x254)],_0x23c0cc);}else _0x34ede1['file'](_0x21f989[_0x14bf66(0x254)],_0x23c0cc);}});const _0x3309e4=await _0x34ede1['generateAsync']({'type':_0x476c9c(0x1c6),'base64':![],'compression':_0x476c9c(0x21e)});fs[_0x476c9c(0x2e0)](zippath+(_0x1e8f76+_0x476c9c(0x2fc)),_0x3309e4,_0x476c9c(0x1d9));}async function unzipFile(_0x4d271b,_0x517646){const _0x9ac06f=_0x32b3bf;fs[_0x9ac06f(0x1df)](configpath,{'withFileTypes':!![]})['forEach'](_0x576cc9=>{const _0x231520=_0x9ac06f;if(!_0x576cc9[_0x231520(0x24d)]())fs[_0x231520(0x306)](configpath+_0x576cc9[_0x231520(0x254)]);});const _0x3ff558=fs[_0x9ac06f(0x22a)](_0x4d271b+_0x517646,_0x9ac06f(0x1d9)),_0x3b60ac=await JSZip[_0x9ac06f(0x12a)](_0x3ff558,{'base64':![],'checkCRC32':!![]});for(const _0x3871eb of Object['keys'](_0x3b60ac[_0x9ac06f(0x300)])){const _0x298a9e=_0x3b60ac[_0x9ac06f(0x300)][_0x3871eb],_0x2f96e0=await _0x298a9e['async']('string');fs[_0x9ac06f(0x2e0)](configpath+_0x298a9e[_0x9ac06f(0x254)],_0x2f96e0);}fs[_0x9ac06f(0x1df)](temppath,{'withFileTypes':!![]})[_0x9ac06f(0x1aa)](_0x18506f=>{const _0x138736=_0x9ac06f;if(!_0x18506f['isDirectory']())fs[_0x138736(0x306)](temppath+_0x18506f[_0x138736(0x254)]);}),logger[_0x9ac06f(0x247)](_0x9ac06f(0x144)),process[_0x9ac06f(0x151)]({'restore':!![]},_0x44e5cf=>{});}async function getPublicIp(){const _0x2d66ca=_0x32b3bf;try{const _0x472144=await axios['get'](_0x2d66ca(0x137));publicip=_0x472144[_0x2d66ca(0x20d)]['ip'];}catch(_0x590135){}}async function triggerAnalytics(){const _0x1638a7=_0x32b3bf;if(!publicip)await getPublicIp();const _0x36fc5b=getBotsWithMode();let _0x5a55dd=0x0;_0x36fc5b[_0x1638a7(0x1aa)](_0x4473a9=>{const _0x2f3d46=_0x1638a7;if(_0x4473a9[_0x2f3d46(0x111)]===_0x2f3d46(0x2ab))_0x5a55dd++;});const _0x24c562=getBotExchanges();mixpanel[_0x1638a7(0x2d8)](_0x1638a7(0x12f),{'distinct_id':settings['userid'],'ip':publicip,'version':serverversion,'numbots':_0x36fc5b['length'],'numbotsenabled':_0x5a55dd,'exchanges':_0x24c562,'environment':environment});}async function getMessages(){const _0x8f037=_0x32b3bf,_0x24c8af='https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master',_0x5d0a77=new GraphQLClient(_0x24c8af),_0xa82d26={'authorization':'Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U'},_0xf1d5e5=serverversion[_0x8f037(0x214)]('.'),_0x54310b=_0xf1d5e5[0x0]+'.'+_0xf1d5e5[0x1],_0x48ec8f=Math['min'](settings['lastmsgtelegram'],settings[_0x8f037(0x1ab)]),_0x5687d4={'last':parseInt(_0x48ec8f),'bbm':_0x54310b},_0x12b9a4=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x9c3ed7;try{_0x9c3ed7=await _0x5d0a77[_0x8f037(0x27a)](_0x12b9a4,_0x5687d4,_0xa82d26);}catch(_0x5b15f2){}if(_0x9c3ed7&&_0x9c3ed7[_0x8f037(0x16f)]){let _0x3d1f15=settings[_0x8f037(0x2d4)];newMessages=[];for(const _0x4d61f4 of _0x9c3ed7[_0x8f037(0x16f)]){newMessages[_0x8f037(0xfd)](_0x4d61f4);let _0x348c1e=![];_0x4d61f4[_0x8f037(0x2d3)]&&(updateSetting(_0x8f037(0x2ce),_0x4d61f4[_0x8f037(0x2d3)]),_0x348c1e=isNewerVersion(serverversion,_0x4d61f4[_0x8f037(0x2d3)])||serverversion==_0x4d61f4[_0x8f037(0x2d3)]);if(!_0x348c1e&&_0x4d61f4[_0x8f037(0x12d)]>_0x3d1f15){if(_0x4d61f4['bbvReceive']==='any'||serverversion[_0x8f037(0x236)](_0x4d61f4[_0x8f037(0x2fb)])){let _0x3709db=''+_0x4d61f4['title']+'\x0a\x0a'+_0x4d61f4['message'];const _0x5b7141=await sendTelegramMsg(toTelegramMarkdown(_0x3709db),_0x8f037(0x2b2));if(_0x5b7141)_0x3d1f15=_0x4d61f4[_0x8f037(0x12d)];}}}updateAvailable=isNewerVersion(settings['latestversion'],serverversion),updateSetting(_0x8f037(0x2d4),_0x3d1f15),emitMessages();}}function emitMessages(){const _0x1a1b00=_0x32b3bf,_0x555371=settings[_0x1a1b00(0x1ab)];let _0x256140=[];newMessages[_0x1a1b00(0x1aa)](_0x6a5212=>{const _0x43e6de=_0x1a1b00;_0x6a5212[_0x43e6de(0x12d)]>_0x555371&&_0x256140[_0x43e6de(0xfd)](_0x6a5212);}),_0x256140[_0x1a1b00(0x2bf)]>0x0&&getAllClients()[_0x1a1b00(0x1aa)](_0x34bdd3=>{const _0x378bdc=_0x1a1b00;getSocket(_0x34bdd3['id'])[_0x378bdc(0x1eb)]('message',_0x256140);});}function _0xce32(){const _0x278379=['create','get-logs','callback','temporary\x20access\x20timeout','status\x20code\x20401','loadAsync','orders','exec','number','[ip-address]','Server','/on\x20-\x20start\x20bot(s)\x0a','stopped','function','static','help','includes','/output-000.log','https://api.ipify.org?format=json','production','telegram','clientip','sort','referer','store-settings','Ok,\x20will\x20send\x20order\x20notifications\x20only','Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation','\x1b[35m','telegramEnabled','test','endsWith','Backup\x20file\x20unzipped\x20and\x20stored','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','log','mtime','max','/upload-backup','allow','Error\x20details:','headless','store','pki','/start','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','send','sendMessage','randomBytes','close','Starting\x20new\x20bot\x20|\x20Bot\x20','type','resetpw_no','from',':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20','jszip','bcryptjs','Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?','index.html','telegramIpApproval','\x20mode','entries','remove','\x1b[34m','showname','success','telegramChatId','BCT','Disabled\x20Bot\x20','/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a','api-eu.mixpanel.com','temporary\x20access\x20rejected','initclient','launch','getMinutes','emitHistory','messages','101339GSYkff','parse','uuid','secure','|@|','access','file','-results.json','toggleBotMode','removeAllListeners','\x20>\x20','socket','Unauthorized\x20attempt\x20to\x20confirm\x20message','disable','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','yargs/yargs','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','stringify','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','127.0.0.1','Notifications\x20enabled','then','output-002.log','Unauthorized\x20attempt\x20to\x20store\x20configuration','sockets',',\x20must\x20be\x20a\x204\x20digit\x20number','/status\x20-\x20show\x20bot(s)\x20status\x0a','versions','update-bot','logout','existsSync','HTML','Restarting\x20Bot\x20','toIPv4Address','match','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','private','getFullYear','reinstall-bb','\x20(2)','\x20|\x20client:\x20...','filter','show','config/','mkdirSync','20xoqhgw','params','error','command','staging','init','16UliMOI','Notifications\x20disabled','Error\x20sending\x20','toIPv4MappedAddress','simple','auth','Login\x20rejected','forEach','lastmsgemitted','login2fa_reject_','************','bot-','connection','Starting\x20Balance\x20Bot\x20update','Ok,\x20will\x20send\x20alert\x20notifications\x20only','getUTCHours','getSeconds','warning','2FA\x20login\x20rejected','SIGTERM','login\x20not\x20required','store-configuration','\x1b[31m','remoteAddress','username','(((.+)+)+)+$','mode','toggle','Restore\x20process\x20confirmed',':\x20Bot\x20Mgr\x20>\x20','cancel-loading','login','ipaddr.js','post','apply','string','Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)','isValid','editMessageReplyMarkup','blacklist','Telegram\x20error:','toString','0.0.0','apiKey','Telegraf\x20error:','-config.json','hasOwnProperty','kind','exchange','add-bot','isIPv4MappedAddress','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','resetHistory','unlinkSync','binary','telegraf','\x20-\x20',')\x20|\x20Bot\x20','tempaccess_15_','get-portfolio','readdirSync','ipc','/:bot/configuration','Setting\x20access:\x20','Access\x20enabled\x20for\x20','reload','login\x20required','telegramToken','Deleted\x20Bot\x20','/help\x20-\x20show\x20available\x20commands\x0a','output-003.log','#RED#Balance\x20Bot\x20is\x20already\x20running\x20on\x20port\x20','emit','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?','version.json','listen','search','temp/','sendFile','pidExpireLogin','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','accept','logged\x20out','Unauthorized\x20attempt\x20to\x20add\x20bot','\x20|\x20user:\x20...','backup-full.zip','telegram2FaApproval','reject','reinstall_yes','whitelist','privateKeyToPem','headers','publicKey','delete-bot','new-disabled','2FA','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','timestamp','Starting\x20(','backup-full@','start','logs','yes','copyFileSync','telegramEvents','update','data','Error\x20removing\x20old\x20backup\x20files:','mixpanel','f2aRequired','disconnect','get-starting-balances','createWriteStream','split','Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled','createServer','output-000.log','bb-settings.json','Yes','Session\x20expired\x20for\x20user\x20...','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','find','backup','DEFLATE','alerts','sortBy','settings','\x20minutes','login\x20token\x20valid','Bot\x20Mgr\x20>\x20','jsonwebtoken','195642FPNvxU','secret','No\x20authentication\x20token','keys','readFileSync','timeshift','inlineKeyboard','Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot',')\x20\x20\x20|\x20Bot\x20','restore_yes_','token','All\x20bots','placeOrder','The\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','reinstall','server','startsWith','toggle-bot-mode','port','manual','node','verify','Unauthorized\x20attempt\x20to\x20delete\x20bot','action','update_yes','onepagemode','marketcapApi','6b67f3d61ee94b8f5c80b4affef4c4d9','botmanager','uuid-random','inherit','Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files','temporary\x20token\x20generated','debug','tempaccess_30_','host','alias','/download/:type','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run','isDirectory','reason','Restore\x20process\x20aborted','use','connected','15\x20min','$1_$2_$3','name','botname','Error:\x20Invalid\x20argument\x20','tempaccess_5_','assign','apiPassword','decrypt','/restart\x20-\x20restart\x20bot(s)\x0a','Unauthorized\x20attempt\x20to\x20update\x20bot','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','off_','42738eEQirP','login\x20token\x20generated','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','handshake','live','/enable\x20-\x20enable\x20notifications\x0a','9065345sWggqm','crypto','Unauthorized\x20attempt\x20to\x20get\x20messages','environment','Starting\x20Balance\x20Bot\x20reinstallation','5\x20min','node-forge','telegramUsername','rsa','tempaccess_reject_','http','update_no','store-fiat','Logged\x20out\x20user\x20...','set','/names\x20-\x20show\x20bot\x20names\x0a','config_orders','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run','util','bb-secure.json','3825962gezTwP','request','replyWithDocument','sha256','reinstall_no','showConfig','Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history','settings.','--------------------------------------','internal','portfolio','update-bb','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','Error\x20while\x20deleting\x20config\x20files:\x20','exit','build','backup-full','/metrics\x20-\x20show\x20bot\x20performance\x0a','auto','Notifications\x20disabled\x0a','defaults','bots','\x1b[36m',':\x20Bot\x20Mgr\x20>\x20Telegram\x20error\x20occured','map','/:bot/coins','-----------------------------------------------------------------------------------','format','getMonth','delete-alerts','getTime','temporary\x20access\x20not\x20allowed','Restoring\x20bot(s)\x20from\x20backup','password','store-headless','reset-history','\x20only\x0a','NTBA_FIX_319','generateKeyPair','invalid\x20credentials','::ffff:127.0.0.1','config','-performance.json','fork','child_process','statSync','30\x20min','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','9CzbKiK','\x20(1)','enabled','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)','loginRequired','axios','Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot','#RES#\x20if\x20running\x20locally\x0a','Markdown','enable','1284892WnFCOg','join','kill','get','restart_','storeConfiguration','clients','toggle_','Unauthorized\x20attempt\x20to\x20show\x20configuration','sign','metrics','length','Logged\x20in\x20user\x20...','button','all','config_all','***','Enabled\x20Bot\x20','slice','output-001.log','cancelLoading','telegrammsg','Network\x20Interfaces:','size','show-config','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20','latestversion','Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file','env','2FA\x20required','Unauthorized\x20attempt\x20to\x20log\x20out','bbvNew','lastmsgtelegram','Notifications\x20enabled\x0a','bot','order','track','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','storeHeadless','/logs\x20-\x20receive\x20log\x20files\x0a','User\x20has\x20been\x20validated','/:bot/performance','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20see\x20logs\x20for\x20details','sendPortfolioTelegram','writeFileSync','\x1b[0m','event','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','new','3000','/:bot/portfolio','bbUsername','off','config_alerts','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','express-fileupload','apiSecret','<b>Telegram\x20Bot\x20Status:</b>\x0a','bb-config.json','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','socket.io','/:bot/support','reply','8297542CcxQOp','_nsps','chat','pidRefreshToken','cloneDeep','write','replace','expiry','bbvReceive','.zip','\x20files\x20over\x20Telegram:','on_','once','files','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','Orders','full','1000','logs/','rmSync','No\x20bots\x20running\x20right\x20now','padStart','running','getDate','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','decode64','temporaryAccessAllowed','access\x20timeout','Token\x20blacklisted','notification','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','storeFiat','getHours','disabled','Unauthorized\x20attempt\x20to\x20download\x20','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','push','zip/','bbPassword','All\x20bots\x20running\x20right\x20now','Invalid\x20authentication\x20token\x20(1)','#RES#\x20','Your\x20installation\x20is\x20already\x20up\x20to\x20date','Invalid\x20authentication\x20token\x20(2)','Password\x20reset\x20rejected','tkn','<b>Balance\x20Bot\x20Status:</b>\x0a','stop','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','restore_no_','build2','(staging)','names','/:bot/history','SIGINT','confirm-message','status','download','value','path','address','ETH','privateKey','text','/update\x20-\x20update\x20Balance\x20Bot\x0a','botID','argv','\x20|\x20','hashSync','Bot\x20','message','catch','6kadQtM','-events.json','resetpw_yes','restart'];_0xce32=function(){return _0x278379;};return _0xce32();}function confirmMessage(_0xf060f5){updateSetting('lastmsgemitted',Number(_0xf060f5));}function isNewerVersion(_0x42dae8,_0x3af54f){const _0x31461d=_0x32b3bf,_0x5ed840=_0x3af54f[_0x31461d(0x214)]('.'),_0x2610bd=_0x42dae8[_0x31461d(0x214)]('.');for(var _0x5a5ae2=0x0;_0x5a5ae2<_0x2610bd[_0x31461d(0x2bf)];_0x5a5ae2++){const _0x34425c=~~_0x2610bd[_0x5a5ae2],_0x6243b0=~~_0x5ed840[_0x5a5ae2];if(_0x34425c>_0x6243b0)return!![];if(_0x34425c<_0x6243b0)return![];}return![];}function toTelegramMarkdown(_0x5127b1){const _0x325429=_0x32b3bf,_0x569096=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x566d72=/\*{2}(.+?)\*{2}/gim;return _0x5127b1=_0x5127b1[_0x325429(0x2f9)](_0x569096,_0x325429(0x253))[_0x325429(0x2f9)](_0x566d72,'*$1*'),_0x5127b1;}async function validateConfigFile(){const _0x525b89=_0x32b3bf,_0x1ddeae=dbConfig['get'](_0x525b89(0x28e))[_0x525b89(0x220)](_0x525b89(0x11a))[_0x525b89(0x113)]()||[];if(_0x1ddeae[_0x525b89(0x2bf)]==0x0){let _0x375150=0x0,_0x5c7250=[];const _0x547dea=/^bot-([0-9]{3})-config.json$/,_0x3e3b00=fs[_0x525b89(0x1df)](configpath);_0x3e3b00[_0x525b89(0x1aa)](_0x1169be=>{const _0x14f084=_0x525b89,_0x4a12dd=_0x547dea[_0x14f084(0x12c)](_0x1169be);if(_0x4a12dd){const _0x42344a=_0x4a12dd[0x1];let _0xad0afe=getBotAttributes(_0x42344a);_0x5c7250[_0x14f084(0xfd)]({'botID':_0x42344a,'botname':_0xad0afe[_0x14f084(0x255)],'status':'disabled','live':_0x14f084(0x131)}),_0x375150++;}}),_0x375150!=0x0&&(dbConfig[_0x525b89(0x2b7)](_0x525b89(0x28e))['assign'](_0x5c7250)['write'](),config=_0x5c7250,restoredConfigFile=_0x375150);}}async function restoreConfigNotify(_0x522855){const _0x99f2f6=_0x32b3bf;let _0x4d0376;if(restoredConfigFile==0x1)_0x4d0376=_0x99f2f6(0x24c);else _0x4d0376=_0x99f2f6(0x276);if(_0x522855)io['to'](_0x99f2f6(0x242))['emit']('notification',_0x4d0376);else{logger[_0x99f2f6(0x1a7)](_0x99f2f6(0x293)),logger['simple'](_0x4d0376),logger[_0x99f2f6(0x1a7)]('-----------------------------------------------------------------------------------'),logger[_0x99f2f6(0x1a7)]('');if(tgBot&&settings[_0x99f2f6(0x165)]&&settings[_0x99f2f6(0x20b)]!=_0x99f2f6(0x12b))await sendTelegram(settings[_0x99f2f6(0x165)],_0x99f2f6(0x224)+_0x4d0376);}}function decryptRSA(_0x54db7e,_0x2468d0){const _0x599472=_0x32b3bf,_0x2af3c4=forge[_0x599472(0x14e)]['privateKeyFromPem'](_0x54db7e),_0x38283e=_0x2af3c4[_0x599472(0x25a)](forge[_0x599472(0x277)][_0x599472(0xf2)](_0x2468d0),'RSA-OAEP',{'md':forge['md'][_0x599472(0x27c)]['create'](),'mgf1':{'md':forge['md']['sha256'][_0x599472(0x125)]()}});return _0x38283e;}function validateCredentials(_0x342c70,_0xfd77a6){const _0x323e48=_0x32b3bf;if(_0x342c70[_0x323e48(0x1bb)]==settings[_0x323e48(0x2e7)]&&bcrypt['compareSync'](_0x342c70[_0x323e48(0x29a)],settings[_0x323e48(0xff)])){if(settings[_0x323e48(0x210)])return{'allow':![],'reason':'2FA\x20login\x20required','token':null};else{const _0x453829=generateLoginToken(_0xfd77a6);return{'allow':!![],'reason':_0x323e48(0x260),'token':_0x453829};}}else return{'allow':![],'reason':_0x323e48(0x2a0),'token':null};}function refreshToken(_0x15cd50){const _0x21ccdb=_0x32b3bf,_0x4d299b=generateLoginToken(_0x15cd50);return{'allow':!![],'reason':_0x21ccdb(0x260),'token':_0x4d299b};}function validateAccess(_0x472e3e,_0x42455a,_0x22dfc1){const _0x3f3f89=_0x32b3bf,_0x3e5ff2=_0x22dfc1?_0x22dfc1:devices[_0x42455a]['ip'];let _0x35792a;const _0x3c56d5=_0x2d8995=>{const _0x260876=_0x3a44;if(settings[_0x260876(0x2ae)]){if(settings['f2aRequired']){if(telegram2FaApproved(_0x42455a)){const _0x3aea92=generateLoginToken(_0x42455a);return{'allow':!![],'reason':'2FA\x20login\x20token\x20generated','token':_0x3aea92};}else return{'allow':![],'reason':'login\x20required','token':null};}else return _0x35792a=validToken(_0x2d8995,_0x42455a),_0x35792a[_0x260876(0x1d1)]('success')?{'allow':!![],'reason':_0x260876(0x223),'token':_0x2d8995}:{'allow':![],'reason':_0x260876(0x1e5),'token':null};}else return{'allow':!![],'reason':'login\x20not\x20required','token':null};};if(settings['whitelistEnabled']){let _0x4fe5fc=[...settings[_0x3f3f89(0x1fc)],'::1',_0x3f3f89(0x2a1),_0x3f3f89(0x183)];if(_0x4fe5fc[_0x3f3f89(0x135)](_0x3e5ff2))return _0x3c56d5(_0x472e3e);else{_0x35792a=validToken(_0x472e3e,_0x42455a);if(_0x35792a[_0x3f3f89(0x1d1)](_0x3f3f89(0x164)))return _0x3c56d5(_0x472e3e);else{if(telegramIpApproved(_0x42455a)){const _0x71a0e9=generateToken(_0x42455a);return _0x35792a=_0x3c56d5(_0x472e3e),_0x35792a[_0x3f3f89(0x14a)]?{'allow':!![],'reason':_0x3f3f89(0x246),'token':_0x71a0e9}:_0x35792a;}else return settings[_0x3f3f89(0xf3)]?{'allow':![],'reason':'2FA\x20required','token':null}:{'allow':![],'reason':_0x3f3f89(0x298),'token':null};}}}else return _0x3c56d5(_0x472e3e);}function timelyDecrypt(_0x36b335,_0x1ac21d,_0x4693b1='@'){const _0x300fb8=_0x32b3bf;if(_0x36b335)try{const _0x23e671=decryptRSA(secure[_0x300fb8(0x117)],_0x36b335),_0x135cbf=_0x23e671['split'](_0x4693b1)[0x0],_0x193075=_0x23e671[_0x300fb8(0x214)](_0x4693b1)[0x1],_0x4ab72=new Date()[_0x300fb8(0x297)]();if(_0x1ac21d){if(_0x4ab72-_0x193075<maxSecretAge*0x3e8)return _0x135cbf;else return![];}else return _0x135cbf;}catch(_0x2b3947){return![];}else return![];}const validToken=(_0x3d9c7c,_0x418927)=>{const _0x45a80b=_0x32b3bf,_0x106441=devices[_0x418927]['ip'];if(!_0x3d9c7c)return{'error':_0x45a80b(0x228)};for(let _0x4b5f24 of blacklist){if(_0x4b5f24[_0x45a80b(0x230)]==_0x3d9c7c)return{'error':_0x45a80b(0xf5)};}let _0x82d6d5;try{_0x82d6d5=jwt[_0x45a80b(0x23b)](_0x3d9c7c,secure['secret']+_0x418927);}catch{return{'error':_0x45a80b(0x101)};}if(!_0x82d6d5[_0x45a80b(0x1d1)](_0x45a80b(0x13a))&&!_0x82d6d5[_0x45a80b(0x1d1)]('username')||!_0x82d6d5[_0x45a80b(0x1d1)]('exp'))return{'error':_0x45a80b(0x104)};if(!_0x82d6d5['hasOwnProperty']('username')&&_0x82d6d5[_0x45a80b(0x1d1)]('clientip')){const {clientip:_0x193e75}=_0x82d6d5;return _0x106441==_0x193e75?{'success':_0x45a80b(0x2dc)}:{'error':'Invalid\x20IP\x20address'};}else{if(_0x82d6d5[_0x45a80b(0x1d1)]('username')&&_0x82d6d5[_0x45a80b(0x1d1)](_0x45a80b(0x13a))){const {username:_0x4e9266,clientip:_0x3becf7}=_0x82d6d5;return settings[_0x45a80b(0x2e7)]==_0x4e9266&&_0x106441==_0x3becf7?{'success':_0x45a80b(0x2dc)}:{'error':'Invalid\x20username\x20or\x20IP\x20address'};}}},generateLoginToken=_0x1cbb7d=>{const _0x5c0286=_0x32b3bf;if(_0x1cbb7d){const _0x510fd7=devices[_0x1cbb7d]['ip'];return jwt[_0x5c0286(0x2bd)]({'username':settings[_0x5c0286(0x2e7)],'clientip':_0x510fd7},secure[_0x5c0286(0x227)]+_0x1cbb7d,{'expiresIn':tokenRefresh*0x3c,'allowInsecureKeySizes':!![]});}else return![];},generateToken=_0x575289=>{const _0x5a57c8=_0x32b3bf;if(_0x575289){const _0x535cd6=devices[_0x575289]['ip'];return jwt[_0x5a57c8(0x2bd)]({'clientip':_0x535cd6},secure[_0x5a57c8(0x227)]+_0x575289,{'expiresIn':devices[_0x575289][_0x5a57c8(0x15e)][_0x5a57c8(0x2fa)]*0x3c,'allowInsecureKeySizes':!![]});}else return![];},telegramIpApproved=_0x385fd8=>{const _0x34156a=_0x32b3bf;let _0x3ce16f=![];return devices[_0x385fd8][_0x34156a(0x15e)]&&devices[_0x385fd8][_0x34156a(0x15e)][_0x34156a(0x2fa)]!='reject'&&(_0x3ce16f=devices[_0x385fd8]['telegramIpApproval'][_0x34156a(0x13a)]==devices[_0x385fd8]['ip']&&new Date()[_0x34156a(0x297)]()-devices[_0x385fd8][_0x34156a(0x15e)][_0x34156a(0x204)]<devices[_0x385fd8][_0x34156a(0x15e)][_0x34156a(0x2fa)]*0x3c*0x3e8),_0x3ce16f;},telegram2FaApproved=_0x430551=>{const _0x448db8=_0x32b3bf;let _0x5c88cd=![];return devices[_0x430551][_0x448db8(0x1f9)]&&devices[_0x430551]['telegram2FaApproval'][_0x448db8(0x2fa)]!=_0x448db8(0x1fa)&&(_0x5c88cd=devices[_0x430551][_0x448db8(0x1f9)][_0x448db8(0x13a)]==devices[_0x430551]['ip']&&new Date()['getTime']()-devices[_0x430551][_0x448db8(0x1f9)][_0x448db8(0x204)]<devices[_0x430551]['telegram2FaApproval']['expiry']*0x3c*0x3e8),_0x5c88cd;},normalizeIP=_0x346a8e=>{const _0x5885bb=_0x32b3bf;let _0x3ba54c=null,_0x4645be=null;if(ipaddr[_0x5885bb(0x1c8)](_0x346a8e)){const _0x426f0e=ipaddr[_0x5885bb(0x171)](_0x346a8e);_0x426f0e[_0x5885bb(0x1d2)]()==='ipv6'?(_0x426f0e[_0x5885bb(0x1d5)]()&&(_0x3ba54c=_0x426f0e[_0x5885bb(0x191)]()[_0x5885bb(0x1cc)]()),_0x4645be=_0x426f0e[_0x5885bb(0x1cc)]()):(_0x3ba54c=_0x426f0e[_0x5885bb(0x1cc)](),_0x4645be=_0x426f0e[_0x5885bb(0x1a6)]()[_0x5885bb(0x1cc)]());}return{'show':_0x3ba54c?_0x3ba54c:_0x4645be,'store':_0x4645be};};function formatDate(_0x262102){const _0x489b0b=_0x32b3bf;return _0x262102['getFullYear']()+'/'+(_0x262102[_0x489b0b(0x295)]()+0x1)[_0x489b0b(0x1cc)]()[_0x489b0b(0x308)](0x2,'0')+'/'+_0x262102[_0x489b0b(0xf0)]()[_0x489b0b(0x1cc)]()['padStart'](0x2,'0')+'\x20'+_0x262102['getHours']()[_0x489b0b(0x1cc)]()[_0x489b0b(0x308)](0x2,'0')+':'+_0x262102['getMinutes']()['toString']()[_0x489b0b(0x308)](0x2,'0')+':'+_0x262102[_0x489b0b(0x1b3)]()[_0x489b0b(0x1cc)]()[_0x489b0b(0x308)](0x2,'0');}function sleep(_0x3973b3){return new Promise(_0x2cb1d3=>setTimeout(_0x2cb1d3,_0x3973b3));}