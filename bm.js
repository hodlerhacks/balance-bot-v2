const _0x47af02=_0x25a8;(function(_0x5e3316,_0x3fcd13){const _0x131819=_0x25a8,_0x289ee9=_0x5e3316();while(!![]){try{const _0x299e4b=-parseInt(_0x131819(0x280))/0x1+-parseInt(_0x131819(0x1e2))/0x2*(parseInt(_0x131819(0x18d))/0x3)+parseInt(_0x131819(0x2f8))/0x4+parseInt(_0x131819(0x355))/0x5*(parseInt(_0x131819(0x260))/0x6)+-parseInt(_0x131819(0x23b))/0x7+parseInt(_0x131819(0x2ae))/0x8*(-parseInt(_0x131819(0x32b))/0x9)+parseInt(_0x131819(0x1e4))/0xa;if(_0x299e4b===_0x3fcd13)break;else _0x289ee9['push'](_0x289ee9['shift']());}catch(_0x53a121){_0x289ee9['push'](_0x289ee9['shift']());}}}(_0x4f45,0x673fd));const _0x284ae0=function(){let _0x12db20=!![];return function(_0x1f524e,_0xa41539){const _0x2e639c=_0x12db20?function(){if(_0xa41539){const _0x151b7b=_0xa41539['apply'](_0x1f524e,arguments);return _0xa41539=null,_0x151b7b;}}:function(){};return _0x12db20=![],_0x2e639c;};}(),_0x51c968=_0x284ae0(this,function(){const _0x136411=_0x25a8;return _0x51c968['toString']()[_0x136411(0x20e)]('(((.+)+)+)+$')['toString']()[_0x136411(0x324)](_0x51c968)[_0x136411(0x20e)](_0x136411(0x18f));});_0x51c968();'use strict';process['env'][_0x47af02(0x17c)]=0x1;const childProcess=require(_0x47af02(0x259)),fs=require('fs'),fns=require(_0x47af02(0x21c)),low=require(_0x47af02(0x27f)),FileSync=require(_0x47af02(0x278)),path=require(_0x47af02(0x2d0)),crypto=require('crypto'),forge=require(_0x47af02(0x1cb)),bcrypt=require(_0x47af02(0x27e)),jwt=require(_0x47af02(0x300)),ipaddr=require(_0x47af02(0x2e4)),argv=require(_0x47af02(0x34a))(process[_0x47af02(0x192)]['slice'](0x2))[_0x47af02(0x192)],uuidRandom=require(_0x47af02(0x184)),{Telegraf,Markup}=require('telegraf'),Mixpanel=require('mixpanel'),axios=require(_0x47af02(0x2bc)),{GraphQLClient,gql}=require(_0x47af02(0x29f)),util=require(_0x47af02(0x22e)),fileUpload=require(_0x47af02(0x152)),{networkInterfaces}=require('os'),JSZip=require(_0x47af02(0x29e)),PORT=argv[_0x47af02(0x2ee)]||_0x47af02(0x194),pattern=/^[0-9]{2,4}$/;!pattern[_0x47af02(0x2ce)](PORT)&&(console[_0x47af02(0x318)](_0x47af02(0x34c)+PORT+_0x47af02(0x2fa)),process[_0x47af02(0x2eb)](0x1));const HOST=argv[_0x47af02(0x1ef)]||null,userID=argv[_0x47af02(0x28a)]||'',debugging=argv['d']||![],nodeversion=process[_0x47af02(0x31c)]['node'];let bbpath=_0x47af02(0x2fc),bbpath2='';const botfile=_0x47af02(0x21e),configfile='bb-config.json',settingsfile=_0x47af02(0x1c6),securefile='bb-secure.json',environment=require('./'+bbpath2+_0x47af02(0x254))['environment']||_0x47af02(0x24f),maxBackups=0xa;let validInstallation=!![];const schedulerInterval=0x3c*0x3c*0x3e8;!fs[_0x47af02(0x15b)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x47af02(0x27c)),configpath=userID?bbpath+_0x47af02(0x307)+userID+'/':bbpath+_0x47af02(0x307),configbackuppath=configpath+_0x47af02(0x28b),logspath=userID?bbpath+_0x47af02(0x2e0)+userID+'/':bbpath+_0x47af02(0x2e0),zippath=userID?bbpath+'zip/'+userID+'/':bbpath+_0x47af02(0x2aa),loggerfile=fs[_0x47af02(0x2fe)](logspath+_0x47af02(0x2d7),{'flags':'a'}),temppath=userID?bbpath+_0x47af02(0x250)+userID+'/':bbpath+_0x47af02(0x250);!fs[_0x47af02(0x15b)](configpath)&&fs[_0x47af02(0x2bb)](configpath);!fs[_0x47af02(0x15b)](configbackuppath)&&fs[_0x47af02(0x2bb)](configbackuppath);!fs['existsSync'](logspath)&&fs[_0x47af02(0x2bb)](logspath);!fs['existsSync'](zippath)&&fs[_0x47af02(0x2bb)](zippath);!fs[_0x47af02(0x15b)](temppath)&&fs[_0x47af02(0x2bb)](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x47af02(0x2f1)]({'bots':[]})[_0x47af02(0x1fd)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x47af02(0x2f1)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':'0.0.0','onepagemode':![],'marketcapApi':''}})['write']();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x47af02(0x2f1)]({'secure':{},'blacklist':[]})['write']();const saltRounds=0xa,mixpanel=Mixpanel[_0x47af02(0x2cd)](_0x47af02(0x206),{'host':_0x47af02(0x2be)});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings[_0x47af02(0x14f)]&&(settings[_0x47af02(0x14f)]!=''&&settings['telegramToken']!=_0x47af02(0x1ca))&&settings['telegramUsername']&&settings[_0x47af02(0x343)]!='')initTelegram();const parseColor=(_0x126bbd,_0x166db0)=>{const _0x597ec8=_0x47af02,_0x5d40fa=/#[A-Z]{3}#/g;if(typeof _0x126bbd==_0x597ec8(0x1ce)){!_0x166db0?_0x126bbd=_0x126bbd[_0x597ec8(0x2b3)](_0x5d40fa,''):(_0x126bbd=_0x126bbd[_0x597ec8(0x2b3)](/#BLU#/g,_0x597ec8(0x2a4)),_0x126bbd=_0x126bbd[_0x597ec8(0x2b3)](/#RED#/g,_0x597ec8(0x2e1)),_0x126bbd=_0x126bbd[_0x597ec8(0x2b3)](/#YEL#/g,_0x597ec8(0x273)),_0x126bbd=_0x126bbd[_0x597ec8(0x2b3)](/#MAG#/g,_0x597ec8(0x344)),_0x126bbd=_0x126bbd[_0x597ec8(0x2b3)](/#CYA#/g,_0x597ec8(0x2e6)),_0x126bbd=_0x126bbd[_0x597ec8(0x2b3)](/#RES#/g,_0x597ec8(0x33a)));;}return _0x126bbd;},logger={'screen':_0x4103ac=>{console['log'](parseColor(_0x4103ac,!![]));},'simple':_0xb55ff7=>{const _0x18a123=_0x47af02;console['log'](parseColor(_0xb55ff7,!![])),loggerfile[_0x18a123(0x1fd)](util[_0x18a123(0x31b)](parseColor(_0xb55ff7,![]))+'\x0a');},'full':async _0x4fd40d=>{const _0x126bcb=_0x47af02,_0x52a306=getTimeStamp()+_0x126bcb(0x284)+_0x4fd40d;console[_0x126bcb(0x318)](parseColor(_0x52a306,!![])),loggerfile[_0x126bcb(0x1fd)](util['format'](parseColor(_0x52a306,![]))+'\x0a');if(tgBot&&settings[_0x126bcb(0x288)]&&settings[_0x126bcb(0x20a)]!=_0x126bcb(0x2d6))await sendTelegram(settings[_0x126bcb(0x288)],_0x126bcb(0x35f)+parseColor(_0x4fd40d,![]));},'debug':async(_0x13d64d,_0x3313a9='')=>{const _0x975669=_0x47af02,_0x17f245=getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20'+_0x13d64d;if(debugging)console[_0x975669(0x318)](parseColor(_0x17f245,!![]));loggerfile[_0x975669(0x1fd)](util['format'](parseColor(_0x17f245,![]))+'\x0a');if(_0x3313a9){if(debugging)console[_0x975669(0x318)](_0x3313a9);loggerfile[_0x975669(0x1fd)](util['format'](_0x3313a9)+'\x0a');}}};let terminating=![];process['on'](_0x47af02(0x360),function(_0x3c1da6){const _0x34ac41=_0x47af02;_0x3c1da6[_0x34ac41(0x1ac)]()[_0x34ac41(0x197)]('address\x20already\x20in\x20use')?(logger[_0x34ac41(0x2df)](_0x34ac41(0x1af)+_0x3c1da6['port']+_0x34ac41(0x1c9)),process[_0x34ac41(0x349)]({'terminate':!![]},_0x419b18=>{})):logger['simple'](_0x3c1da6);}),process['on']('exit',()=>{const _0x126481=_0x47af02;stopAllBots(),process[_0x126481(0x2eb)](0x0);}),process['on'](_0x47af02(0x2cf),()=>{const _0x2935b9=_0x47af02;stopAllBots(),process[_0x2935b9(0x2eb)](0x0);}),process['on'](_0x47af02(0x2a7),()=>{stopAllBots(),process['exit'](0x0);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x47af02(0x254))['version'],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let tmpStorage={},devices=[],lastIpApproval,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0x47af02(0x30a)),app=express(),http=require(_0x47af02(0x2b9))[_0x47af02(0x1fe)](app);app[_0x47af02(0x2a2)](fileUpload({'useTempFiles':!![]})),app['get'](_0x47af02(0x1de),async(_0x1a3d30,_0x3565e1)=>{const _0x560ff2=_0x47af02,_0x511d3e=_0x1a3d30[_0x560ff2(0x2ea)][_0x560ff2(0x218)],_0x474aee=getClientsWithBotID(_0x560ff2(0x1cf)),_0x4f373d=_0x1a3d30[_0x560ff2(0x1a4)][_0x560ff2(0x2a3)],_0x3f63cd=timelyDecrypt(_0x4f373d,![]),_0x2ea0bb=_0x474aee['find'](_0x24dfe2=>_0x24dfe2['uuid']==_0x3f63cd);if(_0x2ea0bb){const _0x1c8f20=normalizeIP(_0x1a3d30[_0x560ff2(0x144)][_0x560ff2(0x221)])[_0x560ff2(0x1a7)],_0x3415e1=_0x1a3d30[_0x560ff2(0x1a4)][_0x560ff2(0x2f6)];if(validateAccess(_0x3415e1,_0x3f63cd,_0x1c8f20)[_0x560ff2(0x2d4)])_0x511d3e==_0x560ff2(0x1e7)&&await backupConfigFiles(),await zipFiles(_0x511d3e),_0x3565e1[_0x560ff2(0x257)](zippath+(_0x511d3e+_0x560ff2(0x1ad)),_0x477b29=>{const _0x3c4220=_0x560ff2;_0x477b29&&(logger[_0x3c4220(0x333)](_0x3c4220(0x213)+_0x511d3e),logger[_0x3c4220(0x2df)](_0x477b29));});else logger['full'](_0x560ff2(0x35a)+_0x511d3e+_0x560ff2(0x268));}else logger[_0x560ff2(0x333)]('Unauthorized\x20attempt\x20to\x20download\x20'+_0x511d3e+_0x560ff2(0x154));}),app[_0x47af02(0x167)](_0x47af02(0x25f),async(_0x57314f,_0x26ecfe)=>{const _0x53d7f0=_0x47af02,_0x58febf=getClientsWithBotID('botmanager'),_0x3de006=_0x57314f[_0x53d7f0(0x1a4)][_0x53d7f0(0x2a3)],_0x5a3f83=timelyDecrypt(_0x3de006,![]),_0x33f01=_0x58febf['find'](_0x32a1af=>_0x32a1af[_0x53d7f0(0x2a3)]==_0x5a3f83);logger['debug'](_0x53d7f0(0x1c5));if(_0x33f01){const _0x2c873e=normalizeIP(_0x57314f[_0x53d7f0(0x144)][_0x53d7f0(0x221)])[_0x53d7f0(0x1a7)],_0x445a3d=_0x57314f[_0x53d7f0(0x1a4)][_0x53d7f0(0x2f6)];if(validateAccess(_0x445a3d,_0x5a3f83,_0x2c873e)['allow']){if(_0x57314f[_0x53d7f0(0x1c2)]){const _0x3515f6=_0x57314f['files']['backupfile'];await _0x3515f6['mv'](temppath+_0x3515f6[_0x53d7f0(0x25a)]),_0x26ecfe['send']({'status':!![],'message':_0x53d7f0(0x31f)});const _0x35bf00=getBotsWithMode();_0x35bf00[_0x53d7f0(0x296)]>0x0?confirmRestore(temppath,_0x3515f6[_0x53d7f0(0x25a)]):unzipFile(temppath,_0x3515f6[_0x53d7f0(0x25a)]);}}else logger[_0x53d7f0(0x333)](_0x53d7f0(0x2b4));}else logger[_0x53d7f0(0x333)](_0x53d7f0(0x1e3));}),app[_0x47af02(0x2a2)](express['static'](path[_0x47af02(0x1f0)](__dirname,bbpath2,_0x47af02(0x1f8)))),app['use'](express[_0x47af02(0x2c8)](path[_0x47af02(0x1f0)](__dirname,bbpath2,_0x47af02(0x27d)))),app['get']('/',function(_0x132332,_0x2e7a3e){const _0x318d17=_0x47af02;_0x2e7a3e[_0x318d17(0x1e6)](path[_0x318d17(0x1f0)](__dirname,bbpath2,_0x318d17(0x1f8),_0x318d17(0x2b8)));}),app[_0x47af02(0x1ab)](_0x47af02(0x24a),function(_0x2f267f,_0x281ae6){const _0x4d639f=_0x47af02;_0x281ae6[_0x4d639f(0x1e6)](path['join'](__dirname,bbpath2,_0x4d639f(0x27d),_0x4d639f(0x2b8)));}),app[_0x47af02(0x1ab)](_0x47af02(0x1d5),(_0x36f801,_0x4f4923)=>{const _0x19ea8b=_0x47af02;_0x4f4923[_0x19ea8b(0x1e6)](path['join'](__dirname,bbpath2,_0x19ea8b(0x27d),_0x19ea8b(0x2b8)));}),app['get'](_0x47af02(0x261),(_0x273c7e,_0x24e73b)=>{const _0x19581b=_0x47af02;_0x24e73b['sendFile'](path['join'](__dirname,bbpath2,_0x19581b(0x27d),_0x19581b(0x2b8)));}),app['get'](_0x47af02(0x329),(_0x3cd5b5,_0x159cfd)=>{const _0x288604=_0x47af02;_0x159cfd[_0x288604(0x1e6)](path[_0x288604(0x1f0)](__dirname,bbpath2,_0x288604(0x27d),_0x288604(0x2b8)));}),app[_0x47af02(0x1ab)](_0x47af02(0x29a),(_0x19eedb,_0x469824)=>{const _0x3c8fdf=_0x47af02;_0x469824[_0x3c8fdf(0x1e6)](path['join'](__dirname,bbpath2,_0x3c8fdf(0x27d),_0x3c8fdf(0x2b8)));}),app['get'](_0x47af02(0x245),(_0x11b701,_0x3ffae2)=>{const _0x3c6cc9=_0x47af02;_0x3ffae2[_0x3c6cc9(0x1e6)](path['join'](__dirname,bbpath2,_0x3c6cc9(0x27d),'index.html'));}),app[_0x47af02(0x1ab)]('/:bot/support',(_0x5857f0,_0x139ab2)=>{const _0x7e099d=_0x47af02;_0x139ab2['sendFile'](path[_0x7e099d(0x1f0)](__dirname,bbpath2,_0x7e099d(0x27d),_0x7e099d(0x2b8)));});if(HOST)http['listen'](PORT,HOST);else http[_0x47af02(0x1e8)](PORT);const io=require(_0x47af02(0x274))(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}function getServerIP(){const _0x1679dd=_0x47af02;let _0x3af138=_0x1679dd(0x2c5);const _0x38d4c5=networkInterfaces(),_0xe5774c={};for(const _0x216b2e of Object['keys'](_0x38d4c5)){for(const _0x31d5a8 of _0x38d4c5[_0x216b2e]){if((_0x31d5a8[_0x1679dd(0x29c)]==_0x1679dd(0x171)||_0x31d5a8[_0x1679dd(0x29c)]==0x4)&&!_0x31d5a8[_0x1679dd(0x272)]){const _0x11c182=ipaddr[_0x1679dd(0x23c)](_0x31d5a8[_0x1679dd(0x247)])[_0x1679dd(0x325)]();_0x11c182!=_0x1679dd(0x21d)&&(!_0xe5774c[_0x216b2e]&&(_0xe5774c[_0x216b2e]=[]),_0xe5774c[_0x216b2e]['push'](_0x31d5a8['address']),_0x3af138=_0x31d5a8['address']);}}}return{'serverip':_0x3af138,'netinterfaces':_0xe5774c};}async function startServer(){const _0x2f9e70=_0x47af02,{serverip:_0x16ddc2,netinterfaces:_0x103297}=getServerIP();logger['simple'](''),logger['simple'](_0x2f9e70(0x14c)),await logger[_0x2f9e70(0x333)](_0x2f9e70(0x2d2)+serverversion+'#RES#\x20'+(environment=='staging'?_0x2f9e70(0x28d):'')+'\x0a'+(_0x2f9e70(0x2e9)+PORT+_0x2f9e70(0x1fc))+(_0x2f9e70(0x165)+_0x16ddc2+':'+PORT+_0x2f9e70(0x180))),logger['simple'](_0x2f9e70(0x14c));if(config[_0x2f9e70(0x296)]!=0x0)for(const _0xc60373 of config){const _0x186efa=_0xc60373['mode']==_0x2f9e70(0x2de)?'a':'m';if(_0xc60373['status']=='enabled'||_0xc60373[_0x2f9e70(0x2fd)]==_0x2f9e70(0x2db))await logger[_0x2f9e70(0x333)](_0x2f9e70(0x17a)+_0x186efa+_0x2f9e70(0x306)+_0xc60373[_0x2f9e70(0x147)]+_0x2f9e70(0x219)+_0xc60373['botname']),startBot([_0xc60373[_0x2f9e70(0x147)],userID],{'cwd':bbpath},function(_0x253811){const _0x343269=_0x2f9e70;if(_0x253811)logger[_0x343269(0x333)](_0x253811);});else(_0xc60373[_0x2f9e70(0x2fd)]=='disabled'||_0xc60373['status']==_0x2f9e70(0x2b0))&&await logger[_0x2f9e70(0x333)](_0x2f9e70(0x1da)+_0x186efa+_0x2f9e70(0x313)+_0xc60373[_0x2f9e70(0x147)]+'\x20|\x20'+_0xc60373['botname']);}else!newBot&&logger['simple'](_0x2f9e70(0x210));if(newBot)addBot();logger[_0x2f9e70(0x2df)](_0x2f9e70(0x14c)),logger[_0x2f9e70(0x2df)](''),await logger[_0x2f9e70(0x33e)](_0x2f9e70(0x34b)+nodeversion),await logger[_0x2f9e70(0x33e)](_0x2f9e70(0x311),_0x103297);}function startSocket(){io['on']('connection',_0xa2a46b=>{const _0x127b89=_0x25a8;let _0x5a8fe0,_0x42e046,_0x401399,_0x1b2c2b,_0x481bd5;const _0x3321c2=_0xa2a46b[_0x127b89(0x2fb)][_0x127b89(0x1a4)]['referer'];_0x42e046=_0x3321c2[_0x127b89(0x1b8)](/bot[0-9]{3}/);if(_0x42e046)_0x401399=_0x42e046[0x0]['match'](/[0-9]{3}/);if(_0x401399)_0x5a8fe0=_0x401399[0x0];else _0x5a8fe0=_0x127b89(0x1cf);const _0x5831c2=_0xa2a46b['handshake'][_0x127b89(0x26e)][_0x127b89(0x34d)];if(!_0x5831c2)_0xa2a46b['emit'](_0x127b89(0x2fd),{'publicKey':secure['publicKey']});else{_0x1b2c2b=timelyDecrypt(_0x5831c2,![]);if(!_0x1b2c2b)_0xa2a46b['emit'](_0x127b89(0x2fd),{'publicKey':secure['publicKey']});else{_0x481bd5=normalizeIP(_0xa2a46b[_0x127b89(0x27b)][_0x127b89(0x221)])[_0x127b89(0x1a7)];if(!devices[_0x1b2c2b])devices[_0x1b2c2b]={'uuid':_0x1b2c2b,'access':{'token':null}};devices[_0x1b2c2b]['ip']=_0x481bd5;const _0x58927=addClient(_0xa2a46b['id'],_0x1b2c2b,_0x5a8fe0);setAccess(_0x58927),emitMessages(),_0xa2a46b['on']('login',_0x3794dc=>{const _0x450d30=_0x127b89,_0x8ad7ee=timelyDecrypt(_0x3794dc[_0x450d30(0x2e7)],!![],_0x450d30(0x1fb));if(_0x8ad7ee){_0x3794dc={'username':_0x3794dc[_0x450d30(0x2e3)],'password':_0x8ad7ee},devices[_0x1b2c2b]['access']=validateCredentials(_0x3794dc,_0x1b2c2b);if(devices[_0x1b2c2b][_0x450d30(0x246)]['allow']==![]&&devices[_0x1b2c2b]['access']['reason']==_0x450d30(0x1c3))_0xa2a46b[_0x450d30(0x16a)](_0x450d30(0x2fd),{'access':devices[_0x1b2c2b]['access']}),loginAccess2FA(_0x1b2c2b,_0x481bd5);else{if(devices[_0x1b2c2b]['access'][_0x450d30(0x2d4)]==![]&&devices[_0x1b2c2b]['access'][_0x450d30(0x2f0)]=='invalid\x20credentials')_0xa2a46b[_0x450d30(0x16a)](_0x450d30(0x2fd),{'access':devices[_0x1b2c2b][_0x450d30(0x246)]});else devices[_0x1b2c2b]['access'][_0x450d30(0x2d4)]&&devices[_0x1b2c2b]['access'][_0x450d30(0x2f0)]=='login\x20token\x20generated'&&(getClientsWithUuid(_0x1b2c2b)[_0x450d30(0x185)](_0x5301b5=>{setAccess(_0x5301b5);}),logger[_0x450d30(0x33e)]('Logged\x20in\x20user\x20...'+_0x1b2c2b[_0x450d30(0x1c8)](-0x8)),setTokenRefresh(_0x1b2c2b),setSessionTimeout(_0x450d30(0x241),_0x1b2c2b));}}else logger[_0x450d30(0x333)](_0x450d30(0x279));}),_0xa2a46b['on'](_0x127b89(0x216),()=>{resetPassword();}),_0xa2a46b['on'](_0x127b89(0x1aa),_0x46af56=>{removeClient(_0xa2a46b['id']);}),_0x5a8fe0==_0x127b89(0x1cf)&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x131cc5){const _0x1dd9f5=_0x47af02;if(_0x131cc5!=_0x1dd9f5(0x1cf)&&config[_0x1dd9f5(0x2f7)]!=''){if(pid[_0x131cc5])pid[_0x131cc5][_0x1dd9f5(0x349)]({'function':_0x1dd9f5(0x211),'args':null});}_0x131cc5!='botmanager'&&broadcastToBots(_0x1dd9f5(0x253),JSON[_0x1dd9f5(0x2a1)](config));}function reloadBotManager(){const _0x12e600=_0x47af02;getClientsWithBotID(_0x12e600(0x1cf))[_0x12e600(0x185)](_0x440004=>{const _0x56f2ba=_0x12e600;getSocket(_0x440004['id'])[_0x56f2ba(0x16a)]('status',{'access':{'allow':![],'reason':_0x56f2ba(0x308),'token':null}});});}function getSocket(_0x357236){const _0x433010=_0x47af02,_0x359b83=io[_0x433010(0x196)]['get']('/');return _0x359b83[_0x433010(0x226)][_0x433010(0x1ab)](_0x357236);}function setAccess(_0x1185c9){const _0x3c7d77=_0x47af02,_0x5b78ce=getSocket(_0x1185c9['id']),_0x10facb=_0x1185c9[_0x3c7d77(0x2a3)],_0x2af191=_0x1185c9[_0x3c7d77(0x203)];devices[_0x10facb][_0x3c7d77(0x246)]=validateAccess(devices[_0x10facb][_0x3c7d77(0x246)][_0x3c7d77(0x31a)],_0x10facb),logger['debug'](_0x3c7d77(0x263)+devices[_0x10facb]['access'][_0x3c7d77(0x2f0)]+_0x3c7d77(0x2e5)+_0x1185c9['id']['slice'](-0x8)+_0x3c7d77(0x1f2)+_0x10facb[_0x3c7d77(0x1c8)](-0x8)),_0x5b78ce[_0x3c7d77(0x1f0)](_0x10facb);if(devices[_0x10facb][_0x3c7d77(0x246)]['allow']){_0x5b78ce[_0x3c7d77(0x1f0)](_0x2af191);if(_0x2af191=='botmanager')initializeSocketBotManager(_0x5b78ce);else initializeSocketBot(_0x5b78ce);initClient(_0x2af191);}devices[_0x10facb][_0x3c7d77(0x246)][_0x3c7d77(0x31a)]&&devices[_0x10facb][_0x3c7d77(0x246)][_0x3c7d77(0x2f0)]==_0x3c7d77(0x1a5)&&setSessionTimeout(_0x3c7d77(0x16d),_0x10facb),devices[_0x10facb][_0x3c7d77(0x246)][_0x3c7d77(0x31a)]&&devices[_0x10facb][_0x3c7d77(0x246)]['reason']==_0x3c7d77(0x316)&&setSessionTimeout(_0x3c7d77(0x241),_0x10facb),_0x5b78ce[_0x3c7d77(0x16a)](_0x3c7d77(0x2fd),{'status':_0x1185c9[_0x3c7d77(0x23d)],'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x10facb][_0x3c7d77(0x246)],'externalip':devices[_0x10facb]['ip'],'publicKey':secure[_0x3c7d77(0x1d2)],'userid':settings[_0x3c7d77(0x2ca)],'validInstallation':validInstallation}),devices[_0x10facb]['access']['allow']==![]&&devices[_0x10facb][_0x3c7d77(0x246)]['reason']==_0x3c7d77(0x22b)&&temporaryAccess2FA(_0x10facb,devices[_0x10facb]['ip']);}function setSessionTimeout(_0x522522,_0x101c4e){const _0xff449=_0x47af02;let _0x4f94df;if(_0x522522==_0xff449(0x241))_0x4f94df=loginExpiry*0x3c*0x3e8;else _0x4f94df=devices[_0x101c4e]['telegramIpApproval'][_0xff449(0x162)]*0x3c*0x3e8-(new Date()[_0xff449(0x1e9)]()-devices[_0x101c4e]['telegramIpApproval'][_0xff449(0x220)]);if(devices[_0x101c4e][_0xff449(0x327)])clearTimeout(devices[_0x101c4e][_0xff449(0x327)]);devices[_0x101c4e][_0xff449(0x327)]=setTimeout(()=>{const _0x2b04e4=_0xff449;if(devices[_0x101c4e][_0x2b04e4(0x338)])clearTimeout(devices[_0x101c4e][_0x2b04e4(0x338)]);removeSocketListeners(_0x101c4e),addBlacklist(_0x101c4e),devices[_0x101c4e][_0x2b04e4(0x18e)]=null,devices[_0x101c4e][_0x2b04e4(0x156)]=null,devices[_0x101c4e]['access']['token']=null,logger[_0x2b04e4(0x33e)](_0x2b04e4(0x239)+_0x101c4e['slice'](-0x8)),devices[_0x101c4e][_0x2b04e4(0x246)]=validateAccess(devices[_0x101c4e][_0x2b04e4(0x246)]['token'],_0x101c4e),!(devices[_0x101c4e][_0x2b04e4(0x246)][_0x2b04e4(0x2d4)]&&devices[_0x101c4e][_0x2b04e4(0x246)]['reason']==_0x2b04e4(0x204))&&(_0x522522==_0x2b04e4(0x241)?io['to'](_0x101c4e)[_0x2b04e4(0x16a)](_0x2b04e4(0x2fd),{'access':{'allow':![],'reason':'access\x20timeout','token':null}}):io['to'](_0x101c4e)['emit'](_0x2b04e4(0x2fd),{'access':{'allow':![],'reason':_0x2b04e4(0x321),'token':null}})),devices[_0x101c4e]['access'][_0x2b04e4(0x31a)]=null;},_0x4f94df);}function setTokenRefresh(_0x21e761){const _0x3357a1=_0x47af02;if(devices[_0x21e761]['pidRefreshToken'])clearTimeout(devices[_0x21e761][_0x3357a1(0x338)]);devices[_0x21e761]['pidRefreshToken']=setTimeout(()=>{const _0x7d6208=_0x3357a1;getClientsWithUuid(_0x21e761)[_0x7d6208(0x296)]!=0x0?(devices[_0x21e761]['access']=refreshToken(_0x21e761),io['to'](_0x21e761)[_0x7d6208(0x16a)](_0x7d6208(0x2fd),{'status':'connected','serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x21e761][_0x7d6208(0x246)],'externalip':devices[_0x21e761]['ip'],'publicKey':secure[_0x7d6208(0x1d2)],'validInstallation':validInstallation}),setTokenRefresh(_0x21e761)):clearTimeout(devices[_0x21e761][_0x7d6208(0x338)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x5e3eb0){const _0x2e0c21=_0x47af02,_0x480f97=getClient(_0x5e3eb0['id'])['uuid'];_0x5e3eb0[_0x2e0c21(0x16a)](_0x2e0c21(0x253),config),_0x5e3eb0[_0x2e0c21(0x16a)](_0x2e0c21(0x1ff),cleanSettings()),_0x5e3eb0['on'](_0x2e0c21(0x33b),_0x1055ea=>{const _0x183733=_0x2e0c21;if(validateAccess(_0x1055ea,_0x480f97)[_0x183733(0x2d4)])addBot();else logger[_0x183733(0x333)]('Unauthorized\x20attempt\x20to\x20add\x20bot');}),_0x5e3eb0['on'](_0x2e0c21(0x146),(_0x1776a0,_0x4aeca5)=>{const _0xed2dd4=_0x2e0c21;if(validateAccess(_0x4aeca5,_0x480f97)[_0xed2dd4(0x2d4)])toggleBot(_0x1776a0['botID'],_0x1776a0[_0xed2dd4(0x2fd)],_0x1776a0[_0xed2dd4(0x30d)]);else logger[_0xed2dd4(0x333)](_0xed2dd4(0x28f));}),_0x5e3eb0['on']('toggle-bot-mode',(_0x461857,_0x573830)=>{const _0x364c7f=_0x2e0c21;if(validateAccess(_0x573830,_0x480f97)[_0x364c7f(0x2d4)])toggleBotMode(_0x461857);else logger['full'](_0x364c7f(0x28f));}),_0x5e3eb0['on'](_0x2e0c21(0x2ba),(_0x2b4ff0,_0x1b0208)=>{const _0x3fad67=_0x2e0c21;if(validateAccess(_0x1b0208,_0x480f97)[_0x3fad67(0x2d4)])deleteBot(_0x2b4ff0);else logger[_0x3fad67(0x333)](_0x3fad67(0x234));}),_0x5e3eb0['on'](_0x2e0c21(0x32c),(_0x5c3877,_0xfeaf0c)=>{const _0x1d872f=_0x2e0c21;if(validateAccess(_0xfeaf0c,_0x480f97)['allow'])storeSettings(_0x5c3877,!![]);else logger[_0x1d872f(0x333)](_0x1d872f(0x2a6));}),_0x5e3eb0['on'](_0x2e0c21(0x335),_0x159b8e=>{const _0x10c394=_0x2e0c21;if(validateAccess(_0x159b8e,_0x480f97)[_0x10c394(0x2d4)])updateBB(_0x10c394(0x2b6));else logger[_0x10c394(0x333)](_0x10c394(0x2e8));}),_0x5e3eb0['on'](_0x2e0c21(0x199),_0x3aab6a=>{const _0x5c2448=_0x2e0c21;if(validateAccess(_0x3aab6a,_0x480f97)[_0x5c2448(0x2d4)])updateBB('reinstall');else logger['full'](_0x5c2448(0x1ea));}),_0x5e3eb0['on'](_0x2e0c21(0x1f1),_0x1e77cb=>{const _0x14d07b=_0x2e0c21;if(validateAccess(_0x1e77cb,_0x480f97)['allow']){const _0x93d782=getClient(_0x5e3eb0['id']);if(_0x93d782)getBackupFiles(_0x93d782[_0x14d07b(0x2a3)]);else logger[_0x14d07b(0x333)](_0x14d07b(0x315));}else logger[_0x14d07b(0x333)](_0x14d07b(0x2f3));}),_0x5e3eb0['on'](_0x2e0c21(0x149),(_0x571018,_0x40086c)=>{const _0x265581=_0x2e0c21;if(validateAccess(_0x40086c,_0x480f97)[_0x265581(0x2d4)])restoreBackupFile(_0x571018);else logger['full'](_0x265581(0x215));}),_0x5e3eb0['on'](_0x2e0c21(0x35e),_0x3e6e5f=>{const _0x3fde4a=_0x2e0c21;if(validateAccess(_0x3e6e5f,_0x480f97)[_0x3fde4a(0x2d4)])getMessages();else logger[_0x3fde4a(0x333)](_0x3fde4a(0x231));}),_0x5e3eb0['on'](_0x2e0c21(0x195),(_0xe70dbc,_0x941c07)=>{const _0x377e71=_0x2e0c21;if(validateAccess(_0x941c07,_0x480f97)[_0x377e71(0x2d4)])confirmMessage(_0xe70dbc);else logger['full'](_0x377e71(0x2dd));}),_0x5e3eb0['on'](_0x2e0c21(0x30c),_0x53e82e=>{const _0x20b22c=_0x2e0c21;if(validateAccess(_0x53e82e,_0x480f97)['allow']){if(devices[_0x480f97][_0x20b22c(0x338)])clearTimeout(devices[_0x480f97][_0x20b22c(0x338)]);if(devices[_0x480f97][_0x20b22c(0x327)])clearTimeout(devices[_0x480f97]['pidExpireLogin']);removeSocketListeners(getClient(_0x5e3eb0['id'])[_0x20b22c(0x2a3)]),addBlacklist(_0x480f97),devices[_0x480f97][_0x20b22c(0x18e)]=null,devices[_0x480f97][_0x20b22c(0x156)]=null,devices[_0x480f97][_0x20b22c(0x246)]['token']=null,logger['debug'](_0x20b22c(0x183)+_0x480f97['slice'](-0x8)),io['to'](getClient(_0x5e3eb0['id'])[_0x20b22c(0x2a3)])[_0x20b22c(0x16a)](_0x20b22c(0x2fd),{'access':{'allow':![],'reason':_0x20b22c(0x357),'token':null}});}else logger[_0x20b22c(0x333)](_0x20b22c(0x317));});}function initializeSocketBot(_0x492684){const _0x2367c9=_0x47af02,_0x5f87df=getClient(_0x492684['id'])['bot'],_0x2a73c5=getClient(_0x492684['id'])[_0x2367c9(0x2a3)];_0x492684['on']('get-logs',(_0x2871ee,_0x5bf226)=>{const _0x2bac7d=_0x2367c9;if(validateAccess(_0x5bf226,_0x2a73c5)['allow']){if(pid[_0x5f87df])pid[_0x5f87df][_0x2bac7d(0x349)]({'function':_0x2bac7d(0x155),'args':_0x2871ee});}else logger['full']('Unauthorized\x20attempt\x20to\x20get\x20events');}),_0x492684['on']('delete-alerts',(_0x2e80e1,_0x40e2fb)=>{const _0x5ca567=_0x2367c9;if(validateAccess(_0x40e2fb,_0x2a73c5)['allow']){if(pid[_0x5f87df])pid[_0x5f87df]['send']({'function':_0x5ca567(0x1b5),'args':_0x2e80e1});}else logger[_0x5ca567(0x333)](_0x5ca567(0x15a));}),_0x492684['on'](_0x2367c9(0x1a2),(_0x698bba,_0x250930)=>{const _0x31fe9f=_0x2367c9;if(validateAccess(_0x250930,_0x2a73c5)[_0x31fe9f(0x2d4)]){if(pid[_0x5f87df])pid[_0x5f87df][_0x31fe9f(0x349)]({'function':_0x31fe9f(0x164),'args':_0x698bba});}else logger['full'](_0x31fe9f(0x227));}),_0x492684['on'](_0x2367c9(0x26f),(_0x55197b,_0xae9624)=>{const _0x791687=_0x2367c9;if(validateAccess(_0xae9624,_0x2a73c5)[_0x791687(0x2d4)]){if(pid[_0x5f87df])pid[_0x5f87df]['send']({'function':_0x791687(0x25e),'args':_0x55197b});}else logger[_0x791687(0x333)](_0x791687(0x159));}),_0x492684['on']('store-headless',(_0x1a7293,_0x3ba065)=>{const _0x380b2a=_0x2367c9;if(validateAccess(_0x3ba065,_0x2a73c5)[_0x380b2a(0x2d4)]){if(pid[_0x5f87df])pid[_0x5f87df]['send']({'function':_0x380b2a(0x292),'args':_0x1a7293});}else logger[_0x380b2a(0x333)](_0x380b2a(0x30f));}),_0x492684['on'](_0x2367c9(0x2bd),(_0x58ce95,_0x40cc68)=>{const _0x4de313=_0x2367c9;if(validateAccess(_0x40cc68,_0x2a73c5)[_0x4de313(0x2d4)]){if(pid[_0x5f87df])pid[_0x5f87df][_0x4de313(0x349)]({'function':'storeFiat','args':_0x58ce95});}else logger[_0x4de313(0x333)](_0x4de313(0x1a3));}),_0x492684['on'](_0x2367c9(0x346),_0x4c237a=>{const _0xbab9=_0x2367c9;if(validateAccess(_0x4c237a,_0x2a73c5)[_0xbab9(0x2d4)]){if(pid[_0x5f87df])pid[_0x5f87df]['send']({'function':_0xbab9(0x240),'args':null});}else logger[_0xbab9(0x333)](_0xbab9(0x160));}),_0x492684['on'](_0x2367c9(0x1a9),_0x2b8b71=>{const _0x56f120=_0x2367c9;if(validateAccess(_0x2b8b71,_0x2a73c5)[_0x56f120(0x2d4)]){if(pid[_0x5f87df])pid[_0x5f87df]['send']({'function':_0x56f120(0x2ad),'args':null});}else logger[_0x56f120(0x333)](_0x56f120(0x1d3));}),_0x492684['on']('place-order',(_0x36f4d1,_0x2d26ee)=>{const _0x4e0c6f=_0x2367c9;if(validateAccess(_0x2d26ee,_0x2a73c5)[_0x4e0c6f(0x2d4)]){if(pid[_0x5f87df])pid[_0x5f87df][_0x4e0c6f(0x349)]({'function':'placeOrder','args':_0x36f4d1});}else logger[_0x4e0c6f(0x333)](_0x4e0c6f(0x17f));}),_0x492684['on']('cancel-loading',_0x55edda=>{const _0x48116b=_0x2367c9;if(validateAccess(_0x55edda,_0x2a73c5)['allow']){if(pid[_0x5f87df])pid[_0x5f87df]['send']({'function':'cancelLoading','args':null});}else logger[_0x48116b(0x333)]('Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins');}),_0x492684['on']('show-config',_0x4987ce=>{const _0x20b3df=_0x2367c9;if(validateAccess(_0x4987ce,_0x2a73c5)[_0x20b3df(0x2d4)]){if(pid[_0x5f87df])pid[_0x5f87df][_0x20b3df(0x349)]({'function':_0x20b3df(0x214),'args':null});}else logger[_0x20b3df(0x333)](_0x20b3df(0x1cd));}),_0x492684['on']('update-bb',_0x2c8677=>{const _0x361ff8=_0x2367c9;if(validateAccess(_0x2c8677,_0x2a73c5)[_0x361ff8(0x2d4)])updateBB(_0x361ff8(0x2b6));else logger[_0x361ff8(0x333)](_0x361ff8(0x2e8));}),_0x492684['on']('get-messages',_0x442acf=>{const _0x383c68=_0x2367c9;if(validateAccess(_0x442acf,_0x2a73c5)['allow'])getMessages();else logger[_0x383c68(0x333)](_0x383c68(0x231));}),_0x492684['on'](_0x2367c9(0x195),(_0x1c389f,_0x12b835)=>{if(validateAccess(_0x12b835,_0x2a73c5)['allow'])confirmMessage(_0x1c389f);else logger['full']('Unauthorized\x20attempt\x20to\x20confirm\x20message');}),_0x492684['on'](_0x2367c9(0x30c),_0xddcae5=>{const _0x2029dd=_0x2367c9;if(validateAccess(_0xddcae5,_0x2a73c5)['allow']){if(devices[_0x2a73c5][_0x2029dd(0x338)])clearTimeout(devices[_0x2a73c5][_0x2029dd(0x338)]);if(devices[_0x2a73c5][_0x2029dd(0x327)])clearTimeout(devices[_0x2a73c5][_0x2029dd(0x327)]);removeSocketListeners(getClient(_0x492684['id'])[_0x2029dd(0x2a3)]),addBlacklist(_0x2a73c5),devices[_0x2a73c5][_0x2029dd(0x18e)]=null,devices[_0x2a73c5][_0x2029dd(0x156)]=null,devices[_0x2a73c5]['access'][_0x2029dd(0x31a)]=null,logger[_0x2029dd(0x33e)](_0x2029dd(0x183)+_0x2a73c5[_0x2029dd(0x1c8)](-0x8)),io['to'](getClient(_0x492684['id'])[_0x2029dd(0x2a3)])[_0x2029dd(0x16a)](_0x2029dd(0x2fd),{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logger[_0x2029dd(0x333)]('Unauthorized\x20attempt\x20to\x20log\x20out');});}function removeSocketListeners(_0x21edc9){const _0x7ac1cf=_0x47af02;getClientsWithUuid(_0x21edc9)[_0x7ac1cf(0x185)](_0x23af5f=>{getSocket(_0x23af5f['id'])['removeAllListeners']();});}function cleanSettings(){const _0x20fb5c=_0x47af02;let _0xd0dd69=settings;return settings['telegramToken']&&settings['telegramToken']!=''&&(_0xd0dd69={..._0xd0dd69,'telegramToken':'************'}),settings[_0x20fb5c(0x354)]&&settings['bbPassword']!=''&&(_0xd0dd69={..._0xd0dd69,'bbPassword':'************'}),settings['marketcapApi']&&settings[_0x20fb5c(0x297)]!=''&&(_0xd0dd69={..._0xd0dd69,'marketcapApi':'************'}),(settings[_0x20fb5c(0x354)]&&settings[_0x20fb5c(0x354)]==_0x20fb5c(0x1ca)||settings[_0x20fb5c(0x14f)]&&settings[_0x20fb5c(0x14f)]=='***'||settings[_0x20fb5c(0x297)]&&settings[_0x20fb5c(0x297)]=='***')&&(_0xd0dd69={..._0xd0dd69,'restored':{'password':settings[_0x20fb5c(0x354)]==_0x20fb5c(0x1ca),'telegram':settings[_0x20fb5c(0x14f)]==_0x20fb5c(0x1ca),'marketcap':settings['marketcapApi']==_0x20fb5c(0x1ca)}}),_0xd0dd69;}async function updateBB(_0x4ed1da){const _0x3e29dd=_0x47af02;await backupConfigFiles(),installingUpdate=!![],config[_0x3e29dd(0x185)](_0x4e0f17=>{restartBot(_0x4e0f17['botID']);});if(_0x4ed1da==_0x3e29dd(0x2b6))process['send']({'update':!![],'environment':environment},_0x5dba60=>{});else _0x4ed1da=='reinstall'&&process[_0x3e29dd(0x349)]({'reinstall':!![],'environment':environment},_0x2ce9a4=>{});}function startBot(_0x4edbe3,_0x1ec1fb,_0x17ae45){const _0x46296f=_0x47af02;if(debugging)_0x4edbe3['push']('-d');let _0x2c954d=![];const _0x379953=_0x4edbe3[0x0];_0x1ec1fb={..._0x1ec1fb,'stdio':[_0x46296f(0x16f),_0x46296f(0x16f),_0x46296f(0x16f),_0x46296f(0x299)]},pid[_0x379953]=childProcess[_0x46296f(0x342)](botfile,_0x4edbe3,_0x1ec1fb),pid[_0x379953]['on'](_0x46296f(0x290),_0x2c6105=>{const _0x42adc0=_0x46296f;switch(Object[_0x42adc0(0x2f2)](_0x2c6105)[0x0]){case _0x42adc0(0x301):updateBotName(_0x379953,_0x2c6105['botname']);break;case _0x42adc0(0x328):updateBotManager();break;case'status':updateStatus(_0x379953,_0x2c6105[_0x42adc0(0x2fd)]);break;case _0x42adc0(0x30d):updateLive(_0x379953,_0x2c6105['live']);break;case _0x42adc0(0x26d):updateLive(_0x379953,_0x2c6105[_0x42adc0(0x26d)]),io['to'](_0x379953)[_0x42adc0(0x16a)]('status',{'access':{'allow':![],'reason':_0x42adc0(0x308),'token':null}});break;case _0x42adc0(0x2dc):_0x2c6105[_0x42adc0(0x2dc)]==_0x42adc0(0x2c1)&&restartBot(_0x379953);_0x2c6105[_0x42adc0(0x2dc)]==_0x42adc0(0x2c7)&&toggleBot(_0x379953,_0x42adc0(0x18b),'stopped');break;case _0x42adc0(0x362):sendTelegramBot(_0x379953,_0x2c6105[_0x42adc0(0x362)]);break;case _0x42adc0(0x235):sendTelegramMsg(_0x2c6105[_0x42adc0(0x235)]);break;case _0x42adc0(0x309):io['to'](_0x379953)[_0x42adc0(0x16a)](_0x2c6105[_0x42adc0(0x309)],_0x2c6105['args']);break;}}),pid[_0x379953]['on'](_0x46296f(0x22d),function(_0x281d14){if(_0x2c954d)return;_0x2c954d=!![],_0x17ae45(_0x281d14);}),pid[_0x379953]['on']('exit',async function(_0x29e7f3){const _0x531706=_0x46296f;if(terminating)return;if(installingUpdate){io[_0x531706(0x2ff)]();return;}if(_0x2c954d)return;_0x2c954d=!![],_0x17ae45(null);const _0x2e9916=dbConfig[_0x531706(0x1ab)](_0x531706(0x253))[_0x531706(0x1e5)]({'botID':_0x379953})['value']();_0x2e9916&&(_0x2e9916['status']==_0x531706(0x35d)||_0x2e9916[_0x531706(0x2fd)]==_0x531706(0x2db))&&(await sleep(0x3e8),updateLive(_0x379953,_0x531706(0x14e)),logger[_0x531706(0x333)](_0x531706(0x205)+_0x379953),startBot([_0x379953,userID],{'cwd':bbpath},function(_0x445f0a){if(_0x445f0a)logger['full'](_0x445f0a);}));});}function stopBot(_0xbb296d){const _0x67776f=_0x47af02;getClientsWithBotID(_0xbb296d)[_0x67776f(0x185)](_0x122447=>{const _0xee61ba=_0x67776f;getSocket(_0x122447['id'])[_0xee61ba(0x1aa)](!![]),removeClient(_0x122447['id']);}),pid[_0xbb296d]&&(pid[_0xbb296d][_0x67776f(0x2c7)](),pid[_0xbb296d]=null);}function stopAllBots(){const _0x27d1ce=_0x47af02;terminating=!![];const _0x51dc0a=getEnabledBots();_0x51dc0a[_0x27d1ce(0x185)](_0x51c438=>{const _0x28eaca=_0x27d1ce;stopBot(_0x51c438[_0x28eaca(0x147)]);});}function restartBot(_0x88accf){const _0x187ccf=_0x47af02;if(pid[_0x88accf])pid[_0x88accf][_0x187ccf(0x2c7)]();}function addBot(){const _0x490b21=_0x47af02;let _0x40466c;for(let _0x2978ca=0x1;_0x2978ca<0x3e9;_0x2978ca++){_0x40466c=_0x2978ca[_0x490b21(0x1ac)]()[_0x490b21(0x2ef)](0x3,'0');let _0x4a511a=config['find'](_0x10566a=>_0x10566a[_0x490b21(0x147)]==_0x40466c);if(!_0x4a511a)break;}if(_0x40466c==='1000'){logger[_0x490b21(0x333)]('The\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached');return;}logger[_0x490b21(0x333)]('Starting\x20new\x20bot\x20|\x20Bot\x20'+_0x40466c),dbConfig['get']('bots')['push']({'botID':_0x40466c,'botname':_0x490b21(0x312)+_0x40466c,'status':_0x490b21(0x2db),'live':''})[_0x490b21(0x1fd)](),startBot([_0x40466c,userID],{'cwd':bbpath},function(_0x554ca1){if(_0x554ca1)logger['full'](_0x554ca1);}),config=getConfiguration(),io['to'](_0x490b21(0x1cf))[_0x490b21(0x16a)](_0x490b21(0x253),config),broadcastToBots('bots',JSON[_0x490b21(0x2a1)](config));}function deleteBot(_0x56ee66){const _0x98be9f=_0x47af02;getClientsWithBotID(_0x56ee66)[_0x98be9f(0x185)](_0x3300d5=>{getSocket(_0x3300d5['id'])['disconnect'](!![]),removeClient(_0x3300d5['id']);}),dbConfig['get'](_0x98be9f(0x253))[_0x98be9f(0x353)]({'botID':_0x56ee66})[_0x98be9f(0x1fd)](),logger[_0x98be9f(0x333)](_0x98be9f(0x1ed)+_0x56ee66),stopBot(_0x56ee66);try{if(fs[_0x98be9f(0x15b)](path['join'](configpath,'bot-'+_0x56ee66+_0x98be9f(0x175))))fs[_0x98be9f(0x283)](path['join'](configpath,_0x98be9f(0x181)+_0x56ee66+_0x98be9f(0x175)));if(fs[_0x98be9f(0x15b)](path[_0x98be9f(0x1f0)](configpath,_0x98be9f(0x181)+_0x56ee66+_0x98be9f(0x2c2))))fs[_0x98be9f(0x283)](path['join'](configpath,_0x98be9f(0x181)+_0x56ee66+_0x98be9f(0x2c2)));if(fs[_0x98be9f(0x15b)](path[_0x98be9f(0x1f0)](configpath,_0x98be9f(0x181)+_0x56ee66+_0x98be9f(0x258))))fs[_0x98be9f(0x283)](path[_0x98be9f(0x1f0)](configpath,'bot-'+_0x56ee66+'-performance.json'));if(fs[_0x98be9f(0x15b)](path['join'](configpath,_0x98be9f(0x181)+_0x56ee66+_0x98be9f(0x351))))fs[_0x98be9f(0x283)](path['join'](configpath,_0x98be9f(0x181)+_0x56ee66+_0x98be9f(0x351)));}catch(_0x23230b){if(_0x23230b)logger[_0x98be9f(0x333)]('Error\x20while\x20deleting\x20config\x20files:\x20',_0x23230b);}config=getConfiguration(),io['to'](_0x98be9f(0x1cf))[_0x98be9f(0x16a)]('bots',config),broadcastToBots('bots',JSON[_0x98be9f(0x2a1)](config));}function toggleBot(_0x5c0fae,_0x3a0002,_0x1c250f){const _0x5725bf=_0x47af02;dbConfig[_0x5725bf(0x1ab)](_0x5725bf(0x253))['find']({'botID':_0x5c0fae})['assign']({'status':_0x3a0002})[_0x5725bf(0x1f3)]({'live':_0x1c250f})[_0x5725bf(0x1fd)]();if(_0x3a0002==_0x5725bf(0x35d)||_0x3a0002==_0x5725bf(0x2db))logger['full']('Enabled\x20Bot\x20'+_0x5c0fae),startBot([_0x5c0fae,userID],{'cwd':bbpath},function(_0x4042b4){const _0x2141d5=_0x5725bf;if(_0x4042b4)logger[_0x2141d5(0x333)](_0x4042b4);});else(_0x3a0002==_0x5725bf(0x18b)||_0x3a0002==_0x5725bf(0x2b0))&&(logger[_0x5725bf(0x333)]('Disabled\x20Bot\x20'+_0x5c0fae),stopBot(_0x5c0fae));config=getConfiguration(),io['to'](_0x5725bf(0x1cf))[_0x5725bf(0x16a)](_0x5725bf(0x253),config),broadcastToBots(_0x5725bf(0x253),JSON[_0x5725bf(0x2a1)](config));}function toggleStatus(_0x5049b4){const _0x59c640=_0x47af02;let _0x224b95=dbConfig[_0x59c640(0x1ab)](_0x59c640(0x253))[_0x59c640(0x1e5)]({'botID':_0x5049b4})[_0x59c640(0x17d)](),_0x26c0bf;if(_0x224b95[_0x59c640(0x2fd)]==='enabled')_0x26c0bf=_0x59c640(0x18b);else{if(_0x224b95[_0x59c640(0x2fd)]===_0x59c640(0x2db))_0x26c0bf=_0x59c640(0x2b0);else{if(_0x224b95[_0x59c640(0x2fd)]===_0x59c640(0x2b0))_0x26c0bf=_0x59c640(0x2db);else{if(_0x224b95[_0x59c640(0x2fd)]===_0x59c640(0x18b))_0x26c0bf='enabled';}}}return _0x26c0bf;}function updateStatus(_0x436025,_0x3ac57a){const _0x486159=_0x47af02;dbConfig[_0x486159(0x1ab)]('bots')[_0x486159(0x1e5)]({'botID':_0x436025})['assign']({'status':_0x3ac57a})[_0x486159(0x1fd)](),config=getConfiguration(),io['to']('botmanager')[_0x486159(0x16a)](_0x486159(0x253),config),broadcastToBots(_0x486159(0x253),JSON[_0x486159(0x2a1)](config));}function updateLive(_0x2e7abd,_0x568f5f){const _0xd183a0=_0x47af02;dbConfig['get']('bots')[_0xd183a0(0x1e5)]({'botID':_0x2e7abd})[_0xd183a0(0x1f3)]({'live':_0x568f5f})[_0xd183a0(0x1fd)](),config=getConfiguration(),io['to'](_0xd183a0(0x1cf))['emit'](_0xd183a0(0x253),config),broadcastToBots(_0xd183a0(0x253),JSON[_0xd183a0(0x2a1)](config));}function updateBotName(_0x2c02d8,_0x2f53e3){const _0x56f115=_0x47af02;dbConfig[_0x56f115(0x1ab)](_0x56f115(0x253))[_0x56f115(0x1e5)]({'botID':_0x2c02d8})['assign']({'botname':_0x2f53e3})[_0x56f115(0x1fd)](),config=getConfiguration(),io['to'](_0x56f115(0x1cf))['emit'](_0x56f115(0x253),config),broadcastToBots(_0x56f115(0x253),JSON[_0x56f115(0x2a1)](config));}function updateBotManager(){const _0x13f29b=_0x47af02;config=getConfiguration(),io['to'](_0x13f29b(0x1cf))[_0x13f29b(0x16a)](_0x13f29b(0x253),config),broadcastToBots(_0x13f29b(0x253),JSON[_0x13f29b(0x2a1)](config));}function toggleBotMode(_0x1c55cc){const _0x19c533=_0x47af02;if(pid[_0x1c55cc])pid[_0x1c55cc]['send']({'function':_0x19c533(0x16c),'args':null});else{const _0x372c11=configpath+_0x19c533(0x181)+_0x1c55cc+_0x19c533(0x175),_0x3b1497=fs[_0x19c533(0x170)](_0x372c11),_0x184d1c=JSON[_0x19c533(0x23c)](_0x3b1497),_0x7e3701=_0x184d1c['bot'][0x0][_0x19c533(0x1db)];_0x184d1c[_0x19c533(0x203)][0x0]['headless']=!_0x7e3701;const _0x4be243=JSON[_0x19c533(0x2a1)](_0x184d1c,null,0x2);fs[_0x19c533(0x336)](_0x372c11,_0x4be243),config=getConfiguration(),io['to'](_0x19c533(0x1cf))[_0x19c533(0x16a)](_0x19c533(0x253),config),broadcastToBots(_0x19c533(0x253),JSON[_0x19c533(0x2a1)](config));}}function validateTelegram(_0x32b170){const _0x2b9924=_0x47af02;if(_0x32b170[_0x2b9924(0x252)]['username']!=settings['telegramUsername']&&'@'+_0x32b170[_0x2b9924(0x252)][_0x2b9924(0x2e3)]!=settings[_0x2b9924(0x343)]||_0x32b170['chat']['id']!=settings[_0x2b9924(0x288)])return sendTelegram(_0x32b170[_0x2b9924(0x358)]['id'],_0x2b9924(0x20b),{'parse_mode':'HTML'}),![];return!![];}async function initTelegram(){const _0x35e962=_0x47af02;tgBot&&(await tgBot[_0x35e962(0x2dc)](),await sleep(0x7d0));tgBot=new Telegraf(settings[_0x35e962(0x14f)]);let _0x5e98d5=_0x35e962(0x15e);_0x5e98d5+='\x0a',_0x5e98d5+='/enable\x20-\x20enable\x20notifications\x0a',_0x5e98d5+=_0x35e962(0x1e0),_0x5e98d5+='/config\x20-\x20notification\x20types\x20to\x20receive\x0a',_0x5e98d5+='/restart\x20-\x20restart\x20bot(s)\x0a',_0x5e98d5+=_0x35e962(0x232),_0x5e98d5+=_0x35e962(0x1e1),_0x5e98d5+=_0x35e962(0x26b),_0x5e98d5+=_0x35e962(0x264),_0x5e98d5+=_0x35e962(0x174),_0x5e98d5+=_0x35e962(0x286),_0x5e98d5+=_0x35e962(0x2ab),_0x5e98d5+=_0x35e962(0x25c),_0x5e98d5+=_0x35e962(0x23a),_0x5e98d5+=_0x35e962(0x1df),_0x5e98d5+=_0x35e962(0x169),_0x5e98d5+='/help\x20-\x20show\x20available\x20commands\x0a';let _0x3d7de7=_0x35e962(0x200);_0x3d7de7+='\x0a',_0x3d7de7+=_0x5e98d5,tgBot[_0x35e962(0x24c)]((_0x25f93f,_0x2ac238)=>{const _0x47360a=_0x35e962;logger[_0x47360a(0x2df)](getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20Telegram\x20error\x20occured'),logger['debug'](_0x47360a(0x2f4),_0x25f93f);}),tgBot[_0x35e962(0x2a2)](async(_0x445201,_0x4cb1d4)=>{const _0x4856f5=_0x35e962;if(!(!settings['telegramChatId']&&_0x445201[_0x4856f5(0x2b6)][_0x4856f5(0x290)][_0x4856f5(0x322)]==_0x4856f5(0x20f))){if(!validateTelegram(_0x445201))return;}_0x4cb1d4();}),tgBot[_0x35e962(0x208)](_0x35e962(0x281),async _0x566d6e=>{const _0x988edb=_0x35e962;if(_0x566d6e[_0x988edb(0x252)][_0x988edb(0x2e3)]==settings[_0x988edb(0x343)]||'@'+_0x566d6e[_0x988edb(0x252)][_0x988edb(0x2e3)]==settings[_0x988edb(0x343)]){if(!settings[_0x988edb(0x288)])updateSetting(_0x988edb(0x288),_0x566d6e['chat']['id']);}if(!validateTelegram(_0x566d6e))return;updateSetting(_0x988edb(0x1ec),!![]),await sendTelegram(_0x566d6e[_0x988edb(0x358)]['id'],_0x3d7de7);}),tgBot[_0x35e962(0x208)]('enable',async _0x4770ce=>{const _0x4f165e=_0x35e962;updateSetting(_0x4f165e(0x1ec),!![]),await sendTelegram(_0x4770ce[_0x4f165e(0x358)]['id'],_0x4f165e(0x238));}),tgBot[_0x35e962(0x208)]('disable',async _0x1043f4=>{const _0xa6540f=_0x35e962;await sendTelegram(_0x1043f4['chat']['id'],_0xa6540f(0x233)),updateSetting(_0xa6540f(0x1ec),![]);}),tgBot['command'](_0x35e962(0x242),async _0x552f06=>{const _0xe095e2=_0x35e962,_0x4ea681=Markup[_0xe095e2(0x1d0)]([Markup[_0xe095e2(0x177)]['callback']('Orders',_0xe095e2(0x255)),Markup['button'][_0xe095e2(0x14b)](_0xe095e2(0x223),'config_alerts'),Markup[_0xe095e2(0x177)]['callback'](_0xe095e2(0x330),_0xe095e2(0x22a))]);_0x552f06[_0xe095e2(0x19d)](_0xe095e2(0x2c3),_0x4ea681);}),tgBot[_0x35e962(0x18c)]('config_orders',async _0x411480=>{const _0x3a79db=_0x35e962;_0x411480[_0x3a79db(0x21f)](),updateSetting(_0x3a79db(0x20a),'orders'),updateSetting('telegramEnabled',!![]),await sendTelegram(_0x411480[_0x3a79db(0x358)]['id'],_0x3a79db(0x186));}),tgBot[_0x35e962(0x18c)](_0x35e962(0x1f5),async _0x3e859e=>{const _0x39445c=_0x35e962;_0x3e859e[_0x39445c(0x21f)](),updateSetting(_0x39445c(0x20a),_0x39445c(0x16b)),updateSetting(_0x39445c(0x1ec),!![]),await sendTelegram(_0x3e859e['chat']['id'],'Ok,\x20will\x20send\x20alert\x20notifications\x20only');}),tgBot[_0x35e962(0x18c)](_0x35e962(0x22a),async _0x4d6335=>{const _0x5a1e90=_0x35e962;_0x4d6335[_0x5a1e90(0x21f)](),updateSetting('telegramEvents','all'),updateSetting('telegramEnabled',!![]),await sendTelegram(_0x4d6335['chat']['id'],'Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications');}),tgBot[_0x35e962(0x208)](_0x35e962(0x2fd),async _0x18b74d=>{const _0x4e4afb=_0x35e962,_0x175601=getBotsWithMode();let _0x59f57e=_0x4e4afb(0x179);config[_0x4e4afb(0x185)](_0x2482a2=>{const _0x12d7b2=_0x4e4afb,_0x420d6d=_0x175601['find'](_0x5bbd9f=>_0x5bbd9f['botID']==_0x2482a2['botID'])[_0x12d7b2(0x1b4)];_0x59f57e+='Bot\x20'+_0x2482a2[_0x12d7b2(0x147)]+':\x20'+_0x2482a2[_0x12d7b2(0x2fd)]+_0x12d7b2(0x219)+_0x420d6d+'\x20|\x20'+_0x2482a2[_0x12d7b2(0x30d)]+'\x0a';}),_0x59f57e+='\x0a',_0x59f57e+=_0x4e4afb(0x1bf),_0x59f57e+=!settings[_0x4e4afb(0x1ec)]?_0x4e4afb(0x35c):_0x4e4afb(0x21b),_0x59f57e+=settings[_0x4e4afb(0x1ec)]?settings[_0x4e4afb(0x20a)]==_0x4e4afb(0x2af)?'Notifications\x20types:\x20orders\x20and\x20alerts\x0a':_0x4e4afb(0x256)+settings['telegramEvents']+_0x4e4afb(0x287):'',await sendTelegram(_0x18b74d['chat']['id'],_0x59f57e,{'parse_mode':_0x4e4afb(0x2a5)});}),tgBot[_0x35e962(0x208)]('restart',async _0x376e2b=>{const _0x426eff=_0x35e962,_0x398c00=getEnabledBots();if(_0x398c00[_0x426eff(0x296)]==0x0)await sendTelegram(_0x376e2b[_0x426eff(0x358)]['id'],_0x426eff(0x19a));else{if(_0x398c00['length']>0x1)_0x398c00[_0x426eff(0x1a8)]({'botID':_0x426eff(0x2af)});let _0x3e912d=[],_0x5446fe=[];const _0x20dc33=_0x398c00[_0x426eff(0x296)]%0x4==0x0||_0x398c00[_0x426eff(0x296)]%0x4==0x3||_0x398c00['length']%0x3==0x1?0x4:0x3;let _0x303803=0x0;_0x398c00[_0x426eff(0x185)]((_0x127fad,_0x27984c)=>{const _0x5e6fd2=_0x426eff;if(_0x27984c%_0x20dc33==0x0)_0x5446fe=[];_0x5446fe[_0x5e6fd2(0x1a8)](Markup['button']['callback'](_0x127fad[_0x5e6fd2(0x147)]=='all'?'All\x20bots':_0x5e6fd2(0x312)+_0x127fad[_0x5e6fd2(0x147)],'restart_'+_0x127fad[_0x5e6fd2(0x147)])),_0x27984c%_0x20dc33==0x0&&(_0x3e912d[_0x303803]=_0x5446fe,_0x303803++);});const _0x10dcf0=Markup[_0x426eff(0x1d0)](_0x3e912d);_0x376e2b[_0x426eff(0x19d)](_0x426eff(0x17e),_0x10dcf0);}}),tgBot['action'](/restart_(.+)/,async _0x235bfa=>{const _0x2c245c=_0x35e962,_0x36b8b3=_0x235bfa[_0x2c245c(0x1b8)][0x1];_0x235bfa[_0x2c245c(0x21f)](),_0x36b8b3==_0x2c245c(0x2af)?config[_0x2c245c(0x185)](_0x9bb78b=>{const _0x5cf2a2=_0x2c245c;restartBot(_0x9bb78b[_0x5cf2a2(0x147)]);}):restartBot(_0x36b8b3);}),tgBot[_0x35e962(0x208)]('on',async _0x211254=>{const _0x21a7cc=_0x35e962,_0x5f471e=getDisabledBots();if(_0x5f471e[_0x21a7cc(0x296)]==0x0)await sendTelegram(_0x211254[_0x21a7cc(0x358)]['id'],_0x21a7cc(0x187));else{if(_0x5f471e[_0x21a7cc(0x296)]>0x1)_0x5f471e[_0x21a7cc(0x1a8)]({'botID':_0x21a7cc(0x2af)});let _0x588bd3=[],_0x2db127=[];const _0x5a619c=_0x5f471e[_0x21a7cc(0x296)]%0x4==0x0||_0x5f471e[_0x21a7cc(0x296)]%0x4==0x3||_0x5f471e[_0x21a7cc(0x296)]%0x3==0x1?0x4:0x3;let _0x5a1c3f=0x0;_0x5f471e[_0x21a7cc(0x185)]((_0x2bb0d8,_0x3de38e)=>{const _0x3920bd=_0x21a7cc;if(_0x3de38e%_0x5a619c==0x0)_0x2db127=[];_0x2db127[_0x3920bd(0x1a8)](Markup[_0x3920bd(0x177)][_0x3920bd(0x14b)](_0x2bb0d8[_0x3920bd(0x147)]=='all'?_0x3920bd(0x2a0):_0x3920bd(0x312)+_0x2bb0d8[_0x3920bd(0x147)],_0x3920bd(0x326)+_0x2bb0d8[_0x3920bd(0x147)])),_0x3de38e%_0x5a619c==0x0&&(_0x588bd3[_0x5a1c3f]=_0x2db127,_0x5a1c3f++);});const _0x2f44e1=Markup[_0x21a7cc(0x1d0)](_0x588bd3);_0x211254['reply'](_0x21a7cc(0x198),_0x2f44e1);}}),tgBot[_0x35e962(0x18c)](/on_(.+)/,async _0x36af5b=>{const _0x146cfa=_0x35e962,_0x5d0f43=_0x36af5b[_0x146cfa(0x1b8)][0x1];_0x36af5b['editMessageReplyMarkup']();if(_0x5d0f43=='all'){const _0x277725=getDisabledBots();await sendTelegram(_0x36af5b[_0x146cfa(0x358)]['id'],'Bot\x20Mgr\x20>\x20starting\x20all\x20bots'),_0x277725[_0x146cfa(0x185)](_0x19b5d8=>{const _0x1644d1=_0x146cfa;if(_0x19b5d8[_0x1644d1(0x147)]!='all')toggleBot(_0x19b5d8[_0x1644d1(0x147)],toggleStatus(_0x19b5d8[_0x1644d1(0x147)]),_0x1644d1(0x14e));});}else await sendTelegram(_0x36af5b['chat']['id'],_0x146cfa(0x30e)+_0x5d0f43),toggleBot(_0x5d0f43,toggleStatus(_0x5d0f43),_0x146cfa(0x14e));}),tgBot[_0x35e962(0x208)]('off',async _0x1b60ce=>{const _0x5d0bba=_0x35e962,_0x2d2e4b=getEnabledBots();if(_0x2d2e4b['length']==0x0)await sendTelegram(_0x1b60ce[_0x5d0bba(0x358)]['id'],_0x5d0bba(0x19a));else{if(_0x2d2e4b[_0x5d0bba(0x296)]>0x1)_0x2d2e4b['push']({'botID':_0x5d0bba(0x2af)});let _0x5a1471=[],_0x2ea5db=[];const _0x4a3b89=_0x2d2e4b[_0x5d0bba(0x296)]%0x4==0x0||_0x2d2e4b[_0x5d0bba(0x296)]%0x4==0x3||_0x2d2e4b['length']%0x3==0x1?0x4:0x3;let _0x154c10=0x0;_0x2d2e4b[_0x5d0bba(0x185)]((_0x53fc05,_0x5d581e)=>{const _0x11841b=_0x5d0bba;if(_0x5d581e%_0x4a3b89==0x0)_0x2ea5db=[];_0x2ea5db[_0x11841b(0x1a8)](Markup[_0x11841b(0x177)][_0x11841b(0x14b)](_0x53fc05['botID']==_0x11841b(0x2af)?'All\x20bots':_0x11841b(0x312)+_0x53fc05[_0x11841b(0x147)],_0x11841b(0x228)+_0x53fc05[_0x11841b(0x147)])),_0x5d581e%_0x4a3b89==0x0&&(_0x5a1471[_0x154c10]=_0x2ea5db,_0x154c10++);});const _0x3cf7d3=Markup[_0x5d0bba(0x1d0)](_0x5a1471);_0x1b60ce[_0x5d0bba(0x19d)](_0x5d0bba(0x2c4),_0x3cf7d3);}}),tgBot['action'](/off_(.+)/,async _0x1ffaf7=>{const _0xd7bb74=_0x35e962,_0x2e99a5=_0x1ffaf7[_0xd7bb74(0x1b8)][0x1];_0x1ffaf7[_0xd7bb74(0x21f)]();if(_0x2e99a5==_0xd7bb74(0x2af)){const _0x5b11f0=getEnabledBots();await sendTelegram(_0x1ffaf7[_0xd7bb74(0x358)]['id'],_0xd7bb74(0x345)),_0x5b11f0['forEach'](_0x576ea4=>{const _0x3b63b9=_0xd7bb74;if(_0x576ea4[_0x3b63b9(0x147)]!='all')toggleBot(_0x576ea4[_0x3b63b9(0x147)],toggleStatus(_0x576ea4[_0x3b63b9(0x147)]),_0x3b63b9(0x14e));});}else await sendTelegram(_0x1ffaf7[_0xd7bb74(0x358)]['id'],'Bot\x20Mgr\x20>\x20stopping\x20Bot\x20'+_0x2e99a5),toggleBot(_0x2e99a5,toggleStatus(_0x2e99a5),'stopped');}),tgBot[_0x35e962(0x208)]('metrics',async _0x2907a2=>{const _0x168107=_0x35e962,_0x262905=getEnabledBots();if(_0x262905['length']==0x0)await sendTelegram(_0x2907a2[_0x168107(0x358)]['id'],'No\x20bots\x20running\x20right\x20now');else{if(_0x262905[_0x168107(0x296)]>0x1){let _0x1cdf95=[],_0x4c2949=[];const _0x4109d4=_0x262905['length']%0x4==0x0||_0x262905['length']%0x4==0x3||_0x262905[_0x168107(0x296)]%0x3==0x1?0x4:0x3;let _0xff477c=0x0;_0x262905[_0x168107(0x185)]((_0x587641,_0x5255be)=>{const _0x44b54a=_0x168107;if(_0x5255be%_0x4109d4==0x0)_0x4c2949=[];_0x4c2949[_0x44b54a(0x1a8)](Markup[_0x44b54a(0x177)][_0x44b54a(0x14b)](_0x44b54a(0x312)+_0x587641[_0x44b54a(0x147)],_0x44b54a(0x22c)+_0x587641['botID'])),_0x5255be%_0x4109d4==0x0&&(_0x1cdf95[_0xff477c]=_0x4c2949,_0xff477c++);});const _0x2c4e13=Markup[_0x168107(0x1d0)](_0x1cdf95);_0x2907a2['reply'](_0x168107(0x1d7),_0x2c4e13);}else{const _0x4c1b6b=_0x262905[0x0][_0x168107(0x147)];if(pid[_0x4c1b6b])pid[_0x4c1b6b][_0x168107(0x349)]({'function':_0x168107(0x291),'args':null});}}}),tgBot[_0x35e962(0x18c)](/metrics_(.+)/,async _0x4b113b=>{const _0x3f7cf0=_0x35e962,_0x51f1c9=_0x4b113b['match'][0x1];_0x4b113b[_0x3f7cf0(0x21f)]();if(pid[_0x51f1c9])pid[_0x51f1c9][_0x3f7cf0(0x349)]({'function':_0x3f7cf0(0x291),'args':null});}),tgBot[_0x35e962(0x208)](_0x35e962(0x163),async _0x59a677=>{const _0x2504cb=_0x35e962,_0x3be35e=getEnabledBots();if(_0x3be35e[_0x2504cb(0x296)]==0x0)await sendTelegram(_0x59a677[_0x2504cb(0x358)]['id'],'No\x20bots\x20running\x20right\x20now');else{if(_0x3be35e[_0x2504cb(0x296)]>0x1){let _0x1d978a=[],_0x2af4fe=[];const _0x46d972=_0x3be35e[_0x2504cb(0x296)]%0x4==0x0||_0x3be35e['length']%0x4==0x3||_0x3be35e[_0x2504cb(0x296)]%0x3==0x1?0x4:0x3;let _0x595674=0x0;_0x3be35e['forEach']((_0x1255ef,_0x1bfb4b)=>{const _0x4bae09=_0x2504cb;if(_0x1bfb4b%_0x46d972==0x0)_0x2af4fe=[];_0x2af4fe['push'](Markup[_0x4bae09(0x177)][_0x4bae09(0x14b)](_0x4bae09(0x312)+_0x1255ef['botID'],_0x4bae09(0x207)+_0x1255ef[_0x4bae09(0x147)])),_0x1bfb4b%_0x46d972==0x0&&(_0x1d978a[_0x595674]=_0x2af4fe,_0x595674++);});const _0x44917e=Markup[_0x2504cb(0x1d0)](_0x1d978a);_0x59a677[_0x2504cb(0x19d)](_0x2504cb(0x352),_0x44917e);}else{const _0x38cf9f=_0x3be35e[0x0][_0x2504cb(0x147)];if(pid[_0x38cf9f])pid[_0x38cf9f][_0x2504cb(0x349)]({'function':_0x2504cb(0x14d),'args':null});}}}),tgBot[_0x35e962(0x18c)](/portfolio_(.+)/,async _0x531604=>{const _0xd4a365=_0x35e962,_0x303e73=_0x531604[_0xd4a365(0x1b8)][0x1];_0x531604[_0xd4a365(0x21f)]();if(pid[_0x303e73])pid[_0x303e73][_0xd4a365(0x349)]({'function':'sendPortfolioTelegram','args':null});}),tgBot[_0x35e962(0x208)](_0x35e962(0x1fa),async _0x4354a0=>{const _0x455a66=_0x35e962,_0x383379=_0x455a66(0x1fa);await zipFiles(_0x383379);const _0x5251a8=zippath+(_0x383379+_0x455a66(0x1ad));_0x4354a0[_0x455a66(0x1cc)]({'source':_0x5251a8})[_0x455a66(0x193)](()=>{})[_0x455a66(0x24c)](_0x250430=>logger[_0x455a66(0x33e)](_0x455a66(0x25b)+_0x383379+_0x455a66(0x150),_0x250430));}),tgBot[_0x35e962(0x208)](_0x35e962(0x1e7),async _0xd5da70=>{const _0x1823c1=_0x35e962,_0x267fc3=_0x1823c1(0x1e7);await backupConfigFiles(),await zipFiles(_0x267fc3);const _0x2f64d4=zippath+(_0x267fc3+'.zip');_0xd5da70[_0x1823c1(0x1cc)]({'source':_0x2f64d4})[_0x1823c1(0x193)](()=>{})[_0x1823c1(0x24c)](_0x3c2f42=>logger[_0x1823c1(0x33e)](_0x1823c1(0x25b)+_0x267fc3+_0x1823c1(0x150),_0x3c2f42));}),tgBot[_0x35e962(0x208)](_0x35e962(0x2b6),async _0x12f775=>{const _0x5c61c1=_0x35e962;await getMessages();if(!updateAvailable)await sendTelegram(_0x12f775[_0x5c61c1(0x358)]['id'],_0x5c61c1(0x347));else{if(!validInstallation)await sendTelegram(_0x12f775[_0x5c61c1(0x358)]['id'],'Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update');else{const _0x6d44a2=Markup[_0x5c61c1(0x1d0)]([Markup[_0x5c61c1(0x177)][_0x5c61c1(0x14b)](_0x5c61c1(0x265),_0x5c61c1(0x1a6)),Markup['button']['callback']('No',_0x5c61c1(0x2bf))]);_0x12f775['reply']('Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?',_0x6d44a2);}}}),tgBot[_0x35e962(0x18c)](/update_(.+)/,async _0x573ef0=>{const _0x3115de=_0x35e962,_0x56f622=_0x573ef0[_0x3115de(0x1b8)][0x1];_0x573ef0[_0x3115de(0x21f)](),_0x56f622=='yes'&&(await sendTelegram(_0x573ef0[_0x3115de(0x358)]['id'],_0x3115de(0x19b)),updateBB('update')),_0x56f622=='no'&&await sendTelegram(_0x573ef0[_0x3115de(0x358)]['id'],_0x3115de(0x314));}),tgBot[_0x35e962(0x208)]('reinstall',async _0x44d028=>{const _0x42accd=_0x35e962;if(!validInstallation)await sendTelegram(_0x44d028[_0x42accd(0x358)]['id'],'Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation');else{const _0x4cc0ce=Markup[_0x42accd(0x1d0)]([Markup['button'][_0x42accd(0x14b)](_0x42accd(0x265),_0x42accd(0x31d)),Markup['button'][_0x42accd(0x14b)]('No',_0x42accd(0x276))]);_0x44d028[_0x42accd(0x19d)](_0x42accd(0x361),_0x4cc0ce);}}),tgBot[_0x35e962(0x18c)](/reinstall_(.+)/,async _0x4013ed=>{const _0x33d6c6=_0x35e962,_0x1b6751=_0x4013ed[_0x33d6c6(0x1b8)][0x1];_0x4013ed[_0x33d6c6(0x21f)](),_0x1b6751=='yes'&&(await sendTelegram(_0x4013ed[_0x33d6c6(0x358)]['id'],_0x33d6c6(0x1d4)),updateBB(_0x33d6c6(0x332))),_0x1b6751=='no'&&await sendTelegram(_0x4013ed[_0x33d6c6(0x358)]['id'],_0x33d6c6(0x27a));}),tgBot[_0x35e962(0x208)](_0x35e962(0x319),async _0x256f83=>{const _0x838bee=_0x35e962,_0x27c7fd=getBotsWithMode();if(_0x27c7fd['length']==0x0)await sendTelegram(_0x256f83[_0x838bee(0x358)]['id'],'No\x20bots\x20running\x20right\x20now');else{let _0x2a1131=[],_0x49d694=[];const _0x5b669a=0x2;let _0x549487=0x0;_0x27c7fd[_0x838bee(0x185)]((_0x55831a,_0x3bacd7)=>{const _0x2023ea=_0x838bee;if(_0x3bacd7%_0x5b669a==0x0)_0x49d694=[];_0x49d694[_0x2023ea(0x1a8)](Markup['button'][_0x2023ea(0x14b)](_0x2023ea(0x312)+_0x55831a[_0x2023ea(0x147)]+'\x20('+_0x55831a[_0x2023ea(0x1b4)]+')','toggle_'+_0x55831a[_0x2023ea(0x147)])),_0x3bacd7%_0x5b669a==0x0&&(_0x2a1131[_0x549487]=_0x49d694,_0x549487++);});const _0x3e3234=Markup[_0x838bee(0x1d0)](_0x2a1131);_0x256f83[_0x838bee(0x19d)](_0x838bee(0x212),_0x3e3234);}}),tgBot['action'](/toggle_(.+)/,async _0x5e285b=>{const _0x37e97a=_0x35e962,_0x14d29d=_0x5e285b[_0x37e97a(0x1b8)][0x1];_0x5e285b[_0x37e97a(0x21f)]();const _0x18b06b=getBotsWithMode(),_0x3c10f4=_0x18b06b['find'](_0x38608a=>_0x38608a['botID']==_0x14d29d),_0x54e196=_0x3c10f4[_0x37e97a(0x1b4)]==_0x37e97a(0x2de)?_0x37e97a(0x1b2):_0x37e97a(0x2de);await sendTelegram(_0x5e285b[_0x37e97a(0x358)]['id'],_0x37e97a(0x249)+_0x14d29d+'\x20to\x20'+_0x54e196+_0x37e97a(0x350)),toggleBotMode(_0x14d29d);}),tgBot[_0x35e962(0x208)](_0x35e962(0x18a),async _0x1d8857=>{const _0x46a913=_0x35e962;let _0x303a58='';config[_0x46a913(0x185)](_0x49808f=>{const _0x36509f=_0x46a913;_0x303a58+=_0x36509f(0x312)+_0x49808f[_0x36509f(0x147)]+':\x20'+_0x49808f[_0x36509f(0x301)]+'\x0a';}),await sendTelegram(_0x1d8857[_0x46a913(0x358)]['id'],_0x303a58,{'parse_mode':_0x46a913(0x2a5)});}),tgBot['command']('help',async _0x29d543=>{const _0xc0a692=_0x35e962;await sendTelegram(_0x29d543[_0xc0a692(0x358)]['id'],_0x5e98d5);}),process['once'](_0x35e962(0x2a7),()=>tgBot[_0x35e962(0x2dc)](_0x35e962(0x2a7))),process[_0x35e962(0x22f)](_0x35e962(0x2cf),()=>tgBot[_0x35e962(0x2dc)]('SIGTERM')),tgBot[_0x35e962(0x1d6)]();}function disableTelegram(){tgBot&&tgBot['stop']();}async function sendTelegram(_0x22a0fc,_0x4b9426,_0x4f9407){const _0xee708=_0x47af02;_0x4f9407={..._0x4f9407,'disable_web_page_preview':!![]};try{await tgBot[_0xee708(0x362)]['sendMessage'](_0x22a0fc,_0x4b9426,_0x4f9407);}catch(_0x53819c){logger['debug']('Telegram\x20error:',_0x53819c);}}async function sendTelegramBot(_0x108424,_0x494ec5){const _0x3ade19=_0x47af02;if(settings[_0x3ade19(0x1ec)]){if(settings['telegramEvents']==_0x3ade19(0x2af)||(_0x494ec5[_0x3ade19(0x218)]==_0x3ade19(0x22d)||_0x494ec5['type']=='warning'||_0x494ec5[_0x3ade19(0x218)]==_0x3ade19(0x19f))&&settings[_0x3ade19(0x20a)]=='alerts'||_0x494ec5['type']==_0x3ade19(0x2d1)&&settings[_0x3ade19(0x20a)]==_0x3ade19(0x2d6)){if(tgBot&&settings['telegramChatId']){if(_0x494ec5[_0x3ade19(0x15d)])await sendTelegram(settings[_0x3ade19(0x288)],_0x494ec5['botname']+'\x20>\x20'+_0x494ec5[_0x3ade19(0x1ae)]);else await sendTelegram(settings[_0x3ade19(0x288)],_0x3ade19(0x312)+_0x108424+_0x3ade19(0x2ac)+_0x494ec5[_0x3ade19(0x1ae)]);}}}}function _0x4f45(){const _0x190205=['auto','simple','logs/','\x1b[31m','getHours','username','ipaddr.js','\x20|\x20client:\x20...','\x1b[36m','password','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','=>\x20Go\x20to\x20#CYA#http://127.0.0.1:','params','exit','restore_yes_','kind','port','padStart','reason','defaults','keys','Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files','Telegraf\x20error:','ETH','tkn','apiKey','1325648lIxpVw','size',',\x20must\x20be\x20a\x204\x20digit\x20number','handshake','bb/','status','createWriteStream','close','jsonwebtoken','botname','Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot','secure','staging','User\x20has\x20been\x20validated',')\x20|\x20Bot\x20','config/','reload','function','express','Restore\x20backup\x20file\x20','logout','live','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','readdirSync','Network\x20Interfaces:','Bot\x20',')\x20\x20\x20|\x20Bot\x20','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files','2FA\x20login\x20token\x20generated','Unauthorized\x20attempt\x20to\x20log\x20out','log','toggle','token','format','versions','reinstall_yes','login\x20token\x20valid','File\x20uploaded','max','temporary\x20access\x20timeout','text','sha256','constructor','range','on_','pidExpireLogin','updatebotmanager','/:bot/coins','code','306TmSwua','store-settings','bbvNew','login\x20token\x20generated','getDate','All','--------------------------------------','reinstall','full','DEFLATE','update-bb','writeFileSync','30\x20min','pidRefreshToken','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','\x1b[0m','add-bot','tempaccess_reject_','output-002.log','debug','Error\x20details:','Invalid\x20username\x20or\x20IP\x20address','Token\x20blacklisted','fork','telegramUsername','\x1b[35m','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','reset-history','Your\x20installation\x20is\x20already\x20up\x20to\x20date','startsWith','send','yargs/yargs','Node.js\x20v','Error:\x20Invalid\x20argument\x20','encryptedUuid','login2fa_','tempaccess_30_','\x20mode','-results.json','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','remove','bbPassword','7205nJECHZ','login\x20required','logged\x20out','chat','generateKeyPair','Unauthorized\x20attempt\x20to\x20download\x20','ipv6','Notifications\x20disabled\x0a','enabled','get-messages','Bot\x20Mgr\x20>\x20','uncaughtException','Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?','telegram','socket','Markdown','update-bot','botID','async','restore-backup-file','exec','callback','-----------------------------------------------------------------------------------','sendPortfolioTelegram','stopped','telegramToken','\x20files\x20over\x20Telegram:','secret','express-fileupload','filter','\x20(2)','emitHistory','telegram2FaApproval','decrypt','status\x20code\x20401','Unauthorized\x20attempt\x20to\x20store\x20configuration','Unauthorized\x20attempt\x20to\x20delete\x20alerts','existsSync','Password\x20has\x20been\x20reset\x20to:\x20','showname','You\x20can\x20use\x20the\x20following\x20commands:\x0a','alias','Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history','hashSync','expiry','portfolio','getPortfolio','=>\x20Go\x20to\x20#CYA#http://','https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master','post','rsa','/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a','emit','alerts','toggleBotMode','2FA','loadAsync','inherit','readFileSync','IPv4','resetpw_yes','\x20-\x20','/status\x20-\x20show\x20bot(s)\x20status\x0a','-config.json','clientip','button','bbvReceive','<b>Balance\x20Bot\x20Status:</b>\x0a','Starting\x20(','track','NTBA_FIX_319','value','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','#RES#\x20if\x20running\x20on\x20server','bot-','0.0.0','Logged\x20out\x20user\x20...','uuid-random','forEach','Ok,\x20will\x20send\x20order\x20notifications\x20only','All\x20bots\x20running\x20right\x20now','Restore\x20process\x20aborted','5\x20min','names','disabled','action','73977XccpyX','telegramIpApproval','(((.+)+)+)+$','2FA\x20login\x20rejected','Invalid\x20IP\x20address','argv','then','3000','confirm-message','_nsps','includes','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','reinstall-bb','No\x20bots\x20running\x20right\x20now','Starting\x20Balance\x20Bot\x20update','************','reply','Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)','success','f2aRequired','Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U','get-portfolio','Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration','headers','temporary\x20token\x20generated','update_yes','store','push','get-starting-balances','disconnect','get','toString','.zip','event','#RED#Balance\x20Bot\x20is\x20already\x20running\x20on\x20port\x20','isDirectory','privateKeyToPem','manual','running','mode','deleteHistoryAlerts','apiPassword','invalid\x20credentials','match','latestversion','set','output-000.log','bbUsername','accept','output-001.log','<b>Telegram\x20Bot\x20Status:</b>\x0a','privateKeyFromPem','getSeconds','files','2FA\x20login\x20required','backup-files','Backup\x20file\x20uploaded','bb-settings.json','messages','slice','#RES#','***','node-forge','replyWithDocument','Unauthorized\x20attempt\x20to\x20show\x20configuration','string','botmanager','inlineKeyboard','No\x20authentication\x20token','publicKey','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','Starting\x20Balance\x20Bot\x20reinstallation','/:bot/portfolio','launch','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?','getMonth','publicKeyToPem','Idling\x20(','headless','Access\x20enabled\x20for\x20','lastmsgtelegram','/download/:type','/update\x20-\x20update\x20Balance\x20Bot\x0a','/disable\x20-\x20disable\x20notifications\x0a','/off\x20-\x20stop\x20bot(s)\x0a','12RUUlIK','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)','7756050FySwZG','find','sendFile','backup','listen','getTime','Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot','reject','telegramEnabled','Deleted\x20Bot\x20','settings.','host','join','get-backup-files','\x20|\x20user:\x20...','assign','apiSecret','config_alerts','Backup\x20file\x20unzipped\x20and\x20stored','yes','build2','output-003.log','logs','|@|','#RES#\x20if\x20running\x20locally\x0a','write','createServer','settings','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','backup-full','bot','login\x20not\x20required','Restarting\x20Bot\x20','6b67f3d61ee94b8f5c80b4affef4c4d9','portfolio_','command','isIPv4MappedAddress','telegramEvents','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','::1','CoinMarketCap\x20API\x20key\x20validated','search','/start','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','initclient','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','Failed\x20to\x20download\x20','showConfig','Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file','reset-password','compareSync','type','\x20|\x20','backup-full@','Notifications\x20enabled\x0a','date-fns','private','bot.js','editMessageReplyMarkup','timestamp','remoteAddress','map','Alerts','$1_$2_$3','tempaccess_15_','sockets','Unauthorized\x20attempt\x20to\x20get\x20portfolio','off_','15\x20min','config_all','2FA\x20required','metrics_','error','util','once','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20see\x20logs\x20for\x20details','Unauthorized\x20attempt\x20to\x20get\x20messages','/on\x20-\x20start\x20bot(s)\x0a','Notifications\x20disabled','Unauthorized\x20attempt\x20to\x20delete\x20bot','telegrammsg','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20','sort','Notifications\x20enabled','Session\x20expired\x20for\x20user\x20...','/backup\x20-\x20receive\x20backup\x20files\x0a','1110032mObbrw','parse','server','number','rmSync','resetHistory','login','config','temporaryAccessAllowed','getMinutes','/:bot/configuration','access','address','exp','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','/:bot','loginRequired','catch','restore_no_','statSync','production','temp/','Error\x20removing\x20old\x20backup\x20files:','from','bots','version.json','config_orders','Notifications\x20types:\x20','download','-performance.json','child_process','name','Error\x20sending\x20','/logs\x20-\x20receive\x20log\x20files\x0a','privateKey','storeConfiguration','/upload-backup','3018zFEOnm','/:bot/performance','cloneDeep','Setting\x20access:\x20','/names\x20-\x20show\x20bot\x20names\x0a','Yes','toIPv4MappedAddress','pki','\x20(1)','randomFillSync','Login\x20accepted','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','any','started','auth','store-configuration','randomBytes','show','internal','\x1b[33m','socket.io','timeshift','reinstall_no','bb-secure.json','lowdb/adapters/FileSync','Unauthorized\x20login\x20attempt\x20(timeout)','Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled','conn','clients','build','bcryptjs','lowdb','738227RhqpEr','start','create','unlinkSync',':\x20Bot\x20Mgr\x20>\x20','file','/metrics\x20-\x20show\x20bot\x20performance\x0a','\x20only\x0a','telegramChatId','notification','user','backup/','split','(staging)','sortBy','Unauthorized\x20attempt\x20to\x20update\x20bot','message','sendMetricsTelegram','storeHeadless','tempaccess_5_','min','Password\x20reset\x20rejected','length','marketcapApi','title','ipc','/:bot/history','entries','family','hasOwnProperty','jszip','graphql-request','All\x20bots','stringify','use','uuid','\x1b[34m','HTML','Unauthorized\x20attempt\x20to\x20update\x20settings','SIGINT','lastmsgemitted','blacklist','zip/','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','\x20>\x20','getStartingBalances','85688KsTVqX','all','new-disabled','binary','mtime','replace','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)','temporary\x20access\x20rejected','update','Running\x20#RED#Balance\x20Bot\x20v','index.html','http','delete-bot','mkdirSync','axios','store-fiat','api-eu.mixpanel.com','update_no','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run','restart','-events.json','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','[ip-address]','Login\x20rejected','kill','static','copyFileSync','userid','getFullYear','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','init','test','SIGTERM','path','order','Starting\x20#RED#Balance\x20Bot\x20v','request','allow','Server','orders','/output-000.log','getUTCHours','whitelist','onepagemode','new','stop','Unauthorized\x20attempt\x20to\x20confirm\x20message'];_0x4f45=function(){return _0x190205;};return _0x4f45();}async function sendTelegramMsg(_0x6debc5,_0x26b40b=_0x47af02(0x2a5)){const _0x5af636=_0x47af02;return settings[_0x5af636(0x1ec)]&&tgBot&&settings['telegramChatId']?(await sendTelegram(settings[_0x5af636(0x288)],_0x6debc5,{'parse_mode':_0x26b40b}),!![]):![];}function getDeviceWithIp(_0x57d71d){const _0x484e4b=_0x47af02;return devices[_0x484e4b(0x1e5)](_0x85dfea=>_0x85dfea['ip']===_0x57d71d);}async function temporaryAccess2FA(_0xa21eaf,_0x11c223){const _0x4a24fd=_0x47af02;let _0x4dacbd=new Date(),_0x231ab6=![];if(lastIpApproval){if(_0x4dacbd-lastIpApproval<0x1388)_0x231ab6=!![];}lastIpApproval=new Date();if(_0x231ab6)return;if(tgBot&&settings['telegramChatId']){const _0x1e7054=uuidRandom();tmpStorage[_0x1e7054]={'uuid':_0xa21eaf,'externalip':_0x11c223};const _0x5e39dd=Markup[_0x4a24fd(0x1d0)]([Markup[_0x4a24fd(0x177)][_0x4a24fd(0x14b)](_0x4a24fd(0x189),_0x4a24fd(0x293)+_0x1e7054),Markup[_0x4a24fd(0x177)][_0x4a24fd(0x14b)](_0x4a24fd(0x229),_0x4a24fd(0x225)+_0x1e7054),Markup[_0x4a24fd(0x177)][_0x4a24fd(0x14b)](_0x4a24fd(0x337),_0x4a24fd(0x34f)+_0x1e7054),Markup[_0x4a24fd(0x177)][_0x4a24fd(0x14b)](_0x4a24fd(0x1eb),_0x4a24fd(0x33c)+_0x1e7054)]);await sendTelegram(settings['telegramChatId'],_0x4a24fd(0x236)+normalizeIP(_0x11c223)[_0x4a24fd(0x271)]+'\x20?',_0x5e39dd),tgBot[_0x4a24fd(0x18c)](/tempaccess_(.+)_(.+)/,async _0x15bbf2=>{const _0x28d75b=_0x4a24fd,_0x504082=_0x15bbf2[_0x28d75b(0x1b8)][0x1],_0x1bf006=_0x15bbf2['match'][0x2],{uuid:_0x478457,externalip:_0x5dd2c9}=tmpStorage[_0x1bf006];delete tmpStorage[_0x1bf006],_0x15bbf2[_0x28d75b(0x21f)](),devices[_0x478457][_0x28d75b(0x18e)]={'clientip':_0x5dd2c9,'timestamp':new Date()[_0x28d75b(0x1e9)](),'expiry':_0x504082},_0x504082!=_0x28d75b(0x1eb)?(await sendTelegram(_0x15bbf2[_0x28d75b(0x358)]['id'],_0x28d75b(0x1dc)+_0x504082+'\x20minutes',{'parse_mode':_0x28d75b(0x2a5)}),io['to'](_0x478457)[_0x28d75b(0x16a)]('status',{'access':{'allow':![],'reason':_0x28d75b(0x308),'token':null}})):(await sendTelegram(_0x15bbf2['chat']['id'],'Temporary\x20access\x20rejected'),io['to'](_0x478457)[_0x28d75b(0x16a)](_0x28d75b(0x2fd),{'access':{'allow':![],'reason':_0x28d75b(0x2b5),'token':null}}));});}}async function loginAccess2FA(_0x1cb455,_0x3f7fe0){const _0x1e5453=_0x47af02;if(tgBot&&settings[_0x1e5453(0x288)]){const _0x413a66=uuidRandom();tmpStorage[_0x413a66]={'uuid':_0x1cb455,'externalip':_0x3f7fe0};const _0x316a0d=Markup[_0x1e5453(0x1d0)]([Markup['button'][_0x1e5453(0x14b)](_0x1e5453(0x1bd),_0x1e5453(0x34e)+loginExpiry+'_'+_0x413a66),Markup['button'][_0x1e5453(0x14b)]('reject','login2fa_reject_'+_0x413a66)]);await sendTelegram(settings[_0x1e5453(0x288)],'Allow\x20login\x20from\x20IP\x20address\x20'+normalizeIP(_0x3f7fe0)[_0x1e5453(0x271)]+'\x20?',_0x316a0d),tgBot[_0x1e5453(0x18c)](/login2fa_(.+)_(.+)/,async _0x226702=>{const _0x59b108=_0x1e5453,_0x302de4=_0x226702[_0x59b108(0x1b8)][0x1],_0x18a08d=_0x226702[_0x59b108(0x1b8)][0x2],{uuid:_0x4fe9e3,externalip:_0x3c6bea}=tmpStorage[_0x18a08d];delete tmpStorage[_0x18a08d],_0x226702[_0x59b108(0x21f)](),devices[_0x4fe9e3]['telegram2FaApproval']={'clientip':_0x3c6bea,'timestamp':new Date()[_0x59b108(0x1e9)](),'expiry':_0x302de4},_0x302de4!=_0x59b108(0x1eb)?(await sendTelegram(_0x226702[_0x59b108(0x358)]['id'],_0x59b108(0x26a),{'parse_mode':_0x59b108(0x2a5)}),io['to'](_0x4fe9e3)[_0x59b108(0x16a)](_0x59b108(0x2fd),{'access':{'allow':![],'reason':'reload','token':null}})):(await sendTelegram(_0x226702[_0x59b108(0x358)]['id'],_0x59b108(0x2c6)),io['to'](_0x4fe9e3)[_0x59b108(0x16a)]('status',{'access':{'allow':![],'reason':_0x59b108(0x190),'token':null}}));});}}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x51fa6e=_0x47af02;return dbConfig[_0x51fa6e(0x1ab)](_0x51fa6e(0x253))[_0x51fa6e(0x28e)](_0x51fa6e(0x147))['filter']({'status':_0x51fa6e(0x35d)})[_0x51fa6e(0x17d)]()||[];}function getDisabledBots(){const _0x1f3944=_0x47af02;return dbConfig[_0x1f3944(0x1ab)](_0x1f3944(0x253))['sortBy'](_0x1f3944(0x147))[_0x1f3944(0x153)]({'status':_0x1f3944(0x18b)})[_0x1f3944(0x17d)]()||[];}function getBotAttributes(_0x93938b){const _0x5b4374=_0x47af02;let _0x541204={};const _0x5aae76=configpath+'bot-'+_0x93938b+'-config.json',_0x124454=fs[_0x5b4374(0x15b)](_0x5aae76);if(_0x124454){const _0x32002e=fs['readFileSync'](_0x5aae76);try{const _0x4fe143=JSON[_0x5b4374(0x23c)](_0x32002e),_0x340802=_0x4fe143?_0x4fe143[_0x5b4374(0x203)][0x0][_0x5b4374(0x1db)]:![];_0x541204[_0x5b4374(0x1b4)]=_0x340802?_0x5b4374(0x2de):_0x5b4374(0x1b2),_0x541204[_0x5b4374(0x301)]=_0x4fe143?_0x4fe143['bot'][0x0][_0x5b4374(0x301)]:_0x5b4374(0x312)+_0x93938b;}catch(_0x1d6db7){_0x541204[_0x5b4374(0x1b4)]=_0x5b4374(0x1b2),_0x541204[_0x5b4374(0x301)]=_0x5b4374(0x312)+_0x93938b;}}else _0x541204[_0x5b4374(0x1b4)]=_0x5b4374(0x1b2),_0x541204[_0x5b4374(0x301)]=_0x5b4374(0x312)+_0x93938b;return _0x541204;}function getBotsWithMode(){const _0x58a646=_0x47af02,_0x2f9baa=dbConfig[_0x58a646(0x1ab)](_0x58a646(0x253))[_0x58a646(0x28e)]('botID')[_0x58a646(0x17d)]()||[];return _0x2f9baa[_0x58a646(0x185)](_0x36fc8d=>{const _0x31c567=_0x58a646;let _0x4b2313=getBotAttributes(_0x36fc8d[_0x31c567(0x147)]);_0x36fc8d[_0x31c567(0x1b4)]=_0x4b2313[_0x31c567(0x1b4)];}),_0x2f9baa;}function getBotExchanges(){const _0x5837f4=_0x47af02;let _0x45b8b8=[];const _0x57218b=dbConfig[_0x5837f4(0x1ab)]('bots')[_0x5837f4(0x28e)]('botID')[_0x5837f4(0x17d)]()||[];_0x57218b[_0x5837f4(0x185)](_0x46c2dc=>{const _0x537a23=_0x5837f4;if(_0x46c2dc['status']==_0x537a23(0x35d)){const _0x49029f=configpath+'bot-'+_0x46c2dc[_0x537a23(0x147)]+_0x537a23(0x175),_0x8f7d23=fs[_0x537a23(0x15b)](_0x49029f);let _0x19c5e1;if(_0x8f7d23){const _0x1f85d5=fs[_0x537a23(0x170)](_0x49029f);try{const _0x34dae5=JSON[_0x537a23(0x23c)](_0x1f85d5);_0x19c5e1=_0x34dae5?_0x34dae5[_0x537a23(0x203)][0x0]['exchange']:null;}catch(_0x3d94db){}}if(_0x19c5e1)_0x45b8b8['push'](_0x19c5e1);}});const _0x310ecd=[...new Set(_0x45b8b8)]['sort']();return _0x310ecd;}async function initUser(){const _0x9828ad=_0x47af02;if(!settings[_0x9828ad(0x2ca)]){const _0x4a7323=uuidRandom();mixpanel[_0x9828ad(0x15f)](_0x4a7323),updateSetting(_0x9828ad(0x2ca),_0x4a7323);}}async function initSecure(){const _0x1d8e71=_0x47af02;let _0x176f8c=getSecure();if(!_0x176f8c[_0x1d8e71(0x29d)](_0x1d8e71(0x151))){let _0x160bfe=await generateKeys();_0x176f8c[_0x1d8e71(0x1d2)]=_0x160bfe['publicKey'],_0x176f8c[_0x1d8e71(0x25d)]=_0x160bfe['privateKey'],_0x176f8c[_0x1d8e71(0x151)]=crypto[_0x1d8e71(0x270)](0x20)[_0x1d8e71(0x1ac)]('hex');;storeSecure(_0x176f8c);}}function getSettings(){const _0x311f9b=_0x47af02;return dbSettings['get'](_0x311f9b(0x1ff))[_0x311f9b(0x17d)]()||{};}function getSecure(){const _0x4c81b2=_0x47af02;return dbSecure[_0x4c81b2(0x1ab)](_0x4c81b2(0x303))['value']()||{};}function getBlacklist(){const _0x2506a2=_0x47af02;return dbSecure[_0x2506a2(0x1ab)](_0x2506a2(0x2a9))[_0x2506a2(0x17d)]()||[];}function broadcastToBots(_0x283bb6,_0x126dec){config['forEach'](_0x359e58=>{const _0x121052=_0x25a8;if(_0x359e58[_0x121052(0x2fd)]=='enabled'&&_0x359e58[_0x121052(0x30d)]==_0x121052(0x1b3)||_0x359e58['status']==_0x121052(0x2db)&&_0x359e58[_0x121052(0x30d)]==_0x121052(0x1b3)){if(pid[_0x359e58['botID']])pid[_0x359e58[_0x121052(0x147)]][_0x121052(0x349)]({[_0x283bb6]:_0x126dec});}});}async function storeSettings(_0x91e408,_0x3c414f=![]){const _0x280800=_0x47af02;_0x91e408={...settings,..._0x91e408};if(_0x3c414f&&_0x91e408[_0x280800(0x354)]!=_0x280800(0x19c)&&_0x91e408[_0x280800(0x354)]!=_0x280800(0x1ca)&&_0x91e408['bbPassword']!=''){const _0xd8001b=decryptRSA(secure['privateKey'],_0x91e408[_0x280800(0x354)])[_0x280800(0x28c)]('|@|')[0x0],_0x5f03a4=bcrypt['hashSync'](_0xd8001b,saltRounds);_0x91e408={..._0x91e408,'bbPassword':_0x5f03a4};}if(_0x3c414f&&_0x91e408[_0x280800(0x14f)]!=_0x280800(0x19c)&&_0x91e408['telegramToken']!=_0x280800(0x1ca)&&_0x91e408[_0x280800(0x14f)]!=''){const _0x18e118=decryptRSA(secure[_0x280800(0x25d)],_0x91e408['telegramToken'])['split']('|@|')[0x0];_0x91e408={..._0x91e408,'telegramToken':_0x18e118};}if(_0x3c414f&&_0x91e408[_0x280800(0x297)]!=_0x280800(0x19c)&&_0x91e408[_0x280800(0x297)]!=_0x280800(0x1ca)&&_0x91e408[_0x280800(0x297)]!=''){const _0x2d0e6d=decryptRSA(secure['privateKey'],_0x91e408[_0x280800(0x297)])['split'](_0x280800(0x1fb))[0x0];_0x91e408={..._0x91e408,'marketcapApi':_0x2d0e6d};}const _0x4eec2f=_0x91e408['telegramToken']!=_0x280800(0x19c)&&_0x91e408[_0x280800(0x14f)]!=settings[_0x280800(0x14f)]||_0x91e408[_0x280800(0x343)]!=settings['telegramUsername'],_0x44bc0d=_0x91e408[_0x280800(0x14f)]==''||_0x91e408[_0x280800(0x343)]=='',_0x32154b=_0x91e408[_0x280800(0x297)]&&_0x91e408[_0x280800(0x297)]!=_0x280800(0x19c)&&_0x91e408['marketcapApi']!=settings['marketcapApi'];_0x4eec2f&&(_0x91e408[_0x280800(0x288)]=null,_0x91e408[_0x280800(0x20a)]=_0x280800(0x2af));for(const [_0x1c066c,_0x201b20]of Object[_0x280800(0x29b)](_0x91e408)){if(_0x1c066c==_0x280800(0x14f)&&_0x201b20==_0x280800(0x19c)){_0x91e408[_0x280800(0x14f)]=settings[_0x280800(0x14f)];continue;};if(_0x1c066c==_0x280800(0x354)&&_0x201b20==_0x280800(0x19c)){_0x91e408['bbPassword']=settings['bbPassword'];continue;};if(_0x1c066c==_0x280800(0x297)&&_0x201b20==_0x280800(0x19c)){_0x91e408[_0x280800(0x297)]=settings['marketcapApi'];continue;};dbSettings[_0x280800(0x1ba)](_0x280800(0x1ee)+_0x1c066c,_0x201b20)[_0x280800(0x1fd)]();}settings=_0x91e408,io['to']('botmanager')[_0x280800(0x16a)](_0x280800(0x1ff),cleanSettings()),broadcastToBots(_0x280800(0x275),settings[_0x280800(0x275)]),broadcastToBots(_0x280800(0x2da),settings['onepagemode']),broadcastToBots(_0x280800(0x297),settings[_0x280800(0x297)]);if(_0x4eec2f&&!_0x44bc0d)initTelegram();if(_0x4eec2f&&_0x44bc0d)disableTelegram();getAllClients()['forEach'](_0x48ee4c=>{const _0x3fceea=_0x280800;getSocket(_0x48ee4c['id'])['emit'](_0x3fceea(0x2fd),{'access':{'allow':![],'reason':'reload','token':null}});}),_0x32154b&&(await sleep(0xbb8),testMarketcapApi(_0x91e408[_0x280800(0x297)]));}async function testMarketcapApi(_0x5959de){const _0x260593=_0x47af02,_0x2e21e7=['BCT',_0x260593(0x2f5)];try{await axios['get'](_0x260593(0x201),{'headers':{'X-CMC_PRO_API_KEY':_0x5959de},'params':{'symbol':_0x2e21e7[_0x260593(0x1ac)]()}});}catch(_0x4d9a68){_0x4d9a68[_0x260593(0x1ac)]()[_0x260593(0x197)](_0x260593(0x158))?(io['to'](_0x260593(0x1cf))[_0x260593(0x16a)](_0x260593(0x289),_0x260593(0x339)),logger['full'](_0x260593(0x339))):(io['to'](_0x260593(0x1cf))[_0x260593(0x16a)](_0x260593(0x289),_0x260593(0x230)),logger[_0x260593(0x333)](_0x260593(0x230)),logger[_0x260593(0x33e)](_0x260593(0x33f),_0x4d9a68[_0x260593(0x1ac)]()+_0x260593(0x173)+_0x4d9a68[_0x260593(0x32a)]));return;}logger['debug'](_0x260593(0x20d));}function updateSetting(_0x3f6f43,_0x215384){const _0x3edfe6=_0x47af02;dbSettings[_0x3edfe6(0x1ba)](_0x3edfe6(0x1ee)+_0x3f6f43,_0x215384)[_0x3edfe6(0x1fd)](),settings=getSettings(),io['to']('botmanager')[_0x3edfe6(0x16a)]('settings',cleanSettings());}function storeSecure(_0x2b698e){const _0x161632=_0x47af02;dbSecure['get']('secure')[_0x161632(0x1a8)](_0x2b698e)['write'](),secure=_0x2b698e;}function addBlacklist(_0x4786d9){const _0x488b7f=_0x47af02;cleanBlacklist();let _0x564b2c;devices[_0x4786d9][_0x488b7f(0x18e)]?_0x564b2c=Math[_0x488b7f(0x320)](devices[_0x4786d9][_0x488b7f(0x18e)]['expiry'],loginExpiry):_0x564b2c=loginExpiry,dbSecure['get'](_0x488b7f(0x2a9))[_0x488b7f(0x1a8)]({'expiry':new Date()['getTime']()+_0x564b2c*0x3c*0x3e8,'token':devices[_0x4786d9][_0x488b7f(0x246)][_0x488b7f(0x31a)]})[_0x488b7f(0x1fd)](),blacklist=dbSecure[_0x488b7f(0x1ab)](_0x488b7f(0x2a9))[_0x488b7f(0x17d)]();}function cleanBlacklist(){const _0x1b89b1=_0x47af02;let _0x225fc7=dbSecure[_0x1b89b1(0x1ab)](_0x1b89b1(0x2a9))[_0x1b89b1(0x262)]()[_0x1b89b1(0x17d)](),_0x4d8123=new Date()[_0x1b89b1(0x1e9)]();_0x225fc7['forEach'](_0x52bf93=>{const _0x48955c=_0x1b89b1;_0x52bf93[_0x48955c(0x162)]<_0x4d8123&&dbSecure[_0x48955c(0x1ab)](_0x48955c(0x2a9))[_0x48955c(0x353)]({'expiry':_0x52bf93[_0x48955c(0x162)]})[_0x48955c(0x1fd)]();});}function initStates(){const _0x2a9370=_0x47af02;let _0x14f753=getConfiguration();_0x14f753[_0x2a9370(0x185)](_0x5b5e25=>{const _0x20914a=_0x2a9370;_0x5b5e25['live']=_0x20914a(0x14e);}),storeConfiguration(_0x14f753);}async function generateKeys(){const _0x421b42=_0x47af02,_0x5a390a=forge[_0x421b42(0x267)][_0x421b42(0x168)][_0x421b42(0x359)]({'bits':0x1000,'e':0x10001}),_0x27a957=forge[_0x421b42(0x267)][_0x421b42(0x1b1)](_0x5a390a[_0x421b42(0x25d)]),_0x517890=forge['pki'][_0x421b42(0x1d9)](_0x5a390a[_0x421b42(0x1d2)]);return{'privateKey':_0x27a957,'publicKey':_0x517890};}async function oneTimeMigration(){const _0x227755=_0x47af02;let _0x267a00=getSettings(),_0x28e5eb=![];!_0x267a00[_0x227755(0x29d)](_0x227755(0x1dd))&&(_0x267a00['lastmsgtelegram']=0x0,_0x28e5eb=!![]);!_0x267a00['hasOwnProperty'](_0x227755(0x2a8))&&(_0x267a00[_0x227755(0x2a8)]=0x0,_0x28e5eb=!![]);!_0x267a00[_0x227755(0x29d)](_0x227755(0x1b9))&&(_0x267a00[_0x227755(0x1b9)]=_0x227755(0x182),_0x28e5eb=!![]);!_0x267a00[_0x227755(0x29d)](_0x227755(0x2da))&&(_0x267a00[_0x227755(0x2da)]=![],_0x28e5eb=!![]);!_0x267a00[_0x227755(0x29d)](_0x227755(0x297))&&(_0x267a00[_0x227755(0x297)]='',_0x28e5eb=!![]);if(_0x28e5eb)storeSettings(_0x267a00);try{fs[_0x227755(0x310)](configbackuppath,{'withFileTypes':!![]})[_0x227755(0x185)](_0x35697b=>{const _0x13f72f=_0x227755;if(!_0x35697b[_0x13f72f(0x1b0)]()){if(!_0x35697b[_0x13f72f(0x25a)]['startsWith'](_0x13f72f(0x21a)))fs[_0x13f72f(0x283)](configbackuppath+_0x35697b[_0x13f72f(0x25a)]);}else fs[_0x13f72f(0x23f)](configbackuppath+_0x35697b['name'],{'recursive':!![]});});}catch(_0x33bc06){logger['debug'](_0x227755(0x251),_0x33bc06);}}function storeConfiguration(_0x48ec93){const _0x39530f=_0x47af02;dbConfig[_0x39530f(0x1ab)](_0x39530f(0x253))[_0x39530f(0x353)]()[_0x39530f(0x1fd)](),dbConfig[_0x39530f(0x1ab)]('bots')[_0x39530f(0x1a8)](..._0x48ec93)[_0x39530f(0x1fd)](),config=_0x48ec93;}async function resetPassword(){const _0x29df0d=_0x47af02;if(tgBot&&settings[_0x29df0d(0x288)]){const _0xfe9ab1=Markup[_0x29df0d(0x1d0)]([Markup[_0x29df0d(0x177)][_0x29df0d(0x14b)](_0x29df0d(0x1f7),_0x29df0d(0x172)),Markup[_0x29df0d(0x177)][_0x29df0d(0x14b)]('no','resetpw_no')]);await sendTelegram(settings[_0x29df0d(0x288)],'Do\x20you\x20want\x20to\x20reset\x20your\x20password?',_0xfe9ab1),tgBot[_0x29df0d(0x18c)](/resetpw_(.+)/,async _0x374b15=>{const _0x1755ac=_0x29df0d,_0x1c0251=_0x374b15[_0x1755ac(0x1b8)][0x1];_0x374b15[_0x1755ac(0x21f)]();if(_0x1c0251!='no'){const _0x4f3a97=0xf,_0x3287b7=_0x1755ac(0x2cc),_0x38d2fa=Array[_0x1755ac(0x252)](crypto[_0x1755ac(0x269)](new Uint32Array(_0x4f3a97)))[_0x1755ac(0x222)](_0x3f4706=>_0x3287b7[_0x3f4706%_0x3287b7[_0x1755ac(0x296)]])['join'](''),_0x5c073b=bcrypt[_0x1755ac(0x161)](_0x38d2fa,saltRounds);storeSettings({'bbPassword':_0x5c073b}),await sendTelegram(_0x374b15[_0x1755ac(0x358)]['id'],_0x1755ac(0x15c)+_0x38d2fa,{'parse_mode':_0x1755ac(0x2a5)});}else await sendTelegram(_0x374b15['chat']['id'],_0x1755ac(0x295));});}}async function confirmRestore(_0x42d15d,_0x32d102){const _0x1949fb=_0x47af02;io['to'](_0x1949fb(0x1cf))[_0x1949fb(0x16a)](_0x1949fb(0x289),_0x1949fb(0x302),_0x1949fb(0x19f));if(tgBot&&settings['telegramChatId']){const _0x1b04d2=uuidRandom();tmpStorage[_0x1b04d2]={'path':_0x42d15d,'filename':_0x32d102};const _0x2a5a13=Markup[_0x1949fb(0x1d0)]([Markup[_0x1949fb(0x177)][_0x1949fb(0x14b)](_0x1949fb(0x1f7),_0x1949fb(0x2ec)+_0x1b04d2),Markup[_0x1949fb(0x177)][_0x1949fb(0x14b)]('no',_0x1949fb(0x24d)+_0x1b04d2)]);await sendTelegram(settings['telegramChatId'],_0x1949fb(0x19e),_0x2a5a13),tgBot[_0x1949fb(0x18c)](/restore_(.+)_(.+)/,async _0x1e385c=>{const _0x7cde82=_0x1949fb,_0x3bfa42=_0x1e385c['match'][0x1],_0xf0ec44=_0x1e385c[_0x7cde82(0x1b8)][0x2],{path:_0x19464f,filename:_0x45be7e}=tmpStorage[_0xf0ec44];delete tmpStorage[_0xf0ec44],_0x1e385c[_0x7cde82(0x21f)](),_0x3bfa42==_0x7cde82(0x1f7)?(logger['debug']('Restore\x20process\x20confirmed'),await sendTelegram(_0x1e385c[_0x7cde82(0x358)]['id'],'Restoring\x20bot(s)\x20from\x20backup',{'parse_mode':_0x7cde82(0x2a5)}),unzipFile(_0x19464f,_0x45be7e)):(logger[_0x7cde82(0x33e)](_0x7cde82(0x188)),await sendTelegram(_0x1e385c['chat']['id'],'Restore\x20process\x20aborted'));});}}function getServerTime(){const _0x5232db=_0x47af02,_0x4a202c=new Date();return _0x4a202c[_0x5232db(0x2cb)]()+'/'+(_0x4a202c[_0x5232db(0x1d8)]()+0x1)['toString']()[_0x5232db(0x2ef)](0x2,'0')+'/'+_0x4a202c[_0x5232db(0x32f)]()['toString']()['padStart'](0x2,'0')+'\x20'+_0x4a202c[_0x5232db(0x2e2)]()[_0x5232db(0x1ac)]()[_0x5232db(0x2ef)](0x2,'0')+':'+_0x4a202c[_0x5232db(0x244)]()[_0x5232db(0x1ac)]()[_0x5232db(0x2ef)](0x2,'0')+':'+_0x4a202c['getSeconds']()[_0x5232db(0x1ac)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x20012d=_0x47af02,_0xd15ffa=shiftedTime();return _0xd15ffa[_0x20012d(0x2cb)]()+'/'+(_0xd15ffa['getMonth']()+0x1)[_0x20012d(0x1ac)]()['padStart'](0x2,'0')+'/'+_0xd15ffa[_0x20012d(0x32f)]()[_0x20012d(0x1ac)]()[_0x20012d(0x2ef)](0x2,'0')+'\x20'+_0xd15ffa['getHours']()['toString']()[_0x20012d(0x2ef)](0x2,'0')+':'+_0xd15ffa[_0x20012d(0x244)]()[_0x20012d(0x1ac)]()['padStart'](0x2,'0')+':'+_0xd15ffa[_0x20012d(0x1c1)]()[_0x20012d(0x1ac)]()[_0x20012d(0x2ef)](0x2,'0');}function getCleanTimeStamp(){const _0x437624=_0x47af02,_0x498d82=shiftedTime();return _0x498d82[_0x437624(0x2cb)]()+(_0x498d82[_0x437624(0x1d8)]()+0x1)[_0x437624(0x1ac)]()[_0x437624(0x2ef)](0x2,'0')+_0x498d82[_0x437624(0x32f)]()[_0x437624(0x1ac)]()[_0x437624(0x2ef)](0x2,'0')+'-'+_0x498d82['getHours']()[_0x437624(0x1ac)]()[_0x437624(0x2ef)](0x2,'0')+_0x498d82[_0x437624(0x244)]()[_0x437624(0x1ac)]()[_0x437624(0x2ef)](0x2,'0')+_0x498d82[_0x437624(0x1c1)]()['toString']()['padStart'](0x2,'0');}function shiftedTime(){const _0x58c425=_0x47af02,_0x299e66=new Date();let _0x1bda9e=_0x299e66;if(settings[_0x58c425(0x275)]&&settings[_0x58c425(0x275)]!==0x0)_0x1bda9e=fns['add'](_0x299e66,{'hours':settings['timeshift']});return _0x1bda9e;}async function startScheduler(){const _0x1a61f6=_0x47af02,_0xcc4592=new Date()[_0x1a61f6(0x2d8)](),_0x146309=shiftedTime()[_0x1a61f6(0x2e2)]();_0x146309==0x4&&backupConfigFiles(),_0x146309==0x0&&(rotateLogFiles(),logger[_0x1a61f6(0x33e)](_0x1a61f6(0x331)),logger[_0x1a61f6(0x33e)](_0x1a61f6(0x2b7)+serverversion+'#RES#\x20'+(environment==_0x1a61f6(0x304)?_0x1a61f6(0x28d):'')),logger['debug']('--------------------------------------')),_0xcc4592%0x6==0x0&&triggerAnalytics(),_0xcc4592%0x6==0x0&&getMessages(),await sleep(schedulerInterval),startScheduler();}async function restoreBackupFile(_0x2c0ced){const _0x514ac4=_0x47af02;logger[_0x514ac4(0x33e)](_0x514ac4(0x30b)+_0x2c0ced);const _0x1583f1=getBotsWithMode();_0x1583f1[_0x514ac4(0x296)]>0x0?confirmRestore(configbackuppath,_0x2c0ced):unzipFile(configbackuppath,_0x2c0ced);}function _0x25a8(_0xee0198,_0x1d4aed){const _0x39b13e=_0x4f45();return _0x25a8=function(_0x51c968,_0x284ae0){_0x51c968=_0x51c968-0x144;let _0x4f451d=_0x39b13e[_0x51c968];return _0x4f451d;},_0x25a8(_0xee0198,_0x1d4aed);}async function getBackupFiles(_0xbf2f7d=null){const _0x317150=_0x47af02;let _0x190176=[],_0x5ad5ae=fs['readdirSync'](configbackuppath,{'withFileTypes':!![]});_0x5ad5ae[_0x317150(0x237)]((_0x17314c,_0x505048)=>_0x17314c[_0x317150(0x25a)]<_0x505048['name']?0x1:_0x505048[_0x317150(0x25a)]<_0x17314c[_0x317150(0x25a)]?-0x1:0x0),_0x5ad5ae['forEach'](_0x4f5342=>{const _0x551c68=_0x317150;if(!_0x4f5342[_0x551c68(0x1b0)]()&&_0x4f5342['name']['startsWith'](_0x551c68(0x21a))&&_0x4f5342['name']['endsWith']('.zip')){const _0x329d92=formatDate(fs[_0x551c68(0x24e)](configbackuppath+_0x4f5342[_0x551c68(0x25a)])[_0x551c68(0x2b2)]);_0x190176[_0x551c68(0x1a8)]({'name':_0x4f5342[_0x551c68(0x25a)],'mtime':_0x329d92});}});if(_0xbf2f7d)io['to'](_0xbf2f7d)[_0x317150(0x16a)](_0x317150(0x1c4),_0x190176);else return _0x190176;}async function backupConfigFiles(){const _0x51353d=_0x47af02;await zipFiles('backup-full');const _0x38ca88=getCleanTimeStamp();fs[_0x51353d(0x2c9)](zippath+'backup-full.zip',configbackuppath+(_0x51353d(0x21a)+_0x38ca88+_0x51353d(0x1ad)));let _0x38b955=fs[_0x51353d(0x310)](configbackuppath,{'withFileTypes':!![]});_0x38b955[_0x51353d(0x237)]((_0x54c665,_0x4b5662)=>_0x54c665[_0x51353d(0x25a)]<_0x4b5662[_0x51353d(0x25a)]?0x1:_0x4b5662['name']<_0x54c665['name']?-0x1:0x0),_0x38b955[_0x51353d(0x296)]>maxBackups&&fs['unlinkSync'](configbackuppath+_0x38b955[_0x38b955[_0x51353d(0x296)]-0x1][_0x51353d(0x25a)]);}function rotateLogFiles(){const _0x2cc1f2=_0x47af02,_0x38a83a=fs[_0x2cc1f2(0x24e)](logspath+'output-000.log'),_0x5320d3=_0x38a83a[_0x2cc1f2(0x2f9)]/0x400;if(_0x5320d3>0x64){let _0x27346f=fs['readdirSync'](logspath,{'withFileTypes':!![]});_0x27346f[_0x2cc1f2(0x237)]((_0x3c5c1e,_0x49e28d)=>_0x3c5c1e['name']<_0x49e28d['name']?0x1:_0x49e28d[_0x2cc1f2(0x25a)]<_0x3c5c1e['name']?-0x1:0x0),_0x27346f[_0x2cc1f2(0x185)](_0xee3a50=>{const _0x14204e=_0x2cc1f2;if(_0xee3a50['name']==_0x14204e(0x33d))fs[_0x14204e(0x2c9)](logspath+_0xee3a50[_0x14204e(0x25a)],logspath+_0x14204e(0x1f9));if(_0xee3a50['name']==_0x14204e(0x1be))fs['copyFileSync'](logspath+_0xee3a50[_0x14204e(0x25a)],logspath+_0x14204e(0x33d));_0xee3a50[_0x14204e(0x25a)]==_0x14204e(0x1bb)&&(fs[_0x14204e(0x2c9)](logspath+_0xee3a50[_0x14204e(0x25a)],logspath+'output-001.log'),fs[_0x14204e(0x336)](logspath+_0xee3a50[_0x14204e(0x25a)],''));});}}async function zipFiles(_0x240b6c){const _0x11df6e=_0x47af02;let _0x32a3a6;if(_0x240b6c==_0x11df6e(0x1fa))_0x32a3a6=logspath;if(_0x240b6c==_0x11df6e(0x1e7))_0x32a3a6=configpath;if(_0x240b6c==_0x11df6e(0x202))_0x32a3a6=configpath;let _0x21017b=fs['readdirSync'](_0x32a3a6,{'withFileTypes':!![]});const _0x59240e=new JSZip();_0x21017b[_0x11df6e(0x185)](_0x56f9a6=>{const _0xdc9264=_0x11df6e;if(!_0x56f9a6[_0xdc9264(0x1b0)]()){let _0x2af35a=fs[_0xdc9264(0x170)](_0x32a3a6+_0x56f9a6[_0xdc9264(0x25a)]);if(_0x240b6c==_0xdc9264(0x1e7)){const _0x25e21d=/^bot-[0-9]{3}-config.json$/,_0x3fefc6=_0x25e21d[_0xdc9264(0x2ce)](_0x56f9a6[_0xdc9264(0x25a)]);if(_0x3fefc6){const _0xaeb1b3=JSON[_0xdc9264(0x23c)](_0x2af35a);if(_0xaeb1b3[_0xdc9264(0x203)][0x0]){_0xaeb1b3['bot'][0x0][_0xdc9264(0x2f7)]=_0xdc9264(0x1ca),_0xaeb1b3['bot'][0x0][_0xdc9264(0x1f4)]='***';if(_0xaeb1b3['bot'][0x0][_0xdc9264(0x1b6)])_0xaeb1b3[_0xdc9264(0x203)][0x0][_0xdc9264(0x1b6)]=_0xdc9264(0x1ca);}_0x2af35a=JSON[_0xdc9264(0x2a1)](_0xaeb1b3,null,0x2);}if(_0x56f9a6[_0xdc9264(0x25a)]=='bb-settings.json'){const _0x462389=JSON[_0xdc9264(0x23c)](_0x2af35a);if(_0x462389[_0xdc9264(0x1ff)][_0xdc9264(0x24b)])_0x462389[_0xdc9264(0x1ff)][_0xdc9264(0x24b)]=![];if(_0x462389[_0xdc9264(0x1ff)][_0xdc9264(0x354)])_0x462389[_0xdc9264(0x1ff)][_0xdc9264(0x354)]='***';if(_0x462389[_0xdc9264(0x1ff)][_0xdc9264(0x14f)])_0x462389[_0xdc9264(0x1ff)][_0xdc9264(0x14f)]=_0xdc9264(0x1ca);if(_0x462389['settings'][_0xdc9264(0x288)])_0x462389[_0xdc9264(0x1ff)][_0xdc9264(0x288)]=null;if(_0x462389[_0xdc9264(0x1ff)]['marketcapApi'])_0x462389[_0xdc9264(0x1ff)][_0xdc9264(0x297)]=_0xdc9264(0x1ca);_0x2af35a=JSON['stringify'](_0x462389,null,0x2);}if(_0x56f9a6['name']!=_0xdc9264(0x277))_0x59240e[_0xdc9264(0x285)](_0x56f9a6[_0xdc9264(0x25a)],_0x2af35a);}else _0x59240e[_0xdc9264(0x285)](_0x56f9a6[_0xdc9264(0x25a)],_0x2af35a);}});const _0x55530b=await _0x59240e['generateAsync']({'type':'string','base64':![],'compression':_0x11df6e(0x334)});fs[_0x11df6e(0x336)](zippath+(_0x240b6c+_0x11df6e(0x1ad)),_0x55530b,'binary');}async function unzipFile(_0x191513,_0x3a1bb2){const _0x5c8d16=_0x47af02;fs['readdirSync'](configpath,{'withFileTypes':!![]})[_0x5c8d16(0x185)](_0x3656bd=>{const _0x21b49f=_0x5c8d16;if(!_0x3656bd[_0x21b49f(0x1b0)]())fs[_0x21b49f(0x23f)](configpath+_0x3656bd['name']);});const _0x50d33b=fs[_0x5c8d16(0x170)](_0x191513+_0x3a1bb2,_0x5c8d16(0x2b1)),_0x3bc6f7=await JSZip[_0x5c8d16(0x16e)](_0x50d33b,{'base64':![],'checkCRC32':!![]});for(const _0x59f6fc of Object[_0x5c8d16(0x2f2)](_0x3bc6f7[_0x5c8d16(0x1c2)])){const _0x4c66cf=_0x3bc6f7[_0x5c8d16(0x1c2)][_0x59f6fc],_0x5d40f7=await _0x4c66cf[_0x5c8d16(0x148)](_0x5c8d16(0x1ce));fs[_0x5c8d16(0x336)](configpath+_0x4c66cf[_0x5c8d16(0x25a)],_0x5d40f7);}fs[_0x5c8d16(0x310)](temppath,{'withFileTypes':!![]})['forEach'](_0x3da85e=>{const _0x49dc47=_0x5c8d16;if(!_0x3da85e[_0x49dc47(0x1b0)]())fs['rmSync'](temppath+_0x3da85e[_0x49dc47(0x25a)]);}),logger[_0x5c8d16(0x33e)](_0x5c8d16(0x1f6)),process[_0x5c8d16(0x349)]({'restore':!![]},_0x3aac00=>{});}async function getPublicIp(){try{const _0x412dc0=await axios['get']('https://api.ipify.org?format=json');publicip=_0x412dc0['data']['ip'];}catch(_0xe356e3){}}async function triggerAnalytics(){const _0x3c5503=_0x47af02;if(!publicip)await getPublicIp();const _0x5eaa73=getBotsWithMode();let _0x25d324=0x0;_0x5eaa73[_0x3c5503(0x185)](_0x179188=>{const _0x4a2c7b=_0x3c5503;if(_0x179188[_0x4a2c7b(0x2fd)]==='enabled')_0x25d324++;});const _0x4b98d1=getBotExchanges();mixpanel[_0x3c5503(0x17b)](_0x3c5503(0x2d5),{'distinct_id':settings[_0x3c5503(0x2ca)],'ip':publicip,'version':serverversion,'numbots':_0x5eaa73[_0x3c5503(0x296)],'numbotsenabled':_0x25d324,'exchanges':_0x4b98d1,'environment':environment});}async function getMessages(){const _0x472d9c=_0x47af02,_0x4121b5=_0x472d9c(0x166),_0x5087d8=new GraphQLClient(_0x4121b5),_0x2b0448={'authorization':_0x472d9c(0x1a1)},_0x550d31=serverversion[_0x472d9c(0x28c)]('.'),_0x4ec25a=_0x550d31[0x0]+'.'+_0x550d31[0x1],_0x843a3d=Math[_0x472d9c(0x294)](settings[_0x472d9c(0x1dd)],settings[_0x472d9c(0x2a8)]),_0x2fc0ef={'last':parseInt(_0x843a3d),'bbm':_0x4ec25a},_0x2560d9=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x1cd103;try{_0x1cd103=await _0x5087d8[_0x472d9c(0x2d3)](_0x2560d9,_0x2fc0ef,_0x2b0448);}catch(_0x580661){}if(_0x1cd103&&_0x1cd103['messages']){let _0x326e21=settings[_0x472d9c(0x1dd)];newMessages=[];for(const _0x3ab850 of _0x1cd103[_0x472d9c(0x1c7)]){newMessages[_0x472d9c(0x1a8)](_0x3ab850);let _0x4c829e=![];_0x3ab850[_0x472d9c(0x32d)]&&(updateSetting(_0x472d9c(0x1b9),_0x3ab850['bbvNew']),_0x4c829e=isNewerVersion(serverversion,_0x3ab850[_0x472d9c(0x32d)])||serverversion==_0x3ab850[_0x472d9c(0x32d)]);if(!_0x4c829e&&_0x3ab850[_0x472d9c(0x23e)]>_0x326e21){if(_0x3ab850[_0x472d9c(0x178)]===_0x472d9c(0x26c)||serverversion[_0x472d9c(0x348)](_0x3ab850[_0x472d9c(0x178)])){let _0x2a360b=''+_0x3ab850[_0x472d9c(0x298)]+'\x0a\x0a'+_0x3ab850[_0x472d9c(0x290)];const _0x36dbd6=await sendTelegramMsg(toTelegramMarkdown(_0x2a360b),_0x472d9c(0x145));if(_0x36dbd6)_0x326e21=_0x3ab850[_0x472d9c(0x23e)];}}}updateAvailable=isNewerVersion(settings['latestversion'],serverversion),updateSetting(_0x472d9c(0x1dd),_0x326e21),emitMessages();}}function emitMessages(){const _0x44146a=_0x47af02,_0x56ad1c=settings[_0x44146a(0x2a8)];let _0xebfdcc=[];newMessages[_0x44146a(0x185)](_0x543162=>{const _0x1486be=_0x44146a;_0x543162['number']>_0x56ad1c&&_0xebfdcc[_0x1486be(0x1a8)](_0x543162);}),_0xebfdcc[_0x44146a(0x296)]>0x0&&getAllClients()['forEach'](_0xd75d2d=>{const _0x232912=_0x44146a;getSocket(_0xd75d2d['id'])[_0x232912(0x16a)]('message',_0xebfdcc);});}function confirmMessage(_0x16e1be){const _0x3392e6=_0x47af02;updateSetting(_0x3392e6(0x2a8),Number(_0x16e1be));}function isNewerVersion(_0x2c1d33,_0x570f60){const _0x26edd2=_0x47af02,_0x45df5d=_0x570f60[_0x26edd2(0x28c)]('.'),_0x3b0cbc=_0x2c1d33[_0x26edd2(0x28c)]('.');for(var _0x344387=0x0;_0x344387<_0x3b0cbc[_0x26edd2(0x296)];_0x344387++){const _0x118fff=~~_0x3b0cbc[_0x344387],_0x5bacb0=~~_0x45df5d[_0x344387];if(_0x118fff>_0x5bacb0)return!![];if(_0x118fff<_0x5bacb0)return![];}return![];}function toTelegramMarkdown(_0x1da808){const _0xafb00e=_0x47af02,_0x5e5d43=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x3fd105=/\*{2}(.+?)\*{2}/gim;return _0x1da808=_0x1da808[_0xafb00e(0x2b3)](_0x5e5d43,_0xafb00e(0x224))[_0xafb00e(0x2b3)](_0x3fd105,'*$1*'),_0x1da808;}async function validateConfigFile(){const _0x28bb49=_0x47af02,_0x4365bf=dbConfig[_0x28bb49(0x1ab)](_0x28bb49(0x253))['sortBy']('botID')[_0x28bb49(0x17d)]()||[];if(_0x4365bf[_0x28bb49(0x296)]==0x0){let _0x4c913d=0x0,_0x3f371d=[];const _0x6baafc=/^bot-([0-9]{3})-config.json$/,_0x48ad9f=fs[_0x28bb49(0x310)](configpath);_0x48ad9f[_0x28bb49(0x185)](_0x2eafae=>{const _0x28229f=_0x28bb49,_0x4f6d3d=_0x6baafc[_0x28229f(0x14a)](_0x2eafae);if(_0x4f6d3d){const _0x23a0a2=_0x4f6d3d[0x1];let _0x38097f=getBotAttributes(_0x23a0a2);_0x3f371d[_0x28229f(0x1a8)]({'botID':_0x23a0a2,'botname':_0x38097f[_0x28229f(0x301)],'status':_0x28229f(0x18b),'live':'stopped'}),_0x4c913d++;}}),_0x4c913d!=0x0&&(dbConfig[_0x28bb49(0x1ab)](_0x28bb49(0x253))[_0x28bb49(0x1f3)](_0x3f371d)[_0x28bb49(0x1fd)](),config=_0x3f371d,restoredConfigFile=_0x4c913d);}}async function restoreConfigNotify(_0x464051){const _0x599d41=_0x47af02;let _0x44c8cf;if(restoredConfigFile==0x1)_0x44c8cf=_0x599d41(0x2c0);else _0x44c8cf='NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run';if(_0x464051)io['to'](_0x599d41(0x1cf))[_0x599d41(0x16a)](_0x599d41(0x289),_0x44c8cf);else{logger['simple'](_0x599d41(0x14c)),logger[_0x599d41(0x2df)](_0x44c8cf),logger[_0x599d41(0x2df)](_0x599d41(0x14c)),logger[_0x599d41(0x2df)]('');if(tgBot&&settings[_0x599d41(0x288)]&&settings[_0x599d41(0x20a)]!=_0x599d41(0x2d6))await sendTelegram(settings[_0x599d41(0x288)],_0x599d41(0x35f)+_0x44c8cf);}}function decryptRSA(_0x3ef928,_0x54f5b0){const _0x332187=_0x47af02,_0x1ab8b0=forge[_0x332187(0x267)][_0x332187(0x1c0)](_0x3ef928),_0x5bea3b=_0x1ab8b0[_0x332187(0x157)](forge[_0x332187(0x22e)]['decode64'](_0x54f5b0),'RSA-OAEP',{'md':forge['md'][_0x332187(0x323)][_0x332187(0x282)](),'mgf1':{'md':forge['md'][_0x332187(0x323)]['create']()}});return _0x5bea3b;}function validateCredentials(_0xbee33b,_0x4925a4){const _0x943b7=_0x47af02;if(_0xbee33b['username']==settings['bbUsername']&&bcrypt[_0x943b7(0x217)](_0xbee33b[_0x943b7(0x2e7)],settings[_0x943b7(0x354)])){if(settings[_0x943b7(0x1a0)])return{'allow':![],'reason':_0x943b7(0x1c3),'token':null};else{const _0x1426e7=generateLoginToken(_0x4925a4);return{'allow':!![],'reason':_0x943b7(0x32e),'token':_0x1426e7};}}else return{'allow':![],'reason':_0x943b7(0x1b7),'token':null};}function refreshToken(_0x59435f){const _0x5b431a=_0x47af02,_0x46e039=generateLoginToken(_0x59435f);return{'allow':!![],'reason':_0x5b431a(0x32e),'token':_0x46e039};}function validateAccess(_0x468ce4,_0x54e3d7,_0x2a8572){const _0x55e4e0=_0x47af02,_0x129036=_0x2a8572?_0x2a8572:devices[_0x54e3d7]['ip'];let _0x3f0cbe;const _0x308ad3=_0x1ff3dc=>{const _0x2294ae=_0x25a8;if(settings[_0x2294ae(0x24b)]){if(settings['f2aRequired']){if(telegram2FaApproved(_0x54e3d7)){const _0xc48798=generateLoginToken(_0x54e3d7);return{'allow':!![],'reason':_0x2294ae(0x316),'token':_0xc48798};}else return{'allow':![],'reason':'login\x20required','token':null};}else return _0x3f0cbe=validToken(_0x1ff3dc,_0x54e3d7),_0x3f0cbe['hasOwnProperty'](_0x2294ae(0x19f))?{'allow':!![],'reason':_0x2294ae(0x31e),'token':_0x1ff3dc}:{'allow':![],'reason':_0x2294ae(0x356),'token':null};}else return{'allow':!![],'reason':_0x2294ae(0x204),'token':null};};if(settings['whitelistEnabled']){let _0x494905=[...settings[_0x55e4e0(0x2d9)],_0x55e4e0(0x20c),'::ffff:127.0.0.1','127.0.0.1'];if(_0x494905[_0x55e4e0(0x197)](_0x129036))return _0x308ad3(_0x468ce4);else{_0x3f0cbe=validToken(_0x468ce4,_0x54e3d7);if(_0x3f0cbe[_0x55e4e0(0x29d)](_0x55e4e0(0x19f)))return _0x308ad3(_0x468ce4);else{if(telegramIpApproved(_0x54e3d7)){const _0x5d1755=generateToken(_0x54e3d7);return _0x3f0cbe=_0x308ad3(_0x468ce4),_0x3f0cbe['allow']?{'allow':!![],'reason':_0x55e4e0(0x1a5),'token':_0x5d1755}:_0x3f0cbe;}else return settings[_0x55e4e0(0x243)]?{'allow':![],'reason':_0x55e4e0(0x22b),'token':null}:{'allow':![],'reason':'temporary\x20access\x20not\x20allowed','token':null};}}}else return _0x308ad3(_0x468ce4);}function timelyDecrypt(_0x4dc8bc,_0x995402,_0x104e4e='@'){const _0x58faa0=_0x47af02;if(_0x4dc8bc)try{const _0x39e6f1=decryptRSA(secure['privateKey'],_0x4dc8bc),_0x35e00f=_0x39e6f1[_0x58faa0(0x28c)](_0x104e4e)[0x0],_0xdc150c=_0x39e6f1[_0x58faa0(0x28c)](_0x104e4e)[0x1],_0x3d43c8=new Date()[_0x58faa0(0x1e9)]();if(_0x995402){if(_0x3d43c8-_0xdc150c<maxSecretAge*0x3e8)return _0x35e00f;else return![];}else return _0x35e00f;}catch(_0x29c2f8){return![];}else return![];}const validToken=(_0x2a8a1e,_0x252adc)=>{const _0x4f42d8=_0x47af02,_0x202bfa=devices[_0x252adc]['ip'];if(!_0x2a8a1e)return{'error':_0x4f42d8(0x1d1)};for(let _0x3bd0cd of blacklist){if(_0x3bd0cd['token']==_0x2a8a1e)return{'error':_0x4f42d8(0x341)};}let _0x3cdef7;try{_0x3cdef7=jwt['verify'](_0x2a8a1e,secure[_0x4f42d8(0x151)]+_0x252adc);}catch{return{'error':'Invalid\x20authentication\x20token\x20(1)'};}if(!_0x3cdef7[_0x4f42d8(0x29d)](_0x4f42d8(0x176))&&!_0x3cdef7[_0x4f42d8(0x29d)]('username')||!_0x3cdef7[_0x4f42d8(0x29d)](_0x4f42d8(0x248)))return{'error':'Invalid\x20authentication\x20token\x20(2)'};if(!_0x3cdef7['hasOwnProperty'](_0x4f42d8(0x2e3))&&_0x3cdef7[_0x4f42d8(0x29d)]('clientip')){const {clientip:_0x1bee02}=_0x3cdef7;return _0x202bfa==_0x1bee02?{'success':_0x4f42d8(0x305)}:{'error':_0x4f42d8(0x191)};}else{if(_0x3cdef7[_0x4f42d8(0x29d)](_0x4f42d8(0x2e3))&&_0x3cdef7[_0x4f42d8(0x29d)](_0x4f42d8(0x176))){const {username:_0x4fa5db,clientip:_0x169784}=_0x3cdef7;return settings[_0x4f42d8(0x1bc)]==_0x4fa5db&&_0x202bfa==_0x169784?{'success':_0x4f42d8(0x305)}:{'error':_0x4f42d8(0x340)};}}},generateLoginToken=_0x2defc0=>{const _0x17d8da=_0x47af02;if(_0x2defc0){const _0x4235a6=devices[_0x2defc0]['ip'];return jwt['sign']({'username':settings[_0x17d8da(0x1bc)],'clientip':_0x4235a6},secure[_0x17d8da(0x151)]+_0x2defc0,{'expiresIn':tokenRefresh*0x3c,'allowInsecureKeySizes':!![]});}else return![];},generateToken=_0x44ffb4=>{const _0x76562=_0x47af02;if(_0x44ffb4){const _0x2d19a4=devices[_0x44ffb4]['ip'];return jwt['sign']({'clientip':_0x2d19a4},secure[_0x76562(0x151)]+_0x44ffb4,{'expiresIn':devices[_0x44ffb4]['telegramIpApproval']['expiry']*0x3c,'allowInsecureKeySizes':!![]});}else return![];},telegramIpApproved=_0x222672=>{const _0x84fb6=_0x47af02;let _0x9ac603=![];return devices[_0x222672]['telegramIpApproval']&&devices[_0x222672]['telegramIpApproval'][_0x84fb6(0x162)]!='reject'&&(_0x9ac603=devices[_0x222672][_0x84fb6(0x18e)][_0x84fb6(0x176)]==devices[_0x222672]['ip']&&new Date()[_0x84fb6(0x1e9)]()-devices[_0x222672]['telegramIpApproval'][_0x84fb6(0x220)]<devices[_0x222672][_0x84fb6(0x18e)][_0x84fb6(0x162)]*0x3c*0x3e8),_0x9ac603;},telegram2FaApproved=_0x52e031=>{const _0x397efd=_0x47af02;let _0x228c59=![];return devices[_0x52e031][_0x397efd(0x156)]&&devices[_0x52e031][_0x397efd(0x156)][_0x397efd(0x162)]!='reject'&&(_0x228c59=devices[_0x52e031][_0x397efd(0x156)][_0x397efd(0x176)]==devices[_0x52e031]['ip']&&new Date()[_0x397efd(0x1e9)]()-devices[_0x52e031][_0x397efd(0x156)]['timestamp']<devices[_0x52e031][_0x397efd(0x156)][_0x397efd(0x162)]*0x3c*0x3e8),_0x228c59;},normalizeIP=_0x3643f1=>{const _0x3b48ac=_0x47af02;let _0x4b3186=null,_0x9911ae=null;if(ipaddr['isValid'](_0x3643f1)){const _0x4ea246=ipaddr[_0x3b48ac(0x23c)](_0x3643f1);_0x4ea246[_0x3b48ac(0x2ed)]()===_0x3b48ac(0x35b)?(_0x4ea246[_0x3b48ac(0x209)]()&&(_0x4b3186=_0x4ea246['toIPv4Address']()[_0x3b48ac(0x1ac)]()),_0x9911ae=_0x4ea246[_0x3b48ac(0x1ac)]()):(_0x4b3186=_0x4ea246['toString'](),_0x9911ae=_0x4ea246[_0x3b48ac(0x266)]()['toString']());}return{'show':_0x4b3186?_0x4b3186:_0x9911ae,'store':_0x9911ae};};function formatDate(_0x493997){const _0xdc5e67=_0x47af02;return _0x493997[_0xdc5e67(0x2cb)]()+'/'+(_0x493997['getMonth']()+0x1)[_0xdc5e67(0x1ac)]()[_0xdc5e67(0x2ef)](0x2,'0')+'/'+_0x493997[_0xdc5e67(0x32f)]()[_0xdc5e67(0x1ac)]()[_0xdc5e67(0x2ef)](0x2,'0')+'\x20'+_0x493997['getHours']()[_0xdc5e67(0x1ac)]()[_0xdc5e67(0x2ef)](0x2,'0')+':'+_0x493997[_0xdc5e67(0x244)]()['toString']()[_0xdc5e67(0x2ef)](0x2,'0')+':'+_0x493997[_0xdc5e67(0x1c1)]()['toString']()['padStart'](0x2,'0');}function sleep(_0x1718ba){return new Promise(_0x55df0b=>setTimeout(_0x55df0b,_0x1718ba));}