const _0x457009=_0x35a3;(function(_0x36ab70,_0x194f7c){const _0x41d40a=_0x35a3,_0x119e86=_0x36ab70();while(!![]){try{const _0x36ccd9=parseInt(_0x41d40a(0x17b))/0x1*(-parseInt(_0x41d40a(0x2da))/0x2)+-parseInt(_0x41d40a(0x297))/0x3*(parseInt(_0x41d40a(0x2e8))/0x4)+-parseInt(_0x41d40a(0x11f))/0x5*(-parseInt(_0x41d40a(0x16c))/0x6)+-parseInt(_0x41d40a(0x1d4))/0x7+parseInt(_0x41d40a(0x291))/0x8*(parseInt(_0x41d40a(0x2dd))/0x9)+-parseInt(_0x41d40a(0x136))/0xa*(parseInt(_0x41d40a(0x1d7))/0xb)+parseInt(_0x41d40a(0x24c))/0xc*(parseInt(_0x41d40a(0x111))/0xd);if(_0x36ccd9===_0x194f7c)break;else _0x119e86['push'](_0x119e86['shift']());}catch(_0x6c8c83){_0x119e86['push'](_0x119e86['shift']());}}}(_0x1037,0x645ea));const _0x4f6277=function(){let _0x371753=!![];return function(_0x4f466a,_0x36f7ca){const _0x4a7fce=_0x371753?function(){if(_0x36f7ca){const _0x5c3bac=_0x36f7ca['apply'](_0x4f466a,arguments);return _0x36f7ca=null,_0x5c3bac;}}:function(){};return _0x371753=![],_0x4a7fce;};}(),_0x402574=_0x4f6277(this,function(){const _0x4cf5b0=_0x35a3;return _0x402574[_0x4cf5b0(0x18d)]()['search'](_0x4cf5b0(0x1c9))[_0x4cf5b0(0x18d)]()[_0x4cf5b0(0x203)](_0x402574)[_0x4cf5b0(0x272)](_0x4cf5b0(0x1c9));});_0x402574();'use strict';process[_0x457009(0x113)][_0x457009(0x1b0)]=0x1;const childProcess=require(_0x457009(0x13f)),fs=require('fs'),fns=require('date-fns'),low=require('lowdb'),FileSync=require('lowdb/adapters/FileSync'),path=require(_0x457009(0x1a8)),crypto=require('crypto'),forge=require(_0x457009(0x242)),bcrypt=require('bcryptjs'),jwt=require(_0x457009(0x245)),ipaddr=require(_0x457009(0x212)),yargs=require('yargs'),uuidRandom=require(_0x457009(0x285)),{Telegraf,Markup}=require(_0x457009(0x2b4)),Mixpanel=require(_0x457009(0x16b)),axios=require(_0x457009(0x16a)),{GraphQLClient,gql}=require(_0x457009(0x1a7)),util=require(_0x457009(0x12f)),fileUpload=require('express-fileupload'),{networkInterfaces}=require('os'),JSZip=require(_0x457009(0x10e)),argv=yargs(process['argv'][_0x457009(0x2f7)](0x2))[_0x457009(0x23c)],PORT=argv[_0x457009(0x247)]||'3000',pattern=/^[0-9]{2,4}$/;!pattern[_0x457009(0x2dc)](PORT)&&(console[_0x457009(0x207)](_0x457009(0x2ea)+PORT+_0x457009(0x269)),process['exit'](0x1));const HOST=argv['host']||null,userID=argv[_0x457009(0x10d)]||'',debugging=argv['d']||![],recreate=argv['r']||![],openBrowser=argv['o']||![],nodeversion=process['versions'][_0x457009(0x1ff)];let bbpath=_0x457009(0x2d7),bbpath2='';const botfile=_0x457009(0x1c7),configfile=_0x457009(0x28c),settingsfile=_0x457009(0x166),securefile=_0x457009(0x2b6),environment=require('./'+bbpath2+_0x457009(0x2e5))[_0x457009(0xe3)]||_0x457009(0x24e),maxBackups=0xa;let validInstallation=!![];const schedulerInterval=0x3c*0x3c*0x3e8;!fs['existsSync'](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x457009(0x2fe)),configpath=userID?bbpath+_0x457009(0x2c9)+userID+'/':bbpath+_0x457009(0x2c9),configbackuppath=configpath+_0x457009(0x232),logspath=userID?bbpath+_0x457009(0x170)+userID+'/':bbpath+'logs/',zippath=userID?bbpath+_0x457009(0x21b)+userID+'/':bbpath+_0x457009(0x21b),loggerfile=fs[_0x457009(0xea)](logspath+_0x457009(0xe1),{'flags':'a'}),temppath=userID?bbpath+_0x457009(0x1f6)+userID+'/':bbpath+_0x457009(0x1f6);!fs[_0x457009(0xf4)](configpath)&&fs[_0x457009(0x1ad)](configpath);!fs[_0x457009(0xf4)](configbackuppath)&&fs[_0x457009(0x1ad)](configbackuppath);!fs[_0x457009(0xf4)](logspath)&&fs[_0x457009(0x1ad)](logspath);!fs[_0x457009(0xf4)](zippath)&&fs['mkdirSync'](zippath);!fs[_0x457009(0xf4)](temppath)&&fs[_0x457009(0x1ad)](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x457009(0x2a6)]({'bots':[]})[_0x457009(0x152)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x457009(0x2a6)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0x457009(0x201),'onepagemode':![],'marketcapApi':''}})[_0x457009(0x152)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x457009(0x2a6)]({'secure':{},'blacklist':[]})['write']();const saltRounds=0xa,mixpanel=Mixpanel[_0x457009(0x160)]('6b67f3d61ee94b8f5c80b4affef4c4d9',{'host':'api-eu.mixpanel.com'});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings['telegramToken']&&(settings['telegramToken']!=''&&settings[_0x457009(0xf1)]!='***')&&settings['telegramUsername']&&settings[_0x457009(0x1ea)]!='')initTelegram();const parseColor=(_0x48d88c,_0x431282)=>{const _0x36cff4=_0x457009,_0x1eacd3=/#[A-Z]{3}#/g;if(typeof _0x48d88c==_0x36cff4(0x252)){!_0x431282?_0x48d88c=_0x48d88c[_0x36cff4(0x20e)](_0x1eacd3,''):(_0x48d88c=_0x48d88c[_0x36cff4(0x20e)](/#BLU#/g,_0x36cff4(0x151)),_0x48d88c=_0x48d88c[_0x36cff4(0x20e)](/#RED#/g,'\x1b[31m'),_0x48d88c=_0x48d88c[_0x36cff4(0x20e)](/#YEL#/g,_0x36cff4(0x2f6)),_0x48d88c=_0x48d88c['replace'](/#MAG#/g,_0x36cff4(0x230)),_0x48d88c=_0x48d88c['replace'](/#CYA#/g,_0x36cff4(0x1e5)),_0x48d88c=_0x48d88c['replace'](/#RES#/g,_0x36cff4(0x142)));;}return _0x48d88c;},logger={'screen':_0x250c8a=>{const _0x23b135=_0x457009;console[_0x23b135(0x207)](parseColor(_0x250c8a,!![]));},'simple':_0xffddc6=>{const _0x1660a1=_0x457009;console[_0x1660a1(0x207)](parseColor(_0xffddc6,!![])),loggerfile[_0x1660a1(0x152)](util['format'](parseColor(_0xffddc6,![]))+'\x0a');},'full':async _0x1b9801=>{const _0x535634=_0x457009,_0x39562c=getTimeStamp()+_0x535634(0x124)+_0x1b9801;console['log'](parseColor(_0x39562c,!![])),loggerfile[_0x535634(0x152)](util['format'](parseColor(_0x39562c,![]))+'\x0a');if(tgBot&&settings['telegramChatId']&&settings[_0x535634(0x1fa)]!='orders')await sendTelegram(settings[_0x535634(0x20d)],_0x535634(0x1a1)+parseColor(_0x1b9801,![]));},'debug':async(_0x2bc703,_0x3b1db9='')=>{const _0xcdf3b=_0x457009,_0x932e4c=getTimeStamp()+_0xcdf3b(0x1bf)+_0x2bc703;if(debugging)console[_0xcdf3b(0x207)](parseColor(_0x932e4c,!![]));loggerfile[_0xcdf3b(0x152)](util['format'](parseColor(_0x932e4c,![]))+'\x0a');if(_0x3b1db9){if(debugging)console[_0xcdf3b(0x207)](_0x3b1db9);loggerfile[_0xcdf3b(0x152)](util[_0xcdf3b(0x1b6)](_0x3b1db9)+'\x0a');}}};let terminating=![];process['on'](_0x457009(0x2ad),function(_0x30f963){const _0x16cef3=_0x457009;_0x30f963[_0x16cef3(0x18d)]()[_0x16cef3(0x108)](_0x16cef3(0x1a3))?(logger['simple'](_0x16cef3(0x2f5)+_0x30f963[_0x16cef3(0x247)]+_0x16cef3(0x2d5)),process['send']({'terminate':!![]},_0x501ea4=>{})):logger[_0x16cef3(0x155)](_0x30f963);}),process['on'](_0x457009(0x280),()=>{const _0xb9a34=_0x457009;stopAllBots(),process[_0xb9a34(0x280)](0x0);}),process['on']('SIGTERM',()=>{const _0x59c43a=_0x457009;stopAllBots(),process[_0x59c43a(0x280)](0x0);}),process['on']('SIGINT',()=>{stopAllBots(),process['exit'](0x0);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x457009(0x2e5))['version'],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let tmpStorage={},devices=[],lastIpApproval,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0x457009(0x173)),app=express(),http=require(_0x457009(0x2e4))[_0x457009(0x12b)](app);app['use'](fileUpload({'useTempFiles':!![]})),app['get'](_0x457009(0x17c),async(_0x261ce8,_0x39d366)=>{const _0x2fe9ea=_0x457009,_0x339f18=_0x261ce8[_0x2fe9ea(0x270)]['type'],_0x4181f1=getClientsWithBotID(_0x2fe9ea(0x1bc)),_0x47c9a8=_0x261ce8[_0x2fe9ea(0x199)][_0x2fe9ea(0x1b5)],_0x274d40=timelyDecrypt(_0x47c9a8,![]),_0x29e014=_0x4181f1['find'](_0xd9cba0=>_0xd9cba0[_0x2fe9ea(0x1b5)]==_0x274d40);if(_0x29e014){const _0x1ac0f7=normalizeIP(_0x261ce8[_0x2fe9ea(0xe9)][_0x2fe9ea(0x29a)])[_0x2fe9ea(0x1d6)],_0x7ce097=_0x261ce8[_0x2fe9ea(0x199)][_0x2fe9ea(0x24b)];if(validateAccess(_0x7ce097,_0x274d40,_0x1ac0f7)[_0x2fe9ea(0x282)])_0x339f18==_0x2fe9ea(0x278)&&await backupConfigFiles(),await zipFiles(_0x339f18),_0x39d366[_0x2fe9ea(0x17d)](zippath+(_0x339f18+'.zip'),_0x6d22ff=>{const _0x2885e1=_0x2fe9ea;_0x6d22ff&&(logger[_0x2885e1(0x1e6)](_0x2885e1(0x26c)+_0x339f18),logger[_0x2885e1(0x155)](_0x6d22ff));});else logger[_0x2fe9ea(0x1e6)](_0x2fe9ea(0x226)+_0x339f18+_0x2fe9ea(0x1e3));}else logger['full'](_0x2fe9ea(0x226)+_0x339f18+_0x2fe9ea(0x2e9));}),app[_0x457009(0x14c)](_0x457009(0x102),async(_0x4c847c,_0x23bd4d)=>{const _0x2688f4=_0x457009,_0x7ceea3=getClientsWithBotID('botmanager'),_0xf07f52=_0x4c847c[_0x2688f4(0x199)][_0x2688f4(0x1b5)],_0x55a37e=timelyDecrypt(_0xf07f52,![]),_0x567507=_0x7ceea3[_0x2688f4(0x14e)](_0x38a8ff=>_0x38a8ff[_0x2688f4(0x1b5)]==_0x55a37e);logger[_0x2688f4(0x1cc)](_0x2688f4(0xf8));if(_0x567507){const _0x31980c=normalizeIP(_0x4c847c[_0x2688f4(0xe9)][_0x2688f4(0x29a)])[_0x2688f4(0x1d6)],_0x1e1d1d=_0x4c847c['headers'][_0x2688f4(0x24b)];if(validateAccess(_0x1e1d1d,_0x55a37e,_0x31980c)['allow']){if(_0x4c847c[_0x2688f4(0x28f)]){const _0x23e41c=_0x4c847c[_0x2688f4(0x28f)][_0x2688f4(0x187)];await _0x23e41c['mv'](temppath+_0x23e41c[_0x2688f4(0x2d6)]),_0x23bd4d['send']({'status':!![],'message':_0x2688f4(0x2f3)});const _0x4cd782=getBotsWithMode();_0x4cd782['length']>0x0?confirmRestore(temppath,_0x23e41c[_0x2688f4(0x2d6)]):unzipFile(temppath,_0x23e41c['name']);}}else logger[_0x2688f4(0x1e6)](_0x2688f4(0x135));}else logger['full'](_0x2688f4(0x2f0));}),app[_0x457009(0x22c)](express[_0x457009(0xf0)](path[_0x457009(0x202)](__dirname,bbpath2,_0x457009(0x271)))),app['use'](express[_0x457009(0xf0)](path[_0x457009(0x202)](__dirname,bbpath2,_0x457009(0x2e2)))),app[_0x457009(0x2cf)]('/',function(_0x52c9c4,_0x56cd40){const _0x230bf7=_0x457009;_0x56cd40[_0x230bf7(0x15e)](path[_0x230bf7(0x202)](__dirname,bbpath2,_0x230bf7(0x271),_0x230bf7(0x250)));}),app[_0x457009(0x2cf)](_0x457009(0x144),function(_0x18b23f,_0x2bc7cb){const _0x4a031b=_0x457009;_0x2bc7cb[_0x4a031b(0x15e)](path[_0x4a031b(0x202)](__dirname,bbpath2,_0x4a031b(0x2e2),_0x4a031b(0x250)));}),app['get'](_0x457009(0x264),(_0x3900e5,_0xd5b16)=>{const _0x5d1ce5=_0x457009;_0xd5b16['sendFile'](path[_0x5d1ce5(0x202)](__dirname,bbpath2,'build',_0x5d1ce5(0x250)));}),app[_0x457009(0x2cf)](_0x457009(0x2b7),(_0x2969c2,_0x2220d8)=>{const _0x382597=_0x457009;_0x2220d8[_0x382597(0x15e)](path['join'](__dirname,bbpath2,'build',_0x382597(0x250)));}),app[_0x457009(0x2cf)]('/:bot/coins',(_0x82c420,_0x2c177e)=>{const _0x5312ad=_0x457009;_0x2c177e[_0x5312ad(0x15e)](path[_0x5312ad(0x202)](__dirname,bbpath2,_0x5312ad(0x2e2),'index.html'));}),app[_0x457009(0x2cf)]('/:bot/history',(_0x47f378,_0x5bf0bc)=>{const _0x17ae4a=_0x457009;_0x5bf0bc[_0x17ae4a(0x15e)](path[_0x17ae4a(0x202)](__dirname,bbpath2,_0x17ae4a(0x2e2),_0x17ae4a(0x250)));}),app[_0x457009(0x2cf)](_0x457009(0x238),(_0x25f902,_0x411e37)=>{const _0x2326cb=_0x457009;_0x411e37['sendFile'](path['join'](__dirname,bbpath2,_0x2326cb(0x2e2),'index.html'));}),app['get']('/:bot/support',(_0xb32ec6,_0x11b553)=>{const _0x3908a9=_0x457009;_0x11b553[_0x3908a9(0x15e)](path[_0x3908a9(0x202)](__dirname,bbpath2,'build',_0x3908a9(0x250)));});if(HOST)http[_0x457009(0x110)](PORT,HOST);else http['listen'](PORT);const io=require('socket.io')(http,{});openBrowser&&(async()=>{const _0x343ff9=_0x457009,{default:_0x49490f}=await import(_0x343ff9(0x213));await _0x49490f(_0x343ff9(0x239)+PORT);})();init();function _0x35a3(_0x504ea2,_0x2c4b77){const _0x265f7e=_0x1037();return _0x35a3=function(_0x402574,_0x4f6277){_0x402574=_0x402574-0xe0;let _0x10372a=_0x265f7e[_0x402574];return _0x10372a;},_0x35a3(_0x504ea2,_0x2c4b77);}async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}function getServerIP(){const _0x2f098c=_0x457009;let _0x29914a='[ip-address]';const _0x1af504=networkInterfaces(),_0x35cba9={};for(const _0x3c395d of Object[_0x2f098c(0x134)](_0x1af504)){for(const _0x450a21 of _0x1af504[_0x3c395d]){if((_0x450a21[_0x2f098c(0x214)]==_0x2f098c(0x18e)||_0x450a21['family']==0x4)&&!_0x450a21[_0x2f098c(0x1eb)]){const _0x151264=ipaddr[_0x2f098c(0x1d0)](_0x450a21[_0x2f098c(0x1c6)])[_0x2f098c(0x26a)]();_0x151264!=_0x2f098c(0x1b1)&&(!_0x35cba9[_0x3c395d]&&(_0x35cba9[_0x3c395d]=[]),_0x35cba9[_0x3c395d][_0x2f098c(0x1fc)](_0x450a21[_0x2f098c(0x1c6)]),_0x29914a=_0x450a21[_0x2f098c(0x1c6)]);}}}return{'serverip':_0x29914a,'netinterfaces':_0x35cba9};}async function startServer(){const _0x15e04f=_0x457009,{serverip:_0x3dda59,netinterfaces:_0xdb37d9}=getServerIP();logger[_0x15e04f(0x155)](''),logger['simple'](_0x15e04f(0xee)),await logger['full'](_0x15e04f(0x2b9)+serverversion+_0x15e04f(0x194)+(environment=='staging'?_0x15e04f(0x261):'')+'\x0a'+('=>\x20Go\x20to\x20#CYA#http://127.0.0.1:'+PORT+_0x15e04f(0x227))+('=>\x20Go\x20to\x20#CYA#http://'+_0x3dda59+':'+PORT+_0x15e04f(0x103))),logger['simple'](_0x15e04f(0xee));if(config[_0x15e04f(0xeb)]!=0x0)for(const _0x2529bb of config){const _0x473358=_0x2529bb[_0x15e04f(0x244)]==_0x15e04f(0x268)?'a':'m';if(_0x2529bb[_0x15e04f(0x1f9)]==_0x15e04f(0x20f)||_0x2529bb['status']==_0x15e04f(0x2fa))await logger[_0x15e04f(0x1e6)](_0x15e04f(0x296)+_0x473358+_0x15e04f(0x27f)+_0x2529bb[_0x15e04f(0x286)]+_0x15e04f(0x2d0)+_0x2529bb[_0x15e04f(0xfe)]),startBot([_0x2529bb[_0x15e04f(0x286)],userID],{'cwd':bbpath},function(_0x5761f0){if(_0x5761f0)logger['full'](_0x5761f0);});else(_0x2529bb['status']=='disabled'||_0x2529bb[_0x15e04f(0x1f9)]==_0x15e04f(0x1b9))&&await logger[_0x15e04f(0x1e6)](_0x15e04f(0x13d)+_0x473358+')\x20\x20\x20|\x20Bot\x20'+_0x2529bb[_0x15e04f(0x286)]+_0x15e04f(0x2d0)+_0x2529bb[_0x15e04f(0xfe)]);}else!newBot&&logger[_0x15e04f(0x155)]('>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!');if(newBot)addBot();logger['simple']('-----------------------------------------------------------------------------------'),logger[_0x15e04f(0x155)](''),await logger[_0x15e04f(0x1cc)](_0x15e04f(0x1dd)+nodeversion),await logger[_0x15e04f(0x1cc)](_0x15e04f(0x2c5),_0xdb37d9);}function startSocket(){const _0x59cace=_0x457009;io['on'](_0x59cace(0x1ee),_0x159a9f=>{const _0x345964=_0x59cace;let _0x25d7ea,_0x58cc9b,_0x19ddd1,_0x32d74d,_0x211bcc;const _0x296039=_0x159a9f[_0x345964(0x154)][_0x345964(0x199)][_0x345964(0x1e7)];_0x58cc9b=_0x296039[_0x345964(0x1d2)](/bot[0-9]{3}/);if(_0x58cc9b)_0x19ddd1=_0x58cc9b[0x0]['match'](/[0-9]{3}/);if(_0x19ddd1)_0x25d7ea=_0x19ddd1[0x0];else _0x25d7ea=_0x345964(0x1bc);const _0x3fa358=_0x159a9f[_0x345964(0x154)][_0x345964(0x179)]['encryptedUuid'];if(!_0x3fa358)_0x159a9f[_0x345964(0x23a)]('status',{'publicKey':secure['publicKey']});else{_0x32d74d=timelyDecrypt(_0x3fa358,![]);if(!_0x32d74d)_0x159a9f['emit'](_0x345964(0x1f9),{'publicKey':secure[_0x345964(0x279)]});else{_0x211bcc=normalizeIP(_0x159a9f[_0x345964(0x222)]['remoteAddress'])[_0x345964(0x1d6)];if(!devices[_0x32d74d])devices[_0x32d74d]={'uuid':_0x32d74d,'access':{'token':null}};devices[_0x32d74d]['ip']=_0x211bcc;const _0x7adffe=addClient(_0x159a9f['id'],_0x32d74d,_0x25d7ea);setAccess(_0x7adffe),emitMessages(),_0x159a9f['on'](_0x345964(0x1fe),_0x30749a=>{const _0x475555=_0x345964,_0x46402=timelyDecrypt(_0x30749a['password'],!![],_0x475555(0x149));if(_0x46402){_0x30749a={'username':_0x30749a['username'],'password':_0x46402},devices[_0x32d74d][_0x475555(0x1cd)]=validateCredentials(_0x30749a,_0x32d74d);if(devices[_0x32d74d][_0x475555(0x1cd)][_0x475555(0x282)]==![]&&devices[_0x32d74d]['access']['reason']==_0x475555(0x2e1))_0x159a9f[_0x475555(0x23a)](_0x475555(0x1f9),{'access':devices[_0x32d74d][_0x475555(0x1cd)]}),loginAccess2FA(_0x32d74d,_0x211bcc);else{if(devices[_0x32d74d]['access']['allow']==![]&&devices[_0x32d74d][_0x475555(0x1cd)][_0x475555(0x1dc)]==_0x475555(0xff))_0x159a9f[_0x475555(0x23a)](_0x475555(0x1f9),{'access':devices[_0x32d74d][_0x475555(0x1cd)]});else devices[_0x32d74d][_0x475555(0x1cd)][_0x475555(0x282)]&&devices[_0x32d74d][_0x475555(0x1cd)][_0x475555(0x1dc)]==_0x475555(0x185)&&(getClientsWithUuid(_0x32d74d)[_0x475555(0x115)](_0x43468d=>{setAccess(_0x43468d);}),logger['debug'](_0x475555(0x2d4)+_0x32d74d['slice'](-0x8)),setTokenRefresh(_0x32d74d),setSessionTimeout(_0x475555(0x1fe),_0x32d74d));}}else logger['full'](_0x475555(0x16f));}),_0x159a9f['on'](_0x345964(0x2a7),()=>{resetPassword();}),_0x159a9f['on'](_0x345964(0x188),_0x347b19=>{removeClient(_0x159a9f['id']);}),_0x25d7ea==_0x345964(0x1bc)&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0xb37098){const _0x4a6f8e=_0x457009;if(_0xb37098!=_0x4a6f8e(0x1bc)&&config[_0x4a6f8e(0x1ef)]!=''){if(pid[_0xb37098])pid[_0xb37098][_0x4a6f8e(0x19d)]({'function':_0x4a6f8e(0x1f5),'args':null});}_0xb37098!=_0x4a6f8e(0x1bc)&&broadcastToBots(_0x4a6f8e(0x1db),JSON[_0x4a6f8e(0x183)](config));}function reloadBotManager(){const _0xb10b50=_0x457009;getClientsWithBotID(_0xb10b50(0x1bc))[_0xb10b50(0x115)](_0x1ede37=>{const _0x5785b6=_0xb10b50;getSocket(_0x1ede37['id'])[_0x5785b6(0x23a)](_0x5785b6(0x1f9),{'access':{'allow':![],'reason':_0x5785b6(0x2c7),'token':null}});});}function getSocket(_0xf23a91){const _0x48b058=_0x457009,_0x55977a=io[_0x48b058(0x2a4)][_0x48b058(0x2cf)]('/');return _0x55977a[_0x48b058(0x210)][_0x48b058(0x2cf)](_0xf23a91);}function setAccess(_0x3293af){const _0x1f3c7c=_0x457009,_0x363c5a=getSocket(_0x3293af['id']),_0x36179c=_0x3293af[_0x1f3c7c(0x1b5)],_0x3aca96=_0x3293af[_0x1f3c7c(0x298)];devices[_0x36179c][_0x1f3c7c(0x1cd)]=validateAccess(devices[_0x36179c][_0x1f3c7c(0x1cd)][_0x1f3c7c(0x12e)],_0x36179c),logger[_0x1f3c7c(0x1cc)](_0x1f3c7c(0x2eb)+devices[_0x36179c][_0x1f3c7c(0x1cd)]['reason']+_0x1f3c7c(0xf5)+_0x3293af['id']['slice'](-0x8)+_0x1f3c7c(0x217)+_0x36179c[_0x1f3c7c(0x2f7)](-0x8)),_0x363c5a[_0x1f3c7c(0x202)](_0x36179c);if(devices[_0x36179c][_0x1f3c7c(0x1cd)][_0x1f3c7c(0x282)]){_0x363c5a[_0x1f3c7c(0x202)](_0x3aca96);if(_0x3aca96==_0x1f3c7c(0x1bc))initializeSocketBotManager(_0x363c5a);else initializeSocketBot(_0x363c5a);initClient(_0x3aca96);}devices[_0x36179c][_0x1f3c7c(0x1cd)]['token']&&devices[_0x36179c]['access'][_0x1f3c7c(0x1dc)]==_0x1f3c7c(0x21d)&&setSessionTimeout('2FA',_0x36179c),devices[_0x36179c][_0x1f3c7c(0x1cd)][_0x1f3c7c(0x12e)]&&devices[_0x36179c][_0x1f3c7c(0x1cd)][_0x1f3c7c(0x1dc)]==_0x1f3c7c(0x132)&&setSessionTimeout(_0x1f3c7c(0x1fe),_0x36179c),_0x363c5a['emit'](_0x1f3c7c(0x1f9),{'status':_0x3293af[_0x1f3c7c(0x2aa)],'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x36179c][_0x1f3c7c(0x1cd)],'externalip':devices[_0x36179c]['ip'],'publicKey':secure[_0x1f3c7c(0x279)],'userid':settings[_0x1f3c7c(0x176)],'validInstallation':validInstallation}),devices[_0x36179c][_0x1f3c7c(0x1cd)][_0x1f3c7c(0x282)]==![]&&devices[_0x36179c]['access'][_0x1f3c7c(0x1dc)]==_0x1f3c7c(0x2ff)&&temporaryAccess2FA(_0x36179c,devices[_0x36179c]['ip']);}function setSessionTimeout(_0x4aa110,_0xe7000e){const _0x37a090=_0x457009;let _0x4a08c8;if(_0x4aa110==_0x37a090(0x1fe))_0x4a08c8=loginExpiry*0x3c*0x3e8;else _0x4a08c8=devices[_0xe7000e]['telegramIpApproval']['expiry']*0x3c*0x3e8-(new Date()[_0x37a090(0x237)]()-devices[_0xe7000e][_0x37a090(0x23d)][_0x37a090(0x293)]);if(devices[_0xe7000e]['pidExpireLogin'])clearTimeout(devices[_0xe7000e]['pidExpireLogin']);devices[_0xe7000e][_0x37a090(0x276)]=setTimeout(()=>{const _0x3141bb=_0x37a090;if(devices[_0xe7000e][_0x3141bb(0x20b)])clearTimeout(devices[_0xe7000e]['pidRefreshToken']);removeSocketListeners(_0xe7000e),addBlacklist(_0xe7000e),devices[_0xe7000e]['telegramIpApproval']=null,devices[_0xe7000e][_0x3141bb(0x1de)]=null,devices[_0xe7000e][_0x3141bb(0x1cd)][_0x3141bb(0x12e)]=null,logger[_0x3141bb(0x1cc)](_0x3141bb(0x2c2)+_0xe7000e[_0x3141bb(0x2f7)](-0x8)),devices[_0xe7000e][_0x3141bb(0x1cd)]=validateAccess(devices[_0xe7000e][_0x3141bb(0x1cd)][_0x3141bb(0x12e)],_0xe7000e),!(devices[_0xe7000e][_0x3141bb(0x1cd)][_0x3141bb(0x282)]&&devices[_0xe7000e][_0x3141bb(0x1cd)]['reason']==_0x3141bb(0x24d))&&(_0x4aa110==_0x3141bb(0x1fe)?io['to'](_0xe7000e)['emit']('status',{'access':{'allow':![],'reason':_0x3141bb(0x255),'token':null}}):io['to'](_0xe7000e)[_0x3141bb(0x23a)]('status',{'access':{'allow':![],'reason':_0x3141bb(0x1ab),'token':null}})),devices[_0xe7000e]['access'][_0x3141bb(0x12e)]=null;},_0x4a08c8);}function setTokenRefresh(_0xf60c1e){const _0x3f4ee6=_0x457009;if(devices[_0xf60c1e]['pidRefreshToken'])clearTimeout(devices[_0xf60c1e][_0x3f4ee6(0x20b)]);devices[_0xf60c1e][_0x3f4ee6(0x20b)]=setTimeout(()=>{const _0x5e75fc=_0x3f4ee6;getClientsWithUuid(_0xf60c1e)[_0x5e75fc(0xeb)]!=0x0?(devices[_0xf60c1e][_0x5e75fc(0x1cd)]=refreshToken(_0xf60c1e),io['to'](_0xf60c1e)['emit'](_0x5e75fc(0x1f9),{'status':_0x5e75fc(0x122),'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0xf60c1e][_0x5e75fc(0x1cd)],'externalip':devices[_0xf60c1e]['ip'],'publicKey':secure[_0x5e75fc(0x279)],'validInstallation':validInstallation}),setTokenRefresh(_0xf60c1e)):clearTimeout(devices[_0xf60c1e]['pidRefreshToken']);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x59b97b){const _0xd74463=_0x457009,_0x44e729=getClient(_0x59b97b['id'])['uuid'];_0x59b97b['emit']('bots',config),_0x59b97b['emit'](_0xd74463(0x157),cleanSettings()),_0x59b97b['on'](_0xd74463(0x1f2),_0x4f6570=>{const _0x11e827=_0xd74463;if(validateAccess(_0x4f6570,_0x44e729)[_0x11e827(0x282)])addBot();else logger[_0x11e827(0x1e6)]('Unauthorized\x20attempt\x20to\x20add\x20bot');}),_0x59b97b['on'](_0xd74463(0x15c),(_0x3ec692,_0x405431)=>{const _0x357542=_0xd74463;if(validateAccess(_0x405431,_0x44e729)[_0x357542(0x282)])toggleBot(_0x3ec692[_0x357542(0x286)],_0x3ec692[_0x357542(0x1f9)],_0x3ec692[_0x357542(0x27b)]);else logger[_0x357542(0x1e6)](_0x357542(0x2a0));}),_0x59b97b['on']('toggle-bot-mode',(_0x16ebea,_0x2ec93e)=>{const _0x5b1308=_0xd74463;if(validateAccess(_0x2ec93e,_0x44e729)[_0x5b1308(0x282)])toggleBotMode(_0x16ebea);else logger[_0x5b1308(0x1e6)]('Unauthorized\x20attempt\x20to\x20update\x20bot');}),_0x59b97b['on'](_0xd74463(0x10f),(_0x50bf3e,_0x25a85d)=>{const _0x2d02d7=_0xd74463;if(validateAccess(_0x25a85d,_0x44e729)['allow'])deleteBot(_0x50bf3e);else logger[_0x2d02d7(0x1e6)](_0x2d02d7(0x25c));}),_0x59b97b['on'](_0xd74463(0x25b),(_0x5615f0,_0x3171b8)=>{const _0x3d984b=_0xd74463;if(validateAccess(_0x3171b8,_0x44e729)['allow'])storeSettings(_0x5615f0,!![]);else logger[_0x3d984b(0x1e6)](_0x3d984b(0xe8));}),_0x59b97b['on'](_0xd74463(0x2c3),_0x543588=>{const _0x251ae8=_0xd74463;if(validateAccess(_0x543588,_0x44e729)['allow'])updateBB(_0x251ae8(0x25d));else logger[_0x251ae8(0x1e6)](_0x251ae8(0x11d));}),_0x59b97b['on']('reinstall-bb',_0x257d6d=>{const _0x30447a=_0xd74463;if(validateAccess(_0x257d6d,_0x44e729)[_0x30447a(0x282)])updateBB('reinstall');else logger[_0x30447a(0x1e6)]('Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot');}),_0x59b97b['on'](_0xd74463(0x11b),_0x2e3dbe=>{const _0x41df50=_0xd74463;if(validateAccess(_0x2e3dbe,_0x44e729)[_0x41df50(0x282)]){const _0x2e1061=getClient(_0x59b97b['id']);if(_0x2e1061)getBackupFiles(_0x2e1061[_0x41df50(0x1b5)]);else logger[_0x41df50(0x1e6)](_0x41df50(0x240));}else logger[_0x41df50(0x1e6)](_0x41df50(0x1ec));}),_0x59b97b['on'](_0xd74463(0x265),(_0x24858e,_0x321f75)=>{const _0x14e5b2=_0xd74463;if(validateAccess(_0x321f75,_0x44e729)[_0x14e5b2(0x282)])restoreBackupFile(_0x24858e);else logger['full']('Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file');}),_0x59b97b['on'](_0xd74463(0x1c5),_0x301b98=>{const _0x5637d3=_0xd74463;if(validateAccess(_0x301b98,_0x44e729)[_0x5637d3(0x282)])getMessages();else logger[_0x5637d3(0x1e6)]('Unauthorized\x20attempt\x20to\x20get\x20messages');}),_0x59b97b['on']('confirm-message',(_0x2dca9b,_0x18a132)=>{const _0x4e14f0=_0xd74463;if(validateAccess(_0x18a132,_0x44e729)[_0x4e14f0(0x282)])confirmMessage(_0x2dca9b);else logger[_0x4e14f0(0x1e6)](_0x4e14f0(0x2f4));}),_0x59b97b['on'](_0xd74463(0x1fb),_0x464507=>{const _0x4a27da=_0xd74463;if(validateAccess(_0x464507,_0x44e729)[_0x4a27da(0x282)]){if(devices[_0x44e729][_0x4a27da(0x20b)])clearTimeout(devices[_0x44e729][_0x4a27da(0x20b)]);if(devices[_0x44e729][_0x4a27da(0x276)])clearTimeout(devices[_0x44e729]['pidExpireLogin']);removeSocketListeners(getClient(_0x59b97b['id'])[_0x4a27da(0x1b5)]),addBlacklist(_0x44e729),devices[_0x44e729]['telegramIpApproval']=null,devices[_0x44e729][_0x4a27da(0x1de)]=null,devices[_0x44e729]['access'][_0x4a27da(0x12e)]=null,logger[_0x4a27da(0x1cc)](_0x4a27da(0x2b5)+_0x44e729[_0x4a27da(0x2f7)](-0x8)),io['to'](getClient(_0x59b97b['id'])[_0x4a27da(0x1b5)])['emit'](_0x4a27da(0x1f9),{'access':{'allow':![],'reason':_0x4a27da(0xec),'token':null}});}else logger[_0x4a27da(0x1e6)]('Unauthorized\x20attempt\x20to\x20log\x20out');});}function initializeSocketBot(_0x567315){const _0x10268c=_0x457009,_0x2f321a=getClient(_0x567315['id'])[_0x10268c(0x298)],_0x1eb0ad=getClient(_0x567315['id'])[_0x10268c(0x1b5)];_0x567315['on']('get-logs',(_0x6d2467,_0x39a0eb)=>{const _0x325470=_0x10268c;if(validateAccess(_0x39a0eb,_0x1eb0ad)[_0x325470(0x282)]){if(pid[_0x2f321a])pid[_0x2f321a][_0x325470(0x19d)]({'function':_0x325470(0x2b8),'args':_0x6d2467});}else logger[_0x325470(0x1e6)](_0x325470(0x169));}),_0x567315['on'](_0x10268c(0x1e1),(_0x15669d,_0x5bc49a)=>{const _0x5b1479=_0x10268c;if(validateAccess(_0x5bc49a,_0x1eb0ad)[_0x5b1479(0x282)]){if(pid[_0x2f321a])pid[_0x2f321a][_0x5b1479(0x19d)]({'function':_0x5b1479(0x117),'args':_0x15669d});}else logger[_0x5b1479(0x1e6)](_0x5b1479(0x119));}),_0x567315['on'](_0x10268c(0x21e),(_0x275bb1,_0x491731)=>{const _0x44436b=_0x10268c;if(validateAccess(_0x491731,_0x1eb0ad)[_0x44436b(0x282)]){if(pid[_0x2f321a])pid[_0x2f321a][_0x44436b(0x19d)]({'function':_0x44436b(0x17e),'args':_0x275bb1});}else logger[_0x44436b(0x1e6)](_0x44436b(0x246));}),_0x567315['on'](_0x10268c(0x253),(_0x564fa8,_0x61df5f)=>{const _0x40b050=_0x10268c;if(validateAccess(_0x61df5f,_0x1eb0ad)[_0x40b050(0x282)]){if(pid[_0x2f321a])pid[_0x2f321a]['send']({'function':_0x40b050(0x23f),'args':_0x564fa8});}else logger[_0x40b050(0x1e6)]('Unauthorized\x20attempt\x20to\x20store\x20configuration');}),_0x567315['on'](_0x10268c(0x2f1),(_0x28ca09,_0x4752ab)=>{const _0x59232b=_0x10268c;if(validateAccess(_0x4752ab,_0x1eb0ad)[_0x59232b(0x282)]){if(pid[_0x2f321a])pid[_0x2f321a][_0x59232b(0x19d)]({'function':_0x59232b(0x2ef),'args':_0x28ca09});}else logger['full'](_0x59232b(0x24a));}),_0x567315['on'](_0x10268c(0x171),(_0x56dc3a,_0x2175c9)=>{const _0x517304=_0x10268c;if(validateAccess(_0x2175c9,_0x1eb0ad)['allow']){if(pid[_0x2f321a])pid[_0x2f321a][_0x517304(0x19d)]({'function':'storeFiat','args':_0x56dc3a});}else logger[_0x517304(0x1e6)](_0x517304(0x114));}),_0x567315['on'](_0x10268c(0x26e),_0x451a48=>{const _0x1a6956=_0x10268c;if(validateAccess(_0x451a48,_0x1eb0ad)[_0x1a6956(0x282)]){if(pid[_0x2f321a])pid[_0x2f321a][_0x1a6956(0x19d)]({'function':_0x1a6956(0x11a),'args':null});}else logger[_0x1a6956(0x1e6)](_0x1a6956(0x27e));}),_0x567315['on'](_0x10268c(0x1ca),_0x3932bc=>{const _0x2e6463=_0x10268c;if(validateAccess(_0x3932bc,_0x1eb0ad)[_0x2e6463(0x282)]){if(pid[_0x2f321a])pid[_0x2f321a][_0x2e6463(0x19d)]({'function':_0x2e6463(0x125),'args':null});}else logger[_0x2e6463(0x1e6)](_0x2e6463(0x13b));}),_0x567315['on'](_0x10268c(0x19c),(_0x55d82c,_0x36b7cb)=>{const _0xeb6b1e=_0x10268c;if(validateAccess(_0x36b7cb,_0x1eb0ad)['allow']){if(pid[_0x2f321a])pid[_0x2f321a][_0xeb6b1e(0x19d)]({'function':_0xeb6b1e(0x11e),'args':_0x55d82c});}else logger[_0xeb6b1e(0x1e6)](_0xeb6b1e(0x165));}),_0x567315['on'](_0x10268c(0x10b),_0x4ac1ba=>{const _0x5348ea=_0x10268c;if(validateAccess(_0x4ac1ba,_0x1eb0ad)['allow']){if(pid[_0x2f321a])pid[_0x2f321a]['send']({'function':'cancelLoading','args':null});}else logger['full'](_0x5348ea(0x294));}),_0x567315['on'](_0x10268c(0x1cb),_0x43d6e3=>{const _0x28d92d=_0x10268c;if(validateAccess(_0x43d6e3,_0x1eb0ad)[_0x28d92d(0x282)]){if(pid[_0x2f321a])pid[_0x2f321a][_0x28d92d(0x19d)]({'function':_0x28d92d(0x2ac),'args':null});}else logger[_0x28d92d(0x1e6)](_0x28d92d(0x262));}),_0x567315['on']('update-bb',_0x2303d5=>{const _0x1b286e=_0x10268c;if(validateAccess(_0x2303d5,_0x1eb0ad)[_0x1b286e(0x282)])updateBB(_0x1b286e(0x25d));else logger['full'](_0x1b286e(0x11d));}),_0x567315['on'](_0x10268c(0x1c5),_0x120733=>{const _0x189ebf=_0x10268c;if(validateAccess(_0x120733,_0x1eb0ad)[_0x189ebf(0x282)])getMessages();else logger[_0x189ebf(0x1e6)](_0x189ebf(0x120));}),_0x567315['on'](_0x10268c(0x1ac),(_0x8977d4,_0x50c09b)=>{const _0x26c9eb=_0x10268c;if(validateAccess(_0x50c09b,_0x1eb0ad)[_0x26c9eb(0x282)])confirmMessage(_0x8977d4);else logger[_0x26c9eb(0x1e6)](_0x26c9eb(0x2f4));}),_0x567315['on'](_0x10268c(0x1fb),_0x92bf30=>{const _0x147670=_0x10268c;if(validateAccess(_0x92bf30,_0x1eb0ad)[_0x147670(0x282)]){if(devices[_0x1eb0ad][_0x147670(0x20b)])clearTimeout(devices[_0x1eb0ad][_0x147670(0x20b)]);if(devices[_0x1eb0ad][_0x147670(0x276)])clearTimeout(devices[_0x1eb0ad][_0x147670(0x276)]);removeSocketListeners(getClient(_0x567315['id'])[_0x147670(0x1b5)]),addBlacklist(_0x1eb0ad),devices[_0x1eb0ad][_0x147670(0x23d)]=null,devices[_0x1eb0ad][_0x147670(0x1de)]=null,devices[_0x1eb0ad][_0x147670(0x1cd)][_0x147670(0x12e)]=null,logger[_0x147670(0x1cc)](_0x147670(0x2b5)+_0x1eb0ad[_0x147670(0x2f7)](-0x8)),io['to'](getClient(_0x567315['id'])[_0x147670(0x1b5)])[_0x147670(0x23a)]('status',{'access':{'allow':![],'reason':_0x147670(0xec),'token':null}});}else logger[_0x147670(0x1e6)](_0x147670(0x1f4));});}function removeSocketListeners(_0x5e8b87){const _0x33802a=_0x457009;getClientsWithUuid(_0x5e8b87)[_0x33802a(0x115)](_0xfee4f7=>{getSocket(_0xfee4f7['id'])['removeAllListeners']();});}function cleanSettings(){const _0x32b289=_0x457009;let _0x248c90=settings;return settings['telegramToken']&&settings[_0x32b289(0xf1)]!=''&&(_0x248c90={..._0x248c90,'telegramToken':_0x32b289(0x16d)}),settings[_0x32b289(0x1e0)]&&settings['bbPassword']!=''&&(_0x248c90={..._0x248c90,'bbPassword':_0x32b289(0x16d)}),settings[_0x32b289(0x198)]&&settings['marketcapApi']!=''&&(_0x248c90={..._0x248c90,'marketcapApi':_0x32b289(0x16d)}),(settings[_0x32b289(0x1e0)]&&settings[_0x32b289(0x1e0)]==_0x32b289(0x101)||settings['telegramToken']&&settings[_0x32b289(0xf1)]==_0x32b289(0x101)||settings[_0x32b289(0x198)]&&settings[_0x32b289(0x198)]==_0x32b289(0x101))&&(_0x248c90={..._0x248c90,'restored':{'password':settings[_0x32b289(0x1e0)]==_0x32b289(0x101),'telegram':settings['telegramToken']==_0x32b289(0x101),'marketcap':settings[_0x32b289(0x198)]=='***'}}),_0x248c90;}async function updateBB(_0x35193a){const _0x1e1cb0=_0x457009;await backupConfigFiles(),installingUpdate=!![],config[_0x1e1cb0(0x115)](_0x2216f6=>{const _0x141d4a=_0x1e1cb0;restartBot(_0x2216f6[_0x141d4a(0x286)]);});if(_0x35193a==_0x1e1cb0(0x25d))process[_0x1e1cb0(0x19d)]({'update':!![],'environment':environment},_0x4b0649=>{});else _0x35193a==_0x1e1cb0(0x131)&&process[_0x1e1cb0(0x19d)]({'reinstall':!![],'environment':environment},_0x251dd6=>{});}function startBot(_0x14160f,_0x18d84e,_0x37d65d){const _0x5639ab=_0x457009;if(debugging)_0x14160f[_0x5639ab(0x1fc)]('-d');if(recreate)_0x14160f[_0x5639ab(0x1fc)]('-r');let _0x3fa4bc=![];const _0x2bcc08=_0x14160f[0x0];_0x18d84e={..._0x18d84e,'stdio':[_0x5639ab(0x251),'inherit','inherit','ipc']},pid[_0x2bcc08]=childProcess['fork'](botfile,_0x14160f,_0x18d84e),pid[_0x2bcc08]['on'](_0x5639ab(0x22f),_0xf2a9d5=>{const _0x3aab77=_0x5639ab;switch(Object['keys'](_0xf2a9d5)[0x0]){case'botname':updateBotName(_0x2bcc08,_0xf2a9d5['botname']);break;case _0x3aab77(0x205):updateBotManager();break;case _0x3aab77(0x1f9):updateStatus(_0x2bcc08,_0xf2a9d5[_0x3aab77(0x1f9)]);break;case _0x3aab77(0x27b):updateLive(_0x2bcc08,_0xf2a9d5[_0x3aab77(0x27b)]);break;case _0x3aab77(0x195):updateLive(_0x2bcc08,_0xf2a9d5['started']),io['to'](_0x2bcc08)['emit']('status',{'access':{'allow':![],'reason':_0x3aab77(0x2c7),'token':null}});break;case _0x3aab77(0x223):_0xf2a9d5[_0x3aab77(0x223)]==_0x3aab77(0x162)&&restartBot(_0x2bcc08);_0xf2a9d5['stop']==_0x3aab77(0xe2)&&toggleBot(_0x2bcc08,'disabled',_0x3aab77(0x27c));break;case'telegram':sendTelegramBot(_0x2bcc08,_0xf2a9d5[_0x3aab77(0x1c3)]);break;case _0x3aab77(0x25f):sendTelegramMsg(_0xf2a9d5[_0x3aab77(0x25f)]);break;case _0x3aab77(0x127):io['to'](_0x2bcc08)['emit'](_0xf2a9d5['function'],_0xf2a9d5[_0x3aab77(0x27d)]);break;}}),pid[_0x2bcc08]['on'](_0x5639ab(0x145),function(_0x411202){if(_0x3fa4bc)return;_0x3fa4bc=!![],_0x37d65d(_0x411202);}),pid[_0x2bcc08]['on'](_0x5639ab(0x280),async function(_0x45dff3){const _0x2bf6f6=_0x5639ab;if(terminating)return;if(installingUpdate){io[_0x2bf6f6(0x2e0)]();return;}if(_0x3fa4bc)return;_0x3fa4bc=!![],_0x37d65d(null);const _0xf86b03=dbConfig[_0x2bf6f6(0x2cf)]('bots')[_0x2bf6f6(0x14e)]({'botID':_0x2bcc08})[_0x2bf6f6(0x1c8)]();_0xf86b03&&(_0xf86b03['status']==_0x2bf6f6(0x20f)||_0xf86b03[_0x2bf6f6(0x1f9)]==_0x2bf6f6(0x2fa))&&(await sleep(0x3e8),updateLive(_0x2bcc08,_0x2bf6f6(0x27c)),logger[_0x2bf6f6(0x1e6)](_0x2bf6f6(0x163)+botRef(_0x2bcc08)),startBot([_0x2bcc08,userID],{'cwd':bbpath},function(_0x54282c){const _0x1a2f57=_0x2bf6f6;if(_0x54282c)logger[_0x1a2f57(0x1e6)](_0x54282c);}));});}function stopBot(_0x56ee09){const _0x166e6a=_0x457009;getClientsWithBotID(_0x56ee09)[_0x166e6a(0x115)](_0xe026af=>{const _0xb8c394=_0x166e6a;getSocket(_0xe026af['id'])[_0xb8c394(0x188)](!![]),removeClient(_0xe026af['id']);}),pid[_0x56ee09]&&(pid[_0x56ee09][_0x166e6a(0xe2)](),pid[_0x56ee09]=null);}function stopAllBots(){terminating=!![];const _0x3657f0=getEnabledBots();_0x3657f0['forEach'](_0xf76730=>{const _0x34c0fa=_0x35a3;stopBot(_0xf76730[_0x34c0fa(0x286)]);});}function restartBot(_0x274fde){const _0x2ad87c=_0x457009;if(pid[_0x274fde])pid[_0x274fde][_0x2ad87c(0xe2)]();}function addBot(){const _0x10c41c=_0x457009;let _0x591d36;for(let _0x288426=0x1;_0x288426<0x3e9;_0x288426++){_0x591d36=_0x288426[_0x10c41c(0x18d)]()[_0x10c41c(0x1f7)](0x3,'0');let _0x2f683a=config[_0x10c41c(0x14e)](_0x333a3a=>_0x333a3a['botID']==_0x591d36);if(!_0x2f683a)break;}if(_0x591d36==='1000'){logger[_0x10c41c(0x1e6)](_0x10c41c(0x1e4));return;}logger[_0x10c41c(0x1e6)](_0x10c41c(0x2e3)+_0x591d36),dbConfig['get']('bots')[_0x10c41c(0x1fc)]({'botID':_0x591d36,'botname':'Bot\x20'+_0x591d36,'status':_0x10c41c(0x2fa),'live':''})[_0x10c41c(0x152)](),startBot([_0x591d36,userID],{'cwd':bbpath},function(_0x24b45f){const _0x3f399e=_0x10c41c;if(_0x24b45f)logger[_0x3f399e(0x1e6)](_0x24b45f);}),config=getConfiguration(),io['to'](_0x10c41c(0x1bc))['emit'](_0x10c41c(0x1db),config),broadcastToBots(_0x10c41c(0x1db),JSON[_0x10c41c(0x183)](config));}function deleteBot(_0x57ded5){const _0x1a69d9=_0x457009;getClientsWithBotID(_0x57ded5)[_0x1a69d9(0x115)](_0x5d2fe6=>{const _0x4b5d18=_0x1a69d9;getSocket(_0x5d2fe6['id'])[_0x4b5d18(0x188)](!![]),removeClient(_0x5d2fe6['id']);}),dbConfig['get']('bots')[_0x1a69d9(0x10a)]({'botID':_0x57ded5})[_0x1a69d9(0x152)](),logger[_0x1a69d9(0x1e6)](_0x1a69d9(0x215)+_0x57ded5),stopBot(_0x57ded5);try{if(fs[_0x1a69d9(0xf4)](path[_0x1a69d9(0x202)](configpath,'bot-'+_0x57ded5+'-config.json')))fs[_0x1a69d9(0x1f0)](path[_0x1a69d9(0x202)](configpath,_0x1a69d9(0x2c6)+_0x57ded5+'-config.json'));if(fs[_0x1a69d9(0xf4)](path[_0x1a69d9(0x202)](configpath,'bot-'+_0x57ded5+_0x1a69d9(0x2fb))))fs[_0x1a69d9(0x1f0)](path[_0x1a69d9(0x202)](configpath,_0x1a69d9(0x2c6)+_0x57ded5+_0x1a69d9(0x2fb)));if(fs[_0x1a69d9(0xf4)](path[_0x1a69d9(0x202)](configpath,_0x1a69d9(0x2c6)+_0x57ded5+_0x1a69d9(0x2ce))))fs['unlinkSync'](path[_0x1a69d9(0x202)](configpath,_0x1a69d9(0x2c6)+_0x57ded5+'-performance.json'));if(fs[_0x1a69d9(0xf4)](path[_0x1a69d9(0x202)](configpath,'bot-'+_0x57ded5+_0x1a69d9(0x2bf))))fs[_0x1a69d9(0x1f0)](path['join'](configpath,_0x1a69d9(0x2c6)+_0x57ded5+'-results.json'));}catch(_0x1fe72e){if(_0x1fe72e)logger[_0x1a69d9(0x1e6)](_0x1a69d9(0x287),_0x1fe72e);}config=getConfiguration(),io['to'](_0x1a69d9(0x1bc))[_0x1a69d9(0x23a)](_0x1a69d9(0x1db),config),broadcastToBots(_0x1a69d9(0x1db),JSON['stringify'](config));}function toggleBot(_0x59000e,_0x1d4e16,_0x4f353e){const _0x2f48c2=_0x457009;dbConfig[_0x2f48c2(0x2cf)](_0x2f48c2(0x1db))[_0x2f48c2(0x14e)]({'botID':_0x59000e})[_0x2f48c2(0x1f3)]({'status':_0x1d4e16})[_0x2f48c2(0x1f3)]({'live':_0x4f353e})[_0x2f48c2(0x152)]();const _0x34726e=botRef(_0x59000e);if(_0x1d4e16==_0x2f48c2(0x20f)||_0x1d4e16==_0x2f48c2(0x2fa))logger[_0x2f48c2(0x1e6)]('Enabled\x20'+_0x34726e),startBot([_0x59000e,userID],{'cwd':bbpath},function(_0x490039){const _0x279f3f=_0x2f48c2;if(_0x490039)logger[_0x279f3f(0x1e6)](_0x490039);});else(_0x1d4e16==_0x2f48c2(0x14a)||_0x1d4e16=='new-disabled')&&(logger['full'](_0x2f48c2(0x259)+_0x34726e),stopBot(_0x59000e));config=getConfiguration(),io['to'](_0x2f48c2(0x1bc))[_0x2f48c2(0x23a)]('bots',config),broadcastToBots(_0x2f48c2(0x1db),JSON[_0x2f48c2(0x183)](config));}function toggleStatus(_0x55429b){const _0x401e1f=_0x457009;let _0x144149=dbConfig[_0x401e1f(0x2cf)](_0x401e1f(0x1db))[_0x401e1f(0x14e)]({'botID':_0x55429b})['value'](),_0x3dda5d;if(_0x144149['status']===_0x401e1f(0x20f))_0x3dda5d=_0x401e1f(0x14a);else{if(_0x144149[_0x401e1f(0x1f9)]===_0x401e1f(0x2fa))_0x3dda5d=_0x401e1f(0x1b9);else{if(_0x144149[_0x401e1f(0x1f9)]==='new-disabled')_0x3dda5d=_0x401e1f(0x2fa);else{if(_0x144149[_0x401e1f(0x1f9)]===_0x401e1f(0x14a))_0x3dda5d=_0x401e1f(0x20f);}}}return _0x3dda5d;}function updateStatus(_0xb55aee,_0x582f15){const _0x4984b4=_0x457009;dbConfig[_0x4984b4(0x2cf)](_0x4984b4(0x1db))[_0x4984b4(0x14e)]({'botID':_0xb55aee})['assign']({'status':_0x582f15})[_0x4984b4(0x152)](),config=getConfiguration(),io['to']('botmanager')[_0x4984b4(0x23a)](_0x4984b4(0x1db),config),broadcastToBots(_0x4984b4(0x1db),JSON[_0x4984b4(0x183)](config));}function updateLive(_0xd2f796,_0x1bf975){const _0x53b16f=_0x457009;dbConfig['get']('bots')['find']({'botID':_0xd2f796})[_0x53b16f(0x1f3)]({'live':_0x1bf975})[_0x53b16f(0x152)](),config=getConfiguration(),io['to'](_0x53b16f(0x1bc))[_0x53b16f(0x23a)]('bots',config),broadcastToBots('bots',JSON[_0x53b16f(0x183)](config));}function updateBotName(_0x4a51c3,_0x2e94c6){const _0x5507c9=_0x457009;dbConfig[_0x5507c9(0x2cf)](_0x5507c9(0x1db))[_0x5507c9(0x14e)]({'botID':_0x4a51c3})['assign']({'botname':_0x2e94c6})[_0x5507c9(0x152)](),config=getConfiguration(),io['to'](_0x5507c9(0x1bc))['emit'](_0x5507c9(0x1db),config),broadcastToBots(_0x5507c9(0x1db),JSON[_0x5507c9(0x183)](config));}function updateBotManager(){const _0x29daec=_0x457009;config=getConfiguration(),io['to'](_0x29daec(0x1bc))[_0x29daec(0x23a)](_0x29daec(0x1db),config),broadcastToBots('bots',JSON[_0x29daec(0x183)](config));}function toggleBotMode(_0x24564c){const _0xa2e3a6=_0x457009;if(pid[_0x24564c])pid[_0x24564c]['send']({'function':_0xa2e3a6(0x17a),'args':null});else{const _0x14d30a=configpath+_0xa2e3a6(0x2c6)+_0x24564c+_0xa2e3a6(0xe5),_0x1ad72e=fs[_0xa2e3a6(0x26b)](_0x14d30a),_0xa604b6=JSON[_0xa2e3a6(0x1d0)](_0x1ad72e),_0x3606ee=_0xa604b6[_0xa2e3a6(0x298)][0x0][_0xa2e3a6(0x27a)];_0xa604b6[_0xa2e3a6(0x298)][0x0][_0xa2e3a6(0x27a)]=!_0x3606ee;const _0x37d8de=JSON[_0xa2e3a6(0x183)](_0xa604b6,null,0x2);fs[_0xa2e3a6(0x2b3)](_0x14d30a,_0x37d8de),config=getConfiguration(),io['to'](_0xa2e3a6(0x1bc))[_0xa2e3a6(0x23a)](_0xa2e3a6(0x1db),config),broadcastToBots(_0xa2e3a6(0x1db),JSON[_0xa2e3a6(0x183)](config));}}function validateTelegram(_0xc9c83){const _0x5a6863=_0x457009;if(_0xc9c83[_0x5a6863(0x1fd)][_0x5a6863(0x19e)]!=settings[_0x5a6863(0x1ea)]&&'@'+_0xc9c83[_0x5a6863(0x1fd)][_0x5a6863(0x19e)]!=settings[_0x5a6863(0x1ea)]||_0xc9c83[_0x5a6863(0x2c0)]['id']!=settings[_0x5a6863(0x20d)])return sendTelegram(_0xc9c83[_0x5a6863(0x2c0)]['id'],'Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings',{'parse_mode':_0x5a6863(0x235)}),![];return!![];}function botRef(_0x49cf57){const _0x567d7b=_0x457009,_0x5bd053=getBotAttributes(_0x49cf57),_0x5cf30f=_0x5bd053[_0x567d7b(0x182)]?_0x5bd053['botname']:'Bot\x20'+_0x49cf57;return _0x5cf30f;}async function initTelegram(){const _0x54e373=_0x457009;tgBot&&(await tgBot[_0x54e373(0x223)](),await sleep(0x7d0));tgBot=new Telegraf(settings['telegramToken']);let _0x115c7d=_0x54e373(0x2e7);_0x115c7d+='\x0a',_0x115c7d+=_0x54e373(0x248),_0x115c7d+='/disable\x20-\x20disable\x20notifications\x0a',_0x115c7d+='/config\x20-\x20notification\x20types\x20to\x20receive\x0a',_0x115c7d+=_0x54e373(0x1ae),_0x115c7d+=_0x54e373(0x2df),_0x115c7d+='/off\x20-\x20stop\x20bot(s)\x0a',_0x115c7d+='/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a',_0x115c7d+='/names\x20-\x20show\x20bot\x20names\x0a',_0x115c7d+=_0x54e373(0x26d),_0x115c7d+=_0x54e373(0xf6),_0x115c7d+='/portfolio\x20-\x20show\x20bot\x20portfolio\x0a',_0x115c7d+=_0x54e373(0x2b0),_0x115c7d+='/backup\x20-\x20receive\x20backup\x20files\x0a',_0x115c7d+='/update\x20-\x20update\x20Balance\x20Bot\x0a',_0x115c7d+='/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a',_0x115c7d+=_0x54e373(0x2c4);let _0xf4cbfb=_0x54e373(0x193);_0xf4cbfb+='\x0a',_0xf4cbfb+=_0x115c7d,tgBot[_0x54e373(0x22e)]((_0x25f9e1,_0x32e144)=>{const _0xbb5eb=_0x54e373;logger[_0xbb5eb(0x155)](getTimeStamp()+_0xbb5eb(0x218)),logger['debug'](_0xbb5eb(0x273),_0x25f9e1);}),tgBot[_0x54e373(0x22c)](async(_0x2d66e0,_0x3b5032)=>{const _0xea4144=_0x54e373;if(settings[_0xea4144(0x20d)]||_0x2d66e0[_0xea4144(0x25d)][_0xea4144(0x22f)][_0xea4144(0x11c)]!=_0xea4144(0x1a2)){if(!validateTelegram(_0x2d66e0))return;}_0x3b5032();}),tgBot[_0x54e373(0x2bc)](_0x54e373(0x1c1),async _0x5847f7=>{const _0xe49fd1=_0x54e373;if(_0x5847f7[_0xe49fd1(0x1fd)][_0xe49fd1(0x19e)]==settings['telegramUsername']||'@'+_0x5847f7[_0xe49fd1(0x1fd)][_0xe49fd1(0x19e)]==settings[_0xe49fd1(0x1ea)]){if(!settings[_0xe49fd1(0x20d)])updateSetting(_0xe49fd1(0x20d),_0x5847f7[_0xe49fd1(0x2c0)]['id']);else{if(!validateTelegram(_0x5847f7))return;}}else{if(!validateTelegram(_0x5847f7))return;}updateSetting(_0xe49fd1(0x2fc),!![]),await sendTelegram(_0x5847f7[_0xe49fd1(0x2c0)]['id'],_0xf4cbfb);}),tgBot[_0x54e373(0x2bc)](_0x54e373(0x1e9),async _0x432f8d=>{const _0x2be876=_0x54e373;updateSetting(_0x2be876(0x2fc),!![]),await sendTelegram(_0x432f8d[_0x2be876(0x2c0)]['id'],_0x2be876(0x1ce));}),tgBot[_0x54e373(0x2bc)](_0x54e373(0x107),async _0x2f3c01=>{const _0x1a6b27=_0x54e373;await sendTelegram(_0x2f3c01[_0x1a6b27(0x2c0)]['id'],_0x1a6b27(0x158)),updateSetting('telegramEnabled',![]);}),tgBot[_0x54e373(0x2bc)](_0x54e373(0x14d),async _0x56150d=>{const _0x2e3a20=_0x54e373,_0x1ef9c3=Markup['inlineKeyboard']([Markup[_0x2e3a20(0x2b1)]['callback']('Orders',_0x2e3a20(0x2ca)),Markup[_0x2e3a20(0x2b1)][_0x2e3a20(0x2cd)]('Alerts',_0x2e3a20(0xe6)),Markup[_0x2e3a20(0x2b1)]['callback'](_0x2e3a20(0x2d2),_0x2e3a20(0x1f8))]);_0x56150d[_0x2e3a20(0x2e6)](_0x2e3a20(0x2a3),_0x1ef9c3);}),tgBot['action'](_0x54e373(0x2ca),async _0x2183da=>{const _0x475c7d=_0x54e373;_0x2183da['editMessageReplyMarkup'](),updateSetting(_0x475c7d(0x1fa),_0x475c7d(0x2d1)),updateSetting(_0x475c7d(0x2fc),!![]),await sendTelegram(_0x2183da[_0x475c7d(0x2c0)]['id'],_0x475c7d(0x28e));}),tgBot[_0x54e373(0x15f)](_0x54e373(0xe6),async _0x4e5e5d=>{const _0x3c7d3f=_0x54e373;_0x4e5e5d[_0x3c7d3f(0x105)](),updateSetting(_0x3c7d3f(0x1fa),_0x3c7d3f(0x1cf)),updateSetting('telegramEnabled',!![]),await sendTelegram(_0x4e5e5d[_0x3c7d3f(0x2c0)]['id'],_0x3c7d3f(0x159));}),tgBot[_0x54e373(0x15f)]('config_all',async _0x1ba53d=>{const _0x517b72=_0x54e373;_0x1ba53d['editMessageReplyMarkup'](),updateSetting('telegramEvents',_0x517b72(0x225)),updateSetting(_0x517b72(0x2fc),!![]),await sendTelegram(_0x1ba53d[_0x517b72(0x2c0)]['id'],_0x517b72(0x1e2));}),tgBot['command']('status',async _0x992c93=>{const _0x90db7=_0x54e373,_0x1aa397=getBotsWithMode();let _0x3b0459=_0x90db7(0x139);config[_0x90db7(0x115)](_0x4b3aac=>{const _0x3a47c7=_0x90db7,_0x2cb01b=_0x1aa397[_0x3a47c7(0x14e)](_0x527efa=>_0x527efa[_0x3a47c7(0x286)]==_0x4b3aac[_0x3a47c7(0x286)])[_0x3a47c7(0x244)];_0x3b0459+='Bot\x20'+_0x4b3aac[_0x3a47c7(0x286)]+':\x20'+_0x4b3aac[_0x3a47c7(0x1f9)]+_0x3a47c7(0x2d0)+_0x2cb01b+_0x3a47c7(0x2d0)+_0x4b3aac[_0x3a47c7(0x27b)]+'\x0a';}),_0x3b0459+='\x0a',_0x3b0459+=_0x90db7(0x284),_0x3b0459+=!settings[_0x90db7(0x2fc)]?_0x90db7(0x184):'Notifications\x20enabled\x0a',_0x3b0459+=settings['telegramEnabled']?settings[_0x90db7(0x1fa)]=='all'?_0x90db7(0x243):'Notifications\x20types:\x20'+settings[_0x90db7(0x1fa)]+_0x90db7(0x2fd):'',await sendTelegram(_0x992c93[_0x90db7(0x2c0)]['id'],_0x3b0459,{'parse_mode':_0x90db7(0x235)});}),tgBot['command'](_0x54e373(0x162),async _0x407126=>{const _0x428466=_0x54e373,_0x14397f=getEnabledBots();if(_0x14397f[_0x428466(0xeb)]==0x0)await sendTelegram(_0x407126[_0x428466(0x2c0)]['id'],_0x428466(0x12c));else{if(_0x14397f[_0x428466(0xeb)]>0x1)_0x14397f[_0x428466(0x1fc)]({'botID':_0x428466(0x225)});let _0x45e750=[],_0x391e7f=[];const _0x369072=_0x14397f[_0x428466(0xeb)]%0x4==0x0||_0x14397f['length']%0x4==0x3||_0x14397f[_0x428466(0xeb)]%0x3==0x1?0x4:0x3;let _0x28b482=0x0;_0x14397f[_0x428466(0x115)]((_0x4649d0,_0x33c84c)=>{const _0x280ef5=_0x428466;if(_0x33c84c%_0x369072==0x0)_0x391e7f=[];_0x391e7f['push'](Markup['button'][_0x280ef5(0x2cd)](_0x4649d0['botID']==_0x280ef5(0x225)?_0x280ef5(0x260):botRef(_0x4649d0['botID']),_0x280ef5(0x1c2)+_0x4649d0[_0x280ef5(0x286)])),_0x33c84c%_0x369072==0x0&&(_0x45e750[_0x28b482]=_0x391e7f,_0x28b482++);});const _0x2474e0=Markup['inlineKeyboard'](_0x45e750);_0x407126['reply'](_0x428466(0x275),_0x2474e0);}}),tgBot[_0x54e373(0x15f)](/restart_(.+)/,async _0x153761=>{const _0x4315a0=_0x54e373,_0x1585a7=_0x153761[_0x4315a0(0x1d2)][0x1];_0x153761[_0x4315a0(0x105)](),_0x1585a7=='all'?config[_0x4315a0(0x115)](_0x27193a=>{const _0x28bc04=_0x4315a0;restartBot(_0x27193a[_0x28bc04(0x286)]);}):restartBot(_0x1585a7);}),tgBot[_0x54e373(0x2bc)]('on',async _0x390556=>{const _0x1b743e=_0x54e373,_0xea66a6=getDisabledBots();if(_0xea66a6[_0x1b743e(0xeb)]==0x0)await sendTelegram(_0x390556['chat']['id'],_0x1b743e(0x19b));else{if(_0xea66a6[_0x1b743e(0xeb)]>0x1)_0xea66a6['push']({'botID':'all'});let _0x186f97=[],_0xf38c01=[];const _0x1a2b4c=_0xea66a6[_0x1b743e(0xeb)]%0x4==0x0||_0xea66a6[_0x1b743e(0xeb)]%0x4==0x3||_0xea66a6[_0x1b743e(0xeb)]%0x3==0x1?0x4:0x3;let _0x157c23=0x0;_0xea66a6['forEach']((_0x3c6413,_0x5aa3e5)=>{const _0x25f019=_0x1b743e;if(_0x5aa3e5%_0x1a2b4c==0x0)_0xf38c01=[];_0xf38c01[_0x25f019(0x1fc)](Markup[_0x25f019(0x2b1)][_0x25f019(0x2cd)](_0x3c6413[_0x25f019(0x286)]==_0x25f019(0x225)?_0x25f019(0x260):botRef(_0x3c6413['botID']),_0x25f019(0x23b)+_0x3c6413['botID'])),_0x5aa3e5%_0x1a2b4c==0x0&&(_0x186f97[_0x157c23]=_0xf38c01,_0x157c23++);});const _0xf04666=Markup[_0x1b743e(0x116)](_0x186f97);_0x390556['reply']('Which\x20bot\x20do\x20you\x20want\x20to\x20start?',_0xf04666);}}),tgBot['action'](/on_(.+)/,async _0x380a64=>{const _0x4204b0=_0x54e373,_0x16b0dc=_0x380a64[_0x4204b0(0x1d2)][0x1];_0x380a64['editMessageReplyMarkup']();if(_0x16b0dc=='all'){const _0x3f1914=getDisabledBots();await sendTelegram(_0x380a64[_0x4204b0(0x2c0)]['id'],'Bot\x20Mgr\x20>\x20Starting\x20all\x20bots'),_0x3f1914['forEach'](_0x1d1c5f=>{const _0x284cec=_0x4204b0;if(_0x1d1c5f['botID']!=_0x284cec(0x225))toggleBot(_0x1d1c5f['botID'],toggleStatus(_0x1d1c5f[_0x284cec(0x286)]),_0x284cec(0x27c));});}else await sendTelegram(_0x380a64['chat']['id'],_0x4204b0(0x121)+botRef(_0x16b0dc)),toggleBot(_0x16b0dc,toggleStatus(_0x16b0dc),'stopped');}),tgBot[_0x54e373(0x2bc)](_0x54e373(0x146),async _0x572857=>{const _0x38d4c8=_0x54e373,_0x1537cb=getEnabledBots();if(_0x1537cb[_0x38d4c8(0xeb)]==0x0)await sendTelegram(_0x572857[_0x38d4c8(0x2c0)]['id'],_0x38d4c8(0x12c));else{if(_0x1537cb[_0x38d4c8(0xeb)]>0x1)_0x1537cb[_0x38d4c8(0x1fc)]({'botID':_0x38d4c8(0x225)});let _0x367691=[],_0x5e51ed=[];const _0x3a6bb7=_0x1537cb[_0x38d4c8(0xeb)]%0x4==0x0||_0x1537cb['length']%0x4==0x3||_0x1537cb[_0x38d4c8(0xeb)]%0x3==0x1?0x4:0x3;let _0x45783b=0x0;_0x1537cb['forEach']((_0x4ed024,_0x206e94)=>{const _0x140d51=_0x38d4c8;if(_0x206e94%_0x3a6bb7==0x0)_0x5e51ed=[];_0x5e51ed[_0x140d51(0x1fc)](Markup['button'][_0x140d51(0x2cd)](_0x4ed024[_0x140d51(0x286)]==_0x140d51(0x225)?_0x140d51(0x260):botRef(_0x4ed024['botID']),_0x140d51(0x100)+_0x4ed024[_0x140d51(0x286)])),_0x206e94%_0x3a6bb7==0x0&&(_0x367691[_0x45783b]=_0x5e51ed,_0x45783b++);});const _0x525e85=Markup[_0x38d4c8(0x116)](_0x367691);_0x572857[_0x38d4c8(0x2e6)]('Which\x20bot\x20do\x20you\x20want\x20to\x20stop?',_0x525e85);}}),tgBot[_0x54e373(0x15f)](/off_(.+)/,async _0x47b83=>{const _0xa2d50f=_0x54e373,_0x2fecb5=_0x47b83[_0xa2d50f(0x1d2)][0x1];_0x47b83[_0xa2d50f(0x105)]();if(_0x2fecb5=='all'){const _0xd2424c=getEnabledBots();await sendTelegram(_0x47b83['chat']['id'],_0xa2d50f(0x2a9)),_0xd2424c[_0xa2d50f(0x115)](_0x1a9d38=>{const _0x847b32=_0xa2d50f;if(_0x1a9d38[_0x847b32(0x286)]!='all')toggleBot(_0x1a9d38['botID'],toggleStatus(_0x1a9d38[_0x847b32(0x286)]),_0x847b32(0x27c));});}else await sendTelegram(_0x47b83[_0xa2d50f(0x2c0)]['id'],_0xa2d50f(0x2f2)+botRef(_0x2fecb5)),toggleBot(_0x2fecb5,toggleStatus(_0x2fecb5),_0xa2d50f(0x27c));}),tgBot['command'](_0x54e373(0x17f),async _0x536693=>{const _0x3bc56d=_0x54e373,_0x1b7241=getEnabledBots();if(_0x1b7241[_0x3bc56d(0xeb)]==0x0)await sendTelegram(_0x536693['chat']['id'],'No\x20bots\x20running\x20right\x20now');else{if(_0x1b7241['length']>0x1){let _0x2352cf=[],_0x552bd3=[];const _0x127251=_0x1b7241[_0x3bc56d(0xeb)]%0x4==0x0||_0x1b7241[_0x3bc56d(0xeb)]%0x4==0x3||_0x1b7241[_0x3bc56d(0xeb)]%0x3==0x1?0x4:0x3;let _0x1bc371=0x0;_0x1b7241[_0x3bc56d(0x115)]((_0x3dcd6d,_0x1741b2)=>{const _0x30a8a5=_0x3bc56d;if(_0x1741b2%_0x127251==0x0)_0x552bd3=[];_0x552bd3[_0x30a8a5(0x1fc)](Markup[_0x30a8a5(0x2b1)][_0x30a8a5(0x2cd)](botRef(_0x3dcd6d[_0x30a8a5(0x286)]),_0x30a8a5(0x2f9)+_0x3dcd6d['botID'])),_0x1741b2%_0x127251==0x0&&(_0x2352cf[_0x1bc371]=_0x552bd3,_0x1bc371++);});const _0x461ec7=Markup[_0x3bc56d(0x116)](_0x2352cf);_0x536693[_0x3bc56d(0x2e6)](_0x3bc56d(0x28a),_0x461ec7);}else{const _0x6bc38a=_0x1b7241[0x0][_0x3bc56d(0x286)];if(pid[_0x6bc38a])pid[_0x6bc38a]['send']({'function':'sendMetricsTelegram','args':null});}}}),tgBot['action'](/metrics_(.+)/,async _0x4764bd=>{const _0x4eb242=_0x54e373,_0x44d92d=_0x4764bd['match'][0x1];_0x4764bd['editMessageReplyMarkup']();if(pid[_0x44d92d])pid[_0x44d92d][_0x4eb242(0x19d)]({'function':_0x4eb242(0x138),'args':null});}),tgBot['command'](_0x54e373(0x2bd),async _0x19b8e4=>{const _0x1c7231=_0x54e373,_0x33a378=getEnabledBots();if(_0x33a378[_0x1c7231(0xeb)]==0x0)await sendTelegram(_0x19b8e4[_0x1c7231(0x2c0)]['id'],_0x1c7231(0x12c));else{if(_0x33a378[_0x1c7231(0xeb)]>0x1){let _0x5410ca=[],_0x224d53=[];const _0x85f1b0=_0x33a378[_0x1c7231(0xeb)]%0x4==0x0||_0x33a378[_0x1c7231(0xeb)]%0x4==0x3||_0x33a378['length']%0x3==0x1?0x4:0x3;let _0x455ca8=0x0;_0x33a378[_0x1c7231(0x115)]((_0x32557a,_0x47a250)=>{const _0x16c45e=_0x1c7231;if(_0x47a250%_0x85f1b0==0x0)_0x224d53=[];_0x224d53[_0x16c45e(0x1fc)](Markup[_0x16c45e(0x2b1)][_0x16c45e(0x2cd)](botRef(_0x32557a[_0x16c45e(0x286)]),_0x16c45e(0x2be)+_0x32557a[_0x16c45e(0x286)])),_0x47a250%_0x85f1b0==0x0&&(_0x5410ca[_0x455ca8]=_0x224d53,_0x455ca8++);});const _0x2ee07e=Markup[_0x1c7231(0x116)](_0x5410ca);_0x19b8e4[_0x1c7231(0x2e6)]('For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?',_0x2ee07e);}else{const _0x1d477c=_0x33a378[0x0][_0x1c7231(0x286)];if(pid[_0x1d477c])pid[_0x1d477c]['send']({'function':_0x1c7231(0x211),'args':null});}}}),tgBot[_0x54e373(0x15f)](/portfolio_(.+)/,async _0x1ddf1d=>{const _0x1938f6=_0x54e373,_0x1e3a6e=_0x1ddf1d['match'][0x1];_0x1ddf1d[_0x1938f6(0x105)]();if(pid[_0x1e3a6e])pid[_0x1e3a6e][_0x1938f6(0x19d)]({'function':'sendPortfolioTelegram','args':null});}),tgBot[_0x54e373(0x2bc)]('logs',async _0x479681=>{const _0x1eaf1f=_0x54e373,_0x754de8=_0x1eaf1f(0x143);await zipFiles(_0x754de8);const _0x5d46b0=zippath+(_0x754de8+_0x1eaf1f(0x1be));_0x479681[_0x1eaf1f(0xf2)]({'source':_0x5d46b0})[_0x1eaf1f(0x289)](()=>{})['catch'](_0x84c5fd=>logger[_0x1eaf1f(0x1cc)](_0x1eaf1f(0x220)+_0x754de8+'\x20files\x20over\x20Telegram:',_0x84c5fd));}),tgBot[_0x54e373(0x2bc)](_0x54e373(0x278),async _0x5ce511=>{const _0x44b40f=_0x54e373,_0x522a62=_0x44b40f(0x278);await backupConfigFiles(),await zipFiles(_0x522a62);const _0x2e9c74=zippath+(_0x522a62+_0x44b40f(0x1be));_0x5ce511[_0x44b40f(0xf2)]({'source':_0x2e9c74})[_0x44b40f(0x289)](()=>{})[_0x44b40f(0x22e)](_0x3aa1fd=>logger[_0x44b40f(0x1cc)](_0x44b40f(0x220)+_0x522a62+_0x44b40f(0x18a),_0x3aa1fd));}),tgBot[_0x54e373(0x2bc)](_0x54e373(0x25d),async _0x3ca76b=>{const _0x41c41d=_0x54e373;await getMessages();if(!updateAvailable)await sendTelegram(_0x3ca76b[_0x41c41d(0x2c0)]['id'],'Your\x20installation\x20is\x20already\x20up\x20to\x20date');else{if(!validInstallation)await sendTelegram(_0x3ca76b['chat']['id'],_0x41c41d(0xef));else{const _0x5bfd74=Markup[_0x41c41d(0x116)]([Markup['button'][_0x41c41d(0x2cd)](_0x41c41d(0xf3),'update_yes'),Markup[_0x41c41d(0x2b1)][_0x41c41d(0x2cd)]('No','update_no')]);_0x3ca76b[_0x41c41d(0x2e6)](_0x41c41d(0x133),_0x5bfd74);}}}),tgBot[_0x54e373(0x15f)](/update_(.+)/,async _0x5f236f=>{const _0x1bc279=_0x54e373,_0x46057a=_0x5f236f[_0x1bc279(0x1d2)][0x1];_0x5f236f[_0x1bc279(0x105)](),_0x46057a=='yes'&&(await sendTelegram(_0x5f236f['chat']['id'],'Starting\x20Balance\x20Bot\x20update'),updateBB(_0x1bc279(0x25d))),_0x46057a=='no'&&await sendTelegram(_0x5f236f[_0x1bc279(0x2c0)]['id'],'Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later');}),tgBot['command'](_0x54e373(0x131),async _0x218736=>{const _0x1074aa=_0x54e373;if(!validInstallation)await sendTelegram(_0x218736[_0x1074aa(0x2c0)]['id'],_0x1074aa(0x18f));else{const _0xacfd50=Markup[_0x1074aa(0x116)]([Markup['button']['callback'](_0x1074aa(0xf3),_0x1074aa(0x191)),Markup[_0x1074aa(0x2b1)]['callback']('No','reinstall_no')]);_0x218736[_0x1074aa(0x2e6)](_0x1074aa(0xed),_0xacfd50);}}),tgBot[_0x54e373(0x15f)](/reinstall_(.+)/,async _0x2024c3=>{const _0x44c95a=_0x54e373,_0x3a914f=_0x2024c3['match'][0x1];_0x2024c3['editMessageReplyMarkup'](),_0x3a914f==_0x44c95a(0x20c)&&(await sendTelegram(_0x2024c3[_0x44c95a(0x2c0)]['id'],_0x44c95a(0x180)),updateBB(_0x44c95a(0x131))),_0x3a914f=='no'&&await sendTelegram(_0x2024c3['chat']['id'],_0x44c95a(0xe0));}),tgBot[_0x54e373(0x2bc)]('toggle',async _0x4f43ef=>{const _0x440f9a=_0x54e373,_0x30315a=getBotsWithMode();if(_0x30315a[_0x440f9a(0xeb)]==0x0)await sendTelegram(_0x4f43ef[_0x440f9a(0x2c0)]['id'],'No\x20bots\x20running\x20right\x20now');else{let _0x22913d=[],_0x2afc2e=[];const _0x436f1f=0x2;let _0x28cece=0x0;_0x30315a['forEach']((_0x866ae3,_0x293821)=>{const _0x2c05b1=_0x440f9a;if(_0x293821%_0x436f1f==0x0)_0x2afc2e=[];_0x2afc2e['push'](Markup['button'][_0x2c05b1(0x2cd)](botRef(_0x866ae3[_0x2c05b1(0x286)])+'\x20('+_0x866ae3['mode']+')',_0x2c05b1(0x236)+_0x866ae3[_0x2c05b1(0x286)])),_0x293821%_0x436f1f==0x0&&(_0x22913d[_0x28cece]=_0x2afc2e,_0x28cece++);});const _0x1d62c9=Markup[_0x440f9a(0x116)](_0x22913d);_0x4f43ef['reply'](_0x440f9a(0x209),_0x1d62c9);}}),tgBot['action'](/toggle_(.+)/,async _0x3c68e5=>{const _0x1877aa=_0x54e373,_0x419c88=_0x3c68e5['match'][0x1];_0x3c68e5[_0x1877aa(0x105)]();const _0x29350d=getBotsWithMode(),_0x48af3f=_0x29350d[_0x1877aa(0x14e)](_0x4251a0=>_0x4251a0[_0x1877aa(0x286)]==_0x419c88),_0x1e63a6=_0x48af3f[_0x1877aa(0x244)]==_0x1877aa(0x268)?_0x1877aa(0x178):'auto';await sendTelegram(_0x3c68e5['chat']['id'],_0x1877aa(0x1bd)+botRef(_0x48af3f[_0x1877aa(0x286)])+_0x1877aa(0x150)+_0x1e63a6+_0x1877aa(0x28d)),toggleBotMode(_0x419c88);}),tgBot[_0x54e373(0x2bc)](_0x54e373(0x2c1),async _0x357cc0=>{const _0xa643cc=_0x54e373;let _0xfcbc7c='';config[_0xa643cc(0x115)](_0x3e3261=>{const _0x3d78d4=_0xa643cc;_0xfcbc7c+='Bot\x20'+_0x3e3261[_0x3d78d4(0x286)]+':\x20'+_0x3e3261['botname']+'\x0a';}),await sendTelegram(_0x357cc0[_0xa643cc(0x2c0)]['id'],_0xfcbc7c,{'parse_mode':_0xa643cc(0x235)});}),tgBot['command']('help',async _0x13056d=>{const _0x4fd28a=_0x54e373;await sendTelegram(_0x13056d[_0x4fd28a(0x2c0)]['id'],_0x115c7d);}),process[_0x54e373(0xf7)](_0x54e373(0x2cc),()=>tgBot['stop'](_0x54e373(0x2cc))),process[_0x54e373(0xf7)](_0x54e373(0x10c),()=>tgBot[_0x54e373(0x223)](_0x54e373(0x10c))),tgBot['launch']();}function disableTelegram(){const _0x3ee641=_0x457009;tgBot&&tgBot[_0x3ee641(0x223)]();}async function sendTelegram(_0xdd69b9,_0x3629c7,_0x41bd1e){const _0x5483d7=_0x457009;_0x41bd1e={..._0x41bd1e,'disable_web_page_preview':!![]};try{await tgBot[_0x5483d7(0x1c3)][_0x5483d7(0x140)](_0xdd69b9,_0x3629c7,_0x41bd1e);}catch(_0x3239e6){logger[_0x5483d7(0x1cc)]('Telegram\x20error:',_0x3239e6);}}async function sendTelegramBot(_0xb47391,_0x5a58b3){const _0x367cbf=_0x457009;if(settings[_0x367cbf(0x2fc)]){if(settings[_0x367cbf(0x1fa)]==_0x367cbf(0x225)||(_0x5a58b3[_0x367cbf(0x1a6)]=='error'||_0x5a58b3[_0x367cbf(0x1a6)]==_0x367cbf(0x141)||_0x5a58b3[_0x367cbf(0x1a6)]==_0x367cbf(0x1b2))&&settings[_0x367cbf(0x1fa)]==_0x367cbf(0x1cf)||_0x5a58b3[_0x367cbf(0x1a6)]==_0x367cbf(0x156)&&settings[_0x367cbf(0x1fa)]==_0x367cbf(0x2d1)){if(tgBot&&settings[_0x367cbf(0x20d)]){if(_0x5a58b3['showname'])await sendTelegram(settings[_0x367cbf(0x20d)],_0x5a58b3[_0x367cbf(0xfe)]+_0x367cbf(0x181)+_0x5a58b3[_0x367cbf(0x2ab)]);else await sendTelegram(settings[_0x367cbf(0x20d)],'Bot\x20'+_0xb47391+_0x367cbf(0x181)+_0x5a58b3[_0x367cbf(0x2ab)]);}}}}async function sendTelegramMsg(_0x2305c5,_0x4cea08=_0x457009(0x235)){const _0x388690=_0x457009;return tgBot&&settings[_0x388690(0x20d)]?(await sendTelegram(settings[_0x388690(0x20d)],_0x2305c5,{'parse_mode':_0x4cea08}),!![]):![];}function getDeviceWithIp(_0x1ae974){const _0x287ad6=_0x457009;return devices[_0x287ad6(0x14e)](_0x11d71c=>_0x11d71c['ip']===_0x1ae974);}async function temporaryAccess2FA(_0x3117fe,_0x212162){const _0x2607ab=_0x457009;let _0x316410=new Date(),_0x20f9b8=![];if(lastIpApproval){if(_0x316410-lastIpApproval<0x1388)_0x20f9b8=!![];}lastIpApproval=new Date();if(_0x20f9b8)return;if(tgBot&&settings[_0x2607ab(0x20d)]){const _0x4fac82=uuidRandom();tmpStorage[_0x4fac82]={'uuid':_0x3117fe,'externalip':_0x212162};const _0x5be535=Markup[_0x2607ab(0x116)]([Markup[_0x2607ab(0x2b1)][_0x2607ab(0x2cd)](_0x2607ab(0x295),'tempaccess_5_'+_0x4fac82),Markup[_0x2607ab(0x2b1)]['callback']('15\x20min',_0x2607ab(0x1b8)+_0x4fac82),Markup[_0x2607ab(0x2b1)][_0x2607ab(0x2cd)]('30\x20min',_0x2607ab(0x1af)+_0x4fac82),Markup[_0x2607ab(0x2b1)]['callback'](_0x2607ab(0xfa),'tempaccess_reject_'+_0x4fac82)]);await sendTelegram(settings[_0x2607ab(0x20d)],_0x2607ab(0x1d3)+normalizeIP(_0x212162)[_0x2607ab(0x200)]+'\x20?',_0x5be535),tgBot['action'](/tempaccess_(.+)_(.+)/,async _0x53e590=>{const _0x599bfe=_0x2607ab,_0x176aeb=_0x53e590[_0x599bfe(0x1d2)][0x1],_0x26a1db=_0x53e590['match'][0x2],{uuid:_0xac0a06,externalip:_0xbab258}=tmpStorage[_0x26a1db];delete tmpStorage[_0x26a1db],_0x53e590[_0x599bfe(0x105)](),devices[_0xac0a06][_0x599bfe(0x23d)]={'clientip':_0xbab258,'timestamp':new Date()['getTime'](),'expiry':_0x176aeb},_0x176aeb!=_0x599bfe(0xfa)?(await sendTelegram(_0x53e590[_0x599bfe(0x2c0)]['id'],_0x599bfe(0x129)+_0x176aeb+'\x20minutes',{'parse_mode':_0x599bfe(0x235)}),io['to'](_0xac0a06)[_0x599bfe(0x23a)](_0x599bfe(0x1f9),{'access':{'allow':![],'reason':_0x599bfe(0x2c7),'token':null}})):(await sendTelegram(_0x53e590[_0x599bfe(0x2c0)]['id'],_0x599bfe(0x290)),io['to'](_0xac0a06)[_0x599bfe(0x23a)](_0x599bfe(0x1f9),{'access':{'allow':![],'reason':_0x599bfe(0x1d1),'token':null}}));});}}async function loginAccess2FA(_0x4a3626,_0x1588dc){const _0x31a2c9=_0x457009;if(tgBot&&settings[_0x31a2c9(0x20d)]){const _0x394cb9=uuidRandom();tmpStorage[_0x394cb9]={'uuid':_0x4a3626,'externalip':_0x1588dc};const _0x20cd0d=Markup['inlineKeyboard']([Markup[_0x31a2c9(0x2b1)][_0x31a2c9(0x2cd)](_0x31a2c9(0x1df),_0x31a2c9(0x29d)+loginExpiry+'_'+_0x394cb9),Markup[_0x31a2c9(0x2b1)][_0x31a2c9(0x2cd)](_0x31a2c9(0xfa),_0x31a2c9(0x14b)+_0x394cb9)]);await sendTelegram(settings[_0x31a2c9(0x20d)],_0x31a2c9(0x2db)+normalizeIP(_0x1588dc)['show']+'\x20?',_0x20cd0d),tgBot[_0x31a2c9(0x15f)](/login2fa_(.+)_(.+)/,async _0x11740b=>{const _0x6e4f4d=_0x31a2c9,_0x174104=_0x11740b[_0x6e4f4d(0x1d2)][0x1],_0xc3a21=_0x11740b['match'][0x2],{uuid:_0x3c38f0,externalip:_0x3319b4}=tmpStorage[_0xc3a21];delete tmpStorage[_0xc3a21],_0x11740b[_0x6e4f4d(0x105)](),devices[_0x3c38f0][_0x6e4f4d(0x1de)]={'clientip':_0x3319b4,'timestamp':new Date()[_0x6e4f4d(0x237)](),'expiry':_0x174104},_0x174104!=_0x6e4f4d(0xfa)?(await sendTelegram(_0x11740b['chat']['id'],_0x6e4f4d(0x2a5),{'parse_mode':'HTML'}),io['to'](_0x3c38f0)[_0x6e4f4d(0x23a)](_0x6e4f4d(0x1f9),{'access':{'allow':![],'reason':'reload','token':null}})):(await sendTelegram(_0x11740b['chat']['id'],_0x6e4f4d(0xfb)),io['to'](_0x3c38f0)[_0x6e4f4d(0x23a)](_0x6e4f4d(0x1f9),{'access':{'allow':![],'reason':'2FA\x20login\x20rejected','token':null}}));});}}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x515d43=_0x457009;return dbConfig[_0x515d43(0x2cf)](_0x515d43(0x1db))['sortBy'](_0x515d43(0x286))['filter']({'status':_0x515d43(0x20f)})['value']()||[];}function getDisabledBots(){const _0x304764=_0x457009;return dbConfig['get'](_0x304764(0x1db))[_0x304764(0x1a5)](_0x304764(0x286))[_0x304764(0x281)]({'status':_0x304764(0x14a)})[_0x304764(0x1c8)]()||[];}function getBotAttributes(_0x3aa088){const _0x4b8474=_0x457009;let _0x114d93={};const _0x4df41b=configpath+_0x4b8474(0x2c6)+_0x3aa088+_0x4b8474(0xe5),_0x4a3951=fs[_0x4b8474(0xf4)](_0x4df41b);if(_0x4a3951){const _0x3115f3=fs[_0x4b8474(0x26b)](_0x4df41b);try{const _0x3c5804=JSON[_0x4b8474(0x1d0)](_0x3115f3),_0x46d9b7=_0x3c5804?_0x3c5804[_0x4b8474(0x298)][0x0][_0x4b8474(0x27a)]:![];_0x114d93[_0x4b8474(0x244)]=_0x46d9b7?_0x4b8474(0x268):_0x4b8474(0x178),_0x114d93[_0x4b8474(0xfe)]=_0x3c5804?_0x3c5804[_0x4b8474(0x298)][0x0][_0x4b8474(0xfe)]:_0x4b8474(0x1c4)+_0x3aa088,_0x114d93[_0x4b8474(0x182)]=_0x3c5804?_0x3c5804['bot'][0x0][_0x4b8474(0x182)]:![];}catch(_0x40da9a){_0x114d93[_0x4b8474(0x244)]=_0x4b8474(0x178),_0x114d93[_0x4b8474(0xfe)]=_0x4b8474(0x1c4)+_0x3aa088,_0x114d93[_0x4b8474(0x182)]=![];}}else _0x114d93[_0x4b8474(0x244)]='manual',_0x114d93[_0x4b8474(0xfe)]=_0x4b8474(0x1c4)+_0x3aa088,_0x114d93[_0x4b8474(0x182)]=![];return _0x114d93;}function getBotsWithMode(){const _0x2a4e68=_0x457009,_0x2c0609=dbConfig[_0x2a4e68(0x2cf)]('bots')[_0x2a4e68(0x1a5)]('botID')[_0x2a4e68(0x1c8)]()||[];return _0x2c0609[_0x2a4e68(0x115)](_0x4ba133=>{const _0x7033c3=_0x2a4e68;let _0x9aa396=getBotAttributes(_0x4ba133['botID']);_0x4ba133[_0x7033c3(0x244)]=_0x9aa396[_0x7033c3(0x244)];}),_0x2c0609;}function getBotExchanges(){const _0x266606=_0x457009;let _0xec198b=[];const _0x128095=dbConfig[_0x266606(0x2cf)](_0x266606(0x1db))['sortBy'](_0x266606(0x286))[_0x266606(0x1c8)]()||[];_0x128095[_0x266606(0x115)](_0x34054c=>{const _0x14ce42=_0x266606;if(_0x34054c['status']==_0x14ce42(0x20f)){const _0x57ccdf=configpath+_0x14ce42(0x2c6)+_0x34054c[_0x14ce42(0x286)]+_0x14ce42(0xe5),_0x143b14=fs['existsSync'](_0x57ccdf);let _0x208e93;if(_0x143b14){const _0x3d75f3=fs[_0x14ce42(0x26b)](_0x57ccdf);try{const _0x4e6498=JSON[_0x14ce42(0x1d0)](_0x3d75f3);_0x208e93=_0x4e6498?_0x4e6498[_0x14ce42(0x298)][0x0][_0x14ce42(0x1b7)]:null;}catch(_0x267683){}}if(_0x208e93)_0xec198b[_0x14ce42(0x1fc)](_0x208e93);}});const _0x51f303=[...new Set(_0xec198b)][_0x266606(0x1d9)]();return _0x51f303;}async function initUser(){const _0x1dd7ae=_0x457009;if(!settings[_0x1dd7ae(0x176)]){const _0x2a8fda=uuidRandom();mixpanel[_0x1dd7ae(0x13e)](_0x2a8fda),updateSetting('userid',_0x2a8fda);}}async function initSecure(){const _0x1c81cc=_0x457009;let _0x29cbc9=getSecure();if(!_0x29cbc9[_0x1c81cc(0x12a)](_0x1c81cc(0x14f))){let _0x145b7b=await generateKeys();_0x29cbc9[_0x1c81cc(0x279)]=_0x145b7b['publicKey'],_0x29cbc9['privateKey']=_0x145b7b[_0x1c81cc(0x254)],_0x29cbc9['secret']=crypto[_0x1c81cc(0x2ba)](0x20)[_0x1c81cc(0x18d)](_0x1c81cc(0x18c));;storeSecure(_0x29cbc9);}}function getSettings(){const _0x2f1c14=_0x457009;return dbSettings[_0x2f1c14(0x2cf)]('settings')[_0x2f1c14(0x1c8)]()||{};}function getSecure(){const _0x2a71b7=_0x457009;return dbSecure[_0x2a71b7(0x2cf)](_0x2a71b7(0x2ec))[_0x2a71b7(0x1c8)]()||{};}function getBlacklist(){const _0x47f17c=_0x457009;return dbSecure[_0x47f17c(0x2cf)]('blacklist')[_0x47f17c(0x1c8)]()||[];}function broadcastToBots(_0x4e3512,_0xb5f6b4){const _0x28ac62=_0x457009;config[_0x28ac62(0x115)](_0x2371eb=>{const _0x4e4b89=_0x28ac62;if(_0x2371eb['status']==_0x4e4b89(0x20f)&&_0x2371eb['live']==_0x4e4b89(0x13a)||_0x2371eb[_0x4e4b89(0x1f9)]=='new'&&_0x2371eb[_0x4e4b89(0x27b)]==_0x4e4b89(0x13a)){if(pid[_0x2371eb[_0x4e4b89(0x286)]])pid[_0x2371eb['botID']][_0x4e4b89(0x19d)]({[_0x4e3512]:_0xb5f6b4});}});}async function storeSettings(_0x5942dc,_0x1f30eb=![]){const _0x5d42ff=_0x457009;_0x5942dc={...settings,..._0x5942dc};if(_0x1f30eb&&_0x5942dc[_0x5d42ff(0x1e0)]!=_0x5d42ff(0x16d)&&_0x5942dc['bbPassword']!='***'&&_0x5942dc[_0x5d42ff(0x1e0)]!=''){const _0x4f3b56=decryptRSA(secure[_0x5d42ff(0x254)],_0x5942dc[_0x5d42ff(0x1e0)])[_0x5d42ff(0x25e)]('|@|')[0x0],_0xba476a=bcrypt[_0x5d42ff(0x168)](_0x4f3b56,saltRounds);_0x5942dc={..._0x5942dc,'bbPassword':_0xba476a};}if(_0x1f30eb&&_0x5942dc[_0x5d42ff(0xf1)]!=_0x5d42ff(0x16d)&&_0x5942dc[_0x5d42ff(0xf1)]!=_0x5d42ff(0x101)&&_0x5942dc[_0x5d42ff(0xf1)]!=''){const _0x2cbe29=decryptRSA(secure[_0x5d42ff(0x254)],_0x5942dc[_0x5d42ff(0xf1)])['split']('|@|')[0x0];_0x5942dc={..._0x5942dc,'telegramToken':_0x2cbe29};}if(_0x1f30eb&&_0x5942dc['marketcapApi']!='************'&&_0x5942dc[_0x5d42ff(0x198)]!=_0x5d42ff(0x101)&&_0x5942dc[_0x5d42ff(0x198)]!=''){const _0xe3cf52=decryptRSA(secure[_0x5d42ff(0x254)],_0x5942dc[_0x5d42ff(0x198)])[_0x5d42ff(0x25e)]('|@|')[0x0];_0x5942dc={..._0x5942dc,'marketcapApi':_0xe3cf52};}const _0x51e9e8=_0x5942dc[_0x5d42ff(0xf1)]!=_0x5d42ff(0x16d)&&_0x5942dc[_0x5d42ff(0xf1)]!=settings[_0x5d42ff(0xf1)]||_0x5942dc[_0x5d42ff(0x1ea)]!=settings[_0x5d42ff(0x1ea)],_0x894b56=_0x5942dc[_0x5d42ff(0xf1)]==''||_0x5942dc[_0x5d42ff(0x1ea)]=='',_0x53824d=_0x5942dc[_0x5d42ff(0x198)]&&_0x5942dc[_0x5d42ff(0x198)]!='************'&&_0x5942dc[_0x5d42ff(0x198)]!=settings['marketcapApi'];_0x51e9e8&&(_0x5942dc[_0x5d42ff(0x20d)]=null,_0x5942dc[_0x5d42ff(0x1fa)]=_0x5d42ff(0x225));for(const [_0x2b0ca8,_0x1bb9b8]of Object[_0x5d42ff(0x137)](_0x5942dc)){if(_0x2b0ca8==_0x5d42ff(0xf1)&&_0x1bb9b8=='************'){_0x5942dc['telegramToken']=settings[_0x5d42ff(0xf1)];continue;};if(_0x2b0ca8==_0x5d42ff(0x1e0)&&_0x1bb9b8==_0x5d42ff(0x16d)){_0x5942dc[_0x5d42ff(0x1e0)]=settings[_0x5d42ff(0x1e0)];continue;};if(_0x2b0ca8==_0x5d42ff(0x198)&&_0x1bb9b8==_0x5d42ff(0x16d)){_0x5942dc[_0x5d42ff(0x198)]=settings[_0x5d42ff(0x198)];continue;};dbSettings[_0x5d42ff(0x267)](_0x5d42ff(0x2de)+_0x2b0ca8,_0x1bb9b8)[_0x5d42ff(0x152)]();}settings=_0x5942dc,io['to']('botmanager')['emit'](_0x5d42ff(0x157),cleanSettings()),broadcastToBots(_0x5d42ff(0x1d5),settings[_0x5d42ff(0x1d5)]),broadcastToBots(_0x5d42ff(0x12d),settings['onepagemode']),broadcastToBots(_0x5d42ff(0x198),settings[_0x5d42ff(0x198)]);if(_0x51e9e8&&!_0x894b56)initTelegram();_0x51e9e8&&_0x894b56&&(updateSetting(_0x5d42ff(0x20d),null),disableTelegram()),getAllClients()['forEach'](_0xf0426=>{const _0x4253b3=_0x5d42ff;getSocket(_0xf0426['id'])['emit'](_0x4253b3(0x1f9),{'access':{'allow':![],'reason':_0x4253b3(0x2c7),'token':null}});}),_0x53824d&&(await sleep(0xbb8),testMarketcapApi(_0x5942dc['marketcapApi']));}async function testMarketcapApi(_0xb3aa9a){const _0x2ef71c=_0x457009,_0x3c2435=[_0x2ef71c(0x299),_0x2ef71c(0x26f)];try{await axios[_0x2ef71c(0x2cf)]('https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest',{'headers':{'X-CMC_PRO_API_KEY':_0xb3aa9a},'params':{'symbol':_0x3c2435[_0x2ef71c(0x18d)]()}});}catch(_0x2dc882){_0x2dc882[_0x2ef71c(0x18d)]()[_0x2ef71c(0x108)](_0x2ef71c(0x123))?(io['to'](_0x2ef71c(0x1bc))[_0x2ef71c(0x23a)]('notification','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager'),logger[_0x2ef71c(0x1e6)](_0x2ef71c(0x192))):(io['to'](_0x2ef71c(0x1bc))[_0x2ef71c(0x23a)](_0x2ef71c(0x104),_0x2ef71c(0x21f)),logger[_0x2ef71c(0x1e6)](_0x2ef71c(0x21f)),logger[_0x2ef71c(0x1cc)]('Error\x20details:',_0x2dc882['toString']()+_0x2ef71c(0x219)+_0x2dc882[_0x2ef71c(0x161)]));return;}logger[_0x2ef71c(0x1cc)]('CoinMarketCap\x20API\x20key\x20validated');}function updateSetting(_0x4eb6bc,_0xf5b047){const _0x3d4016=_0x457009;dbSettings[_0x3d4016(0x267)](_0x3d4016(0x2de)+_0x4eb6bc,_0xf5b047)['write'](),settings=getSettings(),io['to'](_0x3d4016(0x1bc))[_0x3d4016(0x23a)]('settings',cleanSettings());}function storeSecure(_0x47db0d){const _0x5e3a7f=_0x457009;dbSecure[_0x5e3a7f(0x2cf)](_0x5e3a7f(0x2ec))[_0x5e3a7f(0x1fc)](_0x47db0d)[_0x5e3a7f(0x152)](),secure=_0x47db0d;}function addBlacklist(_0x24a5b1){const _0x4bed50=_0x457009;cleanBlacklist();let _0x26ea40;devices[_0x24a5b1][_0x4bed50(0x23d)]?_0x26ea40=Math['max'](devices[_0x24a5b1][_0x4bed50(0x23d)]['expiry'],loginExpiry):_0x26ea40=loginExpiry,dbSecure['get']('blacklist')[_0x4bed50(0x1fc)]({'expiry':new Date()['getTime']()+_0x26ea40*0x3c*0x3e8,'token':devices[_0x24a5b1][_0x4bed50(0x1cd)]['token']})[_0x4bed50(0x152)](),blacklist=dbSecure[_0x4bed50(0x2cf)](_0x4bed50(0x147))[_0x4bed50(0x1c8)]();}function cleanBlacklist(){const _0x15c951=_0x457009;let _0x5a0fc5=dbSecure[_0x15c951(0x2cf)](_0x15c951(0x147))[_0x15c951(0x20a)]()['value'](),_0x73f55b=new Date()['getTime']();_0x5a0fc5[_0x15c951(0x115)](_0xa53d33=>{const _0x5eb586=_0x15c951;_0xa53d33[_0x5eb586(0x197)]<_0x73f55b&&dbSecure['get'](_0x5eb586(0x147))[_0x5eb586(0x10a)]({'expiry':_0xa53d33[_0x5eb586(0x197)]})[_0x5eb586(0x152)]();});}function initStates(){const _0x3c2309=_0x457009;let _0x235a6b=getConfiguration();_0x235a6b[_0x3c2309(0x115)](_0x37d0e4=>{const _0x4774e0=_0x3c2309;_0x37d0e4['live']=_0x4774e0(0x27c);}),storeConfiguration(_0x235a6b);}async function generateKeys(){const _0x522f15=_0x457009,_0x330bc5=forge[_0x522f15(0x208)][_0x522f15(0x288)]['generateKeyPair']({'bits':0x1000,'e':0x10001}),_0x367db4=forge['pki'][_0x522f15(0x19a)](_0x330bc5[_0x522f15(0x254)]),_0x3471f5=forge[_0x522f15(0x208)][_0x522f15(0x29c)](_0x330bc5[_0x522f15(0x279)]);return{'privateKey':_0x367db4,'publicKey':_0x3471f5};}async function oneTimeMigration(){const _0x12135d=_0x457009;let _0x2a6c13=getSettings(),_0x3c6699=![];!_0x2a6c13[_0x12135d(0x12a)](_0x12135d(0x1a9))&&(_0x2a6c13['lastmsgtelegram']=0x0,_0x3c6699=!![]);!_0x2a6c13[_0x12135d(0x12a)]('lastmsgemitted')&&(_0x2a6c13[_0x12135d(0x177)]=0x0,_0x3c6699=!![]);!_0x2a6c13[_0x12135d(0x12a)]('latestversion')&&(_0x2a6c13[_0x12135d(0x1bb)]=_0x12135d(0x201),_0x3c6699=!![]);!_0x2a6c13[_0x12135d(0x12a)](_0x12135d(0x12d))&&(_0x2a6c13['onepagemode']=![],_0x3c6699=!![]);!_0x2a6c13['hasOwnProperty'](_0x12135d(0x198))&&(_0x2a6c13[_0x12135d(0x198)]='',_0x3c6699=!![]);if(_0x3c6699)storeSettings(_0x2a6c13);try{fs[_0x12135d(0x189)](configbackuppath,{'withFileTypes':!![]})['forEach'](_0x4c582f=>{const _0x6b726e=_0x12135d;if(!_0x4c582f['isDirectory']()){if(!_0x4c582f[_0x6b726e(0x2d6)][_0x6b726e(0x2a2)](_0x6b726e(0x257)))fs['unlinkSync'](configbackuppath+_0x4c582f[_0x6b726e(0x2d6)]);}else fs[_0x6b726e(0x1a4)](configbackuppath+_0x4c582f[_0x6b726e(0x2d6)],{'recursive':!![]});});}catch(_0x559626){logger[_0x12135d(0x1cc)](_0x12135d(0x1a0),_0x559626);}}function storeConfiguration(_0x1b21d3){const _0x4b665c=_0x457009;dbConfig[_0x4b665c(0x2cf)](_0x4b665c(0x1db))[_0x4b665c(0x10a)]()[_0x4b665c(0x152)](),dbConfig['get'](_0x4b665c(0x1db))[_0x4b665c(0x1fc)](..._0x1b21d3)[_0x4b665c(0x152)](),config=_0x1b21d3;}async function resetPassword(){const _0x1ea5ab=_0x457009;if(tgBot&&settings[_0x1ea5ab(0x20d)]){const _0x5dbdd2=Markup[_0x1ea5ab(0x116)]([Markup[_0x1ea5ab(0x2b1)]['callback'](_0x1ea5ab(0x20c),'resetpw_yes'),Markup[_0x1ea5ab(0x2b1)][_0x1ea5ab(0x2cd)]('no',_0x1ea5ab(0x167))]);await sendTelegram(settings['telegramChatId'],_0x1ea5ab(0x19f),_0x5dbdd2),tgBot[_0x1ea5ab(0x15f)](/resetpw_(.+)/,async _0x317774=>{const _0x341939=_0x1ea5ab,_0x1b072b=_0x317774['match'][0x1];_0x317774[_0x341939(0x105)]();if(_0x1b072b!='no'){const _0x6bbc71=0xf,_0xf553b4=_0x341939(0x258),_0x371df3=Array[_0x341939(0x1fd)](crypto[_0x341939(0x130)](new Uint32Array(_0x6bbc71)))['map'](_0x53f1a6=>_0xf553b4[_0x53f1a6%_0xf553b4['length']])[_0x341939(0x202)](''),_0x4c235c=bcrypt['hashSync'](_0x371df3,saltRounds);storeSettings({'bbPassword':_0x4c235c}),await sendTelegram(_0x317774[_0x341939(0x2c0)]['id'],'Password\x20has\x20been\x20reset\x20to:\x20'+_0x371df3,{'parse_mode':_0x341939(0x235)});}else await sendTelegram(_0x317774[_0x341939(0x2c0)]['id'],'Password\x20reset\x20rejected');});}}async function confirmRestore(_0x3b1f59,_0x44f8b8){const _0x4569b8=_0x457009;io['to'](_0x4569b8(0x1bc))[_0x4569b8(0x23a)](_0x4569b8(0x104),_0x4569b8(0x126),_0x4569b8(0x1b2));if(tgBot&&settings['telegramChatId']){const _0x40ad4e=uuidRandom();tmpStorage[_0x40ad4e]={'path':_0x3b1f59,'filename':_0x44f8b8};const _0x36c04b=Markup[_0x4569b8(0x116)]([Markup[_0x4569b8(0x2b1)][_0x4569b8(0x2cd)](_0x4569b8(0x20c),'restore_yes_'+_0x40ad4e),Markup['button'][_0x4569b8(0x2cd)]('no','restore_no_'+_0x40ad4e)]);await sendTelegram(settings[_0x4569b8(0x20d)],_0x4569b8(0x2d3),_0x36c04b),tgBot['action'](/restore_(.+)_(.+)/,async _0x7aeed2=>{const _0x9cd04=_0x4569b8,_0x4097ec=_0x7aeed2[_0x9cd04(0x1d2)][0x1],_0x595dbc=_0x7aeed2[_0x9cd04(0x1d2)][0x2],{path:_0x346daf,filename:_0x2a9399}=tmpStorage[_0x595dbc];delete tmpStorage[_0x595dbc],_0x7aeed2[_0x9cd04(0x105)](),_0x4097ec==_0x9cd04(0x20c)?(logger['debug'](_0x9cd04(0x29b)),await sendTelegram(_0x7aeed2[_0x9cd04(0x2c0)]['id'],_0x9cd04(0x1aa),{'parse_mode':_0x9cd04(0x235)}),unzipFile(_0x346daf,_0x2a9399)):(logger['debug'](_0x9cd04(0x292)),await sendTelegram(_0x7aeed2['chat']['id'],_0x9cd04(0x292)));});}}function getServerTime(){const _0x565707=_0x457009,_0x47d78a=new Date();return _0x47d78a[_0x565707(0x148)]()+'/'+(_0x47d78a[_0x565707(0x186)]()+0x1)[_0x565707(0x18d)]()[_0x565707(0x1f7)](0x2,'0')+'/'+_0x47d78a[_0x565707(0x2b2)]()['toString']()[_0x565707(0x1f7)](0x2,'0')+'\x20'+_0x47d78a[_0x565707(0x196)]()[_0x565707(0x18d)]()[_0x565707(0x1f7)](0x2,'0')+':'+_0x47d78a[_0x565707(0x1da)]()[_0x565707(0x18d)]()[_0x565707(0x1f7)](0x2,'0')+':'+_0x47d78a['getSeconds']()[_0x565707(0x18d)]()[_0x565707(0x1f7)](0x2,'0');}function getTimeStamp(){const _0x17deea=_0x457009,_0x10bebc=shiftedTime();return _0x10bebc[_0x17deea(0x148)]()+'/'+(_0x10bebc['getMonth']()+0x1)[_0x17deea(0x18d)]()[_0x17deea(0x1f7)](0x2,'0')+'/'+_0x10bebc[_0x17deea(0x2b2)]()[_0x17deea(0x18d)]()[_0x17deea(0x1f7)](0x2,'0')+'\x20'+_0x10bebc['getHours']()['toString']()[_0x17deea(0x1f7)](0x2,'0')+':'+_0x10bebc[_0x17deea(0x1da)]()[_0x17deea(0x18d)]()[_0x17deea(0x1f7)](0x2,'0')+':'+_0x10bebc['getSeconds']()[_0x17deea(0x18d)]()['padStart'](0x2,'0');}function getCleanTimeStamp(){const _0x16e1cc=_0x457009,_0x3c653a=shiftedTime();return _0x3c653a[_0x16e1cc(0x148)]()+(_0x3c653a[_0x16e1cc(0x186)]()+0x1)[_0x16e1cc(0x18d)]()[_0x16e1cc(0x1f7)](0x2,'0')+_0x3c653a[_0x16e1cc(0x2b2)]()[_0x16e1cc(0x18d)]()['padStart'](0x2,'0')+'-'+_0x3c653a[_0x16e1cc(0x196)]()['toString']()['padStart'](0x2,'0')+_0x3c653a[_0x16e1cc(0x1da)]()[_0x16e1cc(0x18d)]()[_0x16e1cc(0x1f7)](0x2,'0')+_0x3c653a[_0x16e1cc(0x2ae)]()[_0x16e1cc(0x18d)]()[_0x16e1cc(0x1f7)](0x2,'0');}function shiftedTime(){const _0x56d013=_0x457009,_0x1794a1=new Date();let _0x44c3bd=_0x1794a1;if(settings[_0x56d013(0x1d5)]&&settings[_0x56d013(0x1d5)]!==0x0)_0x44c3bd=fns[_0x56d013(0xf9)](_0x1794a1,{'hours':settings[_0x56d013(0x1d5)]});return _0x44c3bd;}async function startScheduler(){const _0x4c92f2=_0x457009,_0x347b93=new Date()[_0x4c92f2(0x2c8)](),_0x5edecf=shiftedTime()['getHours']();_0x5edecf==0x4&&backupConfigFiles(),_0x5edecf==0x0&&(rotateLogFiles(),logger['debug']('--------------------------------------'),logger[_0x4c92f2(0x1cc)]('Running\x20#RED#Balance\x20Bot\x20v'+serverversion+'#RES#\x20'+(environment==_0x4c92f2(0x29f)?_0x4c92f2(0x261):'')),logger[_0x4c92f2(0x1cc)](_0x4c92f2(0xfc))),_0x347b93%0x6==0x0&&triggerAnalytics(),_0x347b93%0x6==0x0&&getMessages(),await sleep(schedulerInterval),startScheduler();}async function restoreBackupFile(_0x2895e9){const _0x3dd8e6=_0x457009;logger['debug'](_0x3dd8e6(0x204)+_0x2895e9);const _0x5815fc=getBotsWithMode();_0x5815fc['length']>0x0?confirmRestore(configbackuppath,_0x2895e9):unzipFile(configbackuppath,_0x2895e9);}async function getBackupFiles(_0x4f698f=null){const _0x116a86=_0x457009;let _0x36f95a=[],_0xc7644d=fs[_0x116a86(0x189)](configbackuppath,{'withFileTypes':!![]});_0xc7644d[_0x116a86(0x1d9)]((_0x1d1f5a,_0x79573e)=>_0x1d1f5a[_0x116a86(0x2d6)]<_0x79573e[_0x116a86(0x2d6)]?0x1:_0x79573e['name']<_0x1d1f5a[_0x116a86(0x2d6)]?-0x1:0x0),_0xc7644d['forEach'](_0xe25521=>{const _0x32e7cd=_0x116a86;if(!_0xe25521[_0x32e7cd(0x1c0)]()&&_0xe25521['name']['startsWith'](_0x32e7cd(0x257))&&_0xe25521[_0x32e7cd(0x2d6)][_0x32e7cd(0x234)](_0x32e7cd(0x1be))){const _0x393413=formatDate(fs[_0x32e7cd(0x21c)](configbackuppath+_0xe25521[_0x32e7cd(0x2d6)])[_0x32e7cd(0x2d8)]);_0x36f95a[_0x32e7cd(0x1fc)]({'name':_0xe25521[_0x32e7cd(0x2d6)],'mtime':_0x393413});}});if(_0x4f698f)io['to'](_0x4f698f)[_0x116a86(0x23a)]('backup-files',_0x36f95a);else return _0x36f95a;}async function backupConfigFiles(){const _0x4bb217=_0x457009;await zipFiles(_0x4bb217(0x15d));const _0x5a4df8=getCleanTimeStamp();fs[_0x4bb217(0x13c)](zippath+_0x4bb217(0x22b),configbackuppath+(_0x4bb217(0x257)+_0x5a4df8+_0x4bb217(0x1be)));let _0x2d7686=fs['readdirSync'](configbackuppath,{'withFileTypes':!![]});_0x2d7686[_0x4bb217(0x1d9)]((_0x2ac287,_0xe1c1da)=>_0x2ac287['name']<_0xe1c1da[_0x4bb217(0x2d6)]?0x1:_0xe1c1da['name']<_0x2ac287[_0x4bb217(0x2d6)]?-0x1:0x0),_0x2d7686[_0x4bb217(0xeb)]>maxBackups&&fs[_0x4bb217(0x1f0)](configbackuppath+_0x2d7686[_0x2d7686[_0x4bb217(0xeb)]-0x1][_0x4bb217(0x2d6)]);}function rotateLogFiles(){const _0x5bbd2e=_0x457009,_0x2c7e19=fs[_0x5bbd2e(0x21c)](logspath+_0x5bbd2e(0xe7)),_0x5b92cb=_0x2c7e19['size']/0x400;if(_0x5b92cb>0x64){let _0x4fb486=fs['readdirSync'](logspath,{'withFileTypes':!![]});_0x4fb486['sort']((_0x4f1984,_0x1b90ea)=>_0x4f1984['name']<_0x1b90ea['name']?0x1:_0x1b90ea[_0x5bbd2e(0x2d6)]<_0x4f1984[_0x5bbd2e(0x2d6)]?-0x1:0x0),_0x4fb486[_0x5bbd2e(0x115)](_0x35a94d=>{const _0x484cc0=_0x5bbd2e;if(_0x35a94d[_0x484cc0(0x2d6)]==_0x484cc0(0x216))fs[_0x484cc0(0x13c)](logspath+_0x35a94d[_0x484cc0(0x2d6)],logspath+'output-003.log');if(_0x35a94d[_0x484cc0(0x2d6)]=='output-001.log')fs[_0x484cc0(0x13c)](logspath+_0x35a94d[_0x484cc0(0x2d6)],logspath+_0x484cc0(0x216));_0x35a94d[_0x484cc0(0x2d6)]==_0x484cc0(0xe7)&&(fs[_0x484cc0(0x13c)](logspath+_0x35a94d[_0x484cc0(0x2d6)],logspath+_0x484cc0(0x24f)),fs[_0x484cc0(0x2b3)](logspath+_0x35a94d[_0x484cc0(0x2d6)],''));});}}async function zipFiles(_0x1da129){const _0x111f63=_0x457009;let _0x1f9ff4;if(_0x1da129==_0x111f63(0x143))_0x1f9ff4=logspath;if(_0x1da129=='backup')_0x1f9ff4=configpath;if(_0x1da129==_0x111f63(0x15d))_0x1f9ff4=configpath;let _0x3b5bc7=fs['readdirSync'](_0x1f9ff4,{'withFileTypes':!![]});const _0x39e3e9=new JSZip();_0x3b5bc7[_0x111f63(0x115)](_0x139728=>{const _0x3983f3=_0x111f63;if(!_0x139728[_0x3983f3(0x1c0)]()){let _0x38fc55=fs[_0x3983f3(0x26b)](_0x1f9ff4+_0x139728[_0x3983f3(0x2d6)]);if(_0x1da129==_0x3983f3(0x278)){const _0x25ec39=/^bot-[0-9]{3}-config.json$/,_0x51b09e=_0x25ec39['test'](_0x139728[_0x3983f3(0x2d6)]);if(_0x51b09e){const _0x39de7f=JSON[_0x3983f3(0x1d0)](_0x38fc55);if(_0x39de7f[_0x3983f3(0x298)][0x0]){_0x39de7f['bot'][0x0]['apiKey']=_0x3983f3(0x101),_0x39de7f[_0x3983f3(0x298)][0x0][_0x3983f3(0x28b)]=_0x3983f3(0x101);if(_0x39de7f[_0x3983f3(0x298)][0x0]['apiPassword'])_0x39de7f[_0x3983f3(0x298)][0x0][_0x3983f3(0x22d)]='***';}_0x38fc55=JSON[_0x3983f3(0x183)](_0x39de7f,null,0x2);}if(_0x139728[_0x3983f3(0x2d6)]==_0x3983f3(0x166)){const _0x151028=JSON['parse'](_0x38fc55);if(_0x151028[_0x3983f3(0x157)][_0x3983f3(0x15a)])_0x151028[_0x3983f3(0x157)][_0x3983f3(0x15a)]=![];if(_0x151028[_0x3983f3(0x157)]['bbPassword'])_0x151028['settings'][_0x3983f3(0x1e0)]=_0x3983f3(0x101);if(_0x151028['settings'][_0x3983f3(0xf1)])_0x151028['settings'][_0x3983f3(0xf1)]='***';if(_0x151028[_0x3983f3(0x157)][_0x3983f3(0x20d)])_0x151028[_0x3983f3(0x157)][_0x3983f3(0x20d)]=null;if(_0x151028[_0x3983f3(0x157)]['marketcapApi'])_0x151028['settings'][_0x3983f3(0x198)]=_0x3983f3(0x101);_0x38fc55=JSON[_0x3983f3(0x183)](_0x151028,null,0x2);}if(_0x139728['name']!=_0x3983f3(0x2b6))_0x39e3e9[_0x3983f3(0x118)](_0x139728[_0x3983f3(0x2d6)],_0x38fc55);}else _0x39e3e9[_0x3983f3(0x118)](_0x139728[_0x3983f3(0x2d6)],_0x38fc55);}});const _0x23fc22=await _0x39e3e9[_0x111f63(0x1b3)]({'type':_0x111f63(0x252),'base64':![],'compression':'DEFLATE'});fs[_0x111f63(0x2b3)](zippath+(_0x1da129+'.zip'),_0x23fc22,_0x111f63(0x25a));}async function unzipFile(_0x25d70c,_0x18ec16){const _0x117be9=_0x457009;fs['readdirSync'](configpath,{'withFileTypes':!![]})[_0x117be9(0x115)](_0x40516b=>{const _0x4a5c40=_0x117be9;if(!_0x40516b['isDirectory']())fs[_0x4a5c40(0x1a4)](configpath+_0x40516b['name']);});const _0x5735d2=fs['readFileSync'](_0x25d70c+_0x18ec16,_0x117be9(0x25a)),_0xe20e5a=await JSZip[_0x117be9(0x175)](_0x5735d2,{'base64':![],'checkCRC32':!![]});for(const _0x6b6b96 of Object[_0x117be9(0x134)](_0xe20e5a['files'])){const _0x4334c4=_0xe20e5a[_0x117be9(0x28f)][_0x6b6b96],_0x435acd=await _0x4334c4[_0x117be9(0x263)](_0x117be9(0x252));fs[_0x117be9(0x2b3)](configpath+_0x4334c4['name'],_0x435acd);}fs[_0x117be9(0x189)](temppath,{'withFileTypes':!![]})[_0x117be9(0x115)](_0xb373bc=>{const _0x386338=_0x117be9;if(!_0xb373bc[_0x386338(0x1c0)]())fs[_0x386338(0x1a4)](temppath+_0xb373bc[_0x386338(0x2d6)]);}),logger['debug'](_0x117be9(0x2ee)),process[_0x117be9(0x19d)]({'restore':!![]},_0x283b54=>{});}async function getPublicIp(){const _0x6a2854=_0x457009;try{const _0x263d32=await axios[_0x6a2854(0x2cf)]('https://api.ipify.org?format=json');publicip=_0x263d32[_0x6a2854(0x1ba)]['ip'];}catch(_0x4b1624){}}async function triggerAnalytics(){const _0x172712=_0x457009;if(!publicip)await getPublicIp();const _0x316765=getBotsWithMode();let _0x2b8d1c=0x0;_0x316765[_0x172712(0x115)](_0x791fd=>{const _0x146a1a=_0x172712;if(_0x791fd[_0x146a1a(0x1f9)]===_0x146a1a(0x20f))_0x2b8d1c++;});const _0x9b4a4b=getBotExchanges();mixpanel[_0x172712(0x2a8)](_0x172712(0x172),{'distinct_id':settings[_0x172712(0x176)],'ip':publicip,'version':serverversion,'numbots':_0x316765[_0x172712(0xeb)],'numbotsenabled':_0x2b8d1c,'exchanges':_0x9b4a4b,'environment':environment});}async function getMessages(){const _0x20b399=_0x457009,_0x1f9651='https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master',_0x31f20f=new GraphQLClient(_0x1f9651),_0x416e82={'authorization':_0x20b399(0x2cb)},_0x282da3=serverversion[_0x20b399(0x25e)]('.'),_0x192e90=_0x282da3[0x0]+'.'+_0x282da3[0x1],_0x391bc3=Math['min'](settings['lastmsgtelegram'],settings[_0x20b399(0x177)]),_0x33e1ed={'last':parseInt(_0x391bc3),'bbm':_0x192e90},_0x36f6c5=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x4d4698;try{_0x4d4698=await _0x31f20f[_0x20b399(0x1f1)](_0x36f6c5,_0x33e1ed,_0x416e82);}catch(_0x29613e){}if(_0x4d4698&&_0x4d4698['messages']){let _0x295b49=settings[_0x20b399(0x1a9)],_0x41b2f5=settings['lastmsgtelegram'];newMessages=[];for(const _0x42cfec of _0x4d4698[_0x20b399(0x128)]){newMessages['push'](_0x42cfec);let _0xecd3fe=![];_0x42cfec[_0x20b399(0x2d9)]&&(updateSetting(_0x20b399(0x1bb),_0x42cfec[_0x20b399(0x2d9)]),_0xecd3fe=isNewerVersion(serverversion,_0x42cfec['bbvNew'])||serverversion==_0x42cfec[_0x20b399(0x2d9)]);if(!_0xecd3fe&&_0x42cfec['number']>_0x295b49){if(_0x42cfec[_0x20b399(0x249)]==='any'||serverversion[_0x20b399(0x2a2)](_0x42cfec['bbvReceive'])){let _0x578e58=''+_0x42cfec[_0x20b399(0x256)]+'\x0a\x0a'+_0x42cfec[_0x20b399(0x22f)];const _0x5c5c27=await sendTelegramMsg(toTelegramMarkdown(_0x578e58),_0x20b399(0x164));_0x295b49=_0x42cfec[_0x20b399(0x1d8)];}}_0x41b2f5=_0x42cfec['number'];}updateAvailable=isNewerVersion(settings[_0x20b399(0x1bb)],serverversion),updateSetting(_0x20b399(0x1a9),_0x41b2f5),emitMessages();}}function emitMessages(){const _0x4572c5=_0x457009,_0x5f1678=settings[_0x4572c5(0x177)];let _0x246423=[];newMessages['forEach'](_0x51a13f=>{const _0x1c0d1=_0x4572c5;_0x51a13f[_0x1c0d1(0x1d8)]>_0x5f1678&&_0x246423[_0x1c0d1(0x1fc)](_0x51a13f);}),_0x246423[_0x4572c5(0xeb)]>0x0&&getAllClients()['forEach'](_0x2ab5a4=>{const _0x5a6318=_0x4572c5;getSocket(_0x2ab5a4['id'])[_0x5a6318(0x23a)](_0x5a6318(0x22f),_0x246423);});}function confirmMessage(_0x23e4cb){const _0x5e9502=_0x457009;updateSetting(_0x5e9502(0x177),Number(_0x23e4cb));}function isNewerVersion(_0x30b4f4,_0x505af2){const _0x43fb67=_0x457009,_0x2bbe61=_0x505af2[_0x43fb67(0x25e)]('.'),_0x3ceaaf=_0x30b4f4[_0x43fb67(0x25e)]('.');for(var _0x500e24=0x0;_0x500e24<_0x3ceaaf[_0x43fb67(0xeb)];_0x500e24++){const _0x58d006=~~_0x3ceaaf[_0x500e24],_0x492f9a=~~_0x2bbe61[_0x500e24];if(_0x58d006>_0x492f9a)return!![];if(_0x58d006<_0x492f9a)return![];}return![];}function toTelegramMarkdown(_0x10b299){const _0x5dfd2e=_0x457009,_0xeed3b2=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x3ecf66=/\*{2}(.+?)\*{2}/gim;return _0x10b299=_0x10b299[_0x5dfd2e(0x20e)](_0xeed3b2,_0x5dfd2e(0x29e))[_0x5dfd2e(0x20e)](_0x3ecf66,_0x5dfd2e(0x241)),_0x10b299;}async function validateConfigFile(){const _0x1ec8cd=_0x457009,_0x4db8f7=dbConfig[_0x1ec8cd(0x2cf)]('bots')['sortBy'](_0x1ec8cd(0x286))[_0x1ec8cd(0x1c8)]()||[];if(_0x4db8f7[_0x1ec8cd(0xeb)]==0x0){let _0x4adbc3=0x0,_0x4417c=[];const _0x517e1d=/^bot-([0-9]{3})-config.json$/,_0x3bb3de=fs['readdirSync'](configpath);_0x3bb3de[_0x1ec8cd(0x115)](_0x14cc04=>{const _0x24babd=_0x517e1d['exec'](_0x14cc04);if(_0x24babd){const _0x2e5245=_0x24babd[0x1];let _0x303e23=getBotAttributes(_0x2e5245);_0x4417c['push']({'botID':_0x2e5245,'botname':_0x303e23['botname'],'status':'disabled','live':'stopped'}),_0x4adbc3++;}}),_0x4adbc3!=0x0&&(dbConfig[_0x1ec8cd(0x2cf)](_0x1ec8cd(0x1db))[_0x1ec8cd(0x1f3)](_0x4417c)[_0x1ec8cd(0x152)](),config=_0x4417c,restoredConfigFile=_0x4adbc3);}}async function restoreConfigNotify(_0x591088){const _0x3231a7=_0x457009;let _0x229ab9;if(restoredConfigFile==0x1)_0x229ab9=_0x3231a7(0xfd);else _0x229ab9='NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run';if(_0x591088)io['to'](_0x3231a7(0x1bc))['emit'](_0x3231a7(0x104),_0x229ab9);else{logger['simple']('-----------------------------------------------------------------------------------'),logger[_0x3231a7(0x155)](_0x229ab9),logger['simple']('-----------------------------------------------------------------------------------'),logger['simple']('');if(tgBot&&settings[_0x3231a7(0x20d)]&&settings[_0x3231a7(0x1fa)]!=_0x3231a7(0x2d1))await sendTelegram(settings['telegramChatId'],'Bot\x20Mgr\x20>\x20'+_0x229ab9);}}function decryptRSA(_0x2c33af,_0x3ccc27){const _0x4873e4=_0x457009,_0x5f0b8d=forge[_0x4873e4(0x208)][_0x4873e4(0x23e)](_0x2c33af),_0xd5c0b=_0x5f0b8d[_0x4873e4(0x277)](forge[_0x4873e4(0x12f)][_0x4873e4(0x22a)](_0x3ccc27),_0x4873e4(0x233),{'md':forge['md'][_0x4873e4(0x224)][_0x4873e4(0x1e8)](),'mgf1':{'md':forge['md'][_0x4873e4(0x224)][_0x4873e4(0x1e8)]()}});return _0xd5c0b;}function validateCredentials(_0x29b94e,_0x12cec2){const _0x497b73=_0x457009;if(_0x29b94e['username']==settings[_0x497b73(0x15b)]&&bcrypt[_0x497b73(0x221)](_0x29b94e[_0x497b73(0x18b)],settings[_0x497b73(0x1e0)])){if(settings[_0x497b73(0x174)])return{'allow':![],'reason':_0x497b73(0x2e1),'token':null};else{const _0x53f0b8=generateLoginToken(_0x12cec2);return{'allow':!![],'reason':'login\x20token\x20generated','token':_0x53f0b8};}}else return{'allow':![],'reason':_0x497b73(0xff),'token':null};}function refreshToken(_0x1f03ab){const _0x1f0448=_0x457009,_0x1131d0=generateLoginToken(_0x1f03ab);return{'allow':!![],'reason':_0x1f0448(0x185),'token':_0x1131d0};}function validateAccess(_0x3721a3,_0x3f63ca,_0x38291c){const _0x120b70=_0x457009,_0xc52896=_0x38291c?_0x38291c:devices[_0x3f63ca]['ip'];let _0x4fd510;const _0x17c54c=_0x508606=>{const _0x29bdd6=_0x35a3;if(settings[_0x29bdd6(0x15a)]){if(settings[_0x29bdd6(0x174)]){if(telegram2FaApproved(_0x3f63ca)){const _0x4b4e39=generateLoginToken(_0x3f63ca);return{'allow':!![],'reason':_0x29bdd6(0x132),'token':_0x4b4e39};}else return{'allow':![],'reason':'login\x20required','token':null};}else return _0x4fd510=validToken(_0x508606,_0x3f63ca),_0x4fd510[_0x29bdd6(0x12a)](_0x29bdd6(0x1b2))?{'allow':!![],'reason':_0x29bdd6(0x190),'token':_0x508606}:{'allow':![],'reason':_0x29bdd6(0x274),'token':null};}else return{'allow':!![],'reason':_0x29bdd6(0x24d),'token':null};};if(settings['whitelistEnabled']){let _0x3d35df=[...settings[_0x120b70(0xe4)],_0x120b70(0x266),_0x120b70(0x21a),'127.0.0.1',_0x120b70(0x2f8)];if(_0x3d35df[_0x120b70(0x108)](_0xc52896))return _0x17c54c(_0x3721a3);else{_0x4fd510=validToken(_0x3721a3,_0x3f63ca);if(_0x4fd510[_0x120b70(0x12a)](_0x120b70(0x1b2)))return _0x17c54c(_0x3721a3);else{if(telegramIpApproved(_0x3f63ca)){const _0xcc72ea=generateToken(_0x3f63ca);return _0x4fd510=_0x17c54c(_0x3721a3),_0x4fd510[_0x120b70(0x282)]?{'allow':!![],'reason':_0x120b70(0x21d),'token':_0xcc72ea}:_0x4fd510;}else return settings[_0x120b70(0x153)]?{'allow':![],'reason':_0x120b70(0x2ff),'token':null}:{'allow':![],'reason':_0x120b70(0x231),'token':null};}}}else return _0x17c54c(_0x3721a3);}function timelyDecrypt(_0x29fbc1,_0x2cdd1e,_0x39028f='@'){const _0x19df55=_0x457009;if(_0x29fbc1)try{const _0x359af5=decryptRSA(secure[_0x19df55(0x254)],_0x29fbc1),_0xb6ac26=_0x359af5[_0x19df55(0x25e)](_0x39028f)[0x0],_0x33c720=_0x359af5['split'](_0x39028f)[0x1],_0x33a030=new Date()[_0x19df55(0x237)]();if(_0x2cdd1e){if(_0x33a030-_0x33c720<maxSecretAge*0x3e8)return _0xb6ac26;else return![];}else return _0xb6ac26;}catch(_0x443e87){return![];}else return![];}const validToken=(_0x1e173d,_0x5f14ac)=>{const _0x2267e5=_0x457009,_0x282207=devices[_0x5f14ac]['ip'];if(!_0x1e173d)return{'error':_0x2267e5(0x2a1)};for(let _0x5f1433 of blacklist){if(_0x5f1433['token']==_0x1e173d)return{'error':_0x2267e5(0x1ed)};}let _0x988e58;try{_0x988e58=jwt['verify'](_0x1e173d,secure[_0x2267e5(0x14f)]+_0x5f14ac);}catch{return{'error':_0x2267e5(0x206)};}if(!_0x988e58[_0x2267e5(0x12a)](_0x2267e5(0x112))&&!_0x988e58[_0x2267e5(0x12a)](_0x2267e5(0x19e))||!_0x988e58[_0x2267e5(0x12a)]('exp'))return{'error':_0x2267e5(0x229)};if(!_0x988e58[_0x2267e5(0x12a)](_0x2267e5(0x19e))&&_0x988e58[_0x2267e5(0x12a)](_0x2267e5(0x112))){const {clientip:_0x4f3ecc}=_0x988e58;return _0x282207==_0x4f3ecc?{'success':_0x2267e5(0x106)}:{'error':_0x2267e5(0x228)};}else{if(_0x988e58[_0x2267e5(0x12a)](_0x2267e5(0x19e))&&_0x988e58[_0x2267e5(0x12a)](_0x2267e5(0x112))){const {username:_0x195d3f,clientip:_0x4a8d96}=_0x988e58;return settings[_0x2267e5(0x15b)]==_0x195d3f&&_0x282207==_0x4a8d96?{'success':'User\x20has\x20been\x20validated'}:{'error':_0x2267e5(0x1b4)};}}},generateLoginToken=_0x97a7c7=>{const _0x23f816=_0x457009;if(_0x97a7c7){const _0x1b66c2=devices[_0x97a7c7]['ip'];return jwt['sign']({'username':settings[_0x23f816(0x15b)],'clientip':_0x1b66c2},secure['secret']+_0x97a7c7,{'expiresIn':tokenRefresh*0x3c,'allowInsecureKeySizes':!![]});}else return![];},generateToken=_0x5b04cb=>{const _0x3fb8df=_0x457009;if(_0x5b04cb){const _0xc9edd3=devices[_0x5b04cb]['ip'];return jwt[_0x3fb8df(0x2bb)]({'clientip':_0xc9edd3},secure[_0x3fb8df(0x14f)]+_0x5b04cb,{'expiresIn':devices[_0x5b04cb][_0x3fb8df(0x23d)][_0x3fb8df(0x197)]*0x3c,'allowInsecureKeySizes':!![]});}else return![];},telegramIpApproved=_0x564dc2=>{const _0xffdc2c=_0x457009;let _0x502b82=![];return devices[_0x564dc2][_0xffdc2c(0x23d)]&&devices[_0x564dc2][_0xffdc2c(0x23d)][_0xffdc2c(0x197)]!='reject'&&(_0x502b82=devices[_0x564dc2]['telegramIpApproval'][_0xffdc2c(0x112)]==devices[_0x564dc2]['ip']&&new Date()[_0xffdc2c(0x237)]()-devices[_0x564dc2][_0xffdc2c(0x23d)][_0xffdc2c(0x293)]<devices[_0x564dc2]['telegramIpApproval'][_0xffdc2c(0x197)]*0x3c*0x3e8),_0x502b82;},telegram2FaApproved=_0x1b8c93=>{const _0x189f42=_0x457009;let _0x309135=![];return devices[_0x1b8c93][_0x189f42(0x1de)]&&devices[_0x1b8c93][_0x189f42(0x1de)][_0x189f42(0x197)]!='reject'&&(_0x309135=devices[_0x1b8c93]['telegram2FaApproval'][_0x189f42(0x112)]==devices[_0x1b8c93]['ip']&&new Date()[_0x189f42(0x237)]()-devices[_0x1b8c93][_0x189f42(0x1de)][_0x189f42(0x293)]<devices[_0x1b8c93][_0x189f42(0x1de)][_0x189f42(0x197)]*0x3c*0x3e8),_0x309135;},normalizeIP=_0x2e9186=>{const _0x3d0b1f=_0x457009;let _0x8620e6=null,_0x5ad39b=null;if(ipaddr[_0x3d0b1f(0x16e)](_0x2e9186)){const _0x5e2ff5=ipaddr[_0x3d0b1f(0x1d0)](_0x2e9186);_0x5e2ff5[_0x3d0b1f(0x109)]()==='ipv6'?(_0x5e2ff5[_0x3d0b1f(0x2af)]()&&(_0x8620e6=_0x5e2ff5[_0x3d0b1f(0x283)]()['toString']()),_0x5ad39b=_0x5e2ff5[_0x3d0b1f(0x18d)]()):(_0x8620e6=_0x5e2ff5[_0x3d0b1f(0x18d)](),_0x5ad39b=_0x5e2ff5[_0x3d0b1f(0x2ed)]()[_0x3d0b1f(0x18d)]());}return{'show':_0x8620e6?_0x8620e6:_0x5ad39b,'store':_0x5ad39b};};function _0x1037(){const _0xc651a=['endsWith','HTML','toggle_','getTime','/:bot/configuration','http://localhost:','emit','on_','argv','telegramIpApproval','privateKeyFromPem','storeConfiguration','Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files','*$1*','node-forge','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','mode','jsonwebtoken','Unauthorized\x20attempt\x20to\x20get\x20portfolio','port','/enable\x20-\x20enable\x20notifications\x0a','bbvReceive','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','tkn','444QELbUe','login\x20not\x20required','production','output-001.log','index.html','inherit','string','store-configuration','privateKey','access\x20timeout','title','backup-full@','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','Disabled\x20','binary','store-settings','Unauthorized\x20attempt\x20to\x20delete\x20bot','update','split','telegrammsg','All\x20bots','(staging)','Unauthorized\x20attempt\x20to\x20show\x20configuration','async','/:bot/portfolio','restore-backup-file','::1','set','auto',',\x20must\x20be\x20a\x204\x20digit\x20number','range','readFileSync','Failed\x20to\x20download\x20','/status\x20-\x20show\x20bot(s)\x20status\x0a','reset-history','ETH','params','build2','search','Telegraf\x20error:','login\x20required','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','pidExpireLogin','decrypt','backup','publicKey','headless','live','stopped','args','Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history',')\x20|\x20Bot\x20','exit','filter','allow','toIPv4Address','<b>Telegram\x20Bot\x20Status:</b>\x0a','uuid-random','botID','Error\x20while\x20deleting\x20config\x20files:\x20','rsa','then','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?','apiSecret','bb-config.json','\x20mode','Ok,\x20will\x20send\x20order\x20notifications\x20only','files','Temporary\x20access\x20rejected','172616bPOumG','Restore\x20process\x20aborted','timestamp','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','5\x20min','Starting\x20(','3369mfTGEv','bot','BCT','remoteAddress','Restore\x20process\x20confirmed','publicKeyToPem','login2fa_','$1_$2_$3','staging','Unauthorized\x20attempt\x20to\x20update\x20bot','No\x20authentication\x20token','startsWith','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','_nsps','Login\x20accepted','defaults','reset-password','track','Bot\x20Mgr\x20>\x20Stopping\x20all\x20bots','server','event','showConfig','uncaughtException','getSeconds','isIPv4MappedAddress','/logs\x20-\x20receive\x20log\x20files\x0a','button','getDate','writeFileSync','telegraf','Logged\x20out\x20user\x20...','bb-secure.json','/:bot/performance','emitHistory','Starting\x20#RED#Balance\x20Bot\x20v','randomBytes','sign','command','portfolio','portfolio_','-results.json','chat','names','Session\x20expired\x20for\x20user\x20...','update-bb','/help\x20-\x20show\x20available\x20commands\x0a','Network\x20Interfaces:','bot-','reload','getUTCHours','config/','config_orders','Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U','SIGINT','callback','-performance.json','get','\x20|\x20','orders','All','Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)','Logged\x20in\x20user\x20...','#RES#','name','bb/','mtime','bbvNew','1119772FjVLMG','Allow\x20login\x20from\x20IP\x20address\x20','test','180vGkgNO','settings.','/on\x20-\x20start\x20bot(s)\x0a','close','2FA\x20login\x20required','build','Starting\x20new\x20bot\x20|\x20Bot\x20','http','version.json','reply','You\x20can\x20use\x20the\x20following\x20commands:\x0a','1096wilgNh','\x20(2)','Error:\x20Invalid\x20argument\x20','Setting\x20access:\x20','secure','toIPv4MappedAddress','Backup\x20file\x20unzipped\x20and\x20stored','storeHeadless','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)','store-headless','Bot\x20Mgr\x20>\x20Stopping\x20','File\x20uploaded','Unauthorized\x20attempt\x20to\x20confirm\x20message','#RED#Balance\x20Bot\x20is\x20already\x20running\x20on\x20port\x20','\x1b[33m','slice','::ffff:7f00:1','metrics_','new','-events.json','telegramEnabled','\x20only\x0a','clients','2FA\x20required','Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled','/output-000.log','kill','environment','whitelist','-config.json','config_alerts','output-000.log','Unauthorized\x20attempt\x20to\x20update\x20settings','socket','createWriteStream','length','logged\x20out','Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?','-----------------------------------------------------------------------------------','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','static','telegramToken','replyWithDocument','Yes','existsSync','\x20|\x20client:\x20...','/metrics\x20-\x20show\x20bot\x20performance\x0a','once','Backup\x20file\x20uploaded','add','reject','Login\x20rejected','--------------------------------------','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run','botname','invalid\x20credentials','off_','***','/upload-backup','#RES#\x20if\x20running\x20on\x20server','notification','editMessageReplyMarkup','User\x20has\x20been\x20validated','disable','includes','kind','remove','cancel-loading','SIGTERM','user','jszip','delete-bot','listen','245817uVfhNh','clientip','env','Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration','forEach','inlineKeyboard','deleteHistoryAlerts','file','Unauthorized\x20attempt\x20to\x20delete\x20alerts','resetHistory','get-backup-files','text','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','placeOrder','290XaXLrm','Unauthorized\x20attempt\x20to\x20get\x20messages','Bot\x20Mgr\x20>\x20Starting\x20','connected','status\x20code\x20401',':\x20Bot\x20Mgr\x20>\x20','getStartingBalances','Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot','function','messages','Access\x20enabled\x20for\x20','hasOwnProperty','createServer','No\x20bots\x20running\x20right\x20now','onepagemode','token','util','randomFillSync','reinstall','2FA\x20login\x20token\x20generated','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','keys','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)','3059710JRMbMF','entries','sendMetricsTelegram','<b>Balance\x20Bot\x20Status:</b>\x0a','running','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','copyFileSync','Idling\x20(','alias','child_process','sendMessage','warning','\x1b[0m','logs','/:bot','error','off','blacklist','getFullYear','|@|','disabled','login2fa_reject_','post','config','find','secret','\x20to\x20','\x1b[34m','write','temporaryAccessAllowed','handshake','simple','order','settings','Notifications\x20disabled','Ok,\x20will\x20send\x20alert\x20notifications\x20only','loginRequired','bbUsername','update-bot','backup-full','sendFile','action','init','code','restart','Restarting\x20','Markdown','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','bb-settings.json','resetpw_no','hashSync','Unauthorized\x20attempt\x20to\x20get\x20events','axios','mixpanel','80706touMyR','************','isValid','Unauthorized\x20login\x20attempt\x20(timeout)','logs/','store-fiat','Server','express','f2aRequired','loadAsync','userid','lastmsgemitted','manual','auth','toggleBotMode','1sIzBYO','/download/:type','download','getPortfolio','metrics','Starting\x20Balance\x20Bot\x20reinstallation','\x20>\x20','showname','stringify','Notifications\x20disabled\x0a','login\x20token\x20generated','getMonth','backupfile','disconnect','readdirSync','\x20files\x20over\x20Telegram:','password','hex','toString','IPv4','Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation','login\x20token\x20valid','reinstall_yes','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','#RES#\x20','started','getHours','expiry','marketcapApi','headers','privateKeyToPem','All\x20bots\x20running\x20right\x20now','place-order','send','username','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','Error\x20removing\x20old\x20backup\x20files:','Bot\x20Mgr\x20>\x20','/start','address\x20already\x20in\x20use','rmSync','sortBy','type','graphql-request','path','lastmsgtelegram','Restoring\x20bot(s)\x20from\x20backup','temporary\x20access\x20timeout','confirm-message','mkdirSync','/restart\x20-\x20restart\x20bot(s)\x0a','tempaccess_30_','NTBA_FIX_319','private','success','generateAsync','Invalid\x20username\x20or\x20IP\x20address','uuid','format','exchange','tempaccess_15_','new-disabled','data','latestversion','botmanager','Bot\x20Mgr\x20>\x20Toggling\x20','.zip',':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20','isDirectory','start','restart_','telegram','Bot\x20','get-messages','address','bot.js','value','(((.+)+)+)+$','get-starting-balances','show-config','debug','access','Notifications\x20enabled','alerts','parse','temporary\x20access\x20rejected','match','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20','2286606KXzswR','timeshift','store','11rYBvQn','number','sort','getMinutes','bots','reason','Node.js\x20v','telegram2FaApproval','accept','bbPassword','delete-alerts','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','\x20(1)','The\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','\x1b[36m','full','referer','create','enable','telegramUsername','internal','Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files','Token\x20blacklisted','connection','apiKey','unlinkSync','request','add-bot','assign','Unauthorized\x20attempt\x20to\x20log\x20out','initclient','temp/','padStart','config_all','status','telegramEvents','logout','push','from','login','node','show','0.0.0','join','constructor','Restore\x20backup\x20file\x20','updatebotmanager','Invalid\x20authentication\x20token\x20(1)','log','pki','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','cloneDeep','pidRefreshToken','yes','telegramChatId','replace','enabled','sockets','sendPortfolioTelegram','ipaddr.js','open','family','Deleted\x20Bot\x20','output-002.log','\x20|\x20user:\x20...',':\x20Bot\x20Mgr\x20>\x20Telegram\x20error\x20occured','\x20-\x20','::ffff:127.0.0.1','zip/','statSync','temporary\x20token\x20generated','get-portfolio','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20see\x20logs\x20for\x20details','Error\x20sending\x20','compareSync','conn','stop','sha256','all','Unauthorized\x20attempt\x20to\x20download\x20','#RES#\x20if\x20running\x20locally\x0a','Invalid\x20IP\x20address','Invalid\x20authentication\x20token\x20(2)','decode64','backup-full.zip','use','apiPassword','catch','message','\x1b[35m','temporary\x20access\x20not\x20allowed','backup/','RSA-OAEP'];_0x1037=function(){return _0xc651a;};return _0x1037();}function formatDate(_0xdb0cdb){const _0x30f6c3=_0x457009;return _0xdb0cdb[_0x30f6c3(0x148)]()+'/'+(_0xdb0cdb[_0x30f6c3(0x186)]()+0x1)[_0x30f6c3(0x18d)]()[_0x30f6c3(0x1f7)](0x2,'0')+'/'+_0xdb0cdb[_0x30f6c3(0x2b2)]()[_0x30f6c3(0x18d)]()[_0x30f6c3(0x1f7)](0x2,'0')+'\x20'+_0xdb0cdb['getHours']()['toString']()[_0x30f6c3(0x1f7)](0x2,'0')+':'+_0xdb0cdb[_0x30f6c3(0x1da)]()[_0x30f6c3(0x18d)]()[_0x30f6c3(0x1f7)](0x2,'0')+':'+_0xdb0cdb[_0x30f6c3(0x2ae)]()[_0x30f6c3(0x18d)]()[_0x30f6c3(0x1f7)](0x2,'0');}function sleep(_0x222ae5){return new Promise(_0x3ca8aa=>setTimeout(_0x3ca8aa,_0x222ae5));}