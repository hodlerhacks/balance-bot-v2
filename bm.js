const _0x1206eb=_0x47a8;function _0x47a8(_0x4daca0,_0x11aab2){const _0x4abb6e=_0x10f7();return _0x47a8=function(_0x12d7cc,_0x37ed3a){_0x12d7cc=_0x12d7cc-0x1ac;let _0x10f78f=_0x4abb6e[_0x12d7cc];return _0x10f78f;},_0x47a8(_0x4daca0,_0x11aab2);}(function(_0x21eb27,_0x1cc597){const _0x224d43=_0x47a8,_0x474cc2=_0x21eb27();while(!![]){try{const _0x112b3e=parseInt(_0x224d43(0x34c))/0x1+-parseInt(_0x224d43(0x374))/0x2*(-parseInt(_0x224d43(0x2fc))/0x3)+-parseInt(_0x224d43(0x218))/0x4+-parseInt(_0x224d43(0x398))/0x5+parseInt(_0x224d43(0x24d))/0x6*(parseInt(_0x224d43(0x366))/0x7)+parseInt(_0x224d43(0x2ef))/0x8+parseInt(_0x224d43(0x342))/0x9;if(_0x112b3e===_0x1cc597)break;else _0x474cc2['push'](_0x474cc2['shift']());}catch(_0x5c3e65){_0x474cc2['push'](_0x474cc2['shift']());}}}(_0x10f7,0x35e86));const _0x37ed3a=function(){let _0x381270=!![];return function(_0x7f4b58,_0x4279fa){const _0x4c5c32=_0x381270?function(){const _0xacba54=_0x47a8;if(_0x4279fa){const _0x5e276a=_0x4279fa[_0xacba54(0x39b)](_0x7f4b58,arguments);return _0x4279fa=null,_0x5e276a;}}:function(){};return _0x381270=![],_0x4c5c32;};}(),_0x12d7cc=_0x37ed3a(this,function(){const _0x140f86=_0x47a8;return _0x12d7cc[_0x140f86(0x252)]()['search'](_0x140f86(0x25a))['toString']()[_0x140f86(0x1ea)](_0x12d7cc)[_0x140f86(0x2e5)](_0x140f86(0x25a));});_0x12d7cc();'use strict';process['env']['NTBA_FIX_319']=0x1;const childProcess=require(_0x1206eb(0x3d0)),fs=require('fs'),fns=require(_0x1206eb(0x3b1)),low=require('lowdb'),FileSync=require(_0x1206eb(0x3a4)),path=require(_0x1206eb(0x1e8)),crypto=require('crypto'),forge=require('node-forge'),bcrypt=require('bcryptjs'),jwt=require('jsonwebtoken'),ipaddr=require(_0x1206eb(0x357)),argv=require(_0x1206eb(0x253))(process['argv'][_0x1206eb(0x1dc)](0x2))[_0x1206eb(0x36f)],uuidRandom=require(_0x1206eb(0x1ee)),{Telegraf,Markup}=require(_0x1206eb(0x36e)),Mixpanel=require(_0x1206eb(0x2a8)),axios=require(_0x1206eb(0x23e)),{GraphQLClient,gql}=require(_0x1206eb(0x26e)),util=require('util'),fileUpload=require('express-fileupload'),{networkInterfaces}=require('os'),JSZip=require(_0x1206eb(0x3bd)),PORT=argv['port']||'3000',pattern=/^[0-9]{2,4}$/;!pattern[_0x1206eb(0x231)](PORT)&&(console[_0x1206eb(0x397)]('Error:\x20Invalid\x20argument\x20'+PORT+_0x1206eb(0x248)),process[_0x1206eb(0x29d)](0x1));const HOST=argv[_0x1206eb(0x2cc)]||null,userID=argv[_0x1206eb(0x227)]||'',debugging=argv['d']||![],recreate=argv['r']||![],nodeversion=process[_0x1206eb(0x306)][_0x1206eb(0x3bb)];let bbpath=_0x1206eb(0x2f4),bbpath2='';const botfile='bot.js',configfile=_0x1206eb(0x255),settingsfile=_0x1206eb(0x315),securefile='bb-secure.json',environment=require('./'+bbpath2+'version.json')['environment']||_0x1206eb(0x2b9),maxBackups=0xa;let validInstallation=!![];const schedulerInterval=0x3c*0x3c*0x3e8;!fs['existsSync'](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x1206eb(0x339)),configpath=userID?bbpath+_0x1206eb(0x2c7)+userID+'/':bbpath+_0x1206eb(0x2c7),configbackuppath=configpath+_0x1206eb(0x32a),logspath=userID?bbpath+_0x1206eb(0x235)+userID+'/':bbpath+_0x1206eb(0x235),zippath=userID?bbpath+'zip/'+userID+'/':bbpath+'zip/',loggerfile=fs[_0x1206eb(0x27e)](logspath+_0x1206eb(0x221),{'flags':'a'}),temppath=userID?bbpath+_0x1206eb(0x1cc)+userID+'/':bbpath+'temp/';!fs[_0x1206eb(0x373)](configpath)&&fs[_0x1206eb(0x285)](configpath);!fs[_0x1206eb(0x373)](configbackuppath)&&fs[_0x1206eb(0x285)](configbackuppath);!fs[_0x1206eb(0x373)](logspath)&&fs[_0x1206eb(0x285)](logspath);!fs[_0x1206eb(0x373)](zippath)&&fs[_0x1206eb(0x285)](zippath);!fs[_0x1206eb(0x373)](temppath)&&fs['mkdirSync'](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x1206eb(0x1de)]({'bots':[]})[_0x1206eb(0x328)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x1206eb(0x1de)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0x1206eb(0x23a),'onepagemode':![],'marketcapApi':''}})[_0x1206eb(0x328)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure['defaults']({'secure':{},'blacklist':[]})[_0x1206eb(0x328)]();const saltRounds=0xa,mixpanel=Mixpanel[_0x1206eb(0x3cc)](_0x1206eb(0x277),{'host':_0x1206eb(0x2e0)});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings[_0x1206eb(0x251)]&&(settings['telegramToken']!=''&&settings['telegramToken']!=_0x1206eb(0x337))&&settings[_0x1206eb(0x29b)]&&settings['telegramUsername']!='')initTelegram();const parseColor=(_0x39195a,_0x460ce5)=>{const _0x5bcdf4=_0x1206eb,_0x3d5bd2=/#[A-Z]{3}#/g;if(typeof _0x39195a==_0x5bcdf4(0x2c6)){!_0x460ce5?_0x39195a=_0x39195a['replace'](_0x3d5bd2,''):(_0x39195a=_0x39195a['replace'](/#BLU#/g,_0x5bcdf4(0x2df)),_0x39195a=_0x39195a[_0x5bcdf4(0x2d4)](/#RED#/g,_0x5bcdf4(0x381)),_0x39195a=_0x39195a[_0x5bcdf4(0x2d4)](/#YEL#/g,_0x5bcdf4(0x347)),_0x39195a=_0x39195a['replace'](/#MAG#/g,'\x1b[35m'),_0x39195a=_0x39195a[_0x5bcdf4(0x2d4)](/#CYA#/g,'\x1b[36m'),_0x39195a=_0x39195a[_0x5bcdf4(0x2d4)](/#RES#/g,'\x1b[0m'));;}return _0x39195a;},logger={'screen':_0x27bd95=>{const _0x5254b1=_0x1206eb;console[_0x5254b1(0x397)](parseColor(_0x27bd95,!![]));},'simple':_0x46a31f=>{const _0x16344d=_0x1206eb;console[_0x16344d(0x397)](parseColor(_0x46a31f,!![])),loggerfile[_0x16344d(0x328)](util[_0x16344d(0x348)](parseColor(_0x46a31f,![]))+'\x0a');},'full':async _0x791f6=>{const _0x573387=_0x1206eb,_0x4efaac=getTimeStamp()+_0x573387(0x264)+_0x791f6;console[_0x573387(0x397)](parseColor(_0x4efaac,!![])),loggerfile[_0x573387(0x328)](util['format'](parseColor(_0x4efaac,![]))+'\x0a');if(tgBot&&settings[_0x573387(0x25b)]&&settings[_0x573387(0x2d1)]!=_0x573387(0x38e))await sendTelegram(settings['telegramChatId'],_0x573387(0x2c2)+parseColor(_0x791f6,![]));},'debug':async(_0x1ea706,_0xdacc35='')=>{const _0x1fa582=_0x1206eb,_0x6c7531=getTimeStamp()+_0x1fa582(0x241)+_0x1ea706;if(debugging)console[_0x1fa582(0x397)](parseColor(_0x6c7531,!![]));loggerfile[_0x1fa582(0x328)](util[_0x1fa582(0x348)](parseColor(_0x6c7531,![]))+'\x0a');if(_0xdacc35){if(debugging)console[_0x1fa582(0x397)](_0xdacc35);loggerfile[_0x1fa582(0x328)](util[_0x1fa582(0x348)](_0xdacc35)+'\x0a');}}};let terminating=![];process['on'](_0x1206eb(0x3c6),function(_0x361242){const _0x5917a0=_0x1206eb;_0x361242[_0x5917a0(0x252)]()[_0x5917a0(0x36a)](_0x5917a0(0x29e))?(logger[_0x5917a0(0x312)](_0x5917a0(0x2b5)+_0x361242[_0x5917a0(0x24b)]+_0x5917a0(0x20d)),process['send']({'terminate':!![]},_0x2f7abd=>{})):logger[_0x5917a0(0x312)](_0x361242);}),process['on'](_0x1206eb(0x29d),()=>{stopAllBots(),process['exit'](0x0);}),process['on'](_0x1206eb(0x28b),()=>{const _0x1ff33a=_0x1206eb;stopAllBots(),process[_0x1ff33a(0x29d)](0x0);}),process['on']('SIGINT',()=>{const _0x5220db=_0x1206eb;stopAllBots(),process[_0x5220db(0x29d)](0x0);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x1206eb(0x396))['version'],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let tmpStorage={},devices=[],lastIpApproval,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0x1206eb(0x378)),app=express(),http=require(_0x1206eb(0x2bd))['createServer'](app);app[_0x1206eb(0x355)](fileUpload({'useTempFiles':!![]})),app[_0x1206eb(0x2d6)](_0x1206eb(0x20b),async(_0x5c44cd,_0x5c036e)=>{const _0x422735=_0x1206eb,_0x2aa593=_0x5c44cd[_0x422735(0x20a)][_0x422735(0x1f1)],_0x4517da=getClientsWithBotID(_0x422735(0x36c)),_0x5071b1=_0x5c44cd['headers'][_0x422735(0x36b)],_0x2d7852=timelyDecrypt(_0x5071b1,![]),_0x4434a9=_0x4517da['find'](_0x176e5a=>_0x176e5a[_0x422735(0x36b)]==_0x2d7852);if(_0x4434a9){const _0x14d45d=normalizeIP(_0x5c44cd[_0x422735(0x2d8)]['remoteAddress'])['store'],_0x5d1256=_0x5c44cd[_0x422735(0x1e7)]['tkn'];if(validateAccess(_0x5d1256,_0x2d7852,_0x14d45d)[_0x422735(0x1c3)])_0x2aa593=='backup'&&await backupConfigFiles(),await zipFiles(_0x2aa593),_0x5c036e[_0x422735(0x29c)](zippath+(_0x2aa593+'.zip'),_0x57e458=>{const _0x510e23=_0x422735;_0x57e458&&(logger['full'](_0x510e23(0x3c8)+_0x2aa593),logger['simple'](_0x57e458));});else logger['full'](_0x422735(0x364)+_0x2aa593+'\x20(1)');}else logger['full'](_0x422735(0x364)+_0x2aa593+_0x422735(0x1da));}),app[_0x1206eb(0x2af)](_0x1206eb(0x1ff),async(_0x1d5c12,_0x28a193)=>{const _0x12f40b=_0x1206eb,_0xc10b0e=getClientsWithBotID(_0x12f40b(0x36c)),_0x1aab6e=_0x1d5c12[_0x12f40b(0x1e7)][_0x12f40b(0x36b)],_0x2ebc29=timelyDecrypt(_0x1aab6e,![]),_0x476ad9=_0xc10b0e[_0x12f40b(0x37f)](_0x5c0eba=>_0x5c0eba[_0x12f40b(0x36b)]==_0x2ebc29);logger[_0x12f40b(0x2ae)](_0x12f40b(0x27d));if(_0x476ad9){const _0x2ac8aa=normalizeIP(_0x1d5c12[_0x12f40b(0x2d8)]['remoteAddress'])[_0x12f40b(0x2d5)],_0x6ed4e9=_0x1d5c12[_0x12f40b(0x1e7)][_0x12f40b(0x39a)];if(validateAccess(_0x6ed4e9,_0x2ebc29,_0x2ac8aa)['allow']){if(_0x1d5c12[_0x12f40b(0x1b3)]){const _0x534149=_0x1d5c12[_0x12f40b(0x1b3)][_0x12f40b(0x257)];await _0x534149['mv'](temppath+_0x534149[_0x12f40b(0x3a0)]),_0x28a193[_0x12f40b(0x229)]({'status':!![],'message':_0x12f40b(0x3c1)});const _0x3b066a=getBotsWithMode();_0x3b066a['length']>0x0?confirmRestore(temppath,_0x534149[_0x12f40b(0x3a0)]):unzipFile(temppath,_0x534149[_0x12f40b(0x3a0)]);}}else logger[_0x12f40b(0x33b)](_0x12f40b(0x1e2));}else logger['full'](_0x12f40b(0x2d7));}),app[_0x1206eb(0x355)](express[_0x1206eb(0x2b4)](path[_0x1206eb(0x33a)](__dirname,bbpath2,_0x1206eb(0x247)))),app[_0x1206eb(0x355)](express[_0x1206eb(0x2b4)](path['join'](__dirname,bbpath2,_0x1206eb(0x1e1)))),app[_0x1206eb(0x2d6)]('/',function(_0x176774,_0x596c11){const _0x35fe64=_0x1206eb;_0x596c11[_0x35fe64(0x327)](path[_0x35fe64(0x33a)](__dirname,bbpath2,_0x35fe64(0x247),'index.html'));}),app[_0x1206eb(0x2d6)]('/:bot',function(_0x293be3,_0x14c2e0){const _0x5b690c=_0x1206eb;_0x14c2e0[_0x5b690c(0x327)](path[_0x5b690c(0x33a)](__dirname,bbpath2,_0x5b690c(0x1e1),_0x5b690c(0x34a)));}),app['get'](_0x1206eb(0x2a7),(_0x4a840b,_0x108402)=>{const _0x21866a=_0x1206eb;_0x108402[_0x21866a(0x327)](path['join'](__dirname,bbpath2,_0x21866a(0x1e1),'index.html'));}),app['get']('/:bot/performance',(_0x2c8e5b,_0x27827f)=>{const _0xde7eb5=_0x1206eb;_0x27827f[_0xde7eb5(0x327)](path['join'](__dirname,bbpath2,_0xde7eb5(0x1e1),_0xde7eb5(0x34a)));}),app[_0x1206eb(0x2d6)](_0x1206eb(0x226),(_0x2f69a8,_0x355390)=>{const _0x4a1ec8=_0x1206eb;_0x355390[_0x4a1ec8(0x327)](path[_0x4a1ec8(0x33a)](__dirname,bbpath2,_0x4a1ec8(0x1e1),'index.html'));}),app[_0x1206eb(0x2d6)](_0x1206eb(0x35b),(_0x2a187e,_0x42e747)=>{const _0x247967=_0x1206eb;_0x42e747[_0x247967(0x327)](path[_0x247967(0x33a)](__dirname,bbpath2,_0x247967(0x1e1),_0x247967(0x34a)));}),app[_0x1206eb(0x2d6)](_0x1206eb(0x24f),(_0x250ac2,_0x873ce2)=>{const _0x575ec2=_0x1206eb;_0x873ce2[_0x575ec2(0x327)](path[_0x575ec2(0x33a)](__dirname,bbpath2,'build',_0x575ec2(0x34a)));}),app[_0x1206eb(0x2d6)](_0x1206eb(0x1ac),(_0x39bdec,_0x3c4e86)=>{const _0x27d391=_0x1206eb;_0x3c4e86[_0x27d391(0x327)](path[_0x27d391(0x33a)](__dirname,bbpath2,_0x27d391(0x1e1),_0x27d391(0x34a)));});if(HOST)http['listen'](PORT,HOST);else http[_0x1206eb(0x2a4)](PORT);const io=require(_0x1206eb(0x286))(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}function getServerIP(){const _0x4edba5=_0x1206eb;let _0x504c52='[ip-address]';const _0x21c7f9=networkInterfaces(),_0x10d526={};for(const _0x1dea8e of Object[_0x4edba5(0x390)](_0x21c7f9)){for(const _0x490458 of _0x21c7f9[_0x1dea8e]){if((_0x490458[_0x4edba5(0x263)]==_0x4edba5(0x21c)||_0x490458['family']==0x4)&&!_0x490458[_0x4edba5(0x2ee)]){const _0xc00245=ipaddr['parse'](_0x490458['address'])[_0x4edba5(0x28c)]();_0xc00245!='private'&&(!_0x10d526[_0x1dea8e]&&(_0x10d526[_0x1dea8e]=[]),_0x10d526[_0x1dea8e]['push'](_0x490458[_0x4edba5(0x31c)]),_0x504c52=_0x490458[_0x4edba5(0x31c)]);}}}return{'serverip':_0x504c52,'netinterfaces':_0x10d526};}async function startServer(){const _0x659792=_0x1206eb,{serverip:_0x143403,netinterfaces:_0x29759e}=getServerIP();logger[_0x659792(0x312)](''),logger[_0x659792(0x312)](_0x659792(0x2e4)),await logger['full'](_0x659792(0x1d5)+serverversion+'#RES#\x20'+(environment==_0x659792(0x214)?_0x659792(0x228):'')+'\x0a'+(_0x659792(0x3b9)+PORT+_0x659792(0x1b9))+(_0x659792(0x368)+_0x143403+':'+PORT+_0x659792(0x2a6))),logger['simple'](_0x659792(0x2e4));if(config['length']!=0x0)for(const _0x2d7f5b of config){const _0x33c09d=_0x2d7f5b[_0x659792(0x206)]==_0x659792(0x28d)?'a':'m';if(_0x2d7f5b['status']=='enabled'||_0x2d7f5b[_0x659792(0x233)]==_0x659792(0x1b1))await logger[_0x659792(0x33b)](_0x659792(0x38c)+_0x33c09d+')\x20|\x20Bot\x20'+_0x2d7f5b[_0x659792(0x1d1)]+'\x20|\x20'+_0x2d7f5b[_0x659792(0x2fd)]),startBot([_0x2d7f5b[_0x659792(0x1d1)],userID],{'cwd':bbpath},function(_0x1922f2){const _0xd38b9b=_0x659792;if(_0x1922f2)logger[_0xd38b9b(0x33b)](_0x1922f2);});else(_0x2d7f5b['status']=='disabled'||_0x2d7f5b[_0x659792(0x233)]==_0x659792(0x389))&&await logger['full']('Idling\x20('+_0x33c09d+_0x659792(0x2f5)+_0x2d7f5b[_0x659792(0x1d1)]+_0x659792(0x2e8)+_0x2d7f5b['botname']);}else!newBot&&logger[_0x659792(0x312)]('>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!');if(newBot)addBot();logger[_0x659792(0x312)](_0x659792(0x2e4)),logger['simple'](''),await logger[_0x659792(0x2ae)](_0x659792(0x256)+nodeversion),await logger['debug'](_0x659792(0x207),_0x29759e);}function startSocket(){io['on']('connection',_0x3737d1=>{const _0x5d37ec=_0x47a8;let _0x487d9f,_0x4e605f,_0x5bbfc1,_0x20c40e,_0xf88840;const _0xea55e4=_0x3737d1[_0x5d37ec(0x29f)][_0x5d37ec(0x1e7)][_0x5d37ec(0x23f)];_0x4e605f=_0xea55e4[_0x5d37ec(0x1d9)](/bot[0-9]{3}/);if(_0x4e605f)_0x5bbfc1=_0x4e605f[0x0][_0x5d37ec(0x1d9)](/[0-9]{3}/);if(_0x5bbfc1)_0x487d9f=_0x5bbfc1[0x0];else _0x487d9f=_0x5d37ec(0x36c);const _0x58a008=_0x3737d1[_0x5d37ec(0x29f)][_0x5d37ec(0x1e5)][_0x5d37ec(0x20e)];if(!_0x58a008)_0x3737d1['emit'](_0x5d37ec(0x233),{'publicKey':secure[_0x5d37ec(0x3be)]});else{_0x20c40e=timelyDecrypt(_0x58a008,![]);if(!_0x20c40e)_0x3737d1[_0x5d37ec(0x3a6)](_0x5d37ec(0x233),{'publicKey':secure[_0x5d37ec(0x3be)]});else{_0xf88840=normalizeIP(_0x3737d1[_0x5d37ec(0x26b)][_0x5d37ec(0x3a8)])['store'];if(!devices[_0x20c40e])devices[_0x20c40e]={'uuid':_0x20c40e,'access':{'token':null}};devices[_0x20c40e]['ip']=_0xf88840;const _0xfbb0f5=addClient(_0x3737d1['id'],_0x20c40e,_0x487d9f);setAccess(_0xfbb0f5),emitMessages(),_0x3737d1['on'](_0x5d37ec(0x1ba),_0x4d10f5=>{const _0x92e63d=_0x5d37ec,_0x27007e=timelyDecrypt(_0x4d10f5[_0x92e63d(0x382)],!![],_0x92e63d(0x3ac));if(_0x27007e){_0x4d10f5={'username':_0x4d10f5[_0x92e63d(0x2dc)],'password':_0x27007e},devices[_0x20c40e][_0x92e63d(0x2a5)]=validateCredentials(_0x4d10f5,_0x20c40e);if(devices[_0x20c40e][_0x92e63d(0x2a5)][_0x92e63d(0x1c3)]==![]&&devices[_0x20c40e][_0x92e63d(0x2a5)][_0x92e63d(0x388)]==_0x92e63d(0x1f5))_0x3737d1[_0x92e63d(0x3a6)](_0x92e63d(0x233),{'access':devices[_0x20c40e]['access']}),loginAccess2FA(_0x20c40e,_0xf88840);else{if(devices[_0x20c40e][_0x92e63d(0x2a5)][_0x92e63d(0x1c3)]==![]&&devices[_0x20c40e][_0x92e63d(0x2a5)][_0x92e63d(0x388)]==_0x92e63d(0x370))_0x3737d1[_0x92e63d(0x3a6)](_0x92e63d(0x233),{'access':devices[_0x20c40e][_0x92e63d(0x2a5)]});else devices[_0x20c40e][_0x92e63d(0x2a5)]['allow']&&devices[_0x20c40e]['access'][_0x92e63d(0x388)]==_0x92e63d(0x375)&&(getClientsWithUuid(_0x20c40e)['forEach'](_0x6f70a0=>{setAccess(_0x6f70a0);}),logger['debug'](_0x92e63d(0x216)+_0x20c40e[_0x92e63d(0x1dc)](-0x8)),setTokenRefresh(_0x20c40e),setSessionTimeout(_0x92e63d(0x1ba),_0x20c40e));}}else logger[_0x92e63d(0x33b)]('Unauthorized\x20login\x20attempt\x20(timeout)');}),_0x3737d1['on'](_0x5d37ec(0x2c5),()=>{resetPassword();}),_0x3737d1['on'](_0x5d37ec(0x3c0),_0x56da05=>{removeClient(_0x3737d1['id']);}),_0x487d9f==_0x5d37ec(0x36c)&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x43d5ae){const _0x492141=_0x1206eb;if(_0x43d5ae!=_0x492141(0x36c)&&config[_0x492141(0x202)]!=''){if(pid[_0x43d5ae])pid[_0x43d5ae][_0x492141(0x229)]({'function':_0x492141(0x313),'args':null});}_0x43d5ae!='botmanager'&&broadcastToBots(_0x492141(0x341),JSON['stringify'](config));}function reloadBotManager(){const _0x4c6581=_0x1206eb;getClientsWithBotID('botmanager')[_0x4c6581(0x1f2)](_0x1801b8=>{const _0x22f5c3=_0x4c6581;getSocket(_0x1801b8['id'])[_0x22f5c3(0x3a6)](_0x22f5c3(0x233),{'access':{'allow':![],'reason':_0x22f5c3(0x371),'token':null}});});}function getSocket(_0x4370ba){const _0x8c3a00=_0x1206eb,_0x29af60=io['_nsps'][_0x8c3a00(0x2d6)]('/');return _0x29af60[_0x8c3a00(0x362)][_0x8c3a00(0x2d6)](_0x4370ba);}function setAccess(_0x238fcc){const _0x1fb57=_0x1206eb,_0x148424=getSocket(_0x238fcc['id']),_0x1eee21=_0x238fcc[_0x1fb57(0x36b)],_0x9f771d=_0x238fcc[_0x1fb57(0x291)];devices[_0x1eee21][_0x1fb57(0x2a5)]=validateAccess(devices[_0x1eee21][_0x1fb57(0x2a5)]['token'],_0x1eee21),logger[_0x1fb57(0x2ae)]('Setting\x20access:\x20'+devices[_0x1eee21][_0x1fb57(0x2a5)][_0x1fb57(0x388)]+_0x1fb57(0x222)+_0x238fcc['id'][_0x1fb57(0x1dc)](-0x8)+_0x1fb57(0x33d)+_0x1eee21[_0x1fb57(0x1dc)](-0x8)),_0x148424[_0x1fb57(0x33a)](_0x1eee21);if(devices[_0x1eee21]['access'][_0x1fb57(0x1c3)]){_0x148424[_0x1fb57(0x33a)](_0x9f771d);if(_0x9f771d==_0x1fb57(0x36c))initializeSocketBotManager(_0x148424);else initializeSocketBot(_0x148424);initClient(_0x9f771d);}devices[_0x1eee21][_0x1fb57(0x2a5)][_0x1fb57(0x293)]&&devices[_0x1eee21]['access'][_0x1fb57(0x388)]==_0x1fb57(0x1c9)&&setSessionTimeout(_0x1fb57(0x201),_0x1eee21),devices[_0x1eee21]['access'][_0x1fb57(0x293)]&&devices[_0x1eee21][_0x1fb57(0x2a5)][_0x1fb57(0x388)]==_0x1fb57(0x1c7)&&setSessionTimeout(_0x1fb57(0x1ba),_0x1eee21),_0x148424[_0x1fb57(0x3a6)]('status',{'status':_0x238fcc['server'],'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x1eee21][_0x1fb57(0x2a5)],'externalip':devices[_0x1eee21]['ip'],'publicKey':secure[_0x1fb57(0x3be)],'userid':settings[_0x1fb57(0x266)],'validInstallation':validInstallation}),devices[_0x1eee21][_0x1fb57(0x2a5)][_0x1fb57(0x1c3)]==![]&&devices[_0x1eee21][_0x1fb57(0x2a5)][_0x1fb57(0x388)]==_0x1fb57(0x272)&&temporaryAccess2FA(_0x1eee21,devices[_0x1eee21]['ip']);}function setSessionTimeout(_0x1a16b2,_0x1d8e69){const _0x337916=_0x1206eb;let _0x26ac3f;if(_0x1a16b2==_0x337916(0x1ba))_0x26ac3f=loginExpiry*0x3c*0x3e8;else _0x26ac3f=devices[_0x1d8e69][_0x337916(0x238)]['expiry']*0x3c*0x3e8-(new Date()[_0x337916(0x274)]()-devices[_0x1d8e69][_0x337916(0x238)][_0x337916(0x1c8)]);if(devices[_0x1d8e69][_0x337916(0x307)])clearTimeout(devices[_0x1d8e69][_0x337916(0x307)]);devices[_0x1d8e69][_0x337916(0x307)]=setTimeout(()=>{const _0x446a1f=_0x337916;if(devices[_0x1d8e69]['pidRefreshToken'])clearTimeout(devices[_0x1d8e69][_0x446a1f(0x3b8)]);removeSocketListeners(_0x1d8e69),addBlacklist(_0x1d8e69),devices[_0x1d8e69][_0x446a1f(0x238)]=null,devices[_0x1d8e69][_0x446a1f(0x32d)]=null,devices[_0x1d8e69]['access'][_0x446a1f(0x293)]=null,logger[_0x446a1f(0x2ae)](_0x446a1f(0x239)+_0x1d8e69['slice'](-0x8)),devices[_0x1d8e69][_0x446a1f(0x2a5)]=validateAccess(devices[_0x1d8e69][_0x446a1f(0x2a5)]['token'],_0x1d8e69),!(devices[_0x1d8e69][_0x446a1f(0x2a5)][_0x446a1f(0x1c3)]&&devices[_0x1d8e69]['access']['reason']==_0x446a1f(0x34d))&&(_0x1a16b2==_0x446a1f(0x1ba)?io['to'](_0x1d8e69)['emit'](_0x446a1f(0x233),{'access':{'allow':![],'reason':_0x446a1f(0x372),'token':null}}):io['to'](_0x1d8e69)[_0x446a1f(0x3a6)]('status',{'access':{'allow':![],'reason':_0x446a1f(0x359),'token':null}})),devices[_0x1d8e69][_0x446a1f(0x2a5)]['token']=null;},_0x26ac3f);}function setTokenRefresh(_0x4a80a5){const _0x56e928=_0x1206eb;if(devices[_0x4a80a5][_0x56e928(0x3b8)])clearTimeout(devices[_0x4a80a5][_0x56e928(0x3b8)]);devices[_0x4a80a5][_0x56e928(0x3b8)]=setTimeout(()=>{const _0x43a4c3=_0x56e928;getClientsWithUuid(_0x4a80a5)[_0x43a4c3(0x380)]!=0x0?(devices[_0x4a80a5][_0x43a4c3(0x2a5)]=refreshToken(_0x4a80a5),io['to'](_0x4a80a5)[_0x43a4c3(0x3a6)](_0x43a4c3(0x233),{'status':'connected','serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x4a80a5][_0x43a4c3(0x2a5)],'externalip':devices[_0x4a80a5]['ip'],'publicKey':secure[_0x43a4c3(0x3be)],'validInstallation':validInstallation}),setTokenRefresh(_0x4a80a5)):clearTimeout(devices[_0x4a80a5][_0x43a4c3(0x3b8)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x34591e){const _0x54a93c=_0x1206eb,_0x273906=getClient(_0x34591e['id'])[_0x54a93c(0x36b)];_0x34591e[_0x54a93c(0x3a6)](_0x54a93c(0x341),config),_0x34591e[_0x54a93c(0x3a6)](_0x54a93c(0x32c),cleanSettings()),_0x34591e['on'](_0x54a93c(0x276),_0x3251a2=>{const _0x51d099=_0x54a93c;if(validateAccess(_0x3251a2,_0x273906)[_0x51d099(0x1c3)])addBot();else logger[_0x51d099(0x33b)](_0x51d099(0x1c5));}),_0x34591e['on'](_0x54a93c(0x3c4),(_0x2d6a67,_0x2fc708)=>{const _0x3e70a1=_0x54a93c;if(validateAccess(_0x2fc708,_0x273906)[_0x3e70a1(0x1c3)])toggleBot(_0x2d6a67['botID'],_0x2d6a67['status'],_0x2d6a67[_0x3e70a1(0x22b)]);else logger[_0x3e70a1(0x33b)](_0x3e70a1(0x2da));}),_0x34591e['on'](_0x54a93c(0x30e),(_0x4f2ae1,_0x371d3b)=>{const _0x310354=_0x54a93c;if(validateAccess(_0x371d3b,_0x273906)[_0x310354(0x1c3)])toggleBotMode(_0x4f2ae1);else logger[_0x310354(0x33b)](_0x310354(0x2da));}),_0x34591e['on'](_0x54a93c(0x22f),(_0x439c62,_0x42e278)=>{const _0x41b7ba=_0x54a93c;if(validateAccess(_0x42e278,_0x273906)[_0x41b7ba(0x1c3)])deleteBot(_0x439c62);else logger[_0x41b7ba(0x33b)]('Unauthorized\x20attempt\x20to\x20delete\x20bot');}),_0x34591e['on'](_0x54a93c(0x1ed),(_0x2b0317,_0x292ed2)=>{const _0x2be499=_0x54a93c;if(validateAccess(_0x292ed2,_0x273906)[_0x2be499(0x1c3)])storeSettings(_0x2b0317,!![]);else logger['full'](_0x2be499(0x1f0));}),_0x34591e['on'](_0x54a93c(0x350),_0x255981=>{const _0x42317a=_0x54a93c;if(validateAccess(_0x255981,_0x273906)['allow'])updateBB(_0x42317a(0x1d3));else logger[_0x42317a(0x33b)]('Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot');}),_0x34591e['on'](_0x54a93c(0x325),_0x1a6a72=>{const _0x54871b=_0x54a93c;if(validateAccess(_0x1a6a72,_0x273906)[_0x54871b(0x1c3)])updateBB('reinstall');else logger['full'](_0x54871b(0x2c1));}),_0x34591e['on']('get-backup-files',_0x13328a=>{const _0x243070=_0x54a93c;if(validateAccess(_0x13328a,_0x273906)['allow']){const _0x3e5050=getClient(_0x34591e['id']);if(_0x3e5050)getBackupFiles(_0x3e5050['uuid']);else logger['full'](_0x243070(0x1b7));}else logger[_0x243070(0x33b)](_0x243070(0x28e));}),_0x34591e['on'](_0x54a93c(0x2ed),(_0x1cd698,_0x5bc1fc)=>{const _0x435f8d=_0x54a93c;if(validateAccess(_0x5bc1fc,_0x273906)[_0x435f8d(0x1c3)])restoreBackupFile(_0x1cd698);else logger[_0x435f8d(0x33b)](_0x435f8d(0x1ad));}),_0x34591e['on'](_0x54a93c(0x2fa),_0x5435b4=>{const _0x446f1f=_0x54a93c;if(validateAccess(_0x5435b4,_0x273906)[_0x446f1f(0x1c3)])getMessages();else logger[_0x446f1f(0x33b)]('Unauthorized\x20attempt\x20to\x20get\x20messages');}),_0x34591e['on'](_0x54a93c(0x294),(_0x17e1ab,_0x4f7c01)=>{const _0x3403db=_0x54a93c;if(validateAccess(_0x4f7c01,_0x273906)['allow'])confirmMessage(_0x17e1ab);else logger[_0x3403db(0x33b)](_0x3403db(0x2a9));}),_0x34591e['on'](_0x54a93c(0x3ae),_0x49bd85=>{const _0xebbde5=_0x54a93c;if(validateAccess(_0x49bd85,_0x273906)[_0xebbde5(0x1c3)]){if(devices[_0x273906][_0xebbde5(0x3b8)])clearTimeout(devices[_0x273906][_0xebbde5(0x3b8)]);if(devices[_0x273906][_0xebbde5(0x307)])clearTimeout(devices[_0x273906][_0xebbde5(0x307)]);removeSocketListeners(getClient(_0x34591e['id'])['uuid']),addBlacklist(_0x273906),devices[_0x273906][_0xebbde5(0x238)]=null,devices[_0x273906][_0xebbde5(0x32d)]=null,devices[_0x273906][_0xebbde5(0x2a5)][_0xebbde5(0x293)]=null,logger[_0xebbde5(0x2ae)](_0xebbde5(0x387)+_0x273906[_0xebbde5(0x1dc)](-0x8)),io['to'](getClient(_0x34591e['id'])[_0xebbde5(0x36b)])['emit']('status',{'access':{'allow':![],'reason':_0xebbde5(0x21e),'token':null}});}else logger['full'](_0xebbde5(0x3c7));});}function initializeSocketBot(_0x2acc3f){const _0x388e23=_0x1206eb,_0x261114=getClient(_0x2acc3f['id'])[_0x388e23(0x291)],_0xe95552=getClient(_0x2acc3f['id'])[_0x388e23(0x36b)];_0x2acc3f['on']('get-logs',(_0x59fd92,_0x3274b1)=>{const _0x27f16f=_0x388e23;if(validateAccess(_0x3274b1,_0xe95552)[_0x27f16f(0x1c3)]){if(pid[_0x261114])pid[_0x261114][_0x27f16f(0x229)]({'function':_0x27f16f(0x399),'args':_0x59fd92});}else logger[_0x27f16f(0x33b)](_0x27f16f(0x2c4));}),_0x2acc3f['on'](_0x388e23(0x31d),(_0x4c4cfc,_0x4b4991)=>{const _0x1dc97c=_0x388e23;if(validateAccess(_0x4b4991,_0xe95552)[_0x1dc97c(0x1c3)]){if(pid[_0x261114])pid[_0x261114][_0x1dc97c(0x229)]({'function':'deleteHistoryAlerts','args':_0x4c4cfc});}else logger['full'](_0x1dc97c(0x246));}),_0x2acc3f['on'](_0x388e23(0x356),(_0x6b1fcb,_0x335dff)=>{const _0x5d9f65=_0x388e23;if(validateAccess(_0x335dff,_0xe95552)['allow']){if(pid[_0x261114])pid[_0x261114]['send']({'function':'getPortfolio','args':_0x6b1fcb});}else logger[_0x5d9f65(0x33b)](_0x5d9f65(0x1be));}),_0x2acc3f['on'](_0x388e23(0x23c),(_0x4b3df0,_0x25212a)=>{const _0x2bd9eb=_0x388e23;if(validateAccess(_0x25212a,_0xe95552)[_0x2bd9eb(0x1c3)]){if(pid[_0x261114])pid[_0x261114]['send']({'function':_0x2bd9eb(0x3a3),'args':_0x4b3df0});}else logger['full'](_0x2bd9eb(0x3b5));}),_0x2acc3f['on'](_0x388e23(0x271),(_0x2dc87c,_0x1f09d4)=>{const _0x515a04=_0x388e23;if(validateAccess(_0x1f09d4,_0xe95552)[_0x515a04(0x1c3)]){if(pid[_0x261114])pid[_0x261114][_0x515a04(0x229)]({'function':'storeHeadless','args':_0x2dc87c});}else logger[_0x515a04(0x33b)](_0x515a04(0x1df));}),_0x2acc3f['on'](_0x388e23(0x29a),(_0xc25651,_0x367bbe)=>{const _0x2cf6b1=_0x388e23;if(validateAccess(_0x367bbe,_0xe95552)[_0x2cf6b1(0x1c3)]){if(pid[_0x261114])pid[_0x261114][_0x2cf6b1(0x229)]({'function':'storeFiat','args':_0xc25651});}else logger[_0x2cf6b1(0x33b)](_0x2cf6b1(0x314));}),_0x2acc3f['on'](_0x388e23(0x39c),_0x4f0109=>{const _0x16ba0d=_0x388e23;if(validateAccess(_0x4f0109,_0xe95552)[_0x16ba0d(0x1c3)]){if(pid[_0x261114])pid[_0x261114][_0x16ba0d(0x229)]({'function':'resetHistory','args':null});}else logger[_0x16ba0d(0x33b)](_0x16ba0d(0x27c));}),_0x2acc3f['on'](_0x388e23(0x2a1),_0x20b571=>{const _0x54571e=_0x388e23;if(validateAccess(_0x20b571,_0xe95552)[_0x54571e(0x1c3)]){if(pid[_0x261114])pid[_0x261114][_0x54571e(0x229)]({'function':'getStartingBalances','args':null});}else logger[_0x54571e(0x33b)]('Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances');}),_0x2acc3f['on'](_0x388e23(0x24e),(_0x434e46,_0x14feb7)=>{const _0x1683e5=_0x388e23;if(validateAccess(_0x14feb7,_0xe95552)['allow']){if(pid[_0x261114])pid[_0x261114][_0x1683e5(0x229)]({'function':_0x1683e5(0x21a),'args':_0x434e46});}else logger['full'](_0x1683e5(0x3c3));}),_0x2acc3f['on']('cancel-loading',_0x463f1a=>{const _0x3efbfc=_0x388e23;if(validateAccess(_0x463f1a,_0xe95552)[_0x3efbfc(0x1c3)]){if(pid[_0x261114])pid[_0x261114][_0x3efbfc(0x229)]({'function':_0x3efbfc(0x1d7),'args':null});}else logger[_0x3efbfc(0x33b)](_0x3efbfc(0x1e9));}),_0x2acc3f['on'](_0x388e23(0x3c5),_0x1e23ce=>{const _0x4ccead=_0x388e23;if(validateAccess(_0x1e23ce,_0xe95552)[_0x4ccead(0x1c3)]){if(pid[_0x261114])pid[_0x261114][_0x4ccead(0x229)]({'function':_0x4ccead(0x384),'args':null});}else logger[_0x4ccead(0x33b)](_0x4ccead(0x2e6));}),_0x2acc3f['on'](_0x388e23(0x350),_0x7c0721=>{const _0x131a0c=_0x388e23;if(validateAccess(_0x7c0721,_0xe95552)[_0x131a0c(0x1c3)])updateBB('update');else logger[_0x131a0c(0x33b)](_0x131a0c(0x289));}),_0x2acc3f['on'](_0x388e23(0x2fa),_0x2ddef5=>{const _0x46a304=_0x388e23;if(validateAccess(_0x2ddef5,_0xe95552)[_0x46a304(0x1c3)])getMessages();else logger[_0x46a304(0x33b)](_0x46a304(0x219));}),_0x2acc3f['on'](_0x388e23(0x294),(_0xaf3db6,_0x2cc457)=>{const _0x19c2c0=_0x388e23;if(validateAccess(_0x2cc457,_0xe95552)['allow'])confirmMessage(_0xaf3db6);else logger[_0x19c2c0(0x33b)]('Unauthorized\x20attempt\x20to\x20confirm\x20message');}),_0x2acc3f['on'](_0x388e23(0x3ae),_0x49a5b7=>{const _0x59ab8c=_0x388e23;if(validateAccess(_0x49a5b7,_0xe95552)[_0x59ab8c(0x1c3)]){if(devices[_0xe95552][_0x59ab8c(0x3b8)])clearTimeout(devices[_0xe95552]['pidRefreshToken']);if(devices[_0xe95552]['pidExpireLogin'])clearTimeout(devices[_0xe95552][_0x59ab8c(0x307)]);removeSocketListeners(getClient(_0x2acc3f['id'])[_0x59ab8c(0x36b)]),addBlacklist(_0xe95552),devices[_0xe95552][_0x59ab8c(0x238)]=null,devices[_0xe95552][_0x59ab8c(0x32d)]=null,devices[_0xe95552][_0x59ab8c(0x2a5)][_0x59ab8c(0x293)]=null,logger[_0x59ab8c(0x2ae)](_0x59ab8c(0x387)+_0xe95552[_0x59ab8c(0x1dc)](-0x8)),io['to'](getClient(_0x2acc3f['id'])[_0x59ab8c(0x36b)])[_0x59ab8c(0x3a6)]('status',{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logger[_0x59ab8c(0x33b)]('Unauthorized\x20attempt\x20to\x20log\x20out');});}function removeSocketListeners(_0x25d15b){getClientsWithUuid(_0x25d15b)['forEach'](_0x181bc9=>{const _0x5bdcea=_0x47a8;getSocket(_0x181bc9['id'])[_0x5bdcea(0x35e)]();});}function cleanSettings(){const _0x32585f=_0x1206eb;let _0x21bba5=settings;return settings[_0x32585f(0x251)]&&settings[_0x32585f(0x251)]!=''&&(_0x21bba5={..._0x21bba5,'telegramToken':_0x32585f(0x3b7)}),settings['bbPassword']&&settings[_0x32585f(0x287)]!=''&&(_0x21bba5={..._0x21bba5,'bbPassword':_0x32585f(0x3b7)}),settings[_0x32585f(0x385)]&&settings[_0x32585f(0x385)]!=''&&(_0x21bba5={..._0x21bba5,'marketcapApi':_0x32585f(0x3b7)}),(settings[_0x32585f(0x287)]&&settings[_0x32585f(0x287)]=='***'||settings[_0x32585f(0x251)]&&settings[_0x32585f(0x251)]==_0x32585f(0x337)||settings[_0x32585f(0x385)]&&settings[_0x32585f(0x385)]=='***')&&(_0x21bba5={..._0x21bba5,'restored':{'password':settings[_0x32585f(0x287)]=='***','telegram':settings[_0x32585f(0x251)]==_0x32585f(0x337),'marketcap':settings['marketcapApi']==_0x32585f(0x337)}}),_0x21bba5;}async function updateBB(_0x198de8){const _0x555336=_0x1206eb;await backupConfigFiles(),installingUpdate=!![],config['forEach'](_0x25f5db=>{const _0xbb0bcd=_0x47a8;restartBot(_0x25f5db[_0xbb0bcd(0x1d1)]);});if(_0x198de8==_0x555336(0x1d3))process[_0x555336(0x229)]({'update':!![],'environment':environment},_0x3d8226=>{});else _0x198de8==_0x555336(0x2db)&&process[_0x555336(0x229)]({'reinstall':!![],'environment':environment},_0x45f75a=>{});}function startBot(_0x506c58,_0x4c185f,_0x2eea80){const _0x142669=_0x1206eb;if(debugging)_0x506c58[_0x142669(0x1cb)]('-d');if(recreate)_0x506c58[_0x142669(0x1cb)]('-r');let _0xeb6033=![];const _0x3991b9=_0x506c58[0x0];_0x4c185f={..._0x4c185f,'stdio':[_0x142669(0x38b),_0x142669(0x38b),_0x142669(0x38b),_0x142669(0x344)]},pid[_0x3991b9]=childProcess[_0x142669(0x205)](botfile,_0x506c58,_0x4c185f),pid[_0x3991b9]['on'](_0x142669(0x1bb),_0x6a2c5d=>{const _0x120a29=_0x142669;switch(Object['keys'](_0x6a2c5d)[0x0]){case _0x120a29(0x2fd):updateBotName(_0x3991b9,_0x6a2c5d[_0x120a29(0x2fd)]);break;case _0x120a29(0x346):updateBotManager();break;case'status':updateStatus(_0x3991b9,_0x6a2c5d[_0x120a29(0x233)]);break;case _0x120a29(0x22b):updateLive(_0x3991b9,_0x6a2c5d['live']);break;case _0x120a29(0x1ae):updateLive(_0x3991b9,_0x6a2c5d[_0x120a29(0x1ae)]),io['to'](_0x3991b9)[_0x120a29(0x3a6)](_0x120a29(0x233),{'access':{'allow':![],'reason':_0x120a29(0x371),'token':null}});break;case'stop':_0x6a2c5d[_0x120a29(0x217)]=='restart'&&restartBot(_0x3991b9);_0x6a2c5d[_0x120a29(0x217)]==_0x120a29(0x2ad)&&toggleBot(_0x3991b9,_0x120a29(0x27b),_0x120a29(0x200));break;case _0x120a29(0x2ca):sendTelegramBot(_0x3991b9,_0x6a2c5d[_0x120a29(0x2ca)]);break;case _0x120a29(0x30d):sendTelegramMsg(_0x6a2c5d[_0x120a29(0x30d)]);break;case _0x120a29(0x3a9):io['to'](_0x3991b9)[_0x120a29(0x3a6)](_0x6a2c5d[_0x120a29(0x3a9)],_0x6a2c5d[_0x120a29(0x296)]);break;}}),pid[_0x3991b9]['on'](_0x142669(0x297),function(_0x84d9e0){if(_0xeb6033)return;_0xeb6033=!![],_0x2eea80(_0x84d9e0);}),pid[_0x3991b9]['on'](_0x142669(0x29d),async function(_0x5a6d33){const _0x4d848e=_0x142669;if(terminating)return;if(installingUpdate){io[_0x4d848e(0x3d1)]();return;}if(_0xeb6033)return;_0xeb6033=!![],_0x2eea80(null);const _0x5a8869=dbConfig['get'](_0x4d848e(0x341))['find']({'botID':_0x3991b9})[_0x4d848e(0x3ba)]();_0x5a8869&&(_0x5a8869['status']==_0x4d848e(0x2a2)||_0x5a8869['status']==_0x4d848e(0x1b1))&&(await sleep(0x3e8),updateLive(_0x3991b9,_0x4d848e(0x200)),logger[_0x4d848e(0x33b)](_0x4d848e(0x2e9)+botRef(_0x3991b9)),startBot([_0x3991b9,userID],{'cwd':bbpath},function(_0x4fcd01){const _0x3b29b3=_0x4d848e;if(_0x4fcd01)logger[_0x3b29b3(0x33b)](_0x4fcd01);}));});}function stopBot(_0xdd6115){const _0x36b094=_0x1206eb;getClientsWithBotID(_0xdd6115)[_0x36b094(0x1f2)](_0x3f304d=>{const _0x4adf9a=_0x36b094;getSocket(_0x3f304d['id'])[_0x4adf9a(0x3c0)](!![]),removeClient(_0x3f304d['id']);}),pid[_0xdd6115]&&(pid[_0xdd6115][_0x36b094(0x2ad)](),pid[_0xdd6115]=null);}function stopAllBots(){terminating=!![];const _0x5ecf44=getEnabledBots();_0x5ecf44['forEach'](_0x4f7f0f=>{const _0x39935a=_0x47a8;stopBot(_0x4f7f0f[_0x39935a(0x1d1)]);});}function restartBot(_0x3939e9){const _0x18786b=_0x1206eb;if(pid[_0x3939e9])pid[_0x3939e9][_0x18786b(0x2ad)]();}function addBot(){const _0x5588e=_0x1206eb;let _0x1297ba;for(let _0x58b743=0x1;_0x58b743<0x3e9;_0x58b743++){_0x1297ba=_0x58b743[_0x5588e(0x252)]()[_0x5588e(0x295)](0x3,'0');let _0x196ea6=config['find'](_0x59cd8a=>_0x59cd8a[_0x5588e(0x1d1)]==_0x1297ba);if(!_0x196ea6)break;}if(_0x1297ba===_0x5588e(0x21d)){logger[_0x5588e(0x33b)]('The\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached');return;}logger[_0x5588e(0x33b)](_0x5588e(0x28f)+_0x1297ba),dbConfig[_0x5588e(0x2d6)](_0x5588e(0x341))[_0x5588e(0x1cb)]({'botID':_0x1297ba,'botname':_0x5588e(0x2f7)+_0x1297ba,'status':'new','live':''})[_0x5588e(0x328)](),startBot([_0x1297ba,userID],{'cwd':bbpath},function(_0x1d7bcd){const _0x37204d=_0x5588e;if(_0x1d7bcd)logger[_0x37204d(0x33b)](_0x1d7bcd);}),config=getConfiguration(),io['to'](_0x5588e(0x36c))[_0x5588e(0x3a6)](_0x5588e(0x341),config),broadcastToBots(_0x5588e(0x341),JSON['stringify'](config));}function deleteBot(_0x445ed8){const _0x14cf0f=_0x1206eb;getClientsWithBotID(_0x445ed8)[_0x14cf0f(0x1f2)](_0x50c6e0=>{const _0x477c88=_0x14cf0f;getSocket(_0x50c6e0['id'])[_0x477c88(0x3c0)](!![]),removeClient(_0x50c6e0['id']);}),dbConfig['get']('bots')[_0x14cf0f(0x1e3)]({'botID':_0x445ed8})[_0x14cf0f(0x328)](),logger[_0x14cf0f(0x33b)](_0x14cf0f(0x20f)+_0x445ed8),stopBot(_0x445ed8);try{if(fs['existsSync'](path[_0x14cf0f(0x33a)](configpath,_0x14cf0f(0x1b6)+_0x445ed8+_0x14cf0f(0x358))))fs[_0x14cf0f(0x376)](path[_0x14cf0f(0x33a)](configpath,_0x14cf0f(0x1b6)+_0x445ed8+_0x14cf0f(0x358)));if(fs[_0x14cf0f(0x373)](path[_0x14cf0f(0x33a)](configpath,_0x14cf0f(0x1b6)+_0x445ed8+_0x14cf0f(0x377))))fs[_0x14cf0f(0x376)](path[_0x14cf0f(0x33a)](configpath,_0x14cf0f(0x1b6)+_0x445ed8+_0x14cf0f(0x377)));if(fs[_0x14cf0f(0x373)](path[_0x14cf0f(0x33a)](configpath,_0x14cf0f(0x1b6)+_0x445ed8+_0x14cf0f(0x3c9))))fs[_0x14cf0f(0x376)](path['join'](configpath,_0x14cf0f(0x1b6)+_0x445ed8+'-performance.json'));if(fs['existsSync'](path['join'](configpath,_0x14cf0f(0x1b6)+_0x445ed8+_0x14cf0f(0x242))))fs[_0x14cf0f(0x376)](path[_0x14cf0f(0x33a)](configpath,'bot-'+_0x445ed8+'-results.json'));}catch(_0x3c4e9a){if(_0x3c4e9a)logger[_0x14cf0f(0x33b)]('Error\x20while\x20deleting\x20config\x20files:\x20',_0x3c4e9a);}config=getConfiguration(),io['to'](_0x14cf0f(0x36c))[_0x14cf0f(0x3a6)]('bots',config),broadcastToBots(_0x14cf0f(0x341),JSON[_0x14cf0f(0x1ce)](config));}function toggleBot(_0x4f98e5,_0x227657,_0x526395){const _0x2690f3=_0x1206eb;dbConfig['get'](_0x2690f3(0x341))[_0x2690f3(0x37f)]({'botID':_0x4f98e5})[_0x2690f3(0x1e4)]({'status':_0x227657})[_0x2690f3(0x1e4)]({'live':_0x526395})[_0x2690f3(0x328)]();const _0x19230d=botRef(_0x4f98e5);if(_0x227657=='enabled'||_0x227657==_0x2690f3(0x1b1))logger[_0x2690f3(0x33b)](_0x2690f3(0x2c9)+_0x19230d),startBot([_0x4f98e5,userID],{'cwd':bbpath},function(_0x38f9a3){if(_0x38f9a3)logger['full'](_0x38f9a3);});else(_0x227657==_0x2690f3(0x27b)||_0x227657==_0x2690f3(0x389))&&(logger['full'](_0x2690f3(0x1f9)+_0x19230d),stopBot(_0x4f98e5));config=getConfiguration(),io['to'](_0x2690f3(0x36c))[_0x2690f3(0x3a6)](_0x2690f3(0x341),config),broadcastToBots(_0x2690f3(0x341),JSON[_0x2690f3(0x1ce)](config));}function toggleStatus(_0x520756){const _0x30ab35=_0x1206eb;let _0x321f23=dbConfig[_0x30ab35(0x2d6)](_0x30ab35(0x341))[_0x30ab35(0x37f)]({'botID':_0x520756})[_0x30ab35(0x3ba)](),_0x3b4b86;if(_0x321f23[_0x30ab35(0x233)]==='enabled')_0x3b4b86='disabled';else{if(_0x321f23[_0x30ab35(0x233)]===_0x30ab35(0x1b1))_0x3b4b86=_0x30ab35(0x389);else{if(_0x321f23['status']===_0x30ab35(0x389))_0x3b4b86='new';else{if(_0x321f23['status']===_0x30ab35(0x27b))_0x3b4b86=_0x30ab35(0x2a2);}}}return _0x3b4b86;}function updateStatus(_0x167264,_0x348df7){const _0x22e37d=_0x1206eb;dbConfig['get']('bots')[_0x22e37d(0x37f)]({'botID':_0x167264})[_0x22e37d(0x1e4)]({'status':_0x348df7})[_0x22e37d(0x328)](),config=getConfiguration(),io['to'](_0x22e37d(0x36c))[_0x22e37d(0x3a6)]('bots',config),broadcastToBots('bots',JSON[_0x22e37d(0x1ce)](config));}function updateLive(_0x3aa19f,_0x2a1f12){const _0x1c3e43=_0x1206eb;dbConfig[_0x1c3e43(0x2d6)](_0x1c3e43(0x341))['find']({'botID':_0x3aa19f})[_0x1c3e43(0x1e4)]({'live':_0x2a1f12})[_0x1c3e43(0x328)](),config=getConfiguration(),io['to'](_0x1c3e43(0x36c))[_0x1c3e43(0x3a6)](_0x1c3e43(0x341),config),broadcastToBots('bots',JSON[_0x1c3e43(0x1ce)](config));}function updateBotName(_0x2eb873,_0x30aa49){const _0x4ec922=_0x1206eb;dbConfig[_0x4ec922(0x2d6)](_0x4ec922(0x341))[_0x4ec922(0x37f)]({'botID':_0x2eb873})['assign']({'botname':_0x30aa49})['write'](),config=getConfiguration(),io['to'](_0x4ec922(0x36c))[_0x4ec922(0x3a6)](_0x4ec922(0x341),config),broadcastToBots('bots',JSON[_0x4ec922(0x1ce)](config));}function updateBotManager(){const _0x16cb15=_0x1206eb;config=getConfiguration(),io['to'](_0x16cb15(0x36c))[_0x16cb15(0x3a6)](_0x16cb15(0x341),config),broadcastToBots(_0x16cb15(0x341),JSON['stringify'](config));}function toggleBotMode(_0x34e283){const _0x141cd4=_0x1206eb;if(pid[_0x34e283])pid[_0x34e283][_0x141cd4(0x229)]({'function':_0x141cd4(0x220),'args':null});else{const _0x2fcbc9=configpath+'bot-'+_0x34e283+'-config.json',_0x132894=fs[_0x141cd4(0x1e6)](_0x2fcbc9),_0x1e9d43=JSON[_0x141cd4(0x383)](_0x132894),_0x2f6fe5=_0x1e9d43['bot'][0x0][_0x141cd4(0x2b8)];_0x1e9d43[_0x141cd4(0x291)][0x0][_0x141cd4(0x2b8)]=!_0x2f6fe5;const _0x2e3e23=JSON['stringify'](_0x1e9d43,null,0x2);fs['writeFileSync'](_0x2fcbc9,_0x2e3e23),config=getConfiguration(),io['to'](_0x141cd4(0x36c))[_0x141cd4(0x3a6)](_0x141cd4(0x341),config),broadcastToBots('bots',JSON[_0x141cd4(0x1ce)](config));}}function validateTelegram(_0x35eae3){const _0x5e3c5a=_0x1206eb;if(_0x35eae3['from'][_0x5e3c5a(0x2dc)]!=settings[_0x5e3c5a(0x29b)]&&'@'+_0x35eae3[_0x5e3c5a(0x2ff)][_0x5e3c5a(0x2dc)]!=settings['telegramUsername']||_0x35eae3[_0x5e3c5a(0x30f)]['id']!=settings[_0x5e3c5a(0x25b)])return sendTelegram(_0x35eae3[_0x5e3c5a(0x30f)]['id'],_0x5e3c5a(0x2ce),{'parse_mode':_0x5e3c5a(0x2d3)}),![];return!![];}function botRef(_0x337ac2){const _0x65c2af=_0x1206eb,_0x1d5cd7=getBotAttributes(_0x337ac2),_0x3a2ddb=_0x1d5cd7[_0x65c2af(0x2fe)]?_0x1d5cd7[_0x65c2af(0x2fd)]:_0x65c2af(0x2f7)+_0x337ac2;return _0x3a2ddb;}async function initTelegram(){const _0x4d863e=_0x1206eb;tgBot&&(await tgBot[_0x4d863e(0x217)](),await sleep(0x7d0));tgBot=new Telegraf(settings['telegramToken']);let _0x3e0f34=_0x4d863e(0x2f1);_0x3e0f34+='\x0a',_0x3e0f34+=_0x4d863e(0x395),_0x3e0f34+=_0x4d863e(0x3ab),_0x3e0f34+=_0x4d863e(0x203),_0x3e0f34+='/restart\x20-\x20restart\x20bot(s)\x0a',_0x3e0f34+=_0x4d863e(0x308),_0x3e0f34+=_0x4d863e(0x39d),_0x3e0f34+=_0x4d863e(0x3b2),_0x3e0f34+=_0x4d863e(0x38a),_0x3e0f34+=_0x4d863e(0x249),_0x3e0f34+=_0x4d863e(0x281),_0x3e0f34+=_0x4d863e(0x393),_0x3e0f34+=_0x4d863e(0x3bc),_0x3e0f34+='/backup\x20-\x20receive\x20backup\x20files\x0a',_0x3e0f34+='/update\x20-\x20update\x20Balance\x20Bot\x0a',_0x3e0f34+=_0x4d863e(0x280),_0x3e0f34+=_0x4d863e(0x3a1);let _0x11f4dd=_0x4d863e(0x2f3);_0x11f4dd+='\x0a',_0x11f4dd+=_0x3e0f34,tgBot[_0x4d863e(0x37e)]((_0x1387f6,_0x17f53c)=>{const _0x381efa=_0x4d863e;logger[_0x381efa(0x312)](getTimeStamp()+_0x381efa(0x320)),logger['debug']('Telegraf\x20error:',_0x1387f6);}),tgBot[_0x4d863e(0x355)](async(_0xaa7d1b,_0x2fef4f)=>{const _0x129d9e=_0x4d863e;if(settings[_0x129d9e(0x25b)]||_0xaa7d1b[_0x129d9e(0x1d3)][_0x129d9e(0x1bb)][_0x129d9e(0x2c0)]!=_0x129d9e(0x33e)){if(!validateTelegram(_0xaa7d1b))return;}_0x2fef4f();}),tgBot['command']('start',async _0x2133b8=>{const _0x14c6c3=_0x4d863e;if(_0x2133b8[_0x14c6c3(0x2ff)][_0x14c6c3(0x2dc)]==settings[_0x14c6c3(0x29b)]||'@'+_0x2133b8['from'][_0x14c6c3(0x2dc)]==settings[_0x14c6c3(0x29b)]){if(!settings['telegramChatId'])updateSetting('telegramChatId',_0x2133b8['chat']['id']);else{if(!validateTelegram(_0x2133b8))return;}}else{if(!validateTelegram(_0x2133b8))return;}updateSetting(_0x14c6c3(0x2ea),!![]),await sendTelegram(_0x2133b8[_0x14c6c3(0x30f)]['id'],_0x11f4dd);}),tgBot[_0x4d863e(0x309)](_0x4d863e(0x1dd),async _0x20451e=>{const _0x4ef2ae=_0x4d863e;updateSetting(_0x4ef2ae(0x2ea),!![]),await sendTelegram(_0x20451e[_0x4ef2ae(0x30f)]['id'],_0x4ef2ae(0x2b2));}),tgBot[_0x4d863e(0x309)](_0x4d863e(0x259),async _0x51715f=>{const _0x292dd8=_0x4d863e;await sendTelegram(_0x51715f['chat']['id'],_0x292dd8(0x353)),updateSetting(_0x292dd8(0x2ea),![]);}),tgBot[_0x4d863e(0x309)](_0x4d863e(0x265),async _0x533bb1=>{const _0x8ac674=_0x4d863e,_0xb43ce2=Markup[_0x8ac674(0x284)]([Markup[_0x8ac674(0x3a2)][_0x8ac674(0x3ce)](_0x8ac674(0x269),_0x8ac674(0x300)),Markup[_0x8ac674(0x3a2)][_0x8ac674(0x3ce)](_0x8ac674(0x24c),'config_alerts'),Markup['button'][_0x8ac674(0x3ce)](_0x8ac674(0x1fe),_0x8ac674(0x32e))]);_0x533bb1[_0x8ac674(0x31a)](_0x8ac674(0x311),_0xb43ce2);}),tgBot[_0x4d863e(0x2f2)](_0x4d863e(0x300),async _0x30abe2=>{const _0x420233=_0x4d863e;_0x30abe2['editMessageReplyMarkup'](),updateSetting(_0x420233(0x2d1),'orders'),updateSetting('telegramEnabled',!![]),await sendTelegram(_0x30abe2['chat']['id'],_0x420233(0x1b2));}),tgBot[_0x4d863e(0x2f2)](_0x4d863e(0x2a3),async _0x3fec4a=>{const _0x26c946=_0x4d863e;_0x3fec4a['editMessageReplyMarkup'](),updateSetting('telegramEvents',_0x26c946(0x279)),updateSetting(_0x26c946(0x2ea),!![]),await sendTelegram(_0x3fec4a[_0x26c946(0x30f)]['id'],_0x26c946(0x2ba));}),tgBot[_0x4d863e(0x2f2)](_0x4d863e(0x32e),async _0x590d3f=>{const _0xda022d=_0x4d863e;_0x590d3f[_0xda022d(0x258)](),updateSetting(_0xda022d(0x2d1),_0xda022d(0x367)),updateSetting(_0xda022d(0x2ea),!![]),await sendTelegram(_0x590d3f['chat']['id'],'Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications');}),tgBot['command'](_0x4d863e(0x233),async _0x12cc68=>{const _0x10c4fc=_0x4d863e,_0x3abf69=getBotsWithMode();let _0xa8e72=_0x10c4fc(0x35c);config[_0x10c4fc(0x1f2)](_0x366381=>{const _0x3d48c3=_0x10c4fc,_0x4792c5=_0x3abf69['find'](_0xa47e0d=>_0xa47e0d['botID']==_0x366381['botID'])[_0x3d48c3(0x206)];_0xa8e72+=_0x3d48c3(0x2f7)+_0x366381[_0x3d48c3(0x1d1)]+':\x20'+_0x366381['status']+_0x3d48c3(0x2e8)+_0x4792c5+_0x3d48c3(0x2e8)+_0x366381[_0x3d48c3(0x22b)]+'\x0a';}),_0xa8e72+='\x0a',_0xa8e72+=_0x10c4fc(0x2f9),_0xa8e72+=!settings[_0x10c4fc(0x2ea)]?_0x10c4fc(0x1c1):_0x10c4fc(0x209),_0xa8e72+=settings[_0x10c4fc(0x2ea)]?settings[_0x10c4fc(0x2d1)]==_0x10c4fc(0x367)?_0x10c4fc(0x2aa):'Notifications\x20types:\x20'+settings['telegramEvents']+_0x10c4fc(0x326):'',await sendTelegram(_0x12cc68[_0x10c4fc(0x30f)]['id'],_0xa8e72,{'parse_mode':_0x10c4fc(0x2d3)});}),tgBot[_0x4d863e(0x309)](_0x4d863e(0x273),async _0xa3d94e=>{const _0x5d1f48=_0x4d863e,_0x31ab07=getEnabledBots();if(_0x31ab07[_0x5d1f48(0x380)]==0x0)await sendTelegram(_0xa3d94e[_0x5d1f48(0x30f)]['id'],'No\x20bots\x20running\x20right\x20now');else{if(_0x31ab07[_0x5d1f48(0x380)]>0x1)_0x31ab07['push']({'botID':_0x5d1f48(0x367)});let _0x3a3cbb=[],_0x58c9bb=[];const _0x568dba=_0x31ab07['length']%0x4==0x0||_0x31ab07['length']%0x4==0x3||_0x31ab07[_0x5d1f48(0x380)]%0x3==0x1?0x4:0x3;let _0xa2a176=0x0;_0x31ab07[_0x5d1f48(0x1f2)]((_0x36c00,_0x1c6093)=>{const _0xecfe2c=_0x5d1f48;if(_0x1c6093%_0x568dba==0x0)_0x58c9bb=[];_0x58c9bb[_0xecfe2c(0x1cb)](Markup[_0xecfe2c(0x3a2)]['callback'](_0x36c00['botID']==_0xecfe2c(0x367)?_0xecfe2c(0x1f3):botRef(_0x36c00[_0xecfe2c(0x1d1)]),_0xecfe2c(0x243)+_0x36c00['botID'])),_0x1c6093%_0x568dba==0x0&&(_0x3a3cbb[_0xa2a176]=_0x58c9bb,_0xa2a176++);});const _0x3cccc2=Markup[_0x5d1f48(0x284)](_0x3a3cbb);_0xa3d94e[_0x5d1f48(0x31a)](_0x5d1f48(0x2f0),_0x3cccc2);}}),tgBot[_0x4d863e(0x2f2)](/restart_(.+)/,async _0x2727d6=>{const _0x259acb=_0x4d863e,_0x261608=_0x2727d6[_0x259acb(0x1d9)][0x1];_0x2727d6['editMessageReplyMarkup'](),_0x261608==_0x259acb(0x367)?config[_0x259acb(0x1f2)](_0x15bed8=>{const _0x3eeced=_0x259acb;restartBot(_0x15bed8[_0x3eeced(0x1d1)]);}):restartBot(_0x261608);}),tgBot[_0x4d863e(0x309)]('on',async _0x48f74e=>{const _0x564c46=_0x4d863e,_0x2f9a79=getDisabledBots();if(_0x2f9a79[_0x564c46(0x380)]==0x0)await sendTelegram(_0x48f74e[_0x564c46(0x30f)]['id'],_0x564c46(0x1fb));else{if(_0x2f9a79['length']>0x1)_0x2f9a79[_0x564c46(0x1cb)]({'botID':_0x564c46(0x367)});let _0xc65087=[],_0x526332=[];const _0x53b67a=_0x2f9a79['length']%0x4==0x0||_0x2f9a79[_0x564c46(0x380)]%0x4==0x3||_0x2f9a79[_0x564c46(0x380)]%0x3==0x1?0x4:0x3;let _0x3e2759=0x0;_0x2f9a79[_0x564c46(0x1f2)]((_0x4f1adc,_0x3f142e)=>{const _0x260b9a=_0x564c46;if(_0x3f142e%_0x53b67a==0x0)_0x526332=[];_0x526332[_0x260b9a(0x1cb)](Markup['button'][_0x260b9a(0x3ce)](_0x4f1adc[_0x260b9a(0x1d1)]==_0x260b9a(0x367)?_0x260b9a(0x1f3):botRef(_0x4f1adc[_0x260b9a(0x1d1)]),_0x260b9a(0x35d)+_0x4f1adc['botID'])),_0x3f142e%_0x53b67a==0x0&&(_0xc65087[_0x3e2759]=_0x526332,_0x3e2759++);});const _0x3415d7=Markup[_0x564c46(0x284)](_0xc65087);_0x48f74e['reply'](_0x564c46(0x354),_0x3415d7);}}),tgBot[_0x4d863e(0x2f2)](/on_(.+)/,async _0x37812a=>{const _0x35341e=_0x4d863e,_0x5b343b=_0x37812a[_0x35341e(0x1d9)][0x1];_0x37812a[_0x35341e(0x258)]();if(_0x5b343b==_0x35341e(0x367)){const _0x1669e8=getDisabledBots();await sendTelegram(_0x37812a[_0x35341e(0x30f)]['id'],'Bot\x20Mgr\x20>\x20Starting\x20all\x20bots'),_0x1669e8[_0x35341e(0x1f2)](_0x4df5ae=>{const _0x5ab995=_0x35341e;if(_0x4df5ae[_0x5ab995(0x1d1)]!='all')toggleBot(_0x4df5ae[_0x5ab995(0x1d1)],toggleStatus(_0x4df5ae[_0x5ab995(0x1d1)]),'stopped');});}else await sendTelegram(_0x37812a[_0x35341e(0x30f)]['id'],_0x35341e(0x31f)+botRef(_0x5b343b)),toggleBot(_0x5b343b,toggleStatus(_0x5b343b),_0x35341e(0x200));}),tgBot[_0x4d863e(0x309)](_0x4d863e(0x3ca),async _0x39b37b=>{const _0x2e2e7b=_0x4d863e,_0x127627=getEnabledBots();if(_0x127627[_0x2e2e7b(0x380)]==0x0)await sendTelegram(_0x39b37b[_0x2e2e7b(0x30f)]['id'],_0x2e2e7b(0x270));else{if(_0x127627[_0x2e2e7b(0x380)]>0x1)_0x127627[_0x2e2e7b(0x1cb)]({'botID':_0x2e2e7b(0x367)});let _0x1f2dfe=[],_0x4d38f0=[];const _0x347a37=_0x127627[_0x2e2e7b(0x380)]%0x4==0x0||_0x127627[_0x2e2e7b(0x380)]%0x4==0x3||_0x127627['length']%0x3==0x1?0x4:0x3;let _0x161ee3=0x0;_0x127627['forEach']((_0x4f072b,_0x50da55)=>{const _0x4b4e69=_0x2e2e7b;if(_0x50da55%_0x347a37==0x0)_0x4d38f0=[];_0x4d38f0[_0x4b4e69(0x1cb)](Markup[_0x4b4e69(0x3a2)][_0x4b4e69(0x3ce)](_0x4f072b[_0x4b4e69(0x1d1)]==_0x4b4e69(0x367)?_0x4b4e69(0x1f3):botRef(_0x4f072b[_0x4b4e69(0x1d1)]),_0x4b4e69(0x2cd)+_0x4f072b[_0x4b4e69(0x1d1)])),_0x50da55%_0x347a37==0x0&&(_0x1f2dfe[_0x161ee3]=_0x4d38f0,_0x161ee3++);});const _0x2ed214=Markup[_0x2e2e7b(0x284)](_0x1f2dfe);_0x39b37b[_0x2e2e7b(0x31a)]('Which\x20bot\x20do\x20you\x20want\x20to\x20stop?',_0x2ed214);}}),tgBot[_0x4d863e(0x2f2)](/off_(.+)/,async _0x2689e7=>{const _0x699f3d=_0x4d863e,_0x1e0b04=_0x2689e7['match'][0x1];_0x2689e7[_0x699f3d(0x258)]();if(_0x1e0b04==_0x699f3d(0x367)){const _0x8893f5=getEnabledBots();await sendTelegram(_0x2689e7['chat']['id'],'Bot\x20Mgr\x20>\x20Stopping\x20all\x20bots'),_0x8893f5[_0x699f3d(0x1f2)](_0xc440aa=>{const _0x189c46=_0x699f3d;if(_0xc440aa[_0x189c46(0x1d1)]!=_0x189c46(0x367))toggleBot(_0xc440aa[_0x189c46(0x1d1)],toggleStatus(_0xc440aa[_0x189c46(0x1d1)]),'stopped');});}else await sendTelegram(_0x2689e7[_0x699f3d(0x30f)]['id'],_0x699f3d(0x2e1)+botRef(_0x1e0b04)),toggleBot(_0x1e0b04,toggleStatus(_0x1e0b04),_0x699f3d(0x200));}),tgBot[_0x4d863e(0x309)](_0x4d863e(0x1fd),async _0x6350b5=>{const _0x325744=_0x4d863e,_0x557fe8=getEnabledBots();if(_0x557fe8[_0x325744(0x380)]==0x0)await sendTelegram(_0x6350b5[_0x325744(0x30f)]['id'],_0x325744(0x270));else{if(_0x557fe8['length']>0x1){let _0x5d5609=[],_0x4d6e06=[];const _0x17e068=_0x557fe8[_0x325744(0x380)]%0x4==0x0||_0x557fe8['length']%0x4==0x3||_0x557fe8['length']%0x3==0x1?0x4:0x3;let _0xadc9=0x0;_0x557fe8[_0x325744(0x1f2)]((_0xe49180,_0x54fe75)=>{const _0x3b1827=_0x325744;if(_0x54fe75%_0x17e068==0x0)_0x4d6e06=[];_0x4d6e06[_0x3b1827(0x1cb)](Markup['button'][_0x3b1827(0x3ce)](botRef(_0xe49180['botID']),_0x3b1827(0x2cf)+_0xe49180[_0x3b1827(0x1d1)])),_0x54fe75%_0x17e068==0x0&&(_0x5d5609[_0xadc9]=_0x4d6e06,_0xadc9++);});const _0x4944e2=Markup[_0x325744(0x284)](_0x5d5609);_0x6350b5['reply'](_0x325744(0x2d2),_0x4944e2);}else{const _0x58f5ee=_0x557fe8[0x0][_0x325744(0x1d1)];if(pid[_0x58f5ee])pid[_0x58f5ee][_0x325744(0x229)]({'function':_0x325744(0x361),'args':null});}}}),tgBot['action'](/metrics_(.+)/,async _0x15ccf5=>{const _0x2f589b=_0x4d863e,_0x293fe3=_0x15ccf5[_0x2f589b(0x1d9)][0x1];_0x15ccf5[_0x2f589b(0x258)]();if(pid[_0x293fe3])pid[_0x293fe3][_0x2f589b(0x229)]({'function':'sendMetricsTelegram','args':null});}),tgBot['command'](_0x4d863e(0x1c4),async _0x468b89=>{const _0x1022cc=_0x4d863e,_0x55cb0d=getEnabledBots();if(_0x55cb0d[_0x1022cc(0x380)]==0x0)await sendTelegram(_0x468b89[_0x1022cc(0x30f)]['id'],_0x1022cc(0x270));else{if(_0x55cb0d['length']>0x1){let _0x401dda=[],_0x3f9b05=[];const _0x4cae38=_0x55cb0d['length']%0x4==0x0||_0x55cb0d[_0x1022cc(0x380)]%0x4==0x3||_0x55cb0d[_0x1022cc(0x380)]%0x3==0x1?0x4:0x3;let _0x39bdee=0x0;_0x55cb0d[_0x1022cc(0x1f2)]((_0x459358,_0x52b659)=>{const _0x22a7f3=_0x1022cc;if(_0x52b659%_0x4cae38==0x0)_0x3f9b05=[];_0x3f9b05[_0x22a7f3(0x1cb)](Markup[_0x22a7f3(0x3a2)][_0x22a7f3(0x3ce)](botRef(_0x459358[_0x22a7f3(0x1d1)]),'portfolio_'+_0x459358[_0x22a7f3(0x1d1)])),_0x52b659%_0x4cae38==0x0&&(_0x401dda[_0x39bdee]=_0x3f9b05,_0x39bdee++);});const _0x17fbb0=Markup['inlineKeyboard'](_0x401dda);_0x468b89['reply'](_0x1022cc(0x37d),_0x17fbb0);}else{const _0x54d422=_0x55cb0d[0x0][_0x1022cc(0x1d1)];if(pid[_0x54d422])pid[_0x54d422]['send']({'function':_0x1022cc(0x223),'args':null});}}}),tgBot[_0x4d863e(0x2f2)](/portfolio_(.+)/,async _0x2fbe9b=>{const _0x4fcfbc=_0x4d863e,_0x94909c=_0x2fbe9b[_0x4fcfbc(0x1d9)][0x1];_0x2fbe9b['editMessageReplyMarkup']();if(pid[_0x94909c])pid[_0x94909c][_0x4fcfbc(0x229)]({'function':_0x4fcfbc(0x223),'args':null});}),tgBot[_0x4d863e(0x309)]('logs',async _0x4ffd8d=>{const _0x4260e8=_0x4d863e,_0x2a12c4=_0x4260e8(0x1e0);await zipFiles(_0x2a12c4);const _0x3ec752=zippath+(_0x2a12c4+_0x4260e8(0x1fc));_0x4ffd8d[_0x4260e8(0x2b7)]({'source':_0x3ec752})[_0x4260e8(0x3d2)](()=>{})['catch'](_0x13dac6=>logger[_0x4260e8(0x2ae)](_0x4260e8(0x1cf)+_0x2a12c4+_0x4260e8(0x345),_0x13dac6));}),tgBot[_0x4d863e(0x309)](_0x4d863e(0x3b4),async _0x23fca3=>{const _0x6ecfc4=_0x4d863e,_0x4f9b31=_0x6ecfc4(0x3b4);await backupConfigFiles(),await zipFiles(_0x4f9b31);const _0x4f3184=zippath+(_0x4f9b31+_0x6ecfc4(0x1fc));_0x23fca3['replyWithDocument']({'source':_0x4f3184})['then'](()=>{})[_0x6ecfc4(0x37e)](_0x1f0114=>logger[_0x6ecfc4(0x2ae)](_0x6ecfc4(0x1cf)+_0x4f9b31+_0x6ecfc4(0x345),_0x1f0114));}),tgBot[_0x4d863e(0x309)](_0x4d863e(0x1d3),async _0x31e12a=>{const _0x104ccd=_0x4d863e;await getMessages();if(!updateAvailable)await sendTelegram(_0x31e12a['chat']['id'],_0x104ccd(0x2b3));else{if(!validInstallation)await sendTelegram(_0x31e12a[_0x104ccd(0x30f)]['id'],_0x104ccd(0x1ec));else{const _0x49c7db=Markup[_0x104ccd(0x284)]([Markup[_0x104ccd(0x3a2)][_0x104ccd(0x3ce)](_0x104ccd(0x379),_0x104ccd(0x332)),Markup[_0x104ccd(0x3a2)][_0x104ccd(0x3ce)]('No',_0x104ccd(0x324))]);_0x31e12a[_0x104ccd(0x31a)](_0x104ccd(0x22d),_0x49c7db);}}}),tgBot[_0x4d863e(0x2f2)](/update_(.+)/,async _0x40abf3=>{const _0x33184c=_0x4d863e,_0x14e3e8=_0x40abf3[_0x33184c(0x1d9)][0x1];_0x40abf3[_0x33184c(0x258)](),_0x14e3e8==_0x33184c(0x1bd)&&(await sendTelegram(_0x40abf3[_0x33184c(0x30f)]['id'],'Starting\x20Balance\x20Bot\x20update'),updateBB(_0x33184c(0x1d3))),_0x14e3e8=='no'&&await sendTelegram(_0x40abf3['chat']['id'],_0x33184c(0x232));}),tgBot['command'](_0x4d863e(0x2db),async _0x4ce436=>{const _0xcef08a=_0x4d863e;if(!validInstallation)await sendTelegram(_0x4ce436[_0xcef08a(0x30f)]['id'],_0xcef08a(0x34f));else{const _0x527f63=Markup['inlineKeyboard']([Markup[_0xcef08a(0x3a2)][_0xcef08a(0x3ce)](_0xcef08a(0x379),_0xcef08a(0x3b6)),Markup[_0xcef08a(0x3a2)][_0xcef08a(0x3ce)]('No','reinstall_no')]);_0x4ce436['reply'](_0xcef08a(0x22c),_0x527f63);}}),tgBot[_0x4d863e(0x2f2)](/reinstall_(.+)/,async _0x533f1d=>{const _0x45a2c5=_0x4d863e,_0x11738c=_0x533f1d[_0x45a2c5(0x1d9)][0x1];_0x533f1d[_0x45a2c5(0x258)](),_0x11738c=='yes'&&(await sendTelegram(_0x533f1d['chat']['id'],_0x45a2c5(0x298)),updateBB(_0x45a2c5(0x2db))),_0x11738c=='no'&&await sendTelegram(_0x533f1d['chat']['id'],_0x45a2c5(0x3ad));}),tgBot[_0x4d863e(0x309)](_0x4d863e(0x21b),async _0x4961ab=>{const _0x32ae5d=_0x4d863e,_0x336979=getBotsWithMode();if(_0x336979[_0x32ae5d(0x380)]==0x0)await sendTelegram(_0x4961ab[_0x32ae5d(0x30f)]['id'],'No\x20bots\x20running\x20right\x20now');else{let _0x3f1c8b=[],_0x39c593=[];const _0x378fd4=0x2;let _0x207b36=0x0;_0x336979['forEach']((_0x4cef82,_0x1739ee)=>{const _0x51e228=_0x32ae5d;if(_0x1739ee%_0x378fd4==0x0)_0x39c593=[];_0x39c593[_0x51e228(0x1cb)](Markup[_0x51e228(0x3a2)][_0x51e228(0x3ce)](botRef(_0x4cef82[_0x51e228(0x1d1)])+'\x20('+_0x4cef82[_0x51e228(0x206)]+')',_0x51e228(0x386)+_0x4cef82[_0x51e228(0x1d1)])),_0x1739ee%_0x378fd4==0x0&&(_0x3f1c8b[_0x207b36]=_0x39c593,_0x207b36++);});const _0x50a62f=Markup['inlineKeyboard'](_0x3f1c8b);_0x4961ab[_0x32ae5d(0x31a)](_0x32ae5d(0x2bf),_0x50a62f);}}),tgBot[_0x4d863e(0x2f2)](/toggle_(.+)/,async _0x253619=>{const _0x40296c=_0x4d863e,_0x1ea9c7=_0x253619[_0x40296c(0x1d9)][0x1];_0x253619[_0x40296c(0x258)]();const _0x5f2e96=getBotsWithMode(),_0xbc04ad=_0x5f2e96['find'](_0x457ccf=>_0x457ccf[_0x40296c(0x1d1)]==_0x1ea9c7),_0x52824f=_0xbc04ad[_0x40296c(0x206)]=='auto'?'manual':_0x40296c(0x28d);await sendTelegram(_0x253619['chat']['id'],_0x40296c(0x32b)+botRef(_0xbc04ad[_0x40296c(0x1d1)])+_0x40296c(0x1bf)+_0x52824f+_0x40296c(0x25d)),toggleBotMode(_0x1ea9c7);}),tgBot[_0x4d863e(0x309)](_0x4d863e(0x323),async _0x2890e1=>{const _0x5cb26f=_0x4d863e;let _0x3be90a='';config['forEach'](_0x12bc5c=>{const _0x36a0eb=_0x47a8;_0x3be90a+=_0x36a0eb(0x2f7)+_0x12bc5c[_0x36a0eb(0x1d1)]+':\x20'+_0x12bc5c[_0x36a0eb(0x2fd)]+'\x0a';}),await sendTelegram(_0x2890e1[_0x5cb26f(0x30f)]['id'],_0x3be90a,{'parse_mode':_0x5cb26f(0x2d3)});}),tgBot[_0x4d863e(0x309)]('help',async _0x58f9b5=>{const _0x2032a9=_0x4d863e;await sendTelegram(_0x58f9b5[_0x2032a9(0x30f)]['id'],_0x3e0f34);}),process[_0x4d863e(0x2be)](_0x4d863e(0x3b3),()=>tgBot[_0x4d863e(0x217)](_0x4d863e(0x3b3))),process[_0x4d863e(0x2be)](_0x4d863e(0x28b),()=>tgBot[_0x4d863e(0x217)](_0x4d863e(0x28b))),tgBot[_0x4d863e(0x3cf)]();}function disableTelegram(){tgBot&&tgBot['stop']();}async function sendTelegram(_0x474c71,_0x5e738e,_0x2e4bc2){const _0x492d7c=_0x1206eb;_0x2e4bc2={..._0x2e4bc2,'disable_web_page_preview':!![]};try{await tgBot['telegram']['sendMessage'](_0x474c71,_0x5e738e,_0x2e4bc2);}catch(_0x27044d){logger[_0x492d7c(0x2ae)](_0x492d7c(0x2ac),_0x27044d);}}async function sendTelegramBot(_0x2843bd,_0x121e44){const _0x456409=_0x1206eb;if(settings['telegramEnabled']){if(settings[_0x456409(0x2d1)]=='all'||(_0x121e44[_0x456409(0x1f1)]==_0x456409(0x297)||_0x121e44[_0x456409(0x1f1)]=='warning'||_0x121e44[_0x456409(0x1f1)]==_0x456409(0x254))&&settings[_0x456409(0x2d1)]==_0x456409(0x279)||_0x121e44[_0x456409(0x1f1)]==_0x456409(0x2f6)&&settings[_0x456409(0x2d1)]==_0x456409(0x38e)){if(tgBot&&settings[_0x456409(0x25b)]){if(_0x121e44[_0x456409(0x2fe)])await sendTelegram(settings[_0x456409(0x25b)],_0x121e44[_0x456409(0x2fd)]+_0x456409(0x299)+_0x121e44[_0x456409(0x2b6)]);else await sendTelegram(settings[_0x456409(0x25b)],_0x456409(0x2f7)+_0x2843bd+_0x456409(0x299)+_0x121e44['event']);}}}}async function sendTelegramMsg(_0x35d353,_0x3ab832=_0x1206eb(0x2d3)){const _0x1a8543=_0x1206eb;return tgBot&&settings[_0x1a8543(0x25b)]?(await sendTelegram(settings[_0x1a8543(0x25b)],_0x35d353,{'parse_mode':_0x3ab832}),!![]):![];}function getDeviceWithIp(_0x4b66d7){const _0x535918=_0x1206eb;return devices[_0x535918(0x37f)](_0x3b1ab5=>_0x3b1ab5['ip']===_0x4b66d7);}async function temporaryAccess2FA(_0x3aef27,_0x4a8ee7){const _0xf9a73=_0x1206eb;let _0x13f4d4=new Date(),_0x9b2d7b=![];if(lastIpApproval){if(_0x13f4d4-lastIpApproval<0x1388)_0x9b2d7b=!![];}lastIpApproval=new Date();if(_0x9b2d7b)return;if(tgBot&&settings[_0xf9a73(0x25b)]){const _0x2c1adf=uuidRandom();tmpStorage[_0x2c1adf]={'uuid':_0x3aef27,'externalip':_0x4a8ee7};const _0x2f7a12=Markup[_0xf9a73(0x284)]([Markup[_0xf9a73(0x3a2)]['callback'](_0xf9a73(0x1c6),_0xf9a73(0x3aa)+_0x2c1adf),Markup[_0xf9a73(0x3a2)][_0xf9a73(0x3ce)](_0xf9a73(0x360),_0xf9a73(0x1bc)+_0x2c1adf),Markup['button'][_0xf9a73(0x3ce)]('30\x20min','tempaccess_30_'+_0x2c1adf),Markup['button'][_0xf9a73(0x3ce)](_0xf9a73(0x340),_0xf9a73(0x3a5)+_0x2c1adf)]);await sendTelegram(settings[_0xf9a73(0x25b)],_0xf9a73(0x1af)+normalizeIP(_0x4a8ee7)[_0xf9a73(0x392)]+'\x20?',_0x2f7a12),tgBot['action'](/tempaccess_(.+)_(.+)/,async _0x22b85f=>{const _0x263e72=_0xf9a73,_0xe2df71=_0x22b85f[_0x263e72(0x1d9)][0x1],_0x18049e=_0x22b85f[_0x263e72(0x1d9)][0x2],{uuid:_0x6af0aa,externalip:_0x4404b7}=tmpStorage[_0x18049e];delete tmpStorage[_0x18049e],_0x22b85f[_0x263e72(0x258)](),devices[_0x6af0aa][_0x263e72(0x238)]={'clientip':_0x4404b7,'timestamp':new Date()['getTime'](),'expiry':_0xe2df71},_0xe2df71!=_0x263e72(0x340)?(await sendTelegram(_0x22b85f[_0x263e72(0x30f)]['id'],_0x263e72(0x2a0)+_0xe2df71+_0x263e72(0x30a),{'parse_mode':_0x263e72(0x2d3)}),io['to'](_0x6af0aa)[_0x263e72(0x3a6)](_0x263e72(0x233),{'access':{'allow':![],'reason':_0x263e72(0x371),'token':null}})):(await sendTelegram(_0x22b85f[_0x263e72(0x30f)]['id'],_0x263e72(0x3af)),io['to'](_0x6af0aa)['emit']('status',{'access':{'allow':![],'reason':_0x263e72(0x23b),'token':null}}));});}}async function loginAccess2FA(_0x3629be,_0x33238a){const _0x25e0aa=_0x1206eb;if(tgBot&&settings['telegramChatId']){const _0x360311=uuidRandom();tmpStorage[_0x360311]={'uuid':_0x3629be,'externalip':_0x33238a};const _0x157358=Markup[_0x25e0aa(0x284)]([Markup[_0x25e0aa(0x3a2)][_0x25e0aa(0x3ce)](_0x25e0aa(0x2e3),_0x25e0aa(0x212)+loginExpiry+'_'+_0x360311),Markup['button'][_0x25e0aa(0x3ce)](_0x25e0aa(0x340),_0x25e0aa(0x363)+_0x360311)]);await sendTelegram(settings[_0x25e0aa(0x25b)],'Allow\x20login\x20from\x20IP\x20address\x20'+normalizeIP(_0x33238a)['show']+'\x20?',_0x157358),tgBot[_0x25e0aa(0x2f2)](/login2fa_(.+)_(.+)/,async _0x480950=>{const _0xbfcc4=_0x25e0aa,_0x2c3491=_0x480950['match'][0x1],_0x341f3a=_0x480950[_0xbfcc4(0x1d9)][0x2],{uuid:_0xdeac8c,externalip:_0x411146}=tmpStorage[_0x341f3a];delete tmpStorage[_0x341f3a],_0x480950[_0xbfcc4(0x258)](),devices[_0xdeac8c][_0xbfcc4(0x32d)]={'clientip':_0x411146,'timestamp':new Date()[_0xbfcc4(0x274)](),'expiry':_0x2c3491},_0x2c3491!=_0xbfcc4(0x340)?(await sendTelegram(_0x480950[_0xbfcc4(0x30f)]['id'],_0xbfcc4(0x338),{'parse_mode':_0xbfcc4(0x2d3)}),io['to'](_0xdeac8c)[_0xbfcc4(0x3a6)](_0xbfcc4(0x233),{'access':{'allow':![],'reason':'reload','token':null}})):(await sendTelegram(_0x480950['chat']['id'],_0xbfcc4(0x210)),io['to'](_0xdeac8c)[_0xbfcc4(0x3a6)](_0xbfcc4(0x233),{'access':{'allow':![],'reason':_0xbfcc4(0x23d),'token':null}}));});}}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x27fa77=_0x1206eb;return dbConfig['get'](_0x27fa77(0x341))[_0x27fa77(0x3b0)](_0x27fa77(0x1d1))[_0x27fa77(0x1c2)]({'status':_0x27fa77(0x2a2)})[_0x27fa77(0x3ba)]()||[];}function getDisabledBots(){const _0x47b9ca=_0x1206eb;return dbConfig['get'](_0x47b9ca(0x341))[_0x47b9ca(0x3b0)](_0x47b9ca(0x1d1))[_0x47b9ca(0x1c2)]({'status':_0x47b9ca(0x27b)})['value']()||[];}function getBotAttributes(_0x301b99){const _0x5e11e9=_0x1206eb;let _0x17b01a={};const _0x3dbc54=configpath+'bot-'+_0x301b99+'-config.json',_0x299d1d=fs[_0x5e11e9(0x373)](_0x3dbc54);if(_0x299d1d){const _0x51c41b=fs[_0x5e11e9(0x1e6)](_0x3dbc54);try{const _0x20d8cd=JSON[_0x5e11e9(0x383)](_0x51c41b),_0x3e2630=_0x20d8cd?_0x20d8cd['bot'][0x0][_0x5e11e9(0x2b8)]:![];_0x17b01a[_0x5e11e9(0x206)]=_0x3e2630?'auto':_0x5e11e9(0x292),_0x17b01a[_0x5e11e9(0x2fd)]=_0x20d8cd?_0x20d8cd[_0x5e11e9(0x291)][0x0][_0x5e11e9(0x2fd)]:_0x5e11e9(0x2f7)+_0x301b99,_0x17b01a[_0x5e11e9(0x2fe)]=_0x20d8cd?_0x20d8cd[_0x5e11e9(0x291)][0x0]['showname']:![];}catch(_0x15f11c){_0x17b01a[_0x5e11e9(0x206)]='manual',_0x17b01a[_0x5e11e9(0x2fd)]=_0x5e11e9(0x2f7)+_0x301b99,_0x17b01a['showname']=![];}}else _0x17b01a[_0x5e11e9(0x206)]=_0x5e11e9(0x292),_0x17b01a[_0x5e11e9(0x2fd)]=_0x5e11e9(0x2f7)+_0x301b99,_0x17b01a[_0x5e11e9(0x2fe)]=![];return _0x17b01a;}function getBotsWithMode(){const _0xddcdf2=_0x1206eb,_0x4000e0=dbConfig['get'](_0xddcdf2(0x341))['sortBy']('botID')[_0xddcdf2(0x3ba)]()||[];return _0x4000e0['forEach'](_0x20dfc0=>{const _0x495958=_0xddcdf2;let _0x518b22=getBotAttributes(_0x20dfc0[_0x495958(0x1d1)]);_0x20dfc0[_0x495958(0x206)]=_0x518b22[_0x495958(0x206)];}),_0x4000e0;}function getBotExchanges(){const _0x2da0ad=_0x1206eb;let _0x5df9a8=[];const _0x24f3e3=dbConfig[_0x2da0ad(0x2d6)]('bots')[_0x2da0ad(0x3b0)](_0x2da0ad(0x1d1))[_0x2da0ad(0x3ba)]()||[];_0x24f3e3[_0x2da0ad(0x1f2)](_0x63c661=>{const _0x4be8f1=_0x2da0ad;if(_0x63c661[_0x4be8f1(0x233)]==_0x4be8f1(0x2a2)){const _0x163f5c=configpath+_0x4be8f1(0x1b6)+_0x63c661[_0x4be8f1(0x1d1)]+_0x4be8f1(0x358),_0x1b234b=fs[_0x4be8f1(0x373)](_0x163f5c);let _0x380c7b;if(_0x1b234b){const _0x3edfc4=fs['readFileSync'](_0x163f5c);try{const _0x398e7b=JSON['parse'](_0x3edfc4);_0x380c7b=_0x398e7b?_0x398e7b[_0x4be8f1(0x291)][0x0][_0x4be8f1(0x240)]:null;}catch(_0x26071b){}}if(_0x380c7b)_0x5df9a8[_0x4be8f1(0x1cb)](_0x380c7b);}});const _0x5d97d6=[...new Set(_0x5df9a8)]['sort']();return _0x5d97d6;}async function initUser(){const _0x14e9fc=_0x1206eb;if(!settings[_0x14e9fc(0x266)]){const _0x2795bf=uuidRandom();mixpanel[_0x14e9fc(0x31b)](_0x2795bf),updateSetting(_0x14e9fc(0x266),_0x2795bf);}}async function initSecure(){const _0x75af42=_0x1206eb;let _0x293378=getSecure();if(!_0x293378['hasOwnProperty'](_0x75af42(0x349))){let _0x4d967e=await generateKeys();_0x293378[_0x75af42(0x3be)]=_0x4d967e[_0x75af42(0x3be)],_0x293378[_0x75af42(0x283)]=_0x4d967e[_0x75af42(0x283)],_0x293378['secret']=crypto[_0x75af42(0x2ab)](0x20)[_0x75af42(0x252)](_0x75af42(0x2b1));;storeSecure(_0x293378);}}function getSettings(){const _0x29b8a7=_0x1206eb;return dbSettings[_0x29b8a7(0x2d6)](_0x29b8a7(0x32c))[_0x29b8a7(0x3ba)]()||{};}function getSecure(){const _0x512f57=_0x1206eb;return dbSecure['get'](_0x512f57(0x208))[_0x512f57(0x3ba)]()||{};}function getBlacklist(){const _0x360e57=_0x1206eb;return dbSecure[_0x360e57(0x2d6)](_0x360e57(0x27a))[_0x360e57(0x3ba)]()||[];}function broadcastToBots(_0x636092,_0x1daec3){const _0x4b1ff0=_0x1206eb;config[_0x4b1ff0(0x1f2)](_0x237b2b=>{const _0x1823cf=_0x4b1ff0;if(_0x237b2b[_0x1823cf(0x233)]==_0x1823cf(0x2a2)&&_0x237b2b[_0x1823cf(0x22b)]==_0x1823cf(0x30b)||_0x237b2b[_0x1823cf(0x233)]==_0x1823cf(0x1b1)&&_0x237b2b[_0x1823cf(0x22b)]==_0x1823cf(0x30b)){if(pid[_0x237b2b[_0x1823cf(0x1d1)]])pid[_0x237b2b[_0x1823cf(0x1d1)]][_0x1823cf(0x229)]({[_0x636092]:_0x1daec3});}});}async function storeSettings(_0x46a5ec,_0x290533=![]){const _0x2aa7ab=_0x1206eb;_0x46a5ec={...settings,..._0x46a5ec};if(_0x290533&&_0x46a5ec[_0x2aa7ab(0x287)]!=_0x2aa7ab(0x3b7)&&_0x46a5ec[_0x2aa7ab(0x287)]!=_0x2aa7ab(0x337)&&_0x46a5ec[_0x2aa7ab(0x287)]!=''){const _0x4d6cdc=decryptRSA(secure[_0x2aa7ab(0x283)],_0x46a5ec[_0x2aa7ab(0x287)])['split'](_0x2aa7ab(0x3ac))[0x0],_0x2f67e4=bcrypt[_0x2aa7ab(0x237)](_0x4d6cdc,saltRounds);_0x46a5ec={..._0x46a5ec,'bbPassword':_0x2f67e4};}if(_0x290533&&_0x46a5ec[_0x2aa7ab(0x251)]!=_0x2aa7ab(0x3b7)&&_0x46a5ec[_0x2aa7ab(0x251)]!=_0x2aa7ab(0x337)&&_0x46a5ec[_0x2aa7ab(0x251)]!=''){const _0x4194ba=decryptRSA(secure['privateKey'],_0x46a5ec[_0x2aa7ab(0x251)])[_0x2aa7ab(0x261)](_0x2aa7ab(0x3ac))[0x0];_0x46a5ec={..._0x46a5ec,'telegramToken':_0x4194ba};}if(_0x290533&&_0x46a5ec['marketcapApi']!='************'&&_0x46a5ec['marketcapApi']!=_0x2aa7ab(0x337)&&_0x46a5ec[_0x2aa7ab(0x385)]!=''){const _0x27ebaf=decryptRSA(secure[_0x2aa7ab(0x283)],_0x46a5ec[_0x2aa7ab(0x385)])[_0x2aa7ab(0x261)](_0x2aa7ab(0x3ac))[0x0];_0x46a5ec={..._0x46a5ec,'marketcapApi':_0x27ebaf};}const _0x168e92=_0x46a5ec[_0x2aa7ab(0x251)]!='************'&&_0x46a5ec[_0x2aa7ab(0x251)]!=settings['telegramToken']||_0x46a5ec['telegramUsername']!=settings['telegramUsername'],_0x1b17c2=_0x46a5ec[_0x2aa7ab(0x251)]==''||_0x46a5ec[_0x2aa7ab(0x29b)]=='',_0x190a17=_0x46a5ec[_0x2aa7ab(0x385)]&&_0x46a5ec[_0x2aa7ab(0x385)]!=_0x2aa7ab(0x3b7)&&_0x46a5ec[_0x2aa7ab(0x385)]!=settings[_0x2aa7ab(0x385)];_0x168e92&&(_0x46a5ec[_0x2aa7ab(0x25b)]=null,_0x46a5ec[_0x2aa7ab(0x2d1)]=_0x2aa7ab(0x367));for(const [_0x338a7e,_0x27110b]of Object[_0x2aa7ab(0x2d9)](_0x46a5ec)){if(_0x338a7e=='telegramToken'&&_0x27110b=='************'){_0x46a5ec[_0x2aa7ab(0x251)]=settings[_0x2aa7ab(0x251)];continue;};if(_0x338a7e==_0x2aa7ab(0x287)&&_0x27110b==_0x2aa7ab(0x3b7)){_0x46a5ec[_0x2aa7ab(0x287)]=settings[_0x2aa7ab(0x287)];continue;};if(_0x338a7e==_0x2aa7ab(0x385)&&_0x27110b==_0x2aa7ab(0x3b7)){_0x46a5ec[_0x2aa7ab(0x385)]=settings[_0x2aa7ab(0x385)];continue;};dbSettings[_0x2aa7ab(0x2d0)](_0x2aa7ab(0x2c8)+_0x338a7e,_0x27110b)[_0x2aa7ab(0x328)]();}settings=_0x46a5ec,io['to'](_0x2aa7ab(0x36c))[_0x2aa7ab(0x3a6)](_0x2aa7ab(0x32c),cleanSettings()),broadcastToBots(_0x2aa7ab(0x36d),settings[_0x2aa7ab(0x36d)]),broadcastToBots(_0x2aa7ab(0x2b0),settings[_0x2aa7ab(0x2b0)]),broadcastToBots(_0x2aa7ab(0x385),settings[_0x2aa7ab(0x385)]);if(_0x168e92&&!_0x1b17c2)initTelegram();_0x168e92&&_0x1b17c2&&(updateSetting(_0x2aa7ab(0x25b),null),disableTelegram()),getAllClients()[_0x2aa7ab(0x1f2)](_0x29f32d=>{const _0x35dcc0=_0x2aa7ab;getSocket(_0x29f32d['id'])['emit']('status',{'access':{'allow':![],'reason':_0x35dcc0(0x371),'token':null}});}),_0x190a17&&(await sleep(0xbb8),testMarketcapApi(_0x46a5ec[_0x2aa7ab(0x385)]));}async function testMarketcapApi(_0x12ac2f){const _0x440a6c=_0x1206eb,_0x7caa46=['BCT',_0x440a6c(0x278)];try{await axios[_0x440a6c(0x2d6)](_0x440a6c(0x215),{'headers':{'X-CMC_PRO_API_KEY':_0x12ac2f},'params':{'symbol':_0x7caa46[_0x440a6c(0x252)]()}});}catch(_0x270283){_0x270283[_0x440a6c(0x252)]()['includes'](_0x440a6c(0x322))?(io['to']('botmanager')[_0x440a6c(0x3a6)](_0x440a6c(0x2bb),'CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager'),logger[_0x440a6c(0x33b)](_0x440a6c(0x33f))):(io['to'](_0x440a6c(0x36c))[_0x440a6c(0x3a6)](_0x440a6c(0x2bb),_0x440a6c(0x351)),logger[_0x440a6c(0x33b)](_0x440a6c(0x351)),logger['debug'](_0x440a6c(0x260),_0x270283['toString']()+_0x440a6c(0x22e)+_0x270283['code']));return;}logger['debug']('CoinMarketCap\x20API\x20key\x20validated');}function updateSetting(_0x5a4d5e,_0x225c98){const _0x3122e7=_0x1206eb;dbSettings[_0x3122e7(0x2d0)]('settings.'+_0x5a4d5e,_0x225c98)[_0x3122e7(0x328)](),settings=getSettings(),io['to'](_0x3122e7(0x36c))[_0x3122e7(0x3a6)](_0x3122e7(0x32c),cleanSettings());}function _0x10f7(){const _0x381ee5=['argv','invalid\x20credentials','reload','access\x20timeout','existsSync','70KtNPlx','login\x20token\x20generated','unlinkSync','-events.json','express','Yes','verify','lastmsgemitted','file','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','catch','find','length','\x1b[31m','password','parse','showConfig','marketcapApi','toggle_','Logged\x20out\x20user\x20...','reason','new-disabled','/names\x20-\x20show\x20bot\x20names\x0a','inherit','Starting\x20(','lastmsgtelegram','orders','max','keys','isDirectory','show','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','title','/enable\x20-\x20enable\x20notifications\x0a','version.json','log','787965llhQNl','emitHistory','tkn','apply','reset-history','/off\x20-\x20stop\x20bot(s)\x0a','writeFileSync','number','name','/help\x20-\x20show\x20available\x20commands\x0a','button','storeConfiguration','lowdb/adapters/FileSync','tempaccess_reject_','emit','data','remoteAddress','function','tempaccess_5_','/disable\x20-\x20disable\x20notifications\x0a','|@|','Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled','logout','Temporary\x20access\x20rejected','sortBy','date-fns','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','SIGINT','backup','Unauthorized\x20attempt\x20to\x20store\x20configuration','reinstall_yes','************','pidRefreshToken','=>\x20Go\x20to\x20#CYA#http://127.0.0.1:','value','node','/logs\x20-\x20receive\x20log\x20files\x0a','jszip','publicKey','temporary\x20access\x20not\x20allowed','disconnect','File\x20uploaded','create','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','update-bot','show-config','uncaughtException','Unauthorized\x20attempt\x20to\x20log\x20out','Failed\x20to\x20download\x20','-performance.json','off','Restore\x20process\x20confirmed','init','randomFillSync','callback','launch','child_process','close','then','/:bot/support','Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file','started','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20','Token\x20blacklisted','new','Ok,\x20will\x20send\x20order\x20notifications\x20only','files','whitelistEnabled','backup-files','bot-','Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files','compareSync','#RES#\x20if\x20running\x20locally\x0a','login','message','tempaccess_15_','yes','Unauthorized\x20attempt\x20to\x20get\x20portfolio','\x20to\x20','sort','Notifications\x20disabled\x0a','filter','allow','portfolio','Unauthorized\x20attempt\x20to\x20add\x20bot','5\x20min','2FA\x20login\x20token\x20generated','timestamp','temporary\x20token\x20generated','User\x20has\x20been\x20validated','push','temp/','output-001.log','stringify','Error\x20sending\x20','backup-full.zip','botID','f2aRequired','update','Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)','Starting\x20#RED#Balance\x20Bot\x20v','Backup\x20file\x20unzipped\x20and\x20stored','cancelLoading','request','match','\x20(2)','statSync','slice','enable','defaults','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','logs','build','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)','remove','assign','auth','readFileSync','headers','path','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','constructor','restore_no_','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','store-settings','uuid-random','resetpw_no','Unauthorized\x20attempt\x20to\x20update\x20settings','type','forEach','All\x20bots','rmSync','2FA\x20login\x20required','RSA-OAEP','Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U','util','Disabled\x20','getDate','All\x20bots\x20running\x20right\x20now','.zip','metrics','All','/upload-backup','stopped','2FA','apiKey','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','decode64','fork','mode','Network\x20Interfaces:','secure','Notifications\x20enabled\x0a','params','/download/:type','publicKeyToPem','#RES#','encryptedUuid','Deleted\x20Bot\x20','Login\x20rejected','getFullYear','login2fa_','exp','staging','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','Logged\x20in\x20user\x20...','stop','1634440pwFkIH','Unauthorized\x20attempt\x20to\x20get\x20messages','placeOrder','toggle','IPv4','1000','logged\x20out','--------------------------------------','toggleBotMode','/output-000.log','\x20|\x20client:\x20...','sendPortfolioTelegram','login\x20required','mtime','/:bot/coins','user','(staging)','send','No\x20authentication\x20token','live','Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','\x20-\x20','delete-bot','Invalid\x20IP\x20address','test','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','status','DEFLATE','logs/','backup-full@','hashSync','telegramIpApproval','Session\x20expired\x20for\x20user\x20...','0.0.0','temporary\x20access\x20rejected','store-configuration','2FA\x20login\x20rejected','axios','referer','exchange',':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20','-results.json','restart_','generateAsync','decrypt','Unauthorized\x20attempt\x20to\x20delete\x20alerts','build2',',\x20must\x20be\x20a\x204\x20digit\x20number','/status\x20-\x20show\x20bot(s)\x20status\x0a','binary','port','Alerts','1061028SqBowt','place-order','/:bot/configuration','Markdown','telegramToken','toString','yargs/yargs','success','bb-config.json','Node.js\x20v','backupfile','editMessageReplyMarkup','disable','(((.+)+)+)+$','telegramChatId','getUTCHours','\x20mode','getMinutes','rsa','Error\x20details:','split','Restore\x20process\x20aborted','family',':\x20Bot\x20Mgr\x20>\x20','config','userid','privateKeyToPem','pki','Orders','*$1*','conn','output-002.log','Running\x20#RED#Balance\x20Bot\x20v','graphql-request','expiry','No\x20bots\x20running\x20right\x20now','store-headless','2FA\x20required','restart','getTime','127.0.0.1','add-bot','6b67f3d61ee94b8f5c80b4affef4c4d9','ETH','alerts','blacklist','disabled','Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history','Backup\x20file\x20uploaded','createWriteStream','clientip','/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a','/metrics\x20-\x20show\x20bot\x20performance\x0a','ipv6','privateKey','inlineKeyboard','mkdirSync','socket.io','bbPassword','getSeconds','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','Invalid\x20authentication\x20token\x20(2)','SIGTERM','range','auto','Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files','Starting\x20new\x20bot\x20|\x20Bot\x20','Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot','bot','manual','token','confirm-message','padStart','args','error','Starting\x20Balance\x20Bot\x20reinstallation','\x20>\x20','store-fiat','telegramUsername','download','exit','address\x20already\x20in\x20use','handshake','Access\x20enabled\x20for\x20','get-starting-balances','enabled','config_alerts','listen','access','#RES#\x20if\x20running\x20on\x20server','/:bot/portfolio','mixpanel','Unauthorized\x20attempt\x20to\x20confirm\x20message','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','randomBytes','Telegram\x20error:','kill','debug','post','onepagemode','hex','Notifications\x20enabled','Your\x20installation\x20is\x20already\x20up\x20to\x20date','static','#RED#Balance\x20Bot\x20is\x20already\x20running\x20on\x20port\x20','event','replyWithDocument','headless','production','Ok,\x20will\x20send\x20alert\x20notifications\x20only','notification','track','http','once','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','text','Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot','Bot\x20Mgr\x20>\x20','loadAsync','Unauthorized\x20attempt\x20to\x20get\x20events','reset-password','string','config/','settings.','Enabled\x20','telegram','bbUsername','host','off_','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','metrics_','set','telegramEvents','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?','HTML','replace','store','get','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)','socket','entries','Unauthorized\x20attempt\x20to\x20update\x20bot','reinstall','username','min','resetpw_yes','\x1b[34m','api-eu.mixpanel.com','Bot\x20Mgr\x20>\x20Stopping\x20','copyFileSync','accept','-----------------------------------------------------------------------------------','search','Unauthorized\x20attempt\x20to\x20show\x20configuration','cloneDeep','\x20|\x20','Restarting\x20','telegramEnabled','isIPv4MappedAddress','getMonth','restore-backup-file','internal','485368CKocCZ','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','You\x20can\x20use\x20the\x20following\x20commands:\x0a','action','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','bb/',')\x20\x20\x20|\x20Bot\x20','order','Bot\x20','Password\x20reset\x20rejected','<b>Telegram\x20Bot\x20Status:</b>\x0a','get-messages','apiSecret','9948iHHKzb','botname','showname','from','config_orders','Restore\x20backup\x20file\x20','sha256','add','hasOwnProperty','::1','versions','pidExpireLogin','/on\x20-\x20start\x20bot(s)\x0a','command','\x20minutes','running','readdirSync','telegrammsg','toggle-bot-mode','chat','Server','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','simple','initclient','Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration','bb-settings.json','startsWith','toIPv4Address','loginRequired','getHours','reply','alias','address','delete-alerts','Invalid\x20username\x20or\x20IP\x20address','Bot\x20Mgr\x20>\x20Starting\x20',':\x20Bot\x20Mgr\x20>\x20Telegram\x20error\x20occured','#RES#\x20','status\x20code\x20401','names','update_no','reinstall-bb','\x20only\x0a','sendFile','write','bbvNew','backup/','Bot\x20Mgr\x20>\x20Toggling\x20','settings','telegram2FaApproval','config_all','login\x20token\x20valid','apiPassword','Invalid\x20authentication\x20token\x20(1)','update_yes','latestversion','messages','map','https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master','***','Login\x20accepted','clients','join','full','output-000.log','\x20|\x20user:\x20...','/start','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','reject','bots','2068929eadvVu','bb-secure.json','ipc','\x20files\x20over\x20Telegram:','updatebotmanager','\x1b[33m','format','secret','index.html','bbvReceive','203559dZqEsI','login\x20not\x20required','sign','Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation','update-bb','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20see\x20logs\x20for\x20details','whitelist','Notifications\x20disabled','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','use','get-portfolio','ipaddr.js','-config.json','temporary\x20access\x20timeout','backup-full','/:bot/history','<b>Balance\x20Bot\x20Status:</b>\x0a','on_','removeAllListeners','$1_$2_$3','15\x20min','sendMetricsTelegram','sockets','login2fa_reject_','Unauthorized\x20attempt\x20to\x20download\x20','https://api.ipify.org?format=json','7kzTyAd','all','=>\x20Go\x20to\x20#CYA#http://','size','includes','uuid','botmanager','timeshift','telegraf'];_0x10f7=function(){return _0x381ee5;};return _0x10f7();}function storeSecure(_0x1561cf){const _0x15bbf6=_0x1206eb;dbSecure['get']('secure')[_0x15bbf6(0x1cb)](_0x1561cf)[_0x15bbf6(0x328)](),secure=_0x1561cf;}function addBlacklist(_0x119a50){const _0x27e9c3=_0x1206eb;cleanBlacklist();let _0x449f58;devices[_0x119a50][_0x27e9c3(0x238)]?_0x449f58=Math[_0x27e9c3(0x38f)](devices[_0x119a50][_0x27e9c3(0x238)][_0x27e9c3(0x26f)],loginExpiry):_0x449f58=loginExpiry,dbSecure['get'](_0x27e9c3(0x27a))[_0x27e9c3(0x1cb)]({'expiry':new Date()['getTime']()+_0x449f58*0x3c*0x3e8,'token':devices[_0x119a50][_0x27e9c3(0x2a5)][_0x27e9c3(0x293)]})[_0x27e9c3(0x328)](),blacklist=dbSecure[_0x27e9c3(0x2d6)](_0x27e9c3(0x27a))[_0x27e9c3(0x3ba)]();}function cleanBlacklist(){const _0x5b1d6e=_0x1206eb;let _0x8c3cf7=dbSecure['get'](_0x5b1d6e(0x27a))[_0x5b1d6e(0x2e7)]()[_0x5b1d6e(0x3ba)](),_0x192e7d=new Date()[_0x5b1d6e(0x274)]();_0x8c3cf7[_0x5b1d6e(0x1f2)](_0xfe8277=>{const _0x10f28b=_0x5b1d6e;_0xfe8277[_0x10f28b(0x26f)]<_0x192e7d&&dbSecure['get']('blacklist')[_0x10f28b(0x1e3)]({'expiry':_0xfe8277['expiry']})[_0x10f28b(0x328)]();});}function initStates(){const _0x4c5a64=_0x1206eb;let _0x12fe7a=getConfiguration();_0x12fe7a[_0x4c5a64(0x1f2)](_0x1ef277=>{_0x1ef277['live']='stopped';}),storeConfiguration(_0x12fe7a);}async function generateKeys(){const _0x2f6e6c=_0x1206eb,_0x36e7cb=forge[_0x2f6e6c(0x268)][_0x2f6e6c(0x25f)]['generateKeyPair']({'bits':0x1000,'e':0x10001}),_0x179e62=forge[_0x2f6e6c(0x268)][_0x2f6e6c(0x267)](_0x36e7cb[_0x2f6e6c(0x283)]),_0x192781=forge[_0x2f6e6c(0x268)][_0x2f6e6c(0x20c)](_0x36e7cb['publicKey']);return{'privateKey':_0x179e62,'publicKey':_0x192781};}async function oneTimeMigration(){const _0x252b69=_0x1206eb;let _0x2053bf=getSettings(),_0x7973df=![];!_0x2053bf['hasOwnProperty']('lastmsgtelegram')&&(_0x2053bf[_0x252b69(0x38d)]=0x0,_0x7973df=!![]);!_0x2053bf[_0x252b69(0x304)](_0x252b69(0x37b))&&(_0x2053bf['lastmsgemitted']=0x0,_0x7973df=!![]);!_0x2053bf[_0x252b69(0x304)](_0x252b69(0x333))&&(_0x2053bf[_0x252b69(0x333)]='0.0.0',_0x7973df=!![]);!_0x2053bf[_0x252b69(0x304)](_0x252b69(0x2b0))&&(_0x2053bf[_0x252b69(0x2b0)]=![],_0x7973df=!![]);!_0x2053bf[_0x252b69(0x304)](_0x252b69(0x385))&&(_0x2053bf[_0x252b69(0x385)]='',_0x7973df=!![]);if(_0x7973df)storeSettings(_0x2053bf);try{fs[_0x252b69(0x30c)](configbackuppath,{'withFileTypes':!![]})[_0x252b69(0x1f2)](_0x55f93e=>{const _0x4b7873=_0x252b69;if(!_0x55f93e[_0x4b7873(0x391)]()){if(!_0x55f93e[_0x4b7873(0x3a0)][_0x4b7873(0x316)](_0x4b7873(0x236)))fs[_0x4b7873(0x376)](configbackuppath+_0x55f93e['name']);}else fs[_0x4b7873(0x1f4)](configbackuppath+_0x55f93e[_0x4b7873(0x3a0)],{'recursive':!![]});});}catch(_0x5c73ff){logger['debug']('Error\x20removing\x20old\x20backup\x20files:',_0x5c73ff);}}function storeConfiguration(_0x3ab3fd){const _0x1a2687=_0x1206eb;dbConfig['get']('bots')['remove']()[_0x1a2687(0x328)](),dbConfig['get'](_0x1a2687(0x341))[_0x1a2687(0x1cb)](..._0x3ab3fd)['write'](),config=_0x3ab3fd;}async function resetPassword(){const _0x497f5c=_0x1206eb;if(tgBot&&settings['telegramChatId']){const _0x41b186=Markup[_0x497f5c(0x284)]([Markup[_0x497f5c(0x3a2)][_0x497f5c(0x3ce)](_0x497f5c(0x1bd),_0x497f5c(0x2de)),Markup[_0x497f5c(0x3a2)]['callback']('no',_0x497f5c(0x1ef))]);await sendTelegram(settings[_0x497f5c(0x25b)],'Do\x20you\x20want\x20to\x20reset\x20your\x20password?',_0x41b186),tgBot['action'](/resetpw_(.+)/,async _0x53550b=>{const _0x3b581b=_0x497f5c,_0x3cc17f=_0x53550b[_0x3b581b(0x1d9)][0x1];_0x53550b[_0x3b581b(0x258)]();if(_0x3cc17f!='no'){const _0x30fa59=0xf,_0x3a8051='0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$',_0x1538a3=Array['from'](crypto[_0x3b581b(0x3cd)](new Uint32Array(_0x30fa59)))[_0x3b581b(0x335)](_0x3be68a=>_0x3a8051[_0x3be68a%_0x3a8051['length']])[_0x3b581b(0x33a)](''),_0x402ab1=bcrypt[_0x3b581b(0x237)](_0x1538a3,saltRounds);storeSettings({'bbPassword':_0x402ab1}),await sendTelegram(_0x53550b['chat']['id'],'Password\x20has\x20been\x20reset\x20to:\x20'+_0x1538a3,{'parse_mode':_0x3b581b(0x2d3)});}else await sendTelegram(_0x53550b['chat']['id'],_0x3b581b(0x2f8));});}}async function confirmRestore(_0x2b48cf,_0x4d770c){const _0x2c7061=_0x1206eb;io['to'](_0x2c7061(0x36c))[_0x2c7061(0x3a6)](_0x2c7061(0x2bb),_0x2c7061(0x290),_0x2c7061(0x254));if(tgBot&&settings['telegramChatId']){const _0x5e702b=uuidRandom();tmpStorage[_0x5e702b]={'path':_0x2b48cf,'filename':_0x4d770c};const _0x362e5a=Markup['inlineKeyboard']([Markup[_0x2c7061(0x3a2)]['callback'](_0x2c7061(0x1bd),'restore_yes_'+_0x5e702b),Markup[_0x2c7061(0x3a2)][_0x2c7061(0x3ce)]('no',_0x2c7061(0x1eb)+_0x5e702b)]);await sendTelegram(settings[_0x2c7061(0x25b)],_0x2c7061(0x1d4),_0x362e5a),tgBot[_0x2c7061(0x2f2)](/restore_(.+)_(.+)/,async _0x97c1c8=>{const _0x2ddd60=_0x2c7061,_0x139d95=_0x97c1c8[_0x2ddd60(0x1d9)][0x1],_0x4da99f=_0x97c1c8[_0x2ddd60(0x1d9)][0x2],{path:_0x2fa446,filename:_0x18f62d}=tmpStorage[_0x4da99f];delete tmpStorage[_0x4da99f],_0x97c1c8[_0x2ddd60(0x258)](),_0x139d95==_0x2ddd60(0x1bd)?(logger['debug'](_0x2ddd60(0x3cb)),await sendTelegram(_0x97c1c8[_0x2ddd60(0x30f)]['id'],'Restoring\x20bot(s)\x20from\x20backup',{'parse_mode':_0x2ddd60(0x2d3)}),unzipFile(_0x2fa446,_0x18f62d)):(logger[_0x2ddd60(0x2ae)](_0x2ddd60(0x262)),await sendTelegram(_0x97c1c8['chat']['id'],'Restore\x20process\x20aborted'));});}}function getServerTime(){const _0x24e901=_0x1206eb,_0x4b6689=new Date();return _0x4b6689['getFullYear']()+'/'+(_0x4b6689[_0x24e901(0x2ec)]()+0x1)[_0x24e901(0x252)]()[_0x24e901(0x295)](0x2,'0')+'/'+_0x4b6689[_0x24e901(0x1fa)]()[_0x24e901(0x252)]()[_0x24e901(0x295)](0x2,'0')+'\x20'+_0x4b6689[_0x24e901(0x319)]()[_0x24e901(0x252)]()[_0x24e901(0x295)](0x2,'0')+':'+_0x4b6689[_0x24e901(0x25e)]()[_0x24e901(0x252)]()[_0x24e901(0x295)](0x2,'0')+':'+_0x4b6689[_0x24e901(0x288)]()[_0x24e901(0x252)]()[_0x24e901(0x295)](0x2,'0');}function getTimeStamp(){const _0x2ae3dc=_0x1206eb,_0x4fd2bb=shiftedTime();return _0x4fd2bb[_0x2ae3dc(0x211)]()+'/'+(_0x4fd2bb[_0x2ae3dc(0x2ec)]()+0x1)[_0x2ae3dc(0x252)]()[_0x2ae3dc(0x295)](0x2,'0')+'/'+_0x4fd2bb[_0x2ae3dc(0x1fa)]()[_0x2ae3dc(0x252)]()[_0x2ae3dc(0x295)](0x2,'0')+'\x20'+_0x4fd2bb[_0x2ae3dc(0x319)]()[_0x2ae3dc(0x252)]()[_0x2ae3dc(0x295)](0x2,'0')+':'+_0x4fd2bb[_0x2ae3dc(0x25e)]()['toString']()[_0x2ae3dc(0x295)](0x2,'0')+':'+_0x4fd2bb[_0x2ae3dc(0x288)]()[_0x2ae3dc(0x252)]()[_0x2ae3dc(0x295)](0x2,'0');}function getCleanTimeStamp(){const _0x28d9bc=_0x1206eb,_0x49d1c5=shiftedTime();return _0x49d1c5[_0x28d9bc(0x211)]()+(_0x49d1c5[_0x28d9bc(0x2ec)]()+0x1)[_0x28d9bc(0x252)]()['padStart'](0x2,'0')+_0x49d1c5['getDate']()[_0x28d9bc(0x252)]()['padStart'](0x2,'0')+'-'+_0x49d1c5[_0x28d9bc(0x319)]()[_0x28d9bc(0x252)]()[_0x28d9bc(0x295)](0x2,'0')+_0x49d1c5[_0x28d9bc(0x25e)]()[_0x28d9bc(0x252)]()[_0x28d9bc(0x295)](0x2,'0')+_0x49d1c5[_0x28d9bc(0x288)]()['toString']()[_0x28d9bc(0x295)](0x2,'0');}function shiftedTime(){const _0x51a8e3=_0x1206eb,_0x4bd3a=new Date();let _0x4bd97a=_0x4bd3a;if(settings[_0x51a8e3(0x36d)]&&settings[_0x51a8e3(0x36d)]!==0x0)_0x4bd97a=fns[_0x51a8e3(0x303)](_0x4bd3a,{'hours':settings[_0x51a8e3(0x36d)]});return _0x4bd97a;}async function startScheduler(){const _0x5bceec=_0x1206eb,_0x2b5294=new Date()[_0x5bceec(0x25c)](),_0x2d18d9=shiftedTime()[_0x5bceec(0x319)]();_0x2d18d9==0x4&&backupConfigFiles(),_0x2d18d9==0x0&&(rotateLogFiles(),logger[_0x5bceec(0x2ae)](_0x5bceec(0x21f)),logger[_0x5bceec(0x2ae)](_0x5bceec(0x26d)+serverversion+_0x5bceec(0x321)+(environment==_0x5bceec(0x214)?_0x5bceec(0x228):'')),logger['debug'](_0x5bceec(0x21f))),_0x2b5294%0x6==0x0&&triggerAnalytics(),_0x2b5294%0x6==0x0&&getMessages(),await sleep(schedulerInterval),startScheduler();}async function restoreBackupFile(_0x311a54){const _0x2ce38d=_0x1206eb;logger[_0x2ce38d(0x2ae)](_0x2ce38d(0x301)+_0x311a54);const _0x6dd60=getBotsWithMode();_0x6dd60[_0x2ce38d(0x380)]>0x0?confirmRestore(configbackuppath,_0x311a54):unzipFile(configbackuppath,_0x311a54);}async function getBackupFiles(_0x481547=null){const _0x3ef232=_0x1206eb;let _0x5eb69a=[],_0x493adc=fs[_0x3ef232(0x30c)](configbackuppath,{'withFileTypes':!![]});_0x493adc[_0x3ef232(0x1c0)]((_0x5cb70e,_0x435b06)=>_0x5cb70e[_0x3ef232(0x3a0)]<_0x435b06[_0x3ef232(0x3a0)]?0x1:_0x435b06['name']<_0x5cb70e[_0x3ef232(0x3a0)]?-0x1:0x0),_0x493adc[_0x3ef232(0x1f2)](_0x1378d9=>{const _0x20515c=_0x3ef232;if(!_0x1378d9[_0x20515c(0x391)]()&&_0x1378d9[_0x20515c(0x3a0)][_0x20515c(0x316)](_0x20515c(0x236))&&_0x1378d9[_0x20515c(0x3a0)]['endsWith'](_0x20515c(0x1fc))){const _0xb0e363=formatDate(fs[_0x20515c(0x1db)](configbackuppath+_0x1378d9[_0x20515c(0x3a0)])[_0x20515c(0x225)]);_0x5eb69a[_0x20515c(0x1cb)]({'name':_0x1378d9[_0x20515c(0x3a0)],'mtime':_0xb0e363});}});if(_0x481547)io['to'](_0x481547)['emit'](_0x3ef232(0x1b5),_0x5eb69a);else return _0x5eb69a;}async function backupConfigFiles(){const _0x5d4a08=_0x1206eb;await zipFiles(_0x5d4a08(0x35a));const _0x10859d=getCleanTimeStamp();fs[_0x5d4a08(0x2e2)](zippath+_0x5d4a08(0x1d0),configbackuppath+('backup-full@'+_0x10859d+'.zip'));let _0x4ac7c3=fs[_0x5d4a08(0x30c)](configbackuppath,{'withFileTypes':!![]});_0x4ac7c3['sort']((_0x2dc1ca,_0xfe55f5)=>_0x2dc1ca['name']<_0xfe55f5[_0x5d4a08(0x3a0)]?0x1:_0xfe55f5[_0x5d4a08(0x3a0)]<_0x2dc1ca[_0x5d4a08(0x3a0)]?-0x1:0x0),_0x4ac7c3[_0x5d4a08(0x380)]>maxBackups&&fs[_0x5d4a08(0x376)](configbackuppath+_0x4ac7c3[_0x4ac7c3[_0x5d4a08(0x380)]-0x1][_0x5d4a08(0x3a0)]);}function rotateLogFiles(){const _0x7bf49d=_0x1206eb,_0x1930fc=fs['statSync'](logspath+'output-000.log'),_0x53ed12=_0x1930fc[_0x7bf49d(0x369)]/0x400;if(_0x53ed12>0x64){let _0x31dd55=fs[_0x7bf49d(0x30c)](logspath,{'withFileTypes':!![]});_0x31dd55[_0x7bf49d(0x1c0)]((_0x25b2d9,_0x141e60)=>_0x25b2d9['name']<_0x141e60[_0x7bf49d(0x3a0)]?0x1:_0x141e60[_0x7bf49d(0x3a0)]<_0x25b2d9['name']?-0x1:0x0),_0x31dd55[_0x7bf49d(0x1f2)](_0x57f39a=>{const _0x37d7d1=_0x7bf49d;if(_0x57f39a[_0x37d7d1(0x3a0)]==_0x37d7d1(0x26c))fs[_0x37d7d1(0x2e2)](logspath+_0x57f39a[_0x37d7d1(0x3a0)],logspath+'output-003.log');if(_0x57f39a['name']==_0x37d7d1(0x1cd))fs[_0x37d7d1(0x2e2)](logspath+_0x57f39a['name'],logspath+_0x37d7d1(0x26c));_0x57f39a[_0x37d7d1(0x3a0)]==_0x37d7d1(0x33c)&&(fs['copyFileSync'](logspath+_0x57f39a[_0x37d7d1(0x3a0)],logspath+_0x37d7d1(0x1cd)),fs[_0x37d7d1(0x39e)](logspath+_0x57f39a[_0x37d7d1(0x3a0)],''));});}}async function zipFiles(_0x15c62a){const _0x345da0=_0x1206eb;let _0x480c5c;if(_0x15c62a==_0x345da0(0x1e0))_0x480c5c=logspath;if(_0x15c62a==_0x345da0(0x3b4))_0x480c5c=configpath;if(_0x15c62a==_0x345da0(0x35a))_0x480c5c=configpath;let _0x529116=fs['readdirSync'](_0x480c5c,{'withFileTypes':!![]});const _0x745f21=new JSZip();_0x529116[_0x345da0(0x1f2)](_0x58bf17=>{const _0x25b087=_0x345da0;if(!_0x58bf17[_0x25b087(0x391)]()){let _0x16ea7e=fs[_0x25b087(0x1e6)](_0x480c5c+_0x58bf17[_0x25b087(0x3a0)]);if(_0x15c62a==_0x25b087(0x3b4)){const _0x37a4de=/^bot-[0-9]{3}-config.json$/,_0x8f9775=_0x37a4de[_0x25b087(0x231)](_0x58bf17['name']);if(_0x8f9775){const _0x3b3d9f=JSON[_0x25b087(0x383)](_0x16ea7e);if(_0x3b3d9f['bot'][0x0]){_0x3b3d9f[_0x25b087(0x291)][0x0][_0x25b087(0x202)]='***',_0x3b3d9f[_0x25b087(0x291)][0x0][_0x25b087(0x2fb)]=_0x25b087(0x337);if(_0x3b3d9f[_0x25b087(0x291)][0x0]['apiPassword'])_0x3b3d9f[_0x25b087(0x291)][0x0][_0x25b087(0x330)]=_0x25b087(0x337);}_0x16ea7e=JSON['stringify'](_0x3b3d9f,null,0x2);}if(_0x58bf17[_0x25b087(0x3a0)]==_0x25b087(0x315)){const _0x34a8fc=JSON[_0x25b087(0x383)](_0x16ea7e);if(_0x34a8fc[_0x25b087(0x32c)][_0x25b087(0x318)])_0x34a8fc[_0x25b087(0x32c)]['loginRequired']=![];if(_0x34a8fc[_0x25b087(0x32c)][_0x25b087(0x287)])_0x34a8fc[_0x25b087(0x32c)][_0x25b087(0x287)]=_0x25b087(0x337);if(_0x34a8fc[_0x25b087(0x32c)][_0x25b087(0x251)])_0x34a8fc[_0x25b087(0x32c)][_0x25b087(0x251)]='***';if(_0x34a8fc['settings'][_0x25b087(0x25b)])_0x34a8fc[_0x25b087(0x32c)][_0x25b087(0x25b)]=null;if(_0x34a8fc[_0x25b087(0x32c)][_0x25b087(0x385)])_0x34a8fc['settings']['marketcapApi']=_0x25b087(0x337);_0x16ea7e=JSON[_0x25b087(0x1ce)](_0x34a8fc,null,0x2);}if(_0x58bf17['name']!=_0x25b087(0x343))_0x745f21[_0x25b087(0x37c)](_0x58bf17['name'],_0x16ea7e);}else _0x745f21[_0x25b087(0x37c)](_0x58bf17[_0x25b087(0x3a0)],_0x16ea7e);}});const _0x6894d2=await _0x745f21[_0x345da0(0x244)]({'type':_0x345da0(0x2c6),'base64':![],'compression':_0x345da0(0x234)});fs[_0x345da0(0x39e)](zippath+(_0x15c62a+'.zip'),_0x6894d2,'binary');}async function unzipFile(_0x5e4d27,_0x19000f){const _0x282ae4=_0x1206eb;fs['readdirSync'](configpath,{'withFileTypes':!![]})[_0x282ae4(0x1f2)](_0x2d8c8f=>{const _0x564d69=_0x282ae4;if(!_0x2d8c8f[_0x564d69(0x391)]())fs[_0x564d69(0x1f4)](configpath+_0x2d8c8f[_0x564d69(0x3a0)]);});const _0x19a5ef=fs[_0x282ae4(0x1e6)](_0x5e4d27+_0x19000f,_0x282ae4(0x24a)),_0x227547=await JSZip[_0x282ae4(0x2c3)](_0x19a5ef,{'base64':![],'checkCRC32':!![]});for(const _0x3fd0a7 of Object['keys'](_0x227547['files'])){const _0x254b3e=_0x227547['files'][_0x3fd0a7],_0xa6bf5a=await _0x254b3e['async'](_0x282ae4(0x2c6));fs[_0x282ae4(0x39e)](configpath+_0x254b3e[_0x282ae4(0x3a0)],_0xa6bf5a);}fs[_0x282ae4(0x30c)](temppath,{'withFileTypes':!![]})[_0x282ae4(0x1f2)](_0x31beab=>{const _0x4985a6=_0x282ae4;if(!_0x31beab[_0x4985a6(0x391)]())fs[_0x4985a6(0x1f4)](temppath+_0x31beab[_0x4985a6(0x3a0)]);}),logger['debug'](_0x282ae4(0x1d6)),process[_0x282ae4(0x229)]({'restore':!![]},_0x40e47f=>{});}async function getPublicIp(){const _0x5a8aed=_0x1206eb;try{const _0x61c53c=await axios[_0x5a8aed(0x2d6)](_0x5a8aed(0x365));publicip=_0x61c53c[_0x5a8aed(0x3a7)]['ip'];}catch(_0x30c18d){}}async function triggerAnalytics(){const _0x36910b=_0x1206eb;if(!publicip)await getPublicIp();const _0x3c34d6=getBotsWithMode();let _0x30fbb6=0x0;_0x3c34d6[_0x36910b(0x1f2)](_0x43786b=>{const _0x317ca4=_0x36910b;if(_0x43786b[_0x317ca4(0x233)]==='enabled')_0x30fbb6++;});const _0x5ccba1=getBotExchanges();mixpanel[_0x36910b(0x2bc)](_0x36910b(0x310),{'distinct_id':settings[_0x36910b(0x266)],'ip':publicip,'version':serverversion,'numbots':_0x3c34d6['length'],'numbotsenabled':_0x30fbb6,'exchanges':_0x5ccba1,'environment':environment});}async function getMessages(){const _0x5583d5=_0x1206eb,_0x311315=_0x5583d5(0x336),_0x188070=new GraphQLClient(_0x311315),_0x26f991={'authorization':_0x5583d5(0x1f7)},_0x921f7a=serverversion[_0x5583d5(0x261)]('.'),_0x2025cd=_0x921f7a[0x0]+'.'+_0x921f7a[0x1],_0x5064d6=Math[_0x5583d5(0x2dd)](settings[_0x5583d5(0x38d)],settings[_0x5583d5(0x37b)]),_0x5c04e9={'last':parseInt(_0x5064d6),'bbm':_0x2025cd},_0x5e438e=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x33ae7e;try{_0x33ae7e=await _0x188070[_0x5583d5(0x1d8)](_0x5e438e,_0x5c04e9,_0x26f991);}catch(_0x5325c7){}if(_0x33ae7e&&_0x33ae7e[_0x5583d5(0x334)]){let _0x588f4e=settings[_0x5583d5(0x38d)],_0x39cc21=settings['lastmsgtelegram'];newMessages=[];for(const _0x11478b of _0x33ae7e[_0x5583d5(0x334)]){newMessages[_0x5583d5(0x1cb)](_0x11478b);let _0x2a6069=![];_0x11478b['bbvNew']&&(updateSetting(_0x5583d5(0x333),_0x11478b['bbvNew']),_0x2a6069=isNewerVersion(serverversion,_0x11478b[_0x5583d5(0x329)])||serverversion==_0x11478b[_0x5583d5(0x329)]);if(!_0x2a6069&&_0x11478b[_0x5583d5(0x39f)]>_0x588f4e){if(_0x11478b[_0x5583d5(0x34b)]==='any'||serverversion[_0x5583d5(0x316)](_0x11478b[_0x5583d5(0x34b)])){let _0x2cc16c=''+_0x11478b[_0x5583d5(0x394)]+'\x0a\x0a'+_0x11478b[_0x5583d5(0x1bb)];const _0x35d0d1=await sendTelegramMsg(toTelegramMarkdown(_0x2cc16c),_0x5583d5(0x250));_0x588f4e=_0x11478b[_0x5583d5(0x39f)];}}_0x39cc21=_0x11478b[_0x5583d5(0x39f)];}updateAvailable=isNewerVersion(settings[_0x5583d5(0x333)],serverversion),updateSetting(_0x5583d5(0x38d),_0x39cc21),emitMessages();}}function emitMessages(){const _0x199731=_0x1206eb,_0x49b9fa=settings[_0x199731(0x37b)];let _0x52570e=[];newMessages[_0x199731(0x1f2)](_0x2e8f11=>{const _0x5cbdcd=_0x199731;_0x2e8f11[_0x5cbdcd(0x39f)]>_0x49b9fa&&_0x52570e[_0x5cbdcd(0x1cb)](_0x2e8f11);}),_0x52570e['length']>0x0&&getAllClients()[_0x199731(0x1f2)](_0x52cdd0=>{const _0x18a449=_0x199731;getSocket(_0x52cdd0['id'])[_0x18a449(0x3a6)](_0x18a449(0x1bb),_0x52570e);});}function confirmMessage(_0x317338){const _0x37ba2c=_0x1206eb;updateSetting(_0x37ba2c(0x37b),Number(_0x317338));}function isNewerVersion(_0x33cc6a,_0x1bf789){const _0x539345=_0x1206eb,_0x7d02c1=_0x1bf789[_0x539345(0x261)]('.'),_0x538aed=_0x33cc6a[_0x539345(0x261)]('.');for(var _0x33fe93=0x0;_0x33fe93<_0x538aed[_0x539345(0x380)];_0x33fe93++){const _0x21254f=~~_0x538aed[_0x33fe93],_0x302dfc=~~_0x7d02c1[_0x33fe93];if(_0x21254f>_0x302dfc)return!![];if(_0x21254f<_0x302dfc)return![];}return![];}function toTelegramMarkdown(_0x20507a){const _0x40761d=_0x1206eb,_0x4a9e02=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x7ba7bf=/\*{2}(.+?)\*{2}/gim;return _0x20507a=_0x20507a['replace'](_0x4a9e02,_0x40761d(0x35f))[_0x40761d(0x2d4)](_0x7ba7bf,_0x40761d(0x26a)),_0x20507a;}async function validateConfigFile(){const _0x54a6f7=_0x1206eb,_0xe0cd6d=dbConfig[_0x54a6f7(0x2d6)](_0x54a6f7(0x341))[_0x54a6f7(0x3b0)](_0x54a6f7(0x1d1))[_0x54a6f7(0x3ba)]()||[];if(_0xe0cd6d['length']==0x0){let _0x2401a6=0x0,_0x1e8978=[];const _0x3a409e=/^bot-([0-9]{3})-config.json$/,_0x20fa4a=fs[_0x54a6f7(0x30c)](configpath);_0x20fa4a[_0x54a6f7(0x1f2)](_0x20a9d9=>{const _0x4384bc=_0x54a6f7,_0x4fc04d=_0x3a409e['exec'](_0x20a9d9);if(_0x4fc04d){const _0x4d5ad0=_0x4fc04d[0x1];let _0x1350c0=getBotAttributes(_0x4d5ad0);_0x1e8978[_0x4384bc(0x1cb)]({'botID':_0x4d5ad0,'botname':_0x1350c0[_0x4384bc(0x2fd)],'status':_0x4384bc(0x27b),'live':_0x4384bc(0x200)}),_0x2401a6++;}}),_0x2401a6!=0x0&&(dbConfig[_0x54a6f7(0x2d6)](_0x54a6f7(0x341))[_0x54a6f7(0x1e4)](_0x1e8978)[_0x54a6f7(0x328)](),config=_0x1e8978,restoredConfigFile=_0x2401a6);}}async function restoreConfigNotify(_0x376e33){const _0x270d9f=_0x1206eb;let _0x579109;if(restoredConfigFile==0x1)_0x579109='NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run';else _0x579109='NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run';if(_0x376e33)io['to'](_0x270d9f(0x36c))[_0x270d9f(0x3a6)](_0x270d9f(0x2bb),_0x579109);else{logger[_0x270d9f(0x312)](_0x270d9f(0x2e4)),logger['simple'](_0x579109),logger['simple'](_0x270d9f(0x2e4)),logger[_0x270d9f(0x312)]('');if(tgBot&&settings[_0x270d9f(0x25b)]&&settings[_0x270d9f(0x2d1)]!=_0x270d9f(0x38e))await sendTelegram(settings['telegramChatId'],_0x270d9f(0x2c2)+_0x579109);}}function decryptRSA(_0x39565c,_0x290a74){const _0x5941ca=_0x1206eb,_0x27477b=forge[_0x5941ca(0x268)]['privateKeyFromPem'](_0x39565c),_0x29cb77=_0x27477b[_0x5941ca(0x245)](forge[_0x5941ca(0x1f8)][_0x5941ca(0x204)](_0x290a74),_0x5941ca(0x1f6),{'md':forge['md'][_0x5941ca(0x302)][_0x5941ca(0x3c2)](),'mgf1':{'md':forge['md'][_0x5941ca(0x302)][_0x5941ca(0x3c2)]()}});return _0x29cb77;}function validateCredentials(_0x5ea214,_0x18a15a){const _0xc53973=_0x1206eb;if(_0x5ea214[_0xc53973(0x2dc)]==settings[_0xc53973(0x2cb)]&&bcrypt[_0xc53973(0x1b8)](_0x5ea214[_0xc53973(0x382)],settings['bbPassword'])){if(settings[_0xc53973(0x1d2)])return{'allow':![],'reason':_0xc53973(0x1f5),'token':null};else{const _0x1aa827=generateLoginToken(_0x18a15a);return{'allow':!![],'reason':'login\x20token\x20generated','token':_0x1aa827};}}else return{'allow':![],'reason':_0xc53973(0x370),'token':null};}function refreshToken(_0x12ffcd){const _0x1f99aa=_0x1206eb,_0x478835=generateLoginToken(_0x12ffcd);return{'allow':!![],'reason':_0x1f99aa(0x375),'token':_0x478835};}function validateAccess(_0x450da4,_0x4e50b4,_0x1e8e31){const _0x29e989=_0x1206eb,_0x32e293=_0x1e8e31?_0x1e8e31:devices[_0x4e50b4]['ip'];let _0x3c9f34;const _0x4ee61d=_0x26c3ce=>{const _0x21db94=_0x47a8;if(settings[_0x21db94(0x318)]){if(settings[_0x21db94(0x1d2)]){if(telegram2FaApproved(_0x4e50b4)){const _0x463c38=generateLoginToken(_0x4e50b4);return{'allow':!![],'reason':_0x21db94(0x1c7),'token':_0x463c38};}else return{'allow':![],'reason':_0x21db94(0x224),'token':null};}else return _0x3c9f34=validToken(_0x26c3ce,_0x4e50b4),_0x3c9f34[_0x21db94(0x304)]('success')?{'allow':!![],'reason':_0x21db94(0x32f),'token':_0x26c3ce}:{'allow':![],'reason':_0x21db94(0x224),'token':null};}else return{'allow':!![],'reason':_0x21db94(0x34d),'token':null};};if(settings[_0x29e989(0x1b4)]){let _0x12a26b=[...settings[_0x29e989(0x352)],_0x29e989(0x305),'::ffff:127.0.0.1',_0x29e989(0x275)];if(_0x12a26b[_0x29e989(0x36a)](_0x32e293))return _0x4ee61d(_0x450da4);else{_0x3c9f34=validToken(_0x450da4,_0x4e50b4);if(_0x3c9f34[_0x29e989(0x304)](_0x29e989(0x254)))return _0x4ee61d(_0x450da4);else{if(telegramIpApproved(_0x4e50b4)){const _0x434ff2=generateToken(_0x4e50b4);return _0x3c9f34=_0x4ee61d(_0x450da4),_0x3c9f34[_0x29e989(0x1c3)]?{'allow':!![],'reason':_0x29e989(0x1c9),'token':_0x434ff2}:_0x3c9f34;}else return settings['temporaryAccessAllowed']?{'allow':![],'reason':_0x29e989(0x272),'token':null}:{'allow':![],'reason':_0x29e989(0x3bf),'token':null};}}}else return _0x4ee61d(_0x450da4);}function timelyDecrypt(_0x344a20,_0x5cda77,_0x2fe375='@'){const _0x58860e=_0x1206eb;if(_0x344a20)try{const _0x176969=decryptRSA(secure[_0x58860e(0x283)],_0x344a20),_0x23f8c2=_0x176969[_0x58860e(0x261)](_0x2fe375)[0x0],_0x2db032=_0x176969[_0x58860e(0x261)](_0x2fe375)[0x1],_0x58a46f=new Date()[_0x58860e(0x274)]();if(_0x5cda77){if(_0x58a46f-_0x2db032<maxSecretAge*0x3e8)return _0x23f8c2;else return![];}else return _0x23f8c2;}catch(_0x3a04a0){return![];}else return![];}const validToken=(_0x12e649,_0x87bee9)=>{const _0x1ae06d=_0x1206eb,_0xa11dbf=devices[_0x87bee9]['ip'];if(!_0x12e649)return{'error':_0x1ae06d(0x22a)};for(let _0x3d98a9 of blacklist){if(_0x3d98a9[_0x1ae06d(0x293)]==_0x12e649)return{'error':_0x1ae06d(0x1b0)};}let _0x383f24;try{_0x383f24=jwt[_0x1ae06d(0x37a)](_0x12e649,secure[_0x1ae06d(0x349)]+_0x87bee9);}catch{return{'error':_0x1ae06d(0x331)};}if(!_0x383f24['hasOwnProperty'](_0x1ae06d(0x27f))&&!_0x383f24[_0x1ae06d(0x304)](_0x1ae06d(0x2dc))||!_0x383f24[_0x1ae06d(0x304)](_0x1ae06d(0x213)))return{'error':_0x1ae06d(0x28a)};if(!_0x383f24[_0x1ae06d(0x304)]('username')&&_0x383f24[_0x1ae06d(0x304)](_0x1ae06d(0x27f))){const {clientip:_0x579eda}=_0x383f24;return _0xa11dbf==_0x579eda?{'success':_0x1ae06d(0x1ca)}:{'error':_0x1ae06d(0x230)};}else{if(_0x383f24[_0x1ae06d(0x304)](_0x1ae06d(0x2dc))&&_0x383f24['hasOwnProperty']('clientip')){const {username:_0x2da636,clientip:_0x37044b}=_0x383f24;return settings['bbUsername']==_0x2da636&&_0xa11dbf==_0x37044b?{'success':'User\x20has\x20been\x20validated'}:{'error':_0x1ae06d(0x31e)};}}},generateLoginToken=_0x3292bd=>{const _0x4d0050=_0x1206eb;if(_0x3292bd){const _0x22c7b6=devices[_0x3292bd]['ip'];return jwt[_0x4d0050(0x34e)]({'username':settings[_0x4d0050(0x2cb)],'clientip':_0x22c7b6},secure['secret']+_0x3292bd,{'expiresIn':tokenRefresh*0x3c,'allowInsecureKeySizes':!![]});}else return![];},generateToken=_0x3cc91a=>{const _0xe8af17=_0x1206eb;if(_0x3cc91a){const _0x2c0ec8=devices[_0x3cc91a]['ip'];return jwt[_0xe8af17(0x34e)]({'clientip':_0x2c0ec8},secure['secret']+_0x3cc91a,{'expiresIn':devices[_0x3cc91a][_0xe8af17(0x238)][_0xe8af17(0x26f)]*0x3c,'allowInsecureKeySizes':!![]});}else return![];},telegramIpApproved=_0x2656f0=>{const _0x298971=_0x1206eb;let _0x403a7f=![];return devices[_0x2656f0][_0x298971(0x238)]&&devices[_0x2656f0][_0x298971(0x238)]['expiry']!='reject'&&(_0x403a7f=devices[_0x2656f0]['telegramIpApproval']['clientip']==devices[_0x2656f0]['ip']&&new Date()[_0x298971(0x274)]()-devices[_0x2656f0][_0x298971(0x238)][_0x298971(0x1c8)]<devices[_0x2656f0][_0x298971(0x238)][_0x298971(0x26f)]*0x3c*0x3e8),_0x403a7f;},telegram2FaApproved=_0x393a7e=>{const _0x4ed1d0=_0x1206eb;let _0x1b7765=![];return devices[_0x393a7e][_0x4ed1d0(0x32d)]&&devices[_0x393a7e]['telegram2FaApproval']['expiry']!=_0x4ed1d0(0x340)&&(_0x1b7765=devices[_0x393a7e]['telegram2FaApproval'][_0x4ed1d0(0x27f)]==devices[_0x393a7e]['ip']&&new Date()[_0x4ed1d0(0x274)]()-devices[_0x393a7e][_0x4ed1d0(0x32d)][_0x4ed1d0(0x1c8)]<devices[_0x393a7e][_0x4ed1d0(0x32d)][_0x4ed1d0(0x26f)]*0x3c*0x3e8),_0x1b7765;},normalizeIP=_0x2c609f=>{const _0x386ea4=_0x1206eb;let _0x227c64=null,_0x13045b=null;if(ipaddr['isValid'](_0x2c609f)){const _0x52d9dc=ipaddr[_0x386ea4(0x383)](_0x2c609f);_0x52d9dc['kind']()===_0x386ea4(0x282)?(_0x52d9dc[_0x386ea4(0x2eb)]()&&(_0x227c64=_0x52d9dc[_0x386ea4(0x317)]()[_0x386ea4(0x252)]()),_0x13045b=_0x52d9dc[_0x386ea4(0x252)]()):(_0x227c64=_0x52d9dc[_0x386ea4(0x252)](),_0x13045b=_0x52d9dc['toIPv4MappedAddress']()[_0x386ea4(0x252)]());}return{'show':_0x227c64?_0x227c64:_0x13045b,'store':_0x13045b};};function formatDate(_0x497ba2){const _0x328d21=_0x1206eb;return _0x497ba2[_0x328d21(0x211)]()+'/'+(_0x497ba2[_0x328d21(0x2ec)]()+0x1)[_0x328d21(0x252)]()[_0x328d21(0x295)](0x2,'0')+'/'+_0x497ba2[_0x328d21(0x1fa)]()[_0x328d21(0x252)]()[_0x328d21(0x295)](0x2,'0')+'\x20'+_0x497ba2[_0x328d21(0x319)]()[_0x328d21(0x252)]()[_0x328d21(0x295)](0x2,'0')+':'+_0x497ba2['getMinutes']()[_0x328d21(0x252)]()[_0x328d21(0x295)](0x2,'0')+':'+_0x497ba2['getSeconds']()[_0x328d21(0x252)]()[_0x328d21(0x295)](0x2,'0');}function sleep(_0x176437){return new Promise(_0x2d86f0=>setTimeout(_0x2d86f0,_0x176437));}