const _0x138638=_0x3f34;(function(_0x84507,_0xfc3d65){const _0x503d00=_0x3f34,_0x30fa44=_0x84507();while(!![]){try{const _0x3fdb22=-parseInt(_0x503d00(0x1a7))/0x1*(parseInt(_0x503d00(0x222))/0x2)+parseInt(_0x503d00(0x1d9))/0x3+parseInt(_0x503d00(0x2ea))/0x4+parseInt(_0x503d00(0x19f))/0x5+-parseInt(_0x503d00(0x2ee))/0x6+parseInt(_0x503d00(0x26e))/0x7+parseInt(_0x503d00(0x29d))/0x8;if(_0x3fdb22===_0xfc3d65)break;else _0x30fa44['push'](_0x30fa44['shift']());}catch(_0x4e3dbd){_0x30fa44['push'](_0x30fa44['shift']());}}}(_0x5cc4,0x3a07b));const _0x4e9563=function(){let _0x28f9f0=!![];return function(_0x57c301,_0x1208e5){const _0x2e1485=_0x28f9f0?function(){const _0x5dd1f6=_0x3f34;if(_0x1208e5){const _0xb1b1d7=_0x1208e5[_0x5dd1f6(0x2e6)](_0x57c301,arguments);return _0x1208e5=null,_0xb1b1d7;}}:function(){};return _0x28f9f0=![],_0x2e1485;};}(),_0x284eb0=_0x4e9563(this,function(){const _0x328eb7=_0x3f34;return _0x284eb0[_0x328eb7(0x25f)]()[_0x328eb7(0x211)](_0x328eb7(0x202))[_0x328eb7(0x25f)]()[_0x328eb7(0x29a)](_0x284eb0)['search'](_0x328eb7(0x202));});_0x284eb0();'use strict';process['env'][_0x138638(0x2ae)]=0x1;const childProcess=require(_0x138638(0x157)),fs=require('fs'),fns=require('date-fns'),low=require(_0x138638(0x2b2)),FileSync=require(_0x138638(0x2f8)),path=require('path'),crypto=require(_0x138638(0x352)),forge=require(_0x138638(0x228)),bcrypt=require(_0x138638(0x209)),jwt=require(_0x138638(0x317)),ipaddr=require(_0x138638(0x33e)),argv=require('yargs/yargs')(process['argv'][_0x138638(0x17a)](0x2))[_0x138638(0x195)],uuidRandom=require(_0x138638(0x166)),{Telegraf,Markup}=require(_0x138638(0x2c3)),Mixpanel=require('mixpanel'),axios=require('axios'),{GraphQLClient,gql}=require(_0x138638(0x2df)),util=require('util'),fileUpload=require(_0x138638(0x236)),{networkInterfaces}=require('os'),JSZip=require(_0x138638(0x275)),PORT=argv[_0x138638(0x243)]||'3000',pattern=/^[0-9]{2,4}$/;!pattern[_0x138638(0x178)](PORT)&&(console['log']('Error:\x20Invalid\x20argument\x20'+PORT+_0x138638(0x2c4)),process[_0x138638(0x239)](0x1));const HOST=argv[_0x138638(0x174)]||null,userID=argv['user']||'',debugging=argv['d']||![],recreate=argv['r']||![],nodeversion=process[_0x138638(0x20c)][_0x138638(0x2bb)];let bbpath='bb/',bbpath2='';const botfile=_0x138638(0x1ea),configfile=_0x138638(0x344),settingsfile='bb-settings.json',securefile=_0x138638(0x300),environment=require('./'+bbpath2+_0x138638(0x189))[_0x138638(0x2ac)]||'production',maxBackups=0xa;let validInstallation=!![];const schedulerInterval=0x3c*0x3c*0x3e8;!fs[_0x138638(0x2d6)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x138638(0x281)),configpath=userID?bbpath+_0x138638(0x26b)+userID+'/':bbpath+_0x138638(0x26b),configbackuppath=configpath+_0x138638(0x1cc),logspath=userID?bbpath+_0x138638(0x2c1)+userID+'/':bbpath+_0x138638(0x2c1),zippath=userID?bbpath+_0x138638(0x226)+userID+'/':bbpath+_0x138638(0x226),loggerfile=fs['createWriteStream'](logspath+_0x138638(0x23f),{'flags':'a'}),temppath=userID?bbpath+_0x138638(0x1b6)+userID+'/':bbpath+_0x138638(0x1b6);!fs['existsSync'](configpath)&&fs[_0x138638(0x2a4)](configpath);!fs[_0x138638(0x2d6)](configbackuppath)&&fs[_0x138638(0x2a4)](configbackuppath);!fs[_0x138638(0x2d6)](logspath)&&fs['mkdirSync'](logspath);!fs[_0x138638(0x2d6)](zippath)&&fs[_0x138638(0x2a4)](zippath);!fs['existsSync'](temppath)&&fs['mkdirSync'](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x138638(0x348)]({'bots':[]})[_0x138638(0x347)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x138638(0x348)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':'0.0.0','onepagemode':![],'marketcapApi':''}})[_0x138638(0x347)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure['defaults']({'secure':{},'blacklist':[]})[_0x138638(0x347)]();const saltRounds=0xa,mixpanel=Mixpanel[_0x138638(0x339)](_0x138638(0x286),{'host':'api-eu.mixpanel.com'});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings[_0x138638(0x217)]&&(settings['telegramToken']!=''&&settings['telegramToken']!=_0x138638(0x2ec))&&settings[_0x138638(0x27f)]&&settings[_0x138638(0x27f)]!='')initTelegram();const parseColor=(_0x1655c2,_0x5d6989)=>{const _0x14a373=_0x138638,_0x3af0a2=/#[A-Z]{3}#/g;if(typeof _0x1655c2==_0x14a373(0x256)){!_0x5d6989?_0x1655c2=_0x1655c2[_0x14a373(0x337)](_0x3af0a2,''):(_0x1655c2=_0x1655c2[_0x14a373(0x337)](/#BLU#/g,_0x14a373(0x1da)),_0x1655c2=_0x1655c2[_0x14a373(0x337)](/#RED#/g,_0x14a373(0x1a1)),_0x1655c2=_0x1655c2[_0x14a373(0x337)](/#YEL#/g,_0x14a373(0x235)),_0x1655c2=_0x1655c2[_0x14a373(0x337)](/#MAG#/g,'\x1b[35m'),_0x1655c2=_0x1655c2[_0x14a373(0x337)](/#CYA#/g,'\x1b[36m'),_0x1655c2=_0x1655c2[_0x14a373(0x337)](/#RES#/g,_0x14a373(0x1e9)));;}return _0x1655c2;},logger={'screen':_0x2e42c9=>{const _0xbf8e30=_0x138638;console[_0xbf8e30(0x355)](parseColor(_0x2e42c9,!![]));},'simple':_0x2c7b00=>{const _0x481130=_0x138638;console[_0x481130(0x355)](parseColor(_0x2c7b00,!![])),loggerfile[_0x481130(0x347)](util['format'](parseColor(_0x2c7b00,![]))+'\x0a');},'full':async _0x3140f0=>{const _0x4b04e3=_0x138638,_0x163a24=getTimeStamp()+_0x4b04e3(0x1e4)+_0x3140f0;console[_0x4b04e3(0x355)](parseColor(_0x163a24,!![])),loggerfile['write'](util[_0x4b04e3(0x32f)](parseColor(_0x163a24,![]))+'\x0a');if(tgBot&&settings[_0x4b04e3(0x23b)]&&settings['telegramEvents']!=_0x4b04e3(0x22d))await sendTelegram(settings[_0x4b04e3(0x23b)],_0x4b04e3(0x2f1)+parseColor(_0x3140f0,![]));},'debug':async(_0x4c1f21,_0x1616d4='')=>{const _0x1b98b5=_0x138638,_0x391c84=getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20'+_0x4c1f21;if(debugging)console[_0x1b98b5(0x355)](parseColor(_0x391c84,!![]));loggerfile[_0x1b98b5(0x347)](util[_0x1b98b5(0x32f)](parseColor(_0x391c84,![]))+'\x0a');if(_0x1616d4){if(debugging)console[_0x1b98b5(0x355)](_0x1616d4);loggerfile['write'](util[_0x1b98b5(0x32f)](_0x1616d4)+'\x0a');}}};let terminating=![];process['on'](_0x138638(0x312),function(_0x217fd1){const _0x2bbdd1=_0x138638;_0x217fd1['toString']()[_0x2bbdd1(0x1e8)](_0x2bbdd1(0x16c))?(logger[_0x2bbdd1(0x25d)]('#RED#Balance\x20Bot\x20is\x20already\x20running\x20on\x20port\x20'+_0x217fd1[_0x2bbdd1(0x243)]+_0x2bbdd1(0x274)),process['send']({'terminate':!![]},_0x4f405e=>{})):logger[_0x2bbdd1(0x25d)](_0x217fd1);}),process['on'](_0x138638(0x239),()=>{const _0x5e3341=_0x138638;stopAllBots(),process[_0x5e3341(0x239)](0x0);}),process['on'](_0x138638(0x1a0),()=>{const _0x5cc5a8=_0x138638;stopAllBots(),process[_0x5cc5a8(0x239)](0x0);}),process['on'](_0x138638(0x2d5),()=>{const _0x4a57fe=_0x138638;stopAllBots(),process[_0x4a57fe(0x239)](0x0);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x138638(0x189))['version'],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let tmpStorage={},devices=[],lastIpApproval,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0x138638(0x301)),app=express(),http=require(_0x138638(0x23c))[_0x138638(0x1c2)](app);app[_0x138638(0x254)](fileUpload({'useTempFiles':!![]})),app[_0x138638(0x163)](_0x138638(0x1c4),async(_0x5c2b51,_0x421c31)=>{const _0x929fda=_0x138638,_0x11efe1=_0x5c2b51['params'][_0x929fda(0x2b6)],_0xbf6dfc=getClientsWithBotID(_0x929fda(0x2d3)),_0x400319=_0x5c2b51[_0x929fda(0x32b)]['uuid'],_0x4ec4c3=timelyDecrypt(_0x400319,![]),_0x512802=_0xbf6dfc[_0x929fda(0x23d)](_0x395ab9=>_0x395ab9[_0x929fda(0x15f)]==_0x4ec4c3);if(_0x512802){const _0x302ee8=normalizeIP(_0x5c2b51['socket'][_0x929fda(0x16b)])[_0x929fda(0x31a)],_0x531b10=_0x5c2b51['headers'][_0x929fda(0x291)];if(validateAccess(_0x531b10,_0x4ec4c3,_0x302ee8)[_0x929fda(0x260)])_0x11efe1==_0x929fda(0x19c)&&await backupConfigFiles(),await zipFiles(_0x11efe1),_0x421c31[_0x929fda(0x2fc)](zippath+(_0x11efe1+_0x929fda(0x357)),_0x226f60=>{const _0x186973=_0x929fda;_0x226f60&&(logger[_0x186973(0x219)](_0x186973(0x1a6)+_0x11efe1),logger[_0x186973(0x25d)](_0x226f60));});else logger[_0x929fda(0x219)]('Unauthorized\x20attempt\x20to\x20download\x20'+_0x11efe1+'\x20(1)');}else logger[_0x929fda(0x219)](_0x929fda(0x14e)+_0x11efe1+'\x20(2)');}),app[_0x138638(0x1f7)]('/upload-backup',async(_0x3bd42e,_0x63aa8b)=>{const _0xec3e0a=_0x138638,_0x417854=getClientsWithBotID(_0xec3e0a(0x2d3)),_0x321b97=_0x3bd42e[_0xec3e0a(0x32b)][_0xec3e0a(0x15f)],_0x2b14ee=timelyDecrypt(_0x321b97,![]),_0x1e9f9b=_0x417854['find'](_0x5c5c9e=>_0x5c5c9e[_0xec3e0a(0x15f)]==_0x2b14ee);logger['debug']('Backup\x20file\x20uploaded');if(_0x1e9f9b){const _0x182121=normalizeIP(_0x3bd42e[_0xec3e0a(0x210)][_0xec3e0a(0x16b)])[_0xec3e0a(0x31a)],_0x24b398=_0x3bd42e[_0xec3e0a(0x32b)][_0xec3e0a(0x291)];if(validateAccess(_0x24b398,_0x2b14ee,_0x182121)[_0xec3e0a(0x260)]){if(_0x3bd42e['files']){const _0x179b8e=_0x3bd42e[_0xec3e0a(0x20f)]['backupfile'];await _0x179b8e['mv'](temppath+_0x179b8e[_0xec3e0a(0x1fa)]),_0x63aa8b[_0xec3e0a(0x1df)]({'status':!![],'message':_0xec3e0a(0x14b)});const _0x1883ea=getBotsWithMode();_0x1883ea[_0xec3e0a(0x15c)]>0x0?confirmRestore(temppath,_0x179b8e[_0xec3e0a(0x1fa)]):unzipFile(temppath,_0x179b8e[_0xec3e0a(0x1fa)]);}}else logger[_0xec3e0a(0x219)](_0xec3e0a(0x28a));}else logger[_0xec3e0a(0x219)](_0xec3e0a(0x238));}),app[_0x138638(0x254)](express['static'](path['join'](__dirname,bbpath2,_0x138638(0x322)))),app[_0x138638(0x254)](express['static'](path[_0x138638(0x30f)](__dirname,bbpath2,'build'))),app['get']('/',function(_0x4a3b43,_0x495f67){const _0x50e215=_0x138638;_0x495f67['sendFile'](path[_0x50e215(0x30f)](__dirname,bbpath2,_0x50e215(0x322),_0x50e215(0x1c3)));}),app[_0x138638(0x163)](_0x138638(0x2dd),function(_0x4480b1,_0x2742ae){const _0x492276=_0x138638;_0x2742ae[_0x492276(0x332)](path['join'](__dirname,bbpath2,_0x492276(0x218),_0x492276(0x1c3)));}),app[_0x138638(0x163)]('/:bot/portfolio',(_0x207ef2,_0x245ba9)=>{const _0x2926b5=_0x138638;_0x245ba9[_0x2926b5(0x332)](path[_0x2926b5(0x30f)](__dirname,bbpath2,_0x2926b5(0x218),_0x2926b5(0x1c3)));}),app['get'](_0x138638(0x269),(_0x59cdf1,_0x1bad8e)=>{const _0x52644=_0x138638;_0x1bad8e[_0x52644(0x332)](path[_0x52644(0x30f)](__dirname,bbpath2,_0x52644(0x218),_0x52644(0x1c3)));}),app['get']('/:bot/coins',(_0x3ed418,_0x3ff4dd)=>{const _0x24b64a=_0x138638;_0x3ff4dd[_0x24b64a(0x332)](path[_0x24b64a(0x30f)](__dirname,bbpath2,'build',_0x24b64a(0x1c3)));}),app[_0x138638(0x163)](_0x138638(0x351),(_0x1102cf,_0x4f9c74)=>{const _0x292971=_0x138638;_0x4f9c74[_0x292971(0x332)](path[_0x292971(0x30f)](__dirname,bbpath2,_0x292971(0x218),_0x292971(0x1c3)));}),app[_0x138638(0x163)]('/:bot/configuration',(_0xa51e48,_0x21b8fc)=>{const _0x4e623a=_0x138638;_0x21b8fc[_0x4e623a(0x332)](path[_0x4e623a(0x30f)](__dirname,bbpath2,_0x4e623a(0x218),_0x4e623a(0x1c3)));}),app[_0x138638(0x163)](_0x138638(0x266),(_0x164b83,_0x3ae145)=>{const _0x403c71=_0x138638;_0x3ae145[_0x403c71(0x332)](path[_0x403c71(0x30f)](__dirname,bbpath2,_0x403c71(0x218),_0x403c71(0x1c3)));});if(HOST)http[_0x138638(0x27b)](PORT,HOST);else http['listen'](PORT);const io=require(_0x138638(0x1be))(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}function getServerIP(){const _0x15a6ec=_0x138638;let _0x4b2d32=_0x15a6ec(0x1a9);const _0xd25174=networkInterfaces(),_0x527e3e={};for(const _0x155400 of Object['keys'](_0xd25174)){for(const _0x534681 of _0xd25174[_0x155400]){if((_0x534681[_0x15a6ec(0x316)]==_0x15a6ec(0x287)||_0x534681[_0x15a6ec(0x316)]==0x4)&&!_0x534681[_0x15a6ec(0x14f)]){const _0x153551=ipaddr[_0x15a6ec(0x267)](_0x534681[_0x15a6ec(0x333)])[_0x15a6ec(0x1cf)]();_0x153551!=_0x15a6ec(0x2d0)&&(!_0x527e3e[_0x155400]&&(_0x527e3e[_0x155400]=[]),_0x527e3e[_0x155400][_0x15a6ec(0x2cd)](_0x534681['address']),_0x4b2d32=_0x534681[_0x15a6ec(0x333)]);}}}return{'serverip':_0x4b2d32,'netinterfaces':_0x527e3e};}async function startServer(){const _0x3187e8=_0x138638,{serverip:_0xb2b8a8,netinterfaces:_0x51d5c7}=getServerIP();logger[_0x3187e8(0x25d)](''),logger[_0x3187e8(0x25d)]('-----------------------------------------------------------------------------------'),await logger[_0x3187e8(0x219)](_0x3187e8(0x1c9)+serverversion+_0x3187e8(0x2c2)+(environment==_0x3187e8(0x1db)?'(staging)':'')+'\x0a'+('=>\x20Go\x20to\x20#CYA#http://127.0.0.1:'+PORT+_0x3187e8(0x247))+(_0x3187e8(0x30d)+_0xb2b8a8+':'+PORT+'#RES#\x20if\x20running\x20on\x20server')),logger['simple']('-----------------------------------------------------------------------------------');if(config[_0x3187e8(0x15c)]!=0x0)for(const _0x58a317 of config){const _0xdb1c8c=_0x58a317[_0x3187e8(0x1a2)]=='auto'?'a':'m';if(_0x58a317[_0x3187e8(0x1ae)]==_0x3187e8(0x26c)||_0x58a317[_0x3187e8(0x1ae)]==_0x3187e8(0x1ab))await logger['full'](_0x3187e8(0x2d2)+_0xdb1c8c+_0x3187e8(0x1ce)+_0x58a317['botID']+_0x3187e8(0x284)+_0x58a317[_0x3187e8(0x1a4)]),startBot([_0x58a317[_0x3187e8(0x15a)],userID],{'cwd':bbpath},function(_0x39ba47){const _0xc59a69=_0x3187e8;if(_0x39ba47)logger[_0xc59a69(0x219)](_0x39ba47);});else(_0x58a317['status']==_0x3187e8(0x171)||_0x58a317[_0x3187e8(0x1ae)]==_0x3187e8(0x232))&&await logger['full'](_0x3187e8(0x2e9)+_0xdb1c8c+_0x3187e8(0x170)+_0x58a317['botID']+_0x3187e8(0x284)+_0x58a317['botname']);}else!newBot&&logger[_0x3187e8(0x25d)](_0x3187e8(0x2e4));if(newBot)addBot();logger[_0x3187e8(0x25d)](_0x3187e8(0x1a3)),logger['simple'](''),await logger[_0x3187e8(0x2b3)]('Node.js\x20v'+nodeversion),await logger[_0x3187e8(0x2b3)]('Network\x20Interfaces:',_0x51d5c7);}function startSocket(){io['on']('connection',_0x465909=>{const _0x109842=_0x3f34;let _0xde5e2f,_0x4a39fa,_0x341e96,_0x3713fb,_0x3ecc58;const _0xbe90c2=_0x465909['handshake'][_0x109842(0x32b)]['referer'];_0x4a39fa=_0xbe90c2[_0x109842(0x179)](/bot[0-9]{3}/);if(_0x4a39fa)_0x341e96=_0x4a39fa[0x0][_0x109842(0x179)](/[0-9]{3}/);if(_0x341e96)_0xde5e2f=_0x341e96[0x0];else _0xde5e2f=_0x109842(0x2d3);const _0x11a7df=_0x465909[_0x109842(0x276)][_0x109842(0x261)][_0x109842(0x30e)];if(!_0x11a7df)_0x465909[_0x109842(0x24f)]('status',{'publicKey':secure['publicKey']});else{_0x3713fb=timelyDecrypt(_0x11a7df,![]);if(!_0x3713fb)_0x465909[_0x109842(0x24f)](_0x109842(0x1ae),{'publicKey':secure[_0x109842(0x1d1)]});else{_0x3ecc58=normalizeIP(_0x465909[_0x109842(0x328)][_0x109842(0x16b)])[_0x109842(0x31a)];if(!devices[_0x3713fb])devices[_0x3713fb]={'uuid':_0x3713fb,'access':{'token':null}};devices[_0x3713fb]['ip']=_0x3ecc58;const _0x1dadf1=addClient(_0x465909['id'],_0x3713fb,_0xde5e2f);setAccess(_0x1dadf1),emitMessages(),_0x465909['on'](_0x109842(0x2c9),_0x37fcef=>{const _0x333431=_0x109842,_0x3bd7ef=timelyDecrypt(_0x37fcef['password'],!![],'|@|');if(_0x3bd7ef){_0x37fcef={'username':_0x37fcef[_0x333431(0x2dc)],'password':_0x3bd7ef},devices[_0x3713fb][_0x333431(0x2fd)]=validateCredentials(_0x37fcef,_0x3713fb);if(devices[_0x3713fb][_0x333431(0x2fd)][_0x333431(0x260)]==![]&&devices[_0x3713fb][_0x333431(0x2fd)]['reason']==_0x333431(0x2c7))_0x465909[_0x333431(0x24f)](_0x333431(0x1ae),{'access':devices[_0x3713fb][_0x333431(0x2fd)]}),loginAccess2FA(_0x3713fb,_0x3ecc58);else{if(devices[_0x3713fb][_0x333431(0x2fd)][_0x333431(0x260)]==![]&&devices[_0x3713fb]['access'][_0x333431(0x2ca)]==_0x333431(0x237))_0x465909['emit'](_0x333431(0x1ae),{'access':devices[_0x3713fb][_0x333431(0x2fd)]});else devices[_0x3713fb][_0x333431(0x2fd)]['allow']&&devices[_0x3713fb]['access'][_0x333431(0x2ca)]==_0x333431(0x2f7)&&(getClientsWithUuid(_0x3713fb)['forEach'](_0x4c5634=>{setAccess(_0x4c5634);}),logger['debug'](_0x333431(0x2f9)+_0x3713fb[_0x333431(0x17a)](-0x8)),setTokenRefresh(_0x3713fb),setSessionTimeout('login',_0x3713fb));}}else logger['full']('Unauthorized\x20login\x20attempt\x20(timeout)');}),_0x465909['on']('reset-password',()=>{resetPassword();}),_0x465909['on'](_0x109842(0x22c),_0x25683b=>{removeClient(_0x465909['id']);}),_0xde5e2f=='botmanager'&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x203f2b){const _0x1e5abe=_0x138638;if(_0x203f2b!='botmanager'&&config[_0x1e5abe(0x246)]!=''){if(pid[_0x203f2b])pid[_0x203f2b][_0x1e5abe(0x1df)]({'function':_0x1e5abe(0x1af),'args':null});}_0x203f2b!=_0x1e5abe(0x2d3)&&broadcastToBots(_0x1e5abe(0x288),JSON[_0x1e5abe(0x172)](config));}function reloadBotManager(){const _0x1bf7b4=_0x138638;getClientsWithBotID(_0x1bf7b4(0x2d3))[_0x1bf7b4(0x1e2)](_0x39dba1=>{const _0x5649f8=_0x1bf7b4;getSocket(_0x39dba1['id'])[_0x5649f8(0x24f)](_0x5649f8(0x1ae),{'access':{'allow':![],'reason':'reload','token':null}});});}function getSocket(_0x30018f){const _0x7f8cb5=_0x138638,_0xf86725=io['_nsps']['get']('/');return _0xf86725[_0x7f8cb5(0x2f6)][_0x7f8cb5(0x163)](_0x30018f);}function setAccess(_0x5afa6e){const _0x1108f3=_0x138638,_0x5d6d86=getSocket(_0x5afa6e['id']),_0x194b72=_0x5afa6e['uuid'],_0x5d505a=_0x5afa6e[_0x1108f3(0x2e5)];devices[_0x194b72]['access']=validateAccess(devices[_0x194b72]['access'][_0x1108f3(0x24c)],_0x194b72),logger['debug'](_0x1108f3(0x204)+devices[_0x194b72][_0x1108f3(0x2fd)][_0x1108f3(0x2ca)]+_0x1108f3(0x1ed)+_0x5afa6e['id'][_0x1108f3(0x17a)](-0x8)+_0x1108f3(0x253)+_0x194b72[_0x1108f3(0x17a)](-0x8)),_0x5d6d86[_0x1108f3(0x30f)](_0x194b72);if(devices[_0x194b72]['access'][_0x1108f3(0x260)]){_0x5d6d86[_0x1108f3(0x30f)](_0x5d505a);if(_0x5d505a==_0x1108f3(0x2d3))initializeSocketBotManager(_0x5d6d86);else initializeSocketBot(_0x5d6d86);initClient(_0x5d505a);}devices[_0x194b72]['access'][_0x1108f3(0x24c)]&&devices[_0x194b72]['access'][_0x1108f3(0x2ca)]==_0x1108f3(0x164)&&setSessionTimeout(_0x1108f3(0x268),_0x194b72),devices[_0x194b72][_0x1108f3(0x2fd)][_0x1108f3(0x24c)]&&devices[_0x194b72][_0x1108f3(0x2fd)][_0x1108f3(0x2ca)]=='2FA\x20login\x20token\x20generated'&&setSessionTimeout(_0x1108f3(0x2c9),_0x194b72),_0x5d6d86[_0x1108f3(0x24f)](_0x1108f3(0x1ae),{'status':_0x5afa6e[_0x1108f3(0x1de)],'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x194b72]['access'],'externalip':devices[_0x194b72]['ip'],'publicKey':secure[_0x1108f3(0x1d1)],'userid':settings['userid'],'validInstallation':validInstallation}),devices[_0x194b72][_0x1108f3(0x2fd)]['allow']==![]&&devices[_0x194b72]['access']['reason']=='2FA\x20required'&&temporaryAccess2FA(_0x194b72,devices[_0x194b72]['ip']);}function setSessionTimeout(_0x5d0d66,_0x5e961b){const _0x2d2eb9=_0x138638;let _0x11e0d3;if(_0x5d0d66==_0x2d2eb9(0x2c9))_0x11e0d3=loginExpiry*0x3c*0x3e8;else _0x11e0d3=devices[_0x5e961b]['telegramIpApproval']['expiry']*0x3c*0x3e8-(new Date()['getTime']()-devices[_0x5e961b][_0x2d2eb9(0x2be)][_0x2d2eb9(0x1d3)]);if(devices[_0x5e961b][_0x2d2eb9(0x1fe)])clearTimeout(devices[_0x5e961b]['pidExpireLogin']);devices[_0x5e961b][_0x2d2eb9(0x1fe)]=setTimeout(()=>{const _0x2acc68=_0x2d2eb9;if(devices[_0x5e961b][_0x2acc68(0x18e)])clearTimeout(devices[_0x5e961b][_0x2acc68(0x18e)]);removeSocketListeners(_0x5e961b),addBlacklist(_0x5e961b),devices[_0x5e961b][_0x2acc68(0x2be)]=null,devices[_0x5e961b][_0x2acc68(0x215)]=null,devices[_0x5e961b][_0x2acc68(0x2fd)][_0x2acc68(0x24c)]=null,logger[_0x2acc68(0x2b3)]('Session\x20expired\x20for\x20user\x20...'+_0x5e961b[_0x2acc68(0x17a)](-0x8)),devices[_0x5e961b]['access']=validateAccess(devices[_0x5e961b][_0x2acc68(0x2fd)][_0x2acc68(0x24c)],_0x5e961b),!(devices[_0x5e961b][_0x2acc68(0x2fd)]['allow']&&devices[_0x5e961b][_0x2acc68(0x2fd)]['reason']==_0x2acc68(0x2b9))&&(_0x5d0d66==_0x2acc68(0x2c9)?io['to'](_0x5e961b)['emit'](_0x2acc68(0x1ae),{'access':{'allow':![],'reason':_0x2acc68(0x18a),'token':null}}):io['to'](_0x5e961b)[_0x2acc68(0x24f)](_0x2acc68(0x1ae),{'access':{'allow':![],'reason':'temporary\x20access\x20timeout','token':null}})),devices[_0x5e961b][_0x2acc68(0x2fd)][_0x2acc68(0x24c)]=null;},_0x11e0d3);}function setTokenRefresh(_0x3b9c73){const _0x4c0a1b=_0x138638;if(devices[_0x3b9c73]['pidRefreshToken'])clearTimeout(devices[_0x3b9c73]['pidRefreshToken']);devices[_0x3b9c73][_0x4c0a1b(0x18e)]=setTimeout(()=>{const _0x5e897c=_0x4c0a1b;getClientsWithUuid(_0x3b9c73)[_0x5e897c(0x15c)]!=0x0?(devices[_0x3b9c73][_0x5e897c(0x2fd)]=refreshToken(_0x3b9c73),io['to'](_0x3b9c73)[_0x5e897c(0x24f)]('status',{'status':'connected','serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x3b9c73]['access'],'externalip':devices[_0x3b9c73]['ip'],'publicKey':secure['publicKey'],'validInstallation':validInstallation}),setTokenRefresh(_0x3b9c73)):clearTimeout(devices[_0x3b9c73][_0x5e897c(0x18e)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x18bf02){const _0x2b3893=_0x138638,_0x341b1a=getClient(_0x18bf02['id'])[_0x2b3893(0x15f)];_0x18bf02[_0x2b3893(0x24f)](_0x2b3893(0x288),config),_0x18bf02['emit']('settings',cleanSettings()),_0x18bf02['on'](_0x2b3893(0x165),_0x1b0539=>{const _0x792a8d=_0x2b3893;if(validateAccess(_0x1b0539,_0x341b1a)[_0x792a8d(0x260)])addBot();else logger[_0x792a8d(0x219)](_0x792a8d(0x335));}),_0x18bf02['on'](_0x2b3893(0x159),(_0x3483ea,_0x55c3ac)=>{const _0x3d0ad1=_0x2b3893;if(validateAccess(_0x55c3ac,_0x341b1a)[_0x3d0ad1(0x260)])toggleBot(_0x3483ea[_0x3d0ad1(0x15a)],_0x3483ea[_0x3d0ad1(0x1ae)],_0x3483ea[_0x3d0ad1(0x1fc)]);else logger['full'](_0x3d0ad1(0x196));}),_0x18bf02['on'](_0x2b3893(0x313),(_0x7ab83c,_0x22f5f6)=>{const _0x319f15=_0x2b3893;if(validateAccess(_0x22f5f6,_0x341b1a)['allow'])toggleBotMode(_0x7ab83c);else logger[_0x319f15(0x219)](_0x319f15(0x196));}),_0x18bf02['on']('delete-bot',(_0x8a3bb9,_0x52d8c6)=>{const _0xca93a4=_0x2b3893;if(validateAccess(_0x52d8c6,_0x341b1a)[_0xca93a4(0x260)])deleteBot(_0x8a3bb9);else logger[_0xca93a4(0x219)](_0xca93a4(0x2fe));}),_0x18bf02['on'](_0x2b3893(0x1cb),(_0x34058f,_0x3211af)=>{const _0x43b9c3=_0x2b3893;if(validateAccess(_0x3211af,_0x341b1a)[_0x43b9c3(0x260)])storeSettings(_0x34058f,!![]);else logger[_0x43b9c3(0x219)](_0x43b9c3(0x14d));}),_0x18bf02['on'](_0x2b3893(0x197),_0x35ceb5=>{const _0x114027=_0x2b3893;if(validateAccess(_0x35ceb5,_0x341b1a)[_0x114027(0x260)])updateBB('update');else logger[_0x114027(0x219)]('Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot');}),_0x18bf02['on'](_0x2b3893(0x19d),_0x25786c=>{const _0x2fb606=_0x2b3893;if(validateAccess(_0x25786c,_0x341b1a)[_0x2fb606(0x260)])updateBB(_0x2fb606(0x221));else logger[_0x2fb606(0x219)]('Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot');}),_0x18bf02['on']('get-backup-files',_0x1eb465=>{const _0x460b33=_0x2b3893;if(validateAccess(_0x1eb465,_0x341b1a)[_0x460b33(0x260)]){const _0x51cda0=getClient(_0x18bf02['id']);if(_0x51cda0)getBackupFiles(_0x51cda0[_0x460b33(0x15f)]);else logger[_0x460b33(0x219)](_0x460b33(0x2a6));}else logger[_0x460b33(0x219)]('Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files');}),_0x18bf02['on'](_0x2b3893(0x33a),(_0x47e8b6,_0x478ca8)=>{const _0x1b0886=_0x2b3893;if(validateAccess(_0x478ca8,_0x341b1a)[_0x1b0886(0x260)])restoreBackupFile(_0x47e8b6);else logger[_0x1b0886(0x219)](_0x1b0886(0x262));}),_0x18bf02['on'](_0x2b3893(0x283),_0x4ba34c=>{const _0x2774af=_0x2b3893;if(validateAccess(_0x4ba34c,_0x341b1a)[_0x2774af(0x260)])getMessages();else logger[_0x2774af(0x219)]('Unauthorized\x20attempt\x20to\x20get\x20messages');}),_0x18bf02['on'](_0x2b3893(0x2db),(_0x4dced5,_0x44efc2)=>{const _0x30757b=_0x2b3893;if(validateAccess(_0x44efc2,_0x341b1a)[_0x30757b(0x260)])confirmMessage(_0x4dced5);else logger[_0x30757b(0x219)](_0x30757b(0x180));}),_0x18bf02['on'](_0x2b3893(0x31b),_0xf57867=>{const _0xf93b6e=_0x2b3893;if(validateAccess(_0xf57867,_0x341b1a)[_0xf93b6e(0x260)]){if(devices[_0x341b1a][_0xf93b6e(0x18e)])clearTimeout(devices[_0x341b1a][_0xf93b6e(0x18e)]);if(devices[_0x341b1a][_0xf93b6e(0x1fe)])clearTimeout(devices[_0x341b1a][_0xf93b6e(0x1fe)]);removeSocketListeners(getClient(_0x18bf02['id'])['uuid']),addBlacklist(_0x341b1a),devices[_0x341b1a][_0xf93b6e(0x2be)]=null,devices[_0x341b1a]['telegram2FaApproval']=null,devices[_0x341b1a][_0xf93b6e(0x2fd)][_0xf93b6e(0x24c)]=null,logger[_0xf93b6e(0x2b3)](_0xf93b6e(0x1bc)+_0x341b1a['slice'](-0x8)),io['to'](getClient(_0x18bf02['id'])[_0xf93b6e(0x15f)])['emit']('status',{'access':{'allow':![],'reason':_0xf93b6e(0x31f),'token':null}});}else logger['full'](_0xf93b6e(0x19b));});}function initializeSocketBot(_0x5f4f55){const _0x487818=_0x138638,_0x585b80=getClient(_0x5f4f55['id'])[_0x487818(0x2e5)],_0xa94453=getClient(_0x5f4f55['id'])[_0x487818(0x15f)];_0x5f4f55['on'](_0x487818(0x17f),(_0x4ba970,_0x5b0907)=>{const _0x53dafc=_0x487818;if(validateAccess(_0x5b0907,_0xa94453)['allow']){if(pid[_0x585b80])pid[_0x585b80][_0x53dafc(0x1df)]({'function':'emitHistory','args':_0x4ba970});}else logger['full']('Unauthorized\x20attempt\x20to\x20get\x20events');}),_0x5f4f55['on'](_0x487818(0x302),(_0x3c0880,_0x439399)=>{const _0xbce9ca=_0x487818;if(validateAccess(_0x439399,_0xa94453)[_0xbce9ca(0x260)]){if(pid[_0x585b80])pid[_0x585b80][_0xbce9ca(0x1df)]({'function':_0xbce9ca(0x2b8),'args':_0x3c0880});}else logger[_0xbce9ca(0x219)](_0xbce9ca(0x298));}),_0x5f4f55['on'](_0x487818(0x1d7),(_0x56a6e9,_0x495b35)=>{const _0x40ca5c=_0x487818;if(validateAccess(_0x495b35,_0xa94453)['allow']){if(pid[_0x585b80])pid[_0x585b80][_0x40ca5c(0x1df)]({'function':_0x40ca5c(0x160),'args':_0x56a6e9});}else logger[_0x40ca5c(0x219)](_0x40ca5c(0x225));}),_0x5f4f55['on']('store-configuration',(_0x5e7445,_0x20c47d)=>{const _0x4d44fb=_0x487818;if(validateAccess(_0x20c47d,_0xa94453)[_0x4d44fb(0x260)]){if(pid[_0x585b80])pid[_0x585b80]['send']({'function':'storeConfiguration','args':_0x5e7445});}else logger['full']('Unauthorized\x20attempt\x20to\x20store\x20configuration');}),_0x5f4f55['on']('store-headless',(_0x3d822d,_0x2ec4f6)=>{const _0x5da668=_0x487818;if(validateAccess(_0x2ec4f6,_0xa94453)[_0x5da668(0x260)]){if(pid[_0x585b80])pid[_0x585b80][_0x5da668(0x1df)]({'function':_0x5da668(0x2b5),'args':_0x3d822d});}else logger[_0x5da668(0x219)](_0x5da668(0x25c));}),_0x5f4f55['on'](_0x487818(0x1d2),(_0x566a56,_0x39d7c3)=>{const _0x2d81a2=_0x487818;if(validateAccess(_0x39d7c3,_0xa94453)['allow']){if(pid[_0x585b80])pid[_0x585b80]['send']({'function':_0x2d81a2(0x2bf),'args':_0x566a56});}else logger['full']('Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration');}),_0x5f4f55['on'](_0x487818(0x265),_0x23484e=>{const _0x211ece=_0x487818;if(validateAccess(_0x23484e,_0xa94453)['allow']){if(pid[_0x585b80])pid[_0x585b80][_0x211ece(0x1df)]({'function':_0x211ece(0x2d8),'args':null});}else logger[_0x211ece(0x219)]('Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history');}),_0x5f4f55['on'](_0x487818(0x2a8),_0x35d757=>{const _0x4e4e0a=_0x487818;if(validateAccess(_0x35d757,_0xa94453)[_0x4e4e0a(0x260)]){if(pid[_0x585b80])pid[_0x585b80][_0x4e4e0a(0x1df)]({'function':_0x4e4e0a(0x154),'args':null});}else logger['full'](_0x4e4e0a(0x29e));}),_0x5f4f55['on']('place-order',(_0x318bcc,_0x55d925)=>{const _0x50e087=_0x487818;if(validateAccess(_0x55d925,_0xa94453)[_0x50e087(0x260)]){if(pid[_0x585b80])pid[_0x585b80]['send']({'function':_0x50e087(0x153),'args':_0x318bcc});}else logger[_0x50e087(0x219)]('Unauthorized\x20attempt\x20to\x20place\x20market\x20order');}),_0x5f4f55['on'](_0x487818(0x2c0),_0x260fa2=>{const _0x27e138=_0x487818;if(validateAccess(_0x260fa2,_0xa94453)[_0x27e138(0x260)]){if(pid[_0x585b80])pid[_0x585b80][_0x27e138(0x1df)]({'function':'cancelLoading','args':null});}else logger[_0x27e138(0x219)]('Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins');}),_0x5f4f55['on'](_0x487818(0x1fb),_0x1b492e=>{const _0x259034=_0x487818;if(validateAccess(_0x1b492e,_0xa94453)[_0x259034(0x260)]){if(pid[_0x585b80])pid[_0x585b80][_0x259034(0x1df)]({'function':'showConfig','args':null});}else logger[_0x259034(0x219)]('Unauthorized\x20attempt\x20to\x20show\x20configuration');}),_0x5f4f55['on'](_0x487818(0x197),_0x8cd936=>{const _0x4e9570=_0x487818;if(validateAccess(_0x8cd936,_0xa94453)[_0x4e9570(0x260)])updateBB(_0x4e9570(0x331));else logger[_0x4e9570(0x219)](_0x4e9570(0x176));}),_0x5f4f55['on'](_0x487818(0x283),_0x437470=>{const _0x300acd=_0x487818;if(validateAccess(_0x437470,_0xa94453)[_0x300acd(0x260)])getMessages();else logger[_0x300acd(0x219)](_0x300acd(0x2f4));}),_0x5f4f55['on'](_0x487818(0x2db),(_0x504890,_0x42e040)=>{const _0x4b30da=_0x487818;if(validateAccess(_0x42e040,_0xa94453)[_0x4b30da(0x260)])confirmMessage(_0x504890);else logger[_0x4b30da(0x219)](_0x4b30da(0x180));}),_0x5f4f55['on'](_0x487818(0x31b),_0x504114=>{const _0xd92549=_0x487818;if(validateAccess(_0x504114,_0xa94453)[_0xd92549(0x260)]){if(devices[_0xa94453][_0xd92549(0x18e)])clearTimeout(devices[_0xa94453]['pidRefreshToken']);if(devices[_0xa94453][_0xd92549(0x1fe)])clearTimeout(devices[_0xa94453][_0xd92549(0x1fe)]);removeSocketListeners(getClient(_0x5f4f55['id'])[_0xd92549(0x15f)]),addBlacklist(_0xa94453),devices[_0xa94453]['telegramIpApproval']=null,devices[_0xa94453][_0xd92549(0x215)]=null,devices[_0xa94453][_0xd92549(0x2fd)]['token']=null,logger[_0xd92549(0x2b3)](_0xd92549(0x1bc)+_0xa94453['slice'](-0x8)),io['to'](getClient(_0x5f4f55['id'])[_0xd92549(0x15f)])['emit'](_0xd92549(0x1ae),{'access':{'allow':![],'reason':_0xd92549(0x31f),'token':null}});}else logger['full'](_0xd92549(0x19b));});}function removeSocketListeners(_0x29d110){const _0x45de6f=_0x138638;getClientsWithUuid(_0x29d110)[_0x45de6f(0x1e2)](_0x4b9ec2=>{getSocket(_0x4b9ec2['id'])['removeAllListeners']();});}function cleanSettings(){const _0x241026=_0x138638;let _0x4588ad=settings;return settings[_0x241026(0x217)]&&settings[_0x241026(0x217)]!=''&&(_0x4588ad={..._0x4588ad,'telegramToken':_0x241026(0x2e2)}),settings[_0x241026(0x23e)]&&settings['bbPassword']!=''&&(_0x4588ad={..._0x4588ad,'bbPassword':_0x241026(0x2e2)}),settings[_0x241026(0x17b)]&&settings[_0x241026(0x17b)]!=''&&(_0x4588ad={..._0x4588ad,'marketcapApi':_0x241026(0x2e2)}),(settings['bbPassword']&&settings[_0x241026(0x23e)]==_0x241026(0x2ec)||settings[_0x241026(0x217)]&&settings['telegramToken']==_0x241026(0x2ec)||settings[_0x241026(0x17b)]&&settings[_0x241026(0x17b)]==_0x241026(0x2ec))&&(_0x4588ad={..._0x4588ad,'restored':{'password':settings[_0x241026(0x23e)]=='***','telegram':settings[_0x241026(0x217)]==_0x241026(0x2ec),'marketcap':settings['marketcapApi']==_0x241026(0x2ec)}}),_0x4588ad;}async function updateBB(_0x46cf4c){const _0x5bf5a0=_0x138638;await backupConfigFiles(),installingUpdate=!![],config['forEach'](_0x564208=>{const _0x46fb79=_0x3f34;restartBot(_0x564208[_0x46fb79(0x15a)]);});if(_0x46cf4c==_0x5bf5a0(0x331))process['send']({'update':!![],'environment':environment},_0x37f2ba=>{});else _0x46cf4c==_0x5bf5a0(0x221)&&process[_0x5bf5a0(0x1df)]({'reinstall':!![],'environment':environment},_0x10a779=>{});}function startBot(_0xf5dfe1,_0x567f26,_0x4065e9){const _0x514c2f=_0x138638;if(debugging)_0xf5dfe1[_0x514c2f(0x2cd)]('-d');if(recreate)_0xf5dfe1[_0x514c2f(0x2cd)]('-r');let _0x566618=![];const _0x5201c0=_0xf5dfe1[0x0];_0x567f26={..._0x567f26,'stdio':[_0x514c2f(0x314),_0x514c2f(0x314),_0x514c2f(0x314),_0x514c2f(0x252)]},pid[_0x5201c0]=childProcess[_0x514c2f(0x1ef)](botfile,_0xf5dfe1,_0x567f26),pid[_0x5201c0]['on'](_0x514c2f(0x282),_0x2d8a25=>{const _0x4f28d7=_0x514c2f;switch(Object[_0x4f28d7(0x295)](_0x2d8a25)[0x0]){case _0x4f28d7(0x1a4):updateBotName(_0x5201c0,_0x2d8a25[_0x4f28d7(0x1a4)]);break;case _0x4f28d7(0x2a1):updateBotManager();break;case _0x4f28d7(0x1ae):updateStatus(_0x5201c0,_0x2d8a25[_0x4f28d7(0x1ae)]);break;case'live':updateLive(_0x5201c0,_0x2d8a25[_0x4f28d7(0x1fc)]);break;case _0x4f28d7(0x1cd):updateLive(_0x5201c0,_0x2d8a25[_0x4f28d7(0x1cd)]),io['to'](_0x5201c0)['emit'](_0x4f28d7(0x1ae),{'access':{'allow':![],'reason':'reload','token':null}});break;case'stop':_0x2d8a25[_0x4f28d7(0x198)]==_0x4f28d7(0x28e)&&restartBot(_0x5201c0);_0x2d8a25[_0x4f28d7(0x198)]==_0x4f28d7(0x2e3)&&toggleBot(_0x5201c0,'disabled',_0x4f28d7(0x329));break;case'telegram':sendTelegramBot(_0x5201c0,_0x2d8a25[_0x4f28d7(0x1b5)]);break;case _0x4f28d7(0x33f):sendTelegramMsg(_0x2d8a25[_0x4f28d7(0x33f)]);break;case _0x4f28d7(0x223):io['to'](_0x5201c0)[_0x4f28d7(0x24f)](_0x2d8a25[_0x4f28d7(0x223)],_0x2d8a25['args']);break;}}),pid[_0x5201c0]['on']('error',function(_0x177e87){if(_0x566618)return;_0x566618=!![],_0x4065e9(_0x177e87);}),pid[_0x5201c0]['on']('exit',async function(_0x2b937e){const _0x22f7ea=_0x514c2f;if(terminating)return;if(installingUpdate){io['close']();return;}if(_0x566618)return;_0x566618=!![],_0x4065e9(null);const _0x375e5e=dbConfig[_0x22f7ea(0x163)](_0x22f7ea(0x288))[_0x22f7ea(0x23d)]({'botID':_0x5201c0})['value']();_0x375e5e&&(_0x375e5e[_0x22f7ea(0x1ae)]==_0x22f7ea(0x26c)||_0x375e5e[_0x22f7ea(0x1ae)]==_0x22f7ea(0x1ab))&&(await sleep(0x3e8),updateLive(_0x5201c0,_0x22f7ea(0x329)),logger[_0x22f7ea(0x219)](_0x22f7ea(0x326)+_0x5201c0),startBot([_0x5201c0,userID],{'cwd':bbpath},function(_0x545afc){if(_0x545afc)logger['full'](_0x545afc);}));});}function stopBot(_0x25a251){const _0x327428=_0x138638;getClientsWithBotID(_0x25a251)[_0x327428(0x1e2)](_0x472fac=>{const _0xd07142=_0x327428;getSocket(_0x472fac['id'])[_0xd07142(0x22c)](!![]),removeClient(_0x472fac['id']);}),pid[_0x25a251]&&(pid[_0x25a251]['kill'](),pid[_0x25a251]=null);}function stopAllBots(){const _0x41897c=_0x138638;terminating=!![];const _0x208c68=getEnabledBots();_0x208c68[_0x41897c(0x1e2)](_0x340ad1=>{stopBot(_0x340ad1['botID']);});}function restartBot(_0x55840e){const _0x11e13a=_0x138638;if(pid[_0x55840e])pid[_0x55840e][_0x11e13a(0x2e3)]();}function addBot(){const _0x610b90=_0x138638;let _0x5696f9;for(let _0x395053=0x1;_0x395053<0x3e9;_0x395053++){_0x5696f9=_0x395053[_0x610b90(0x25f)]()[_0x610b90(0x155)](0x3,'0');let _0x238c87=config[_0x610b90(0x23d)](_0x1d072a=>_0x1d072a[_0x610b90(0x15a)]==_0x5696f9);if(!_0x238c87)break;}if(_0x5696f9===_0x610b90(0x244)){logger[_0x610b90(0x219)]('The\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached');return;}logger[_0x610b90(0x219)](_0x610b90(0x342)+_0x5696f9),dbConfig[_0x610b90(0x163)](_0x610b90(0x288))[_0x610b90(0x2cd)]({'botID':_0x5696f9,'botname':_0x610b90(0x206)+_0x5696f9,'status':_0x610b90(0x1ab),'live':''})['write'](),startBot([_0x5696f9,userID],{'cwd':bbpath},function(_0x5df2ae){const _0x779ee1=_0x610b90;if(_0x5df2ae)logger[_0x779ee1(0x219)](_0x5df2ae);}),config=getConfiguration(),io['to'](_0x610b90(0x2d3))[_0x610b90(0x24f)]('bots',config),broadcastToBots('bots',JSON[_0x610b90(0x172)](config));}function deleteBot(_0x2ce7){const _0x16caf5=_0x138638;getClientsWithBotID(_0x2ce7)[_0x16caf5(0x1e2)](_0x3157e1=>{const _0x329451=_0x16caf5;getSocket(_0x3157e1['id'])[_0x329451(0x22c)](!![]),removeClient(_0x3157e1['id']);}),dbConfig[_0x16caf5(0x163)](_0x16caf5(0x288))[_0x16caf5(0x177)]({'botID':_0x2ce7})[_0x16caf5(0x347)](),logger[_0x16caf5(0x219)]('Deleted\x20Bot\x20'+_0x2ce7),stopBot(_0x2ce7);try{if(fs[_0x16caf5(0x2d6)](path['join'](configpath,_0x16caf5(0x2c8)+_0x2ce7+'-config.json')))fs[_0x16caf5(0x168)](path[_0x16caf5(0x30f)](configpath,_0x16caf5(0x2c8)+_0x2ce7+_0x16caf5(0x16a)));if(fs[_0x16caf5(0x2d6)](path[_0x16caf5(0x30f)](configpath,_0x16caf5(0x2c8)+_0x2ce7+_0x16caf5(0x315))))fs[_0x16caf5(0x168)](path[_0x16caf5(0x30f)](configpath,_0x16caf5(0x2c8)+_0x2ce7+_0x16caf5(0x315)));if(fs[_0x16caf5(0x2d6)](path['join'](configpath,_0x16caf5(0x2c8)+_0x2ce7+_0x16caf5(0x1eb))))fs[_0x16caf5(0x168)](path[_0x16caf5(0x30f)](configpath,_0x16caf5(0x2c8)+_0x2ce7+'-performance.json'));if(fs[_0x16caf5(0x2d6)](path[_0x16caf5(0x30f)](configpath,_0x16caf5(0x2c8)+_0x2ce7+'-results.json')))fs['unlinkSync'](path[_0x16caf5(0x30f)](configpath,'bot-'+_0x2ce7+_0x16caf5(0x230)));}catch(_0x2db09c){if(_0x2db09c)logger['full'](_0x16caf5(0x356),_0x2db09c);}config=getConfiguration(),io['to'](_0x16caf5(0x2d3))[_0x16caf5(0x24f)](_0x16caf5(0x288),config),broadcastToBots(_0x16caf5(0x288),JSON[_0x16caf5(0x172)](config));}function toggleBot(_0x7e9a77,_0x2d0f01,_0x3f8b5a){const _0xc6ee34=_0x138638;dbConfig[_0xc6ee34(0x163)](_0xc6ee34(0x288))[_0xc6ee34(0x23d)]({'botID':_0x7e9a77})[_0xc6ee34(0x205)]({'status':_0x2d0f01})['assign']({'live':_0x3f8b5a})['write']();if(_0x2d0f01==_0xc6ee34(0x26c)||_0x2d0f01==_0xc6ee34(0x1ab))logger[_0xc6ee34(0x219)]('Enabled\x20Bot\x20'+_0x7e9a77),startBot([_0x7e9a77,userID],{'cwd':bbpath},function(_0x397d13){if(_0x397d13)logger['full'](_0x397d13);});else(_0x2d0f01==_0xc6ee34(0x171)||_0x2d0f01==_0xc6ee34(0x232))&&(logger[_0xc6ee34(0x219)](_0xc6ee34(0x184)+_0x7e9a77),stopBot(_0x7e9a77));config=getConfiguration(),io['to'](_0xc6ee34(0x2d3))[_0xc6ee34(0x24f)](_0xc6ee34(0x288),config),broadcastToBots(_0xc6ee34(0x288),JSON[_0xc6ee34(0x172)](config));}function toggleStatus(_0x4bf283){const _0x9d4d27=_0x138638;let _0x357c24=dbConfig[_0x9d4d27(0x163)](_0x9d4d27(0x288))[_0x9d4d27(0x23d)]({'botID':_0x4bf283})[_0x9d4d27(0x1f1)](),_0x457a4e;if(_0x357c24[_0x9d4d27(0x1ae)]==='enabled')_0x457a4e='disabled';else{if(_0x357c24[_0x9d4d27(0x1ae)]===_0x9d4d27(0x1ab))_0x457a4e='new-disabled';else{if(_0x357c24[_0x9d4d27(0x1ae)]===_0x9d4d27(0x232))_0x457a4e=_0x9d4d27(0x1ab);else{if(_0x357c24['status']===_0x9d4d27(0x171))_0x457a4e=_0x9d4d27(0x26c);}}}return _0x457a4e;}function updateStatus(_0x5d7351,_0x4f781e){const _0x331029=_0x138638;dbConfig[_0x331029(0x163)](_0x331029(0x288))[_0x331029(0x23d)]({'botID':_0x5d7351})['assign']({'status':_0x4f781e})[_0x331029(0x347)](),config=getConfiguration(),io['to'](_0x331029(0x2d3))[_0x331029(0x24f)]('bots',config),broadcastToBots('bots',JSON[_0x331029(0x172)](config));}function updateLive(_0x28bfd6,_0x5421a4){const _0x3c5a5c=_0x138638;dbConfig[_0x3c5a5c(0x163)](_0x3c5a5c(0x288))['find']({'botID':_0x28bfd6})[_0x3c5a5c(0x205)]({'live':_0x5421a4})[_0x3c5a5c(0x347)](),config=getConfiguration(),io['to'](_0x3c5a5c(0x2d3))[_0x3c5a5c(0x24f)](_0x3c5a5c(0x288),config),broadcastToBots(_0x3c5a5c(0x288),JSON[_0x3c5a5c(0x172)](config));}function updateBotName(_0x23a30b,_0xb917c1){const _0x5c59e4=_0x138638;dbConfig[_0x5c59e4(0x163)](_0x5c59e4(0x288))[_0x5c59e4(0x23d)]({'botID':_0x23a30b})['assign']({'botname':_0xb917c1})[_0x5c59e4(0x347)](),config=getConfiguration(),io['to'](_0x5c59e4(0x2d3))['emit'](_0x5c59e4(0x288),config),broadcastToBots('bots',JSON[_0x5c59e4(0x172)](config));}function updateBotManager(){const _0x53a740=_0x138638;config=getConfiguration(),io['to'](_0x53a740(0x2d3))[_0x53a740(0x24f)]('bots',config),broadcastToBots(_0x53a740(0x288),JSON[_0x53a740(0x172)](config));}function toggleBotMode(_0x27507d){const _0x2eea37=_0x138638;if(pid[_0x27507d])pid[_0x27507d]['send']({'function':_0x2eea37(0x21f),'args':null});else{const _0x4a236b=configpath+_0x2eea37(0x2c8)+_0x27507d+_0x2eea37(0x16a),_0x2c6e03=fs[_0x2eea37(0x309)](_0x4a236b),_0x47b88a=JSON[_0x2eea37(0x267)](_0x2c6e03),_0x23fa67=_0x47b88a[_0x2eea37(0x2e5)][0x0][_0x2eea37(0x1d0)];_0x47b88a[_0x2eea37(0x2e5)][0x0][_0x2eea37(0x1d0)]=!_0x23fa67;const _0x222649=JSON[_0x2eea37(0x172)](_0x47b88a,null,0x2);fs[_0x2eea37(0x2fa)](_0x4a236b,_0x222649),config=getConfiguration(),io['to'](_0x2eea37(0x2d3))[_0x2eea37(0x24f)]('bots',config),broadcastToBots('bots',JSON[_0x2eea37(0x172)](config));}}function validateTelegram(_0x4b2ffa){const _0x34baee=_0x138638;if(_0x4b2ffa[_0x34baee(0x167)]['username']!=settings[_0x34baee(0x27f)]&&'@'+_0x4b2ffa['from']['username']!=settings['telegramUsername']||_0x4b2ffa[_0x34baee(0x305)]['id']!=settings[_0x34baee(0x23b)])return sendTelegram(_0x4b2ffa[_0x34baee(0x305)]['id'],_0x34baee(0x34d),{'parse_mode':_0x34baee(0x320)}),![];return!![];}async function initTelegram(){const _0x31abf3=_0x138638;tgBot&&(await tgBot[_0x31abf3(0x198)](),await sleep(0x7d0));tgBot=new Telegraf(settings['telegramToken']);let _0x49425c='You\x20can\x20use\x20the\x20following\x20commands:\x0a';_0x49425c+='\x0a',_0x49425c+='/enable\x20-\x20enable\x20notifications\x0a',_0x49425c+=_0x31abf3(0x2e0),_0x49425c+=_0x31abf3(0x192),_0x49425c+=_0x31abf3(0x289),_0x49425c+=_0x31abf3(0x26d),_0x49425c+=_0x31abf3(0x24b),_0x49425c+=_0x31abf3(0x1ff),_0x49425c+='/names\x20-\x20show\x20bot\x20names\x0a',_0x49425c+=_0x31abf3(0x1f4),_0x49425c+=_0x31abf3(0x30a),_0x49425c+=_0x31abf3(0x2c6),_0x49425c+=_0x31abf3(0x1c8),_0x49425c+=_0x31abf3(0x2b7),_0x49425c+=_0x31abf3(0x34b),_0x49425c+=_0x31abf3(0x263),_0x49425c+='/help\x20-\x20show\x20available\x20commands\x0a';let _0x3381b7=_0x31abf3(0x307);_0x3381b7+='\x0a',_0x3381b7+=_0x49425c,tgBot['catch']((_0x950ae6,_0x235847)=>{const _0x360356=_0x31abf3;logger[_0x360356(0x25d)](getTimeStamp()+_0x360356(0x2ce)),logger[_0x360356(0x2b3)](_0x360356(0x311),_0x950ae6);}),tgBot[_0x31abf3(0x254)](async(_0x2af989,_0x4ac6f1)=>{const _0xd076e5=_0x31abf3;if(settings[_0xd076e5(0x23b)]||_0x2af989[_0xd076e5(0x331)]['message'][_0xd076e5(0x1f6)]!=_0xd076e5(0x1b9)){if(!validateTelegram(_0x2af989))return;}_0x4ac6f1();}),tgBot[_0x31abf3(0x199)]('start',async _0x4b9ee1=>{const _0x254e5c=_0x31abf3;if(_0x4b9ee1[_0x254e5c(0x167)][_0x254e5c(0x2dc)]==settings[_0x254e5c(0x27f)]||'@'+_0x4b9ee1['from']['username']==settings[_0x254e5c(0x27f)]){if(!settings[_0x254e5c(0x23b)])updateSetting(_0x254e5c(0x23b),_0x4b9ee1['chat']['id']);else{if(!validateTelegram(_0x4b9ee1))return;}}else{if(!validateTelegram(_0x4b9ee1))return;}updateSetting(_0x254e5c(0x2e1),!![]),await sendTelegram(_0x4b9ee1[_0x254e5c(0x305)]['id'],_0x3381b7);}),tgBot[_0x31abf3(0x199)]('enable',async _0x333669=>{const _0x52df02=_0x31abf3;updateSetting(_0x52df02(0x2e1),!![]),await sendTelegram(_0x333669[_0x52df02(0x305)]['id'],_0x52df02(0x353));}),tgBot[_0x31abf3(0x199)](_0x31abf3(0x292),async _0xa30c70=>{const _0x67401d=_0x31abf3;await sendTelegram(_0xa30c70[_0x67401d(0x305)]['id'],_0x67401d(0x156)),updateSetting(_0x67401d(0x2e1),![]);}),tgBot[_0x31abf3(0x199)](_0x31abf3(0x25a),async _0x239f53=>{const _0x3c4a6f=_0x31abf3,_0x3715d1=Markup[_0x3c4a6f(0x310)]([Markup[_0x3c4a6f(0x2bc)][_0x3c4a6f(0x16d)]('Orders',_0x3c4a6f(0x1bb)),Markup['button']['callback'](_0x3c4a6f(0x293),'config_alerts'),Markup[_0x3c4a6f(0x2bc)]['callback'](_0x3c4a6f(0x278),_0x3c4a6f(0x2ab))]);_0x239f53[_0x3c4a6f(0x285)](_0x3c4a6f(0x22b),_0x3715d1);}),tgBot[_0x31abf3(0x229)](_0x31abf3(0x1bb),async _0x7214e3=>{const _0x509254=_0x31abf3;_0x7214e3[_0x509254(0x2ba)](),updateSetting(_0x509254(0x297),_0x509254(0x22d)),updateSetting(_0x509254(0x2e1),!![]),await sendTelegram(_0x7214e3['chat']['id'],_0x509254(0x32e));}),tgBot['action']('config_alerts',async _0x3b6b32=>{const _0x3168df=_0x31abf3;_0x3b6b32['editMessageReplyMarkup'](),updateSetting(_0x3168df(0x297),_0x3168df(0x1e6)),updateSetting(_0x3168df(0x2e1),!![]),await sendTelegram(_0x3b6b32[_0x3168df(0x305)]['id'],'Ok,\x20will\x20send\x20alert\x20notifications\x20only');}),tgBot[_0x31abf3(0x229)](_0x31abf3(0x2ab),async _0xb48870=>{const _0x5890a0=_0x31abf3;_0xb48870[_0x5890a0(0x2ba)](),updateSetting(_0x5890a0(0x297),_0x5890a0(0x1e0)),updateSetting(_0x5890a0(0x2e1),!![]),await sendTelegram(_0xb48870['chat']['id'],_0x5890a0(0x16e));}),tgBot[_0x31abf3(0x199)](_0x31abf3(0x1ae),async _0x25d3ab=>{const _0x2b7f67=_0x31abf3,_0x404e13=getBotsWithMode();let _0xc538c3=_0x2b7f67(0x264);config[_0x2b7f67(0x1e2)](_0x52d52a=>{const _0x205451=_0x2b7f67,_0x1f7b14=_0x404e13['find'](_0x29539d=>_0x29539d[_0x205451(0x15a)]==_0x52d52a[_0x205451(0x15a)])[_0x205451(0x1a2)];_0xc538c3+=_0x205451(0x206)+_0x52d52a[_0x205451(0x15a)]+':\x20'+_0x52d52a[_0x205451(0x1ae)]+_0x205451(0x284)+_0x1f7b14+_0x205451(0x284)+_0x52d52a[_0x205451(0x1fc)]+'\x0a';}),_0xc538c3+='\x0a',_0xc538c3+=_0x2b7f67(0x325),_0xc538c3+=!settings['telegramEnabled']?_0x2b7f67(0x28d):_0x2b7f67(0x327),_0xc538c3+=settings['telegramEnabled']?settings['telegramEvents']==_0x2b7f67(0x1e0)?_0x2b7f67(0x33d):_0x2b7f67(0x15b)+settings[_0x2b7f67(0x297)]+'\x20only\x0a':'',await sendTelegram(_0x25d3ab['chat']['id'],_0xc538c3,{'parse_mode':'HTML'});}),tgBot[_0x31abf3(0x199)]('restart',async _0x3ad736=>{const _0x3ed679=_0x31abf3,_0x5d9457=getEnabledBots();if(_0x5d9457[_0x3ed679(0x15c)]==0x0)await sendTelegram(_0x3ad736['chat']['id'],_0x3ed679(0x18d));else{if(_0x5d9457[_0x3ed679(0x15c)]>0x1)_0x5d9457[_0x3ed679(0x2cd)]({'botID':'all'});let _0x44b646=[],_0x5d89dc=[];const _0x54bbe1=_0x5d9457[_0x3ed679(0x15c)]%0x4==0x0||_0x5d9457[_0x3ed679(0x15c)]%0x4==0x3||_0x5d9457['length']%0x3==0x1?0x4:0x3;let _0x330a48=0x0;_0x5d9457['forEach']((_0x2d1b03,_0x2251aa)=>{const _0x47bf38=_0x3ed679;if(_0x2251aa%_0x54bbe1==0x0)_0x5d89dc=[];_0x5d89dc[_0x47bf38(0x2cd)](Markup['button']['callback'](_0x2d1b03[_0x47bf38(0x15a)]==_0x47bf38(0x1e0)?_0x47bf38(0x2a2):'Bot\x20'+_0x2d1b03[_0x47bf38(0x15a)],_0x47bf38(0x2a3)+_0x2d1b03['botID'])),_0x2251aa%_0x54bbe1==0x0&&(_0x44b646[_0x330a48]=_0x5d89dc,_0x330a48++);});const _0x283cd1=Markup[_0x3ed679(0x310)](_0x44b646);_0x3ad736[_0x3ed679(0x285)](_0x3ed679(0x1c6),_0x283cd1);}}),tgBot[_0x31abf3(0x229)](/restart_(.+)/,async _0x3e1583=>{const _0x58a180=_0x31abf3,_0x4145f2=_0x3e1583['match'][0x1];_0x3e1583['editMessageReplyMarkup'](),_0x4145f2==_0x58a180(0x1e0)?config['forEach'](_0x1e5c58=>{restartBot(_0x1e5c58['botID']);}):restartBot(_0x4145f2);}),tgBot[_0x31abf3(0x199)]('on',async _0xaa5237=>{const _0x3b993c=_0x31abf3,_0x4037d0=getDisabledBots();if(_0x4037d0[_0x3b993c(0x15c)]==0x0)await sendTelegram(_0xaa5237['chat']['id'],_0x3b993c(0x241));else{if(_0x4037d0[_0x3b993c(0x15c)]>0x1)_0x4037d0['push']({'botID':_0x3b993c(0x1e0)});let _0x37d3a5=[],_0x483636=[];const _0x535003=_0x4037d0[_0x3b993c(0x15c)]%0x4==0x0||_0x4037d0['length']%0x4==0x3||_0x4037d0[_0x3b993c(0x15c)]%0x3==0x1?0x4:0x3;let _0x2b75f3=0x0;_0x4037d0[_0x3b993c(0x1e2)]((_0x1921cd,_0x5576db)=>{const _0x19a50a=_0x3b993c;if(_0x5576db%_0x535003==0x0)_0x483636=[];_0x483636['push'](Markup[_0x19a50a(0x2bc)][_0x19a50a(0x16d)](_0x1921cd[_0x19a50a(0x15a)]==_0x19a50a(0x1e0)?_0x19a50a(0x2a2):_0x19a50a(0x206)+_0x1921cd[_0x19a50a(0x15a)],'on_'+_0x1921cd[_0x19a50a(0x15a)])),_0x5576db%_0x535003==0x0&&(_0x37d3a5[_0x2b75f3]=_0x483636,_0x2b75f3++);});const _0x3d9192=Markup[_0x3b993c(0x310)](_0x37d3a5);_0xaa5237[_0x3b993c(0x285)](_0x3b993c(0x1ad),_0x3d9192);}}),tgBot[_0x31abf3(0x229)](/on_(.+)/,async _0x15d716=>{const _0x141b18=_0x31abf3,_0x3f0735=_0x15d716[_0x141b18(0x179)][0x1];_0x15d716[_0x141b18(0x2ba)]();if(_0x3f0735==_0x141b18(0x1e0)){const _0x49a9ac=getDisabledBots();await sendTelegram(_0x15d716[_0x141b18(0x305)]['id'],_0x141b18(0x33c)),_0x49a9ac[_0x141b18(0x1e2)](_0x15972a=>{const _0x5f43bd=_0x141b18;if(_0x15972a['botID']!='all')toggleBot(_0x15972a['botID'],toggleStatus(_0x15972a[_0x5f43bd(0x15a)]),_0x5f43bd(0x329));});}else await sendTelegram(_0x15d716[_0x141b18(0x305)]['id'],_0x141b18(0x1dc)+_0x3f0735),toggleBot(_0x3f0735,toggleStatus(_0x3f0735),_0x141b18(0x329));}),tgBot[_0x31abf3(0x199)](_0x31abf3(0x349),async _0x1aabb6=>{const _0x1c6ea3=_0x31abf3,_0x5f447f=getEnabledBots();if(_0x5f447f['length']==0x0)await sendTelegram(_0x1aabb6['chat']['id'],_0x1c6ea3(0x18d));else{if(_0x5f447f[_0x1c6ea3(0x15c)]>0x1)_0x5f447f[_0x1c6ea3(0x2cd)]({'botID':'all'});let _0x13a72c=[],_0x53cd3d=[];const _0x45c896=_0x5f447f['length']%0x4==0x0||_0x5f447f[_0x1c6ea3(0x15c)]%0x4==0x3||_0x5f447f[_0x1c6ea3(0x15c)]%0x3==0x1?0x4:0x3;let _0x711472=0x0;_0x5f447f['forEach']((_0x52b840,_0xd70b78)=>{const _0x2e2dd4=_0x1c6ea3;if(_0xd70b78%_0x45c896==0x0)_0x53cd3d=[];_0x53cd3d['push'](Markup['button'][_0x2e2dd4(0x16d)](_0x52b840[_0x2e2dd4(0x15a)]=='all'?_0x2e2dd4(0x2a2):_0x2e2dd4(0x206)+_0x52b840[_0x2e2dd4(0x15a)],_0x2e2dd4(0x150)+_0x52b840[_0x2e2dd4(0x15a)])),_0xd70b78%_0x45c896==0x0&&(_0x13a72c[_0x711472]=_0x53cd3d,_0x711472++);});const _0x39daa2=Markup['inlineKeyboard'](_0x13a72c);_0x1aabb6[_0x1c6ea3(0x285)](_0x1c6ea3(0x214),_0x39daa2);}}),tgBot[_0x31abf3(0x229)](/off_(.+)/,async _0x5e1d84=>{const _0x1bdf28=_0x31abf3,_0x494e2a=_0x5e1d84[_0x1bdf28(0x179)][0x1];_0x5e1d84['editMessageReplyMarkup']();if(_0x494e2a==_0x1bdf28(0x1e0)){const _0x1af225=getEnabledBots();await sendTelegram(_0x5e1d84[_0x1bdf28(0x305)]['id'],_0x1bdf28(0x2b0)),_0x1af225[_0x1bdf28(0x1e2)](_0x51b6ea=>{const _0x5345d4=_0x1bdf28;if(_0x51b6ea[_0x5345d4(0x15a)]!='all')toggleBot(_0x51b6ea[_0x5345d4(0x15a)],toggleStatus(_0x51b6ea[_0x5345d4(0x15a)]),_0x5345d4(0x329));});}else await sendTelegram(_0x5e1d84[_0x1bdf28(0x305)]['id'],_0x1bdf28(0x34e)+_0x494e2a),toggleBot(_0x494e2a,toggleStatus(_0x494e2a),_0x1bdf28(0x329));}),tgBot[_0x31abf3(0x199)]('metrics',async _0xadfe46=>{const _0x65d74a=_0x31abf3,_0x120df0=getEnabledBots();if(_0x120df0['length']==0x0)await sendTelegram(_0xadfe46[_0x65d74a(0x305)]['id'],_0x65d74a(0x18d));else{if(_0x120df0[_0x65d74a(0x15c)]>0x1){let _0x4276ea=[],_0x139a69=[];const _0x306a00=_0x120df0[_0x65d74a(0x15c)]%0x4==0x0||_0x120df0[_0x65d74a(0x15c)]%0x4==0x3||_0x120df0[_0x65d74a(0x15c)]%0x3==0x1?0x4:0x3;let _0x26f14d=0x0;_0x120df0[_0x65d74a(0x1e2)]((_0x23ae1f,_0x4c7000)=>{const _0xb0af5e=_0x65d74a;if(_0x4c7000%_0x306a00==0x0)_0x139a69=[];_0x139a69[_0xb0af5e(0x2cd)](Markup[_0xb0af5e(0x2bc)][_0xb0af5e(0x16d)]('Bot\x20'+_0x23ae1f[_0xb0af5e(0x15a)],_0xb0af5e(0x21e)+_0x23ae1f[_0xb0af5e(0x15a)])),_0x4c7000%_0x306a00==0x0&&(_0x4276ea[_0x26f14d]=_0x139a69,_0x26f14d++);});const _0x3fd726=Markup[_0x65d74a(0x310)](_0x4276ea);_0xadfe46['reply'](_0x65d74a(0x1e1),_0x3fd726);}else{const _0x54b908=_0x120df0[0x0]['botID'];if(pid[_0x54b908])pid[_0x54b908][_0x65d74a(0x1df)]({'function':_0x65d74a(0x212),'args':null});}}}),tgBot[_0x31abf3(0x229)](/metrics_(.+)/,async _0x228307=>{const _0x23a341=_0x31abf3,_0x44d944=_0x228307['match'][0x1];_0x228307[_0x23a341(0x2ba)]();if(pid[_0x44d944])pid[_0x44d944][_0x23a341(0x1df)]({'function':_0x23a341(0x212),'args':null});}),tgBot['command'](_0x31abf3(0x1b3),async _0x3c519f=>{const _0x3f067b=_0x31abf3,_0x50dd07=getEnabledBots();if(_0x50dd07[_0x3f067b(0x15c)]==0x0)await sendTelegram(_0x3c519f['chat']['id'],_0x3f067b(0x18d));else{if(_0x50dd07['length']>0x1){let _0x166aed=[],_0x2f248c=[];const _0x181390=_0x50dd07[_0x3f067b(0x15c)]%0x4==0x0||_0x50dd07[_0x3f067b(0x15c)]%0x4==0x3||_0x50dd07['length']%0x3==0x1?0x4:0x3;let _0x37f196=0x0;_0x50dd07[_0x3f067b(0x1e2)]((_0x4edc7c,_0x57d5a9)=>{const _0x181c2d=_0x3f067b;if(_0x57d5a9%_0x181390==0x0)_0x2f248c=[];_0x2f248c['push'](Markup['button']['callback'](_0x181c2d(0x206)+_0x4edc7c[_0x181c2d(0x15a)],_0x181c2d(0x185)+_0x4edc7c[_0x181c2d(0x15a)])),_0x57d5a9%_0x181390==0x0&&(_0x166aed[_0x37f196]=_0x2f248c,_0x37f196++);});const _0x3738a2=Markup[_0x3f067b(0x310)](_0x166aed);_0x3c519f[_0x3f067b(0x285)]('For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?',_0x3738a2);}else{const _0x5bedad=_0x50dd07[0x0]['botID'];if(pid[_0x5bedad])pid[_0x5bedad]['send']({'function':_0x3f067b(0x306),'args':null});}}}),tgBot[_0x31abf3(0x229)](/portfolio_(.+)/,async _0x3d5d26=>{const _0x598999=_0x31abf3,_0x3eb1dd=_0x3d5d26[_0x598999(0x179)][0x1];_0x3d5d26[_0x598999(0x2ba)]();if(pid[_0x3eb1dd])pid[_0x3eb1dd][_0x598999(0x1df)]({'function':_0x598999(0x306),'args':null});}),tgBot['command'](_0x31abf3(0x245),async _0x23756d=>{const _0x2ef73d=_0x31abf3,_0x53e595='logs';await zipFiles(_0x53e595);const _0x5d676b=zippath+(_0x53e595+'.zip');_0x23756d[_0x2ef73d(0x1bd)]({'source':_0x5d676b})[_0x2ef73d(0x22e)](()=>{})[_0x2ef73d(0x27a)](_0x2e46c6=>logger[_0x2ef73d(0x2b3)](_0x2ef73d(0x1d8)+_0x53e595+_0x2ef73d(0x2bd),_0x2e46c6));}),tgBot['command'](_0x31abf3(0x19c),async _0x2853ed=>{const _0x50513f=_0x31abf3,_0x4dbc4b=_0x50513f(0x19c);await backupConfigFiles(),await zipFiles(_0x4dbc4b);const _0x5b3940=zippath+(_0x4dbc4b+_0x50513f(0x357));_0x2853ed[_0x50513f(0x1bd)]({'source':_0x5b3940})[_0x50513f(0x22e)](()=>{})[_0x50513f(0x27a)](_0x40fe3e=>logger[_0x50513f(0x2b3)]('Error\x20sending\x20'+_0x4dbc4b+_0x50513f(0x2bd),_0x40fe3e));}),tgBot[_0x31abf3(0x199)](_0x31abf3(0x331),async _0x43c752=>{const _0x51da34=_0x31abf3;await getMessages();if(!updateAvailable)await sendTelegram(_0x43c752['chat']['id'],_0x51da34(0x26a));else{if(!validInstallation)await sendTelegram(_0x43c752[_0x51da34(0x305)]['id'],'Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update');else{const _0x1edf27=Markup['inlineKeyboard']([Markup[_0x51da34(0x2bc)][_0x51da34(0x16d)](_0x51da34(0x296),_0x51da34(0x294)),Markup[_0x51da34(0x2bc)][_0x51da34(0x16d)]('No',_0x51da34(0x1c5))]);_0x43c752[_0x51da34(0x285)](_0x51da34(0x341),_0x1edf27);}}}),tgBot[_0x31abf3(0x229)](/update_(.+)/,async _0x5519c3=>{const _0x4c5341=_0x31abf3,_0xe4c452=_0x5519c3[_0x4c5341(0x179)][0x1];_0x5519c3[_0x4c5341(0x2ba)](),_0xe4c452==_0x4c5341(0x1ca)&&(await sendTelegram(_0x5519c3[_0x4c5341(0x305)]['id'],_0x4c5341(0x354)),updateBB('update')),_0xe4c452=='no'&&await sendTelegram(_0x5519c3[_0x4c5341(0x305)]['id'],_0x4c5341(0x183));}),tgBot[_0x31abf3(0x199)](_0x31abf3(0x221),async _0xe6a0e5=>{const _0x40d16d=_0x31abf3;if(!validInstallation)await sendTelegram(_0xe6a0e5[_0x40d16d(0x305)]['id'],'Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation');else{const _0x266118=Markup[_0x40d16d(0x310)]([Markup['button'][_0x40d16d(0x16d)](_0x40d16d(0x296),_0x40d16d(0x1f0)),Markup[_0x40d16d(0x2bc)][_0x40d16d(0x16d)]('No',_0x40d16d(0x31e))]);_0xe6a0e5[_0x40d16d(0x285)](_0x40d16d(0x29f),_0x266118);}}),tgBot[_0x31abf3(0x229)](/reinstall_(.+)/,async _0x2c26ca=>{const _0xbbc946=_0x31abf3,_0x2dea77=_0x2c26ca[_0xbbc946(0x179)][0x1];_0x2c26ca['editMessageReplyMarkup'](),_0x2dea77=='yes'&&(await sendTelegram(_0x2c26ca['chat']['id'],_0xbbc946(0x28b)),updateBB('reinstall')),_0x2dea77=='no'&&await sendTelegram(_0x2c26ca['chat']['id'],_0xbbc946(0x319));}),tgBot[_0x31abf3(0x199)](_0x31abf3(0x1bf),async _0x3ac30a=>{const _0x39b5f1=_0x31abf3,_0x325879=getBotsWithMode();if(_0x325879['length']==0x0)await sendTelegram(_0x3ac30a['chat']['id'],_0x39b5f1(0x18d));else{let _0x45cda0=[],_0x4f362d=[];const _0x470c49=0x2;let _0x56c38c=0x0;_0x325879[_0x39b5f1(0x1e2)]((_0x3de76c,_0x507650)=>{const _0x46a00c=_0x39b5f1;if(_0x507650%_0x470c49==0x0)_0x4f362d=[];_0x4f362d[_0x46a00c(0x2cd)](Markup[_0x46a00c(0x2bc)][_0x46a00c(0x16d)](_0x46a00c(0x206)+_0x3de76c[_0x46a00c(0x15a)]+'\x20('+_0x3de76c[_0x46a00c(0x1a2)]+')','toggle_'+_0x3de76c[_0x46a00c(0x15a)])),_0x507650%_0x470c49==0x0&&(_0x45cda0[_0x56c38c]=_0x4f362d,_0x56c38c++);});const _0x56ca33=Markup[_0x39b5f1(0x310)](_0x45cda0);_0x3ac30a[_0x39b5f1(0x285)](_0x39b5f1(0x1e5),_0x56ca33);}}),tgBot['action'](/toggle_(.+)/,async _0x5d1a0e=>{const _0x21a60c=_0x31abf3,_0x52bc7d=_0x5d1a0e[_0x21a60c(0x179)][0x1];_0x5d1a0e[_0x21a60c(0x2ba)]();const _0x5919d7=getBotsWithMode(),_0x3d62f3=_0x5919d7[_0x21a60c(0x23d)](_0x2fb495=>_0x2fb495[_0x21a60c(0x15a)]==_0x52bc7d),_0x388387=_0x3d62f3['mode']==_0x21a60c(0x345)?'manual':_0x21a60c(0x345);await sendTelegram(_0x5d1a0e[_0x21a60c(0x305)]['id'],_0x21a60c(0x324)+_0x52bc7d+_0x21a60c(0x191)+_0x388387+_0x21a60c(0x151)),toggleBotMode(_0x52bc7d);}),tgBot['command'](_0x31abf3(0x323),async _0x231d8b=>{const _0x4e05f6=_0x31abf3;let _0x1066cc='';config['forEach'](_0x50d473=>{const _0x39b991=_0x3f34;_0x1066cc+=_0x39b991(0x206)+_0x50d473['botID']+':\x20'+_0x50d473[_0x39b991(0x1a4)]+'\x0a';}),await sendTelegram(_0x231d8b[_0x4e05f6(0x305)]['id'],_0x1066cc,{'parse_mode':_0x4e05f6(0x320)});}),tgBot[_0x31abf3(0x199)](_0x31abf3(0x194),async _0x2dd554=>{const _0xbec63=_0x31abf3;await sendTelegram(_0x2dd554[_0xbec63(0x305)]['id'],_0x49425c);}),process['once'](_0x31abf3(0x2d5),()=>tgBot[_0x31abf3(0x198)](_0x31abf3(0x2d5))),process[_0x31abf3(0x1f8)](_0x31abf3(0x1a0),()=>tgBot[_0x31abf3(0x198)](_0x31abf3(0x1a0))),tgBot[_0x31abf3(0x270)]();}function disableTelegram(){const _0x47d95a=_0x138638;tgBot&&tgBot[_0x47d95a(0x198)]();}async function sendTelegram(_0x239df0,_0x868bfc,_0x1702dd){const _0x222c13=_0x138638;_0x1702dd={..._0x1702dd,'disable_web_page_preview':!![]};try{await tgBot[_0x222c13(0x1b5)][_0x222c13(0x201)](_0x239df0,_0x868bfc,_0x1702dd);}catch(_0x375b17){logger[_0x222c13(0x2b3)](_0x222c13(0x224),_0x375b17);}}async function sendTelegramBot(_0x3f31c5,_0x5b6790){const _0x2a198c=_0x138638;if(settings[_0x2a198c(0x2e1)]){if(settings['telegramEvents']==_0x2a198c(0x1e0)||(_0x5b6790['type']==_0x2a198c(0x32d)||_0x5b6790[_0x2a198c(0x2b6)]==_0x2a198c(0x1a8)||_0x5b6790[_0x2a198c(0x2b6)]==_0x2a198c(0x330))&&settings[_0x2a198c(0x297)]==_0x2a198c(0x1e6)||_0x5b6790[_0x2a198c(0x2b6)]==_0x2a198c(0x1fd)&&settings[_0x2a198c(0x297)]=='orders'){if(tgBot&&settings[_0x2a198c(0x23b)]){if(_0x5b6790['showname'])await sendTelegram(settings[_0x2a198c(0x23b)],_0x5b6790[_0x2a198c(0x1a4)]+'\x20>\x20'+_0x5b6790[_0x2a198c(0x346)]);else await sendTelegram(settings['telegramChatId'],_0x2a198c(0x206)+_0x3f31c5+'\x20>\x20'+_0x5b6790['event']);}}}}async function sendTelegramMsg(_0x5d2666,_0xa75548=_0x138638(0x320)){const _0x25cf9c=_0x138638;return settings[_0x25cf9c(0x2e1)]&&tgBot&&settings[_0x25cf9c(0x23b)]?(await sendTelegram(settings[_0x25cf9c(0x23b)],_0x5d2666,{'parse_mode':_0xa75548}),!![]):![];}function getDeviceWithIp(_0x3d025a){const _0x1f7c10=_0x138638;return devices[_0x1f7c10(0x23d)](_0x57b6d5=>_0x57b6d5['ip']===_0x3d025a);}async function temporaryAccess2FA(_0x1f359d,_0xc9839a){const _0x2d487c=_0x138638;let _0xf2125a=new Date(),_0x2ec97b=![];if(lastIpApproval){if(_0xf2125a-lastIpApproval<0x1388)_0x2ec97b=!![];}lastIpApproval=new Date();if(_0x2ec97b)return;if(tgBot&&settings[_0x2d487c(0x23b)]){const _0x39a8ac=uuidRandom();tmpStorage[_0x39a8ac]={'uuid':_0x1f359d,'externalip':_0xc9839a};const _0x1e5e58=Markup[_0x2d487c(0x310)]([Markup[_0x2d487c(0x2bc)]['callback'](_0x2d487c(0x2ed),'tempaccess_5_'+_0x39a8ac),Markup[_0x2d487c(0x2bc)][_0x2d487c(0x16d)](_0x2d487c(0x250),_0x2d487c(0x1b4)+_0x39a8ac),Markup[_0x2d487c(0x2bc)][_0x2d487c(0x16d)](_0x2d487c(0x277),'tempaccess_30_'+_0x39a8ac),Markup[_0x2d487c(0x2bc)]['callback'](_0x2d487c(0x15d),_0x2d487c(0x2aa)+_0x39a8ac)]);await sendTelegram(settings['telegramChatId'],_0x2d487c(0x1aa)+normalizeIP(_0xc9839a)[_0x2d487c(0x27d)]+'\x20?',_0x1e5e58),tgBot[_0x2d487c(0x229)](/tempaccess_(.+)_(.+)/,async _0x1fab1c=>{const _0x454410=_0x2d487c,_0x3735b0=_0x1fab1c[_0x454410(0x179)][0x1],_0x3eeb36=_0x1fab1c[_0x454410(0x179)][0x2],{uuid:_0x2c566a,externalip:_0x41eba4}=tmpStorage[_0x3eeb36];delete tmpStorage[_0x3eeb36],_0x1fab1c[_0x454410(0x2ba)](),devices[_0x2c566a][_0x454410(0x2be)]={'clientip':_0x41eba4,'timestamp':new Date()[_0x454410(0x2f2)](),'expiry':_0x3735b0},_0x3735b0!=_0x454410(0x15d)?(await sendTelegram(_0x1fab1c[_0x454410(0x305)]['id'],_0x454410(0x17d)+_0x3735b0+'\x20minutes',{'parse_mode':_0x454410(0x320)}),io['to'](_0x2c566a)['emit']('status',{'access':{'allow':![],'reason':_0x454410(0x1ec),'token':null}})):(await sendTelegram(_0x1fab1c[_0x454410(0x305)]['id'],_0x454410(0x2cb)),io['to'](_0x2c566a)[_0x454410(0x24f)](_0x454410(0x1ae),{'access':{'allow':![],'reason':_0x454410(0x1d5),'token':null}}));});}}async function loginAccess2FA(_0x2d73ef,_0x2020d3){const _0x325c2b=_0x138638;if(tgBot&&settings[_0x325c2b(0x23b)]){const _0x44549b=uuidRandom();tmpStorage[_0x44549b]={'uuid':_0x2d73ef,'externalip':_0x2020d3};const _0x36b61d=Markup[_0x325c2b(0x310)]([Markup[_0x325c2b(0x2bc)][_0x325c2b(0x16d)](_0x325c2b(0x24d),_0x325c2b(0x21a)+loginExpiry+'_'+_0x44549b),Markup[_0x325c2b(0x2bc)][_0x325c2b(0x16d)](_0x325c2b(0x15d),'login2fa_reject_'+_0x44549b)]);await sendTelegram(settings[_0x325c2b(0x23b)],_0x325c2b(0x175)+normalizeIP(_0x2020d3)[_0x325c2b(0x27d)]+'\x20?',_0x36b61d),tgBot[_0x325c2b(0x229)](/login2fa_(.+)_(.+)/,async _0xb452c=>{const _0x1ee930=_0x325c2b,_0x19fd50=_0xb452c[_0x1ee930(0x179)][0x1],_0x56c869=_0xb452c['match'][0x2],{uuid:_0x3601f9,externalip:_0x5ef49b}=tmpStorage[_0x56c869];delete tmpStorage[_0x56c869],_0xb452c[_0x1ee930(0x2ba)](),devices[_0x3601f9][_0x1ee930(0x215)]={'clientip':_0x5ef49b,'timestamp':new Date()[_0x1ee930(0x2f2)](),'expiry':_0x19fd50},_0x19fd50!=_0x1ee930(0x15d)?(await sendTelegram(_0xb452c[_0x1ee930(0x305)]['id'],_0x1ee930(0x1b2),{'parse_mode':_0x1ee930(0x320)}),io['to'](_0x3601f9)[_0x1ee930(0x24f)](_0x1ee930(0x1ae),{'access':{'allow':![],'reason':'reload','token':null}})):(await sendTelegram(_0xb452c['chat']['id'],_0x1ee930(0x24e)),io['to'](_0x3601f9)['emit'](_0x1ee930(0x1ae),{'access':{'allow':![],'reason':_0x1ee930(0x2fb),'token':null}}));});}}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x3a38dd=_0x138638;return dbConfig['get'](_0x3a38dd(0x288))['sortBy']('botID')[_0x3a38dd(0x1f9)]({'status':_0x3a38dd(0x26c)})[_0x3a38dd(0x1f1)]()||[];}function getDisabledBots(){const _0x3fb498=_0x138638;return dbConfig[_0x3fb498(0x163)](_0x3fb498(0x288))[_0x3fb498(0x2de)]('botID')[_0x3fb498(0x1f9)]({'status':'disabled'})[_0x3fb498(0x1f1)]()||[];}function getBotAttributes(_0x2ddff6){const _0xf6faa4=_0x138638;let _0x5dcbaa={};const _0x8d196=configpath+_0xf6faa4(0x2c8)+_0x2ddff6+_0xf6faa4(0x16a),_0xc90ab9=fs[_0xf6faa4(0x2d6)](_0x8d196);if(_0xc90ab9){const _0xcdea37=fs['readFileSync'](_0x8d196);try{const _0x1a9efe=JSON[_0xf6faa4(0x267)](_0xcdea37),_0x34f025=_0x1a9efe?_0x1a9efe[_0xf6faa4(0x2e5)][0x0][_0xf6faa4(0x1d0)]:![];_0x5dcbaa[_0xf6faa4(0x1a2)]=_0x34f025?_0xf6faa4(0x345):_0xf6faa4(0x1d4),_0x5dcbaa[_0xf6faa4(0x1a4)]=_0x1a9efe?_0x1a9efe[_0xf6faa4(0x2e5)][0x0][_0xf6faa4(0x1a4)]:_0xf6faa4(0x206)+_0x2ddff6;}catch(_0x5ded79){_0x5dcbaa['mode']=_0xf6faa4(0x1d4),_0x5dcbaa[_0xf6faa4(0x1a4)]=_0xf6faa4(0x206)+_0x2ddff6;}}else _0x5dcbaa[_0xf6faa4(0x1a2)]=_0xf6faa4(0x1d4),_0x5dcbaa[_0xf6faa4(0x1a4)]='Bot\x20'+_0x2ddff6;return _0x5dcbaa;}function getBotsWithMode(){const _0x103302=_0x138638,_0x54fd0c=dbConfig['get']('bots')[_0x103302(0x2de)](_0x103302(0x15a))['value']()||[];return _0x54fd0c[_0x103302(0x1e2)](_0x31c310=>{const _0x4d59b2=_0x103302;let _0x2e5ebb=getBotAttributes(_0x31c310[_0x4d59b2(0x15a)]);_0x31c310[_0x4d59b2(0x1a2)]=_0x2e5ebb['mode'];}),_0x54fd0c;}function getBotExchanges(){const _0x46c8a7=_0x138638;let _0x416307=[];const _0x3a5335=dbConfig[_0x46c8a7(0x163)](_0x46c8a7(0x288))[_0x46c8a7(0x2de)](_0x46c8a7(0x15a))['value']()||[];_0x3a5335[_0x46c8a7(0x1e2)](_0xc62846=>{const _0xa648a2=_0x46c8a7;if(_0xc62846[_0xa648a2(0x1ae)]==_0xa648a2(0x26c)){const _0x4972e1=configpath+_0xa648a2(0x2c8)+_0xc62846[_0xa648a2(0x15a)]+_0xa648a2(0x16a),_0x4bc77b=fs[_0xa648a2(0x2d6)](_0x4972e1);let _0x4f8e5e;if(_0x4bc77b){const _0x1608c9=fs[_0xa648a2(0x309)](_0x4972e1);try{const _0x3c03be=JSON[_0xa648a2(0x267)](_0x1608c9);_0x4f8e5e=_0x3c03be?_0x3c03be[_0xa648a2(0x2e5)][0x0]['exchange']:null;}catch(_0x2c0c62){}}if(_0x4f8e5e)_0x416307['push'](_0x4f8e5e);}});const _0x7d5b6d=[...new Set(_0x416307)][_0x46c8a7(0x359)]();return _0x7d5b6d;}async function initUser(){const _0x92eb6d=_0x138638;if(!settings[_0x92eb6d(0x2cf)]){const _0x4a7337=uuidRandom();mixpanel[_0x92eb6d(0x321)](_0x4a7337),updateSetting(_0x92eb6d(0x2cf),_0x4a7337);}}async function initSecure(){const _0x4ae97f=_0x138638;let _0x3ee04c=getSecure();if(!_0x3ee04c[_0x4ae97f(0x259)](_0x4ae97f(0x1ba))){let _0x53fa3f=await generateKeys();_0x3ee04c[_0x4ae97f(0x1d1)]=_0x53fa3f['publicKey'],_0x3ee04c[_0x4ae97f(0x1e3)]=_0x53fa3f[_0x4ae97f(0x1e3)],_0x3ee04c[_0x4ae97f(0x1ba)]=crypto[_0x4ae97f(0x318)](0x20)[_0x4ae97f(0x25f)](_0x4ae97f(0x24a));;storeSecure(_0x3ee04c);}}function getSettings(){const _0x18f1e1=_0x138638;return dbSettings[_0x18f1e1(0x163)]('settings')['value']()||{};}function _0x3f34(_0x25a575,_0x2182c5){const _0x42df2f=_0x5cc4();return _0x3f34=function(_0x284eb0,_0x4e9563){_0x284eb0=_0x284eb0-0x14b;let _0x5cc427=_0x42df2f[_0x284eb0];return _0x5cc427;},_0x3f34(_0x25a575,_0x2182c5);}function getSecure(){const _0x472c4b=_0x138638;return dbSecure['get'](_0x472c4b(0x34c))[_0x472c4b(0x1f1)]()||{};}function getBlacklist(){const _0x18be8e=_0x138638;return dbSecure[_0x18be8e(0x163)](_0x18be8e(0x213))[_0x18be8e(0x1f1)]()||[];}function broadcastToBots(_0x3b080f,_0x5e2c53){const _0x45535f=_0x138638;config[_0x45535f(0x1e2)](_0x160a9f=>{const _0x1c738e=_0x45535f;if(_0x160a9f[_0x1c738e(0x1ae)]==_0x1c738e(0x26c)&&_0x160a9f[_0x1c738e(0x1fc)]==_0x1c738e(0x158)||_0x160a9f[_0x1c738e(0x1ae)]==_0x1c738e(0x1ab)&&_0x160a9f[_0x1c738e(0x1fc)]==_0x1c738e(0x158)){if(pid[_0x160a9f[_0x1c738e(0x15a)]])pid[_0x160a9f[_0x1c738e(0x15a)]][_0x1c738e(0x1df)]({[_0x3b080f]:_0x5e2c53});}});}async function storeSettings(_0x27f54e,_0x9bb71e=![]){const _0xbe6b10=_0x138638;_0x27f54e={...settings,..._0x27f54e};if(_0x9bb71e&&_0x27f54e[_0xbe6b10(0x23e)]!='************'&&_0x27f54e[_0xbe6b10(0x23e)]!=_0xbe6b10(0x2ec)&&_0x27f54e['bbPassword']!=''){const _0x122c0d=decryptRSA(secure['privateKey'],_0x27f54e[_0xbe6b10(0x23e)])[_0xbe6b10(0x181)]('|@|')[0x0],_0x417aa9=bcrypt['hashSync'](_0x122c0d,saltRounds);_0x27f54e={..._0x27f54e,'bbPassword':_0x417aa9};}if(_0x9bb71e&&_0x27f54e[_0xbe6b10(0x217)]!=_0xbe6b10(0x2e2)&&_0x27f54e[_0xbe6b10(0x217)]!=_0xbe6b10(0x2ec)&&_0x27f54e[_0xbe6b10(0x217)]!=''){const _0x2492f8=decryptRSA(secure['privateKey'],_0x27f54e[_0xbe6b10(0x217)])[_0xbe6b10(0x181)]('|@|')[0x0];_0x27f54e={..._0x27f54e,'telegramToken':_0x2492f8};}if(_0x9bb71e&&_0x27f54e[_0xbe6b10(0x17b)]!=_0xbe6b10(0x2e2)&&_0x27f54e[_0xbe6b10(0x17b)]!=_0xbe6b10(0x2ec)&&_0x27f54e[_0xbe6b10(0x17b)]!=''){const _0x5bc2d2=decryptRSA(secure[_0xbe6b10(0x1e3)],_0x27f54e[_0xbe6b10(0x17b)])[_0xbe6b10(0x181)](_0xbe6b10(0x17c))[0x0];_0x27f54e={..._0x27f54e,'marketcapApi':_0x5bc2d2};}const _0x4f5d3a=_0x27f54e[_0xbe6b10(0x217)]!=_0xbe6b10(0x2e2)&&_0x27f54e['telegramToken']!=settings[_0xbe6b10(0x217)]||_0x27f54e['telegramUsername']!=settings[_0xbe6b10(0x27f)],_0x3e480e=_0x27f54e[_0xbe6b10(0x217)]==''||_0x27f54e['telegramUsername']=='',_0x50f460=_0x27f54e['marketcapApi']&&_0x27f54e[_0xbe6b10(0x17b)]!=_0xbe6b10(0x2e2)&&_0x27f54e[_0xbe6b10(0x17b)]!=settings[_0xbe6b10(0x17b)];_0x4f5d3a&&(_0x27f54e[_0xbe6b10(0x23b)]=null,_0x27f54e[_0xbe6b10(0x297)]='all');for(const [_0x1bf273,_0x587e71]of Object['entries'](_0x27f54e)){if(_0x1bf273==_0xbe6b10(0x217)&&_0x587e71=='************'){_0x27f54e['telegramToken']=settings['telegramToken'];continue;};if(_0x1bf273==_0xbe6b10(0x23e)&&_0x587e71==_0xbe6b10(0x2e2)){_0x27f54e[_0xbe6b10(0x23e)]=settings['bbPassword'];continue;};if(_0x1bf273=='marketcapApi'&&_0x587e71==_0xbe6b10(0x2e2)){_0x27f54e[_0xbe6b10(0x17b)]=settings[_0xbe6b10(0x17b)];continue;};dbSettings[_0xbe6b10(0x271)](_0xbe6b10(0x279)+_0x1bf273,_0x587e71)[_0xbe6b10(0x347)]();}settings=_0x27f54e,io['to'](_0xbe6b10(0x2d3))[_0xbe6b10(0x24f)](_0xbe6b10(0x22f),cleanSettings()),broadcastToBots(_0xbe6b10(0x308),settings[_0xbe6b10(0x308)]),broadcastToBots(_0xbe6b10(0x248),settings[_0xbe6b10(0x248)]),broadcastToBots('marketcapApi',settings['marketcapApi']);if(_0x4f5d3a&&!_0x3e480e)initTelegram();_0x4f5d3a&&_0x3e480e&&(updateSetting(_0xbe6b10(0x23b),null),disableTelegram()),getAllClients()[_0xbe6b10(0x1e2)](_0x5ddc84=>{const _0x204927=_0xbe6b10;getSocket(_0x5ddc84['id'])['emit'](_0x204927(0x1ae),{'access':{'allow':![],'reason':_0x204927(0x1ec),'token':null}});}),_0x50f460&&(await sleep(0xbb8),testMarketcapApi(_0x27f54e['marketcapApi']));}async function testMarketcapApi(_0x41bdfe){const _0x145b9d=_0x138638,_0x38cc25=[_0x145b9d(0x28c),_0x145b9d(0x1dd)];try{await axios[_0x145b9d(0x163)]('https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest',{'headers':{'X-CMC_PRO_API_KEY':_0x41bdfe},'params':{'symbol':_0x38cc25['toString']()}});}catch(_0x34bd00){_0x34bd00[_0x145b9d(0x25f)]()[_0x145b9d(0x1e8)](_0x145b9d(0x20b))?(io['to'](_0x145b9d(0x2d3))[_0x145b9d(0x24f)](_0x145b9d(0x18f),'CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager'),logger[_0x145b9d(0x219)](_0x145b9d(0x27e))):(io['to']('botmanager')[_0x145b9d(0x24f)](_0x145b9d(0x18f),_0x145b9d(0x34a)),logger[_0x145b9d(0x219)](_0x145b9d(0x34a)),logger[_0x145b9d(0x2b3)](_0x145b9d(0x340),_0x34bd00[_0x145b9d(0x25f)]()+_0x145b9d(0x1b0)+_0x34bd00[_0x145b9d(0x29b)]));return;}logger[_0x145b9d(0x2b3)]('CoinMarketCap\x20API\x20key\x20validated');}function updateSetting(_0x19b363,_0x423a32){const _0x56bb2d=_0x138638;dbSettings['set'](_0x56bb2d(0x279)+_0x19b363,_0x423a32)[_0x56bb2d(0x347)](),settings=getSettings(),io['to'](_0x56bb2d(0x2d3))[_0x56bb2d(0x24f)]('settings',cleanSettings());}function storeSecure(_0x13a4c9){const _0x8b6894=_0x138638;dbSecure['get'](_0x8b6894(0x34c))[_0x8b6894(0x2cd)](_0x13a4c9)[_0x8b6894(0x347)](),secure=_0x13a4c9;}function addBlacklist(_0x5c8264){const _0x121151=_0x138638;cleanBlacklist();let _0x474789;devices[_0x5c8264][_0x121151(0x2be)]?_0x474789=Math[_0x121151(0x1b7)](devices[_0x5c8264][_0x121151(0x2be)]['expiry'],loginExpiry):_0x474789=loginExpiry,dbSecure[_0x121151(0x163)]('blacklist')[_0x121151(0x2cd)]({'expiry':new Date()[_0x121151(0x2f2)]()+_0x474789*0x3c*0x3e8,'token':devices[_0x5c8264]['access'][_0x121151(0x24c)]})[_0x121151(0x347)](),blacklist=dbSecure[_0x121151(0x163)](_0x121151(0x213))['value']();}function cleanBlacklist(){const _0x53fbe5=_0x138638;let _0x1f85f7=dbSecure[_0x53fbe5(0x163)](_0x53fbe5(0x213))[_0x53fbe5(0x26f)]()[_0x53fbe5(0x1f1)](),_0x13c5eb=new Date()[_0x53fbe5(0x2f2)]();_0x1f85f7[_0x53fbe5(0x1e2)](_0x769619=>{const _0x30590a=_0x53fbe5;_0x769619[_0x30590a(0x273)]<_0x13c5eb&&dbSecure[_0x30590a(0x163)](_0x30590a(0x213))[_0x30590a(0x177)]({'expiry':_0x769619[_0x30590a(0x273)]})[_0x30590a(0x347)]();});}function initStates(){let _0x38beba=getConfiguration();_0x38beba['forEach'](_0x3bb9d6=>{const _0x50364d=_0x3f34;_0x3bb9d6[_0x50364d(0x1fc)]='stopped';}),storeConfiguration(_0x38beba);}async function generateKeys(){const _0x47ab3a=_0x138638,_0x5a540e=forge[_0x47ab3a(0x1f2)][_0x47ab3a(0x2af)]['generateKeyPair']({'bits':0x1000,'e':0x10001}),_0x20fa07=forge['pki'][_0x47ab3a(0x31c)](_0x5a540e[_0x47ab3a(0x1e3)]),_0xd8272d=forge[_0x47ab3a(0x1f2)][_0x47ab3a(0x2f0)](_0x5a540e[_0x47ab3a(0x1d1)]);return{'privateKey':_0x20fa07,'publicKey':_0xd8272d};}async function oneTimeMigration(){const _0xc3be14=_0x138638;let _0x125b58=getSettings(),_0x2e9585=![];!_0x125b58[_0xc3be14(0x259)](_0xc3be14(0x30c))&&(_0x125b58[_0xc3be14(0x30c)]=0x0,_0x2e9585=!![]);!_0x125b58[_0xc3be14(0x259)]('lastmsgemitted')&&(_0x125b58['lastmsgemitted']=0x0,_0x2e9585=!![]);!_0x125b58[_0xc3be14(0x259)]('latestversion')&&(_0x125b58[_0xc3be14(0x231)]=_0xc3be14(0x2eb),_0x2e9585=!![]);!_0x125b58[_0xc3be14(0x259)](_0xc3be14(0x248))&&(_0x125b58['onepagemode']=![],_0x2e9585=!![]);!_0x125b58[_0xc3be14(0x259)](_0xc3be14(0x17b))&&(_0x125b58[_0xc3be14(0x17b)]='',_0x2e9585=!![]);if(_0x2e9585)storeSettings(_0x125b58);try{fs['readdirSync'](configbackuppath,{'withFileTypes':!![]})['forEach'](_0x562200=>{const _0x3eed1f=_0xc3be14;if(!_0x562200[_0x3eed1f(0x22a)]()){if(!_0x562200[_0x3eed1f(0x1fa)]['startsWith'](_0x3eed1f(0x187)))fs[_0x3eed1f(0x168)](configbackuppath+_0x562200[_0x3eed1f(0x1fa)]);}else fs[_0x3eed1f(0x162)](configbackuppath+_0x562200['name'],{'recursive':!![]});});}catch(_0x580f02){logger[_0xc3be14(0x2b3)](_0xc3be14(0x169),_0x580f02);}}function storeConfiguration(_0x3a924c){const _0x2d48a5=_0x138638;dbConfig[_0x2d48a5(0x163)](_0x2d48a5(0x288))[_0x2d48a5(0x177)]()[_0x2d48a5(0x347)](),dbConfig[_0x2d48a5(0x163)]('bots')[_0x2d48a5(0x2cd)](..._0x3a924c)[_0x2d48a5(0x347)](),config=_0x3a924c;}async function resetPassword(){const _0x4dfcd0=_0x138638;if(tgBot&&settings['telegramChatId']){const _0x30d440=Markup['inlineKeyboard']([Markup[_0x4dfcd0(0x2bc)][_0x4dfcd0(0x16d)](_0x4dfcd0(0x1ca),_0x4dfcd0(0x299)),Markup[_0x4dfcd0(0x2bc)][_0x4dfcd0(0x16d)]('no',_0x4dfcd0(0x227))]);await sendTelegram(settings[_0x4dfcd0(0x23b)],_0x4dfcd0(0x182),_0x30d440),tgBot['action'](/resetpw_(.+)/,async _0x5083f4=>{const _0x204e14=_0x4dfcd0,_0x2fa122=_0x5083f4['match'][0x1];_0x5083f4['editMessageReplyMarkup']();if(_0x2fa122!='no'){const _0x574b56=0xf,_0xdc3328=_0x204e14(0x2d7),_0x551a45=Array[_0x204e14(0x167)](crypto['randomFillSync'](new Uint32Array(_0x574b56)))[_0x204e14(0x251)](_0x292069=>_0xdc3328[_0x292069%_0xdc3328['length']])['join'](''),_0x2d68e5=bcrypt[_0x204e14(0x1f5)](_0x551a45,saltRounds);storeSettings({'bbPassword':_0x2d68e5}),await sendTelegram(_0x5083f4[_0x204e14(0x305)]['id'],_0x204e14(0x2c5)+_0x551a45,{'parse_mode':_0x204e14(0x320)});}else await sendTelegram(_0x5083f4[_0x204e14(0x305)]['id'],_0x204e14(0x240));});}}async function confirmRestore(_0x2125c5,_0x23819c){const _0x52cea2=_0x138638;io['to'](_0x52cea2(0x2d3))['emit'](_0x52cea2(0x18f),_0x52cea2(0x15e),'success');if(tgBot&&settings[_0x52cea2(0x23b)]){const _0x416147=uuidRandom();tmpStorage[_0x416147]={'path':_0x2125c5,'filename':_0x23819c};const _0x45f159=Markup['inlineKeyboard']([Markup[_0x52cea2(0x2bc)]['callback']('yes',_0x52cea2(0x20d)+_0x416147),Markup[_0x52cea2(0x2bc)][_0x52cea2(0x16d)]('no',_0x52cea2(0x188)+_0x416147)]);await sendTelegram(settings[_0x52cea2(0x23b)],_0x52cea2(0x2d1),_0x45f159),tgBot[_0x52cea2(0x229)](/restore_(.+)_(.+)/,async _0x42f63d=>{const _0xa73697=_0x52cea2,_0x3e85db=_0x42f63d[_0xa73697(0x179)][0x1],_0x16e546=_0x42f63d['match'][0x2],{path:_0x2aa730,filename:_0x469a5d}=tmpStorage[_0x16e546];delete tmpStorage[_0x16e546],_0x42f63d[_0xa73697(0x2ba)](),_0x3e85db==_0xa73697(0x1ca)?(logger[_0xa73697(0x2b3)]('Restore\x20process\x20confirmed'),await sendTelegram(_0x42f63d[_0xa73697(0x305)]['id'],_0xa73697(0x303),{'parse_mode':_0xa73697(0x320)}),unzipFile(_0x2aa730,_0x469a5d)):(logger[_0xa73697(0x2b3)](_0xa73697(0x304)),await sendTelegram(_0x42f63d[_0xa73697(0x305)]['id'],_0xa73697(0x304)));});}}function getServerTime(){const _0x901a68=_0x138638,_0x1d354b=new Date();return _0x1d354b[_0x901a68(0x2e8)]()+'/'+(_0x1d354b[_0x901a68(0x343)]()+0x1)['toString']()[_0x901a68(0x155)](0x2,'0')+'/'+_0x1d354b['getDate']()[_0x901a68(0x25f)]()['padStart'](0x2,'0')+'\x20'+_0x1d354b[_0x901a68(0x20e)]()[_0x901a68(0x25f)]()[_0x901a68(0x155)](0x2,'0')+':'+_0x1d354b[_0x901a68(0x220)]()[_0x901a68(0x25f)]()[_0x901a68(0x155)](0x2,'0')+':'+_0x1d354b[_0x901a68(0x33b)]()[_0x901a68(0x25f)]()[_0x901a68(0x155)](0x2,'0');}function getTimeStamp(){const _0x3f9918=_0x138638,_0x3ecbaa=shiftedTime();return _0x3ecbaa['getFullYear']()+'/'+(_0x3ecbaa[_0x3f9918(0x343)]()+0x1)['toString']()[_0x3f9918(0x155)](0x2,'0')+'/'+_0x3ecbaa[_0x3f9918(0x2ef)]()[_0x3f9918(0x25f)]()[_0x3f9918(0x155)](0x2,'0')+'\x20'+_0x3ecbaa[_0x3f9918(0x20e)]()[_0x3f9918(0x25f)]()[_0x3f9918(0x155)](0x2,'0')+':'+_0x3ecbaa[_0x3f9918(0x220)]()['toString']()[_0x3f9918(0x155)](0x2,'0')+':'+_0x3ecbaa[_0x3f9918(0x33b)]()['toString']()[_0x3f9918(0x155)](0x2,'0');}function getCleanTimeStamp(){const _0x413b40=_0x138638,_0x542e8a=shiftedTime();return _0x542e8a[_0x413b40(0x2e8)]()+(_0x542e8a[_0x413b40(0x343)]()+0x1)[_0x413b40(0x25f)]()[_0x413b40(0x155)](0x2,'0')+_0x542e8a['getDate']()[_0x413b40(0x25f)]()[_0x413b40(0x155)](0x2,'0')+'-'+_0x542e8a[_0x413b40(0x20e)]()[_0x413b40(0x25f)]()[_0x413b40(0x155)](0x2,'0')+_0x542e8a[_0x413b40(0x220)]()[_0x413b40(0x25f)]()[_0x413b40(0x155)](0x2,'0')+_0x542e8a[_0x413b40(0x33b)]()[_0x413b40(0x25f)]()[_0x413b40(0x155)](0x2,'0');}function shiftedTime(){const _0x1ebc00=_0x138638,_0x303ad1=new Date();let _0x283628=_0x303ad1;if(settings[_0x1ebc00(0x308)]&&settings[_0x1ebc00(0x308)]!==0x0)_0x283628=fns['add'](_0x303ad1,{'hours':settings[_0x1ebc00(0x308)]});return _0x283628;}async function startScheduler(){const _0x1fd410=_0x138638,_0x5669d1=new Date()[_0x1fd410(0x19a)](),_0x34fb6b=shiftedTime()[_0x1fd410(0x20e)]();_0x34fb6b==0x4&&backupConfigFiles(),_0x34fb6b==0x0&&(rotateLogFiles(),logger[_0x1fd410(0x2b3)](_0x1fd410(0x173)),logger['debug'](_0x1fd410(0x186)+serverversion+'#RES#\x20'+(environment==_0x1fd410(0x1db)?'(staging)':'')),logger[_0x1fd410(0x2b3)]('--------------------------------------')),_0x5669d1%0x6==0x0&&triggerAnalytics(),_0x5669d1%0x6==0x0&&getMessages(),await sleep(schedulerInterval),startScheduler();}async function restoreBackupFile(_0xc868df){const _0x720b17=_0x138638;logger[_0x720b17(0x2b3)](_0x720b17(0x32c)+_0xc868df);const _0xfb0876=getBotsWithMode();_0xfb0876['length']>0x0?confirmRestore(configbackuppath,_0xc868df):unzipFile(configbackuppath,_0xc868df);}async function getBackupFiles(_0x3c937b=null){const _0x2a3f0d=_0x138638;let _0x1c9611=[],_0x1cf10c=fs[_0x2a3f0d(0x1b1)](configbackuppath,{'withFileTypes':!![]});_0x1cf10c[_0x2a3f0d(0x359)]((_0x44189d,_0x4d369a)=>_0x44189d[_0x2a3f0d(0x1fa)]<_0x4d369a['name']?0x1:_0x4d369a['name']<_0x44189d['name']?-0x1:0x0),_0x1cf10c[_0x2a3f0d(0x1e2)](_0xba43ca=>{const _0x59a547=_0x2a3f0d;if(!_0xba43ca['isDirectory']()&&_0xba43ca[_0x59a547(0x1fa)][_0x59a547(0x16f)]('backup-full@')&&_0xba43ca['name'][_0x59a547(0x23a)](_0x59a547(0x357))){const _0x87dedf=formatDate(fs['statSync'](configbackuppath+_0xba43ca[_0x59a547(0x1fa)])[_0x59a547(0x2ad)]);_0x1c9611[_0x59a547(0x2cd)]({'name':_0xba43ca[_0x59a547(0x1fa)],'mtime':_0x87dedf});}});if(_0x3c937b)io['to'](_0x3c937b)[_0x2a3f0d(0x24f)](_0x2a3f0d(0x190),_0x1c9611);else return _0x1c9611;}function _0x5cc4(){const _0x47a434=['config','number','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','simple','temporary\x20access\x20not\x20allowed','toString','allow','auth','Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file','/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a','<b>Balance\x20Bot\x20Status:</b>\x0a','reset-history','/:bot/support','parse','2FA','/:bot/performance','Your\x20installation\x20is\x20already\x20up\x20to\x20date','config/','enabled','/on\x20-\x20start\x20bot(s)\x0a','546245ZpxPHD','cloneDeep','launch','set','exec','expiry','#RES#','jszip','handshake','30\x20min','All','settings.','catch','listen','verify','show','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','telegramUsername','kind','clients','message','get-messages','\x20|\x20','reply','6b67f3d61ee94b8f5c80b4affef4c4d9','IPv4','bots','/restart\x20-\x20restart\x20bot(s)\x0a','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)','Starting\x20Balance\x20Bot\x20reinstallation','BCT','Notifications\x20disabled\x0a','restart','https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master','sign','tkn','disable','Alerts','update_yes','keys','Yes','telegramEvents','Unauthorized\x20attempt\x20to\x20delete\x20alerts','resetpw_yes','constructor','code','bbUsername','1230904OoPfcY','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?','::ffff:127.0.0.1','updatebotmanager','All\x20bots','restart_','mkdirSync','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run','Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files','file','get-starting-balances','create','tempaccess_reject_','config_all','environment','mtime','NTBA_FIX_319','rsa','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','::1','lowdb','debug','apiSecret','storeHeadless','type','/backup\x20-\x20receive\x20backup\x20files\x0a','deleteHistoryAlerts','login\x20not\x20required','editMessageReplyMarkup','node','button','\x20files\x20over\x20Telegram:','telegramIpApproval','storeFiat','cancel-loading','logs/','#RES#\x20','telegraf',',\x20must\x20be\x20a\x204\x20digit\x20number','Password\x20has\x20been\x20reset\x20to:\x20','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','2FA\x20login\x20required','bot-','login','reason','Temporary\x20access\x20rejected','copyFileSync','push',':\x20Bot\x20Mgr\x20>\x20Telegram\x20error\x20occured','userid','private','Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)','Starting\x20(','botmanager','RSA-OAEP','SIGINT','existsSync','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','resetHistory','statSync','Invalid\x20IP\x20address','confirm-message','username','/:bot','sortBy','graphql-request','/disable\x20-\x20disable\x20notifications\x0a','telegramEnabled','************','kill','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','bot','apply','apiPassword','getFullYear','Idling\x20(','601556HSeRUK','0.0.0','***','5\x20min','1528140PPVFLG','getDate','publicKeyToPem','Bot\x20Mgr\x20>\x20','getTime','isValid','Unauthorized\x20attempt\x20to\x20get\x20messages','ipv6','sockets','login\x20token\x20generated','lowdb/adapters/FileSync','Logged\x20in\x20user\x20...','writeFileSync','2FA\x20login\x20rejected','download','access','Unauthorized\x20attempt\x20to\x20delete\x20bot','title','bb-secure.json','express','delete-alerts','Restoring\x20bot(s)\x20from\x20backup','Restore\x20process\x20aborted','chat','sendPortfolioTelegram','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','timeshift','readFileSync','/metrics\x20-\x20show\x20bot\x20performance\x0a','toIPv4Address','lastmsgtelegram','=>\x20Go\x20to\x20#CYA#http://','encryptedUuid','join','inlineKeyboard','Telegraf\x20error:','uncaughtException','toggle-bot-mode','inherit','-events.json','family','jsonwebtoken','randomBytes','Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled','store','logout','privateKeyToPem','DEFLATE','reinstall_no','logged\x20out','HTML','alias','build2','names','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','<b>Telegram\x20Bot\x20Status:</b>\x0a','Restarting\x20Bot\x20','Notifications\x20enabled\x0a','conn','stopped','messages','headers','Restore\x20backup\x20file\x20','error','Ok,\x20will\x20send\x20order\x20notifications\x20only','format','success','update','sendFile','address','lastmsgemitted','Unauthorized\x20attempt\x20to\x20add\x20bot','loginRequired','replace','Invalid\x20authentication\x20token\x20(2)','init','restore-backup-file','getSeconds','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','ipaddr.js','telegrammsg','Error\x20details:','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','Starting\x20new\x20bot\x20|\x20Bot\x20','getMonth','bb-config.json','auto','event','write','defaults','off','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20see\x20logs\x20for\x20details','/update\x20-\x20update\x20Balance\x20Bot\x0a','secure','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run','isIPv4MappedAddress','/:bot/history','crypto','Notifications\x20enabled','Starting\x20Balance\x20Bot\x20update','log','Error\x20while\x20deleting\x20config\x20files:\x20','.zip','backup-full.zip','sort','File\x20uploaded','output-003.log','Unauthorized\x20attempt\x20to\x20update\x20settings','Unauthorized\x20attempt\x20to\x20download\x20','internal','off_','\x20mode','whitelistEnabled','placeOrder','getStartingBalances','padStart','Notifications\x20disabled','child_process','running','update-bot','botID','Notifications\x20types:\x20','length','reject','Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot','uuid','getPortfolio','output-002.log','rmSync','get','temporary\x20token\x20generated','add-bot','uuid-random','from','unlinkSync','Error\x20removing\x20old\x20backup\x20files:','-config.json','remoteAddress','address\x20already\x20in\x20use','callback','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','startsWith',')\x20\x20\x20|\x20Bot\x20','disabled','stringify','--------------------------------------','host','Allow\x20login\x20from\x20IP\x20address\x20','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','remove','test','match','slice','marketcapApi','|@|','Access\x20enabled\x20for\x20','127.0.0.1','get-logs','Unauthorized\x20attempt\x20to\x20confirm\x20message','split','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','Disabled\x20Bot\x20','portfolio_','Running\x20#RED#Balance\x20Bot\x20v','backup-full@','restore_no_','version.json','access\x20timeout','privateKeyFromPem','track','No\x20bots\x20running\x20right\x20now','pidRefreshToken','notification','backup-files','\x20to\x20','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','bbvReceive','help','argv','Unauthorized\x20attempt\x20to\x20update\x20bot','update-bb','stop','command','getUTCHours','Unauthorized\x20attempt\x20to\x20log\x20out','backup','reinstall-bb','login\x20required','577300TxYiUi','SIGTERM','\x1b[31m','mode','-----------------------------------------------------------------------------------','botname','whitelist','Failed\x20to\x20download\x20','2EpCAde','warning','[ip-address]','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20','new','compareSync','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','status','initclient','\x20-\x20','readdirSync','Login\x20accepted','portfolio','tempaccess_15_','telegram','temp/','max','Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U','/start','secret','config_orders','Logged\x20out\x20user\x20...','replyWithDocument','socket.io','toggle','Invalid\x20authentication\x20token\x20(1)','login\x20token\x20valid','createServer','index.html','/download/:type','update_no','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','bb-settings.json','/logs\x20-\x20receive\x20log\x20files\x0a','Starting\x20#RED#Balance\x20Bot\x20v','yes','store-settings','backup/','started',')\x20|\x20Bot\x20','range','headless','publicKey','store-fiat','timestamp','manual','temporary\x20access\x20rejected','async','get-portfolio','Error\x20sending\x20','819096PoVYTV','\x1b[34m','staging','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','ETH','server','send','all','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?','forEach','privateKey',':\x20Bot\x20Mgr\x20>\x20','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','alerts','temporaryAccessAllowed','includes','\x1b[0m','bot.js','-performance.json','reload','\x20|\x20client:\x20...','2FA\x20required','fork','reinstall_yes','value','pki','binary','/status\x20-\x20show\x20bot(s)\x20status\x0a','hashSync','text','post','once','filter','name','show-config','live','order','pidExpireLogin','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','Markdown','sendMessage','(((.+)+)+)+$','output-001.log','Setting\x20access:\x20','assign','Bot\x20','sha256','https://api.ipify.org?format=json','bcryptjs','User\x20has\x20been\x20validated','status\x20code\x20401','versions','restore_yes_','getHours','files','socket','search','sendMetricsTelegram','blacklist','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','telegram2FaApproval','password','telegramToken','build','full','login2fa_','2FA\x20login\x20token\x20generated','f2aRequired','decrypt','metrics_','toggleBotMode','getMinutes','reinstall','278398sxbcUT','function','Telegram\x20error:','Unauthorized\x20attempt\x20to\x20get\x20portfolio','zip/','resetpw_no','node-forge','action','isDirectory','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','disconnect','orders','then','settings','-results.json','latestversion','new-disabled','min','size','\x1b[33m','express-fileupload','invalid\x20credentials','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)','exit','endsWith','telegramChatId','http','find','bbPassword','/output-000.log','Password\x20reset\x20rejected','All\x20bots\x20running\x20right\x20now','clientip','port','1000','logs','apiKey','#RES#\x20if\x20running\x20locally\x0a','onepagemode','output-000.log','hex','/off\x20-\x20stop\x20bot(s)\x0a','token','accept','Login\x20rejected','emit','15\x20min','map','ipc','\x20|\x20user:\x20...','use','Backup\x20file\x20unzipped\x20and\x20stored','string','decode64','bbvNew','hasOwnProperty'];_0x5cc4=function(){return _0x47a434;};return _0x5cc4();}async function backupConfigFiles(){const _0x5637a3=_0x138638;await zipFiles('backup-full');const _0x4bf11b=getCleanTimeStamp();fs[_0x5637a3(0x2cc)](zippath+_0x5637a3(0x358),configbackuppath+(_0x5637a3(0x187)+_0x4bf11b+_0x5637a3(0x357)));let _0x49208f=fs['readdirSync'](configbackuppath,{'withFileTypes':!![]});_0x49208f[_0x5637a3(0x359)]((_0x4db336,_0x193864)=>_0x4db336[_0x5637a3(0x1fa)]<_0x193864[_0x5637a3(0x1fa)]?0x1:_0x193864['name']<_0x4db336['name']?-0x1:0x0),_0x49208f[_0x5637a3(0x15c)]>maxBackups&&fs['unlinkSync'](configbackuppath+_0x49208f[_0x49208f['length']-0x1][_0x5637a3(0x1fa)]);}function rotateLogFiles(){const _0x531527=_0x138638,_0x30c465=fs[_0x531527(0x2d9)](logspath+_0x531527(0x249)),_0x5294e2=_0x30c465[_0x531527(0x234)]/0x400;if(_0x5294e2>0x64){let _0x5707d4=fs['readdirSync'](logspath,{'withFileTypes':!![]});_0x5707d4[_0x531527(0x359)]((_0x535318,_0x2dbd81)=>_0x535318[_0x531527(0x1fa)]<_0x2dbd81['name']?0x1:_0x2dbd81[_0x531527(0x1fa)]<_0x535318[_0x531527(0x1fa)]?-0x1:0x0),_0x5707d4[_0x531527(0x1e2)](_0x221a6d=>{const _0x2e974c=_0x531527;if(_0x221a6d[_0x2e974c(0x1fa)]=='output-002.log')fs[_0x2e974c(0x2cc)](logspath+_0x221a6d[_0x2e974c(0x1fa)],logspath+_0x2e974c(0x14c));if(_0x221a6d[_0x2e974c(0x1fa)]==_0x2e974c(0x203))fs[_0x2e974c(0x2cc)](logspath+_0x221a6d[_0x2e974c(0x1fa)],logspath+_0x2e974c(0x161));_0x221a6d[_0x2e974c(0x1fa)]==_0x2e974c(0x249)&&(fs['copyFileSync'](logspath+_0x221a6d[_0x2e974c(0x1fa)],logspath+_0x2e974c(0x203)),fs[_0x2e974c(0x2fa)](logspath+_0x221a6d['name'],''));});}}async function zipFiles(_0x4dfa43){const _0x92c524=_0x138638;let _0x3b179c;if(_0x4dfa43==_0x92c524(0x245))_0x3b179c=logspath;if(_0x4dfa43==_0x92c524(0x19c))_0x3b179c=configpath;if(_0x4dfa43=='backup-full')_0x3b179c=configpath;let _0x32cc44=fs[_0x92c524(0x1b1)](_0x3b179c,{'withFileTypes':!![]});const _0x33493d=new JSZip();_0x32cc44[_0x92c524(0x1e2)](_0x4cb210=>{const _0x53f413=_0x92c524;if(!_0x4cb210[_0x53f413(0x22a)]()){let _0x244871=fs[_0x53f413(0x309)](_0x3b179c+_0x4cb210[_0x53f413(0x1fa)]);if(_0x4dfa43=='backup'){const _0x394a4a=/^bot-[0-9]{3}-config.json$/,_0x5ecdda=_0x394a4a['test'](_0x4cb210[_0x53f413(0x1fa)]);if(_0x5ecdda){const _0x24e042=JSON['parse'](_0x244871);if(_0x24e042['bot'][0x0]){_0x24e042[_0x53f413(0x2e5)][0x0][_0x53f413(0x246)]=_0x53f413(0x2ec),_0x24e042[_0x53f413(0x2e5)][0x0][_0x53f413(0x2b4)]=_0x53f413(0x2ec);if(_0x24e042[_0x53f413(0x2e5)][0x0][_0x53f413(0x2e7)])_0x24e042['bot'][0x0][_0x53f413(0x2e7)]=_0x53f413(0x2ec);}_0x244871=JSON[_0x53f413(0x172)](_0x24e042,null,0x2);}if(_0x4cb210[_0x53f413(0x1fa)]==_0x53f413(0x1c7)){const _0x29977c=JSON[_0x53f413(0x267)](_0x244871);if(_0x29977c[_0x53f413(0x22f)]['loginRequired'])_0x29977c['settings'][_0x53f413(0x336)]=![];if(_0x29977c[_0x53f413(0x22f)][_0x53f413(0x23e)])_0x29977c[_0x53f413(0x22f)]['bbPassword']=_0x53f413(0x2ec);if(_0x29977c['settings']['telegramToken'])_0x29977c['settings'][_0x53f413(0x217)]=_0x53f413(0x2ec);if(_0x29977c[_0x53f413(0x22f)]['telegramChatId'])_0x29977c['settings'][_0x53f413(0x23b)]=null;if(_0x29977c[_0x53f413(0x22f)][_0x53f413(0x17b)])_0x29977c[_0x53f413(0x22f)][_0x53f413(0x17b)]='***';_0x244871=JSON['stringify'](_0x29977c,null,0x2);}if(_0x4cb210[_0x53f413(0x1fa)]!=_0x53f413(0x300))_0x33493d[_0x53f413(0x2a7)](_0x4cb210[_0x53f413(0x1fa)],_0x244871);}else _0x33493d[_0x53f413(0x2a7)](_0x4cb210[_0x53f413(0x1fa)],_0x244871);}});const _0x132d1f=await _0x33493d['generateAsync']({'type':'string','base64':![],'compression':_0x92c524(0x31d)});fs['writeFileSync'](zippath+(_0x4dfa43+_0x92c524(0x357)),_0x132d1f,_0x92c524(0x1f3));}async function unzipFile(_0x216ca6,_0x29b06d){const _0x4fd122=_0x138638;fs[_0x4fd122(0x1b1)](configpath,{'withFileTypes':!![]})[_0x4fd122(0x1e2)](_0x89dfc=>{const _0x3bb022=_0x4fd122;if(!_0x89dfc[_0x3bb022(0x22a)]())fs['rmSync'](configpath+_0x89dfc[_0x3bb022(0x1fa)]);});const _0x1206b4=fs[_0x4fd122(0x309)](_0x216ca6+_0x29b06d,_0x4fd122(0x1f3)),_0x2fa83e=await JSZip['loadAsync'](_0x1206b4,{'base64':![],'checkCRC32':!![]});for(const _0x43b269 of Object[_0x4fd122(0x295)](_0x2fa83e[_0x4fd122(0x20f)])){const _0x5a84ba=_0x2fa83e['files'][_0x43b269],_0x2d104d=await _0x5a84ba[_0x4fd122(0x1d6)]('string');fs[_0x4fd122(0x2fa)](configpath+_0x5a84ba[_0x4fd122(0x1fa)],_0x2d104d);}fs[_0x4fd122(0x1b1)](temppath,{'withFileTypes':!![]})['forEach'](_0x107360=>{const _0x457f6e=_0x4fd122;if(!_0x107360[_0x457f6e(0x22a)]())fs['rmSync'](temppath+_0x107360['name']);}),logger[_0x4fd122(0x2b3)](_0x4fd122(0x255)),process[_0x4fd122(0x1df)]({'restore':!![]},_0x1b72d2=>{});}async function getPublicIp(){const _0x563b1b=_0x138638;try{const _0xbee52c=await axios['get'](_0x563b1b(0x208));publicip=_0xbee52c['data']['ip'];}catch(_0x4abc74){}}async function triggerAnalytics(){const _0x43caf4=_0x138638;if(!publicip)await getPublicIp();const _0x3fd048=getBotsWithMode();let _0x2a8959=0x0;_0x3fd048['forEach'](_0x58a112=>{const _0x39287e=_0x3f34;if(_0x58a112[_0x39287e(0x1ae)]===_0x39287e(0x26c))_0x2a8959++;});const _0x125ffc=getBotExchanges();mixpanel[_0x43caf4(0x18c)]('Server',{'distinct_id':settings[_0x43caf4(0x2cf)],'ip':publicip,'version':serverversion,'numbots':_0x3fd048[_0x43caf4(0x15c)],'numbotsenabled':_0x2a8959,'exchanges':_0x125ffc,'environment':environment});}async function getMessages(){const _0x27e31e=_0x138638,_0xc9709=_0x27e31e(0x28f),_0x44dcbb=new GraphQLClient(_0xc9709),_0x349d3f={'authorization':_0x27e31e(0x1b8)},_0xdeb965=serverversion[_0x27e31e(0x181)]('.'),_0x5f4716=_0xdeb965[0x0]+'.'+_0xdeb965[0x1],_0x511dec=Math[_0x27e31e(0x233)](settings[_0x27e31e(0x30c)],settings[_0x27e31e(0x334)]),_0x471243={'last':parseInt(_0x511dec),'bbm':_0x5f4716},_0x2d2bbb=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x12d2c6;try{_0x12d2c6=await _0x44dcbb['request'](_0x2d2bbb,_0x471243,_0x349d3f);}catch(_0x191fa1){}if(_0x12d2c6&&_0x12d2c6[_0x27e31e(0x32a)]){let _0x5cd0e2=settings[_0x27e31e(0x30c)],_0x68edba=settings[_0x27e31e(0x30c)];newMessages=[];for(const _0x49f6ff of _0x12d2c6['messages']){newMessages[_0x27e31e(0x2cd)](_0x49f6ff);let _0xfa5cdb=![];_0x49f6ff[_0x27e31e(0x258)]&&(updateSetting(_0x27e31e(0x231),_0x49f6ff[_0x27e31e(0x258)]),_0xfa5cdb=isNewerVersion(serverversion,_0x49f6ff[_0x27e31e(0x258)])||serverversion==_0x49f6ff['bbvNew']);if(!_0xfa5cdb&&_0x49f6ff[_0x27e31e(0x25b)]>_0x5cd0e2){if(_0x49f6ff[_0x27e31e(0x193)]==='any'||serverversion[_0x27e31e(0x16f)](_0x49f6ff[_0x27e31e(0x193)])){let _0x22d36a=''+_0x49f6ff[_0x27e31e(0x2ff)]+'\x0a\x0a'+_0x49f6ff[_0x27e31e(0x282)];const _0x18abf3=await sendTelegramMsg(toTelegramMarkdown(_0x22d36a),_0x27e31e(0x200));_0x5cd0e2=_0x49f6ff['number'];}}_0x68edba=_0x49f6ff['number'];}updateAvailable=isNewerVersion(settings[_0x27e31e(0x231)],serverversion),updateSetting(_0x27e31e(0x30c),_0x68edba),emitMessages();}}function emitMessages(){const _0x7ddcef=_0x138638,_0x332278=settings[_0x7ddcef(0x334)];let _0x481e37=[];newMessages[_0x7ddcef(0x1e2)](_0x316704=>{const _0x220872=_0x7ddcef;_0x316704[_0x220872(0x25b)]>_0x332278&&_0x481e37[_0x220872(0x2cd)](_0x316704);}),_0x481e37['length']>0x0&&getAllClients()[_0x7ddcef(0x1e2)](_0x411ea2=>{const _0x2df9f2=_0x7ddcef;getSocket(_0x411ea2['id'])['emit'](_0x2df9f2(0x282),_0x481e37);});}function confirmMessage(_0x30e156){const _0x13ab51=_0x138638;updateSetting(_0x13ab51(0x334),Number(_0x30e156));}function isNewerVersion(_0x13e152,_0x7144cd){const _0x11c5f1=_0x138638,_0x4b5881=_0x7144cd[_0x11c5f1(0x181)]('.'),_0x32c93e=_0x13e152[_0x11c5f1(0x181)]('.');for(var _0xda316=0x0;_0xda316<_0x32c93e[_0x11c5f1(0x15c)];_0xda316++){const _0x3a4743=~~_0x32c93e[_0xda316],_0xa024c6=~~_0x4b5881[_0xda316];if(_0x3a4743>_0xa024c6)return!![];if(_0x3a4743<_0xa024c6)return![];}return![];}function toTelegramMarkdown(_0x444daa){const _0x431137=_0x138638,_0x50fe6b=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0xd012c4=/\*{2}(.+?)\*{2}/gim;return _0x444daa=_0x444daa[_0x431137(0x337)](_0x50fe6b,'$1_$2_$3')[_0x431137(0x337)](_0xd012c4,'*$1*'),_0x444daa;}async function validateConfigFile(){const _0x5a2594=_0x138638,_0x250166=dbConfig[_0x5a2594(0x163)]('bots')[_0x5a2594(0x2de)](_0x5a2594(0x15a))['value']()||[];if(_0x250166[_0x5a2594(0x15c)]==0x0){let _0x4ae6cb=0x0,_0x5a7cd3=[];const _0x179152=/^bot-([0-9]{3})-config.json$/,_0x95c60b=fs[_0x5a2594(0x1b1)](configpath);_0x95c60b['forEach'](_0x5e2e5c=>{const _0x2f998d=_0x5a2594,_0x316c43=_0x179152[_0x2f998d(0x272)](_0x5e2e5c);if(_0x316c43){const _0x56544f=_0x316c43[0x1];let _0x34f40f=getBotAttributes(_0x56544f);_0x5a7cd3[_0x2f998d(0x2cd)]({'botID':_0x56544f,'botname':_0x34f40f[_0x2f998d(0x1a4)],'status':_0x2f998d(0x171),'live':_0x2f998d(0x329)}),_0x4ae6cb++;}}),_0x4ae6cb!=0x0&&(dbConfig[_0x5a2594(0x163)](_0x5a2594(0x288))['assign'](_0x5a7cd3)['write'](),config=_0x5a7cd3,restoredConfigFile=_0x4ae6cb);}}async function restoreConfigNotify(_0x2b2a85){const _0x4f26f1=_0x138638;let _0x2112ef;if(restoredConfigFile==0x1)_0x2112ef=_0x4f26f1(0x2a5);else _0x2112ef=_0x4f26f1(0x34f);if(_0x2b2a85)io['to']('botmanager')[_0x4f26f1(0x24f)](_0x4f26f1(0x18f),_0x2112ef);else{logger[_0x4f26f1(0x25d)](_0x4f26f1(0x1a3)),logger[_0x4f26f1(0x25d)](_0x2112ef),logger[_0x4f26f1(0x25d)](_0x4f26f1(0x1a3)),logger[_0x4f26f1(0x25d)]('');if(tgBot&&settings['telegramChatId']&&settings[_0x4f26f1(0x297)]!='orders')await sendTelegram(settings['telegramChatId'],_0x4f26f1(0x2f1)+_0x2112ef);}}function decryptRSA(_0x2281cc,_0x201594){const _0x2fab58=_0x138638,_0xd92634=forge['pki'][_0x2fab58(0x18b)](_0x2281cc),_0x5db8fe=_0xd92634[_0x2fab58(0x21d)](forge['util'][_0x2fab58(0x257)](_0x201594),_0x2fab58(0x2d4),{'md':forge['md'][_0x2fab58(0x207)]['create'](),'mgf1':{'md':forge['md'][_0x2fab58(0x207)][_0x2fab58(0x2a9)]()}});return _0x5db8fe;}function validateCredentials(_0xded565,_0x1e2101){const _0x2c39f9=_0x138638;if(_0xded565['username']==settings[_0x2c39f9(0x29c)]&&bcrypt[_0x2c39f9(0x1ac)](_0xded565[_0x2c39f9(0x216)],settings[_0x2c39f9(0x23e)])){if(settings[_0x2c39f9(0x21c)])return{'allow':![],'reason':_0x2c39f9(0x2c7),'token':null};else{const _0x5cd67e=generateLoginToken(_0x1e2101);return{'allow':!![],'reason':_0x2c39f9(0x2f7),'token':_0x5cd67e};}}else return{'allow':![],'reason':_0x2c39f9(0x237),'token':null};}function refreshToken(_0x283ee2){const _0x6786e6=_0x138638,_0x39707d=generateLoginToken(_0x283ee2);return{'allow':!![],'reason':_0x6786e6(0x2f7),'token':_0x39707d};}function validateAccess(_0xc9f934,_0x4ea451,_0x2838dc){const _0x13a5f4=_0x138638,_0x253c4=_0x2838dc?_0x2838dc:devices[_0x4ea451]['ip'];let _0x5305e2;const _0x3c8b09=_0x35ce7e=>{const _0x4b1a37=_0x3f34;if(settings[_0x4b1a37(0x336)]){if(settings[_0x4b1a37(0x21c)]){if(telegram2FaApproved(_0x4ea451)){const _0x18fb72=generateLoginToken(_0x4ea451);return{'allow':!![],'reason':_0x4b1a37(0x21b),'token':_0x18fb72};}else return{'allow':![],'reason':_0x4b1a37(0x19e),'token':null};}else return _0x5305e2=validToken(_0x35ce7e,_0x4ea451),_0x5305e2[_0x4b1a37(0x259)](_0x4b1a37(0x330))?{'allow':!![],'reason':_0x4b1a37(0x1c1),'token':_0x35ce7e}:{'allow':![],'reason':'login\x20required','token':null};}else return{'allow':!![],'reason':_0x4b1a37(0x2b9),'token':null};};if(settings[_0x13a5f4(0x152)]){let _0x39ed5a=[...settings[_0x13a5f4(0x1a5)],_0x13a5f4(0x2b1),_0x13a5f4(0x2a0),_0x13a5f4(0x17e)];if(_0x39ed5a[_0x13a5f4(0x1e8)](_0x253c4))return _0x3c8b09(_0xc9f934);else{_0x5305e2=validToken(_0xc9f934,_0x4ea451);if(_0x5305e2[_0x13a5f4(0x259)]('success'))return _0x3c8b09(_0xc9f934);else{if(telegramIpApproved(_0x4ea451)){const _0x1e6efd=generateToken(_0x4ea451);return _0x5305e2=_0x3c8b09(_0xc9f934),_0x5305e2[_0x13a5f4(0x260)]?{'allow':!![],'reason':_0x13a5f4(0x164),'token':_0x1e6efd}:_0x5305e2;}else return settings[_0x13a5f4(0x1e7)]?{'allow':![],'reason':_0x13a5f4(0x1ee),'token':null}:{'allow':![],'reason':_0x13a5f4(0x25e),'token':null};}}}else return _0x3c8b09(_0xc9f934);}function timelyDecrypt(_0x2ca02c,_0x6eed54,_0x1578a0='@'){const _0xd62b0c=_0x138638;if(_0x2ca02c)try{const _0x54209d=decryptRSA(secure[_0xd62b0c(0x1e3)],_0x2ca02c),_0x1708d7=_0x54209d[_0xd62b0c(0x181)](_0x1578a0)[0x0],_0x32f0c4=_0x54209d[_0xd62b0c(0x181)](_0x1578a0)[0x1],_0x2c8d9e=new Date()[_0xd62b0c(0x2f2)]();if(_0x6eed54){if(_0x2c8d9e-_0x32f0c4<maxSecretAge*0x3e8)return _0x1708d7;else return![];}else return _0x1708d7;}catch(_0x552758){return![];}else return![];}const validToken=(_0x1787ce,_0x253467)=>{const _0x3d0109=_0x138638,_0x258a51=devices[_0x253467]['ip'];if(!_0x1787ce)return{'error':'No\x20authentication\x20token'};for(let _0x2a4620 of blacklist){if(_0x2a4620['token']==_0x1787ce)return{'error':'Token\x20blacklisted'};}let _0x212456;try{_0x212456=jwt[_0x3d0109(0x27c)](_0x1787ce,secure[_0x3d0109(0x1ba)]+_0x253467);}catch{return{'error':_0x3d0109(0x1c0)};}if(!_0x212456[_0x3d0109(0x259)]('clientip')&&!_0x212456[_0x3d0109(0x259)](_0x3d0109(0x2dc))||!_0x212456[_0x3d0109(0x259)]('exp'))return{'error':_0x3d0109(0x338)};if(!_0x212456[_0x3d0109(0x259)](_0x3d0109(0x2dc))&&_0x212456[_0x3d0109(0x259)](_0x3d0109(0x242))){const {clientip:_0x42dc26}=_0x212456;return _0x258a51==_0x42dc26?{'success':_0x3d0109(0x20a)}:{'error':_0x3d0109(0x2da)};}else{if(_0x212456['hasOwnProperty'](_0x3d0109(0x2dc))&&_0x212456[_0x3d0109(0x259)](_0x3d0109(0x242))){const {username:_0x622118,clientip:_0x28b8fb}=_0x212456;return settings[_0x3d0109(0x29c)]==_0x622118&&_0x258a51==_0x28b8fb?{'success':_0x3d0109(0x20a)}:{'error':'Invalid\x20username\x20or\x20IP\x20address'};}}},generateLoginToken=_0x2f8d67=>{const _0x3e91d8=_0x138638;if(_0x2f8d67){const _0x5de8ba=devices[_0x2f8d67]['ip'];return jwt[_0x3e91d8(0x290)]({'username':settings[_0x3e91d8(0x29c)],'clientip':_0x5de8ba},secure[_0x3e91d8(0x1ba)]+_0x2f8d67,{'expiresIn':tokenRefresh*0x3c,'allowInsecureKeySizes':!![]});}else return![];},generateToken=_0x4c14b3=>{const _0x398e3c=_0x138638;if(_0x4c14b3){const _0x47b7a8=devices[_0x4c14b3]['ip'];return jwt[_0x398e3c(0x290)]({'clientip':_0x47b7a8},secure[_0x398e3c(0x1ba)]+_0x4c14b3,{'expiresIn':devices[_0x4c14b3][_0x398e3c(0x2be)][_0x398e3c(0x273)]*0x3c,'allowInsecureKeySizes':!![]});}else return![];},telegramIpApproved=_0x32bc21=>{const _0x4b2e8f=_0x138638;let _0x59028e=![];return devices[_0x32bc21][_0x4b2e8f(0x2be)]&&devices[_0x32bc21][_0x4b2e8f(0x2be)][_0x4b2e8f(0x273)]!=_0x4b2e8f(0x15d)&&(_0x59028e=devices[_0x32bc21]['telegramIpApproval']['clientip']==devices[_0x32bc21]['ip']&&new Date()['getTime']()-devices[_0x32bc21][_0x4b2e8f(0x2be)]['timestamp']<devices[_0x32bc21][_0x4b2e8f(0x2be)][_0x4b2e8f(0x273)]*0x3c*0x3e8),_0x59028e;},telegram2FaApproved=_0x2890fa=>{const _0x167c95=_0x138638;let _0x193c61=![];return devices[_0x2890fa]['telegram2FaApproval']&&devices[_0x2890fa][_0x167c95(0x215)]['expiry']!=_0x167c95(0x15d)&&(_0x193c61=devices[_0x2890fa]['telegram2FaApproval'][_0x167c95(0x242)]==devices[_0x2890fa]['ip']&&new Date()[_0x167c95(0x2f2)]()-devices[_0x2890fa][_0x167c95(0x215)][_0x167c95(0x1d3)]<devices[_0x2890fa][_0x167c95(0x215)]['expiry']*0x3c*0x3e8),_0x193c61;},normalizeIP=_0x42d96a=>{const _0x5f3695=_0x138638;let _0x5f259=null,_0x386c8a=null;if(ipaddr[_0x5f3695(0x2f3)](_0x42d96a)){const _0x359491=ipaddr[_0x5f3695(0x267)](_0x42d96a);_0x359491[_0x5f3695(0x280)]()===_0x5f3695(0x2f5)?(_0x359491[_0x5f3695(0x350)]()&&(_0x5f259=_0x359491[_0x5f3695(0x30b)]()[_0x5f3695(0x25f)]()),_0x386c8a=_0x359491[_0x5f3695(0x25f)]()):(_0x5f259=_0x359491[_0x5f3695(0x25f)](),_0x386c8a=_0x359491['toIPv4MappedAddress']()[_0x5f3695(0x25f)]());}return{'show':_0x5f259?_0x5f259:_0x386c8a,'store':_0x386c8a};};function formatDate(_0x34e71c){const _0x2713ce=_0x138638;return _0x34e71c[_0x2713ce(0x2e8)]()+'/'+(_0x34e71c['getMonth']()+0x1)[_0x2713ce(0x25f)]()[_0x2713ce(0x155)](0x2,'0')+'/'+_0x34e71c['getDate']()[_0x2713ce(0x25f)]()[_0x2713ce(0x155)](0x2,'0')+'\x20'+_0x34e71c['getHours']()[_0x2713ce(0x25f)]()[_0x2713ce(0x155)](0x2,'0')+':'+_0x34e71c[_0x2713ce(0x220)]()[_0x2713ce(0x25f)]()[_0x2713ce(0x155)](0x2,'0')+':'+_0x34e71c[_0x2713ce(0x33b)]()[_0x2713ce(0x25f)]()[_0x2713ce(0x155)](0x2,'0');}function sleep(_0x307ed5){return new Promise(_0x5be1d5=>setTimeout(_0x5be1d5,_0x307ed5));}