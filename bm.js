const _0x1b9d92=_0x2a10;(function(_0x2143d0,_0xec7142){const _0x1ca695=_0x2a10,_0x337ec6=_0x2143d0();while(!![]){try{const _0x478b7f=-parseInt(_0x1ca695(0x263))/0x1*(-parseInt(_0x1ca695(0x2e3))/0x2)+-parseInt(_0x1ca695(0x1dc))/0x3*(-parseInt(_0x1ca695(0xed))/0x4)+parseInt(_0x1ca695(0xdf))/0x5*(-parseInt(_0x1ca695(0x116))/0x6)+parseInt(_0x1ca695(0x126))/0x7*(-parseInt(_0x1ca695(0x160))/0x8)+parseInt(_0x1ca695(0xe6))/0x9+-parseInt(_0x1ca695(0xec))/0xa+parseInt(_0x1ca695(0x21f))/0xb;if(_0x478b7f===_0xec7142)break;else _0x337ec6['push'](_0x337ec6['shift']());}catch(_0x4d1c9c){_0x337ec6['push'](_0x337ec6['shift']());}}}(_0x2cb2,0x3347e));const _0x3cfee2=function(){let _0x2ee139=!![];return function(_0x1cb812,_0x40fb51){const _0x587df5=_0x2ee139?function(){if(_0x40fb51){const _0x14fba5=_0x40fb51['apply'](_0x1cb812,arguments);return _0x40fb51=null,_0x14fba5;}}:function(){};return _0x2ee139=![],_0x587df5;};}(),_0x314257=_0x3cfee2(this,function(){const _0x49bdf5=_0x2a10;return _0x314257[_0x49bdf5(0x199)]()[_0x49bdf5(0xe4)](_0x49bdf5(0x142))[_0x49bdf5(0x199)]()[_0x49bdf5(0x158)](_0x314257)[_0x49bdf5(0xe4)]('(((.+)+)+)+$');});_0x314257();'use strict';process['env'][_0x1b9d92(0x172)]=0x1;const childProcess=require(_0x1b9d92(0x26e)),fs=require('fs'),fns=require(_0x1b9d92(0x25a)),low=require(_0x1b9d92(0x2e5)),FileSync=require(_0x1b9d92(0x277)),path=require('path'),crypto=require(_0x1b9d92(0x28c)),forge=require(_0x1b9d92(0x2b1)),bcrypt=require('bcryptjs'),jwt=require(_0x1b9d92(0x155)),ipaddr=require('ipaddr.js'),yargs=require(_0x1b9d92(0x1ec)),uuidRandom=require(_0x1b9d92(0x265)),{Telegraf,Markup}=require(_0x1b9d92(0x2dc)),Mixpanel=require(_0x1b9d92(0xe2)),axios=require('axios'),{GraphQLClient,gql}=require(_0x1b9d92(0x218)),util=require(_0x1b9d92(0x2b2)),fileUpload=require('express-fileupload'),{networkInterfaces}=require('os'),JSZip=require(_0x1b9d92(0xff)),argv=yargs(process['argv'][_0x1b9d92(0x22c)](0x2))[_0x1b9d92(0x161)],PORT=argv['port']||'3000',pattern=/^[0-9]{2,4}$/;!pattern[_0x1b9d92(0x14e)](PORT)&&(console[_0x1b9d92(0x238)]('Error:\x20Invalid\x20argument\x20'+PORT+_0x1b9d92(0x272)),process[_0x1b9d92(0x149)](0x1));const HOST=argv[_0x1b9d92(0x1d1)]||null,userID=argv[_0x1b9d92(0x217)]||'',debugging=argv['d']||![],recreate=argv['r']||![],openBrowser=argv['o']||![],nodeversion=process[_0x1b9d92(0x130)][_0x1b9d92(0x182)];let bbpath=_0x1b9d92(0x135),bbpath2='';const botfile=_0x1b9d92(0x26f),configfile=_0x1b9d92(0x25e),settingsfile=_0x1b9d92(0x2ba),securefile=_0x1b9d92(0x101),environment=require('./'+bbpath2+_0x1b9d92(0x12a))[_0x1b9d92(0x159)]||_0x1b9d92(0x148),maxBackups=0xa;let validInstallation=!![];const schedulerInterval=0x3c*0x3c*0x3e8;!fs[_0x1b9d92(0x27c)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+'clients'),configpath=userID?bbpath+'config/'+userID+'/':bbpath+_0x1b9d92(0x100),configbackuppath=configpath+_0x1b9d92(0x239),logspath=userID?bbpath+_0x1b9d92(0x156)+userID+'/':bbpath+_0x1b9d92(0x156),zippath=userID?bbpath+_0x1b9d92(0xc6)+userID+'/':bbpath+_0x1b9d92(0xc6),loggerfile=fs[_0x1b9d92(0x2b0)](logspath+_0x1b9d92(0x120),{'flags':'a'}),temppath=userID?bbpath+'temp/'+userID+'/':bbpath+_0x1b9d92(0x206);!fs['existsSync'](configpath)&&fs[_0x1b9d92(0x29e)](configpath);!fs['existsSync'](configbackuppath)&&fs['mkdirSync'](configbackuppath);!fs[_0x1b9d92(0x27c)](logspath)&&fs[_0x1b9d92(0x29e)](logspath);!fs[_0x1b9d92(0x27c)](zippath)&&fs[_0x1b9d92(0x29e)](zippath);!fs[_0x1b9d92(0x27c)](temppath)&&fs['mkdirSync'](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x1b9d92(0x17c)]({'bots':[]})[_0x1b9d92(0x27f)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x1b9d92(0x17c)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':'0.0.0','onepagemode':![],'marketcapApi':''}})[_0x1b9d92(0x27f)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x1b9d92(0x17c)]({'secure':{},'blacklist':[]})[_0x1b9d92(0x27f)]();const saltRounds=0xa,mixpanel=Mixpanel[_0x1b9d92(0x2a6)](_0x1b9d92(0x2e1),{'host':_0x1b9d92(0x2dd)});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings[_0x1b9d92(0x21b)]&&(settings['telegramToken']!=''&&settings[_0x1b9d92(0x21b)]!=_0x1b9d92(0x1cb))&&settings['telegramUsername']&&settings[_0x1b9d92(0x243)]!='')initTelegram();const parseColor=(_0xd283b4,_0x1bcf25)=>{const _0x14a7cd=_0x1b9d92,_0xc6ca8e=/#[A-Z]{3}#/g;if(typeof _0xd283b4=='string'){!_0x1bcf25?_0xd283b4=_0xd283b4[_0x14a7cd(0x1f0)](_0xc6ca8e,''):(_0xd283b4=_0xd283b4[_0x14a7cd(0x1f0)](/#BLU#/g,_0x14a7cd(0x2d3)),_0xd283b4=_0xd283b4[_0x14a7cd(0x1f0)](/#RED#/g,_0x14a7cd(0xd0)),_0xd283b4=_0xd283b4['replace'](/#YEL#/g,_0x14a7cd(0x24f)),_0xd283b4=_0xd283b4[_0x14a7cd(0x1f0)](/#MAG#/g,'\x1b[35m'),_0xd283b4=_0xd283b4[_0x14a7cd(0x1f0)](/#CYA#/g,'\x1b[36m'),_0xd283b4=_0xd283b4[_0x14a7cd(0x1f0)](/#RES#/g,_0x14a7cd(0x1bd)));;}return _0xd283b4;},logger={'screen':_0x48f162=>{const _0x25c8c3=_0x1b9d92;console[_0x25c8c3(0x238)](parseColor(_0x48f162,!![]));},'simple':_0x1cf572=>{const _0x8b0877=_0x1b9d92;console[_0x8b0877(0x238)](parseColor(_0x1cf572,!![])),loggerfile[_0x8b0877(0x27f)](util['format'](parseColor(_0x1cf572,![]))+'\x0a');},'full':async _0x2e61a3=>{const _0x484059=_0x1b9d92,_0x246789=getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20'+_0x2e61a3;console[_0x484059(0x238)](parseColor(_0x246789,!![])),loggerfile[_0x484059(0x27f)](util[_0x484059(0x1da)](parseColor(_0x246789,![]))+'\x0a');if(tgBot&&settings['telegramChatId']&&settings['telegramEvents']!=_0x484059(0x2cd))await sendTelegram(settings[_0x484059(0xdc)],_0x484059(0x2d1)+parseColor(_0x2e61a3,![]));},'debug':async(_0x149fde,_0x3ad576='')=>{const _0x32b13c=_0x1b9d92,_0x3fda06=getTimeStamp()+_0x32b13c(0x1ac)+_0x149fde;if(debugging)console[_0x32b13c(0x238)](parseColor(_0x3fda06,!![]));loggerfile[_0x32b13c(0x27f)](util[_0x32b13c(0x1da)](parseColor(_0x3fda06,![]))+'\x0a');if(_0x3ad576){if(debugging)console[_0x32b13c(0x238)](_0x3ad576);loggerfile['write'](util[_0x32b13c(0x1da)](_0x3ad576)+'\x0a');}}};let terminating=![];process['on']('uncaughtException',function(_0x39e105){const _0x37e1f5=_0x1b9d92;_0x39e105[_0x37e1f5(0x199)]()[_0x37e1f5(0x2b6)](_0x37e1f5(0x14f))?(logger[_0x37e1f5(0x285)](_0x37e1f5(0x2bd)+_0x39e105[_0x37e1f5(0x140)]+'#RES#'),process[_0x37e1f5(0x29c)]({'terminate':!![]},_0x596cec=>{})):logger[_0x37e1f5(0x285)](_0x39e105);}),process['on']('exit',()=>{stopAllBots(),process['exit'](0x0);}),process['on'](_0x1b9d92(0x1ef),()=>{const _0x400dea=_0x1b9d92;stopAllBots(),process[_0x400dea(0x149)](0x0);}),process['on'](_0x1b9d92(0x2d0),()=>{stopAllBots(),process['exit'](0x0);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+'version.json')[_0x1b9d92(0x24a)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let tmpStorage={},devices=[],lastIpApproval,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0x1b9d92(0x28b)),app=express(),http=require(_0x1b9d92(0x104))[_0x1b9d92(0xc4)](app);app[_0x1b9d92(0x188)](fileUpload({'useTempFiles':!![]})),app[_0x1b9d92(0x2ad)](_0x1b9d92(0x241),async(_0x1a000a,_0xe0b96d)=>{const _0x4b6638=_0x1b9d92,_0x523646=_0x1a000a['params'][_0x4b6638(0x203)],_0x2104a8=getClientsWithBotID(_0x4b6638(0x214)),_0x3a6005=_0x1a000a[_0x4b6638(0x1f2)]['uuid'],_0x2a2229=timelyDecrypt(_0x3a6005,![]),_0x29dada=_0x2104a8[_0x4b6638(0x1b3)](_0x416de1=>_0x416de1[_0x4b6638(0x2bf)]==_0x2a2229);if(_0x29dada){const _0xe683d3=normalizeIP(_0x1a000a[_0x4b6638(0x124)][_0x4b6638(0x1b1)])[_0x4b6638(0x1d0)],_0x5cb179=_0x1a000a[_0x4b6638(0x1f2)][_0x4b6638(0x16d)];if(validateAccess(_0x5cb179,_0x2a2229,_0xe683d3)[_0x4b6638(0x202)])_0x523646==_0x4b6638(0x2a2)&&await backupConfigFiles(),await zipFiles(_0x523646),_0xe0b96d[_0x4b6638(0x20f)](zippath+(_0x523646+_0x4b6638(0x276)),_0x4a7e72=>{const _0x430a2e=_0x4b6638;_0x4a7e72&&(logger['full'](_0x430a2e(0xfb)+_0x523646),logger['simple'](_0x4a7e72));});else logger[_0x4b6638(0x1d8)](_0x4b6638(0x162)+_0x523646+_0x4b6638(0x208));}else logger[_0x4b6638(0x1d8)](_0x4b6638(0x162)+_0x523646+'\x20(2)');}),app[_0x1b9d92(0x261)](_0x1b9d92(0x2d2),async(_0x30411f,_0x3b0b61)=>{const _0x590119=_0x1b9d92,_0x234da8=getClientsWithBotID(_0x590119(0x214)),_0x57434d=_0x30411f['headers'][_0x590119(0x2bf)],_0x481732=timelyDecrypt(_0x57434d,![]),_0x32af48=_0x234da8[_0x590119(0x1b3)](_0x4c0de=>_0x4c0de[_0x590119(0x2bf)]==_0x481732);logger[_0x590119(0x23e)](_0x590119(0x15c));if(_0x32af48){const _0x8c3c9e=normalizeIP(_0x30411f[_0x590119(0x124)]['remoteAddress'])[_0x590119(0x1d0)],_0x57bc40=_0x30411f['headers'][_0x590119(0x16d)];if(validateAccess(_0x57bc40,_0x481732,_0x8c3c9e)['allow']){if(_0x30411f[_0x590119(0x236)]){const _0x3dff49=_0x30411f['files'][_0x590119(0x163)];await _0x3dff49['mv'](temppath+_0x3dff49[_0x590119(0x1cf)]),_0x3b0b61['send']({'status':!![],'message':_0x590119(0x2c2)});const _0x54f562=getBotsWithMode();_0x54f562[_0x590119(0x18b)]>0x0?confirmRestore(temppath,_0x3dff49[_0x590119(0x1cf)]):unzipFile(temppath,_0x3dff49['name']);}}else logger['full'](_0x590119(0x125));}else logger[_0x590119(0x1d8)](_0x590119(0x154));}),app['use'](express[_0x1b9d92(0x19c)](path[_0x1b9d92(0xea)](__dirname,bbpath2,_0x1b9d92(0x28e)))),app[_0x1b9d92(0x188)](express['static'](path[_0x1b9d92(0xea)](__dirname,bbpath2,_0x1b9d92(0x2a7)))),app['get']('/',function(_0x4d7c8a,_0x1c5506){const _0x1eebba=_0x1b9d92;_0x1c5506[_0x1eebba(0x25b)](path['join'](__dirname,bbpath2,'build2',_0x1eebba(0x2d7)));}),app['get']('/:bot',function(_0x5502f9,_0x201ba3){const _0x29efc0=_0x1b9d92;_0x201ba3[_0x29efc0(0x25b)](path[_0x29efc0(0xea)](__dirname,bbpath2,_0x29efc0(0x2a7),_0x29efc0(0x2d7)));}),app[_0x1b9d92(0x2ad)](_0x1b9d92(0x138),(_0x1a1501,_0x2b88b0)=>{const _0x18660d=_0x1b9d92;_0x2b88b0[_0x18660d(0x25b)](path[_0x18660d(0xea)](__dirname,bbpath2,_0x18660d(0x2a7),_0x18660d(0x2d7)));}),app[_0x1b9d92(0x2ad)](_0x1b9d92(0x254),(_0x321ac1,_0x17a5f2)=>{const _0x146c82=_0x1b9d92;_0x17a5f2[_0x146c82(0x25b)](path['join'](__dirname,bbpath2,_0x146c82(0x2a7),'index.html'));}),app[_0x1b9d92(0x2ad)](_0x1b9d92(0x10c),(_0xfd3913,_0x4e65e2)=>{const _0xfd77f=_0x1b9d92;_0x4e65e2['sendFile'](path['join'](__dirname,bbpath2,_0xfd77f(0x2a7),'index.html'));}),app['get'](_0x1b9d92(0x164),(_0x21facb,_0x33a03b)=>{const _0x4f6b5b=_0x1b9d92;_0x33a03b['sendFile'](path['join'](__dirname,bbpath2,_0x4f6b5b(0x2a7),_0x4f6b5b(0x2d7)));}),app['get']('/:bot/configuration',(_0x317abe,_0x4692e2)=>{const _0x28131f=_0x1b9d92;_0x4692e2[_0x28131f(0x25b)](path['join'](__dirname,bbpath2,'build',_0x28131f(0x2d7)));}),app[_0x1b9d92(0x2ad)]('/:bot/support',(_0x752395,_0x85136f)=>{const _0x3f79c1=_0x1b9d92;_0x85136f['sendFile'](path[_0x3f79c1(0xea)](__dirname,bbpath2,_0x3f79c1(0x2a7),'index.html'));});if(HOST)http[_0x1b9d92(0x1fc)](PORT,HOST);else http[_0x1b9d92(0x1fc)](PORT);const io=require(_0x1b9d92(0x2e7))(http,{});openBrowser&&(async()=>{const _0xceeb79=_0x1b9d92,{default:_0x46969a}=await import(_0xceeb79(0x18c));await _0x46969a(_0xceeb79(0x235)+PORT);})();init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}function getServerIP(){const _0x51c3e7=_0x1b9d92;let _0x196193=_0x51c3e7(0x17b);const _0x57014a=networkInterfaces(),_0x498fbc={};for(const _0x158419 of Object[_0x51c3e7(0x298)](_0x57014a)){for(const _0x4a3637 of _0x57014a[_0x158419]){if((_0x4a3637[_0x51c3e7(0x25c)]==_0x51c3e7(0x2c4)||_0x4a3637[_0x51c3e7(0x25c)]==0x4)&&!_0x4a3637[_0x51c3e7(0x20c)]){const _0x2a3c19=ipaddr[_0x51c3e7(0x1f7)](_0x4a3637[_0x51c3e7(0x118)])[_0x51c3e7(0x193)]();_0x2a3c19!=_0x51c3e7(0x110)&&(!_0x498fbc[_0x158419]&&(_0x498fbc[_0x158419]=[]),_0x498fbc[_0x158419][_0x51c3e7(0x19b)](_0x4a3637[_0x51c3e7(0x118)]),_0x196193=_0x4a3637[_0x51c3e7(0x118)]);}}}return{'serverip':_0x196193,'netinterfaces':_0x498fbc};}async function startServer(){const _0x3b6bb0=_0x1b9d92,{serverip:_0x5e2341,netinterfaces:_0x3d39e1}=getServerIP();logger[_0x3b6bb0(0x285)](''),logger[_0x3b6bb0(0x285)](_0x3b6bb0(0x169)),await logger[_0x3b6bb0(0x1d8)](_0x3b6bb0(0x27e)+serverversion+_0x3b6bb0(0xf7)+(environment==_0x3b6bb0(0xd9)?'(staging)':'')+'\x0a'+(_0x3b6bb0(0x131)+PORT+'#RES#\x20if\x20running\x20locally\x0a')+(_0x3b6bb0(0x15e)+_0x5e2341+':'+PORT+'#RES#\x20if\x20running\x20on\x20server')),logger[_0x3b6bb0(0x285)]('-----------------------------------------------------------------------------------');if(config[_0x3b6bb0(0x18b)]!=0x0)for(const _0xa37a36 of config){const _0x5d633f=_0xa37a36[_0x3b6bb0(0xe3)]==_0x3b6bb0(0x260)?'a':'m';if(_0xa37a36[_0x3b6bb0(0x288)]==_0x3b6bb0(0x209)||_0xa37a36[_0x3b6bb0(0x288)]=='new')await logger[_0x3b6bb0(0x1d8)](_0x3b6bb0(0x189)+_0x5d633f+_0x3b6bb0(0x2a9)+_0xa37a36[_0x3b6bb0(0x141)]+'\x20|\x20'+_0xa37a36[_0x3b6bb0(0x299)]),startBot([_0xa37a36[_0x3b6bb0(0x141)],userID],{'cwd':bbpath},function(_0x288bf3){if(_0x288bf3)logger['full'](_0x288bf3);});else(_0xa37a36[_0x3b6bb0(0x288)]=='disabled'||_0xa37a36[_0x3b6bb0(0x288)]==_0x3b6bb0(0x137))&&await logger[_0x3b6bb0(0x1d8)](_0x3b6bb0(0x1b4)+_0x5d633f+_0x3b6bb0(0x1d9)+_0xa37a36[_0x3b6bb0(0x141)]+_0x3b6bb0(0x165)+_0xa37a36['botname']);}else!newBot&&logger['simple'](_0x3b6bb0(0x1de));if(newBot)addBot();logger[_0x3b6bb0(0x285)](_0x3b6bb0(0x169)),logger[_0x3b6bb0(0x285)](''),await logger[_0x3b6bb0(0x23e)](_0x3b6bb0(0x117)+nodeversion),await logger[_0x3b6bb0(0x23e)](_0x3b6bb0(0x287),_0x3d39e1);}function startSocket(){const _0x337b60=_0x1b9d92;io['on'](_0x337b60(0x1be),_0x2bb2ca=>{const _0xe206a8=_0x337b60;let _0x89c85d,_0x9d0721,_0x2c918b,_0x3fa389,_0x2bb5a6;const _0x314f25=_0x2bb2ca[_0xe206a8(0x11e)][_0xe206a8(0x1f2)][_0xe206a8(0x22d)];_0x9d0721=_0x314f25['match'](/bot[0-9]{3}/);if(_0x9d0721)_0x2c918b=_0x9d0721[0x0][_0xe206a8(0x179)](/[0-9]{3}/);if(_0x2c918b)_0x89c85d=_0x2c918b[0x0];else _0x89c85d=_0xe206a8(0x214);const _0x509fff=_0x2bb2ca[_0xe206a8(0x11e)]['auth'][_0xe206a8(0x153)];if(!_0x509fff)_0x2bb2ca[_0xe206a8(0x2be)](_0xe206a8(0x288),{'publicKey':secure[_0xe206a8(0x26b)]});else{_0x3fa389=timelyDecrypt(_0x509fff,![]);if(!_0x3fa389)_0x2bb2ca[_0xe206a8(0x2be)](_0xe206a8(0x288),{'publicKey':secure['publicKey']});else{_0x2bb5a6=normalizeIP(_0x2bb2ca[_0xe206a8(0x271)][_0xe206a8(0x1b1)])[_0xe206a8(0x1d0)];if(!devices[_0x3fa389])devices[_0x3fa389]={'uuid':_0x3fa389,'access':{'token':null}};devices[_0x3fa389]['ip']=_0x2bb5a6;const _0x1f9a3e=addClient(_0x2bb2ca['id'],_0x3fa389,_0x89c85d);setAccess(_0x1f9a3e),emitMessages(),_0x2bb2ca['on'](_0xe206a8(0x2ab),_0x59ebff=>{const _0x35bbfb=_0xe206a8,_0x1d8cb2=timelyDecrypt(_0x59ebff[_0x35bbfb(0x1f1)],!![],'|@|');if(_0x1d8cb2){_0x59ebff={'username':_0x59ebff[_0x35bbfb(0xc3)],'password':_0x1d8cb2},devices[_0x3fa389][_0x35bbfb(0x1a5)]=validateCredentials(_0x59ebff,_0x3fa389);if(devices[_0x3fa389]['access'][_0x35bbfb(0x202)]==![]&&devices[_0x3fa389][_0x35bbfb(0x1a5)]['reason']==_0x35bbfb(0x28a))_0x2bb2ca[_0x35bbfb(0x2be)](_0x35bbfb(0x288),{'access':devices[_0x3fa389][_0x35bbfb(0x1a5)]}),loginAccess2FA(_0x3fa389,_0x2bb5a6);else{if(devices[_0x3fa389][_0x35bbfb(0x1a5)][_0x35bbfb(0x202)]==![]&&devices[_0x3fa389][_0x35bbfb(0x1a5)][_0x35bbfb(0x281)]==_0x35bbfb(0x2bc))_0x2bb2ca[_0x35bbfb(0x2be)]('status',{'access':devices[_0x3fa389]['access']});else devices[_0x3fa389][_0x35bbfb(0x1a5)][_0x35bbfb(0x202)]&&devices[_0x3fa389][_0x35bbfb(0x1a5)][_0x35bbfb(0x281)]==_0x35bbfb(0x16e)&&(getClientsWithUuid(_0x3fa389)[_0x35bbfb(0x109)](_0x5a97da=>{setAccess(_0x5a97da);}),logger[_0x35bbfb(0x23e)]('Logged\x20in\x20user\x20...'+_0x3fa389[_0x35bbfb(0x22c)](-0x8)),setTokenRefresh(_0x3fa389),setSessionTimeout(_0x35bbfb(0x2ab),_0x3fa389));}}else logger['full'](_0x35bbfb(0x114));}),_0x2bb2ca['on'](_0xe206a8(0xf0),()=>{resetPassword();}),_0x2bb2ca['on'](_0xe206a8(0x22b),_0x17ee0d=>{removeClient(_0x2bb2ca['id']);}),_0x89c85d==_0xe206a8(0x214)&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x5d2b1e){const _0xd54887=_0x1b9d92;if(_0x5d2b1e!=_0xd54887(0x214)&&config['apiKey']!=''){if(pid[_0x5d2b1e])pid[_0x5d2b1e][_0xd54887(0x29c)]({'function':_0xd54887(0x26d),'args':null});}_0x5d2b1e!=_0xd54887(0x214)&&broadcastToBots(_0xd54887(0x1a4),JSON[_0xd54887(0x198)](config));}function reloadBotManager(){const _0x30156e=_0x1b9d92;getClientsWithBotID(_0x30156e(0x214))[_0x30156e(0x109)](_0xada48b=>{const _0x38bd0f=_0x30156e;getSocket(_0xada48b['id'])[_0x38bd0f(0x2be)](_0x38bd0f(0x288),{'access':{'allow':![],'reason':_0x38bd0f(0x1ad),'token':null}});});}function getSocket(_0x5239b6){const _0x7e1e1c=_0x1b9d92,_0x34d050=io[_0x7e1e1c(0x176)][_0x7e1e1c(0x2ad)]('/');return _0x34d050[_0x7e1e1c(0x201)]['get'](_0x5239b6);}function setAccess(_0x102187){const _0x3ebe29=_0x1b9d92,_0x368497=getSocket(_0x102187['id']),_0x2cfc79=_0x102187['uuid'],_0x4531d0=_0x102187[_0x3ebe29(0x139)];devices[_0x2cfc79][_0x3ebe29(0x1a5)]=validateAccess(devices[_0x2cfc79][_0x3ebe29(0x1a5)][_0x3ebe29(0x145)],_0x2cfc79),logger[_0x3ebe29(0x23e)](_0x3ebe29(0x111)+devices[_0x2cfc79]['access'][_0x3ebe29(0x281)]+_0x3ebe29(0x253)+_0x102187['id'][_0x3ebe29(0x22c)](-0x8)+_0x3ebe29(0x207)+_0x2cfc79['slice'](-0x8)),_0x368497[_0x3ebe29(0xea)](_0x2cfc79);if(devices[_0x2cfc79][_0x3ebe29(0x1a5)][_0x3ebe29(0x202)]){_0x368497['join'](_0x4531d0);if(_0x4531d0==_0x3ebe29(0x214))initializeSocketBotManager(_0x368497);else initializeSocketBot(_0x368497);initClient(_0x4531d0);}devices[_0x2cfc79][_0x3ebe29(0x1a5)][_0x3ebe29(0x145)]&&devices[_0x2cfc79][_0x3ebe29(0x1a5)][_0x3ebe29(0x281)]==_0x3ebe29(0x2a1)&&setSessionTimeout(_0x3ebe29(0x274),_0x2cfc79),devices[_0x2cfc79][_0x3ebe29(0x1a5)][_0x3ebe29(0x145)]&&devices[_0x2cfc79][_0x3ebe29(0x1a5)]['reason']==_0x3ebe29(0x2ae)&&setSessionTimeout(_0x3ebe29(0x2ab),_0x2cfc79),_0x368497[_0x3ebe29(0x2be)](_0x3ebe29(0x288),{'status':_0x102187[_0x3ebe29(0x1b7)],'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x2cfc79][_0x3ebe29(0x1a5)],'externalip':devices[_0x2cfc79]['ip'],'publicKey':secure[_0x3ebe29(0x26b)],'userid':settings[_0x3ebe29(0x18e)],'validInstallation':validInstallation}),devices[_0x2cfc79][_0x3ebe29(0x1a5)][_0x3ebe29(0x202)]==![]&&devices[_0x2cfc79][_0x3ebe29(0x1a5)][_0x3ebe29(0x281)]=='2FA\x20required'&&temporaryAccess2FA(_0x2cfc79,devices[_0x2cfc79]['ip']);}function setSessionTimeout(_0x9f9dd5,_0x3adc31){const _0x425c2b=_0x1b9d92;let _0x41b129;if(_0x9f9dd5==_0x425c2b(0x2ab))_0x41b129=loginExpiry*0x3c*0x3e8;else _0x41b129=devices[_0x3adc31]['telegramIpApproval'][_0x425c2b(0x17e)]*0x3c*0x3e8-(new Date()['getTime']()-devices[_0x3adc31]['telegramIpApproval'][_0x425c2b(0x1e2)]);if(devices[_0x3adc31][_0x425c2b(0x2db)])clearTimeout(devices[_0x3adc31]['pidExpireLogin']);devices[_0x3adc31]['pidExpireLogin']=setTimeout(()=>{const _0x45ccb3=_0x425c2b;if(devices[_0x3adc31][_0x45ccb3(0xd3)])clearTimeout(devices[_0x3adc31][_0x45ccb3(0xd3)]);removeSocketListeners(_0x3adc31),addBlacklist(_0x3adc31),devices[_0x3adc31][_0x45ccb3(0x2de)]=null,devices[_0x3adc31][_0x45ccb3(0x2d6)]=null,devices[_0x3adc31][_0x45ccb3(0x1a5)]['token']=null,logger[_0x45ccb3(0x23e)](_0x45ccb3(0x24c)+_0x3adc31[_0x45ccb3(0x22c)](-0x8)),devices[_0x3adc31][_0x45ccb3(0x1a5)]=validateAccess(devices[_0x3adc31]['access']['token'],_0x3adc31),!(devices[_0x3adc31][_0x45ccb3(0x1a5)][_0x45ccb3(0x202)]&&devices[_0x3adc31]['access'][_0x45ccb3(0x281)]==_0x45ccb3(0x2b4))&&(_0x9f9dd5==_0x45ccb3(0x2ab)?io['to'](_0x3adc31)[_0x45ccb3(0x2be)](_0x45ccb3(0x288),{'access':{'allow':![],'reason':_0x45ccb3(0x2da),'token':null}}):io['to'](_0x3adc31)[_0x45ccb3(0x2be)]('status',{'access':{'allow':![],'reason':'temporary\x20access\x20timeout','token':null}})),devices[_0x3adc31][_0x45ccb3(0x1a5)]['token']=null;},_0x41b129);}function setTokenRefresh(_0x2d6c53){const _0x1f7691=_0x1b9d92;if(devices[_0x2d6c53][_0x1f7691(0xd3)])clearTimeout(devices[_0x2d6c53][_0x1f7691(0xd3)]);devices[_0x2d6c53]['pidRefreshToken']=setTimeout(()=>{const _0x4213c1=_0x1f7691;getClientsWithUuid(_0x2d6c53)[_0x4213c1(0x18b)]!=0x0?(devices[_0x2d6c53][_0x4213c1(0x1a5)]=refreshToken(_0x2d6c53),io['to'](_0x2d6c53)[_0x4213c1(0x2be)](_0x4213c1(0x288),{'status':'connected','serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x2d6c53][_0x4213c1(0x1a5)],'externalip':devices[_0x2d6c53]['ip'],'publicKey':secure[_0x4213c1(0x26b)],'validInstallation':validInstallation}),setTokenRefresh(_0x2d6c53)):clearTimeout(devices[_0x2d6c53][_0x4213c1(0xd3)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x50b0f2){const _0x10639a=_0x1b9d92,_0x24a71f=getClient(_0x50b0f2['id'])[_0x10639a(0x2bf)];_0x50b0f2[_0x10639a(0x2be)](_0x10639a(0x1a4),config),_0x50b0f2['emit']('settings',cleanSettings()),_0x50b0f2['on'](_0x10639a(0x1c1),_0x2618fa=>{const _0x45dd4e=_0x10639a;if(validateAccess(_0x2618fa,_0x24a71f)[_0x45dd4e(0x202)])addBot();else logger[_0x45dd4e(0x1d8)]('Unauthorized\x20attempt\x20to\x20add\x20bot');}),_0x50b0f2['on'](_0x10639a(0xdd),(_0x5cc336,_0x35f020)=>{const _0x2dcda3=_0x10639a;if(validateAccess(_0x35f020,_0x24a71f)[_0x2dcda3(0x202)])toggleBot(_0x5cc336[_0x2dcda3(0x141)],_0x5cc336[_0x2dcda3(0x288)],_0x5cc336[_0x2dcda3(0x11d)]);else logger[_0x2dcda3(0x1d8)](_0x2dcda3(0xd2));}),_0x50b0f2['on']('toggle-bot-mode',(_0x4ab4fc,_0x142e9c)=>{const _0x58ef61=_0x10639a;if(validateAccess(_0x142e9c,_0x24a71f)[_0x58ef61(0x202)])toggleBotMode(_0x4ab4fc);else logger[_0x58ef61(0x1d8)](_0x58ef61(0xd2));}),_0x50b0f2['on'](_0x10639a(0x192),(_0x303021,_0xc1ea4a)=>{const _0xee56d0=_0x10639a;if(validateAccess(_0xc1ea4a,_0x24a71f)[_0xee56d0(0x202)])deleteBot(_0x303021);else logger[_0xee56d0(0x1d8)](_0xee56d0(0x11a));}),_0x50b0f2['on']('store-settings',(_0x231187,_0x5374a7)=>{const _0x3e98b2=_0x10639a;if(validateAccess(_0x5374a7,_0x24a71f)[_0x3e98b2(0x202)])storeSettings(_0x231187,!![]);else logger[_0x3e98b2(0x1d8)](_0x3e98b2(0xf6));}),_0x50b0f2['on'](_0x10639a(0x123),_0x23aac4=>{const _0x630f1d=_0x10639a;if(validateAccess(_0x23aac4,_0x24a71f)['allow'])updateBB(_0x630f1d(0x2c6));else logger[_0x630f1d(0x1d8)](_0x630f1d(0x1e3));}),_0x50b0f2['on'](_0x10639a(0x174),_0x5c233d=>{const _0x1d665e=_0x10639a;if(validateAccess(_0x5c233d,_0x24a71f)['allow'])updateBB(_0x1d665e(0x1ba));else logger[_0x1d665e(0x1d8)](_0x1d665e(0xc8));}),_0x50b0f2['on'](_0x10639a(0x23d),_0x1b8d28=>{const _0x307095=_0x10639a;if(validateAccess(_0x1b8d28,_0x24a71f)[_0x307095(0x202)]){const _0x45468f=getClient(_0x50b0f2['id']);if(_0x45468f)getBackupFiles(_0x45468f[_0x307095(0x2bf)]);else logger[_0x307095(0x1d8)]('Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files');}else logger[_0x307095(0x1d8)](_0x307095(0xf1));}),_0x50b0f2['on'](_0x10639a(0x2af),(_0x20cffa,_0x3691e6)=>{const _0x46c27d=_0x10639a;if(validateAccess(_0x3691e6,_0x24a71f)[_0x46c27d(0x202)])restoreBackupFile(_0x20cffa);else logger[_0x46c27d(0x1d8)](_0x46c27d(0x168));}),_0x50b0f2['on'](_0x10639a(0x1f3),_0xb96dd4=>{const _0x990f07=_0x10639a;if(validateAccess(_0xb96dd4,_0x24a71f)['allow'])getMessages();else logger[_0x990f07(0x1d8)](_0x990f07(0x1c0));}),_0x50b0f2['on']('confirm-message',(_0x2a68d2,_0x22abc1)=>{const _0x303f0e=_0x10639a;if(validateAccess(_0x22abc1,_0x24a71f)['allow'])confirmMessage(_0x2a68d2);else logger[_0x303f0e(0x1d8)](_0x303f0e(0x1fb));}),_0x50b0f2['on'](_0x10639a(0x178),_0x17f694=>{const _0x4d4e67=_0x10639a;if(validateAccess(_0x17f694,_0x24a71f)[_0x4d4e67(0x202)]){if(devices[_0x24a71f][_0x4d4e67(0xd3)])clearTimeout(devices[_0x24a71f][_0x4d4e67(0xd3)]);if(devices[_0x24a71f][_0x4d4e67(0x2db)])clearTimeout(devices[_0x24a71f][_0x4d4e67(0x2db)]);removeSocketListeners(getClient(_0x50b0f2['id'])[_0x4d4e67(0x2bf)]),addBlacklist(_0x24a71f),devices[_0x24a71f][_0x4d4e67(0x2de)]=null,devices[_0x24a71f][_0x4d4e67(0x2d6)]=null,devices[_0x24a71f][_0x4d4e67(0x1a5)]['token']=null,logger[_0x4d4e67(0x23e)]('Logged\x20out\x20user\x20...'+_0x24a71f[_0x4d4e67(0x22c)](-0x8)),io['to'](getClient(_0x50b0f2['id'])[_0x4d4e67(0x2bf)])[_0x4d4e67(0x2be)](_0x4d4e67(0x288),{'access':{'allow':![],'reason':_0x4d4e67(0x205),'token':null}});}else logger['full'](_0x4d4e67(0xca));});}function initializeSocketBot(_0x36264d){const _0x5b0cd4=_0x1b9d92,_0x5ae91d=getClient(_0x36264d['id'])[_0x5b0cd4(0x139)],_0x469498=getClient(_0x36264d['id'])[_0x5b0cd4(0x2bf)];_0x36264d['on'](_0x5b0cd4(0x1a7),(_0x482c08,_0x5f1c63)=>{const _0x53ac09=_0x5b0cd4;if(validateAccess(_0x5f1c63,_0x469498)[_0x53ac09(0x202)]){if(pid[_0x5ae91d])pid[_0x5ae91d][_0x53ac09(0x29c)]({'function':_0x53ac09(0xe9),'args':_0x482c08});}else logger[_0x53ac09(0x1d8)](_0x53ac09(0x2cb));}),_0x36264d['on'](_0x5b0cd4(0x28d),(_0xef7619,_0x134226)=>{const _0x18f12e=_0x5b0cd4;if(validateAccess(_0x134226,_0x469498)[_0x18f12e(0x202)]){if(pid[_0x5ae91d])pid[_0x5ae91d][_0x18f12e(0x29c)]({'function':_0x18f12e(0x204),'args':_0xef7619});}else logger['full'](_0x18f12e(0x2e0));}),_0x36264d['on'](_0x5b0cd4(0x210),(_0x5821a7,_0x4ebb15)=>{const _0x18d278=_0x5b0cd4;if(validateAccess(_0x4ebb15,_0x469498)[_0x18d278(0x202)]){if(pid[_0x5ae91d])pid[_0x5ae91d][_0x18d278(0x29c)]({'function':'getPortfolio','args':_0x5821a7});}else logger['full'](_0x18d278(0x1d5));}),_0x36264d['on'](_0x5b0cd4(0x20e),(_0x4a2a95,_0x1ed57b)=>{const _0x203c46=_0x5b0cd4;if(validateAccess(_0x1ed57b,_0x469498)[_0x203c46(0x202)]){if(pid[_0x5ae91d])pid[_0x5ae91d][_0x203c46(0x29c)]({'function':_0x203c46(0x248),'args':_0x4a2a95});}else logger['full'](_0x203c46(0x1d3));}),_0x36264d['on'](_0x5b0cd4(0x291),(_0x399917,_0x1d1b15)=>{const _0x34f9a4=_0x5b0cd4;if(validateAccess(_0x1d1b15,_0x469498)['allow']){if(pid[_0x5ae91d])pid[_0x5ae91d][_0x34f9a4(0x29c)]({'function':'storeHeadless','args':_0x399917});}else logger[_0x34f9a4(0x1d8)]('Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration');}),_0x36264d['on'](_0x5b0cd4(0x2b7),(_0x994883,_0x1976a5)=>{const _0x22b956=_0x5b0cd4;if(validateAccess(_0x1976a5,_0x469498)[_0x22b956(0x202)]){if(pid[_0x5ae91d])pid[_0x5ae91d][_0x22b956(0x29c)]({'function':_0x22b956(0x2c5),'args':_0x994883});}else logger[_0x22b956(0x1d8)](_0x22b956(0x2c8));}),_0x36264d['on'](_0x5b0cd4(0x11b),_0x28b740=>{const _0x259088=_0x5b0cd4;if(validateAccess(_0x28b740,_0x469498)['allow']){if(pid[_0x5ae91d])pid[_0x5ae91d][_0x259088(0x29c)]({'function':_0x259088(0x12b),'args':null});}else logger[_0x259088(0x1d8)](_0x259088(0x247));}),_0x36264d['on'](_0x5b0cd4(0x132),_0xa47291=>{const _0x25a75d=_0x5b0cd4;if(validateAccess(_0xa47291,_0x469498)[_0x25a75d(0x202)]){if(pid[_0x5ae91d])pid[_0x5ae91d][_0x25a75d(0x29c)]({'function':'getStartingBalances','args':null});}else logger[_0x25a75d(0x1d8)](_0x25a75d(0x1e5));}),_0x36264d['on'](_0x5b0cd4(0xd6),(_0x2feefb,_0x415dc3)=>{const _0x22967e=_0x5b0cd4;if(validateAccess(_0x415dc3,_0x469498)['allow']){if(pid[_0x5ae91d])pid[_0x5ae91d][_0x22967e(0x29c)]({'function':_0x22967e(0x249),'args':_0x2feefb});}else logger[_0x22967e(0x1d8)](_0x22967e(0x232));}),_0x36264d['on'](_0x5b0cd4(0x1ff),_0x32478e=>{const _0x41e38c=_0x5b0cd4;if(validateAccess(_0x32478e,_0x469498)[_0x41e38c(0x202)]){if(pid[_0x5ae91d])pid[_0x5ae91d][_0x41e38c(0x29c)]({'function':'cancelLoading','args':null});}else logger[_0x41e38c(0x1d8)](_0x41e38c(0x262));}),_0x36264d['on'](_0x5b0cd4(0x136),_0x1017f0=>{const _0x18f5b3=_0x5b0cd4;if(validateAccess(_0x1017f0,_0x469498)[_0x18f5b3(0x202)]){if(pid[_0x5ae91d])pid[_0x5ae91d]['send']({'function':_0x18f5b3(0x1ed),'args':null});}else logger['full'](_0x18f5b3(0xd8));}),_0x36264d['on'](_0x5b0cd4(0x123),_0x8afdc=>{const _0x1655de=_0x5b0cd4;if(validateAccess(_0x8afdc,_0x469498)['allow'])updateBB(_0x1655de(0x2c6));else logger['full']('Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot');}),_0x36264d['on'](_0x5b0cd4(0x1f3),_0x3a7238=>{const _0x8b6854=_0x5b0cd4;if(validateAccess(_0x3a7238,_0x469498)[_0x8b6854(0x202)])getMessages();else logger[_0x8b6854(0x1d8)](_0x8b6854(0x1c0));}),_0x36264d['on'](_0x5b0cd4(0xfa),(_0x3074e0,_0x329e74)=>{const _0x2c7120=_0x5b0cd4;if(validateAccess(_0x329e74,_0x469498)[_0x2c7120(0x202)])confirmMessage(_0x3074e0);else logger['full'](_0x2c7120(0x1fb));}),_0x36264d['on'](_0x5b0cd4(0x178),_0x2b7638=>{const _0x45518d=_0x5b0cd4;if(validateAccess(_0x2b7638,_0x469498)[_0x45518d(0x202)]){if(devices[_0x469498][_0x45518d(0xd3)])clearTimeout(devices[_0x469498][_0x45518d(0xd3)]);if(devices[_0x469498]['pidExpireLogin'])clearTimeout(devices[_0x469498][_0x45518d(0x2db)]);removeSocketListeners(getClient(_0x36264d['id'])[_0x45518d(0x2bf)]),addBlacklist(_0x469498),devices[_0x469498][_0x45518d(0x2de)]=null,devices[_0x469498]['telegram2FaApproval']=null,devices[_0x469498][_0x45518d(0x1a5)][_0x45518d(0x145)]=null,logger[_0x45518d(0x23e)](_0x45518d(0x22e)+_0x469498['slice'](-0x8)),io['to'](getClient(_0x36264d['id'])[_0x45518d(0x2bf)])[_0x45518d(0x2be)](_0x45518d(0x288),{'access':{'allow':![],'reason':_0x45518d(0x205),'token':null}});}else logger[_0x45518d(0x1d8)](_0x45518d(0xca));});}function removeSocketListeners(_0xffb5d1){getClientsWithUuid(_0xffb5d1)['forEach'](_0x5b5274=>{getSocket(_0x5b5274['id'])['removeAllListeners']();});}function cleanSettings(){const _0x480c22=_0x1b9d92;let _0x2e3396=settings;return settings['telegramToken']&&settings[_0x480c22(0x21b)]!=''&&(_0x2e3396={..._0x2e3396,'telegramToken':_0x480c22(0x23a)}),settings['bbPassword']&&settings[_0x480c22(0x1af)]!=''&&(_0x2e3396={..._0x2e3396,'bbPassword':_0x480c22(0x23a)}),settings[_0x480c22(0x1d2)]&&settings[_0x480c22(0x1d2)]!=''&&(_0x2e3396={..._0x2e3396,'marketcapApi':_0x480c22(0x23a)}),(settings[_0x480c22(0x1af)]&&settings[_0x480c22(0x1af)]==_0x480c22(0x1cb)||settings[_0x480c22(0x21b)]&&settings[_0x480c22(0x21b)]=='***'||settings[_0x480c22(0x1d2)]&&settings[_0x480c22(0x1d2)]=='***')&&(_0x2e3396={..._0x2e3396,'restored':{'password':settings[_0x480c22(0x1af)]==_0x480c22(0x1cb),'telegram':settings['telegramToken']==_0x480c22(0x1cb),'marketcap':settings[_0x480c22(0x1d2)]==_0x480c22(0x1cb)}}),_0x2e3396;}async function updateBB(_0x1d8044){const _0x43e104=_0x1b9d92;await backupConfigFiles(),installingUpdate=!![],config[_0x43e104(0x109)](_0x3fe941=>{const _0x5c33e9=_0x43e104;restartBot(_0x3fe941[_0x5c33e9(0x141)]);});if(_0x1d8044==_0x43e104(0x2c6))process[_0x43e104(0x29c)]({'update':!![],'environment':environment},_0x67bf41=>{});else _0x1d8044==_0x43e104(0x1ba)&&process[_0x43e104(0x29c)]({'reinstall':!![],'environment':environment},_0x103976=>{});}function startBot(_0x556f30,_0x797c28,_0x2e3d71){const _0x4ec6fa=_0x1b9d92;if(debugging)_0x556f30[_0x4ec6fa(0x19b)]('-d');if(recreate)_0x556f30[_0x4ec6fa(0x19b)]('-r');let _0x4553ab=![];const _0x87033a=_0x556f30[0x0];_0x797c28={..._0x797c28,'stdio':[_0x4ec6fa(0xe7),_0x4ec6fa(0xe7),'inherit',_0x4ec6fa(0x1c4)]},pid[_0x87033a]=childProcess[_0x4ec6fa(0x2a5)](botfile,_0x556f30,_0x797c28),pid[_0x87033a]['on']('message',_0x1da4c8=>{const _0x244cd5=_0x4ec6fa;switch(Object[_0x244cd5(0x298)](_0x1da4c8)[0x0]){case _0x244cd5(0x299):updateBotName(_0x87033a,_0x1da4c8['botname']);break;case'updatebotmanager':updateBotManager();break;case'status':updateStatus(_0x87033a,_0x1da4c8[_0x244cd5(0x288)]);break;case _0x244cd5(0x11d):updateLive(_0x87033a,_0x1da4c8['live']);break;case _0x244cd5(0x244):updateLive(_0x87033a,_0x1da4c8[_0x244cd5(0x244)]),io['to'](_0x87033a)[_0x244cd5(0x2be)](_0x244cd5(0x288),{'access':{'allow':![],'reason':_0x244cd5(0x1ad),'token':null}});break;case _0x244cd5(0x1f8):_0x1da4c8[_0x244cd5(0x1f8)]==_0x244cd5(0x246)&&restartBot(_0x87033a);_0x1da4c8[_0x244cd5(0x1f8)]=='kill'&&toggleBot(_0x87033a,_0x244cd5(0x11f),'stopped');break;case _0x244cd5(0x103):sendTelegramBot(_0x87033a,_0x1da4c8[_0x244cd5(0x103)]);break;case _0x244cd5(0x1e7):sendTelegramMsg(_0x1da4c8[_0x244cd5(0x1e7)]);break;case _0x244cd5(0x1d6):io['to'](_0x87033a)[_0x244cd5(0x2be)](_0x1da4c8['function'],_0x1da4c8['args']);break;}}),pid[_0x87033a]['on'](_0x4ec6fa(0x1fe),function(_0x486477){if(_0x4553ab)return;_0x4553ab=!![],_0x2e3d71(_0x486477);}),pid[_0x87033a]['on'](_0x4ec6fa(0x149),async function(_0x2468f2){const _0x26f606=_0x4ec6fa;if(terminating)return;if(installingUpdate){io[_0x26f606(0x222)]();return;}if(_0x4553ab)return;_0x4553ab=!![],_0x2e3d71(null);const _0x3d9267=dbConfig[_0x26f606(0x2ad)](_0x26f606(0x1a4))[_0x26f606(0x1b3)]({'botID':_0x87033a})[_0x26f606(0x2d4)]();_0x3d9267&&(_0x3d9267[_0x26f606(0x288)]==_0x26f606(0x209)||_0x3d9267[_0x26f606(0x288)]==_0x26f606(0x2ce))&&(await sleep(0x3e8),updateLive(_0x87033a,_0x26f606(0x221)),logger[_0x26f606(0x1d8)]('Restarting\x20'+botRef(_0x87033a)),startBot([_0x87033a,userID],{'cwd':bbpath},function(_0x184ffe){const _0x289333=_0x26f606;if(_0x184ffe)logger[_0x289333(0x1d8)](_0x184ffe);}));});}function stopBot(_0xd7defd){const _0x1660ee=_0x1b9d92;getClientsWithBotID(_0xd7defd)[_0x1660ee(0x109)](_0xa81a1f=>{const _0x20cc37=_0x1660ee;getSocket(_0xa81a1f['id'])[_0x20cc37(0x22b)](!![]),removeClient(_0xa81a1f['id']);}),pid[_0xd7defd]&&(pid[_0xd7defd][_0x1660ee(0x13b)](),pid[_0xd7defd]=null);}function stopAllBots(){const _0x2705b4=_0x1b9d92;terminating=!![];const _0x21b485=getEnabledBots();_0x21b485[_0x2705b4(0x109)](_0x1e0a51=>{const _0x2182c7=_0x2705b4;stopBot(_0x1e0a51[_0x2182c7(0x141)]);});}function restartBot(_0x45ae2c){const _0x3f8a38=_0x1b9d92;if(pid[_0x45ae2c])pid[_0x45ae2c][_0x3f8a38(0x13b)]();}function addBot(){const _0x39f388=_0x1b9d92;let _0x4ffb09;for(let _0x377159=0x1;_0x377159<0x3e9;_0x377159++){_0x4ffb09=_0x377159[_0x39f388(0x199)]()[_0x39f388(0x228)](0x3,'0');let _0xef4b67=config[_0x39f388(0x1b3)](_0x446889=>_0x446889[_0x39f388(0x141)]==_0x4ffb09);if(!_0xef4b67)break;}if(_0x4ffb09===_0x39f388(0xf4)){logger[_0x39f388(0x1d8)](_0x39f388(0x1c5));return;}logger['full']('Starting\x20new\x20bot\x20|\x20Bot\x20'+_0x4ffb09),dbConfig[_0x39f388(0x2ad)](_0x39f388(0x1a4))[_0x39f388(0x19b)]({'botID':_0x4ffb09,'botname':_0x39f388(0x28f)+_0x4ffb09,'status':'new','live':''})[_0x39f388(0x27f)](),startBot([_0x4ffb09,userID],{'cwd':bbpath},function(_0x45250d){const _0x27175d=_0x39f388;if(_0x45250d)logger[_0x27175d(0x1d8)](_0x45250d);}),config=getConfiguration(),io['to'](_0x39f388(0x214))[_0x39f388(0x2be)](_0x39f388(0x1a4),config),broadcastToBots(_0x39f388(0x1a4),JSON['stringify'](config));}function deleteBot(_0x5bd3fe){const _0x132fc7=_0x1b9d92;getClientsWithBotID(_0x5bd3fe)['forEach'](_0x46910b=>{getSocket(_0x46910b['id'])['disconnect'](!![]),removeClient(_0x46910b['id']);}),dbConfig[_0x132fc7(0x2ad)](_0x132fc7(0x1a4))[_0x132fc7(0x166)]({'botID':_0x5bd3fe})[_0x132fc7(0x27f)](),logger[_0x132fc7(0x1d8)](_0x132fc7(0x230)+_0x5bd3fe),stopBot(_0x5bd3fe);try{if(fs[_0x132fc7(0x27c)](path[_0x132fc7(0xea)](configpath,'bot-'+_0x5bd3fe+_0x132fc7(0x20a))))fs[_0x132fc7(0x229)](path[_0x132fc7(0xea)](configpath,'bot-'+_0x5bd3fe+'-config.json'));if(fs[_0x132fc7(0x27c)](path['join'](configpath,'bot-'+_0x5bd3fe+_0x132fc7(0x13e))))fs[_0x132fc7(0x229)](path[_0x132fc7(0xea)](configpath,_0x132fc7(0xfd)+_0x5bd3fe+_0x132fc7(0x13e)));if(fs[_0x132fc7(0x27c)](path['join'](configpath,_0x132fc7(0xfd)+_0x5bd3fe+_0x132fc7(0x22a))))fs['unlinkSync'](path[_0x132fc7(0xea)](configpath,_0x132fc7(0xfd)+_0x5bd3fe+_0x132fc7(0x22a)));if(fs[_0x132fc7(0x27c)](path[_0x132fc7(0xea)](configpath,'bot-'+_0x5bd3fe+_0x132fc7(0x1b6))))fs[_0x132fc7(0x229)](path[_0x132fc7(0xea)](configpath,_0x132fc7(0xfd)+_0x5bd3fe+_0x132fc7(0x1b6)));}catch(_0x4dbdf4){if(_0x4dbdf4)logger[_0x132fc7(0x1d8)](_0x132fc7(0x283),_0x4dbdf4);}config=getConfiguration(),io['to']('botmanager')[_0x132fc7(0x2be)](_0x132fc7(0x1a4),config),broadcastToBots(_0x132fc7(0x1a4),JSON[_0x132fc7(0x198)](config));}function toggleBot(_0x2ca892,_0xf4b907,_0x156350){const _0x579ff9=_0x1b9d92;dbConfig[_0x579ff9(0x2ad)](_0x579ff9(0x1a4))['find']({'botID':_0x2ca892})[_0x579ff9(0x216)]({'status':_0xf4b907})[_0x579ff9(0x216)]({'live':_0x156350})[_0x579ff9(0x27f)]();const _0x1c02c9=botRef(_0x2ca892);if(_0xf4b907==_0x579ff9(0x209)||_0xf4b907==_0x579ff9(0x2ce))logger[_0x579ff9(0x1d8)]('Enabled\x20'+_0x1c02c9),startBot([_0x2ca892,userID],{'cwd':bbpath},function(_0x229b88){if(_0x229b88)logger['full'](_0x229b88);});else(_0xf4b907==_0x579ff9(0x11f)||_0xf4b907==_0x579ff9(0x137))&&(logger[_0x579ff9(0x1d8)](_0x579ff9(0x289)+_0x1c02c9),stopBot(_0x2ca892));config=getConfiguration(),io['to'](_0x579ff9(0x214))[_0x579ff9(0x2be)]('bots',config),broadcastToBots(_0x579ff9(0x1a4),JSON['stringify'](config));}function toggleStatus(_0xc01576){const _0x27cbf=_0x1b9d92;let _0x690ade=dbConfig[_0x27cbf(0x2ad)]('bots')['find']({'botID':_0xc01576})[_0x27cbf(0x2d4)](),_0x414cd9;if(_0x690ade[_0x27cbf(0x288)]===_0x27cbf(0x209))_0x414cd9=_0x27cbf(0x11f);else{if(_0x690ade[_0x27cbf(0x288)]==='new')_0x414cd9=_0x27cbf(0x137);else{if(_0x690ade[_0x27cbf(0x288)]===_0x27cbf(0x137))_0x414cd9=_0x27cbf(0x2ce);else{if(_0x690ade[_0x27cbf(0x288)]===_0x27cbf(0x11f))_0x414cd9=_0x27cbf(0x209);}}}return _0x414cd9;}function updateStatus(_0x56e5e0,_0x2c63a9){const _0x4fe711=_0x1b9d92;dbConfig['get']('bots')['find']({'botID':_0x56e5e0})['assign']({'status':_0x2c63a9})[_0x4fe711(0x27f)](),config=getConfiguration(),io['to'](_0x4fe711(0x214))[_0x4fe711(0x2be)](_0x4fe711(0x1a4),config),broadcastToBots(_0x4fe711(0x1a4),JSON[_0x4fe711(0x198)](config));}function updateLive(_0x12e863,_0x2e75f2){const _0x87f216=_0x1b9d92;dbConfig[_0x87f216(0x2ad)](_0x87f216(0x1a4))[_0x87f216(0x1b3)]({'botID':_0x12e863})[_0x87f216(0x216)]({'live':_0x2e75f2})[_0x87f216(0x27f)](),config=getConfiguration(),io['to'](_0x87f216(0x214))[_0x87f216(0x2be)](_0x87f216(0x1a4),config),broadcastToBots(_0x87f216(0x1a4),JSON[_0x87f216(0x198)](config));}function updateBotName(_0x53f34c,_0x58393c){const _0x3b494f=_0x1b9d92;dbConfig['get']('bots')['find']({'botID':_0x53f34c})['assign']({'botname':_0x58393c})[_0x3b494f(0x27f)](),config=getConfiguration(),io['to'](_0x3b494f(0x214))[_0x3b494f(0x2be)](_0x3b494f(0x1a4),config),broadcastToBots(_0x3b494f(0x1a4),JSON['stringify'](config));}function _0x2cb2(){const _0x13d475=['The\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','logs','lastmsgemitted','Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)','No\x20bots\x20running\x20right\x20now','isDirectory','***','\x20minutes','login2fa_','getSeconds','name','store','host','marketcapApi','Unauthorized\x20attempt\x20to\x20store\x20configuration','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','Unauthorized\x20attempt\x20to\x20get\x20portfolio','function','Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled','full',')\x20\x20\x20|\x20Bot\x20','format','Invalid\x20username\x20or\x20IP\x20address','2187LBgIKo','any','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','onepagemode','pki','generateAsync','timestamp','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','hasOwnProperty','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','5\x20min','telegrammsg','All\x20bots\x20running\x20right\x20now','disable','alerts','secure','yargs','showConfig','Running\x20#RED#Balance\x20Bot\x20v','SIGTERM','replace','password','headers','get-messages',':\x20Bot\x20Mgr\x20>\x20Telegram\x20error\x20occured','loginRequired','split','parse','stop','getMinutes','temporaryAccessAllowed','Unauthorized\x20attempt\x20to\x20confirm\x20message','listen','RSA-OAEP','error','cancel-loading','compareSync','sockets','allow','type','deleteHistoryAlerts','logged\x20out','temp/','\x20|\x20user:\x20...','\x20(1)','enabled','-config.json','backup-full.zip','internal','kind','store-configuration','download','get-portfolio','/disable\x20-\x20disable\x20notifications\x0a','startsWith','Bot\x20Mgr\x20>\x20Toggling\x20','botmanager','sha256','assign','user','graphql-request','order','tempaccess_15_','telegramToken','getMonth','config_orders','reinstall_yes','35222VEPloL','writeFileSync','stopped','close','names','update_no','/off\x20-\x20stop\x20bot(s)\x0a','Token\x20blacklisted','show','padStart','unlinkSync','-performance.json','disconnect','slice','referer','Logged\x20out\x20user\x20...','Ok,\x20will\x20send\x20alert\x20notifications\x20only','Deleted\x20Bot\x20','isIPv4MappedAddress','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','lastmsgtelegram','/names\x20-\x20show\x20bot\x20names\x0a','http://localhost:','files','Login\x20accepted','log','backup/','************','Password\x20has\x20been\x20reset\x20to:\x20','\x20>\x20','get-backup-files','debug','metrics','output-000.log','/download/:type','hashSync','telegramUsername','started','resetpw_no','restart','Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history','storeConfiguration','placeOrder','version','secret','Session\x20expired\x20for\x20user\x20...','Invalid\x20authentication\x20token\x20(1)','Password\x20reset\x20rejected','\x1b[33m','Access\x20enabled\x20for\x20','start','config_alerts','\x20|\x20client:\x20...','/:bot/performance','output-003.log','publicKeyToPem','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','BCT','update_yes','date-fns','sendFile','family','showname','bb-config.json','replyWithDocument','auto','post','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','2JXRphs','min','uuid-random','isValid','CoinMarketCap\x20API\x20key\x20validated','Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U','reject','You\x20can\x20use\x20the\x20following\x20commands:\x0a','publicKey','request','initclient','child_process','bot.js','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','conn',',\x20must\x20be\x20a\x204\x20digit\x20number','code','2FA','bbvNew','.zip','lowdb/adapters/FileSync','getTime','Error\x20sending\x20','Starting\x20Balance\x20Bot\x20reinstallation','/restart\x20-\x20restart\x20bot(s)\x0a','existsSync','decode64','Starting\x20#RED#Balance\x20Bot\x20v','write','Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot','reason','yes','Error\x20while\x20deleting\x20config\x20files:\x20','message','simple','ETH','Network\x20Interfaces:','status','Disabled\x20','2FA\x20login\x20required','express','crypto','delete-alerts','build2','Bot\x20','tempaccess_reject_','store-headless','endsWith','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run','30\x20min','/on\x20-\x20start\x20bot(s)\x0a','bbvReceive','filter','keys','botname','telegramEvents','all','send','statSync','mkdirSync','mtime','login2fa_reject_','temporary\x20token\x20generated','backup','Yes','privateKeyToPem','fork','init','build','All\x20bots',')\x20|\x20Bot\x20','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','login','file','get','2FA\x20login\x20token\x20generated','restore-backup-file','createWriteStream','node-forge','util','exec','login\x20not\x20required','Error\x20removing\x20old\x20backup\x20files:','includes','store-fiat','$1_$2_$3','Bot\x20Mgr\x20>\x20Starting\x20all\x20bots','bb-settings.json','Markdown','invalid\x20credentials','#RED#Balance\x20Bot\x20is\x20already\x20running\x20on\x20port\x20','emit','uuid','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','toggle_','File\x20uploaded','Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation','IPv4','storeFiat','update','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration','f2aRequired','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','Unauthorized\x20attempt\x20to\x20get\x20events','timeshift','orders','new','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','SIGINT','Bot\x20Mgr\x20>\x20','/upload-backup','\x1b[34m','value','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?','telegram2FaApproval','index.html','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','Backup\x20file\x20unzipped\x20and\x20stored','access\x20timeout','pidExpireLogin','telegraf','api-eu.mixpanel.com','telegramIpApproval','output-002.log','Unauthorized\x20attempt\x20to\x20delete\x20alerts','6b67f3d61ee94b8f5c80b4affef4c4d9','copyFileSync','44938bEDSAQ','config_all','lowdb','2FA\x20required','socket.io','status\x20code\x20401','username','createServer','callback','zip/','Ok,\x20will\x20send\x20order\x20notifications\x20only','Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot','0.0.0','Unauthorized\x20attempt\x20to\x20log\x20out','size','15\x20min','getFullYear','event','generateKeyPair','\x1b[31m','verify','Unauthorized\x20attempt\x20to\x20update\x20bot','pidRefreshToken','messages','resetpw_yes','place-order','Bot\x20Mgr\x20>\x20Stopping\x20all\x20bots','Unauthorized\x20attempt\x20to\x20show\x20configuration','staging','Error\x20details:','create','telegramChatId','update-bot','*$1*','493860OwGcEB','/help\x20-\x20show\x20available\x20commands\x0a','tempaccess_30_','mixpanel','mode','search','::1','1998018CeGVjQ','inherit','toIPv4MappedAddress','emitHistory','join','launch','2713140gpWnGy','1804oWLyFz','warning','reinstall_no','reset-password','Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files','inlineKeyboard','once','1000','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','Unauthorized\x20attempt\x20to\x20update\x20settings','#RES#\x20','string','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20','confirm-message','Failed\x20to\x20download\x20','sendPortfolioTelegram','bot-','number','jszip','config/','bb-secure.json','catch','telegram','http','apiKey','/backup\x20-\x20receive\x20backup\x20files\x0a','backup-full@','map','forEach','reply','restart_','/:bot/coins','Bot\x20Mgr\x20>\x20Stopping\x20','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','headless','private','Setting\x20access:\x20','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20see\x20logs\x20for\x20details','HTML','Unauthorized\x20login\x20attempt\x20(timeout)','readFileSync','6ioMdcD','Node.js\x20v','address','manual','Unauthorized\x20attempt\x20to\x20delete\x20bot','reset-history','tempaccess_5_','live','handshake','disabled','/output-000.log','hex','Orders','update-bb','socket','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)','131523nrLWDd','rsa','temporary\x20access\x20rejected','getDate','version.json','resetHistory','Invalid\x20IP\x20address','toggleBotMode','sendMessage','--------------------------------------','versions','=>\x20Go\x20to\x20#CYA#http://127.0.0.1:','get-starting-balances','Your\x20installation\x20is\x20already\x20up\x20to\x20date','sort','bb/','show-config','new-disabled','/:bot/portfolio','bot','editMessageReplyMarkup','kill','metrics_','::ffff:7f00:1','-events.json','enable','port','botID','(((.+)+)+)+$','decrypt','accept','token','127.0.0.1','\x20mode','production','exit','/logs\x20-\x20receive\x20log\x20files\x0a','/update\x20-\x20update\x20Balance\x20Bot\x0a','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','test','address\x20already\x20in\x20use','backup-files','on_','/start','encryptedUuid','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)','jsonwebtoken','logs/','Restore\x20process\x20aborted','constructor','environment','portfolio_','telegramEnabled','Backup\x20file\x20uploaded','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','=>\x20Go\x20to\x20#CYA#http://','output-001.log','8DaLELO','argv','Unauthorized\x20attempt\x20to\x20download\x20','backupfile','/:bot/history','\x20|\x20','remove','then','Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file','-----------------------------------------------------------------------------------','Starting\x20Balance\x20Bot\x20update','randomFillSync','2FA\x20login\x20rejected','tkn','login\x20token\x20generated','sendMetricsTelegram','Server','Restore\x20process\x20confirmed','NTBA_FIX_319','readdirSync','reinstall-bb','sign','_nsps','notification','logout','match','Notifications\x20enabled\x0a','[ip-address]','defaults','User\x20has\x20been\x20validated','expiry','success','Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?','chat','node','command','exchange','action','DEFLATE','apiSecret','use','Starting\x20(','Notifications\x20disabled','length','open','binary','userid','Login\x20rejected','/metrics\x20-\x20show\x20bot\x20performance\x0a','rmSync','delete-bot','range','backup-full','button','Bot\x20Mgr\x20>\x20Starting\x20','sortBy','stringify','toString','privateKey','push','static','help','getHours','blacklist','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run','from','Allow\x20login\x20from\x20IP\x20address\x20','exp','bots','access','bbUsername','get-logs','ipv6','settings','text','/enable\x20-\x20enable\x20notifications\x0a',':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20','reload','Alerts','bbPassword','latestversion','remoteAddress','config','find','Idling\x20(','set','-results.json','server','Telegram\x20error:','\x20to\x20','reinstall','|@|','Temporary\x20access\x20rejected','\x1b[0m','connection','clientip','Unauthorized\x20attempt\x20to\x20get\x20messages','add-bot','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','<b>Telegram\x20Bot\x20Status:</b>\x0a','ipc'];_0x2cb2=function(){return _0x13d475;};return _0x2cb2();}function updateBotManager(){const _0x16120b=_0x1b9d92;config=getConfiguration(),io['to'](_0x16120b(0x214))[_0x16120b(0x2be)](_0x16120b(0x1a4),config),broadcastToBots(_0x16120b(0x1a4),JSON['stringify'](config));}function toggleBotMode(_0x54fa7b){const _0x383739=_0x1b9d92;if(pid[_0x54fa7b])pid[_0x54fa7b][_0x383739(0x29c)]({'function':_0x383739(0x12d),'args':null});else{const _0x303cf6=configpath+'bot-'+_0x54fa7b+_0x383739(0x20a),_0x783feb=fs[_0x383739(0x115)](_0x303cf6),_0x200bc3=JSON['parse'](_0x783feb),_0x5e0215=_0x200bc3[_0x383739(0x139)][0x0][_0x383739(0x10f)];_0x200bc3[_0x383739(0x139)][0x0][_0x383739(0x10f)]=!_0x5e0215;const _0x5e5c64=JSON['stringify'](_0x200bc3,null,0x2);fs[_0x383739(0x220)](_0x303cf6,_0x5e5c64),config=getConfiguration(),io['to']('botmanager')[_0x383739(0x2be)](_0x383739(0x1a4),config),broadcastToBots('bots',JSON[_0x383739(0x198)](config));}}function validateTelegram(_0x41fb11){const _0x1b85b2=_0x1b9d92;if(_0x41fb11[_0x1b85b2(0x1a1)][_0x1b85b2(0xc3)]!=settings[_0x1b85b2(0x243)]&&'@'+_0x41fb11['from'][_0x1b85b2(0xc3)]!=settings[_0x1b85b2(0x243)]||_0x41fb11[_0x1b85b2(0x181)]['id']!=settings[_0x1b85b2(0xdc)])return sendTelegram(_0x41fb11[_0x1b85b2(0x181)]['id'],'Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings',{'parse_mode':_0x1b85b2(0x113)}),![];return!![];}function botRef(_0x45f0f7){const _0x4c6988=_0x1b9d92,_0x12ece0=getBotAttributes(_0x45f0f7),_0x9f41c9=_0x12ece0[_0x4c6988(0x25d)]?_0x12ece0[_0x4c6988(0x299)]:_0x4c6988(0x28f)+_0x45f0f7;return _0x9f41c9;}async function initTelegram(){const _0x2f3083=_0x1b9d92;tgBot&&(await tgBot['stop'](),await sleep(0x7d0));tgBot=new Telegraf(settings[_0x2f3083(0x21b)]);let _0x599541=_0x2f3083(0x26a);_0x599541+='\x0a',_0x599541+=_0x2f3083(0x1ab),_0x599541+=_0x2f3083(0x211),_0x599541+=_0x2f3083(0x14c),_0x599541+=_0x2f3083(0x27b),_0x599541+=_0x2f3083(0x295),_0x599541+=_0x2f3083(0x225),_0x599541+=_0x2f3083(0x257),_0x599541+=_0x2f3083(0x234),_0x599541+='/status\x20-\x20show\x20bot(s)\x20status\x0a',_0x599541+=_0x2f3083(0x190),_0x599541+=_0x2f3083(0x2d8),_0x599541+=_0x2f3083(0x14a),_0x599541+=_0x2f3083(0x106),_0x599541+=_0x2f3083(0x14b),_0x599541+='/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a',_0x599541+=_0x2f3083(0xe0);let _0x2afcc7='Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a';_0x2afcc7+='\x0a',_0x2afcc7+=_0x599541,tgBot[_0x2f3083(0x102)]((_0x4d1a1b,_0x4b8ca1)=>{const _0xd85445=_0x2f3083;logger[_0xd85445(0x285)](getTimeStamp()+_0xd85445(0x1f4)),logger[_0xd85445(0x23e)]('Telegraf\x20error:',_0x4d1a1b);}),tgBot[_0x2f3083(0x188)](async(_0x5c6676,_0x4dddef)=>{const _0x4ca6eb=_0x2f3083;if(settings[_0x4ca6eb(0xdc)]||_0x5c6676[_0x4ca6eb(0x2c6)][_0x4ca6eb(0x284)][_0x4ca6eb(0x1aa)]!=_0x4ca6eb(0x152)){if(!validateTelegram(_0x5c6676))return;}_0x4dddef();}),tgBot[_0x2f3083(0x183)](_0x2f3083(0x251),async _0x3ed9cd=>{const _0x467df3=_0x2f3083;if(_0x3ed9cd['from'][_0x467df3(0xc3)]==settings[_0x467df3(0x243)]||'@'+_0x3ed9cd[_0x467df3(0x1a1)]['username']==settings[_0x467df3(0x243)]){if(!settings[_0x467df3(0xdc)])updateSetting(_0x467df3(0xdc),_0x3ed9cd['chat']['id']);else{if(!validateTelegram(_0x3ed9cd))return;}}else{if(!validateTelegram(_0x3ed9cd))return;}updateSetting(_0x467df3(0x15b),!![]),await sendTelegram(_0x3ed9cd[_0x467df3(0x181)]['id'],_0x2afcc7);}),tgBot[_0x2f3083(0x183)](_0x2f3083(0x13f),async _0x19c065=>{const _0x416db0=_0x2f3083;updateSetting(_0x416db0(0x15b),!![]),await sendTelegram(_0x19c065[_0x416db0(0x181)]['id'],'Notifications\x20enabled');}),tgBot['command'](_0x2f3083(0x1e9),async _0x4526e6=>{const _0x1e681e=_0x2f3083;await sendTelegram(_0x4526e6['chat']['id'],_0x1e681e(0x18a)),updateSetting(_0x1e681e(0x15b),![]);}),tgBot[_0x2f3083(0x183)](_0x2f3083(0x1b2),async _0x583f17=>{const _0x58c66d=_0x2f3083,_0x2cd455=Markup['inlineKeyboard']([Markup[_0x58c66d(0x195)][_0x58c66d(0xc5)](_0x58c66d(0x122),'config_orders'),Markup[_0x58c66d(0x195)]['callback'](_0x58c66d(0x1ae),_0x58c66d(0x252)),Markup[_0x58c66d(0x195)][_0x58c66d(0xc5)]('All',_0x58c66d(0x2e4))]);_0x583f17['reply'](_0x58c66d(0x10e),_0x2cd455);}),tgBot[_0x2f3083(0x185)](_0x2f3083(0x21d),async _0x129774=>{const _0x275285=_0x2f3083;_0x129774[_0x275285(0x13a)](),updateSetting(_0x275285(0x29a),'orders'),updateSetting(_0x275285(0x15b),!![]),await sendTelegram(_0x129774[_0x275285(0x181)]['id'],_0x275285(0xc7));}),tgBot[_0x2f3083(0x185)](_0x2f3083(0x252),async _0x3e522f=>{const _0x48494c=_0x2f3083;_0x3e522f[_0x48494c(0x13a)](),updateSetting(_0x48494c(0x29a),_0x48494c(0x1ea)),updateSetting(_0x48494c(0x15b),!![]),await sendTelegram(_0x3e522f[_0x48494c(0x181)]['id'],_0x48494c(0x22f));}),tgBot[_0x2f3083(0x185)]('config_all',async _0xffb211=>{const _0x1a03bf=_0x2f3083;_0xffb211[_0x1a03bf(0x13a)](),updateSetting('telegramEvents','all'),updateSetting('telegramEnabled',!![]),await sendTelegram(_0xffb211[_0x1a03bf(0x181)]['id'],_0x1a03bf(0x2cf));}),tgBot['command'](_0x2f3083(0x288),async _0x560e9c=>{const _0x5cb8c4=_0x2f3083,_0x313012=getBotsWithMode();let _0x558e04='<b>Balance\x20Bot\x20Status:</b>\x0a';config[_0x5cb8c4(0x109)](_0x25a1e6=>{const _0x1b1bd2=_0x5cb8c4,_0x19a661=_0x313012[_0x1b1bd2(0x1b3)](_0x4560b7=>_0x4560b7['botID']==_0x25a1e6[_0x1b1bd2(0x141)])[_0x1b1bd2(0xe3)];_0x558e04+='Bot\x20'+_0x25a1e6[_0x1b1bd2(0x141)]+':\x20'+_0x25a1e6['status']+'\x20|\x20'+_0x19a661+_0x1b1bd2(0x165)+_0x25a1e6[_0x1b1bd2(0x11d)]+'\x0a';}),_0x558e04+='\x0a',_0x558e04+=_0x5cb8c4(0x1c3),_0x558e04+=!settings[_0x5cb8c4(0x15b)]?'Notifications\x20disabled\x0a':_0x5cb8c4(0x17a),_0x558e04+=settings[_0x5cb8c4(0x15b)]?settings[_0x5cb8c4(0x29a)]=='all'?'Notifications\x20types:\x20orders\x20and\x20alerts\x0a':'Notifications\x20types:\x20'+settings['telegramEvents']+'\x20only\x0a':'',await sendTelegram(_0x560e9c[_0x5cb8c4(0x181)]['id'],_0x558e04,{'parse_mode':_0x5cb8c4(0x113)});}),tgBot[_0x2f3083(0x183)](_0x2f3083(0x246),async _0x12a3a5=>{const _0x456912=_0x2f3083,_0x51993c=getEnabledBots();if(_0x51993c['length']==0x0)await sendTelegram(_0x12a3a5['chat']['id'],'No\x20bots\x20running\x20right\x20now');else{if(_0x51993c['length']>0x1)_0x51993c[_0x456912(0x19b)]({'botID':_0x456912(0x29b)});let _0x2f0807=[],_0x51a72e=[];const _0x3f4d04=_0x51993c['length']%0x4==0x0||_0x51993c[_0x456912(0x18b)]%0x4==0x3||_0x51993c[_0x456912(0x18b)]%0x3==0x1?0x4:0x3;let _0x52b07b=0x0;_0x51993c[_0x456912(0x109)]((_0xafd315,_0x2d7f69)=>{const _0x2607b1=_0x456912;if(_0x2d7f69%_0x3f4d04==0x0)_0x51a72e=[];_0x51a72e[_0x2607b1(0x19b)](Markup[_0x2607b1(0x195)]['callback'](_0xafd315[_0x2607b1(0x141)]==_0x2607b1(0x29b)?_0x2607b1(0x2a8):botRef(_0xafd315[_0x2607b1(0x141)]),_0x2607b1(0x10b)+_0xafd315[_0x2607b1(0x141)])),_0x2d7f69%_0x3f4d04==0x0&&(_0x2f0807[_0x52b07b]=_0x51a72e,_0x52b07b++);});const _0x2a148b=Markup[_0x456912(0xf2)](_0x2f0807);_0x12a3a5[_0x456912(0x10a)](_0x456912(0x270),_0x2a148b);}}),tgBot[_0x2f3083(0x185)](/restart_(.+)/,async _0x14bdd8=>{const _0x21353e=_0x2f3083,_0x9e86b5=_0x14bdd8[_0x21353e(0x179)][0x1];_0x14bdd8['editMessageReplyMarkup'](),_0x9e86b5==_0x21353e(0x29b)?config[_0x21353e(0x109)](_0x98d037=>{restartBot(_0x98d037['botID']);}):restartBot(_0x9e86b5);}),tgBot['command']('on',async _0x42a0f0=>{const _0x524844=_0x2f3083,_0x1a5693=getDisabledBots();if(_0x1a5693[_0x524844(0x18b)]==0x0)await sendTelegram(_0x42a0f0[_0x524844(0x181)]['id'],_0x524844(0x1e8));else{if(_0x1a5693[_0x524844(0x18b)]>0x1)_0x1a5693[_0x524844(0x19b)]({'botID':'all'});let _0x4fd7aa=[],_0x5bc031=[];const _0x28780e=_0x1a5693[_0x524844(0x18b)]%0x4==0x0||_0x1a5693[_0x524844(0x18b)]%0x4==0x3||_0x1a5693[_0x524844(0x18b)]%0x3==0x1?0x4:0x3;let _0x3a015d=0x0;_0x1a5693[_0x524844(0x109)]((_0x6eff8d,_0x1606e0)=>{const _0x2ed977=_0x524844;if(_0x1606e0%_0x28780e==0x0)_0x5bc031=[];_0x5bc031[_0x2ed977(0x19b)](Markup[_0x2ed977(0x195)][_0x2ed977(0xc5)](_0x6eff8d[_0x2ed977(0x141)]=='all'?_0x2ed977(0x2a8):botRef(_0x6eff8d[_0x2ed977(0x141)]),_0x2ed977(0x151)+_0x6eff8d['botID'])),_0x1606e0%_0x28780e==0x0&&(_0x4fd7aa[_0x3a015d]=_0x5bc031,_0x3a015d++);});const _0x43a554=Markup[_0x524844(0xf2)](_0x4fd7aa);_0x42a0f0[_0x524844(0x10a)](_0x524844(0x15d),_0x43a554);}}),tgBot[_0x2f3083(0x185)](/on_(.+)/,async _0x37adb0=>{const _0x4241bf=_0x2f3083,_0x5ad715=_0x37adb0[_0x4241bf(0x179)][0x1];_0x37adb0[_0x4241bf(0x13a)]();if(_0x5ad715==_0x4241bf(0x29b)){const _0x58aea1=getDisabledBots();await sendTelegram(_0x37adb0[_0x4241bf(0x181)]['id'],_0x4241bf(0x2b9)),_0x58aea1[_0x4241bf(0x109)](_0x183532=>{const _0x5ef88e=_0x4241bf;if(_0x183532[_0x5ef88e(0x141)]!=_0x5ef88e(0x29b))toggleBot(_0x183532['botID'],toggleStatus(_0x183532[_0x5ef88e(0x141)]),'stopped');});}else await sendTelegram(_0x37adb0['chat']['id'],_0x4241bf(0x196)+botRef(_0x5ad715)),toggleBot(_0x5ad715,toggleStatus(_0x5ad715),_0x4241bf(0x221));}),tgBot[_0x2f3083(0x183)]('off',async _0x1b5f46=>{const _0x498378=_0x2f3083,_0x38ef1a=getEnabledBots();if(_0x38ef1a[_0x498378(0x18b)]==0x0)await sendTelegram(_0x1b5f46[_0x498378(0x181)]['id'],'No\x20bots\x20running\x20right\x20now');else{if(_0x38ef1a[_0x498378(0x18b)]>0x1)_0x38ef1a[_0x498378(0x19b)]({'botID':'all'});let _0x204542=[],_0x3fcefa=[];const _0x59a21f=_0x38ef1a[_0x498378(0x18b)]%0x4==0x0||_0x38ef1a[_0x498378(0x18b)]%0x4==0x3||_0x38ef1a['length']%0x3==0x1?0x4:0x3;let _0x12c3c8=0x0;_0x38ef1a['forEach']((_0x1c3b7e,_0x3a2941)=>{const _0x327380=_0x498378;if(_0x3a2941%_0x59a21f==0x0)_0x3fcefa=[];_0x3fcefa[_0x327380(0x19b)](Markup[_0x327380(0x195)][_0x327380(0xc5)](_0x1c3b7e[_0x327380(0x141)]==_0x327380(0x29b)?_0x327380(0x2a8):botRef(_0x1c3b7e[_0x327380(0x141)]),'off_'+_0x1c3b7e[_0x327380(0x141)])),_0x3a2941%_0x59a21f==0x0&&(_0x204542[_0x12c3c8]=_0x3fcefa,_0x12c3c8++);});const _0x11ae21=Markup['inlineKeyboard'](_0x204542);_0x1b5f46['reply'](_0x498378(0x1c2),_0x11ae21);}}),tgBot['action'](/off_(.+)/,async _0x4e7df7=>{const _0x5d7ade=_0x2f3083,_0x3f02cf=_0x4e7df7['match'][0x1];_0x4e7df7[_0x5d7ade(0x13a)]();if(_0x3f02cf==_0x5d7ade(0x29b)){const _0x453e2b=getEnabledBots();await sendTelegram(_0x4e7df7['chat']['id'],_0x5d7ade(0xd7)),_0x453e2b['forEach'](_0x4b3519=>{const _0x52c341=_0x5d7ade;if(_0x4b3519[_0x52c341(0x141)]!=_0x52c341(0x29b))toggleBot(_0x4b3519['botID'],toggleStatus(_0x4b3519[_0x52c341(0x141)]),_0x52c341(0x221));});}else await sendTelegram(_0x4e7df7[_0x5d7ade(0x181)]['id'],_0x5d7ade(0x10d)+botRef(_0x3f02cf)),toggleBot(_0x3f02cf,toggleStatus(_0x3f02cf),'stopped');}),tgBot[_0x2f3083(0x183)](_0x2f3083(0x23f),async _0x56b125=>{const _0x499663=_0x2f3083,_0x4e0ec8=getEnabledBots();if(_0x4e0ec8[_0x499663(0x18b)]==0x0)await sendTelegram(_0x56b125[_0x499663(0x181)]['id'],_0x499663(0x1c9));else{if(_0x4e0ec8[_0x499663(0x18b)]>0x1){let _0x545f68=[],_0x380081=[];const _0xa3028=_0x4e0ec8[_0x499663(0x18b)]%0x4==0x0||_0x4e0ec8[_0x499663(0x18b)]%0x4==0x3||_0x4e0ec8['length']%0x3==0x1?0x4:0x3;let _0x2066e0=0x0;_0x4e0ec8[_0x499663(0x109)]((_0x5f16ae,_0x3768aa)=>{const _0x3d1845=_0x499663;if(_0x3768aa%_0xa3028==0x0)_0x380081=[];_0x380081[_0x3d1845(0x19b)](Markup['button'][_0x3d1845(0xc5)](botRef(_0x5f16ae[_0x3d1845(0x141)]),_0x3d1845(0x13c)+_0x5f16ae[_0x3d1845(0x141)])),_0x3768aa%_0xa3028==0x0&&(_0x545f68[_0x2066e0]=_0x380081,_0x2066e0++);});const _0x52a49f=Markup[_0x499663(0xf2)](_0x545f68);_0x56b125[_0x499663(0x10a)](_0x499663(0x2d5),_0x52a49f);}else{const _0x174c93=_0x4e0ec8[0x0][_0x499663(0x141)];if(pid[_0x174c93])pid[_0x174c93]['send']({'function':_0x499663(0x16f),'args':null});}}}),tgBot[_0x2f3083(0x185)](/metrics_(.+)/,async _0x12a82e=>{const _0xad2917=_0x2f3083,_0x2c6525=_0x12a82e[_0xad2917(0x179)][0x1];_0x12a82e['editMessageReplyMarkup']();if(pid[_0x2c6525])pid[_0x2c6525][_0xad2917(0x29c)]({'function':_0xad2917(0x16f),'args':null});}),tgBot['command']('portfolio',async _0x240975=>{const _0x6af05c=_0x2f3083,_0x203cd0=getEnabledBots();if(_0x203cd0['length']==0x0)await sendTelegram(_0x240975[_0x6af05c(0x181)]['id'],_0x6af05c(0x1c9));else{if(_0x203cd0[_0x6af05c(0x18b)]>0x1){let _0x228546=[],_0x379b19=[];const _0x17ef14=_0x203cd0[_0x6af05c(0x18b)]%0x4==0x0||_0x203cd0[_0x6af05c(0x18b)]%0x4==0x3||_0x203cd0[_0x6af05c(0x18b)]%0x3==0x1?0x4:0x3;let _0x5bddce=0x0;_0x203cd0[_0x6af05c(0x109)]((_0x62802e,_0x42bdc1)=>{const _0x15d0a6=_0x6af05c;if(_0x42bdc1%_0x17ef14==0x0)_0x379b19=[];_0x379b19[_0x15d0a6(0x19b)](Markup[_0x15d0a6(0x195)][_0x15d0a6(0xc5)](botRef(_0x62802e[_0x15d0a6(0x141)]),_0x15d0a6(0x15a)+_0x62802e[_0x15d0a6(0x141)])),_0x42bdc1%_0x17ef14==0x0&&(_0x228546[_0x5bddce]=_0x379b19,_0x5bddce++);});const _0x19c9c4=Markup[_0x6af05c(0xf2)](_0x228546);_0x240975[_0x6af05c(0x10a)](_0x6af05c(0x2ca),_0x19c9c4);}else{const _0x2caabb=_0x203cd0[0x0][_0x6af05c(0x141)];if(pid[_0x2caabb])pid[_0x2caabb][_0x6af05c(0x29c)]({'function':_0x6af05c(0xfc),'args':null});}}}),tgBot['action'](/portfolio_(.+)/,async _0x53811b=>{const _0x60c59e=_0x2f3083,_0x431017=_0x53811b[_0x60c59e(0x179)][0x1];_0x53811b[_0x60c59e(0x13a)]();if(pid[_0x431017])pid[_0x431017]['send']({'function':_0x60c59e(0xfc),'args':null});}),tgBot[_0x2f3083(0x183)](_0x2f3083(0x1c6),async _0x4182b5=>{const _0x33a398=_0x2f3083,_0x20035f=_0x33a398(0x1c6);await zipFiles(_0x20035f);const _0x2aa886=zippath+(_0x20035f+'.zip');_0x4182b5['replyWithDocument']({'source':_0x2aa886})['then'](()=>{})[_0x33a398(0x102)](_0x2b9de6=>logger['debug'](_0x33a398(0x279)+_0x20035f+'\x20files\x20over\x20Telegram:',_0x2b9de6));}),tgBot['command'](_0x2f3083(0x2a2),async _0x131827=>{const _0xbf8dba=_0x2f3083,_0x1d2674=_0xbf8dba(0x2a2);await backupConfigFiles(),await zipFiles(_0x1d2674);const _0x5c845d=zippath+(_0x1d2674+_0xbf8dba(0x276));_0x131827[_0xbf8dba(0x25f)]({'source':_0x5c845d})[_0xbf8dba(0x167)](()=>{})['catch'](_0x25db68=>logger[_0xbf8dba(0x23e)](_0xbf8dba(0x279)+_0x1d2674+'\x20files\x20over\x20Telegram:',_0x25db68));}),tgBot[_0x2f3083(0x183)]('update',async _0x4ffb35=>{const _0x5abfbc=_0x2f3083;await getMessages();if(!updateAvailable)await sendTelegram(_0x4ffb35[_0x5abfbc(0x181)]['id'],_0x5abfbc(0x133));else{if(!validInstallation)await sendTelegram(_0x4ffb35[_0x5abfbc(0x181)]['id'],_0x5abfbc(0x2aa));else{const _0x313c75=Markup[_0x5abfbc(0xf2)]([Markup[_0x5abfbc(0x195)][_0x5abfbc(0xc5)](_0x5abfbc(0x2a3),_0x5abfbc(0x259)),Markup['button'][_0x5abfbc(0xc5)]('No',_0x5abfbc(0x224))]);_0x4ffb35['reply']('Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?',_0x313c75);}}}),tgBot[_0x2f3083(0x185)](/update_(.+)/,async _0x3d3b26=>{const _0x2cbc76=_0x2f3083,_0x7a5cba=_0x3d3b26[_0x2cbc76(0x179)][0x1];_0x3d3b26['editMessageReplyMarkup'](),_0x7a5cba==_0x2cbc76(0x282)&&(await sendTelegram(_0x3d3b26['chat']['id'],_0x2cbc76(0x16a)),updateBB(_0x2cbc76(0x2c6))),_0x7a5cba=='no'&&await sendTelegram(_0x3d3b26['chat']['id'],'Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later');}),tgBot[_0x2f3083(0x183)]('reinstall',async _0x1a9555=>{const _0x2acdfb=_0x2f3083;if(!validInstallation)await sendTelegram(_0x1a9555[_0x2acdfb(0x181)]['id'],_0x2acdfb(0x2c3));else{const _0x405f18=Markup['inlineKeyboard']([Markup[_0x2acdfb(0x195)][_0x2acdfb(0xc5)](_0x2acdfb(0x2a3),_0x2acdfb(0x21e)),Markup['button'][_0x2acdfb(0xc5)]('No',_0x2acdfb(0xef))]);_0x1a9555[_0x2acdfb(0x10a)](_0x2acdfb(0x180),_0x405f18);}}),tgBot[_0x2f3083(0x185)](/reinstall_(.+)/,async _0x243c32=>{const _0x5af325=_0x2f3083,_0x3863cb=_0x243c32['match'][0x1];_0x243c32[_0x5af325(0x13a)](),_0x3863cb==_0x5af325(0x282)&&(await sendTelegram(_0x243c32['chat']['id'],_0x5af325(0x27a)),updateBB(_0x5af325(0x1ba))),_0x3863cb=='no'&&await sendTelegram(_0x243c32[_0x5af325(0x181)]['id'],_0x5af325(0x1d7));}),tgBot['command']('toggle',async _0x169a66=>{const _0x56dd28=_0x2f3083,_0x2ce762=getBotsWithMode();if(_0x2ce762['length']==0x0)await sendTelegram(_0x169a66[_0x56dd28(0x181)]['id'],_0x56dd28(0x1c9));else{let _0x3349cb=[],_0x3688cc=[];const _0x308273=0x2;let _0x422f5d=0x0;_0x2ce762[_0x56dd28(0x109)]((_0x1a39ee,_0x1c8774)=>{const _0x580510=_0x56dd28;if(_0x1c8774%_0x308273==0x0)_0x3688cc=[];_0x3688cc[_0x580510(0x19b)](Markup[_0x580510(0x195)]['callback'](botRef(_0x1a39ee[_0x580510(0x141)])+'\x20('+_0x1a39ee[_0x580510(0xe3)]+')',_0x580510(0x2c1)+_0x1a39ee[_0x580510(0x141)])),_0x1c8774%_0x308273==0x0&&(_0x3349cb[_0x422f5d]=_0x3688cc,_0x422f5d++);});const _0x226b91=Markup['inlineKeyboard'](_0x3349cb);_0x169a66[_0x56dd28(0x10a)](_0x56dd28(0x2c7),_0x226b91);}}),tgBot['action'](/toggle_(.+)/,async _0x368243=>{const _0x1cd618=_0x2f3083,_0x4350a5=_0x368243[_0x1cd618(0x179)][0x1];_0x368243[_0x1cd618(0x13a)]();const _0x3d7f05=getBotsWithMode(),_0x361eac=_0x3d7f05[_0x1cd618(0x1b3)](_0x5819ee=>_0x5819ee[_0x1cd618(0x141)]==_0x4350a5),_0x20bc96=_0x361eac[_0x1cd618(0xe3)]==_0x1cd618(0x260)?_0x1cd618(0x119):_0x1cd618(0x260);await sendTelegram(_0x368243[_0x1cd618(0x181)]['id'],_0x1cd618(0x213)+botRef(_0x361eac[_0x1cd618(0x141)])+_0x1cd618(0x1b9)+_0x20bc96+_0x1cd618(0x147)),toggleBotMode(_0x4350a5);}),tgBot[_0x2f3083(0x183)](_0x2f3083(0x223),async _0x57ed0a=>{const _0x15cc83=_0x2f3083;let _0x1fcd2b='';config['forEach'](_0x20bae0=>{const _0x25abe7=_0x2a10;_0x1fcd2b+=_0x25abe7(0x28f)+_0x20bae0['botID']+':\x20'+_0x20bae0[_0x25abe7(0x299)]+'\x0a';}),await sendTelegram(_0x57ed0a[_0x15cc83(0x181)]['id'],_0x1fcd2b,{'parse_mode':_0x15cc83(0x113)});}),tgBot[_0x2f3083(0x183)](_0x2f3083(0x19d),async _0x4986d8=>{const _0x3564b2=_0x2f3083;await sendTelegram(_0x4986d8[_0x3564b2(0x181)]['id'],_0x599541);}),process[_0x2f3083(0xf3)]('SIGINT',()=>tgBot['stop']('SIGINT')),process[_0x2f3083(0xf3)]('SIGTERM',()=>tgBot[_0x2f3083(0x1f8)](_0x2f3083(0x1ef))),tgBot[_0x2f3083(0xeb)]();}function disableTelegram(){const _0x269dab=_0x1b9d92;tgBot&&tgBot[_0x269dab(0x1f8)]();}async function sendTelegram(_0x76fe33,_0xe17aab,_0x3665f1){const _0x598f6e=_0x1b9d92;_0x3665f1={..._0x3665f1,'disable_web_page_preview':!![]};try{await tgBot[_0x598f6e(0x103)][_0x598f6e(0x12e)](_0x76fe33,_0xe17aab,_0x3665f1);}catch(_0x33a2b2){logger[_0x598f6e(0x23e)](_0x598f6e(0x1b8),_0x33a2b2);}}async function sendTelegramBot(_0x463371,_0x2b1118){const _0x1f090e=_0x1b9d92;if(settings[_0x1f090e(0x15b)]){if(settings[_0x1f090e(0x29a)]==_0x1f090e(0x29b)||(_0x2b1118[_0x1f090e(0x203)]==_0x1f090e(0x1fe)||_0x2b1118['type']==_0x1f090e(0xee)||_0x2b1118[_0x1f090e(0x203)]==_0x1f090e(0x17f))&&settings['telegramEvents']==_0x1f090e(0x1ea)||_0x2b1118[_0x1f090e(0x203)]==_0x1f090e(0x219)&&settings[_0x1f090e(0x29a)]==_0x1f090e(0x2cd)){if(tgBot&&settings['telegramChatId']){if(_0x2b1118[_0x1f090e(0x25d)])await sendTelegram(settings['telegramChatId'],_0x2b1118[_0x1f090e(0x299)]+_0x1f090e(0x23c)+_0x2b1118[_0x1f090e(0xce)]);else await sendTelegram(settings[_0x1f090e(0xdc)],_0x1f090e(0x28f)+_0x463371+_0x1f090e(0x23c)+_0x2b1118[_0x1f090e(0xce)]);}}}}async function sendTelegramMsg(_0x48f292,_0x4376a5=_0x1b9d92(0x113)){const _0x31e160=_0x1b9d92;return tgBot&&settings[_0x31e160(0xdc)]?(await sendTelegram(settings[_0x31e160(0xdc)],_0x48f292,{'parse_mode':_0x4376a5}),!![]):![];}function getDeviceWithIp(_0x5306fa){const _0x514a9a=_0x1b9d92;return devices[_0x514a9a(0x1b3)](_0x2743dc=>_0x2743dc['ip']===_0x5306fa);}async function temporaryAccess2FA(_0x35a587,_0x27c38b){const _0x4318b9=_0x1b9d92;let _0x18af7b=new Date(),_0x25d413=![];if(lastIpApproval){if(_0x18af7b-lastIpApproval<0x1388)_0x25d413=!![];}lastIpApproval=new Date();if(_0x25d413)return;if(tgBot&&settings[_0x4318b9(0xdc)]){const _0x5648bd=uuidRandom();tmpStorage[_0x5648bd]={'uuid':_0x35a587,'externalip':_0x27c38b};const _0x93719b=Markup[_0x4318b9(0xf2)]([Markup[_0x4318b9(0x195)]['callback'](_0x4318b9(0x1e6),_0x4318b9(0x11c)+_0x5648bd),Markup['button'][_0x4318b9(0xc5)](_0x4318b9(0xcc),_0x4318b9(0x21a)+_0x5648bd),Markup[_0x4318b9(0x195)][_0x4318b9(0xc5)](_0x4318b9(0x294),_0x4318b9(0xe1)+_0x5648bd),Markup[_0x4318b9(0x195)][_0x4318b9(0xc5)]('reject',_0x4318b9(0x290)+_0x5648bd)]);await sendTelegram(settings[_0x4318b9(0xdc)],_0x4318b9(0xf9)+normalizeIP(_0x27c38b)[_0x4318b9(0x227)]+'\x20?',_0x93719b),tgBot[_0x4318b9(0x185)](/tempaccess_(.+)_(.+)/,async _0x5ee611=>{const _0x250958=_0x4318b9,_0x4ec6d9=_0x5ee611[_0x250958(0x179)][0x1],_0x58e825=_0x5ee611[_0x250958(0x179)][0x2],{uuid:_0xd548a9,externalip:_0x260a00}=tmpStorage[_0x58e825];delete tmpStorage[_0x58e825],_0x5ee611[_0x250958(0x13a)](),devices[_0xd548a9]['telegramIpApproval']={'clientip':_0x260a00,'timestamp':new Date()[_0x250958(0x278)](),'expiry':_0x4ec6d9},_0x4ec6d9!='reject'?(await sendTelegram(_0x5ee611[_0x250958(0x181)]['id'],_0x250958(0x250)+_0x4ec6d9+_0x250958(0x1cc),{'parse_mode':_0x250958(0x113)}),io['to'](_0xd548a9)[_0x250958(0x2be)](_0x250958(0x288),{'access':{'allow':![],'reason':_0x250958(0x1ad),'token':null}})):(await sendTelegram(_0x5ee611[_0x250958(0x181)]['id'],_0x250958(0x1bc)),io['to'](_0xd548a9)['emit'](_0x250958(0x288),{'access':{'allow':![],'reason':_0x250958(0x128),'token':null}}));});}}async function loginAccess2FA(_0x5371ed,_0xa5b658){const _0x16971e=_0x1b9d92;if(tgBot&&settings[_0x16971e(0xdc)]){const _0x8f9699=uuidRandom();tmpStorage[_0x8f9699]={'uuid':_0x5371ed,'externalip':_0xa5b658};const _0x3a6f4b=Markup[_0x16971e(0xf2)]([Markup[_0x16971e(0x195)][_0x16971e(0xc5)](_0x16971e(0x144),_0x16971e(0x1cd)+loginExpiry+'_'+_0x8f9699),Markup[_0x16971e(0x195)][_0x16971e(0xc5)]('reject',_0x16971e(0x2a0)+_0x8f9699)]);await sendTelegram(settings[_0x16971e(0xdc)],_0x16971e(0x1a2)+normalizeIP(_0xa5b658)[_0x16971e(0x227)]+'\x20?',_0x3a6f4b),tgBot[_0x16971e(0x185)](/login2fa_(.+)_(.+)/,async _0x269597=>{const _0x310d52=_0x16971e,_0x562a76=_0x269597[_0x310d52(0x179)][0x1],_0x4a9c5d=_0x269597[_0x310d52(0x179)][0x2],{uuid:_0x21feca,externalip:_0x4aabd5}=tmpStorage[_0x4a9c5d];delete tmpStorage[_0x4a9c5d],_0x269597[_0x310d52(0x13a)](),devices[_0x21feca][_0x310d52(0x2d6)]={'clientip':_0x4aabd5,'timestamp':new Date()['getTime'](),'expiry':_0x562a76},_0x562a76!='reject'?(await sendTelegram(_0x269597['chat']['id'],_0x310d52(0x237),{'parse_mode':'HTML'}),io['to'](_0x21feca)[_0x310d52(0x2be)](_0x310d52(0x288),{'access':{'allow':![],'reason':_0x310d52(0x1ad),'token':null}})):(await sendTelegram(_0x269597[_0x310d52(0x181)]['id'],_0x310d52(0x18f)),io['to'](_0x21feca)[_0x310d52(0x2be)](_0x310d52(0x288),{'access':{'allow':![],'reason':_0x310d52(0x16c),'token':null}}));});}}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x371016=_0x1b9d92;return dbConfig[_0x371016(0x2ad)](_0x371016(0x1a4))[_0x371016(0x197)](_0x371016(0x141))[_0x371016(0x297)]({'status':_0x371016(0x209)})[_0x371016(0x2d4)]()||[];}function getDisabledBots(){const _0x24d5a0=_0x1b9d92;return dbConfig[_0x24d5a0(0x2ad)](_0x24d5a0(0x1a4))['sortBy'](_0x24d5a0(0x141))[_0x24d5a0(0x297)]({'status':_0x24d5a0(0x11f)})[_0x24d5a0(0x2d4)]()||[];}function getBotAttributes(_0x5f292b){const _0x3c0697=_0x1b9d92;let _0x11ce3d={};const _0x2c86c9=configpath+_0x3c0697(0xfd)+_0x5f292b+_0x3c0697(0x20a),_0x4e066b=fs['existsSync'](_0x2c86c9);if(_0x4e066b){const _0x2ab76e=fs[_0x3c0697(0x115)](_0x2c86c9);try{const _0x2b5119=JSON[_0x3c0697(0x1f7)](_0x2ab76e),_0x20265f=_0x2b5119?_0x2b5119['bot'][0x0][_0x3c0697(0x10f)]:![];_0x11ce3d[_0x3c0697(0xe3)]=_0x20265f?_0x3c0697(0x260):_0x3c0697(0x119),_0x11ce3d[_0x3c0697(0x299)]=_0x2b5119?_0x2b5119[_0x3c0697(0x139)][0x0]['botname']:'Bot\x20'+_0x5f292b,_0x11ce3d['showname']=_0x2b5119?_0x2b5119[_0x3c0697(0x139)][0x0][_0x3c0697(0x25d)]:![];}catch(_0x1261fa){_0x11ce3d[_0x3c0697(0xe3)]=_0x3c0697(0x119),_0x11ce3d[_0x3c0697(0x299)]=_0x3c0697(0x28f)+_0x5f292b,_0x11ce3d[_0x3c0697(0x25d)]=![];}}else _0x11ce3d['mode']=_0x3c0697(0x119),_0x11ce3d[_0x3c0697(0x299)]='Bot\x20'+_0x5f292b,_0x11ce3d[_0x3c0697(0x25d)]=![];return _0x11ce3d;}function getBotsWithMode(){const _0x59c442=_0x1b9d92,_0x35dd0f=dbConfig[_0x59c442(0x2ad)](_0x59c442(0x1a4))[_0x59c442(0x197)](_0x59c442(0x141))['value']()||[];return _0x35dd0f[_0x59c442(0x109)](_0x18086f=>{const _0x164c41=_0x59c442;let _0x3e45a2=getBotAttributes(_0x18086f[_0x164c41(0x141)]);_0x18086f[_0x164c41(0xe3)]=_0x3e45a2[_0x164c41(0xe3)];}),_0x35dd0f;}function getBotExchanges(){const _0x565187=_0x1b9d92;let _0x3b2281=[];const _0x87469f=dbConfig['get'](_0x565187(0x1a4))[_0x565187(0x197)](_0x565187(0x141))[_0x565187(0x2d4)]()||[];_0x87469f[_0x565187(0x109)](_0x5e838b=>{const _0x23e63b=_0x565187;if(_0x5e838b['status']==_0x23e63b(0x209)){const _0xb36771=configpath+'bot-'+_0x5e838b[_0x23e63b(0x141)]+_0x23e63b(0x20a),_0x444673=fs[_0x23e63b(0x27c)](_0xb36771);let _0x1f4367;if(_0x444673){const _0x51965a=fs['readFileSync'](_0xb36771);try{const _0x146211=JSON[_0x23e63b(0x1f7)](_0x51965a);_0x1f4367=_0x146211?_0x146211[_0x23e63b(0x139)][0x0][_0x23e63b(0x184)]:null;}catch(_0x1c28ca){}}if(_0x1f4367)_0x3b2281['push'](_0x1f4367);}});const _0x98f49b=[...new Set(_0x3b2281)][_0x565187(0x134)]();return _0x98f49b;}async function initUser(){const _0x12d0e7=_0x1b9d92;if(!settings[_0x12d0e7(0x18e)]){const _0x4e5b62=uuidRandom();mixpanel['alias'](_0x4e5b62),updateSetting(_0x12d0e7(0x18e),_0x4e5b62);}}async function initSecure(){const _0x13a9b0=_0x1b9d92;let _0x1eefa0=getSecure();if(!_0x1eefa0['hasOwnProperty'](_0x13a9b0(0x24b))){let _0x5192b9=await generateKeys();_0x1eefa0[_0x13a9b0(0x26b)]=_0x5192b9['publicKey'],_0x1eefa0[_0x13a9b0(0x19a)]=_0x5192b9[_0x13a9b0(0x19a)],_0x1eefa0[_0x13a9b0(0x24b)]=crypto['randomBytes'](0x20)['toString'](_0x13a9b0(0x121));;storeSecure(_0x1eefa0);}}function _0x2a10(_0x47dd1f,_0x14fb41){const _0x24c19a=_0x2cb2();return _0x2a10=function(_0x314257,_0x3cfee2){_0x314257=_0x314257-0xc2;let _0x2cb24e=_0x24c19a[_0x314257];return _0x2cb24e;},_0x2a10(_0x47dd1f,_0x14fb41);}function getSettings(){const _0x482642=_0x1b9d92;return dbSettings[_0x482642(0x2ad)]('settings')[_0x482642(0x2d4)]()||{};}function getSecure(){const _0x510961=_0x1b9d92;return dbSecure[_0x510961(0x2ad)](_0x510961(0x1eb))[_0x510961(0x2d4)]()||{};}function getBlacklist(){const _0xec9337=_0x1b9d92;return dbSecure[_0xec9337(0x2ad)](_0xec9337(0x19f))[_0xec9337(0x2d4)]()||[];}function broadcastToBots(_0x2d56bb,_0x2caea7){const _0x437af3=_0x1b9d92;config[_0x437af3(0x109)](_0x40c549=>{const _0x1c76ce=_0x437af3;if(_0x40c549[_0x1c76ce(0x288)]=='enabled'&&_0x40c549[_0x1c76ce(0x11d)]=='running'||_0x40c549[_0x1c76ce(0x288)]==_0x1c76ce(0x2ce)&&_0x40c549['live']=='running'){if(pid[_0x40c549[_0x1c76ce(0x141)]])pid[_0x40c549[_0x1c76ce(0x141)]]['send']({[_0x2d56bb]:_0x2caea7});}});}async function storeSettings(_0x48df3c,_0x4bf20e=![]){const _0x2d4b38=_0x1b9d92;_0x48df3c={...settings,..._0x48df3c};if(_0x4bf20e&&_0x48df3c['bbPassword']!='************'&&_0x48df3c[_0x2d4b38(0x1af)]!=_0x2d4b38(0x1cb)&&_0x48df3c[_0x2d4b38(0x1af)]!=''){const _0x50e453=decryptRSA(secure[_0x2d4b38(0x19a)],_0x48df3c[_0x2d4b38(0x1af)])[_0x2d4b38(0x1f6)]('|@|')[0x0],_0x37b30c=bcrypt[_0x2d4b38(0x242)](_0x50e453,saltRounds);_0x48df3c={..._0x48df3c,'bbPassword':_0x37b30c};}if(_0x4bf20e&&_0x48df3c[_0x2d4b38(0x21b)]!=_0x2d4b38(0x23a)&&_0x48df3c[_0x2d4b38(0x21b)]!=_0x2d4b38(0x1cb)&&_0x48df3c[_0x2d4b38(0x21b)]!=''){const _0x26649b=decryptRSA(secure[_0x2d4b38(0x19a)],_0x48df3c[_0x2d4b38(0x21b)])[_0x2d4b38(0x1f6)](_0x2d4b38(0x1bb))[0x0];_0x48df3c={..._0x48df3c,'telegramToken':_0x26649b};}if(_0x4bf20e&&_0x48df3c[_0x2d4b38(0x1d2)]!=_0x2d4b38(0x23a)&&_0x48df3c[_0x2d4b38(0x1d2)]!='***'&&_0x48df3c['marketcapApi']!=''){const _0x46ad23=decryptRSA(secure['privateKey'],_0x48df3c[_0x2d4b38(0x1d2)])[_0x2d4b38(0x1f6)](_0x2d4b38(0x1bb))[0x0];_0x48df3c={..._0x48df3c,'marketcapApi':_0x46ad23};}const _0x21f6ca=_0x48df3c[_0x2d4b38(0x21b)]!=_0x2d4b38(0x23a)&&_0x48df3c[_0x2d4b38(0x21b)]!=settings[_0x2d4b38(0x21b)]||_0x48df3c[_0x2d4b38(0x243)]!=settings[_0x2d4b38(0x243)],_0x2e3026=_0x48df3c[_0x2d4b38(0x21b)]==''||_0x48df3c['telegramUsername']=='',_0x2d830b=_0x48df3c[_0x2d4b38(0x1d2)]&&_0x48df3c[_0x2d4b38(0x1d2)]!='************'&&_0x48df3c[_0x2d4b38(0x1d2)]!=settings[_0x2d4b38(0x1d2)];_0x21f6ca&&(_0x48df3c[_0x2d4b38(0xdc)]=null,_0x48df3c['telegramEvents']=_0x2d4b38(0x29b));for(const [_0x3fa044,_0x2362dd]of Object['entries'](_0x48df3c)){if(_0x3fa044==_0x2d4b38(0x21b)&&_0x2362dd==_0x2d4b38(0x23a)){_0x48df3c[_0x2d4b38(0x21b)]=settings['telegramToken'];continue;};if(_0x3fa044=='bbPassword'&&_0x2362dd==_0x2d4b38(0x23a)){_0x48df3c[_0x2d4b38(0x1af)]=settings[_0x2d4b38(0x1af)];continue;};if(_0x3fa044==_0x2d4b38(0x1d2)&&_0x2362dd==_0x2d4b38(0x23a)){_0x48df3c[_0x2d4b38(0x1d2)]=settings[_0x2d4b38(0x1d2)];continue;};dbSettings[_0x2d4b38(0x1b5)]('settings.'+_0x3fa044,_0x2362dd)[_0x2d4b38(0x27f)]();}settings=_0x48df3c,io['to']('botmanager')['emit'](_0x2d4b38(0x1a9),cleanSettings()),broadcastToBots(_0x2d4b38(0x2cc),settings[_0x2d4b38(0x2cc)]),broadcastToBots(_0x2d4b38(0x1df),settings[_0x2d4b38(0x1df)]),broadcastToBots(_0x2d4b38(0x1d2),settings[_0x2d4b38(0x1d2)]);if(_0x21f6ca&&!_0x2e3026)initTelegram();_0x21f6ca&&_0x2e3026&&(updateSetting(_0x2d4b38(0xdc),null),disableTelegram()),getAllClients()[_0x2d4b38(0x109)](_0x4c3515=>{const _0x38bccd=_0x2d4b38;getSocket(_0x4c3515['id'])[_0x38bccd(0x2be)](_0x38bccd(0x288),{'access':{'allow':![],'reason':_0x38bccd(0x1ad),'token':null}});}),_0x2d830b&&(await sleep(0xbb8),testMarketcapApi(_0x48df3c[_0x2d4b38(0x1d2)]));}async function testMarketcapApi(_0x54d411){const _0x3c232e=_0x1b9d92,_0x51be79=[_0x3c232e(0x258),_0x3c232e(0x286)];try{await axios[_0x3c232e(0x2ad)](_0x3c232e(0x2c0),{'headers':{'X-CMC_PRO_API_KEY':_0x54d411},'params':{'symbol':_0x51be79[_0x3c232e(0x199)]()}});}catch(_0x62d0e0){_0x62d0e0[_0x3c232e(0x199)]()['includes'](_0x3c232e(0xc2))?(io['to']('botmanager')[_0x3c232e(0x2be)](_0x3c232e(0x177),_0x3c232e(0xf5)),logger[_0x3c232e(0x1d8)]('CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager')):(io['to']('botmanager')[_0x3c232e(0x2be)](_0x3c232e(0x177),_0x3c232e(0x112)),logger[_0x3c232e(0x1d8)](_0x3c232e(0x112)),logger[_0x3c232e(0x23e)](_0x3c232e(0xda),_0x62d0e0[_0x3c232e(0x199)]()+'\x20-\x20'+_0x62d0e0[_0x3c232e(0x273)]));return;}logger[_0x3c232e(0x23e)](_0x3c232e(0x267));}function updateSetting(_0x435b8f,_0x47b53b){const _0x16a81b=_0x1b9d92;dbSettings['set']('settings.'+_0x435b8f,_0x47b53b)[_0x16a81b(0x27f)](),settings=getSettings(),io['to'](_0x16a81b(0x214))[_0x16a81b(0x2be)](_0x16a81b(0x1a9),cleanSettings());}function storeSecure(_0x516f19){const _0x15ad57=_0x1b9d92;dbSecure[_0x15ad57(0x2ad)](_0x15ad57(0x1eb))['push'](_0x516f19)[_0x15ad57(0x27f)](),secure=_0x516f19;}function addBlacklist(_0x3ccb50){const _0x4050dc=_0x1b9d92;cleanBlacklist();let _0x5ab29d;devices[_0x3ccb50][_0x4050dc(0x2de)]?_0x5ab29d=Math['max'](devices[_0x3ccb50][_0x4050dc(0x2de)]['expiry'],loginExpiry):_0x5ab29d=loginExpiry,dbSecure[_0x4050dc(0x2ad)](_0x4050dc(0x19f))[_0x4050dc(0x19b)]({'expiry':new Date()[_0x4050dc(0x278)]()+_0x5ab29d*0x3c*0x3e8,'token':devices[_0x3ccb50][_0x4050dc(0x1a5)]['token']})[_0x4050dc(0x27f)](),blacklist=dbSecure[_0x4050dc(0x2ad)](_0x4050dc(0x19f))[_0x4050dc(0x2d4)]();}function cleanBlacklist(){const _0x10e20c=_0x1b9d92;let _0x4309ca=dbSecure[_0x10e20c(0x2ad)](_0x10e20c(0x19f))['cloneDeep']()[_0x10e20c(0x2d4)](),_0x493cd4=new Date()['getTime']();_0x4309ca['forEach'](_0x264a87=>{const _0x218fe6=_0x10e20c;_0x264a87[_0x218fe6(0x17e)]<_0x493cd4&&dbSecure[_0x218fe6(0x2ad)](_0x218fe6(0x19f))[_0x218fe6(0x166)]({'expiry':_0x264a87['expiry']})['write']();});}function initStates(){const _0x13ceac=_0x1b9d92;let _0x3f2259=getConfiguration();_0x3f2259[_0x13ceac(0x109)](_0x152fd4=>{const _0x1748fb=_0x13ceac;_0x152fd4[_0x1748fb(0x11d)]='stopped';}),storeConfiguration(_0x3f2259);}async function generateKeys(){const _0x257465=_0x1b9d92,_0x403c82=forge['pki'][_0x257465(0x127)][_0x257465(0xcf)]({'bits':0x1000,'e':0x10001}),_0x3266f8=forge[_0x257465(0x1e0)][_0x257465(0x2a4)](_0x403c82[_0x257465(0x19a)]),_0x8d3243=forge[_0x257465(0x1e0)][_0x257465(0x256)](_0x403c82[_0x257465(0x26b)]);return{'privateKey':_0x3266f8,'publicKey':_0x8d3243};}async function oneTimeMigration(){const _0x34f4d8=_0x1b9d92;let _0x326859=getSettings(),_0x44c40a=![];!_0x326859[_0x34f4d8(0x1e4)](_0x34f4d8(0x233))&&(_0x326859[_0x34f4d8(0x233)]=0x0,_0x44c40a=!![]);!_0x326859[_0x34f4d8(0x1e4)](_0x34f4d8(0x1c7))&&(_0x326859[_0x34f4d8(0x1c7)]=0x0,_0x44c40a=!![]);!_0x326859[_0x34f4d8(0x1e4)](_0x34f4d8(0x1b0))&&(_0x326859[_0x34f4d8(0x1b0)]=_0x34f4d8(0xc9),_0x44c40a=!![]);!_0x326859[_0x34f4d8(0x1e4)](_0x34f4d8(0x1df))&&(_0x326859[_0x34f4d8(0x1df)]=![],_0x44c40a=!![]);!_0x326859[_0x34f4d8(0x1e4)](_0x34f4d8(0x1d2))&&(_0x326859['marketcapApi']='',_0x44c40a=!![]);if(_0x44c40a)storeSettings(_0x326859);try{fs[_0x34f4d8(0x173)](configbackuppath,{'withFileTypes':!![]})['forEach'](_0x19ab44=>{const _0x19d6e4=_0x34f4d8;if(!_0x19ab44['isDirectory']()){if(!_0x19ab44[_0x19d6e4(0x1cf)][_0x19d6e4(0x212)](_0x19d6e4(0x107)))fs[_0x19d6e4(0x229)](configbackuppath+_0x19ab44['name']);}else fs[_0x19d6e4(0x191)](configbackuppath+_0x19ab44[_0x19d6e4(0x1cf)],{'recursive':!![]});});}catch(_0x5b5d84){logger[_0x34f4d8(0x23e)](_0x34f4d8(0x2b5),_0x5b5d84);}}function storeConfiguration(_0x1b8d77){const _0x496d12=_0x1b9d92;dbConfig['get'](_0x496d12(0x1a4))[_0x496d12(0x166)]()[_0x496d12(0x27f)](),dbConfig[_0x496d12(0x2ad)]('bots')[_0x496d12(0x19b)](..._0x1b8d77)[_0x496d12(0x27f)](),config=_0x1b8d77;}async function resetPassword(){const _0x7edc39=_0x1b9d92;if(tgBot&&settings[_0x7edc39(0xdc)]){const _0x48b950=Markup[_0x7edc39(0xf2)]([Markup[_0x7edc39(0x195)][_0x7edc39(0xc5)](_0x7edc39(0x282),_0x7edc39(0xd5)),Markup[_0x7edc39(0x195)][_0x7edc39(0xc5)]('no',_0x7edc39(0x245))]);await sendTelegram(settings['telegramChatId'],_0x7edc39(0x1d4),_0x48b950),tgBot[_0x7edc39(0x185)](/resetpw_(.+)/,async _0xcbcc48=>{const _0x4b5ae3=_0x7edc39,_0x467e16=_0xcbcc48[_0x4b5ae3(0x179)][0x1];_0xcbcc48[_0x4b5ae3(0x13a)]();if(_0x467e16!='no'){const _0x4bd724=0xf,_0x3c6855=_0x4b5ae3(0x14d),_0xfdc937=Array[_0x4b5ae3(0x1a1)](crypto[_0x4b5ae3(0x16b)](new Uint32Array(_0x4bd724)))[_0x4b5ae3(0x108)](_0x56d2db=>_0x3c6855[_0x56d2db%_0x3c6855[_0x4b5ae3(0x18b)]])[_0x4b5ae3(0xea)](''),_0x2253ae=bcrypt[_0x4b5ae3(0x242)](_0xfdc937,saltRounds);storeSettings({'bbPassword':_0x2253ae}),await sendTelegram(_0xcbcc48[_0x4b5ae3(0x181)]['id'],_0x4b5ae3(0x23b)+_0xfdc937,{'parse_mode':'HTML'});}else await sendTelegram(_0xcbcc48['chat']['id'],_0x4b5ae3(0x24e));});}}async function confirmRestore(_0x45d861,_0xebb5cb){const _0x4330bb=_0x1b9d92;io['to'](_0x4330bb(0x214))[_0x4330bb(0x2be)](_0x4330bb(0x177),_0x4330bb(0x280),'success');if(tgBot&&settings[_0x4330bb(0xdc)]){const _0xc0c8b=uuidRandom();tmpStorage[_0xc0c8b]={'path':_0x45d861,'filename':_0xebb5cb};const _0x5abb8b=Markup[_0x4330bb(0xf2)]([Markup[_0x4330bb(0x195)]['callback'](_0x4330bb(0x282),'restore_yes_'+_0xc0c8b),Markup[_0x4330bb(0x195)][_0x4330bb(0xc5)]('no','restore_no_'+_0xc0c8b)]);await sendTelegram(settings['telegramChatId'],_0x4330bb(0x1c8),_0x5abb8b),tgBot[_0x4330bb(0x185)](/restore_(.+)_(.+)/,async _0x53e219=>{const _0x2820b5=_0x4330bb,_0x3532a4=_0x53e219[_0x2820b5(0x179)][0x1],_0x42af82=_0x53e219['match'][0x2],{path:_0x18a0b6,filename:_0x25ac31}=tmpStorage[_0x42af82];delete tmpStorage[_0x42af82],_0x53e219[_0x2820b5(0x13a)](),_0x3532a4=='yes'?(logger[_0x2820b5(0x23e)](_0x2820b5(0x171)),await sendTelegram(_0x53e219[_0x2820b5(0x181)]['id'],'Restoring\x20bot(s)\x20from\x20backup',{'parse_mode':_0x2820b5(0x113)}),unzipFile(_0x18a0b6,_0x25ac31)):(logger[_0x2820b5(0x23e)](_0x2820b5(0x157)),await sendTelegram(_0x53e219[_0x2820b5(0x181)]['id'],'Restore\x20process\x20aborted'));});}}function getServerTime(){const _0x14c74c=_0x1b9d92,_0x466c41=new Date();return _0x466c41[_0x14c74c(0xcd)]()+'/'+(_0x466c41['getMonth']()+0x1)[_0x14c74c(0x199)]()[_0x14c74c(0x228)](0x2,'0')+'/'+_0x466c41[_0x14c74c(0x129)]()[_0x14c74c(0x199)]()[_0x14c74c(0x228)](0x2,'0')+'\x20'+_0x466c41[_0x14c74c(0x19e)]()[_0x14c74c(0x199)]()[_0x14c74c(0x228)](0x2,'0')+':'+_0x466c41[_0x14c74c(0x1f9)]()[_0x14c74c(0x199)]()['padStart'](0x2,'0')+':'+_0x466c41[_0x14c74c(0x1ce)]()['toString']()[_0x14c74c(0x228)](0x2,'0');}function getTimeStamp(){const _0x8a5f94=_0x1b9d92,_0x4f6043=shiftedTime();return _0x4f6043[_0x8a5f94(0xcd)]()+'/'+(_0x4f6043[_0x8a5f94(0x21c)]()+0x1)['toString']()[_0x8a5f94(0x228)](0x2,'0')+'/'+_0x4f6043['getDate']()['toString']()[_0x8a5f94(0x228)](0x2,'0')+'\x20'+_0x4f6043[_0x8a5f94(0x19e)]()['toString']()[_0x8a5f94(0x228)](0x2,'0')+':'+_0x4f6043['getMinutes']()[_0x8a5f94(0x199)]()['padStart'](0x2,'0')+':'+_0x4f6043[_0x8a5f94(0x1ce)]()[_0x8a5f94(0x199)]()['padStart'](0x2,'0');}function getCleanTimeStamp(){const _0x13de8c=_0x1b9d92,_0x3d063e=shiftedTime();return _0x3d063e[_0x13de8c(0xcd)]()+(_0x3d063e[_0x13de8c(0x21c)]()+0x1)[_0x13de8c(0x199)]()['padStart'](0x2,'0')+_0x3d063e[_0x13de8c(0x129)]()['toString']()[_0x13de8c(0x228)](0x2,'0')+'-'+_0x3d063e[_0x13de8c(0x19e)]()['toString']()['padStart'](0x2,'0')+_0x3d063e['getMinutes']()[_0x13de8c(0x199)]()[_0x13de8c(0x228)](0x2,'0')+_0x3d063e[_0x13de8c(0x1ce)]()[_0x13de8c(0x199)]()[_0x13de8c(0x228)](0x2,'0');}function shiftedTime(){const _0x5e4448=_0x1b9d92,_0x5bc718=new Date();let _0x309ae5=_0x5bc718;if(settings[_0x5e4448(0x2cc)]&&settings[_0x5e4448(0x2cc)]!==0x0)_0x309ae5=fns['add'](_0x5bc718,{'hours':settings['timeshift']});return _0x309ae5;}async function startScheduler(){const _0x1679dc=_0x1b9d92,_0x99a98a=new Date()['getUTCHours'](),_0x11b7ee=shiftedTime()[_0x1679dc(0x19e)]();_0x11b7ee==0x4&&backupConfigFiles(),_0x11b7ee==0x0&&(rotateLogFiles(),logger['debug'](_0x1679dc(0x12f)),logger[_0x1679dc(0x23e)](_0x1679dc(0x1ee)+serverversion+'#RES#\x20'+(environment==_0x1679dc(0xd9)?'(staging)':'')),logger[_0x1679dc(0x23e)](_0x1679dc(0x12f))),_0x99a98a%0x6==0x0&&triggerAnalytics(),_0x99a98a%0x6==0x0&&getMessages(),await sleep(schedulerInterval),startScheduler();}async function restoreBackupFile(_0x1479cd){const _0x434e4f=_0x1b9d92;logger[_0x434e4f(0x23e)]('Restore\x20backup\x20file\x20'+_0x1479cd);const _0x1e462e=getBotsWithMode();_0x1e462e[_0x434e4f(0x18b)]>0x0?confirmRestore(configbackuppath,_0x1479cd):unzipFile(configbackuppath,_0x1479cd);}async function getBackupFiles(_0x27a74c=null){const _0x107606=_0x1b9d92;let _0x5e6d0b=[],_0x421e7e=fs['readdirSync'](configbackuppath,{'withFileTypes':!![]});_0x421e7e['sort']((_0x3802d6,_0x509879)=>_0x3802d6[_0x107606(0x1cf)]<_0x509879[_0x107606(0x1cf)]?0x1:_0x509879[_0x107606(0x1cf)]<_0x3802d6['name']?-0x1:0x0),_0x421e7e[_0x107606(0x109)](_0x4dc6f7=>{const _0x10139d=_0x107606;if(!_0x4dc6f7[_0x10139d(0x1ca)]()&&_0x4dc6f7['name'][_0x10139d(0x212)](_0x10139d(0x107))&&_0x4dc6f7['name'][_0x10139d(0x292)]('.zip')){const _0x123782=formatDate(fs['statSync'](configbackuppath+_0x4dc6f7[_0x10139d(0x1cf)])[_0x10139d(0x29f)]);_0x5e6d0b[_0x10139d(0x19b)]({'name':_0x4dc6f7[_0x10139d(0x1cf)],'mtime':_0x123782});}});if(_0x27a74c)io['to'](_0x27a74c)['emit'](_0x107606(0x150),_0x5e6d0b);else return _0x5e6d0b;}async function backupConfigFiles(){const _0x3889ac=_0x1b9d92;await zipFiles(_0x3889ac(0x194));const _0x5c65e6=getCleanTimeStamp();fs['copyFileSync'](zippath+_0x3889ac(0x20b),configbackuppath+(_0x3889ac(0x107)+_0x5c65e6+_0x3889ac(0x276)));let _0x1809d2=fs[_0x3889ac(0x173)](configbackuppath,{'withFileTypes':!![]});_0x1809d2[_0x3889ac(0x134)]((_0xaf2cda,_0xd6666b)=>_0xaf2cda[_0x3889ac(0x1cf)]<_0xd6666b[_0x3889ac(0x1cf)]?0x1:_0xd6666b[_0x3889ac(0x1cf)]<_0xaf2cda[_0x3889ac(0x1cf)]?-0x1:0x0),_0x1809d2[_0x3889ac(0x18b)]>maxBackups&&fs['unlinkSync'](configbackuppath+_0x1809d2[_0x1809d2[_0x3889ac(0x18b)]-0x1][_0x3889ac(0x1cf)]);}function rotateLogFiles(){const _0x53e884=_0x1b9d92,_0x233a9c=fs[_0x53e884(0x29d)](logspath+_0x53e884(0x240)),_0x392db9=_0x233a9c[_0x53e884(0xcb)]/0x400;if(_0x392db9>0x64){let _0xd74421=fs[_0x53e884(0x173)](logspath,{'withFileTypes':!![]});_0xd74421['sort']((_0x1fd68e,_0x17abfd)=>_0x1fd68e[_0x53e884(0x1cf)]<_0x17abfd[_0x53e884(0x1cf)]?0x1:_0x17abfd['name']<_0x1fd68e['name']?-0x1:0x0),_0xd74421[_0x53e884(0x109)](_0x2a16fd=>{const _0x55c6b6=_0x53e884;if(_0x2a16fd[_0x55c6b6(0x1cf)]==_0x55c6b6(0x2df))fs[_0x55c6b6(0x2e2)](logspath+_0x2a16fd['name'],logspath+_0x55c6b6(0x255));if(_0x2a16fd[_0x55c6b6(0x1cf)]==_0x55c6b6(0x15f))fs[_0x55c6b6(0x2e2)](logspath+_0x2a16fd['name'],logspath+_0x55c6b6(0x2df));_0x2a16fd[_0x55c6b6(0x1cf)]==_0x55c6b6(0x240)&&(fs[_0x55c6b6(0x2e2)](logspath+_0x2a16fd[_0x55c6b6(0x1cf)],logspath+_0x55c6b6(0x15f)),fs['writeFileSync'](logspath+_0x2a16fd[_0x55c6b6(0x1cf)],''));});}}async function zipFiles(_0x46803b){const _0xbd0f3f=_0x1b9d92;let _0x4d6a69;if(_0x46803b==_0xbd0f3f(0x1c6))_0x4d6a69=logspath;if(_0x46803b==_0xbd0f3f(0x2a2))_0x4d6a69=configpath;if(_0x46803b==_0xbd0f3f(0x194))_0x4d6a69=configpath;let _0x53f090=fs[_0xbd0f3f(0x173)](_0x4d6a69,{'withFileTypes':!![]});const _0x4d4161=new JSZip();_0x53f090[_0xbd0f3f(0x109)](_0x1612d3=>{const _0x5c9b05=_0xbd0f3f;if(!_0x1612d3[_0x5c9b05(0x1ca)]()){let _0x387dc5=fs[_0x5c9b05(0x115)](_0x4d6a69+_0x1612d3[_0x5c9b05(0x1cf)]);if(_0x46803b==_0x5c9b05(0x2a2)){const _0x573307=/^bot-[0-9]{3}-config.json$/,_0x476922=_0x573307[_0x5c9b05(0x14e)](_0x1612d3[_0x5c9b05(0x1cf)]);if(_0x476922){const _0x12e7f6=JSON[_0x5c9b05(0x1f7)](_0x387dc5);if(_0x12e7f6[_0x5c9b05(0x139)][0x0]){_0x12e7f6[_0x5c9b05(0x139)][0x0][_0x5c9b05(0x105)]=_0x5c9b05(0x1cb),_0x12e7f6['bot'][0x0][_0x5c9b05(0x187)]=_0x5c9b05(0x1cb);if(_0x12e7f6[_0x5c9b05(0x139)][0x0]['apiPassword'])_0x12e7f6[_0x5c9b05(0x139)][0x0]['apiPassword']=_0x5c9b05(0x1cb);}_0x387dc5=JSON[_0x5c9b05(0x198)](_0x12e7f6,null,0x2);}if(_0x1612d3[_0x5c9b05(0x1cf)]=='bb-settings.json'){const _0x194d87=JSON[_0x5c9b05(0x1f7)](_0x387dc5);if(_0x194d87[_0x5c9b05(0x1a9)][_0x5c9b05(0x1f5)])_0x194d87['settings'][_0x5c9b05(0x1f5)]=![];if(_0x194d87['settings'][_0x5c9b05(0x1af)])_0x194d87[_0x5c9b05(0x1a9)][_0x5c9b05(0x1af)]='***';if(_0x194d87[_0x5c9b05(0x1a9)]['telegramToken'])_0x194d87[_0x5c9b05(0x1a9)][_0x5c9b05(0x21b)]=_0x5c9b05(0x1cb);if(_0x194d87[_0x5c9b05(0x1a9)][_0x5c9b05(0xdc)])_0x194d87[_0x5c9b05(0x1a9)][_0x5c9b05(0xdc)]=null;if(_0x194d87[_0x5c9b05(0x1a9)][_0x5c9b05(0x1d2)])_0x194d87[_0x5c9b05(0x1a9)]['marketcapApi']=_0x5c9b05(0x1cb);_0x387dc5=JSON[_0x5c9b05(0x198)](_0x194d87,null,0x2);}if(_0x1612d3[_0x5c9b05(0x1cf)]!=_0x5c9b05(0x101))_0x4d4161[_0x5c9b05(0x2ac)](_0x1612d3[_0x5c9b05(0x1cf)],_0x387dc5);}else _0x4d4161['file'](_0x1612d3[_0x5c9b05(0x1cf)],_0x387dc5);}});const _0x278267=await _0x4d4161[_0xbd0f3f(0x1e1)]({'type':_0xbd0f3f(0xf8),'base64':![],'compression':_0xbd0f3f(0x186)});fs[_0xbd0f3f(0x220)](zippath+(_0x46803b+'.zip'),_0x278267,_0xbd0f3f(0x18d));}async function unzipFile(_0x1b176d,_0x1f7749){const _0x87dca6=_0x1b9d92;fs[_0x87dca6(0x173)](configpath,{'withFileTypes':!![]})[_0x87dca6(0x109)](_0x127066=>{const _0x47e9a6=_0x87dca6;if(!_0x127066[_0x47e9a6(0x1ca)]())fs['rmSync'](configpath+_0x127066[_0x47e9a6(0x1cf)]);});const _0x34632a=fs[_0x87dca6(0x115)](_0x1b176d+_0x1f7749,_0x87dca6(0x18d)),_0xc2af6a=await JSZip['loadAsync'](_0x34632a,{'base64':![],'checkCRC32':!![]});for(const _0x2edf04 of Object[_0x87dca6(0x298)](_0xc2af6a[_0x87dca6(0x236)])){const _0x251ec2=_0xc2af6a[_0x87dca6(0x236)][_0x2edf04],_0x23405c=await _0x251ec2['async'](_0x87dca6(0xf8));fs[_0x87dca6(0x220)](configpath+_0x251ec2[_0x87dca6(0x1cf)],_0x23405c);}fs['readdirSync'](temppath,{'withFileTypes':!![]})[_0x87dca6(0x109)](_0x14f9f1=>{const _0x3604df=_0x87dca6;if(!_0x14f9f1[_0x3604df(0x1ca)]())fs[_0x3604df(0x191)](temppath+_0x14f9f1[_0x3604df(0x1cf)]);}),logger[_0x87dca6(0x23e)](_0x87dca6(0x2d9)),process[_0x87dca6(0x29c)]({'restore':!![]},_0x1a5cb9=>{});}async function getPublicIp(){const _0x13e821=_0x1b9d92;try{const _0x28c2be=await axios[_0x13e821(0x2ad)]('https://api.ipify.org?format=json');publicip=_0x28c2be['data']['ip'];}catch(_0x40428e){}}async function triggerAnalytics(){const _0x19c301=_0x1b9d92;if(!publicip)await getPublicIp();const _0x114e31=getBotsWithMode();let _0x283da8=0x0;_0x114e31['forEach'](_0x27ecf4=>{const _0x3172c3=_0x2a10;if(_0x27ecf4[_0x3172c3(0x288)]==='enabled')_0x283da8++;});const _0x16f095=getBotExchanges();mixpanel['track'](_0x19c301(0x170),{'distinct_id':settings[_0x19c301(0x18e)],'ip':publicip,'version':serverversion,'numbots':_0x114e31['length'],'numbotsenabled':_0x283da8,'exchanges':_0x16f095,'environment':environment});}async function getMessages(){const _0x570250=_0x1b9d92,_0x4ea124='https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master',_0x589676=new GraphQLClient(_0x4ea124),_0x3b6b00={'authorization':_0x570250(0x268)},_0x112d28=serverversion['split']('.'),_0x155dc4=_0x112d28[0x0]+'.'+_0x112d28[0x1],_0x5d40b3=Math[_0x570250(0x264)](settings['lastmsgtelegram'],settings[_0x570250(0x1c7)]),_0x509a3c={'last':parseInt(_0x5d40b3),'bbm':_0x155dc4},_0x42d3b3=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x2ffa2a;try{_0x2ffa2a=await _0x589676[_0x570250(0x26c)](_0x42d3b3,_0x509a3c,_0x3b6b00);}catch(_0x5dcccc){}if(_0x2ffa2a&&_0x2ffa2a[_0x570250(0xd4)]){let _0x1570d5=settings[_0x570250(0x233)],_0x20f4b4=settings[_0x570250(0x233)];newMessages=[];for(const _0x4980f8 of _0x2ffa2a['messages']){newMessages[_0x570250(0x19b)](_0x4980f8);let _0xdaec6f=![];_0x4980f8[_0x570250(0x275)]&&(updateSetting(_0x570250(0x1b0),_0x4980f8[_0x570250(0x275)]),_0xdaec6f=isNewerVersion(serverversion,_0x4980f8['bbvNew'])||serverversion==_0x4980f8['bbvNew']);if(!_0xdaec6f&&_0x4980f8['number']>_0x1570d5){if(_0x4980f8[_0x570250(0x296)]===_0x570250(0x1dd)||serverversion[_0x570250(0x212)](_0x4980f8['bbvReceive'])){let _0x478707=''+_0x4980f8['title']+'\x0a\x0a'+_0x4980f8['message'];const _0x21d763=await sendTelegramMsg(toTelegramMarkdown(_0x478707),_0x570250(0x2bb));_0x1570d5=_0x4980f8[_0x570250(0xfe)];}}_0x20f4b4=_0x4980f8[_0x570250(0xfe)];}updateAvailable=isNewerVersion(settings[_0x570250(0x1b0)],serverversion),updateSetting(_0x570250(0x233),_0x20f4b4),emitMessages();}}function emitMessages(){const _0x23a711=_0x1b9d92,_0x5d08d6=settings['lastmsgemitted'];let _0x2d8ed0=[];newMessages[_0x23a711(0x109)](_0x2c9a9d=>{const _0x14f625=_0x23a711;_0x2c9a9d[_0x14f625(0xfe)]>_0x5d08d6&&_0x2d8ed0[_0x14f625(0x19b)](_0x2c9a9d);}),_0x2d8ed0['length']>0x0&&getAllClients()[_0x23a711(0x109)](_0x407a13=>{const _0x241d7e=_0x23a711;getSocket(_0x407a13['id'])['emit'](_0x241d7e(0x284),_0x2d8ed0);});}function confirmMessage(_0x2938a7){const _0x459972=_0x1b9d92;updateSetting(_0x459972(0x1c7),Number(_0x2938a7));}function isNewerVersion(_0x2893be,_0x5c85dc){const _0x15022d=_0x1b9d92,_0x204ca3=_0x5c85dc[_0x15022d(0x1f6)]('.'),_0x23b327=_0x2893be[_0x15022d(0x1f6)]('.');for(var _0x5e6053=0x0;_0x5e6053<_0x23b327[_0x15022d(0x18b)];_0x5e6053++){const _0x39ce18=~~_0x23b327[_0x5e6053],_0x3e9dd1=~~_0x204ca3[_0x5e6053];if(_0x39ce18>_0x3e9dd1)return!![];if(_0x39ce18<_0x3e9dd1)return![];}return![];}function toTelegramMarkdown(_0x4563bb){const _0x2ba560=_0x1b9d92,_0x26b582=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x5c451b=/\*{2}(.+?)\*{2}/gim;return _0x4563bb=_0x4563bb[_0x2ba560(0x1f0)](_0x26b582,_0x2ba560(0x2b8))['replace'](_0x5c451b,_0x2ba560(0xde)),_0x4563bb;}async function validateConfigFile(){const _0x2920c6=_0x1b9d92,_0xb02803=dbConfig[_0x2920c6(0x2ad)]('bots')['sortBy']('botID')[_0x2920c6(0x2d4)]()||[];if(_0xb02803[_0x2920c6(0x18b)]==0x0){let _0x4519b1=0x0,_0x5871da=[];const _0x3f61f8=/^bot-([0-9]{3})-config.json$/,_0x5875e8=fs[_0x2920c6(0x173)](configpath);_0x5875e8[_0x2920c6(0x109)](_0x41ca67=>{const _0x55a4a4=_0x2920c6,_0x5633b7=_0x3f61f8[_0x55a4a4(0x2b3)](_0x41ca67);if(_0x5633b7){const _0x343e43=_0x5633b7[0x1];let _0x233922=getBotAttributes(_0x343e43);_0x5871da[_0x55a4a4(0x19b)]({'botID':_0x343e43,'botname':_0x233922[_0x55a4a4(0x299)],'status':_0x55a4a4(0x11f),'live':_0x55a4a4(0x221)}),_0x4519b1++;}}),_0x4519b1!=0x0&&(dbConfig[_0x2920c6(0x2ad)](_0x2920c6(0x1a4))[_0x2920c6(0x216)](_0x5871da)[_0x2920c6(0x27f)](),config=_0x5871da,restoredConfigFile=_0x4519b1);}}async function restoreConfigNotify(_0x4a0d92){const _0x29987f=_0x1b9d92;let _0x117f8a;if(restoredConfigFile==0x1)_0x117f8a=_0x29987f(0x293);else _0x117f8a=_0x29987f(0x1a0);if(_0x4a0d92)io['to']('botmanager')['emit'](_0x29987f(0x177),_0x117f8a);else{logger[_0x29987f(0x285)]('-----------------------------------------------------------------------------------'),logger[_0x29987f(0x285)](_0x117f8a),logger[_0x29987f(0x285)](_0x29987f(0x169)),logger[_0x29987f(0x285)]('');if(tgBot&&settings[_0x29987f(0xdc)]&&settings[_0x29987f(0x29a)]!=_0x29987f(0x2cd))await sendTelegram(settings['telegramChatId'],_0x29987f(0x2d1)+_0x117f8a);}}function decryptRSA(_0xf8a9a6,_0x5ce042){const _0x5540f4=_0x1b9d92,_0x5df25e=forge[_0x5540f4(0x1e0)]['privateKeyFromPem'](_0xf8a9a6),_0x18f1c2=_0x5df25e[_0x5540f4(0x143)](forge[_0x5540f4(0x2b2)][_0x5540f4(0x27d)](_0x5ce042),_0x5540f4(0x1fd),{'md':forge['md'][_0x5540f4(0x215)][_0x5540f4(0xdb)](),'mgf1':{'md':forge['md'][_0x5540f4(0x215)]['create']()}});return _0x18f1c2;}function validateCredentials(_0x30e4db,_0x111dc3){const _0x42c55d=_0x1b9d92;if(_0x30e4db['username']==settings[_0x42c55d(0x1a6)]&&bcrypt[_0x42c55d(0x200)](_0x30e4db[_0x42c55d(0x1f1)],settings[_0x42c55d(0x1af)])){if(settings['f2aRequired'])return{'allow':![],'reason':_0x42c55d(0x28a),'token':null};else{const _0x2aaa77=generateLoginToken(_0x111dc3);return{'allow':!![],'reason':_0x42c55d(0x16e),'token':_0x2aaa77};}}else return{'allow':![],'reason':_0x42c55d(0x2bc),'token':null};}function refreshToken(_0x491130){const _0x5f0a0f=_0x1b9d92,_0x97599b=generateLoginToken(_0x491130);return{'allow':!![],'reason':_0x5f0a0f(0x16e),'token':_0x97599b};}function validateAccess(_0x1f4ff6,_0x2dc67b,_0x35e375){const _0x1370c0=_0x1b9d92,_0x591f2d=_0x35e375?_0x35e375:devices[_0x2dc67b]['ip'];let _0x569fc0;const _0x36c6eb=_0x49af2b=>{const _0x4821ee=_0x2a10;if(settings[_0x4821ee(0x1f5)]){if(settings[_0x4821ee(0x2c9)]){if(telegram2FaApproved(_0x2dc67b)){const _0x140b3c=generateLoginToken(_0x2dc67b);return{'allow':!![],'reason':_0x4821ee(0x2ae),'token':_0x140b3c};}else return{'allow':![],'reason':'login\x20required','token':null};}else return _0x569fc0=validToken(_0x49af2b,_0x2dc67b),_0x569fc0['hasOwnProperty'](_0x4821ee(0x17f))?{'allow':!![],'reason':'login\x20token\x20valid','token':_0x49af2b}:{'allow':![],'reason':'login\x20required','token':null};}else return{'allow':!![],'reason':_0x4821ee(0x2b4),'token':null};};if(settings['whitelistEnabled']){let _0x1cef0e=[...settings['whitelist'],_0x1370c0(0xe5),'::ffff:127.0.0.1',_0x1370c0(0x146),_0x1370c0(0x13d)];if(_0x1cef0e[_0x1370c0(0x2b6)](_0x591f2d))return _0x36c6eb(_0x1f4ff6);else{_0x569fc0=validToken(_0x1f4ff6,_0x2dc67b);if(_0x569fc0[_0x1370c0(0x1e4)](_0x1370c0(0x17f)))return _0x36c6eb(_0x1f4ff6);else{if(telegramIpApproved(_0x2dc67b)){const _0x163ac0=generateToken(_0x2dc67b);return _0x569fc0=_0x36c6eb(_0x1f4ff6),_0x569fc0['allow']?{'allow':!![],'reason':_0x1370c0(0x2a1),'token':_0x163ac0}:_0x569fc0;}else return settings[_0x1370c0(0x1fa)]?{'allow':![],'reason':_0x1370c0(0x2e6),'token':null}:{'allow':![],'reason':'temporary\x20access\x20not\x20allowed','token':null};}}}else return _0x36c6eb(_0x1f4ff6);}function timelyDecrypt(_0x431088,_0x3faa08,_0x172d2b='@'){if(_0x431088)try{const _0x3028d2=decryptRSA(secure['privateKey'],_0x431088),_0x5525c=_0x3028d2['split'](_0x172d2b)[0x0],_0xfde2ca=_0x3028d2['split'](_0x172d2b)[0x1],_0x2abc3f=new Date()['getTime']();if(_0x3faa08){if(_0x2abc3f-_0xfde2ca<maxSecretAge*0x3e8)return _0x5525c;else return![];}else return _0x5525c;}catch(_0x5665dc){return![];}else return![];}const validToken=(_0x5f15b3,_0x2cfaaf)=>{const _0xb024c6=_0x1b9d92,_0x111cba=devices[_0x2cfaaf]['ip'];if(!_0x5f15b3)return{'error':'No\x20authentication\x20token'};for(let _0x3e30df of blacklist){if(_0x3e30df[_0xb024c6(0x145)]==_0x5f15b3)return{'error':_0xb024c6(0x226)};}let _0x4db00a;try{_0x4db00a=jwt[_0xb024c6(0xd1)](_0x5f15b3,secure[_0xb024c6(0x24b)]+_0x2cfaaf);}catch{return{'error':_0xb024c6(0x24d)};}if(!_0x4db00a['hasOwnProperty'](_0xb024c6(0x1bf))&&!_0x4db00a['hasOwnProperty'](_0xb024c6(0xc3))||!_0x4db00a['hasOwnProperty'](_0xb024c6(0x1a3)))return{'error':'Invalid\x20authentication\x20token\x20(2)'};if(!_0x4db00a['hasOwnProperty']('username')&&_0x4db00a[_0xb024c6(0x1e4)](_0xb024c6(0x1bf))){const {clientip:_0x22048d}=_0x4db00a;return _0x111cba==_0x22048d?{'success':_0xb024c6(0x17d)}:{'error':_0xb024c6(0x12c)};}else{if(_0x4db00a[_0xb024c6(0x1e4)]('username')&&_0x4db00a[_0xb024c6(0x1e4)](_0xb024c6(0x1bf))){const {username:_0x207da7,clientip:_0x412545}=_0x4db00a;return settings['bbUsername']==_0x207da7&&_0x111cba==_0x412545?{'success':_0xb024c6(0x17d)}:{'error':_0xb024c6(0x1db)};}}},generateLoginToken=_0x399f21=>{const _0x4c3dc4=_0x1b9d92;if(_0x399f21){const _0x4a0ee1=devices[_0x399f21]['ip'];return jwt[_0x4c3dc4(0x175)]({'username':settings['bbUsername'],'clientip':_0x4a0ee1},secure[_0x4c3dc4(0x24b)]+_0x399f21,{'expiresIn':tokenRefresh*0x3c,'allowInsecureKeySizes':!![]});}else return![];},generateToken=_0x1636a7=>{const _0x5e80d7=_0x1b9d92;if(_0x1636a7){const _0x5cb685=devices[_0x1636a7]['ip'];return jwt['sign']({'clientip':_0x5cb685},secure[_0x5e80d7(0x24b)]+_0x1636a7,{'expiresIn':devices[_0x1636a7][_0x5e80d7(0x2de)][_0x5e80d7(0x17e)]*0x3c,'allowInsecureKeySizes':!![]});}else return![];},telegramIpApproved=_0x44a1c8=>{const _0x3d0db2=_0x1b9d92;let _0x24a7a5=![];return devices[_0x44a1c8][_0x3d0db2(0x2de)]&&devices[_0x44a1c8][_0x3d0db2(0x2de)][_0x3d0db2(0x17e)]!=_0x3d0db2(0x269)&&(_0x24a7a5=devices[_0x44a1c8][_0x3d0db2(0x2de)]['clientip']==devices[_0x44a1c8]['ip']&&new Date()[_0x3d0db2(0x278)]()-devices[_0x44a1c8][_0x3d0db2(0x2de)][_0x3d0db2(0x1e2)]<devices[_0x44a1c8][_0x3d0db2(0x2de)][_0x3d0db2(0x17e)]*0x3c*0x3e8),_0x24a7a5;},telegram2FaApproved=_0x4f932d=>{const _0x1ae212=_0x1b9d92;let _0x341fd3=![];return devices[_0x4f932d][_0x1ae212(0x2d6)]&&devices[_0x4f932d][_0x1ae212(0x2d6)][_0x1ae212(0x17e)]!='reject'&&(_0x341fd3=devices[_0x4f932d][_0x1ae212(0x2d6)][_0x1ae212(0x1bf)]==devices[_0x4f932d]['ip']&&new Date()[_0x1ae212(0x278)]()-devices[_0x4f932d][_0x1ae212(0x2d6)][_0x1ae212(0x1e2)]<devices[_0x4f932d]['telegram2FaApproval'][_0x1ae212(0x17e)]*0x3c*0x3e8),_0x341fd3;},normalizeIP=_0x5eeba4=>{const _0x91ee4=_0x1b9d92;let _0x38b1e1=null,_0x143098=null;if(ipaddr[_0x91ee4(0x266)](_0x5eeba4)){const _0x4f6e78=ipaddr[_0x91ee4(0x1f7)](_0x5eeba4);_0x4f6e78[_0x91ee4(0x20d)]()===_0x91ee4(0x1a8)?(_0x4f6e78[_0x91ee4(0x231)]()&&(_0x38b1e1=_0x4f6e78['toIPv4Address']()[_0x91ee4(0x199)]()),_0x143098=_0x4f6e78[_0x91ee4(0x199)]()):(_0x38b1e1=_0x4f6e78['toString'](),_0x143098=_0x4f6e78[_0x91ee4(0xe8)]()[_0x91ee4(0x199)]());}return{'show':_0x38b1e1?_0x38b1e1:_0x143098,'store':_0x143098};};function formatDate(_0x544a45){const _0x17759e=_0x1b9d92;return _0x544a45['getFullYear']()+'/'+(_0x544a45[_0x17759e(0x21c)]()+0x1)[_0x17759e(0x199)]()[_0x17759e(0x228)](0x2,'0')+'/'+_0x544a45['getDate']()[_0x17759e(0x199)]()[_0x17759e(0x228)](0x2,'0')+'\x20'+_0x544a45[_0x17759e(0x19e)]()[_0x17759e(0x199)]()['padStart'](0x2,'0')+':'+_0x544a45[_0x17759e(0x1f9)]()[_0x17759e(0x199)]()[_0x17759e(0x228)](0x2,'0')+':'+_0x544a45['getSeconds']()[_0x17759e(0x199)]()[_0x17759e(0x228)](0x2,'0');}function sleep(_0x525ba0){return new Promise(_0x2deb15=>setTimeout(_0x2deb15,_0x525ba0));}