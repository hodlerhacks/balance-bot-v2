const _0x25d974=_0x36cf;(function(_0x12fdf9,_0xcabba3){const _0x307872=_0x36cf,_0x30eb2a=_0x12fdf9();while(!![]){try{const _0x13d17c=parseInt(_0x307872(0x29b))/0x1*(-parseInt(_0x307872(0x262))/0x2)+parseInt(_0x307872(0x23b))/0x3+parseInt(_0x307872(0x1d7))/0x4*(-parseInt(_0x307872(0x13a))/0x5)+parseInt(_0x307872(0x1a0))/0x6+parseInt(_0x307872(0x23e))/0x7*(parseInt(_0x307872(0x240))/0x8)+parseInt(_0x307872(0x205))/0x9*(parseInt(_0x307872(0x2e2))/0xa)+-parseInt(_0x307872(0x20b))/0xb;if(_0x13d17c===_0xcabba3)break;else _0x30eb2a['push'](_0x30eb2a['shift']());}catch(_0x557860){_0x30eb2a['push'](_0x30eb2a['shift']());}}}(_0x478d,0xc7256));const _0x1c7ecb=function(){let _0x56f338=!![];return function(_0x273f5b,_0x2be76b){const _0x5a8b4c=_0x56f338?function(){const _0x1ea182=_0x36cf;if(_0x2be76b){const _0x3189f8=_0x2be76b[_0x1ea182(0x1fe)](_0x273f5b,arguments);return _0x2be76b=null,_0x3189f8;}}:function(){};return _0x56f338=![],_0x5a8b4c;};}(),_0x1858b6=_0x1c7ecb(this,function(){const _0x3e4a06=_0x36cf;return _0x1858b6['toString']()[_0x3e4a06(0x211)]('(((.+)+)+)+$')[_0x3e4a06(0x268)]()[_0x3e4a06(0x254)](_0x1858b6)[_0x3e4a06(0x211)]('(((.+)+)+)+$');});_0x1858b6();'use strict';process[_0x25d974(0x161)][_0x25d974(0xf1)]=0x1;const childProcess=require(_0x25d974(0x225)),fs=require('fs'),fns=require('date-fns'),low=require(_0x25d974(0x129)),FileSync=require(_0x25d974(0x16a)),path=require(_0x25d974(0x1f8)),crypto=require('crypto'),forge=require(_0x25d974(0x188)),bcrypt=require(_0x25d974(0x259)),jwt=require(_0x25d974(0x278)),ipaddr=require('ipaddr.js'),argv=require('yargs/yargs')(process[_0x25d974(0x21c)][_0x25d974(0x1df)](0x2))['argv'],uuidRandom=require(_0x25d974(0x2e3)),{Telegraf,Markup}=require(_0x25d974(0x2b1)),Mixpanel=require(_0x25d974(0x251)),axios=require(_0x25d974(0x2f0)),{GraphQLClient,gql}=require(_0x25d974(0x12e)),util=require(_0x25d974(0x116)),fileUpload=require('express-fileupload'),{networkInterfaces}=require('os'),JSZip=require(_0x25d974(0x274)),PORT=argv[_0x25d974(0x1f2)]||_0x25d974(0x1e1),pattern=/^[0-9]{2,4}$/;!pattern[_0x25d974(0x1da)](PORT)&&(console['log'](_0x25d974(0x291)+PORT+_0x25d974(0xe0)),process[_0x25d974(0x2c3)](0x1));const HOST=argv[_0x25d974(0x184)]||null,userID=argv[_0x25d974(0xe1)]||'',debugging=argv['d']||![],recreate=argv['r']||![],nodeversion=process[_0x25d974(0x207)][_0x25d974(0x1ad)];let bbpath='bb/',bbpath2='';const botfile='bot.js',configfile=_0x25d974(0x2e0),settingsfile=_0x25d974(0x21e),securefile='bb-secure.json',environment=require('./'+bbpath2+_0x25d974(0x2ef))[_0x25d974(0x215)]||_0x25d974(0x1d8),maxBackups=0xa;let validInstallation=!![];const schedulerInterval=0x3c*0x3c*0x3e8;!fs[_0x25d974(0x138)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+'clients'),configpath=userID?bbpath+_0x25d974(0x2ea)+userID+'/':bbpath+_0x25d974(0x2ea),configbackuppath=configpath+_0x25d974(0x217),logspath=userID?bbpath+_0x25d974(0x272)+userID+'/':bbpath+_0x25d974(0x272),zippath=userID?bbpath+'zip/'+userID+'/':bbpath+_0x25d974(0x11b),loggerfile=fs['createWriteStream'](logspath+_0x25d974(0x155),{'flags':'a'}),temppath=userID?bbpath+'temp/'+userID+'/':bbpath+_0x25d974(0x1cf);!fs[_0x25d974(0x138)](configpath)&&fs['mkdirSync'](configpath);!fs['existsSync'](configbackuppath)&&fs[_0x25d974(0x180)](configbackuppath);!fs['existsSync'](logspath)&&fs['mkdirSync'](logspath);!fs[_0x25d974(0x138)](zippath)&&fs['mkdirSync'](zippath);!fs[_0x25d974(0x138)](temppath)&&fs[_0x25d974(0x180)](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x25d974(0x190)]({'bots':[]})['write']();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings['defaults']({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0x25d974(0x14f),'onepagemode':![],'marketcapApi':''}})[_0x25d974(0x171)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x25d974(0x190)]({'secure':{},'blacklist':[]})[_0x25d974(0x171)]();const saltRounds=0xa,mixpanel=Mixpanel[_0x25d974(0x267)](_0x25d974(0x198),{'host':_0x25d974(0x175)});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings[_0x25d974(0x227)]&&(settings['telegramToken']!=''&&settings[_0x25d974(0x227)]!=_0x25d974(0x20a))&&settings['telegramUsername']&&settings[_0x25d974(0x133)]!='')initTelegram();const parseColor=(_0x5ca3a1,_0x3ec944)=>{const _0x50f315=_0x25d974,_0x265a40=/#[A-Z]{3}#/g;if(typeof _0x5ca3a1==_0x50f315(0x1fc)){!_0x3ec944?_0x5ca3a1=_0x5ca3a1['replace'](_0x265a40,''):(_0x5ca3a1=_0x5ca3a1[_0x50f315(0x1f7)](/#BLU#/g,_0x50f315(0x2c8)),_0x5ca3a1=_0x5ca3a1['replace'](/#RED#/g,'\x1b[31m'),_0x5ca3a1=_0x5ca3a1['replace'](/#YEL#/g,_0x50f315(0x2d6)),_0x5ca3a1=_0x5ca3a1[_0x50f315(0x1f7)](/#MAG#/g,'\x1b[35m'),_0x5ca3a1=_0x5ca3a1[_0x50f315(0x1f7)](/#CYA#/g,'\x1b[36m'),_0x5ca3a1=_0x5ca3a1['replace'](/#RES#/g,'\x1b[0m'));;}return _0x5ca3a1;},logger={'screen':_0x2e7d3c=>{const _0x460f14=_0x25d974;console[_0x460f14(0x1ed)](parseColor(_0x2e7d3c,!![]));},'simple':_0x50e189=>{const _0x48fa05=_0x25d974;console[_0x48fa05(0x1ed)](parseColor(_0x50e189,!![])),loggerfile[_0x48fa05(0x171)](util[_0x48fa05(0x19a)](parseColor(_0x50e189,![]))+'\x0a');},'full':async _0x40809e=>{const _0x152235=_0x25d974,_0x660fb6=getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20'+_0x40809e;console['log'](parseColor(_0x660fb6,!![])),loggerfile[_0x152235(0x171)](util[_0x152235(0x19a)](parseColor(_0x660fb6,![]))+'\x0a');if(tgBot&&settings[_0x152235(0x202)]&&settings[_0x152235(0x131)]!=_0x152235(0x1f9))await sendTelegram(settings[_0x152235(0x202)],'Bot\x20Mgr\x20>\x20'+parseColor(_0x40809e,![]));},'debug':async(_0x11079b,_0x319d28='')=>{const _0x18f6bb=_0x25d974,_0x5b62a3=getTimeStamp()+_0x18f6bb(0xdb)+_0x11079b;if(debugging)console[_0x18f6bb(0x1ed)](parseColor(_0x5b62a3,!![]));loggerfile[_0x18f6bb(0x171)](util[_0x18f6bb(0x19a)](parseColor(_0x5b62a3,![]))+'\x0a');if(_0x319d28){if(debugging)console[_0x18f6bb(0x1ed)](_0x319d28);loggerfile[_0x18f6bb(0x171)](util['format'](_0x319d28)+'\x0a');}}};let terminating=![];process['on'](_0x25d974(0x13e),function(_0x6e03ce){const _0x33aeb4=_0x25d974;_0x6e03ce['toString']()[_0x33aeb4(0x25c)]('address\x20already\x20in\x20use')?(logger[_0x33aeb4(0x1bc)]('#RED#Balance\x20Bot\x20is\x20already\x20running\x20on\x20port\x20'+_0x6e03ce['port']+_0x33aeb4(0x19c)),process['send']({'terminate':!![]},_0x102926=>{})):logger[_0x33aeb4(0x1bc)](_0x6e03ce);}),process['on'](_0x25d974(0x2c3),()=>{const _0x9dc53e=_0x25d974;stopAllBots(),process[_0x9dc53e(0x2c3)](0x0);}),process['on'](_0x25d974(0x1d0),()=>{const _0x35c55d=_0x25d974;stopAllBots(),process[_0x35c55d(0x2c3)](0x0);}),process['on'](_0x25d974(0x2b2),()=>{const _0x4bc634=_0x25d974;stopAllBots(),process[_0x4bc634(0x2c3)](0x0);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+'version.json')['version'],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let tmpStorage={},devices=[],lastIpApproval,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require('express'),app=express(),http=require(_0x25d974(0x220))[_0x25d974(0x17a)](app);app[_0x25d974(0x126)](fileUpload({'useTempFiles':!![]})),app['get'](_0x25d974(0x2b8),async(_0x35945f,_0x1bf4b0)=>{const _0x3de612=_0x25d974,_0x2dc1eb=_0x35945f[_0x3de612(0xfc)][_0x3de612(0x247)],_0x21ceca=getClientsWithBotID(_0x3de612(0x235)),_0x596668=_0x35945f[_0x3de612(0x1fa)][_0x3de612(0x275)],_0xb933dd=timelyDecrypt(_0x596668,![]),_0x5783c7=_0x21ceca[_0x3de612(0xff)](_0x830def=>_0x830def[_0x3de612(0x275)]==_0xb933dd);if(_0x5783c7){const _0x563dfe=normalizeIP(_0x35945f[_0x3de612(0x1af)][_0x3de612(0x2c1)])[_0x3de612(0x1ac)],_0xaefe1b=_0x35945f[_0x3de612(0x1fa)][_0x3de612(0x122)];if(validateAccess(_0xaefe1b,_0xb933dd,_0x563dfe)[_0x3de612(0x22a)])_0x2dc1eb==_0x3de612(0x14c)&&await backupConfigFiles(),await zipFiles(_0x2dc1eb),_0x1bf4b0[_0x3de612(0x2f5)](zippath+(_0x2dc1eb+_0x3de612(0x185)),_0x2b6758=>{const _0x2b8405=_0x3de612;_0x2b6758&&(logger[_0x2b8405(0x123)]('Failed\x20to\x20download\x20'+_0x2dc1eb),logger[_0x2b8405(0x1bc)](_0x2b6758));});else logger[_0x3de612(0x123)]('Unauthorized\x20attempt\x20to\x20download\x20'+_0x2dc1eb+_0x3de612(0x18a));}else logger['full'](_0x3de612(0x117)+_0x2dc1eb+'\x20(2)');}),app[_0x25d974(0x2ad)](_0x25d974(0x106),async(_0xcc99d7,_0x589bd8)=>{const _0xb318be=_0x25d974,_0x2e1357=getClientsWithBotID(_0xb318be(0x235)),_0x36a18c=_0xcc99d7[_0xb318be(0x1fa)]['uuid'],_0x5e6b52=timelyDecrypt(_0x36a18c,![]),_0x12e731=_0x2e1357[_0xb318be(0xff)](_0x591987=>_0x591987['uuid']==_0x5e6b52);logger[_0xb318be(0x26f)](_0xb318be(0x1cb));if(_0x12e731){const _0x5a00e6=normalizeIP(_0xcc99d7[_0xb318be(0x1af)][_0xb318be(0x2c1)])[_0xb318be(0x1ac)],_0xb09752=_0xcc99d7[_0xb318be(0x1fa)][_0xb318be(0x122)];if(validateAccess(_0xb09752,_0x5e6b52,_0x5a00e6)[_0xb318be(0x22a)]){if(_0xcc99d7[_0xb318be(0x299)]){const _0xdbbbde=_0xcc99d7[_0xb318be(0x299)][_0xb318be(0x1b5)];await _0xdbbbde['mv'](temppath+_0xdbbbde[_0xb318be(0x206)]),_0x589bd8[_0xb318be(0x1ba)]({'status':!![],'message':_0xb318be(0x1f0)});const _0x38ccf4=getBotsWithMode();_0x38ccf4[_0xb318be(0x1b2)]>0x0?confirmRestore(temppath,_0xdbbbde[_0xb318be(0x206)]):unzipFile(temppath,_0xdbbbde[_0xb318be(0x206)]);}}else logger['full'](_0xb318be(0x165));}else logger['full'](_0xb318be(0x149));}),app[_0x25d974(0x126)](express[_0x25d974(0x2b0)](path['join'](__dirname,bbpath2,_0x25d974(0x238)))),app[_0x25d974(0x126)](express[_0x25d974(0x2b0)](path[_0x25d974(0x1c4)](__dirname,bbpath2,_0x25d974(0x11e)))),app[_0x25d974(0x250)]('/',function(_0x5c0b80,_0x2f198e){const _0x7d94b3=_0x25d974;_0x2f198e[_0x7d94b3(0x2ee)](path[_0x7d94b3(0x1c4)](__dirname,bbpath2,'build2','index.html'));}),app[_0x25d974(0x250)]('/:bot',function(_0x4f22d8,_0x258d4a){const _0x4fe19e=_0x25d974;_0x258d4a[_0x4fe19e(0x2ee)](path[_0x4fe19e(0x1c4)](__dirname,bbpath2,_0x4fe19e(0x11e),'index.html'));}),app[_0x25d974(0x250)](_0x25d974(0x2ba),(_0x129fc0,_0x1ce936)=>{const _0x529488=_0x25d974;_0x1ce936[_0x529488(0x2ee)](path[_0x529488(0x1c4)](__dirname,bbpath2,'build',_0x529488(0xe8)));}),app['get'](_0x25d974(0x1ae),(_0x3d5357,_0x5c5230)=>{const _0x2ce3e8=_0x25d974;_0x5c5230['sendFile'](path[_0x2ce3e8(0x1c4)](__dirname,bbpath2,_0x2ce3e8(0x11e),_0x2ce3e8(0xe8)));}),app[_0x25d974(0x250)](_0x25d974(0x1b3),(_0x33cfd2,_0xe35ce9)=>{const _0x34c032=_0x25d974;_0xe35ce9[_0x34c032(0x2ee)](path['join'](__dirname,bbpath2,_0x34c032(0x11e),_0x34c032(0xe8)));}),app[_0x25d974(0x250)](_0x25d974(0x2d2),(_0x461371,_0x30997b)=>{const _0x2188bb=_0x25d974;_0x30997b['sendFile'](path[_0x2188bb(0x1c4)](__dirname,bbpath2,'build',_0x2188bb(0xe8)));}),app[_0x25d974(0x250)](_0x25d974(0x2bf),(_0x4c248b,_0x48616d)=>{const _0x53d5f4=_0x25d974;_0x48616d['sendFile'](path[_0x53d5f4(0x1c4)](__dirname,bbpath2,'build',_0x53d5f4(0xe8)));}),app['get']('/:bot/support',(_0x764d8f,_0x3267c8)=>{const _0x383481=_0x25d974;_0x3267c8['sendFile'](path[_0x383481(0x1c4)](__dirname,bbpath2,_0x383481(0x11e),_0x383481(0xe8)));});if(HOST)http['listen'](PORT,HOST);else http[_0x25d974(0x1ab)](PORT);const io=require(_0x25d974(0x174))(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}function getServerIP(){const _0x11a649=_0x25d974;let _0x5559fa=_0x11a649(0x166);const _0x24edbd=networkInterfaces(),_0x41b341={};for(const _0x37eff9 of Object[_0x11a649(0x1fb)](_0x24edbd)){for(const _0x235d1f of _0x24edbd[_0x37eff9]){if((_0x235d1f[_0x11a649(0x2ed)]==_0x11a649(0xf9)||_0x235d1f[_0x11a649(0x2ed)]==0x4)&&!_0x235d1f[_0x11a649(0x266)]){const _0x8d023f=ipaddr['parse'](_0x235d1f[_0x11a649(0x219)])['range']();_0x8d023f!='private'&&(!_0x41b341[_0x37eff9]&&(_0x41b341[_0x37eff9]=[]),_0x41b341[_0x37eff9]['push'](_0x235d1f[_0x11a649(0x219)]),_0x5559fa=_0x235d1f[_0x11a649(0x219)]);}}}return{'serverip':_0x5559fa,'netinterfaces':_0x41b341};}async function startServer(){const _0x3e1bae=_0x25d974,{serverip:_0x59eb87,netinterfaces:_0x379b8a}=getServerIP();logger[_0x3e1bae(0x1bc)](''),logger[_0x3e1bae(0x1bc)](_0x3e1bae(0x1a1)),await logger[_0x3e1bae(0x123)](_0x3e1bae(0x27c)+serverversion+_0x3e1bae(0x271)+(environment==_0x3e1bae(0x195)?_0x3e1bae(0x27d):'')+'\x0a'+(_0x3e1bae(0x249)+PORT+_0x3e1bae(0x125))+(_0x3e1bae(0xf3)+_0x59eb87+':'+PORT+_0x3e1bae(0x296))),logger['simple'](_0x3e1bae(0x1a1));if(config[_0x3e1bae(0x1b2)]!=0x0)for(const _0x290164 of config){const _0x5eb5d4=_0x290164[_0x3e1bae(0x2f3)]==_0x3e1bae(0x19d)?'a':'m';if(_0x290164[_0x3e1bae(0x18d)]==_0x3e1bae(0x290)||_0x290164[_0x3e1bae(0x18d)]==_0x3e1bae(0x2b9))await logger['full'](_0x3e1bae(0x1ca)+_0x5eb5d4+_0x3e1bae(0x270)+_0x290164[_0x3e1bae(0xdd)]+_0x3e1bae(0x12b)+_0x290164['botname']),startBot([_0x290164[_0x3e1bae(0xdd)],userID],{'cwd':bbpath},function(_0x223f42){const _0xa3d7c5=_0x3e1bae;if(_0x223f42)logger[_0xa3d7c5(0x123)](_0x223f42);});else(_0x290164[_0x3e1bae(0x18d)]==_0x3e1bae(0x29c)||_0x290164['status']=='new-disabled')&&await logger[_0x3e1bae(0x123)]('Idling\x20('+_0x5eb5d4+_0x3e1bae(0x230)+_0x290164['botID']+_0x3e1bae(0x12b)+_0x290164[_0x3e1bae(0x2cf)]);}else!newBot&&logger['simple'](_0x3e1bae(0x25d));if(newBot)addBot();logger[_0x3e1bae(0x1bc)](_0x3e1bae(0x1a1)),logger['simple'](''),await logger[_0x3e1bae(0x26f)]('Node.js\x20v'+nodeversion),await logger['debug'](_0x3e1bae(0x176),_0x379b8a);}function startSocket(){const _0x395dc4=_0x25d974;io['on'](_0x395dc4(0x15f),_0x195b6e=>{const _0x1ef639=_0x395dc4;let _0x14a926,_0x2ee590,_0x8f7421,_0x10462c,_0x165867;const _0x5d01c4=_0x195b6e['handshake']['headers'][_0x1ef639(0xe6)];_0x2ee590=_0x5d01c4[_0x1ef639(0x10d)](/bot[0-9]{3}/);if(_0x2ee590)_0x8f7421=_0x2ee590[0x0][_0x1ef639(0x10d)](/[0-9]{3}/);if(_0x8f7421)_0x14a926=_0x8f7421[0x0];else _0x14a926=_0x1ef639(0x235);const _0x26893f=_0x195b6e[_0x1ef639(0x282)][_0x1ef639(0x26a)][_0x1ef639(0x2e9)];if(!_0x26893f)_0x195b6e['emit'](_0x1ef639(0x18d),{'publicKey':secure[_0x1ef639(0x252)]});else{_0x10462c=timelyDecrypt(_0x26893f,![]);if(!_0x10462c)_0x195b6e[_0x1ef639(0x11d)](_0x1ef639(0x18d),{'publicKey':secure[_0x1ef639(0x252)]});else{_0x165867=normalizeIP(_0x195b6e[_0x1ef639(0x29d)]['remoteAddress'])[_0x1ef639(0x1ac)];if(!devices[_0x10462c])devices[_0x10462c]={'uuid':_0x10462c,'access':{'token':null}};devices[_0x10462c]['ip']=_0x165867;const _0x3da5b5=addClient(_0x195b6e['id'],_0x10462c,_0x14a926);setAccess(_0x3da5b5),emitMessages(),_0x195b6e['on'](_0x1ef639(0x2dd),_0x18d911=>{const _0x24372e=_0x1ef639,_0x4d8501=timelyDecrypt(_0x18d911[_0x24372e(0x104)],!![],'|@|');if(_0x4d8501){_0x18d911={'username':_0x18d911['username'],'password':_0x4d8501},devices[_0x10462c]['access']=validateCredentials(_0x18d911,_0x10462c);if(devices[_0x10462c][_0x24372e(0x1a3)][_0x24372e(0x22a)]==![]&&devices[_0x10462c]['access']['reason']==_0x24372e(0x1d2))_0x195b6e[_0x24372e(0x11d)](_0x24372e(0x18d),{'access':devices[_0x10462c]['access']}),loginAccess2FA(_0x10462c,_0x165867);else{if(devices[_0x10462c][_0x24372e(0x1a3)][_0x24372e(0x22a)]==![]&&devices[_0x10462c][_0x24372e(0x1a3)][_0x24372e(0x1f1)]==_0x24372e(0x269))_0x195b6e[_0x24372e(0x11d)]('status',{'access':devices[_0x10462c]['access']});else devices[_0x10462c][_0x24372e(0x1a3)]['allow']&&devices[_0x10462c][_0x24372e(0x1a3)][_0x24372e(0x1f1)]==_0x24372e(0xe4)&&(getClientsWithUuid(_0x10462c)['forEach'](_0x4cf394=>{setAccess(_0x4cf394);}),logger[_0x24372e(0x26f)](_0x24372e(0x2df)+_0x10462c[_0x24372e(0x1df)](-0x8)),setTokenRefresh(_0x10462c),setSessionTimeout('login',_0x10462c));}}else logger['full'](_0x24372e(0x194));}),_0x195b6e['on']('reset-password',()=>{resetPassword();}),_0x195b6e['on'](_0x1ef639(0xf2),_0x251d34=>{removeClient(_0x195b6e['id']);}),_0x14a926=='botmanager'&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0xfc1681){const _0x399ff1=_0x25d974;if(_0xfc1681!=_0x399ff1(0x235)&&config[_0x399ff1(0x21b)]!=''){if(pid[_0xfc1681])pid[_0xfc1681][_0x399ff1(0x1ba)]({'function':_0x399ff1(0x13d),'args':null});}_0xfc1681!=_0x399ff1(0x235)&&broadcastToBots(_0x399ff1(0xf6),JSON[_0x399ff1(0x1de)](config));}function reloadBotManager(){const _0x18c55b=_0x25d974;getClientsWithBotID(_0x18c55b(0x235))[_0x18c55b(0x2be)](_0x2912e5=>{const _0x3c8e6d=_0x18c55b;getSocket(_0x2912e5['id'])[_0x3c8e6d(0x11d)]('status',{'access':{'allow':![],'reason':_0x3c8e6d(0x226),'token':null}});});}function getSocket(_0x4036f0){const _0x3d45a7=_0x25d974,_0x3b0b37=io[_0x3d45a7(0x24f)][_0x3d45a7(0x250)]('/');return _0x3b0b37[_0x3d45a7(0x2c5)][_0x3d45a7(0x250)](_0x4036f0);}function setAccess(_0x505e31){const _0x49df6a=_0x25d974,_0x24592a=getSocket(_0x505e31['id']),_0x38df3e=_0x505e31[_0x49df6a(0x275)],_0x4d7f53=_0x505e31[_0x49df6a(0x136)];devices[_0x38df3e][_0x49df6a(0x1a3)]=validateAccess(devices[_0x38df3e][_0x49df6a(0x1a3)]['token'],_0x38df3e),logger[_0x49df6a(0x26f)](_0x49df6a(0x25f)+devices[_0x38df3e]['access'][_0x49df6a(0x1f1)]+_0x49df6a(0x159)+_0x505e31['id'][_0x49df6a(0x1df)](-0x8)+_0x49df6a(0x2bb)+_0x38df3e[_0x49df6a(0x1df)](-0x8)),_0x24592a[_0x49df6a(0x1c4)](_0x38df3e);if(devices[_0x38df3e][_0x49df6a(0x1a3)][_0x49df6a(0x22a)]){_0x24592a[_0x49df6a(0x1c4)](_0x4d7f53);if(_0x4d7f53==_0x49df6a(0x235))initializeSocketBotManager(_0x24592a);else initializeSocketBot(_0x24592a);initClient(_0x4d7f53);}devices[_0x38df3e][_0x49df6a(0x1a3)]['token']&&devices[_0x38df3e][_0x49df6a(0x1a3)][_0x49df6a(0x1f1)]=='temporary\x20token\x20generated'&&setSessionTimeout('2FA',_0x38df3e),devices[_0x38df3e][_0x49df6a(0x1a3)][_0x49df6a(0x2cb)]&&devices[_0x38df3e][_0x49df6a(0x1a3)]['reason']==_0x49df6a(0x2a9)&&setSessionTimeout(_0x49df6a(0x2dd),_0x38df3e),_0x24592a['emit'](_0x49df6a(0x18d),{'status':_0x505e31[_0x49df6a(0x214)],'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x38df3e]['access'],'externalip':devices[_0x38df3e]['ip'],'publicKey':secure['publicKey'],'userid':settings['userid'],'validInstallation':validInstallation}),devices[_0x38df3e][_0x49df6a(0x1a3)][_0x49df6a(0x22a)]==![]&&devices[_0x38df3e][_0x49df6a(0x1a3)]['reason']=='2FA\x20required'&&temporaryAccess2FA(_0x38df3e,devices[_0x38df3e]['ip']);}function setSessionTimeout(_0x13f0ad,_0x528462){const _0x1d1114=_0x25d974;let _0x465bdd;if(_0x13f0ad==_0x1d1114(0x2dd))_0x465bdd=loginExpiry*0x3c*0x3e8;else _0x465bdd=devices[_0x528462][_0x1d1114(0x24d)]['expiry']*0x3c*0x3e8-(new Date()[_0x1d1114(0x20f)]()-devices[_0x528462][_0x1d1114(0x24d)][_0x1d1114(0x100)]);if(devices[_0x528462][_0x1d1114(0x237)])clearTimeout(devices[_0x528462][_0x1d1114(0x237)]);devices[_0x528462][_0x1d1114(0x237)]=setTimeout(()=>{const _0x27cc69=_0x1d1114;if(devices[_0x528462][_0x27cc69(0x1b6)])clearTimeout(devices[_0x528462][_0x27cc69(0x1b6)]);removeSocketListeners(_0x528462),addBlacklist(_0x528462),devices[_0x528462][_0x27cc69(0x24d)]=null,devices[_0x528462][_0x27cc69(0x2dc)]=null,devices[_0x528462][_0x27cc69(0x1a3)]['token']=null,logger['debug'](_0x27cc69(0xf0)+_0x528462[_0x27cc69(0x1df)](-0x8)),devices[_0x528462][_0x27cc69(0x1a3)]=validateAccess(devices[_0x528462][_0x27cc69(0x1a3)][_0x27cc69(0x2cb)],_0x528462),!(devices[_0x528462]['access']['allow']&&devices[_0x528462]['access'][_0x27cc69(0x1f1)]==_0x27cc69(0x242))&&(_0x13f0ad==_0x27cc69(0x2dd)?io['to'](_0x528462)[_0x27cc69(0x11d)](_0x27cc69(0x18d),{'access':{'allow':![],'reason':'access\x20timeout','token':null}}):io['to'](_0x528462)[_0x27cc69(0x11d)]('status',{'access':{'allow':![],'reason':_0x27cc69(0x1eb),'token':null}})),devices[_0x528462][_0x27cc69(0x1a3)][_0x27cc69(0x2cb)]=null;},_0x465bdd);}function setTokenRefresh(_0x3e286b){const _0x21a3cd=_0x25d974;if(devices[_0x3e286b]['pidRefreshToken'])clearTimeout(devices[_0x3e286b][_0x21a3cd(0x1b6)]);devices[_0x3e286b][_0x21a3cd(0x1b6)]=setTimeout(()=>{const _0x5cd71c=_0x21a3cd;getClientsWithUuid(_0x3e286b)[_0x5cd71c(0x1b2)]!=0x0?(devices[_0x3e286b][_0x5cd71c(0x1a3)]=refreshToken(_0x3e286b),io['to'](_0x3e286b)['emit'](_0x5cd71c(0x18d),{'status':_0x5cd71c(0x246),'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x3e286b]['access'],'externalip':devices[_0x3e286b]['ip'],'publicKey':secure['publicKey'],'validInstallation':validInstallation}),setTokenRefresh(_0x3e286b)):clearTimeout(devices[_0x3e286b][_0x5cd71c(0x1b6)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x30344c){const _0xee76a3=_0x25d974,_0x1851e2=getClient(_0x30344c['id'])[_0xee76a3(0x275)];_0x30344c[_0xee76a3(0x11d)]('bots',config),_0x30344c[_0xee76a3(0x11d)](_0xee76a3(0x28d),cleanSettings()),_0x30344c['on']('add-bot',_0x4d1e47=>{const _0x227cb7=_0xee76a3;if(validateAccess(_0x4d1e47,_0x1851e2)[_0x227cb7(0x22a)])addBot();else logger[_0x227cb7(0x123)]('Unauthorized\x20attempt\x20to\x20add\x20bot');}),_0x30344c['on']('update-bot',(_0x5af4c5,_0x2d0a5f)=>{const _0x2521b7=_0xee76a3;if(validateAccess(_0x2d0a5f,_0x1851e2)[_0x2521b7(0x22a)])toggleBot(_0x5af4c5[_0x2521b7(0xdd)],_0x5af4c5[_0x2521b7(0x18d)],_0x5af4c5[_0x2521b7(0x222)]);else logger[_0x2521b7(0x123)]('Unauthorized\x20attempt\x20to\x20update\x20bot');}),_0x30344c['on']('toggle-bot-mode',(_0x589c9e,_0x391280)=>{const _0x1b2cf1=_0xee76a3;if(validateAccess(_0x391280,_0x1851e2)[_0x1b2cf1(0x22a)])toggleBotMode(_0x589c9e);else logger[_0x1b2cf1(0x123)](_0x1b2cf1(0x295));}),_0x30344c['on'](_0xee76a3(0x178),(_0x1768fd,_0x3daa04)=>{const _0x309719=_0xee76a3;if(validateAccess(_0x3daa04,_0x1851e2)[_0x309719(0x22a)])deleteBot(_0x1768fd);else logger[_0x309719(0x123)]('Unauthorized\x20attempt\x20to\x20delete\x20bot');}),_0x30344c['on'](_0xee76a3(0x21f),(_0x4202e9,_0xbca661)=>{const _0x469216=_0xee76a3;if(validateAccess(_0xbca661,_0x1851e2)[_0x469216(0x22a)])storeSettings(_0x4202e9,!![]);else logger[_0x469216(0x123)](_0x469216(0x1a7));}),_0x30344c['on'](_0xee76a3(0x135),_0x39c383=>{const _0xd50c1a=_0xee76a3;if(validateAccess(_0x39c383,_0x1851e2)[_0xd50c1a(0x22a)])updateBB(_0xd50c1a(0x285));else logger['full'](_0xd50c1a(0xeb));}),_0x30344c['on'](_0xee76a3(0x209),_0x69017=>{const _0x3fcbc5=_0xee76a3;if(validateAccess(_0x69017,_0x1851e2)[_0x3fcbc5(0x22a)])updateBB('reinstall');else logger[_0x3fcbc5(0x123)](_0x3fcbc5(0xfe));}),_0x30344c['on'](_0xee76a3(0x12d),_0x37ec5e=>{const _0x547325=_0xee76a3;if(validateAccess(_0x37ec5e,_0x1851e2)[_0x547325(0x22a)]){const _0x4d9c82=getClient(_0x30344c['id']);if(_0x4d9c82)getBackupFiles(_0x4d9c82[_0x547325(0x275)]);else logger[_0x547325(0x123)]('Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files');}else logger['full'](_0x547325(0xfb));}),_0x30344c['on'](_0xee76a3(0x2d9),(_0x124fda,_0x27b837)=>{const _0x40ddc7=_0xee76a3;if(validateAccess(_0x27b837,_0x1851e2)[_0x40ddc7(0x22a)])restoreBackupFile(_0x124fda);else logger[_0x40ddc7(0x123)](_0x40ddc7(0x201));}),_0x30344c['on']('get-messages',_0x638e66=>{const _0x1a60b6=_0xee76a3;if(validateAccess(_0x638e66,_0x1851e2)['allow'])getMessages();else logger[_0x1a60b6(0x123)](_0x1a60b6(0x120));}),_0x30344c['on'](_0xee76a3(0x29e),(_0x1b65e4,_0x4c84e5)=>{const _0x1efc33=_0xee76a3;if(validateAccess(_0x4c84e5,_0x1851e2)[_0x1efc33(0x22a)])confirmMessage(_0x1b65e4);else logger[_0x1efc33(0x123)](_0x1efc33(0x22c));}),_0x30344c['on'](_0xee76a3(0x2cd),_0x290a07=>{const _0x4ed6e4=_0xee76a3;if(validateAccess(_0x290a07,_0x1851e2)[_0x4ed6e4(0x22a)]){if(devices[_0x1851e2][_0x4ed6e4(0x1b6)])clearTimeout(devices[_0x1851e2][_0x4ed6e4(0x1b6)]);if(devices[_0x1851e2][_0x4ed6e4(0x237)])clearTimeout(devices[_0x1851e2][_0x4ed6e4(0x237)]);removeSocketListeners(getClient(_0x30344c['id'])['uuid']),addBlacklist(_0x1851e2),devices[_0x1851e2][_0x4ed6e4(0x24d)]=null,devices[_0x1851e2]['telegram2FaApproval']=null,devices[_0x1851e2][_0x4ed6e4(0x1a3)][_0x4ed6e4(0x2cb)]=null,logger['debug'](_0x4ed6e4(0x2b3)+_0x1851e2[_0x4ed6e4(0x1df)](-0x8)),io['to'](getClient(_0x30344c['id'])[_0x4ed6e4(0x275)])['emit']('status',{'access':{'allow':![],'reason':_0x4ed6e4(0x196),'token':null}});}else logger[_0x4ed6e4(0x123)](_0x4ed6e4(0x28a));});}function initializeSocketBot(_0x4adf78){const _0x2a0387=_0x25d974,_0x8bc26f=getClient(_0x4adf78['id'])['bot'],_0x3a6b3c=getClient(_0x4adf78['id'])[_0x2a0387(0x275)];_0x4adf78['on'](_0x2a0387(0x2a0),(_0x5d9e8d,_0x14beef)=>{const _0xe520b1=_0x2a0387;if(validateAccess(_0x14beef,_0x3a6b3c)[_0xe520b1(0x22a)]){if(pid[_0x8bc26f])pid[_0x8bc26f][_0xe520b1(0x1ba)]({'function':_0xe520b1(0x224),'args':_0x5d9e8d});}else logger['full'](_0xe520b1(0x1e2));}),_0x4adf78['on'](_0x2a0387(0x1b7),(_0x1906ef,_0x537082)=>{const _0x3341af=_0x2a0387;if(validateAccess(_0x537082,_0x3a6b3c)[_0x3341af(0x22a)]){if(pid[_0x8bc26f])pid[_0x8bc26f][_0x3341af(0x1ba)]({'function':'deleteHistoryAlerts','args':_0x1906ef});}else logger[_0x3341af(0x123)]('Unauthorized\x20attempt\x20to\x20delete\x20alerts');}),_0x4adf78['on'](_0x2a0387(0x1ce),(_0x27ef69,_0x4e7dde)=>{const _0x4efa31=_0x2a0387;if(validateAccess(_0x4e7dde,_0x3a6b3c)[_0x4efa31(0x22a)]){if(pid[_0x8bc26f])pid[_0x8bc26f][_0x4efa31(0x1ba)]({'function':_0x4efa31(0x2d1),'args':_0x27ef69});}else logger['full']('Unauthorized\x20attempt\x20to\x20get\x20portfolio');}),_0x4adf78['on'](_0x2a0387(0x298),(_0x2fccb3,_0x2452d5)=>{const _0x7acebf=_0x2a0387;if(validateAccess(_0x2452d5,_0x3a6b3c)[_0x7acebf(0x22a)]){if(pid[_0x8bc26f])pid[_0x8bc26f]['send']({'function':_0x7acebf(0x276),'args':_0x2fccb3});}else logger[_0x7acebf(0x123)](_0x7acebf(0x2bc));}),_0x4adf78['on']('store-headless',(_0x447a40,_0x1b4c11)=>{const _0xda9700=_0x2a0387;if(validateAccess(_0x1b4c11,_0x3a6b3c)[_0xda9700(0x22a)]){if(pid[_0x8bc26f])pid[_0x8bc26f][_0xda9700(0x1ba)]({'function':_0xda9700(0x2a7),'args':_0x447a40});}else logger[_0xda9700(0x123)](_0xda9700(0xdf));}),_0x4adf78['on'](_0x2a0387(0x24c),(_0x5734e5,_0x5f0e9c)=>{const _0xb091fc=_0x2a0387;if(validateAccess(_0x5f0e9c,_0x3a6b3c)[_0xb091fc(0x22a)]){if(pid[_0x8bc26f])pid[_0x8bc26f][_0xb091fc(0x1ba)]({'function':_0xb091fc(0x127),'args':_0x5734e5});}else logger[_0xb091fc(0x123)](_0xb091fc(0x1b8));}),_0x4adf78['on'](_0x2a0387(0x289),_0x3eb516=>{const _0x5a2040=_0x2a0387;if(validateAccess(_0x3eb516,_0x3a6b3c)[_0x5a2040(0x22a)]){if(pid[_0x8bc26f])pid[_0x8bc26f][_0x5a2040(0x1ba)]({'function':_0x5a2040(0xde),'args':null});}else logger[_0x5a2040(0x123)](_0x5a2040(0x146));}),_0x4adf78['on'](_0x2a0387(0x2d4),_0x386656=>{const _0x117fd5=_0x2a0387;if(validateAccess(_0x386656,_0x3a6b3c)[_0x117fd5(0x22a)]){if(pid[_0x8bc26f])pid[_0x8bc26f][_0x117fd5(0x1ba)]({'function':_0x117fd5(0x16e),'args':null});}else logger[_0x117fd5(0x123)]('Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances');}),_0x4adf78['on'](_0x2a0387(0x28b),(_0xde5183,_0x54d21c)=>{const _0x275bc0=_0x2a0387;if(validateAccess(_0x54d21c,_0x3a6b3c)['allow']){if(pid[_0x8bc26f])pid[_0x8bc26f][_0x275bc0(0x1ba)]({'function':_0x275bc0(0x1a9),'args':_0xde5183});}else logger['full'](_0x275bc0(0x199));}),_0x4adf78['on'](_0x2a0387(0x2d0),_0x205bdd=>{const _0x15d1cb=_0x2a0387;if(validateAccess(_0x205bdd,_0x3a6b3c)[_0x15d1cb(0x22a)]){if(pid[_0x8bc26f])pid[_0x8bc26f]['send']({'function':'cancelLoading','args':null});}else logger['full'](_0x15d1cb(0x13f));}),_0x4adf78['on'](_0x2a0387(0x1a8),_0x4ec0e5=>{const _0x156e04=_0x2a0387;if(validateAccess(_0x4ec0e5,_0x3a6b3c)[_0x156e04(0x22a)]){if(pid[_0x8bc26f])pid[_0x8bc26f]['send']({'function':_0x156e04(0xfd),'args':null});}else logger[_0x156e04(0x123)](_0x156e04(0x28f));}),_0x4adf78['on']('update-bb',_0x5c9cc2=>{const _0x17de95=_0x2a0387;if(validateAccess(_0x5c9cc2,_0x3a6b3c)[_0x17de95(0x22a)])updateBB(_0x17de95(0x285));else logger[_0x17de95(0x123)](_0x17de95(0xeb));}),_0x4adf78['on'](_0x2a0387(0x2e5),_0x512cef=>{const _0x120c39=_0x2a0387;if(validateAccess(_0x512cef,_0x3a6b3c)[_0x120c39(0x22a)])getMessages();else logger[_0x120c39(0x123)](_0x120c39(0x120));}),_0x4adf78['on'](_0x2a0387(0x29e),(_0x32b36f,_0x43a3b9)=>{const _0x4a2e29=_0x2a0387;if(validateAccess(_0x43a3b9,_0x3a6b3c)[_0x4a2e29(0x22a)])confirmMessage(_0x32b36f);else logger[_0x4a2e29(0x123)]('Unauthorized\x20attempt\x20to\x20confirm\x20message');}),_0x4adf78['on']('logout',_0x3f17a4=>{const _0x2efd21=_0x2a0387;if(validateAccess(_0x3f17a4,_0x3a6b3c)[_0x2efd21(0x22a)]){if(devices[_0x3a6b3c][_0x2efd21(0x1b6)])clearTimeout(devices[_0x3a6b3c][_0x2efd21(0x1b6)]);if(devices[_0x3a6b3c][_0x2efd21(0x237)])clearTimeout(devices[_0x3a6b3c][_0x2efd21(0x237)]);removeSocketListeners(getClient(_0x4adf78['id'])[_0x2efd21(0x275)]),addBlacklist(_0x3a6b3c),devices[_0x3a6b3c][_0x2efd21(0x24d)]=null,devices[_0x3a6b3c][_0x2efd21(0x2dc)]=null,devices[_0x3a6b3c]['access'][_0x2efd21(0x2cb)]=null,logger[_0x2efd21(0x26f)](_0x2efd21(0x2b3)+_0x3a6b3c[_0x2efd21(0x1df)](-0x8)),io['to'](getClient(_0x4adf78['id'])[_0x2efd21(0x275)])[_0x2efd21(0x11d)](_0x2efd21(0x18d),{'access':{'allow':![],'reason':_0x2efd21(0x196),'token':null}});}else logger[_0x2efd21(0x123)]('Unauthorized\x20attempt\x20to\x20log\x20out');});}function removeSocketListeners(_0x35f636){const _0x3e51c4=_0x25d974;getClientsWithUuid(_0x35f636)[_0x3e51c4(0x2be)](_0x3dab58=>{const _0x2fccff=_0x3e51c4;getSocket(_0x3dab58['id'])[_0x2fccff(0x204)]();});}function cleanSettings(){const _0x4f9640=_0x25d974;let _0x12dc93=settings;return settings[_0x4f9640(0x227)]&&settings['telegramToken']!=''&&(_0x12dc93={..._0x12dc93,'telegramToken':_0x4f9640(0x1b4)}),settings[_0x4f9640(0x2d3)]&&settings[_0x4f9640(0x2d3)]!=''&&(_0x12dc93={..._0x12dc93,'bbPassword':'************'}),settings[_0x4f9640(0x1dd)]&&settings[_0x4f9640(0x1dd)]!=''&&(_0x12dc93={..._0x12dc93,'marketcapApi':_0x4f9640(0x1b4)}),(settings[_0x4f9640(0x2d3)]&&settings[_0x4f9640(0x2d3)]=='***'||settings[_0x4f9640(0x227)]&&settings[_0x4f9640(0x227)]==_0x4f9640(0x20a)||settings[_0x4f9640(0x1dd)]&&settings[_0x4f9640(0x1dd)]==_0x4f9640(0x20a))&&(_0x12dc93={..._0x12dc93,'restored':{'password':settings['bbPassword']=='***','telegram':settings[_0x4f9640(0x227)]=='***','marketcap':settings[_0x4f9640(0x1dd)]==_0x4f9640(0x20a)}}),_0x12dc93;}async function updateBB(_0x1a1d8c){const _0x55b1fd=_0x25d974;await backupConfigFiles(),installingUpdate=!![],config[_0x55b1fd(0x2be)](_0x1a71d0=>{const _0x593c11=_0x55b1fd;restartBot(_0x1a71d0[_0x593c11(0xdd)]);});if(_0x1a1d8c==_0x55b1fd(0x285))process[_0x55b1fd(0x1ba)]({'update':!![],'environment':environment},_0x3cfed8=>{});else _0x1a1d8c=='reinstall'&&process[_0x55b1fd(0x1ba)]({'reinstall':!![],'environment':environment},_0xca34=>{});}function startBot(_0x59bc80,_0x39c602,_0x4bb74b){const _0x85813a=_0x25d974;if(debugging)_0x59bc80[_0x85813a(0x223)]('-d');if(recreate)_0x59bc80['push']('-r');let _0x1883fd=![];const _0xd83226=_0x59bc80[0x0];_0x39c602={..._0x39c602,'stdio':['inherit','inherit',_0x85813a(0x233),_0x85813a(0x229)]},pid[_0xd83226]=childProcess[_0x85813a(0x12f)](botfile,_0x59bc80,_0x39c602),pid[_0xd83226]['on'](_0x85813a(0x169),_0x155e29=>{const _0x49eba0=_0x85813a;switch(Object[_0x49eba0(0x1fb)](_0x155e29)[0x0]){case _0x49eba0(0x2cf):updateBotName(_0xd83226,_0x155e29[_0x49eba0(0x2cf)]);break;case _0x49eba0(0x142):updateBotManager();break;case _0x49eba0(0x18d):updateStatus(_0xd83226,_0x155e29['status']);break;case _0x49eba0(0x222):updateLive(_0xd83226,_0x155e29[_0x49eba0(0x222)]);break;case'started':updateLive(_0xd83226,_0x155e29['started']),io['to'](_0xd83226)[_0x49eba0(0x11d)](_0x49eba0(0x18d),{'access':{'allow':![],'reason':_0x49eba0(0x226),'token':null}});break;case _0x49eba0(0x25a):_0x155e29[_0x49eba0(0x25a)]=='restart'&&restartBot(_0xd83226);_0x155e29['stop']==_0x49eba0(0x11f)&&toggleBot(_0xd83226,_0x49eba0(0x29c),_0x49eba0(0x213));break;case _0x49eba0(0x257):sendTelegramBot(_0xd83226,_0x155e29[_0x49eba0(0x257)]);break;case _0x49eba0(0x163):sendTelegramMsg(_0x155e29['telegrammsg']);break;case _0x49eba0(0x1b1):io['to'](_0xd83226)[_0x49eba0(0x11d)](_0x155e29[_0x49eba0(0x1b1)],_0x155e29['args']);break;}}),pid[_0xd83226]['on'](_0x85813a(0x23a),function(_0x45d144){if(_0x1883fd)return;_0x1883fd=!![],_0x4bb74b(_0x45d144);}),pid[_0xd83226]['on'](_0x85813a(0x2c3),async function(_0x547041){const _0x4e477f=_0x85813a;if(terminating)return;if(installingUpdate){io['close']();return;}if(_0x1883fd)return;_0x1883fd=!![],_0x4bb74b(null);const _0x124e45=dbConfig[_0x4e477f(0x250)](_0x4e477f(0xf6))[_0x4e477f(0xff)]({'botID':_0xd83226})[_0x4e477f(0x1e0)]();_0x124e45&&(_0x124e45[_0x4e477f(0x18d)]==_0x4e477f(0x290)||_0x124e45['status']==_0x4e477f(0x2b9))&&(await sleep(0x3e8),updateLive(_0xd83226,_0x4e477f(0x213)),logger[_0x4e477f(0x123)](_0x4e477f(0x1d3)+_0xd83226),startBot([_0xd83226,userID],{'cwd':bbpath},function(_0x3bbd7d){const _0x3782fb=_0x4e477f;if(_0x3bbd7d)logger[_0x3782fb(0x123)](_0x3bbd7d);}));});}function stopBot(_0x366eff){const _0x8cff00=_0x25d974;getClientsWithBotID(_0x366eff)['forEach'](_0x10053b=>{const _0x58594d=_0x36cf;getSocket(_0x10053b['id'])[_0x58594d(0xf2)](!![]),removeClient(_0x10053b['id']);}),pid[_0x366eff]&&(pid[_0x366eff][_0x8cff00(0x11f)](),pid[_0x366eff]=null);}function stopAllBots(){const _0x40b975=_0x25d974;terminating=!![];const _0x4c7e02=getEnabledBots();_0x4c7e02[_0x40b975(0x2be)](_0x2e18fb=>{const _0x103e4a=_0x40b975;stopBot(_0x2e18fb[_0x103e4a(0xdd)]);});}function restartBot(_0x5dc989){const _0x4c2464=_0x25d974;if(pid[_0x5dc989])pid[_0x5dc989][_0x4c2464(0x11f)]();}function addBot(){const _0x71fe83=_0x25d974;let _0x2d978f;for(let _0x2398ed=0x1;_0x2398ed<0x3e9;_0x2398ed++){_0x2d978f=_0x2398ed[_0x71fe83(0x268)]()[_0x71fe83(0x160)](0x3,'0');let _0x5a3ded=config['find'](_0x5a67b2=>_0x5a67b2[_0x71fe83(0xdd)]==_0x2d978f);if(!_0x5a3ded)break;}if(_0x2d978f===_0x71fe83(0x1f3)){logger[_0x71fe83(0x123)]('The\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached');return;}logger[_0x71fe83(0x123)](_0x71fe83(0x2ca)+_0x2d978f),dbConfig[_0x71fe83(0x250)](_0x71fe83(0xf6))[_0x71fe83(0x223)]({'botID':_0x2d978f,'botname':'Bot\x20'+_0x2d978f,'status':_0x71fe83(0x2b9),'live':''})['write'](),startBot([_0x2d978f,userID],{'cwd':bbpath},function(_0x36baba){const _0x10a064=_0x71fe83;if(_0x36baba)logger[_0x10a064(0x123)](_0x36baba);}),config=getConfiguration(),io['to'](_0x71fe83(0x235))[_0x71fe83(0x11d)](_0x71fe83(0xf6),config),broadcastToBots('bots',JSON[_0x71fe83(0x1de)](config));}function deleteBot(_0x3cf8fa){const _0x37071d=_0x25d974;getClientsWithBotID(_0x3cf8fa)[_0x37071d(0x2be)](_0x8719e0=>{const _0x7796be=_0x37071d;getSocket(_0x8719e0['id'])[_0x7796be(0xf2)](!![]),removeClient(_0x8719e0['id']);}),dbConfig[_0x37071d(0x250)](_0x37071d(0xf6))[_0x37071d(0x273)]({'botID':_0x3cf8fa})[_0x37071d(0x171)](),logger[_0x37071d(0x123)](_0x37071d(0x2d5)+_0x3cf8fa),stopBot(_0x3cf8fa);try{if(fs[_0x37071d(0x138)](path['join'](configpath,_0x37071d(0x2eb)+_0x3cf8fa+'-config.json')))fs[_0x37071d(0x150)](path['join'](configpath,_0x37071d(0x2eb)+_0x3cf8fa+_0x37071d(0x236)));if(fs[_0x37071d(0x138)](path[_0x37071d(0x1c4)](configpath,_0x37071d(0x2eb)+_0x3cf8fa+_0x37071d(0x1d5))))fs['unlinkSync'](path['join'](configpath,'bot-'+_0x3cf8fa+_0x37071d(0x1d5)));if(fs[_0x37071d(0x138)](path[_0x37071d(0x1c4)](configpath,_0x37071d(0x2eb)+_0x3cf8fa+_0x37071d(0x24b))))fs[_0x37071d(0x150)](path['join'](configpath,_0x37071d(0x2eb)+_0x3cf8fa+'-performance.json'));if(fs[_0x37071d(0x138)](path[_0x37071d(0x1c4)](configpath,_0x37071d(0x2eb)+_0x3cf8fa+_0x37071d(0x128))))fs[_0x37071d(0x150)](path[_0x37071d(0x1c4)](configpath,_0x37071d(0x2eb)+_0x3cf8fa+'-results.json'));}catch(_0x1305e5){if(_0x1305e5)logger[_0x37071d(0x123)](_0x37071d(0x25e),_0x1305e5);}config=getConfiguration(),io['to'](_0x37071d(0x235))['emit'](_0x37071d(0xf6),config),broadcastToBots('bots',JSON[_0x37071d(0x1de)](config));}function toggleBot(_0x233614,_0x22c38a,_0xe091ff){const _0x4cc50f=_0x25d974;dbConfig['get'](_0x4cc50f(0xf6))[_0x4cc50f(0xff)]({'botID':_0x233614})['assign']({'status':_0x22c38a})[_0x4cc50f(0x1c9)]({'live':_0xe091ff})[_0x4cc50f(0x171)]();if(_0x22c38a==_0x4cc50f(0x290)||_0x22c38a==_0x4cc50f(0x2b9))logger[_0x4cc50f(0x123)](_0x4cc50f(0x14a)+_0x233614),startBot([_0x233614,userID],{'cwd':bbpath},function(_0x1f3bba){const _0x1bcde9=_0x4cc50f;if(_0x1f3bba)logger[_0x1bcde9(0x123)](_0x1f3bba);});else(_0x22c38a==_0x4cc50f(0x29c)||_0x22c38a==_0x4cc50f(0x1e3))&&(logger[_0x4cc50f(0x123)](_0x4cc50f(0x16b)+_0x233614),stopBot(_0x233614));config=getConfiguration(),io['to']('botmanager')[_0x4cc50f(0x11d)]('bots',config),broadcastToBots(_0x4cc50f(0xf6),JSON[_0x4cc50f(0x1de)](config));}function toggleStatus(_0x2d2906){const _0x26007b=_0x25d974;let _0x52277f=dbConfig[_0x26007b(0x250)]('bots')['find']({'botID':_0x2d2906})[_0x26007b(0x1e0)](),_0x537ab7;if(_0x52277f[_0x26007b(0x18d)]===_0x26007b(0x290))_0x537ab7='disabled';else{if(_0x52277f[_0x26007b(0x18d)]==='new')_0x537ab7=_0x26007b(0x1e3);else{if(_0x52277f[_0x26007b(0x18d)]==='new-disabled')_0x537ab7=_0x26007b(0x2b9);else{if(_0x52277f[_0x26007b(0x18d)]===_0x26007b(0x29c))_0x537ab7='enabled';}}}return _0x537ab7;}function updateStatus(_0x242135,_0x5fe414){const _0x2023ef=_0x25d974;dbConfig['get'](_0x2023ef(0xf6))['find']({'botID':_0x242135})[_0x2023ef(0x1c9)]({'status':_0x5fe414})[_0x2023ef(0x171)](),config=getConfiguration(),io['to'](_0x2023ef(0x235))[_0x2023ef(0x11d)](_0x2023ef(0xf6),config),broadcastToBots(_0x2023ef(0xf6),JSON['stringify'](config));}function updateLive(_0x30bf55,_0x1be803){const _0x5b2208=_0x25d974;dbConfig['get'](_0x5b2208(0xf6))[_0x5b2208(0xff)]({'botID':_0x30bf55})[_0x5b2208(0x1c9)]({'live':_0x1be803})[_0x5b2208(0x171)](),config=getConfiguration(),io['to'](_0x5b2208(0x235))[_0x5b2208(0x11d)](_0x5b2208(0xf6),config),broadcastToBots(_0x5b2208(0xf6),JSON[_0x5b2208(0x1de)](config));}function updateBotName(_0x47b32b,_0x166ab9){const _0x5180ee=_0x25d974;dbConfig[_0x5180ee(0x250)](_0x5180ee(0xf6))[_0x5180ee(0xff)]({'botID':_0x47b32b})[_0x5180ee(0x1c9)]({'botname':_0x166ab9})['write'](),config=getConfiguration(),io['to'](_0x5180ee(0x235))['emit'](_0x5180ee(0xf6),config),broadcastToBots('bots',JSON[_0x5180ee(0x1de)](config));}function _0x36cf(_0x2ef50b,_0x3efa75){const _0x30dcaa=_0x478d();return _0x36cf=function(_0x1858b6,_0x1c7ecb){_0x1858b6=_0x1858b6-0xd9;let _0x478dd5=_0x30dcaa[_0x1858b6];return _0x478dd5;},_0x36cf(_0x2ef50b,_0x3efa75);}function updateBotManager(){const _0x37c58f=_0x25d974;config=getConfiguration(),io['to'](_0x37c58f(0x235))[_0x37c58f(0x11d)](_0x37c58f(0xf6),config),broadcastToBots(_0x37c58f(0xf6),JSON['stringify'](config));}function toggleBotMode(_0x4c383e){const _0x338e32=_0x25d974;if(pid[_0x4c383e])pid[_0x4c383e][_0x338e32(0x1ba)]({'function':_0x338e32(0x145),'args':null});else{const _0x443ac0=configpath+'bot-'+_0x4c383e+_0x338e32(0x236),_0x442522=fs['readFileSync'](_0x443ac0),_0x4b98a4=JSON[_0x338e32(0x245)](_0x442522),_0x17e07e=_0x4b98a4[_0x338e32(0x136)][0x0][_0x338e32(0x19b)];_0x4b98a4[_0x338e32(0x136)][0x0][_0x338e32(0x19b)]=!_0x17e07e;const _0x5cf924=JSON[_0x338e32(0x1de)](_0x4b98a4,null,0x2);fs[_0x338e32(0x1f5)](_0x443ac0,_0x5cf924),config=getConfiguration(),io['to'](_0x338e32(0x235))[_0x338e32(0x11d)](_0x338e32(0xf6),config),broadcastToBots(_0x338e32(0xf6),JSON[_0x338e32(0x1de)](config));}}function validateTelegram(_0x30378e){const _0x3e728f=_0x25d974;if(_0x30378e[_0x3e728f(0x231)][_0x3e728f(0x1e7)]!=settings[_0x3e728f(0x133)]&&'@'+_0x30378e[_0x3e728f(0x231)][_0x3e728f(0x1e7)]!=settings[_0x3e728f(0x133)]||_0x30378e[_0x3e728f(0xe9)]['id']!=settings[_0x3e728f(0x202)])return sendTelegram(_0x30378e[_0x3e728f(0xe9)]['id'],_0x3e728f(0x1c2),{'parse_mode':_0x3e728f(0x1d9)}),![];return!![];}async function initTelegram(){const _0x1b4832=_0x25d974;tgBot&&(await tgBot[_0x1b4832(0x25a)](),await sleep(0x7d0));tgBot=new Telegraf(settings[_0x1b4832(0x227)]);let _0x351d8f=_0x1b4832(0x283);_0x351d8f+='\x0a',_0x351d8f+=_0x1b4832(0x253),_0x351d8f+=_0x1b4832(0x15e),_0x351d8f+=_0x1b4832(0x24e),_0x351d8f+=_0x1b4832(0x2cc),_0x351d8f+=_0x1b4832(0x141),_0x351d8f+='/off\x20-\x20stop\x20bot(s)\x0a',_0x351d8f+='/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a',_0x351d8f+=_0x1b4832(0xd9),_0x351d8f+='/status\x20-\x20show\x20bot(s)\x20status\x0a',_0x351d8f+=_0x1b4832(0x1e4),_0x351d8f+=_0x1b4832(0x2aa),_0x351d8f+=_0x1b4832(0x2db),_0x351d8f+='/backup\x20-\x20receive\x20backup\x20files\x0a',_0x351d8f+=_0x1b4832(0x260),_0x351d8f+=_0x1b4832(0x12a),_0x351d8f+=_0x1b4832(0x1a4);let _0x47cbb0='Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a';_0x47cbb0+='\x0a',_0x47cbb0+=_0x351d8f,tgBot[_0x1b4832(0x244)]((_0x583a9e,_0xa45935)=>{const _0x4fb26e=_0x1b4832;logger[_0x4fb26e(0x1bc)](getTimeStamp()+_0x4fb26e(0x2a5)),logger['debug'](_0x4fb26e(0x26b),_0x583a9e);}),tgBot[_0x1b4832(0x126)](async(_0x238e61,_0x24d5a5)=>{const _0x103b7f=_0x1b4832;if(settings[_0x103b7f(0x202)]||_0x238e61[_0x103b7f(0x285)][_0x103b7f(0x169)][_0x103b7f(0x2f4)]!='/start'){if(!validateTelegram(_0x238e61))return;}_0x24d5a5();}),tgBot[_0x1b4832(0x1c7)]('start',async _0x147d77=>{const _0x21a348=_0x1b4832;if(_0x147d77['from']['username']==settings[_0x21a348(0x133)]||'@'+_0x147d77[_0x21a348(0x231)][_0x21a348(0x1e7)]==settings['telegramUsername']){if(!settings[_0x21a348(0x202)])updateSetting('telegramChatId',_0x147d77[_0x21a348(0xe9)]['id']);else{if(!validateTelegram(_0x147d77))return;}}else{if(!validateTelegram(_0x147d77))return;}updateSetting('telegramEnabled',!![]),await sendTelegram(_0x147d77[_0x21a348(0xe9)]['id'],_0x47cbb0);}),tgBot[_0x1b4832(0x1c7)](_0x1b4832(0x1e9),async _0x1985b3=>{const _0x462cf5=_0x1b4832;updateSetting(_0x462cf5(0x2ae),!![]),await sendTelegram(_0x1985b3[_0x462cf5(0xe9)]['id'],_0x462cf5(0x102));}),tgBot[_0x1b4832(0x1c7)](_0x1b4832(0x10c),async _0x388143=>{const _0x308b98=_0x1b4832;await sendTelegram(_0x388143[_0x308b98(0xe9)]['id'],_0x308b98(0x15b)),updateSetting('telegramEnabled',![]);}),tgBot[_0x1b4832(0x1c7)](_0x1b4832(0x200),async _0x40fb82=>{const _0x47f216=_0x1b4832,_0x54aa97=Markup[_0x47f216(0x1e8)]([Markup[_0x47f216(0x18b)][_0x47f216(0x17c)](_0x47f216(0x22b),_0x47f216(0x10e)),Markup[_0x47f216(0x18b)][_0x47f216(0x17c)]('Alerts',_0x47f216(0x10f)),Markup[_0x47f216(0x18b)]['callback'](_0x47f216(0x121),_0x47f216(0x256))]);_0x40fb82[_0x47f216(0xee)]('Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?',_0x54aa97);}),tgBot[_0x1b4832(0x216)](_0x1b4832(0x10e),async _0x834ab7=>{const _0x39c67e=_0x1b4832;_0x834ab7['editMessageReplyMarkup'](),updateSetting('telegramEvents',_0x39c67e(0x1f9)),updateSetting(_0x39c67e(0x2ae),!![]),await sendTelegram(_0x834ab7['chat']['id'],_0x39c67e(0x130));}),tgBot[_0x1b4832(0x216)](_0x1b4832(0x10f),async _0x3b5aab=>{const _0x20ce08=_0x1b4832;_0x3b5aab[_0x20ce08(0x1bb)](),updateSetting('telegramEvents',_0x20ce08(0x179)),updateSetting(_0x20ce08(0x2ae),!![]),await sendTelegram(_0x3b5aab[_0x20ce08(0xe9)]['id'],_0x20ce08(0x2b5));}),tgBot[_0x1b4832(0x216)](_0x1b4832(0x256),async _0x3c0de3=>{const _0x110d3a=_0x1b4832;_0x3c0de3[_0x110d3a(0x1bb)](),updateSetting(_0x110d3a(0x131),_0x110d3a(0x2ec)),updateSetting('telegramEnabled',!![]),await sendTelegram(_0x3c0de3[_0x110d3a(0xe9)]['id'],_0x110d3a(0x1e6));}),tgBot[_0x1b4832(0x1c7)](_0x1b4832(0x18d),async _0x3f8a83=>{const _0xe07a92=_0x1b4832,_0x1536fc=getBotsWithMode();let _0x58e726=_0xe07a92(0x13b);config['forEach'](_0x48c4f1=>{const _0x343db1=_0xe07a92,_0x212c8c=_0x1536fc['find'](_0x5da678=>_0x5da678[_0x343db1(0xdd)]==_0x48c4f1[_0x343db1(0xdd)])[_0x343db1(0x2f3)];_0x58e726+=_0x343db1(0x294)+_0x48c4f1[_0x343db1(0xdd)]+':\x20'+_0x48c4f1['status']+_0x343db1(0x12b)+_0x212c8c+_0x343db1(0x12b)+_0x48c4f1[_0x343db1(0x222)]+'\x0a';}),_0x58e726+='\x0a',_0x58e726+='<b>Telegram\x20Bot\x20Status:</b>\x0a',_0x58e726+=!settings[_0xe07a92(0x2ae)]?_0xe07a92(0x241):_0xe07a92(0x1a6),_0x58e726+=settings[_0xe07a92(0x2ae)]?settings[_0xe07a92(0x131)]==_0xe07a92(0x2ec)?_0xe07a92(0x27b):_0xe07a92(0x143)+settings[_0xe07a92(0x131)]+_0xe07a92(0x287):'',await sendTelegram(_0x3f8a83[_0xe07a92(0xe9)]['id'],_0x58e726,{'parse_mode':_0xe07a92(0x1d9)});}),tgBot['command'](_0x1b4832(0x183),async _0x461013=>{const _0x195748=_0x1b4832,_0x210f67=getEnabledBots();if(_0x210f67[_0x195748(0x1b2)]==0x0)await sendTelegram(_0x461013[_0x195748(0xe9)]['id'],_0x195748(0x29a));else{if(_0x210f67[_0x195748(0x1b2)]>0x1)_0x210f67[_0x195748(0x223)]({'botID':_0x195748(0x2ec)});let _0x3d4b50=[],_0x4f0513=[];const _0x37b1f8=_0x210f67['length']%0x4==0x0||_0x210f67['length']%0x4==0x3||_0x210f67[_0x195748(0x1b2)]%0x3==0x1?0x4:0x3;let _0x4933c1=0x0;_0x210f67[_0x195748(0x2be)]((_0x41c63c,_0x431ff9)=>{const _0x4f8ab1=_0x195748;if(_0x431ff9%_0x37b1f8==0x0)_0x4f0513=[];_0x4f0513[_0x4f8ab1(0x223)](Markup[_0x4f8ab1(0x18b)]['callback'](_0x41c63c[_0x4f8ab1(0xdd)]==_0x4f8ab1(0x2ec)?_0x4f8ab1(0x22f):_0x4f8ab1(0x294)+_0x41c63c['botID'],_0x4f8ab1(0x18e)+_0x41c63c[_0x4f8ab1(0xdd)])),_0x431ff9%_0x37b1f8==0x0&&(_0x3d4b50[_0x4933c1]=_0x4f0513,_0x4933c1++);});const _0x27fdfd=Markup[_0x195748(0x1e8)](_0x3d4b50);_0x461013[_0x195748(0xee)](_0x195748(0x212),_0x27fdfd);}}),tgBot[_0x1b4832(0x216)](/restart_(.+)/,async _0xf44f64=>{const _0x319512=_0x1b4832,_0x20fee2=_0xf44f64[_0x319512(0x10d)][0x1];_0xf44f64[_0x319512(0x1bb)](),_0x20fee2==_0x319512(0x2ec)?config[_0x319512(0x2be)](_0x304834=>{const _0x310b4e=_0x319512;restartBot(_0x304834[_0x310b4e(0xdd)]);}):restartBot(_0x20fee2);}),tgBot[_0x1b4832(0x1c7)]('on',async _0x4e7673=>{const _0x95d876=_0x1b4832,_0x22f2da=getDisabledBots();if(_0x22f2da[_0x95d876(0x1b2)]==0x0)await sendTelegram(_0x4e7673[_0x95d876(0xe9)]['id'],_0x95d876(0x2c0));else{if(_0x22f2da['length']>0x1)_0x22f2da['push']({'botID':'all'});let _0x161820=[],_0x31b419=[];const _0x8d0a05=_0x22f2da[_0x95d876(0x1b2)]%0x4==0x0||_0x22f2da[_0x95d876(0x1b2)]%0x4==0x3||_0x22f2da[_0x95d876(0x1b2)]%0x3==0x1?0x4:0x3;let _0x119349=0x0;_0x22f2da[_0x95d876(0x2be)]((_0x24f979,_0x314e91)=>{const _0x2a708d=_0x95d876;if(_0x314e91%_0x8d0a05==0x0)_0x31b419=[];_0x31b419[_0x2a708d(0x223)](Markup['button'][_0x2a708d(0x17c)](_0x24f979['botID']==_0x2a708d(0x2ec)?_0x2a708d(0x22f):_0x2a708d(0x294)+_0x24f979[_0x2a708d(0xdd)],_0x2a708d(0x189)+_0x24f979[_0x2a708d(0xdd)])),_0x314e91%_0x8d0a05==0x0&&(_0x161820[_0x119349]=_0x31b419,_0x119349++);});const _0x26b55c=Markup[_0x95d876(0x1e8)](_0x161820);_0x4e7673[_0x95d876(0xee)](_0x95d876(0x197),_0x26b55c);}}),tgBot[_0x1b4832(0x216)](/on_(.+)/,async _0x3c77f2=>{const _0x1f8206=_0x1b4832,_0x5bd792=_0x3c77f2[_0x1f8206(0x10d)][0x1];_0x3c77f2[_0x1f8206(0x1bb)]();if(_0x5bd792==_0x1f8206(0x2ec)){const _0x3e4218=getDisabledBots();await sendTelegram(_0x3c77f2['chat']['id'],_0x1f8206(0x11a)),_0x3e4218[_0x1f8206(0x2be)](_0x3d51ac=>{const _0x5866fb=_0x1f8206;if(_0x3d51ac[_0x5866fb(0xdd)]!='all')toggleBot(_0x3d51ac['botID'],toggleStatus(_0x3d51ac['botID']),'stopped');});}else await sendTelegram(_0x3c77f2[_0x1f8206(0xe9)]['id'],_0x1f8206(0x114)+_0x5bd792),toggleBot(_0x5bd792,toggleStatus(_0x5bd792),_0x1f8206(0x213));}),tgBot[_0x1b4832(0x1c7)](_0x1b4832(0x124),async _0x1691d7=>{const _0x3eac63=_0x1b4832,_0x3bf014=getEnabledBots();if(_0x3bf014['length']==0x0)await sendTelegram(_0x1691d7['chat']['id'],'No\x20bots\x20running\x20right\x20now');else{if(_0x3bf014[_0x3eac63(0x1b2)]>0x1)_0x3bf014[_0x3eac63(0x223)]({'botID':_0x3eac63(0x2ec)});let _0x474a3=[],_0x4987b2=[];const _0x959d82=_0x3bf014['length']%0x4==0x0||_0x3bf014[_0x3eac63(0x1b2)]%0x4==0x3||_0x3bf014[_0x3eac63(0x1b2)]%0x3==0x1?0x4:0x3;let _0x319b3a=0x0;_0x3bf014[_0x3eac63(0x2be)]((_0x42951e,_0x5d977e)=>{const _0x735786=_0x3eac63;if(_0x5d977e%_0x959d82==0x0)_0x4987b2=[];_0x4987b2[_0x735786(0x223)](Markup[_0x735786(0x18b)][_0x735786(0x17c)](_0x42951e[_0x735786(0xdd)]=='all'?_0x735786(0x22f):_0x735786(0x294)+_0x42951e[_0x735786(0xdd)],_0x735786(0x109)+_0x42951e[_0x735786(0xdd)])),_0x5d977e%_0x959d82==0x0&&(_0x474a3[_0x319b3a]=_0x4987b2,_0x319b3a++);});const _0x32bcc8=Markup[_0x3eac63(0x1e8)](_0x474a3);_0x1691d7[_0x3eac63(0xee)]('Which\x20bot\x20do\x20you\x20want\x20to\x20stop?',_0x32bcc8);}}),tgBot[_0x1b4832(0x216)](/off_(.+)/,async _0xc7f3e=>{const _0x1a649a=_0x1b4832,_0x2a3920=_0xc7f3e[_0x1a649a(0x10d)][0x1];_0xc7f3e[_0x1a649a(0x1bb)]();if(_0x2a3920==_0x1a649a(0x2ec)){const _0x1ada29=getEnabledBots();await sendTelegram(_0xc7f3e[_0x1a649a(0xe9)]['id'],_0x1a649a(0x1d6)),_0x1ada29[_0x1a649a(0x2be)](_0x4395c5=>{const _0x391051=_0x1a649a;if(_0x4395c5[_0x391051(0xdd)]!=_0x391051(0x2ec))toggleBot(_0x4395c5['botID'],toggleStatus(_0x4395c5['botID']),_0x391051(0x213));});}else await sendTelegram(_0xc7f3e[_0x1a649a(0xe9)]['id'],_0x1a649a(0x1b0)+_0x2a3920),toggleBot(_0x2a3920,toggleStatus(_0x2a3920),'stopped');}),tgBot[_0x1b4832(0x1c7)]('metrics',async _0x4c0695=>{const _0x3412d0=_0x1b4832,_0x42d193=getEnabledBots();if(_0x42d193[_0x3412d0(0x1b2)]==0x0)await sendTelegram(_0x4c0695[_0x3412d0(0xe9)]['id'],_0x3412d0(0x29a));else{if(_0x42d193[_0x3412d0(0x1b2)]>0x1){let _0x4e76e0=[],_0x5827e2=[];const _0x9410b5=_0x42d193[_0x3412d0(0x1b2)]%0x4==0x0||_0x42d193['length']%0x4==0x3||_0x42d193['length']%0x3==0x1?0x4:0x3;let _0x5e826c=0x0;_0x42d193[_0x3412d0(0x2be)]((_0x4386a5,_0xd85b70)=>{const _0x4f4b02=_0x3412d0;if(_0xd85b70%_0x9410b5==0x0)_0x5827e2=[];_0x5827e2[_0x4f4b02(0x223)](Markup[_0x4f4b02(0x18b)][_0x4f4b02(0x17c)](_0x4f4b02(0x294)+_0x4386a5['botID'],'metrics_'+_0x4386a5[_0x4f4b02(0xdd)])),_0xd85b70%_0x9410b5==0x0&&(_0x4e76e0[_0x5e826c]=_0x5827e2,_0x5e826c++);});const _0x5a4111=Markup[_0x3412d0(0x1e8)](_0x4e76e0);_0x4c0695[_0x3412d0(0xee)](_0x3412d0(0x118),_0x5a4111);}else{const _0x3d58fe=_0x42d193[0x0][_0x3412d0(0xdd)];if(pid[_0x3d58fe])pid[_0x3d58fe]['send']({'function':'sendMetricsTelegram','args':null});}}}),tgBot['action'](/metrics_(.+)/,async _0x2b3b8e=>{const _0x3658a2=_0x1b4832,_0x1bbd0c=_0x2b3b8e[_0x3658a2(0x10d)][0x1];_0x2b3b8e['editMessageReplyMarkup']();if(pid[_0x1bbd0c])pid[_0x1bbd0c][_0x3658a2(0x1ba)]({'function':_0x3658a2(0x26d),'args':null});}),tgBot['command']('portfolio',async _0x123b4a=>{const _0x591fdc=_0x1b4832,_0x833a02=getEnabledBots();if(_0x833a02['length']==0x0)await sendTelegram(_0x123b4a['chat']['id'],'No\x20bots\x20running\x20right\x20now');else{if(_0x833a02[_0x591fdc(0x1b2)]>0x1){let _0x2e2852=[],_0x5d13ec=[];const _0xe6584b=_0x833a02[_0x591fdc(0x1b2)]%0x4==0x0||_0x833a02['length']%0x4==0x3||_0x833a02['length']%0x3==0x1?0x4:0x3;let _0x3f4bf9=0x0;_0x833a02['forEach']((_0x358047,_0x31e0a1)=>{const _0x5e3417=_0x591fdc;if(_0x31e0a1%_0xe6584b==0x0)_0x5d13ec=[];_0x5d13ec['push'](Markup[_0x5e3417(0x18b)]['callback'](_0x5e3417(0x294)+_0x358047['botID'],_0x5e3417(0x2f2)+_0x358047['botID'])),_0x31e0a1%_0xe6584b==0x0&&(_0x2e2852[_0x3f4bf9]=_0x5d13ec,_0x3f4bf9++);});const _0x476fa4=Markup[_0x591fdc(0x1e8)](_0x2e2852);_0x123b4a['reply'](_0x591fdc(0x20e),_0x476fa4);}else{const _0xa95708=_0x833a02[0x0][_0x591fdc(0xdd)];if(pid[_0xa95708])pid[_0xa95708][_0x591fdc(0x1ba)]({'function':_0x591fdc(0x1ea),'args':null});}}}),tgBot['action'](/portfolio_(.+)/,async _0x548005=>{const _0x5e257b=_0x1b4832,_0x14d544=_0x548005[_0x5e257b(0x10d)][0x1];_0x548005[_0x5e257b(0x1bb)]();if(pid[_0x14d544])pid[_0x14d544][_0x5e257b(0x1ba)]({'function':_0x5e257b(0x1ea),'args':null});}),tgBot[_0x1b4832(0x1c7)]('logs',async _0x2bd8f7=>{const _0x58a4ce=_0x1b4832,_0x540e15='logs';await zipFiles(_0x540e15);const _0x2970f2=zippath+(_0x540e15+_0x58a4ce(0x185));_0x2bd8f7[_0x58a4ce(0x1ff)]({'source':_0x2970f2})['then'](()=>{})[_0x58a4ce(0x244)](_0x1d3e11=>logger[_0x58a4ce(0x26f)](_0x58a4ce(0x2a2)+_0x540e15+_0x58a4ce(0x137),_0x1d3e11));}),tgBot[_0x1b4832(0x1c7)]('backup',async _0x144fc6=>{const _0x1b9303=_0x1b4832,_0x273e42='backup';await backupConfigFiles(),await zipFiles(_0x273e42);const _0x13611e=zippath+(_0x273e42+_0x1b9303(0x185));_0x144fc6[_0x1b9303(0x1ff)]({'source':_0x13611e})['then'](()=>{})['catch'](_0x45b300=>logger[_0x1b9303(0x26f)](_0x1b9303(0x2a2)+_0x273e42+_0x1b9303(0x137),_0x45b300));}),tgBot[_0x1b4832(0x1c7)](_0x1b4832(0x285),async _0x1d3187=>{const _0x52f19c=_0x1b4832;await getMessages();if(!updateAvailable)await sendTelegram(_0x1d3187[_0x52f19c(0xe9)]['id'],'Your\x20installation\x20is\x20already\x20up\x20to\x20date');else{if(!validInstallation)await sendTelegram(_0x1d3187['chat']['id'],'Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update');else{const _0x550edc=Markup['inlineKeyboard']([Markup['button']['callback']('Yes',_0x52f19c(0x2e8)),Markup[_0x52f19c(0x18b)][_0x52f19c(0x17c)]('No',_0x52f19c(0x15c))]);_0x1d3187[_0x52f19c(0xee)](_0x52f19c(0x1f6),_0x550edc);}}}),tgBot[_0x1b4832(0x216)](/update_(.+)/,async _0x208dee=>{const _0x2bf712=_0x1b4832,_0x470c18=_0x208dee[_0x2bf712(0x10d)][0x1];_0x208dee[_0x2bf712(0x1bb)](),_0x470c18==_0x2bf712(0x119)&&(await sendTelegram(_0x208dee[_0x2bf712(0xe9)]['id'],_0x2bf712(0xea)),updateBB(_0x2bf712(0x285))),_0x470c18=='no'&&await sendTelegram(_0x208dee[_0x2bf712(0xe9)]['id'],_0x2bf712(0x288));}),tgBot[_0x1b4832(0x1c7)]('reinstall',async _0x1e18d1=>{const _0x44f518=_0x1b4832;if(!validInstallation)await sendTelegram(_0x1e18d1['chat']['id'],_0x44f518(0x1c3));else{const _0x2284a1=Markup['inlineKeyboard']([Markup['button'][_0x44f518(0x17c)]('Yes',_0x44f518(0x1dc)),Markup[_0x44f518(0x18b)][_0x44f518(0x17c)]('No',_0x44f518(0x228))]);_0x1e18d1['reply'](_0x44f518(0x1c1),_0x2284a1);}}),tgBot['action'](/reinstall_(.+)/,async _0x5c8124=>{const _0x234e50=_0x1b4832,_0x146339=_0x5c8124[_0x234e50(0x10d)][0x1];_0x5c8124['editMessageReplyMarkup'](),_0x146339==_0x234e50(0x119)&&(await sendTelegram(_0x5c8124['chat']['id'],_0x234e50(0x261)),updateBB('reinstall')),_0x146339=='no'&&await sendTelegram(_0x5c8124[_0x234e50(0xe9)]['id'],'Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled');}),tgBot[_0x1b4832(0x1c7)](_0x1b4832(0x23d),async _0xc8d7d6=>{const _0x17e4f2=_0x1b4832,_0x3791fb=getBotsWithMode();if(_0x3791fb[_0x17e4f2(0x1b2)]==0x0)await sendTelegram(_0xc8d7d6[_0x17e4f2(0xe9)]['id'],'No\x20bots\x20running\x20right\x20now');else{let _0x21415a=[],_0x4accac=[];const _0x51ae9e=0x2;let _0x57ba45=0x0;_0x3791fb[_0x17e4f2(0x2be)]((_0x30f32c,_0x332ca8)=>{const _0x8b9d4f=_0x17e4f2;if(_0x332ca8%_0x51ae9e==0x0)_0x4accac=[];_0x4accac[_0x8b9d4f(0x223)](Markup[_0x8b9d4f(0x18b)]['callback'](_0x8b9d4f(0x294)+_0x30f32c[_0x8b9d4f(0xdd)]+'\x20('+_0x30f32c[_0x8b9d4f(0x2f3)]+')',_0x8b9d4f(0x27f)+_0x30f32c[_0x8b9d4f(0xdd)])),_0x332ca8%_0x51ae9e==0x0&&(_0x21415a[_0x57ba45]=_0x4accac,_0x57ba45++);});const _0x5ced4e=Markup[_0x17e4f2(0x1e8)](_0x21415a);_0xc8d7d6[_0x17e4f2(0xee)](_0x17e4f2(0x28e),_0x5ced4e);}}),tgBot['action'](/toggle_(.+)/,async _0x17839c=>{const _0x1766be=_0x1b4832,_0xd9517b=_0x17839c['match'][0x1];_0x17839c[_0x1766be(0x1bb)]();const _0x35a6fb=getBotsWithMode(),_0x2f2a8d=_0x35a6fb[_0x1766be(0xff)](_0x133153=>_0x133153['botID']==_0xd9517b),_0x196703=_0x2f2a8d['mode']==_0x1766be(0x19d)?_0x1766be(0x156):'auto';await sendTelegram(_0x17839c[_0x1766be(0xe9)]['id'],_0x1766be(0x170)+_0xd9517b+'\x20to\x20'+_0x196703+_0x1766be(0xe5)),toggleBotMode(_0xd9517b);}),tgBot[_0x1b4832(0x1c7)](_0x1b4832(0x23f),async _0x16d4cc=>{const _0x11b1e2=_0x1b4832;let _0x4f8c6e='';config[_0x11b1e2(0x2be)](_0x4adbd6=>{const _0x115e5f=_0x11b1e2;_0x4f8c6e+=_0x115e5f(0x294)+_0x4adbd6[_0x115e5f(0xdd)]+':\x20'+_0x4adbd6[_0x115e5f(0x2cf)]+'\x0a';}),await sendTelegram(_0x16d4cc[_0x11b1e2(0xe9)]['id'],_0x4f8c6e,{'parse_mode':_0x11b1e2(0x1d9)});}),tgBot[_0x1b4832(0x1c7)]('help',async _0x473c70=>{await sendTelegram(_0x473c70['chat']['id'],_0x351d8f);}),process[_0x1b4832(0x2ab)](_0x1b4832(0x2b2),()=>tgBot[_0x1b4832(0x25a)]('SIGINT')),process[_0x1b4832(0x2ab)](_0x1b4832(0x1d0),()=>tgBot[_0x1b4832(0x25a)](_0x1b4832(0x1d0))),tgBot['launch']();}function disableTelegram(){tgBot&&tgBot['stop']();}async function sendTelegram(_0x16f5e5,_0x10e7f5,_0x52f0cd){const _0x520aa5=_0x25d974;_0x52f0cd={..._0x52f0cd,'disable_web_page_preview':!![]};try{await tgBot[_0x520aa5(0x257)]['sendMessage'](_0x16f5e5,_0x10e7f5,_0x52f0cd);}catch(_0x39cba5){logger[_0x520aa5(0x26f)]('Telegram\x20error:',_0x39cba5);}}async function sendTelegramBot(_0x4868a7,_0x3dc82e){const _0x134c88=_0x25d974;if(settings['telegramEnabled']){if(settings['telegramEvents']==_0x134c88(0x2ec)||(_0x3dc82e[_0x134c88(0x247)]==_0x134c88(0x23a)||_0x3dc82e[_0x134c88(0x247)]==_0x134c88(0x139)||_0x3dc82e[_0x134c88(0x247)]==_0x134c88(0x17b))&&settings['telegramEvents']==_0x134c88(0x179)||_0x3dc82e[_0x134c88(0x247)]=='order'&&settings['telegramEvents']==_0x134c88(0x1f9)){if(tgBot&&settings['telegramChatId']){if(_0x3dc82e[_0x134c88(0x26c)])await sendTelegram(settings[_0x134c88(0x202)],_0x3dc82e[_0x134c88(0x2cf)]+_0x134c88(0xed)+_0x3dc82e['event']);else await sendTelegram(settings['telegramChatId'],_0x134c88(0x294)+_0x4868a7+_0x134c88(0xed)+_0x3dc82e[_0x134c88(0x172)]);}}}}async function sendTelegramMsg(_0xbf10e8,_0x394887=_0x25d974(0x1d9)){const _0x1c3edd=_0x25d974;return settings[_0x1c3edd(0x2ae)]&&tgBot&&settings['telegramChatId']?(await sendTelegram(settings[_0x1c3edd(0x202)],_0xbf10e8,{'parse_mode':_0x394887}),!![]):![];}function getDeviceWithIp(_0x2f013e){const _0x514a3b=_0x25d974;return devices[_0x514a3b(0xff)](_0x33d219=>_0x33d219['ip']===_0x2f013e);}async function temporaryAccess2FA(_0x3ea5e8,_0x5b9210){const _0x134c9c=_0x25d974;let _0x3204d5=new Date(),_0x330c74=![];if(lastIpApproval){if(_0x3204d5-lastIpApproval<0x1388)_0x330c74=!![];}lastIpApproval=new Date();if(_0x330c74)return;if(tgBot&&settings[_0x134c9c(0x202)]){const _0x8c7c1e=uuidRandom();tmpStorage[_0x8c7c1e]={'uuid':_0x3ea5e8,'externalip':_0x5b9210};const _0x124ad0=Markup[_0x134c9c(0x1e8)]([Markup['button']['callback'](_0x134c9c(0x187),_0x134c9c(0x134)+_0x8c7c1e),Markup[_0x134c9c(0x18b)][_0x134c9c(0x17c)]('15\x20min',_0x134c9c(0x293)+_0x8c7c1e),Markup[_0x134c9c(0x18b)]['callback'](_0x134c9c(0x1a5),'tempaccess_30_'+_0x8c7c1e),Markup['button'][_0x134c9c(0x17c)](_0x134c9c(0x2c4),'tempaccess_reject_'+_0x8c7c1e)]);await sendTelegram(settings[_0x134c9c(0x202)],_0x134c9c(0x132)+normalizeIP(_0x5b9210)[_0x134c9c(0x1db)]+'\x20?',_0x124ad0),tgBot[_0x134c9c(0x216)](/tempaccess_(.+)_(.+)/,async _0xaaffc3=>{const _0x1f4643=_0x134c9c,_0x295bd8=_0xaaffc3[_0x1f4643(0x10d)][0x1],_0x103361=_0xaaffc3[_0x1f4643(0x10d)][0x2],{uuid:_0x3b4ee9,externalip:_0x205c6e}=tmpStorage[_0x103361];delete tmpStorage[_0x103361],_0xaaffc3[_0x1f4643(0x1bb)](),devices[_0x3b4ee9][_0x1f4643(0x24d)]={'clientip':_0x205c6e,'timestamp':new Date()['getTime'](),'expiry':_0x295bd8},_0x295bd8!=_0x1f4643(0x2c4)?(await sendTelegram(_0xaaffc3[_0x1f4643(0xe9)]['id'],'Access\x20enabled\x20for\x20'+_0x295bd8+_0x1f4643(0x208),{'parse_mode':_0x1f4643(0x1d9)}),io['to'](_0x3b4ee9)['emit'](_0x1f4643(0x18d),{'access':{'allow':![],'reason':'reload','token':null}})):(await sendTelegram(_0xaaffc3['chat']['id'],_0x1f4643(0x2d7)),io['to'](_0x3b4ee9)[_0x1f4643(0x11d)](_0x1f4643(0x18d),{'access':{'allow':![],'reason':'temporary\x20access\x20rejected','token':null}}));});}}async function loginAccess2FA(_0xb2e1cc,_0x85af95){const _0x40e336=_0x25d974;if(tgBot&&settings[_0x40e336(0x202)]){const _0x4fa470=uuidRandom();tmpStorage[_0x4fa470]={'uuid':_0xb2e1cc,'externalip':_0x85af95};const _0x5683ea=Markup[_0x40e336(0x1e8)]([Markup[_0x40e336(0x18b)][_0x40e336(0x17c)](_0x40e336(0x20c),_0x40e336(0x19e)+loginExpiry+'_'+_0x4fa470),Markup[_0x40e336(0x18b)]['callback'](_0x40e336(0x2c4),_0x40e336(0x2a1)+_0x4fa470)]);await sendTelegram(settings[_0x40e336(0x202)],_0x40e336(0x17d)+normalizeIP(_0x85af95)[_0x40e336(0x1db)]+'\x20?',_0x5683ea),tgBot[_0x40e336(0x216)](/login2fa_(.+)_(.+)/,async _0x3bc7b5=>{const _0x4d46b9=_0x40e336,_0x1cd8d6=_0x3bc7b5['match'][0x1],_0x30f217=_0x3bc7b5[_0x4d46b9(0x10d)][0x2],{uuid:_0x1f2e7a,externalip:_0x2fa02f}=tmpStorage[_0x30f217];delete tmpStorage[_0x30f217],_0x3bc7b5[_0x4d46b9(0x1bb)](),devices[_0x1f2e7a][_0x4d46b9(0x2dc)]={'clientip':_0x2fa02f,'timestamp':new Date()[_0x4d46b9(0x20f)](),'expiry':_0x1cd8d6},_0x1cd8d6!=_0x4d46b9(0x2c4)?(await sendTelegram(_0x3bc7b5['chat']['id'],_0x4d46b9(0x1c5),{'parse_mode':'HTML'}),io['to'](_0x1f2e7a)['emit'](_0x4d46b9(0x18d),{'access':{'allow':![],'reason':'reload','token':null}})):(await sendTelegram(_0x3bc7b5[_0x4d46b9(0xe9)]['id'],_0x4d46b9(0x16c)),io['to'](_0x1f2e7a)[_0x4d46b9(0x11d)](_0x4d46b9(0x18d),{'access':{'allow':![],'reason':'2FA\x20login\x20rejected','token':null}}));});}}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x4beb0d=_0x25d974;return dbConfig['get'](_0x4beb0d(0xf6))['sortBy'](_0x4beb0d(0xdd))[_0x4beb0d(0x2de)]({'status':'enabled'})[_0x4beb0d(0x1e0)]()||[];}function getDisabledBots(){const _0x1061ac=_0x25d974;return dbConfig[_0x1061ac(0x250)]('bots')[_0x1061ac(0x258)](_0x1061ac(0xdd))[_0x1061ac(0x2de)]({'status':_0x1061ac(0x29c)})[_0x1061ac(0x1e0)]()||[];}function getBotAttributes(_0x2c4a01){const _0x2f08ef=_0x25d974;let _0x33e29d={};const _0x3f2fce=configpath+_0x2f08ef(0x2eb)+_0x2c4a01+_0x2f08ef(0x236),_0x3e7670=fs[_0x2f08ef(0x138)](_0x3f2fce);if(_0x3e7670){const _0x15b019=fs[_0x2f08ef(0x23c)](_0x3f2fce);try{const _0x126e37=JSON[_0x2f08ef(0x245)](_0x15b019),_0x55f04d=_0x126e37?_0x126e37[_0x2f08ef(0x136)][0x0]['headless']:![];_0x33e29d[_0x2f08ef(0x2f3)]=_0x55f04d?_0x2f08ef(0x19d):_0x2f08ef(0x156),_0x33e29d['botname']=_0x126e37?_0x126e37[_0x2f08ef(0x136)][0x0]['botname']:'Bot\x20'+_0x2c4a01;}catch(_0x17bba5){_0x33e29d[_0x2f08ef(0x2f3)]=_0x2f08ef(0x156),_0x33e29d['botname']=_0x2f08ef(0x294)+_0x2c4a01;}}else _0x33e29d[_0x2f08ef(0x2f3)]='manual',_0x33e29d[_0x2f08ef(0x2cf)]=_0x2f08ef(0x294)+_0x2c4a01;return _0x33e29d;}function getBotsWithMode(){const _0x3d4d43=_0x25d974,_0x444acc=dbConfig[_0x3d4d43(0x250)]('bots')[_0x3d4d43(0x258)](_0x3d4d43(0xdd))[_0x3d4d43(0x1e0)]()||[];return _0x444acc[_0x3d4d43(0x2be)](_0x2d4bef=>{const _0x272d0=_0x3d4d43;let _0x4ec4bf=getBotAttributes(_0x2d4bef[_0x272d0(0xdd)]);_0x2d4bef[_0x272d0(0x2f3)]=_0x4ec4bf[_0x272d0(0x2f3)];}),_0x444acc;}function getBotExchanges(){const _0x129238=_0x25d974;let _0x5a91d7=[];const _0x37243c=dbConfig[_0x129238(0x250)](_0x129238(0xf6))[_0x129238(0x258)](_0x129238(0xdd))[_0x129238(0x1e0)]()||[];_0x37243c[_0x129238(0x2be)](_0x47b885=>{const _0x34b478=_0x129238;if(_0x47b885[_0x34b478(0x18d)]==_0x34b478(0x290)){const _0x2f4eb8=configpath+_0x34b478(0x2eb)+_0x47b885['botID']+'-config.json',_0x4eae3a=fs[_0x34b478(0x138)](_0x2f4eb8);let _0x376ee5;if(_0x4eae3a){const _0x7c0ca5=fs[_0x34b478(0x23c)](_0x2f4eb8);try{const _0x412dfb=JSON['parse'](_0x7c0ca5);_0x376ee5=_0x412dfb?_0x412dfb[_0x34b478(0x136)][0x0][_0x34b478(0x292)]:null;}catch(_0x52330a){}}if(_0x376ee5)_0x5a91d7[_0x34b478(0x223)](_0x376ee5);}});const _0x4c3475=[...new Set(_0x5a91d7)]['sort']();return _0x4c3475;}async function initUser(){const _0x482cfa=_0x25d974;if(!settings[_0x482cfa(0x15d)]){const _0x33517d=uuidRandom();mixpanel[_0x482cfa(0x107)](_0x33517d),updateSetting(_0x482cfa(0x15d),_0x33517d);}}async function initSecure(){const _0x384e9d=_0x25d974;let _0x52a52a=getSecure();if(!_0x52a52a['hasOwnProperty'](_0x384e9d(0x2ce))){let _0x432a6e=await generateKeys();_0x52a52a[_0x384e9d(0x252)]=_0x432a6e['publicKey'],_0x52a52a[_0x384e9d(0x284)]=_0x432a6e['privateKey'],_0x52a52a[_0x384e9d(0x2ce)]=crypto[_0x384e9d(0x10b)](0x20)['toString']('hex');;storeSecure(_0x52a52a);}}function getSettings(){const _0x5e7c99=_0x25d974;return dbSettings[_0x5e7c99(0x250)](_0x5e7c99(0x28d))['value']()||{};}function getSecure(){const _0x3206ee=_0x25d974;return dbSecure[_0x3206ee(0x250)](_0x3206ee(0x13c))[_0x3206ee(0x1e0)]()||{};}function getBlacklist(){const _0x5b8525=_0x25d974;return dbSecure[_0x5b8525(0x250)](_0x5b8525(0x15a))[_0x5b8525(0x1e0)]()||[];}function broadcastToBots(_0x52bb29,_0x2539ec){config['forEach'](_0x57314c=>{const _0x137ed2=_0x36cf;if(_0x57314c[_0x137ed2(0x18d)]==_0x137ed2(0x290)&&_0x57314c[_0x137ed2(0x222)]=='running'||_0x57314c[_0x137ed2(0x18d)]==_0x137ed2(0x2b9)&&_0x57314c[_0x137ed2(0x222)]==_0x137ed2(0x2b7)){if(pid[_0x57314c['botID']])pid[_0x57314c['botID']][_0x137ed2(0x1ba)]({[_0x52bb29]:_0x2539ec});}});}async function storeSettings(_0x287066,_0x2ec9ad=![]){const _0x1361bc=_0x25d974;_0x287066={...settings,..._0x287066};if(_0x2ec9ad&&_0x287066[_0x1361bc(0x2d3)]!=_0x1361bc(0x1b4)&&_0x287066[_0x1361bc(0x2d3)]!='***'&&_0x287066[_0x1361bc(0x2d3)]!=''){const _0x3c7e5c=decryptRSA(secure[_0x1361bc(0x284)],_0x287066['bbPassword'])[_0x1361bc(0x1b9)](_0x1361bc(0x239))[0x0],_0x2cdef3=bcrypt['hashSync'](_0x3c7e5c,saltRounds);_0x287066={..._0x287066,'bbPassword':_0x2cdef3};}if(_0x2ec9ad&&_0x287066[_0x1361bc(0x227)]!=_0x1361bc(0x1b4)&&_0x287066[_0x1361bc(0x227)]!=_0x1361bc(0x20a)&&_0x287066['telegramToken']!=''){const _0x1692ae=decryptRSA(secure[_0x1361bc(0x284)],_0x287066['telegramToken'])[_0x1361bc(0x1b9)]('|@|')[0x0];_0x287066={..._0x287066,'telegramToken':_0x1692ae};}if(_0x2ec9ad&&_0x287066[_0x1361bc(0x1dd)]!='************'&&_0x287066['marketcapApi']!=_0x1361bc(0x20a)&&_0x287066[_0x1361bc(0x1dd)]!=''){const _0x22e36c=decryptRSA(secure[_0x1361bc(0x284)],_0x287066['marketcapApi'])[_0x1361bc(0x1b9)](_0x1361bc(0x239))[0x0];_0x287066={..._0x287066,'marketcapApi':_0x22e36c};}const _0xb4bd2c=_0x287066[_0x1361bc(0x227)]!=_0x1361bc(0x1b4)&&_0x287066['telegramToken']!=settings[_0x1361bc(0x227)]||_0x287066[_0x1361bc(0x133)]!=settings[_0x1361bc(0x133)],_0x57bd26=_0x287066['telegramToken']==''||_0x287066['telegramUsername']=='',_0x44fd8c=_0x287066[_0x1361bc(0x1dd)]&&_0x287066[_0x1361bc(0x1dd)]!=_0x1361bc(0x1b4)&&_0x287066[_0x1361bc(0x1dd)]!=settings['marketcapApi'];_0xb4bd2c&&(_0x287066['telegramChatId']=null,_0x287066['telegramEvents']=_0x1361bc(0x2ec));for(const [_0x357456,_0x1440ce]of Object['entries'](_0x287066)){if(_0x357456==_0x1361bc(0x227)&&_0x1440ce==_0x1361bc(0x1b4)){_0x287066[_0x1361bc(0x227)]=settings[_0x1361bc(0x227)];continue;};if(_0x357456==_0x1361bc(0x2d3)&&_0x1440ce==_0x1361bc(0x1b4)){_0x287066[_0x1361bc(0x2d3)]=settings[_0x1361bc(0x2d3)];continue;};if(_0x357456==_0x1361bc(0x1dd)&&_0x1440ce==_0x1361bc(0x1b4)){_0x287066[_0x1361bc(0x1dd)]=settings[_0x1361bc(0x1dd)];continue;};dbSettings['set'](_0x1361bc(0x168)+_0x357456,_0x1440ce)[_0x1361bc(0x171)]();}settings=_0x287066,io['to'](_0x1361bc(0x235))[_0x1361bc(0x11d)](_0x1361bc(0x28d),cleanSettings()),broadcastToBots(_0x1361bc(0x2e4),settings[_0x1361bc(0x2e4)]),broadcastToBots(_0x1361bc(0x1bd),settings[_0x1361bc(0x1bd)]),broadcastToBots(_0x1361bc(0x1dd),settings['marketcapApi']);if(_0xb4bd2c&&!_0x57bd26)initTelegram();_0xb4bd2c&&_0x57bd26&&(updateSetting(_0x1361bc(0x202),null),disableTelegram()),getAllClients()[_0x1361bc(0x2be)](_0x4e94f5=>{const _0x5c2216=_0x1361bc;getSocket(_0x4e94f5['id'])[_0x5c2216(0x11d)](_0x5c2216(0x18d),{'access':{'allow':![],'reason':_0x5c2216(0x226),'token':null}});}),_0x44fd8c&&(await sleep(0xbb8),testMarketcapApi(_0x287066[_0x1361bc(0x1dd)]));}async function testMarketcapApi(_0x64a5b4){const _0x2252bb=_0x25d974,_0x35ba59=[_0x2252bb(0x2c6),_0x2252bb(0x203)];try{await axios[_0x2252bb(0x250)](_0x2252bb(0x20d),{'headers':{'X-CMC_PRO_API_KEY':_0x64a5b4},'params':{'symbol':_0x35ba59[_0x2252bb(0x268)]()}});}catch(_0xa72e6){_0xa72e6[_0x2252bb(0x268)]()['includes'](_0x2252bb(0x16f))?(io['to'](_0x2252bb(0x235))[_0x2252bb(0x11d)](_0x2252bb(0x113),'CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager'),logger['full']('CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager')):(io['to'](_0x2252bb(0x235))[_0x2252bb(0x11d)](_0x2252bb(0x113),_0x2252bb(0x182)),logger['full'](_0x2252bb(0x182)),logger[_0x2252bb(0x26f)](_0x2252bb(0x27a),_0xa72e6['toString']()+'\x20-\x20'+_0xa72e6['code']));return;}logger[_0x2252bb(0x26f)](_0x2252bb(0x1be));}function updateSetting(_0x53344d,_0x58fa71){const _0x101429=_0x25d974;dbSettings[_0x101429(0x232)](_0x101429(0x168)+_0x53344d,_0x58fa71)[_0x101429(0x171)](),settings=getSettings(),io['to'](_0x101429(0x235))[_0x101429(0x11d)](_0x101429(0x28d),cleanSettings());}function storeSecure(_0x231040){const _0x461563=_0x25d974;dbSecure[_0x461563(0x250)](_0x461563(0x13c))[_0x461563(0x223)](_0x231040)[_0x461563(0x171)](),secure=_0x231040;}function addBlacklist(_0x481c89){const _0x7053a8=_0x25d974;cleanBlacklist();let _0x45e00c;devices[_0x481c89][_0x7053a8(0x24d)]?_0x45e00c=Math[_0x7053a8(0x280)](devices[_0x481c89][_0x7053a8(0x24d)][_0x7053a8(0x108)],loginExpiry):_0x45e00c=loginExpiry,dbSecure[_0x7053a8(0x250)]('blacklist')[_0x7053a8(0x223)]({'expiry':new Date()[_0x7053a8(0x20f)]()+_0x45e00c*0x3c*0x3e8,'token':devices[_0x481c89][_0x7053a8(0x1a3)][_0x7053a8(0x2cb)]})['write'](),blacklist=dbSecure['get'](_0x7053a8(0x15a))[_0x7053a8(0x1e0)]();}function cleanBlacklist(){const _0x44cb51=_0x25d974;let _0x527cb4=dbSecure['get']('blacklist')[_0x44cb51(0x101)]()[_0x44cb51(0x1e0)](),_0x5eb6f9=new Date()['getTime']();_0x527cb4[_0x44cb51(0x2be)](_0x9269b9=>{const _0x5976e3=_0x44cb51;_0x9269b9[_0x5976e3(0x108)]<_0x5eb6f9&&dbSecure[_0x5976e3(0x250)](_0x5976e3(0x15a))[_0x5976e3(0x273)]({'expiry':_0x9269b9['expiry']})[_0x5976e3(0x171)]();});}function initStates(){const _0x23691a=_0x25d974;let _0x9aec3=getConfiguration();_0x9aec3[_0x23691a(0x2be)](_0x40a23f=>{const _0x3c3029=_0x23691a;_0x40a23f[_0x3c3029(0x222)]=_0x3c3029(0x213);}),storeConfiguration(_0x9aec3);}async function generateKeys(){const _0x20f4c7=_0x25d974,_0x409fc1=forge[_0x20f4c7(0x221)][_0x20f4c7(0x1cc)][_0x20f4c7(0x148)]({'bits':0x1000,'e':0x10001}),_0x12dd40=forge[_0x20f4c7(0x221)][_0x20f4c7(0xef)](_0x409fc1[_0x20f4c7(0x284)]),_0x36b0f4=forge[_0x20f4c7(0x221)][_0x20f4c7(0x29f)](_0x409fc1[_0x20f4c7(0x252)]);return{'privateKey':_0x12dd40,'publicKey':_0x36b0f4};}async function oneTimeMigration(){const _0x3ce90a=_0x25d974;let _0x27f80e=getSettings(),_0x2bcaa1=![];!_0x27f80e['hasOwnProperty'](_0x3ce90a(0x1d1))&&(_0x27f80e['lastmsgtelegram']=0x0,_0x2bcaa1=!![]);!_0x27f80e[_0x3ce90a(0x152)](_0x3ce90a(0x164))&&(_0x27f80e[_0x3ce90a(0x164)]=0x0,_0x2bcaa1=!![]);!_0x27f80e[_0x3ce90a(0x152)](_0x3ce90a(0x1c0))&&(_0x27f80e['latestversion']='0.0.0',_0x2bcaa1=!![]);!_0x27f80e[_0x3ce90a(0x152)]('onepagemode')&&(_0x27f80e[_0x3ce90a(0x1bd)]=![],_0x2bcaa1=!![]);!_0x27f80e[_0x3ce90a(0x152)](_0x3ce90a(0x1dd))&&(_0x27f80e[_0x3ce90a(0x1dd)]='',_0x2bcaa1=!![]);if(_0x2bcaa1)storeSettings(_0x27f80e);try{fs['readdirSync'](configbackuppath,{'withFileTypes':!![]})[_0x3ce90a(0x2be)](_0x28a9a8=>{const _0x15996c=_0x3ce90a;if(!_0x28a9a8['isDirectory']()){if(!_0x28a9a8[_0x15996c(0x206)][_0x15996c(0xf8)]('backup-full@'))fs[_0x15996c(0x150)](configbackuppath+_0x28a9a8[_0x15996c(0x206)]);}else fs[_0x15996c(0x1f4)](configbackuppath+_0x28a9a8[_0x15996c(0x206)],{'recursive':!![]});});}catch(_0x4611c2){logger[_0x3ce90a(0x26f)](_0x3ce90a(0x154),_0x4611c2);}}function storeConfiguration(_0x4138d1){const _0x1aa623=_0x25d974;dbConfig[_0x1aa623(0x250)]('bots')[_0x1aa623(0x273)]()[_0x1aa623(0x171)](),dbConfig['get']('bots')[_0x1aa623(0x223)](..._0x4138d1)['write'](),config=_0x4138d1;}async function resetPassword(){const _0x5b7afb=_0x25d974;if(tgBot&&settings[_0x5b7afb(0x202)]){const _0x16a2dd=Markup[_0x5b7afb(0x1e8)]([Markup['button'][_0x5b7afb(0x17c)]('yes',_0x5b7afb(0x210)),Markup[_0x5b7afb(0x18b)][_0x5b7afb(0x17c)]('no',_0x5b7afb(0x1ef))]);await sendTelegram(settings[_0x5b7afb(0x202)],_0x5b7afb(0x151),_0x16a2dd),tgBot['action'](/resetpw_(.+)/,async _0x449fbc=>{const _0x4d3c69=_0x5b7afb,_0x3592f9=_0x449fbc[_0x4d3c69(0x10d)][0x1];_0x449fbc[_0x4d3c69(0x1bb)]();if(_0x3592f9!='no'){const _0x465757=0xf,_0x2175da='0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$',_0x225098=Array[_0x4d3c69(0x231)](crypto[_0x4d3c69(0x2b6)](new Uint32Array(_0x465757)))[_0x4d3c69(0x1aa)](_0x535c68=>_0x2175da[_0x535c68%_0x2175da['length']])[_0x4d3c69(0x1c4)](''),_0x2ed8f4=bcrypt[_0x4d3c69(0x2c9)](_0x225098,saltRounds);storeSettings({'bbPassword':_0x2ed8f4}),await sendTelegram(_0x449fbc[_0x4d3c69(0xe9)]['id'],_0x4d3c69(0x186)+_0x225098,{'parse_mode':_0x4d3c69(0x1d9)});}else await sendTelegram(_0x449fbc['chat']['id'],_0x4d3c69(0x2c2));});}}async function confirmRestore(_0x23db95,_0x296383){const _0x3b6b73=_0x25d974;io['to']('botmanager')[_0x3b6b73(0x11d)](_0x3b6b73(0x113),_0x3b6b73(0x12c),_0x3b6b73(0x17b));if(tgBot&&settings[_0x3b6b73(0x202)]){const _0x4e20e7=uuidRandom();tmpStorage[_0x4e20e7]={'path':_0x23db95,'filename':_0x296383};const _0x4fba7d=Markup[_0x3b6b73(0x1e8)]([Markup['button'][_0x3b6b73(0x17c)](_0x3b6b73(0x119),_0x3b6b73(0x264)+_0x4e20e7),Markup[_0x3b6b73(0x18b)][_0x3b6b73(0x17c)]('no',_0x3b6b73(0x1cd)+_0x4e20e7)]);await sendTelegram(settings[_0x3b6b73(0x202)],_0x3b6b73(0xf5),_0x4fba7d),tgBot[_0x3b6b73(0x216)](/restore_(.+)_(.+)/,async _0x5d04be=>{const _0x86cdc8=_0x3b6b73,_0x86c0c8=_0x5d04be['match'][0x1],_0x287a8e=_0x5d04be[_0x86cdc8(0x10d)][0x2],{path:_0x501368,filename:_0x4c2187}=tmpStorage[_0x287a8e];delete tmpStorage[_0x287a8e],_0x5d04be['editMessageReplyMarkup'](),_0x86c0c8==_0x86cdc8(0x119)?(logger[_0x86cdc8(0x26f)](_0x86cdc8(0x2f1)),await sendTelegram(_0x5d04be[_0x86cdc8(0xe9)]['id'],_0x86cdc8(0x17f),{'parse_mode':_0x86cdc8(0x1d9)}),unzipFile(_0x501368,_0x4c2187)):(logger[_0x86cdc8(0x26f)](_0x86cdc8(0x279)),await sendTelegram(_0x5d04be[_0x86cdc8(0xe9)]['id'],_0x86cdc8(0x279)));});}}function getServerTime(){const _0xd6d72b=_0x25d974,_0x479c7f=new Date();return _0x479c7f[_0xd6d72b(0x22d)]()+'/'+(_0x479c7f[_0xd6d72b(0x11c)]()+0x1)[_0xd6d72b(0x268)]()[_0xd6d72b(0x160)](0x2,'0')+'/'+_0x479c7f[_0xd6d72b(0x2c7)]()[_0xd6d72b(0x268)]()[_0xd6d72b(0x160)](0x2,'0')+'\x20'+_0x479c7f[_0xd6d72b(0x218)]()[_0xd6d72b(0x268)]()[_0xd6d72b(0x160)](0x2,'0')+':'+_0x479c7f[_0xd6d72b(0x265)]()[_0xd6d72b(0x268)]()['padStart'](0x2,'0')+':'+_0x479c7f[_0xd6d72b(0x1ec)]()[_0xd6d72b(0x268)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x2d8637=_0x25d974,_0x115f08=shiftedTime();return _0x115f08[_0x2d8637(0x22d)]()+'/'+(_0x115f08[_0x2d8637(0x11c)]()+0x1)[_0x2d8637(0x268)]()['padStart'](0x2,'0')+'/'+_0x115f08[_0x2d8637(0x2c7)]()[_0x2d8637(0x268)]()[_0x2d8637(0x160)](0x2,'0')+'\x20'+_0x115f08[_0x2d8637(0x218)]()[_0x2d8637(0x268)]()[_0x2d8637(0x160)](0x2,'0')+':'+_0x115f08[_0x2d8637(0x265)]()['toString']()[_0x2d8637(0x160)](0x2,'0')+':'+_0x115f08['getSeconds']()['toString']()['padStart'](0x2,'0');}function getCleanTimeStamp(){const _0x806cf6=_0x25d974,_0x52c427=shiftedTime();return _0x52c427['getFullYear']()+(_0x52c427[_0x806cf6(0x11c)]()+0x1)[_0x806cf6(0x268)]()[_0x806cf6(0x160)](0x2,'0')+_0x52c427[_0x806cf6(0x2c7)]()[_0x806cf6(0x268)]()[_0x806cf6(0x160)](0x2,'0')+'-'+_0x52c427[_0x806cf6(0x218)]()[_0x806cf6(0x268)]()[_0x806cf6(0x160)](0x2,'0')+_0x52c427['getMinutes']()[_0x806cf6(0x268)]()[_0x806cf6(0x160)](0x2,'0')+_0x52c427[_0x806cf6(0x1ec)]()['toString']()[_0x806cf6(0x160)](0x2,'0');}function shiftedTime(){const _0x37f0b2=_0x25d974,_0x399f9a=new Date();let _0x9154cd=_0x399f9a;if(settings['timeshift']&&settings[_0x37f0b2(0x2e4)]!==0x0)_0x9154cd=fns['add'](_0x399f9a,{'hours':settings[_0x37f0b2(0x2e4)]});return _0x9154cd;}async function startScheduler(){const _0x3ac4ce=_0x25d974,_0x6d7095=new Date()[_0x3ac4ce(0x1e5)](),_0x224d25=shiftedTime()[_0x3ac4ce(0x218)]();_0x224d25==0x4&&backupConfigFiles(),_0x224d25==0x0&&(rotateLogFiles(),logger['debug'](_0x3ac4ce(0x24a)),logger[_0x3ac4ce(0x26f)](_0x3ac4ce(0x27e)+serverversion+_0x3ac4ce(0x271)+(environment==_0x3ac4ce(0x195)?_0x3ac4ce(0x27d):'')),logger[_0x3ac4ce(0x26f)](_0x3ac4ce(0x24a))),_0x6d7095%0x6==0x0&&triggerAnalytics(),_0x6d7095%0x6==0x0&&getMessages(),await sleep(schedulerInterval),startScheduler();}async function restoreBackupFile(_0xcba257){const _0x37a219=_0x25d974;logger[_0x37a219(0x26f)](_0x37a219(0x1fd)+_0xcba257);const _0x5e7218=getBotsWithMode();_0x5e7218['length']>0x0?confirmRestore(configbackuppath,_0xcba257):unzipFile(configbackuppath,_0xcba257);}async function getBackupFiles(_0x507fe8=null){const _0x5990ca=_0x25d974;let _0x38d33e=[],_0x40545e=fs['readdirSync'](configbackuppath,{'withFileTypes':!![]});_0x40545e['sort']((_0x4ce594,_0x210d07)=>_0x4ce594[_0x5990ca(0x206)]<_0x210d07['name']?0x1:_0x210d07[_0x5990ca(0x206)]<_0x4ce594['name']?-0x1:0x0),_0x40545e[_0x5990ca(0x2be)](_0xd8003a=>{const _0x5ca349=_0x5990ca;if(!_0xd8003a[_0x5ca349(0x2da)]()&&_0xd8003a[_0x5ca349(0x206)]['startsWith']('backup-full@')&&_0xd8003a['name'][_0x5ca349(0xf4)](_0x5ca349(0x185))){const _0x3850d1=formatDate(fs[_0x5ca349(0xdc)](configbackuppath+_0xd8003a[_0x5ca349(0x206)])['mtime']);_0x38d33e[_0x5ca349(0x223)]({'name':_0xd8003a[_0x5ca349(0x206)],'mtime':_0x3850d1});}});if(_0x507fe8)io['to'](_0x507fe8)[_0x5990ca(0x11d)](_0x5990ca(0x18f),_0x38d33e);else return _0x38d33e;}async function backupConfigFiles(){const _0x178450=_0x25d974;await zipFiles(_0x178450(0x18c));const _0x19c407=getCleanTimeStamp();fs[_0x178450(0x1bf)](zippath+_0x178450(0x286),configbackuppath+(_0x178450(0x2d8)+_0x19c407+_0x178450(0x185)));let _0x382f03=fs[_0x178450(0x2bd)](configbackuppath,{'withFileTypes':!![]});_0x382f03[_0x178450(0x158)]((_0x1d9b55,_0x179d54)=>_0x1d9b55[_0x178450(0x206)]<_0x179d54[_0x178450(0x206)]?0x1:_0x179d54[_0x178450(0x206)]<_0x1d9b55[_0x178450(0x206)]?-0x1:0x0),_0x382f03[_0x178450(0x1b2)]>maxBackups&&fs['unlinkSync'](configbackuppath+_0x382f03[_0x382f03[_0x178450(0x1b2)]-0x1]['name']);}function rotateLogFiles(){const _0x26625=_0x25d974,_0x454c12=fs[_0x26625(0xdc)](logspath+_0x26625(0x21d)),_0x1a32fa=_0x454c12[_0x26625(0x22e)]/0x400;if(_0x1a32fa>0x64){let _0x5035f6=fs[_0x26625(0x2bd)](logspath,{'withFileTypes':!![]});_0x5035f6[_0x26625(0x158)]((_0x24ae8e,_0x28dc66)=>_0x24ae8e[_0x26625(0x206)]<_0x28dc66[_0x26625(0x206)]?0x1:_0x28dc66['name']<_0x24ae8e['name']?-0x1:0x0),_0x5035f6['forEach'](_0x46b925=>{const _0x398624=_0x26625;if(_0x46b925[_0x398624(0x206)]==_0x398624(0x103))fs[_0x398624(0x1bf)](logspath+_0x46b925[_0x398624(0x206)],logspath+_0x398624(0x263));if(_0x46b925[_0x398624(0x206)]==_0x398624(0x2ac))fs[_0x398624(0x1bf)](logspath+_0x46b925['name'],logspath+_0x398624(0x103));_0x46b925[_0x398624(0x206)]==_0x398624(0x21d)&&(fs[_0x398624(0x1bf)](logspath+_0x46b925[_0x398624(0x206)],logspath+_0x398624(0x2ac)),fs[_0x398624(0x1f5)](logspath+_0x46b925[_0x398624(0x206)],''));});}}async function zipFiles(_0x5d6c72){const _0x13fff9=_0x25d974;let _0x25be0c;if(_0x5d6c72==_0x13fff9(0x157))_0x25be0c=logspath;if(_0x5d6c72=='backup')_0x25be0c=configpath;if(_0x5d6c72==_0x13fff9(0x18c))_0x25be0c=configpath;let _0x1a8090=fs[_0x13fff9(0x2bd)](_0x25be0c,{'withFileTypes':!![]});const _0x1b3e97=new JSZip();_0x1a8090['forEach'](_0x7f72be=>{const _0x20ccb1=_0x13fff9;if(!_0x7f72be[_0x20ccb1(0x2da)]()){let _0x7298b3=fs[_0x20ccb1(0x23c)](_0x25be0c+_0x7f72be[_0x20ccb1(0x206)]);if(_0x5d6c72==_0x20ccb1(0x14c)){const _0x187caa=/^bot-[0-9]{3}-config.json$/,_0x532c69=_0x187caa['test'](_0x7f72be['name']);if(_0x532c69){const _0x4857db=JSON[_0x20ccb1(0x245)](_0x7298b3);if(_0x4857db['bot'][0x0]){_0x4857db[_0x20ccb1(0x136)][0x0][_0x20ccb1(0x21b)]=_0x20ccb1(0x20a),_0x4857db[_0x20ccb1(0x136)][0x0][_0x20ccb1(0x181)]=_0x20ccb1(0x20a);if(_0x4857db[_0x20ccb1(0x136)][0x0]['apiPassword'])_0x4857db[_0x20ccb1(0x136)][0x0]['apiPassword']=_0x20ccb1(0x20a);}_0x7298b3=JSON['stringify'](_0x4857db,null,0x2);}if(_0x7f72be[_0x20ccb1(0x206)]=='bb-settings.json'){const _0x4528f5=JSON[_0x20ccb1(0x245)](_0x7298b3);if(_0x4528f5['settings']['loginRequired'])_0x4528f5[_0x20ccb1(0x28d)][_0x20ccb1(0x167)]=![];if(_0x4528f5['settings']['bbPassword'])_0x4528f5[_0x20ccb1(0x28d)][_0x20ccb1(0x2d3)]='***';if(_0x4528f5[_0x20ccb1(0x28d)][_0x20ccb1(0x227)])_0x4528f5[_0x20ccb1(0x28d)][_0x20ccb1(0x227)]=_0x20ccb1(0x20a);if(_0x4528f5[_0x20ccb1(0x28d)][_0x20ccb1(0x202)])_0x4528f5['settings'][_0x20ccb1(0x202)]=null;if(_0x4528f5[_0x20ccb1(0x28d)]['marketcapApi'])_0x4528f5[_0x20ccb1(0x28d)][_0x20ccb1(0x1dd)]=_0x20ccb1(0x20a);_0x7298b3=JSON[_0x20ccb1(0x1de)](_0x4528f5,null,0x2);}if(_0x7f72be[_0x20ccb1(0x206)]!=_0x20ccb1(0x14e))_0x1b3e97['file'](_0x7f72be['name'],_0x7298b3);}else _0x1b3e97['file'](_0x7f72be[_0x20ccb1(0x206)],_0x7298b3);}});const _0x540163=await _0x1b3e97[_0x13fff9(0x2a6)]({'type':_0x13fff9(0x1fc),'base64':![],'compression':_0x13fff9(0x191)});fs[_0x13fff9(0x1f5)](zippath+(_0x5d6c72+_0x13fff9(0x185)),_0x540163,'binary');}async function unzipFile(_0x336f16,_0x2861a6){const _0x159569=_0x25d974;fs[_0x159569(0x2bd)](configpath,{'withFileTypes':!![]})['forEach'](_0x384812=>{const _0x3e89ae=_0x159569;if(!_0x384812['isDirectory']())fs[_0x3e89ae(0x1f4)](configpath+_0x384812[_0x3e89ae(0x206)]);});const _0x1bf72a=fs[_0x159569(0x23c)](_0x336f16+_0x2861a6,_0x159569(0x16d)),_0x169784=await JSZip[_0x159569(0x115)](_0x1bf72a,{'base64':![],'checkCRC32':!![]});for(const _0x1ea268 of Object['keys'](_0x169784['files'])){const _0x56d4f1=_0x169784[_0x159569(0x299)][_0x1ea268],_0x39227d=await _0x56d4f1[_0x159569(0x234)]('string');fs[_0x159569(0x1f5)](configpath+_0x56d4f1[_0x159569(0x206)],_0x39227d);}fs['readdirSync'](temppath,{'withFileTypes':!![]})[_0x159569(0x2be)](_0x34150f=>{const _0x16aafd=_0x159569;if(!_0x34150f[_0x16aafd(0x2da)]())fs[_0x16aafd(0x1f4)](temppath+_0x34150f[_0x16aafd(0x206)]);}),logger[_0x159569(0x26f)](_0x159569(0x255)),process[_0x159569(0x1ba)]({'restore':!![]},_0x4f342c=>{});}async function getPublicIp(){const _0x5bc286=_0x25d974;try{const _0x2e0620=await axios[_0x5bc286(0x250)](_0x5bc286(0x17e));publicip=_0x2e0620['data']['ip'];}catch(_0x600397){}}async function triggerAnalytics(){const _0x58b9fb=_0x25d974;if(!publicip)await getPublicIp();const _0x50f9a6=getBotsWithMode();let _0x8cd18c=0x0;_0x50f9a6[_0x58b9fb(0x2be)](_0x16d177=>{const _0x4b0062=_0x58b9fb;if(_0x16d177[_0x4b0062(0x18d)]===_0x4b0062(0x290))_0x8cd18c++;});const _0x4b727b=getBotExchanges();mixpanel['track'](_0x58b9fb(0x147),{'distinct_id':settings[_0x58b9fb(0x15d)],'ip':publicip,'version':serverversion,'numbots':_0x50f9a6[_0x58b9fb(0x1b2)],'numbotsenabled':_0x8cd18c,'exchanges':_0x4b727b,'environment':environment});}async function getMessages(){const _0x54d43f=_0x25d974,_0x159c4f=_0x54d43f(0x19f),_0x16e978=new GraphQLClient(_0x159c4f),_0x3c7192={'authorization':_0x54d43f(0xe7)},_0x5521c2=serverversion['split']('.'),_0x3f29de=_0x5521c2[0x0]+'.'+_0x5521c2[0x1],_0x25fa20=Math['min'](settings['lastmsgtelegram'],settings[_0x54d43f(0x164)]),_0x164512={'last':parseInt(_0x25fa20),'bbm':_0x3f29de},_0x10504f=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x269087;try{_0x269087=await _0x16e978[_0x54d43f(0x111)](_0x10504f,_0x164512,_0x3c7192);}catch(_0x7d4033){}if(_0x269087&&_0x269087[_0x54d43f(0x162)]){let _0x54da6a=settings[_0x54d43f(0x1d1)],_0x1551fe=settings[_0x54d43f(0x1d1)];newMessages=[];for(const _0x2e2357 of _0x269087[_0x54d43f(0x162)]){newMessages[_0x54d43f(0x223)](_0x2e2357);let _0xed2fa=![];_0x2e2357['bbvNew']&&(updateSetting('latestversion',_0x2e2357[_0x54d43f(0x26e)]),_0xed2fa=isNewerVersion(serverversion,_0x2e2357[_0x54d43f(0x26e)])||serverversion==_0x2e2357[_0x54d43f(0x26e)]);if(!_0xed2fa&&_0x2e2357[_0x54d43f(0xe3)]>_0x54da6a){if(_0x2e2357['bbvReceive']===_0x54d43f(0xda)||serverversion[_0x54d43f(0xf8)](_0x2e2357[_0x54d43f(0x193)])){let _0x449945=''+_0x2e2357[_0x54d43f(0x2a3)]+'\x0a\x0a'+_0x2e2357['message'];const _0x5ca3cc=await sendTelegramMsg(toTelegramMarkdown(_0x449945),_0x54d43f(0x248));_0x54da6a=_0x2e2357[_0x54d43f(0xe3)];}}_0x1551fe=_0x2e2357[_0x54d43f(0xe3)];}updateAvailable=isNewerVersion(settings[_0x54d43f(0x1c0)],serverversion),updateSetting(_0x54d43f(0x1d1),_0x1551fe),emitMessages();}}function emitMessages(){const _0x4d49f7=_0x25d974,_0xbb55f4=settings['lastmsgemitted'];let _0x21ba8f=[];newMessages[_0x4d49f7(0x2be)](_0x5ed5d4=>{const _0x17a581=_0x4d49f7;_0x5ed5d4[_0x17a581(0xe3)]>_0xbb55f4&&_0x21ba8f['push'](_0x5ed5d4);}),_0x21ba8f[_0x4d49f7(0x1b2)]>0x0&&getAllClients()[_0x4d49f7(0x2be)](_0x296652=>{const _0x3499ce=_0x4d49f7;getSocket(_0x296652['id'])[_0x3499ce(0x11d)]('message',_0x21ba8f);});}function _0x478d(){const _0x2a8a02=['name','versions','\x20minutes','reinstall-bb','***','2122087brsjop','accept','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','getTime','resetpw_yes','search','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','stopped','server','environment','action','backup/','getHours','address','sha256','apiKey','argv','output-000.log','bb-settings.json','store-settings','http','pki','live','push','emitHistory','child_process','reload','telegramToken','reinstall_no','ipc','allow','Orders','Unauthorized\x20attempt\x20to\x20confirm\x20message','getFullYear','size','All\x20bots',')\x20\x20\x20|\x20Bot\x20','from','set','inherit','async','botmanager','-config.json','pidExpireLogin','build2','|@|','error','4460517mXLZWI','readFileSync','toggle','7wfXzjU','names','6904280OmWVNn','Notifications\x20disabled\x0a','login\x20not\x20required','*$1*','catch','parse','connected','type','Markdown','=>\x20Go\x20to\x20#CYA#http://127.0.0.1:','--------------------------------------','-performance.json','store-fiat','telegramIpApproval','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','_nsps','get','mixpanel','publicKey','/enable\x20-\x20enable\x20notifications\x0a','constructor','Backup\x20file\x20unzipped\x20and\x20stored','config_all','telegram','sortBy','bcryptjs','stop','127.0.0.1','includes','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','Error\x20while\x20deleting\x20config\x20files:\x20','Setting\x20access:\x20','/update\x20-\x20update\x20Balance\x20Bot\x0a','Starting\x20Balance\x20Bot\x20reinstallation','2779614woFljZ','output-003.log','restore_yes_','getMinutes','internal','init','toString','invalid\x20credentials','auth','Telegraf\x20error:','showname','sendMetricsTelegram','bbvNew','debug',')\x20|\x20Bot\x20','#RES#\x20','logs/','remove','jszip','uuid','storeConfiguration','2FA\x20required','jsonwebtoken','Restore\x20process\x20aborted','Error\x20details:','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','Starting\x20#RED#Balance\x20Bot\x20v','(staging)','Running\x20#RED#Balance\x20Bot\x20v','toggle_','max','whitelistEnabled','handshake','You\x20can\x20use\x20the\x20following\x20commands:\x0a','privateKey','update','backup-full.zip','\x20only\x0a','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','reset-history','Unauthorized\x20attempt\x20to\x20log\x20out','place-order','exec','settings','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','Unauthorized\x20attempt\x20to\x20show\x20configuration','enabled','Error:\x20Invalid\x20argument\x20','exchange','tempaccess_15_','Bot\x20','Unauthorized\x20attempt\x20to\x20update\x20bot','#RES#\x20if\x20running\x20on\x20server','compareSync','store-configuration','files','No\x20bots\x20running\x20right\x20now','1IpAwax','disabled','conn','confirm-message','publicKeyToPem','get-logs','login2fa_reject_','Error\x20sending\x20','title','create',':\x20Bot\x20Mgr\x20>\x20Telegram\x20error\x20occured','generateAsync','storeHeadless','Invalid\x20authentication\x20token\x20(2)','2FA\x20login\x20token\x20generated','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','once','output-001.log','post','telegramEnabled','clientip','static','telegraf','SIGINT','Logged\x20out\x20user\x20...','login\x20token\x20valid','Ok,\x20will\x20send\x20alert\x20notifications\x20only','randomFillSync','running','/download/:type','new','/:bot/portfolio','\x20|\x20user:\x20...','Unauthorized\x20attempt\x20to\x20store\x20configuration','readdirSync','forEach','/:bot/configuration','All\x20bots\x20running\x20right\x20now','remoteAddress','Password\x20reset\x20rejected','exit','reject','sockets','BCT','getDate','\x1b[34m','hashSync','Starting\x20new\x20bot\x20|\x20Bot\x20','token','/restart\x20-\x20restart\x20bot(s)\x0a','logout','secret','botname','cancel-loading','getPortfolio','/:bot/history','bbPassword','get-starting-balances','Deleted\x20Bot\x20','\x1b[33m','Temporary\x20access\x20rejected','backup-full@','restore-backup-file','isDirectory','/logs\x20-\x20receive\x20log\x20files\x0a','telegram2FaApproval','login','filter','Logged\x20in\x20user\x20...','bb-config.json','whitelist','950jCCEjO','uuid-random','timeshift','get-messages','::ffff:127.0.0.1','exp','update_yes','encryptedUuid','config/','bot-','all','family','sendFile','version.json','axios','Restore\x20process\x20confirmed','portfolio_','mode','text','download','/names\x20-\x20show\x20bot\x20names\x0a','any',':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20','statSync','botID','resetHistory','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration',',\x20must\x20be\x20a\x204\x20digit\x20number','user','decrypt','number','login\x20token\x20generated','\x20mode','referer','Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U','index.html','chat','Starting\x20Balance\x20Bot\x20update','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','No\x20authentication\x20token','\x20>\x20','reply','privateKeyToPem','Session\x20expired\x20for\x20user\x20...','NTBA_FIX_319','disconnect','=>\x20Go\x20to\x20#CYA#http://','endsWith','Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)','bots','ipv6','startsWith','IPv4','temporaryAccessAllowed','Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files','params','showConfig','Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot','find','timestamp','cloneDeep','Notifications\x20enabled','output-002.log','password','temporary\x20token\x20generated','/upload-backup','alias','expiry','off_','Token\x20blacklisted','randomBytes','disable','match','config_orders','config_alerts','toIPv4Address','request','bbUsername','notification','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','loadAsync','util','Unauthorized\x20attempt\x20to\x20download\x20','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?','yes','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','zip/','getMonth','emit','build','kill','Unauthorized\x20attempt\x20to\x20get\x20messages','All','tkn','full','off','#RES#\x20if\x20running\x20locally\x0a','use','storeFiat','-results.json','lowdb','/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a','\x20|\x20','Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot','get-backup-files','graphql-request','fork','Ok,\x20will\x20send\x20order\x20notifications\x20only','telegramEvents','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20','telegramUsername','tempaccess_5_','update-bb','bot','\x20files\x20over\x20Telegram:','existsSync','warning','6255255DWkGxW','<b>Balance\x20Bot\x20Status:</b>\x0a','secure','initclient','uncaughtException','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','decode64','/on\x20-\x20start\x20bot(s)\x0a','updatebotmanager','Notifications\x20types:\x20','RSA-OAEP','toggleBotMode','Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history','Server','generateKeyPair','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)','Enabled\x20Bot\x20','sign','backup','Invalid\x20IP\x20address','bb-secure.json','0.0.0','unlinkSync','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','hasOwnProperty','Bot\x20Mgr\x20>\x20','Error\x20removing\x20old\x20backup\x20files:','/output-000.log','manual','logs','sort','\x20|\x20client:\x20...','blacklist','Notifications\x20disabled','update_no','userid','/disable\x20-\x20disable\x20notifications\x0a','connection','padStart','env','messages','telegrammsg','lastmsgemitted','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)','[ip-address]','loginRequired','settings.','message','lowdb/adapters/FileSync','Disabled\x20Bot\x20','Login\x20rejected','binary','getStartingBalances','status\x20code\x20401','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','write','event','login\x20required','socket.io','api-eu.mixpanel.com','Network\x20Interfaces:','User\x20has\x20been\x20validated','delete-bot','alerts','createServer','success','callback','Allow\x20login\x20from\x20IP\x20address\x20','https://api.ipify.org?format=json','Restoring\x20bot(s)\x20from\x20backup','mkdirSync','apiSecret','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20see\x20logs\x20for\x20details','restart','host','.zip','Password\x20has\x20been\x20reset\x20to:\x20','5\x20min','node-forge','on_','\x20(1)','button','backup-full','status','restart_','backup-files','defaults','DEFLATE','privateKeyFromPem','bbvReceive','Unauthorized\x20login\x20attempt\x20(timeout)','staging','logged\x20out','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','6b67f3d61ee94b8f5c80b4affef4c4d9','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','format','headless','#RES#','auto','login2fa_','https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master','2700678AagSkK','-----------------------------------------------------------------------------------','Invalid\x20username\x20or\x20IP\x20address','access','/help\x20-\x20show\x20available\x20commands\x0a','30\x20min','Notifications\x20enabled\x0a','Unauthorized\x20attempt\x20to\x20update\x20settings','show-config','placeOrder','map','listen','store','node','/:bot/performance','socket','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','function','length','/:bot/coins','************','backupfile','pidRefreshToken','delete-alerts','Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration','split','send','editMessageReplyMarkup','simple','onepagemode','CoinMarketCap\x20API\x20key\x20validated','copyFileSync','latestversion','Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation','join','Login\x20accepted','verify','command','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run','assign','Starting\x20(','Backup\x20file\x20uploaded','rsa','restore_no_','get-portfolio','temp/','SIGTERM','lastmsgtelegram','2FA\x20login\x20required','Restarting\x20Bot\x20','temporary\x20access\x20not\x20allowed','-events.json','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','4TFXjrv','production','HTML','test','show','reinstall_yes','marketcapApi','stringify','slice','value','3000','Unauthorized\x20attempt\x20to\x20get\x20events','new-disabled','/metrics\x20-\x20show\x20bot\x20performance\x0a','getUTCHours','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','username','inlineKeyboard','enable','sendPortfolioTelegram','temporary\x20access\x20timeout','getSeconds','log','f2aRequired','resetpw_no','File\x20uploaded','reason','port','1000','rmSync','writeFileSync','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','replace','path','orders','headers','keys','string','Restore\x20backup\x20file\x20','apply','replyWithDocument','config','Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file','telegramChatId','ETH','removeAllListeners','80478QaOjEo'];_0x478d=function(){return _0x2a8a02;};return _0x478d();}function confirmMessage(_0x189bbc){updateSetting('lastmsgemitted',Number(_0x189bbc));}function isNewerVersion(_0x3250ff,_0x419098){const _0x804ff7=_0x25d974,_0x13fbc9=_0x419098[_0x804ff7(0x1b9)]('.'),_0x496778=_0x3250ff[_0x804ff7(0x1b9)]('.');for(var _0x497a57=0x0;_0x497a57<_0x496778[_0x804ff7(0x1b2)];_0x497a57++){const _0x3706bf=~~_0x496778[_0x497a57],_0x2f9847=~~_0x13fbc9[_0x497a57];if(_0x3706bf>_0x2f9847)return!![];if(_0x3706bf<_0x2f9847)return![];}return![];}function toTelegramMarkdown(_0x5f4fd7){const _0x5ef072=_0x25d974,_0x29bb8e=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0xe96e3f=/\*{2}(.+?)\*{2}/gim;return _0x5f4fd7=_0x5f4fd7['replace'](_0x29bb8e,'$1_$2_$3')['replace'](_0xe96e3f,_0x5ef072(0x243)),_0x5f4fd7;}async function validateConfigFile(){const _0x2899fa=_0x25d974,_0x382a1f=dbConfig[_0x2899fa(0x250)](_0x2899fa(0xf6))[_0x2899fa(0x258)](_0x2899fa(0xdd))[_0x2899fa(0x1e0)]()||[];if(_0x382a1f[_0x2899fa(0x1b2)]==0x0){let _0x5e37cf=0x0,_0x20872a=[];const _0x3350f9=/^bot-([0-9]{3})-config.json$/,_0x38bcbe=fs[_0x2899fa(0x2bd)](configpath);_0x38bcbe[_0x2899fa(0x2be)](_0x509208=>{const _0x15a80d=_0x2899fa,_0xdb514d=_0x3350f9[_0x15a80d(0x28c)](_0x509208);if(_0xdb514d){const _0x2e99dd=_0xdb514d[0x1];let _0x3c0a50=getBotAttributes(_0x2e99dd);_0x20872a[_0x15a80d(0x223)]({'botID':_0x2e99dd,'botname':_0x3c0a50[_0x15a80d(0x2cf)],'status':_0x15a80d(0x29c),'live':'stopped'}),_0x5e37cf++;}}),_0x5e37cf!=0x0&&(dbConfig[_0x2899fa(0x250)](_0x2899fa(0xf6))[_0x2899fa(0x1c9)](_0x20872a)[_0x2899fa(0x171)](),config=_0x20872a,restoredConfigFile=_0x5e37cf);}}async function restoreConfigNotify(_0x54e580){const _0x3035bf=_0x25d974;let _0x18f332;if(restoredConfigFile==0x1)_0x18f332=_0x3035bf(0x1c8);else _0x18f332='NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run';if(_0x54e580)io['to'](_0x3035bf(0x235))[_0x3035bf(0x11d)]('notification',_0x18f332);else{logger[_0x3035bf(0x1bc)](_0x3035bf(0x1a1)),logger[_0x3035bf(0x1bc)](_0x18f332),logger[_0x3035bf(0x1bc)](_0x3035bf(0x1a1)),logger[_0x3035bf(0x1bc)]('');if(tgBot&&settings[_0x3035bf(0x202)]&&settings[_0x3035bf(0x131)]!=_0x3035bf(0x1f9))await sendTelegram(settings[_0x3035bf(0x202)],_0x3035bf(0x153)+_0x18f332);}}function decryptRSA(_0x57e01d,_0xf0a410){const _0x2aa32a=_0x25d974,_0x5aec27=forge['pki'][_0x2aa32a(0x192)](_0x57e01d),_0x78b5d6=_0x5aec27[_0x2aa32a(0xe2)](forge['util'][_0x2aa32a(0x140)](_0xf0a410),_0x2aa32a(0x144),{'md':forge['md'][_0x2aa32a(0x21a)][_0x2aa32a(0x2a4)](),'mgf1':{'md':forge['md'][_0x2aa32a(0x21a)]['create']()}});return _0x78b5d6;}function validateCredentials(_0x586d9c,_0x3f6f47){const _0x5c0c60=_0x25d974;if(_0x586d9c[_0x5c0c60(0x1e7)]==settings['bbUsername']&&bcrypt[_0x5c0c60(0x297)](_0x586d9c[_0x5c0c60(0x104)],settings[_0x5c0c60(0x2d3)])){if(settings[_0x5c0c60(0x1ee)])return{'allow':![],'reason':'2FA\x20login\x20required','token':null};else{const _0x4a875f=generateLoginToken(_0x3f6f47);return{'allow':!![],'reason':_0x5c0c60(0xe4),'token':_0x4a875f};}}else return{'allow':![],'reason':_0x5c0c60(0x269),'token':null};}function refreshToken(_0x3537b3){const _0x19b0e7=generateLoginToken(_0x3537b3);return{'allow':!![],'reason':'login\x20token\x20generated','token':_0x19b0e7};}function validateAccess(_0x42c1e4,_0x4c5331,_0x1350a3){const _0x111fbc=_0x25d974,_0x5a3080=_0x1350a3?_0x1350a3:devices[_0x4c5331]['ip'];let _0x16e314;const _0x428411=_0x372d1e=>{const _0x19d086=_0x36cf;if(settings['loginRequired']){if(settings[_0x19d086(0x1ee)]){if(telegram2FaApproved(_0x4c5331)){const _0x344b97=generateLoginToken(_0x4c5331);return{'allow':!![],'reason':_0x19d086(0x2a9),'token':_0x344b97};}else return{'allow':![],'reason':_0x19d086(0x173),'token':null};}else return _0x16e314=validToken(_0x372d1e,_0x4c5331),_0x16e314['hasOwnProperty']('success')?{'allow':!![],'reason':_0x19d086(0x2b4),'token':_0x372d1e}:{'allow':![],'reason':_0x19d086(0x173),'token':null};}else return{'allow':!![],'reason':_0x19d086(0x242),'token':null};};if(settings[_0x111fbc(0x281)]){let _0x567d3a=[...settings[_0x111fbc(0x2e1)],'::1',_0x111fbc(0x2e6),_0x111fbc(0x25b)];if(_0x567d3a['includes'](_0x5a3080))return _0x428411(_0x42c1e4);else{_0x16e314=validToken(_0x42c1e4,_0x4c5331);if(_0x16e314[_0x111fbc(0x152)](_0x111fbc(0x17b)))return _0x428411(_0x42c1e4);else{if(telegramIpApproved(_0x4c5331)){const _0x1c1909=generateToken(_0x4c5331);return _0x16e314=_0x428411(_0x42c1e4),_0x16e314[_0x111fbc(0x22a)]?{'allow':!![],'reason':_0x111fbc(0x105),'token':_0x1c1909}:_0x16e314;}else return settings[_0x111fbc(0xfa)]?{'allow':![],'reason':_0x111fbc(0x277),'token':null}:{'allow':![],'reason':_0x111fbc(0x1d4),'token':null};}}}else return _0x428411(_0x42c1e4);}function timelyDecrypt(_0x2dede3,_0x23a693,_0x163a11='@'){const _0x82ad06=_0x25d974;if(_0x2dede3)try{const _0x494ae7=decryptRSA(secure[_0x82ad06(0x284)],_0x2dede3),_0x1fd5e9=_0x494ae7[_0x82ad06(0x1b9)](_0x163a11)[0x0],_0x1d5375=_0x494ae7[_0x82ad06(0x1b9)](_0x163a11)[0x1],_0x1fd70d=new Date()[_0x82ad06(0x20f)]();if(_0x23a693){if(_0x1fd70d-_0x1d5375<maxSecretAge*0x3e8)return _0x1fd5e9;else return![];}else return _0x1fd5e9;}catch(_0xa6268b){return![];}else return![];}const validToken=(_0xef608e,_0x3b3b37)=>{const _0x21feef=_0x25d974,_0x37dd72=devices[_0x3b3b37]['ip'];if(!_0xef608e)return{'error':_0x21feef(0xec)};for(let _0x2e2234 of blacklist){if(_0x2e2234[_0x21feef(0x2cb)]==_0xef608e)return{'error':_0x21feef(0x10a)};}let _0x540cb9;try{_0x540cb9=jwt[_0x21feef(0x1c6)](_0xef608e,secure[_0x21feef(0x2ce)]+_0x3b3b37);}catch{return{'error':'Invalid\x20authentication\x20token\x20(1)'};}if(!_0x540cb9[_0x21feef(0x152)](_0x21feef(0x2af))&&!_0x540cb9[_0x21feef(0x152)](_0x21feef(0x1e7))||!_0x540cb9['hasOwnProperty'](_0x21feef(0x2e7)))return{'error':_0x21feef(0x2a8)};if(!_0x540cb9[_0x21feef(0x152)](_0x21feef(0x1e7))&&_0x540cb9['hasOwnProperty'](_0x21feef(0x2af))){const {clientip:_0x4246fb}=_0x540cb9;return _0x37dd72==_0x4246fb?{'success':_0x21feef(0x177)}:{'error':_0x21feef(0x14d)};}else{if(_0x540cb9[_0x21feef(0x152)](_0x21feef(0x1e7))&&_0x540cb9[_0x21feef(0x152)]('clientip')){const {username:_0x141c62,clientip:_0x13c5b6}=_0x540cb9;return settings[_0x21feef(0x112)]==_0x141c62&&_0x37dd72==_0x13c5b6?{'success':_0x21feef(0x177)}:{'error':_0x21feef(0x1a2)};}}},generateLoginToken=_0x514d25=>{const _0x278b94=_0x25d974;if(_0x514d25){const _0x364772=devices[_0x514d25]['ip'];return jwt[_0x278b94(0x14b)]({'username':settings[_0x278b94(0x112)],'clientip':_0x364772},secure[_0x278b94(0x2ce)]+_0x514d25,{'expiresIn':tokenRefresh*0x3c,'allowInsecureKeySizes':!![]});}else return![];},generateToken=_0x1d6e35=>{const _0x53bb2f=_0x25d974;if(_0x1d6e35){const _0xe0b73=devices[_0x1d6e35]['ip'];return jwt[_0x53bb2f(0x14b)]({'clientip':_0xe0b73},secure[_0x53bb2f(0x2ce)]+_0x1d6e35,{'expiresIn':devices[_0x1d6e35]['telegramIpApproval'][_0x53bb2f(0x108)]*0x3c,'allowInsecureKeySizes':!![]});}else return![];},telegramIpApproved=_0xd52c8c=>{const _0x48862a=_0x25d974;let _0x46846c=![];return devices[_0xd52c8c][_0x48862a(0x24d)]&&devices[_0xd52c8c][_0x48862a(0x24d)][_0x48862a(0x108)]!='reject'&&(_0x46846c=devices[_0xd52c8c][_0x48862a(0x24d)][_0x48862a(0x2af)]==devices[_0xd52c8c]['ip']&&new Date()[_0x48862a(0x20f)]()-devices[_0xd52c8c][_0x48862a(0x24d)][_0x48862a(0x100)]<devices[_0xd52c8c][_0x48862a(0x24d)][_0x48862a(0x108)]*0x3c*0x3e8),_0x46846c;},telegram2FaApproved=_0x3a24d7=>{const _0xd5b9c3=_0x25d974;let _0x20f7f3=![];return devices[_0x3a24d7][_0xd5b9c3(0x2dc)]&&devices[_0x3a24d7][_0xd5b9c3(0x2dc)][_0xd5b9c3(0x108)]!='reject'&&(_0x20f7f3=devices[_0x3a24d7][_0xd5b9c3(0x2dc)]['clientip']==devices[_0x3a24d7]['ip']&&new Date()[_0xd5b9c3(0x20f)]()-devices[_0x3a24d7][_0xd5b9c3(0x2dc)][_0xd5b9c3(0x100)]<devices[_0x3a24d7]['telegram2FaApproval']['expiry']*0x3c*0x3e8),_0x20f7f3;},normalizeIP=_0xe59984=>{const _0x598e68=_0x25d974;let _0x29cf91=null,_0xe18031=null;if(ipaddr['isValid'](_0xe59984)){const _0x4d2f62=ipaddr['parse'](_0xe59984);_0x4d2f62['kind']()===_0x598e68(0xf7)?(_0x4d2f62['isIPv4MappedAddress']()&&(_0x29cf91=_0x4d2f62[_0x598e68(0x110)]()[_0x598e68(0x268)]()),_0xe18031=_0x4d2f62[_0x598e68(0x268)]()):(_0x29cf91=_0x4d2f62[_0x598e68(0x268)](),_0xe18031=_0x4d2f62['toIPv4MappedAddress']()[_0x598e68(0x268)]());}return{'show':_0x29cf91?_0x29cf91:_0xe18031,'store':_0xe18031};};function formatDate(_0x352231){const _0x3364a5=_0x25d974;return _0x352231[_0x3364a5(0x22d)]()+'/'+(_0x352231['getMonth']()+0x1)[_0x3364a5(0x268)]()['padStart'](0x2,'0')+'/'+_0x352231[_0x3364a5(0x2c7)]()[_0x3364a5(0x268)]()[_0x3364a5(0x160)](0x2,'0')+'\x20'+_0x352231['getHours']()[_0x3364a5(0x268)]()[_0x3364a5(0x160)](0x2,'0')+':'+_0x352231[_0x3364a5(0x265)]()['toString']()[_0x3364a5(0x160)](0x2,'0')+':'+_0x352231[_0x3364a5(0x1ec)]()['toString']()[_0x3364a5(0x160)](0x2,'0');}function sleep(_0x1cf0b3){return new Promise(_0xfab6a3=>setTimeout(_0xfab6a3,_0x1cf0b3));}