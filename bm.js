const _0x55ec46=_0x1dcc;(function(_0x10938c,_0x55970e){const _0x19fb94=_0x1dcc,_0x5865e5=_0x10938c();while(!![]){try{const _0x4ace01=parseInt(_0x19fb94(0x176))/0x1*(parseInt(_0x19fb94(0x311))/0x2)+-parseInt(_0x19fb94(0x33e))/0x3+parseInt(_0x19fb94(0x2f9))/0x4*(parseInt(_0x19fb94(0x216))/0x5)+-parseInt(_0x19fb94(0x2dd))/0x6*(-parseInt(_0x19fb94(0x16d))/0x7)+parseInt(_0x19fb94(0x247))/0x8+parseInt(_0x19fb94(0x303))/0x9+parseInt(_0x19fb94(0x1cb))/0xa*(-parseInt(_0x19fb94(0x18d))/0xb);if(_0x4ace01===_0x55970e)break;else _0x5865e5['push'](_0x5865e5['shift']());}catch(_0x4e69eb){_0x5865e5['push'](_0x5865e5['shift']());}}}(_0xb18f,0x3f4f7));const _0x17c7cb=function(){let _0x4ccda3=!![];return function(_0x240302,_0x4c0df3){const _0x26f586=_0x4ccda3?function(){if(_0x4c0df3){const _0x11b50a=_0x4c0df3['apply'](_0x240302,arguments);return _0x4c0df3=null,_0x11b50a;}}:function(){};return _0x4ccda3=![],_0x26f586;};}(),_0x2e77d5=_0x17c7cb(this,function(){const _0x1eb000=_0x1dcc;return _0x2e77d5['toString']()[_0x1eb000(0x2e8)]('(((.+)+)+)+$')[_0x1eb000(0x1e5)]()[_0x1eb000(0x1e1)](_0x2e77d5)[_0x1eb000(0x2e8)](_0x1eb000(0x23c));});_0x2e77d5();'use strict';process['env'][_0x55ec46(0x232)]=0x1;const childProcess=require(_0x55ec46(0x352)),fs=require('fs'),fns=require(_0x55ec46(0x1a5)),low=require('lowdb'),FileSync=require('lowdb/adapters/FileSync'),path=require('path'),crypto=require('crypto'),forge=require(_0x55ec46(0x2cf)),bcrypt=require('bcryptjs'),jwt=require(_0x55ec46(0x2b4)),ipaddr=require(_0x55ec46(0x1a3)),argv=require(_0x55ec46(0x363))(process[_0x55ec46(0x2c1)][_0x55ec46(0x1e6)](0x2))[_0x55ec46(0x2c1)],uuidRandom=require('uuid-random'),{Telegraf,Markup}=require(_0x55ec46(0x28f)),Mixpanel=require(_0x55ec46(0x360)),axios=require(_0x55ec46(0x1a9)),{GraphQLClient,gql}=require(_0x55ec46(0x177)),util=require(_0x55ec46(0x272)),fileUpload=require(_0x55ec46(0x1af)),{networkInterfaces}=require('os'),JSZip=require(_0x55ec46(0x240)),PORT=argv[_0x55ec46(0x29a)]||_0x55ec46(0x1f6),pattern=/^[0-9]{2,4}$/;!pattern[_0x55ec46(0x1e0)](PORT)&&(console[_0x55ec46(0x19f)](_0x55ec46(0x34a)+PORT+',\x20must\x20be\x20a\x204\x20digit\x20number'),process['exit'](0x1));const HOST=argv['host']||null,userID=argv['user']||'',debugging=argv['d']||![],recreate=argv['r']||![],nodeversion=process[_0x55ec46(0x18c)][_0x55ec46(0x2c9)];let bbpath=_0x55ec46(0x229),bbpath2='';const botfile=_0x55ec46(0x263),configfile=_0x55ec46(0x375),settingsfile=_0x55ec46(0x17a),securefile=_0x55ec46(0x379),environment=require('./'+bbpath2+_0x55ec46(0x2db))[_0x55ec46(0x1a4)]||_0x55ec46(0x2ea),maxBackups=0xa;let validInstallation=!![];const schedulerInterval=0x3c*0x3c*0x3e8;!fs[_0x55ec46(0x1b3)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x55ec46(0x37b)),configpath=userID?bbpath+_0x55ec46(0x1fc)+userID+'/':bbpath+_0x55ec46(0x1fc),configbackuppath=configpath+_0x55ec46(0x307),logspath=userID?bbpath+_0x55ec46(0x1e8)+userID+'/':bbpath+_0x55ec46(0x1e8),zippath=userID?bbpath+_0x55ec46(0x1ab)+userID+'/':bbpath+_0x55ec46(0x1ab),loggerfile=fs[_0x55ec46(0x1a6)](logspath+_0x55ec46(0x178),{'flags':'a'}),temppath=userID?bbpath+'temp/'+userID+'/':bbpath+_0x55ec46(0x197);!fs[_0x55ec46(0x1b3)](configpath)&&fs[_0x55ec46(0x372)](configpath);!fs[_0x55ec46(0x1b3)](configbackuppath)&&fs[_0x55ec46(0x372)](configbackuppath);!fs[_0x55ec46(0x1b3)](logspath)&&fs['mkdirSync'](logspath);!fs[_0x55ec46(0x1b3)](zippath)&&fs['mkdirSync'](zippath);!fs[_0x55ec46(0x1b3)](temppath)&&fs[_0x55ec46(0x372)](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig['defaults']({'bots':[]})[_0x55ec46(0x203)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x55ec46(0x267)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':'0.0.0','onepagemode':![],'marketcapApi':''}})['write']();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x55ec46(0x267)]({'secure':{},'blacklist':[]})[_0x55ec46(0x203)]();const saltRounds=0xa,mixpanel=Mixpanel[_0x55ec46(0x16f)](_0x55ec46(0x33c),{'host':_0x55ec46(0x32c)});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings[_0x55ec46(0x185)]&&(settings[_0x55ec46(0x185)]!=''&&settings[_0x55ec46(0x185)]!=_0x55ec46(0x165))&&settings[_0x55ec46(0x1cc)]&&settings[_0x55ec46(0x1cc)]!='')initTelegram();const parseColor=(_0x164241,_0x44895e)=>{const _0x54626a=_0x55ec46,_0x1aecaf=/#[A-Z]{3}#/g;if(typeof _0x164241==_0x54626a(0x1c6)){!_0x44895e?_0x164241=_0x164241[_0x54626a(0x2e0)](_0x1aecaf,''):(_0x164241=_0x164241[_0x54626a(0x2e0)](/#BLU#/g,_0x54626a(0x37c)),_0x164241=_0x164241[_0x54626a(0x2e0)](/#RED#/g,'\x1b[31m'),_0x164241=_0x164241[_0x54626a(0x2e0)](/#YEL#/g,_0x54626a(0x233)),_0x164241=_0x164241['replace'](/#MAG#/g,_0x54626a(0x288)),_0x164241=_0x164241[_0x54626a(0x2e0)](/#CYA#/g,_0x54626a(0x32b)),_0x164241=_0x164241[_0x54626a(0x2e0)](/#RES#/g,_0x54626a(0x1be)));;}return _0x164241;},logger={'screen':_0x2bab46=>{const _0xfc946d=_0x55ec46;console[_0xfc946d(0x19f)](parseColor(_0x2bab46,!![]));},'simple':_0x4f0e2b=>{const _0x12dce3=_0x55ec46;console['log'](parseColor(_0x4f0e2b,!![])),loggerfile[_0x12dce3(0x203)](util[_0x12dce3(0x168)](parseColor(_0x4f0e2b,![]))+'\x0a');},'full':async _0x1bcad0=>{const _0x1327aa=_0x55ec46,_0xb02005=getTimeStamp()+_0x1327aa(0x209)+_0x1bcad0;console[_0x1327aa(0x19f)](parseColor(_0xb02005,!![])),loggerfile['write'](util[_0x1327aa(0x168)](parseColor(_0xb02005,![]))+'\x0a');if(tgBot&&settings[_0x1327aa(0x2a4)]&&settings[_0x1327aa(0x29c)]!=_0x1327aa(0x218))await sendTelegram(settings[_0x1327aa(0x2a4)],'Bot\x20Mgr\x20>\x20'+parseColor(_0x1bcad0,![]));},'debug':async(_0x4cf858,_0x144dcc='')=>{const _0xd6a324=_0x55ec46,_0x45b6da=getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20'+_0x4cf858;if(debugging)console['log'](parseColor(_0x45b6da,!![]));loggerfile[_0xd6a324(0x203)](util[_0xd6a324(0x168)](parseColor(_0x45b6da,![]))+'\x0a');if(_0x144dcc){if(debugging)console['log'](_0x144dcc);loggerfile[_0xd6a324(0x203)](util['format'](_0x144dcc)+'\x0a');}}};let terminating=![];process['on'](_0x55ec46(0x299),function(_0x4fd184){const _0x399dc3=_0x55ec46;_0x4fd184[_0x399dc3(0x1e5)]()[_0x399dc3(0x2c0)](_0x399dc3(0x19c))?(logger[_0x399dc3(0x199)](_0x399dc3(0x201)+_0x4fd184[_0x399dc3(0x29a)]+_0x399dc3(0x370)),process[_0x399dc3(0x2b1)]({'terminate':!![]},_0x4cf891=>{})):logger['simple'](_0x4fd184);}),process['on'](_0x55ec46(0x279),()=>{stopAllBots(),process['exit'](0x0);}),process['on'](_0x55ec46(0x1c9),()=>{const _0x6f66eb=_0x55ec46;stopAllBots(),process[_0x6f66eb(0x279)](0x0);}),process['on'](_0x55ec46(0x1a2),()=>{const _0x213d05=_0x55ec46;stopAllBots(),process[_0x213d05(0x279)](0x0);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x55ec46(0x2db))[_0x55ec46(0x26f)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let tmpStorage={},devices=[],lastIpApproval,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require('express'),app=express(),http=require('http')[_0x55ec46(0x250)](app);app[_0x55ec46(0x18b)](fileUpload({'useTempFiles':!![]})),app[_0x55ec46(0x318)](_0x55ec46(0x259),async(_0x5ce5e9,_0x20a216)=>{const _0x125eb3=_0x55ec46,_0x4cc12b=_0x5ce5e9['params'][_0x125eb3(0x2a1)],_0x41f250=getClientsWithBotID(_0x125eb3(0x1b0)),_0x12a44a=_0x5ce5e9[_0x125eb3(0x1ad)]['uuid'],_0x159bf7=timelyDecrypt(_0x12a44a,![]),_0x3085ee=_0x41f250[_0x125eb3(0x189)](_0x2e9783=>_0x2e9783[_0x125eb3(0x31c)]==_0x159bf7);if(_0x3085ee){const _0x4ae77d=normalizeIP(_0x5ce5e9['socket'][_0x125eb3(0x24e)])[_0x125eb3(0x1bb)],_0x27f44d=_0x5ce5e9['headers'][_0x125eb3(0x210)];if(validateAccess(_0x27f44d,_0x159bf7,_0x4ae77d)[_0x125eb3(0x2f7)])_0x4cc12b==_0x125eb3(0x206)&&await backupConfigFiles(),await zipFiles(_0x4cc12b),_0x20a216['download'](zippath+(_0x4cc12b+_0x125eb3(0x21f)),_0x307391=>{const _0x524baa=_0x125eb3;_0x307391&&(logger['full']('Failed\x20to\x20download\x20'+_0x4cc12b),logger[_0x524baa(0x199)](_0x307391));});else logger['full'](_0x125eb3(0x327)+_0x4cc12b+_0x125eb3(0x340));}else logger[_0x125eb3(0x2d2)](_0x125eb3(0x327)+_0x4cc12b+_0x125eb3(0x2a5));}),app[_0x55ec46(0x19a)]('/upload-backup',async(_0x267f5d,_0x17e2c8)=>{const _0x3e0d7b=_0x55ec46,_0x5a2981=getClientsWithBotID(_0x3e0d7b(0x1b0)),_0x275d5e=_0x267f5d['headers'][_0x3e0d7b(0x31c)],_0x12cd15=timelyDecrypt(_0x275d5e,![]),_0x5c0989=_0x5a2981[_0x3e0d7b(0x189)](_0x2a4a3e=>_0x2a4a3e[_0x3e0d7b(0x31c)]==_0x12cd15);logger[_0x3e0d7b(0x235)](_0x3e0d7b(0x20a));if(_0x5c0989){const _0x162938=normalizeIP(_0x267f5d[_0x3e0d7b(0x2e6)][_0x3e0d7b(0x24e)])[_0x3e0d7b(0x1bb)],_0x76f6d3=_0x267f5d[_0x3e0d7b(0x1ad)]['tkn'];if(validateAccess(_0x76f6d3,_0x12cd15,_0x162938)[_0x3e0d7b(0x2f7)]){if(_0x267f5d[_0x3e0d7b(0x20e)]){const _0x53b4f2=_0x267f5d['files'][_0x3e0d7b(0x2de)];await _0x53b4f2['mv'](temppath+_0x53b4f2['name']),_0x17e2c8['send']({'status':!![],'message':'File\x20uploaded'});const _0x466e3f=getBotsWithMode();_0x466e3f['length']>0x0?confirmRestore(temppath,_0x53b4f2[_0x3e0d7b(0x2f8)]):unzipFile(temppath,_0x53b4f2['name']);}}else logger[_0x3e0d7b(0x2d2)](_0x3e0d7b(0x2ed));}else logger[_0x3e0d7b(0x2d2)](_0x3e0d7b(0x187));}),app[_0x55ec46(0x18b)](express[_0x55ec46(0x35f)](path['join'](__dirname,bbpath2,'build2'))),app[_0x55ec46(0x18b)](express['static'](path[_0x55ec46(0x1ac)](__dirname,bbpath2,_0x55ec46(0x2b6)))),app[_0x55ec46(0x318)]('/',function(_0x448b5f,_0x5ead67){const _0x46021c=_0x55ec46;_0x5ead67['sendFile'](path[_0x46021c(0x1ac)](__dirname,bbpath2,_0x46021c(0x292),_0x46021c(0x1a0)));}),app[_0x55ec46(0x318)]('/:bot',function(_0x291eda,_0x374e43){const _0x41eefe=_0x55ec46;_0x374e43[_0x41eefe(0x1e7)](path[_0x41eefe(0x1ac)](__dirname,bbpath2,_0x41eefe(0x2b6),_0x41eefe(0x1a0)));}),app[_0x55ec46(0x318)](_0x55ec46(0x29f),(_0x4afca1,_0x10c98e)=>{const _0x3dbd20=_0x55ec46;_0x10c98e[_0x3dbd20(0x1e7)](path[_0x3dbd20(0x1ac)](__dirname,bbpath2,_0x3dbd20(0x2b6),_0x3dbd20(0x1a0)));}),app[_0x55ec46(0x318)](_0x55ec46(0x31b),(_0x49f34c,_0x125823)=>{const _0x41c537=_0x55ec46;_0x125823[_0x41c537(0x1e7)](path['join'](__dirname,bbpath2,_0x41c537(0x2b6),'index.html'));}),app[_0x55ec46(0x318)](_0x55ec46(0x2e7),(_0x3ca176,_0x4e2a3f)=>{const _0x209cdf=_0x55ec46;_0x4e2a3f[_0x209cdf(0x1e7)](path['join'](__dirname,bbpath2,_0x209cdf(0x2b6),_0x209cdf(0x1a0)));}),app['get'](_0x55ec46(0x353),(_0x534be3,_0x25c23e)=>{const _0x30684c=_0x55ec46;_0x25c23e[_0x30684c(0x1e7)](path[_0x30684c(0x1ac)](__dirname,bbpath2,_0x30684c(0x2b6),'index.html'));}),app[_0x55ec46(0x318)](_0x55ec46(0x1de),(_0x14e6fd,_0x3a5059)=>{const _0x1ef196=_0x55ec46;_0x3a5059[_0x1ef196(0x1e7)](path[_0x1ef196(0x1ac)](__dirname,bbpath2,_0x1ef196(0x2b6),_0x1ef196(0x1a0)));}),app[_0x55ec46(0x318)]('/:bot/support',(_0x4832f9,_0x29f3d7)=>{const _0x560e17=_0x55ec46;_0x29f3d7[_0x560e17(0x1e7)](path[_0x560e17(0x1ac)](__dirname,bbpath2,'build','index.html'));});if(HOST)http[_0x55ec46(0x2e2)](PORT,HOST);else http['listen'](PORT);const io=require('socket.io')(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}function _0xb18f(){const _0x547f4e=['store','botname','Error\x20removing\x20old\x20backup\x20files:','\x1b[0m','staging','login','bbvNew','/logs\x20-\x20receive\x20log\x20files\x0a','f2aRequired','Unauthorized\x20attempt\x20to\x20store\x20configuration','getFullYear','string','generateAsync','split','SIGTERM','temporaryAccessAllowed','330810usXndd','telegramUsername','disabled','Unauthorized\x20attempt\x20to\x20log\x20out','/status\x20-\x20show\x20bot(s)\x20status\x0a','yes','Session\x20expired\x20for\x20user\x20...','login\x20token\x20generated','/start','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','temporary\x20access\x20rejected','manual','settings.','getPortfolio','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','Unauthorized\x20attempt\x20to\x20update\x20bot','Restore\x20backup\x20file\x20','new','1000','/:bot/configuration','confirm-message','test','constructor','decrypt','Ok,\x20will\x20send\x20alert\x20notifications\x20only','connection','toString','slice','sendFile','logs/','Telegraf\x20error:','enabled','request','Token\x20blacklisted','lastmsgtelegram','https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master','auth','resetpw_no','token','error','storeFiat','Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files','lastmsgemitted','3000','telegramEnabled','stopped','Node.js\x20v','status','randomBytes','config/','whitelist','Notifications\x20types:\x20','getTime','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20','#RED#Balance\x20Bot\x20is\x20already\x20running\x20on\x20port\x20','Enabled\x20','write','Running\x20#RED#Balance\x20Bot\x20v',')\x20|\x20Bot\x20','backup','password','filter',':\x20Bot\x20Mgr\x20>\x20','Backup\x20file\x20uploaded','temporary\x20token\x20generated','temporary\x20access\x20timeout','disable','files','config','tkn','metrics','catch','forEach','binary','restore-backup-file','175HdOyhu','Unauthorized\x20attempt\x20to\x20get\x20messages','orders','Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U','unlinkSync','BCT','login2fa_','notification','DEFLATE','.zip','running','invalid\x20credentials','2FA\x20login\x20token\x20generated','bbUsername','Error\x20sending\x20','Bot\x20Mgr\x20>\x20Toggling\x20','get-portfolio','getMinutes','<b>Telegram\x20Bot\x20Status:</b>\x0a','bb/','accept','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','config_all',')\x20\x20\x20|\x20Bot\x20','Telegram\x20error:','output-000.log','reload','names','NTBA_FIX_319','\x1b[33m','deleteHistoryAlerts','debug','HTML','decode64','reply','Invalid\x20username\x20or\x20IP\x20address','_nsps','reset-history','(((.+)+)+)+$','help','Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot','placeOrder','jszip','alerts','get-logs','::ffff:127.0.0.1','=>\x20Go\x20to\x20#CYA#http://','getDate','privateKey','1480096CXFmNs','tempaccess_5_','update-bot','Password\x20reset\x20rejected','backup-full@','apiKey','marketcapApi','remoteAddress','/off\x20-\x20stop\x20bot(s)\x0a','createServer','Starting\x20#RED#Balance\x20Bot\x20v','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','(staging)','apiSecret','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','rsa','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','Notifications\x20disabled','/download/:type','IPv4','Bot\x20Mgr\x20>\x20','<b>Balance\x20Bot\x20Status:</b>\x0a','User\x20has\x20been\x20validated','compareSync','Bot\x20Mgr\x20>\x20Stopping\x20','config_orders','-config.json','expiry','bot.js','bbvReceive','close','127.0.0.1','defaults','getMonth','exec','address','Notifications\x20disabled\x0a','update-bb','kill','track','version','button','entries','util','Unauthorized\x20attempt\x20to\x20show\x20configuration','stringify','15\x20min','You\x20can\x20use\x20the\x20following\x20commands:\x0a','restart','number','exit','telegramIpApproval','latestversion','once','messages','get-messages','Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled','resetpw_yes','Access\x20enabled\x20for\x20','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','inlineKeyboard','#RES#\x20if\x20running\x20on\x20server','Disabled\x20','botID','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','\x1b[35m','RSA-OAEP','startsWith','privateKeyFromPem','publicKey','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run','output-001.log','telegraf','The\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','auto','build2','Server','restore_yes_','restore_no_','userid','order','Invalid\x20authentication\x20token\x20(2)','uncaughtException','port','tempaccess_30_','telegramEvents','All\x20bots\x20running\x20right\x20now','\x20|\x20client:\x20...','/:bot/portfolio','Bot\x20Mgr\x20>\x20Stopping\x20all\x20bots','type','Login\x20accepted','callback','telegramChatId','\x20(2)','writeFileSync','chat','alias','[ip-address]','Error\x20details:','showConfig','publicKeyToPem','args','#RES#\x20if\x20running\x20locally\x0a','ipc','delete-alerts','send','toggle_','getHours','jsonwebtoken','2FA\x20required','build','event','update','delete-bot','exp','add','/names\x20-\x20show\x20bot\x20names\x0a','metrics_','reinstall','login\x20required','includes','argv','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','Unauthorized\x20attempt\x20to\x20update\x20settings','output-003.log','update_yes','headless','Restoring\x20bot(s)\x20from\x20backup','logs','node','update_no','any','message','telegram2FaApproval','storeHeadless','node-forge','mode','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run','full','blacklist','getSeconds','All\x20bots','Logged\x20in\x20user\x20...','$1_$2_$3','#RES#\x20','pidExpireLogin','endsWith','version.json','function','931686BeYTIg','backupfile','reject','replace','Network\x20Interfaces:','listen','secret','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','match','socket','/:bot/coins','search','All','production','cancel-loading','settings','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)','onepagemode','login\x20token\x20valid','login2fa_reject_','Login\x20rejected','sockets','Yes','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','min','allow','name','38244ARnRtD','Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','\x20-\x20','output-002.log','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','replyWithDocument','bot-','store-settings','Orders','503901VWzeSm','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?','mtime','backup/','cloneDeep','copyFileSync','text','bots','Starting\x20(','parse','*$1*','************','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','724zzXhCn','timeshift','Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history','server','access','Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files','readFileSync','get','CoinMarketCap\x20API\x20key\x20validated','Restore\x20process\x20aborted','/:bot/performance','uuid','sendMetricsTelegram','logged\x20out','all','restart_','/enable\x20-\x20enable\x20notifications\x0a','clientip','username','/on\x20-\x20start\x20bot(s)\x0a','get-backup-files','https://api.ipify.org?format=json','Unauthorized\x20attempt\x20to\x20download\x20','emit','-events.json','add-bot','\x1b[36m','api-eu.mixpanel.com','off','Allow\x20login\x20from\x20IP\x20address\x20','-----------------------------------------------------------------------------------','then','\x20only\x0a','--------------------------------------','-performance.json','Unauthorized\x20login\x20attempt\x20(timeout)','Restore\x20process\x20confirmed','handshake','map','reset-password','started','on_','cancelLoading','6b67f3d61ee94b8f5c80b4affef4c4d9','sortBy','400299rPfOTE','keys','\x20(1)','show','apiPassword','reason','sha256','generateKeyPair','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','backup-full','async','status\x20code\x20401','Error:\x20Invalid\x20argument\x20','\x20|\x20','logout','hashSync','remove','Starting\x20Balance\x20Bot\x20update','exchange','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20see\x20logs\x20for\x20details','child_process','/:bot/history','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','toggle','updatebotmanager','inherit','store-headless','file','from','isDirectory','timestamp','showname','sign','static','mixpanel','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation','yargs/yargs','statSync','pki','push','Deleted\x20Bot\x20','action','\x20to\x20','padStart','bbPassword','launch','Temporary\x20access\x20rejected','store-fiat','\x20>\x20','#RES#','pidRefreshToken','mkdirSync','create','Invalid\x20IP\x20address','bb-config.json','code','/backup\x20-\x20receive\x20backup\x20files\x0a','getUTCHours','bb-secure.json','range','clients','\x1b[34m','ipv6','new-disabled','connected','fork','stop','***','family','telegram','format','show-config','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','No\x20bots\x20running\x20right\x20now','Unauthorized\x20attempt\x20to\x20delete\x20bot','21AqNSbT','value','init','emitHistory','loginRequired','=>\x20Go\x20to\x20#CYA#http://127.0.0.1:','hasOwnProperty','success','0.0.0','127gFvIDC','graphql-request','/output-000.log','Idling\x20(','bb-settings.json','No\x20authentication\x20token','assign','disconnect','/restart\x20-\x20restart\x20bot(s)\x0a','2FA\x20login\x20required','Unauthorized\x20attempt\x20to\x20get\x20portfolio','command','set','whitelistEnabled','reinstall_no','telegramToken','Unauthorized\x20attempt\x20to\x20confirm\x20message','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)','readdirSync','find','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','use','versions','231rbzzzn','Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?','initclient','Logged\x20out\x20user\x20...','portfolio_','length','-results.json','store-configuration','sort','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','temp/','/help\x20-\x20show\x20available\x20commands\x0a','simple','post','rmSync','address\x20already\x20in\x20use','Starting\x20Balance\x20Bot\x20reinstallation','ETH','log','index.html','|@|','SIGINT','ipaddr.js','environment','date-fns','createWriteStream','sendPortfolioTelegram','/disable\x20-\x20disable\x20notifications\x0a','axios','secure','zip/','join','headers','editMessageReplyMarkup','express-fileupload','botmanager','bot','Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file','existsSync','live','toIPv4MappedAddress','Bot\x20','Unauthorized\x20attempt\x20to\x20delete\x20alerts','Unauthorized\x20attempt\x20to\x20get\x20events','\x20files\x20over\x20Telegram:','referer'];_0xb18f=function(){return _0x547f4e;};return _0xb18f();}function getServerIP(){const _0x2199d1=_0x55ec46;let _0x285460=_0x2199d1(0x2a9);const _0x533c6e=networkInterfaces(),_0x54a215={};for(const _0x47eca0 of Object[_0x2199d1(0x33f)](_0x533c6e)){for(const _0xb3d038 of _0x533c6e[_0x47eca0]){if((_0xb3d038[_0x2199d1(0x166)]==_0x2199d1(0x25a)||_0xb3d038[_0x2199d1(0x166)]==0x4)&&!_0xb3d038['internal']){const _0x2286d0=ipaddr['parse'](_0xb3d038[_0x2199d1(0x26a)])[_0x2199d1(0x37a)]();_0x2286d0!='private'&&(!_0x54a215[_0x47eca0]&&(_0x54a215[_0x47eca0]=[]),_0x54a215[_0x47eca0][_0x2199d1(0x366)](_0xb3d038[_0x2199d1(0x26a)]),_0x285460=_0xb3d038[_0x2199d1(0x26a)]);}}}return{'serverip':_0x285460,'netinterfaces':_0x54a215};}async function startServer(){const _0xcf123d=_0x55ec46,{serverip:_0x3d8ff4,netinterfaces:_0x210210}=getServerIP();logger[_0xcf123d(0x199)](''),logger[_0xcf123d(0x199)]('-----------------------------------------------------------------------------------'),await logger[_0xcf123d(0x2d2)](_0xcf123d(0x251)+serverversion+_0xcf123d(0x2d8)+(environment==_0xcf123d(0x1bf)?_0xcf123d(0x253):'')+'\x0a'+(_0xcf123d(0x172)+PORT+_0xcf123d(0x2ae))+(_0xcf123d(0x244)+_0x3d8ff4+':'+PORT+_0xcf123d(0x284))),logger[_0xcf123d(0x199)](_0xcf123d(0x32f));if(config[_0xcf123d(0x192)]!=0x0)for(const _0x329d9c of config){const _0x522197=_0x329d9c[_0xcf123d(0x2d0)]==_0xcf123d(0x291)?'a':'m';if(_0x329d9c[_0xcf123d(0x1fa)]==_0xcf123d(0x1ea)||_0x329d9c['status']=='new')await logger['full'](_0xcf123d(0x30c)+_0x522197+_0xcf123d(0x205)+_0x329d9c[_0xcf123d(0x286)]+_0xcf123d(0x34b)+_0x329d9c[_0xcf123d(0x1bc)]),startBot([_0x329d9c['botID'],userID],{'cwd':bbpath},function(_0x20efb4){const _0xdc3511=_0xcf123d;if(_0x20efb4)logger[_0xdc3511(0x2d2)](_0x20efb4);});else(_0x329d9c['status']==_0xcf123d(0x1cd)||_0x329d9c[_0xcf123d(0x1fa)]=='new-disabled')&&await logger[_0xcf123d(0x2d2)](_0xcf123d(0x179)+_0x522197+_0xcf123d(0x22d)+_0x329d9c[_0xcf123d(0x286)]+_0xcf123d(0x34b)+_0x329d9c[_0xcf123d(0x1bc)]);}else!newBot&&logger[_0xcf123d(0x199)](_0xcf123d(0x2fe));if(newBot)addBot();logger[_0xcf123d(0x199)](_0xcf123d(0x32f)),logger['simple'](''),await logger[_0xcf123d(0x235)](_0xcf123d(0x1f9)+nodeversion),await logger[_0xcf123d(0x235)](_0xcf123d(0x2e1),_0x210210);}function startSocket(){const _0x2b7f81=_0x55ec46;io['on'](_0x2b7f81(0x1e4),_0x3493ee=>{const _0x36b981=_0x2b7f81;let _0x584601,_0x4fade0,_0x519585,_0x2885aa,_0x16ffc6;const _0x23198b=_0x3493ee[_0x36b981(0x336)][_0x36b981(0x1ad)][_0x36b981(0x1ba)];_0x4fade0=_0x23198b[_0x36b981(0x2e5)](/bot[0-9]{3}/);if(_0x4fade0)_0x519585=_0x4fade0[0x0][_0x36b981(0x2e5)](/[0-9]{3}/);if(_0x519585)_0x584601=_0x519585[0x0];else _0x584601=_0x36b981(0x1b0);const _0x500e0=_0x3493ee[_0x36b981(0x336)][_0x36b981(0x1ef)]['encryptedUuid'];if(!_0x500e0)_0x3493ee[_0x36b981(0x328)](_0x36b981(0x1fa),{'publicKey':secure['publicKey']});else{_0x2885aa=timelyDecrypt(_0x500e0,![]);if(!_0x2885aa)_0x3493ee['emit'](_0x36b981(0x1fa),{'publicKey':secure[_0x36b981(0x28c)]});else{_0x16ffc6=normalizeIP(_0x3493ee['conn']['remoteAddress'])[_0x36b981(0x1bb)];if(!devices[_0x2885aa])devices[_0x2885aa]={'uuid':_0x2885aa,'access':{'token':null}};devices[_0x2885aa]['ip']=_0x16ffc6;const _0x1c1370=addClient(_0x3493ee['id'],_0x2885aa,_0x584601);setAccess(_0x1c1370),emitMessages(),_0x3493ee['on'](_0x36b981(0x1c0),_0x498074=>{const _0x55b3b5=_0x36b981,_0x2e061a=timelyDecrypt(_0x498074[_0x55b3b5(0x207)],!![],_0x55b3b5(0x1a1));if(_0x2e061a){_0x498074={'username':_0x498074[_0x55b3b5(0x323)],'password':_0x2e061a},devices[_0x2885aa][_0x55b3b5(0x315)]=validateCredentials(_0x498074,_0x2885aa);if(devices[_0x2885aa][_0x55b3b5(0x315)][_0x55b3b5(0x2f7)]==![]&&devices[_0x2885aa][_0x55b3b5(0x315)][_0x55b3b5(0x343)]=='2FA\x20login\x20required')_0x3493ee[_0x55b3b5(0x328)](_0x55b3b5(0x1fa),{'access':devices[_0x2885aa][_0x55b3b5(0x315)]}),loginAccess2FA(_0x2885aa,_0x16ffc6);else{if(devices[_0x2885aa][_0x55b3b5(0x315)][_0x55b3b5(0x2f7)]==![]&&devices[_0x2885aa][_0x55b3b5(0x315)][_0x55b3b5(0x343)]==_0x55b3b5(0x221))_0x3493ee['emit']('status',{'access':devices[_0x2885aa][_0x55b3b5(0x315)]});else devices[_0x2885aa][_0x55b3b5(0x315)][_0x55b3b5(0x2f7)]&&devices[_0x2885aa][_0x55b3b5(0x315)][_0x55b3b5(0x343)]=='login\x20token\x20generated'&&(getClientsWithUuid(_0x2885aa)[_0x55b3b5(0x213)](_0x4c9c61=>{setAccess(_0x4c9c61);}),logger[_0x55b3b5(0x235)](_0x55b3b5(0x2d6)+_0x2885aa['slice'](-0x8)),setTokenRefresh(_0x2885aa),setSessionTimeout(_0x55b3b5(0x1c0),_0x2885aa));}}else logger[_0x55b3b5(0x2d2)](_0x55b3b5(0x334));}),_0x3493ee['on'](_0x36b981(0x338),()=>{resetPassword();}),_0x3493ee['on'](_0x36b981(0x17d),_0x382cde=>{removeClient(_0x3493ee['id']);}),_0x584601==_0x36b981(0x1b0)&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x49c8cd){const _0x3e9f25=_0x55ec46;if(_0x49c8cd!='botmanager'&&config[_0x3e9f25(0x24c)]!=''){if(pid[_0x49c8cd])pid[_0x49c8cd][_0x3e9f25(0x2b1)]({'function':_0x3e9f25(0x18f),'args':null});}_0x49c8cd!=_0x3e9f25(0x1b0)&&broadcastToBots(_0x3e9f25(0x30b),JSON[_0x3e9f25(0x274)](config));}function reloadBotManager(){const _0x116e3f=_0x55ec46;getClientsWithBotID(_0x116e3f(0x1b0))['forEach'](_0x1844f0=>{const _0x36018d=_0x116e3f;getSocket(_0x1844f0['id'])[_0x36018d(0x328)](_0x36018d(0x1fa),{'access':{'allow':![],'reason':'reload','token':null}});});}function getSocket(_0x37feeb){const _0x29cc06=_0x55ec46,_0x2b6644=io[_0x29cc06(0x23a)][_0x29cc06(0x318)]('/');return _0x2b6644[_0x29cc06(0x2f2)][_0x29cc06(0x318)](_0x37feeb);}function setAccess(_0x33a1f4){const _0x320ac1=_0x55ec46,_0x4d16ff=getSocket(_0x33a1f4['id']),_0x7ecff1=_0x33a1f4['uuid'],_0x2e6a32=_0x33a1f4['bot'];devices[_0x7ecff1]['access']=validateAccess(devices[_0x7ecff1]['access']['token'],_0x7ecff1),logger[_0x320ac1(0x235)]('Setting\x20access:\x20'+devices[_0x7ecff1][_0x320ac1(0x315)]['reason']+_0x320ac1(0x29e)+_0x33a1f4['id'][_0x320ac1(0x1e6)](-0x8)+'\x20|\x20user:\x20...'+_0x7ecff1['slice'](-0x8)),_0x4d16ff[_0x320ac1(0x1ac)](_0x7ecff1);if(devices[_0x7ecff1][_0x320ac1(0x315)][_0x320ac1(0x2f7)]){_0x4d16ff['join'](_0x2e6a32);if(_0x2e6a32==_0x320ac1(0x1b0))initializeSocketBotManager(_0x4d16ff);else initializeSocketBot(_0x4d16ff);initClient(_0x2e6a32);}devices[_0x7ecff1][_0x320ac1(0x315)][_0x320ac1(0x1f1)]&&devices[_0x7ecff1][_0x320ac1(0x315)][_0x320ac1(0x343)]=='temporary\x20token\x20generated'&&setSessionTimeout('2FA',_0x7ecff1),devices[_0x7ecff1]['access']['token']&&devices[_0x7ecff1][_0x320ac1(0x315)][_0x320ac1(0x343)]==_0x320ac1(0x222)&&setSessionTimeout(_0x320ac1(0x1c0),_0x7ecff1),_0x4d16ff['emit'](_0x320ac1(0x1fa),{'status':_0x33a1f4[_0x320ac1(0x314)],'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x7ecff1][_0x320ac1(0x315)],'externalip':devices[_0x7ecff1]['ip'],'publicKey':secure[_0x320ac1(0x28c)],'userid':settings['userid'],'validInstallation':validInstallation}),devices[_0x7ecff1][_0x320ac1(0x315)][_0x320ac1(0x2f7)]==![]&&devices[_0x7ecff1][_0x320ac1(0x315)]['reason']==_0x320ac1(0x2b5)&&temporaryAccess2FA(_0x7ecff1,devices[_0x7ecff1]['ip']);}function setSessionTimeout(_0xd5c669,_0xdd9c26){const _0x2631d7=_0x55ec46;let _0x24d501;if(_0xd5c669==_0x2631d7(0x1c0))_0x24d501=loginExpiry*0x3c*0x3e8;else _0x24d501=devices[_0xdd9c26][_0x2631d7(0x27a)][_0x2631d7(0x262)]*0x3c*0x3e8-(new Date()[_0x2631d7(0x1ff)]()-devices[_0xdd9c26][_0x2631d7(0x27a)][_0x2631d7(0x35c)]);if(devices[_0xdd9c26][_0x2631d7(0x2d9)])clearTimeout(devices[_0xdd9c26][_0x2631d7(0x2d9)]);devices[_0xdd9c26][_0x2631d7(0x2d9)]=setTimeout(()=>{const _0x534a22=_0x2631d7;if(devices[_0xdd9c26][_0x534a22(0x371)])clearTimeout(devices[_0xdd9c26][_0x534a22(0x371)]);removeSocketListeners(_0xdd9c26),addBlacklist(_0xdd9c26),devices[_0xdd9c26][_0x534a22(0x27a)]=null,devices[_0xdd9c26][_0x534a22(0x2cd)]=null,devices[_0xdd9c26][_0x534a22(0x315)][_0x534a22(0x1f1)]=null,logger[_0x534a22(0x235)](_0x534a22(0x1d1)+_0xdd9c26['slice'](-0x8)),devices[_0xdd9c26][_0x534a22(0x315)]=validateAccess(devices[_0xdd9c26]['access'][_0x534a22(0x1f1)],_0xdd9c26),!(devices[_0xdd9c26][_0x534a22(0x315)][_0x534a22(0x2f7)]&&devices[_0xdd9c26]['access'][_0x534a22(0x343)]=='login\x20not\x20required')&&(_0xd5c669=='login'?io['to'](_0xdd9c26)[_0x534a22(0x328)](_0x534a22(0x1fa),{'access':{'allow':![],'reason':'access\x20timeout','token':null}}):io['to'](_0xdd9c26)[_0x534a22(0x328)](_0x534a22(0x1fa),{'access':{'allow':![],'reason':_0x534a22(0x20c),'token':null}})),devices[_0xdd9c26][_0x534a22(0x315)][_0x534a22(0x1f1)]=null;},_0x24d501);}function setTokenRefresh(_0x506dc0){const _0x15aa62=_0x55ec46;if(devices[_0x506dc0]['pidRefreshToken'])clearTimeout(devices[_0x506dc0][_0x15aa62(0x371)]);devices[_0x506dc0][_0x15aa62(0x371)]=setTimeout(()=>{const _0x29626a=_0x15aa62;getClientsWithUuid(_0x506dc0)[_0x29626a(0x192)]!=0x0?(devices[_0x506dc0][_0x29626a(0x315)]=refreshToken(_0x506dc0),io['to'](_0x506dc0)[_0x29626a(0x328)](_0x29626a(0x1fa),{'status':_0x29626a(0x162),'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x506dc0][_0x29626a(0x315)],'externalip':devices[_0x506dc0]['ip'],'publicKey':secure[_0x29626a(0x28c)],'validInstallation':validInstallation}),setTokenRefresh(_0x506dc0)):clearTimeout(devices[_0x506dc0][_0x29626a(0x371)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x391880){const _0x4e3995=_0x55ec46,_0x28890c=getClient(_0x391880['id'])[_0x4e3995(0x31c)];_0x391880['emit'](_0x4e3995(0x30b),config),_0x391880[_0x4e3995(0x328)](_0x4e3995(0x2ec),cleanSettings()),_0x391880['on'](_0x4e3995(0x32a),_0x51cbec=>{const _0xf7bb99=_0x4e3995;if(validateAccess(_0x51cbec,_0x28890c)[_0xf7bb99(0x2f7)])addBot();else logger[_0xf7bb99(0x2d2)]('Unauthorized\x20attempt\x20to\x20add\x20bot');}),_0x391880['on'](_0x4e3995(0x249),(_0x7861c4,_0x51d6d7)=>{const _0x4b1522=_0x4e3995;if(validateAccess(_0x51d6d7,_0x28890c)[_0x4b1522(0x2f7)])toggleBot(_0x7861c4[_0x4b1522(0x286)],_0x7861c4[_0x4b1522(0x1fa)],_0x7861c4[_0x4b1522(0x1b4)]);else logger[_0x4b1522(0x2d2)]('Unauthorized\x20attempt\x20to\x20update\x20bot');}),_0x391880['on']('toggle-bot-mode',(_0x13939b,_0x220fce)=>{const _0x3752e6=_0x4e3995;if(validateAccess(_0x220fce,_0x28890c)['allow'])toggleBotMode(_0x13939b);else logger[_0x3752e6(0x2d2)](_0x3752e6(0x1da));}),_0x391880['on'](_0x4e3995(0x2b9),(_0x56a461,_0x335754)=>{const _0x892ac5=_0x4e3995;if(validateAccess(_0x335754,_0x28890c)[_0x892ac5(0x2f7)])deleteBot(_0x56a461);else logger['full'](_0x892ac5(0x16c));}),_0x391880['on'](_0x4e3995(0x301),(_0x2f6d5a,_0x59c3bd)=>{const _0x4c96a9=_0x4e3995;if(validateAccess(_0x59c3bd,_0x28890c)[_0x4c96a9(0x2f7)])storeSettings(_0x2f6d5a,!![]);else logger[_0x4c96a9(0x2d2)](_0x4c96a9(0x2c3));}),_0x391880['on'](_0x4e3995(0x26c),_0x31bba2=>{const _0x18633a=_0x4e3995;if(validateAccess(_0x31bba2,_0x28890c)[_0x18633a(0x2f7)])updateBB(_0x18633a(0x2b8));else logger[_0x18633a(0x2d2)]('Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot');}),_0x391880['on']('reinstall-bb',_0x1aa957=>{const _0x31faa2=_0x4e3995;if(validateAccess(_0x1aa957,_0x28890c)[_0x31faa2(0x2f7)])updateBB(_0x31faa2(0x2be));else logger[_0x31faa2(0x2d2)](_0x31faa2(0x23e));}),_0x391880['on'](_0x4e3995(0x325),_0x49f59c=>{const _0x2cf7ee=_0x4e3995;if(validateAccess(_0x49f59c,_0x28890c)[_0x2cf7ee(0x2f7)]){const _0x31e3e6=getClient(_0x391880['id']);if(_0x31e3e6)getBackupFiles(_0x31e3e6[_0x2cf7ee(0x31c)]);else logger[_0x2cf7ee(0x2d2)](_0x2cf7ee(0x316));}else logger['full'](_0x2cf7ee(0x1f4));}),_0x391880['on'](_0x4e3995(0x215),(_0x52517b,_0x1a4304)=>{const _0x5863a2=_0x4e3995;if(validateAccess(_0x1a4304,_0x28890c)[_0x5863a2(0x2f7)])restoreBackupFile(_0x52517b);else logger[_0x5863a2(0x2d2)](_0x5863a2(0x1b2));}),_0x391880['on']('get-messages',_0x57b60b=>{const _0x5ba7d4=_0x4e3995;if(validateAccess(_0x57b60b,_0x28890c)[_0x5ba7d4(0x2f7)])getMessages();else logger[_0x5ba7d4(0x2d2)]('Unauthorized\x20attempt\x20to\x20get\x20messages');}),_0x391880['on'](_0x4e3995(0x1df),(_0x51123c,_0x15854c)=>{const _0x2b1cf9=_0x4e3995;if(validateAccess(_0x15854c,_0x28890c)[_0x2b1cf9(0x2f7)])confirmMessage(_0x51123c);else logger[_0x2b1cf9(0x2d2)](_0x2b1cf9(0x186));}),_0x391880['on']('logout',_0x5df7b7=>{const _0x329e93=_0x4e3995;if(validateAccess(_0x5df7b7,_0x28890c)['allow']){if(devices[_0x28890c]['pidRefreshToken'])clearTimeout(devices[_0x28890c]['pidRefreshToken']);if(devices[_0x28890c][_0x329e93(0x2d9)])clearTimeout(devices[_0x28890c][_0x329e93(0x2d9)]);removeSocketListeners(getClient(_0x391880['id'])[_0x329e93(0x31c)]),addBlacklist(_0x28890c),devices[_0x28890c][_0x329e93(0x27a)]=null,devices[_0x28890c][_0x329e93(0x2cd)]=null,devices[_0x28890c][_0x329e93(0x315)]['token']=null,logger['debug']('Logged\x20out\x20user\x20...'+_0x28890c['slice'](-0x8)),io['to'](getClient(_0x391880['id'])[_0x329e93(0x31c)])[_0x329e93(0x328)]('status',{'access':{'allow':![],'reason':_0x329e93(0x31e),'token':null}});}else logger[_0x329e93(0x2d2)](_0x329e93(0x1ce));});}function initializeSocketBot(_0x3334f9){const _0x58e276=_0x55ec46,_0x4a0ef7=getClient(_0x3334f9['id'])[_0x58e276(0x1b1)],_0x3c2fb1=getClient(_0x3334f9['id'])[_0x58e276(0x31c)];_0x3334f9['on'](_0x58e276(0x242),(_0x585fe8,_0x53803e)=>{const _0x3db1e6=_0x58e276;if(validateAccess(_0x53803e,_0x3c2fb1)[_0x3db1e6(0x2f7)]){if(pid[_0x4a0ef7])pid[_0x4a0ef7][_0x3db1e6(0x2b1)]({'function':_0x3db1e6(0x170),'args':_0x585fe8});}else logger[_0x3db1e6(0x2d2)](_0x3db1e6(0x1b8));}),_0x3334f9['on'](_0x58e276(0x2b0),(_0x40f299,_0x223075)=>{const _0x26404c=_0x58e276;if(validateAccess(_0x223075,_0x3c2fb1)[_0x26404c(0x2f7)]){if(pid[_0x4a0ef7])pid[_0x4a0ef7][_0x26404c(0x2b1)]({'function':_0x26404c(0x234),'args':_0x40f299});}else logger[_0x26404c(0x2d2)](_0x26404c(0x1b7));}),_0x3334f9['on'](_0x58e276(0x226),(_0x53311f,_0xda1eb0)=>{const _0xebd679=_0x58e276;if(validateAccess(_0xda1eb0,_0x3c2fb1)[_0xebd679(0x2f7)]){if(pid[_0x4a0ef7])pid[_0x4a0ef7][_0xebd679(0x2b1)]({'function':_0xebd679(0x1d8),'args':_0x53311f});}else logger[_0xebd679(0x2d2)](_0xebd679(0x180));}),_0x3334f9['on'](_0x58e276(0x194),(_0x4039d0,_0x501827)=>{const _0x4821b7=_0x58e276;if(validateAccess(_0x501827,_0x3c2fb1)[_0x4821b7(0x2f7)]){if(pid[_0x4a0ef7])pid[_0x4a0ef7][_0x4821b7(0x2b1)]({'function':'storeConfiguration','args':_0x4039d0});}else logger['full'](_0x4821b7(0x1c4));}),_0x3334f9['on'](_0x58e276(0x358),(_0x1d79f9,_0x431d36)=>{const _0x187bc7=_0x58e276;if(validateAccess(_0x431d36,_0x3c2fb1)['allow']){if(pid[_0x4a0ef7])pid[_0x4a0ef7][_0x187bc7(0x2b1)]({'function':_0x187bc7(0x2ce),'args':_0x1d79f9});}else logger[_0x187bc7(0x2d2)](_0x187bc7(0x2fb));}),_0x3334f9['on'](_0x58e276(0x36e),(_0x5c5b9c,_0x4a6769)=>{const _0x144fb9=_0x58e276;if(validateAccess(_0x4a6769,_0x3c2fb1)['allow']){if(pid[_0x4a0ef7])pid[_0x4a0ef7][_0x144fb9(0x2b1)]({'function':_0x144fb9(0x1f3),'args':_0x5c5b9c});}else logger[_0x144fb9(0x2d2)]('Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration');}),_0x3334f9['on'](_0x58e276(0x23b),_0x49d8e3=>{const _0xbc7588=_0x58e276;if(validateAccess(_0x49d8e3,_0x3c2fb1)[_0xbc7588(0x2f7)]){if(pid[_0x4a0ef7])pid[_0x4a0ef7][_0xbc7588(0x2b1)]({'function':'resetHistory','args':null});}else logger[_0xbc7588(0x2d2)](_0xbc7588(0x313));}),_0x3334f9['on']('get-starting-balances',_0x1f5bba=>{const _0x538853=_0x58e276;if(validateAccess(_0x1f5bba,_0x3c2fb1)[_0x538853(0x2f7)]){if(pid[_0x4a0ef7])pid[_0x4a0ef7][_0x538853(0x2b1)]({'function':'getStartingBalances','args':null});}else logger[_0x538853(0x2d2)](_0x538853(0x1d4));}),_0x3334f9['on']('place-order',(_0x5333f8,_0x13167c)=>{const _0x21c654=_0x58e276;if(validateAccess(_0x13167c,_0x3c2fb1)['allow']){if(pid[_0x4a0ef7])pid[_0x4a0ef7][_0x21c654(0x2b1)]({'function':_0x21c654(0x23f),'args':_0x5333f8});}else logger['full']('Unauthorized\x20attempt\x20to\x20place\x20market\x20order');}),_0x3334f9['on'](_0x58e276(0x2eb),_0x3c489b=>{const _0x46e9ca=_0x58e276;if(validateAccess(_0x3c489b,_0x3c2fb1)['allow']){if(pid[_0x4a0ef7])pid[_0x4a0ef7][_0x46e9ca(0x2b1)]({'function':_0x46e9ca(0x33b),'args':null});}else logger[_0x46e9ca(0x2d2)]('Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins');}),_0x3334f9['on'](_0x58e276(0x169),_0x4f9903=>{const _0xe9c8d8=_0x58e276;if(validateAccess(_0x4f9903,_0x3c2fb1)['allow']){if(pid[_0x4a0ef7])pid[_0x4a0ef7][_0xe9c8d8(0x2b1)]({'function':_0xe9c8d8(0x2ab),'args':null});}else logger[_0xe9c8d8(0x2d2)](_0xe9c8d8(0x273));}),_0x3334f9['on']('update-bb',_0x20be55=>{const _0x48fc01=_0x58e276;if(validateAccess(_0x20be55,_0x3c2fb1)[_0x48fc01(0x2f7)])updateBB(_0x48fc01(0x2b8));else logger['full'](_0x48fc01(0x282));}),_0x3334f9['on'](_0x58e276(0x27e),_0x3ee5d6=>{const _0x208cf4=_0x58e276;if(validateAccess(_0x3ee5d6,_0x3c2fb1)[_0x208cf4(0x2f7)])getMessages();else logger[_0x208cf4(0x2d2)](_0x208cf4(0x217));}),_0x3334f9['on'](_0x58e276(0x1df),(_0x133e20,_0x207e7a)=>{const _0x30b451=_0x58e276;if(validateAccess(_0x207e7a,_0x3c2fb1)['allow'])confirmMessage(_0x133e20);else logger[_0x30b451(0x2d2)](_0x30b451(0x186));}),_0x3334f9['on'](_0x58e276(0x34c),_0x9621e1=>{const _0x5f0a3f=_0x58e276;if(validateAccess(_0x9621e1,_0x3c2fb1)['allow']){if(devices[_0x3c2fb1][_0x5f0a3f(0x371)])clearTimeout(devices[_0x3c2fb1][_0x5f0a3f(0x371)]);if(devices[_0x3c2fb1]['pidExpireLogin'])clearTimeout(devices[_0x3c2fb1][_0x5f0a3f(0x2d9)]);removeSocketListeners(getClient(_0x3334f9['id'])[_0x5f0a3f(0x31c)]),addBlacklist(_0x3c2fb1),devices[_0x3c2fb1]['telegramIpApproval']=null,devices[_0x3c2fb1][_0x5f0a3f(0x2cd)]=null,devices[_0x3c2fb1]['access']['token']=null,logger[_0x5f0a3f(0x235)](_0x5f0a3f(0x190)+_0x3c2fb1['slice'](-0x8)),io['to'](getClient(_0x3334f9['id'])['uuid'])['emit']('status',{'access':{'allow':![],'reason':_0x5f0a3f(0x31e),'token':null}});}else logger['full']('Unauthorized\x20attempt\x20to\x20log\x20out');});}function removeSocketListeners(_0x1949fd){const _0x410656=_0x55ec46;getClientsWithUuid(_0x1949fd)[_0x410656(0x213)](_0x56487f=>{getSocket(_0x56487f['id'])['removeAllListeners']();});}function cleanSettings(){const _0x31f5b2=_0x55ec46;let _0x399c70=settings;return settings[_0x31f5b2(0x185)]&&settings[_0x31f5b2(0x185)]!=''&&(_0x399c70={..._0x399c70,'telegramToken':_0x31f5b2(0x30f)}),settings['bbPassword']&&settings[_0x31f5b2(0x36b)]!=''&&(_0x399c70={..._0x399c70,'bbPassword':_0x31f5b2(0x30f)}),settings[_0x31f5b2(0x24d)]&&settings[_0x31f5b2(0x24d)]!=''&&(_0x399c70={..._0x399c70,'marketcapApi':_0x31f5b2(0x30f)}),(settings[_0x31f5b2(0x36b)]&&settings[_0x31f5b2(0x36b)]=='***'||settings[_0x31f5b2(0x185)]&&settings['telegramToken']==_0x31f5b2(0x165)||settings[_0x31f5b2(0x24d)]&&settings[_0x31f5b2(0x24d)]=='***')&&(_0x399c70={..._0x399c70,'restored':{'password':settings[_0x31f5b2(0x36b)]==_0x31f5b2(0x165),'telegram':settings[_0x31f5b2(0x185)]==_0x31f5b2(0x165),'marketcap':settings[_0x31f5b2(0x24d)]==_0x31f5b2(0x165)}}),_0x399c70;}async function updateBB(_0x169fd1){const _0x3bf97c=_0x55ec46;await backupConfigFiles(),installingUpdate=!![],config[_0x3bf97c(0x213)](_0x5505e8=>{restartBot(_0x5505e8['botID']);});if(_0x169fd1==_0x3bf97c(0x2b8))process[_0x3bf97c(0x2b1)]({'update':!![],'environment':environment},_0x289207=>{});else _0x169fd1==_0x3bf97c(0x2be)&&process[_0x3bf97c(0x2b1)]({'reinstall':!![],'environment':environment},_0xeaae33=>{});}function startBot(_0x57545e,_0x34a392,_0x2e6bb8){const _0x5b7814=_0x55ec46;if(debugging)_0x57545e[_0x5b7814(0x366)]('-d');if(recreate)_0x57545e['push']('-r');let _0x409450=![];const _0x4c8f19=_0x57545e[0x0];_0x34a392={..._0x34a392,'stdio':['inherit',_0x5b7814(0x357),'inherit',_0x5b7814(0x2af)]},pid[_0x4c8f19]=childProcess[_0x5b7814(0x163)](botfile,_0x57545e,_0x34a392),pid[_0x4c8f19]['on'](_0x5b7814(0x2cc),_0x1ae92f=>{const _0x545b25=_0x5b7814;switch(Object['keys'](_0x1ae92f)[0x0]){case'botname':updateBotName(_0x4c8f19,_0x1ae92f[_0x545b25(0x1bc)]);break;case _0x545b25(0x356):updateBotManager();break;case'status':updateStatus(_0x4c8f19,_0x1ae92f[_0x545b25(0x1fa)]);break;case _0x545b25(0x1b4):updateLive(_0x4c8f19,_0x1ae92f[_0x545b25(0x1b4)]);break;case _0x545b25(0x339):updateLive(_0x4c8f19,_0x1ae92f[_0x545b25(0x339)]),io['to'](_0x4c8f19)[_0x545b25(0x328)](_0x545b25(0x1fa),{'access':{'allow':![],'reason':_0x545b25(0x230),'token':null}});break;case _0x545b25(0x164):_0x1ae92f['stop']=='restart'&&restartBot(_0x4c8f19);_0x1ae92f[_0x545b25(0x164)]==_0x545b25(0x26d)&&toggleBot(_0x4c8f19,'disabled',_0x545b25(0x1f8));break;case _0x545b25(0x167):sendTelegramBot(_0x4c8f19,_0x1ae92f[_0x545b25(0x167)]);break;case'telegrammsg':sendTelegramMsg(_0x1ae92f['telegrammsg']);break;case _0x545b25(0x2dc):io['to'](_0x4c8f19)[_0x545b25(0x328)](_0x1ae92f[_0x545b25(0x2dc)],_0x1ae92f[_0x545b25(0x2ad)]);break;}}),pid[_0x4c8f19]['on'](_0x5b7814(0x1f2),function(_0x4e4fb2){if(_0x409450)return;_0x409450=!![],_0x2e6bb8(_0x4e4fb2);}),pid[_0x4c8f19]['on']('exit',async function(_0x4c1705){const _0x20517c=_0x5b7814;if(terminating)return;if(installingUpdate){io[_0x20517c(0x265)]();return;}if(_0x409450)return;_0x409450=!![],_0x2e6bb8(null);const _0x1572a5=dbConfig[_0x20517c(0x318)](_0x20517c(0x30b))[_0x20517c(0x189)]({'botID':_0x4c8f19})[_0x20517c(0x16e)]();_0x1572a5&&(_0x1572a5[_0x20517c(0x1fa)]==_0x20517c(0x1ea)||_0x1572a5[_0x20517c(0x1fa)]==_0x20517c(0x1dc))&&(await sleep(0x3e8),updateLive(_0x4c8f19,_0x20517c(0x1f8)),logger[_0x20517c(0x2d2)]('Restarting\x20'+botRef(_0x4c8f19)),startBot([_0x4c8f19,userID],{'cwd':bbpath},function(_0x370a9a){const _0x51741d=_0x20517c;if(_0x370a9a)logger[_0x51741d(0x2d2)](_0x370a9a);}));});}function stopBot(_0x56fa94){const _0x2099ee=_0x55ec46;getClientsWithBotID(_0x56fa94)[_0x2099ee(0x213)](_0x428997=>{const _0xfb9a0d=_0x2099ee;getSocket(_0x428997['id'])[_0xfb9a0d(0x17d)](!![]),removeClient(_0x428997['id']);}),pid[_0x56fa94]&&(pid[_0x56fa94][_0x2099ee(0x26d)](),pid[_0x56fa94]=null);}function stopAllBots(){terminating=!![];const _0x576de5=getEnabledBots();_0x576de5['forEach'](_0x337f39=>{const _0x98c36a=_0x1dcc;stopBot(_0x337f39[_0x98c36a(0x286)]);});}function restartBot(_0x492cde){const _0x2f3e05=_0x55ec46;if(pid[_0x492cde])pid[_0x492cde][_0x2f3e05(0x26d)]();}function addBot(){const _0x1a7e9f=_0x55ec46;let _0x85688e;for(let _0x35b002=0x1;_0x35b002<0x3e9;_0x35b002++){_0x85688e=_0x35b002['toString']()[_0x1a7e9f(0x36a)](0x3,'0');let _0x3868f1=config[_0x1a7e9f(0x189)](_0x4b61f8=>_0x4b61f8[_0x1a7e9f(0x286)]==_0x85688e);if(!_0x3868f1)break;}if(_0x85688e===_0x1a7e9f(0x1dd)){logger[_0x1a7e9f(0x2d2)](_0x1a7e9f(0x290));return;}logger[_0x1a7e9f(0x2d2)]('Starting\x20new\x20bot\x20|\x20Bot\x20'+_0x85688e),dbConfig[_0x1a7e9f(0x318)](_0x1a7e9f(0x30b))[_0x1a7e9f(0x366)]({'botID':_0x85688e,'botname':_0x1a7e9f(0x1b6)+_0x85688e,'status':_0x1a7e9f(0x1dc),'live':''})[_0x1a7e9f(0x203)](),startBot([_0x85688e,userID],{'cwd':bbpath},function(_0x5d227f){const _0x4351c5=_0x1a7e9f;if(_0x5d227f)logger[_0x4351c5(0x2d2)](_0x5d227f);}),config=getConfiguration(),io['to'](_0x1a7e9f(0x1b0))[_0x1a7e9f(0x328)](_0x1a7e9f(0x30b),config),broadcastToBots('bots',JSON[_0x1a7e9f(0x274)](config));}function deleteBot(_0xc7970e){const _0x2e7678=_0x55ec46;getClientsWithBotID(_0xc7970e)['forEach'](_0x390033=>{const _0x1fa72a=_0x1dcc;getSocket(_0x390033['id'])[_0x1fa72a(0x17d)](!![]),removeClient(_0x390033['id']);}),dbConfig[_0x2e7678(0x318)](_0x2e7678(0x30b))[_0x2e7678(0x34e)]({'botID':_0xc7970e})[_0x2e7678(0x203)](),logger['full'](_0x2e7678(0x367)+_0xc7970e),stopBot(_0xc7970e);try{if(fs['existsSync'](path[_0x2e7678(0x1ac)](configpath,_0x2e7678(0x300)+_0xc7970e+'-config.json')))fs[_0x2e7678(0x21a)](path[_0x2e7678(0x1ac)](configpath,_0x2e7678(0x300)+_0xc7970e+_0x2e7678(0x261)));if(fs[_0x2e7678(0x1b3)](path['join'](configpath,_0x2e7678(0x300)+_0xc7970e+'-events.json')))fs[_0x2e7678(0x21a)](path[_0x2e7678(0x1ac)](configpath,_0x2e7678(0x300)+_0xc7970e+_0x2e7678(0x329)));if(fs[_0x2e7678(0x1b3)](path[_0x2e7678(0x1ac)](configpath,_0x2e7678(0x300)+_0xc7970e+_0x2e7678(0x333))))fs[_0x2e7678(0x21a)](path[_0x2e7678(0x1ac)](configpath,'bot-'+_0xc7970e+_0x2e7678(0x333)));if(fs['existsSync'](path['join'](configpath,_0x2e7678(0x300)+_0xc7970e+_0x2e7678(0x193))))fs[_0x2e7678(0x21a)](path[_0x2e7678(0x1ac)](configpath,'bot-'+_0xc7970e+_0x2e7678(0x193)));}catch(_0x76c979){if(_0x76c979)logger[_0x2e7678(0x2d2)]('Error\x20while\x20deleting\x20config\x20files:\x20',_0x76c979);}config=getConfiguration(),io['to']('botmanager')['emit'](_0x2e7678(0x30b),config),broadcastToBots(_0x2e7678(0x30b),JSON[_0x2e7678(0x274)](config));}function toggleBot(_0x28e31a,_0x3c9414,_0x1af2a2){const _0x2f5bf2=_0x55ec46;dbConfig['get'](_0x2f5bf2(0x30b))[_0x2f5bf2(0x189)]({'botID':_0x28e31a})[_0x2f5bf2(0x17c)]({'status':_0x3c9414})[_0x2f5bf2(0x17c)]({'live':_0x1af2a2})[_0x2f5bf2(0x203)]();const _0x16e269=botRef(_0x28e31a);if(_0x3c9414==_0x2f5bf2(0x1ea)||_0x3c9414==_0x2f5bf2(0x1dc))logger['full'](_0x2f5bf2(0x202)+_0x16e269),startBot([_0x28e31a,userID],{'cwd':bbpath},function(_0x13f9c5){if(_0x13f9c5)logger['full'](_0x13f9c5);});else(_0x3c9414=='disabled'||_0x3c9414=='new-disabled')&&(logger[_0x2f5bf2(0x2d2)](_0x2f5bf2(0x285)+_0x16e269),stopBot(_0x28e31a));config=getConfiguration(),io['to']('botmanager')[_0x2f5bf2(0x328)](_0x2f5bf2(0x30b),config),broadcastToBots(_0x2f5bf2(0x30b),JSON['stringify'](config));}function toggleStatus(_0x973945){const _0x26af66=_0x55ec46;let _0x591762=dbConfig['get']('bots')[_0x26af66(0x189)]({'botID':_0x973945})['value'](),_0x49199a;if(_0x591762[_0x26af66(0x1fa)]==='enabled')_0x49199a='disabled';else{if(_0x591762[_0x26af66(0x1fa)]===_0x26af66(0x1dc))_0x49199a=_0x26af66(0x161);else{if(_0x591762[_0x26af66(0x1fa)]==='new-disabled')_0x49199a=_0x26af66(0x1dc);else{if(_0x591762[_0x26af66(0x1fa)]===_0x26af66(0x1cd))_0x49199a=_0x26af66(0x1ea);}}}return _0x49199a;}function updateStatus(_0x38499e,_0x53a1e6){const _0x28e0d7=_0x55ec46;dbConfig['get'](_0x28e0d7(0x30b))['find']({'botID':_0x38499e})[_0x28e0d7(0x17c)]({'status':_0x53a1e6})['write'](),config=getConfiguration(),io['to'](_0x28e0d7(0x1b0))[_0x28e0d7(0x328)](_0x28e0d7(0x30b),config),broadcastToBots('bots',JSON[_0x28e0d7(0x274)](config));}function updateLive(_0x5a0e1f,_0x3712d7){const _0x6c410a=_0x55ec46;dbConfig[_0x6c410a(0x318)](_0x6c410a(0x30b))[_0x6c410a(0x189)]({'botID':_0x5a0e1f})[_0x6c410a(0x17c)]({'live':_0x3712d7})[_0x6c410a(0x203)](),config=getConfiguration(),io['to'](_0x6c410a(0x1b0))['emit'](_0x6c410a(0x30b),config),broadcastToBots('bots',JSON[_0x6c410a(0x274)](config));}function updateBotName(_0xe0c50b,_0x27d26e){const _0x4bacdc=_0x55ec46;dbConfig[_0x4bacdc(0x318)](_0x4bacdc(0x30b))[_0x4bacdc(0x189)]({'botID':_0xe0c50b})['assign']({'botname':_0x27d26e})[_0x4bacdc(0x203)](),config=getConfiguration(),io['to'](_0x4bacdc(0x1b0))[_0x4bacdc(0x328)](_0x4bacdc(0x30b),config),broadcastToBots(_0x4bacdc(0x30b),JSON[_0x4bacdc(0x274)](config));}function updateBotManager(){const _0x101af6=_0x55ec46;config=getConfiguration(),io['to']('botmanager')[_0x101af6(0x328)](_0x101af6(0x30b),config),broadcastToBots('bots',JSON[_0x101af6(0x274)](config));}function toggleBotMode(_0x130041){const _0x589921=_0x55ec46;if(pid[_0x130041])pid[_0x130041][_0x589921(0x2b1)]({'function':'toggleBotMode','args':null});else{const _0x5aabcf=configpath+_0x589921(0x300)+_0x130041+'-config.json',_0x21dbd5=fs[_0x589921(0x317)](_0x5aabcf),_0x514a7c=JSON[_0x589921(0x30d)](_0x21dbd5),_0x2e03f9=_0x514a7c['bot'][0x0][_0x589921(0x2c6)];_0x514a7c[_0x589921(0x1b1)][0x0][_0x589921(0x2c6)]=!_0x2e03f9;const _0x257706=JSON[_0x589921(0x274)](_0x514a7c,null,0x2);fs[_0x589921(0x2a6)](_0x5aabcf,_0x257706),config=getConfiguration(),io['to'](_0x589921(0x1b0))[_0x589921(0x328)](_0x589921(0x30b),config),broadcastToBots('bots',JSON[_0x589921(0x274)](config));}}function validateTelegram(_0x4cd6c4){const _0x3be5bb=_0x55ec46;if(_0x4cd6c4[_0x3be5bb(0x35a)][_0x3be5bb(0x323)]!=settings[_0x3be5bb(0x1cc)]&&'@'+_0x4cd6c4[_0x3be5bb(0x35a)][_0x3be5bb(0x323)]!=settings[_0x3be5bb(0x1cc)]||_0x4cd6c4[_0x3be5bb(0x2a7)]['id']!=settings[_0x3be5bb(0x2a4)])return sendTelegram(_0x4cd6c4[_0x3be5bb(0x2a7)]['id'],_0x3be5bb(0x16a),{'parse_mode':_0x3be5bb(0x236)}),![];return!![];}function botRef(_0x4035a5){const _0x2907d6=_0x55ec46,_0x1ef05f=getBotAttributes(_0x4035a5),_0x5ce63a=_0x1ef05f[_0x2907d6(0x35d)]?_0x1ef05f[_0x2907d6(0x1bc)]:_0x2907d6(0x1b6)+_0x4035a5;return _0x5ce63a;}async function initTelegram(){const _0x208505=_0x55ec46;tgBot&&(await tgBot[_0x208505(0x164)](),await sleep(0x7d0));tgBot=new Telegraf(settings['telegramToken']);let _0x14e2af=_0x208505(0x276);_0x14e2af+='\x0a',_0x14e2af+=_0x208505(0x321),_0x14e2af+=_0x208505(0x1a8),_0x14e2af+=_0x208505(0x2c2),_0x14e2af+=_0x208505(0x17e),_0x14e2af+=_0x208505(0x324),_0x14e2af+=_0x208505(0x24f),_0x14e2af+=_0x208505(0x304),_0x14e2af+=_0x208505(0x2bc),_0x14e2af+=_0x208505(0x1cf),_0x14e2af+='/metrics\x20-\x20show\x20bot\x20performance\x0a',_0x14e2af+=_0x208505(0x2e4),_0x14e2af+=_0x208505(0x1c2),_0x14e2af+=_0x208505(0x377),_0x14e2af+='/update\x20-\x20update\x20Balance\x20Bot\x0a',_0x14e2af+='/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a',_0x14e2af+=_0x208505(0x198);let _0x2614e5='Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a';_0x2614e5+='\x0a',_0x2614e5+=_0x14e2af,tgBot[_0x208505(0x212)]((_0x4117ed,_0x11b9b1)=>{const _0x3cf090=_0x208505;logger[_0x3cf090(0x199)](getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20Telegram\x20error\x20occured'),logger[_0x3cf090(0x235)](_0x3cf090(0x1e9),_0x4117ed);}),tgBot['use'](async(_0x180994,_0x3e205f)=>{const _0x565adf=_0x208505;if(settings[_0x565adf(0x2a4)]||_0x180994[_0x565adf(0x2b8)][_0x565adf(0x2cc)][_0x565adf(0x30a)]!=_0x565adf(0x1d3)){if(!validateTelegram(_0x180994))return;}_0x3e205f();}),tgBot[_0x208505(0x181)]('start',async _0x3e4ea0=>{const _0x254974=_0x208505;if(_0x3e4ea0['from'][_0x254974(0x323)]==settings[_0x254974(0x1cc)]||'@'+_0x3e4ea0[_0x254974(0x35a)]['username']==settings[_0x254974(0x1cc)]){if(!settings[_0x254974(0x2a4)])updateSetting(_0x254974(0x2a4),_0x3e4ea0['chat']['id']);else{if(!validateTelegram(_0x3e4ea0))return;}}else{if(!validateTelegram(_0x3e4ea0))return;}updateSetting(_0x254974(0x1f7),!![]),await sendTelegram(_0x3e4ea0[_0x254974(0x2a7)]['id'],_0x2614e5);}),tgBot['command']('enable',async _0x3fa6c4=>{const _0x1075b5=_0x208505;updateSetting(_0x1075b5(0x1f7),!![]),await sendTelegram(_0x3fa6c4[_0x1075b5(0x2a7)]['id'],'Notifications\x20enabled');}),tgBot['command'](_0x208505(0x20d),async _0x41d641=>{const _0x472562=_0x208505;await sendTelegram(_0x41d641['chat']['id'],_0x472562(0x258)),updateSetting(_0x472562(0x1f7),![]);}),tgBot[_0x208505(0x181)](_0x208505(0x20f),async _0x47a77a=>{const _0x284427=_0x208505,_0x5ebeed=Markup[_0x284427(0x283)]([Markup[_0x284427(0x270)]['callback'](_0x284427(0x302),_0x284427(0x260)),Markup[_0x284427(0x270)][_0x284427(0x2a3)]('Alerts','config_alerts'),Markup[_0x284427(0x270)]['callback'](_0x284427(0x2e9),_0x284427(0x22c))]);_0x47a77a[_0x284427(0x238)](_0x284427(0x346),_0x5ebeed);}),tgBot[_0x208505(0x368)](_0x208505(0x260),async _0x391660=>{const _0x54155d=_0x208505;_0x391660[_0x54155d(0x1ae)](),updateSetting('telegramEvents',_0x54155d(0x218)),updateSetting(_0x54155d(0x1f7),!![]),await sendTelegram(_0x391660[_0x54155d(0x2a7)]['id'],'Ok,\x20will\x20send\x20order\x20notifications\x20only');}),tgBot[_0x208505(0x368)]('config_alerts',async _0x2809b8=>{const _0x5a64d7=_0x208505;_0x2809b8[_0x5a64d7(0x1ae)](),updateSetting('telegramEvents',_0x5a64d7(0x241)),updateSetting('telegramEnabled',!![]),await sendTelegram(_0x2809b8[_0x5a64d7(0x2a7)]['id'],_0x5a64d7(0x1e3));}),tgBot[_0x208505(0x368)](_0x208505(0x22c),async _0x51d507=>{const _0x5f0487=_0x208505;_0x51d507[_0x5f0487(0x1ae)](),updateSetting(_0x5f0487(0x29c),_0x5f0487(0x31f)),updateSetting(_0x5f0487(0x1f7),!![]),await sendTelegram(_0x51d507[_0x5f0487(0x2a7)]['id'],_0x5f0487(0x252));}),tgBot['command']('status',async _0x2835dd=>{const _0x284ccf=_0x208505,_0x18eb7e=getBotsWithMode();let _0x40b9f7=_0x284ccf(0x25c);config[_0x284ccf(0x213)](_0x1f5a22=>{const _0x173d93=_0x284ccf,_0x4da4c4=_0x18eb7e[_0x173d93(0x189)](_0x364d59=>_0x364d59[_0x173d93(0x286)]==_0x1f5a22[_0x173d93(0x286)])[_0x173d93(0x2d0)];_0x40b9f7+=_0x173d93(0x1b6)+_0x1f5a22[_0x173d93(0x286)]+':\x20'+_0x1f5a22['status']+_0x173d93(0x34b)+_0x4da4c4+_0x173d93(0x34b)+_0x1f5a22['live']+'\x0a';}),_0x40b9f7+='\x0a',_0x40b9f7+=_0x284ccf(0x228),_0x40b9f7+=!settings[_0x284ccf(0x1f7)]?_0x284ccf(0x26b):'Notifications\x20enabled\x0a',_0x40b9f7+=settings[_0x284ccf(0x1f7)]?settings[_0x284ccf(0x29c)]==_0x284ccf(0x31f)?_0x284ccf(0x18a):_0x284ccf(0x1fe)+settings[_0x284ccf(0x29c)]+_0x284ccf(0x331):'',await sendTelegram(_0x2835dd[_0x284ccf(0x2a7)]['id'],_0x40b9f7,{'parse_mode':'HTML'});}),tgBot[_0x208505(0x181)](_0x208505(0x277),async _0x37a01b=>{const _0x561622=_0x208505,_0x1518fd=getEnabledBots();if(_0x1518fd[_0x561622(0x192)]==0x0)await sendTelegram(_0x37a01b[_0x561622(0x2a7)]['id'],_0x561622(0x16b));else{if(_0x1518fd[_0x561622(0x192)]>0x1)_0x1518fd[_0x561622(0x366)]({'botID':_0x561622(0x31f)});let _0x1528e3=[],_0x2e4a17=[];const _0x126143=_0x1518fd[_0x561622(0x192)]%0x4==0x0||_0x1518fd['length']%0x4==0x3||_0x1518fd[_0x561622(0x192)]%0x3==0x1?0x4:0x3;let _0x24e729=0x0;_0x1518fd['forEach']((_0x5e5db3,_0x568454)=>{const _0x967b77=_0x561622;if(_0x568454%_0x126143==0x0)_0x2e4a17=[];_0x2e4a17['push'](Markup[_0x967b77(0x270)][_0x967b77(0x2a3)](_0x5e5db3[_0x967b77(0x286)]=='all'?_0x967b77(0x2d5):botRef(_0x5e5db3[_0x967b77(0x286)]),_0x967b77(0x320)+_0x5e5db3[_0x967b77(0x286)])),_0x568454%_0x126143==0x0&&(_0x1528e3[_0x24e729]=_0x2e4a17,_0x24e729++);});const _0x53599a=Markup[_0x561622(0x283)](_0x1528e3);_0x37a01b[_0x561622(0x238)](_0x561622(0x257),_0x53599a);}}),tgBot[_0x208505(0x368)](/restart_(.+)/,async _0x18f64a=>{const _0x5940b5=_0x208505,_0x51f173=_0x18f64a[_0x5940b5(0x2e5)][0x1];_0x18f64a[_0x5940b5(0x1ae)](),_0x51f173=='all'?config[_0x5940b5(0x213)](_0x37f580=>{const _0x55b7dc=_0x5940b5;restartBot(_0x37f580[_0x55b7dc(0x286)]);}):restartBot(_0x51f173);}),tgBot[_0x208505(0x181)]('on',async _0xb8e81a=>{const _0x15ce7e=_0x208505,_0x2a1c66=getDisabledBots();if(_0x2a1c66[_0x15ce7e(0x192)]==0x0)await sendTelegram(_0xb8e81a['chat']['id'],_0x15ce7e(0x29d));else{if(_0x2a1c66['length']>0x1)_0x2a1c66[_0x15ce7e(0x366)]({'botID':_0x15ce7e(0x31f)});let _0x1f0158=[],_0x4175e6=[];const _0x1408ee=_0x2a1c66['length']%0x4==0x0||_0x2a1c66[_0x15ce7e(0x192)]%0x4==0x3||_0x2a1c66[_0x15ce7e(0x192)]%0x3==0x1?0x4:0x3;let _0x540f98=0x0;_0x2a1c66[_0x15ce7e(0x213)]((_0x3bd3f4,_0x10239c)=>{const _0x1a68c0=_0x15ce7e;if(_0x10239c%_0x1408ee==0x0)_0x4175e6=[];_0x4175e6[_0x1a68c0(0x366)](Markup[_0x1a68c0(0x270)][_0x1a68c0(0x2a3)](_0x3bd3f4[_0x1a68c0(0x286)]==_0x1a68c0(0x31f)?'All\x20bots':botRef(_0x3bd3f4[_0x1a68c0(0x286)]),_0x1a68c0(0x33a)+_0x3bd3f4['botID'])),_0x10239c%_0x1408ee==0x0&&(_0x1f0158[_0x540f98]=_0x4175e6,_0x540f98++);});const _0x23c29f=Markup['inlineKeyboard'](_0x1f0158);_0xb8e81a[_0x15ce7e(0x238)](_0x15ce7e(0x354),_0x23c29f);}}),tgBot[_0x208505(0x368)](/on_(.+)/,async _0x24ba21=>{const _0x279e77=_0x208505,_0x19936f=_0x24ba21['match'][0x1];_0x24ba21[_0x279e77(0x1ae)]();if(_0x19936f==_0x279e77(0x31f)){const _0x262ccc=getDisabledBots();await sendTelegram(_0x24ba21['chat']['id'],'Bot\x20Mgr\x20>\x20Starting\x20all\x20bots'),_0x262ccc[_0x279e77(0x213)](_0x1f308e=>{const _0x25d480=_0x279e77;if(_0x1f308e[_0x25d480(0x286)]!=_0x25d480(0x31f))toggleBot(_0x1f308e[_0x25d480(0x286)],toggleStatus(_0x1f308e[_0x25d480(0x286)]),_0x25d480(0x1f8));});}else await sendTelegram(_0x24ba21[_0x279e77(0x2a7)]['id'],'Bot\x20Mgr\x20>\x20Starting\x20'+botRef(_0x19936f)),toggleBot(_0x19936f,toggleStatus(_0x19936f),_0x279e77(0x1f8));}),tgBot['command'](_0x208505(0x32d),async _0x22e783=>{const _0x4d1927=_0x208505,_0x25507a=getEnabledBots();if(_0x25507a['length']==0x0)await sendTelegram(_0x22e783['chat']['id'],_0x4d1927(0x16b));else{if(_0x25507a['length']>0x1)_0x25507a[_0x4d1927(0x366)]({'botID':_0x4d1927(0x31f)});let _0x533861=[],_0x4fa178=[];const _0x4d9afa=_0x25507a[_0x4d1927(0x192)]%0x4==0x0||_0x25507a[_0x4d1927(0x192)]%0x4==0x3||_0x25507a['length']%0x3==0x1?0x4:0x3;let _0x2bacb9=0x0;_0x25507a[_0x4d1927(0x213)]((_0x38a558,_0x34b070)=>{const _0x39eb55=_0x4d1927;if(_0x34b070%_0x4d9afa==0x0)_0x4fa178=[];_0x4fa178[_0x39eb55(0x366)](Markup[_0x39eb55(0x270)]['callback'](_0x38a558[_0x39eb55(0x286)]==_0x39eb55(0x31f)?_0x39eb55(0x2d5):botRef(_0x38a558[_0x39eb55(0x286)]),'off_'+_0x38a558['botID'])),_0x34b070%_0x4d9afa==0x0&&(_0x533861[_0x2bacb9]=_0x4fa178,_0x2bacb9++);});const _0x43cbab=Markup['inlineKeyboard'](_0x533861);_0x22e783[_0x4d1927(0x238)](_0x4d1927(0x2f4),_0x43cbab);}}),tgBot[_0x208505(0x368)](/off_(.+)/,async _0x569d92=>{const _0x53ebc6=_0x208505,_0x456437=_0x569d92[_0x53ebc6(0x2e5)][0x1];_0x569d92['editMessageReplyMarkup']();if(_0x456437==_0x53ebc6(0x31f)){const _0x3774a3=getEnabledBots();await sendTelegram(_0x569d92[_0x53ebc6(0x2a7)]['id'],_0x53ebc6(0x2a0)),_0x3774a3[_0x53ebc6(0x213)](_0x367a40=>{const _0x33eb23=_0x53ebc6;if(_0x367a40[_0x33eb23(0x286)]!=_0x33eb23(0x31f))toggleBot(_0x367a40[_0x33eb23(0x286)],toggleStatus(_0x367a40['botID']),_0x33eb23(0x1f8));});}else await sendTelegram(_0x569d92[_0x53ebc6(0x2a7)]['id'],_0x53ebc6(0x25f)+botRef(_0x456437)),toggleBot(_0x456437,toggleStatus(_0x456437),_0x53ebc6(0x1f8));}),tgBot[_0x208505(0x181)](_0x208505(0x211),async _0xfe789a=>{const _0x1aed79=_0x208505,_0x4254f9=getEnabledBots();if(_0x4254f9['length']==0x0)await sendTelegram(_0xfe789a[_0x1aed79(0x2a7)]['id'],_0x1aed79(0x16b));else{if(_0x4254f9[_0x1aed79(0x192)]>0x1){let _0xdc02bf=[],_0x429fd1=[];const _0x2caae7=_0x4254f9[_0x1aed79(0x192)]%0x4==0x0||_0x4254f9[_0x1aed79(0x192)]%0x4==0x3||_0x4254f9['length']%0x3==0x1?0x4:0x3;let _0x47e7f9=0x0;_0x4254f9[_0x1aed79(0x213)]((_0x5675ae,_0x557407)=>{const _0x13ccf3=_0x1aed79;if(_0x557407%_0x2caae7==0x0)_0x429fd1=[];_0x429fd1['push'](Markup[_0x13ccf3(0x270)][_0x13ccf3(0x2a3)](botRef(_0x5675ae['botID']),_0x13ccf3(0x2bd)+_0x5675ae[_0x13ccf3(0x286)])),_0x557407%_0x2caae7==0x0&&(_0xdc02bf[_0x47e7f9]=_0x429fd1,_0x47e7f9++);});const _0x4030f8=Markup[_0x1aed79(0x283)](_0xdc02bf);_0xfe789a[_0x1aed79(0x238)](_0x1aed79(0x305),_0x4030f8);}else{const _0x484434=_0x4254f9[0x0][_0x1aed79(0x286)];if(pid[_0x484434])pid[_0x484434][_0x1aed79(0x2b1)]({'function':_0x1aed79(0x31d),'args':null});}}}),tgBot[_0x208505(0x368)](/metrics_(.+)/,async _0x30b009=>{const _0x1d9d92=_0x208505,_0x17905c=_0x30b009[_0x1d9d92(0x2e5)][0x1];_0x30b009[_0x1d9d92(0x1ae)]();if(pid[_0x17905c])pid[_0x17905c]['send']({'function':_0x1d9d92(0x31d),'args':null});}),tgBot[_0x208505(0x181)]('portfolio',async _0xf65d85=>{const _0x5c8205=_0x208505,_0x272e0d=getEnabledBots();if(_0x272e0d[_0x5c8205(0x192)]==0x0)await sendTelegram(_0xf65d85[_0x5c8205(0x2a7)]['id'],_0x5c8205(0x16b));else{if(_0x272e0d[_0x5c8205(0x192)]>0x1){let _0x31a13a=[],_0x742292=[];const _0x22f1f1=_0x272e0d[_0x5c8205(0x192)]%0x4==0x0||_0x272e0d[_0x5c8205(0x192)]%0x4==0x3||_0x272e0d[_0x5c8205(0x192)]%0x3==0x1?0x4:0x3;let _0x507034=0x0;_0x272e0d['forEach']((_0x599eba,_0x38bcf0)=>{const _0x5568f1=_0x5c8205;if(_0x38bcf0%_0x22f1f1==0x0)_0x742292=[];_0x742292[_0x5568f1(0x366)](Markup['button'][_0x5568f1(0x2a3)](botRef(_0x599eba[_0x5568f1(0x286)]),_0x5568f1(0x191)+_0x599eba[_0x5568f1(0x286)])),_0x38bcf0%_0x22f1f1==0x0&&(_0x31a13a[_0x507034]=_0x742292,_0x507034++);});const _0x2190f2=Markup[_0x5c8205(0x283)](_0x31a13a);_0xf65d85[_0x5c8205(0x238)](_0x5c8205(0x2f5),_0x2190f2);}else{const _0x558ac1=_0x272e0d[0x0][_0x5c8205(0x286)];if(pid[_0x558ac1])pid[_0x558ac1][_0x5c8205(0x2b1)]({'function':'sendPortfolioTelegram','args':null});}}}),tgBot['action'](/portfolio_(.+)/,async _0x37e04a=>{const _0x3300b2=_0x208505,_0x2a5cdf=_0x37e04a[_0x3300b2(0x2e5)][0x1];_0x37e04a[_0x3300b2(0x1ae)]();if(pid[_0x2a5cdf])pid[_0x2a5cdf][_0x3300b2(0x2b1)]({'function':_0x3300b2(0x1a7),'args':null});}),tgBot[_0x208505(0x181)](_0x208505(0x2c8),async _0x415e25=>{const _0x4ac0f1=_0x208505,_0xec90e=_0x4ac0f1(0x2c8);await zipFiles(_0xec90e);const _0x193736=zippath+(_0xec90e+_0x4ac0f1(0x21f));_0x415e25[_0x4ac0f1(0x2ff)]({'source':_0x193736})[_0x4ac0f1(0x330)](()=>{})[_0x4ac0f1(0x212)](_0x5b7ab2=>logger[_0x4ac0f1(0x235)]('Error\x20sending\x20'+_0xec90e+_0x4ac0f1(0x1b9),_0x5b7ab2));}),tgBot[_0x208505(0x181)](_0x208505(0x206),async _0x23d038=>{const _0x1a86d2=_0x208505,_0x525f6d=_0x1a86d2(0x206);await backupConfigFiles(),await zipFiles(_0x525f6d);const _0x138d01=zippath+(_0x525f6d+_0x1a86d2(0x21f));_0x23d038[_0x1a86d2(0x2ff)]({'source':_0x138d01})['then'](()=>{})[_0x1a86d2(0x212)](_0x493138=>logger[_0x1a86d2(0x235)](_0x1a86d2(0x224)+_0x525f6d+'\x20files\x20over\x20Telegram:',_0x493138));}),tgBot[_0x208505(0x181)](_0x208505(0x2b8),async _0x2c6547=>{const _0x1a0f23=_0x208505;await getMessages();if(!updateAvailable)await sendTelegram(_0x2c6547[_0x1a0f23(0x2a7)]['id'],'Your\x20installation\x20is\x20already\x20up\x20to\x20date');else{if(!validInstallation)await sendTelegram(_0x2c6547[_0x1a0f23(0x2a7)]['id'],_0x1a0f23(0x196));else{const _0x1051a=Markup[_0x1a0f23(0x283)]([Markup[_0x1a0f23(0x270)]['callback'](_0x1a0f23(0x2f3),_0x1a0f23(0x2c5)),Markup[_0x1a0f23(0x270)][_0x1a0f23(0x2a3)]('No',_0x1a0f23(0x2ca))]);_0x2c6547['reply'](_0x1a0f23(0x310),_0x1051a);}}}),tgBot[_0x208505(0x368)](/update_(.+)/,async _0x31794f=>{const _0x5245bb=_0x208505,_0x8909c0=_0x31794f[_0x5245bb(0x2e5)][0x1];_0x31794f['editMessageReplyMarkup'](),_0x8909c0==_0x5245bb(0x1d0)&&(await sendTelegram(_0x31794f[_0x5245bb(0x2a7)]['id'],_0x5245bb(0x34f)),updateBB(_0x5245bb(0x2b8))),_0x8909c0=='no'&&await sendTelegram(_0x31794f['chat']['id'],_0x5245bb(0x361));}),tgBot[_0x208505(0x181)]('reinstall',async _0x36e747=>{const _0x11bb0d=_0x208505;if(!validInstallation)await sendTelegram(_0x36e747['chat']['id'],_0x11bb0d(0x362));else{const _0x2dd7e3=Markup[_0x11bb0d(0x283)]([Markup['button']['callback'](_0x11bb0d(0x2f3),'reinstall_yes'),Markup[_0x11bb0d(0x270)][_0x11bb0d(0x2a3)]('No',_0x11bb0d(0x184))]);_0x36e747['reply'](_0x11bb0d(0x18e),_0x2dd7e3);}}),tgBot[_0x208505(0x368)](/reinstall_(.+)/,async _0x2160dc=>{const _0x5b55e6=_0x208505,_0x3ed48d=_0x2160dc[_0x5b55e6(0x2e5)][0x1];_0x2160dc['editMessageReplyMarkup'](),_0x3ed48d==_0x5b55e6(0x1d0)&&(await sendTelegram(_0x2160dc[_0x5b55e6(0x2a7)]['id'],_0x5b55e6(0x19d)),updateBB(_0x5b55e6(0x2be))),_0x3ed48d=='no'&&await sendTelegram(_0x2160dc[_0x5b55e6(0x2a7)]['id'],_0x5b55e6(0x27f));}),tgBot[_0x208505(0x181)](_0x208505(0x355),async _0x30ef8e=>{const _0x10b6bd=_0x208505,_0x3410f8=getBotsWithMode();if(_0x3410f8[_0x10b6bd(0x192)]==0x0)await sendTelegram(_0x30ef8e[_0x10b6bd(0x2a7)]['id'],'No\x20bots\x20running\x20right\x20now');else{let _0x2e1f1b=[],_0x41fd78=[];const _0x115bf8=0x2;let _0x13af4c=0x0;_0x3410f8[_0x10b6bd(0x213)]((_0xdcd8f6,_0x161591)=>{const _0xcdc270=_0x10b6bd;if(_0x161591%_0x115bf8==0x0)_0x41fd78=[];_0x41fd78[_0xcdc270(0x366)](Markup[_0xcdc270(0x270)][_0xcdc270(0x2a3)](botRef(_0xdcd8f6['botID'])+'\x20('+_0xdcd8f6['mode']+')',_0xcdc270(0x2b2)+_0xdcd8f6['botID'])),_0x161591%_0x115bf8==0x0&&(_0x2e1f1b[_0x13af4c]=_0x41fd78,_0x13af4c++);});const _0x19324e=Markup[_0x10b6bd(0x283)](_0x2e1f1b);_0x30ef8e['reply'](_0x10b6bd(0x22b),_0x19324e);}}),tgBot[_0x208505(0x368)](/toggle_(.+)/,async _0x1809be=>{const _0x4d4443=_0x208505,_0x30be69=_0x1809be['match'][0x1];_0x1809be['editMessageReplyMarkup']();const _0x235993=getBotsWithMode(),_0x1ff79c=_0x235993[_0x4d4443(0x189)](_0x3fab69=>_0x3fab69['botID']==_0x30be69),_0x595328=_0x1ff79c[_0x4d4443(0x2d0)]==_0x4d4443(0x291)?_0x4d4443(0x1d6):_0x4d4443(0x291);await sendTelegram(_0x1809be['chat']['id'],_0x4d4443(0x225)+botRef(_0x1ff79c['botID'])+_0x4d4443(0x369)+_0x595328+'\x20mode'),toggleBotMode(_0x30be69);}),tgBot[_0x208505(0x181)](_0x208505(0x231),async _0x27c630=>{const _0x2e01a5=_0x208505;let _0x36b505='';config[_0x2e01a5(0x213)](_0x18cee0=>{const _0x556df7=_0x2e01a5;_0x36b505+=_0x556df7(0x1b6)+_0x18cee0[_0x556df7(0x286)]+':\x20'+_0x18cee0['botname']+'\x0a';}),await sendTelegram(_0x27c630[_0x2e01a5(0x2a7)]['id'],_0x36b505,{'parse_mode':_0x2e01a5(0x236)});}),tgBot[_0x208505(0x181)](_0x208505(0x23d),async _0x2c9068=>{await sendTelegram(_0x2c9068['chat']['id'],_0x14e2af);}),process[_0x208505(0x27c)](_0x208505(0x1a2),()=>tgBot[_0x208505(0x164)](_0x208505(0x1a2))),process['once'](_0x208505(0x1c9),()=>tgBot[_0x208505(0x164)](_0x208505(0x1c9))),tgBot[_0x208505(0x36c)]();}function disableTelegram(){const _0x24050e=_0x55ec46;tgBot&&tgBot[_0x24050e(0x164)]();}async function sendTelegram(_0x184b05,_0x41e684,_0x537565){const _0x1ad5cb=_0x55ec46;_0x537565={..._0x537565,'disable_web_page_preview':!![]};try{await tgBot[_0x1ad5cb(0x167)]['sendMessage'](_0x184b05,_0x41e684,_0x537565);}catch(_0xed18fc){logger[_0x1ad5cb(0x235)](_0x1ad5cb(0x22e),_0xed18fc);}}async function sendTelegramBot(_0x385cbb,_0x568f81){const _0xed9bc9=_0x55ec46;if(settings['telegramEnabled']){if(settings['telegramEvents']==_0xed9bc9(0x31f)||(_0x568f81[_0xed9bc9(0x2a1)]=='error'||_0x568f81['type']=='warning'||_0x568f81[_0xed9bc9(0x2a1)]==_0xed9bc9(0x174))&&settings[_0xed9bc9(0x29c)]==_0xed9bc9(0x241)||_0x568f81[_0xed9bc9(0x2a1)]==_0xed9bc9(0x297)&&settings['telegramEvents']==_0xed9bc9(0x218)){if(tgBot&&settings[_0xed9bc9(0x2a4)]){if(_0x568f81[_0xed9bc9(0x35d)])await sendTelegram(settings[_0xed9bc9(0x2a4)],_0x568f81['botname']+_0xed9bc9(0x36f)+_0x568f81[_0xed9bc9(0x2b7)]);else await sendTelegram(settings[_0xed9bc9(0x2a4)],_0xed9bc9(0x1b6)+_0x385cbb+_0xed9bc9(0x36f)+_0x568f81[_0xed9bc9(0x2b7)]);}}}}async function sendTelegramMsg(_0x79de1a,_0x4930b1=_0x55ec46(0x236)){const _0x3ac567=_0x55ec46;return tgBot&&settings[_0x3ac567(0x2a4)]?(await sendTelegram(settings[_0x3ac567(0x2a4)],_0x79de1a,{'parse_mode':_0x4930b1}),!![]):![];}function getDeviceWithIp(_0x3be934){const _0x1fe8b6=_0x55ec46;return devices[_0x1fe8b6(0x189)](_0x31a646=>_0x31a646['ip']===_0x3be934);}async function temporaryAccess2FA(_0x471352,_0x21b476){const _0x4b6556=_0x55ec46;let _0x278f85=new Date(),_0x55e327=![];if(lastIpApproval){if(_0x278f85-lastIpApproval<0x1388)_0x55e327=!![];}lastIpApproval=new Date();if(_0x55e327)return;if(tgBot&&settings['telegramChatId']){const _0x29e255=uuidRandom();tmpStorage[_0x29e255]={'uuid':_0x471352,'externalip':_0x21b476};const _0x512f91=Markup[_0x4b6556(0x283)]([Markup[_0x4b6556(0x270)][_0x4b6556(0x2a3)]('5\x20min',_0x4b6556(0x248)+_0x29e255),Markup[_0x4b6556(0x270)][_0x4b6556(0x2a3)](_0x4b6556(0x275),'tempaccess_15_'+_0x29e255),Markup[_0x4b6556(0x270)][_0x4b6556(0x2a3)]('30\x20min',_0x4b6556(0x29b)+_0x29e255),Markup[_0x4b6556(0x270)][_0x4b6556(0x2a3)]('reject','tempaccess_reject_'+_0x29e255)]);await sendTelegram(settings[_0x4b6556(0x2a4)],_0x4b6556(0x200)+normalizeIP(_0x21b476)[_0x4b6556(0x341)]+'\x20?',_0x512f91),tgBot[_0x4b6556(0x368)](/tempaccess_(.+)_(.+)/,async _0x264def=>{const _0x563f9c=_0x4b6556,_0x684b00=_0x264def['match'][0x1],_0x17ca42=_0x264def['match'][0x2],{uuid:_0x148034,externalip:_0x1850cc}=tmpStorage[_0x17ca42];delete tmpStorage[_0x17ca42],_0x264def[_0x563f9c(0x1ae)](),devices[_0x148034][_0x563f9c(0x27a)]={'clientip':_0x1850cc,'timestamp':new Date()[_0x563f9c(0x1ff)](),'expiry':_0x684b00},_0x684b00!='reject'?(await sendTelegram(_0x264def['chat']['id'],_0x563f9c(0x281)+_0x684b00+'\x20minutes',{'parse_mode':_0x563f9c(0x236)}),io['to'](_0x148034)[_0x563f9c(0x328)](_0x563f9c(0x1fa),{'access':{'allow':![],'reason':_0x563f9c(0x230),'token':null}})):(await sendTelegram(_0x264def[_0x563f9c(0x2a7)]['id'],_0x563f9c(0x36d)),io['to'](_0x148034)['emit']('status',{'access':{'allow':![],'reason':_0x563f9c(0x1d5),'token':null}}));});}}async function loginAccess2FA(_0x118145,_0x55ea01){const _0x2fde36=_0x55ec46;if(tgBot&&settings['telegramChatId']){const _0x7c8a6c=uuidRandom();tmpStorage[_0x7c8a6c]={'uuid':_0x118145,'externalip':_0x55ea01};const _0xc64bc6=Markup[_0x2fde36(0x283)]([Markup[_0x2fde36(0x270)][_0x2fde36(0x2a3)](_0x2fde36(0x22a),_0x2fde36(0x21c)+loginExpiry+'_'+_0x7c8a6c),Markup[_0x2fde36(0x270)][_0x2fde36(0x2a3)]('reject',_0x2fde36(0x2f0)+_0x7c8a6c)]);await sendTelegram(settings['telegramChatId'],_0x2fde36(0x32e)+normalizeIP(_0x55ea01)[_0x2fde36(0x341)]+'\x20?',_0xc64bc6),tgBot[_0x2fde36(0x368)](/login2fa_(.+)_(.+)/,async _0xe5c6fb=>{const _0x1dfe27=_0x2fde36,_0x3ffa0b=_0xe5c6fb['match'][0x1],_0x3fbf66=_0xe5c6fb[_0x1dfe27(0x2e5)][0x2],{uuid:_0x164343,externalip:_0x3e6d57}=tmpStorage[_0x3fbf66];delete tmpStorage[_0x3fbf66],_0xe5c6fb[_0x1dfe27(0x1ae)](),devices[_0x164343][_0x1dfe27(0x2cd)]={'clientip':_0x3e6d57,'timestamp':new Date()[_0x1dfe27(0x1ff)](),'expiry':_0x3ffa0b},_0x3ffa0b!='reject'?(await sendTelegram(_0xe5c6fb[_0x1dfe27(0x2a7)]['id'],_0x1dfe27(0x2a2),{'parse_mode':_0x1dfe27(0x236)}),io['to'](_0x164343)[_0x1dfe27(0x328)](_0x1dfe27(0x1fa),{'access':{'allow':![],'reason':_0x1dfe27(0x230),'token':null}})):(await sendTelegram(_0xe5c6fb['chat']['id'],_0x1dfe27(0x2f1)),io['to'](_0x164343)[_0x1dfe27(0x328)]('status',{'access':{'allow':![],'reason':'2FA\x20login\x20rejected','token':null}}));});}}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x30bd05=_0x55ec46;return dbConfig['get'](_0x30bd05(0x30b))[_0x30bd05(0x33d)](_0x30bd05(0x286))['filter']({'status':_0x30bd05(0x1ea)})[_0x30bd05(0x16e)]()||[];}function getDisabledBots(){const _0x14aa93=_0x55ec46;return dbConfig[_0x14aa93(0x318)]('bots')[_0x14aa93(0x33d)](_0x14aa93(0x286))[_0x14aa93(0x208)]({'status':_0x14aa93(0x1cd)})[_0x14aa93(0x16e)]()||[];}function getBotAttributes(_0x26f1df){const _0x1d85f8=_0x55ec46;let _0x2b8040={};const _0x28d3fe=configpath+_0x1d85f8(0x300)+_0x26f1df+_0x1d85f8(0x261),_0x35fb58=fs[_0x1d85f8(0x1b3)](_0x28d3fe);if(_0x35fb58){const _0x1eab2e=fs['readFileSync'](_0x28d3fe);try{const _0x537ee3=JSON[_0x1d85f8(0x30d)](_0x1eab2e),_0x1dfb9e=_0x537ee3?_0x537ee3[_0x1d85f8(0x1b1)][0x0]['headless']:![];_0x2b8040[_0x1d85f8(0x2d0)]=_0x1dfb9e?_0x1d85f8(0x291):_0x1d85f8(0x1d6),_0x2b8040[_0x1d85f8(0x1bc)]=_0x537ee3?_0x537ee3[_0x1d85f8(0x1b1)][0x0][_0x1d85f8(0x1bc)]:_0x1d85f8(0x1b6)+_0x26f1df,_0x2b8040[_0x1d85f8(0x35d)]=_0x537ee3?_0x537ee3[_0x1d85f8(0x1b1)][0x0][_0x1d85f8(0x35d)]:![];}catch(_0x518cd3){_0x2b8040[_0x1d85f8(0x2d0)]=_0x1d85f8(0x1d6),_0x2b8040[_0x1d85f8(0x1bc)]=_0x1d85f8(0x1b6)+_0x26f1df,_0x2b8040[_0x1d85f8(0x35d)]=![];}}else _0x2b8040[_0x1d85f8(0x2d0)]='manual',_0x2b8040[_0x1d85f8(0x1bc)]=_0x1d85f8(0x1b6)+_0x26f1df,_0x2b8040['showname']=![];return _0x2b8040;}function getBotsWithMode(){const _0x373083=_0x55ec46,_0x1bee68=dbConfig[_0x373083(0x318)](_0x373083(0x30b))[_0x373083(0x33d)]('botID')['value']()||[];return _0x1bee68[_0x373083(0x213)](_0x2e6237=>{const _0x3ca460=_0x373083;let _0x2aa7f5=getBotAttributes(_0x2e6237[_0x3ca460(0x286)]);_0x2e6237[_0x3ca460(0x2d0)]=_0x2aa7f5[_0x3ca460(0x2d0)];}),_0x1bee68;}function getBotExchanges(){const _0x5f0d71=_0x55ec46;let _0x507ce9=[];const _0x515954=dbConfig[_0x5f0d71(0x318)]('bots')['sortBy'](_0x5f0d71(0x286))[_0x5f0d71(0x16e)]()||[];_0x515954[_0x5f0d71(0x213)](_0x5a50b9=>{const _0x2f830a=_0x5f0d71;if(_0x5a50b9[_0x2f830a(0x1fa)]==_0x2f830a(0x1ea)){const _0x4dd1ca=configpath+_0x2f830a(0x300)+_0x5a50b9[_0x2f830a(0x286)]+'-config.json',_0x2ed4cd=fs[_0x2f830a(0x1b3)](_0x4dd1ca);let _0x5c7f65;if(_0x2ed4cd){const _0x5d9013=fs[_0x2f830a(0x317)](_0x4dd1ca);try{const _0x19c41e=JSON[_0x2f830a(0x30d)](_0x5d9013);_0x5c7f65=_0x19c41e?_0x19c41e[_0x2f830a(0x1b1)][0x0][_0x2f830a(0x350)]:null;}catch(_0x17d254){}}if(_0x5c7f65)_0x507ce9[_0x2f830a(0x366)](_0x5c7f65);}});const _0x4a65a2=[...new Set(_0x507ce9)][_0x5f0d71(0x195)]();return _0x4a65a2;}async function initUser(){const _0x19649f=_0x55ec46;if(!settings[_0x19649f(0x296)]){const _0x31815b=uuidRandom();mixpanel[_0x19649f(0x2a8)](_0x31815b),updateSetting('userid',_0x31815b);}}async function initSecure(){const _0x55cdef=_0x55ec46;let _0x5a8ba3=getSecure();if(!_0x5a8ba3['hasOwnProperty'](_0x55cdef(0x2e3))){let _0x11cf0d=await generateKeys();_0x5a8ba3['publicKey']=_0x11cf0d[_0x55cdef(0x28c)],_0x5a8ba3[_0x55cdef(0x246)]=_0x11cf0d[_0x55cdef(0x246)],_0x5a8ba3[_0x55cdef(0x2e3)]=crypto[_0x55cdef(0x1fb)](0x20)[_0x55cdef(0x1e5)]('hex');;storeSecure(_0x5a8ba3);}}function getSettings(){const _0x2f4b73=_0x55ec46;return dbSettings[_0x2f4b73(0x318)](_0x2f4b73(0x2ec))[_0x2f4b73(0x16e)]()||{};}function getSecure(){const _0x569d9c=_0x55ec46;return dbSecure['get'](_0x569d9c(0x1aa))[_0x569d9c(0x16e)]()||{};}function getBlacklist(){const _0x30a5da=_0x55ec46;return dbSecure['get'](_0x30a5da(0x2d3))[_0x30a5da(0x16e)]()||[];}function broadcastToBots(_0x15e7a9,_0x934fdf){const _0x242116=_0x55ec46;config[_0x242116(0x213)](_0x52533c=>{const _0x525d2e=_0x242116;if(_0x52533c['status']==_0x525d2e(0x1ea)&&_0x52533c[_0x525d2e(0x1b4)]==_0x525d2e(0x220)||_0x52533c[_0x525d2e(0x1fa)]=='new'&&_0x52533c[_0x525d2e(0x1b4)]==_0x525d2e(0x220)){if(pid[_0x52533c['botID']])pid[_0x52533c['botID']][_0x525d2e(0x2b1)]({[_0x15e7a9]:_0x934fdf});}});}async function storeSettings(_0x519a01,_0x509223=![]){const _0x24f53b=_0x55ec46;_0x519a01={...settings,..._0x519a01};if(_0x509223&&_0x519a01[_0x24f53b(0x36b)]!=_0x24f53b(0x30f)&&_0x519a01['bbPassword']!=_0x24f53b(0x165)&&_0x519a01[_0x24f53b(0x36b)]!=''){const _0x49cf93=decryptRSA(secure['privateKey'],_0x519a01['bbPassword'])[_0x24f53b(0x1c8)](_0x24f53b(0x1a1))[0x0],_0x20f696=bcrypt['hashSync'](_0x49cf93,saltRounds);_0x519a01={..._0x519a01,'bbPassword':_0x20f696};}if(_0x509223&&_0x519a01[_0x24f53b(0x185)]!='************'&&_0x519a01[_0x24f53b(0x185)]!=_0x24f53b(0x165)&&_0x519a01['telegramToken']!=''){const _0x471137=decryptRSA(secure[_0x24f53b(0x246)],_0x519a01[_0x24f53b(0x185)])['split'](_0x24f53b(0x1a1))[0x0];_0x519a01={..._0x519a01,'telegramToken':_0x471137};}if(_0x509223&&_0x519a01['marketcapApi']!=_0x24f53b(0x30f)&&_0x519a01['marketcapApi']!='***'&&_0x519a01[_0x24f53b(0x24d)]!=''){const _0x409081=decryptRSA(secure[_0x24f53b(0x246)],_0x519a01['marketcapApi'])[_0x24f53b(0x1c8)](_0x24f53b(0x1a1))[0x0];_0x519a01={..._0x519a01,'marketcapApi':_0x409081};}const _0x429f8e=_0x519a01['telegramToken']!=_0x24f53b(0x30f)&&_0x519a01[_0x24f53b(0x185)]!=settings['telegramToken']||_0x519a01[_0x24f53b(0x1cc)]!=settings['telegramUsername'],_0x3dabbe=_0x519a01[_0x24f53b(0x185)]==''||_0x519a01[_0x24f53b(0x1cc)]=='',_0x2d53c3=_0x519a01[_0x24f53b(0x24d)]&&_0x519a01['marketcapApi']!=_0x24f53b(0x30f)&&_0x519a01['marketcapApi']!=settings[_0x24f53b(0x24d)];_0x429f8e&&(_0x519a01[_0x24f53b(0x2a4)]=null,_0x519a01[_0x24f53b(0x29c)]='all');for(const [_0x5db412,_0x38b0fc]of Object[_0x24f53b(0x271)](_0x519a01)){if(_0x5db412==_0x24f53b(0x185)&&_0x38b0fc==_0x24f53b(0x30f)){_0x519a01['telegramToken']=settings['telegramToken'];continue;};if(_0x5db412==_0x24f53b(0x36b)&&_0x38b0fc==_0x24f53b(0x30f)){_0x519a01[_0x24f53b(0x36b)]=settings['bbPassword'];continue;};if(_0x5db412==_0x24f53b(0x24d)&&_0x38b0fc==_0x24f53b(0x30f)){_0x519a01[_0x24f53b(0x24d)]=settings[_0x24f53b(0x24d)];continue;};dbSettings['set'](_0x24f53b(0x1d7)+_0x5db412,_0x38b0fc)[_0x24f53b(0x203)]();}settings=_0x519a01,io['to']('botmanager')[_0x24f53b(0x328)](_0x24f53b(0x2ec),cleanSettings()),broadcastToBots('timeshift',settings[_0x24f53b(0x312)]),broadcastToBots(_0x24f53b(0x2ee),settings[_0x24f53b(0x2ee)]),broadcastToBots(_0x24f53b(0x24d),settings[_0x24f53b(0x24d)]);if(_0x429f8e&&!_0x3dabbe)initTelegram();_0x429f8e&&_0x3dabbe&&(updateSetting('telegramChatId',null),disableTelegram()),getAllClients()[_0x24f53b(0x213)](_0x10e5b3=>{const _0xad4a01=_0x24f53b;getSocket(_0x10e5b3['id'])[_0xad4a01(0x328)]('status',{'access':{'allow':![],'reason':_0xad4a01(0x230),'token':null}});}),_0x2d53c3&&(await sleep(0xbb8),testMarketcapApi(_0x519a01[_0x24f53b(0x24d)]));}async function testMarketcapApi(_0x18d1b8){const _0x462f1c=_0x55ec46,_0x112672=[_0x462f1c(0x21b),_0x462f1c(0x19e)];try{await axios['get'](_0x462f1c(0x1d9),{'headers':{'X-CMC_PRO_API_KEY':_0x18d1b8},'params':{'symbol':_0x112672[_0x462f1c(0x1e5)]()}});}catch(_0x137df1){_0x137df1[_0x462f1c(0x1e5)]()['includes'](_0x462f1c(0x349))?(io['to'](_0x462f1c(0x1b0))['emit'](_0x462f1c(0x21d),_0x462f1c(0x255)),logger[_0x462f1c(0x2d2)](_0x462f1c(0x255))):(io['to'](_0x462f1c(0x1b0))[_0x462f1c(0x328)](_0x462f1c(0x21d),_0x462f1c(0x351)),logger['full'](_0x462f1c(0x351)),logger[_0x462f1c(0x235)](_0x462f1c(0x2aa),_0x137df1[_0x462f1c(0x1e5)]()+_0x462f1c(0x2fc)+_0x137df1[_0x462f1c(0x376)]));return;}logger[_0x462f1c(0x235)](_0x462f1c(0x319));}function updateSetting(_0xf39e06,_0x2dce8d){const _0x284f7b=_0x55ec46;dbSettings[_0x284f7b(0x182)](_0x284f7b(0x1d7)+_0xf39e06,_0x2dce8d)[_0x284f7b(0x203)](),settings=getSettings(),io['to'](_0x284f7b(0x1b0))[_0x284f7b(0x328)](_0x284f7b(0x2ec),cleanSettings());}function storeSecure(_0x13902f){const _0x5b7178=_0x55ec46;dbSecure[_0x5b7178(0x318)]('secure')['push'](_0x13902f)['write'](),secure=_0x13902f;}function addBlacklist(_0x2e7cd6){const _0x10122d=_0x55ec46;cleanBlacklist();let _0x1835b5;devices[_0x2e7cd6][_0x10122d(0x27a)]?_0x1835b5=Math['max'](devices[_0x2e7cd6][_0x10122d(0x27a)][_0x10122d(0x262)],loginExpiry):_0x1835b5=loginExpiry,dbSecure[_0x10122d(0x318)]('blacklist')[_0x10122d(0x366)]({'expiry':new Date()[_0x10122d(0x1ff)]()+_0x1835b5*0x3c*0x3e8,'token':devices[_0x2e7cd6][_0x10122d(0x315)]['token']})[_0x10122d(0x203)](),blacklist=dbSecure[_0x10122d(0x318)](_0x10122d(0x2d3))[_0x10122d(0x16e)]();}function cleanBlacklist(){const _0x106990=_0x55ec46;let _0x32d9fe=dbSecure[_0x106990(0x318)](_0x106990(0x2d3))[_0x106990(0x308)]()[_0x106990(0x16e)](),_0x1e23c5=new Date()['getTime']();_0x32d9fe['forEach'](_0x52491e=>{const _0x4eece7=_0x106990;_0x52491e[_0x4eece7(0x262)]<_0x1e23c5&&dbSecure[_0x4eece7(0x318)](_0x4eece7(0x2d3))[_0x4eece7(0x34e)]({'expiry':_0x52491e[_0x4eece7(0x262)]})[_0x4eece7(0x203)]();});}function initStates(){const _0x424410=_0x55ec46;let _0x517161=getConfiguration();_0x517161[_0x424410(0x213)](_0x4948ca=>{_0x4948ca['live']='stopped';}),storeConfiguration(_0x517161);}async function generateKeys(){const _0x54ccb9=_0x55ec46,_0x1f12f5=forge[_0x54ccb9(0x365)][_0x54ccb9(0x256)][_0x54ccb9(0x345)]({'bits':0x1000,'e':0x10001}),_0x491ba1=forge[_0x54ccb9(0x365)]['privateKeyToPem'](_0x1f12f5[_0x54ccb9(0x246)]),_0x14c6b6=forge[_0x54ccb9(0x365)][_0x54ccb9(0x2ac)](_0x1f12f5[_0x54ccb9(0x28c)]);return{'privateKey':_0x491ba1,'publicKey':_0x14c6b6};}async function oneTimeMigration(){const _0x576cfd=_0x55ec46;let _0x250d22=getSettings(),_0x4590eb=![];!_0x250d22[_0x576cfd(0x173)]('lastmsgtelegram')&&(_0x250d22[_0x576cfd(0x1ed)]=0x0,_0x4590eb=!![]);!_0x250d22['hasOwnProperty'](_0x576cfd(0x1f5))&&(_0x250d22['lastmsgemitted']=0x0,_0x4590eb=!![]);!_0x250d22['hasOwnProperty']('latestversion')&&(_0x250d22[_0x576cfd(0x27b)]=_0x576cfd(0x175),_0x4590eb=!![]);!_0x250d22[_0x576cfd(0x173)](_0x576cfd(0x2ee))&&(_0x250d22[_0x576cfd(0x2ee)]=![],_0x4590eb=!![]);!_0x250d22['hasOwnProperty'](_0x576cfd(0x24d))&&(_0x250d22[_0x576cfd(0x24d)]='',_0x4590eb=!![]);if(_0x4590eb)storeSettings(_0x250d22);try{fs['readdirSync'](configbackuppath,{'withFileTypes':!![]})['forEach'](_0x616a1a=>{const _0x22bd97=_0x576cfd;if(!_0x616a1a[_0x22bd97(0x35b)]()){if(!_0x616a1a[_0x22bd97(0x2f8)]['startsWith']('backup-full@'))fs[_0x22bd97(0x21a)](configbackuppath+_0x616a1a['name']);}else fs[_0x22bd97(0x19b)](configbackuppath+_0x616a1a['name'],{'recursive':!![]});});}catch(_0x23d8ed){logger[_0x576cfd(0x235)](_0x576cfd(0x1bd),_0x23d8ed);}}function storeConfiguration(_0x35a75a){const _0x124633=_0x55ec46;dbConfig[_0x124633(0x318)](_0x124633(0x30b))['remove']()[_0x124633(0x203)](),dbConfig['get'](_0x124633(0x30b))[_0x124633(0x366)](..._0x35a75a)['write'](),config=_0x35a75a;}async function resetPassword(){const _0x2f7cd4=_0x55ec46;if(tgBot&&settings[_0x2f7cd4(0x2a4)]){const _0x38b07a=Markup[_0x2f7cd4(0x283)]([Markup[_0x2f7cd4(0x270)][_0x2f7cd4(0x2a3)]('yes',_0x2f7cd4(0x280)),Markup['button'][_0x2f7cd4(0x2a3)]('no',_0x2f7cd4(0x1f0))]);await sendTelegram(settings[_0x2f7cd4(0x2a4)],'Do\x20you\x20want\x20to\x20reset\x20your\x20password?',_0x38b07a),tgBot[_0x2f7cd4(0x368)](/resetpw_(.+)/,async _0x48796d=>{const _0x1a46c9=_0x2f7cd4,_0x10b178=_0x48796d[_0x1a46c9(0x2e5)][0x1];_0x48796d[_0x1a46c9(0x1ae)]();if(_0x10b178!='no'){const _0x400d2e=0xf,_0x1175bc=_0x1a46c9(0x287),_0x4e774b=Array[_0x1a46c9(0x35a)](crypto['randomFillSync'](new Uint32Array(_0x400d2e)))[_0x1a46c9(0x337)](_0x4b773d=>_0x1175bc[_0x4b773d%_0x1175bc[_0x1a46c9(0x192)]])[_0x1a46c9(0x1ac)](''),_0x2aa969=bcrypt[_0x1a46c9(0x34d)](_0x4e774b,saltRounds);storeSettings({'bbPassword':_0x2aa969}),await sendTelegram(_0x48796d['chat']['id'],'Password\x20has\x20been\x20reset\x20to:\x20'+_0x4e774b,{'parse_mode':_0x1a46c9(0x236)});}else await sendTelegram(_0x48796d[_0x1a46c9(0x2a7)]['id'],_0x1a46c9(0x24a));});}}async function confirmRestore(_0x14f4b7,_0x55de7b){const _0x1b853a=_0x55ec46;io['to'](_0x1b853a(0x1b0))[_0x1b853a(0x328)]('notification',_0x1b853a(0x2fa),'success');if(tgBot&&settings[_0x1b853a(0x2a4)]){const _0x46ff82=uuidRandom();tmpStorage[_0x46ff82]={'path':_0x14f4b7,'filename':_0x55de7b};const _0x39f1fd=Markup['inlineKeyboard']([Markup['button'][_0x1b853a(0x2a3)](_0x1b853a(0x1d0),_0x1b853a(0x294)+_0x46ff82),Markup[_0x1b853a(0x270)]['callback']('no',_0x1b853a(0x295)+_0x46ff82)]);await sendTelegram(settings[_0x1b853a(0x2a4)],'Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)',_0x39f1fd),tgBot[_0x1b853a(0x368)](/restore_(.+)_(.+)/,async _0x5010dd=>{const _0x135a77=_0x1b853a,_0xd4d694=_0x5010dd[_0x135a77(0x2e5)][0x1],_0x3c7579=_0x5010dd[_0x135a77(0x2e5)][0x2],{path:_0x43c1d2,filename:_0x4dd778}=tmpStorage[_0x3c7579];delete tmpStorage[_0x3c7579],_0x5010dd[_0x135a77(0x1ae)](),_0xd4d694==_0x135a77(0x1d0)?(logger[_0x135a77(0x235)](_0x135a77(0x335)),await sendTelegram(_0x5010dd[_0x135a77(0x2a7)]['id'],_0x135a77(0x2c7),{'parse_mode':_0x135a77(0x236)}),unzipFile(_0x43c1d2,_0x4dd778)):(logger[_0x135a77(0x235)](_0x135a77(0x31a)),await sendTelegram(_0x5010dd[_0x135a77(0x2a7)]['id'],'Restore\x20process\x20aborted'));});}}function getServerTime(){const _0x3f0105=_0x55ec46,_0x494e7d=new Date();return _0x494e7d[_0x3f0105(0x1c5)]()+'/'+(_0x494e7d[_0x3f0105(0x268)]()+0x1)[_0x3f0105(0x1e5)]()['padStart'](0x2,'0')+'/'+_0x494e7d[_0x3f0105(0x245)]()[_0x3f0105(0x1e5)]()[_0x3f0105(0x36a)](0x2,'0')+'\x20'+_0x494e7d[_0x3f0105(0x2b3)]()['toString']()[_0x3f0105(0x36a)](0x2,'0')+':'+_0x494e7d[_0x3f0105(0x227)]()[_0x3f0105(0x1e5)]()[_0x3f0105(0x36a)](0x2,'0')+':'+_0x494e7d[_0x3f0105(0x2d4)]()[_0x3f0105(0x1e5)]()[_0x3f0105(0x36a)](0x2,'0');}function _0x1dcc(_0x12375a,_0x106030){const _0x514a0b=_0xb18f();return _0x1dcc=function(_0x2e77d5,_0x17c7cb){_0x2e77d5=_0x2e77d5-0x160;let _0xb18fac=_0x514a0b[_0x2e77d5];return _0xb18fac;},_0x1dcc(_0x12375a,_0x106030);}function getTimeStamp(){const _0x327e9d=_0x55ec46,_0x4d01a6=shiftedTime();return _0x4d01a6[_0x327e9d(0x1c5)]()+'/'+(_0x4d01a6[_0x327e9d(0x268)]()+0x1)['toString']()[_0x327e9d(0x36a)](0x2,'0')+'/'+_0x4d01a6['getDate']()['toString']()[_0x327e9d(0x36a)](0x2,'0')+'\x20'+_0x4d01a6[_0x327e9d(0x2b3)]()[_0x327e9d(0x1e5)]()['padStart'](0x2,'0')+':'+_0x4d01a6[_0x327e9d(0x227)]()[_0x327e9d(0x1e5)]()[_0x327e9d(0x36a)](0x2,'0')+':'+_0x4d01a6['getSeconds']()[_0x327e9d(0x1e5)]()['padStart'](0x2,'0');}function getCleanTimeStamp(){const _0x31da59=_0x55ec46,_0x2d2470=shiftedTime();return _0x2d2470[_0x31da59(0x1c5)]()+(_0x2d2470[_0x31da59(0x268)]()+0x1)[_0x31da59(0x1e5)]()[_0x31da59(0x36a)](0x2,'0')+_0x2d2470[_0x31da59(0x245)]()[_0x31da59(0x1e5)]()[_0x31da59(0x36a)](0x2,'0')+'-'+_0x2d2470['getHours']()['toString']()[_0x31da59(0x36a)](0x2,'0')+_0x2d2470[_0x31da59(0x227)]()[_0x31da59(0x1e5)]()[_0x31da59(0x36a)](0x2,'0')+_0x2d2470[_0x31da59(0x2d4)]()[_0x31da59(0x1e5)]()[_0x31da59(0x36a)](0x2,'0');}function shiftedTime(){const _0x373060=_0x55ec46,_0x2a8fff=new Date();let _0x387341=_0x2a8fff;if(settings['timeshift']&&settings[_0x373060(0x312)]!==0x0)_0x387341=fns[_0x373060(0x2bb)](_0x2a8fff,{'hours':settings[_0x373060(0x312)]});return _0x387341;}async function startScheduler(){const _0x50f49a=_0x55ec46,_0x331d4d=new Date()[_0x50f49a(0x378)](),_0x4724e9=shiftedTime()[_0x50f49a(0x2b3)]();_0x4724e9==0x4&&backupConfigFiles(),_0x4724e9==0x0&&(rotateLogFiles(),logger['debug'](_0x50f49a(0x332)),logger[_0x50f49a(0x235)](_0x50f49a(0x204)+serverversion+_0x50f49a(0x2d8)+(environment==_0x50f49a(0x1bf)?'(staging)':'')),logger[_0x50f49a(0x235)](_0x50f49a(0x332))),_0x331d4d%0x6==0x0&&triggerAnalytics(),_0x331d4d%0x6==0x0&&getMessages(),await sleep(schedulerInterval),startScheduler();}async function restoreBackupFile(_0x60171f){const _0x3e9b2b=_0x55ec46;logger[_0x3e9b2b(0x235)](_0x3e9b2b(0x1db)+_0x60171f);const _0x4d5dd=getBotsWithMode();_0x4d5dd[_0x3e9b2b(0x192)]>0x0?confirmRestore(configbackuppath,_0x60171f):unzipFile(configbackuppath,_0x60171f);}async function getBackupFiles(_0x5cd2f9=null){const _0x142565=_0x55ec46;let _0xfa2092=[],_0x3e1d1d=fs['readdirSync'](configbackuppath,{'withFileTypes':!![]});_0x3e1d1d['sort']((_0x1541ba,_0x4ac33f)=>_0x1541ba[_0x142565(0x2f8)]<_0x4ac33f[_0x142565(0x2f8)]?0x1:_0x4ac33f[_0x142565(0x2f8)]<_0x1541ba[_0x142565(0x2f8)]?-0x1:0x0),_0x3e1d1d[_0x142565(0x213)](_0x3cb5e3=>{const _0x1d0180=_0x142565;if(!_0x3cb5e3['isDirectory']()&&_0x3cb5e3[_0x1d0180(0x2f8)][_0x1d0180(0x28a)](_0x1d0180(0x24b))&&_0x3cb5e3[_0x1d0180(0x2f8)][_0x1d0180(0x2da)]('.zip')){const _0x47cccf=formatDate(fs['statSync'](configbackuppath+_0x3cb5e3[_0x1d0180(0x2f8)])[_0x1d0180(0x306)]);_0xfa2092['push']({'name':_0x3cb5e3[_0x1d0180(0x2f8)],'mtime':_0x47cccf});}});if(_0x5cd2f9)io['to'](_0x5cd2f9)['emit']('backup-files',_0xfa2092);else return _0xfa2092;}async function backupConfigFiles(){const _0x125180=_0x55ec46;await zipFiles(_0x125180(0x347));const _0x332ee9=getCleanTimeStamp();fs['copyFileSync'](zippath+'backup-full.zip',configbackuppath+('backup-full@'+_0x332ee9+_0x125180(0x21f)));let _0x21f2ac=fs['readdirSync'](configbackuppath,{'withFileTypes':!![]});_0x21f2ac[_0x125180(0x195)]((_0x3294e4,_0x4aac01)=>_0x3294e4[_0x125180(0x2f8)]<_0x4aac01['name']?0x1:_0x4aac01[_0x125180(0x2f8)]<_0x3294e4[_0x125180(0x2f8)]?-0x1:0x0),_0x21f2ac[_0x125180(0x192)]>maxBackups&&fs[_0x125180(0x21a)](configbackuppath+_0x21f2ac[_0x21f2ac[_0x125180(0x192)]-0x1]['name']);}function rotateLogFiles(){const _0x56d105=_0x55ec46,_0x28087d=fs[_0x56d105(0x364)](logspath+_0x56d105(0x22f)),_0x137cea=_0x28087d['size']/0x400;if(_0x137cea>0x64){let _0x2d5939=fs[_0x56d105(0x188)](logspath,{'withFileTypes':!![]});_0x2d5939['sort']((_0x40af6b,_0x3db3fb)=>_0x40af6b['name']<_0x3db3fb[_0x56d105(0x2f8)]?0x1:_0x3db3fb[_0x56d105(0x2f8)]<_0x40af6b[_0x56d105(0x2f8)]?-0x1:0x0),_0x2d5939['forEach'](_0x310149=>{const _0x1dbf5d=_0x56d105;if(_0x310149[_0x1dbf5d(0x2f8)]==_0x1dbf5d(0x2fd))fs[_0x1dbf5d(0x309)](logspath+_0x310149[_0x1dbf5d(0x2f8)],logspath+_0x1dbf5d(0x2c4));if(_0x310149[_0x1dbf5d(0x2f8)]==_0x1dbf5d(0x28e))fs[_0x1dbf5d(0x309)](logspath+_0x310149[_0x1dbf5d(0x2f8)],logspath+_0x1dbf5d(0x2fd));_0x310149[_0x1dbf5d(0x2f8)]==_0x1dbf5d(0x22f)&&(fs[_0x1dbf5d(0x309)](logspath+_0x310149[_0x1dbf5d(0x2f8)],logspath+_0x1dbf5d(0x28e)),fs[_0x1dbf5d(0x2a6)](logspath+_0x310149['name'],''));});}}async function zipFiles(_0x2bd3c4){const _0x2a8656=_0x55ec46;let _0x4866d0;if(_0x2bd3c4==_0x2a8656(0x2c8))_0x4866d0=logspath;if(_0x2bd3c4==_0x2a8656(0x206))_0x4866d0=configpath;if(_0x2bd3c4=='backup-full')_0x4866d0=configpath;let _0x5a7b55=fs[_0x2a8656(0x188)](_0x4866d0,{'withFileTypes':!![]});const _0x2e9a56=new JSZip();_0x5a7b55[_0x2a8656(0x213)](_0x2f66ef=>{const _0x49225c=_0x2a8656;if(!_0x2f66ef[_0x49225c(0x35b)]()){let _0x22b868=fs['readFileSync'](_0x4866d0+_0x2f66ef[_0x49225c(0x2f8)]);if(_0x2bd3c4==_0x49225c(0x206)){const _0x46a9a7=/^bot-[0-9]{3}-config.json$/,_0xc22681=_0x46a9a7['test'](_0x2f66ef[_0x49225c(0x2f8)]);if(_0xc22681){const _0xe05dba=JSON['parse'](_0x22b868);if(_0xe05dba['bot'][0x0]){_0xe05dba[_0x49225c(0x1b1)][0x0][_0x49225c(0x24c)]='***',_0xe05dba['bot'][0x0][_0x49225c(0x254)]=_0x49225c(0x165);if(_0xe05dba[_0x49225c(0x1b1)][0x0][_0x49225c(0x342)])_0xe05dba[_0x49225c(0x1b1)][0x0][_0x49225c(0x342)]=_0x49225c(0x165);}_0x22b868=JSON['stringify'](_0xe05dba,null,0x2);}if(_0x2f66ef[_0x49225c(0x2f8)]==_0x49225c(0x17a)){const _0x475ca1=JSON[_0x49225c(0x30d)](_0x22b868);if(_0x475ca1[_0x49225c(0x2ec)][_0x49225c(0x171)])_0x475ca1['settings'][_0x49225c(0x171)]=![];if(_0x475ca1[_0x49225c(0x2ec)]['bbPassword'])_0x475ca1[_0x49225c(0x2ec)][_0x49225c(0x36b)]=_0x49225c(0x165);if(_0x475ca1[_0x49225c(0x2ec)]['telegramToken'])_0x475ca1['settings']['telegramToken']=_0x49225c(0x165);if(_0x475ca1['settings'][_0x49225c(0x2a4)])_0x475ca1[_0x49225c(0x2ec)]['telegramChatId']=null;if(_0x475ca1['settings']['marketcapApi'])_0x475ca1[_0x49225c(0x2ec)][_0x49225c(0x24d)]='***';_0x22b868=JSON[_0x49225c(0x274)](_0x475ca1,null,0x2);}if(_0x2f66ef[_0x49225c(0x2f8)]!=_0x49225c(0x379))_0x2e9a56[_0x49225c(0x359)](_0x2f66ef[_0x49225c(0x2f8)],_0x22b868);}else _0x2e9a56['file'](_0x2f66ef[_0x49225c(0x2f8)],_0x22b868);}});const _0x25ed8b=await _0x2e9a56[_0x2a8656(0x1c7)]({'type':_0x2a8656(0x1c6),'base64':![],'compression':_0x2a8656(0x21e)});fs[_0x2a8656(0x2a6)](zippath+(_0x2bd3c4+_0x2a8656(0x21f)),_0x25ed8b,_0x2a8656(0x214));}async function unzipFile(_0x87d66f,_0x48764f){const _0x162c3e=_0x55ec46;fs[_0x162c3e(0x188)](configpath,{'withFileTypes':!![]})['forEach'](_0x3ccbb4=>{const _0x44abf9=_0x162c3e;if(!_0x3ccbb4['isDirectory']())fs[_0x44abf9(0x19b)](configpath+_0x3ccbb4['name']);});const _0x18b056=fs['readFileSync'](_0x87d66f+_0x48764f,_0x162c3e(0x214)),_0x403778=await JSZip['loadAsync'](_0x18b056,{'base64':![],'checkCRC32':!![]});for(const _0x3af7d4 of Object[_0x162c3e(0x33f)](_0x403778['files'])){const _0x4d3c11=_0x403778[_0x162c3e(0x20e)][_0x3af7d4],_0x469a38=await _0x4d3c11[_0x162c3e(0x348)](_0x162c3e(0x1c6));fs['writeFileSync'](configpath+_0x4d3c11[_0x162c3e(0x2f8)],_0x469a38);}fs[_0x162c3e(0x188)](temppath,{'withFileTypes':!![]})[_0x162c3e(0x213)](_0x195245=>{const _0x5c4db3=_0x162c3e;if(!_0x195245[_0x5c4db3(0x35b)]())fs['rmSync'](temppath+_0x195245[_0x5c4db3(0x2f8)]);}),logger[_0x162c3e(0x235)]('Backup\x20file\x20unzipped\x20and\x20stored'),process['send']({'restore':!![]},_0x40cd3b=>{});}async function getPublicIp(){const _0x3c650d=_0x55ec46;try{const _0x1fac9c=await axios[_0x3c650d(0x318)](_0x3c650d(0x326));publicip=_0x1fac9c['data']['ip'];}catch(_0x44d19d){}}async function triggerAnalytics(){const _0x3cf8f4=_0x55ec46;if(!publicip)await getPublicIp();const _0x58e0bb=getBotsWithMode();let _0x47e584=0x0;_0x58e0bb[_0x3cf8f4(0x213)](_0x39237a=>{const _0x4173af=_0x3cf8f4;if(_0x39237a[_0x4173af(0x1fa)]===_0x4173af(0x1ea))_0x47e584++;});const _0x1cd757=getBotExchanges();mixpanel[_0x3cf8f4(0x26e)](_0x3cf8f4(0x293),{'distinct_id':settings[_0x3cf8f4(0x296)],'ip':publicip,'version':serverversion,'numbots':_0x58e0bb[_0x3cf8f4(0x192)],'numbotsenabled':_0x47e584,'exchanges':_0x1cd757,'environment':environment});}async function getMessages(){const _0x757fc4=_0x55ec46,_0x356da7=_0x757fc4(0x1ee),_0x2599a4=new GraphQLClient(_0x356da7),_0x2294a7={'authorization':_0x757fc4(0x219)},_0x327e71=serverversion[_0x757fc4(0x1c8)]('.'),_0x14f427=_0x327e71[0x0]+'.'+_0x327e71[0x1],_0x4084f7=Math[_0x757fc4(0x2f6)](settings[_0x757fc4(0x1ed)],settings[_0x757fc4(0x1f5)]),_0x56bb05={'last':parseInt(_0x4084f7),'bbm':_0x14f427},_0x635bc8=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x3f8ec9;try{_0x3f8ec9=await _0x2599a4[_0x757fc4(0x1eb)](_0x635bc8,_0x56bb05,_0x2294a7);}catch(_0x5285d2){}if(_0x3f8ec9&&_0x3f8ec9[_0x757fc4(0x27d)]){let _0x60f641=settings[_0x757fc4(0x1ed)],_0x36033b=settings[_0x757fc4(0x1ed)];newMessages=[];for(const _0x15accc of _0x3f8ec9['messages']){newMessages[_0x757fc4(0x366)](_0x15accc);let _0x4daa4f=![];_0x15accc[_0x757fc4(0x1c1)]&&(updateSetting(_0x757fc4(0x27b),_0x15accc['bbvNew']),_0x4daa4f=isNewerVersion(serverversion,_0x15accc[_0x757fc4(0x1c1)])||serverversion==_0x15accc[_0x757fc4(0x1c1)]);if(!_0x4daa4f&&_0x15accc[_0x757fc4(0x278)]>_0x60f641){if(_0x15accc['bbvReceive']===_0x757fc4(0x2cb)||serverversion[_0x757fc4(0x28a)](_0x15accc[_0x757fc4(0x264)])){let _0x306b2f=''+_0x15accc['title']+'\x0a\x0a'+_0x15accc[_0x757fc4(0x2cc)];const _0x1ed353=await sendTelegramMsg(toTelegramMarkdown(_0x306b2f),'Markdown');_0x60f641=_0x15accc[_0x757fc4(0x278)];}}_0x36033b=_0x15accc[_0x757fc4(0x278)];}updateAvailable=isNewerVersion(settings['latestversion'],serverversion),updateSetting(_0x757fc4(0x1ed),_0x36033b),emitMessages();}}function emitMessages(){const _0x5a1f4a=_0x55ec46,_0x4cb998=settings['lastmsgemitted'];let _0x272bbd=[];newMessages['forEach'](_0x381803=>{const _0x2e94e3=_0x1dcc;_0x381803['number']>_0x4cb998&&_0x272bbd[_0x2e94e3(0x366)](_0x381803);}),_0x272bbd[_0x5a1f4a(0x192)]>0x0&&getAllClients()[_0x5a1f4a(0x213)](_0x2f7350=>{const _0x5002c1=_0x5a1f4a;getSocket(_0x2f7350['id'])[_0x5002c1(0x328)](_0x5002c1(0x2cc),_0x272bbd);});}function confirmMessage(_0x541339){updateSetting('lastmsgemitted',Number(_0x541339));}function isNewerVersion(_0x4ffeb2,_0x32ee16){const _0x1177fb=_0x55ec46,_0x260592=_0x32ee16[_0x1177fb(0x1c8)]('.'),_0x1af5dc=_0x4ffeb2[_0x1177fb(0x1c8)]('.');for(var _0x933df8=0x0;_0x933df8<_0x1af5dc['length'];_0x933df8++){const _0x311b88=~~_0x1af5dc[_0x933df8],_0xb465ef=~~_0x260592[_0x933df8];if(_0x311b88>_0xb465ef)return!![];if(_0x311b88<_0xb465ef)return![];}return![];}function toTelegramMarkdown(_0x1a0a6f){const _0x3aeea3=_0x55ec46,_0x5c7e23=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x1bfbf4=/\*{2}(.+?)\*{2}/gim;return _0x1a0a6f=_0x1a0a6f[_0x3aeea3(0x2e0)](_0x5c7e23,_0x3aeea3(0x2d7))[_0x3aeea3(0x2e0)](_0x1bfbf4,_0x3aeea3(0x30e)),_0x1a0a6f;}async function validateConfigFile(){const _0x17b90b=_0x55ec46,_0x22d45c=dbConfig[_0x17b90b(0x318)](_0x17b90b(0x30b))[_0x17b90b(0x33d)]('botID')[_0x17b90b(0x16e)]()||[];if(_0x22d45c[_0x17b90b(0x192)]==0x0){let _0x24ff64=0x0,_0x5840bf=[];const _0x3d747a=/^bot-([0-9]{3})-config.json$/,_0x2848db=fs[_0x17b90b(0x188)](configpath);_0x2848db['forEach'](_0x4b0663=>{const _0x4738bb=_0x17b90b,_0x372e27=_0x3d747a[_0x4738bb(0x269)](_0x4b0663);if(_0x372e27){const _0xd203d3=_0x372e27[0x1];let _0x543bbc=getBotAttributes(_0xd203d3);_0x5840bf[_0x4738bb(0x366)]({'botID':_0xd203d3,'botname':_0x543bbc['botname'],'status':'disabled','live':_0x4738bb(0x1f8)}),_0x24ff64++;}}),_0x24ff64!=0x0&&(dbConfig[_0x17b90b(0x318)](_0x17b90b(0x30b))['assign'](_0x5840bf)['write'](),config=_0x5840bf,restoredConfigFile=_0x24ff64);}}async function restoreConfigNotify(_0x10ac51){const _0x421f26=_0x55ec46;let _0x2bf7ac;if(restoredConfigFile==0x1)_0x2bf7ac=_0x421f26(0x28d);else _0x2bf7ac=_0x421f26(0x2d1);if(_0x10ac51)io['to'](_0x421f26(0x1b0))[_0x421f26(0x328)](_0x421f26(0x21d),_0x2bf7ac);else{logger[_0x421f26(0x199)](_0x421f26(0x32f)),logger[_0x421f26(0x199)](_0x2bf7ac),logger[_0x421f26(0x199)](_0x421f26(0x32f)),logger[_0x421f26(0x199)]('');if(tgBot&&settings[_0x421f26(0x2a4)]&&settings[_0x421f26(0x29c)]!=_0x421f26(0x218))await sendTelegram(settings[_0x421f26(0x2a4)],_0x421f26(0x25b)+_0x2bf7ac);}}function decryptRSA(_0x55a58d,_0x5c6d9d){const _0x194b26=_0x55ec46,_0x152ae5=forge['pki'][_0x194b26(0x28b)](_0x55a58d),_0xb8e510=_0x152ae5[_0x194b26(0x1e2)](forge['util'][_0x194b26(0x237)](_0x5c6d9d),_0x194b26(0x289),{'md':forge['md'][_0x194b26(0x344)][_0x194b26(0x373)](),'mgf1':{'md':forge['md'][_0x194b26(0x344)]['create']()}});return _0xb8e510;}function validateCredentials(_0x404325,_0x4fddc8){const _0x53fe44=_0x55ec46;if(_0x404325[_0x53fe44(0x323)]==settings[_0x53fe44(0x223)]&&bcrypt[_0x53fe44(0x25e)](_0x404325[_0x53fe44(0x207)],settings[_0x53fe44(0x36b)])){if(settings[_0x53fe44(0x1c3)])return{'allow':![],'reason':_0x53fe44(0x17f),'token':null};else{const _0x329bbe=generateLoginToken(_0x4fddc8);return{'allow':!![],'reason':_0x53fe44(0x1d2),'token':_0x329bbe};}}else return{'allow':![],'reason':_0x53fe44(0x221),'token':null};}function refreshToken(_0x42b9f4){const _0x5b1067=_0x55ec46,_0x52d3bf=generateLoginToken(_0x42b9f4);return{'allow':!![],'reason':_0x5b1067(0x1d2),'token':_0x52d3bf};}function validateAccess(_0x4c8d5a,_0x45db40,_0x24ec56){const _0x1103ce=_0x55ec46,_0x3e063c=_0x24ec56?_0x24ec56:devices[_0x45db40]['ip'];let _0x2116af;const _0x4e81a0=_0x2735a2=>{const _0xeb4352=_0x1dcc;if(settings[_0xeb4352(0x171)]){if(settings[_0xeb4352(0x1c3)]){if(telegram2FaApproved(_0x45db40)){const _0x11a23f=generateLoginToken(_0x45db40);return{'allow':!![],'reason':_0xeb4352(0x222),'token':_0x11a23f};}else return{'allow':![],'reason':'login\x20required','token':null};}else return _0x2116af=validToken(_0x2735a2,_0x45db40),_0x2116af['hasOwnProperty'](_0xeb4352(0x174))?{'allow':!![],'reason':_0xeb4352(0x2ef),'token':_0x2735a2}:{'allow':![],'reason':_0xeb4352(0x2bf),'token':null};}else return{'allow':!![],'reason':'login\x20not\x20required','token':null};};if(settings[_0x1103ce(0x183)]){let _0x196f13=[...settings[_0x1103ce(0x1fd)],'::1',_0x1103ce(0x243),_0x1103ce(0x266)];if(_0x196f13[_0x1103ce(0x2c0)](_0x3e063c))return _0x4e81a0(_0x4c8d5a);else{_0x2116af=validToken(_0x4c8d5a,_0x45db40);if(_0x2116af['hasOwnProperty'](_0x1103ce(0x174)))return _0x4e81a0(_0x4c8d5a);else{if(telegramIpApproved(_0x45db40)){const _0x21cd06=generateToken(_0x45db40);return _0x2116af=_0x4e81a0(_0x4c8d5a),_0x2116af[_0x1103ce(0x2f7)]?{'allow':!![],'reason':_0x1103ce(0x20b),'token':_0x21cd06}:_0x2116af;}else return settings[_0x1103ce(0x1ca)]?{'allow':![],'reason':_0x1103ce(0x2b5),'token':null}:{'allow':![],'reason':'temporary\x20access\x20not\x20allowed','token':null};}}}else return _0x4e81a0(_0x4c8d5a);}function timelyDecrypt(_0x5ba527,_0x9b0ff4,_0x25e5ce='@'){const _0x21fe64=_0x55ec46;if(_0x5ba527)try{const _0x33c854=decryptRSA(secure[_0x21fe64(0x246)],_0x5ba527),_0x511b89=_0x33c854['split'](_0x25e5ce)[0x0],_0x43a555=_0x33c854[_0x21fe64(0x1c8)](_0x25e5ce)[0x1],_0x8e5866=new Date()[_0x21fe64(0x1ff)]();if(_0x9b0ff4){if(_0x8e5866-_0x43a555<maxSecretAge*0x3e8)return _0x511b89;else return![];}else return _0x511b89;}catch(_0x20d502){return![];}else return![];}const validToken=(_0xaace9b,_0xdc950c)=>{const _0xa0d83a=_0x55ec46,_0x2dcccf=devices[_0xdc950c]['ip'];if(!_0xaace9b)return{'error':_0xa0d83a(0x17b)};for(let _0x53cb4e of blacklist){if(_0x53cb4e['token']==_0xaace9b)return{'error':_0xa0d83a(0x1ec)};}let _0x250d8b;try{_0x250d8b=jwt['verify'](_0xaace9b,secure[_0xa0d83a(0x2e3)]+_0xdc950c);}catch{return{'error':'Invalid\x20authentication\x20token\x20(1)'};}if(!_0x250d8b[_0xa0d83a(0x173)](_0xa0d83a(0x322))&&!_0x250d8b[_0xa0d83a(0x173)](_0xa0d83a(0x323))||!_0x250d8b['hasOwnProperty'](_0xa0d83a(0x2ba)))return{'error':_0xa0d83a(0x298)};if(!_0x250d8b[_0xa0d83a(0x173)]('username')&&_0x250d8b[_0xa0d83a(0x173)]('clientip')){const {clientip:_0x8dee7a}=_0x250d8b;return _0x2dcccf==_0x8dee7a?{'success':_0xa0d83a(0x25d)}:{'error':_0xa0d83a(0x374)};}else{if(_0x250d8b[_0xa0d83a(0x173)]('username')&&_0x250d8b[_0xa0d83a(0x173)]('clientip')){const {username:_0x5307df,clientip:_0x4012e6}=_0x250d8b;return settings['bbUsername']==_0x5307df&&_0x2dcccf==_0x4012e6?{'success':_0xa0d83a(0x25d)}:{'error':_0xa0d83a(0x239)};}}},generateLoginToken=_0x43922a=>{const _0x54e04f=_0x55ec46;if(_0x43922a){const _0x5b8071=devices[_0x43922a]['ip'];return jwt['sign']({'username':settings['bbUsername'],'clientip':_0x5b8071},secure[_0x54e04f(0x2e3)]+_0x43922a,{'expiresIn':tokenRefresh*0x3c,'allowInsecureKeySizes':!![]});}else return![];},generateToken=_0x54953d=>{const _0xa28b0f=_0x55ec46;if(_0x54953d){const _0x4674ca=devices[_0x54953d]['ip'];return jwt[_0xa28b0f(0x35e)]({'clientip':_0x4674ca},secure[_0xa28b0f(0x2e3)]+_0x54953d,{'expiresIn':devices[_0x54953d]['telegramIpApproval'][_0xa28b0f(0x262)]*0x3c,'allowInsecureKeySizes':!![]});}else return![];},telegramIpApproved=_0x445272=>{const _0x4812a8=_0x55ec46;let _0x4d0463=![];return devices[_0x445272][_0x4812a8(0x27a)]&&devices[_0x445272][_0x4812a8(0x27a)][_0x4812a8(0x262)]!='reject'&&(_0x4d0463=devices[_0x445272][_0x4812a8(0x27a)][_0x4812a8(0x322)]==devices[_0x445272]['ip']&&new Date()[_0x4812a8(0x1ff)]()-devices[_0x445272]['telegramIpApproval']['timestamp']<devices[_0x445272][_0x4812a8(0x27a)][_0x4812a8(0x262)]*0x3c*0x3e8),_0x4d0463;},telegram2FaApproved=_0x1e0051=>{const _0x6d80f6=_0x55ec46;let _0xdb6632=![];return devices[_0x1e0051][_0x6d80f6(0x2cd)]&&devices[_0x1e0051]['telegram2FaApproval'][_0x6d80f6(0x262)]!=_0x6d80f6(0x2df)&&(_0xdb6632=devices[_0x1e0051]['telegram2FaApproval'][_0x6d80f6(0x322)]==devices[_0x1e0051]['ip']&&new Date()['getTime']()-devices[_0x1e0051][_0x6d80f6(0x2cd)][_0x6d80f6(0x35c)]<devices[_0x1e0051][_0x6d80f6(0x2cd)][_0x6d80f6(0x262)]*0x3c*0x3e8),_0xdb6632;},normalizeIP=_0x1bf360=>{const _0x111436=_0x55ec46;let _0x3e82d8=null,_0x1d5dfa=null;if(ipaddr['isValid'](_0x1bf360)){const _0xf1a99a=ipaddr[_0x111436(0x30d)](_0x1bf360);_0xf1a99a['kind']()===_0x111436(0x160)?(_0xf1a99a['isIPv4MappedAddress']()&&(_0x3e82d8=_0xf1a99a['toIPv4Address']()[_0x111436(0x1e5)]()),_0x1d5dfa=_0xf1a99a[_0x111436(0x1e5)]()):(_0x3e82d8=_0xf1a99a[_0x111436(0x1e5)](),_0x1d5dfa=_0xf1a99a[_0x111436(0x1b5)]()[_0x111436(0x1e5)]());}return{'show':_0x3e82d8?_0x3e82d8:_0x1d5dfa,'store':_0x1d5dfa};};function formatDate(_0x27e1c0){const _0x4e0119=_0x55ec46;return _0x27e1c0[_0x4e0119(0x1c5)]()+'/'+(_0x27e1c0[_0x4e0119(0x268)]()+0x1)[_0x4e0119(0x1e5)]()[_0x4e0119(0x36a)](0x2,'0')+'/'+_0x27e1c0[_0x4e0119(0x245)]()[_0x4e0119(0x1e5)]()[_0x4e0119(0x36a)](0x2,'0')+'\x20'+_0x27e1c0[_0x4e0119(0x2b3)]()[_0x4e0119(0x1e5)]()[_0x4e0119(0x36a)](0x2,'0')+':'+_0x27e1c0[_0x4e0119(0x227)]()[_0x4e0119(0x1e5)]()[_0x4e0119(0x36a)](0x2,'0')+':'+_0x27e1c0[_0x4e0119(0x2d4)]()['toString']()[_0x4e0119(0x36a)](0x2,'0');}function sleep(_0x5ac648){return new Promise(_0x47e981=>setTimeout(_0x47e981,_0x5ac648));}