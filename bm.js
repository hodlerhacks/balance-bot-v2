const _0x5654c0=_0x37cf;(function(_0xe31f63,_0xc68570){const _0x1e072e=_0x37cf,_0x3f1ff=_0xe31f63();while(!![]){try{const _0x4b883d=parseInt(_0x1e072e(0x193))/0x1*(-parseInt(_0x1e072e(0x17a))/0x2)+-parseInt(_0x1e072e(0x259))/0x3+-parseInt(_0x1e072e(0x17c))/0x4*(parseInt(_0x1e072e(0x19a))/0x5)+parseInt(_0x1e072e(0x1f9))/0x6*(parseInt(_0x1e072e(0x1ab))/0x7)+parseInt(_0x1e072e(0x2a6))/0x8*(-parseInt(_0x1e072e(0x106))/0x9)+parseInt(_0x1e072e(0x261))/0xa+-parseInt(_0x1e072e(0x100))/0xb*(-parseInt(_0x1e072e(0x1b6))/0xc);if(_0x4b883d===_0xc68570)break;else _0x3f1ff['push'](_0x3f1ff['shift']());}catch(_0x1c9877){_0x3f1ff['push'](_0x3f1ff['shift']());}}}(_0x537e,0x5c85b));const _0x31dc05=function(){let _0x4464d0=!![];return function(_0x27edfc,_0x447f1a){const _0x1a03d8=_0x4464d0?function(){const _0xbbff37=_0x37cf;if(_0x447f1a){const _0xf1910b=_0x447f1a[_0xbbff37(0x244)](_0x27edfc,arguments);return _0x447f1a=null,_0xf1910b;}}:function(){};return _0x4464d0=![],_0x1a03d8;};}(),_0xee09a1=_0x31dc05(this,function(){const _0x18b5dd=_0x37cf;return _0xee09a1['toString']()[_0x18b5dd(0x23f)](_0x18b5dd(0x176))[_0x18b5dd(0x123)]()[_0x18b5dd(0x2ea)](_0xee09a1)['search'](_0x18b5dd(0x176));});_0xee09a1();'use strict';process[_0x5654c0(0x11e)]['NTBA_FIX_319']=0x1;const childProcess=require(_0x5654c0(0x188)),fs=require('fs'),fns=require(_0x5654c0(0x2d8)),low=require(_0x5654c0(0x15d)),FileSync=require('lowdb/adapters/FileSync'),path=require(_0x5654c0(0x10a)),crypto=require(_0x5654c0(0x262)),forge=require(_0x5654c0(0x248)),bcrypt=require(_0x5654c0(0x1e4)),jwt=require(_0x5654c0(0x2ac)),ipaddr=require(_0x5654c0(0x211)),argv=require(_0x5654c0(0x1da))(process[_0x5654c0(0x1ec)][_0x5654c0(0x27e)](0x2))[_0x5654c0(0x1ec)],uuidRandom=require(_0x5654c0(0x16d)),{Telegraf,Markup}=require(_0x5654c0(0x184)),Mixpanel=require(_0x5654c0(0x1d3)),axios=require('axios'),{GraphQLClient,gql}=require(_0x5654c0(0x2af)),util=require('util'),fileUpload=require('express-fileupload'),{networkInterfaces}=require('os'),JSZip=require('jszip'),PORT=argv[_0x5654c0(0x2b9)]||_0x5654c0(0x269),pattern=/^[0-9]{2,4}$/;!pattern['test'](PORT)&&(console[_0x5654c0(0x103)](_0x5654c0(0x1c3)+PORT+_0x5654c0(0x2d9)),process['exit'](0x1));const HOST=argv[_0x5654c0(0x2e0)]||null,userID=argv[_0x5654c0(0x202)]||'',debugging=argv['d']||![],recreate=argv['r']||![],nodeversion=process['versions'][_0x5654c0(0x128)];let bbpath=_0x5654c0(0xfd),bbpath2='';const botfile=_0x5654c0(0x222),configfile=_0x5654c0(0x2dc),settingsfile=_0x5654c0(0x232),securefile=_0x5654c0(0x277),environment=require('./'+bbpath2+_0x5654c0(0x138))[_0x5654c0(0x298)]||_0x5654c0(0x2bf),maxBackups=0xa;let validInstallation=!![];const schedulerInterval=0x3c*0x3c*0x3e8;!fs[_0x5654c0(0x27b)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x5654c0(0x1c7)),configpath=userID?bbpath+_0x5654c0(0x190)+userID+'/':bbpath+'config/',configbackuppath=configpath+_0x5654c0(0x102),logspath=userID?bbpath+_0x5654c0(0x242)+userID+'/':bbpath+_0x5654c0(0x242),zippath=userID?bbpath+_0x5654c0(0x133)+userID+'/':bbpath+_0x5654c0(0x133),loggerfile=fs['createWriteStream'](logspath+_0x5654c0(0x21b),{'flags':'a'}),temppath=userID?bbpath+_0x5654c0(0x155)+userID+'/':bbpath+_0x5654c0(0x155);!fs[_0x5654c0(0x27b)](configpath)&&fs[_0x5654c0(0x163)](configpath);!fs['existsSync'](configbackuppath)&&fs[_0x5654c0(0x163)](configbackuppath);!fs[_0x5654c0(0x27b)](logspath)&&fs['mkdirSync'](logspath);!fs[_0x5654c0(0x27b)](zippath)&&fs[_0x5654c0(0x163)](zippath);!fs[_0x5654c0(0x27b)](temppath)&&fs[_0x5654c0(0x163)](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig['defaults']({'bots':[]})['write']();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings['defaults']({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0x5654c0(0x2f1),'onepagemode':![],'marketcapApi':''}})['write']();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x5654c0(0x264)]({'secure':{},'blacklist':[]})[_0x5654c0(0x170)]();const saltRounds=0xa,mixpanel=Mixpanel[_0x5654c0(0x226)]('6b67f3d61ee94b8f5c80b4affef4c4d9',{'host':_0x5654c0(0x1b3)});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings[_0x5654c0(0x134)]&&(settings[_0x5654c0(0x134)]!=''&&settings['telegramToken']!=_0x5654c0(0x258))&&settings['telegramUsername']&&settings[_0x5654c0(0x117)]!='')initTelegram();const parseColor=(_0x495f32,_0xd82594)=>{const _0x5591ea=_0x5654c0,_0x4dedeb=/#[A-Z]{3}#/g;if(typeof _0x495f32==_0x5591ea(0x181)){!_0xd82594?_0x495f32=_0x495f32[_0x5591ea(0x1e7)](_0x4dedeb,''):(_0x495f32=_0x495f32['replace'](/#BLU#/g,_0x5591ea(0x29c)),_0x495f32=_0x495f32[_0x5591ea(0x1e7)](/#RED#/g,'\x1b[31m'),_0x495f32=_0x495f32[_0x5591ea(0x1e7)](/#YEL#/g,'\x1b[33m'),_0x495f32=_0x495f32[_0x5591ea(0x1e7)](/#MAG#/g,_0x5591ea(0x266)),_0x495f32=_0x495f32[_0x5591ea(0x1e7)](/#CYA#/g,_0x5591ea(0x249)),_0x495f32=_0x495f32[_0x5591ea(0x1e7)](/#RES#/g,'\x1b[0m'));;}return _0x495f32;},logger={'screen':_0x36d52b=>{console['log'](parseColor(_0x36d52b,!![]));},'simple':_0x12ade6=>{const _0x428e4b=_0x5654c0;console[_0x428e4b(0x103)](parseColor(_0x12ade6,!![])),loggerfile[_0x428e4b(0x170)](util[_0x428e4b(0x23a)](parseColor(_0x12ade6,![]))+'\x0a');},'full':async _0x33f252=>{const _0x5e6047=_0x5654c0,_0x21e2ab=getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20'+_0x33f252;console[_0x5e6047(0x103)](parseColor(_0x21e2ab,!![])),loggerfile[_0x5e6047(0x170)](util['format'](parseColor(_0x21e2ab,![]))+'\x0a');if(tgBot&&settings['telegramChatId']&&settings[_0x5e6047(0x296)]!=_0x5e6047(0x209))await sendTelegram(settings[_0x5e6047(0x214)],_0x5e6047(0x25e)+parseColor(_0x33f252,![]));},'debug':async(_0xdd1735,_0x1fdeef='')=>{const _0x11caa2=_0x5654c0,_0x30e065=getTimeStamp()+_0x11caa2(0x281)+_0xdd1735;if(debugging)console[_0x11caa2(0x103)](parseColor(_0x30e065,!![]));loggerfile[_0x11caa2(0x170)](util[_0x11caa2(0x23a)](parseColor(_0x30e065,![]))+'\x0a');if(_0x1fdeef){if(debugging)console[_0x11caa2(0x103)](_0x1fdeef);loggerfile[_0x11caa2(0x170)](util[_0x11caa2(0x23a)](_0x1fdeef)+'\x0a');}}};let terminating=![];process['on']('uncaughtException',function(_0x589244){const _0x595304=_0x5654c0;_0x589244[_0x595304(0x123)]()[_0x595304(0x14d)]('address\x20already\x20in\x20use')?(logger[_0x595304(0x195)](_0x595304(0x301)+_0x589244[_0x595304(0x2b9)]+_0x595304(0x1a1)),process[_0x595304(0x125)]({'terminate':!![]},_0x557c72=>{})):logger[_0x595304(0x195)](_0x589244);}),process['on'](_0x5654c0(0x1f5),()=>{const _0x3d1bc8=_0x5654c0;stopAllBots(),process[_0x3d1bc8(0x1f5)](0x0);}),process['on'](_0x5654c0(0x273),()=>{const _0x2cc098=_0x5654c0;stopAllBots(),process[_0x2cc098(0x1f5)](0x0);}),process['on'](_0x5654c0(0x2a4),()=>{const _0x102f05=_0x5654c0;stopAllBots(),process[_0x102f05(0x1f5)](0x0);});function _0x37cf(_0x430e02,_0x1a8d4e){const _0x5e72c0=_0x537e();return _0x37cf=function(_0xee09a1,_0x31dc05){_0xee09a1=_0xee09a1-0xe9;let _0x537ea0=_0x5e72c0[_0xee09a1];return _0x537ea0;},_0x37cf(_0x430e02,_0x1a8d4e);}let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+'version.json')[_0x5654c0(0x2ae)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let tmpStorage={},devices=[],lastIpApproval,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0x5654c0(0x1a6)),app=express(),http=require(_0x5654c0(0x224))[_0x5654c0(0x23b)](app);app[_0x5654c0(0x2f2)](fileUpload({'useTempFiles':!![]})),app[_0x5654c0(0x2c5)](_0x5654c0(0x212),async(_0x1c2546,_0x4efb1a)=>{const _0x238318=_0x5654c0,_0x36509d=_0x1c2546[_0x238318(0x104)][_0x238318(0x2d1)],_0x218207=getClientsWithBotID(_0x238318(0x1bb)),_0x46a0b1=_0x1c2546['headers'][_0x238318(0x127)],_0x4d5aa4=timelyDecrypt(_0x46a0b1,![]),_0x17a0a2=_0x218207[_0x238318(0x29f)](_0x2d145e=>_0x2d145e[_0x238318(0x127)]==_0x4d5aa4);if(_0x17a0a2){const _0x5b429a=normalizeIP(_0x1c2546[_0x238318(0x192)][_0x238318(0x143)])[_0x238318(0x2c7)],_0x10fc56=_0x1c2546['headers']['tkn'];if(validateAccess(_0x10fc56,_0x4d5aa4,_0x5b429a)['allow'])_0x36509d==_0x238318(0x2eb)&&await backupConfigFiles(),await zipFiles(_0x36509d),_0x4efb1a[_0x238318(0x14e)](zippath+(_0x36509d+'.zip'),_0x35f3c1=>{const _0x3d6ce3=_0x238318;_0x35f3c1&&(logger[_0x3d6ce3(0xf7)](_0x3d6ce3(0x1c2)+_0x36509d),logger[_0x3d6ce3(0x195)](_0x35f3c1));});else logger[_0x238318(0xf7)]('Unauthorized\x20attempt\x20to\x20download\x20'+_0x36509d+_0x238318(0x305));}else logger[_0x238318(0xf7)](_0x238318(0xf9)+_0x36509d+'\x20(2)');}),app['post'](_0x5654c0(0x1f4),async(_0x1c3c50,_0xd731e6)=>{const _0x3172a2=_0x5654c0,_0x59a112=getClientsWithBotID(_0x3172a2(0x1bb)),_0x352102=_0x1c3c50[_0x3172a2(0x19c)]['uuid'],_0x1d6614=timelyDecrypt(_0x352102,![]),_0x388a14=_0x59a112[_0x3172a2(0x29f)](_0x14c2ac=>_0x14c2ac[_0x3172a2(0x127)]==_0x1d6614);logger[_0x3172a2(0x139)](_0x3172a2(0xed));if(_0x388a14){const _0x38b80e=normalizeIP(_0x1c3c50[_0x3172a2(0x192)][_0x3172a2(0x143)])[_0x3172a2(0x2c7)],_0x30ad12=_0x1c3c50[_0x3172a2(0x19c)][_0x3172a2(0x18d)];if(validateAccess(_0x30ad12,_0x1d6614,_0x38b80e)[_0x3172a2(0x21e)]){if(_0x1c3c50[_0x3172a2(0x200)]){const _0xdcf12d=_0x1c3c50['files'][_0x3172a2(0x2f3)];await _0xdcf12d['mv'](temppath+_0xdcf12d[_0x3172a2(0x25b)]),_0xd731e6[_0x3172a2(0x125)]({'status':!![],'message':_0x3172a2(0x1cc)});const _0x297faf=getBotsWithMode();_0x297faf[_0x3172a2(0x179)]>0x0?confirmRestore(temppath,_0xdcf12d[_0x3172a2(0x25b)]):unzipFile(temppath,_0xdcf12d[_0x3172a2(0x25b)]);}}else logger[_0x3172a2(0xf7)](_0x3172a2(0x11d));}else logger[_0x3172a2(0xf7)]('Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)');}),app['use'](express[_0x5654c0(0x246)](path[_0x5654c0(0x140)](__dirname,bbpath2,_0x5654c0(0x21d)))),app[_0x5654c0(0x2f2)](express[_0x5654c0(0x246)](path[_0x5654c0(0x140)](__dirname,bbpath2,'build'))),app[_0x5654c0(0x2c5)]('/',function(_0x4b1fb2,_0x24f98e){const _0xf4ad91=_0x5654c0;_0x24f98e['sendFile'](path[_0xf4ad91(0x140)](__dirname,bbpath2,_0xf4ad91(0x21d),_0xf4ad91(0x110)));}),app[_0x5654c0(0x2c5)]('/:bot',function(_0x2428f7,_0x3a64a3){const _0x2bf6e7=_0x5654c0;_0x3a64a3[_0x2bf6e7(0x105)](path['join'](__dirname,bbpath2,_0x2bf6e7(0x300),_0x2bf6e7(0x110)));}),app[_0x5654c0(0x2c5)](_0x5654c0(0x24d),(_0x14460a,_0x31c165)=>{const _0x25e1fb=_0x5654c0;_0x31c165[_0x25e1fb(0x105)](path[_0x25e1fb(0x140)](__dirname,bbpath2,_0x25e1fb(0x300),_0x25e1fb(0x110)));}),app['get'](_0x5654c0(0x28b),(_0x2ca4e2,_0xf0fe07)=>{const _0x487d82=_0x5654c0;_0xf0fe07[_0x487d82(0x105)](path[_0x487d82(0x140)](__dirname,bbpath2,_0x487d82(0x300),_0x487d82(0x110)));}),app[_0x5654c0(0x2c5)](_0x5654c0(0x1bf),(_0x32e068,_0x409cb5)=>{const _0x378bc0=_0x5654c0;_0x409cb5[_0x378bc0(0x105)](path['join'](__dirname,bbpath2,_0x378bc0(0x300),'index.html'));}),app[_0x5654c0(0x2c5)](_0x5654c0(0x2b5),(_0x56807,_0x2af96a)=>{const _0x53d727=_0x5654c0;_0x2af96a['sendFile'](path[_0x53d727(0x140)](__dirname,bbpath2,_0x53d727(0x300),'index.html'));}),app[_0x5654c0(0x2c5)](_0x5654c0(0x205),(_0x58c1c7,_0x2ccb13)=>{const _0x98185f=_0x5654c0;_0x2ccb13[_0x98185f(0x105)](path[_0x98185f(0x140)](__dirname,bbpath2,'build','index.html'));}),app['get'](_0x5654c0(0x272),(_0x359e10,_0x3a60c2)=>{const _0x3ce297=_0x5654c0;_0x3a60c2[_0x3ce297(0x105)](path['join'](__dirname,bbpath2,_0x3ce297(0x300),_0x3ce297(0x110)));});if(HOST)http[_0x5654c0(0x22f)](PORT,HOST);else http[_0x5654c0(0x22f)](PORT);const io=require(_0x5654c0(0x278))(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}function getServerIP(){const _0x4c206c=_0x5654c0;let _0x23320f='[ip-address]';const _0x175ace=networkInterfaces(),_0xf7a35e={};for(const _0x56aedd of Object['keys'](_0x175ace)){for(const _0x574d09 of _0x175ace[_0x56aedd]){if((_0x574d09[_0x4c206c(0x20f)]==_0x4c206c(0x2c2)||_0x574d09[_0x4c206c(0x20f)]==0x4)&&!_0x574d09[_0x4c206c(0x290)]){const _0x386210=ipaddr[_0x4c206c(0x160)](_0x574d09[_0x4c206c(0x24b)])[_0x4c206c(0x124)]();_0x386210!=_0x4c206c(0x24a)&&(!_0xf7a35e[_0x56aedd]&&(_0xf7a35e[_0x56aedd]=[]),_0xf7a35e[_0x56aedd][_0x4c206c(0x1be)](_0x574d09[_0x4c206c(0x24b)]),_0x23320f=_0x574d09[_0x4c206c(0x24b)]);}}}return{'serverip':_0x23320f,'netinterfaces':_0xf7a35e};}async function startServer(){const _0x291e8a=_0x5654c0,{serverip:_0x409008,netinterfaces:_0x2fd97b}=getServerIP();logger[_0x291e8a(0x195)](''),logger['simple'](_0x291e8a(0x24e)),await logger['full'](_0x291e8a(0x17f)+serverversion+_0x291e8a(0x166)+(environment==_0x291e8a(0x1a9)?_0x291e8a(0x18b):'')+'\x0a'+('=>\x20Go\x20to\x20#CYA#http://127.0.0.1:'+PORT+_0x291e8a(0x263))+(_0x291e8a(0x1a0)+_0x409008+':'+PORT+'#RES#\x20if\x20running\x20on\x20server')),logger[_0x291e8a(0x195)](_0x291e8a(0x24e));if(config[_0x291e8a(0x179)]!=0x0)for(const _0x233359 of config){const _0x58d412=_0x233359[_0x291e8a(0xfc)]=='auto'?'a':'m';if(_0x233359['status']==_0x291e8a(0x186)||_0x233359[_0x291e8a(0x2b3)]=='new')await logger[_0x291e8a(0xf7)](_0x291e8a(0xee)+_0x58d412+_0x291e8a(0x11b)+_0x233359[_0x291e8a(0x2ab)]+_0x291e8a(0x27d)+_0x233359[_0x291e8a(0x2f7)]),startBot([_0x233359[_0x291e8a(0x2ab)],userID],{'cwd':bbpath},function(_0x3eb374){const _0x5806ab=_0x291e8a;if(_0x3eb374)logger[_0x5806ab(0xf7)](_0x3eb374);});else(_0x233359[_0x291e8a(0x2b3)]==_0x291e8a(0x2a9)||_0x233359[_0x291e8a(0x2b3)]=='new-disabled')&&await logger[_0x291e8a(0xf7)]('Idling\x20('+_0x58d412+_0x291e8a(0x194)+_0x233359[_0x291e8a(0x2ab)]+_0x291e8a(0x27d)+_0x233359[_0x291e8a(0x2f7)]);}else!newBot&&logger['simple'](_0x291e8a(0xea));if(newBot)addBot();logger['simple'](_0x291e8a(0x24e)),logger[_0x291e8a(0x195)](''),await logger[_0x291e8a(0x139)](_0x291e8a(0x1cf)+nodeversion),await logger['debug'](_0x291e8a(0x1f7),_0x2fd97b);}function startSocket(){const _0x13cee3=_0x5654c0;io['on'](_0x13cee3(0x2e3),_0x3f32de=>{const _0x49f7f4=_0x13cee3;let _0x1eb0f4,_0x47975a,_0x2a2df0,_0x562091,_0x54eb7f;const _0x4a9f0a=_0x3f32de[_0x49f7f4(0x15a)][_0x49f7f4(0x19c)]['referer'];_0x47975a=_0x4a9f0a[_0x49f7f4(0x1c6)](/bot[0-9]{3}/);if(_0x47975a)_0x2a2df0=_0x47975a[0x0][_0x49f7f4(0x1c6)](/[0-9]{3}/);if(_0x2a2df0)_0x1eb0f4=_0x2a2df0[0x0];else _0x1eb0f4='botmanager';const _0x4e42c4=_0x3f32de[_0x49f7f4(0x15a)]['auth'][_0x49f7f4(0x158)];if(!_0x4e42c4)_0x3f32de[_0x49f7f4(0x203)]('status',{'publicKey':secure[_0x49f7f4(0x1d1)]});else{_0x562091=timelyDecrypt(_0x4e42c4,![]);if(!_0x562091)_0x3f32de[_0x49f7f4(0x203)]('status',{'publicKey':secure[_0x49f7f4(0x1d1)]});else{_0x54eb7f=normalizeIP(_0x3f32de['conn'][_0x49f7f4(0x143)])[_0x49f7f4(0x2c7)];if(!devices[_0x562091])devices[_0x562091]={'uuid':_0x562091,'access':{'token':null}};devices[_0x562091]['ip']=_0x54eb7f;const _0x3de44f=addClient(_0x3f32de['id'],_0x562091,_0x1eb0f4);setAccess(_0x3de44f),emitMessages(),_0x3f32de['on'](_0x49f7f4(0x1d6),_0x367849=>{const _0x3a9686=_0x49f7f4,_0x1be919=timelyDecrypt(_0x367849[_0x3a9686(0x137)],!![],'|@|');if(_0x1be919){_0x367849={'username':_0x367849[_0x3a9686(0x2f0)],'password':_0x1be919},devices[_0x562091][_0x3a9686(0x2e8)]=validateCredentials(_0x367849,_0x562091);if(devices[_0x562091][_0x3a9686(0x2e8)][_0x3a9686(0x21e)]==![]&&devices[_0x562091][_0x3a9686(0x2e8)][_0x3a9686(0x22e)]==_0x3a9686(0x13c))_0x3f32de[_0x3a9686(0x203)](_0x3a9686(0x2b3),{'access':devices[_0x562091][_0x3a9686(0x2e8)]}),loginAccess2FA(_0x562091,_0x54eb7f);else{if(devices[_0x562091]['access']['allow']==![]&&devices[_0x562091][_0x3a9686(0x2e8)][_0x3a9686(0x22e)]=='invalid\x20credentials')_0x3f32de[_0x3a9686(0x203)](_0x3a9686(0x2b3),{'access':devices[_0x562091][_0x3a9686(0x2e8)]});else devices[_0x562091][_0x3a9686(0x2e8)][_0x3a9686(0x21e)]&&devices[_0x562091]['access']['reason']==_0x3a9686(0x22a)&&(getClientsWithUuid(_0x562091)[_0x3a9686(0x11a)](_0x624316=>{setAccess(_0x624316);}),logger['debug'](_0x3a9686(0x161)+_0x562091[_0x3a9686(0x27e)](-0x8)),setTokenRefresh(_0x562091),setSessionTimeout('login',_0x562091));}}else logger['full']('Unauthorized\x20login\x20attempt\x20(timeout)');}),_0x3f32de['on'](_0x49f7f4(0x1aa),()=>{resetPassword();}),_0x3f32de['on'](_0x49f7f4(0x1c5),_0x53b363=>{removeClient(_0x3f32de['id']);}),_0x1eb0f4==_0x49f7f4(0x1bb)&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x873927){const _0x31929a=_0x5654c0;if(_0x873927!=_0x31929a(0x1bb)&&config[_0x31929a(0x29e)]!=''){if(pid[_0x873927])pid[_0x873927][_0x31929a(0x125)]({'function':_0x31929a(0x274),'args':null});}_0x873927!=_0x31929a(0x1bb)&&broadcastToBots(_0x31929a(0x297),JSON['stringify'](config));}function reloadBotManager(){const _0x3ce9b4=_0x5654c0;getClientsWithBotID(_0x3ce9b4(0x1bb))['forEach'](_0x55895a=>{const _0x21c8fe=_0x3ce9b4;getSocket(_0x55895a['id'])[_0x21c8fe(0x203)](_0x21c8fe(0x2b3),{'access':{'allow':![],'reason':_0x21c8fe(0x191),'token':null}});});}function getSocket(_0x28e66f){const _0x5d5d53=_0x5654c0,_0x405998=io['_nsps'][_0x5d5d53(0x2c5)]('/');return _0x405998['sockets'][_0x5d5d53(0x2c5)](_0x28e66f);}function setAccess(_0x386ae5){const _0x5f0cd8=_0x5654c0,_0x6f5423=getSocket(_0x386ae5['id']),_0x2d38cf=_0x386ae5['uuid'],_0x47452f=_0x386ae5[_0x5f0cd8(0x2dd)];devices[_0x2d38cf]['access']=validateAccess(devices[_0x2d38cf][_0x5f0cd8(0x2e8)][_0x5f0cd8(0x1e6)],_0x2d38cf),logger['debug']('Setting\x20access:\x20'+devices[_0x2d38cf]['access']['reason']+_0x5f0cd8(0x2cb)+_0x386ae5['id'][_0x5f0cd8(0x27e)](-0x8)+_0x5f0cd8(0x1f0)+_0x2d38cf[_0x5f0cd8(0x27e)](-0x8)),_0x6f5423[_0x5f0cd8(0x140)](_0x2d38cf);if(devices[_0x2d38cf]['access']['allow']){_0x6f5423[_0x5f0cd8(0x140)](_0x47452f);if(_0x47452f==_0x5f0cd8(0x1bb))initializeSocketBotManager(_0x6f5423);else initializeSocketBot(_0x6f5423);initClient(_0x47452f);}devices[_0x2d38cf][_0x5f0cd8(0x2e8)][_0x5f0cd8(0x1e6)]&&devices[_0x2d38cf][_0x5f0cd8(0x2e8)]['reason']==_0x5f0cd8(0x116)&&setSessionTimeout('2FA',_0x2d38cf),devices[_0x2d38cf][_0x5f0cd8(0x2e8)][_0x5f0cd8(0x1e6)]&&devices[_0x2d38cf][_0x5f0cd8(0x2e8)][_0x5f0cd8(0x22e)]=='2FA\x20login\x20token\x20generated'&&setSessionTimeout('login',_0x2d38cf),_0x6f5423[_0x5f0cd8(0x203)](_0x5f0cd8(0x2b3),{'status':_0x386ae5[_0x5f0cd8(0x20b)],'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x2d38cf][_0x5f0cd8(0x2e8)],'externalip':devices[_0x2d38cf]['ip'],'publicKey':secure[_0x5f0cd8(0x1d1)],'userid':settings[_0x5f0cd8(0x162)],'validInstallation':validInstallation}),devices[_0x2d38cf]['access'][_0x5f0cd8(0x21e)]==![]&&devices[_0x2d38cf][_0x5f0cd8(0x2e8)]['reason']==_0x5f0cd8(0x285)&&temporaryAccess2FA(_0x2d38cf,devices[_0x2d38cf]['ip']);}function setSessionTimeout(_0x5cb3f9,_0x27ef69){const _0x2bf130=_0x5654c0;let _0x1c6667;if(_0x5cb3f9==_0x2bf130(0x1d6))_0x1c6667=loginExpiry*0x3c*0x3e8;else _0x1c6667=devices[_0x27ef69][_0x2bf130(0x204)]['expiry']*0x3c*0x3e8-(new Date()[_0x2bf130(0x270)]()-devices[_0x27ef69][_0x2bf130(0x204)]['timestamp']);if(devices[_0x27ef69][_0x2bf130(0x304)])clearTimeout(devices[_0x27ef69][_0x2bf130(0x304)]);devices[_0x27ef69][_0x2bf130(0x304)]=setTimeout(()=>{const _0x463c47=_0x2bf130;if(devices[_0x27ef69][_0x463c47(0x196)])clearTimeout(devices[_0x27ef69]['pidRefreshToken']);removeSocketListeners(_0x27ef69),addBlacklist(_0x27ef69),devices[_0x27ef69]['telegramIpApproval']=null,devices[_0x27ef69]['telegram2FaApproval']=null,devices[_0x27ef69]['access'][_0x463c47(0x1e6)]=null,logger[_0x463c47(0x139)](_0x463c47(0x295)+_0x27ef69['slice'](-0x8)),devices[_0x27ef69][_0x463c47(0x2e8)]=validateAccess(devices[_0x27ef69][_0x463c47(0x2e8)]['token'],_0x27ef69),!(devices[_0x27ef69][_0x463c47(0x2e8)][_0x463c47(0x21e)]&&devices[_0x27ef69][_0x463c47(0x2e8)][_0x463c47(0x22e)]=='login\x20not\x20required')&&(_0x5cb3f9=='login'?io['to'](_0x27ef69)[_0x463c47(0x203)](_0x463c47(0x2b3),{'access':{'allow':![],'reason':'access\x20timeout','token':null}}):io['to'](_0x27ef69)[_0x463c47(0x203)](_0x463c47(0x2b3),{'access':{'allow':![],'reason':_0x463c47(0x1c0),'token':null}})),devices[_0x27ef69][_0x463c47(0x2e8)][_0x463c47(0x1e6)]=null;},_0x1c6667);}function setTokenRefresh(_0x393b62){const _0x2f49c0=_0x5654c0;if(devices[_0x393b62][_0x2f49c0(0x196)])clearTimeout(devices[_0x393b62][_0x2f49c0(0x196)]);devices[_0x393b62]['pidRefreshToken']=setTimeout(()=>{const _0x5a1aa4=_0x2f49c0;getClientsWithUuid(_0x393b62)[_0x5a1aa4(0x179)]!=0x0?(devices[_0x393b62][_0x5a1aa4(0x2e8)]=refreshToken(_0x393b62),io['to'](_0x393b62)['emit'](_0x5a1aa4(0x2b3),{'status':_0x5a1aa4(0x275),'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x393b62][_0x5a1aa4(0x2e8)],'externalip':devices[_0x393b62]['ip'],'publicKey':secure['publicKey'],'validInstallation':validInstallation}),setTokenRefresh(_0x393b62)):clearTimeout(devices[_0x393b62][_0x5a1aa4(0x196)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x497bb1){const _0x9c508f=_0x5654c0,_0x3f7201=getClient(_0x497bb1['id'])[_0x9c508f(0x127)];_0x497bb1[_0x9c508f(0x203)]('bots',config),_0x497bb1[_0x9c508f(0x203)]('settings',cleanSettings()),_0x497bb1['on'](_0x9c508f(0x12e),_0x4ce5a7=>{const _0x42734a=_0x9c508f;if(validateAccess(_0x4ce5a7,_0x3f7201)[_0x42734a(0x21e)])addBot();else logger[_0x42734a(0xf7)](_0x42734a(0x221));}),_0x497bb1['on'](_0x9c508f(0x2a8),(_0xd829bb,_0x417da6)=>{const _0x1cb581=_0x9c508f;if(validateAccess(_0x417da6,_0x3f7201)[_0x1cb581(0x21e)])toggleBot(_0xd829bb[_0x1cb581(0x2ab)],_0xd829bb[_0x1cb581(0x2b3)],_0xd829bb[_0x1cb581(0x18c)]);else logger[_0x1cb581(0xf7)](_0x1cb581(0x229));}),_0x497bb1['on'](_0x9c508f(0x178),(_0xe74105,_0x39301a)=>{const _0x449b36=_0x9c508f;if(validateAccess(_0x39301a,_0x3f7201)[_0x449b36(0x21e)])toggleBotMode(_0xe74105);else logger[_0x449b36(0xf7)]('Unauthorized\x20attempt\x20to\x20update\x20bot');}),_0x497bb1['on'](_0x9c508f(0x15c),(_0x417f47,_0x206c2c)=>{const _0x5e1685=_0x9c508f;if(validateAccess(_0x206c2c,_0x3f7201)['allow'])deleteBot(_0x417f47);else logger[_0x5e1685(0xf7)](_0x5e1685(0x187));}),_0x497bb1['on'](_0x9c508f(0x279),(_0x5aab3b,_0x4a260b)=>{const _0x33d5da=_0x9c508f;if(validateAccess(_0x4a260b,_0x3f7201)[_0x33d5da(0x21e)])storeSettings(_0x5aab3b,!![]);else logger[_0x33d5da(0xf7)](_0x33d5da(0x28c));}),_0x497bb1['on'](_0x9c508f(0x2d6),_0x3a7291=>{const _0x52b5be=_0x9c508f;if(validateAccess(_0x3a7291,_0x3f7201)[_0x52b5be(0x21e)])updateBB('update');else logger[_0x52b5be(0xf7)](_0x52b5be(0x253));}),_0x497bb1['on'](_0x9c508f(0x2ce),_0x1e05b0=>{const _0xc53bfa=_0x9c508f;if(validateAccess(_0x1e05b0,_0x3f7201)[_0xc53bfa(0x21e)])updateBB('reinstall');else logger['full'](_0xc53bfa(0x1f2));}),_0x497bb1['on']('get-backup-files',_0xbca0d0=>{const _0x1c992e=_0x9c508f;if(validateAccess(_0xbca0d0,_0x3f7201)[_0x1c992e(0x21e)]){const _0x3ecde0=getClient(_0x497bb1['id']);if(_0x3ecde0)getBackupFiles(_0x3ecde0[_0x1c992e(0x127)]);else logger[_0x1c992e(0xf7)](_0x1c992e(0x23c));}else logger[_0x1c992e(0xf7)](_0x1c992e(0x2e7));}),_0x497bb1['on'](_0x9c508f(0x1c8),(_0xab0e2c,_0x1339d7)=>{const _0x413c86=_0x9c508f;if(validateAccess(_0x1339d7,_0x3f7201)[_0x413c86(0x21e)])restoreBackupFile(_0xab0e2c);else logger[_0x413c86(0xf7)](_0x413c86(0x287));}),_0x497bb1['on'](_0x9c508f(0x132),_0x1263c1=>{const _0x337fb7=_0x9c508f;if(validateAccess(_0x1263c1,_0x3f7201)[_0x337fb7(0x21e)])getMessages();else logger[_0x337fb7(0xf7)]('Unauthorized\x20attempt\x20to\x20get\x20messages');}),_0x497bb1['on']('confirm-message',(_0x5d54ea,_0x30cbfa)=>{const _0x23fd0a=_0x9c508f;if(validateAccess(_0x30cbfa,_0x3f7201)[_0x23fd0a(0x21e)])confirmMessage(_0x5d54ea);else logger[_0x23fd0a(0xf7)](_0x23fd0a(0x149));}),_0x497bb1['on'](_0x9c508f(0x120),_0x290c6d=>{const _0x414a7f=_0x9c508f;if(validateAccess(_0x290c6d,_0x3f7201)[_0x414a7f(0x21e)]){if(devices[_0x3f7201][_0x414a7f(0x196)])clearTimeout(devices[_0x3f7201]['pidRefreshToken']);if(devices[_0x3f7201][_0x414a7f(0x304)])clearTimeout(devices[_0x3f7201][_0x414a7f(0x304)]);removeSocketListeners(getClient(_0x497bb1['id'])[_0x414a7f(0x127)]),addBlacklist(_0x3f7201),devices[_0x3f7201][_0x414a7f(0x204)]=null,devices[_0x3f7201][_0x414a7f(0x10d)]=null,devices[_0x3f7201]['access'][_0x414a7f(0x1e6)]=null,logger['debug'](_0x414a7f(0x1cb)+_0x3f7201[_0x414a7f(0x27e)](-0x8)),io['to'](getClient(_0x497bb1['id'])[_0x414a7f(0x127)])['emit']('status',{'access':{'allow':![],'reason':_0x414a7f(0x240),'token':null}});}else logger[_0x414a7f(0xf7)](_0x414a7f(0x288));});}function initializeSocketBot(_0x3d56dd){const _0x315dcc=_0x5654c0,_0x2e994c=getClient(_0x3d56dd['id'])[_0x315dcc(0x2dd)],_0x3f113e=getClient(_0x3d56dd['id'])['uuid'];_0x3d56dd['on'](_0x315dcc(0x130),(_0x1cce34,_0x47a458)=>{const _0x9acaaf=_0x315dcc;if(validateAccess(_0x47a458,_0x3f113e)[_0x9acaaf(0x21e)]){if(pid[_0x2e994c])pid[_0x2e994c][_0x9acaaf(0x125)]({'function':'emitHistory','args':_0x1cce34});}else logger[_0x9acaaf(0xf7)](_0x9acaaf(0x2a7));}),_0x3d56dd['on']('delete-alerts',(_0x32db78,_0xa303ac)=>{const _0x5c0ea3=_0x315dcc;if(validateAccess(_0xa303ac,_0x3f113e)[_0x5c0ea3(0x21e)]){if(pid[_0x2e994c])pid[_0x2e994c][_0x5c0ea3(0x125)]({'function':_0x5c0ea3(0x2b2),'args':_0x32db78});}else logger[_0x5c0ea3(0xf7)](_0x5c0ea3(0x1ee));}),_0x3d56dd['on'](_0x315dcc(0x2b0),(_0x270450,_0xac5808)=>{const _0x26a8fd=_0x315dcc;if(validateAccess(_0xac5808,_0x3f113e)[_0x26a8fd(0x21e)]){if(pid[_0x2e994c])pid[_0x2e994c][_0x26a8fd(0x125)]({'function':_0x26a8fd(0x119),'args':_0x270450});}else logger[_0x26a8fd(0xf7)](_0x26a8fd(0x1a8));}),_0x3d56dd['on'](_0x315dcc(0x228),(_0x21b615,_0x5cf7c8)=>{const _0x4f0222=_0x315dcc;if(validateAccess(_0x5cf7c8,_0x3f113e)[_0x4f0222(0x21e)]){if(pid[_0x2e994c])pid[_0x2e994c]['send']({'function':_0x4f0222(0x16f),'args':_0x21b615});}else logger[_0x4f0222(0xf7)]('Unauthorized\x20attempt\x20to\x20store\x20configuration');}),_0x3d56dd['on'](_0x315dcc(0x121),(_0x97633c,_0x35872c)=>{const _0x36140c=_0x315dcc;if(validateAccess(_0x35872c,_0x3f113e)['allow']){if(pid[_0x2e994c])pid[_0x2e994c]['send']({'function':_0x36140c(0x15b),'args':_0x97633c});}else logger[_0x36140c(0xf7)](_0x36140c(0x1f3));}),_0x3d56dd['on'](_0x315dcc(0x2c8),(_0x45c02c,_0x1c3a6c)=>{const _0x30c1bf=_0x315dcc;if(validateAccess(_0x1c3a6c,_0x3f113e)[_0x30c1bf(0x21e)]){if(pid[_0x2e994c])pid[_0x2e994c][_0x30c1bf(0x125)]({'function':_0x30c1bf(0x1fd),'args':_0x45c02c});}else logger[_0x30c1bf(0xf7)]('Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration');}),_0x3d56dd['on'](_0x315dcc(0x283),_0x2e3c3d=>{const _0x5cd0e7=_0x315dcc;if(validateAccess(_0x2e3c3d,_0x3f113e)['allow']){if(pid[_0x2e994c])pid[_0x2e994c][_0x5cd0e7(0x125)]({'function':'resetHistory','args':null});}else logger[_0x5cd0e7(0xf7)](_0x5cd0e7(0x218));}),_0x3d56dd['on'](_0x315dcc(0x1cd),_0x5ea9ab=>{const _0x1c3ee9=_0x315dcc;if(validateAccess(_0x5ea9ab,_0x3f113e)['allow']){if(pid[_0x2e994c])pid[_0x2e994c][_0x1c3ee9(0x125)]({'function':_0x1c3ee9(0x2d7),'args':null});}else logger[_0x1c3ee9(0xf7)](_0x1c3ee9(0x225));}),_0x3d56dd['on'](_0x315dcc(0x1de),(_0x49da8a,_0x30b2d0)=>{const _0x5ca90e=_0x315dcc;if(validateAccess(_0x30b2d0,_0x3f113e)[_0x5ca90e(0x21e)]){if(pid[_0x2e994c])pid[_0x2e994c][_0x5ca90e(0x125)]({'function':'placeOrder','args':_0x49da8a});}else logger['full'](_0x5ca90e(0x2ef));}),_0x3d56dd['on'](_0x315dcc(0x27a),_0x37006d=>{const _0x4c21f5=_0x315dcc;if(validateAccess(_0x37006d,_0x3f113e)[_0x4c21f5(0x21e)]){if(pid[_0x2e994c])pid[_0x2e994c][_0x4c21f5(0x125)]({'function':_0x4c21f5(0x234),'args':null});}else logger[_0x4c21f5(0xf7)](_0x4c21f5(0x1ff));}),_0x3d56dd['on'](_0x315dcc(0x199),_0x42276d=>{const _0xf0830e=_0x315dcc;if(validateAccess(_0x42276d,_0x3f113e)[_0xf0830e(0x21e)]){if(pid[_0x2e994c])pid[_0x2e994c][_0xf0830e(0x125)]({'function':'showConfig','args':null});}else logger['full'](_0xf0830e(0x2ca));}),_0x3d56dd['on'](_0x315dcc(0x2d6),_0x425fd7=>{const _0x3e9733=_0x315dcc;if(validateAccess(_0x425fd7,_0x3f113e)[_0x3e9733(0x21e)])updateBB(_0x3e9733(0x14b));else logger[_0x3e9733(0xf7)](_0x3e9733(0x253));}),_0x3d56dd['on'](_0x315dcc(0x132),_0x2a86b1=>{const _0x43b740=_0x315dcc;if(validateAccess(_0x2a86b1,_0x3f113e)[_0x43b740(0x21e)])getMessages();else logger[_0x43b740(0xf7)](_0x43b740(0x29b));}),_0x3d56dd['on']('confirm-message',(_0x51c5e0,_0x5c855a)=>{const _0x2674f5=_0x315dcc;if(validateAccess(_0x5c855a,_0x3f113e)[_0x2674f5(0x21e)])confirmMessage(_0x51c5e0);else logger['full']('Unauthorized\x20attempt\x20to\x20confirm\x20message');}),_0x3d56dd['on']('logout',_0x119e74=>{const _0x5d3873=_0x315dcc;if(validateAccess(_0x119e74,_0x3f113e)[_0x5d3873(0x21e)]){if(devices[_0x3f113e][_0x5d3873(0x196)])clearTimeout(devices[_0x3f113e]['pidRefreshToken']);if(devices[_0x3f113e][_0x5d3873(0x304)])clearTimeout(devices[_0x3f113e][_0x5d3873(0x304)]);removeSocketListeners(getClient(_0x3d56dd['id'])[_0x5d3873(0x127)]),addBlacklist(_0x3f113e),devices[_0x3f113e][_0x5d3873(0x204)]=null,devices[_0x3f113e]['telegram2FaApproval']=null,devices[_0x3f113e][_0x5d3873(0x2e8)][_0x5d3873(0x1e6)]=null,logger[_0x5d3873(0x139)](_0x5d3873(0x1cb)+_0x3f113e[_0x5d3873(0x27e)](-0x8)),io['to'](getClient(_0x3d56dd['id'])[_0x5d3873(0x127)])[_0x5d3873(0x203)](_0x5d3873(0x2b3),{'access':{'allow':![],'reason':_0x5d3873(0x240),'token':null}});}else logger[_0x5d3873(0xf7)](_0x5d3873(0x288));});}function removeSocketListeners(_0x2df535){getClientsWithUuid(_0x2df535)['forEach'](_0x2d79bc=>{const _0x4e40ab=_0x37cf;getSocket(_0x2d79bc['id'])[_0x4e40ab(0x111)]();});}function cleanSettings(){const _0x4b2c65=_0x5654c0;let _0x2da7c0=settings;return settings[_0x4b2c65(0x134)]&&settings[_0x4b2c65(0x134)]!=''&&(_0x2da7c0={..._0x2da7c0,'telegramToken':_0x4b2c65(0x150)}),settings['bbPassword']&&settings[_0x4b2c65(0x2de)]!=''&&(_0x2da7c0={..._0x2da7c0,'bbPassword':_0x4b2c65(0x150)}),settings[_0x4b2c65(0x260)]&&settings[_0x4b2c65(0x260)]!=''&&(_0x2da7c0={..._0x2da7c0,'marketcapApi':_0x4b2c65(0x150)}),(settings[_0x4b2c65(0x2de)]&&settings[_0x4b2c65(0x2de)]=='***'||settings[_0x4b2c65(0x134)]&&settings['telegramToken']==_0x4b2c65(0x258)||settings[_0x4b2c65(0x260)]&&settings[_0x4b2c65(0x260)]=='***')&&(_0x2da7c0={..._0x2da7c0,'restored':{'password':settings[_0x4b2c65(0x2de)]=='***','telegram':settings[_0x4b2c65(0x134)]=='***','marketcap':settings['marketcapApi']==_0x4b2c65(0x258)}}),_0x2da7c0;}async function updateBB(_0x2b433b){const _0x154db5=_0x5654c0;await backupConfigFiles(),installingUpdate=!![],config[_0x154db5(0x11a)](_0xbce74f=>{const _0x391903=_0x154db5;restartBot(_0xbce74f[_0x391903(0x2ab)]);});if(_0x2b433b==_0x154db5(0x14b))process[_0x154db5(0x125)]({'update':!![],'environment':environment},_0x215340=>{});else _0x2b433b==_0x154db5(0x2e4)&&process[_0x154db5(0x125)]({'reinstall':!![],'environment':environment},_0x6cf2f4=>{});}function startBot(_0x4f9ab3,_0x36b373,_0x512f16){const _0x33f96e=_0x5654c0;if(debugging)_0x4f9ab3[_0x33f96e(0x1be)]('-d');if(recreate)_0x4f9ab3[_0x33f96e(0x1be)]('-r');let _0x219d2d=![];const _0x51caf3=_0x4f9ab3[0x0];_0x36b373={..._0x36b373,'stdio':[_0x33f96e(0x112),_0x33f96e(0x112),_0x33f96e(0x112),'ipc']},pid[_0x51caf3]=childProcess[_0x33f96e(0x18f)](botfile,_0x4f9ab3,_0x36b373),pid[_0x51caf3]['on']('message',_0x29164e=>{const _0x2f3049=_0x33f96e;switch(Object[_0x2f3049(0x13a)](_0x29164e)[0x0]){case'botname':updateBotName(_0x51caf3,_0x29164e[_0x2f3049(0x2f7)]);break;case _0x2f3049(0x12b):updateBotManager();break;case _0x2f3049(0x2b3):updateStatus(_0x51caf3,_0x29164e[_0x2f3049(0x2b3)]);break;case _0x2f3049(0x18c):updateLive(_0x51caf3,_0x29164e[_0x2f3049(0x18c)]);break;case _0x2f3049(0x1b4):updateLive(_0x51caf3,_0x29164e[_0x2f3049(0x1b4)]),io['to'](_0x51caf3)[_0x2f3049(0x203)](_0x2f3049(0x2b3),{'access':{'allow':![],'reason':_0x2f3049(0x191),'token':null}});break;case'stop':_0x29164e[_0x2f3049(0x17e)]==_0x2f3049(0x142)&&restartBot(_0x51caf3);_0x29164e[_0x2f3049(0x17e)]==_0x2f3049(0x1bd)&&toggleBot(_0x51caf3,_0x2f3049(0x2a9),_0x2f3049(0x197));break;case _0x2f3049(0x21a):sendTelegramBot(_0x51caf3,_0x29164e[_0x2f3049(0x21a)]);break;case'telegrammsg':sendTelegramMsg(_0x29164e[_0x2f3049(0x20c)]);break;case'function':io['to'](_0x51caf3)[_0x2f3049(0x203)](_0x29164e[_0x2f3049(0x168)],_0x29164e['args']);break;}}),pid[_0x51caf3]['on'](_0x33f96e(0x115),function(_0x5936e5){if(_0x219d2d)return;_0x219d2d=!![],_0x512f16(_0x5936e5);}),pid[_0x51caf3]['on']('exit',async function(_0x27dcc2){const _0x41be92=_0x33f96e;if(terminating)return;if(installingUpdate){io[_0x41be92(0x10b)]();return;}if(_0x219d2d)return;_0x219d2d=!![],_0x512f16(null);const _0x54b0b5=dbConfig[_0x41be92(0x2c5)](_0x41be92(0x297))[_0x41be92(0x29f)]({'botID':_0x51caf3})[_0x41be92(0x164)]();_0x54b0b5&&(_0x54b0b5[_0x41be92(0x2b3)]=='enabled'||_0x54b0b5[_0x41be92(0x2b3)]=='new')&&(await sleep(0x3e8),updateLive(_0x51caf3,'stopped'),logger['full'](_0x41be92(0x206)+_0x51caf3),startBot([_0x51caf3,userID],{'cwd':bbpath},function(_0xdafb66){const _0x372344=_0x41be92;if(_0xdafb66)logger[_0x372344(0xf7)](_0xdafb66);}));});}function stopBot(_0x3916d5){const _0x43cfd9=_0x5654c0;getClientsWithBotID(_0x3916d5)[_0x43cfd9(0x11a)](_0x977234=>{const _0x4c1af4=_0x43cfd9;getSocket(_0x977234['id'])[_0x4c1af4(0x1c5)](!![]),removeClient(_0x977234['id']);}),pid[_0x3916d5]&&(pid[_0x3916d5][_0x43cfd9(0x1bd)](),pid[_0x3916d5]=null);}function stopAllBots(){const _0x597e82=_0x5654c0;terminating=!![];const _0x3f15d1=getEnabledBots();_0x3f15d1[_0x597e82(0x11a)](_0x1c8127=>{const _0x5d6e43=_0x597e82;stopBot(_0x1c8127[_0x5d6e43(0x2ab)]);});}function restartBot(_0x55458f){if(pid[_0x55458f])pid[_0x55458f]['kill']();}function addBot(){const _0x269d28=_0x5654c0;let _0x1b282b;for(let _0x1ce614=0x1;_0x1ce614<0x3e9;_0x1ce614++){_0x1b282b=_0x1ce614[_0x269d28(0x123)]()[_0x269d28(0x21c)](0x3,'0');let _0x1488d1=config[_0x269d28(0x29f)](_0x2022dd=>_0x2022dd['botID']==_0x1b282b);if(!_0x1488d1)break;}if(_0x1b282b===_0x269d28(0x220)){logger[_0x269d28(0xf7)]('The\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached');return;}logger[_0x269d28(0xf7)](_0x269d28(0x19f)+_0x1b282b),dbConfig[_0x269d28(0x2c5)](_0x269d28(0x297))[_0x269d28(0x1be)]({'botID':_0x1b282b,'botname':_0x269d28(0x1bc)+_0x1b282b,'status':'new','live':''})['write'](),startBot([_0x1b282b,userID],{'cwd':bbpath},function(_0x4495e3){if(_0x4495e3)logger['full'](_0x4495e3);}),config=getConfiguration(),io['to'](_0x269d28(0x1bb))[_0x269d28(0x203)](_0x269d28(0x297),config),broadcastToBots(_0x269d28(0x297),JSON[_0x269d28(0x2f4)](config));}function deleteBot(_0x4f1477){const _0x5c7488=_0x5654c0;getClientsWithBotID(_0x4f1477)[_0x5c7488(0x11a)](_0x5b9ae2=>{const _0x5b39a7=_0x5c7488;getSocket(_0x5b9ae2['id'])[_0x5b39a7(0x1c5)](!![]),removeClient(_0x5b9ae2['id']);}),dbConfig['get'](_0x5c7488(0x297))['remove']({'botID':_0x4f1477})['write'](),logger[_0x5c7488(0xf7)](_0x5c7488(0x282)+_0x4f1477),stopBot(_0x4f1477);try{if(fs[_0x5c7488(0x27b)](path['join'](configpath,_0x5c7488(0x302)+_0x4f1477+_0x5c7488(0x16c))))fs[_0x5c7488(0x151)](path[_0x5c7488(0x140)](configpath,_0x5c7488(0x302)+_0x4f1477+_0x5c7488(0x16c)));if(fs[_0x5c7488(0x27b)](path[_0x5c7488(0x140)](configpath,'bot-'+_0x4f1477+_0x5c7488(0x252))))fs[_0x5c7488(0x151)](path[_0x5c7488(0x140)](configpath,_0x5c7488(0x302)+_0x4f1477+_0x5c7488(0x252)));if(fs[_0x5c7488(0x27b)](path[_0x5c7488(0x140)](configpath,_0x5c7488(0x302)+_0x4f1477+'-performance.json')))fs[_0x5c7488(0x151)](path[_0x5c7488(0x140)](configpath,_0x5c7488(0x302)+_0x4f1477+_0x5c7488(0x231)));if(fs[_0x5c7488(0x27b)](path[_0x5c7488(0x140)](configpath,_0x5c7488(0x302)+_0x4f1477+_0x5c7488(0x1ae))))fs[_0x5c7488(0x151)](path[_0x5c7488(0x140)](configpath,_0x5c7488(0x302)+_0x4f1477+_0x5c7488(0x1ae)));}catch(_0x1219c1){if(_0x1219c1)logger['full'](_0x5c7488(0x28a),_0x1219c1);}config=getConfiguration(),io['to'](_0x5c7488(0x1bb))[_0x5c7488(0x203)]('bots',config),broadcastToBots(_0x5c7488(0x297),JSON[_0x5c7488(0x2f4)](config));}function toggleBot(_0x1f0b90,_0xbbad8c,_0x34bc37){const _0x33b7fe=_0x5654c0;dbConfig[_0x33b7fe(0x2c5)](_0x33b7fe(0x297))[_0x33b7fe(0x29f)]({'botID':_0x1f0b90})['assign']({'status':_0xbbad8c})[_0x33b7fe(0x26f)]({'live':_0x34bc37})[_0x33b7fe(0x170)]();if(_0xbbad8c==_0x33b7fe(0x186)||_0xbbad8c=='new')logger['full'](_0x33b7fe(0x1d7)+_0x1f0b90),startBot([_0x1f0b90,userID],{'cwd':bbpath},function(_0x3ab68c){const _0x4d31dd=_0x33b7fe;if(_0x3ab68c)logger[_0x4d31dd(0xf7)](_0x3ab68c);});else(_0xbbad8c==_0x33b7fe(0x2a9)||_0xbbad8c==_0x33b7fe(0x1b5))&&(logger[_0x33b7fe(0xf7)](_0x33b7fe(0x1ba)+_0x1f0b90),stopBot(_0x1f0b90));config=getConfiguration(),io['to'](_0x33b7fe(0x1bb))[_0x33b7fe(0x203)](_0x33b7fe(0x297),config),broadcastToBots('bots',JSON['stringify'](config));}function toggleStatus(_0x369a6c){const _0x5195fe=_0x5654c0;let _0x12b4d4=dbConfig['get'](_0x5195fe(0x297))[_0x5195fe(0x29f)]({'botID':_0x369a6c})['value'](),_0x104c45;if(_0x12b4d4['status']===_0x5195fe(0x186))_0x104c45=_0x5195fe(0x2a9);else{if(_0x12b4d4['status']===_0x5195fe(0x1dd))_0x104c45=_0x5195fe(0x1b5);else{if(_0x12b4d4[_0x5195fe(0x2b3)]===_0x5195fe(0x1b5))_0x104c45=_0x5195fe(0x1dd);else{if(_0x12b4d4[_0x5195fe(0x2b3)]===_0x5195fe(0x2a9))_0x104c45=_0x5195fe(0x186);}}}return _0x104c45;}function updateStatus(_0x39a22c,_0x16632d){const _0x1ba776=_0x5654c0;dbConfig[_0x1ba776(0x2c5)](_0x1ba776(0x297))[_0x1ba776(0x29f)]({'botID':_0x39a22c})['assign']({'status':_0x16632d})['write'](),config=getConfiguration(),io['to'](_0x1ba776(0x1bb))['emit'](_0x1ba776(0x297),config),broadcastToBots(_0x1ba776(0x297),JSON[_0x1ba776(0x2f4)](config));}function updateLive(_0x35c02e,_0x4a1eef){const _0x40f58d=_0x5654c0;dbConfig['get']('bots')['find']({'botID':_0x35c02e})[_0x40f58d(0x26f)]({'live':_0x4a1eef})[_0x40f58d(0x170)](),config=getConfiguration(),io['to'](_0x40f58d(0x1bb))[_0x40f58d(0x203)](_0x40f58d(0x297),config),broadcastToBots(_0x40f58d(0x297),JSON['stringify'](config));}function updateBotName(_0xaa8795,_0x24cce9){const _0x5ea502=_0x5654c0;dbConfig[_0x5ea502(0x2c5)](_0x5ea502(0x297))[_0x5ea502(0x29f)]({'botID':_0xaa8795})[_0x5ea502(0x26f)]({'botname':_0x24cce9})[_0x5ea502(0x170)](),config=getConfiguration(),io['to'](_0x5ea502(0x1bb))['emit'](_0x5ea502(0x297),config),broadcastToBots('bots',JSON['stringify'](config));}function updateBotManager(){const _0xe7608=_0x5654c0;config=getConfiguration(),io['to'](_0xe7608(0x1bb))[_0xe7608(0x203)](_0xe7608(0x297),config),broadcastToBots('bots',JSON[_0xe7608(0x2f4)](config));}function toggleBotMode(_0x8df28c){const _0xb1c6c6=_0x5654c0;if(pid[_0x8df28c])pid[_0x8df28c]['send']({'function':_0xb1c6c6(0x131),'args':null});else{const _0x3cd920=configpath+_0xb1c6c6(0x302)+_0x8df28c+_0xb1c6c6(0x16c),_0x53883f=fs[_0xb1c6c6(0x1ed)](_0x3cd920),_0xa8cb47=JSON['parse'](_0x53883f),_0x30881b=_0xa8cb47[_0xb1c6c6(0x2dd)][0x0]['headless'];_0xa8cb47[_0xb1c6c6(0x2dd)][0x0][_0xb1c6c6(0x22b)]=!_0x30881b;const _0x114eae=JSON[_0xb1c6c6(0x2f4)](_0xa8cb47,null,0x2);fs[_0xb1c6c6(0x216)](_0x3cd920,_0x114eae),config=getConfiguration(),io['to'](_0xb1c6c6(0x1bb))[_0xb1c6c6(0x203)]('bots',config),broadcastToBots(_0xb1c6c6(0x297),JSON[_0xb1c6c6(0x2f4)](config));}}function validateTelegram(_0x27afc5){const _0x156ecf=_0x5654c0;if(_0x27afc5[_0x156ecf(0x307)][_0x156ecf(0x2f0)]!=settings[_0x156ecf(0x117)]&&'@'+_0x27afc5[_0x156ecf(0x307)][_0x156ecf(0x2f0)]!=settings['telegramUsername']||_0x27afc5[_0x156ecf(0x2cf)]['id']!=settings[_0x156ecf(0x214)])return sendTelegram(_0x27afc5['chat']['id'],_0x156ecf(0x1a2),{'parse_mode':_0x156ecf(0x2c4)}),![];return!![];}async function initTelegram(){const _0x422053=_0x5654c0;tgBot&&(await tgBot[_0x422053(0x17e)](),await sleep(0x7d0));tgBot=new Telegraf(settings[_0x422053(0x134)]);let _0x272973='You\x20can\x20use\x20the\x20following\x20commands:\x0a';_0x272973+='\x0a',_0x272973+=_0x422053(0x215),_0x272973+='/disable\x20-\x20disable\x20notifications\x0a',_0x272973+=_0x422053(0x12c),_0x272973+=_0x422053(0x284),_0x272973+=_0x422053(0x1d0),_0x272973+=_0x422053(0x1b7),_0x272973+=_0x422053(0x267),_0x272973+='/names\x20-\x20show\x20bot\x20names\x0a',_0x272973+=_0x422053(0x26b),_0x272973+=_0x422053(0x1d2),_0x272973+=_0x422053(0x24f),_0x272973+=_0x422053(0x29a),_0x272973+='/backup\x20-\x20receive\x20backup\x20files\x0a',_0x272973+=_0x422053(0x2be),_0x272973+=_0x422053(0x16a),_0x272973+=_0x422053(0x2e9);let _0x2d23c1='Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a';_0x2d23c1+='\x0a',_0x2d23c1+=_0x272973,tgBot[_0x422053(0xf8)]((_0x186ac6,_0x1db0c9)=>{const _0x355e9a=_0x422053;logger[_0x355e9a(0x195)](getTimeStamp()+_0x355e9a(0x146)),logger[_0x355e9a(0x139)](_0x355e9a(0x169),_0x186ac6);}),tgBot[_0x422053(0x2f2)](async(_0x3a64ab,_0x44bb4f)=>{const _0x4c9f8c=_0x422053;if(settings[_0x4c9f8c(0x214)]||_0x3a64ab[_0x4c9f8c(0x14b)][_0x4c9f8c(0x1fc)][_0x4c9f8c(0x306)]!=_0x4c9f8c(0x14c)){if(!validateTelegram(_0x3a64ab))return;}_0x44bb4f();}),tgBot[_0x422053(0x286)](_0x422053(0x109),async _0x1cf380=>{const _0x1d38b=_0x422053;if(_0x1cf380[_0x1d38b(0x307)][_0x1d38b(0x2f0)]==settings['telegramUsername']||'@'+_0x1cf380[_0x1d38b(0x307)]['username']==settings['telegramUsername']){if(!settings[_0x1d38b(0x214)])updateSetting('telegramChatId',_0x1cf380[_0x1d38b(0x2cf)]['id']);else{if(!validateTelegram(_0x1cf380))return;}}else{if(!validateTelegram(_0x1cf380))return;}updateSetting(_0x1d38b(0x1f1),!![]),await sendTelegram(_0x1cf380[_0x1d38b(0x2cf)]['id'],_0x2d23c1);}),tgBot[_0x422053(0x286)](_0x422053(0xeb),async _0x265301=>{const _0x399ec2=_0x422053;updateSetting('telegramEnabled',!![]),await sendTelegram(_0x265301['chat']['id'],_0x399ec2(0x2bc));}),tgBot[_0x422053(0x286)]('disable',async _0xc7fb46=>{const _0x25eecd=_0x422053;await sendTelegram(_0xc7fb46[_0x25eecd(0x2cf)]['id'],_0x25eecd(0x2fd)),updateSetting(_0x25eecd(0x1f1),![]);}),tgBot['command'](_0x422053(0x2c1),async _0x3c03c4=>{const _0x247f5a=_0x422053,_0xa2a2b3=Markup['inlineKeyboard']([Markup[_0x247f5a(0xf1)][_0x247f5a(0x26c)](_0x247f5a(0x12f),_0x247f5a(0x1ad)),Markup['button'][_0x247f5a(0x26c)]('Alerts',_0x247f5a(0x20d)),Markup['button'][_0x247f5a(0x26c)]('All','config_all')]);_0x3c03c4['reply'](_0x247f5a(0x230),_0xa2a2b3);}),tgBot[_0x422053(0xf4)](_0x422053(0x1ad),async _0x7c9c5e=>{const _0x7bec04=_0x422053;_0x7c9c5e[_0x7bec04(0x1c4)](),updateSetting(_0x7bec04(0x296),_0x7bec04(0x209)),updateSetting('telegramEnabled',!![]),await sendTelegram(_0x7c9c5e['chat']['id'],_0x7bec04(0x2fb));}),tgBot['action'](_0x422053(0x20d),async _0x45f228=>{const _0xbfc729=_0x422053;_0x45f228[_0xbfc729(0x1c4)](),updateSetting('telegramEvents',_0xbfc729(0x2d0)),updateSetting(_0xbfc729(0x1f1),!![]),await sendTelegram(_0x45f228[_0xbfc729(0x2cf)]['id'],_0xbfc729(0x13d));}),tgBot[_0x422053(0xf4)](_0x422053(0x1b9),async _0x308f9f=>{const _0x442726=_0x422053;_0x308f9f[_0x442726(0x1c4)](),updateSetting(_0x442726(0x296),_0x442726(0x16b)),updateSetting(_0x442726(0x1f1),!![]),await sendTelegram(_0x308f9f['chat']['id'],_0x442726(0x1d5));}),tgBot[_0x422053(0x286)](_0x422053(0x2b3),async _0x424e79=>{const _0x34ba0b=_0x422053,_0x5bafcc=getBotsWithMode();let _0x35d93d=_0x34ba0b(0x15e);config['forEach'](_0x2ce84b=>{const _0x4c234a=_0x34ba0b,_0x326320=_0x5bafcc[_0x4c234a(0x29f)](_0x18def4=>_0x18def4['botID']==_0x2ce84b[_0x4c234a(0x2ab)])['mode'];_0x35d93d+=_0x4c234a(0x1bc)+_0x2ce84b[_0x4c234a(0x2ab)]+':\x20'+_0x2ce84b[_0x4c234a(0x2b3)]+_0x4c234a(0x27d)+_0x326320+_0x4c234a(0x27d)+_0x2ce84b['live']+'\x0a';}),_0x35d93d+='\x0a',_0x35d93d+=_0x34ba0b(0x268),_0x35d93d+=!settings[_0x34ba0b(0x1f1)]?'Notifications\x20disabled\x0a':'Notifications\x20enabled\x0a',_0x35d93d+=settings['telegramEnabled']?settings[_0x34ba0b(0x296)]==_0x34ba0b(0x16b)?_0x34ba0b(0x189):_0x34ba0b(0x210)+settings[_0x34ba0b(0x296)]+_0x34ba0b(0x16e):'',await sendTelegram(_0x424e79[_0x34ba0b(0x2cf)]['id'],_0x35d93d,{'parse_mode':_0x34ba0b(0x2c4)});}),tgBot[_0x422053(0x286)](_0x422053(0x142),async _0xb20a47=>{const _0x2eda61=_0x422053,_0x28104c=getEnabledBots();if(_0x28104c[_0x2eda61(0x179)]==0x0)await sendTelegram(_0xb20a47[_0x2eda61(0x2cf)]['id'],_0x2eda61(0x299));else{if(_0x28104c[_0x2eda61(0x179)]>0x1)_0x28104c['push']({'botID':_0x2eda61(0x16b)});let _0x24dd5d=[],_0x514004=[];const _0x5d7323=_0x28104c[_0x2eda61(0x179)]%0x4==0x0||_0x28104c[_0x2eda61(0x179)]%0x4==0x3||_0x28104c[_0x2eda61(0x179)]%0x3==0x1?0x4:0x3;let _0x409a21=0x0;_0x28104c[_0x2eda61(0x11a)]((_0x45fae2,_0x3b6832)=>{const _0xf8243=_0x2eda61;if(_0x3b6832%_0x5d7323==0x0)_0x514004=[];_0x514004[_0xf8243(0x1be)](Markup['button'][_0xf8243(0x26c)](_0x45fae2['botID']==_0xf8243(0x16b)?_0xf8243(0x180):_0xf8243(0x1bc)+_0x45fae2[_0xf8243(0x2ab)],'restart_'+_0x45fae2['botID'])),_0x3b6832%_0x5d7323==0x0&&(_0x24dd5d[_0x409a21]=_0x514004,_0x409a21++);});const _0x21526e=Markup['inlineKeyboard'](_0x24dd5d);_0xb20a47[_0x2eda61(0x1ef)](_0x2eda61(0x2fc),_0x21526e);}}),tgBot[_0x422053(0xf4)](/restart_(.+)/,async _0x3d68b9=>{const _0x31be02=_0x422053,_0x21eb4d=_0x3d68b9[_0x31be02(0x1c6)][0x1];_0x3d68b9['editMessageReplyMarkup'](),_0x21eb4d=='all'?config[_0x31be02(0x11a)](_0x57aee1=>{restartBot(_0x57aee1['botID']);}):restartBot(_0x21eb4d);}),tgBot[_0x422053(0x286)]('on',async _0x329e0b=>{const _0x11c82a=_0x422053,_0x512142=getDisabledBots();if(_0x512142['length']==0x0)await sendTelegram(_0x329e0b[_0x11c82a(0x2cf)]['id'],_0x11c82a(0x177));else{if(_0x512142['length']>0x1)_0x512142['push']({'botID':_0x11c82a(0x16b)});let _0x1d7654=[],_0x35e77d=[];const _0x18ac1d=_0x512142[_0x11c82a(0x179)]%0x4==0x0||_0x512142['length']%0x4==0x3||_0x512142[_0x11c82a(0x179)]%0x3==0x1?0x4:0x3;let _0x282a91=0x0;_0x512142['forEach']((_0x4c99f7,_0x202adf)=>{const _0x297386=_0x11c82a;if(_0x202adf%_0x18ac1d==0x0)_0x35e77d=[];_0x35e77d[_0x297386(0x1be)](Markup['button'][_0x297386(0x26c)](_0x4c99f7[_0x297386(0x2ab)]==_0x297386(0x16b)?'All\x20bots':'Bot\x20'+_0x4c99f7[_0x297386(0x2ab)],'on_'+_0x4c99f7[_0x297386(0x2ab)])),_0x202adf%_0x18ac1d==0x0&&(_0x1d7654[_0x282a91]=_0x35e77d,_0x282a91++);});const _0x5d85bb=Markup[_0x11c82a(0x23d)](_0x1d7654);_0x329e0b[_0x11c82a(0x1ef)](_0x11c82a(0x247),_0x5d85bb);}}),tgBot[_0x422053(0xf4)](/on_(.+)/,async _0x2361c8=>{const _0x50d326=_0x422053,_0x4a03d8=_0x2361c8['match'][0x1];_0x2361c8[_0x50d326(0x1c4)]();if(_0x4a03d8==_0x50d326(0x16b)){const _0x37fcfe=getDisabledBots();await sendTelegram(_0x2361c8[_0x50d326(0x2cf)]['id'],_0x50d326(0x1c9)),_0x37fcfe[_0x50d326(0x11a)](_0x3224ed=>{const _0x3d72f=_0x50d326;if(_0x3224ed[_0x3d72f(0x2ab)]!=_0x3d72f(0x16b))toggleBot(_0x3224ed[_0x3d72f(0x2ab)],toggleStatus(_0x3224ed[_0x3d72f(0x2ab)]),'stopped');});}else await sendTelegram(_0x2361c8[_0x50d326(0x2cf)]['id'],_0x50d326(0x1ce)+_0x4a03d8),toggleBot(_0x4a03d8,toggleStatus(_0x4a03d8),'stopped');}),tgBot[_0x422053(0x286)](_0x422053(0x114),async _0x4f0664=>{const _0x2eadcc=_0x422053,_0xaa74ee=getEnabledBots();if(_0xaa74ee[_0x2eadcc(0x179)]==0x0)await sendTelegram(_0x4f0664[_0x2eadcc(0x2cf)]['id'],_0x2eadcc(0x299));else{if(_0xaa74ee[_0x2eadcc(0x179)]>0x1)_0xaa74ee[_0x2eadcc(0x1be)]({'botID':'all'});let _0x5eee6a=[],_0x523c56=[];const _0x402a21=_0xaa74ee[_0x2eadcc(0x179)]%0x4==0x0||_0xaa74ee[_0x2eadcc(0x179)]%0x4==0x3||_0xaa74ee[_0x2eadcc(0x179)]%0x3==0x1?0x4:0x3;let _0x4bc27e=0x0;_0xaa74ee[_0x2eadcc(0x11a)]((_0x3a3a42,_0x5547f2)=>{const _0x3fa3b3=_0x2eadcc;if(_0x5547f2%_0x402a21==0x0)_0x523c56=[];_0x523c56[_0x3fa3b3(0x1be)](Markup[_0x3fa3b3(0xf1)][_0x3fa3b3(0x26c)](_0x3a3a42['botID']==_0x3fa3b3(0x16b)?_0x3fa3b3(0x180):'Bot\x20'+_0x3a3a42[_0x3fa3b3(0x2ab)],'off_'+_0x3a3a42[_0x3fa3b3(0x2ab)])),_0x5547f2%_0x402a21==0x0&&(_0x5eee6a[_0x4bc27e]=_0x523c56,_0x4bc27e++);});const _0x4080ec=Markup[_0x2eadcc(0x23d)](_0x5eee6a);_0x4f0664[_0x2eadcc(0x1ef)]('Which\x20bot\x20do\x20you\x20want\x20to\x20stop?',_0x4080ec);}}),tgBot['action'](/off_(.+)/,async _0xfe7f6e=>{const _0x3e789c=_0x422053,_0x5bc330=_0xfe7f6e[_0x3e789c(0x1c6)][0x1];_0xfe7f6e[_0x3e789c(0x1c4)]();if(_0x5bc330==_0x3e789c(0x16b)){const _0x3314f4=getEnabledBots();await sendTelegram(_0xfe7f6e[_0x3e789c(0x2cf)]['id'],_0x3e789c(0x185)),_0x3314f4['forEach'](_0x59f1fa=>{const _0x3ad17d=_0x3e789c;if(_0x59f1fa[_0x3ad17d(0x2ab)]!=_0x3ad17d(0x16b))toggleBot(_0x59f1fa[_0x3ad17d(0x2ab)],toggleStatus(_0x59f1fa[_0x3ad17d(0x2ab)]),_0x3ad17d(0x197));});}else await sendTelegram(_0xfe7f6e['chat']['id'],'Bot\x20Mgr\x20>\x20stopping\x20Bot\x20'+_0x5bc330),toggleBot(_0x5bc330,toggleStatus(_0x5bc330),_0x3e789c(0x197));}),tgBot[_0x422053(0x286)](_0x422053(0x19e),async _0x4e83bd=>{const _0x5db126=_0x422053,_0x17a94c=getEnabledBots();if(_0x17a94c[_0x5db126(0x179)]==0x0)await sendTelegram(_0x4e83bd['chat']['id'],_0x5db126(0x299));else{if(_0x17a94c[_0x5db126(0x179)]>0x1){let _0xd077c6=[],_0x2584d5=[];const _0x106ab9=_0x17a94c[_0x5db126(0x179)]%0x4==0x0||_0x17a94c[_0x5db126(0x179)]%0x4==0x3||_0x17a94c[_0x5db126(0x179)]%0x3==0x1?0x4:0x3;let _0x510368=0x0;_0x17a94c[_0x5db126(0x11a)]((_0x4a351b,_0x160f33)=>{const _0x50af81=_0x5db126;if(_0x160f33%_0x106ab9==0x0)_0x2584d5=[];_0x2584d5['push'](Markup[_0x50af81(0xf1)]['callback'](_0x50af81(0x1bc)+_0x4a351b[_0x50af81(0x2ab)],_0x50af81(0xfa)+_0x4a351b[_0x50af81(0x2ab)])),_0x160f33%_0x106ab9==0x0&&(_0xd077c6[_0x510368]=_0x2584d5,_0x510368++);});const _0x429336=Markup[_0x5db126(0x23d)](_0xd077c6);_0x4e83bd[_0x5db126(0x1ef)](_0x5db126(0x2aa),_0x429336);}else{const _0x1acff4=_0x17a94c[0x0][_0x5db126(0x2ab)];if(pid[_0x1acff4])pid[_0x1acff4][_0x5db126(0x125)]({'function':_0x5db126(0x157),'args':null});}}}),tgBot[_0x422053(0xf4)](/metrics_(.+)/,async _0x595562=>{const _0xd2767a=_0x422053,_0x1e400f=_0x595562[_0xd2767a(0x1c6)][0x1];_0x595562[_0xd2767a(0x1c4)]();if(pid[_0x1e400f])pid[_0x1e400f]['send']({'function':_0xd2767a(0x157),'args':null});}),tgBot[_0x422053(0x286)](_0x422053(0x19d),async _0xd2c614=>{const _0x4b65a3=_0x422053,_0x2bb7d5=getEnabledBots();if(_0x2bb7d5['length']==0x0)await sendTelegram(_0xd2c614[_0x4b65a3(0x2cf)]['id'],'No\x20bots\x20running\x20right\x20now');else{if(_0x2bb7d5[_0x4b65a3(0x179)]>0x1){let _0x1d70b7=[],_0xf680a1=[];const _0xed3652=_0x2bb7d5[_0x4b65a3(0x179)]%0x4==0x0||_0x2bb7d5[_0x4b65a3(0x179)]%0x4==0x3||_0x2bb7d5[_0x4b65a3(0x179)]%0x3==0x1?0x4:0x3;let _0x47b235=0x0;_0x2bb7d5['forEach']((_0x40e3e0,_0x52fa47)=>{const _0x32d99b=_0x4b65a3;if(_0x52fa47%_0xed3652==0x0)_0xf680a1=[];_0xf680a1[_0x32d99b(0x1be)](Markup[_0x32d99b(0xf1)][_0x32d99b(0x26c)](_0x32d99b(0x1bc)+_0x40e3e0[_0x32d99b(0x2ab)],_0x32d99b(0x1a7)+_0x40e3e0[_0x32d99b(0x2ab)])),_0x52fa47%_0xed3652==0x0&&(_0x1d70b7[_0x47b235]=_0xf680a1,_0x47b235++);});const _0x1eda03=Markup[_0x4b65a3(0x23d)](_0x1d70b7);_0xd2c614[_0x4b65a3(0x1ef)](_0x4b65a3(0x1f6),_0x1eda03);}else{const _0x7eca28=_0x2bb7d5[0x0][_0x4b65a3(0x2ab)];if(pid[_0x7eca28])pid[_0x7eca28][_0x4b65a3(0x125)]({'function':_0x4b65a3(0x1a4),'args':null});}}}),tgBot[_0x422053(0xf4)](/portfolio_(.+)/,async _0x452ffe=>{const _0xc20ffb=_0x452ffe['match'][0x1];_0x452ffe['editMessageReplyMarkup']();if(pid[_0xc20ffb])pid[_0xc20ffb]['send']({'function':'sendPortfolioTelegram','args':null});}),tgBot[_0x422053(0x286)](_0x422053(0x2e6),async _0x1a3e4e=>{const _0x3478ef=_0x422053,_0x1433c3='logs';await zipFiles(_0x1433c3);const _0x1fa3c9=zippath+(_0x1433c3+_0x3478ef(0x238));_0x1a3e4e[_0x3478ef(0x2ba)]({'source':_0x1fa3c9})['then'](()=>{})['catch'](_0x187d75=>logger['debug'](_0x3478ef(0x213)+_0x1433c3+_0x3478ef(0x21f),_0x187d75));}),tgBot[_0x422053(0x286)](_0x422053(0x2eb),async _0x41cb58=>{const _0x48035d=_0x422053,_0x21c886=_0x48035d(0x2eb);await backupConfigFiles(),await zipFiles(_0x21c886);const _0x107773=zippath+(_0x21c886+_0x48035d(0x238));_0x41cb58[_0x48035d(0x2ba)]({'source':_0x107773})[_0x48035d(0x11c)](()=>{})['catch'](_0x3398ea=>logger[_0x48035d(0x139)](_0x48035d(0x213)+_0x21c886+_0x48035d(0x21f),_0x3398ea));}),tgBot['command'](_0x422053(0x14b),async _0x15efdc=>{const _0x17d0e8=_0x422053;await getMessages();if(!updateAvailable)await sendTelegram(_0x15efdc[_0x17d0e8(0x2cf)]['id'],_0x17d0e8(0x2c6));else{if(!validInstallation)await sendTelegram(_0x15efdc['chat']['id'],_0x17d0e8(0x243));else{const _0x11742f=Markup['inlineKeyboard']([Markup[_0x17d0e8(0xf1)]['callback']('Yes',_0x17d0e8(0x1f8)),Markup[_0x17d0e8(0xf1)]['callback']('No',_0x17d0e8(0xf3))]);_0x15efdc[_0x17d0e8(0x1ef)](_0x17d0e8(0x227),_0x11742f);}}}),tgBot[_0x422053(0xf4)](/update_(.+)/,async _0x162d72=>{const _0x1f8101=_0x422053,_0x30c302=_0x162d72[_0x1f8101(0x1c6)][0x1];_0x162d72[_0x1f8101(0x1c4)](),_0x30c302==_0x1f8101(0x241)&&(await sendTelegram(_0x162d72[_0x1f8101(0x2cf)]['id'],_0x1f8101(0x1e1)),updateBB('update')),_0x30c302=='no'&&await sendTelegram(_0x162d72['chat']['id'],_0x1f8101(0x1a3));}),tgBot[_0x422053(0x286)]('reinstall',async _0x1339a9=>{const _0x2e8780=_0x422053;if(!validInstallation)await sendTelegram(_0x1339a9[_0x2e8780(0x2cf)]['id'],_0x2e8780(0x2cc));else{const _0x39fdac=Markup[_0x2e8780(0x23d)]([Markup['button'][_0x2e8780(0x26c)](_0x2e8780(0x148),_0x2e8780(0x14f)),Markup[_0x2e8780(0xf1)][_0x2e8780(0x26c)]('No','reinstall_no')]);_0x1339a9[_0x2e8780(0x1ef)](_0x2e8780(0x207),_0x39fdac);}}),tgBot[_0x422053(0xf4)](/reinstall_(.+)/,async _0x2be76a=>{const _0x1e8b4c=_0x422053,_0x262adb=_0x2be76a[_0x1e8b4c(0x1c6)][0x1];_0x2be76a[_0x1e8b4c(0x1c4)](),_0x262adb==_0x1e8b4c(0x241)&&(await sendTelegram(_0x2be76a[_0x1e8b4c(0x2cf)]['id'],_0x1e8b4c(0x2b1)),updateBB(_0x1e8b4c(0x2e4))),_0x262adb=='no'&&await sendTelegram(_0x2be76a['chat']['id'],_0x1e8b4c(0xef));}),tgBot[_0x422053(0x286)]('toggle',async _0x44f7e8=>{const _0x53add4=_0x422053,_0x4917b7=getBotsWithMode();if(_0x4917b7[_0x53add4(0x179)]==0x0)await sendTelegram(_0x44f7e8[_0x53add4(0x2cf)]['id'],_0x53add4(0x299));else{let _0x5ba5d2=[],_0x484e33=[];const _0xed3ae1=0x2;let _0x7c3580=0x0;_0x4917b7[_0x53add4(0x11a)]((_0x579c35,_0x43a554)=>{const _0x1f415a=_0x53add4;if(_0x43a554%_0xed3ae1==0x0)_0x484e33=[];_0x484e33[_0x1f415a(0x1be)](Markup[_0x1f415a(0xf1)][_0x1f415a(0x26c)](_0x1f415a(0x1bc)+_0x579c35['botID']+'\x20('+_0x579c35[_0x1f415a(0xfc)]+')',_0x1f415a(0x2b6)+_0x579c35[_0x1f415a(0x2ab)])),_0x43a554%_0xed3ae1==0x0&&(_0x5ba5d2[_0x7c3580]=_0x484e33,_0x7c3580++);});const _0x4873be=Markup[_0x53add4(0x23d)](_0x5ba5d2);_0x44f7e8['reply'](_0x53add4(0x2ee),_0x4873be);}}),tgBot[_0x422053(0xf4)](/toggle_(.+)/,async _0x292f0e=>{const _0x2ba9eb=_0x422053,_0x107416=_0x292f0e[_0x2ba9eb(0x1c6)][0x1];_0x292f0e[_0x2ba9eb(0x1c4)]();const _0x356e47=getBotsWithMode(),_0x354772=_0x356e47['find'](_0x36b656=>_0x36b656[_0x2ba9eb(0x2ab)]==_0x107416),_0x41a00e=_0x354772[_0x2ba9eb(0xfc)]==_0x2ba9eb(0x2a3)?'manual':_0x2ba9eb(0x2a3);await sendTelegram(_0x292f0e['chat']['id'],_0x2ba9eb(0x289)+_0x107416+'\x20to\x20'+_0x41a00e+_0x2ba9eb(0x217)),toggleBotMode(_0x107416);}),tgBot['command'](_0x422053(0x27c),async _0x3cb5b8=>{const _0x1486f9=_0x422053;let _0x502f68='';config[_0x1486f9(0x11a)](_0x8d4e60=>{const _0x4ca3a=_0x1486f9;_0x502f68+='Bot\x20'+_0x8d4e60['botID']+':\x20'+_0x8d4e60[_0x4ca3a(0x2f7)]+'\x0a';}),await sendTelegram(_0x3cb5b8['chat']['id'],_0x502f68,{'parse_mode':'HTML'});}),tgBot[_0x422053(0x286)](_0x422053(0x2ed),async _0x522d98=>{const _0x1c8f2a=_0x422053;await sendTelegram(_0x522d98[_0x1c8f2a(0x2cf)]['id'],_0x272973);}),process['once'](_0x422053(0x2a4),()=>tgBot['stop']('SIGINT')),process[_0x422053(0x2f6)](_0x422053(0x273),()=>tgBot[_0x422053(0x17e)](_0x422053(0x273))),tgBot['launch']();}function disableTelegram(){const _0x2d7693=_0x5654c0;tgBot&&tgBot[_0x2d7693(0x17e)]();}async function sendTelegram(_0x8f638e,_0x34fd0f,_0x130ec2){const _0x3f1bc2=_0x5654c0;_0x130ec2={..._0x130ec2,'disable_web_page_preview':!![]};try{await tgBot[_0x3f1bc2(0x21a)]['sendMessage'](_0x8f638e,_0x34fd0f,_0x130ec2);}catch(_0x5d69b7){logger[_0x3f1bc2(0x139)](_0x3f1bc2(0x1e2),_0x5d69b7);}}async function sendTelegramBot(_0x11fabe,_0x6010d){const _0x3095e1=_0x5654c0;if(settings[_0x3095e1(0x1f1)]){if(settings[_0x3095e1(0x296)]==_0x3095e1(0x16b)||(_0x6010d[_0x3095e1(0x2d1)]==_0x3095e1(0x115)||_0x6010d[_0x3095e1(0x2d1)]==_0x3095e1(0x129)||_0x6010d[_0x3095e1(0x2d1)]==_0x3095e1(0x118))&&settings['telegramEvents']==_0x3095e1(0x2d0)||_0x6010d[_0x3095e1(0x2d1)]==_0x3095e1(0x271)&&settings[_0x3095e1(0x296)]=='orders'){if(tgBot&&settings[_0x3095e1(0x214)]){if(_0x6010d[_0x3095e1(0x23e)])await sendTelegram(settings['telegramChatId'],_0x6010d[_0x3095e1(0x2f7)]+_0x3095e1(0x251)+_0x6010d['event']);else await sendTelegram(settings[_0x3095e1(0x214)],_0x3095e1(0x1bc)+_0x11fabe+'\x20>\x20'+_0x6010d[_0x3095e1(0x154)]);}}}}async function sendTelegramMsg(_0x55b83b,_0x45dedf=_0x5654c0(0x2c4)){const _0x3f5528=_0x5654c0;return settings[_0x3f5528(0x1f1)]&&tgBot&&settings['telegramChatId']?(await sendTelegram(settings[_0x3f5528(0x214)],_0x55b83b,{'parse_mode':_0x45dedf}),!![]):![];}function _0x537e(){const _0x501a1b=['readFileSync','Unauthorized\x20attempt\x20to\x20delete\x20alerts','reply','\x20|\x20user:\x20...','telegramEnabled','Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','/upload-backup','exit','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','Network\x20Interfaces:','update_yes','53916QqmSFN','map','Password\x20has\x20been\x20reset\x20to:\x20','message','storeFiat','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','files','getUTCHours','user','emit','telegramIpApproval','/:bot/configuration','Restarting\x20Bot\x20','Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?','*$1*','orders','getDate','server','telegrammsg','config_alerts','temporaryAccessAllowed','family','Notifications\x20types:\x20','ipaddr.js','/download/:type','Error\x20sending\x20','telegramChatId','/enable\x20-\x20enable\x20notifications\x0a','writeFileSync','\x20mode','Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history','Restore\x20process\x20aborted','telegram','/output-000.log','padStart','build2','allow','\x20files\x20over\x20Telegram:','1000','Unauthorized\x20attempt\x20to\x20add\x20bot','bot.js','decrypt','http','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','init','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','store-configuration','Unauthorized\x20attempt\x20to\x20update\x20bot','login\x20token\x20generated','headless','bbvReceive','Invalid\x20username\x20or\x20IP\x20address','reason','listen','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','-performance.json','bb-settings.json','Allow\x20login\x20from\x20IP\x20address\x20','cancelLoading','backup-files','generateAsync','exp','.zip','getFullYear','format','createServer','Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files','inlineKeyboard','showname','search','logged\x20out','yes','logs/','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','apply','User\x20has\x20been\x20validated','static','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','node-forge','\x1b[36m','private','address','login2fa_reject_','/:bot/portfolio','-----------------------------------------------------------------------------------','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','decode64','\x20>\x20','-events.json','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','getSeconds','f2aRequired','rmSync','bbUsername','***','1814010neXsCl','create','name','Login\x20accepted','mtime','Bot\x20Mgr\x20>\x20','code','marketcapApi','2783280YXCOgX','crypto','#RES#\x20if\x20running\x20locally\x0a','defaults','apiSecret','\x1b[35m','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','<b>Telegram\x20Bot\x20Status:</b>\x0a','3000','clientip','/status\x20-\x20show\x20bot(s)\x20status\x0a','callback','login\x20required','timestamp','assign','getTime','order','/:bot/support','SIGTERM','initclient','connected','util','bb-secure.json','socket.io','store-settings','cancel-loading','existsSync','names','\x20|\x20','slice','sha256','getHours',':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20','Deleted\x20Bot\x20','reset-history','/restart\x20-\x20restart\x20bot(s)\x0a','2FA\x20required','command','Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file','Unauthorized\x20attempt\x20to\x20log\x20out','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','Error\x20while\x20deleting\x20config\x20files:\x20','/:bot/performance','Unauthorized\x20attempt\x20to\x20update\x20settings','apiPassword','privateKey','output-003.log','internal','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20see\x20logs\x20for\x20details','set','cloneDeep','getMonth','Session\x20expired\x20for\x20user\x20...','telegramEvents','bots','environment','No\x20bots\x20running\x20right\x20now','/logs\x20-\x20receive\x20log\x20files\x0a','Unauthorized\x20attempt\x20to\x20get\x20messages','\x1b[34m','any','apiKey','find','::ffff:127.0.0.1','getMinutes','login\x20not\x20required','auto','SIGINT','tempaccess_reject_','7712nYFDct','Unauthorized\x20attempt\x20to\x20get\x20events','update-bot','disabled','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?','botID','jsonwebtoken','restore_no_','version','graphql-request','get-portfolio','Starting\x20Balance\x20Bot\x20reinstallation','deleteHistoryAlerts','status','tempaccess_5_','/:bot/history','toggle_','resetpw_no','manual','port','replyWithDocument','track','Notifications\x20enabled','binary','/update\x20-\x20update\x20Balance\x20Bot\x0a','production','ipv6','config','IPv4','hasOwnProperty','HTML','get','Your\x20installation\x20is\x20already\x20up\x20to\x20date','store','store-fiat','Server','Unauthorized\x20attempt\x20to\x20show\x20configuration','\x20|\x20client:\x20...','Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20','reinstall-bb','chat','alerts','type','remove','onepagemode','lastmsgemitted','whitelist','update-bb','getStartingBalances','date-fns',',\x20must\x20be\x20a\x204\x20digit\x20number','timeshift','lastmsgtelegram','bb-config.json','bot','bbPassword','sortBy','host','toIPv4MappedAddress','generateKeyPair','connection','reinstall','CoinMarketCap\x20API\x20key\x20validated','logs','Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files','access','/help\x20-\x20show\x20available\x20commands\x0a','constructor','backup','filter','help','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','username','0.0.0','use','backupfile','stringify','Error\x20removing\x20old\x20backup\x20files:','once','botname','::1','privateKeyFromPem','Temporary\x20access\x20rejected','Ok,\x20will\x20send\x20order\x20notifications\x20only','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','Notifications\x20disabled','max','data','build','#RED#Balance\x20Bot\x20is\x20already\x20running\x20on\x20port\x20','bot-','https://api.ipify.org?format=json','pidExpireLogin','\x20(1)','text','from','BCT','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','enable','privateKeyToPem','Backup\x20file\x20uploaded','Starting\x20(','Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled','backup-full.zip','button','latestversion','update_no','action','Restore\x20backup\x20file\x20','sort','full','catch','Unauthorized\x20attempt\x20to\x20download\x20','metrics_','\x20minutes','mode','bb/','settings.','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run','99DCFlEY','RSA-OAEP','backup/','log','params','sendFile','4284Figrfk','copyFileSync','accept','start','path','close','startsWith','telegram2FaApproval','output-001.log','publicKeyToPem','index.html','removeAllListeners','inherit','messages','off','error','temporary\x20token\x20generated','telegramUsername','success','getPortfolio','forEach',')\x20|\x20Bot\x20','then','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)','env','exec','logout','store-headless','login\x20token\x20valid','toString','range','send','number','uuid','node','warning','ETH','updatebotmanager','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','reject','add-bot','Orders','get-logs','toggleBotMode','get-messages','zip/','telegramToken','running','rsa','password','version.json','debug','keys','test','2FA\x20login\x20required','Ok,\x20will\x20send\x20alert\x20notifications\x20only','statSync','sign','join','tempaccess_30_','restart','remoteAddress','backup-full@','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager',':\x20Bot\x20Mgr\x20>\x20Telegram\x20error\x20occured','Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot','Yes','Unauthorized\x20attempt\x20to\x20confirm\x20message','temporary\x20access\x20not\x20allowed','update','/start','includes','download','reinstall_yes','************','unlinkSync','|@|','tempaccess_15_','event','temp/','min','sendMetricsTelegram','encryptedUuid','settings','handshake','storeHeadless','delete-bot','lowdb','<b>Balance\x20Bot\x20Status:</b>\x0a','isValid','parse','Logged\x20in\x20user\x20...','userid','mkdirSync','value','hex','#RES#\x20','verify','function','Telegraf\x20error:','/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a','all','-config.json','uuid-random','\x20only\x0a','storeConfiguration','write','Token\x20blacklisted','readdirSync','2FA\x20login\x20rejected','expiry','secret','(((.+)+)+)+$','All\x20bots\x20running\x20right\x20now','toggle-bot-mode','length','40536YvCBNH','backup-full','4mdABvA','randomBytes','stop','Starting\x20#RED#Balance\x20Bot\x20v','All\x20bots','string','size','bbvNew','telegraf','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','enabled','Unauthorized\x20attempt\x20to\x20delete\x20bot','child_process','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','endsWith','(staging)','live','tkn','hashSync','fork','config/','reload','socket','18ijcYkI',')\x20\x20\x20|\x20Bot\x20','simple','pidRefreshToken','stopped','notification','show-config','2302945dHFNjK','title','headers','portfolio','metrics','Starting\x20new\x20bot\x20|\x20Bot\x20','=>\x20Go\x20to\x20#CYA#http://','#RES#','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','sendPortfolioTelegram','Invalid\x20IP\x20address','express','portfolio_','Unauthorized\x20attempt\x20to\x20get\x20portfolio','staging','reset-password','182RRuGln','blacklist','config_orders','-results.json','--------------------------------------','output-000.log','request','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','api-eu.mixpanel.com','started','new-disabled','2341272cIUwWq','/off\x20-\x20stop\x20bot(s)\x0a','No\x20authentication\x20token','config_all','Disabled\x20Bot\x20','botmanager','Bot\x20','kill','push','/:bot/coins','temporary\x20access\x20timeout','file','Failed\x20to\x20download\x20','Error:\x20Invalid\x20argument\x20','editMessageReplyMarkup','disconnect','match','clients','restore-backup-file','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','Access\x20enabled\x20for\x20','Logged\x20out\x20user\x20...','File\x20uploaded','get-starting-balances','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','Node.js\x20v','/on\x20-\x20start\x20bot(s)\x0a','publicKey','/metrics\x20-\x20show\x20bot\x20performance\x0a','mixpanel','split','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','login','Enabled\x20Bot\x20','kind','output-002.log','yargs/yargs','\x20-\x20','show','new','place-order','isDirectory','Restoring\x20bot(s)\x20from\x20backup','Starting\x20Balance\x20Bot\x20update','Telegram\x20error:','loginRequired','bcryptjs','alias','token','replace','Backup\x20file\x20unzipped\x20and\x20stored','secure','pki','login2fa_','argv'];_0x537e=function(){return _0x501a1b;};return _0x537e();}function getDeviceWithIp(_0x59f1c8){const _0x31b4ee=_0x5654c0;return devices[_0x31b4ee(0x29f)](_0x4d3958=>_0x4d3958['ip']===_0x59f1c8);}async function temporaryAccess2FA(_0x35d7c4,_0x25ce1a){const _0x470e81=_0x5654c0;let _0x24db07=new Date(),_0x280eb0=![];if(lastIpApproval){if(_0x24db07-lastIpApproval<0x1388)_0x280eb0=!![];}lastIpApproval=new Date();if(_0x280eb0)return;if(tgBot&&settings[_0x470e81(0x214)]){const _0x548d6c=uuidRandom();tmpStorage[_0x548d6c]={'uuid':_0x35d7c4,'externalip':_0x25ce1a};const _0x2c10e7=Markup['inlineKeyboard']([Markup[_0x470e81(0xf1)][_0x470e81(0x26c)]('5\x20min',_0x470e81(0x2b4)+_0x548d6c),Markup[_0x470e81(0xf1)]['callback']('15\x20min',_0x470e81(0x153)+_0x548d6c),Markup[_0x470e81(0xf1)]['callback']('30\x20min',_0x470e81(0x141)+_0x548d6c),Markup[_0x470e81(0xf1)][_0x470e81(0x26c)](_0x470e81(0x12d),_0x470e81(0x2a5)+_0x548d6c)]);await sendTelegram(settings[_0x470e81(0x214)],_0x470e81(0x2cd)+normalizeIP(_0x25ce1a)[_0x470e81(0x1dc)]+'\x20?',_0x2c10e7),tgBot[_0x470e81(0xf4)](/tempaccess_(.+)_(.+)/,async _0x4f0400=>{const _0x3f1923=_0x470e81,_0x23d215=_0x4f0400[_0x3f1923(0x1c6)][0x1],_0x142931=_0x4f0400[_0x3f1923(0x1c6)][0x2],{uuid:_0xe4f263,externalip:_0x205cd8}=tmpStorage[_0x142931];delete tmpStorage[_0x142931],_0x4f0400[_0x3f1923(0x1c4)](),devices[_0xe4f263][_0x3f1923(0x204)]={'clientip':_0x205cd8,'timestamp':new Date()[_0x3f1923(0x270)](),'expiry':_0x23d215},_0x23d215!=_0x3f1923(0x12d)?(await sendTelegram(_0x4f0400['chat']['id'],_0x3f1923(0x1ca)+_0x23d215+_0x3f1923(0xfb),{'parse_mode':_0x3f1923(0x2c4)}),io['to'](_0xe4f263)[_0x3f1923(0x203)]('status',{'access':{'allow':![],'reason':_0x3f1923(0x191),'token':null}})):(await sendTelegram(_0x4f0400['chat']['id'],_0x3f1923(0x2fa)),io['to'](_0xe4f263)[_0x3f1923(0x203)](_0x3f1923(0x2b3),{'access':{'allow':![],'reason':'temporary\x20access\x20rejected','token':null}}));});}}async function loginAccess2FA(_0x3f7481,_0x305ac4){const _0x89629=_0x5654c0;if(tgBot&&settings[_0x89629(0x214)]){const _0x375089=uuidRandom();tmpStorage[_0x375089]={'uuid':_0x3f7481,'externalip':_0x305ac4};const _0x136910=Markup[_0x89629(0x23d)]([Markup[_0x89629(0xf1)][_0x89629(0x26c)](_0x89629(0x108),_0x89629(0x1eb)+loginExpiry+'_'+_0x375089),Markup['button'][_0x89629(0x26c)]('reject',_0x89629(0x24c)+_0x375089)]);await sendTelegram(settings[_0x89629(0x214)],_0x89629(0x233)+normalizeIP(_0x305ac4)[_0x89629(0x1dc)]+'\x20?',_0x136910),tgBot[_0x89629(0xf4)](/login2fa_(.+)_(.+)/,async _0xa947b6=>{const _0x335da6=_0x89629,_0x47d552=_0xa947b6['match'][0x1],_0x1d9d2c=_0xa947b6['match'][0x2],{uuid:_0x848d02,externalip:_0x4753cb}=tmpStorage[_0x1d9d2c];delete tmpStorage[_0x1d9d2c],_0xa947b6['editMessageReplyMarkup'](),devices[_0x848d02]['telegram2FaApproval']={'clientip':_0x4753cb,'timestamp':new Date()[_0x335da6(0x270)](),'expiry':_0x47d552},_0x47d552!='reject'?(await sendTelegram(_0xa947b6['chat']['id'],_0x335da6(0x25c),{'parse_mode':'HTML'}),io['to'](_0x848d02)[_0x335da6(0x203)]('status',{'access':{'allow':![],'reason':_0x335da6(0x191),'token':null}})):(await sendTelegram(_0xa947b6[_0x335da6(0x2cf)]['id'],'Login\x20rejected'),io['to'](_0x848d02)[_0x335da6(0x203)](_0x335da6(0x2b3),{'access':{'allow':![],'reason':_0x335da6(0x173),'token':null}}));});}}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x38b123=_0x5654c0;return dbConfig[_0x38b123(0x2c5)]('bots')['sortBy'](_0x38b123(0x2ab))[_0x38b123(0x2ec)]({'status':_0x38b123(0x186)})[_0x38b123(0x164)]()||[];}function getDisabledBots(){const _0x578780=_0x5654c0;return dbConfig[_0x578780(0x2c5)](_0x578780(0x297))['sortBy'](_0x578780(0x2ab))[_0x578780(0x2ec)]({'status':'disabled'})[_0x578780(0x164)]()||[];}function getBotAttributes(_0x17296a){const _0x5041e9=_0x5654c0;let _0x4f6daf={};const _0x2e0f2c=configpath+_0x5041e9(0x302)+_0x17296a+_0x5041e9(0x16c),_0x39de66=fs[_0x5041e9(0x27b)](_0x2e0f2c);if(_0x39de66){const _0x5ac855=fs[_0x5041e9(0x1ed)](_0x2e0f2c);try{const _0x32898f=JSON[_0x5041e9(0x160)](_0x5ac855),_0x4f8df4=_0x32898f?_0x32898f[_0x5041e9(0x2dd)][0x0][_0x5041e9(0x22b)]:![];_0x4f6daf[_0x5041e9(0xfc)]=_0x4f8df4?'auto':'manual',_0x4f6daf[_0x5041e9(0x2f7)]=_0x32898f?_0x32898f[_0x5041e9(0x2dd)][0x0][_0x5041e9(0x2f7)]:'Bot\x20'+_0x17296a;}catch(_0x45db3b){_0x4f6daf[_0x5041e9(0xfc)]=_0x5041e9(0x2b8),_0x4f6daf[_0x5041e9(0x2f7)]=_0x5041e9(0x1bc)+_0x17296a;}}else _0x4f6daf[_0x5041e9(0xfc)]=_0x5041e9(0x2b8),_0x4f6daf[_0x5041e9(0x2f7)]=_0x5041e9(0x1bc)+_0x17296a;return _0x4f6daf;}function getBotsWithMode(){const _0x71c248=_0x5654c0,_0x2c77fa=dbConfig['get'](_0x71c248(0x297))[_0x71c248(0x2df)]('botID')[_0x71c248(0x164)]()||[];return _0x2c77fa[_0x71c248(0x11a)](_0x3ef938=>{const _0x47d2c0=_0x71c248;let _0x420621=getBotAttributes(_0x3ef938[_0x47d2c0(0x2ab)]);_0x3ef938[_0x47d2c0(0xfc)]=_0x420621[_0x47d2c0(0xfc)];}),_0x2c77fa;}function getBotExchanges(){const _0x218bbc=_0x5654c0;let _0xc0989b=[];const _0x468d6c=dbConfig['get'](_0x218bbc(0x297))[_0x218bbc(0x2df)](_0x218bbc(0x2ab))['value']()||[];_0x468d6c[_0x218bbc(0x11a)](_0x22760b=>{const _0x5207e8=_0x218bbc;if(_0x22760b[_0x5207e8(0x2b3)]==_0x5207e8(0x186)){const _0xfdaaa4=configpath+'bot-'+_0x22760b[_0x5207e8(0x2ab)]+'-config.json',_0x396320=fs[_0x5207e8(0x27b)](_0xfdaaa4);let _0x4fc923;if(_0x396320){const _0x2b0edf=fs['readFileSync'](_0xfdaaa4);try{const _0x4a6855=JSON['parse'](_0x2b0edf);_0x4fc923=_0x4a6855?_0x4a6855[_0x5207e8(0x2dd)][0x0]['exchange']:null;}catch(_0x48ffd8){}}if(_0x4fc923)_0xc0989b[_0x5207e8(0x1be)](_0x4fc923);}});const _0x1fc9fa=[...new Set(_0xc0989b)][_0x218bbc(0xf6)]();return _0x1fc9fa;}async function initUser(){const _0xfe4687=_0x5654c0;if(!settings[_0xfe4687(0x162)]){const _0x3b7c84=uuidRandom();mixpanel[_0xfe4687(0x1e5)](_0x3b7c84),updateSetting(_0xfe4687(0x162),_0x3b7c84);}}async function initSecure(){const _0x546360=_0x5654c0;let _0x56acb5=getSecure();if(!_0x56acb5[_0x546360(0x2c3)](_0x546360(0x175))){let _0x3542ed=await generateKeys();_0x56acb5[_0x546360(0x1d1)]=_0x3542ed['publicKey'],_0x56acb5[_0x546360(0x28e)]=_0x3542ed[_0x546360(0x28e)],_0x56acb5['secret']=crypto[_0x546360(0x17d)](0x20)[_0x546360(0x123)](_0x546360(0x165));;storeSecure(_0x56acb5);}}function getSettings(){const _0x237f3a=_0x5654c0;return dbSettings[_0x237f3a(0x2c5)](_0x237f3a(0x159))[_0x237f3a(0x164)]()||{};}function getSecure(){const _0x1d32eb=_0x5654c0;return dbSecure[_0x1d32eb(0x2c5)](_0x1d32eb(0x1e9))[_0x1d32eb(0x164)]()||{};}function getBlacklist(){const _0x30ea7b=_0x5654c0;return dbSecure[_0x30ea7b(0x2c5)](_0x30ea7b(0x1ac))[_0x30ea7b(0x164)]()||[];}function broadcastToBots(_0x3dcdfc,_0x249772){const _0xaa0725=_0x5654c0;config[_0xaa0725(0x11a)](_0x3ed99d=>{const _0x281a55=_0xaa0725;if(_0x3ed99d[_0x281a55(0x2b3)]==_0x281a55(0x186)&&_0x3ed99d['live']=='running'||_0x3ed99d['status']==_0x281a55(0x1dd)&&_0x3ed99d['live']==_0x281a55(0x135)){if(pid[_0x3ed99d[_0x281a55(0x2ab)]])pid[_0x3ed99d[_0x281a55(0x2ab)]][_0x281a55(0x125)]({[_0x3dcdfc]:_0x249772});}});}async function storeSettings(_0x53fcf8,_0xec0f5c=![]){const _0x447095=_0x5654c0;_0x53fcf8={...settings,..._0x53fcf8};if(_0xec0f5c&&_0x53fcf8[_0x447095(0x2de)]!=_0x447095(0x150)&&_0x53fcf8['bbPassword']!=_0x447095(0x258)&&_0x53fcf8[_0x447095(0x2de)]!=''){const _0x1fd85=decryptRSA(secure['privateKey'],_0x53fcf8[_0x447095(0x2de)])[_0x447095(0x1d4)](_0x447095(0x152))[0x0],_0x5982a3=bcrypt[_0x447095(0x18e)](_0x1fd85,saltRounds);_0x53fcf8={..._0x53fcf8,'bbPassword':_0x5982a3};}if(_0xec0f5c&&_0x53fcf8[_0x447095(0x134)]!=_0x447095(0x150)&&_0x53fcf8[_0x447095(0x134)]!=_0x447095(0x258)&&_0x53fcf8[_0x447095(0x134)]!=''){const _0x9174dc=decryptRSA(secure[_0x447095(0x28e)],_0x53fcf8['telegramToken'])['split'](_0x447095(0x152))[0x0];_0x53fcf8={..._0x53fcf8,'telegramToken':_0x9174dc};}if(_0xec0f5c&&_0x53fcf8['marketcapApi']!='************'&&_0x53fcf8[_0x447095(0x260)]!=_0x447095(0x258)&&_0x53fcf8['marketcapApi']!=''){const _0x2c40e8=decryptRSA(secure[_0x447095(0x28e)],_0x53fcf8[_0x447095(0x260)])[_0x447095(0x1d4)](_0x447095(0x152))[0x0];_0x53fcf8={..._0x53fcf8,'marketcapApi':_0x2c40e8};}const _0x13a827=_0x53fcf8[_0x447095(0x134)]!=_0x447095(0x150)&&_0x53fcf8['telegramToken']!=settings[_0x447095(0x134)]||_0x53fcf8['telegramUsername']!=settings[_0x447095(0x117)],_0x4a0c0b=_0x53fcf8[_0x447095(0x134)]==''||_0x53fcf8[_0x447095(0x117)]=='',_0x18d971=_0x53fcf8[_0x447095(0x260)]&&_0x53fcf8[_0x447095(0x260)]!=_0x447095(0x150)&&_0x53fcf8[_0x447095(0x260)]!=settings[_0x447095(0x260)];_0x13a827&&(_0x53fcf8[_0x447095(0x214)]=null,_0x53fcf8['telegramEvents']=_0x447095(0x16b));for(const [_0x4dfe08,_0x474836]of Object['entries'](_0x53fcf8)){if(_0x4dfe08=='telegramToken'&&_0x474836==_0x447095(0x150)){_0x53fcf8[_0x447095(0x134)]=settings['telegramToken'];continue;};if(_0x4dfe08==_0x447095(0x2de)&&_0x474836==_0x447095(0x150)){_0x53fcf8[_0x447095(0x2de)]=settings['bbPassword'];continue;};if(_0x4dfe08==_0x447095(0x260)&&_0x474836==_0x447095(0x150)){_0x53fcf8[_0x447095(0x260)]=settings[_0x447095(0x260)];continue;};dbSettings['set'](_0x447095(0xfe)+_0x4dfe08,_0x474836)['write']();}settings=_0x53fcf8,io['to'](_0x447095(0x1bb))[_0x447095(0x203)]('settings',cleanSettings()),broadcastToBots('timeshift',settings[_0x447095(0x2da)]),broadcastToBots(_0x447095(0x2d3),settings[_0x447095(0x2d3)]),broadcastToBots(_0x447095(0x260),settings['marketcapApi']);if(_0x13a827&&!_0x4a0c0b)initTelegram();_0x13a827&&_0x4a0c0b&&(updateSetting(_0x447095(0x214),null),disableTelegram()),getAllClients()['forEach'](_0x468d2c=>{getSocket(_0x468d2c['id'])['emit']('status',{'access':{'allow':![],'reason':'reload','token':null}});}),_0x18d971&&(await sleep(0xbb8),testMarketcapApi(_0x53fcf8['marketcapApi']));}async function testMarketcapApi(_0x383265){const _0x1922ca=_0x5654c0,_0x264d10=[_0x1922ca(0xe9),_0x1922ca(0x12a)];try{await axios[_0x1922ca(0x2c5)](_0x1922ca(0x1b2),{'headers':{'X-CMC_PRO_API_KEY':_0x383265},'params':{'symbol':_0x264d10[_0x1922ca(0x123)]()}});}catch(_0x29f288){_0x29f288[_0x1922ca(0x123)]()[_0x1922ca(0x14d)]('status\x20code\x20401')?(io['to'](_0x1922ca(0x1bb))['emit'](_0x1922ca(0x198),_0x1922ca(0x145)),logger['full']('CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager')):(io['to'](_0x1922ca(0x1bb))[_0x1922ca(0x203)]('notification','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20see\x20logs\x20for\x20details'),logger[_0x1922ca(0xf7)](_0x1922ca(0x291)),logger[_0x1922ca(0x139)]('Error\x20details:',_0x29f288['toString']()+_0x1922ca(0x1db)+_0x29f288[_0x1922ca(0x25f)]));return;}logger['debug'](_0x1922ca(0x2e5));}function updateSetting(_0x2bfb15,_0x8474aa){const _0x4b62ea=_0x5654c0;dbSettings[_0x4b62ea(0x292)](_0x4b62ea(0xfe)+_0x2bfb15,_0x8474aa)[_0x4b62ea(0x170)](),settings=getSettings(),io['to']('botmanager')['emit']('settings',cleanSettings());}function storeSecure(_0x3bc192){const _0x1ce59f=_0x5654c0;dbSecure[_0x1ce59f(0x2c5)](_0x1ce59f(0x1e9))[_0x1ce59f(0x1be)](_0x3bc192)[_0x1ce59f(0x170)](),secure=_0x3bc192;}function addBlacklist(_0x1997f){const _0x2d0088=_0x5654c0;cleanBlacklist();let _0x4edab8;devices[_0x1997f]['telegramIpApproval']?_0x4edab8=Math[_0x2d0088(0x2fe)](devices[_0x1997f]['telegramIpApproval'][_0x2d0088(0x174)],loginExpiry):_0x4edab8=loginExpiry,dbSecure[_0x2d0088(0x2c5)](_0x2d0088(0x1ac))[_0x2d0088(0x1be)]({'expiry':new Date()[_0x2d0088(0x270)]()+_0x4edab8*0x3c*0x3e8,'token':devices[_0x1997f][_0x2d0088(0x2e8)][_0x2d0088(0x1e6)]})[_0x2d0088(0x170)](),blacklist=dbSecure[_0x2d0088(0x2c5)]('blacklist')['value']();}function cleanBlacklist(){const _0x5dd67d=_0x5654c0;let _0x187de4=dbSecure['get'](_0x5dd67d(0x1ac))[_0x5dd67d(0x293)]()[_0x5dd67d(0x164)](),_0x2c0080=new Date()[_0x5dd67d(0x270)]();_0x187de4[_0x5dd67d(0x11a)](_0x3d20c3=>{const _0x21e355=_0x5dd67d;_0x3d20c3[_0x21e355(0x174)]<_0x2c0080&&dbSecure[_0x21e355(0x2c5)](_0x21e355(0x1ac))[_0x21e355(0x2d2)]({'expiry':_0x3d20c3[_0x21e355(0x174)]})[_0x21e355(0x170)]();});}function initStates(){const _0x4300f3=_0x5654c0;let _0x121760=getConfiguration();_0x121760[_0x4300f3(0x11a)](_0x438fb2=>{const _0x46ddab=_0x4300f3;_0x438fb2['live']=_0x46ddab(0x197);}),storeConfiguration(_0x121760);}async function generateKeys(){const _0x3c3cf8=_0x5654c0,_0xedcc5e=forge[_0x3c3cf8(0x1ea)][_0x3c3cf8(0x136)][_0x3c3cf8(0x2e2)]({'bits':0x1000,'e':0x10001}),_0x2cbba0=forge[_0x3c3cf8(0x1ea)][_0x3c3cf8(0xec)](_0xedcc5e[_0x3c3cf8(0x28e)]),_0x5e2fc9=forge['pki'][_0x3c3cf8(0x10f)](_0xedcc5e[_0x3c3cf8(0x1d1)]);return{'privateKey':_0x2cbba0,'publicKey':_0x5e2fc9};}async function oneTimeMigration(){const _0x19a4b6=_0x5654c0;let _0x1e69cb=getSettings(),_0x10afb4=![];!_0x1e69cb[_0x19a4b6(0x2c3)](_0x19a4b6(0x2db))&&(_0x1e69cb['lastmsgtelegram']=0x0,_0x10afb4=!![]);!_0x1e69cb[_0x19a4b6(0x2c3)](_0x19a4b6(0x2d4))&&(_0x1e69cb['lastmsgemitted']=0x0,_0x10afb4=!![]);!_0x1e69cb['hasOwnProperty'](_0x19a4b6(0xf2))&&(_0x1e69cb['latestversion']=_0x19a4b6(0x2f1),_0x10afb4=!![]);!_0x1e69cb[_0x19a4b6(0x2c3)]('onepagemode')&&(_0x1e69cb[_0x19a4b6(0x2d3)]=![],_0x10afb4=!![]);!_0x1e69cb[_0x19a4b6(0x2c3)](_0x19a4b6(0x260))&&(_0x1e69cb['marketcapApi']='',_0x10afb4=!![]);if(_0x10afb4)storeSettings(_0x1e69cb);try{fs[_0x19a4b6(0x172)](configbackuppath,{'withFileTypes':!![]})[_0x19a4b6(0x11a)](_0xad09c5=>{const _0x2ed7b7=_0x19a4b6;if(!_0xad09c5[_0x2ed7b7(0x1df)]()){if(!_0xad09c5[_0x2ed7b7(0x25b)][_0x2ed7b7(0x10c)]('backup-full@'))fs[_0x2ed7b7(0x151)](configbackuppath+_0xad09c5[_0x2ed7b7(0x25b)]);}else fs[_0x2ed7b7(0x256)](configbackuppath+_0xad09c5['name'],{'recursive':!![]});});}catch(_0x56c1c9){logger[_0x19a4b6(0x139)](_0x19a4b6(0x2f5),_0x56c1c9);}}function storeConfiguration(_0x5a0604){const _0x9fb00f=_0x5654c0;dbConfig[_0x9fb00f(0x2c5)]('bots')['remove']()[_0x9fb00f(0x170)](),dbConfig[_0x9fb00f(0x2c5)](_0x9fb00f(0x297))[_0x9fb00f(0x1be)](..._0x5a0604)['write'](),config=_0x5a0604;}async function resetPassword(){const _0x41c7b8=_0x5654c0;if(tgBot&&settings[_0x41c7b8(0x214)]){const _0x5b210f=Markup[_0x41c7b8(0x23d)]([Markup[_0x41c7b8(0xf1)][_0x41c7b8(0x26c)]('yes','resetpw_yes'),Markup[_0x41c7b8(0xf1)][_0x41c7b8(0x26c)]('no',_0x41c7b8(0x2b7))]);await sendTelegram(settings[_0x41c7b8(0x214)],'Do\x20you\x20want\x20to\x20reset\x20your\x20password?',_0x5b210f),tgBot[_0x41c7b8(0xf4)](/resetpw_(.+)/,async _0x5eeaa6=>{const _0x4ef6b8=_0x41c7b8,_0x567912=_0x5eeaa6[_0x4ef6b8(0x1c6)][0x1];_0x5eeaa6[_0x4ef6b8(0x1c4)]();if(_0x567912!='no'){const _0x1224dd=0xf,_0xfc7b7f='0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$',_0x180abb=Array[_0x4ef6b8(0x307)](crypto['randomFillSync'](new Uint32Array(_0x1224dd)))[_0x4ef6b8(0x1fa)](_0x33c5cb=>_0xfc7b7f[_0x33c5cb%_0xfc7b7f[_0x4ef6b8(0x179)]])['join'](''),_0x144e9c=bcrypt[_0x4ef6b8(0x18e)](_0x180abb,saltRounds);storeSettings({'bbPassword':_0x144e9c}),await sendTelegram(_0x5eeaa6[_0x4ef6b8(0x2cf)]['id'],_0x4ef6b8(0x1fb)+_0x180abb,{'parse_mode':_0x4ef6b8(0x2c4)});}else await sendTelegram(_0x5eeaa6['chat']['id'],'Password\x20reset\x20rejected');});}}async function confirmRestore(_0x1ae7c7,_0x5ae597){const _0x47a027=_0x5654c0;io['to'](_0x47a027(0x1bb))[_0x47a027(0x203)](_0x47a027(0x198),_0x47a027(0x147),_0x47a027(0x118));if(tgBot&&settings[_0x47a027(0x214)]){const _0x245441=uuidRandom();tmpStorage[_0x245441]={'path':_0x1ae7c7,'filename':_0x5ae597};const _0xc03ce2=Markup[_0x47a027(0x23d)]([Markup[_0x47a027(0xf1)][_0x47a027(0x26c)](_0x47a027(0x241),'restore_yes_'+_0x245441),Markup[_0x47a027(0xf1)][_0x47a027(0x26c)]('no',_0x47a027(0x2ad)+_0x245441)]);await sendTelegram(settings['telegramChatId'],'Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)',_0xc03ce2),tgBot[_0x47a027(0xf4)](/restore_(.+)_(.+)/,async _0x20fdb0=>{const _0x1e8b98=_0x47a027,_0x24d1e7=_0x20fdb0['match'][0x1],_0x3c83d1=_0x20fdb0['match'][0x2],{path:_0x55d6a7,filename:_0xa05dea}=tmpStorage[_0x3c83d1];delete tmpStorage[_0x3c83d1],_0x20fdb0['editMessageReplyMarkup'](),_0x24d1e7==_0x1e8b98(0x241)?(logger[_0x1e8b98(0x139)]('Restore\x20process\x20confirmed'),await sendTelegram(_0x20fdb0[_0x1e8b98(0x2cf)]['id'],_0x1e8b98(0x1e0),{'parse_mode':'HTML'}),unzipFile(_0x55d6a7,_0xa05dea)):(logger[_0x1e8b98(0x139)]('Restore\x20process\x20aborted'),await sendTelegram(_0x20fdb0['chat']['id'],_0x1e8b98(0x219)));});}}function getServerTime(){const _0x1ddd2d=_0x5654c0,_0x2fb37b=new Date();return _0x2fb37b[_0x1ddd2d(0x239)]()+'/'+(_0x2fb37b[_0x1ddd2d(0x294)]()+0x1)[_0x1ddd2d(0x123)]()[_0x1ddd2d(0x21c)](0x2,'0')+'/'+_0x2fb37b[_0x1ddd2d(0x20a)]()[_0x1ddd2d(0x123)]()[_0x1ddd2d(0x21c)](0x2,'0')+'\x20'+_0x2fb37b[_0x1ddd2d(0x280)]()['toString']()[_0x1ddd2d(0x21c)](0x2,'0')+':'+_0x2fb37b[_0x1ddd2d(0x2a1)]()['toString']()[_0x1ddd2d(0x21c)](0x2,'0')+':'+_0x2fb37b[_0x1ddd2d(0x254)]()[_0x1ddd2d(0x123)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x1bfffd=_0x5654c0,_0x55a878=shiftedTime();return _0x55a878[_0x1bfffd(0x239)]()+'/'+(_0x55a878[_0x1bfffd(0x294)]()+0x1)[_0x1bfffd(0x123)]()[_0x1bfffd(0x21c)](0x2,'0')+'/'+_0x55a878[_0x1bfffd(0x20a)]()[_0x1bfffd(0x123)]()[_0x1bfffd(0x21c)](0x2,'0')+'\x20'+_0x55a878['getHours']()[_0x1bfffd(0x123)]()[_0x1bfffd(0x21c)](0x2,'0')+':'+_0x55a878['getMinutes']()['toString']()[_0x1bfffd(0x21c)](0x2,'0')+':'+_0x55a878[_0x1bfffd(0x254)]()['toString']()['padStart'](0x2,'0');}function getCleanTimeStamp(){const _0x4e764c=_0x5654c0,_0x4d2b0e=shiftedTime();return _0x4d2b0e[_0x4e764c(0x239)]()+(_0x4d2b0e[_0x4e764c(0x294)]()+0x1)['toString']()[_0x4e764c(0x21c)](0x2,'0')+_0x4d2b0e['getDate']()['toString']()[_0x4e764c(0x21c)](0x2,'0')+'-'+_0x4d2b0e[_0x4e764c(0x280)]()[_0x4e764c(0x123)]()['padStart'](0x2,'0')+_0x4d2b0e[_0x4e764c(0x2a1)]()['toString']()[_0x4e764c(0x21c)](0x2,'0')+_0x4d2b0e[_0x4e764c(0x254)]()[_0x4e764c(0x123)]()[_0x4e764c(0x21c)](0x2,'0');}function shiftedTime(){const _0x23b0ee=_0x5654c0,_0x318ec9=new Date();let _0x1011fc=_0x318ec9;if(settings[_0x23b0ee(0x2da)]&&settings['timeshift']!==0x0)_0x1011fc=fns['add'](_0x318ec9,{'hours':settings['timeshift']});return _0x1011fc;}async function startScheduler(){const _0x170919=_0x5654c0,_0x39bcc3=new Date()[_0x170919(0x201)](),_0x4e19ae=shiftedTime()[_0x170919(0x280)]();_0x4e19ae==0x4&&backupConfigFiles(),_0x4e19ae==0x0&&(rotateLogFiles(),logger[_0x170919(0x139)](_0x170919(0x1af)),logger['debug']('Running\x20#RED#Balance\x20Bot\x20v'+serverversion+_0x170919(0x166)+(environment=='staging'?_0x170919(0x18b):'')),logger[_0x170919(0x139)](_0x170919(0x1af))),_0x39bcc3%0x6==0x0&&triggerAnalytics(),_0x39bcc3%0x6==0x0&&getMessages(),await sleep(schedulerInterval),startScheduler();}async function restoreBackupFile(_0x4f1a07){const _0x17a021=_0x5654c0;logger[_0x17a021(0x139)](_0x17a021(0xf5)+_0x4f1a07);const _0x5cf723=getBotsWithMode();_0x5cf723[_0x17a021(0x179)]>0x0?confirmRestore(configbackuppath,_0x4f1a07):unzipFile(configbackuppath,_0x4f1a07);}async function getBackupFiles(_0x3c715e=null){const _0x5407b9=_0x5654c0;let _0x1a5051=[],_0x4daab6=fs[_0x5407b9(0x172)](configbackuppath,{'withFileTypes':!![]});_0x4daab6['sort']((_0x1ba675,_0x2507a3)=>_0x1ba675[_0x5407b9(0x25b)]<_0x2507a3[_0x5407b9(0x25b)]?0x1:_0x2507a3[_0x5407b9(0x25b)]<_0x1ba675[_0x5407b9(0x25b)]?-0x1:0x0),_0x4daab6[_0x5407b9(0x11a)](_0x1d1bab=>{const _0xb2e077=_0x5407b9;if(!_0x1d1bab[_0xb2e077(0x1df)]()&&_0x1d1bab['name']['startsWith'](_0xb2e077(0x144))&&_0x1d1bab[_0xb2e077(0x25b)][_0xb2e077(0x18a)](_0xb2e077(0x238))){const _0x296ac1=formatDate(fs[_0xb2e077(0x13e)](configbackuppath+_0x1d1bab[_0xb2e077(0x25b)])[_0xb2e077(0x25d)]);_0x1a5051[_0xb2e077(0x1be)]({'name':_0x1d1bab[_0xb2e077(0x25b)],'mtime':_0x296ac1});}});if(_0x3c715e)io['to'](_0x3c715e)['emit'](_0x5407b9(0x235),_0x1a5051);else return _0x1a5051;}async function backupConfigFiles(){const _0x14eb73=_0x5654c0;await zipFiles(_0x14eb73(0x17b));const _0x87a709=getCleanTimeStamp();fs[_0x14eb73(0x107)](zippath+_0x14eb73(0xf0),configbackuppath+('backup-full@'+_0x87a709+_0x14eb73(0x238)));let _0x27f322=fs['readdirSync'](configbackuppath,{'withFileTypes':!![]});_0x27f322['sort']((_0x8a1f7d,_0x127010)=>_0x8a1f7d['name']<_0x127010[_0x14eb73(0x25b)]?0x1:_0x127010[_0x14eb73(0x25b)]<_0x8a1f7d[_0x14eb73(0x25b)]?-0x1:0x0),_0x27f322[_0x14eb73(0x179)]>maxBackups&&fs[_0x14eb73(0x151)](configbackuppath+_0x27f322[_0x27f322[_0x14eb73(0x179)]-0x1][_0x14eb73(0x25b)]);}function rotateLogFiles(){const _0x64111d=_0x5654c0,_0x3a54f8=fs[_0x64111d(0x13e)](logspath+_0x64111d(0x1b0)),_0xc9141b=_0x3a54f8[_0x64111d(0x182)]/0x400;if(_0xc9141b>0x64){let _0xf7ea78=fs[_0x64111d(0x172)](logspath,{'withFileTypes':!![]});_0xf7ea78['sort']((_0x2d1d47,_0x12bf5e)=>_0x2d1d47[_0x64111d(0x25b)]<_0x12bf5e[_0x64111d(0x25b)]?0x1:_0x12bf5e['name']<_0x2d1d47[_0x64111d(0x25b)]?-0x1:0x0),_0xf7ea78[_0x64111d(0x11a)](_0x22b2ad=>{const _0x257c27=_0x64111d;if(_0x22b2ad[_0x257c27(0x25b)]==_0x257c27(0x1d9))fs[_0x257c27(0x107)](logspath+_0x22b2ad[_0x257c27(0x25b)],logspath+_0x257c27(0x28f));if(_0x22b2ad[_0x257c27(0x25b)]==_0x257c27(0x10e))fs['copyFileSync'](logspath+_0x22b2ad[_0x257c27(0x25b)],logspath+'output-002.log');_0x22b2ad[_0x257c27(0x25b)]==_0x257c27(0x1b0)&&(fs['copyFileSync'](logspath+_0x22b2ad[_0x257c27(0x25b)],logspath+'output-001.log'),fs['writeFileSync'](logspath+_0x22b2ad[_0x257c27(0x25b)],''));});}}async function zipFiles(_0xb0985e){const _0x1aaf7d=_0x5654c0;let _0x2667e9;if(_0xb0985e==_0x1aaf7d(0x2e6))_0x2667e9=logspath;if(_0xb0985e==_0x1aaf7d(0x2eb))_0x2667e9=configpath;if(_0xb0985e==_0x1aaf7d(0x17b))_0x2667e9=configpath;let _0x3577b2=fs[_0x1aaf7d(0x172)](_0x2667e9,{'withFileTypes':!![]});const _0x4f2f76=new JSZip();_0x3577b2[_0x1aaf7d(0x11a)](_0x39fc1c=>{const _0x408b03=_0x1aaf7d;if(!_0x39fc1c['isDirectory']()){let _0x1c6db1=fs[_0x408b03(0x1ed)](_0x2667e9+_0x39fc1c[_0x408b03(0x25b)]);if(_0xb0985e==_0x408b03(0x2eb)){const _0x2caa3c=/^bot-[0-9]{3}-config.json$/,_0x5d479b=_0x2caa3c[_0x408b03(0x13b)](_0x39fc1c['name']);if(_0x5d479b){const _0x3a1c81=JSON[_0x408b03(0x160)](_0x1c6db1);if(_0x3a1c81[_0x408b03(0x2dd)][0x0]){_0x3a1c81[_0x408b03(0x2dd)][0x0][_0x408b03(0x29e)]=_0x408b03(0x258),_0x3a1c81[_0x408b03(0x2dd)][0x0][_0x408b03(0x265)]=_0x408b03(0x258);if(_0x3a1c81[_0x408b03(0x2dd)][0x0][_0x408b03(0x28d)])_0x3a1c81[_0x408b03(0x2dd)][0x0][_0x408b03(0x28d)]=_0x408b03(0x258);}_0x1c6db1=JSON[_0x408b03(0x2f4)](_0x3a1c81,null,0x2);}if(_0x39fc1c[_0x408b03(0x25b)]=='bb-settings.json'){const _0xf9299a=JSON[_0x408b03(0x160)](_0x1c6db1);if(_0xf9299a[_0x408b03(0x159)][_0x408b03(0x1e3)])_0xf9299a['settings'][_0x408b03(0x1e3)]=![];if(_0xf9299a[_0x408b03(0x159)][_0x408b03(0x2de)])_0xf9299a[_0x408b03(0x159)]['bbPassword']=_0x408b03(0x258);if(_0xf9299a['settings']['telegramToken'])_0xf9299a['settings'][_0x408b03(0x134)]=_0x408b03(0x258);if(_0xf9299a[_0x408b03(0x159)][_0x408b03(0x214)])_0xf9299a[_0x408b03(0x159)][_0x408b03(0x214)]=null;if(_0xf9299a[_0x408b03(0x159)][_0x408b03(0x260)])_0xf9299a['settings'][_0x408b03(0x260)]=_0x408b03(0x258);_0x1c6db1=JSON[_0x408b03(0x2f4)](_0xf9299a,null,0x2);}if(_0x39fc1c['name']!=_0x408b03(0x277))_0x4f2f76[_0x408b03(0x1c1)](_0x39fc1c[_0x408b03(0x25b)],_0x1c6db1);}else _0x4f2f76[_0x408b03(0x1c1)](_0x39fc1c[_0x408b03(0x25b)],_0x1c6db1);}});const _0x8e4d9b=await _0x4f2f76[_0x1aaf7d(0x236)]({'type':_0x1aaf7d(0x181),'base64':![],'compression':'DEFLATE'});fs[_0x1aaf7d(0x216)](zippath+(_0xb0985e+_0x1aaf7d(0x238)),_0x8e4d9b,'binary');}async function unzipFile(_0x2ca54d,_0x4c69b0){const _0x781663=_0x5654c0;fs[_0x781663(0x172)](configpath,{'withFileTypes':!![]})['forEach'](_0x20a189=>{const _0x486972=_0x781663;if(!_0x20a189[_0x486972(0x1df)]())fs[_0x486972(0x256)](configpath+_0x20a189[_0x486972(0x25b)]);});const _0x2de120=fs[_0x781663(0x1ed)](_0x2ca54d+_0x4c69b0,_0x781663(0x2bd)),_0x14ca48=await JSZip['loadAsync'](_0x2de120,{'base64':![],'checkCRC32':!![]});for(const _0x4141e4 of Object['keys'](_0x14ca48['files'])){const _0x1bb9c2=_0x14ca48[_0x781663(0x200)][_0x4141e4],_0x581410=await _0x1bb9c2['async']('string');fs[_0x781663(0x216)](configpath+_0x1bb9c2[_0x781663(0x25b)],_0x581410);}fs['readdirSync'](temppath,{'withFileTypes':!![]})[_0x781663(0x11a)](_0x4b83c9=>{const _0x47be0b=_0x781663;if(!_0x4b83c9[_0x47be0b(0x1df)]())fs[_0x47be0b(0x256)](temppath+_0x4b83c9[_0x47be0b(0x25b)]);}),logger[_0x781663(0x139)](_0x781663(0x1e8)),process[_0x781663(0x125)]({'restore':!![]},_0x119b9c=>{});}async function getPublicIp(){const _0x3e7fa2=_0x5654c0;try{const _0x4e0cbf=await axios[_0x3e7fa2(0x2c5)](_0x3e7fa2(0x303));publicip=_0x4e0cbf[_0x3e7fa2(0x2ff)]['ip'];}catch(_0x1cde0f){}}async function triggerAnalytics(){const _0x2d2032=_0x5654c0;if(!publicip)await getPublicIp();const _0x4216bd=getBotsWithMode();let _0x4baad5=0x0;_0x4216bd[_0x2d2032(0x11a)](_0x2b829b=>{const _0x15aa28=_0x2d2032;if(_0x2b829b[_0x15aa28(0x2b3)]==='enabled')_0x4baad5++;});const _0x2dc935=getBotExchanges();mixpanel[_0x2d2032(0x2bb)](_0x2d2032(0x2c9),{'distinct_id':settings[_0x2d2032(0x162)],'ip':publicip,'version':serverversion,'numbots':_0x4216bd[_0x2d2032(0x179)],'numbotsenabled':_0x4baad5,'exchanges':_0x2dc935,'environment':environment});}async function getMessages(){const _0x31a914=_0x5654c0,_0x5ba3e6='https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master',_0x58db3d=new GraphQLClient(_0x5ba3e6),_0x29a296={'authorization':'Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U'},_0x4180be=serverversion[_0x31a914(0x1d4)]('.'),_0x34a46e=_0x4180be[0x0]+'.'+_0x4180be[0x1],_0x59305e=Math[_0x31a914(0x156)](settings[_0x31a914(0x2db)],settings['lastmsgemitted']),_0x5d204e={'last':parseInt(_0x59305e),'bbm':_0x34a46e},_0x4c9429=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x56cd1a;try{_0x56cd1a=await _0x58db3d[_0x31a914(0x1b1)](_0x4c9429,_0x5d204e,_0x29a296);}catch(_0x5b6f99){}if(_0x56cd1a&&_0x56cd1a[_0x31a914(0x113)]){let _0x4174e8=settings[_0x31a914(0x2db)],_0x5514c0=settings[_0x31a914(0x2db)];newMessages=[];for(const _0x552cb7 of _0x56cd1a[_0x31a914(0x113)]){newMessages['push'](_0x552cb7);let _0xda2235=![];_0x552cb7[_0x31a914(0x183)]&&(updateSetting(_0x31a914(0xf2),_0x552cb7['bbvNew']),_0xda2235=isNewerVersion(serverversion,_0x552cb7[_0x31a914(0x183)])||serverversion==_0x552cb7[_0x31a914(0x183)]);if(!_0xda2235&&_0x552cb7[_0x31a914(0x126)]>_0x4174e8){if(_0x552cb7[_0x31a914(0x22c)]===_0x31a914(0x29d)||serverversion[_0x31a914(0x10c)](_0x552cb7[_0x31a914(0x22c)])){let _0x1c01a5=''+_0x552cb7[_0x31a914(0x19b)]+'\x0a\x0a'+_0x552cb7[_0x31a914(0x1fc)];const _0x933b09=await sendTelegramMsg(toTelegramMarkdown(_0x1c01a5),'Markdown');_0x4174e8=_0x552cb7[_0x31a914(0x126)];}}_0x5514c0=_0x552cb7[_0x31a914(0x126)];}updateAvailable=isNewerVersion(settings[_0x31a914(0xf2)],serverversion),updateSetting(_0x31a914(0x2db),_0x5514c0),emitMessages();}}function emitMessages(){const _0x186483=_0x5654c0,_0x1592e3=settings[_0x186483(0x2d4)];let _0x4632c7=[];newMessages[_0x186483(0x11a)](_0x19761b=>{const _0x3492c0=_0x186483;_0x19761b['number']>_0x1592e3&&_0x4632c7[_0x3492c0(0x1be)](_0x19761b);}),_0x4632c7[_0x186483(0x179)]>0x0&&getAllClients()[_0x186483(0x11a)](_0x50891b=>{const _0x52e04c=_0x186483;getSocket(_0x50891b['id'])[_0x52e04c(0x203)](_0x52e04c(0x1fc),_0x4632c7);});}function confirmMessage(_0x16931f){const _0x18b035=_0x5654c0;updateSetting(_0x18b035(0x2d4),Number(_0x16931f));}function isNewerVersion(_0x332d0e,_0x82fab6){const _0x50bc1f=_0x5654c0,_0x2fe616=_0x82fab6['split']('.'),_0x236202=_0x332d0e[_0x50bc1f(0x1d4)]('.');for(var _0xbeeebe=0x0;_0xbeeebe<_0x236202[_0x50bc1f(0x179)];_0xbeeebe++){const _0x2ca499=~~_0x236202[_0xbeeebe],_0x83582e=~~_0x2fe616[_0xbeeebe];if(_0x2ca499>_0x83582e)return!![];if(_0x2ca499<_0x83582e)return![];}return![];}function toTelegramMarkdown(_0x49134a){const _0x483595=_0x5654c0,_0x1385e9=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x2e35ef=/\*{2}(.+?)\*{2}/gim;return _0x49134a=_0x49134a['replace'](_0x1385e9,'$1_$2_$3')[_0x483595(0x1e7)](_0x2e35ef,_0x483595(0x208)),_0x49134a;}async function validateConfigFile(){const _0x819a68=_0x5654c0,_0x2cca60=dbConfig['get'](_0x819a68(0x297))[_0x819a68(0x2df)](_0x819a68(0x2ab))[_0x819a68(0x164)]()||[];if(_0x2cca60[_0x819a68(0x179)]==0x0){let _0x54e2ca=0x0,_0x5a3335=[];const _0x3c77d2=/^bot-([0-9]{3})-config.json$/,_0x104204=fs[_0x819a68(0x172)](configpath);_0x104204[_0x819a68(0x11a)](_0x18f8ef=>{const _0x57d1a0=_0x819a68,_0x5d9460=_0x3c77d2[_0x57d1a0(0x11f)](_0x18f8ef);if(_0x5d9460){const _0xaccb29=_0x5d9460[0x1];let _0x10bf24=getBotAttributes(_0xaccb29);_0x5a3335[_0x57d1a0(0x1be)]({'botID':_0xaccb29,'botname':_0x10bf24[_0x57d1a0(0x2f7)],'status':_0x57d1a0(0x2a9),'live':'stopped'}),_0x54e2ca++;}}),_0x54e2ca!=0x0&&(dbConfig[_0x819a68(0x2c5)](_0x819a68(0x297))[_0x819a68(0x26f)](_0x5a3335)['write'](),config=_0x5a3335,restoredConfigFile=_0x54e2ca);}}async function restoreConfigNotify(_0x3e7b08){const _0x138c88=_0x5654c0;let _0x4d84cb;if(restoredConfigFile==0x1)_0x4d84cb=_0x138c88(0x1fe);else _0x4d84cb=_0x138c88(0xff);if(_0x3e7b08)io['to'](_0x138c88(0x1bb))[_0x138c88(0x203)]('notification',_0x4d84cb);else{logger[_0x138c88(0x195)](_0x138c88(0x24e)),logger[_0x138c88(0x195)](_0x4d84cb),logger[_0x138c88(0x195)](_0x138c88(0x24e)),logger[_0x138c88(0x195)]('');if(tgBot&&settings[_0x138c88(0x214)]&&settings[_0x138c88(0x296)]!=_0x138c88(0x209))await sendTelegram(settings[_0x138c88(0x214)],'Bot\x20Mgr\x20>\x20'+_0x4d84cb);}}function decryptRSA(_0x51438b,_0x3ac6dd){const _0x38c7b9=_0x5654c0,_0x2faf9a=forge[_0x38c7b9(0x1ea)][_0x38c7b9(0x2f9)](_0x51438b),_0x16dfc4=_0x2faf9a[_0x38c7b9(0x223)](forge[_0x38c7b9(0x276)][_0x38c7b9(0x250)](_0x3ac6dd),_0x38c7b9(0x101),{'md':forge['md'][_0x38c7b9(0x27f)]['create'](),'mgf1':{'md':forge['md'][_0x38c7b9(0x27f)][_0x38c7b9(0x25a)]()}});return _0x16dfc4;}function validateCredentials(_0x817a31,_0x43d195){const _0x55902e=_0x5654c0;if(_0x817a31[_0x55902e(0x2f0)]==settings[_0x55902e(0x257)]&&bcrypt['compareSync'](_0x817a31[_0x55902e(0x137)],settings[_0x55902e(0x2de)])){if(settings['f2aRequired'])return{'allow':![],'reason':_0x55902e(0x13c),'token':null};else{const _0x2017c5=generateLoginToken(_0x43d195);return{'allow':!![],'reason':'login\x20token\x20generated','token':_0x2017c5};}}else return{'allow':![],'reason':'invalid\x20credentials','token':null};}function refreshToken(_0x485ee5){const _0x5db6e7=_0x5654c0,_0x572ddb=generateLoginToken(_0x485ee5);return{'allow':!![],'reason':_0x5db6e7(0x22a),'token':_0x572ddb};}function validateAccess(_0x59fcd0,_0x3e8f90,_0xf10759){const _0x5db563=_0x5654c0,_0x3b6856=_0xf10759?_0xf10759:devices[_0x3e8f90]['ip'];let _0x35a64c;const _0x16b5fe=_0x2e3352=>{const _0x253a1b=_0x37cf;if(settings[_0x253a1b(0x1e3)]){if(settings[_0x253a1b(0x255)]){if(telegram2FaApproved(_0x3e8f90)){const _0x11c1b9=generateLoginToken(_0x3e8f90);return{'allow':!![],'reason':'2FA\x20login\x20token\x20generated','token':_0x11c1b9};}else return{'allow':![],'reason':_0x253a1b(0x26d),'token':null};}else return _0x35a64c=validToken(_0x2e3352,_0x3e8f90),_0x35a64c[_0x253a1b(0x2c3)]('success')?{'allow':!![],'reason':_0x253a1b(0x122),'token':_0x2e3352}:{'allow':![],'reason':_0x253a1b(0x26d),'token':null};}else return{'allow':!![],'reason':_0x253a1b(0x2a2),'token':null};};if(settings['whitelistEnabled']){let _0x5cc67b=[...settings[_0x5db563(0x2d5)],_0x5db563(0x2f8),_0x5db563(0x2a0),'127.0.0.1'];if(_0x5cc67b['includes'](_0x3b6856))return _0x16b5fe(_0x59fcd0);else{_0x35a64c=validToken(_0x59fcd0,_0x3e8f90);if(_0x35a64c[_0x5db563(0x2c3)](_0x5db563(0x118)))return _0x16b5fe(_0x59fcd0);else{if(telegramIpApproved(_0x3e8f90)){const _0x45f063=generateToken(_0x3e8f90);return _0x35a64c=_0x16b5fe(_0x59fcd0),_0x35a64c['allow']?{'allow':!![],'reason':_0x5db563(0x116),'token':_0x45f063}:_0x35a64c;}else return settings[_0x5db563(0x20e)]?{'allow':![],'reason':_0x5db563(0x285),'token':null}:{'allow':![],'reason':_0x5db563(0x14a),'token':null};}}}else return _0x16b5fe(_0x59fcd0);}function timelyDecrypt(_0x243a27,_0x4a06e0,_0x343185='@'){const _0x23c1dc=_0x5654c0;if(_0x243a27)try{const _0x1b4f05=decryptRSA(secure[_0x23c1dc(0x28e)],_0x243a27),_0x3077d7=_0x1b4f05[_0x23c1dc(0x1d4)](_0x343185)[0x0],_0x134228=_0x1b4f05[_0x23c1dc(0x1d4)](_0x343185)[0x1],_0x5ce3ab=new Date()[_0x23c1dc(0x270)]();if(_0x4a06e0){if(_0x5ce3ab-_0x134228<maxSecretAge*0x3e8)return _0x3077d7;else return![];}else return _0x3077d7;}catch(_0x28b47f){return![];}else return![];}const validToken=(_0x24b337,_0x580053)=>{const _0x191074=_0x5654c0,_0x442aca=devices[_0x580053]['ip'];if(!_0x24b337)return{'error':_0x191074(0x1b8)};for(let _0x2af8b1 of blacklist){if(_0x2af8b1[_0x191074(0x1e6)]==_0x24b337)return{'error':_0x191074(0x171)};}let _0x17aa03;try{_0x17aa03=jwt[_0x191074(0x167)](_0x24b337,secure['secret']+_0x580053);}catch{return{'error':'Invalid\x20authentication\x20token\x20(1)'};}if(!_0x17aa03[_0x191074(0x2c3)]('clientip')&&!_0x17aa03[_0x191074(0x2c3)](_0x191074(0x2f0))||!_0x17aa03[_0x191074(0x2c3)](_0x191074(0x237)))return{'error':'Invalid\x20authentication\x20token\x20(2)'};if(!_0x17aa03[_0x191074(0x2c3)](_0x191074(0x2f0))&&_0x17aa03[_0x191074(0x2c3)](_0x191074(0x26a))){const {clientip:_0x31bc21}=_0x17aa03;return _0x442aca==_0x31bc21?{'success':_0x191074(0x245)}:{'error':_0x191074(0x1a5)};}else{if(_0x17aa03['hasOwnProperty'](_0x191074(0x2f0))&&_0x17aa03[_0x191074(0x2c3)]('clientip')){const {username:_0x59b0a3,clientip:_0x354727}=_0x17aa03;return settings[_0x191074(0x257)]==_0x59b0a3&&_0x442aca==_0x354727?{'success':_0x191074(0x245)}:{'error':_0x191074(0x22d)};}}},generateLoginToken=_0x43480a=>{const _0x55e680=_0x5654c0;if(_0x43480a){const _0x50b1ea=devices[_0x43480a]['ip'];return jwt[_0x55e680(0x13f)]({'username':settings['bbUsername'],'clientip':_0x50b1ea},secure[_0x55e680(0x175)]+_0x43480a,{'expiresIn':tokenRefresh*0x3c,'allowInsecureKeySizes':!![]});}else return![];},generateToken=_0x43ac93=>{const _0x2fb30a=_0x5654c0;if(_0x43ac93){const _0x293fe5=devices[_0x43ac93]['ip'];return jwt[_0x2fb30a(0x13f)]({'clientip':_0x293fe5},secure[_0x2fb30a(0x175)]+_0x43ac93,{'expiresIn':devices[_0x43ac93][_0x2fb30a(0x204)][_0x2fb30a(0x174)]*0x3c,'allowInsecureKeySizes':!![]});}else return![];},telegramIpApproved=_0x35f0fa=>{const _0x513981=_0x5654c0;let _0x218d79=![];return devices[_0x35f0fa][_0x513981(0x204)]&&devices[_0x35f0fa][_0x513981(0x204)][_0x513981(0x174)]!='reject'&&(_0x218d79=devices[_0x35f0fa][_0x513981(0x204)][_0x513981(0x26a)]==devices[_0x35f0fa]['ip']&&new Date()[_0x513981(0x270)]()-devices[_0x35f0fa][_0x513981(0x204)][_0x513981(0x26e)]<devices[_0x35f0fa][_0x513981(0x204)]['expiry']*0x3c*0x3e8),_0x218d79;},telegram2FaApproved=_0x3c6bc2=>{const _0x1527f0=_0x5654c0;let _0x31dea8=![];return devices[_0x3c6bc2][_0x1527f0(0x10d)]&&devices[_0x3c6bc2]['telegram2FaApproval'][_0x1527f0(0x174)]!=_0x1527f0(0x12d)&&(_0x31dea8=devices[_0x3c6bc2][_0x1527f0(0x10d)][_0x1527f0(0x26a)]==devices[_0x3c6bc2]['ip']&&new Date()[_0x1527f0(0x270)]()-devices[_0x3c6bc2][_0x1527f0(0x10d)][_0x1527f0(0x26e)]<devices[_0x3c6bc2][_0x1527f0(0x10d)][_0x1527f0(0x174)]*0x3c*0x3e8),_0x31dea8;},normalizeIP=_0x2dc26b=>{const _0x2fd5b4=_0x5654c0;let _0x53ba79=null,_0x3cfe69=null;if(ipaddr[_0x2fd5b4(0x15f)](_0x2dc26b)){const _0x32d69c=ipaddr['parse'](_0x2dc26b);_0x32d69c[_0x2fd5b4(0x1d8)]()===_0x2fd5b4(0x2c0)?(_0x32d69c['isIPv4MappedAddress']()&&(_0x53ba79=_0x32d69c['toIPv4Address']()[_0x2fd5b4(0x123)]()),_0x3cfe69=_0x32d69c[_0x2fd5b4(0x123)]()):(_0x53ba79=_0x32d69c[_0x2fd5b4(0x123)](),_0x3cfe69=_0x32d69c[_0x2fd5b4(0x2e1)]()[_0x2fd5b4(0x123)]());}return{'show':_0x53ba79?_0x53ba79:_0x3cfe69,'store':_0x3cfe69};};function formatDate(_0x5d0ca0){const _0x310d48=_0x5654c0;return _0x5d0ca0[_0x310d48(0x239)]()+'/'+(_0x5d0ca0['getMonth']()+0x1)[_0x310d48(0x123)]()[_0x310d48(0x21c)](0x2,'0')+'/'+_0x5d0ca0[_0x310d48(0x20a)]()[_0x310d48(0x123)]()[_0x310d48(0x21c)](0x2,'0')+'\x20'+_0x5d0ca0['getHours']()['toString']()['padStart'](0x2,'0')+':'+_0x5d0ca0['getMinutes']()[_0x310d48(0x123)]()[_0x310d48(0x21c)](0x2,'0')+':'+_0x5d0ca0[_0x310d48(0x254)]()[_0x310d48(0x123)]()[_0x310d48(0x21c)](0x2,'0');}function sleep(_0x14e7b0){return new Promise(_0x41887e=>setTimeout(_0x41887e,_0x14e7b0));}